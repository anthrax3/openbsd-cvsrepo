head	1.12;
access;
symbols;
locks; strict;
comment	@# @;


1.12
date	2006.09.30.08.55.04;	author jufi;	state dead;
branches;
next	1.11;

1.11
date	2003.11.03.14.19.31;	author horacio;	state Exp;
branches;
next	1.10;

1.10
date	2003.10.30.18.00.22;	author horacio;	state Exp;
branches;
next	1.9;

1.9
date	2002.09.10.17.32.02;	author jufi;	state Exp;
branches;
next	1.8;

1.8
date	2002.09.09.11.54.47;	author jufi;	state Exp;
branches;
next	1.7;

1.7
date	2002.08.27.12.20.06;	author jufi;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.24.07.10.54;	author jufi;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.14.01.03.42;	author jufi;	state Exp;
branches;
next	1.4;

1.4
date	2001.11.25.22.18.39;	author jufi;	state Exp;
branches;
next	1.3;

1.3
date	2001.08.29.17.58.43;	author jufi;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.21.15.48.36;	author jufi;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.11.06.28.56;	author jufi;	state Exp;
branches;
next	;


desc
@@


1.12
log
@not maintained anymore, time to go.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>10 - System Management</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-2">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 1998-2003 by OpenBSD.">
</head>

<body bgcolor= "#ffffff" text= "#000000">

<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif">
<p>
<font color= "#0000e0">
<a href= "index.html">[FAQ Index]</a>
<a href= "faq9.html">[Sekce 9 - Pøechod z Linuxu]</a>
<a href= "faq11.html">[Sekce 11 - Ladìní výkonu]</a>
</font>

<h1><font color="#e00000">10 - System Management</font></h1>
<hr>
 
<p>
<h3>Obsah</h3>
<ul>
<li><a href="#wheel"         >10.1 - Pøíkaz 'su root' hlásí, ¾e jsem ve ¹patné skupinì</a>
<li><a href="#DupFS"         >10.2 - Jak zálohovat filesystem?</a>
<li><a href="#rc"            >10.3 - Jak spustit démona spolu se systémem? (pøehled rc(8))</a>
<li><a href="#RelayingDenied">10.4 - Proè dostanu hlá¹ku relaying
	access denied  pøi posílání mailu pøes OpenBSD systém?</a>
<li><a href="#POP"           >10.5 - Nastavil jsem POP, ale dostávám chybová
	hlá¹ení pøi získávání mailu pøes POP. Co dìlat?</a>
<li><a href="#SendmailDNS"   >10.6 - Proè Sendmail ignoruje /etc/hosts?</a>
<li><a href="#HTTPS"         >10.7 - Nastavení Secure HTTP Serveru pou¾itím SSL(8)</a>
<li><a href="#vipw"          >10.8 - Zmìnil jsem /etc/passwd  pomoci vi(1), ale
	vypadá to, ¾e se nic nezmìnilo. Proè?</a>
<li><a href="#AddDelUser"    >10.9 - Jak pøidat/smazat u¾ivatele?</a>
<li><a href="#FTPOnly"       >10.10 - Jak vytvoøit ftp-only úèet?</a>
<li><a href="#Quotas"        >10.11 - Nastavení diskových kvót</a>
<li><a href="#Kerberos"      >10.12 - Nastavení Kerberos klient/server</a>
<li><a href="#AnonFTP"       >10.13 - Nastavení anonymního FTP Serveru</a>
<li><a href="#ftpchroot"     >10.14 - Omezení u¾ivatele na jeho domovský adresáø v fptd(8)</a>
<li><a href="#Patches"	     >10.15 - Aplikování patchù v OpenBSD.</a>
<li><a href="#httpdchroot"   >10.16 - Tell me about chroot() Apache?</a>
<li><a href="#rootshell"     >10.17 - I don't like the standard root shell!</a>
<li><a href="#ksh"           >10.18 - What else can I do with ksh?</a>
</ul>

<hr>

<p>
<a name= "wheel"></a>
<h2>10.1 - Proè to hlásí, ¾e jsem ve ¹patné skupinì, kdy¾ dám su root?</h2>

<p>
U¾ivatel musí být dopsán ruènì do skupiny  <kbd>&quot;wheel&quot;</kbd>.
Je to pøedev¹ím z bezpeènostních dùvodù a mìli byste být opatrní v
otázce, koho do této skupiny dopí¹ete. U¾ivatelé, kteøí jsou na OpenBSD
ve skupinì <kbd>wheel</kbd> mohou pou¾ívat pøíkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">
su(1)</a>
k tomu, aby se stali superu¾ivatelem. U¾ivatelé, kteøí nejsou v této
skupinì nemohou pou¾ít su(1). 
Pøíklad odpovídajícího øádku z <kbd>/etc/group</kbd> , kde je u¾ivatel
<strong>ericj</strong> ve skupinì <kbd>&quot;wheel&quot;</kbd>.

<p>
Pokud pøidáváte nového u¾ivatele pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">
adduser(8)</a>,
mù¾ete ho doplnit do skupiny wheel tak, ¾e na dotaz "<tt>Invite
<i>user</i> into other groups:</tt>" odpovíte wheel.

<blockquote><pre>
wheel:*:0:root,ericj
</pre></blockquote>

<p>
Jiný zpùsob , jak dát u¾ivatelùm omezený pøístup k superu¾ivatelovým
privilegiim, bez pøipsání do skupiny <kbd>&quot;wheel&quot;</kbd>, je pou¾ití pøíkazu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">
sudo(8)</a>.

<p>
<a name= "DupFS"></a>
<h2>10.2 - Jak zálohovat filesystém?</h2>
</p>

<p>
Pro duplikování filesystému pou¾ijte 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&amp;sektion=8">dump(8)</a> 
a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&amp;sektion=8">restore(8)</a>. 
Napø. pro duplikaci v¹eho pod adresáøem <kbd>SRC</kbd> do adresáøe
<kbd>DST</kbd> proveïte:

<blockquote><pre>
# <strong>cd /SRC; dump 0f - . | (cd /DST; restore -rf - )</strong>
</pre></blockquote>

<p>
dump dává mnoho mo¾ností jak zálohovat a mù¾e být zbyteèné pou¾ít tento
silný pøíkaz, pokud chcete duplikovat jenom èást filesystému.
Pøíkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&amp;sektion=1">tar(1)</a>
bývá pro tyto operace výhodnìj¹í. Formát je velmi podobný:

<blockquote>
<pre>
# <strong>cd /SRC; tar cf -  . | (cd /DST; tar xpf - )</strong>
</pre>
</blockquote>

<p>
<a name= "rc"></a>
<h2>10.3 - Jak spustit démona spolu se systémem? ( Pøehled rc(8))</h2>
</p>

<p>
OpenBSD pou¾ívá startovací skripty ve stylu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&amp;sektion=8">rc(8)</a>.
Tento pøístup pou¾ívá jen nìkolik klíèových souborù.
</p>

<ul>
    <li>/etc/rc - Hlavní skript. Nemìl by být editován.
    <li>/etc/rc.conf - Konfiguraèní skirpt pou¾ívaný <i>/etc/rc</i> pro
      získání informací o tom, které démony nastartovat.
    <li>/etc/rc.conf.local - Konfiguraèní soubor, kterým je mo¾né pøepsat
    nastavení v /etc/rc.conf, co¾ je vhodné pro lidi, kteøí èasto
    provádìjí upgrade.
    <li>/etc/netstart - Skript pro inicializaci sítì. Nemìl by se editovat.
    <li>/etc/rc.local - Skript pou¾ívaný pro lokální administraci.
      Obsahuje lokálnì specifické informace.
    <li>/etc/rc.securelevel - Skript spou¹tìjící pøíkazy pøed zmìnou
      security levelu. 
      Viz. 
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&amp;sektion=8">init(8)</a>
    <li>/etc/rc.shutdown - Skript spou¹tìný pøi shutdownu. Sem umístìte
      v¹e co uznáte za vhodné k provedení pøi ukonèení systému.
      Viz. 
      <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&amp;sektion=8">rc.shutdown(8)</a>
</ul>

<h3>Jak pracuje rc(8) ?</h3>

<p>
Hlavní soubory, na které by se administrátor mìl koncentrovat jsou <i>/etc/rc.conf</i>
(nebo <i>/etc/rc.conf.local</i>), 
<i>/etc/rc.local</i> a <i>/etc/rc.shutdown</i>. Prùbìh procedury  rc(8)
je následující:

Po nabootování jádra se startuje <i>/etc/rc</i>:
<ul>
    <li>Kontrola filesystému. Je pøeskoèeno, pokud exituje soubor
      /etc/fastboot , co¾ není ale obecnì dobrý nápad.
    <li>Konfiguraèní promìnné se naèítají z <i>/etc/rc.conf</i> a poté z
    	<i>/etc/rc.conf.local</i>.
    <li>Filesystémy jsou namontovány
    <li>Je smazáno <i>/tmp</i> a uchovají se v¹echny soubory od editorù
    <li>Konfigurace sítì pomocí <i>/etc/netstart</i>
        <ul>
        <li>Nastavení sí»ových rozhraní.
        <li>Nastavení hostname, domainname, atd.
        </ul>
    <li>Start systémových démonù
    <li>Rùzné kontroly. (quoty, savecore, atd.)
    <li>Spou¹tìjí se lokální démoni z <i>/etc/rc.local</i>
</ul>

<h3>Startování démonù a slu¾eb, které pøicházejí spolu s OpenBSD</h3>

<p>
Vìt¹ina démonù a slu¾eb, které pøicházejí pùvodnì s OpenBSD se startuje
pøi bootu po editování souboru <i>/etc/rc.conf</i> . Nejprve se
podívejte na standardní
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.conf">/etc/rc.conf</a>.
Vidíte øádky jako tento:

<blockquote><pre>
ftpd_flags=NO           # for non-inetd use: ftpd_flags="-D"
</pre></blockquote>

<p>
Tento øádek øíká, ¾e ftpd nebude startovat pøi bootu. (pøinejmen¹ím ne z
rc(8), pøeètìte si <a href="faq10.html#AnonFTP">Anonymous FTP FAQ</a> o
ftpd). Pro ka¾dý pøípad má ka¾dý øádek také komentáø spolu s volbami
pro <b>NORMALNÍ</b> pou¾ití démona nebo slu¾by. To neznamená, ¾e musíte
spou¹tìt démona s tìmito volbami. Pou¾ijte man(1) a zjistíte jaké volby
pro tu kterou slu¾bu pou¾ít, aby splòovala dané po¾adavky. Napø. pùvodní
øádka pro httpd(8).
</p>

<blockquote><pre>
httpd_flags=NO          # for normal use: "" (or "-DSSL" after reading ssl(8))
</pre></blockquote>

<p>
Jak vidíte, obvykle pøi startu httpd nepotøebujete ¾ádné dal¹í volby.
Proto je øádek &quot;<b> httpd_flags=""</b>&quot; v podstatì zbyteèný.
Ale jakmile budete chtít httpd s ssl podporou (více viz.
<a href="#HTTPS">SSL FAQ</a> nebo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&amp;sektion=8">ssl(8)</a>),
pak budete muset doplnit volbu  &quot;httpd_flags="-DSSL"&quot;.

<p>
Dobrý pøístup je nikdu se nedtýkat samotného <i>/etc/rc.conf</i>.
Namísto totho, vytvoøit soubor <i>/etc/rc.conf.local</i>, nakopírovat
pouze ty øádky z <i>/etc/rc.conf</i>, které se budou mìnit a zmìnit je
podle potøeby. Tak se stane upgradování snadnìj¹í -- v¹echny zmìny jsou v
jednom souboru.
 
<h3>Spou¹tìní lokálních démonù a konfigurace</h3>

<p>
Pro démony, které pøiinstalujete do systému pomocí portù nebo jiným
zpùsobem pou¾ijte soubor <i>/etc/rc.local</i>. Napø. jste nainstalovali
démona, který se nachází v  /usr/local/sbin/daemonx, a chcete ho pou¹tìt
pøi bootu. Pøidejte do souboru  <i>/etc/rc.local</i> øádek:

<blockquote><pre>
if [ -x /usr/local/sbin/daemonx ]; then
             echo -n ' daemonx';       /usr/local/sbin/daemonx
fi
</pre></blockquote>

<p>
(Pokud se démon automaticky po startu netedetachuje, nezapomeòte pøidat
"&amp;" na konec pøíkazové øádky.)

<p>
Od této chvíle bude démon pou¹tìn pøi startu. Rovnì¾ uvidíte v¹echny
chybová hlá¹ení, které démon vyrobí. Normální start bez chyb bude
vypadat takto:

<blockquote><pre>
Starting local daemons: daemonx.
</pre></blockquote>

<h3>rc.shutdown</h3>

<p>
<i>/etc/rc.shutdown</i> je skript pou¹tìný pøi ukonèení systému. Pokud
máte apm, mù¾ete nastavit &quot;powerdown=YES&quot;. Dostanete
ekvivalent &quot;shutdown -p&quot;. 

<p>
<a name= "RelayingDenied"></a>
<h2>10.4 - Proè dostanou u¾ivatelé posílající pøes OpenBSD zvenku emaily
hlá¹ku relaying access denied?</h2>

<p>
Zkuste:
</p>
<blockquote><pre>
# <strong>cat /etc/mail/sendmail.cf | grep relay-domains</strong>
</pre></blockquote>

<p>
Výstup by mìl vypadat asi takto:
</p>
<blockquote><pre>
FR-o /etc/mail/relay-domains
</pre></blockquote>

<p>
Pokud tento soubor neexistuje, vytvoøte ho. Budete do nìj dále muset
pøidat stroje, které budou posílat vzdálenì emaily:
</p>

<blockquote><pre>
.domain.com    #Povol relay pro/z stroje v domain.com
sub.domain.com #Povol relay pro/z sub.domain.com a v¹echny stroje v této doménì
10.2           #Povol relay ze v¹ech strojù z IP sítì 10.2.*.*
</pre></blockquote>

<p>
Nezapomeòte poslat démonu sendmail signál 'HangUP', (signál, který pro
vìt¹inu démonù znamená znovunaètení jejich konfiguraèního souboru):

</p>
<blockquote><pre>
# <Strong>kill -HUP `head -1 /var/run/sendmail.pid`</strong>
</pre></blockquote>
<p>

<h3>Související odkazy</h3>

<p>
<ul>
<li><a href="http://www.sendmail.org/~ca/email/relayingdenied.html">http://www.sendmail.org/~ca/email/relayingdenied.html</a>
<li><a href="http://www.sendmail.org/tips/relaying.html">http://www.sendmail.org/tips/relaying.html</a>
<li><a href="http://www.sendmail.org/antispam.html">http://www.sendmail.org/antispam.html</a>
</ul>

<p>
<a name= "POP"></a>
<h2>10.5 - Nastavil jsem POP, ale dostávám chybová hlá¹ení pøi získávání
mailu pøes POP.</h2>

<p>
Vìt¹ina problému s POP jsou v doèasných souborech a lock souborech.
Pokud vám pop server po¹le chybovou hlá¹ku jako:
</p>

<blockquote><pre>
-ERR Couldn't open temporary file, do you own it?
</pre></blockquote>

<p>
Zkuste nastavit práva takto:

<blockquote><pre>
práva ve  /var
drwxrwxr-x   2 bin     mail     512 May 26 20:08 mail


práva ve /var/mail
-rw-------   1 username   username        0 May 26 20:08 username
</pre></blockquote>

<p>
Jiná vìc, kterou zkontrolujte je, zda u¾ivatel skuteènì vlastní sobì
odpovídající soubor ve /var/mail. Samozøejmì, ¾e by tomu tak mìlo být,
ale pokud ne, tak i toto mù¾e být problém!

<p>
Samozøejmì, tím ¾e udìláte /var/mail zapisovatelný pro skupinu mail,
otevírá se zde prostor pro jisté bezpeènostní problémy. Pravdìpodobnì s
tím ale nebudete mít problémy. Ov¹em mohly by nastat (máte-li napø.
velmi nav¹tìvovaný server nebo jste-li ISP,...)!  
Existuje nìkolik POP serverù které mù¾ete nainstalovt pøímo pomocí stromu
portù. Pokud je to mo¾né, pou¾ijte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=popa3d&amp;sektion=8">popa3d</a>,
který je dostupný v základní instalaci OpenBSD.
Nebo mù¾ete mít ¹patnì
nastavené volby pro va¹eho démona (napø. dot locking). Nebo staèí kdy¾
jenom zmìníte adresáø, ve kterém démon vytváøí lock soubory (aèkoliv pak
by lock souborù byl hodnotný pouze pro POP démona.)

<p>
<b>PS:</b> V¹imnìte si, ¾e OpenBSD nemá skupinu se jménem
&quot;mail&quot;. Pokud ji potøebujete, musíte ji vytvoøit v souboru <i>/etc/group</i>. Napø.
øádek jako:

<blockquote><pre>
mail:*:6:
</pre></blockquote>

<p>
by mìl být dostaèující.

<a name="SendmailDNS"></a>
<h2>10.6 - Proè Sendmail ignoruje <tt>/etc/hosts</tt>?</h2>

<p>
Defaultnì Sendmail pou¾ívá pro pøeklad jmen DNS, ne soubor
<tt>/etc/hosts</tt>. Toto chování je mo¾né zmìnit pomocí souboru
<tt>/etc/mail/service.switch</tt>.

<p>
Pokud chcete prohledat soubor hosts pøed dotazem DNS serveru, vytvoøte
soubor <tt>/etc/mail/service.switch</tt> obsahující následující øádek:
<pre>
  hosts	  files dns
</pre>

<p>
Pokud chcete prohledávat JENOM soubor hosts, pou¾ijte následující:
<pre>
  hosts   files
</pre>

<p>
Po¹lete Sendmailu signál HUP:
<pre>
     # <b>kill -HUP `head -1 /var/run/sendmail.pid`</b>
</pre>

<p>
a zmìny se projeví.

<p>
<a name= "HTTPS"></a>
<h2>10.7 - Nastavení Secure HTTP serveru s SSL(8)</h2>

<p>
OpenBSD je dodáváno s httpd pøipraveným pro SSL a RSA knihovnami. 

Pro pou¾ití 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>, 
musíte nejprve vytvoøit certifikát. Ten pak ulo¾it do
<i>/etc/ssl/private/</i> s pøíslu¹ným klíèem v <i>/etc/ssl/private/</i>.
Následujicí ukázky najdete také v manuálové stránce
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&amp;sektion=8">ssl(8)</a>. 
Tam mù¾ete také nalézt dal¹í informace. Zde se jen omezíme na ukázku
toho, jak vytvoøit RSA certifikát pro web server, ne DSA certifikát.
Chcete-li vìdìt více, podívejte se do manuálové stránky
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&amp;sektion=8">ssl(8)</a>.

<p>
Pro secure HTTP potøebujete nejprve vytvoøit pro démona
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>
bezpeènostní certifikát. Následující kroky jsou vybrány z manálové
stránky týkající se
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>.
V ní nadjete dal¹í informace. FAQ pouze uká¾e jak vytvoøit RSA
certifikát pro web server, nikoliv DSA server certifikát. Pro jeho
vytvoøení si pøeètìte manuálovou stránku
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>.

<p>
Nejprve musíte vytvoøit pro vá¹ server klíè a certifikát. Chcete-li
pou¾ívat RSA, musíte upgradovat va¹i libssl. Nyní vytvoøte klíè.
Pou¾ijte OpenSSL:

<div style="margin-left: 2em">
<pre>
# <strong>openssl genrsa -out /etc/ssl/private/server.key 1024</strong>
</pre>
</div>

<p>
Nebo, pokud si pøejete, aby byl klíè za¹ifrován heslem, které budete
muset zadat pøi startu serveru
</p>

<div style="margin-left: 2em">
<pre>
# <strong>openssl genrsa -des3 -out /etc/ssl/private/server.key 1024</strong>
</pre>
</div>

<p>
Dal¹ím krokem je vygenerovat Certificate Signing Request, který pou¾ívá
Certifikaèní Autorita (CA) , která podepí¹e vá¹ certifikát. Pou¾ijte
pøíkaz:
</p>

<div style="margin-left: 2em">
<pre>
# <strong>openssl req -new -key /etc/ssl/private/server.key -out /etc/ssl/private/server.csr</strong>
</pre>
</div>

<p>
Soubor <i>server.csr</i> mù¾ete pak pøedat Certifikaèní Autoritì, která
podepí¹e klíè. Jedna taková CA je  <b>Thawte Certification</b>, která je
k dispozici na <a href="http://www.thawte.com/">http://www.thawte.com/</a>.
</p>

<p>
Pokud si to nemù¾ete dovolit, nebo vám staèí podepsat si certifikát
sami, mù¾ete pou¾ít následujcí.

<div style="margin-left: 2em">
<pre>
# <strong>openssl x509 -req -days 365 -in /etc/ssl/private/server.csr \
       -signkey /etc/ssl/private/server.key -out /etc/ssl/server.crt</strong>
</pre>
</div>

<p>
Se soubory <i>/etc/ssl/server.crt</i> a
<i>/etc/ssl/private/server.key</i> na svých místech, byste mìli být
schopni nastartovat démona  
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a> 
s volbou  <b>-DSSL</b> (viz. <a href="#rc">sekce o rc(8)</a> v
této faq), èím¾ umo¾níte https transakce na portu 443.
</p>

<p>
<a name= "vipw"></a>
<h2>10.7 - Zeditoval jsem /etc/passwd, ale vypadá to, ¾e se nic
nezmìnilo. Proè?</h2>

<p>
Pokud editujete /etc/passwd, zmìny které provedete budou ztraceny.
OpenBSD generuje /etc/passwd dynamicky programem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&amp;sektion=8">pwd_mkdb(8)</a>. 
Hlavní soubor s hesly je v OpenBSD <i>/etc/master.passwd</i>. Dle pwd_mkdb(8),

<blockquote><pre>
FILES
	/etc/master.passwd  	souèasný soubor s hesly
	/etc/passwd		soubor s hesly ve formátu Verze 7
	/etc/pwd.db		databázový soubor s hesly (nezabezpeèený)
	/etc/pwd.db.tmp		doèasný soubor
	/etc/spwd.db		databázový soubor s hesly (zabezpeèený)
	/etc/spwd.db.tmp	doèasný soubor
</pre></blockquote>

<p>
V tradièním Unixovém souboru s hesly, jako je /etc/passwd, jsou v¹echny
informace vèetnì u¾ivatelova za¹ifrovaného hesla k dispozici pro ka¾dého
kdo má do systému pøístup (a /etc/passwd je pak vynikajícím cílem pro
programy jako napø. Crack.) 4.4BSD pøi¹lo s novým souborem
master.passwd, který má roz¹íøený formát (navíc dal¹í vlastnosti spolu s
tìmi, které obsahovalo staré /etc/passwd), a který je èitelný pouze pro
superu¾ivatele. Pro rychlej¹í pøístup k datùm  v tìchto souborech
pou¾ívají knihovní funkce obvykle soubory /etc/pwd.db a /etc/spwd.db.

<p>
OpenBSD pøidává navíc prostøedek, kterým lze editovat soubor s hesly.
Jmenuje se vipw(8). Vipw pou¾ívá vi (nebo vá¹ oblíbený editor
specifikovaný v promìnné $EDITOR) k editování souboru /etc/master.passwd
. Poté co provedete editaci, vipw(8) znovu vytvoøí soubory /etc/passwd,
/etc/pwd.db a /etc/spwd.db na základì zmìn, které udìláte. Vipw rovnì¾
provádí zamknutí tìchto souborù, aby nikdo jiný nemohl mìnit tyto
soubory ve stejnou chvíli.

<p>
<a name= "AddDelUser"></a>
<h2>10.9 - Jaký je nejlep¹í zpùsob pro pøidávání / odstraòování
u¾ivatelù?</h2>

<p>
OpenBSD poskytuje dva pøíkazy pro snadné pøidávání u¾ivatelù do systému:
<ul>
<li><a href="#adduser">adduser(8)</a>
<li><a href="#user">user(8)</a>
</ul>

U¾ivatele mù¾ete také pøidávat ruènì, pou¾itím 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw(8)</a>,
ale toto je více obtí¾né pro vìt¹inu operací.

<a name="adduser"></a>
<p>
Nejjednodu¹¹í zpùsob jak pøidat v OpenBSD u¾ivatele je pou¾ít skript
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>.
Konfiguraci tohoto programu mù¾ete zmìnit v
<strong>/etc/adduser.conf</strong>.  
adduser(8) provádí kontroly konzistence souborù
<strong>/etc/passwd</strong>,
<strong>/etc/group</strong>, a shell databáze.
Vytváøí také $HOME
adresáøe. Mù¾e dokonce i posílat u¾ivatelùm uvítací zprávy. V¹echny tyto
vlastnosti mohou být zmìneny podle va¹ich po¾adavkù. 
Budeme pøidávat u¾ivatele
<b>testuser</b>. Jeho domovský adresáø $HOME bude umístìn v
<i>/home/testuser</i>, u¾ivatel bude ve skupinì <b>guest</b> a jeho
pøíkazový interpret bude <i>/bin/ksh</i>.
</p>

<blockquote><pre>
# <strong>adduser</strong>
Use option ``-silent'' if you don't want to see all warnings and questions.

Reading /etc/shells
Reading /etc/login.conf
Check /etc/master.passwd
Check /etc/group

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username []: <b>testuser</b>
Enter full name []: <b>Test FAQ User</b>
Enter shell csh ksh nologin sh [sh]: <b>ksh</b>
Uid [1002]: <b><i>Enter</i></b>
Login group testuser [testuser]: <b>guest</b>
Login group is ``guest''. Invite testuser into other groups: guest no 
[no]: <b>no</b>
Login class auth-defaults auth-ftp-defaults daemon default staff 
[default]: <b><i>Enter</i></b>
Enter password []: <b><i>Type password, then Enter</i></b>
Enter password again []: <b><i>Type password, then Enter</i></b>

Name:        testuser
Password:    ****
Fullname:    Test FAQ User
Uid:         1002
Gid:         31 (guest)
Groups:      guest
Login Class: default
HOME:        /home/testuser
Shell:i      /bin/ksh
OK? (y/n) [y]: <b>y</b>

Added user ``testuser''
Copy files from /etc/skel to /home/testuser
Add another user? (y/n) [y]: <b>n</b>
Goodbye!
</pre></blockquote>

<p>
Pro odstranìní u¾ivatele byste mìli pou¾ít pøíkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmuser&amp;sektion=8">rmuser(8)</a>
Ten odstraní v¹e co se v systému k u¾ivateli vztahuje. Odstraní polo¾ky v
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&amp;sektion=1">crontab(1)</a>,
jeho domovský adresáø (pokud je vlastnìn daným u¾ivatelem), a jeho
po¹tu. Samozøejmì odstraní i jeho záznamy z
<strong>/etc/passwd</strong> a <strong>/etc/group</strong>. Následuje
ukázka odstranìní u¾ivatele, kterého jsme pøidali vý¹e ze systému.
V¹imnìte si výzvy k zadání jména u¾ivatele a zda si pøejete odstranit
jeho domovský adresáø.
</p>

<blockquote><pre>
# <strong>rmuser</strong>
Enter login name for user to remove: <strong>testuser</strong>
Matching password entry:

testuser:$2a$07$ZWnBOsbqMJ.ducQBfsTKUe3PL97Ve1AHWJ0A4uLamniLNXLeYrEie:1002
:31::0:0:Test FAQ User:/home/testuser:/bin/ksh

Is this the entry you wish to remove? <strong>y</strong>
Remove user's home directory (/home/testuser)? <strong>y</strong>
Updating password file, updating databases, done.
Updating group file: done.
Removing user's home directory (/home/testuser): done.
</pre></blockquote>

<a name="user"></a>
<h3>Pøidání u¾ivatele pomocí user(8)</h3>

<p>
Tyto programy jsou ménì interaktivní ne¾ pøíkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>,
který zjednodu¹¹uje pou¾ívání tìchto skriptù.
</p>

<p>
Celá mno¾ina tìchto pøíkazù je:
<ul>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=group&amp;sektion=8">group(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupadd&amp;sektion=8">groupadd(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupdel&amp;sektion=8">groupdel(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupinfo&amp;sektion=8">groupinfo(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupmod&amp;sektion=8">groupmod(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&amp;sektion=8">user(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&amp;sektion=8">useradd(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userdel&amp;sektion=8">userdel(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userinfo&amp;sektion=8">userinfo(8)</a>
<li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&amp;sektion=8">usermod(8)</a>
</ul>

<h4>Vlastní pøidání u¾ivatele</h4>

<p>
Jak ji¾ bylo naznaèeno, pøíkaz user(8) není interaktivní, proto
nejpohodlnìj¹í zpùsob pøidání u¾ivatele je pøíkaz adduser(8). Pøíkaz
<i>/usr/sbin/user</i> je vlastnì jen frontend pro zbytek pøíkazù
<i>/usr/sbin/user*</i>. Proto pøíkaz <b>user add</b> a <b>useradd</b>
jsou naprosto stejné. Je jen na vás, kterou z
forem pou¾ijete. (Czech note: technicky jsou v¹echny
<i>/usr/sbin/user*</i> implementovány jako hardlinky, skuteènì tedy v¾dy
spou¹títe stejný pøíkaz, ale s jiným jménem a parametry.)
</p>

<p>
V následujícím pøíkladì budeme pøidávat stejného u¾ivatele jako v
pøípadì  <a href="#adduser">vý¹e</a>. useradd(8)  je mnohem jednodu¹¹í
pro èasté pou¾ívání, pokud znáte standardní nastavní pro pøidávání
u¾ivatele. Toto nastavení je ulo¾eno v <i>/etc/usermgmt.conf</i> a
prohlédnout si ho mù¾ete napøíklad takto:
</p>

<blockquote><pre>
$ <strong>user add -D</strong>
group           users
base_dir        /home
skel_dir        /etc/skel
shell           /bin/csh
inactive        0
expire          Null (unset)
range           1000..60000
</pre></blockquote>

<p>
Uvedená nastavení budou pou¾ita jako standardní, pokud nespecifikujete
na pøíkazové øádce vlastní. Napøíklad v pøípadì, ¾e chcete aby u¾ivatel
patøil do skupiny <b>guest</b>, ne <b>users</b>. Jistou nevýhodou pøi
pøidávání u¾ivatelù je, ¾e jejich hesla musí být specifikována na
pøíkazové øádce. Zadat musíte v¹ak za¹ifrované heslo, k tomu pou¾ijte
program
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=encrypt&amp;sektion=1">encrypt(1)</a>
Napøíklad standardním ¹ifrovacím algoritmem hesel pou¾ívaným v OpenBSD
je Blowfish se ¹estmi rundami. Pøíklad pou¾ití useradd(8).
</p>

<blockquote><pre>
$ <strong>encrypt -p -b 6</strong>
Enter string:
$2a$06$YOdOZM3.4m6MObBXjeZtBOWArqC2.uRJZXUkOghbieIvSWXVJRzlq
</pre></blockquote>

<p>
Nyní máme pøipravené za¹ifrované heslo, mù¾ete pokroèit k pøidání
u¾ivatele.
</p>

<blockquote><pre>
# <strong>user add -p '$2a$06$YOdOZM3.4m6MObBXjeZtBOWArqC2.uRJZXUkOghbieIvSWXVJRzlq' -u 1002 \
-s /bin/ksh -c "Test FAQ User" -m -g guest testuser</strong>
</pre></blockquote>

<p>
<b>Poznámka:</b> Ujistìte se, ¾e jste pou¾ili '' kolem øetìzce s heslem,
ne &quot;&quot; (dvojité uvozvky), proto¾e shell bude interpretovat tyto znaky pøedtím ne¾
pøedá parametry programu user(8). Souèasnì se ujistìte, ¾e specifikujete
volbu <b>-m</b>, pokud chcete vytváøet domovské adresáøe u¾ivatelù a
kopírovat do nich soubory <i>/etc/skel</i>.
</p>

<p>
Zda byl u¾ivatel vytvoøen korektnì mù¾ete zkontrolovat nìkolika
programy.  Jejich výèet následuje.
</p>

<blockquote><pre>
$ <strong>ls -la /home</strong>
total 14
drwxr-xr-x   5 root      wheel   512 May 12 14:29 .
drwxr-xr-x  15 root      wheel   512 Apr 25 20:52 ..
drwxr-xr-x  24 ericj     wheel  2560 May 12 13:38 ericj
drwxr-xr-x   2 testuser  guest   512 May 12 14:28 testuser
$ <strong>id testuser</strong>
uid=1002(testuser) gid=31(guest) groups=31(guest)
$ <strong>finger testuser</strong>
Login: testuser                         Name: Test FAQ User
Directory: /home/testuser               Shell: /bin/ksh
Last login Sat Apr 22 16:05 (EDT) on ttyC2
No Mail.
No Plan.
</pre></blockquote>

<p>
Navíc k tìmto pøíkazùm user(8) disponuje svou vlastní utilitou pro
zobrazení charakteristiky u¾ivatele, nazývá se userinfo(8).
</p>

<blockquote><pre>
$ <strong>userinfo testuser</strong>
login   testuser
passwd  *
uid     1002
groups  guest
change  Wed Dec 31 19:00:00 1969
class
gecos   Test FAQ User
dir     /home/testuser
shell   /bin/ksh
expire  Wed Dec 31 19:00:00 1969
</pre></blockquote>

<h4>Odstranìní u¾ivatele</h4>

<p>
Odstranìní u¾ivatele pomocí pøíkazù z okruhu utility user(8) se pou¾ívá
userdel(8). Je to velmi jednoduchý ale pou¾itelný pøíkaz. Pro odstranìní
u¾ivatele z posledního pøíkladu, jednodu¹¹e:
</p>

<blockquote><pre>
# <strong>userdel -r testuser</strong>
</pre></blockquote>

<p>
V¹imnìte si volby <b>-r</b>, kterou je nutno specifikovat pokud budete
chtít smazat s u¾ivatelem i jeho domovský adresáø. Jiná mo¾nost je
pou¾ít <b>-p</b> a ne  <b>-r</b>, co¾ uzamkne u¾ivatelský úèet, ale
neodstraní ¾ádné informace.
</p>

<p>
<a name= "FTPOnly"></a>
<h2>10.10 - Jak vytvoøím úèet pouze pro ftp (ne anonymní FTP!)?</h2>

<p>
Existuje nìkolik zpùsobù, bì¾né je pøidat <i>/usr/bin/false</i> do
<strong>/etc/shells</strong>. Poté pøi vytváøení u¾ivatele nastavte jeho
shell na /usr/bin/false. Takovýto u¾ivatel se nebude moci pøihlásit do
systému interaktivnì, ale bude vyu¾ívat prostøedkù, které bude ftp
poskytovat.
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&amp;sektion=8">adduser(8)</a>
dá tomuto u¾ivateli standardnì domovský adresáø
<i>/home/&lt;user&gt;</i>. Pokud vám to vyhovuje nemusíte nic mìnit,
pøesto mù¾ete specifikovat jakýkoliv jiný adresáø.  Mù¾ete zaøídit, aby
u¾ivatel byl schopen vidìt soubory pouze ve svém domovském adresáøi
pøidáním jeho u¾ivatelského jména do <i>/etc/ftpchroot</i>.
Pou¾itím volby the <b>-A</b> démona
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a>, 
mù¾ete dovolit pouze pøihlá¹ení na ftp s provedeným voláním chroot(2) !
</p>

<p>
<a name= "Quotas"></a>
<h2>10.11 - Nastavení kvót</h2>

<p>
Kvóty jsou pou¾ívány k omezení místa na disku, které mù¾e u¾ivatel
pou¾ít pro své úèely. V situaci s omezenými prostøedky mohou kvóty
výraznì pomoci. Kvóty lze nastavit dvìma rùznými zpùsoby.

<p>
První krok pøi nastavení kvót je uji¹tìní se, ¾e <tt>option QUOTA</tt>
nechybí v konfiguraèním souboru jádra. Tato volba je v jádru GENERIC.
Poté musíte oznaèit v souboru  <i>/etc/fstab</i> souborové systémy, pro
které budou nastaveny kvóty. Klíèová slova <tt>userquota</tt> a
<tt>groupquota</tt> pou¾ijte pro oznaèení ka¾dého s filesystémù, na
kterém budete kvóty pou¾ívat. Standardnì budou vytvoøeny soubory
<tt>quota.user</tt> a <tt>quota.group</tt> v koøenovém adresáøi ka¾dého
ze souborových systémù. Toto lze ovlivnit tak, ¾e specifikuje jméno
souboru v <tt>/etc/fstab</tt>, jako napø. 
"<tt>userquota=/var/quotas/quota.user</tt>". 
Pøíklad souboru <tt>/etc/fstab</tt> se zapnutými kvótami a s nestandarním
umístìním quota souboru.
</p>

<blockquote><pre>
/dev/wd0a / ffs rw,userquota=/var/quotas/quota.user 1 1
</pre></blockquote>

<p>
Nyní pøi¹el èas, kdy je tøeba nastavit u¾ivatelské kvóty. 
To provedete pomocí utility
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=edquota&amp;sektion=8">edquota(8)</a>.
Jednoduché pou¾ití je <strong>edquota &lt;user&gt;</strong>. edquota(8)
pou¾ívá editor vi(1) pro editování kvót, pokud není specifikována
promìnná prostøedí EDITOR a není nastavena na jiný editor. Napøíklad:

<blockquote><pre>
# <strong>edquota ericj</strong>
</pre></blockquote>

<p>
Vytvoøí výstup podobný tomuto:

<blockquote><pre>
Quotas for user ericj:
/: blocks in use: 62, limits (soft = 0, hard = 0)
    inodes in use: 25, limits (soft = 0, hard = 0)
</pre></blockquote>

<p>
Limity vytvoøíte tak, ¾e zeditujete øádky aby vypadaly napøíklad takto:

<blockquote><pre>
Quotas for user ericj:
/: blocks in use: 62, limits (soft = 1000, hard = 1050)
    inodes in use: 25, limits (soft = 0, hard = 0)
</pre></blockquote>

<p>
Alokace kvót je v 1k blocích.
V tomto pøípadì je softlimit nastaven na 1000k a hardlimit na 1050k.
Softlimit je limit, kdy je u¾ivatel pouze varován pøi jeho
pøekroèení a musí do vypr¹ení jistého èasového období zaøídit, aby
velikost místa, které vyu¾ívá, poklesla pod tento limit. Èasové období
lze nastavit pou¾itím volby <strong>-t</strong> pøíkazu edquota(8).  Po
uplynutí tohoto èasu je softlimit chápán systémem jako hardlimit. Co¾
vìt¹inou vede k znemo¾nìní alokování dal¹ího místa.

<p>
Nyní po nastavení kvót je potøeba kvóty spustit. Pou¾ijete pøíkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quotaon&amp;sektion=8">quotaon(8)</a>.
Napøíklad:

<blockquote><pre>
# <strong>quotaon -a</strong>
</pre></blockquote>

<p>
Tento pøíkaz projde <tt>/etc/fstab</tt> a nastaví kvóty na ka¾dém souborovém
systému, který jsme oznaèili pøíslu¹ným zpùsobem. Nyní jsou kvóty
nastaveny a fungují, prohlédnout si je mù¾ete programem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&amp;sektion=1">quota(1)</a>.
Pou¾itím pøíkazu <strong>quota &lt;user&gt;</strong> dostanete informaci
pro daného u¾ivatele. Zavoláte-li pøíkaz bez dal¹ích argumentù, vypí¹e
se statistika.
Napøíklad:

<blockquote><pre>
# <Strong>quota ericj</strong>
</pre></blockquote>

<p>
Vede na výstup podobný tomuto:

<blockquote><pre>
Disk quotas for user ericj (uid 1001):
     Filesystem  blocks   quota   limit   grace   files   quota   limit   grace
              /      62    1000    1050              27       0       0
</pre></blockquote>

<p>
Standardnì jsou kvóty nastavené v <tt>/etc/fstab</tt> spu¹tìny pøi bootu. 
Pro vypnutí kvót pou¾ijte 
<blockquote><pre>
# <strong>quotaoff -a</strong>
</pre></blockquote>
 

<p>
<a name= "Kerberos"></a>
<h2>10.12 - Jak nastavit klient a server Kerberos na OpenBSD</h2>

<p>
OpenBSD zahrnuje KerberosV jako pøedinstalovanou komponentu systému.
Pro více informací o KerberosV, z va¹eho OpenBSD systému, pou¾ijte pøíkaz:
<pre>
     # <b>info heimdal</b>
</pre>

<p>
<a name= "AnonFTP"></a>
<h2>10.13 - Nastavení anonymního FTP</h2>

<p>
Anonymní FTP umo¾òuje zpøístupòovat soubory u¾ivatelùm, kteøí nemají
úèet na va¹em poèítaèi, pomocí File Transfer Protokolu. Uvádíme pøehled
krokù pøi nastavení anonymního FTP serveru.

<h3>Pøidání úètu FTP</h3>

<p>
Nejprve na svém systému musíte mít úèet s názvem "ftp". Na tento úèet by
nemìlo být mo¾né se interaktivnì pøihlásit. Nastavíme domovský adresáø
na /home/ftp, ale mù¾ete specifikovat jaký chcete. Pøi pou¾ití
anonymního ftp bude ftp démon provádìt volání chroot(2) sebe sama do
adresáøe specifikovaného jako domovský adresáø u¾ivatele 'ftp'. Více si
pøeètìte v manuálových stránkách
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">ftp(8)</a> a
a 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a>. 
Musíme také pøidat /usr/bin/false do <i>/etc/shells</i>, co¾ je
&quot;shell&quot; , který dáme u¾ivateli ftp. To mu znemo¾ní se
pøihlásit, pøesto¾e mu dáme prázdné heslo. Staèí jednodu¹¹e <i>echo
/usr/bin/false &gt;&gt; /etc/shells</i>.  Pokud chcete, aby se tento
shell ukazoval v dotazech programu adduser, modifikujte také
<i>/etc/adduser.conf</i>.
</p>


<blockquote><pre>
# <strong>adduser</strong>
Use option ``-silent'' if you don't want to see all warnings and questions.

Reading /etc/shells
Reading /etc/login.conf
Check /etc/master.passwd
Check /etc/group

Ok, let's go.
Don't worry about mistakes. I will give you the chance later to correct any input.
Enter username []: <b>ftp</b>
Enter full name []: <b>anonymous ftp</b>
Enter shell csh false ksh nologin sh tcsh zsh [sh]: <b>false</b>
Uid [1002]: <b><i>Enter</i></b>
Login group ftp [ftp]: <b><i>Enter</i></b>
Login group is ``ftp''. Invite ftp into other groups: guest no 
[no]: <b>no</b>
Login class auth-defaults auth-ftp-defaults daemon default staff 
[default]: <b><i>Enter</i></b>
Enter password []: <b><i>Enter</i></b>
Set the password so that user cannot logon? (y/n) [n]: <b>y</b>

Name:        ftp
Password:    ****
Fullname:    anonymous ftp
Uid:         1002
Gid:         1002 (ftp)
Groups:      ftp
Login Class: default
HOME:        /home/ftp
Shell:       /usr/bin/false
OK? (y/n) [y]: <b>y</b>
Added user ``ftp''
Copy files from /etc/skel to /home/ftp
Add another user? (y/n) [y]: <b>n</b>
Goodbye!
</pre></blockquote>

<h3>Nastavení adresáøe</h3>

<p>
Spolu s novým u¾ivatelem jsme zalo¾ili také adresáø <i>/home/ftp</i>.
Pøesnì tak jak jsme chtìli. Musíme ale je¹tì provést nìkolik zmìn,
abychom v¹e pøipravili pro anonymní ftp. Tyto zmìny jsou opìt vysvìtleny
v manuálové stránce
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">ftp(8)</a> man page.

<p>
<b>NENÍ</b> nutné vytváøet adresáøe /home/ftp/usr nebo /home/ftp/bin.
<ul>
<li><i>/home/ftp</i> - Hlavní adresáø. Mìl by být vlastnìn u¾ivatelem
  root a práva pøístupu 555.</li>
<li><i>/home/ftp/etc</i> - Volitelné a nedoporuèuje se, slou¾í pøedev¹ím
  pro získání informací o u¾ivatelech, kteøí existují na daném stroji.
  Pokud chcete, aby anonymní ftp adresáø mìl asociován jména soubory s
  odpovídající jmény u¾ivatelù, zkopírujte sem /etc/pwd.db a /etc/group .
  Tento adresáø by mìl mít mód 511 a oba soubory by mìly mít práva 444.
  Slou¾í ke získání jmen vlastníka a skupiny odpovídajících daným id
  èíslùm. V pwd.db nejsou ulo¾ena hesla, ty jsou v spwd.db, který sem
  nekopírujte.</li>
<li><i>/home/ftp/pub</i> - Standardní adresáø, kam se ukládají soubory,
  které chceme sdílet. Tento adresáø by mìl mít mód 555.
</ul>

<p>
Ne v¹echny adresáøe by mìl vlastnit "root". Zde je výpis jak by mìly
adresáøe vypadat po jejich vytvoøení.

<blockquote><pre>
# pwd
/home
# ls -laR ftp
total 5
dr-xr-xr-x  5 root  ftp    512 Jul  6 11:33 .
drwxr-xr-x  7 root  wheel  512 Jul  6 10:58 ..
dr-x--x--x  2 root  ftp    512 Jul  6 11:34 etc
dr-xr-xr-x  2 root  ftp    512 Jul  6 11:33 pub

ftp/etc:
total 43
dr-x--x--x  2 root  ftp    512 Jul  6 11:34 .
dr-xr-xr-x  5 root  ftp    512 Jul  6 11:33 ..
-r--r--r--  1 root  ftp    316 Jul  6 11:34 group
-r--r--r--  1 root  ftp  40960 Jul  6 11:34 pwd.db

ftp/pub:
total 2
dr-xr-xr-x  2 root  ftp  512 Jul  6 11:33 .
dr-xr-xr-x  5 root  ftp  512 Jul  6 11:33 ..
</pre></blockquote>

<h3>Nastartování serveru a pøihlá¹ení</h3>

<p>
Mù¾ete si vybrat mezi spou¹tìním ftpd z inetd nebo z rc skriptù. V na¹em
pøíkladu ho budeme spou¹tìt z
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/inetd.conf">inetd.conf</a>.
Nejprve se musíme seznámit s nìkterými volbami ftpd. Standardní øádek v
<i>/etc/inetd.conf</i> je:

<blockquote><pre>
<strong>ftp             stream  tcp     nowait  root    /usr/libexec/ftpd       ftpd -US</strong>
</pre></blockquote>

<p>
Zde je fptd spu¹tìno s volbou <i>-US</i>. Tato volba bude logovat
anonymní spojení do <i>/var/log/ftpd</i> a akutální relace do
<i>/var/run/utmp</i>. Dovolí, aby tyto sezení byly vidìny pomocí who(1).
Chcete-li spustit pouze anonymní server a neumo¾òit ostatním u¾ivatelùm
ftp, pou¾ijte volbu <i>-A</i> option. Následuje startovací øádka démona
ftpd spu¹tìného za úèelem pouze anonymních spojení.  Pou¾ívá také
<i>-ll</i>, které loguje ka¾dou konekci pomocí syslog, spolu s
get,retrieve a dal¹ími pøíkazy ftp.

<blockquote><pre>
<strong>ftp             stream  tcp     nowait  root    /usr/libexec/tcpd       ftpd -llUSA</strong>
</pre></blockquote>

<p>
Poznámka - pro ty z vás, kteøí budete pou¾ívat ftp server s VELKÝM
provozem, bude lépe nespou¹tìt ftpd z inetd.conf . Nejlépe tak docílíte
zakomentování øádku s ftpd v inetd.conf a startováním ftpd z rc.conf s
volbou  <i>-D</i>.  Takto nastartujete ftpd jako démona, pøièem¾ sní¾íte
náklady spojené s èastým startem z inetd. Pøíklad startu z rc.conf.

<blockquote><pre>
ftpd_flags="-DllUSA"           # for non-inetd use: ftpd_flags="-D"
</pre></blockquote>

<p>
To samozøejmì funguje, jenom pokud jste odstranili ftpd z
<i>/etc/inetd.conf</i> a pøimìli inetd, aby znovu naèetl svùj
konfiguraèní soubor.

<h3>Dal¹í podstatné soubory</h3>

<p>
<ul>
<li><i>/etc/ftpwelcome</i> - Obsahuje uvítací zprávu vypsanou u¾ivateli
  po pøipojení.
<li><i>/etc/motd</i> - Obsahuje zprávu vypsanou u¾ivateli po úspì¹ném
  zalogování.
<li><i>.message</i> - Tento soubor lze umístit do libovolného adresáøe.
  Bude vypsán jednou poté, co u¾ivatel vstoupí do tohoto adresáøe.
</ul>


<p>
<a name= "ftpchroot"></a>
<h2>10.14 - Omezení u¾ivatelù na jejich domovský adresáø v ftpd(8)</h2>

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&amp;sektion=8">ftpd(8)</a> 
v OpenBSD umo¾òuje øe¹it tento problém velice jednodu¹e. Hlavní roli
zde hraje soubor <strong>/etc/ftpchroot</strong>. Proto¾e u¾ivatelùm ne
v¾dy mù¾eme dùvìøovat, je nutné omezit jejich pøístup na domovské
adresáøe. Toto chování NENÍ standardní. Zde je pøíklad toho jak to
vypadá standardnì.
</p>

<blockquote><pre>
$ <strong>ftp localhost</strong>
Connected to localhost.
220 oshibana FTP server (Version 6.4/OpenBSD) ready.
Name (localhost:ericj): <strong>ericj</strong>
331 Password required for ericj.
Password: <strong>*********</strong>
230- OpenBSD 3.3 (GENERIC) #44: Sat Mar 29 13:22:05 MST 2003
230-
230- Welcome to OpenBSD: The proactively secure Unix-like operating system.
230-
230- Please use the sendbug(1) utility to report bugs in the system.
230- Before reporting a bug, please try to reproduce it with the latest
230- version of the code.  With bug reports, please try to ensure that
230- enough information to reproduce the problem is enclosed, and if a
230- known fix for it exists, include that as well.
230-
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; <strong>cd /</strong>
250 CWD command successful.
ftp&gt; <strong>ls</strong>
227 Entering Passive Mode (127,0,0,1,60,7)
150 Opening ASCII mode data connection for 'file list'.
altroot
bin
dev
etc
home
mnt
root
sbin
stand
tmp
usr
var
bsd
sys
boot
226 Transfer complete.
ftp&gt; <strong>quit</strong>
221 Goodbye.
</pre></blockquote>

<p>
Jak je vidìt, pøístup zde je zaji¹tìn k celému serveru. V ideálním
svìtì, kde v¹em u¾ivatelùm mù¾eme dùvìøovat, je v¹e v poøádku, ale
vìt¹inou tomu tak není.  Pro omezení u¾ivatele pøidejte jeho jméno do
souboru <strong>/etc/ftpchroot</strong>. Ukázka omezení u¾ivatele
&quot;ericj&quot;.

<blockquote><pre>
$ <strong>cat /etc/ftpchroot</strong>
#       $ OpenBSD: ftpchroot,v 1.3 1996/07/18 12:12:47 deraadt Exp $
#
# list of users (one per line) given ftp access to a chrooted area.
# read by ftpd(8).
ericj
</pre></blockquote>

<p>
To staèí k tomu, abychom u¾ivateli &quot;ericj&quot; znemo¾nili uniknout
z jeho domovského adresáøe. Jak uvidíte v dal¹ím pøíkladì, adresáø / se
náhle zmìnil na jeho domovský adresáø!

<blockquote><pre>
$ <strong>ftp localhost</strong>
Connected to localhost.
220 oshibana FTP server (Version 6.4/OpenBSD) ready.
Name (localhost:ericj): <strong>ericj</strong>
331 Password required for ericj.
Password: <strong>*********</strong>
230 User ericj logged in.
Remote system type is UNIX.
Using binary mode to transfer files.
ftp&gt; <strong>cd /</strong>
250 CWD command successful.
ftp&gt; <strong>ls</strong>
227 Entering Passive Mode (127,0,0,1,92,171)
150 Opening ASCII mode data connection for 'file list'.
.login
.mailrc
.profile
.rhosts
.ssh
.cshrc
work
mail
src
226 Transfer complete.
ftp&gt; <strong>quit</strong>
221 Goodbye.
</pre></blockquote>

<p>
<a name= "Patches"></a>
<h2>10.15 - Aplikování patchù v OpenBSD</h2>

<p>
Strom zdrojového kódu OpenBSD se stále mìní a zlep¹uje, spolu s tím jsou
èasto opraveny bì¾né problémy a veøejnì jsou vydány patche. Tyto opravné
kódy najdete na webové stránce se soupisem chyb
<a href="../../cs/errata.html">http://www.openbsd.org/cs/errata.html</a>,
kde jsou rozdìleny do nìkolika kategorií. Tyto kategorie korespondují s
rozdílnými architekturami na které se mají patche aplikovat.

<p>
Poznamenejme je¹tì, ¾e patche nejsou vydávány pro novì pøidané kódy do
OpenBSD a jsou k dispozici pouze pro dùle¾ité opravy spolehlivosti nebo
pro opravy bezpeènostních chyb, které by mìly být ihned provedeny,
jejich provedení je v¹ak, jako v ostatních pøípadech, na
administrátorovi systému.

<p>
Napøíklad budeme patchovat démona
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&amp;sektion=8">talkd(8)</a> 
s bezpeènostní opravou z patche, který jsme získali z
<a href="../../cs/errata.html">errata.html</a>.

<h3>Jak se tyto patche li¹í od tìch, které najdeme v CVS stromu?</h3>

<p>
V¹echny patche oznámené v
<a href="../../cs/errata.html">http://www.openbsd.org/cs/errata.html</a>
jsou patche vztahující se k zdrojovému kódu  posledního vydání systému.
Patche aktuálního CVS stromu by mohly obsahovat dal¹í zmìny, které by na
systému dané verze byly nechtìné.

<h3>Pøíprava systému pro patch.</h3>

<p>
Patche jsou v OpenBSD distribuovány jako diffy, tj. jako textové
soubory, které obsahují rozdíly mezi pùvodním a opraveným zdrojovým
kódem. <b>NEJSOU</b> distribuovány v binární podobì. To znamená, ¾e pro
patch systému musíte mít k dispozici zdrojový kód nainstalované
<b>VERZE</b> OpenBSD. To neznamená, ¾e musíte mít nainstalovaný CELÝ
zdrojový kód OpenBSD, ale musíte mít zdrojový kód v¹ech  programù, které
chcete patchovat. Napøíklad pokud chcete patchovat jádro, musíte mít
po ruce zdrojové kódy celého jádra.

<p>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>
je výhodný prostøedek, který mù¾ete pou¾ít pro získání té èásti
zdrojového kódu, kterou potøebujete, prostøednictvím anonymních cvs
serverù umístìných po celém svìtì. Seznam tìchto serverù najdete zde
<a href="http://www.openbsd.org/cs/anoncvs.html">http://www.openbsd.org/cs/anoncvs.html</a>.

<p>
Pro sta¾ení zdrojových kódù talkd(8) z OpenBSD <i>3.3-release</i> pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&amp;sektion=1">cvs(1)</a>,
byste pou¾ili následující pøíkaz:

<div style="margin-left: 2em">
<pre>
$ <b>export CVSROOT=anoncvs@@anoncvs5.usa.openbsd.org:/cvs</b>
$ <b>cvs co -rOPENBSD_3_3_BASE src/libexec/talkd/</b>
cvs server: Updating src/libexec/talkd
U src/libexec/talkd/announce.c
U src/libexec/talkd/talkd.c
U src/libexec/talkd/talkd.h
</pre>
</div>

<p>
Pro získání CVS cesty ke kódu, který potøebujete, se podívejte na øádek
oznaèený jako <i>Index:</i> v souboru patche.  V na¹em  pøípadì byla
cesta v CVS stromu  <i>src/libexec/talkd/</i>.  V¾dy zkontrolujte revizi
OPENBSD_cislo_verze_BASE. Bez  &quot;BASE&quot; budete stahovat stabilní
vìtev, která mù¾e obsahovat jiné zmìny, které mohou pak mít nesprávný
úèinek. Pokud pracujete s patch vìtví v cvs stromu, pak patche by v ní
mìly být u¾ aplikovány, pøesto se v¾dy radìji ujistìte. Mù¾ete se
podívat na
<a href="../../cs/plus.html">http://www.openbsd.org/cs/plus.html</a>,
kde najdete seznam patchù aplikovaných do patch vìtve. Pokud patche
nebyly dosud aplikovány, stáhnìte si zdrojový kód poslední verze, jak
bylo uvedeno vý¹e.

<p>
Rovnì¾, pro ty z vás, kdo si koupili oficiální OpenBSD CD, mù¾ete
zdrojový kód získat pøímo z CD. Podívejte se na CD jak extrahovat
zdrojové kódy z CD. V tom pøípadì nepotøebujete zdrojové kódy stahovat
za pomoci anoncvs.

<blockquote><pre>
Aplikujte patch provedením:
        cd /usr/src
        patch -p0 &lt; 026_talkd.patch
        cd libexec/talkd
        make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install

Index: libexec/talkd/announce.c <b>&lt;------ Path to sources </b>
===================================================================
RCS file: /cvs/src/libexec/talkd/announce.c,v
retrieving revision 1.8
retrieving revision 1.9
diff -u -r1.8 -r1.9
--- libexec/talkd/announce.c    1998/08/18 03:42:10     1.8
+++ libexec/talkd/announce.c    2000/07/06 00:01:45     1.9
@@@@ -160,6 +160,6 @@@@
                *(bptr++) = '\n';
        }
        *bptr = '\0';
-       fprintf(tf, big_buf);
+       fprintf(tf, "%s", big_buf);
        fflush(tf);
 }
</pre></blockquote>

<p>
Poté co obdr¾íte zdrojový kód, stáhnìte si i patch a umístìte ho do
<i>src/</i>.

<h3>Aplikování patche</h3>

<div style="margin-left: 2em">
<pre>
$ <b>cd /usr/src</b>
$ <b>patch -p0&lt;/path/to/026_talkd.patch</b>
Hmm...  Looks like a unified diff to me...
The text leading up to this was:
--------------------------
|Apply by doing:
|       cd /usr/src
|       patch -p0 &lt; 026_talkd.patch
|       cd libexec/talkd
|       make obj &amp;&amp; make depend &amp;&amp; make &amp;&amp; make install
|
|Index: libexec/talkd/announce.c
|===================================================================
|RCS file: /cvs/src/libexec/talkd/announce.c,v
|retrieving revision 1.8
|retrieving revision 1.9
|diff -u -r1.8 -r1.9
|--- libexec/talkd/announce.c   1998/08/18 03:42:10     1.8
|+++ libexec/talkd/announce.c   2000/07/06 00:01:45     1.9
--------------------------
Patching file libexec/talkd/announce.c using Plan A...
Hunk #1 succeeded at 160. <b>&lt;------------ Patch byl úspì¹ný</b>
done
$ <b>cd /usr/src/libexec/talkd/</b>
$ <b>ls</b>
CVS             announce.c      print.c         table.c         talkd.c
Makefile        announce.c.orig process.c       talkd.8         talkd.h
$ <b>make obj &amp;&amp; make depend &amp;&amp; make</b>
making /home/ericj/lsrc/src/libexec/talkd/obj
mkdep -a /home/ericj/lsrc/src/libexec/talkd/talkd.c /home/ericj/lsrc/sr
c/libexec/talkd/announce.c /home/ericj/lsrc/src/libexec/talkd/process.c
/home/ericj/lsrc/src/libexec/talkd/table.c /home/ericj/lsrc/src/libexec
/talkd/print.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/talkd.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/announce.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/process.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/table.c
cc -O2     -c /home/ericj/lsrc/src/libexec/talkd/print.c
cc   -o ntalkd talkd.o announce.o process.o table.o print.o
nroff -Tascii -mandoc /home/ericj/lsrc/src/libexec/talkd/talkd.8 &gt; talk
d.cat8
$ <b>sudo make install</b>
install -c -s -o root -g bin  -m 555 ntalkd /usr/libexec
install -c -o root -g bin -m 444 talkd.cat8 /usr/share/man/cat8/talkd.0
/usr/share/man/cat8/ntalkd.0 -&gt; /usr/share/man/cat8/talkd.0
</pre>
</div>

<p>
Poté co jste v¹e provedli, byste mìli restartovat danou slu¾bu.

<a name="httpdchroot"></a>
<h2>10.16 - Povìzte mi o chroot() v Apache</h2>

<p>
Od OpenBSD 3.2, Apache 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&amp;sektion=8">httpd(8)</a>
server bì¾el defaultnì v 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a>
prostøedí. Zatímco je to je výrazné zlep¹ení bezpeènosti, mù¾e to vytvoøit
problémy, na které nejste pøipraveni.

<h3>Co je to chroot?</h3>

<p>
Aplikace bì¾ící v 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&amp;sektion=2">chroot(2)</a>
prostøedí je zamèena do urèitého adresáøe a není schopna procházet se po
zbytku adresáøového stromu a vidí tento adresáø jako "<tt>/</tt>" (root)
adresáø. V pøípadì httpd(8), se program spustí, otevøe svoje log soubory,
zavìsí se na svoje TCP porty (aèkoliv je¹tì nepøijal ¾ádná data) a naète
svoji konfiguraci. Dále zamèe sebe sama do adresáøe <i>/var/www</i> a
sní¾í svoje práva, pak zaène pøijímat po¾adavky. To znamená, ¾e v¹echny
soubory pou¾ívané Apache serverem musí být v adresáøi <i>/var/www</i>.
To pomù¾e podstattnì zlep¹it bezpeènost - pokud by byl bezpeènostní
problém v Apache serveru, po¹kození by bylo omezeno pouze na jeden adresáø
s právy "read only" a ¾ádnými prostøedky, které by se daly zneu¾ít.

<h3>Co to znamená pro u¾ivatele ?</h3>

<p>
Struènì øeèeno, bìh Apache v chroot(2) prostøedí je nìco nového a mnoho
starých aplikací a systémových konfigurací nebude pracovat jako pøedtím.

<ul>
<li><b>Historické rozlo¾ení file systemù :</b> 
Servvery upgradované ze star¹ích verzí OpenBSD mohou mít soubory pro web
umístìny v u¾ivatelských adresáøích, co¾ nebude v chroot(2) prostøedí
fungovat, proto¾e httpd(8) nebude moci pøistupovat do adresáøe
<i>/home</i>. Administrátoøi mohou dále zjistit, ¾e existující parti¹na
/var/www je pøíli¹ malá pro v¹echny soubory webu. Buï mù¾ete
restrukturalizovat nebo nepou¾ívat chroot(2) fíèuru. Mù¾ete, ov¹em, pou¾ít
symlinky v udomácích adresáøích u¾ivatelù ukazující do podadresáøù v
<i>/var/www</i>, ale NEMÙ®ETE pou¾ít linky v <i>/var/www</i> ukazující do
jiné èásti file systému -- to nemù¾e pracovat kvùli chroot(2) prostøedí.
Poznamenejme, ¾e pokud chcete, aby va¹i u¾ivatelé mìli 
<a href="faq10.html#ftpchroot">chroot(2) FTP pøístup</a>, toto nebude
pracovat, proto¾e FTP chroot bude (opìt) znemo¾òovat pøístup k cílùm
symlinkù. Øe¹ením je nepou¾ívat adresáø <i>/home</i> pro tyto u¾ivatele
jako domácí adresáø, ale radìji <i>/var/www/home</i>.

<li><b>Rotace log souborù:</b>  
Normálnì jsou ligy rotovány pomocí pøejmenování starých souborù a posláním
signálu SIGUSR1 httpd(8) procesu, co¾ zajistí, aby Apache zavøel staré log
soubory a otevøel nové. To není u¾ mo¾né, proto¾e httpd(8) nemá mo¾nost
otevøít svoje log soubory, proto¾e u¾ na to nemá práva. httpd(8) musí být
zastaven a znovu spu¹tìn:

<pre>
     # <b>apachectl stop && apachectl start</b>
</pre>

Existují také dal¹í strategie, vèetnì logování via 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pipe&amp;sektion=2">pipe(2)</a>,
a pou¾ití externího programu pro rotaci log souborù na druhém konci
pipe(2).

<li><b>Existující moduly do Apache:</b> V¹echny moduly by se mìly nahrát,
nicménì nìkteré nemusí pracovat v chroot(2) prostøedí správnì 
a mnoho mù¾e mít problémy s
"<tt><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=apachectl&amp;sektion=8">apachectl</a>
restart</tt>", generujícím chybu, co¾ mù¾e vést k ukonèení httpd(8).

<li><b>Existing CGIs:</b> Vìt¹ina NEBUDE pracovat tak jak je.
Mohou potøebovat programy nebo knihovny z jiných adresáøù vedle
<i>/var/www</i>. Nìkteré mohou být opraveny rekompilací, tak ¾e budou
slinkovány staticky (tak¾e nebudou potøebovat knihovny v jiných
adresáøích), vìt¹ina ml¾e být opravena naplnìním adresáøe <i>/var/www</i>
soubory po¾adovanými danou aplikací, aèkoliv to je netriviální a vy¾aduje
znalost programování -- vìt¹ina u¾ivatelù bude pova¾ovat za jednodu¹¹í
øe¹ení vypnout chroot(2) fíèuru do té doby, ne¾ budou updatovány.

</ul>

V nìkterých pøípadech mù¾e být aplikace nebo konfigurace zmìnìna tak, aby
bì¾ela v chroot psotøedí. V jiných pøípadech, mù¾ete jednodu¹e vypnout
tuto fíèuru pomocí volby <tt>-u</tt> pro httpd(8) v 
<i><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.conf&amp;sektion=8">/etc/rc.conf</a></i>.

<a name="rootshell"></a>
<h2>10.17 - I don't like the standard root shell!</h2>
Default shell pro u¾ivatele <i>root</i> v OpenBSD je
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh</a>,
hlavnì díky tradici. Není po¾adováno, aby root mìl jako shell csh(1) jako
svùj login shell (ale radìji ètìte dále pøedtím ne¾ jej zmìnítì).

<p>
Nìkterým u¾ivatelùm pøicházejícím z jiných Unix-like operaèních systémù,
mù¾e pøipadat csh(1) neznámé, a ptají se, jak jej mohou zmìnit. Existuje
nìkolik zpùsobù:

<ul>
<li><b>Nelogujte se jako <i>root!</i></b>  Mezi
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&amp;sektion=1">su</a>
a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&amp;sektion=8">sudo</a>,
existuje jen málo zpùsobù proè se logovat jako <i>root</i>  pro vìt¹inu
aplikací po jejich poèáteèním nastavení.
<li><b>Spus»e svùj oblíbený shell po zalogování:</b> Pokud máte rádi
ksh(1) nebo
jiný shell, prostì ho spus»te z defaultního shellu.
<li><b>Zmìòte root shell:</b> To ml¾e být provedeno pou¾itím 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chsh&amp;sektion=1">chsh</a> 
nebo
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&amp;sektion=8">vipw</a>.
</ul>

Tradièní doporuèení v Unixu je pou¾ívat pro roota pouze staticky
kompilované shelly, proto¾e pokud vá¹ systém jde do single modu,
ne-rootovské parti¹ny nebudou namonotovány a dynamicky linkované shelly
nebudou schopny pøistupovat ke knihovnám na parti¹nì <tt>/usr</tt>. Toto
není v OpenBSD velký problém, proto¾e systém po¾ádá u¾ivatele o shell
pokud jde do single modu, defaultní je 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh</a>.

Tøi standarní shelly v OpenBSD
(<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=csh&amp;sektion=1">csh</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh</a>
a
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh</a>)
jsou v¹echny staticky linkované, a tím pádem pou¾itelné v single
modu.

<p>
Nìkdy se øíká, ¾e rootovský shell by se nemìl nikdy mìnit, aèkoliv pro to
není v OpenBSD dùvod. Ale opìt, toto by nemìl být problém -- prostì se
nelogujte jako root.

<a name="ksh"></a>
<h2>10.18 - Co je¹tì mù¾u dìlat s <i>ksh</i>?</h2>
V OpenBSD je 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh</a>
<a href="http://web.cs.mun.ca/~michael/pdksh/">pdksh</a>, the Public
Domain Korn Shell, a je to ta samá binárka jako 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sh&amp;sektion=1">sh</a>.

<p>
U¾ivatelé zvyklí na <i>bash</i>, èasto pou¾ívaný v Linux systémech, 
budou pokládat 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ksh&amp;sektion=1">ksh</a>
velmi blízký.
Ksh(1) poskytuje vìt¹inu bì¾nì pou¾ívaných fíèur v 
<i>bash</i>i, vèetnì doplòování tabulátorem, editaci pøíkazové øádky a
historii via ¹ipky a CTRL-A/CTRL-E ke skoku na zaèátek/konec
pøíkazové øádky. Pokud jsou po¾adovány jiné fíèury 
z <i>bash</i>e, <i>bash</i> samotný mù¾e být nainstalován buï z 
<a href="faq8.html#Ports">portù</a> nebo
<a href="faq8.html#Packages">packages</a>.

<p>
Pøíkazový øádek z <i>ksh</i> mù¾e být snadno zmìnìn na nìco, co poskytuje
více informací ne¾ defaultní "$ " zmìnou promìnné <tt>PS1</tt>. Napø.,
vlo¾ením následujícího øádku 

<pre>
     export PS1='$PWD $ '
</pre>

do va¹eho <tt>/etc/profile</tt> bude produkovat následující pøíkazový
øádek:

<pre>
     /home/nick $
</pre>

Podívejte se do souboru
<a href="http://www.openbsd.org/cgi-bin/cvsweb/~checkout~/src/etc/ksh.kshrc?content-type=text/plain"><tt>/etc/ksh.kshrc</tt></a>,
který obsahuje mnoho u¾iteèných fíèur a pøíkladù, které mohou být vyvolány
z <tt>.profile</tt> daného u¾ivatele.

<p>
<font color= "#0000e0">
<a href= "index.html">[Zpìt na index FAQ]</a>
<a href= "faq9.html">[Sekce 9.0 - Pøechod od Linuxu]</a>
<a href= "faq11.html">[Sekce 11.0 - Ladìní výkonu]</a>
</font>

<p>
<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[zpìt]"></a>
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<small>
<br>
Originally [OpenBSD: faq10.html,v 1.94 ]
<br>
$Translation: faq10.html,v 1.12 2003/11/02 21:48:53 certik Exp $
<br>
$OpenBSD: faq10.html,v 1.11 2003/11/03 14:19:31 horacio Exp $
</small>

</body>
</html>
@


1.11
log
@Sync with Steelix CVS
@
text
@d1565 1
a1565 1
$OpenBSD$
@


1.10
log
@Sync with Steelix CVS
@
text
@d1 1
d4 2
a6 2
<title>10.0 - System Management</title>
<link rev= "made" href= "mailto:www@@openbsd.org">
d11 1
a11 1
<meta name= "copyright"     content= "This document copyright 1998-2002 by OpenBSD.">
d18 5
a22 2
<h2><font color=#e00000>10.0 - System Management</font><hr></h2>
</p>
d24 3
d28 5
a32 4
<ul><h3>Obsah</h3>
<li><a href="#wheel">10.1 - Pøíkaz 'su root' hlásí, ¾e jsem ve ¹patné skupinì</a>
<li><a href="#DupFS">10.2 - Jak zálohovat filesystem?</a>
<li><a href="#rc">10.3 - Jak spustit démona spolu se systémem? (pøehled rc(8))</a>
d35 1
a35 1
<li><a href="#POP">10.5 - Nastavil jsem POP, ale dostávám chybová
d37 3
a39 3
<li><a href="#HTTPS">10.6 - Proè Sendmail ignoruje /etc/hosts?</a>
<li><a href="#HTTPS">10.7 - Nastavení Secure HTTP Serveru pou¾itím SSL(8)</a>
<li><a href="#vipw">10.8 - Zmìnil jsem /etc/passwd  pomoci vi(1), ale
d41 10
a50 7
<li><a href="#AddDelUser">10.9 - Jak pøidat/smazat u¾ivatele?</a>
<li><a href="#FTPOnly">10.10 - Jak vytvoøit ftp-only úèet?</a>
<li><a href="#Quotas">10.11 - Nastavení diskových kvót</a>
<li><a href="#Kerberos">10.12 - Nastavení Kerberos klient/server</a>
<li><a href="#AnonFTP">10.13 - Nastavení anonymního FTP Serveru</a>
<li><a href="#ftpchroot">10.14 - Omezení u¾ivatele na jeho domovský adresáø v fptd(8)</a>
<li><a href="#Patches">10.15 - Aplikování patchù v OpenBSD.</a>
d52 1
a52 1
</p>
a54 2
<br>

a57 1
</p>
d64 2
a65 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&apropos=0&sektion=1&format=html">su(1)</a>
d73 4
a76 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&apropos=0&sektion=8&format=html">adduser(8)</a>,
mù¾ete ho doplnit do skupiny wheel tak, ¾e na dotaz <tt>Invite
<i>user</i> into other groups:</tt> odpovíte wheel.
</p>
d78 1
a78 2
<ul>
<pre>
d80 1
a80 2
</pre>
</ul>
d84 3
a86 3
privilegiim, bez pøipsání do /etc/group je pou¾ití pøíkazu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8&format=html">sudo(8)</a>.
</p>
d94 6
a99 7
Pro zálohování pou¾ijte 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a>
a pro obnovení
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>.
Kombinací obou tìchto pøíkazù mù¾ete provádìt duplikování adresáøové
hierarchie. Napø. chcete-li duplikovat v¹e pod adresáøem <kbd>SRC</kbd>
do adresáøe <kbd>DST</kbd> zadejte: </p>
d101 1
a101 2
<ul>
<pre>
d103 2
a104 2
</pre>
</ul>
d109 1
a109 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&sektion=1&format=html">tar(1)</a>
d111 2
a112 1
<ul>
d116 1
a116 2
</ul>
<br>
a119 1
<a name="10.3"></a>
d124 2
a125 2
OpenBSD pou¾ívá narozdíl od napø. linuxu startovací skripty ve stylu
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8&format=html">rc(8)</a> .
d133 3
d141 2
a142 1
      Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a>
d145 2
a146 1
      Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&sektion=8&format=html">rc.shutdown(8)</a>
d150 1
d152 2
a153 1
Hlavní soubory pro administrátora jsou  <i>/etc/rc.conf</i>,
a155 1
</p>
d157 2
a158 1
<ul>Po nabootování jádra se startuje <i>/etc/rc</i>.
d161 3
a163 2
    <li>Konfiguraèní promìnné se naèítají z <i>/etc/rc.conf</i>
    <li>Filesystémy jsou pøipojeny
a182 1
</p>
d184 1
a184 1
<ul><pre>
d186 1
a186 1
</pre></ul>
d198 1
a198 1
<ul><pre>
d200 2
a201 1
</pre></ul>
d207 1
a207 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>),
a208 1
</p>
d210 7
a223 1
</p>
d225 1
a225 1
<ul><pre>
d229 5
a233 1
</pre></ul>
a238 1
</p>
d240 1
a240 1
<ul><pre>
d242 1
a242 1
</pre></ul>
d249 1
a249 1
ekvivalent &quot;shutdown -p&quot;.  </p>
a252 1
<a name="10.4"></a>
a254 1
</p>
d257 1
a257 1
Zkuste dát:
d259 1
a259 2
<ul>
<pre>
d261 2
a262 2
</pre>
</ul>
d266 1
a266 2
<ul>
<pre>
d268 2
a269 2
</pre>
</ul>
d274 2
a275 2
<ul>
<pre>
d279 2
a280 2
</pre>
</ul>
d286 1
a286 1
<ul><pre>
d288 1
a288 1
</pre></ul>
a298 1
</p>
a301 1
<a name="10.5"></a>
a303 1
</p>
d309 2
a310 2
<ul>
<pre>
d312 2
a313 2
</pre>
</ul>
d316 2
a317 2
<ul>
<pre>
d324 2
a325 2
</pre>
</ul>
d330 2
a331 1
<P>
d335 6
a340 2
velmi nav¹tìvovaný server nebo jste-li ISP,...)!  Zkuste spustit cucipop
nelbo jiný POP démon z OpenBSD sbírky portù. Nebo mù¾ete mít ¹patnì
a343 1
</p>
d347 1
a347 1
&quot;mail&quot;. Musíte ji vytvoøit v souboru <i>/etc/group</i>. Napø.
d350 1
a350 1
<ul><pre>
d352 1
a352 1
</pre></ul>
d354 2
a355 2
je naprosto dostaèující.
</p>
d359 2
d371 2
d377 3
a379 1
Po¹lete Sendmailu signál HUP následujícím pøíkazem:
d381 1
a381 1
  $ <b>sudo kill -HUP `head -1 /var/run/sendmail.pid`</b>
d383 3
a385 1
a zmìna se projeví.
a388 1
<a name="10.6"></a>
a389 1
</p>
d395 1
a395 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>,
d397 3
a399 3
<i>/etc/ssl/private</i>. Následujicí ukázky najdete také v manuálové
stránce
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>.
d403 1
a403 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a> .
a414 1
</p>
a419 1
</p>
a453 2
Thawte mù¾e v souèasnosti podepisovat va¹e RSA klíèe. Procedura pro DSA
klíèe je ve vývoji.
a458 1
</p>
d470 4
a473 3
schopni nastartovat démona  <a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>
s volbou  <b>-DSSL</b>, èím¾ umo¾níte https transakce na port 443.
a477 1
<a name="10.7"></a>
d479 1
a479 2
nezmìnilo. Proè?  </h2>
</p>
d484 4
a487 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8&apropos=0">pwd_mkdb(8)</a>.
Hlavní soubor s hesly je v OpenBSD /etc/master.passwd. Dle pwd_mkdb(8),
<ul>
<pre>
d495 1
a495 2
</pre>
</ul>
a514 1
</p>
a517 1
<a name="10.8"></a>
d519 1
a519 1
u¾ivatelù?</h2> </p>
d524 2
a525 2
    <li><a href="#adduser">adduser(8)</a>
    <li><a href="#user">user(8)</a>
d528 4
d535 1
a535 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
d537 5
a541 6
<strong>/etc/adduser.conf</strong>.  Ruènì pøidávat u¾ivatele lze také
programem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8&format=html">vipw(8)</a>,
tento pøíkaz je ale urèen pøedev¹ím pro pøidávání u¾ivatelù. adduser(8)
provádí kontroly konzistence souborù <strong>/etc/passwd</strong>,
<strong>/etc/group</strong>, a shell databáze. Vytváøí také $HOME
d543 2
a544 2
vlastnosti mohou být zmìneny podle va¹ich po¾adavkù. Následuje
jednoduchá ukázka pou¾ití programu adduser(8). Budeme pøidávat u¾ivatele
d550 1
a550 1
<ul><pre>
d555 1
d561 23
a583 19
Enter username [a-z0-9_]: <strong>testuser</strong>
Enter full name []: <strong>Test FAQ User</strong>
Enter shell csh ksh nologin sh [ksh]: <strong>ksh</strong>
Uid [1002]: <strong>&lt;Enter&gt;</strong>
Login group testuser [testuser]: <strong>guest</strong>
Login group is ``guest''. Invite testuser into other groups: guest no
[no]: <strong>no</strong>
Enter password []:
Enter password again []:

Name:     testuser
Password: ****
Fullname: Test FAQ User
Uid:      1002
Gid:      31 (guest)
Groups:   guest
HOME:     /home/testuser
Shell:    /bin/ksh
OK? (y/n) [y]: <strong>y</strong>
d585 2
a586 2
Copy files from /usr/share/skel to /home/testuser
Add another user? (y/n) [y]: <strong>n</strong>
d588 1
a588 1
</pre></ul>
d591 2
a592 2
Pro odstranìní u¾ivatele pou¾ijte pøíkaz
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmuser&sektion=8&format=html">rmuser(8)</a>.
d594 1
a594 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&sektion=1&format=html">crontab(1)</a>,
d596 1
a596 1
po¹tu.  Samozøejmì odstraní i jeho záznamy z
d603 1
a603 1
<ul><pre>
d608 2
a609 1
testuser:$2a$07$ZWnBOsbqMJ.ducQBfsTKUe3PL97Ve1AHWJ0A4uLamniLNXLeYrEie:1002:31::0:0:Test FAQ User:/home/testuser:/bin/ksh
d616 1
a616 1
</pre></ul>
d620 1
d623 2
a624 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>, který zjednodu¹¹uje pou¾ívání tìchto skriptù.
d627 13
a639 11
<ul>Seznam nových pøíkazù:
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=group&sektion=8&format=html">group(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupadd&sektion=8&format=html">groupadd(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupdel&sektion=8&format=html">groupdel(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupinfo&sektion=8&format=html">groupinfo(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=groupmod&sektion=8&format=html">groupmod(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&sektion=8&format=html">user(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=useradd&sektion=8&format=html">useradd(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userdel&sektion=8&format=html">userdel(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=userinfo&sektion=8&format=html">userinfo(8)</a>
    <li><a href="http://www.openbsd.org/cgi-bin/man.cgi?query=usermod&sektion=8&format=html">usermod(8)</a>
d663 1
a663 1
<ul><pre>
d672 1
a672 1
</pre></ul>
d681 1
a681 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=encrypt&sektion=1&format=html">encrypt(1)</a>.
d686 1
a686 1
<ul><pre>
d690 1
a690 1
</pre></ul>
d697 1
a697 1
<ul><pre>
d700 1
a700 1
</pre></ul>
d704 1
a704 1
ne  &quot;&quot; proto¾e shell bude interpretovat tyto znaky pøedtím ne¾
d715 1
a715 1
<ul><pre>
d730 1
a730 1
</pre></ul>
d737 1
a737 1
<ul><pre>
d749 1
a749 1
</pre></ul>
d759 1
a759 1
<ul><pre>
d761 1
a761 1
</pre></ul>
a771 1
<a name="10.9"></a>
a772 1
</p>
d780 1
a780 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>
d787 2
a788 3
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a>
mù¾ete dovolit pouze pøihlá¹ení na ftp s provedeným voláním chroot(2),
které zajistí vý¹e uvedenou skuteènost.
a792 1
<a name="10.10"></a>
a793 1
</p>
a798 1
</p>
d801 1
a801 8
<ul>
<li>U¾ivatelské kvóty</li>
<li>Skupinové kvóty</li>
</ul>
</p>

<p>
První krok pøi nastavení kvót je uji¹tìní se, ¾e  <tt>volba QUOTA</tt>
d804 1
a804 1
které budou nastaveny kvóty. Slova <tt>userquota</tt> a
d808 5
a812 4
ze souborových systémù. Tento standard lze ovlivnit tak, ¾e napí¹ete
napøíklad userquota=/var/quotas/quota.user. Nebo jakýkoliv jiný soubor
ve kterém chcete mít ulo¾ené informace o kvótách. Pøíklad souboru
/etc/fstab se zapnutými kvótami.
d815 1
a815 2
<ul>
<pre>
d817 1
a817 2
</pre>
</ul>
d820 3
a822 2
Nyní pøi¹el èas, kdy je tøeba nastavit u¾ivatelské kvóty. Pou¾ijete program
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=edquota&sektion=8&format=html">edquota(8)</a>.
a825 1
</p>
d827 1
a827 2
<ul>
<pre>
d829 1
a829 2
</pre>
</ul>
a832 1
</p>
d834 1
a834 2
<ul>
<pre>
d838 1
a838 2
</pre>
</ul>
a841 1
</p>
d843 1
a843 2
<ul>
<pre>
d847 1
a847 2
</pre>
</ul>
d850 3
a852 2
V tomto pøípadì je softlimit nastaven na 1000 blokù a hardlimit na 1050
blokù.  Softlimit je limit, kdy je u¾ivatel pouze varován pøi jeho
a857 1
</p>
d861 1
a861 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quotaon&sektion=8&format=html">quotaon(8)</a>.
a862 1
</p>
d864 1
a864 2
<ul>
<pre>
d866 1
a866 2
</pre>
</ul>
d869 1
a869 1
Tento pøíkaz projde /etc/fstab a nastaví kvóty na ka¾dém souborovém
d872 1
a872 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&sektion=1&format=html">quota(1)</a>.
a876 1
</p>
d878 1
a878 2
<ul>
<pre>
d880 1
a880 2
</pre>
</ul>
d883 1
a883 2
Vede na výstup jako:
</p>
d885 1
a885 2
<ul>
<pre>
d889 1
a889 2
</pre>
</ul>
d892 6
a897 2
Standardnì jsou kvóty spu¹tìny pøi bootu. Pro vypnutí kvót pou¾ijte <ul><pre># <strong>quotaoff -a</strong></pre></ul>
</p>
a900 1
<a name="10.11"></a>
a901 95
</p>

<p>
Jako u¾ivatel/správce systému OpenBSD mù¾ete být rádi, ¾e KerberosIV je
pøed instalovanou souèástí ka¾dé standardní instalace. Zde najdete
ukázku jak nastavit Kerberos realm server, stejnì tak klient.
</p>

<p>
*VELMI*  podstatnou podmínkou je skuteènost, ¾e klienty a servery
Kerberos musí mít synchronizované systémové hodiny. Pokud rozdíl èiní
více jak 5 minut, budete svìdky podivných chyb, které samy o sobì
nevypadají, ¾e jsou zpùsobeny èasovým nesouladem, jako napøíklad:
</p>

<ul>
<pre>
kinit: Can't send request (send_to_kdc)
</pre>
</ul>

Jiná velmi èastá chyba je:

<ul>
<pre>
kauth: Time is out of bounds (krb_rd_req)
</pre>
</ul>

<p>
Jednoduchá cesta jak synchronizovat systémové hodiny je pou¾ít ntpd,
které je k dispozici ve sbírce portù
v <strong>/usr/ports/sysutils/ntp/</strong>.
</p>

V tìchto FAQ pøedpokládejme, ¾e ji¾ znáte koncept systému Kerberos.
Vynikající odkazy snadné na pochopení jsou napø.

<ul>
<li><a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kerberos.html">The FreeBSD handbook</a></li>
<li>Use the command <strong>info kth-krb</strong></li>
<li><a href="http://web.mit.edu/kerberos/www/dialogue.html">Designing an Authentication System: a Dialogue in Four Scenes</a></li>
<li><a href="http://web.mit.edu/kerberos/www/papers.html#krb4">Papers and Documentation Describing KerberosIV</a></li>
</ul>Nebo kniha<ul>
<li><a href="http://www.amazon.com/exec/obidos/ASIN/0130614661/qid%3D930594963/">Network Security Private Communication in a Public World [Kaufman, Perlman, Speciner, 1995]</a></li>
</ul>

<h3>Jak nastavit Kerberos IV REALM a SERVER</h3>

<p>
Budeme konfigurovat realm CIARASYSTEMS.COM, s avalanche.ciarasystems.com
jako hlavním serverem.
</p>

<p>
Nejprve musíme zeditovat na¹e konfiguraèní soubory. Najdete je v
<tt>/etc/kerberosIV/</tt>.  Soubory které se nás nyní týkají jsou
<i>krb.realms</i> a <i>krb.conf</i>. Zaèneme s <i>krb.conf</i>.
</p>

<ul>
<pre>
# <strong>cat krb.conf</strong>
CIARASYSTEMS.COM
CIARASYSTEMS.COM avalanche.ciarasystems.com admin server
</pre>
</ul>

<p>
Jak vidíte, takto specifikujeme kerberosu, ¾e doména má název
CIARASYSTEMS.COM (nebo logická oblast) a ¾e v rámci této domény je
avalanche jako administraèní server. Nyní se podívejme na
<i>krb.realms</i>. Více informací najdete v
<a
href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.conf&sektion=5&format=html">krb.conf</a>.
</p>

<ul>
<pre>
[root@@avalanche kerberosIV] <strong>cat krb.realms</strong>
avalanche.ciarasystems.com      CIARASYSTEMS.COM
.ciarasystems.com               CIARASYSTEMS.COM
</pre>
</ul>

<p>
krb.realms zprostøedkuje pøeklad názvù strojù na názvy domény Kerberos
(Kerberos realm) pro slu¾by které jsou danými stroji poskytovány.  Ka¾dý
øádek v tomto souboru má jeden z tìchto tvarù (domain_name by mìlo být
ve tvaru .XXX.YYY).  V na¹em pøíkladu je avalanche název stroje v
CIARASYSTEMS.COM oblasti. A .ciarasystems.com je doménové jméno  v
oblasti CIARASYSTEMS.COM. Opìt pro dal¹í informace si pøeètìte
manuálovou stránku
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.realms&sektion=5&format=html">krb.realms</a>.
</p>
d904 2
a905 217
Nyní spustíme <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdb_init&sektion=8&format=html">kdb_init(8)</a>, 
abychom vytvoøili a incializovali databázi Kerberos.
</p>

<ul>
<pre>
# <strong>kdb_init</strong>
Realm name [default  NO.DEFAULT.REALM ]: CIARASYSTEMS.COM
You will be prompted for the database Master Password.
It is important that you NOT FORGET this password.

Enter Kerberos master password: <strong>neukazuje se</strong>
Verifying password -
Enter Kerberos master password:
</pre>
</ul>

<p>
Nyní pou¾ijeme 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kstash&sektion=8&format=html">kstash(8)</a>,
který slou¾í k ulo¾ení hlavního klíèe databáze Kerberos key distribtion
center (KDC) do hlavního cache souboru.
</p>

<ul>
<pre>
# <strong>kstash</strong>
Enter Kerberos master password:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Wrote master key to /etc/kerberosIV/master_key
</pre>
Tím jsme ulo¾ili za¹ifrované hlavní heslo (master password) do
/etc/kerberosIV/master_key.<p>

Nyní potøebujeme pøidat do databáze  dva principals pro ka¾dý systém,
který bude zabezpeèen pomocí Kerberos. Jejich jména jsou <i>kpasswd</i>
a <i>rcmd</i>. Tyto principals jsou vytvoøeny pro ka¾dý systém, s
instancemi jejich¾ jména odpovídají jednotlivým systémùm.

Tyto démony,  <i>kpasswd</i> a <i>rcmd</i> dovolí ostatním systémùm
zmìnit hesla Kerberos a spou¹tìt pøíkazy jako  <i>rcp, rlogin</i> a
<i>rsh</i>.


<pre>
# <strong>kdb_edit</strong>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!

Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

Principal name: <strong>passwd</strong>
Instance: <strong>avalanche</strong>

&lt;Not found&gt;, Create [y] ? <strong>y</strong>

Principal: passwd, Instance: avalanche, kdc_key_ver: 1
New Password:                <strong>&lt;----- Pou¾ijte 'RANDOM' jako heslo</strong>
Verifying password -
New Password:

Random password [y] ? <strong>y</strong>

Principal's new key version = 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2002-12-31</strong>
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.


Principal name: <strong>rcmd</strong>
Instance: <strong>avalanche</strong>

&lt;Not found&gt;, Create [y] ? <strong>y</strong>
Principal: rcmd, Instance: avalanche, kdc_key_ver: 1
New Password:                 <strong>&lt;----- Pou¾ijte 'RANDOM' jako heslo</strong>
Verifying password -
New Password:

Random password [y] ? <Strong>y</strong>

Principal's new key version = 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2002-12-31</strong>
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name:               <strong>&lt;----- Dejte &lt;ENTER&gt; pro ukonèení</strong>

</pre>
</ul>

<p>
Soubor srvtab obsahuje klíèe jednotlivých slu¾eb. Tyto musí být získány
z Kerberos key distribution center databáze, aby bylo mo¾no slu¾by
autentifikovat pomocí Kerberos. Pro ka¾dý host specifikovaný na
pøíkazové øádce vytvoøí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ext_srvtab&sektion=8&format=html">ext_srvtab(8)</a>
soubor hostname-new-srvtab, obsahující v¹echny polo¾ky v databázi
jejich¾ instance odpovídá jménu hostu.
</p>

<ul>
<pre>
# <Strong>ext_srvtab avalanche</strong>

Enter Kerberos master password:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Generating 'avalanche-new-srvtab'....

# <strong>mv avalanche-new-srvtab srvtab</strong>
# <strong>chmod 600 srvtab</strong>
</pre>
</ul>

<p>
Nyní mù¾ete do databáze pøidat u¾ivatele.
</p>

<ul>
<pre>
# <strong>kdb_edit</strong>
Opening database...

Enter Kerberos master key:

Current Kerberos master key version is 1.

Master key entered.  BEWARE!
Previous or default values are in [brackets] ,
enter return to leave the same, or new value.

Principal name: <strong>jeremie</strong>
Instance:

&lt;Not found&gt;, Create [y] ? <strong>y</strong>

Principal: jeremie, Instance: , kdc_key_ver: 1
New Password:                &lt;---- zde zadejte zabezpeèené heslo
Verifying password

New Password:                &lt;---- opakujte zadání hesla
Principal's new key version = 1
Expiration date (enter yyyy-mm-dd) [ 2000-01-01 ] ?
Max ticket lifetime (*5 minutes) [ 255 ] ?
Attributes [ 0 ] ?
Edit O.K.
Principal name:          &lt;---- stisk enteru bez udání dal¹ího zpùsobí ukonèení, nebo mù¾ete zadávat dal¹í polo¾ky
</pre>
</ul>

<p>
Nyní jsou nastaveny v¹echny èásti systému Kerberos. Zbývá zajistit, aby
se kerberos inicializoval pøi startu a byly spu¹tìny démony, které budou
pou¾ívat autentifikaci Kerberos.
</p>

<p>
V /etc/rc.conf nastavte:
<ul>
<tt>kerberos_server=YES</tt>
</ul>

V /etc/inetd.conf odkomentujte:
<UL>
<pre>
telnet       stream  tcp     nowait  root    /usr/libexec/telnetd    telnetd -k
klogin       stream  tcp     nowait  root    /usr/libexec/rlogind    rlogind -k
kshell       stream  tcp     nowait  root    /usr/libexec/rshd       rshd -k
kauth        stream  tcp     nowait  root    /usr/libexec/kauthd     kauthd
</pre>
</ul>

Pak dejte reboot nebo:
<ul>
<pre>
# <Strong>kill -HUP `cat /var/run/inetd.pid`</strong>
# <Strong>/usr/libexec/kerberos &gt;&gt; /var/log/kerberos.log &amp;</strong>
# <strong>/usr/libexec/kadmind -n &gt;&gt; /var/log/kadmind.log &amp;</strong>
</pre>
</ul>
</p>

<p>
Poznámka: ukázali jsme ponìkud jednoduché nastavení. Obvykle jsou
nastaveny také zálo¾ní servery (slave servery), aby v pøípadì, ¾e jeden
server je zastaven nebyly zastaveny také v¹echny slu¾by na Kerberosu
závislé. Je mo¾né dodat také právo 'su' specifickému principal, viz. 
<a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/kerberos.html#AEN9189">the FreeBSD Handbook</a>.
</p>

<h3>Jak nastavit pro práci s Kerberos pracovní stanici</h3>

<p>
Budeme chtít nastavit pracovní stanici s názvem <i>gatekeeper</i> jako
souèást Kerberos oblasti CIARASYSTEMS.COM s hlavním serverem
avalanche.ciarasystems.com.
</p>

<p>
Nejprve musíme nastavit <i>krb.conf</i> a <i>krb.realms</i> tak jako na
pøedcházejícím stroji. To proto, aby <i>gatekeeper</i> vìdìl, který
sever je KDC a ve kterém doménì se nachází. Opìt tedy:
</p>

<ul>
d907 1
a907 7
# <strong>cat krb.conf</strong>
CIARASYSTEMS.COM
CIARASYSTEMS.COM avalanche.ciarasystems.com admin server

# <strong>cat krb.realms</strong>
avalanche.ciarasystems.com      CIARASYSTEMS.COM
.ciarasystems.com               CIARASYSTEMS.COM
a908 87
</ul>

<p>
Nyní inicializujeme kerberos. Pro získání lístku pou¾ijete
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kinit&sektion=1&format=html">kinit(1)</a>.
</p>

<ul>
$ <Strong>kinit</strong>
The OpenBSD Project (gatekeeper)
Kerberos Initialization
Kerberos name: <strong>jeremie</strong>
Password:
</pre>
</ul>

<p>
Poté co jsme se identifikovali mù¾eme vypsat na¹e lístky pøíkazem
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=klist&sektion=1&format=html">klist(1)</a>.
</p>

<ul>
<pre>
$ <strong>klist</strong>
Ticket file:    /tmp/tkt1000
Principal:      jeremie@@CIARASYSTEMS.COM

  Issued           Expires          Principal
Jun 28 01:03:25  Jun 28 11:03:25  krbtgt.CIARASYSTEMS.COM@@CIARASYSTEMS.COM
</pre>
</ul>

<p>
Nyní se zdá, ¾e je v¹e nastaveno. Zbývá to otestovat. Budeme testovat
rlogin(1) a telnet(1).
</p>

<ul>
<pre>
$ <Strong>telnet avalanche</strong>
Trying 192.168.0.38...
Connected to avalanche.
Escape character is '^]'.
[ Trying mutual KERBEROS4 ... ]
[ Kerberos V4 accepts you ]
[ Kerberos V4 challenge successful ]
Last login: Sun Jun 27 22:52:25 on ttyp1 from gatekeeper
Warning: no Kerberos tickets issued.
OpenBSD 3.1-current (GENERIC) #4: Wed May  8 09:36:35 EDT 2002
</pre></ul>

a
<ul><pre>
$ <Strong>rlogin avalanche</strong>
Last login: Sun Jun 27 22:53:39 on ttyp1 from gatekeeper
Warning: no Kerberos tickets issued.
OpenBSD 3.1-current (GENERIC) #4: Wed May  8 09:36:35 EDT 2002
</pre>
</ul>

<p>
Mù¾eme øíci, ¾e pou¾íváme Kerberos pro autentizaci sezení rlogin.
Chcete-li odstranit jakékoliv vydané lístky, pou¾ijte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdestroy&sektion=1&format=html">kdestroy(1)</a>.
Napøíklad:
</p>

<ul>
<pre>
$ <strong>kdestroy</strong>
Tickets destroyed.
$ <Strong>rlogin avalanche</strong>
krcmd: No ticket file (tf_util)
rlogin: warning, using standard rlogin: can't provide Kerberos auth data.
avalanche: Connection refused
</pre>
</ul>

<p>
Neobávejte se hlá¹ky 'Warning: no Kerberos tickets issued.' . Vypisuje
se, proto¾e provádíme pouze kerberos autentizaci, nikoliv ticket
passing. Chcete-li pou¾ívat ticket passing, pou¾ijte
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">OpenSSH</a>,
které má pro to podporu.  KerberosIV nepodporuje tgt passing, ten je
podporován pouze v implementaci AFS kaserveru z krb4, proto¾e normální
KerberosIV kdc kontroluje IP adresu uvedenou v tiketu.
</p>
d912 1
a912 3
<a name="10.12"></a>
<h2>10.13 - Nastavení anonymního FTP.</h2>
</p>
a917 1
</p>
d928 4
a931 5
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftp(8)</a>
a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=2&format=html">chroot(2)</a>.
Pøíklad pøidání u¾ivatele <i>ftp</i>. Pou¾ijeme
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
Musíme také pøidat  /usr/bin/false do <i>/etc/shells</i>, co¾ je
d940 1
a940 2
<ul>
<pre>
d942 1
a942 1
Use option ``-silent'' if you don't want see all warnings and questions.
d945 1
d951 22
a972 19
Enter username [a-z0-9_]: <strong>ftp</strong>
Enter full name []: <strong>anonymous ftp</strong>
Enter shell csh false ksh nologin sh tcsh zsh [sh]: <strong>false</strong>
Uid [1002]:
Login group ftp [ftp]:
Login group is ``ftp''. Invite ftp into other groups: guest no
[no]: <strong>no</strong>
Enter password []:
Set the password so that user cannot logon? (y/n) [n]: <strong>y</strong>

Name:     ftp
Password: ****
Fullname: anonymous ftp
Uid:      1002
Gid:      1002 (ftp)
Groups:   ftp
HOME:     /home/ftp
Shell:    /usr/bin/false
OK? (y/n) [y]: <strong>y</strong>
d974 2
a975 2
Copy files from /usr/share/skel to /home/ftp
Add another user? (y/n) [y]: <strong>n</strong>
d977 1
a977 2
</pre>
</ul>
d983 1
a983 1
Pøesnì tak jak jsme chtìli. Musíme ale je¹tì  provést nìkolik zmìn,
d986 1
a986 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftp(8)</a>.
</p>
d988 2
a990 2
<b>NENÍ</b> nutné vytváøet adresáøe /home/ftp/usr nebo /home/ftp/bin.
<BR>
a1007 1
</p>
d1009 1
a1009 2
<ul>
<pre>
d1030 1
a1030 2
</pre>
</ul>
a1039 1
</p>
d1041 1
a1041 1
<ul><pre>
d1043 1
a1043 1
</pre></ul>
a1053 1
</p>
d1055 1
a1055 1
<ul><pre>
d1057 1
a1057 1
</pre></ul>
a1064 1
</p>
d1066 1
a1066 1
<ul><pre>
d1068 1
a1068 1
</pre></ul>
d1072 2
a1073 2
<i>/etc/inetd.conf</i>.
</p>
d1080 1
a1080 1
  po pøipojení.</li>
d1082 1
a1082 1
  zalogování.</li>
d1084 1
a1084 1
  Bude vypsán jednou poté, co u¾ivatel vstoupí do tohoto adresáøe.</li>
d1090 1
a1090 3
<a name="10.13"></a>
<h2>10.14 - Omezení u¾ivatelù na jejich domovský adresáø v ftpd(8).</h2>
</p>
d1093 2
a1094 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a>
v OpenBSD umo¾òuje øe¹it  tento problém velice jednodu¹¹e. Hlavní roli
d1101 1
a1101 1
<ul><pre>
d1108 1
a1108 1
230- OpenBSD 3.1-current (GENERIC) #7: Sat May 11 23:22:52 EDT 2002
d1144 1
a1144 1
</pre></ul>
a1151 1
</p>
d1153 1
a1153 1
<ul><pre>
d1160 1
a1160 1
</pre></ul>
a1165 1
</p>
d1167 1
a1167 1
<ul><pre>
d1194 1
a1194 1
</pre></ul>
a1197 1
<a name="10.14"></a>
a1198 1
</p>
a1206 1
</p>
a1213 1
</p>
d1217 1
a1217 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&sektion=8">talkd(8)</a>
a1219 1
</p>
a1228 1
</p>
a1240 1
</p>
d1243 1
a1243 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a> 
a1247 1
</p>
d1250 2
a1251 2
Pro sta¾ení zdrojových kódù souèasné verze OpenBSD pomocí
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a>,
a1252 1
</p>
d1256 2
a1257 1
$ <b>cvs -d anoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_3_0_BASE src/libexec/talkd/</b>
a1277 1
</p>
a1283 1
</p>
d1285 1
a1285 1
<ul><pre>
d1308 1
a1308 1
</pre></ul>
a1312 1
</p>
a1315 1
<p>
d1347 4
a1350 1
mkdep -a /home/ericj/lsrc/src/libexec/talkd/talkd.c /home/ericj/lsrc/src/libexec/talkd/announce.c /home/ericj/lsrc/src/libexec/talkd/process.c /home/ericj/lsrc/src/libexec/talkd/table.c /home/ericj/lsrc/src/libexec/talkd/print.c
d1357 2
a1358 1
nroff -Tascii -mandoc /home/ericj/lsrc/src/libexec/talkd/talkd.8 &gt; talkd.cat8
d1368 179
a1546 1
</p>
d1550 3
a1552 3
<a href= "index.html">[Zpìt na index]</a>
<a href= "faq9.html">[Do sekce 9.0 - Pøechod od Linuxu]</a>
<a href= "faq11.html">[Do sekce 11.0 - Ladìní výkonu]</a>
d1554 1
a1554 1
</p>
d1561 1
a1561 1
Originally [OpenBSD: faq10.html,v 1.72 ]
d1563 1
a1563 1
$Translation: faq10.html,v 1.11 2003/10/29 08:13:12 certik Exp $
@


1.9
log
@
sync with badlands translation CVS,
work by Vaclav Rehak <vasek@@openbsd.cz>
@
text
@d1810 1
a1810 1
$Translation: faq10.html,v 1.10 2002/09/09 17:41:42 certik Exp $
@


1.8
log
@
sync with badlands translation CVS
@
text
@d25 2
a26 1
<li><a href="#RelayingDenied">10.4 - Proè dostanu hlá¹ku relaying access denied  pøi posílání mailu pøes OpenBSD systém?</a>
d28 12
a39 10
hlá¹ení pøi získávání mailu pøes POP. Co dìlat?</a>
<li><a href="#HTTPS">10.6 - Nastavení Secure HTTP Serveru pou¾itím SSL(8)</a>
<li><a href="#vipw">10.7 - Zmìnil jsem /etc/passwd  pomoci vi(1), ale vypadá to, ¾e se nic nezmìnilo. Proè?</a>
<li><a href="#AddDelUser">10.8 - Jak pøidat/smazat u¾ivatele?</a>
<li><a href="#FTPOnly">10.9 - Jak vytvoøit ftp-only úèet?</a>
<li><a href="#Quotas">10.10 - Nastavení diskových kvót</a>
<li><a href="#Kerberos">10.11 - Nastavení Kerberos klient/server</a>
<li><a href="#AnonFTP">10.12 - Nastavení anonymního FTP Serveru</a>
<li><a href="#ftpchroot">10.13 - Omezení u¾ivatele na jeho domovský adresáø v fptd(8)</a>
<li><a href="#Patches">10.14 - Aplikování patchù v OpenBSD.</a>
d340 22
d365 1
a365 1
<h2>10.6 - Nastavení Secure HTTP serveru s SSL(8)</h2>
d504 1
a504 1
<h2>10.8 - Jaký je nejlep¹í zpùsob pro pøidávání / odstraòování
d596 1
a596 1
<h3>10.8.2 - Pøidání u¾ivatele pomocí user(8)</h3>
d615 1
a615 1
<h4>10.8.2.1 - Vlastní pøidání u¾ivatele</h4>
d724 1
a724 1
<h4>10.8.2.2 - Odstranìní u¾ivatele</h4>
d746 1
a746 1
<h2>10.9 - Jak vytvoøím úèet pouze pro ftp (ne anonymní FTP!)?</h2>
d770 1
a770 1
<h2>10.10 - Nastavení kvót</h2>
d902 1
a902 1
<h2>10.11 - Jak nastavit klient a server Kerberos na OpenBSD</h2>
d1317 1
a1317 1
<h2>10.12 - Nastavení anonymního FTP.</h2>
d1504 1
a1504 1
<h2>10.13 - Omezení u¾ivatelù na jejich domovský adresáø v ftpd(8).</h2>
d1616 1
a1616 1
<h2>10.14 - Aplikování patchù v OpenBSD</h2>
d1810 1
a1810 1
$Translation: faq10.html,v 1.9 2002/09/09 07:53:46 certik Exp $
@


1.7
log
@
sync with badlands translation CVS
@
text
@d22 4
a25 4
<li><a href="#wheel">10.1 - Pøíkaz 'su root' hlásí, ¾e jsem ve ¹patné skupinì</a></li>
<li><A HREF="#DupFS">10.2 - Jak zálohovat filesystem?</A></li>
<li><A HREF="#rc">10.3 - Jak zpustit demona spolu se systemem? ( Pøehled rc(8)  )</A></li>
<li><a href="#RelayingDenied">10.4 - Proè dostanu hlá¹ku relaying access denied  pøi posílání mailu pøes OpenBSD systém?</a></li>
d27 8
a34 8
hlá¹ení pøi získávání mailu pøes POP. Co dìlat?</a></li>
<li><a href="#HTTPS">10.6 - Nastavení Secure HTTP Serveru pou¾itím SSL(8)</a></li>
<li><a href="#vipw">10.7 - Zmìnil jsem /etc/passwd  pomoci vi(1), ale vypadá to, ¾e se nic nezmìnilo. Proè?</a></li>
<li><a href="#AddDelUser">10.8 - Jak pøidat/smazat u¾ivatele?</a></li>
<li><a href="#FTPOnly">10.9 - Jak vytvoøit ftp-only úèet?</a></li>
<li><a href="#Quotas">10.10 - Nastavení diskových kvót</a></li>
<li><a href="#Kerberos">10.11 - Nastavení Kerberos klient/server</a></li>
<li><a href="#AnonFTP">10.12 - Nastavení anonymního FTP Serveru</a></li>
d45 1
a45 1
<h2>10.1 - Proè to hlásí, ¾e jsem ve ¹patné skupinì, kdy¾ dám su root ?</h2>
d49 6
a54 4
U¾ivatel musí být dopsán ruènì do skupiny  <kbd>&quot;wheel&quot;</kbd>. Je to
pøedev¹ím z bezpeènostních dùvodù a mìli byste být opatrní v otázce, koho do
této skupiny dopí¹ete. U¾ivatelé, kteøí jsou na OpenBSD ve skupinì <kbd>wheel</kbd> mohou pou¾ívat pøíkaz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=su&apropos=0&sektion=1&format=html">
su(1)</a> k tomu, aby se stali superu¾ivatelem. U¾ivatelé, kteøí nejsou v této
d56 8
a63 4
Pøíklad odpovídajícího øádku z <kbd>/etc/group</kbd> , kde je u¾ivatel <strong>ericj</strong> ve skupinì <kbd>&quot;wheel&quot;</kbd>.
<P>
Pokud pøidáváte nového u¾ivatele pomocí <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&apropos=0&sektion=8&format=html">adduser(8)</a>, mù¾ete
ho doplnit do skupiny wheel tak, ¾e na dotaz <tt>Invite <i>user</i> into other groups:</tt> odpovíte wheel.
d73 3
a75 1
Jiný zpùsob , jak dát u¾ivatelùm omezený pøístup k superu¾ivatelovým privilegiim, bez pøipsání do /etc/group je pou¾ití pøíkazu <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sudo&sektion=8&format=html">sudo(8)</a>.
d84 7
a90 2
Pro zálohování pou¾ijte <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dump&sektion=8&format=html">dump(8)</a> a pro obnovení <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=restore&sektion=8&format=html">restore(8)</a>.
Kombinací obou tìchto pøíkazù mù¾ete provádìt duplikování adresáøové hierarchie. Napø. chcete-li duplikovat v¹e pod adresáøem <kbd>SRC</kbd> do adresáøe <kbd>DST</kbd> zadejte: </p>
d98 4
a101 4
dump dává mnoho mo¾ností jak zálohovat a mù¾e být zbyteèné pou¾ít tento silný
pøíkaz, pokud chcete duplikovat jenom èást filesystému.
Pøíkaz  <A
HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=tar&sektion=1&format=html">tar(1)</a>
d103 2
a104 2
<UL>
<PRE>
d106 3
a108 3
</PRE>
</UL>
<BR>
d117 2
a118 1
OpenBSD pou¾ívá narozdíl od napø. linuxu startovací skripty ve stylu <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc&sektion=8&format=html">rc(8)</a> .
d124 2
a125 1
    <li>/etc/rc.conf - Konfiguraèní skirpt pou¾ívaný <i>/etc/rc</i> pro získání informací o tom, které démony nastartovat.
d127 8
a134 5
    <li>/etc/rc.local - Skript pou¾ívaný pro lokální administraci. Obsahuje lokálnì specifické informace.
    <li>/etc/rc.securelevel - Skript spou¹tìjící pøíkazy pøed zmìnou security
levelu . Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=init&sektion=8&format=html">init(8)</a>
    <li>/etc/rc.shutdown - Skript spou¹tìný pøi shutdownu. Sem umístìte v¹e co uznáte za vhodné k provedení pøi ukonèení systému.
Viz. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rc.shutdown&sektion=8&format=html">rc.shutdown(8)</a>
d139 3
a141 1
Hlavní soubory pro administrátora jsou  <i>/etc/rc.conf</i>, <i>/etc/rc.local</i> a <i>/etc/rc.shutdown</i>. Prùbìh procedury  rc(8) je následující:
d145 2
a146 1
    <li>Kontrola filesystému. Je pøeskoèeno, pokud exituje soubor /etc/fastboot , co¾ není ale obecnì dobrý nápad.
d163 5
a167 1
Vìt¹ina démonù a slu¾eb, které pøicházejí pùvodnì s OpenBSD se startuje pøi bootu po editování souboru <i>/etc/rc.conf</i> . Nejprve se podívejte na standardní <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/rc.conf">/etc/rc.conf</a>. Vidíte øádky jako tento:
d175 7
a181 2
Tento øádek øíká, ¾e ftpd nebude startovat pøi bootu. ( pøinejmen¹ím ne z
rc(8), pøeètìte si <a href="faq10.html#AnonFTP">Anonymous FTP FAQ</a> o ftpd. ) Pro ka¾dý pøípad má ka¾dý øádek také komentáø spolu s volbami pro <b>NORMALNÍ</b> pou¾ití démona nebo slu¾by. To neznamená, ¾e musíte spou¹tìt démona s tìmito volbami. Pou¾ijte man(1) a zjistíte jaké volby pro tu kterou slu¾bu pou¾ít, aby splòovala dané po¾adavky. Napø. pùvodní øádka pro httpd(8).
d188 6
a193 4
Jak vidíte, obvykle pøi startu httpd nepotøebujete ¾ádné dal¹í volby. Proto je øádek &quot;<b>
httpd_flags=""</b>&quot; v podstatì zbyteèný. Ale jakmile budete chtít
httpd s ssl podporou . ( Více viz. <a href="#HTTPS">SSL FAQ</a> or <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>)
Pak budete muset doplnit volbu  &quot;httpd_flags="-DSSL"&quot;.
d199 4
a202 2
Pro démony, které pøiinstalujete do systému pomocí portù nebo jiným zpùsobem pou¾ijte soubor <i>/etc/rc.local</i>. Napø. jste nainstalovali démona, který se
nachází v  /usr/local/sbin/daemonx, a chcete ho pou¹tìt pøi bootu. Pøidejte do souboru  <i>/etc/rc.local</i> øádek :
d212 3
a214 1
Od této chvíle bude démon pou¹tìn pøi startu. Rovnì¾ uvidíte v¹echny chybová hlá¹ení, které démon vyrobí. Normální start bez chyb bude vypadat takto:
d224 3
a226 2
<i>/etc/rc.shutdown</i> je skript pou¹tìný pøi ukonèení systému. Pokud máte apm, mù¾ete nastavit &quot;powerdown=YES&quot;. Dostanete ekvivalent &quot;shutdown -p&quot;.
</p>
d231 2
a232 1
<h2>10.4 - Proè dostanou u¾ivatelé posílající pøes OpenBSD zvenku emaily  hlá¹ku relaying access denied?</h2>
d252 2
a253 2
Pokud tento soubor neexistuje, vytvoøte ho. Budete do nìj dále muset pøidat
stroje, které budou posílat vzdálenì emaily:
d263 2
a264 1
Nezapomeòte poslat démonu sendmail signál 'HangUP', (signál, který pro vìt¹inu démonù znamená znovunaètení jejich konfiguraèního souboru):
d285 2
a286 1
<h2>10.5 - Nastavil jsem POP, ale dostávám chybová hlá¹ení pøi získávání mailu pøes POP.</h2>
d290 2
a291 1
Vìt¹ina problému s POP jsou v doèasných souborech a lock souborech. Pokud vám pop server po¹le chybovou hlá¹ku jako:
d311 3
a313 2
Jiná vìc, kterou zkontrolujte je, zda u¾ivatel skuteènì vlastní sobì odpovídající soubor ve /var/mail. Samozøejmì, ¾e by tomu tak mìlo být, ale pokud ne, tak
i toto mù¾e být problém!
d315 8
a322 2
Samozøejmì, tím ¾e udìláte /var/mail zapisovatelný pro skupinu mail, otevírá se zde prostor pro jisté bezpeènostní problémy. Pravdìpodobnì s tím ale nebudete mít problémy. Ov¹em mohly by nastat (máte-li napø. velmi nav¹tìvovaný server nebo jste-li ISP,...)!
Zkuste spustit cucipop nelbo jiný POP démon z OpenBSD sbírky portù. Nebo mù¾ete mít ¹patnì nastavené volby pro va¹eho démona (napø. dot locking). Nebo staèí kdy¾ jenom zmìníte adresáø, ve kterém démon vytváøí lock soubory (aèkoliv pak by lock souborù byl hodnotný pouze pro POP démona.)
d326 3
a328 1
<b>PS:</b> V¹imnìte si, ¾e OpenBSD nemá skupinu se jménem &quot;mail&quot;. Musíte ji vytvoøit v souboru <i>/etc/group</i>. Napø. øádek jako:
d347 7
a353 4
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a>, musíte nejprve vytvoøit certifikát. Ten pak ulo¾it do
<i>/etc/ssl/private</i>. Následujicí ukázky najdete také v manuálové stránce
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>. Tam mù¾ete také nalézt dal¹í informace. Zde se jen omezíme
na ukázku toho, jak vytvoøit RSA certifikát pro web server, ne DSA certifikát.
d358 9
a366 1
Pro secure HTTP potøebujete nejprve vytvoøit pro démona <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a> bezpeènostní certifikát. Následující kroky jsou vybrány z manálové stránky týkající se <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a> . V ní nadjete dal¹í informace. FAQ pouze uká¾e jak vytvoøit RSA certifikát pro web server, nikoliv DSA server certifikát. Pro jeho vytvoøení si pøeètìte manuálovou stránku <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>.
d370 3
a372 1
Nejprve musíte vytvoøit pro vá¹ server klíè a certifikát. Chcete-li pou¾ívat RSA, musíte upgradovat va¹i libssl. Nyní vytvoøte klíè. Pou¾ijte OpenSSL:
d382 2
a383 1
Nebo, pokud si pøejete, aby byl klíè za¹ifrován heslem, které budete muset zadat pøi startu serveru
d393 3
a395 1
Dal¹ím krokem je vygenerovat Certificate Signing Request, který pou¾ívá Certifikaèní Autorita (CA) , která podepí¹e vá¹ certifikát. Pou¾ijte pøíkaz:
d405 5
a409 1
Soubor <i>server.csr</i> mù¾ete pak pøedat Certifikaèní Autoritì, která podepí¹e klíè. Jedna taková CA je  <b>Thawte Certification</b>, která je k dispozici na <a href="http://www.thawte.com/">http://www.thawte.com/</a>. Thawte mù¾e v souèasnosti podepisovat va¹e RSA klíèe. Procedura pro DSA klíèe je ve vývoji.
d413 2
a414 1
Pokud si to nemù¾ete dovolit, nebo vám staèí podepsat si certifikát sami, mù¾ete pou¾ít následujcí.
d425 5
a429 1
Se soubory <i>/etc/ssl/server.crt</i> a <i>/etc/ssl/private/server.key</i> na svých místech, byste mìli být schopni nastartovat démona  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=httpd&sektion=8&format=html">httpd(8)</a> s volbou  <b>-DSSL</b>, èím¾ umo¾níte https transakce na port 443.
d435 2
a436 2
<h2>10.7 - Zeditoval jsem /etc/passwd, ale vypadá to, ¾e se nic nezmìnilo. Proè?
</h2>
d440 4
a443 2
Pokud editujete /etc/passwd, zmìny které provedete budou ztraceny. OpenBSD
generuje /etc/passwd dynamicky programem <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8&apropos=0">pwd_mkdb(8)</a>. Hlavní soubor s hesly je v OpenBSD /etc/master.passwd . Dle pwd_mkdb(8),
d447 3
a449 3
	/etc/master.passwd  souèasný soubor s hesly
	/etc/passwd			soubor s hesly ve formátu Verze 7
	/etc/pwd.db			databázový soubor s hesly (nezabezpeèený)
d455 2
a456 1
<P>
d459 8
a466 7
kdo má do systému pøístup (a /etc/passwd je pak vynikajícím cílem pro programy
jako napø. Crack.) 4.4BSD pøi¹lo s novým souborem master.passwd, který má
roz¹íøený formát (navíc dal¹í vlastnosti spolu s tìmi, které obsahovalo staré 
/etc/passwd), a který je èitelný pouze pro superu¾ivatele. Pro rychlej¹í
pøístup k datùm  v tìchto souborech pou¾ívají knihovní funkce obvykle soubory
/etc/pwd.db a /etc/spwd.db.
<P>
d468 6
a473 5
Jmenuje se vipw(8). Vipw pou¾ívá vi (nebo vá¹ oblíbený editor specifikovaný
v promìnné $EDITOR) k editování souboru /etc/master.passwd . Poté co provedete
editaci, vipw(8) znovu vytvoøí soubory /etc/passwd, /etc/pwd.db a /etc/spwd.db 
 na základì zmìn, které udìláte. Vipw rovnì¾ provádí zamknutí tìchto souborù,
aby nikdo jiný nemohl mìnit tyto soubory ve stejnou chvíli.
d479 2
a480 2
<h2>10.8 - Jaký je nejlep¹í zpùsob pro pøidávání / odstraòování u¾ivtelù?</h2>
</p>
d491 15
a505 8
Nejjednodu¹¹í zpùsob jak pøidat v OpenBSD u¾ivatele je pou¾ít skript <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
Konfiguraci tohoto programu mù¾ete zmìnit v <strong>/etc/adduser.conf</strong>.
Ruènì pøidávat u¾ivatele lze také programem  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=vipw&sektion=8&format=html">vipw(8)</a>, tento pøíkaz je
ale urèen pøedev¹ím pro pøidávání u¾ivatelù. adduser(8) provádí kontroly 
konzistence souborù <strong>/etc/passwd</strong>, <strong>/etc/group</strong>, a shell databáze. Vytváøí také $HOME adresáøe. Mù¾e dokonce i posílat u¾ivatelùm
uvítací zprávy. V¹echny tyto vlastnosti mohou být zmìneny podle va¹ich po¾adavkù. Následuje jednoduchá ukázka pou¾ití programu adduser(8). Budeme pøidávat u¾ivatele <b>testuser</b>. Jeho
domovský adresáø $HOME bude umístìn v <i>/home/testuser</i>, u¾ivatel bude
ve skupinì <b>guest</b> a jeho pøíkazový interpret bude <i>/bin/ksh</i>.
d544 10
a553 5
Pro odstranìní u¾ivatele pou¾ijte pøíkaz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=rmuser&sektion=8&format=html">rmuser(8)</a>. Ten odstraní v¹e co se v systému k u¾ivateli vztahuje. Odstraní polo¾ky v <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=crontab&sektion=1&format=html">crontab(1)</a>, jeho
domovský adresáø (pokud je vlastnìn daným u¾ivatelem), a jeho po¹tu.
Samozøejmì odstraní i jeho záznamy z <strong>/etc/passwd</strong> a <strong>/etc/group</strong>. Následuje ukázka odstranìní u¾ivatele, kterého jsme pøidali
vý¹e ze systému. V¹imnìte si výzvy k zadání jména u¾ivatele a zda si pøejete
odstranit jeho domovský adresáø.
d593 8
a600 5
Jak ji¾ bylo naznaèeno, pøíkaz user(8) není interaktivní, proto nejpohodlnìj¹í
zpùsob pøidání u¾ivatele je pøíkaz adduser(8). Pøíkaz <i>/usr/sbin/user</i> je
vlastnì jen frontend pro zbytek pøíkazù  <i>/usr/sbin/user*</i>. Proto pøíkaz
<b>user add</b> a <b>useradd</b> jsou naprosto stejné. Je jen na vás, kterou z
forem pou¾ijete. (Czech note: technicky je v¹echny  <i>/usr/sbin/user*</i> implementovány jako hardlinky, skuteènì tedy v¾dy spou¹títe stejný pøíkaz, ale s jiným jménem a parametry.)
d604 5
a608 2
V následujícím pøíkladì budeme pøidávat stejného u¾ivatele jako v pøípadì  <a href="#adduser">vý¹e</a>. useradd(8)  je mnohem jednodu¹¹í pro èasté pou¾ívání,
pokud znáte standardní nastavní pro pøidávání u¾ivatele. Toto nastavení je ulo¾eno v <i>/etc/usermgmt.conf</i> a prohlédnout si ho mù¾ete napøíklad takto:
d623 9
a631 1
Uvedená nastavení budou pou¾ita jako standardní, pokud nespecifikujete na pøíkazové øádce vlastní. Napøíklad v pøípadì, ¾e chcete aby u¾ivatel patøil do skupiny <b>guest</b>, ne <b>users</b>. Jistou nevýhodou pøi pøidávání u¾ivatelù je, ¾e jejich hesla musí být specifikována na pøíkazové øádce. Zadat musíte v¹ak za¹ifrované heslo, k tomu pou¾ijte program  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=encrypt&sektion=1&format=html">encrypt(1)</a>. Napøíklad standardním ¹ifrovacím algoritmem hesel pou¾ívaným v OpenBSD je Blowfish se ¹estmi rundami. Pøíklad pou¾ití useradd(8).
d641 2
a642 1
Nyní máme pøipravené za¹ifrované heslo, mù¾ete pokroèit k pøidání u¾ivatele.
d651 5
a655 1
<b>Poznámka:</b> Ujistìte se, ¾e jste pou¾ili '' kolem øetìzce s heslem, ne  &quot;&quot; proto¾e shell bude interpretovat tyto znaky pøedtím ne¾ pøedá parametry programu user(8). Souèasnì se ujistìte, ¾e specifikujete volbu <b>-m</b>, pokud chcete vytváøet domovské adresáøe u¾ivatelù a kopírovat do nich soubory <i>/etc/skel</i>.
d659 2
a660 2
Zda byl u¾ivatel vytvoøen korektnì mù¾ete zkontrolovat nìkolika programy.
Jejich výèet následuje.
d681 2
a682 1
Navíc k tìmto pøíkazùm user(8) disponuje svou vlastní utilitou pro zobrazení charakteristiky u¾ivatele, nazývá se userinfo(8).
d702 3
a704 1
Odstranìní u¾ivatele pomocí pøíkazù z okruhu utility user(8) se pou¾ívá userdel(8). Je to velmi jednoduchý ale pou¾itelný pøíkaz. Pro odstranìní u¾ivatele z posledního pøíkladu, jednodu¹¹e:
d712 4
a715 3
V¹imnìte si volby <b>-r</b>, kterou je nutno specifikovat pokud budete chtít
smazat s u¾ivatelem i jeho domovský adresáø. Jiná mo¾nost je pou¾ít <b>-p</b>
a ne  <b>-r</b>, co¾ uzamkne u¾ivatelský úèet, ale neodstraní ¾ádné informace.
d725 15
a739 4
Existuje nìkolik zpùsobù, bì¾né je pøidat <i>/usr/bin/false</i> do <strong>/etc/shells</strong>. Poté pøi vytváøení u¾ivatele nastavte jeho shell na /usr/bin/false. Takovýto u¾ivatel se nebude moci pøihlásit do systému interaktivnì, ale bude vyu¾ívat prostøedkù, které bude ftp poskytovat. <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a> dá tomuto u¾ivateli standardnì domovský adresáø  <i>/home/&lt;user&gt;</i>. Pokud vám to vyhovuje nemusíte nic mìnit, pøesto mù¾ete specifikovat jakýkoliv jiný adresáø.
Mù¾ete zaøídit, aby u¾ivatel byl schopen vidìt soubory pouze ve svém domovském
adresáøi pøidáním jeho u¾ivatelského jména do <i>/etc/ftpchroot</i>.
Pou¾itím volby the <b>-A</b> démona  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a> mù¾ete dovolit pouze pøihlá¹ení na ftp s provedeným voláním chroot(2), které zajistí vý¹e uvedenou skuteènost.
d749 3
a751 1
Kvóty jsou pou¾ívány k omezení místa na disku, které mù¾e u¾ivatel pou¾ít pro své úèely. V situaci s omezenými prostøedky mohou kvóty výraznì pomoci. Kvóty lze nastavit dvìma rùznými zpùsoby.
d762 11
a772 1
První krok pøi nastavení kvót je uji¹tìní se, ¾e  <tt>volba QUOTA</tt> nechybí v konfiguraèním souboru jádra. Tato volba je v jádru GENERIC. Poté musíte oznaèit v souboru  <i>/etc/fstab</i> souborové systémy, pro které budou nastaveny kvóty. Slova <tt>userquota</tt> a  <tt>groupquota</tt> pou¾ijte pro oznaèení ka¾dého s filesystémù, na kterém budete kvóty pou¾ívat. Standardnì budou vytvoøeny soubory <tt>quota.user</tt> a <tt>quota.group</tt> v koøenovém adresáøi ka¾dého ze souborových systémù. Tento standard lze ovlivnit tak, ¾e napí¹ete napøíklad userquota=/var/quotas/quota.user. Nebo jakýkoliv jiný soubor ve kterém chcete mít ulo¾ené informace o kvótách. Pøíklad souboru /etc/fstab se zapnutými kvótami.
d785 2
a786 1
pou¾ívá editor vi(1) pro editování kvót, pokud není specifikována promìnná prostøedí EDITOR a není nastavena na jiný editor. Napøíklad:
d820 7
a826 3
V tomto pøípadì je softlimit nastaven na 1000 blokù a hardlimit na 1050 blokù.
Softlimit je limit, kdy je u¾ivatel pouze varován pøi jeho pøekroèení a musí
do vypr¹ení jistého èasového období zaøídit, aby velikost místa, které vyu¾ívá, poklesla pod tento limit. Èasové období lze nastavit pou¾itím volby <strong>-t</strong> pøíkazu edquota(8).  Po uplynutí tohoto èasu je softlimit chápán systémem jako hardlimit. Co¾ vìt¹inou vede k znemo¾nìní alokování dal¹ího místa.
d830 2
a831 1
Nyní po nastavení kvót je potøeba kvóty spustit. Pou¾ijete pøíkaz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quotaon&sektion=8&format=html">quotaon(8)</a>.
d842 7
a848 2
Tento pøíkaz projde /etc/fstab a nastaví kvóty na ka¾dém souborovém systému, který jsme oznaèili pøíslu¹ným zpùsobem. Nyní jsou kvóty nastaveny a fungují, prohlédnout si je mù¾ete programem <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=quota&sektion=1&format=html">quota(1)</a>.
Pou¾itím pøíkazu <strong>quota &lt;user&gt;</strong> dostanete informaci pro daného u¾ivatele. Zavoláte-li pøíkaz bez dal¹ích argumentù, vypí¹e se statistika.
d881 3
a883 2
Jako u¾ivatel/správce systému OpenBSD mù¾ete být rádi, ¾e KerberosIV je pøed instalovanou souèástí ka¾dé standardní instalace. Zde najdete ukázku jak nastavit
Kerberos realm server, stejnì tak klient.
d887 4
a890 2
*VELMI*  podstatnou podmínkou je skuteènost, ¾e klienty a servery Kerberos musí mít synchronizované systémové hodiny. Pokud rozdíl èiní více jak 5 minut, budete svìdky podivných chyb, které samy o sobì nevypadají, ¾e jsou zpùsobeny èasovým
nesouladem, jako napøíklad:
d908 3
a910 1
Jednoduchá cesta jak synchronizovat systémové hodiny je pou¾ít ntpd, které je k dispozici ve sbírce portù v <strong>/usr/ports/sysutils/ntp/</strong>.
d928 2
a929 2
Budeme konfigurovat realm CIARASYSTEMS.COM, s avalanche.ciarasystems.com jako
hlavním serverem.
d933 3
a935 2
Nejprve musíme zeditovat na¹e konfiguraèní soubory. Najdete je v <tt>/etc/kerberosIV/</tt>.
Soubory které se nás nyní týkají jsou <i>krb.realms</i> a <i>krb.conf</i>. Zaèneme s <i>krb.conf</i>.
d947 6
a952 1
Jak vidíte, takto specifikujeme kerberosu, ¾e doména má název CIARASYSTEMS.COM (nebo logická oblast) a ¾e v rámci této domény je avalanche jako administraèní server. Nyní se podívejme na <i>krb.realms</i>. Více informací najdete v <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.conf&sektion=5&format=html">krb.conf</a>.
d964 8
a971 3
krb.realms zprostøedkuje pøeklad názvù strojù na názvy domény Kerberos (Kerberos realm) pro slu¾by které jsou danými stroji poskytovány.
Ka¾dý øádek v tomto souboru má jeden z tìchto tvarù (domain_name by mìlo být ve tvaru .XXX.YYY).
V na¹em pøíkladu je avalanche název stroje v CIARASYSTEMS.COM oblasti. A .ciarasystems.com je doménové jméno  v oblasti CIARASYSTEMS.COM. Opìt pro dal¹í informace si pøeètìte manuálovou stránku <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=krb.realms&sektion=5&format=html">krb.realms</a>.
d993 4
a996 1
Nyní pou¾ijeme <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kstash&sektion=8&format=html">kstash(8)</a>, který slou¾í k ulo¾ení hlavního klíèe databáze Kerberos key distribtion center (KDC) do hlavního cache souboru.
d1009 2
a1010 3
Tím jsme ulo¾ili za¹ifrované hlavní heslo (master password) do /etc/kerberosIV/master_key.<p>

Nyní potøebujeme pøidat do databáze  dva principals pro ka¾dý systém, který bude zabezpeèen pomocí Kerberos. Jejich jména jsou <i>kpasswd</i> a <i>rcmd</i>. Tyto principals jsou vytvoøeny pro ka¾dý systém, s instancemi jejich¾ jména odpovídají jednotlivým systémùm.
d1012 8
a1019 3
Tyto démony,  <i>kpasswd</i> a <i>rcmd</i> dovolí ostatním systémùm zmìnit
hesla Kerberos a spou¹tìt pøíkazy jako  <i>rcp, rlogin</i>
a <i>rsh</i>.
d1076 7
a1082 1
Soubor srvtab obsahuje klíèe jednotlivých slu¾eb. Tyto musí být získány z Kerberos key distribution center databáze, aby bylo mo¾no slu¾by autentifikovat pomocí Kerberos. Pro ka¾dý host specifikovaný na pøíkazové øádce vytvoøí <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ext_srvtab&sektion=8&format=html">ext_srvtab(8)</a> soubor hostname-new-srvtab, obsahující v¹echny polo¾ky v databázi jejich¾ instance odpovídá jménu hostu.
d1170 4
a1173 3
Poznámka: ukázali jsme ponìkud jednoduché nastavení. Obvykle jsou nastaveny
také zálo¾ní servery (slave servery), aby v pøípadì, ¾e jeden server je zastaven nebyly zastaveny také v¹echny slu¾by na Kerberosu závislé. Je mo¾né dodat také
právo 'su' specifickému principal, viz. 
d1180 3
a1182 2
Budeme chtít nastavit pracovní stanici s názvem <i>gatekeeper</i> jako souèást
Kerberos oblasti CIARASYSTEMS.COM s hlavním serverem avalanche.ciarasystems.com .
d1186 3
a1188 1
Nejprve musíme nastavit <i>krb.conf</i> a <i>krb.realms</i> tak jako na pøedcházejícím stroji. To proto, aby <i>gatekeeper</i> vìdìl, který sever je KDC a ve kterém doménì se nachází. Opìt tedy:
d1204 2
a1205 1
Nyní inicializujeme kerberos. Pro získání lístku pou¾ijete <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kinit&sektion=1&format=html">kinit(1)</a>.
d1218 2
a1219 1
Poté co jsme se identifikovali mù¾eme vypsat na¹e lístky pøíkazem <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=klist&sektion=1&format=html">klist(1)</a>.
d1234 2
a1235 1
Nyní se zdá, ¾e je v¹e nastaveno. Zbývá to otestovat. Budeme testovat  rlogin(1) a telnet(1).
d1262 3
a1264 2
Mù¾eme øíci, ¾e pou¾íváme Kerberos pro autentizaci sezení rlogin. Chcete-li
odstranit jakékoliv vydané lístky, pou¾ijte <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kdestroy&sektion=1&format=html">kdestroy(1)</a>.
d1280 7
a1286 3
Neobávejte se hlá¹ky 'Warning: no Kerberos tickets issued.' . Vypisuje se, proto¾e provádíme pouze kerberos autentizaci, nikoliv ticket passing. Chcete-li
pou¾ívat ticket passing, pou¾ijte  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssh&sektion=1&format=html">OpenSSH</a>, které má pro to podporu.
KerberosIV nepodporuje tgt passing, ten je podporován pouze v implementaci AFS kaserveru z krb4, proto¾e normální KerberosIV kdc kontroluje IP adresu uvedenou v tiketu.
d1296 3
a1298 1
Anonymní FTP umo¾òuje zpøístupòovat soubory u¾ivatelùm, kteøí nemají úèet na va¹em poèítaèi, pomocí File Transfer Protokolu. Uvádíme pøehled krokù pøi nastavení anonymního FTP serveru.
d1304 16
a1319 5
Nejprve na svém systému musíte mít úèet s názvem "ftp". Na tento úèet by nemìlo být mo¾né se interaktivnì pøihlásit. Nastavíme domovský adresáø na /home/ftp,
ale mù¾ete specifikovat jaký chcete. Pøi pou¾ití anonymního ftp bude ftp démon
provádìt volání chroot(2) sebe sama do adresáøe specifikovaného jako domovský adresáø u¾ivatele 'ftp'. Více si pøeètìte v manuálových stránkách <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftp(8)</a> a <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=chroot&sektion=2&format=html">chroot(2)</a>. Pøíklad pøidání u¾ivatele <i>ftp</i>. Pou¾ijeme <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
Musíme také pøidat  /usr/bin/false do <i>/etc/shells</i>, co¾ je &quot;shell&quot; , který dáme u¾ivateli ftp. To mu znemo¾ní se pøihlásit, pøesto¾e mu dáme prázdné heslo. Staèí jednodu¹¹e <i>echo /usr/bin/false &gt;&gt; /etc/shells</i>.
Pokud chcete, aby se tento shell ukazoval v dotazech programu adduser, modifikujte také <i>/etc/adduser.conf</i>.
d1363 5
a1367 1
Spolu s novým u¾ivatelem jsme zalo¾ili také adresáø <i>/home/ftp</i>. Pøesnì tak jak jsme chtìli. Musíme ale je¹tì  provést nìkolik zmìn, abychom v¹e pøipravili pro anonymní ftp. Tyto zmìny jsou opìt vysvìtleny v manuálové stránce <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftp(8)</a> . 
d1373 12
a1384 4
<li><i>/home/ftp</i> - Hlavní adresáø. Mìl by být vlastnìn u¾ivatelem root a práva pøístupu 555.</li>
<li><i>/home/ftp/etc</i> - Volitelné a nedoporuèuje se, slou¾í pøedev¹ím pro získání informací o u¾ivatelech, kteøí existují na daném stroji. Pokud chcete, aby
anonymní ftp adresáø mìl asociován jména soubory s odpovídající jmény u¾ivatelù, zkopírujte sem /etc/pwd.db a /etc/group . Tento adresáø by mìl mít mód 511 a oba soubory by mìly mít práva 444. Slou¾í ke získání jmen vlastníka a skupiny odpovídajících daným id èíslùm. V pwd.db nejsou ulo¾ena hesla, ty jsou v spwd.db, který sem nekopírujte.</li>
<li><i>/home/ftp/pub</i> - Standardní adresáø, kam se ukládají soubory, které chceme sdílet. Tento adresáø by mìl mít mód 555.
d1388 2
a1389 1
Ne v¹echny adresáøe by mìl vlastnit "root". Zde je výpis jak by mìly adresáøe vypadat po jejich vytvoøení .
d1420 5
a1424 2
Mù¾ete si vybrat mezi spou¹tìním ftpd z inetd nebo z rc skriptù. V na¹em  pøíkladu ho budeme spou¹tìt z <a href="http://www.openbsd.org/cgi-bin/cvsweb/src/etc/inetd.conf">inetd.conf</a>.
Nejprve se musíme seznámit s nìkterými volbami ftpd. Standardní øádek v <i>/etc/inetd.conf</i> je:
d1432 8
a1439 2
Zde je fptd spu¹tìno s volbou <i>-US</i>. Tato volba bude logovat anonymní spojení do <i>/var/log/ftpd</i> a akutální relace do <i>/var/run/utmp</i>. Dovolí, aby tyto sezení byly vidìny pomocí who(1). Chcete-li spustit pouze anonymní server a neumo¾òit ostatním u¾ivatelùm ftp, pou¾ijte volbu <i>-A</i> option. Následuje startovací øádka démona ftpd spu¹tìného za úèelem pouze anonymních spojení.
Pou¾ívá také <i>-ll</i>, které loguje ka¾dou konekci pomocí syslog, spolu s get,retrieve a dal¹ími pøíkazy ftp.
d1447 5
a1451 3
Poznámka - pro ty z vás, kteøí budete pou¾ívat ftp server s VELKÝM provozem, bude lépe nespou¹tìt ftpd z inetd.conf . Nejlépe tak docílíte zakomentování øádku s ftpd v inetd.conf a startováním ftpd z rc.conf s volbou  <i>-D</i>.
Takto nastartujete ftpd jako démona, pøièem¾ sní¾íte náklady spojené s èastým
startem z inetd. Pøíklad startu z rc.conf.
d1459 2
a1460 1
To samozøejmì funguje, jenom pokud jste odstranili ftpd z <i>/etc/inetd.conf</i>.
d1467 6
a1472 3
<li><i>/etc/ftpwelcome</i> - Obsahuje uvítací zprávu vypsanou u¾ivateli po pøipojení.</li>
<li><i>/etc/motd</i> - Obsahuje zprávu vypsanou u¾ivateli po úspì¹ném zalogování.</li>
<li><i>.message</i> - Tento soubor lze umístit do libovolného adresáøe. Bude vypsán jednou poté, co u¾ivatel vstoupí do tohoto adresáøe.</li>
d1483 6
a1488 1
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftpd&sektion=8&format=html">ftpd(8)</a> v OpenBSD umo¾òuje øe¹it  tento problém velice jednodu¹¹e. Hlavní roli zde hraje soubor <strong>/etc/ftpchroot</strong>. Proto¾e u¾ivatelùm ne v¾dy mù¾eme dùvìøovat, je nutné omezit jejich pøístup na domovské adresáøe. Toto chování NENÍ standardní. Zde je pøíklad toho jak to vypadá standardnì.
d1537 5
a1541 2
Jak je vidìt, pøístup zde je zaji¹tìn k celému serveru. V ideálním svìtì, kde v¹em u¾ivatelùm mù¾eme dùvìøovat, je v¹e v poøádku, ale vìt¹inou tomu tak není.
Pro omezení u¾ivatele pøidejte jeho jméno do souboru <strong>/etc/ftpchroot</strong>. Ukázka omezení u¾ivatele &quot;ericj&quot;.
d1554 3
a1556 1
To staèí k tomu, abychom u¾ivateli &quot;ericj&quot; znemo¾nili uniknout z jeho domovského adresáøe. Jak uvidíte v dal¹ím pøíkladì, adresáø / se náhle zmìnil na jeho domovský adresáø!
d1595 6
a1600 1
Strom zdrojového kódu OpenBSD se stále mìní a zlep¹uje, spolu s tím jsou èasto opraveny bì¾né problémy a veøejnì jsou vydány patche. Tyto opravné kódy najdete na webové stránce se soupisem chyb <a href="../../cs/errata.html">http://www.openbsd.org/cs/errata.html</a>, kde jsou rozdìleny do nìkolika kategorií. Tyto kategorie korespondují s rozdílnými architekturami na které se mají patche aplikovat.
d1604 5
a1608 1
Poznamenejme je¹tì, ¾e patche nejsou vydávány pro novì pøidané kódy do OpenBSD a jsou k dispozici pouze pro dùle¾ité opravy spolehlivosti nebo pro opravy bezpeènostních chyb, které by mìly být ihned provedeny, jejich provedení je v¹ak, jako v ostatních pøípadech, na administrátorovi systému.
d1612 4
a1615 2
Napøíklad budeme patchovat démona <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=talkd&sektion=8">talkd(8)</a>
s bezpeènostní opravou z patche, který jsme získali z <a href="../../cs/errata.html">errata.html</a>.
d1621 5
a1625 1
V¹echny patche oznámené v <a href="../../cs/errata.html">http://www.openbsd.org/cs/errata.html</a> jsou patche vztahující se k zdrojovému kódu  posledního vydání systému. Patche aktuálního CVS stromu by mohly obsahovat dal¹í zmìny, které by na systému dané verze byly nechtìné.
d1631 7
a1637 2
Patche jsou v OpenBSD distribuovány jako diffy, tj. jako textové soubory, které obsahují rozdíly mezi pùvodním a opraveným zdrojovým kódem. <b>NEJSOU</b> distribuovány v binární podobì. To znamená, ¾e pro patch systému musíte mít k dispozici zdrojový kód nainstalované <b>VERZE</b> OpenBSD. To neznamená, ¾e musíte mít
nainstalovaný CELÝ zdrojový kód OpenBSD, ale musíte mít zdrojový kód v¹ech  programù, které chcete patchovat. Napøíklad pokud chcete patchovat jádro, musíte mít
d1642 5
a1646 2
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a> je výhodný prostøedek, který mù¾ete pou¾ít pro získání té èásti zdrojového kódu,
kterou potøebujete, prostøednictvím anonymních cvs serverù umístìných po celém svìtì. Seznam tìchto serverù najdete zde <a href="http://www.openbsd.org/cs/anoncvs.html">http://www.openbsd.org/cs/anoncvs.html</a>.
d1650 3
a1652 1
Pro sta¾ení zdrojových kódù souèasné verze OpenBSD pomocí <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=cvs&sektion=1">cvs(1)</a>, byste pou¾ili následující pøíkaz:
d1666 12
a1677 3
Pro získání CVS cesty ke kódu, který potøebujete, se podívejte na øádek oznaèený jako <i>Index:</i> v souboru patche.
V na¹em  pøípadì byla cesta v CVS stromu  <i>src/libexec/talkd/</i>.  V¾dy zkontrolujte revizi OPENBSD_cislo_verze_BASE. Bez  &quot;BASE&quot; budete stahovat stabilní vìtev, která mù¾e obsahovat jiné zmìny, které mohou pak mít nesprávný úèinek. Pokud pracujete s patch vìtví v cvs stromu, pak patche by v ní mìly být
u¾ aplikovány, pøesto se v¾dy radìji ujistìte. Mù¾ete se podívat na <a href="../../cs/plus.html">http://www.openbsd.org/cs/plus.html</a> kde najdete seznam patchù aplikovaných do patch vìtve. Pokud patche nebyly dosud aplikovány, stáhnìte si zdrojový kód poslední verze, jak bylo uvedeno vý¹e.
d1681 4
a1684 2
Rovnì¾, pro ty z vás, kdo si koupili oficiální OpenBSD CD, mù¾ete zdrojový kód získat pøímo z CD. Podívejte se na CD jak extrahovat zdrojové kódy z CD. V tom
pøípadì nepotøebujete zdrojové kódy stahovat za pomoci anoncvs.
d1713 2
a1714 1
Poté co obdr¾íte zdrojový kód, stáhnìte si i patch a umístìte ho do <i>src/</i>
d1785 1
a1785 1
$Translation: faq10.html,v 1.8 2002/08/20 21:00:16 certik Exp $
@


1.6
log
@
sync with badlands translation CVS
work by {milos,vasek,vlada}@@openbsd.cz
@
text
@d294 1
a294 1
OpenBSD je dodáváno s SSL-pøipraveným httpd a RSA knihovnami. 
a303 3
Poèínaje OpenBSD 2.8, OpenBSD je dodáváno s SSL-pøipraveným httpd a RSA knihovnami. Pøesto, pou¾íváte-li OpenBSD 2.6 nebo 2.7 musíte dodat do systému SSL balíky, abyste mohli pou¾ít SSL. Více informací najdete v <b>man 8 ssl</b>.
</p>

d785 1
a785 1
[root@@avalanche kerberosIV] <strong>cat krb.conf</strong>
d816 1
a816 1
[root@@avalanche kerberosIV] <strong>kdb_init</strong>
d833 1
a833 1
[root@@avalanche kerberosIV] <strong>kstash</strong>
d851 1
a851 1
# <b>kdb_edit</b>
d909 1
a909 1
[root@@avalanche kerberosIV] <Strong>ext_srvtab avalanche</strong>
d918 2
a919 2
[root@@avalanche kerberosIV] <strong>mv avalanche-new-srvtab srvtab</strong>
[root@@avalanche kerberosIV] <strong>chmod 600 srvtab</strong>
d929 1
a929 1
[root@@avalanche kerberosIV] <strong>kdb_edit</strong>
d984 3
a986 3
[root@@avalanche /] <Strong>kill -HUP `cat /var/run/inetd.pid`</strong>
[root@@avalanche /] <Strong>/usr/libexec/kerberos >> /var/log/kerberos.log &</strong>
[root@@avalanche /] <strong>/usr/libexec/kadmind -n >> /var/log/kadmind.log &</strong>
d1011 1
a1011 1
[root@@gatekeeper kerberosIV] <strong>cat krb.conf</strong>
d1015 1
a1015 1
[root@@gatekeeper kerberosIV] <strong>cat krb.realms</strong>
d1026 1
a1026 1
xyz:jeremie% <Strong>kinit</strong>
d1040 1
a1040 1
xyz:jeremie$ <strong>klist</strong>
d1055 1
a1055 1
xyz:jeremie% <Strong>telnet avalanche</strong>
d1069 1
a1069 1
xyz:jeremie% <Strong>rlogin avalanche</strong>
d1084 1
a1084 1
xyz:jeremie% <strong>kdestroy</strong>
d1086 1
a1086 1
xyz:jeremie% <Strong>rlogin avalanche</strong>
d1122 2
a1123 2
oshibana# <strong>adduser</strong>
Use option ``-silent'' if you don't want see all warnings & questions.
d1178 1
a1178 1
oshibana# pwd
d1180 1
a1180 1
oshibana# ls -laR ftp
d1275 1
a1275 1
ftp> <strong>cd /</strong>
d1277 1
a1277 1
ftp> <strong>ls</strong>
d1296 1
a1296 1
ftp> <strong>quit</strong>
d1328 1
a1328 1
ftp> <strong>cd /</strong>
d1330 1
a1330 1
ftp> <strong>ls</strong>
d1343 1
a1343 1
ftp> <strong>quit</strong>
d1391 1
a1391 1
$ <b>cvs -danoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_3_0_BASE src/libexec/talkd/</b>
d1413 1
a1413 1
        patch -p0 < 026_talkd.patch
d1415 1
a1415 1
        make obj && make depend && make && make install
d1451 1
a1451 1
|       patch -p0 < 026_talkd.patch
d1453 1
a1453 1
|       make obj && make depend && make && make install
d1471 1
a1471 1
$ <b>make obj && make depend && make</b>
d1480 1
a1480 1
nroff -Tascii -mandoc /home/ericj/lsrc/src/libexec/talkd/talkd.8 > talkd.cat8
d1484 1
a1484 1
/usr/share/man/cat8/ntalkd.0 -> /usr/share/man/cat8/talkd.0
d1505 1
a1505 1
Originally [OpenBSD: faq10.html,v 1.66 ]
d1507 1
a1507 1
$Translation: faq10.html,v 1.7 2002/05/23 23:30:14 certik Exp $
@


1.5
log
@
sync with badlands translation CVS
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998-2001 by OpenBSD.">
d13 1
a13 1
<body bgcolor= "#ffffff" text= "#000000" link= "#23238E">
d22 5
a26 5
<li><a href="faq10.html#10.1">10.1 - Pøíkaz 'su root' hlásí, ¾e jsem ve ¹patné skupinì</a></li>
<li><A HREF="faq10.html#10.2">10.2 - Jak zálohovat filesystem?</A></li>
<li><A HREF="faq10.html#10.3">10.3 - Jak zpustit demona spolu se systemem? ( Pøehled rc(8)  )</A></li>
<li><a href="faq10.html#10.4">10.4 - Proè dostanu hlá¹ku relaying access denied  pøi posílání mailu pøes OpenBSD systém?</a></li>
<li><a href="faq10.html#10.5">10.5 - Nastavil jsem POP, ale dostávám chybová
d28 9
a36 8
<li><a href="faq10.html#10.6">10.6 - Nastavení Secure HTTP Serveru pou¾itím SSL(8)</a></li>
<li><a href="faq10.html#10.7">10.7 - Zmìnil jsem /etc/passwd  pomoci vi(1), ale vypadá to, ¾e se nic nezmìnilo. Proè?</a></li>
<li><a href="faq10.html#10.8">10.8 - Jak pøidat/smazat u¾ivatele?</a></li>
<li><a href="faq10.html#10.9">10.9 - Jak vytvoøit ftp-only úèet?</a></li>
<li><a href="faq10.html#10.10">10.10 - Nastavení diskových kvót</a></li>
<li><a href="faq10.html#10.11">10.11 - Nastavení Kerberos klient/server</a></li><li><a href="faq10.html#10.12">10.12 - Nastavení anonymního FTP Serveru</a></li>
<li><a href="faq10.html#10.13">10.13 - Omezení u¾ivatele na jeho domovský adresáø v fptd(8)</a>
<li><a href="faq10.html#10.14">10.14 - Aplikování patchù v OpenBSD.</a>
d44 1
a44 1
<a name= "10.1">
a45 1
</a>
d56 1
a56 1
Pokud pøidáváte nového u¾ivatele pomocí <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&apropos=0&sektion=8&format=html">adduser(8)</a>, mù¾ete
d71 1
a71 1
<a name= "10.2">
a72 1
</a>
d97 3
a99 1
<p><a name="10.3">
d101 1
a101 1
</a></p>
d150 2
a151 1
Tento øádek øíká, ¾e ftpd nebude startovat pøi bootu. ( pøinejmen¹ím ne z rc(8), pøeètìte si <a href="faq10.html#10.12">Anonymous FTP FAQ</a> o ftpd. ) Pro ka¾dý pøípad má ka¾dý øádek také komentáø spolu s volbami pro <b>NORMALNÍ</b> pou¾ití démona nebo slu¾by. To neznamená, ¾e musíte spou¹tìt démona s tìmito volbami. Pou¾ijte man(1) a zjistíte jaké volby pro tu kterou slu¾bu pou¾ít, aby splòovala dané po¾adavky. Napø. pùvodní øádka pro httpd(8).
d159 2
a160 1
httpd_flags=""</b>&quot; v podstatì zbyteèný. Ale jakmile budete chtít httpd s ssl podporou . ( Více viz. <a href="#10.6">SSL FAQ</a> or <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ssl&sektion=8&format=html">ssl(8)</a>)
d192 2
a193 1
<a name="10.4">
a194 1
</a>
d229 1
a229 1
# <Strong>kill -HUP `cat /var/run/sendmail.pid`</strong>
d241 1
d243 3
a245 1
<a name="10.5">
a246 1
</a>
d288 2
a289 1
<a name="10.6">
d294 10
d361 2
a362 1
<a name="10.7">
d369 1
a369 1
generuje /etc/passwd dynamicky programem  <A HREF="http://www.openbsd.org/cgi-bin/man.cgi?query=pwd_mkdb&sektion=8&apropos=0">pwd_mkdb(8)</a>. Hlavní soubor s hesly je v OpenBSD /etc/master.passwd . Dle pwd_mkdb(8),
d400 2
a401 1
<a name="10.8">
d406 1
a406 3
U¾ivatelé OpenBSD 2.6 mohou pou¾ít pøíkaz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>. V OpenBSD 2.7
slou¾í za stejným úèelem pøíkaz  <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=user&sektion=8&format=html">user(8)</a>.

d414 1
a414 1
Nejlep¹í zpùsob ja pøidat v OpenBSD u¾ivatele je skript <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>.
d419 1
a419 1
uvítací zprávy. V¹echny tyto vlastnosti mohou být zmìneny podle va¹ich po¾adavkù. Dal¹í informace o pøidávání u¾ivatelù se nacházejí v manuálové stránce <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser_proc&sektion=8&format=html">adduser_proc(8)</a>, kterou si nezapomeòte pøeèíst. Následuje jednoduchá ukázka pou¾ití programu adduser(8). Budeme pøidávat u¾ivatele <b>testuser</b>. Jeho
d484 2
a485 1
Od verze  OpenBSD 2.7 byla do systému pøidána øada pøíkazù pro práci s u¾ivateli a skupinami. Jedná se o programy ménì interaktivní ne¾ pøíkaz <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=adduser&sektion=8&format=html">adduser(8)</a>, co¾ umo¾òuje jejich pou¾ití ve skriptech.
d607 2
a608 1
<a name="10.9">
d620 2
a621 1
<a name="10.10">
d729 2
a730 1
<a name="10.11">
d759 1
a759 1
Jednoduchá cesta jak synchronizovat systémové hodiny je pou¾ít  xntpd, které je k dispozici ve sbírce portù v <strong>/usr/ports/sysutils/xntpd/</strong>.
d766 1
a766 1
<li><a href="http://www.freebsd.org/handbook/kerberos.html">The FreeBSD handbook</a> </li>
d813 2
a814 1
Nyní spustíme <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=kbd_init&sektion=8&format=html">kdb_init(8)</a> , abychom vytvoøili a incializovali databázi Kerberos.
d879 1
a879 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2001-12-31</strong>
d897 1
a897 1
Expiration date (enter yyyy-mm-dd) [ 1999-12-31 ] ? <strong>2001-12-31</strong>
d997 2
a998 1
právo 'su' specifickému principal, viz.  <a href="http://www.freebsd.org/handbook/kerberos.html#AEN4957">the FreeBSD Handbook</a>.
d1067 1
a1067 1
OpenBSD 2.5 (AVALANCHE) #5: Tue Apr  6 01:18:16 EDT 1999
d1075 1
a1075 1
OpenBSD 2.5 (AVALANCHE) #5: Tue Apr  6 01:18:16 EDT 1999
d1103 2
a1104 1
<a name="10.12">
d1142 1
a1142 1
Use an empty password? (y/n) [y]: <strong>y</strong>
d1249 1
d1265 1
a1265 1
230- OpenBSD 2.6 (GENERIC) #690: Fri Oct 29 16:32:17 MDT 1999
d1310 1
a1310 1
#       $OpenBSD: faq10.html,v 1.51 2001/01/27 22:19:47 ericj Exp $
d1351 1
d1394 1
a1394 1
$ <b>cvs -danoncvs@@anoncvs5.usa.openbsd.org:/cvs co -rOPENBSD_2_8_BASE src/libexec/talkd/</b>
d1508 1
a1508 1
Originally [OpenBSD: faq10.html,v 1.56 ]
d1510 1
a1510 1
$Translation: faq10.html,v 1.6 2002/02/11 10:04:29 certik Exp $
a1516 3



@


1.4
log
@
sync with badlands translation CVS.
@
text
@d226 1
a226 1
# <Strong>kill -HUP `head -1 /var/run/sendmail.pid`</strong>
d739 1
a739 1
Jednoduchá cesta jak synchronizovat systémové hodiny je pou¾ít ntpd, které je k dispozici ve sbírce portù v <strong>/usr/ports/net/ntp/</strong>.
d1286 1
a1286 1
#       $OpenBSD: faq10.html,v 1.58 2001/11/02 10:54:56 mpech Exp $
d1483 1
a1483 1
Originally [OpenBSD: faq10.html,v 1.58 ]
d1485 1
a1485 1
$Translation: faq10.html,v 1.5 2001/11/24 19:49:27 certik Exp $
d1492 3
@


1.3
log
@
sync with badlands translation CVS.
@
text
@d226 1
a226 1
# <Strong>kill -HUP `cat /var/run/sendmail.pid`</strong>
d739 1
a739 1
Jednoduchá cesta jak synchronizovat systémové hodiny je pou¾ít  xntpd, které je k dispozici ve sbírce portù v <strong>/usr/ports/sysutils/xntpd/</strong>.
d1286 1
a1286 1
#       $OpenBSD: faq10.html,v 1.51 2001/01/27 22:19:47 ericj Exp $
d1483 1
a1483 1
Originally [OpenBSD: faq10.html,v 1.56 ]
d1485 1
a1485 1
$Translation: faq10.html,v 1.4 2001/08/29 12:57:58 certik Exp $
a1491 3



@


1.2
log
@
more updates by Milos Urbanek
@
text
@d10 1
a10 1
<meta name= "copyright"     content= "This document copyright 1998,1999 by OpenBSD.">
d1483 1
a1483 1
Originally [OpenBSD: faq10.html,v 1.54 ]
d1485 1
a1485 1
$Translation: faq10.html,v 1.3 2001/06/21 15:29:56 certik Exp $
@


1.1
log
@
Initial commit of czech translation.
Work by Milos Urbanek.
@
text
@d1483 1
a1483 1
Originally [OpenBSD: faq10.html,v 1.53 ]
d1485 1
a1485 1
$Translation: faq10.html,v 1.2 2001/05/10 20:19:27 certik Exp $
@

