head	1.5;
access;
symbols
	OpenBSD:1.1.1.1 gilles:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.04.20.18.03.43;	author tj;	state dead;
branches;
next	1.4;
commitid	9kFrgi0oGAcQGcEB;

1.4
date	2015.06.24.07.23.27;	author gilles;	state Exp;
branches;
next	1.3;
commitid	7MFeR5qji3YyU6J6;

1.3
date	2013.12.06.10.57.39;	author gilles;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.25.09.15.18;	author gilles;	state Exp;
branches;
next	1.1;

1.1
date	2012.10.08.18.31.29;	author gilles;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.10.08.18.31.29;	author gilles;	state Exp;
branches;
next	;


desc
@@


1.5
log
@move opensmtpd site to css, link to online manpages instead of duplicates,
remove a couple stray files and fix some wording oddities.

ok jung gilles
@
text
@<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<style>
table.head, table.foot { width: 100%; }
td.head-rtitle, td.foot-os { text-align: right; }
td.head-vol { text-align: center; }
table.foot td { width: 50%; }
table.head td { width: 33%; }
div.spacer { margin: 1em 0; }
</style>
<title>
SMTPD(8)</title>
</head>
<body>
<div class="mandoc">
<div class="section">
<h1 id="x4e414d45">NAME</h1> <b class="name">smtpd</b> &#8212; <span class="desc">Simple Mail Transfer Protocol daemon</span></div>
<div class="section">
<h1 id="x53594e4f50534953">SYNOPSIS</h1><table class="synopsis">
<col style="width: 5.00ex;"/>
<col/>
<tbody>
<tr>
<td>
smtpd</td>
<td>
[<span class="opt"><b class="flag">-dnv</b></span>] [<span class="opt"><b class="flag">-D</b> <i class="arg">macro</i>=<i class="arg">value</i></span>] [<span class="opt"><b class="flag">-f</b> <i class="arg">file</i></span>] [<span class="opt"><b class="flag">-P</b> <i class="arg">system</i></span>]</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">smtpd</b> is a Simple Mail Transfer Protocol (SMTP) daemon which can be used as a machine's primary mail system. <b class="name">smtpd</b> can listen on a network interface and handle SMTP transactions; it can also be fed messages through the standard <a class="link-man">sendmail(8)</a> interface. It can relay messages through remote mail transfer agents or store them locally using either the mbox or maildir format. This implementation supports SMTP as defined by RFC 5321 as well as several extensions. A running <b class="name">smtpd</b> can be controlled through <a class="link-man">smtpctl(8)</a>.<div class="spacer">
</div>
The options are as follows:<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-D</b> <i class="arg">macro</i>=<i class="arg">value</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Define <i class="arg">macro</i> to be set to <i class="arg">value</i> on the command line. Overrides the definition of <i class="arg">macro</i> in the configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-d</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Do not daemonize. If this option is specified, <b class="name">smtpd</b> will run in the foreground and log to <span class="emph">stderr</span>.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-f</b> <i class="arg">file</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Specify an alternative configuration file.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-n</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Configtest mode. Only check the configuration file for validity.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-P</b> <i class="arg">system</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Pause a specific subsystem at startup. Normal operation can be resumed using <a class="link-man">smtpctl(8)</a>. This option can be used multiple times. The accepted values are:<div class="spacer">
</div>
<dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
mda</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Do not schedule local deliveries.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
mta</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Do not schedule remote transfers.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
smtp</dt>
<dd class="list-tag" style="margin-left: 7.00ex;">
Do not listen on SMTP sockets.</dd>
</dl>
</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-v</b></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Produce more verbose output.</dd>
<dt class="list-tag" style="margin-top: 1.00em;">
<b class="flag">-T</b> <i class="arg">trace</i></dt>
<dd class="list-tag" style="margin-left: 6.00ex;">
Enables real-time tracing at startup. Normal operation can be resumed using <a class="link-man">smtpctl(8)</a>. This option can be used multiple times. The accepted values are:<div class="spacer">
</div>
<ul style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-bul">
<li class="list-bul" style="margin-top: 0.00em;">
imsg</li>
<li class="list-bul" style="margin-top: 0.00em;">
io</li>
<li class="list-bul" style="margin-top: 0.00em;">
smtp (incoming sessions)</li>
<li class="list-bul" style="margin-top: 0.00em;">
filters</li>
<li class="list-bul" style="margin-top: 0.00em;">
transfer (outgoing sessions)</li>
<li class="list-bul" style="margin-top: 0.00em;">
bounce</li>
<li class="list-bul" style="margin-top: 0.00em;">
scheduler</li>
<li class="list-bul" style="margin-top: 0.00em;">
expand (aliases/virtual/forward expansion)</li>
<li class="list-bul" style="margin-top: 0.00em;">
lookup (user/credentials lookups)</li>
<li class="list-bul" style="margin-top: 0.00em;">
stat</li>
<li class="list-bul" style="margin-top: 0.00em;">
rules (matched by incoming sessions)</li>
<li class="list-bul" style="margin-top: 0.00em;">
mproc</li>
<li class="list-bul" style="margin-top: 0.00em;">
all</li>
</ul>
</dd>
</dl>
</div>
<div class="section">
<h1 id="x46494c4553">FILES</h1><dl style="margin-top: 0.00em;margin-bottom: 0.00em;" class="list list-tag">
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/mail/mailname</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
Alternate server name to use.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/etc/mail/smtpd.conf</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
Default <b class="name">smtpd</b> configuration file.</dd>
<dt class="list-tag" style="margin-top: 0.00em;">
<i class="file">/var/run/smtpd.sock</i></dt>
<dd class="list-tag" style="margin-left: 22.00ex;">
<span class="unix">UNIX</span>-domain socket used for communication with <a class="link-man">smtpctl(8)</a>.</dd>
</dl>
</div>
<div class="section">
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man">smtpd.conf(5)</a>, <a class="link-man">mailwrapper(8)</a>, <a class="link-man">smtpctl(8)</a></div>
<div class="section">
<h1 id="x5354414e4441524453">STANDARDS</h1> <span class="ref"><span class="ref-auth">J. Klensin</span>, <span class="ref-title">Simple Mail Transfer Protocol</span>, <span class="ref-rep">RFC 5321</span>, <span class="ref-date">October 2008</span>.</span></div>
<div class="section">
<h1 id="x484953544f5259">HISTORY</h1> The <b class="name">smtpd</b> program first appeared in <span class="unix">OpenBSD&#160;4.6</span>.</div>
</div>
</body>
</html>

@


1.4
log
@update
@
text
@@


1.3
log
@update man pages
@
text
@d1 1
a1 1
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
d4 9
a12 2
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="resource-type" content="document">
a17 15
<table summary="Document Header" class="head" width="100%">
<col width="30%">
<col width="30%">
<col width="30%">
<tbody>
<tr>
<td class="head-ltitle">
SMTPD(8)</td>
<td class="head-vol" align="center">
OpenBSD System Manager's Manual</td>
<td class="head-rtitle" align="right">
SMTPD(8)</td>
</tr>
</tbody>
</table>
d22 2
a23 2
<col style="width: 5.00ex;">
<col>
d29 1
a29 1
&#91;<span class="opt"><b class="flag">&#45;dnv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;D</b> <i class="arg">macro</i>=<i class="arg">value</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">file</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;P</b> <i class="arg">system</i></span>&#93;</td>
d35 2
a36 1
<h1 id="x4445534352495054494f4e">DESCRIPTION</h1> <b class="name">smtpd</b> is a Simple Mail Transfer Protocol (SMTP) daemon which can be used as a machine's primary mail system. <b class="name">smtpd</b> can listen on a network interface and handle SMTP transactions; it can also be fed messages through the standard <a class="link-man">sendmail(8)</a> interface. It can relay messages through remote mail transfer agents or store them locally using either the mbox or maildir format. This implementation supports SMTP as defined by RFC 5321 as well as several extensions. A running <b class="name">smtpd</b> can be controlled through <a class="link-man">smtpctl(8)</a>.<p>
d39 1
a39 1
<b class="flag">&#45;D</b> <i class="arg">macro</i>=<i class="arg">value</i></dt>
d43 1
a43 1
<b class="flag">&#45;d</b></dt>
d47 1
a47 1
<b class="flag">&#45;f</b> <i class="arg">file</i></dt>
d51 1
a51 1
<b class="flag">&#45;n</b></dt>
d55 1
a55 1
<b class="flag">&#45;P</b> <i class="arg">system</i></dt>
d57 2
a58 1
Pause a specific subsystem at startup. Normal operation can be resumed using <a class="link-man">smtpctl(8)</a>. This option can be used multiple times. The accepted values are:<p>
d75 1
a75 1
<b class="flag">&#45;v</b></dt>
d78 34
a112 20
<p>
<b class="name">smtpd</b> is not enabled by default. In order to use it as the system mailer, ensure the mail queue is empty, then stop <a class="link-man">sendmail(8)</a>:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# /etc/rc.d/sendmail stop</pre>
<p>
Modify the current <a class="link-man">mailwrapper(8)</a> settings by editing <i class="file">/etc/mailer.conf</i>:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
sendmail	/usr/sbin/smtpctl 
send-mail	/usr/sbin/smtpctl 
mailq		/usr/sbin/smtpctl 
makemap		/usr/libexec/smtpd/makemap 
newaliases	/usr/libexec/smtpd/makemap</pre>
<p>
Disable the sendmail clientmqueue entry in <a class="link-man">crontab(1)</a>.<p>
Rebuild the aliases database, and enable the daemon:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# newaliases 
# echo "sendmail_flags=NO" &gt;&gt; /etc/rc.conf.local 
# echo "smtpd_flags=" &gt;&gt; /etc/rc.conf.local 
# /etc/rc.d/smtpd start</pre>
a135 14
<div class="section">
<h1 id="x43415645415453">CAVEATS</h1> Because <a class="link-man">sendmail(8)</a> is still the de facto <span class="unix">OpenBSD</span> mailer, <b class="name">smtpd</b> versions of <a class="link-man">aliases(5)</a>, <a class="link-man">forward(5)</a>, <a class="link-man">makemap(8)</a>, and <a class="link-man">newaliases(8)</a> are not currently installed.</div>
<table summary="Document Footer" class="foot" width="100%">
<col width="50%">
<col width="50%">
<tbody>
<tr>
<td class="foot-date">
August 5, 2013</td>
<td class="foot-os" align="right">
OpenBSD 5.4</td>
</tr>
</tbody>
</table>
@


1.2
log
@update documentation
@
text
@d86 5
a90 1
If you are running a BSD Operating System, you should use and modify <a class="link-man">mailwrapper(8)</a> settings by editing <i class="file">/etc/mailer.conf</i>:<p>
d98 1
d102 2
d109 5
a113 1
/etc/mail/smtpd.conf</dt>
d117 1
a117 1
/var/run/smtpd.sock</dt>
d136 1
a136 1
January 31, 2013</td>
d138 1
a138 1
OpenBSD 5.2</td>
@


1.1
log
@Initial revision
@
text
@d37 1
a37 1
&#91;<span class="opt"><b class="flag">&#45;dnv</b></span>&#93; &#91;<span class="opt"><b class="flag">&#45;D</b> <i class="arg">macro</i>=<i class="arg">value</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;f</b> <i class="arg">file</i></span>&#93; &#91;<span class="opt"><b class="flag">&#45;T</b> <i class="arg">trace</i></span>&#93;</td>
d62 1
a62 1
<b class="flag">&#45;T</b> <i class="arg">trace</i></dt>
d64 16
a79 1
Show additional debug traces when one of the <b class="flag">&#45;v</b> or <b class="flag">&#45;d</b> flags are specified. The only accepted value is <i class="arg">imsg</i>, which displays the messages exchanged between the various <b class="name">smtpd</b> processes.</dd>
d86 1
a86 5
<b class="name">smtpd</b> is not enabled by default. In order to use it as the system mailer, ensure the mail queue is empty, then stop <a class="link-man">sendmail(8)</a>:<p>
<pre style="margin-left: 5.00ex;" class="lit display">
# pkill sendmail</pre>
<p>
Modify the current <a class="link-man">mailwrapper(8)</a> settings by editing <i class="file">/etc/mailer.conf</i>:<p>
d97 1
a97 3
# echo "sendmail_flags=NO" &gt;&gt; /etc/rc.conf.local 
# echo "smtpd_flags=" &gt;&gt; /etc/rc.conf.local 
# smtpd</pre>
d112 3
a114 2
<h1 id="x53454520414c534f">SEE ALSO</h1> <a class="link-man">smtpd.conf(5)</a>, <a class="link-man">mailwrapper(8)</a>, <a class="link-man">smtpctl(8)</a><p>
<span class="ref"><span class="ref-title">Simple Mail Transfer Protocol</span>, <span class="ref-rep">RFC 5321</span>, <span class="ref-date">October 2008</span>.</span></div>
d117 2
d125 1
a125 1
October 22, 2011</td>
d127 1
a127 1
OpenBSD 5.1</td>
@


1.1.1.1
log
@opensmtpd.org website
@
text
@@
