head	1.70;
access;
symbols;
locks; strict;
comment	@# @;


1.70
date	2011.01.17.16.28.24;	author jasper;	state dead;
branches;
next	1.69;

1.69
date	2008.11.18.22.31.12;	author sthen;	state Exp;
branches;
next	1.68;

1.68
date	2007.09.09.19.49.20;	author aanriot;	state Exp;
branches;
next	1.67;

1.67
date	2007.08.16.16.23.22;	author steven;	state Exp;
branches;
next	1.66;

1.66
date	2007.06.04.19.23.30;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2007.05.15.20.17.18;	author simon;	state Exp;
branches;
next	1.64;

1.64
date	2007.03.15.10.47.33;	author jsg;	state Exp;
branches;
next	1.63;

1.63
date	2006.12.31.03.11.18;	author joel;	state Exp;
branches;
next	1.62;

1.62
date	2006.11.04.10.53.37;	author espie;	state Exp;
branches;
next	1.61;

1.61
date	2005.06.10.10.37.35;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2004.11.23.08.05.24;	author miod;	state Exp;
branches;
next	1.59;

1.59
date	2004.03.25.02.41.50;	author jcs;	state Exp;
branches;
next	1.58;

1.58
date	2004.02.13.07.49.52;	author david;	state Exp;
branches;
next	1.57;

1.57
date	2004.02.12.09.12.23;	author xsa;	state Exp;
branches;
next	1.56;

1.56
date	2004.02.07.11.29.56;	author xsa;	state Exp;
branches;
next	1.55;

1.55
date	2004.01.02.02.51.54;	author jose;	state Exp;
branches;
next	1.54;

1.54
date	2003.12.05.10.22.47;	author jmc;	state Exp;
branches;
next	1.53;

1.53
date	2003.11.18.03.51.14;	author jose;	state Exp;
branches;
next	1.52;

1.52
date	2003.10.31.22.31.19;	author margarida;	state Exp;
branches;
next	1.51;

1.51
date	2003.06.22.13.24.32;	author sturm;	state Exp;
branches;
next	1.50;

1.50
date	2003.06.02.12.39.26;	author jolan;	state Exp;
branches;
next	1.49;

1.49
date	2003.05.11.04.59.48;	author cannings;	state Exp;
branches;
next	1.48;

1.48
date	2003.04.11.02.46.22;	author david;	state Exp;
branches;
next	1.47;

1.47
date	2003.02.26.02.14.49;	author david;	state Exp;
branches;
next	1.46;

1.46
date	2003.02.19.16.46.34;	author pvalchev;	state Exp;
branches;
next	1.45;

1.45
date	2002.11.19.22.02.19;	author jsyn;	state Exp;
branches;
next	1.44;

1.44
date	2002.07.06.09.32.07;	author pvalchev;	state Exp;
branches;
next	1.43;

1.43
date	2002.06.18.01.44.05;	author jsyn;	state Exp;
branches;
next	1.42;

1.42
date	2002.05.27.07.19.16;	author pvalchev;	state Exp;
branches;
next	1.41;

1.41
date	2002.01.29.22.08.36;	author horacio;	state Exp;
branches;
next	1.40;

1.40
date	2001.12.19.21.33.48;	author naddy;	state Exp;
branches;
next	1.39;

1.39
date	2001.11.12.21.01.28;	author jufi;	state Exp;
branches;
next	1.38;

1.38
date	2001.09.16.06.41.27;	author pvalchev;	state Exp;
branches;
next	1.37;

1.37
date	2001.09.16.06.35.30;	author pvalchev;	state Exp;
branches;
next	1.36;

1.36
date	2001.08.25.11.25.42;	author jufi;	state Exp;
branches;
next	1.35;

1.35
date	2001.08.11.02.44.29;	author brad;	state Exp;
branches;
next	1.34;

1.34
date	2001.07.07.00.15.44;	author jsyn;	state Exp;
branches;
next	1.33;

1.33
date	2001.07.05.18.52.09;	author pvalchev;	state Exp;
branches;
next	1.32;

1.32
date	2001.04.02.20.44.58;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2001.03.28.11.22.48;	author reinhard;	state Exp;
branches;
next	1.30;

1.30
date	2001.02.18.13.30.38;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2001.02.08.20.58.37;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2001.02.08.20.53.21;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2001.01.27.16.00.51;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2000.12.11.13.08.52;	author reinhard;	state Exp;
branches;
next	1.25;

1.25
date	2000.05.31.17.37.19;	author reinhard;	state Exp;
branches;
next	1.24;

1.24
date	2000.05.31.10.55.26;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2000.03.24.14.08.07;	author wvdputte;	state Exp;
branches;
next	1.22;

1.22
date	2000.03.11.18.49.19;	author rohee;	state Exp;
branches;
next	1.21;

1.21
date	2000.03.11.07.43.53;	author form;	state Exp;
branches;
next	1.20;

1.20
date	2000.03.10.17.13.13;	author turan;	state Exp;
branches;
next	1.19;

1.19
date	2000.02.14.01.35.31;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	99.11.02.15.45.33;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	99.08.15.02.23.45;	author marc;	state Exp;
branches;
next	1.16;

1.16
date	99.06.01.22.26.38;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	99.05.18.16.50.25;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	99.05.02.15.33.20;	author rohee;	state Exp;
branches;
next	1.13;

1.13
date	99.04.29.22.35.29;	author wvdputte;	state Exp;
branches;
next	1.12;

1.12
date	99.03.08.00.34.39;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	99.03.01.00.26.08;	author marc;	state Exp;
branches;
next	1.10;

1.10
date	99.02.18.02.25.39;	author marc;	state Exp;
branches;
next	1.9;

1.9
date	98.12.21.23.30.59;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	98.12.03.06.09.17;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	98.11.19.04.14.56;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	98.09.23.18.33.56;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	98.09.13.23.05.26;	author ian;	state Exp;
branches;
next	1.4;

1.4
date	98.09.09.02.45.25;	author ian;	state Exp;
branches;
next	1.3;

1.3
date	98.08.16.00.16.31;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.08.01.00.27.34;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.07.30.23.04.47;	author marc;	state Exp;
branches;
next	;


desc
@@


1.70
log
@move porting related pages to a common directory, instead of having it everywhere
and nowhere.
@
text
@<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="resource-type" content="document">
<meta name="description" CONTENT="How to make/update an OpenBSD port.">
<meta name="keywords" content="openbsd,ports">
<meta name="distribution" content="global">
<meta name="copyright" content="This document copyright 1998-2007 by OpenBSD.">

<title>OpenBSD Porting Checklist</title>
</head>
 
<body text="#000000" bgcolor="#FFFFFF" link="#23238E">
<a href="index.html"><img alt="[OpenBSD]" height="30" width="141" src="images/smalltitle.gif" border="0"></a>

<h2><font color="#e00000">OpenBSD Porting Checklist</font></h2>

This document describes how to make or upgrade a port.  It is a useful
reminder of things to do.  This is neither totally accurate nor perfect.
Direct comments and questions to <a href="mailto:ports@@openbsd.org">
ports@@openbsd.org</a>.

<hr>
<ol>

<li> 
If you want to be a maintainer, subscribe to 
<a href="mailto:ports@@openbsd.org">ports@@openbsd.org.</a> 
<ul><li> 
This is where all ports discussions take place.  
<li>
Reading this list is important since many announcements go over this list.
<li>
You will find a lot of porting-savvy people there.  They can often give you
good advice or test ports for you.
</ul>

<br><li>
Being a maintainer means <strong>more</strong> than just submitting ports.
It also means trying to keep them up-to-date, and to answer questions about
them.

<br><br><li>
Check out a copy of the ports tree from cvs. 
You can find instructions on how to do this at the
<a href="anoncvs.html">anonymous cvs page</a>.

<br><br><li> 
Pick a place to put your port and create the basic 
infrastructure there.  Use the template Makefile at 
<code>/usr/ports/infrastructure/templates/Makefile.template</code>.  
NEED_VERSION is obsolete and should not be used in new ports.
As you are a port developer, you are supposed to update
your ports tree, including bsd.port.mk.
<ul><li>
Create the directory <code>pkg</code>. 
<li>
Create the empty files <code>pkg/DESCR, pkg/PLIST</code>.
</ul>

<br><li> 
Add the fetch portions of the Makefile.  
<ul><li>
Fill in EXTRACT_SUFX if it's anything besides .tar.gz.  Other examples are
.tar.Z, or .tgz.
<li>
Fill in DISTNAME which is the name of the file minus the extract suffix.
E.g., if you have foo-1.0.tar.gz, DISTNAME is foo-1.0.
<li>
Fill in MASTER_SITES which is a URL to the directory where the distfile
is kept.  E.g., ftp://ftp.openbsd.org/pub/OpenBSD/distfiles/. 
<strong>Don't forget the trailing slash.</strong> 
Try to have at least three distinct sites as well. 
Place the most easily accessible first as they are traversed in order.
<li>
Keep in mind that fetch references the file as
${MASTER_SITES}${DISTNAME}${EXTRACT_SUFX}.  All three are used.  Don't
set DISTNAME to point to the file directly.
<li>
You can check to see if you have filled these values in correctly by typing
<b>make fetch-all</b>. 
</ul>
<p>
For more complex ports, you have more options and tools available to you:
<ul><li>
You also have the variable PATCHFILES available.  This is a list of vendor 
(not OpenBSD) patches to the port.  Common uses are things like security
or reliability fixes.
<li>
If your ports are available over large public mirrors such as GNU, SunSite, or 
CPAN, we have already provided a list of sites for your use in 
/usr/ports/infrastructure/templates/network.conf.template.
Set MASTER_SITES to ${MASTER_SITE_GNU}, or ${MASTER_SITE_SUNSITE}, etc.
To simplify this process, use the construct ${MASTER_SITE_FOO:=subdir/} to
append the distribution subdirectory.
<li>
Ports normally correspond to given versions of software. Once they are retrieved, files are checksummed and compared to the recorded
checksum(s) in distinfo. So, to avoid confusion, DISTFILES and PATCHFILES should have clearly visible version numbers:
don't retrieve foo-latest.tar.gz if it is a link to foo-1.0.5.tar.gz. If necessary, gently ask the original program author
to make such distinctions clear. 
<li>
If a given port needs more than about 5 DISTFILES + PATCHFILES to work, use DIST_SUBDIR to avoid cluttering
/usr/ports/distfiles too much. 
<li>
DIST_SUBDIR must not include version numbers. When the port is updated to a later version, some distfiles may not change, but will be
refetched if DIST_SUBDIR is changed. Even if all distfiles change, it is easier for the user to track cruft. 
<li>
All DISTFILES and PATCHFILES don't necessarily come from the same set of MASTER_SITES. Supplementary sites can be
defined using the variables MASTER_SITES0 to MASTER_SITES9. Just write DISTFILES=foo-1.0.5.tar.gz:5 to
retrieve foo-1.0.5.tar.gz from MASTER_SITES5. 
<li>
Some ports don't always need to retrieve all files in all circumstances. For instance, some ports may have some compilation options, and
associated files which are only required in such a case. Or they may need some files for some architectures only. In such a case, those
supplementary optional files must be mentioned in the SUPDISTFILES variable. Targets such as makesum or
mirror-distfiles will fetch those supplementary files that the casual user doesn't need. 
</ul>

<br><li>
Create a checksum in <i>distinfo</i> by typing <b>make makesum</b>.
Then verify the checksum is correct by typing <b>make checksum</b>.
<ul><li>
In some rare cases, files checksums can't be verified reliably. By all means, porters should try to find sites that are reliable. Communicating
with the software author and the archive site maintainer at this stage is highly desirable. In the worst case, non-checksummable files can be
mentioned in the IGNOREFILES variable. 
<li>
All files in DISTFILES are usually processed during make extract. EXTRACT_ONLY may be used to limit extraction to a
subset of files (possibly empty). The customary use of this variable is to customize extraction: for instance, if some DISTFILES need
some special treatment, they will be removed from EXTRACT_ONLY and handled manually at post-extract stage. 
For historic reasons, make extract does set up the working directory first along with extracting files. Thus, providing a
pre-extract or a do-extract target is highly unusual (and fairly suspicious behavior, indicative of a high degree of obfuscation
in the port). 
<li>
Patches that need specific treatment should be mentioned in DISTFILES, and removed from EXTRACT_ONLY, for historic reasons. 
</ul>

<br><li>
Extract the port with <b>make extract</b>.  Pay attention to where the base 
of the sources are.  Usually, it's <i>w-${PKGNAME}${FLAVOR_EXT}/${DISTNAME}</i>. You may need to
modify the Makefile's WRKDIST variable if it is different.

<br><br><li>
Read the installation documentation and note what you have to do to build
the port and any special options that might be needed. 

<br><br><li>
Now is also a good time to figure out what kind of licensing restrictions
apply to your port.  Many are freely redistributable but then again, quite
a few are not.  We need four questions answered to distribute ports 
properly.  These are the PERMIT_* values in the Makefile.
<ul><li>
PERMIT_PACKAGE_CDROM tells us if we can put the package on the cdrom.
<li>
PERMIT_PACKAGE_FTP tells us if we can put the package on the ftp sites.
<li>
PERMIT_DISTFILES_CDROM tells us if we can mirror the distfiles on the cdrom.
<li>
PERMIT_DISTFILES_FTP tells us if we can mirror the distfiles on the ftp sites.
</ul>
<p>
Set these values to Yes if it is permitted or to a comment string stating why
it is not.  Pay attention to any special conditions you may need to fulfill
later on.  E.g., some ports require to install a copy of the license.  We 
recommend you place the license in 
<code>/usr/local/share/doc/&lt;name&gt;/</code>.
<p>
In addition to the PERMIT_* values, put a license marker like 
<code># License</code> above them as a comment, this way we know why
the PERMIT_* values are set the way they are. 

<br><br><li>
Add configuration options to Makefile and/or create the configuration script.
<ul><li>
You can add a port configuration script named `configure' to a directory 
named <code>scripts/</code>. This will be run before any configuration 
specified by CONFIGURE_STYLE is run. 
<li>
If GNU configure is used you may want to run ./configure --help
to see what options are available.  
<li>
Anything that you may want to override can be changed by adding the 
--option flags to the CONFIGURE_ARGS parameter in the Makefile.  
<li>
Use CONFIGURE_ARGS+= to append to the variable.  CONFIGURE_ARGS= will 
overwrite it.
</ul>

<br><li>
Try building the port with <b>make build</b>.  
<ul><li>
If you're lucky, the port will go all the way through without errors.  
<li>
If it exits with an error, you will need to generate patches for your port.  
Figure out what needs to be changed and make a patch for it.  
<li>
Patches must be relative to ${WRKDIST}.  
<li> The easiest way to reset the port and test your patches is 
<b>make clean patch</b>. This will delete the work directory, re-extract, 
and patch your port.
</ul>

<br><li>
Begin a cycle of <b>make build</b>, generate a patch (or use <b>make 
update-patches</b>), and 
<b>make clean patch</b>. 
<ul><li>
Patches go in the directory <i>patches/</i> and should be named patch-* with
* being something meaningful.  We recommend you name your patches 
patch-FILENAME where FILENAME is the name of the file it is patching. 
(<tt>make update-patches</tt> does this automatically for you.)
<li>
Applying PATCHFILES is the first half of the make patch stage. It can be 
invoked separately as make distpatch, which is a convenient target for 
porters. Ignore this if you haven't set it.
<li>
Only patch one source file per patchfile, please.
<li>
Use <b>make update-patches</b> to generate patches.
<li>
All patches MUST be relative to ${WRKDIST}.
<li>
Check that patches <strong>DON'T</strong> contain tags that cvs
will replace.  If they do, your patches won't apply after you check 
them in.  You can check in your changes with -kk to avoid this.
<li>
Write a small explanation at the beginning of the patchfile about its purpose
(not mandatory).
<li>
<b>Please</b> feed your patches back to the author of that piece of software.
</ul>

<br><li>
Try setting <code>SEPARATE_BUILD</code>.
<ul><li>
If the port can build with object files outside its source tree,
this is cleaner (many programs using <code>CONFIGURE_STYLE=gnu</code> can),
and may help people who mount their ports tree on several arches.
<li>
This can also spare you some effort, as you will possibly be able to
restart the cycle at <code>configure</code> most of the time.
</ul>

<br><li>
Peruse the output (if any) and tweak any options in the Makefile.
To repeat issue the command `<b>make clean configure</b>'.
<p>
Note: make sure host-dependent files go in <i>/etc</i> or
<i>/etc/&lt;name&gt;</i>, but <strong>NEVER REPLACE OR MODIFY</strong>
existing files in <i>/etc</i>.  Best to have install place them
in <i>/usr/local/share/&lt;name&gt;</i> and then copy to
<i>/etc</i> or <i>/etc/&lt;name&gt;</i> only if the files do not exist.
If the files exist, display a message that says such-and-such files need
to be modified.  This also guarantees that the files will be included in
the package since everything under <i>/usr/local</i> is included in the PLIST.
After a package has been installed the contents of <code>pkg/MESSAGE</code>
will be displayed if it exists.

<p>
The OpenBSD file locations are:
<pre>
   user executables:			/usr/local/bin
   system admin executables:		/usr/local/sbin
   program executables:			/usr/local/libexec
   libraries:				/usr/local/lib
   architecture dependent data:		/usr/local/lib/&lt;name&gt;
   installed include files:		/usr/local/include or
					/usr/local/include/&lt;name&gt;
   single-machine data:			/etc or /etc/&lt;name&gt;
   local state:				/var/run
   games score files:			/var/games
   GNU info files:			/usr/local/info
   man pages:				/usr/local/man/...
   read-only architecture-independent:	/usr/local/share/&lt;name&gt;
   misc documentation:			/usr/local/share/doc/&lt;name&gt;
   examples files:			/usr/local/share/examples/&lt;name&gt;
</pre>

<li>
Begin a cycle of makes until the port is ready.  Patch (see above)
clean, and make until the port is generated.  Get rid of all warnings
if possible, especially security related warnings.

<br><br><li>
Control SEPARATE_BUILD semantics.
You have to do this only if the port builds with
SEPARATE_BUILD defined.
Ideally, the port should not modify any file in
${WRKSRC} after <b>make patch</b>.
You can check this by making sure you don't have any write access
to ${WRKSRC}. Then you can set
<code>SEPARATE_BUILD=concurrent</code> -- someone can use the same
source tree to build on distinct arches simultaneously.
Otherwise, set <code>SEPARATE_BUILD=simple</code> -- building on
distinct arches simultaneously may be met with problems, as some 
source files may be regenerated at awkward moments.

<br><br><li>
Add <i>COMMENT</i> in Makefile.
COMMENT is a <strong>SHORT</strong> one-line description of the port
(max. 60 characters). Do <strong>NOT</strong> include the package 
name (or version number of the software) in the comment. 
Do <strong>NOT</strong> start with an uppercase letter
unless semantically significant, and
do <strong>NOT</strong> end with a period.
<strong>DON'T EVER START WITH AN INDEFINITE ARTICLE SUCH AS `a' or `an';
remove the article altogether.</strong>

<br><br><li>
Edit <i>pkg/DESCR</i>, <i>pkg/PLIST</i>.
<ul><li>
DESCR is a longer description of the port. One to a few paragraphs
concisely explaining what the port does is sufficient. It is also advised to
wrap your lines at 72 characters. This can be done by first editing the DESCR
file and then running it through 'fmt -w 72'.
<li>
PLIST is kept empty at this point.
</ul>

<br><li>
If the application needs to create a user or a group, choose the lowest free
id from <code>/usr/ports/infrastructure/db/user.list</code> for your port to
use and make sure your port gets added to this file at commit time.

<br><br><li>
Install the application with <b>make fake</b>.
Libraries should never be stripped. Executables are stripped by default;
this is governed by <code>${INSTALL_STRIP}</code>.
<code>${INSTALL_PROGRAM}</code> honors this automatically and is
preferable to unconditional stripping (e.g., by an "install-strip"
target or by running "strip" from the Makefile). You can use
<code>file</code> to determine if a binary is stripped or not.

<br><br><li>
<strong>Check port for security holes again</strong>. This is
especially important for network and setuid programs. See
<a href="porting.html#Security">our security recommendations</a>
for that. Log interesting stuff and fixes in the
<code>pkg/SECURITY</code> file.  This file 
should list audited potential problems, along with relevant patches,
so that another person can see at first glance what has been done.
Example:
<pre> 
      &#36;OpenBSD&#36;

      ${WRKDIR}/receiver.c
         call to mktemp (wrapper function do_mktemp) does seem to be correct.

      The server makes extensive use of strlcpy/strlcat/snprintf.
</pre>

<br><br><li>
Make sure your <code>/etc/mtree</code> directory is up-to-date.
(The next step uses the mtree lists to remove existing directories from
generated packing-lists). Remember that <code>(U)pdate</code> does not
touch <code>/etc</code>...
<br><br><li>
Create pkg/PLIST.  After the install is complete use the developer's command,
<b>make plist</b> which makes the file PLIST in the <i>pkg</i> directory. 
This file is a candidate packing list.  
<p>
Peruse `PLIST' and verify that everything was installed and
that it was installed in the proper locations.  Anything not installed
can be added to a port Makefile `post-install' rule.
<p>
Ports that install shared libraries will have another file called PFRAG.shared.
<ul><li>
PLIST describes the files being independent of whether the architecture supports shared libraries or not.
<li>
PFRAG.shared describes only the files being additionally installed on those architectures that support 
shared libraries.
<li>
PFRAG.noshared describes only the files being additionally installed on architectures that do not 
support shared libraries.
</ul>

<br><br><li>
Verify shared library dependencies. Run <code>make port-lib-depends-check</code>
and add every <code>LIB_DEPENDS</code> or <code>WANTLIB</code> annotation
that is needed until it runs cleanly.
You may want to read 
<a href="porting/update.html">the update guidelines</a>
to understand why this is so important.
<br><br><li>
If you added to <code>LIB_DEPENDS</code>, Re-run <b>make plist</b>. It
is possible some directories do not need to be in the PLIST, as they've
been installed by a dependency.
<br><br><li>
Test the packaging.
After the port installs correctly issue the command
<code>make package</code> to create a package.  To test the
package first do a <code>pkg_add</code> and then do a
<code>pkg_delete</code>   
<br><br><li>
Verify dependencies. Peruse your logs to verify the port did detect what is
mentioned in DEPENDS, and nothing more. Check names for hidden dependencies
(stuff that exists elsewhere in the ports tree and might be detected if the
user installs some other ports first).
<br><br><li>
Verify shared library dependencies. Run <code>make lib-depends-check</code>
and add every <code>LIB_DEPENDS</code> or <code>WANTLIB</code> annotation
that is needed until it runs cleanly (run <code>make clean=package</code>
to remove the old package after updating the port's Makefile).
You may want to read 
<a href="porting/update.html">the update guidelines</a>
to understand why this is so important.
<br><br><li>
Check for regression tests, and whether they run cleanly. Set 
<code>NO_REGRESS=Yes</code> if a port has no test infrastructure.
Please note: do not set <code>NO_REGRESS</code> if a port has an empty
regression infrastructure.
<br><br><li>
Mail <a href="mailto:ports@@openbsd.org">ports@@openbsd.org</a> with a short
note asking for comments and testing.  Make sure to attach the port/patch to
this email and send it out (mailinglist archives just contain the mails itself).
<p>
Try to get others to test it on a variety of platforms for you.
<ul><li>
The AMD64 Opteron systems are good because they are fast, and because
<code>sizeof(int) != sizeof(long)</code> on this platform.
<li>
Sun SPARC and UltraSPARC are good because they are very common and because
their byte order is the opposite of i386; if you developed on SPARC, of course,
you'd want it tested on i386.
</ul>

<br><li>
Incorporate any feedback you get. Test it again on your platform.
Get those who gave you feedback to test it again from your new port.

<br><br><li>
Finally, include it in the "ports" tree.
If you do not have CVS access, ask someone on 
<a href="mailto:ports@@openbsd.org">ports@@openbsd.org</a> to commit it.  

<br><br><li>
If you are a developer with CVS access, check it in.
Before commit, check that no users were added to
<code>/usr/ports/infrastructure/db/user.list</code>
since the port was created.
We normally use "import" for a new port,
rather than adding a zillion (or a dozen) files individually.
Import uses "vendor branch" version numbers like 1.1.1.1, but don't worry
about that! :-) If you make changes to a specific file (edit, then 
cvs commit), it will be 1.2, and that will be used.
<p>
In short, import is typically used when a port is created.
From that point on cvs add and cvs rm are typically used to add or remove
files, and the normal edit-&gt;commit cycle for changes.
You might use something like this:
<pre>
$ cd kaffe1
$ make clean	# you really don't want to check in all of work!
$ cvs -d cvs.openbsd.org:/cvs import -m 'kaffe port' ports/lang/kaffe1 \
	<i>YourName</i> <i>YourName_YYYY-MMM-DD</i>
</pre>
<ul><li>
-d cvs.openbsd.org:/cvs says where cvs lives. This can be omitted if you
have a CVSROOT environment variable defined.
<li>
-m 'kaffe port' is your login message.  Change it to whatever you like
<li>
ports/lang/kaffe1 is the path relative to /cvs where the port lives
<li>
<i>YourName</i> (replaced with your login name) is the 'vendor tag'.
You imported it so you are the vendor.
<li>
<i>YourName_YYYY-MMM-DD</i> (e.g., ian_2000-Jan-01)
is the 'vendor release tag'.  This is as good as any.
</ul>
<br>
As a real example, here is the output of checking in the Kaffe1 port,
which one of us did on September 8, 1998:
<pre>
$ cd kaffe1
$ make clean >/dev/null
$ cvs import -m 'kaffe1.0(==JDK1.1) port' ports/lang/kaffe1 ian ian_1998-Sep-08
ian@@cvs.openbsd.org's password: (not shown, obviously)
I ports/lang/kaffe1/CVS
I ports/lang/kaffe1/files/CVS
I ports/lang/kaffe1/pkg/CVS
N ports/lang/kaffe1/Makefile
cvs server: Importing /cvs/ports/lang/kaffe1/files
N ports/lang/kaffe1/files/md5
cvs server: Importing /cvs/ports/lang/kaffe1/pkg
N ports/lang/kaffe1/pkg/COMMENT
N ports/lang/kaffe1/pkg/DESCR
N ports/lang/kaffe1/pkg/PLIST

No conflicts created by this import
$ 
</pre>

<li>
Last but not least, add a one-line entry for the new port
in its parent directory's Makefile, e.g., for ports/lang/kaffe1,
add it to ports/lang/Makefile.
Don't forget to commit any changes made to
<code>/usr/ports/infrastructure/db/user.list</code>.

<br><br><li>
Maintain the port!  As time goes by, problems may arise, or new versions 
of the software may be released. You should strive to keep your port up 
to date.  In other words - iterate, test, test, iterate...

<br><br><li>
When updating a port, remember to handle dependencies! You shouldn't break any
port that depends on yours. In case of problems, communicate with the 
maintainers of such ports. Likewise, be alert for dependency updates, and
check that the maintainer did their job.
</ol>
 
Thank you for supporting the OpenBSD "ports" process!
<hr>
<a href="porting.html"><img height=24 width=24 src="back.gif"
 border=0 alt="Porting"></a> 
<a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
<br><small>$OpenBSD: checklist.html,v 1.69 2008/11/18 22:31:12 sthen Exp $</small>
</body>
</html>
@


1.69
log
@add note to self about checking user.list.
@
text
@d517 1
a517 1
<br><small>$OpenBSD: checklist.html,v 1.68 2007/09/09 19:49:20 aanriot Exp $</small>
@


1.68
log
@clarify the "stripping" policy for ports.

text mostly from and ok naddy@@
@
text
@d437 3
d497 2
d517 1
a517 1
<br><small>$OpenBSD: checklist.html,v 1.67 2007/08/16 16:23:22 steven Exp $</small>
@


1.67
log
@two small fixes:
s/make install/make fake/
s/make show VARNAME=/make show=/

from Tilo Stritzky <t.stritzky at teles.de>
@
text
@d326 6
a331 6
If the port installs dynamic libraries, check their symbol tables
with <code>nm</code>, as some mistaken software strips dynamic libraries,
which may lead to weird failures later. On the other hand, executable binaries
SHOULD be stripped; <code>file</code> can be used to determine this.  If the 
port already contains code for stripping binaries, use it (i.e., an
'install-strip' target); otherwise, add a provision in the port Makefile.
d512 1
a512 1
<br><small>$OpenBSD: checklist.html,v 1.66 2007/06/04 19:23:30 espie Exp $</small>
@


1.66
log
@Document that /etc/mtree should be up-to-date.
Document port-lib-depends-checks, which is ways faster than
the make package/check-lib-depends/clean=package cycle.
Mention that make plist should be re-run to remove directories.
@
text
@d325 1
a325 1
Install the application with <b>make install</b>.
d512 1
a512 1
<br><small>$OpenBSD: checklist.html,v 1.65 2007/05/15 20:17:18 simon Exp $</small>
@


1.65
log
@mention to attach the actual port/patch to mails

ok jasper@@
@
text
@d351 6
a356 1
<li>
d377 11
d512 1
a512 1
<br><small>$OpenBSD: checklist.html,v 1.64 2007/03/15 10:47:33 jsg Exp $</small>
@


1.64
log
@bump copyrights on files that have changed recently
@
text
@d397 2
a398 2
note asking for comments and testing.  Attach the port to this email and
send it out.  
d496 1
a496 1
<br><small>$OpenBSD: checklist.html,v 1.63 2006/12/31 03:11:18 joel Exp $</small>
@


1.63
log
@typo
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2004 by OpenBSD.">
d496 1
a496 1
<br><small>$OpenBSD: checklist.html,v 1.62 2006/11/04 10:53:37 espie Exp $</small>
@


1.62
log
@add placeholders linking to porting/update.html, to be fleshed out a bit
later.
document the libtool changes with respect to shared libraries.
@
text
@d203 1
a203 1
Begin and cycle of <b>make build</b>, generate a patch (or use <b>make 
d496 1
a496 1
<br><small>$OpenBSD: checklist.html,v 1.61 2005/06/10 10:37:35 espie Exp $</small>
@


1.61
log
@remove most of the non-sensical install/package instructions, since they
obviously pre-date fake.

Add lib-depends-check/regress steps. Good suggestion from Armin Wolfermann...
@
text
@d387 3
d496 1
a496 1
<br><small>$OpenBSD: checklist.html,v 1.60 2004/11/23 08:05:24 miod Exp $</small>
@


1.60
log
@Suggest testing ports on amd64 and sparc64 rather than alpha and sparc those
days...
@
text
@a355 14
Beware! The files are found by timestamp.  This means it does NOT:
<ul><li>
list any files installed with `tar' as their timestamp
will not change and thus won't be found by `find'.
<li>
Update the <code>info/dir</code> file if .info files are added.  
Also, be sure that the <code>info/dir</code> is not part of the PLIST.
<li>
Try to do anything special with links or symbolic links.  A
cursory test of tar shows it does the right thing with links
and symbolic links so I don't see why we need to special case
anything in the packing list.  But still...
</ul>
<p>
a358 1

a370 12
<br><li>
Keep repeating uninstall and reinstall until perfect.
<em>Perfect</em> is when everything installs and uninstalls
in its proper location.  `pkg_delete &lt;pkg_name&gt;' is
used to uninstall.  `sudo make reinstall' is used to reinstall.  See the
`pkg_create' man page for other commands that may be added
to PLIST to ensure all is cleaned up.  After an uninstall the command:
<pre>
$ find /usr/local -newer w-${PKGNAME}${FLAVOR_EXT}/fake-${MACHINE_ARCH}[-${FLAVOR}]/.install_started -print
</pre>
should only list standard directory names.

d375 17
a391 4
package first do a <code>pkg_delete</code> and then do a
<code>pkg_add</code>   The results after an add should EXACTLY
match the results after a `make install'.

d493 1
a493 1
<br><small>$OpenBSD: checklist.html,v 1.59 2004/03/25 02:41:50 jcs Exp $</small>
@


1.59
log
@remove absolute links pointing to www.openbsd.org and use local
files

ok nick
@
text
@d413 2
a414 2
The DEC Alpha is good  because it has only static libraries and because 
<code>sizeof(int) != sizeof(long)</code>.
d416 3
a418 3
Sun SPARC is good because it is very common and because its byte order is 
the reverse of i386; if you developed on SPARC, of course, you'd want it 
tested on i386.
d507 1
a507 1
<br><small>$OpenBSD: checklist.html,v 1.58 2004/02/13 07:49:52 david Exp $</small>
@


1.58
log
@uppercase HTML -> lowercase HTML
ok xsa@@
@
text
@d46 2
a47 3
You can find instructions on how to do this at
<a href="http://www.openbsd.org/anoncvs.html">
http://www.openbsd.org/anoncvs.html</a>.
d507 1
a507 1
<br><small>$OpenBSD: checklist.html,v 1.57 2004/02/12 09:12:23 xsa Exp $</small>
@


1.57
log
@
add a few bits about the license marker in the ports Makefile;
ok pvalchev@@ jolan@@.
@
text
@d447 1
a447 1
	<I>YourName</I> <I>YourName_YYYY-MMM-DD</I>
d508 1
a508 1
<br><small>$OpenBSD: checklist.html,v 1.56 2004/02/07 11:29:56 xsa Exp $</small>
@


1.56
log
@
add the examples directory in the files location part;
ok pvalchev@@.
@
text
@d165 6
a170 1
recommend you place the license in <code>/usr/local/share/DISTNAME/</code>.
d508 1
a508 1
<br><small>$OpenBSD: checklist.html,v 1.55 2004/01/02 02:51:54 jose Exp $</small>
@


1.55
log
@
bump copyrights to 2004, ok nick@@
@
text
@d260 2
a261 2
   libraries				/usr/local/lib
   architecture dependent data		/usr/local/lib/&lt;name&gt;
d271 1
d503 1
a503 1
<br><small>$OpenBSD: checklist.html,v 1.54 2003/12/05 10:22:47 jmc Exp $</small>
@


1.54
log
@articles are `indefinite', not `indeterminate' and they
are `a'/`an', not `a'/`as';

from Tom Cosgrove;
ok pval@@
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2003 by OpenBSD.">
d502 1
a502 1
<br><small>$OpenBSD: checklist.html,v 1.53 2003/11/18 03:51:14 jose Exp $</small>
@


1.53
log
@
some fixes from Jared Yanovich, with some changes noticed by nick@@
- hex values for bgcolor, text
- no need to escape > in <pre /> block

update copyright to 2003

ok nick@@
@
text
@d300 1
a300 1
<strong>DON'T EVER START WITH AN INDETERMINATE ARTICLE SUCH AS `a' or `as';
d502 1
a502 1
<br><small>$OpenBSD: checklist.html,v 1.52 2003/10/31 22:31:19 margarida Exp $</small>
@


1.52
log
@zap part of the sentence and beautify it, as $OpenBSD$ tag is now added
automatically.
Noticed with PR sent by Nuno Morgardinho <neqm@@lockstep.org>.
Brainstormed with pvalchev@@.
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2002 by OpenBSD.">
d14 1
a14 1
<body text=Black bgcolor=White link="#23238E">
d29 1
a29 1
<a href="mailto:ports@@openbsd.org"> ports@@openbsd.org.</a> 
d404 1
a404 1
sent it out.  
d435 1
a435 1
files, and the normal edit->commit cycle for changes.
d499 2
a500 2
<a href="porting.html"><img height=24 width=24 src=back.gif
 border=0 alt=Porting></a> 
d502 1
a502 1
<br><small>$OpenBSD: checklist.html,v 1.51 2003/06/22 13:24:32 sturm Exp $</small>
@


1.51
log
@when creating ports users/groups, check db/user.list

espie@@ ok
@
text
@d212 1
a212 1
Only patch one source file per patchfile, please,
d214 1
a214 1
Use <b>make update-patches</b> to generate patches,
d216 1
a216 1
All patches MUST be relative to ${WRKDIST},
d222 2
a223 2
Add a small explanation of the patch role in the patchfile before
the patch itself, and an OpenBSD CVS tag <code>&#36;OpenBSD&#36;</code>.
d502 1
a502 1
<br><small>$OpenBSD: checklist.html,v 1.50 2003/06/02 12:39:26 jolan Exp $</small>
@


1.50
log
@sync link case w/<a name> on porting.html  most web browsers will
not find the appropriate section.  reported by Xavier Santolaria
@
text
@d315 5
d502 1
a502 1
<br><small>$OpenBSD: checklist.html,v 1.49 2003/05/11 04:59:48 cannings Exp $</small>
@


1.49
log
@removed creating "patches" directory. It is automatically created with
"make update-patches". OK pval.
@
text
@d326 1
a326 1
<a href="porting.html#security">our security recommendations</a>
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.48 2003/04/11 02:46:22 david Exp $</small>
@


1.48
log
@fix typo in pathname
from Toni Mueller <support@@oeko.net>
@
text
@d58 1
a58 1
Create the directories <code>patches, pkg</code>.
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.47 2003/02/26 02:14:49 david Exp $</small>
@


1.47
log
@remove double word stuttering
ok miod@@
@
text
@d94 1
a94 1
/usr/ports/infrastructure/template/network.conf.template.
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.46 2003/02/19 16:46:34 pvalchev Exp $</small>
@


1.46
log
@wrap DESCR to 72 chars instead of 80; suggested by nick@@nauwelaerts.net
@
text
@d434 1
a434 1
$ make clean	# you really really don't want to check in all of work!
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.45 2002/11/19 22:02:19 jsyn Exp $</small>
@


1.45
log
@first pass at better internal consistency and correctness; no changes in
policy here, just grammar/presentation cleanup.  looked over very briefly
by brad@@ and pvalchev@@; more fixes coming...
@
text
@d308 2
a309 2
wrap your lines at 80 characters. This can be done by first editing the DESCR
file and then running it through 'fmt -w 80'.
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.44 2002/07/06 09:32:07 pvalchev Exp $</small>
@


1.44
log
@Put notes that NEED_VERSION is now obsolete with brief notes on why.
@
text
@d12 1
a12 1
 </head>
d21 2
a22 2
Direct comments and questions to <a href="mailto:ports@@openbsd.org"> 
ports@@openbsd.org </a>.
d44 1
a44 1
<br><li>
a53 2

<br>
a56 2
<br>

d60 1
a60 1
Create these empty files <code>pkg/DESCR, pkg/PLIST</code>
d69 2
a70 1
Fill in DISTNAME which is the name of the file minus the extract suffix.  E.g. if you have foo-1.0.tar.gz, DISTNAME is foo-1.0.
d73 3
a75 2
is kept.  E.g. ftp://ftp.openbsd.org/pub/OpenBSD/distfiles/ . <strong>Don't forget
the trailing slash.</strong> Try to have at least three distinct sites as well. 
d83 1
a83 1
<b>make fetch-all</b> 
d122 1
a122 1
Then verify the checksum is correct by typing <b>make checksum</b>
d160 2
a161 1
</ul><p>
d164 1
a164 1
later on.  E.g. some ports require to install a copy of the license.  We 
d229 1
a229 1
Try setting <code>SEPARATE_BUILD</code><br>
d243 3
a245 3
Note: make sure host dependent files go in <i>/etc</i> or
<i>/etc/&lt;name&gt;</i>, but <strong>NEVER REPLACE OR MODIFY</strong> existing files
in <i>/etc</i>.  Best to have install place
d282 1
a282 1
Ideally, the port should no longer modify any file in
d286 1
a286 1
SEPARATE_BUILD=concurrent: someone can use the same
d288 2
a289 2
Otherwise, set <code>SEPARATE_BUILD=simple</code>: building on
distinct arches simultaneously may meet with problems, as some 
d298 1
a298 1
unless semantically significant, 
d300 1
a300 1
<strong>DON'T EVER START WITH AN UNDETERMINATE ARTICLE SUCH AS `a' or `as',
d305 1
a305 2
<ul>
<li>
d315 1
a315 2
Install the application with <b>make install</b>
<p>
d347 1
a347 2
<ul>
<li>
d349 1
a349 1
will not change and thus won't be found by `find'
d365 2
a366 3
Ports that install shared libraries will have another file called PFRAG.shared.  
<ul>
<li>
d377 1
a377 1
Keep repeating uninstall and reinstall until perfect.<br>
d382 5
a386 3
to PLIST to ensure all is cleaned up.  After an uninstall the command
<p><code>find /usr/local -newer w-${PKGNAME}${FLAVOR_EXT}/fake-${MACHINE_ARCH}[-${FLAVOR}]/.install_started -print</code>
<p>should only list standard directory names.
d389 1
a389 1
Test the packaging:<br>
d404 1
a404 1
<code>sizeof(int) != sizeof(long)</code>
d408 1
a408 1
tested on i386).
a416 1
<p>
d433 3
a435 3
cd kaffe1
make clean	# you really really don't want to check in all of work!
cvs -d cvs.openbsd.org:/cvs import -m 'kaffe port' ports/lang/kaffe1 \
d446 1
a446 1
<i>YourName</i> (replaced with your login name) is the "vendor tag".
d452 1
d477 1
a477 1
in its parent directory's Makefile, i.e., for ports/lang/kaffe1,
d485 1
a485 1
<br><li>
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.43 2002/06/18 01:44:05 jsyn Exp $</small>
@


1.43
log
@make the OpenBSD logo on each page a link back to index.html; from
s@@smith.net, ok deraadt@@
@
text
@d56 3
a58 7
NEED_VERSION relates to the version in the $OpenBSD tag of 
<tt>$(PORTSDIR)/infrastructure/mk/bsd.port.mk</tt>: e.g. 
<tt>$OpenBSD: bsd.port.mk,v 1.287 ...</tt> would get 
<tt>NEED_VERSION=1.287</tt> in your Makefile.
The fool-proof and right way is to choose the most recent version you can 
find. As you are a port developer, you are supposed to update 
your ports, including bsd.port.mk.
d500 1
a500 1
<br><small>$OpenBSD: checklist.html,v 1.42 2002/05/27 07:19:16 pvalchev Exp $</small>
@


1.42
log
@nuke MASTER_SITE_SUBDIR parts from here too; from jakemsr@@jakemsr.com
@
text
@d15 1
a15 1
<img height=30 width=141 src=images/smalltitle.gif alt="[OpenBSD]" >
d504 1
a504 1
<br><small>$OpenBSD: checklist.html,v 1.41 2002/01/29 22:08:36 horacio Exp $</small>
@


1.41
log
@copyright 2002
@
text
@d102 2
a103 2
To simplify this process, the construct %SUBDIR% is replaced by the variable
MASTER_SITE_SUBDIR in your Makefile.
d504 1
a504 1
<br><small>$OpenBSD: checklist.html,v 1.40 2001/12/19 21:33:48 naddy Exp $</small>
@


1.40
log
@Some corrections, adapted from a submission by Dave Watson
<dave@@elephantride.org>.
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2001 by OpenBSD.">
d504 1
a504 1
<br><small>$OpenBSD: checklist.html,v 1.39 2001/11/12 21:01:28 jufi Exp $</small>
@


1.39
log
@DESCR should be wrapped at 80 characters.
@
text
@d66 1
a66 1
Create the directories <code>files, patches, pkg</code>.
d106 1
a106 1
checksum in files/md5. So, to avoid confusion, DISTFILES and PATCHFILES should have clearly visible version numbers:
d127 1
a127 1
Create a checksum in <i>files/md5</i> by typing <b>make makesum</b>.
d177 1
a177 1
specified by GNU_CONFIGURE or HAS_CONFIGURE is run. 
d179 1
a179 1
If GNU_CONFIGURE is used you may want to run ./configure --help
d219 1
a219 1
Use <b>diff -p -u</b> to generate patches,
d237 1
a237 1
this is cleaner (many programs using <code>GNU_CONFIGURE</code> can),
d255 3
a257 1
the package since everything under <i>/usr/local</i> is included in the PLIST
d504 1
a504 1
<br><small>$OpenBSD: checklist.html,v 1.38 2001/09/16 06:41:27 pvalchev Exp $</small>
@


1.38
log
@update a few references to WRKDIR as it has changed from work/ to w-${PKGNAME}${FLAVOR_EXT}
@
text
@d311 3
a313 1
concisely explaining what the port does is sufficient.
d502 1
a502 1
<br><small>$OpenBSD: checklist.html,v 1.37 2001/09/16 06:35:30 pvalchev Exp $</small>
@


1.37
log
@grammar fixes from nick@@be.wanadoo.com
@
text
@d146 2
a147 2
of the sources are.  Usually, it's <i>work/DISTNAME</i>. You may need to modify 
the Makefile's WRKDIST variable if it is different.
d388 1
a388 1
<p><code>find /usr/local -newer work/fake-${MACHINE_ARCH}[-${FLAVOR}]/.install_started -print</code>
d500 1
a500 1
<br><small>$OpenBSD: checklist.html,v 1.36 2001/08/25 11:25:42 jufi Exp $</small>
@


1.36
log
@
copyright extended to 2001
@
text
@d74 1
a74 1
Fill in EXTRACT_SUFX if its anything besides .tar.gz.  Other examples are
d480 1
a480 1
in its parent directory's makefile, i.e., for ports/lang/kaffe1,
d500 1
a500 1
<br><small>$OpenBSD: checklist.html,v 1.35 2001/08/11 02:44:29 brad Exp $</small>
@


1.35
log
@document games score files directory location.
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998-2000 by OpenBSD.">
d500 1
a500 1
<br><small>$OpenBSD: checklist.html,v 1.34 2001/07/07 00:15:44 jsyn Exp $</small>
@


1.34
log
@document the binary stripping ports policy; ok espie@@
@
text
@d269 1
d500 1
a500 1
<br><small>$OpenBSD: checklist.html,v 1.33 2001/07/05 18:52:09 pvalchev Exp $</small>
@


1.33
log
@synchronize PLIST/PFRAG information with bsd.port.mk and fix some typos; from Nikolay.Sturm@@desy.de
@
text
@d320 4
a323 1
which may lead to weird failures later.
d499 1
a499 1
<br><small>$OpenBSD: checklist.html,v 1.32 2001/04/02 20:44:58 naddy Exp $</small>
@


1.32
log
@typo; from jose@@biochemistry.BIOC.cwru.edu
@
text
@d20 1
a20 1
reminder of things to do.  This is not totally accurate nor perfect.
d35 1
a35 1
You will find a lot of porting-savvy people here.  They can often give you
d46 1
a46 1
You can find instructions to do this at
d88 1
a88 1
You can check to see if you have filled this values in correctly by typing
d146 1
a146 1
of the sources are.  Usually, its <i>work/DISTNAME</i> You may need to modify 
d155 1
a155 1
apply to your port.  Many are freely redistribution but then again, quite
d195 1
a195 1
Figure out what needs to be changed and make patch for it.  
d342 1
a342 1
<b>make plist</b> which makes the file PLIST-auto in the <i>pkg</i> directory. 
d360 1
a360 1
Peruse `PLIST-auto' and verify that everything was installed and
a362 2
<p>
Move `PLIST-auto' to `PLIST'
d365 1
a365 1
Ports that install shared libraries will need two versions of the PLIST file.  
d368 3
a370 1
PLIST describes the files installed on those architectures that support 
d373 2
a374 5
PLIST.noshared describes the files installed on architectures that do not 
support shared libs.
<li>
Typically, PLIST.noshared is a copy of PLIST less references to any 
shared libraries.
d384 1
a384 1
<p><code>find /usr/local -newer work/.install_started -print</code>
d496 1
a496 1
<br><small>$OpenBSD: checklist.html,v 1.31 2001/03/28 11:22:48 reinhard Exp $</small>
@


1.31
log
@COMMENT is in Makefile now; ok espie
@
text
@d85 1
a85 1
${MASTER_SITE}${DISTNAME}${EXTRACT_SUFX}.  All three are used.  Don't
d499 1
a499 1
<br><small>$OpenBSD: checklist.html,v 1.30 2001/02/18 13:30:38 espie Exp $</small>
@


1.30
log
@Remove Chris from this document, at his request, as he currently doesn't
have time to do more than forward stuff to me.
@
text
@d68 1
a68 1
Create these empty files <code>pkg/COMMENT, pkg/DESCR, pkg/PLIST</code>
d295 1
a295 3
Edit <i>pkg/DESCR</i>, <i>pkg/COMMENT</i>, <i>pkg/PLIST</i>.
<ul>
<li>
d304 4
d499 1
a499 1
<br><small>$OpenBSD: checklist.html,v 1.29 2001/02/08 20:58:37 espie Exp $</small>
@


1.29
log
@Emphasize the importance of handling updates, and doing it correctly.
@
text
@d60 1
a60 1
The fullproof and right way is to choose the most recent version you can 
d399 1
a399 3
sent it out.  If you don't get any comments, send email to 
<a href="mailto:turan@@openbsd.org">turan@@openbsd.org</a> and I will pick it 
for you.
d419 1
a419 3
<a href="mailto:ports@@openbsd.org">ports@@openbsd.org</a> to commit it.  Don't 
forget about me, <a href="mailto:turan@@openbsd.org">turan@@openbsd.org</a> if 
no one picks it up.
d497 1
a497 1
<br><small>$OpenBSD: checklist.html,v 1.28 2001/02/08 20:53:21 espie Exp $</small>
@


1.28
log
@turan has no time to deal with ports, revert questions to the ml.
@
text
@d40 5
d488 6
d501 1
a501 1
<br><small>$OpenBSD: checklist.html,v 1.27 2001/01/27 16:00:51 naddy Exp $</small>
@


1.27
log
@EXTRACT_SUFFIX -> EXTRACT_SUFX; from Peter Valchev <pvalchev@@toxiclinux.org>
@
text
@d21 2
a22 2
Direct comments and questions to <a href="mailto:turan@@openbsd.org"> 
turan@@openbsd.org </a>.
d490 1
a490 1
<br><small>$OpenBSD: checklist.html,v 1.26 2000/12/11 13:08:52 reinhard Exp $</small>
@


1.26
log
@add a note about make update-patches
@
text
@d69 1
a69 1
Fill in EXTRACT_SUFFIX if its anything besides .tar.gz.  Other examples are
d80 1
a80 1
${MASTER_SITE}${DISTNAME}$EXTRACT_SUFFIX}.  All three are used.  Don't
d490 1
a490 1
<br><small>$OpenBSD: checklist.html,v 1.25 2000/05/31 17:37:19 reinhard Exp $</small>
@


1.25
log
@clarify NEED_VERSION; ok espie@@
@
text
@d199 2
a200 1
Begin and cycle of <b>make build</b>, generate a patch, and 
d205 2
a206 1
patch-FILENAME where FILENAME is the name of the file it is patching.
d490 1
a490 1
<br><small>$OpenBSD: checklist.html,v 1.24 2000/05/31 10:55:26 espie Exp $</small>
@


1.24
log
@*SHOUT AT PEOPLE UNTIL THEY START PROVIDING GOOD COMMENTS !!!

THIS IS    * A L L *   that pkg_info shows you, so it had better be good.
@
text
@d49 11
d488 1
a488 1
<br><small>$OpenBSD: checklist.html,v 1.23 2000/03/24 14:08:07 wvdputte Exp $</small>
@


1.23
log
@Fix link to "mailto:"'s
@
text
@d281 7
a287 3
(max. 60 characters). Do NOT include the package name (or version number
of the software) in the comment. Do NOT start with an uppercase letter
unless semantically significant, do NOT end with a period.
d477 1
a477 1
<br><small>$OpenBSD: checklist.html,v 1.22 2000/03/11 18:49:19 rohee Exp $</small>
@


1.22
log
@HTML cleanup

HTML4 recommands replacing empty <p> with <br> or <br><br>
it looks the same in Netscape and is more standard compliant
@
text
@d378 2
a379 1
<a href="turan@@openbsd.org">turan@@openbsd.org</a> and I will pick it for you.
d399 3
a401 3
<a href="ports@@openbsd.org">ports@@openbsd.org</a> to commit it.  Don't forget
about me, <a href="turan@@openbsd.org">turan@@openbsd.org</a> if no one
picks it up.
d473 1
a473 1
<br><small>$OpenBSD: checklist.html,v 1.21 2000/03/11 07:43:53 form Exp $</small>
@


1.21
log
@CVS_ROOT -> CVSROOT
@
text
@d9 1
a9 1
<meta name="copyright" content="This document copyright 1998 by OpenBSD.">
d14 1
a14 1
<body text="#000000" bgcolor="#FFFFFF" link="#23238E">
d27 1
a27 1
<p><li> 
d39 1
a39 1
<p><li>
d45 1
a45 1
<p><li> 
d55 1
a55 1
<p><li> 
d64 2
a65 2
is kept.  E.g. ftp://ftp.openbsd.org/pub/OpenBSD/distfiles/  <b>Don't forget
the trailing slash.</b>  Try to have at least three distinct sites as well. 
d79 1
a79 1
(not openbsd) patches to the port.  Common uses are things like security
d110 1
a110 1
<p><li>
d128 1
a128 1
<p><li>
d133 1
a133 1
<p><li>
d136 2
a137 1
<p><li>
d156 1
a156 1
<p><li>
d173 1
a173 1
<p><li>
d187 1
a187 1
<p><li>
d215 1
a215 1
<p><li>
d226 1
a226 1
<p><li>
d231 1
a231 1
<i>/etc/&lt;name&gt;</i>, but <b>NEVER REPLACE OR MODIFY</b> existing files
d257 1
a257 1
<p><li>
d261 2
a262 1
<p><li>
d276 1
a276 1
<p><li>
d291 1
a291 1
<p><li>
d298 1
a298 1
<p><li>
d316 1
a316 1
<p><li>
d356 1
a356 1
<p><li>
d366 1
a366 1
<p><li>
d374 1
a374 1
<p><li>
d383 1
a383 1
sizeof(int) != sizeof(long) 
a387 1
<p>
d390 1
a390 1
<p><li>
d394 1
a394 1
<p><li>
d402 1
a402 1
<p><li>
d456 1
a456 1
<p><li>
d461 1
a461 1
<p><li>
d464 2
a465 2
to date.  In other words - iterate, test, test, iterate, ...
</ul>
d472 1
a472 1
<br><small>$OpenBSD: checklist.html,v 1.20 2000/03/10 17:13:13 turan Exp $</small>
@


1.20
log
@- update to a more usable and readable version
- licensing
- installing in /etc policy.

espie@@ for provided some of the text.
@
text
@d421 1
a421 1
have a CVS_ROOT environment variable defined.
d471 1
a471 1
<br><small>$OpenBSD: checklist.html,v 1.19 2000/02/14 01:35:31 espie Exp $</small>
@


1.19
log
@WRKDIST for patches
@
text
@d3 9
a11 15
 <head>
  <meta http-equiv="Content-Type"
	content="text/html; charset=iso-8859-1">
  <meta name="resource-type"
	content="document">
  <meta name="description"
	CONTENT="How to make an OpenBSD port; porting checklist">
  <meta name="keywords"
	content="openbsd,ports">
  <meta name="distribution"
	content="global">
  <meta name="copyright"
	content="This document copyright 1998 by the OpenBSD project">
  <title>OpenBSD Porting Checklist</title>
  <link rev="made" HREF="mailto:www@@openbsd.org">
d13 96
a108 2
 <body text="#000000" bgcolor="#FFFFFF" link="#23238E">
  <img height=30 width=141 src=images/smalltitle.gif alt="[OpenBSD]" >
d110 17
a126 1
  <h2><font color="#e00000">OpenBSD Porting Checklist</font></h2>
d128 4
a131 83
  I use this checklist as a reminder of things to do when creating
  new ports and when validating old ports.  I don't claim this list
  is totally accurate, much less perfect, but only hope that some
  find it useful. Direct any questions and/or comments to me at
  <a href="mailto:marc@@snafu.org">marc@@snafu.org</a>.
  <p>
  <ol>
   <li>To avoid duplication, subscribe to the ports@@openbsd.org
   mailing list - somebody may be already working on the same port as you.
   <p>
   <li>Create Makefile -- start with the provided Makefile template
       <code>/usr/ports/infrastructure/templates/Makefile.template</code>.  
		 This file can be retrieved from any of the anoncvs servers or via the
       OpenBSD cvs/web source browser system
       <a href="http://www.openbsd.org/cgi-bin/cvsweb/">http://www.openbsd.org/cgi-bin/cvsweb/</a>.
   <p>
   <li><code>make fetch-all</code><br>
       This verifies that the master site, distname, and extract suffix are
       correct. This should fetch <strong>all</strong> files needed for
		 that port, not only those corresponding to current option or the
		 current architecture.
   <p>
   <li><code>make makesum</code><br>
       This creates the files directory and the md5 checksum for the
       fetched files.
   <p>
   <li><code>make extract</code><br>
       Ensures that the file can be extracted into the work directory.
       This also verifies that the checksum created in step 4 is good.
   <p>
   <li>Create initial patches<br>
       When the extract is complete cd to the work directory and read
       any install docs.  You may need to modify the WRKDIST variable
       in the makefile as well as generate initial patches to configure
       for OpenBSD.
    <p>Note: Patches go in the directory `patches' and are named patch-xx
       where xx should be aa, ab, ..., az, ba, bb ... zz.
       <ul>
	<li>only patch one source file per patchfile, please,
	<li>use diff -p -u to generate patches,
	<li>all patches MUST be relative to ${WRDIST},
	<li>check that patches <strong>DON'T</strong> contain tags that cvs
	    will replace,
	<li>add a small explanation of the patch role in the patchfile before
            the patch itself, and an OpenBSD CVS tag
            <code>&#36;OpenBSD&#36;</code>.
       </ul>
   <p>
   <li><code>make patch</code><br>
       this will apply patches to the extracted sources.  If you want
       to see the output use the command:
    <p><code>make PATCH_DEBUG=YES patch</code>
    <p>The easiest way to re-run patches is to `make clean &amp;&amp; make patch'.
       This will delete the work directory and re-extract and patch.
   <p>
   <li>add configuration options to Makefile and/or create configuration
       script.<br>
       You can add a port configuration script named `configure' to a
       directory named scripts.  This will be run before any
       configuration specified by GNU_CONFIGURE or HAS_CONFIGURE is run.
    <p>If GNU_CONFIGURE is used you may want to run ./configure --help
       to see what options are available.  Anything that you may want to
       override can be changed by adding the --option flags to the
       CONFIGURE_ARGS parameter in the Makefile
   <p>
   <li>try setting <code>SEPARATE_BUILD</code><br>
       If the port can build with object files outside its source tree,
       this is cleaner (many programs using <code>GNU_CONFIGURE</code> can),
       and may help people who mount their ports tree on several arches.
       This can also spare you some effort, as you will possibly be able to
       restart the cycle at <code>configure</code> most of the time.
   <p>
   <li><code>make configure</code><br>
       Peruse the output (if any) and tweak any options in the Makefile.
       To repeat issue the command
       `<code>make clean &amp;&amp; make configure</code>'.
    <p>Note: make sure host dependent files go in <code>/etc</code> or
       <code>/etc/&lt;name&gt;</code>, but NEVER replace existing files
       in <code>/etc</code>.  Best to have install place
       in <code>/usr/local/lib/&lt;name&gt;</code> and then copy to
       <code>/etc</code> or
       <code>/etc/&lt;name&gt;</code> only if the files do not exist.
    <p>The OpenBSD file locations are:
d133 108
a240 1
       <pre>
d254 1
a254 1
       </pre>
d256 17
a272 44
   <p>
   <li><code>make</code><br>
       Begin a cycle of makes until the port is ready.  Patch (see above)
       clean, and make until the port is generated.  Get rid of all warnings
       if possible, especially security related warnings.
   <p>
   <li>Control <code>SEPARATE_BUILD</code> semantics<br>
       You have to do this only if the port builds with
       <code>SEPARATE_BUILD</code> defined.
       Ideally, the port should no longer modify any file in
       <code>${WRKSRC}</code> after <code>make patch</code>.
       You can check this by making sure you don't have any write access
       to <code>${WRKSRC}</code>. Then you can set
       <code>SEPARATE_BUILD=concurrent</code>: someone can use the same
       source tree to build on distinct arches simultaneously.
       Otherwise, set <code>SEPARATE_BUILD=simple</code>: building on
       distinct arches simultaneously may meet with problems, as some 
       source files may be regenerated at awkward moments.
   <p>
   <li><code>mkdir pkg; touch pkg/{DESCR,COMMENT,PLIST}</code><br>
        Create dummy versions of the package files.  Edit DESCR and COMMENT.
     <p>COMMENT is a <strong>SHORT</strong> one-line description of the port
     (max. 60 characters). Do NOT include the package name (or version number
     of the software) in the comment. Do NOT start with an uppercase letter
     unless semantically significant, do NOT end with a period.
     <p>DESCR is a longer description of the port. One to a few paragraphs
        concisely explaining what the port does is sufficient.
     <p>PLIST is kept empty at this point.
   <p>
   <li><code>sudo make install</code><br>
       install the application.
   <p>
	<li>If the port installs dynamic libraries, check their symbol tables
	with <code>nm</code>, as some mistaken software strips dynamic libraries,
	which may lead to weird failures later.
	<p>
	<li><strong>Check port for security holes again</strong>. This is
		especially important for network and setuid programs. See
		<a href="porting.html#security">our security recommendations</a>
		for that. Log interesting stuff and fixes in the
		<code>pkg/SECURITY</code> file.  This file 
		should list audited potential problems, along with relevant patches,
		so that another person can see at first glance what has been done.
		Example:
d274 31
d312 59
d372 28
a399 1
</pre>
d401 13
a413 73
   <li>Create pkg/PLIST<br>
       After the install is complete use the developer's command:
    <p><code>make plist</code>
    <p>which makes the file PLIST-auto in the pkg directory.  This file
       is a candidate packing list.  Beware: the files are found by
       timestamp.  This means it does NOT:
       <ul>
        <li>list any files installed with `tar' as their timestamp
            will not change and thus won't be found by `find'
	<li>update the <code>info/dir</code> file if .info files are
	    added.  You'll have to add that by hand.  Also, be sure that
	    the <code>info/dir</code> is not part of the PLIST.
	<li>try to do anything special with links or symbolic links.  A
	    cursory test of tar shows it does the right thing with links
	    and symbolic links so I don't see why we need to special case
	    anything in the packing list.  But still...
       </ul>
     <p>Peruse `PLIST-auto' and verify that everything was installed and
        that it was installed in the proper locations.  Anything not installed
	can be added to a port Makefile `post-install' rule.
     <p>Copy `PLIST-auto' to `PLIST'
     <p>Ports that install shared libraries will need two versions of
        the PLIST file.  <code>PLIST</code> describes the files installed on
        those architectures that support shared libraries, and
	<code>PLIST.noshared</code> describes the files installed on
	architectures that do not support shared libs.  Typically,
	<code>PLIST.noshared</code> is a copy of <code>PLIST</code>
	less references to any shared libraries.
   <p>
   <li>uninstall and reinstall; repeat until perfect.<br>
       <em>Perfect</em> is when everything installs and uninstalls
       in its proper location.  `<code>pkg_delete &lt;pkg_name&gt;</code>' is
       used to uninstall.  `sudo make reinstall' is used to reinstall.  See the
       `<code>pkg_create</code>' man page for other commands that may be added
       to PLIST to ensure all is cleaned up.  After an uninstall the command
       <p><code>find /usr/local -newer work/.install_started -print</code>
       <p>should only list standard directory names.
   <p>
   <li>Create package:<br>
       After the port installs correctly issue the command
       <code>make package</code> to create a package.  To test the
       package first do a <code>pkg_delete</code> and then do a
       <code>pkg_add</code>   The results after an add should EXACTLY
       match the results after a `make install'.
   <p>
	<li>Distribute it!<br>
	Since the whole point of this process
	is to make your ported version of the software available to 
	other OpenBSD users, you now need to disseminate it.
	<ul>
	    <li>First, get others to test it on a variety of
		platforms (the DEC Alpha is good  because it has only static libraries
		and because sizeof int != sizeof long; Sun SPARC is good because it is
		very common and because its byte order is the reverse of i386; if you
		developed on SPARC, of course, you'd want it tested on i386).
		<P>The ports@@openbsd mailing list is a good place to find porting-savy
		people with different platforms!
		<li>Incorporate any feedback you get. Test it again on your platform.
		Get those who gave you feedback to test it again from your new port.
		<li>Finally, include it in the "ports" tree.
		If you are a developer with CVS access, check it in.
		We normally use "import" for a new port,
		rather than adding a zillion (or a dozen) files individually.
		Import uses "vendor branch" version numbers like 1.1.1.1, but don't worry
		about that! :-) If you make changes to a specific file (edit, then 
		cvs commit), it will be 1.2, and that will be used.
		<P>
		In short, import is typically used when a port is created.
		From that point on cvs add and cvs rm are typically used to add or remove
		files, and the normal edit->commit cycle for changes.
		<P>
		You might use something like this:
		<pre>
d418 18
a435 12
		</pre>
		<P>-d cvs.openbsd.org:/cvs says where cvs lives. This can be omitted if you
		have a CVS_ROOT environment variable defined.
		<P>-m 'kaffe port' is your login message.  Change it to whatever you like
		<P>ports/lang/kaffe1 is the path relative to /cvs where the port lives
		<P><I>YourName</I> (replaced with your login name) is the "vendor tag".
		You imported it so you are the vendor.
		<P><I>YourName_YYYY-MMM-DD</I> (e.g., ian_2000-Jan-01)
		is the 'vendor release tag'.  This is as good as any.
		<P>As a real example, here is the output of checking in the Kaffe1 port,
		which one of us did on September 8, 1998:
		<pre>
d453 20
a472 23
		</pre>
		<P>Last but not least, add a one-line entry for the new port
		in its parent directory's makefile, i.e., for ports/lang/kaffe1,
		add it to ports/lang/Makefile.
		<P>If you do not have CVS commit access, send mail to the ports
		maintainers at ports@@openbsd.org,
		stating that you have a port ready to go into the tree. List the
		name and version of the program, the platforms it's been tested on,
		and any limitations.
	</UL>
  <P>
  <LI>Maintain the port!<BR>
  As time goes by, problems may arise, or new versions of the software
  may be released. You should strive to keep your port up to date.
  In other words - iterate, test, test, iterate, ...
  </ol>
  Thank you for supporting the OpenBSD "ports" process!
  <hr>
  <a href="porting.html"><img height=24 width=24 src=back.gif
   border=0 alt=Porting></a> 
  <a href="mailto:www@@openbsd.org">www@@openbsd.org</a>
  <br><small>$OpenBSD: checklist.html,v 1.18 1999/11/02 15:45:33 espie Exp $</small>
 </body>
@


1.18
log
@diff -u -p is a good thing, recommend it for patches.
Warn against cvs tags in patches.
@
text
@d56 1
a56 1
       any install docs.  You may need to modify the WRKSRC variable
d64 1
a64 1
	<li>all patches MUST be relative to ${WRKSRC},
d306 1
a306 1
  <br><small>$OpenBSD: checklist.html,v 1.17 1999/08/15 02:23:45 marc Exp $</small>
@


1.17
log
@typo corrections from kwesterback@@home.com
@
text
@d62 5
a66 3
	<li>only patch one source file per patchfile, please
	<li>use diff -u to generate patches
	<li>all patches MUST be relative to ${WRKSRC}
d69 1
a69 1
            <code>&#36;OpenBSD&#36;</code>
d306 1
a306 1
  <br><small>$OpenBSD: checklist.html,v 1.16 1999/06/01 22:26:38 espie Exp $</small>
@


1.16
log
@Document libtiff problem (dynamic libraries should not strip symbol tables)
@
text
@d59 1
a59 1
    <p>Note: Patches go in the directory `patches' and are names patch-xx
d65 1
a65 1
	<li>add a small explaination of the patch role in the patchfile before
d145 2
a146 2
     of the software) in the comment. Do NOT start by an uppercase letter
     unless semantically significant, do NOT end by a dot.
d178 1
a178 1
       After the install is complete use the developers command:
d180 1
a180 1
    <p>which makes a the file PLIST-auto in the pkg directory.  This file
d208 1
a208 1
       in its proper location.  `<code>pkg_delete &lt;pkg_name&gt</code>' is
d231 1
a231 1
		developed on SPARC, of course, y ou'd want it tested on i386).
d304 1
a304 1
  <br><small>$OpenBSD: checklist.html,v 1.15 1999/05/18 16:50:25 espie Exp $</small>
@


1.15
log
@Makefile.template is now under infrastructure/
@
text
@d154 4
d304 1
a304 1
  <br><small>$OpenBSD: checklist.html,v 1.14 1999/05/02 15:33:20 rohee Exp $</small>
@


1.14
log
@various typos, some addition and HTML fixes.

use &lt; and &gt; to display < and >

use  &#36;OpenBSD&#36 to display an uninterpreted CVS tag

use http://validator.w3.org to check the HTML
@
text
@d35 2
a36 2
       <code>/usr/ports/Makefile.template</code>.  This file can
       be retrieved from any of the anoncvs servers or via the
d40 1
a40 1
   <li><code>make fetch</code><br>
d42 3
a44 1
       correct.
d300 1
a300 1
  <br><small>$OpenBSD: checklist.html,v 1.13 1999/04/29 22:35:29 wvdputte Exp $</small>
@


1.13
log
@fixed typo in closing tag <naddy@@unix-ag.uni-kl.de>
@
text
@d1 1
d22 1
a22 1
  <h2><font color=#e00000>OpenBSD Porting Checklist</font></h2>
d28 1
a28 1
  <a href=mailto:marc@@snafu.org>marc@@snafu.org</a>.
d37 1
a37 1
       OpenBSD cvs/web source brouser system
d50 1
a50 1
       This also verifies that the checksum created in step 3 is good.
d56 1
a56 1
       for openbsd.
d63 3
d81 1
a81 1
       to see what options are available.  Anything thay you may want to
d94 8
a101 5
       To repeat issue the command `make clean &amp;&amp; make configure'.
    <p>Note: make sure host dependent files go in /etc or /etc/<name>, but
       NEVER replace existing files in /etc.  Best to have install place
       in /usr/local/lib/<name> and then copy to /etc or /etc/<name> only
       the files do not exist.
d109 1
a109 1
   architecture dependent data		/usr/local/lib/<name>
d111 2
a112 2
					/usr/local/include/<name>
   single-machine data:			/etc or /etc/<name>
d116 2
a117 2
   read-only architecture-independent:	/usr/local/share/<name>
   misc documentation:			/usr/local/share/doc/<name>
d142 3
a144 2
     (max. 60 characters). Do NOT include the
        package name (or version number of the software) in the comment.
a159 1
<pre>
d161 2
a162 1
      $OpenBDS$
d202 4
a205 4
       in its proper location.  `pkg_delete <pkg_name>' is used to
       uninstall.  `sudo make reinstall' is used to reinstall.  See the
       `pkg_create' man page for other commands that may be added to PLIST
       to ensure all is cleaned up.  After an uninstall the command
d216 1
a216 1
	<LI>Distribute it!</BR>
d220 3
a222 3
	<UL>
		<LI>First, get others to test it on a variety of
		platforms (the DEC Alpha is good because it has only static libraries
d225 1
a225 1
		developed on SPARC, of course, you'd want it tested on i386).
d228 1
a228 1
		<LI>Incorporate any feedback you get. Test it again on your platform.
d230 1
a230 1
		<LI>Finally, include it in the "ports" tree.
d243 1
a243 1
		<PRE>
d248 1
a248 1
		</PRE>
d259 1
a259 1
		<PRE>
d277 1
a277 1
		</PRE>
d297 2
a298 2
  <a href=mailto:www@@openbsd.org>www@@openbsd.org</a>
  <br><small>$OpenBSD: checklist.html,v 1.12 1999/03/08 00:34:39 espie Exp $</small>
@


1.12
log
@Document SEPARATE_BUILD
@
text
@d187 1
a187 1
	<code>PLIST.noshared</nocode> describes the files installed on
d290 1
a290 1
  <br><small>$OpenBSD: checklist.html,v 1.11 1999/03/01 00:26:08 marc Exp $</small>
@


1.11
log
@reference new Makefile.template in checklist;
remove the Makefile that was embedded in the porting checklist;
Update port status
@
text
@d81 7
d119 13
d290 1
a290 1
  <br><small>$OpenBSD: checklist.html,v 1.10 1999/02/18 02:25:39 marc Exp $</small>
@


1.10
log
@update checklist; use NO_SHARED_LIBS instead of check for alpha;
note the use of PLIST.noshared in addition to PLIST
@
text
@d33 5
a37 2
   <li>Create Makefile -- start with this skeleton
       <a href="#makefile">makefile</a>.
a266 118
  <a name=makefile>
  <h2><font color=#e00000>Skeleton ports makefile</font></h2>
  </a>

  <code>;;;</code> indicates values that must be supplied by the
   porter.  <strong>Remove extraneous comments when done.</strong>
<pre>
# $OpenBSD: checklist.html,v 1.9 1998/12/21 23:30:59 espie Exp $
#

# What port/package will be created
#
DISTNAME=		;;;
#DIST_SUBDIR=		;;;
#PKGNAME=		;;;
CATEGORIES=     	;;;

# Reasons why the port/package shouldn't be built
#
#COMES_WITH=		2.3
#ONLY_FOR_ARCHS=	list architectures here
#BROKEN=		"reason"
#NO_CDROM=		"reason"
#RESTRICTED=		"reason"
#MIRROR_DISTFILE=	no

# where to send bitches about this port
#
MAINTAINER=		ports@@openbsd.org

# where the source files and patches can be fetched
#
MASTER_SITES=		;;;
#MASTER_SITE_SUBDIR=	;;;
#DISTFILES=		;;;
#PATCH_SITES=		;;;
#PATCHFILES=		;;;
#PATCH_DIST_STRIP=	-p0
#EXTRACT_SUFX=		.tar.Z
#EXTRACT_CMD=		;;;
#EXTRACT_BEFORE_ARGS=	;;;
#EXTRACT_AFTER_ARGS=	;;;

# Dependencies
#
#FETCH_DEPENDS=		;;;
#BUILD_DEPENDS=		;;;
#RUN_DEPENDS=		;;;
#LIB_DEPENDS=		;;;

# Is the build automagic or is it interactive
#
#IS_INTERACTIVE=	yes

# build/configuration variables
#
#USE_EGCC=		yes
#USE_EGXX=		yes
#USE_GMAKE=		yes
#USE_IMAKE=		yes
#USE_X11=		yes (assumed if USE_IMAKE is yes)
#USE_AUTOCONF=		yes
#GNU_CONFIGURE=		yes (assumed if USE_AUTOCONF is yes)
#HAS_CONFIGURE=		yes (assumed if GNU_CONFIGURE is yes)
#CONFIGURE_SCRIPT=	;;; (if other than configure)
#.if !defined(NO_SHARED_LIBS)
#CONFIGURE_ARGS+=	--enable-shared
#.endif
#CONFIGURE_ARGS+=	--enable-static
#CONFIGURE_ENV=		;;;

# Things that we don't want to do for this port/package
#
#NO_DEPENDS=		yes
#NO_WRKDIR=		yes
#NO_WRKSUBDIR=		yes
#NO_CHECKSUM=		yes
#NO_EXTRACT=		yes
#NO_PATCH=		yes
#NO_CONFIGURE=		yes
#NO_BUILD=		yes
#NO_INSTALL=		yes
#NO_MTREE=		yes
#NO_PACKAGE=		yes
#NO_PKG_REGISTER=	yes

# This section is only needed if man pages are distributed in compressed
# form.  Define MANCOMPRESSED and the man pages by section.  The pages
# will be uncompressed after being installed.
#
#MANCOMPRESSED=		yes
#MAN1=			;;;
#MAN3=			;;;
#MAN4=			;;;
#MAN5=			;;;
#MAN8=			;;;

# Overrides for default values
#
#MAKEFILE=		;;;
#MAKE_FLAGS=		;;;
#MAKE_ENV=		;;;
#SCRIPTS_ENV=		;;;
#LDFLAGS=		;;;
#WRKDIR=		;;; if other than work
#WRKSRC=		;;; if other than ${WRKDIR}/$DISTNAME

#ALL_TARGET=		;;;
#INSTALL_TARGET=	;;;

# This target may be necessary if a shared library may have been created
#
#post-install:
#	${LDCONFIG} -m ${PREFIX}/lib

.include &lt;bsd.port.mk>
</pre>
  <hr>
d270 1
a270 1
  <br><small>$OpenBSD: checklist.html,v 1.9 1998/12/21 23:30:59 espie Exp $</small>
@


1.9
log
@introduce pkg/SECURITY
@
text
@d161 7
d271 1
a271 1
# $OpenBSD: checklist.html,v 1.8 1998/12/03 06:09:17 marc Exp $
d320 2
d329 1
a329 1
#.if (${MACHINE_ARCH} != "alpha")
d385 1
a385 1
  <br><small>$OpenBSD: checklist.html,v 1.8 1998/12/03 06:09:17 marc Exp $</small>
@


1.8
log
@update skeleton makefile in porting checklist
@
text
@d86 1
d102 1
d121 19
d264 1
a264 1
# $OpenBSD: checklist.html,v 1.7 1998/11/19 04:14:56 espie Exp $
d376 1
a376 1
  <br><small>$OpenBSD: checklist.html,v 1.7 1998/11/19 04:14:56 espie Exp $</small>
@


1.7
log
@... and add corresponding documentation to checklist.html
@
text
@d241 1
a241 1
   porter.  Remove extraneous comments when done.
d243 1
a243 1
# $OpenBSD: checklist.html,v 1.6 1998/09/23 18:33:56 marc Exp $
d258 1
d260 1
a260 2
#NO_CDROM=		"reason"
#NO_PACKAGE=		"reason"
a273 3

# How to extract the sources
#
d295 2
a296 2

#GNU_CONFIGURE=		yes
d303 1
a303 2
#CONFIGURE_ENV=		${SETENV}

d317 2
d355 1
a355 1
  <br><small>$OpenBSD: checklist.html,v 1.6 1998/09/23 18:33:56 marc Exp $</small>
@


1.6
log
@update port status and skel Makefile
@
text
@d65 1
a65 1
    <p>The easiest way to re-run patches is to `make clean && make patch'.
d80 1
a80 1
       To repeat issue the command `make clean && make configure'.
d109 2
a110 1
     <p>COMMENT is the one-line description of the port. Do NOT include the
d243 1
a243 1
# $OpenBSD: checklist.html,v 1.5 1998/09/13 23:05:26 ian Exp $
d357 1
a357 1
  <br><small>$OpenBSD: checklist.html,v 1.5 1998/09/13 23:05:26 ian Exp $</small>
@


1.5
log
@Remind 'em to add to ../Makefile for completeness.
@
text
@d242 1
a242 6
# OpenBSD makefile for:	;;;
# Version required:	;;;
# Date created:		;;;
# Whom:			you@@your.domain
#
# $OpenBSD: checklist.html,v 1.4 1998/09/09 02:45:25 ian Exp $
d356 1
a356 1
  <br><small>$OpenBSD: checklist.html,v 1.4 1998/09/09 02:45:25 ian Exp $</small>
@


1.4
log
@Add a few of my own suggestions and lots of info from marc@@snafu
on how to put your port into the tree by the book.
@
text
@d218 3
d247 1
a247 1
# $OpenBSD: checklist.html,v 1.3 1998/08/16 00:16:31 marc Exp $
d361 1
a361 1
  <br><small>$OpenBSD: checklist.html,v 1.3 1998/08/16 00:16:31 marc Exp $</small>
@


1.3
log
@porting makefile template changes
@
text
@d30 3
d155 74
d230 1
d244 1
a244 1
# $OpenBSD: checklist.html,v 1.2 1998/08/01 00:27:34 marc Exp $
d358 1
a358 1
  <br><small>$OpenBSD: checklist.html,v 1.2 1998/08/01 00:27:34 marc Exp $</small>
@


1.2
log
@checklist.html
@
text
@d8 1
a8 1
	CONTENT="How to make an OpenBSD port; Marc's porting checklist">
d15 1
a15 1
  <title>Marc's Porting Checklist</title>
d21 1
a21 1
  <h2><font color=#e00000>Marc's Porting Checklist</font></h2>
d26 1
a26 1
  find it useful. Direct your questions and/or comments to me at
d166 1
a166 1
# $OpenBSD: checklist.html,v 1.1 1998/07/30 23:04:47 marc Exp $
d181 1
d183 1
a183 1
#RESTRICTED=		"reason"
d196 1
a243 1
#NO_PACKAGE=		yes
d280 1
a280 1
  <br><small>$OpenBSD: checklist.html,v 1.1 1998/07/30 23:04:47 marc Exp $</small>
@


1.1
log
@Fix pr 555; update port status; add a porting checklist page
@
text
@d166 1
a166 1
# $OpenBSD:$
a208 5
#OS_RELEASE!=		uname -r
#OS_HAS_XPM=		2.3
#.if ( ${OS_RELEASE} < ${OS_HAS_XPM} )
#LIB_DEPENDS+=		Xpm\\.4\\.:${PORTSDIR}/graphics/xpm
#.endif
d279 1
a279 1
  <br><small>$OpenBSD: porting.html,v 1.7 1998/07/30 14:58:43 espie Exp $</small>
@

