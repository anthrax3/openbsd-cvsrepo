head	1.7;
access;
symbols
	OPENBSD_6_0:1.6.0.16
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.14
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.12
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.10
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.8
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.6
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.8
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.4
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	v0_0:1.1.1.1
	xenocara:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2016.10.09.09.54.56;	author matthieu;	state Exp;
branches;
next	1.6;
commitid	7lTfdOAGjzufRCC2;

1.6
date	2012.10.06.15.41.12;	author shadchin;	state Exp;
branches;
next	1.5;

1.5
date	2011.10.16.17.18.56;	author shadchin;	state Exp;
branches;
next	1.4;

1.4
date	2011.06.06.19.45.44;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2011.01.10.14.42.48;	author shadchin;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.06.19.44.01;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.06.17.55.01;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.06.17.55.01;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Provide a default clean target now that bsd.subdir.mk doesn't.
@
text
@#	$OpenBSD: Makefile.inc,v 1.6 2012/10/06 15:41:12 shadchin Exp $

XKC_TOP?=	../../..
XKB_DIR=	${.CURDIR}/${XKC_TOP}/dist/xkeyboard-config
XKB_BASE=	${DESTDIR}${X11BASE}/share/X11/xkb

INSTALL_DIR=	${INSTALL} -d -o root -g wheel -m ${DIRMODE}

all:	_SUBDIRUSE

.if defined(DATA)
install:	${DATA} install-files _SUBDIRUSE
	test -z ${XKB_BASE}/${XKB_SUBDIR} || ${INSTALL_DIR} ${XKB_BASE}/${XKB_SUBDIR}
	@@for f in ${DATA}; do \
		echo ${INSTALL_DATA} ${XKB_DIR}/${XKB_SUBDIR}/$$f ${XKB_BASE}/${XKB_SUBDIR}/$$f; \
		${INSTALL_DATA} ${XKB_DIR}/${XKB_SUBDIR}/$$f ${XKB_BASE}/${XKB_SUBDIR}/$$f; \
	done
.else
install:	install-files _SUBDIRUSE
.endif

.if !target(intall-files)
install-files:
.endif

.if !target(clean)
clean:
.endif

.PATH: ${XKB_DIR}/${XKB_SUBDIR}
@


1.6
log
@Update to xkeyboard-config 2.7

ok matthieu@@, mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.5 2011/10/16 17:18:56 shadchin Exp $
d24 4
@


1.5
log
@Update to 2.4.1

ok jasper@@, matthieu@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.4 2011/06/06 19:45:44 matthieu Exp $
a5 1
XKBCOMP=	xkbcomp
a17 4
.if defined(DIR_DATA)
	cd ${XKB_BASE}/${XKB_SUBDIR} && ${XKBCOMP} -lfhlpR -o ${.OBJDIR}/${DIR_DATA} '*'
	${INSTALL_DATA} ${DIR_DATA} ${XKB_BASE}
.endif
a23 5
.endif

.if defined(DIR_DATA) && !target(clean)
clean:
	rm -f ${DIR_DATA}
@


1.4
log
@TOP is a too generic name for a Makefile variable. It may be
present in users' enviroment to confirure top(1). Rename it to
XKC_TOP. Problem noticed by naddy@@.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.3 2011/01/10 14:42:48 shadchin Exp $
d3 1
a3 1
XKC_TOP?=		../../..
d8 1
a8 1
INSTALL_DIR=	${INSTALL} -d -o ${SHAREOWN} -g ${SHAREGRP} -m ${DIRMODE}
a9 4
.if !target(all)
.if defined(DIR_DATA)
all:	_SUBDIRUSE ${DIR_DATA}
.else
a10 8
.endif
.endif

.if defined(DIR_DATA)
${DIR_DATA}:	${DATA}
	rm -f $@@
	cd ${XKB_DIR}/${XKB_SUBDIR} && ${XKBCOMP} -lfhlpR -o ${.OBJDIR}/$@@ '*'
.endif
d13 1
a13 1
install:	${DATA} install-dir install-files _SUBDIRUSE
d16 1
a16 2
		echo installing "$$f" ; \
		cmp -s ${XKB_DIR}/${XKB_SUBDIR}/$$f ${XKB_BASE}/${XKB_SUBDIR}/$$f || \
a18 4
.else
install:	install-dir install-files _SUBDIRUSE
.endif

d20 1
a20 2
install-dir:	${DIR_DATA}
	test -z ${XKB_BASE} || ${INSTALL_DIR} ${XKB_BASE}
d22 1
d24 1
a24 1
install-dir:
@


1.3
log
@Update makefile-wrapper for xkeyboard-config 2.0
ok matthieu
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.2 2009/06/06 19:44:01 matthieu Exp $
d3 2
a4 2
TOP?=		../../..
XKB_DIR=	${.CURDIR}/${TOP}/dist/xkeyboard-config
@


1.2
log
@Separate install-files target for 'rules' subdir.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1.1.1 2009/06/06 17:55:01 matthieu Exp $
d8 2
d12 1
a12 1
all:	 _SUBDIRUSE ${DIR_DATA}
d14 1
a14 1
all:	 _SUBDIRUSE
d18 2
a19 1
${DIR_DATA}: ${DATA}
d21 2
a22 1
	cd ${.CURDIR} && ${XKBCOMP} -lfhlpR -o ${.OBJDIR}/$@@ '*'
d24 1
d26 1
d28 7
a34 2
	echo installing "$$f" ; \
	cmp -s ${XKB_DIR}/${XKB_SUBDIR}/$$f ${XKB_BASE}/${XKB_SUBDIR}/$$f || ${INSTALL_DATA} ${XKB_DIR}/${XKB_SUBDIR}/$$f ${XKB_BASE}/${XKB_SUBDIR}/$$f; done
d37 3
a39 2
install-dir: ${DIR_DATA}
	${INSTALL_DATA} ${DIR_DATA} ${XKB_BASE}/${XKB_SUBDIR}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
#	$OpenBSD$
d20 1
a20 1
install:	${DATA} install-dir _SUBDIRUSE
d30 4
@


1.1.1.1
log
@BSD build system for xkeyboard-config. Work in progress.
@
text
@@
