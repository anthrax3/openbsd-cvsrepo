head	1.2;
access;
symbols
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.20
	OPENBSD_5_0:1.1.1.1.0.18
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.14
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.16
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.12
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v2_2_5:1.1.1.1
	fvwm:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2012.03.18.17.17.13;	author matthieu;	state dead;
branches;
next	1.1;

1.1
date	2006.11.26.10.53.10;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.10.53.10;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove the whole extras directory, not used in OpenBSD builds.
Noticed by fgsch@@ a while ago.
@
text
@#!/usr/bin/perl
# FvwmCommand script 
# Written by Toshi Isogai
#
# 1. auto focus Netscape dialog when opened
# 2. move download/upload window to right edge of the screen

# screen width
if( `xwininfo -root` =~ /Width: (\d+)/ ) {
	$SW = $1;
}else{
	# some resonable number if xwininfo doesn't work
	$SW = 1024;
}

# start a dedicated server
$fifo = "$ENV{'HOME'}/.FCMfocus";
system( "FvwmCommand 'FvwmCommandS $fifo'");
#for slow machine
select(undef,undef,undef,1);

# we need this to run this script in background job
$SIG{'TTIN'} = "IGNORE";

# start monitoring (-m option ) all fvwm transaction (-i3 option )
open( FCM, "FvwmCommand -f $fifo -m -i3 |" ) || die "FCM $fifo";

# send command through the new fifo which is "$fifo" + "C"
open( FCC, ">${fifo}C" ) || die "FCC $fifo" ;

# appearantly, it has be unbuffered
select( FCC ); $| = 1;
select( STDOUT ); $| = 1;


LOOP1: while( <FCM> ) {
	if( /^(0x[\da-f]+) add/ ) {
		$id = $1;

		while( <FCM> ) {
			
			# keep window frame
			if( /^$id frame\s+x -?\d+, y (-?\d+), width (\d+)/ ) {
				$y = $1;
				$width = $2;
				
				# search for class  line
			}elsif( /^$id class/ ) {
				
				if( !/\sNetscape/ ) {
					# not Netscape
					last;
				}
				
				# the next line should be resource line
				$_ = <FCM>; 
				
				# resource line tells what the window is
				if( /^$id resource/ ) {
					
					# search for Netscape popups
					if( /\s+\w+popup/ ) {
						
						# fvwm doesn't like commands from modules too fast
						select(undef,undef,undef, 0.4 );
						
						# focus it
						print FCC "windowid $id focus\n";
						
					}
					# search for Netscape download or upload window
					elsif( /\s+(Down|Up)load/ ) {
						select(undef,undef,undef, 0.4 );
						
						# move to the right edge, keep the whole window in screen
						$x = $SW - $width;
						print FCC "windowid $id move ${x}p ${y}p\n";
					}
					last;
				}
			}
		}
	}
}
print "end\n";




@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Importing from XF4, plus BSD make infrastructure
@
text
@@
