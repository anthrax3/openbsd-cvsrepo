head	1.2;
access;
symbols
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.20
	OPENBSD_5_0:1.1.1.1.0.18
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.14
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.16
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.12
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v2_2_5:1.1.1.1
	fvwm:1.1.1;
locks; strict;
comment	@ * @;


1.2
date	2012.03.18.17.17.13;	author matthieu;	state dead;
branches;
next	1.1;

1.1
date	2006.11.26.10.53.11;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.10.53.11;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove the whole extras directory, not used in OpenBSD builds.
Noticed by fgsch@@ a while ago.
@
text
@#include <iostream.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>
#include "WinBase.h"
#include "WinButton.h"

WinText::WinText(WinBase *Parent, int new_w,int new_h,
		      int new_x, int new_y, char *new_label):
     WinBase(Parent,new_w, new_h, new_x,new_y)
{
  XSetWindowAttributes attributes;      /* attributes for creating window */
  unsigned long mask;

  label = new_label;
  mask = CWBackPixel | CWEventMask;
  attributes.background_pixel = BackColor;
  attributes.event_mask = ExposureMask;
  twin = XCreateWindow(dpy,win,bw,bw,w-2*bw,h-2*bw,0,
		       CopyFromParent,InputOutput,CopyFromParent,
		       mask,&attributes);
  XMapWindow(dpy,twin);
  RegisterWindow(twin,this);
}

WinText::~WinText()
{
}

void WinText::SetLabel(char *new_label)
{
  label = new_label;
}



void WinText::DrawCallback(XEvent *event)
{
  int xoff,yoff;
  GC gc1;
  GC gc2;
  
  WinBase::DrawCallback(event);
  if(((!event)||(event->xexpose.count == 0))&&(label != NULL))
    {
      xoff = (w - XTextWidth(Font,label,strlen(label)))/2;
      yoff = h - 1 - (h - Font->ascent - Font->descent)/2 -Font->descent;
      XDrawString(dpy,twin,ForeGC, xoff-bw,yoff-bw,label,strlen(label));
    }
}

void WinText::ResizeCallback(int new_w, int new_h, XEvent *event)
{
  w = new_w;
  h = new_h;
  XResizeWindow(dpy,twin,new_w-2*bw,new_h-2*bw);
  RedrawWindow(1);
}

void WinText::SetBevelWidth(int new_bw)
{
  bw = new_bw;
  XMoveResizeWindow(dpy,twin,bw,bw,w-2*bw,h-2*bw);
  RedrawWindow(1);
}


void WinText::SetBackColor(char *newcolor = DEFAULT_BACKCOLOR)
{
  XSetWindowAttributes attributes;      /* attributes for creating window */
  unsigned long mask;

  mask = CWBackPixel;
  attributes.background_pixel = BackColor;
  XChangeWindowAttributes(dpy,twin, mask,&attributes);
  XClearWindow(dpy,twin);
  XChangeWindowAttributes(dpy,win, mask,&attributes);
  XClearWindow(dpy,win);
}

void WinText::RedrawWindow(int clear)
{
  if(clear)
    {
      XClearWindow(dpy,win);
      XClearWindow(dpy,twin);
    }
  DrawCallback(NULL);
}




@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Importing from XF4, plus BSD make infrastructure
@
text
@@
