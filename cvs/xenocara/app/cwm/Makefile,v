head	1.25;
access;
symbols
	OPENBSD_6_2:1.25.0.2
	OPENBSD_6_2_BASE:1.25
	OPENBSD_6_1:1.23.0.2
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.21.0.6
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.21.0.4
	OPENBSD_5_9_BASE:1.21
	OPENBSD_5_8:1.21.0.2
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.20.0.8
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.20.0.6
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.20.0.4
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.19.0.8
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.19.0.6
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.4
	OPENBSD_5_0:1.19.0.2
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.15.0.10
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.15.0.6
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.4
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.15.0.2
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_2:1.1.0.2
	OPENBSD_4_2_BASE:1.1;
locks; strict;
comment	@# @;


1.25
date	2017.07.14.17.23.38;	author okan;	state Exp;
branches;
next	1.24;
commitid	QxoXTrHFlALC56Vg;

1.24
date	2017.07.06.17.01.10;	author okan;	state Exp;
branches;
next	1.23;
commitid	xYtZiM0S5jIGIGyx;

1.23
date	2016.09.20.18.23.12;	author okan;	state Exp;
branches;
next	1.22;
commitid	W54eS2loMTaFClnB;

1.22
date	2016.09.20.18.21.32;	author okan;	state Exp;
branches;
next	1.21;
commitid	qCDEY2YHcX1pzTdR;

1.21
date	2015.06.26.15.21.58;	author okan;	state Exp;
branches;
next	1.20;
commitid	TlmnEeM7r3xmmliS;

1.20
date	2013.05.19.23.38.20;	author okan;	state Exp;
branches;
next	1.19;

1.19
date	2011.06.23.22.48.59;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2011.03.22.10.47.59;	author okan;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.08.20.48.59;	author matthieu;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.27.14.25.47;	author matthieu;	state Exp;
branches;
next	1.15;

1.15
date	2009.01.19.20.23.19;	author todd;	state Exp;
branches;
next	1.14;

1.14
date	2009.01.11.21.48.27;	author oga;	state Exp;
branches;
next	1.13;

1.13
date	2009.01.11.18.34.46;	author okan;	state Exp;
branches;
next	1.12;

1.12
date	2008.09.29.23.16.46;	author oga;	state Exp;
branches;
next	1.11;

1.11
date	2008.09.22.14.28.04;	author oga;	state Exp;
branches;
next	1.10;

1.10
date	2008.09.22.14.15.03;	author oga;	state Exp;
branches;
next	1.9;

1.9
date	2008.06.19.02.21.30;	author oga;	state Exp;
branches;
next	1.8;

1.8
date	2008.06.14.21.48.54;	author okan;	state Exp;
branches;
next	1.7;

1.7
date	2008.05.20.14.50.51;	author oga;	state Exp;
branches;
next	1.6;

1.6
date	2008.03.25.23.41.50;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2008.03.23.15.09.21;	author simon;	state Exp;
branches;
next	1.4;

1.4
date	2008.01.08.20.21.43;	author oga;	state Exp;
branches;
next	1.3;

1.3
date	2008.01.03.01.58.16;	author oga;	state Exp;
branches;
next	1.2;

1.2
date	2008.01.02.20.47.11;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	2007.04.27.18.01.38;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Pull over the remaining re-implemented window move/resize functions and create
a wrapper so that the key and mouse based move/resize callbacks can be unified.
This has already been done with other window operations and menus.
@
text
@# $OpenBSD: Makefile,v 1.24 2017/07/06 17:01:10 okan Exp $

.include <bsd.xconf.mk>

PROG=		cwm

SRCS=		calmwm.c screen.c xmalloc.c client.c menu.c \
		search.c util.c xutil.c conf.c xevents.c group.c \
		kbfunc.c parse.y

CPPFLAGS+=	-I${X11BASE}/include -I${X11BASE}/include/freetype2 -I${.CURDIR}

CFLAGS+=	-Wall
YFLAGS=
LDADD+=		-L${X11BASE}/lib -lXft -lXrender -lX11 -lxcb -lXau -lXdmcp \
		-lfontconfig -lexpat -lfreetype -lz -lXrandr -lXext

MANDIR=		${X11BASE}/man/man
MAN=		cwm.1 cwmrc.5

obj: _xenocara_obj

.include <bsd.prog.mk>
.include <bsd.xorg.mk>
@


1.24
log
@from src, by espie@@:
no need to generate y.tab.h if nothing uses it, set YFLAGS to nothing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/09/20 18:23:12 okan Exp $
d9 1
a9 1
		kbfunc.c mousefunc.c parse.y
@


1.23
log
@remove debug that accidentally snuck in
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/09/20 18:21:32 okan Exp $
d14 1
a14 1

@


1.22
log
@Get rid of curcc, instead cycle through the queue; removes the need for
client_none().
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/06/26 15:21:58 okan Exp $
d13 1
a13 1
CFLAGS+=	-Wall -g
@


1.21
log
@Replace screen region info gathering with XRandR equivalent of Xinerama
queries (currently act on XRandR events anyway). Fall-back mode without
XRandR is still what X provides. This removes -lXinerama.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/05/19 23:38:20 okan Exp $
d13 1
a13 1
CFLAGS+=	-Wall
@


1.20
log
@move the 2 small font helper functions to xutil.c
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/06/23 22:48:59 naddy Exp $
d16 1
a16 1
		-lfontconfig -lexpat -lfreetype -lz -lXinerama -lXrandr -lXext
@


1.19
log
@switch to installing source manuals:
* cope with new bsd.man.mk
* update imake configuration

ports use of imake remains unchanged
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/03/22 10:47:59 okan Exp $
d9 1
a9 1
		kbfunc.c mousefunc.c font.c parse.y
@


1.18
log
@move the single keycode function directly into the menu code.

ok oga@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/03/08 20:48:59 matthieu Exp $
d18 1
a18 1
MANDIR=		${X11BASE}/man/cat
a19 2

CLEANFILES=	cwm.cat1 cwmrc.cat5
@


1.17
log
@xcb is no longer optional.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/27 14:25:47 matthieu Exp $
d8 1
a8 1
		search.c util.c xutil.c conf.c input.c xevents.c group.c \
@


1.16
log
@Explicitely link libxcb when needed for static arches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/01/19 20:23:19 todd Exp $
a13 3
.if ${XENOCARA_BUILD_XCB:L} != "no"
LIBXCB=		-lxcb
.endif
d15 1
a15 1
LDADD+=		-L${X11BASE}/lib -lXft -lXrender -lX11 ${LIBXCB} -lXau -lXdmcp \
@


1.15
log
@library dependency ordering matters for static archs, -lXext last in this case
from matthieu@@, verified on vax
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/01/11 21:48:27 oga Exp $
d14 3
d18 1
a18 1
LDADD+=		-L${X11BASE}/lib -lXft -lXrender -lX11 -lXau -lXdmcp \
@


1.14
log
@Add -Wall to CFLAGS, it's helped find a few dodgy constructs.

ok okan@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/01/11 18:34:46 okan Exp $
d15 2
a16 2
LDADD+=		-L${X11BASE}/lib -lXft -lXrender -lX11 -lXau -lXdmcp -lXext \
		-lfontconfig -lexpat -lfreetype -lz -lXinerama -lXrandr
@


1.13
log
@- merge grab_sweep() into mousefunc_window_resize().
- merge grab_drag() into mousefunc_window_move().
- properly name, proto and static private functions.
- since we already do XMoveResizeWindow() and XMoveWindow() in (now)
mousefunc_window_resize() and mousefunc_window_move() respectively,
client_resize() and client_move() calls are unnecessary.

ok oga@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/09/29 23:16:46 oga Exp $
d12 2
@


1.12
log
@Xinerama and XRandR dual head support for cwm(1). Now we detect the xrandr
reconfiguration events and change our sizes depending on that. We also detect
the xinerama screens for maximize, vertmaximize and initial window placement.

This could be improved by automatically resizing maximized windows when
the screen resolution changes and by moving windows that would be hidden
into visible space. Said changes will come shortly.

Tested by many. matthieu@@ didn't oppose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/09/22 14:28:04 oga Exp $
d7 1
a7 1
SRCS=		calmwm.c screen.c xmalloc.c client.c grab.c menu.c \
@


1.11
log
@*sigh* Revert the diff that wasn't meant to go in yet.

note to self: When you mean to type cvs commit search.c, don't forget
the filename.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/06/19 02:21:30 oga Exp $
d14 1
a14 1
		-lfontconfig -lexpat -lfreetype -lz 
@


1.10
log
@Display the current window title not a previous one in the case of
``show all'' in the window search dialogue. Noticed and diff from Tim
van der Molen, thanks!
@
text
@d14 1
a14 1
		-lfontconfig -lexpat -lfreetype -lz -lXinerama -lXrandr
@


1.9
log
@Don't link "-lX11 -lXau -lXdmcp" twice.

From Martin Toft, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/06/14 21:48:54 okan Exp $
d14 1
a14 1
		-lfontconfig -lexpat -lfreetype -lz 
@


1.8
log
@confable menu and window mouse bindings from rivo nurges (thanks!) with
some minor fixups, man page bits and knf.

ok oga@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/05/20 14:50:51 oga Exp $
d13 2
a14 2
LDADD+=		-L${X11BASE}/lib -lXft -lXrender -lX11 -lXau -lXdmcp \
		-lfontconfig -lexpat -lfreetype -lz -lX11 -lXau -lXdmcp -lXext
@


1.7
log
@Pull out the behaviour in grab_label and search_start into one utility
function menu_filter(). The plan is to eventually merge in grab_menu too.
Shrinks the code a fair bit.

Also, change XMaskEvent for XWindowEvent to prevent getting exposes for other
windows. This is particuarly noticable on slow machines with a LOT of xterms
(todd, you're an odd man).

ok okan@@, todd@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/03/25 23:41:50 matthieu Exp $
d9 1
a9 1
		kbfunc.c font.c parse.y
@


1.6
log
@Introduce bsd.xconf.mk to set default config variables used
at several places in the Xenocara build in a central place instead
of duplicating the checks all over the place. ok oga@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/03/23 15:09:21 simon Exp $
d7 2
a8 2
SRCS=		calmwm.c screen.c xmalloc.c client.c grab.c search.c \
		util.c xutil.c conf.c input.c xevents.c group.c \
@


1.5
log
@Replace the symlink configuration scheme with a simple yacc parser as
found in other places of the tree.  Remove sticky and font commandline
options and add another one for alternative config locations.
Split off cwmrc(5) from cwm(1), nuke #ifdef __OpenBSD__ while there.

tested by various kind people, feedback from oga@@ and okan@@ - thanks!
ok oga@@, jasper@@, okan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/01/08 20:21:43 oga Exp $
d3 1
a3 3
.include <bsd.own.mk>

X11BASE?=	/usr/X11R6
@


1.4
log
@Kill some more dead code, cursor.c goes away.

ok marc@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/01/03 01:58:16 oga Exp $
d11 1
a11 1
		kbfunc.c font.c
d13 1
a13 1
CPPFLAGS+=	-I${X11BASE}/include -I${X11BASE}/include/freetype2
d19 1
d21 1
a21 1
CLEANFILES=	cwm.cat1
@


1.3
log
@Kill draw.c, nothing uses the code in it.

More dead code removals to come.

ok marc@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/01/02 20:47:11 marc Exp $
d11 1
a11 1
		kbfunc.c cursor.c font.c
@


1.2
log
@remove unused code
OK oga@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2007/04/27 18:01:38 bernd Exp $
d9 1
a9 1
SRCS=		calmwm.c draw.c screen.c xmalloc.c client.c grab.c search.c \
@


1.1
log
@Simple Makefile to build cwm.
@
text
@d1 1
a1 1
# $OpenBSD$
d10 1
a10 1
		util.c xutil.c conf.c input.c xevents.c group.c geographic.c \
@

