head	1.10;
access;
symbols
	OPENBSD_6_2:1.10.0.24
	OPENBSD_6_2_BASE:1.10
	OPENBSD_6_1:1.10.0.22
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.20
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.18
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.16
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.14
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.12
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.10
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.8
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.6
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.4
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.9.0.4
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.8.0.4
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.7.0.4
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.6.0.4
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.2
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	v1_0_6:1.1.1.2
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	v1_0_3:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2011.10.31.14.00.14;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.01.08.52.28;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2010.05.31.20.23.19;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2009.05.03.13.17.37;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2008.06.18.20.31.51;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2008.04.20.13.46.02;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2007.09.15.17.12.01;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.29.12.16.07;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.26.17.17.57;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.14.47.24;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.14.47.24;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.09.15.17.05.25;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Update to xinit 1.3.1
@
text
@# 
#  Copyright 2005  Red Hat, Inc.
# 
#  Permission to use, copy, modify, distribute, and sell this software and its
#  documentation for any purpose is hereby granted without fee, provided that
#  the above copyright notice appear in all copies and that both that
#  copyright notice and this permission notice appear in supporting
#  documentation, and that the name of Red Hat not be used in
#  advertising or publicity pertaining to distribution of the software without
#  specific, written prior permission.  Red Hat makes no
#  representations about the suitability of this software for any purpose.  It
#  is provided "as is" without express or implied warranty.
# 
#  RED HAT DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,
#  INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO
#  EVENT SHALL RED HAT BE LIABLE FOR ANY SPECIAL, INDIRECT OR
#  CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE,
#  DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
#  TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
#  PERFORMANCE OF THIS SOFTWARE.

SUBDIRS = man
if LAUNCHD
SUBDIRS += launchd
endif

bin_PROGRAMS = xinit
bin_SCRIPTS = startx

AM_CFLAGS = $(CWARNFLAGS) $(XINIT_CFLAGS)
AM_CPPFLAGS = -DXINITDIR=\"$(XINITDIR)\" -DBINDIR=\"$(bindir)\"
xinit_LDADD = $(XINIT_LIBS)

xinit_SOURCES =	\
        xinit.c

include $(top_srcdir)/cpprules.in

xinitrcdir = $(XINITDIR)

PROGCPPDEFS = \
	-DXRDB=@@XRDB@@ \
	-DXMODMAP=@@XMODMAP@@ \
	-DTWM=@@TWM@@ \
	-DXCLOCK=@@XCLOCK@@ \
	-DXTERM=@@XTERM@@ \
	-DXSERVER=@@XSERVER@@ \
	-DXAUTH=@@XAUTH@@ \
	-DXINIT=@@XINIT@@ \
	-DWM=@@WM@@ \
	-DXCONSOLE=@@XCONSOLE@@

CPP_FILES_FLAGS = \
	-DXINITDIR=$(XINITDIR) $(PROGCPPDEFS) -DLIBDIR=$(libdir) \
	-DSHELL_CMD=$(SHELL_CMD) $(STARTX_COOKIE_FLAGS) \
	-D__libexecdir__="$(libexecdir)" \
	-D__bindir__="$(bindir)" \
	-DBUNDLE_ID_PREFIX="$(bundleidprefix)"

xinitrc_DATA = xinitrc

MAINTAINERCLEANFILES = ChangeLog INSTALL
CLEANFILES = xinitrc startx $(launchagents_DATA)

EXTRA_DIST = xinitrc.cpp startx.cpp \
		autogen.sh

.PHONY: ChangeLog INSTALL

INSTALL:
	$(INSTALL_CMD)

ChangeLog:
	$(CHANGELOG_CMD)

dist-hook: ChangeLog INSTALL
@


1.9
log
@Update to xinit 1.3.0
@
text
@d22 5
a36 8
appmandir = $(APP_MAN_DIR)

appman_PRE = \
	startx.man \
        xinit.man

appman_DATA = $(appman_PRE:man=@@APP_MAN_SUFFIX@@)

d58 1
a58 13
	-DLAUNCHD_ID_PREFIX="$(launchdidprefix)"

if LAUNCHD
$(launchdidprefix).startx.plist.cpp: org.x.startx.plist.cpp
	cp $< $@@

launchagents_PRE = $(launchdidprefix).startx.plist.cpp
launchagents_DATA = $(launchagents_PRE:plist.cpp=plist)

SUBDIRS = privileged_startx
endif

DIST_SUBDIRS = privileged_startx
d63 1
a63 1
CLEANFILES = xinitrc startx $(appman_DATA) $(launchagents_DATA)
d65 1
a65 1
EXTRA_DIST = xinitrc.cpp startx.cpp org.x.startx.plist.cpp $(appman_PRE)	\
@


1.8
log
@Update to xinit 1.2.1
@
text
@d81 1
a81 1
		startx.cmd xinitrc.cmd xinit.def autogen.sh
@


1.7
log
@update to xinit 1.1.1
@
text
@a21 2
XINITDIR = $(datadir)/X11/xinit

d25 2
a26 1
xinit_CFLAGS = $(XINIT_CFLAGS) -DXINITDIR=\"$(XINITDIR)\" -DBINDIR=\"$(bindir)\"
d60 2
a61 1
	-D__bindir__="$(bindir)"
d64 4
a67 1
launchagents_PRE = org.x.startx.plist.cpp
d77 1
d81 3
a83 1
		startx.cmd xinitrc.cmd xinit.def ChangeLog autogen.sh
d85 2
a86 1
.PHONY: ChangeLog
d89 1
a89 1
	(GIT_DIR=$(top_srcdir)/.git git-log > .changelog.tmp && mv .changelog.tmp ChangeLog; rm -f .changelog.tmp) || (touch ChangeLog; echo 'git directory not found: installing possibly empty changelog.' >&2)
d91 1
a91 1
dist-hook: ChangeLog
@


1.6
log
@update to xinit 1.1.0.
@
text
@a71 3
xinitrc: xinitrc.cpp Makefile
startx: startx.cpp Makefile

@


1.5
log
@Update to xinit-1.0.8, while preserving local changes.
@
text
@a29 4
if APPLE
xinit_LDFLAGS = -framework CoreServices
endif

d64 4
a67 2
launchagents_PRE = org.x.X11.plist.pre
launchagents_DATA = $(launchagents_PRE:plist.pre=plist)
d70 2
d79 1
a79 1
EXTRA_DIST = xinitrc.cpp startx.cpp org.x.X11.plist.cpp $(appman_PRE)	\
@


1.4
log
@merge xinit 1.0.6
@
text
@d30 4
d45 1
a45 33
# Translate XCOMM into pound sign with sed, rather than passing -DXCOMM=XCOMM
# to cpp, because that trick does not work on all ANSI C preprocessors.
# Delete line numbers from the cpp output (-P is not portable, I guess).
# Allow XCOMM to be preceded by whitespace and provide a means of generating
# output lines with trailing backslashes.
# Allow XHASH to always be substituted, even in cases where XCOMM isn't.

CPP_SED_MAGIC = $(SED) -e '/^\#  *[0-9][0-9]*  *.*$$/d' \
                       -e '/^\#line  *[0-9][0-9]*  *.*$$/d' \
                       -e '/^[ 	]*XCOMM$$/s/XCOMM/\#/' \
                       -e '/^[ 	]*XCOMM[^a-zA-Z0-9_]/s/XCOMM/\#/' \
                       -e '/^[ 	]*XHASH/s/XHASH/\#/' \
                       -e '/\@@\@@$$/s/\@@\@@$$/\\/'

# Strings to replace in man pages
XORGRELSTRING = @@PACKAGE_STRING@@
  XORGMANNAME = X Version 11

MANDEFS =  \
	-D__xorgversion__="\"$(XORGRELSTRING)\" \"$(XORGMANNAME)\"" \
	-D__appmansuffix__=$(APP_MAN_SUFFIX) \
	-D__filemansuffix__=$(FILE_MAN_SUFFIX) \
	-D__libmansuffix__=$(LIB_MAN_SUFFIX) \
	-D__miscmansuffix__=$(MISC_MAN_SUFFIX) \
	-D__XSERVERNAME__=Xorg -D__XCONFIGFILE__=xorg.conf \
	-D__xinitdir__=$(XINITDIR) \
	-D__bindir__=$(bindir) \
	-DSHELL_CMD=$(SHELL_CMD) $(ARCHMANDEFS)

SUFFIXES = .$(APP_MAN_SUFFIX) .man

.man.$(APP_MAN_SUFFIX):
	$(RAWCPP) $(RAWCPPFLAGS) $(MANDEFS) $(EXTRAMANDEFS) < $< | $(CPP_SED_MAGIC) > $@@
d61 1
a61 1
SCRIPTDEFS = \
d63 8
a70 4
	-DSHELL_CMD=$(SHELL_CMD) $(STARTX_COOKIE_FLAGS)

xinitrc: xinitrc.cpp
	$(RAWCPP) $(SCRIPTDEFS) < $(srcdir)/xinitrc.cpp | $(CPP_SED_MAGIC) > $@@
d72 1
a73 1
	$(RAWCPP) $(SCRIPTDEFS) < $(srcdir)/startx.cpp | $(CPP_SED_MAGIC) > $@@
d77 1
a77 1
CLEANFILES = xinitrc startx $(appman_DATA)
d79 1
a79 1
EXTRA_DIST = xinitrc.cpp startx.cpp $(appman_PRE)	\
d81 2
@


1.3
log
@Install startup script in /etc/X11
@
text
@d67 1
d104 1
a104 1
		startx.cmd xinitrc.cmd xinit.def
d106 4
@


1.2
log
@OpenBSD customization:
- hack for XFree86 3.3.x X servers
- ssh-agent integration
- fvwm default window manager
@
text
@d22 1
a22 1
XINITDIR = $(libdir)/X11/xinit
@


1.1
log
@Initial revision
@
text
@d84 3
a86 1
	-DXINIT=@@XINIT@@
@


1.1.1.1
log
@Importing from X.Org indiviual releases
@
text
@@


1.1.1.2
log
@xinit 1.0.6
@
text
@a66 1
	-D__bindir__=$(bindir) \
d101 1
a101 1
		startx.cmd xinitrc.cmd xinit.def ChangeLog autogen.sh
a102 4
ChangeLog:
	(GIT_DIR=$(top_srcdir)/.git git-log > .changelog.tmp && mv .changelog.tmp ChangeLog; rm -f .changelog.tmp) || (touch ChangeLog; echo 'git directory not found: installing possibly empty changelog.' >&2)

dist-hook: ChangeLog
@

