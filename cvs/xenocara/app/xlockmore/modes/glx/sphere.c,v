head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_0:1.1.1.1.0.38
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.36
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.34
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.32
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.30
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.28
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.26
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.24
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.22
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.20
	OPENBSD_5_0:1.1.1.1.0.18
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.14
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.16
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.12
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v5_22:1.1.1.1
	xlockmore:1.1.1;
locks; strict;
comment	@ * @;


1.1
date	2006.11.26.11.09.09;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.11.09.09;	author matthieu;	state Exp;
branches;
next	;


desc
@@



1.1
log
@Initial revision
@
text
@/* sphere, Copyright (c) 1998 David Konerding <dek@@cgl.ucsf.edu>
 * Utility function to create a unit sphere in GL.
 *
 * Permission to use, copy, modify, distribute, and sell this software and its
 * documentation for any purpose is hereby granted without fee, provided that
 * the above copyright notice appear in all copies and that both that
 * copyright notice and this permission notice appear in supporting
 * documentation.  No representations are made about the suitability of this
 * software for any purpose.  It is provided "as is" without express or
 * implied warranty.
 *
 *  8-Oct-98: dek           Released initial version of "glplanet"
 * 21-Mar-01: jwz@@jwz.org   Broke sphere routine out into its own file.
 */

#ifdef STANDALONE
# include "xlockmore.h"   /* from the xscreensaver distribution */
#else  /* !STANDALONE */
# include "xlock.h"     /* from the xlockmore distribution */
#endif
#include <GL/glx.h>

/* Function for determining points on the surface of the sphere */
static void
parametric_sphere (float theta, float rho, GLfloat *vector)
{
  vector[0] = -sin(theta) * sin(rho);
  vector[1] = cos(theta) * sin(rho);
  vector[2] = cos(rho);
}


void
unit_sphere (int stacks, int slices, Bool wire)
{
  int i, j;
  float drho, dtheta;
  float rho, theta;
  GLfloat vector[3];
  GLfloat ds, dt, t, s;

  if (!wire)
    glShadeModel(GL_SMOOTH);

  /* Generate a sphere with quadrilaterals.
   * Quad vertices are determined using a parametric sphere function.
   * For fun, you could generate practically any parameteric surface and
   * map an image onto it.
   */
  drho = M_PI / stacks;
  dtheta = 2.0 * M_PI / slices;
  ds = 1.0 / slices;
  dt = 1.0 / stacks;

  glFrontFace(GL_CCW);
  glBegin (wire ? GL_LINE_LOOP : GL_QUADS);

  t = 0.0;
  for (i=0; i < stacks; i++) {
    rho = i * drho;
    s = 0.0;
    for (j=0; j < slices; j++) {
      theta = j * dtheta;

      glTexCoord2f (s,t);
      parametric_sphere (theta, rho, vector);
      glNormal3fv (vector);
      parametric_sphere (theta, rho, vector);
      glVertex3f (vector[0], vector[1], vector[2]);

      glTexCoord2f (s,t+dt);
      parametric_sphere (theta, rho+drho, vector);
      glNormal3fv (vector);
      parametric_sphere (theta, rho+drho, vector);
      glVertex3f (vector[0], vector[1], vector[2]);

      glTexCoord2f (s+ds,t+dt);
      parametric_sphere (theta + dtheta, rho+drho, vector);
      glNormal3fv (vector);
      parametric_sphere (theta + dtheta, rho+drho, vector);
      glVertex3f (vector[0], vector[1], vector[2]);

      glTexCoord2f (s+ds, t);
      parametric_sphere (theta + dtheta, rho, vector);
      glNormal3fv (vector);
      parametric_sphere (theta + dtheta, rho, vector);
      glVertex3f (vector[0], vector[1], vector[2]);

      s = s + ds;
    }
    t = t + dt;
  }
  glEnd();
}
@


1.1.1.1
log
@Importing xlockmore 5.22
@
text
@@
