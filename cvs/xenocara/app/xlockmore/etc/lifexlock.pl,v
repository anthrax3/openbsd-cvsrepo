head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_0:1.1.1.1.0.38
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.36
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.34
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.32
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.30
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.28
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.26
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.24
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.22
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.20
	OPENBSD_5_0:1.1.1.1.0.18
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.14
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.16
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.12
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v5_22:1.1.1.1
	xlockmore:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2006.11.26.11.08.06;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.11.08.06;	author matthieu;	state Exp;
branches;
next	;


desc
@@



1.1
log
@Initial revision
@
text
@#!/usr/bin/perl -T -w
# This is used  to reverse xlock format back to life

&search;

sub search {
    local ($row, $col, $NOTUSED, $x, $y);
    local (@@array);

    $HALFMAX = 64; # really 32 but being safe
    $MAXCOL = $MINCOL = $MAXROW = $MINROW = $HALFMAX;
    $NOTUSED = -127;
    $row = $col = $NOTUSED;
    $number = 0;
    while (<>) {
        if (!($_ =~ /^#/)) {
            @@chars = split(//);
	    $number = 0;
	    $col = $NOTUSED;
	    $negative = 1;
            foreach $c (@@chars) {
                if ($c =~ /[-]/) {
		    $negative = -1;
		} elsif ($c =~ /[0123456789]/) {
		    $number = $number * 10 + ($c - '0');
		} elsif ($c =~ /[,]/) { # Last number does not have a ","
		    if ($col > $NOTUSED) {
		        $row = $number * $negative;
                        $col = $col + $HALFMAX;
			$row = $row + $HALFMAX;
                        $array{$col, $row} = 1;
		        if ($col > $MAXCOL) {
			    $MAXCOL = $col;
		        } elsif ($col < $MINCOL) {
			    $MINCOL = $col;
                        }
		        if ($row > $MAXROW) {
 			    $MAXROW = $row;
		        } elsif ($row < $MINROW) {
			    $MINROW = $row;
                        }
	                $col = $NOTUSED;
		    } else {
			$col = $number * $negative;
                    }
		    $number = 0;
	    	    $negative = 1;
		} elsif ($c =~ /[{}\/]/) { # Last number does not have a ","
	            $col = $NOTUSED;
		    $number = 0;
	    	    $negative = 1;
                }
            }
        }
    }
    $x=$MAXCOL - $MINCOL + 1;
    $y=$MAXROW - $MINROW + 1;
    print "#x=$x, y=$y\n";
    for ($j = $MINROW; $j <= $MAXROW; $j++) {
        for ($i = $MINCOL; $i <= $MAXCOL; $i++) {
            if ($array{$i, $j}) {
                print "*";
 	    } else {
                print ".";
            }
        }
        print "\n";
    }
}
@


1.1.1.1
log
@Importing xlockmore 5.22
@
text
@@
