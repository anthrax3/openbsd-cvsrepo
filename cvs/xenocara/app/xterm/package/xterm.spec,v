head	1.26;
access;
symbols
	OPENBSD_6_2:1.26.0.2
	OPENBSD_6_2_BASE:1.26
	OPENBSD_6_1:1.25.0.2
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.23.0.4
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.21.0.4
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.21.0.2
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.17.0.2
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.15.0.2
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@-- @;


1.26
date	2017.07.15.19.20.51;	author matthieu;	state Exp;
branches;
next	1.25;
commitid	b9xPQ49d1NNt4zlu;

1.25
date	2016.11.03.14.25.07;	author matthieu;	state Exp;
branches;
next	1.24;
commitid	f4xcYrkdKFtVElPL;

1.24
date	2016.08.07.21.27.36;	author matthieu;	state Exp;
branches;
next	1.23;
commitid	psxxjI5z4Vpv2LL4;

1.23
date	2016.01.13.20.40.08;	author matthieu;	state Exp;
branches;
next	1.22;
commitid	by9Wu4LDAgU65dBU;

1.22
date	2015.09.05.14.11.46;	author matthieu;	state Exp;
branches;
next	1.21;
commitid	YVUODLQ4QcYTuGkb;

1.21
date	2015.01.18.20.24.40;	author matthieu;	state Exp;
branches;
next	1.20;
commitid	PDdlFuihcMifzxwp;

1.20
date	2014.12.18.20.16.55;	author matthieu;	state Exp;
branches;
next	1.19;
commitid	pCMhkpVdt9Oe52hU;

1.19
date	2014.11.02.10.29.03;	author matthieu;	state Exp;
branches;
next	1.18;
commitid	j3MNODFiitGCbwUd;

1.18
date	2014.10.05.16.39.19;	author matthieu;	state Exp;
branches;
next	1.17;
commitid	0wVJ6bWh03LWbUdn;

1.17
date	2014.07.14.08.30.11;	author matthieu;	state Exp;
branches;
next	1.16;
commitid	EnwNNUjlkdrocnMa;

1.16
date	2014.05.09.19.56.41;	author matthieu;	state Exp;
branches;
next	1.15;

1.15
date	2014.02.14.19.40.03;	author matthieu;	state Exp;
branches;
next	1.14;

1.14
date	2014.01.02.15.14.50;	author matthieu;	state Exp;
branches;
next	1.13;

1.13
date	2013.08.26.20.06.16;	author matthieu;	state Exp;
branches;
next	1.12;

1.12
date	2013.06.02.19.55.50;	author matthieu;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.09.14.45.39;	author matthieu;	state Exp;
branches;
next	1.10;

1.10
date	2013.01.04.16.40.18;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2012.06.07.20.20.24;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2012.04.14.09.02.46;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2011.11.16.21.14.25;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2011.09.17.11.51.57;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2011.08.28.17.40.55;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2011.08.18.19.47.43;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2011.06.07.19.21.06;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2011.03.07.20.41.27;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2010.11.29.20.10.09;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.26
log
@Update to xterm 330
@
text
@# $XTermId: xterm.spec,v 1.96 2017/06/12 21:34:51 tom Exp $
Summary: X terminal emulator (development version)
%global my_middle xterm
%global my_suffix -dev
%global fullname %{my_middle}%{my_suffix}
%global my_class XTermDev
Name: %{fullname}
Version: 330
Release: 1
License: X11
Group: User Interface/X
Source: xterm-%{version}.tgz
URL: ftp://invisible-island.net/xterm/
Provides: x-terminal-emulator

# This part (the build-requires) would be useful if the various distributions
# had provided stable package-naming, or virtual packages to cover transitions. 
# However, they have not done this in the past.
%define use_x_manpage %(test "x$_use_x_manpage" = xyes && echo 1 || echo 0)
%if "%{use_x_manpage}"

%global is_mandriva %(test -f /etc/mandriva-release && echo %{use_x_manpage} || echo 0)
%global is_redhat   %(test -f /etc/redhat-release && echo %{use_x_manpage} || echo 0)
%global is_suse     %(test -f /etc/SuSE-release && echo %{use_x_manpage} || echo 0)

%if %{is_mandriva}
BuildRequires: x11-docs
%else
%if %{is_redhat}
BuildRequires: xorg-x11-docs
%else
%if %{is_suse}
BuildRequires: xorg-docs
%endif
%endif
%endif

%endif

%description
xterm is the standard terminal emulator for the X Window System.
It provides DEC VT102 and Tektronix 4014 compatible terminals for
programs that cannot use the window system directly.  This version
implements ISO/ANSI colors, Unicode, and most of the control sequences
used by DEC VT220 terminals.

This package provides four commands:
 a) %{fullname}, which is the actual terminal emulator
 b) u%{fullname}, which is a wrapper around %{fullname}
    which sets %{fullname} to use UTF-8 encoding when
    the user's locale supports this,
 c) koi8r%{fullname}, a wrapper similar to u%{fullname}
    for locales that use the KOI8-R character set, and
 d) resize%{my_suffix}.

A complete list of control sequences supported by the X terminal emulator
is provided in /usr/share/doc/%{fullname}.

The %{fullname} program uses bitmap images provided by the xbitmaps package.

Those interested in using koi8r%{fullname} will likely want to install the
xfonts-cyrillic package as well.

This package is configured to use "%{fullname}" and "%{my_class}"
for the program and its resource class, to avoid conflict with other packages.

%prep

%global desktop_vendor  dickey

%define desktop_utils   %(if which desktop-file-install 2>&1 >/dev/null ; then echo 1 || echo 0 ; fi)
%define icon_theme  %(test -d /usr/share/icons/hicolor && echo 1 || echo 0)
%define apps_x11r6  %(test -d /usr/X11R6/lib/X11/app-defaults && echo 1 || echo 0)
%define apps_shared %(test -d /usr/share/X11/app-defaults && echo 1 || echo 0)
%define apps_syscnf %(test -d /etc/X11/app-defaults && echo 1 || echo 0)

%if %{apps_x11r6}
%define _xresdir    %{_prefix}/X11R6/lib/X11/app-defaults
%else
%if %{apps_shared}
%define _xresdir    %{_datadir}/X11/app-defaults
%else
%define _xresdir    %{_sysconfdir}/X11/app-defaults
%endif
%endif

%define _iconsdir   %{_datadir}/icons
%define _pixmapsdir %{_datadir}/pixmaps
%define my_docdir   %{_datadir}/doc/%{fullname}

# no need for debugging symbols...
%define debug_package %{nil}

%setup -q -n xterm-%{version}

%build
CPPFLAGS="-DMISC_EXP -DEXP_HTTP_HEADERS" \
%configure \
	--target %{_target_platform} \
	--prefix=%{_prefix} \
	--bindir=%{_bindir} \
	--datadir=%{_datadir} \
	--mandir=%{_mandir} \
%if "%{my_suffix}" != ""
	--program-suffix=%{my_suffix} \
	--without-xterm-symlink \
%endif
%if "%{icon_theme}"
	--with-icon-symlink \
	--with-icon-theme \
	--with-icondir=%{_iconsdir} \
%endif
	--with-app-class=%{my_class} \
	--disable-imake \
	--enable-256-color \
	--enable-88-color \
	--enable-dabbrev \
	--enable-dec-locator \
	--enable-exec-xterm \
	--enable-hp-fkeys \
	--enable-load-vt-fonts \
	--enable-logfile-exec \
	--enable-logging \
	--enable-mini-luit \
	--enable-paste64 \
	--enable-regis-graphics \
	--enable-sco-fkeys \
	--enable-screen-dumps \
	--enable-sixel-graphics \
	--enable-tcap-fkeys \
	--enable-tcap-query \
	--enable-toolbar \
	--enable-wide-chars \
	--enable-xmc-glitch \
	--with-app-defaults=%{_xresdir} \
	--with-pixmapdir=%{_pixmapsdir} \
	--with-own-terminfo=%{_datadir}/terminfo \
	--with-terminal-type=xterm-new \
	--with-utempter \
	--with-icon-name=mini.xterm \
	--with-xpm
make

chmod u+w XTerm.ad
cat >>XTerm.ad <<EOF
*backarrowKeyIsErase: true
*ptyInitialErase: true
EOF
ls -l *.ad

%install
rm -rf $RPM_BUILD_ROOT

# Usually do not use install-ti, since that will conflict with ncurses.
make install-bin install-man install-app install-icon \
%if "%{install_ti}" == "yes"
	install-ti \
%endif
	DESTDIR=$RPM_BUILD_ROOT \
	TERMINFO=%{_datadir}/terminfo

	mkdir -p $RPM_BUILD_ROOT%{my_docdir}
	cp \
		ctlseqs.txt \
		README.i18n \
		THANKS \
		xterm.log.html \
	$RPM_BUILD_ROOT%{my_docdir}/

	cp -r vttests \
	$RPM_BUILD_ROOT%{my_docdir}/

	# The scripts are readable, but not executable, to let find-requires
	# know that they do not depend on Perl packages.
	chmod 644 $RPM_BUILD_ROOT%{my_docdir}/vttests/*.pl

%if "%{desktop_utils}"
make install-desktop \
	DESKTOP_FLAGS="--vendor='%{desktop_vendor}' --dir $RPM_BUILD_ROOT%{_datadir}/applications"

test -n "%{my_suffix}" && \
( cd $RPM_BUILD_ROOT%{_datadir}/applications
	for p in *.desktop
	do
		mv $p `basename $p .desktop`%{my_suffix}.desktop
	done
)
%endif

%post
%if "%{icon_theme}"
touch --no-create %{_iconsdir}/hicolor
if [ -x %{_bindir}/gtk-update-icon-cache ]; then
  %{_bindir}/gtk-update-icon-cache %{_iconsdir}/hicolor || :
fi
%endif
# find-requires does not care about at this point
chmod +x %{my_docdir}/vttests/*.*

%postun
%if "%{icon_theme}"
touch --no-create %{_iconsdir}/hicolor
if [ -x %{_bindir}/gtk-update-icon-cache ]; then
  %{_bindir}/gtk-update-icon-cache %{_iconsdir}/hicolor || :
fi
%endif

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root,-)
%{_bindir}/koi8r%{fullname}
%{_bindir}/%{fullname}
%{_bindir}/u%{fullname}
%{_bindir}/resize%{my_suffix}
%{_mandir}/*/*
%{my_docdir}/*
%{_xresdir}/*XTerm*

%if "%{install_ti}" == "yes"
%{_datadir}/terminfo/*
%endif

%if "%{desktop_utils}"
%config(missingok) %{_datadir}/applications/%{desktop_vendor}-%{fullname}.desktop
%config(missingok) %{_datadir}/applications/%{desktop_vendor}-u%{fullname}.desktop
%endif

%if "%{icon_theme}"
%{_iconsdir}/hicolor/48x48/apps/%{fullname}*.png
%{_iconsdir}/hicolor/scalable/apps/%{fullname}*.svg
%endif
%{_pixmapsdir}/*%{fullname}*.xpm

# files added by --with-icon-symlink
%if "%{icon_theme}"
%{_iconsdir}/hicolor/xterm.png
%{_iconsdir}/hicolor/xterm.svg
%endif
%{_pixmapsdir}/xterm.xpm

%changelog

* Fri Jan 29 2016 Thomas E. Dickey
- use --enable-screen-dumps

* Mon May 27 2013 Thomas E. Dickey
- use --with-icon-symlink

* Mon Oct 08 2012 Thomas E. Dickey
- added to pixmapsdir

* Fri Jun 15 2012 Thomas E. Dickey
- modify to support icon theme

* Fri Oct 22 2010 Thomas E. Dickey
- initial version.
@


1.25
log
@Update to xterm 327
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.93 2016/10/02 23:18:09 tom Exp $
d8 1
a8 1
Version: 327
@


1.24
log
@Update to xterm-325. Testing by krw@@, shadchin@@ and naddy@@. Thanks
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.91 2016/05/12 23:25:56 tom Exp $
d8 1
a8 1
Version: 325
@


1.23
log
@Update to xterm 322. Tested by shadchin@@ and jsg@@. Thanks.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.87 2016/01/02 13:42:56 tom Exp $
d8 1
a8 1
Version: 322
d128 1
d244 3
@


1.22
log
@Update to xterm 320. Tested by jsg@@ Thanks.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.85 2015/08/26 21:52:20 tom Exp $
d8 1
a8 1
Version: 320
@


1.21
log
@xterm 314. tested by naddy@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.79 2014/12/01 09:54:46 tom Exp $
d8 1
a8 1
Version: 314
@


1.20
log
@Update to xterm 313. Tested by shadchin@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.78 2014/10/06 09:26:38 tom Exp $
d8 1
a8 1
Version: 313
@


1.19
log
@Update to xterm 312
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.77 2014/09/26 22:42:15 tom Exp $
d8 1
a8 1
Version: 312
@


1.18
log
@Update to xterm 311. ok shadchin@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.76 2014/07/28 21:36:30 tom Exp $
d8 1
a8 1
Version: 311
@


1.17
log
@Update to xterm-309. Version 308 tested by several people including
naddy@@ who found a small regression, fixed in 309.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.74 2014/07/13 15:29:11 tom Exp $
d8 1
a8 1
Version: 309
@


1.16
log
@Update to xterm 304. With help of shadchin@@

tested by ajacoutot@@ and shadchin@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.67 2014/04/10 00:27:40 tom Exp $
d8 1
a8 1
Version: 304
d126 1
a140 1
	copy config.status /tmp/
@


1.15
log
@Update to xterm 301
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.59 2013/12/09 12:59:32 tom Exp $
d8 1
a8 1
Version: 301
d13 1
a13 1
# URL: http://invisible-island.net/xterm/
d16 24
d73 1
d77 3
d85 1
d174 1
a174 1
	chmod 644 $RPM_BUILD_ROOT%{my_docdir}/vttests/*
d196 2
@


1.14
log
@Update to xterm-300. Tested  by ajacoutot@@ and shadchin@@.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.58 2013/12/03 23:59:13 tom Exp $
d8 1
a8 1
Version: 300
@


1.13
log
@Update to xterm 296. Sixel graphics disabled for now.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.54 2013/07/10 01:19:30 tom Exp $
d8 1
a8 1
Version: 296
@


1.12
log
@Update to xterm 293. Tested by naddy@@ ajacoutot@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.50 2013/05/27 15:17:47 tom Exp $
d8 1
a8 1
Version: 293
d98 1
@


1.11
log
@Update to xterm 291. Tested by many.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.45 2013/02/27 00:09:35 tom Exp $
d3 6
a8 2
Name: xterm-dev
Version: 291
d24 7
a30 6
 a) xterm, which is the actual terminal emulator
 b) uxterm, which is a wrapper around xterm which sets xterm to use UTF-8
    encoding when the user's locale supports this,
 c) koi8rxterm, a wrapper similar to uxterm for locales that use the
    KOI8-R character set, and
 d) resize.
d33 1
a33 1
is provided in /usr/share/doc/xterm.
d35 1
a35 1
The xterm program uses bitmap images provided by the xbitmaps package.
d37 1
a37 1
Those interested in using koi8rxterm will likely want to install the
d40 2
a41 2
This package is configured to use "xterm-dev" and "XTermDev" for the program
and its resource class, to avoid conflict with other packages.
d45 1
a45 4
%define my_suffix -dev
%define my_class XTermDev

%define desktop_vendor  dickey
d60 1
a60 1
%define my_docdir   %{_datadir}/doc/xterm%{my_suffix}
d80 1
d108 1
d180 3
a182 3
%{_bindir}/koi8rxterm%{my_suffix}
%{_bindir}/xterm%{my_suffix}
%{_bindir}/uxterm%{my_suffix}
d193 2
a194 2
%config(missingok) %{_datadir}/applications/%{desktop_vendor}-xterm%{my_suffix}.desktop
%config(missingok) %{_datadir}/applications/%{desktop_vendor}-uxterm%{my_suffix}.desktop
d198 2
a199 2
%{_iconsdir}/hicolor/48x48/apps/xterm*.png
%{_iconsdir}/hicolor/scalable/apps/xterm*.svg
d201 8
a208 1
%{_pixmapsdir}/*xterm*.xpm
d211 3
@


1.10
log
@Update to xterm 287. tested by mpi@@ and krw@@.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.40 2012/11/19 09:53:15 tom Exp $
d4 1
a4 1
Version: 287
d82 1
@


1.9
log
@Update to xterm 279. Tested by krw@@, mpi@@, shadchin@@.
@
text
@d1 2
a2 2
# $XTermId: xterm.spec,v 1.21 2012/03/15 00:32:52 tom Exp $
Summary: A text-based Web browser
d4 1
a4 1
Version: 279
d7 1
a7 1
Group: Applications/Internet
a43 1
%define desktop_utils   %(if which desktop-file-install 2>&1 >/dev/null ; then echo "yes" ; fi)
d45 2
d60 3
d77 4
a92 1
	--enable-rectangles \
d100 1
a100 1
	--with-icondir=%{_pixmapsdir} \
d103 3
a105 1
	--with-utempter
d141 1
a141 1
%if "%{desktop_utils}" == "yes"
d154 16
a180 1
%{_pixmapsdir}/xterm*.xpm
d187 1
a187 1
%if "%{desktop_utils}" == "yes"
d192 6
d199 6
@


1.8
log
@Update to xterm 278. Tested by mpi@@, shadchin@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.20 2012/01/12 13:10:21 tom Exp $
d4 1
a4 1
Version: 278
@


1.7
log
@Update to xterm 276. Tested by ajacoutot@@, krw@@, naddy@@, shadchin@@.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.18 2011/09/28 21:33:43 tom Exp $
d4 1
a4 1
Version: 276
@


1.6
log
@Update to xterm-275. Tested by jasper@@.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.17 2011/09/11 13:46:07 tom Exp $
d4 1
a4 1
Version: 275
@


1.5
log
@Update to xterm 273. Tested by marco@@, jasper@@.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.15 2011/08/25 09:42:35 tom Exp $
d4 1
a4 1
Version: 273
@


1.4
log
@Update to xterm 271. Tested by shadchin@@ and ajacoutot@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.13 2011/07/14 22:15:37 tom Exp $
d4 1
a4 1
Version: 271
@


1.3
log
@Update to xterm 270. Tested by ajacoutot@@, shadchin@@, krw@@ and jasper@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.9 2011/03/20 18:53:25 tom Exp $
d3 3
a5 3
Name: xterm
Version: dev
Release: 270
d8 1
a8 1
Source: xterm-%{release}.tgz
d35 3
d41 1
d59 1
a59 1
%setup -q -n xterm-%{release}
d73 1
a132 9
for p in *.desktop
do
	sed -i \
		-e 's/Categories=System;/Categories=Application;Utility;/' \
		-e 's/^\\(Name=.*\\)/\\1%{my_suffix}/' \
		-e 's/^\\(Exec=.*\\)/\\1%{my_suffix}/' \
	$p
done

@


1.2
log
@Update to xterm version 269.
Tested and ok ajacoutot@@, jasper@@, krw@@, shadchin@@
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.8 2011/02/14 00:19:58 tom Exp $
d5 1
a5 1
Release: 269
@


1.1
log
@Update to xterm 267. Tested by shadchin@@, jasper@@, ajacoutot@@.
@
text
@d1 1
a1 1
# $XTermId: xterm.spec,v 1.6 2010/11/10 23:45:54 tom Exp $
d5 1
a5 1
Release: 267
@

