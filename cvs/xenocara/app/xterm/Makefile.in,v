head	1.7;
access;
symbols
	OPENBSD_6_0:1.7.0.4
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.4
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.2
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.5.0.26
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.24
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.22
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.20
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.18
	OPENBSD_5_0:1.5.0.16
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.12
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.14
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.10
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.6
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	v232:1.1.1.4
	v229:1.1.1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	v225:1.1.1.2
	v216:1.1.1.1
	xterm:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2015.09.05.14.11.45;	author matthieu;	state Exp;
branches;
next	1.6;
commitid	YVUODLQ4QcYTuGkb;

1.6
date	2014.05.09.19.56.40;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2008.02.16.09.40.00;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2007.08.25.18.58.42;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2007.06.15.19.34.50;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.24.22.18.54;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.11.11.13;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.11.11.13;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.06.15.19.29.56;	author matthieu;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2007.08.25.18.53.28;	author matthieu;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2008.02.16.09.35.06;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to xterm 320. Tested by jsg@@ Thanks.
@
text
@## $XTermId: Makefile.in,v 1.234 2015/02/12 09:31:30 tom Exp $
# -----------------------------------------------------------------------------
# this file is part of xterm
#
# Copyright 1997-2014,2015 by Thomas E. Dickey
#
#                         All Rights Reserved
#
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the
# "Software"), to deal in the Software without restriction, including
# without limitation the rights to use, copy, modify, merge, publish,
# distribute, sublicense, and/or sell copies of the Software, and to
# permit persons to whom the Software is furnished to do so, subject to
# the following conditions:
#
# The above copyright notice and this permission notice shall be included
# in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
# IN NO EVENT SHALL THE ABOVE LISTED COPYRIGHT HOLDER(S) BE LIABLE FOR ANY
# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
# TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
# SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
#
# Except as contained in this notice, the name(s) of the above copyright
# holders shall not be used in advertising or otherwise to promote the
# sale, use or other dealings in this Software without prior written
# authorization.
# -----------------------------------------------------------------------------

SHELL		= /bin/sh

#### Start of system configuration section. ####

srcdir		= @@srcdir@@
VPATH  		= @@srcdir@@

x		= @@EXEEXT@@
o		= .@@OBJEXT@@

CC		= @@CC@@
CPP		= @@CPP@@
AWK		= @@AWK@@
LINK		= $(CC) $(CFLAGS)

CTAGS		= @@CTAGS@@
ETAGS		= @@ETAGS@@

LN_S		= @@LN_S@@
RM              = rm -f
LINT		= @@LINT@@

INSTALL		= @@INSTALL@@
INSTALL_PROGRAM	= @@INSTALL_PROGRAM@@
INSTALL_SCRIPT	= @@INSTALL_SCRIPT@@
INSTALL_DATA	= @@INSTALL_DATA@@
transform	= @@program_transform_name@@

EXTRA_CFLAGS	= @@EXTRA_CFLAGS@@
EXTRA_CPPFLAGS	= @@EXTRA_CPPFLAGS@@
EXTRA_LOADFLAGS	= @@IMAKE_LOADFLAGS@@

CPPFLAGS	= -I. -I$(srcdir) -DHAVE_CONFIG_H @@CPPFLAGS@@ -DDEFCLASS=\"@@APP_CLASS@@\" $(EXTRA_CPPFLAGS)
CFLAGS		= @@CFLAGS@@ $(EXTRA_CFLAGS)
LDFLAGS		= @@LDFLAGS@@ @@EXTRA_LDFLAGS@@
LIBS		= @@LIBS@@

prefix		= @@prefix@@
exec_prefix	= @@exec_prefix@@
datarootdir	= @@datarootdir@@
datadir		= @@datadir@@

manext		= 1
bindir		= @@bindir@@
libdir		= @@libdir@@
mandir		= @@mandir@@/man$(manext)
appsdir		= @@APPSDIR@@
icondir		= @@ICONDIR@@
pixmapdir	= @@PIXMAPDIR@@

#### End of system configuration section. ####

ICON_NAME	= @@ICON_NAME@@
ICON_SYMLINK	= @@ICON_SYMLINK@@

DESTDIR		=
BINDIR		= $(DESTDIR)$(bindir)
LIBDIR		= $(DESTDIR)$(libdir)
MANDIR		= $(DESTDIR)$(mandir)
APPSDIR		= $(DESTDIR)$(appsdir)

@@no_icondir@@ICONDIR		= $(DESTDIR)$(icondir)
@@no_pixmapdir@@PIXMAPDIR	= $(DESTDIR)$(pixmapdir)

INSTALL_DIRS    = $(BINDIR) $(APPSDIR) $(ICONDIR) $(PIXMAPDIR) $(MANDIR)

CLASS		= @@APP_CLASS@@
EXTRAHDR	= @@EXTRAHDRS@@
EXTRASRC	= @@EXTRASRCS@@
EXTRAOBJ	= @@EXTRAOBJS@@

          SRCS1 = button.c cachedGCs.c charproc.c charsets.c cursor.c \
	  	  data.c doublechr.c fontutils.c input.c \
		  linedata.c main.c menu.c misc.c \
		  print.c ptydata.c scrollback.c \
		  screen.c scrollbar.c tabs.c util.c version.c xstrings.c \
		  xtermcap.c VTPrsTbl.c $(EXTRASRC)
          OBJS1 = button$o cachedGCs$o charproc$o charsets$o cursor$o \
	  	  data$o doublechr$o fontutils$o input$o \
		  linedata$o main$o menu$o misc$o \
		  print$o ptydata$o scrollback$o \
		  screen$o scrollbar$o tabs$o util$o version$o xstrings$o \
		  xtermcap$o VTPrsTbl$o $(EXTRAOBJ)
          SRCS2 = resize.c version.c xstrings.c
          OBJS2 = resize$o version$o xstrings$o
           SRCS = $(SRCS1) $(SRCS2)
           OBJS = $(OBJS1) $(OBJS2)
           HDRS = VTparse.h data.h error.h main.h menu.h \
                  ptyx.h version.h xstrings.h xterm.h xtermcap.h $(EXTRAHDR)
       PROGRAMS = xterm$x resize$x

all :	$(PROGRAMS)
################################################################################
.SUFFIXES : .i .def .hin .$(manext) .ms .man .txt @@MAN2HTML_NOTE@@ .html @@GROFF_NOTE@@ .ps .pdf

.c$o :
	@@RULE_CC@@
	@@ECHO_CC@@$(CC) $(CPPFLAGS) $(CFLAGS) -c $(srcdir)/$*.c

.c.i :
	@@RULE_CC@@
	@@ECHO_CC@@$(CPP) -C $(CPPFLAGS) $*.c >$@@

.def.hin :
	grep '^CASE_' $< | $(AWK) '{printf "#define %s %d\n", $$1, n++}' >$@@

.man.$(manext) :
	$(SHELL) ./minstall "$(INSTALL_DATA)" $< $@@ $(appsdir) $(CLASS) $* $* $(pixmapdir)

@@NROFF_NOTE@@.$(manext).txt :
@@NROFF_NOTE@@	$(SHELL) -c "tbl $*.$(manext) | nroff -man | col -bx" >$@@
@@NROFF_NOTE@@
@@NROFF_NOTE@@.ms.txt :
@@NROFF_NOTE@@	$(SHELL) -c "tbl $*.$(manext) | nroff -ms | col -bx" >$@@
@@NROFF_NOTE@@

@@MAN2HTML_NOTE@@.$(manext).html :
@@MAN2HTML_NOTE@@	./@@MAN2HTML_TEMP@@ $* $(manext) man >$@@
@@MAN2HTML_NOTE@@
@@GROFF_NOTE@@.$(manext).ps :
@@GROFF_NOTE@@	$(SHELL) -c "tbl $*.$(manext) | groff -man" >$@@
@@GROFF_NOTE@@
@@GROFF_NOTE@@.$(manext).txt :
@@GROFF_NOTE@@	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.$(manext) | groff -Tascii -man | col -bx" >$@@
@@GROFF_NOTE@@
@@MAN2HTML_NOTE@@.ms.html :
@@MAN2HTML_NOTE@@	./@@MAN2HTML_TEMP@@ $* ms ms >$@@
@@MAN2HTML_NOTE@@
@@GROFF_NOTE@@.ms.ps :
@@GROFF_NOTE@@	$(SHELL) -c "tbl $< | groff -ms" >$@@
@@GROFF_NOTE@@
@@GROFF_NOTE@@.ms.txt :
@@GROFF_NOTE@@	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $< | groff -Tascii -ms | col -bx" >$@@
@@GROFF_NOTE@@
@@GROFF_NOTE@@.ps.pdf :
@@GROFF_NOTE@@	ps2pdf $*.ps
################################################################################
main$o : main.h
misc$o : version.h

$(OBJS1) : xterm.h ptyx.h xtermcfg.h
main$o resize$o screen$o : xterm_io.h

xterm$x : $(OBJS1)
	@@ECHO_LD@@$(SHELL) $(srcdir)/plink.sh $(LINK) $(LDFLAGS) -o $@@ $(OBJS1) $(LIBS) $(EXTRA_LOADFLAGS)

resize$x : $(OBJS2)
	@@ECHO_LD@@$(SHELL) $(srcdir)/plink.sh $(LINK) $(LDFLAGS) -o $@@ $(OBJS2) $(LIBS)

256colres.h :
	-$(RM) $@@
	perl $(srcdir)/256colres.pl > $@@

88colres.h :
	-$(RM) $@@
	perl $(srcdir)/88colres.pl > $@@

charproc$o : main.h @@CHARPROC_DEPS@@

misc$o : builtin_icons.h

# do this to quiet gcc -Wcast-qual warnings 
builtin_icons.h :
	@@echo "#if OPT_BUILTIN_XPMS" >$@@
	@@echo "#include <icons/mini.xterm.xpms>" >>$@@
	@@echo "#include <icons/filled-xterm.xpms>" >>$@@
	@@echo "#include <icons/xterm.xpms>" >>$@@
	@@echo "#include <icons/xterm-color.xpms>" >>$@@
	@@echo "#else" >>$@@
	@@sed -e 's/static char \* /static const char * /' $(srcdir)/icons/mini.xterm_48x48.xpm >>$@@
	@@echo "#endif" >>$@@
	@@echo "made $@@"

################################################################################
actual_xterm  = `echo xterm|        sed '$(transform)'`
actual_resize = `echo resize|       sed '$(transform)'`
actual_uxterm = `echo uxterm|       sed '$(transform)'`
actual_k8term = `echo koi8rxterm|   sed '$(transform)'`

binary_xterm  = $(actual_xterm)$x
binary_resize = $(actual_resize)$x
binary_uxterm = $(actual_uxterm)
binary_k8term = $(actual_k8term)

install \
install-bin \
install-full :: xterm$x resize$x $(BINDIR)
@@MAY_SETUID@@	$(SHELL) $(srcdir)/sinstall.sh @@SINSTALL_OPTS@@ "$(INSTALL_PROGRAM)" xterm$x  @@XTERM_PATH@@ $(BINDIR)/$(binary_xterm)
@@NOT_SETUID@@	$(INSTALL_PROGRAM) xterm$x $(BINDIR)/$(binary_xterm)
	$(INSTALL_PROGRAM) -m  755 resize$x $(BINDIR)/$(binary_resize)

EDIT_SCRIPT = sed -e s,=xterm,=\$$name, -e s,XTerm,$(CLASS),

InstallLink = \
	if test @@XTERM_SYMLINK@@ != NONE \
	&& test \$$source != NONE \
	&& test \$$source != \$$target ; then \
		cd \$$TARGET && ( \
			$(RM) \$$source ; \
			$(LN_S) \$$target \$$source ; \
			echo \"... created symbolic link:\" ; \
			ls -l \$$target \$$source ) ; \
	fi

InstallBinLink = TARGET=$(BINDIR); $(InstallLink)
InstallManLink = TARGET=$(MANDIR); $(InstallLink)

InstallScript = \
	echo \"... installing $(BINDIR)/\$$target\"; \
	name=$(binary_xterm); \
	$(EDIT_SCRIPT) $(srcdir)/\$$source >\$$source.tmp; \
	$(INSTALL_SCRIPT) -m  755 \$$source.tmp $(BINDIR)/\$$target; \
	$(RM) \$$source.tmp

install \
install-bin \
install-scripts \
install-full :: $(BINDIR)
	@@$(SHELL) -c "source=\"@@XTERM_SYMLINK@@\"; \
		target=\"$(binary_xterm)\"; \
		$(InstallBinLink)"
	@@$(SHELL) -c "source=\"resize\"; \
		target=\"$(binary_resize)\"; \
		$(InstallBinLink)"
	@@$(SHELL) -c "source=\"uxterm\"; \
		target=\"$(binary_uxterm)\"; \
		$(InstallScript); \
		$(InstallBinLink)"
	@@$(SHELL) -c "source=\"koi8rxterm\"; \
		target=\"$(binary_k8term)\"; \
		$(InstallScript); \
		$(InstallBinLink)"

install \
install-man \
install-full :: $(MANDIR)
	@@-$(SHELL) -c "for source in xterm resize uxterm koi8rxterm ; \
		do \
			target=\`echo \"\$$source\" | sed '@@program_transform_name@@'\`; \
			$(SHELL) ./minstall \"$(INSTALL_DATA)\" \
				$(srcdir)/\$$source.man  \
				$(MANDIR)/\$$target.$(manext) \
				$(appsdir) \
				$(CLASS) \
				\$$source \
				\$$target \
				$(pixmapdir); \
		done"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then \
		source=$(actual_xterm).$(manext); \
		target=@@XTERM_SYMLINK@@.$(manext); \
		cd $(MANDIR) && ( \
			$(RM) \$$target ; \
			$(LN_S) \$$source \$$target ; \
			echo '... created symbolic link:' ; \
			ls -l \$$source \$$target ; \
			) \
		fi"

APP_NAMES = XTerm UXTerm KOI8RXTerm

@@no_appsdir@@install \
@@no_appsdir@@install-app \
@@no_appsdir@@install-full :: $(APPSDIR)
@@no_appsdir@@	@@-$(SHELL) -c 'for s in $(APP_NAMES); \
@@no_appsdir@@	do \
@@no_appsdir@@		echo "** $$s"; \
@@no_appsdir@@		d=`echo $$s | sed -e s/XTerm/$(CLASS)/`; \
@@no_appsdir@@		echo installing $(APPSDIR)/$$d; \
@@no_appsdir@@		sed -e s/XTerm/$(CLASS)/ $(srcdir)/$$s.ad >XTerm.tmp; \
@@no_appsdir@@		$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/$$d; \
@@no_appsdir@@		echo installing $(APPSDIR)/$$d-color; \
@@no_appsdir@@		sed -e s/XTerm/$$d/ $(srcdir)/XTerm-col.ad >XTerm.tmp; \
@@no_appsdir@@		$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/$$d-color; \
@@no_appsdir@@	done'
@@no_appsdir@@	@@$(RM) XTerm.tmp
@@no_icondir@@	@@echo "... installed app-defaults"

@@no_icondir@@ICON_LIST = @@ICON_LIST@@
@@no_icondir@@ICON_THEME = @@ICON_THEME@@
@@no_icondir@@install \
@@no_icondir@@install-icon \
@@no_icondir@@install-full :: $(ICONDIR)
@@no_icondir@@	ACTUAL_XTERM=$(actual_xterm) \
@@no_icondir@@	$(SHELL) -c '\
@@no_icondir@@		h=$(ICONDIR)/$(ICON_THEME); \
@@no_icondir@@		for n in $(ICON_LIST); \
@@no_icondir@@		do \
@@no_icondir@@			x=$$ACTUAL_XTERM; \
@@no_icondir@@			l=`echo "$$n" | cut -f1 -d:`; \
@@no_icondir@@			r=`echo "$$n" | cut -f2 -d: |sed -e s,$(ICON_NAME),$$x-color,`; \
@@no_icondir@@			test -z "$$r" && continue; \
@@no_icondir@@			d=$$h/`echo "$$r" | sed -e "s,/[^/]*$$,,"`; \
@@no_icondir@@			test -d "$$d" || mkdir -p "$$d"; \
@@no_icondir@@			echo "installing icon $$h/$$r"; \
@@no_icondir@@			$(INSTALL_DATA) $$l $$h/$$r; \
@@no_icondir@@			s=`echo "$$r" | sed -e '"'s,^.*\.,.,'"'`; \
@@no_icondir@@			t=$(ICON_SYMLINK)$$s; \
@@no_icondir@@			b=`basename $$n $$s | sed -e "s,_[1-9][0-9]*x.*,,"`; \
@@no_icondir@@			if test "$(ICON_SYMLINK)" != NONE ; then \
@@no_icondir@@				if test "$$r" != "$$t" ; then \
@@no_icondir@@					if test "x$$b" = "x$(ICON_NAME)" ; then \
@@no_icondir@@						echo "linking $$r -> $$t"; \
@@no_icondir@@						( cd $$h; $(RM) $$t; $(LN_S) $$r $$t; ) \
@@no_icondir@@					fi \
@@no_icondir@@				fi \
@@no_icondir@@			fi \
@@no_icondir@@		done'
@@no_icondir@@	@@echo "... installed icons"

@@no_pixmapdir@@install \
@@no_pixmapdir@@install-icon \
@@no_pixmapdir@@install-full :: $(PIXMAPDIR)
@@no_pixmapdir@@	ACTUAL_XTERM=$(actual_xterm) \
@@no_pixmapdir@@	$(SHELL) -c '\
@@no_pixmapdir@@		h=$(PIXMAPDIR); \
@@no_pixmapdir@@		for n in $(srcdir)/icons/*xterm*_32x32.xpm $(srcdir)/icons/*xterm*_48x48.xpm; \
@@no_pixmapdir@@		do \
@@no_pixmapdir@@			l=`basename $$n`; \
@@no_pixmapdir@@			r=`echo "$$l" | sed -e "s,xterm,$$ACTUAL_XTERM,"`; \
@@no_pixmapdir@@			echo "installing pixmap $$h/$$r"; \
@@no_pixmapdir@@			$(INSTALL_DATA) $(srcdir)/icons/$$l $$h/$$r; \
@@no_pixmapdir@@			s=`echo "$$r" | sed -e '"'s,^.*\.,.,'"'`; \
@@no_pixmapdir@@			t=$(ICON_SYMLINK)$$s; \
@@no_pixmapdir@@			b=`basename $$n $$s | sed -e "s,_[1-9][0-9]*x.*,,"`; \
@@no_pixmapdir@@			if test "$(ICON_SYMLINK)" != NONE ; then \
@@no_pixmapdir@@				if test "x$$r" != "$$t" ; then \
@@no_pixmapdir@@					if test "x$$b" = "x$(ICON_NAME)" ; then \
@@no_pixmapdir@@						echo "linking $$r -> $$t"; \
@@no_pixmapdir@@						( cd $$h; $(RM) $$t; $(LN_S) $$r $$t; ) \
@@no_pixmapdir@@					fi \
@@no_pixmapdir@@				fi \
@@no_pixmapdir@@			fi \
@@no_pixmapdir@@		done'
@@no_pixmapdir@@	@@echo "... installed icons"

install ::
	@@echo 'Completed installation of executables and documentation.'
	@@echo 'Use "make install-ti" to install terminfo description.'

TERMINFO_DIR = @@TERMINFO_DIR@@
SET_TERMINFO = @@SET_TERMINFO@@

@@no_ticprog@@install-full \
@@no_ticprog@@install-ti :: $(TERMINFO_DIR)
@@no_ticprog@@	@@$(SHELL) -c "$(SET_TERMINFO) $(srcdir)/run-tic.sh $(srcdir)/terminfo"
@@no_ticprog@@	@@echo 'Completed installation of terminfo description.'

install-full \
install-tc ::
	@@-$(SHELL) -c "test -f /etc/termcap && echo 'You must install the termcap entry manually by editing /etc/termcap'"

installdirs : $(INSTALL_DIRS)
################################################################################

UninstallLink = \
	if test @@XTERM_SYMLINK@@ != NONE \
	&& test \$$source != NONE \
	&& test \$$source != \$$target \
	&& test -h \$$TARGET/\$$source ; then \
		echo \"... removing \$$TARGET/\$$source\"; \
		cd \$$TARGET && \
		$(RM) \$$source; \
	fi

UninstallBinLink = TARGET=$(BINDIR); $(UninstallLink)
UninstallManLink = TARGET=$(MANDIR); $(UninstallLink)

UninstallBinary = \
	echo \"... removing $(BINDIR)/\$$target\"; \
	$(RM) $(BINDIR)/\$$target

uninstall \
uninstall-bin \
uninstall-full ::
	@@-$(SHELL) -c "source=\"@@XTERM_SYMLINK@@\"; \
		target=\"$(binary_xterm)\"; \
		$(UninstallBinLink); \
		$(UninstallBinary)"
	@@-$(SHELL) -c "source=\"resize\"; \
		target=\"$(binary_resize)\"; \
		$(UninstallBinLink); \
		$(UninstallBinary)"

uninstall \
uninstall-bin \
uninstall-scripts \
uninstall-full ::
	@@-$(SHELL) -c "source=\"uxterm\"; \
		target=\"$(binary_uxterm)\"; \
		$(UninstallBinLink); \
		$(UninstallBinary)"
	@@-$(SHELL) -c "source=\"koi8rxterm\"; \
		target=\"$(binary_k8term)\"; \
		$(UninstallBinLink); \
		$(UninstallBinary)"

uninstall \
uninstall-man \
uninstall-full ::
	@@-$(SHELL) -c "\
		source=@@XTERM_SYMLINK@@.$(manext); \
		target=$(actual_xterm).$(manext); \
		$(UninstallManLink)"
	@@-$(SHELL) -c "for source in \
		$(actual_xterm).$(manext) \
		$(actual_resize).$(manext) \
		$(actual_uxterm).$(manext) \
		$(actual_k8term).$(manext); \
		do \
			echo \"... removing $(MANDIR)/\$$source\"; \
			$(RM) $(MANDIR)/\$$source; \
		done"

@@no_appsdir@@uninstall \
@@no_appsdir@@uninstall-app \
@@no_appsdir@@uninstall-full ::
@@no_appsdir@@	@@-$(SHELL) -c 'for s in $(APP_NAMES); \
@@no_appsdir@@	do \
@@no_appsdir@@		echo "** $$s"; \
@@no_appsdir@@		d=`echo $$s | sed -e s/XTerm/$(CLASS)/`; \
@@no_appsdir@@		echo uninstalling $(APPSDIR)/$$d; \
@@no_appsdir@@		$(RM) $(APPSDIR)/$$d; \
@@no_appsdir@@		echo uninstalling $(APPSDIR)/$$d-color; \
@@no_appsdir@@		$(RM) $(APPSDIR)/$$d-color; \
@@no_appsdir@@	done'

@@no_icondir@@uninstall \
@@no_icondir@@uninstall-icon \
@@no_icondir@@uninstall-full ::
@@no_icondir@@	-@@$(SHELL) -c 'for n in $(ICON_LIST); \
@@no_icondir@@		do \
@@no_icondir@@		x=$(actual_xterm); \
@@no_icondir@@		r=`echo "$$n" | sed -e s,\^.\*:,, -e s,xterm,$$x,`; \
@@no_icondir@@		test -z "$$r" && continue; \
@@no_icondir@@		h=$(ICONDIR)/$(ICON_THEME); \
@@no_icondir@@		echo removing $$h/$$r; \
@@no_icondir@@		$(RM) $$h/$$r; \
@@no_icondir@@		done'
@@no_icondir@@	@@echo "... removed icons"

@@no_pixmapdir@@uninstall \
@@no_pixmapdir@@uninstall-icon \
@@no_pixmapdir@@uninstall-full ::
@@no_pixmapdir@@	ACTUAL_XTERM=$(actual_xterm) \
@@no_pixmapdir@@	$(SHELL) -c 'for n in $(srcdir)/icons/*xterm*_32x32.xpm $(srcdir)/icons/*xterm*_48x48.xpm; \
@@no_pixmapdir@@		do \
@@no_pixmapdir@@			l=`basename $$n`; \
@@no_pixmapdir@@			r=`echo "$$l" | sed -e "s,xterm,$$ACTUAL_XTERM,"`; \
@@no_pixmapdir@@			echo removing $(PIXMAPDIR)/$$r; \
@@no_pixmapdir@@			$(RM) $(PIXMAPDIR)/$$r; \
@@no_pixmapdir@@		done'
@@no_pixmapdir@@	@@echo "... removed icons"
################################################################################
# Desktop-utils does not provide an uninstall, and is not uniformly available.
@@desktop_utils@@DESKTOP_FILES = $(srcdir)/xterm.desktop $(srcdir)/uxterm.desktop
@@desktop_utils@@DESKTOP_FLAGS = @@DESKTOP_FLAGS@@
@@desktop_utils@@install-desktop \
@@desktop_utils@@install-full ::
@@desktop_utils@@	ACTUAL_XTERM=$(actual_xterm) \
@@desktop_utils@@	$(SHELL) -c 'for n in $(DESKTOP_FILES); \
@@desktop_utils@@		do $(SHELL) df-install $$ACTUAL_XTERM $(DESKTOP_FLAGS) $$n; \
@@desktop_utils@@		done'
################################################################################
mostlyclean :
	-$(RM) *$o *.[is] XtermLog.* .pure core *~ *.bak *.BAK *.out *.tmp

clean : mostlyclean
	-$(RM) $(PROGRAMS) builtin_icons.h 

distclean :: clean
	-$(RM) Makefile config.status config.cache config.log xtermcfg.h
	-$(RM) df-install minstall

distclean \
docs-clean ::
	-$(RM) *.ps *.pdf *.png
	-$(SHELL) -c 'for p in xterm resize uxterm koi8rxterm; \
	do \
		$(RM) $$p.html $$p.$(manext) $$p.txt; \
	done'
	-$(RM) ctlseqs.html ctlseqs.$(manext)

distclean ::
	-$(RM) man2html.tmp

realclean : distclean
	-$(RM) tags TAGS

maintainer-clean : realclean
	-$(RM) 256colres.h 88colres.h
################################################################################
terminfo.out : terminfo		; tic -a -I -1 terminfo >$@@
termcap.out : termcap		; tic -a -C -U termcap >$@@
################################################################################
docs-ctlseqs \
docs :: $(srcdir)/ctlseqs.txt @@MAN2HTML_NOTE@@ ctlseqs.html @@GROFF_NOTE@@ ctlseqs.pdf ctlseqs.ps

ctlseqs.html : $(srcdir)/ctlseqs.ms
ctlseqs.pdf : ctlseqs.ps
ctlseqs.ps : $(srcdir)/ctlseqs.ms
ctlseqs.txt : $(srcdir)/ctlseqs.ms
################################################################################
docs-resize \
docs ::  resize.txt @@MAN2HTML_NOTE@@ resize.html @@GROFF_NOTE@@ resize.pdf resize.ps
resize.html : resize.$(manext)
resize.pdf : resize.ps
resize.ps : resize.$(manext)
resize.txt : resize.$(manext)
################################################################################
docs-xterm \
docs ::  xterm.txt @@MAN2HTML_NOTE@@ xterm.html @@GROFF_NOTE@@ xterm.pdf xterm.ps
xterm.html : xterm.$(manext)
xterm.pdf : xterm.ps
xterm.ps : xterm.$(manext)
xterm.txt : xterm.$(manext)
################################################################################
docs-uxterm \
docs ::  uxterm.txt @@MAN2HTML_NOTE@@ uxterm.html @@GROFF_NOTE@@ uxterm.pdf uxterm.ps
uxterm.html : uxterm.$(manext)
uxterm.pdf : uxterm.ps
uxterm.ps : uxterm.$(manext)
uxterm.txt : uxterm.$(manext)
################################################################################
docs-koi8rxterm \
docs ::  koi8rxterm.txt @@MAN2HTML_NOTE@@ koi8rxterm.html @@GROFF_NOTE@@ koi8rxterm.pdf koi8rxterm.ps
koi8rxterm.html : koi8rxterm.$(manext)
koi8rxterm.pdf : koi8rxterm.ps
koi8rxterm.ps : koi8rxterm.$(manext)
koi8rxterm.txt : koi8rxterm.$(manext)
################################################################################
lint :
	$(LINT) $(CPPFLAGS) $(SRCS1)
	$(LINT) $(CPPFLAGS) $(SRCS2)

tags :
	$(CTAGS) $(SRCS) $(HDRS)

TAGS :
	$(ETAGS) $(SRCS) $(HDRS)

$(TERMINFO_DIR) $(INSTALL_DIRS) :
	mkdir -p $@@

ALWAYS :

depend : $(TABLES)
	makedepend -- $(CPPFLAGS) -- $(SRCS)

# DO NOT DELETE THIS LINE -- make depend depends on it.
@


1.6
log
@Update to xterm 304. With help of shadchin@@

tested by ajacoutot@@ and shadchin@@
@
text
@d1 1
a1 1
## $XTermId: Makefile.in,v 1.225 2014/03/01 15:15:26 tom Exp $
d5 1
a5 1
# Copyright 1997-2013,2014 by Thomas E. Dickey
d127 1
a127 1
.SUFFIXES : .i .def .hin .$(manext) .ms .man .txt @@GROFF_NOTE@@ .html .ps .pdf
d150 3
a152 3
@@GROFF_NOTE@@.$(manext).html :
@@GROFF_NOTE@@	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.$(manext) | groff -P -o0 -I$*_ -Thtml -man" >$@@
@@GROFF_NOTE@@
d159 3
a161 3
@@GROFF_NOTE@@.ms.html :
@@GROFF_NOTE@@	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $< | groff -P -o0 -I$*_ -Thtml -ms" >$@@
@@GROFF_NOTE@@
d184 1
a184 1
	-rm -f $@@
d188 1
a188 1
	-rm -f $@@
d227 21
d251 15
a265 21
install-full ::
	@@$(SHELL) -c "name=\"$(binary_xterm)\"; \
		dest=\"$(binary_uxterm)\"; \
		echo \"... installing $(BINDIR)/\$$dest\"; \
		$(EDIT_SCRIPT) $(srcdir)/uxterm >uxterm.tmp; \
		$(INSTALL_SCRIPT) -m  755 uxterm.tmp $(BINDIR)/\$$dest; \
		rm -f uxterm.tmp"
	@@$(SHELL) -c "name=\"$(binary_xterm)\"; \
		dest=\"$(binary_k8term)\"; \
		echo \"... installing $(BINDIR)/\$$dest\"; \
		$(EDIT_SCRIPT) $(srcdir)/koi8rxterm >k8term.tmp; \
		$(INSTALL_SCRIPT) -m  755 k8term.tmp $(BINDIR)/\$$dest; \
		rm -f k8term.tmp"
	@@-$(SHELL) -c "name=\"$(binary_xterm)\"; \
		if test @@XTERM_SYMLINK@@ != NONE ; then \
		cd $(BINDIR) && ( \
			rm -f @@XTERM_SYMLINK@@ ; \
			$(LN_S) \$$name @@XTERM_SYMLINK@@ ; \
			echo \"... created symbolic link:\" ; \
			ls -l \$$name @@XTERM_SYMLINK@@ ) ; \
		fi"
d270 1
a270 1
	@@-$(SHELL) -c "for app in xterm resize uxterm koi8rxterm ; \
d272 9
a280 2
			actual=\`echo \"\$$app\" | sed '@@program_transform_name@@'\`; \
			$(SHELL) ./minstall \"$(INSTALL_DATA)\" $(srcdir)/\$$app.man  $(MANDIR)/\$$actual.$(manext) $(appsdir) $(CLASS) \$$app \$$actual $(pixmapdir); \
d282 10
a291 3
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && rm -f @@XTERM_SYMLINK@@.$(manext) ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && $(LN_S) $(actual_xterm).$(manext) @@XTERM_SYMLINK@@.$(manext) ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && echo '... created symbolic link:' && ls -l $(actual_xterm).$(manext) @@XTERM_SYMLINK@@.$(manext) ; fi"
d309 1
a309 1
@@no_appsdir@@	@@rm -f XTerm.tmp
d337 1
a337 1
@@no_icondir@@						( cd $$h; rm -f $$t; $(LN_S) $$r $$t; ) \
d363 1
a363 1
@@no_pixmapdir@@						( cd $$h; rm -f $$t; $(LN_S) $$r $$t; ) \
d388 18
d409 8
a416 3
	-$(RM) $(BINDIR)/$(binary_xterm)
	-$(RM) $(BINDIR)/$(binary_resize)
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@; fi"
d422 8
a429 2
	-$(RM) $(BINDIR)/$(binary_uxterm)
	-$(RM) $(BINDIR)/$(binary_k8term)
d434 13
a446 5
	-$(RM) $(MANDIR)/$(actual_xterm).$(manext)
	-$(RM) $(MANDIR)/$(actual_resize).$(manext)
	-$(RM) $(MANDIR)/$(actual_uxterm).$(manext)
	-$(RM) $(MANDIR)/$(actual_k8term).$(manext)
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && rm -f @@XTERM_SYMLINK@@.$(manext); fi"
d517 3
d530 1
a530 5
docs :: \
	$(srcdir)/ctlseqs.txt \
@@GROFF_NOTE@@	ctlseqs.html \
@@GROFF_NOTE@@	ctlseqs.pdf \
@@GROFF_NOTE@@	ctlseqs.ps
d538 1
a538 1
docs ::  resize.txt @@GROFF_NOTE@@ resize.html resize.pdf resize.ps
d545 1
a545 1
docs ::  xterm.txt @@GROFF_NOTE@@ xterm.html xterm.pdf xterm.ps
d552 1
a552 1
docs ::  uxterm.txt @@GROFF_NOTE@@ uxterm.html uxterm.pdf uxterm.ps
d559 1
a559 1
docs ::  koi8rxterm.txt @@GROFF_NOTE@@ koi8rxterm.html koi8rxterm.pdf koi8rxterm.ps
@


1.5
log
@Merge xterm 232.
New local change: default value for pointerMode is 0.
@
text
@d1 32
a32 22
## $XTermId: Makefile.in,v 1.155 2008/01/05 14:26:52 tom Exp $
##
## Copyright 2002-2006,2007 by Thomas E. Dickey
##
##                         All Rights Reserved
##
## Permission to use, copy, modify, and distribute this software and its
## documentation for any purpose and without fee is hereby granted,
## provided that the above copyright notice appear in all copies and that
## both that copyright notice and this permission notice appear in
## supporting documentation, and that the name of the above listed
## copyright holder(s) not be used in advertising or publicity pertaining
## to distribution of the software without specific, written prior
## permission.
##
## THE ABOVE LISTED COPYRIGHT HOLDER(S) DISCLAIM ALL WARRANTIES WITH REGARD
## TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
## AND FITNESS, IN NO EVENT SHALL THE ABOVE LISTED COPYRIGHT HOLDER(S) BE
## LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
## WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
## ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
## OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
d49 3
d66 1
a66 1
CPPFLAGS	= -I. -I$(srcdir) -DHAVE_CONFIG_H @@CPPFLAGS@@ $(EXTRA_CPPFLAGS)
d68 1
a68 1
LDFLAGS		= @@LDFLAGS@@
d73 2
d80 3
a82 2
appsdir		= @@appsdir@@
icondir		= @@icondir@@
d86 4
a89 1
DESTDIR		?=
a93 1
ICONDIR		= $(DESTDIR)$(icondir)
d95 2
a96 1
INSTALL_DIRS    = $(BINDIR) $(APPSDIR) $(ICONDIR) $(MANDIR)
d98 3
a100 1
CLASS		= XTerm
d107 4
a110 3
		  $(MAINSRC) menu.c misc.c print.c ptydata.c \
		  screen.c scrollbar.c tabs.c util.c xstrings.c xtermcap.c \
		  VTPrsTbl.c $(EXTRASRC)
d113 6
a118 5
		  main$o menu$o misc$o print$o ptydata$o \
		  screen$o scrollbar$o tabs$o util$o xstrings$o xtermcap$o \
		  VTPrsTbl$o $(EXTRAOBJ)
          SRCS2 = resize.c xstrings.c
          OBJS2 = resize$o xstrings$o
d121 1
a121 1
           HDRS = VTparse.h data.h error.h main.h menu.h proto.h \
d127 1
a127 1
.SUFFIXES : .i .def .hin .html .$(manext) .ms .man .ps .pdf .txt
d130 1
a130 1
@@RULE_CC@@
d134 1
a134 1
@@RULE_CC@@
d141 1
a141 16
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/xterm.man $@@ $(appsdir)

.$(manext).html :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.$(manext) | groff -Thtml -man" >$@@

.$(manext).ps :
	$(SHELL) -c "tbl $*.$(manext) | groff -man" >$@@

.$(manext).txt :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.$(manext) | nroff -Tascii -man | col -bx" >$@@

.ms.html :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.ms | groff -Thtml -ms" >$@@

.ms.ps :
	$(SHELL) -c "tbl $*.ms | groff -ms" >$@@
d143 27
a169 5
.ms.txt :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.ms | nroff -Tascii -ms | col -bx" >$@@

.ps.pdf :
	ps2pdf $*.ps
d178 1
a178 1
	@@ECHO_LD@@$(LINK) $(LDFLAGS) -o $@@ $(OBJS1) $(LIBS) $(EXTRA_LOADFLAGS)
d192 15
d224 27
a250 21
	@@$(SHELL) -c 'echo "... installing $(BINDIR)/$(binary_uxterm)"; \
		if test "$(binary_xterm)" != "xterm"; then \
			name="$(binary_xterm)"; \
			sed -e "s,=xterm,=$$name," $(srcdir)/uxterm >uxterm.tmp; \
			$(INSTALL_SCRIPT) -m  755 uxterm.tmp $(BINDIR)/$(binary_uxterm); \
			rm -f uxterm.tmp; \
		else \
			$(INSTALL_SCRIPT) -m  755 $(srcdir)/uxterm $(BINDIR)/$(binary_uxterm); \
		fi'
	@@$(SHELL) -c 'echo "... installing $(BINDIR)/$(binary_k8term)"; \
		if test "$(binary_xterm)" != "xterm"; then \
			name="$(binary_xterm)"; \
			sed -e "s,=xterm,=$$name," $(srcdir)/koi8rxterm >k8term.tmp; \
			$(INSTALL_SCRIPT) -m  755 k8term.tmp $(BINDIR)/$(binary_k8term); \
			rm -f k8term.tmp; \
		else \
			$(INSTALL_SCRIPT) -m  755 $(srcdir)/koi8rxterm $(BINDIR)/$(binary_k8term); \
		fi'
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@ ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && $(LN_S) $(binary_xterm) @@XTERM_SYMLINK@@ ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && echo '... created symbolic link:' && ls -l $(binary_xterm) @@XTERM_SYMLINK@@ ; fi"
d255 5
a259 4
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/xterm.man    $(MANDIR)/$(actual_xterm).$(manext)  $(appsdir)
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/resize.man   $(MANDIR)/$(actual_resize).$(manext) $(appsdir)
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/uxterm.man   $(MANDIR)/$(actual_uxterm).$(manext) $(appsdir)
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/koi8rxterm.man   $(MANDIR)/$(actual_k8term).$(manext) $(appsdir)
d264 2
d269 11
a279 12
@@no_appsdir@@	@@echo installing $(APPSDIR)/$(CLASS)
@@no_appsdir@@	@@sed -e s/XTerm/$(CLASS)/ $(srcdir)/XTerm.ad >XTerm.tmp
@@no_appsdir@@	@@$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/$(CLASS)
@@no_appsdir@@	@@echo installing $(APPSDIR)/$(CLASS)-color
@@no_appsdir@@	@@sed -e s/XTerm/$(CLASS)/ $(srcdir)/XTerm-col.ad >XTerm.tmp
@@no_appsdir@@	@@$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/$(CLASS)-color
@@no_appsdir@@	@@echo installing $(APPSDIR)/UXTerm
@@no_appsdir@@	@@sed -e s/XTerm/$(CLASS)/ $(srcdir)/UXTerm.ad >XTerm.tmp
@@no_appsdir@@	@@$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/UXTerm
@@no_appsdir@@	@@echo installing $(APPSDIR)/KOI8RXTerm
@@no_appsdir@@	@@sed -e s/XTerm/$(CLASS)/ $(srcdir)/KOI8RXTerm.ad >XTerm.tmp
@@no_appsdir@@	@@$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/KOI8RXTerm
d283 2
d288 25
a312 4
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm-color_32x32.xpm $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm-color_48x48.xpm $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm_32x32.xpm $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm_48x48.xpm $(ICONDIR)
d315 26
d348 4
a351 4
install-full \
install-ti :: $(TERMINFO_DIR)
	@@$(SHELL) -c "$(SET_TERMINFO) $(srcdir)/run-tic.sh $(srcdir)/terminfo"
	@@echo 'Completed installation of terminfo description.'
d364 6
a371 1
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@; fi"
d385 9
a393 3
@@no_appsdir@@	-$(RM) $(APPSDIR)/$(CLASS)
@@no_appsdir@@	-$(RM) $(APPSDIR)/$(CLASS)-color
@@no_appsdir@@	-$(RM) $(APPSDIR)/UXTerm
d398 23
a420 4
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm-color_32x32.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm_32x32.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm-color_48x48.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm_48x48.xpm
d423 1
d427 4
a430 2
@@desktop_utils@@	desktop-file-install $(DESKTOP_FLAGS) xterm.desktop
@@desktop_utils@@	desktop-file-install $(DESKTOP_FLAGS) uxterm.desktop
d436 1
a436 1
	-$(RM) $(PROGRAMS)
d438 1
a438 1
distclean : clean
d440 4
d445 4
a448 1
	-$(RM) xterm.html xterm.$(manext) xterm.txt
d460 8
a467 1
ctlseqs.html : ctlseqs.ms
d469 2
a470 2
ctlseqs.ps : ctlseqs.ms
ctlseqs.txt : ctlseqs.ms
d472 9
d486 14
d505 1
a505 1
	ctags $(SRCS) $(HDRS)
d508 1
a508 1
	etags $(SRCS) $(HDRS)
d511 1
a511 1
	$(SHELL) ${srcdir}/mkdirs.sh $@@
@


1.4
log
@update to xterm 229. Tested on various architectures by aanriot@@
@
text
@d1 1
a1 3
## $XTermId: Makefile.in,v 1.148 2007/06/16 18:47:51 tom Exp $
##
## $XFree86: xc/programs/xterm/Makefile.in,v 3.56 2006/06/19 00:36:50 dickey Exp $ ##
d163 4
a166 3
actual_xterm  = `echo xterm|    sed '$(transform)'`
actual_resize = `echo resize|   sed '$(transform)'`
actual_uxterm = `echo uxterm|   sed '$(transform)'`
d171 1
d188 9
d206 2
d224 3
d263 1
d271 2
d286 2
a287 2
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm_48x48.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm-color_32x32.xpm
d314 3
@


1.3
log
@Merge xterm version 225
@
text
@d1 1
a1 1
## $XTermId: Makefile.in,v 1.145 2007/03/24 00:09:52 tom Exp $
d68 1
d77 1
d79 1
a79 1
INSTALL_DIRS    = $(BINDIR) $(APPSDIR) $(MANDIR)
d214 10
d264 15
@


1.2
log
@permit environment to over-ride DESTDIR like release(8) describes
ok matthieu@@
@
text
@d1 1
a1 1
## $XTermId: Makefile.in,v 1.135 2006/08/03 21:15:53 tom Exp $
d5 1
a5 1
## Copyright 2002-2005,2006 by Thomas E. Dickey
a50 3
X_LIBS		= @@X_LIBS@@
X_EXTRA_LIBS	= @@X_EXTRA_LIBS@@

d84 1
a84 1
          SRCS1 = button.c charproc.c charsets.c cursor.c \
d87 1
a87 1
		  screen.c scrollbar.c tabs.c util.c xstrings.c \
d89 1
a89 1
          OBJS1 = button$o charproc$o charsets$o cursor$o \
d92 1
a92 1
		  screen$o scrollbar$o tabs$o util$o xstrings$o \
d99 1
a99 1
                  ptyx.h version.h xstrings.h xterm.h $(EXTRAHDR)
d103 2
a104 2

.SUFFIXES : .i .def .hin
d117 24
d148 1
a148 1
	@@ECHO_LD@@$(LINK) $(LDFLAGS) -o $@@ $(OBJS1) $(X_LIBS) $(X_EXTRA_LIBS) $(LIBS) $(EXTRA_LOADFLAGS)
d151 1
a151 1
	@@ECHO_LD@@$(SHELL) $(srcdir)/plink.sh $(LINK) $(LDFLAGS) -o $@@ $(OBJS2) $(X_LIBS) $(X_EXTRA_LIBS) $(LIBS)
d162 1
a162 1

d186 3
a188 3
	@@-$(SHELL) -c "(test @@XTERM_SYMLINK@@ != NONE && cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@) || exit 0"
	@@-$(SHELL) -c "(test @@XTERM_SYMLINK@@ != NONE && cd $(BINDIR) && $(LN_S) $(binary_xterm) @@XTERM_SYMLINK@@) || exit 0"
	@@-$(SHELL) -c "(test @@XTERM_SYMLINK@@ != NONE && cd $(BINDIR) && echo '... created symbolic link:' && ls -l $(binary_xterm) @@XTERM_SYMLINK@@) || exit 0"
d195 3
a197 3
	@@-$(SHELL) -c "(test @@XTERM_SYMLINK@@ != NONE && cd $(MANDIR) && rm -f @@XTERM_SYMLINK@@.$(manext)) || exit 0"
	@@-$(SHELL) -c "(test @@XTERM_SYMLINK@@ != NONE && cd $(MANDIR) && $(LN_S) $(actual_xterm).$(manext) @@XTERM_SYMLINK@@.$(manext)) || exit 0"
	@@-$(SHELL) -c "(test @@XTERM_SYMLINK@@ != NONE && cd $(MANDIR) && echo '... created symbolic link:' && ls -l $(actual_xterm).$(manext) @@XTERM_SYMLINK@@.$(manext)) || exit 0"
d222 1
a222 1
	$(SET_TERMINFO) tic $(srcdir)/terminfo
d227 1
a227 1
	@@test -f /etc/termcap && echo 'You must install the termcap entry manually by editing /etc/termcap'
d230 1
a230 1

d237 1
a237 1
	@@-$(SHELL) -c "test @@XTERM_SYMLINK@@ != NONE && cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@"
d244 1
a244 1
	@@-$(SHELL) -c "test @@XTERM_SYMLINK@@ != NONE && cd $(MANDIR) && rm -f @@XTERM_SYMLINK@@.$(manext)"
d252 1
a252 1

d261 3
d266 1
a266 1
	-$(RM) tags TAGS ctlseqs.ps ctlseqs.txt
d270 1
a270 1

d272 2
a273 2
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl ctlseqs.ms | groff -Thtml -ms" >$@@

d275 6
a280 5
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl ctlseqs.ms | nroff -Tascii -ms | col -bx" >$@@

ctlseqs.ps : ctlseqs.ms
	tbl ctlseqs.ms | groff -ms >$@@

@


1.1
log
@Initial revision
@
text
@d74 1
a74 1
DESTDIR		=
@


1.1.1.1
log
@Importing xterm 216
@
text
@@


1.1.1.2
log
@import xterm 225
@
text
@d1 1
a1 1
## $XTermId: Makefile.in,v 1.145 2007/03/24 00:09:52 tom Exp $
d5 1
a5 1
## Copyright 2002-2006,2007 by Thomas E. Dickey
d51 3
d87 1
a87 1
          SRCS1 = button.c cachedGCs.c charproc.c charsets.c cursor.c \
d90 1
a90 1
		  screen.c scrollbar.c tabs.c util.c xstrings.c xtermcap.c \
d92 1
a92 1
          OBJS1 = button$o cachedGCs$o charproc$o charsets$o cursor$o \
d95 1
a95 1
		  screen$o scrollbar$o tabs$o util$o xstrings$o xtermcap$o \
d102 1
a102 1
                  ptyx.h version.h xstrings.h xterm.h xtermcap.h $(EXTRAHDR)
d106 2
a107 2
################################################################################
.SUFFIXES : .i .def .hin .html .$(manext) .ms .man .ps .pdf .txt
a119 24
.man.$(manext) :
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/xterm.man $@@ $(appsdir)

.$(manext).html :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.$(manext) | groff -Thtml -man" >$@@

.$(manext).ps :
	$(SHELL) -c "tbl $*.$(manext) | groff -man" >$@@

.$(manext).txt :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.$(manext) | nroff -Tascii -man | col -bx" >$@@

.ms.html :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.ms | groff -Thtml -ms" >$@@

.ms.ps :
	$(SHELL) -c "tbl $*.ms | groff -ms" >$@@

.ms.txt :
	GROFF_NO_SGR=stupid $(SHELL) -c "tbl $*.ms | nroff -Tascii -ms | col -bx" >$@@

.ps.pdf :
	ps2pdf $*.ps
################################################################################
d127 1
a127 1
	@@ECHO_LD@@$(LINK) $(LDFLAGS) -o $@@ $(OBJS1) $(LIBS) $(EXTRA_LOADFLAGS)
d130 1
a130 1
	@@ECHO_LD@@$(SHELL) $(srcdir)/plink.sh $(LINK) $(LDFLAGS) -o $@@ $(OBJS2) $(LIBS)
d141 1
a141 1
################################################################################
d165 3
a167 3
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@ ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && $(LN_S) $(binary_xterm) @@XTERM_SYMLINK@@ ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && echo '... created symbolic link:' && ls -l $(binary_xterm) @@XTERM_SYMLINK@@ ; fi"
d174 3
a176 3
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && rm -f @@XTERM_SYMLINK@@.$(manext) ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && $(LN_S) $(actual_xterm).$(manext) @@XTERM_SYMLINK@@.$(manext) ; fi"
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && echo '... created symbolic link:' && ls -l $(actual_xterm).$(manext) @@XTERM_SYMLINK@@.$(manext) ; fi"
d201 1
a201 1
	@@$(SHELL) -c "$(SET_TERMINFO) $(srcdir)/run-tic.sh $(srcdir)/terminfo"
d206 1
a206 1
	@@-$(SHELL) -c "test -f /etc/termcap && echo 'You must install the termcap entry manually by editing /etc/termcap'"
d209 1
a209 1
################################################################################
d216 1
a216 1
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(BINDIR) && rm -f @@XTERM_SYMLINK@@; fi"
d223 1
a223 1
	@@-$(SHELL) -c "if test @@XTERM_SYMLINK@@ != NONE ; then cd $(MANDIR) && rm -f @@XTERM_SYMLINK@@.$(manext); fi"
d231 1
a231 1
################################################################################
a239 3
	-$(RM) *.ps *.pdf *.png
	-$(RM) xterm.html xterm.$(manext) xterm.txt
	-$(RM) ctlseqs.html ctlseqs.$(manext)
d242 1
a242 1
	-$(RM) tags TAGS
d246 1
a246 1
################################################################################
d248 5
a252 1
ctlseqs.pdf : ctlseqs.ps
d254 2
a255 7
ctlseqs.txt : ctlseqs.ms
################################################################################
xterm.html : xterm.$(manext)
xterm.pdf : xterm.ps
xterm.ps : xterm.$(manext)
xterm.txt : xterm.$(manext)
################################################################################
@


1.1.1.3
log
@import xterm 229
@
text
@d1 1
a1 1
## $XTermId: Makefile.in,v 1.148 2007/06/16 18:47:51 tom Exp $
a67 1
icondir		= @@icondir@@
a75 1
ICONDIR		= $(DESTDIR)$(icondir)
d77 1
a77 1
INSTALL_DIRS    = $(BINDIR) $(APPSDIR) $(ICONDIR) $(MANDIR)
a211 10
@@no_icondir@@	@@echo "... installed app-defaults"

@@no_icondir@@install \
@@no_icondir@@install-icon \
@@no_icondir@@install-full :: $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm-color_32x32.xpm $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm-color_48x48.xpm $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm_32x32.xpm $(ICONDIR)
@@no_icondir@@	@@$(INSTALL_DATA) $(srcdir)/icons/xterm_48x48.xpm $(ICONDIR)
@@no_icondir@@	@@echo "... installed icons"
a251 15

@@no_icondir@@uninstall \
@@no_icondir@@uninstall-icon \
@@no_icondir@@uninstall-full ::
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm-color_32x32.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm_48x48.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm-color_32x32.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm_48x48.xpm
################################################################################
# Desktop-utils does not provide an uninstall, and is not uniformly available.
@@desktop_utils@@DESKTOP_FLAGS = @@DESKTOP_FLAGS@@
@@desktop_utils@@install-desktop \
@@desktop_utils@@install-full ::
@@desktop_utils@@	desktop-file-install $(DESKTOP_FLAGS) xterm.desktop
@@desktop_utils@@	desktop-file-install $(DESKTOP_FLAGS) uxterm.desktop
@


1.1.1.4
log
@Import xterm version 232. tested by many.
@
text
@d1 3
a3 1
## $XTermId: Makefile.in,v 1.155 2008/01/05 14:26:52 tom Exp $
d165 3
a167 4
actual_xterm  = `echo xterm|        sed '$(transform)'`
actual_resize = `echo resize|       sed '$(transform)'`
actual_uxterm = `echo uxterm|       sed '$(transform)'`
actual_k8term = `echo koi8rxterm|   sed '$(transform)'`
a171 1
binary_k8term = $(actual_k8term)
a187 9
	@@$(SHELL) -c 'echo "... installing $(BINDIR)/$(binary_k8term)"; \
		if test "$(binary_xterm)" != "xterm"; then \
			name="$(binary_xterm)"; \
			sed -e "s,=xterm,=$$name," $(srcdir)/koi8rxterm >k8term.tmp; \
			$(INSTALL_SCRIPT) -m  755 k8term.tmp $(BINDIR)/$(binary_k8term); \
			rm -f k8term.tmp; \
		else \
			$(INSTALL_SCRIPT) -m  755 $(srcdir)/koi8rxterm $(BINDIR)/$(binary_k8term); \
		fi'
a196 2
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/uxterm.man   $(MANDIR)/$(actual_uxterm).$(manext) $(appsdir)
	$(SHELL) $(srcdir)/minstall.sh "$(INSTALL_DATA)" $(srcdir)/koi8rxterm.man   $(MANDIR)/$(actual_k8term).$(manext) $(appsdir)
a212 3
@@no_appsdir@@	@@echo installing $(APPSDIR)/KOI8RXTerm
@@no_appsdir@@	@@sed -e s/XTerm/$(CLASS)/ $(srcdir)/KOI8RXTerm.ad >XTerm.tmp
@@no_appsdir@@	@@$(INSTALL_DATA) XTerm.tmp $(APPSDIR)/KOI8RXTerm
a248 1
	-$(RM) $(BINDIR)/$(binary_k8term)
a255 2
	-$(RM) $(MANDIR)/$(actual_uxterm).$(manext)
	-$(RM) $(MANDIR)/$(actual_k8term).$(manext)
d269 2
a270 2
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm_32x32.xpm
@@no_icondir@@	-$(RM) $(ICONDIR)/xterm-color_48x48.xpm
a296 3
################################################################################
terminfo.out : terminfo		; tic -a -I -1 terminfo >$@@
termcap.out : termcap		; tic -a -C -U termcap >$@@
@


