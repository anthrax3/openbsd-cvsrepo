head	1.4;
access;
symbols
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.8
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	v7_0_1:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v6_5_2:1.1.1.1
	v6_5_1:1.1.1.1
	mesa:1.1.1;
locks; strict;
comment	@// @;


1.4
date	2011.05.31.18.50.20;	author matthieu;	state dead;
branches;
next	1.3;

1.3
date	2009.05.17.20.26.37;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.02.14.58.07;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.25.18.56.37;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.25.18.56.37;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Remove MesaDemos contents. Not used by Xenocara builds anymore.
@
text
@
// Simple BeOS GLView demo
// Written by Brian Paul
// Changes by Philippe Houdoin
// This file is in the public domain.



#include <stdio.h>
#include <Application.h>
#include <Window.h>
#include <GLView.h>

class MyGL : public BGLView
{
public:
	MyGL(BRect rect, char *name, ulong options);

	virtual void AttachedToWindow();
	virtual void Pulse();
	virtual void FrameResized(float w, float h);

private:
	void Render();
	void Reshape(float w, float h);
	float mAngle;
};


class MyWindow : public BWindow
{
public:
	MyWindow(BRect frame);
	virtual bool QuitRequested();
};


MyWindow::MyWindow(BRect frame)
   : BWindow(frame, "demo", B_TITLED_WINDOW, B_NOT_ZOOMABLE)
{
   // Make OpenGL view and put it in the window
   BRect r = Bounds();
   r.InsetBy(5, 5);
   
   MyGL *gl = new MyGL(r, "GL", BGL_RGB | BGL_DOUBLE);
   AddChild(gl);
   SetPulseRate(1000000 / 30);
}

bool MyWindow::QuitRequested()
{
   be_app->PostMessage(B_QUIT_REQUESTED);
   return true;
}



MyGL::MyGL(BRect rect, char *name, ulong options)
   : BGLView(rect, name, B_FOLLOW_ALL_SIDES, B_PULSE_NEEDED, options)
{
	mAngle = 0.0;
}


void MyGL::AttachedToWindow()
{
	BGLView::AttachedToWindow();

	LockGL();
	glClearColor(0.7, 0.7, 0, 0);
	Reshape(Bounds().Width(), Bounds().Height());
	UnlockGL();
}


void MyGL::FrameResized(float w, float h)
{
	BGLView::FrameResized(w, h);

	LockGL();
	Reshape(w, h);
	UnlockGL();

	Render();
}


void MyGL::Pulse()
{
	mAngle += 1.0;
	Render();
}


void MyGL::Render()
{
    LockGL();

    glClear(GL_COLOR_BUFFER_BIT);
    
    glPushMatrix();

    glRotated(mAngle, 0, 0, 1);
    glColor3f(0, 0, 1);

    glBegin(GL_POLYGON);
    glVertex2f(-1, -1);
    glVertex2f( 1, -1);
    glVertex2f( 1,  1);
    glVertex2f(-1,  1);
    glEnd();

	glPopMatrix();

    SwapBuffers();

    UnlockGL();
}


void MyGL::Reshape(float w, float h)
{
	glViewport(0, 0, (int) (w + 1), (int) (h + 1));
	glMatrixMode(GL_PROJECTION);
	glLoadIdentity();
	glFrustum(-1, 1, -1, 1, 10, 30);
	glMatrixMode(GL_MODELVIEW);
	glLoadIdentity();
	glTranslatef(0, 0, -18);
}


int main(int argc, char *argv[])
{
   BApplication *app = new BApplication("application/demo");

   // make top-level window
   MyWindow *win = new MyWindow(BRect(100, 100, 500, 500));
   win->Show();

    app->Run();

   delete app;

   return 0;
}
@


1.3
log
@Update to Mesa 7.4.2. Tested by oga@@, ckuethe@@ and naddy@@.
@
text
@@


1.2
log
@Mesa 7.2, Tested by ckuethe@@, naddy@@, oga@@, and others.
@
text
@a0 1
// $Id: demo.cpp,v 1.2 2004/08/14 09:59:16 phoudoin Exp $
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import MesaDemos 6.5.1
@
text
@@
