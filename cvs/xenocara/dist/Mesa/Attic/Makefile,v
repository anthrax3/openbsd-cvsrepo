head	1.10;
access;
symbols
	OPENBSD_5_4:1.9.0.4
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.4
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	v7_10_3:1.1.1.4
	OPENBSD_5_0:1.7.0.6
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.4
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.5.0.4
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	v7_0_1:1.1.1.3
	OPENBSD_4_2:1.1.1.2.0.2
	OPENBSD_4_2_BASE:1.1.1.2
	v6_5_2:1.1.1.2
	v6_5_1:1.1.1.1
	mesa:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2013.09.05.13.58.30;	author jsg;	state dead;
branches;
next	1.9;

1.9
date	2012.08.17.13.58.00;	author mpi;	state Exp;
branches;
next	1.8;

1.8
date	2011.10.23.13.37.25;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2010.06.22.20.04.22;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2010.05.22.20.05.42;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2009.05.17.20.26.36;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.02.14.58.06;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2008.05.31.16.36.47;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.12.21.09.26;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.25.18.49.17;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.25.18.49.17;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.03.03.11.56.24;	author matthieu;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2007.11.24.17.25.29;	author matthieu;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2011.10.23.13.29.21;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Merge Mesa 9.2.0
@
text
@# Top-level Mesa makefile

TOP = .

SUBDIRS = src


# The git command below generates an empty string when we're not
# building in a GIT tree (i.e., building from a release tarball).
default: $(TOP)/configs/current
	@@$(TOP)/bin/extract_git_sha1
	@@for dir in $(SUBDIRS) ; do \
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE)) || exit 1 ; \
		fi \
	done

all: default


doxygen:
	cd doxygen && $(MAKE)

clean:
	-@@touch $(TOP)/configs/current
	-@@for dir in $(SUBDIRS) ; do \
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) clean) ; \
		fi \
	done
	-@@test -s $(TOP)/configs/current || rm -f $(TOP)/configs/current


realclean: clean
	-rm -rf lib*
	-rm -f $(TOP)/configs/current
	-rm -f $(TOP)/configs/autoconf
	-rm -rf autom4te.cache
	-find . '(' -name '*.o' -o -name '*.a' -o -name '*.so' -o \
	  -name depend -o -name depend.bak ')' -exec rm -f '{}' ';'


distclean: realclean


install:
	@@for dir in $(SUBDIRS) ; do \
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) install) || exit 1 ; \
		fi \
	done


.PHONY: default doxygen clean realclean distclean install

# If there's no current configuration file
$(TOP)/configs/current:
	@@echo
	@@echo
	@@echo "Please choose a configuration from the following list:"
	@@ls -1 $(TOP)/configs | grep -v "current\|default\|CVS\|autoconf.*"
	@@echo
	@@echo "Then type 'make <config>' (ex: 'make linux-x86')"
	@@echo
	@@echo "Or, run './configure' then 'make'"
	@@echo "See './configure --help' for details"
	@@echo
	@@echo "(ignore the following error message)"
	@@exit 1


# Rules to set/install a specific build configuration
aix \
aix-64 \
aix-64-static \
aix-gcc \
aix-static \
autoconf \
bluegene-osmesa \
bluegene-xlc-osmesa \
beos \
catamount-osmesa-pgi \
darwin \
darwin-fat-32bit \
darwin-fat-all \
freebsd \
freebsd-dri \
freebsd-dri-amd64 \
freebsd-dri-x86 \
hpux10 \
hpux10-gcc \
hpux10-static \
hpux11-32 \
hpux11-32-static \
hpux11-32-static-nothreads \
hpux11-64 \
hpux11-64-static \
hpux11-ia64 \
hpux11-ia64-static \
hpux9 \
hpux9-gcc \
irix6-64 \
irix6-64-static \
irix6-n32 \
irix6-n32-static \
irix6-o32 \
irix6-o32-static \
linux \
linux-i965 \
linux-alpha \
linux-alpha-static \
linux-cell \
linux-cell-debug \
linux-debug \
linux-dri \
linux-dri-debug \
linux-dri-x86 \
linux-dri-x86-64 \
linux-dri-ppc \
linux-dri-xcb \
linux-egl \
linux-indirect \
linux-fbdev \
linux-ia64-icc \
linux-ia64-icc-static \
linux-icc \
linux-icc-static \
linux-llvm \
linux-llvm-debug \
linux-opengl-es \
linux-osmesa \
linux-osmesa-static \
linux-osmesa16 \
linux-osmesa16-static \
linux-osmesa32 \
linux-ppc \
linux-ppc-static \
linux-profile \
linux-sparc \
linux-sparc5 \
linux-static \
linux-ultrasparc \
linux-tcc \
linux-x86 \
linux-x86-debug \
linux-x86-32 \
linux-x86-64 \
linux-x86-64-debug \
linux-x86-64-profile \
linux-x86-64-static \
linux-x86-profile \
linux-x86-static \
netbsd \
openbsd \
osf1 \
osf1-static \
solaris-x86 \
solaris-x86-gcc \
solaris-x86-gcc-static \
sunos4 \
sunos4-gcc \
sunos4-static \
sunos5 \
sunos5-gcc \
sunos5-64-gcc \
sunos5-smp \
sunos5-v8 \
sunos5-v8-static \
sunos5-v9 \
sunos5-v9-static \
sunos5-v9-cc-g++ \
ultrix-gcc:
	@@ if test -f configs/current -o -L configs/current; then \
		if ! cmp configs/$@@ configs/current > /dev/null; then \
			echo "Please run 'make realclean' before changing configs" ; \
			exit 1 ; \
		fi ; \
	else \
		cd configs && rm -f current && ln -s $@@ current ; \
	fi
	$(MAKE) default


# Rules for making release tarballs

VERSION=7.11.2
DIRECTORY = Mesa-$(VERSION)
LIB_NAME = MesaLib-$(VERSION)
GLUT_NAME = MesaGLUT-$(VERSION)

# This is part of MAIN_FILES
MAIN_ES_FILES = \
	$(DIRECTORY)/src/mesa/main/*.xml				\
	$(DIRECTORY)/src/mesa/main/*.py					\
	$(DIRECTORY)/src/mesa/main/*.dtd

MAIN_FILES = \
	$(DIRECTORY)/Makefile*						\
	$(DIRECTORY)/configure						\
	$(DIRECTORY)/configure.ac					\
	$(DIRECTORY)/acinclude.m4					\
	$(DIRECTORY)/aclocal.m4						\
	$(DIRECTORY)/SConstruct						\
	$(DIRECTORY)/common.py						\
	$(DIRECTORY)/scons/*py						\
	$(DIRECTORY)/bin/config.guess					\
	$(DIRECTORY)/bin/config.sub					\
	$(DIRECTORY)/bin/extract_git_sha1				\
	$(DIRECTORY)/bin/install-sh					\
	$(DIRECTORY)/bin/mklib						\
	$(DIRECTORY)/bin/minstall					\
	$(DIRECTORY)/bin/version.mk					\
	$(DIRECTORY)/configs/[a-z]*					\
	$(DIRECTORY)/docs/*.html					\
	$(DIRECTORY)/docs/COPYING					\
	$(DIRECTORY)/docs/README.*					\
	$(DIRECTORY)/docs/RELNOTES*					\
	$(DIRECTORY)/docs/*.spec					\
	$(DIRECTORY)/include/GL/gl.h					\
	$(DIRECTORY)/include/GL/glext.h					\
	$(DIRECTORY)/include/GL/gl_mangle.h				\
	$(DIRECTORY)/include/GL/glu.h					\
	$(DIRECTORY)/include/GL/glu_mangle.h				\
	$(DIRECTORY)/include/GL/glx.h					\
	$(DIRECTORY)/include/GL/glxext.h				\
	$(DIRECTORY)/include/GL/glx_mangle.h				\
	$(DIRECTORY)/include/GL/glfbdev.h				\
	$(DIRECTORY)/include/GL/mesa_wgl.h				\
	$(DIRECTORY)/include/GL/osmesa.h				\
	$(DIRECTORY)/include/GL/vms_x_fix.h				\
	$(DIRECTORY)/include/GL/wglext.h				\
	$(DIRECTORY)/include/GL/wmesa.h					\
	$(DIRECTORY)/include/pci_ids/*.h				\
	$(DIRECTORY)/include/c99/*.h					\
	$(DIRECTORY)/src/getopt/SConscript				\
	$(DIRECTORY)/src/getopt/getopt*.[ch]				\
	$(DIRECTORY)/src/glsl/Makefile					\
	$(DIRECTORY)/src/glsl/Makefile.template				\
	$(DIRECTORY)/src/glsl/SConscript				\
	$(DIRECTORY)/src/glsl/*.[ch]					\
	$(DIRECTORY)/src/glsl/*.ll					\
	$(DIRECTORY)/src/glsl/*.yy					\
	$(DIRECTORY)/src/glsl/*.[cly]pp					\
	$(DIRECTORY)/src/glsl/README					\
	$(DIRECTORY)/src/glsl/glcpp/*.[chly]				\
	$(DIRECTORY)/src/glsl/glcpp/README				\
	$(DIRECTORY)/src/glsl/builtins					\
	$(DIRECTORY)/src/Makefile					\
	$(DIRECTORY)/src/SConscript					\
	$(DIRECTORY)/src/mesa/Makefile*					\
	$(DIRECTORY)/src/mesa/SConscript				\
	$(DIRECTORY)/src/mesa/sources.mak				\
	$(DIRECTORY)/src/mesa/descrip.mms				\
	$(DIRECTORY)/src/mesa/gl.pc.in					\
	$(DIRECTORY)/src/mesa/osmesa.pc.in				\
	$(MAIN_ES_FILES)						\
	$(DIRECTORY)/src/mesa/main/*.[chS]				\
	$(DIRECTORY)/src/mesa/main/*.cpp				\
	$(DIRECTORY)/src/mesa/main/descrip.mms				\
	$(DIRECTORY)/src/mesa/math/*.[ch]				\
	$(DIRECTORY)/src/mesa/math/descrip.mms				\
	$(DIRECTORY)/src/mesa/program/*.[chly]				\
	$(DIRECTORY)/src/mesa/program/*.cpp				\
	$(DIRECTORY)/src/mesa/program/descrip.mms			\
	$(DIRECTORY)/src/mesa/swrast/*.[ch]				\
	$(DIRECTORY)/src/mesa/swrast/descrip.mms			\
	$(DIRECTORY)/src/mesa/swrast_setup/*.[ch]			\
	$(DIRECTORY)/src/mesa/swrast_setup/descrip.mms			\
	$(DIRECTORY)/src/mesa/vbo/*.[chS]				\
	$(DIRECTORY)/src/mesa/vbo/descrip.mms				\
	$(DIRECTORY)/src/mesa/tnl/*.[chS]				\
	$(DIRECTORY)/src/mesa/tnl/descrip.mms				\
	$(DIRECTORY)/src/mesa/tnl_dd/*.[ch]				\
	$(DIRECTORY)/src/mesa/tnl_dd/imm/*.[ch]				\
	$(DIRECTORY)/src/mesa/tnl_dd/imm/NOTES.imm			\
	$(DIRECTORY)/src/mesa/drivers/Makefile				\
	$(DIRECTORY)/src/mesa/drivers/beos/*.cpp			\
	$(DIRECTORY)/src/mesa/drivers/beos/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/common/*.[ch]			\
	$(DIRECTORY)/src/mesa/drivers/common/descrip.mms		\
	$(DIRECTORY)/src/mesa/drivers/fbdev/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/fbdev/glfbdev.c			\
	$(DIRECTORY)/src/mesa/drivers/osmesa/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/osmesa/Makefile.win		\
	$(DIRECTORY)/src/mesa/drivers/osmesa/descrip.mms		\
	$(DIRECTORY)/src/mesa/drivers/osmesa/osmesa.def			\
	$(DIRECTORY)/src/mesa/drivers/osmesa/*.[ch]			\
	$(DIRECTORY)/src/mesa/drivers/windows/*/*.[ch]			\
	$(DIRECTORY)/src/mesa/drivers/windows/*/*.def			\
	$(DIRECTORY)/src/mesa/drivers/x11/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/x11/descrip.mms			\
	$(DIRECTORY)/src/mesa/drivers/x11/*.[ch]			\
	$(DIRECTORY)/src/mesa/ppc/*.[ch]				\
	$(DIRECTORY)/src/mesa/sparc/*.[chS]				\
	$(DIRECTORY)/src/mesa/x86/Makefile				\
	$(DIRECTORY)/src/mesa/x86/*.[ch]				\
	$(DIRECTORY)/src/mesa/x86/*.S					\
	$(DIRECTORY)/src/mesa/x86/rtasm/*.[ch]				\
	$(DIRECTORY)/src/mesa/x86-64/*.[chS]				\
	$(DIRECTORY)/src/mesa/x86-64/Makefile

MAPI_FILES = \
	$(DIRECTORY)/include/GLES/*.h					\
	$(DIRECTORY)/include/GLES2/*.h					\
	$(DIRECTORY)/include/VG/*.h					\
	$(DIRECTORY)/src/mapi/es?api/Makefile				\
	$(DIRECTORY)/src/mapi/es?api/*.pc.in				\
	$(DIRECTORY)/src/mapi/glapi/gen/Makefile			\
	$(DIRECTORY)/src/mapi/glapi/gen/*.xml				\
	$(DIRECTORY)/src/mapi/glapi/gen/*.py				\
	$(DIRECTORY)/src/mapi/glapi/gen/*.dtd				\
	$(DIRECTORY)/src/mapi/glapi/gen-es/Makefile			\
	$(DIRECTORY)/src/mapi/glapi/gen-es/*.xml			\
	$(DIRECTORY)/src/mapi/glapi/gen-es/*.py				\
	$(DIRECTORY)/src/mapi/glapi/Makefile				\
	$(DIRECTORY)/src/mapi/glapi/SConscript				\
	$(DIRECTORY)/src/mapi/glapi/sources.mak				\
	$(DIRECTORY)/src/mapi/glapi/*.[chS]				\
	$(DIRECTORY)/src/mapi/mapi/mapi_abi.py				\
	$(DIRECTORY)/src/mapi/mapi/sources.mak				\
	$(DIRECTORY)/src/mapi/mapi/*.[ch]				\
	$(DIRECTORY)/src/mapi/shared-glapi/SConscript			\
	$(DIRECTORY)/src/mapi/shared-glapi/Makefile			\
	$(DIRECTORY)/src/mapi/vgapi/Makefile				\
	$(DIRECTORY)/src/mapi/vgapi/SConscript				\
	$(DIRECTORY)/src/mapi/vgapi/vgapi.csv				\
	$(DIRECTORY)/src/mapi/vgapi/vg.pc.in

EGL_FILES = \
	$(DIRECTORY)/include/KHR/*.h					\
	$(DIRECTORY)/include/EGL/*.h					\
	$(DIRECTORY)/src/egl/Makefile					\
	$(DIRECTORY)/src/egl/*/Makefile					\
	$(DIRECTORY)/src/egl/*/Makefile.template			\
	$(DIRECTORY)/src/egl/*/*.[ch]					\
	$(DIRECTORY)/src/egl/*/*/Makefile				\
	$(DIRECTORY)/src/egl/*/*/*.[ch]					\
	$(DIRECTORY)/src/egl/wayland/wayland-drm/protocol/*.xml		\
	$(DIRECTORY)/src/egl/wayland/wayland-egl/*.pc.in		\
	$(DIRECTORY)/src/egl/main/SConscript				\
	$(DIRECTORY)/src/egl/main/*.pc.in				\
	$(DIRECTORY)/src/egl/main/*.def

GBM_FILES = \
	$(DIRECTORY)/src/gbm/Makefile					\
	$(DIRECTORY)/src/gbm/main/*.pc.in				\
	$(DIRECTORY)/src/gbm/main/*.[ch]				\
	$(DIRECTORY)/src/gbm/main/Makefile				\
	$(DIRECTORY)/src/gbm/backends/Makefile				\
	$(DIRECTORY)/src/gbm/backends/Makefile.template			\
	$(DIRECTORY)/src/gbm/backends/*/*.[ch]				\
	$(DIRECTORY)/src/gbm/backends/*/Makefile			\

GALLIUM_FILES = \
	$(DIRECTORY)/src/mesa/state_tracker/*[ch]			\
	$(DIRECTORY)/src/gallium/Makefile				\
	$(DIRECTORY)/src/gallium/Makefile.template			\
	$(DIRECTORY)/src/gallium/SConscript				\
	$(DIRECTORY)/src/gallium/targets/Makefile.dri			\
	$(DIRECTORY)/src/gallium/targets/Makefile.xorg			\
	$(DIRECTORY)/src/gallium/targets/SConscript.dri			\
	$(DIRECTORY)/src/gallium/*/Makefile				\
	$(DIRECTORY)/src/gallium/*/SConscript				\
	$(DIRECTORY)/src/gallium/*/*/Makefile				\
	$(DIRECTORY)/src/gallium/*/*/SConscript				\
	$(DIRECTORY)/src/gallium/*/*/*.[ch]				\
	$(DIRECTORY)/src/gallium/auxiliary/gallivm/*.cpp		\
	$(DIRECTORY)/src/gallium/*/*/*.py				\
	$(DIRECTORY)/src/gallium/*/*/*.csv				\
	$(DIRECTORY)/src/gallium/*/*/*/Makefile				\
	$(DIRECTORY)/src/gallium/*/*/*/SConscript			\
	$(DIRECTORY)/src/gallium/*/*/*/*.[ch]				\
	$(DIRECTORY)/src/gallium/*/*/*/*.py

APPLE_DRI_FILES = \
	$(DIRECTORY)/src/glx/apple/Makefile 				\
	$(DIRECTORY)/src/glx/apple/*.[ch]

DRI_FILES = \
	$(DIRECTORY)/include/GL/internal/dri_interface.h		\
	$(DIRECTORY)/include/GL/internal/sarea.h			\
	$(DIRECTORY)/src/glx/Makefile					\
	$(DIRECTORY)/src/glx/*.[ch]					\
	$(APPLE_DRI_FILES)						\
	$(DIRECTORY)/src/mesa/drivers/dri/Makefile*			\
	$(DIRECTORY)/src/mesa/drivers/dri/dri.pc.in			\
	$(DIRECTORY)/src/mesa/drivers/dri/common/xmlpool/*.po		\
	$(DIRECTORY)/src/mesa/drivers/dri/*/*.[chS]			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/*.cpp			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/*/*.[chS]			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/*/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/*/SConscript		\
	$(DIRECTORY)/src/mesa/drivers/dri/*/Doxyfile

SGI_GLU_FILES = \
	$(DIRECTORY)/src/glu/Makefile					\
	$(DIRECTORY)/src/glu/glu.pc.in					\
	$(DIRECTORY)/src/glu/sgi/Makefile				\
	$(DIRECTORY)/src/glu/sgi/Makefile.mgw				\
	$(DIRECTORY)/src/glu/sgi/Makefile.win				\
	$(DIRECTORY)/src/glu/sgi/glu.def				\
	$(DIRECTORY)/src/glu/sgi/dummy.cc				\
	$(DIRECTORY)/src/glu/sgi/glu.exports				\
	$(DIRECTORY)/src/glu/sgi/glu.exports.darwin			\
	$(DIRECTORY)/src/glu/sgi/mesaglu.opt				\
	$(DIRECTORY)/src/glu/sgi/include/gluos.h			\
	$(DIRECTORY)/src/glu/sgi/libnurbs/interface/*.h			\
	$(DIRECTORY)/src/glu/sgi/libnurbs/interface/*.cc		\
	$(DIRECTORY)/src/glu/sgi/libnurbs/internals/*.h			\
	$(DIRECTORY)/src/glu/sgi/libnurbs/internals/*.cc		\
	$(DIRECTORY)/src/glu/sgi/libnurbs/nurbtess/*.h			\
	$(DIRECTORY)/src/glu/sgi/libnurbs/nurbtess/*.cc			\
	$(DIRECTORY)/src/glu/sgi/libtess/README				\
	$(DIRECTORY)/src/glu/sgi/libtess/alg-outline			\
	$(DIRECTORY)/src/glu/sgi/libtess/*.[ch]				\
	$(DIRECTORY)/src/glu/sgi/libutil/*.[ch]

GLW_FILES = \
	$(DIRECTORY)/src/glw/*.[ch]			\
	$(DIRECTORY)/src/glw/Makefile*			\
	$(DIRECTORY)/src/glw/README			\
	$(DIRECTORY)/src/glw/glw.pc.in

GLUT_FILES = \
	$(DIRECTORY)/include/GL/glut.h			\
	$(DIRECTORY)/include/GL/glutf90.h		\
	$(DIRECTORY)/src/glut/glx/Makefile*		\
	$(DIRECTORY)/src/glut/glx/SConscript		\
	$(DIRECTORY)/src/glut/glx/glut.pc.in		\
	$(DIRECTORY)/src/glut/glx/*def			\
	$(DIRECTORY)/src/glut/glx/*.[ch]		\
	$(DIRECTORY)/src/glut/beos/*.[ch]		\
	$(DIRECTORY)/src/glut/beos/*.cpp		\
	$(DIRECTORY)/src/glut/beos/Makefile


LIB_FILES = \
	$(MAIN_FILES)		\
	$(MAPI_FILES)		\
	$(ES_FILES)		\
	$(EGL_FILES)		\
	$(GBM_FILES)		\
	$(GALLIUM_FILES)	\
	$(DRI_FILES)		\
	$(SGI_GLU_FILES)	\
	$(GLW_FILES)


parsers: configure
	-@@touch $(TOP)/configs/current
	$(MAKE) -C src/glsl glsl_parser.cpp glsl_parser.h glsl_lexer.cpp
	$(MAKE) -C src/glsl/glcpp glcpp-lex.c glcpp-parse.c glcpp-parse.h
	$(MAKE) -C src/mesa program/lex.yy.c program/program_parse.tab.c program/program_parse.tab.h

# Everything for new a Mesa release:
ARCHIVES = $(LIB_NAME).tar.gz \
	$(LIB_NAME).tar.bz2 \
	$(LIB_NAME).zip \
	$(GLUT_NAME).tar.gz \
	$(GLUT_NAME).tar.bz2 \
	$(GLUT_NAME).zip

tarballs: md5
	rm -f ../$(LIB_NAME).tar

# Helper for autoconf builds
ACLOCAL = aclocal
ACLOCAL_FLAGS =
AUTOCONF = autoconf
AC_FLAGS =
aclocal.m4: configure.ac acinclude.m4
	$(ACLOCAL) $(ACLOCAL_FLAGS)
configure: configure.ac aclocal.m4 acinclude.m4
	$(AUTOCONF) $(AC_FLAGS)

rm_config: parsers
	rm -f configs/current
	rm -f configs/autoconf

$(LIB_NAME).tar: rm_config
	cd .. ; tar --dereference -cf $(DIRECTORY)/$(LIB_NAME).tar $(LIB_FILES)

$(LIB_NAME).tar.gz: $(LIB_NAME).tar
	gzip --stdout --best $(LIB_NAME).tar > $(LIB_NAME).tar.gz

$(GLUT_NAME).tar:
	cd .. ; tar --dereference -cf $(DIRECTORY)/$(GLUT_NAME).tar $(GLUT_FILES)

$(GLUT_NAME).tar.gz: $(GLUT_NAME).tar
	gzip --stdout --best $(GLUT_NAME).tar > $(GLUT_NAME).tar.gz

$(LIB_NAME).tar.bz2: $(LIB_NAME).tar
	bzip2 --stdout --best $(LIB_NAME).tar > $(LIB_NAME).tar.bz2

$(GLUT_NAME).tar.bz2: $(GLUT_NAME).tar
	bzip2 --stdout --best $(GLUT_NAME).tar > $(GLUT_NAME).tar.bz2

$(LIB_NAME).zip: rm_config
	rm -f $(LIB_NAME).zip ; \
	cd .. ; \
	zip -qr $(LIB_NAME).zip $(LIB_FILES) ; \
	mv $(LIB_NAME).zip $(DIRECTORY)

$(GLUT_NAME).zip:
	rm -f $(GLUT_NAME).zip ; \
	cd .. ; \
	zip -qr $(GLUT_NAME).zip $(GLUT_FILES) ; \
	mv $(GLUT_NAME).zip $(DIRECTORY)

md5: $(ARCHIVES)
	@@-md5sum $(LIB_NAME).tar.gz
	@@-md5sum $(LIB_NAME).tar.bz2
	@@-md5sum $(LIB_NAME).zip
	@@-md5sum $(GLUT_NAME).tar.gz
	@@-md5sum $(GLUT_NAME).tar.bz2
	@@-md5sum $(GLUT_NAME).zip

.PHONY: tarballs rm_config md5
@


1.9
log
@Upate to libGL 7.11.2

Tested by jsg@@, matthieu@@ and ajacoutot@@, ok mattieu@@
@
text
@@


1.8
log
@Merge Mesa 7.10.3
@
text
@d8 2
d11 1
d186 1
a186 1
VERSION=7.10.3
d208 1
d233 1
d235 2
d241 2
d247 1
a255 1
	$(DIRECTORY)/src/mesa/depend					\
d258 1
a263 1
	$(DIRECTORY)/src/mesa/program/Makefile				\
a275 1
	$(DIRECTORY)/src/mesa/vf/*.[ch]					\
a287 3
	$(DIRECTORY)/src/mesa/drivers/dri/r300/compiler/*.[ch]		\
	$(DIRECTORY)/src/mesa/drivers/dri/r300/compiler/Makefile	\
	$(DIRECTORY)/src/mesa/drivers/dri/r300/compiler/SConscript	\
d300 1
a300 2
	$(DIRECTORY)/src/mesa/x86-64/Makefile				\
	$(DIRECTORY)/windows/VC8/
d322 2
d338 2
d344 10
d377 1
a377 9
	$(DIRECTORY)/src/glx/apple/*.[ch]				\
	$(DIRECTORY)/src/glx/apple/*.tcl				\
	$(DIRECTORY)/src/glx/apple/apple_exports.list			\
	$(DIRECTORY)/src/glx/apple/GL_aliases				\
	$(DIRECTORY)/src/glx/apple/GL_extensions			\
	$(DIRECTORY)/src/glx/apple/GL_noop				\
	$(DIRECTORY)/src/glx/apple/GL_promoted				\
	$(DIRECTORY)/src/glx/apple/specs/*.spec				\
	$(DIRECTORY)/src/glx/apple/specs/*.tm
d385 1
a385 2
	$(DIRECTORY)/src/mesa/drivers/dri/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/dri/Makefile.template		\
d393 1
d423 1
a423 2
	$(DIRECTORY)/src/glw/glw.pc.in			\
	$(DIRECTORY)/src/glw/depend
a429 1
	$(DIRECTORY)/src/glut/glx/depend		\
a436 7
DEPEND_FILES = \
	$(TOP)/src/mesa/depend		\
	$(TOP)/src/glx/depend		\
	$(TOP)/src/glw/depend		\
	$(TOP)/src/glut/glx/depend	\
	$(TOP)/src/glu/sgi/depend

d443 1
d450 6
d457 6
a462 2
tarballs: rm_depend configure aclocal.m4 lib_gz glut_gz \
	lib_bz2 glut_bz2 lib_zip glut_zip md5
d464 2
d477 1
a477 7
rm_depend:
	@@for dep in $(DEPEND_FILES) ; do \
		rm -f $$dep ; \
		touch $$dep ; \
	done

rm_config:
d481 8
a488 5
lib_gz: rm_config
	cd .. ; \
	tar -cf $(LIB_NAME).tar $(LIB_FILES) ; \
	gzip $(LIB_NAME).tar ; \
	mv $(LIB_NAME).tar.gz $(DIRECTORY)
d490 2
a491 5
glut_gz:
	cd .. ; \
	tar -cf $(GLUT_NAME).tar $(GLUT_FILES) ; \
	gzip $(GLUT_NAME).tar ; \
	mv $(GLUT_NAME).tar.gz $(DIRECTORY)
d493 2
a494 5
lib_bz2: rm_config
	cd .. ; \
	tar -cf $(LIB_NAME).tar $(LIB_FILES) ; \
	bzip2 $(LIB_NAME).tar ; \
	mv $(LIB_NAME).tar.bz2 $(DIRECTORY)
d496 2
a497 5
glut_bz2:
	cd .. ; \
	tar -cf $(GLUT_NAME).tar $(GLUT_FILES) ; \
	bzip2 $(GLUT_NAME).tar ; \
	mv $(GLUT_NAME).tar.bz2 $(DIRECTORY)
d499 1
a499 1
lib_zip: rm_config
d505 1
a505 1
glut_zip:
d511 1
a511 1
md5:
d519 1
a519 4
.PHONY: tarballs rm_depend rm_config md5 \
	lib_gz glut_gz \
	lib_bz2 glut_bz2 \
	lib_zip glut_zip
@


1.7
log
@Update to Mesa 7.8.2. Tested by johan@@. Thanks.
@
text
@d5 1
a5 1
SUBDIRS = src progs
d183 1
a183 1
VERSION=7.8.2
a185 1
DEMO_NAME = MesaDemos-$(VERSION)
d188 6
d200 3
a214 1
	$(DIRECTORY)/include/GL/internal/glcore.h			\
a224 1
	$(DIRECTORY)/include/GL/mglmesa.h				\
d229 1
a229 2
	$(DIRECTORY)/include/VG/*.h					\
	$(DIRECTORY)/include/KHR/*.h					\
d233 5
a237 2
	$(DIRECTORY)/src/glsl/*/Makefile				\
	$(DIRECTORY)/src/glsl/*/*.[ch]					\
d239 1
d241 1
d247 1
a249 1
	$(DIRECTORY)/src/mesa/glapi/*.[chS]				\
d252 4
a255 7
	$(DIRECTORY)/src/mesa/shader/*.[chly]				\
	$(DIRECTORY)/src/mesa/shader/Makefile				\
	$(DIRECTORY)/src/mesa/shader/descrip.mms			\
	$(DIRECTORY)/src/mesa/shader/slang/*.[ch]			\
	$(DIRECTORY)/src/mesa/shader/slang/descrip.mms			\
	$(DIRECTORY)/src/mesa/shader/slang/library/*.gc			\
	$(DIRECTORY)/src/mesa/shader/slang/library/Makefile		\
d267 1
d280 3
a287 2
	$(DIRECTORY)/src/mesa/drivers/glslcompiler/Makefile		\
	$(DIRECTORY)/src/mesa/drivers/glslcompiler/glslcompiler.c	\
a295 4
	$(DIRECTORY)/progs/Makefile					\
	$(DIRECTORY)/progs/util/README					\
	$(DIRECTORY)/progs/util/*.[ch]					\
	$(DIRECTORY)/progs/util/sampleMakefile				\
d298 1
a298 1
ES_FILES = \
d301 21
a321 13
	$(DIRECTORY)/src/mesa/glapi/gen/*.xml				\
	$(DIRECTORY)/src/mesa/glapi/gen/*.py				\
	$(DIRECTORY)/src/mesa/glapi/gen/*.dtd				\
	$(DIRECTORY)/src/mesa/es/glapi/Makefile				\
	$(DIRECTORY)/src/mesa/es/glapi/*.xml				\
	$(DIRECTORY)/src/mesa/es/glapi/*.py				\
	$(DIRECTORY)/src/mesa/es/state_tracker/*.[ch]			\
	$(DIRECTORY)/src/mesa/es/main/*.[ch]				\
	$(DIRECTORY)/src/mesa/es/main/*.xml				\
	$(DIRECTORY)/src/mesa/es/main/*.py				\
	$(DIRECTORY)/src/mesa/es/main/*.dtd				\
	$(DIRECTORY)/src/mesa/es/Makefile				\
	$(DIRECTORY)/src/mesa/es/sources.mak				\
d324 1
d332 3
d341 3
a346 2
	$(DIRECTORY)/src/gallium/*/*/Makefile.egl			\
	$(DIRECTORY)/src/gallium/*/*/Makefile.template			\
d349 1
d355 1
a355 3
	$(DIRECTORY)/src/gallium/*/*/*/*.py				\
	$(DIRECTORY)/src/gallium/*/*/*/*/Makefile			\
	$(DIRECTORY)/src/gallium/*/*/*/*/*.[ch]				\
d357 11
a370 1
	$(DIRECTORY)/include/GL/internal/glcore.h			\
a372 1
	$(DIRECTORY)/src/glx/Makefile					\
d374 1
a377 1
	$(DIRECTORY)/src/mesa/drivers/dri/common/xmlpool/*.[ch]		\
d380 1
d384 1
a384 2
	$(DIRECTORY)/src/mesa/drivers/dri/*/Doxyfile			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/server/*.[ch]
a415 53
GLEW_FILES = \
	$(DIRECTORY)/include/GL/glew.h			\
	$(DIRECTORY)/include/GL/glxew.h			\
	$(DIRECTORY)/include/GL/wglew.h			\
	$(DIRECTORY)/src/glew/*.c			\
	$(DIRECTORY)/src/glew/Makefile			\
	$(DIRECTORY)/src/glew/SConscript		\
	$(DIRECTORY)/src/glew/LICENSE.txt

DEMO_FILES = \
	$(GLEW_FILES)					\
	$(DIRECTORY)/progs/beos/*.cpp			\
	$(DIRECTORY)/progs/beos/Makefile		\
	$(DIRECTORY)/progs/images/*.rgb			\
	$(DIRECTORY)/progs/images/*.rgba		\
	$(DIRECTORY)/progs/demos/Makefile*		\
	$(DIRECTORY)/progs/demos/descrip.mms		\
	$(DIRECTORY)/progs/demos/*.[ch]			\
	$(DIRECTORY)/progs/demos/*.cxx			\
	$(DIRECTORY)/progs/demos/*.dat			\
	$(DIRECTORY)/progs/demos/README			\
	$(DIRECTORY)/progs/egl/Makefile			\
	$(DIRECTORY)/progs/egl/*.[ch]			\
	$(DIRECTORY)/progs/es1/*/Makefile		\
	$(DIRECTORY)/progs/es1/*/*.[ch]			\
	$(DIRECTORY)/progs/es2/*/Makefile		\
	$(DIRECTORY)/progs/es2/*/*.[ch]			\
	$(DIRECTORY)/progs/openvg/*/Makefile		\
	$(DIRECTORY)/progs/openvg/*/*.[ch]		\
	$(DIRECTORY)/progs/fbdev/Makefile		\
	$(DIRECTORY)/progs/fbdev/glfbdevtest.c		\
	$(DIRECTORY)/progs/objviewer/*.[ch]		\
	$(DIRECTORY)/progs/objviewer/*.obj		\
	$(DIRECTORY)/progs/objviewer/*.mtl		\
	$(DIRECTORY)/progs/objviewer/*.rgb		\
	$(DIRECTORY)/progs/objviewer/Makefile		\
	$(DIRECTORY)/progs/objviewer/README.txt		\
	$(DIRECTORY)/progs/osdemos/Makefile		\
	$(DIRECTORY)/progs/osdemos/*.c			\
	$(DIRECTORY)/progs/xdemos/Makefile*		\
	$(DIRECTORY)/progs/xdemos/*.[chf]		\
	$(DIRECTORY)/progs/redbook/Makefile*		\
	$(DIRECTORY)/progs/redbook/README		\
	$(DIRECTORY)/progs/redbook/*.[ch]		\
	$(DIRECTORY)/progs/samples/Makefile*		\
	$(DIRECTORY)/progs/samples/README		\
	$(DIRECTORY)/progs/samples/*.c			\
	$(DIRECTORY)/progs/glsl/Makefile*		\
	$(DIRECTORY)/progs/glsl/*.c			\
	$(DIRECTORY)/progs/glsl/*.frag			\
	$(DIRECTORY)/progs/glsl/*.vert			\
	$(DIRECTORY)/progs/glsl/*.shtest

d420 1
d439 1
d449 2
a450 2
tarballs: rm_depend configure aclocal.m4 lib_gz demo_gz glut_gz \
	lib_bz2 demo_bz2 glut_bz2 lib_zip demo_zip glut_zip md5
a478 6
demo_gz:
	cd .. ; \
	tar -cf $(DEMO_NAME).tar $(DEMO_FILES) ; \
	gzip $(DEMO_NAME).tar ; \
	mv $(DEMO_NAME).tar.gz $(DIRECTORY)

a490 6
demo_bz2:
	cd .. ; \
	tar -cf $(DEMO_NAME).tar $(DEMO_FILES) ; \
	bzip2 $(DEMO_NAME).tar ; \
	mv $(DEMO_NAME).tar.bz2 $(DIRECTORY)

a502 6
demo_zip:
	rm -f $(DEMO_NAME).zip ; \
	cd .. ; \
	zip -qr $(DEMO_NAME).zip $(DEMO_FILES) ; \
	mv $(DEMO_NAME).zip $(DIRECTORY)

a512 3
	@@-md5sum $(DEMO_NAME).tar.gz
	@@-md5sum $(DEMO_NAME).tar.bz2
	@@-md5sum $(DEMO_NAME).zip
d518 3
a520 3
	lib_gz demo_gz glut_gz \
	lib_bz2 demo_bz2 glut_bz2 \
	lib_zip demo_zip glut_zip
@


1.6
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@d183 1
a183 1
VERSION=7.8.1
@


1.5
log
@Update to Mesa 7.4.2. Tested by oga@@, ckuethe@@ and naddy@@.
@
text
@d15 2
d51 1
a51 7
# DirectFBGL module installation
linux-directfb-install:
	cd src/mesa/drivers/directfb && $(MAKE) install


.PHONY: default doxygen clean realclean distclean install linux-directfb-install

a82 2
darwin-static \
darwin-static-x86ppc \
d106 1
d109 2
a111 1
linux-directfb \
d118 1
a120 1
linux-glide \
d125 3
d129 1
d135 1
a135 3
linux-solo \
linux-solo-x86 \
linux-solo-ia64 \
d146 1
d148 1
a148 1
linux-x86-glide \
d170 7
a176 3
	@@ if test -f configs/current || test -L configs/current ; then \
		echo "Please run 'make realclean' before changing configs" ; \
		exit 1 ; \
a177 1
	(cd configs && rm -f current && ln -s $@@ current)
d183 1
a183 1
VERSION=7.4.1
a194 2
	$(DIRECTORY)/descrip.mms					\
	$(DIRECTORY)/mms-config.					\
a207 2
	$(DIRECTORY)/include/GL/dmesa.h					\
	$(DIRECTORY)/include/GL/ggimesa.h				\
a219 1
	$(DIRECTORY)/include/GL/svgamesa.h				\
d221 1
d223 7
a230 1
	$(DIRECTORY)/src/descrip.mms					\
d232 1
a232 1
	$(DIRECTORY)/src/mesa/sources					\
a239 1
	$(DIRECTORY)/src/mesa/glapi/descrip.mms				\
d242 2
a243 1
	$(DIRECTORY)/src/mesa/shader/*.[ch]				\
a244 2
	$(DIRECTORY)/src/mesa/shader/grammar/*.[ch]			\
	$(DIRECTORY)/src/mesa/shader/grammar/descrip.mms		\
a246 1
	$(DIRECTORY)/src/mesa/shader/slang/library/*.[ch]		\
a247 1
	$(DIRECTORY)/src/mesa/shader/slang/library/*.syn		\
a264 3
	$(DIRECTORY)/src/mesa/drivers/directfb/*.[ch]			\
	$(DIRECTORY)/src/mesa/drivers/directfb/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/dos/*.[chS]			\
a266 8
	$(DIRECTORY)/src/mesa/drivers/glide/*.[ch]			\
	$(DIRECTORY)/src/mesa/drivers/ggi/*.[ch]			\
	$(DIRECTORY)/src/mesa/drivers/ggi/ggimesa.conf.in		\
	$(DIRECTORY)/src/mesa/drivers/ggi/default/*.c			\
	$(DIRECTORY)/src/mesa/drivers/ggi/default/genkgi.conf.in	\
	$(DIRECTORY)/src/mesa/drivers/ggi/display/*.c			\
	$(DIRECTORY)/src/mesa/drivers/ggi/display/fbdev.conf.in		\
	$(DIRECTORY)/src/mesa/drivers/ggi/include/ggi/mesa/*.h		\
a271 1
	$(DIRECTORY)/src/mesa/drivers/svga/*.[ch]			\
a290 3
	$(DIRECTORY)/vms/analyze_map.com				\
	$(DIRECTORY)/vms/xlib.opt					\
	$(DIRECTORY)/vms/xlib_share.opt					\
d293 47
d346 2
a347 2
	$(DIRECTORY)/src/glx/x11/Makefile				\
	$(DIRECTORY)/src/glx/x11/*.[ch]					\
d354 1
d356 1
a361 1
	$(DIRECTORY)/src/glu/descrip.mms				\
a365 1
	$(DIRECTORY)/src/glu/sgi/Makefile.DJ				\
a367 1
	$(DIRECTORY)/src/glu/sgi/descrip.mms				\
a382 9
MESA_GLU_FILES = \
	$(DIRECTORY)/src/glu/mesa/README[12]		\
	$(DIRECTORY)/src/glu/mesa/Makefile*		\
	$(DIRECTORY)/src/glu/mesa/descrip.mms		\
	$(DIRECTORY)/src/glu/mesa/mms_depend		\
	$(DIRECTORY)/src/glu/mesa/*.def			\
	$(DIRECTORY)/src/glu/mesa/depend		\
	$(DIRECTORY)/src/glu/mesa/*.[ch]

d390 9
d400 1
d411 8
d421 6
a429 1
	$(DIRECTORY)/progs/xdemos/descrip.mms		\
d441 1
a441 8
	$(DIRECTORY)/progs/windml/Makefile.ugl		\
	$(DIRECTORY)/progs/windml/*.c			\
	$(DIRECTORY)/progs/windml/*.bmp			\
	$(DIRECTORY)/progs/ggi/*.c			\
	$(DIRECTORY)/windows/VC6/progs/demos/*.dsp	\
	$(DIRECTORY)/windows/VC6/progs/progs.dsw	\
	$(DIRECTORY)/windows/VC7/progs/demos/*.vcproj	\
	$(DIRECTORY)/windows/VC7/progs/progs.sln
a449 2
	$(DIRECTORY)/src/glut/glx/descrip.mms		\
	$(DIRECTORY)/src/glut/glx/mms_depend		\
d453 1
a453 15
	$(DIRECTORY)/src/glut/beos/Makefile		\
	$(DIRECTORY)/src/glut/dos/*.[ch]		\
	$(DIRECTORY)/src/glut/dos/Makefile.DJ		\
	$(DIRECTORY)/src/glut/dos/PC_HW/*.[chS]		\
	$(DIRECTORY)/src/glut/ggi/*.[ch]		\
	$(DIRECTORY)/src/glut/ggi/Makefile		\
	$(DIRECTORY)/src/glut/fbdev/Makefile		\
	$(DIRECTORY)/src/glut/fbdev/*[ch]		\
	$(DIRECTORY)/src/glut/mini/*[ch]		\
	$(DIRECTORY)/src/glut/mini/glut.pc.in		\
	$(DIRECTORY)/src/glut/directfb/Makefile		\
	$(DIRECTORY)/src/glut/directfb/NOTES		\
	$(DIRECTORY)/src/glut/directfb/*[ch]		\
	$(DIRECTORY)/windows/VC6/progs/glut/glut.dsp	\
	$(DIRECTORY)/windows/VC7/progs/glut/glut.vcproj
d457 1
a457 1
	$(TOP)/src/glx/x11/depend	\
d463 8
a470 1
LIB_FILES = $(MAIN_FILES) $(DRI_FILES) $(SGI_GLU_FILES) $(GLW_FILES)
d494 5
a498 3
lib_gz:
	rm -f configs/current ; \
	rm -f configs/autoconf ; \
d516 1
a516 3
lib_bz2:
	rm -f configs/current ; \
	rm -f configs/autoconf ; \
d534 1
a534 3
lib_zip:
	rm -f configs/current ; \
	rm -f configs/autoconf ; \
d563 4
a566 2
.PHONY: tarballs rm_depend lib_gz demo_gz glut_gz lib_bz2 demo_bz2 \
	glut_bz2 lib_zip demo_zip glut_zip md5
@


1.4
log
@Mesa 7.2, Tested by ckuethe@@, naddy@@, oga@@, and others.
@
text
@d38 2
d53 3
a55 1
.PHONY: default doxygen clean realclean install linux-directfb-install
d181 5
a185 4
DIRECTORY = Mesa-7.2
LIB_NAME = MesaLib-7.2
DEMO_NAME = MesaDemos-7.2
GLUT_NAME = MesaGLUT-7.2
a207 1
	$(DIRECTORY)/include/GL/amesa.h					\
a208 1
	$(DIRECTORY)/include/GL/fxmesa.h				\
a222 1
	$(DIRECTORY)/include/GL/ugl*.h					\
a224 4
	$(DIRECTORY)/include/GL/xmesa.h					\
	$(DIRECTORY)/include/GL/xmesa_x.h				\
	$(DIRECTORY)/include/GL/xmesa_xf86.h				\
	$(DIRECTORY)/include/GLView.h					\
d231 1
d289 2
d306 1
a306 8
	$(DIRECTORY)/windows/VC8/mesa/mesa.sln				\
	$(DIRECTORY)/windows/VC8/mesa/gdi/gdi.vcproj			\
	$(DIRECTORY)/windows/VC8/mesa/glu/glu.vcproj			\
	$(DIRECTORY)/windows/VC8/mesa/mesa/mesa.vcproj			\
	$(DIRECTORY)/windows/VC8/mesa/osmesa/osmesa.vcproj		\
	$(DIRECTORY)/windows/VC8/progs/progs.sln			\
	$(DIRECTORY)/windows/VC8/progs/demos/gears.vcproj		\
	$(DIRECTORY)/windows/VC8/progs/glut/glut.vcproj
d311 1
a311 1
	$(DIRECTORY)/include/GL/internal/dri_sarea.h			\
@


1.3
log
@Update to Mesa 7.0.3. tested my oga@@ and johan@@
@
text
@d17 1
a17 1
	(cd doxygen ; make) ; \
d20 2
a21 1
	@@for dir in $(SUBDIRS) ; do \
d26 1
d29 1
a29 3
realclean:
	touch $(TOP)/configs/current
	$(MAKE) clean
d32 4
a35 4
	-rm -f `find . -name \*.o`
	-rm -f `find . -name \*.a`
	-rm -f `find . -name \*.so`
	-rm -f `find . -name depend`
d51 2
d58 1
a58 1
	@@ls -1 $(TOP)/configs | grep -v "current\|default\|CVS"
d61 4
d75 1
a75 1
beos \
d78 1
d177 4
a180 4
DIRECTORY = Mesa-7.0.3
LIB_NAME = MesaLib-7.0.3
DEMO_NAME = MesaDemos-7.0.3
GLUT_NAME = MesaGLUT-7.0.3
d184 4
d190 3
d195 1
a235 1
	$(DIRECTORY)/src/mesa/main/sources				\
a237 1
	$(DIRECTORY)/src/mesa/glapi/sources				\
a239 1
	$(DIRECTORY)/src/mesa/math/sources				\
a241 1
	$(DIRECTORY)/src/mesa/shader/sources				\
a243 1
	$(DIRECTORY)/src/mesa/shader/grammar/sources			\
a245 1
	$(DIRECTORY)/src/mesa/shader/slang/sources			\
a251 1
	$(DIRECTORY)/src/mesa/swrast/sources				\
a253 1
	$(DIRECTORY)/src/mesa/swrast_setup/sources			\
a257 1
	$(DIRECTORY)/src/mesa/tnl/sources				\
d261 1
a265 1
	$(DIRECTORY)/src/mesa/drivers/common/sources			\
d269 1
d279 1
d287 1
a288 1
	$(DIRECTORY)/src/mesa/drivers/x11/sources			\
d317 1
d324 1
d343 2
d400 2
a401 1
	$(DIRECTORY)/progs/glsl/*.txt			\
d451 2
a452 1
tarballs: rm_depend lib_gz demo_gz glut_gz lib_bz2 demo_bz2 glut_bz2 lib_zip demo_zip glut_zip md5
d455 10
d473 1
d493 1
d513 1
d541 3
@


1.2
log
@Update to Mesa 7.0.2. Tested by naddy@@ (full ports build), simon@@
and oga@@ (with dri enabled).
@
text
@d74 2
a77 1
darwin-x86ppc \
d170 4
a173 4
DIRECTORY = Mesa-7.0.2
LIB_NAME = MesaLib-7.0.2
DEMO_NAME = MesaDemos-7.0.2
GLUT_NAME = MesaGLUT-7.0.2
d359 1
d419 1
a429 1
	$(TOP)/src/glw/glw.pc.in	\
@


1.1
log
@Initial revision
@
text
@d10 3
a12 1
		(cd $$dir ; $(MAKE)) || exit 1 ; \
d21 3
a23 1
		(cd $$dir ; $(MAKE) clean) ; \
d41 3
a43 1
		(cd $$dir ; $(MAKE) install) || exit 1 ; \
d46 1
d70 3
d105 1
d157 1
d159 1
a159 1
	@@ if [ -e configs/current ] ; then \
d169 4
a172 4
DIRECTORY = Mesa-6.5.1
LIB_NAME = MesaLib-6.5.1
DEMO_NAME = MesaDemos-6.5.1
GLUT_NAME = MesaGLUT-6.5.1
d179 1
a188 1
	$(DIRECTORY)/include/GL/directfbgl.h				\
d216 1
d220 1
d223 1
a223 2
	$(DIRECTORY)/src/mesa/array_cache/*.[ch]			\
	$(DIRECTORY)/src/mesa/array_cache/descrip.mms			\
d226 1
d229 1
d232 1
d235 1
d237 3
d242 1
d245 3
d250 1
d258 1
d279 1
d296 9
a304 11
	$(DIRECTORY)/windows/VC6/mesa/gdi/gdi.dsp			\
	$(DIRECTORY)/windows/VC6/mesa/glu/*.txt				\
	$(DIRECTORY)/windows/VC6/mesa/glu/glu.dsp			\
	$(DIRECTORY)/windows/VC6/mesa/mesa.dsw				\
	$(DIRECTORY)/windows/VC6/mesa/mesa/mesa.dsp			\
	$(DIRECTORY)/windows/VC6/mesa/osmesa/osmesa.dsp			\
	$(DIRECTORY)/windows/VC7/mesa/gdi/gdi.vcproj			\
	$(DIRECTORY)/windows/VC7/mesa/glu/glu.vcproj			\
	$(DIRECTORY)/windows/VC7/mesa/mesa.sln				\
	$(DIRECTORY)/windows/VC7/mesa/mesa/mesa.vcproj			\
	$(DIRECTORY)/windows/VC7/mesa/osmesa/osmesa.vcproj
d324 1
d326 1
d371 2
d384 3
d401 1
d417 3
d427 1
@


1.1.1.1
log
@Import MesaLibs 6.5.1. (in dist/ since its code is shared between lib 
and xserver)...
@
text
@@


1.1.1.2
log
@import MesaLibs version 6.5.2
@
text
@d157 4
a160 4
DIRECTORY = Mesa-6.5.2
LIB_NAME = MesaLib-6.5.2
DEMO_NAME = MesaDemos-6.5.2
GLUT_NAME = MesaGLUT-6.5.2
a166 1
	$(DIRECTORY)/bin/minstall					\
d176 1
a206 1
	$(DIRECTORY)/src/mesa/main/sources				\
a208 1
	$(DIRECTORY)/src/mesa/glapi/sources				\
a210 1
	$(DIRECTORY)/src/mesa/array_cache/sources			\
a212 1
	$(DIRECTORY)/src/mesa/math/sources				\
a214 1
	$(DIRECTORY)/src/mesa/shader/sources				\
a216 1
	$(DIRECTORY)/src/mesa/shader/grammar/sources			\
a218 1
	$(DIRECTORY)/src/mesa/shader/slang/sources			\
a221 1
	$(DIRECTORY)/src/mesa/swrast/sources				\
a223 1
	$(DIRECTORY)/src/mesa/swrast_setup/sources			\
a225 1
	$(DIRECTORY)/src/mesa/tnl/sources				\
a232 1
	$(DIRECTORY)/src/mesa/drivers/common/sources			\
a252 1
	$(DIRECTORY)/src/mesa/drivers/x11/sources			\
@


1.1.1.3
log
@Mesa 7.0.1
@
text
@a2 2
SHELL = /bin/bash

d10 1
a10 3
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE)) || exit 1 ; \
		fi \
d19 1
a19 3
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) clean) ; \
		fi \
d37 1
a37 3
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) install) || exit 1 ; \
		fi \
a39 1

a62 1
bluegene-osmesa \
a94 1
linux-dri-debug \
a145 1
sunos5-v9-cc-g++ \
d157 4
a160 4
DIRECTORY = Mesa-7.0.1
LIB_NAME = MesaLib-7.0.1
DEMO_NAME = MesaDemos-7.0.1
GLUT_NAME = MesaGLUT-7.0.1
d211 3
a226 3
	$(DIRECTORY)/src/mesa/shader/slang/library/*.gc			\
	$(DIRECTORY)/src/mesa/shader/slang/library/*.syn		\
	$(DIRECTORY)/src/mesa/shader/slang/library/Makefile		\
a232 2
	$(DIRECTORY)/src/mesa/vbo/*.[chS]				\
	$(DIRECTORY)/src/mesa/vbo/descrip.mms				\
d281 11
a291 9
	$(DIRECTORY)/windows/VC8/mesa/mesa.sln				\
	$(DIRECTORY)/windows/VC8/mesa/gdi/gdi.vcproj			\
	$(DIRECTORY)/windows/VC8/mesa/glu/glu.vcproj			\
	$(DIRECTORY)/windows/VC8/mesa/mesa/mesa.vcproj			\
	$(DIRECTORY)/windows/VC8/mesa/osmesa/osmesa.vcproj		\
	$(DIRECTORY)/windows/VC8/progs/progs.sln			\
	$(DIRECTORY)/windows/VC8/progs/demos/gears.vcproj		\
	$(DIRECTORY)/windows/VC8/progs/glut/glut.vcproj

a311 1
	$(DIRECTORY)/src/glu/sgi/Makefile.mgw				\
a355 2
	$(DIRECTORY)/progs/fbdev/Makefile		\
	$(DIRECTORY)/progs/fbdev/glfbdevtest.c		\
a366 3
	$(DIRECTORY)/progs/glsl/Makefile*		\
	$(DIRECTORY)/progs/glsl/*.c			\
	$(DIRECTORY)/progs/glsl/*.txt			\
@


1.1.1.4
log
@Import Mesa 7.10.3
@
text
@d3 2
d7 1
a7 1
SUBDIRS = src
a16 2
all: default

d19 1
a19 1
	cd doxygen && $(MAKE)
d22 1
a22 2
	-@@touch $(TOP)/configs/current
	-@@for dir in $(SUBDIRS) ; do \
a26 1
	-@@test -s $(TOP)/configs/current || rm -f $(TOP)/configs/current
d29 3
a31 1
realclean: clean
d34 4
a37 4
	-rm -f $(TOP)/configs/autoconf
	-rm -rf autom4te.cache
	-find . '(' -name '*.o' -o -name '*.a' -o -name '*.so' -o \
	  -name depend -o -name depend.bak ')' -exec rm -f '{}' ';'
a39 2
distclean: realclean

d49 3
a51 1
.PHONY: default doxygen clean realclean distclean install
d58 1
a58 1
	@@ls -1 $(TOP)/configs | grep -v "current\|default\|CVS\|autoconf.*"
a60 4
	@@echo
	@@echo "Or, run './configure' then 'make'"
	@@echo "See './configure --help' for details"
	@@echo
d71 1
a71 1
autoconf \
a72 3
bluegene-xlc-osmesa \
beos \
catamount-osmesa-pgi \
d74 3
a76 2
darwin-fat-32bit \
darwin-fat-all \
a99 1
linux-i965 \
a101 2
linux-cell \
linux-cell-debug \
d103 1
a109 1
linux-egl \
d112 1
a116 3
linux-llvm \
linux-llvm-debug \
linux-opengl-es \
a117 1
linux-osmesa-static \
d123 3
a125 1
linux-profile \
a135 1
linux-x86-64-profile \
d137 1
a137 1
linux-x86-profile \
d159 3
a161 7
	@@ if test -f configs/current -o -L configs/current; then \
		if ! cmp configs/$@@ configs/current > /dev/null; then \
			echo "Please run 'make realclean' before changing configs" ; \
			exit 1 ; \
		fi ; \
	else \
		cd configs && rm -f current && ln -s $@@ current ; \
d163 1
d169 4
a172 10
VERSION=7.10.3
DIRECTORY = Mesa-$(VERSION)
LIB_NAME = MesaLib-$(VERSION)
GLUT_NAME = MesaGLUT-$(VERSION)

# This is part of MAIN_FILES
MAIN_ES_FILES = \
	$(DIRECTORY)/src/mesa/main/*.xml				\
	$(DIRECTORY)/src/mesa/main/*.py					\
	$(DIRECTORY)/src/mesa/main/*.dtd
d176 2
a177 10
	$(DIRECTORY)/configure						\
	$(DIRECTORY)/configure.ac					\
	$(DIRECTORY)/acinclude.m4					\
	$(DIRECTORY)/aclocal.m4						\
	$(DIRECTORY)/SConstruct						\
	$(DIRECTORY)/common.py						\
	$(DIRECTORY)/scons/*py						\
	$(DIRECTORY)/bin/config.guess					\
	$(DIRECTORY)/bin/config.sub					\
	$(DIRECTORY)/bin/install-sh					\
a179 1
	$(DIRECTORY)/bin/version.mk					\
d186 5
d201 1
d203 2
a205 1
	$(DIRECTORY)/include/GL/wglext.h				\
d207 4
a210 9
	$(DIRECTORY)/include/c99/*.h					\
	$(DIRECTORY)/src/glsl/Makefile					\
	$(DIRECTORY)/src/glsl/Makefile.template				\
	$(DIRECTORY)/src/glsl/SConscript				\
	$(DIRECTORY)/src/glsl/*.[ch]					\
	$(DIRECTORY)/src/glsl/*.[cly]pp					\
	$(DIRECTORY)/src/glsl/README					\
	$(DIRECTORY)/src/glsl/glcpp/*.[chly]				\
	$(DIRECTORY)/src/glsl/glcpp/README				\
d212 1
a212 1
	$(DIRECTORY)/src/SConscript					\
d214 1
a214 2
	$(DIRECTORY)/src/mesa/SConscript				\
	$(DIRECTORY)/src/mesa/sources.mak				\
a215 2
	$(DIRECTORY)/src/mesa/gl.pc.in					\
	$(DIRECTORY)/src/mesa/osmesa.pc.in				\
a216 1
	$(MAIN_ES_FILES)						\
d219 4
d225 14
a238 4
	$(DIRECTORY)/src/mesa/program/*.[chly]				\
	$(DIRECTORY)/src/mesa/program/*.cpp				\
	$(DIRECTORY)/src/mesa/program/Makefile				\
	$(DIRECTORY)/src/mesa/program/descrip.mms			\
d241 1
d244 1
d249 1
a252 2
	$(DIRECTORY)/src/mesa/vf/*.[ch]					\
	$(DIRECTORY)/src/mesa/drivers/Makefile				\
d257 4
a260 1
	$(DIRECTORY)/src/mesa/drivers/fbdev/Makefile			\
d262 8
a269 1
	$(DIRECTORY)/src/mesa/drivers/osmesa/Makefile			\
d274 1
a274 3
	$(DIRECTORY)/src/mesa/drivers/dri/r300/compiler/*.[ch]		\
	$(DIRECTORY)/src/mesa/drivers/dri/r300/compiler/Makefile	\
	$(DIRECTORY)/src/mesa/drivers/dri/r300/compiler/SConscript	\
a276 1
	$(DIRECTORY)/src/mesa/drivers/x11/Makefile			\
d278 1
d288 15
a302 1
	$(DIRECTORY)/windows/VC8/
a303 70
MAPI_FILES = \
	$(DIRECTORY)/include/GLES/*.h					\
	$(DIRECTORY)/include/GLES2/*.h					\
	$(DIRECTORY)/include/VG/*.h					\
	$(DIRECTORY)/src/mapi/es?api/Makefile				\
	$(DIRECTORY)/src/mapi/es?api/*.pc.in				\
	$(DIRECTORY)/src/mapi/glapi/gen/Makefile			\
	$(DIRECTORY)/src/mapi/glapi/gen/*.xml				\
	$(DIRECTORY)/src/mapi/glapi/gen/*.py				\
	$(DIRECTORY)/src/mapi/glapi/gen/*.dtd				\
	$(DIRECTORY)/src/mapi/glapi/gen-es/Makefile			\
	$(DIRECTORY)/src/mapi/glapi/gen-es/*.xml			\
	$(DIRECTORY)/src/mapi/glapi/gen-es/*.py				\
	$(DIRECTORY)/src/mapi/glapi/Makefile				\
	$(DIRECTORY)/src/mapi/glapi/SConscript				\
	$(DIRECTORY)/src/mapi/glapi/sources.mak				\
	$(DIRECTORY)/src/mapi/glapi/*.[chS]				\
	$(DIRECTORY)/src/mapi/mapi/mapi_abi.py				\
	$(DIRECTORY)/src/mapi/mapi/sources.mak				\
	$(DIRECTORY)/src/mapi/mapi/*.[ch]				\
	$(DIRECTORY)/src/mapi/vgapi/Makefile				\
	$(DIRECTORY)/src/mapi/vgapi/SConscript				\
	$(DIRECTORY)/src/mapi/vgapi/vgapi.csv				\
	$(DIRECTORY)/src/mapi/vgapi/vg.pc.in

EGL_FILES = \
	$(DIRECTORY)/include/KHR/*.h					\
	$(DIRECTORY)/include/EGL/*.h					\
	$(DIRECTORY)/src/egl/Makefile					\
	$(DIRECTORY)/src/egl/*/Makefile					\
	$(DIRECTORY)/src/egl/*/Makefile.template			\
	$(DIRECTORY)/src/egl/*/*.[ch]					\
	$(DIRECTORY)/src/egl/*/*/Makefile				\
	$(DIRECTORY)/src/egl/*/*/*.[ch]					\
	$(DIRECTORY)/src/egl/main/SConscript				\
	$(DIRECTORY)/src/egl/main/*.pc.in				\
	$(DIRECTORY)/src/egl/main/*.def

GALLIUM_FILES = \
	$(DIRECTORY)/src/mesa/state_tracker/*[ch]			\
	$(DIRECTORY)/src/gallium/Makefile				\
	$(DIRECTORY)/src/gallium/Makefile.template			\
	$(DIRECTORY)/src/gallium/SConscript				\
	$(DIRECTORY)/src/gallium/targets/Makefile.dri			\
	$(DIRECTORY)/src/gallium/targets/Makefile.xorg			\
	$(DIRECTORY)/src/gallium/targets/SConscript.dri			\
	$(DIRECTORY)/src/gallium/*/Makefile				\
	$(DIRECTORY)/src/gallium/*/SConscript				\
	$(DIRECTORY)/src/gallium/*/*/Makefile				\
	$(DIRECTORY)/src/gallium/*/*/SConscript				\
	$(DIRECTORY)/src/gallium/*/*/*.[ch]				\
	$(DIRECTORY)/src/gallium/auxiliary/gallivm/*.cpp		\
	$(DIRECTORY)/src/gallium/*/*/*.py				\
	$(DIRECTORY)/src/gallium/*/*/*.csv				\
	$(DIRECTORY)/src/gallium/*/*/*/Makefile				\
	$(DIRECTORY)/src/gallium/*/*/*/SConscript			\
	$(DIRECTORY)/src/gallium/*/*/*/*.[ch]				\
	$(DIRECTORY)/src/gallium/*/*/*/*.py

APPLE_DRI_FILES = \
	$(DIRECTORY)/src/glx/apple/Makefile 				\
	$(DIRECTORY)/src/glx/apple/*.[ch]				\
	$(DIRECTORY)/src/glx/apple/*.tcl				\
	$(DIRECTORY)/src/glx/apple/apple_exports.list			\
	$(DIRECTORY)/src/glx/apple/GL_aliases				\
	$(DIRECTORY)/src/glx/apple/GL_extensions			\
	$(DIRECTORY)/src/glx/apple/GL_noop				\
	$(DIRECTORY)/src/glx/apple/GL_promoted				\
	$(DIRECTORY)/src/glx/apple/specs/*.spec				\
	$(DIRECTORY)/src/glx/apple/specs/*.tm
d309 2
a310 2
	$(DIRECTORY)/src/glx/*.[ch]					\
	$(APPLE_DRI_FILES)						\
d313 1
a313 1
	$(DIRECTORY)/src/mesa/drivers/dri/dri.pc.in			\
a315 2
	$(DIRECTORY)/src/mesa/drivers/dri/*/*.cpp			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/*/*.[chS]			\
d317 2
a318 2
	$(DIRECTORY)/src/mesa/drivers/dri/*/*/Makefile			\
	$(DIRECTORY)/src/mesa/drivers/dri/*/Doxyfile
d322 1
a322 1
	$(DIRECTORY)/src/glu/glu.pc.in					\
d326 1
d329 1
a329 2
	$(DIRECTORY)/src/glu/sgi/glu.exports				\
	$(DIRECTORY)/src/glu/sgi/glu.exports.darwin			\
d343 9
a355 1
	$(DIRECTORY)/src/glw/glw.pc.in			\
d358 36
a397 1
	$(DIRECTORY)/src/glut/glx/SConscript		\
a398 1
	$(DIRECTORY)/src/glut/glx/glut.pc.in		\
d400 2
d405 11
a415 1
	$(DIRECTORY)/src/glut/beos/Makefile
d419 1
a419 1
	$(TOP)/src/glx/depend		\
d425 1
a425 9
LIB_FILES = \
	$(MAIN_FILES)		\
	$(MAPI_FILES)		\
	$(ES_FILES)		\
	$(EGL_FILES)		\
	$(GALLIUM_FILES)	\
	$(DRI_FILES)		\
	$(SGI_GLU_FILES)	\
	$(GLW_FILES)
d429 1
a429 2
tarballs: rm_depend configure aclocal.m4 lib_gz glut_gz \
	lib_bz2 glut_bz2 lib_zip glut_zip md5
a431 10
# Helper for autoconf builds
ACLOCAL = aclocal
ACLOCAL_FLAGS =
AUTOCONF = autoconf
AC_FLAGS =
aclocal.m4: configure.ac acinclude.m4
	$(ACLOCAL) $(ACLOCAL_FLAGS)
configure: configure.ac aclocal.m4 acinclude.m4
	$(AUTOCONF) $(AC_FLAGS)

d438 2
a439 5
rm_config:
	rm -f configs/current
	rm -f configs/autoconf

lib_gz: rm_config
d445 6
d457 2
a458 1
lib_bz2: rm_config
d464 6
d476 2
a477 1
lib_zip: rm_config
d483 6
d499 3
a504 5

.PHONY: tarballs rm_depend rm_config md5 \
	lib_gz glut_gz \
	lib_bz2 glut_bz2 \
	lib_zip glut_zip
@


