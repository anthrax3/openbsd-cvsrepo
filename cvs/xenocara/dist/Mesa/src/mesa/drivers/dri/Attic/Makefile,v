head	1.5;
access;
symbols
	OPENBSD_5_4:1.4.0.14
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.12
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.10
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.8
	v7_10_3:1.1.1.3
	OPENBSD_5_0:1.4.0.6
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.2.0.4
	OPENBSD_4_4_BASE:1.1.1.2
	OPENBSD_4_3_BASE:1.1.1.2
	OPENBSD_4_3:1.1.1.2.0.2
	v7_0_1:1.1.1.2
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v6_5_2:1.1.1.1
	v6_5_1:1.1.1.1
	mesa:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2013.09.05.14.04.03;	author jsg;	state dead;
branches;
next	1.4;

1.4
date	2010.05.22.20.06.16;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2009.05.17.20.26.38;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.02.14.58.13;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.25.18.52.07;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.25.18.52.07;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.11.24.17.27.43;	author matthieu;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2011.10.23.13.29.35;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Merge Mesa 9.2.0
@
text
@# src/mesa/drivers/dri/Makefile

TOP = ../../../..

include $(TOP)/configs/current



default: $(TOP)/$(LIB_DIR) subdirs dri.pc


$(TOP)/$(LIB_DIR):
	-mkdir $(TOP)/$(LIB_DIR)


subdirs:
	@@for dir in $(DRI_DIRS) ; do \
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE)) || exit 1 ; \
		fi \
	done

pcedit = sed \
	-e 's,@@INSTALL_DIR@@,$(INSTALL_DIR),' \
	-e 's,@@INSTALL_LIB_DIR@@,$(INSTALL_LIB_DIR),' \
	-e 's,@@INSTALL_INC_DIR@@,$(INSTALL_INC_DIR),' \
	-e 's,@@VERSION@@,$(MESA_MAJOR).$(MESA_MINOR).$(MESA_TINY),' \
	-e 's,@@DRI_DRIVER_DIR@@,$(DRI_DRIVER_INSTALL_DIR),' \
	-e 's,@@DRI_PC_REQ_PRIV@@,$(DRI_PC_REQ_PRIV),'

dri.pc: dri.pc.in
	$(pcedit) $< > $@@


install: dri.pc
	@@for dir in $(DRI_DIRS) ; do \
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) install) || exit 1 ; \
		fi \
	done
	$(INSTALL) -d $(DESTDIR)$(INSTALL_INC_DIR)/GL/internal
	$(INSTALL) -m 0644 $(TOP)/include/GL/internal/dri_interface.h \
	  $(DESTDIR)$(INSTALL_INC_DIR)/GL/internal
	$(INSTALL) -d $(DESTDIR)$(INSTALL_LIB_DIR)/pkgconfig
	$(INSTALL) -m 0644 dri.pc $(DESTDIR)$(INSTALL_LIB_DIR)/pkgconfig


clean:
	-@@for dir in $(DRI_DIRS) ; do \
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) clean) ; \
		fi \
	done
	-rm -f common/*.o
	-rm -f *.pc
@


1.4
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@@


1.3
log
@Update to Mesa 7.4.2. Tested by oga@@, ckuethe@@ and naddy@@.
@
text
@d9 1
a9 1
default: $(TOP)/$(LIB_DIR) subdirs
d28 1
a28 1
	-e 's,@@DRI_DRIVER_DIR@@,$(DRI_DRIVER_SEARCH_DIR),' \
@


1.2
log
@Mesa 7.2, Tested by ckuethe@@, naddy@@, oga@@, and others.
@
text
@d28 2
a29 1
	-e 's,@@DRI_DRIVER_DIR@@,$(DRI_DRIVER_SEARCH_DIR),'
a42 2
	  $(DESTDIR)$(INSTALL_INC_DIR)/GL/internal
	$(INSTALL) -m 0644 $(TOP)/include/GL/internal/dri_sarea.h \
@


1.1
log
@Initial revision
@
text
@a16 1
	echo $(DRI_DIRS)
d18 3
a20 2
		echo $$dir ; \
		(cd $$dir && $(MAKE)) || exit 1; \
d23 6
d30 5
a34 1
install:
d36 3
a38 1
		(cd $$dir && $(MAKE) install) || exit 1; \
d40 7
d50 4
a53 2
	@@for dir in $(DRI_DIRS) ; do \
		(cd $$dir && $(MAKE) clean) ; \
d56 1
@


1.1.1.1
log
@Import MesaLibs 6.5.1. (in dist/ since its code is shared between lib 
and xserver)...
@
text
@@


1.1.1.2
log
@Mesa 7.0.1
@
text
@d17 1
d19 2
a20 3
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE)) || exit 1 ; \
		fi \
d26 1
a26 3
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) install) || exit 1 ; \
		fi \
d32 1
a32 3
		if [ -d $$dir ] ; then \
			(cd $$dir && $(MAKE) clean) ; \
		fi \
@


1.1.1.3
log
@Import Mesa 7.10.3
@
text
@d9 1
a9 1
default: $(TOP)/$(LIB_DIR) subdirs dri.pc
a22 7
pcedit = sed \
	-e 's,@@INSTALL_DIR@@,$(INSTALL_DIR),' \
	-e 's,@@INSTALL_LIB_DIR@@,$(INSTALL_LIB_DIR),' \
	-e 's,@@INSTALL_INC_DIR@@,$(INSTALL_INC_DIR),' \
	-e 's,@@VERSION@@,$(MESA_MAJOR).$(MESA_MINOR).$(MESA_TINY),' \
	-e 's,@@DRI_DRIVER_DIR@@,$(DRI_DRIVER_INSTALL_DIR),' \
	-e 's,@@DRI_PC_REQ_PRIV@@,$(DRI_PC_REQ_PRIV),'
d24 1
a24 5
dri.pc: dri.pc.in
	$(pcedit) $< > $@@


install: dri.pc
a29 5
	$(INSTALL) -d $(DESTDIR)$(INSTALL_INC_DIR)/GL/internal
	$(INSTALL) -m 0644 $(TOP)/include/GL/internal/dri_interface.h \
	  $(DESTDIR)$(INSTALL_INC_DIR)/GL/internal
	$(INSTALL) -d $(DESTDIR)$(INSTALL_LIB_DIR)/pkgconfig
	$(INSTALL) -m 0644 dri.pc $(DESTDIR)$(INSTALL_LIB_DIR)/pkgconfig
d33 1
a33 1
	-@@for dir in $(DRI_DIRS) ; do \
a38 1
	-rm -f *.pc
@


