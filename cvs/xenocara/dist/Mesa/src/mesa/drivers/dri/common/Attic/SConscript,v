head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.1.3.0.4
	OPENBSD_5_8_BASE:1.1.1.3
	OPENBSD_5_7:1.1.1.3.0.2
	OPENBSD_5_7_BASE:1.1.1.3
	v10_2_9:1.1.1.3
	v10_4_3:1.1.1.2
	v10_2_7:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	v10_2_3:1.1.1.1
	mesa:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2015.12.23.05.17.48;	author jsg;	state dead;
branches;
next	1.1;
commitid	TnlogFl9nOv2eaRf;

1.1
date	2014.07.09.20.34.46;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;
commitid	3JhLfwcuBALP0ZR7;

1.1.1.1
date	2014.07.09.20.34.46;	author jsg;	state Exp;
branches;
next	1.1.1.2;
commitid	3JhLfwcuBALP0ZR7;

1.1.1.2
date	2015.01.25.14.11.18;	author jsg;	state Exp;
branches;
next	1.1.1.3;
commitid	ce2W5rH5aF7VS9gi;

1.1.1.3
date	2015.02.20.22.48.25;	author jsg;	state Exp;
branches;
next	;
commitid	F54a1i0WXHMxq7kE;


desc
@@


1.2
log
@remove the now unused Mesa 10.2.9 code
@
text
@###################################
# SConcscript file for dri targets

Import('*')

drienv = env.Clone()

drienv.Replace(CPPPATH = [
    '#src/mesa/drivers/dri/common',
    xmlpool_options.dir.dir, # Dir to generated xmlpool/options.h
    '#include',
    '#include/GL/internal',
    '#src/mapi',
    '#src/gallium/include',
    '#src/gallium/auxiliary',
    '#src/gallium/drivers',
    '#src/gallium/winsys',
    '#src/mesa',
    '#src/mesa/main',
    '#src/mesa/glapi',
    '#src/mesa/math',
    '#src/mesa/transform',
    '#src/mesa/shader',
    '#src/mesa/swrast',
    '#src/mesa/swrast_setup',
    '#src/egl/main',
    '#src/egl/drivers/dri',
])

driswenv = drienv.Clone()
driswenv.Append(CPPDEFINES = [
    '__NOT_HAVE_DRM_H',
    'HAVE_DLADDR',
])

drienv.PkgUseModules('DRM')

dri_common_utils = drienv.SharedObject(
    target = 'utils.o',
    source = '#src/mesa/drivers/dri/common/utils.c'
)

dri_common_xmlconfig = drienv.SharedObject(
    target = 'xmlconfig.o',
    source = '#src/mesa/drivers/dri/common/xmlconfig.c'
)

dri_common_dri_util = drienv.SharedObject(
    target = 'dri_util.o',
    source = '#src/mesa/drivers/dri/common/dri_util.c'
)

dri_common_drisw_util = driswenv.SharedObject(
    target = 'drisw_util.o',
    source = '#src/mesa/drivers/dri/common/dri_util.c'
)


COMMON_DRI_SW_OBJECTS = [
    dri_common_utils,
    dri_common_xmlconfig,
    dri_common_drisw_util,
]

COMMON_DRI_DRM_OBJECTS = [
    dri_common_utils,
    dri_common_xmlconfig,
    dri_common_dri_util,
]

drienv.AppendUnique(LIBS = [
    'expat',
])

driswenv.AppendUnique(LIBS = [
    'expat',
])

Export([
    'drienv',
    'driswenv',
    'COMMON_DRI_SW_OBJECTS',
    'COMMON_DRI_DRM_OBJECTS',
])
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Import Mesa 10.2.3
@
text
@@


1.1.1.2
log
@Import Mesa 10.4.3
@
text
@a12 1
    '#src',
d30 4
a33 2
drienv.AppendUnique(LIBS = [
    'expat',
a35 1
# if HAVE_DRI2
a36 2
# else
#env.Append(CPPDEFINES = ['__NOT_HAVE_DRM_H'])
d38 4
a41 1
sources = drienv.ParseSourceList('Makefile.sources', 'DRI_COMMON_FILES')
d43 3
a45 3
dri_common = drienv.ConvenienceLibrary(
	target = 'dri_common',
	source = sources,
d48 9
a56 11
#
# megadrivers_stub
#
env = env.Clone()

env.Append(CPPPATH = [
    '#/include',
    '#/src/',
    '#/src/mapi',
    '#/src/mesa',
])
a57 4
env.Append(CPPDEFINES = [
    '__NOT_HAVE_DRM_H',
    'HAVE_DLADDR',
])
d59 11
a69 1
sources = env.ParseSourceList('Makefile.sources', 'megadriver_stub_FILES')
d71 3
a73 4
megadrivers_stub = env.ConvenienceLibrary(
	target = 'megadrivers_stub',
	source = sources,
)
d75 3
a77 1
env.Alias('megadrivers_stub', megadrivers_stub)
d81 3
a83 2
    'dri_common',
    'megadrivers_stub',
@


1.1.1.3
log
@Import Mesa 10.2.9
@
text
@d13 1
d31 2
a32 4
driswenv = drienv.Clone()
driswenv.Append(CPPDEFINES = [
    '__NOT_HAVE_DRM_H',
    'HAVE_DLADDR',
d35 1
d37 2
d40 1
a40 4
dri_common_utils = drienv.SharedObject(
    target = 'utils.o',
    source = '#src/mesa/drivers/dri/common/utils.c'
)
d42 3
a44 3
dri_common_xmlconfig = drienv.SharedObject(
    target = 'xmlconfig.o',
    source = '#src/mesa/drivers/dri/common/xmlconfig.c'
d47 11
a57 4
dri_common_dri_util = drienv.SharedObject(
    target = 'dri_util.o',
    source = '#src/mesa/drivers/dri/common/dri_util.c'
)
d59 4
a62 4
dri_common_drisw_util = driswenv.SharedObject(
    target = 'drisw_util.o',
    source = '#src/mesa/drivers/dri/common/dri_util.c'
)
d64 1
d66 4
a69 11
COMMON_DRI_SW_OBJECTS = [
    dri_common_utils,
    dri_common_xmlconfig,
    dri_common_drisw_util,
]

COMMON_DRI_DRM_OBJECTS = [
    dri_common_utils,
    dri_common_xmlconfig,
    dri_common_dri_util,
]
d71 1
a71 7
drienv.AppendUnique(LIBS = [
    'expat',
])

driswenv.AppendUnique(LIBS = [
    'expat',
])
d75 2
a76 3
    'driswenv',
    'COMMON_DRI_SW_OBJECTS',
    'COMMON_DRI_DRM_OBJECTS',
@


