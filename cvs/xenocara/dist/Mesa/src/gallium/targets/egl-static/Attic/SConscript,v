head	1.6;
access;
symbols
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	v10_2_9:1.1.1.4
	v10_4_3:1.1.1.3
	v10_2_7:1.1.1.2
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	v10_2_3:1.1.1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	v9_2_5:1.1.1.1
	v9_2_3:1.1.1.1
	v9_2_2:1.1.1.1
	v9_2_1:1.1.1.1
	v9_2_0:1.1.1.1
	mesa:1.1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2015.12.23.05.17.39;	author jsg;	state dead;
branches;
next	1.5;
commitid	TnlogFl9nOv2eaRf;

1.5
date	2015.02.20.23.09.55;	author jsg;	state Exp;
branches;
next	1.4;
commitid	4ry2gvZGMXkCUD2n;

1.4
date	2015.01.25.14.41.17;	author jsg;	state Exp;
branches;
next	1.3;
commitid	mcxB0JvoI9gTDYXU;

1.3
date	2014.07.09.21.08.56;	author jsg;	state Exp;
branches;
next	1.2;
commitid	WPD6rgPryPkvXOr9;

1.2
date	2013.09.05.14.01.58;	author jsg;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.17.13.58.08;	author mpi;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.09.05.13.13.40;	author jsg;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2014.07.09.20.34.22;	author jsg;	state Exp;
branches;
next	1.1.1.3;
commitid	3JhLfwcuBALP0ZR7;

1.1.1.3
date	2015.01.25.14.09.43;	author jsg;	state Exp;
branches;
next	1.1.1.4;
commitid	ce2W5rH5aF7VS9gi;

1.1.1.4
date	2015.02.20.22.46.47;	author jsg;	state Exp;
branches;
next	;
commitid	F54a1i0WXHMxq7kE;


desc
@@


1.6
log
@remove the now unused Mesa 10.2.9 code
@
text
@#######################################################################
# SConscript for egl-static target

Import('*')

env = env.Clone()

env.Append(CPPPATH = [
    '#/include',
    '#/src/loader',
    '#/src/egl/main',
    '#/src/gallium/auxiliary',
    '#/src/gallium/drivers',
    '#/src/gallium/include',
    '#/src/gallium/winsys',
    '#/src/gallium/state_trackers/egl',
    '#/src/gallium/state_trackers/vega',
    '#/src/mesa',
])

env.Append(CPPDEFINES = [
    'GALLIUM_SOFTPIPE',
    'GALLIUM_RBUG',
    'GALLIUM_TRACE',
    'GALLIUM_GALAHAD',
    '_EGL_MAIN=_eglBuiltInDriverGALLIUM',
])

env.Prepend(LIBS = [
    softpipe,
    rbug,
    trace,
    galahad,
    libloader,
    gallium,
    egl,
    st_egl,
])

if env['llvm']:
    env.Append(CPPDEFINES = ['GALLIUM_LLVMPIPE'])
    env.Prepend(LIBS = [llvmpipe])

sources = [
    'egl.c',
    'egl_pipe.c',
    'egl_st.c',
]

if env['platform'] == 'windows':
    sources.append('#src/egl/main/egl.def')

    env.Append(LIBS = [
        'gdi32',
        'user32',
        'kernel32',
        'ws2_32',
    ])

    env.Prepend(LIBS = [
        ws_gdi,
    ])

# OpenGL ES and OpenGL
if env['gles']:
    env.Append(CPPDEFINES = [
        'FEATURE_GL=1',
        'FEATURE_ES1=1',
        'FEATURE_ES2=1'
    ])
    env.Prepend(LIBPATH = [shared_glapi.dir])
    # manually add LIBPREFIX on windows
    glapi_name = 'glapi' if env['platform'] != 'windows' else 'libglapi'
    env.Prepend(LIBS = [glapi_name, glsl, mesa])

# OpenVG
if True:
    env.Append(CPPDEFINES = ['FEATURE_VG=1'])
    env.Prepend(LIBPATH = [openvg.dir])
    # manually add LIBPREFIX on windows
    openvg_name = 'OpenVG' if env['platform'] != 'windows' else 'libOpenVG'
    env.Prepend(LIBS = [openvg_name, st_vega])

if env['HAVE_X11']:
    env.Prepend(LIBS = [
        ws_xlib,
    ])
    env.PkgUseModules('X11')

# pipe drivers
if env['HAVE_DRM']:
    env.PkgUseModules('DRM')

    if env['HAVE_DRM_INTEL']:
        env.PkgUseModules('DRM_INTEL')
        env.Append(CPPDEFINES = ['_EGL_PIPE_I915'])
        env.Prepend(LIBS = [
            i915drm,
            i915,
            ws_wrapper,
        ])

    env.Append(CPPDEFINES = ['_EGL_PIPE_VMWGFX'])
    env.Prepend(LIBS = [
        svgadrm,
        svga,
    ])

# libEGL.dll
env['LIBPREFIX'] = 'lib'
env['SHLIBPREFIX'] = 'lib'

egl_gallium = env.SharedLibrary(
    target ='EGL',
    source = sources,
)

env.Depends(egl_gallium, [openvg])

egl_gallium = env.InstallSharedLibrary(egl_gallium, version=(1, 4, 0))

env.Alias('egl-gallium', egl_gallium)
@


1.5
log
@Merge Mesa 10.2.9
@
text
@@


1.4
log
@Merge Mesa 10.4.3
Tested by matthieu@@ mpi@@ and myself.  landry@@ ran a ports bulk build.
kettenis@@ tracked down the cause of an alignment fault on archs
that require strict eight byte pointer alignment.
@
text
@a34 1
    mesautil,
d94 10
a103 1
    env.Append(CPPDEFINES = ['GALLIUM_VMWGFX'])
@


1.3
log
@Merge Mesa 10.2.3
tested by matthieu@@ kettenis@@ mpi@@ brett@@ and myself across a
diverse range of hardware
@
text
@d35 1
d95 1
a95 10
    if env['HAVE_DRM_INTEL']:
        env.PkgUseModules('DRM_INTEL')
        env.Append(CPPDEFINES = ['_EGL_PIPE_I915'])
        env.Prepend(LIBS = [
            i915drm,
            i915,
            ws_wrapper,
        ])

    env.Append(CPPDEFINES = ['_EGL_PIPE_VMWGFX'])
@


1.2
log
@Merge Mesa 9.2.0
@
text
@d10 1
d34 1
@


1.1
log
@Upate to libGL 7.11.2

Tested by jsg@@, matthieu@@ and ajacoutot@@, ok mattieu@@
@
text
@d82 1
a82 1
if env['x11']:
a84 1
        env['X11_LIBS'],
d86 1
a86 3

if env['dri']:
    env.ParseConfig('pkg-config --cflags --libs xfixes')
d89 2
a90 2
if env['drm']:
    env.ParseConfig('pkg-config --cflags --libs libdrm')
d92 3
a94 3
    if env['drm_intel']:
        env.ParseConfig('pkg-config --cflags --libs libdrm_intel')
        env.Append(CPPDEFINES = ['_EGL_PIPE_I915', '_EGL_PIPE_I965'])
a97 2
            i965drm,
            i965,
a98 9
        ])

    if env['drm_radeon']:
        env.Append(CPPDEFINES = ['_EGL_PIPE_R300', '_EGL_PIPE_R600'])
        env.Prepend(LIBS = [
            radeonwinsys,
            r300,
            r600winsys,
            r600,
@


1.1.1.1
log
@Import Mesa 9.2.0
@
text
@d82 1
a82 1
if env['HAVE_X11']:
d85 1
d87 3
a89 1
    env.PkgUseModules('X11')
d92 2
a93 2
if env['HAVE_DRM']:
    env.PkgUseModules('DRM')
d95 3
a97 3
    if env['HAVE_DRM_INTEL']:
        env.PkgUseModules('DRM_INTEL')
        env.Append(CPPDEFINES = ['_EGL_PIPE_I915'])
d101 2
d104 9
@


1.1.1.2
log
@Import Mesa 10.2.3
@
text
@a9 1
    '#/src/loader',
a32 1
    libloader,
@


1.1.1.3
log
@Import Mesa 10.4.3
@
text
@a34 1
    mesautil,
d94 10
a103 1
    env.Append(CPPDEFINES = ['GALLIUM_VMWGFX'])
@


1.1.1.4
log
@Import Mesa 10.2.9
@
text
@d35 1
d95 1
a95 10
    if env['HAVE_DRM_INTEL']:
        env.PkgUseModules('DRM_INTEL')
        env.Append(CPPDEFINES = ['_EGL_PIPE_I915'])
        env.Prepend(LIBS = [
            i915drm,
            i915,
            ws_wrapper,
        ])

    env.Append(CPPDEFINES = ['_EGL_PIPE_VMWGFX'])
@


