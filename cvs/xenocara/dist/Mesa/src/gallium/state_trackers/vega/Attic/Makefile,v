head	1.4;
access;
symbols
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	v7_10_3:1.1.1.1
	mesa:1.1.1
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2013.09.05.14.01.50;	author jsg;	state dead;
branches;
next	1.3;

1.3
date	2012.08.17.13.58.07;	author mpi;	state Exp;
branches;
next	1.2;

1.2
date	2011.10.23.13.37.35;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.22.20.06.08;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.10.23.13.29.30;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Merge Mesa 9.2.0
@
text
@# src/gallium/state_trackers/vega/Makefile

TOP = ../../../..
include $(TOP)/configs/current

LIBNAME = vega

LIBRARY_INCLUDES = \
	-I$(TOP)/include \
	-I$(TOP)/src/mapi

LIBRARY_DEFINES = \
	-DVEGA_VERSION_STRING=\"$(MESA_VERSION)\"

C_SOURCES = \
           api.c           \
           api_context.c   \
           api_filters.c   \
           api_images.c    \
           api_masks.c     \
           api_misc.c      \
           api_paint.c     \
           api_params.c    \
           api_path.c      \
           api_text.c      \
           api_transform.c \
           arc.c \
           bezier.c \
           handle.c \
           image.c \
           mask.c \
           paint.c \
           path.c \
           polygon.c \
           renderer.c \
           shader.c \
           shaders_cache.c \
           stroker.c \
           text.c \
           vg_context.c \
           vg_manager.c \
           vg_state.c \
           vg_translate.c \
           vgu.c


GENERATED_SOURCES := api_tmp.h

include ../../Makefile.template

MAPI := $(TOP)/src/mapi
api_tmp.h: $(MAPI)/mapi/mapi_abi.py $(MAPI)/vgapi/vgapi.csv
	$(PYTHON2) $< --printer vgapi --mode app $(MAPI)/vgapi/vgapi.csv > $@@
@


1.3
log
@Upate to libGL 7.11.2

Tested by jsg@@, matthieu@@ and ajacoutot@@, ok mattieu@@
@
text
@@


1.2
log
@Merge Mesa 7.10.3
@
text
@a26 9
           vgu.c        \
           vg_context.c \
           vg_manager.c \
           vg_state.c   \
           vg_translate.c \
           polygon.c    \
           bezier.c     \
           path.c       \
           paint.c      \
d28 2
d31 4
d36 2
a38 1
           mask.c \
d40 6
a45 2
           shader.c \
           shaders_cache.c
@


1.1
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@d6 1
a6 2
VG_LIB = OpenVG
VG_LIB_NAME = lib$(VG_LIB).so
d8 3
a10 3
VG_MAJOR = 1
VG_MINOR = 0
VG_TINY = 0
d12 2
a13 1
### Lists of source files, included by Makefiles
d15 2
a16 1
VG_SOURCES = \
d29 1
a30 1
           vg_tracker.c \
d41 1
d45 1
a45 17
VG_OBJECTS = $(VG_SOURCES:.c=.o)

VG_LIBS = $(GALLIUM_AUXILIARIES)
VG_LIB_DEPS = $(EXTRA_LIB_PATH) -lm

### Include directories

INCLUDE_DIRS = \
	-I$(TOP)/include \
	-I$(TOP)/src/gallium/include \
	-I$(TOP)/src/gallium/auxiliary


.c.o:
	$(CC) -c $(INCLUDE_DIRS) $(DEFINES) $(CFLAGS) $< -o $@@

default: depend $(TOP)/$(LIB_DIR)/$(VG_LIB_NAME)
d47 1
a47 32
# Make the OpenVG library
$(TOP)/$(LIB_DIR)/$(VG_LIB_NAME): $(VG_OBJECTS) $(VG_LIBS)
	$(MKLIB) -o $(VG_LIB) -linker '$(CC)' -ldflags '$(LDFLAGS)' \
		-major $(VG_MAJOR) \
		-minor $(VG_MINOR) \
		-patch $(VG_TINY) \
		-install $(TOP)/$(LIB_DIR) \
		$(VG_OBJECTS) $(VG_LIBS) $(VG_LIB_DEPS)

######################################################################
# Generic stuff

depend: $(VG_SOURCES)
	@@ echo "running $(MKDEP)"
	@@ rm -f depend  # workaround oops on gutsy?!?
	@@ touch depend
	@@ $(MKDEP) $(MKDEP_OPTIONS) $(DEFINES) $(INCLUDE_DIRS) $(VG_SOURCES) \
		> /dev/null 2>/dev/null

install: default
	$(INSTALL) -d $(DESTDIR)$(INSTALL_DIR)/include/VG
	$(INSTALL) -m 644 $(TOP)/include/VG/*.h $(DESTDIR)$(INSTALL_DIR)/include/VG
	$(INSTALL) -d $(DESTDIR)$(INSTALL_DIR)/$(LIB_DIR)
	$(MINSTALL) $(TOP)/$(LIB_DIR)/libOpenVG* $(DESTDIR)$(INSTALL_DIR)/$(LIB_DIR)

# Emacs tags
tags:
	etags `find . -name \*.[ch]` $(TOP)/include/VG/*.h

clean:
	rm -f $(VG_OBJECTS)
	rm -f depend depend.bak
d49 3
a51 1
sinclude depend
@


1.1.1.1
log
@Import Mesa 7.10.3
@
text
@d6 2
a7 1
LIBNAME = vega
d9 3
a11 3
LIBRARY_INCLUDES = \
	-I$(TOP)/include \
	-I$(TOP)/src/mapi
d13 1
a13 2
LIBRARY_DEFINES = \
	-DVEGA_VERSION_STRING=\"$(MESA_VERSION)\"
d15 1
a15 2
C_SOURCES = \
           api.c           \
a27 1
           vg_manager.c \
d29 1
a39 1
           text.c \
d43 17
a59 1
GENERATED_SOURCES := api_tmp.h
d61 32
a92 1
include ../../Makefile.template
d94 1
a94 3
MAPI := $(TOP)/src/mapi
api_tmp.h: $(MAPI)/mapi/mapi_abi.py $(MAPI)/vgapi/vgapi.csv
	$(PYTHON2) $< --printer vgapi --mode app $(MAPI)/vgapi/vgapi.csv > $@@
@

