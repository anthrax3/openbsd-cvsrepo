head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.10.23.13.37.38;	author matthieu;	state dead;
branches;
next	1.1;

1.1
date	2010.05.22.20.06.10;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Merge Mesa 7.10.3
@
text
@#######################################################################
# SConscript for gdi winsys

Import('*')

if env['platform'] == 'windows':

    env = env.Clone()

    env.Append(CPPPATH = [
        '#src/gallium/state_trackers/wgl',
    ])

    env.Append(LIBS = [
        'gdi32',
        'user32',
        'kernel32',
        'ws2_32',
    ])

    sources = []
    drivers = []

    if 'softpipe' in env['drivers']:
        sources = ['gdi_softpipe_winsys.c']
        drivers = [softpipe]

    if 'llvmpipe' in env['drivers']:
        env.Tool('llvm')
        if 'LLVM_VERSION' in env:
            sources = ['gdi_llvmpipe_winsys.c']
            drivers = [llvmpipe]

    if not sources or not drivers:
        print 'warning: softpipe or llvmpipe not selected, gdi winsys disabled'
        Return()
    
    if env['gcc']:
        sources += ['#src/gallium/state_trackers/wgl/opengl32.mingw.def']
    else:
        sources += ['#src/gallium/state_trackers/wgl/opengl32.def']
        
    drivers += [trace]

    env['no_import_lib'] = 1

    env.SharedLibrary(
        target ='opengl32',
        source = sources,
        LIBS = wgl + glapi + mesa + drivers + gallium + glsl + env['LIBS'],
    )
@


1.1
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@@

