head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.10.23.13.37.37;	author matthieu;	state dead;
branches;
next	1.1;

1.1
date	2010.05.22.20.06.10;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Merge Mesa 7.10.3
@
text
@TARGET		= libnouveau_dri.so
GALLIUMDIR	= ../../..
DRMDIR		?= /usr
DRIDIR		= ../../../../driclient

OBJECTS		= nouveau_screen_vl.o nouveau_context_vl.o nouveau_swapbuffers.o

CFLAGS		+= -g -Wall -Werror=implicit-function-declaration -fPIC	\
		   -I${GALLIUMDIR}/include				\
		   -I${GALLIUMDIR}/winsys/g3dvl				\
		   -I${GALLIUMDIR}/winsys/drm/nouveau			\
		   -I${DRMDIR}/include					\
		   -I${DRMDIR}/include/drm				\
		   -I${DRMDIR}/include/nouveau				\
		   -I${GALLIUMDIR}/drivers				\
		   -I${GALLIUMDIR}/auxiliary				\
		   -I${DRIDIR}/include

LDFLAGS		+= -L${DRMDIR}/lib				\
		   -L${DRIDIR}/lib				\
		   -L${GALLIUMDIR}/winsys/drm/nouveau/common	\
		   -L${GALLIUMDIR}/auxiliary			\
		   -L${GALLIUMDIR}/drivers/nv30			\
		   -L${GALLIUMDIR}/drivers/nv40			\
		   -L${GALLIUMDIR}/drivers/nv50

LIBS		+= -lnouveaudrm -ldriclient -ldrm_nouveau -ldrm -lnv30 -lnv40 -lnv50 -lgallium -lm

#############################################

.PHONY	= all clean libdriclient

all: ${TARGET}

${TARGET}: ${OBJECTS} libdriclient
	$(CC) ${LDFLAGS} -shared -o $@@ ${OBJECTS} ${LIBS}

libdriclient:
	cd ${DRIDIR}/src; ${MAKE}

clean:
	cd ${DRIDIR}/src; ${MAKE} clean
	rm -rf ${OBJECTS} ${TARGET}
@


1.1
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@@

