head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.10.23.13.37.37;	author matthieu;	state dead;
branches;
next	1.1;

1.1
date	2010.05.22.20.06.10;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Merge Mesa 7.10.3
@
text
@import os
import os.path

Import('*')

if env['platform'] == 'linux':

   if env['dri']:
      env = env.Clone()

      sources = [
        '#/src/mesa/drivers/dri/common/utils.c',
        '#/src/mesa/drivers/dri/common/vblank.c',
        '#/src/mesa/drivers/dri/common/dri_util.c',
        '#/src/mesa/drivers/dri/common/xmlconfig.c',
         ]
   
      
      env.ParseConfig('pkg-config --cflags --libs libdrm')
      
      env.Prepend(CPPPATH = [
            '#/src/mesa/state_tracker',
            '#/src/mesa/drivers/dri/common',
            '#/src/mesa/main',
            '#/src/mesa/glapi',
            '#/src/mesa',
            '#/include',
            '#/src/gallium/drivers/svga',
            '#/src/gallium/drivers/svga/include',
            ])
      
      env.Append(CPPDEFINES = [
            'HAVE_STDINT_H', 
            'HAVE_SYS_TYPES_H',
            ])

      env.Append(CFLAGS = [
            '-std=gnu99',
            '-D_FILE_OFFSET_BITS=64',
            ])
      
      env.Prepend(LIBPATH = [
            ])
      
      env.Prepend(LIBS = [
            trace,
            st_dri,
            svgadrm,
            svga,
            mesa,
            glsl,
            gallium,
            ])
      
      # TODO: write a wrapper function http://www.scons.org/wiki/WrapperFunctions
      env.LoadableModule(
         target ='vmwgfx_dri.so',
         source = sources,
         LIBS = env['LIBS'],
         SHLIBPREFIX = '',
         )
      

@


1.1
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@@

