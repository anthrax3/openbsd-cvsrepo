head	1.3;
access;
symbols
	OPENBSD_5_4:1.2.0.8
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.6
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	v7_10_3:1.1.1.1
	mesa:1.1.1
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2013.09.05.13.58.39;	author jsg;	state dead;
branches;
next	1.2;

1.2
date	2011.10.23.13.37.31;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.22.20.05.52;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.10.23.13.29.21;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Merge Mesa 9.2.0
@
text
@# linux-cell  (non-debug build)

include $(TOP)/configs/linux

CONFIG_NAME = linux-cell


# Omiting other gallium drivers:
GALLIUM_DRIVERS_DIRS = cell softpipe trace rbug identity


# Compiler and flags
CC = ppu32-gcc
CXX = ppu32-g++
HOST_CC = gcc
APP_CC = gcc
APP_CXX = g++

OPT_FLAGS = -O3

# Cell SDK location
## For SDK 2.1: (plus, remove -DSPU_MAIN_PARAM_LONG_LONG below)
#SDK = /opt/ibm/cell-sdk/prototype/sysroot/usr
## For SDK 3.0:
SDK = /opt/cell/sdk/usr



COMMON_C_CPP_FLAGS = $(OPT_FLAGS) -Wall -Winline \
	-fPIC -m32 -mabi=altivec -maltivec \
	-I. -I$(SDK)/include \
	-DGALLIUM_CELL $(DEFINES)

CFLAGS = $(COMMON_C_CPP_FLAGS) -Wmissing-prototypes -std=c99

CXXFLAGS = $(COMMON_C_CPP_FLAGS)


# Omitting glw here:
SRC_DIRS = glsl mapi/glapi mapi/vgapi mesa \
	gallium gallium/winsys gallium/targets glu glut/glx

# Build no traditional Mesa drivers:
DRIVER_DIRS =


MKDEP_OPTIONS = -fdepend -Y


GL_LIB_DEPS = $(EXTRA_LIB_PATH) -lX11 -lXext -lm -lpthread \
	-L$(SDK)/lib -m32 -Wl,-m,elf32ppc -R$(SDK)/lib -lspe2


CELL_SPU_LIB = $(TOP)/src/gallium/drivers/cell/spu/g3d_spu.a


### SPU stuff

SPU_CC = spu-gcc

SPU_CFLAGS = $(OPT_FLAGS) -W -Wall -Winline -Wmissing-prototypes -Wno-main \
	-I. -I$(SDK)/spu/include -I$(TOP)/src/mesa/ $(INCLUDE_DIRS) \
	-DSPU_MAIN_PARAM_LONG_LONG \
	-include spu_intrinsics.h

SPU_LFLAGS = -L$(SDK)/spu/lib -Wl,-N -lmisc -lm

SPU_AR = ppu-ar
SPU_AR_FLAGS = -qcs

SPU_EMBED = ppu32-embedspu
SPU_EMBED_FLAGS = -m32
@


1.2
log
@Merge Mesa 7.10.3
@
text
@@


1.1
log
@Update to Mesa 7.8.1. Tested on a bulk ports build by naddy@@, ok oga@@.
@
text
@d9 1
a9 1
GALLIUM_DRIVERS_DIRS = cell softpipe trace
d40 2
a41 1
SRC_DIRS = glsl mesa gallium gallium/winsys glu glut/glx glew
@


1.1.1.1
log
@Import Mesa 7.10.3
@
text
@d9 1
a9 1
GALLIUM_DRIVERS_DIRS = cell softpipe trace rbug identity
d40 1
a40 2
SRC_DIRS = glsl mapi/glapi mapi/vgapi mesa \
	gallium gallium/winsys gallium/targets glu glut/glx
@

