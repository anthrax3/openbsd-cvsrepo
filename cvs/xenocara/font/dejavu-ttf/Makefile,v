head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.1.0.28
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.26
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.24
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.22
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.20
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.18
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.16
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.14
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.12
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.10
	OPENBSD_5_0:1.1.0.8
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.6
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2016.11.19.08.43.19;	author tb;	state Exp;
branches;
next	1.3;
commitid	8IHTOIvirEtZxivB;

1.3
date	2016.10.02.09.23.26;	author tb;	state Exp;
branches;
next	1.2;
commitid	wL1lpGp1nFlIJd9E;

1.2
date	2016.08.29.17.27.25;	author matthieu;	state Exp;
branches;
next	1.1;
commitid	XNQ2HDLLl5fG2Ath;

1.1
date	2010.01.16.08.58.54;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Set permissions of fonts.dir and fonts.scale explicitly, so they don't
depend on the umask.  For historical reasons, ${BINGRP}=wheel here, so
use 'bin' instead of ${BINGRP} to set the group of /etc/fonts/conf.d

push forward deraadt; no objections matthieu
@
text
@# $OpenBSD: Makefile,v 1.3 2016/10/02 09:23:26 tb Exp $

FONT_FILES= \
	DejaVuMathTeXGyre.ttf \
	DejaVuSans-Bold.ttf \
	DejaVuSans-BoldOblique.ttf \
	DejaVuSans-ExtraLight.ttf \
	DejaVuSans-Oblique.ttf \
	DejaVuSans.ttf \
	DejaVuSansCondensed-Bold.ttf \
	DejaVuSansCondensed-BoldOblique.ttf \
	DejaVuSansCondensed-Oblique.ttf \
	DejaVuSansCondensed.ttf \
	DejaVuSansMono-Bold.ttf \
	DejaVuSansMono-BoldOblique.ttf \
	DejaVuSansMono-Oblique.ttf \
	DejaVuSansMono.ttf \
	DejaVuSerif-Bold.ttf \
	DejaVuSerif-BoldItalic.ttf \
	DejaVuSerif-Italic.ttf \
	DejaVuSerif.ttf \
	DejaVuSerifCondensed-Bold.ttf \
	DejaVuSerifCondensed-BoldItalic.ttf \
	DejaVuSerifCondensed-Italic.ttf \
	DejaVuSerifCondensed.ttf

CONFIG_FILES= \
	20-unhint-small-dejavu-sans-mono.conf \
	20-unhint-small-dejavu-sans.conf \
	20-unhint-small-dejavu-serif.conf

BINGRP=	wheel

fontdir=	${X11BASE}/lib/X11/fonts/TTF
fontconfigdir=	/etc/fonts

depend:

all:

clean:

cleandir:

install:
	@@for f in ${FONT_FILES}; do \
		echo "${INSTALL_DATA} -c ${.CURDIR}/ttf/$$f ${DESTDIR}${fontdir}" ; \
		${INSTALL_DATA} -c ${.CURDIR}/ttf/$$f ${DESTDIR}${fontdir} ; \
	done
	@@for f in ${CONFIG_FILES}; do \
		echo ${INSTALL_DATA} -c ${.CURDIR}/fontconfig/$$f \
			${DESTDIR}${fontconfigdir}/conf.avail ; \
		${INSTALL_DATA} -c ${.CURDIR}/fontconfig/$$f \
			${DESTDIR}${fontconfigdir}/conf.avail ; \
		( cd ${DESTDIR}${fontconfigdir}/conf.d ;  \
		  rm -f $$f ; \
		  ln -s ../conf.avail/$$f ; \
		  chown -h ${BINOWN}:bin $$f ) ; \
	done
	@@rm -f ${DESTDIR}${fontdir}/fonts.scale
	mkfontscale ${DESTDIR}${fontdir}
	chown root:wheel ${DESTDIR}${fontdir}/fonts.scale
	chmod 644 ${DESTDIR}${fontdir}/fonts.scale
	@@rm -f ${DESTDIR}${fontdir}/fonts.dir
	mkfontdir ${DESTDIR}${fontdir}
	chown root:wheel ${DESTDIR}${fontdir}/fonts.dir
	chmod 644 ${DESTDIR}${fontdir}/fonts.dir

.include <bsd.xorg.mk>
@


1.3
log
@Explicitly set owner and group of the symlinks in etc/fonts/conf.d and
of the fonts.dir and fonts.scale indexes. Needed for noperm release.

ok matthieu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/08/29 17:27:25 matthieu Exp $
d58 1
a58 1
		  chown -h ${BINOWN}:${BINGRP} $$f ) ; \
d63 1
d67 1
a69 1

@


1.2
log
@Update to DejaVu fonts 2.37
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/08/29 16:00:08 matthieu Exp $
d57 2
a58 1
		  ln -s ../conf.avail/$$f ) ; \
d62 1
d65 1
@


1.1
log
@Build and install DejaVu fonts. ok naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/06/01 01:05:25 matthieu Exp $
d4 1
@

