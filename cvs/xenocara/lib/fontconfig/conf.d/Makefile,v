head	1.11;
access;
symbols
	OPENBSD_6_1:1.11.0.2
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.8.0.4
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.2
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.7.0.4
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.6.0.6
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.4
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6;
locks; strict;
comment	@# @;


1.11
date	2017.01.16.22.43.49;	author matthieu;	state Exp;
branches;
next	1.10;
commitid	5zeOtLapWxLIDRj8;

1.10
date	2016.11.19.08.45.51;	author tb;	state Exp;
branches;
next	1.9;
commitid	Qlvi6WmYtYFJi9VF;

1.9
date	2016.10.02.09.19.28;	author tb;	state Exp;
branches;
next	1.8;
commitid	BF3C5WA27LNmvJso;

1.8
date	2015.10.23.12.29.31;	author naddy;	state Exp;
branches;
next	1.7;
commitid	F6zTynqaXGeW6fVD;

1.7
date	2014.08.31.13.50.27;	author matthieu;	state Exp;
branches;
next	1.6;
commitid	a78MgPPJIvsS32Rd;

1.6
date	2013.03.16.15.09.38;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.16.14.56.53;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.16.14.30.18;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.16.11.26.42;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.16.11.17.57;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.09.14.34.41;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Install new available config files, missed in fontconfig update.
Pointed out by Nils Reusse <n.reusse@@hxgn.net>. Thanks.
@
text
@#	$OpenBSD: Makefile,v 1.10 2016/11/19 08:45:51 tb Exp $

FONTCONFIG =	${.CURDIR}/../../../dist/fontconfig
CONFIGDIR =	/etc/fonts/conf.d
CONFAVAILDIR=	/etc/fonts/conf.avail
CONFAVAILREL=	../conf.avail

DOC_FILES= \
	README

CONF_LINKS = \
	10-scale-bitmap-fonts.conf \
	20-unhint-small-vera.conf \
	30-lucida-aliases.conf \
	30-urw-aliases.conf \
	30-metric-aliases.conf \
	31-nonmst.conf \
	40-nonlatin.conf \
	45-latin.conf \
	49-sansserif.conf \
	50-user.conf \
	51-local.conf \
	60-latin.conf \
	65-fonts-persian.conf \
	65-nonlatin.conf \
	69-unifont.conf \
	80-delicious.conf \
	90-synthetic.conf

AVAIL_FILES =				\
	10-autohint.conf		\
	10-hinting-full.conf		\
	10-hinting-medium.conf		\
	10-hinting-none.conf		\
	10-hinting-slight.conf		\
	10-no-sub-pixel.conf		\
	10-scale-bitmap-fonts.conf	\
	10-sub-pixel-bgr.conf		\
	10-sub-pixel-rgb.conf		\
	10-sub-pixel-vbgr.conf		\
	10-sub-pixel-vrgb.conf		\
	10-unhinted.conf		\
	11-lcdfilter-default.conf	\
	11-lcdfilter-legacy.conf	\
	11-lcdfilter-light.conf		\
	20-unhint-small-vera.conf	\
	25-unhint-nonlatin.conf		\
	30-lucida-aliases.conf		\
	30-urw-aliases.conf		\
	30-metric-aliases.conf		\
	31-nonmst.conf			\
	40-nonlatin.conf		\
	45-latin.conf			\
	49-sansserif.conf		\
	50-user.conf			\
	51-local.conf			\
	60-latin.conf			\
	65-fonts-persian.conf		\
	65-khmer.conf			\
	65-nonlatin.conf		\
	69-unifont.conf			\
	70-no-bitmaps.conf		\
	70-yes-bitmaps.conf		\
	80-delicious.conf		\
	90-synthetic.conf

all cleandir:

install:
	@@for i in ${AVAIL_FILES}; do				\
	   echo ${INSTALL_DATA} $$i ${DESTDIR}${CONFAVAILDIR}; \
	   ${INSTALL_DATA} ${FONTCONFIG}/conf.d/$$i ${DESTDIR}${CONFAVAILDIR};	\
	done
	${INSTALL_DATA} ${FONTCONFIG}/conf.d/README ${DESTDIR}/${CONFIGDIR}
	@@(echo cd ${DESTDIR}${CONFIGDIR};			\
	  cd ${DESTDIR}${CONFIGDIR};				\
	  for i in ${CONF_LINKS}; do				\
	    echo rm $$i";" ln -s ${CONFAVAILREL}/$$i . ";"	\
	      chown -h ${BINOWN}:${BINGRP} $$i;			\
	    rm -f $$i;						\
	    ln -s ${CONFAVAILREL}/$$i .;			\
	    chown -h ${BINOWN}:${BINGRP} $$i;			\
	  done)

NOOBJ=

.include <bsd.own.mk>
.include <bsd.xorg.mk>
@


1.10
log
@Fix a copy-paste error that resulted in the parent directory being
chowned instead of only the symlink.

no objections matthieu
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2016/10/02 09:19:28 tb Exp $
d32 4
@


1.9
log
@chown -h symbolic links in conf.d.  Needed for noperm release.
There are a few remaining symlinks that will be fixed later.

ok matthieu
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2015/10/23 12:29:31 naddy Exp $
d78 1
a78 1
	    chown -h ${BINOWN}:${BINGRP} $$i .;			\
@


1.8
log
@Don't enable 10-autohint.conf by default.  It causes problems with
xterm -fa mono (underscores disappearing because the glyph exceeds
the cell size), matthieu@@ can't remember why he enabled it, and it's
not enabled by default anywhere else.  ok matthieu@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2014/08/31 13:50:27 matthieu Exp $
d74 2
a75 1
	    echo rm $$i";" ln -s ${CONFAVAILREL}/$$i .;	\
d78 1
@


1.7
log
@Install relative symlinks in conf.d. Noticed by ajacoutot@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2013/03/16 15:09:38 matthieu Exp $
a11 1
	10-autohint.conf \
@


1.6
log
@Fix previous: README goes in /etc/fonts/conf.d
while here be more coherent in make variable expansion.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.5 2013/03/16 14:56:53 matthieu Exp $
d6 1
d75 1
a75 1
	    echo rm $$i";" ln -s ${CONFAVAILDIR}/$$i .;	\
d77 1
a77 1
	    ln -s ${CONFAVAILDIR}/$$i .;			\
@


1.5
log
@Install README
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.4 2013/03/16 14:30:18 matthieu Exp $
a30 1
	README				\
d66 3
a68 3
	@@for i in $(AVAIL_FILES); do				\
	   echo ${INSTALL_DATA} $$i $(DESTDIR)${CONFAVAILDIR}; \
	   ${INSTALL_DATA} ${FONTCONFIG}/conf.d/$$i $(DESTDIR)${CONFAVAILDIR};	\
d70 5
a74 4
	@@(echo cd $(DESTDIR)$(CONFIGDIR);			\
	  cd $(DESTDIR)$(CONFIGDIR);				\
	  for i in $(CONF_LINKS); do				\
	    echo rm $$i";" ln -s $(CONFAVAILDIR)/$$i .;	\
d76 1
a76 1
	    ln -s $(CONFAVAILDIR)/$$i .;			\
@


1.4
log
@Define an empty cleandir target to silent the build
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.3 2013/03/16 11:26:42 matthieu Exp $
d31 1
@


1.3
log
@Hmmph. typo in previous
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.2 2013/03/16 11:17:57 matthieu Exp $
d63 1
a63 1
all:
a78 1

@


1.2
log
@Add 30-lucida-aliases and 31-nonmst.conf to the list of installed files.

Problem noticed by naddy@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.1 2013/03/09 14:34:41 matthieu Exp $
d44 1
a44 1
	30-lucida-aliases		\
d79 1
@


1.1
log
@Update to fontconfig 2.10.91 + a few local fixes.
Move to a new BSD make based build system since fontconfig's build
system has become too dependant on GNU make.

Requested by ajacoutot@@, tested by many back in january.
@
text
@d1 1
a1 1
#	$OpenBSD$
d44 1
d47 1
@

