head	1.31;
access;
symbols
	OPENBSD_6_0:1.30.0.2
	OPENBSD_6_0_BASE:1.30
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.28.0.2
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.27.0.4
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.27.0.2
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.24.0.2
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.22.0.2
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.21.0.8
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.21.0.6
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.4
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.20.0.4
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.15.0.4
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.2
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.13.0.2
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_2:1.5.0.2
	OPENBSD_4_2_BASE:1.5;
locks; strict;
comment	@# @;


1.31
date	2016.11.07.19.31.57;	author jasper;	state Exp;
branches;
next	1.30;
commitid	IgESLvtgfwUe5cX8;

1.30
date	2016.04.01.03.15.15;	author jsg;	state Exp;
branches;
next	1.29;
commitid	q3HsDrq7nfLMWLnS;

1.29
date	2015.11.22.07.57.10;	author jsg;	state Exp;
branches;
next	1.28;
commitid	dIELhGtoXW0TkMsn;

1.28
date	2015.04.15.09.39.53;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	NvgnHhe9JRlELqwH;

1.27
date	2014.07.14.19.06.02;	author matthieu;	state Exp;
branches;
next	1.26;
commitid	aAFDdRH3HkTP72Sz;

1.26
date	2014.07.09.21.32.40;	author jsg;	state Exp;
branches;
next	1.25;
commitid	uM5VFgRcH6JLiuF9;

1.25
date	2014.04.14.19.33.09;	author matthieu;	state Exp;
branches;
next	1.24;

1.24
date	2013.09.05.15.11.54;	author jsg;	state Exp;
branches;
next	1.23;

1.23
date	2013.09.04.05.59.34;	author jsg;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.09.14.31.36;	author matthieu;	state Exp;
branches;
next	1.21;

1.21
date	2011.03.08.20.48.59;	author matthieu;	state Exp;
branches;
next	1.20;

1.20
date	2010.08.02.18.45.02;	author matthieu;	state Exp;
branches;
next	1.19;

1.19
date	2010.05.29.17.25.11;	author matthieu;	state Exp;
branches;
next	1.18;

1.18
date	2010.04.24.20.13.07;	author matthieu;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.18.22.28.20;	author matthieu;	state Exp;
branches;
next	1.16;

1.16
date	2010.04.10.21.26.00;	author matthieu;	state Exp;
branches;
next	1.15;

1.15
date	2009.05.23.15.07.17;	author matthieu;	state Exp;
branches;
next	1.14;

1.14
date	2009.05.22.17.58.45;	author matthieu;	state Exp;
branches;
next	1.13;

1.13
date	2008.12.23.21.55.41;	author david;	state Exp;
branches;
next	1.12;

1.12
date	2008.11.02.15.18.49;	author matthieu;	state Exp;
branches;
next	1.11;

1.11
date	2008.09.08.12.20.47;	author todd;	state Exp;
branches;
next	1.10;

1.10
date	2008.04.02.20.05.35;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2008.03.25.23.41.50;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2008.03.21.21.07.48;	author oga;	state Exp;
branches;
next	1.7;

1.7
date	2007.10.27.19.57.48;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2007.10.20.12.36.29;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2007.05.12.14.24.59;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2007.04.04.22.33.46;	author david;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.01.10.35.09;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.17.19.52.56;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.12.07.34;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.31
log
@enter xcb-util-xrm/
@
text
@# $OpenBSD: Makefile,v 1.30 2016/04/01 03:15:15 jsg Exp $

.include <bsd.xconf.mk>

XCB_LIBS= \
	libxcb/libxcb \
	libxcb/libxcb-composite \
	libxcb/libxcb-damage \
	libxcb/libxcb-dpms \
	libxcb/libxcb-dri2 \
	libxcb/libxcb-dri3 \
	libxcb/libxcb-glx \
	libxcb/libxcb-present \
	libxcb/libxcb-randr \
	libxcb/libxcb-record \
	libxcb/libxcb-render \
	libxcb/libxcb-res \
	libxcb/libxcb-screensaver \
	libxcb/libxcb-shape \
	libxcb/libxcb-shm \
	libxcb/libxcb-sync \
	libxcb/libxcb-xevie \
	libxcb/libxcb-xf86dri \
	libxcb/libxcb-xfixes \
	libxcb/libxcb-xinerama \
	libxcb/libxcb-xkb \
	libxcb/libxcb-xprint \
	libxcb/libxcb-xtest \
	libxcb/libxcb-xv \
	libxcb/libxcb-xvmc \
	xcb-util \
	xcb-util-image \
	xcb-util-renderutil \
	xcb-util-cursor \
	xcb-util-keysyms \
	xcb-util-wm \
	xcb-util-xrm

SUBDIR= libpthread-stubs \
	freetype fontconfig libxtrans libXau libXdmcp ${XCB_LIBS}\
	libX11  libXext  libXrender libXft libdmx libfontenc \
	libFS libICE libSM libXt \
	libXmu libXpm libXaw libXfixes libXcomposite \
	libXdamage libXcursor libXfont libXfontcache \
	libXi libXinerama libxkbfile libxkbui  \
	libXrandr libXRes libXScrnSaver \
	libXtst libXv libXvMC libXxf86dga libXxf86misc libXxf86vm \
	libpciaccess pixman

.if ${XENOCARA_BUILD_GL:L} == "yes"
SUBDIR+= libdrm
SUBDIR+= mesa
SUBDIR+= libGLU libGLw libtxc_dxtn
SUBDIR+= libepoxy
.endif

.include <bsd.subdir.mk>

build: _SUBDIRUSE
@


1.30
log
@remove XENOCARA_BUILD_PIXMAN all platforms now build pixman
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/11/22 07:57:10 jsg Exp $
d36 2
a37 1
	xcb-util-wm 
@


1.29
log
@Switch to Mesa 11.0.6 built with autoconf instead of a set of a custom
makefiles.  Thanks to Emil Velikov for removing requirements on gnu make
upstream and sorting out a bunch of other things to make this possible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/04/15 09:39:53 ajacoutot Exp $
d47 1
a47 5
	libpciaccess

.if ${XENOCARA_BUILD_PIXMAN:L} == "yes"
SUBDIR+= pixman
.endif
@


1.28
log
@Hook up libepoxy.

committing on behalf of jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/07/14 19:06:02 matthieu Exp $
d54 2
a55 2
SUBDIR+= libdrm libgbm
SUBDIR+= libglapi libGL libEGL libGLESv1_CM libGLESv2
@


1.27
log
@Move the logic that says that the openchrome driver requires librm
to the drivers Makefile, and don't build it if the user choose not
to build libdrm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/07/09 21:32:40 jsg Exp $
d55 3
a57 1
SUBDIR+= libglapi libGL libEGL libGLESv1_CM libGLESv2 libGLU libGLw libtxc_dxtn
@


1.26
log
@Mesa 10.2.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/04/14 19:33:09 matthieu Exp $
d53 1
a53 2
# libdrm is needed by the via driver built on i386 only
.if ${XENOCARA_BUILD_DRI:L} == "yes" || ${MACHINE} == "i386"
a54 3
.endif

.if ${XENOCARA_BUILD_GL:L} == "yes"
@


1.25
log
@Update list of xcb libs to build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/09/05 15:11:54 jsg Exp $
d55 1
a55 1
SUBDIR+= libdrm
@


1.24
log
@build infrastructure changes for Mesa 9.2.0
ok matthieu@@ mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/09/04 05:59:34 jsg Exp $
d11 1
d13 1
d26 1
d31 6
a36 9
	xcb-util/atom \
	xcb-util/aux \
	xcb-util/event \
	xcb-util/property \
	xcb-util/icccm \
	xcb-util/image \
	xcb-util/keysyms \
	xcb-util/renderutil \
	xcb-util/reply
@


1.23
log
@add libtxc_dxtn 1.0.1 a DXTn/S3 texture compression library
ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/09 14:31:36 matthieu Exp $
d59 1
a59 1
SUBDIR+= libGL libGLU libGLw libtxc_dxtn
@


1.22
log
@Build pthread-stubs before fontconfig. Needed for fontconfig 2.10.91
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/03/08 20:48:59 matthieu Exp $
d59 1
a59 1
SUBDIR+= libGL libGLU libGLw
@


1.21
log
@xcb is no longer optional.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/08/02 18:45:02 matthieu Exp $
a5 1
	libpthread-stubs \
d38 2
a39 1
SUBDIR= freetype fontconfig libxtrans libXau libXdmcp ${XCB_LIBS}\
@


1.20
log
@Current pixman lib doesn't build on m68k. Disable it on those machines.
ok deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/05/29 17:25:11 matthieu Exp $
a4 1
.if ${XENOCARA_BUILD_XCB:L} == "yes"
a37 1
.endif
@


1.19
log
@Remove obsolete code that has not been built for 5 weeks now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/04/24 20:13:07 matthieu Exp $
d49 5
a53 1
	libpciaccess pixman
@


1.18
log
@Unlink libXp, libXprintAppUtil and libXprintUtil from the build.

Required ports updates and wantlib fixes handled by naddy@@. Thanks a lot.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/04/18 22:28:20 matthieu Exp $
a58 3

# deprecated
# libXevie libXprintUtil liblbxutil libXprintAppUtil libXTrap libXp
@


1.17
log
@Add libxcb/libxcb-dri2 here too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/04/10 21:26:00 matthieu Exp $
d44 1
a44 1
	libXmu libXpm libXp libXaw libXfixes libXcomposite \
d46 2
a47 2
	libXi libXinerama libxkbfile libxkbui libXprintUtil \
	libXprintAppUtil libXrandr libXRes libXScrnSaver \
d61 1
a61 1
# libXevie  liblbxutil libXTrap
@


1.16
log
@Unlink deprecated xtrap, xevie and lbxutil libs and protos from the X build.
ok oga@@, deraadt@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/05/23 15:07:17 matthieu Exp $
d12 1
@


1.15
log
@Add xcb-util subdirs and zap one level of recursive make by lising
libxcb subdirs here directly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/05/22 17:58:45 matthieu Exp $
d42 1
a42 1
	libFS libICE liblbxutil libSM libXt \
d44 1
a44 1
	libXdamage libXcursor libXevie libXfont libXfontcache \
d46 1
a46 1
	libXprintAppUtil libXrandr libXRes libXScrnSaver libXTrap \
d58 3
@


1.14
log
@Add support for building xcb (disabled for now).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/12/23 21:55:41 david Exp $
d6 32
a37 1
XCB_LIBS=	libpthread-stubs libxcb
@


1.13
log
@unbreak build: -liboldX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/11/02 15:18:49 matthieu Exp $
d5 5
a9 1
SUBDIR= freetype fontconfig libxtrans libXau libXdmcp \
@


1.12
log
@Build libpciaccess for xserver 1.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/09/08 12:20:47 todd Exp $
d7 1
a7 1
	libFS libICE liblbxutil liboldX libSM libXt \
@


1.11
log
@enable pixman for landisk now that it builds, from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/04/02 20:05:35 matthieu Exp $
d13 1
a13 1
	pixman
@


1.10
log
@Unconditionnaly build libdrm on i386 since the via driver needs some
bits of it. Noticed by naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/03/25 23:41:50 matthieu Exp $
d12 2
a13 1
	libXtst libXv libXvMC libXxf86dga libXxf86misc libXxf86vm
a21 5
.endif

# Gcc ICE on sh
.if ${MACHINE_ARCH} != "sh"
SUBDIR+= pixman
@


1.9
log
@Introduce bsd.xconf.mk to set default config variables used
at several places in the Xenocara build in a central place instead
of duplicating the checks all over the place. ok oga@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/03/21 21:07:48 oga Exp $
d14 2
a15 1
.if ${XENOCARA_BUILD_DRI:L} == "yes"
@


1.8
log
@Install libdrm before libGL. That way if we're building X on a clean system
with dri, libGL doesn't fail due to drm.h being missing.

ok matthieu@@. Patch from Peter Hessler, thanks!
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.7 2007/10/27 19:57:48 matthieu Exp $
d14 3
a16 6
DRM_ARCHES= alpha amd64 i386 macppc sparc64

.for a in $(DRM_ARCHES)
SUBDIR_$a+= libdrm
.endfor
SUBDIR+= $(SUBDIR_$(MACHINE))
d18 1
a18 1
.if ${MACHINE} != "sgi" && ${MACHINE} != "vax"
@


1.7
log
@Enable pixman on all architectures but sh (triggers a compiler error) in
preparation for xserver 1.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/10/20 12:35:25 matthieu Exp $
d12 7
a26 7

DRM_ARCHES= alpha amd64 i386 macppc sparc64

.for a in $(DRM_ARCHES)
SUBDIR_$a+= libdrm
.endfor
SUBDIR+= $(SUBDIR_$(MACHINE))
@


1.6
log
@Don't build expat here anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/05/12 14:24:59 matthieu Exp $
d14 5
@


1.5
log
@- Disable OpenGL parts on vax and sgi
- Disable Xprt on vax and landisk
Xenocara now builds on vax
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/04/04 22:33:46 david Exp $
d3 1
a3 1
SUBDIR= freetype expat fontconfig libxtrans libXau libXdmcp \
@


1.4
log
@more $Xenocara$ -> $OpenBSD$; ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD$
d12 1
d14 1
@


1.3
log
@Hook libdrm into the build for selected architectures
@
text
@d1 1
a1 1
# $Xenocara: Makefile,v 1.6 2006/04/17 13:37:46 matthieu Exp $
@


1.2
log
@remove update target
@
text
@d14 7
@


1.1
log
@Build infrastructure for lib
@
text
@a16 1
update: _SUBDIRUSE
@

