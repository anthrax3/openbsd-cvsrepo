head	1.4;
access;
symbols
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.18
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.16
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.14
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.12
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.10
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.6
	OPENBSD_5_0:1.3.0.4
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.1.1.0.12
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v1_0_3:1.1.1.1
	v1_0_2:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@ * @;


1.4
date	2012.03.10.14.01.58;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.11.10.17.25;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.10.20.06.54;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.25.17.09.42;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.25.17.09.42;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to libXext 1.3.1
@
text
@/*
 * Copyright 1992 Network Computing Devices
 *
 * Permission to use, copy, modify, distribute, and sell this software and its
 * documentation for any purpose is hereby granted without fee, provided that
 * the above copyright notice appear in all copies and that both that
 * copyright notice and this permission notice appear in supporting
 * documentation, and that the name of NCD. not be used in advertising or
 * publicity pertaining to distribution of the software without specific,
 * written prior permission.  NCD. makes no representations about the
 * suitability of this software for any purpose.  It is provided "as is"
 * without express or implied warranty.
 *
 * NCD. DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT SHALL NCD.
 * BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION
 * OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
 * CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * Author:  Keith Packard, Network Computing Devices
 */

#ifdef HAVE_CONFIG_H
#include <config.h>
#endif
#include <stdio.h>
#include <X11/Xlibint.h>
#include <X11/extensions/XLbx.h>
#include <X11/extensions/lbxproto.h>
#include <X11/extensions/Xext.h>
#include <X11/extensions/extutil.h>

static XExtensionInfo _lbx_info_data;
static XExtensionInfo *lbx_info = &_lbx_info_data;
static const char *lbx_extension_name = LBXNAME;

#define LbxCheckExtension(dpy,i,val) \
  XextCheckExtension (dpy, i, lbx_extension_name, val)

static int close_display(Display *dpy, XExtCodes *codes);
static char *error_string(Display *dpy, int code, XExtCodes *codes,
			  char *buf, int n);
static /* const */ XExtensionHooks lbx_extension_hooks = {
    NULL,				/* create_gc */
    NULL,				/* copy_gc */
    NULL,				/* flush_gc */
    NULL,				/* free_gc */
    NULL,				/* create_font */
    NULL,				/* free_font */
    close_display,			/* close_display */
    NULL,				/* wire_to_event */
    NULL,				/* event_to_wire */
    NULL,				/* error */
    error_string,			/* error_string */
};

static const char *lbx_error_list[] = {
    "BadLbxClient",			/* BadLbxClient */
};

static XEXT_GENERATE_FIND_DISPLAY (find_display, lbx_info, lbx_extension_name,
				   &lbx_extension_hooks, LbxNumberEvents, NULL)

static XEXT_GENERATE_CLOSE_DISPLAY (close_display, lbx_info)

static XEXT_GENERATE_ERROR_STRING (error_string, lbx_extension_name,
				   LbxNumberErrors, lbx_error_list)


Bool XLbxQueryExtension (
    Display *dpy,
    int *requestp, int *event_basep, int *error_basep)
{
    XExtDisplayInfo *info = find_display (dpy);

    if (XextHasExtension(info)) {
	*requestp = info->codes->major_opcode;
	*event_basep = info->codes->first_event;
	*error_basep = info->codes->first_error;
	return True;
    } else {
	return False;
    }
}


int XLbxGetEventBase(Display *dpy)
{
    XExtDisplayInfo *info = find_display (dpy);

    if (XextHasExtension(info)) {
	return info->codes->first_event;
    } else {
	return -1;
    }
}


Bool XLbxQueryVersion(Display *dpy, int *majorVersion, int *minorVersion)
{
    XExtDisplayInfo *info = find_display (dpy);
    xLbxQueryVersionReply rep;
    register xLbxQueryVersionReq *req;

    LbxCheckExtension (dpy, info, False);

    LockDisplay(dpy);
    GetReq(LbxQueryVersion, req);
    req->reqType = info->codes->major_opcode;
    req->lbxReqType = X_LbxQueryVersion;
    if (!_XReply(dpy, (xReply *)&rep, 0, xFalse)) {
	UnlockDisplay(dpy);
	SyncHandle();
	return False;
    }
    *majorVersion = rep.majorVersion;
    *minorVersion = rep.minorVersion;
    UnlockDisplay(dpy);
    SyncHandle();
    return True;
}

/* all other requests will run after Xlib has lost the wire ... */
@


1.3
log
@Update to libXext 1.4.0.
Tested by ajacoutot@@, jasper@@, krw@@ and on a bulk ports build by landry@@
@
text
@d18 1
a18 1
 * OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN 
d36 1
a36 1
static /* const */ char *lbx_extension_name = LBXNAME;
d58 1
a58 1
static /* const */ char *lbx_error_list[] = {
d62 1
a62 1
static XEXT_GENERATE_FIND_DISPLAY (find_display, lbx_info, lbx_extension_name, 
@


1.2
log
@Update to libXext 1.1.1. Tested on a ports bulk build by naddy@@.
@
text
@a1 2
 * $Xorg: XLbx.c,v 1.3 2000/08/17 19:45:51 cpqbld Exp $
 *
a22 1
/* $XFree86: xc/lib/Xext/XLbx.c,v 1.4 2002/10/16 00:37:27 dawes Exp $ */
a23 2
#define NEED_EVENTS
#define NEED_REPLIES
@


1.1
log
@Initial revision
@
text
@d35 1
a35 1
#include <X11/extensions/lbxstr.h>
@


1.1.1.1
log
@import from X.Org 7.2RC1
@
text
@@
