head	1.18;
access;
symbols
	OPENBSD_6_2:1.18.0.4
	OPENBSD_6_2_BASE:1.18
	OPENBSD_6_1:1.18.0.2
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.15.0.16
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.14
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.15.0.12
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.15.0.10
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.8
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.6
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.4
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.15.0.2
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.14.0.4
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.6
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.4
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.11.0.4
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.10.0.2
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7;
locks; strict;
comment	@# @;


1.18
date	2016.10.10.13.27.14;	author matthieu;	state Exp;
branches;
next	1.17;
commitid	UWOeJlDtxG8Sa17J;

1.17
date	2016.10.08.19.29.18;	author matthieu;	state Exp;
branches;
next	1.16;
commitid	aV2YtnuptKRU4bvY;

1.16
date	2016.10.08.19.09.34;	author matthieu;	state Exp;
branches;
next	1.15;
commitid	B6eMsG846VqWf3BQ;

1.15
date	2012.08.17.15.16.44;	author mpi;	state Exp;
branches;
next	1.14;

1.14
date	2011.10.23.13.59.38;	author matthieu;	state Exp;
branches;
next	1.13;

1.13
date	2010.06.22.20.04.22;	author matthieu;	state Exp;
branches;
next	1.12;

1.12
date	2010.05.08.14.15.29;	author matthieu;	state Exp;
branches;
next	1.11;

1.11
date	2009.05.25.18.40.11;	author matthieu;	state Exp;
branches;
next	1.10;

1.10
date	2008.11.02.16.45.35;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2008.07.16.20.24.40;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2008.02.12.21.09.27;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2007.07.29.08.32.45;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2007.07.28.13.50.48;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2007.04.07.15.37.50;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2006.12.02.16.28.48;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.29.18.03.09;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.29.14.45.19;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.11.21.13;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Move headers files to 'GL/' so that the library can be built
without installed headers.
@
text
@# $OpenBSD: Makefile,v 1.17 2016/10/08 19:29:18 matthieu Exp $

DEBUG?=

LIB= GLw

MESA_MAJOR=	7
MESA_MINOR=	11
MESA_TINY=	2

CPPFLAGS += -I${X11BASE}/include \
	-I${.CURDIR} -I${.CURDIR}/GL

SRCS= \
	GLwDrawA.c \
	GLwDAUtil.c \
	GLwM1DrawA.c \
	GLwM2DrawA.c

INCS= \
	GLwDrawA.h \
	GLwDrawAP.h \
	GLwMDrawA.h \
	GLwMDrawAP.h

obj: _xenocara_obj

includes:
	cd ${.CURDIR}/GL; for i in ${INCS}; do \
	    j="cmp -s $$i ${DESTDIR}${INCSDIR}/GL/$$i || \
		${INSTALL_DATA} $$i ${DESTDIR}${INCSDIR}/GL"; \
		echo "\tinstalling $$i"; \
		eval "$$j"; \
	done

beforeinstall: includes

NOPROFILE=

PKGCONFIG=	glw.pc
PACKAGE_VERSION=$(MESA_MAJOR).$(MESA_MINOR).$(MESA_TINY)
EXTRA_PKGCONFIG_SUBST= \
	-e 's,@@INSTALL_DIR@@,$(X11BASE),' \
	-e 's,@@LIB_DIR@@,lib,' \
	-e 's,@@VERSION@@,$(PACKAGE_VERSION),' \

.include <bsd.lib.mk>
.include <bsd.xorg.mk>

@


1.17
log
@Put back the NOPROFILE= that I accidentally removed in previous commit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/10/08 19:09:34 matthieu Exp $
d12 1
a12 1
	-I${.CURDIR}
d29 1
a29 1
	cd ${.CURDIR}; for i in ${INCS}; do \
@


1.16
log
@use the pkg-config support from bsd.xorg.mk to handle
libGLw and libepoxy .pc files rather than manually generating them
as root in postinstall. Spotted by natano@@ ok natano@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/08/17 15:16:44 mpi Exp $
d37 2
@


1.15
log
@Sync mesa version numbers after recent libGL update, prodded by matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/10/23 13:59:38 matthieu Exp $
d38 6
a43 11
afterinstall: glw.pc
	$(INSTALL) -c -m 644 -o root -g wheel glw.pc \
		${DESTDIR}${LIBDIR}/pkgconfig

glw.pc: glw.pc.in
	sed -e 's,@@INSTALL_DIR@@,$(X11BASE),' \
	    -e 's,@@LIB_DIR@@,lib,' \
	    -e 's,@@VERSION@@,$(MESA_MAJOR).$(MESA_MINOR).$(MESA_TINY),' \
	< ${.CURDIR}/glw.pc.in > glw.pc

NOPROFILE=
@


1.14
log
@Updated to Mesa 7.10.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/06/22 20:04:22 matthieu Exp $
d8 2
a9 2
MESA_MINOR=	10
MESA_TINY=	3
@


1.13
log
@Update to Mesa 7.8.2. Tested by johan@@. Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/05/08 14:15:29 matthieu Exp $
d8 2
a9 2
MESA_MINOR=	8
MESA_TINY=	2
@


1.12
log
@use INSTALL_DATA in BSD Makefiles. ok oga@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/05/25 18:40:11 matthieu Exp $
d8 1
a8 1
MESA_MINOR=	4
@


1.11
log
@This is Mesa 7.4.2. from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/11/02 16:45:35 matthieu Exp $
d31 1
a31 2
		${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 \
		$$i ${DESTDIR}${INCSDIR}/GL"; \
@


1.10
log
@This is now Mesa 7.2. Noticed by brad@@. Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/07/16 20:24:40 brad Exp $
d8 2
a9 2
MESA_MINOR=	2
MESA_TINY=	0
@


1.9
log
@Bump MESA_TINY (2 -> 3) after the last update of Mesa to 7.0.3
so that the pkgconfig files have the correct version.

ok okan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/02/12 21:09:27 matthieu Exp $
d8 2
a9 2
MESA_MINOR=	0
MESA_TINY=	3
@


1.8
log
@Update to Mesa 7.0.2. Tested by naddy@@ (full ports build), simon@@
and oga@@ (with dri enabled).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/07/29 08:32:45 matthieu Exp $
d9 1
a9 1
MESA_TINY=	2
@


1.7
log
@remove -DUSE_XM_STUBS. I didn't not intend to commit this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/07/28 13:50:48 matthieu Exp $
d7 4
d38 10
@


1.6
log
@Bring in GLw from XF4, to replace the Mesa version. This version
has Motif support enabled using a couple of hacks that Mesa didn't
pick up. ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/04/07 15:37:50 matthieu Exp $
d8 1
a8 1
	-I${.CURDIR} -DUSE_XM_STUBS
@


1.5
log
@Don't include debugging symbols.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.4 2006/12/02 16:28:48 matthieu Exp $

DIST=	${.CURDIR}/../../dist/Mesa
GLW=	${DIST}/src/glw
d7 2
a8 2
CPPFLAGS += -I${DIST}/include \
	-I${X11BASE}/include
d11 4
a14 1
	GLwDrawA.c
d25 1
a25 1
	cd ${GLW}; for i in ${INCS}; do \
a39 1
.PATH: ${GLW}
@


1.4
log
@Make 'obj' now can make symlinks to /usr/obj/xenocara (or any other
directory designed by XENOCARA_OBJDIR in /etc/mk.conf).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/29 18:03:09 matthieu Exp $
d5 2
@


1.3
log
@Disable profiled libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/11/29 14:45:19 matthieu Exp $
d19 2
@


1.2
log
@Install headers
@
text
@d1 1
a1 1
# $OpenBSD$
d28 4
@


1.1
log
@Build infrastructure for GL libs
@
text
@d1 1
a1 1
# $Xenocara$
d13 15
@

