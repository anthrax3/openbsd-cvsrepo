head	1.3;
access;
symbols
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2011.10.23.13.57.36;	author matthieu;	state dead;
branches;
next	1.2;

1.2
date	2010.08.25.17.44.24;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.22.20.14.15;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Build system updates for Mesa 7.10.3
@
text
@#	$OpenBSD: Makefile.inc,v 1.2 2010/08/25 17:44:24 todd Exp $


.if ${MACHINE_ARCH} == powerpc || ${MACHINE_ARCH} == sparc
PICFLAG=-fPIC
.endif

OBJS = ${C_SOURCES:.c=.so}

CPPFLAGS = \
	 -I${.CURDIR} ${LIBRARY_INCLUDES}

.if defined(LIB)
all: ${LIB}_pic.a
.endif

${LIB}_pic.a:	${OBJS} $(DPADD)
	@@rm -f ${LIB}_pic.a
	@@${AR} cq ${LIB}_pic.a `${LORDER} ${OBJS} | tsort -q`
	${RANLIB} ${LIB}_pic.a

clean:
	rm -f ${LIB}_pic.a ${OBJS}

cleandir: clean

install:
	@@echo "noting to install"

.SUFFIXES:
.SUFFIXES: .a .c .o .so

.c.so:
	${COMPILE.c} ${PICFLAG} -DPIC ${.IMPSRC} -o ${.TARGET}.o
	@@${LD} -X -r ${.TARGET}.o -o ${.TARGET}
	@@rm -f ${.TARGET}.o


.include <bsd.dep.mk>
@


1.2
log
@enable pixman (with a workaround from miod@@) for m68k, fixes hp300 and mvme68k
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile.inc,v 1.1 2010/05/22 20:14:15 matthieu Exp $
@


1.1
log
@Build infrastructure for Mesa 7.8.1.
@
text
@d1 1
a1 1
#	$OpenBSD$
d13 1
d15 1
@

