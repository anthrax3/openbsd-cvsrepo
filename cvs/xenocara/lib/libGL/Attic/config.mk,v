head	1.5;
access;
symbols
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2015.12.23.05.06.01;	author jsg;	state dead;
branches;
next	1.4;
commitid	jLBLHykYtPbp9N8b;

1.4
date	2015.02.20.23.31.04;	author jsg;	state Exp;
branches;
next	1.3;
commitid	96FH88ZMzjHy95WG;

1.3
date	2015.01.25.15.09.12;	author jsg;	state Exp;
branches;
next	1.2;
commitid	M1dxZ5qfRB65OrtK;

1.2
date	2014.09.07.15.32.18;	author jsg;	state Exp;
branches;
next	1.1;
commitid	z9PmZqUCgC34b3qk;

1.1
date	2014.07.09.21.32.40;	author jsg;	state Exp;
branches;
next	;
commitid	uM5VFgRcH6JLiuF9;


desc
@@


1.5
log
@remove now unused local build system for Mesa
@
text
@# $OpenBSD: config.mk,v 1.4 2015/02/20 23:31:04 jsg Exp $

MESA_MAJOR=	10
MESA_MINOR=	2
MESA_TINY=	9

CPP=	cpp -notraditional

CFLAGS+= -std=gnu99

CPPFLAGS+= \
	-DPACKAGE_VERSION=\"${MESA_MAJOR}.${MESA_MINOR}.${MESA_TINY}\" \
	-DPACKAGE_BUGREPORT=\"bugs@@openbsd.org\" \
	-DSTDC_HEADERS=1 \
	-DHAVE_SYS_TYPES_H=1 \
	-DHAVE_SYS_STAT_H=1 \
	-DHAVE_STDLIB_H=1 \
	-DHAVE_STRING_H=1 \
	-DHAVE_MEMORY_H=1 \
	-DHAVE_STRINGS_H=1 \
	-DHAVE_INTTYPES_H=1 \
	-DHAVE_STDINT_H=1 \
	-DHAVE_UNISTD_H=1 \
	-DHAVE_DLFCN_H=1 \
	-DYYTEXT_POINTER=1 \
	-DHAVE_CLOCK_GETTIME=1 \
	-DHAVE_PTHREAD_PRIO_INHERIT=1 \
	-DHAVE_PTHREAD=1 \
	-DHAVE_DLOPEN \
	-DHAVE_DLADDR \
	-DHAVE_POSIX_MEMALIGN \
	-DHAVE_LIBDRM \
	-DGLX_USE_DRM \
	-DGLX_INDIRECT_RENDERING \
	-DGLX_DIRECT_RENDERING \
	-DUSE_EXTERNAL_DXTN_LIB=1 \
	-DHAVE_ALIAS \
	-DHAVE_MINCORE \
	-DHAVE_FUNC_ATTRIBUTE_FLATTEN=1 \
	-DHAVE_FUNC_ATTRIBUTE_FORMAT=1 \
	-DHAVE_FUNC_ATTRIBUTE_MALLOC=1 \
	-DHAVE_FUNC_ATTRIBUTE_PACKED=1

.if ${MACHINE_ARCH} == "powerpc" || ${MACHINE_ARCH} == "sparc"
PICFLAG=-fPIC
.endif

.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "amd64"
CPPFLAGS+= \
	-DHAVE___BUILTIN_CLZ=1 \
	-DHAVE___BUILTIN_CLZLL=1 \
	-DHAVE___BUILTIN_CTZ=1 \
	-DHAVE___BUILTIN_EXPECT=1 \
	-DHAVE___BUILTIN_FFS=1 \
	-DHAVE___BUILTIN_FFSLL=1 \
	-DHAVE___BUILTIN_POPCOUNT=1 \
	-DHAVE___BUILTIN_POPCOUNTLL=1
.endif
@


1.4
log
@switch back to Mesa 10.2

With 10.4.3 gpu compositing on chromium would result in a black window
on older Intel parts (ie x60s with 945gm) and at least some discrete
Radeon parts.  These problems do not seem to occur on recent Intel
parts, though those have coherent memory and hardware contexts.

It isn't clear what changes in Mesa are involved in the problem
though it also occurs with the 10.3 branch.
@
text
@d1 1
a1 1
# $OpenBSD: config.mk,v 1.3 2015/01/25 15:09:12 jsg Exp $
@


1.3
log
@Mesa 10.4.3
@
text
@d1 1
a1 1
# $OpenBSD: config.mk,v 1.2 2014/09/07 15:32:18 jsg Exp $
d4 2
a5 2
MESA_MINOR=	4
MESA_TINY=	3
d9 1
a9 1
CFLAGS+= -std=c99
@


1.2
log
@Mesa 10.2.7
@
text
@d1 1
a1 1
# $OpenBSD: config.mk,v 1.1 2014/07/09 21:32:40 jsg Exp $
d4 2
a5 2
MESA_MINOR=	2
MESA_TINY=	7
d30 1
d33 1
d38 5
a42 1
	-DHAVE_MINCORE
d44 1
a44 2
.if ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "powerpc" || \
    ${MACHINE_ARCH} == "sparc"
d46 12
@


1.1
log
@Mesa 10.2.3
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
MESA_TINY=	3
d9 1
a9 1
CFLAGS+= -std=c99 -fms-extensions
@

