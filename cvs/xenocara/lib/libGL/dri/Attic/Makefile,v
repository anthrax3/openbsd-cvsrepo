head	1.20;
access;
symbols
	OPENBSD_5_8:1.19.0.2
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.18.0.6
	OPENBSD_5_7_BASE:1.18
	OPENBSD_5_6:1.18.0.4
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.18.0.2
	OPENBSD_5_5_BASE:1.18
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.14.0.2
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.12.0.4
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.4
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.7.0.4
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_3:1.3.0.2;
locks; strict;
comment	@# @;


1.20
date	2015.12.23.05.06.01;	author jsg;	state dead;
branches;
next	1.19;
commitid	jLBLHykYtPbp9N8b;

1.19
date	2015.07.29.05.49.16;	author mpi;	state Exp;
branches;
next	1.18;
commitid	SKpYAC6dYAbbVrpQ;

1.18
date	2013.09.05.15.11.56;	author jsg;	state Exp;
branches;
next	1.17;

1.17
date	2013.08.12.04.16.52;	author jsg;	state Exp;
branches;
next	1.16;

1.16
date	2013.06.17.23.30.25;	author jsg;	state Exp;
branches;
next	1.15;

1.15
date	2013.06.13.10.39.28;	author jsg;	state Exp;
branches;
next	1.14;

1.14
date	2012.12.07.17.13.41;	author matthieu;	state Exp;
branches;
next	1.13;

1.13
date	2012.08.29.12.52.39;	author mpi;	state Exp;
branches;
next	1.12;

1.12
date	2011.10.23.13.57.36;	author matthieu;	state Exp;
branches;
next	1.11;

1.11
date	2011.05.30.21.52.42;	author oga;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.27.06.25.45;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2010.05.22.20.14.14;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2010.05.08.14.15.29;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2009.05.17.20.20.23;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2009.01.28.16.10.44;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.10.16.01.10;	author oga;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.02.15.01.32;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.02.17.24.30;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2008.01.06.18.34.38;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2007.12.04.22.00.27;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.20
log
@remove now unused local build system for Mesa
@
text
@#	$OpenBSD: Makefile,v 1.19 2015/07/29 05:49:16 mpi Exp $
.include <bsd.xconf.mk>

.if ${XENOCARA_BUILD_GALLIUM} == "llvm"
SUBDIR+=swrastg radeonsi
.else
SUBDIR= swrast
.endif

.if ${MACHINE} == i386 || ${MACHINE} == amd64
SUBDIR+= i915 i965 radeon r200
.elif ${MACHINE} == macppc || ${MACHINE} == sparc64
SUBDIR+= radeon r200
.endif

.if ${XENOCARA_BUILD_GALLIUM:L} == "yes" || ${XENOCARA_BUILD_GALLIUM} == "llvm"
.if ${MACHINE} == i386 || ${MACHINE} == amd64 || \
    ${MACHINE} == macppc || ${MACHINE} == sparc64
SUBDIR+= r300g r600g
.endif
.endif

build depend all install clean cleandir: _SUBDIRUSE

MESA_INCLUDE=	${.CURDIR}/../../../dist/Mesa/include

INCS = \
	dri_interface.h

includes:
	cd ${MESA_INCLUDE}/GL/internal; for i in ${INCS}; do \
	    j="cmp -s $$i ${DESTDIR}${INCSDIR}/GL/internal/$$i || \
		${INSTALL_DATA} $$i ${DESTDIR}${INCSDIR}/GL/internal"; \
		echo "\tinstalling $$i"; \
		eval "$$j"; \
	done

.include <bsd.xorg.mk>
@


1.19
log
@Build r300g and r600g on macppc and sparc64.

ok jsg@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.18 2013/09/05 15:11:56 jsg Exp $
@


1.18
log
@build infrastructure changes for Mesa 9.2.0
ok matthieu@@ mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.17 2013/08/12 04:16:52 jsg Exp $
d17 2
a18 1
.if ${MACHINE} == i386 || ${MACHINE} == amd64
@


1.17
log
@build mesa radeon drivers on sparc64 and switch to gallium drivers
for r300 and r600
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.16 2013/06/17 23:30:25 jsg Exp $
d4 3
d8 1
d11 1
a11 1
SUBDIR+= i810 i915 i965 radeon r200
a15 4
.if ${XENOCARA_BUILD_GALLIUM} == "llvm"
SUBDIR+=swrastg
.endif

d17 1
a17 1
.if ${MACHINE} == i386 || ${MACHINE} == amd64 || ${MACHINE} == macppc || ${MACHINE} == sparc64
a37 2


@


1.16
log
@add the build infrastructure for the gallium r600 driver
ok mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.15 2013/06/13 10:39:28 jsg Exp $
d7 7
a13 3
SUBDIR+= i810 i915 i965 radeon r200 r300 r600
.elif ${MACHINE} == macppc
SUBDIR+= radeon r200 r300
d17 1
a17 2
SUBDIR+=swrastg
.if ${MACHINE} == i386 || ${MACHINE} == amd64 || ${MACHINE} == macppc
@


1.15
log
@add the build infrastructure for the gallium r300 driver
based on an earlier diff from mpi@@
ok mpi@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.14 2012/12/07 17:13:41 matthieu Exp $
d15 1
a15 1
SUBDIR+= r300g
@


1.14
log
@Enable the radeon r100 dri module on macppc. ok mpi@@
@
text
@d1 2
a2 1
#	$OpenBSD: Makefile,v 1.13 2012/08/29 12:52:39 mpi Exp $
d10 7
@


1.13
log
@Build r200 and r300 dri drivers on macppc too.

ok matthieu@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.12 2011/10/23 13:57:36 matthieu Exp $
d8 1
a8 1
SUBDIR+= r200 r300
@


1.12
log
@Build system updates for Mesa 7.10.3
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.10 2010/05/27 06:25:45 matthieu Exp $
d7 2
@


1.11
log
@Now the kernel support has been commited we can enable r600 driver
becaue the lack of kernel support won't break people trying to use gl.

ok matthieu ages ago
@
text
@@


1.10
log
@Remove the makefiles for dri drivers that aren't built anymore.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.9 2010/05/22 20:14:14 matthieu Exp $
d6 1
a6 1
SUBDIR+= i810 i915 i965 radeon r200 r300
@


1.9
log
@Build infrastructure for Mesa 7.8.1.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.8 2010/05/08 14:15:29 matthieu Exp $
d6 1
a6 4
SUBDIR+= i810 i915 i965 \
	 radeon r200 r300
# not ready
# mach64 mga r128  s3v savage sis tdfx trident
a7 3
#.if ${MACHINE} == sparc64
#SUBDIR+= mach64 r128 r200 r300 radeon
#.endif
@


1.8
log
@use INSTALL_DATA in BSD Makefiles. ok oga@@
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.7 2009/05/17 20:20:23 matthieu Exp $
d6 4
a9 5
SUBDIR+= i810 i915 i965 mach64 mga r128 \
	r200 r300 radeon s3v savage sis tdfx trident
.endif
.if ${MACHINE} == sparc64
SUBDIR+= mach64 r128 r200 r300 radeon
d11 3
@


1.7
log
@Update build infrastructure for Mesa 7.4.
@
text
@d1 1
a1 1
#	$OpenBSD: Makefile,v 1.6 2009/01/28 16:10:44 matthieu Exp $
d23 1
a23 2
		${INSTALL} ${INSTALL_COPY} -o ${BINOWN} -g ${BINGRP} -m 444 \
		$$i ${DESTDIR}${INCSDIR}/GL/internal"; \
@


1.6
log
@Add missing OpenBSD RCS Ids.
@
text
@d1 1
a1 1
#	$OpenBSD$
d18 1
a18 2
	dri_interface.h \
	dri_sarea.h
@


1.5
log
@Don't build the "unichrome" driver. We don't have the kernel headers for
it, and we're about to switch to using kernel headers instead of the
ones packaged with libdrm. If the unichrome driver gets rewritten (or I
eventually get time), then it'll come back.

ok matthieu@@
@
text
@d1 2
@


1.4
log
@Update build infrastructure for libGL after Mesa 7.2 update.
@
text
@d5 1
a5 1
	r200 r300 radeon s3v savage sis tdfx trident unichrome
@


1.3
log
@stuff for building libGL with dri support. Also includes clean-up
of the regular libGL build. bump major because some symbols were
removed. ok oga@@
@
text
@d1 9
a9 2
SUBDIR= i810 i915 i965 mach64 mga r128 \
	r200 r300 radeon savage sis tdfx unichrome
d12 15
@


1.2
log
@Better support for recursive make.
@
text
@d4 1
a4 1
build all install clean cleandir: _SUBDIRUSE
@


1.1
log
@Build infrastructure for libGL dri modules.
Work in progress, not connected to the build yet.
@
text
@d4 4
a7 1
.include <bsd.subdir.mk>
a8 1
build: _SUBDIRUSE
@

