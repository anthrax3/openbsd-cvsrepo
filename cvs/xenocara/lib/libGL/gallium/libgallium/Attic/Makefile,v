head	1.9;
access;
symbols
	OPENBSD_5_8:1.7.0.4
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	v7_1O_3:1.1.1.1
	mesa:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2015.12.23.05.06.02;	author jsg;	state dead;
branches;
next	1.8;
commitid	jLBLHykYtPbp9N8b;

1.8
date	2015.08.22.00.50.54;	author jsg;	state Exp;
branches;
next	1.7;
commitid	jZtwe3SD2DamfWe4;

1.7
date	2015.02.20.23.31.05;	author jsg;	state Exp;
branches;
next	1.6;
commitid	96FH88ZMzjHy95WG;

1.6
date	2015.01.25.15.09.13;	author jsg;	state Exp;
branches;
next	1.5;
commitid	M1dxZ5qfRB65OrtK;

1.5
date	2014.07.09.21.32.40;	author jsg;	state Exp;
branches;
next	1.4;
commitid	uM5VFgRcH6JLiuF9;

1.4
date	2013.09.05.15.12.00;	author jsg;	state Exp;
branches;
next	1.3;

1.3
date	2013.04.14.10.23.04;	author mpi;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.17.13.58.00;	author mpi;	state Exp;
branches;
next	1.1;

1.1
date	2012.07.13.12.43.30;	author mpi;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.07.13.12.43.30;	author mpi;	state Exp;
branches;
next	;


desc
@@


1.9
log
@remove now unused local build system for Mesa
@
text
@# $OpenBSD: Makefile,v 1.8 2015/08/22 00:50:54 jsg Exp $
.include <bsd.xconf.mk>

LIB=	gallium

GALLIUM=	${.CURDIR}/../../../../dist/Mesa/src/gallium

CPPFLAGS+= \
	-I${GALLIUM}/include \
	-I${GALLIUM}/auxiliary \
	-I${GALLIUM}/auxiliary/util \
	-I${GALLIUM}/drivers \
	-I${.CURDIR}/../../../../dist/Mesa/include \
	-I${.CURDIR}/../../../../dist/Mesa/src \
	-I${X11BASE}/include \
	-I${X11BASE}/include/libdrm 

C_SOURCES = \
	cso_cache.c \
	cso_context.c \
	cso_hash.c \
	draw_context.c \
	draw_fs.c \
	draw_gs.c \
	draw_pipe.c \
	draw_pipe_aaline.c \
	draw_pipe_aapoint.c \
	draw_pipe_clip.c \
	draw_pipe_cull.c \
	draw_pipe_flatshade.c \
	draw_pipe_offset.c \
	draw_pipe_pstipple.c \
	draw_pipe_stipple.c \
	draw_pipe_twoside.c \
	draw_pipe_unfilled.c \
	draw_pipe_util.c \
	draw_pipe_validate.c \
	draw_pipe_vbuf.c \
	draw_pipe_wide_line.c \
	draw_pipe_wide_point.c \
	draw_prim_assembler.c \
	draw_pt.c \
	draw_pt_emit.c \
	draw_pt_fetch.c \
	draw_pt_fetch_emit.c \
	draw_pt_fetch_shade_emit.c \
	draw_pt_fetch_shade_pipeline.c \
	draw_pt_post_vs.c \
	draw_pt_so_emit.c \
	draw_pt_util.c \
	draw_pt_vsplit.c \
	draw_vertex.c \
	draw_vs.c \
	draw_vs_exec.c \
	draw_vs_variant.c \
	font.c \
	hud_context.c \
	hud_cpu.c \
	hud_fps.c \
	hud_driver_query.c \
	u_indices_gen.c \
	u_unfilled_gen.c \
	u_primconvert.c \
	os_misc.c \
	os_process.c \
	os_time.c \
	pb_buffer_fenced.c \
	pb_buffer_malloc.c \
	pb_bufmgr_alt.c \
	pb_bufmgr_cache.c \
	pb_bufmgr_debug.c \
	pb_bufmgr_mm.c \
	pb_bufmgr_ondemand.c \
	pb_bufmgr_pool.c \
	pb_bufmgr_slab.c \
	pb_validate.c \
	pp_celshade.c \
	pp_colors.c \
	pp_init.c \
	pp_mlaa.c \
	pp_program.c \
	pp_run.c \
	rbug_connection.c \
	rbug_context.c \
	rbug_core.c \
	rbug_demarshal.c \
	rbug_texture.c \
	rbug_shader.c \
	rtasm_cpu.c \
	rtasm_execmem.c \
	rtasm_x86sse.c \
	tgsi_build.c \
	tgsi_dump.c \
	tgsi_exec.c \
	tgsi_info.c \
	tgsi_iterate.c \
	tgsi_parse.c \
	tgsi_sanity.c \
	tgsi_scan.c \
	tgsi_strings.c \
	tgsi_text.c \
	tgsi_transform.c \
	tgsi_ureg.c \
	tgsi_util.c \
	translate.c \
	translate_cache.c \
	translate_generic.c \
	translate_sse.c \
	u_debug.c \
	u_debug_describe.c \
	u_debug_flush.c \
	u_debug_memory.c \
	u_debug_refcnt.c \
	u_debug_stack.c \
	u_debug_symbol.c \
	u_dump_defines.c \
	u_dump_state.c \
	u_bitmask.c \
	u_blit.c \
	u_blitter.c \
	u_cache.c \
	u_caps.c \
	u_cpu_detect.c \
	u_dl.c \
	u_draw.c \
	u_draw_quad.c \
	u_format.c \
	u_format_etc.c \
	u_format_other.c \
	u_format_latc.c \
	u_format_s3tc.c \
	u_format_rgtc.c \
	u_format_srgb.c \
	u_format_table.c \
	u_format_tests.c \
	u_format_yuv.c \
	u_format_zs.c \
	u_framebuffer.c \
	u_gen_mipmap.c \
	u_handle_table.c \
	u_hash.c \
	u_hash_table.c \
	u_helpers.c \
	u_index_modify.c \
	u_keymap.c \
	u_linear.c \
	u_linkage.c \
	u_network.c \
	u_math.c \
	u_mm.c \
	u_pstipple.c \
	u_ringbuffer.c \
	u_sampler.c \
	u_simple_shaders.c \
	u_slab.c \
	u_snprintf.c \
	u_staging.c \
	u_suballoc.c \
	u_surface.c \
	u_surfaces.c \
	u_texture.c \
	u_tile.c \
	u_transfer.c \
	u_resource.c \
	u_upload_mgr.c \
	u_vbuf.c \
	vl_compositor.c \
	vl_csc.c \
	vl_decoder.c \
	vl_idct.c \
	vl_matrix_filter.c \
	vl_mc.c \
	vl_median_filter.c \
	vl_mpeg12_bitstream.c \
	vl_mpeg12_decoder.c \
	vl_vertex_buffers.c \
	vl_video_buffer.c \
	vl_deint_filter.c \
	vl_winsys_dri.c \
	vl_zscan.c

GALLIVM_SOURCES = \
        lp_bld_arit.c \
        lp_bld_arit_overflow.c \
        lp_bld_assert.c \
        lp_bld_bitarit.c \
        lp_bld_const.c \
        lp_bld_conv.c \
        lp_bld_flow.c \
        lp_bld_format_aos.c \
        lp_bld_format_aos_array.c \
	lp_bld_format_float.c \
        lp_bld_format_srgb.c \
        lp_bld_format_soa.c \
        lp_bld_format_yuv.c \
        lp_bld_gather.c \
        lp_bld_init.c \
        lp_bld_intr.c \
        lp_bld_logic.c \
        lp_bld_pack.c \
        lp_bld_printf.c \
        lp_bld_quad.c \
        lp_bld_sample.c \
        lp_bld_sample_aos.c \
        lp_bld_sample_soa.c \
        lp_bld_struct.c \
        lp_bld_swizzle.c \
        lp_bld_tgsi.c \
        lp_bld_tgsi_action.c \
        lp_bld_tgsi_aos.c \
        lp_bld_tgsi_info.c \
        lp_bld_tgsi_soa.c \
        lp_bld_type.c \
        draw_llvm.c \
        draw_llvm_sample.c \
        draw_vs_llvm.c \
        draw_pt_fetch_shade_pipeline_llvm.c

GALLIVM_CPP_SOURCES = \
        lp_bld_debug.cpp \
	lp_bld_misc.cpp

SRCS=	${C_SOURCES}

.if ${XENOCARA_BUILD_GALLIUM} == "llvm"
SRCS+=	${GALLIVM_SOURCES} \
	${GALLIVM_CPP_SOURCES}
.endif

all: lib${LIB}_pic.a

obj: _xenocara_obj

install:
	@@echo "Not installing lib${LIB}"

clean: 
	rm -f lib${LIB}_pic.a ${OBJS}

cleandir:	clean

.include <bsd.xorg.mk>

.PATH: ${GALLIUM}/auxiliary/cso_cache
.PATH: ${GALLIUM}/auxiliary/draw
.PATH: ${GALLIUM}/auxiliary/hud
.PATH: ${GALLIUM}/auxiliary/indices
.PATH: ${GALLIUM}/auxiliary/os
.PATH: ${GALLIUM}/auxiliary/pipebuffer
.PATH: ${GALLIUM}/auxiliary/postprocess
.PATH: ${GALLIUM}/auxiliary/rbug
.PATH: ${GALLIUM}/auxiliary/rtasm
.PATH: ${GALLIUM}/auxiliary/tgsi
.PATH: ${GALLIUM}/auxiliary/translate
.PATH: ${GALLIUM}/auxiliary/util
.PATH: ${GALLIUM}/auxiliary/vl
.PATH: ${GALLIUM}/auxiliary/gallivm
.PATH: ${.CURDIR}/../../generated/util
@


1.8
log
@use the drm headers from libdrm not the kernel
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/02/20 23:31:05 jsg Exp $
@


1.7
log
@switch back to Mesa 10.2

With 10.4.3 gpu compositing on chromium would result in a black window
on older Intel parts (ie x60s with 945gm) and at least some discrete
Radeon parts.  These problems do not seem to occur on recent Intel
parts, though those have coherent memory and hardware contexts.

It isn't clear what changes in Mesa are involved in the problem
though it also occurs with the 10.3 branch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/01/25 15:09:13 jsg Exp $
d16 1
a16 1
	-I/usr/include/dev/pci/drm
@


1.6
log
@Mesa 10.4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/07/09 21:32:40 jsg Exp $
a96 1
	tgsi_lowering.c \
a128 1
	u_format_bptc.c \
d133 1
@


1.5
log
@Mesa 10.2.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/09/05 15:12:00 jsg Exp $
d14 1
d97 1
d130 1
a134 1
	u_format_srgb.c \
@


1.4
log
@build infrastructure changes for Mesa 9.2.0
ok matthieu@@ mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/04/14 10:23:04 mpi Exp $
d62 1
d110 1
d177 1
a178 1
	vl_winsys_xsp.c \
@


1.3
log
@Add a new option to the xenocara infrastructure be able to automatically
build the Gallium3D software rasterizer as part of the libGL.

Note that it can also makes use of LLVM to build the llvmpipe if the
corresponding port is installed. Please refer to the README for a more
complete documentation.

Prodded by ajacoutot@@, ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/08/17 13:58:00 mpi Exp $
d11 5
a15 1
	-I${GALLIUM}/auxiliary/util
d40 1
a52 3
	draw_vs_aos.c \
	draw_vs_aos_io.c \
	draw_vs_aos_machine.c \
a53 2
	draw_vs_ppc.c \
	draw_vs_sse.c \
d55 5
d63 1
a63 5
	os_stream.c \
	os_stream_log.c \
	os_stream_null.c \
	os_stream_stdc.c \
	os_stream_str.c \
d75 6
a88 2
	rtasm_ppc.c \
	rtasm_ppc_spe.c \
a95 1
	tgsi_ppc.c \
d98 1
a98 1
	tgsi_sse2.c \
d109 1
d125 1
a136 1
	u_half.c \
d140 1
a148 1
	u_rect.c \
d155 1
d163 15
a177 1
	u_vbuf_mgr.c
d181 1
d188 3
d205 2
a212 1
        draw_llvm_translate.c \
d243 1
d247 1
d253 1
d255 1
a255 1
.PATH: ${.CURDIR}/generated
@


1.2
log
@Upate to libGL 7.11.2

Tested by jsg@@, matthieu@@ and ajacoutot@@, ok mattieu@@
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/07/13 12:43:30 mpi Exp $
d197 1
a197 1
.ifdef XENOCARA_HAVE_LLVM
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d53 1
a53 1
	draw_vs_varient.c \
d116 1
d120 1
d122 1
d141 1
d155 2
a156 1
	u_upload_mgr.c
a163 1
        lp_bld_debug.c \
d191 1
@


1.1.1.1
log
@Import the infrastructure for building Gallium3D graphics drivers.
Currently only software drivers are supported, looks ok to matthieu.
@
text
@@
