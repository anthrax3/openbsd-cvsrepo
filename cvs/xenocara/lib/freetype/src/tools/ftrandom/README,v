head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.4
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.2
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.2.0.14
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.12
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.10
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.8
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.22
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.20
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.18
	OPENBSD_5_0:1.1.1.1.0.16
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.12
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.14
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.10
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.8
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.6
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.4
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.2
	v2_3_5:1.1.1.1
	freetype:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2016.10.28.21.41.15;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	T2hf37tVZU8TmjB1;

1.2
date	2013.06.07.17.21.11;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2007.09.08.16.33.13;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.09.08.16.33.13;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.3
log
@
Update to FreeType 2.7

Now Subpixel hinting, also known as ClearType hinting, is enabled
by default.

OK matthieu@@
@
text
@ftrandom
========

This program expects a set of directories containing good fonts, and a set
of extensions of fonts to be tested.  It will randomly pick a font, copy it,
introduce an error and then test it.

The FreeType tests are quite basic; for each erroneous font ftrandom

  . forks off a new tester,
  . initializes the library,
  . opens each font in the file,
  . loads each glyph,
  . optionally reviews the contours of the glyph,
  . optionally rasterizes the glyph, and
  . closes the face.

If a tester takes longer than 20 seconds, ftrandom saves the erroneous font
and continues.  If the tester exits normally or with an error, then the
superstructure removes the test font and continues.


Command line options
--------------------

  --all                    Test every font in the directory(ies) no matter
                           what its extension.
  --check-outlines         Call `FT_Outline_Decompose' on each glyph.
  --dir <dir>              Append <dir> to the list of directories to search
                           for good fonts.  No recursive search.
  --error-count <cnt>      Introduce <cnt> single-byte errors into the
                           erroneous fonts (default: 1).
  --error-fraction <frac>  Multiply the file size of the font by <frac> and
                           introduce that many errors into the erroneous
                           font file.  <frac> should be in the range [0;1]
                           (default: 0.0).
  --ext <ext>              Add <ext> to the set of font types tested.
  --help                   Print out this list of options.
  --nohints                Specify FT_LOAD_NO_HINTING when loading glyphs.
  --rasterize              Call `FT_Render_Glyph' as well as loading it.
  --result <dir>           This is the directory in which test files are
                           placed.
  --test <file>            Run a single test on a pre-generated testcase.
                           This is done in the current process so it can be
                           debugged more easily.

The default font extensions tested by ftrandom are

  .ttf .otf .ttc .cid .pfb .pfa .bdf .pcf .pfr .fon .otb .cff

The default font directory is controlled by the macro `GOOD_FONTS_DIR' in
the source code (and can be thus specified during compilation); its default
value is

  /usr/local/share/fonts

The default result directory is `results' (in the current directory).


Compilation
-----------

Two possible solutions.

. Run ftrandom within a debugging tool like `valgrind' to catch various
  memory issues.

. Compile FreeType with sanitizer flags as provided by gcc or clang, for
  example, then link it with ftrandom.
@


1.2
log
@Update to freetype 2.4.12. tested by many during t2k13. Thanks.
@
text
@d2 1
a2 1
--------
d6 1
a6 1
introduce and error and then test it.
d8 1
a8 1
The FreeType tests are quite basic:
d10 7
a16 13
  For each erroneous font it
    forks off a new tester;
    initializes the library;
    opens each font in the file;
    loads each glyph;
      (optionally reviewing the contours of the glyph)
      (optionally rasterizing)
    closes the face.

If the tester exits with a signal, or takes longer than 20 seconds then
ftrandom saves the erroneous font and continues.  If the tester exits
normally or with an error, then the superstructure removes the test font and
continues.
d18 7
a24 1
Arguments are:
d27 2
a28 3
                           what its extension (some CID-keyed fonts have no
                           extension).
  --check-outlines         Call FT_Outline_Decompose on each glyph.
d30 1
a30 1
                           for good fonts.
d32 1
a32 1
                           erroneous fonts.
d35 3
a37 5
                           font file.
  --ext <ext>              Add <ext> to the set of font types tested.  Known
                           extensions are `ttf', `otf', `ttc', `cid', `pfb',
                           `pfa', `bdf', `pcf', `pfr', `fon', `otb', and
                           `cff'.
d40 1
a40 1
  --rasterize              Call FT_Render_Glyph as well as loading it.
d44 26
a69 2
                           Done in the current process so it can be debugged
                           more easily.
@


1.1
log
@Initial revision
@
text
@d46 1
a46 1
  --test <file>            Run a single test on a pre-generated testcase. 
@


1.1.1.1
log
@import freetype 2.3.5
@
text
@@
