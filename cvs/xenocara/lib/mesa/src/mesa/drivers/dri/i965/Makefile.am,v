head	1.5;
access;
symbols
	mesa-17_1_6:1.1.1.6
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	mesa-13_0_6:1.1.1.5
	mesa-13_0_5:1.1.1.5
	mesa-13_0_3:1.1.1.4
	mesa-13_0_2:1.1.1.3
	OPENBSD_6_0:1.1.1.2.0.4
	OPENBSD_6_0_BASE:1.1.1.2
	mesa-11_2_2:1.1.1.2
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	mesa-11_0_9:1.1.1.1
	mesa-11_0_8:1.1.1.1
	mesa-11_0_6:1.1.1.1
	mesa:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2017.08.14.09.58.00;	author jsg;	state Exp;
branches;
next	1.4;
commitid	bC4bLqwWTo4kLw82;

1.4
date	2017.02.26.12.28.56;	author jsg;	state Exp;
branches;
next	1.3;
commitid	SR30X8g3mP0BzNJQ;

1.3
date	2017.01.19.05.53.25;	author jsg;	state Exp;
branches;
next	1.2;
commitid	yxUCg3CSEhMJXPzZ;

1.2
date	2016.12.11.08.53.22;	author jsg;	state Exp;
branches;
next	1.1;
commitid	96stMNxtiPBiO554;

1.1
date	2015.11.22.02.39.56;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;
commitid	bJUptkbooQfJPk5r;

1.1.1.1
date	2015.11.22.02.39.56;	author jsg;	state Exp;
branches;
next	1.1.1.2;
commitid	bJUptkbooQfJPk5r;

1.1.1.2
date	2016.05.29.10.15.12;	author jsg;	state Exp;
branches;
next	1.1.1.3;
commitid	OwGfrJACrYJkCVJ4;

1.1.1.3
date	2016.12.11.08.36.55;	author jsg;	state Exp;
branches;
next	1.1.1.4;
commitid	uuv5VTS15jglEDZU;

1.1.1.4
date	2017.01.19.05.42.08;	author jsg;	state Exp;
branches;
next	1.1.1.5;
commitid	vYSESphXPMoytdgU;

1.1.1.5
date	2017.02.26.12.17.26;	author jsg;	state Exp;
branches;
next	1.1.1.6;
commitid	xZcdklZavddTKAf1;

1.1.1.6
date	2017.08.14.09.42.25;	author jsg;	state Exp;
branches;
next	;
commitid	enNyoMGkcgwM3Ww6;


desc
@@


1.5
log
@Merge Mesa 17.1.6
@
text
@

# Copyright Â© 2011 Intel Corporation
#
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the "Software"),
# to deal in the Software without restriction, including without limitation
# the rights to use, copy, modify, merge, publish, distribute, sublicense,
# and/or sell copies of the Software, and to permit persons to whom the
# Software is furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice (including the next
# paragraph) shall be included in all copies or substantial portions of the
# Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
# IN THE SOFTWARE.

include Makefile.sources

AM_CFLAGS = \
	-I$(top_srcdir)/include \
	-I$(top_srcdir)/src/ \
	-I$(top_srcdir)/src/mapi \
	-I$(top_srcdir)/src/mesa/ \
	-I$(top_srcdir)/src/gallium/include \
	-I$(top_srcdir)/src/gallium/auxiliary \
	-I$(top_builddir)/src/mesa/drivers/dri/common \
	-I$(top_srcdir)/src/mesa/drivers/dri/common \
	-I$(top_srcdir)/src/gtest/include \
	-I$(top_builddir)/src/compiler/glsl \
	-I$(top_builddir)/src/compiler/nir \
	-I$(top_srcdir)/src/compiler/nir \
	-I$(top_builddir)/src/intel \
	-I$(top_srcdir)/src/intel \
	$(DEFINES) \
	$(VISIBILITY_CFLAGS) \
	$(LIBDRM_CFLAGS) \
	$(VALGRIND_CFLAGS)

AM_CXXFLAGS = $(AM_CFLAGS)

I965_PERGEN_LIBS = \
	libi965_gen6.la \
	libi965_gen7.la \
	libi965_gen75.la \
	libi965_gen8.la \
	libi965_gen9.la

libi965_gen6_la_SOURCES = $(i965_gen6_FILES)
libi965_gen6_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=60

libi965_gen7_la_SOURCES = $(i965_gen7_FILES)
libi965_gen7_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=70

libi965_gen75_la_SOURCES = $(i965_gen75_FILES)
libi965_gen75_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=75

libi965_gen8_la_SOURCES = $(i965_gen8_FILES)
libi965_gen8_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=80

libi965_gen9_la_SOURCES = $(i965_gen9_FILES)
libi965_gen9_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=90

noinst_LTLIBRARIES = \
	libi965_dri.la \
	$(I965_PERGEN_LIBS)

libi965_dri_la_SOURCES = \
	$(i965_FILES) \
	$(i965_oa_GENERATED_FILES)
libi965_dri_la_LIBADD = \
	$(top_builddir)/src/intel/common/libintel_common.la \
	$(top_builddir)/src/intel/isl/libisl.la \
	$(top_builddir)/src/intel/compiler/libintel_compiler.la \
	$(top_builddir)/src/intel/blorp/libblorp.la \
	$(I965_PERGEN_LIBS) \
	$(LIBDRM_LIBS)

BUILT_SOURCES = $(i965_oa_GENERATED_FILES)
CLEANFILES = $(BUILT_SOURCES)

EXTRA_DIST = \
	brw_oa_hsw.xml \
	brw_oa.py

# Note: we avoid using a multi target rule here and outputting both the
# .c and .h files in one go so we don't hit problems with parallel
# make and multiple invocations of the same script trying to write
# to the same files.
brw_oa_hsw.h: brw_oa.py brw_oa_hsw.xml
	$(PYTHON2) $(PYTHON_FLAGS) $(srcdir)/brw_oa.py --header=$(builddir)/brw_oa_hsw.h --chipset=hsw $(srcdir)/brw_oa_hsw.xml
brw_oa_hsw.c: brw_oa.py brw_oa_hsw.xml
	$(PYTHON2) $(PYTHON_FLAGS) $(srcdir)/brw_oa.py --code=$(builddir)/brw_oa_hsw.c --chipset=hsw $(srcdir)/brw_oa_hsw.xml
@


1.4
log
@Merge Mesa 13.0.5
@
text
@a34 1
	-I$(top_srcdir)/src/mesa/drivers/dri/intel/server \
d43 2
a44 1
	$(INTEL_CFLAGS)
a47 7
MKDIR_GEN = $(AM_V_at)$(MKDIR_P) $(@@D)
if REGEN_SOURCES
brw_nir_trig_workarounds.c: brw_nir_trig_workarounds.py $(top_srcdir)/src/compiler/nir/nir_algebraic.py
	$(MKDIR_GEN)
	$(AM_V_GEN) PYTHONPATH=$(top_srcdir)/src/compiler/nir $(PYTHON2) $(PYTHON_FLAGS) $(srcdir)/brw_nir_trig_workarounds.py > $@@ || ($(RM) $@@; false)
endif

a71 1
	libi965_compiler.la \
d74 3
a76 1
libi965_dri_la_SOURCES = $(i965_FILES)
d80 1
a80 1
	libi965_compiler.la \
d83 1
a83 5
	$(INTEL_LIBS)

libi965_compiler_la_SOURCES = \
	$(i965_compiler_FILES) \
	$(i965_compiler_GENERATED_FILES)
d85 1
a85 1
BUILT_SOURCES = $(i965_compiler_GENERATED_FILES)
d89 2
a90 10
	brw_nir_trig_workarounds.py

TEST_LIBS = \
	libi965_compiler.la \
	$(I965_PERGEN_LIBS) \
	$(top_builddir)/src/compiler/nir/libnir.la \
	$(top_builddir)/src/util/libmesautil.la \
	$(top_builddir)/src/intel/isl/libisl.la \
	$(PTHREAD_LIBS) \
	$(DLOPEN_LIBS)
d92 8
a99 58
TESTS = \
	test_fs_cmod_propagation \
	test_fs_copy_propagation \
	test_fs_saturate_propagation \
        test_eu_compact \
	test_vf_float_conversions \
	test_vec4_cmod_propagation \
        test_vec4_copy_propagation \
        test_vec4_register_coalesce

check_PROGRAMS = $(TESTS)

test_fs_cmod_propagation_SOURCES = \
	test_fs_cmod_propagation.cpp
test_fs_cmod_propagation_LDADD = \
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)

test_fs_copy_propagation_SOURCES = \
	test_fs_copy_propagation.cpp
test_fs_copy_propagation_LDADD = \
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)

test_fs_saturate_propagation_SOURCES = \
	test_fs_saturate_propagation.cpp
test_fs_saturate_propagation_LDADD = \
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)

test_vf_float_conversions_SOURCES = \
	test_vf_float_conversions.cpp
test_vf_float_conversions_LDADD = \
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)

test_vec4_register_coalesce_SOURCES = \
	test_vec4_register_coalesce.cpp
test_vec4_register_coalesce_LDADD = \
        $(top_builddir)/src/gtest/libgtest.la \
        $(TEST_LIBS)

test_vec4_copy_propagation_SOURCES = \
	test_vec4_copy_propagation.cpp
test_vec4_copy_propagation_LDADD = \
        $(top_builddir)/src/gtest/libgtest.la \
        $(TEST_LIBS)

test_vec4_cmod_propagation_SOURCES = \
	test_vec4_cmod_propagation.cpp
test_vec4_cmod_propagation_LDADD = \
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)

test_eu_compact_SOURCES = \
	test_eu_compact.c
nodist_EXTRA_test_eu_compact_SOURCES = dummy.cpp
test_eu_compact_LDADD = $(TEST_LIBS)
@


1.3
log
@Merge Mesa 13.0.3
@
text
@d33 1
a36 2
	-I$(top_srcdir)/src/compiler/nir \
	-I$(top_srcdir)/src/intel \
d39 1
d41 1
a41 1
	-I$(top_builddir)/src/mesa/drivers/dri/common \
d48 1
@


1.2
log
@Merge Mesa 13.0.2
@
text
@d111 1
d124 6
@


1.1
log
@Initial revision
@
text
@d36 5
a40 1
	-I$(top_builddir)/src/glsl/nir \
d48 33
a80 1
noinst_LTLIBRARIES = libi965_dri.la
d82 17
a98 1
libi965_dri_la_LIBADD = $(INTEL_LIBS)
d101 7
a107 8
	libi965_dri.la \
	../common/libdricommon.la \
	../common/libxmlconfig.la \
	../common/libmegadriver_stub.la \
        ../../../libmesa.la \
	$(DRI_LIB_DEPS) \
        $(CLOCK_LIB) \
	../common/libdri_test_stubs.la
d114 1
d149 6
@


1.1.1.1
log
@import Mesa 11.0.6
@
text
@@


1.1.1.2
log
@Import Mesa 11.2.2
@
text
@d36 1
a36 1
	-I$(top_builddir)/src/compiler/nir \
d44 1
a44 1
noinst_LTLIBRARIES = libi965_dri.la libi965_compiler.la
d46 1
a46 3
libi965_dri_la_LIBADD = libi965_compiler.la $(INTEL_LIBS)

libi965_compiler_la_SOURCES = $(i965_compiler_FILES)
d49 4
a52 1
	libi965_compiler.la \
d54 2
a55 2
	$(PTHREAD_LIBS) \
	$(DLOPEN_LIBS) \
a62 1
	test_vec4_cmod_propagation \
a96 6

test_vec4_cmod_propagation_SOURCES = \
	test_vec4_cmod_propagation.cpp
test_vec4_cmod_propagation_LDADD = \
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)
@


1.1.1.3
log
@Import Mesa 13.0.2
@
text
@a35 3
	-I$(top_srcdir)/src/compiler/nir \
	-I$(top_srcdir)/src/intel \
	-I$(top_builddir)/src/compiler/glsl \
a36 1
	-I$(top_builddir)/src/intel \
d44 1
a44 31
brw_nir_trig_workarounds.c: brw_nir_trig_workarounds.py $(top_srcdir)/src/compiler/nir/nir_algebraic.py
	$(MKDIR_GEN)
	$(AM_V_GEN) PYTHONPATH=$(top_srcdir)/src/compiler/nir $(PYTHON2) $(PYTHON_FLAGS) $(srcdir)/brw_nir_trig_workarounds.py > $@@ || ($(RM) $@@; false)

I965_PERGEN_LIBS = \
	libi965_gen6.la \
	libi965_gen7.la \
	libi965_gen75.la \
	libi965_gen8.la \
	libi965_gen9.la

libi965_gen6_la_SOURCES = $(i965_gen6_FILES)
libi965_gen6_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=60

libi965_gen7_la_SOURCES = $(i965_gen7_FILES)
libi965_gen7_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=70

libi965_gen75_la_SOURCES = $(i965_gen75_FILES)
libi965_gen75_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=75

libi965_gen8_la_SOURCES = $(i965_gen8_FILES)
libi965_gen8_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=80

libi965_gen9_la_SOURCES = $(i965_gen9_FILES)
libi965_gen9_la_CFLAGS = $(AM_CFLAGS) -DGEN_VERSIONx10=90

noinst_LTLIBRARIES = \
	libi965_dri.la \
	libi965_compiler.la \
	$(I965_PERGEN_LIBS)

d46 1
a46 14
libi965_dri_la_LIBADD = \
	$(top_builddir)/src/intel/common/libintel_common.la \
	$(top_builddir)/src/intel/isl/libisl.la \
	libi965_compiler.la \
	$(top_builddir)/src/intel/blorp/libblorp.la \
	$(I965_PERGEN_LIBS) \
	$(INTEL_LIBS)

libi965_compiler_la_SOURCES = \
	$(i965_compiler_FILES) \
	$(i965_compiler_GENERATED_FILES)

BUILT_SOURCES = $(i965_compiler_GENERATED_FILES)
CLEANFILES = $(BUILT_SOURCES)
d48 1
a48 2
EXTRA_DIST = \
	brw_nir_trig_workarounds.py
d52 1
a52 4
	$(I965_PERGEN_LIBS) \
	$(top_builddir)/src/compiler/nir/libnir.la \
	$(top_builddir)/src/util/libmesautil.la \
	$(top_builddir)/src/intel/isl/libisl.la \
d54 2
a55 1
	$(DLOPEN_LIBS)
@


1.1.1.4
log
@Import Mesa 13.0.3
@
text
@a108 1
	test_fs_copy_propagation \
a120 6
	$(top_builddir)/src/gtest/libgtest.la \
	$(TEST_LIBS)

test_fs_copy_propagation_SOURCES = \
	test_fs_copy_propagation.cpp
test_fs_copy_propagation_LDADD = \
@


1.1.1.5
log
@Import Mesa 13.0.5
@
text
@a32 1
	-I$(top_builddir)/src/mesa/drivers/dri/common \
d36 2
a39 1
	-I$(top_srcdir)/src/compiler/nir \
d41 1
a41 1
	-I$(top_srcdir)/src/intel \
a47 1
MKDIR_GEN = $(AM_V_at)$(MKDIR_P) $(@@D)
@


1.1.1.6
log
@Import Mesa 17.1.6
@
text
@d35 1
d44 1
a44 2
	$(LIBDRM_CFLAGS) \
	$(VALGRIND_CFLAGS)
d48 5
d77 1
d80 1
a80 3
libi965_dri_la_SOURCES = \
	$(i965_FILES) \
	$(i965_oa_GENERATED_FILES)
d84 1
a84 1
	$(top_builddir)/src/intel/compiler/libintel_compiler.la \
d87 5
a91 1
	$(LIBDRM_LIBS)
d93 1
a93 1
BUILT_SOURCES = $(i965_oa_GENERATED_FILES)
d97 10
a106 2
	brw_oa_hsw.xml \
	brw_oa.py
d108 58
a165 8
# Note: we avoid using a multi target rule here and outputting both the
# .c and .h files in one go so we don't hit problems with parallel
# make and multiple invocations of the same script trying to write
# to the same files.
brw_oa_hsw.h: brw_oa.py brw_oa_hsw.xml
	$(PYTHON2) $(PYTHON_FLAGS) $(srcdir)/brw_oa.py --header=$(builddir)/brw_oa_hsw.h --chipset=hsw $(srcdir)/brw_oa_hsw.xml
brw_oa_hsw.c: brw_oa.py brw_oa_hsw.xml
	$(PYTHON2) $(PYTHON_FLAGS) $(srcdir)/brw_oa.py --code=$(builddir)/brw_oa_hsw.c --chipset=hsw $(srcdir)/brw_oa_hsw.xml
@


