head	1.5;
access;
symbols
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.12
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.10
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.8
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.6
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.4
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.3.0.14
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.12
	OPENBSD_5_0:1.3.0.10
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.8
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v1_1_1:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@ * @;


1.5
date	2015.08.23.17.44.33;	author matthieu;	state Exp;
branches;
next	1.4;
commitid	34xLN9k2XPpFrenW;

1.4
date	2012.08.11.09.49.51;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.07.10.43.22;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.12.21.46.43;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.20.21.44;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.20.21.44;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Merge from upstreams in preparation for xserver 1.17
@
text
@#include "voodoo_pcirename.h"
#include <string.h>

#include "compat-api.h"

typedef struct {
  CARD32		m;
  CARD32		n;
  CARD32		p;
} PLLClock;

typedef struct {
  CARD8 *             ShadowPtr;	/* Shadow buffer */
  CARD32              ShadowPitch;
  CloseScreenProcPtr  CloseScreen;	/* Wrapped Close */
#ifdef HAVE_XAA_H
  XAAInfoRecPtr	      AccelInfoRec;	/* Cached Accel rec for close */
#endif
  Bool                Blanked;
  Bool                PassThrough;     /* Set to restore pass through on exit */
  EntityInfoPtr       pEnt;
  OptionInfoPtr       Options;
  
  Bool		      Voodoo2;		/* Set if Voodoo2 */
  pciVideoPtr	      PciInfo;		/* PCI data */
#ifndef XSERVER_LIBPCIACCESS
  PCITAG	      PciTag;
#endif
  CARD32	      PhysBase;
  
  CARD32	      Width;		/* Current width */
  CARD32	      Height;   	/* Current height */
  CARD32	      FullHeight;	/* Height including pixmap cache */
  CARD32	      Tiles;		/* 32 tile count */
  
  int		      BlitDirX;		/* Cache blitter direction */
  int		      BlitDirY;		/* Cache blitter direction */
  
  CARD32	      lfbMode;		/* Cached lfbMode value */

  CARD32	      alpha;		/* Cached alpha reg for sw blit */
  CARD32	      alphaPitch;	/* Software render blit state */
  int		      alphaType;
  CARD8		      *alphaPtr;
  CARD32	      alphaC;
  CARD32	      alphaW;
  CARD32              alphaH;
  
  CARD32	      texPitch; 
  int		      texType;
  CARD8		      *texPtr;
  CARD32	      texW;
  CARD32              texH;
  
  int		      ShadowFB;		/* Using shadow FB */
  int		      Accel;		/* Using acceleration */
  
  CARD8	*	      MMIO;		/* MMIO base */
  CARD8 * 	      FBBase;   	/* Virtual FB base */
  CARD32	      Pitch;		/* Pitch of FB */

  DGAModePtr	      pDGAMode;		/* DGA mode */
  int		      nDGAMode;
  
  int		      DAC;
#define DAC_ID_ATT	1
#define DAC_ID_TI	2
#define DAC_ID_ICS	3
#define DAC_UNKNOWN     0
  CARD32	      MaxClock;

  PLLClock	      vClock;
  PLLClock	      gClock;
  
  unsigned char	      LineBuffer[1028];	/* Draw buffer */
  unsigned char       *LinePtr;		/* To keep XAA amused */  
} VoodooRec, *VoodooPtr;

#define TRUE 1
#define FALSE 0

/* Card-specific driver information */

#define VoodooPTR(p) ((VoodooPtr)((p)->driverPrivate))

#define VOODOO_VERSION 4000
#define VOODOO_NAME "Voodoo"
#define VOODOO_DRIVER_NAME "voodoo"
#define VOODOO_MAJOR_VERSION 1
#define VOODOO_MINOR_VERSION 1
#define VOODOO_PATCHLEVEL 0

#define PCI_CHIP_VOODOO1	0x0001
#define PCI_CHIP_VOODOO2	0x0002

/*
 *	Hardware functions
 */
 
extern void VoodooClear(VoodooPtr pVoo);
extern void VoodooCopy16(VoodooPtr pVoo, CARD32 x1, CARD32 y1, CARD32 w, CARD32 h, CARD32 spitch, unsigned char *src);
extern void VoodooCopy24(VoodooPtr pVoo, CARD32 x1, CARD32 y1, CARD32 w, CARD32 h, CARD32 spitch, unsigned char *src);
extern int VoodooHardwareInit(VoodooPtr pVoo);
extern int VoodooMode(ScrnInfoPtr pScrn, DisplayModePtr mode);
extern void VoodooBlank(VoodooPtr pVoo);
extern int VoodooMemorySize(VoodooPtr pVoo);
extern void Voodoo2XAAInit(ScreenPtr pScreen);
extern void VoodooSync(ScrnInfoPtr pScrn);
extern void VoodooReadBank(ScreenPtr pScreen, int bank);
extern void VoodooWriteBank(ScreenPtr pScreen, int bank);
extern void VoodooRestorePassThrough(VoodooPtr pVoo);

/*
 *	DGA
 */

extern Bool VoodooDGAInit(ScrnInfoPtr pScrn, ScreenPtr pScreen);

@


1.4
log
@Update to xf86-video-voodoo 1.2.5
@
text
@d26 1
d28 1
@


1.3
log
@update to xf86-video-voodoo 1.2.1
@
text
@d4 2
d16 1
d18 1
d109 1
a109 1
extern void VoodooReadBank(ScreenPtr pScreen, int bank);
@


1.2
log
@xf86-video-voodoo 1.2.0
@
text
@d16 1
a16 1
  Bool                OnAtExit;
@


1.1
log
@Initial revision
@
text
@d1 1
@


1.1.1.1
log
@Importing xf86-video-voodoo 1.1.1
@
text
@@
