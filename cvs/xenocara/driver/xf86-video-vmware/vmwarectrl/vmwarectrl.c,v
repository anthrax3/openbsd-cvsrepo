head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.26
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.24
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.22
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.20
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.18
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.16
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.14
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.12
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.10
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@ * @;


1.1
date	2011.05.07.08.46.20;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Update to xf86-video-vmware 11.0.3
@
text
@#include <stdio.h>
#include <X11/Xlib.h>
#include <X11/Xlibint.h>
#include <X11/Xproto.h>
#include <X11/extensions/panoramiXproto.h>
#include <string.h>
#include <stdlib.h>

#include "libvmwarectrl.h"

int
main (int argc, char **argv)
{
   Display *dpy;
   char *displayName = NULL;
   int screen;
   int major, minor;

   dpy = XOpenDisplay(displayName);
   if (!dpy) {
      printf("Could not open default X Display\n");
      exit(EXIT_FAILURE);
   }
   screen = DefaultScreen(dpy);

   if (VMwareCtrl_QueryVersion(dpy, &major, &minor)) {
      printf("Got Extension version %d.%d\n", major, minor);
   } else {
      printf("VMWARE_CTRL Extension not found.\n");
      exit(EXIT_FAILURE);
   }

   if (argc >= 2) {
      if (strcmp(argv[1], "setres") == 0) {
         int x, y;
         if (argc < 4) {
            printf("Setres needs x and y too\n");
            exit(EXIT_FAILURE);
         }

         x = atoi(argv[2]);
         y = atoi(argv[3]);

         if (VMwareCtrl_SetRes(dpy, screen, x, y)) {
            printf("Set Res was successful\n");
         } else {
            printf("Set Res failed\n");
         }
      } else if (strcmp(argv[1], "settopology") == 0) {
         xXineramaScreenInfo extents[2];

         if (major == 0 && minor < 2) {
            printf("VMWARE_CTRL version >= 0.2 is required\n");
            exit(EXIT_FAILURE);
         }

         printf("Requesting hard-coded topology\n");

         extents[0].x_org = 0;
         extents[0].y_org = 0;
         extents[0].width = 800;
         extents[0].height = 600;
         extents[1].x_org = 800;
         extents[1].y_org = 0;
         extents[1].width = 800;
         extents[1].height = 600;
         if (VMwareCtrl_SetTopology(dpy, screen, extents, 2)) {
            printf("SetTopology was successful\n");
         } else {
            printf("SetTopology failed\n");
         }
      }
   }

   return EXIT_SUCCESS;
}
@
