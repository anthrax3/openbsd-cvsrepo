head	1.12;
access;
symbols
	OPENBSD_6_1:1.12.0.2
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.11.0.10
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.8
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.6
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.4
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.2
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.10.0.14
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.12
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.10
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.8
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.6
	OPENBSD_5_0:1.10.0.4
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.9.0.8
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.4
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	v20061127:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2017.02.26.16.39.22;	author matthieu;	state Exp;
branches;
next	1.11;
commitid	diFV3jly6zzshyf0;

1.11
date	2014.07.30.20.06.30;	author matthieu;	state Exp;
branches;
next	1.10;
commitid	hyzqGVxZQoePuD1N;

1.10
date	2011.02.21.18.13.18;	author miod;	state Exp;
branches;
next	1.9;

1.9
date	2009.05.20.18.26.35;	author miod;	state Exp;
branches;
next	1.8;

1.8
date	2009.02.15.15.27.40;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2009.01.12.20.46.58;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2009.01.01.19.30.20;	author miod;	state Exp;
branches;
next	1.5;

1.5
date	2008.08.31.07.30.43;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2007.08.26.07.38.37;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2007.08.25.23.00.07;	author aanriot;	state Exp;
branches;
next	1.2;

1.2
date	2007.08.07.08.46.25;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.27.11.25.45;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.27.11.25.45;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Switch to xenodm(1).

Tested by tb@@, Do it now deraadt@@
@
text
@Post-installation instructions for X.Org on OpenBSD/sparc64
-----------------------------------------------------------

Contents
--------
	Single, unaccelerated display
	Single, accelerated display
	Dual, unaccelerated display

Single, unaccelerated display
-----------------------------
This setup is by far the easiest to configure and is supported on just
about every machine OpenBSD/sparc64 runs on (both PCI and SBus based
machines).  These setup do not require any configuration file.

To use xenodm from rc.conf.local(8), it is necessary to disable
/dev/console in /etc/ttys, change the 'status' of /dev/console to
'off'.

Single, accelerated display
---------------------------
Accelerated access to the framebuffer is supported on machines with
PCI VGA or UPA Creator framebuffers.
To use a PCI VGA framebuffer, retrieve the PCI bus, device and function
of the video card, eg:

	blade$ dmesg | grep vgafb
	vgafb0 at pci0 dev 19 function 0 "ATI Rage XL" rev 0x27
	wsdisplay0 at vgafb0: console (std, sun emulation), using wskbd0

The framebuffer is on bus 0, device 19, function 0. Now, create
/etc/X11/xorg.conf, with the following content (replace 0:19:0 with the
bus:dev:func of the framebuffer):

	Section "Device"
		Identifier	"Card0"
		BusID		"PCI:0:19:0"
		Option		"composite_sync" "True"
		# Use the following option on Blade-100
		# Option	"reference_clock" "29.5MHz"
	EndSection

	Section "Monitor"
        	Identifier      "Monitor0"
        	HorizSync       31.5-70
        	VertRefresh     50-90
	EndSection

	Section "Screen"
        	Identifier      "Screen0"
        	Device          "Card0"
        	Monitor         "Monitor0"
	EndSection

See xorg.conf(5) for more options. You may want to replace the frequency
ranges in the "Monitor" section with the actual ranges supported by
your monitor.

For UPA Creator framebuffers, the device will be automatically detected
and you don't need to have an xorg.conf file.

Dual, unaccelerated display
---------------------------
Dual-headed displays are only supported on machines with SBus framebuffers.
These configurations will require a configuration file.
Create /etc/X11/xorg.conf, with these two sections for each framebuffer:

	Section "Device"
		Identifier	"Wsdisplay0"
		Driver		"wsfb"
		Option		"device"	"/dev/ttyC0"
	EndSection

	Section "Screen"
		Identifier	"Screen0"
		Device		"Wsdisplay0"
	EndSection

This example is for the first screen. For the others, increment the
"Wsdisplay" and "Screen" numbers, and change the device to /dev/ttyD0
for the second display, /dev/ttyE0 for the third, and so on.

Then, you'll need to create a ServerLayout section describing all the
displays and their location relative to the first, as in:

	Section "ServerLayout"
		Identifier	"wsfb"
		Screen  0       "Screen0"
		Screen  1       "Screen1" RightOf "Screen0"
	EndSection

See xorg.conf(5) for more options.

To use xenodm from rc.conf.local(8), it is necessary to disable
/dev/console in /etc/ttys, change the 'status' of /dev/console to
'off'.

problem_blurb

$OpenBSD: README.sparc64,v 1.11 2014/07/30 20:06:30 matthieu Exp $
@


1.11
log
@Various updates for 5.6:
- remove the discussion about aperture driver on i386/amd64; it is
  handled by the installer
- change references to rc.conf to rc.conf.local(8)
@
text
@d16 3
a18 2
To use xdm from rc.conf, it is necessary to disable /dev/console in
/etc/ttys, change the 'status' of /dev/console to 'off'.
d94 3
a96 2
To use xdm from rc.conf.local(8), it is necessary to disable /dev/console in
/etc/ttys, change the 'status' of /dev/console to 'off'.
d100 1
a100 1
$OpenBSD: README.sparc64,v 1.10 2011/02/21 18:13:18 miod Exp $
@


1.10
log
@Better instructions for accelerated PCI configuration, including a
working configuration template people can use, should they need to
provide the refresh frequencies their monitor support in order to get
high resolution truecolor modes.
ok matthieu@@
@
text
@a60 3
To use xdm from rc.conf, it is necessary to disable /dev/console in
/etc/ttys, change the 'status' of /dev/console to 'off'.

d93 1
a93 1
To use xdm from rc.conf, it is necessary to disable /dev/console in
d98 1
a98 1
$OpenBSD: README.sparc64,v 1.9 2009/05/20 18:26:35 miod Exp $
@


1.9
log
@Sync with sparc wsmouse changes.
@
text
@d22 1
a22 1
PCI VGA or UPA Creator framebuffers.  
d30 3
a32 4
The framebuffer is on bus 0, device 19, function 0.  Now, using the
configuration in the first section as a guide, add a "Device" section
with something like the following (replace 0:19:0 with the bus:dev:func
of the framebuffer):
a35 1
		Driver		"ati"
d38 1
a38 1
		# Use the following option on Blade-100 
d42 15
a56 1
See xorg.conf(5) for more options.
d101 1
a101 1
$OpenBSD: README.sparc64,v 1.8 2009/02/15 15:27:40 matthieu Exp $
@


1.8
log
@Saner defaults for proposed keyboard configuration:
- set XkbModel to "sun" to get working L-keys
- leave XkbLayout empty so that it's inherited from wscons/
@
text
@d14 4
a17 141
machines).  A sample /etc/X11/xorg.conf is given at the end of this
section, but it may need to be customized to fit the machine.  Mostly
these just entails configuring where mouse input comes from.

- For systems with serial mice on Zilog ports (zstty), the following
'ServerLayout' section should be used in place of the one provided:

Section "ServerLayout"
	Identifier	"wsfb"
	Screen 0	"Screen0" 0 0
	InputDevice	"zsmouse0" "CorePointer"
	InputDevice	"Keyboard0" "CoreKeyboard"
EndSection

- For systems with serial mice on 'com' ports, the following
'ServerLayout' section should be used in place of the one provided:

Section "ServerLayout"
	Identifier	"wsfb"
	Screen 0	"Screen0" 0 0
	InputDevice	"commouse0" "CorePointer"
	InputDevice	"Keyboard0" "CoreKeyboard"
EndSection

- For systems with USB mice or PS/2 mice, the following 'ServerLayout'
section should be used in place of the one provided:

Section "ServerLayout"
	Identifier	"wsfb"
	Screen 0	"Screen0" 0 0
	InputDevice	"wsmouse0" "CorePointer"
	InputDevice	"Keyboard0" "CoreKeyboard"
EndSection

- For systems with both UPA and VGA framebuffers, the device parameter
in the "Device" section must match the wsdisplay device corresponding
to the console (/dev/ttyC0 for wsdisplay0, /dev/ttyD0 for wsdisplay1,
etc).

- For systems with UPA Creator/Creator3D/Elite3D framebuffers use 
	DefaultDepth 24
  in the "Screen" section.

- For systems with Expert3D framebuffers (using the ifb(4) kernel
  driver), the driver name in the "Device" section should be "wildcatfb"
  instead of "wsfb":
	Driver		"wildcatfb"

- What follows is a  whole sample configuration file. Copy it to
  /etc/X11/xorg.conf and customize it as described above. 

-- Cut Here --
#
# Unaccelerated, single display configuration
#
Section "ServerLayout"
	Identifier	"wsfb"
	Screen	0	"Screen0" 0 0
	InputDevice    "wsmouse0" "CorePointer"
	InputDevice    "Keyboard0" "CoreKeyboard"
EndSection
	
Section "Files"
	FontPath     "/usr/X11R6/lib/X11/fonts/misc/"
	FontPath     "/usr/X11R6/lib/X11/fonts/TTF/"
	FontPath     "/usr/X11R6/lib/X11/fonts/OTF"
	FontPath     "/usr/X11R6/lib/X11/fonts/Type1/"
	FontPath     "/usr/X11R6/lib/X11/fonts/75dpi/"
EndSection

# All Sun keyboards (USB Type 6, Serial Type 3/4/5/6)
Section "InputDevice"
	Identifier  "Keyboard0"
	Driver      "kbd"
	Option	    "XkbModel" 	  "sun"
EndSection

# USB Mice
Section "InputDevice"
	Identifier	"wsmouse0"
	Driver		"mouse"
	Option		"Protocol" "wsmouse"
	Option		"Device"   "/dev/wsmouse"
EndSection

# Serial mice on zstty ports
Section "InputDevice"
	Identifier	"zsmouse0"
	Driver		"mouse"
	Option		"Protocol" "SunMouse"
	Option		"Device" "/dev/ttyc"
	Option		"Baudrate" "1200"
EndSection

# Serial mice on com ports
Section "InputDevice"
	Identifier	"commouse0"
	Driver		"mouse"
	Option		"Protocol" "SunMouse"
	Option		"Device" "/dev/tty00"
	Option		"Baudrate" "1200"
EndSection

# All monitors
Section "Monitor"
	Identifier   "Monitor"
	VendorName   "Unknown"
	ModelName    "Unknown"
# Adjust those to your monitor before using another device than wsfb 
# or you can destroy it !!
	HorizSync    31.5-60
	VertRefresh  50-70
EndSection

# All framebuffers
Section "Device"
	Identifier	"Wsdisplay0"
	Driver		"wsfb"
	Option		"device" "/dev/ttyC0"
EndSection

# All framebuffers
Section "Screen"
	Identifier "Screen0"
	Device     "Wsdisplay0"
	Monitor    "Monitor"
	DefaultDepth 8
	SubSection "Display"
		Depth     8
	EndSubSection
	SubSection "Display"
		Depth     16
	EndSubSection
	SubSection "Display"
		Depth     24
	EndSubSection
EndSection
#
# EOF
#
-- Cut Here --
d31 1
a31 1
configuration in the first section as a guide, replace the "Device" section
d44 1
a44 3
For UPA Creator framebuffers, the device can be automatically detected if 
you don't have an xorg.conf file. Otherwise the "Device" section would 
be something like:
d46 2
a47 28
	Section "Device"
		Identifier	"Card0"
		Driver		"sunffb"
	EndSection

It is also important that you modify the Monitor section and change the
HorizSync and VertRefresh parameters with those of the monitor in use.
Finally, customization of the Screen section will allow switching of
resolutions and setting the default bit depth, e.g.:

Section "Screen"
	Identifier	"Screen0"
	Device		"Card0"
	Monitor		"Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth	8
		Modes	"640x480" "800x600" "1024x768"
	EndSubSection
	SubSection "Display"
		Depth	16
		Modes	"640x480" "800x600" "1024x768"
	EndSubSection
	SubSection "Display"
		Depth	24
		Modes	"640x480" "800x600" "1024x768"
	EndSubSection
EndSection
d49 2
a50 1
See xorg.conf(5) for more options.
d55 2
a56 2
Starting with the configuration in the first section, three additional
sections are added for the second framebuffer:
d58 23
a80 42
Section "Device"
	Identifier      "Wsdisplay1"
	Driver          "wsfb"
	Option          "device" "/dev/ttyD0"
EndSection

Section "Monitor"
	Identifier   "Monitor1"
	VendorName   "Unknown"
	ModelName    "Unknown"
# Adjust those to your monitor before using another device than wsfb
# or you can destroy it !!
	HorizSync    31.5-60
	VertRefresh  50-70
EndSection

Section "Screen"
	Identifier "Screen1"
	Device     "Wsdisplay1"
	Monitor    "Monitor1"
	DefaultDepth 8
	SubSection "Display"
		Depth     8
	EndSubSection
	SubSection "Display"
		Depth     16
	EndSubSection
	SubSection "Display"
		Depth     24
	EndSubSection
EndSection

The ServerLayout section is also changed to include the second framebuffer
and its logical location relative to the first, e.g.:

Section "ServerLayout"
	Identifier	"wsfb"
	Screen  0       "Screen0"
	Screen  1       "Screen1" RightOf "Screen0"
	InputDevice	"zsmouse0" "CorePointer"
	InputDevice	"Keyboard0" "CoreKeyboard"
EndSection
d84 3
d89 1
a89 1
$OpenBSD: README.sparc64,v 1.7 2009/01/12 20:46:58 miod Exp $
@


1.7
log
@Sync suggested configuration file with wsmux kernel changes. One step closer
to X.org able to run without a configuration file. ok matthieu@@
@
text
@d88 1
a88 2
	Option	    "XkbRules" 	  "xorg"
	Option	    "XkbLayout"   "us"
d269 1
a269 1
$OpenBSD: README.sparc64,v 1.6 2009/01/01 19:30:20 miod Exp $
@


1.6
log
@Build xf86-video-wildcatfb on OpenBSD/sparc64, and explain how to configure it.
@
text
@d87 1
a87 3
	Driver      "keyboard"
	Option	    "Protocol" 	  "wskbd"
	Option	    "Device" 	  "/dev/wskbd0"
d97 1
a97 1
	Option		"Device"   "/dev/wsmouse0"
d270 1
a270 1
$OpenBSD: README.sparc64,v 1.5 2008/08/31 07:30:43 matthieu Exp $
@


1.5
log
@mention the sunffb driver.
@
text
@d57 5
d272 1
a272 1
$OpenBSD: README.sparc64,v 1.4 2007/08/26 07:38:37 matthieu Exp $
@


1.4
log
@More default config cleanups:
- remove the "Modules" section altogether: X.Org now has a reasonable
  default list built-in
- remove the RgbPath specification that is the default
- use the same FontPath on all architectures.
@
text
@d156 3
a158 2
Accelerated access to the framebuffer is only supported on machines with
PCI VGA framebuffers.  To use it, retrieve the PCI bus, device and function
d179 9
d267 1
a267 1
$OpenBSD: README.sparc64,v 1.3 2007/08/25 23:00:07 aanriot Exp $
@


1.3
log
@update FontPaths, add TTF / OTF and remove CID.

inputs and ok matthieu@@
@
text
@a71 1
	RgbPath      "/usr/X11R6/lib/X11/rgb"
a78 7
Section "Module"
    Load        "type1"
    Load        "freetype"
    Load        "glx"
    Load        "extmod"
EndSection

d257 1
a257 1
$OpenBSD: README.sparc64,v 1.2 2007/08/07 08:46:25 matthieu Exp $
@


1.2
log
@Add the correct 'reference_clock' option for Blade 100 in the
sample accelerated X configuration. Based on work by naddy@@.
@
text
@d74 2
a76 1
	FontPath     "/usr/X11R6/lib/X11/fonts/CID/"
d265 1
a265 1
$OpenBSD: README.sparc64,v 1.1.1.1 2006/11/27 11:25:45 matthieu Exp $
@


1.1
log
@Initial revision
@
text
@d181 2
d264 1
a264 1
$OpenBSD: README.sparc64,v 1.20 2006/09/13 13:30:44 steven Exp $
@


1.1.1.1
log
@Bring over distrib from XF4
@
text
@@
