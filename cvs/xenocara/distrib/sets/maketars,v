head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.8
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.6
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.22
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.20
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.18
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.16
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.14
	OPENBSD_5_0:1.4.0.12
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.8
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.10
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	v20061127:1.1.1.1
	openbsd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2014.08.31.16.52.26;	author matthieu;	state Exp;
branches;
next	1.5;
commitid	tYlaLKd5EWLzrgId;

1.5
date	2014.05.03.15.18.26;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	2008.12.24.00.15.24;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	2007.08.05.22.26.02;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.28.20.07.23;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.27.11.25.45;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.27.11.25.45;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Get rid of the 'nocreate' feature, unused for 6 years and stop
building the xetcXX.tgz set
@
text
@#!/bin/sh
#	$OpenBSD: maketars,v 1.5 2014/05/03 15:18:26 todd Exp $

# xy
RELEASE=$1

if [ "X${RELEASE}" = "X" ]; then
	echo "Usage: `basename $0` <OSREVISION>"
	exit 1
fi

if [ "X${RELEASEDIR}" = "X" ]; then
	echo RELEASEDIR must be set
	exit 1
fi

if [ "X${DESTDIR}" = "X" ]; then
	echo DESTDIR must be set
	exit 1
fi

arch=${MACHINE}
pwd=`pwd`
listsdir=`pwd`/lists
tardir=$RELEASEDIR

TMPDIR=`mktemp -d /tmp/_maketarsx.XXXXXXXXXX` || exit 1
trap 'rm -f $TMP1 $TMP2; rmdir $TMPDIR' 0 1 15
TMP1=$TMPDIR/one
TMP2=$TMPDIR/two

cd $DESTDIR

for setname in xbase xfont xserv xshare; do
	echo -n "${setname}: "
	(cd $pwd; sh gensetlist $setname) | sort > $TMP1
	sed -n  '/^\.\/usr\/X11R6\/lib\/lib.*\.so\..*/{p;}' $TMP1 > $TMP2
	sed     '/^\.\/usr\/X11R6\/lib\/lib.*\.so\..*/d'    $TMP1 >> $TMP2
	pax -w -d < $TMP2 | gzip -9 > ${tardir}/${setname}${RELEASE}.tgz
	echo    "done."
done

echo    "done."
@


1.5
log
@spring cleaning for xenocara/ .. tedu unused Release arg and sync with base functionality
@
text
@d2 1
a2 1
#	$OpenBSD: maketars,v 1.4 2008/12/24 00:15:24 todd Exp $
a31 2
lists=`sh ./genlists $arch`

d34 1
a34 1
for setname in $lists; do
@


1.4
log
@clean /tmp propery like other scripts; prodded by deraadt@@
@
text
@d2 1
a2 1
#	$OpenBSD: maketars,v 1.3 2007/08/05 22:26:02 todd Exp $
a5 2
Release=$2
# x.y
d38 1
a38 1
	(cd $pwd; sh gensetlist $setname $Release) | sort > $TMP1
@


1.3
log
@only put shared libs at the top of the tarballs, not all of X11R6/lib
ok matthieu@@
@
text
@d2 1
a2 1
#	$OpenBSD: maketars,v 1.2 2007/03/28 20:07:23 todd Exp $
d29 2
a30 2
TMPDIR=`mktemp -d /tmp/_maketarsx.XXXXXXXXXX`
trap 'rm -f $TMP1 $TMP2; rmdir $TMPDIR; exit 1' 1 15
@


1.2
log
@mimic src maketars script by putting `./usr/X11R6/lib' first
looks ok matthieu@@
@
text
@d2 1
a2 1
#	$OpenBSD: maketars,v 1.1.1.1 2006/11/27 11:25:45 matthieu Exp $
d41 2
a42 2
	grep    '^./usr/X11R6/lib' $TMP1 > $TMP2
	grep -v '^./usr/X11R6/lib' $TMP1 >> $TMP2
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
#	$OpenBSD: maketars,v 1.10 2004/12/09 06:15:41 todd Exp $
d29 5
d40 4
a43 2
	(cd $pwd; sh gensetlist $setname $Release) | sort | \
	    pax -w -d | gzip -9 > ${tardir}/${setname}${RELEASE}.tgz
@


1.1.1.1
log
@Bring over distrib from XF4
@
text
@@
