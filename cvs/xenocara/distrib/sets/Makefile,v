head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.11.19.08.36.48;	author tb;	state Exp;
branches;
next	1.5;
commitid	mf0jMkXrn7JyRahB;

1.5
date	2016.10.02.09.16.22;	author tb;	state Exp;
branches;
next	1.4;
commitid	3jy7bEIzy0xLZPL1;

1.4
date	2015.08.24.10.41.21;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	ha9Dm2qAnqcras0k;

1.3
date	2014.08.28.17.11.19;	author matthieu;	state Exp;
branches;
next	1.2;
commitid	qqwr3D2fXbIhHzVU;

1.2
date	2014.08.28.17.08.33;	author matthieu;	state Exp;
branches;
next	1.1;
commitid	V1mFhx4vmKpsouti;

1.1
date	2014.07.10.07.13.13;	author espie;	state Exp;
branches;
next	;
commitid	ruHFrC60cyflIHAt;


desc
@@


1.6
log
@Set permissions of xorg.db and xetc.tgz explicitly, so they don't
depend on the umask.

push forward deraadt; no objections matthieu
@
text
@# $OpenBSD: Makefile,v 1.5 2016/10/02 09:16:22 tb Exp $

DB = /usr/X11R6/lib/locate/xorg.db
XETC = ${DESTDIR}/var/sysmerge/xetc.tgz

all: tarxetc makedb

makedb:
	MACHINE=${MACHINE} /bin/sh ${.CURDIR}/makelocatedb ${OSrev} >${DESTDIR}${DB}
	chown ${BINOWN}:${BINGRP} ${DESTDIR}${DB}
	chmod 644 ${DESTDIR}${DB}

tarxetc:
	MACHINE=${MACHINE} /bin/sh ${.CURDIR}/makexetc
	chown root:wheel ${XETC}
	chmod 644 ${XETC}

.PHONY: makedb tarxetc

.include <bsd.own.mk>
@


1.5
log
@Explicitly set owners of the xorg.db locate(1) database and of the
xetc.tgz set for sysmerge.  Needed for noperm release.

ok matthieu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/08/24 10:41:21 ajacoutot Exp $
d11 1
d16 1
@


1.4
log
@/usr/share/sysmerge -> /var/sysmerge

requested by several
discussed with deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/08/28 17:11:19 matthieu Exp $
d10 1
d14 1
d17 2
@


1.3
log
@Use a phony target to build xetc.tgz so that its gets rebuilt everytime
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/08/28 17:08:33 matthieu Exp $
d4 1
a4 1
XETC = ${DESTDIR}/usr/share/sysmerge/xetc.tgz
@


1.2
log
@Move xetc set to xbase like etc in base. ok and a tweak by ajacoutot@@

There are still some issues, they will be fixed in tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2014/07/10 07:13:13 espie Exp $
d6 1
a6 1
all: ${XETC} makedb
d11 1
a11 1
${XETC}:
d14 1
a14 1
.PHONY: makedb
@


1.1
log
@locate db in X, named xorg.db to please matthieu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2014/07/09 19:23:28 espie Exp $
d4 3
d10 3
@

