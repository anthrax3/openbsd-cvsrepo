head	1.4;
access;
symbols
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.18
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.16
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.14
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.12
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.10
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2012.06.10.13.21.29;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.05.13.32.54;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.27.19.02.36;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2009.09.06.19.44.35;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to xserver 1.12.2. tested by naddy@@, krw@@, mpi@@.
@
text
@AM_CPPFLAGS = \
	-I$(srcdir)/.. \
	-DBUILD_DATE=\"$(BUILD_DATE)\" \
	-DXSERVER_VERSION=\"$(VERSION)\" \
	-DX11BINDIR=\"$(bindir)\"

AM_CFLAGS = $(DIX_CFLAGS)

x11appdir = $(APPLE_APPLICATIONS_DIR)/$(APPLE_APPLICATION_NAME).app/Contents/MacOS
x11app_PROGRAMS = X11.bin

dist_X11_bin_SOURCES = \
	bundle-main.c 

# strndup(3) was added in Mac OS X 10.7, but we do this unconditionally to deal
# with the case where we build on Lion but target Snow Leopard as the minimum
# OS version.
#if NEED_STRNDUP
dist_X11_bin_SOURCES += $(top_srcdir)/os/strndup.c
#endif

nodist_X11_bin_SOURCES = \
	mach_startupServer.c \
	mach_startupUser.c

X11_bin_DEPENDENCIES = \
	$(top_builddir)/hw/xquartz/libXquartz.la \
	$(top_builddir)/hw/xquartz/xpr/libXquartzXpr.la \
	$(top_builddir)/dix/dixfonts.lo \
	$(top_builddir)/miext/rootless/librootless.la \
	$(top_builddir)/hw/xquartz/pbproxy/libxpbproxy.la \
	$(XQUARTZ_LIBS) $(XSERVER_LIBS)

# $(XSERVER_SYS_LIBS) is placed here in order to set command line ordering
# to work around build issues on Tiger.
X11_bin_LDADD = $(X11_bin_DEPENDENCIES) $(XSERVER_SYS_LIBS)

X11_bin_LDFLAGS =  \
	-lXplugin \
	-XCClinker -Objc \
	-Wl,-u,_miDCInitialize \
	-Wl,-framework,Carbon \
	-Wl,-framework,Cocoa \
	-Wl,-framework,CoreAudio \
	-Wl,-framework,IOKit

if GLX
X11_bin_DEPENDENCIES += \
	$(top_builddir)/hw/xquartz/GL/libCGLCore.la \
	$(top_builddir)/glx/libglx.la

X11_bin_LDFLAGS += \
	-Wl,-framework,OpenGL
endif

if XQUARTZ_SPARKLE
X11_bin_LDFLAGS += \
	-Wl,-framework,Sparkle
endif

if RECORD
X11_bin_DEPENDENCIES += \
	$(top_builddir)/record/librecord.la
endif

bin_PROGRAMS = Xquartz

dist_Xquartz_SOURCES = \
	stub.c \
	launchd_fd.c

nodist_Xquartz_SOURCES = \
	mach_startupUser.c

Xquartz_LDFLAGS =  \
	-Wl,-framework,CoreServices

BUILT_SOURCES = \
	mach_startupServer.c \
	mach_startupUser.c \
	mach_startupServer.h \
	mach_startup.h

CLEANFILES = \
	$(BUILT_SOURCES)

$(BUILT_SOURCES): $(srcdir)/mach_startup.defs
	mig -sheader mach_startupServer.h $(srcdir)/mach_startup.defs

EXTRA_DIST = \
	launchd_fd.h \
	mach_startup.defs \
	mach_startup_types.h
@


1.3
log
@Update to xserver 1.11.2
@
text
@d15 7
d26 1
a26 1
X11_bin_LDADD = \
d34 4
d39 1
a39 1
	$(XSERVER_SYS_LIBS) -lXplugin \
d48 1
a48 1
X11_bin_LDADD += \
d62 1
a62 1
X11_bin_LDADD += \
a64 2

X11_bin_DEPENDENCIES = $(X11_bin_LDADD)
@


1.2
log
@Update to xserver 1.8. Tested by many. Ok oga@@, todd@@.
@
text
@d2 1
d25 1
a25 1
	$(DARWIN_LIBS) $(MAIN_LIB) $(XSERVER_LIBS) $(XSERVER_SYS_LIBS) -lXplugin
d28 1
a41 1
	-L/System/Library/Frameworks/OpenGL.framework/Libraries -lGL \
d54 2
@


1.1
log
@update to xserver 1.6.4rc1. Tested by many, ok oga@@.
@
text
@d6 3
a8 1
x11appdir = $(APPLE_APPLICATIONS_DIR)/X11.app/Contents/MacOS
d24 1
a24 1
	$(DARWIN_LIBS) $(XSERVER_LIBS) $(XSERVER_SYS_LIBS) -lXplugin
d42 5
@

