head	1.7;
access;
symbols
	OPENBSD_5_3:1.6.0.4
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.6
	OPENBSD_5_0:1.5.0.4
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.2.0.4
	OPENBSD_4_4_BASE:1.1.1.2
	OPENBSD_4_3_BASE:1.1.1.2
	OPENBSD_4_3:1.1.1.2.0.2
	v1_4_0_90:1.1.1.2
	v1_4:1.1.1.2
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v1_2_0:1.1.1.1
	v1_1_99_903:1.1.1.1
	v1_1_99_902:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@ * @;


1.7
date	2013.06.07.17.28.53;	author matthieu;	state dead;
branches;
next	1.6;

1.6
date	2012.06.10.13.21.28;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.05.15.36.08;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2010.07.27.19.02.35;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2009.09.06.19.44.28;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.02.15.26.26;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.18.17.51;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.18.17.51;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.11.24.17.58.23;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to X server 1.14.1. Tested by many during t2k13. Thanks.
@
text
@
#ifndef _XAALOCAL_H
#define _XAALOCAL_H

#ifdef HAVE_XORG_CONFIG_H
#include <xorg-config.h>
#endif

/* This file is very unorganized ! */

#include "gcstruct.h"
#include "regionstr.h"
#include "xf86fbman.h"
#include "xaa.h"
#include "mi.h"
#include "picturestr.h"

#define GCWhenForced		(GCArcMode << 1)

#define DO_COLOR_8x8		0x00000001
#define DO_MONO_8x8		0x00000002
#define DO_CACHE_BLT		0x00000003
#define DO_COLOR_EXPAND		0x00000004
#define DO_CACHE_EXPAND		0x00000005
#define DO_IMAGE_WRITE		0x00000006
#define DO_PIXMAP_COPY		0x00000007
#define DO_SOLID		0x00000008

typedef CARD32 *(*GlyphScanlineFuncPtr) (CARD32 *base, unsigned int **glyphp,
                                         int line, int nglyph, int width);

typedef CARD32 *(*StippleScanlineProcPtr) (CARD32 *, CARD32 *, int, int, int);

typedef void (*RectFuncPtr) (ScrnInfoPtr, int, int, int, int, int, int,
                             XAACacheInfoPtr);
typedef void (*TrapFuncPtr) (ScrnInfoPtr, int, int, int, int, int, int,
                             int, int, int, int, int, int, XAACacheInfoPtr);

typedef struct _XAAScreen {
    CreateGCProcPtr CreateGC;
    CloseScreenProcPtr CloseScreen;
    GetImageProcPtr GetImage;
    GetSpansProcPtr GetSpans;
    CopyWindowProcPtr CopyWindow;
    WindowExposuresProcPtr WindowExposures;
    CreatePixmapProcPtr CreatePixmap;
    DestroyPixmapProcPtr DestroyPixmap;
    ChangeWindowAttributesProcPtr ChangeWindowAttributes;
    XAAInfoRecPtr AccelInfoRec;
    Bool (*EnterVT) (int, int);
    void (*LeaveVT) (int, int);
    int (*SetDGAMode) (int, int, DGADevicePtr);
    void (*EnableDisableFBAccess) (int, Bool);
    CompositeProcPtr Composite;
    GlyphsProcPtr Glyphs;
} XAAScreenRec, *XAAScreenPtr;

#define	OPS_ARE_PIXMAP		0x00000001
#define OPS_ARE_ACCEL		0x00000002

typedef struct _XAAGC {
    GCOps *wrapOps;
    GCFuncs *wrapFuncs;
    GCOps *XAAOps;
    int DashLength;
    unsigned char *DashPattern;
    unsigned long changes;
    unsigned long flags;
} XAAGCRec, *XAAGCPtr;

#define REDUCIBILITY_CHECKED	0x00000001
#define REDUCIBLE_TO_8x8	0x00000002
#define REDUCIBLE_TO_2_COLOR	0x00000004
#define DIRTY			0x00010000
#define OFFSCREEN		0x00020000
#define DGA_PIXMAP		0x00040000
#define SHARED_PIXMAP		0x00080000
#define LOCKED_PIXMAP		0x00100000

#define REDUCIBILITY_MASK \
 (REDUCIBILITY_CHECKED | REDUCIBLE_TO_8x8 | REDUCIBLE_TO_2_COLOR)

typedef struct _XAAPixmap {
    unsigned long flags;
    CARD32 pattern0;
    CARD32 pattern1;
    int fg;
    int bg;
    FBAreaPtr offscreenArea;
    Bool freeData;
} XAAPixmapRec, *XAAPixmapPtr;

extern _X_EXPORT Bool
 XAACreateGC(GCPtr pGC);

extern _X_EXPORT Bool
 XAAInitAccel(ScreenPtr pScreen, XAAInfoRecPtr infoRec);

extern _X_EXPORT RegionPtr

XAABitBlt(DrawablePtr pSrcDrawable,
          DrawablePtr pDstDrawable,
          GC * pGC,
          int srcx,
          int srcy,
          int width,
          int height,
          int dstx,
          int dsty,
          void (*doBitBlt) (DrawablePtr, DrawablePtr, GCPtr, RegionPtr,
                            DDXPointPtr), unsigned long bitPlane);

extern _X_EXPORT void

XAAScreenToScreenBitBlt(ScrnInfoPtr pScrn,
                        int nbox,
                        DDXPointPtr pptSrc,
                        BoxPtr pbox,
                        int xdir, int ydir, int alu, unsigned int planemask);

extern _X_EXPORT void

XAADoBitBlt(DrawablePtr pSrc,
            DrawablePtr pDst, GC * pGC, RegionPtr prgnDst, DDXPointPtr pptSrc);

extern _X_EXPORT void

XAADoImageWrite(DrawablePtr pSrc,
                DrawablePtr pDst,
                GC * pGC, RegionPtr prgnDst, DDXPointPtr pptSrc);

extern _X_EXPORT void

XAADoImageRead(DrawablePtr pSrc,
               DrawablePtr pDst,
               GC * pGC, RegionPtr prgnDst, DDXPointPtr pptSrc);

extern _X_EXPORT void
 XAACopyWindow(WindowPtr pWin, DDXPointRec ptOldOrg, RegionPtr prgnSrc);

extern _X_EXPORT RegionPtr

XAACopyArea(DrawablePtr pSrcDrawable,
            DrawablePtr pDstDrawable,
            GC * pGC,
            int srcx, int srcy, int width, int height, int dstx, int dsty);

extern _X_EXPORT void
 XAAValidateCopyArea(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidatePutImage(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidateCopyPlane(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidatePushPixels(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidateFillSpans(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidatePolyGlyphBlt(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidateImageGlyphBlt(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT void
 XAAValidatePolylines(GCPtr pGC, unsigned long changes, DrawablePtr pDraw);

extern _X_EXPORT RegionPtr

XAACopyPlaneColorExpansion(DrawablePtr pSrc,
                           DrawablePtr pDst,
                           GCPtr pGC,
                           int srcx,
                           int srcy,
                           int width,
                           int height,
                           int dstx, int dsty, unsigned long bitPlane);

extern _X_EXPORT void

XAAPushPixelsSolidColorExpansion(GCPtr pGC,
                                 PixmapPtr pBitMap,
                                 DrawablePtr pDrawable,
                                 int dx, int dy, int xOrg, int yOrg);

extern _X_EXPORT void

XAAWriteBitmapColorExpandMSBFirstFixedBase(ScrnInfoPtr pScrn,
                                           int x, int y, int w, int h,
                                           unsigned char *src,
                                           int srcwidth,
                                           int skipleft,
                                           int fg, int bg,
                                           int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpand3MSBFirstFixedBase(ScrnInfoPtr pScrn,
                                            int x, int y, int w, int h,
                                            unsigned char *src,
                                            int srcwidth,
                                            int skipleft,
                                            int fg, int bg,
                                            int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpandMSBFirst(ScrnInfoPtr pScrn,
                                  int x, int y, int w, int h,
                                  unsigned char *src,
                                  int srcwidth,
                                  int skipleft,
                                  int fg, int bg,
                                  int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpand3MSBFirst(ScrnInfoPtr pScrn,
                                   int x, int y, int w, int h,
                                   unsigned char *src,
                                   int srcwidth,
                                   int skipleft,
                                   int fg, int bg,
                                   int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpandLSBFirstFixedBase(ScrnInfoPtr pScrn,
                                           int x, int y, int w, int h,
                                           unsigned char *src,
                                           int srcwidth,
                                           int skipleft,
                                           int fg, int bg,
                                           int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpand3LSBFirstFixedBase(ScrnInfoPtr pScrn,
                                            int x, int y, int w, int h,
                                            unsigned char *src,
                                            int srcwidth,
                                            int skipleft,
                                            int fg, int bg,
                                            int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpandLSBFirst(ScrnInfoPtr pScrn,
                                  int x, int y, int w, int h,
                                  unsigned char *src,
                                  int srcwidth,
                                  int skipleft,
                                  int fg, int bg,
                                  int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapColorExpand3LSBFirst(ScrnInfoPtr pScrn,
                                   int x, int y, int w, int h,
                                   unsigned char *src,
                                   int srcwidth,
                                   int skipleft,
                                   int fg, int bg,
                                   int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpandMSBFirst(ScrnInfoPtr pScrn,
                                          int x, int y, int w, int h,
                                          unsigned char *src,
                                          int srcwidth,
                                          int skipleft,
                                          int fg, int bg,
                                          int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpand3MSBFirst(ScrnInfoPtr pScrn,
                                           int x, int y, int w, int h,
                                           unsigned char *src,
                                           int srcwidth,
                                           int skipleft,
                                           int fg, int bg,
                                           int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpandMSBFirstFixedBase(ScrnInfoPtr pScrn,
                                                   int x, int y, int w, int h,
                                                   unsigned char *src,
                                                   int srcwidth,
                                                   int skipleft,
                                                   int fg, int bg,
                                                   int rop,
                                                   unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpand3MSBFirstFixedBase(ScrnInfoPtr pScrn,
                                                    int x, int y, int w, int h,
                                                    unsigned char *src,
                                                    int srcwidth,
                                                    int skipleft,
                                                    int fg, int bg,
                                                    int rop,
                                                    unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpandLSBFirst(ScrnInfoPtr pScrn,
                                          int x, int y, int w, int h,
                                          unsigned char *src,
                                          int srcwidth,
                                          int skipleft,
                                          int fg, int bg,
                                          int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpand3LSBFirst(ScrnInfoPtr pScrn,
                                           int x, int y, int w, int h,
                                           unsigned char *src,
                                           int srcwidth,
                                           int skipleft,
                                           int fg, int bg,
                                           int rop, unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpandLSBFirstFixedBase(ScrnInfoPtr pScrn,
                                                   int x, int y, int w, int h,
                                                   unsigned char *src,
                                                   int srcwidth,
                                                   int skipleft,
                                                   int fg, int bg,
                                                   int rop,
                                                   unsigned int planemask);

extern _X_EXPORT void

XAAWriteBitmapScanlineColorExpand3LSBFirstFixedBase(ScrnInfoPtr pScrn,
                                                    int x, int y, int w, int h,
                                                    unsigned char *src,
                                                    int srcwidth,
                                                    int skipleft,
                                                    int fg, int bg,
                                                    int rop,
                                                    unsigned int planemask);

extern _X_EXPORT void

XAAWritePixmap(ScrnInfoPtr pScrn,
               int x, int y, int w, int h,
               unsigned char *src,
               int srcwidth,
               int rop,
               unsigned int planemask,
               int transparency_color, int bpp, int depth);

extern _X_EXPORT void

XAAWritePixmapScanline(ScrnInfoPtr pScrn,
                       int x, int y, int w, int h,
                       unsigned char *src,
                       int srcwidth,
                       int rop,
                       unsigned int planemask,
                       int transparency_color, int bpp, int depth);

typedef void (*ClipAndRenderRectsFunc) (GCPtr, int, BoxPtr, int, int);

extern _X_EXPORT void

XAAClipAndRenderRects(GCPtr pGC,
                      ClipAndRenderRectsFunc func,
                      int nrectFill, xRectangle *prectInit, int xorg, int yorg);

typedef void (*ClipAndRenderSpansFunc) (GCPtr, int, DDXPointPtr, int *,
                                        int, int, int);

extern _X_EXPORT void

XAAClipAndRenderSpans(GCPtr pGC,
                      DDXPointPtr ppt,
                      int *pwidth,
                      int nspans,
                      int fSorted,
                      ClipAndRenderSpansFunc func, int xorg, int yorg);

extern _X_EXPORT void

XAAFillSolidRects(ScrnInfoPtr pScrn,
                  int fg, int rop,
                  unsigned int planemask, int nBox, BoxPtr pBox);

extern _X_EXPORT void

XAAFillMono8x8PatternRects(ScrnInfoPtr pScrn,
                           int fg, int bg, int rop,
                           unsigned int planemask,
                           int nBox,
                           BoxPtr pBox, int pat0, int pat1, int xorg, int yorg);

extern _X_EXPORT void

XAAFillMono8x8PatternRectsScreenOrigin(ScrnInfoPtr pScrn,
                                       int fg, int bg, int rop,
                                       unsigned int planemask,
                                       int nBox,
                                       BoxPtr pBox,
                                       int pat0, int pat1, int xorg, int yorg);

extern _X_EXPORT void

XAAFillColor8x8PatternRectsScreenOrigin(ScrnInfoPtr pScrn,
                                        int rop,
                                        unsigned int planemask,
                                        int nBox,
                                        BoxPtr pBox,
                                        int xorigin, int yorigin,
                                        XAACacheInfoPtr pCache);

extern _X_EXPORT void

XAAFillColor8x8PatternRects(ScrnInfoPtr pScrn,
                            int rop,
                            unsigned int planemask,
                            int nBox,
                            BoxPtr pBox,
                            int xorigin, int yorigin, XAACacheInfoPtr pCache);

extern _X_EXPORT void

XAAFillCacheBltRects(ScrnInfoPtr pScrn,
                     int rop,
                     unsigned int planemask,
                     int nBox,
                     BoxPtr pBox, int xorg, int yorg, XAACacheInfoPtr pCache);

extern _X_EXPORT void

XAAFillCacheExpandRects(ScrnInfoPtr pScrn,
                        int fg, int bg, int rop,
                        unsigned int planemask,
                        int nBox,
                        BoxPtr pBox, int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillImageWriteRects(ScrnInfoPtr pScrn,
                       int rop,
                       unsigned int planemask,
                       int nBox,
                       BoxPtr pBox, int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAPolyFillRect(DrawablePtr pDraw,
                GCPtr pGC, int nrectFill, xRectangle *prectInit);

extern _X_EXPORT void

XAATEGlyphRendererMSBFirstFixedBase(ScrnInfoPtr pScrn,
                                    int x, int y, int w, int h, int skipleft,
                                    int startline, unsigned int **glyphs,
                                    int glyphWidth, int fg, int bg, int rop,
                                    unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRenderer3MSBFirstFixedBase(ScrnInfoPtr pScrn,
                                     int x, int y, int w, int h, int skipleft,
                                     int startline, unsigned int **glyphs,
                                     int glyphWidth, int fg, int bg, int rop,
                                     unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererMSBFirst(ScrnInfoPtr pScrn,
                           int x, int y, int w, int h, int skipleft,
                           int startline, unsigned int **glyphs, int glyphWidth,
                           int fg, int bg, int rop, unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRenderer3MSBFirst(ScrnInfoPtr pScrn,
                            int x, int y, int w, int h, int skipleft,
                            int startline, unsigned int **glyphs,
                            int glyphWidth, int fg, int bg, int rop,
                            unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererLSBFirstFixedBase(ScrnInfoPtr pScrn,
                                    int x, int y, int w, int h, int skipleft,
                                    int startline, unsigned int **glyphs,
                                    int glyphWidth, int fg, int bg, int rop,
                                    unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRenderer3LSBFirstFixedBase(ScrnInfoPtr pScrn,
                                     int x, int y, int w, int h, int skipleft,
                                     int startline, unsigned int **glyphs,
                                     int glyphWidth, int fg, int bg, int rop,
                                     unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererLSBFirst(ScrnInfoPtr pScrn,
                           int x, int y, int w, int h, int skipleft,
                           int startline, unsigned int **glyphs, int glyphWidth,
                           int fg, int bg, int rop, unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRenderer3LSBFirst(ScrnInfoPtr pScrn,
                            int x, int y, int w, int h, int skipleft,
                            int startline, unsigned int **glyphs,
                            int glyphWidth, int fg, int bg, int rop,
                            unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererScanlineMSBFirst(ScrnInfoPtr pScrn,
                                   int x, int y, int w, int h, int skipleft,
                                   int startline, unsigned int **glyphs,
                                   int glyphWidth, int fg, int bg, int rop,
                                   unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererScanline3MSBFirst(ScrnInfoPtr pScrn,
                                    int x, int y, int w, int h, int skipleft,
                                    int startline, unsigned int **glyphs,
                                    int glyphWidth, int fg, int bg, int rop,
                                    unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererScanlineLSBFirst(ScrnInfoPtr pScrn,
                                   int x, int y, int w, int h, int skipleft,
                                   int startline, unsigned int **glyphs,
                                   int glyphWidth, int fg, int bg, int rop,
                                   unsigned planemask);

extern _X_EXPORT void

XAATEGlyphRendererScanline3LSBFirst(ScrnInfoPtr pScrn,
                                    int x, int y, int w, int h, int skipleft,
                                    int startline, unsigned int **glyphs,
                                    int glyphWidth, int fg, int bg, int rop,
                                    unsigned planemask);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncMSBFirstFixedBase[32]) (CARD32
                                                                       *base,
                                                                       unsigned
                                                                       int
                                                                       **glyphp,
                                                                       int line,
                                                                       int
                                                                       nglyph,
                                                                       int
                                                                       width);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncMSBFirst[32]) (CARD32 *base,
                                                              unsigned int
                                                              **glyphp,
                                                              int line,
                                                              int nglyph,
                                                              int width);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncLSBFirstFixedBase[32]) (CARD32
                                                                       *base,
                                                                       unsigned
                                                                       int
                                                                       **glyphp,
                                                                       int line,
                                                                       int
                                                                       nglyph,
                                                                       int
                                                                       width);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncLSBFirst[32]) (CARD32 *base,
                                                              unsigned int
                                                              **glyphp,
                                                              int line,
                                                              int nglyph,
                                                              int width);

extern _X_EXPORT GlyphScanlineFuncPtr
    *XAAGetGlyphScanlineFuncMSBFirstFixedBase(void);
extern _X_EXPORT GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncMSBFirst(void);
extern _X_EXPORT GlyphScanlineFuncPtr
    *XAAGetGlyphScanlineFuncLSBFirstFixedBase(void);
extern _X_EXPORT GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncLSBFirst(void);

extern _X_EXPORT void

XAAFillColorExpandRectsLSBFirst(ScrnInfoPtr pScrn,
                                int fg, int bg, int rop,
                                unsigned int planemask,
                                int nBox,
                                BoxPtr pBox,
                                int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRects3LSBFirst(ScrnInfoPtr pScrn,
                                 int fg, int bg, int rop,
                                 unsigned int planemask,
                                 int nBox,
                                 BoxPtr pBox,
                                 int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRectsLSBFirstFixedBase(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int nBox,
                                         BoxPtr pBox,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRects3LSBFirstFixedBase(ScrnInfoPtr pScrn,
                                          int fg, int bg, int rop,
                                          unsigned int planemask,
                                          int nBox,
                                          BoxPtr pBox,
                                          int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRectsMSBFirst(ScrnInfoPtr pScrn,
                                int fg, int bg, int rop,
                                unsigned int planemask,
                                int nBox,
                                BoxPtr pBox,
                                int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRects3MSBFirst(ScrnInfoPtr pScrn,
                                 int fg, int bg, int rop,
                                 unsigned int planemask,
                                 int nBox,
                                 BoxPtr pBox,
                                 int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRectsMSBFirstFixedBase(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int nBox,
                                         BoxPtr pBox,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandRects3MSBFirstFixedBase(ScrnInfoPtr pScrn,
                                          int fg, int bg, int rop,
                                          unsigned int planemask,
                                          int nBox,
                                          BoxPtr pBox,
                                          int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandRectsLSBFirst(ScrnInfoPtr pScrn,
                                        int fg, int bg, int rop,
                                        unsigned int planemask,
                                        int nBox,
                                        BoxPtr pBox,
                                        int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandRects3LSBFirst(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int nBox,
                                         BoxPtr pBox,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandRectsMSBFirst(ScrnInfoPtr pScrn,
                                        int fg, int bg, int rop,
                                        unsigned int planemask,
                                        int nBox,
                                        BoxPtr pBox,
                                        int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandRects3MSBFirst(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int nBox,
                                         BoxPtr pBox,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpansLSBFirst(ScrnInfoPtr pScrn,
                                int fg, int bg, int rop,
                                unsigned int planemask,
                                int n,
                                DDXPointPtr ppt,
                                int *pwidth,
                                int fSorted,
                                int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpans3LSBFirst(ScrnInfoPtr pScrn,
                                 int fg, int bg, int rop,
                                 unsigned int planemask,
                                 int n,
                                 DDXPointPtr ppt,
                                 int *pwidth,
                                 int fSorted,
                                 int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpansLSBFirstFixedBase(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int n,
                                         DDXPointPtr ppt,
                                         int *pwidth,
                                         int fSorted,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpans3LSBFirstFixedBase(ScrnInfoPtr pScrn,
                                          int fg, int bg, int rop,
                                          unsigned int planemask,
                                          int n,
                                          DDXPointPtr ppt,
                                          int *pwidth,
                                          int fSorted,
                                          int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpansMSBFirst(ScrnInfoPtr pScrn,
                                int fg, int bg, int rop,
                                unsigned int planemask,
                                int n,
                                DDXPointPtr ppt,
                                int *pwidth,
                                int fSorted,
                                int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpans3MSBFirst(ScrnInfoPtr pScrn,
                                 int fg, int bg, int rop,
                                 unsigned int planemask,
                                 int n,
                                 DDXPointPtr ppt,
                                 int *pwidth,
                                 int fSorted,
                                 int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpansMSBFirstFixedBase(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int n,
                                         DDXPointPtr ppt,
                                         int *pwidth,
                                         int fSorted,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillColorExpandSpans3MSBFirstFixedBase(ScrnInfoPtr pScrn,
                                          int fg, int bg, int rop,
                                          unsigned int planemask,
                                          int n,
                                          DDXPointPtr ppt,
                                          int *pwidth,
                                          int fSorted,
                                          int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandSpansLSBFirst(ScrnInfoPtr pScrn,
                                        int fg, int bg, int rop,
                                        unsigned int planemask,
                                        int n,
                                        DDXPointPtr ppt,
                                        int *pwidth,
                                        int fSorted,
                                        int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandSpans3LSBFirst(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int n,
                                         DDXPointPtr ppt,
                                         int *pwidth,
                                         int fSorted,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAPutImage(DrawablePtr pDraw,
            GCPtr pGC,
            int depth,
            int x, int y, int w, int h, int leftPad, int format, char *pImage);

extern _X_EXPORT void

XAAFillScanlineColorExpandSpansMSBFirst(ScrnInfoPtr pScrn,
                                        int fg, int bg, int rop,
                                        unsigned int planemask,
                                        int n,
                                        DDXPointPtr ppt,
                                        int *pwidth,
                                        int fSorted,
                                        int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillScanlineColorExpandSpans3MSBFirst(ScrnInfoPtr pScrn,
                                         int fg, int bg, int rop,
                                         unsigned int planemask,
                                         int n,
                                         DDXPointPtr ppt,
                                         int *pwidth,
                                         int fSorted,
                                         int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncMSBFirstFixedBase[6]) (CARD32
                                                                        *base,
                                                                        CARD32
                                                                        *src,
                                                                        int
                                                                        offset,
                                                                        int
                                                                        width,
                                                                        int
                                                                        dwords);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncMSBFirst[6]) (CARD32 *base,
                                                               CARD32 *src,
                                                               int offset,
                                                               int width,
                                                               int dwords);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncLSBFirstFixedBase[6]) (CARD32
                                                                        *base,
                                                                        CARD32
                                                                        *src,
                                                                        int
                                                                        offset,
                                                                        int
                                                                        width,
                                                                        int
                                                                        dwords);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncLSBFirst[6]) (CARD32 *base,
                                                               CARD32 *src,
                                                               int offset,
                                                               int width,
                                                               int dwords);

extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFuncMSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFuncMSBFirst(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFuncLSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFuncLSBFirst(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFunc3MSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFunc3MSBFirst(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFunc3LSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr
    *XAAGetStippleScanlineFunc3LSBFirst(void);

extern _X_EXPORT int

XAAPolyText8TEColorExpansion(DrawablePtr pDraw,
                             GCPtr pGC, int x, int y, int count, char *chars);

extern _X_EXPORT int

XAAPolyText16TEColorExpansion(DrawablePtr pDraw,
                              GCPtr pGC,
                              int x, int y, int count, unsigned short *chars);

extern _X_EXPORT void

XAAImageText8TEColorExpansion(DrawablePtr pDraw,
                              GCPtr pGC, int x, int y, int count, char *chars);

extern _X_EXPORT void

XAAImageText16TEColorExpansion(DrawablePtr pDraw,
                               GCPtr pGC,
                               int x, int y, int count, unsigned short *chars);

extern _X_EXPORT void

XAAImageGlyphBltTEColorExpansion(DrawablePtr pDrawable,
                                 GCPtr pGC,
                                 int xInit, int yInit,
                                 unsigned int nglyph,
                                 CharInfoPtr * ppci, pointer pglyphBase);

extern _X_EXPORT void

XAAPolyGlyphBltTEColorExpansion(DrawablePtr pDrawable,
                                GCPtr pGC,
                                int xInit, int yInit,
                                unsigned int nglyph,
                                CharInfoPtr * ppci, pointer pglyphBase);

extern _X_EXPORT int

XAAPolyText8NonTEColorExpansion(DrawablePtr pDraw,
                                GCPtr pGC,
                                int x, int y, int count, char *chars);

extern _X_EXPORT int

XAAPolyText16NonTEColorExpansion(DrawablePtr pDraw,
                                 GCPtr pGC,
                                 int x, int y,
                                 int count, unsigned short *chars);

extern _X_EXPORT void

XAAImageText8NonTEColorExpansion(DrawablePtr pDraw,
                                 GCPtr pGC,
                                 int x, int y, int count, char *chars);

extern _X_EXPORT void

XAAImageText16NonTEColorExpansion(DrawablePtr pDraw,
                                  GCPtr pGC,
                                  int x, int y,
                                  int count, unsigned short *chars);

extern _X_EXPORT void

XAAImageGlyphBltNonTEColorExpansion(DrawablePtr pDrawable,
                                    GCPtr pGC,
                                    int xInit, int yInit,
                                    unsigned int nglyph,
                                    CharInfoPtr * ppci, pointer pglyphBase);

extern _X_EXPORT void

XAAPolyGlyphBltNonTEColorExpansion(DrawablePtr pDrawable,
                                   GCPtr pGC,
                                   int xInit, int yInit,
                                   unsigned int nglyph,
                                   CharInfoPtr * ppci, pointer pglyphBase);

extern _X_EXPORT void XAANonTEGlyphRenderer(ScrnInfoPtr pScrn,
                                            int x, int y, int n,
                                            NonTEGlyphPtr glyphs,
                                            BoxPtr pbox,
                                            int fg, int rop,
                                            unsigned int planemask);

extern _X_EXPORT void

XAAFillSolidSpans(ScrnInfoPtr pScrn,
                  int fg, int rop,
                  unsigned int planemask,
                  int n, DDXPointPtr ppt, int *pwidth, int fSorted);

extern _X_EXPORT void

XAAFillMono8x8PatternSpans(ScrnInfoPtr pScrn,
                           int fg, int bg, int rop,
                           unsigned int planemask,
                           int n,
                           DDXPointPtr ppt,
                           int *pwidth, int fSorted,
                           int patx, int paty, int xorg, int yorg);

extern _X_EXPORT void

XAAFillMono8x8PatternSpansScreenOrigin(ScrnInfoPtr pScrn,
                                       int fg, int bg, int rop,
                                       unsigned int planemask,
                                       int n,
                                       DDXPointPtr ppt,
                                       int *pwidth, int fSorted,
                                       int patx, int paty, int xorg, int yorg);

extern _X_EXPORT void

XAAFillColor8x8PatternSpansScreenOrigin(ScrnInfoPtr pScrn,
                                        int rop,
                                        unsigned int planemask,
                                        int n,
                                        DDXPointPtr ppt,
                                        int *pwidth, int fSorted,
                                        XAACacheInfoPtr,
                                        int xorigin, int yorigin);

extern _X_EXPORT void

XAAFillColor8x8PatternSpans(ScrnInfoPtr pScrn,
                            int rop,
                            unsigned int planemask,
                            int n,
                            DDXPointPtr ppt,
                            int *pwidth, int fSorted,
                            XAACacheInfoPtr, int xorigin, int yorigin);

extern _X_EXPORT void

XAAFillCacheBltSpans(ScrnInfoPtr pScrn,
                     int rop,
                     unsigned int planemask,
                     int n,
                     DDXPointPtr points,
                     int *widths,
                     int fSorted, XAACacheInfoPtr pCache, int xorg, int yorg);

extern _X_EXPORT void

XAAFillCacheExpandSpans(ScrnInfoPtr pScrn,
                        int fg, int bg, int rop,
                        unsigned int planemask,
                        int n,
                        DDXPointPtr ppt,
                        int *pwidth,
                        int fSorted, int xorg, int yorg, PixmapPtr pPix);

extern _X_EXPORT void

XAAFillSpans(DrawablePtr pDrawable,
             GC * pGC,
             int nInit, DDXPointPtr pptInit, int *pwidth, int fSorted);

extern _X_EXPORT void
 XAAInitPixmapCache(ScreenPtr pScreen, RegionPtr areas, pointer data);

extern _X_EXPORT void

XAAWriteBitmapToCache(ScrnInfoPtr pScrn,
                      int x, int y, int w, int h,
                      unsigned char *src, int srcwidth, int fg, int bg);

extern _X_EXPORT void

XAAWriteBitmapToCacheLinear(ScrnInfoPtr pScrn,
                            int x, int y, int w, int h,
                            unsigned char *src, int srcwidth, int fg, int bg);

extern _X_EXPORT void

XAAWritePixmapToCache(ScrnInfoPtr pScrn,
                      int x, int y, int w, int h,
                      unsigned char *src, int srcwidth, int bpp, int depth);

extern _X_EXPORT void

XAAWritePixmapToCacheLinear(ScrnInfoPtr pScrn,
                            int x, int y, int w, int h,
                            unsigned char *src,
                            int srcwidth, int bpp, int depth);

extern _X_EXPORT void
 XAASolidHorVertLineAsRects(ScrnInfoPtr pScrn, int x, int y, int len, int dir);

extern _X_EXPORT void

XAASolidHorVertLineAsTwoPoint(ScrnInfoPtr pScrn,
                              int x, int y, int len, int dir);

extern _X_EXPORT void

XAASolidHorVertLineAsBresenham(ScrnInfoPtr pScrn,
                               int x, int y, int len, int dir);

extern _X_EXPORT void

XAAPolyRectangleThinSolid(DrawablePtr pDrawable,
                          GCPtr pGC, int nRectsInit, xRectangle *pRectsInit);

extern _X_EXPORT void

XAAPolylinesWideSolid(DrawablePtr pDrawable,
                      GCPtr pGC, int mode, int npt, DDXPointPtr pPts);

extern _X_EXPORT void

XAAFillPolygonSolid(DrawablePtr pDrawable,
                    GCPtr pGC,
                    int shape, int mode, int count, DDXPointPtr ptsIn);

extern _X_EXPORT void

XAAFillPolygonStippled(DrawablePtr pDrawable,
                       GCPtr pGC,
                       int shape, int mode, int count, DDXPointPtr ptsIn);

extern _X_EXPORT void

XAAFillPolygonTiled(DrawablePtr pDrawable,
                    GCPtr pGC,
                    int shape, int mode, int count, DDXPointPtr ptsIn);

extern _X_EXPORT int

XAAIsEasyPolygon(DDXPointPtr ptsIn,
                 int count,
                 BoxPtr extents,
                 int origin,
                 DDXPointPtr * topPoint, int *topY, int *bottomY, int shape);

extern _X_EXPORT void

XAAFillPolygonHelper(ScrnInfoPtr pScrn,
                     DDXPointPtr ptsIn,
                     int count,
                     DDXPointPtr topPoint,
                     int y,
                     int maxy,
                     int origin,
                     RectFuncPtr RectFunc,
                     TrapFuncPtr TrapFunc,
                     int xorg, int yorg, XAACacheInfoPtr pCache);

extern _X_EXPORT void
 XAAPolySegment(DrawablePtr pDrawable, GCPtr pGC, int nseg, xSegment * pSeg);

extern _X_EXPORT void

XAAPolyLines(DrawablePtr pDrawable,
             GCPtr pGC, int mode, int npt, DDXPointPtr pptInit);

extern _X_EXPORT void

XAAPolySegmentDashed(DrawablePtr pDrawable,
                     GCPtr pGC, int nseg, xSegment * pSeg);

extern _X_EXPORT void

XAAPolyLinesDashed(DrawablePtr pDrawable,
                   GCPtr pGC, int mode, int npt, DDXPointPtr pptInit);

extern _X_EXPORT void
 XAAWriteMono8x8PatternToCache(ScrnInfoPtr pScrn, XAACacheInfoPtr pCache);

extern _X_EXPORT void

XAAWriteColor8x8PatternToCache(ScrnInfoPtr pScrn,
                               PixmapPtr pPix, XAACacheInfoPtr pCache);

extern _X_EXPORT void

XAARotateMonoPattern(int *pat0, int *pat1,
                     int xoffset, int yoffset, Bool msbfirst);

extern _X_EXPORT void XAAComputeDash(GCPtr pGC);

extern _X_EXPORT void XAAMoveDWORDS_FixedBase(register CARD32 *dest,
                                              register CARD32 *src,
                                              register int dwords);

extern _X_EXPORT void XAAMoveDWORDS_FixedSrc(register CARD32 *dest,
                                             register CARD32 *src,
                                             register int dwords);

extern _X_EXPORT void XAAMoveDWORDS(register CARD32 *dest,
                                    register CARD32 *src, register int dwords);

extern _X_EXPORT int

XAAGetRectClipBoxes(GCPtr pGC,
                    BoxPtr pboxClippedBase,
                    int nrectFill, xRectangle *prectInit);

extern _X_EXPORT void
 XAASetupOverlay8_32Planar(ScreenPtr);

extern _X_EXPORT void
 XAAPolyFillArcSolid(DrawablePtr pDraw, GCPtr pGC, int narcs, xArc * parcs);

extern _X_EXPORT XAACacheInfoPtr XAACacheTile(ScrnInfoPtr Scrn, PixmapPtr pPix);

extern _X_EXPORT XAACacheInfoPtr
XAACacheMonoStipple(ScrnInfoPtr Scrn, PixmapPtr pPix);

extern _X_EXPORT XAACacheInfoPtr
XAACachePlanarMonoStipple(ScrnInfoPtr Scrn, PixmapPtr pPix);

typedef XAACacheInfoPtr(*XAACachePlanarMonoStippleProc) (ScrnInfoPtr,
                                                         PixmapPtr);
extern _X_EXPORT XAACachePlanarMonoStippleProc
XAAGetCachePlanarMonoStipple(void);

extern _X_EXPORT XAACacheInfoPtr
XAACacheStipple(ScrnInfoPtr Scrn, PixmapPtr pPix, int fg, int bg);

extern _X_EXPORT XAACacheInfoPtr
XAACacheMono8x8Pattern(ScrnInfoPtr Scrn, int pat0, int pat1);

extern _X_EXPORT XAACacheInfoPtr
XAACacheColor8x8Pattern(ScrnInfoPtr Scrn, PixmapPtr pPix, int fg, int bg);

extern _X_EXPORT void
 XAATileCache(ScrnInfoPtr pScrn, XAACacheInfoPtr pCache, int w, int h);

extern _X_EXPORT void XAAClosePixmapCache(ScreenPtr pScreen);
void XAAInvalidatePixmapCache(ScreenPtr pScreen);

extern _X_EXPORT Bool XAACheckStippleReducibility(PixmapPtr pPixmap);
extern _X_EXPORT Bool XAACheckTileReducibility(PixmapPtr pPixmap,
                                               Bool checkMono);

extern _X_EXPORT int XAAStippledFillChooser(GCPtr pGC);
extern _X_EXPORT int XAAOpaqueStippledFillChooser(GCPtr pGC);
extern _X_EXPORT int XAATiledFillChooser(GCPtr pGC);

extern _X_EXPORT void XAAMoveInOffscreenPixmaps(ScreenPtr pScreen);
extern _X_EXPORT void XAAMoveOutOffscreenPixmaps(ScreenPtr pScreen);
extern _X_EXPORT void XAARemoveAreaCallback(FBAreaPtr area);
extern _X_EXPORT void XAAMoveOutOffscreenPixmap(PixmapPtr pPix);
extern _X_EXPORT Bool XAAInitStateWrap(ScreenPtr pScreen,
                                       XAAInfoRecPtr infoRec);

extern _X_EXPORT void

XAAComposite(CARD8 op,
             PicturePtr pSrc,
             PicturePtr pMask,
             PicturePtr pDst,
             INT16 xSrc,
             INT16 ySrc,
             INT16 xMask,
             INT16 yMask, INT16 xDst, INT16 yDst, CARD16 width, CARD16 height);

extern _X_EXPORT Bool

XAADoComposite(CARD8 op,
               PicturePtr pSrc,
               PicturePtr pMask,
               PicturePtr pDst,
               INT16 xSrc,
               INT16 ySrc,
               INT16 xMask,
               INT16 yMask,
               INT16 xDst, INT16 yDst, CARD16 width, CARD16 height);

extern _X_EXPORT void

XAAGlyphs(CARD8 op,
          PicturePtr pSrc,
          PicturePtr pDst,
          PictFormatPtr maskFormat,
          INT16 xSrc,
          INT16 ySrc, int nlist, GlyphListPtr list, GlyphPtr * glyphs);

extern _X_EXPORT Bool

XAADoGlyphs(CARD8 op,
            PicturePtr pSrc,
            PicturePtr pDst,
            PictFormatPtr maskFormat,
            INT16 xSrc,
            INT16 ySrc, int nlist, GlyphListPtr list, GlyphPtr * glyphs);

/* helpers */
extern _X_EXPORT void
 XAA_888_plus_PICT_a8_to_8888(CARD32 color, CARD8 *alphaPtr,    /* in bytes */
                              int alphaPitch, CARD32 *dstPtr, int dstPitch,     /* in dwords */
                              int width, int height);

extern _X_EXPORT Bool

XAAGetRGBAFromPixel(CARD32 pixel,
                    CARD16 *red,
                    CARD16 *green, CARD16 *blue, CARD16 *alpha, CARD32 format);

extern _X_EXPORT Bool

XAAGetPixelFromRGBA(CARD32 *pixel,
                    CARD16 red,
                    CARD16 green, CARD16 blue, CARD16 alpha, CARD32 format);

/* XXX should be static */
extern _X_EXPORT GCOps XAAFallbackOps;
extern _X_EXPORT GCOps *XAAGetFallbackOps(void);
extern _X_EXPORT GCFuncs XAAGCFuncs;
extern _X_EXPORT DevPrivateKey XAAGetScreenKey(void);
extern _X_EXPORT DevPrivateKey XAAGetGCKey(void);
extern _X_EXPORT DevPrivateKey XAAGetPixmapKey(void);

extern _X_EXPORT unsigned int XAAShiftMasks[32];

extern _X_EXPORT unsigned int byte_expand3[256], byte_reversed_expand3[256];

extern _X_EXPORT CARD32 XAAReverseBitOrder(CARD32 data);

#define GET_XAASCREENPTR_FROM_SCREEN(pScreen)\
    dixLookupPrivate(&(pScreen)->devPrivates, XAAGetScreenKey())

#define GET_XAASCREENPTR_FROM_GC(pGC)\
    dixLookupPrivate(&(pGC)->pScreen->devPrivates, XAAGetScreenKey())

#define GET_XAASCREENPTR_FROM_DRAWABLE(pDraw)\
    dixLookupPrivate(&(pDraw)->pScreen->devPrivates, XAAGetScreenKey())

#define GET_XAAINFORECPTR_FROM_SCREEN(pScreen)\
((XAAScreenPtr)dixLookupPrivate(&(pScreen)->devPrivates, XAAGetScreenKey()))->AccelInfoRec

#define GET_XAAINFORECPTR_FROM_GC(pGC)\
((XAAScreenPtr)dixLookupPrivate(&(pGC)->pScreen->devPrivates, XAAGetScreenKey()))->AccelInfoRec

#define GET_XAAINFORECPTR_FROM_DRAWABLE(pDraw)\
((XAAScreenPtr)dixLookupPrivate(&(pDraw)->pScreen->devPrivates, XAAGetScreenKey()))->AccelInfoRec

#define GET_XAAINFORECPTR_FROM_SCRNINFOPTR(pScrn)\
((XAAScreenPtr)dixLookupPrivate(&(pScrn)->pScreen->devPrivates, XAAGetScreenKey()))->AccelInfoRec

#define XAA_GET_PIXMAP_PRIVATE(pix)\
    (XAAPixmapPtr)dixLookupPrivate(&(pix)->devPrivates, XAAGetPixmapKey())

#define CHECK_RGB_EQUAL(c) (!((((c) >> 8) ^ (c)) & 0xffff))

#define CHECK_FG(pGC, flags) \
	(!(flags & RGB_EQUAL) || CHECK_RGB_EQUAL(pGC->fgPixel))

#define CHECK_BG(pGC, flags) \
	(!(flags & RGB_EQUAL) || CHECK_RGB_EQUAL(pGC->bgPixel))

#define CHECK_ROP(pGC, flags) \
	(!(flags & GXCOPY_ONLY) || (pGC->alu == GXcopy))

#define CHECK_ROPSRC(pGC, flags) \
	(!(flags & ROP_NEEDS_SOURCE) || ((pGC->alu != GXclear) && \
	(pGC->alu != GXnoop) && (pGC->alu != GXinvert) && \
	(pGC->alu != GXset)))

#define CHECK_PLANEMASK(pGC, flags) \
	(!(flags & NO_PLANEMASK) || \
	((pGC->planemask & infoRec->FullPlanemasks[pGC->depth - 1]) == \
          infoRec->FullPlanemasks[pGC->depth - 1]))

#define CHECK_COLORS(pGC, flags) \
	(!(flags & RGB_EQUAL) || \
	(CHECK_RGB_EQUAL(pGC->fgPixel) && CHECK_RGB_EQUAL(pGC->bgPixel)))

#define CHECK_NO_GXCOPY(pGC, flags) \
	((pGC->alu != GXcopy) || !(flags & NO_GXCOPY) || \
	((pGC->planemask & infoRec->FullPlanemask) != infoRec->FullPlanemask))

#define IS_OFFSCREEN_PIXMAP(pPix)\
        ((XAA_GET_PIXMAP_PRIVATE((PixmapPtr)(pPix)))->offscreenArea)

#define PIXMAP_IS_SHARED(pPix)\
        ((XAA_GET_PIXMAP_PRIVATE((PixmapPtr)(pPix)))->flags & SHARED_PIXMAP)

#define OFFSCREEN_PIXMAP_LOCKED(pPix)\
        ((XAA_GET_PIXMAP_PRIVATE((PixmapPtr)(pPix)))->flags & LOCKED_PIXMAP)

#define XAA_DEPTH_BUG(pGC) \
        ((pGC->depth == 32) && (pGC->bgPixel == 0xffffffff))

#define DELIST_OFFSCREEN_PIXMAP(pPix) { \
	PixmapLinkPtr _pLink, _prev; \
	_pLink = infoRec->OffscreenPixmaps; \
	_prev = NULL; \
	while(_pLink) { \
	    if(_pLink->pPix == pPix) { \
		if(_prev) _prev->next = _pLink->next; \
		else infoRec->OffscreenPixmaps = _pLink->next; \
		free(_pLink); \
		break; \
	    } \
	    _prev = _pLink; \
	    _pLink = _pLink->next; \
        }}

#define SWAP_BITS_IN_BYTES(v) \
 (((0x01010101 & (v)) << 7) | ((0x02020202 & (v)) << 5) | \
  ((0x04040404 & (v)) << 3) | ((0x08080808 & (v)) << 1) | \
  ((0x10101010 & (v)) >> 1) | ((0x20202020 & (v)) >> 3) | \
  ((0x40404040 & (v)) >> 5) | ((0x80808080 & (v)) >> 7))

/*
 * Moved XAAPixmapCachePrivate here from xaaPCache.c, since driver
 * replacements for CacheMonoStipple need access to it
 */

typedef struct {
    int Num512x512;
    int Current512;
    XAACacheInfoPtr Info512;
    int Num256x256;
    int Current256;
    XAACacheInfoPtr Info256;
    int Num128x128;
    int Current128;
    XAACacheInfoPtr Info128;
    int NumMono;
    int CurrentMono;
    XAACacheInfoPtr InfoMono;
    int NumColor;
    int CurrentColor;
    XAACacheInfoPtr InfoColor;
    int NumPartial;
    int CurrentPartial;
    XAACacheInfoPtr InfoPartial;
    DDXPointRec MonoOffsets[64];
    DDXPointRec ColorOffsets[64];
} XAAPixmapCachePrivate, *XAAPixmapCachePrivatePtr;

#endif                          /* _XAALOCAL_H */
@


1.6
log
@Update to xserver 1.12.2. tested by naddy@@, krw@@, mpi@@.
@
text
@@


1.5
log
@Upgrade to xorg-server 1.9.2.
Tested by ajacoutot@@, krw@@, shadchin@@ and jasper@@ on various configurations
including multihead with both zaphod and xrandr.
@
text
@d5 4
a10 1

d29 2
d32 1
a32 5
typedef CARD32 * (*GlyphScanlineFuncPtr)(
    CARD32 *base, unsigned int **glyphp, int line, int nglyph, int width
);

typedef CARD32 *(*StippleScanlineProcPtr)(CARD32*, CARD32*, int, int, int); 
d35 1
a35 1
					  XAACacheInfoPtr);
d37 1
a37 4
					  int, int, int, int, int, int,
					  XAACacheInfoPtr);


d40 16
a55 16
   CreateGCProcPtr 		CreateGC;
   CloseScreenProcPtr 		CloseScreen;
   GetImageProcPtr 		GetImage;
   GetSpansProcPtr 		GetSpans;
   CopyWindowProcPtr 		CopyWindow;
   WindowExposuresProcPtr	WindowExposures;
   CreatePixmapProcPtr 		CreatePixmap;
   DestroyPixmapProcPtr 	DestroyPixmap;
   ChangeWindowAttributesProcPtr ChangeWindowAttributes;
   XAAInfoRecPtr 		AccelInfoRec;
   Bool                		(*EnterVT)(int, int);
   void                		(*LeaveVT)(int, int);
   int				(*SetDGAMode)(int, int, DGADevicePtr);
   void				(*EnableDisableFBAccess)(int, Bool);
    CompositeProcPtr            Composite;
    GlyphsProcPtr               Glyphs;
d62 5
a66 5
    GCOps 	*wrapOps;
    GCFuncs 	*wrapFuncs;
    GCOps 	*XAAOps;
    int		DashLength;
    unsigned char* DashPattern;
d88 1
a88 1
    int bg;    
a92 1

d94 1
a94 3
XAACreateGC(
    GCPtr pGC
);
d97 1
a97 4
XAAInitAccel(
    ScreenPtr pScreen, 
    XAAInfoRecPtr infoRec
);
a99 59
XAABitBlt(
    DrawablePtr pSrcDrawable,
    DrawablePtr pDstDrawable,
    GC *pGC,
    int srcx,
    int srcy,
    int width,
    int height,
    int dstx,
    int dsty,
    void (*doBitBlt)(DrawablePtr, DrawablePtr, GCPtr, RegionPtr, DDXPointPtr),
    unsigned long bitPlane
);

extern _X_EXPORT void
XAAScreenToScreenBitBlt(
    ScrnInfoPtr pScrn,
    int nbox,
    DDXPointPtr pptSrc,
    BoxPtr pbox,
    int xdir, 
    int ydir,
    int alu,
    unsigned int planemask
);

extern _X_EXPORT void
XAADoBitBlt(
    DrawablePtr	    pSrc, 
    DrawablePtr     pDst,
    GC		    *pGC,
    RegionPtr	    prgnDst,
    DDXPointPtr	    pptSrc
);

extern _X_EXPORT void
XAADoImageWrite(
    DrawablePtr	    pSrc, 
    DrawablePtr     pDst,
    GC		    *pGC,
    RegionPtr	    prgnDst,
    DDXPointPtr	    pptSrc
);

extern _X_EXPORT void
XAADoImageRead(
    DrawablePtr     pSrc,
    DrawablePtr     pDst,
    GC              *pGC,
    RegionPtr       prgnDst,
    DDXPointPtr     pptSrc
);

extern _X_EXPORT void
XAACopyWindow(
    WindowPtr pWin,
    DDXPointRec ptOldOrg,
    RegionPtr prgnSrc
);
d101 39
a141 67
XAACopyArea(
    DrawablePtr pSrcDrawable,
    DrawablePtr pDstDrawable,
    GC *pGC,
    int srcx, 
    int srcy,
    int width, 
    int height,
    int dstx, 
    int dsty
);

extern _X_EXPORT void
XAAValidateCopyArea(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);

extern _X_EXPORT void
XAAValidatePutImage(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw 
);

extern _X_EXPORT void
XAAValidateCopyPlane(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);

extern _X_EXPORT void
XAAValidatePushPixels(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);

extern _X_EXPORT void
XAAValidateFillSpans(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);

extern _X_EXPORT void
XAAValidatePolyGlyphBlt(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);

extern _X_EXPORT void
XAAValidateImageGlyphBlt(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);

extern _X_EXPORT void
XAAValidatePolylines(
   GCPtr         pGC,
   unsigned long changes,
   DrawablePtr   pDraw
);
d143 28
a172 481
XAACopyPlaneColorExpansion(
    DrawablePtr		pSrc,
    DrawablePtr		pDst,
    GCPtr		pGC,
    int			srcx, 
    int			srcy,
    int			width, 
    int			height,
    int			dstx, 
    int			dsty,
    unsigned long	bitPlane
);


extern _X_EXPORT void
XAAPushPixelsSolidColorExpansion(
    GCPtr	pGC,
    PixmapPtr	pBitMap,
    DrawablePtr pDrawable,
    int		dx, 
    int		dy, 
    int		xOrg, 
    int		yOrg
);

extern _X_EXPORT void
XAAWriteBitmapColorExpandMSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpand3MSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpandMSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpand3MSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpandLSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpand3LSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpandLSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapColorExpand3LSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);


extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpandMSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpand3MSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpandMSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpand3MSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpandLSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpand3LSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpandLSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWriteBitmapScanlineColorExpand3LSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h,
    unsigned char *src,
    int srcwidth,
    int skipleft,
    int fg, int bg,
    int rop,
    unsigned int planemask 
);

extern _X_EXPORT void
XAAWritePixmap (
   ScrnInfoPtr pScrn,
   int x, int y, int w, int h,
   unsigned char *src,
   int srcwidth,
   int rop,
   unsigned int planemask,
   int transparency_color,
   int bpp, int depth
);

extern _X_EXPORT void
XAAWritePixmapScanline (
   ScrnInfoPtr pScrn,
   int x, int y, int w, int h,
   unsigned char *src,
   int srcwidth,
   int rop,
   unsigned int planemask,
   int transparency_color,
   int bpp, int depth
);

typedef void (*ClipAndRenderRectsFunc)(GCPtr, int, BoxPtr, int, int); 


extern _X_EXPORT void
XAAClipAndRenderRects(
   GCPtr pGC, 
   ClipAndRenderRectsFunc func, 
   int nrectFill, 
   xRectangle *prectInit, 
   int xorg, int yorg
);


typedef void (*ClipAndRenderSpansFunc)(GCPtr, int, DDXPointPtr, int*, 
							int, int, int);

extern _X_EXPORT void
XAAClipAndRenderSpans(
    GCPtr pGC, 
    DDXPointPtr	ppt,
    int		*pwidth,
    int		nspans,
    int		fSorted,
    ClipAndRenderSpansFunc func,
    int 	xorg,
    int		yorg
);


extern _X_EXPORT void
XAAFillSolidRects(
    ScrnInfoPtr pScrn,
    int fg, int rop,
    unsigned int planemask,
    int		nBox,
    BoxPtr	pBox 
);

extern _X_EXPORT void
XAAFillMono8x8PatternRects(
    ScrnInfoPtr pScrn,
    int	fg, int bg, int rop,
    unsigned int planemask,
    int	nBox,
    BoxPtr pBox,
    int pat0, int pat1,
    int xorg, int yorg
);

extern _X_EXPORT void
XAAFillMono8x8PatternRectsScreenOrigin(
    ScrnInfoPtr pScrn,
    int	fg, int bg, int rop,
    unsigned int planemask,
    int	nBox,
    BoxPtr pBox,
    int pat0, int pat1,
    int xorg, int yorg
);


extern _X_EXPORT void
XAAFillColor8x8PatternRectsScreenOrigin(
   ScrnInfoPtr pScrn,
   int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorigin, int yorigin,
   XAACacheInfoPtr pCache
);

extern _X_EXPORT void
XAAFillColor8x8PatternRects(
   ScrnInfoPtr pScrn,
   int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorigin, int yorigin,
   XAACacheInfoPtr pCache
);

extern _X_EXPORT void
XAAFillCacheBltRects(
   ScrnInfoPtr pScrn,
   int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   XAACacheInfoPtr pCache
);

extern _X_EXPORT void
XAAFillCacheExpandRects(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillImageWriteRects(
    ScrnInfoPtr pScrn,
    int rop,
    unsigned int planemask,
    int nBox,
    BoxPtr pBox,
    int xorg, int yorg,
    PixmapPtr pPix
);

extern _X_EXPORT void
XAAPolyFillRect(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	nrectFill,
    xRectangle *prectInit
);


extern _X_EXPORT void
XAATEGlyphRendererMSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRenderer3MSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRendererMSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRenderer3MSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRendererLSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);


extern _X_EXPORT void
XAATEGlyphRenderer3LSBFirstFixedBase (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRendererLSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRenderer3LSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);


extern _X_EXPORT void
XAATEGlyphRendererScanlineMSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRendererScanline3MSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRendererScanlineLSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);

extern _X_EXPORT void
XAATEGlyphRendererScanline3LSBFirst (
    ScrnInfoPtr pScrn,
    int x, int y, int w, int h, int skipleft, int startline, 
    unsigned int **glyphs, int glyphWidth,
    int fg, int bg, int rop, unsigned planemask
);


extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncMSBFirstFixedBase[32])(
   CARD32 *base, unsigned int **glyphp, int line, int nglyph, int width
);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncMSBFirst[32])(
   CARD32 *base, unsigned int **glyphp, int line, int nglyph, int width
);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncLSBFirstFixedBase[32])(
   CARD32 *base, unsigned int **glyphp, int line, int nglyph, int width
);

extern _X_EXPORT CARD32 *(*XAAGlyphScanlineFuncLSBFirst[32])(
   CARD32 *base, unsigned int **glyphp, int line, int nglyph, int width
);
d174 423
a596 1
extern _X_EXPORT GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncMSBFirstFixedBase(void);
d598 2
a599 1
extern _X_EXPORT GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncLSBFirstFixedBase(void);
d603 296
a898 326
XAAFillColorExpandRectsLSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRects3LSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRectsLSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRects3LSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRectsMSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRects3MSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRectsMSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandRects3MSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandRectsLSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandRects3LSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandRectsMSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandRects3MSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int nBox,
   BoxPtr pBox,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpansLSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpans3LSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpansLSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpans3LSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpansMSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpans3MSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpansMSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillColorExpandSpans3MSBFirstFixedBase(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandSpansLSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandSpans3LSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAPutImage(
    DrawablePtr pDraw,
    GCPtr       pGC,
    int         depth, 
    int 	x, 
    int		y, 
    int		w, 
    int		h,
    int         leftPad,
    int         format,
    char        *pImage
);

extern _X_EXPORT void
XAAFillScanlineColorExpandSpansMSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillScanlineColorExpandSpans3MSBFirst(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);


extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncMSBFirstFixedBase[6])(
   CARD32* base, CARD32* src, int offset, int width, int dwords
);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncMSBFirst[6])(
   CARD32* base, CARD32* src, int offset, int width, int dwords
);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncLSBFirstFixedBase[6])(
   CARD32* base, CARD32* src, int offset, int width, int dwords
);

extern _X_EXPORT CARD32 *(*XAAStippleScanlineFuncLSBFirst[6])(
   CARD32* base, CARD32* src, int offset, int width, int dwords
);

extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFuncMSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFuncMSBFirst(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFuncLSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFuncLSBFirst(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFunc3MSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFunc3MSBFirst(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFunc3LSBFirstFixedBase(void);
extern _X_EXPORT StippleScanlineProcPtr *XAAGetStippleScanlineFunc3LSBFirst(void);
d901 3
a903 7
XAAPolyText8TEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    char *chars
);
a905 45
XAAPolyText16TEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    unsigned short *chars
);

extern _X_EXPORT void
XAAImageText8TEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    char *chars
);

extern _X_EXPORT void
XAAImageText16TEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    unsigned short *chars
);

extern _X_EXPORT void
XAAImageGlyphBltTEColorExpansion(
    DrawablePtr pDrawable,
    GCPtr pGC,
    int xInit, int yInit,
    unsigned int nglyph,
    CharInfoPtr *ppci,
    pointer pglyphBase
);

extern _X_EXPORT void
XAAPolyGlyphBltTEColorExpansion(
    DrawablePtr pDrawable,
    GCPtr pGC,
    int xInit, int yInit,
    unsigned int nglyph,
    CharInfoPtr *ppci,
    pointer pglyphBase
);
d907 30
d939 4
a942 7
XAAPolyText8NonTEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    char *chars
);
a944 261
XAAPolyText16NonTEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    unsigned short *chars
);

extern _X_EXPORT void
XAAImageText8NonTEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    char *chars
);

extern _X_EXPORT void
XAAImageText16NonTEColorExpansion(
    DrawablePtr pDraw,
    GCPtr pGC,
    int	x, int y,
    int count,
    unsigned short *chars
);

extern _X_EXPORT void
XAAImageGlyphBltNonTEColorExpansion(
    DrawablePtr pDrawable,
    GCPtr pGC,
    int xInit, int yInit,
    unsigned int nglyph,
    CharInfoPtr *ppci,
    pointer pglyphBase
);

extern _X_EXPORT void
XAAPolyGlyphBltNonTEColorExpansion(
    DrawablePtr pDrawable,
    GCPtr pGC,
    int xInit, int yInit,
    unsigned int nglyph,
    CharInfoPtr *ppci,
    pointer pglyphBase
);


extern _X_EXPORT void XAANonTEGlyphRenderer(
   ScrnInfoPtr pScrn,
   int x, int y, int n,
   NonTEGlyphPtr glyphs,
   BoxPtr pbox,
   int fg, int rop,
   unsigned int planemask
);

extern _X_EXPORT void
XAAFillSolidSpans(
   ScrnInfoPtr pScrn,
   int fg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth, int fSorted 
);

extern _X_EXPORT void
XAAFillMono8x8PatternSpans(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth, int fSorted,
   int patx, int paty,
   int xorg, int yorg 
);

extern _X_EXPORT void
XAAFillMono8x8PatternSpansScreenOrigin(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth, int fSorted,
   int patx, int paty,
   int xorg, int yorg 
);

extern _X_EXPORT void
XAAFillColor8x8PatternSpansScreenOrigin(
   ScrnInfoPtr pScrn,
   int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth, int fSorted,
   XAACacheInfoPtr,
   int xorigin, int yorigin 
);

extern _X_EXPORT void
XAAFillColor8x8PatternSpans(
   ScrnInfoPtr pScrn,
   int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth, int fSorted,
   XAACacheInfoPtr,
   int xorigin, int yorigin 
);

extern _X_EXPORT void
XAAFillCacheBltSpans(
   ScrnInfoPtr pScrn,
   int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr points,
   int *widths,
   int fSorted,
   XAACacheInfoPtr pCache,
   int xorg, int yorg
);

extern _X_EXPORT void
XAAFillCacheExpandSpans(
   ScrnInfoPtr pScrn,
   int fg, int bg, int rop,
   unsigned int planemask,
   int n,
   DDXPointPtr ppt,
   int *pwidth,
   int fSorted,
   int xorg, int yorg,
   PixmapPtr pPix
);

extern _X_EXPORT void
XAAFillSpans(
    DrawablePtr pDrawable,
    GC		*pGC,
    int		nInit,
    DDXPointPtr pptInit,
    int *pwidth,
    int fSorted 
);


extern _X_EXPORT void
XAAInitPixmapCache(
    ScreenPtr pScreen, 
    RegionPtr areas,
    pointer data
);

extern _X_EXPORT void
XAAWriteBitmapToCache(
   ScrnInfoPtr pScrn,
   int x, int y, int w, int h,
   unsigned char *src,
   int srcwidth,
   int fg, int bg
);
 
extern _X_EXPORT void
XAAWriteBitmapToCacheLinear(
   ScrnInfoPtr pScrn,
   int x, int y, int w, int h,
   unsigned char *src,
   int srcwidth,
   int fg, int bg
);

extern _X_EXPORT void
XAAWritePixmapToCache(
   ScrnInfoPtr pScrn,
   int x, int y, int w, int h,
   unsigned char *src,
   int srcwidth,
   int bpp, int depth
);

extern _X_EXPORT void
XAAWritePixmapToCacheLinear(
   ScrnInfoPtr pScrn,
   int x, int y, int w, int h,
   unsigned char *src,
   int srcwidth,
   int bpp, int depth
);

extern _X_EXPORT void
XAASolidHorVertLineAsRects(
   ScrnInfoPtr pScrn,
   int x, int y, int len, int dir
);

extern _X_EXPORT void
XAASolidHorVertLineAsTwoPoint(
   ScrnInfoPtr pScrn,
   int x, int y, int len, int dir
);

extern _X_EXPORT void
XAASolidHorVertLineAsBresenham(
   ScrnInfoPtr pScrn,
   int x, int y, int len, int dir
);


extern _X_EXPORT void
XAAPolyRectangleThinSolid(
    DrawablePtr  pDrawable,
    GCPtr        pGC,    
    int	         nRectsInit,
    xRectangle  *pRectsInit 
);


extern _X_EXPORT void
XAAPolylinesWideSolid (
   DrawablePtr	pDrawable,
   GCPtr	pGC,
   int		mode,
   int 		npt,
   DDXPointPtr	pPts
);

extern _X_EXPORT void
XAAFillPolygonSolid(
    DrawablePtr	pDrawable,
    GCPtr	pGC,
    int		shape,
    int		mode,
    int		count,
    DDXPointPtr	ptsIn 
);

extern _X_EXPORT void
XAAFillPolygonStippled(
    DrawablePtr	pDrawable,
    GCPtr	pGC,
    int		shape,
    int		mode,
    int		count,
    DDXPointPtr	ptsIn 
);


extern _X_EXPORT void
XAAFillPolygonTiled(
    DrawablePtr	pDrawable,
    GCPtr	pGC,
    int		shape,
    int		mode,
    int		count,
    DDXPointPtr	ptsIn 
);
d946 183
d1131 50
a1180 77
XAAIsEasyPolygon(
   DDXPointPtr ptsIn,
   int count, 
   BoxPtr extents,
   int origin,		
   DDXPointPtr *topPoint, 
   int *topY, int *bottomY,
   int shape
);

extern _X_EXPORT void
XAAFillPolygonHelper(
    ScrnInfoPtr pScrn,
    DDXPointPtr	ptsIn,
    int 	count,
    DDXPointPtr topPoint,
    int 	y,
    int		maxy,
    int		origin,
    RectFuncPtr RectFunc,
    TrapFuncPtr TrapFunc,
    int 	xorg,
    int		yorg,
    XAACacheInfoPtr pCache
);

extern _X_EXPORT void
XAAPolySegment(
    DrawablePtr	pDrawable,
    GCPtr	pGC,
    int		nseg,
    xSegment	*pSeg
);

extern _X_EXPORT void
XAAPolyLines(
    DrawablePtr pDrawable,
    GCPtr	pGC,
    int		mode,
    int		npt,
    DDXPointPtr pptInit
);

extern _X_EXPORT void
XAAPolySegmentDashed(
    DrawablePtr	pDrawable,
    GCPtr	pGC,
    int		nseg,
    xSegment	*pSeg
);

extern _X_EXPORT void
XAAPolyLinesDashed(
    DrawablePtr pDrawable,
    GCPtr	pGC,
    int		mode,
    int		npt,
    DDXPointPtr pptInit
);


extern _X_EXPORT void
XAAWriteMono8x8PatternToCache(ScrnInfoPtr pScrn, XAACacheInfoPtr pCache);

extern _X_EXPORT void
XAAWriteColor8x8PatternToCache(
   ScrnInfoPtr pScrn, 
   PixmapPtr pPix, 
   XAACacheInfoPtr pCache
);

extern _X_EXPORT void
XAARotateMonoPattern(
    int *pat0, int *pat1,
    int xoffset, int yoffset,
    Bool msbfirst
);
d1184 10
a1193 17
extern _X_EXPORT void XAAMoveDWORDS_FixedBase(
   register CARD32* dest,
   register CARD32* src,
   register int dwords 
);

extern _X_EXPORT void XAAMoveDWORDS_FixedSrc(
   register CARD32* dest,
   register CARD32* src,
   register int dwords 
);

extern _X_EXPORT void XAAMoveDWORDS(
   register CARD32* dest,
   register CARD32* src,
   register int dwords 
);
d1196 4
a1199 6
XAAGetRectClipBoxes(
    GCPtr pGC,
    BoxPtr pboxClippedBase,
    int nrectFill,
    xRectangle *prectInit
);
d1202 1
a1202 1
XAASetupOverlay8_32Planar(ScreenPtr);
d1205 3
a1207 4
XAAPolyFillArcSolid(DrawablePtr pDraw, GCPtr pGC, int narcs, xArc *parcs);
 
extern _X_EXPORT XAACacheInfoPtr
XAACacheTile(ScrnInfoPtr Scrn, PixmapPtr pPix);
d1215 4
a1218 2
typedef XAACacheInfoPtr (*XAACachePlanarMonoStippleProc)(ScrnInfoPtr, PixmapPtr);
extern _X_EXPORT XAACachePlanarMonoStippleProc XAAGetCachePlanarMonoStipple(void);
d1230 2
a1231 2
XAATileCache(ScrnInfoPtr pScrn, XAACacheInfoPtr pCache, int w, int h);
 
d1236 2
a1237 1
extern _X_EXPORT Bool XAACheckTileReducibility(PixmapPtr pPixmap, Bool checkMono);
d1247 2
a1248 1
extern _X_EXPORT Bool XAAInitStateWrap(ScreenPtr pScreen, XAAInfoRecPtr infoRec);
a1250 12
XAAComposite (CARD8      op,
	      PicturePtr pSrc,
	      PicturePtr pMask,
	      PicturePtr pDst,
	      INT16      xSrc,
	      INT16      ySrc,
	      INT16      xMask,
	      INT16      yMask,
	      INT16      xDst,
	      INT16      yDst,
	      CARD16     width,
	      CARD16     height);
d1252 8
a1261 12
XAADoComposite (CARD8      op,
              PicturePtr pSrc,
              PicturePtr pMask,
              PicturePtr pDst,
              INT16      xSrc,
              INT16      ySrc,
              INT16      xMask,
              INT16      yMask,
              INT16      xDst,
              INT16      yDst,
              CARD16     width,
              CARD16     height);
d1263 9
d1274 7
a1280 9
XAAGlyphs (CARD8         op,
	   PicturePtr    pSrc,
	   PicturePtr    pDst,
	   PictFormatPtr maskFormat,
	   INT16         xSrc,
	   INT16         ySrc,
	   int           nlist,
	   GlyphListPtr  list,
	   GlyphPtr      *glyphs);
a1282 10
XAADoGlyphs (CARD8         op,
           PicturePtr    pSrc,
           PicturePtr    pDst,
           PictFormatPtr maskFormat,
           INT16         xSrc,
           INT16         ySrc,
           int           nlist,
           GlyphListPtr  list,
           GlyphPtr      *glyphs);

d1284 6
d1293 3
a1295 9
XAA_888_plus_PICT_a8_to_8888 (
    CARD32 color,
    CARD8  *alphaPtr,   /* in bytes */
    int    alphaPitch,
    CARD32  *dstPtr,
    int    dstPitch,	/* in dwords */
    int    width,
    int    height
);
a1297 8
XAAGetRGBAFromPixel(
    CARD32 pixel,
    CARD16 *red,
    CARD16 *green,
    CARD16 *blue,
    CARD16 *alpha,
    CARD32 format
);
d1299 3
d1304 4
a1307 8
XAAGetPixelFromRGBA (
    CARD32 *pixel,
    CARD16 red,
    CARD16 green,
    CARD16 blue,
    CARD16 alpha,
    CARD32 format
);
d1377 1
a1377 1
        ((XAA_GET_PIXMAP_PRIVATE((PixmapPtr)(pPix)))->offscreenArea)	
a1401 1
	
d1415 20
a1434 20
   int Num512x512;
   int Current512;
   XAACacheInfoPtr Info512;
   int Num256x256;
   int Current256;
   XAACacheInfoPtr Info256;
   int Num128x128;
   int Current128;
   XAACacheInfoPtr Info128;
   int NumMono;
   int CurrentMono;
   XAACacheInfoPtr InfoMono;
   int NumColor;
   int CurrentColor;
   XAACacheInfoPtr InfoColor;
   int NumPartial;
   int CurrentPartial;
   XAACacheInfoPtr InfoPartial;
   DDXPointRec MonoOffsets[64];
   DDXPointRec ColorOffsets[64];
d1437 1
a1437 2

#endif /* _XAALOCAL_H */
@


1.4
log
@Update to xserver 1.8. Tested by many. Ok oga@@, todd@@.
@
text
@a12 1
#ifdef RENDER
a13 1
#endif
a55 1
#ifdef RENDER
a57 1
#endif
a1537 1
#ifdef RENDER
a1624 2
#endif

d1712 1
a1712 1
		xfree(_pLink); \
@


1.3
log
@update to xserver 1.6.4rc1. Tested by many, ok oga@@.
@
text
@d100 1
a100 1
Bool 
d105 1
a105 1
Bool
d111 1
a111 1
RegionPtr
d126 1
a126 1
void 
d138 1
a138 1
void
d147 1
a147 1
void
d156 1
a156 1
void
d165 1
a165 1
void 
d173 1
a173 1
RegionPtr 
d186 1
a186 1
void
d193 1
a193 1
void
d200 1
a200 1
void
d207 1
a207 1
void
d214 1
a214 1
void
d221 1
a221 1
void
d228 1
a228 1
void
d235 1
a235 1
void
d243 1
a243 1
RegionPtr
d258 1
a258 1
void
d269 1
a269 1
void
d281 1
a281 1
void
d293 1
a293 1
void
d305 1
a305 1
void
d317 1
a317 1
void
d329 1
a329 1
void
d341 1
a341 1
void
d353 1
a353 1
void
d366 1
a366 1
void
d378 1
a378 1
void
d390 1
a390 1
void
d402 1
a402 1
void
d414 1
a414 1
void
d426 1
a426 1
void
d438 1
a438 1
void
d450 1
a450 1
void
d462 1
a462 1
void 
d474 1
a474 1
void 
d489 1
a489 1
void
d502 1
a502 1
void
d515 1
a515 1
void
d524 1
a524 1
void
d535 1
a535 1
void
d547 1
a547 1
void
d558 1
a558 1
void
d569 1
a569 1
void 
d580 1
a580 1
void 
d591 1
a591 1
void 
d602 1
a602 1
void
d611 1
a611 1
void
d619 1
a619 1
void
d627 1
a627 1
void
d635 1
a635 1
void
d643 1
a643 1
void
d652 1
a652 1
void
d660 1
a660 1
void
d668 1
a668 1
void
d677 1
a677 1
void
d685 1
a685 1
void
d693 1
a693 1
void
d701 1
a701 1
void
d710 1
a710 1
extern CARD32 *(*XAAGlyphScanlineFuncMSBFirstFixedBase[32])(
d714 1
a714 1
extern CARD32 *(*XAAGlyphScanlineFuncMSBFirst[32])(
d718 1
a718 1
extern CARD32 *(*XAAGlyphScanlineFuncLSBFirstFixedBase[32])(
d722 1
a722 1
extern CARD32 *(*XAAGlyphScanlineFuncLSBFirst[32])(
d726 4
a729 4
GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncMSBFirstFixedBase(void);
GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncMSBFirst(void);
GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncLSBFirstFixedBase(void);
GlyphScanlineFuncPtr *XAAGetGlyphScanlineFuncLSBFirst(void);
d731 1
a731 1
void
d742 1
a742 1
void
d753 1
a753 1
void
d764 1
a764 1
void
d775 1
a775 1
void
d786 1
a786 1
void
d797 1
a797 1
void
d808 1
a808 1
void
d819 1
a819 1
void
d830 1
a830 1
void
d841 1
a841 1
void
d852 1
a852 1
void
d863 1
a863 1
void
d876 1
a876 1
void
d889 1
a889 1
void
d902 1
a902 1
void
d915 1
a915 1
void
d928 1
a928 1
void
d941 1
a941 1
void
d954 1
a954 1
void
d967 1
a967 1
void
d980 1
a980 1
void
d993 1
a993 1
void
d1007 1
a1007 1
void
d1020 1
a1020 1
void
d1034 1
a1034 1
extern CARD32 *(*XAAStippleScanlineFuncMSBFirstFixedBase[6])(
d1038 1
a1038 1
extern CARD32 *(*XAAStippleScanlineFuncMSBFirst[6])(
d1042 1
a1042 1
extern CARD32 *(*XAAStippleScanlineFuncLSBFirstFixedBase[6])(
d1046 1
a1046 1
extern CARD32 *(*XAAStippleScanlineFuncLSBFirst[6])(
d1050 8
a1057 8
StippleScanlineProcPtr *XAAGetStippleScanlineFuncMSBFirstFixedBase(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFuncMSBFirst(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFuncLSBFirstFixedBase(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFuncLSBFirst(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFunc3MSBFirstFixedBase(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFunc3MSBFirst(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFunc3LSBFirstFixedBase(void);
StippleScanlineProcPtr *XAAGetStippleScanlineFunc3LSBFirst(void);
d1059 1
a1059 1
int
d1068 1
a1068 1
int
d1077 1
a1077 1
void
d1086 1
a1086 1
void
d1095 1
a1095 1
void
d1105 1
a1105 1
void
d1116 1
a1116 1
int
d1125 1
a1125 1
int
d1134 1
a1134 1
void
d1143 1
a1143 1
void
d1152 1
a1152 1
void
d1162 1
a1162 1
void
d1173 1
a1173 1
void XAANonTEGlyphRenderer(
d1182 1
a1182 1
void 
d1192 1
a1192 1
void 
d1204 1
a1204 1
void 
d1216 1
a1216 1
void 
d1228 1
a1228 1
void 
d1240 1
a1240 1
void
d1253 1
a1253 1
void 
d1266 1
a1266 1
void
d1277 1
a1277 1
void 
d1284 1
a1284 1
void 
d1293 1
a1293 1
void 
d1302 1
a1302 1
void 
d1311 1
a1311 1
void 
d1320 1
a1320 1
void 
d1326 1
a1326 1
void 
d1332 1
a1332 1
void 
d1339 1
a1339 1
void
d1348 1
a1348 1
void
d1357 1
a1357 1
void
d1367 1
a1367 1
void
d1378 1
a1378 1
void
d1389 1
a1389 1
int
d1400 1
a1400 1
void
d1416 1
a1416 1
void
d1424 1
a1424 1
void
d1433 1
a1433 1
void
d1441 1
a1441 1
void
d1451 1
a1451 1
void 
d1454 1
a1454 1
void 
d1461 1
a1461 1
void 
d1468 1
a1468 1
void XAAComputeDash(GCPtr pGC);
d1470 1
a1470 1
void XAAMoveDWORDS_FixedBase(
d1476 1
a1476 1
void XAAMoveDWORDS_FixedSrc(
d1482 1
a1482 1
void XAAMoveDWORDS(
d1488 1
a1488 1
int
d1496 1
a1496 1
void
d1499 1
a1499 1
void
d1502 1
a1502 1
XAACacheInfoPtr
d1505 1
a1505 1
XAACacheInfoPtr
d1508 1
a1508 1
XAACacheInfoPtr
d1512 1
a1512 1
XAACachePlanarMonoStippleProc XAAGetCachePlanarMonoStipple(void);
d1514 1
a1514 1
XAACacheInfoPtr
d1517 1
a1517 1
XAACacheInfoPtr
d1520 1
a1520 1
XAACacheInfoPtr
d1523 1
a1523 1
void 
d1526 1
a1526 1
void XAAClosePixmapCache(ScreenPtr pScreen);
d1529 2
a1530 2
Bool XAACheckStippleReducibility(PixmapPtr pPixmap);
Bool XAACheckTileReducibility(PixmapPtr pPixmap, Bool checkMono);
d1532 9
a1540 9
int XAAStippledFillChooser(GCPtr pGC);
int XAAOpaqueStippledFillChooser(GCPtr pGC);
int XAATiledFillChooser(GCPtr pGC);

void XAAMoveInOffscreenPixmaps(ScreenPtr pScreen);
void XAAMoveOutOffscreenPixmaps(ScreenPtr pScreen);
void XAARemoveAreaCallback(FBAreaPtr area);
void XAAMoveOutOffscreenPixmap(PixmapPtr pPix); 
Bool XAAInitStateWrap(ScreenPtr pScreen, XAAInfoRecPtr infoRec);
d1543 1
a1543 1
void
d1558 1
a1558 1
Bool
d1573 1
a1573 1
void
d1584 1
a1584 1
Bool
d1598 1
a1598 1
void
d1609 1
a1609 1
Bool
d1620 1
a1620 1
Bool
d1633 6
a1638 6
extern GCOps XAAFallbackOps;
extern GCOps *XAAGetFallbackOps(void);
extern GCFuncs XAAGCFuncs;
extern DevPrivateKey XAAGetScreenKey(void);
extern DevPrivateKey XAAGetGCKey(void);
extern DevPrivateKey XAAGetPixmapKey(void);
d1640 1
a1640 1
extern unsigned int XAAShiftMasks[32];
d1642 1
a1642 1
extern unsigned int byte_expand3[256], byte_reversed_expand3[256];
d1644 1
a1644 1
CARD32 XAAReverseBitOrder(CARD32 data);
@


1.2
log
@xserver 1.5.2. tested by ckuethe@@, oga@@, and others.
@
text
@d1054 4
@


1.1
log
@Initial revision
@
text
@a47 2
   PaintWindowBackgroundProcPtr PaintWindowBackground;
   PaintWindowBorderProcPtr 	PaintWindowBorder;
a49 1
   BSFuncRec 			BackingStoreFuncs;
a1315 8

void
XAAPaintWindow(
  WindowPtr pWin,
  RegionPtr prgn,
  int what 
);

d1632 3
a1634 6
extern int XAAScreenIndex;	/* XXX DONTUSE */
extern int XAAGCIndex;		/* XXX DONTUSE */
extern int XAAPixmapIndex;	/* XXX DONTUSE */
extern int XAAGetScreenIndex(void);
extern int XAAGetGCIndex(void);
extern int XAAGetPixmapIndex(void);
d1643 1
a1643 1
	(pScreen)->devPrivates[XAAGetScreenIndex()].ptr
d1646 1
a1646 1
	(pGC)->pScreen->devPrivates[XAAGetScreenIndex()].ptr
d1649 1
a1649 1
	(pDraw)->pScreen->devPrivates[XAAGetScreenIndex()].ptr
d1652 1
a1652 1
   ((XAAScreenPtr)((pScreen)->devPrivates[XAAGetScreenIndex()].ptr))->AccelInfoRec
d1655 1
a1655 1
((XAAScreenPtr)((pGC)->pScreen->devPrivates[XAAGetScreenIndex()].ptr))->AccelInfoRec
d1658 1
a1658 1
((XAAScreenPtr)((pDraw)->pScreen->devPrivates[XAAGetScreenIndex()].ptr))->AccelInfoRec
d1661 1
a1661 1
((XAAScreenPtr)((pScrn)->pScreen->devPrivates[XAAGetScreenIndex()].ptr))->AccelInfoRec
d1664 1
a1664 1
	(XAAPixmapPtr)((pix)->devPrivates[XAAGetPixmapIndex()].ptr)
@


1.1.1.1
log
@Importing xserver from X.Org 7.2RC2
@
text
@@


1.1.1.2
log
@xserver 1.4
@
text
@d1643 3
@

