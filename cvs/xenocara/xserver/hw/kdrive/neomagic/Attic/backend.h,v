head	1.2;
access;
symbols
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v1_2_0:1.1.1.1
	v1_1_99_903:1.1.1.1
	v1_1_99_902:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@ * @;


1.2
date	2007.11.24.19.04.02;	author matthieu;	state dead;
branches;
next	1.1;

1.1
date	2006.11.26.18.22.05;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.18.22.05;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@merge xserver 1.4, 1st pass
@
text
@/*
 * Generic card driving functions.
 * Essentially, cascades calls to fbdev and vesa to initialize cards that
 * do not have hardware-specific routines yet. Copied from the ati driver.
 *
 * Copyright (c) 2004 Brent Cook <busterb@@mail.utexas.edu>
 *
 * This code is licensed under the GPL.  See the file COPYING in the root
 * directory of the sources for details.
 */

#ifndef _BACKEND_H_
#define _BACKEND_H_
#include "kdrive.h"

#ifdef KDRIVEFBDEV
#include <fbdev.h>
#endif
#ifdef KDRIVEVESA
#include <vesa.h>
#endif

typedef enum _BackendType {VESA, FBDEV} BackendType;

typedef struct _BackendInfo {
    // backend info
    BackendType type;

    // backend internal structures
    union {
#ifdef KDRIVEFBDEV
        FbdevPriv fbdev;
#endif
#ifdef KDRIVEVESA
        VesaCardPrivRec vesa;
#endif
    } priv;

    // pointers to helper functions for this backend
    void (*cardfini)(KdCardInfo *);
    void (*scrfini)(KdScreenInfo *);
    Bool (*initScreen)(ScreenPtr);
    Bool (*finishInitScreen)(ScreenPtr pScreen);
    Bool (*createRes)(ScreenPtr);
    void (*preserve)(KdCardInfo *);
    void (*restore)(KdCardInfo *);
    Bool (*dpms)(ScreenPtr, int);
    Bool (*enable)(ScreenPtr);
    void (*disable)(ScreenPtr);
    void (*getColors)(ScreenPtr, int, int, xColorItem *);
    void (*putColors)(ScreenPtr, int, int, xColorItem *);
} BackendInfo;

typedef union _BackendScreen {
#ifdef KDRIVEFBDEV
    FbdevScrPriv fbdev;
#endif
#ifdef KDRIVEVESA
    VesaScreenPrivRec vesa;
#endif
} BackendScreen;

Bool
backendInitialize(KdCardInfo *card, BackendInfo *backend);

Bool
backendScreenInitialize(KdScreenInfo *screen, BackendScreen *backendScreen,
                        BackendInfo *backendCard);

#endif
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@Importing xserver from X.Org 7.2RC2
@
text
@@
