head	1.5;
access;
symbols
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.8
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.6
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.4.0.10
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.8
	OPENBSD_5_0:1.3.0.6
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.2.0.8
	OPENBSD_4_6_BASE:1.1.1.2
	OPENBSD_4_5:1.1.1.2.0.6
	OPENBSD_4_5_BASE:1.1.1.2
	OPENBSD_4_4:1.1.1.2.0.4
	OPENBSD_4_4_BASE:1.1.1.2
	OPENBSD_4_3_BASE:1.1.1.2
	OPENBSD_4_3:1.1.1.2.0.2
	v1_4_0_90:1.1.1.2
	v1_4:1.1.1.2
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	v1_2_0:1.1.1.1
	v1_1_99_903:1.1.1.1
	v1_1_99_902:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@ * @;


1.5
date	2014.09.27.17.53.01;	author matthieu;	state Exp;
branches;
next	1.4;
commitid	cVXoV5PxI8YrEaVA;

1.4
date	2012.06.10.13.21.23;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2010.07.27.19.02.29;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2009.09.06.19.44.23;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.18.23.32;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.18.23.32;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2007.11.24.18.02.35;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to xserver 1.16.1.

Tested by naddy@@, jsg@@ & kettenis@@
@
text
@/*
 * Copyright 2002,2003 Red Hat Inc., Durham, North Carolina.
 *
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation on the rights to use, copy, modify, merge,
 * publish, distribute, sublicense, and/or sell copies of the Software,
 * and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice (including the
 * next paragraph) shall be included in all copies or substantial
 * portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NON-INFRINGEMENT.  IN NO EVENT SHALL RED HAT AND/OR THEIR SUPPLIERS
 * BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
 * ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

/*
 * Authors:
 *   Rickard E. (Rik) Faith <faith@@redhat.com>
 *
 */

/** \file
 * Interface to functions used by backend and console input devices.
 * \see dmxcommon.c \see dmxbackend.c \see dmxconsole.c */

#ifndef _DMXCOMMON_H_
#define _DMXCOMMON_H_

#define DMX_COMMON_OTHER                    \
    Display                 *display;       \
    Window                  window;         \
    DMXScreenInfo           *be;            \
    DMXLocalInputInfoPtr    dmxLocal;       \
    int                     initPointerX;   \
    int                     initPointerY;   \
    long                    eventMask;      \
    KeybdCtrl               kctrl;          \
    PtrCtrl                 mctrl;          \
    int                     kctrlset;       \
    int                     mctrlset;       \
    KeybdCtrl               savedKctrl;     \
    XModifierKeymap         *savedModMap;   \
    int                     stateSaved

#define DMX_COMMON_XKB                      \
    DMX_COMMON_OTHER;                       \
    XkbDescPtr              xkb;            \
    XkbIndicatorRec         savedIndicators

#define DMX_COMMON_PRIVATE                  \
    DMX_COMMON_XKB;                         \
    XDevice                 *xi

#define GETONLYPRIVFROMPRIVATE                                          \
    myPrivate            *priv     = private

#define GETPRIVFROMPRIVATE                                              \
    GETONLYPRIVFROMPRIVATE;                                             \
    DMXInputInfo         *dmxInput = &dmxInputs[priv->dmxLocal->inputIdx]

#define GETDMXLOCALFROMPDEVICE                                          \
    DevicePtr            pDev      = &pDevice->public;                  \
    DMXLocalInputInfoPtr dmxLocal  = pDev->devicePrivate

#define GETDMXINPUTFROMPRIV                                             \
    DMXInputInfo         *dmxInput = &dmxInputs[priv->dmxLocal->inputIdx]

#define GETDMXINPUTFROMPDEVICE                                          \
    GETDMXLOCALFROMPDEVICE;                                             \
    DMXInputInfo         *dmxInput = &dmxInputs[dmxLocal->inputIdx]

#define GETDMXLOCALFROMPDEV                                             \
    DMXLocalInputInfoPtr dmxLocal  = pDev->devicePrivate

#define GETDMXINPUTFROMPDEV                                             \
    GETDMXLOCALFROMPDEV;                                                \
    DMXInputInfo         *dmxInput = &dmxInputs[dmxLocal->inputIdx]

#define GETPRIVFROMPDEV                                                 \
    GETDMXLOCALFROMPDEV;                                                \
    myPrivate            *priv     = dmxLocal->private

#define DMX_KEYBOARD_EVENT_MASK                                         \
    (KeyPressMask | KeyReleaseMask | KeymapStateMask)

#define DMX_POINTER_EVENT_MASK                                          \
    (ButtonPressMask | ButtonReleaseMask | PointerMotionMask)

extern void dmxCommonKbdGetInfo(DevicePtr pDev, DMXLocalInitInfoPtr info);
extern void dmxCommonKbdGetMap(DevicePtr pDev,
                               KeySymsPtr pKeySyms, CARD8 *pModMap);
extern void dmxCommonKbdCtrl(DevicePtr pDev, KeybdCtrl * ctrl);
extern void dmxCommonKbdBell(DevicePtr pDev, int percent,
                             int volume, int pitch, int duration);
extern int dmxCommonKbdOn(DevicePtr pDev);
extern void dmxCommonKbdOff(DevicePtr pDev);
extern void dmxCommonMouGetMap(DevicePtr pDev,
                               unsigned char *map, int *nButtons);
extern void dmxCommonMouCtrl(DevicePtr pDev, PtrCtrl * ctrl);
extern int dmxCommonMouOn(DevicePtr pDev);
extern void dmxCommonMouOff(DevicePtr pDev);
extern int dmxFindPointerScreen(int x, int y);

extern int dmxCommonOthOn(DevicePtr pDev);
extern void dmxCommonOthOff(DevicePtr pDev);
extern void dmxCommonOthGetInfo(DevicePtr pDev, DMXLocalInitInfoPtr info);

                                /* helper functions */
extern void *dmxCommonCopyPrivate(DeviceIntPtr pDevice);
extern void dmxCommonSaveState(void *private);
extern void dmxCommonRestoreState(void *private);
#endif
@


1.4
log
@Update to xserver 1.12.2. tested by naddy@@, krw@@, mpi@@.
@
text
@d121 3
a123 3
extern pointer dmxCommonCopyPrivate(DeviceIntPtr pDevice);
extern void dmxCommonSaveState(pointer private);
extern void dmxCommonRestoreState(pointer private);
@


1.3
log
@Update to xserver 1.8. Tested by many. Ok oga@@, todd@@.
@
text
@d101 14
a114 14
extern void    dmxCommonKbdGetInfo(DevicePtr pDev, DMXLocalInitInfoPtr info);
extern void    dmxCommonKbdGetMap(DevicePtr pDev,
                                  KeySymsPtr pKeySyms, CARD8 *pModMap);
extern void    dmxCommonKbdCtrl(DevicePtr pDev, KeybdCtrl *ctrl);
extern void    dmxCommonKbdBell(DevicePtr pDev, int percent,
                                int volume, int pitch, int duration);
extern int     dmxCommonKbdOn(DevicePtr pDev);
extern void    dmxCommonKbdOff(DevicePtr pDev);
extern void    dmxCommonMouGetMap(DevicePtr pDev,
                                  unsigned char *map, int *nButtons);
extern void    dmxCommonMouCtrl(DevicePtr pDev, PtrCtrl *ctrl);
extern int     dmxCommonMouOn(DevicePtr pDev);
extern void    dmxCommonMouOff(DevicePtr pDev);
extern int     dmxFindPointerScreen(int x, int y);
d116 3
a118 3
extern int     dmxCommonOthOn(DevicePtr pDev);
extern void    dmxCommonOthOff(DevicePtr pDev);
extern void    dmxCommonOthGetInfo(DevicePtr pDev, DMXLocalInitInfoPtr info);
d122 2
a123 2
extern void    dmxCommonSaveState(pointer private);
extern void    dmxCommonRestoreState(pointer private);
@


1.2
log
@update to xserver 1.6.4rc1. Tested by many, ok oga@@.
@
text
@a56 1
#ifdef XKB
a60 3
#else
#define DMX_COMMON_XKB      DMX_COMMON_OTHER
#endif
@


1.1
log
@Initial revision
@
text
@a0 1
/* $XFree86$ */
a65 1
#ifdef XINPUT
a68 3
#else
#define DMX_COMMON_PRIVATE  DMX_COMMON_OTHER
#endif
@


1.1.1.1
log
@Importing xserver from X.Org 7.2RC2
@
text
@@


1.1.1.2
log
@xserver 1.4
@
text
@d1 1
@

