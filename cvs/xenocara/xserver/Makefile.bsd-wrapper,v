head	1.65;
access;
symbols
	OPENBSD_6_0:1.62.0.2
	OPENBSD_6_0_BASE:1.62
	OPENBSD_5_9:1.60.0.2
	OPENBSD_5_9_BASE:1.60
	OPENBSD_5_8:1.55.0.2
	OPENBSD_5_8_BASE:1.55
	OPENBSD_5_7:1.53.0.2
	OPENBSD_5_7_BASE:1.53
	OPENBSD_5_6:1.51.0.2
	OPENBSD_5_6_BASE:1.51
	OPENBSD_5_5:1.50.0.2
	OPENBSD_5_5_BASE:1.50
	OPENBSD_5_4:1.48.0.2
	OPENBSD_5_4_BASE:1.48
	OPENBSD_5_3:1.43.0.4
	OPENBSD_5_3_BASE:1.43
	OPENBSD_5_2:1.43.0.2
	OPENBSD_5_2_BASE:1.43
	OPENBSD_5_1_BASE:1.41
	OPENBSD_5_1:1.41.0.2
	OPENBSD_5_0:1.37.0.2
	OPENBSD_5_0_BASE:1.37
	OPENBSD_4_9:1.34.0.2
	OPENBSD_4_9_BASE:1.34
	OPENBSD_4_8:1.29.0.4
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.28.0.2
	OPENBSD_4_7_BASE:1.28
	OPENBSD_4_6:1.26.0.4
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.26.0.2
	OPENBSD_4_5_BASE:1.26
	OPENBSD_4_4:1.22.0.2
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3_BASE:1.20
	OPENBSD_4_3:1.20.0.2
	OPENBSD_4_2:1.17.0.2
	OPENBSD_4_2_BASE:1.17;
locks; strict;
comment	@# @;


1.65
date	2016.10.04.19.48.48;	author deraadt;	state Exp;
branches;
next	1.64;
commitid	DIJkspo84bw22owG;

1.64
date	2016.10.02.17.21.29;	author matthieu;	state Exp;
branches;
next	1.63;
commitid	hUcLxcJpwRV9AGth;

1.63
date	2016.07.30.12.18.35;	author matthieu;	state Exp;
branches;
next	1.62;
commitid	UJ4wwOuSgp5NvvWe;

1.62
date	2016.05.12.07.19.50;	author matthieu;	state Exp;
branches;
next	1.61;
commitid	Bjqxtgp390SNIskw;

1.61
date	2016.03.11.13.09.42;	author okan;	state Exp;
branches;
next	1.60;
commitid	rypizj9eWLMTQq0Q;

1.60
date	2016.02.20.10.58.10;	author matthieu;	state Exp;
branches;
next	1.59;
commitid	xXlfQgQXY45F02q4;

1.59
date	2016.02.07.09.51.01;	author jsg;	state Exp;
branches;
next	1.58;
commitid	7mPHu0don55C9QcP;

1.58
date	2015.12.01.21.20.21;	author kettenis;	state Exp;
branches;
next	1.57;
commitid	7ruZ2TWkcsiKO4BJ;

1.57
date	2015.11.17.10.49.57;	author aoyama;	state Exp;
branches;
next	1.56;
commitid	8HnLT2dVk8q86mCT;

1.56
date	2015.08.29.17.49.14;	author matthieu;	state Exp;
branches;
next	1.55;
commitid	9Qi8oYJu2qISPCGi;

1.55
date	2015.06.27.21.50.55;	author miod;	state Exp;
branches;
next	1.54;
commitid	4J0vVo1QeS1OB0ic;

1.54
date	2015.05.31.13.23.03;	author matthieu;	state Exp;
branches;
next	1.53;
commitid	oUZCMovZWoOLcIg2;

1.53
date	2015.02.09.09.55.52;	author kettenis;	state Exp;
branches;
next	1.52;
commitid	NbfpCnqGpoRSGILW;

1.52
date	2014.09.27.17.49.47;	author matthieu;	state Exp;
branches;
next	1.51;
commitid	VpTvgfArIts6vnvY;

1.51
date	2014.03.18.22.37.29;	author miod;	state Exp;
branches;
next	1.50;

1.50
date	2013.12.28.16.31.18;	author matthieu;	state Exp;
branches;
next	1.49;

1.49
date	2013.08.17.17.06.33;	author bcallah;	state Exp;
branches;
next	1.48;

1.48
date	2013.07.29.06.10.22;	author matthieu;	state Exp;
branches;
next	1.47;

1.47
date	2013.07.15.13.23.17;	author aoyama;	state Exp;
branches;
next	1.46;

1.46
date	2013.06.07.17.28.45;	author matthieu;	state Exp;
branches;
next	1.45;

1.45
date	2013.03.16.01.24.43;	author aoyama;	state Exp;
branches;
next	1.44;

1.44
date	2013.03.14.20.49.52;	author miod;	state Exp;
branches;
next	1.43;

1.43
date	2012.06.20.19.56.34;	author matthieu;	state Exp;
branches;
next	1.42;

1.42
date	2012.03.10.18.35.56;	author matthieu;	state Exp;
branches;
next	1.41;

1.41
date	2012.02.07.19.46.11;	author matthieu;	state Exp;
branches;
next	1.40;

1.40
date	2011.11.05.13.32.40;	author matthieu;	state Exp;
branches;
next	1.39;

1.39
date	2011.09.17.13.39.31;	author shadchin;	state Exp;
branches;
next	1.38;

1.38
date	2011.08.31.12.31.51;	author matthieu;	state Exp;
branches;
next	1.37;

1.37
date	2011.05.30.10.52.58;	author shadchin;	state Exp;
branches;
next	1.36;

1.36
date	2011.04.27.20.46.31;	author matthieu;	state Exp;
branches;
next	1.35;

1.35
date	2011.03.08.07.59.23;	author matthieu;	state Exp;
branches;
next	1.34;

1.34
date	2011.02.20.13.42.17;	author matthieu;	state Exp;
branches;
next	1.33;

1.33
date	2011.02.19.19.51.53;	author matthieu;	state Exp;
branches;
next	1.32;

1.32
date	2011.01.02.14.23.40;	author matthieu;	state Exp;
branches;
next	1.31;

1.31
date	2011.01.02.14.04.18;	author matthieu;	state Exp;
branches;
next	1.30;

1.30
date	2010.12.05.15.36.03;	author matthieu;	state Exp;
branches;
next	1.29;

1.29
date	2010.07.27.19.02.24;	author matthieu;	state Exp;
branches;
next	1.28;

1.28
date	2009.09.11.06.17.29;	author matthieu;	state Exp;
branches;
next	1.27;

1.27
date	2009.09.06.19.44.18;	author matthieu;	state Exp;
branches;
next	1.26;

1.26
date	2009.01.27.16.28.57;	author matthieu;	state Exp;
branches;
next	1.25;

1.25
date	2008.11.02.15.26.08;	author matthieu;	state Exp;
branches;
next	1.24;

1.24
date	2008.10.12.10.46.40;	author matthieu;	state Exp;
branches;
next	1.23;

1.23
date	2008.10.08.02.24.29;	author todd;	state Exp;
branches;
next	1.22;

1.22
date	2008.05.24.20.36.04;	author matthieu;	state Exp;
branches;
next	1.21;

1.21
date	2008.03.25.23.41.50;	author matthieu;	state Exp;
branches;
next	1.20;

1.20
date	2008.02.13.21.34.15;	author miod;	state Exp;
branches;
next	1.19;

1.19
date	2008.02.02.17.19.57;	author matthieu;	state Exp;
branches;
next	1.18;

1.18
date	2008.01.04.13.44.23;	author jsing;	state Exp;
branches;
next	1.17;

1.17
date	2007.05.27.05.56.03;	author matthieu;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.25.16.30.11;	author matthieu;	state Exp;
branches;
next	1.15;

1.15
date	2007.05.25.16.15.41;	author matthieu;	state Exp;
branches;
next	1.14;

1.14
date	2007.05.12.14.54.57;	author matthieu;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.12.14.24.59;	author matthieu;	state Exp;
branches;
next	1.12;

1.12
date	2007.04.15.17.42.08;	author matthieu;	state Exp;
branches;
next	1.11;

1.11
date	2007.03.31.20.25.53;	author matthieu;	state Exp;
branches;
next	1.10;

1.10
date	2007.03.28.20.44.34;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2007.03.25.15.12.30;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2007.03.02.20.26.20;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2007.01.29.22.06.35;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.31.09.47.13;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.17.21.46.45;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2006.12.01.20.29.51;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.28.20.29.31;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.27.19.34.41;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.19.03.36;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.65
log
@ignore chown error (for systems which don't install a Xserver)
@
text
@# $OpenBSD: Makefile.bsd-wrapper,v 1.64 2016/10/02 17:21:29 matthieu Exp $

.include <bsd.xconf.mk>

DIST= ${.CURDIR}

# Machines for which we don't build the Xorg Xserver
NO_XORG_MACHINES=	alpha landisk octeon

.for M in ${NO_XORG_MACHINES} 
NO_XORG_${M} = --disable-xorg
.endfor
NO_XORG_OPTION=${NO_XORG_${MACHINE}}

.if ${XENOCARA_BUILD_GL:L} != "yes"
GLX_OPTION=	--disable-glx
.else
GLX_OPTION=	--enable-glamor
KDRIVE_OPTION=	--enable-kdrive
.endif

.if ${XENOCARA_BUILD_DRI:L} == "yes"
DRI_OPTION=	--enable-dri --enable-dri2
.else
DRI_OPTION=	--disable-dri --disable-dri2 --disable-libdrm
.endif

XKB_PATH=	${X11BASE}/share/X11/xkb
XKB_RULES=	base

CONFIGURE_ARGS=	--localstatedir=/var --sysconfdir=/etc/X11 \
		--with-xkb-path=${XKB_PATH} \
		--with-xkb-output=/var/db/xkb \
		--with-default-xkb-rules=${XKB_RULES} \
		--with-module-dir=${LIBDIR}/modules ${GLX_OPTION} \
		--enable-install-setuid --enable-privsep \
		${KDRIVE_OPTION} \
		--enable-xcsecurity \
		--without-fop --without-xmlto --without-xsltproc \
		--disable-dmx ${NO_XORG_OPTION} \
		--disable-unit-tests \
		${DRI_OPTION}

afterinstall:
	-chown -h ${BINOWN}:${BINGRP} ${DESTDIR}${BINDIR}/X

.include <bsd.xorg.mk>
@


1.64
log
@fix the ownership of the link /usr/X11R6/bin/X -> Xorg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.63 2016/07/30 12:18:35 matthieu Exp $
d45 1
a45 1
	chown -h ${BINOWN}:${BINGRP} ${DESTDIR}${BINDIR}/X
@


1.63
log
@Merge the build of Xephyr in the main xserver build.

Recent X server doesn't require to build the DIX with different
options for xfree86 and kdrive.

Tested for beeing a no-op on m88k by Kenji Aoyama. Thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.62 2016/05/12 07:19:50 matthieu Exp $
d43 3
@


1.62
log
@No more hppa64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.61 2016/03/11 13:09:42 okan Exp $
d19 1
d37 1
@


1.61
log
@Remove support vax and XENOCARA_HAVE_SHARED_LIBS scaffolding.

ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.60 2016/02/20 10:58:10 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha hppa64 landisk octeon
@


1.60
log
@No more aviion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.59 2016/02/07 09:51:01 jsg Exp $
d8 1
a8 2
NO_XORG_MACHINES=	alpha hppa64 landisk  \
			octeon vax
@


1.59
log
@solbourne was removed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.58 2015/12/01 21:20:21 kettenis Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hppa64 landisk  \
@


1.58
log
@Enable glamor on architectures where we have OpenGL.

ok jsg@@, matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.57 2015/11/17 10:49:57 aoyama Exp $
d9 1
a9 1
			octeon solbourne vax
@


1.57
log
@Pass --disable-libdrm option to configure when the machine does not
support DRI.  Found while building Xorg server on luna88k.

"fine for now" matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.56 2015/08/29 17:49:14 matthieu Exp $
d18 2
@


1.56
log
@With the binutils got slot accounting fix, workaround it no longer needed

ok miod@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.55 2015/06/27 21:50:55 miod Exp $
d23 1
a23 1
DRI_OPTION=	--disable-dri --disable-dri2
@


1.55
log
@Build the Xserver with large got (-xgot as(1) option) on mips; needed to
accomodate the growth of recent changes. Tested on loongson.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.54 2015/05/31 13:23:03 matthieu Exp $
a39 6

.if ${MACHINE_CPU} == "mips64"
# disable cache file, because the compiler flags will not match
CONFIGURE_ARGS+=	--cache-file=/dev/null
CFLAGS+=	-Wa,-xgot
.endif
@


1.54
log
@Obsolete XAA includes should be gone now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.53 2015/02/09 09:55:52 kettenis Exp $
a10 2
NO_XF86UTIL_MACHINES=	landisk luna88k mac68k octeon sgi sparc vax

a15 5
.for M in ${NO_XF86UTIL_MACHINES}
NO_XF86_UTIL_${M} = --disable-xfree86-utils
.endfor
NO_XF86_UTIL_OPTION=${NO_XF86_UTIL_${MACHINE}}

d37 1
a37 1
		--disable-dmx ${NO_XORG_OPTION} ${NO_XF86_UTIL_OPTION} \
d40 6
@


1.53
log
@Enable file descriptor passing code.

ok deraadt@@, matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.52 2014/09/27 17:49:47 matthieu Exp $
a46 6

includes:
	@@echo "Removing obsolete files"
	-rm -f ${DESTDIR}${X11BASE}/include/xorg/xaa.h \
	       ${DESTDIR}${X11BASE}/include/xorg/xaalocal.h \
	       ${DESTDIR}${X11BASE}/include/xorg/mibstore.h
@


1.52
log
@Update to xserver 1.16.1.

Tested by naddy@@, jsg@@ & kettenis@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.51 2014/03/18 22:37:29 miod Exp $
a44 1
		--disable-xtrans-send-fds \
@


1.51
log
@Remove {hp300,mvme68k,mvme88k} bits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.50 2013/12/28 16:31:18 matthieu Exp $
d45 1
@


1.50
log
@mac68k and mvmeppc are no longer supported.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.49 2013/08/17 17:06:33 bcallah Exp $
d9 1
a9 1
			mvme68k mvme88k octeon solbourne vax
d11 1
a11 1
NO_XF86UTIL_MACHINES=	hp300 landisk luna88k mac68k octeon sgi sparc vax
@


1.49
log
@No xorg xserver on octeon.
ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.48 2013/07/29 06:10:22 matthieu Exp $
d8 2
a9 2
NO_XORG_MACHINES=	alpha aviion hppa64 landisk mac68k \
			mvme68k mvme88k mvmeppc octeon solbourne vax
@


1.48
log
@Build the X server on hp300 again. from miod@@. Ok deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.47 2013/07/15 13:23:17 aoyama Exp $
d9 1
a9 1
			mvme68k mvme88k mvmeppc solbourne vax
d11 1
a11 1
NO_XF86UTIL_MACHINES=	hp300 landisk luna88k mac68k sgi sparc vax
@


1.47
log
@Add monochrome X server support for luna88k.

Some luna88k specific quirks are needed in
driver/xf86-video-wsfb/src/wsfb_driver.c for now.

ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.46 2013/06/07 17:28:45 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hp300 hppa64 landisk mac68k \
@


1.46
log
@Update to X server 1.14.1. Tested by many during t2k13. Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.42 2012/03/10 18:35:56 matthieu Exp $
d11 1
a11 1
NO_XF86UTIL_MACHINES=	hp300 landisk mac68k sgi sparc vax
@


1.45
log
@Add xenocara defines/files for luna88k, no X server at this moment.

ok miod@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.44 2013/03/14 20:49:52 miod Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hppa64 landisk luna88k \
d11 1
a11 1
NO_XF86UTIL_MACHINES=	hp300 landisk sgi sparc vax
d47 6
@


1.44
log
@Build the X server on hp300 again. Tested on catseye.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.43 2012/06/20 19:56:34 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hppa64 landisk \
@


1.43
log
@Remove mac68k bits from Xenocara.
The imake config bits are not removed.
Those files are frozen, until they can be removed, once the last
port that still uses imake dies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.42 2012/03/10 18:35:56 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hp300 hppa64 landisk \
@


1.42
log
@Disable doc formatting tools explicitely
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.41 2012/02/07 19:46:11 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hp300 hppa64 landisk mac68k \
d11 1
a11 1
NO_XF86UTIL_MACHINES=	hp300 landisk mac68k sgi sparc vax
@


1.41
log
@Disable build of Xserver on hp300 and mac68k. Building the Xserver
with gcc 2.95 is getting hopeless and there is not enough manpower at
the moment to switch these platforms to a more recent compiler.
ok miod@@, Nick@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.40 2011/11/05 13:32:40 matthieu Exp $
d43 1
@


1.40
log
@Update to xserver 1.11.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.39 2011/09/17 13:39:31 shadchin Exp $
d8 1
a8 1
NO_XORG_MACHINES=	alpha aviion hppa64 landisk \
@


1.39
log
@Cleaning of current solution for 'Kill X on Ctrl+Alt+Backspace on default'

ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.38 2011/08/31 12:31:51 matthieu Exp $
d28 1
a28 2
DRI_OPTION=	--enable-dri --enable-dri2 \
		--with-dri-driver-path=${X11BASE}/lib/modules/dri
@


1.38
log
@unifdef support for xkeyboard-config.
I don't know why cvs didn't pick up this chunk. Noticed by okan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.37 2011/05/30 10:52:58 shadchin Exp $
a35 1
XKB_OPTIONS=	terminate:ctrl_alt_bksp
a40 1
		--with-default-xkb-options=${XKB_OPTIONS} \
@


1.37
log
@If you do not have XkbOptions in xorg.conf, it is automatically set to
"terminate: ctrl_alt_bksp" (only if XENOCARA_USE_XKEYBOARD_CONFIG=Yes)

tested ajacoutot@@, ok matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.36 2011/04/27 20:46:31 matthieu Exp $
a33 1
.if ${XENOCARA_USE_XKEYBOARD_CONFIG:L} == "yes"
a36 5
.else
XKB_PATH=	/etc/X11/xkb
XKB_RULES=	xorg
XKB_OPTIONS=
.endif
@


1.36
log
@Enable X-ACE and XC-SECURITY extensions, now that they build on
OpenBSD. Requested and tested by tedu@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.35 2011/03/08 07:59:23 matthieu Exp $
d37 1
d41 1
d48 1
@


1.35
log
@add a new build switch 'XENOCARA_USE_XKEYBOARD_CONFIG' to enable
the use of xkeyboard-config xkb definitions instead of the old xkbdata.
This will make testing easier. No changes in default builds.
ok shadchin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.34 2011/02/20 13:42:17 matthieu Exp $
d48 1
d50 1
a50 1
		--disable-unit-tests --disable-xace \
@


1.34
log
@Revert stuff that should not have been committed in version 1.33.
Noticed by krw@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.33 2011/02/19 19:51:53 matthieu Exp $
d34 8
d43 1
a43 1
		--with-xkb-path=/etc/X11/xkb \
d45 1
a45 1
		--with-default-xkb-rules=xorg \
@


1.33
log
@Disable Xorg on alpha. Xrender is broken since 2 releases and I still
don't know how to fix it. ok miod@@, todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.32 2011/01/02 14:23:40 matthieu Exp $
d35 1
a35 1
		--with-xkb-path=${X11BASE}/share/X11/xkb \
d37 1
a37 1
		--with-default-xkb-rules=base \
@


1.32
log
@Specify default xkb rules for Xnest and Xephyr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.31 2011/01/02 14:04:18 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	aviion hppa64 landisk \
d35 1
a35 1
		--with-xkb-path=/etc/X11/xkb \
d37 1
a37 1
		--with-default-xkb-rules=xorg \
@


1.31
log
@Enable Xorg and a few drivers on hppa. Only wsudl works for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.30 2010/12/05 15:36:03 matthieu Exp $
d37 1
@


1.30
log
@Upgrade to xorg-server 1.9.2.
Tested by ajacoutot@@, krw@@, shadchin@@ and jasper@@ on various configurations
including multihead with both zaphod and xrandr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.26 2009/01/27 16:28:57 matthieu Exp $
d8 1
a8 1
NO_XORG_MACHINES=	aviion hppa hppa64 landisk \
@


1.29
log
@Update to xserver 1.8. Tested by many. Ok oga@@, todd@@.
@
text
@a34 1
		--with-fontrootdir=${LIBDIR}/X11/fonts \
@


1.28
log
@Bring Xnest back.

I had to disable its build during xserver 1.6 development because it
wasn't building for a while. But all problems are now fixed. ok todd@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.27 2009/09/06 19:44:18 matthieu Exp $
d28 2
a29 1
DRI_OPTION=	--enable-dri --enable-dri2 --with-dri-driver-path=${X11BASE}/lib/modules/dri
d35 1
d41 1
@


1.27
log
@update to xserver 1.6.4rc1. Tested by many, ok oga@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.26 2009/01/27 16:28:57 matthieu Exp $
d39 1
a39 2
		${DRI_OPTION} \
		--disable-xnest
@


1.26
log
@Don't allow to build kdrive here anymore. This is now in ../kdrive.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.25 2008/11/02 15:26:08 matthieu Exp $
d23 1
a23 3
.if ${XENOCARA_BUILD_GL:L} == "yes"
GLX_OPTION=	--with-mesa-source=${XSRCDIR}/dist/Mesa
.else
d28 1
a28 1
DRI_OPTION=	--enable-dri --with-dri-driver-path=${X11BASE}/lib/modules/dri
d30 1
a30 1
DRI_OPTION=	--disable-dri
d39 2
a40 1
		--disable-ioport ${DRI_OPTION}
@


1.25
log
@xserver 1.5.2. tested by ckuethe@@, oga@@, and others.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.22 2008/05/24 20:36:04 matthieu Exp $
a34 1
.if !defined(KDRIVE)
a41 10
.else
CONFIGURE_ARGS=	--localstatedir=/var --sysconfdir=/etc/X11 \
		--disable-xorg \
		--disable-xinput \
		--enable-kdrive \
		--disable-dmx \
		--disable-xprint \
		--disable-xnest \
		--disable-xvfb
.endif
@


1.24
log
@Xprt is not built by default anymore. Remove the code that selectively
disabled it on a few platforms.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.23 2008/10/08 02:24:29 todd Exp $
d23 4
a26 2
.if ${XENOCARA_BUILD_GL:L} == "yes" && ${MACHINE_ARCH} != "mips64"
MESA_SOURCE=	--with-mesa-source=${XSRCDIR}/dist/Mesa
d31 2
d39 1
a39 1
		--with-module-dir=${LIBDIR}/modules ${MESA_SOURCE} \
d49 1
a51 4
.endif

.if ${MACHINE_ARCH} == "mips64"
CONFIGURE_ARGS+= --disable-glx
@


1.23
log
@enable GL for libraries, but not the X server .. for mips64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.22 2008/05/24 20:36:04 matthieu Exp $
a12 2
NO_XPRINT_MACHINES=     landisk vax

a17 5
.for M in ${NO_XPRINT_MACHINES}
NO_XPRINT_${M}= --disable-xprint
.endfor
NO_XPRINT_OPTION=${NO_XPRINT_${MACHINE}}

d38 1
a38 2
		--disable-ioport \
		${NO_XPRINT_OPTION} ${DRI_OPTION}
a44 1
		--disable-xprint \
@


1.22
log
@implement the --disable-ioport configure option to disable the build of
ioport and its symlinks and use that option. Requested by kettenis@@
and others.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.21 2008/03/25 23:41:50 matthieu Exp $
d30 1
a30 1
.if ${XENOCARA_BUILD_GL:L} == "yes"
d57 5
@


1.21
log
@Introduce bsd.xconf.mk to set default config variables used
at several places in the Xenocara build in a central place instead
of duplicating the checks all over the place. ok oga@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.20 2008/02/13 21:34:15 miod Exp $
d45 1
@


1.20
log
@Disable mesa on m68k, at least until it switches to ELF; suggested by matthieu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.19 2008/02/02 17:19:57 matthieu Exp $
d3 1
a3 1
.include <bsd.own.mk>
d30 1
a30 2
.if ${MACHINE} != "landisk" && ${MACHINE} != "sgi" && ${MACHINE} != "vax" && \
    ${MACHINE_ARCH} != "m68k"
d34 1
a34 1
.if defined(XENOCARA_BUILD_DRI) && ${XENOCARA_BUILD_DRI:L} == "yes"
@


1.19
log
@Make it possible to build dri support with XENOCARA_BUILD_DRI=yes in
/etc/mk.conf. ok oga@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.18 2008/01/04 13:44:23 jsing Exp $
d30 2
a31 1
.if ${MACHINE} != "landisk" && ${MACHINE} != "sgi" && ${MACHINE} != "vax"
@


1.18
log
@Add support for xserver on OpenBSD/sgi and enable build.

ok matthieu@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.16 2007/05/25 16:30:11 matthieu Exp $
d34 4
d45 1
a45 1
		${NO_XPRINT_OPTION}
@


1.17
log
@kdrive doesn't support Xinput.
@
text
@d7 1
a7 1
			mvme68k mvme88k mvmeppc sgi solbourne vax
d9 1
a9 1
NO_XF86UTIL_MACHINES=	hp300 landisk mac68k sparc vax
@


1.16
log
@Add a way to build Xwscons for those who want to hack on it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.14 2007/05/12 14:54:57 matthieu Exp $
d43 1
@


1.15
log
@Unbreak Xprint builds. Noticed by todd@@.
@
text
@d32 1
d40 9
a48 1

@


1.14
log
@Don't build mesa on landisk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.13 2007/05/12 14:24:59 matthieu Exp $
d19 1
a19 1
NO_XPRINT_OPTION= --disable-xprint
d21 1
@


1.13
log
@- Disable OpenGL parts on vax and sgi
- Disable Xprt on vax and landisk
Xenocara now builds on vax
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.12 2007/04/15 17:42:08 matthieu Exp $
d27 1
a27 1
.if ${MACHINE} != "sgi" && ${MACHINE} != "vax"
@


1.12
log
@Don't build the Xfree86 utils programs (mostly PCI based) on machines
which lack the capabilities to support them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.12 2007/04/15 17:40:25 matthieu Exp $
d7 1
a7 1
			mvme68k mvme88k mvmeppc sgi solbourne 
d9 3
a11 1
NO_XF86UTIL_MACHINES=	hp300 mac68k sparc vax
d18 4
d27 4
d34 1
a34 2
		--with-module-dir=${LIBDIR}/modules \
		--with-mesa-source=${XSRCDIR}/dist/Mesa \
d36 2
a37 1
		--disable-dmx ${NO_XORG_OPTION} ${NO_XF86_UTIL_OPTION}
@


1.11
log
@XENOCARA_TOP -> XSRCDIR and now defaults to /usr/src/xenocara
XENOCARA_OBJDIR -> XOBJDIR  and now defaults to /usr/xobj
suggested by espie@@ ok krw@@ mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.10 2007/03/28 20:44:34 matthieu Exp $
d9 2
d16 5
d27 1
a27 1
		--disable-dmx ${NO_XORG_OPTION}
@


1.10
log
@build Xorg on armish. It will run on zaurus too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.9 2007/03/25 15:12:30 matthieu Exp $
d18 1
a18 1
		--with-mesa-source=${XENOCARA_TOP}/dist/Mesa \
@


1.9
log
@Fix the NO_XORG_OPTION logic. Noticed by todd@@ on mvme68k.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.8 2007/03/02 20:26:20 matthieu Exp $
d6 1
a6 1
NO_XORG_MACHINES=	armish aviion hppa hppa64 landisk \
@


1.8
log
@List of arches where we don't build Xorg.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.7 2007/01/29 22:06:35 matthieu Exp $
d20 1
a20 1
		--disable-dmx ${NO_XORG_MACHINE}
@


1.7
log
@white-space cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.6 2006/12/31 09:47:13 matthieu Exp $
d5 9
d20 1
a20 1
		--disable-dmx
@


1.6
log
@Fix xkb data files locations. Problem noticed by Pierre-Yves Dampure and
Frederick C Druseikis who also sent a patch. Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.5 2006/12/17 21:46:45 matthieu Exp $
a13 2


@


1.5
log
@let datadir point to /usr/X11R6/share for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.4 2006/12/01 20:29:51 matthieu Exp $
d6 2
@


1.4
log
@Xprint configuration goes to /etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.3 2006/11/28 20:29:31 matthieu Exp $
a5 1
		--datadir=/etc \
@


1.3
log
@OpenBSD local modifications:
- privilege separation
- some snprintf/strlc{at,py} conversions
- support for more architectures
- signal handler fixes
- default mouse wheel support in config tools
- sunmouse protocol
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.2 2006/11/27 19:34:41 matthieu Exp $
d6 1
@


1.2
log
@$Xenocara$ -> $OpenBSD$
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.bsd-wrapper,v 1.3 2006/04/17 13:57:13 matthieu Exp $
d8 1
a8 1
		--enable-install-setuid \
@


1.1
log
@build infrastructure for xserver
@
text
@d1 1
a1 1
# $Xenocara: Makefile.bsd-wrapper,v 1.3 2006/04/17 13:57:13 matthieu Exp $
@

