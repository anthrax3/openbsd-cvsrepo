head	1.12;
access;
symbols
	OPENBSD_6_0:1.12.0.10
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.8
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.6
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.4
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.11.0.8
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.6
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.4
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.2
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.9.0.6
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.4
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	v1_4_0_90:1.1.1.4
	v1_4:1.1.1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	v1_2_0:1.1.1.2
	v1_1_99_903:1.1.1.2
	v1_1_99_902:1.1.1.1
	xorg:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2014.05.02.19.27.50;	author matthieu;	state Exp;
branches;
next	1.11;

1.11
date	2012.06.10.13.21.31;	author matthieu;	state Exp;
branches;
next	1.10;

1.10
date	2011.11.05.13.32.57;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.27.19.02.37;	author matthieu;	state Exp;
branches;
next	1.8;

1.8
date	2009.09.06.19.44.37;	author matthieu;	state Exp;
branches;
next	1.7;

1.7
date	2009.01.12.20.17.47;	author matthieu;	state Exp;
branches;
next	1.6;

1.6
date	2008.11.02.15.26.33;	author matthieu;	state Exp;
branches;
next	1.5;

1.5
date	2007.12.13.21.48.03;	author matthieu;	state Exp;
branches;
next	1.4;

1.4
date	2007.11.24.19.04.06;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.16.20.59.16;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.28.20.29.32;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.26.18.16.08;	author matthieu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.26.18.16.08;	author matthieu;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2006.12.16.20.21.26;	author matthieu;	state Exp;
branches;
next	1.1.1.3;

1.1.1.3
date	2007.11.24.17.57.09;	author matthieu;	state Exp;
branches;
next	1.1.1.4;

1.1.1.4
date	2007.12.13.21.07.31;	author matthieu;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Update to xserver 1.15.1.

Tested by at least ajacoutot@@, dcoppa@@ & jasper@@
@
text
@noinst_LTLIBRARIES = libos.la

AM_CFLAGS = $(DIX_CFLAGS) $(SHA1_CFLAGS)

SECURERPC_SRCS = rpcauth.c
XDMCP_SRCS = xdmcp.c
PRIVSEP_SRCS = privsep.c
XORG_SRCS = log.c
BUSFAULT_SRCS = busfault.c

libos_la_SOURCES = 	\
	WaitFor.c	\
	access.c	\
	auth.c		\
	backtrace.c	\
	client.c	\
	connection.c	\
	io.c		\
	mitauth.c	\
	oscolor.c	\
	osdep.h		\
	osinit.c	\
	utils.c		\
	xdmauth.c	\
	xsha1.c		\
	xstrans.c	\
	xprintf.c	\
	$(XORG_SRCS)

libos_la_LIBADD = @@SHA1_LIBS@@ $(DLOPEN_LIBS) $(LTLIBOBJS)

if SECURE_RPC
libos_la_SOURCES += $(SECURERPC_SRCS)
endif

if XDMCP
libos_la_SOURCES += $(XDMCP_SRCS)
endif

if HAVE_LIBUNWIND
AM_CFLAGS += $(LIBUNWIND_CFLAGS)
libos_la_LIBADD += $(LIBUNWIND_LIBS)
endif

if BUSFAULT
libos_la_SOURCES += $(BUSFAULT_SRCS)
endif

if X_PRIVSEP
libos_la_SOURCES += $(PRIVSEP_SRCS)
endif

EXTRA_DIST = $(SECURERPC_SRCS) $(XDMCP_SRCS)

if SPECIAL_DTRACE_OBJECTS
# Generate dtrace object code for probes in libos & libdix
dtrace.o: $(top_srcdir)/dix/Xserver.d $(am_libos_la_OBJECTS)
	$(AM_V_GEN)$(DTRACE) -G -C -o $@@ -s $(top_srcdir)/dix/Xserver.d .libs/*.o ../dix/.libs/*.o

noinst_PROGRAMS = os.O

os_O_SOURCES =
os.O: dtrace.o $(am_libos_la_OBJECTS)
	$(AM_V_GEN)ld -r -o $@@ dtrace.o .libs/*.o
endif
@


1.11
log
@Update to xserver 1.12.2. tested by naddy@@, krw@@, mpi@@.
@
text
@d9 1
d38 9
@


1.10
log
@Update to xserver 1.11.2
@
text
@a6 1
STRLCAT_SRCS = strlcat.c strlcpy.c
a22 2
	strcasecmp.c	\
	strcasestr.c	\
d29 1
a29 1
libos_la_LIBADD = @@SHA1_LIBS@@ $(DLOPEN_LIBS)
a38 4
if NEED_STRLCAT
libos_la_SOURCES += $(STRLCAT_SRCS)
endif

d43 1
a43 2
EXTRA_DIST = $(SECURERPC_SRCS) $(INTERNALMALLOC_SRCS) \
     $(XDMCP_SRCS) $(STRLCAT_SRCS)
@


1.9
log
@Update to xserver 1.8. Tested by many. Ok oga@@, todd@@.
@
text
@d1 1
a1 1
noinst_LTLIBRARIES = libos.la liblog.la
d9 1
a9 9

# Build a convenience library liblog.la that will be added into
# libos.la. The split is done so that log.c can be built with
# different compiler options.
liblog_la_SOURCES = log.c
# Add flags needed for proper backtraces of functions marked with GCC
# __attribute__((noreturn)). Currently those flags are needed for
# FatalError and AbortServer in log.c.
liblog_la_CFLAGS = $(AM_CFLAGS) $(ARM_BACKTRACE_CFLAGS)
d16 1
d29 4
a32 2
	xprintf.c
libos_la_LIBADD = @@SHA1_LIBS@@ $(DLOPEN_LIBS) liblog.la
d60 1
a63 5

os.c:
	touch $@@

CLEANFILES = os.c
@


1.8
log
@update to xserver 1.6.4rc1. Tested by many, ok oga@@.
@
text
@d1 1
a1 1
noinst_LTLIBRARIES = libos.la
d3 1
a3 1
AM_CFLAGS = $(DIX_CFLAGS)
a7 1
XORG_SRCS = log.c
d10 9
d34 1
d36 2
a37 2
	xprintf.c	\
	$(XORG_SRCS)
d58 1
a58 1
if XSERVER_DTRACE
d61 1
a61 1
	$(DTRACE) -G -C -o $@@ -s $(top_srcdir)/dix/Xserver.d .libs/*.o ../dix/.libs/*.o
d66 1
a66 1
	ld -r -o $@@ dtrace.o .libs/*.o
@


1.7
log
@Update to xserver 1.5.3 + latests commits on server-1.5-branch.
tested by stsp@@, david@@, form@@, ckuethe@@, oga@@. thanks.
@
text
@a19 1
	oscolor.h	\
d23 2
@


1.6
log
@xserver 1.5.2. tested by ckuethe@@, oga@@, and others.
@
text
@d15 1
@


1.5
log
@Merge xserver 1.4.0.90. This includes fixes for some of the regressions
introduced by xserver 1.4, such as the keyboad caps/num-lock leds updates.
Tested by many.
@
text
@d1 1
a1 1
noinst_LTLIBRARIES = libos.la libcwrapper.la
a4 3
# FIXME: Add support for these in configure.ac
INTERNALMALLOC_SRCS = xalloc.c

a5 1
XCSECURITY_SRCS = secauth.c
a31 4
if XCSECURITY
libos_la_SOURCES += $(XCSECURITY_SRCS)
endif

a43 7
libcwrapper_la_SOURCES = \
	$(top_srcdir)/hw/xfree86/os-support/shared/libc_wrapper.c
libcwrapper_la_CFLAGS = \
	-DSELF_CONTAINED_WRAPPER \
	-I$(top_srcdir)/hw/xfree86/os-support \
	$(AM_CFLAGS)

d45 1
a45 1
     $(XCSECURITY_SRCS) $(XDMCP_SRCS) $(STRLCAT_SRCS)
@


1.4
log
@merge xserver 1.4, 1st pass
@
text
@a5 1
SECURERPC_SRCS = rpcauth.c
d8 1
d31 4
@


1.3
log
@- merge xserver 1.1.99.903
- regen generated files
@
text
@d6 8
a13 9
K5AUTH_SOURCES = k5auth.c
SECURERPC_SOURCES = rpcauth.c
INTERNALMALLOC_SOURCES = xalloc.c

XCSECURITY_SOURCES = secauth.c
XDMCP_SOURCES = xdmcp.c
STRLCAT_SOURCES = strlcat.c strlcpy.c
XORG_SOURCES = log.c
PRIVSEP_SOURCES = privsep.c
d30 1
a30 1
	$(XORG_SOURCES)
d33 1
a33 1
libos_la_SOURCES += $(XCSECURITY_SOURCES)
d37 1
a37 1
libos_la_SOURCES += $(XDMCP_SOURCES)
d41 1
a41 1
libos_la_SOURCES += $(STRLCAT_SOURCES)
d45 1
a45 1
libos_la_SOURCES += $(PRIVSEP_SOURCES)
d55 18
a72 2
EXTRA_DIST = $(K5AUTH_SOURCES) $(SECURERPC_SOURCES) $(INTERNALMALLOC_SOURCES) \
     $(XCSECURITY_SOURCES) $(XDMCP_SOURCES) $(STRLCAT_SOURCES)
@


1.2
log
@OpenBSD local modifications:
- privilege separation
- some snprintf/strlc{at,py} conversions
- support for more architectures
- signal handler fixes
- default mouse wheel support in config tools
- sunmouse protocol
@
text
@d57 1
a57 1
     $(XCSECURITY_SOURCES) $(XDMCP_SOURCES) $(LBX_SOURCES) $(STRLCAT_SOURCES)
@


1.1
log
@Initial revision
@
text
@d14 1
d43 4
@


1.1.1.1
log
@Importing xserver from X.Org 7.2RC2
@
text
@@


1.1.1.2
log
@xserver 1.1.99.903 from X.Org 7.2RC3
@
text
@d52 1
a52 1
     $(XCSECURITY_SOURCES) $(XDMCP_SOURCES) $(STRLCAT_SOURCES)
@


1.1.1.3
log
@xserver 1.4
@
text
@d6 8
a13 7
SECURERPC_SRCS = rpcauth.c
INTERNALMALLOC_SRCS = xalloc.c

XCSECURITY_SRCS = secauth.c
XDMCP_SRCS = xdmcp.c
STRLCAT_SRCS = strlcat.c strlcpy.c
XORG_SRCS = log.c
d30 1
a30 1
	$(XORG_SRCS)
d33 1
a33 1
libos_la_SOURCES += $(XCSECURITY_SRCS)
d37 1
a37 1
libos_la_SOURCES += $(XDMCP_SRCS)
d41 1
a41 1
libos_la_SOURCES += $(STRLCAT_SRCS)
d51 2
a52 18
EXTRA_DIST = $(SECURERPC_SRCS) $(INTERNALMALLOC_SRCS) \
     $(XCSECURITY_SRCS) $(XDMCP_SRCS) $(STRLCAT_SRCS)

if XSERVER_DTRACE
# Generate dtrace object code for probes in libos & libdix
dtrace.o: $(top_srcdir)/dix/Xserver.d $(am_libos_la_OBJECTS)
	$(DTRACE) -G -C -o $@@ -s $(top_srcdir)/dix/Xserver.d .libs/*.o ../dix/.libs/*.o

noinst_PROGRAMS = os.O

os.O: dtrace.o $(am_libos_la_OBJECTS)
	ld -r -o $@@ dtrace.o .libs/*.o
endif

os.c:
	touch $@@

CLEANFILES = os.c
@


1.1.1.4
log
@xserver 1.4.0.90
@
text
@d6 1
a8 1
SECURERPC_SRCS = rpcauth.c
a29 4

if SECURE_RPC
libos_la_SOURCES += $(SECURERPC_SRCS)
endif
@


