head	1.5;
access;
symbols
	OPENBSD_4_0:1.4.0.30
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.28
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.26
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.24
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.22
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.20
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.18
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.16
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.14
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.12
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.10
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.4
	OPENBSD_2_9:1.4.0.8
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.6
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.4
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-Sep-13:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2006.10.18.13.52.34;	author sturm;	state dead;
branches;
next	1.4;

1.4
date	99.06.20.21.05.40;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.01.16.04.26.07;	author angelos;	state dead;
branches;
next	1.2;

1.2
date	99.01.16.04.25.08;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	98.09.14.02.48.35;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.09.14.02.48.35;	author marc;	state Exp;
branches;
next	;


desc
@@


1.5
log
@as discussed on icb, remove too old to be of much use and unmaintained
mbone category
@
text
@--- blowfish/Makefile.orig	Sat Jun 19 22:02:15 1999
+++ blowfish/Makefile	Sat Jun 19 22:04:25 1999
@@@@ -17,14 +17,14 @@@@
 #OPTS=		 # use for pentium pro, Alpha and HP
 
 MAKE=make -f Makefile
-CC=cc
+#CC=cc
 CFLAG= -O
 
 #CC=gcc
 #CFLAG= -O4 -funroll-loops -fomit-frame-pointer
 #CFLAG= -O3 -fomit-frame-pointer
 
-CFLAGS=$(OPTS) $(CFLAG)
+#CFLAGS=$(OPTS) $(CFLAG)
 CPP=$(CC) -E
 AS=as
 
@


1.4
log
@upgrade to speak freely 7.0
@
text
@@


1.3
log
@Re-sequence patch files.
@
text
@d1 19
a19 123
*** soundbyte.c.orig	Fri Jan 15 23:13:23 1999
--- soundbyte.c	Fri Jan 15 23:17:36 1999
***************
*** 33,39 ****
  #else /* FreeBSD / Linux */
  #ifdef LINUX
  #include <linux/soundcard.h>
! #else
  #include <machine/soundcard.h>
  #endif
  #define AUDIO_MIN_GAIN 0
--- 33,41 ----
  #else /* FreeBSD / Linux */
  #ifdef LINUX
  #include <linux/soundcard.h>
! #elif __OpenBSD__
! #include <soundcard.h>
! #else 
  #include <machine/soundcard.h>
  #endif
  #define AUDIO_MIN_GAIN 0
***************
*** 62,67 ****
--- 64,77 ----
  
  #define MAX_GAIN	100
  
+ void soundplayvol();
+ 
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+ static int oldvol = -1;
+ #endif
+ #endif
+ 
  struct sound_buf {
      struct sound_buf *snext;	      /* Next sound buffer */
      int sblen;			      /* Length of this sound buffer */
***************
*** 157,162 ****
--- 167,187 ----
  	    }
  	    ioctl(Audio_fd, AUDIO_SETINFO, &Audio_info);
  #endif
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+           if (iomode == O_RDONLY) {
+               if (oldvol == -1)
+                   oldvol = soundgetvol();
+               soundplayvol(0);
+           } else if (   iomode == O_WRONLY
+                      && oldvol != -1
+                     ) {
+               if (soundgetvol() == 0)
+                   soundplayvol(oldvol);
+               oldvol = -1;
+           }
+ #endif
+ #endif
  	    return TRUE;
  	}
  	if (errno != EINTR) {
***************
*** 172,177 ****
--- 197,211 ----
  void soundterm()
  {
  	if (audiof >= 0) {
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+           if (oldvol != -1) {
+               if (soundgetvol() == 0)
+                   soundplayvol(oldvol);
+               oldvol = -1;    
+           }  
+ #endif
+ #endif
  	    if (close(audiof) < 0) {
                  perror("closing audio device");
  	    }
***************
*** 222,231 ****
  
     arg	 = (value << 8) | value;
  
!    if (ioctl(Audio_fd, MIXER_WRITE(SOUND_MIXER_PCM), &arg) < 0)
!         perror("SOUND_MIXER_PCM");
  #endif
  }
  
  /*  SOUNDRECGAIN  --  Set recording gain from 0 (minimum) to 100 (maximum).  */
  
--- 256,285 ----
  
     arg	 = (value << 8) | value;
  
!    if (ioctl(Audio_fd, SOUND_MIXER_WRITE_PCM, &arg) < 0)
!         perror("SOUND_MIXER_WRITE_PCM");
  #endif
  }
+ 
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+ 
+ /*  SOUNDGETVOL -- Get current playback volume. */
+ 
+ int soundgetvol()
+ {
+    int arg, v1, v2;
+ 
+    if (ioctl(Audio_fd, SOUND_MIXER_READ_PCM, &arg) < 0) {
+       perror("SOUND_MIXER_READ_PCM");
+       return -1;
+    }
+    v1 = arg & 0xFF;
+    v2 = (arg >> 8) & 0xFF;
+    return (v1 > v2) ? v1 : v2;
+ }
+ #endif
+ #endif
  
  /*  SOUNDRECGAIN  --  Set recording gain from 0 (minimum) to 100 (maximum).  */
  
@


1.2
log
@Updaet to version 6.1e
@
text
@@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
*** soundbyte.c.orig	Wed Mar  5 15:04:49 1997
--- soundbyte.c	Wed Sep  9 19:21:21 1998
d4 6
a9 9
*** 15,21 ****
--- 15,23 ----
  #ifdef Solaris
  #include <sys/filio.h>
  #else
+ #ifndef __FreeBSD__
  #include <sys/dir.h>
+ #endif
  #include <sys/file.h>
d11 2
a12 4
  
***************
*** 33,38 ****
--- 35,42 ----
d16 3
a18 3
+ #elif __OpenBSD__
+ #include <soundcard.h>
  #else
d21 1
d23 4
a26 4
*** 72,77 ****
--- 76,83 ----
  static unsigned char *playbuf= NULL;  /* Current play pointer */
  static int squelch = 0; 	      /* Squelch value */
a29 9
  /* Convert local gain into device parameters */
  
  static unsigned scale_gain(g)
***************
*** 96,101 ****
--- 102,112 ----
  }
  #endif
  
d35 4
a38 3
  
  /*  SOUNDINIT  --  Open the sound peripheral and initialise for
  		   access.  Return TRUE if successful, FALSE
d40 2
a41 2
*** 145,150 ****
--- 156,176 ----
d47 11
a57 11
+ 	    if (iomode == O_RDONLY) {
+ 		if (oldvol == -1)
+ 		    oldvol = soundgetvol();
+ 		soundplayvol(0);
+ 	    } else if (   iomode == O_WRONLY
+ 		       && oldvol != -1
+ 		      ) {
+ 		if (soundgetvol() == 0)
+ 		    soundplayvol(oldvol);
+ 		oldvol = -1;
+ 	    }
d64 2
a65 2
*** 160,165 ****
--- 186,200 ----
d71 5
a75 5
+ 	    if (oldvol != -1) {
+ 		if (soundgetvol() == 0)
+ 		    soundplayvol(oldvol);
+ 		oldvol = -1;
+ 	    }
d79 1
a79 1
  		perror("closing audio device");
d82 1
a82 1
*** 210,219 ****
d87 1
a87 1
! 	perror("SOUND_MIXER_PCM");
d93 1
a93 1
--- 245,274 ----
d98 1
a98 1
! 	perror("SOUND_MIXER_WRITE_PCM");
@


1.1.1.1
log
@speak_freely port from angelos@@openbsd.org
@
text
@@
