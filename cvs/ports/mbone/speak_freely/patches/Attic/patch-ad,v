head	1.5;
access;
symbols
	OPENBSD_4_0:1.4.0.30
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.28
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.26
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.24
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.22
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.20
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.18
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.16
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.14
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.12
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.4.0.10
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.4
	OPENBSD_2_9:1.4.0.8
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.6
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.4.0.4
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.4.0.2
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-Sep-13:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2006.10.18.13.52.34;	author sturm;	state dead;
branches;
next	1.4;

1.4
date	99.06.20.21.05.40;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.01.16.04.26.07;	author angelos;	state Exp;
branches;
next	1.2;

1.2
date	99.01.16.04.25.08;	author angelos;	state dead;
branches;
next	1.1;

1.1
date	98.09.14.02.48.35;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.09.14.02.48.35;	author marc;	state Exp;
branches;
next	;


desc
@@


1.5
log
@as discussed on icb, remove too old to be of much use and unmaintained
mbone category
@
text
@--- md5/Makefile.orig	Sat Jun 19 22:01:01 1999
+++ md5/Makefile	Sat Jun 19 22:01:05 1999
@@@@ -1,4 +1,4 @@@@
-CFLAGS=-O
+#CFLAGS=-O
 
 all:	md5.o
 
@


1.4
log
@upgrade to speak freely 7.0
@
text
@@


1.3
log
@Re-sequence patch files.
@
text
@d1 8
a8 123
*** soundbyte.c.orig	Fri Jan 15 23:13:23 1999
--- soundbyte.c	Fri Jan 15 23:17:36 1999
***************
*** 33,39 ****
  #else /* FreeBSD / Linux */
  #ifdef LINUX
  #include <linux/soundcard.h>
! #else
  #include <machine/soundcard.h>
  #endif
  #define AUDIO_MIN_GAIN 0
--- 33,41 ----
  #else /* FreeBSD / Linux */
  #ifdef LINUX
  #include <linux/soundcard.h>
! #elif __OpenBSD__
! #include <soundcard.h>
! #else 
  #include <machine/soundcard.h>
  #endif
  #define AUDIO_MIN_GAIN 0
***************
*** 62,67 ****
--- 64,77 ----
  
  #define MAX_GAIN	100
  
+ void soundplayvol();
+ 
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+ static int oldvol = -1;
+ #endif
+ #endif
+ 
  struct sound_buf {
      struct sound_buf *snext;	      /* Next sound buffer */
      int sblen;			      /* Length of this sound buffer */
***************
*** 157,162 ****
--- 167,187 ----
  	    }
  	    ioctl(Audio_fd, AUDIO_SETINFO, &Audio_info);
  #endif
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+           if (iomode == O_RDONLY) {
+               if (oldvol == -1)
+                   oldvol = soundgetvol();
+               soundplayvol(0);
+           } else if (   iomode == O_WRONLY
+                      && oldvol != -1
+                     ) {
+               if (soundgetvol() == 0)
+                   soundplayvol(oldvol);
+               oldvol = -1;
+           }
+ #endif
+ #endif
  	    return TRUE;
  	}
  	if (errno != EINTR) {
***************
*** 172,177 ****
--- 197,211 ----
  void soundterm()
  {
  	if (audiof >= 0) {
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+           if (oldvol != -1) {
+               if (soundgetvol() == 0)
+                   soundplayvol(oldvol);
+               oldvol = -1;    
+           }  
+ #endif
+ #endif
  	    if (close(audiof) < 0) {
                  perror("closing audio device");
  	    }
***************
*** 222,231 ****
  
     arg	 = (value << 8) | value;
  
!    if (ioctl(Audio_fd, MIXER_WRITE(SOUND_MIXER_PCM), &arg) < 0)
!         perror("SOUND_MIXER_PCM");
  #endif
  }
  
  /*  SOUNDRECGAIN  --  Set recording gain from 0 (minimum) to 100 (maximum).  */
  
--- 256,285 ----
  
     arg	 = (value << 8) | value;
  
!    if (ioctl(Audio_fd, SOUND_MIXER_WRITE_PCM, &arg) < 0)
!         perror("SOUND_MIXER_WRITE_PCM");
  #endif
  }
+ 
+ #ifndef sun
+ #ifdef  HALF_DUPLEX
+ 
+ /*  SOUNDGETVOL -- Get current playback volume. */
+ 
+ int soundgetvol()
+ {
+    int arg, v1, v2;
+ 
+    if (ioctl(Audio_fd, SOUND_MIXER_READ_PCM, &arg) < 0) {
+       perror("SOUND_MIXER_READ_PCM");
+       return -1;
+    }
+    v1 = arg & 0xFF;
+    v2 = (arg >> 8) & 0xFF;
+    return (v1 > v2) ? v1 : v2;
+ }
+ #endif
+ #endif
  
  /*  SOUNDRECGAIN  --  Set recording gain from 0 (minimum) to 100 (maximum).  */
  
@


1.2
log
@Updaet to version 6.1e
@
text
@d1 2
a2 2
*** adpcm/Makefile.bak	Fri Sep  1 14:58:19 1995
--- adpcm/Makefile	Fri Oct 25 18:55:46 1996
d4 18
a21 18
*** 1,7 ****
  #
  # Makefile for adpcm and test programs
  # -------------------
! CFLAGS=-O -I..
  # May need this on a sun:
  #CFLAGS=-O -I/usr/demo/SOUND
  
--- 1,7 ----
  #
  # Makefile for adpcm and test programs
  # -------------------
! CFLAGS+=-I..
  # May need this on a sun:
  #CFLAGS=-O -I/usr/demo/SOUND
  
*** des/Makefile.bak	Thu Nov  2 22:38:58 1995
--- des/Makefile	Fri Oct 25 18:55:46 1996
d23 2
a24 2
*** 1,4 ****
! CFLAGS=-O
d26 1
a26 1
  all:	des.o
d28 35
a62 7
--- 1,4 ----
! #CFLAGS=-O
  
  all:	des.o
  
*** idea/Makefile.bak	Wed Aug  2 22:39:19 1995
--- idea/Makefile	Fri Oct 25 18:55:46 1996
d64 17
a80 20
*** 6,13 ****
  
  #   Compiler flags
  
! CC = cc
! CFLAGS = -O
  
  all:	idea.o
  
--- 6,13 ----
  
  #   Compiler flags
  
! #CC = cc
! #CFLAGS = -O
  
  all:	idea.o
  
*** libdes/Makefile.bak	Wed Apr 17 23:49:33 1996
--- libdes/Makefile	Fri Oct 25 18:55:46 1996
d82 1
a82 6
*** 30,37 ****
  
  OPTS= $(OPTS0) $(OPTS1) $(OPTS2)
  
! CC=cc
! CFLAGS= -O $(OPTS) $(CFLAG)
d84 1
a84 3
  #CC=gcc
  #CFLAGS= -O3 -fomit-frame-pointer $(OPTS) $(CFLAG)
--- 30,37 ----
d86 35
a120 1
  OPTS= $(OPTS0) $(OPTS1) $(OPTS2)
d122 1
a122 2
! #CC=cc
! CFLAGS+= $(OPTS) $(CFLAG)
a123 2
  #CC=gcc
  #CFLAGS= -O3 -fomit-frame-pointer $(OPTS) $(CFLAG)
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@speak_freely port from angelos@@openbsd.org
@
text
@@
