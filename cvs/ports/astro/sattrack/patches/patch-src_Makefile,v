head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.38
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.36
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.32
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.34
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.30
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.28
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.26
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.24
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.22
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.20
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.18
	OPENBSD_5_0:1.1.0.16
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.14
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.12
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.10
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.8
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.6
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.4
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2007.12.18.09.08.24;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.1
log
@- use a V version variable
- tweak WRKDIST and WRKSRC and regen patches accordingly
- simplify substitution in pre-configure
no package change
@
text
@$OpenBSD$
--- src/Makefile.orig	Tue Jan 14 00:51:01 1997
+++ src/Makefile	Tue Dec 18 09:53:05 2007
@@@@ -113,10 +113,10 @@@@
 
 # Sun-4         (SPARCstation 5 or 10 with Solaris 2.x, using 'gcc' only)
 #
-CPU		= Sun-4/Solaris
-CC_CMACH	= -O3 -DSVR4 -Wall
-CC_LMACH	=
-CC		= gcc
+#CPU		= Sun-4/Solaris
+#CC_CMACH	= -O3 -DSVR4 -Wall
+#CC_LMACH	=
+#CC		= gcc
 
 # Apollo 700    (HP Apollo 9000 Series 700 with HPUX)
 #
@@@@ -228,7 +228,7 @@@@ CC		= gcc
 #CC_CUSR	= -DREVERSEVIDEO -DXWINDOW
 #CC_CUSR	= -DHOMEDIR -DREVERSEVIDEO -DXWINDOW
 
-CC_CUSR		= -DHOMEDIR -DREVERSEVIDEO -DSUNTRANSITS -DXWINDOW 
+CC_CUSR		= -DREVERSEVIDEO -DSUNTRANSITS -DXWINDOW 
 
 #
 #-------------------------------------------------------------------------------
@@@@ -245,7 +245,8 @@@@ CC_CUSR		= -DHOMEDIR -DREVERSEVIDEO -DSUNTRANSITS -DXW
 # but should be accessible by other users as well.
 #
 
-#HOME		= /home/manfred
+HOME		= ../..
+CC_CUSR		+= -DSATDIR=\"$(PREFIX)/lib\"
 
 #
 #-------------------------------------------------------------------------------
@@@@ -253,9 +254,13 @@@@ CC_CUSR		= -DHOMEDIR -DREVERSEVIDEO -DSUNTRANSITS -DXW
 # SATTRACK SUB-DIRECTORIES
 #
 
-SRC		= $(HOME)/SatTrack/src
-OBJ    		= $(HOME)/SatTrack/obj
-RUN     	= $(HOME)/SatTrack/run
+SRC		= $(HOME)/SatTrack-3.1.6/src
+OBJ    		= $(HOME)/SatTrack-3.1.6/obj
+RUN     	= $(HOME)/SatTrack-3.1.6/run
+DATA    	= $(HOME)/SatTrack-3.1.6/data
+PRED    	= $(HOME)/SatTrack-3.1.6/pred
+TLE     	= $(HOME)/SatTrack-3.1.6/tle
+DOC     	= $(HOME)/SatTrack-3.1.6/doc
 
 INC		= $(SRC)/include
 
@@@@ -318,13 +323,15 @@@@ CC_CISI		=
 #X11		= /usr/include
 #X11		= /usr/local/include
 #X11		= /usr/include/X11
-X11		= /usr/openwin/include
+#X11		= /usr/openwin/include
+X11		= $(X11BASE)/include
 
-LX11		= -lX11 -lXt                                           # X11R5
+#LX11		= -lX11 -lXt                                           # X11R5
 #LX11		= -lXt -lX11 -lsocket                                  # SCOV5
 #LX11		= -L/usr/openwin/lib -lX11 -lXt
 
 #LX11		= -lX11 -lXt -lICE -lSM                                # X11R6
+LX11		= -L$(X11BASE)/lib -lX11 -lXt -lICE -lSM
 #LX11		= -L/usr/openwin/lib -lX11 -lXt -lICE -lSM
 
 #CC_CXINC	=
@@@@ -355,6 +362,30 @@@@ clean:
 	cd $(RUN) ; \
 	/bin/rm -f fixchecksum makeamsat makepassesx maketles maketlex \
 	satfilter sattrack xdemo
+
+install:
+	-@@mkdir -p $(PREFIX)/lib/SatTrack/data
+	cd $(DATA) ; find . -print | cpio -pudm $(PREFIX)/lib/SatTrack/data
+	-@@mkdir $(PREFIX)/lib/SatTrack/pred
+	cd $(PRED) ; find . -print | cpio -pudm $(PREFIX)/lib/SatTrack/pred
+	-@@mkdir $(PREFIX)/lib/SatTrack/tle
+	cd $(TLE) ; find . -print | cpio -pudm $(PREFIX)/lib/SatTrack/tle
+	-@@mkdir -p $(PREFIX)/share/doc/SatTrack
+	cd $(DOC) ; find . -print | cpio -pudm $(PREFIX)/share/doc/SatTrack
+	-@@mkdir -p $(PREFIX)/bin
+	install -c -s -m 755 $(RUN)/fixchecksum $(PREFIX)/bin/fixchecksum
+	install -c -m 755 $(RUN)/getsts $(PREFIX)/bin/getsts
+	install -c -m 755 $(RUN)/gettle $(PREFIX)/bin/gettle
+	install -c -s -m 755 $(RUN)/makeamsat $(PREFIX)/bin/makeamsat
+	install -c -s -m 755 $(RUN)/makepassesx $(PREFIX)/bin/makepassesx
+	install -c -s -m 755 $(RUN)/maketles $(PREFIX)/bin/maketles
+	install -c -s -m 755 $(RUN)/maketlex $(PREFIX)/bin/maketlex
+	install -c -m 755 $(RUN)/passes $(PREFIX)/bin/passes
+	install -c -m 755 $(RUN)/passesx $(PREFIX)/bin/passesx
+	install -c -s -m 755 $(RUN)/satfilter $(PREFIX)/bin/satfilter
+	install -c -s -m 755 $(RUN)/sattrack $(PREFIX)/bin/sattrack
+	install -c -m 755 $(RUN)/transits $(PREFIX)/bin/transits
+	install -c -s -m 755 $(RUN)/xdemo $(PREFIX)/bin/xsattrackdemo
 
 #
 #-------------------------------------------------------------------------------
@
