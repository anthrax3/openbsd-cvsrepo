head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.16
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.12
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.14
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.10
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.8
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.12
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	ajacoutot_20070716:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2012.08.19.22.30.37;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.20.10.35.20;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.16.17.39.21;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.16.17.39.21;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@RCS id cleanup; also add OpenBSD RCS Id where missing...
@
text
@$OpenBSD: patch-src_celutil_unixdirectory_cpp,v 1.2 2009/07/20 10:35:20 ajacoutot Exp $
--- src/celutil/unixdirectory.cpp.orig	Mon Jun 22 17:44:24 2009
+++ src/celutil/unixdirectory.cpp	Mon Jul 20 11:55:18 2009
@@@@ -7,11 +7,19 @@@@
 // as published by the Free Software Foundation; either version 2
 // of the License, or (at your option) any later version.
 
+#if defined(__OpenBSD__)
+#define NO_WORDEXP
+#endif
+
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <unistd.h>
 #include <dirent.h>
+#ifdef NO_WORDEXP
+#include <glob.h>
+#else
 #include <wordexp.h>
+#endif
 #include "directory.h"
 
 using namespace std;
@@@@ -107,6 +115,19 @@@@ bool IsDirectory(const std::string& filename)
 
 std::string WordExp(const std::string& filename) 
 {
+#ifdef NO_WORDEXP
+    glob_t g;
+    std::string expanded;
+    glob(filename.c_str(), GLOB_NOSORT | GLOB_TILDE, NULL, &g);
+    if (g.gl_matchc != 1) {
+        globfree(&g);
+        return filename;
+    } else {
+        expanded = g.gl_pathv[0];
+        globfree(&g);
+        return expanded;
+    }
+#else
 #ifndef WORDEXP_PROBLEM   
     wordexp_t result;
     std::string expanded;
@@@@ -133,4 +154,5 @@@@ std::string WordExp(const std::string& filename) 
     std::string expanded = filename;
 #endif
     return expanded;
+#endif
 }
@


1.2
log
@Major update to celestia-1.6.0.
Complete changelog can be found here:
    http://sourceforge.net/project/shownotes.php?group_id=21302&release_id=695491
@
text
@d1 1
a1 2
$OpenBSD: patch-src_celutil_unixdirectory_cpp,v 1.1.1.1 2007/07/16 17:39:21 ajacoutot Exp $
$NetBSD: patch-am,v 1.1 2006/12/12 19:31:37 joerg Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
--- src/celutil/unixdirectory.cpp.orig	Wed Jul 11 16:30:51 2007
+++ src/celutil/unixdirectory.cpp	Wed Jul 11 16:33:05 2007
d25 1
a25 2
@@@@ -98,6 +106,19 @@@@ bool IsDirectory(const std::string& filename)
 }
d27 2
a28 1
 std::string WordExp(const std::string& filename) {
d42 1
d45 3
a47 4
 
@@@@ -121,4 +142,5 @@@@ std::string WordExp(const std::string& filename) {
     wordfree(&result);
 
@


1.1.1.1
log
@Import celestia-1.4.1

Unlike most planetarium software, Celestia doesn't confine you to the
surface of the Earth. You can travel throughout the solar system, to any
of over 100,000 stars, or even beyond the galaxy.

All movement in Celestia is seamless; the exponential zoom feature lets
you explore space across a huge range of scales, from galaxy clusters
down to spacecraft only a few meters across. A 'point-and-goto'
interface makes it simple to navigate through the universe to the object
you want to visit.

Celestia is expandable. It comes with a large catalog of stars,
galaxies, planets, moons, asteroids, comets, and spacecraft. If that's
not enough, you can download dozens of easy to install add-ons with more
objects.

Available flavors:
	lua - add Lua scripting engine (extension language support)

ok jasper@@
@
text
@@
