head	1.17;
access;
symbols
	OPENBSD_6_2:1.17.0.10
	OPENBSD_6_2_BASE:1.17
	OPENBSD_6_1:1.17.0.8
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.17.0.6
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.15.0.6
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.4
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.2
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.14.0.4
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.6
	OPENBSD_5_0:1.12.0.4
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.10.0.12
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.10
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.8
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.6
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.9.0.8
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.6
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.8.0.4
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.2
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.5.0.4
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.5.0.2
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.4.0.4
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	margarida_2002-11-21:1.1.1.1
	margarida:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2015.03.20.14.09.01;	author gonzalo;	state Exp;
branches;
next	1.16;
commitid	vMz9oDTY5Iw2ihh5;

1.16
date	2014.10.22.15.31.46;	author gonzalo;	state Exp;
branches;
next	1.15;
commitid	q5RCu0VRratgOMuU;

1.15
date	2013.03.11.11.41.29;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2012.04.24.12.37.44;	author gonzalo;	state Exp;
branches;
next	1.13;

1.13
date	2012.03.29.13.39.00;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.20.17.22.40;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.19.07.43.00;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.15.21.14.01;	author merdely;	state Exp;
branches;
next	1.9;

1.9
date	2005.09.15.16.03.08;	author jolan;	state Exp;
branches;
next	1.8;

1.8
date	2005.02.07.19.01.50;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2004.12.20.10.35.34;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2004.12.11.05.15.48;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2003.11.02.02.34.19;	author margarida;	state Exp;
branches;
next	1.4;

1.4
date	2003.02.16.19.02.19;	author margarida;	state Exp;
branches;
next	1.3;

1.3
date	2002.12.26.00.30.53;	author margarida;	state Exp;
branches;
next	1.2;

1.2
date	2002.11.24.00.29.53;	author margarida;	state Exp;
branches;
next	1.1;

1.1
date	2002.11.21.00.17.58;	author margarida;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.11.21.00.17.58;	author margarida;	state Exp;
branches;
next	;


desc
@@


1.17
log
@Update for Autossh to 1.4e
@
text
@# $OpenBSD: Makefile,v 1.16 2014/10/22 15:31:46 gonzalo Exp $

COMMENT=		SSH monitoring

DISTNAME=		autossh-1.4e
CATEGORIES=		sysutils

MASTER_SITES=		${HOMEPAGE}

HOMEPAGE=		http://www.harding.motd.ca/autossh/

MAINTAINER=		Gonzalo L. R. <gonzalo@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c

EXTRACT_SUFX=		.tgz

NO_TEST=		Yes

CONFIGURE_STYLE=	gnu dest

.include <bsd.port.mk>
@


1.16
log
@Update for Autossh to 1.4d

- call daemon() before opening any sockets. Problem discovered and
   diagnosed by Frank van der Aa when trying to start autossh at
   system init.
- don't use malloc(n * size) idiom; use calloc()

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/11 11:41:29 espie Exp $
d5 1
a5 1
DISTNAME=		autossh-1.4d
@


1.15
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/04/24 12:37:44 gonzalo Exp $
d5 1
a5 1
DISTNAME=		autossh-1.4c
a20 1
USE_GROFF=		Yes
@


1.14
log
@Update for autossh to 1.4c using autoconf infrastructure and also drop unnecessary
VERSION variable (pointed by sthen@@), now autossh use configure.

With this fixes:

- updated option string up to OpenSSH 5.6
- when using -f, set gate_time to 0; the assumption is that
  it is being used for infrastructure (i.e. in a system startup),
  has been tested, and bombing out just because the remote end is
  not up is not the desired behaviour.
- add AUTOSSH_MAXLIFETIME
- fix poll flags so not checking for writable when write done
- compile time TOUCH_PIDFILE option to touch pid file on connection test.

Maintainer drop the maintainership, so I take care of this now.

OK aja@@, okan@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/03/29 13:39:00 sthen Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d22 1
a22 1
NO_REGRESS=		Yes
@


1.13
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/20 17:22:40 espie Exp $
d5 1
a5 2
VERSION=		1.3
DISTNAME=		autossh-${VERSION}
d12 1
a12 1
MAINTAINER=		Johan Fredin <johan@@spelaroll.se>
d14 1
a14 1
# BSD 
d19 1
d24 1
a24 1
USE_GROFF =		Yes
d27 1
a27 20
SEPARATE_BUILD=		Yes

DEFS=			-D"SSH_PATH=\"/usr/bin/ssh\"" -D"VER=\"${VERSION}\""

DOCS=			README
EXAMPLES=		autossh.host rscreen

do-build:
	cd ${WRKBUILD}; \
		${CC} ${CFLAGS} ${DEFS} -c ${WRKSRC}/autossh.c -o autossh.o; \
		${CC} -o autossh autossh.o

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/autossh
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/autossh
	cd ${WRKBUILD} && ${INSTALL_PROGRAM} autossh ${PREFIX}/bin
	cd ${WRKSRC} && ${INSTALL_MAN} autossh.1 ${PREFIX}/man/man1
	cd ${WRKSRC} && ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/autossh
	cd ${WRKSRC} && ${INSTALL_DATA} ${EXAMPLES} \
			${PREFIX}/share/examples/autossh
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/19 07:43:00 espie Exp $
d27 1
a27 1
SEPARATE_BUILD=		concurrent
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/15 21:14:01 merdely Exp $
d24 1
a24 1
USE_GROFF =	Yes
@


1.10
log
@Remove surrounding quotes in COMMENT-*/PERMIT_*/IGNORE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/09/15 16:03:08 jolan Exp $
d24 1
@


1.9
log
@update to 1.3, from Johan Fredin who takes maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/02/07 19:01:50 pvalchev Exp $
d3 1
a3 1
COMMENT=		"SSH monitoring"
@


1.8
log
@remove margarida@@ from the maintainer position after a generous timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/12/20 10:35:34 alek Exp $
d5 1
a5 1
VERSION=		1.2g
d12 2
@


1.7
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/12/11 05:15:48 pvalchev Exp $
a11 2

MAINTAINER=		Margarida Sequeira <margarida@@openbsd.org>
@


1.6
log
@Update to autossh-1.2g; from Victor Sahlstedt via maintainer margarida
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/11/02 02:34:19 margarida Exp $
d20 1
@


1.5
log
@Update to version 1.2e
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/02/16 19:02:19 margarida Exp $
d5 1
a5 1
VERSION=		1.2e
@


1.4
log
@Update to version 1.2d
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/12/26 00:30:53 margarida Exp $
d5 1
a5 1
VERSION=		1.2d
@


1.3
log
@Update to version 1.2c

brad@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/11/24 00:29:53 margarida Exp $
d5 1
a5 1
VERSION=		1.2c
@


1.2
log
@Update to version 1.2b

brad@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/11/21 00:17:58 margarida Exp $
d5 1
a5 1
VERSION=		1.2b
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
VERSION=		1.2a
d15 1
a15 1
# BSD license
@


1.1.1.1
log
@add autossh port;
--
autossh is a program to start a copy of SSH and monitor it, restarting
it as necessary should it die or stop passing traffic.
The idea and the mechanism are from rstunnel (Reliable SSH Tunnel),
but implemented in C.

ok and review from brad@@
@
text
@@
