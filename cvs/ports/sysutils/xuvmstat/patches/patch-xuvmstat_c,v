head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.10
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.6
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.8
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.4
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.30
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.28
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.26
	OPENBSD_5_0:1.3.0.24
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.22
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.20
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.18
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.16
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.14
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.12
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.10
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.8
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.6
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.14
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.12
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.0.2
	OPENBSD_3_1_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2014.07.08.10.15.39;	author sthen;	state Exp;
branches;
next	1.4;
commitid	emkuJHVWVl7fPz7Q;

1.4
date	2013.05.21.19.38.08;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2005.10.13.17.22.10;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2002.08.29.01.58.57;	author wcobb;	state Exp;
branches;
next	1.1;

1.1
date	2001.11.17.00.50.19;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.5
log
@add sys/vmmeter.h / sys/sysctl.h where they will be needed
@
text
@$OpenBSD: patch-xuvmstat_c,v 1.4 2013/05/21 19:38:08 sthen Exp $
--- xuvmstat.c.orig	Fri Sep  9 14:38:48 2005
+++ xuvmstat.c	Tue Jul  8 11:13:36 2014
@@@@ -24,16 +24,15 @@@@
  * xuvmstat.c
  */
 
+#include <err.h>
 #include <errno.h>
 #include <stdio.h>
 #include <string.h>
 #include <unistd.h>
 #include <sys/param.h>
 #include <sys/errno.h>
+#include <sys/sysctl.h>
 #include <sys/time.h>
-#if (__NetBSD_Version__ < 105000000)
-#include <vm/vm.h>
-#endif
 #include <uvm/uvm_extern.h>
 #include <X11/Xlib.h>
 #include <X11/Xutil.h>
@@@@ -52,6 +51,7 @@@@ struct graph *gp_faults, *gp_traps, *gp_intrs, *gp_ctx
 
 #define WIDTH 300
 
+int
 main(argc, argv)
 
 int argc;
@@@@ -106,7 +106,7 @@@@ char **argv;
   gettimeofday(&otv, NULL);
 
   {
-    int count = 0, xfd = ConnectionNumber(xdpy.dpy), retval;
+    int xfd = ConnectionNumber(xdpy.dpy), retval;
     struct timeval now, incr, ping, timer;
     XEvent event;
    
@@@@ -154,6 +154,8 @@@@ char **argv;
 
   XFreeFont(xdpy.dpy, fnt_fixed);
   XCloseDisplay(xdpy.dpy);
+
+  return (0);
 }
 
 /*
@@@@ -214,6 +216,7 @@@@ int was_timeout;
 		  vals, colors, white);
   }
 
+#ifdef notyet
   y += 8;
   {
     static char *names[] = { "file", "anon", "exec", "free", "kernel" };
@@@@ -237,6 +240,7 @@@@ int was_timeout;
     y = draw_barbox(xdpy, win, gc, fnt_fixed, 5, 295, y, 5, cexp.npages, names,
                   vals, colors, white);
   }
+#endif
 
   y += 8;
 
@@@@ -353,8 +357,8 @@@@ int was_timeout;
       static u_long color[3];
       init = 1;
       before[0] = &oexp.swtch; after[0] = &cexp.swtch; color[0] = black;
-      before[1] = &oexp.swapins; after[1] = &cexp.swapins; color[1] = green;
-      before[2] = &oexp.swapouts; after[2] = &cexp.swapouts; color[2] = red;
+      before[1] = &oexp.pgswapin; after[1] = &cexp.pgswapin; color[1] = green;
+      before[2] = &oexp.pgswapout; after[2] = &cexp.pgswapout; color[2] = red;
       gp_ctx = create_graph(3, "SWITCH/SWAP", names, before, after, color, white);
     }  
 
@


1.4
log
@fix with updated uvm_extern.h, sync plist/distinfo while here
@
text
@d1 1
a1 1
$OpenBSD: patch-xuvmstat_c,v 1.3 2005/10/13 17:22:10 pvalchev Exp $
d3 2
a4 2
+++ xuvmstat.c	Tue May 21 20:35:56 2013
@@@@ -24,6 +24,7 @@@@
d12 1
a12 1
@@@@ -31,9 +32,6 @@@@
d15 1
d23 1
a23 1
@@@@ -52,6 +50,7 @@@@ struct graph *gp_faults, *gp_traps, *gp_intrs, *gp_ctx
d31 1
a31 1
@@@@ -106,7 +105,7 @@@@ char **argv;
d40 1
a40 1
@@@@ -154,6 +153,8 @@@@ char **argv;
d49 1
a49 1
@@@@ -214,6 +215,7 @@@@ int was_timeout;
d57 1
a57 1
@@@@ -237,6 +239,7 @@@@ int was_timeout;
d65 1
a65 1
@@@@ -353,8 +356,8 @@@@ int was_timeout;
@


1.3
log
@update to netbsd's xuvmstat-20050909 which fixes problems
with 16-bit displays
@
text
@d1 3
a3 3
$OpenBSD: patch-xuvmstat_c,v 1.2 2002/08/29 01:58:57 wcobb Exp $
--- xuvmstat.c.orig	Fri Sep  9 07:38:48 2005
+++ xuvmstat.c	Tue Oct 11 16:55:32 2005
d22 1
a22 1
@@@@ -52,6 +50,7 @@@@ struct graph *gp_faults, *gp_traps, *gp_
d63 11
@


1.2
log
@- pull in errx() prototype from <err.h>.
- main() is int.
ok pvalchev@@
@
text
@d1 3
a3 3
$OpenBSD: patch-xuvmstat_c,v 1.1 2001/11/17 00:50:19 pvalchev Exp $
--- xuvmstat.c.orig	Tue Feb 20 10:40:49 2001
+++ xuvmstat.c	Wed Aug 28 00:18:02 2002
d48 16
@


1.1
log
@unbreak: sync with -current uvm header files reorganization; 10x naddy
@
text
@d1 12
a12 4
$OpenBSD$
--- xuvmstat.c.orig	Tue Feb 20 07:40:49 2001
+++ xuvmstat.c	Fri Nov 16 17:36:24 2001
@@@@ -31,9 +31,6 @@@@
d22 26
@

