head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.14
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.12
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.8
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.10
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.2.0.8
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.6
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	landry_20110920:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2013.12.03.22.02.54;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2011.10.28.21.56.57;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2011.09.20.11.36.55;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.09.20.11.36.55;	author landry;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to BackupPC 3.3.0.
See for Changelog:
http://comments.gmane.org/gmane.comp.sysutils.backup.backuppc.devel/960
@
text
@$OpenBSD: patch-lib_BackupPC_CGI_View_pm,v 1.2 2011/10/28 21:56:57 jasper Exp $

First chunk:
Security fix for SA46615
BackupPC "num" Cross-Site Scripting Vulnerability

From http://patches.ubuntu.com/b/backuppc/backuppc_3.2.1-1ubuntu2.patch

--- lib/BackupPC/CGI/View.pm.orig	Sun Apr 14 22:43:32 2013
+++ lib/BackupPC/CGI/View.pm	Tue Dec  3 22:53:53 2013
@@@@ -46,7 +46,7 @@@@ sub action
     my $compress = 0;
     my $fh;
     my $host = $In{host};
-    my $num  = $In{num};
+    my $num  = ${EscHTML($In{num})};
     my $type = $In{type};
     my $linkHosts = 0;
     my($file, $comment);
@@@@ -89,7 +89,7 @@@@ sub action
         $file = $bpc->ConfDir() . "/hosts";
         $linkHosts = 1;
     } elsif ( $type eq "docs" ) {
-        $file = $bpc->InstallDir() . "/doc/BackupPC.html";
+        $file = $bpc->InstallDir() . "/share/doc/backuppc/BackupPC.html";
     } elsif ( $host ne "" ) {
         if ( !defined($In{num}) ) {
             # get the latest LOG file
@


1.2
log
@Security fix for SA46615
BackupPC "num" Cross-Site Scripting Vulnerability

patch taken from ubuntu
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_BackupPC_CGI_View_pm,v 1.1.1.1 2011/09/20 11:36:55 landry Exp $
d9 2
a10 2
--- lib/BackupPC/CGI/View.pm.orig	Mon Apr 25 05:31:55 2011
+++ lib/BackupPC/CGI/View.pm	Fri Oct 28 23:54:56 2011
d20 1
a20 1
@@@@ -86,7 +86,7 @@@@ sub action
@


1.1
log
@Initial revision
@
text
@d1 19
a19 3
$OpenBSD$
--- lib/BackupPC/CGI/View.pm.orig	Sat Sep 17 18:52:47 2011
+++ lib/BackupPC/CGI/View.pm	Sat Sep 17 18:53:14 2011
@


1.1.1.1
log
@Import BackupPC 3.2.1.

BackupPC is a high-performance, enterprise-grade system for backing
up Unix, WinXX, and MacOS PCs and laptops to a server's disk.
BackupPC is highly configurable and easy to install and maintain.
It is written in Perl and extracts backup data via rsync, or tar
over ssh/rsh/nfs.

With tweaks from and ok aja@@
@
text
@@
