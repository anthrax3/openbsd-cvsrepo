head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.1.1.0.6
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	jasper_20141612:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2016.04.26.13.31.25;	author jasper;	state dead;
branches;
next	1.2;
commitid	fgwEtuNzADtyo5m5;

1.2
date	2015.12.08.09.20.24;	author jasper;	state Exp;
branches;
next	1.1;
commitid	5k7GcdaSQeNOCFFt;

1.1
date	2014.12.16.18.11.02;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	PwD4RWeX2cvjAwU5;

1.1.1.1
date	2014.12.16.18.11.02;	author jasper;	state Exp;
branches;
next	;
commitid	PwD4RWeX2cvjAwU5;


desc
@@


1.3
log
@- no need to keep logstash in a subdir anymore
- update HOMEPAGE while here
@
text
@$OpenBSD: patch-bin_logstash_lib_sh,v 1.2 2015/12/08 09:20:24 jasper Exp $

Revert: 44edf5bd00c116d356acbcd21369e4cebcbae5f9
See: https://github.com/elastic/logstash/pull/4303#issuecomment-162823365

--- bin/logstash.lib.sh.orig	Mon Dec  7 18:59:31 2015
+++ bin/logstash.lib.sh	Tue Dec  8 10:15:38 2015
@@@@ -62,8 +62,7 @@@@ setup_java() {
     # Causes the JVM to dump its heap on OutOfMemory.
     JAVA_OPTS="$JAVA_OPTS -XX:+HeapDumpOnOutOfMemoryError"
     # The path to the heap dump location
-    # This variable needs to be isolated since it may contain spaces
-    HEAP_DUMP_PATH="-XX:HeapDumpPath=${LOGSTASH_HOME}/heapdump.hprof"
+    JAVA_OPTS="$JAVA_OPTS -XX:HeapDumpPath=${LOGSTASH_HOME}/heapdump.hprof"
   fi
 
   if [ "$LS_JAVA_OPTS" ] ; then
@@@@ -130,7 +129,7 @@@@ setup_vendored_jruby() {
 }
 
 setup_ruby() {
-  RUBYCMD="ruby"
+  RUBYCMD="${RUBY}"
   VENDORED_JRUBY=
 }
 
@@@@ -176,8 +175,8 @@@@ ruby_exec() {
     # $VENDORED_JRUBY is non-empty so use the vendored JRuby
 
     if [ "$DEBUG" ] ; then
-      echo "DEBUG: exec ${JRUBY_BIN} $(jruby_opts) "-J$HEAP_DUMP_PATH" $@@"
+      echo "DEBUG: exec ${JRUBY_BIN} $(jruby_opts) $@@"
     fi
-    exec "${JRUBY_BIN}" $(jruby_opts) "-J$HEAP_DUMP_PATH" "$@@"
+    exec "${JRUBY_BIN}" $(jruby_opts) "$@@"
   fi
 }
@


1.2
log
@- update to logstash-2.1.1
@
text
@d1 1
a1 1
$OpenBSD: patch-bin_logstash_lib_sh,v 1.1.1.1 2014/12/16 18:11:02 jasper Exp $
@


1.1
log
@Initial revision
@
text
@d1 18
a18 4
$OpenBSD$
--- bin/logstash.lib.sh.orig	Tue Dec 16 08:27:08 2014
+++ bin/logstash.lib.sh	Tue Dec 16 15:12:26 2014
@@@@ -82,7 +82,7 @@@@ setup_vendored_jruby() {
d27 11
@


1.1.1.1
log
@import logstash 1.5.0beta1

logstash is a tool for managing events and logs. You can use it to
collect logs, parse them, and store them for later use (like, for
searching). Speaking of searching, logstash comes with a web interface
for searching and drilling into all of your logs.

ok aja@@
@
text
@@
