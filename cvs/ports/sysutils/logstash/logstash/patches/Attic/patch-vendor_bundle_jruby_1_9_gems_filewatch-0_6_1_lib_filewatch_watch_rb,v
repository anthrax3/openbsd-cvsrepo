head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2015.05.17.10.28.36;	author jasper;	state dead;
branches;
next	1.1;
commitid	fhLDeMHfWj6G05AL;

1.1
date	2015.04.26.19.02.57;	author jasper;	state Exp;
branches;
next	;
commitid	Cp83CPsFNJPN6K2y;


desc
@@


1.2
log
@- use a dedicated _logstash user
- drop filewatch hacks by setting the right java.library.path

based on a diff from p@@tristero.se
@
text
@$OpenBSD: patch-vendor_bundle_jruby_1_9_gems_filewatch-0_6_1_lib_filewatch_watch_rb,v 1.1 2015/04/26 19:02:57 jasper Exp $

Unbreak due to NotImplementedError: stat.st_dev unsupported or native support failed to load
https://logstash.jira.com/browse/LOGSTASH-665

--- vendor/bundle/jruby/1.9/gems/filewatch-0.6.1/lib/filewatch/watch.rb.orig	Mon Mar 30 20:50:11 2015
+++ vendor/bundle/jruby/1.9/gems/filewatch-0.6.1/lib/filewatch/watch.rb	Mon Mar 30 20:50:51 2015
@@@@ -76,7 +76,7 @@@@ module FileWatch
           fileId = Winhelper.GetWindowsUniqueFileIdentifier(path)
           inode = [fileId, stat.dev_major, stat.dev_minor]
         else
-          inode = [stat.ino.to_s, stat.dev_major, stat.dev_minor]
+          inode = [stat.ino.to_s, nil, nil]
         end
 		
         if inode != @@files[path][:inode]
@@@@ -149,7 +149,7 @@@@ module FileWatch
         stat = File::Stat.new(file)
         @@files[file] = {
           :size => 0,
-          :inode => [stat.ino, stat.dev_major, stat.dev_minor],
+          :inode => [stat.ino, nil, nil],
           :create_sent => false,
         }
 		
@@@@ -157,7 +157,7 @@@@ module FileWatch
           fileId = Winhelper.GetWindowsUniqueFileIdentifier(file)
           @@files[file][:inode] = [fileId, stat.dev_major, stat.dev_minor]
         else
-          @@files[file][:inode] = [stat.ino.to_s, stat.dev_major, stat.dev_minor]
+          @@files[file][:inode] = [stat.ino.to_s, nil, nil]
         end
 		
         if initial
@


1.1
log
@- update to logstash-1.5.0-rc3 (from beta1)
@
text
@d1 1
a1 1
$OpenBSD$
@

