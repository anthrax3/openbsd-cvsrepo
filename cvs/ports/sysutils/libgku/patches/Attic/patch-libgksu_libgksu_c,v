head	1.2;
access;
symbols
	jasper_20081701:1.1.1.1 jasper:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2008.01.17.18.44.04;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2008.01.17.18.10.50;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.01.17.18.10.50;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@*sigh*
missed the 's' of 'su'

spotted by naddy@@, thanks!
@
text
@$OpenBSD: patch-libgksu_libgksu_c,v 1.1 2008/01/17 18:10:50 jasper Exp $
--- libgksu/libgksu.c.orig	Sun Jun 10 20:28:43 2007
+++ libgksu/libgksu.c	Sat Dec 15 22:12:24 2007
@@@@ -23,7 +23,12 @@@@
 #include <unistd.h>
 #include <string.h>
 #include <fcntl.h>
+#ifdef __OpenBSD__
+#include <sys/termios.h>
+#include <util.h>
+#else
 #include <pty.h>
+#endif
 #include <pwd.h>
 #include <sys/types.h>
 #include <sys/wait.h>
@@@@ -1897,7 +1902,7 @@@@ gksu_su_full (GksuContext *context,
       gchar **cmd = g_malloc (sizeof(gchar*)*7);
 
       setsid();   // make us session leader
-      cmd[i] = g_strdup ("/bin/su"); i++;
+      cmd[i] = g_strdup ("/usr/bin/su"); i++;
       if (context->login_shell)
 	{
 	  cmd[i] = g_strdup ("-"); i++;
@@@@ -1919,7 +1924,7 @@@@ gksu_su_full (GksuContext *context,
       if (execv (cmd[0], cmd) == -1)
 	{
 	  fprintf (stderr,
-		   "Unable to run /bin/su: %s",
+		   "Unable to run /usr/bin/su: %s",
 		   strerror(errno));
 	}
 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import libgksu 2.0.5

This library comes from the gksu program. It provides a simple API to
use su and sudo in programs that need to execute tasks as other user. It
provides X authentication facilities for running programs in a X
session.

ok martynas@@
@
text
@@
