head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.2
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2017.09.25.10.06.12;	author sthen;	state Exp;
branches;
next	1.4;
commitid	yZLz27tM2EaOEsmJ;

1.4
date	2016.10.12.11.56.53;	author sthen;	state Exp;
branches;
next	1.3;
commitid	YoUURC44y9ZU8X0Z;

1.3
date	2016.05.07.14.18.12;	author sthen;	state Exp;
branches;
next	1.2;
commitid	f5KuXN9xbzTcYBXx;

1.2
date	2016.02.29.23.45.32;	author sthen;	state Exp;
branches;
next	1.1;
commitid	WxYYWThv8z5U0oKP;

1.1
date	2015.05.25.07.52.40;	author yasuoka;	state Exp;
branches;
next	;
commitid	d1T8AJbfYFhzS4X5;


desc
@@


1.5
log
@avoid nested function in AC_TRY_COMPILE
@
text
@$OpenBSD: patch-configure_ac,v 1.4 2016/10/12 11:56:53 sthen Exp $

Disable the noisy warnings, it makes it hard to see the more important basic
problems (missing prototypes for internal functions, etc - lots of sloppiness)
in amongst the chaff.

Prefer libedit over libreadline.

Fix bad AC_TRY_COMPILE check.

Index: configure.ac
--- configure.ac.orig
+++ configure.ac
@@@@ -32,7 +32,7 @@@@ AC_CHECK_FUNCS([alarm gethostbyname getaddrinfo getifa
 AC_CHECK_FUNCS([memmove memset strchr strdup strerror])
 AC_CHECK_FUNCS([getpassphrase])
 
-CFLAGS="$CFLAGS -Wall -Wextra -std=gnu99 -pedantic -Wformat -Wformat-nonliteral"
+CFLAGS="$CFLAGS -std=gnu99 -Wformat"
 
 AM_PROG_LIBTOOL
 LIBTOOL="$LIBTOOL --silent"
@@@@ -570,7 +570,7 @@@@ AC_SUBST(IPMITOOL_INTF_LIB)
 if test "x$xenable_ipmishell" = "xyes"; then
 	AC_SEARCH_LIBS([tgetent], [tinfo ncurses curses readline termcap])
 	AC_SEARCH_LIBS([initscr], [ncurses curses], [have_curses=yes])
-	AC_SEARCH_LIBS([readline], [readline edit], [have_readline=yes])
+	AC_SEARCH_LIBS([readline], [edit readline], [have_readline=yes])
 	if test "x$have_curses" != "xyes" || test "x$have_readline" != "xyes"; then
 		xenable_ipmishell=no
 	fi
@@@@ -617,9 +617,7 @@@@ if test "x$xenable_file_security" != "xno"; then
 fi
 
 
-AC_TRY_COMPILE([],[
-	#include <stdio.h>
-	
+AC_TRY_COMPILE([#include <stdio.h>],[
 	struct packstruct {
 		unsigned char t0       :5;
 		unsigned char t1       :5;
@@@@ -628,14 +626,10 @@@@ AC_TRY_COMPILE([],[
 		unsigned char t4       :4;
 	} __attribute__ ((packed));
 	
-	int
-	main(int argc, char ** argv)
-	{
 	if(sizeof(struct packstruct) != 3)
 	return(1);
 	else
 	return(0);
-	}
 	],
 	[],
 	[AC_DEFINE(HAVE_PRAGMA_PACK,[1],
@


1.4
log
@update to ipmitool-1.8.18
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.3 2016/05/07 14:18:12 sthen Exp $
d9 5
a13 2
--- configure.ac.orig	Sat Oct  8 09:08:59 2016
+++ configure.ac	Wed Oct 12 12:46:02 2016
d32 26
@


1.3
log
@update to ipmitool-1.8.17
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.2 2016/02/29 23:45:32 sthen Exp $
d9 2
a10 2
--- configure.ac.orig	Fri May  6 15:51:58 2016
+++ configure.ac	Sat May  7 14:27:48 2016
d20 1
a20 1
@@@@ -564,7 +564,7 @@@@ AC_SUBST(IPMITOOL_INTF_LIB)
@


1.2
log
@update to ipmitool 1.8.16 and fix some bugs showing in compiler warnings
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.1 2015/05/25 07:52:40 yasuoka Exp $
d9 2
a10 2
--- configure.ac.orig	Fri Feb 19 21:05:13 2016
+++ configure.ac	Thu Feb 25 20:57:13 2016
d15 2
a16 2
-CFLAGS="$CFLAGS -Wall -Wextra -std=c99 -pedantic -Wformat -Wformat-nonliteral"
+CFLAGS="$CFLAGS -std=c99 -Wformat"
d20 1
a20 1
@@@@ -562,7 +562,7 @@@@ AC_SUBST(IPMITOOL_INTF_LIB)
@


1.1
log
@Make ipmitool use libedit instead of libreadline.

ok sthen
@
text
@d1 20
a20 4
$OpenBSD$
--- configure.ac.orig	Mon Nov 24 23:00:07 2014
+++ configure.ac	Mon May 25 11:53:33 2015
@@@@ -528,7 +528,7 @@@@ AC_SUBST(IPMITOOL_INTF_LIB)
@

