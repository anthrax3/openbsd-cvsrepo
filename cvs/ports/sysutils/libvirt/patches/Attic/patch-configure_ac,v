head	1.5;
access;
symbols
	jasper_20120409:1.1.1.1 jasper:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.01.17.09.19.06;	author jasper;	state dead;
branches;
next	1.4;
commitid	OEx59k9TnzpNrvAV;

1.4
date	2016.01.11.17.47.33;	author jasper;	state Exp;
branches;
next	1.3;
commitid	cpUJDv8nDQcZm87V;

1.3
date	2016.01.08.18.49.12;	author jasper;	state Exp;
branches;
next	1.2;
commitid	uKZ4JCCkBR6QwHfr;

1.2
date	2012.09.24.12.36.08;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2012.09.04.14.41.15;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.09.04.14.41.15;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to libvirt-1.3.1
@
text
@$OpenBSD: patch-configure_ac,v 1.4 2016/01/11 17:47:33 jasper Exp $

From 91b423beb72892d9d680060001244f588ef20691 Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@@openbsd.org>
Date: Fri, 8 Jan 2016 00:31:17 +0300
Subject: [PATCH] Use struct sockpeercred when available

--- configure.ac.orig	Wed Dec  2 16:14:59 2015
+++ configure.ac	Mon Jan 11 18:39:07 2016
@@@@ -389,6 +389,12 @@@@ AC_CHECK_TYPE([struct ifreq],
         #include <net/if.h>
   ]])
 
+AC_CHECK_TYPE([struct sockpeercred],
+  [AC_DEFINE([HAVE_STRUCT_SOCKPEERCRED], [1],
+    [Defined if struct sockpeercred is available])],
+  [], [[#include <sys/socket.h>
+  ]])
+
 AC_CHECK_DECLS([ETH_FLAG_TXVLAN, ETH_FLAG_NTUPLE, ETH_FLAG_RXHASH, ETH_FLAG_LRO,
                 ETHTOOL_GGSO, ETHTOOL_GGRO, ETHTOOL_GFLAGS, ETHTOOL_GFEATURES],
   [], [], [[#include <linux/ethtool.h>
@


1.4
log
@- sync to what's merged upstream
- the xdr_uint64_t parts are merged upstream, but leaving it out of CVS
  for it's a new file, automake, etc.

thanks to Roman Bogorodskiy for submitting/reviewing our patches

no pkg change
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.3 2016/01/08 18:49:12 jasper Exp $
@


1.3
log
@rework patches a bit to match what novel@@freebsd is going to submit upstream
@
text
@d1 7
a7 1
$OpenBSD$
d9 2
a10 2
+++ configure.ac	Fri Jan  8 19:34:06 2016
@@@@ -389,6 +389,13 @@@@ AC_CHECK_TYPE([struct ifreq],
d17 1
a17 2
+  [], [[#include <sys/types.h>
+        #include <sys/socket.h>
@


1.2
log
@- update to libvirt-0.10.2
* various new features and changes (http://libvirt.org/news.html)
* all submitted patches have been merged
@
text
@d1 17
a17 18
$OpenBSD: patch-configure_ac,v 1.1 2012/09/04 14:41:15 jasper Exp $
--- configure.ac.orig	Fri Aug 31 14:33:41 2012
+++ configure.ac	Tue Sep  4 14:14:09 2012
@@@@ -188,7 +188,13 @@@@ RT_LIBS=
 LIBS="$LIBS $LIB_PTHREAD -lrt"
 AC_CHECK_FUNC([clock_gettime],[
      AC_DEFINE([HAVE_CLOCK_GETTIME],[],[Defined if clock_gettime() exists in librt.so])
-     RT_LIBS=-lrt
+     case "$host" in
+       *-*-openbsd*)
+         ;;
+       *)
+         RT_LIBS=-lrt
+         ;;
+     esac
 ])
 LIBS=$old_libs
 AC_SUBST(RT_LIBS)
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import libvirt 0.10.1

Libvirt is collection of software that provides a convenient way to
manage virtual machines and other virtualization functionality, such as
storage and network interface management. These software pieces include
an API library, a daemon (libvirtd), and a command line utility (virsh).

Note that OpenBSD cannot act as a virtualization host yet, so libvirtd
is not provided in this package.
[...]

feedback/ok aja@@
@
text
@@
