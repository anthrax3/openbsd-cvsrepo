head	1.35;
access;
symbols
	OPENBSD_6_1:1.33.0.4
	OPENBSD_6_1_BASE:1.33
	OPENBSD_6_0:1.33.0.2
	OPENBSD_6_0_BASE:1.33
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.29.0.4
	OPENBSD_5_8_BASE:1.29
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.24.0.2
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.15.0.4
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	sthen_20100525:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2017.07.16.19.19.02;	author espie;	state Exp;
branches;
next	1.34;
commitid	tt0GhWK5c4uf9ILG;

1.34
date	2017.05.25.16.31.41;	author sthen;	state Exp;
branches;
next	1.33;
commitid	aUNIBrswy5JEXaHQ;

1.33
date	2016.06.03.08.11.09;	author kirby;	state Exp;
branches;
next	1.32;
commitid	Vxq5zUy12Rr83XcG;

1.32
date	2016.05.26.08.34.17;	author kirby;	state Exp;
branches;
next	1.31;
commitid	0KUa45dJOzSh7wiE;

1.31
date	2016.04.25.12.36.09;	author kirby;	state Exp;
branches;
next	1.30;
commitid	b9xfHAC5bHBYpylH;

1.30
date	2016.04.10.12.25.45;	author kirby;	state Exp;
branches;
next	1.29;
commitid	YYPbtVQRuoEbTOaT;

1.29
date	2015.07.18.22.14.40;	author kirby;	state Exp;
branches;
next	1.28;
commitid	gE8jRbKQdMwGhzGC;

1.28
date	2015.07.18.12.04.54;	author kirby;	state Exp;
branches;
next	1.27;
commitid	P8UJxRzWvGqPdRLj;

1.27
date	2015.06.18.21.52.02;	author kirby;	state Exp;
branches;
next	1.26;
commitid	ZafoYnfTT1fXjVmd;

1.26
date	2015.01.22.21.23.29;	author kirby;	state Exp;
branches;
next	1.25;
commitid	LjuHWdGPbMx5lIPS;

1.25
date	2015.01.22.11.45.49;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	IuDuTIAjfS7TvBCu;

1.24
date	2014.07.15.11.46.25;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	tW2EvkgYnlPVjk35;

1.23
date	2014.03.17.23.22.21;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2014.02.04.18.34.14;	author kirby;	state Exp;
branches;
next	1.21;

1.21
date	2014.01.24.10.48.23;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2014.01.08.20.46.18;	author kirby;	state Exp;
branches;
next	1.19;

1.19
date	2013.09.27.17.49.09;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.41.29;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2012.08.27.13.39.59;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2011.11.28.10.46.19;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.20.11.26.14;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.16.11.41.39;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2011.08.30.09.59.30;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2011.05.14.21.29.03;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.07.18.54.51;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.02.02.21.56.03;	author jakemsr;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.20.17.22.40;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.24.21.36.04;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.10.19.07.43.00;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.05.09.04.11;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.06.17.18.43.43;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.27.10.21.39;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.25.21.56.33;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.05.25.21.56.33;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.35
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.34 2017/05/25 16:31:41 sthen Exp $

COMMENT-main =		daemon for controlling APC UPSes
COMMENT-cgi =		CGI scripts for web monitoring
COMMENT-x11 =		gapcmon - GUI for apcupsd

DISTNAME =		apcupsd-3.14.14
PKGNAME-main =		${DISTNAME}
PKGNAME-cgi =		${DISTNAME:S/-/-cgi-/}
PKGNAME-x11 =		${DISTNAME:S/-/-x11-/}
REVISION =		0

CATEGORIES =		sysutils

HOMEPAGE =		http://www.apcupsd.org/

MAINTAINER =		Kirill Bychkov <kirby@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		${COMPILER_LIBCXX} c m pthread

LIB_DEPENDS-main = 	devel/libusb-compat
WANTLIB-main =		${WANTLIB} usb

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=apcupsd/}

CONFIGURE_STYLE =	gnu
USE_GMAKE =		Yes
NO_TEST =		Yes
MAKE_FLAGS =		VERBOSE=2

WEB_ROOT =		${VARBASE}/www
SUBST_VARS +=		WEB_ROOT ^BASESYSCONFDIR
SYSCONFDIR =		${BASESYSCONFDIR}/apcupsd

CONFIGURE_ARGS =	--mandir=${PREFIX}/man \
			--sbindir=${PREFIX}/sbin \
			--enable-install-distdir \
			--with-cgi-bin=${WEB_ROOT}/cgi-bin/apcupsd \
			--with-lock-dir=/var/run \
			--with-nisip=127.0.0.1 \
			--enable-modbus-usb \
			--enable-test \
			--enable-usb
CONFIGURE_ENV += 	LDFLAGS=-L${X11BASE}/lib \
			SHUTDOWN=/sbin/shutdown

PSEUDO_FLAVORS =	no_x11
FLAVOR ?=

MULTI_PACKAGES =	-main

MULTI_PACKAGES +=	-cgi
PREFIX-cgi =		${WEB_ROOT}
CONFIGURE_ARGS +=	--enable-cgi
WANTLIB-cgi =		${WANTLIB} gd
LIB_DEPENDS-cgi =	graphics/gd
RUN_DEPENDS-cgi =

.if !${FLAVOR:Mno_x11}
MULTI_PACKAGES +=	-x11
CONFIGURE_ARGS +=	--enable-gapcmon
LIB_DEPENDS-x11 =	devel/gconf2 \
			x11/gtk+2
RUN_DEPENDS-x11 =	devel/desktop-file-utils

WANTLIB-x11 += ${WANTLIB}
WANTLIB-x11 += X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB-x11 += Xrandr Xrender atk-1.0 cairo fontconfig freetype gconf-2
WANTLIB-x11 += gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gobject-2.0
WANTLIB-x11 += gthread-2.0 gtk-x11-2.0 intl pango-1.0 pangocairo-1.0
WANTLIB-x11 += pangoft2-1.0 z
.endif

FAKE_FLAGS =		sysconfdir=${TRUEPREFIX}/share/examples/apcupsd/etc

pre-configure:
	perl -pi -e 's,/etc/apcupsd,${SYSCONFDIR},g' \
		${WRKSRC}/doc/apcupsd.8 ${WRKSRC}/doc/apcaccess.8
	perl -pi -e 's,/usr/local/etc/apcupsd,${SYSCONFDIR},g' \
		${WRKSRC}/doc/apcupsd.conf.5
	perl -pi -e 's,/etc/rc.apcupsd,${PREFIX}/sbin/apcupsctl,' \
		${WRKSRC}/platforms/openbsd/README
	perl -pi -e 's,cuaa0,cua00,' ${WRKSRC}/platforms/openbsd/README

post-install:
.for i in status rpt
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/apcupsd/$i
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/apcupsd
	${INSTALL_DATA} ${WRKSRC}/examples/status/* \
		${PREFIX}/share/examples/apcupsd/status
	${INSTALL_DATA} ${WRKSRC}/examples/rpt/* \
		${PREFIX}/share/examples/apcupsd/rpt
	${INSTALL_DATA} ${WRKSRC}/c ${PREFIX}/share/doc/apcupsd/COPYRIGHT
	${INSTALL_DATA} ${WRKSRC}/COPYING ${PREFIX}/share/doc/apcupsd
	${INSTALL_DATA} ${WRKSRC}/DISCLAIMER ${PREFIX}/share/doc/apcupsd
	${INSTALL_DATA} ${WRKSRC}/platforms/openbsd/README \
		${PREFIX}/share/doc/apcupsd/README.openbsd
	${INSTALL_DATA} ${WRKSRC}/src/cgi/apcupsd.css \
		${PREFIX}/share/examples/apcupsd/etc
	${INSTALL_DATA} ${WRKSRC}/src/cgi/README \
		${WRKINST}/${WEB_ROOT}/cgi-bin/apcupsd/README
	${INSTALL_SCRIPT} ${FILESDIR}/copy-libs.sh \
		${WRKINST}/${WEB_ROOT}/cgi-bin/apcupsd/
	cd ${PREFIX}/share; chown -R root:wheel doc/apcupsd examples/apcupsd
	chmod 755 ${PREFIX}/sbin/apcupsctl

.include <bsd.port.mk>
@


1.34
log
@upstream try to avoid dynamic-linking to produce a binary that works more easily
across linux distributions; that's not really useful for us, and the way they
did it (link with cc -lsupc++) doesn't work so well with clang. just switch to
normal linking with c++. ok espie@@ kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/06/03 08:11:09 kirby Exp $
d22 1
a22 1
WANTLIB =		${LIBCXX} c m pthread
@


1.33
log
@update to apcupsd-3.14.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/05/26 08:34:17 kirby Exp $
d11 1
d22 2
d25 1
a25 1
WANTLIB-main =		c pthread usb
d58 1
a58 1
WANTLIB-cgi =		c pthread gd
d69 1
d71 4
a74 4
WANTLIB-x11 += Xrandr Xrender atk-1.0 c cairo fontconfig freetype
WANTLIB-x11 += gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB-x11 += gobject-2.0 gthread-2.0 gtk-x11-2.0 intl pango-1.0 pangocairo-1.0
WANTLIB-x11 += pangoft2-1.0 pthread z
@


1.32
log
@unbreak build after USB_GET_STRING_DESC removal.
spotted by naddy@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/04/25 12:36:09 kirby Exp $
d7 1
a7 1
DISTNAME =		apcupsd-3.14.13
a10 3
REVISION-main = 	2
REVISION-cgi =		0
REVISION-x11 =		0
d43 1
a43 2
			--enable-usb \
			--with-generic-usb
@


1.31
log
@remove MODGETTEXT_*_DEPENDS after. gettext module is gone
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/04/10 12:25:45 kirby Exp $
d11 1
a11 1
REVISION-main = 	1
d46 2
a47 1
			--enable-usb
@


1.30
log
@ - update homepage
 - remove gettext module and regen wantlib
 - bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/07/18 22:14:40 kirby Exp $
d66 2
a67 4
			x11/gtk+2 \
			${MODGETTEXT_LIB_DEPENDS}
RUN_DEPENDS-x11 =	devel/desktop-file-utils \
			${MODGETTEXT_RUN_DEPENDS}
@


1.29
log
@unbreak build for user not in operator group. spotted by ajacoutot@@, thanks
add missing LIB_DEPEND and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/07/18 12:04:54 kirby Exp $
d11 3
a13 1
REVISION-main = 	0
d17 1
a17 1
HOMEPAGE =		http://www.apcupsd.com
a23 1
MODULES =		devel/gettext
a70 1
WANTLIB-x11 += ${WANTLIB}
d74 1
a74 1
WANTLIB-x11 += gobject-2.0 gthread-2.0 gtk-x11-2.0 m pango-1.0 pangocairo-1.0
@


1.28
log
@update to apcupsd-3.14.13.
the most significatn change is added support of modbus upses.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/06/18 21:52:02 kirby Exp $
d11 1
d23 2
a24 2
LIB_DEPENDS-main =
WANTLIB-main =		c pthread
d46 2
a47 1
CONFIGURE_ENV += 	LDFLAGS=-L${X11BASE}/lib
@


1.27
log
@tell people to disable uhidev not uhid.
input and ok from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/01/22 21:23:29 kirby Exp $
d7 1
a7 3
DISTNAME =		apcupsd-3.14.11
REVISION-main =		3
REVISION-x11 =		0
d42 1
d45 1
@


1.26
log
@Add a note that some USB devices need ugen to work.
The same note was added to sysutils/nut.
All wording by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/01/22 11:45:49 ajacoutot Exp $
d8 1
a8 1
REVISION-main =		2
@


1.25
log
@Powerdown the machine when power fails.

ok kirby@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/07/15 11:46:25 ajacoutot Exp $
d8 1
a8 1
REVISION-main =		1
@


1.24
log
@powerdown is gone; new solution will make its way soon.

ok kirby@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/03/17 23:22:21 sthen Exp $
d8 1
a8 1
REVISION-main =		0
@


1.23
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/02/04 18:34:14 kirby Exp $
d8 1
@


1.22
log
@Update apcupsd to 3.14.11. This brings us support for new APC MODBUS
protocol used in the newest APC UPSes.
 - use stricter modes for scripts and data
 - drop apcupsd.conf.5 patch (patch from schwarze@@ was commited upstream)
 - use ${VARBASE} instead of hardcoded /var

Reads good to jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/01/24 10:48:23 espie Exp $
d8 1
d67 4
a70 3
WANTLIB-x11 += GL X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB-x11 += Xrandr Xrender atk-1.0 c cairo expat fontconfig freetype gconf-2
WANTLIB-x11 += gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0
d72 1
a72 2
WANTLIB-x11 += pangoft2-1.0 pixman-1 png pthread pthread-stubs xcb-render
WANTLIB-x11 += xcb-shm xcb z ${WANTLIB}
@


1.21
log
@no idea whether these actually need to be 0700, but the fix is needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/01/08 20:46:18 kirby Exp $
d7 1
a7 1
DISTNAME =		apcupsd-3.14.10
a10 3
REVISION-main =		3
REVISION-cgi =		1
REVISION-x11 =		2
d32 1
a32 1
WEB_ROOT =		/var/www
@


1.20
log
@ - split -main and -cgi packages (move apropriate configs to -cgi package)
 - switch from MESSAGEs to READMEs
 - update my e-mail
 - regen distinfo while here
with the input from espie@@ and sthen@@
OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/09/27 17:49:09 ajacoutot Exp $
d11 1
a11 1
REVISION-main =		2
@


1.19
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:41:29 espie Exp $
d11 3
a13 3
REVISION-main =		1
REVISION-cgi =		0
REVISION-x11 =		1
d19 1
a19 1
MAINTAINER =		Kirill Bychkov <yason@@linklevel.net>
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/02/09 14:49:53 sthen Exp $
d13 1
a13 1
REVISION-x11 =		0
@


1.17
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/08/27 13:39:59 sthen Exp $
a22 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d32 1
a32 1
NO_REGRESS =		Yes
@


1.16
log
@simplify rc_pre(); this uses rm -f which returns a successful exit code
even if the file doesn't exist, so no need to explicitly test for its
presence. from rpe, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/11/28 10:46:19 sthen Exp $
d63 1
a63 1
.if !${FLAVOR:L:Mno_x11}
@


1.15
log
@Better SYSCONFDIR handling (remove the CONFIGURE_STYLE=...old hack) now that
we have BASESYSCONFDIR. Maintainer timeout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/20 11:26:14 sthen Exp $
d11 1
a11 1
REVISION-main =		0
@


1.14
log
@bugfix update to apcupsd-3.14.10, from maintainer Kirill Bychkov
- while there, add NO_REGRESS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/16 11:41:39 espie Exp $
d11 3
d33 1
a33 1
CONFIGURE_STYLE =	gnu old # old prevents overriding sysconfdir
d39 2
a40 1
SUBST_VARS +=		WEB_ROOT
a43 1
			--sysconfdir=${SYSCONFDIR}/apcupsd \
d83 1
a83 1
	perl -pi -e 's,/etc/apcupsd,${SYSCONFDIR}/apcupsd,g' \
d85 1
a85 1
	perl -pi -e 's,/usr/local/etc/apcupsd,${SYSCONFDIR}/apcupsd,g' \
@


1.13
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/08/30 09:59:30 sthen Exp $
d7 1
a7 1
DISTNAME =		apcupsd-3.14.9
a10 1
REVISION-x11 =		0
d32 1
@


1.12
log
@update apcupsd to 3.4.19, switch from net-snmp support to internal snmp
support (removing the separate snmp flavour), and add an rc file.

from maintainer Kirill Bychkov; wantlib-x11 synced by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/05/14 21:29:03 ajacoutot Exp $
d11 1
@


1.11
log
@deve/gconf2 is about to loose its dependency on x11/gtk+2 so explicitely
register x11/gtk+2 for ports depending on gconf2 that don't have another
dependency that would bring it.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/03/07 18:54:51 ajacoutot Exp $
d7 1
a7 1
DISTNAME =		apcupsd-3.14.8
a8 1
REVISION-main = 	2
a10 1
REVISION-x11 = 		2
d18 1
a18 1
# GPLv2 
a31 1
USE_GROFF =		Yes
d44 1
a47 1
FLAVORS =		snmp
d55 1
a55 1
WANTLIB-cgi = 		c pthread gd
d68 6
a73 13
WANTLIB-x11 += ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB-x11 += Xi Xinerama Xrandr Xrender atk-1.0 cairo expat fontconfig
WANTLIB-x11 += freetype gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB-x11 += gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0
WANTLIB-x11 += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png
WANTLIB-x11 += pthread-stubs xcb-render xcb z ${WANTLIB} c pthread
WANTLIB-x11 += GL X11-xcb Xxf86vm drm xcb-shm
.endif

.if ${FLAVOR:L:Msnmp}
CONFIGURE_ARGS +=	--enable-net-snmp
LIB_DEPENDS-main +=	net/net-snmp
WANTLIB-main =		${WANTLIB} crypto netsnmp
@


1.10
log
@New style *_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/02/02 21:56:03 jakemsr Exp $
d12 1
a12 1
REVISION-x11 = 		1
d66 1
@


1.9
log
@the USB_DEVICEINFO ioctl only requires read access to the usb bus.
open the bus with O_RDONLY instead of O_RDWR to not require write
permission.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/20 17:22:40 espie Exp $
d81 1
a81 1
LIB_DEPENDS-main +=	::net/net-snmp
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/06 16:07:00 espie Exp $
d9 1
a9 1
REVISION-main = 	1
@


1.7
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/10/24 21:36:04 ajacoutot Exp $
d59 1
a59 1
LIB_DEPENDS-cgi =	::graphics/gd
d65 1
a65 1
LIB_DEPENDS-x11 =	::devel/gconf2 \
d67 1
a67 1
RUN_DEPENDS-x11 =	:desktop-file-utils-*:devel/desktop-file-utils \
@


1.6
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/10/19 07:43:00 espie Exp $
a25 1
WANTLIB =		c pthread
d28 1
d34 1
a34 1
USE_GROFF =	Yes
d58 1
a58 1
WANTLIB-cgi = 		${WANTLIB} gd
d75 1
a75 1
WANTLIB-x11 += pthread-stubs xcb-render xcb z ${WANTLIB}
@


1.5
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/10/05 09:04:11 ajacoutot Exp $
a63 1
USE_X11 =		Yes
@


1.4
log
@Move to new DEPENDS.

from Kirill Bychkov (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/06/17 18:43:43 sthen Exp $
d34 1
@


1.3
log
@add a missing space in MESSAGE-main's sample rc.local fragment; Kirill Bychkov
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/05/27 10:21:39 sthen Exp $
d8 2
a9 1
PKGNAME-main =		${DISTNAME}p1
d11 2
a12 1
PKGNAME-x11 =		${DISTNAME:S/-/-x11-/}p0
a20 1

d57 2
a58 1
LIB_DEPENDS-cgi =	gd::graphics/gd
d65 1
a65 3
LIB_DEPENDS-x11 =	atk-1.0.>=2009::devel/atk \
			cairo.>=7::graphics/cairo \
			gconf-2.>=6::devel/gconf2 \
d70 4
a73 4
WANTLIB-x11 += ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB-x11 += Xfixes Xi Xinerama Xrandr Xrender dbus-1 expat fontconfig
WANTLIB-x11 += freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB-x11 += glitz gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0
d75 2
a76 1
WANTLIB-x11 += pthread-stubs xcb xcb-render xcb-render-util z ${WANTLIB}
d81 2
a82 2
LIB_DEPENDS-main +=	netsnmp::net/net-snmp
WANTLIB-main =		${WANTLIB} crypto
@


1.2
log
@Various small fixes suggested by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/05/25 21:56:33 sthen Exp $
d8 1
a8 1
PKGNAME-main =		${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
PKGNAME-main =		${DISTNAME}
d10 1
a10 1
PKGNAME-x11 =		${DISTNAME:S/-/-x11-/}
d26 2
d38 2
a39 2
CONFIGURE_ARGS =	--mandir=${LOCALBASE}/man \
			--sbindir=${LOCALBASE}/sbin \
d57 1
d63 1
a63 2
LIB_DEPENDS-x11 =	gio-2.0,glib-2.0,gmodule-2.0,gobject-2.0,gthread-2.0::devel/glib2 \
			atk-1.0.>=2009::devel/atk \
d65 4
a68 2
			gconf-2.>=6::devel/gconf2
RUN_DEPENDS-x11 =	:desktop-file-utils-*:devel/desktop-file-utils
d72 4
a75 4
WANTLIB-x11 += freetype gdk-x11-2.0 gdk_pixbuf-2.0 glitz gtk-x11-2.0
WANTLIB-x11 += iconv intl m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB-x11 += pixman-1 png pthread-stubs xcb xcb-render xcb-render-util
WANTLIB-x11 += z ${WANTLIB}
@


1.1.1.1
log
@Import ports/sysutils/apcupsd, a daemon for monitoring APC UPSes.
We already have sysutils/apc-upsd which hasn't been maintained upstream
in >10 years, which I intend to rm unless there are objections.

From maintainer Kirill Bychkov with various input from myself.

Apcupsd can be used for power mangement and controlling most of APC's
UPS models. Apcupsd works with most of APC's Smart-UPS models as well as
most simple signalling models such a Back-UPS, and BackUPS-Office.
During a power failure, apcupsd will inform the users about the power
failure and that a shutdown may occur. If power is not restored, a
system shutdown will follow when the battery is exhausted, a timeout
(seconds) expires, or runtime expires based on internal APC calculations
determined by power consumption rates.
@
text
@@
