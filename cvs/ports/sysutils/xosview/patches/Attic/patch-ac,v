head	1.6;
access;
symbols
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3;
locks; strict;
comment	@# @;


1.6
date	2000.07.17.16.24.47;	author form;	state dead;
branches;
next	1.5;

1.5
date	99.12.04.17.58.38;	author form;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	99.12.04.17.18.08;	author form;	state Exp;
branches;
next	1.3;

1.3
date	99.09.15.03.17.23;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.07.01.22.07.44;	author form;	state Exp;
branches;
next	1.1;

1.1
date	99.06.26.12.04.16;	author ho;	state Exp;
branches;
next	;

1.5.2.1
date	2000.09.15.05.18.39;	author marc;	state dead;
branches;
next	;


desc
@@


1.6
log
@upgrade to 1.7.4
@
text
@--- configure.orig	Wed Nov 17 13:16:57 1999
+++ configure	Sat Dec  4 23:54:58 1999
@@@@ -1635,6 +1635,19 @@@@
   
 	  host_dir=linux
           host_os=linux ;;
+
+##  Check for OpenBSD 2.0-2.5
+openbsd2.[012345]*)
+        EXTRALIBS="-lkvm $XPMLIB"
+        INSTALL_ARGS='-s -g kmem -m 02555'
+	cat >> confdefs.h <<\EOF
+#define XOSVIEW_OPENBSD 1
+EOF
+
+
+			host_dir=bsd
+	host_os=openbsd ;;
+
 ##  Check for known versions of NetBSD...
 netbsd1.[012345]*)  
 	host_os=netbsd
@@@@ -1747,16 +1760,35 @@@@
 
 			host_dir=bsd
 	host_os=freebsd ;;
-openbsd*) 
+openbsd*)
         EXTRALIBS="-lkvm $XPMLIB"
         INSTALL_ARGS='-s -g kmem -m 02555'
 	cat >> confdefs.h <<\EOF
 #define XOSVIEW_OPENBSD 1
+#define HAVE_SWAPCTL 1
 EOF
+	## Also check for the existence of UVM.  This is a nasty,
+	## complicated check.  This could be avoided by having the *BSD
+	## platform-specific Makefiles include <bsd.own.mk> on their own.
 
+	cat > confmkfile <<\EOF
+.include <bsd.own.mk>
+all:
+.if defined(UVM) && ${UVM:U} == YES
+	@@echo UVMyes
+.endif
+EOF
+	uvmstring=`make -f confmkfile`
+	rm confmkfile
+	if test x$uvmstring != x ; then
+		cat >> confdefs.h <<\EOF
+#define UVM 1
+EOF
+	fi
 
-			host_dir=bsd
-	host_os=openbsd ;;
+	host_dir=bsd
+	host_os=openbsd
+;;
 bsdi*) 
 	EXTRALIBS="-lkvm $XPMLIB"
 	INSTALL_ARGS='-s -g kmem -m 02555'
@


1.5
log
@Improve (and fix) UVM checking.
@
text
@@


1.5.2.1
log
@bring sysutils as of cut-over date into 2.7 branch
@
text
@@


1.4
log
@Update to 1.7.3.
UVM support.
@
text
@d2 1
a2 1
+++ configure	Sat Dec  4 23:05:24 1999
d23 7
a29 1
@@@@ -1752,11 +1765,58 @@@@
d35 3
d39 1
a39 4
+  ## Also check for the existence of UVM.  This is a nasty,
+  ## complicated check.  This could be avoided by having the *BSD
+  ## platform-specific Makefiles include <bsd.own.mk> on their own.
+  cat > confmkfile <<\EOF
d42 1
a42 1
+.if defined(UVM)
d46 4
a49 4
+  uvmstring=`make -f confmkfile`
+  rm confmkfile
+  if test x$uvmstring != x ; then
+    cat >> confdefs.h <<\EOF
d52 1
d56 2
a57 31
+    echo "configure: warning: 
+
+  *Enabling* UVM -- 'UVM=' found in /etc/mk.conf.
+  If this is in error, remove the define of UVM=1 from CXXFLAGS
+  in Makefile.config, and mail bgrayson@@ece.utexas.edu that
+  the autoconf script didn't work properly.
+    " 1>&2
+  else
+            echo "configure: warning: 'UVM=' not found in /etc/mk.conf.  Checking /netbsd for uvm symbols..." 1>&2
+    if test x`nm /netbsd | grep uvm_sysctl` != x ; then
+      cat >> confdefs.h <<\EOF
+#define UVM 1
+EOF
+
+      echo "configure: warning: *Enabling* UVM -- 'uvm_sysctl' symbol found in /netbsd.
+  If this is in error, remove the define of UVM=1 from CXXFLAGS
+  in Makefile.config, and mail bgrayson@@ece.utexas.edu that
+  the autoconf script didn't work properly.
+  " 1>&2
+    else
+      echo "configure: warning: 
+
+    *Disabling* UVM -- 'UVM=' not found in /etc/mk.conf.
+    If this is in error, add -DUVM=1 to CXXFLAGS in
+    Makefile.config, and please mail bgrayson@@ece.utexas.edu that
+    the autoconf script did not work properly.
+    " 1>&2
+    fi
+  fi
+  host_dir=bsd
+  host_os=openbsd
@


1.3
log
@- dist site name has changed: www.ece.utexas.edu -> lore.ece.utexas.edu
- correct patch: OpenBSD 2.0 - 2.4 -> 2.5
@
text
@d1 3
a3 5
# $OpenBSD: patch-ac,v 1.2 1999/07/01 22:07:44 form Exp $

--- configure.orig	Fri Jul  2 04:36:11 1999
+++ configure	Fri Jul  2 04:41:31 1999
@@@@ -1658,6 +1658,19 @@@@
d21 1
a21 1
 netbsd1.[0123]*)  
d23 1
a23 1
@@@@ -1761,6 +1774,7 @@@@
d30 16
d47 37
@


1.2
log
@update to 1.7.0.b.
@
text
@d1 1
a1 1
# $OpenBSD: $
d10 2
a11 2
+##  Check for OpenBSD 2.0-2.4
+openbsd2.[01234]*)
@


1.1
log
@egcs c++ would not compile xwin.cc
@
text
@d1 5
a5 3
--- xwin.cc.orig	Sat Jun 26 13:43:54 1999
+++ xwin.cc	Sat Jun 26 13:42:38 1999
@@@@ -53,9 +53,9 @@@@
d7 25
a31 8
   // Set up the default Events
   events_ = NULL;
-  addEvent( new Event( this, ConfigureNotify, &configureEvent ) );
-  addEvent( new Event( this, ClientMessage, &deleteEvent ) );
-  addEvent( new Event( this, MappingNotify, &mappingNotify ) );
+  addEvent( new Event( this, ConfigureNotify, &XWin::configureEvent ) );
+  addEvent( new Event( this, ClientMessage, &XWin::deleteEvent ) );
+  addEvent( new Event( this, MappingNotify, &XWin::mappingNotify ) );
a32 2
   //openDisplay();  //  Done explicitly in xosview.cc.
 }
@

