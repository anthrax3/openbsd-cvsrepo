head	1.12;
access;
symbols
	OPENBSD_6_1:1.12.0.2
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	giovanni_20160408:1.1.1.1
	giovanni:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2017.02.14.17.56.26;	author danj;	state Exp;
branches;
next	1.11;
commitid	thDeYiaYE0XJhJaQ;

1.11
date	2017.01.03.19.26.58;	author landry;	state Exp;
branches;
next	1.10;
commitid	mhDMvmmnCsksnC0D;

1.10
date	2016.12.20.18.46.46;	author danj;	state Exp;
branches;
next	1.9;
commitid	ZTOS9XsG6mTs3pwI;

1.9
date	2016.10.31.09.27.17;	author danj;	state Exp;
branches;
next	1.8;
commitid	9cNJ0DyYImNNOSKr;

1.8
date	2016.08.27.15.06.36;	author danj;	state Exp;
branches;
next	1.7;
commitid	LelGBhrTapfeFmpE;

1.7
date	2016.08.09.18.52.59;	author danj;	state Exp;
branches;
next	1.6;
commitid	vHaxuVOIU5x7A1jx;

1.6
date	2016.08.08.16.09.41;	author danj;	state Exp;
branches;
next	1.5;
commitid	G5Rdlh1Hc19YKIkL;

1.5
date	2016.05.19.20.30.16;	author jca;	state Exp;
branches;
next	1.4;
commitid	pYz9AvLE5MKeH2UN;

1.4
date	2016.05.15.18.22.44;	author shadchin;	state Exp;
branches;
next	1.3;
commitid	I9bu1fKOwEgqZDqY;

1.3
date	2016.04.10.18.58.16;	author sthen;	state Exp;
branches;
next	1.2;
commitid	ynroIyQ7O6Kf1ocD;

1.2
date	2016.04.10.09.27.53;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	N4UH8USIgpQXZBBQ;

1.1
date	2016.04.08.21.15.04;	author giovanni;	state Exp;
branches
	1.1.1.1;
next	;
commitid	jDE0A5i6VlIJPYAb;

1.1.1.1
date	2016.04.08.21.15.04;	author giovanni;	state Exp;
branches;
next	;
commitid	jDE0A5i6VlIJPYAb;


desc
@@


1.12
log
@Update to borgbackup-1.0.10

From Björn Ketelaars (maintainer)
@
text
@# $OpenBSD: Makefile,v 1.11 2017/01/03 19:26:58 landry Exp $

COMMENT =		deduplicating backup program

MODPY_EGG_VERSION =	1.0.10
DISTNAME =		borgbackup-${MODPY_EGG_VERSION}

MODPY_PI =		Yes

CATEGORIES =		sysutils

MAINTAINER =		Bjorn Ketelaars <bjorn.ketelaars@@hydroxide.nl>

# BSD-3
PERMIT_PACKAGE_CDROM =	Yes

MODULES =		lang/python

MODPY_VERSION =		${MODPY_DEFAULT_VERSION_3}
WANTLIB +=		${MODPY_WANTLIB} crypto pthread lz4

LIB_DEPENDS =		${MODPY_LIB_DEPENDS} archivers/lz4
BUILD_DEPENDS +=	devel/py-setuptools_scm${MODPY_FLAVOR} \
			textproc/py-sphinx${MODPY_FLAVOR}
RUN_DEPENDS +=		net/py-msgpack${MODPY_FLAVOR}

TEST_DEPENDS +=		${RUN_DEPENDS} \
			devel/py-test${MODPY_FLAVOR} \
			devel/py-test-benchmark${MODPY_FLAVOR} \
			devel/py-test-xdist${MODPY_FLAVOR}

MODPY_SETUPTOOLS =	Yes

post-build:
	${MODPY_CMD} build_ext --inplace
	cd ${WRKSRC}/docs; env PYTHONPATH=${WRKSRC} \
		make man SPHINXBUILD=sphinx-build${MODPY_BIN_SUFFIX}

post-install:
	${INSTALL_MAN} ${WRKSRC}/docs/_build/man/borg.1 ${PREFIX}/man/man1/borg.1

do-test: fake
	cd ${WRKSRC}; \
		PATH=${WRKINST}/usr/local/bin:${PATH} \
		PYTHONPATH=${WRKSRC} \
		${MODPY_BIN} -m pytest --ignore lib*

.include <bsd.port.mk>
@


1.11
log
@bump ports depending on python3 in sysutils
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/12/20 18:46:46 danj Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.9
a6 1
REVISION =		0
d29 2
a30 1
			devel/py-test-benchmark${MODPY_FLAVOR}
@


1.10
log
@Update to borgbackup-1.0.9

From Bjorn Ketelaars (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/10/31 09:27:17 danj Exp $
d7 1
@


1.9
log
@Update to borgbackup-1.0.8

From Björn Ketelaars (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/08/27 15:06:36 danj Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.8
@


1.8
log
@Update to borgbackup-1.0.7

From Björn Ketelaars (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/08/09 18:52:59 danj Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.7
@


1.7
log
@switch maintainership from Michael Reed to Bjorn Ketelaars
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2016/08/08 16:09:41 danj Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.6
a6 1
REVISION =		0
@


1.6
log
@update to borgbackup-1.0.6

From Björn Ketelaars, no objection from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/05/19 20:30:16 jca Exp $
d7 1
d13 1
a13 1
MAINTAINER =		Michael Reed <m.reed@@mykolab.com>
@


1.5
log
@Unbreak on big endian archs where __builtin_bswap32 isn't available

Problem on sparc64 reported + fix tested by matthieu@@
ok Michael Reed (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2016/05/15 18:22:44 shadchin Exp $
d5 1
a5 2
MODPY_EGG_VERSION =	1.0.2
REVISION =		0
@


1.4
log
@Update to borgbackup 1.0.2. From Michael Reed (maintainer)
Rework test.

ok giovanni@@ (prev diff)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/04/10 18:58:16 sthen Exp $
d6 1
@


1.3
log
@Update to borgbackup-1.0.1 and enable tests. From Michael Reed (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/04/10 09:27:53 ajacoutot Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.1
d24 1
a24 1
			textproc/py-sphinx
d27 1
a27 1
TEST_DEPENDS +=		net/py-msgpack${MODPY_FLAVOR} \
d29 1
a29 1
			devel/py-virtualenv${MODPY_FLAVOR}
d34 3
a36 1
	make -C ${WRKSRC}/docs man READTHEDOCS=True
d41 5
a45 8
do-test:
	(cd ${WRKSRC} ;\
		virtualenv${MODPY_BIN_SUFFIX} --system-site-packages --no-pip borg-env ;\
		. borg-env/bin/activate ;\
		./borg-env/bin/python${MODPY_DEFAULT_VERSION_3} ./setup.py install ;\
		cd build/lib.openbsd-$$(uname -r)-$$(uname -m)-${MODPY_DEFAULT_VERSION_3} ;\
		export PYTHONPATH=`pwd` ;\
		py.test${MODPY_BIN_SUFFIX} -k 'not benchmark' --pyargs borg.testsuite)
@


1.2
log
@Do not hardcode python3.

ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/04/08 21:15:04 giovanni Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.0
d27 3
a29 1
TEST_DEPENDS +=		net/py-msgpack${MODPY_FLAVOR}
d38 9
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d23 1
a23 1
BUILD_DEPENDS +=	devel/py-setuptools_scm,python3 \
d25 1
a25 1
RUN_DEPENDS +=		net/py-msgpack,python3
d27 1
a27 1
TEST_DEPENDS +=		net/py-msgpack,python3
@


1.1.1.1
log
@import borgbackup, a deduplicating backup program
from maintainer Michael Reed with some tweaks
ok sthen@@


BorgBackup (short: Borg) is a deduplicating backup program. Optionally, it
supports compression and authenticated encryption.

The main goal of Borg is to provide an efficient and secure way to backup data.
The data deduplication technique used makes Borg suitable for daily backups
since only changes are stored. The authenticated encryption technique makes it
suitable for backups to not fully trusted targets.
@
text
@@
