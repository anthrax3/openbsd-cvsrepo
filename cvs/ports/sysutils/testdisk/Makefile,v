head	1.17;
access;
symbols
	OPENBSD_6_2:1.17.0.4
	OPENBSD_6_2_BASE:1.17
	OPENBSD_6_1:1.17.0.2
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.16.0.2
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.15.0.6
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.15.0.8
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.15.0.4
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.2
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.14.0.2
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.11.0.2
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.10.0.8
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.6
	OPENBSD_5_0:1.10.0.4
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	landry_20090315:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2016.09.13.18.52.05;	author naddy;	state Exp;
branches;
next	1.16;
commitid	4Y8Q5bKBOfIWFq5Y;

1.16
date	2016.03.14.21.30.29;	author landry;	state Exp;
branches;
next	1.15;
commitid	1F7oV2WkGdFpOF5i;

1.15
date	2014.04.22.10.11.02;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2013.08.12.15.05.27;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2013.06.21.22.38.34;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2013.03.11.11.41.33;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2013.01.30.17.19.24;	author benoit;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.27.09.32.09;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.20.17.22.42;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.11.19.00.49;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.19.07.43.04;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.07.30.22.49.27;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2010.04.03.11.54.19;	author kili;	state Exp;
branches;
next	1.4;

1.4
date	2010.03.21.12.13.08;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2009.07.15.13.45.17;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.16.10.46.52;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2009.03.15.20.11.01;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.03.15.20.11.01;	author landry;	state Exp;
branches;
next	;


desc
@@


1.17
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.16 2016/03/14 21:30:29 landry Exp $

COMMENT =	data recovery software

VERSION =	7.0
DISTNAME =	testdisk-${VERSION}
CATEGORIES =	sysutils

HOMEPAGE =	http://www.cgsecurity.org/
MASTER_SITES =	${HOMEPAGE}
EXTRACT_SUFX =	.tar.bz2

MAINTAINER =	Landry Breuil <landry@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

SUBST_VARS +=		VERSION

CONFIGURE_STYLE =	gnu
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS =	--disable-qt

LIB_DEPENDS =		converters/libiconv \
			sysutils/e2fsprogs>=1.42.7 \
			sysutils/ntfs-3g \
			graphics/jpeg

WANTLIB =		c com_err iconv uuid ext2fs jpeg ncursesw ntfs-3g z

post-install:
			${INSTALL_DATA} ${WRKSRC}/documentation.html ${PREFIX}/share/doc/testdisk/
			# we disable qt, no need for those
			rm -Rf ${PREFIX}/share/icons/ ${PREFIX}/man/man8/qphotorec.8 ${PREFIX}/man/zh_CN/

.include <bsd.port.mk>
@


1.16
log
@Update to testdisk 7.0, fixes an exploitable Stack Buffer Overflow.

See http://www.cgsecurity.org/wiki/TestDisk_7.0_Release
Reminded by 'Mik J', thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/04/22 10:11:02 sthen Exp $
a17 2
MODULES =		converters/libiconv

d25 2
a26 1
LIB_DEPENDS =		sysutils/e2fsprogs>=1.42.7 \
d30 1
a30 1
WANTLIB =		c com_err uuid ext2fs jpeg ncursesw ntfs-3g z
@


1.15
log
@hidden dep on ntfs-3g; ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/08/12 15:05:27 landry Exp $
d5 1
a5 1
VERSION =	6.14
a6 1
REVISION =	0
d25 1
d34 3
a36 1
			${INSTALL_DATA} ${WRKSRC}/documentation.html ${PREFIX}/share/doc/${DISTNAME}/
@


1.14
log
@Bugfix update to testdisk 6.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/06/21 22:38:34 sthen Exp $
d7 1
d28 1
d31 1
a31 1
WANTLIB =		c com_err uuid ext2fs jpeg ncursesw z
@


1.13
log
@sync WANTLIB and remove patches to handle e2fsprogs/libuuid changes. ok aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/03/11 11:41:33 espie Exp $
d5 1
a5 2
VERSION =	6.13
REVISION =	0
d13 1
a13 1
MAINTAINER =	Landry Breuil <gaston@@gcu.info>
d29 1
a29 1
WANTLIB =		c crypto uuid ext2fs jpeg ncursesw z
d32 1
a32 1
			${INSTALL_DATA} ${WRKSRC}/doc/online.html ${PREFIX}/share/doc/${DISTNAME}/html
@


1.12
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/01/30 17:19:24 benoit Exp $
d6 1
d27 1
a27 1
LIB_DEPENDS =		sysutils/e2fsprogs \
d30 1
a30 2
WANTLIB =		c crypto e2fs-uuid ext2fs ext2fs_com_err \
			jpeg ncursesw z
@


1.11
log
@- update testdisk to 6.13
- remove USE_GROFF
- add post-install
- update patches
- regen PLIST

tweaks and ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/11/27 09:32:09 dcoppa Exp $
a16 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.10
log
@Fix WANTLIB and bump.

Ok landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/20 17:22:42 espie Exp $
d5 1
a5 1
VERSION =	6.11.3
a6 1
REVISION =	2
a27 1
USE_GROFF =		Yes
d34 3
@


1.9
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/11 19:00:49 espie Exp $
d7 1
a7 1
REVISION =	1
d34 2
a35 1
WANTLIB =		c crypto ncurses z e2fs-uuid ext2fs ext2fs_com_err jpeg
@


1.8
log
@last WANTLIB conversion, hopefully
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/19 07:43:04 espie Exp $
d31 2
a32 2
LIB_DEPENDS =		::sysutils/e2fsprogs \
			::graphics/jpeg
@


1.7
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/07/30 22:49:27 steven Exp $
d29 1
a29 1
USE_GROFF =	Yes
d31 2
a32 2
LIB_DEPENDS =		e2fs-uuid,ext2fs,ext2fs_com_err::sysutils/e2fsprogs \
			jpeg::graphics/jpeg
d34 1
a34 1
WANTLIB =		c crypto ncurses z
@


1.6
log
@make it detect scsi disks properly (off by one).
while here also detect vnd devices.

"groovy" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/03/21 12:13:08 landry Exp $
d29 1
@


1.5
log
@Follow e2fsprogs changes.
@
text
@d7 1
a7 1
PKGNAME =	${DISTNAME}p0
@


1.4
log
@Update to testdisk 6.11.3, which adds as a security fix a missing boundary
check in EXIF processing. Prompted by a diff from Vadim Zhukov, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/07/15 13:45:17 landry Exp $
d7 1
d28 1
a28 1
			LDFLAGS="-L${LOCALBASE}/lib/uuid -L${LOCALBASE}/lib"
d30 1
a30 2
LIB_DEPENDS =		ext2fs,ext2fs_com_err::sysutils/e2fsprogs,-main \
			lib/uuid/uuid::sysutils/e2fsprogs,-uuid \
@


1.3
log
@Update to testdisk/photorec 6.11.
see http://www.cgsecurity.org/wiki/TestDisk_6.11_Release for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/03/16 10:46:52 landry Exp $
d5 1
a5 1
VERSION =	6.11
@


1.2
log
@Puke some bits of autofoo to make sure it picks uuid lib from
sysutils/e2fsprogs and not the one from devel/uuid. Fixes the build when
the latter is installed...
Spotted by Benoit Lecocq, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/03/15 20:11:01 landry Exp $
d5 1
a5 1
VERSION =	6.10
a6 1
PKGNAME =	${DISTNAME}p0
d33 1
a33 1
WANTLIB =		c ncurses z
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d27 2
a28 1
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="-L${LOCALBASE}/lib"
d31 1
a31 1
			uuid::sysutils/e2fsprogs,-uuid \
@


1.1.1.1
log
@Import testdisk 6.10, which provides testdisk and photorec :

TestDisk is a powerful free data recovery software! It was primarily
designed to help recover lost partitions and/or make non-booting disks
bootable again when these symptoms are caused by faulty software,
certain types of viruses or human error (such as accidentally deleting a
Partition Table). Partition table recovery using TestDisk is really
easy.
PhotoRec is a file data recovery software designed to recover lost files
including video, documents and archives from Hard Disks and CDRom and
lost pictures (thus, its 'Photo Recovery' name) from digital camera
memory. PhotoRec ignores the filesystem and goes after the underlying
data, so it will still work even if your media's filesystem has been
severely damaged or re-formatted.

with feedback from pea@@, thanks!
@
text
@@
