head	1.3;
access;
symbols
	OPENBSD_6_0:1.2.0.14
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.10
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.12
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.8
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.12.02.13.32.14;	author jca;	state dead;
branches;
next	1.2;
commitid	jZHeB3Bzcbr3qYVc;

1.2
date	2013.06.08.11.40.49;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.30.19.13.58;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Move lsof to the Attic.

Requires kmem access, is so coupled to the system internals that it
needs a /usr/src/sys checkout, and breaks regularly due to changes in
base.  People used to it should be told to use fstat(1) & friends
instead.

ok landry@@ sthen@@ dcoppa@@
@
text
@$OpenBSD: patch-dialects_n+obsd_dstore_c,v 1.2 2013/06/08 11:40:49 dcoppa Exp $

Adjust after FMARK/FDEFER/FHASLOCK removal.

--- dialects/n+obsd/dstore.c.orig	Thu Dec 30 19:42:32 2004
+++ dialects/n+obsd/dstore.c	Sat Jun  8 10:26:55 2013
@@@@ -103,9 +103,15 @@@@ struct pff_tab Pff_tab[] = {
 	{ (long)FRSYNC,		FF_RSYNC	},
 # endif	/* defined(FRSYNC( */
 
+# if	defined(FMARK)
 	{ (long)FMARK,		FF_MARK		},
+# endif /* defined(FMARK) */
+# if	defined(FDEFER)
 	{ (long)FDEFER,		FF_DEFER	},
+# endif /* defined(FDEFER) */
+# if	defined(FHASLOCK)
 	{ (long)FHASLOCK,	FF_HASLOCK	},
+# endif /* defined(FHASLOCK) */
 	{ (long)O_NOCTTY,	FF_NOCTTY	},
 	{ (long)0,		NULL 		}
 };
@


1.2
log
@Adjust after FHASLOCK removal.
@
text
@d1 1
a1 1
$OpenBSD: patch-dialects_n+obsd_dstore_c,v 1.1 2011/06/30 19:13:58 jasper Exp $
@


1.1
log
@fix lsof after FMARK and FDEFER rename

input from matthew@@
ok pvalchev@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
Adjust after FMARK/FDEFER removal.
d5 3
a7 3
--- dialects/n+obsd/dstore.c.orig	Thu Jun 30 09:26:50 2011
+++ dialects/n+obsd/dstore.c	Thu Jun 30 09:28:19 2011
@@@@ -103,8 +103,12 @@@@ struct pff_tab Pff_tab[] = {
d17 1
d19 1
d22 1
@

