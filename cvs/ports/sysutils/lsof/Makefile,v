head	1.101;
access;
symbols
	OPENBSD_6_0:1.100.0.4
	OPENBSD_6_0_BASE:1.100
	OPENBSD_5_9:1.100.0.2
	OPENBSD_5_9_BASE:1.100
	OPENBSD_5_8:1.97.0.4
	OPENBSD_5_8_BASE:1.97
	OPENBSD_5_7:1.94.0.4
	OPENBSD_5_7_BASE:1.94
	OPENBSD_5_6:1.94.0.2
	OPENBSD_5_6_BASE:1.94
	OPENBSD_5_5:1.92.0.2
	OPENBSD_5_5_BASE:1.92
	OPENBSD_5_4:1.91.0.2
	OPENBSD_5_4_BASE:1.91
	OPENBSD_5_3:1.86.0.4
	OPENBSD_5_3_BASE:1.86
	OPENBSD_5_2:1.86.0.2
	OPENBSD_5_2_BASE:1.86
	OPENBSD_5_1_BASE:1.83
	OPENBSD_5_1:1.83.0.2
	OPENBSD_5_0:1.82.0.2
	OPENBSD_5_0_BASE:1.82
	OPENBSD_4_9:1.77.0.2
	OPENBSD_4_9_BASE:1.77
	OPENBSD_4_8:1.72.0.2
	OPENBSD_4_8_BASE:1.72
	OPENBSD_4_7:1.68.0.2
	OPENBSD_4_7_BASE:1.68
	OPENBSD_4_6:1.66.0.2
	OPENBSD_4_6_BASE:1.66
	OPENBSD_4_5:1.65.0.2
	OPENBSD_4_5_BASE:1.65
	OPENBSD_4_4:1.62.0.2
	OPENBSD_4_4_BASE:1.62
	OPENBSD_4_3:1.61.0.2
	OPENBSD_4_3_BASE:1.61
	OPENBSD_4_2:1.59.0.4
	OPENBSD_4_2_BASE:1.59
	OPENBSD_4_1:1.59.0.2
	OPENBSD_4_1_BASE:1.59
	OPENBSD_4_0:1.58.0.2
	OPENBSD_4_0_BASE:1.58
	OPENBSD_3_9:1.57.0.2
	OPENBSD_3_9_BASE:1.57
	OPENBSD_3_8:1.56.0.2
	OPENBSD_3_8_BASE:1.56
	OPENBSD_3_7:1.55.0.2
	OPENBSD_3_7_BASE:1.55
	OPENBSD_3_6:1.53.0.2
	OPENBSD_3_6_BASE:1.53
	OPENBSD_3_5:1.52.0.2
	OPENBSD_3_5_BASE:1.52
	OPENBSD_3_4:1.51.0.2
	OPENBSD_3_4_BASE:1.51
	OPENBSD_3_3:1.47.0.2
	OPENBSD_3_3_BASE:1.47
	OPENBSD_3_2:1.43.0.2
	OPENBSD_3_2_BASE:1.43
	OPENBSD_3_1:1.40.0.2
	OPENBSD_3_1_BASE:1.40
	OPENBSD_3_0:1.35.0.2
	OPENBSD_3_0_BASE:1.35
	OPENBSD_2_9_TRACKING_SWITCH:1.35
	OPENBSD_2_9:1.33.0.2
	OPENBSD_2_9_BASE:1.33
	OPENBSD_2_8:1.32.0.2
	OPENBSD_2_8_BASE:1.32
	OPENBSD_2_7:1.27.0.2
	OPENBSD_2_7_BASE:1.27
	OPENBSD_2_6:1.16.0.2
	OPENBSD_2_6_BASE:1.16
	OPENBSD_2_5:1.11.0.2
	OPENBSD_2_5_BASE:1.11
	OPENBSD_2_4:1.8.0.2
	OPENBSD_2_4_BASE:1.8
	OPENBSD_2_3:1.5.0.2
	OPENBSD_2_3_BASE:1.5;
locks; strict;
comment	@# @;


1.101
date	2016.09.25.16.46.01;	author sthen;	state Exp;
branches;
next	1.100;
commitid	AHqf0tKbnrI163yE;

1.100
date	2016.01.06.10.15.12;	author sthen;	state Exp;
branches;
next	1.99;
commitid	nDYWxbBNW8LmWcSJ;

1.99
date	2015.10.13.06.29.38;	author bentley;	state Exp;
branches;
next	1.98;
commitid	l20av95NAm02GYvb;

1.98
date	2015.08.24.15.57.31;	author bluhm;	state Exp;
branches;
next	1.97;
commitid	PiWYJZJTeYpFsyJj;

1.97
date	2015.06.28.05.23.41;	author ajacoutot;	state Exp;
branches;
next	1.96;
commitid	SIXKElLN9x7Vnqz0;

1.96
date	2015.06.26.20.35.57;	author sthen;	state Exp;
branches;
next	1.95;
commitid	2EAx67M7WigE5sQq;

1.95
date	2015.03.24.21.26.09;	author sthen;	state Exp;
branches;
next	1.94;
commitid	HPiTA8ti7VSdGKhD;

1.94
date	2014.07.03.15.19.17;	author ajacoutot;	state Exp;
branches;
next	1.93;
commitid	WXJG25pePWAlGSIm;

1.93
date	2014.06.26.22.06.36;	author zhuk;	state Exp;
branches;
next	1.92;
commitid	lS4wnWl6xlJ07ZWD;

1.92
date	2013.08.06.18.43.15;	author naddy;	state Exp;
branches;
next	1.91;

1.91
date	2013.06.08.11.40.48;	author dcoppa;	state Exp;
branches;
next	1.90;

1.90
date	2013.05.27.07.56.31;	author dcoppa;	state Exp;
branches;
next	1.89;

1.89
date	2013.05.24.15.14.03;	author dcoppa;	state Exp;
branches;
next	1.88;

1.88
date	2013.05.23.15.08.36;	author dcoppa;	state Exp;
branches;
next	1.87;

1.87
date	2013.03.11.11.41.31;	author espie;	state Exp;
branches;
next	1.86;

1.86
date	2012.03.15.21.39.53;	author sthen;	state Exp;
branches;
next	1.85;

1.85
date	2012.03.15.21.36.44;	author sthen;	state Exp;
branches;
next	1.84;

1.84
date	2012.03.15.21.34.52;	author sthen;	state Exp;
branches;
next	1.83;

1.83
date	2011.11.16.00.25.05;	author sthen;	state Exp;
branches;
next	1.82;

1.82
date	2011.07.20.13.50.08;	author sthen;	state Exp;
branches;
next	1.81;

1.81
date	2011.07.04.00.39.07;	author naddy;	state Exp;
branches;
next	1.80;

1.80
date	2011.06.30.19.13.58;	author jasper;	state Exp;
branches;
next	1.79;

1.79
date	2011.06.21.20.21.21;	author naddy;	state Exp;
branches;
next	1.78;

1.78
date	2011.05.18.16.25.14;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2011.01.15.01.19.35;	author naddy;	state Exp;
branches;
next	1.76;

1.76
date	2010.12.02.09.14.53;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2010.11.22.20.10.54;	author jasper;	state Exp;
branches;
next	1.74;

1.74
date	2010.10.26.09.44.32;	author sthen;	state Exp;
branches;
next	1.73;

1.73
date	2010.10.19.07.43.01;	author espie;	state Exp;
branches;
next	1.72;

1.72
date	2010.08.03.23.39.58;	author sthen;	state Exp;
branches;
next	1.71;

1.71
date	2010.07.26.07.25.40;	author giovanni;	state Exp;
branches;
next	1.70;

1.70
date	2010.07.24.23.01.56;	author naddy;	state Exp;
branches;
next	1.69;

1.69
date	2010.04.19.05.56.44;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2010.01.28.11.30.39;	author okan;	state Exp;
branches;
next	1.67;

1.67
date	2009.09.04.01.49.10;	author sthen;	state Exp;
branches;
next	1.66;

1.66
date	2009.06.21.13.24.02;	author sthen;	state Exp;
branches;
next	1.65;

1.65
date	2009.02.15.23.46.08;	author sthen;	state Exp;
branches;
next	1.64;

1.64
date	2009.01.01.22.31.43;	author pvalchev;	state Exp;
branches;
next	1.63;

1.63
date	2008.12.16.14.54.30;	author jasper;	state Exp;
branches;
next	1.62;

1.62
date	2008.07.02.19.02.19;	author brad;	state Exp;
branches;
next	1.61;

1.61
date	2008.02.22.20.56.05;	author naddy;	state Exp;
branches;
next	1.60;

1.60
date	2007.09.15.21.14.02;	author merdely;	state Exp;
branches;
next	1.59;

1.59
date	2007.02.14.01.54.42;	author pvalchev;	state Exp;
branches;
next	1.58;

1.58
date	2006.05.09.19.13.32;	author pedro;	state Exp;
branches;
next	1.57;

1.57
date	2005.12.20.08.13.46;	author pvalchev;	state Exp;
branches;
next	1.56;

1.56
date	2005.06.05.19.40.54;	author pvalchev;	state Exp;
branches;
next	1.55;

1.55
date	2005.02.17.12.48.09;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2004.12.20.10.35.35;	author alek;	state Exp;
branches;
next	1.53;

1.53
date	2004.04.15.20.46.07;	author pvalchev;	state Exp;
branches;
next	1.52;

1.52
date	2004.01.11.00.14.31;	author pvalchev;	state Exp;
branches;
next	1.51;

1.51
date	2003.06.19.06.30.42;	author pvalchev;	state Exp;
branches;
next	1.50;

1.50
date	2003.05.13.04.06.11;	author pvalchev;	state Exp;
branches;
next	1.49;

1.49
date	2003.05.13.03.30.39;	author naddy;	state Exp;
branches;
next	1.48;

1.48
date	2003.04.01.18.50.16;	author jsyn;	state Exp;
branches;
next	1.47;

1.47
date	2002.12.23.01.42.35;	author pvalchev;	state Exp;
branches;
next	1.46;

1.46
date	2002.12.12.08.14.24;	author pvalchev;	state Exp;
branches;
next	1.45;

1.45
date	2002.12.12.07.24.38;	author pvalchev;	state Exp;
branches;
next	1.44;

1.44
date	2002.10.28.19.53.44;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2002.09.15.19.00.35;	author pvalchev;	state Exp;
branches;
next	1.42;

1.42
date	2002.09.12.05.02.38;	author pvalchev;	state Exp;
branches;
next	1.41;

1.41
date	2002.04.23.21.36.54;	author pvalchev;	state Exp;
branches;
next	1.40;

1.40
date	2002.02.03.03.15.31;	author angelos;	state Exp;
branches;
next	1.39;

1.39
date	2002.01.29.19.40.51;	author pvalchev;	state Exp;
branches;
next	1.38;

1.38
date	2002.01.25.00.58.18;	author pvalchev;	state Exp;
branches;
next	1.37;

1.37
date	2001.12.24.06.56.52;	author pvalchev;	state Exp;
branches;
next	1.36;

1.36
date	2001.12.23.21.17.50;	author pvalchev;	state Exp;
branches;
next	1.35;

1.35
date	2001.06.07.00.33.32;	author angelos;	state Exp;
branches;
next	1.34;

1.34
date	2001.05.06.03.59.04;	author lebel;	state Exp;
branches;
next	1.33;

1.33
date	2000.12.07.01.35.49;	author angelos;	state Exp;
branches;
next	1.32;

1.32
date	2000.10.22.14.03.48;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2000.09.09.22.35.37;	author angelos;	state Exp;
branches;
next	1.30;

1.30
date	2000.09.02.20.30.54;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2000.09.02.03.26.56;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2000.06.29.22.30.20;	author angelos;	state Exp;
branches;
next	1.27;

1.27
date	2000.04.22.20.32.13;	author angelos;	state Exp;
branches
	1.27.2.1;
next	1.26;

1.26
date	2000.04.09.18.01.32;	author angelos;	state Exp;
branches;
next	1.25;

1.25
date	2000.04.09.17.38.17;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2000.03.24.22.12.00;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2000.02.23.20.25.49;	author angelos;	state Exp;
branches;
next	1.22;

1.22
date	2000.02.15.05.05.15;	author turan;	state Exp;
branches;
next	1.21;

1.21
date	2000.02.12.06.30.04;	author turan;	state Exp;
branches;
next	1.20;

1.20
date	2000.02.11.00.37.38;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2000.02.01.22.28.50;	author angelos;	state Exp;
branches;
next	1.18;

1.18
date	2000.01.28.07.47.35;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	99.11.01.06.13.35;	author angelos;	state Exp;
branches;
next	1.16;

1.16
date	99.09.28.20.00.35;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	99.09.19.22.16.48;	author angelos;	state Exp;
branches;
next	1.14;

1.14
date	99.09.11.20.07.54;	author angelos;	state Exp;
branches;
next	1.13;

1.13
date	99.06.02.15.59.17;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	99.04.18.20.34.28;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.03.10.19.33.48;	author marc;	state Exp;
branches;
next	1.10;

1.10
date	99.02.18.19.27.35;	author marc;	state Exp;
branches;
next	1.9;

1.9
date	99.02.18.01.15.34;	author marc;	state Exp;
branches;
next	1.8;

1.8
date	98.08.25.05.15.14;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	98.08.05.22.33.35;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	98.07.25.21.21.20;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	97.12.22.00.49.23;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	97.12.22.00.28.56;	author niklas;	state Exp;
branches;
next	1.3;

1.3
date	97.12.21.21.42.30;	author angelos;	state Exp;
branches;
next	1.2;

1.2
date	97.12.21.18.11.37;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	97.11.25.23.16.33;	author angelos;	state Exp;
branches;
next	;

1.27.2.1
date	2000.09.15.05.18.10;	author marc;	state Exp;
branches;
next	;


desc
@@


1.101
log
@Disable "txt" support in lsof, it already wasn't working correctly, and was
causing build failures following kernel changes. From dlg@@
@
text
@# $OpenBSD: Makefile,v 1.100 2016/01/06 10:15:12 sthen Exp $

COMMENT=	list information about open files

VERSION=	4.89
REVISION=	0
DISTNAME=	lsof_${VERSION}
PKGNAME=	${DISTNAME:S/_/-/}
CATEGORIES=	sysutils
MASTER_SITES=	http://www.mirrorservice.org/sites/lsof.itap.purdue.edu/pub/tools/unix/lsof/ \
		ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/ \
		ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/OLD/ \
		ftp://sunsite.ualberta.ca/pub/Mirror/lsof/ \
		ftp://sunsite.ualberta.ca/pub/Mirror/lsof/OLD/ \
		ftp://ftp.fu-berlin.de/pub/unix/tools/lsof/ \
		ftp://ftp.fu-berlin.de/pub/unix/tools/lsof/OLD/ \
		http://www.mirrorservice.org/sites/lsof.itap.purdue.edu/pub/tools/unix/lsof/OLD/

HOMEPAGE=	https://people.freebsd.org/~abe/

MAINTAINER=	Peter Valchev <pvalchev@@sightly.net>

PERMIT_PACKAGE_CDROM=	Yes
WANTLIB=		c kvm>=13

MODULES=	perl

MODPERL_ADJ_FILES=	scripts/big_brother.perl5 \
			scripts/count_pf.perl \
			scripts/count_pf.perl5 \
			scripts/identd.perl5 \
			scripts/idrlogin.perl \
			scripts/idrlogin.perl5 \
			scripts/list_NULf.perl5 \
			scripts/list_fields.perl \
			scripts/shared.perl5 \
			scripts/watch_a_file.perl

MAKE_FLAGS=	DEBUG="${CFLAGS}"

CONFIGURE_STYLE= simple
CONFIGURE_SCRIPT= Configure
CONFIGURE_ARGS=	-n openbsd
CONFIGURE_ENV=	LSOF_CC="${CC}" OPENBSD_SYS="${BSDSRCDIR}/sys"

NO_TEST=	Yes

SRCBALL_NAME=	${DISTNAME}_src
WRKDIST=	${WRKDIR}/${DISTNAME}/${SRCBALL_NAME}

post-extract:
	cd ${WRKDIST}/.. ; grep MD5.*tar README.${DISTNAME} | \
		cksum -c - && tar -xf ${SRCBALL_NAME}.tar

# XXX: CVS keyword found in patch
pre-configure:
	@@if ! [ -f ${BSDSRCDIR}/sys/Makefile ]; then echo; \
		echo "*** Building lsof requires kernel source in ${BSDSRCDIR}/sys"; \
		echo; exit 1; fi
	perl -pi -e 'print "#!/usr/bin/awk -f\n" if $$. == 1' \
		${WRKSRC}/scripts/list_fields.awk

do-install:
	${INSTALL_SCRIPT_DIR} ${PREFIX}/share/lsof
	${INSTALL_PROGRAM} ${WRKBUILD}/lsof ${PREFIX}/sbin
	${INSTALL_MAN} ${WRKSRC}/lsof.8 ${PREFIX}/man/man8/lsof.8
	${INSTALL_SCRIPT} ${WRKSRC}/scripts/* ${PREFIX}/share/lsof
	@@chmod ${SHAREMODE} ${PREFIX}/share/lsof/00*

.include <bsd.port.mk>
@


1.100
log
@update to lsof-4.89
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2015/10/13 06:29:38 bentley Exp $
d6 1
@


1.99
log
@Update maintainer email address.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/08/24 15:57:31 bluhm Exp $
d5 1
a5 2
VERSION=	4.88
REVISION=	2
@


1.98
log
@Bump lsof revision as struct unpcb has changed.
ON naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/06/28 05:23:41 ajacoutot Exp $
d6 1
a6 1
REVISION=	1
d21 1
a21 1
MAINTAINER=     Peter Valchev <pvalchev@@openbsd.org>
@


1.97
log
@Unbreak when BSDSRCDIR != /usr/src:
do not harcode path to /sys; this check was removed 1 year ago for that
reason
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2015/06/26 20:35:57 sthen Exp $
d6 1
@


1.96
log
@Add a check to pre-configure giving a useful error if kernel sources
are unavailable. Prompted by a suggestion from Markus Lude.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2015/03/24 21:26:09 sthen Exp $
d56 2
a57 2
	@@if ! [ -f /sys/Makefile ]; then echo; \
		echo "*** Building lsof requires kernel source in /sys"; \
@


1.95
log
@update to lsof-4.88 and simplify patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/07/03 15:19:17 ajacoutot Exp $
d56 3
@


1.94
log
@Do not hardcode /sys but use BSDSRCDIR instead.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/06/26 22:06:36 zhuk Exp $
d5 1
a5 1
VERSION=	4.87
a7 1
REVISION=	4
@


1.93
log
@Add support for tmpfs to lsof(1). pvalchev@@ (MAINTAINER) agrees.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/08/06 18:43:15 naddy Exp $
d44 1
a44 1
CONFIGURE_ENV=	LSOF_CC="${CC}"
d55 1
a56 8
	@@if [ ! -d /sys ]; then \
	    echo ""; \
	    echo "*** Error: Building this package requires the" ; \
	    echo "*** kernel sources to be available under /sys" ; \
	    echo ""; \
	    exit 1; \
	fi
# XXX: CVS keyword found in patch
@


1.92
log
@move http://people.freebsd.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2013/06/08 11:40:48 dcoppa Exp $
d8 1
a8 1
REVISION=	3
@


1.91
log
@Adjust after FHASLOCK removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/05/27 07:56:31 dcoppa Exp $
d8 1
a8 1
REVISION=	2
d19 1
a19 1
HOMEPAGE=	http://people.freebsd.org/~abe/
@


1.90
log
@Fix awk script too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/05/24 15:14:03 dcoppa Exp $
d8 1
a8 1
REVISION=	1
@


1.89
log
@Normalize shebangs in the perl scripts that come with lsof
(using MODPERL_ADJ_FILES)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/05/23 15:08:36 dcoppa Exp $
d8 1
a8 1
REVISION=	0
d46 2
d63 3
a65 2

NO_TEST=	Yes
@


1.88
log
@Update to lsof-4.87.

Fix dead MASTER_SITES.

Regen distinfo.

Simplify post-extract.

Remove setgid kmem, since lsof as a regular user does not work
anymore.

Minor cleanups.

With the help, and ok sthen@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/03/11 11:41:31 espie Exp $
d8 1
d25 13
@


1.87
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2012/03/15 21:39:53 sthen Exp $
d5 1
a5 1
VERSION=	4.83
a7 1
REVISION=	8
d9 1
a9 1
MASTER_SITES=	http://www.mirrorservice.org/sites/vic.cc.purdue.edu/pub/tools/unix/lsof/OLD/ \
d12 3
d16 1
a16 2
		ftp://ftp.fu-berlin.de/pub/unix/tools/lsof/ \
		http://www.mirrorservice.org/sites/vic.cc.purdue.edu/pub/tools/unix/lsof/
d36 2
a37 10
	@@(cd ${WRKDIST}/..; \
	EXPMD5=`/usr/bin/grep "MD5 (" README.${DISTNAME} | \
	    /usr/bin/sed 's/^[ ]*//'` ; \
	CALCMD5=`md5 ${SRCBALL_NAME}.tar` ; \
	if [ "$${EXPMD5}"X != "$${CALCMD5}"X ]; then \
	    echo "Expected and calculated MD5 signatures don't agree." ; \
	    echo "($$EXPMD5 != $$CALCMD5)" ; \
	    exit 1 ; \
	fi ; \
	tar -xf ${SRCBALL_NAME}.tar)
d55 1
a55 1
	@@chmod 444 ${PREFIX}/share/lsof/00*
@


1.86
log
@fix with vmmap, originally from ariane@@
(recommitting the right diff..)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/03/15 21:36:44 sthen Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d55 1
a55 1
NO_REGRESS=	Yes
@


1.85
log
@oops committed from wrong tree - revert, will recommit the right one shortly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2011/11/16 00:25:05 sthen Exp $
d8 1
a8 1
REVISION=	7
d25 1
a25 1
WANTLIB=		c kvm
@


1.84
log
@fix with vmmap, originally from ariane@@
@
text
@d5 1
a5 1
VERSION=	4.85
d8 1
@


1.83
log
@bumps; net/if.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2011/07/20 13:50:08 sthen Exp $
d5 1
a5 1
VERSION=	4.83
a7 1
REVISION=	7
@


1.82
log
@- remove a bunch of unnecessary version checks
- allow lsof to build when kvm_getproc2 is removed
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2011/07/04 00:39:07 naddy Exp $
d8 1
a8 1
REVISION=	6
@


1.81
log
@install source man page
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/06/30 19:13:58 jasper Exp $
d8 1
a8 1
REVISION=	5
@


1.80
log
@fix lsof after FMARK and FDEFER rename

input from matthew@@
ok pvalchev@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/06/21 20:21:21 naddy Exp $
d63 1
a63 1
	${INSTALL_MAN} ${WRKSRC}/lsof.man ${PREFIX}/man/cat8/lsof.0
@


1.79
log
@remove USE_GROFF from ports that already ship a preformatted page
in their source
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/05/18 16:25:14 ajacoutot Exp $
d8 1
a8 1
REVISION=	4
@


1.78
log
@No need to support procfs since we use kvm_getproc2(3).

"axe it" pval@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/01/15 01:19:35 naddy Exp $
a32 1
USE_GROFF =	Yes
@


1.77
log
@recognize OpenBSD 4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/12/02 09:14:53 ajacoutot Exp $
d8 1
a8 1
REVISION=	3
@


1.76
log
@Set the sgid kmem bit by default.

"no objections" sthen@@, ok pval@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/11/22 20:10:54 jasper Exp $
d8 1
a8 1
REVISION=	2
@


1.75
log
@- add a homepage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/10/26 09:44:32 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.74
log
@use kvm_getproc2; ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2010/10/19 07:43:01 espie Exp $
d8 1
a8 1
REVISION=	0
d16 2
@


1.73
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2010/08/03 23:39:58 sthen Exp $
d8 1
@


1.72
log
@Fix MASTER_SITES, this is based on part of a diff from Daniel Dickman
(the other part, adding HOMEPAGE, can be revisited later). No pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2010/07/26 07:25:40 giovanni Exp $
d30 1
@


1.71
log
@
Update to 4.83
ok pvalchev@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2010/07/24 23:01:56 naddy Exp $
d9 4
a12 1
MASTER_SITES=	ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/ \
d14 1
a14 1
		ftp://www.mirrorservice.org/sites/vic.cc.purdue.edu/pub/tools/unix/lsof/
@


1.70
log
@recognize OpenBSD 4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/04/19 05:56:44 ajacoutot Exp $
d5 1
a5 1
VERSION=	4.82
a7 1
REVISION=	3
@


1.69
log
@Set group kmem on lsof binary (we are still NOT running sgid of course).

ok sthen@@ pvalchev@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/01/28 11:30:39 okan Exp $
d7 2
a8 1
PKGNAME=	${DISTNAME:S/_/-/}p2
@


1.68
log
@recognize 4.7; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2009/09/04 01:49:10 sthen Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p1
@


1.67
log
@Disable namecache support; this is the minimum needed to unbreak
lsof following fallout from changes made at f2k9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2009/06/21 13:24:02 sthen Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p0
@


1.66
log
@update to 4.82, and recognise OpenBSD 4.6. from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2009/02/15 23:46:08 sthen Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.65
log
@recognize 4.5, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2009/01/01 22:31:43 pvalchev Exp $
d5 1
a5 1
VERSION=	4.81
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p0
@


1.64
log
@lsof-4.81 & some updated master sites; prompted by vlad glagolev
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2008/12/16 14:54:30 jasper Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.63
log
@- remove a bunch of dead master sites
reported by a user, via wcmaier@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2008/07/02 19:02:19 brad Exp $
d5 1
a5 1
VERSION=	4.77
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p2
d9 4
a12 4
MASTER_SITES=	ftp://www.mirrorservice.org/sites/vic.cc.purdue.edu/pub/tools/unix/lsof/ \
		ftp://ftp.tau.ac.il/pub/unix/admin/ \
		ftp://lsof.itap.purdue.edu/pub/tools/unix/lsof/ \
		http://nedbsd.eu/~jasper/distfiles/
@


1.62
log
@Allow lsof to recognize 4.4.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2008/02/22 20:56:05 naddy Exp $
d9 1
a9 7
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/ \
		ftp://ftp.ayamura.org/pub/lsof/ \
		ftp://ftp.cerias.purdue.edu/pub/tools/unix/sysutils/lsof/ \
		ftp://ftp.cert.dfn.de/pub/tools/admin/lsof/ \
		ftp://ftp.fu-berlin.de/pub/unix/tools/lsof/ \
		ftp://ftp.fu-berlin.de/pub/unix/tools/lsof/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/ \
d11 2
a12 6
		ftp://ftp.tu-darmstadt.de/pub/sysadmin/lsof/ \
		ftp://ftp.tux.org/pub/sites/vic.cc.purdue.edu/tools/unix/lsof/ \
		ftp://gd.tuwien.ac.at/utils/admin-tools/lsof/ \
		ftp://sunsite.ualberta.ca/pub/Mirror/lsof/ \
		ftp://the.wiretapped.net/pub/security/host-security/lsof/

@


1.61
log
@recognize 4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2007/09/15 21:14:02 merdely Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p1
@


1.60
log
@Remove surrounding quotes in COMMENT-*/PERMIT_*/IGNORE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2007/02/14 01:54:42 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p0
@


1.59
log
@recognise 4.1; brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2006/05/09 19:13:32 pedro Exp $
d3 1
a3 1
COMMENT=	"list information about open files"
@


1.58
log
@Pace with inode/dinode changes by updating to version 4.77, fixes crash
reported by some people, okay jolan@@ and pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2005/12/20 08:13:46 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.57
log
@- sync with ext2fs dinode changes in -current so this builds/functions
- do not complain about unknown openbsd version..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2005/06/05 19:40:54 pvalchev Exp $
d5 1
a5 1
VERSION=	4.75
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p0
d43 1
a43 1
	EXPMD5=`/usr/bin/grep MD5 README.${DISTNAME} | \
@


1.56
log
@update to lsof-4.75
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2005/02/17 12:48:09 espie Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.55
log
@point people towards fstat(1) for OpenBSD-only usage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2004/12/20 10:35:35 alek Exp $
d5 1
a5 1
VERSION=	4.69
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p0
@


1.54
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2004/04/15 20:46:07 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.53
log
@homepage is dead, from FreeBSD via Robert Nagy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2004/01/11 00:14:31 pvalchev Exp $
d29 1
@


1.52
log
@update to lsof-4.69
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2003/06/19 06:30:42 pvalchev Exp $
a21 2

HOMEPAGE=	http://www-rcd.cc.purdue.edu/~abe/
@


1.51
log
@update to lsof-4.68
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2003/05/13 04:06:11 pvalchev Exp $
d5 1
a5 1
VERSION=	4.68
@


1.50
log
@update mirror list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2003/05/13 03:30:39 naddy Exp $
d5 1
a5 1
VERSION=	4.67
@


1.49
log
@Building this port requires the kernel sources to be available under /sys.
Put in a sanity check for this.  ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2003/04/01 18:50:16 jsyn Exp $
d10 12
a21 1
		ftp://ftp.crc.ca/packages/lsof/
@


1.48
log
@update to lsof-4.67; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2002/12/23 01:42:35 pvalchev Exp $
d42 9
@


1.47
log
@Update to lsof-4.66.
Thanks to the author Vic Abell for integrating patches and cooperating
all the way!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2002/12/12 08:14:24 pvalchev Exp $
d5 1
a5 1
VERSION=	4.66
@


1.46
log
@lsof-4.65
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2002/12/12 07:24:38 pvalchev Exp $
d5 1
a5 1
VERSION=	4.65
@


1.45
log
@There is no longer need to specify the type of sparc to lsof, remove
useless definitions which are no longer relevant to the source, and
thus make this port non-interactive on sparc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2002/10/28 19:53:44 naddy Exp $
d5 1
a5 1
VERSION=	4.63
@


1.44
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2002/09/15 19:00:35 pvalchev Exp $
a29 21

.if ${MACHINE_ARCH} == "sparc"
IS_INTERACTIVE=	Yes
.if defined(SUN4) && ${SUN4:U} == YES
CDEF=-DSUN4
.elif defined(SUN4C) && ${SUN4C:U} == YES
CDEF=-DSUN4C
.elif defined(SUN4M) && ${SUN4M:U} == YES
CDEF=-DSUN4M
.endif
MAKE_ENV=	CDEF="${CDEF}"
.if !defined(CDEF)
pre-build:
	@@echo
	@@echo "*** when building for a sparc you must specify one of"
	@@echo "***	SUN4=Yes, SUN4C=Yes, or SUN4M=Yes"
	@@echo "*** on the make command line"
	@@echo
	exit 1;
.endif
.endif
@


1.43
log
@remove dead master site
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2002/09/12 05:02:38 pvalchev Exp $
d63 2
@


1.42
log
@a master site changed; from Loic Tortay <loict@@bougon.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2002/04/23 21:36:54 pvalchev Exp $
d10 1
a10 2
		ftp://ftp.crc.ca/packages/lsof/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/
@


1.41
log
@update to lsof-4.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2002/02/03 03:15:31 angelos Exp $
a8 1
NEED_VERSION=	1.524
d10 1
a10 1
		ftp://ftp.crc.doc.ca/packages/lsof/ \
@


1.40
log
@Exit when warning that proper option has not been given for Sparc build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2002/01/29 19:40:51 pvalchev Exp $
d5 1
a5 1
VERSION=	4.61
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}p1
d9 1
a9 1
NEED_VERSION=	1.504
@


1.39
log
@Read kernel symbols from /dev/ksyms; this way lsof works with kernels with
any names, compressed or not.  Closes PR 2361
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2002/01/25 00:58:18 pvalchev Exp $
d50 1
@


1.38
log
@Update to lsof-4.61
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2001/12/24 06:56:52 pvalchev Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/_/-/}
@


1.37
log
@add homepage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2001/12/23 21:17:50 pvalchev Exp $
d5 3
a7 3
VERSION=	4.61B
DISTNAME=	lsof_${VERSION}.n+obsd
PKGNAME=	lsof-${VERSION}
d9 4
a12 4
NEED_VERSION=	1.502
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/NEW/ \
		ftp://ftp.crc.doc.ca/packages/lsof/NEW/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/NEW/
d30 2
a31 2
SRCBALL_NAME=	${DISTNAME}
WRKDIST=	${WRKDIR}/${SRCBALL_NAME}
d54 2
a55 2
	@@(cd ${WRKDIR}; \
	EXPMD5=`/usr/bin/grep MD5 README.${SRCBALL_NAME} | \
a63 1
	@@(cd ${WRKSRC}; echo "y" | ./Inventory || exit 1)
@


1.36
log
@Update to lsof-4.61B.n+obsd
Take maintainership, ok angelos
- Fix uvm kernel detection on ELF archs, enable lsof on them.  Replaced
check with a better one.  Understand how nlist() works.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2001/06/07 00:33:32 angelos Exp $
d13 2
@


1.35
log
@4.57B pre-release
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/05/06 03:59:04 lebel Exp $
d5 3
a7 2
DISTNAME=	lsof_4.57B.n+obsd
PKGNAME=	lsof-4.57B
d9 1
a9 1
NEED_VERSION=	1.402
d14 1
a14 1
MAINTAINER=     Angelos D. Keromytis <angelos@@openbsd.org>
d28 1
a28 2
SRCBALL_NAME=	${DISTNAME:S/_W$//}

@


1.34
log
@sysutils: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2000/12/07 01:35:49 angelos Exp $
d5 2
a6 2
DISTNAME=	lsof_4.53_W
PKGNAME=	lsof-4.53
d9 3
a11 3
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/ \
		ftp://ftp.crc.doc.ca/packages/lsof/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/
@


1.33
log
@Update to 4.53
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.32 2000/10/22 14:03:48 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.322
@


1.32
log
@Complete a few MAINTAINER names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2000/09/09 22:35:37 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.52A.n+obsd
PKGNAME=	lsof-4.51.1
d7 3
a9 3
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/NEW/ \
		ftp://ftp.crc.doc.ca/packages/lsof/NEW/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/NEW/
@


1.31
log
@Install manpage as lsof.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2000/09/02 20:30:54 brad Exp $
d11 1
a11 1
MAINTAINER=     angelos@@openbsd.org
@


1.30
log
@upgrade to lsof 4.52A.n+obsd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/09/02 03:26:56 brad Exp $
d65 1
a65 1
	${INSTALL_MAN} ${WRKSRC}/lsof.man ${PREFIX}/man/cat8/lsof.8
@


1.29
log
@upgrade to lsof 4.51
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/06/29 22:30:20 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.51_W
PKGNAME=	lsof-4.51_W
d7 3
a9 3
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/ \
		ftp://ftp.crc.doc.ca/packages/lsof/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/
@


1.28
log
@Update to version 4.50
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2000/04/22 20:32:13 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.50_W
PKGNAME=	lsof-4.50_W
d6 1
a6 2
NEED_VERSION=	1.191
FAKE=No
d11 1
a11 2
NO_PACKAGE=	"compile from source to set proper options"

d13 4
a16 1
MAINTAINER=     angelos@@openbsd.org
d18 1
a18 5
LICENSE_TYPE=		BSD
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d20 1
a20 1
HAS_CONFIGURE=	yes
d23 1
d26 1
d29 3
a31 3
.if ( ${MACHINE_ARCH} == "sparc" )
IS_INTERACTIVE=	yes
.if defined( SUN4 )
d33 1
a33 2
.endif
.if defined( SUN4C )
d35 1
a35 2
.endif
.if defined( SUN4M )
d38 2
a39 2
MAKE_ENV += "CDEF=${CDEF}"
.if !defined( CDEF )
d43 1
a43 1
	@@echo "***	SUN4=YES, SUN4C=YES, or SUN4M=YES"
d50 1
a50 1
	@@(cd ${WRKDIR} ; \
d59 1
a59 2
	${TAR} -xf ${SRCBALL_NAME}.tar \
	)
a61 1

d63 2
a64 2
	${INSTALL_PROGRAM} -o ${BINOWN} -g ${BINGRP} -m 0755 \
	    ${WRKSRC}/lsof ${PREFIX}/sbin
a65 1
	${INSTALL_SCRIPT_DIR} ${PREFIX}/share/lsof
d67 1
a67 1
	@@${CHMOD} 0444 ${PREFIX}/share/lsof/00*
@


1.27
log
@Make it compile properly under 2.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/04/09 18:01:32 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.49_W
PKGNAME=	lsof-4.49_W
@


1.27.2.1
log
@bring sysutils as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/06/29 22:30:20 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.50_W
PKGNAME=	lsof-4.50_W
@


1.26
log
@Version 4.49_W
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/04/09 17:38:17 espie Exp $
d70 1
a70 1
	${INSTALL_MAN} ${WRKSRC}/lsof.man ${PREFIX}/man/man1/lsof.1
@


1.25
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/03/24 22:12:00 espie Exp $
d3 2
a4 2
DISTNAME=	lsof_4.49C.n+obsd
PKGNAME=	lsof-4.49C
d8 1
a8 1
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/NEW/ \
@


1.24
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/02/23 20:25:49 angelos Exp $
d7 1
@


1.23
log
@Update to version 49C (abe@@purdue.edu)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/02/15 05:05:15 turan Exp $
d6 1
a12 1
NEED_VERSION=	1.191
@


1.22
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/02/12 06:30:04 turan Exp $
d3 2
a4 2
DISTNAME=	lsof_4.49B.n+obsd
PKGNAME=	lsof-4.49B
@


1.21
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/02/11 00:37:38 espie Exp $
d17 4
a20 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.20
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/02/01 22:28:50 angelos Exp $
d15 6
@


1.19
log
@New temporary version of lsof (4.49B.n+obsd), created by lsof author (Vicc
Abel) and used with permission. This should work on UVM systems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/01/28 07:47:35 fgsch Exp $
d12 1
a12 1
NEED_VERSION=	1.114
d21 1
a21 1
WRKSRC=		${WRKDIR}/${SRCBALL_NAME}
@


1.18
log
@Update to release 4.48. Some ${COMMAND} -> command changes; indent.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 1999/11/01 06:13:35 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.48_W
PKGNAME=	lsof-4.48
d6 1
a6 1
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/ \
@


1.17
log
@Update to version 4.46; no changes in the PLIST, patching the
Configure script also not necessary for OpenBSD 2.6 support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 1999/09/28 20:00:35 brad Exp $
d3 2
a4 2
DISTNAME=	lsof_4.46_W
PKGNAME=	lsof-4.46
d37 5
a41 6
	@@${ECHO} ""
	@@${ECHO} "*** when building for a sparc you must specify one of"
	@@${ECHO} "***	SUN4=YES, SUN4C=YES, or SUN4M=YES"
	@@${ECHO} "*** on the make command line"
	@@${ECHO} ""
	@@${FALSE}
d47 3
a49 2
	EXPMD5=`${GREP} MD5 README.${SRCBALL_NAME} | ${SED} 's/^[ ]*//'` ; \
	CALCMD5=`${MD5} ${SRCBALL_NAME}.tar` ; \
d51 3
a53 3
		${ECHO} "Expected and calculated MD5 signatures don't agree." ; \
		${ECHO} "($$EXPMD5 != $$CALCMD5)" ; \
		exit 1 ; \
d57 1
a57 1
	@@(cd ${WRKSRC};${ECHO} "y" | ./Inventory || exit 1)
d61 2
a62 1
	${INSTALL_PROGRAM} -o ${BINOWN} -g ${BINGRP} -m 0755 ${WRKSRC}/lsof ${PREFIX}/sbin
d64 1
a64 1
	@@${MKDIR} ${PREFIX}/share/lsof
@


1.16
log
@make lsof recognize OpenBSD 2.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 1999/09/19 22:16:48 angelos Exp $
d3 2
a4 2
DISTNAME=	lsof_4.45_W
PKGNAME=	lsof-4.45
@


1.15
log
@"${INSTALL} ${COPY} ${STRIP}" -> "${INSTALL_PROGRAM}"

I have no idea how the original line got there...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 1999/09/11 20:07:54 angelos Exp $
d10 1
a10 1
NEED_VERSION=	1.92
d12 1
a12 1
NO_PACKAGE=	"compile from source to set proper options"
d65 1
a65 1
	@@chmod 0444 ${PREFIX}/share/lsof/00*
@


1.14
log
@Update to version 4.45
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/06/02 15:59:17 brad Exp $
d61 1
a61 1
	${INSTALL} ${COPY} ${STRIP} -o ${BINOWN} -g ${BINGRP} -m 0755 ${WRKSRC}/lsof ${PREFIX}/sbin
@


1.13
log
@upgrade to lsof 4.43
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/04/18 20:34:28 brad Exp $
d3 2
a4 2
DISTNAME=	lsof_4.43_W
PKGNAME=	lsof-4.43
@


1.12
log
@upgrade to lsof 4.42
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/03/10 19:33:48 marc Exp $
d3 2
a4 2
DISTNAME=	lsof_4.42_W
PKGNAME=	lsof-4.42
d10 3
a12 1
NO_PACKAGE=	compile from source to set proper options
d42 1
a42 1
	@@false
d47 2
a48 2
	@@( cd ${WRKDIR} ; \
	EXPMD5=`/usr/bin/grep MD5 README.${SRCBALL_NAME} | sed 's/^[ ]*//'` ; \
d51 2
a52 2
		echo "Expected and calculated MD5 signatures don't agree." ; \
		echo "($$EXPMD5 != $$CALCMD5)" ; \
d55 1
a55 1
	${EXTRACT_CMD} ${EXTRACT_BEFORE_ARGS:S/z//} ${SRCBALL_NAME}.tar \
d57 1
a57 1
	@@( cd ${WRKSRC} ; echo "y" | ./Inventory || exit 1 )
d65 1
a65 2
	@@/bin/chmod 0444 ${PREFIX}/share/lsof/00*

@


1.11
log
@update to 4.41
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.10 1999/02/18 19:27:35 marc Exp $
#
d3 2
a4 2
DISTNAME=	lsof_4.41_W
PKGNAME=	lsof-4.41
d6 3
a13 4
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/ \
		ftp://ftp.crc.doc.ca/packages/lsof/ \
		ftp://ftp.sunet.se/pub/unix/admin/lsof/

d15 1
a15 1
CONFIGURE_SCRIPT=	Configure
a19 1

@


1.10
log
@update to version 4.40; apply buffer overflow patch;
update packing list; add MESSAGE (displayed after install when
using the bsd.port.mk just checked in) that notes lsof may be
sgid to kmem if 1) you want other than root to use it, and
2) you trust the (un-audited) code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/02/18 01:15:34 marc Exp $
d4 2
a5 3
DISTNAME=	lsof_4.40_W
DIST_SUBDIR=	lsof
PKGNAME=	lsof-4.40
d8 2
a15 5
PATCH_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/patches/4.40/ \
		ftp://ftp.crc.doc.ca/packages/lsof/

PATCHFILES=	arg.c.patch

a18 2

NO_PACKAGE=	compile from source to set proper options
@


1.9
log
@do not install lsof sgid to kmem
@
text
@d1 1
a1 6
# OpenBSD makefile for:		lsof
# Version required:     4.34
# Date created:         25 November 1997
# Whom:                 Angelos D. Keromytis
#
# $OpenBSD: Makefile,v 1.8 1998/08/25 05:15:14 marc Exp $
d4 3
a6 2
DISTNAME=	lsof_4.34_W
PKGNAME=	lsof-4.34
d11 2
a12 1
MASTER_SITES=	ftp://ftp.web.ad.jp/pub/UNIX/tools/lsof/  \
d15 5
a19 1
WRKSRC=		${WRKDIR}/${SRCBALL_NAME}
d27 2
@


1.8
log
@change sparc warning to pre-build from pre-fetch
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.7 1998/08/05 22:33:35 marc Exp $
d65 1
a65 1
	${INSTALL} ${COPY} ${STRIP} -o ${BINOWN} -g ${BINGRP} -m 2755 -g kmem ${WRKSRC}/lsof ${PREFIX}/sbin
@


1.7
log
@IS_INTERACTIVE for the sparc
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.6 1998/07/25 21:21:20 marc Exp $
d40 1
a40 1
pre-fetch:
@


1.6
log
@update to version 4.34; make it work on the
sparc (with a little command line help); update
the packing list
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.5 1997/12/22 00:49:23 niklas Exp $
d28 1
@


1.5
log
@m68k and mips based architectures enabled too
@
text
@d2 1
a2 1
# Version required:     3.87
d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 1997/12/22 00:28:56 niklas Exp $
d9 2
a10 2
DISTNAME=	lsof_4.15_W
PKGNAME=	lsof-4.15
d12 3
a17 2
MAINTAINER=     angelos@@openbsd.org

a21 1
MAN1=		lsof.1
d23 1
a23 1
ONLY_FOR_ARCHS=	alpha amiga arc hp300 i386 mac68k mvme68k pmax sun3 wgrisc
d26 22
@


1.4
log
@Support alpha
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1997/12/21 21:42:30 angelos Exp $
d23 1
a23 1
ONLY_FOR_ARCHS=	alpha i386
@


1.3
log
@Make lsof available only for i386. It may compile on other archs, but
some sparcs have very twisted include files (see NBPG definition) and
inclusion from userland is kinda tricky.
@
text
@d6 1
a6 1
# $Id: Makefile,v 1.2 1997/12/21 18:11:37 angelos Exp $
d23 1
a23 1
ONLY_FOR_ARCHS=	i386
@


1.2
log
@Remove old archive sites.
@
text
@d6 1
a6 1
# $Id: Makefile,v 1.1 1997/11/25 23:16:33 angelos Exp $
d22 2
@


1.1
log
@Add lsof port.
@
text
@d6 1
a6 1
# $Id: Makefile,v 1.16 1997/08/20 23:28:17 obrien Exp $
d12 1
a12 4
MASTER_SITES=	ftp://vic.cc.purdue.edu/pub/tools/unix/lsof/  \
		ftp://ftp.cert.dfn.de/pub/tools/admin/lsof/  \
		ftp://ftp.auscert.org.au/pub/mirrors/vic.cc.purdue.edu/lsof/  \
		ftp://ftp.web.ad.jp/pub/UNIX/tools/lsof/  \
@
