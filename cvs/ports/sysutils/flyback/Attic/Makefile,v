head	1.13;
access;
symbols
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.8.0.4
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	jasper_20080414:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2011.06.02.10.01.22;	author ajacoutot;	state dead;
branches;
next	1.12;

1.12
date	2010.11.20.17.22.41;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.24.21.36.04;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2010.09.05.12.24.11;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2010.08.30.17.57.31;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2009.12.22.12.51.52;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.03.28.16.49.49;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2009.01.29.17.37.56;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.09.30.08.15.06;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.07.07.16.24.16;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.26.13.14.06;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.06.26.10.21.03;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.14.13.39.51;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.04.14.13.39.51;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Remove, superseded by backintime{-gnome}. Newer versions are too Linux
centric anyway (hal, devices...).
@
text
@# $OpenBSD: Makefile,v 1.12 2010/11/20 17:22:41 espie Exp $

COMMENT=		Time Machine-like backup tool

DISTNAME=		flyback_0.4.0
PKGNAME=		${DISTNAME:S/_/-/}
EPOCH =			0
CATEGORIES=		sysutils x11

HOMEPAGE=		http://flyback-project.org/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=		http://flyback.googlecode.com/files/


MODULES=		lang/python

RUN_DEPENDS=		databases/py-sqlite \
			net/rsync \
			x11/gnome/py-gnome \
			devel/desktop-file-utils

# needs the "--link" option from gcp(1) for incremental backups
RUN_DEPENDS+=		misc/fileutils

NO_REGRESS=		Yes
NO_BUILD=		Yes

WRKDIST= 		${WRKDIR}/flyback

pre-configure:
	@@sed -e 's,!!MODPY_SITEPKG!!,${MODPY_SITEPKG},g' \
		-e 's,!!MODPY_BIN!!,${MODPY_BIN},g' \
		< ${FILESDIR}/flyback.sh > \
		${WRKSRC}/flyback
	@@perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},g;' \
		-e 's,!!PREFIX!!,${PREFIX},g;' \
		-e 's,!!MODPY_BIN!!,${MODPY_BIN},g' ${WRKSRC}/*.py

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/flyback
	${INSTALL_DATA_DIR} ${WRKINST}/${MODPY_SITEPKG}/flyback
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_SCRIPT} ${WRKSRC}/flyback ${PREFIX}/bin/flyback
	${INSTALL_DATA} ${WRKSRC}/GPL.txt ${WRKSRC}/viewer.glade \
		${PREFIX}/share/flyback
	find ${WRKSRC} -name \*.py -exec \
		${INSTALL_DATA} {} ${WRKINST}/${MODPY_SITEPKG}/flyback \;
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		< ${FILESDIR}/flyback.desktop > \
			${PREFIX}/share/applications/flyback.desktop

.include <bsd.port.mk>
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/24 21:36:04 ajacoutot Exp $
@


1.11
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/09/05 12:24:11 kili Exp $
d23 4
a26 4
RUN_DEPENDS=		::databases/py-sqlite \
			::net/rsync \
			::x11/gnome/py-gnome \
			:desktop-file-utils-*:devel/desktop-file-utils
d29 1
a29 1
RUN_DEPENDS+=		::misc/fileutils
@


1.10
log
@Don't mix old (p*) and new (REVISION) style.
Bump for real, which needs an EPOCH in this case (without it,
you can't update from *p6p0).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/08/30 17:57:31 fgsch Exp $
a19 1
USE_X11=		Yes
@


1.9
log
@Bump revision after python's default change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/12/22 12:51:52 sthen Exp $
d6 2
a7 2
PKGNAME=		${DISTNAME:S/_/-/}p6
REVISION =		0
@


1.8
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/03/28 16:49:49 naddy Exp $
d7 1
@


1.7
log
@bump for python dependency change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/01/29 17:37:56 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}p5
@


1.6
log
@- fix missing and/or wrong desktop goos

Thanks to sthen@@ who came up with a nice big list of potential missing
desktop goos but got caught up by crack-attack...
ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/09/30 08:15:06 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}p4
@


1.5
log
@- GNU cp is needed all the way; fix restore function
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/07/07 16:24:16 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}p3
@


1.4
log
@- make the crontabs work
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/06/26 13:14:06 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}p2
@


1.3
log
@- make it use the GNU version of cp(1) because flyback needs the
"--link" option for its incremental backups handling

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/06/26 10:21:03 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}p1
@


1.2
log
@- add .desktop file ; from jasper@@
- ignore broken symlink errors so we don't crash at startup

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/04/14 13:39:51 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}p0
d27 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
PKGNAME=		${DISTNAME:S/_/-/}
d25 2
a26 1
			::x11/gnome/py-gnome
d45 1
d51 3
@


1.1.1.1
log
@import flyback 0.4.0

Apple's Time Machine is a great feature in their OS, and UNIX has
almost all of the required technology already built in to recreate it.
This is a simple GUI to make it easy to use.

help and ok ajacoutot@@
@
text
@@
