head	1.9;
access;
symbols
	OPENBSD_6_1:1.9.0.2
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.8.0.2
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	chrisz_20141025:1.1.1.1
	chrisz:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2016.08.19.12.51.19;	author krw;	state Exp;
branches;
next	1.8;
commitid	iU6akZ6GHDkx5gHN;

1.8
date	2016.07.05.16.24.46;	author krw;	state Exp;
branches;
next	1.7;
commitid	3qv1jpb4JLQVMcmI;

1.7
date	2016.06.23.19.23.54;	author krw;	state Exp;
branches;
next	1.6;
commitid	vwUgBiCmN1lWQqPh;

1.6
date	2015.08.31.12.14.12;	author avsm;	state Exp;
branches;
next	1.5;
commitid	HN1lRNBrUEUe75eS;

1.5
date	2015.05.28.06.54.46;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	qeKRRhhc2ZGAHucT;

1.4
date	2015.01.07.11.00.23;	author avsm;	state Exp;
branches;
next	1.3;
commitid	BDBvTmhKgnru5flP;

1.3
date	2014.11.09.09.22.11;	author avsm;	state Exp;
branches;
next	1.2;
commitid	mMDRooXBYz3yWTpw;

1.2
date	2014.11.03.08.13.42;	author jasper;	state Exp;
branches;
next	1.1;
commitid	0gWg5dHlK94CJicR;

1.1
date	2014.10.25.17.10.14;	author chrisz;	state Exp;
branches
	1.1.1.1;
next	;
commitid	dgY2ghUU1Epfwh4Y;

1.1.1.1
date	2014.10.25.17.10.14;	author chrisz;	state Exp;
branches;
next	;
commitid	dgY2ghUU1Epfwh4Y;


desc
@@


1.9
log
@Update extlib to 1.7.0, the same version opam installs when asked.

Switch to github hosting. Delete dead MASTER_SITES.

One tweak to a dependent (dose) due to a structure change.

Tweaks & ok sthen@@ before 6.0 intervened
@
text
@# $OpenBSD: Makefile,v 1.8 2016/07/05 16:24:46 krw Exp $

MULTI_PACKAGES =	-main -lib

COMMENT-main =		OCaml source-based package manager
COMMENT-lib =		OPAM library

CATEGORIES =		sysutils devel

V =			1.2.2
GH_ACCOUNT =		ocaml
GH_PROJECT =		opam
GH_TAGNAME =		${V}
DISTNAME =		${GH_PROJECT}-${V}
REVISION =		2

PKGNAME-main =		opam-${V}
PKGNAME-lib =		opam-lib-${V}

HOMEPAGE =		https://opam.ocaml.org/

MAINTAINER =		Christopher Zimmermann <chrisz@@openbsd.org>

# LGPLv3
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB-main =		c m

MODULES =		lang/ocaml
BUILD_DEPENDS =		devel/git \
			sysutils/findlib \
			devel/ocaml-ocamlbuild \
			devel/cudf,-ocaml \
			devel/ocaml-cmdliner \
			devel/ocaml-dose \
			devel/ocaml-graph \
			devel/ocaml-re \
			devel/ocaml-jsonm

RUN_DEPENDS =		lang/ocaml-camlp4 \
			net/rsync \
			archivers/unzip \
			devel/gmake \
			archivers/bzip2 \
			net/curl

USE_GMAKE =		Yes

CONFIGURE_STYLE =	gnu

ALL_TARGET =		all html man
INSTALL_TARGET =	install libinstall
TEST_TARGET =		tests

docdir =		${PREFIX}/share/doc/opam


post-install:
	${INSTALL_DATA_DIR} ${docdir}/{pages,api}
	${INSTALL_DATA} \
		${WRKSRC}/{CHANGES,README.md} \
		${WRKSRC}/doc/design/* \
		${docdir}/
	${INSTALL_DATA} ${WRKSRC}/doc/pages/*.md ${docdir}/pages
	${INSTALL_DATA} ${WRKSRC}/doc/html/* ${docdir}/api
	${INSTALL_DATA} ${WRKSRC}/doc/dev-manual/dev-manual.pdf ${docdir}/
	${INSTALL_SCRIPT} ${FILESDIR}/aspcud ${PREFIX}/bin/aspcud

.include <bsd.port.mk>
@


1.8
log
@Update to latest (0.9.8), the same that opam installs.

Bump opam REVISION.

ok anil@@ chrisz@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/06/23 19:23:54 krw Exp $
d15 1
a15 1
REVISION =		1
@


1.7
log
@Stop building Ocaml's internal ocamlbuild and use the ocaml-ocamlbuild port
where needed.

The next step towards Ocaml 4.3.0.

Bulk build by sthen@@ identified several laggards which are included here.

ok anil@@ sthen@@ so final 4.3.0 polishing can be done in-tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/08/31 12:14:12 avsm Exp $
d15 1
a15 1
REVISION =		0
@


1.6
log
@opam: add missing patch hunks in upgrade to 1.2.2

ok jca@@, tested by krw@@ daniel@@ jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/05/28 06:54:46 ajacoutot Exp $
d15 1
d32 1
@


1.5
log
@Remove duplicate PLIST entries.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/01/07 11:00:23 avsm Exp $
d10 1
a10 1
V =			1.2.0
a14 2
REVISION-main =		2
REVISION-lib =		3
d41 3
a43 1
			devel/gmake
d57 1
a57 1
	${INSTALL_DATA_DIR} ${docdir}/{tutorials,api}
d62 1
a62 1
	${INSTALL_DATA} ${WRKSRC}/doc/tutorials/*.html ${docdir}/tutorials
d65 1
@


1.4
log
@Correct homepage for sysutils/opam, bump REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/11/09 09:22:11 avsm Exp $
d15 2
a16 1
REVISION =		2
@


1.3
log
@add missing RUN_DEPENDS to opam port needed for sensible operation

Also update HOMEPAGE to https version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/11/03 08:13:42 jasper Exp $
d15 1
a15 1
REVISION =		1
d20 1
a20 1
HOMEPAGE =		https://opam.ocamlpro.com/
@


1.2
log
@MAINTAINER should also include a name..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/10/25 17:10:14 chrisz Exp $
d15 1
a15 1
REVISION =		0
d20 1
a20 1
HOMEPAGE =		http://opam.ocamlpro.com/
d39 4
a42 2
# we don't use ocp-build (yet)
#MAKE_ENV =		OCP_HOME="${WRKDIR}"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d15 1
d22 1
a22 1
MAINTAINER =		chrisz@@openbsd.org
@


1.1.1.1
log
@Import OPAM - compiler and package (repository) manager for OCaml

ok krw@@
@
text
@@
