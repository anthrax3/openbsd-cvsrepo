head	1.34;
access;
symbols
	OPENBSD_6_1:1.31.0.2
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.19.0.4
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.17.0.6
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.17.0.4
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.2
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.14.0.2
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.13.0.2
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.9.0.4
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	wilfried-20071025:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.34
date	2017.09.25.10.37.09;	author sthen;	state Exp;
branches;
next	1.33;
commitid	2N0ANZX6nJ7F4w14;

1.33
date	2017.08.22.10.22.44;	author sthen;	state Exp;
branches;
next	1.32;
commitid	oKFCrNEM1zQjtIqW;

1.32
date	2017.07.06.13.55.05;	author sthen;	state Exp;
branches;
next	1.31;
commitid	nGbeY2LOMW6siZbx;

1.31
date	2016.12.30.17.39.22;	author jca;	state Exp;
branches;
next	1.30;
commitid	mU4HxX7fA27dM1B7;

1.30
date	2016.12.29.18.26.47;	author jca;	state Exp;
branches;
next	1.29;
commitid	2qOV7AmZJr2fPpfX;

1.29
date	2016.11.19.14.39.51;	author sthen;	state Exp;
branches;
next	1.28;
commitid	JQfRgtHo1Q6UDN7Y;

1.28
date	2016.10.12.11.57.56;	author sthen;	state Exp;
branches;
next	1.27;
commitid	5RnnuDc7HgAcR3zl;

1.27
date	2016.08.12.13.37.55;	author sthen;	state Exp;
branches;
next	1.26;
commitid	ibVOUmDz7m0GZZQp;

1.26
date	2016.05.28.14.26.46;	author sthen;	state Exp;
branches;
next	1.25;
commitid	QzSqwI2lLMLuEKPx;

1.25
date	2016.03.15.22.22.05;	author sthen;	state Exp;
branches;
next	1.24;
commitid	QHflZOadJWRXd0Y6;

1.24
date	2016.03.11.19.59.17;	author naddy;	state Exp;
branches;
next	1.23;
commitid	pguKLBEFv33DrgKU;

1.23
date	2015.12.02.14.33.06;	author sthen;	state Exp;
branches;
next	1.22;
commitid	XiGsGW275ekEj8Nd;

1.22
date	2015.10.30.14.43.22;	author sthen;	state Exp;
branches;
next	1.21;
commitid	g7Drfhrw9h69mX5h;

1.21
date	2015.10.21.13.25.18;	author sthen;	state Exp;
branches;
next	1.20;
commitid	8vgjKozarR2LPmZX;

1.20
date	2015.08.11.21.12.44;	author sthen;	state Exp;
branches;
next	1.19;
commitid	isJQq8Fh5d4gqZGJ;

1.19
date	2015.07.30.14.16.47;	author sthen;	state Exp;
branches;
next	1.18;
commitid	s3XLB2lGRLQ8w7BQ;

1.18
date	2015.03.16.18.07.55;	author naddy;	state Exp;
branches;
next	1.17;
commitid	IJdm3Zowcdkcxp5X;

1.17
date	2013.11.09.23.19.03;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.21.08.48.53;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2013.03.11.11.41.30;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2012.12.13.16.34.48;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2012.04.28.10.51.44;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2012.04.13.20.53.19;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2012.03.29.13.39.00;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2011.11.26.14.13.26;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.20.17.22.41;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.11.19.00.48;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.19.07.43.01;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.09.25.18.54.19;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2010.07.10.13.54.22;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2010.04.26.20.09.18;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2008.01.07.15.32.58;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2007.11.06.17.03.46;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.25.18.17.02;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.25.18.17.02;	author wilfried;	state Exp;
branches;
next	;


desc
@@


1.34
log
@avoid nested function in AC_TRY_COMPILE
@
text
@# $OpenBSD: Makefile,v 1.33 2017/08/22 10:22:44 sthen Exp $

COMMENT=	IPMI library and tools (in- and out-of-band)

DISTNAME=	freeipmi-1.5.7
REVISION=	0

SHARED_LIBS +=	freeipmi             6.3      # 18.3
SHARED_LIBS +=	ipmiconsole          3.0      # 5.4
SHARED_LIBS +=	ipmimonitoring       1.0      # 5.6
SHARED_LIBS +=	ipmidetect           1.0      # 0.0

CATEGORIES=	sysutils

HOMEPAGE=	https://www.gnu.org/software/freeipmi/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv3+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c gcrypt gpg-error iconv intl m pthread

MASTER_SITES=	${MASTER_SITE_GNU:=freeipmi/}

BUILD_DEPENDS=	devel/argp-standalone
LIB_DEPENDS=	security/libgcrypt \
		devel/gettext

SEPARATE_BUILD=	Yes
USE_GMAKE=	Yes

CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
FAKE_FLAGS=	localstatedir=${PREFIX}/share/examples/freeipmi \
		sysconfdir=${PREFIX}/share/examples/freeipmi \
		FREEIPMI_SYSCONFDIR=${PREFIX}/share/examples/freeipmi

post-install:
	cd ${PREFIX}/share/examples/freeipmi && \
	    mv lib/freeipmi/ipckey . && \
	    rm -r init.d sysconfig lib

.include <bsd.port.mk>
@


1.33
log
@update to freeipmi-1.5.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2017/07/06 13:55:05 sthen Exp $
d5 2
a6 2
V=		1.5.7
DISTNAME=	freeipmi-${V}
d33 2
a34 1
CONFIGURE_STYLE= gnu
@


1.32
log
@update to freeipmi-1.5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/12/30 17:39:22 jca Exp $
d5 1
a5 1
V=		1.5.6
@


1.31
log
@Stop limiting freeipmi to i386 and amd64.

sthen@@ points out that low-level io (inb/outb) isn't needed any more on
those archs, now that we have an ipmi driver.  ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/12/29 18:26:47 jca Exp $
d5 1
a5 2
V=		1.5.5
REVISION=	0
@


1.30
log
@Doesn't build on arm.

ok sthen@@ (maintainer)
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.29 2016/11/19 14:39:51 sthen Exp $

# needs machine/sysarch.h & machine/pio.h
ONLY_FOR_ARCHS=	amd64 i386
d6 1
@


1.29
log
@update to freeipmi-1.5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/10/12 11:57:56 sthen Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	amd64 arm i386
@


1.28
log
@update to freeipmi-1.5.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/08/12 13:37:55 sthen Exp $
d8 1
a8 1
V=		1.5.4
d11 2
a12 2
SHARED_LIBS +=	freeipmi             6.2      # 18.2
SHARED_LIBS +=	ipmiconsole          3.0      # 5.3
@


1.27
log
@update to freeipmi-1.5.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/05/28 14:26:46 sthen Exp $
d8 1
a8 1
V=		1.5.3
d11 2
a12 2
SHARED_LIBS +=	freeipmi             6.1      # 18.0
SHARED_LIBS +=	ipmiconsole          2.0      # 5.2
@


1.26
log
@update to freeipmi-1.5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/03/15 22:22:05 sthen Exp $
d8 1
a8 1
V=		1.5.2
@


1.25
log
@Remove wilfried@@'s _iopl patches from freeipmi, in-band support is now
available via /dev/ipmi0 (if enabled in the kernel) which is less dangerous
than securelevel=-1 and direct io writes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/03/11 19:59:17 naddy Exp $
d8 1
a8 2
V=		1.5.1
REVISION=	0
d11 1
a11 1
SHARED_LIBS +=	freeipmi             6.0      # 17.0
d25 1
a25 1
WANTLIB += c gpg-error m pthread gcrypt>=12
a28 1
MODULES=	devel/gettext
d30 2
a31 1
LIB_DEPENDS=	security/libgcrypt
@


1.24
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/12/02 14:33:06 sthen Exp $
d9 1
@


1.23
log
@update to freeipmi-1.5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/10/30 14:43:22 sthen Exp $
a36 1
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
@


1.22
log
@update to freeipmi-1.4.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/10/21 13:25:18 sthen Exp $
d8 1
a8 1
V=		1.4.11
d11 2
a12 2
SHARED_LIBS +=	freeipmi             5.1      # 16.6
SHARED_LIBS +=	ipmiconsole          2.0      # 5.3
@


1.21
log
@update to freeipmi-1.4.10, take MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/08/11 21:12:44 sthen Exp $
d8 1
a8 1
V=		1.4.10
@


1.20
log
@update to freeipmi-1.4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/07/30 14:16:47 sthen Exp $
d8 1
a8 1
V=		1.4.9
d11 1
a11 1
SHARED_LIBS +=	freeipmi             5.0      # 16.5
d19 2
@


1.19
log
@mirror distfile; MASTER_SITES points at an nonexistent hostname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/03/16 18:07:55 naddy Exp $
d6 1
a6 1
COMMENT=	FreeIPMI provides in-band and out-of-band IPMI software
d8 1
a8 1
V=		0.4.6
a9 1
REVISION=	5
d11 4
a14 5
SHARED_LIBS +=  freeipmi 4.0                  # .4.0
SHARED_LIBS +=  ipmidetect 0.0                # .0.0
SHARED_LIBS +=  freeipmi 4.0                  # .4.0
SHARED_LIBS +=  ipmiconsole 1.1               # .1.1
SHARED_LIBS +=  ipmimonitoring 0.1            # .0.1
d20 1
a20 1
# GPL v2
d25 1
a25 2
MASTER_SITES=	http://spacehopper.org/mirrors/
PORTROACH=	site:http://ftp.gnu.org/gnu/freeipmi/
d33 5
a37 4
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS+=${CONFIGURE_SHARED}
CONFIGURE_ARGS+=--disable-dependency-tracking
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="-L${LOCALBASE}/lib"
d39 2
a40 1
		sysconfdir=${PREFIX}/share/examples/freeipmi
d44 2
a45 4
	    mv ${WRKINST}${SYSCONFDIR}/ipmi_monitoring_sensors.conf . && \
	    mv db/freeipmi/bmc-config-template db/freeipmi/ipckey . && \
	    rm -rf init.d logrotate.d && \
	    rmdir db/freeipmi db log/freeipmi log
@


1.18
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/11/09 23:19:03 naddy Exp $
d27 2
a28 1
MASTER_SITES=	ftp://ftp.zresearch.com/pub/freeipmi/${V}/
@


1.17
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/21 08:48:53 ajacoutot Exp $
d10 1
a10 1
REVISION=	4
@


1.16
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/11 11:41:30 espie Exp $
d10 1
a10 1
REVISION=	3
d20 1
a20 1
HOMEPAGE=	http://www.gnu.org/software/freeipmi/
@


1.15
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/12/13 16:34:48 naddy Exp $
a34 1
USE_LIBTOOL=	Yes
@


1.14
log
@remove Peter Stromberg as maintainer:
"I haven't used any of those ports myself for a long time, so I think it's
best you remove me as maintainer."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/04/28 10:51:44 ajacoutot Exp $
a23 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.13
log
@Use LOCALSTATEDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/04/13 20:53:19 sthen Exp $
d10 1
a10 1
REVISION=	2
a20 2

MAINTAINER=	Peter Stromberg <wilfried@@openbsd.org>
@


1.12
log
@set --localstatedir=/var and fix a few file locations, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/03/29 13:39:00 sthen Exp $
d43 1
a43 2
CONFIGURE_ARGS+=--disable-dependency-tracking \
		--localstatedir=/var
@


1.11
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/11/26 14:13:26 espie Exp $
d10 1
a10 1
REVISION=	1
a40 1
USE_GROFF =	Yes
d43 2
a44 1
CONFIGURE_ARGS+=--disable-dependency-tracking
d46 2
d50 5
a54 5
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/freeipmi
	mv ${WRKINST}${SYSCONFDIR}/ipmi_monitoring_sensors.conf ${PREFIX}/share/examples/freeipmi
	mv ${WRKINST}${SYSCONFDIR}/sysconfig ${PREFIX}/share/examples/freeipmi
	rm -rf ${WRKINST}${SYSCONFDIR}/init.d
	rm -rf ${WRKINST}${SYSCONFDIR}/logrotate.d
@


1.10
log
@sometimes you wonder who is using this.
add missing library to PFRAG.shared.
wondering what worked with the old package...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/20 17:22:41 espie Exp $
d38 1
a38 1
SEPARATE_BUILD=	concurrent
@


1.9
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/11 19:00:48 espie Exp $
d10 1
a10 1
REVISION=	0
@


1.8
log
@last WANTLIB conversion, hopefully
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/19 07:43:01 espie Exp $
d30 1
a30 1
WANTLIB += c gpg-error m pthread gcrypt.>=12
d35 2
a36 2
BUILD_DEPENDS=	::devel/argp-standalone
LIB_DEPENDS=	::security/libgcrypt
@


1.7
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/09/25 18:54:19 steven Exp $
d30 1
a30 1
WANTLIB += c gpg-error m pthread
d36 1
a36 1
LIB_DEPENDS=	gcrypt.>=12::security/libgcrypt
@


1.6
log
@seems to build fine with openbsd libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/04/26 20:09:18 steven Exp $
d41 1
@


1.5
log
@fix dependencies
@
text
@d40 1
a40 1
USE_LIBTOOL=	gnu
@


1.4
log
@use gnu libtool here for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/01/07 15:32:58 merdely Exp $
d10 1
d35 2
a36 2
LIB_DEPENDS=	gcrypt.>=12::security/libgcrypt \
		::devel/argp-standalone
@


1.3
log
@Remove alpha from ONLY_FOR_ARCHS because machine/pio.h is needed.

ok wilfried@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/11/06 17:03:46 ajacoutot Exp $
d39 1
a39 1
USE_LIBTOOL=	Yes
@


1.2
log
@- this needs machine/sysarch.h to build, so set ONLY_FOR_ARCHS
(until we find a proper solution)

ok wilfried@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/10/25 18:17:02 wilfried Exp $
d3 2
a4 2
# needs machine/sysarch.h
ONLY_FOR_ARCHS=	alpha amd64 arm i386
@


1.1
log
@Initial revision
@
text
@d1 4
a4 1
# $OpenBSD: Makefile.template,v 1.53 2007/09/17 09:44:42 ajacoutot Exp $
@


1.1.1.1
log
@import of freeipmi-0.4.6

FreeIPMI is a collection of Intelligent Platform Management IPMI
system software. It provides in-band and out-of-band software and
a development library conforming to the Intelligent Platform
Management Interface (IPMI v1.5 and v2.0) standards.
@
text
@@
