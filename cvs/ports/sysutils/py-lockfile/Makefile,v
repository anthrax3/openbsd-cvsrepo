head	1.15;
access;
symbols
	OPENBSD_6_1:1.15.0.2
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.13.0.2
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.9.0.2
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.6.0.10
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.6
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.4
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.4.0.6
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	sthen_20101012:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.15
date	2017.01.03.19.26.58;	author landry;	state Exp;
branches;
next	1.14;
commitid	mhDMvmmnCsksnC0D;

1.14
date	2016.10.01.11.54.17;	author naddy;	state Exp;
branches;
next	1.13;
commitid	VJ09Ih4WMjVIWTmz;

1.13
date	2016.04.16.13.36.15;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	zG1mp3V2i1RzsMRY;

1.12
date	2016.04.16.13.35.02;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	64KizCQSGFsJefDz;

1.11
date	2016.04.15.13.00.18;	author ajacoutot;	state Exp;
branches;
next	1.10;
commitid	TcErsHm1jOrqzDHT;

1.10
date	2016.04.15.12.48.06;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	w0OApyQxWX0WYITU;

1.9
date	2016.01.10.13.40.33;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	K3r5xyMQdhtz2Ue6;

1.8
date	2016.01.10.12.32.05;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	Z6tWC04LpDNFjEa9;

1.7
date	2016.01.09.16.54.21;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	Kjj8vfqMo2cD1hUR;

1.6
date	2013.08.07.21.32.39;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.11.11.41.32;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2011.09.16.11.41.40;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2011.06.08.17.50.25;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.11.20.17.22.42;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.10.12.14.51.56;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.10.12.14.51.56;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.15
log
@bump ports depending on python3 in sysutils
@
text
@# $OpenBSD: Makefile,v 1.14 2016/10/01 11:54:17 naddy Exp $

COMMENT=		platform-independent file locking for Python

MODPY_EGG_VERSION=	0.12.2
DISTNAME=		lockfile-${MODPY_EGG_VERSION}
PKGNAME=		py-${DISTNAME}
REVISION=		2

CATEGORIES=		sysutils

HOMEPAGE=		https://launchpad.net/pylockfile

# MIT
PERMIT_PACKAGE_CDROM=	Yes

MODULES=		lang/python

BUILD_DEPENDS=		devel/py-pbr${MODPY_FLAVOR}
RUN_DEPENDS=		devel/py-pbr${MODPY_FLAVOR}

MODPY_PI=		Yes
MODPY_SETUPTOOLS=	Yes

FLAVORS=		python3
FLAVOR ?=

TEST_DEPENDS=		devel/py-nose${MODPY_FLAVOR} \
			textproc/py-sphinx${MODPY_FLAVOR}

pre-test:
	sed -i "s,^sphinx.*,sphinx," ${WRKSRC}/test-requirements.txt

.include <bsd.port.mk>
@


1.14
log
@The ${PROJECT}.googlecode.com/files/ master sites are no longer
accessible, but the distfiles are still available at an archive URL.
Introduce MASTER_SITE_GOOGLECODE and use it for all affected ports.

ok czarkoff@@ danj@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/04/16 13:36:15 ajacoutot Exp $
d8 1
a8 1
REVISION=		1
@


1.13
log
@No need for MAKE_ENV.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/04/16 13:35:02 ajacoutot Exp $
a15 2

MASTER_SITES=		https://pylockfile.googlecode.com/files/
@


1.12
log
@Fix regress.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/04/15 13:00:18 ajacoutot Exp $
a31 2

MAKE_ENV=		SPHINXBUILD=${LOCALBASE}/bin/sphinx-build${MODPY_BIN_SUFFIX}
@


1.11
log
@py3-sphinx is not picked up for some reason.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/04/15 12:48:06 ajacoutot Exp $
a29 4
.if ${FLAVOR:Mpython3}
# XXX sphinx is not picked up?
NO_TEST=		Yes
.else
d32 5
a36 1
.endif
@


1.10
log
@FLAVORS=toto... no way that wasn't me doing some stupid test.
Enable regression tests on all FLAVORs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/01/10 13:40:33 ajacoutot Exp $
d30 4
d36 1
@


1.9
log
@Add a python3 FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/01/10 12:32:05 ajacoutot Exp $
a2 1
FLAVORS=	toto
a29 4
.if ${FLAVOR:Mpython3}
# needs textproc/py-sphinx,python3
NO_TEST=		Yes
.else
d31 1
a31 2
			textproc/py-sphinx
.endif
@


1.8
log
@Missing dependency on devel/py-pbr.

reported by kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/01/09 16:54:21 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
d22 2
a23 2
BUILD_DEPENDS=		devel/py-pbr
RUN_DEPENDS=		devel/py-pbr
d28 8
a35 1
TEST_DEPENDS=		devel/py-nose \
d37 1
@


1.7
log
@Update to py-lockfile-0.12.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/08/07 21:32:39 naddy Exp $
d9 1
d21 3
@


1.6
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/11 11:41:32 espie Exp $
d3 1
d6 1
a6 1
MODPY_EGG_VERSION=	0.9.1
a7 1
REVISION=		2
d12 1
a12 1
HOMEPAGE=		https://code.google.com/p/pylockfile/
a19 1
TEST_DEPENDS=	${FULLPKGPATH}
d21 2
a22 4
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/py-lockfile/; \
	cd ${WRKSRC}; ${INSTALL_DATA} doc/lockfile.rst README LICENSE \
	    ${PREFIX}/share/doc/py-lockfile/
d24 2
a25 2
do-test:
	cd ${WRKSRC}/test; ${MODPY_BIN} test_lockfile.py
@


1.5
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/09/16 11:41:40 espie Exp $
d7 1
a7 1
REVISION=		1
d12 1
a12 1
HOMEPAGE=		http://code.google.com/p/pylockfile/
d17 1
a17 1
MASTER_SITES=		http://pylockfile.googlecode.com/files/
@


1.4
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/06/08 17:50:25 jasper Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d20 1
a20 1
REGRESS_DEPENDS=	${FULLPKGPATH}
d27 1
a27 1
do-regress:
@


1.3
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/11/20 17:22:42 espie Exp $
d7 1
a7 1
REVISION=		0
@


1.2
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/10/12 14:51:56 sthen Exp $
d7 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d22 1
a22 1
REGRESS_DEPENDS=	::${FULLPKGPATH}
@


1.1.1.1
log
@import ports/sysutils/py-lockfile, ok jasper@@

The lockfile package exports a LockFile class which provides a simple API for
locking files.  Unlike the Windows msvcrt.locking function, the fcntl.lockf
and flock functions, and the deprecated posixfile module, the API is
identical across both Unix (including Linux and Mac) and Windows platforms.
The lock mechanism relies on the atomic nature of the link (on Unix) and
mkdir (on Windows) system calls.  An implementation based on SQLite is also
provided, more as a demonstration of the possibilities it provides than as
production-quality code.
@
text
@@
