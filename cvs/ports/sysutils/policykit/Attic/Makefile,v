head	1.9;
access;
symbols
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	robert_20090606:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2010.06.26.03.42.59;	author ajacoutot;	state dead;
branches;
next	1.8;

1.8
date	2009.10.15.23.48.10;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.10.15.23.30.15;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.10.15.22.39.23;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.15.21.51.54;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.10.10.15.09.20;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.06.07.08.30.31;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.07.08.11.39;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.07.02.53.06;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.07.02.53.06;	author robert;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Remove non working policykit. It's been deprecated by polkit anyway.

ok robert@@
@
text
@# $OpenBSD: Makefile,v 1.8 2009/10/15 23:48:10 ajacoutot Exp $

BROKEN=		WIP does not work yet

COMMENT=	authorization framework

DISTNAME=	PolicyKit-0.9
PKGNAME=	${DISTNAME:L}p5

CATEGORIES=	sysutils security

SHARED_LIBS+=	polkit-dbus	0.0 \
		polkit-grant	0.0 \
		polkit		0.0

HOMEPAGE=	http://www.freedesktop.org/wiki/Software/PolicyKit

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2+
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

WANTLIB += c dbus-1 expat glib-2.0 gobject-2.0 pcre pthread

MASTER_SITES=	http://hal.freedesktop.org/releases/

MODULES=	textproc/intltool \
		devel/gettext

BUILD_DEPENDS=	::textproc/libxslt \
		::textproc/docbook-xsl
LIB_DEPENDS=	dbus-glib-1.>=4::x11/dbus-glib

AUTOCONF_VERSION= 2.62

CONFIGURE_STYLE= autoconf
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--localstatedir=/var \
		--with-polkit-user=_polkituser \
		--with-polkit-group=_polkituser \
		--enable-man-pages \
		--enable-gtk-doc=no \
		--with-authfw=bsdauth \
		--with-os-type=openbsd \
		--enable-man-pages \
		--disable-selinux

USE_GMAKE=	Yes
USE_LIBTOOL=	Yes

FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples/policykit

.include <bsd.port.mk>
@


1.8
log
@Fix WANTLIB.
Don't spam the console.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/10/15 23:30:15 ajacoutot Exp $
@


1.7
log
@Tweak a patch. While here, rework MESSAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/10/15 22:39:23 ajacoutot Exp $
d3 1
a3 2
# XXX
BROKEN=		WIP: does not work yet
d8 1
a8 1
PKGNAME=	${DISTNAME:L}p4
d26 1
a26 1
WANTLIB += c dbus-1 expat pcre pthread
@


1.6
log
@Add a patch from upstream via FreeBSD.
Re-add the BROKEN marker until this really works.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/10/15 21:51:54 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME:L}p3
@


1.5
log
@Bring this port up to shape:
* merge several patches from FreeBSD and pkgsrc
* several ports mecanical changes (fix perms, create helper dirs...)
* add myself as maintainer
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.4 2009/10/10 15:09:20 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME:L}p2
@


1.4
log
@Some cleanups, modes and owner/group fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/06/07 08:30:31 ajacoutot Exp $
d16 2
d24 1
a24 1
WANTLIB=	c
d31 3
a33 1
BUILD_DEPENDS=	::textproc/gtk-doc
d41 1
d45 1
a45 1
		--enable-gtk-doc \
@


1.3
log
@Add a default policy which allows root full control, and those in the
wheel group to authenticate for services using their password.

from FreeBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/06/07 08:11:39 ajacoutot Exp $
d6 2
a7 1
PKGNAME=	${DISTNAME:L}p1
d26 4
a29 2
MODULES=		textproc/intltool \
			devel/gettext
d31 1
a31 1
BUILD_DEPENDS=		::textproc/gtk-doc
d33 1
a33 2
AUTOCONF_VERSION=	2.62
CONFIGURE_STYLE=	autoconf
d36 9
a44 9
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--enable-man-pages \
			--enable-gtk-doc \
			--with-authfw=bsdauth \
			--with-os-type=openbsd \
			--enable-man-pages \
			--disable-selinux

USE_GMAKE=		Yes
d46 1
d49 1
a49 1
FAKE_FLAGS=		sysconfdir=${PREFIX}/share/examples/policykit
@


1.2
log
@Merge some changes from my old PolicyKit port:
- tweak DESCR and COMMENT
- SHARED_LIBS should being at 0.0
- better HOMEPAGE
- add gettext and intltool MODULES
- explicitely set some CONFIGURE_ARGS
- remove bogus dbus-uuidgen which is already ran by the dbus pkg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/06/07 02:53:06 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:L}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=	Framework for controlling access to system-wide components
d6 2
a7 2
PKGNAME=	${DISTNAME:L}
CATEGORIES=	sysutils	
d9 3
a11 3
SHARED_LIBS+=	polkit-dbus	2.0 \
		polkit-grant	2.0 \
		polkit		2.0
d13 1
a13 1
HOMEPAGE=	http://cgit.freedesktop.org/PolicyKit/
d25 5
d32 10
a41 3
CONFIGURE_ARGS=		--with-authfw=bsdauth \
			--with-os-type=openbsd
CONFIGURE_ENV=		CFLAGS="-I${LOCALBASE}/include"
d46 1
a46 1
FAKE_FLAGS=		sysconfdir=${TRUEPREFIX}/share/examples/policykit
@


1.1.1.1
log
@import of PolicyKit-0.9;

PolicyKit is a framework for defining policy for system-wide components and
for desktop pieces to configure it. It is used by HAL.

@
text
@@
