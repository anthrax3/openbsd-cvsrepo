head	1.3;
access;
symbols
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.06.25.22.00.24;	author jasper;	state dead;
branches;
next	1.2;
commitid	Q9F5fWaMIbw02nqS;

1.2
date	2014.03.09.19.51.16;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2013.06.28.08.36.12;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- update to facter-2.1.0
* nearly all local patches have been merged into a release now
* http://docs.puppetlabs.com/facter/2.1/release_notes.html
@
text
@$OpenBSD: patch-spec_unit_physicalprocessorcount_spec_rb,v 1.2 2014/03/09 19:51:16 jasper Exp $

From 766c84a84a4a7008858c45eaf221402a81e1bfa2 Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
Date: Thu, 27 Jun 2013 22:59:20 +0200
Subject: [PATCH] Add physicalprocessorcount fact for OpenBSD

--- spec/unit/physicalprocessorcount_spec.rb.orig	Mon May 13 21:30:15 2013
+++ spec/unit/physicalprocessorcount_spec.rb	Thu Jun 27 23:03:45 2013
@@@@ -73,4 +73,12 @@@@ describe "Physical processor count facts" do
       end
     end
   end
+  
+  describe "on openbsd" do
+    it "should return 4 physical CPUs" do
+      Facter.fact(:kernel).stubs(:value).returns("OpenBSD")
+      Facter::Util::Resolution.expects(:exec).with("sysctl -n hw.ncpufound").returns("4")
+      Facter.fact(:physicalprocessorcount).value.should == "4"
+    end
+  end
 end
@


1.2
log
@sync comments for patches submitted/merged upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-spec_unit_physicalprocessorcount_spec_rb,v 1.1 2013/06/28 08:36:12 jasper Exp $
@


1.1
log
@Redo the physicalprocessorcount fact in a less invasive way and add a test

ok robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 2
OpenBSD: add physicalprocessorcount fact
http://projects.puppetlabs.com/issues/21499
@

