head	1.21;
access;
symbols
	OPENBSD_6_0:1.20.0.6
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.20.0.4
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.19.0.4
	OPENBSD_5_7_BASE:1.19
	OPENBSD_5_6:1.19.0.2
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.18.0.2
	OPENBSD_5_5_BASE:1.18
	OPENBSD_5_4:1.17.0.4
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.16.0.2
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.11.0.4
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.4
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.5.0.6
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.4
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.4.0.6
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2;
locks; strict;
comment	@# @;


1.21
date	2017.01.16.00.12.15;	author jca;	state Exp;
branches;
next	1.20;
commitid	QDDPbfZcwvXjWw33;

1.20
date	2015.04.23.22.38.55;	author sthen;	state Exp;
branches;
next	1.19;
commitid	94kzhbdZHtrNGmOO;

1.19
date	2014.04.21.11.41.11;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2014.01.07.21.55.54;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2012.08.09.12.05.16;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2012.06.08.21.07.02;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2012.01.11.16.01.33;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.19.15.59.57;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.02.10.37.08;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2011.03.09.11.00.55;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.03.31.22.11.11;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2009.04.03.15.40.12;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2008.09.27.17.30.08;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2008.09.08.19.38.30;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2008.02.03.18.06.41;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2008.01.30.20.55.59;	author mbalmer;	state dead;
branches;
next	1.5;

1.5
date	2006.05.03.17.32.09;	author henning;	state Exp;
branches;
next	1.4;

1.4
date	2004.09.27.03.10.24;	author marcm;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.09.06.48.48;	author marcm;	state Exp;
branches;
next	1.2;

1.2
date	2003.01.16.23.42.18;	author marcm;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.14.16.14.33;	author marcm;	state Exp;
branches;
next	;


desc
@@


1.21
log
@Regen patches.
@
text
@$OpenBSD: patch-clients_Makefile_in,v 1.20 2015/04/23 22:38:55 sthen Exp $
--- clients/Makefile.in.orig	Wed Mar  9 09:51:12 2016
+++ clients/Makefile.in	Sun Jan 15 23:54:35 2017
@@@@ -520,10 +520,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
 upssched_SOURCES = upssched.c upssched.h
 upssched_LDADD = ../common/libcommon.la ../common/libparseconf.la $(NETLIBS)
 upsimage_cgi_SOURCES = upsimage.c upsclient.h upsimagearg.h cgilib.c cgilib.h
-upsimage_cgi_LDADD = $(LDADD) $(LIBGD_LDFLAGS)
+upsimage_cgi_LDADD = $(LDADD) $(LIBGD_LDFLAGS) -all-static
 upsset_cgi_SOURCES = upsset.c upsclient.h cgilib.c cgilib.h
+upsset_cgi_LDADD = $(LDADD) -all-static
 upsstats_cgi_SOURCES = upsstats.c upsclient.h status.h upsstats.h	\
  upsimagearg.h cgilib.c cgilib.h
+upsstats_cgi_LDADD = $(LDADD) -all-static
 
 
 # not LDADD.
@


1.20
log
@update to NUT 2.7.3
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.19 2014/04/21 11:41:11 sthen Exp $
--- clients/Makefile.in.orig	Wed Apr 22 09:38:04 2015
+++ clients/Makefile.in	Thu Apr 23 15:05:19 2015
@@@@ -519,10 +519,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.19
log
@update to NUT 2.7.2
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.18 2014/01/07 21:55:54 sthen Exp $
--- clients/Makefile.in.orig	Thu Apr 17 21:26:31 2014
+++ clients/Makefile.in	Mon Apr 21 11:51:50 2014
@@@@ -433,10 +433,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.18
log
@update to nut-2.7.1
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.17 2012/08/09 12:05:16 sthen Exp $
--- clients/Makefile.in.orig	Wed Nov 20 19:55:13 2013
+++ clients/Makefile.in	Thu Nov 21 22:08:48 2013
@@@@ -437,10 +437,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.17
log
@update to NUT 2.6.5; bugfixes, cleanup, new device support, etc.
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.16 2012/06/08 21:07:02 sthen Exp $
--- clients/Makefile.in.orig	Wed Aug  8 20:35:50 2012
+++ clients/Makefile.in	Thu Aug  9 01:35:52 2012
@@@@ -391,10 +391,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.16
log
@update to NUT 2.6.4 rolling in the patch for CVE 2012-2944 which we had locally,
adding new device support, better snmp support for various devices, and many
other fixes and improvements.
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.15 2012/01/11 16:01:33 sthen Exp $
--- clients/Makefile.in.orig	Thu May 31 11:38:07 2012
+++ clients/Makefile.in	Fri Jun  8 01:38:28 2012
@@@@ -384,10 +384,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.15
log
@update to NUT 2.6.3.

- nut-scanner has been changed to dlopen()ing modules, so roll it into the
main package now this can be done without bringing in excess dependencies.
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.14 2011/09/19 15:59:57 sthen Exp $
--- clients/Makefile.in.orig	Tue Jan  3 13:36:07 2012
+++ clients/Makefile.in	Wed Jan 11 15:13:10 2012
@@@@ -381,10 +381,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.14
log
@update to NUT 2.6.2 and add rc.d scripts

- thanks ajacoutot@@ for looking over the scripts

- note that there has been some major work on apcsmart; in the event
of problems the old driver is still available as apcsmart-old
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.13 2011/06/02 10:37:08 sthen Exp $
--- clients/Makefile.in.orig	Thu Sep 15 12:33:21 2011
+++ clients/Makefile.in	Mon Sep 19 09:22:02 2011
@@@@ -375,10 +375,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.13
log
@update NUT to 2.6.1; bugfixes, cleanup, improvements and new device support.
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.12 2011/03/09 11:00:55 sthen Exp $
--- clients/Makefile.in.orig	Wed Jun  1 13:00:01 2011
+++ clients/Makefile.in	Thu Jun  2 09:20:57 2011
@@@@ -363,10 +363,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.12
log
@- update nut to 2.6.0 (major documentation revamp and support for new
devices, including APC 5G, various Eaton, HP, and Tripp Lite models,
and a number of USB HID devices)

- build the snmp package by default

- use correct user/group names in MESSAGE
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.11 2010/03/31 22:11:11 sthen Exp $
--- clients/Makefile.in.orig	Fri Jan 14 19:59:12 2011
+++ clients/Makefile.in	Sat Feb 26 14:37:36 2011
@@@@ -364,10 +364,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.11
log
@update to 2.4.3, tested by Denny White and Aaron Stellman

note that with USB UPS, you may have to allow permissions on
further ugen subdevices (e.g. ugen0.01 as well as ugen0.00).
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.10 2009/04/03 15:40:12 sthen Exp $
--- clients/Makefile.in.orig	Tue Feb 23 10:04:41 2010
+++ clients/Makefile.in	Sat Mar 20 23:18:11 2010
@@@@ -359,10 +359,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
d6 1
a6 1
 upssched_LDADD = ../common/libcommon.a ../common/libparseconf.la $(NETLIBS)
@


1.10
log
@update to 2.4.1, code cleanup and adds support for a bunch of new
UPS and also now preliminary support for PDUs.

ok mbalmer (maintainer),
"commit and we fix in-tree if i run into issues" henning
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.9 2008/09/27 17:30:08 martynas Exp $
--- clients/Makefile.in.orig	Tue Feb 17 09:24:09 2009
+++ clients/Makefile.in	Wed Mar 18 21:27:43 2009
@@@@ -342,10 +342,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
@


1.9
log
@- add neon to LIB_DEPENDS, so that netxml driver always builds
- upsimage.cgi used upsimage_cgi_LDFLAGS to tweak for -all-static,
and not *_LDADD as upsstats.cgi and upsset.cgi did.  as a result
upsimage.cgi was linked dynamically, therefore broken inside chroot
- add USE_GMAKE, so that it builds on landisk
- make lib-depends-check happy
- add @@bin marker for bin/snmp-ups
- bump all PKGNAMEs
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.8 2008/09/08 19:38:30 martynas Exp $
--- clients/Makefile.in.orig	Wed May  7 12:29:26 2008
+++ clients/Makefile.in	Sat Sep 27 15:40:08 2008
@@@@ -329,10 +329,12 @@@@ upsmon_SOURCES = upsmon.c upsmon.h upsclient.h
d6 1
a6 1
 upssched_LDADD = ../common/libcommon.a $(NETLIBS) ../common/parseconf.o 
@


1.8
log
@update to nut-2.2.2, which contains the old agiler driver from 2.2.0
(now called agiler-old)
upses such as the below can now work again:
{0x0665, 0x5161, &agiler_old_subdriver},        /* Belkin F6C1200-UNV */
{0x06da, 0x0003, &agiler_old_subdriver},        /* Mustek Powermust */
{0x0f03, 0x0001, &agiler_old_subdriver},        /* Unitek Alpha 1200Sx *
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-clients_Makefile_in,v 1.7 2008/02/03 18:06:41 kili Exp $
d3 3
a5 2
+++ clients/Makefile.in	Wed Aug 27 17:18:49 2008
@@@@ -330,9 +330,12 @@@@ upssched_SOURCES = upssched.c upssched.h
d8 2
a9 2
 upsimage_cgi_LDADD = $(LDADD) $(LIBGD_LDFLAGS)
+upsimage_cgi_LDFLAGS = $(LDFLAGS) -all-static
@


1.7
log
@
Bring back static CGIs.
Load config files from /etc/nut.

ok mbalmer@@
@
text
@d1 4
a4 4
$OpenBSD$
--- clients/Makefile.in.orig	Fri Dec 21 13:00:51 2007
+++ clients/Makefile.in	Sun Feb  3 15:03:06 2008
@@@@ -339,9 +339,12 @@@@ upssched_SOURCES = upssched.c upssched.h
@


1.6
log
@Update to nut ver. 2.2.1.

requested by and ok henning
@
text
@d1 13
a13 5
$OpenBSD: patch-clients_Makefile_in,v 1.5 2006/05/03 17:32:09 henning Exp $
--- clients/Makefile.in.orig	Wed May  4 11:36:36 2005
+++ clients/Makefile.in	Mon May  1 17:40:26 2006
@@@@ -58,13 +58,13 @@@@ upslog: upslog.c $(UPSCLI_OBJ) $(LIBDEP)
 	$(CC) $(NET_CFLAGS) -o upslog upslog.c $(UPSCLI_OBJ) $(LIBOBJ) $(NET_LDFLAGS)
a14 3
 upsstats.cgi: upsstats.c $(UPSCLI_OBJ) cgilib.o $(LIBDEP)
-	$(CC) $(NET_CFLAGS) -o upsstats.cgi upsstats.c $(UPSCLI_OBJ) cgilib.o $(LIBOBJ) $(NET_LDFLAGS)
+	$(CC) $(NET_CFLAGS) -o upsstats.cgi upsstats.c $(UPSCLI_OBJ) cgilib.o $(LIBOBJ) $(NET_LDFLAGS) -static
d16 1
a16 10
 upsimage.cgi: upsimage.c $(UPSCLI_OBJ) cgilib.o $(LIBDEP)
-	$(CC) $(NET_CFLAGS) $(GD_INCLUDES) -o upsimage.cgi upsimage.c $(UPSCLI_OBJ) cgilib.o $(GD_LIBS) $(LIBOBJ) $(NET_LDFLAGS)
+	$(CC) $(NET_CFLAGS) $(GD_INCLUDES) -o upsimage.cgi upsimage.c $(UPSCLI_OBJ) cgilib.o $(GD_LIBS) $(LIBOBJ) $(NET_LDFLAGS) -static
 
 upsset.cgi: upsset.c $(UPSCLI_OBJ) cgilib.o $(LIBDEP)
-	$(CC) $(NET_CFLAGS) -o upsset.cgi upsset.c $(UPSCLI_OBJ) cgilib.o $(LIBOBJ) $(NET_LDFLAGS)
+	$(CC) $(NET_CFLAGS) -o upsset.cgi upsset.c $(UPSCLI_OBJ) cgilib.o $(LIBOBJ) $(NET_LDFLAGS) -static
 
 upsmon: upsmon.c $(UPSCLI_OBJ) $(LIBDEP)
 	$(CC) $(NET_CFLAGS) -o upsmon upsmon.c $(UPSCLI_OBJ) $(LIBOBJ) $(NET_LDFLAGS)
@


1.5
log
@update to nut-2.0.3, last not leas bringing many format string fixes
preserve my changes to the fentonups driver, allowing the detection logic
to be bypassed and a model to be forced - for UPSes that do implement the
protocol except the identification command, which seems to be somewhat common
the Xanto S3000R thing here behaves like that, and support for it is added
ok mbalmer
@
text
@d1 1
a1 1
$OpenBSD: patch-clients_Makefile_in,v 1.4 2004/09/27 03:10:24 marcm Exp $
@


1.4
log
@Update to the 2.0 tree of Nut.

This is a feature release so if you're upgrading, take a look at the
release notes here:

http://random.networkupstools.org/source/2.0/new-2.0.0.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-clients_Makefile_in,v 1.3 2004/02/09 06:48:48 marcm Exp $
--- clients/Makefile.in.orig	Tue Sep  2 13:25:54 2003
+++ clients/Makefile.in	Thu Sep 16 08:48:42 2004
@@@@ -57,13 +57,13 @@@@ upslog: upslog.c $(UPSCLI_OBJ) $(LIBDEP)
@


1.3
log
@Update to 1.4.1.

In addition to the standard bugfixes, this is a major port rewrite.
The port now uses a '_ups' user and the CGIs created can now run under
either chrooted Apache or non-chrooted Apache.
@
text
@d1 4
a4 4
$OpenBSD$
--- clients/Makefile.in.orig	2004-01-03 13:49:46.000000000 -0800
+++ clients/Makefile.in	2004-01-03 13:51:23.000000000 -0800
@@@@ -54,13 +54,13 @@@@ upslog: upslog.c $(UPSCLI_OBJ) $(LIBDEP)
@


1.2
log
@Update to 1.2.1, a substantial update from 1.0.0.

Changes are listed here:
http://www.exploits.org/nut/release/1.2/new-1.2.1.txt

ok sturm@@
@
text
@d1 5
a5 5
$OpenBSD: patch-clients_Makefile_in,v 1.1 2002/10/14 16:14:33 marcm Exp $
--- clients/Makefile.in.orig	Mon Dec  2 04:09:20 2002
+++ clients/Makefile.in	Sun Dec 29 16:38:29 2002
@@@@ -51,13 +51,13 @@@@ upslog: upslog.c upsclient.o $(LIBDEP)
 	$(CC) $(NET_CFLAGS) -o upslog upslog.c upsclient.o $(LIBOBJ) $(NET_LDFLAGS)
d7 3
a9 3
 upsstats.cgi: upsstats.c upsclient.o cgilib.o ../common/parseconf.o $(LIBDEP)
-	$(CC) $(NET_CFLAGS) -o upsstats.cgi upsstats.c upsclient.o cgilib.o ../common/parseconf.o $(LIBOBJ) $(NET_LDFLAGS)
+	$(CC) $(NET_CFLAGS) -o upsstats.cgi upsstats.c upsclient.o cgilib.o ../common/parseconf.o $(LIBOBJ) $(NET_LDFLAGS) -static
d11 3
a13 3
 upsimage.cgi: upsimage.c upsclient.o cgilib.o $(LIBDEP)
-	$(CC) $(NET_CFLAGS) $(GD_INCLUDES) -o upsimage.cgi upsimage.c upsclient.o cgilib.o $(GD_LIBS) $(LIBOBJ) $(NET_LDFLAGS)
+	$(CC) $(NET_CFLAGS) $(GD_INCLUDES) -o upsimage.cgi upsimage.c upsclient.o cgilib.o $(GD_LIBS) $(LIBOBJ) $(NET_LDFLAGS) -lgd -static
d15 3
a17 3
 upsset.cgi: upsset.c upsclient.o cgilib.o ../common/parseconf.o $(LIBDEP)
-	$(CC) $(NET_CFLAGS) -o upsset.cgi upsset.c upsclient.o cgilib.o ../common/parseconf.o $(LIBOBJ) $(NET_LDFLAGS)
+	$(CC) $(NET_CFLAGS) -o upsset.cgi upsset.c upsclient.o cgilib.o ../common/parseconf.o $(LIBOBJ) $(NET_LDFLAGS) -static
d19 2
a20 2
 upsmon: upsmon.c upsclient.o ../common/parseconf.o $(LIBDEP)
 	$(CC) $(NET_CFLAGS) -o upsmon upsmon.c upsclient.o ../common/parseconf.o $(LIBOBJ) $(NET_LDFLAGS)
@


1.1
log
@* Update to 1.0.0

* CGIs are now a SUBPACKAGE and work with chrooted Apache

* Make myself MAINTAINER

* Mark conflict with upad-2.0

ok naddy@@ and nate@@
@
text
@d1 5
a5 5
$OpenBSD$
--- clients/Makefile.in.orig	Sat Jun  8 02:09:09 2002
+++ clients/Makefile.in	Mon Sep 30 22:01:28 2002
@@@@ -51,16 +51,16 @@@@ cgilib.o: cgilib.c
 	$(CC) $(CFLAGS) -c cgilib.c
d7 3
a9 3
 multimon.cgi: multimon.c upsfetch.o cgilib.o ../common/parseconf.o $(LIBDEP)
-	$(CC) $(CFLAGS) -o multimon.cgi multimon.c upsfetch.o cgilib.o ../common/parseconf.o $(LIBOBJ)
+	$(CC) $(CFLAGS) -o multimon.cgi multimon.c upsfetch.o cgilib.o ../common/parseconf.o $(LIBOBJ) -static
d11 3
a13 3
 upsset.cgi: upsset.c upsfetch.o cgilib.o ../common/parseconf.o $(LIBDEP)
-	$(CC) $(CFLAGS) -o upsset.cgi upsset.c upsfetch.o cgilib.o ../common/parseconf.o $(LIBOBJ)
+	$(CC) $(CFLAGS) -o upsset.cgi upsset.c upsfetch.o cgilib.o ../common/parseconf.o $(LIBOBJ) -static
d15 3
a17 3
 upsstats.cgi: upsstats.c upsfetch.o cgilib.o $(LIBDEP)
-	$(CC) $(CFLAGS) -o upsstats.cgi upsstats.c upsfetch.o cgilib.o $(LIBOBJ)
+	$(CC) $(CFLAGS) -o upsstats.cgi upsstats.c upsfetch.o cgilib.o $(LIBOBJ) -static
d19 2
a20 6
 upsimage.cgi: upsimage.c upsfetch.o cgilib.o $(LIBDEP)
-	$(CC) $(CFLAGS) -o upsimage.cgi upsimage.c upsfetch.o cgilib.o @@GFXLIBS@@ -lm $(LIBOBJ)
+	$(CC) $(CFLAGS) -o upsimage.cgi upsimage.c upsfetch.o cgilib.o @@GFXLIBS@@ -lm $(LIBOBJ) -lgd -static
 
 clean:
 	rm -f *~ *.o $(PROGS) $(SPROGS) $(CGIPROGS)
@

