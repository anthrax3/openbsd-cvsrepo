head	1.22;
access;
symbols
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.20.0.4
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.20.0.2
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.19.0.2
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.13.0.4
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.12.0.4
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.7.0.4
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.7.0.2
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.6.0.6
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.4
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.2
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_6:1.5.0.4
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.5.0.2
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.1.1.1.0.8
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.6
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.4
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	nate_2001-Feb-06:1.1.1.1
	nate:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2014.03.23.21.23.51;	author sthen;	state dead;
branches;
next	1.21;

1.21
date	2014.01.07.21.55.54;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2012.08.09.12.05.16;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2012.06.08.21.07.02;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.01.12.11.39.36;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2012.01.11.16.01.33;	author sthen;	state dead;
branches;
next	1.16;

1.16
date	2011.09.19.15.59.57;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.02.10.37.08;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.03.09.11.00.55;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2010.03.31.22.11.11;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.04.03.15.40.12;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2008.09.08.19.38.30;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2008.02.03.18.06.41;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2008.01.30.20.55.59;	author mbalmer;	state Exp;
branches;
next	1.8;

1.8
date	2007.05.18.12.22.46;	author henning;	state Exp;
branches;
next	1.7;

1.7
date	2006.05.03.17.32.09;	author henning;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.27.03.10.24;	author marcm;	state Exp;
branches;
next	1.5;

1.5
date	2004.02.09.06.48.48;	author marcm;	state Exp;
branches;
next	1.4;

1.4
date	2003.03.30.16.19.25;	author marcm;	state Exp;
branches;
next	1.3;

1.3
date	2003.01.18.18.29.27;	author marcm;	state Exp;
branches;
next	1.2;

1.2
date	2002.10.14.16.14.33;	author marcm;	state dead;
branches;
next	1.1;

1.1
date	2001.02.06.22.24.03;	author nate;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.02.06.22.24.03;	author nate;	state Exp;
branches;
next	;


desc
@@


1.22
log
@byebye tcp wrappers
@
text
@$OpenBSD: patch-configure,v 1.21 2014/01/07 21:55:54 sthen Exp $
--- configure.orig	Wed Nov 20 19:55:12 2013
+++ configure	Thu Nov 21 22:08:48 2013
@@@@ -10761,7 +10761,8 @@@@ if test -z "${nut_have_libwrap_seen}"; then
 
 	for ac_header in tcpd.h
 do :
-  ac_fn_c_check_header_compile "$LINENO" "tcpd.h" "ac_cv_header_tcpd_h" "$ac_includes_default
+  ac_fn_c_check_header_compile "$LINENO" "tcpd.h" "ac_cv_header_tcpd_h" "#include <sys/types.h>
+$ac_includes_default
 "
 if test "x$ac_cv_header_tcpd_h" = xyes; then :
   cat >>confdefs.h <<_ACEOF
@@@@ -10860,6 +10861,7 @@@@ else
 		cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
+#include <sys/types.h>
 #include <tcpd.h>
 int allow_severity = 0, deny_severity = 0;
 
@


1.21
log
@update to nut-2.7.1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.20 2012/08/09 12:05:16 sthen Exp $
@


1.20
log
@update to NUT 2.6.5; bugfixes, cleanup, new device support, etc.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.19 2012/06/08 21:07:02 sthen Exp $
--- configure.orig	Wed Aug  8 20:35:49 2012
+++ configure	Thu Aug  9 01:35:52 2012
@@@@ -10446,7 +10446,8 @@@@ if test -z "${nut_have_libwrap_seen}"; then
d14 1
a14 1
@@@@ -10545,6 +10546,7 @@@@ else
@


1.19
log
@update to NUT 2.6.4 rolling in the patch for CVE 2012-2944 which we had locally,
adding new device support, better snmp support for various devices, and many
other fixes and improvements.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.18 2012/01/12 11:39:36 sthen Exp $
--- configure.orig	Thu May 31 11:38:06 2012
+++ configure	Fri Jun  8 01:38:28 2012
@@@@ -9407,7 +9407,8 @@@@ if test -z "${nut_have_libwrap_seen}"; then
d14 1
a14 1
@@@@ -9506,6 +9507,7 @@@@ else
@


1.18
log
@bit of a tidy-up for NUT.

- move MESSAGE to README and flesh it out a bit

- fix libwrap detection in autoconf

- install the avahi service definition to the right place again; this got
broken when moving to using SYSCONFDIR overrides / BASESYSCONFDIR
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Tue Jan  3 13:36:06 2012
+++ configure	Wed Jan 11 15:30:24 2012
@@@@ -9396,7 +9396,8 @@@@ if test -z "${nut_have_libwrap_seen}"; then
d14 1
a14 1
@@@@ -9495,6 +9496,7 @@@@ else
@


1.17
log
@update to NUT 2.6.3.

- nut-scanner has been changed to dlopen()ing modules, so roll it into the
main package now this can be done without bringing in excess dependencies.
@
text
@d1 15
a15 4
$OpenBSD: patch-configure,v 1.16 2011/09/19 15:59:57 sthen Exp $
--- configure.orig	Thu Sep 15 12:33:20 2011
+++ configure	Mon Sep 19 09:22:03 2011
@@@@ -12005,7 +12005,7 @@@@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
d18 3
a20 4
 int
-main ()
+test_main ()
 {
a21 1
   ;
@


1.16
log
@update to NUT 2.6.2 and add rc.d scripts

- thanks ajacoutot@@ for looking over the scripts

- note that there has been some major work on apcsmart; in the event
of problems the old driver is still available as apcsmart-old
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.15 2011/06/02 10:37:08 sthen Exp $
@


1.15
log
@update NUT to 2.6.1; bugfixes, cleanup, improvements and new device support.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.14 2011/03/09 11:00:55 sthen Exp $
--- configure.orig	Wed Jun  1 13:00:00 2011
+++ configure	Thu Jun  2 09:20:58 2011
@@@@ -11505,7 +11505,7 @@@@ else
@


1.14
log
@- update nut to 2.6.0 (major documentation revamp and support for new
devices, including APC 5G, various Eaton, HP, and Tripp Lite models,
and a number of USB HID devices)

- build the snmp package by default

- use correct user/group names in MESSAGE
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.13 2010/03/31 22:11:11 sthen Exp $
--- configure.orig	Fri Jan 14 20:44:37 2011
+++ configure	Sat Feb 26 14:37:36 2011
@@@@ -11540,7 +11540,7 @@@@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
@


1.13
log
@update to 2.4.3, tested by Denny White and Aaron Stellman

note that with USB UPS, you may have to allow permissions on
further ugen subdevices (e.g. ugen0.01 as well as ugen0.00).
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.12 2009/04/03 15:40:12 sthen Exp $
--- configure.orig	Tue Feb 23 10:04:39 2010
+++ configure	Sat Mar 20 23:18:19 2010
@@@@ -10709,7 +10709,7 @@@@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
@


1.12
log
@update to 2.4.1, code cleanup and adds support for a bunch of new
UPS and also now preliminary support for PDUs.

ok mbalmer (maintainer),
"commit and we fix in-tree if i run into issues" henning
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.11 2008/09/08 19:38:30 martynas Exp $
--- configure.orig	Tue Feb 17 09:23:51 2009
+++ configure	Wed Mar 18 21:27:43 2009
@@@@ -10506,7 +10506,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
d6 1
a6 1
 #include <openssl/ssl.h>
d11 1
a11 1
 SSL_library_init()
@


1.11
log
@update to nut-2.2.2, which contains the old agiler driver from 2.2.0
(now called agiler-old)
upses such as the below can now work again:
{0x0665, 0x5161, &agiler_old_subdriver},        /* Belkin F6C1200-UNV */
{0x06da, 0x0003, &agiler_old_subdriver},        /* Mustek Powermust */
{0x0f03, 0x0001, &agiler_old_subdriver},        /* Unitek Alpha 1200Sx *
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.10 2008/02/03 18:06:41 kili Exp $
--- configure.orig	Wed May  7 12:29:25 2008
+++ configure	Wed Aug 27 17:18:49 2008
@@@@ -10326,7 +10326,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.10
log
@
Bring back static CGIs.
Load config files from /etc/nut.

ok mbalmer@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2008/01/30 20:55:59 mbalmer Exp $
--- configure.orig	Fri Dec 21 13:00:49 2007
+++ configure	Sun Feb  3 13:54:59 2008
@@@@ -25318,7 +25318,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.9
log
@Update to nut ver. 2.2.1.

requested by and ok henning
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.8 2007/05/18 12:22:46 henning Exp $
--- configure.orig	Thu Jul  5 15:21:20 2007
+++ configure	Wed Aug  1 12:59:05 2007
@@@@ -23608,7 +23608,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.8
log
@update to 2.0.5 + a fix to make bcmxcp work correctly again
partially from and ok mbalmer
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2006/05/03 17:32:09 henning Exp $
--- configure.orig	Wed Jan  3 15:17:48 2007
+++ configure	Thu Jan 18 00:41:08 2007
@@@@ -8120,7 +8120,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.7
log
@update to nut-2.0.3, last not leas bringing many format string fixes
preserve my changes to the fentonups driver, allowing the detection logic
to be bypassed and a model to be forced - for UPSes that do implement the
protocol except the identification command, which seems to be somewhat common
the Xanto S3000R thing here behaves like that, and support for it is added
ok mbalmer
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2004/09/27 03:10:24 marcm Exp $
--- configure.orig	Tue Feb  7 12:50:20 2006
+++ configure	Mon May  1 17:40:26 2006
@@@@ -5368,7 +5368,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.6
log
@Update to the 2.0 tree of Nut.

This is a feature release so if you're upgrading, take a look at the
release notes here:

http://random.networkupstools.org/source/2.0/new-2.0.0.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2004/02/09 06:48:48 marcm Exp $
--- configure.orig	Mon Mar  8 01:45:45 2004
+++ configure	Thu Sep 16 08:48:43 2004
@@@@ -4990,7 +4990,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.5
log
@Update to 1.4.1.

In addition to the standard bugfixes, this is a major port rewrite.
The port now uses a '_ups' user and the CGIs created can now run under
either chrooted Apache or non-chrooted Apache.
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	2004-01-04 23:26:22.000000000 -0800
+++ configure	2004-01-04 23:27:00.000000000 -0800
@@@@ -4856,7 +4856,7 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.4
log
@Handle SYSCONFDIR properly and make this compile on vax (and probably the
other NO_SHARED_ARCHS as well).
@
text
@d1 6
a6 24
$OpenBSD: patch-configure,v 1.3 2003/01/18 18:29:27 marcm Exp $
--- configure.orig	Mon Dec  2 04:08:51 2002
+++ configure	Thu Mar 27 23:56:17 2003
@@@@ -556,7 +556,7 @@@@ do
     ac_prev=sysconfdir ;;
   -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
   | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
-    sysconfdir=$ac_optarg ;;
+    sysconfdir="$ac_optarg/nut" ;;
 
   -target | --target | --targe | --targ | --tar | --ta | --t)
     ac_prev=target_alias ;;
@@@@ -1338,7 +1338,7 @@@@ BUILDOBJ=common.o
 
 
 GD_INCLUDES=""
-GD_LIBS="-L/usr/X11R6/lib -lgd -lpng -lz -ljpeg -lfreetype -lm -lXpm -lX11"
+GD_LIBS="-lgd -lpng -lz -ljpeg -lttf -lm"
 
 
 ac_ext=c
@@@@ -4007,7 +4007,7 @@@@ rm -f conftest.$ac_objext conftest$ac_ex
    int F77_DUMMY_MAIN() { return 1; }
 #endif
d11 1
a11 1
 SSL_library_init
@


1.3
log
@Missing patch from last commit, oops.
@
text
@d1 13
a13 4
$OpenBSD$
--- configure.orig	Sun Dec 29 20:49:56 2002
+++ configure	Sun Dec 29 20:50:29 2002
@@@@ -688,7 +688,7 @@@@ BUILDOBJ=common.o
d21 10
a30 1
 # Extract the first word of "gcc", so it can be a program name with args.
@


1.2
log
@* Update to 1.0.0

* CGIs are now a SUBPACKAGE and work with chrooted Apache

* Make myself MAINTAINER

* Mark conflict with upad-2.0

ok naddy@@ and nate@@
@
text
@d1 4
a4 20
$OpenBSD: patch-configure,v 1.1 2001/02/06 22:24:03 nate Exp $
We also need libjpeg to be able to compile this program.

--- configure.orig	Fri Dec 22 13:46:51 2000
+++ configure	Thu Feb  1 00:16:00 2001
@@@@ -1819,7 +1819,7 @@@@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lgd -lm -lpng -lz $LIBS"
+LIBS="-lgd -lm -ljpeg -lpng -lz $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 1825 "configure"
 #include "confdefs.h"
@@@@ -1848,7 +1848,7 @@@@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-	GFXLIBS="-lgd -lpng -lz"
+	GFXLIBS="-lgd -ljpeg -lpng -lz"
d6 7
a12 56
 else
   echo "$ac_t""no" 1>&6
@@@@ -1863,7 +1863,7 @@@@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lgd -lm -lpng -lz $LIBS"
+LIBS="-lgd -lm -ljpeg -lpng -lz $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 1869 "configure"
 #include "confdefs.h"
@@@@ -1892,7 +1892,7 @@@@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-		GFXLIBS="-lgd -lpng -lz -L/usr/local/lib -I/usr/local/include"
+		GFXLIBS="-lgd -ljpeg -lpng -lz -L/usr/local/lib -I/usr/local/include"
 	
 else
   echo "$ac_t""no" 1>&6
@@@@ -1914,7 +1914,7 @@@@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lgd -lm -lpng -lz $LIBTTF $LIBS"
+LIBS="-lgd -lm -ljpeg -lpng -lz $LIBTTF $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 1920 "configure"
 #include "confdefs.h"
@@@@ -1943,7 +1943,7 @@@@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-                GFXLIBS="-lgd -lpng -lz $LIBTTF"
+                GFXLIBS="-lgd -ljpeg -lpng -lz $LIBTTF"
         
 else
   echo "$ac_t""no" 1>&6
@@@@ -1963,7 +1963,7 @@@@
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
-LIBS="-lgd -lm -lpng -lz $LIBTTF $LIBXPM $LIBS"
+LIBS="-lgd -lm -ljpeg -lpng -lz $LIBTTF $LIBXPM $LIBS"
 cat > conftest.$ac_ext <<EOF
 #line 1969 "configure"
 #include "confdefs.h"
@@@@ -1992,7 +1992,7 @@@@
 if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-                GFXLIBS="-lgd -lpng -lz $LIBTTF $LIBXPM"
+                GFXLIBS="-lgd -ljpeg -lpng -lz $LIBTTF $LIBXPM"
         
 else
   echo "$ac_t""no" 1>&6
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Network UPS Tools.  http://www.exploits.org/nut/
@
text
@@
