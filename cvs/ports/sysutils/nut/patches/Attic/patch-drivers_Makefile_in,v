head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2016.03.11.20.07.55;	author sthen;	state dead;
branches;
next	1.2;
commitid	lzegX5axGHTKC7bp;

1.2
date	2015.04.23.22.38.55;	author sthen;	state Exp;
branches;
next	1.1;
commitid	94kzhbdZHtrNGmOO;

1.1
date	2015.03.26.01.07.32;	author sthen;	state Exp;
branches;
next	;
commitid	SzPdwWvVHoi3yvaQ;


desc
@@


1.3
log
@update to NUT 2.7.4
@
text
@$OpenBSD: patch-drivers_Makefile_in,v 1.2 2015/04/23 22:38:55 sthen Exp $

Support Huawei UPS5000-E

--- drivers/Makefile.in.orig	Wed Apr 22 09:38:04 2015
+++ drivers/Makefile.in	Thu Apr 23 15:05:51 2015
@@@@ -426,7 +426,7 @@@@ am_snmp_ups_OBJECTS = snmp-ups.$(OBJEXT) apc-mib.$(OBJ
 	ietf-mib.$(OBJEXT) mge-mib.$(OBJEXT) netvision-mib.$(OBJEXT) \
 	powerware-mib.$(OBJEXT) raritan-pdu-mib.$(OBJEXT) \
 	bestpower-mib.$(OBJEXT) cyberpower-mib.$(OBJEXT) \
-	delta_ups-mib.$(OBJEXT) xppc-mib.$(OBJEXT)
+	delta_ups-mib.$(OBJEXT) xppc-mib.$(OBJEXT) huawei-mib.$(OBJEXT)
 snmp_ups_OBJECTS = $(am_snmp_ups_OBJECTS)
 snmp_ups_DEPENDENCIES = $(LDADD_DRIVERS) $(am__DEPENDENCIES_1)
 am_solis_OBJECTS = solis.$(OBJEXT)
@@@@ -896,7 +896,7 @@@@ mge_shut_LDADD = $(LDADD)
 snmp_ups_SOURCES = snmp-ups.c apc-mib.c baytech-mib.c compaq-mib.c eaton-mib.c \
  ietf-mib.c mge-mib.c netvision-mib.c powerware-mib.c raritan-pdu-mib.c \
  bestpower-mib.c cyberpower-mib.c delta_ups-mib.c \
- xppc-mib.c
+ xppc-mib.c huawei-mib.c
 
 snmp_ups_LDADD = $(LDADD_DRIVERS) $(LIBNETSNMP_LIBS)
 
@@@@ -950,7 +950,7 @@@@ dist_noinst_HEADERS = apc-mib.h apc-hid.h baytech-mib.
  delta_ups-mib.h nutdrv_qx.h nutdrv_qx_bestups.h nutdrv_qx_blazer-common.h nutdrv_qx_mecer.h	\
  nutdrv_qx_megatec.h nutdrv_qx_megatec-old.h nutdrv_qx_mustek.h nutdrv_qx_q1.h	\
  nutdrv_qx_voltronic.h nutdrv_qx_voltronic-qs.h nutdrv_qx_voltronic-qs-hex.h nutdrv_qx_zinto.h \
- xppc-mib.h
+ xppc-mib.h huawei-mib.h
 
 
 # Define a dummy library so that Automake builds rules for the
@@@@ -1441,6 +1441,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/usbhid-ups.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/victronups.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/xppc-mib.Po@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/huawei-mib.Po@@am__quote@@
 
 .c.o:
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)depbase=`echo $@@ | sed 's|[^/]*$$|$(DEPDIR)/&|;s|\.o$$||'`;\
@


1.2
log
@update to NUT 2.7.3
@
text
@d1 1
a1 1
$OpenBSD: patch-drivers_Makefile_in,v 1.1 2015/03/26 01:07:32 sthen Exp $
@


1.1
log
@Add an snmp-ups subdriver to NUT for Huawei, tested with UPS5000-E
Add a meta rc script that starts/stops upsd and upsmon in the right order
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- drivers/Makefile.in.orig	Wed Mar 25 22:52:12 2015
+++ drivers/Makefile.in	Wed Mar 25 22:52:45 2015
@@@@ -379,7 +379,7 @@@@ am_snmp_ups_OBJECTS = snmp-ups.$(OBJEXT) apc-mib.$(OBJ
d16 1
a16 1
@@@@ -805,7 +805,7 @@@@ mge_shut_LDADD = $(LDADD)
d25 2
a26 2
@@@@ -854,7 +854,7 @@@@ dist_noinst_HEADERS = apc-mib.h apc-hid.h baytech-mib.
  delta_ups-mib.h nutdrv_qx.h nutdrv_qx_blazer-common.h nutdrv_qx_mecer.h	\
d28 1
a28 1
  nutdrv_qx_voltronic.h nutdrv_qx_voltronic-qs.h nutdrv_qx_zinto.h \
d34 1
a34 1
@@@@ -1275,6 +1275,7 @@@@ distclean-compile:
d41 1
a41 1
 @@am__fastdepCC_TRUE@@	$(COMPILE) -MT $@@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@@ $<
@

