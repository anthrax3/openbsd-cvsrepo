head	1.73;
access;
symbols
	OPENBSD_6_2:1.73.0.2
	OPENBSD_6_2_BASE:1.73
	OPENBSD_6_1:1.72.0.2
	OPENBSD_6_1_BASE:1.72
	OPENBSD_6_0:1.69.0.4
	OPENBSD_6_0_BASE:1.69
	OPENBSD_5_9:1.69.0.2
	OPENBSD_5_9_BASE:1.69
	OPENBSD_5_8:1.66.0.4
	OPENBSD_5_8_BASE:1.66
	OPENBSD_5_7:1.65.0.2
	OPENBSD_5_7_BASE:1.65
	OPENBSD_5_6:1.62.0.2
	OPENBSD_5_6_BASE:1.62
	OPENBSD_5_5:1.58.0.2
	OPENBSD_5_5_BASE:1.58
	OPENBSD_5_4:1.57.0.2
	OPENBSD_5_4_BASE:1.57
	OPENBSD_5_3:1.55.0.2
	OPENBSD_5_3_BASE:1.55
	OPENBSD_5_2:1.53.0.2
	OPENBSD_5_2_BASE:1.53
	OPENBSD_5_1_BASE:1.51
	OPENBSD_5_1:1.51.0.2
	OPENBSD_5_0:1.48.0.2
	OPENBSD_5_0_BASE:1.48
	OPENBSD_4_9:1.44.0.2
	OPENBSD_4_9_BASE:1.44
	OPENBSD_4_8:1.40.0.2
	OPENBSD_4_8_BASE:1.40
	OPENBSD_4_7:1.37.0.2
	OPENBSD_4_7_BASE:1.37
	OPENBSD_4_6:1.36.0.2
	OPENBSD_4_6_BASE:1.36
	OPENBSD_4_5:1.33.0.6
	OPENBSD_4_5_BASE:1.33
	OPENBSD_4_4:1.33.0.4
	OPENBSD_4_4_BASE:1.33
	OPENBSD_4_3:1.33.0.2
	OPENBSD_4_3_BASE:1.33
	OPENBSD_4_2:1.30.0.2
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.25.0.2
	OPENBSD_4_1_BASE:1.25
	OPENBSD_4_0:1.20.0.4
	OPENBSD_4_0_BASE:1.20
	OPENBSD_3_9:1.20.0.2
	OPENBSD_3_9_BASE:1.20
	OPENBSD_3_8:1.16.0.2
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.15.0.2
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.12.0.4
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.6.0.2
	OPENBSD_3_3_BASE:1.6;
locks; strict;
comment	@# @;


1.73
date	2017.07.05.10.22.06;	author sthen;	state Exp;
branches;
next	1.72;
commitid	FBpcyC2Rj3fOECYI;

1.72
date	2017.03.02.14.32.31;	author sthen;	state Exp;
branches;
next	1.71;
commitid	69nTNEm6lvE53Sy8;

1.71
date	2016.10.25.11.28.05;	author sthen;	state Exp;
branches;
next	1.70;
commitid	QILcGFhHl4TldE2a;

1.70
date	2016.09.10.13.03.43;	author ajacoutot;	state Exp;
branches;
next	1.69;
commitid	4KcvAK91uGdTLejD;

1.69
date	2015.10.06.09.06.38;	author sthen;	state Exp;
branches;
next	1.68;
commitid	871VCmP3TTrktZKL;

1.68
date	2015.10.05.16.29.02;	author sthen;	state Exp;
branches;
next	1.67;
commitid	AqjFzXOPaoxpieFE;

1.67
date	2015.08.25.14.17.45;	author sthen;	state Exp;
branches;
next	1.66;
commitid	k0DyHHi71qeTKvKn;

1.66
date	2015.06.10.10.43.29;	author sthen;	state Exp;
branches;
next	1.65;
commitid	ooMDYDVOJETzXFwR;

1.65
date	2014.11.11.21.48.40;	author sthen;	state Exp;
branches;
next	1.64;
commitid	QJHijlOokyfrZe81;

1.64
date	2014.10.30.17.25.49;	author sthen;	state Exp;
branches;
next	1.63;
commitid	0nwZKLgIvDeZHJzM;

1.63
date	2014.10.30.17.04.22;	author sthen;	state Exp;
branches;
next	1.62;
commitid	bbLzDuxh1zIm3t40;

1.62
date	2014.07.04.22.23.01;	author sthen;	state Exp;
branches;
next	1.61;
commitid	FKkGQ6G4kXE6XKlQ;

1.61
date	2014.04.19.17.02.00;	author sthen;	state Exp;
branches;
next	1.60;

1.60
date	2014.03.20.12.31.22;	author sthen;	state Exp;
branches;
next	1.59;

1.59
date	2014.03.20.12.26.33;	author sthen;	state Exp;
branches;
next	1.58;

1.58
date	2013.10.12.13.09.30;	author sthen;	state Exp;
branches;
next	1.57;

1.57
date	2013.03.11.19.51.26;	author sthen;	state Exp;
branches;
next	1.56;

1.56
date	2013.03.11.11.41.32;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2013.02.05.14.23.28;	author sthen;	state Exp;
branches;
next	1.54;

1.54
date	2012.11.16.16.02.41;	author sthen;	state Exp;
branches;
next	1.53;

1.53
date	2012.04.05.14.33.48;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2012.02.21.17.54.44;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2012.01.08.20.38.11;	author sthen;	state Exp;
branches;
next	1.50;

1.50
date	2011.11.16.00.25.05;	author sthen;	state Exp;
branches;
next	1.49;

1.49
date	2011.09.16.11.41.40;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2011.05.19.20.01.27;	author gsoares;	state Exp;
branches;
next	1.47;

1.47
date	2011.05.02.21.19.13;	author sthen;	state Exp;
branches;
next	1.46;

1.46
date	2011.03.09.08.04.48;	author landry;	state Exp;
branches;
next	1.45;

1.45
date	2011.03.02.07.13.13;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.11.20.17.22.42;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2010.10.24.21.36.04;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2010.10.19.07.43.02;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2010.10.19.01.07.13;	author sthen;	state Exp;
branches;
next	1.40;

1.40
date	2010.06.15.10.47.08;	author sthen;	state Exp;
branches;
next	1.39;

1.39
date	2010.04.26.09.44.24;	author sthen;	state Exp;
branches;
next	1.38;

1.38
date	2010.04.15.14.29.16;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.01.19.19.43.57;	author kili;	state Exp;
branches;
next	1.36;

1.36
date	2009.04.14.15.41.35;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2009.04.14.15.39.41;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2009.03.11.01.55.07;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2008.01.17.15.21.14;	author henning;	state Exp;
branches;
next	1.32;

1.32
date	2007.12.06.13.22.07;	author henning;	state Exp;
branches;
next	1.31;

1.31
date	2007.09.15.21.14.03;	author merdely;	state Exp;
branches;
next	1.30;

1.30
date	2007.07.10.15.48.07;	author henning;	state Exp;
branches;
next	1.29;

1.29
date	2007.07.05.08.55.38;	author henning;	state Exp;
branches;
next	1.28;

1.28
date	2007.06.20.17.14.01;	author mpf;	state Exp;
branches;
next	1.27;

1.27
date	2007.05.18.12.07.37;	author henning;	state Exp;
branches;
next	1.26;

1.26
date	2007.03.15.13.10.03;	author henning;	state Exp;
branches;
next	1.25;

1.25
date	2007.02.15.17.15.41;	author steven;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2007.02.14.10.04.33;	author henning;	state Exp;
branches;
next	1.23;

1.23
date	2007.02.06.15.07.35;	author henning;	state Exp;
branches;
next	1.22;

1.22
date	2007.02.06.14.46.25;	author henning;	state Exp;
branches;
next	1.21;

1.21
date	2006.11.25.08.41.04;	author steven;	state Exp;
branches;
next	1.20;

1.20
date	2006.01.10.18.17.36;	author bernd;	state Exp;
branches;
next	1.19;

1.19
date	2006.01.05.21.45.39;	author aanriot;	state Exp;
branches;
next	1.18;

1.18
date	2005.12.04.10.55.47;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2005.10.24.05.13.17;	author fgsch;	state Exp;
branches;
next	1.16;

1.16
date	2005.08.07.14.24.45;	author sturm;	state Exp;
branches;
next	1.15;

1.15
date	2005.03.02.22.31.13;	author sturm;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.20.10.35.36;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2004.09.21.16.44.04;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2004.03.02.14.32.43;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2004.02.28.00.17.40;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2004.02.16.20.09.03;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2004.02.04.07.39.19;	author sturm;	state Exp;
branches;
next	1.8;

1.8
date	2003.09.22.23.56.38;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2003.03.31.22.13.51;	author dhartmei;	state Exp;
branches;
next	1.6;

1.6
date	2003.02.27.19.21.37;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2003.01.10.19.24.50;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.12.01.01.58.42;	author dhartmei;	state Exp;
branches;
next	1.3;

1.3
date	2002.10.28.19.53.44;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.10.26.01.09.14;	author dhartmei;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.08.07.56.42;	author dhartmei;	state Exp;
branches;
next	;

1.25.2.1
date	2007.06.18.05.18.50;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.73
log
@drop MAINTAINER on a few things
@
text
@# $OpenBSD: Makefile,v 1.72 2017/03/02 14:32:31 sthen Exp $

COMMENT-main=	active host monitoring tool
COMMENT-mux=	symon data gatherer

V=		2.88
DISTNAME=	symon-$V
WRKDIST=	${WRKDIR}/symon
PKGNAME-main=	${DISTNAME}
FULLPKGNAME-mux= symux-$V
REVISION=	0

CATEGORIES=	sysutils net

HOMEPAGE=	http://www.xs4all.nl/~wpd/symon

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB-main=	c
WANTLIB-mux=	c fontconfig pthread rrd

MASTER_SITES=	${HOMEPAGE}/philes/

MULTI_PACKAGES=	-main -mux
MODULES=	perl

LIB_DEPENDS-mux= net/rrdtool

NO_TEST=	Yes

MAKE_ENV=	CLIENTDIR="${P5SITE}" \
		LIBS="-L${X11BASE}/lib" \
		MANDIR="man" \
		SHRDIR="share/examples/symon"

.ifdef DEBUG
# avoid stripping the binaries
MAKE_ENV+=	DEBUG=1
.endif

# XXX disable pf queue support until it can be updated for new PF queues
post-patch:
	rm ${WRKSRC}/platform/OpenBSD/sm_pfq.c

post-build:
	cd ${WRKSRC}/client && \
	    pod2man SymuxClient.pm > SymuxClient.pm.tmp && \
	    mv SymuxClient.pm.tmp SymuxClient.3p

post-install:
	mv ${PREFIX}/${P5SITE}/getsymonitem.pl ${PREFIX}/share/examples/symon/
	rm ${PREFIX}/${P5SITE}/SymuxClient.0
	${INSTALL_MAN} ${WRKSRC}/client/SymuxClient.3p ${PREFIX}/man/man3p/

.include <bsd.port.mk>
@


1.72
log
@update to symon-2.88, a noop for us but keeps portroach happy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2016/10/25 11:28:05 sthen Exp $
d11 1
a15 2

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>
@


1.71
log
@fix c_smrrds.sh with newer rrdtool, from henning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2016/09/10 13:03:43 ajacoutot Exp $
d6 1
a6 3
V=		2.87
REVISION-main=	5
REVISION-mux=	1
@


1.70
log
@First pass at pre-entively fixing ports that would break once guenther's header
pollution diff is in.

lang/squeak/vm does not build but it's due to the recent audio changes
games/xbattle: also fixes some conflicting implicit decl
print/hplip: also fixes some conflicting implicit decl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2015/10/06 09:06:38 sthen Exp $
d7 1
a7 1
REVISION-main=	4
@


1.69
log
@oops, REVISION-mux got lost in last commit; pointed out by Markus Lude
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2015/10/05 16:29:02 sthen Exp $
d7 2
a8 2
REVISION-main=	3
REVISION-mux=	0
@


1.68
log
@REVISION bumps following the additional member in struct if_data,
to make sure packages get updated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2015/08/25 14:17:45 sthen Exp $
d8 1
@


1.67
log
@wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2015/06/10 10:43:29 sthen Exp $
d7 1
a7 2
REVISION-main=	2
REVISION-mux=	0
@


1.66
log
@bump REVISIONs following DIOCGETSTATUS ABI change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/11/11 21:48:40 sthen Exp $
d8 1
d24 1
a24 1
WANTLIB-mux=	c fontconfig rrd
@


1.65
log
@cope with mbpl->mbufpl name change, problem reported by Atanas Vladimirov
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/10/30 17:25:49 sthen Exp $
d7 1
a7 1
REVISION-main=	1
@


1.64
log
@remove barely-useful MESSAGE file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2014/10/30 17:04:22 sthen Exp $
d7 1
a7 1
REVISION-main=	0
@


1.63
log
@update to symon 2.87

- N.B. Packages are re-arranged. Previously we had symon-mon (client only),
symon-mux (mux only), and symon (both client + mux - i.e. the combination of
the two other packages). Now we just have two non-overlapping packages
symon+symux, as is normal for multi-packages in the tree.

pkg_add -u will handle renaming but not splitting, so if you used the
"combined" package you will need to "pkg_add symux" after this update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2014/07/04 22:23:01 sthen Exp $
d7 1
@


1.62
log
@fix following move from struct pool to struct kinfo_pool for userland
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2014/04/19 17:02:00 sthen Exp $
d3 2
a4 1
COMMENT-main=		active monitoring tool
d6 5
a10 7
V=			2.86
REVISION=		5
DISTNAME=		symon-$V
WRKDIST=		${WRKDIR}/symon
PKGNAME-main=		${DISTNAME}
FULLPKGNAME-mon=	symon-mon-$V
FULLPKGNAME-mux=	symon-mux-$V
d21 2
a22 2
WANTLIB=	c fontconfig rrd
LIB_DEPENDS=	net/rrdtool
d26 1
a26 1
MULTI_PACKAGES=	-main -mon -mux
d29 1
a29 7
# client only package
COMMENT-mon=	active host monitor
WANTLIB-mon=	c
LIB_DEPENDS-mon=

# gatherer only package
COMMENT-mux=	symon data gatherer
d40 1
a40 1
MAKE_ENV+=		DEBUG=1
@


1.61
log
@disable queue support for now, it's altq-only
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2014/03/20 12:31:22 sthen Exp $
d6 1
a6 1
REVISION=		4
@


1.60
log
@Shouldn't have c_config.sh in PLIST-mux.

One day maybe I'll work out the gymnastics needed to move this to
non-overlapping subpackages without pkg_add -u being unhappy..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2014/03/20 12:26:33 sthen Exp $
d6 1
a6 1
REVISION=		3
d49 4
@


1.59
log
@fix POD errors in SymuxClient(3p), and install some files to saner locations
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/10/12 13:09:30 sthen Exp $
d6 1
a6 1
REVISION=		2
@


1.58
log
@initial fix for queues; s/pfioc_qstats/pfioc_altqstats
don't USE_GROFF
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/03/11 19:51:26 sthen Exp $
d6 1
a6 1
REVISION=		1
d13 1
a13 1
CATEGORIES=		sysutils net
d15 1
a15 1
HOMEPAGE=		http://www.xs4all.nl/~wpd/symon
d17 1
a17 1
MAINTAINER=		Stuart Henderson <sthen@@openbsd.org>
d22 2
a23 2
WANTLIB=		c fontconfig rrd
LIB_DEPENDS=		net/rrdtool
d25 1
a25 1
MASTER_SITES=		${HOMEPAGE}/philes/
d27 2
a28 1
MULTI_PACKAGES=		-main -mon -mux
d31 2
a32 2
COMMENT-mon=		active host monitor
WANTLIB-mon=		c
d36 1
a36 1
COMMENT-mux=		symon data gatherer
d38 1
a38 1
NO_TEST=		Yes
d40 4
a43 1
MAKE_ENV=		LIBS="-L${X11BASE}/lib" MANDIR="man"
d49 10
@


1.57
log
@Bump ports using DIOCGETSTATUS following PF change (new 'translation'
error counter).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/03/11 11:41:32 espie Exp $
d6 1
a6 1
REVISION=		0
a36 1
USE_GROFF =		Yes
@


1.56
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/02/05 14:23:28 sthen Exp $
d6 1
@


1.55
log
@update to symon 2.86, rolling in kinfo_proc changes + an additional fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2012/11/16 16:02:41 sthen Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d37 1
a37 1
NO_REGRESS=		Yes
@


1.54
log
@Somewhere between 5.2 and now, struct sensordev grew (96->108 bytes on
amd64) so old binaries no longer work. Bump REVISION to enforce updates.
Problem noticed by henning@@, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2012/04/05 14:33:48 sthen Exp $
d5 1
a5 2
V=			2.85
REVISION=		0
@


1.53
log
@update to symon 2.85
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2012/02/21 17:54:44 sthen Exp $
d6 1
@


1.52
log
@update to symon 2.84
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/01/08 20:38:11 sthen Exp $
d5 2
a6 2
V=			2.84
DISTNAME=		symon-${V}
d9 2
a10 2
FULLPKGNAME-mon=	symon-mon-${V}
FULLPKGNAME-mux=	symon-mux-${V}
@


1.51
log
@adapt to removing kinfo_proc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/11/16 00:25:05 sthen Exp $
d5 1
a5 2
V=			2.83
REVISION=		3
@


1.50
log
@bumps; net/if.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/09/16 11:41:40 espie Exp $
d6 1
a6 1
REVISION=		2
@


1.49
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/05/19 20:01:27 gsoares Exp $
d6 1
a6 1
REVISION=		1
@


1.48
log
@PREFIX -> TRUEPREFIX; bump REVISION; ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/05/02 21:19:13 sthen Exp $
d6 1
a6 1
REVISION=		0
@


1.47
log
@- update symon to 2.83
- take maintainer, agreed with present maintainer(+upstream) Willem Dijkstra
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/03/09 08:04:48 landry Exp $
d6 1
@


1.46
log
@Missed REVISION bumps for -mux and -mon when adding rcscripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/03/02 07:13:13 ajacoutot Exp $
d4 2
a5 1
V=			2.82
d7 1
d10 2
a11 1
FULLPKGNAME-mux=        symon-mux-${V}
d14 1
a14 3
REVISION-main=		1
REVISION-mon=		1
REVISION-mux=		1
d16 1
a16 2
HOMEPAGE=		http://www.xs4all.nl/~wpd/symon
MAINTAINER=		Willem Dijkstra <wpd@@xs4all.nl>
a41 1
WRKDIST=		${WRKDIR}/symon
d43 1
@


1.45
log
@Fix typo in man page, we use the _symon user, not symon.
Add rc.d(8) scripts for symon and symux.

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/11/20 17:22:42 espie Exp $
d12 2
a13 2
REVISION-mon=		0
REVISION-mux=		0
@


1.44
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/10/24 21:36:04 ajacoutot Exp $
a4 1
REVISION=		0
d10 4
@


1.43
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/10/19 07:43:02 espie Exp $
d22 1
a22 1
LIB_DEPENDS=		::net/rrdtool
d36 1
a36 1
USE_GROFF =	Yes
@


1.42
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/10/19 01:07:13 sthen Exp $
a35 1
USE_X11=		Yes
@


1.41
log
@- adapt io monitor to handle the new hw.disknames format (devname: or
devname:uid), problem reported by Anton Maksimenkov with a different diff.

- new-style lib_depends/wantlib

- let ports-standard DEBUG=xxx work as expected and produce binaries
with symbols

sm_io.c diff looks good to henning@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/06/15 10:47:08 sthen Exp $
d37 1
@


1.40
log
@update symon to 2.82, rolling in our patches. New version pointed out
by maintainer/upstream Willem Dijkstra.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/04/26 09:44:24 sthen Exp $
d5 1
d20 3
a22 1
WANTLIB=		c 
a27 2
WANTLIB-main=		${WANTLIB} fontconfig

d30 1
d32 1
a34 4
LIB_DEPENDS-mux=	rrd:rrdtool-*:net/rrdtool
WANTLIB-mux=		${WANTLIB} fontconfig

LIB_DEPENDS=		rrd:rrdtool-*:net/rrdtool
a39 2
SUBST_VARS=		V

d41 4
@


1.39
log
@- Fix for updated sensors API, borrowed from systat(1).
Reported/tested by "Tasmanian Devil" and myself.

- Adjust sample configs to use the sensor name format we have been
using for the last few releases.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/04/15 14:29:16 ajacoutot Exp $
d4 1
a4 1
V=			2.79
d6 3
a8 3
PKGNAME-main=		${DISTNAME}p3
FULLPKGNAME-mon=	symon-mon-${V}p3
FULLPKGNAME-mux=        symon-mux-${V}p0
@


1.38
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.

sthen@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/01/19 19:43:57 kili Exp $
d6 2
a7 2
PKGNAME-main=		${DISTNAME}p2
FULLPKGNAME-mon=	symon-mon-${V}p2
@


1.37
log
@KERN_PROC -> KERN_PROC2.

Reported and tested by tasm.devil at googlemail.com (thanks).
Also tested by okan@@ and sthen@@.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2009/04/14 15:41:35 sthen Exp $
d6 3
a8 3
PKGNAME-main=		${DISTNAME}p1
FULLPKGNAME-mon=	symon-mon-${V}p1
FULLPKGNAME-mux=        symon-mux-${V}
@


1.36
log
@- the -mon subpackage also needs bumping; PF changes.
- move FULLPKGNAME-xxx up next to PKGNAME-main in the Makefile so the
next person to come along spots it quicker.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/04/14 15:39:41 sthen Exp $
d6 2
a7 2
PKGNAME-main=		${DISTNAME}p0
FULLPKGNAME-mon=	symon-mon-${V}p0
@


1.35
log
@bump; PF changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/03/11 01:55:07 sthen Exp $
d7 2
a27 1
FULLPKGNAME-mon=	symon-mon-${V}
a30 1
FULLPKGNAME-mux=        symon-mux-${V}
@


1.34
log
@- update to symon 2.79
- fix mbuf monitor following h2k8 mclpl changes

no reply from the maintainer in a couple of days; my syslog server
isn't super-happy about how often the problem with mbuf gets logged,
so committing anyway. tests/feedback from Alexander Hall and Markus
Lude - thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2008/01/17 15:21:14 henning Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}
@


1.33
log
@trivial update to 2.78 which fixes some remaining issues with the now
64bit network counters, from maintainer & author wpd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/12/06 13:22:07 henning Exp $
d4 1
a4 1
V=			2.78
d43 1
a43 1
MAKE_ENV=		LIBS="-L${X11BASE}/lib"
@


1.32
log
@trivial update to 2.77 from willem (author), ok robert simon
fixes message size computation that is easily exceeded on -current
and causes symon to err out on startup in these cases
(symon: data.c:364: maxlen too small)
note that on systems showing that error the symux they send to must
be >= 2.77 since it has the same check for received messages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/09/15 21:14:03 merdely Exp $
d4 1
a4 1
V=			2.77
@


1.31
log
@Remove surrounding quotes in COMMENT-*/PERMIT_*/IGNORE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/07/10 15:48:07 henning Exp $
d4 1
a4 1
V=			2.76
@


1.30
log
@willem rolled 2.76, which has all the patches. ok simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/07/05 08:55:38 henning Exp $
d3 1
a3 1
COMMENT-main=		"active monitoring tool"
d27 1
a27 1
COMMENT-mon=		"active host monitor"
d31 1
a31 1
COMMENT-mux=		"symon data gatherer"
@


1.29
log
@fix buglet in parsing the "from XXX" part of symon.conf
also sent upstream of course
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/06/20 17:14:01 mpf Exp $
d4 1
a4 1
V=			2.75
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p5
d26 1
a26 1
FULLPKGNAME-mon=	symon-mon-${V}p5
d30 1
a30 1
FULLPKGNAME-mux=        symon-mux-${V}p1
@


1.28
log
@Bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2007/05/18 12:07:37 henning Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p4
d26 1
a26 1
FULLPKGNAME-mon=	symon-mon-${V}p4
@


1.27
log
@big rework of the cpu stat module, killing differences between
arches with and without kern_cptime2. fixes single-processor i386/amd64.
with some help from Willem Dijkstra (symon author), ok simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2007/03/15 13:10:03 henning Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p3
d26 1
a26 1
FULLPKGNAME-mon=	symon-mon-${V}p3
d30 1
a30 1
FULLPKGNAME-mux=        symon-mux-${V}p0
@


1.26
log
@fix botched conversion to KERN_CPTIME2 for SMP support
only i386 and amd64 have working KERN_CPTIME2.
mimic top(1)s behaviour and only use KERN_CPTIME2 when ncpu > 1
ok bernd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/02/15 17:15:41 steven Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p1
d26 1
a26 1
FULLPKGNAME-mon=	symon-mon-${V}p1
@


1.25
log
@fix WANTLIB

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/02/14 10:04:33 henning Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p0
d26 1
a26 1
FULLPKGNAME-mon=	symon-mon-${V}
@


1.25.2.1
log
@MFC:
big rework of the cpu stat module, killing differences between
arches with and without kern_cptime2. fixes single-processor i386/amd64.
with some help from Willem Dijkstra (symon author)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/02/15 17:15:41 steven Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p3
d26 1
a26 1
FULLPKGNAME-mon=	symon-mon-${V}p3
@


1.24
log
@update to 2.75, ok bernd pval
relevant changes:
13/02/2007 - 2.75
   - OpenBSD sensors missed includes (Constantine A. Murenin)
11/02/2007 - 2.74
   - symon can be told what local interface to send data from (Henning Brauer)
   - removed typos in client/SymuxClient.pm (Sandeep Kr Sangwan)
   - OpenBSD sm_sensor upgrade to sensor_dev (Constantine A. Murenin)
   - symon network protocol version bumped to allow stream arguments upto 63
     characters.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/02/06 15:07:35 henning Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}
d23 2
d30 1
a30 1
FULLPKGNAME-mux=        symon-mux-${V}
d33 1
@


1.23
log
@yuck, the comma is still missing, Okan Demirmen <okan@@demirmen.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/02/06 14:46:25 henning Exp $
d4 1
a4 1
V=			2.73
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p0
d28 1
a28 1
FULLPKGNAME-mux=        symon-mux-${V}p0
@


1.22
log
@update to 2.73, ok bernd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/11/25 08:41:04 steven Exp $
d6 1
a6 1
PKGNAME-main=		${DISTNAME}
d28 1
a28 1
FULLPKGNAME-mux=        symon-mux-${V}
@


1.21
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/01/10 18:17:36 bernd Exp $
d4 1
a4 1
V=			2.72
d6 1
a6 1
PKGNAME-main=		${DISTNAME}p1
d24 1
a24 1
FULLPKGNAME-mon=	symon-mon-${V}p0
d28 1
a28 1
FULLPKGNAME-mux=        symon-mux-${V}p0
@


1.20
log
@Missing PKGNAME bump. Noticed by Okan Demirmen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/01/05 21:45:39 aanriot Exp $
d3 1
a3 1
COMMENT=		"active monitoring tool"
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
d21 1
a21 1
SUBPACKAGE?=
d24 1
a24 1
MULTI_PACKAGES+=	-mon
d26 1
a26 1
MON_LIBDEPENDS=
d28 1
a28 1
MULTI_PACKAGES+=	-mux
d30 1
a30 1
MUX_LIBDEPENDS=		rrd:rrdtool-*:net/rrdtool
a31 9
.for i in ${MULTI_PACKAGES}
FULLPKGNAME${i}=        symon${i}-${V}p0
.endfor

.if defined(PACKAGING) && !empty(SUBPACKAGE)
MODULE_NAME=            ${SUBPACKAGE:S/-//g}
LIB_DEPENDS=            ${${MODULE_NAME:U}_LIBDEPENDS}
MESSAGE=                ${PKGDIR}/MESSAGE${SUBPACKAGE}
.else
a32 1
.endif
a34 1

@


1.19
log
@fix a missing comma in SymuxClient.pm.

"Looks OK to me" alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/12/04 10:55:47 sturm Exp $
d33 1
a33 1
FULLPKGNAME${i}=        symon${i}-${V}
@


1.18
log
@update to symon 2.72

from Okan Demirmen <okan at demirmen.com>
maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/10/24 05:13:17 fgsch Exp $
d6 1
@


1.17
log
@fix more breakage. sturm@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/08/07 14:24:45 sturm Exp $
d4 1
a4 1
V=			2.71
a5 1
PKGNAME=		${DISTNAME}p0
d32 1
a32 1
FULLPKGNAME${i}=        symon${i}-${V}p0
@


1.16
log
@update to symon 2.71

maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/03/02 22:31:13 sturm Exp $
d6 1
d33 1
a33 1
FULLPKGNAME${i}=        symon${i}-${V}
d44 4
d51 1
a51 1
NO_REGRESS=		Yes
@


1.15
log
@fix uid/gid, noticed by mpf@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/12/20 10:35:36 alek Exp $
d4 1
a4 1
V=			2.67
a5 1
PKGNAME=		${DISTNAME}p0
@


1.14
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/09/21 16:44:04 naddy Exp $
d6 1
@


1.13
log
@Changes for symon 2.65 - 2.67:
- removed netiso depends
- _symon uid 535, 525 never made it into ports/infrastructure/db/user.list
- ntp clockadjusts no longer trigger extra measurements
- daemon parts ported to freebsd/netbsd/linux

From: Willem Dijkstra <wpd@@xs4all.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/03/02 14:32:43 naddy Exp $
d16 1
@


1.12
log
@update to 2.65: fixes a crash on powerpc; from Willem Dijkstra <wpd@@xs4all.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/02/28 00:17:40 naddy Exp $
d4 1
a4 1
V=			2.65
@


1.11
log
@Update to 2.64, which deals with split read/write diskstats.
From: Willem Dijkstra <wpd@@xs4all.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/02/16 20:09:03 sturm Exp $
d4 1
a4 1
V=			2.64
@


1.10
log
@update to symon 2.63

- some port cleanup
- @@extra
- remove -web subpackage, will become independent port (maybe ;)

from maintainer Willem Dijkstra <wpd at xs4all.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/02/04 07:39:19 sturm Exp $
d4 1
a4 1
V=			2.63
@


1.9
log
@mark some subpackages arch independent

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/09/22 23:56:38 pvalchev Exp $
d4 1
a4 1
V=			2.60
d8 1
a8 1
HOMEPAGE=		http://www.xs4all.nl/~wpd/symon/
d17 1
a17 1
MASTER_SITES=		${HOMEPAGE}
a24 1
MON_RUNDEPENDS=		
d28 1
a28 7
MUX_LIBDEPENDS=		rrd:rrdtool-*:net/rrdtool 
MUX_RUNDEPENDS=		rrd:rrdtool-*:net/rrdtool 
# web frontend only package
MULTI_PACKAGES+=	-web
COMMENT-web=		"symon web frontend"
WEB_LIBDEPENDS=
WEB_RUNDEPENDS=		rrd:rrdtool-*:net/rrdtool php:php4-core->=4.2.3:www/php4/core
a36 1
RUN_DEPENDS=		${${MODULE_NAME:U}_RUNDEPENDS}
d39 1
a39 7
BUILD_DEPENDS=		rrd:rrdtool-*:net/rrdtool 
RUN_DEPENDS=		rrd:rrdtool-*:net/rrdtool php:php4-core->=4.2.3:www/php4/core
LIB_DEPENDS=		rrd:rrdtool-*:net/rrdtool 
.endif

.if defined(PACKAGING) && ${SUBPACKAGE} == "-web"
PKG_ARCH=		*
@


1.8
log
@there is no "php4", the main package is called "php4-core"... fix busted
run dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/03/31 22:13:51 dhartmei Exp $
d50 4
@


1.7
log
@update to 2.60, introduces an mbuf statistics probe.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/02/27 19:21:37 naddy Exp $
d35 1
a35 1
WEB_RUNDEPENDS=		rrd:rrdtool-*:net/rrdtool php:php4->=4.2.3:www/php4/core
d48 1
a48 1
RUN_DEPENDS=		rrd:rrdtool-*:net/rrdtool php:php4->=4.2.3:www/php4/core
@


1.6
log
@Update to 2.58, fixes a rare bug in symon/sm_io.c.  strsep() would
clobber stream information and make the first stream in the
configuration file disappear.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/01/10 19:24:50 naddy Exp $
d4 1
a4 1
V=			2.58
@


1.5
log
@Update to 2.57, builds again.  From Willem Dijkstra <wpd@@xs4all.nl>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2002/10/08 07:56:42 dhartmei Exp $
d4 1
a4 1
V=			2.57
d6 1
a6 3
CATEGORIES=		net sysutils

MASTER_SITES=		http://www.xs4all.nl/~wpd/symon/
d16 2
@


1.4
log
@Update from author/maintainer:

Some changes to symon:
- multiple tcp clients to symux was broken (2.54)
- added a perl module to interact with symux (2.54)
- added a debug module for debug vars in kernel
- network code is redone, everything = ip v4/6 agnostic
- network addresses in config need no longer be resolvable
@
text
@d4 1
a4 1
V=			2.55
@


1.3
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/10/26 01:09:14 dhartmei Exp $
d4 1
a4 1
V=			2.53
@


1.2
log
@Update to 2.53, from maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2002/10/08 07:56:42 dhartmei Exp $
d7 1
a7 1
NEED_VERSION=		1.502
d54 2
@


1.1
log
@symon is a system monitoring tool consisting of a small probe which
gathers various data (cpu, memory, network interfaces, pf statistics,
disk io) and transfers it to a central server which stores it in
RRD databases.
@
text
@d1 1
a1 1
# $OpenBSD: $
d4 1
a4 1
V=			2.51
d24 2
a25 1
MON_DEPENDS=		
d29 3
a31 7
MUX_DEPENDS=		rrd:rrdtool-*:net/rrdtool 

# Web frontend only package also depends on php4,
# but php4.2.2 needs an :php4->=4:www/php4
# and php<     needs an :php4-core->=4:www/php4
# => net result = it won't work without php, but the package does not force you
# to have it.
d34 2
a35 1
WEB_DEPENDS=		rrd:rrdtool-*:net/rrdtool
d43 2
a44 1
LIB_DEPENDS=            ${${MODULE_NAME:U}_DEPENDS}
d47 2
a55 1

@

