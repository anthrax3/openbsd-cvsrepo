head	1.5;
access;
symbols
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.12
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.10
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.8
	OPENBSD_5_0:1.3.0.6
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.4
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.2.0.4
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.22
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.20
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.18
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.16
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.14
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.12
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.10
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.8
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.6
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.4
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	laurent-sebastien:1.1.1.1
	GNU:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2014.04.22.10.21.13;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2013.06.21.22.35.51;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2010.04.03.11.53.58;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.15.19.59.31;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.20.19.54.58;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.20.19.54.58;	author espie;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Kerberos is going away. No need to statically link to our own libcom_err
which made this package way bigger than it should.

ok sthen@@
@
text
@$OpenBSD: patch-MCONFIG_in,v 1.4 2013/06/21 22:35:51 sthen Exp $

Statically link against e2fsprogs libcom_err to avoid the need to install it.
Avoids conflict with libcom_err from kerberosV.

--- MCONFIG.in.orig	Wed Jun 19 15:04:08 2013
+++ MCONFIG.in	Wed Jun 19 15:04:57 2013
@@@@ -89,7 +89,7 @@@@ MKINSTALLDIRS = @@MKINSTALLDIRS@@
 #
 LIB = $(top_builddir)/lib
 LIBSS = $(LIB)/libss@@LIB_EXT@@ @@PRIVATE_LIBS_CMT@@ @@DLOPEN_LIB@@
-LIBCOM_ERR = $(LIB)/libcom_err@@LIB_EXT@@ @@PRIVATE_LIBS_CMT@@ @@SEM_INIT_LIB@@
+LIBCOM_ERR = $(LIB)/libcom_err@@STATIC_LIB_EXT@@ @@SEM_INIT_LIB@@
 LIBE2P = $(LIB)/libe2p@@LIB_EXT@@
 LIBEXT2FS = $(LIB)/libext2fs@@LIB_EXT@@
 LIBUUID = @@LIBUUID@@ @@SOCKET_LIB@@
@@@@ -97,7 +97,7 @@@@ LIBQUOTA = @@STATIC_LIBQUOTA@@
 LIBBLKID = @@LIBBLKID@@ @@PRIVATE_LIBS_CMT@@ $(LIBUUID)
 LIBINTL = @@LIBINTL@@
 DEPLIBSS = $(LIB)/libss@@LIB_EXT@@
-DEPLIBCOM_ERR = $(LIB)/libcom_err@@LIB_EXT@@
+DEPLIBCOM_ERR = $(LIB)/libcom_err@@STATIC_LIB_EXT@@
 DEPLIBUUID = @@DEPLIBUUID@@
 DEPLIBQUOTA = @@DEPSTATIC_LIBQUOTA@@
 DEPLIBBLKID = @@DEPLIBBLKID@@ @@PRIVATE_LIBS_CMT@@ $(DEPLIBUUID)
@


1.4
log
@Update e2fsprogs to 1.42.7, and rename the library back to libuuid now
that ossp-uuid (devel/uuid) has been changed to use the alternative name
libossp-uuid as used on various other OS. When third party software
wants a uuid library, is is nearly always the one from e2fsprogs,
so let's avoid patching for the common case.

e2fsprogs has its own libcom_err (slightly different API to heimdal);
previously we installed this under an alternative name; in this update
I have changed to statically linking this instead as it is not used
externally. The et/com_err.h header is no longer installed to avoid
ports picking it up in preference to the proper heimdal header for
this library in kerberosV/com_err.h.

Fallout will be handled in the next couple of commits.

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@rename libuuid to libe2fs-uuid and move it back to ${LOCALBASE}/lib.
Rename the uuid(3) manpage to e2fs-uuid(3). Merge subpackackages back
into one single package.

ok and prodded by ajacoutot@@
ok landry@@
@
text
@d1 8
a8 5
$OpenBSD: patch-MCONFIG_in,v 1.2 2009/03/15 19:59:31 landry Exp $
--- MCONFIG.in.orig	Sat Nov 15 18:17:22 2008
+++ MCONFIG.in	Fri Apr  2 21:44:32 2010
@@@@ -70,34 +70,40 @@@@ MKINSTALLDIRS = @@MKINSTALLDIRS@@
 # Library definitions
d11 1
a11 1
-LIBSS = $(LIB)/libss@@LIB_EXT@@ @@PRIVATE_LIBS_CMT@@ @@DLOPEN_LIB@@
d13 6
a18 10
-LIBE2P = $(LIB)/libe2p@@LIB_EXT@@
-LIBEXT2FS = $(LIB)/libext2fs@@LIB_EXT@@
-LIBUUID = $(LIB)/libuuid@@LIB_EXT@@ @@SOCKET_LIB@@
-LIBBLKID = $(LIB)/libblkid@@LIB_EXT@@ @@PRIVATE_LIBS_CMT@@ $(LIBUUID)
+LIBSS = -L$(LIB) -lss
+LIBCOM_ERR = -L$(LIB) -lext2fs_com_err
+LIBE2P = -L$(LIB) -le2p
+LIBEXT2FS = -L$(LIB) -lext2fs
+LIBUUID = -L$(LIB) -le2fs-uuid @@SOCKET_LIB@@
+LIBBLKID = -L$(LIB) -lblkid $(LIBUUID)
d21 5
a25 36
-DEPLIBUUID = $(LIB)/libuuid@@LIB_EXT@@
+DEPLIBE2P= $(LIB)/libe2p@@LIB_EXT@@
+DEPLIBEXT2FS= $(LIB)/libext2fs@@LIB_EXT@@
+DEPLIBCOM_ERR= $(LIB)/libext2fs_com_err@@LIB_EXT@@
+DEPLIBUUID = $(LIB)/libe2fs-uuid@@LIB_EXT@@
 DEPLIBBLKID = $(LIB)/libblkid@@LIB_EXT@@ @@PRIVATE_LIBS_CMT@@ $(LIBUUID)
 
 STATIC_LIBSS = $(LIB)/libss@@STATIC_LIB_EXT@@ @@DLOPEN_LIB@@
-STATIC_LIBCOM_ERR = $(LIB)/libcom_err@@STATIC_LIB_EXT@@ @@SEM_INIT_LIB@@
+STATIC_LIBCOM_ERR = $(LIB)/libext2fs_com_err@@STATIC_LIB_EXT@@ @@SEM_INIT_LIB@@
 STATIC_LIBE2P = $(LIB)/libe2p@@STATIC_LIB_EXT@@
 STATIC_LIBEXT2FS = $(LIB)/libext2fs@@STATIC_LIB_EXT@@
-STATIC_LIBUUID = $(LIB)/libuuid@@STATIC_LIB_EXT@@ @@SOCKET_LIB@@ 
+STATIC_LIBUUID = $(LIB)/libe2fs-uuid@@STATIC_LIB_EXT@@ @@SOCKET_LIB@@ 
 STATIC_LIBBLKID = $(LIB)/libblkid@@STATIC_LIB_EXT@@ $(STATIC_LIBUUID)
+DEPSTATIC_LIBEXT2FS= $(LIB)/libext2fs@@STATIC_LIB_EXT@@
+DEPSTATIC_LIBE2P= $(LIB)/libe2p@@STATIC_LIB_EXT@@
+DEPSTATIC_LIBCOM_ERR= $(LIB)/libext2fs_com_err@@STATIC_LIB_EXT@@
 DEPSTATIC_LIBSS = $(LIB)/libss@@STATIC_LIB_EXT@@
-DEPSTATIC_LIBUUID = $(LIB)/libuuid@@STATIC_LIB_EXT@@
+DEPSTATIC_LIBUUID = $(LIB)/libe2fs-uuid@@STATIC_LIB_EXT@@
 DEPSTATIC_LIBBLKID = $(LIB)/libblkid@@STATIC_LIB_EXT@@
 
 PROFILED_LIBSS = $(LIB)/libss@@PROFILED_LIB_EXT@@ @@DLOPEN_LIB@@
-PROFILED_LIBCOM_ERR = $(LIB)/libcom_err@@PROFILED_LIB_EXT@@ @@SEM_INIT_LIB@@
+PROFILED_LIBCOM_ERR = $(LIB)/libext2fs_com_err@@PROFILED_LIB_EXT@@ @@SEM_INIT_LIB@@
 PROFILED_LIBE2P = $(LIB)/libe2p@@PROFILED_LIB_EXT@@
 PROFILED_LIBEXT2FS = $(LIB)/libext2fs@@PROFILED_LIB_EXT@@
-PROFILED_LIBUUID = $(LIB)/libuuid@@PROFILED_LIB_EXT@@ @@SOCKET_LIB@@ 
+PROFILED_LIBUUID = $(LIB)/libe2fs-uuid@@PROFILED_LIB_EXT@@ @@SOCKET_LIB@@ 
 PROFILED_LIBBLKID = $(LIB)/libblkid@@PROFILED_LIB_EXT@@ $(PROFILED_LIBUUID)
-DEPPROFILED_LIBUUID = $(LIB)/libuuid@@PROFILED_LIB_EXT@@
+DEPPROFILED_LIBUUID = $(LIB)/libe2fs-uuid@@PROFILED_LIB_EXT@@
 DEPPROFILED_LIBBLKID = $(LIB)/libblkid@@PROFILED_LIB_EXT@@
 
 # An include directive pointing to a directory holding enough linux-like
@


1.2
log
@Update to e2fsprogs-1.41.4 (supporting ext2/ext3/ext4 fs) :
- Remove MAINTAINERS as they agree not having time nor interest for it.
- Use install-libs target instead of manually installing some cherrypicked
headers - now all needed headers are installed in the right place.
- Install fsck and its manpage as fsck_ext2fs instead of the confusing pfsck.
- Install uuid.pc as e2fs-uuid.pc to avoid conflicts with devel/uuid.
- Patch most Makefiles to print full build commands instead of the
non-informative linux-kernel-like output.
- Patch some regress tests, more and more works fine now.

With feedback and tweaks from naddy@@ and pea@@
@
text
@d1 1
a1 1
$OpenBSD: patch-MCONFIG_in,v 1.1.1.1 2004/02/20 19:54:58 espie Exp $
d3 2
a4 2
+++ MCONFIG.in	Sat Feb 21 17:00:02 2009
@@@@ -70,29 +70,35 @@@@ MKINSTALLDIRS = @@MKINSTALLDIRS@@
d18 1
a18 1
+LIBUUID = -L$(LIB) -luuid @@SOCKET_LIB@@
d22 1
d26 1
a26 1
 DEPLIBUUID = $(LIB)/libuuid@@LIB_EXT@@
d34 2
a35 1
 STATIC_LIBUUID = $(LIB)/libuuid@@STATIC_LIB_EXT@@ @@SOCKET_LIB@@ 
d41 2
a42 1
 DEPSTATIC_LIBUUID = $(LIB)/libuuid@@STATIC_LIB_EXT@@
d50 8
a57 1
 PROFILED_LIBUUID = $(LIB)/libuuid@@PROFILED_LIB_EXT@@ @@SOCKET_LIB@@ 
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- MCONFIG.in.orig	2002-02-24 22:03:57.000000000 +0100
+++ MCONFIG.in	2003-11-24 11:59:04.000000000 +0100
@@@@ -56,25 +56,37 @@@@ LDCONFIG = @@LDCONFIG@@
d8 2
a9 2
-LIBSS = $(LIB)/libss@@LIB_EXT@@
-LIBCOM_ERR = $(LIB)/libcom_err@@LIB_EXT@@
d12 2
a13 1
-LIBUUID = $(LIB)/libuuid@@LIB_EXT@@ @@SOCKET_LIB@@ 
d18 5
a22 1
+LIBUUID = -L$(LIB) -luuid @@SOCKET_LIB@@ 
a23 1
+DEPLIBE2P= $(LIB)/libe2p@@LIB_EXT@@
a24 1
+DEPLIBSS= $(LIB)/libss@@LIB_EXT@@
d26 1
d28 3
a30 3
 STATIC_LIBSS = $(LIB)/libss@@STATIC_LIB_EXT@@
-STATIC_LIBCOM_ERR = $(LIB)/libcom_err@@STATIC_LIB_EXT@@
+STATIC_LIBCOM_ERR = $(LIB)/libext2fs_com_err@@STATIC_LIB_EXT@@
d34 1
d38 1
a38 1
+DEPSTATIC_LIBSS= $(LIB)/libss@@STATIC_LIB_EXT@@
d40 1
d42 3
a44 3
 PROFILED_LIBSS = $(LIB)/libss@@PROFILED_LIB_EXT@@
-PROFILED_LIBCOM_ERR = $(LIB)/libcom_err@@PROFILED_LIB_EXT@@
+PROFILED_LIBCOM_ERR = $(LIB)/libext2fs_com_err@@PROFILED_LIB_EXT@@
a47 7
+DEPPROFILED_LIBEXT2FS= $(LIB)/libext2fs@@PROFILED_LIB_EXT@@
+DEPPROFILED_LIBE2P= $(LIB)/libe2p@@PROFILED_LIB_EXT@@
+DEPPROFILED_LIBCOM_ERR= $(LIB)/libext2fs_com_err@@PROFILED_LIB_EXT@@
+DEPPROFILED_LIBSS= $(LIB)/libss@@PROFILED_LIB_EXT@@
 DEPPROFILED_LIBUUID = $(LIB)/libuuid@@PROFILED_LIB_EXT@@
 
 #
@


1.1.1.1
log
@e2fsprogs, to handle mkfs, fsck, for linux ext2/ext3 fs.
@
text
@@
