head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.14
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.12
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.10
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.6
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.8
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.4
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.16
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.14
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.12
	OPENBSD_5_0:1.3.0.10
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.8
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.6
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.14
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.12
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.10
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.8
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.1.1.0.8
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.6
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.4
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	laurent-sebastien:1.1.1.1
	GNU:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2014.04.22.10.21.13;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.06.21.22.35.51;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.15.19.59.31;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2006.02.04.18.37.36;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.20.19.54.58;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.20.19.54.58;	author espie;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Kerberos is going away. No need to statically link to our own libcom_err
which made this package way bigger than it should.

ok sthen@@
@
text
@$OpenBSD: patch-lib_ss_Makefile_in,v 1.4 2013/06/21 22:35:51 sthen Exp $
--- lib/ss/Makefile.in.orig	Fri Sep 21 18:30:41 2012
+++ lib/ss/Makefile.in	Tue Apr 22 10:29:47 2014
@@@@ -15,8 +15,8 @@@@ DLOPEN_LIB = @@DLOPEN_LIB@@
 LIBRARY= libss
 LIBDIR= ss
 
-ELF_VERSION = 2.0
-ELF_SO_VERSION = 2
+ELF_VERSION = $(LIBss_VERSION)
+ELF_SO_VERSION = $(LIBss_VERSION)
 ELF_IMAGE = libss
 ELF_MYDIR = ss
 ELF_INSTALL_DIR = $(root_libdir)
@


1.4
log
@Update e2fsprogs to 1.42.7, and rename the library back to libuuid now
that ossp-uuid (devel/uuid) has been changed to use the alternative name
libossp-uuid as used on various other OS. When third party software
wants a uuid library, is is nearly always the one from e2fsprogs,
so let's avoid patching for the common case.

e2fsprogs has its own libcom_err (slightly different API to heimdal);
previously we installed this under an alternative name; in this update
I have changed to statically linking this instead as it is not used
externally. The et/com_err.h header is no longer installed to avoid
ports picking it up in preference to the proper heimdal header for
this library in kerberosV/com_err.h.

Fallout will be handled in the next couple of commits.

ok ajacoutot@@
@
text
@d1 4
a4 7
$OpenBSD$

Statically link libcom_err to avoid conflict with kerberosV.

--- lib/ss/Makefile.in.orig	Fri Sep 21 17:30:41 2012
+++ lib/ss/Makefile.in	Wed Jun 19 14:50:51 2013
@@@@ -15,12 +15,12 @@@@ DLOPEN_LIB = @@DLOPEN_LIB@@
a14 5
-ELF_OTHER_LIBS = -lcom_err $(DLOPEN_LIB)
+ELF_OTHER_LIBS = ../../libcom_err.a $(DLOPEN_LIB)
 
 BSDLIB_VERSION = 1.0
 BSDLIB_IMAGE = libss
@


1.3
log
@Update to e2fsprogs-1.41.4 (supporting ext2/ext3/ext4 fs) :
- Remove MAINTAINERS as they agree not having time nor interest for it.
- Use install-libs target instead of manually installing some cherrypicked
headers - now all needed headers are installed in the right place.
- Install fsck and its manpage as fsck_ext2fs instead of the confusing pfsck.
- Install uuid.pc as e2fs-uuid.pc to avoid conflicts with devel/uuid.
- Patch most Makefiles to print full build commands instead of the
non-informative linux-kernel-like output.
- Patch some regress tests, more and more works fine now.

With feedback and tweaks from naddy@@ and pea@@
@
text
@d1 6
a6 3
$OpenBSD: patch-lib_ss_Makefile_in,v 1.2 2006/02/04 18:37:36 bernd Exp $
--- lib/ss/Makefile.in.orig	Tue Oct  7 16:22:39 2008
+++ lib/ss/Makefile.in	Sun Feb 22 12:17:33 2009
d18 2
a19 2
-ELF_OTHER_LIBS = -L../.. -lcom_err $(DLOPEN_LIB)
+ELF_OTHER_LIBS = -L../.. -lext2fs_com_err $(DLOPEN_LIB)
a22 109
@@@@ -37,8 +37,7 @@@@ MK_CMDS=_SS_DIR_OVERRIDE=. ./mk_cmds
 XTRA_CFLAGS= -I$(srcdir)/../et
 
 .c.o:
-	@@echo "	CC $<"
-	@@$(CC) $(ALL_CFLAGS) -c $<
+	$(CC) $(ALL_CFLAGS) -c $<
 @@PROFILE_CMT@@	@@$(CC) $(ALL_CFLAGS) -g -pg -o profiled/$*.o -c $<
 @@CHECKER_CMT@@	@@$(CC) $(ALL_CFLAGS) -checker -g -o checker/$*.o -c $<
 @@ELF_CMT@@	@@$(CC) $(ALL_CFLAGS) -DSHARED_ELF_LIB -fPIC -o elfshared/$*.o -c $<
@@@@ -96,18 +95,15 @@@@ FILES=	$(SRCS) $(MKCMDSFILES) $(HFILES) \
 all::	libss.a ss.pc # libss_p.a lint
 
 std_rqs.c: std_rqs.ct mk_cmds
-	@@echo "	MK_CMDS $@@"
-	@@DIR=$(srcdir) $(MK_CMDS) $(srcdir)/std_rqs.ct
+	DIR=$(srcdir) $(MK_CMDS) $(srcdir)/std_rqs.ct
 
 std_rqs.o: ss_err.h
 
 test_cmd.c: test_cmd.ct mk_cmds
-	@@echo "	MK_CMDS $@@"
-	@@DIR=$(srcdir) $(MK_CMDS) $(srcdir)/test_cmd.ct
+	DIR=$(srcdir) $(MK_CMDS) $(srcdir)/test_cmd.ct
 
 ss_err.c ss_err.h: ss_err.et
-	@@echo "	COMPILE_ET ss_err.et"
-	@@$(COMPILE_ET) $(srcdir)/ss_err.et
+	$(COMPILE_ET) $(srcdir)/ss_err.et
 
 ct.tab.c ct.tab.h: ct.y
 	$(RM) -f ct.tab.* y.*
@@@@ -120,42 +116,32 @@@@ ct.tab.c ct.tab.h: ct.y
 #	$(CHMOD) -x $@@
 
 mk_cmds: $(DEP_SUBSTITUTE) $(srcdir)/mk_cmds.sh.in
-	@@echo "	SUBST $@@"
-	@@$(SUBSTITUTE) $(srcdir)/mk_cmds.sh.in mk_cmds
-	@@$(CHMOD) +x mk_cmds
+	$(SUBSTITUTE) $(srcdir)/mk_cmds.sh.in mk_cmds
+	$(CHMOD) +x mk_cmds
 
 ss.pc: $(srcdir)/ss.pc.in $(top_builddir)/config.status
-	@@echo "	CONFIG.STATUS $@@"
-	@@cd $(top_builddir); CONFIG_FILES=lib/ss/ss.pc ./config.status
+	cd $(top_builddir); CONFIG_FILES=lib/ss/ss.pc ./config.status
 
 installdirs::
-	@@echo "	MKINSTALLDIRS $(libdir) $(includedir)/ss $(datadir)/ss $(bindir)"
-	@@$(MKINSTALLDIRS) $(DESTDIR)$(libdir) \
+	$(MKINSTALLDIRS) $(DESTDIR)$(libdir) \
 		$(DESTDIR)$(includedir)/ss $(DESTDIR)$(datadir)/ss \
 		$(DESTDIR)$(bindir) $(DESTDIR)$(libdir)/pkgconfig
 
 install:: libss.a $(INSTALL_HFILES) installdirs ss_err.h mk_cmds ss.pc
-	@@echo "	INSTALL_DATA $(DESTDIR)$(libdir)/libss.a"
-	@@$(INSTALL_DATA) libss.a $(DESTDIR)$(libdir)/libss.a
-	@@-$(RANLIB) $(DESTDIR)$(libdir)/libss.a
-	@@$(CHMOD) $(LIBMODE) $(DESTDIR)$(libdir)/libss.a
-	@@$(RM) -f $(DESTDIR)$(includedir)/ss/*
-	@@for i in $(INSTALL_HFILES); do \
-		echo "	INSTALL_DATA $(DESTDIR)$(includedir)/ss/$$i"; \
+	$(INSTALL_DATA) libss.a $(DESTDIR)$(libdir)/libss.a
+	$(RANLIB) $(DESTDIR)$(libdir)/libss.a
+	$(CHMOD) $(LIBMODE) $(DESTDIR)$(libdir)/libss.a
+	$(RM) -f $(DESTDIR)$(includedir)/ss/*
+	for i in $(INSTALL_HFILES); do \
 		$(INSTALL_DATA) $(srcdir)/$$i $(DESTDIR)$(includedir)/ss/$$i; \
 	done
-	@@echo "	INSTALL_DATA $(includedir)/ss/ss_err.h"
-	@@$(INSTALL_DATA) ss_err.h $(DESTDIR)$(includedir)/ss/ss_err.h
-	@@for i in $(SHARE_FILES); do \
-		echo "	INSTALL_DATA $(DESTDIR)$(datadir)/ss/$$i"; \
+	$(INSTALL_DATA) ss_err.h $(DESTDIR)$(includedir)/ss/ss_err.h
+	for i in $(SHARE_FILES); do \
 		$(INSTALL_DATA) $(srcdir)/$$i $(DESTDIR)$(datadir)/ss/$$i; \
 	done
-	@@echo "	INSTALL $(bindir)/mk_cmds"
-	@@$(INSTALL) mk_cmds $(DESTDIR)$(bindir)/mk_cmds
-	@@echo "	INSTALL_DATA $(man1dir)/mk_cmds.1"
-	@@$(INSTALL_DATA) $(srcdir)/mk_cmds.1 $(DESTDIR)$(man1dir)/mk_cmds.1
-	@@echo "	INSTALL_DATA $(libdir)/pkgconfig/ss.pc"
-	@@$(INSTALL_DATA) ss.pc $(DESTDIR)$(libdir)/pkgconfig/ss.pc
+	$(INSTALL) mk_cmds $(DESTDIR)$(bindir)/mk_cmds
+	$(INSTALL_DATA) $(srcdir)/mk_cmds.1 $(DESTDIR)$(man1dir)/mk_cmds.1
+	$(INSTALL_DATA) ss.pc $(DESTDIR)$(libdir)/pkgconfig/ss.pc
 
 uninstall::
 	$(RM) -f $(DESTDIR)$(libdir)/libss.a $(DESTDIR)$(bindir)/mk_cmds \
@@@@ -163,15 +149,13 @@@@ uninstall::
 		$(DESTDIR)$(man1dir)/mk_cmds.1 
 	$(RM) -rf $(DESTDIR)$(includedir)/ss $(DESTDIR)$(datadir)/ss
 
-test_ss: test_ss.o test_cmd.o $(DEPLIBSS) $(LIBCOM_ERR)
-	@@echo "	LD $@@"
-	@@$(CC) -o $@@ test_ss.o test_cmd.o $(ALL_CFLAGS) \
+test_ss: test_ss.o test_cmd.o $(DEPLIBSS) $(DEPLIBCOM_ERR)
+	$(CC) -o $@@ test_ss.o test_cmd.o $(ALL_CFLAGS) \
 		$(LIBSS) $(LIBCOM_ERR)
 
 check:: all test_ss
-	@@echo "	RUN TEST test_ss"
-	-@@(LD_LIBRARY_PATH=$(LIB) DYLD_LIBRARY_PATH=$(LIB) ./test_ss -f $(srcdir)/test_script > test_out 2>&1; exit 0)
-	@@if diff test_out $(srcdir)/test_script_expected > test.diff; then \
+	(LD_LIBRARY_PATH=$(LIB) DYLD_LIBRARY_PATH=$(LIB) ./test_ss -f $(srcdir)/test_script > test_out 2>&1; exit 0)
+	if diff test_out $(srcdir)/test_script_expected > test.diff; then \
 		true ; else echo "Regression test for ss library failed!"; exit 1 ; fi
 
 clean::
@


1.2
log
@Fix busted SHARED_LIBS stuff.
@
text
@d1 6
a6 6
$OpenBSD: patch-lib_ss_Makefile_in,v 1.1.1.1 2004/02/20 19:54:58 espie Exp $
--- lib/ss/Makefile.in.orig	Sun Feb 24 21:04:00 2002
+++ lib/ss/Makefile.in	Sat Feb  4 19:06:07 2006
@@@@ -24,12 +24,12 @@@@ DLL_LIBS = -L../.. -lcom_err
 DLL_MYDIR = ss
 DLL_INSTALL_DIR = $(root_libdir)
d9 1
d11 1
a11 1
 ELF_SO_VERSION = 2
d15 2
a16 2
-ELF_OTHER_LIBS = -L../.. -lcom_err
+ELF_OTHER_LIBS = -L../.. -lext2fs_com_err
d20 109
@


1.1
log
@Initial revision
@
text
@d1 10
a10 4
$OpenBSD$
--- lib/ss/Makefile.in.orig	2003-11-17 01:05:46.000000000 +0100
+++ lib/ss/Makefile.in	2003-11-17 01:05:55.000000000 +0100
@@@@ -29,7 +29,7 @@@@ ELF_SO_VERSION = 2
@


1.1.1.1
log
@e2fsprogs, to handle mkfs, fsck, for linux ext2/ext3 fs.
@
text
@@
