head	1.39;
access;
symbols
	OPENBSD_6_0:1.38.0.2
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.36.0.2
	OPENBSD_5_9_BASE:1.36
	OPENBSD_5_8:1.35.0.6
	OPENBSD_5_8_BASE:1.35
	OPENBSD_5_7:1.35.0.2
	OPENBSD_5_7_BASE:1.35
	OPENBSD_5_6:1.33.0.2
	OPENBSD_5_6_BASE:1.33
	OPENBSD_5_5:1.30.0.2
	OPENBSD_5_5_BASE:1.30
	OPENBSD_5_4:1.29.0.2
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.26.0.2
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.4
	OPENBSD_5_0:1.23.0.2
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.14.0.4
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.2
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.8.0.4
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.7.0.4
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	laurent-sebastien:1.1.1.1
	GNU:1.1.1;
locks; strict;
comment	@# @;


1.39
date	2016.09.10.13.03.43;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	4KcvAK91uGdTLejD;

1.38
date	2016.04.12.15.19.40;	author naddy;	state Exp;
branches;
next	1.37;
commitid	N3rcp9eNnhmCMrQO;

1.37
date	2016.03.28.20.08.56;	author kili;	state Exp;
branches;
next	1.36;
commitid	Isn5BWw24sC7RBER;

1.36
date	2015.12.15.10.52.02;	author ajacoutot;	state Exp;
branches;
next	1.35;
commitid	KFyzb1RnkgWj5CEv;

1.35
date	2014.11.10.20.38.50;	author sthen;	state Exp;
branches;
next	1.34;
commitid	ZWdpzOBTJqqalnHy;

1.34
date	2014.11.08.11.28.04;	author sthen;	state Exp;
branches;
next	1.33;
commitid	OqEufjKDhN6lMXmH;

1.33
date	2014.04.30.12.38.55;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2014.04.30.11.40.04;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2014.04.22.10.21.13;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2013.08.12.15.04.59;	author landry;	state Exp;
branches;
next	1.29;

1.29
date	2013.06.21.22.35.51;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.11.11.41.30;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2012.08.18.12.41.38;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2012.05.20.21.42.50;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2012.05.20.21.39.22;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2012.03.29.13.39.00;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.07.31.14.48.19;	author kili;	state Exp;
branches;
next	1.22;

1.22
date	2011.07.29.08.00.58;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2011.07.06.07.21.24;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.20.17.22.40;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.19.07.43.00;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.05.17.12.01.26;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.03.11.53.58;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2010.04.02.21.19.07;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.04.02.18.08.56;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.06.25.01.09.12;	author jolan;	state Exp;
branches;
next	1.13;

1.13
date	2009.06.02.17.35.23;	author landry;	state Exp;
branches;
next	1.12;

1.12
date	2009.03.15.19.59.31;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2008.11.22.11.06.15;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2008.01.04.17.48.37;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.15.21.14.01;	author merdely;	state Exp;
branches;
next	1.8;

1.8
date	2007.01.07.19.13.49;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2006.02.20.16.51.46;	author aanriot;	state Exp;
branches;
next	1.6;

1.6
date	2006.02.04.18.37.36;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2005.12.23.16.43.08;	author mbalmer;	state Exp;
branches;
next	1.4;

1.4
date	2004.12.30.00.16.05;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2004.12.20.10.35.35;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2004.06.16.05.19.12;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.20.19.54.58;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.20.19.54.58;	author espie;	state Exp;
branches;
next	;


desc
@@


1.39
log
@First pass at pre-entively fixing ports that would break once guenther's header
pollution diff is in.

lang/squeak/vm does not build but it's due to the recent audio changes
games/xbattle: also fixes some conflicting implicit decl
print/hplip: also fixes some conflicting implicit decl
@
text
@# $OpenBSD: Makefile,v 1.38 2016/04/12 15:19:40 naddy Exp $

COMMENT=	utilities to manipulate ext2 filesystems

DISTNAME=	e2fsprogs-1.42.12
REVISION=	4
CATEGORIES=	sysutils devel
SHARED_LIBS=	blkid		0.0 \
		com_err		21.0 \
		e2p		3.1 \
		ext2fs		4.1 \
		ss		3.1 \
		uuid		14.0

HOMEPAGE=	http://e2fsprogs.sourceforge.net/

# GPLv2/LGPLv2/BSD/MIT
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c iconv intl

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=e2fsprogs/}

LIB_DEPENDS=	devel/gettext

SEPARATE_BUILD=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ARGS+= --disable-tls \
		--disable-uuidd \
		--enable-elf-shlibs
CONFIGURE_ENV=	CPPFLAGS="-D_EXT2_USE_C_VERSIONS_" \
		ac_cv_header_execinfo_h=no
USE_GMAKE=	Yes

MAKE_FLAGS=	V=1 \
		LIBINTL="-L${LOCALBASE}/lib -lintl -liconv" \
		LIBblkid_VERSION=${LIBblkid_VERSION} \
		LIBcom_err_VERSION=${LIBcom_err_VERSION} \
		LIBe2p_VERSION=${LIBe2p_VERSION} \
		LIBext2fs_VERSION=${LIBext2fs_VERSION} \
		LIBss_VERSION=${LIBss_VERSION} \
		LIBuuid_VERSION=${LIBuuid_VERSION}

FAKE_FLAGS=	root_sysconfdir=${PREFIX}/share/examples/e2fsprogs

INSTALL_TARGET=	install install-libs

post-install:
	cd ${PREFIX}/sbin && mv fsck fsck_ext2fs
	cd ${PREFIX}/man/man8 && mv fsck.8 fsck_ext2fs.8

pre-test:
	printf '#!/bin/sh\nexec /bin/md5 $$*\n' > ${WRKDIR}/bin/md5sum
	chmod +x ${WRKDIR}/bin/md5sum

.include <bsd.port.mk>
@


1.38
log
@replace gettext module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/03/28 20:08:56 kili Exp $
d6 1
a6 1
REVISION=	3
@


1.37
log
@Protect us from #defining linux specific ioctls in ext2_fs.h which
may be picked up by autoconfigure scripts and even used at runtime.
Found by brynet@@ when building archivers/libarchive.  People agree
(at least brynet@@, zhuk@@, nadd6@@ iirc), the only bikeshed was wether
to remote the #defines completely, used #ifdef __linux__ or #ifndef
__OpenBSD__. I choose the latter for now, because I think i've seen
some consumers of this port where some non-linux systems apparently
*do* support the same ioctls.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/12/15 10:52:02 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
d20 1
a20 1
WANTLIB += c
d24 1
a24 1
MODULES=	devel/gettext
@


1.36
log
@Don't pick up execinfo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/11/10 20:38:50 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.35
log
@- use arc4random in e2fsprogs' libuuid

- disable uuidd, it wasn't properly enabled in the port anyway (and most
situations where /dev/random would fail, the uuidd socket would also be
inaccessible)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/11/08 11:28:04 sthen Exp $
d6 1
a6 1
REVISION=	0
d32 2
a33 1
CONFIGURE_ENV=	CPPFLAGS="-D_EXT2_USE_C_VERSIONS_"
@


1.34
log
@update to e2fsprogs 1.42.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/04/30 12:38:55 sthen Exp $
d6 1
d29 3
a31 1
CONFIGURE_ARGS+= --enable-elf-shlibs --disable-tls
@


1.33
log
@fix format strings for mktemp(1)/mkstemp(3); mostly not enough X's, also one
case of using X's in the middle of the name ($test_name.XXXXXX.tmp) which is
a non-portable extension handled by gnu mktemp(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/04/30 11:40:04 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	e2fsprogs-1.42.9
REVISION=	0
d10 1
a10 1
		ext2fs		4.0 \
@


1.32
log
@Update to e2fsprogs-1.42.9.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/04/22 10:21:13 ajacoutot Exp $
d6 1
@


1.31
log
@Kerberos is going away. No need to statically link to our own libcom_err
which made this package way bigger than it should.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/08/12 15:04:59 landry Exp $
d5 1
a5 2
DISTNAME=	e2fsprogs-1.42.7
REVISION =	1
d10 1
a10 1
		ext2fs		3.1 \
d29 1
a29 1
CONFIGURE_ENV=	CPPFLAGS="${CPPFLAGS} -D_EXT2_USE_C_VERSIONS_"
d33 1
@


1.30
log
@Reinstall com_err.h, but this time under include/ext2fs/ since some ext2fs
headers include it. Adjust those headers accordingly.
Fixes sysutils/testdisk detection of ext2fs..
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/06/21 22:35:51 sthen Exp $
d6 1
a6 1
REVISION =	0
d9 1
d35 1
a47 8
	cd ${PREFIX}/include/ext2fs/ && ln -f ../com_err.h
	cd ${PREFIX}; rm -f lib/libcom_err.* lib/pkgconfig/com_err.pc \
	    include/com_err.h include/et/com_err.h bin/compile_et \
	    man/man1/compile_et.1 man/man3/com_err.3
	rmdir ${PREFIX}/include/et
	cd ${PREFIX} && perl -pi -e 's#et/com_err.h#ext2fs/com_err.h#' \
	    include/ss/ss_err.h include/ext2fs/ext2_err.h \
	    include/ext2fs/ext2fs.h share/et/et_h.awk
@


1.29
log
@Update e2fsprogs to 1.42.7, and rename the library back to libuuid now
that ossp-uuid (devel/uuid) has been changed to use the alternative name
libossp-uuid as used on various other OS. When third party software
wants a uuid library, is is nearly always the one from e2fsprogs,
so let's avoid patching for the common case.

e2fsprogs has its own libcom_err (slightly different API to heimdal);
previously we installed this under an alternative name; in this update
I have changed to statically linking this instead as it is not used
externally. The et/com_err.h header is no longer installed to avoid
ports picking it up in preference to the proper heimdal header for
this library in kerberosV/com_err.h.

Fallout will be handled in the next couple of commits.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/11 11:41:30 espie Exp $
d6 1
d46 1
d51 3
@


1.28
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/08/18 12:41:38 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	e2fsprogs-1.41.4
REVISION=	8
d8 4
a11 5
		e2p		3.0 \
		ext2fs		3.0 \
		ext2fs_com_err	3.0 \
		ss		3.0 \
		e2fs-uuid	0.0
d25 2
a26 1
CONFIGURE_STYLE= gnu
a29 1
USE_GROFF=	Yes
d31 2
a32 1
MAKE_FLAGS=	LIBblkid_VERSION=${LIBblkid_VERSION} \
a34 1
		LIBext2fs_com_err_VERSION=${LIBext2fs_com_err_VERSION} \
d36 1
a36 1
		LIBe2fs-uuid_VERSION=${LIBe2fs-uuid_VERSION}
d45 8
a52 1
	cd ${PREFIX}/man/man3 && mv uuid.3 e2fs-uuid.3
@


1.27
log
@Remove irrelevant $FreeBSD RCS ids.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/05/20 21:42:50 sthen Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.26
log
@don't use asm code; from frantisek holop, fixes a segfault with e2fsck
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.25 2012/05/20 21:39:22 sthen Exp $
# $FreeBSD: ports/sysutils/e2fsprogs/Makefile,v 1.8 2003/02/20 19:00:47 knu Exp $
@


1.25
log
@tidy whitespace
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/03/29 13:39:00 sthen Exp $
d7 1
a7 1
REVISION=	7
d33 1
@


1.24
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/07/31 14:48:19 kili Exp $
d4 1
a4 1
COMMENT=		utilities to manipulate ext2 filesystems
d6 9
a14 9
DISTNAME=		e2fsprogs-1.41.4
REVISION=		7
CATEGORIES=		sysutils devel
SHARED_LIBS=		blkid		0.0 \
			e2p		3.0 \
			ext2fs		3.0 \
			ext2fs_com_err	3.0 \
			ss		3.0 \
			e2fs-uuid	0.0
d16 1
a16 1
HOMEPAGE=		http://e2fsprogs.sourceforge.net/
d19 4
a22 4
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d24 1
a24 1
WANTLIB=		c
d26 1
a26 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=e2fsprogs/}
d28 1
a28 1
MODULES=		devel/gettext
d30 5
a34 5
SEPARATE_BUILD= 	Yes
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--enable-elf-shlibs --disable-tls
USE_GMAKE=		Yes
USE_GROFF =		Yes
d36 6
a41 6
MAKE_FLAGS=		LIBblkid_VERSION=${LIBblkid_VERSION} \
			LIBe2p_VERSION=${LIBe2p_VERSION} \
			LIBext2fs_VERSION=${LIBext2fs_VERSION} \
			LIBext2fs_com_err_VERSION=${LIBext2fs_com_err_VERSION} \
			LIBss_VERSION=${LIBss_VERSION} \
			LIBe2fs-uuid_VERSION=${LIBe2fs-uuid_VERSION}
d43 3
a45 1
FAKE_FLAGS=		root_sysconfdir=${PREFIX}/share/examples/e2fsprogs
a46 1
INSTALL_TARGET=		install install-libs
@


1.23
log
@ossp-uuid-<1.6.2p1 works better than ossp-uuid-<=1.6.2 in the
@@conflict marker.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/07/29 08:00:58 jasper Exp $
d30 1
a30 1
SEPARATE_BUILD= 	concurrent
@


1.22
log
@- tweak conflicts markers as originally intended

from mikolaj kucharski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/07/06 07:21:24 jasper Exp $
d7 1
a7 1
REVISION=		6
@


1.21
log
@More ossp-uuid vs e2fs-uuid cleaning: rename uuid.pc to ossp-uuid.pc
and e2fs-uuid.pc to uuid.pc. uuid.pc is what all projects using
pkg-config expect to find when looking for the "standard" uuid lib nowadays.

prompted by aja@@
ok aja@@ landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/20 17:22:40 espie Exp $
d7 1
a7 1
REVISION =		5
@


1.20
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/19 07:43:00 espie Exp $
d7 1
a7 1
REVISION =		4
a49 1
	mv ${PREFIX}/lib/pkgconfig/uuid.pc ${PREFIX}/lib/pkgconfig/e2fs-uuid.pc
@


1.19
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/05/17 12:01:26 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
d34 1
a34 1
USE_GROFF =	Yes
@


1.18
log
@Store the example file where it belongs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/04/03 11:53:58 kili Exp $
d34 1
@


1.17
log
@rename libuuid to libe2fs-uuid and move it back to ${LOCALBASE}/lib.
Rename the uuid(3) manpage to e2fs-uuid(3). Merge subpackackages back
into one single package.

ok and prodded by ajacoutot@@
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/04/02 21:19:07 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
d41 2
@


1.16
log
@Unfuck previous (my bad): move uuid.3 to -uuid and comment it so that is
doesn't conflict with devel/uuid... this is nightmarish!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/04/02 18:08:56 ajacoutot Exp $
d4 1
a4 2
COMMENT-main=		utilities to manipulate ext2 filesystems
COMMENT-uuid=		unique id generator library
d6 3
a8 6
V=			1.41.4
DISTNAME=		e2fsprogs-${V}
PKGNAME-main=		${DISTNAME}p2
PKGNAME-uuid=		e2fs-uuid-${V}p2
CATEGORIES-uuid=	devel
CATEGORIES=		sysutils
d14 1
a14 1
			uuid		2.0
a17 2
MULTI_PACKAGES=		-main -uuid

d40 1
a40 3
			LIBuuid_VERSION=${LIBuuid_VERSION}
LIB_DEPENDS-main=	lib/uuid/uuid::${BUILD_PKGPATH},-uuid \
			${MODGETTEXT_LIB_DEPENDS}
d46 1
a46 2
	${INSTALL_DATA_DIR} ${PREFIX}/lib/uuid
	mv ${PREFIX}/lib/libuuid.* ${PREFIX}/lib/uuid
a47 3
	if [ -f ${PREFIX}/lib/uuid/libuuid.so.${LIBuuid_VERSION} ]; then \
		ln -s uuid/libuuid.so.${LIBuuid_VERSION} ${PREFIX}/lib; \
	fi
@


1.15
log
@Use MODGETTEXT_LIB_DEPENDS.
Install man_page and regen PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/06/25 01:09:12 jolan Exp $
d9 2
a10 2
PKGNAME-main=		${DISTNAME}p1
PKGNAME-uuid=		e2fs-uuid-${V}p1
@


1.14
log
@dont install compile_et, avoids a conflict with net/openafs and the
base system
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/06/02 17:35:23 landry Exp $
d9 2
a10 2
PKGNAME-main=		${DISTNAME}p0
PKGNAME-uuid=		e2fs-uuid-${V}p0
d29 2
a30 1
WANTLIB=		c iconv intl
d47 2
a48 1
LIB_DEPENDS-main=	lib/uuid/uuid::${BUILD_PKGPATH},-uuid
@


1.13
log
@Fix path to libuuid in pkg-config file.
Found by and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/03/15 19:59:31 landry Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
@


1.12
log
@Update to e2fsprogs-1.41.4 (supporting ext2/ext3/ext4 fs) :
- Remove MAINTAINERS as they agree not having time nor interest for it.
- Use install-libs target instead of manually installing some cherrypicked
headers - now all needed headers are installed in the right place.
- Install fsck and its manpage as fsck_ext2fs instead of the confusing pfsck.
- Install uuid.pc as e2fs-uuid.pc to avoid conflicts with devel/uuid.
- Patch most Makefiles to print full build commands instead of the
non-informative linux-kernel-like output.
- Patch some regress tests, more and more works fine now.

With feedback and tweaks from naddy@@ and pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/11/22 11:06:15 ajacoutot Exp $
d10 1
a10 1
PKGNAME-uuid=		e2fs-uuid-${V}
@


1.11
log
@- regen patches and PLIST
- bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/01/04 17:48:37 espie Exp $
d7 1
a7 1
V=			1.27
d9 2
a10 2
PKGNAME-main=		${DISTNAME}p6
PKGNAME-uuid=		e2fs-uuid-${V}p0
d13 6
a18 5
SHARED_LIBS=		e2p		2.3 \
			ext2fs		2.4 \
			ext2fs_com_err	2.0 \
			ss		2.0 \
			uuid		1.2
a21 3
MAINTAINER=		Laurent Corbes <caf@@glot.net> \
			Sebastien Bombal <acide@@bombal.org>

d24 1
a24 1
# GPL
d29 1
a29 1
WANTLIB=		c
d33 2
d37 1
a37 1
CONFIGURE_ARGS+=	--enable-elf-shlibs
d40 2
a41 1
MAKE_FLAGS=		LIBe2p_VERSION=${LIBe2p_VERSION} \
d48 1
d50 5
a54 8
	${INSTALL_DATA_DIR} ${PREFIX}/include/ext2fs
	${INSTALL_DATA_DIR} ${PREFIX}/include/uuid
	${INSTALL_DATA} ${WRKSRC}/lib/ext2fs/*.h ${PREFIX}/include/ext2fs
	${INSTALL_DATA} ${WRKSRC}/lib/uuid/*.h ${PREFIX}/include/uuid
	@@cd ${PREFIX}/sbin && mv fsck pfsck
	@@cd ${PREFIX}/man/man8 && mv fsck.8 pfsck.8
	@@${INSTALL_DATA_DIR} ${PREFIX}/lib/uuid
	@@mv ${PREFIX}/lib/libuuid.* ${PREFIX}/lib/uuid
a57 1

@


1.10
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/15 21:14:01 merdely Exp $
d7 4
a10 3
DISTNAME=		e2fsprogs-1.27
PKGNAME-main=		${DISTNAME}p5
PKGNAME-uuid=		e2fs-uuid-1.27
@


1.9
log
@Remove surrounding quotes in COMMENT-*/PERMIT_*/IGNORE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/01/07 19:13:49 espie Exp $
a43 1
FAKE_FLAGS=		${MAKE_FLAGS}
@


1.8
log
@split the libuuid that's part of e2fs into its separate package. Move it
so it no longer conflicts with devel/uuid.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/02/20 16:51:46 aanriot Exp $
d4 2
a5 2
COMMENT-main=		"utilities to manipulate ext2 filesystems"
COMMENT-uuid=		"unique id generator library"
@


1.7
log
@- don't strip binaries by default, and get ride of elf-specific strip
  options.
- regen patches.
- bump PKGNAME.

spotted by and initial diff martin@@;
ok naddy@@ alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/02/04 18:37:36 bernd Exp $
d4 2
a5 1
COMMENT=		"utilities to manipulate ext2 filesystems"
d8 3
a10 1
PKGNAME=		${DISTNAME}p4
d23 2
d45 1
d54 6
@


1.6
log
@Fix busted SHARED_LIBS stuff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/12/23 16:43:08 mbalmer Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
@


1.5
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/12/30 00:16:05 espie Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
d33 7
@


1.4
log
@conflict
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/12/20 10:35:35 alek Exp $
d9 5
@


1.3
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/06/16 05:19:12 brad Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
@


1.2
log
@headers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/02/20 19:54:58 espie Exp $
d20 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a3 1

d7 1
d29 6
a34 2
	cd ${PREFIX}/sbin && mv fsck pfsck
	cd ${PREFIX}/man/man8 && mv fsck.8 pfsck.8
@


1.1.1.1
log
@e2fsprogs, to handle mkfs, fsck, for linux ext2/ext3 fs.
@
text
@@
