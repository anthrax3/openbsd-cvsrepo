head     1.1;
branch   1.1.1;
access   ;
symbols  jca_20170821:1.1.1.1 jca:1.1.1;
locks    ; strict;
comment  @# @;


1.1
date     2017.08.21.14.43.23;  author jca;  state Exp;
branches 1.1.1.1;
next     ;
commitid        xUOcnbQxGmy3u8qe;

1.1.1.1
date     2017.08.21.14.43.23;  author jca;  state Exp;
branches ;
next     ;
commitid        xUOcnbQxGmy3u8qe;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$

Detect xxd(1) at test time, not at configure time.
Base cmp(1) doesn't support --bytes.

Index: tests/test-mkfs
--- tests/test-mkfs.orig
+++ tests/test-mkfs
@@@@ -39,7 +39,7 @@@@ fi
 testname=$(basename "$1" .mkfs)
 
 
-if [ "$XXD_FOUND" != "yes" ]; then
+if ! command -v xxd >/dev/null 2>&1; then
 	echo "xxd not available, required by test"
 	exit 77  # report test skipped
 fi
@@@@ -60,7 +60,7 @@@@ limitarg=
 if [ -n "$CMP_LIMIT" ]; then
 	limitarg="--bytes=$CMP_LIMIT"
 fi
-cmp $limitarg "${testname}.out" "${testname}.refimg"
+gcmp $limitarg "${testname}.out" "${testname}.refimg"
 success=$?
 
 if [ $success -eq 0 ]; then
@


1.1.1.1
log
@Import dosfstools-4.1, a bunch of tools for FAT file systems

From Donovan Watteau (maintainer), ok fcambus@@

pkg/DESCR:
dosfstools consists of the programs mkfs.fat, fsck.fat and fatlabel
to create, check and label file systems of the FAT family.
@
text
@@
