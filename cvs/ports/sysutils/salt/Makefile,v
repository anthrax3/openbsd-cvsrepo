head	1.106;
access;
symbols
	OPENBSD_6_1:1.101.0.2
	OPENBSD_6_1_BASE:1.101
	OPENBSD_6_0:1.94.0.2
	OPENBSD_6_0_BASE:1.94
	OPENBSD_5_9:1.87.0.2
	OPENBSD_5_9_BASE:1.87
	OPENBSD_5_8:1.75.0.4
	OPENBSD_5_8_BASE:1.75
	OPENBSD_5_7:1.59.0.2
	OPENBSD_5_7_BASE:1.59
	OPENBSD_5_6:1.17.0.2
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.5.0.2
	OPENBSD_5_5_BASE:1.5
	landry_20130810:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.106
date	2017.08.18.07.18.58;	author ajacoutot;	state Exp;
branches;
next	1.105;
commitid	0r5VXpbMCuwD1iO9;

1.105
date	2017.07.13.07.51.38;	author ajacoutot;	state Exp;
branches;
next	1.104;
commitid	ioW6nrlAaL9Cse4t;

1.104
date	2017.06.23.12.59.37;	author ajacoutot;	state Exp;
branches;
next	1.103;
commitid	Ac5DFsi63WiHg5ML;

1.103
date	2017.05.11.09.25.27;	author ajacoutot;	state Exp;
branches;
next	1.102;
commitid	sfiFBp1HbbpXA0dT;

1.102
date	2017.04.19.13.41.19;	author ajacoutot;	state Exp;
branches;
next	1.101;
commitid	mJsFzR5R8LpMfDkl;

1.101
date	2017.02.23.08.26.47;	author ajacoutot;	state Exp;
branches;
next	1.100;
commitid	l5uubpP3kdkig4fU;

1.100
date	2017.01.31.03.29.46;	author ajacoutot;	state Exp;
branches;
next	1.99;
commitid	N2vJkcY7MZEGPBuv;

1.99
date	2016.12.14.08.58.03;	author ajacoutot;	state Exp;
branches;
next	1.98;
commitid	1crkFwpltpUP7JXf;

1.98
date	2016.11.23.09.41.20;	author ajacoutot;	state Exp;
branches;
next	1.97;
commitid	WlppWzvvSiwLDFMB;

1.97
date	2016.11.02.17.39.58;	author ajacoutot;	state Exp;
branches;
next	1.96;
commitid	ZgePvfR3i3M7EMF8;

1.96
date	2016.08.27.07.57.21;	author ajacoutot;	state Exp;
branches;
next	1.95;
commitid	rVBpczY3ILTl5yLh;

1.95
date	2016.07.30.14.27.29;	author ajacoutot;	state Exp;
branches;
next	1.94;
commitid	DFNa6REdxqQ8DO6f;

1.94
date	2016.07.10.08.50.35;	author ajacoutot;	state Exp;
branches;
next	1.93;
commitid	tXEHxASKH1gTSb5o;

1.93
date	2016.06.16.08.53.47;	author ajacoutot;	state Exp;
branches;
next	1.92;
commitid	PIcCDe4yxf5Ane6u;

1.92
date	2016.06.16.06.30.20;	author ajacoutot;	state Exp;
branches;
next	1.91;
commitid	OVT1xIvBrPOGYTpT;

1.91
date	2016.05.26.12.22.40;	author ajacoutot;	state Exp;
branches;
next	1.90;
commitid	NqaGjSxSblrBBora;

1.90
date	2016.04.07.17.15.32;	author ajacoutot;	state Exp;
branches;
next	1.89;
commitid	zDitgaib4m1PC9vB;

1.89
date	2016.03.23.07.07.32;	author ajacoutot;	state Exp;
branches;
next	1.88;
commitid	153O0Pm7yC4vX9pO;

1.88
date	2016.02.25.11.04.49;	author ajacoutot;	state Exp;
branches;
next	1.87;
commitid	YVNGLevufVYuqjXw;

1.87
date	2016.02.03.07.24.15;	author ajacoutot;	state Exp;
branches
	1.87.2.1;
next	1.86;
commitid	UWMq1RczCqTZTXpk;

1.86
date	2016.01.28.16.33.35;	author ajacoutot;	state Exp;
branches;
next	1.85;
commitid	ahfIeMjuTLCmiigm;

1.85
date	2016.01.28.06.56.56;	author ajacoutot;	state Exp;
branches;
next	1.84;
commitid	9sbwW8o8VFyG8rR9;

1.84
date	2015.12.02.09.29.55;	author ajacoutot;	state Exp;
branches;
next	1.83;
commitid	57Mt94Dq6GPJOkbM;

1.83
date	2015.11.17.09.40.45;	author ajacoutot;	state Exp;
branches;
next	1.82;
commitid	aO2YsSPoJyNidT5c;

1.82
date	2015.11.14.08.41.17;	author ajacoutot;	state Exp;
branches;
next	1.81;
commitid	XOS8SMZDxM3w9Zxj;

1.81
date	2015.11.14.08.30.06;	author ajacoutot;	state Exp;
branches;
next	1.80;
commitid	2iULdVLOBI4BqEK2;

1.80
date	2015.10.24.08.21.42;	author ajacoutot;	state Exp;
branches;
next	1.79;
commitid	XHhPmrKXsZ7e3QyT;

1.79
date	2015.10.14.18.21.31;	author ajacoutot;	state Exp;
branches;
next	1.78;
commitid	v7Tm5rX1XyEyGp8x;

1.78
date	2015.09.26.09.25.50;	author ajacoutot;	state Exp;
branches;
next	1.77;
commitid	xL1cXdkE8WLWyjpA;

1.77
date	2015.09.26.09.13.26;	author ajacoutot;	state Exp;
branches;
next	1.76;
commitid	rCk42OBE8U10BA7t;

1.76
date	2015.09.11.07.19.12;	author ajacoutot;	state Exp;
branches;
next	1.75;
commitid	HJShILPjWADOH5WP;

1.75
date	2015.07.15.19.43.26;	author ajacoutot;	state Exp;
branches;
next	1.74;
commitid	HGG76OJu1bJsl4R4;

1.74
date	2015.07.15.03.09.35;	author ajacoutot;	state Exp;
branches;
next	1.73;
commitid	hFBJkwfWJlkq0loz;

1.73
date	2015.07.11.16.29.25;	author ajacoutot;	state Exp;
branches;
next	1.72;
commitid	Rx1yI2jHHhVUNF5f;

1.72
date	2015.07.08.08.16.18;	author ajacoutot;	state Exp;
branches;
next	1.71;
commitid	8AFnyCdcUHXd1tr8;

1.71
date	2015.07.07.11.25.51;	author ajacoutot;	state Exp;
branches;
next	1.70;
commitid	d246wCK8iRXv39hv;

1.70
date	2015.07.03.12.08.14;	author ajacoutot;	state Exp;
branches;
next	1.69;
commitid	gHV34hVeB4o6a9Eb;

1.69
date	2015.06.23.16.48.35;	author ajacoutot;	state Exp;
branches;
next	1.68;
commitid	mRJj5GQ2RmPYBOxp;

1.68
date	2015.06.05.10.39.25;	author ajacoutot;	state Exp;
branches;
next	1.67;
commitid	RNJ6ulyYolP4AEEB;

1.67
date	2015.06.05.05.42.24;	author ajacoutot;	state Exp;
branches;
next	1.66;
commitid	gecAUZj0lDpV9Jhw;

1.66
date	2015.06.01.07.58.30;	author ajacoutot;	state Exp;
branches;
next	1.65;
commitid	2llrdBHLuySyBXpm;

1.65
date	2015.05.24.07.37.23;	author ajacoutot;	state Exp;
branches;
next	1.64;
commitid	vEj7i1LUJr1izPwF;

1.64
date	2015.05.07.09.15.55;	author ajacoutot;	state Exp;
branches;
next	1.63;
commitid	SwUliQR8dTPaJwzy;

1.63
date	2015.04.20.09.27.51;	author ajacoutot;	state Exp;
branches;
next	1.62;
commitid	WjsEV6LTYZSEhueg;

1.62
date	2015.04.02.14.21.17;	author jasper;	state Exp;
branches;
next	1.61;
commitid	4Dkfcsk2uZtFDSwy;

1.61
date	2015.03.31.06.17.24;	author ajacoutot;	state Exp;
branches;
next	1.60;
commitid	l458Nwq1ZHYTrLxu;

1.60
date	2015.03.27.14.40.04;	author ajacoutot;	state Exp;
branches;
next	1.59;
commitid	Gcr89g4lZ3BcuGb9;

1.59
date	2015.02.13.07.03.44;	author ajacoutot;	state Exp;
branches;
next	1.58;
commitid	TwIh6KlZTfjjQy7A;

1.58
date	2015.01.26.09.00.05;	author ajacoutot;	state Exp;
branches;
next	1.57;
commitid	65D3Mhq4WqUyKX22;

1.57
date	2015.01.26.08.48.30;	author ajacoutot;	state Exp;
branches;
next	1.56;
commitid	zPY1UK4aUKfHmb0m;

1.56
date	2015.01.16.13.19.48;	author ajacoutot;	state Exp;
branches;
next	1.55;
commitid	l1qaoWaTD8eUURBn;

1.55
date	2015.01.07.09.57.39;	author ajacoutot;	state Exp;
branches;
next	1.54;
commitid	ljrBzwpr23CjpR5G;

1.54
date	2015.01.06.17.45.51;	author ajacoutot;	state Exp;
branches;
next	1.53;
commitid	qORZ4AgCNbpTKVFC;

1.53
date	2015.01.06.15.27.24;	author ajacoutot;	state Exp;
branches;
next	1.52;
commitid	ST2Au8uwJcxgxyLk;

1.52
date	2015.01.06.15.16.33;	author ajacoutot;	state Exp;
branches;
next	1.51;
commitid	z64EeOG9aBizk2e2;

1.51
date	2014.10.16.13.33.31;	author ajacoutot;	state Exp;
branches;
next	1.50;
commitid	2ePfucByFQszhXS3;

1.50
date	2014.10.14.07.44.55;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	GQcsIvLnDlxWkEzg;

1.49
date	2014.10.12.08.56.35;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	Et8qHp1jelVaPaO6;

1.48
date	2014.10.11.08.42.46;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	OvC7sLkwwtmYmpTw;

1.47
date	2014.10.01.13.48.48;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	CzH0QAnCU8CsIoti;

1.46
date	2014.09.17.11.50.27;	author ajacoutot;	state Exp;
branches;
next	1.45;
commitid	TOrIWDPivpcKztct;

1.45
date	2014.09.16.09.32.12;	author ajacoutot;	state Exp;
branches;
next	1.44;
commitid	tA2zRRJ21eawHswP;

1.44
date	2014.09.13.05.09.03;	author ajacoutot;	state Exp;
branches;
next	1.43;
commitid	3QW6yp62jKaGlvqH;

1.43
date	2014.09.12.07.16.05;	author ajacoutot;	state Exp;
branches;
next	1.42;
commitid	sozreEj6lyoQ1qGp;

1.42
date	2014.09.11.06.28.41;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	KoxZDTXOCNHYnEca;

1.41
date	2014.09.10.17.08.03;	author ajacoutot;	state Exp;
branches;
next	1.40;
commitid	7XTB9yUV2nqe9bSe;

1.40
date	2014.09.10.06.08.42;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	Z6ofTPSCvDOMwd28;

1.39
date	2014.09.08.07.56.37;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	jyBLXTz0UGjrccQn;

1.38
date	2014.09.05.08.27.20;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	2Bap5wlCrTQzi9JB;

1.37
date	2014.09.03.09.11.19;	author ajacoutot;	state Exp;
branches;
next	1.36;
commitid	xK8rwVtbizQQKT1q;

1.36
date	2014.09.03.08.53.49;	author ajacoutot;	state Exp;
branches;
next	1.35;
commitid	IFB96rAfV1OH4bXC;

1.35
date	2014.09.02.17.18.55;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	rpydUm4DHSmllnK2;

1.34
date	2014.09.02.14.01.51;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	iLabIzoO2OGRH45e;

1.33
date	2014.09.02.13.30.13;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	d50vPwY3SUMU8Ss5;

1.32
date	2014.09.02.09.14.45;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	WywSboysSJkqpofR;

1.31
date	2014.09.02.08.41.43;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	RMQQzhNJIegi65mQ;

1.30
date	2014.09.01.14.56.11;	author ajacoutot;	state Exp;
branches;
next	1.29;
commitid	pqe2RgoCkVHnBZeJ;

1.29
date	2014.09.01.10.04.00;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	BtH9zLfcwCul28CO;

1.28
date	2014.08.30.21.42.31;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	y1G0JDabI5Qvg4lX;

1.27
date	2014.08.29.15.58.32;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	2Wc3yaPV7lP3QBi6;

1.26
date	2014.08.27.10.26.59;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	NnWFttYEMByBmHsl;

1.25
date	2014.08.26.21.41.43;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	QXwXV4VXjtDAyWGh;

1.24
date	2014.08.26.16.28.43;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	I6MZBioa1ty0RSJk;

1.23
date	2014.08.26.12.22.04;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	PyWYhafoL6cReqcQ;

1.22
date	2014.08.25.22.05.14;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	BCOZfYoc0c4waqJs;

1.21
date	2014.08.25.13.30.32;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	Nqv2yUAHH57l4ifc;

1.20
date	2014.08.22.14.30.08;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	JNOXczfBMV23Txod;

1.19
date	2014.08.22.12.22.09;	author ajacoutot;	state Exp;
branches;
next	1.18;
commitid	btbfFXYkD9avNmQx;

1.18
date	2014.08.10.08.28.13;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	qk7Zk12opiZjDEDV;

1.17
date	2014.07.15.15.49.37;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	I93msJqgT9q6Viog;

1.16
date	2014.07.11.08.55.57;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	7koy0r58wbqn7z97;

1.15
date	2014.06.17.13.16.15;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	koaoxXmTvBEUiDaa;

1.14
date	2014.06.17.12.30.39;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	x81xXgb42w072Lr6;

1.13
date	2014.06.16.07.30.38;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	12VHHSUmsR9dYUQ5;

1.12
date	2014.06.15.10.08.14;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	YgdoN1JRF4pvKHhP;

1.11
date	2014.05.27.14.51.52;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2014.05.27.14.35.50;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2014.05.27.14.16.35;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2014.05.27.14.12.43;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2014.05.27.10.13.43;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2014.05.21.07.39.47;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.12.27.10.19.30;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2013.10.08.07.02.34;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2013.08.22.18.14.46;	author kirby;	state Exp;
branches;
next	1.2;

1.2
date	2013.08.21.21.55.15;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2013.08.10.13.39.26;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.08.10.13.39.26;	author landry;	state Exp;
branches;
next	;

1.87.2.1
date	2016.07.10.08.55.53;	author ajacoutot;	state Exp;
branches;
next	;
commitid	PdjPCEUY741fKTu6;


desc
@@


1.106
log
@Update to salt-2017.7.1.
@
text
@# $OpenBSD: Makefile,v 1.105 2017/07/13 07:51:38 ajacoutot Exp $

# optional dependencies
# https://github.com/saltstack/salt/blob/develop/doc/conf.py#L54
# libvirt-python
# py-GitPython
# py-django
# py-libcloud (cloud-requirements.txt)
# py-mako
# py-mongo
# py-mysql
# py-openssl
# py-redis
# rabbitmq

COMMENT =		remote execution and configuration management system

MODPY_EGG_VERSION =	2017.7.1
DISTNAME =		salt-${MODPY_EGG_VERSION}

CATEGORIES =		sysutils net devel

HOMEPAGE =		http://saltstack.org/

MAINTAINER =		Antoine Jacoutot <ajacoutot@@openbsd.org>

# Apache 2.0
PERMIT_PACKAGE_CDROM =	Yes

MODPY_PI =		Yes

MODULES =		lang/python

BUILD_DEPENDS =		textproc/py-yaml \
			www/py-jinja2 \
			www/py-requests
			
# requirements/base.txt
RUN_DEPENDS =		devel/py-futures \
			net/py-msgpack \
			textproc/py-MarkupSafe \
			textproc/py-yaml \
			www/py-jinja2 \
			www/py-requests \
			www/py-tornado

# requirements/zeromq.txt
RUN_DEPENDS +=		net/py-zmq \
			security/py-crypto

# requirements/raet.txt (see pkg/DESCR)
#RUN_DEPENDS +=		devel/py-ioflo \
#			net/py-raet
#			security/py-libnacl


# salt/output/progress.py
RUN_DEPENDS +=		devel/py-progressbar

# salt/modules/x509.py
RUN_DEPENDS +=		security/py-M2Crypto

# max openfiles, soft: 3072, hard: 4096; DBus system session running...
TEST_IS_INTERACTIVE =	Yes
PORTHOME =		${WRKDIST}
TEST_DEPENDS =		databases/py-mysql \
			devel/git \
			devel/py-gitpython \
			devel/py-pip \
			devel/py-six \
			devel/py-virtualenv \
			devel/subversion \
			net/py-libcloud \
			net/rabbitmq \
			sysutils/salt-testing \
			www/py-CherryPy

pre-configure:
	sed -i 's,share/man,man,g' ${WRKSRC}/setup.py
	sed -i 's,^#user: root,user: _salt,' ${WRKSRC}/conf/{master,proxy}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples
	cp -R ${WRKSRC}/conf ${PREFIX}/share/examples/salt

do-test:
	cd ${WRKSRC} && \
		${MODPY_BIN} tests/runtests.py -v

.include <bsd.port.mk>
@


1.105
log
@Update to salt-2017.7.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2017/06/23 12:59:37 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2017.7.0
@


1.104
log
@Update to salt-2016.11.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2017/05/11 09:25:27 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.6
@


1.103
log
@Update to salt-2016.11.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2017/04/19 13:41:19 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.5
@


1.102
log
@Update to salt-2016.11.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2017/02/23 08:26:47 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.4
@


1.101
log
@Update to salt-2016.11.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2017/01/31 03:29:46 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.3
@


1.100
log
@Update to salt-2016.11.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2016/12/14 08:58:03 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.2
@


1.99
log
@Update to salt-2016.11.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2016/11/23 09:41:20 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.1
@


1.98
log
@Update to salt-2016.11.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2016/11/02 17:39:58 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.11.0
@


1.97
log
@Set TEST_IS_INTERACTIVE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2016/08/27 07:57:21 ajacoutot Exp $
d4 1
a4 1
# https://github.com/saltstack/salt/blob/develop/doc/conf.py#L42
d18 1
a18 1
MODPY_EGG_VERSION =	2016.3.3
d63 2
a64 2
# for tests
TEST_IS_INTERACTIVE =	Yes # requires bumped open files
d75 2
a76 1
			sysutils/salt-testing
a80 2
	sed -i 's,^REQUIRED_OPEN_FILES.*,REQUIRED_OPEN_FILES = 512,' \
		${WRKSRC}/tests/runtests.py
a85 2
# FAILED (total=817, skipped=99, passed=684, failures=26, errors=8)
# https://github.com/saltstack/salt/issues/15864
@


1.96
log
@Update to salt-2016.3.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2016/07/30 14:27:29 ajacoutot Exp $
d64 1
@


1.95
log
@Update to salt-2016.3.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2016/07/10 08:50:35 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.3.2
@


1.94
log
@Unbreak archive.extracted.

adapted from a diff by Florian Ermisch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2016/06/16 08:53:47 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.3.1
a19 1
REVISION =		1
@


1.93
log
@Unbreak mount.active.

reported by viq
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2016/06/16 06:30:20 ajacoutot Exp $
d20 1
a20 1
REVISION =		0
@


1.92
log
@Update to salt-2016.3.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2016/05/26 12:22:40 ajacoutot Exp $
d20 1
@


1.91
log
@Update to salt-2016.3.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2016/04/07 17:15:32 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2016.3.0
@


1.90
log
@Fix a few warnings (from upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2016/03/23 07:07:32 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.8
a19 1
REVISION =		0
@


1.89
log
@Update to salt-2015.8.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2016/02/25 11:04:49 ajacoutot Exp $
d20 1
@


1.88
log
@Update to salt-2015.8.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2016/02/03 07:24:15 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.7
@


1.87
log
@Update to salt-2015.8.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2016/01/28 16:33:35 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.5
@


1.87.2.1
log
@Unbreak archive.extracted.

adapted from a diff by Florian Ermisch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2016/02/03 07:24:15 ajacoutot Exp $
a19 1
REVISION =		0
@


1.86
log
@Fix sed(1).

reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2016/01/28 06:56:56 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.4
@


1.85
log
@Update to salt-2015.8.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2015/12/02 09:29:55 ajacoutot Exp $
d78 2
a79 2
	sed -i 's,^#user: root,user: _salt,,' ${WRKSRC}/conf/{master,proxy}
	sed -i 's,^REQUIRED_OPEN_FILES.*,REQUIRED_OPEN_FILES = 512,,' \
@


1.84
log
@Update to salt-2015.8.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2015/11/17 09:40:45 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.3
d77 3
a79 3
	perl -pi -e 's,share/man,man,g' ${WRKSRC}/setup.py
	perl -pi -e 's,^#user: root,user: _salt,,' ${WRKSRC}/conf/{master,proxy}
	perl -pi -e 's,^REQUIRED_OPEN_FILES.*,REQUIRED_OPEN_FILES = 512,,' \
@


1.83
log
@Add rc.d script for salt-api.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2015/11/14 08:41:17 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.2
a19 1
REVISION =		1
@


1.82
log
@Cleanup after itself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2015/11/14 08:30:06 ajacoutot Exp $
d20 1
a20 1
REVISION =		0
@


1.81
log
@Update to salt-2015.8.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2015/10/24 08:21:42 ajacoutot Exp $
d20 1
@


1.80
log
@Don't remove the content of /var/salt when running pkg_delete -d.
This directory is there to contain ssh keys and we don't want to force
remove them in case there's still needed. Sure, running pkg_delete this way
supposed we clean everything after ourselves, but I'll make an exception in
this case for obvious reasons.

deducted from a mail by Ossi Herrala on ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2015/10/14 18:21:31 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.1
a19 1
REVISION =		0
d78 1
a78 1
	perl -pi -e 's,^#user: root,user: _salt,,' ${WRKSRC}/conf/master
@


1.79
log
@Update to salt-2015.8.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2015/09/26 09:25:50 ajacoutot Exp $
d20 1
@


1.78
log
@Add missing dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2015/09/26 09:13:26 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.8.0
a19 1
REVISION =		1
@


1.77
log
@Don't check for proxy in the individual is_linux/is_windows/etc functions.
This breaks too many things. -- from upstream

bogus output reported by viq, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/09/11 07:19:12 ajacoutot Exp $
d20 1
a20 1
REVISION =		0
d39 3
a41 2
# _requirements.txt
RUN_DEPENDS =		net/py-msgpack \
d45 12
a56 1
			www/py-requests
d61 2
a62 4
# zeromq-requirements.txt: ZeroMQ transport
RUN_DEPENDS +=		net/py-zmq \
			security/py-M2Crypto \
			security/py-crypto
@


1.76
log
@Update to salt-2015.8.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2015/07/15 19:43:26 ajacoutot Exp $
d20 1
@


1.75
log
@Pushed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2015/07/15 03:09:35 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.5.3
a19 1
REVISION =		1
@


1.74
log
@Use new rcctl syntax.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/07/11 16:29:25 ajacoutot Exp $
d20 1
a20 1
REVISION =		0
@


1.73
log
@Update to salt-2015.5.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2015/07/08 08:16:18 ajacoutot Exp $
d20 1
@


1.72
log
@Better patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2015/07/07 11:25:51 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.5.2
a19 1
REVISION =		4
@


1.71
log
@Unbreak service.enable.
python_shell now defaults to False but we need it enabled  in this case to
combine commands.

from "viq", thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2015/07/03 12:08:14 ajacoutot Exp $
d20 1
a20 1
REVISION =		3
@


1.70
log
@Unbreak rcctl(1) usage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2015/06/23 16:48:35 ajacoutot Exp $
d20 1
a20 1
REVISION =		2
@


1.69
log
@Add a small blurb about RAET.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2015/06/05 10:39:25 ajacoutot Exp $
d20 1
a20 1
REVISION =		1
@


1.68
log
@Add _openbsd_remotes_on(). That's an helper function that allows us to
get rid of the lsof(8) dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2015/06/05 05:42:24 ajacoutot Exp $
d20 1
a20 1
REVISION =		0
a52 3

# raet-requirements.txt: RAET transport
# XXX TODO
@


1.67
log
@Update to salt-2015.5.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2015/06/01 07:58:30 ajacoutot Exp $
d20 1
a47 3

# XXX salt/utils/network.py
RUN_DEPENDS +=		sysutils/lsof
@


1.66
log
@Rework dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2015/05/24 07:37:23 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.5.1
a19 1
REVISION =		0
@


1.65
log
@Update to salt-2015.5.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2015/05/07 09:15:55 ajacoutot Exp $
d8 1
a8 1
# py-libcloud
d20 1
d39 1
a40 3
			net/py-zmq \
			security/py-M2Crypto \
			security/py-crypto \
d46 3
d51 8
@


1.64
log
@Update to salt-2015.5.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2015/04/20 09:27:51 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2015.5.0
@


1.63
log
@Update to salt-2014.7.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2015/04/02 14:21:17 jasper Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.7.5
d56 1
d65 3
a67 9
# https://github.com/saltstack/salt/commit/ea2be8bc7813ba2e2ddd05913783887513516c8c
# https://github.com/saltstack/salt/commit/81857ea0743f2fd475789044a11310eec7a6d4fc
# https://github.com/saltstack/salt/commit/3737b08e0d201ab33949f1fc5bc930e0ba2b6fee
# https://github.com/saltstack/salt/commit/400303e4e92db1820e4aad9c5a9d40f0eac311ab
# https://github.com/saltstack/salt/commit/1a04c83a3d076cd457d66d4da64418e2d27d3451
	cp ${FILESDIR}/openbsdrcctl.py ${WRKSRC}/salt/modules/
# https://github.com/saltstack/salt/commit/edcea17892bc8f6c4eec8441db366878ee2cd2bd
# https://github.com/saltstack/salt/commit/3cc9fcae4362ab9ccd3c6d3ff1d709da9a11743c
	cp ${FILESDIR}/openbsd_sysctl.py ${WRKSRC}/salt/modules/
d70 2
a71 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/salt/
	${INSTALL_DATA} ${WRKSRC}/conf/!(*.orig) \
		${PREFIX}/share/examples/salt/
@


1.62
log
@- switch to MODPY_PI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2015/03/31 06:17:24 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.7.4
@


1.61
log
@Update to salt-2014.7.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2015/03/27 14:40:04 ajacoutot Exp $
d30 1
a30 1
MASTER_SITES =		${MASTER_SITE_PYPI:=s/salt/}
@


1.60
log
@Update to salt-2014.7.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2015/02/13 07:03:44 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.7.3
@


1.59
log
@Update to salt-2014.7.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2015/01/26 09:00:05 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.7.2
@


1.58
log
@Add missing file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2015/01/26 08:48:30 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.7.1
a19 1
REVISION =		1
@


1.57
log
@Missing dependency on sysutils/lsof.
reported by semarie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2015/01/16 13:19:48 ajacoutot Exp $
d20 1
a20 1
REVISION =		0
@


1.56
log
@Update to salt-2014.7.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2015/01/07 09:57:39 ajacoutot Exp $
d20 1
d47 3
@


1.55
log
@Update to salt-2014.7.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2015/01/06 17:45:51 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.7.0
d35 2
a36 1
			www/py-jinja2
@


1.54
log
@Turn badvar into a real tuple.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2015/01/06 15:27:24 ajacoutot Exp $
a13 1
# py-requests
d18 1
a18 1
MODPY_EGG_VERSION =	2014.1.13
a19 1
REVISION =		2
d41 1
d43 2
a44 1
			www/py-jinja2
@


1.53
log
@Drop useless line continuation character.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/01/06 15:16:33 ajacoutot Exp $
d21 1
a21 1
REVISION =		1
d64 1
a64 1
# https://github.com/saltstack/salt/pull/19385
@


1.52
log
@Use new rcctl(8) syntax.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2014/10/16 13:33:31 ajacoutot Exp $
d21 1
a21 1
REVISION =		0
d64 1
@


1.51
log
@Update to salt-2014.1.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2014/10/14 07:44:55 ajacoutot Exp $
d21 1
@


1.50
log
@Merged.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/10/12 08:56:35 ajacoutot Exp $
d19 1
a19 1
MODPY_EGG_VERSION =	2014.1.12
a20 1
REVISION =		0
@


1.49
log
@Some services can have hardcoded default flags which is equivalent to
setting empty flags; so make sure we compare our current flags with the
default ones and return True when they match.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/10/11 08:42:46 ajacoutot Exp $
d63 1
a63 1
# https://github.com/saltstack/salt/pull/16582
@


1.48
log
@Update to salt-2014.1.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/10/01 13:48:48 ajacoutot Exp $
d21 1
d63 1
@


1.47
log
@Merge from upstream:
Return pillar data if not external pillar data.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/09/17 11:50:27 ajacoutot Exp $
d19 1
a19 1
MODPY_EGG_VERSION =	2014.1.11
a20 1
REVISION =		3
@


1.46
log
@Add issue #15864.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/09/16 09:32:12 ajacoutot Exp $
d21 1
a21 1
REVISION =		2
@


1.45
log
@Another missing TEST_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/09/13 05:09:03 ajacoutot Exp $
d74 1
@


1.44
log
@Committed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/09/12 07:16:05 ajacoutot Exp $
d50 1
@


1.43
log
@Don't use _formatfor().
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/09/11 06:28:41 ajacoutot Exp $
d64 1
a64 1
# https://github.com/saltstack/salt/pull/15660
@


1.42
log
@Always add a newline character for 'contents'; already fixed in salt->=2014.7.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/09/10 17:08:03 ajacoutot Exp $
d21 1
a21 1
REVISION =		1
@


1.41
log
@Fix the sysctl module when a value is already set.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/09/10 06:08:42 ajacoutot Exp $
d21 1
a21 1
REVISION =		0
@


1.40
log
@Update to salt-2014.1.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/09/08 07:56:37 ajacoutot Exp $
d21 1
d64 1
@


1.39
log
@textproc/py-yaml and www/py-jinja2 are needed to properly compute the
egg-version because it uses the Salt module during build.
This should finally unbreak packaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/09/05 08:27:20 ajacoutot Exp $
d19 1
a19 1
MODPY_EGG_VERSION =	2014.1.10
a20 1
REVISION =		15
@


1.38
log
@Fix tests to properly recognize OpenBSD.

openbsdrcctl: extend enabled() to check flags
On OpenBSD, it's possible to define particular flags a daemon should be
enabled with. To make sure the flags are properly updated when changed
(in pillars or states), we return a service as "disabled" if the
currently configured flags do not match the provided ones; this ensures
/etc/rc.conf.local is always in sync.

All patches merged upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/09/03 09:11:19 ajacoutot Exp $
d36 3
@


1.37
log
@Seems that the egg-info file now always installs with the proper version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/09/03 08:53:49 ajacoutot Exp $
d21 1
a21 1
REVISION =		14
d58 1
d70 2
a71 2
	ln -sf ${LOCALBASE}/bin/pip-${MODPY_VERSION} ${WRKDIR}/bin/pip
	@@${MODPY_TEST_TARGET}
@


1.36
log
@Add missing TEST_DEPENDS and update the 'make test' stats.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/09/02 17:18:55 ajacoutot Exp $
d21 1
a21 1
REVISION =		13
@


1.35
log
@All patches have been committed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/09/02 14:01:51 ajacoutot Exp $
d45 7
a51 1
TEST_DEPENDS =		devel/py-pip \
d67 1
a67 1
# FAILED (total=815, skipped=186, passed=590, failures=31, errors=8)
@


1.34
log
@Fix arp() and mod_hostname() to work on OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/09/02 13:30:13 ajacoutot Exp $
d51 1
a51 1
# https://github.com/saltstack/salt/pull/15403
@


1.33
log
@Use strip() and lstrip() instead of replace().
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/09/02 09:14:45 ajacoutot Exp $
d21 1
a21 1
REVISION =		12
@


1.32
log
@Fix the timezone module on BSDs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/09/02 08:41:43 ajacoutot Exp $
d21 1
a21 1
REVISION =		11
@


1.31
log
@Fix the postgres module on OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/09/01 14:56:11 ajacoutot Exp $
d21 1
a21 1
REVISION =		10
@


1.30
log
@Implement OpenBSD support to the mount module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/09/01 10:04:00 ajacoutot Exp $
d21 1
a21 1
REVISION =		9
@


1.29
log
@Add support for account and password expiration.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/08/30 21:42:31 ajacoutot Exp $
d21 1
a21 1
REVISION =		8
@


1.28
log
@Huge improvement to the rcctl service module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/08/29 15:58:32 ajacoutot Exp $
d21 1
a21 1
REVISION =		7
@


1.27
log
@Implement login class support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/08/27 10:26:59 ajacoutot Exp $
d21 1
a21 1
REVISION =		6
d51 1
@


1.26
log
@Fix and implement OpenBSD support in the following modules:
bsd_shadow, disk, groupadd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/08/26 21:41:43 ajacoutot Exp $
d21 1
a21 1
REVISION =		5
@


1.25
log
@All patches have been pushed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/08/26 16:28:43 ajacoutot Exp $
d21 1
a21 1
REVISION =		4
@


1.24
log
@Fix the useradd module to work with OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/08/26 12:22:04 ajacoutot Exp $
d52 1
a52 1
# https://github.com/saltstack/salt/pull/15283
@


1.23
log
@Add a module to handle sysctl(8) values.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/08/25 22:05:14 ajacoutot Exp $
d21 1
a21 1
REVISION =		3
d52 1
a52 1
# https://github.com/saltstack/salt/pull/15278
@


1.22
log
@rcctl(8) implementation committed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/08/25 13:30:32 ajacoutot Exp $
d21 1
a21 1
REVISION =		2
d52 2
@


1.21
log
@Fix pylint issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/08/22 14:30:08 ajacoutot Exp $
d50 1
a50 1
# https://github.com/saltstack/salt/pull/15172
@


1.20
log
@Implement enabled/disabled.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/08/22 12:22:09 ajacoutot Exp $
d21 1
a21 1
REVISION =		1
@


1.19
log
@Implement full service management using rcctl(8).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/08/10 08:28:13 ajacoutot Exp $
d21 1
a21 1
REVISION =		0
@


1.18
log
@Update to salt-2014.1.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/07/15 15:49:37 ajacoutot Exp $
d21 1
d50 2
@


1.17
log
@Fix comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/07/11 08:55:57 ajacoutot Exp $
d19 1
a19 1
MODPY_EGG_VERSION =	2014.1.7
@


1.16
log
@Update to salt-2014.1.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/06/17 13:16:15 ajacoutot Exp $
d4 1
a4 1
# https://github.com/saltstack/salt/blob/develop/doc/conf.py#L37
@


1.15
log
@New values for regress tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/06/17 12:30:39 ajacoutot Exp $
d8 1
d19 1
a19 1
MODPY_EGG_VERSION =	2014.1.5
a20 1
REVISION =		0
@


1.14
log
@The homedir of the user running salt must be outside of the /srv/salt
hierarchy because content of that path is available to all minions; so
move it to /var/salt .
Rename _salt-master to _salt for consistency.
discussed with "viq"

While here, drop rc_pre() from the minion and syndir rc.d(8) scripts,
they are not needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/06/16 07:30:38 ajacoutot Exp $
d42 2
d55 1
a55 1
# FAILED (total=816, skipped=179, passed=612, failures=16, errors=9)
@


1.13
log
@Update to salt-2014.1.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/06/15 10:08:14 ajacoutot Exp $
d20 1
@


1.12
log
@Add a real homedir for the _salt-master user so that we can store the
ssh keys used by GitFS.

noticed by "viq"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/05/27 14:51:52 ajacoutot Exp $
d18 1
a18 1
MODPY_EGG_VERSION =	2014.1.4
a19 1
REVISION =		3
@


1.11
log
@Rm more files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/05/27 14:35:50 ajacoutot Exp $
d20 1
a20 1
REVISION =		2
@


1.10
log
@Loosen up dependencies and note optional ones.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/05/27 14:16:35 ajacoutot Exp $
d20 1
a20 1
REVISION =		1
@


1.9
log
@Indent, no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/05/27 14:12:43 ajacoutot Exp $
d3 12
a14 1
# XXX devel/py-gitpython for fileserver backend ?
d20 1
a20 1
REVISION =		0
d34 2
a35 2
RUN_DEPENDS =		net/py-libcloud \
			net/py-msgpack \
a38 1
			textproc/py-MarkupSafe \
@


1.8
log
@Simplify this port not to deviate too much from upstream defaults.
Properly run as _salt-master without breaking.
Add an rc.d script for salt-syndic.
Drop useless README.
Remove all files when running pkg_delete -c
Install more config file examples.
Take maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/05/27 10:13:43 ajacoutot Exp $
d5 1
a5 1
COMMENT =	remote execution and configuration management system
d8 2
a9 2
DISTNAME =	salt-${MODPY_EGG_VERSION}
REVISION =	0
d11 1
a11 1
CATEGORIES =	sysutils net devel
d13 1
a13 1
HOMEPAGE =	http://saltstack.org/
d15 1
a15 1
MAINTAINER =	Antoine Jacoutot <ajacoutot@@openbsd.org>
d20 1
a20 1
MASTER_SITES =	${MASTER_SITE_PYPI:=s/salt/}
d22 9
a30 9
MODULES =	lang/python
RUN_DEPENDS =	net/py-libcloud \
		net/py-msgpack \
		net/py-zmq \
		security/py-M2Crypto \
		security/py-crypto \
		textproc/py-MarkupSafe \
		textproc/py-yaml \
		www/py-jinja2
d32 2
a33 2
TEST_DEPENDS =	devel/py-pip \
		sysutils/salt-testing
@


1.7
log
@Update to salt-2014.1.4.
Start fixing the service module for OpenBSD.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.6 2014/05/21 07:39:47 ajacoutot Exp $
d9 1
d15 2
d35 8
a46 9

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/salt/
	${INSTALL_DATA} ${WRKSRC}/conf/master \
		${PREFIX}/share/examples/salt/master.sample
	${INSTALL_DATA} ${WRKSRC}/conf/minion \
		${PREFIX}/share/examples/salt/minion.sample

# devel/py-gitpython for fileserver backend ?
@


1.6
log
@Update to salt-0.17.5.

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/12/27 10:19:30 landry Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.17.5
d18 1
a18 1
RUN_DEPENDS =	net/py-zmq \
d20 1
a20 1
		www/py-jinja2 \
d24 2
a25 1
		textproc/py-yaml
d30 1
a30 1
# FAILED (total=568, skipped=77, passed=464, failures=18, errors=9)
@


1.5
log
@Update to salt 0.17.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/10/08 07:02:34 landry Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.17.4
d23 1
d29 1
a29 1
#FAILED (total=569, skipped=33, passed=511, failures=16, errors=9) 
@


1.4
log
@Update to salt 0.17.0.

See http://salt.readthedocs.org/en/latest/topics/releases/0.17.0.html
for the changelog.
Depend on salt-testing for regress tests, most of them pass.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/08/22 18:14:46 kirby Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.17.0
d28 1
a28 1
#FAILED (total=542, skipped=32, passed=484, failures=17, errors=9) 
@


1.3
log
@ - install sample configs with sane defaults
 - rework README
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/08/21 21:55:15 landry Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.16.3
a6 1
REVISION =	1
d25 4
d30 1
@


1.2
log
@Seems i messed up uid/gid, 721 was already taken by dkimproxy..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/08/10 13:39:26 landry Exp $
d7 1
a7 1
REVISION =	0
d28 7
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
@


1.1.1.1
log
@Import salt 0.16.3.

Salt is a new approach to infrastructure management. Easy enough to get
running in minutes, scalable enough to manage tens of thousands of
servers, and fast enough to communicate with them in seconds.

Salt delivers a dynamic communication bus for infrastructures that can
be used for orchestration, remote execution, configuration management
and much more.

ok ajacoutot@@
@
text
@@
