head	1.5;
access;
symbols
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3;
locks; strict;
comment	@# @;


1.5
date	2015.05.07.09.15.55;	author ajacoutot;	state dead;
branches;
next	1.4;
commitid	SwUliQR8dTPaJwzy;

1.4
date	2015.03.27.14.40.04;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	Gcr89g4lZ3BcuGb9;

1.3
date	2015.01.16.13.19.48;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	l1qaoWaTD8eUURBn;

1.2
date	2015.01.07.09.57.40;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	ljrBzwpr23CjpR5G;

1.1
date	2014.09.05.08.27.20;	author ajacoutot;	state Exp;
branches;
next	;
commitid	2Bap5wlCrTQzi9JB;


desc
@@


1.5
log
@Update to salt-2015.5.0.
@
text
@$OpenBSD: patch-tests_integration_modules_cmdmod_py,v 1.4 2015/03/27 14:40:04 ajacoutot Exp $

https://github.com/saltstack/salt/commit/1ef276575fa6f95767c70e90b7f77bfdfcc5a045

--- tests/integration/modules/cmdmod.py.orig	Wed Mar 25 00:26:39 2015
+++ tests/integration/modules/cmdmod.py	Fri Mar 27 15:38:04 2015
@@@@ -88,7 +88,7 @@@@ class CMDModuleTest(integration.ModuleCase):
         from salt.modules import cmdmod
 
         cmdmod.__grains__ = {'os': 'darwin'}
-        if sys.platform.startswith('freebsd'):
+        if sys.platform.startswith(('freebsd', 'openbsd')):
             shell = '/bin/sh'
         else:
             shell = '/bin/bash'
@@@@ -120,7 +120,7 @@@@ class CMDModuleTest(integration.ModuleCase):
         '''
         cmd.run_stderr
         '''
-        if sys.platform.startswith('freebsd'):
+        if sys.platform.startswith(('freebsd', 'openbsd')):
             shell = '/bin/sh'
         else:
             shell = '/bin/bash'
@@@@ -137,7 +137,7 @@@@ class CMDModuleTest(integration.ModuleCase):
         '''
         from salt._compat import string_types
 
-        if sys.platform.startswith('freebsd'):
+        if sys.platform.startswith(('freebsd', 'openbsd')):
             shell = '/bin/sh'
         else:
             shell = '/bin/bash'
@


1.4
log
@Update to salt-2014.7.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-tests_integration_modules_cmdmod_py,v 1.3 2015/01/16 13:19:48 ajacoutot Exp $
@


1.3
log
@Update to salt-2014.7.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-tests_integration_modules_cmdmod_py,v 1.2 2015/01/07 09:57:40 ajacoutot Exp $
d5 3
a7 3
--- tests/integration/modules/cmdmod.py.orig	Wed Jan 14 19:38:22 2015
+++ tests/integration/modules/cmdmod.py	Fri Jan 16 13:29:58 2015
@@@@ -69,7 +69,7 @@@@ class CMDModuleTest(integration.ModuleCase):
d16 1
a16 1
@@@@ -101,7 +101,7 @@@@ class CMDModuleTest(integration.ModuleCase):
d25 1
a25 1
@@@@ -118,7 +118,7 @@@@ class CMDModuleTest(integration.ModuleCase):
@


1.2
log
@Update to salt-2014.7.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-tests_integration_modules_cmdmod_py,v 1.1 2014/09/05 08:27:20 ajacoutot Exp $
d5 3
a7 3
--- tests/integration/modules/cmdmod.py.orig	Mon Nov  3 20:38:21 2014
+++ tests/integration/modules/cmdmod.py	Wed Jan  7 10:33:06 2015
@@@@ -70,7 +70,7 @@@@ class CMDModuleTest(integration.ModuleCase):
d16 1
a16 1
@@@@ -102,7 +102,7 @@@@ class CMDModuleTest(integration.ModuleCase):
d25 1
a25 1
@@@@ -119,7 +119,7 @@@@ class CMDModuleTest(integration.ModuleCase):
@


1.1
log
@Fix tests to properly recognize OpenBSD.

openbsdrcctl: extend enabled() to check flags
On OpenBSD, it's possible to define particular flags a daemon should be
enabled with. To make sure the flags are properly updated when changed
(in pillars or states), we return a service as "disabled" if the
currently configured flags do not match the provided ones; this ensures
/etc/rc.conf.local is always in sync.

All patches merged upstream.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- tests/integration/modules/cmdmod.py.orig	Thu Sep  4 09:39:12 2014
+++ tests/integration/modules/cmdmod.py	Thu Sep  4 09:40:22 2014
@@@@ -75,7 +75,7 @@@@ class CMDModuleTest(integration.ModuleCase):
d16 1
a16 1
@@@@ -107,7 +107,7 @@@@ class CMDModuleTest(integration.ModuleCase):
d25 1
a25 1
@@@@ -124,7 +124,7 @@@@ class CMDModuleTest(integration.ModuleCase):
@

