head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.05.07.09.15.55;	author ajacoutot;	state dead;
branches;
next	1.1;
commitid	SwUliQR8dTPaJwzy;

1.1
date	2014.09.05.08.27.20;	author ajacoutot;	state Exp;
branches;
next	;
commitid	2Bap5wlCrTQzi9JB;


desc
@@


1.2
log
@Update to salt-2015.5.0.
@
text
@$OpenBSD: patch-tests_integration_modules_sysctl_py,v 1.1 2014/09/05 08:27:20 ajacoutot Exp $

https://github.com/saltstack/salt/commit/1ef276575fa6f95767c70e90b7f77bfdfcc5a045

--- tests/integration/modules/sysctl.py.orig	Thu Sep  4 09:39:28 2014
+++ tests/integration/modules/sysctl.py	Thu Sep  4 09:44:11 2014
@@@@ -37,6 +37,14 @@@@ class SysctlModuleTest(integration.ModuleCase):
                            1,
                            'Multiline value was parsed wrong')
 
+    @@skipIf(not sys.platform.startswith('openbsd'), 'OpenBSD specific')
+    def test_show_openbsd(self):
+        ret = self.run_function('sysctl.show')
+        self.assertIn('kern.ostype', ret, 'kern.ostype absent')
+        self.assertEqual(
+            ret.get('kern.ostype'), 'OpenBSD', 'Incorrect kern.ostype'
+        )
+
     @@skipIf(not sys.platform.startswith('darwin'), 'Darwin (OS X) specific')
     def test_show_darwin(self):
         ret = self.run_function('sysctl.show')
@


1.1
log
@Fix tests to properly recognize OpenBSD.

openbsdrcctl: extend enabled() to check flags
On OpenBSD, it's possible to define particular flags a daemon should be
enabled with. To make sure the flags are properly updated when changed
(in pillars or states), we return a service as "disabled" if the
currently configured flags do not match the provided ones; this ensures
/etc/rc.conf.local is always in sync.

All patches merged upstream.
@
text
@d1 1
a1 1
$OpenBSD$
@

