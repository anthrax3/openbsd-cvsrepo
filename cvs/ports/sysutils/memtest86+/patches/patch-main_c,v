head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.08.12.19.47.32;	author naddy;	state Exp;
branches;
next	;
commitid	2Wjcw8FjdS6rd8k1;


desc
@@


1.1
log
@Make this palatable to clang: fix inlines, hack for computed goto.
Nota bene: The resulting memtest binary is still broken.
ok jca@@
@
text
@$OpenBSD$

Index: main.c
--- main.c.orig
+++ main.c
@@@@ -111,6 +111,7 @@@@ static void __run_at(unsigned long addr)
 	/* Copy memtest86+ code */
 	memmove((void *)addr, &_start, _end - _start);
 	/* Jump to the start address */
+dummy:	p = &&dummy;
 	p = (ulong *)(addr + startup_32 - _start);
 	goto *p;
 }
@
