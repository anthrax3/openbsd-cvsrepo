head	1.6;
access;
symbols
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.1.1.0.4
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	sthen_20140605:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2016.07.31.13.48.55;	author jca;	state Exp;
branches;
next	1.5;
commitid	t2CrpuVuobNelF0i;

1.5
date	2016.07.14.16.57.20;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	bCE99u6Mle47TWFc;

1.4
date	2015.12.03.21.24.32;	author sthen;	state Exp;
branches;
next	1.3;
commitid	qh8BBe4z9PLvLPKf;

1.3
date	2015.08.25.11.04.38;	author jca;	state Exp;
branches;
next	1.2;
commitid	jWHBCzKs5xKamlhw;

1.2
date	2015.04.21.18.19.27;	author sthen;	state Exp;
branches;
next	1.1;
commitid	K3h50UR8bs6rnpEi;

1.1
date	2014.06.05.15.40.09;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	CcWvZc3ZbkKiPHj3;

1.1.1.1
date	2014.06.05.15.40.09;	author sthen;	state Exp;
branches;
next	;
commitid	CcWvZc3ZbkKiPHj3;


desc
@@


1.6
log
@fusermount->umount fix

Diff from Sol√®ne Rapenne
@
text
@# $OpenBSD: Makefile,v 1.5 2016/07/14 16:57:20 ajacoutot Exp $

COMMENT=	mount SMB shares from userland via FUSE

DISTNAME=	usmb-20130204
REVISION=	3

CATEGORIES=	sysutils

HOMEPAGE=	http://ametros.net/code.html

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c fuse glib-2.0 smbclient pthread xml2

# http://repo.or.cz/w/usmb.git/snapshot/aa94e132c12faf1a00f547ea4a96b5728612dea6.tar.gz
MASTER_SITES=	https://spacehopper.org/mirrors/

MODULES=	devel/gettext
BUILD_DEPENDS=	textproc/gsed
LIB_DEPENDS=	devel/glib2 \
		net/samba \
		textproc/libxml

SEPARATE_BUILD=	Yes
USE_GMAKE=	Yes
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+= --with-samba=${LOCALBASE}
CONFIGURE_ENV =	CFLAGS="`pkg-config --cflags smbclient`" \
		LDFLAGS="`pkg-config --libs smbclient`"

NO_TEST=	Yes

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/{doc,examples}/usmb/
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/usmb/
	${INSTALL_DATA} ${WRKSRC}/usmb.conf ${PREFIX}/share/examples/usmb/

.include <bsd.port.mk>
@


1.5
log
@Drop mention of kern.usermount.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/12/03 21:24:32 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.4
log
@switch my distfiles mirror to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/08/25 11:04:38 jca Exp $
d6 1
a6 1
REVISION=	1
@


1.3
log
@Move samba4 to samba, and tweak the ports tree to use it.

ok ajacoutot@@

Upcoming commits will add additional tweaks.

Many thanks to Vadim Zhukov (who did most of the work), Ian McWilliam
(co-maintainer), Stuart Henderson who provided lots of support and
feedback, Antoine Jacoutot who patiently dealt with my broken diffs,
and more generally all the people involved.  Most of the recent work was
done during p2k15 and c2k15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/04/21 18:19:27 sthen Exp $
d18 1
a18 1
MASTER_SITES=	http://spacehopper.org/mirrors/
@


1.2
log
@add some missing pthread to WANTLIB
(using modified portbump, thanks zhuk@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/06/05 15:40:09 sthen Exp $
d6 1
a6 1
REVISION=	0
d15 1
a15 1
WANTLIB += c fuse glib-2.0 lib/samba/smbclient pthread xml2
d30 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d15 1
a15 1
WANTLIB += c fuse glib-2.0 lib/samba/smbclient xml2
@


1.1.1.1
log
@import ports/sysutils/usmb; ok and readdir fix from syl@@ (who also fixed
various fuse problems found in the course of porting/testing).


usmb lets you mount SMB shares as unprivileged users via FUSE, in the
vein of Windows' Map Network Drive facility. It differs from the other
FUSE SMB filesystems (fusesmb, SMB for FUSE) in that it doesn't have
Network Neighbourhood functionality: this means that you can mount
shares that you can't see via NetBIOS browsing.

(Note: unprivileged mounting requires both kern.usermount=1 and access
to /dev/fuse0).
@
text
@@
