head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.01.15.18.34.34;	author rpe;	state dead;
branches;
next	1.1;
commitid	BsHz7aLpUiPkyjY1;

1.1
date	2014.09.10.20.21.43;	author rpe;	state Exp;
branches;
next	;
commitid	78qqefCHzyB85y3l;


desc
@@


1.2
log
@Update sysutils/ansible to 2.0.0.1

diff from Frank Groeneveld, thanks
feedback from sthen, aja
OK sthen@@, kirby@@
@
text
@$OpenBSD: patch-lib_ansible_runner_action_plugins_copy_py,v 1.1 2014/09/10 20:21:43 rpe Exp $

https://github.com/adamchainz/ansible/commit/842a1b976d650b2c3117a6e0ed1329e5d0d62873

'copy' write new line at end of file if 'content' passed without newline

--- lib/ansible/runner/action_plugins/copy.py.orig	Wed Sep 10 21:24:52 2014
+++ lib/ansible/runner/action_plugins/copy.py	Wed Sep 10 21:25:00 2014
@@@@ -315,6 +315,8 @@@@ class ActionModule(object):
         f = os.fdopen(fd, 'w')
         try:
             f.write(content)
+            if not content.endswith('\n'):
+                f.write('\n')
         except Exception, err:
             os.remove(content_tempfile)
             raise Exception(err)
@


1.1
log
@Patch ansible copy.py to write new line at end of file
if 'content' passed without newline.

suggested and OK landry@@
@
text
@d1 1
a1 1
$OpenBSD$
@

