head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.12
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.8
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.10
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2013.10.19.08.00.00;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2013.09.26.08.22.01;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2013.05.22.19.14.05;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to d-feet-0.3.8.
@
text
@$OpenBSD: patch-src_dfeet_bus_watch_py,v 1.2 2013/09/26 08:22:01 ajacoutot Exp $
--- src/dfeet/bus_watch.py.orig	Thu Oct 17 20:50:38 2013
+++ src/dfeet/bus_watch.py	Sat Oct 19 09:55:35 2013
@@@@ -1,6 +1,7 @@@@
 # -*- coding: utf-8 -*-
 from __future__ import print_function
 
+import subprocess
 from gi.repository import GObject, Gtk, Gio
 
 from dfeet.uiloader import UILoader
@@@@ -72,9 +73,7 @@@@ class BusNameBox(Gtk.VBox):
     def __update_command_line(self):
         """get the command line of process-id is available"""
         if self.__process_id > 0:
-            procpath = '/proc/' + str(self.__process_id) + '/cmdline'
-            with open(procpath, 'r') as f:
-                self.__command_line = " ".join(f.readline().split('\0'))
+            self.__cmdline = " ".join(subprocess.Popen(['/bin/ps', '-o', 'command=', '-p', str(self.pid)], stdout=subprocess.PIPE ).communicate()[0].strip().split('\0'))
         else:
             self.__command_line = ''
 
@


1.2
log
@Update to d-feet-0.3.7.
@
text
@d1 3
a3 3
$OpenBSD: patch-src_dfeet_bus_watch_py,v 1.1 2013/05/22 19:14:05 ajacoutot Exp $
--- src/dfeet/bus_watch.py.orig	Sun Sep  1 07:59:33 2013
+++ src/dfeet/bus_watch.py	Wed Sep 25 20:39:49 2013
d12 1
a12 1
@@@@ -71,9 +72,7 @@@@ class BusNameBox(Gtk.VBox):
@


1.1
log
@Update to d-feet-0.3.4.
@
text
@d1 3
a3 3
$OpenBSD$
--- src/dfeet/bus_watch.py.orig	Wed May 15 06:29:45 2013
+++ src/dfeet/bus_watch.py	Wed May 22 20:53:46 2013
d12 5
a16 5
@@@@ -20,9 +21,7 @@@@ class DBusBusName(GObject.GObject):
 
     def __update_cmdline(self):
         if self.pid > 0:
-            procpath = '/proc/' + str(self.pid) + '/cmdline'
d18 1
a18 1
-                self.__cmdline = " ".join(f.readline().split('\0'))
d21 1
a21 1
             self.__cmdline = ''
@

