head	1.2;
access;
symbols
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.05.22.19.14.05;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2013.01.11.16.47.28;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to d-feet-0.3.4.
@
text
@$OpenBSD: patch-dfeet_bus_watch_py,v 1.1 2013/01/11 16:47:28 ajacoutot Exp $

OpenBSD does not use /proc

--- dfeet/bus_watch.py.orig	Sun Nov 11 09:59:45 2012
+++ dfeet/bus_watch.py	Fri Jan 11 17:42:45 2013
@@@@ -1,6 +1,7 @@@@
 # -*- coding: utf-8 -*-
 from __future__ import print_function
 
+import subprocess
 from gi.repository import GObject, Gtk, Gio
 
 from dfeet._ui.uiloader import UILoader
@@@@ -20,9 +21,7 @@@@ class DBusBusName(GObject.GObject):
 
     def __update_cmdline(self):
         if self.pid > 0:
-            procpath = '/proc/' + str(self.pid) + '/cmdline'
-            with open(procpath, 'r') as f:
-                self.__cmdline = " ".join(f.readline().split('\0'))
+            self.__cmdline = " ".join(subprocess.Popen(['/bin/ps', '-o', 'command=', '-p', str(self.pid)], stdout=subprocess.PIPE ).communicate()[0].strip().split('\0'))
         else:
             self.__cmdline = ''
 
@


1.1
log
@Update to a newer unstable release: d-feet-0.3.2.
(upstream never released a stable version so far)
@
text
@d1 1
a1 1
$OpenBSD$
@

