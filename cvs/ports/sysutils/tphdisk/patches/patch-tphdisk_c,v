head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.28
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.26
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.22
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.24
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.20
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.18
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.16
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.14
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.12
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.10
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.8
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.1.1.0.22
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.20
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.18
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.16
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.14
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.12
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.10
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	jcs20050308:1.1.1.1
	jcs:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2010.07.30.14.36.31;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.09.02.56.14;	author jcs;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.09.02.56.14;	author jcs;	state Exp;
branches;
next	;


desc
@@


1.2
log
@include function prototypes
@
text
@$OpenBSD: patch-tphdisk_c,v 1.1.1.1 2005/03/09 02:56:14 jcs Exp $
--- tphdisk.c.orig	Thu Jul 29 23:14:11 2010
+++ tphdisk.c	Thu Jul 29 23:14:49 2010
@@@@ -20,6 +20,7 @@@@
 
 #include <stdio.h>
 #include <stdlib.h>
+#include <string.h>
 #include <unistd.h>
 
 typedef unsigned short u16;
@@@@ -86,21 +87,17 @@@@ written by Andrew Tridgell <tridge@@samba.org>\n\
 This program writes a 'save2dsk.bin' hibernation file to stdout. To\n\
 use it you should do something like this:\n\
 \n\
-1) create a type c (FAT32) partition on your laptop\n\
-2) format the partition with 'mkdosfs'\n\
-3) mount the partition as VFAT\n\
+1) define the first partition on the disk as type 16 in fdisk(8) at least\n\
+   as big as your amount of system memory\n\
+2) format the partition with 'newfs_msdos -F 16 /dev/rwd0i'\n\
+3) mount the partition with mount_msdos(8)\n\
 4) create the 'save2dsk.bin' file on the partition using something like\n\
       tphdisk 280 > save2dsk.bin\n\
-5) Do a full reboot\n\
+5) do a full reboot\n\
 \n\
 The only parameter is the size in megabytes of the save file. This\n\
 needs to be at least as big as your main memory + video memory +2MB, but you\n\
 can make it larger if you want to.\n\
-\n\
-You should also be able to use this to create a hibernation partition\n\
-by directing the output to the right device (eg. /dev/hdaX) and\n\
-setting the partition type to A0.  I haven't tried this as my thinkpad\n\
-doesn't seem to support hibernation partitions.\n\
 ");
 		exit(1);
 	}
@


1.1
log
@Initial revision
@
text
@d1 12
a12 4
$OpenBSD$
--- tphdisk.c.orig	Tue Mar  8 20:39:48 2005
+++ tphdisk.c	Tue Mar  8 20:43:27 2005
@@@@ -86,21 +86,17 @@@@
@


1.1.1.1
log
@tphdisk, a simple utility to create a hibernation file for phoenix
bios laptops like the ibm thinkpad x40
@
text
@@
