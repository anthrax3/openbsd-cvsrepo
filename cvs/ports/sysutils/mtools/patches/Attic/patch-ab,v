head	1.5;
access;
symbols
	OPENBSD_2_5:1.1.1.1.0.2
	OPENBSD_2_5_BASE:1.1.1.1
	fgsch_19990228:1.1.1.1
	mtools:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2000.07.03.14.56.47;	author fgsch;	state dead;
branches;
next	1.4;

1.4
date	2000.06.30.05.42.55;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	99.07.14.20.04.08;	author fgsch;	state dead;
branches;
next	1.2;

1.2
date	99.07.11.17.56.01;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	99.02.28.11.18.13;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.02.28.11.18.13;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to dist. patch 20000723. remove unneeded patch: it's now in the tree.
@
text
@--- mdir.c.orig	Sun May 28 07:20:44 2000
+++ mdir.c	Fri Jun 30 00:07:27 2000
@@@@ -209,7 +209,7 @@@@
 	if(!filesInDir)
 		printf("No files\n");
 	else {		
-		char *s1;
+		char *s1 = NULL;
 		printf("      %3d file", files);
 		if(files == 1)
 			putchar(' ');
@@@@ -230,13 +230,13 @@@@
 		return;
 	leaveDirectory(haveError);
 	if(!concise && !haveError) {
-		char *s1;
 
 		if(dirsOnDrive > 1) {
 			printf("\nTotal files listed:\n");
 			printSummary(filesOnDrive, bytesOnDrive);
 		}
 		if(RootDir && !fast) {
+			char *s1 = NULL;
 			mt_off_t bytes = getfree(RootDir);
 			printf("                  %s bytes free\n\n",
 			       dotted_num(bytes,17, &s1));
@@@@ -246,9 +246,9 @@@@
 			printf("                  %s bytes free\n\n",
 			       dotted_num(bytes,17, &s1));
 #endif
-		}
 		if(s1)
 			free(s1);
+		}
 	}
 	FREE(&RootDir);
 	currentDrive = '\0';
@


1.4
log
@update to release 3.9.7 dist. patch 20000623. bump NEED_VERSION.
clean a bit.
@
text
@@


1.3
log
@Update to distrib. patch 19990712.  Remove unnecessary patch, it's now
in the tree.  Change the maintainer to myself.
@
text
@d1 37
a37 11
--- devices.c.orig	Fri Jul  9 00:08:56 1999
+++ devices.c	Fri Jul  9 00:09:18 1999
@@@@ -798,7 +798,7 @@@@
 #endif /* __FreeBSD__ */
  
 /*** /jes -- for ALR 486 DX4/100 ***/
-#ifdef OS_netbsd
+#if defined(OS_netbsd) || defined(OS_openbsd)
 #define predefined_devices
 struct device devices[] = {
 	{"/dev/rfd0a", 'A', FHD312},
@


1.2
log
@upgrade to mtools 3.9.6
@
text
@@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- devices.c.ori	Sun Feb 28 05:14:06 1999
+++ devices.c	Sun Feb 28 05:10:55 1999
@@@@ -781,7 +781,7 @@@@
@


1.1.1.1
log
@mtools-3.9.1, distribution patch 1502.
@
text
@@
