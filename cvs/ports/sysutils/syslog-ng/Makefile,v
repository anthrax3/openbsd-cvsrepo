head	1.55;
access;
symbols
	OPENBSD_6_1:1.55.0.4
	OPENBSD_6_1_BASE:1.55
	OPENBSD_6_0:1.55.0.2
	OPENBSD_6_0_BASE:1.55
	OPENBSD_5_9:1.53.0.2
	OPENBSD_5_9_BASE:1.53
	OPENBSD_5_8:1.53.0.4
	OPENBSD_5_8_BASE:1.53
	OPENBSD_5_7:1.50.0.2
	OPENBSD_5_7_BASE:1.50
	OPENBSD_5_6:1.47.0.2
	OPENBSD_5_6_BASE:1.47
	OPENBSD_5_5:1.42.0.2
	OPENBSD_5_5_BASE:1.42
	OPENBSD_5_4:1.37.0.2
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.33.0.2
	OPENBSD_5_3_BASE:1.33
	OPENBSD_5_2:1.28.0.2
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.15.0.2
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.12.0.4
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.7.0.12
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.10
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.8
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.6
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.7.0.4
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.5.0.2
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.2.0.6
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	jakob_20021005:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.55
date	2016.05.01.11.19.09;	author steven;	state Exp;
branches;
next	1.54;
commitid	T1ZRP1wizD6YqiRv;

1.54
date	2016.03.18.21.38.25;	author naddy;	state Exp;
branches;
next	1.53;
commitid	BVkebQSTXSZokeRG;

1.53
date	2015.07.21.20.29.34;	author steven;	state Exp;
branches;
next	1.52;
commitid	E8nvUOPaMKJsKRC3;

1.52
date	2015.07.18.21.39.05;	author ajacoutot;	state Exp;
branches;
next	1.51;
commitid	NQVGuzDhTvlOwxK2;

1.51
date	2015.07.17.21.46.19;	author ajacoutot;	state Exp;
branches;
next	1.50;
commitid	PmjDmz5mwTG8LCJH;

1.50
date	2014.12.31.11.33.56;	author steven;	state Exp;
branches;
next	1.49;
commitid	q6IQA6bx6XIWirwj;

1.49
date	2014.11.21.08.10.48;	author jasper;	state Exp;
branches;
next	1.48;
commitid	vuQxvmFfesyd5IvA;

1.48
date	2014.10.29.09.14.50;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	GrLzK7WymUngCEoO;

1.47
date	2014.05.23.12.53.01;	author sthen;	state Exp;
branches
	1.47.2.1;
next	1.46;

1.46
date	2014.04.24.15.58.54;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2014.04.07.21.16.45;	author steven;	state Exp;
branches;
next	1.44;

1.44
date	2014.03.31.17.06.54;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2014.03.24.22.41.00;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2014.01.12.20.41.11;	author steven;	state Exp;
branches;
next	1.41;

1.41
date	2013.12.04.07.13.31;	author steven;	state Exp;
branches;
next	1.40;

1.40
date	2013.12.01.12.09.48;	author steven;	state Exp;
branches;
next	1.39;

1.39
date	2013.11.30.10.02.12;	author steven;	state Exp;
branches;
next	1.38;

1.38
date	2013.11.27.07.52.54;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2013.06.19.20.26.05;	author steven;	state Exp;
branches;
next	1.36;

1.36
date	2013.06.02.20.01.22;	author steven;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.21.08.48.54;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2013.03.11.11.41.33;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2013.01.18.19.09.08;	author steven;	state Exp;
branches;
next	1.32;

1.32
date	2012.12.29.21.04.54;	author landry;	state Exp;
branches;
next	1.31;

1.31
date	2012.11.28.07.04.35;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2012.09.19.12.25.40;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2012.09.01.14.36.58;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.06.08.21.06.46;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2012.05.29.05.19.19;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2012.05.28.16.31.31;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2012.05.23.06.44.50;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2012.04.01.20.38.19;	author steven;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.16.11.41.40;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2011.09.14.02.34.06;	author william;	state Exp;
branches;
next	1.21;

1.21
date	2011.05.01.13.48.32;	author steven;	state Exp;
branches;
next	1.20;

1.20
date	2010.12.12.15.10.38;	author steven;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.20.17.22.42;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.11.19.00.49;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.19.07.43.02;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.09.24.17.54.16;	author steven;	state Exp;
branches;
next	1.15;

1.15
date	2010.07.22.21.03.03;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2010.05.03.20.51.17;	author steven;	state Exp;
branches;
next	1.13;

1.13
date	2010.03.20.16.47.44;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.03.26.18.52.50;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2008.11.26.20.09.35;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2008.11.16.20.33.10;	author steven;	state Exp;
branches;
next	1.9;

1.9
date	2008.11.09.23.27.03;	author steven;	state Exp;
branches;
next	1.8;

1.8
date	2008.10.06.16.09.13;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2005.11.27.10.54.10;	author sturm;	state Exp;
branches;
next	1.6;

1.6
date	2005.09.19.13.35.17;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.22.22.02.59;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.12.20.10.35.36;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2004.06.19.22.16.22;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2002.10.06.13.15.55;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.05.14.18.16;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.10.05.14.18.16;	author jakob;	state Exp;
branches;
next	;

1.47.2.1
date	2014.10.29.10.07.15;	author ajacoutot;	state Exp;
branches;
next	1.47.2.2;
commitid	H7cvvsYslJbtMjMl;

1.47.2.2
date	2014.11.21.08.11.24;	author jasper;	state Exp;
branches;
next	;
commitid	BsbZezUZipiw0vvT;


desc
@@


1.55
log
@update to 3.7.2
@
text
@# $OpenBSD: Makefile,v 1.53 2015/07/21 20:29:34 steven Exp $

COMMENT=	syslogd replacement

V =		3.7.2
REL =		3.7
DISTNAME =	syslog-ng-$V
CATEGORIES =	sysutils

MAINTAINER =	Steven Mestdagh <steven@@openbsd.org>

HOMEPAGE =	http://www.balabit.com/network-security/syslog-ng/

# GPL v2
PERMIT_PACKAGE_CDROM =		Yes

MASTER_SITES =	http://github.com/balabit/syslog-ng/releases/download/${DISTNAME}/

SHARED_LIBS =	syslog-ng		3.0 \
		syslog-ng-${REL}	3.0

MODULES =	devel/gettext

WANTLIB =	c m pcre crypto ssl evtlog dbi ivykis pthread \
		glib-2.0 gmodule-2.0 gthread-2.0 json-c

LIB_DEPENDS =	devel/glib2 \
		devel/json-c \
		devel/libivykis \
		sysutils/eventlog \
		databases/libdbi

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS +=	--disable-tcp-wrapper \
			--with-pidfile-dir=/var/run \
			--enable-json \
			--with-libmongo-client=no \
			--with-librabbitmq-client=no \
			--disable-python \
			--disable-mongodb \
			--disable-amqp \
			--disable-stomp \
			--disable-geoip \
			--without-libnet \
			--with-ivykis=system \
			--enable-sql \
			--enable-manpages
CONFIGURE_ENV +=	OPENSSL_CFLAGS="-I/usr/include/openssl" \
			OPENSSL_LIBS="-lssl -lcrypto" \
			LIBDBI_CFLAGS="-I/usr/include/openssl" \
			LIBDBI_LIBS="-ldbi"
# json-c only installs libjson-c.pc; syslog-ng checks for libjson.pc
CONFIGURE_ENV +=	JSON_C_CFLAGS="`pkg-config json-c --cflags`" \
			JSON_C_LIBS="`pkg-config json-c --libs`"
USE_GMAKE =	Yes
USE_GROFF =	Yes

SYSCONFDIR =	${BASESYSCONFDIR}/syslog-ng
CFLAGS +=	-I${LOCALBASE}/include

SUBST_VARS +=	V

DOC =		${PREFIX}/share/doc/syslog-ng/
EXAMPLES =	${PREFIX}/share/examples/syslog-ng/

pre-install:
	cd ${WRKSRC}/doc/man && perl -pi -e 's@@/opt/syslog\\-ng/etc/syslog\\-ng/@@${SYSCONFDIR:S/-/\\-/g}/@@g' *.[158]

post-install:
	mv ${WRKINST}/etc/syslog-ng ${EXAMPLES}
	${INSTALL_DATA} ${FILESDIR}/syslog-ng.conf \
		${EXAMPLES}/syslog-ng.conf.openbsd
	rm -rf ${PREFIX}/share/{include,tools,xsd}
	rm -f ${PREFIX}/lib/syslog-ng/*.{a,la}

.include <bsd.port.mk>
@


1.54
log
@remove SHARED_ONLY from simple ports that use the gettext or libiconv module
@
text
@d5 2
a6 2
V =		3.6.4
REL =		3.6
d17 1
a17 2
MASTER_SITES =	http://www.balabit.com/downloads/files/syslog-ng/open-source-edition/$V/source/
DISTFILES =	syslog-ng_$V.tar.gz
d19 2
a20 2
SHARED_LIBS =	syslog-ng		2.0 \
		syslog-ng-${REL}	2.0
d39 1
@


1.53
log
@update to 3.6.4

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/07/18 21:39:05 ajacoutot Exp $
a3 2

SHARED_ONLY =	Yes
@


1.52
log
@Missed in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/07/17 21:46:19 ajacoutot Exp $
d7 2
a8 1
V =		3.5.6
a10 1
REVISION =	1
d22 2
a23 2
SHARED_LIBS =	syslog-ng		1.0 \
		syslog-ng-${V}		1.0
d48 2
a49 1
			--enable-sql
@


1.51
log
@Sync with syslog.conf(5).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2014/12/31 11:33:56 steven Exp $
d10 1
a10 1
REVISION =	0
@


1.50
log
@update to 3.5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/10/29 09:14:50 ajacoutot Exp $
d10 1
@


1.49
log
@merge patch from upstream to fix an issue on i386 present since 64-bit time_t,
where the log year would be a random value.

as reported by ajacoutot@@
ok ajacoutot@@, steven@@ (MAINTAINER)
@
text
@d7 1
a7 1
V =		3.4.7
a8 1
REVISION =	5
d21 2
a22 2
SHARED_LIBS =	syslog-ng		0.0 \
		syslog-ng-${V}		0.0
d43 1
@


1.48
log
@Fix install path of syslog-ng.conf.

prodded by and ok steven@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/05/23 12:53:01 sthen Exp $
d9 1
a9 1
REVISION =	4
@


1.47
log
@don't rely on openssl for string leadership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/04/24 15:58:54 sthen Exp $
d9 1
a9 1
REVISION =	3
@


1.47.2.1
log
@MFC:
Unbreak runtime by putting syslog-ng.conf where it belongs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/05/23 12:53:01 sthen Exp $
d9 1
a9 1
REVISION =	4
@


1.47.2.2
log
@merge patch from upstream to fix an issue on i386 present since 64-bit time_t,
where the log year would be a random value.

as reported by ajacoutot@@
ok ajacoutot@@, steven@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47.2.1 2014/10/29 10:07:15 ajacoutot Exp $
d9 1
a9 1
REVISION =	5
@


1.46
log
@handle json-c update, tidy some whitespace in Makefile while there
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/04/07 21:16:45 steven Exp $
d9 1
a9 1
REVISION =	2
@


1.45
log
@disable geoip for now, it was picked up by configure
spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/03/24 22:41:00 naddy Exp $
d26 1
a26 1
 
d29 5
a33 5
 
LIB_DEPENDS = 	devel/glib2 \
 		devel/json-c \
 		devel/libivykis \
 		sysutils/eventlog \
d52 3
d62 1
a62 1
 
d65 1
a65 1
 
d68 1
a68 1
 
@


1.44
log
@Remove XXX now that our libtool(1) properly adds -rpath when needed.
Handle --sysconfdir by setting SYSCONFDIR.

ok steven@@ (maintainer)
@
text
@d9 1
a9 1
REVISION =	1
d44 1
@


1.43
log
@remove support for TCP wrappers; ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/01/12 20:41:11 steven Exp $
d9 1
a9 1
REVISION =	0
d54 1
a70 2
# XXX hack for libtool dropping -rpath
	ln -s syslog-ng/libsyslog-ng-crypto.so ${PREFIX}/lib/libsyslog-ng-crypto.so
a72 1
CONFIGURE_ARGS+=	--sysconfdir=${SYSCONFDIR}/syslog-ng
@


1.42
log
@update to 3.4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/12/01 12:09:48 steven Exp $
d9 1
d27 1
a27 1
WANTLIB =	c m pcre wrap crypto ssl evtlog dbi ivykis pthread \
d37 1
a37 1
CONFIGURE_ARGS +=	--enable-tcp-wrapper \
@


1.41
log
@unbreak by not picking up libuuid from e2fsprogs - reported by naddy@@
writing uuid still works without libuuid.
@
text
@d7 1
a7 2
V =		3.4.6
REVISION =	1
@


1.40
log
@disable rabbitmq for now.
this has a hidden dep on python and failed with python3 - spotted by nigel@@
merge some post-install tweaks - from aja@@
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/11/30 10:02:12 steven Exp $
d8 1
a8 1
REVISION =	0
@


1.39
log
@update to syslog-ng 3.4.6

rand() patches from dhill@@
portswise ok on a previous version landry@@
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/06/19 20:26:05 steven Exp $
d8 1
d41 1
d65 1
a65 1
	${INSTALL_DATA_DIR} ${EXAMPLES}
d67 1
a67 1
		${EXAMPLES}/syslog-ng.conf.sample
d69 1
@


1.38
log
@Drop the INRC special case -- switching syslogd for syslog-ng should be
left as an exercice for whoever needs/wants to do it.

ok sthen@@ steven@@
@
text
@d7 1
a7 1
V =		3.3.11
a9 1
REVISION =	0
d26 2
a27 3
WANTLIB =	c m pcre wrap crypto ssl z evtlog dbi ffi ivykis pthread \
		gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 \
		json-glib-1.0
d30 1
a30 1
 		devel/json-glib \
d38 1
a38 1
			--with-json=json-glib \
d41 2
@


1.37
log
@update to 3.3.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/06/02 20:01:22 steven Exp $
d10 1
@


1.36
log
@maintenance update to 3.3.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/03/11 11:41:33 espie Exp $
d7 1
a7 1
V =		3.3.9
@


1.35
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d7 1
a7 1
V =		3.3.8
@


1.34
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/01/18 19:09:08 steven Exp $
a48 1
USE_LIBTOOL =	Yes
@


1.33
log
@maintenance update to 3.3.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/11/28 07:04:35 steven Exp $
a16 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
@


1.32
log
@Use --with-json=json-glib to ensure json-glib is picked. Otherwise json-c
can be detected at configure time, and removed later on by dpb, failing
the build.
@
text
@d7 1
a7 1
V =		3.3.7
@


1.31
log
@update to 3.3.7

feedback and ok sthen@@, "if it works for you" aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/09/19 12:25:40 ajacoutot Exp $
d42 1
@


1.30
log
@Unfuck ld.so.hints when run late in the boot process.

prodded by and ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/09/01 14:36:58 ajacoutot Exp $
d5 3
a7 1
V =		3.1.4
a8 1
REVISION =	9
d24 3
d29 3
a31 1
WANTLIB =	c pcre wrap crypto ssl z glib-2.0 evtlog dbi gthread-2.0 pthread
d34 2
d42 3
d50 2
d55 2
a60 7
#post-extract:
#	tar -C ${WRKBUILD} -xzf ${WRKSRC}/doc/reference/syslog-ng.html.tar.gz

post-configure:
	cd ${WRKSRC}/src && mv Makefile Makefile.was && \
		sed '/^syslog_ng_ctl_LDADD = /s/-lwrap //' Makefile.was > Makefile

a64 2
#	${INSTALL_DATA_DIR} ${DOC}
#	${INSTALL_DATA} ${WRKBUILD}/syslog-ng.html/index.html ${DOC}
d68 3
@


1.29
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/06/08 21:06:46 steven Exp $
d7 1
a7 1
REVISION =	8
@


1.28
log
@s/PREFIX/TRUEPREFIX/ for consistency.

from robert at peichaer.org

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/05/28 16:31:31 ajacoutot Exp $
d7 1
a7 1
REVISION =	6
@


1.27
log
@Set owner, group and mode for logfiles to the same value regular
syslogd(8) uses.

ok sthen@@ steven@@ (maintainer)
@
text
@d7 1
a7 1
REVISION =	5
@


1.26
log
@Set the PID to /var/run/syslog.pid by default to make syslog-ng happy
with newsyslog(8); this can of course by modified using syslog_ng_flags.
While here, run syslog-ng.conf(5) through tbl(1) (from sthen@@).

discussed with and ok sthen@@ steven@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/05/23 06:44:50 ajacoutot Exp $
d7 1
a7 1
REVISION =	4
@


1.25
log
@If syslog-ng is started early during boot-up (that is if one replaces
the syslogd rc.d(8) script with the syslog_ng one), it will fail to
launch because ldconfig(8) hasn't had a chance to run yet. Add an
rc_pre() that will take care of that.

ok sthen@@ steven@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/04/01 20:38:19 steven Exp $
d7 1
a7 1
REVISION =	3
@


1.24
log
@enable sql support.
to use this, you also need to install the specific libdbi-drivers package
for the database you plan to use.

requested and tested by Richard Brooks, RichardBUK at FastMail.fm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/09/14 02:34:06 william Exp $
d7 1
a7 1
REVISION =	2
@


1.23
log
@normalize pkgpath
@
text
@d7 1
a7 1
REVISION =	1
d25 1
a25 1
WANTLIB =	c pcre wrap crypto ssl z glib-2.0 evtlog
d28 2
a29 1
 		sysutils/eventlog
d34 1
a34 1
			--disable-sql
d36 3
a38 1
			OPENSSL_LIBS="-lssl -lcrypto"
@


1.22
log
@add rcscript

ok ajacoutot steven (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/05/01 13:48:32 steven Exp $
d7 1
a7 1
REVISION =	0
@


1.21
log
@update to 3.1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/12/12 15:10:38 steven Exp $
d7 1
@


1.20
log
@update to 3.1.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/11/11 19:00:49 espie Exp $
d5 1
a5 1
V =		3.1.3
@


1.19
log
@new depends
@
text
@d5 1
a5 1
V =		3.1.2
@


1.18
log
@last WANTLIB conversion, hopefully
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/19 07:43:02 espie Exp $
d26 2
a27 2
LIB_DEPENDS = 	::devel/glib2 \
 		::sysutils/eventlog
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/09/24 17:54:16 steven Exp $
d24 1
a24 1
WANTLIB =	c pcre wrap crypto ssl z
d26 2
a27 2
LIB_DEPENDS = 	glib-2.0::devel/glib2 \
 		evtlog::sysutils/eventlog
@


1.16
log
@update to 3.1.2

somehow it got stuck in my tree for a while
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/07/22 21:03:03 steven Exp $
d35 1
@


1.15
log
@- by default, find the config file in the location we installed it.
- install a better sample config file, which mimics OpenBSD's syslogd
  and no longer spits all kinds of warnings just because we are using
  syslog-ng >= 3

this allows to start syslog-ng without extra arguments and have something
basically working.

requested by jcs@@

let me know if you find issues with the new config file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/05/03 20:51:17 steven Exp $
d5 1
a5 1
V =		3.1.1
a6 1
REVISION =	0
d52 1
a52 1
	${INSTALL_DATA_DIR} ${DOC}
@


1.14
log
@major update to 3.1.1

based on a diff from william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/03/20 16:47:44 ajacoutot Exp $
d7 1
d29 1
a29 1
 
d56 2
a57 1
	${INSTALL_DATA} ${WRKSRC}/doc/examples/syslog-ng.conf.sample ${EXAMPLES}
d60 1
@


1.13
log
@Use the gettext module.

ok steven@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/03/26 18:52:50 steven Exp $
d5 3
a7 4
V=		2.1.4
DISTNAME=	syslog-ng-$V
PKGNAME=	${DISTNAME}p0
CATEGORIES=	sysutils
d9 1
a9 1
MAINTAINER=	Steven Mestdagh <steven@@openbsd.org>
d20 1
a20 1
DISTFILES=	syslog-ng_$V.tar.gz
d23 3
a25 3

WANTLIB =	c wrap

d27 2
a28 2
		evtlog::sysutils/eventlog

d30 5
a34 1
CONFIGURE_ARGS +=	--enable-tcp-wrapper
d36 2
d40 11
a50 4

post-extract:
	tar -C ${WRKBUILD} -xzf ${WRKSRC}/doc/reference/syslog-ng.html.tar.gz

d53 1
a53 1
	${INSTALL_DATA} ${WRKBUILD}/syslog-ng.html/index.html ${DOC}
@


1.12
log
@maintenance update to 2.1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/11/16 20:33:10 steven Exp $
d7 1
d23 3
a25 1
WANTLIB =	c iconv intl wrap
@


1.11
log
@update to 2.1.3

contains security fix for CVE-2008-5110
@
text
@d5 2
a6 1
DISTNAME=	syslog-ng-2.1.3
d19 2
a20 1
MASTER_SITES =	http://www.balabit.com/downloads/files/syslog-ng/sources/2.1/src/
@


1.10
log
@update to 2.1.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/11/09 23:27:03 steven Exp $
d5 1
a5 1
DISTNAME=	syslog-ng-2.1.2
@


1.9
log
@update to 2.1.1 and take maintainership

with a few patches from author Balazs Scheidler, thanks

some testing by Brian A. Seklecki
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/10/06 16:09:13 steven Exp $
d5 1
a5 1
DISTNAME=	syslog-ng-2.1.1
a32 4

# temporary hack: avoid regenerating some files
pre-configure:
	touch -m 0808080000 ${WRKSRC}/src/cfg-grammar.y
@


1.8
log
@fix master sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/09/19 13:35:17 jakob Exp $
d5 1
d8 1
a8 2
DISTNAME=	syslog-ng-1.6.8
LIBOL=		libol-0.3.16
d10 1
a10 1
MAINTAINER=	Jakob Schlyter <jakob@@openbsd.org>
d12 5
a16 2
MASTER_SITE_SYSLOGNG=\
	http://www.balabit.com/downloads/files/syslog-ng/sources/
d18 1
a18 2
MASTER_SITES=	${MASTER_SITE_SYSLOGNG:=1.6/src/}
MASTER_SITES0=	${MASTER_SITE_SYSLOGNG:=libol/0.3/}
d20 1
a20 1
HOMEPAGE=	http://www.balabit.com/products/syslog_ng/
d22 2
a23 2
DISTFILES=	${DISTNAME}.tar.gz \
		${LIBOL}.tar.gz:0
d25 2
a26 6
# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c
d28 2
a29 3
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--with-libol=${WRKDIR}/${LIBOL} \
			--enable-tcp-wrapper
d31 2
a32 2
DOC=		${PREFIX}/share/doc/syslog-ng
EXAMPLES=	${PREFIX}/share/examples/syslog-ng
d34 1
d36 1
a36 3
	cp -f ${PORTSDIR}/infrastructure/db/config.guess \
	      ${PORTSDIR}/infrastructure/db/config.sub ${WRKDIR}/${LIBOL}
	cd ${WRKDIR}/${LIBOL}; ./configure ; ${MAKE}
d40 1
a40 4
	${INSTALL_DATA} ${WRKSRC}/doc/sgml/*.{ps,sgml,txt} ${DOC}
	(cd ${DOC} ;\
	tar xzf ${WRKSRC}/doc/sgml/syslog-ng.html.tar.gz ;\
	ln -s book1.html syslog-ng.html/index.html )
d42 1
a42 1
	${INSTALL_DATA} ${WRKSRC}/doc/syslog-ng.conf.sample ${EXAMPLES}
@


1.7
log
@fix CATEGORIES

from Moritz Grimm <mlist at scapa.dnsalias.net>
@
text
@d13 1
a13 1
	http://www.balabit.com/downloads/
d15 1
a15 1
MASTER_SITES=	${MASTER_SITE_SYSLOGNG:=syslog-ng/1.6/src/}
@


1.6
log
@syslog-ng 1.6.8 and libol 0.3.16; submitted by steve shockley
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/03/22 22:02:59 jakob Exp $
d5 1
a5 1
CATEGORIES=	sysutil
@


1.5
log
@syslog-ng v1.6.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/12/20 10:35:36 alek Exp $
d5 1
a5 1
CATEGORIES=	sysutils
d7 2
a8 2
DISTNAME=	syslog-ng-1.6.5
LIBOL=		libol-0.3.15
d28 1
a28 1
WANTLIB=		c wrap 
@


1.4
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/06/19 22:16:22 jakob Exp $
d7 2
a8 2
DISTNAME=	syslog-ng-1.6.4
LIBOL=		libol-0.3.13
d13 1
a13 1
	http://www.balabit.hu/downloads/
d18 1
a18 1
HOMEPAGE=	http://www.balabit.hu/en/downloads/syslog-ng/
@


1.3
log
@update to v1.6.4
drop development version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/10/06 13:15:55 jakob Exp $
d28 1
@


1.2
log
@split into stable and development
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/06/22 09:00:58 jakob Exp $
d3 1
a3 2
SUBDIR+= stable
SUBDIR+= development
d5 46
a50 1
.include <bsd.port.subdir.mk>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2002/10/04 09:08:50 jakob Exp $
d3 2
a4 1
COMMENT=	syslogd replacement
d6 1
a6 39
DISTNAME=	syslog-ng-1.4.16
LIBOL=		libol-0.2.23
CATEGORIES=	sysutils

MASTER_SITES=	http://www.balabit.hu/downloads/syslog-ng/1.4/
MASTER_SITES0=	http://www.balabit.hu/downloads/libol/0.2/

HOMEPAGE=	http://www.balabit.hu/en/downloads/syslog-ng/

MAINTAINER=     Jakob Schlyter <jakob@@openbsd.org>

DISTFILES=	${DISTNAME}.tar.gz \
		${LIBOL}.tar.gz:0

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--with-libol=${WRKDIR}/${LIBOL}

DOC=		${PREFIX}/share/doc/syslog-ng
EXAMPLES=	${PREFIX}/share/examples/syslog-ng

pre-configure:
	cd ${WRKDIR}/${LIBOL}; ./configure ; ${MAKE}

post-install:
	${INSTALL_DATA_DIR} ${DOC}
	${INSTALL_DATA} ${WRKSRC}/doc/sgml/*.{ps,sgml,txt} ${DOC}
	(cd ${DOC} ;\
	tar xzf ${WRKSRC}/doc/sgml/syslog-ng.html.tar.gz ;\
	ln -s book1.html syslog-ng.html/index.html )
	${INSTALL_DATA_DIR} ${EXAMPLES}
	${INSTALL_DATA} ${WRKSRC}/doc/syslog-ng.conf.sample ${EXAMPLES}

.include <bsd.port.mk>
@


1.1.1.1
log
@syslog-ng, a syslogd replacement
@
text
@@
