head	1.13;
access;
symbols
	OPENBSD_6_2:1.13.0.14
	OPENBSD_6_2_BASE:1.13
	OPENBSD_6_1:1.13.0.12
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.13.0.10
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.6
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.8
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.4
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.13.0.2
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.12.0.4
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.11.0.2
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.10.0.2
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.6
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.4
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2;
locks; strict;
comment	@# @;


1.13
date	2014.04.19.09.44.11;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.04.12.10.39.04;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2012.09.14.08.14.31;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2012.04.03.10.05.47;	author sthen;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2012.03.06.20.11.33;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2011.11.17.23.45.56;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.20.14.38.39;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2009.12.22.12.51.52;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.02.02.34.05;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.12.21.17.07;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.19.03.44.42;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.16.21.22.41;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2008.02.07.02.53.35;	author merdely;	state Exp;
branches;
next	;

1.10.2.1
date	2012.09.15.10.42.30;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Major update to Bacula 7.0.2.
Some info at:
http://blog.bacula.org/p710/
http://blog.bacula.org/release-7-0-2/

Now builds with our libtool(1).

While there's a huge amount of changes, existing setups "should" just
work without any modification.

tested by sthen@@ and myself
ok sthen@@, my new co-maintainer :-)
@
text
@@@comment $OpenBSD: PLIST-bat,v 1.12 2013/04/12 10:39:04 ajacoutot Exp $
@@man man/man1/bat.1
@@bin sbin/bat
share/applications/bat.desktop
share/doc/bacula/clients.html
share/doc/bacula/console.html
share/doc/bacula/filesets.html
share/doc/bacula/index.html
share/doc/bacula/joblist.html
share/doc/bacula/jobplot.html
share/doc/bacula/jobs.html
share/doc/bacula/mail-message-new.png
share/doc/bacula/media.html
share/doc/bacula/restore.html
share/doc/bacula/status.png
share/doc/bacula/storage.html
@@mode 644
share/examples/bacula/bat.conf
@@mode 640
@@group _bacula
@@sample ${SYSCONFDIR}/bat.conf
@@mode
@@group
share/pixmaps/
share/pixmaps/bat_icon.png
@@exec %D/bin/update-desktop-database
@@unexec-delete %D/bin/update-desktop-database
@


1.12
log
@Update to bacula-5.2.13.

ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.11 2012/09/14 08:14:31 ajacoutot Exp $
a3 5
@@mode 750
@@group _bacula
@@sample ${BACULACONF}/
@@mode
@@group
d21 1
a21 1
@@sample ${BACULACONF}/bat.conf
@


1.11
log
@Update to bacula-5.2.11.

ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.10 2012/04/03 10:05:47 sthen Exp $
a21 1
share/examples/bacula/
@


1.10
log
@Adjust new user creation in Bacula which had some duplication between
packages which depend on each other:

- only create the _bacula user in -main (client parts)
- only create the _bacula-sd user in -server

Change _bacula's home dir from /var/bacula to /nonexistent.
/var/bacula needs to be writable by the _bacula group and since
/usr/libexec/security actually checks that user home dirs are
group-writable, whereas /etc/security just checked if the user
home dir was a writable *file*(!), it whines every day for
every machine with bacula client installed. (This will only
affect new installations so if you're annoyed by these mails
too, just vipw and change it by hand).

ok ajacoutot@@ merdely@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.9 2012/03/06 20:11:33 sthen Exp $
d10 12
a21 13
share/doc/bacula/html/
share/doc/bacula/html/clients.html
share/doc/bacula/html/console.html
share/doc/bacula/html/filesets.html
share/doc/bacula/html/index.html
share/doc/bacula/html/joblist.html
share/doc/bacula/html/jobplot.html
share/doc/bacula/html/jobs.html
share/doc/bacula/html/mail-message-new.png
share/doc/bacula/html/media.html
share/doc/bacula/html/restore.html
share/doc/bacula/html/status.png
share/doc/bacula/html/storage.html
@


1.10.2.1
log
@MFC bacula update (security fix CVE-2012-4430); ok ajacoutot@@

This is a problem with console ACLs which was allowing access to certain
functionality and e.g. dump resources which should have been restricted.
Problem only affects people who have configured console ACLs.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.11 2012/09/14 08:14:31 ajacoutot Exp $
d10 13
a22 12
share/doc/bacula/clients.html
share/doc/bacula/console.html
share/doc/bacula/filesets.html
share/doc/bacula/index.html
share/doc/bacula/joblist.html
share/doc/bacula/jobplot.html
share/doc/bacula/jobs.html
share/doc/bacula/mail-message-new.png
share/doc/bacula/media.html
share/doc/bacula/restore.html
share/doc/bacula/status.png
share/doc/bacula/storage.html
@


1.9
log
@update to Bacula 5.2.6, ok ajacoutot@@ merdely@@
- don't use ports libtool, it passes invalid flags to the linker
- since libbaccats-${BACKEND} must have the same .so version as
libbaccats, use a variable to make sure they are kept in-sync
- mark as being SHARED_ONLY and sync/merge plists
@
text
@d1 1
a1 4
@@comment $OpenBSD: PLIST-bat,v 1.8 2011/11/17 23:45:56 ajacoutot Exp $
@@newgroup _bacula:591
@@newuser _bacula:591:_bacula:daemon:Bacula Director:/var/bacula:/sbin/nologin
@@newuser _bacula-sd:599:_bacula:daemon:Bacula Storage Daemon:/nonexistent:/sbin/nologin
@


1.8
log
@Major update to bacula 5.2.1.

As usual with major version bump, do not forget to run the upgrade
script corresponding to your DB.
A new README is provided in the package.

Tested by sthen@@ and myself.
"Don't wait on me" merdely@@ (maintainer)

ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.7 2010/07/20 14:38:39 merdely Exp $
a11 1
share/applications/
@


1.7
log
@Update bacula to 5.0.2.

Fixes the weird install issues with the bat binary

New features can be found here:
http://www.bacula.org/5.0.x-manuals/en/main/main/New_Features_in_5_0_0.html

Thanks to sthen for help with the new wantlib/lib_depends stuff,
removing the sqlite flavor, ...

Thanks to giovanni for pointing out a ${TRUEPREFIX} -> /usr/local that
crept into one of my patch files.

ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.6 2009/12/22 12:51:52 sthen Exp $
a7 1
@@owner _bacula
a10 1
@@owner
a30 1
@@owner _bacula
a33 1
@@owner
@


1.6
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.5 2009/10/02 02:34:05 merdely Exp $
d14 1
d39 1
@


1.5
log
@Update bacula to 3.0.2:
	* Shared objects
	* Virtual backups
	* Duplicate Job Control
	* TLS Authentication
	* Exclude Dir Containing = <filename-string>
	* Plugins including Exchange 2003/2007 Plugin
	* libdbi backend abstraction
	* Bat enhancements

Upgrading from 2.4.4 to 3.0.2 requires updating the database using
/usr/local/libexec/bacula/update_bacula_database.  Database upgrades
from older databases can be done with other scripts in
/usr/local/libexec/bacula/updatedb.  You can determine your database
version in mysql and postgresql with 'select * from version'.

As sthen@@ reminded me and the documentation points out, when upgrading
between major versions (2.x.x -> 3.x.x), you should upgrade all of your
components at the same time due to protocol changes.

a *lot* of help from and ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.4 2009/01/12 21:17:07 sthen Exp $
d40 1
a40 1
@@unexec %D/bin/update-desktop-database
@


1.4
log
@"important bug fix" update to 2.4.4
ok merdely@@ (maintainer).
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.3 2008/10/19 03:44:42 merdely Exp $
d14 14
d35 6
@


1.3
log
@Update to bacula 2.4.3.
Add no_server PSEUDO_FLAVOR
Reorganize the Makefile some.
Remove dependency on qwt.
Set FULLPKGPATH for -main and -bat to remove backend dependencies
   (found by and solution from naddy@@)
Use SUBST_CMD.

ok jdixon@@, okan@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.2 2008/02/16 21:22:41 merdely Exp $
a6 1
share/examples/bacula/
d11 1
a11 1
@@mode 644
d14 2
@


1.2
log
@Fix _bacula-sd uid.  Bump package names.

Pointed out by sthen@@
"reads fine" jasper@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-bat,v 1.1 2008/02/07 02:53:35 merdely Exp $
d6 1
a6 1
sbin/bat
@


1.1
log
@Update bacula to 2.2.8.

Bacula changelog:
http://bacula.svn.sourceforge.net/viewvc/bacula/branches/Branch-2.2/bacula/ChangeLog?revision=6309&view=markup

Major port change in this version:
-main subpackage is now bacula-client
-server subpackage remains bacula-server
-bat subpackage is new bacula admin tool
-client subpackage goes away.

If the old -main subpackage was installed, the upgrade path is to
install both bacula-client and bacula-server.

Lots of input and assistance from sthen and okan.
ok okan;  "if it works for you, go for it" sthen
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-client,v 1.2 2007/09/05 07:57:33 merdely Exp $
d4 1
a4 1
@@newuser _bacula-sd:597:_bacula:daemon:Bacula Storage Daemon:/nonexistent:/sbin/nologin
@

