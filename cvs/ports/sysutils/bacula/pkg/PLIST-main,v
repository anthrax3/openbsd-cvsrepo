head	1.23;
access;
symbols
	OPENBSD_6_0:1.23.0.4
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.22.0.6
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.2
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.20.0.2
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.17.0.2
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.2
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.7.0.4
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	robert20070720:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2015.08.15.07.50.02;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	DcwQCoBvkpVxpEev;

1.22
date	2014.08.14.06.52.59;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	SWEgo0VEo1kHfm7f;

1.21
date	2014.04.19.09.44.11;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2014.01.28.09.02.13;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2014.01.28.08.50.58;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2014.01.19.09.54.18;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.05.03.18.40.32;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2013.01.11.22.15.31;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.14.08.14.31;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2012.04.04.21.30.56;	author merdely;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2012.04.03.10.05.47;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2012.03.06.20.11.33;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2011.11.25.11.00.27;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.11.24.09.29.55;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.11.17.23.45.56;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.21.17.06.23;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.20.14.38.39;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2010.01.19.14.50.51;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.02.02.34.05;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.19.03.44.42;	author merdely;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.16.21.22.41;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.07.02.53.35;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.20.11.02.14;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.20.11.02.14;	author robert;	state Exp;
branches;
next	;

1.14.2.1
date	2012.09.15.10.42.30;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Update to bacula-client-7.2.0.
README parts from sthen@@

ok sthen@@
@
text
@@@comment $OpenBSD: PLIST-main,v 1.22 2014/08/14 06:52:59 ajacoutot Exp $
@@conflict bacula-server-<5.2.1
@@pkgpath sysutils/bacula,-client
@@newgroup _bacula:591
@@newuser _bacula:591:_bacula:daemon:Bacula Director:/nonexistent:/sbin/nologin
@@comment lib/bpipe-fd.a
lib/bpipe-fd.so
lib/libbac.a
lib/libbac.la
@@lib lib/libbac.so.${LIBbac_VERSION}
lib/libbaccfg.a
lib/libbaccfg.la
@@lib lib/libbaccfg.so.${LIBbaccfg_VERSION}
lib/libbacfind.a
lib/libbacfind.la
@@lib lib/libbacfind.so.${LIBbacfind_VERSION}
libexec/bacula/
libexec/bacula/bacula-ctl-fd
libexec/bacula/bacula_config
libexec/bacula/bconsole
@@man man/man8/bacula-fd.8
@@man man/man8/bconsole.8
@@man man/man8/bregex.8
@@man man/man8/bwild.8
@@bin sbin/bacula-fd
@@bin sbin/bconsole
share/doc/bacula/
share/doc/bacula/ChangeLog
share/doc/bacula/INSTALL
share/doc/bacula/LICENSE
share/doc/bacula/LICENSE-FAQ
share/doc/bacula/LICENSE-FOSS
share/doc/bacula/README
share/doc/bacula/ReleaseNotes
share/doc/bacula/VERIFYING
share/doc/pkg-readmes/${FULLPKGNAME}
share/examples/bacula/
@@mode 750
@@group _bacula
@@sample ${SYSCONFDIR}/
@@mode 770
@@owner _bacula
@@sample ${LOCALSTATEDIR}/
@@mode 640
@@owner
@@group
share/examples/bacula/bacula-fd.conf
@@group _bacula
@@sample ${SYSCONFDIR}/bacula-fd.conf
@@group
share/examples/bacula/bconsole.conf
@@group _bacula
@@sample ${SYSCONFDIR}/bconsole.conf
@@mode
@@group
@@rcscript ${RCDIR}/bacula_fd
@@rcscript ${RCDIR}/bacula
@


1.22
log
@Update to bacula-client-7.0.5.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.21 2014/04/19 09:44:11 ajacoutot Exp $
d31 2
a35 1
share/doc/bacula/technotes
@


1.21
log
@Major update to Bacula 7.0.2.
Some info at:
http://blog.bacula.org/p710/
http://blog.bacula.org/release-7-0-2/

Now builds with our libtool(1).

While there's a huge amount of changes, existing setups "should" just
work without any modification.

tested by sthen@@ and myself
ok sthen@@, my new co-maintainer :-)
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.20 2014/01/28 09:02:13 ajacoutot Exp $
d43 1
a43 1
@@mode
a45 1
@@mode 640
a48 1
@@mode
a49 1
@@mode 640
@


1.20
log
@Revert previous; I am being morning-stupid, the client runs as root...
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.19 2014/01/28 08:50:58 ajacoutot Exp $
d6 1
a16 3
lib/libbacpy.a
lib/libbacpy.la
@@lib lib/libbacpy.so.${LIBbacpy_VERSION}
a24 1
sbin/bacula
d39 1
a39 1
@@sample ${BACULACONF}/
d42 1
a42 1
@@sample ${BACULASTATE}/
d49 1
a49 1
@@sample ${BACULACONF}/bacula-fd.conf
d55 1
a55 1
@@sample ${BACULACONF}/bconsole.conf
@


1.19
log
@gecos: Bacula Director -> Bacula Daemon -- since this user is used on both
the director and the client.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.18 2014/01/19 09:54:18 ajacoutot Exp $
d5 1
a5 1
@@newuser _bacula:591:_bacula:daemon:Bacula Daemon:/nonexistent:/sbin/nologin
@


1.18
log
@Set @@mode explicitely.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.17 2013/05/03 18:40:32 sthen Exp $
d5 1
a5 1
@@newuser _bacula:591:_bacula:daemon:Bacula Director:/nonexistent:/sbin/nologin
@


1.17
log
@add a meta rc.d script for bacula, modelled after samba's, to start and
stop the various daemons together in order suggested by upstream's scripts.
ok ajacoutot@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.16 2013/01/11 22:15:31 sthen Exp $
d49 1
a50 1
@@mode 640
d55 1
a56 1
@@mode 640
@


1.16
log
@update to Bacula 5.2.12, ok aja@@ merdely@@
- minor bugfix (and rolling in a more important fix we already had in patches)
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.15 2012/09/14 08:14:31 ajacoutot Exp $
d62 1
@


1.15
log
@Update to bacula-5.2.11.

ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.14 2012/04/04 21:30:56 merdely Exp $
a5 1
@@comment lib/bpipe-fd.a
@


1.14
log
@Move some files from PLIST to PLIST-server so that `FLAVOR=no_server make`
works again.
Conflict with older versions of the client.
Make mtx-changer.conf @@sample-able so we don't overwrite on update.

ok & help from sthen and aja
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.13 2012/04/03 10:05:47 sthen Exp $
d54 1
a55 1
@@mode
@


1.14.2.1
log
@MFC bacula update (security fix CVE-2012-4430); ok ajacoutot@@

This is a problem with console ACLs which was allowing access to certain
functionality and e.g. dump resources which should have been restricted.
Problem only affects people who have configured console ACLs.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.15 2012/09/14 08:14:31 ajacoutot Exp $
d54 1
a55 1
@@group
@


1.13
log
@Adjust new user creation in Bacula which had some duplication between
packages which depend on each other:

- only create the _bacula user in -main (client parts)
- only create the _bacula-sd user in -server

Change _bacula's home dir from /var/bacula to /nonexistent.
/var/bacula needs to be writable by the _bacula group and since
/usr/libexec/security actually checks that user home dirs are
group-writable, whereas /etc/security just checked if the user
home dir was a writable *file*(!), it whines every day for
every machine with bacula client installed. (This will only
affect new installations so if you're annoyed by these mails
too, just vipw and change it by hand).

ok ajacoutot@@ merdely@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.12 2012/03/06 20:11:33 sthen Exp $
a23 3
libexec/bacula/mtx-changer.conf
libexec/bacula/query.sql.dist
@@sample libexec/bacula/query.sql
@


1.12
log
@update to Bacula 5.2.6, ok ajacoutot@@ merdely@@
- don't use ports libtool, it passes invalid flags to the linker
- since libbaccats-${BACKEND} must have the same .so version as
libbaccats, use a variable to make sure they are kept in-sync
- mark as being SHARED_ONLY and sync/merge plists
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.11 2011/11/25 11:00:27 ajacoutot Exp $
d5 1
a5 1
@@newuser _bacula:591:_bacula:daemon:Bacula Director:/var/bacula:/sbin/nologin
@


1.11
log
@Unfuck post-install target and use our libtool.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.10 2011/11/24 09:29:55 ajacoutot Exp $
a5 1
%%SHARED%%
d7 1
d10 1
d13 1
d16 1
d19 1
d25 2
d29 2
@


1.10
log
@Reorder LDFLAGS (prefer -L.libs over /usr/local/lib) so that bacula can
be rebuilt while already installed.
Also use gnu LIBTOOL, ours doesn't work correctly.
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.9 2011/11/17 23:45:56 ajacoutot Exp $
d7 1
d42 2
a43 1
@@mode 644
a44 1
@@owner
d49 2
a50 1
@@mode 644
@


1.9
log
@Major update to bacula 5.2.1.

As usual with major version bump, do not forget to run the upgrade
script corresponding to your DB.
A new README is provided in the package.

Tested by sthen@@ and myself.
"Don't wait on me" merdely@@ (maintainer)

ok sthen@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.8 2011/03/21 17:06:23 ajacoutot Exp $
a6 1
lib/bpipe-fd.a
@


1.8
log
@Add rc scripts and adapt documentation accordingly.

maintainer timeout
ok sthen@@
@
text
@d1 2
a2 4
@@comment $OpenBSD: PLIST-main,v 1.7 2010/07/20 14:38:39 merdely Exp $
@@comment $OpenBSD: PLIST-main,v 1.7 2010/07/20 14:38:39 merdely Exp $
@@conflict bacula-client-*
@@conflict bacula-server-<3.0.2
d9 1
a9 1
@@comment lib/libbac.la
d11 1
a11 1
@@comment lib/libbaccfg.la
d13 1
a13 1
@@comment lib/libbacfind.la
d15 1
a15 1
@@comment lib/libbacpy.la
d19 1
d22 1
d25 1
d27 2
a28 2
@@comment share/doc/bacula/ChangeLog
@@comment share/doc/bacula/INSTALL
d30 1
a30 1
@@comment share/doc/bacula/README
d32 1
a32 1
@@comment share/doc/bacula/VERIFYING
d34 1
a36 1
@@owner _bacula
d39 2
d43 1
a44 1
@@group
a46 1
@@owner _bacula
d49 5
a54 1
@@owner
@


1.7
log
@Update bacula to 5.0.2.

Fixes the weird install issues with the bat binary

New features can be found here:
http://www.bacula.org/5.0.x-manuals/en/main/main/New_Features_in_5_0_0.html

Thanks to sthen for help with the new wantlib/lib_depends stuff,
removing the sqlite flavor, ...

Thanks to giovanni for pointing out a ${TRUEPREFIX} -> /usr/local that
crept into one of my patch files.

ok sthen@@
@
text
@d1 2
a2 2
@@comment $OpenBSD: PLIST-main,v 1.6 2010/01/19 14:50:51 sthen Exp $
@@comment $OpenBSD: PLIST-main,v 1.6 2010/01/19 14:50:51 sthen Exp $
a29 1
share/doc/bacula/README-client.OpenBSD
d47 4
@


1.6
log
@Move %%SHARED%% up in the plist; it was in an @@group _bacula @@mode 640
section so the libraries weren't accessible by a normal user. These libs
were split off from the individual binaries in the last major update of
bacula (between openbsd 4.6 and 4.7) meaning that users not in group
_bacula would be unable to use the admin applications.

ok jasper@@ merdely@@
@
text
@d1 2
a2 2
@@comment $OpenBSD: PLIST-main,v 1.5 2009/10/02 02:34:05 merdely Exp $
@@comment $OpenBSD: PLIST-main,v 1.5 2009/10/02 02:34:05 merdely Exp $
d20 1
a24 1
share/applications/
a47 4
@@mode
@@owner
@@group
share/pixmaps/
@


1.5
log
@Update bacula to 3.0.2:
	* Shared objects
	* Virtual backups
	* Duplicate Job Control
	* TLS Authentication
	* Exclude Dir Containing = <filename-string>
	* Plugins including Exchange 2003/2007 Plugin
	* libdbi backend abstraction
	* Bat enhancements

Upgrading from 2.4.4 to 3.0.2 requires updating the database using
/usr/local/libexec/bacula/update_bacula_database.  Database upgrades
from older databases can be done with other scripts in
/usr/local/libexec/bacula/updatedb.  You can determine your database
version in mysql and postgresql with 'select * from version'.

As sthen@@ reminded me and the documentation points out, when upgrading
between major versions (2.x.x -> 3.x.x), you should upgrade all of your
components at the same time due to protocol changes.

a *lot* of help from and ok sthen@@
@
text
@d1 2
a2 2
@@comment $OpenBSD: PLIST-main,v 1.4 2008/10/19 03:44:42 merdely Exp $
@@comment $OpenBSD$
d8 1
a47 1
%%SHARED%%
@


1.4
log
@Update to bacula 2.4.3.
Add no_server PSEUDO_FLAVOR
Reorganize the Makefile some.
Remove dependency on qwt.
Set FULLPKGPATH for -main and -bat to remove backend dependencies
   (found by and solution from naddy@@)
Use SUBST_CMD.

ok jdixon@@, okan@@
@
text
@d1 2
a2 1
@@comment $OpenBSD: PLIST-main,v 1.3 2008/02/16 21:22:41 merdely Exp $
d4 1
a4 1
@@conflict bacula-server-<2.2.7
d8 9
d19 1
d21 1
d23 1
d25 4
d30 3
d47 5
@


1.3
log
@Fix _bacula-sd uid.  Bump package names.

Pointed out by sthen@@
"reads fine" jasper@@
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-main,v 1.2 2008/02/07 02:53:35 merdely Exp $
a6 1
@@newuser _bacula-sd:599:_bacula:daemon:Bacula Storage Daemon:/nonexistent:/sbin/nologin
d10 1
a10 1
sbin/bacula-fd
@


1.2
log
@Update bacula to 2.2.8.

Bacula changelog:
http://bacula.svn.sourceforge.net/viewvc/bacula/branches/Branch-2.2/bacula/ChangeLog?revision=6309&view=markup

Major port change in this version:
-main subpackage is now bacula-client
-server subpackage remains bacula-server
-bat subpackage is new bacula admin tool
-client subpackage goes away.

If the old -main subpackage was installed, the upgrade path is to
install both bacula-client and bacula-server.

Lots of input and assistance from sthen and okan.
ok okan;  "if it works for you, go for it" sthen
@
text
@d1 1
a1 1
@@comment $OpenBSD: PLIST-client,v 1.2 2007/09/05 07:57:33 merdely Exp $
d7 1
a7 1
@@newuser _bacula-sd:597:_bacula:daemon:Bacula Storage Daemon:/nonexistent:/sbin/nologin
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
@@comment $OpenBSD$
d3 2
a4 1
@@conflict bacula-server-*
d7 1
a8 2
libexec/bacula/bacula
libexec/bacula/bacula-ctl-dir
a9 30
libexec/bacula/bacula-ctl-sd
libexec/bacula/bconsole
libexec/bacula/btraceback.dbx
libexec/bacula/btraceback.gdb
libexec/bacula/create_bacula_database
libexec/bacula/create_${BACKEND}_database
libexec/bacula/delete_catalog_backup
libexec/bacula/disk-changer
libexec/bacula/drop_bacula_database
libexec/bacula/drop_bacula_tables
libexec/bacula/drop_${BACKEND}_database
libexec/bacula/drop_${BACKEND}_tables
libexec/bacula/dvd-handler
@@comment libexec/bacula/gconsole
libexec/bacula/grant_bacula_privileges
libexec/bacula/grant_${BACKEND}_privileges
libexec/bacula/make_bacula_tables
libexec/bacula/make_catalog_backup
libexec/bacula/make_${BACKEND}_tables
libexec/bacula/mtx-changer
libexec/bacula/query.sql
libexec/bacula/startmysql
libexec/bacula/stopmysql
libexec/bacula/update_bacula_tables
libexec/bacula/update_${BACKEND}_tables
@@comment @@man man/man1/bacula-console-gnome.1
@@comment @@man man/man1/bacula-tray-monitor.1
@@comment @@man man/man1/bacula-wxconsole.1
@@man man/man1/bsmtp.1
@@man man/man8/bacula-dir.8
a10 11
@@man man/man8/bacula-sd.8
@@man man/man8/bacula.8
@@man man/man8/bconsole.8
@@man man/man8/bcopy.8
@@man man/man8/bextract.8
@@man man/man8/bls.8
@@man man/man8/bscan.8
@@man man/man8/btape.8
@@man man/man8/btraceback.8
@@man man/man8/dbcheck.8
sbin/bacula-dir
d12 2
a13 15
sbin/bacula-sd
sbin/bconsole
sbin/bcopy
sbin/bextract
sbin/bls
sbin/bregex
sbin/bscan
sbin/bsmtp
sbin/btape
sbin/btraceback
sbin/bwild
sbin/dbcheck
@@mode 755
@@owner root
@@group wheel
d21 2
a22 10
@@owner root
@@group wheel
share/examples/bacula/bacula-dir.conf
@@mode 640
@@owner _bacula
@@group _bacula
@@sample ${BACULACONF}/bacula-dir.conf
@@mode 644
@@owner root
@@group wheel
a27 16
@@mode 644
@@owner root
@@group wheel
share/examples/bacula/bacula-sd.conf
@@mode 640
@@owner _bacula
@@group _bacula
@@sample ${BACULACONF}/bacula-sd.conf
@@mode 644
@@owner root
@@group wheel
share/examples/bacula/bconsole.conf
@@mode 640
@@owner _bacula
@@group _bacula
@@sample ${BACULACONF}/bconsole.conf
@


1.1.1.1
log
@import of bacula 2.0.3;

Bacula is a set of computer programs that permit you (or the system
administrator) to manage backup, recovery, and verification of
computer data across a network of computers of different kinds.
In technical terms, it is a network Client/Server based backup program.
Bacula is relatively easy to use and efficient, while offering many
advanced storage management features that make it easy to find and
recover lost or damaged files. Due to its modular design, Bacula is
scalable from small single computer systems to systems consisting of
hundreds of computers located over a large network.

from Mike Erdely <mike@@erdelynet.com>
@
text
@@
