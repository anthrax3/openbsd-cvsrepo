head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.4
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.5.0.8
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.4
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2015.08.15.07.50.02;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	DcwQCoBvkpVxpEev;

1.5
date	2014.04.19.09.44.11;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.09.18.40.58;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2012.03.06.20.11.33;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2011.11.17.23.45.56;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.07.20.14.38.39;	author merdely;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to bacula-client-7.2.0.
README parts from sthen@@

ok sthen@@
@
text
@$OpenBSD: patch-src_cats_Makefile_in,v 1.5 2014/04/19 09:44:11 ajacoutot Exp $
--- src/cats/Makefile.in.orig	Thu Aug 13 15:52:24 2015
+++ src/cats/Makefile.in	Fri Aug 14 10:20:19 2015
@@@@ -125,26 +125,26 @@@@ libbaccats.a: $(LIBBACCATS_OBJS)
 
 libbacsql.la: Makefile $(LIBBACSQL_LOBJS)
 	@@echo "Making $@@ ..."	  
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(LIBBACSQL_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACSQL_LT_RELEASE) $(DB_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(LIBBACSQL_LOBJS) -export-dynamic -rpath $(libdir) $(DB_LIBS)
 
 libbaccats.la: Makefile cats_null.lo
 	@@echo "Making $@@ ..."
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ cats_null.lo -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ cats_null.lo -export-dynamic -rpath $(libdir)
 
 libbaccats-mysql.la: Makefile $(MYSQL_LOBJS)
 	@@echo "Making $@@ ..."
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(MYSQL_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) \
-							   -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(MYSQL_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(MYSQL_LOBJS) -export-dynamic -rpath $(libdir) \
+							   $(MYSQL_LIBS)
 
 libbaccats-postgresql.la: Makefile $(POSTGRESQL_LOBJS)
 	@@echo "Making $@@ ..."
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(POSTGRESQL_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) \
-							   -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(POSTGRESQL_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(POSTGRESQL_LOBJS) -export-dynamic -rpath $(libdir) \
+							   $(POSTGRESQL_LIBS)
 
 libbaccats-sqlite3.la: Makefile $(SQLITE_LOBJS)
 	@@echo "Making $@@ ..."
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(SQLITE_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) \
-							   -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(SQLITE_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(SQLITE_LOBJS) -export-dynamic -rpath $(libdir) \
+							   $(SQLITE_LIBS)
 #libbaccats-dbi.la: Makefile $(DBI_LOBJS)
 #	 @@echo "Making $@@ ..."
 #	 $(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(DBI_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) \
@


1.5
log
@Major update to Bacula 7.0.2.
Some info at:
http://blog.bacula.org/p710/
http://blog.bacula.org/release-7-0-2/

Now builds with our libtool(1).

While there's a huge amount of changes, existing setups "should" just
work without any modification.

tested by sthen@@ and myself
ok sthen@@, my new co-maintainer :-)
@
text
@d1 4
a4 4
$OpenBSD$
--- src/cats/Makefile.in.orig	Wed Apr  2 19:32:30 2014
+++ src/cats/Makefile.in	Thu Apr 10 17:31:03 2014
@@@@ -142,26 +142,26 @@@@ libbaccats.a: $(LIBBACCATS_OBJS)
d11 1
a11 1
 libbaccats.la: Makefile cats_dummy.lo
d13 2
a14 2
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ cats_dummy.lo -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ cats_dummy.lo -export-dynamic -rpath $(libdir)
d36 1
a36 2
 
 #libbaccats-ingres.la: Makefile $(INGRES_LOBJS)
d38 1
@


1.4
log
@update to Bacula 5.2.10, ok aja@@ merdely@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cats_Makefile_in,v 1.3 2012/03/06 20:11:33 sthen Exp $
--- src/cats/Makefile.in.orig	Thu Jun 28 15:52:03 2012
+++ src/cats/Makefile.in	Thu Jul  5 16:32:34 2012
@@@@ -142,25 +142,25 @@@@ libbaccats.a: $(LIBBACCATS_OBJS)
d9 1
a9 1
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(LIBBACSQL_LOBJS) -export-dynamic -rpath $(libdir) $(LIBbacsql_VERSION) $(DB_LIBS)
d14 1
a14 1
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ cats_dummy.lo -export-dynamic -rpath $(libdir) $(LIBbaccats_VERSION)
d19 3
a21 2
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(MYSQL_LOBJS) -export-dynamic -rpath $(libdir) $(LIBbaccats_VERSION) \
 							   -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(MYSQL_LIBS)
d26 3
a28 2
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(POSTGRESQL_LOBJS) -export-dynamic -rpath $(libdir) $(LIBbaccats_VERSION) \
 							   -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(POSTGRESQL_LIBS)
d33 3
a35 2
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(SQLITE_LOBJS) -export-dynamic -rpath $(libdir) $(LIBbaccats_VERSION) \
 							   -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(SQLITE_LIBS)
d38 1
@


1.3
log
@update to Bacula 5.2.6, ok ajacoutot@@ merdely@@
- don't use ports libtool, it passes invalid flags to the linker
- since libbaccats-${BACKEND} must have the same .so version as
libbaccats, use a variable to make sure they are kept in-sync
- mark as being SHARED_ONLY and sync/merge plists
@
text
@d1 3
a3 3
$OpenBSD: patch-src_cats_Makefile_in,v 1.2 2011/11/17 23:45:56 ajacoutot Exp $
--- src/cats/Makefile.in.orig	Wed Jan 18 14:57:49 2012
+++ src/cats/Makefile.in	Tue Jan 24 01:09:59 2012
d20 1
a20 1
                                                            -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(MYSQL_LIBS)
d26 1
a26 1
                                                            -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(POSTGRESQL_LIBS)
d32 1
a32 1
                                                            -soname libbaccats-$(LIBBACCATS_LT_RELEASE).so $(SQLITE_LIBS)
@


1.2
log
@Major update to bacula 5.2.1.

As usual with major version bump, do not forget to run the upgrade
script corresponding to your DB.
A new README is provided in the package.

Tested by sthen@@ and myself.
"Don't wait on me" merdely@@ (maintainer)

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/cats/Makefile.in.orig	Sun Oct 30 13:03:42 2011
+++ src/cats/Makefile.in	Mon Nov 14 15:56:11 2011
@@@@ -142,23 +142,23 @@@@ libbaccats.a: $(LIBBACCATS_OBJS)
d9 1
a9 1
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(LIBBACSQL_LOBJS) -export-dynamic -rpath $(libdir) ${LIBbacsql_VERSION} $(DB_LIBS)
d14 1
a14 1
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ cats_dummy.lo -export-dynamic -rpath $(libdir) ${LIBbaccats_VERSION}
d18 3
a20 2
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(MYSQL_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) $(MYSQL_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(MYSQL_LOBJS) -export-dynamic -rpath $(libdir) ${LIBbaccats_VERSION} $(MYSQL_LIBS)
d24 3
a26 2
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(POSTGRESQL_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) $(POSTGRESQL_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(POSTGRESQL_LOBJS) -export-dynamic -rpath $(libdir) ${LIBbaccats_VERSION} $(POSTGRESQL_LIBS)
d30 3
a32 2
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(SQLITE_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACCATS_LT_RELEASE) $(SQLITE_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(SQLITE_LOBJS) -export-dynamic -rpath $(libdir) ${LIBbaccats_VERSION} $(SQLITE_LIBS)
a34 1
 #	 @@echo "Making $@@ ..."
@


1.1
log
@Update bacula to 5.0.2.

Fixes the weird install issues with the bat binary

New features can be found here:
http://www.bacula.org/5.0.x-manuals/en/main/main/New_Features_in_5_0_0.html

Thanks to sthen for help with the new wantlib/lib_depends stuff,
removing the sqlite flavor, ...

Thanks to giovanni for pointing out a ${TRUEPREFIX} -> /usr/local that
crept into one of my patch files.

ok sthen@@
@
text
@d2 3
a4 3
--- src/cats/Makefile.in.orig	Thu Jun 24 15:33:25 2010
+++ src/cats/Makefile.in	Thu Jun 24 15:39:29 2010
@@@@ -69,7 +69,7 @@@@ libbacsql.a: $(LIBBACSQL_OBJS)
d8 2
a9 2
-	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(LIBBACSQL_LOBJS) -export-dynamic -rpath $(libdir) -release $(LIBBACSQL_LT_CURRENT).$(LIBBACSQL_LT_REVISION).$(LIBBACSQL_LT_AGE) $(DB_LIBS)
+	$(LIBTOOL_LINK) $(CXX) $(DEFS) $(DEBUG) $(LDFLAGS) -o $@@ $(LIBBACSQL_LOBJS) -export-dynamic -rpath $(libdir) $(LIBbacsql_LTVERSION) $(DB_LIBS)
d11 22
a32 2
 Makefile: $(srcdir)/Makefile.in $(topdir)/config.status
 	cd $(topdir) \
@

