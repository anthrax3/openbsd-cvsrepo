head	1.19;
access;
symbols
	OPENBSD_6_0:1.19.0.2
	OPENBSD_6_0_BASE:1.19
	OPENBSD_5_9:1.18.0.2
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.16.0.8
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.16.0.4
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.16.0.2
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.12.0.2
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	robert20070720:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.19
date	2016.07.08.12.59.13;	author sthen;	state Exp;
branches;
next	1.18;
commitid	MtPxPw6CpurOsNPU;

1.18
date	2016.01.19.22.51.09;	author sthen;	state Exp;
branches;
next	1.17;
commitid	14u3fTpCWO7OUNMR;

1.17
date	2015.08.15.07.50.02;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	DcwQCoBvkpVxpEev;

1.16
date	2014.05.21.10.12.34;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2014.04.19.09.44.11;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2013.04.12.10.39.04;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2012.09.14.08.14.31;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2012.07.09.18.40.58;	author sthen;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2012.07.04.12.02.56;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2012.03.06.20.11.33;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.12.12.09.15.09;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2011.11.17.23.45.56;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.12.19.47.06;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2010.07.20.14.38.39;	author merdely;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.02.02.34.05;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.12.21.17.07;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.19.03.44.42;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.07.02.53.35;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.20.11.02.14;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.20.11.02.14;	author robert;	state Exp;
branches;
next	;

1.12.2.1
date	2012.09.15.10.42.30;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.19
log
@bugfix update to Bacula 7.4.2
@
text
@$OpenBSD: patch-configure,v 1.18 2016/01/19 22:51:09 sthen Exp $
--- configure.orig	Wed Jul  6 20:03:41 2016
+++ configure	Fri Jul  8 13:41:32 2016
@@@@ -4808,7 +4808,7 @@@@ $as_echo "no" >&6; }
 fi
 
 
-if test ! -e $CXX; then
+if test ! -e `which $CXX`; then
    as_fn_error $? "Unable to find C++ compiler" "$LINENO" 5
 fi
 
@@@@ -16699,7 +16699,7 @@@@ if test x$use_libtool != xno; then
    LIBTOOL_INSTALL_TARGET="libtool-install"
    LIBTOOL_UNINSTALL_TARGET="libtool-uninstall"
    LIBTOOL_CLEAN_TARGET="libtool-clean"
-   QMAKE_LIBTOOL="${BUILD_DIR}/libtool"
+   QMAKE_LIBTOOL="${LIBTOOL}"
    FD_PLUGIN_DIR="src/plugins/fd"
    have_plugins=yes
 else
@@@@ -22362,7 +22362,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
 
 $as_echo "#define HAVE_READLINE 1" >>confdefs.h
 
-		    CONS_LIBS="-lreadline -lhistory ${TERM_LIB}"
+		    CONS_LIBS="-lreadline ${TERM_LIB}"
 		    got_readline="yes"
 
 else
@@@@ -22401,7 +22401,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
 
 			got_readline="yes"
 			CONS_INC="-I${TOP_DIR}/depkgs/readline"
-			CONS_LIBS="-lreadline -lhistory ${TERM_LIB}"
+			CONS_LIBS="-lreadline ${TERM_LIB}"
 			CONS_LDFLAGS="-L${TOP_DIR}/depkgs/readline"
 			PRTREADLINE_SRC="${TOP_DIR}/depkgs/readline"
 
@@@@ -30736,6 +30736,7 @@@@ netbsd)
    DISTVER=`uname -a |awk '{print $3}'`
    lld="qd"
    llu="qu"
+   COMPRESS_MANPAGES=
    TAPEDRIVE="/dev/nrst0"
    PSCMD="ps -ax -o pid,command"
    PTHREAD_LIB="-pthread"
@@@@ -30754,6 +30755,7 @@@@ openbsd)
        platforms/openbsd/bacula-fd \
        platforms/openbsd/bacula-sd \
        platforms/openbsd/bacula-dir"
+   largefile_support="yes"
   ;;
 redhat)
    if test -f /etc/whitebox-release ; then
@


1.18
log
@update to Bacula 7.4.0, "this version consists of more backports from
Bacula Enterprise 8.4 as well quite a few bug fixes (28) as a number of
new features".

Database schema has not changed and older FDs should remain compatible
with this version.

http://www.bacula.org/7.4.x-manuals/en/main/New_Features_in_7_4_0.html
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.17 2015/08/15 07:50:02 ajacoutot Exp $
--- configure.orig	Fri Jan 15 16:57:18 2016
+++ configure	Mon Jan 18 13:07:24 2016
d40 1
a40 1
@@@@ -30714,6 +30714,7 @@@@ netbsd)
d48 1
a48 1
@@@@ -30732,6 +30733,7 @@@@ openbsd)
@


1.17
log
@Update to bacula-client-7.2.0.
README parts from sthen@@

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.16 2014/05/21 10:12:34 ajacoutot Exp $
--- configure.orig	Thu Aug 13 15:52:24 2015
+++ configure	Fri Aug 14 10:16:41 2015
@@@@ -4802,7 +4802,7 @@@@ $as_echo "no" >&6; }
d13 1
a13 1
@@@@ -16693,7 +16693,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22331,7 +22331,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
d31 1
a31 1
@@@@ -22370,7 +22370,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d40 1
a40 1
@@@@ -30669,6 +30669,7 @@@@ netbsd)
d48 1
a48 1
@@@@ -30687,6 +30688,7 @@@@ openbsd)
@


1.16
log
@Update to bacula 7.0.3.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.15 2014/04/19 09:44:11 ajacoutot Exp $
--- configure.orig	Sun May 11 12:34:12 2014
+++ configure	Wed May 21 10:05:14 2014
@@@@ -4776,7 +4776,7 @@@@ $as_echo "no" >&6; }
d13 1
a13 1
@@@@ -16708,7 +16708,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22319,7 +22319,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
d31 1
a31 1
@@@@ -22358,7 +22358,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d40 1
a40 1
@@@@ -30546,6 +30546,7 @@@@ openbsd)
d48 1
a48 1
@@@@ -30555,6 +30556,7 @@@@ openbsd)
@


1.15
log
@Major update to Bacula 7.0.2.
Some info at:
http://blog.bacula.org/p710/
http://blog.bacula.org/release-7-0-2/

Now builds with our libtool(1).

While there's a huge amount of changes, existing setups "should" just
work without any modification.

tested by sthen@@ and myself
ok sthen@@, my new co-maintainer :-)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.14 2013/04/12 10:39:04 ajacoutot Exp $
--- configure.orig	Wed Apr  2 18:32:30 2014
+++ configure	Tue Apr  8 16:26:01 2014
d13 1
a13 1
@@@@ -16640,7 +16640,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22251,7 +22251,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
d31 1
a31 1
@@@@ -22290,7 +22290,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d40 1
a40 1
@@@@ -30478,6 +30478,7 @@@@ openbsd)
d48 1
a48 1
@@@@ -30487,6 +30488,7 @@@@ openbsd)
@


1.14
log
@Update to bacula-5.2.13.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.13 2012/09/14 08:14:31 ajacoutot Exp $
--- configure.orig	Tue Feb 19 20:21:35 2013
+++ configure	Fri Apr 12 07:02:31 2013
@@@@ -4806,7 +4806,7 @@@@ $as_echo "no" >&6; }
d13 1
a13 1
@@@@ -16716,7 +16716,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22422,7 +22422,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
d26 2
a27 2
-		    CONS_LIBS="-lreadline -lhistory $TERM_LIB"
+		    CONS_LIBS="-lreadline $TERM_LIB"
d31 1
a31 1
@@@@ -22461,7 +22461,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d35 2
a36 2
-			CONS_LIBS="-lreadline -lhistory $TERM_LIB"
+			CONS_LIBS="-lreadline $TERM_LIB"
d40 1
a40 1
@@@@ -30760,6 +30760,7 @@@@ netbsd)
d48 1
a48 1
@@@@ -30778,6 +30779,7 @@@@ openbsd)
@


1.13
log
@Update to bacula-5.2.11.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.12 2012/07/09 18:40:58 sthen Exp $
--- configure.orig	Thu Jun 28 15:52:03 2012
+++ configure	Thu Jul  5 18:18:02 2012
@@@@ -4804,7 +4804,7 @@@@ $as_echo "no" >&6; }
d13 1
a13 1
@@@@ -16714,7 +16714,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22392,7 +22392,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
d31 1
a31 1
@@@@ -22431,7 +22431,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d40 1
a40 1
@@@@ -30720,6 +30720,7 @@@@ netbsd)
d48 1
a48 1
@@@@ -30738,6 +30739,7 @@@@ openbsd)
@


1.12
log
@update to Bacula 5.2.10, ok aja@@ merdely@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.11 2012/07/04 12:02:56 ajacoutot Exp $
a39 26
@@@@ -30333,13 +30333,13 @@@@ $as_echo "#define HAVE_XATTR 1" >>confdefs.h
 fi
 
 PTHREAD_LIB=""
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -lpthread" >&5
-$as_echo_n "checking for pthread_create in -lpthread... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -pthread" >&5
+$as_echo_n "checking for pthread_create in -pthread... " >&6; }
 if ${ac_cv_lib_pthread_pthread_create+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -30370,7 +30370,7 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_create" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_create" >&6; }
 if test "x$ac_cv_lib_pthread_pthread_create" = xyes; then :
-  PTHREAD_LIB="-lpthread"
+  PTHREAD_LIB="-pthread"
 else
 
        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -lpthreads" >&5
@


1.12.2.1
log
@MFC bacula update (security fix CVE-2012-4430); ok ajacoutot@@

This is a problem with console ACLs which was allowing access to certain
functionality and e.g. dump resources which should have been restricted.
Problem only affects people who have configured console ACLs.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.13 2012/09/14 08:14:31 ajacoutot Exp $
d40 26
@


1.11
log
@Rename our autochanger to chio-autochanger-openbsd and fix a couple of
bugs in it. All functions successfully tested (only listall is not
implemented yet).
While here, set the default tape device to /dev/nrst0.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.10 2012/03/06 20:11:33 sthen Exp $
--- configure.orig	Tue Feb 21 16:59:33 2012
+++ configure	Wed Jul  4 13:34:26 2012
@@@@ -4792,7 +4792,7 @@@@ $as_echo "no" >&6; }
d13 1
a13 1
@@@@ -16383,7 +16383,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22061,7 +22061,7 @@@@ if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
d31 1
a31 1
@@@@ -22100,7 +22100,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d40 1
a40 1
@@@@ -29755,13 +29755,13 @@@@ $as_echo "#define HAVE_XATTR 1" >>confdefs.h
d57 1
a57 1
@@@@ -29792,7 +29792,7 @@@@ fi
d66 1
a66 1
@@@@ -30160,6 +30160,7 @@@@ openbsd)
d74 1
a74 1
@@@@ -30169,6 +30170,7 @@@@ openbsd)
@


1.10
log
@update to Bacula 5.2.6, ok ajacoutot@@ merdely@@
- don't use ports libtool, it passes invalid flags to the linker
- since libbaccats-${BACKEND} must have the same .so version as
libbaccats, use a variable to make sure they are kept in-sync
- mark as being SHARED_ONLY and sync/merge plists
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.9 2011/12/12 09:15:09 sthen Exp $
--- configure.orig	Wed Jan 18 14:57:49 2012
+++ configure	Tue Jan 24 01:04:36 2012
d66 1
a66 1
@@@@ -30160,7 +30160,8 @@@@ openbsd)
a69 1
-   TAPEDRIVE="/dev/nrst0"
d71 1
a71 1
+   TAPEDRIVE="/dev/rst0"
a73 1
    CFLAGS="${CFLAGS} -pthread"
@


1.9
log
@update Bacula to 5.2.2 (mostly bugfixes)

- Switch default flavour used by the port to pgsql; this is generally the
best-tested backend and gets the most testing. Setup isn't really
much more complicated than the old default in the port (sqlite) and
you don't really want to run into limitations and have to convert
it later. Doesn't affect packages as all flavours are built anyway.

ok ajacoutot@@ merdely@@ (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.8 2011/11/17 23:45:56 ajacoutot Exp $
--- configure.orig	Sat Nov 26 14:08:12 2011
+++ configure	Sun Dec  4 11:54:53 2011
d40 1
a40 1
@@@@ -29764,13 +29764,13 @@@@ $as_echo "#define HAVE_XATTR 1" >>confdefs.h
d57 1
a57 1
@@@@ -29801,7 +29801,7 @@@@ fi
d66 1
a66 1
@@@@ -30169,7 +30169,8 @@@@ openbsd)
d76 1
a76 1
@@@@ -30178,6 +30179,7 @@@@ openbsd)
@


1.8
log
@Major update to bacula 5.2.1.

As usual with major version bump, do not forget to run the upgrade
script corresponding to your DB.
A new README is provided in the package.

Tested by sthen@@ and myself.
"Don't wait on me" merdely@@ (maintainer)

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2010/10/12 19:47:06 robert Exp $
--- configure.orig	Sun Oct 30 13:03:42 2011
+++ configure	Mon Nov 14 17:12:31 2011
@@@@ -4764,7 +4764,7 @@@@ $as_echo "no" >&6; }
d10 1
a10 1
    as_fn_error "Unable to find C++ compiler" "$LINENO" 5
d13 1
a13 1
@@@@ -16356,7 +16356,7 @@@@ if test x$use_libtool != xno; then
d22 1
a22 1
@@@@ -22038,7 +22038,7 @@@@ eval as_val=\$$as_ac_Header
d31 1
a31 1
@@@@ -22078,7 +22078,7 @@@@ $as_echo "#define HAVE_READLINE 1" >>confdefs.h
d40 1
a40 1
@@@@ -29782,13 +29782,13 @@@@ $as_echo "#define HAVE_XATTR 1" >>confdefs.h
d48 1
a48 1
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then :
d57 1
a57 1
@@@@ -29819,7 +29819,7 @@@@ fi
d60 1
a60 1
 if test "x$ac_cv_lib_pthread_pthread_create" = x""yes; then :
d66 1
a66 1
@@@@ -30189,7 +30189,8 @@@@ openbsd)
d76 1
a76 1
@@@@ -30198,6 +30199,7 @@@@ openbsd)
@


1.7
log
@Check for EVP_PKEY_encrypt_old in by linking toe automagic test program
to -lcrypto and -lss. This fixes bacula "autodetecting" the OpenSSL version.

bump pkgnames
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2010/07/20 14:38:39 merdely Exp $
--- configure.orig	Tue Apr 27 21:58:29 2010
+++ configure	Tue Oct 12 21:31:24 2010
@@@@ -4267,7 +4267,7 @@@@ echo "${ECHO_T}no" >&6; }
d10 4
a13 4
    { { echo "$as_me:$LINENO: error: Unable to find C++ compiler" >&5
 echo "$as_me: error: Unable to find C++ compiler" >&2;}
    { (exit 1); exit 1; }; }
@@@@ -15929,7 +15929,7 @@@@ if test x$use_libtool != xno; then
d22 8
a29 11
@@@@ -15940,7 +15940,7 @@@@ else
    LIBTOOL_INSTALL_TARGET=""
    LIBTOOL_UNINSTALL_TARGET=""
    LIBTOOL_CLEAN_TARGET=""
-   QMAKE_LIBTOOL="# ${BUILD_DIR}/libtool"
+   QMAKE_LIBTOOL="# ${LIBTOOL}"
    FD_PLUGIN_DIR=""
    have_plugins=no
 fi
@@@@ -27280,7 +27280,7 @@@@ if test "${ac_cv_lib_ssl_EVP_PKEY_encrypt_old+set}" = 
   echo $ECHO_N "(cached) $ECHO_C" >&6
d31 10
a40 7
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lssl  $LIBS"
+LIBS="-lssl -lcrypto $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -43349,13 +43349,13 @@@@ _ACEOF
d44 6
a49 6
-{ echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6; }
+{ echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6; }
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d54 7
a60 7
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -43411,7 +43411,7 @@@@ fi
 { echo "$as_me:$LINENO: result: $ac_cv_lib_pthread_pthread_create" >&5
 echo "${ECHO_T}$ac_cv_lib_pthread_pthread_create" >&6; }
 if test $ac_cv_lib_pthread_pthread_create = yes; then
d65 12
a76 2
        { echo "$as_me:$LINENO: checking for pthread_create in -lpthreads" >&5
@@@@ -44158,6 +44158,7 @@@@ openbsd)
a83 39
@@@@ -44299,7 +44300,7 @@@@ if test "x${subsysdir}" = "x${sbindir}" ; then
    exit 1
 fi
 
-ac_config_files="$ac_config_files autoconf/Make.common Makefile manpages/Makefile scripts/startmysql scripts/stopmysql scripts/btraceback scripts/startit scripts/stopit scripts/bconsole scripts/gconsole scripts/bacula scripts/bacula-ctl-dir scripts/bacula-ctl-fd scripts/bacula-ctl-sd scripts/devel_bacula scripts/Makefile scripts/logrotate scripts/bacula.desktop.gnome1 scripts/bacula.desktop.gnome2 scripts/bacula.desktop.gnome1.consolehelper scripts/bacula.desktop.gnome2.consolehelper scripts/bacula.desktop.gnome1.xsu scripts/bacula.desktop.gnome2.xsu scripts/bgnome-console.console_apps scripts/mtx-changer scripts/disk-changer scripts/dvd-handler scripts/dvd-simulator scripts/bacula-tray-monitor.desktop scripts/logwatch/Makefile scripts/logwatch/logfile.bacula.conf scripts/wxconsole.console_apps scripts/wxconsole.desktop.consolehelper scripts/wxconsole.desktop.xsu scripts/bat.desktop scripts/bat.desktop.xsu scripts/bat.desktop.consolehelper scripts/bat.console_apps src/Makefile src/host.h src/console/Makefile src/console/bconsole.conf src/qt-console/bat.conf src/qt-console/bat.pro src/qt-console/bat.pro.mingw32 src/qt-console/install_conf_file src/wx-console/Makefile src/wx-console/bwx-console.conf src/tray-monitor/Makefile src/tray-monitor/tray-monitor.conf src/dird/Makefile src/dird/bacula-dir.conf src/lib/Makefile src/stored/Makefile src/stored/bacula-sd.conf src/filed/Makefile src/filed/bacula-fd.conf src/cats/Makefile src/cats/make_catalog_backup.pl src/cats/make_catalog_backup src/cats/delete_catalog_backup src/cats/create_postgresql_database src/cats/update_postgresql_tables src/cats/make_postgresql_tables src/cats/grant_postgresql_privileges src/cats/drop_postgresql_tables src/cats/drop_postgresql_database src/cats/create_mysql_database src/cats/update_mysql_tables src/cats/make_mysql_tables src/cats/grant_mysql_privileges src/cats/drop_mysql_tables src/cats/drop_mysql_database src/cats/create_sqlite3_database src/cats/update_sqlite3_tables src/cats/make_sqlite3_tables src/cats/grant_sqlite3_privileges src/cats/drop_sqlite3_tables src/cats/drop_sqlite3_database src/cats/create_ingres_database src/cats/update_ingres_tables src/cats/make_ingres_tables src/cats/grant_ingres_privileges src/cats/drop_ingres_tables src/cats/drop_ingres_database src/cats/sqlite src/cats/mysql src/cats/create_bdb_database src/cats/update_bdb_tables src/cats/make_bdb_tables src/cats/grant_bdb_privileges src/cats/drop_bdb_tables src/cats/drop_bdb_database src/cats/create_bacula_database src/cats/update_bacula_tables src/cats/grant_bacula_privileges src/cats/make_bacula_tables src/cats/drop_bacula_tables src/cats/drop_bacula_database src/findlib/Makefile src/tools/Makefile src/plugins/fd/Makefile src/plugins/sd/Makefile src/plugins/dir/Makefile src/win32/Makefile.inc po/Makefile.in updatedb/update_mysql_tables_9_to_10 updatedb/update_sqlite3_tables_9_to_10 updatedb/update_postgresql_tables_9_to_10 updatedb/update_mysql_tables_10_to_11 updatedb/update_sqlite3_tables_10_to_11 updatedb/update_postgresql_tables_10_to_11 examples/nagios/check_bacula/Makefile $PFILES"
+ac_config_files="$ac_config_files autoconf/Make.common Makefile manpages/Makefile scripts/startmysql scripts/stopmysql scripts/btraceback scripts/startit scripts/stopit scripts/bconsole scripts/gconsole scripts/bacula scripts/bacula-ctl-dir scripts/bacula-ctl-fd scripts/bacula-ctl-sd scripts/devel_bacula scripts/Makefile scripts/logrotate scripts/bacula.desktop.gnome1 scripts/bacula.desktop.gnome2 scripts/bacula.desktop.gnome1.consolehelper scripts/bacula.desktop.gnome2.consolehelper scripts/bacula.desktop.gnome1.xsu scripts/bacula.desktop.gnome2.xsu scripts/bgnome-console.console_apps scripts/mtx-changer scripts/disk-changer scripts/dvd-handler scripts/dvd-simulator scripts/bacula-tray-monitor.desktop scripts/logwatch/Makefile scripts/logwatch/logfile.bacula.conf scripts/wxconsole.console_apps scripts/wxconsole.desktop.consolehelper scripts/wxconsole.desktop.xsu scripts/bat.desktop scripts/bat.desktop.xsu scripts/bat.desktop.consolehelper scripts/bat.console_apps src/Makefile src/host.h src/console/Makefile src/console/bconsole.conf src/qt-console/bat.conf src/qt-console/bat.pro src/qt-console/bat.pro.mingw32 src/qt-console/install_conf_file src/wx-console/Makefile src/wx-console/bwx-console.conf src/tray-monitor/Makefile src/tray-monitor/tray-monitor.conf src/dird/Makefile src/dird/bacula-dir.conf src/lib/Makefile src/stored/Makefile src/stored/bacula-sd.conf src/filed/Makefile src/filed/bacula-fd.conf src/cats/Makefile src/cats/make_catalog_backup.pl src/cats/make_catalog_backup src/cats/delete_catalog_backup src/cats/create_postgresql_database src/cats/update_postgresql_tables src/cats/make_postgresql_tables src/cats/grant_postgresql_privileges src/cats/drop_postgresql_tables src/cats/drop_postgresql_database src/cats/create_mysql_database src/cats/update_mysql_tables src/cats/make_mysql_tables src/cats/grant_mysql_privileges src/cats/drop_mysql_tables src/cats/drop_mysql_database src/cats/create_sqlite3_database src/cats/update_sqlite3_tables src/cats/make_sqlite3_tables src/cats/grant_sqlite3_privileges src/cats/drop_sqlite3_tables src/cats/drop_sqlite3_database src/cats/create_ingres_database src/cats/update_ingres_tables src/cats/make_ingres_tables src/cats/grant_ingres_privileges src/cats/drop_ingres_tables src/cats/drop_ingres_database src/cats/sqlite src/cats/mysql src/cats/create_bdb_database src/cats/update_bdb_tables src/cats/make_bdb_tables src/cats/grant_bdb_privileges src/cats/drop_bdb_tables src/cats/drop_bdb_database src/cats/create_bacula_database src/cats/update_bacula_tables src/cats/grant_bacula_privileges src/cats/make_bacula_tables src/cats/drop_bacula_tables src/cats/drop_bacula_database src/findlib/Makefile src/tools/Makefile src/plugins/fd/Makefile src/plugins/sd/Makefile src/plugins/dir/Makefile src/win32/Makefile.inc po/Makefile.in updatedb/update_mysql_tables_9_to_10 updatedb/update_sqlite_tables_9_to_10 updatedb/update_sqlite3_tables_9_to_10 updatedb/update_postgresql_tables_9_to_10 updatedb/update_mysql_tables_10_to_11 updatedb/update_sqlite_tables_10_to_11 updatedb/update_sqlite3_tables_10_to_11 updatedb/update_postgresql_tables_10_to_11 examples/nagios/check_bacula/Makefile $PFILES"
 
 ac_config_commands="$ac_config_commands default"
 
@@@@ -45332,9 +45333,11 @@@@ do
     "src/win32/Makefile.inc") CONFIG_FILES="$CONFIG_FILES src/win32/Makefile.inc" ;;
     "po/Makefile.in") CONFIG_FILES="$CONFIG_FILES po/Makefile.in" ;;
     "updatedb/update_mysql_tables_9_to_10") CONFIG_FILES="$CONFIG_FILES updatedb/update_mysql_tables_9_to_10" ;;
+    "updatedb/update_sqlite_tables_9_to_10") CONFIG_FILES="$CONFIG_FILES updatedb/update_sqlite_tables_9_to_10" ;;
     "updatedb/update_sqlite3_tables_9_to_10") CONFIG_FILES="$CONFIG_FILES updatedb/update_sqlite3_tables_9_to_10" ;;
     "updatedb/update_postgresql_tables_9_to_10") CONFIG_FILES="$CONFIG_FILES updatedb/update_postgresql_tables_9_to_10" ;;
     "updatedb/update_mysql_tables_10_to_11") CONFIG_FILES="$CONFIG_FILES updatedb/update_mysql_tables_10_to_11" ;;
+    "updatedb/update_sqlite_tables_10_to_11") CONFIG_FILES="$CONFIG_FILES updatedb/update_sqlite_tables_10_to_11" ;;
     "updatedb/update_sqlite3_tables_10_to_11") CONFIG_FILES="$CONFIG_FILES updatedb/update_sqlite3_tables_10_to_11" ;;
     "updatedb/update_postgresql_tables_10_to_11") CONFIG_FILES="$CONFIG_FILES updatedb/update_postgresql_tables_10_to_11" ;;
     "examples/nagios/check_bacula/Makefile") CONFIG_FILES="$CONFIG_FILES examples/nagios/check_bacula/Makefile" ;;
@@@@ -47193,7 +47196,7 @@@@ echo "$as_me: error: Could not find qmake $PATH. Check
    { (exit 1); exit 1; }; }
    fi
 
-   QMAKEBIN="qmake"
+   QMAKEBIN=${QMAKEBIN4}
    cd src/qt-console
    echo "Creating bat Makefile"
    touch bat
@@@@ -47221,7 +47224,7 @@@@ cd ..
 
 c=updatedb
 chmod 755 $c/update_mysql_tables_10_to_11   $c/update_sqlite3_tables_10_to_11
-chmod 755 $c/update_postgresql_tables_10_to_11
+chmod 755 $c/update_sqlite_tables_10_to_11 $c/update_postgresql_tables_10_to_11
 
 c=src/cats
 
@


1.6
log
@Update bacula to 5.0.2.

Fixes the weird install issues with the bat binary

New features can be found here:
http://www.bacula.org/5.0.x-manuals/en/main/main/New_Features_in_5_0_0.html

Thanks to sthen for help with the new wantlib/lib_depends stuff,
removing the sqlite flavor, ...

Thanks to giovanni for pointing out a ${TRUEPREFIX} -> /usr/local that
crept into one of my patch files.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.5 2009/10/02 02:34:05 merdely Exp $
--- configure.orig	Tue Apr 27 15:58:29 2010
+++ configure	Mon Jul 19 15:43:39 2010
d31 9
@


1.5
log
@Update bacula to 3.0.2:
	* Shared objects
	* Virtual backups
	* Duplicate Job Control
	* TLS Authentication
	* Exclude Dir Containing = <filename-string>
	* Plugins including Exchange 2003/2007 Plugin
	* libdbi backend abstraction
	* Bat enhancements

Upgrading from 2.4.4 to 3.0.2 requires updating the database using
/usr/local/libexec/bacula/update_bacula_database.  Database upgrades
from older databases can be done with other scripts in
/usr/local/libexec/bacula/updatedb.  You can determine your database
version in mysql and postgresql with 'select * from version'.

As sthen@@ reminded me and the documentation points out, when upgrading
between major versions (2.x.x -> 3.x.x), you should upgrade all of your
components at the same time due to protocol changes.

a *lot* of help from and ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.4 2009/01/12 21:17:07 sthen Exp $
--- configure.orig	Fri Jul 10 15:12:39 2009
+++ configure	Mon Sep 21 20:59:33 2009
@@@@ -4239,7 +4239,7 @@@@ echo "${ECHO_T}no" >&6; }
d13 19
a31 1
@@@@ -42224,13 +42224,13 @@@@ _ACEOF
d48 1
a48 1
@@@@ -42286,7 +42286,7 @@@@ fi
d57 1
a57 1
@@@@ -42715,6 +42715,7 @@@@ openbsd)
d64 24
a87 7
       ping -c 1 $hostname 2>&1 1>/dev/null
@@@@ -45729,7 +45730,7 @@@@ echo "$as_me: error: Could not find qmake or qmake-qt4
    QMAKEBIN="qmake"
 
    if test "x$QMAKEQT4" != "xnone"; then
-       QMAKEBIN=qmake-qt4
+       QMAKEBIN=${QMAKEQT4}
d90 2
d93 11
@


1.4
log
@"important bug fix" update to 2.4.4
ok merdely@@ (maintainer).
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2008/10/19 03:44:42 merdely Exp $
--- configure.orig	Sun Dec 28 10:41:33 2008
+++ configure	Tue Jan  6 12:45:22 2009
@@@@ -4008,7 +4008,7 @@@@ echo "${ECHO_T}no" >&6; }
d13 31
a43 5
@@@@ -29981,6 +29981,7 @@@@ openbsd)
 	    platforms/openbsd/bacula-fd \
 	    platforms/openbsd/bacula-sd \
 	    platforms/openbsd/bacula-dir"
+	largefile_support="yes"
d46 3
a48 8
 	if test -f /etc/whitebox-release ; then
@@@@ -31765,7 +31766,7 @@@@ if test "${support_bat}" = "yes" ; then
   QMAKEBIN="qmake"
 
   if test "x$QMAKEQT4" != "xnone"; then
-    QMAKEBIN=qmake-qt4
+    QMAKEBIN=${QMAKEQT4}
   fi
d50 4
d55 1
@


1.3
log
@Update to bacula 2.4.3.
Add no_server PSEUDO_FLAVOR
Reorganize the Makefile some.
Remove dependency on qwt.
Set FULLPKGPATH for -main and -bat to remove backend dependencies
   (found by and solution from naddy@@)
Use SUBST_CMD.

ok jdixon@@, okan@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2008/02/07 02:53:35 merdely Exp $
--- configure.orig	Thu Jun 19 15:44:34 2008
+++ configure	Tue Jul  1 19:28:12 2008
@@@@ -4014,7 +4014,7 @@@@ echo "${ECHO_T}no" >&6; }
d13 1
a13 1
@@@@ -29982,6 +29982,7 @@@@ openbsd)
d21 1
a21 1
@@@@ -31766,7 +31767,7 @@@@ if test "${support_bat}" = "yes" ; then
@


1.2
log
@Update bacula to 2.2.8.

Bacula changelog:
http://bacula.svn.sourceforge.net/viewvc/bacula/branches/Branch-2.2/bacula/ChangeLog?revision=6309&view=markup

Major port change in this version:
-main subpackage is now bacula-client
-server subpackage remains bacula-server
-bat subpackage is new bacula admin tool
-client subpackage goes away.

If the old -main subpackage was installed, the upgrade path is to
install both bacula-client and bacula-server.

Lots of input and assistance from sthen and okan.
ok okan;  "if it works for you, go for it" sthen
@
text
@d1 4
a4 5
$OpenBSD$
--- configure.orig	Fri Nov 30 16:32:48 2007
+++ configure	Sun Jan 27 12:46:08 2008
@@@@ -3262,7 +3262,7 @@@@ else
 echo "${ECHO_T}no" >&6
d7 1
d13 1
a13 1
@@@@ -30401,6 +30401,7 @@@@ openbsd)
d21 1
a21 1
@@@@ -32221,7 +32222,7 @@@@ if test "${support_bat}" = "yes" ; then
@


1.1
log
@Initial revision
@
text
@d2 4
a5 3
--- configure.orig	Fri Jan 26 20:04:17 2007
+++ configure	Fri Jan 26 20:05:12 2007
@@@@ -4151,7 +4151,7 @@@@ echo "${ECHO_T}no" >&6; }
a7 1
 
d13 17
@


1.1.1.1
log
@import of bacula 2.0.3;

Bacula is a set of computer programs that permit you (or the system
administrator) to manage backup, recovery, and verification of
computer data across a network of computers of different kinds.
In technical terms, it is a network Client/Server based backup program.
Bacula is relatively easy to use and efficient, while offering many
advanced storage management features that make it easy to find and
recover lost or damaged files. Due to its modular design, Bacula is
scalable from small single computer systems to systems consisting of
hundreds of computers located over a large network.

from Mike Erdely <mike@@erdelynet.com>
@
text
@@
