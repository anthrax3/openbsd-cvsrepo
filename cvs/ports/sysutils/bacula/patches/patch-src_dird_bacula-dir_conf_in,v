head	1.12;
access;
symbols
	OPENBSD_6_2:1.12.0.4
	OPENBSD_6_2_BASE:1.12
	OPENBSD_6_1:1.12.0.2
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.11.0.4
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.10.0.6
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.2
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.9.0.2
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.7.0.10
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.8
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.7.0.6
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.7.0.4
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.6.0.6
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.4
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	robert20070720:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2017.02.16.17.16.19;	author sthen;	state Exp;
branches;
next	1.11;
commitid	VxbCRreBOHTm51p6;

1.11
date	2016.01.19.22.51.09;	author sthen;	state Exp;
branches;
next	1.10;
commitid	14u3fTpCWO7OUNMR;

1.10
date	2014.08.14.06.52.59;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	SWEgo0VEo1kHfm7f;

1.9
date	2014.06.13.15.31.21;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	XFQpO5fiedhGLmpj;

1.8
date	2014.04.19.09.44.11;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.11.17.23.45.56;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.07.20.14.38.39;	author merdely;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.02.02.34.05;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.19.03.44.42;	author merdely;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.07.02.53.35;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.09.15.39.17;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.20.11.02.14;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.20.11.02.14;	author robert;	state Exp;
branches;
next	;


desc
@@


1.12
log
@update to bacula-7.4.5, patched to avoid an FD segfault.
@
text
@$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.11 2016/01/19 22:51:09 sthen Exp $
--- src/dird/bacula-dir.conf.in.orig	Tue Feb  7 14:07:45 2017
+++ src/dird/bacula-dir.conf.in	Wed Feb  8 12:15:33 2017
@@@@ -185,8 +185,8 @@@@ Client {
 #  You should change Name, Address, and Password before using
 #
 #Client {
-#  Name = @@basename@@2-fd
-#  Address = @@hostname@@2
+#  Name = client2-fd
+#  Address = client2.domain.tld
 #  FDPort = @@fd_port@@
 #  Catalog = MyCatalog
 #  Password = "@@fd_password@@2"        # password for FileDaemon 2
@


1.11
log
@update to Bacula 7.4.0, "this version consists of more backports from
Bacula Enterprise 8.4 as well quite a few bug fixes (28) as a number of
new features".

Database schema has not changed and older FDs should remain compatible
with this version.

http://www.bacula.org/7.4.x-manuals/en/main/New_Features_in_7_4_0.html
@
text
@d1 4
a4 4
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.10 2014/08/14 06:52:59 ajacoutot Exp $
--- src/dird/bacula-dir.conf.in.orig	Fri Jan 15 16:57:18 2016
+++ src/dird/bacula-dir.conf.in	Mon Jan 18 13:07:24 2016
@@@@ -183,8 +183,8 @@@@ Client {
@


1.10
log
@Update to bacula-client-7.0.5.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.9 2014/06/13 15:31:21 ajacoutot Exp $
--- src/dird/bacula-dir.conf.in.orig	Tue Jul 29 18:31:22 2014
+++ src/dird/bacula-dir.conf.in	Thu Jul 31 16:12:28 2014
@@@@ -180,8 +180,8 @@@@ Client {
@


1.9
log
@Fix some default values.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.8 2014/04/19 09:44:11 ajacoutot Exp $
--- src/dird/bacula-dir.conf.in.orig	Sat Mar 29 09:00:03 2014
+++ src/dird/bacula-dir.conf.in	Fri Apr  4 22:12:13 2014
@@@@ -180,8 +181,8 @@@@ Client {
@


1.8
log
@Major update to Bacula 7.0.2.
Some info at:
http://blog.bacula.org/p710/
http://blog.bacula.org/release-7-0-2/

Now builds with our libtool(1).

While there's a huge amount of changes, existing setups "should" just
work without any modification.

tested by sthen@@ and myself
ok sthen@@, my new co-maintainer :-)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.7 2011/11/17 23:45:56 ajacoutot Exp $
a3 17
@@@@ -14,6 +14,7 @@@@
 
 Director {                            # define myself
   Name = @@basename@@-dir
+  DIRaddress = 127.0.0.1
   DIRport = @@dir_port@@                # where we listen for UA connections
   QueryFile = "@@scriptdir@@/query.sql"
   WorkingDirectory = "@@working_dir@@"
@@@@ -166,7 +167,7 @@@@ FileSet {
 # Client (File Services) to backup
 Client {
   Name = @@basename@@-fd
-  Address = @@hostname@@
+  Address = 127.0.0.1
   FDPort = @@fd_port@@
   Catalog = MyCatalog
   Password = "@@fd_password@@"          # password for FileDaemon
d11 1
a11 1
+#  Address = client2.my.domain
a14 27
@@@@ -195,7 +196,7 @@@@ Client {
 Storage {
   Name = File1
 # Do not use "localhost" here
-  Address = @@hostname@@                # N.B. Use a fully qualified name here
+  Address = storage.host.name         # N.B. Use a fully qualified name here
   SDPort = @@sd_port@@
   Password = "@@sd_password@@"
   Device = FileChgr1
@@@@ -208,7 +209,7 @@@@ Storage {
 Storage {
   Name = File2
 # Do not use "localhost" here
-  Address = @@hostname@@                # N.B. Use a fully qualified name here
+  Address = storage.host.name         # N.B. Use a fully qualified name here
   SDPort = @@sd_port@@
   Password = "@@sd_password@@"
   Device = FileChgr2
@@@@ -220,7 +221,7 @@@@ Storage {
 #Storage {
 #  Name = LTO-4
 #  Do not use "localhost" here
-#  Address = @@hostname@@               # N.B. Use a fully qualified name here
+#  Address = storage.host.name        # N.B. Use a fully qualified name here
 #  SDPort = @@sd_port@@
 #  Password = "@@sd_password@@"         # password for Storage daemon
 #  Device = LTO-4                     # must be same as Device in Storage daemon
@


1.7
log
@Major update to bacula 5.2.1.

As usual with major version bump, do not forget to run the upgrade
script corresponding to your DB.
A new README is provided in the package.

Tested by sthen@@ and myself.
"Don't wait on me" merdely@@ (maintainer)

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.6 2010/07/20 14:38:39 merdely Exp $
--- src/dird/bacula-dir.conf.in.orig	Sun Oct 30 13:03:42 2011
+++ src/dird/bacula-dir.conf.in	Tue Nov 15 20:25:39 2011
d12 1
a12 12
@@@@ -76,8 +77,8 @@@@ Job {
 Job {
   Name = "RestoreFiles"
   Type = Restore
-  Client=@@basename@@-fd                 
-  FileSet="Full Set"                  
+  Client = @@basename@@-fd                 
+  FileSet = "Full Set"                  
   Storage = File                      
   Pool = Default
   Messages = Standard
@@@@ -154,7 +155,7 @@@@ FileSet {
d21 1
a21 1
@@@@ -168,8 +169,8 @@@@ Client {
d25 1
a25 1
-#  Name = @@basename@@2-fd                
d27 1
a27 1
+#  Name = client2-fd                
d31 2
a32 2
 #  Password = "@@fd_password@@2"         # password for FileDaemon 2
@@@@ -183,7 +184,7 @@@@ Client {
d34 2
a35 2
   Name = File
 # Do not use "localhost" here    
d37 1
a37 1
+  Address = 127.0.0.1                # N.B. Use a fully qualified name here
d40 1
a40 10
   Device = FileStorage
@@@@ -196,7 +197,7 @@@@ Storage {
 #Storage {
 #  Name = DDS-4    
 #  Do not use "localhost" here
-#  Address = @@hostname@@                # N.B. Use a fully qualified name here
+#  Address = 127.0.0.1                 # N.B. Use a fully qualified name here
 #  SDPort = @@sd_port@@
 #  Password = "@@sd_password@@"          # password for Storage daemon
 #  Device = DDS-4                      # must be same as Device in Storage daemon
d42 9
d52 1
a52 10
 #  Name = "8mmDrive"
 #  Do not use "localhost" here
-#  Address = @@hostname@@                # N.B. Use a fully qualified name here
+#  Address = 127.0.0.1                 # N.B. Use a fully qualified name here
 #  SDPort = @@sd_port@@
 #  Password = "@@sd_password@@"
 #  Device = "Exabyte 8mm"
@@@@ -219,7 +220,7 @@@@ Storage {
 #Storage {
 #  Name = "DVD"
d54 2
a55 2
-#  Address = @@hostname@@                # N.B. Use a fully qualified name here
+#  Address = 127.0.0.1                 # N.B. Use a fully qualified name here
d57 2
a58 2
 #  Password = "@@sd_password@@"
 #  Device = "DVD Writer"
@


1.6
log
@Update bacula to 5.0.2.

Fixes the weird install issues with the bat binary

New features can be found here:
http://www.bacula.org/5.0.x-manuals/en/main/main/New_Features_in_5_0_0.html

Thanks to sthen for help with the new wantlib/lib_depends stuff,
removing the sqlite flavor, ...

Thanks to giovanni for pointing out a ${TRUEPREFIX} -> /usr/local that
crept into one of my patch files.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.5 2009/10/02 02:34:05 merdely Exp $
--- src/dird/bacula-dir.conf.in.orig	Tue Apr 27 15:58:29 2010
+++ src/dird/bacula-dir.conf.in	Thu Jun 24 09:37:47 2010
d43 9
@


1.5
log
@Update bacula to 3.0.2:
	* Shared objects
	* Virtual backups
	* Duplicate Job Control
	* TLS Authentication
	* Exclude Dir Containing = <filename-string>
	* Plugins including Exchange 2003/2007 Plugin
	* libdbi backend abstraction
	* Bat enhancements

Upgrading from 2.4.4 to 3.0.2 requires updating the database using
/usr/local/libexec/bacula/update_bacula_database.  Database upgrades
from older databases can be done with other scripts in
/usr/local/libexec/bacula/updatedb.  You can determine your database
version in mysql and postgresql with 'select * from version'.

As sthen@@ reminded me and the documentation points out, when upgrading
between major versions (2.x.x -> 3.x.x), you should upgrade all of your
components at the same time due to protocol changes.

a *lot* of help from and ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.4 2008/10/19 03:44:42 merdely Exp $
--- src/dird/bacula-dir.conf.in.orig	Wed Jul 15 18:05:40 2009
+++ src/dird/bacula-dir.conf.in	Tue Sep  1 22:38:31 2009
d12 1
a12 1
@@@@ -79,8 +80,8 @@@@ Job {
d23 1
a23 1
@@@@ -157,7 +158,7 @@@@ FileSet {
d32 1
a32 1
@@@@ -171,8 +172,8 @@@@ Client {
d43 1
a43 1
@@@@ -199,7 +200,7 @@@@ Storage {
d52 1
a52 1
@@@@ -211,7 +212,7 @@@@ Storage {
d61 1
a61 1
@@@@ -222,7 +223,7 @@@@ Storage {
@


1.4
log
@Update to bacula 2.4.3.
Add no_server PSEUDO_FLAVOR
Reorganize the Makefile some.
Remove dependency on qwt.
Set FULLPKGPATH for -main and -bat to remove backend dependencies
   (found by and solution from naddy@@)
Use SUBST_CMD.

ok jdixon@@, okan@@
@
text
@d1 4
a4 5
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.3 2008/02/07 02:53:35 merdely Exp $
--- src/dird/bacula-dir.conf.in.orig	Thu Jun 19 15:44:34 2008
+++ src/dird/bacula-dir.conf.in	Tue Jul  1 19:28:12 2008
@@@@ -13,7 +13,8 @@@@
 #
d7 1
a7 2
-  Name = @@hostname@@-dir
+  Name = bacula-dir
a11 18
@@@@ -27,7 +28,7 @@@@ JobDefs {
   Name = "DefaultJob"
   Type = Backup
   Level = Incremental
-  Client = @@hostname@@-fd 
+  Client = bacula-fd 
   FileSet = "Full Set"
   Schedule = "WeeklyCycle"
   Storage = File
@@@@ -48,7 +49,7 @@@@ Job {
 
 #Job {
 #  Name = "Client2"
-#  Client = @@hostname@@2-fd
+#  Client = client2-fd
 #  JobDefs = "DefaultJob"
 #  Write Bootstrap = "@@working_dir@@/Client2.bsr"
 #}
d16 1
a16 1
-  Client=@@hostname@@-fd                 
d18 1
a18 1
+  Client = bacula-fd                 
d23 1
a23 15
@@@@ -105,11 +106,7 @@@@ FileSet {
 #    if you have other partitons such as /usr or /home
 #    you will probably want to add them too.
 #
-#  By default this is defined to point to the Bacula build
-#    directory to give a reasonable FileSet to backup to
-#    disk storage during initial testing.
-#
-    File = @@BUILD_DIR@@
+    File = /
   }
 
 #
@@@@ -154,8 +151,8 @@@@ FileSet {
 
d26 1
a26 1
-  Name = @@hostname@@-fd
a27 1
+  Name = bacula-fd
d32 1
a32 1
@@@@ -169,8 +166,8 @@@@ Client {
d36 1
a36 1
-#  Name = @@hostname@@2-fd                
d43 1
a43 10
@@@@ -184,7 +181,7 @@@@ Client {
 Storage {
   Name = File
 # Do not use "localhost" here    
-  Address = @@hostname@@                # N.B. Use a fully qualified name here
+  Address = 127.0.0.1                # N.B. Use a fully qualified name here
   SDPort = @@sd_port@@
   Password = "@@sd_password@@"
   Device = FileStorage
@@@@ -197,7 +194,7 @@@@ Storage {
d48 1
a48 1
+#  Address = 127.0.0.1                # N.B. Use a fully qualified name here
d52 1
a52 1
@@@@ -209,7 +206,7 @@@@ Storage {
d57 1
a57 1
+#  Address = 127.0.0.1                # N.B. Use a fully qualified name here
d61 1
a61 1
@@@@ -220,7 +217,7 @@@@ Storage {
d66 1
a66 1
+#  Address = 127.0.0.1                # N.B. Use a fully qualified name here
a69 9
@@@@ -296,7 +293,7 @@@@ Pool {
 # Restricted console used by tray-monitor to get the status of the director
 #
 Console {
-  Name = @@hostname@@-mon
+  Name = bacula-mon
   Password = "@@mon_dir_password@@"
   CommandACL = status, .status
 }
@


1.3
log
@Update bacula to 2.2.8.

Bacula changelog:
http://bacula.svn.sourceforge.net/viewvc/bacula/branches/Branch-2.2/bacula/ChangeLog?revision=6309&view=markup

Major port change in this version:
-main subpackage is now bacula-client
-server subpackage remains bacula-server
-bat subpackage is new bacula admin tool
-client subpackage goes away.

If the old -main subpackage was installed, the upgrade path is to
install both bacula-client and bacula-server.

Lots of input and assistance from sthen and okan.
ok okan;  "if it works for you, go for it" sthen
@
text
@d1 3
a3 3
$OpenBSD: patch-src_dird_bacula-dir_conf_in,v 1.1.1.1 2007/07/20 11:02:14 robert Exp $
--- src/dird/bacula-dir.conf.in.orig	Wed Oct  3 12:22:07 2007
+++ src/dird/bacula-dir.conf.in	Mon Oct 22 11:55:00 2007
d32 1
a32 1
@@@@ -75,8 +76,8 @@@@ Job {
d43 1
a43 1
@@@@ -101,11 +102,7 @@@@ FileSet {
d56 1
a56 1
@@@@ -150,8 +147,8 @@@@ FileSet {
d67 1
a67 1
@@@@ -165,8 +162,8 @@@@ Client {
d78 1
a78 1
@@@@ -180,7 +177,7 @@@@ Client {
d87 1
a87 1
@@@@ -193,7 +190,7 @@@@ Storage {
d96 1
a96 1
@@@@ -205,7 +202,7 @@@@ Storage {
d105 1
a105 1
@@@@ -216,7 +213,7 @@@@ Storage {
d114 1
a114 1
@@@@ -292,7 +289,7 @@@@ Pool {
@


1.2
log
@Set the default FileSet in bacula-dir.conf to something that exists (/).
Found by Jacob Yocom-Piatt
"looks ok" steven@@
@
text
@d2 2
a3 2
--- src/dird/bacula-dir.conf.in.orig	Sun Aug 20 09:27:55 2006
+++ src/dird/bacula-dir.conf.in	Mon Oct  8 20:37:51 2007
d114 1
a114 1
@@@@ -286,7 +283,7 @@@@ Pool {
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- src/dird/bacula-dir.conf.in.orig	Thu Jul 12 11:22:02 2007
+++ src/dird/bacula-dir.conf.in	Thu Jul 12 11:24:22 2007
d43 14
a56 1
@@@@ -150,8 +151,8 @@@@ FileSet {
d67 1
a67 1
@@@@ -165,8 +166,8 @@@@ Client {
d78 1
a78 1
@@@@ -180,7 +181,7 @@@@ Client {
d87 1
a87 1
@@@@ -193,7 +194,7 @@@@ Storage {
d96 1
a96 1
@@@@ -205,7 +206,7 @@@@ Storage {
d105 1
a105 1
@@@@ -216,7 +217,7 @@@@ Storage {
d114 1
a114 1
@@@@ -286,7 +287,7 @@@@ Pool {
@


1.1.1.1
log
@import of bacula 2.0.3;

Bacula is a set of computer programs that permit you (or the system
administrator) to manage backup, recovery, and verification of
computer data across a network of computers of different kinds.
In technical terms, it is a network Client/Server based backup program.
Bacula is relatively easy to use and efficient, while offering many
advanced storage management features that make it easy to find and
recover lost or damaged files. Due to its modular design, Bacula is
scalable from small single computer systems to systems consisting of
hundreds of computers located over a large network.

from Mike Erdely <mike@@erdelynet.com>
@
text
@@
