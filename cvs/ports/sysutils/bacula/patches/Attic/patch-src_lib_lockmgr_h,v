head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2014.05.21.10.12.34;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2014.04.19.09.44.11;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to bacula 7.0.3.

ok sthen@@
@
text
@$OpenBSD: patch-src_lib_lockmgr_h,v 1.1 2014/04/19 09:44:11 ajacoutot Exp $

From 11f7bbb53348ebeaa74ef384bb654640c905db89 Mon Sep 17 00:00:00 2001
From: Eric Bollengier <eric@@baculasystems.com>
Date: Fri, 11 Apr 2014 07:23:31 +0000
Subject: Fix #2047 about bthread_cond_wait_p not declared

--- src/lib/lockmgr.h.orig	Wed Apr  2 19:32:30 2014
+++ src/lib/lockmgr.h	Sat Apr 19 11:27:55 2014
@@@@ -230,6 +230,7 @@@@ int bthread_kill(pthread_t thread, int sig,
 # define BTHREAD_MUTEX_NO_PRIORITY      PTHREAD_MUTEX_INITIALIZER
 # define BTHREAD_MUTEX_INITIALIZER      PTHREAD_MUTEX_INITIALIZER
 # define lmgr_mutex_is_locked(m)        (1)
+# define bthread_cond_wait_p(w, x, y, z) pthread_cond_wait(w,x)
 
 #endif  /* _USE_LOCKMGR */
 
@


1.1
log
@Major update to Bacula 7.0.2.
Some info at:
http://blog.bacula.org/p710/
http://blog.bacula.org/release-7-0-2/

Now builds with our libtool(1).

While there's a huge amount of changes, existing setups "should" just
work without any modification.

tested by sthen@@ and myself
ok sthen@@, my new co-maintainer :-)
@
text
@d1 1
a1 1
$OpenBSD$
@

