head	1.3;
access;
symbols
	jasper_20171707:1.1.1.1 jasper:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2017.08.09.12.40.24;	author jasper;	state Exp;
branches;
next	1.2;
commitid	qtkqC3BeTQUbprN0;

1.2
date	2017.08.09.12.33.51;	author jasper;	state Exp;
branches;
next	1.1;
commitid	hSaFjEerkdOLRiEB;

1.1
date	2017.07.17.18.22.33;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	uRHxXOiL0nVM7EWI;

1.1.1.1
date	2017.07.17.18.22.33;	author jasper;	state Exp;
branches;
next	;
commitid	uRHxXOiL0nVM7EWI;


desc
@@


1.3
log
@this actually needs an RDEP on borg itself
@
text
@# $OpenBSD: Makefile,v 1.2 2017/08/09 12:33:51 jasper Exp $

COMMENT =		wrapper for Borg to create and prune backups

MODPY_EGG_VERSION =	1.1.6
DISTNAME =		borgmatic-${MODPY_EGG_VERSION}
REVISION =		0

MAINTAINER =		Jasper Lievisse Adriaanse <jasper@@openbsd.org>

HOMEPAGE =		https://torsion.org/borgmatic/

CATEGORIES =		sysutils

# GPLv3
PERMIT_PACKAGE_CDROM =	Yes

MODULES =		lang/python
MODPY_PI =		Yes
MODPY_SETUPTOOLS =	Yes
MODPY_VERSION =		${MODPY_DEFAULT_VERSION_3}

RUN_DEPENDS =		devel/py-docopt${MODPY_FLAVOR} \
			sysutils/borgbackup \
			textproc/py-pykwalify${MODPY_FLAVOR} \
			textproc/py-ruamel.yaml${MODPY_FLAVOR}
TEST_DEPENDS =		devel/py-flexmock${MODPY_FLAVOR} \
			devel/py-test${MODPY_FLAVOR}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/borgmatic/
	${INSTALL_DATA} ${FILESDIR}/config.yaml.dist \
		${PREFIX}/share/examples/borgmatic/

.include <bsd.port.mk>
@


1.2
log
@update to borgmatic-1.1.6

Note the configuration changed from INI to YAML:
https://github.com/witten/borgmatic#upgrading-from-borgmatic-10x
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2017/07/17 18:22:33 jasper Exp $
d7 1
d24 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.3
d22 3
d30 1
a30 1
	${INSTALL_DATA} ${FILESDIR}/config.dist \
@


1.1.1.1
log
@import borgmatic-1.0.3

borgmatic is a simple Python wrapper script for the Borg backup software
that initiates a backup, prunes any old backups according to a retention
policy, and validates backups for consistency. The script supports
specifying your settings in a declarative configuration file rather than
having to put them all on the command-line, and handles common errors.

ok aja@@
@
text
@@
