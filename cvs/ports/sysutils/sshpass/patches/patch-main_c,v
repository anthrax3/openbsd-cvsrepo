head     1.1;
branch   1.1.1;
access   ;
symbols  jca_20170417:1.1.1.1 jca:1.1.1;
locks    ; strict;
comment  @# @;


1.1
date     2017.04.17.01.14.09;  author jca;  state Exp;
branches 1.1.1.1;
next     ;
commitid        Eix0lArxRR4L8Ia4;

1.1.1.1
date     2017.04.17.01.14.09;  author jca;  state Exp;
branches ;
next     ;
commitid        Eix0lArxRR4L8Ia4;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$

On *BSD an open(2) call on a terminal will never make it the controlling
terminal.

--- main.c.orig	Thu Jun 30 21:23:33 2016
+++ main.c	Mon Apr 10 14:04:10 2017
@@@@ -280,6 +280,11 @@@@ int runprogram( int argc, char *argv[] )
 	setsid();
         // This line makes the ptty our controlling tty. We do not otherwise need it open
         slavept=open(name, O_RDWR );
+#ifdef TIOCSCTTY
+        if( ioctl(slavept, TIOCSCTTY)==-1 ) {
+            perror("sshpass: failed to set controlling terminal in child (TIOCSCTTY)");
+        }
+#endif
         close( slavept );
 	
 	close( masterpt );
@


1.1.1.1
log
@Import sshpass, a noninteractive ssh password provider.

Useful when/if key-based auth can't be used.  Requested by Jiri B,
tweaks & ok danj@@
@
text
@@
