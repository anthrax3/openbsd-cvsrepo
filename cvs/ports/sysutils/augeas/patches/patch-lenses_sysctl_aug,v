head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.8
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.6
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.8
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2015.06.03.06.10.42;	author jasper;	state Exp;
branches;
next	1.2;
commitid	21xieH4TSICZr7I0;

1.2
date	2013.06.17.07.39.49;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.15.19.38.34;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- update to augeas-1.4.0

ok sebastia@@
@
text
@$OpenBSD: patch-lenses_sysctl_aug,v 1.2 2013/06/17 07:39:49 jasper Exp $

Simplevars.entry allows a space between the key and the value,
sysctl(8) doesn't take that as a valid entry.

--- lenses/sysctl.aug.orig	Tue Jun  2 00:03:07 2015
+++ lenses/sysctl.aug	Tue Jun  2 10:11:04 2015
@@@@ -33,8 +33,12 @@@@ let filter = incl "/boot/loader.conf"
 (* View: comment *)
 let comment = Util.comment_generic /[ \t]*[#;][ \t]*/ "# "
 
+(* View: entry *)
+let entry = Build.key_value Rx.word Sep.equal
+            (store Simplevars.to_comment_re . (Util.eol|Util.comment_eol))
+
 (* View: lns
      The sysctl lens *)
-let lns = (Util.empty | comment | Simplevars.entry)*
+let lns = (Util.empty | comment | entry)*
 
 let xfm = transform lns filter
@


1.2
log
@- update to augeas-1.1.0
* includes various new lenses among which a lens for our boot.conf and
  ntpd.conf
@
text
@d1 1
a1 1
$OpenBSD: patch-lenses_sysctl_aug,v 1.1 2013/04/15 19:38:34 jasper Exp $
d6 3
a8 3
--- lenses/sysctl.aug.orig	Fri Jan  4 01:04:02 2013
+++ lenses/sysctl.aug	Sat Jun 15 14:47:07 2013
@@@@ -32,8 +32,12 @@@@ let filter = incl "/etc/sysctl.conf"
@


1.1
log
@fix setting sysctl values as the Simplevars.entry was used it inserted a
space between the key and value. but sysctl(8) doesn't like this, so use
a custom entry type instead.
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 3
--- lenses/sysctl.aug.orig	Mon Apr 15 21:35:56 2013
+++ lenses/sysctl.aug	Mon Apr 15 21:36:20 2013
@@@@ -31,8 +31,12 @@@@ let filter = incl "/etc/sysctl.conf"
@

