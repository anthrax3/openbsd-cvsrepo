head	1.2;
access;
symbols
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.06.17.07.39.49;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2013.01.04.07.55.47;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update to augeas-1.1.0
* includes various new lenses among which a lens for our boot.conf and
  ntpd.conf
@
text
@(*
Module: Test_Ntpd
  Provides unit tests for the <Ntpd> lens.
*)

module Test_ntpd =

test Ntpd.listen get "listen on *\n" =
  { "listen on"
    { "address" = "*" } }

test Ntpd.listen get "listen on 127.0.0.1\n" =
  { "listen on"
    { "address" = "127.0.0.1" } }

test Ntpd.listen get "listen on ::1\n" =
  { "listen on"
    { "address" = "::1" } }

test Ntpd.listen get "listen on ::1 rtable 4\n" =
  { "listen on"
    { "address" = "::1" }
    { "rtable" = "4" } }

test Ntpd.server get "server ntp.example.org\n" =
  { "server"
    { "address" = "ntp.example.org" } }

test Ntpd.server get "server ntp.example.org rtable 42\n" =
  { "server"
    { "address" = "ntp.example.org" }
    { "rtable" = "42" } }

test Ntpd.server get "server ntp.example.org weight 1 rtable 42\n" =
  { "server"
    { "address" = "ntp.example.org" }
    { "weight" = "1" }
    { "rtable" = "42" } }

test Ntpd.server get "server ntp.example.org weight 10\n" =
  { "server"
    { "address" = "ntp.example.org" }
    { "weight" = "10" } }


test Ntpd.sensor get "sensor *\n" =
  { "sensor"
    { "device" = "*" } }

test Ntpd.sensor get "sensor nmea0\n" =
  { "sensor"
    { "device" = "nmea0" } }

test Ntpd.sensor get "sensor nmea0 correction 42\n" =
  { "sensor"
    { "device" = "nmea0" }
    { "correction" = "42" } }

test Ntpd.sensor get "sensor nmea0 correction -42\n" =
  { "sensor"
    { "device" = "nmea0" }
    { "correction" = "-42" } }

test Ntpd.sensor get "sensor nmea0 correction 42 weight 2\n" =
  { "sensor"
    { "device" = "nmea0" }
    { "correction" = "42" }
    { "weight" = "2" } }

test Ntpd.sensor get "sensor nmea0 correction 42 refid Puffy\n" =
  { "sensor"
    { "device" = "nmea0" }
    { "correction" = "42" }
    { "refid" = "Puffy" } }

test Ntpd.sensor get "sensor nmea0 correction 42 stratum 2\n" =
  { "sensor"
    { "device" = "nmea0" }
    { "correction" = "42" }
    { "stratum" = "2" } }
@


1.1
log
@add a parser for openntpd's ntpd.conf (committed upstream)
@
text
@@

