head	1.18;
access;
symbols
	OPENBSD_6_1:1.17.0.2
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.4
	OPENBSD_5_8_BASE:1.11
	jasper_20150107:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.05.14.20.36.21;	author sebastia;	state Exp;
branches;
next	1.17;
commitid	1Yk1O3In7cH06TJ7;

1.17
date	2016.08.30.11.03.33;	author jasper;	state Exp;
branches;
next	1.16;
commitid	iDLUaZK4QkbuTGsr;

1.16
date	2016.08.12.08.42.52;	author jasper;	state Exp;
branches;
next	1.15;
commitid	0eznSiu0qB3MX1dH;

1.15
date	2016.06.01.07.02.02;	author jasper;	state Exp;
branches;
next	1.14;
commitid	xxIkZpZTo1i8wmYO;

1.14
date	2016.05.30.17.01.44;	author jasper;	state Exp;
branches;
next	1.13;
commitid	x2PgNklRYKdl9Bir;

1.13
date	2016.05.30.15.10.00;	author jasper;	state Exp;
branches;
next	1.12;
commitid	EJKoZap7a51LJEMX;

1.12
date	2016.05.30.15.07.58;	author jasper;	state dead;
branches;
next	1.11;
commitid	mTPWHYxdzRBIjhfj;

1.11
date	2015.07.23.08.06.28;	author jasper;	state Exp;
branches;
next	1.10;
commitid	5WgcQJui5MfB8tna;

1.10
date	2015.07.17.23.28.22;	author jasper;	state Exp;
branches;
next	1.9;
commitid	xqAD0Djuh3lvVEIU;

1.9
date	2015.07.16.20.57.42;	author jasper;	state Exp;
branches;
next	1.8;
commitid	q3EFD8pKvbcRLg5b;

1.8
date	2015.07.16.16.44.59;	author jasper;	state Exp;
branches;
next	1.7;
commitid	hg76Nph7AH0eKmJa;

1.7
date	2015.07.15.16.12.35;	author jasper;	state Exp;
branches;
next	1.6;
commitid	qCIJzmqHfJYVKVjK;

1.6
date	2015.07.14.22.02.25;	author jasper;	state Exp;
branches;
next	1.5;
commitid	IyxaDSpGFSupZ4l0;

1.5
date	2015.07.14.21.59.09;	author jasper;	state Exp;
branches;
next	1.4;
commitid	uvFoXrOG1zGPyqyr;

1.4
date	2015.07.14.21.45.15;	author jasper;	state Exp;
branches;
next	1.3;
commitid	RWYrmy9XI3WnDLL5;

1.3
date	2015.07.13.19.03.19;	author jasper;	state Exp;
branches;
next	1.2;
commitid	xWUk18LYliPupFvN;

1.2
date	2015.07.01.09.57.26;	author jasper;	state Exp;
branches;
next	1.1;
commitid	UDgc1GvP9hQOy43R;

1.1
date	2015.07.01.09.13.33;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	AzuxiPcee4dP8LWS;

1.1.1.1
date	2015.07.01.09.13.33;	author jasper;	state Exp;
branches;
next	;
commitid	AzuxiPcee4dP8LWS;


desc
@@


1.18
log
@Update to 3.6.4

Since 3.5, facts can be configured to be cached in facter.conf,
cached facts are stored in ${LOCALSTATEDIR}/puppetlabs/facter/cached_facts/

Feedback jasper@@
@
text
@$OpenBSD: patch-lib_CMakeLists_txt,v 1.17 2016/08/30 11:03:33 jasper Exp $

- Override library version

--- lib/CMakeLists.txt.orig	Wed Apr  5 22:38:38 2017
+++ lib/CMakeLists.txt	Fri May 12 08:22:41 2017
@@@@ -301,7 +301,7 @@@@ link_directories(
 add_library(libfactersrc OBJECT ${LIBFACTER_COMMON_SOURCES} ${LIBFACTER_STANDARD_SOURCES} ${LIBFACTER_PLATFORM_SOURCES})
 set_target_properties(libfactersrc PROPERTIES POSITION_INDEPENDENT_CODE true)
 add_library(libfacter SHARED $<TARGET_OBJECTS:libfactersrc>)
-set_target_properties(libfacter PROPERTIES PREFIX "" SUFFIX ".so" IMPORT_PREFIX "" IMPORT_SUFFIX ".so.a" VERSION ${PROJECT_VERSION})
+set_target_properties(libfacter PROPERTIES PREFIX "" SUFFIX ".so" IMPORT_PREFIX "" IMPORT_SUFFIX ".so.a" VERSION ${LIBfacter_VERSION})
 
 if(AIX)
     # On AIX we need to be built such that we are "dynamically
@


1.17
log
@update to facter-3.4.1
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.16 2016/08/12 08:42:52 jasper Exp $
d5 3
a7 3
--- lib/CMakeLists.txt.orig	Tue Aug 23 19:25:37 2016
+++ lib/CMakeLists.txt	Thu Aug 25 10:44:10 2016
@@@@ -290,7 +290,7 @@@@ link_directories(
d11 2
a12 2
-set_target_properties(libfacter PROPERTIES PREFIX "" SUFFIX ".so" IMPORT_PREFIX "" IMPORT_SUFFIX ".so.a" VERSION "${LIBFACTER_VERSION_MAJOR}.${LIBFACTER_VERSION_MINOR}.${LIBFACTER_VERSION_PATCH}")
+set_target_properties(libfacter PROPERTIES PREFIX "" SUFFIX ".so" IMPORT_PREFIX "" IMPORT_SUFFIX ".so.a" VERSION "${LIBfacter_MAJOR}.${LIBfacter_MINOR}")
@


1.16
log
@update to facter-3.4.0

https://docs.puppet.com/facter/3.4/release_notes.html
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.15 2016/06/01 07:02:02 jasper Exp $
d5 3
a7 3
--- lib/CMakeLists.txt.orig	Wed Aug 10 23:43:54 2016
+++ lib/CMakeLists.txt	Thu Aug 11 10:28:04 2016
@@@@ -287,7 +287,7 @@@@ link_directories(
@


1.15
log
@merged upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.14 2016/05/30 17:01:44 jasper Exp $
a2 4
- From fbb7625c044091f5de8525e85f714999eb79e81a Mon Sep 17 00:00:00 2001
  From: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
  Date: Mon, 30 May 2016 18:56:21 +0200
  Subject: [PATCH] (FACT-1432) Fixup OpenBSD networking facts
d5 3
a7 11
--- lib/CMakeLists.txt.orig	Fri May 20 18:36:55 2016
+++ lib/CMakeLists.txt	Mon May 30 16:42:26 2016
@@@@ -202,6 +202,7 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "OpenBSD")
         "src/facts/openbsd/collection.cc"
         "src/facts/glib/load_average_resolver.cc"
         "src/facts/bsd/filesystem_resolver.cc"
+        "src/facts/bsd/networking_resolver.cc"
         "src/facts/bsd/uptime_resolver.cc"
         "src/facts/openbsd/dmi_resolver.cc"
         "src/facts/openbsd/networking_resolver.cc"
@@@@ -282,7 +283,7 @@@@ link_directories(
@


1.14
log
@submitted upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.13 2016/05/30 15:10:00 jasper Exp $
d3 4
a6 1
- https://github.com/puppetlabs/facter/pull/1344
@


1.13
log
@oh cvs, you bundle of joy...
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
- Hook up missing file
@


1.12
log
@long overdue update to facter-3.1.7; all our patches have been merged upstream
however some new patches are needed to deal with the split-off leatherman lib.
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.11 2015/07/23 08:06:28 jasper Exp $
d3 2
a4 9
- From f11bebbdfbe0ebfef9f1bfd7931bdc40511db871 Mon Sep 17 00:00:00 2001
  From: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
  Date: Sat, 27 Jun 2015 09:57:48 +0200
  Subject: [PATCH] (maint) Don't attempt to link with libdl on OpenBSD.
- From da47706518e493f9a165f15e0ed9ac5d7a19ab27 Mon Sep 17 00:00:00 2001
  From: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
  Date: Thu, 16 Jul 2015 10:42:47 -0600
  Subject: [PATCH] (FACT-1130) Allow specifying the location to install facter.rb to
- Enable basic set of facts
d6 7
a12 16
--- lib/CMakeLists.txt.orig	Tue Jul 21 11:31:28 2015
+++ lib/CMakeLists.txt	Thu Jul 23 01:25:11 2015
@@@@ -115,7 +115,11 @@@@ if (UNIX)
         set(LIBFACTER_STANDARD_SOURCES ${LIBFACTER_STANDARD_SOURCES} "src/util/posix/scoped_bio.cc")
     endif()
 
-    set(POSIX_LIBRARIES pthread dl)
+    if (CMAKE_SYSTEM_NAME MATCHES "OpenBSD")
+        set(POSIX_LIBRARIES pthread)
+    else()
+        set(POSIX_LIBRARIES pthread dl)
+    endif()
 endif()
 
 if (WIN32)
@@@@ -208,6 +212,20 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
d14 8
a21 34
         "src/util/bsd/scoped_ifaddrs.cc"
     )
+elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "OpenBSD")
+    set(LIBFACTER_PLATFORM_SOURCES
+        "src/facts/openbsd/collection.cc"
+        "src/facts/glib/load_average_resolver.cc"
+        "src/facts/bsd/filesystem_resolver.cc"
+        "src/facts/bsd/uptime_resolver.cc"
+        "src/facts/bsd/networking_resolver.cc"
+        "src/facts/openbsd/networking_resolver.cc"
+        "src/util/bsd/scoped_ifaddrs.cc"
+        "src/facts/openbsd/processor_resolver.cc"
+        "src/facts/openbsd/memory_resolver.cc"
+        "src/facts/openbsd/dmi_resolver.cc"
+        "src/facts/openbsd/virtualization_resolver.cc"
+    )
 elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "Windows")
     set(LIBFACTER_PLATFORM_SOURCES
         "src/facts/windows/dmi_resolver.cc"
@@@@ -330,8 +348,13 @@@@ if (RUBY_FOUND)
         install(CODE "EXECUTE_PROCESS(COMMAND ln -sf libfacter.so libfacter.bundle WORKING_DIRECTORY ${CMAKE_INSTALL_PREFIX}/${LIBFACTER_INSTALL_DESTINATION})")
     endif()
 
-    execute_process(COMMAND ${RUBY_EXECUTABLE} -rrbconfig -e "puts RbConfig::CONFIG['vendordir']" OUTPUT_VARIABLE RUBY_VENDORDIR_OUT)
-    string(STRIP ${RUBY_VENDORDIR_OUT} RUBY_VENDORDIR)
+    set(RUBY_LIB_INSTALL "" CACHE PATH "Specify the location to install facter.rb")
+    if(RUBY_LIB_INSTALL)
+      set(RUBY_VENDORDIR ${RUBY_LIB_INSTALL})
+    else()
+      execute_process(COMMAND ${RUBY_EXECUTABLE} -rrbconfig -e "puts RbConfig::CONFIG['vendordir']" OUTPUT_VARIABLE RUBY_VENDORDIR_OUT)
+      string(STRIP ${RUBY_VENDORDIR_OUT} RUBY_VENDORDIR)
+    endif()
     message(STATUS "\"make install\" will install facter.rb to ${RUBY_VENDORDIR}")
     install(FILES ${CMAKE_BINARY_DIR}/lib/facter.rb DESTINATION ${RUBY_VENDORDIR})
d23 2
@


1.11
log
@- update to facter-3.0.2
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.10 2015/07/17 23:28:22 jasper Exp $
@


1.10
log
@merged upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.9 2015/07/16 20:57:42 jasper Exp $
d13 3
a15 3
--- lib/CMakeLists.txt.orig	Thu Jun 25 17:47:38 2015
+++ lib/CMakeLists.txt	Thu Jul 16 14:54:01 2015
@@@@ -113,7 +113,11 @@@@ if (UNIX)
d28 1
a28 1
@@@@ -206,6 +210,20 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
d49 1
a49 1
@@@@ -328,8 +346,13 @@@@ if (RUBY_FOUND)
@


1.9
log
@add a cmake flag to specify the location for facter.rb as suggested by upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.8 2015/07/16 16:44:59 jasper Exp $
d7 4
a10 2
- Use vendorlibdir which is versioned, as opposed to unversioned vendordir.
  https://github.com/puppetlabs/facter/pull/1060
@


1.8
log
@install facter.rb into vendorlibdir instead of vendordir

as discussed with jeremy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.7 2015/07/15 16:12:35 jasper Exp $
d12 1
a12 1
+++ lib/CMakeLists.txt	Thu Jul 16 10:33:09 2015
d47 1
a47 1
@@@@ -328,7 +346,7 @@@@ if (RUBY_FOUND)
d52 8
a59 2
+    execute_process(COMMAND ${RUBY_EXECUTABLE} -rrbconfig -e "puts RbConfig::CONFIG['vendorlibdir']" OUTPUT_VARIABLE RUBY_VENDORDIR_OUT)
     string(STRIP ${RUBY_VENDORDIR_OUT} RUBY_VENDORDIR)
d62 1
@


1.7
log
@implement dmi resolver (product name, version, etc)
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.6 2015/07/14 22:02:25 jasper Exp $
d7 2
d12 1
a12 1
+++ lib/CMakeLists.txt	Wed Jul 15 08:59:43 2015
d26 1
a26 2
@@@@ -205,6 +209,20 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
         "src/facts/bsd/networking_resolver.cc"
d29 1
a29 1
+    )
d43 1
a43 1
     )
d46 10
@


1.6
log
@add memory resolver too (minus swap for now)
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.5 2015/07/14 21:59:09 jasper Exp $
d10 1
a10 1
+++ lib/CMakeLists.txt	Tue Jul 14 16:01:39 2015
d24 1
a24 1
@@@@ -205,6 +209,18 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
d40 2
@


1.5
log
@- implement processor facts
- dont override dhcp methods; we can read the dhclient.leases files just fine
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.4 2015/07/14 21:45:15 jasper Exp $
d10 1
a10 1
+++ lib/CMakeLists.txt	Tue Jul 14 15:47:55 2015
d24 1
a24 1
@@@@ -205,6 +209,17 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
d39 1
@


1.4
log
@implement networking resolver; this finally gives us the 'fqdn' fact (among others)
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.3 2015/07/13 19:03:19 jasper Exp $
d10 1
a10 1
+++ lib/CMakeLists.txt	Tue Jul 14 15:42:57 2015
d24 1
a24 2
@@@@ -204,6 +208,16 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
         "src/facts/bsd/filesystem_resolver.cc"
d27 1
a27 1
+        "src/util/bsd/scoped_ifaddrs.cc"
d37 2
a38 1
         "src/util/bsd/scoped_ifaddrs.cc"
d41 1
@


1.3
log
@implement filesystem facts ('mountpoints')
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.2 2015/07/01 09:57:26 jasper Exp $
d9 2
a10 2
--- lib/CMakeLists.txt.orig	Fri Jun 26 01:47:38 2015
+++ lib/CMakeLists.txt	Fri Jul 10 21:35:24 2015
d24 2
a25 1
@@@@ -205,6 +209,13 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
d28 1
a28 1
         "src/util/bsd/scoped_ifaddrs.cc"
d32 1
a32 1
+        "src/facts/bsd/collection.cc"
d36 3
a40 1
     set(LIBFACTER_PLATFORM_SOURCES
@


1.2
log
@merged upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_CMakeLists_txt,v 1.1.1.1 2015/07/01 09:13:33 jasper Exp $
d10 1
a10 1
+++ lib/CMakeLists.txt	Tue Jun 30 16:19:12 2015
d24 1
a24 1
@@@@ -205,6 +209,12 @@@@ elseif ("${CMAKE_SYSTEM_NAME}" MATCHES "FreeBSD")
d33 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 2
- No libdl on OpenBSD.
  https://github.com/puppetlabs/facter/pull/998
@


1.1.1.1
log
@import facter-3.0.1

Native implementation of facter functionality in C++11, providing:
  - a shared library which gather facts about the system
  - an executable for standalone command line usage
  - a ruby file to enable require 'facter'
Facter is especially useful for retrieving things like operating system
names, hardware characteristics, IP addresses, MAC addresses, and SSH
keys.

Note that this port doesn't provide all the facts that sysutils/ruby-facter
does right now, but that's being worked on. therefore it's not used by
puppet yet.

feedback/ok aja@@
@
text
@@
