head	1.2;
access;
symbols
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.03.27.08.49.27;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2012.05.29.10.21.56;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove backintime; it depends on *very* outdated and unmaintained
GNOME 2 libs which are about to be removed.

ok jasper@@
@
text
@$OpenBSD: patch-common_logger_py,v 1.1 2012/05/29 10:21:56 ajacoutot Exp $

Prepend the short hostname to the log line to have a compliant syslog(3)
entry allowing remote logging based on the hostname.

--- common/logger.py.orig	Tue May 29 12:14:41 2012
+++ common/logger.py	Tue May 29 12:18:58 2012
@@@@ -18,10 +18,12 @@@@
 
 import syslog
 import os
+import socket
 
 def openlog():
 	name = os.getenv( 'LOGNAME', 'unknown' )
-	syslog.openlog( "backintime (%s)" % name )
+	host = socket.gethostname().split('.')[0]
+	syslog.openlog( "%s backintime (%s)" % ( host, name ) )
 
 def closelog():
 	syslog.closelog()
@


1.1
log
@Prepend the short hostname to the log line to have a compliant syslog(3)
entry allowing remote logging based on the host.
@
text
@d1 1
a1 1
$OpenBSD$
@

