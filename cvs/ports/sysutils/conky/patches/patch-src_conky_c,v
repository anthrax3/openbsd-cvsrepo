head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.16
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.12
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.14
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.10
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.8
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.6
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	jasper_20071010:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2012.12.31.09.36.38;	author chrisz;	state Exp;
branches;
next	1.5;

1.5
date	2011.09.11.18.53.28;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2011.04.27.12.55.10;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2008.09.30.09.54.19;	author landry;	state dead;
branches;
next	1.2;

1.2
date	2008.02.03.16.04.09;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.10.21.20.23;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.10.21.20.23;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to conky-1.9.0

OK jasper@@, benoit@@ (maintainer)
@
text
@$OpenBSD: patch-src_conky_c,v 1.5 2011/09/11 18:53:28 dcoppa Exp $
--- src/conky.c.orig	Thu May  3 23:22:21 2012
+++ src/conky.c	Tue Jul 24 18:10:39 2012
@@@@ -125,7 +125,7 @@@@
 
 /* FIXME: apm_getinfo is unused here. maybe it's meant for common.c */
 #if (defined(__FreeBSD__) || defined(__FreeBSD_kernel__) \
-		|| defined(__OpenBSD__)) && (defined(i386) || defined(__i386__))
+		|| defined(__OpenBSD__))
 int apm_getinfo(int fd, apm_info_t aip);
 char *get_apm_adapter(void);
 char *get_apm_battery_life(void);
@@@@ -401,10 +401,6 @@@@ static int maximum_width;
 
 #endif /* X11 */
 
-#ifdef __OpenBSD__
-static int sensor_device;
-#endif
-
 long color0, color1, color2, color3, color4, color5, color6, color7, color8,
 	 color9;
 
@@@@ -1015,7 +1011,7 @@@@ void generate_text_internal(char *p, int p_max_size,
 				get_powerbook_batt_info(p, p_max_size, obj->data.i);
 			}
 #endif /* __linux__ */
-#if (defined(__FreeBSD__) || defined(__linux__))
+#if (defined(__FreeBSD__) || defined(__OpenBSD__) || defined(__linux__))
 			OBJ(if_up) {
 				if (!interface_up(obj)) {
 					DO_JUMP;
@@@@ -1899,7 +1895,7 @@@@ void generate_text_internal(char *p, int p_max_size,
 			}
 #endif /* __linux__ */
 #if (defined(__FreeBSD__) || defined(__FreeBSD_kernel__) \
-		|| defined(__OpenBSD__)) && (defined(i386) || defined(__i386__))
+		|| defined(__OpenBSD__))
 			OBJ(apm_adapter) {
 				char *msg;
 
@@@@ -3496,12 +3492,14 @@@@ static void main_loop(void)
 		if(update_interval_bat != NOBATTERY && update_interval_bat != update_interval_old) {
 			char buf[max_user_text];
 
+#ifndef __OpenBSD__
 			get_battery_short_status(buf, max_user_text, "BAT0");
 			if(buf[0] == 'D') {
 				update_interval = update_interval_bat;
 			} else {
 				update_interval = update_interval_old;
 			}
+#endif
 		}
 		info.looped++;
 
@


1.5
log
@- Reenable $addr and $if_up
- Enable the new SMP code (allowing the user to actually see multiple
  cores)
- Enable RES and VSIZE display in $top

From Pascal Stumpf: thanks!

ok benoit@@, jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_conky_c,v 1.4 2011/04/27 12:55:10 dcoppa Exp $
--- src/conky.c.orig	Tue Oct  5 23:29:36 2010
+++ src/conky.c	Mon Jul 18 13:59:30 2011
d24 1
a24 1
@@@@ -1030,7 +1026,7 @@@@ void generate_text_internal(char *p, int p_max_size,
d33 1
a33 1
@@@@ -1914,7 +1910,7 @@@@ void generate_text_internal(char *p, int p_max_size,
d42 1
a42 1
@@@@ -3534,12 +3530,14 @@@@ static void main_loop(void)
@


1.4
log
@Update to conky-1.8.1.

Added audacious, imlib2 and xmms2 flavors.

USE_GROFF and manpage patching during post-install are no more
needed.

Joint work with Pascal Stumpf (thanks!)
OK jasper@@, benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ src/conky.c	Tue Apr 19 19:44:03 2011
d24 9
@


1.3
log
@Update to conky 1.6.1.
conkyrc.sample disappeared, and src/openbsd.h is missing from distfile.
ok jasper@@ & vlad glagolev (MAINTAINER)
@
text
@d1 36
a36 8
$OpenBSD: patch-src_conky_c,v 1.2 2008/02/03 16:04:09 jasper Exp $
--- src/conky.c.orig	Wed Nov 14 22:41:12 2007
+++ src/conky.c	Sun Feb  3 16:49:52 2008
@@@@ -3710,7 +3710,12 @@@@ static void generate_text_internal(char *p, int p_max_
 #endif /* !__OpenBSD__ */
 				OBJ(freq) {
 					if (obj->a) {
-						obj->a = get_freq(p, p_max_size, "%.0f", 1, obj->data.cpu_index); 
d38 6
a43 4
+						obj->a = get_freq(p, p_max_size, "%'.2f", 1000, obj->data.cpu_index); 
+#else
+						/* OpenBSD has no such flag (SUSv2) */
+						obj->a = get_freq(p, p_max_size, "%.2f", 1000, obj->data.cpu_index); 
d45 3
a47 3
 					}
 				}
 				OBJ(freq_g) {
@


1.2
log
@- update conky to 1.4.9

from Vlad Glagolev (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Initial revision
@
text
@d2 3
a4 3
--- src/conky.c.orig	Fri Aug 31 04:05:03 2007
+++ src/conky.c	Fri Sep 28 18:57:07 2007
@@@@ -3602,7 +3602,12 @@@@ static void generate_text_internal(char *p, int p_max_
a17 21
@@@@ -3670,9 +3675,17 @@@@ static void generate_text_internal(char *p, int p_max_
 				}
 				OBJ(freq_dyn_g) {
 					if (use_spacer) {
-						get_freq_dynamic(p, 6, "%'.2f     ", 1000); 
-					} else {
-						get_freq_dynamic(p, p_max_size, "%'.2f", 1000); 
+#ifndef __OpenBSD__
+ 						get_freq_dynamic(p, 6, "%'.2f     ", 1000);
+#else
+						get_freq_dynamic(p, 6, "%.2f     ", 1000);
+#endif
+ 					} else {
+#ifndef __OpenBSD__
+ 						get_freq_dynamic(p, p_max_size, "%'.2f", 1000);
+#else
+						get_freq_dynamic(p, p_max_size, "%.2f", 1000);
+#endif
 					}
 				}
 #ifndef __OpenBSD__
@


1.1.1.1
log
@import conky 1.4.7

Conky is a system monitor for X originally based on the torsmo code.
Since it's original conception, Conky has changed a fair bit from it's
predecessor. Conky can display just about anything, either on your root
desktop or in it's own window. Conky has many built-in objects, as well
as the ability to execute programs and scripts, then display the output
from stdout.

from Vlad Glagolev <stelzy at gmail.com> (MAINTAINER)
feedback and ok ajacoutot@@
@
text
@@
