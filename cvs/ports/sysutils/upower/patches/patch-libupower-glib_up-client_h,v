head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.09.01.10.11.47;	author landry;	state Exp;
branches;
next	;
commitid	aJ9y1R2kzjWxOeEZ;


desc
@@


1.1
log
@Add proper error and cancellable handling to UpClient constructor

Backport https://cgit.freedesktop.org/upower/patch/?id=932a6a39e35754be571e1274aec4730fd42dba13
from https://bugs.freedesktop.org/show_bug.cgi?id=95350

First part of a larger fix for xfsettingsd crashes when systemwide dbus
isn't running.

ok/testing edd@@
@
text
@$OpenBSD$

Backport https://cgit.freedesktop.org/upower/patch/?id=932a6a39e35754be571e1274aec4730fd42dba13
https://bugs.freedesktop.org/show_bug.cgi?id=95350

--- libupower-glib/up-client.h.orig	Wed Apr 22 11:57:08 2015
+++ libupower-glib/up-client.h	Wed Aug 31 12:31:10 2016
@@@@ -72,6 +72,7 @@@@ typedef struct
 /* general */
 GType		 up_client_get_type			(void);
 UpClient	*up_client_new				(void);
+UpClient	*up_client_new_full			(GCancellable *cancellable, GError **error);
 
 /* sync versions */
 UpDevice *	 up_client_get_display_device		(UpClient *client);
@
