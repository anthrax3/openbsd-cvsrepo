head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.12
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.8
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.10
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.2.0.16
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.14
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.12
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.1.0.16
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.14
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.12
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.10
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.8
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.6
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.4
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.2
	OPENBSD_3_9_BASE:1.1.1.1
	jolan_20060111:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2014.01.07.17.41.23;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2010.01.04.06.35.31;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2006.01.11.18.43.02;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.01.11.18.43.02;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.3
log
@add a caveats section to the manual warning about bugs/custom kernels/etc
@
text
@$OpenBSD: patch-dmassage,v 1.2 2010/01/04 06:35:31 kili Exp $
--- dmassage.orig	Sun Jan 27 12:35:53 2002
+++ dmassage	Tue Jan  7 09:48:54 2014
@@@@ -97,14 +97,11 @@@@ sub parse_dmesg
 {
     open(DMESG, $DMESG) || die "cannot read dmesg: $!\n";
 
-    # "mainbus0 at root" should be always there.
-    $dmesgdev{"root"}{"mainbus0"}++;
-
     while (<DMESG>) {
 	chomp;
 	s/\s+/ /g;
 	s/^ //;
-	if (m/^([a-z]{2,}[0-9]+) at ([a-z]{2,}[0-9]+)/) {
+	if (m/^([a-z]{2,}[0-9]+) at ([a-z]{2,}[0-9]+|root)/) {
 	    $dmesgdev{$2}{$1}++;
 	}
     }
@@@@ -191,7 +188,6 @@@@ sub printdev
 sub usage
 {
     die <<USAGE
-Type 'perldoc -F $0' to see the documentation.
 Usage: dmassage [-d dmesg] <-f kernel | -s kernelconfig | -t>
 USAGE
 }
@@@@ -214,6 +210,8 @@@@ B<dmassage> - dmesg parser
 
 =cut
 
+=back
+
 =head1 DESCRIPTION
 
 B<dmassage> parses your system's dmesg to learn which devices are
@@@@ -265,5 +263,15 @@@@ B<< dmassage -s GENERIC >SMALLKERNEL >>
 Camiel Dobbelaar <cd@@sentia.nl>
 
 http://www.sentia.org/projects/dmassage
+
+=head1 CAVEATS
+
+dmassage does not fully support recent OpenBSD releases and
+will often no longer directly create a working kernel configuration
+file; in most cases you will need to make additional changes yourself.
+
+Additionally, note that using a custom kernel is unsupported.
+If reporting any OS bugs, be sure to verify that they still occur
+with GENERIC or GENERIC.MP.
 
 =cut
@


1.2
log
@Don't assume everything is attached to mainbus0.

This should satisfy some whiners on misc@@, but please be aware that
the use of this program may actually hurt satisfaction,  especially
if your udildo(4) wasn't attached when you created your super small
and fast and broken kernel config.

Remove jasper@@ as MAINTAINER at his request.

ok jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-dmassage,v 1.1.1.1 2006/01/11 18:43:02 jolan Exp $
--- dmassage.orig	Sun Jan 27 13:35:53 2002
+++ dmassage	Sat Jan  2 20:24:27 2010
d28 25
@


1.1
log
@Initial revision
@
text
@d1 20
a20 4
$OpenBSD$
--- dmassage.orig	Sun Jan 27 06:35:53 2002
+++ dmassage	Wed Jan 11 12:38:02 2006
@@@@ -191,7 +191,6 @@@@ sub printdev
@


1.1.1.1
log
@dmassage-0.6, dmesg parser

from jasper lievisse adriaanse
@
text
@@
