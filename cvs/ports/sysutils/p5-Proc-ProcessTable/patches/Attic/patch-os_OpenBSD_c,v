head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.8
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.6
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2013.08.08.23.31.07;	author bluhm;	state dead;
branches;
next	1.1;

1.1
date	2012.01.08.19.42.02;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update p5-Proc-ProcessTable to 0.48
- PKGNAME is set automatically by module cpan.
- patch-os_OpenBSD_c has been applied upstream.
OK william@@ (maintainer)
@
text
@$OpenBSD: patch-os_OpenBSD_c,v 1.1 2012/01/08 19:42:02 naddy Exp $
--- os/OpenBSD.c.orig	Sun Jan  8 11:42:24 2012
+++ os/OpenBSD.c	Sun Jan  8 11:43:56 2012
@@@@ -68,7 +68,7 @@@@ char* OS_initialize() {
 void OS_get_table() {
 	kvm_t *kd;
 	char errbuf[_POSIX2_LINE_MAX];
-	struct kinfo_proc2 *procs;
+	struct kinfo_proc *procs;
 	int count;
 	int i, argcount;
 	int ttynum;
@@@@ -87,9 +87,9 @@@@ void OS_get_table() {
 	}
 
 	/* get processes */
-	if ((procs = kvm_getproc2(kd, KERN_PROC_ALL, 0, sizeof(*procs), &count)) == NULL) {
+	if ((procs = kvm_getprocs(kd, KERN_PROC_ALL, 0, sizeof(*procs), &count)) == NULL) {
 		kvm_close(kd);
-		ppt_croak("kvm_getproc2: %s", kvm_geterr(kd));
+		ppt_croak("kvm_getprocs: %s", kvm_geterr(kd));
 	}
 
 	/* bless_into_proc each process's information */
@@@@ -125,7 +125,7 @@@@ void OS_get_table() {
 
 		/* arguments */
 		cmndline[0] = NULL;
-		pargv = kvm_getargv2(kd, (const struct kinfo_proc2 *) &(procs[i]), 0);
+		pargv = kvm_getargv(kd, (const struct kinfo_proc *) &(procs[i]), 0);
 		if (pargv) {
 			argcount = 0;
 			while (pargv[argcount] && strlen(cmndline) <= ARG_MAX) {
@


1.1
log
@catch up with KERN_PROC2 -> KERN_PROC change
@
text
@d1 1
a1 1
$OpenBSD$
@

