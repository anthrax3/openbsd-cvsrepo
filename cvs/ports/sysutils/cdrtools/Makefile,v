head	1.22;
access;
symbols
	OPENBSD_6_2:1.22.0.12
	OPENBSD_6_2_BASE:1.22
	OPENBSD_6_1:1.22.0.10
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.22.0.8
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.22.0.4
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.22.0.6
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.2
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.20.0.4
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.19.0.6
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.19.0.4
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.16.0.4
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.14.0.12
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.10
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.8
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.6
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.4
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.12.0.4
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.12.0.2
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.11.0.6
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.4
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.2
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.7.0.4
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	naddy_20020513:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2014.11.03.09.12.41;	author ratchov;	state Exp;
branches;
next	1.21;
commitid	yFqAb7yPLu4BWe1S;

1.21
date	2014.06.12.08.07.32;	author sthen;	state Exp;
branches;
next	1.20;
commitid	G7lShVTPPEqHzjFf;

1.20
date	2013.03.11.11.41.29;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2011.12.07.07.56.12;	author sebastia;	state Exp;
branches;
next	1.18;

1.18
date	2011.11.10.14.13.06;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.01.16.44.19;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.20.17.22.40;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.19.07.43.00;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2007.11.11.01.41.11;	author jakemsr;	state Exp;
branches;
next	1.13;

1.13
date	2007.09.15.21.14.01;	author merdely;	state Exp;
branches;
next	1.12;

1.12
date	2006.12.02.20.24.17;	author pvalchev;	state Exp;
branches;
next	1.11;

1.11
date	2005.05.25.22.50.18;	author fgsch;	state Exp;
branches;
next	1.10;

1.10
date	2004.12.20.10.35.35;	author alek;	state Exp;
branches;
next	1.9;

1.9
date	2004.11.30.05.44.02;	author jolan;	state Exp;
branches;
next	1.8;

1.8
date	2004.09.16.02.13.34;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2004.02.13.17.25.51;	author sturm;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2004.02.12.18.12.39;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.17.01.12.23;	author brad;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2003.02.17.15.32.58;	author naddy;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2002.12.29.20.19.10;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2002.06.05.21.41.07;	author naddy;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2002.05.13.14.08.50;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.05.13.14.08.50;	author naddy;	state Exp;
branches;
next	;

1.2.2.1
date	2003.05.17.00.49.12;	author brad;	state Exp;
branches;
next	;

1.4.2.1
date	2003.05.17.01.04.46;	author brad;	state Exp;
branches;
next	;

1.5.2.1
date	2004.09.30.06.11.21;	author brad;	state Exp;
branches;
next	;

1.7.2.1
date	2004.09.30.06.10.13;	author brad;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Use sndio to play sound.

help from and ok jca, ok armani
@
text
@# $OpenBSD: Makefile,v 1.21 2014/06/12 08:07:32 sthen Exp $

COMMENT=		ISO 9660 filesystem and CD/DVD/BD creation tools

DISTNAME=		cdrtools-3.00
REVISION=		1
CATEGORIES=		sysutils
HOMEPAGE=		http://cdrtools.sourceforge.net/private/cdrtools.html

# mostly CDDL, some components GPL (see COPYING)
PERMIT_PACKAGE_CDROM=	Yes
WANTLIB=		c sndio

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=cdrtools/}


BUILD_DEPENDS=		devel/m4
USE_GMAKE=		Yes

MAKE_ENV +=		MAKEPROG=${MAKE_PROGRAM}
MAKE_FLAGS =		GMAKE_NOWARN=true CC="${CC}" CC++="${CXX}" \
			LDCC="${CC}" LDCC++="${CXX}" \
			MKC++DEP="${CXX} -M" MKDEP="${CC} -M" \
			DYNLD="${CC}" DYNLDC++="${CXX}" \
			GCCOPTOPT="" RANLIB=ranlib AR=ar

NO_TEST=		Yes

.if ${MACHINE} != "i386" || ${CC} != "cc"
do-configure:
	cd ${WRKSRC}/RULES && \
	    ln -sf i386-openbsd-cc.rul ${MACHINE}-openbsd-${CC}.rul
.endif

OBJ=	OBJ/${MACHINE_ARCH}-openbsd-${CC}

do-install:
	@@cp ${WRKSRC}/mkisofs/mkisofs.8 ${WRKSRC}/mkisofs/mkisofs.1
.for i in cdda2wav cdrecord mkisofs readcd
	${INSTALL_PROGRAM} ${WRKBUILD}/$i/${OBJ}/$i ${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/$i/$i.1 ${PREFIX}/man/man1
.endfor
.for i in devdump isodebug isodump isoinfo isovfy
	${INSTALL_PROGRAM} ${WRKBUILD}/mkisofs/diag/${OBJ}/$i ${PREFIX}/bin
.endfor
	${INSTALL_MAN} ${WRKSRC}/mkisofs/diag/isoinfo.8 \
	    ${PREFIX}/man/man1/isoinfo.1
.for i in devdump.1 isovfy.1
	cd ${PREFIX}/man/man1 && ln -s isoinfo.1 $i
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/cdrtools
	${INSTALL_DATA} ${WRKSRC}/README.OpenBSD ${PREFIX}/share/doc/cdrtools

.include <bsd.port.mk>
@


1.21
log
@new HOMEPAGE/MASTER_SITES; from Rafael Sadowski plus whitespace tweak from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/11 11:41:29 espie Exp $
d6 1
a6 1
REVISION=		0
d12 1
a12 1
WANTLIB=		c ossaudio
d17 1
d25 1
a25 2
			GCCOPTOPT="" RANLIB=ranlib AR=ar \
			OSS_SOUND_DEV='"/dev/audio"'
@


1.20
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/12/07 07:56:12 sebastia Exp $
d6 1
d8 1
a8 1
HOMEPAGE=		http://cdrecord.berlios.de/private/cdrecord.html
d14 1
a14 2
MASTER_SITES=		ftp://ftp.berlios.de/pub/cdrecord/ \
			http://spacehopper.org/mirrors/berlios/cdrecord/
d19 1
a19 1
MAKE_ENV +=		MAKEPROG=${MAKE_PROGRAM} 
@


1.19
log
@update cdrtools to 3.00.

based on initial diff from pascal@@
lots of feedback and compiling on alpha from naddy@@

OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/11/10 14:13:06 sthen Exp $
a10 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d27 1
a27 1
NO_REGRESS=		Yes
@


1.18
log
@mirror ftp.berlios.de distfiles; berlios is going away 31/12/11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/01 16:44:19 naddy Exp $
d3 1
a3 1
COMMENT=		ISO 9660 filesystem and CD creation tools
d5 1
a5 2
DISTNAME=		cdrtools-2.01
REVISION =		2
d7 1
a7 1
HOMEPAGE=		http://cdrecord.berlios.de/old/private/cdrecord.html
d9 1
a9 1
# GPL
d19 1
a20 1
USE_GROFF =		Yes
d22 7
a28 2
MAKE_ENV=		MAKEPROG=${MAKE_PROGRAM} \
			CCOM=${CC}
@


1.17
log
@* remove a workaround now that uname -p returns MACHINE_ARCH
* unify/prettify Makefiles a bit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/20 17:22:40 espie Exp $
d17 2
a18 1
MASTER_SITES=		ftp://ftp.berlios.de/pub/cdrecord/
@


1.16
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/19 07:43:00 espie Exp $
d6 1
a6 1
REVISION =		1
a26 2
CDRMACH=		${MACHINE}-openbsd-${CC}

d29 2
a30 2
	@@ln -sf ${WRKSRC}/RULES/i386-openbsd-cc.rul \
		${WRKSRC}/RULES/${CDRMACH}.rul
d33 2
d37 3
a39 4
.for PROG in cdda2wav cdrecord mkisofs readcd
	${INSTALL_PROGRAM} ${WRKBUILD}/${PROG}/OBJ/${CDRMACH}/${PROG} \
		${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/${PROG}/${PROG}.1 ${PREFIX}/man/man1
d41 2
a42 3
.for PROG in devdump isodebug isodump isoinfo isovfy
	${INSTALL_PROGRAM} ${WRKBUILD}/mkisofs/diag/OBJ/${CDRMACH}/${PROG} \
		${PREFIX}/bin
d45 4
a48 5
		${PREFIX}/man/man1/isoinfo.1
	@@cd ${PREFIX}/man/man1; \
		for i in devdump.1 isovfy.1 ; do \
			ln -s isoinfo.1 $$i ; \
		done
@


1.15
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/11/11 01:41:11 jakemsr Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
d20 1
a20 1
USE_GROFF =	Yes
@


1.14
log
@make 'cdda2wav -e' work
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/09/15 21:14:01 merdely Exp $
d20 1
@


1.13
log
@Remove surrounding quotes in COMMENT-*/PERMIT_*/IGNORE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/12/02 20:24:17 pvalchev Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
@


1.12
log
@Remove jakemsr@@ from maintainer position, as he has been inactive and
email has been bouncing for several months.  Jacob, if you get this
and/or get back to things, let us know.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/05/25 22:50:18 fgsch Exp $
d3 1
a3 1
COMMENT=		"ISO 9660 filesystem and CD creation tools"
@


1.11
log
@correct homepage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/12/20 10:35:35 alek Exp $
d6 1
a8 2

MAINTAINER=		Jacob Meuser <jakemsr@@jakemsr.com>
@


1.10
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/11/30 05:44:02 jolan Exp $
d7 1
a7 1
HOMEPAGE=		http://www.fokus.gmd.de/research/cc/glone/employees/joerg.schilling/private/cdrecord.html
@


1.9
log
@update to 2.01, from maintainer jacob meuser
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/05/17 01:12:23 brad Exp $
d16 1
@


1.8
log
@cdrecord, if manually set SUID root, is vulnerable to a local root exploit
allowing users to escalate privileges.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/02/13 17:25:51 sturm Exp $
d5 1
a5 2
DISTNAME=		cdrtools-2.00.3
PKGNAME=		${DISTNAME}p1
a20 8
FAKE_FLAGS=		INS_BASE=${WRKINST}${PREFIX} \
			INSUSR=${BINOWN} \
			INSGRP=${BINGRP} \
			INSMODEX=${BINMODE} \
			INSMODEF=${SHAREMODE} \
			MANSECT=man1 \
			MANSUFFIX=1

d26 2
d31 1
a31 1
		${WRKSRC}/RULES/${MACHINE}-openbsd-${CC}.rul
d34 13
a46 4
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/cdrtools
	${INSTALL_DATA} ${WRKSRC}/README.OpenBSD ${PREFIX}/share/doc/cdrtools
	@@strip ${PREFIX}/bin/* 
d51 2
@


1.7
log
@update to cdrtools 2.00.3

ok maintainer Jacob Meuser <jakemsr at jakemsr.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/02/12 18:12:39 sturm Exp $
d6 1
@


1.7.2.1
log
@cdrecord, if manually set SUID root, is vulnerable to a local root exploit
allowing users to escalate privileges.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/02/13 17:25:51 sturm Exp $
a5 1
PKGNAME=		${DISTNAME}p1
@


1.6
log
@fix DISTNAME, new version number format

noticed by markus@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/05/17 01:12:23 brad Exp $
d5 1
a5 2
DISTNAME=		cdrtools-2.00
PKGNAME=		${DISTNAME}p1
@


1.5
log
@Fix format string issue, this is not exploitable on OpenBSD because
the binary is not installed suid root.

http://marc.theaimsgroup.com/?l=bugtraq&m=105285564307225&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/02/17 15:32:58 naddy Exp $
d5 1
a5 1
DISTNAME=		cdrtools-2.0
@


1.5.2.1
log
@cdrecord, if manually set SUID root, is vulnerable to a local root exploit
allowing users to escalate privileges.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/05/17 01:12:23 brad Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p2
@


1.4
log
@Update to 2.0.
From: Jacob Meuser <jakemsr@@jakemsr.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/06/05 21:41:07 naddy Exp $
d6 1
@


1.4.2.1
log
@Fix format string issue, this is not exploitable on OpenBSD because
the binary is not installed suid root.

http://marc.theaimsgroup.com/?l=bugtraq&m=105285564307225&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/02/17 15:32:58 naddy Exp $
a5 1
PKGNAME=		${DISTNAME}p1
@


1.3
log
@and more..
@
text
@d5 1
a5 2
DISTNAME=		cdrtools-1.10
PKGNAME=		${DISTNAME}p1
d17 1
a17 1
MASTER_SITES=		ftp://ftp.fokus.gmd.de/pub/unix/cdrecord/
d41 2
@


1.2
log
@smkisofs -> mkisofs: no more name clash now that /usr/sbin/mkisofs
has been removed; from maintainer Jacob Meuser <jakemsr@@jakemsr.com>.

Bump package version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/05/13 14:08:50 naddy Exp $
a7 1
NEED_VERSION=		1.522
@


1.2.2.1
log
@Fix format string issue, this is not exploitable on OpenBSD because
the binary is not installed suid root.

http://marc.theaimsgroup.com/?l=bugtraq&m=105285564307225&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/06/05 21:41:07 naddy Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p2
d8 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@Import cdrtools 1.10; submitted by Jacob Meuser <jakemsr@@jakemsr.com>.

The cdrtools software includes programs to create and/or extract
ISO 9660 filesystems, verify their integrity, and write them to
disc.
@
text
@@
