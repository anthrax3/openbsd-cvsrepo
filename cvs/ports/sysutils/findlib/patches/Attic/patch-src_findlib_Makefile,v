head	1.6;
access;
symbols
	OPENBSD_5_8:1.5.0.6
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.3.0.8
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_4_5:1.1.0.12
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.10
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.8
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.6
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2015.08.30.15.43.47;	author avsm;	state dead;
branches;
next	1.5;
commitid	ibeX3QBDU59UI1Pc;

1.5
date	2014.10.22.14.56.42;	author chrisz;	state Exp;
branches;
next	1.4;
commitid	05KlzdndciiuJQxk;

1.4
date	2014.08.25.15.20.19;	author chrisz;	state dead;
branches;
next	1.3;
commitid	6BvEz6ub6gqZgyTj;

1.3
date	2013.01.03.14.30.57;	author chrisz;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.11.21.31.39;	author avsm;	state dead;
branches;
next	1.1;

1.1
date	2006.05.29.03.46.29;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to findlib-1.5.5

This introduces a strong dependency on ocaml-camlp4 in order to get the
safe_camlp4 script. This could be split into a subpackage in the future,
to get a base findlib package that does not depend on camlp4

ok jca@@, tested by krw@@ daniel@@ jsg@@
@
text
@$OpenBSD: patch-src_findlib_Makefile,v 1.5 2014/10/22 14:56:42 chrisz Exp $
--- src/findlib/Makefile.orig	Wed Oct 15 13:07:40 2014
+++ src/findlib/Makefile	Wed Oct 22 16:54:22 2014
@@@@ -74,7 +74,7 @@@@ topfind.ml: topfind.ml.in
 	if [ "$(ENABLE_TOPFIND_PPXOPT)" = "true" ]; then                 \
 		cp topfind.ml.in topfind.ml;                             \
 	else                                                             \
-		sed -e '/PPXOPT_BEGIN/,/PPXOPT_END/{d}' topfind.ml.in    \
+		sed -e '/PPXOPT_BEGIN/,/PPXOPT_END/ d' topfind.ml.in    \
 			> topfind.ml ;                                   \
 	fi
 
@


1.5
log
@fix sed syntax. Thanks to naddy@@ for reporting.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.4
log
@Upgrade findlib to 1.5.2.
 * Don't use MODULES = lang/ocaml, because with 4.02 we will
   need to build findlib without camlp4, which will depend
   on findlib.
 * Remove patches accepted upstream.
 * Add one patch from upstream to fix building without
   ocamlfind in path yet and respecting PREFIX.

OK avsm@@
@
text
@d1 11
a11 5
$OpenBSD: patch-src_findlib_Makefile,v 1.3 2013/01/03 14:30:57 chrisz Exp $
--- src/findlib/Makefile.orig	Mon Jul  9 11:29:16 2012
+++ src/findlib/Makefile	Mon Dec 31 13:40:45 2012
@@@@ -38,7 +38,7 @@@@ all: ocamlfind$(EXEC_SUFFIX) findlib.cma findlib_top.c
 opt: ocamlfind_opt$(EXEC_SUFFIX) findlib.cmxa topfind
a12 6
 ocamlfind$(EXEC_SUFFIX): findlib.cma $(OCAMLFIND_OBJECTS)
-	$(OCAMLC) -custom -o ocamlfind$(EXEC_SUFFIX) -g findlib.cma unix.cma \
+	$(OCAMLC) $(CUSTOM) -o ocamlfind$(EXEC_SUFFIX) -g findlib.cma unix.cma \
 	          $(OCAMLC_FLAGS) $(OCAMLFIND_OBJECTS)
 
 ocamlfind_opt$(EXEC_SUFFIX): findlib.cmxa $(OCAMLFIND_XOBJECTS)
@


1.3
log
@- on bytecode-archs build executable without custom runtime
- use /etc/findlib.conf instead of /usr/local/share/examples/findlib.conf.
- add commented out option to enable ocamldoc.opt by default to findlib.conf

OK jasper@@, anil@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@update to findlib-1.2.4
@
text
@d1 5
a5 5
$OpenBSD: patch-src_findlib_Makefile,v 1.1 2006/05/29 03:46:29 avsm Exp $
--- src/findlib/Makefile.orig	Sun May 28 03:52:22 2006
+++ src/findlib/Makefile	Sun May 28 03:53:13 2006
@@@@ -71,18 +71,18 @@@@ clean:
 	  ocamlfind$(EXEC_SUFFIX) ocamlfind_opt$(EXEC_SUFFIX)
d7 4
a10 22
 install: all
-	mkdir -p $(prefix)$(OCAML_SITELIB)/$(NAME)
-	mkdir -p $(prefix)$(OCAMLFIND_BIN)
-	test $(INSTALL_TOPFIND) -eq 0 || cp topfind $(prefix)$(OCAML_CORE_STDLIB)
+	mkdir -p $(DESTDIR)$(prefix)$(OCAML_SITELIB)/$(NAME)
+	mkdir -p $(DESTDIR)$(prefix)$(OCAMLFIND_BIN)
+	test $(INSTALL_TOPFIND) -eq 0 || cp topfind $(DESTDIR)$(prefix)$(OCAML_CORE_STDLIB)
 	files=`$(TOP)/tools/collect_files $(TOP)/Makefile.config findlib.cmi findlib.mli findlib.cma topfind.cmi topfind.mli fl_package_base.mli fl_package_base.cmi fl_metascanner.mli fl_metascanner.cmi findlib_top.cma findlib.cmxa findlib.a META` && \
-	cp $$files $(prefix)$(OCAML_SITELIB)/$(NAME)
+	cp $$files $(DESTDIR)$(prefix)$(OCAML_SITELIB)/$(NAME)
 	f="ocamlfind$(EXEC_SUFFIX)"; { test -f ocamlfind_opt$(EXEC_SUFFIX) && f="ocamlfind_opt$(EXEC_SUFFIX)"; }; \
-	cp $$f $(prefix)$(OCAMLFIND_BIN)/ocamlfind$(EXEC_SUFFIX)
+	cp $$f $(DESTDIR)$(prefix)$(OCAMLFIND_BIN)/ocamlfind$(EXEC_SUFFIX)
 
 install-num-top:
-	mkdir -p $(prefix)$(OCAML_SITELIB)/num-top
+	mkdir -p $(DESTDIR)$(prefix)$(OCAML_SITELIB)/num-top
 	cp num_top.cma num_top.cmi num_top_printers.cmi \
-		$(prefix)$(OCAML_SITELIB)/num-top
+		$(DESTDIR)$(prefix)$(OCAML_SITELIB)/num-top
 
 # Note: uninstall-num-top is part of the removal of the META files.
d12 1
@


1.1
log
@update to findlib-1.1.2pl1
@
text
@d1 1
a1 1
$OpenBSD$
@

