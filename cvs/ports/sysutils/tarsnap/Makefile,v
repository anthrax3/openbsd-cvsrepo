head	1.12;
access;
symbols
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.8.0.4
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.7.0.4
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	landry_20110318:1.1.1.1
	jschipper:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2016.03.10.17.37.31;	author jturner;	state Exp;
branches;
next	1.11;
commitid	HjqdPsWYMmPNVWGQ;

1.11
date	2015.08.25.18.46.05;	author jturner;	state Exp;
branches;
next	1.10;
commitid	JsKZ7QUejcu3VFsv;

1.10
date	2015.08.24.18.58.17;	author jturner;	state Exp;
branches;
next	1.9;
commitid	i7wqIajSkY5RQL1q;

1.9
date	2015.08.21.15.15.44;	author jturner;	state Exp;
branches;
next	1.8;
commitid	F1nZSXT4AakyBHkv;

1.8
date	2015.04.21.18.19.27;	author sthen;	state Exp;
branches
	1.8.4.1;
next	1.7;
commitid	K3h50UR8bs6rnpEi;

1.7
date	2014.03.09.20.52.18;	author jturner;	state Exp;
branches
	1.7.4.1;
next	1.6;

1.6
date	2013.08.06.23.16.13;	author jturner;	state Exp;
branches;
next	1.5;

1.5
date	2013.07.16.00.24.05;	author jturner;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.11.41.33;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.08.00.11.40;	author jcs;	state Exp;
branches;
next	1.2;

1.2
date	2011.12.13.13.06.23;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.18.18.18.40;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.03.18.18.18.40;	author landry;	state Exp;
branches;
next	;

1.7.4.1
date	2015.08.23.22.24.01;	author jturner;	state Exp;
branches;
next	;
commitid	FtQI9MeXSScgUdJa;

1.8.4.1
date	2015.08.23.22.02.02;	author jturner;	state Exp;
branches;
next	;
commitid	zHeAhgTeBwHERm4K;


desc
@@


1.12
log
@Update tarsnap to 1.0.37.

This version adds several new options, including --passphrase-time option for increased security of passphrase-protected key files, along with minor bug fixes and some additional warnings about common user errors.
@
text
@# $OpenBSD: Makefile,v 1.11 2015/08/25 18:46:05 jturner Exp $

PORTROACH=		limit:.*[^a-z]$$

COMMENT=		client for the tarsnap.com online encrypted backup service
V=			1.0.37
DISTNAME=		tarsnap-autoconf-${V}
PKGNAME=		tarsnap-${V}
CATEGORIES=		sysutils
HOMEPAGE=		http://www.tarsnap.com/
MAINTAINER=		James Turner <james@@calminferno.net>

# May not be modified and may only be used with tarsnap.com
# see http://www.tarsnap.com/legal.html
PERMIT_PACKAGE_CDROM=	restrictive licence
PERMIT_PACKAGE_FTP=	restrictive licence
PERMIT_DISTFILES_FTP=	restrictive licence

WANTLIB += bz2>=10 c crypto lzma pthread z

MASTER_SITES=		https://www.tarsnap.com/download/
EXTRACT_SUFX=		.tgz

LIB_DEPENDS=		archivers/xz \
			archivers/bzip2

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS=-I${LOCALBASE}/include LDFLAGS=-L${LOCALBASE}/lib

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/tarsnap
	mv ${WRKINST}${SYSCONFDIR}/tarsnap.conf.sample ${PREFIX}/share/examples/tarsnap/tarsnap.conf

.include <bsd.port.mk>
@


1.11
log
@Tell PORTROACH to ignore version that end in a-z
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/08/24 18:58:17 jturner Exp $
d6 1
a6 1
V=			1.0.36.1
@


1.10
log
@Update tarsnap to 1.0.36.1.

Fixes a build issue that doesn't affect OpenBSD.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.9 2015/08/21 15:15:44 jturner Exp $
@


1.9
log
@Update tarsnap to 1.0.36.

Due to security and bug fixes this upgrade is strongly recommended.

This version fixes a theoretically exploitable one-byte buffer overflow
when archiving objects with long path names; a vulnerability which
allows a corrupt archive to crash tarsnap; and two bugs which cause
tarsnap to crash if the network is inoperative when it launches. This
version also adds support for performing "dry runs" without tarsnap
keys, which makes it possible to estimate tarsnap usage costs without
first creating a tarsnap account.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/04/21 18:19:27 sthen Exp $
d4 1
a4 1
V=			1.0.36
@


1.8
log
@add some missing pthread to WANTLIB
(using modified portbump, thanks zhuk@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/03/09 20:52:18 jturner Exp $
d4 1
a4 1
V=			1.0.35
a9 1
REVISION=		0
@


1.8.4.1
log
@Backport tarsnap to 1.0.36.

This version fixes a theoretically exploitable one-byte buffer overflow
when archiving objects with long path names; a vulnerability which
allows a corrupt archive to crash tarsnap; and two bugs which cause
tarsnap to crash if the network is inoperative when it launches. This
version also adds support for performing "dry runs" without tarsnap
keys, which makes it possible to estimate tarsnap usage costs without
first creating a tarsnap account.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/04/21 18:19:27 sthen Exp $
d4 1
a4 1
V=			1.0.36
d10 1
@


1.7
log
@Switch MASTER_SITES to https since http redirects to unhelpful directory
index
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/08/06 23:16:13 jturner Exp $
d10 1
d18 2
a22 1
WANTLIB=		c crypto z lzma bz2>=10
@


1.7.4.1
log
@Backport tarsnap to 1.0.36.

This version fixes a theoretically exploitable one-byte buffer overflow
when archiving objects with long path names; a vulnerability which
allows a corrupt archive to crash tarsnap; and two bugs which cause
tarsnap to crash if the network is inoperative when it launches. This
version also adds support for performing "dry runs" without tarsnap
keys, which makes it possible to estimate tarsnap usage costs without
first creating a tarsnap account.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/03/09 20:52:18 jturner Exp $
d4 1
a4 1
V=			1.0.36
d20 1
a20 1
WANTLIB=		c crypto z lzma pthread bz2>=10
@


1.6
log
@Update tarsnap to 1.0.35.


This version fixes a bug in tarsnap 1.0.34 which could cause it to crash
during network glitches and outages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/07/16 00:24:05 jturner Exp $
d17 1
a17 1
MASTER_SITES=		http://www.tarsnap.com/download/
@


1.5
log
@Update tarsnap to 1.0.34.

Thanks to Tim van der Molen for testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:41:33 espie Exp $
d4 1
a4 1
V=			1.0.34
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/09/08 00:11:40 jcs Exp $
d4 1
a4 1
V=			1.0.33
@


1.3
log
@update to tarsnap 1.0.33 from new maintainer James Turner after
another timeout from previous maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/12/13 13:06:23 sthen Exp $
a14 1
PERMIT_DISTFILES_CDROM= restrictive licence
@


1.2
log
@update to tarsnap 1.0.31, from James Turner, maintainer timeout
Includes two SECURITY fixes relating to key generation on multi-user systems
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/03/18 18:18:40 landry Exp $
d4 1
a4 1
V=			1.0.31
d9 1
a9 1
MAINTAINER=		Joachim Schipper <joachim@@joachimschipper.nl>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
V=			1.0.29
@


1.1.1.1
log
@Import tarsnap 1.0.29:

Tarsnap is an online encrypted backup service. It presents a tar-like
command-line interface, but stores data online rather than locally;

From maintainer Joachim Shipper, setting PERMIT_* markers to
'restrictive licence' after lengthy discussion on ports@@
ok sthen@@
@
text
@@
