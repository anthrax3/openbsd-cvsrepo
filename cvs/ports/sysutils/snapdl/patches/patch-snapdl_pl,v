head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.12
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.10
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.6
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.8
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.06.05.20.22.42;	author giovanni;	state Exp;
branches;
next	;
commitid	7dsoS6sj99IkF2HQ;


desc
@@


1.1
log
@
if SHA256.sig is not downloaded sysmerge(8)
cannot use the downloaded etc sets
maintainer timeout
ok landry@@
@
text
@$OpenBSD$
--- snapdl.pl.orig	Sun Jul  4 02:11:32 2010
+++ snapdl.pl	Tue May 13 16:48:57 2014
@@@@ -208,6 +208,7 @@@@ HW: {
 
 print "Getting SHA256 from main mirror\n";
 my $SHA256 = `ftp -o - http://ftp.OpenBSD.org/pub/OpenBSD/snapshots/$hw/SHA256`;
+my $SHA256sig = `ftp -o - http://ftp.OpenBSD.org/pub/OpenBSD/snapshots/$hw/SHA256.sig`;
 
 if ( $SHA256 =~ /base([0-9]{2,2}).tgz/ ) {
         my $r = $1;
@@@@ -343,6 +344,8 @@@@ if ($pretend eq "no") {
         open my $index_txt, '>', 'index.txt' or die $!;
         print $str_index_txt;
         print $index_txt $str_index_txt;
+	 open my $fh_SHA256sig, '>', 'SHA256.sig' or die $!;
+	 print $fh_SHA256sig $SHA256sig;
 }
 
 
@
