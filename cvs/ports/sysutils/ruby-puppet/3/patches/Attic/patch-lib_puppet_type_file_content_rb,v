head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2013.12.20.14.10.41;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2013.11.25.15.56.23;	author ajacoutot;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2013.12.15.19.44.32;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update to puppet-3.4.0
* full changelog http://docs.puppetlabs.com/puppet/3/reference/release_notes.html#puppet-340
@
text
@$OpenBSD: patch-lib_puppet_type_file_content_rb,v 1.1 2013/11/25 15:56:23 ajacoutot Exp $

From 40c67e2cd21c36b34948571c59ebd999c5c4cf21 Mon Sep 17 00:00:00 2001
From: "Dustin J. Mitchell" <dustin@@mozilla.com>
Date: Fri, 9 Aug 2013 16:05:40 -0400
Subject: [PATCH 1/2] (#22129) force explicit file content to be treated as a bytestring

--- lib/puppet/type/file/content.rb.orig	Mon Oct  7 20:00:47 2013
+++ lib/puppet/type/file/content.rb	Mon Nov 25 15:52:36 2013
@@@@ -133,6 +133,9 @@@@ module Puppet
 
     # Make sure we're also managing the checksum property.
     def should=(value)
+      # treat the value as a bytestring, in Ruby versions that support it, regardless of the encoding
+      # in which it has been supplied
+      value = value.clone.force_encoding(Encoding::ASCII_8BIT) if value.respond_to?(:force_encoding)
       @@resource.newattr(:checksum) unless @@resource.parameter(:checksum)
       super
     end
@


1.1
log
@(#22129) force explicit file content to be treated as a bytestring.

ok jasper@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@update puppet to 3.3.2

this allows OpenBSD 5.4 agents to work correctly again with a puppet master
unning -current. puppet 3.3 has a new reporting format as well as support
for ensure => latest for packages. now one can use the same manifest for
5.4 and -current again.

note: libshadow was not imported into 5.4 so managing user passwords won't
work on 5.4 still.

discussed with sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_puppet_type_file_content_rb,v 1.1 2013/11/25 15:56:23 ajacoutot Exp $
@

