head	1.4;
access;
symbols
	OPENBSD_5_4:1.3.0.2;
locks; strict;
comment	@# @;


1.4
date	2013.12.20.14.10.41;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2013.11.09.20.24.12;	author jasper;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2013.10.12.09.20.21;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2013.10.12.09.06.18;	author jasper;	state Exp;
branches;
next	;

1.3.2.1
date	2013.12.15.19.44.32;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update to puppet-3.4.0
* full changelog http://docs.puppetlabs.com/puppet/3/reference/release_notes.html#puppet-340
@
text
@$OpenBSD: patch-lib_puppet_module_tool_tar_rb,v 1.3 2013/11/09 20:24:12 jasper Exp $

From e62dcc78797903d6712b70f3df8eb6d3502628ca Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@@humppa.nl>
Date: Sat, 12 Oct 2013 11:06:54 +0200
Subject: [PATCH] (22853) Let OpenBSD use gtar too.

--- lib/puppet/module_tool/tar.rb.orig	Mon Oct  7 20:00:47 2013
+++ lib/puppet/module_tool/tar.rb	Sat Nov  9 21:20:48 2013
@@@@ -4,7 +4,8 @@@@ module Puppet::ModuleTool::Tar
   require 'puppet/module_tool/tar/mini'
 
   def self.instance(module_name)
-    if Facter.value('osfamily') == 'Solaris' && Puppet::Util.which('gtar') && ! Puppet::Util::Platform.windows?
+    gtar_platforms = ['Solaris', 'OpenBSD']
+    if gtar_platforms.include?(Facter.value('osfamily')) && Puppet::Util.which('gtar')
       Solaris.new
     elsif Puppet::Util.which('tar') && ! Puppet::Util::Platform.windows?
       Gnu.new
@


1.3
log
@sync gtar patch with what's been pushed upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_puppet_module_tool_tar_rb,v 1.2 2013/10/12 09:20:21 jasper Exp $
@


1.3.2.1
log
@update puppet to 3.3.2

this allows OpenBSD 5.4 agents to work correctly again with a puppet master
unning -current. puppet 3.3 has a new reporting format as well as support
for ensure => latest for packages. now one can use the same manifest for
5.4 and -current again.

note: libshadow was not imported into 5.4 so managing user passwords won't
work on 5.4 still.

discussed with sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_puppet_module_tool_tar_rb,v 1.3 2013/11/09 20:24:12 jasper Exp $
@


1.2
log
@submitted upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_puppet_module_tool_tar_rb,v 1.1 2013/10/12 09:06:18 jasper Exp $
d3 1
a3 1
From b08141638fb4771a389850e058130f2975beddd3 Mon Sep 17 00:00:00 2001
d8 2
a9 2
--- lib/puppet/module_tool/tar.rb.orig	Sat Oct 12 11:03:14 2013
+++ lib/puppet/module_tool/tar.rb	Sat Oct 12 11:03:19 2013
d15 2
a16 2
+    if Facter.value('osfamily') == 'Solaris' || Facter.value('osfamily') == 'OpenBSD' \
+      && Puppet::Util.which('gtar') && ! Puppet::Util::Platform.windows?
@


1.1
log
@Tag along with Solaris on using gtar, instead of modifying the gnu tar code.
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 1
Tag along with Solaris on using gtar.
@

