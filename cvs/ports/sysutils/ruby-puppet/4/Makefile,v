head	1.22;
access;
symbols
	OPENBSD_6_1:1.20.0.2
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.9.0.2
	OPENBSD_6_0_BASE:1.9;
locks; strict;
comment	@# @;


1.22
date	2017.07.02.20.45.33;	author sebastia;	state Exp;
branches;
next	1.21;
commitid	hr5rTqImL2UezQwq;

1.21
date	2017.05.22.13.07.44;	author sebastia;	state Exp;
branches;
next	1.20;
commitid	t2l4gVsvasErPC1w;

1.20
date	2017.01.31.18.46.58;	author sebastia;	state Exp;
branches;
next	1.19;
commitid	bmImW3yXuPlPto9E;

1.19
date	2016.12.20.10.41.44;	author sebastia;	state Exp;
branches;
next	1.18;
commitid	viny2WiEv5Vzj6ry;

1.18
date	2016.11.18.14.55.36;	author sebastia;	state Exp;
branches;
next	1.17;
commitid	hP9M0A4iNZM0EJz3;

1.17
date	2016.11.09.13.21.25;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	uPoNDp9K5msf0rDf;

1.16
date	2016.09.30.21.11.45;	author sebastia;	state Exp;
branches;
next	1.15;
commitid	YZKtYq79UQ7vnNZo;

1.15
date	2016.09.21.20.29.31;	author sebastia;	state Exp;
branches;
next	1.14;
commitid	261aJfYmbCP2ZHd6;

1.14
date	2016.09.06.11.26.07;	author jasper;	state Exp;
branches;
next	1.13;
commitid	xEqzJFuEBwCQlM6x;

1.13
date	2016.09.06.09.50.24;	author jasper;	state Exp;
branches;
next	1.12;
commitid	RkpB3zbMRAAshX8p;

1.12
date	2016.09.05.08.50.26;	author jasper;	state Exp;
branches;
next	1.11;
commitid	RdhJk5t4bKdAvfRs;

1.11
date	2016.08.30.12.09.07;	author jasper;	state Exp;
branches;
next	1.10;
commitid	Asln0Ne5fxKnqMZm;

1.10
date	2016.08.11.11.41.42;	author jasper;	state Exp;
branches;
next	1.9;
commitid	VZ1XCW0C7rjoGBrE;

1.9
date	2016.06.29.16.14.44;	author espie;	state Exp;
branches;
next	1.8;
commitid	c1yQMbJbfo0CFBcL;

1.8
date	2016.06.15.07.11.38;	author jasper;	state Exp;
branches;
next	1.7;
commitid	DfhDf9OcaOTo4TLW;

1.7
date	2016.06.13.17.48.53;	author sebastia;	state Exp;
branches;
next	1.6;
commitid	saznpTxNaI7wtlwq;

1.6
date	2016.06.02.07.01.12;	author jasper;	state Exp;
branches;
next	1.5;
commitid	t5V3wqkLVUMRMAa6;

1.5
date	2016.06.01.12.02.45;	author jasper;	state Exp;
branches;
next	1.4;
commitid	yJWvIJ0K8agbIySX;

1.4
date	2016.06.01.09.10.23;	author jasper;	state Exp;
branches;
next	1.3;
commitid	ulC1Fr9aUQfBlzXf;

1.3
date	2016.05.30.11.18.22;	author jasper;	state Exp;
branches;
next	1.2;
commitid	zFmYCTu4JHZF066X;

1.2
date	2016.04.28.16.02.33;	author jasper;	state Exp;
branches;
next	1.1;
commitid	I3KF7xVAiq8Q4K3k;

1.1
date	2016.04.28.11.53.09;	author jasper;	state Exp;
branches;
next	;
commitid	4hD94I7AYHJCJ15e;


desc
@@


1.22
log
@Update to 4.10.4

with the openbsd package provider, don't look
into pkg.conf anymore to find the installation source, just let
pkg_add do it's magic, or rely on environment variables..
@
text
@# $OpenBSD: Makefile,v 1.21 2017/05/22 13:07:44 sebastia Exp $

PORTROACH=		limit:^4

VERSION=		4.10.4

RUN_DEPENDS+=		databases/ruby-hiera3,${MODRUBY_FLAVOR} \
			devel/ruby-gettext-setup,${MODRUBY_FLAVOR}>=0.10,<1 \
			devel/ruby-locale,${MODRUBY_FLAVOR}>=2.1,<3 \
			devel/ruby-rgen,${MODRUBY_FLAVOR} \
			sysutils/facter

pre-install:
	${SUBST_CMD} ${WRKDIST}/lib/puppet/provider/package/gem.rb \
		${WRKDIST}/lib/puppet/provider/package/pip.rb \
		${WRKSRC}/lib/puppet/reference/configuration.rb \
		${WRKSRC}/lib/puppet/util/run_mode.rb \
		${WRKSRC}/lib/puppet/defaults.rb \
		${WRKSRC}/ext/rack/config.ru

do-install:
	@@cd ${WRKSRC} && ${ALL_FAKE_FLAGS} ${RUBY} install.rb \
		--vardir=${LOCALSTATEDIR}/db/puppet/cache/ \
		--rundir=${LOCALSTATEDIR}/run/puppetlabs/
	mv ${WRKINST}${SYSCONFDIR}/puppetlabs ${PREFIX}/${MODRUBY_RELEXAMPLEDIR}-puppet
	${INSTALL_DATA} ${WRKSRC}/conf/*.conf ${PREFIX}/${MODRUBY_RELEXAMPLEDIR}-puppet/puppet/
	${INSTALL_DATA} ${WRKSRC}/ext/rack/config.ru ${PREFIX}/${MODRUBY_RELEXAMPLEDIR}-puppet/puppet/

.include <bsd.port.mk>
@


1.21
log
@Long overdue update 4.8.4 -> 4.10.1
Check Puppet release notes for detailed
changes for all the revisions in between.

runs for me since a week without issues.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2017/01/31 18:46:58 sebastia Exp $
d5 1
a5 1
VERSION=		4.10.1
@


1.20
log
@small bugfix update to 4.8.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/12/20 10:41:44 sebastia Exp $
d5 1
a5 1
VERSION=		4.8.2
d8 2
@


1.19
log
@Simple update to 4.8.1, runs for me since some days
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/11/18 14:55:36 sebastia Exp $
d5 1
a5 1
VERSION=		4.8.1
@


1.18
log
@Update to 4.8.0

See release notes for the changes:
https://docs.puppet.com/puppet/4.8/reference/release_notes.html#puppet-480

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/11/09 13:21:25 ajacoutot Exp $
d5 1
a5 1
VERSION=		4.8.0
@


1.17
log
@VARBASE -> LOCALSTATEDIR.
Don't hardcode /var.
Create the complete hierarchy of @@sampled files to allow proper cleanup at
deinstall time.

ok sebastia@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/09/30 21:11:45 sebastia Exp $
d5 1
a5 2
VERSION=		4.7.0
REVISION=		0
@


1.16
log
@Update to 4.7.0

Fixes just a single critical bug:
https://docs.puppet.com/puppet/4.7/reference/release_notes.html#critical-bug-fix


OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2016/09/21 20:29:31 sebastia Exp $
d6 1
d22 2
a23 2
		--vardir=${VARBASE}/db/puppet/cache/ \
		--rundir=${VARBASE}/run/puppetlabs/
@


1.15
log
@Do not nail puppet to ruby 2.2, works well with ruby 2.3

feedback/OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2016/09/06 11:26:07 jasper Exp $
d5 1
a5 2
VERSION=		4.6.2
REVISION=		2
@


1.14
log
@sebastia@@ is the new puppetmaster
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/09/06 09:50:24 jasper Exp $
d6 1
a6 1
REVISION=		1
@


1.13
log
@@@sample /var/puppetlabs/, from semarie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/09/05 08:50:26 jasper Exp $
d6 1
a6 1
REVISION=		0
@


1.12
log
@update to puppet-4.6.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/08/30 12:09:07 jasper Exp $
d6 1
@


1.11
log
@update to puppet-4.6.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/08/11 11:41:42 jasper Exp $
d5 1
a5 1
VERSION=		4.6.1
@


1.10
log
@update to puppet-4.5.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/06/29 16:14:44 espie Exp $
d5 1
a5 1
VERSION=		4.5.3
@


1.9
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/06/15 07:11:38 jasper Exp $
d5 1
a5 2
VERSION=		4.5.2
REVISION =		0
@


1.8
log
@- update to puppet-4.5.2

https://docs.puppet.com/puppet/4.5/reference/release_notes.html#puppet-452
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/06/13 17:48:53 sebastia Exp $
d6 1
@


1.7
log
@Similar patch as to Puppet 3 in order to pass trusted facts to unicorn
behind apache/nginx

OK jasper@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2016/06/02 07:01:12 jasper Exp $
d5 1
a5 2
VERSION=		4.5.1
REVISION=		0
@


1.6
log
@update to puppet-4.5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/06/01 12:02:45 jasper Exp $
d6 1
@


1.5
log
@rgen is not required by puppet 3 unless the future parser is used
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2016/06/01 09:10:23 jasper Exp $
d5 1
a5 2
VERSION=		4.5.0
REVISION=		0
@


1.4
log
@group SUBST_CMD invocations; spotted by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/05/30 11:18:22 jasper Exp $
d6 1
d9 1
@


1.3
log
@update to puppet-4.5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/04/28 16:02:33 jasper Exp $
d11 6
a16 4
	${SUBST_CMD} ${WRKDIST}/lib/puppet/provider/package/gem.rb
	${SUBST_CMD} ${WRKDIST}/lib/puppet/provider/package/pip.rb
	${SUBST_CMD} ${WRKSRC}/lib/puppet/reference/configuration.rb
	${SUBST_CMD} ${WRKSRC}/lib/puppet/util/run_mode.rb
a18 1
	${SUBST_CMD} ${WRKSRC}/lib/puppet/defaults.rb ${WRKSRC}/ext/rack/config.ru
@


1.2
log
@- move common bits back to Makefile.inc in post-install
- gunzip puppet 4 manpages
- install emacs files for puppet 4
- move files.conf to puppet 3
- install some extra config files for puppet 4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2016/04/28 11:53:09 jasper Exp $
d5 1
a5 1
VERSION=		4.4.2
@


1.1
log
@import puppet 4.4.2

basic agent functionality seem to be working, however i want to make further
changes and testing before hooking it up.
@
text
@d1 1
a1 1
# $OpenBSD$
d22 2
a23 1

@

