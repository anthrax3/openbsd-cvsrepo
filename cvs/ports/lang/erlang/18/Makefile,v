head	1.10;
access;
symbols
	OPENBSD_6_1:1.10.0.2
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.9.0.2
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.8.0.2
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5;
locks; strict;
comment	@# @;


1.10
date	2016.09.01.10.53.27;	author jasper;	state Exp;
branches;
next	1.9;
commitid	LdsIxWmxagN2Kq33;

1.9
date	2016.06.29.16.14.41;	author espie;	state Exp;
branches;
next	1.8;
commitid	c1yQMbJbfo0CFBcL;

1.8
date	2015.11.27.19.19.02;	author jasper;	state Exp;
branches;
next	1.7;
commitid	W1qbqkl6HUe3C6qu;

1.7
date	2015.11.27.14.24.05;	author jasper;	state Exp;
branches;
next	1.6;
commitid	IE38PpRwCV8st39M;

1.6
date	2015.10.28.19.18.31;	author jasper;	state Exp;
branches;
next	1.5;
commitid	HEEeJ7SAXBoL9up8;

1.5
date	2015.07.11.11.00.55;	author jasper;	state Exp;
branches;
next	1.4;
commitid	VaVqQQtV2AEqke9O;

1.4
date	2015.07.09.19.46.39;	author jasper;	state Exp;
branches;
next	1.3;
commitid	OfJHHzSctAxuOXrh;

1.3
date	2015.06.27.12.17.59;	author jasper;	state Exp;
branches;
next	1.2;
commitid	SHg2lPnLvTgh3u4P;

1.2
date	2015.06.26.07.33.18;	author jasper;	state Exp;
branches;
next	1.1;
commitid	F72JlmOW1lEpBfZZ;

1.1
date	2015.06.26.06.35.54;	author jasper;	state Exp;
branches;
next	;
commitid	SUV8NcoFHkJmjdXD;


desc
@@


1.10
log
@retire sparc
@
text
@# $OpenBSD: Makefile,v 1.9 2016/06/29 16:14:41 espie Exp $

BROKEN-alpha=	beam/erl_process.c:6692: internal compiler error: in final_scan_insn, at final.c:2449
BROKEN-hppa =	error: No native atomic implementation found.

COMMENT-main=	${COMMENT}
COMMENT-wx=	WxWidgets bindings for Erlang

V=		18.1
MAJ_V=		18
EPOCH=		0
DISTNAME=	otp_src_$V
PKGNAME-main=	erlang-$V
PKGNAME-wx=	erlang-wx-$V

REVISION-main=	1
REVISION-wx=	1

VERSION_SPEC=	>=18v0,<19v0
PKGSPEC-main=	erlang-${VERSION_SPEC}
PKGSPEC-wx=	erlang-wx-${VERSION_SPEC}

BUILD_DEPENDS+=	textproc/libxslt

CONFIGURE_ARGS=	--without-jinterface	\
		--without-odbc		\
		--enable-threads 	\
		--enable-kernel-poll	\
		--disable-hipe		\
		--enable-smp-support

MULTI_PACKAGES = -main -wx

WANTLIB =	m pthread
WANTLIB-main =	${WANTLIB} c crypto kvm ncurses util

WANTLIB-wx += ${WANTLIB} GL GLU stdc++ wx_base wx_base_xml wx_gtk2_adv
WANTLIB-wx += wx_gtk2_aui wx_gtk2_core wx_gtk2_gl wx_gtk2_html wx_gtk2_stc
WANTLIB-wx += wx_gtk2_xrc

LIB_DEPENDS-wx +=x11/wxWidgets>=2.8.12p10
RUN_DEPENDS-wx =${BASE_PKGPATH},-main>=${MAJ_V}

DOC_DIR=	${PREFIX}/lib/erlang${MAJ_V}/
FAKE_FLAGS =	libdir_suffix="/erlang${MAJ_V}"

# Use the target 'gen-versions' to update this list
ERL_VERSIONS=	\
ASN1_VSN        4.0 \
COMMON_TEST_VSN 1.11 \
COMPILER_VSN    6.0.1 \
COSEVENTDOMAIN_VSN      1.2 \
COSEVENT_VSN    2.2 \
COSFILETRANSFER_VSN     1.2 \
COSNOTIFICATION_VSN     1.2 \
COSPROPERTY_VSN 1.2 \
COSTIME_VSN     1.2 \
COSTRANSACTIONS_VSN     1.3 \
CRYPTO_VSN      3.6.1 \
DEBUGGER_VSN    4.1.1 \
DIALYZER_VSN    2.8.1 \
DIAMETER_VSN    1.11 \
EDOC_VSN        0.7.17 \
EI_VSN  3.8 \
ELDAP_VSN       1.2 \
EMACS_VSN       2.7.0 \
ERL_DOCGEN_VSN  0.4 \
ERL_INTERFACE_VSN       3.8 \
ET_VSN  1.5.1 \
EUNIT_VSN       2.2.11 \
GS_VSN  1.6 \
HIPE_VSN        3.13 \
IC_VSN  4.4 \
INETS_VSN       6.0.1 \
JINTERFACE_VSN  1.6 \
KERNEL_VSN      4.1 \
MEGACO_VSN      3.18 \
MNESIA_VSN      4.13.1 \
OBSERVER_VSN    2.1 \
ODBC_VSN        2.11.1 \
ORBER_VSN       3.8 \
OSE_VSN 1.1 \
OS_MON_VSN      2.4 \
OTP_MIBS_VSN    1.1 \
PARSETOOLS_VSN  2.1 \
PERCEPT_VSN     0.8.11 \
PUBLIC_KEY_VSN  1.0.1 \
RELTOOL_VSN     0.7 \
RUNTIME_TOOLS_VSN       1.9.1 \
SASL_VSN        2.6 \
SNMP_VSN        5.2 \
SSH_VSN 4.1 \
SSL_VSN 7.1 \
STDLIB_VSN      2.6 \
SYNTAX_TOOLS_VSN        1.7 \
TEST_SERVER_VSN 3.9 \
TOOLS_VSN       2.8.1 \
TYPER_VSN       0.9.9 \
WX_VSN  1.5 \
XMERL_VSN       1.3.8 \
WEBTOOL_VSN     0.9 \
ERTS_VSN        7.1

SYSTEM_VSN=	${V:R}

.include <bsd.port.mk>
@


1.9
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/11/27 19:19:02 jasper Exp $
a4 1
BROKEN-sparc=	Requires v9|v9a|v9b; requested architecture is sparclite.
@


1.8
log
@remove html documentation from the erlang packages, but keep the manpages. the
html documentation is available online (http://www.erlang.org/erldoc) where
it's searchable (offline it isn't).
This saves about 18M for -main (1/3rd) and 14M for -wx.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/11/27 14:24:05 jasper Exp $
d17 2
a18 2
REVISION-main=	0
REVISION-wx=	0
@


1.7
log
@update to erlang-18.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/10/28 19:18:31 jasper Exp $
d16 3
@


1.6
log
@- fix symlink for erl_call
- add erl_call to _MODERL_LINKS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/07/11 11:00:55 jasper Exp $
d10 1
a10 1
V=		18.0
a16 2
REVISION-main=	2

d49 1
a49 1
COMPILER_VSN    6.0 \
d57 4
a60 4
CRYPTO_VSN      3.6 \
DEBUGGER_VSN    4.1 \
DIALYZER_VSN    2.8 \
DIAMETER_VSN    1.10 \
d68 1
a68 1
EUNIT_VSN       2.2.10 \
d70 1
a70 1
HIPE_VSN        3.12 \
d72 1
a72 1
INETS_VSN       6.0 \
d74 1
a74 1
KERNEL_VSN      4.0 \
d76 1
a76 1
MNESIA_VSN      4.13 \
d78 1
a78 1
ODBC_VSN        2.11 \
d85 1
a85 1
PUBLIC_KEY_VSN  1.0 \
d87 2
a88 2
RUNTIME_TOOLS_VSN       1.9 \
SASL_VSN        2.5 \
d90 3
a92 3
SSH_VSN 4.0 \
SSL_VSN 7.0 \
STDLIB_VSN      2.5 \
d95 1
a95 1
TOOLS_VSN       2.8 \
d97 1
a97 1
WX_VSN  1.4 \
d100 1
a100 1
ERTS_VSN        7.0
@


1.5
log
@missed bump; spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/07/09 19:46:39 jasper Exp $
d17 1
a17 1
REVISION-main=	1
@


1.4
log
@- unbreak linking of wx bindings now that wxwidgets has been fixed
- move all wx and observer bits into a wx subpackage

this shrinks the main package by about 18M
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/06/27 12:17:59 jasper Exp $
d17 1
a17 1
REVISION-main=	0
@


1.3
log
@missing BDEP on libxslt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/06/26 07:33:18 jasper Exp $
d7 3
d12 1
d14 4
a17 4
PKGNAME=	erlang-$V
REVISION=	0
EPOCH=		0
PKGSPEC=	erlang->=18v0,<19v0
d19 3
a21 1
WANTLIB=	c crypto kvm m ncurses pthread util
d31 12
@


1.2
log
@mark SHARED_ONLY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2015/06/26 06:35:54 jasper Exp $
d16 2
@


1.1
log
@add erlang 18: http://www.erlang.org/news/88

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/06/23 20:51:58 jasper Exp $
d11 1
@

