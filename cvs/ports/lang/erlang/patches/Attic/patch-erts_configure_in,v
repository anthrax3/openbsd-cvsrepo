head	1.8;
access;
symbols
	OPENBSD_5_6:1.7.0.8
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.6
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.4
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2014.12.31.13.18.24;	author jasper;	state dead;
branches;
next	1.7;
commitid	YhOZG7UrOuQnvDxB;

1.7
date	2012.09.10.20.35.19;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.06.00.57.54;	author matthew;	state Exp;
branches;
next	1.5;

1.5
date	2011.12.23.13.40.13;	author jasper;	state dead;
branches;
next	1.4;

1.4
date	2011.07.05.20.07.49;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2007.07.04.05.38.58;	author steven;	state dead;
branches;
next	1.2;

1.2
date	2007.03.29.17.18.57;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.02.03.11.48.39;	author steven;	state Exp;
branches;
next	;


desc
@@


1.8
log
@- update to erlang-R16B03-1
* not updating to the latest erlang (17.4) as there's no version of riak that
  supports it yet, and ejabberd needs a major update to 14.12 (beginnings of
  such an update are in openbsd-wip)

as discussed with jmatthew@@
@
text
@$OpenBSD: patch-erts_configure_in,v 1.7 2012/09/10 20:35:19 jasper Exp $
--- erts/configure.in.orig	Mon Sep  3 11:58:05 2012
+++ erts/configure.in	Mon Sep 10 08:55:28 2012
@@@@ -3575,6 +3575,11 @@@@ case $host_os in
 			DED_LDFLAGS="-m32 $DED_LDFLAGS"
 		fi
 	;;	
+	openbsd*)
+		DED_LD="$CC"
+		DED_LD_FLAG_RUNTIME_LIBRARY_PATH="$CFLAG_RUNTIME_LIBRARY_PATH"
+		DED_LDFLAGS="-shared"
+	;;
 	osf*)
 		# NOTE! Whitespace after -rpath is important.
 		DED_LD_FLAG_RUNTIME_LIBRARY_PATH="-rpath "
@


1.7
log
@- update erlang to R15B02
@
text
@d1 1
a1 1
$OpenBSD: patch-erts_configure_in,v 1.6 2012/09/06 00:57:54 matthew Exp $
@


1.6
log
@Link DSOs with 'cc -shared' instead of 'ld -shared' so that
__guard_local is defined appropriately.

ok nigel
@
text
@d1 4
a4 4
$OpenBSD$
--- erts/configure.in.orig	Sun Apr  1 11:15:00 2012
+++ erts/configure.in	Wed Sep  5 14:52:08 2012
@@@@ -3548,6 +3548,11 @@@@ case $host_os in
@


1.5
log
@- update to R14B04
- fix conflict with speech-dispatcher
- fix gen-versions target
- i386 ethread compat

update to R14B04 from dlg@@, rest by piotr sikora and me
tested with rabbitmq and ejabberd on amd64; sparc64 is still happy too

maintainer timed-out
@
text
@d1 15
a15 13
$OpenBSD: patch-erts_configure_in,v 1.4 2011/07/05 20:07:49 landry Exp $
--- erts/configure.in.orig
+++ erts/configure.in
@@@@ -1698,6 +1698,9 @@@@ AC_CHECK_FUNCS([ieee_handler fpsetmask finite isnan isinf res_gethostbyname dlop
 		gethrtime localtime_r gmtime_r mmap mremap memcpy mallopt \
 		sbrk _sbrk __sbrk brk _brk __brk \
 		flockfile fstat strlcpy strlcat setsid posix2time setlocale nl_langinfo poll])
+
+AC_CHECK_DECLS([posix2time],,,[#include <time.h>])
+
 if test "X$host" = "Xwin32"; then
 	ac_cv_func_setvbuf_reversed=yes
 fi
@


1.4
log
@add forgotten patch
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@update to R11B-5

from maintainer Jon Olsson
@
text
@d1 13
a13 20
$OpenBSD: patch-erts_configure_in,v 1.2 2007/03/29 17:18:57 steven Exp $
--- erts/configure.in.orig	Tue Mar 27 15:28:23 2007
+++ erts/configure.in	Thu Mar 29 17:56:01 2007
@@@@ -1923,14 +1923,14 @@@@ static __inline__ int check_fpe(double f)
 
 #endif
 
-#if (defined(__linux__) && (defined(__i386__) || defined(__x86_64__) || defined(__sparc__) || defined(__powerpc__))) || (defined(__DARWIN__) && (defined(__i386__) || defined(__ppc__))) || (defined(__FreeBSD__) && (defined(__i386__) || defined(__x86_64__))) || (defined(__sun__) && defined(__x86_64__))
+#if (defined(__linux__) && (defined(__i386__) || defined(__x86_64__) || defined(__sparc__) || defined(__powerpc__))) || (defined(__DARWIN__) && (defined(__i386__) || defined(__ppc__))) || ((defined(__OpenBSD__) || defined(__FreeBSD__)) && (defined(__i386__) || defined(__x86_64__))) || (defined(__sun__) && defined(__x86_64__))
 
 #if defined(__linux__) && defined(__i386__)
 #include <asm/sigcontext.h>
 #elif defined(__FreeBSD__) && defined(__i386__)
 #include <sys/types.h>
 #include <machine/npx.h>
-#elif defined(__FreeBSD__) && defined(__x86_64__)
+#elif (defined(__OpenBSD__) || defined(__FreeBSD__)) && defined(__x86_64__)
 #include <sys/types.h>
 #include <machine/fpu.h>
 #endif
@


1.2
log
@update to erlang R11B-4

from maintainer Jon Olsson
@
text
@d1 1
a1 1
$OpenBSD: patch-erts_configure_in,v 1.1 2007/02/03 11:48:39 steven Exp $
@


1.1
log
@update to erlang-11b.3

from maintainer Jon Olsson
@
text
@d1 4
a4 4
$OpenBSD$
--- erts/configure.in.orig	Wed Jan 31 17:36:19 2007
+++ erts/configure.in	Wed Jan 31 17:37:08 2007
@@@@ -1855,14 +1855,14 @@@@ static __inline__ int check_fpe(double f
@

