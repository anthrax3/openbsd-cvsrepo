head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.6
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.06.25.13.16.08;	author jasper;	state Exp;
branches;
next	;
commitid	j76t3576lMCSfTg1;


desc
@@


1.1
log
@- de-conflict erlang versions so they can be installed along-side
* erlang now gets installed into lib/erlang${MAJOR}/ and binaries get a ${MAJOR} suffix
@
text
@$OpenBSD$

Create versioned symlinks in ${PREFIX}/bin/

--- make/install_bin.orig	Tue Mar 31 14:32:52 2015
+++ make/install_bin	Thu Jun 25 09:14:04 2015
@@@@ -690,9 +690,9 @@@@ done
 
 # do it
 for file in "$@@"; do
-    echo $ln_s "$DQ$src_dir/$file$DQ" "$file"
-    $dbg $ln_s    "$src_dir/$file"    "$file" || {
-	test "$tst" = "" || echo "{error,{$type,\"$file\",failed}}." > $tst
+    echo $ln_s "$DQ$src_dir/$file$DQ" "${file}${MAJ_V}"
+    $dbg $ln_s    "$src_dir/$file"    "${file}${MAJ_V}" || {
+	test "$tst" = "" || echo "{error,{$type,\"$file${MAJ_V}\",failed}}." > $tst
 	exit 1
     }
 done
@
