head	1.3;
access;
symbols
	OPENBSD_3_3:1.2.0.14
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.12
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.10
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.8
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.6
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.4
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.1.1.1.0.8
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.6
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	STk-3_1:1.1.1.1
	STk:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2003.05.19.08.50.43;	author naddy;	state dead;
branches;
next	1.2;

1.2
date	99.11.24.04.22.22;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	98.02.05.17.17.22;	author don;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.02.05.17.17.22;	author don;	state Exp;
branches;
next	;


desc
@@


1.3
log
@* Update to 4.0.1, which also fixes DESTDIR/PREFIX handling.
* Fix dynamic loading patches.
* General clean-up.
@
text
@--- Makefile.in.orig	Thu Sep 26 17:12:00 1996
+++ Makefile.in	Sat Oct 30 22:46:53 1999
@@@@ -73,7 +73,7 @@@@
 	@@echo "SH_LDFLAGS	= @@SH_LDFLAGS@@"			>> config.make
 	@@echo "SH_LOADER	= @@SH_LOADER@@"			>> config.make
 	@@echo "SH_SUFFIX	= @@SH_SUFFIX@@"			>> config.make
-	@@echo "LIB_MALLOC	= @@LIB_MALLOC@@"			>> config.make
+	@@echo "LIB_MALLOC	= "				>> config.make
 	@@echo "LIB_DLD		= @@LIB_DLD@@"			>> config.make
 	@@echo "STK_LIBRARY	= $(libdir)"			>> config.make
 
@@@@ -105,7 +105,7 @@@@
 demos:
 	/bin/sh -c "(cd Demos; ../Src/test-stk -f hbrowse README.html)"
 
-install: clean-before
+install:
 	(cd Tcl;     	$(MAKE) install)
 	(cd Tk;      	$(MAKE) install)
 	(cd Mp;		$(MAKE) install)
@@@@ -116,6 +116,7 @@@@
 	(cd Extensions; $(MAKE) install)
 	(cd Demos;   	$(MAKE) install)
 	(cd Help;	$(MAKE) install)
+	(cd Doc;	$(MAKE) install.man)
 	@@echo ""
 	@@echo "Installation completed."
 
@


1.2
log
@- remove BROKEN tag
- upgrade to STk 3.1.1
- change maintainer to ports@@
- fix PLIST problem by using sed for some variable substitution
- fix compilation on archs that do not support dynamic loading of modules
  (fixes compilation on Alpha, needs testing on pmax and arc)
@
text
@@


1.1
log
@Initial revision
@
text
@d1 28
a28 163
diff -cr STk-3.1/Makefile.in STk-3.1.new/Makefile.in
*** STk-3.1/Makefile.in	Wed Jul 24 12:53:04 1996
--- STk-3.1.new/Makefile.in	Tue Sep 17 15:26:07 1996
***************
*** 73,79 ****
  	@@echo "SH_LDFLAGS	= @@SH_LDFLAGS@@"			>> config.make
  	@@echo "SH_LOADER	= @@SH_LOADER@@"			>> config.make
  	@@echo "SH_SUFFIX	= @@SH_SUFFIX@@"			>> config.make
! 	@@echo "LIB_MALLOC	= @@LIB_MALLOC@@"			>> config.make
  	@@echo "LIB_DLD		= @@LIB_DLD@@"			>> config.make
  		
  	@@echo "STK_LIBRARY	= $(libdir)"			>> config.make
--- 73,79 ----
  	@@echo "SH_LDFLAGS	= @@SH_LDFLAGS@@"			>> config.make
  	@@echo "SH_LOADER	= @@SH_LOADER@@"			>> config.make
  	@@echo "SH_SUFFIX	= @@SH_SUFFIX@@"			>> config.make
! 	@@echo "LIB_MALLOC	= "				>> config.make
  	@@echo "LIB_DLD		= @@LIB_DLD@@"			>> config.make
  		
  	@@echo "STK_LIBRARY	= $(libdir)"			>> config.make
***************
*** 108,114 ****
  demos:
  	/bin/sh -c "(cd Demos; ../Src/test-stk -f hbrowse README.html)"
  
! install: clean-before
  	(cd Tcl;     	$(MAKE) install)
  	(cd Tk;      	$(MAKE) install)
  	(cd Mp;		$(MAKE) install)
--- 108,114 ----
  demos:
  	/bin/sh -c "(cd Demos; ../Src/test-stk -f hbrowse README.html)"
  
! install:
  	(cd Tcl;     	$(MAKE) install)
  	(cd Tk;      	$(MAKE) install)
  	(cd Mp;		$(MAKE) install)
diff -cr STk-3.1/Snow/io.c STk-3.1.new/Snow/io.c
*** STk-3.1/Snow/io.c	Sun Jul 21 03:54:35 1996
--- STk-3.1.new/Snow/io.c	Tue Sep 17 15:25:42 1996
***************
*** 90,96 ****
        if (Tk_initialized) {
  	filled = 0;
  	while (!filled) {
! 	  Tcl_DoOneEvent(TK_DONT_WAIT);
  	  if (Tk_GetNumMainWindows() <= 0) return EOF;
  	}
        }
--- 90,96 ----
        if (Tk_initialized) {
  	filled = 0;
  	while (!filled) {
! 	  Tcl_DoOneEvent(0);
  	  if (Tk_GetNumMainWindows() <= 0) return EOF;
  	}
        }
diff -cr STk-3.1/Src/io.c STk-3.1.new/Src/io.c
*** STk-3.1/Src/io.c	Sun Jul 21 03:54:35 1996
--- STk-3.1.new/Src/io.c	Tue Sep 17 15:25:42 1996
***************
*** 90,96 ****
        if (Tk_initialized) {
  	filled = 0;
  	while (!filled) {
! 	  Tcl_DoOneEvent(TK_DONT_WAIT);
  	  if (Tk_GetNumMainWindows() <= 0) return EOF;
  	}
        }
--- 90,96 ----
        if (Tk_initialized) {
  	filled = 0;
  	while (!filled) {
! 	  Tcl_DoOneEvent(0);
  	  if (Tk_GetNumMainWindows() <= 0) return EOF;
  	}
        }
*** STk-3.1/Lib/Makefile	Mon Jul 22 06:50:06 1996
--- STk-3.1.new/Lib/Makefile	Tue Sep 17 15:36:07 1996
***************
*** 18,24 ****
  	-if [ ! -d $(SITE_SCHEME) ] ; then mkdir -p $(SITE_SCHEME); fi
  	-if [ ! -d $(STK_IMAGES) ] ; then mkdir -p $(STK_IMAGES); fi
  	-if [ ! -d $(STK_STK) ] ; then mkdir -p $(STK_STK); fi
! 	for i in *.stk *.stklos prolog.ps STk.init; \
  	do \
  	  sed -e 's=/usr/local/lib/stk=$(libdir)=' \
  	      -e 's=/usr/local/bin=$(bindir)=' $$i > $(STK_STK)/$$i ;\
--- 18,24 ----
  	-if [ ! -d $(SITE_SCHEME) ] ; then mkdir -p $(SITE_SCHEME); fi
  	-if [ ! -d $(STK_IMAGES) ] ; then mkdir -p $(STK_IMAGES); fi
  	-if [ ! -d $(STK_STK) ] ; then mkdir -p $(STK_STK); fi
! 	for i in *.stk prolog.ps STk.init; \
  	do \
  	  sed -e 's=/usr/local/lib/stk=$(libdir)=' \
  	      -e 's=/usr/local/bin=$(bindir)=' $$i > $(STK_STK)/$$i ;\
*** STk-3.1/Tk/unix/Makefile.in	Tue Sep 17 15:47:29 1996
--- STk-3.1.new/Tk/unix/Makefile.in	Tue Sep 17 15:57:13 1996
***************
*** 75,86 ****
  # X11 include files accessible (the configure script will try to
  # set this value, and will cause it to be an empty string if the
  # include files are accessible via /usr/include).
! X11_INCLUDES =		@@XINCLUDES@@
  
  # Linker switch(es) to use to link with the X11 library archive (the
  # configure script will try to set this value automatically, but you
  # can override it).
! X11_LIB_SWITCHES =	@@XLIBSW@@
  
  # Libraries to use when linking:  must include at least Tk, Tcl, Xlib,
  # and the math library (in that order).  The "LIBS" part will be
--- 75,86 ----
  # X11 include files accessible (the configure script will try to
  # set this value, and will cause it to be an empty string if the
  # include files are accessible via /usr/include).
! X11_INCLUDES =		-I/usr/X11R6/include/
  
  # Linker switch(es) to use to link with the X11 library archive (the
  # configure script will try to set this value automatically, but you
  # can override it).
! X11_LIB_SWITCHES =	-L/usr/X11R6/lib/
  
  # Libraries to use when linking:  must include at least Tk, Tcl, Xlib,
  # and the math library (in that order).  The "LIBS" part will be
***************
*** 188,196 ****
  CC =		@@CC@@
  CC_SWITCHES =	$(STKCFLAGS) $(DFLGS) $(ALLOC) ${CFLAGS} -I${UNIX_DIR} \
  		-I${GENERIC_DIR} \
! 		-I../../Tcl -I../../Src -I${BMAP_DIR} -I${TCL_DIR} \
  		${AC_FLAGS} ${PROTO_FLAGS} ${SECURITY_FLAGS} ${MEM_DEBUG_FLAGS} \
! 		${KEYSYM_FLAGS} 
  
  WISH_OBJS = tkAppInit.o
  
--- 188,196 ----
  CC =		@@CC@@
  CC_SWITCHES =	$(STKCFLAGS) $(DFLGS) $(ALLOC) ${CFLAGS} -I${UNIX_DIR} \
  		-I${GENERIC_DIR} \
! 		-I../../Tcl -I../../Src -I${BMAP_DIR} -I${TCLDIR} \
  		${AC_FLAGS} ${PROTO_FLAGS} ${SECURITY_FLAGS} ${MEM_DEBUG_FLAGS} \
! 		${KEYSYM_FLAGS} ${X11_INCLUDES}
  
  WISH_OBJS = tkAppInit.o
  
***************
*** 285,291 ****
  
  test: tktest
  	@@cwd=`pwd`; \
! 	cd $(TCL_DIR); TCL_LIBRARY=`pwd`/../library; export TCL_LIBRARY; \
  	cd $$cwd; cd $(TOP_DIR); TK_LIBRARY=`pwd`/library; export TK_LIBRARY; \
  	cd $$cwd; ( echo cd $(TOP_DIR)/tests\; source all\; exit ) | ./tktest
  
--- 285,291 ----
  
  test: tktest
  	@@cwd=`pwd`; \
! 	cd $(TCLDIR); TCL_LIBRARY=`pwd`/../library; export TCL_LIBRARY; \
  	cd $$cwd; cd $(TOP_DIR); TK_LIBRARY=`pwd`/library; export TK_LIBRARY; \
  	cd $$cwd; ( echo cd $(TOP_DIR)/tests\; source all\; exit ) | ./tktest
  
@


1.1.1.1
log
@Initial import
@
text
@@
