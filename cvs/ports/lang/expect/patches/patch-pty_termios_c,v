head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.16
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.14
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.10
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.12
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.8
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.0.10
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.8
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.6
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.05.15.09.46.28;	author sebastia;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.24.14.16.50;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update expect to 5.45. The dependency to Tk is gone. When needed to
steer Tk GUI apps, load the module in wish: package require Expect

Updated version also builds on VAX, and makes the loading of the
Expect module work on all other archs.

tests, comments feedback and OK sthen@@, giovanni@@
@
text
@$OpenBSD$

fix explicit declaration of function openpty

--- pty_termios.c.orig	Fri Aug 27 23:51:53 2010
+++ pty_termios.c	Sun Apr 28 17:04:37 2013
@@@@ -16,6 +16,8 @@@@ would appreciate credit if you use this file or parts 
 
 #include "expect_cf.h"
 
+extern char * expErrnoMsg(int);
+
 /*
    The following functions are linked from the Tcl library.  They
    don't cause anything else in the library to be dragged in, so it
@@@@ -43,6 +45,10 @@@@ According to Ashley Pittman <ashley@@ilo.dec.com>, Digi
 with openpty which supports 4000 while ptmx supports 60. */
 #if defined(HAVE_OPENPTY) && defined(HAVE_PTMX)
 #undef HAVE_PTMX
+#endif
+#if defined(HAVE_OPENPTY) && defined(__OpenBSD__)
+#include <termios.h>
+#include <util.h>
 #endif
 
 #if defined(HAVE_PTYM) && defined(HAVE_PTMX)
@


1.1
log
@Update expect to 5.44.1.15
switch from tcl/tk 8.4 to 8.5
take maintainership

after fixing the WANTLIB finally OK, landry@@, sthen@@, jasper@@
@
text
@d3 1
a3 1
Get rid of implicit declaration of function warnings
d5 3
a7 3
--- pty_termios.c.orig	Thu Mar 11 20:06:30 2010
+++ pty_termios.c	Thu Sep  9 19:27:17 2010
@@@@ -9,12 +9,17 @@@@ would appreciate credit if you use this file or parts 
d9 13
a21 2
 #include <stdio.h>
 #include <signal.h>
a23 4
+#include <string.h>
 
 #if defined(SIGCLD) && !defined(SIGCHLD)
 #define SIGCHLD SIGCLD
d26 1
a26 6
 #include "expect_cf.h"
+
+extern char * expErrnoMsg(int);
 
 /*
    The following functions are linked from the Tcl library.  They
@

