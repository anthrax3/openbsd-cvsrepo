head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.18
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.16
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.14
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.10
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.12
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.8
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.6
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.4
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.4.0.10
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.8
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.6
	OPENBSD_5_0:1.4.0.4
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.2.0.22
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.20
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.18
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.16
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.14
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.12
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.10
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.8
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.8
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.6
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.4
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.2
	OPENBSD_3_4_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2013.05.15.09.46.28;	author sebastia;	state Exp;
branches;
next	1.4;

1.4
date	2011.01.05.18.45.45;	author sebastia;	state Exp;
branches;
next	1.3;

1.3
date	2010.09.24.14.16.50;	author sebastia;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.12.12.04.00;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.13.08.04.41;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update expect to 5.45. The dependency to Tk is gone. When needed to
steer Tk GUI apps, load the module in wish: package require Expect

Updated version also builds on VAX, and makes the loading of the
Expect module work on all other archs.

tests, comments feedback and OK sthen@@, giovanni@@
@
text
@$OpenBSD$
--- Makefile.in.orig	Thu Sep 30 19:14:07 2010
+++ Makefile.in	Tue May 14 14:46:31 2013
@@@@ -239,7 +239,7 @@@@ install-libraries: libraries $(SCRIPTS)
 	@@mkdir -p $(DESTDIR)$(prefix)/bin
 	-for i in $(SCRIPT_LIST) ; do \
 	  if [ -f $$i ] ; then \
-	    $(INSTALL_PROGRAM) $$i $(DESTDIR)$(prefix)/bin/$$i ; \
+	    $(INSTALL_SCRIPT) $$i $(DESTDIR)$(prefix)/bin/$$i ; \
 	    rm -f $$i ; \
 	  else true; fi ; \
 	done
@@@@ -395,6 +395,7 @@@@ expect:	exp_main_exp.o $(PKG_LIB_FILE)
 		@@EXP_BUILD_LIB_SPEC@@ \
 		@@TCL_LIB_SPEC@@ \
 		@@TCL_DL_LIBS@@ @@PKG_LIBS@@ @@MATH_LIBS@@ \
+		@@PTYLIB@@ \
 		@@TCL_CC_SEARCH_FLAGS@@ \
 		@@EXP_CC_SEARCH_FLAGS@@
 	$(SETUID) expect
@@@@ -530,6 +531,7 @@@@ install-lib-binaries:
 	    echo " $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p"; \
 	    $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p; \
 	    stub=`echo $$p|sed -e "s/.*\(stub\).*/\1/"`; \
+	    cd $(DESTDIR)$(pkglibdir)/../../; ln -s $(pkglibdir)/$$p $$p; \
 	    if test "x$$stub" = "xstub"; then \
 		echo " $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p"; \
 		$(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p; \
@


1.4
log
@Update to new Tcl layout.
get rid of USE_GROFF.

OK landry@@, stu@@
@
text
@d1 14
a14 31
$OpenBSD: patch-Makefile_in,v 1.3 2010/09/24 14:16:50 sebastia Exp $

allow to build with --with-tk=no to please the no_tk flavor
propagate the -lutil via @@LIBS@@, otherwise it will break 
at least on vax

--- Makefile.in.orig	Thu Mar 11 20:06:30 2010
+++ Makefile.in	Thu Dec 23 10:17:52 2010
@@@@ -103,7 +103,11 @@@@ PKG_LIB_FILE	= @@PKG_LIB_FILE@@
 PKG_STUB_LIB_FILE = @@PKG_STUB_LIB_FILE@@
 
 lib_BINARIES	= $(PKG_LIB_FILE)
-bin_BINARIES	= expect expectk
+bin_BINARIES	= expect
+.ifdef TK
+  bin_BINARIES	+= expectk
+.endif
+
 BINARIES	= $(lib_BINARIES) $(bin_BINARIES)
 
 SHELL		= @@SHELL@@
@@@@ -120,7 +124,7 @@@@ includedir	= @@includedir@@
 
 DESTDIR		=
 
-PKG_DIR		= $(PACKAGE_NAME)$(PACKAGE_VERSION)
+PKG_DIR		= $(PACKAGE_NAME)
 pkgdatadir	= $(datadir)/$(PKG_DIR)
 pkglibdir	= $(libdir)/$(PKG_DIR)
 pkgincludedir	= $(includedir)/$(PKG_DIR)
@@@@ -413,7 +417,8 @@@@ expect:	exp_main_exp.o $(PKG_LIB_FILE)
d16 2
a17 1
 		@@DL_LIBS@@ @@PKG_LIBS@@ @@MATH_LIBS@@ \
d19 1
a19 3
-		@@EXP_CC_SEARCH_FLAGS@@
+		@@EXP_CC_SEARCH_FLAGS@@ \
+		@@LIBS@@
d21 3
a23 20
 
 expectk: exp_main_tk.o $(PKG_LIB_FILE)
@@@@ -428,7 +433,8 @@@@ expectk: exp_main_tk.o $(PKG_LIB_FILE)
 		@@TCL_LIB_SPEC@@ \
 		@@TK_LIBS@@ \
 		@@TCL_CC_SEARCH_FLAGS@@ \
-		@@EXP_CC_SEARCH_FLAGS@@
+		@@EXP_CC_SEARCH_FLAGS@@ \
+		@@LIBS@@
 	$(SETUID) expectk
 
 #========================================================================
@@@@ -555,12 +561,12 @@@@ install-lib-binaries:
 	@@mkdir -p $(DESTDIR)$(pkglibdir)
 	@@list='$(lib_BINARIES)'; for p in $$list; do \
 	  if test -f $$p; then \
-	    echo " $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p"; \
-	    $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/$$p; \
+	    echo " $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/../../$$p"; \
+	    $(INSTALL_PROGRAM) $$p $(DESTDIR)$(pkglibdir)/../../$$p; \
d25 1
d27 2
a28 7
-		echo " $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p"; \
-		$(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/$$p; \
+		echo " $(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/../../$$p"; \
+		$(RANLIB_STUB) $(DESTDIR)$(pkglibdir)/../../$$p; \
 	    else \
 		echo " $(RANLIB) $(DESTDIR)$(pkglibdir)/$$p"; \
 		$(RANLIB) $(DESTDIR)$(pkglibdir)/$$p; \
@


1.3
log
@Update expect to 5.44.1.15
switch from tcl/tk 8.4 to 8.5
take maintainership

after fixing the WANTLIB finally OK, landry@@, sthen@@, jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d8 1
a8 1
+++ Makefile.in	Fri Sep 24 09:52:53 2010
d22 9
d51 17
@


1.2
log
@update to expect 5.43.0

from Alexandre Anriot <aanriot at atlantilde.com>
@
text
@d1 10
a10 4
--- Makefile.in.orig	Fri May  7 20:10:30 2004
+++ Makefile.in	Sun Jun 12 10:07:51 2005
@@@@ -24,7 +24,7 @@@@ TCLHDIRDASHI = @@TCLHDIRDASHI@@
 TCL_LIBRARY = @@TCL_LIBRARY@@
d12 8
a19 5
 # Tcl library uninstalled.  Should be something like -ltcl or ../tcl/libtcl.a
-TCLLIB = @@TCL_BUILD_LIB_SPEC@@
+TCLLIB = @@TCL_LIB_SPEC@@
 # Tcl library installed.  Should be something like -ltcl or ../tcl/libtcl.a
 TCLLIB_INSTALLED = @@TCL_LIB_SPEC@@
d21 9
a29 10
@@@@ -32,7 +32,7 @@@@ TCLLIB_INSTALLED = @@TCL_LIB_SPEC@@
 # Tk include files
 TKHDIRDASHI = @@TKHDIRDASHI@@
 # Tk library
-TKLIB = @@TK_BUILD_LIB_SPEC@@
+TKLIB = @@TK_LIB_SPEC@@
 TKLIB_INSTALLED = @@TK_LIB_SPEC@@
 # X11 include files and other flags to compiler
 X11_CFLAGS = @@TK_XINCLUDES@@
@@@@ -192,6 +192,7 @@@@ SHELL = @@EXP_CONFIG_SHELL@@
d31 9
a39 4
 INSTALL = @@INSTALL@@
 INSTALL_PROGRAM = @@INSTALL_PROGRAM@@
+INSTALL_SCRIPT = @@INSTALL_SCRIPT@@
 INSTALL_DATA = @@INSTALL_DATA@@
d41 1
a41 27
 AR = ar
@@@@ -208,6 +209,7 @@@@ FLAGS_TO_PASS = \
 	"HDEFS=$(HDEFS)" \
 	"INSTALL=$(INSTALL)" \
 	"INSTALL_DATA=$(INSTALL_DATA)" \
+	"INSTALL_SCRIPT=$(INSTALL_SCRIPT)" \
 	"INSTALL_PROGRAM=$(INSTALL_PROGRAM)" \
 	"LDFLAGS=$(LDFLAGS)" \
 	"RUNTEST=$(RUNTEST)" \
@@@@ -368,7 +370,7 @@@@ install_shared_lib: $(EXP_LIB_FILES)
 	else true; fi
 	if [ -s $(EXP_SHARED_LIB_FILE) ] ; then \
 	  $(INSTALL_PROGRAM) $(EXP_SHARED_LIB_FILE) $(tcl_libdir)/$(EXP_SHARED_LIB_FILE) ; \
-	  $(INSTALL_PROGRAM) pkgIndex $(libdir)/pkgIndex.tcl ; \
+	  $(INSTALL_SCRIPT) pkgIndex $(libdir)/pkgIndex.tcl ; \
 	else true; fi
 
 expect_installed:	exp_main_exp.o $(EXP_LIB_FILE) install_shared_lib
@@@@ -451,7 +453,7 @@@@ install-libraries:
 	${srcdir}/mkinstalldirs $(bindir_arch_indep) $(man1dir) $(SCRIPTDIR) $(EXECSCRIPTDIR)
 	-for i in $(SCRIPT_LIST) ; do \
 	  if [ -f $$i ] ; then \
-	    $(INSTALL_PROGRAM) $$i $(bindir_arch_indep)/$$i ; \
+	    $(INSTALL_SCRIPT) $$i $(bindir_arch_indep)/$$i ; \
 	    rm -f $$i ; \
 	  else true; fi ; \
 	done
@


1.1
log
@update to expect-5.38.3
@
text
@d1 2
a2 2
--- Makefile.in.orig	Thu Jul 18 11:07:41 2002
+++ Makefile.in	Sun Jul 13 01:50:56 2003
d37 1
a37 1
@@@@ -367,7 +369,7 @@@@ install_shared_lib: $(EXP_LIB_FILES)
d46 1
a46 1
@@@@ -450,7 +452,7 @@@@ install-libraries:
@

