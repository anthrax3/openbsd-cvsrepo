head	1.31;
access;
symbols
	OPENBSD_6_2:1.31.0.6
	OPENBSD_6_2_BASE:1.31
	OPENBSD_6_1:1.31.0.4
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.30.0.4
	OPENBSD_5_9_BASE:1.30
	OPENBSD_5_8:1.30.0.6
	OPENBSD_5_8_BASE:1.30
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.29.0.4
	OPENBSD_5_6_BASE:1.29
	OPENBSD_5_5:1.29.0.2
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.22.0.8
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.6
	OPENBSD_5_0:1.22.0.4
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.22.0.2
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.19.0.4
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.19.0.2
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.18.0.6
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.18.0.4
	OPENBSD_4_5_BASE:1.18
	OPENBSD_4_4:1.18.0.2
	OPENBSD_4_4_BASE:1.18
	OPENBSD_4_3:1.17.0.2
	OPENBSD_4_3_BASE:1.17
	OPENBSD_4_2:1.16.0.4
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.16.0.2
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.13.0.8
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.13.0.6
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.13.0.4
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.13.0.2
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.12.0.6
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.12.0.4
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.12.0.2
	OPENBSD_3_4_BASE:1.12
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.10.0.4
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.10.0.2
	OPENBSD_3_1_BASE:1.10
	OPENBSD_3_0:1.9.0.2
	OPENBSD_3_0_BASE:1.9
	OPENBSD_2_9_TRACKING_SWITCH:1.8
	OPENBSD_2_9:1.7.0.2
	OPENBSD_2_9_BASE:1.7
	OPENBSD_2_8:1.6.0.2
	OPENBSD_2_8_BASE:1.6
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_6:1.1.1.1.0.2
	OPENBSD_2_6_BASE:1.1.1.1
	ICON_9_3_2:1.1.1.1
	ICON_INTERP:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2016.03.12.23.16.55;	author naddy;	state Exp;
branches;
next	1.30;
commitid	c7LTA1CM4gj2USsr;

1.30
date	2014.08.10.09.58.05;	author espie;	state Exp;
branches;
next	1.29;
commitid	jyyOLTDxRdjpw44n;

1.29
date	2013.11.03.14.32.21;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2013.10.11.23.49.54;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2013.07.13.08.33.03;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2013.06.03.22.47.02;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2013.06.01.14.28.28;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.03.11.11.20.27;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.17.08.05.17;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.24.21.24.04;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2009.08.10.17.31.07;	author kili;	state Exp;
branches;
next	1.18;

1.18
date	2008.06.29.20.44.52;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2007.09.16.00.27.05;	author merdely;	state Exp;
branches;
next	1.16;

1.16
date	2006.11.20.12.21.04;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.03.17.01.10;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2006.10.16.10.01.55;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2005.02.24.13.20.41;	author alek;	state Exp;
branches;
next	1.12;

1.12
date	2003.03.31.14.11.50;	author sturm;	state Exp;
branches;
next	1.11;

1.11
date	2002.12.29.20.41.07;	author fgsch;	state Exp;
branches;
next	1.10;

1.10
date	2002.03.21.21.09.17;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2001.10.07.14.20.13;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2001.07.03.13.13.02;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2001.04.08.16.41.49;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2000.10.09.21.50.32;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.10.08.18.22.56;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.07.16.59.20;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2000.02.14.16.42.56;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.10.14.54.50;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	99.08.20.19.53.03;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.08.20.19.53.03;	author espie;	state Exp;
branches;
next	;


desc
@@


1.31
log
@get rid of PROPERTIES:Mno_shared and PFRAG.shared; ok espie@@
@
text
@# $OpenBSD: Makefile,v 1.30 2014/08/10 09:58:05 espie Exp $

COMMENT-main =		programming language with generators, X11 and more
COMMENT-main-no_x11 =	programming language with generators

VERSION =	9.5.1
DISTNAME =	icon-v951src
CATEGORIES =	lang
MASTER_SITES = 	http://www.cs.arizona.edu/icon/ftp/packages/unix/
DISTFILES =	icon-v951src.tgz

MULTI_PACKAGES =	-main #-compiler

PKGNAME-main =		icon-interp-${VERSION}
REVISION-main =		0

# Public domain
PERMIT_PACKAGE_CDROM =	Yes

HOMEPAGE =	http://www.cs.arizona.edu/icon/

MAINTAINER =	Marc Espie <espie@@openbsd.org>

FLAVORS =	no_x11
FLAVOR ?=	

MAKE_ENV =	ARCH="${MACHINE_ARCH}"
ALL_TARGET =	Icont

LIBDIR =	${TRUEPREFIX}/lib/icon

WANTLIB-main =		c m pthread

.if ${FLAVOR:Mno_x11}
CONFIGURE_TARGET =	Configure
.else
CONFIGURE_TARGET =	X-Configure
WANTLIB-main +=		X11 Xpm
.endif

do-configure:
	cd ${WRKSRC} && ${MAKE} ${CONFIGURE_TARGET} name=bsd
	echo "RLINK=-rdynamic" >>${WRKSRC}/Makedefs
.if ${FLAVOR:Mno_x11}
	echo "XINCLUDE=" >>${WRKSRC}/Makedefs
.endif

post-build:
	cd ${WRKSRC}/ipl/cfuncs && ${MAKE} ICONT=${WRKBUILD}/bin/icont

# We put a wrapper around icont for finding the library files when
# they're installed
# The icon manpage is available separately... I've included it along
# with the package. Ludicrous to get through a ftp connexion for such
# a small file...
do-install:
	${SUBST_PROGRAM} ${FILESDIR}/icont.template ${PREFIX}/bin/icont
	${INSTALL_DATA_DIR} ${WRKINST}${LIBDIR}
	${INSTALL_PROGRAM} ${WRKBUILD}/bin/icont ${WRKINST}${LIBDIR}
	${INSTALL_PROGRAM} ${WRKBUILD}/bin/iconx ${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/man/man1/icont.1 ${PREFIX}/man/man1/icont.1
	cd ${PREFIX}/man/man1 && ln -f icont.1 iconx.1
	${INSTALL_DATA_DIR} ${PREFIX}/share/ipl/ucode
	${INSTALL_DATA} ${WRKBUILD}/ipl/cfuncs/cfunc.u?  ${PREFIX}/share/ipl/ucode
	${INSTALL_DATA} ${WRKBUILD}/ipl/cfuncs/libcfunc.so ${PREFIX}/lib

TEST_FLAGS =	HOME=/

TEST_TARGET =	Test-icont
TEST_DEPENDS =	lang/icon/lib

.include <bsd.port.mk>
@


1.30
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/11/03 14:32:21 espie Exp $
d15 1
a40 2
.include <bsd.port.arch.mk>

a42 3
.if ${PROPERTIES:Mno_shared}
	echo "#undef LoadFunc" >>${WRKSRC}/src/h/define.h
.else
a43 1
.endif
a48 1
.if !${PROPERTIES:Mno_shared}
a49 1
.endif
a62 1
.if !${PROPERTIES:Mno_shared}
a65 1
.endif
@


1.29
log
@Update to a much newer version of Icon.

The compiler is gone for good :(, but machines are somewhat faster,
and the new context switching code purely depends on threads, so it
will work everywhere...

Libs predated multi-packages => makes more sense to divide into
text/x11 programs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/10/11 23:49:54 naddy Exp $
d64 1
a64 2
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} -c \
		${FILESDIR}/icont.template ${PREFIX}/bin/icont
@


1.28
log
@Drop USE_GROFF since groff and mandoc produce identical output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/07/13 08:33:03 espie Exp $
d3 12
a14 17
COMMENT-main=		programming language with generators, X11 and more
COMMENT-main-no_x11=	programming language with generators
COMMENT-compiler=	icon compiler

VERSION=	9.4.3
DISTNAME=	icon.v943src
CATEGORIES=	lang
MASTER_SITES= 	http://www.cs.arizona.edu/icon/ftp/packages/unix/
#DIST_SUBDIR=	icon/${VERSION}
DISTFILES=	icon.v943src.tgz

MULTI_PACKAGES=		-main -compiler

PKGNAME-main=		icon-interp-${VERSION}
REVISION-main =		3
REVISION-compiler =	0
PKGNAME-compiler= 	icon-compiler-${VERSION}
d17 1
a17 3
PERMIT_PACKAGE_CDROM=	Yes

HOMEPAGE=	http://www.cs.arizona.edu/icon/
d19 1
a19 1
MAINTAINER=	Marc Espie <espie@@openbsd.org>
d21 1
a21 1
#WRKDIST=	${WRKDIR}
d23 2
a24 2
FLAVORS=	no_x11
FLAVOR?=	
d26 2
a27 3
MAKE_ENV=	ARCH="${MACHINE_ARCH}"
CONF_DIR=	${WRKSRC}/config/unix/openbsd
ALL_TARGET=	Icont Iconc
d29 1
a29 1
LIBDIR=${TRUEPREFIX}/lib/icon
d31 1
a31 2
WANTLIB-compiler=	c
WANTLIB-main=		c m pthread
d34 1
a34 1
CONFIGURE_TARGET=	Configure
d36 2
a37 2
CONFIGURE_TARGET=	X-Configure
WANTLIB-main+=		X11 Xpm pthread-stubs xcb
d46 5
d64 2
a65 2
	sed -e 's,@@PREFIX@@,${TRUEPREFIX},' \
	    ${FILESDIR}/icont.template >${WRKBUILD}/icont
a68 3
	${INSTALL_PROGRAM} ${WRKBUILD}/bin/iconc ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKBUILD}/bin/rtt ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKBUILD}/icont ${PREFIX}/bin
a70 6
	cd ${PREFIX}/man/man1 && ln -f icont.1 iconc.1
	# Yes, this is only used by generated code !
	${INSTALL_DATA} ${WRKBUILD}/bin/rt.h ${WRKINST}${LIBDIR}
	${INSTALL_DATA} ${WRKBUILD}/bin/rt.a ${WRKINST}${LIBDIR}
	${INSTALL_DATA} ${WRKBUILD}/bin/rt.db ${WRKINST}${LIBDIR}
	${INSTALL_DATA} ${WRKBUILD}/bin/dlrgint.o ${WRKINST}${LIBDIR}
d77 1
a77 1
TEST_FLAGS=	HOME=/
d79 2
a80 2
# Iconc does not pass quite a few tests currently...
TEST_TARGET=	Test-icont #Test-iconc
@


1.27
log
@redo shared/non-shared based on arch.mk.
add missing part, as just trying to compile dlopen won't work on vax...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/06/03 22:47:02 naddy Exp $
a35 1
USE_GROFF =	Yes
@


1.26
log
@fix an old pasto, no package change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/06/01 14:28:28 ajacoutot Exp $
d50 2
d54 3
d59 3
a61 3
	if [ x${NO_SHARED_LIBS:L} != "yes" ]; then \
	    cd ${WRKSRC}/ipl/cfuncs && ${MAKE} ICONT=${WRKBUILD}/bin/icont; \
	fi
d85 5
a89 5
	if [ x${NO_SHARED_LIBS:L} != "yes" ]; then \
	    ${INSTALL_DATA_DIR} ${PREFIX}/share/ipl/ucode; \
	    ${INSTALL_DATA} ${WRKBUILD}/ipl/cfuncs/cfunc.u?  ${PREFIX}/share/ipl/ucode; \
	    ${INSTALL_DATA} ${WRKBUILD}/ipl/cfuncs/libcfunc.so ${PREFIX}/lib; \
	fi
@


1.25
log
@Drop pthread patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/03/11 11:20:27 espie Exp $
d66 1
a66 1
	${INSTALL_DATA_DIR} ${WRKBUILD}/bin/rt.h ${WRKINST}${LIBDIR}
@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/02/09 14:49:51 sthen Exp $
d17 2
a18 1
REVISION-main =		2
@


1.23
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/17 08:05:17 espie Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d85 1
a85 1
REGRESS_FLAGS=	HOME=/
d88 1
a88 1
REGRESS_TARGET=	Test-icont #Test-iconc
@


1.22
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/24 21:24:04 ajacoutot Exp $
d45 1
a45 1
.if ${FLAVOR:L:Mno_x11}
@


1.21
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/18 19:20:42 espie Exp $
d16 2
a17 1
PKGNAME-main=		icon-interp-${VERSION}p2
@


1.20
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/08/10 17:31:07 kili Exp $
a48 1
USE_X11=Yes
@


1.19
log
@WANTLIB changes after xcb addition and bump.

For some unknown reason, I forgot to commit lang/*
this morning.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/06/29 20:44:52 sthen Exp $
d37 1
@


1.18
log
@sync WANTLIB following cairo update. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/09/16 00:27:05 merdely Exp $
d16 1
a16 1
PKGNAME-main=		icon-interp-${VERSION}p1
d47 1
a47 1
WANTLIB-main+=		X11 Xpm
@


1.17
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/11/20 12:21:04 espie Exp $
d16 1
a16 1
PKGNAME-main=		icon-interp-${VERSION}p0
d41 1
a41 1
WANTLIB-main=		c m
@


1.16
log
@convert to new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/11/03 17:01:10 espie Exp $
d3 3
a5 3
COMMENT-main=		"programming language with generators, X11 and more"
COMMENT-main-no_x11=	"programming language with generators"
COMMENT-compiler=	"icon compiler"
@


1.15
log
@Remove traces of SCRIPTS_ENV
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.14 2006/10/16 10:01:55 espie Exp $
a6 3
COMMENT=	"programming language with generators, X11 and more"
COMMENT-no_x11=	"programming language with generators"
COMMENT-compiler="icon compiler"
a8 1
PKGNAME=	icon-interp-${VERSION}
d10 1
a10 1
MASTER_SITES= http://www.cs.arizona.edu/icon/ftp/packages/unix/
d14 1
a14 2
MULTI_PACKAGES=	-compiler
SUBPACKAGE?=
d16 2
a17 1
PKGNAME-compiler= icon-compiler-${VERSION}
a23 4
WANTLIB=		c
.if empty(SUBPACKAGE)
WANTLIB+=m
.endif
d40 3
d44 1
a44 1
CONFIGURE_TARGET=Configure
d46 2
a47 4
CONFIGURE_TARGET=X-Configure
.  if empty(SUBPACKAGE)
WANTLIB+=X11 Xpm
.  endif
d91 1
@


1.14
log
@finally update to 9.4.3, should have done this ages ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/02/24 13:20:41 alek Exp $
a37 1
SCRIPTS_ENV=	ARCH="${MACHINE_ARCH}"
@


1.13
log
@Add/fix WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2003/03/31 14:11:50 sturm Exp $
d6 2
a7 2
VERSION=	9.4
DISTNAME=	icon.v940src
d12 1
a12 1
DISTFILES=	icon.v940src.tgz
d56 1
a56 1
	cd ${WRKSRC} && ${MAKE} ${CONFIGURE_TARGET} name=openbsd
a84 4
	cd ${PREFIX}/bin && \
	    ${WRKSRC}/bin/patchstr ${WRKINST}${LIBDIR}/icont ${TRUEPREFIX}/bin/iconx
	cd ${PREFIX}/bin && \
	    ${WRKSRC}/bin/patchstr ${PREFIX}/bin/iconc ${LIBDIR}/
@


1.12
log
@USE_X11=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/12/29 20:41:07 fgsch Exp $
d15 1
d24 4
d49 3
@


1.11
log
@zap NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/03/21 21:09:17 espie Exp $
d44 1
@


1.10
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/10/07 14:20:13 espie Exp $
a9 1
NEED_VERSION=	1.515
@


1.9
log
@Run testsuites... some minor problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/07/03 13:13:02 espie Exp $
d10 1
a10 1
NEED_VERSION=	1.387
@


1.8
log
@Update to icon 9.4.
Most local patches are no longer necessary.
Many thanks to Gregg Townsend for working with me on this one.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/04/08 16:41:49 espie Exp $
d87 4
@


1.7
log
@Clean-up.
- should obey CFLAGS (more or less) now.
- update to recent bsd.port.mk conventions.
- fix manpage.
- build the compiler and create a separate package for it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/10/09 21:50:32 espie Exp $
d6 3
a8 2
VERSION=	9.3.2
DISTNAME=	icon-interp-${VERSION}
d11 3
a13 3
MASTER_SITES=	ftp://ftp.cs.arizona.edu:/icon/packages/unix/
DIST_SUBDIR=	icon/${VERSION}
DISTFILES=	unix.tgz
d29 1
a29 1
WRKDIST=	${WRKDIR}
d37 1
a37 1
ALL_TARGET=	Icon-icont Icon-iconc
d47 2
a48 9
pre-configure:
	cp -R ${FILESDIR}/openbsd ${WRKSRC}/config/unix
	if [ -f ${CONF_DIR}/${ARCH}_rswitch.c ] ; then \
		ln -f ${CONF_DIR}/${ARCH}_rswitch.c ${CONF_DIR}/rswitch.c ;\
	else \
		touch ${CONF_DIR}/rswitch.c ;\
		echo "#define NoCoexpr" \
		    >>${WRKSRC}/config/unix/openbsd/define.h;\
	fi 
d50 4
a53 2
do-configure:
	cd ${WRKSRC} && make ${CONFIGURE_TARGET} name=openbsd
d69 1
a69 1
	${INSTALL_MAN} ${FILESDIR}/icon.1 ${PREFIX}/man/man1/icont.1
d81 5
@


1.6
log
@Add no_x11 flavor, fix minor problems with coexpr on platforms without
context switch yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/10/08 18:22:56 espie Exp $
d3 3
d7 1
a7 1
DISTNAME=	icon_interp-${VERSION}
d9 1
a9 1
NEED_VERSION=	1.224
d14 4
d24 2
d36 4
a39 1
ALL_TARGET=	Icon-icont
d65 8
a72 5
	perl ${SCRIPTDIR}/mk_icont ${TRUEPREFIX} >${WRKSRC}/icont
	${INSTALL_PROGRAM} ${WRKSRC}/bin/icont ${PREFIX}/lib
	${INSTALL_PROGRAM} ${WRKSRC}/bin/iconx ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/bin/rtt ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/icont ${PREFIX}/bin
d74 11
a84 3
	cd ${PREFIX}/man/man1 && ln icont.1 iconx.1
	${INSTALL_DATA} ${WRKSRC}/bin/rt.h ${PREFIX}/include
	cd ${PREFIX}/bin && ${WRKSRC}/bin/patchstr ${PREFIX}/lib/icont ${TRUEPREFIX}/bin/iconx
@


1.5
log
@Update to current framework, register conflict with unicon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/03/07 16:59:20 espie Exp $
d10 2
a11 1
LICENSE_TYPE=	PD
d21 3
d28 5
d40 2
d43 3
@


1.4
log
@Fake. Need to use TRUEPREFIX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/02/14 16:42:56 espie Exp $
d16 1
a16 1
MAINTAINER=	espie@@openbsd.org
a22 2
FAKE=		Yes

@


1.3
log
@LICENSE_TYPE is Public Domain
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/02/10 14:54:50 espie Exp $
d6 1
a9 1
NEED_VERSION=	1.191
d11 4
d23 1
d41 1
a41 1
	perl ${SCRIPTDIR}/mk_icont ${PREFIX} >${WRKSRC}/icont
d49 1
a49 1
	cd ${PREFIX}/bin && ${WRKSRC}/bin/patchstr ${PREFIX}/lib/icont ${PREFIX}/bin/iconx
@


1.2
log
@Remove USE_X11, icon is perfectly happy under /usr/local.
Use WRKDIST
Move distfiles to 9.3.2 subdir, since the icon people currently
don't put version numbers in their distribution.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 1999/08/20 19:53:03 espie Exp $
d10 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/07/13 20:55:39 espie Exp $
d3 2
a4 1
DISTNAME=	icon_interp-9.3.2
d7 1
a7 1
DIST_SUBDIR=	icon
d9 1
d13 1
a13 2
NO_WRKSUBDIR=	yes
USE_X11=	yes
d24 1
a24 1
		${LN} -f ${CONF_DIR}/${ARCH}_rswitch.c ${CONF_DIR}/rswitch.c ;\
@


1.1.1.1
log
@Move port around, cleaner.
@
text
@@
