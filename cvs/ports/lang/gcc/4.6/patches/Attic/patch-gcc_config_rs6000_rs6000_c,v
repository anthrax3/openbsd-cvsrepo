head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2012.03.31.20.06.40;	author pascal;	state dead;
branches;
next	1.2;

1.2
date	2012.03.31.20.02.03;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2012.02.26.22.32.36;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.3
log
@forgot to cvs rm
@
text
@@


1.2
log
@Update to gcc 4.6.3.

Also, sync a bit with base gcc:
- disable unsafe builtins
- disable -Wpointer-sign in -Wall
- move -fstrict-aliasing to -O3, disable -fstrict-overflow and
  -fdelete-null-pointer-checks
- enable -Wsystem-headers
- default to march=i486 on i386
- fix crtsavres on powerpc
- sync sparc64 config
- implement -Wvariable-decl, -Wstack-larger-than-N (alpha, amd64, i386, sparc,
  sparc64), -Wtrampolines, -ftrampolines
- default to -fno-ident
- fix -rdynamic by passing -export-dynamic to ld(1)

some bits from Brad, others from me.

tested by myself and jsg@@, adastrap now hosted by sthen@@ (thanks).

ok jsg@@ sthen@@
@
text
@@


1.1
log
@Fix build of libgo on powerpc by:
- backporting a fix for the ppc backend from upstream
- telling libgo configure not to try to link to libffi_convenience on ppc

issue brought up and fix tested by ajacoutot@@, "go ahead" kettenis@@
@
text
@a0 13
$OpenBSD$
http://gcc.gnu.org/bugzilla/show_bug.cgi?id=51623
--- gcc/config/rs6000/rs6000.c.orig	Tue Feb 21 09:54:58 2012
+++ gcc/config/rs6000/rs6000.c	Tue Feb 21 09:55:36 2012
@@@@ -16613,7 +16613,7 @@@@ rs6000_assemble_integer (rtx x, unsigned int size, int
       if (TARGET_RELOCATABLE
 	  && in_section != toc_section
 	  && in_section != text_section
-	  && !unlikely_text_section_p (in_section)
+	  && (in_section && (in_section->common.flags & SECTION_CODE)) == 0
 	  && !recurse
 	  && GET_CODE (x) != CONST_INT
 	  && GET_CODE (x) != CONST_DOUBLE
@

