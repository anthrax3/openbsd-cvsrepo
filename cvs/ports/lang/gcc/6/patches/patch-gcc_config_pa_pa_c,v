head	1.3;
access;
symbols
	OPENBSD_6_1:1.2.0.2
	OPENBSD_6_1_BASE:1.2
	pascal_20160904:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2017.07.19.09.23.16;	author pascal;	state Exp;
branches;
next	1.2;
commitid	6OFtMLIxXVtJ6fHA;

1.2
date	2016.09.15.10.37.03;	author pascal;	state Exp;
branches;
next	1.1;
commitid	PfNNc40Xw5uDnpmg;

1.1
date	2016.09.04.16.20.17;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;
commitid	kt4pzu6QIrUczPNq;

1.1.1.1
date	2016.09.04.16.20.17;	author pascal;	state Exp;
branches;
next	;
commitid	kt4pzu6QIrUczPNq;


desc
@@


1.3
log
@Update to GCC 6.4.0, regen bootstraps.
@
text
@$OpenBSD: patch-gcc_config_pa_pa_c,v 1.2 2016/09/15 10:37:03 pascal Exp $
Index: gcc/config/pa/pa.c
--- gcc/config/pa/pa.c.orig
+++ gcc/config/pa/pa.c
@@@@ -34,6 +34,7 @@@@ along with GCC; see the file COPYING3.  If not see
 #include "recog.h"
 #include "diagnostic-core.h"
 #include "insn-attr.h"
+#include "flags.h"
 #include "alias.h"
 #include "fold-const.h"
 #include "stor-layout.h"
@@@@ -3917,6 +3918,9 @@@@ pa_expand_prologue (void)
   if (flag_stack_usage_info)
     current_function_static_stack_size = actual_fsize;
 
+  if (warn_stack_larger_than && actual_fsize > stack_larger_than_size)
+    warning (OPT_Wstack_larger_than_, "stack usage is %lld bytes", actual_fsize);
+
   /* Compute a few things we will use often.  */
   tmpreg = gen_rtx_REG (word_mode, 1);
 
@@@@ -10150,8 +10154,8 @@@@ pa_trampoline_init (rtx m_tramp, tree fndecl, rtx chai
     }
 
 #ifdef HAVE_ENABLE_EXECUTE_STACK
-  emit_library_call (gen_rtx_SYMBOL_REF (Pmode, "__enable_execute_stack"),
-		     LCT_NORMAL, VOIDmode, 1, XEXP (m_tramp, 0), Pmode);
+ emit_library_call (gen_rtx_SYMBOL_REF (Pmode, "__enable_execute_stack"),
+		 LCT_NORMAL, VOIDmode, 1, XEXP (m_tramp, 0), Pmode);
 #endif
 }
 
@


1.2
log
@hppa
@
text
@d1 4
a4 3
$OpenBSD: patch-gcc_config_pa_pa_c,v 1.1.1.1 2016/09/04 16:20:17 pascal Exp $
--- gcc/config/pa/pa.c.orig	Thu Jul 21 00:35:50 2016
+++ gcc/config/pa/pa.c	Sun Sep 11 18:24:50 2016
d13 1
a13 1
@@@@ -3893,6 +3894,9 @@@@ pa_expand_prologue (void)
d23 1
a23 1
@@@@ -10122,8 +10126,8 @@@@ pa_trampoline_init (rtx m_tramp, tree fndecl, rtx chai
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_config_pa_pa_c,v 1.4 2015/07/19 21:22:49 pascal Exp $
d3 10
a12 2
+++ gcc/config/pa/pa.c	Tue Aug 23 15:48:17 2016
@@@@ -3893,6 +3893,9 @@@@ pa_expand_prologue (void)
d17 1
a17 1
+    warning (OPT_Wstack_larger_than_, "stack usage is %ld bytes", actual_fsize);
d22 1
a22 1
@@@@ -10122,8 +10125,8 @@@@ pa_trampoline_init (rtx m_tramp, tree fndecl, rtx chai
@


1.1.1.1
log
@Import GCC 6.2.0.

ok espie@@
@
text
@@
