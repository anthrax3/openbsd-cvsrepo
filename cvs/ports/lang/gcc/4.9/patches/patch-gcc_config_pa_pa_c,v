head	1.5;
access;
symbols
	OPENBSD_6_0:1.4.0.6
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	pascal_20140626:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.09.01.17.30.33;	author pascal;	state Exp;
branches;
next	1.4;
commitid	89C4KSGtZfazLOn6;

1.4
date	2015.07.19.21.22.49;	author pascal;	state Exp;
branches;
next	1.3;
commitid	nzWj593KjXmgljOW;

1.3
date	2015.02.03.20.32.12;	author pascal;	state Exp;
branches;
next	1.2;
commitid	LzgH25QAJKFopjkX;

1.2
date	2014.11.20.19.54.40;	author pascal;	state Exp;
branches;
next	1.1;
commitid	PXOKb6wtLMa1GZnE;

1.1
date	2014.06.26.16.30.17;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;
commitid	P7PY1UTti0Albpwh;

1.1.1.1
date	2014.06.26.16.30.17;	author pascal;	state Exp;
branches;
next	;
commitid	P7PY1UTti0Albpwh;


desc
@@


1.5
log
@Update to GCC 4.9.4.

No fallout in naddy@@'s bulk.
@
text
@$OpenBSD: patch-gcc_config_pa_pa_c,v 1.4 2015/07/19 21:22:49 pascal Exp $
--- gcc/config/pa/pa.c.orig	Tue Jan 12 02:41:59 2016
+++ gcc/config/pa/pa.c	Sat Aug  6 19:19:05 2016
@@@@ -3875,6 +3875,9 @@@@ pa_expand_prologue (void)
   if (flag_stack_usage_info)
     current_function_static_stack_size = actual_fsize;
 
+  if (warn_stack_larger_than && actual_fsize > stack_larger_than_size)
+    warning (OPT_Wstack_larger_than_, "stack usage is %ld bytes", actual_fsize);
+
   /* Compute a few things we will use often.  */
   tmpreg = gen_rtx_REG (word_mode, 1);
 
@@@@ -10195,8 +10198,8 @@@@ pa_trampoline_init (rtx m_tramp, tree fndecl, rtx chai
     }
 
 #ifdef HAVE_ENABLE_EXECUTE_STACK
-  emit_library_call (gen_rtx_SYMBOL_REF (Pmode, "__enable_execute_stack"),
-		     LCT_NORMAL, VOIDmode, 1, XEXP (m_tramp, 0), Pmode);
+ emit_library_call (gen_rtx_SYMBOL_REF (Pmode, "__enable_execute_stack"),
+		 LCT_NORMAL, VOIDmode, 1, XEXP (m_tramp, 0), Pmode);
 #endif
 }
 
@


1.4
log
@Bugfix update to 4.9.3.
@
text
@d1 4
a4 4
$OpenBSD: patch-gcc_config_pa_pa_c,v 1.3 2015/02/03 20:32:12 pascal Exp $
--- gcc/config/pa/pa.c.orig	Fri Jun 12 01:24:30 2015
+++ gcc/config/pa/pa.c	Sat Jun 27 11:26:33 2015
@@@@ -3828,6 +3828,9 @@@@ pa_expand_prologue (void)
d14 1
a14 1
@@@@ -10156,8 +10159,8 @@@@ pa_trampoline_init (rtx m_tramp, tree fndecl, rtx chai
@


1.3
log
@Finally fix newer GCC on hppa by removing --disable-checking from
CONFIGURE_ARGS.  While it may have had some value in the past, nowadays it's
just another (essentially untested) deviation from the mainstream.

Also:
* Restore -fstrict-aliasing and -fstrict-overflow behaviour
* Support -rdynamic on hppa
* libatomic is actually supported on every POSIX system, so remove useless
  PFRAGs.

Tested on amd64, hppa and sparc64; ok tobiasu@@
@
text
@d1 4
a4 4
$OpenBSD: patch-gcc_config_pa_pa_c,v 1.2 2014/11/20 19:54:40 pascal Exp $
--- gcc/config/pa/pa.c.orig	Sun Sep 28 17:40:45 2014
+++ gcc/config/pa/pa.c	Sun Feb  1 11:16:36 2015
@@@@ -3819,6 +3819,9 @@@@ pa_expand_prologue (void)
d14 1
a14 1
@@@@ -10135,8 +10138,8 @@@@ pa_trampoline_init (rtx m_tramp, tree fndecl, rtx chai
@


1.2
log
@Update to 4.9.2.  Finally gets rid of gfortran patches.

Tested on everything except sparc, adastraps mirrored by and ok tobiasu@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_config_pa_pa_c,v 1.1.1.1 2014/06/26 16:30:17 pascal Exp $
d3 1
a3 1
+++ gcc/config/pa/pa.c	Fri Oct 31 11:59:53 2014
d13 11
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD: patch-gcc_config_pa_pa_c,v 1.2 2013/06/07 07:55:22 pascal Exp $
--- gcc/config/pa/pa.c.orig	Sun Apr  6 17:17:41 2014
+++ gcc/config/pa/pa.c	Wed Apr 23 12:49:02 2014
@@@@ -3814,6 +3814,9 @@@@ pa_expand_prologue (void)
@


1.1.1.1
log
@Import GCC 4.9, sparc64 test and ok tobiasu@@
@
text
@@
