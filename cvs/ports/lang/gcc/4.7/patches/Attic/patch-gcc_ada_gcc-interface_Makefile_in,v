head	1.5;
access;
symbols
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	pascal_20120423:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2013.06.18.21.06.53;	author espie;	state dead;
branches;
next	1.4;

1.4
date	2013.06.07.07.54.47;	author pascal;	state Exp;
branches;
next	1.3;

1.3
date	2012.11.06.00.57.43;	author tobiasu;	state Exp;
branches;
next	1.2;

1.2
date	2012.07.01.18.56.45;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.23.15.56.41;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.04.23.15.56.41;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.5
log
@bye bye
@
text
@$OpenBSD: patch-gcc_ada_gcc-interface_Makefile_in,v 1.4 2013/06/07 07:54:47 pascal Exp $
--- gcc/ada/gcc-interface/Makefile.in.orig	Tue Dec 18 15:27:14 2012
+++ gcc/ada/gcc-interface/Makefile.in	Thu Apr 11 13:51:32 2013
@@@@ -103,13 +103,13 @@@@ MAKEINFO = makeinfo
 TEXI2DVI = texi2dvi
 TEXI2PDF = texi2pdf
 GNATBIND_FLAGS = -static -x
-ADA_CFLAGS =
+ADA_CFLAGS = -O1
 ADAFLAGS = -W -Wall -gnatpg -gnata
 FORCE_DEBUG_ADAFLAGS = -g
 NO_SIBLING_ADAFLAGS = -fno-optimize-sibling-calls
 NO_REORDER_ADAFLAGS = -fno-toplevel-reorder
 GNATLIBFLAGS = -W -Wall -gnatpg -nostdinc
-GNATLIBCFLAGS = -g -O2
+GNATLIBCFLAGS = -g -O1
 PICFLAG_FOR_TARGET = @@PICFLAG_FOR_TARGET@@
 
 # Pretend that _Unwind_GetIPInfo is available for the target by default.  This
@@@@ -1232,6 +1232,64 @@@@ ifeq ($(strip $(filter-out %86 freebsd%,$(arch) $(osys
 endif
 
 ifeq ($(strip $(filter-out %86_64 freebsd%,$(arch) $(osys))),)
+  LIBGNAT_TARGET_PAIRS = \
+  a-intnam.ads<a-intnam-freebsd.ads \
+  s-inmaop.adb<s-inmaop-posix.adb \
+  s-intman.adb<s-intman-posix.adb \
+  s-osinte.adb<s-osinte-freebsd.adb \
+  s-osinte.ads<s-osinte-freebsd.ads \
+  s-osprim.adb<s-osprim-posix.adb \
+  s-taprop.adb<s-taprop-posix.adb \
+  s-taspri.ads<s-taspri-posix.ads \
+  s-tpopsp.adb<s-tpopsp-posix.adb \
+  $(ATOMICS_TARGET_PAIRS) \
+  $(X86_64_TARGET_PAIRS) \
+  system.ads<system-freebsd-x86_64.ads
+
+  TOOLS_TARGET_PAIRS = \
+  mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb
+  GNATLIB_SHARED = gnatlib-shared-dual
+
+  EH_MECHANISM=-gcc
+  THREADSLIB= -lpthread
+  GMEM_LIB = gmemlib
+  LIBRARY_VERSION := $(LIB_VERSION)
+  MISCLIB = -lutil
+endif
+
+ifeq ($(strip $(filter-out %86 openbsd%,$(arch) $(osys))),)
+  LIBGNAT_TARGET_PAIRS = \
+  a-intnam.ads<a-intnam-freebsd.ads \
+  s-inmaop.adb<s-inmaop-posix.adb \
+  s-intman.adb<s-intman-posix.adb \
+  s-osinte.ads<s-osinte-freebsd.ads \
+  s-osinte.adb<s-osinte-freebsd.adb \
+  s-osprim.adb<s-osprim-posix.adb \
+  s-taprop.adb<s-taprop-posix.adb \
+  s-taspri.ads<s-taspri-posix.ads \
+  s-tpopsp.adb<s-tpopsp-posix.adb \
+  $(ATOMICS_TARGET_PAIRS) \
+  $(X86_TARGET_PAIRS) \
+  system.ads<system-freebsd-x86.ads
+
+  TOOLS_TARGET_PAIRS = \
+  mlib-tgt-specific.adb<mlib-tgt-specific-linux.adb
+  GNATLIB_SHARED = gnatlib-shared-dual
+
+  EH_MECHANISM=-gcc
+  THREADSLIB= -lpthread
+  GMEM_LIB = gmemlib
+  LIBRARY_VERSION := $(LIB_VERSION)
+  GNATLIB_SHARED = gnatlib-shared-dual
+  
+  EH_MECHANISM=-gcc
+  THREADSLIB= -lpthread
+  GMEM_LIB = gmemlib
+  LIBRARY_VERSION := $(LIB_VERSION)
+  MISCLIB = -lutil
+endif
+
+ifeq ($(strip $(filter-out %86_64 openbsd%,$(arch) $(osys))),)
   LIBGNAT_TARGET_PAIRS = \
   a-intnam.ads<a-intnam-freebsd.ads \
   s-inmaop.adb<s-inmaop-posix.adb \
@


1.4
log
@Update to GCC 4.7.3.  Also tested by tobiasu@@.
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_ada_gcc-interface_Makefile_in,v 1.3 2012/11/06 00:57:43 tobiasu Exp $
@


1.3
log
@Add Ada support on amd64 and sparc64

Also unbreak and improve adastrap generation
Cleanup bootstrap libc handling

ok pascal@@
@
text
@d1 3
a3 3
$OpenBSD: patch-gcc_ada_gcc-interface_Makefile_in,v 1.2 2012/07/01 18:56:45 pascal Exp $
--- gcc/ada/gcc-interface/Makefile.in.orig	Mon Aug  6 16:34:27 2012
+++ gcc/ada/gcc-interface/Makefile.in	Sat Sep 29 18:22:21 2012
d20 14
a33 4
@@@@ -1243,6 +1243,58 @@@@ ifeq ($(strip $(filter-out %86_64 freebsd%,$(arch) $(o
   s-taspri.ads<s-taspri-posix.ads \
   s-tpopsp.adb<s-tpopsp-posix.adb \
   g-trasym.adb<g-trasym-dwarf.adb \
d72 6
d82 3
a84 13
+  LIBGNAT_TARGET_PAIRS = \
+  a-intnam.ads<a-intnam-freebsd.ads \
+  s-inmaop.adb<s-inmaop-posix.adb \
+  s-intman.adb<s-intman-posix.adb \
+  s-osinte.adb<s-osinte-freebsd.adb \
+  s-osinte.ads<s-osinte-freebsd.ads \
+  s-osprim.adb<s-osprim-posix.adb \
+  s-taprop.adb<s-taprop-posix.adb \
+  s-taspri.ads<s-taspri-posix.ads \
+  s-tpopsp.adb<s-tpopsp-posix.adb \
   $(ATOMICS_TARGET_PAIRS) \
   $(X86_64_TARGET_PAIRS) \
   system.ads<system-freebsd-x86_64.ads
@


1.2
log
@Update to gcc 4.7.1.

- add some fixes for hppa, though it still isn't ready for prime time yet.
  Chances are it will only work with -O1, pending testing.  Many optimisations
  lead to broken code and segfaults on hppa.  Joint work with jsg@@.
- fix libstdc++ upgrade path
- bring in recent fixes for execinfo/magic.h from 4.6

ok espie@@
@
text
@d1 3
a3 3
$OpenBSD: patch-gcc_ada_gcc-interface_Makefile_in,v 1.1.1.1 2012/04/23 15:56:41 pascal Exp $
--- gcc/ada/gcc-interface/Makefile.in.orig	Tue Jun 12 17:12:37 2012
+++ gcc/ada/gcc-interface/Makefile.in	Wed Jun 20 14:39:11 2012
d20 14
a33 4
@@@@ -1253,6 +1253,32 @@@@ ifeq ($(strip $(filter-out %86_64 freebsd%,$(arch) $(o
 
   EH_MECHANISM=-gcc
   THREADSLIB= -lpthread
d59 20
a78 4
+  THREADSLIB= -pthread
   GMEM_LIB = gmemlib
   LIBRARY_VERSION := $(LIB_VERSION)
   MISCLIB = -lutil
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD: patch-gcc_ada_gcc-interface_Makefile_in,v 1.1.1.1 2011/11/14 13:00:57 pascal Exp $
--- gcc/ada/gcc-interface/Makefile.in.orig	Fri Feb 24 17:17:01 2012
+++ gcc/ada/gcc-interface/Makefile.in	Sun Apr 15 13:36:35 2012
d18 1
d20 1
a20 2
 # should be autodetected during the configuration of libada and passed down to
@@@@ -1252,6 +1252,32 @@@@ ifeq ($(strip $(filter-out %86_64 freebsd%,$(arch) $(o
@


1.1.1.1
log
@Import gcc 4.7.

ok espie@@
@
text
@@
