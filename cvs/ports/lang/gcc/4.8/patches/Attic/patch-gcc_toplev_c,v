head	1.4;
access;
symbols
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.1.1.0.4
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	pascal_20130804:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2015.09.10.08.23.55;	author pascal;	state dead;
branches;
next	1.3;
commitid	ovY05rVdcfWNuWWc;

1.3
date	2015.01.08.20.23.21;	author pascal;	state Exp;
branches;
next	1.2;
commitid	sYWo0J70bGiiom5u;

1.2
date	2014.06.08.18.55.36;	author brad;	state Exp;
branches;
next	1.1;
commitid	mCKxwWpaJ0MaKY3I;

1.1
date	2013.04.08.08.20.25;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.08.08.20.25;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.4
log
@tedu gcc 4.8

ok sthen@@ tobiasu@@
@
text
@$OpenBSD: patch-gcc_toplev_c,v 1.3 2015/01/08 20:23:21 pascal Exp $
--- gcc/toplev.c.orig	Sat Jul 19 21:32:38 2014
+++ gcc/toplev.c	Mon Jan  5 22:42:06 2015
@@@@ -1522,6 +1522,8 @@@@ process_options (void)
 
   /* Targets must be able to place spill slots at lower addresses.  If the
      target already uses a soft frame pointer, the transition is trivial.  */
+  if (flag_stack_protect == -1)
+    flag_stack_protect = FRAME_GROWS_DOWNWARD ? 3 : 0;
   if (!FRAME_GROWS_DOWNWARD && flag_stack_protect)
     {
       warning (0, "-fstack-protector not supported for this target");
@


1.3
log
@Update to GCC 4.8.4.

Additionally, from tobiasu@@:

Disable the optimized shared Ada.Strings.Unbounded implementation until
overlapping memcpy() is fixed. Requires fresh adastrap's.

Rename all binaries starting with "egnat" back to "gnat". Reduces the
amount of workarounds needed to build various Ada software - including
GNAT itself.

Stop running the fixincludes script - saves time and pain. If our
headers are broken, we want to know and fix them ourselves, thank you
very much.

Drop gnat debug patch for a linker issue that was fixed some time ago.

ok tobiasu@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_toplev_c,v 1.2 2014/06/08 18:55:36 brad Exp $
@


1.2
log
@Add stack protector strong support and enable it by default.

ok pascal@@
@
text
@d1 4
a4 4
$OpenBSD: patch-gcc_toplev_c,v 1.1.1.1 2013/04/08 08:20:25 pascal Exp $
--- gcc/toplev.c.orig	Thu Mar 28 04:29:51 2013
+++ gcc/toplev.c	Sat May 24 17:12:16 2014
@@@@ -1519,6 +1519,8 @@@@ process_options (void)
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD: patch-gcc_toplev_c,v 1.1.1.1 2012/04/23 15:56:41 pascal Exp $
--- gcc/toplev.c.orig	Thu Jan 10 21:38:27 2013
+++ gcc/toplev.c	Wed Jan 23 22:48:30 2013
d9 1
a9 1
+    flag_stack_protect = FRAME_GROWS_DOWNWARD ? 1 : 0;
@


1.1.1.1
log
@Import gcc 4.8.

For a full Changelog, see: http://gcc.gnu.org/gcc-4.8/changes.html

Tested by me on amd64, i386 and powerpc and by brad@@ on sparc64.

Adds support for -java on powerpc.  -faggressive-loop-optimizations is
disabled by default in the port, and the default debugging format changed
to DWARF2 (instead of 4).

tweaks and ok tobiasu@@
@
text
@@
