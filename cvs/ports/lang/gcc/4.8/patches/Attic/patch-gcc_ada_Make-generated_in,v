head	1.4;
access;
symbols
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	pascal_20130804:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2015.01.08.20.23.21;	author pascal;	state dead;
branches;
next	1.3;
commitid	sYWo0J70bGiiom5u;

1.3
date	2013.05.03.23.23.26;	author tobiasu;	state Exp;
branches;
next	1.2;

1.2
date	2013.04.11.08.34.13;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.08.08.20.25;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.08.08.20.25;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to GCC 4.8.4.

Additionally, from tobiasu@@:

Disable the optimized shared Ada.Strings.Unbounded implementation until
overlapping memcpy() is fixed. Requires fresh adastrap's.

Rename all binaries starting with "egnat" back to "gnat". Reduces the
amount of workarounds needed to build various Ada software - including
GNAT itself.

Stop running the fixincludes script - saves time and pain. If our
headers are broken, we want to know and fix them ourselves, thank you
very much.

Drop gnat debug patch for a linker issue that was fixed some time ago.

ok tobiasu@@
@
text
@$OpenBSD: patch-gcc_ada_Make-generated_in,v 1.3 2013/05/03 23:23:26 tobiasu Exp $
--- gcc/ada/Make-generated.in.orig	Wed Dec  5 12:02:24 2012
+++ gcc/ada/Make-generated.in	Sun Apr 14 21:59:15 2013
@@@@ -28,21 +28,21 @@@@ $(ADA_GEN_SUBDIR)/treeprs.ads : $(ADA_GEN_SUBDIR)/tree
 	-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/treeprs
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/treeprs/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/treeprs
-	(cd $(ADA_GEN_SUBDIR)/bldtools/treeprs; gnatmake -q xtreeprs ; ./xtreeprs treeprs.ads )
+	(cd $(ADA_GEN_SUBDIR)/bldtools/treeprs; ls -la; gnatmake -c xtreeprs; ls -la; gnatmake xtreeprs; ls -la; ./xtreeprs treeprs.ads )
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/treeprs/treeprs.ads $(ADA_GEN_SUBDIR)/treeprs.ads
 
 $(ADA_GEN_SUBDIR)/einfo.h : $(ADA_GEN_SUBDIR)/einfo.ads $(ADA_GEN_SUBDIR)/einfo.adb $(ADA_GEN_SUBDIR)/xeinfo.adb $(ADA_GEN_SUBDIR)/ceinfo.adb
 	-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/einfo
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/einfo/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/einfo
-	(cd $(ADA_GEN_SUBDIR)/bldtools/einfo; gnatmake -q xeinfo ; ./xeinfo einfo.h )
+	(cd $(ADA_GEN_SUBDIR)/bldtools/einfo; ls -la; gnatmake -c xeinfo; ls -la; gnatmake xeinfo; ls -la; ./xeinfo einfo.h )
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/einfo/einfo.h $(ADA_GEN_SUBDIR)/einfo.h
 
 $(ADA_GEN_SUBDIR)/sinfo.h : $(ADA_GEN_SUBDIR)/sinfo.ads $(ADA_GEN_SUBDIR)/sinfo.adb $(ADA_GEN_SUBDIR)/xsinfo.adb $(ADA_GEN_SUBDIR)/csinfo.adb
 	-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/sinfo
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/sinfo/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/sinfo
-	(cd $(ADA_GEN_SUBDIR)/bldtools/sinfo; gnatmake -q xsinfo ; ./xsinfo sinfo.h )
+	(cd $(ADA_GEN_SUBDIR)/bldtools/sinfo; ls -la; gnatmake -c xsinfo; ls -la; gnatmake xsinfo; ls -la; ./xsinfo sinfo.h )
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/sinfo/sinfo.h $(ADA_GEN_SUBDIR)/sinfo.h
 
 $(ADA_GEN_SUBDIR)/snames.h $(ADA_GEN_SUBDIR)/snames.ads $(ADA_GEN_SUBDIR)/snames.adb : $(ADA_GEN_SUBDIR)/stamp-snames ; @@true
@@@@ -50,7 +50,7 @@@@ $(ADA_GEN_SUBDIR)/stamp-snames : $(ADA_GEN_SUBDIR)/sna
 	-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/snamest
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/snamest/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/snamest
-	(cd $(ADA_GEN_SUBDIR)/bldtools/snamest; gnatmake -q xsnamest ; ./xsnamest )
+	(cd $(ADA_GEN_SUBDIR)/bldtools/snamest; ls -la; gnatmake -c xsnamest; ls -la; gnatmake xsnamest; ls -la; ./xsnamest )
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/snamest/snames.ns $(ADA_GEN_SUBDIR)/snames.ads
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/snamest/snames.nb $(ADA_GEN_SUBDIR)/snames.adb
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/snamest/snames.nh $(ADA_GEN_SUBDIR)/snames.h
@@@@ -61,7 +61,7 @@@@ $(ADA_GEN_SUBDIR)/stamp-nmake: $(ADA_GEN_SUBDIR)/sinfo
 	-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/nmake
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/nmake/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/nmake
-	(cd $(ADA_GEN_SUBDIR)/bldtools/nmake; gnatmake -q xnmake ; ./xnmake -b nmake.adb ; ./xnmake -s nmake.ads)
+	(cd $(ADA_GEN_SUBDIR)/bldtools/nmake; ls -la; gnatmake -c xnmake; ls -la; gnatmake xnmake; ls -la; ./xnmake -b nmake.adb ; ./xnmake -s nmake.ads)
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/nmake/nmake.ads $(ADA_GEN_SUBDIR)/nmake.ads
 	$(MOVE_IF_CHANGE) $(ADA_GEN_SUBDIR)/bldtools/nmake/nmake.adb $(ADA_GEN_SUBDIR)/nmake.adb
 	touch $(ADA_GEN_SUBDIR)/stamp-nmake
@@@@ -88,7 +88,7 @@@@ $(ADA_GEN_SUBDIR)/s-oscons.ads : $(ADA_GEN_SUBDIR)/s-o
 	-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/oscons
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/oscons/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/oscons
-	(cd $(ADA_GEN_SUBDIR)/bldtools/oscons ; gnatmake -q xoscons ; \
+	(cd $(ADA_GEN_SUBDIR)/bldtools/oscons ; ls -la; gnatmake -c xoscons; ls -la; gnatmake xoscons; ls -la; \
 		$(RM) s-oscons-tmplt.i s-oscons-tmplt.s ; \
 		$(OSCONS_CPP) ; \
 		$(OSCONS_EXTRACT) ; \
@@@@ -131,5 +131,5 @@@@ $(ADA_GEN_SUBDIR)/gnat.hlp :  $(ADA_GEN_SUBDIR)/vms_he
 	$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/gnat_hlp/,$(notdir $^))
 	$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/gnat_hlp
 	(cd $(ADA_GEN_SUBDIR)/bldtools/gnat_hlp; \
-	  gnatmake -q vms_help; \
+	   ls -la; gnatmake -c vms_help; ls -la; gnatmake vms_help; ls -la; \
 	  ./vms_help$(build_exeext) gnat.help_in vms_data.ads ../../gnat.hlp)
@


1.3
log
@Take another stab at debugging the sporadic build failures in the gnat
build tools. Split compiling and linking/binding into two parts and add
some ls in between to spot the disappearing object file...

Reverts previous attempt running gnatmake with -j1 which turned out to
be insufficient.

ok pascal@@ sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_ada_Make-generated_in,v 1.2 2013/04/11 08:34:13 pascal Exp $
@


1.2
log
@Attempt to fix longstanding ada build failure when building in parallel by
forcing gnatmake to use -j1.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ gcc/ada/Make-generated.in	Mon Apr  8 23:20:57 2013
d9 1
a9 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/treeprs; gnatmake -j1 xtreeprs ; ./xtreeprs treeprs.ads )
d17 1
a17 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/einfo; gnatmake -j1 xeinfo ; ./xeinfo einfo.h )
d25 1
a25 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/sinfo; gnatmake -j1 xsinfo ; ./xsinfo sinfo.h )
d34 1
a34 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/snamest; gnatmake -j1 xsnamest ; ./xsnamest )
d43 1
a43 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/nmake; gnatmake -j1 xnmake ; ./xnmake -b nmake.adb ; ./xnmake -s nmake.ads)
d52 1
a52 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/oscons ; gnatmake -j1 xoscons ; \
d61 1
a61 1
+	  gnatmake -j1 vms_help; \
@


1.1
log
@Initial revision
@
text
@d2 2
a3 2
--- gcc/ada/Make-generated.in.orig	Sun Jan 27 17:41:02 2013
+++ gcc/ada/Make-generated.in	Sun Jan 27 17:41:27 2013
d9 1
a9 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/treeprs; gnatmake xtreeprs ; ./xtreeprs treeprs.ads )
d17 1
a17 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/einfo; gnatmake xeinfo ; ./xeinfo einfo.h )
d25 1
a25 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/sinfo; gnatmake xsinfo ; ./xsinfo sinfo.h )
d34 1
a34 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/snamest; gnatmake xsnamest ; ./xsnamest )
d43 1
a43 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/nmake; gnatmake xnmake ; ./xnmake -b nmake.adb ; ./xnmake -s nmake.ads)
d52 1
a52 1
+	(cd $(ADA_GEN_SUBDIR)/bldtools/oscons ; gnatmake xoscons ; \
d61 1
a61 1
+	  gnatmake vms_help; \
@


1.1.1.1
log
@Import gcc 4.8.

For a full Changelog, see: http://gcc.gnu.org/gcc-4.8/changes.html

Tested by me on amd64, i386 and powerpc and by brad@@ on sparc64.

Adds support for -java on powerpc.  -faggressive-loop-optimizations is
disabled by default in the port, and the default debugging format changed
to DWARF2 (instead of 4).

tweaks and ok tobiasu@@
@
text
@@
