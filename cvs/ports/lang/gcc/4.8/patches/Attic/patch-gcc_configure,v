head	1.5;
access;
symbols
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	pascal_20130804:1.1.1.1
	pascal:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2015.09.10.08.23.55;	author pascal;	state dead;
branches;
next	1.4;
commitid	ovY05rVdcfWNuWWc;

1.4
date	2015.01.08.20.23.21;	author pascal;	state Exp;
branches;
next	1.3;
commitid	sYWo0J70bGiiom5u;

1.3
date	2014.05.25.21.45.39;	author pascal;	state Exp;
branches;
next	1.2;

1.2
date	2013.12.02.22.34.55;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.08.08.20.24;	author pascal;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.08.08.20.24;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.5
log
@tedu gcc 4.8

ok sthen@@ tobiasu@@
@
text
@$OpenBSD: patch-gcc_configure,v 1.4 2015/01/08 20:23:21 pascal Exp $
--- gcc/configure.orig	Mon Dec  8 12:29:43 2014
+++ gcc/configure	Mon Jan  5 22:42:06 2015
@@@@ -17269,7 +17269,7 @@@@ openbsd*)
     *)				need_version=no  ;;
   esac
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
+  #finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
   if test -z "`echo __ELF__ | $CC -E - | $GREP __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     case $host_os in
@@@@ -20929,7 +20929,7 @@@@ openbsd*)
     *)				need_version=no  ;;
   esac
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
+  #finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
   if test -z "`echo __ELF__ | $CC -E - | $GREP __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     case $host_os in
@@@@ -26895,6 +26895,7 @@@@ else
 fi
 
         ;;
+  *-*-openbsd*) gcc_cv_libc_provides_ssp=yes ;;
   *) gcc_cv_libc_provides_ssp=no ;;
     esac
 fi
@


1.4
log
@Update to GCC 4.8.4.

Additionally, from tobiasu@@:

Disable the optimized shared Ada.Strings.Unbounded implementation until
overlapping memcpy() is fixed. Requires fresh adastrap's.

Rename all binaries starting with "egnat" back to "gnat". Reduces the
amount of workarounds needed to build various Ada software - including
GNAT itself.

Stop running the fixincludes script - saves time and pain. If our
headers are broken, we want to know and fix them ourselves, thank you
very much.

Drop gnat debug patch for a linker issue that was fixed some time ago.

ok tobiasu@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_configure,v 1.3 2014/05/25 21:45:39 pascal Exp $
@


1.3
log
@Update to gcc 4.8.3.  Tested on sparc64 and adastraps hosted by tobiasu@@.

"rein damit" tobiasu@@
@
text
@d1 4
a4 4
$OpenBSD: patch-gcc_configure,v 1.2 2013/12/02 22:34:55 pascal Exp $
--- gcc/configure.orig	Mon Apr 28 12:05:29 2014
+++ gcc/configure	Thu May 22 20:04:20 2014
@@@@ -17260,7 +17260,7 @@@@ openbsd*)
d13 1
a13 1
@@@@ -20920,7 +20920,7 @@@@ openbsd*)
d22 1
a22 1
@@@@ -26864,6 +26864,7 @@@@ else
@


1.2
log
@Update to 4.8.2; adastraps hosted by/testing/ok tobiasu@@
@
text
@d1 4
a4 4
$OpenBSD: patch-gcc_configure,v 1.1.1.1 2013/04/08 08:20:24 pascal Exp $
--- gcc/configure.orig	Wed Jun 19 03:18:38 2013
+++ gcc/configure	Wed Oct 16 18:56:49 2013
@@@@ -17250,7 +17250,7 @@@@ openbsd*)
d13 1
a13 1
@@@@ -20910,7 +20910,7 @@@@ openbsd*)
d22 1
a22 1
@@@@ -26782,6 +26782,7 @@@@ else
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD: patch-gcc_configure,v 1.3 2012/09/28 18:45:42 pascal Exp $
--- gcc/configure.orig	Thu Mar 14 16:43:23 2013
+++ gcc/configure	Fri Mar 22 22:19:20 2013
d22 1
a22 1
@@@@ -26779,6 +26779,7 @@@@ else
@


1.1.1.1
log
@Import gcc 4.8.

For a full Changelog, see: http://gcc.gnu.org/gcc-4.8/changes.html

Tested by me on amd64, i386 and powerpc and by brad@@ on sparc64.

Adds support for -java on powerpc.  -faggressive-loop-optimizations is
disabled by default in the port, and the default debugging format changed
to DWARF2 (instead of 4).

tweaks and ok tobiasu@@
@
text
@@
