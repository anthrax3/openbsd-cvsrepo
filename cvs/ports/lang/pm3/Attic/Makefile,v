head	1.13;
access;
symbols
	OPENBSD_5_2:1.12.0.4
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.8.0.12
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.10
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.8
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.7.0.4
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.6.0.6
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.4
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.2
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.5.0.8
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.6
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.5.0.4
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.2.0.4
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	espie:1.1.1.1
	modula3:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2012.12.26.15.07.57;	author naddy;	state dead;
branches;
next	1.12;

1.12
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.10.18.02.18;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.18.11.16.07;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.17.08.05.18;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.16.00.27.06;	author merdely;	state Exp;
branches;
next	1.7;

1.7
date	2006.10.21.09.42.32;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2005.08.09.19.23.18;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2003.08.21.14.46.52;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.11.22.42.32;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2002.10.27.14.12.48;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.03.21.21.09.17;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.05.22.09.19;	author espie;	state Exp;
branches
	1.1.1.1
	1.1.2.1;
next	;

1.1.1.1
date	2001.05.05.22.09.19;	author espie;	state Exp;
branches;
next	;

1.1.2.1
date	2001.09.27.20.22.58;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.13
log
@remove pm3: it has been broken for eight years
@
text
@# $OpenBSD: Makefile,v 1.12 2011/09/16 10:31:21 espie Exp $

CATEGORIES=	lang
ONLY_FOR_ARCHS=	i386
BROKEN=		stat() API change

COMMENT=Polytechnique Montreal Modula-3
PERMIT_PACKAGE_FTP=Yes
PERMIT_DISTFILES_FTP=Yes
PERMIT_PACKAGE_CDROM=Yes
PERMIT_DISTFILES_CDROM=Yes

V=1.1.15
DISTNAME=	pm3-$V
REVISION=	1
MAINTAINER=	Marc Espie <espie@@openbsd.org>

DISTFILES=	pm3-$V-src.tgz pm3-${V}a-OpenBSD_386-boot.tgz:1
PATCHFILES=	pm3-$V-BSD.patch-v1.2.gz:0

EXTRACT_ONLY=pm3-$V-src.tgz

MASTER_SITES= ftp://m3.polymtl.ca/pub/m3/targzip/
MASTER_SITES0= http://people.freebsd.org/~jdp/pm3-for-bsd/
MASTER_SITES1= http://sites.inka.de/~mips/unix/distfiles/

ALL_TARGET=exportall

HOMEPAGE=	http://m3.polymtl.ca/m3/
USE_GMAKE=	Yes

WANTLIB+=		Xm
LIB_DEPENDS+=		x11/openmotif
MAKE_ENV+=MOTIFLIB='-L${LOCALBASE}/lib -lXm'

post-extract:
	@@cd ${WRKDIST} && \
	    tar zxf ${FULLDISTDIR}/pm3-${V}a-OpenBSD_386-boot.tgz
	@@rm -f ${WRKDIST}/language/modula3/m3compiler/m3cc/gcc/assert.h

PATCH_DIST_STRIP=-p1

WRKINST=${WRKDIST}/binaries/OpenBSD_386

do-install:
	chown -R ${LIBOWN}:${LIBGRP} ${WRKINST}
	-cd ${PREFIX}/pm3/bin && strip *

M3ARCH=OpenBSD_386
M3OPTIONS=-DPREFIX=${PREFIX} -DLOCALBASE=${LOCALBASE} -DX11BASE=${X11BASE}
MAKE_FLAGS=M3OPTIONS="${M3OPTIONS}"
SUBST_VARS=M3ARCH

NO_REGRESS=	Yes

.include <bsd.port.mk>
@


1.12
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/04/10 18:02:18 jasper Exp $
@


1.11
log
@adjust after recent lesstif removal

ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/11/18 11:16:07 espie Exp $
d15 1
a15 1
REVISION=	0
@


1.10
log
@still broken,  unfortunately
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/17 08:05:18 espie Exp $
d15 1
d31 4
a34 1
USE_MOTIF=	any
@


1.9
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/16 00:27:06 merdely Exp $
d5 1
a5 1
#BROKEN=		stat() API change
@


1.8
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/10/21 09:42:32 naddy Exp $
d5 1
a5 1
BROKEN=		stat() API change
d35 1
@


1.7
log
@move distfiles from dying machine
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/08/09 19:23:18 naddy Exp $
d5 1
a5 1
BROKEN=		"stat() API change"
d7 1
a7 1
COMMENT="Polytechnique Montreal Modula-3"
@


1.6
log
@Formally admit that this port is broken and unlikely to be fixed soon.
It broke when stat() changed and applying the corresponding patches
from ezm3 is NOT sufficient.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/08/21 14:46:52 naddy Exp $
d24 1
a24 1
MASTER_SITES1= http://grappa.unix-ag.uni-kl.de/~naddy/
@


1.5
log
@* Use appropriate owners/groups from bsd.own.mk.
* Remove obsolete WWW lines while we're here.

From: Xavier Santolaria <xavier@@santolaria.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/05/11 22:42:32 naddy Exp $
d5 1
@


1.4
log
@bootstrap on ELF; ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/10/27 14:12:48 naddy Exp $
d40 1
a40 1
	chown -R root:bin ${WRKINST}
@


1.3
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/03/21 21:09:17 espie Exp $
d16 1
a16 1
DISTFILES=	pm3-$V-src.tgz pm3-$V-OpenBSD_386-boot.tgz:0
d23 1
d33 1
a33 1
	    tar zxf ${FULLDISTDIR}/pm3-1.1.15-OpenBSD_386-boot.tgz
a35 2

USE_GMAKE=Yes
@


1.2
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2001/05/05 22:09:19 espie Exp $
a3 1
NEED_VERSION=	1.515
d48 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
NEED_VERSION=	1.405
@


1.1.2.1
log
@MFC:
Polytechnique Montreal Modula-3 distribution.

This is a prerequisite for cvsup.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/05/05 22:09:19 espie Exp $
@


1.1.1.1
log
@Polytechnique modula3.
This is a work in progress, that only works on i386 for now.

TODO: revisit packaging, port to other arches, change the name,
make sure the gcc config is right.
@
text
@@
