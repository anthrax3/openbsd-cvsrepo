head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.05.23.14.19.01;	author espie;	state Exp;
branches;
next	;
commitid	7nFLb8orpcjkJ2bF;


desc
@@


1.1
log
@let it build with clang, thx kettenis@@ for useful hints
@
text
@$OpenBSD$
Don't try to guess (wrong) with clang. Just assume we have pie

Index: src/runtime/Config.generic-openbsd
--- src/runtime/Config.generic-openbsd.orig
+++ src/runtime/Config.generic-openbsd
@@@@ -12,13 +12,9 @@@@
 LINKFLAGS += -export-dynamic -Wl,-z,wxneeded
 OS_LIBS += -lutil
 
-# If the compiler recognizes a -nopie flag then we're building on a
-# PIE-by-default system, so disable PIE.
-ifneq ($(shell $(CC) -dumpspecs 2>/dev/null | grep -e -nopie),)
-CFLAGS += -fno-pie
+CFLAGS += -fno-pie
 LINKFLAGS += -nopie
 LDFLAGS += -nopie
-endif
 
 ifdef LISP_FEATURE_SB_THREAD
 CFLAGS += -pthread
@
