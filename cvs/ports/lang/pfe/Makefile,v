head	1.28;
access;
symbols
	OPENBSD_6_1:1.27.0.4
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.26.0.4
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.22.0.4
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.17.0.2
	OPENBSD_5_4_BASE:1.17
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.15.0.4
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.14.0.4
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.10.0.4
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	pfe_20050529:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2017.07.28.23.34.26;	author naddy;	state Exp;
branches;
next	1.27;
commitid	NPZhwrDjB4oiPhQn;

1.27
date	2016.03.27.20.53.15;	author naddy;	state Exp;
branches;
next	1.26;
commitid	1zzcdxzQASRjIqVQ;

1.26
date	2015.06.20.19.31.24;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	L5RG4alpsz000yFC;

1.25
date	2015.06.20.19.26.10;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	OoBwRlVYgn6E3SHa;

1.24
date	2015.06.19.08.02.14;	author jasper;	state Exp;
branches;
next	1.23;
commitid	ZHYkBbpVH8PB3Cs4;

1.23
date	2015.05.22.11.31.16;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	2khjHXfpTaOuNVcx;

1.22
date	2014.07.05.14.08.04;	author naddy;	state Exp;
branches;
next	1.21;
commitid	BCuKeOd6M7SRUcBa;

1.21
date	2014.01.21.20.45.43;	author miod;	state Exp;
branches;
next	1.20;

1.20
date	2014.01.18.07.33.16;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2013.12.30.11.46.16;	author landry;	state Exp;
branches;
next	1.18;

1.18
date	2013.11.03.07.33.44;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.11.11.20.28;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2012.10.15.15.18.32;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2011.10.17.07.10.53;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.09.25.20.05.45;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.10.20.50.55;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2010.04.26.20.09.18;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2009.06.29.20.21.53;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.06.29.17.45.36;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2008.10.16.17.30.24;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.16.00.27.06;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2007.05.26.04.03.08;	author aanriot;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.30.16.24.05;	author aanriot;	state Exp;
branches;
next	1.4;

1.4
date	2006.07.17.16.59.59;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2005.12.30.23.21.16;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.28.17.46.43;	author aanriot;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.28.17.57.43;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.28.17.57.43;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.28
log
@disable global register variables when building with clang, which in
practice does not support such a fixed register allocation
@
text
@# $OpenBSD: Makefile,v 1.27 2016/03/27 20:53:15 naddy Exp $

BROKEN-powerpc=	does not build, error: lvalue required as increment operand

COMMENT=	Portable Forth Environment

DISTNAME=	pfe-0.33.71
REVISION=	1
CATEGORIES=    	lang

SHARED_LIBS +=  pfe                  33.71    # .33.71
SHARED_LIBS +=  pfe-0-forth          33.71    # .33.71

HOMEPAGE=	http://pfe.sourceforge.net/

# LGPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=pfe/}
EXTRACT_SUFX=	.tar.bz2

WANTLIB=	c m ncurses

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--mandir=${PREFIX}/man

# this renames floating.so to libfloating.so before linking with it
USE_LIBTOOL=	gnu

# requires gmake
NO_TEST=	Yes

.include <bsd.port.arch.mk>

# global register variables
.if ${PROPERTIES:Mclang}
CONFIGURE_ARGS+=	--without-regs
.endif

# XXX remove CVS Id  (patch-pfe_Makefile_in)
post-extract:
	perl -pi -e 's,^#.*Id: Makefile.am.*,,' ${WRKSRC}/pfe/Makefile.in

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/pfe/
	${INSTALL_DATA} ${WRKDIST}/doc/Forthprimer.pdf \
		${PREFIX}/share/doc/pfe/

.include <bsd.port.mk>
@


1.27
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/06/20 19:31:24 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
a26 4
.if ${MACHINE_ARCH} == "i386"
CONFIGURE_ARGS+=--with-regs
.endif

d30 1
d32 7
@


1.26
log
@I so hate CVS...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/06/20 19:26:10 ajacoutot Exp $
d8 1
@


1.25
log
@Unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/06/19 08:02:14 jasper Exp $
d35 1
a35 1
# XXX remove CVS Id  
d37 1
a37 1
	perl -pi -e 's,# \$$Id: .*,,' ${WRKSRC}/pfe/Makefile.in
@


1.24
log
@update to pfe-0.33.71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/05/22 11:31:16 ajacoutot Exp $
d34 4
@


1.23
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/07/05 14:08:04 naddy Exp $
d7 1
a7 4
DISTNAME=	pfe-0.33.69
SHARED_LIBS +=  pfe                  33.69    # .33.69
SHARED_LIBS +=  pfemodule            33.69    # .33.69
SHARED_LIBS +=  pfe-0-forth          33.69    # .33.69
d9 3
a11 1
REVISION=	2
d33 2
a38 2

NO_TEST=	Yes
@


1.22
log
@Drop USE_GROFF since groff and mandoc produce identical output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/01/21 20:45:43 miod Exp $
d12 1
a12 1
REVISION=	1
@


1.21
log
@Make sure `cells' are aligned to pointer size boundaries, using the same logic
deciding whether they need to be `int' or `long' sized (really `void *' sized).
Unbreaks 64-bit platforms with strict alignment (alpha and sparc64 where this
had been detected, but likely mips64 as well).

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/01/18 07:33:16 landry Exp $
a25 1
USE_GROFF =	Yes
@


1.20
log
@Mark as BROKEN-sparc64, fails the same way as alpha since end of october.
(pfe --help segfaults -> no manpage -> fails to package)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/12/30 11:46:16 landry Exp $
a3 2
BROKEN-alpha=	pfe segfaults when called with --help during build
BROKEN-sparc64=	pfe segfaults when called with --help during build
d12 1
a12 1
REVISION=	0
@


1.19
log
@Mark as BROKEN-alpha: the pfe binary is called with --help during build
to generate its manpage, but it segfaults at that point. Why building it
at all then...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/11/03 07:33:44 ajacoutot Exp $
d5 1
@


1.18
log
@Remove useless MESSAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/11 11:20:28 espie Exp $
d4 1
@


1.17
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/10/15 15:18:32 sthen Exp $
d12 1
@


1.16
log
@zap trailing whitespace in files where it's present on PERMIT_* lines
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/10/17 07:10:53 ajacoutot Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d39 1
a39 1
NO_REGRESS=	Yes
@


1.15
log
@It seems no one is interested if fixing this port on powerpc, so mark it
BROKEN.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/18 19:20:42 espie Exp $
d17 1
a17 1
PERMIT_PACKAGE_FTP=	Yes 
@


1.14
log
@USE_GROFF=Yes
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.13 2010/09/25 20:05:45 steven Exp $
@


1.13
log
@summarize why it uses gnu libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/04/26 20:09:18 steven Exp $
d26 1
@


1.12
log
@drop gcc4 module on i386; from Brad
@
text
@d31 1
@


1.11
log
@use gnu libtool here for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/06/29 17:45:36 naddy Exp $
a26 4
# i386 build fails due to a compiler bug with gcc 3.3
MODULES+=       gcc4
MODGCC4_ARCHES= i386
MODGCC4_LANGS=	c
@


1.10
log
@Fix the build on i386; add --with-regs to CONFIGURE_ARGS (from pkgsrc)
and build with gcc4. Didn't package on i386, no effect on other arch -> no bump.
ok naddy.
@
text
@d35 1
a35 1
USE_LIBTOOL=	Yes
@


1.9
log
@BROKEN; nobody has been able/willing to fix this on the legacy i386 arch
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.8 2008/10/16 17:30:24 jasper Exp $

.if ${MACHINE_ARCH} == "i386"
BROKEN=		assembly optimizations confuse gcc
.endif
d26 8
@


1.8
log
@- update pfe to 0.33.69
- specify license version
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.7 2007/09/16 00:27:06 merdely Exp $
@


1.7
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/05/26 04:03:08 aanriot Exp $
d5 4
a8 4
DISTNAME=	pfe-0.32.94
PKGNAME=	${DISTNAME}p3
SHARED_LIBS +=	pfe			32.95	# .32.94
SHARED_LIBS +=	pfe-0			32.95
d13 1
a13 1
# LGPL
d20 1
@


1.6
log
@- honor CFLAGS.
- format SHARED_LIB lines.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/12/30 16:24:05 aanriot Exp $
d3 1
a3 1
COMMENT=	"Portable Forth Environment"
@


1.5
log
@- drop maintainership (I'm not using them anymore).
- bump PKGNAMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/07/17 16:59:59 espie Exp $
d6 3
a8 3
PKGNAME=	${DISTNAME}p2
SHARED_LIBS=		pfe 32.94 \
			pfe-0 32.94
d24 1
a24 1
CONFIGURE_ARGS+=	--mandir=${PREFIX}/man
@


1.4
log
@say goodbye to MODGNU_SHARED, put documentation in the right place, bump
pkgname.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/12/30 23:21:16 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
a11 2

MAINTAINER=	Alexandre Anriot <aanriot@@openbsd.org>
@


1.3
log
@- Fix configure script so it will work if one has DEBUG=-g in mk.conf
- Remove "the" from COMMMENT
- USE_LIBTOOL
- SHARED_LIBS
- Bump PKGNAME

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/06/28 17:46:43 aanriot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
a8 2
MODGNU_SHARED_LIBS=	pfe '-export-dynamic -release 0' \
			pfe-0 '-export-dynamic -release 0'
d26 1
@


1.2
log
@update my email address.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/05/28 17:57:43 mbalmer Exp $
d3 1
a3 1
COMMENT=	"the Portable Forth Environment"
d6 5
d28 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 1
a10 1
MAINTAINER=	Alexandre Anriot <aanriot@@atlantilde.com>
@


1.1.1.1
log
@Portable Forth Engine

from Alexandre Anriot, aanriot (at) atlantilde.com
@
text
@@
