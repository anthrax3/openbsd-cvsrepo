head	1.28;
access;
symbols
	OPENBSD_6_1:1.28.0.6
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.28.0.4
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.26.0.4
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.19.0.2
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.14.0.4
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	ian_2010-Dec-08:1.1.1.1
	ian:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2016.01.30.09.31.59;	author jasper;	state Exp;
branches;
next	1.27;
commitid	C5cOHT2vTWLVUisE;

1.27
date	2016.01.20.08.01.13;	author jasper;	state Exp;
branches;
next	1.26;
commitid	yLC400UT3x8m8D3M;

1.26
date	2015.07.18.00.50.23;	author jasper;	state Exp;
branches;
next	1.25;
commitid	nALA4Ll2iiq2LG0N;

1.25
date	2015.04.05.13.31.14;	author sthen;	state Exp;
branches;
next	1.24;
commitid	1hQJnDR1GYYQ0MPE;

1.24
date	2014.08.10.09.58.05;	author espie;	state Exp;
branches;
next	1.23;
commitid	jyyOLTDxRdjpw44n;

1.23
date	2014.07.10.11.06.15;	author rpe;	state Exp;
branches;
next	1.22;
commitid	zXOWyDxvWRmZFNNv;

1.22
date	2014.05.07.15.42.16;	author kurt;	state Exp;
branches;
next	1.21;

1.21
date	2014.03.30.21.08.24;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2014.03.30.20.38.10;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2014.01.24.09.22.49;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2013.07.02.10.36.35;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.17.19.35.06;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.11.11.20.27;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2013.03.08.10.24.00;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2012.04.18.20.18.43;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2011.11.30.19.40.28;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2011.10.21.16.23.45;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.09.25.21.12.51;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2011.09.16.12.47.50;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2011.09.16.10.31.20;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2011.08.30.19.52.22;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2011.08.30.19.48.17;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2011.08.30.17.16.36;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2011.08.24.07.50.40;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2011.06.23.07.40.25;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2010.12.13.16.04.28;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.12.17.28.16;	author ian;	state Exp;
branches;
next	1.1;

1.1
date	2010.12.08.21.21.14;	author ian;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.12.08.21.21.14;	author ian;	state Exp;
branches;
next	;


desc
@@


1.28
log
@remove duplicates from the completions list
@
text
@# $OpenBSD: Makefile,v 1.27 2016/01/20 08:01:13 jasper Exp $

COMMENT =		Lisp-1 dialect for the Java Virtual Machine

GH_ACCOUNT =		clojure
GH_PROJECT =		clojure
GH_TAGNAME =		${GH_PROJECT}-1.8.0
REVISION =		0
DISTNAME =		${GH_TAGNAME}

PKG_ARCH =		*

CATEGORIES =		lang

HOMEPAGE =		http://www.clojure.org/

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>

# Eclipse Public License EPL 1.0
PERMIT_PACKAGE_CDROM =	Yes

MODULES =		java
MODJAVA_VER =		1.6+
MODJAVA_BUILD = 	ant
MODJAVA_BUILD_TARGET_NAME =	jar
MODJAVA_JRERUN = 	Yes

WRKDIST =		${WRKDIR}/clojure-${DISTNAME}/

RUN_DEPENDS =		java/javaPathHelper \
			misc/rlwrap

# Tests fail to compile (and need JAX-WS)
NO_TEST =		Yes

CLOJURE_HOME =		${PREFIX}/clojure

# Maintainer target to generate completions file
completions: install
	${LOCALBASE}/bin/clojure ${FILESDIR}/clj_completions.clj

do-install:
	${INSTALL_DATA_DIR} ${CLOJURE_HOME}
	${INSTALL_DATA} ${WRKSRC}/clojure.jar ${CLOJURE_HOME}
	@@${SUBST_PROGRAM} ${FILESDIR}/clojure \
		${PREFIX}/bin/clojure
	cd ${WRKDIST} && tar -cf - src | tar -C ${CLOJURE_HOME} -xf -
	chown -R ${SHAREOWN}:${SHAREGRP} ${CLOJURE_HOME}/src
	chmod -R a+r ${CLOJURE_HOME}/src
	${INSTALL_DATA} ${FILESDIR}/clj_completions ${CLOJURE_HOME}

.include <bsd.port.mk>
@


1.27
log
@update to clojure-1.8.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/07/18 00:50:23 jasper Exp $
d8 1
@


1.26
log
@update to clojure-1.7.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/04/05 13:31:14 sthen Exp $
d7 1
a7 1
GH_TAGNAME =		${GH_PROJECT}-1.7.0
@


1.25
log
@drop GH_COMMIT lines which are hidden behind GH_TAGNAME,
discussed with a few in the room.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/08/10 09:58:05 espie Exp $
d7 1
a7 1
GH_TAGNAME =		${GH_PROJECT}-1.6.0
a8 1
REVISION =		1
@


1.24
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/07/10 11:06:15 rpe Exp $
a7 1
GH_COMMIT =		d6baf6e1fb6e2b9ab3e3a459de5ab1d4381938aa
@


1.23
log
@Move ports that used filename{url}sufx to fetch DISTFILES from
Github to GH_ACCOUNT, GH_PROJECT, GH_TAGNAME, GH_COMMIT.

OK sthen@@ jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/05/07 15:42:16 kurt Exp $
d46 1
a46 2
	@@${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -c \
		${FILESDIR}/clojure \
@


1.22
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/03/30 21:08:24 jasper Exp $
d5 5
a9 2
VER =			1.6.0
DISTNAME =		clojure-${VER}
a21 3

MASTER_SITES =		https://github.com/clojure/clojure/archive/
DISTFILES=		${DISTNAME}{clojure-${VER}}${EXTRACT_SUFX}
@


1.21
log
@write out the sorted list of completions, makes it easier to diff the list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/03/30 20:38:10 jasper Exp $
d7 1
a7 1
REVISION =		0
@


1.20
log
@update to clojure-1.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/01/24 09:22:49 espie Exp $
d7 1
@


1.19
log
@yet another useless port. 640 for all files, really ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/07/02 10:36:35 espie Exp $
d5 3
a7 3
V =			1.5.1
DISTNAME =		clojure-${V}
EXTRACT_SUFX =		.zip
a8 1
REVISION =		0
d19 2
a20 1
MASTER_SITES =		http://repo1.maven.org/maven2/org/clojure/clojure/$V/
d27 2
@


1.18
log
@rename stuff so that java.port.mk conforms to the new style of overriding
do-build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/17 19:35:06 jasper Exp $
d9 1
d48 1
@


1.17
log
@- update to clojure-1.5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/11 11:20:27 espie Exp $
d24 1
a24 1
MODJAVA_BUILD_TARGET =	jar
@


1.16
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/08 10:24:00 jasper Exp $
d5 1
a5 1
V =			1.4.0
@


1.15
log
@add a maintainer target to generate the completions with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/04/18 20:18:43 jasper Exp $
a17 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	Yes
d31 1
a31 1
NO_REGRESS =		Yes
@


1.14
log
@- update clojure to 1.4.0
* many changes, please refer to the changelog for a full list:
http://groups.google.com/group/clojure/browse_thread/thread/1f87f69db07a8162
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/11/30 19:40:28 jasper Exp $
d38 3
a40 4
# Completions file created with:
# (def completions (mapcat (comp keys ns-publics) (all-ns)))
# (with-open [f (java.io.BufferedWriter. (java.io.FileWriter. "clj_completions"))]
#    (.write f (apply str (interpose \newline completions))))
@


1.13
log
@- allow tab-completion to work for all clojure namespaces.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/10/21 16:23:45 espie Exp $
d5 1
a5 1
V =			1.3.0
a6 1
REVISION =		0
@


1.12
log
@CHMOD and CHOWN serve no useful purpose, they're just chown/chmod
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/09/25 21:12:51 jasper Exp $
d7 1
d39 5
d52 1
@


1.11
log
@- update clojure to 1.3.0

clojure-contrib won't be updated yet, as upstream split it into a dozen
separate modules.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/09/16 12:47:50 jasper Exp $
d45 1
a45 1
	${CHOWN} -R ${SHAREOWN}:${SHAREGRP} ${CLOJURE_HOME}/src
@


1.10
log
@
- also append 'src' to the classpath, this is usefull when invoking clojure
from a library path.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/09/16 10:31:20 espie Exp $
d5 1
a5 1
V =			1.2.1
a6 1
REVISION =		5
d22 1
a22 1
MASTER_SITES =		http://github.com/downloads/clojure/clojure/
d26 2
d33 1
a33 1
NO_BUILD =		Yes
d40 1
a40 1
	${INSTALL_DATA} ${WRKDIST}/clojure.jar ${CLOJURE_HOME}
@


1.9
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/08/30 19:52:22 jasper Exp $
d7 1
a7 1
REVISION =		4
@


1.8
log
@- tweak previous, now clojure can also find and use other java classes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/08/30 19:48:17 jasper Exp $
d7 1
a7 1
REVISION =		3
@


1.7
log
@- allow clojure to pickup clojure-contrib
- take maintainership

ok ian@@ (former MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/08/30 17:16:36 jasper Exp $
d7 1
a7 1
REVISION =		2
d15 1
a15 1
MAINTAINER=		Ian Darwin <ian@@openbsd.org>
@


1.6
log
@- bump REVISION after recent java.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/08/24 07:50:40 jasper Exp $
d7 1
a7 1
REVISION =		1
@


1.5
log
@Add readline capabilities to the REPL by using rlwrap.

ok ian@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/06/23 07:40:25 jasper Exp $
d7 1
a7 1
REVISION =		0
d11 1
a11 1
CATEGORIES =		lang java
@


1.4
log
@- update to 1.2.1

ok ian@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/12/13 16:04:28 jasper Exp $
d7 1
d29 2
a30 1
RUN_DEPENDS =		java/javaPathHelper
@


1.3
log
@- fix indent of do-install
- add missing rcs id
- reformat DESCR
- protect $@@ in the clojure script

ok ian@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/12/12 17:28:16 ian Exp $
d5 1
a5 1
V =			1.2.0
a7 1
REVISION =		1
a34 1

d41 1
a41 2
	cd ${WRKDIST} && tar -cf - src | \
		tar -C ${CLOJURE_HOME} -xf -
@


1.2
log
@Remove hard-coded path name in startup script, requested by ajacoutot@@ and by Daniel Dickman.
Change MODJAVA_VER from 1.7 to 1.6 and remove redundant PKG_NAME and BUILD_DEPENDS. Bump pkg.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/12/08 21:21:14 ian Exp $
d8 1
a8 1
REVISION =		0
d38 8
a45 8
			${INSTALL_DATA_DIR} ${CLOJURE_HOME}
			${INSTALL_DATA} ${WRKDIST}/clojure.jar ${CLOJURE_HOME}
			@@${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -c \
				${FILESDIR}/clojure \
				${PREFIX}/bin/clojure
			cd ${WRKDIST} && tar -cf - src | \
				tar -C ${CLOJURE_HOME} -xf -
			${CHOWN} -R ${SHAREOWN}:${SHAREGRP} ${CLOJURE_HOME}/src
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
PKGNAME =		clojure-${V}
d26 1
a26 1
MODJAVA_VER =		1.7+
a28 1
BUILD_DEPENDS =		devel/apache-ant
d36 1
d40 3
a42 1
			${INSTALL_SCRIPT} ${FILESDIR}/clojure ${PREFIX}/bin
@


1.1.1.1
log
@Initial import of clojure, a Lisp-1 language for the JVM.
Upgraded by Dan Cross to 1.2.0 from my earlier submission.
Improved by and OK jeremy@@, martynas@@
@
text
@@
