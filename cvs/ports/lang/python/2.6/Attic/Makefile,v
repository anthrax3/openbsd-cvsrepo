head	1.28;
access;
symbols
	OPENBSD_4_9:1.22.0.2
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3;
locks; strict;
comment	@# @;


1.28
date	2011.07.13.08.03.31;	author jasper;	state dead;
branches;
next	1.27;

1.27
date	2011.07.08.07.39.37;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2011.05.30.21.11.44;	author rpointel;	state Exp;
branches;
next	1.25;

1.25
date	2011.05.23.06.42.02;	author jasper;	state Exp;
branches;
next	1.24;

1.24
date	2011.05.03.17.17.01;	author fgsch;	state Exp;
branches;
next	1.23;

1.23
date	2011.04.12.19.28.13;	author kili;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.15.20.55.25;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.28.08.22.11;	author fgsch;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.09.22.13.44.12;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2010.09.16.22.36.08;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	2010.07.23.13.56.26;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2010.04.15.18.35.02;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2010.04.15.14.58.24;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.04.15.14.11.01;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.02.25.11.02.39;	author phessler;	state Exp;
branches;
next	1.12;

1.12
date	2010.02.09.12.23.59;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2010.01.20.08.15.21;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2009.11.22.22.53.19;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2009.10.27.23.35.09;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.10.16.09.38.20;	author djm;	state Exp;
branches;
next	1.7;

1.7
date	2009.08.10.17.31.07;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2009.06.25.01.49.54;	author jolan;	state Exp;
branches;
next	1.5;

1.5
date	2009.05.03.22.26.27;	author djm;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.16.11.40.24;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2009.01.01.21.03.27;	author djm;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.19.07.13.45;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.18.12.03.56;	author djm;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Retire this version of the 2.x family. All ports either use the
default (2.7) or are using an even older version (2.4/2.5) so 2.6 can go.

ok sthen@@ rpointel@@
@
text
@# $OpenBSD: Makefile,v 1.27 2011/07/08 07:39:37 jasper Exp $

VERSION =		2.6
PATCHLEVEL =		.6
REVISION =		5
SHARED_LIBS =		python2.6 1.0

AUTOCONF_VERSION =	2.65
CONFIGURE_ARGS +=	--with-cxx_main

.include <bsd.port.mk>
@


1.27
log
@fix, as spotted by nigel taylor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/05/30 21:11:44 rpointel Exp $
@


1.26
log
@Correct the wrong value of LDFLAGS (certain ports will need WANTLIB += ${MODPY_WANTLIB}).

Thanks for fgsch@@ for his patch-Modules_selectmodule_c to correct SIGBUS error on sparc64 (test_kqueue.py).

It's time make bulks of Python2.7 on as many archs as we can.

Thanks a lot.

ok sthen@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/05/23 06:42:02 jasper Exp $
d5 1
a5 1
REVISION =		4
@


1.25
log
@Remove python-mode.el, it's now part of the emacs-python package.
It wasn't distributed anymore in the python distfile starting from 2.7 anymore.

Please install the emacs-python pacakge to continue using the functionality.

ok rpointel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/05/03 17:17:01 fgsch Exp $
d5 1
a5 1
REVISION =		3
@


1.24
log
@- install 2to3 under python2.6-2to3 so it can co-exist with 2.7
- use right autoconf version
- fix CVE-2011-1521 (2.4 and 2.5 will be handled separately)
- bump
rpointel sthen martynas ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/04/12 19:28:13 kili Exp $
d5 1
a5 1
REVISION =		2
@


1.23
log
@Whenever a package installs a script using #!/usr/bin/env, god kills
a kitten.

Let pydoc${VERSION} use #!${LOCALBASE}/bin/python${VERSION} instead
of $!/usr/bin/env python${VERSION}.

ok rpointel@@, sthen@@ (after some discussion wether post-build is
the proper target for this or not)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/15 20:55:25 sthen Exp $
d5 1
a5 1
REVISION =		1
d8 1
@


1.22
log
@use tk.port.mk and move -tkinter to a more recent version of Tcl/Tk.
reads fine to fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/28 08:22:11 fgsch Exp $
d5 1
a5 1
REVISION =		0
@


1.21
log
@Simplify and switch to REVISION.
From Alexandr Shadchin (firstname dot lastname at gmail dot com).
martynas@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/18 19:20:42 espie Exp $
d5 1
@


1.20
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/09/22 13:44:12 jasper Exp $
a6 6
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "amd64" || \
    ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH:Mmips64*}
PATCH_LIST =		patch-* sup64-*
.endif

AUTOCONF_VERSION =	2.61
a7 4
USE_GROFF =	Yes

post-extract:
	rm -r ${WRKDIST}/Modules/expat
@


1.19
log
@- remove the BROKEN-mips64 markers after miod's recent softfloat commit,
python seems to be working well enough now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/09/16 22:36:08 fgsch Exp $
d14 1
@


1.18
log
@Update Python to 2.6.6. Tested by many.
sthen@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/07/23 13:56:26 sthen Exp $
a5 2

BROKEN-mips64 = Floating point exception while generating pyc objects
@


1.17
log
@Update Python to 2.6.5, committing on behalf of fgsch@@ whose laptop is broken.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/04/15 18:35:02 jasper Exp $
d3 3
a5 5
VERSION=		2.6
PATCHLEVEL=		.5
SHARED_LIBS=		python2.6 1.0

# PSUBDIR=		python/${VERSION}
d11 1
a11 1
PATCH_LIST=		patch-* sup64-*
d14 2
a15 2
AUTOCONF_VERSION=	2.61
CONFIGURE_ARGS+=	--with-cxx_main
@


1.16
log
@- more BROKEN-$ARCH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/04/15 14:58:24 ajacoutot Exp $
d4 1
a4 2
PATCHLEVEL=		.3
PKG_PATCHLEVEL=		p3
@


1.15
log
@Stupid poor blank lines, stupid poor blank lines...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/04/15 14:11:01 ajacoutot Exp $
d10 1
a10 3
.if ${MACHINE_ARCH} == "mips64"
BROKEN = Floating point exception while generating pyc objects
.endif
@


1.14
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.

sthen@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/02/25 11:02:39 phessler Exp $
d5 1
a5 1
PKG_PATCHLEVEL=		p2
@


1.13
log
@Allow Python to build on loongson.  Bring in some libffi fixes, inspired
by jasper@@'s fixes to the libffi port.

Mark mips64 (aka, sgi) as BROKEN, as the build fails.  We'll look closer
at this after unlock.

OK jasper@@

ports is unlocked for a while only for those who have been informed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/02/09 12:23:59 jasper Exp $
d5 1
a5 1
PKG_PATCHLEVEL=		p1
@


1.12
log
@- extend archtecture tests for mips64el

ok naddy@@ phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/01/20 08:15:21 espie Exp $
d9 4
@


1.11
log
@fix update from OpenBSD 4.5 (missed @@pkgpath markers at the time
-bz2, -expat, -sqlite were removed)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/11/22 22:53:19 jasper Exp $
d11 1
a11 1
    ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH} == "mips64"
@


1.10
log
@- minor tweaks for mips64, none of the versions fully build, but at least
they're somewhat getting there.
- with the added patch, 2.5 gets as far as 2.6, and then fails terribly.

ok djm@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/10/27 23:35:09 sthen Exp $
d5 1
a5 1
PKG_PATCHLEVEL=		p0
@


1.9
log
@fix @@conflict lines; unbreaks pkg_add -u if you have python-foo-2.6
installed (with the new version of pkg_add). ok djm@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/10/16 09:38:20 djm Exp $
d10 2
a11 1
.if ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "sparc64"
@


1.8
log
@update to maintenance release 2.6.3, relnotes at:
http://www.python.org/download/releases/2.6.3/NEWS.txt

NB. regress tests are known to fail if py-xml is installed. Try to spend
less time than I did in figuring this out.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/08/10 17:31:07 kili Exp $
d5 1
a5 1
#PKG_PATCHLEVEL=		p1
@


1.7
log
@WANTLIB changes after xcb addition and bump.

For some unknown reason, I forgot to commit lang/*
this morning.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/06/25 01:49:54 jolan Exp $
d4 2
a5 2
PATCHLEVEL=		.2
PKG_PATCHLEVEL=		p1
@


1.6
log
@avoid conflict in -tools subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/05/03 22:26:27 djm Exp $
d5 1
a5 1
PKG_PATCHLEVEL=		p0
@


1.5
log
@python-2.6.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/03/16 11:40:24 espie Exp $
d5 1
a5 1
#PKG_PATCHLEVEL=		p0
@


1.4
log
@a few deps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/01/01 21:03:27 djm Exp $
d4 2
a5 2
PATCHLEVEL=		.1
PKG_PATCHLEVEL=		p0
@


1.3
log
@Updates and garbage collect all three Python ports:

    2.4.4 => 2.4.8
    2.5.2 => 2.5.4
    2.6 => 2.6.1

Python 2.4 and 2.5 lose their build knobs to match 2.6.

Removes no longer needed Python 2.5 security patches backported
from the release25-maint SVN branch.

Remove the -bz2 subpackage from all three versions. It is silly
to make a subpackage to avoid depending on something tiny and
compatibly licensed.

Python 2.4 and 2.5 lose their -expat subpackages; expat has been
in base for some time.

Python 2.5 loses its sqlite subpackge. Again, sqlite is tiny,
compatibly licensed and is depended upon by more and more
applications. This brings it into line with the 2.6 version.

Rework all three version's handling of setup.py. Rather than regex
replacing LOCALBASE and X11BASE into setup.py post-configure, these
are passed in though environment variables. Will save hours of
frustrated cursing familiar to anyone who has accidently used the
update-patches target after configure and had to go back and redo
all the substitutions.

Rework the patching of setup.py for 2.4 and 2.5 to be more like
what we do for 2.6. I.e. keep the diff minimal and avoid deleting
huge blocks of code, so the diff has a chance of applying without
massive hand-editing each patch release.

Fix .py paths in installed .pyc files (patch from eric@@)

feedback from several, particularly eric@@, ajacoutot@@ and Ingo
Schwarze; "get it in" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/10/19 07:13:45 ajacoutot Exp $
d5 1
a5 1
#PKG_PATCHLEVEL=		
@


1.2
log
@- tweak MESSAGE

ok djm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2008/10/18 12:03:56 djm Exp $
d4 2
a5 3
#PATCHLEVEL=
#PSUBDIR=		python/2.6
PKG_PATCHLEVEL=		p0
@


1.1
log
@port of Python-2.6, with 100% fewer build knobs!

Thanks to Ian Darwin, Will Maier and Aleksander Piotrowski for feedback
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/08/06 03:23:31 djm Exp $
d6 1
a6 1
#PKG_PATCHLEVEL=		
@

