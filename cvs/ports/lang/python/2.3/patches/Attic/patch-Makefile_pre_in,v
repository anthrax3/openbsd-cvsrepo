head	1.3;
access;
symbols
	OPENBSD_4_4:1.2.0.12
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.10
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.8
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.1.1.0.8
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.6
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.4
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	sturm_Dec-31-2003:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2008.10.19.11.33.50;	author djm;	state dead;
branches;
next	1.2;

1.2
date	2005.12.27.19.41.21;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2003.12.31.17.38.33;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.12.31.17.38.33;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.3
log
@python-2.3 => attic
@
text
@$OpenBSD: patch-Makefile_pre_in,v 1.2 2005/12/27 19:41:21 alek Exp $
--- Makefile.pre.in.orig	Tue Jan 11 14:48:52 2005
+++ Makefile.pre.in	Sat Dec 24 11:18:58 2005
@@@@ -308,7 +308,7 @@@@ all:		$(BUILDPYTHON) oldsharedmods share
 $(BUILDPYTHON):	Modules/$(MAINOBJ) $(LIBRARY) $(LDLIBRARY)
 		$(LINKCC) $(LDFLAGS) $(LINKFORSHARED) -o $@@ \
 			Modules/$(MAINOBJ) \
-			$(BLDLIBRARY) $(LIBS) $(MODLIBS) $(SYSLIBS) $(LDLAST)
+			-lpython$(VERSION) $(LIBS) $(MODLIBS) $(SYSLIBS) $(LDLAST)
 
 platform: $(BUILDPYTHON)
 	$(RUNSHARED) ./$(BUILDPYTHON) -E -c 'import sys ; from distutils.util import get_platform ; print get_platform()+"-"+sys.version[0:3]' >platform
@@@@ -357,6 +357,11 @@@@ libpython$(VERSION).so: $(LIBRARY_OBJS)
 libpython$(VERSION).sl: $(LIBRARY_OBJS)
 	$(LDSHARED) -o $@@ $(LIBRARY_OBJS) $(LIBC) $(LIBM)
 
+# This rule for OpenBSD...
+$(LDLIBRARY):      $(LIBRARY)
+	$(LDSHARED) -o $@@ $(LIBRARY_OBJS)
+
+
 # This rule is here for OPENSTEP/Rhapsody/MacOSX. It builds a temporary
 # minimal framework (not including the Lib directory and such) in the current
 # directory.
@@@@ -587,7 +592,6 @@@@ bininstall:	altbininstall
 	then rm -f $(DESTDIR)$(BINDIR)/$(PYTHON); \
 	else true; \
 	fi
-	(cd $(DESTDIR)$(BINDIR); $(LN) python$(VERSION)$(EXE) $(PYTHON))
 
 # Install the interpreter with $(VERSION) affixed
 # This goes into $(exec_prefix)
@@@@ -598,7 +602,7 @@@@ altbininstall:	$(BUILDPYTHON)
 			exit 1; \
 		fi; \
 	fi
-	@@for i in $(BINDIR) $(LIBDIR); \
+	@@for i in $(BINDIR) $(LIBDIR) $(LIBPL); \
 	do \
 		if test ! -d $(DESTDIR)$$i; then \
 			echo "Creating directory $$i"; \
@@@@ -607,14 +611,12 @@@@ altbininstall:	$(BUILDPYTHON)
 		fi; \
 	done
 	$(INSTALL_PROGRAM) $(BUILDPYTHON) $(DESTDIR)$(BINDIR)/python$(VERSION)$(EXE)
-	if test -f libpython$(VERSION)$(SO); then \
+	if test -f $(LDLIBRARY); then \
 		if test "$(SO)" = .dll; then \
 			$(INSTALL_SHARED) libpython$(VERSION)$(SO) $(DESTDIR)$(BINDIR); \
 		else \
-			$(INSTALL_SHARED) libpython$(VERSION)$(SO) $(DESTDIR)$(LIBDIR)/$(INSTSONAME); \
-			if test libpython$(VERSION)$(SO) != $(INSTSONAME); then \
-				(cd $(DESTDIR)$(LIBDIR); $(LN) -sf $(INSTSONAME) libpython$(VERSION)$(SO)); \
-			fi \
+			$(INSTALL_SHARED) $(LDLIBRARY) $(DESTDIR)$(LIBPL)/$(LDLIBRARY); \
+			(cd $(DESTDIR)$(LIBDIR); $(LN) -s python$(VERSION)/config/$(LDLIBRARY)); \
 		fi; \
 	else	true; \
 	fi
@@@@ -630,7 +632,7 @@@@ maninstall:
 		fi; \
 	done
 	$(INSTALL_DATA) $(srcdir)/Misc/python.man \
-		$(DESTDIR)$(MANDIR)/man1/python.1
+		$(DESTDIR)$(MANDIR)/man1/python2.3.1
 
 # Install the library
 PLATDIR=	plat-$(MACHDEP)
@


1.2
log
@- Better RUN_DEPENDS for subpackages
- Use SHARED_LIBS
- Bump PKGNAMEs

spotted by naddy@@ and sturm@@
SHARED_LIBS tips from espie@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_pre_in,v 1.1.1.1 2003/12/31 17:38:33 sturm Exp $
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.pre.in.orig	2003-11-18 20:54:00.000000000 +0100
+++ Makefile.pre.in	2003-12-31 17:43:24.000000000 +0100
@@@@ -305,7 +305,7 @@@@ all:		$(BUILDPYTHON) oldsharedmods share
d13 1
a13 1
@@@@ -354,6 +354,11 @@@@ libpython$(VERSION).so: $(LIBRARY_OBJS)
d18 1
a18 1
+libpython$(VERSION).so.$(MAJOR).$(MINOR):      $(LIBRARY)
d25 1
a25 1
@@@@ -584,7 +589,6 @@@@ bininstall:	altbininstall
d33 1
a33 1
@@@@ -595,7 +599,7 @@@@ altbininstall:	$(BUILDPYTHON)
d42 1
a42 1
@@@@ -604,11 +608,11 @@@@ altbininstall:	$(BUILDPYTHON)
d47 1
a47 1
+	if test -f libpython$(VERSION)$(SO).$(MAJOR).$(MINOR); then \
d52 9
a60 5
+			$(INSTALL_SHARED) libpython$(VERSION)$(SO).$(MAJOR).$(MINOR) $(DESTDIR)$(LIBPL)/libpython$(VERSION)$(SO).$(MAJOR).$(MINOR); \
 			if test libpython$(VERSION)$(SO) != $(INSTSONAME); then \
 				(cd $(DESTDIR)$(LIBDIR); $(LN) -sf $(INSTSONAME) libpython$(VERSION)$(SO)); \
 			fi \
@@@@ -627,7 +631,7 @@@@ maninstall:
@


1.1.1.1
log
@initial import of python 2.3.3 from
Aleksander Piotrowski <aleksander dot piotrowski at nic dot com dot pl>

@
text
@@
