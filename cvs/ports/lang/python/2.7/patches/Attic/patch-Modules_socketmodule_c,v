head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_3:1.1.1.1.0.8
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.6
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.4
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	rpointel_20110424:1.1.1.1
	rpointel:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.06.07.14.46.46;	author rpointel;	state dead;
branches;
next	1.3;
commitid	O3j1RylY5wf2zl8Q;

1.3
date	2014.02.09.09.49.26;	author rpointel;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2013.04.13.22.31.42;	author fgsch;	state dead;
branches;
next	1.1;

1.1
date	2011.04.24.09.31.44;	author rpointel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.04.24.09.31.44;	author rpointel;	state Exp;
branches;
next	;

1.3.2.1
date	2014.02.09.17.55.27;	author rpointel;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update Python 2.7 to 2.7.7.
ok benoit@@, tested by tobiasu@@ on sparc and Daniel Dickman (thanks).
@
text
@$OpenBSD: patch-Modules_socketmodule_c,v 1.3 2014/02/09 09:49:26 rpointel Exp $
security fix: http://bugs.python.org/issue20246

--- Modules/socketmodule.c.orig
+++ Modules/socketmodule.c
@@@@ -2742,6 +2742,10 @@@@ sock_recvfrom_into(PySocketSockObject *s
     if (recvlen == 0) {
         /* If nbytes was not specified, use the buffer's length */
         recvlen = buflen;
+    } else if (recvlen > buflen) {
+        PyErr_SetString(PyExc_ValueError,
+                        "nbytes is greater than the length of the buffer");
+        goto error;
     }
 
     readlen = sock_recvfrom_guts(s, buf.buf, recvlen, flags, &addr);
@


1.3
log
@Security fix for Python 2.7 and 3.3.
More information: http://bugs.python.org/issue20246
http://seclists.org/oss-sec/2014/q1/284

go aja@@ espie@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3.2.1
log
@Security fix: buffer overflow in socket.recvfrom_into
More information: http://bugs.python.org/issue20246

ok jasper@@ (thanks).
@
text
@@


1.2
log
@Update python 2.7 to 2.7.4.

This is a slighly different version that I sent that includes an updated
kqueue diff that works with python 2 and 3 and puts test_bsddb and
test_bsddb3 back on the skip list as they're not built outside amd64
and i386.

Only 2 tests are known to fail: test_kqueue (broken) and test_threading
(failing on 2.7.3, under investigation but likely broken). If something
else fails please send your test.log.

Tested on a bulk by landry, sparc64 by brad, ppc gonzalo and amd64 by me.
@
text
@d1 14
a14 6
$OpenBSD: patch-Modules_socketmodule_c,v 1.1 2011/04/24 09:31:44 rpointel Exp $
--- Modules/socketmodule.c.orig	Thu Feb  4 20:26:34 2010
+++ Modules/socketmodule.c	Thu Jun 17 13:04:44 2010
@@@@ -93,9 +93,6 @@@@ Local naming conventions:
 #include "Python.h"
 #include "structmember.h"
d16 1
a16 6
-#undef MAX
-#define MAX(x, y) ((x) < (y) ? (y) : (x))
-
 /* Socket object documentation */
 PyDoc_STRVAR(sock_doc,
 "socket([family[, type[, proto]]]) -> socket object\n\
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import Python 2.7.1.
Thanks a lot to landry@@, fgsch@@ for feedback.
Need tests before doing this version the default.

@
text
@@
