head	1.3;
access;
symbols
	OPENBSD_5_0:1.1.0.8
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.6
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2011.09.07.05.18.05;	author landry;	state dead;
branches;
next	1.2;

1.2
date	2011.09.06.20.58.08;	author rpointel;	state Exp;
branches;
next	1.1;

1.1
date	2010.02.25.11.02.39;	author phessler;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove empty patches.
@
text
@@


1.2
log
@Use system libffi on Python 2.5 and 2.7 (except on arm).
ok jasper@@ landry@@ sthen@@.
@
text
@@


1.1
log
@Allow Python to build on loongson.  Bring in some libffi fixes, inspired
by jasper@@'s fixes to the libffi port.

Mark mips64 (aka, sgi) as BROKEN, as the build fails.  We'll look closer
at this after unlock.

OK jasper@@

ports is unlocked for a while only for those who have been informed.
@
text
@a0 20
$OpenBSD$

Allow building this on OpenBSD, where we don't provide the ICACHE related
defines in cachectl.h, but in sysarch.h

--- Modules/_ctypes/libffi/src/mips/ffi.c.orig	Sat Feb 20 16:32:04 2010
+++ Modules/_ctypes/libffi/src/mips/ffi.c	Sat Feb 20 16:33:13 2010
@@@@ -27,7 +27,11 @@@@
 #include <ffi_common.h>
 
 #include <stdlib.h>
-#include <sys/cachectl.h>
+#if defined(__OpenBSD__)
+#  include <mips64/sysarch.h>
+#else
+#  include <sys/cachectl.h>
+#endif
 
 #if _MIPS_SIM == _ABIN32
 #define FIX_ARGP \
@

