head	1.79;
access;
symbols
	OPENBSD_6_1:1.75.0.2
	OPENBSD_6_1_BASE:1.75
	OPENBSD_6_0:1.74.0.2
	OPENBSD_6_0_BASE:1.74
	OPENBSD_5_9:1.69.0.2
	OPENBSD_5_9_BASE:1.69
	OPENBSD_5_8:1.68.0.4
	OPENBSD_5_8_BASE:1.68
	OPENBSD_5_7:1.67.0.2
	OPENBSD_5_7_BASE:1.67
	OPENBSD_5_6:1.63.0.4
	OPENBSD_5_6_BASE:1.63
	OPENBSD_5_5:1.63.0.2
	OPENBSD_5_5_BASE:1.63
	OPENBSD_5_4:1.61.0.2
	OPENBSD_5_4_BASE:1.61
	OPENBSD_5_3:1.60.0.2
	OPENBSD_5_3_BASE:1.60
	OPENBSD_5_2:1.55.0.2
	OPENBSD_5_2_BASE:1.55
	OPENBSD_5_1_BASE:1.54
	OPENBSD_5_1:1.54.0.2
	OPENBSD_5_0:1.49.0.4
	OPENBSD_5_0_BASE:1.49
	OPENBSD_4_9:1.49.0.2
	OPENBSD_4_9_BASE:1.49
	OPENBSD_4_8:1.43.0.2
	OPENBSD_4_8_BASE:1.43
	OPENBSD_4_7:1.42.0.2
	OPENBSD_4_7_BASE:1.42
	OPENBSD_4_6:1.41.0.2
	OPENBSD_4_6_BASE:1.41
	OPENBSD_4_5:1.39.0.6
	OPENBSD_4_5_BASE:1.39
	OPENBSD_4_4:1.39.0.4
	OPENBSD_4_4_BASE:1.39
	OPENBSD_4_3:1.39.0.2
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.38.0.4
	OPENBSD_4_2_BASE:1.38
	OPENBSD_4_1:1.38.0.2
	OPENBSD_4_1_BASE:1.38
	OPENBSD_4_0:1.35.0.2
	OPENBSD_4_0_BASE:1.35
	OPENBSD_3_9:1.34.0.2
	OPENBSD_3_9_BASE:1.34
	OPENBSD_3_8:1.33.0.2
	OPENBSD_3_8_BASE:1.33
	OPENBSD_3_7:1.31.0.2
	OPENBSD_3_7_BASE:1.31
	OPENBSD_3_6:1.28.0.2
	OPENBSD_3_6_BASE:1.28
	OPENBSD_3_5:1.27.0.2
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.24.0.4
	OPENBSD_3_4_BASE:1.24
	OPENBSD_3_3:1.24.0.2
	OPENBSD_3_3_BASE:1.24
	OPENBSD_3_2:1.23.0.2
	OPENBSD_3_2_BASE:1.23
	OPENBSD_3_1:1.18.0.2
	OPENBSD_3_1_BASE:1.18
	OPENBSD_3_0:1.17.0.2
	OPENBSD_3_0_BASE:1.17
	OPENBSD_2_9_TRACKING_SWITCH:1.15
	OPENBSD_2_9:1.13.0.4
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	ocaml:1.1.1.1
	ocaml-1_07:1.1.1;
locks; strict;
comment	@# @;


1.79
date	2017.09.15.09.23.12;	author ajacoutot;	state Exp;
branches;
next	1.78;
commitid	QrtvQ4PKSnU9aff3;

1.78
date	2017.09.12.17.36.19;	author jasper;	state Exp;
branches;
next	1.77;
commitid	r79BENUp4cYZ8OzI;

1.77
date	2017.09.01.17.04.22;	author jasper;	state Exp;
branches;
next	1.76;
commitid	y2Sv0goNz5xPD8ba;

1.76
date	2017.05.25.22.57.42;	author sthen;	state Exp;
branches;
next	1.75;
commitid	XXVIG2sv5uH1Mb9t;

1.75
date	2017.02.27.20.51.03;	author jca;	state Exp;
branches;
next	1.74;
commitid	cT2nav6GsNwbGJE9;

1.74
date	2016.06.24.15.59.12;	author krw;	state Exp;
branches;
next	1.73;
commitid	uNq7PAnG26SO2XnT;

1.73
date	2016.06.23.19.23.54;	author krw;	state Exp;
branches;
next	1.72;
commitid	vwUgBiCmN1lWQqPh;

1.72
date	2016.04.11.11.21.31;	author jca;	state Exp;
branches;
next	1.71;
commitid	gCBni8hD19E86STo;

1.71
date	2016.03.29.11.27.00;	author naddy;	state Exp;
branches;
next	1.70;
commitid	YG8j0S3Qu1QSiwCV;

1.70
date	2016.02.29.23.42.51;	author mmcc;	state Exp;
branches;
next	1.69;
commitid	1VdYVNCLvOPWViMe;

1.69
date	2015.08.30.15.38.32;	author avsm;	state Exp;
branches;
next	1.68;
commitid	GaqbXXdEAzsE97pP;

1.68
date	2015.07.16.15.05.55;	author sthen;	state Exp;
branches;
next	1.67;
commitid	EcMnqqexthgCTE7m;

1.67
date	2014.10.25.11.55.54;	author chrisz;	state Exp;
branches;
next	1.66;
commitid	iFA3dUi7gSvf6rCS;

1.66
date	2014.09.04.15.56.26;	author chrisz;	state Exp;
branches;
next	1.65;
commitid	y0Fz2Vf9QTjn52tT;

1.65
date	2014.09.02.09.24.44;	author chrisz;	state Exp;
branches;
next	1.64;
commitid	KxJKmDEHHsyD4e4B;

1.64
date	2014.08.21.20.54.04;	author chrisz;	state Exp;
branches;
next	1.63;
commitid	awCwxDnH1Bd4hpii;

1.63
date	2013.11.25.14.40.15;	author dcoppa;	state Exp;
branches;
next	1.62;

1.62
date	2013.11.25.14.16.23;	author sthen;	state Exp;
branches;
next	1.61;

1.61
date	2013.03.11.11.20.28;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2012.11.30.19.38.09;	author chrisz;	state Exp;
branches;
next	1.59;

1.59
date	2012.11.01.07.57.26;	author avsm;	state Exp;
branches;
next	1.58;

1.58
date	2012.10.12.14.53.39;	author sthen;	state Exp;
branches;
next	1.57;

1.57
date	2012.10.04.07.45.26;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2012.08.18.21.49.16;	author avsm;	state Exp;
branches;
next	1.55;

1.55
date	2012.07.04.12.49.20;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2011.12.21.21.31.50;	author avsm;	state Exp;
branches;
next	1.53;

1.53
date	2011.10.31.09.59.05;	author dcoppa;	state Exp;
branches;
next	1.52;

1.52
date	2011.09.27.21.39.35;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2011.09.27.19.01.25;	author landry;	state Exp;
branches;
next	1.50;

1.50
date	2011.09.16.09.38.31;	author dcoppa;	state Exp;
branches;
next	1.49;

1.49
date	2010.12.17.18.42.04;	author dcoppa;	state Exp;
branches;
next	1.48;

1.48
date	2010.12.07.15.01.35;	author dcoppa;	state Exp;
branches;
next	1.47;

1.47
date	2010.11.06.22.06.59;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2010.11.04.13.45.10;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2010.10.24.21.24.04;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2010.06.04.13.58.18;	author avsm;	state Exp;
branches;
next	1.42;

1.42
date	2009.08.10.17.31.07;	author kili;	state Exp;
branches;
next	1.41;

1.41
date	2009.06.20.22.05.11;	author avsm;	state Exp;
branches;
next	1.40;

1.40
date	2009.03.11.21.19.49;	author avsm;	state Exp;
branches;
next	1.39;

1.39
date	2007.09.16.00.27.06;	author merdely;	state Exp;
branches;
next	1.38;

1.38
date	2007.02.08.14.32.57;	author avsm;	state Exp;
branches;
next	1.37;

1.37
date	2006.12.26.22.07.18;	author avsm;	state Exp;
branches;
next	1.36;

1.36
date	2006.11.13.11.20.25;	author steven;	state Exp;
branches;
next	1.35;

1.35
date	2006.05.28.15.28.53;	author avsm;	state Exp;
branches;
next	1.34;

1.34
date	2005.09.23.14.23.42;	author avsm;	state Exp;
branches;
next	1.33;

1.33
date	2005.06.13.23.22.43;	author avsm;	state Exp;
branches;
next	1.32;

1.32
date	2005.05.09.13.50.41;	author avsm;	state Exp;
branches;
next	1.31;

1.31
date	2005.01.25.15.56.38;	author alek;	state Exp;
branches;
next	1.30;

1.30
date	2004.11.14.12.47.50;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2004.09.15.19.10.00;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2004.06.22.18.14.44;	author avsm;	state Exp;
branches;
next	1.27;

1.27
date	2004.03.05.21.54.35;	author avsm;	state Exp;
branches;
next	1.26;

1.26
date	2003.12.31.17.05.28;	author sturm;	state Exp;
branches;
next	1.25;

1.25
date	2003.12.27.23.29.31;	author jose;	state Exp;
branches;
next	1.24;

1.24
date	2002.11.22.16.43.44;	author sturm;	state Exp;
branches;
next	1.23;

1.23
date	2002.09.16.18.54.37;	author lebel;	state Exp;
branches;
next	1.22;

1.22
date	2002.09.14.03.21.29;	author pvalchev;	state Exp;
branches;
next	1.21;

1.21
date	2002.09.12.17.01.16;	author pvalchev;	state Exp;
branches;
next	1.20;

1.20
date	2002.09.10.18.09.25;	author lebel;	state Exp;
branches;
next	1.19;

1.19
date	2002.08.25.20.44.40;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2002.03.21.21.09.17;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2001.09.11.22.21.51;	author heko;	state Exp;
branches;
next	1.16;

1.16
date	2001.08.22.00.32.00;	author angelos;	state Exp;
branches;
next	1.15;

1.15
date	2001.07.27.05.06.43;	author pvalchev;	state Exp;
branches;
next	1.14;

1.14
date	2001.05.06.01.28.01;	author lebel;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.22.15.42.29;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.10.22.14.03.22;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.05.22.15.41.35;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.05.20.06.22.06;	author angelos;	state Exp;
branches;
next	1.9;

1.9
date	2000.03.07.17.47.09;	author espie;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2000.03.07.17.16.30;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.10.10.03.19;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	99.12.04.03.35.53;	author angelos;	state Exp;
branches;
next	1.5;

1.5
date	99.11.22.22.08.32;	author angelos;	state Exp;
branches;
next	1.4;

1.4
date	99.11.22.02.44.44;	author angelos;	state Exp;
branches;
next	1.3;

1.3
date	99.07.09.02.51.11;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.02.13.04.20.08;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	98.02.13.02.09.02;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.02.13.02.09.02;	author angelos;	state Exp;
branches;
next	;

1.9.2.1
date	2000.09.15.04.55.36;	author marc;	state Exp;
branches;
next	;


desc
@@


1.79
log
@PLIST change = bump
@
text
@# $OpenBSD: Makefile,v 1.78 2017/09/12 17:36:19 jasper Exp $

MULTI_PACKAGES = -graphics -main

COMMENT-main =	   ML language with complete class-based objective system
COMMENT-graphics = OCaml Graphics library providing basic drawing primitives

# XXX Don't even think of updating ocaml alone.
# Do check that the ports that depend on it still work, or repair them.
# Don't forget to bump version in ocaml.port.mk, too!
VERSION=		4.03.0
REVISION=		2

PKGNAME-main =		ocaml-${VERSION}
PKGNAME-graphics =	ocaml-graphics-${VERSION}

# OCaml has no binary compatibility between releases.
PKGSPEC-main =	ocaml-=${VERSION}

CATEGORIES=	lang
# Remove last version component ocaml-X.XX.X -> ocaml-X.XX
BASENAME =	${DISTNAME:C/\.[^.]*$//}
MASTER_SITES=	http://caml.inria.fr/pub/distrib/${BASENAME}/
DOCFILES=	${BASENAME}-refman-html.tar.gz
DISTFILES=	${DISTNAME}.tar.gz ${DOCFILES}
DISTNAME =	ocaml-${VERSION}

HOMEPAGE=	https://ocaml.org/
MAINTAINER=	Anil Madhavapeddy <avsm@@openbsd.org>

# QPL/LGPL
PERMIT_PACKAGE_CDROM=	Yes

CONFIGURE_STYLE=	simple dest
CONFIGURE_ARGS+=	-prefix ${PREFIX} \
			-aspp '${CC} ${CFLAGS} -c' \
			-cc '${CC} ${CFLAGS}' \
			-x11include ${X11BASE}/include \
			-x11lib ${X11BASE}/lib
CONFIGURE_ENV+=		OPENBSD_LOCALBASE="${LOCALBASE}"

USE_GMAKE=	Yes

RUN_DEPENDS-graphics +=	lang/ocaml
WANTLIB-main =		c curses m pthread
WANTLIB-graphics =	X11

.if ${MACHINE_ARCH} != aarch64
# for libbfd; devel/gdb doesn't build on aarch64 yet.
BUILD_DEPENDS +=	devel/gdb
WANTLIB-main +=		iberty z
.endif

.include <bsd.port.arch.mk>

.if ${PROPERTIES:Mocaml_native}
ALL_TARGET=	world bootstrap opt opt.opt
PKG_ARGS +=	-Dnative=1
TEST_DEPENDS +=	${BUILD_PKGPATH}

.if ${PROPERTIES:Mocaml_native_dynlink}
PKG_ARGS +=	-Ddynlink=1
.else
PKG_ARGS +=	-Ddynlink=0
.endif

.else
ALL_TARGET=	world bootstrap
PKG_ARGS +=	-Dnative=0
NO_TEST   =	yes
.endif


post-install:
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ocaml/html/libref
	@@${INSTALL_DATA} ${WRKDIR}/htmlman/*.{html,gif,css} \
		${PREFIX}/share/doc/ocaml/html
	@@${INSTALL_DATA} ${WRKDIR}/htmlman/libref/* \
		${PREFIX}/share/doc/ocaml/html/libref
	@@${INSTALL_DATA} \
		${WRKSRC}/{LICENSE,Changes} \
		${PREFIX}/share/doc/ocaml

# PFRAG.native was generated from PLIST with:
# egrep '(ocamlopt|\.cmx|\.cmxa|\.cmxs|\.opt|opt\.1|opt.cmi|\.native|\.o)$'

# One test in the suite (testsocket.ml) requires an active
# connection to internet
TEST_IS_INTERACTIVE =		Yes

do-test:
	@@cd ${WRKSRC}/testsuite && ulimit -Sn 256 && ${MAKE_PROGRAM} all

.include <bsd.port.mk>
@


1.78
log
@try to bring balance to the force by moving all native/bytecode files to the
correct PFRAG file.

ok krw@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2017/09/01 17:04:22 jasper Exp $
d12 1
a12 1
REVISION=		1
@


1.77
log
@trailing whitespace
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2017/05/25 22:57:42 sthen Exp $
d11 2
a12 2
VERSION=4.03.0
REVISION=		0
d35 6
a40 5
CONFIGURE_ARGS+=-prefix ${PREFIX}
CONFIGURE_ARGS+=-aspp '${CC} ${CFLAGS} -c'
CONFIGURE_ARGS+=-cc '${CC} ${CFLAGS}'
CONFIGURE_ARGS+=-x11include ${X11BASE}/include -x11lib ${X11BASE}/lib
CONFIGURE_ENV+=OPENBSD_LOCALBASE="${LOCALBASE}"
d87 1
a87 1
# XXX one test in the suite (testsocket.ml) requires an active
d89 2
@


1.76
log
@let ocaml's build dep on devel/gdb (for libbfd.a) be conditional, don't
use it on aarch64 where gdb hasn't been ported yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2017/02/27 20:51:03 jca Exp $
d9 1
a9 1
# Do check that the ports that depend on it still work, or repair them. 
@


1.75
log
@Don't hardcode gcc -c
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2016/06/24 15:59:12 krw Exp $
a42 1
BUILD_DEPENDS +=	devel/gdb
d44 1
a44 1
WANTLIB-main =		c curses iberty m pthread z
d46 6
@


1.74
log
@Upgrade Ocaml to 4.3.0 and tweak ports the minimal amount to keep
them all compiling.

Tweaks include updating

ocaml-batteries 2.3.1 -> 2.5.0
ocaml-lwt 2.4.8 -> 2.5.2
ocaml-ppx-tools 0.99.2 -> 4.03.0
ocaml-camlp4 4.02+6 -> 4.03+1
utop 1.15 -> 1.19.2

and fixes to coccinelle and wyrd to let them build on bytecode archs.

Other necessary tweaks from the various homes of the projects.

Everything still builds on amd64 (native and bytecode) and sparc64 (bytecode).

ok anil@@ sthen@@ so final 4.3.0 tweaks can be done in-tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2016/06/23 19:23:54 krw Exp $
d36 1
@


1.73
log
@Stop building Ocaml's internal ocamlbuild and use the ocaml-ocamlbuild port
where needed.

The next step towards Ocaml 4.3.0.

Bulk build by sthen@@ identified several laggards which are included here.

ok anil@@ sthen@@ so final 4.3.0 polishing can be done in-tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2016/04/11 11:21:31 jca Exp $
d11 2
a12 2
VERSION=4.02.3
REVISION=		2
d35 1
a35 1
CONFIGURE_ARGS+=-prefix ${PREFIX} -no-ocamlbuild
@


1.72
log
@Miod says ocaml works on hppa.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2016/03/29 11:27:00 naddy Exp $
d12 1
a12 1
REVISION=		1
d35 1
a35 1
CONFIGURE_ARGS+=-prefix ${PREFIX} 
a72 3
	${INSTALL_DATA} \
		${WRKSRC}/ocamlbuild/man/ocamlbuild.1 \
		${PREFIX}/man/man1/
@


1.71
log
@g/c PFRAG.shared from OCaml ports; ok chrisz@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.70 2016/02/29 23:42:51 mmcc Exp $

NOT_FOR_ARCHS=	hppa
@


1.70
log
@tweak HOMEPAGE to avoid cert error, crank REVISION

ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2015/08/30 15:38:32 avsm Exp $
d14 1
a14 1
REVISION=		0
@


1.69
log
@update to ocaml-4.02.3

ok jca@@, tested by krw@@ daniel@@ jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2015/07/16 15:05:55 sthen Exp $
d14 1
d30 1
a30 1
HOMEPAGE=	https://www.ocaml.org/
@


1.68
log
@ocaml-4.02-refman-html.tar.gz was re-rolled upstream (regenerated with new
hevea; header changes but no content changes) - adjust distinfo, and while
there also package a .css file that was missing. OK chrisz@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2014/10/25 11:55:54 chrisz Exp $
d13 1
a13 2
VERSION=4.02.1
REVISION-main =	0
d29 1
a29 1
HOMEPAGE=	http://www.ocaml.org/
@


1.67
log
@update to OCaml 4.02.1.
Tested upgrade from 4.02.0 without revision bumping other packages.

ok avsm@@. espie@@ had a look -> no revision bumps needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2014/09/04 15:56:26 chrisz Exp $
d14 1
d71 1
a71 1
	@@${INSTALL_DATA} ${WRKDIR}/htmlman/*.{html,gif} \
@


1.66
log
@bump due to reordering of plist. Noticed by naddy@@ Thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/09/02 09:24:44 chrisz Exp $
d13 1
a13 2
VERSION=4.02.0
REVISION=0
d74 3
@


1.65
log
@Upgrade OCaml to 4.02. Since camlp4 is now a seperate port,
add / change BUILD_DEPENDS for all ports using camlp4.
Findlib is changed because it won't use camlp4 and doesn't install
the Bytes module anymore, which is now included in OCaml 4.02.

ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/08/21 20:54:04 chrisz Exp $
d14 1
@


1.64
log
@Split off camlp4, labltk and graphics from our current OCaml 4.01.
This will help when upgrading to upcoming OCaml 4.02, which will miss camlp4
and labltk.
For a smooth transision, make all OCaml ports BUILD_DEPEND on camlp4 via
MODULES=ocaml.

sysutils/findlib is the only port using -labltk.
graphics/ocaml-camlimage is the only port using -graphics.


ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2013/11/25 14:40:15 dcoppa Exp $
d5 1
a5 1
MULTI_PACKAGES = -camlp4 -graphics -labltk -main
a8 2
COMMENT-camlp4 =   OCaml Preprocessor and Pretty-Printer
COMMENT-labltk =   OCaml TK bindings
d13 1
a13 2
VERSION=4.01.0
REVISION = 0
a16 2
PKGNAME-camlp4 =	ocaml-camlp4-${VERSION}
PKGNAME-labltk =	ocaml-labltk-${VERSION}
d35 1
a35 5
MODULES+= lang/tcl x11/tk

CONFIGURE_STYLE=	simple
CONFIGURE_ARGS+=-tkdefs '-I${MODTCL_INCDIR} -I${MODTK_INCDIR}'
CONFIGURE_ARGS+=-tklibs -L${LOCALBASE}/lib
a40 3
# ocaml's configure script is too smart for its own good
FAKE_FLAGS=	PREFIX=${WRKINST}${PREFIX}

d43 1
a43 3
BUILD_DEPENDS +=	${MODTK_BUILD_DEPENDS} \
			devel/gdb
RUN_DEPENDS-camlp4 +=	lang/ocaml
d45 1
a45 4
RUN_DEPENDS-labltk +=	lang/ocaml ${MODTK_RUN_DEPENDS}
LIB_DEPENDS-labltk +=	${MODTK_LIB_DEPENDS}
WANTLIB-main =		c curses m pthread
WANTLIB-camlp4 =	c m
a46 1
WANTLIB-labltk =	X11 ${MODTK_WANTLIB}
d53 2
d60 1
d64 1
a66 5
# XXX regress tests only work on archs with native-code compiler
TEST_DEPENDS+=	${BUILD_PKGPATH}

post-extract:
	@@cp ${WRKSRC}/asmrun/power-elf.S ${WRKSRC}/asmrun/power-bsd.S
a68 5
.if ${PROPERTIES:Mocaml_native}
	@@ln -sf ${LOCALBASE}/bin/ocamlbuild.native ${PREFIX}/bin/ocamlbuild
.else
	@@ln -sf ${LOCALBASE}/bin/ocamlbuild.byte ${PREFIX}/bin/ocamlbuild
.endif
a73 1
	@@strip ${PREFIX}/bin/ocamlrun ${PREFIX}/bin/ocamlyacc
@


1.63
log
@Update to ocaml-4.01.0

Tested in a bulk build by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2013/11/25 14:16:23 sthen Exp $
d5 6
a10 1
COMMENT =	ML language based on complete class-based objective system
d16 1
d18 4
a21 1
DISTNAME =	ocaml-${VERSION}
a22 1
PKGNAME =	ocaml-${VERSION}
d24 1
a24 1
PKGSPEC =	ocaml-=${VERSION}
d32 1
d57 8
a64 3
RUN_DEPENDS +=		${MODTK_RUN_DEPENDS}
LIB_DEPENDS +=		${MODTK_LIB_DEPENDS}
WANTLIB =		X11 c curses iberty m pthread z ${MODTK_WANTLIB}
@


1.62
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2013/03/11 11:20:28 espie Exp $
d10 1
a10 1
VERSION=4.00.1
@


1.61
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2012/11/30 19:38:09 chrisz Exp $
a32 1
VMEM_WARNING=	Yes
@


1.60
log
@update lang/ocaml to 4.00.1.
Let all ocaml ports RUN_DEPEND on the version of ocaml they were built with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/11/01 07:57:26 avsm Exp $
a29 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d69 1
a69 1
REGRESS_DEPENDS+=	${BUILD_PKGPATH}
d95 1
a95 1
do-regress:
@


1.59
log
@unbreak ocaml on macppc by fixing the configure script
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.58 2012/10/12 14:53:39 sthen Exp $
d9 2
d12 1
a12 1
NOT_FOR_ARCHS=	hppa
d14 3
a16 1
COMMENT=	ML language based on complete class-based objective system
a17 3
BASENAME=	ocaml-4.00
DISTNAME=	${BASENAME}.0
REVISION=       3
d19 2
a32 1
WANTLIB=		X11 c curses iberty m pthread z
d50 5
a54 5
BUILD_DEPENDS +=${MODTK_BUILD_DEPENDS} \
		devel/gdb
RUN_DEPENDS +=	${MODTK_RUN_DEPENDS}
LIB_DEPENDS +=	${MODTK_LIB_DEPENDS}
WANTLIB +=	${MODTK_WANTLIB}
d60 1
a60 1
PKG_ARGS+=-Dnative=1
d62 1
a62 1
PKG_ARGS+=-Ddynlink=1
d64 1
a64 1
PKG_ARGS+=-Ddynlink=0
d68 1
a68 1
PKG_ARGS+=-Dnative=0
d89 3
a91 1
	@@${INSTALL_DATA} ${WRKSRC}/LICENSE ${PREFIX}/share/doc/ocaml
@


1.58
log
@bump various packages with static libs which frequently get pulled in;
this is to force pkg_add -u to pick them up because moving to PIE does change
these files but since there are no library bumps, the package signature stays
the same.

there are probably others, these are just ones I've run into. not a great
fix, and needs to be repeated when other arch move, but it's the simplest low
impact fix and I'm fed up with "relocation R_X86_64_32S can not be used
when making a shared object; recompile with -fPIC"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2012/10/04 07:45:26 ajacoutot Exp $
a7 2
BROKEN-powerpc=	'struct sigcontext' has no member named 'regs'

d12 1
a12 1
REVISION=       2
@


1.57
log
@This port never built on powerpc since it got updated, so mark it BROKEN.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2012/08/18 21:49:16 avsm Exp $
d14 1
a14 1
REVISION=       1
@


1.56
log
@update to ocaml-4.00.0

- uses new ocaml_native and ocaml_native_dynlink arch properties
- changelog: http://caml.inria.fr/pub/distrib/ocaml-4.00/notes/Changes

From Christopher Zimmermann <madroach@@gmerlin.de> with fixes from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2012/07/04 12:49:20 ajacoutot Exp $
d7 2
@


1.55
log
@Mark BROKEN on powerpc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/12/21 21:31:50 avsm Exp $
a7 2
BROKEN-powerpc=	build: Could not find the .cmi file for interface

d10 3
a12 3
BASENAME=	ocaml-3.12
DISTNAME=	${BASENAME}.1
REVISION=	1
d15 1
a15 1
DOCFILES=	${BASENAME}-refman.html.tar.gz
d50 3
a52 3
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "sparc" || \
	${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "amd64" || \
	${MACHINE_ARCH} == "powerpc"
d55 1
a55 1
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "amd64"
d72 5
a83 4
	@@mkdir -p ${PREFIX}/lib/ocaml/compiler-libs
	@@cp -R ${WRKBUILD}/typing ${PREFIX}/lib/ocaml/compiler-libs
	@@cp -R ${WRKBUILD}/utils ${PREFIX}/lib/ocaml/compiler-libs
	@@cp -R ${WRKBUILD}/parsing ${PREFIX}/lib/ocaml/compiler-libs
@


1.54
log
@Upgrade to ocaml-3.12.1

Also include the compiler standard libraries under compiler-libs/, as this
is the convention adopted by other packaging (Debian, FreeBSD), and is used
by various utility software such as the Lwt interactive toplevel and some
of the graphical IDEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2011/10/31 09:59:05 dcoppa Exp $
d7 2
@


1.53
log
@Re-apply revision 1.51: switch ocaml to use the static libbfd.a
from devel/gdb port now that gdb has been fixed.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2011/09/27 21:39:35 sthen Exp $
d11 2
a12 2
DISTNAME=	${BASENAME}.0
REVISION=	4
d79 4
@


1.52
log
@revert previous; devel/gdb broken on amd64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/09/16 09:38:31 dcoppa Exp $
d12 1
a12 1
REVISION=	3
d45 1
a45 1
		devel/libbfd
@


1.51
log
@Switch ocaml to use the static libbfd.a from devel/gdb port now that
it's hooked up to the build on all archs. Tested on i386/amd64/sparc64.
ok avsm@@ (maintainer) ckuethe@@ dcoppa@@ jasper@@
@
text
@d12 1
a12 1
REVISION=	2
d45 1
a45 1
		devel/gdb
@


1.50
log
@upstream rerolled ocaml-3.12-refman.html.tar.gz
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/12/17 18:42:04 dcoppa Exp $
d12 1
a12 1
REVISION=	1
d45 1
a45 1
		devel/libbfd
@


1.49
log
@Fix build on amd64.
Problem reported by landry@@ and kili@@.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/12/07 15:01:35 dcoppa Exp $
d12 1
a12 1
REVISION=	0
@


1.48
log
@Update to ocaml-3.12.0

Maintainer timeout.

OK landry@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/11/06 22:06:59 espie Exp $
d12 1
@


1.47
log
@tk/tcl wantlib conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/11/04 13:45:10 sthen Exp $
d10 2
a11 2
BASENAME=	ocaml-3.11
DISTNAME=	${BASENAME}.2
d25 1
a25 1
WANTLIB=		X11 c curses m pthread
d36 1
a41 1
USE_GROFF =	Yes
d43 2
a44 1
BUILD_DEPENDS +=${MODTK_BUILD_DEPENDS}
d54 5
d64 2
a65 1
NO_REGRESS=	Yes
d81 5
@


1.46
log
@Add a prominent comment asking people to check/handle dependent
ports if they update this. Suggested by espie on ports@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/10/24 21:24:04 ajacoutot Exp $
d43 4
a46 3
BUILD_DEPENDS+=	${MODTK_BUILD_DEPENDS}
RUN_DEPENDS+=	${MODTK_RUN_DEPENDS}
LIB_DEPENDS+=	${MODTK_LIB_DEPENDS}
@


1.45
log
@Remove USE_X11.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.44 2010/10/18 19:20:42 espie Exp $
@


1.44
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/06/04 13:58:18 avsm Exp $
a37 1
USE_X11=	Yes
@


1.43
log
@update to ocaml-3.11.2, mainly bugfixes. from dcoppa@@ with minor PLIST tweaks from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/08/10 17:31:07 kili Exp $
d39 1
@


1.42
log
@WANTLIB changes after xcb addition and bump.

For some unknown reason, I forgot to commit lang/*
this morning.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2009/06/20 22:05:11 avsm Exp $
d8 1
a8 2
DISTNAME=	${BASENAME}.1
PKGNAME=	${DISTNAME}p0
d22 1
a22 1
WANTLIB=		X11 c curses m pthread pthread-stubs xcb
@


1.41
log
@update to ocaml-3.11.1 and bump dependent package PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2009/03/11 21:19:49 avsm Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}
d23 1
a23 1
WANTLIB=		X11 c curses m pthread
@


1.40
log
@update ocaml to 3.11.0
tested by krw@@ and Richard Bonichon <richard.bonichon@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/09/16 00:27:06 merdely Exp $
d8 1
a8 1
DISTNAME=	${BASENAME}.0
@


1.39
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/02/08 14:32:57 avsm Exp $
d7 3
a9 3
BASENAME=	ocaml-3.09
DISTNAME=	${BASENAME}.3
PKGNAME=	${DISTNAME}p0
d11 1
a11 1
MASTER_SITES=	http://caml.inria.fr/distrib/${BASENAME}/
a15 1

d25 2
d29 2
a30 2
CONFIGURE_ARGS+=-tkdefs '-I${LOCALBASE}/include/tk8.4 -I${LOCALBASE}/include/tcl8.4' 
CONFIGURE_ARGS+=-tklibs -L${LOCALBASE}/lib 
a34 3
LIB_DEPENDS=	tcl84:tcl->=8.4,<8.5:lang/tcl/8.4 \
		tk84:tk->=8.4,<8.5:x11/tk/8.4

d41 4
d70 1
a70 1
# egrep '(ocamlopt|\.cmx|\.cmxa|\.o|\.opt|opt\.1|\.a|opt.cmi)$'
@


1.38
log
@- support shared libraries in OCaml, for dynamic top level to work.
- fix bad string handling in ocamlyacc, spotted by Ray Lai w/ malloc flags
- bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/12/26 22:07:18 avsm Exp $
d5 1
a5 1
COMMENT=	"ML language based on complete class-based objective system"
@


1.37
log
@Update to ocaml-3.09.3, mainly bugfixes (no language changes).

Also modify ocaml.port.mk to depend on the exact version of ocaml being
compiled against, since the OCaml library format makes no guarantees about
working across versions.  This dependency should ensure that packages compiled
against different ocaml versions aren't mixed and matched.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/11/13 11:20:25 steven Exp $
d9 1
@


1.36
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/05/28 15:28:53 avsm Exp $
d8 1
a8 1
DISTNAME=	${BASENAME}.2
@


1.35
log
@upgrade to ocaml-3.09.2, sturm@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/09/23 14:23:42 avsm Exp $
d40 1
@


1.34
log
@update to ocaml-3.08.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/06/13 23:22:43 avsm Exp $
d7 2
a8 2
BASENAME=	ocaml-3.08
DISTNAME=	${BASENAME}.4
@


1.33
log
@bump PKGNAME for the amd64 native code fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/05/09 13:50:41 avsm Exp $
d8 1
a8 2
DISTNAME=	${BASENAME}.3
PKGNAME=	${DISTNAME}p0
@


1.32
log
@upgrade to ocaml-3.08.3, tested on many architectures by krw@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/01/25 15:56:38 alek Exp $
d9 1
@


1.31
log
@Add WANTLIB marker
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.30 2004/11/14 12:47:50 espie Exp $
d7 2
a8 3

DISTNAME=	ocaml-3.07
PKGNAME=	${DISTNAME}p3
d10 3
a12 3
MASTER_SITES=	http://caml.inria.fr/distrib/${DISTNAME}/
DOCFILES=	${DISTNAME}-refman.html.tar.gz
DISTFILES=	${DISTNAME}pl2.tar.gz ${DOCFILES}
d16 1
a16 1
MAINTAINER=	Nikolay Sturm <sturm@@openbsd.org>
d25 1
a25 1

d64 3
@


1.30
log
@fix dependencies, bump pkgname.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/09/15 19:10:00 espie Exp $
d22 1
@


1.29
log
@new style fragment, much simpler thanks to recursion.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/06/22 18:14:44 avsm Exp $
d5 1
d7 1
a7 1
PKGNAME=	${DISTNAME}pl2
d10 2
a11 1
DISTFILES=	${PKGNAME}.tar.gz ${DOCFILES}
d31 2
a32 2
LIB_DEPENDS=	tcl84::lang/tcl/8.4 \
		tk84::x11/tk/8.4
a49 2

DOCFILES=	${DISTNAME}-refman.html.tar.gz
@


1.28
log
@support native code compilation (ocamlopt) on macppc as well, for nordin@@
to hack on
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/03/05 21:54:35 avsm Exp $
d41 1
a41 1
SED_PLIST=	|sed -e '/^%%native%%$$/r${PKGDIR}/PFRAG.native' -e '//d'
d44 1
a44 1
SED_PLIST=	|sed -e '/^%%native%%$$/d'
@


1.27
log
@support native code compilation on amd64, resulting in crazy fast ocaml
sturm@@, pvalchev@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/12/31 17:05:28 sturm Exp $
d38 2
a39 1
	${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "amd64"
d50 3
@


1.26
log
@update to ocaml 3.07
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/12/27 23:29:31 jose Exp $
d38 1
a38 1
	${MACHINE_ARCH} == "alpha"
@


1.25
log
@
update to tcl/tk 8.4
bring in patches from ocaml anoncvs to deal with API change
ok brad@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/11/22 16:43:44 sturm Exp $
d5 2
a6 1
DISTNAME=	ocaml-3.06
d9 1
a9 1
DISTFILES=	${DISTNAME}.tar.gz ${DOCFILES}
d15 1
d33 1
a34 1
FAKE_FLAGS=	PREFIX=${WRKINST}${PREFIX}
d52 4
a55 2
	@@${INSTALL_DATA} ${WRKDIR}/htmlman/*.{html,gif} ${PREFIX}/share/doc/ocaml/html
	@@${INSTALL_DATA} ${WRKDIR}/htmlman/libref/* ${PREFIX}/share/doc/ocaml/html/libref
@


1.24
log
@set MAINTAINER to sturm@@openbsd.org

naddy@@ OK
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/09/16 18:54:37 lebel Exp $
d21 1
a21 1
CONFIGURE_ARGS+=-tkdefs '-I${LOCALBASE}/include/tk8.3 -I${LOCALBASE}/include/tcl8.3' 
d27 2
a28 2
LIB_DEPENDS=	tcl83.1.3::lang/tcl/8.3 \
		tk83.1.3::x11/tk/8.3
@


1.23
log
@this now builds on macppc and sparc64,
thanks to Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/09/14 03:21:29 pvalchev Exp $
d12 1
a12 1
MAINTAINER=	Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
@


1.22
log
@New maintainer Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
angelos ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/09/12 17:01:16 pvalchev Exp $
a4 3
# for the time being
NOT_FOR_ARCHS=	sparc64 macppc

d34 3
d38 5
@


1.21
log
@not for macppc, for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/09/10 18:09:25 lebel Exp $
d15 1
a15 1
MAINTAINER=	Angelos D. Keromytis <angelos@@openbsd.org>
@


1.20
log
@NOT_FOR_ARCHS=sparc64; this needs to be investigated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2002/08/25 20:44:40 naddy Exp $
d6 1
a6 1
NOT_FOR_ARCHS=	sparc64
@


1.19
log
@Update to 3.06 which includes camlp4.
From Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2002/03/21 21:09:17 espie Exp $
d4 3
@


1.18
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/09/11 22:21:51 heko Exp $
d5 1
a5 1
DISTNAME=	ocaml-3.02
d7 1
a7 2
NEED_VERSION=	1.515
MASTER_SITES=	ftp://ftp.inria.fr/lang/caml-light/
d34 3
a36 1
ALL_TARGET=	world bootstrap opt
d41 3
a43 2
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ocaml/html
	@@${INSTALL_DATA} ${WRKDIR}/htmlman/* ${PREFIX}/share/doc/ocaml/html
@


1.17
log
@Handle LOCALBASE != /usr/local, X11BASE != /usr/X11R6, pass on
CC and CFLAGS
ok: maintainer angelos@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/07/27 05:06:43 pvalchev Exp $
d7 1
a7 1
NEED_VERSION=	1.440
@


1.16
log
@Update to ocaml 3.02 --- from bk@@rt.fm
@
text
@d22 6
a27 1
CONFIGURE_ARGS=--tkdefs '-I${LOCALBASE}/include/tk8.3 -I${LOCALBASE}/include/tcl8.3'
@


1.15
log
@PREFIX -> LOCALBASE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/05/06 01:28:01 lebel Exp $
d5 1
a5 1
DISTNAME=	ocaml-3.00
d7 1
a7 1
NEED_VERSION=	1.402
d10 2
@


1.14
log
@lang: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/10/22 15:42:29 espie Exp $
d20 1
a20 1
CONFIGURE_ARGS=--tkdefs '-I${PREFIX}/include/tk8.3 -I${PREFIX}/include/tcl8.3'
@


1.13
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.12 2000/10/22 14:03:22 espie Exp $
d7 1
a7 1
NEED_VERSION=	1.305
@


1.12
log
@Complete a few MAINTAINER names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/05/22 15:41:35 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.223
d17 1
a17 2
FAKE=		Yes
HAS_CONFIGURE=	Yes
@


1.11
log
@Add correct incantations to grab tcl/tk and build labltk.

TODO: whack configure script until we can flavor it no_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/05/20 06:22:06 angelos Exp $
d9 1
a9 1
MAINTAINER=	angelos@@openbsd.org
@


1.10
log
@Update to version 3.00
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/03/07 17:47:09 espie Exp $
d19 3
@


1.9
log
@Fix LICENSE name.
Fake, a bit more fun than usual, since Bob has this notion is the best
programmer in the world, and he's going to rewrite configure from scratch
as a better tool, which doesn't want to be coerced into
prefix=${DESTDIR}/usr/local.

Well, **ck him.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/03/07 17:16:30 espie Exp $
d3 1
a3 1
DISTNAME=	ocaml-2.04
@


1.9.2.1
log
@bring lang as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/05/22 15:41:35 espie Exp $
d3 1
a3 1
DISTNAME=	ocaml-3.00
a18 3
CONFIGURE_ARGS=--tkdefs '-I${PREFIX}/include/tk8.3 -I${PREFIX}/include/tcl8.3'
LIB_DEPENDS=	tcl83.1.3::lang/tcl/8.3 \
		tk83.1.3::x11/tk/8.3
@


1.8
log
@Make sure the LICENSE gets installed somewhere, so that we respect
the LICENSE terms.

That way, we can safely set PERMIT_* to Yes.

Bad, bad, angelos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/02/10 10:03:19 espie Exp $
d5 1
d17 1
d19 4
d32 1
a32 1
	@@${INSTALL_DATA} ${WKRSRC}/LICENSE ${PREFIX}/share/doc/ocaml
@


1.7
log
@Kill MKDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/12/04 03:35:53 angelos Exp $
d10 8
a17 2
HAS_CONFIGURE=	yes
USE_GMAKE=	yes
d26 1
@


1.6
log
@Version 2.04 (thanks espie)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/11/22 22:08:32 angelos Exp $
d17 1
a17 1
	@@${MKDIR} ${PREFIX}/share/doc/ocaml/html
@


1.5
log
@Change MAINTAINER to me temporarily (until we figure out who's the
real one).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/11/22 02:44:44 angelos Exp $
d3 1
a3 1
DISTNAME=	ocaml-2.03
d5 1
a5 2
MASTER_SITES=	ftp://ftp.kurims.kyoto-u.ac.jp/pub/lang/caml-light/ \
		ftp://ftp.inria.fr/lang/caml-light/
@


1.4
log
@ocaml v2.03
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/07/09 02:51:11 brad Exp $
d9 1
a9 1
MAINTAINER=	kiri@@kiri.toba-cmt.ac.jp
@


1.3
log
@upgrade to ocaml 2.02
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1999/02/13 04:20:08 angelos Exp $
d3 1
a3 1
DISTNAME=	ocaml-2.02
@


1.2
log
@Upgrade to version 2.01
@
text
@d1 1
a1 7
# OpenBSD makefile for:	Objective Caml
# Version required:	2.01
# Date created:		December 12, 1997
# Whom:			Angelos D. Keromytis
#
# $OpenBSD: Makefile,v 1.1.1.1 1998/02/13 02:09:02 angelos Exp $
#
d3 1
a3 1
DISTNAME=	ocaml-2.01
a13 2
MAN1=		ocaml.1 ocamlc.1 ocamlcp.1 ocamldep.1 ocamllex.1 \
		ocamlopt.1 ocamlprof.1 ocamlrun.1 ocamlyacc.1
a14 1
.if !defined(NOPORTDOCS)
a15 1
.endif
d18 2
a19 4
.if !defined(NOPORTDOCS)
	${MKDIR} ${PREFIX}/share/doc/ocaml/html
	cd ${WRKDIR}/htmlman; ${INSTALL_DATA} * ${PREFIX}/share/doc/ocaml/html
.endif
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# Version required:	1.07
d6 1
a6 1
# $OpenBSD$
d9 1
a9 1
DISTNAME=	ocaml-1.07
@


1.1.1.1
log
@O-Caml 1.07
@
text
@@
