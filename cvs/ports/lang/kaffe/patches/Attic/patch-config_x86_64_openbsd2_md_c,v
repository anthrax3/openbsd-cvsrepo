head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.22
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.20
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.18
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.16
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.14
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.12
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.10
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.8
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.6
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.10.07.13.54.31;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2006.05.12.03.01.04;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- remove devel/jdk/1.5 and lang/kaffe
- adjust java.port.mk for their removal
- bump affected packages
okay jasper@@
@
text
@$OpenBSD: patch-config_x86_64_openbsd2_md_c,v 1.1 2006/05/12 03:01:04 kurt Exp $
--- config/x86_64/openbsd2/md.c.orig	Thu May  4 16:30:44 2006
+++ config/x86_64/openbsd2/md.c	Thu May 11 22:38:30 2006
@@@@ -0,0 +1,48 @@@@
+/*
+ * amd64/openbsd2/md.c
+ * OpenBSD amd64 specific functions.
+ *
+ * Copyright (c) 2006
+ *      Kaffe.org contributors. See ChangeLog for details.
+ *
+ * See the file "license.terms" for information on usage and redistribution 
+ * of this file. 
+ */
+
+#include "config.h"
+
+#if defined(KAFFE_SYSTEM_UNIX_PTHREADS)
+
+#include <sys/signal.h>
+#include <pthread.h>
+#include <pthread_np.h>
+#include <stdio.h>
+#include <stdlib.h>
+
+void *mdGetStackEnd(void)
+{
+    stack_t stack;
+    if (pthread_stackseg_np(pthread_self(), &stack) != 0)
+      {
+        fprintf(stderr,
+                "Kaffe VM was unable to retrieve the pointer to the stack base\n"
+                "Aborting...\n");
+        exit(1);
+      }
+    return stack.ss_sp;
+}
+
+size_t mdGetStackSize(void)
+{
+    stack_t stack;
+    if (pthread_stackseg_np(pthread_self(), &stack) != 0)
+      {
+        fprintf(stderr,
+                "Kaffe VM has not been able to retrieve the stack size\n"
+                "Aborting...\n");
+        exit(1);
+      }
+    return stack.ss_size;
+}
+
+#endif
@


1.1
log
@- add amd64 support
- add build depend on pkgconfig->=0.19p0

in collaboration with and ok ian@@
@
text
@d1 1
a1 1
$OpenBSD$
@

