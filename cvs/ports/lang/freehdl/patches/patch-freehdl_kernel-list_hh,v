head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.06.03.14.25.16;	author espie;	state Exp;
branches;
next	;
commitid	ARNbjPbOIK4OxUpQ;


desc
@@


1.1
log
@let it build with clang. patches similar to pkgsrc and freebsd
@
text
@$OpenBSD$
improve the hash function.

Index: freehdl/kernel-list.hh
--- freehdl/kernel-list.hh.orig
+++ freehdl/kernel-list.hh
@@@@ -634,7 +634,7 @@@@ get_hash(const shared_array<T> &a) {
   unsigned int num = 0;
   const int UINT_BIT = sizeof(unsigned int) * CHAR_BIT;
   for (int i = 0; i < a.size(); i++)
-    num = ((num << 2) || ((UINT_BIT - 2) >> 30)) + get_hash(a.content(i));
+    num = ((num << 2) | ((UINT_BIT - 2) >> 30)) + get_hash(a.content(i));
   return num;
 }
 
@
