head	1.4;
access;
symbols
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2012.02.28.00.20.41;	author jeremy;	state dead;
branches;
next	1.3;

1.3
date	2011.11.08.23.38.57;	author jeremy;	state Exp;
branches;
next	1.2;

1.2
date	2011.07.19.17.08.54;	author jeremy;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.23.21.58.50;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update 1.9.3p125, removing some patches included upstream.
@
text
@$OpenBSD: patch-test_ruby_test_process_rb,v 1.3 2011/11/08 23:38:57 jeremy Exp $
--- test/ruby/test_process.rb.orig	Wed Jul 27 17:16:58 2011
+++ test/ruby/test_process.rb	Wed Jul 27 17:17:00 2011
@@@@ -61,7 +61,7 @@@@ class TestProcess < Test::Unit::TestCase
       write_file 's', <<-"End"
 	result = 1
 	begin
-	  Process.setrlimit(Process::RLIMIT_NOFILE, 0)
+	  Process.setrlimit(Process::RLIMIT_NOFILE, 1)
 	rescue Errno::EINVAL
 	  result = 0
 	end
@


1.3
log
@Update to ruby 1.9.3p0.  Adds significant speed improvements and quite
a few new features.  A few of our patches were accepted upstream.

Add an -ri_docs multipackage to hold the ri documentation files.  These
aren't used very often, slow down installation significantly, and bloat
the package.

This also fixes the conflict marker for the -tk multipackage.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Update to 1.9.2p290.

Make regress run all three regression test suites.  Before,
later regression test suites wouldn't be run if earlier ones
were not successful, which stopped the main test suite from
running on i386, macppc, and possibly other arches.

Override the arch setting to remove OpenBSD version from it,
so ports don't have to be bumped when OpenBSD version changes.

OK landry@@, jcs@@
@
text
@d1 12
a12 17
$OpenBSD: patch-test_ruby_test_process_rb,v 1.1 2010/09/23 21:58:50 jeremy Exp $

OpenBSD seems to receive the SIGCHILD twice.  I'm not sure
if that's just how OpenBSD works, or if this is a bug in
OpenBSD or ruby.

--- test/ruby/test_process.rb.orig	Sat May 28 16:31:53 2011
+++ test/ruby/test_process.rb	Mon Jul 18 15:24:00 2011
@@@@ -1193,7 +1193,7 @@@@ class TestProcess < Test::Unit::TestCase
       sleep 1
       break unless signal_received.empty?
     end
-    assert_equal [true], signal_received, " [ruby-core:19744]"
+    assert_equal true, signal_received.first, " [ruby-core:19744]"
   rescue NotImplementedError, ArgumentError
   ensure
     begin
@


1.1
log
@Split the lang/ruby port into separate ports for ruby 1.8 and ruby
1.9, similar to how the lang/python ports are handled.  ruby 1.8
now installs as ruby18 and ruby 1.9 installs as ruby19.  The
included MESSAGE files for both ports let you know the symlinks to
set up if you want to make that version the default system ruby.

Split port originally started by bernd@@, many changes since by me,
help and support from jcs@@, landry@@, jasper@@, and sthen@@.

This causes a large amount of fallout in dependent ruby ports,
which will be committed shortly.

OK jcs@@, landry@@, jasper@@, sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d7 3
a9 3
--- test/ruby/test_process.rb.orig	Wed Sep  8 15:18:49 2010
+++ test/ruby/test_process.rb	Wed Sep  8 14:59:18 2010
@@@@ -1189,7 +1189,7 @@@@ class TestProcess < Test::Unit::TestCase
@

