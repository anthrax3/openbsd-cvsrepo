head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.2
	OPENBSD_6_1_BASE:1.2
	jeremy_2017-Jan-06:1.1.1.1
	jeremy:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.03.24.14.39.05;	author jeremy;	state Exp;
branches;
next	1.1;
commitid	mMBMrbbCi7vDcOIv;

1.1
date	2017.01.06.15.59.25;	author jeremy;	state Exp;
branches
	1.1.1.1;
next	;
commitid	Bh2OSv7oca1mG9jm;

1.1.1.1
date	2017.01.06.15.59.25;	author jeremy;	state Exp;
branches;
next	;
commitid	Bh2OSv7oca1mG9jm;


desc
@@


1.2
log
@Update to ruby 2.4.1

Shared lib major bump due to removal of ruby_vm_sysstack_error_copy
function.  Regen patches.
@
text
@$OpenBSD: patch-configure,v 1.1.1.1 2017/01/06 15:59:25 jeremy Exp $

Fix so name, checking for DOT and DOXYGEN.

Override the arch setting to remove OpenBSD version from it,
so ports don't have to be bumped when OpenBSD version changes.

--- configure.orig	Tue Mar 21 22:56:10 2017
+++ configure	Wed Mar 22 08:33:15 2017
@@@@ -424,7 +424,7 @@@@ if test -z "$2"; then :
 
 else
 
-	$as_echo_n "   * $1:                     " | head -c26
+	$as_echo_n "   * $1:                     " | dd bs=26 count=1 status=none
 	if test "$FOLD"; then :
 
 	    echo "$2" | fold -s -w50 |
@@@@ -25601,7 +25601,7 @@@@ esac
   openbsd*|mirbsd*) :
 
 	SOLIBS='$(LIBS)'
-	LIBRUBY_SO='lib$(RUBY_SO_NAME).so.$(MAJOR).'`expr ${MINOR} \* 10 + ${TEENY}`
+	LIBRUBY_SO='lib$(RUBY_SO_NAME).so.'${LIBruby24_VERSION}
 	 ;; #(
   solaris*) :
 
@@@@ -26974,7 +26974,7 @@@@ _ACEOF
 _ACEOF
 
 else
-    arch="${target_cpu}-${target_os}"
+    arch="${target_cpu}-openbsd"
     case "$arch" in #(
   le32-nacl) :
     arch="pnacl" ;; #(
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.1.1.1 2016/01/07 00:52:46 jeremy Exp $
d8 2
a9 2
--- configure.orig	Fri Dec 23 08:06:46 2016
+++ configure	Sat Dec 24 22:25:54 2016
d19 1
a19 1
@@@@ -25553,7 +25553,7 @@@@ esac
d28 1
a28 1
@@@@ -26926,7 +26926,7 @@@@ _ACEOF
@


1.1.1.1
log
@Import ruby 2.4.0

OK jasper@@
@
text
@@
