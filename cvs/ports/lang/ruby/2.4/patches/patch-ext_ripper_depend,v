head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.02.21.17.04.45;	author jca;	state Exp;
branches;
next	;
commitid	Ae9c4tk1BbNGgSI6;


desc
@@


1.1
log
@Workaround for ram-constrained archs: build ext/ripper/ripper.c with -O1

Same as lang/ruby/2.3.  Preventively add arm, just in case it is near
the maximum limit.
Prodded by jeremy@@ (maintainer)
@
text
@$OpenBSD: patch-ext_ripper_depend,v 1.1 2017/02/21 16:45:36 jca Exp $
--- ext/ripper/depend.orig	Wed Jul  6 07:03:14 2016
+++ ext/ripper/depend	Tue Feb 21 17:54:06 2017
@@@@ -46,6 +46,8 @@@@ ripper.E: ripper.c
 	$(ECHO) preprocessing ripper.c
 	$(Q) $(CC) -E $(INCFLAGS) $(CPPFLAGS) $< | $(RUBY) $(srcdir)/tools/strip.rb > $@@
 
+CFLAGS += %%CFLAGS_OVERRIDE%%
+
 # AUTOGENERATED DEPENDENCIES START
 ripper.o: $(RUBY_EXTCONF_H)
 ripper.o: $(arch_hdrdir)/ruby/config.h
@
