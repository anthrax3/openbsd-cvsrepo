head	1.5;
access;
symbols
	OPENBSD_3_4:1.4.0.6
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.4
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2004.02.20.22.52.58;	author couderc;	state dead;
branches;
next	1.4;

1.4
date	2002.07.15.21.38.07;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2002.06.29.13.39.26;	author couderc;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.23.14.10.48;	author krw;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.23.14.12.32;	author espie;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to 1.8.1
@
text
@$OpenBSD: patch-configure_in,v 1.4 2002/07/15 21:38:07 brad Exp $
--- configure.in.orig	Wed Feb  6 04:13:15 2002
+++ configure.in	Mon Jul 15 14:37:05 2002
@@@@ -477,7 +477,7 @@@@ case "$target_os" in
   else
     LDFLAGS="-rdynamic"
   fi;;
-netbsd*)
+netbsd*|openbsd*)
     if [[ "`$CC -dM -E - </dev/null | grep __ELF__`" != "" ]]
     then
 	netbsd_elf=yes
@@@@ -566,7 +566,10 @@@@ if test "$with_dln_a_out" != yes; then
 			    LDFLAGS="-Wl,-export-dynamic"
 			fi
 			rb_cv_dlopen=yes ;;
-	openbsd*) 	LDSHARED="ld -Bforcearchive -Bshareable"
+	openbsd*) 	LDSHARED="\$(CC) -shared ${CCDLFLAGS}"
+			if test "$rb_cv_binary_elf" = yes; then
+			    LDFLAGS="-Wl,-E"
+			fi
 			rb_cv_dlopen=yes ;;
 	bsdi3*) 	case "$CC" in
 			*shlicc*)	LDSHARED="$CC -r"
@@@@ -842,7 +845,8 @@@@ if test "$enable_shared" = 'yes'; then
  	;;
     openbsd*)
 	SOLIBS='$(LIBS)'
- 	;;
+        LIBRUBY_SO='lib$(RUBY_INSTALL_NAME).so.$(MAJOR).'`expr ${MINOR} \* 10 + ${TEENY}`
+	;;
     solaris*)
 	XLDFLAGS='-R${prefix}/lib'
  	;;
@


1.4
log
@export all symbols in the symbol table when on an ELF system.
--
Ok'd by: MAINTAINER
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.3 2002/06/29 13:39:26 couderc Exp $
@


1.3
log
@Fix for ELF machines from drahn@@, ok krw@@
Taking maintainer, ok krw@@ & espie@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.2 2002/02/23 14:10:48 krw Exp $
--- configure.in.orig	Wed Feb  6 10:13:15 2002
+++ configure.in	Sat Jun 29 15:26:26 2002
d13 1
a13 1
@@@@ -566,7 +566,7 @@@@ if test "$with_dln_a_out" != yes; then
d18 4
a21 1
+	openbsd*) 	LDSHARED='$(CC) -shared -fPIC'
d25 1
a25 1
@@@@ -842,7 +842,8 @@@@ if test "$enable_shared" = 'yes'; then
@


1.2
log
@libruby.so.1.6.6 -> libruby.so.1.66. From Couderc Damien.
@
text
@d1 13
a13 4
$OpenBSD: patch-configure_in,v 1.1 2001/03/23 14:12:32 espie Exp $
--- configure.in.orig	Tue Dec  4 05:51:50 2001
+++ configure.in	Thu Feb 21 16:42:03 2002
@@@@ -556,7 +556,7 @@@@ if test "$with_dln_a_out" != yes; then
d22 1
a22 1
@@@@ -832,7 +832,8 @@@@ if test "$enable_shared" = 'yes'; then
@


1.1
log
@fix shared library name.
Remove COMMENT while I'm at it.
@
text
@d1 5
a5 5
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
--- configure.in.orig	Sun Nov 12 17:44:04 2000
+++ configure.in	Fri Mar 23 14:55:44 2001
@@@@ -513,7 +513,7 @@@@ if test "$with_dln_a_out" != yes; then
                           LDFLAGS="-export-dynamic"
d13 1
a13 3
@@@@ -780,6 +780,9 @@@@ if test "$enable_shared" = 'yes'; then
 	   LIBRUBY_ALIASES=  # a.out platforms
 	fi
d15 3
a17 1
+    openbsd*)
@

