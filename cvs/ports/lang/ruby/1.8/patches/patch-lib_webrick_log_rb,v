head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.4
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2017.09.16.22.54.58;	author jeremy;	state Exp;
branches
	1.1.2.1;
next	;
commitid	GEYS4QMl4MMO38U4;

1.1.2.1
date	2017.09.20.02.27.59;	author jeremy;	state Exp;
branches;
next	;
commitid	PVO7Q3HYYsckxjlD;


desc
@@


1.1
log
@Backport security fixes from ruby 2.2.8 to ruby 1.8.7.  Fixes
CVE-2017-0898 and CVE-2017-10784.  Regen patches while here.
@
text
@$OpenBSD$

Index: lib/webrick/log.rb
--- lib/webrick/log.rb.orig
+++ lib/webrick/log.rb
@@@@ -61,10 +61,10 @@@@ module WEBrick
 
     def format(arg)
       str = if arg.is_a?(Exception)
-        "#{arg.class}: #{arg.message}\n\t" <<
+        "#{arg.class}: #{AccessLog.escape(arg.message)}\n\t" <<
         arg.backtrace.join("\n\t") << "\n"
       elsif arg.respond_to?(:to_str)
-        arg.to_str
+        AccessLog.escape(arg.to_str)
       else
         arg.inspect
       end
@


1.1.2.1
log
@Backport security fixes for CVE-2017-10784 and CVE-2017-0898
to ruby 1.8.7.
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_webrick_log_rb,v 1.1 2017/09/16 22:54:58 jeremy Exp $
@

