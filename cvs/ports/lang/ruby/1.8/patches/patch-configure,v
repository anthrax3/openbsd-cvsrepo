head	1.4;
access;
symbols
	OPENBSD_6_0:1.4.0.6
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.16
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.14
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.12
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.10
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.8
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.6
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.4
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2015.04.15.21.58.16;	author jeremy;	state Exp;
branches;
next	1.3;
commitid	f7uSAf7SQUJZjAQo;

1.3
date	2011.07.19.17.06.39;	author jeremy;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.25.17.50.45;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.23.21.58.50;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Add patch to fix overly permissive matching of hostnames, CVE-2015-1855.
@
text
@$OpenBSD: patch-configure,v 1.3 2011/07/19 17:06:39 jeremy Exp $

Override the arch setting to remove OpenBSD version from it,
so ports don't have to be bumped when OpenBSD version changes.

--- configure.orig	Thu Jun 27 04:57:43 2013
+++ configure	Mon Apr 13 19:51:16 2015
@@@@ -10912,7 +10912,7 @@@@ if test "$enable_shared" = 'yes'; then
  	;;
     openbsd*)
 	SOLIBS='$(LIBS)'
-	LIBRUBY_SO='lib$(RUBY_INSTALL_NAME).so.$(MAJOR).'`expr ${MINOR} \* 10 + ${TEENY}`
+	LIBRUBY_SO='lib$(RUBY_INSTALL_NAME).so.'${LIBruby18_VERSION}
 	;;
     solaris*)
 	SOLIBS='$(LIBS)'
@@@@ -11215,7 +11215,10 @@@@ _ACEOF
 _ACEOF
 
 else
-    arch="${target_cpu}-${target_os}"
+    case "$target_os" in
+      openbsd*) arch="$target_cpu-openbsd" ;;
+      *) arch="${target_cpu}-${target_os}" ;;
+    esac
     cat >>confdefs.h <<_ACEOF
 #define RUBY_PLATFORM "${arch}"
 _ACEOF
@


1.3
log
@Override the arch setting to remove OpenBSD version from it,
so ports don't have to be bumped when OpenBSD version changes.

OK landry@@, jcs@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.2 2011/05/25 17:50:45 jasper Exp $
d6 3
a8 3
--- configure.orig	Sat Jul  2 02:54:02 2011
+++ configure	Mon Jul 18 15:21:06 2011
@@@@ -10706,7 +10706,7 @@@@ if test "$enable_shared" = 'yes'; then
d17 1
a17 1
@@@@ -11009,7 +11009,10 @@@@ _ACEOF
@


1.2
log
@regen patches
@
text
@d1 7
a7 3
$OpenBSD: patch-configure,v 1.1 2010/09/23 21:58:50 jeremy Exp $
--- configure.orig	Fri Feb 18 13:42:58 2011
+++ configure	Wed May 25 19:46:16 2011
d17 12
@


1.1
log
@Split the lang/ruby port into separate ports for ruby 1.8 and ruby
1.9, similar to how the lang/python ports are handled.  ruby 1.8
now installs as ruby18 and ruby 1.9 installs as ruby19.  The
included MESSAGE files for both ports let you know the symlinks to
set up if you want to make that version the default system ruby.

Split port originally started by bernd@@, many changes since by me,
help and support from jcs@@, landry@@, jasper@@, and sthen@@.

This causes a large amount of fallout in dependent ruby ports,
which will be committed shortly.

OK jcs@@, landry@@, jasper@@, sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2009/04/27 10:54:09 bernd Exp $
--- configure.orig	Wed Jun 23 17:35:59 2010
+++ configure	Fri Jun 25 15:14:57 2010
@@@@ -10690,7 +10690,7 @@@@ if test "$enable_shared" = 'yes'; then
@

