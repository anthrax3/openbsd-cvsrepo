head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2017.09.20.02.17.57;	author jeremy;	state dead;
branches
	1.1.2.1;
next	;
commitid	etACA5UcBG2pWvRr;

1.1.2.1
date	2017.09.20.02.17.57;	author jeremy;	state Exp;
branches;
next	;
commitid	etACA5UcBG2pWvRr;


desc
@@


1.1
log
@file patch-ext_psych_yaml_yaml_private_h was initially added on branch OPENBSD_6_1.
@
text
@@


1.1.2.1
log
@Backport security fixes for CVE-2017-14033, CVE-2017-10784,
CVE-2017-0898, and CVE-2017-14064 to ruby 2.3.3.
@
text
@a0 18
$OpenBSD$
--- ext/psych/yaml/yaml_private.h.orig	Thu Mar 27 17:19:15 2014
+++ ext/psych/yaml/yaml_private.h	Tue Sep 19 12:11:56 2017
@@@@ -436,8 +436,7 @@@@ yaml_queue_extend(void **start, void **head, void **ta
      (stack).start = (stack).top = (stack).end = 0)
 
 #define STACK_EMPTY(context,stack)                                              \
-    ((void)(context),                                                           \
-     ((stack).start == (stack).top))
+    ((stack).start == (stack).top)
 
 #define STACK_LIMIT(context,stack,size)                                         \
     ((stack).top - (stack).start < (size) ?                                     \
@@@@ -661,4 +660,3 @@@@ yaml_queue_extend(void **start, void **head, void **ta
      (node).data.mapping.pairs.end = (node_pairs_end),                          \
      (node).data.mapping.pairs.top = (node_pairs_start),                        \
      (node).data.mapping.style = (node_style))
-
@

