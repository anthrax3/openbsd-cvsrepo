head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2017.09.16.22.52.40;	author jeremy;	state Exp;
branches
	1.1.2.1;
next	;
commitid	arMsrzZEkxNVULP7;

1.1.2.1
date	2017.09.20.02.22.39;	author jeremy;	state Exp;
branches;
next	;
commitid	ly1tT361UcbzhJiN;


desc
@@


1.1
log
@Backport security fixes from ruby 2.2.8 to ruby 2.1.9.  Fixes
CVE-2017-14033, CVE-2017-14064, CVE-2017-0898, and CVE-2017-10784.
Regen patches while here.
@
text
@$OpenBSD$

Index: ext/psych/yaml/yaml_private.h
--- ext/psych/yaml/yaml_private.h.orig
+++ ext/psych/yaml/yaml_private.h
@@@@ -436,8 +436,7 @@@@ yaml_queue_extend(void **start, void **head, void **ta
      (stack).start = (stack).top = (stack).end = 0)
 
 #define STACK_EMPTY(context,stack)                                              \
-    ((void)(context),                                                           \
-     ((stack).start == (stack).top))
+    ((stack).start == (stack).top)
 
 #define STACK_LIMIT(context,stack,size)                                         \
     ((stack).top - (stack).start < (size) ?                                     \
@@@@ -661,4 +660,3 @@@@ yaml_queue_extend(void **start, void **head, void **ta
      (node).data.mapping.pairs.end = (node_pairs_end),                          \
      (node).data.mapping.pairs.top = (node_pairs_start),                        \
      (node).data.mapping.style = (node_style))
-
@


1.1.2.1
log
@Backport security fixes for CVE-2017-14033, CVE-2017-10784,
CVE-2017-0898, and CVE-2017-14064 to ruby 2.1.9.
@
text
@d1 1
a1 1
$OpenBSD: patch-ext_psych_yaml_yaml_private_h,v 1.1 2017/09/16 22:52:40 jeremy Exp $
@

