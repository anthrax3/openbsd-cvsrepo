head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.09.16.22.52.40;	author jeremy;	state Exp;
branches;
next	;
commitid	arMsrzZEkxNVULP7;


desc
@@


1.1
log
@Backport security fixes from ruby 2.2.8 to ruby 2.1.9.  Fixes
CVE-2017-14033, CVE-2017-14064, CVE-2017-0898, and CVE-2017-10784.
Regen patches while here.
@
text
@$OpenBSD$

Index: ext/psych/yaml/yaml_private.h
--- ext/psych/yaml/yaml_private.h.orig
+++ ext/psych/yaml/yaml_private.h
@@@@ -436,8 +436,7 @@@@ yaml_queue_extend(void **start, void **head, void **ta
      (stack).start = (stack).top = (stack).end = 0)
 
 #define STACK_EMPTY(context,stack)                                              \
-    ((void)(context),                                                           \
-     ((stack).start == (stack).top))
+    ((stack).start == (stack).top)
 
 #define STACK_LIMIT(context,stack,size)                                         \
     ((stack).top - (stack).start < (size) ?                                     \
@@@@ -661,4 +660,3 @@@@ yaml_queue_extend(void **start, void **head, void **ta
      (node).data.mapping.pairs.end = (node_pairs_end),                          \
      (node).data.mapping.pairs.top = (node_pairs_start),                        \
      (node).data.mapping.style = (node_style))
-
@
