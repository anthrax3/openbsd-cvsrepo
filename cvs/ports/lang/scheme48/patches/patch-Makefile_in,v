head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.18
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.16
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.12
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.14
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.10
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.8
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.6
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.4
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.2.0.16
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.14
	OPENBSD_5_0:1.2.0.12
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.10
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.8
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.6
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.10
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.8
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.6
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.4
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	alek_20060701:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2013.02.08.14.39.50;	author jturner;	state Exp;
branches;
next	1.3;

1.3
date	2013.02.06.20.37.34;	author jturner;	state Exp;
branches;
next	1.2;

1.2
date	2008.08.19.22.20.40;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2006.08.01.14.34.33;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.08.01.14.34.33;	author alek;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Only install docs once and definitely not in the wrong location. Bump.

ok bcallah@@ landry@@
@
text
@$OpenBSD: patch-Makefile_in,v 1.3 2013/02/06 20:37:34 jturner Exp $

Fix fake-stage.

--- Makefile.in.orig	Thu Dec 27 11:46:24 2012
+++ Makefile.in	Thu Feb  7 20:52:25 2013
@@@@ -71,8 +71,8 @@@@ VERSION = 1.`cat $(srcdir)/build/minor-version-number`
 RUNNABLE = scheme48
 CONFIG_SCRIPT = scheme48-config
 MANPAGE = $(RUNNABLE).$(manext)
-LIB = $(libdir)/scheme48-$(VERSION)
-SHARE = $(datadir)/scheme48-$(VERSION)
+LIB = $(libdir)/scheme48
+SHARE = $(datadir)/scheme48
 
 distdir = /tmp
 
@@@@ -469,7 +469,7 @@@@ doc/html/manual.html: doc/manual.pdf
 
 doc: doc/manual.pdf doc/manual.ps doc/html/manual.html
 
-install: install-no-doc install-doc
+install: install-no-doc
 
 install-no-doc: enough dirs
 # install the VM
@@@@ -532,8 +532,6 @@@@ install-no-doc: enough dirs
 # install the external modules
 	$(INSTALL_PROGRAM) $(EXTERNALS) $(DESTDIR)$(LIB)/
 # install the documentation
-	$(srcdir)/mkinstalldirs $(DESTDIR)$(docdir)
-	$(INSTALL_DATA) $(srcdir)/COPYING $(docdir)
 
 install-doc: dirs doc
 	$(srcdir)/mkinstalldirs $(DESTDIR)$(docdir)
@


1.3
log
@Update scheme48 to 1.9.
Also fix linking issue by setting LD="${CC}".

ok sthen@@ landry@@ Looks good to me Aaron Hsu (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.2 2008/08/19 22:20:40 jasper Exp $
d6 1
a6 1
+++ Makefile.in	Tue Feb  5 18:31:15 2013
d18 18
@


1.2
log
@- update scheme48 to 1.8
including many fixes and new features and works on non-i386 too now.

ok MAINTAINER
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- Makefile.in.orig	Sat Jan 26 16:06:27 2008
+++ Makefile.in	Fri Aug 15 15:16:45 2008
@@@@ -57,8 +57,8 @@@@ VERSION = 1.`cat $(srcdir)/build/minor-version-number`
a17 20
@@@@ -356,7 +356,7 @@@@ install: enough dirs \
 
 inst-vm:
 	$(INSTALL_PROGRAM) $(VM) $(DESTDIR)$(LIB)
-	if [-e $(VM).a]; then $(INSTALL_PROGRAM) $(VM).a $(DESTDIR)$(LIB); fi
+	if [ -e $(VM).a]; then $(INSTALL_PROGRAM) $(VM).a $(DESTDIR)$(LIB); fi
 
 inst-image:
 	rm -f '/tmp/$(IMAGE)'
@@@@ -416,8 +416,8 @@@@ inst-config-script:
 	    -e 's,@@LD\@@,$(LD),g'					\
 	    -e 's,@@DYNAMIC_EXTERNALS_CFLAGS\@@,$(DYNAMIC_EXTERNALS_CFLAGS),g' \
 	    -e 's,@@DYNAMIC_EXTERNALS_LDFLAGS\@@,$(DYNAMIC_EXTERNALS_LDFLAGS),g' \
-	< $(srcdir)/build/$(CONFIG_SCRIPT).in > $$config_script &&	\
-	chmod +x $$config_script
+	< $(srcdir)/build/$(CONFIG_SCRIPT).in > $(DESTDIR)$$config_script &&	\
+	chmod +x $(DESTDIR)$$config_script
 
 inst-externals:
 	$(INSTALL_PROGRAM) $(POSIX_EXTERNAL) $(SRFI_27_EXTERNAL) $(DESTDIR)$(LIB)/
@


1.1
log
@Initial revision
@
text
@d2 6
a7 11
--- Makefile.in.orig	Sun May 22 09:06:14 2005
+++ Makefile.in	Sat Jul 22 18:28:10 2006
@@@@ -27,6 +27,7 @@@@ libdir = $(exec_prefix)/lib
 incdir = $(exec_prefix)/include
 manext = 1
 mandir = $(prefix)/man/man$(manext)
+truebindir = $(TRUEPREFIX)/bin
 
 # HP 9000 series, if you don't have gcc
 #   CC = cc
@@@@ -43,6 +44,7 @@@@ mandir = $(prefix)/man/man$(manext)
d9 1
d11 4
a14 2
 LIB = $(libdir)/$(RUNNABLE)
+TRUELIB = $(TRUEPREFIX)/lib/$(RUNNABLE)
d18 1
a18 7
@@@@ -231,7 +233,7 @@@@ script-interpreter: c/script-interpreter
 
 c/main.o: c/main.c c/scheme48vm.h c/scheme48heap.h
 	$(CC) -c $(CFLAGS) -o $@@ \
-		-DDEFAULT_IMAGE_NAME=\"$(LIB)/$(IMAGE)\" \
+		-DDEFAULT_IMAGE_NAME=\"$(TRUELIB)/$(IMAGE)\" \
 		$(CPPFLAGS) $(DEFS) $(srcdir)/c/main.c
d20 4
a23 11
 c/scheme48vm.o: c/prescheme.h c/scheme48vm.h c/scheme48heap.h \
@@@@ -259,7 +261,7 @@@@ c/unix/misc.o: c/sysdep.h $(FAKEHS)
 c/unix/io.o: c/io.h
 c/script-interpreter.o: c/sysdep.h $(FAKEHS) c/script-interpreter.c
 	$(CC) -c $(CFLAGS) -o $@@ \
-		-DRUNNABLE=\"$(bindir)/$(RUNNABLE)\" \
+		-DRUNNABLE=\"$(truebindir)/$(RUNNABLE)\" \
 		$(CPPFLAGS) $(DEFS) \
 		-I ./c -I$(srcdir)/c \
 		$(srcdir)/c/script-interpreter.c
@@@@ -294,15 +296,15 @@@@ inst-vm:
d26 9
a34 6
 	rm -f '/tmp/$(IMAGE)' &&					\
-	$(srcdir)/build/build-usual-image $(srcdir) '$(LIB)'            \
+	$(srcdir)/build/build-usual-image $(srcdir) '$(TRUELIB)'            \
 	         '/tmp/$(IMAGE)' './$(VM)' '$(INITIAL)' &&		\
 	$(INSTALL_DATA) /tmp/$(IMAGE) $(LIB) &&				\
 	rm /tmp/$(IMAGE)
d36 2
a37 18
 inst-man:
 	$(srcdir)/mkinstalldirs $(mandir)
-	sed 's=LBIN=$(bindir)=g' $(srcdir)/doc/scheme48.man |	   \
-		sed 's=LLIB=$(LIB)=g' |				   \
+	sed 's=LBIN=$(truebindir)=g' $(srcdir)/doc/scheme48.man |	   \
+		sed 's=LLIB=$(TRUELIB)=g' |				   \
 		sed 's=LS48=$(RUNNABLE)=g' >$(MANPAGE) &&	   \
 	$(INSTALL_DATA) $(MANPAGE) $(mandir) &&			   \
 	rm $(MANPAGE);						   \
@@@@ -326,7 +328,7 @@@@ inst-script:
 	script=$(bindir)/$(RUNNABLE) &&					\
 	echo '#!/bin/sh'	>$$script &&				\
 	echo			>>$$script &&				\
-	echo 'lib=$(LIB)'	>>$$script &&				\
+	echo 'lib=$(TRUELIB)'	>>$$script &&				\
 	echo 'exec $$lib/$(VM) -o $$lib/$(VM) -i $$lib/$(IMAGE) "$$@@"'	\
 				>>$$script &&				\
 	chmod +x $$script
@


1.1.1.1
log
@Import scheme48 1.3

Scheme 48 is an implementation of the Scheme programming language as
described in the Revised5 Report on the Algorithmic Language Scheme.
It is based on a compiler and interpreter for a virtual Scheme
machine.  Scheme 48 tries to be faithful to the Revised5 Scheme
Report, providing neither more nor less in the initial user
environment. It is based on a byte-code interpreter and is designed to
be used as a testbed for experiments in implementation techniques and
as an expository tool.

From Aaron Hsu <arcfide@@sacrificumdeo.net>
@
text
@@
