head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.02.27.21.33.43;	author jca;	state Exp;
branches;
next	;
commitid	JdcNuBwwYXy6yxUb;


desc
@@


1.1
log
@Show build commands, re-add -W* compile flags

The default is still a debug build.  Is that intended?

"cc" -O2 -pipe -std=gnu99 -Wall -Werror-implicit-function-declaration \
-Wdeclaration-after-statement -Wwrite-strings -g3 -O0 -DMRB_ENABLE_DEBUG_HOOK \
-DMRBGEM_MRUBY_BIN_DEBUGGER_VERSION=0.0.0 ...

Added Files: CVS: patches/patch-tasks_toolchains_gcc_rake
@
text
@$OpenBSD$
--- tasks/toolchains/gcc.rake.orig	Mon Feb 27 22:08:50 2017
+++ tasks/toolchains/gcc.rake	Mon Feb 27 22:14:00 2017
@@@@ -1,7 +1,7 @@@@
 MRuby::Toolchain.new(:gcc) do |conf|
   [conf.cc, conf.objc, conf.asm].each do |cc|
     cc.command = ENV['CC'] || 'gcc'
-    cc.flags = [ENV['CFLAGS'] || %w(-g -std=gnu99 -O3 -Wall -Werror-implicit-function-declaration -Wdeclaration-after-statement -Wwrite-strings)]
+    cc.flags = [ENV['CFLAGS'] || '-g -O3'] + %w(-std=gnu99 -Wall -Werror-implicit-function-declaration -Wdeclaration-after-statement -Wwrite-strings)
     cc.defines = %w(DISABLE_GEMS)
     cc.option_include_path = '-I%s'
     cc.option_define = '-D%s'
@
