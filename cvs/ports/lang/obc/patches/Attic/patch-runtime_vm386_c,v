head	1.2;
access;
symbols
	OPENBSD_6_0:1.1.0.20
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.16
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.18
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.14
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.12
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.10
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.8
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.6
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2016.08.30.11.02.41;	author jasper;	state dead;
branches;
next	1.1;
commitid	bvjIrXokW8WzdiVy;

1.1
date	2011.10.21.20.23.02;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update to obc-2.9.7
- drop gettext module and regen WANTLIB

ok Alexander Shiryaev (MAINTAINER)
@
text
@$OpenBSD: patch-runtime_vm386_c,v 1.1 2011/10/21 20:23:02 jasper Exp $
--- runtime/vm386.c.orig	Wed Dec 15 14:39:11 2010
+++ runtime/vm386.c	Thu Oct 20 19:01:29 2011
@@@@ -1137,19 +1137,9 @@@@ code_addr *vm_jumptable(int n) {
      return (code_addr *) limit;
 }
 
-#ifdef USE_MPROTECT
-#include <sys/mman.h>
-#endif
-
 static void check_space(int space) {
      if (codebuf == NULL || pc + space > limit - MARGIN) {
 	  code_addr p = vm_alloc(CODEPAGE);
-#ifdef USE_MPROTECT
-	  if (mprotect(p, CODEPAGE, PROT_READ|PROT_WRITE|PROT_EXEC) < 0) {
-	       perror("mprotect failed");
-	       exit(2);
-	  }
-#endif
 	  if (codebuf != NULL) jump_i(p);
 
 	  codebuf = p; limit = p + CODEPAGE;
@


1.1
log
@- update to 0.9.2

from Alexander Shiryaev (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
@

