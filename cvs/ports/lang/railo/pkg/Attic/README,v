head	1.8;
access;
symbols
	OPENBSD_6_0:1.7.0.10
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.6
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.8
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.4
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.4
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	sthen_20121704:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2016.09.13.16.26.03;	author sthen;	state dead;
branches;
next	1.7;
commitid	SgJG5liP003Wfwv7;

1.7
date	2014.07.22.10.55.40;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	3LzguPEQl5LkjlcD;

1.6
date	2014.05.31.13.42.15;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2014.03.31.10.28.20;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.19.22.32.28;	author sthen;	state Exp;
branches
	1.4.2.1
	1.4.4.1;
next	1.3;

1.3
date	2012.04.22.11.41.55;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.04.20.15.08.40;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.17.13.12.28;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.04.17.13.12.28;	author sthen;	state Exp;
branches;
next	;

1.4.2.1
date	2014.03.31.10.31.36;	author sthen;	state Exp;
branches;
next	;

1.4.4.1
date	2014.03.31.10.29.49;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.8
log
@switch railo to lucee
@
text
@$OpenBSD: README,v 1.7 2014/07/22 10:55:40 ajacoutot Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

Configuring Tomcat to support Railo
===================================
Railo is a Java-based CFML engine. It runs as a servlet in a container;
this package is designed to work with the Apache Tomcat servlet container,
you will need to make a few configuration changes to tomcat to use it.
If you have not yet modified Tomcat's configuration, this readme includes
a patch which can be used:

	# patch -d ${CATALINA_BASE}/conf < \
	    ${LOCALBASE}/share/doc/pkg-readmes/${FULLPKGNAME}

Then skip to the next section in this file, "Starting the service
and online configuration".

If you have already modified Tomcat's configuration and need to edit
manually, there are two possible ways to proceed.

1. Insert the contents of ${PREFIX}/conf/web-railo.xml in Tomcat's
${CATALINA_BASE}/conf/web.xml file. This will need to be kept up-to-date
with future Railo releases.

 -or-

2. Modify Tomcat configuration to include web-railo.xml itself; this is
the method used by the patch below, initial setup is slightly more complex
but ongoing maintenance is reduced.

   a) Change the <Context> line in ${CATALINA_BASE}/conf/context.xml to read
      <Context xmlBlockExternal="false">.

   b) Add lines after the first <?xml...?> line at the top of
      ${CATALINA_BASE}/conf/web.xml, so it looks like this:

   <?xml version="1.0" encoding="ISO-8859-1"?>
   <!DOCTYPE root [
       <!ENTITY railo SYSTEM "./web-railo.xml" >
   ]>

   c) Towards the bottom of web.xml, add the CFML-related file extensions
      to the <welcome-file-list> section:

	<welcome-file-list>
	    <welcome-file>index.cfm</welcome-file>
	    <welcome-file>index.html</welcome-file>
	    <welcome-file>index.htm</welcome-file>
	    <welcome-file>index.jsp</welcome-file>
	</welcome-file-list>

   d) Add "&railo;" at the bottom of the </web-app> section to include
      the "railo" xml entity defined above. This tells Tomcat to include
      the contents of the web-railo.xml file containing the Railo-related
      settings.

	&railo;
	</web-app>

Starting the service and online configuration
=============================================

- Add the Java agent to Tomcat's command-line flags:

tomcat_flags=-server -javaagent:var/tomcat/lib/railo-inst.jar

Any other JVM options can be added as necessary (for example, those
options to adjust Java memory use, enable JMXRemote, etc).

- Start/restart tomcat:

	${RCDIR}/tomcat restart

- Connect to http://localhost:8080/. If all goes well you should see the
default Railo homepage including a couple of samples and links to the
admin pages.

- Connect to the server and web administration pages. At first run of
a successful new installation, you will be prompted to set passwords.

	http://127.0.0.1:8080/railo-context/admin/server.cfm
	http://127.0.0.1:8080/railo-context/admin/web.cfm

- You can add pages to /var/tomcat/webapps/ROOT to be used for "localhost".
Additional host configurations can be added to ${CATALINA_BASE}/conf/server.xml.
Use the localhost configuration as a template; the _tomcat user will need to be
able to write to <appBase>/ROOT/WEB-INF, so set ownership and permissions
accordingly.

- Log files are kept in several locations. Consult them if things don't work
as expected, and don't forget to rotate/archive them as appropriate.

	${CATALINA_BASE}/logs
	${CATALINA_BASE}/railo/server-config/railo-server/context/logs
	${CATALINA_BASE}/railo/web-config/*/logs (various dirs, per-context)

Patch to unmodified Tomcat sample configuration
===============================================

--- context.xml.orig	Mon Mar 31 11:20:33 2014
+++ context.xml	Mon Mar 31 11:20:50 2014
@@@@ -16,7 +16,7 @@@@
   limitations under the License.
 -->
 <!-- The contents of this file will be loaded for each web application -->
-<Context>
+<Context xmlBlockExternal="false">
 
     <!-- Default set of monitored resources -->
     <WatchedResource>WEB-INF/web.xml</WatchedResource>

--- web.xml.orig	Tue Mar 19 22:29:42 2013
+++ web.xml	Tue Mar 19 22:29:55 2013
@@@@ -1,4 +1,8 @@@@
 <?xml version="1.0" encoding="ISO-8859-1"?>
+<!DOCTYPE root [
+    <!ENTITY railo SYSTEM "./web-railo.xml" >
+]>
+
 <!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
@@@@ -4599,9 +4603,11 @@@@
   <!-- to use within your application.                                       -->
 
     <welcome-file-list>
+        <welcome-file>index.cfm</welcome-file>
         <welcome-file>index.html</welcome-file>
         <welcome-file>index.htm</welcome-file>
         <welcome-file>index.jsp</welcome-file>
     </welcome-file-list>
 
+&railo;
 </web-app>
@


1.7
log
@Tweak documentation according to recent rc changes.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.6 2014/05/31 13:42:15 sthen Exp $
@


1.6
log
@Major update to Railo 4.2.1.000, for more information see
http://blog.getrailo.com/post.cfm/railo-4-2-final-release
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.5 2014/03/31 10:28:20 sthen Exp $
d68 1
a68 1
tomcat_flags="-server -javaagent:var/tomcat/lib/railo-inst.jar"
@


1.5
log
@Modify the README instructions based on a diff from dcoppa@@ to work around the
changes made in Tomcat 7.0.52 which broke previous installations. Add a MESSAGE
as well (to be removed after next release) so that people upgrading production
servers are clued into the required changes.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.4 2013/03/19 22:32:28 sthen Exp $
d66 7
d81 2
a82 1
- Connect to the admin pages and set passwords:
d84 2
a85 2
	http://localhost:8080/railo-context/admin/server.cfm
	http://localhost:8080/railo-context/admin/web.cfm
@


1.4
log
@update to Railo 4.1.0.004
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.3 2012/04/22 11:41:55 ajacoutot Exp $
d21 2
a22 2
If you need to edit manually, Tomcat's ${CATALINA_BASE}/conf/web.xml file
should have these changes:
d24 3
a26 2
- Add lines after the first <?xml...?> line at the top of the file, so it
looks like this:
d28 1
a28 4
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE root [
    <!ENTITY railo SYSTEM "./web-railo.xml" >
]>
d30 17
a46 2
- Towards the bottom of web.xml, add the CFML-related file extensions
to the <welcome-file-list> section:
a49 1
	    <welcome-file>index.cfml</welcome-file>
d55 4
a58 3
- Add "&railo;" at the bottom of the </web-app> section to include the
"railo" xml entity defined above. This just includes the contents of the
web-railo.xml file containing the CF-related settings.
d92 14
a105 2
Patch to unmodified Tomcat web.xml
==================================
@


1.4.2.1
log
@MFC, since Tomcat's configuration-breaking update went into -stable too:

Modify the README instructions based on a diff from dcoppa@@ to work around the
changes made in Tomcat 7.0.52 which broke previous installations. Add a MESSAGE
as well (to be removed after next release) so that people upgrading production
servers are clued into the required changes.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.5 2014/03/31 10:28:20 sthen Exp $
d21 2
a22 2
If you have already modified Tomcat's configuration and need to edit
manually, there are two possible ways to proceed.
d24 2
a25 3
1. Insert the contents of ${PREFIX}/conf/web-railo.xml in Tomcat's
${CATALINA_BASE}/conf/web.xml file. This will need to be kept up-to-date
with future Railo releases.
d27 4
a30 1
 -or-
d32 2
a33 17
2. Modify Tomcat configuration to include web-railo.xml itself; this is
the method used by the patch below, initial setup is slightly more complex
but ongoing maintenance is reduced.

   a) Change the <Context> line in ${CATALINA_BASE}/conf/context.xml to read
      <Context xmlBlockExternal="false">.

   b) Add lines after the first <?xml...?> line at the top of
      ${CATALINA_BASE}/conf/web.xml, so it looks like this:

   <?xml version="1.0" encoding="ISO-8859-1"?>
   <!DOCTYPE root [
       <!ENTITY railo SYSTEM "./web-railo.xml" >
   ]>

   c) Towards the bottom of web.xml, add the CFML-related file extensions
      to the <welcome-file-list> section:
d37 1
d43 3
a45 4
   d) Add "&railo;" at the bottom of the </web-app> section to include
      the "railo" xml entity defined above. This tells Tomcat to include
      the contents of the web-railo.xml file containing the Railo-related
      settings.
d79 2
a80 14
Patch to unmodified Tomcat sample configuration
===============================================

--- context.xml.orig	Mon Mar 31 11:20:33 2014
+++ context.xml	Mon Mar 31 11:20:50 2014
@@@@ -16,7 +16,7 @@@@
   limitations under the License.
 -->
 <!-- The contents of this file will be loaded for each web application -->
-<Context>
+<Context xmlBlockExternal="false">
 
     <!-- Default set of monitored resources -->
     <WatchedResource>WEB-INF/web.xml</WatchedResource>
@


1.4.4.1
log
@MFC, since Tomcat's configuration-breaking update went into -stable too:

Modify the README instructions based on a diff from dcoppa@@ to work around the
changes made in Tomcat 7.0.52 which broke previous installations. Add a MESSAGE
as well (to be removed after next release) so that people upgrading production
servers are clued into the required changes.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.5 2014/03/31 10:28:20 sthen Exp $
d21 2
a22 2
If you have already modified Tomcat's configuration and need to edit
manually, there are two possible ways to proceed.
d24 2
a25 3
1. Insert the contents of ${PREFIX}/conf/web-railo.xml in Tomcat's
${CATALINA_BASE}/conf/web.xml file. This will need to be kept up-to-date
with future Railo releases.
d27 4
a30 1
 -or-
d32 2
a33 17
2. Modify Tomcat configuration to include web-railo.xml itself; this is
the method used by the patch below, initial setup is slightly more complex
but ongoing maintenance is reduced.

   a) Change the <Context> line in ${CATALINA_BASE}/conf/context.xml to read
      <Context xmlBlockExternal="false">.

   b) Add lines after the first <?xml...?> line at the top of
      ${CATALINA_BASE}/conf/web.xml, so it looks like this:

   <?xml version="1.0" encoding="ISO-8859-1"?>
   <!DOCTYPE root [
       <!ENTITY railo SYSTEM "./web-railo.xml" >
   ]>

   c) Towards the bottom of web.xml, add the CFML-related file extensions
      to the <welcome-file-list> section:
d37 1
d43 3
a45 4
   d) Add "&railo;" at the bottom of the </web-app> section to include
      the "railo" xml entity defined above. This tells Tomcat to include
      the contents of the web-railo.xml file containing the Railo-related
      settings.
d79 2
a80 14
Patch to unmodified Tomcat sample configuration
===============================================

--- context.xml.orig	Mon Mar 31 11:20:33 2014
+++ context.xml	Mon Mar 31 11:20:50 2014
@@@@ -16,7 +16,7 @@@@
   limitations under the License.
 -->
 <!-- The contents of this file will be loaded for each web application -->
-<Context>
+<Context xmlBlockExternal="false">
 
     <!-- Default set of monitored resources -->
     <WatchedResource>WEB-INF/web.xml</WatchedResource>
@


1.3
log
@Use RCDIR instead of /etc/rc.d when refering to packages rc scripts.

discussed with espie and sthen
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.2 2012/04/20 15:08:40 sthen Exp $
d82 2
a83 2
--- web.xml.orig	Fri Apr 20 13:16:35 2012
+++ web.xml	Fri Apr 20 16:06:21 2012
d93 1
a93 1
@@@@ -4275,9 +4279,12 @@@@
a96 1
+        <welcome-file>index.cfml</welcome-file>
@


1.2
log
@add a patch to railo's README to make it easier to apply the config changes
to tomcat's web.xml file for the common case where you haven't made extensive
changes already.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.1.1.1 2012/04/17 13:12:28 sthen Exp $
d55 1
a55 1
	/etc/rc.d/tomcat restart
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: README.template,v 1.4 2011/06/02 13:44:40 ajacoutot Exp $
d12 11
a22 1
Tomcat's ${CATALINA_BASE}/conf/web.xml file should be edited as follows:
d50 3
d78 28
@


1.1.1.1
log
@import ports/lang/railo, ok gsoares@@

Railo is a high-performance open-source CFML engine. It has good
compatibility with other CFML engines. Most sites can be ported to
Railo with very little effort and all of the major CFML frameworks
support Railo out of the box.

Railo will very probably run your sites faster than any other CFML
engine, allowing you to handle more load and to provide a better
experience for end users.
@
text
@@
