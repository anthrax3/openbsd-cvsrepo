head	1.8;
access;
symbols
	OPENBSD_6_1:1.7.0.6
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.4
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.4.0.4
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.6
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	jasper_20111609:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2017.04.23.21.05.47;	author stu;	state Exp;
branches;
next	1.7;
commitid	d8WqqpaPpgr5DfOA;

1.7
date	2015.12.22.16.36.23;	author stu;	state Exp;
branches;
next	1.6;
commitid	aFux4IOeKV7pIGGU;

1.6
date	2015.04.10.14.35.36;	author stu;	state Exp;
branches;
next	1.5;
commitid	qHkThZqX9ezmH3sD;

1.5
date	2014.09.16.15.41.15;	author stu;	state Exp;
branches;
next	1.4;
commitid	SFfm4tckR6FjlNtR;

1.4
date	2013.11.14.09.11.21;	author stu;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.08.10.24.47;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2011.11.14.18.30.17;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.09.16.20.07.35;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.09.16.20.07.35;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Update to 0.77pl0.
@
text
@$OpenBSD: patch-Makefile_in,v 1.7 2015/12/22 16:36:23 stu Exp $

Don't use soname when linking.

--- Makefile.in.orig	Fri Apr  7 22:27:33 2017
+++ Makefile.in	Mon Apr 17 01:06:32 2017
@@@@ -10,7 +10,6 @@@@ STRIP = @@STRIP@@
 SH_CFLAGS ?= @@SH_CFLAGS@@
 SH_LDFLAGS ?= @@SH_LDFLAGS@@
 @@if SH_SOPREFIX
-SH_LDFLAGS += @@SH_SOPREFIX@@libjim@@LIBSOEXT@@
 @@endif
 SHOBJ_CFLAGS ?= @@SHOBJ_CFLAGS@@
 @@if JIM_STATICLIB
@@@@ -60,6 +59,7 @@@@ JIMSH := jimsh@@EXEEXT@@
 INSTALL_DATA_DIR ?= mkdir -p
 INSTALL_DATA ?= cp
 INSTALL_PROGRAM ?= cp
+INSTALL_SCRIPT ?= cp
 @@endif
 
 all: $(JIMSH) @@C_EXT_SHOBJS@@
@@@@ -74,19 +74,24 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
 	$(JIMSH_CC) @@SH_LINKFLAGS@@ $(LDFLAGS) -o $@@ jimsh.o initjimsh.o $(LIBJIM) $(LDLIBS) $(LIBS)
 
 @@if JIM_INSTALL
-install: all @@TCL_EXTS@@ install-exec install-docs
+install: all @@TCL_EXTS@@ install-exec install-docs install-exas
 	$(INSTALL_DATA_DIR) $(DESTDIR)@@libdir@@/jim
 	$(INSTALL_DATA) $(LIBJIM) $(DESTDIR)@@libdir@@
-	$(INSTALL_DATA) @@srcdir@@/README.extensions @@C_EXT_SHOBJS@@ $(DESTDIR)@@libdir@@/jim
+	$(INSTALL_DATA) @@C_EXT_SHOBJS@@ $(DESTDIR)@@libdir@@/jim
 	for i in tcltest.tcl @@TCL_EXTS@@; do $(INSTALL_DATA) @@srcdir@@/$$i $(DESTDIR)@@libdir@@/jim; done
 	$(INSTALL_DATA_DIR) $(DESTDIR)@@includedir@@
 	$(INSTALL_DATA) @@srcdir@@/jim.h @@srcdir@@/jim-eventloop.h @@srcdir@@/jim-signal.h \
 		@@srcdir@@/jim-subcmd.h @@srcdir@@/jim-win32compat.h $(DESTDIR)@@includedir@@
 	$(INSTALL_DATA) jim-config.h $(DESTDIR)@@includedir@@
-	$(INSTALL_DATA_DIR) $(DESTDIR)@@bindir@@
-	$(INSTALL_DATA) build-jim-ext $(DESTDIR)@@bindir@@
 	$(INSTALL_DATA) jimtcl.pc $(DESTDIR)@@libdir@@/pkgconfig
 
+install-exas:
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@datadir@@/examples/jim{,/api,/ext}
+	$(INSTALL_SCRIPT) build-jim-ext         $(DESTDIR)@@datadir@@/examples/jim
+	$(INSTALL_DATA) @@srcdir@@/examples/*     $(DESTDIR)@@datadir@@/examples/jim
+	$(INSTALL_DATA) @@srcdir@@/examples.api/{README,Makefile,*.c,*.tcl} $(DESTDIR)@@datadir@@/examples/jim/api
+	$(INSTALL_DATA) @@srcdir@@/examples.ext/{README,Makefile,*.c} $(DESTDIR)@@datadir@@/examples/jim/ext
+
 install-exec: all
 	$(INSTALL_DATA_DIR) $(DESTDIR)@@bindir@@
 	$(INSTALL_PROGRAM) $(JIMSH) $(DESTDIR)@@bindir@@
@@@@ -203,6 +208,8 @@@@ install-docs:
 install-docs: docs
 	$(INSTALL_DATA_DIR) $(DESTDIR)$(docdir)
 	$(INSTALL_DATA) Tcl.html $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) @@srcdir@@/LICENSE @@srcdir@@/README $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) @@srcdir@@/README.{extensions,namespaces,oo,sqlite,utf-8} $(DESTDIR)$(docdir)
 @@endif
 
 @@if INSTALL_DOCS == shipped
@


1.7
log
@Update to latest.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.6 2015/04/10 14:35:36 stu Exp $
d5 2
a6 2
--- Makefile.in.orig	Mon Oct  5 21:40:31 2015
+++ Makefile.in	Tue Dec 22 09:42:51 2015
d23 1
a23 10
@@@@ -76,6 +76,8 @@@@ docs: Tcl.html
 install-docs: docs
 	$(INSTALL_DATA_DIR) $(DESTDIR)$(docdir)
 	$(INSTALL_DATA) Tcl.html $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) @@srcdir@@/LICENSE @@srcdir@@/README $(DESTDIR)$(docdir)
+	$(INSTALL_DATA) @@srcdir@@/README.{extensions,namespaces,oo,sqlite,utf-8} $(DESTDIR)$(docdir)
 @@else
 install-docs:
 @@endif
@@@@ -84,17 +86,22 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
d40 2
a41 1
+
d48 1
a48 1
 
d51 10
@


1.6
log
@Update to latest.
Make sure to build with ${MODTCL_BIN}.
Better auto_path filtering.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.5 2014/09/16 15:41:15 stu Exp $
d5 2
a6 2
--- Makefile.in.orig	Sun Apr  5 20:13:49 2015
+++ Makefile.in	Mon Apr  6 01:20:58 2015
d15 1
a15 1
@@@@ -59,6 +58,7 @@@@ JIMSH := jimsh@@EXEEXT@@
d23 1
a23 3
@@@@ -73,8 +73,9 @@@@ docs: Tcl.html
 
 @@if JIM_DOCS
d25 4
a28 5
-	$(INSTALL_DATA_DIR) $(DESTDIR)$(prefix)/doc/jim
-	$(INSTALL_DATA) Tcl.html $(DESTDIR)$(prefix)/doc/jim
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@datadir@@/doc/jim
+	$(INSTALL_DATA) @@srcdir@@/LICENSE @@srcdir@@/README Tcl.html $(DESTDIR)@@datadir@@/doc/jim
+	$(INSTALL_DATA) @@srcdir@@/README.{extensions,namespaces,oo,sqlite,utf-8} $(DESTDIR)@@datadir@@/doc/jim
d32 1
a32 1
@@@@ -83,17 +84,22 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
@


1.5
log
@Update to 0.75pl1.
ok sthen@@
@
text
@d1 15
a15 4
$OpenBSD: patch-Makefile_in,v 1.4 2013/11/14 09:11:21 stu Exp $
--- Makefile.in.orig	Thu Aug  7 21:59:27 2014
+++ Makefile.in	Thu Sep  4 00:51:06 2014
@@@@ -59,6 +59,7 @@@@ JIMSH := jimsh@@EXEEXT@@
d23 1
a23 1
@@@@ -73,8 +74,9 @@@@ docs: Tcl.html
d35 1
a35 1
@@@@ -83,17 +85,22 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
d45 1
a45 1
 	for i in @@TCL_EXTS@@; do $(INSTALL_DATA) @@srcdir@@/$$i $(DESTDIR)@@libdir@@/jim; done
@


1.4
log
@Update to 0.75.
Gmake not needed.
Put include files in their own dir.
Install examples.
Install loadable sqlite3 extension.
Take maintainership with permission.

Thanks to Steve Havelka for distfile hosting.

ok landry@@; thanks sthen@@
@
text
@d1 9
a9 9
$OpenBSD: patch-Makefile_in,v 1.3 2013/03/08 10:24:47 jasper Exp $

Install everything nicely.

--- Makefile.in.orig	Sat Nov  9 00:49:42 2013
+++ Makefile.in	Sat Nov  9 10:04:48 2013
@@@@ -54,6 +54,12 @@@@ OBJS := _load-static-exts.o jim-subcmd.o jim-interacti
 
 JIMSH := jimsh@@EXEEXT@@
a10 6
+@@if JIM_INSTALL
+INSTALL_DATA_DIR ?= mkdir -p
+INSTALL_DATA ?= cp
+INSTALL_PROGRAM ?= cp
+@@endif
+
d12 1
a12 3
 
 # Create C extensions from pure Tcl extensions
@@@@ -66,8 +72,8 @@@@ docs: Tcl.html
d16 2
a17 2
-	mkdir -p $(DESTDIR)$(prefix)/doc/jim
-	cp Tcl.html $(DESTDIR)$(prefix)/doc/jim
d19 2
a20 1
+	$(INSTALL_DATA) @@srcdir@@/README.extensions Tcl.html $(DESTDIR)@@datadir@@/doc/jim
d24 2
a25 1
@@@@ -77,20 +83,21 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
d28 5
a32 9
 install: all @@TCL_EXTS@@ install-exec install-docs
-	mkdir -p $(DESTDIR)@@libdir@@/jim
-	cp $(LIBJIM) $(DESTDIR)@@libdir@@
-	cp @@srcdir@@/README.extensions @@C_EXT_SHOBJS@@ $(DESTDIR)@@libdir@@/jim
-	for i in @@TCL_EXTS@@; do cp @@srcdir@@/$$i $(DESTDIR)@@libdir@@/jim; done
-	mkdir -p $(DESTDIR)@@includedir@@
-	cp @@srcdir@@/jim.h @@srcdir@@/jim-eventloop.h @@srcdir@@/jim-signal.h \
+	$(INSTALL_DATA) $(LIBJIM) $(DESTDIR)@@libdir@@
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@libdir@@/jim
d34 3
a36 3
+	for i in @@TCL_EXTS@@; do $(INSTALL_DATA) @@srcdir@@/$$i $(DESTDIR)@@libdir@@/jim; done
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@includedir@@
+	$(INSTALL_DATA) @@srcdir@@/jim.h @@srcdir@@/jim-eventloop.h @@srcdir@@/jim-signal.h \
d38 10
a47 7
-	cp jim-config.h $(DESTDIR)@@includedir@@
-	mkdir -p $(DESTDIR)@@bindir@@
-	cp build-jim-ext $(DESTDIR)@@bindir@@
+	$(INSTALL_DATA) jim-config.h $(DESTDIR)@@includedir@@
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@bindir@@
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@datadir@@/examples/jim
+	$(INSTALL_DATA) build-jim-ext @@srcdir@@/examples/* $(DESTDIR)@@datadir@@/examples/jim
d50 1
a50 7
-	mkdir -p $(DESTDIR)@@bindir@@
-	cp $(JIMSH) $(DESTDIR)@@bindir@@
+	$(INSTALL_DATA_DIR) $(DESTDIR)@@bindir@@
+	$(INSTALL_PROGRAM) $(JIMSH) $(DESTDIR)@@bindir@@
 
 uninstall:
 	rm -f $(DESTDIR)@@bindir@@/$(JIMSH)
@


1.3
log
@- update to jimtcl-0.73
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.2 2011/11/14 18:30:17 ajacoutot Exp $
d3 1
a3 2
- Install docs into the right directory.
- Add shared library versioning to libjim.
d5 16
a20 12
--- Makefile.in.orig	Tue Feb 12 23:02:49 2013
+++ Makefile.in	Tue Feb 12 23:04:36 2013
@@@@ -33,6 +33,8 @@@@ VPATH := @@srcdir@@
 @@if JIM_STATICLIB
 LIBJIM := libjim.a
 @@else
+SONAME_MAJOR?=0
+SONAME_MINOR?=0
 LIBJIM := libjim.@@LIBSOEXT@@
 SH_LIBJIM := $(LIBJIM)
 CC += $(SH_CFLAGS)
@@@@ -67,15 +69,14 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
d22 2
a23 12
 @@if JIM_INSTALL
 install: all docs @@TCL_EXTS@@ install-exec
-	mkdir -p $(DESTDIR)$(prefix)/lib/jim
-	cp $(LIBJIM) $(DESTDIR)$(prefix)/lib
-	cp @@srcdir@@/README.extensions @@C_EXT_SHOBJS@@ @@TCL_EXTS@@ $(DESTDIR)$(prefix)/lib/jim
+	mkdir -p $(DESTDIR)$(prefix)/share/doc/jim
+	cp $(LIBJIM).$(SONAME_MAJOR).$(SONAME_MINOR) $(DESTDIR)$(prefix)/lib
+	cp @@srcdir@@/README.extensions @@C_EXT_SHOBJS@@ @@TCL_EXTS@@ $(DESTDIR)$(prefix)/share/doc/jim/
 	mkdir -p $(DESTDIR)$(prefix)/include
 	cp @@srcdir@@/jim.h @@srcdir@@/jim-eventloop.h @@srcdir@@/jim-signal.h \
 		@@srcdir@@/jim-subcmd.h @@srcdir@@/jim-win32compat.h $(DESTDIR)$(prefix)/include
 	cp jim-config.h $(DESTDIR)$(prefix)/include
d26 2
a27 6
+	cp Tcl.html $(DESTDIR)$(prefix)/share/doc/jim
 	mkdir -p $(DESTDIR)$(prefix)/bin
 	cp build-jim-ext $(DESTDIR)$(prefix)/bin
 
@@@@ -117,7 +118,9 @@@@ $(LIBJIM): $(OBJS)
 	$(RANLIB) $@@
d29 1
a29 5
 $(LIBJIM): $(OBJS)
-	$(CC) $(CFLAGS) $(LDFLAGS) $(SH_LDFLAGS) -o $@@ $(OBJS) $(LDLIBS)
+	$(CC) -shared -Wl,-soname -Wl,$@@.$(SONAME_MAJOR).$(SONAME_MINOR) $(OBJS) $(SH_LDFLAGS) $(CFLAGS) $(LDLIBS) -o $@@.$(SONAME_MAJOR).$(SONAME_MINOR)
+	ln -s $@@.$(SONAME_MAJOR).$(SONAME_MINOR) $@@.$(SONAME_MAJOR)
+	ln -s $@@.$(SONAME_MAJOR).$(SONAME_MINOR) $@@
d31 30
d62 2
a63 1
 # Note that $> $^ is for compatibility with both GNU make and BSD make
@


1.2
log
@Unfuck soname.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.1.1.1 2011/09/16 20:07:35 jasper Exp $
d6 3
a8 3
--- Makefile.in.orig	Thu Sep 15 17:33:15 2011
+++ Makefile.in	Fri Sep 16 17:41:20 2011
@@@@ -29,6 +29,8 @@@@ VPATH := @@srcdir@@
d14 1
a14 1
 LIBJIM := libjim.so
d17 1
a17 1
@@@@ -63,15 +65,14 @@@@ $(JIMSH): $(LIBJIM) jimsh.o initjimsh.o
d28 1
a28 1
 	cp @@srcdir@@/jim.h @@srcdir@@/jim-eventloop.h @@srcdir@@/jim-nvp.h @@srcdir@@/jim-signal.h \
d34 2
d37 1
a37 3
 install-exec: all
 	mkdir -p $(DESTDIR)$(prefix)/bin
@@@@ -109,7 +110,9 @@@@ $(LIBJIM): $(OBJS)
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d42 1
a42 1
+	$(CC) -shared -Wl,-soname -Wl,$@@.$(SONAME_MAJOR) $(OBJS) $(SH_LDFLAGS) $(CFLAGS) $(LDLIBS) -o $@@.$(SONAME_MAJOR).$(SONAME_MINOR)
@


1.1.1.1
log
@import jimtcl 0.72

Jim is a small footprint implementation of the Tcl programming language
written from scratch. Currently Jim Tcl is very feature complete with an
extensive test suite. There are some Tcl commands and features which are
not implemented (and likely never will be), including namespaces, traces
and Tk. [..]

ok aja@@
@
text
@@
