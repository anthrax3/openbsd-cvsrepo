head	1.11;
access;
symbols
	OPENBSD_6_2:1.11.0.32
	OPENBSD_6_2_BASE:1.11
	OPENBSD_6_1:1.11.0.30
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.11.0.28
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.24
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.26
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.22
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.20
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.18
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.16
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.14
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.12
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.10
	OPENBSD_5_0:1.11.0.8
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.6
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.4
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.10.0.6
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.4
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.9.0.6
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.4
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.2
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.8.0.10
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.8
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.6
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.4
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.2
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.6.0.4
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.4.0.4
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.2.0.4
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.2
	OPENBSD_2_9_BASE:1.2
	espie:1.1.1.1
	squeak:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2010.02.01.17.00.13;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2008.07.25.14.02.48;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2007.02.16.07.30.56;	author steven;	state Exp;
branches;
next	1.8;

1.8
date	2004.07.21.11.19.30;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2004.05.17.15.04.03;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2003.03.31.14.11.50;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2002.10.27.14.12.48;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.03.25.01.00.53;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2002.03.24.16.31.39;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.23.16.24.18;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.13.22.59.14;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.03.13.22.59.14;	author espie;	state Exp;
branches;
next	;


desc
@@


1.11
log
@SUBDIR += is wrong: it means the makefile will pick up SUBDIR from env, thus
breaking cd /usr/ports && SUBDIR=some/path make something for
category makefiles. While there, also put spaces around += uniformously.
okay naddy@@, jasper@@
@
text
@# $OpenBSD: Makefile,v 1.10 2008/07/25 14:02:48 espie Exp $

SUBDIR =
SUBDIR += vm
SUBDIR += image
SUBDIR += funsqueak
SUBDIR += sources

.include <bsd.port.subdir.mk>
@


1.10
log
@+funsqueak, make normal image depend on vm as well
(better dependency model)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/02/16 07:30:56 steven Exp $
d3 5
a7 4
SUBDIR =vm
SUBDIR+=image
SUBDIR+=funsqueak
SUBDIR+=sources
@


1.9
log
@fix a bunch of typos in rcs tags.   from martynas
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
@


1.8
log
@Basic update to squeak 3.6.
Modify port structure to create several packages more closely based
on distribution (and this is actually simpler to manage).
@
text
@d1 1
a1 1
# $OpeNBSD$
@


1.7
log
@Mark as !64 bits.
Next version of squeak will be 64 bits clean.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/03/31 14:11:50 sturm Exp $
d3 3
d7 1
a7 78
COMMENT=	"smalltalk system"
CATEGORIES=	lang
MAINTAINER=	Marc Espie <espie@@openbsd.org>
NOT_FOR_ARCHS=${LP64_ARCHS}


# Apple license, similar to GPL, with a clause to protect Apple
# against litigation
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes


MAJOR=3
MINOR=0
SUB=3552
V=${MAJOR}.${MINOR}
SUBST_VARS=V MAJOR
DIST_SUBDIR=squeak$V

FTPSITE=	ftp://st.cs.uiuc.edu/pub/Smalltalk/Squeak
HOMEPAGE=	http://squeak.org/
MASTER_SITES=${FTPSITE}/$V/platform-independent/
MASTER_SITES0=${FTPSITE}/$V/unix-linux/src/ \
	http://www-sor.inria.fr/~piumarta/squeak/unix/

COMMON_FILES=ReadMe.txt.gz MajorShrinkFor$V.cs.gz SqueakV${MAJOR}.sources.gz

IMAGE=Squeak$V-${SUB}.zip

DISTNAME=squeak-$V
DISTFILES=Squeak-$V-src.tar.gz:0 ${COMMON_FILES} ${IMAGE}

EXTRACT_ONLY=Squeak-$V-src.tar.gz ${IMAGE}

WRKDIST=${WRKDIR}/Squeak-$V
WRKSRC=	${WRKDIST}/src/unix

SEPARATE_BUILD=simple

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=RANLIB=ranlib
#MAKE_FLAGS=CFLAGS=-O2
#ALL_TARGET=squeak plugins map
ALL_TARGET=all squeak.1
USE_GMAKE=yes
USE_X11=yes

MAKE_FLAGS=docdir=${TRUEPREFIX}/share/doc/squeak-$V
.if ${MACHINE_ARCH} != "powerpc"
MAKE_FLAGS+=INTERP=gnu-interp
.endif
FAKE_FLAGS=${MAKE_FLAGS} DESTDIR=${WRKINST}

PLUGINS= Profiler.so SoundCodecPrims.so Squeak3D.so System.so

NO_REGRESS=	Yes

post-extract:
	cp ${FILESDIR}/sqOpenBSDSound.c ${WRKSRC}
	rm ${WRKSRC}/sqUnixSound.c
	gzip ${WRKDIR}/Squeak$V.{changes,image}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/squeak
	for i in ${COMMON_FILES}; \
	do \
		${INSTALL_DATA} ${FULLDISTDIR}/$$i ${PREFIX}/share/squeak; \
	done
	${INSTALL_DATA} ${WRKDIR}/Squeak$V.changes.gz ${PREFIX}/share/squeak
	${INSTALL_DATA} ${WRKDIR}/Squeak$V.image.gz ${PREFIX}/share/squeak
	gunzip ${PREFIX}/share/squeak/SqueakV${MAJOR}.sources.gz
	sed -e 's,@@PREFIX@@,${TRUEPREFIX},' -e 's,@@V@@,$V,' \
	    <${FILESDIR}/inisqueak >${PREFIX}/lib/squeak/$V/inisqueak
	@@chmod a+x ${PREFIX}/bin/inisqueak

.include <bsd.port.mk>
@


1.6
log
@USE_X11=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/10/27 14:12:48 naddy Exp $
d7 1
@


1.5
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/03/25 01:00:53 pvalchev Exp $
d50 1
@


1.4
log
@- workaround for powerpc suggested by espie
- add libtool patches for squeak to properly build on ELF arches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/03/24 16:31:39 espie Exp $
a5 1
NEED_VERSION=	1.400
d58 2
@


1.3
log
@real 3.0 has been out forever...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/04/23 16:24:18 espie Exp $
d52 4
a55 1
MAKE_FLAGS=INTERP=gnu-interp docdir=${TRUEPREFIX}/share/doc/squeak-$V
@


1.2
log
@Repair sound.

ossaudio should be somewhat documented, having to go to the source to
discover that fragments is unsupported, and that this is what freezes
squeak, is beyond lame.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/03/13 22:59:14 espie Exp $
d20 1
d22 2
a23 1
DIST_SUBDIR=squeak3.0
d25 1
d27 3
a29 2
MASTER_SITES=ftp://st.cs.uiuc.edu/pub/Smalltalk/Squeak/$V/files/
MASTER_SITES0=http://www-sor.inria.fr/~piumarta/squeak/unix/
d31 3
a33 1
COMMON_FILES=ReadMe.txt.gz Squeak$Vfinal.changes.gz Squeak$Vfinal.image.gz SqueakV${MAJOR}.sources.gz
d36 1
a36 2
PKGNAME=squeak-$V.pre2
DISTFILES=Squeak-$Vpre2.tar.gz:0 ${COMMON_FILES}
d38 1
a38 1
EXTRACT_ONLY=Squeak-$Vpre2.tar.gz
d60 1
d64 1
a64 1
	cd ${PREFIX}/share/squeak && for i in ${COMMON_FILES}; \
d67 4
a70 1
	done; gunzip SqueakV${MAJOR}.sources.gz
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
d6 1
a6 1
NEED_VERSION=	1.355
d41 1
a41 1
CONFIGURE_ENV=RANLIB=ranlib LIBS=-lossaudio
d51 4
@


1.1.1.1
log
@squeak smalltalk system.
This is 3.0 pre-release 2, largely stable enough to be fun.
@
text
@@
