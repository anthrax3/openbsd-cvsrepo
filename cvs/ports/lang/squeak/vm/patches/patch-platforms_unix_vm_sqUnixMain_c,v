head	1.5;
access;
symbols
	OPENBSD_6_0:1.4.0.12
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.8
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.10
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.6
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.4
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.22
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.20
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.18
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.16
	OPENBSD_5_0:1.3.0.14
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.12
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.10
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.8
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.6
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.4
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.2.0.10
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.8
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.0.6
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2016.09.11.16.30.12;	author ratchov;	state Exp;
branches;
next	1.4;
commitid	FsoAzgkLjeDvNDDq;

1.4
date	2013.12.30.12.14.55;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2008.07.23.11.17.22;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.10.02.13.16.23;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.07.21.15.42.09;	author espie;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Disable audio; unbreaks the build. Audio is not fixable as there are
LP64 problems preventing from implementing proper audio backend.

suggested by and ok naddy@@
@
text
@$OpenBSD: patch-platforms_unix_vm_sqUnixMain_c,v 1.3 2008/07/23 11:17:22 espie Exp $
--- platforms/unix/vm/sqUnixMain.c.orig	Sat Mar 22 02:33:18 2008
+++ platforms/unix/vm/sqUnixMain.c	Mon Dec 30 04:30:27 2013
@@@@ -54,11 +54,6 @@@@
 #include <signal.h>
 #include <fcntl.h>
 
-#if defined(__alpha__)
-# include <sys/sysinfo.h>
-# include <sys/proc.h>
-#endif
-
 #undef	DEBUG_MODULES
 
 #undef	IMAGE_DUMP				/* define to enable SIGHUP and SIGQUIT handling */
@@@@ -1329,17 +1325,6 @@@@ int main(int argc, char **argv, char **envp)
     outOfMemory();
 
   signal(SIGSEGV, sigsegv);
-
-#if defined(__alpha__)
-  /* disable printing of unaligned access exceptions */
-  {
-    int buf[2]= { SSIN_UACPROC, UAC_NOPRINT };
-    if (setsysinfo(SSI_NVPAIRS, buf, 1, 0, 0, 0) < 0)
-      {
-	perror("setsysinfo(UAC_NOPRINT)");
-      }
-  }
-#endif
 
 #if defined(HAVE_TZSET)
   tzset();	/* should _not_ be necessary! */
@


1.4
log
@"Nobody told him it was useless, so he did it anyway"

Unbreak squeak-vm on alpha, because if __alpha__ is defined,
then we're probably running on a variant of DEC unix, and we
should use /decgcc -taso, right?
@
text
@a15 8
@@@@ -698,6 +693,7 @@@@ static struct moduleDescription moduleDescriptions[]=
   { &displayModule, "display", "custom" },	/*** NO DEFAULT ***/
   { &soundModule,   "sound",   "NAS"    },	/*** NO DEFAULT ***/
   { &soundModule,   "sound",   "OSS"    },
+  { &soundModule,   "sound",   "OpenBSD"},
   { &soundModule,   "sound",   "custom" },	/*** NO DEFAULT ***/
   /* defaults */
   { &displayModule, "display", "Quartz" },
@


1.3
log
@finally update squeak to a more recent version.
as far as I know this should work on 64 bit systems.
@
text
@d1 16
a16 4
$OpenBSD$
--- platforms/unix/vm/sqUnixMain.c.orig	Wed Jul 23 12:54:17 2008
+++ platforms/unix/vm/sqUnixMain.c	Wed Jul 23 12:54:34 2008
@@@@ -698,6 +698,7 @@@@ static struct moduleDescription moduleDescriptions[]=
d24 18
@


1.2
log
@update to 3.7.7... still no 64 bits support.
clean-up a few minor details.
@
text
@d1 6
a6 6
$OpenBSD: patch-platforms_unix_vm_sqUnixMain_c,v 1.1 2004/07/21 15:42:09 espie Exp $
--- platforms/unix/vm/sqUnixMain.c.orig	Sat Mar 19 21:38:22 2005
+++ platforms/unix/vm/sqUnixMain.c	Sun Oct  2 14:45:18 2005
@@@@ -689,6 +689,7 @@@@ static struct moduleDescription moduleDe
   { &soundModule,   "sound",   "MacOSX" },
   { &soundModule,   "sound",   "Sun"    },
d9 3
a11 3
   { &soundModule,   "sound",   "null"   },
   { 0,              0,         0	}
 };
@


1.1
log
@resurrect sound support, and clean up a little bit.
@
text
@d1 4
a4 4
$OpenBSD$
--- platforms/unix/vm/sqUnixMain.c.orig	Wed Jul 21 17:23:07 2004
+++ platforms/unix/vm/sqUnixMain.c	Wed Jul 21 17:23:40 2004
@@@@ -679,6 +679,7 @@@@ static struct moduleDescription moduleDe
@

