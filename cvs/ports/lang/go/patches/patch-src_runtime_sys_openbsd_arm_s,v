head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.06.27.15.57.17;	author jsing;	state Exp;
branches;
next	;
commitid	RYIB8AEhqgQvJV0J;


desc
@@


1.1
log
@Update lang/go to handle the sys_thrkill/sys_kill change.

Partially based on a diff from Ray Lai.
@
text
@$OpenBSD$
--- src/runtime/sys_openbsd_arm.s.orig	Tue Jun 21 19:09:17 2016
+++ src/runtime/sys_openbsd_arm.s	Tue Jun 21 19:10:15 2016
@@@@ -87,9 +87,10 @@@@ TEXT runtime·usleep(SB),NOSPLIT,$16
 TEXT runtime·raise(SB),NOSPLIT,$12
 	MOVW	$0x12B, R12
 	SWI	$0			// sys_getthrid
-					// arg 1 - pid, already in R0
+					// arg 1 - tid, already in R0
 	MOVW	sig+0(FP), R1		// arg 2 - signum
-	MOVW	$37, R12		// sys_kill
+	MOVW	$0, R2			// arg 3 - tcb
+	MOVW	$119, R12		// sys_thrkill
 	SWI	$0
 	RET
 
@@@@ -98,7 +99,7 @@@@ TEXT runtime·raiseproc(SB),NOSPLIT,$12
 	SWI	$0			// sys_getpid
 					// arg 1 - pid, already in R0
 	MOVW	sig+0(FP), R1		// arg 2 - signum
-	MOVW	$37, R12		// sys_kill
+	MOVW	$122, R12		// sys_kill
 	SWI	$0
 	RET
 
@
