head	1.40;
access;
symbols
	OPENBSD_6_0:1.36.0.2
	OPENBSD_6_0_BASE:1.36
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.20.0.2
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.17.0.2
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	jsing_2012-03-31:1.1.1.1
	jsing:1.1.1;
locks; strict;
comment	@# @;


1.40
date	2017.02.23.15.57.42;	author jsing;	state Exp;
branches;
next	1.39;
commitid	tyDwkty62G8hu8ka;

1.39
date	2016.12.06.15.40.09;	author jsing;	state Exp;
branches;
next	1.38;
commitid	Mj7z73VZzPDAc4wc;

1.38
date	2016.08.21.14.08.25;	author czarkoff;	state Exp;
branches;
next	1.37;
commitid	iUpFIKD5GnT14Qbe;

1.37
date	2016.08.18.17.23.03;	author jsing;	state Exp;
branches;
next	1.36;
commitid	3gjN7l5yQTvsZq8b;

1.36
date	2016.07.20.15.52.14;	author pea;	state Exp;
branches;
next	1.35;
commitid	2nIxb6MiAIaVtld2;

1.35
date	2016.06.27.15.57.17;	author jsing;	state Exp;
branches;
next	1.34;
commitid	RYIB8AEhqgQvJV0J;

1.34
date	2016.05.20.16.03.24;	author jsing;	state Exp;
branches;
next	1.33;
commitid	7lG7DXdVZBlxCNbt;

1.33
date	2016.05.16.13.50.01;	author jsing;	state Exp;
branches;
next	1.32;
commitid	N66RyVsFkEd9Jwws;

1.32
date	2016.05.13.13.49.26;	author jsing;	state Exp;
branches;
next	1.31;
commitid	g3krlAVqaIA6Dpwv;

1.31
date	2016.05.11.15.19.04;	author czarkoff;	state Exp;
branches;
next	1.30;
commitid	d8HZp3tNobzgGvC8;

1.30
date	2016.05.05.10.46.50;	author czarkoff;	state Exp;
branches;
next	1.29;
commitid	T72wrhicnNzJNzMa;

1.29
date	2016.04.14.17.43.26;	author juanfra;	state Exp;
branches;
next	1.28;
commitid	6aohiqOduib2WjOA;

1.28
date	2016.01.14.12.11.50;	author jsing;	state Exp;
branches
	1.28.2.1;
next	1.27;
commitid	caUhMUnNnYdcdD6B;

1.27
date	2015.12.05.05.01.24;	author jsing;	state Exp;
branches;
next	1.26;
commitid	fN4NDcqKzRslRp48;

1.26
date	2015.08.19.06.57.20;	author jasper;	state Exp;
branches;
next	1.25;
commitid	priIahc6vP5BPOF5;

1.25
date	2015.05.06.08.28.26;	author jasper;	state Exp;
branches
	1.25.4.1;
next	1.24;
commitid	ZOvjNlT6QyEjQMlv;

1.24
date	2015.03.18.16.21.02;	author kspillner;	state Exp;
branches;
next	1.23;
commitid	mG2VSuCCAmXWiK4W;

1.23
date	2015.01.23.12.09.26;	author jsing;	state Exp;
branches
	1.23.2.1;
next	1.22;
commitid	XxJ7talXi5krKVc4;

1.22
date	2014.12.23.12.21.37;	author jsing;	state Exp;
branches;
next	1.21;
commitid	UTHPZ0kIYcUeIOn2;

1.21
date	2014.10.26.13.07.14;	author jsing;	state Exp;
branches;
next	1.20;
commitid	3quqeix06z4MAggB;

1.20
date	2014.07.25.14.39.41;	author jsing;	state Exp;
branches;
next	1.19;
commitid	RSdD9tYigIu5WZra;

1.19
date	2014.07.25.13.36.55;	author jsing;	state Exp;
branches;
next	1.18;
commitid	di0P39dYOpcucHPg;

1.18
date	2014.03.25.13.21.20;	author jsing;	state Exp;
branches;
next	1.17;

1.17
date	2013.12.08.15.09.15;	author jsing;	state Exp;
branches;
next	1.16;

1.16
date	2013.12.02.20.07.38;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2013.12.02.15.35.49;	author jsing;	state Exp;
branches;
next	1.14;

1.14
date	2013.10.31.21.12.12;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2013.08.25.11.57.27;	author jsing;	state Exp;
branches;
next	1.12;

1.12
date	2013.08.07.21.32.08;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2013.07.13.15.46.43;	author jsing;	state Exp;
branches;
next	1.10;

1.10
date	2013.05.15.12.10.15;	author jsing;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.12.09.57.10;	author jsing;	state Exp;
branches;
next	1.8;

1.8
date	2013.03.11.11.20.27;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2012.10.01.06.20.09;	author jsing;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.19.21.10.38;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.30.15.49.55;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.04.15.18.39;	author jsing;	state Exp;
branches;
next	1.3;

1.3
date	2012.05.20.16.32.51;	author jsing;	state Exp;
branches;
next	1.2;

1.2
date	2012.04.15.13.37.27;	author jsing;	state Exp;
branches;
next	1.1;

1.1
date	2012.03.31.12.37.15;	author jsing;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.03.31.12.37.15;	author jsing;	state Exp;
branches;
next	;

1.23.2.1
date	2015.08.19.07.02.31;	author jasper;	state Exp;
branches;
next	;
commitid	kEdqzVSwn67hPwNy;

1.25.4.1
date	2015.08.22.08.19.06;	author jasper;	state Exp;
branches;
next	;
commitid	YwIIWtYCC9fj2SC3;

1.28.2.1
date	2016.04.14.17.45.33;	author juanfra;	state Exp;
branches;
next	;
commitid	OjiGcI2WoPMYgb8G;


desc
@@


1.40
log
@Update lang/go to version 1.8.

ok ajacoutot@@
@
text
@# $OpenBSD: Makefile,v 1.39 2016/12/06 15:40:09 jsing Exp $

ONLY_FOR_ARCHS =	${GO_ARCHS}

COMMENT =		Go programming language

VERSION =		1.8
EXTRACT_SUFX =		.src.tar.gz
DISTNAME = 		go${VERSION}
PKGNAME = 		go-${VERSION}
PKGSPEC =		go-=${VERSION}
CATEGORIES =		lang

HOMEPAGE =		https://golang.org/

MAINTAINER = 		Joel Sing <jsing@@openbsd.org>

# software: BSD, documentation: CC-BY-3.0
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		c pthread

MASTER_SITES =		https://golang.org/dl/

BUILD_DEPENDS =		lang/go-bootstrap shells/bash

SEPARATE_BUILD =	simple
CONFIGURE_STYLE =	None
SUBST_VARS =		GOCFG

WRKDIST =		${WRKDIR}/go
WRKSRC =		${WRKDIST}/src

INSTALL_STRIP =

GOOS = 			openbsd
GOARCH =		unknown
GOROOT = 		${PREFIX}/go
GOROOT_BOOTSTRAP =	${PREFIX}/go/bootstrap

.if ${MACHINE_ARCH} == "amd64"
GOARCH =		amd64
.elif ${MACHINE_ARCH} == "i386"
GOARCH =		386
.endif

GOCFG =			/${GOOS}_${GOARCH}

do-configure:
.	if ${GOARCH} == "unknown"
		@@echo "Unable to determine GOARCH for ${MACHINE_ARCH}."
		@@exit 1
.	endif


do-build:
	@@cd ${WRKSRC} && \
		CC="${CC}" \
		CXX="${CXX}" \
		GOROOT=${WRKDIST} \
		GOBIN=${WRKDIST}/bin \
		GOROOT_FINAL=${GOROOT} \
		GOROOT_BOOTSTRAP=${GOROOT_BOOTSTRAP} ./make.bash --no-banner

do-test:
	@@cd ${WRKSRC} && \
		ulimit -n 256 -d 2097152 && \
		PATH=${WRKDIST}/bin:${PATH} GOROOT=${WRKDIST} ./run.bash

do-install:
	${INSTALL_PROGRAM_DIR} ${GOROOT}

	${INSTALL_PROGRAM_DIR} ${GOROOT}/bin
	${INSTALL_PROGRAM} -p ${WRKDIST}/bin/go{,fmt} ${GOROOT}/bin

	@@cd ${PREFIX}/bin && \
		ln -s ../go/bin/go go
	@@cd ${PREFIX}/bin && \
		ln -s ../go/bin/gofmt gofmt

	@@cd ${WRKDIST} && \
		find . -type f -maxdepth 1 \
			-exec ${INSTALL_DATA} -p {} \
			${GOROOT} \;

.	for dir in api doc lib misc src pkg/include pkg/obj pkg/${GOCFG} test
		@@cd ${WRKDIST} && \
			find ${dir} -type d \
				-exec ${INSTALL_DATA_DIR} \
				${GOROOT}/{} \;
		@@cd ${WRKDIST} && \
			find ${dir} ! -name \*.orig -type f \
				-exec ${INSTALL_DATA} -p {} \
				${GOROOT}/{} \;
.	endfor

	${INSTALL_PROGRAM_DIR} ${GOROOT}/pkg/tool/${GOOS}_${GOARCH}
	${INSTALL_PROGRAM} -p ${WRKDIST}/pkg/tool/${GOOS}_${GOARCH}/* \
		${GOROOT}/pkg/tool/${GOOS}_${GOARCH}

.include <bsd.port.mk>
@


1.39
log
@Update lang/go to 1.7.4.

This release addresses a security issue with net/http package's
Request.ParseMultipartForm method:

  https://golang.org/doc/devel/release.html#go1.7.minor

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/08/21 14:08:25 czarkoff Exp $
d7 1
a7 1
VERSION =		1.7.4
@


1.38
log
@make go libraries build- and run-depend on particular version of lang/go

Go libraries should be rebuilt on every lang/go update.  This change adds
runtime dependency on lang/go for ports with "lib" in MODGO_TYPE, and tunes
PKGSPEC to force dependency on exact version of go.

OK jsing@@, "makes sense" sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/08/18 17:23:03 jsing Exp $
d7 1
a7 2
REVISION =		0
VERSION =		1.7
@


1.37
log
@Upgrade lang/go to 1.7.

ok czarkoff@@ pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/07/20 15:52:14 pea Exp $
d7 1
d12 1
@


1.36
log
@Security update to 1.6.3 (CVE-2016-5386)

ok jsing@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/06/27 15:57:17 jsing Exp $
d7 1
a7 1
VERSION =		1.6.3
d20 1
a20 1
WANTLIB =		c m pthread
@


1.35
log
@Update lang/go to handle the sys_thrkill/sys_kill change.

Partially based on a diff from Ray Lai.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/05/20 16:03:24 jsing Exp $
d7 1
a7 1
VERSION =		1.6.2
a10 1
REVISION =		0
@


1.34
log
@Update lang/go to 1.6.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/05/16 13:50:01 jsing Exp $
d11 1
@


1.33
log
@Allow lang/go to generate PT_TLS when cgo is used on OpenBSD. This makes
Go 1.6 pass regress on openbsd/386 and openbsd/amd64. Also stop exporting
environ and __progname from cgo, since these symbols are no longer required
by libc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/05/13 13:49:26 jsing Exp $
d7 1
a7 1
VERSION =		1.6
a10 1
REVISION =		2
@


1.32
log
@Stop using sigreturn from the Go openbsd/386 signal trampoline - the
sigreturn syscall is going away in future versions of OpenBSD and its
use for Go is already broken due to the trampoline return checks. Instead
just return directly from the signal trampoline (as we have always done
for Go openbsd/amd64).

Also fix a bug in the Go openbsd/386 linker, which results in symbols in
the dynamic symbol table being emitted with a size of zero. With a current
ld.so, this results in symbol mismatch warnings.

Unbreaks the Go port on openbsd/386, however it still fails to pass regress
due to the PT_TLS changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/05/11 15:19:04 czarkoff Exp $
d11 1
a11 1
REVISION =		1
@


1.31
log
@update to go 1.6

OK jsing (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/05/05 10:46:50 czarkoff Exp $
d11 1
a11 1
REVISION =		0
@


1.30
log
@Set INSTALL_STRIP= for go ports

OK ajacoutot@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/04/14 17:43:26 juanfra Exp $
d7 1
a7 1
VERSION =		1.5.4
d86 1
a86 1
.	for dir in doc lib misc src pkg
a96 1
	# These get installed via `find' however we need them to be executable
@


1.29
log
@Update to go 1.5.4. OK jasper@@ jsing@@ (MAINTAINER).

https://groups.google.com/forum/#!topic/golang-announce/9eqIHqaWvck

"Go's crypto libraries passed certain parameters unchecked to the
underlying big integer library, possibly leading to extremely
long-running computations, which in turn makes Go programs vulnerable to
remote denial of service attacks.  Programs using HTTPS client
certificates or the Go SSH server libraries are both exposed to this
vulnerability.
This is CVE-2016-3959 and was addressed by this change:
https://golang.org/cl/21533
Thanks to David Wong for identifying this issue."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/01/14 12:11:50 jsing Exp $
d11 1
d33 2
@


1.28
log
@Update lang/go to 1.5.3.

This release addresses CVE-2015-8618.

ok ajacoutot@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/12/05 05:01:24 jsing Exp $
d7 1
a7 1
VERSION =		1.5.3
@


1.28.2.1
log
@Update to go 1.5.4. OK jasper@@ jsing@@ (MAINTAINER).

https://groups.google.com/forum/#!topic/golang-announce/9eqIHqaWvck

"Go's crypto libraries passed certain parameters unchecked to the
underlying big integer library, possibly leading to extremely
long-running computations, which in turn makes Go programs vulnerable to
remote denial of service attacks.  Programs using HTTPS client
certificates or the Go SSH server libraries are both exposed to this
vulnerability.
This is CVE-2016-3959 and was addressed by this change:
https://golang.org/cl/21533
Thanks to David Wong for identifying this issue."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/01/14 12:11:50 jsing Exp $
d7 1
a7 1
VERSION =		1.5.4
@


1.27
log
@Update to Go 1.5.2.

This also installs in a manner that allows /usr/local/go to now be used for
GOROOT_BOOTSTRAP, if building from source.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/08/19 06:57:20 jasper Exp $
d7 1
a7 1
VERSION =		1.5.2
@


1.26
log
@backport various security fixes:
- CVE-2015-5739, "Content Length" treated as valid header
- CVE-2015-5740, Double content-length headers does not return 400 error
- CVE-2015-5741, Additional hardening, not sending Content-Length w/Transfer-Encoding, Closing connections

from upstream git

ok jsing@@ (MAINTAINER), czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/05/06 08:28:26 jasper Exp $
d7 1
a7 2
VERSION =		1.4.2
REVISION =		0
d13 1
a13 1
HOMEPAGE =		http://golang.org/
d22 1
a22 1
MASTER_SITES =		http://golang.org/dl/
d24 1
a24 1
BUILD_DEPENDS =		shells/bash
d28 1
a28 1
SUBST_VARS =		GOEXE GOCFG
d36 1
a39 3
EXEPREFIX =		6
PKG_ARGS +=		-Damd64=1
PKG_ARGS +=		-Di386=0
a41 5
EXEPREFIX =		8
PKG_ARGS +=		-Damd64=0
PKG_ARGS +=		-Di386=1
.else
PKG_ARGS += 		-Damd64=0 -Di386=0
a44 1
GOEXE =			${GOCFG}/${EXEPREFIX}
d59 2
a60 1
		GOROOT_FINAL=${GOROOT} ./make.bash --no-banner
d68 4
a71 1
	${INSTALL_PROGRAM} -p ${WRKDIST}/bin/go{,fmt} ${PREFIX}/bin
d73 4
a76 1
	${INSTALL_PROGRAM_DIR} ${GOROOT}
d79 1
a79 1
		find . ! -name .hg\* -type f -maxdepth 1 \
d83 1
a83 1
.	for dir in doc include lib misc src pkg
@


1.25
log
@update to go 1.4.2
- http://golang.org/doc/devel/release.html#go1.4.minor

ok jsing@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/03/18 16:21:02 kspillner Exp $
d8 1
@


1.25.4.1
log
@backport various security fixes:
- CVE-2015-5739, "Content Length" treated as valid header
- CVE-2015-5740, Double content-length headers does not return 400 error
- CVE-2015-5741, Additional hardening, not sending Content-Length w/Transfer-Encoding, Closing connections

from upstream git

ok jsing@@ (MAINTAINER), czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/05/06 08:28:26 jasper Exp $
a7 1
REVISION =		0
@


1.24
log
@Switch to using GO_ARCHS.

ok jsing@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/01/23 12:09:26 jsing Exp $
d7 1
a7 1
VERSION =		1.4.1
@


1.23
log
@Update lang/go to 1.4.1.

ok sthen@@ rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/12/23 12:21:37 jsing Exp $
d3 1
a3 1
ONLY_FOR_ARCHS =	amd64 i386
@


1.23.2.1
log
@backport various security fixes from upstream git:
- CVE-2015-5739, "Content Length" treated as valid header
- CVE-2015-5740, Double content-length headers does not return 400 error
- CVE-2015-5741, Additional hardening, not sending Content-Length w/Transfer-Encoding, Closing connections

ok jsing@@ (MAINTAINER), czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/01/23 12:09:26 jsing Exp $
a7 1
REVISION =		0
@


1.22
log
@Update lang/go to version 1.4.

ok bmercer@@ daniel@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/10/26 13:07:14 jsing Exp $
d7 1
a7 1
VERSION =		1.4
@


1.21
log
@Update lang/go to 1.3.3.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/07/25 14:39:41 jsing Exp $
d7 1
a7 1
VERSION =		1.3.3
d13 1
a13 1
HOMEPAGE =		http://www.golang.org/
@


1.20
log
@The size of if_msghdr changed with r1.156 of net/if.h, which means that
the various Sizeof*MsgHdr constants are now incorrect. This results in
various problems when attempting to parse the routing messages. Fix this
by respecting the header length returned from the kernel.

Makes regress pass again...

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/07/25 13:36:55 jsing Exp $
d7 1
a7 2
VERSION =		1.3
REVISION =		0
@


1.19
log
@Update lang/go to version 1.3.

ok matthew@@ naddy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/03/25 13:21:20 jsing Exp $
d8 1
@


1.18
log
@Upgrade lang/go to version 1.2.1.

Update API exceptions so that make regress passes fully - this is the same
change that has already been made in Go tip.

ok sthen@@, "Go for it" krw@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/12/08 15:09:15 jsing Exp $
d7 1
a7 1
VERSION =		1.2.1
d22 1
a22 1
MASTER_SITES =		https://go.googlecode.com/files/
@


1.17
log
@Add missing PLIST entries for lang/go 1.2.

Spotted by David Hill.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/12/02 20:07:38 sthen Exp $
d7 1
a7 2
VERSION =		1.2
REVISION =		0
@


1.16
log
@honour CC/CXX, similar diff from marco
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/12/02 15:35:49 jsing Exp $
d8 1
@


1.15
log
@Update lang/go to Go 1.2.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/10/31 21:12:12 sthen Exp $
d63 2
@


1.14
log
@bump REVISION for any ports using route messages. regen some distinfos and
remove unnecessary USE_GROFFs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/08/25 11:57:27 jsing Exp $
d7 1
a7 2
VERSION =		1.1.1
REVISION =		1
d73 1
a73 1
	${INSTALL_PROGRAM} -p ${WRKDIST}/bin/go{,doc,fmt} ${PREFIX}/bin
@


1.13
log
@Make lang/go work past the ABI break, with 64-bit time_t.

Tested by DsP.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/08/07 21:32:08 naddy Exp $
d8 1
a8 1
REVISION =		0
@


1.12
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/07/13 15:46:43 jsing Exp $
d8 1
@


1.11
log
@Update lang/go to 1.1.1, from Amit Kulkarni.

ok abieber@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/05/15 12:10:15 jsing Exp $
d22 1
a22 1
MASTER_SITES =		http://go.googlecode.com/files/
@


1.10
log
@Update lang/go to version 1.1.

Also preserve the timestamps of the source and compiled binaries so that
"go build" does not think installed libraries should be recompiled.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/12 09:57:10 jsing Exp $
d7 1
a7 1
VERSION =		1.1
d20 1
a20 1
WANTLIB =		c m
@


1.9
log
@Unbreak the lang/go port by switching from the old __tfork syscall that no
longer exists, to the current __tfork syscall. Also use __set_tcb instead
of sysarch.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/03/11 11:20:27 espie Exp $
d7 1
a7 2
VERSION =		1.0.3
REVISION =		0
d18 1
a18 1
PERMIT_PACKAGE_CDROM =	 Yes
d73 1
a73 1
	${INSTALL_PROGRAM} ${WRKDIST}/bin/go{,doc,fmt} ${PREFIX}/bin
d79 1
a79 1
			-exec ${INSTALL_DATA} {} \
d89 1
a89 1
				-exec ${INSTALL_DATA} {} \
d95 1
a95 1
	${INSTALL_PROGRAM} ${WRKDIST}/pkg/tool/${GOOS}_${GOARCH}/* \
@


1.8
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/10/01 06:20:09 jsing Exp $
d8 1
@


1.7
log
@Update to go 1.0.3.

- Fix a bug in the regress tests that may result in the tests being built/run
  with the installed binaries rather than the new binaries.
- Fix a bug related to 'go install' trying to rebuild non-writeable $GOROOT
  packages, when used with a $GOPATH (issue 4106).
- Include the 'misc' part of the package, which contains editor
  configuration files, etc.

ok jsg@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/07/30 15:49:55 espie Exp $
a18 3
PERMIT_PACKAGE_FTP =	 Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	 Yes
d67 1
a67 1
do-regress:
@


1.6
log
@add elf note section for OpenBSD. patches from jsing, applied to port by me.
@
text
@d7 1
a7 2
VERSION =		1.0.2
REVISION =		0
d73 1
a73 1
		PATH=${PATH}:${WRKDIST}/bin GOROOT=${WRKDIST} ./run.bash
d85 1
a85 1
.	for dir in doc include lib src pkg
@


1.5
log
@make sure make plist works on any arch, should fix pkglocatedb troubles.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/07/04 15:18:39 jsing Exp $
d8 1
@


1.4
log
@Update to Go version 1.0.2.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/05/20 16:32:51 jsing Exp $
d50 2
d53 1
@


1.3
log
@Update lang/go to version 1.0.1.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/04/15 13:37:27 jsing Exp $
d7 1
a7 1
VERSION =		1.0.1
@


1.2
log
@Use the __tfork() syscall instead of rfork(), which no longer exists.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/03/31 12:37:15 jsing Exp $
d7 1
a7 2
VERSION =		1
REVISION =		0
d9 1
a9 1
DISTNAME = 		go.go${VERSION}
d63 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
@


1.1.1.1
log
@Import go-1.

Go is an open source programming environment that makes it easy to build
simple, reliable, and efficient software.

With assistance from sthen@@

ok sthen@@
@
text
@@
