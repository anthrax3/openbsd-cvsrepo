head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.6
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.8
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.10
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.8
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2015.09.19.07.42.57;	author kili;	state Exp;
branches;
next	1.3;
commitid	wrrXExsbhXWvHmhw;

1.3
date	2014.11.22.20.23.23;	author kili;	state Exp;
branches;
next	1.2;
commitid	f8HFLM9LK5anF9Xl;

1.2
date	2012.09.02.19.53.46;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2010.04.22.21.49.37;	author kili;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to ghc-7.10.2.

Updates to all hs-* ports related to meta/haskell-platform will
follow soon. Other hs-* ports will be fixed during the next days.
@
text
@$OpenBSD: patch-libraries_base_GHC_IO_Encoding_hs,v 1.3 2014/11/22 20:23:23 kili Exp $
--- libraries/base/GHC/IO/Encoding.hs.orig	Tue Jul 21 21:50:11 2015
+++ libraries/base/GHC/IO/Encoding.hs	Sun Aug  9 17:35:52 2015
@@@@ -101,7 +101,9 @@@@ utf32le = UTF32.utf32le
 utf32be  :: TextEncoding
 utf32be = UTF32.utf32be
 
--- | The Unicode encoding of the current locale
+-- | The Unicode encoding of the current locale. On OpenBSD this is set
+-- to the value of the environment variable 'HS_ENCODING' or to 'latin1'
+-- if that variable isn't set.
 --
 -- @@since 4.5.0.0
 getLocaleEncoding :: IO TextEncoding
@


1.3
log
@Update to ghc-7.8.3, but mark as broken until all other
hs ports are done.

Please note that it still doesn't use shared libraries, so
still no ghci (and a lot of hs-ports not buildable) on i386.
@
text
@d1 4
a4 4
$OpenBSD: patch-libraries_base_GHC_IO_Encoding_hs,v 1.2 2012/09/02 19:53:46 kili Exp $
--- libraries/base/GHC/IO/Encoding.hs.orig	Thu Jul 10 06:32:11 2014
+++ libraries/base/GHC/IO/Encoding.hs	Sun Nov  2 22:11:04 2014
@@@@ -102,7 +102,9 @@@@ utf32le = UTF32.utf32le
d13 1
a13 1
 -- /Since: 4.5.0.0/
@


1.2
log
@Update to ghc-7.4.2, but keep it marked as broken (and not only for amd64).

Most of the -nopie changes are from pascal@@ (thanks); I only had to
merge them for ghc-7.4 and tweak configure and mk/config.mk.in.
@
text
@d1 3
a3 3
$OpenBSD: patch-libraries_base_GHC_IO_Encoding_hs,v 1.1 2010/04/22 21:49:37 kili Exp $
--- libraries/base/GHC/IO/Encoding.hs.orig	Wed Feb  1 19:10:45 2012
+++ libraries/base/GHC/IO/Encoding.hs	Sat Jun  9 21:37:47 2012
d12 2
a14 2
 
 -- | The Unicode encoding of the current locale, but allowing arbitrary
@


1.1
log
@
Update to 6.12.2.

Many thanks to Darrin Chandler and dcoppa@@ for testing, reporting about
broken stuff, missing dependencies here and in ports depending on ghc.

Notes and rants:

- Bootstrapping is done using precompiled binaries, since .hc
  bootstrapping still doesn't work. I really hate this.

  THIS MEANS THAT GHC IS NOW AND WILL STAY LEGACY-ONLY (i386 and amd64)

  At least until someone fixes it. I tried for more than two year
  (well, only in my spare time and during my vacations) and failed.

- libgmp is currently disabled, because I didn't yet hack the GHC build
  system to use the system libgmp instead of the patched one included
  in GHC.

- The haddock ncluded in the ghc distfile is replaced by the version
  of haddock found in devel/haddock. Haddock itself is @@commented
  in the ghc PLIST. Unfortunately, this needs an ugly hack that
  introduces an otherwise useless pseudo flavor `no_deps' in
  devel/haddock.

- CLDouble has been removed from GHC some time ago, because it was
  an alias for double (AFAIK there's now support for long double
  in GHC). As this isn't a really big problem, it currently breaks
  c2hs, which I'll mark broken temporarily before committing the
  ghc update.

- The external codeset defaults to latin1 (suggested by Simon Marlow)
  and can be overridden by setting the HS_ENCODING to any codeset
  supported by libiconv.

- ghc.port.mk still needs some love, especially for letting a port add
  additional parameters to certain invocations of ${MODGHC_SETUP_PROG}.
@
text
@d1 4
a4 4
$OpenBSD$
--- libraries/base/GHC/IO/Encoding.hs.orig	Tue Apr 20 20:10:11 2010
+++ libraries/base/GHC/IO/Encoding.hs	Thu Apr 22 19:11:45 2010
@@@@ -94,7 +94,9 @@@@ utf32le = UTF32.utf32le
d12 3
a14 3
 localeEncoding  :: TextEncoding
 #if !defined(mingw32_HOST_OS)
 localeEncoding = Iconv.localeEncoding
@

