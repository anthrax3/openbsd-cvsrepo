head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.04.17.17.21.49;	author espie;	state Exp;
branches;
next	;
commitid	GnD7MpJjYpmpZnMU;


desc
@@


1.1
log
@give the system a chance to figure out clang (their detection method is lame
as the patch shows).

you'll need to wait for a bootstrap/rebootrap yourself so this is actually
effective.

(should cut down *a lot* on the insane number of warnings produced due to
unknown compile options on a clang system)

okay kili@@
@
text
@$OpenBSD$
--- compiler/main/SysTools.hs.orig	Mon Apr 17 00:59:34 2017
+++ compiler/main/SysTools.hs	Mon Apr 17 01:00:26 2017
@@@@ -890,6 +890,9 @@@@ getCompilerInfo' dflags = do
         -- Regular clang
         | any ("clang version" `isPrefixOf`) stde =
           return Clang
+        -- stupid thingy !!!!
+        | any ("OpenBSD clang version" `isPrefixOf`) stde =
+          return Clang
         -- XCode 5.1 clang
         | any ("Apple LLVM version 5.1" `isPrefixOf`) stde =
           return AppleClang51
@
