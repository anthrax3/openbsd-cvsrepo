head	1.6;
access;
symbols
	OPENBSD_4_1:1.5.0.10
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.8
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.6
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.4
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2007.07.21.17.14.57;	author kili;	state dead;
branches;
next	1.5;

1.5
date	2005.02.14.01.26.56;	author dons;	state Exp;
branches;
next	1.4;

1.4
date	2004.04.26.23.48.50;	author dons;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.08.20.33.23;	author avsm;	state Exp;
branches;
next	1.2;

1.2
date	2003.08.03.18.07.27;	author avsm;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.20.21.57.11;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.6
log
@
Update to 6.6.1. With helpful hints from Don Stewart and espie@@.
Thanks to all the testers and to steven@@, who was so kind to
build the HC files for bootstrapping on amd64.
@
text
@$OpenBSD: patch-Makefile,v 1.5 2005/02/14 01:26:56 dons Exp $
Add a "check" target to make regress work nicely.

--- Makefile.orig	Wed Sep 22 03:34:41 2004
+++ Makefile	Wed Feb  2 10:55:40 2005
@@@@ -422,3 +422,17 @@@@ include $(TOP)/mk/target.mk
 
 # -----------------------------------------------------------------------------
 
+check::
+	( cd testsuite/tests/ghc-regress ; $(MAKE) $(MFLAGS) )
+	@@(sed 's/ started at .*$$//' actual.result > actual.result_)
+	@@(if cmp -s `uname -m`.expected.result actual.result_ ; then \
+                echo "All is good!" ; \
+          else \
+                echo ;\
+                echo "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@";\
+                echo "Unexpected regress results!" ;\
+                echo "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@";\
+                echo ;\
+                echo "here is a diff:" ;\
+                diff -u `uname -m`.expected.result actual.result_ ;\
+          fi ; exit 0 )
@


1.5
log
@Update ghc to 6.2.2.
Adds support for ghci. More stable foreign function interface.

Just i386 at the moment.

ok sturm@@ pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.4 2004/04/26 23:48:50 dons Exp $
@


1.4
log
@Update GHC to 6.2.1, and port to amd64

ok avsm@@ pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD$
d4 3
a6 3
--- Makefile.orig	Sat Jul 26 00:44:43 2003
+++ Makefile	Sun Aug  3 15:46:52 2003
@@@@ -420,3 +420,17 @@@@
@


1.3
log
@Add support for sparc ghc.
Hard work by Donald Stewart <dons at cse.unsw.edu.au>
@
text
@d1 1
@


1.2
log
@Update to ghc-6.0.1, bugfixes
From: Don Stewart <dons at cse.unsw.edu.au>
@
text
@d12 1
a12 1
+	@@(if cmp -s expected.result actual.result_ ; then \
d21 1
a21 1
+                diff -u expected.result actual.result_ ;\
@


1.1
log
@Update from maintainer Don Stewart (dons at cse.unsw.edu.au):

- Updated to ghc-6.0
- Halved (roughly) the build time; by using the 6.0 in-tree build
we only have to build the 6.0 libraries once. Also we only build the
necessary parts of the bootstrap compiler.
- The ugly lndir/stage1 build is also gone.
- The full ghc regression suite is now part of the port!
"make regress" will run around 3000 regress tests.
- The regression tests revealed that the C foreign function
- The Makefile is simplified, using more default targets
- The documentation is updated to 6.0
- I put some of the 5.04.3 patches into ghc cvs, so they are
now obsolete.

Unfortunately, this lets mozilla back in the race for longest
package building time...
@
text
@d3 3
a5 3
--- Makefile.orig	Thu May 29 23:55:03 2003
+++ Makefile	Fri Jul 11 00:42:00 2003
@@@@ -421,3 +421,16 @@@@
d11 2
a12 1
+	@@(if cmp -s expected.result i386.test.result ; then \
d21 1
a21 1
+                diff -u expected.result i386.test.result ;\
@

