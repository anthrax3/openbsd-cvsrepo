head	1.4;
access;
symbols
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2004.01.08.20.33.23;	author avsm;	state dead;
branches;
next	1.3;

1.3
date	2003.09.01.20.32.14;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2003.08.01.14.03.40;	author avsm;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.20.21.57.11;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Add support for sparc ghc.
Hard work by Donald Stewart <dons at cse.unsw.edu.au>
@
text
@$OpenBSD: patch-ghc_rts_Makefile,v 1.3 2003/09/01 20:32:14 espie Exp $
Tell the bootstrap code how to compile the .s file
This code replaces the silly [] of code used in Adjustor.c

--- ghc/rts/Makefile.orig	Thu Jul 24 22:17:59 2003
+++ ghc/rts/Makefile	Thu Aug 21 13:45:54 2003
@@@@ -53,6 +53,10 @@@@
 HC_SRCS = $(filter %.hc, $(SRCS))
 HC_OBJS = $(patsubst %.hc,%.$(way_)o, $(HC_SRCS))
 
+C_OBJS += obscure_ccall.o
+obscure_ccall.o :
+	$(CC) -c obscure_ccall.s
+
 CLEAN_FILES += $(HC_OBJS)
 
 # Override the default $(LIBOBJS) (defaults to $(HS_OBJS))
@


1.3
log
@Bootstrap using a more recent ghc, solves gc issues. From maintainer.
okay naddy.
@
text
@d1 1
a1 1
$OpenBSD: patch-ghc_rts_Makefile,v 1.2 2003/08/01 14:03:40 avsm Exp $
@


1.2
log
@RCS tags, from Xavier Santolaria <xavier@@santolaria.net>
@
text
@d1 2
a2 2
$OpenBSD$
Tell make to also compile the .s file
d5 2
a6 2
--- ghc/rts/Makefile.orig	Thu Jul 10 14:46:51 2003
+++ ghc/rts/Makefile	Thu Jul 10 14:47:42 2003
d13 1
a13 1
+	$(GHC) -c obscure_ccall.s
@


1.1
log
@Update from maintainer Don Stewart (dons at cse.unsw.edu.au):

- Updated to ghc-6.0
- Halved (roughly) the build time; by using the 6.0 in-tree build
we only have to build the 6.0 libraries once. Also we only build the
necessary parts of the bootstrap compiler.
- The ugly lndir/stage1 build is also gone.
- The full ghc regression suite is now part of the port!
"make regress" will run around 3000 regress tests.
- The regression tests revealed that the C foreign function
- The Makefile is simplified, using more default targets
- The documentation is updated to 6.0
- I put some of the 5.04.3 patches into ghc cvs, so they are
now obsolete.

Unfortunately, this lets mozilla back in the race for longest
package building time...
@
text
@d1 1
@

