head	1.3;
access;
symbols
	OPENBSD_5_2:1.2.0.6
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2012.09.02.19.53.46;	author kili;	state dead;
branches;
next	1.2;

1.2
date	2011.04.11.14.30.33;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2010.04.22.21.49.37;	author kili;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to ghc-7.4.2, but keep it marked as broken (and not only for amd64).

Most of the -nopie changes are from pascal@@ (thanks); I only had to
merge them for ghc-7.4 and tweak configure and mk/config.mk.in.
@
text
@$OpenBSD: patch-libraries_base_GHC_IO_Encoding_Iconv_hs,v 1.2 2011/04/11 14:30:33 kili Exp $

This is needed for our version of GNU libiconv-1.13.

--- libraries/base/GHC/IO/Encoding/Iconv.hs.orig	Wed Dec 15 19:10:12 2010
+++ libraries/base/GHC/IO/Encoding/Iconv.hs	Sun Dec 19 13:04:38 2010
@@@@ -64,31 +64,31 @@@@ latin1 = unsafePerformIO (mkTextEncoding "Latin1")
 
 {-# NOINLINE utf8 #-}
 utf8 :: TextEncoding
-utf8 = unsafePerformIO (mkTextEncoding "UTF8")
+utf8 = unsafePerformIO (mkTextEncoding "UTF-8")
 
 {-# NOINLINE utf16 #-}
 utf16 :: TextEncoding
-utf16 = unsafePerformIO (mkTextEncoding "UTF16")
+utf16 = unsafePerformIO (mkTextEncoding "UTF-16")
 
 {-# NOINLINE utf16le #-}
 utf16le :: TextEncoding
-utf16le = unsafePerformIO (mkTextEncoding "UTF16LE")
+utf16le = unsafePerformIO (mkTextEncoding "UTF-16LE")
 
 {-# NOINLINE utf16be #-}
 utf16be :: TextEncoding
-utf16be = unsafePerformIO (mkTextEncoding "UTF16BE")
+utf16be = unsafePerformIO (mkTextEncoding "UTF-16BE")
 
 {-# NOINLINE utf32 #-}
 utf32 :: TextEncoding
-utf32 = unsafePerformIO (mkTextEncoding "UTF32")
+utf32 = unsafePerformIO (mkTextEncoding "UTF-32")
 
 {-# NOINLINE utf32le #-}
 utf32le :: TextEncoding
-utf32le = unsafePerformIO (mkTextEncoding "UTF32LE")
+utf32le = unsafePerformIO (mkTextEncoding "UTF-32LE")
 
 {-# NOINLINE utf32be #-}
 utf32be :: TextEncoding
-utf32be = unsafePerformIO (mkTextEncoding "UTF32BE")
+utf32be = unsafePerformIO (mkTextEncoding "UTF-32BE")
 
 {-# NOINLINE localeEncoding #-}
 localeEncoding :: TextEncoding
@


1.2
log
@Update to 7.0.3.

ok jasper@@ (who also gave an ok to all the depending updates).
@
text
@d1 1
a1 1
$OpenBSD: patch-libraries_base_GHC_IO_Encoding_Iconv_hs,v 1.1 2010/04/22 21:49:37 kili Exp $
@


1.1
log
@
Update to 6.12.2.

Many thanks to Darrin Chandler and dcoppa@@ for testing, reporting about
broken stuff, missing dependencies here and in ports depending on ghc.

Notes and rants:

- Bootstrapping is done using precompiled binaries, since .hc
  bootstrapping still doesn't work. I really hate this.

  THIS MEANS THAT GHC IS NOW AND WILL STAY LEGACY-ONLY (i386 and amd64)

  At least until someone fixes it. I tried for more than two year
  (well, only in my spare time and during my vacations) and failed.

- libgmp is currently disabled, because I didn't yet hack the GHC build
  system to use the system libgmp instead of the patched one included
  in GHC.

- The haddock ncluded in the ghc distfile is replaced by the version
  of haddock found in devel/haddock. Haddock itself is @@commented
  in the ghc PLIST. Unfortunately, this needs an ugly hack that
  introduces an otherwise useless pseudo flavor `no_deps' in
  devel/haddock.

- CLDouble has been removed from GHC some time ago, because it was
  an alias for double (AFAIK there's now support for long double
  in GHC). As this isn't a really big problem, it currently breaks
  c2hs, which I'll mark broken temporarily before committing the
  ghc update.

- The external codeset defaults to latin1 (suggested by Simon Marlow)
  and can be overridden by setting the HS_ENCODING to any codeset
  supported by libiconv.

- ghc.port.mk still needs some love, especially for letting a port add
  additional parameters to certain invocations of ${MODGHC_SETUP_PROG}.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- libraries/base/GHC/IO/Encoding/Iconv.hs.orig	Tue Apr 13 20:10:08 2010
+++ libraries/base/GHC/IO/Encoding/Iconv.hs	Mon Apr 19 13:26:59 2010
@@@@ -71,31 +71,31 @@@@ latin1 = unsafePerformIO (mkTextEncoding "Latin1")
@

