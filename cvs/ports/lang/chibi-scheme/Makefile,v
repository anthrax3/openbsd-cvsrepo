head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	juanfra_20150509:1.1.1.1
	juanfra:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.03.16.16.46.32;	author naddy;	state Exp;
branches;
next	1.4;
commitid	4Ekn8nPgVVHWLTwe;

1.4
date	2015.07.31.14.37.34;	author naddy;	state Exp;
branches;
next	1.3;
commitid	FdykE1DQug1GVsfh;

1.3
date	2015.07.31.12.40.11;	author juanfra;	state Exp;
branches;
next	1.2;
commitid	7JaYTCSBX3FCfPcL;

1.2
date	2015.05.21.18.57.12;	author juanfra;	state Exp;
branches;
next	1.1;
commitid	AjqSNyF7Bx3HhgZT;

1.1
date	2015.05.09.21.04.58;	author juanfra;	state Exp;
branches
	1.1.1.1;
next	;
commitid	KeQKln6lln4XTcKM;

1.1.1.1
date	2015.05.09.21.04.58;	author juanfra;	state Exp;
branches;
next	;
commitid	KeQKln6lln4XTcKM;


desc
@@


1.5
log
@remove SHARED_ONLY from ports that don't use any MODULES
@
text
@# $OpenBSD: Makefile,v 1.4 2015/07/31 14:37:34 naddy Exp $

# The next version will work on other architectures again
ONLY_FOR_ARCHS =	amd64 i386

COMMENT =	interpreter of the R7RS Scheme programming language

DISTNAME =	chibi-scheme-0.7.3

SHARED_LIBS =	chibi-scheme 1.0 # 0.7.3

CATEGORIES =	lang

HOMEPAGE =	http://synthcode.com/wiki/chibi-scheme

MAINTAINER =	Juan Francisco Cantero Hurtado <juanfra@@openbsd.org>

# New BSD License
PERMIT_PACKAGE_CDROM = Yes

WANTLIB =	c m

MASTER_SITES =	http://synthcode.com/scheme/chibi/ \
		http://download.tuxfamily.org/jod/lang/chibi-scheme/ \
		ftp://download.tuxfamily.org/jod/lang/chibi-scheme/

EXTRACT_SUFX =	.tgz

# -DSEXP_USE_ALIGNED_BYTECODE=1 is experimental and broken on OpenBSD
# Back to defaults while upstream fixes the bugs.
MAKE_ENV +=	CC=${CC} \
		LDFLAGS="-L${WRKSRC} -L${LOCALBASE}/lib" \
		CPPFLAGS="-I${WRKSRC}/include -I${LOCALBASE}/include -DSEXP_USE_ALIGNED_BYTECODE=0" \
		SOVERSION="${LIBchibi-scheme_VERSION}"
# "gmake install" works fine but shows the error: "gmake: write error: stdout"
# -s is the simplest workaround for this bug
FAKE_FLAGS +=	PREFIX="${LOCALBASE}" \
		DESTDIR="${WRKINST}" \
		MANDIR="${LOCALBASE}/man/man1" \
		-s

USE_GMAKE =	Yes

.include <bsd.port.mk>
@


1.4
log
@fix variable name
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/07/31 12:40:11 juanfra Exp $
a4 2

SHARED_ONLY =	Yes
@


1.3
log
@chibi-scheme does not work on architectures which require aligned
access to memory. The bug is fixed in upstream's repo but the patch is
not simple and it could break the code on amd64/i386.

Build failures on sparc64 and hppa spotted by tobiasu@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/05/21 18:57:12 juanfra Exp $
d4 1
a4 1
ONLY_FOR_ARCH =	amd64 i386
@


1.2
log
@Update to chibi-scheme 0.7.3.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.1.1.1 2015/05/09 21:04:58 juanfra Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.71 2014/07/10 12:33:17 sthen Exp $
d7 1
a7 1
DISTNAME =	chibi-scheme-0.7.2
d9 1
a9 1
SHARED_LIBS =	chibi-scheme 0.0 # 0.7.2
d22 1
a22 1
MASTER_SITES =	http://abrek.synthcode.com/ \
d28 12
a39 7
MAKE_ENV =	CC=${CC} \
		LDFLAGS="-L${LOCALBASE}/lib" \
		CPPFLAGS="-I${LOCALBASE}/include" \
		LIBchibi-scheme_VERSION=${LIBchibi-scheme_VERSION}
FAKE_FLAGS =	PREFIX=${LOCALBASE} \
		DESTDIR=${WRKINST} \
		MANDIR=${LOCALBASE}/man/man1
@


1.1.1.1
log
@
Comment:
interpreter of the R7RS Scheme programming language

Description:
Chibi-Scheme is a small interpreter of the version R7RS of the Scheme
programming language.

Maintainer: Juan Francisco Cantero Hurtado <juanfra@@openbsd.org>

WWW: http://synthcode.com/wiki/chibi-scheme

OK jturner@@

@
text
@@
