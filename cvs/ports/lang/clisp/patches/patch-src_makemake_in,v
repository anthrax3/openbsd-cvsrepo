head	1.12;
access;
symbols
	OPENBSD_6_1:1.12.0.6
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.12.0.4
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.2
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.11.0.22
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.18
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.16
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.14
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.12
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.11.0.10
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.8
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.6
	OPENBSD_5_0:1.11.0.4
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.10.0.4
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.8
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.6
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.4
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.7.0.8
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.6
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.7.0.4
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.6.0.4
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.6.0.2
	OPENBSD_3_7_BASE:1.6
	OPENBSD_3_4:1.4.0.6
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.4
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.3.0.6
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.4
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	jsmith:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2015.10.06.11.37.06;	author jca;	state Exp;
branches;
next	1.11;
commitid	RkQAfNZRWeUUsLyL;

1.11
date	2010.09.23.13.42.22;	author joshe;	state Exp;
branches;
next	1.10;

1.10
date	2010.01.07.10.55.28;	author edd;	state Exp;
branches;
next	1.9;

1.9
date	2007.11.25.22.16.21;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2007.11.24.23.52.55;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2006.02.27.16.45.37;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2004.11.03.19.30.37;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2004.01.20.23.15.20;	author naddy;	state dead;
branches;
next	1.4;

1.4
date	2002.06.18.16.11.30;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.03.31.19.20.09;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.31.11.51.07;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2000.11.18.13.43.27;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.11.18.13.43.27;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Update to clisp-2.49

Dynamic modules have been disabled so that the port looks like
clisp-2.48.  People willing to enable and test them are welcome.

Build can fail on i386 but clisp-2.48 has the same problem.  clisp
makes bad assumptions about adress space layout.

Tests by krw@@ joshe@@ and Markus Lude, ok krw@@ joshe@@ (ex. maintainer)
@
text
@$OpenBSD: patch-src_makemake_in,v 1.11 2010/09/23 13:42:22 joshe Exp $

Override broken compiler test, attempting to build 32-bit clisp on a
64-bit patform will not work out very well.

Use the correct recipe to build shared modules on OpenBSD.

--- src/makemake.in.orig	Wed Jul  7 17:15:35 2010
+++ src/makemake.in	Tue Sep 29 00:28:57 2015
@@@@ -1150,6 +1150,7 @@@@ esac
 # esac
 
 test -z "$cpu" && cpu=${host_cpu}
+test "$cpu" = "${host_cpu%*64}" && cpu=${host_cpu}
 
 test "${verbose}" = true -o "${verbose}" = yes && \
   cat <<EOF >&2
@@@@ -1421,10 +1422,10 @@@@ if [ "${with_dynamic_modules}" != no ]; then
     freebsd2.2*)
       XCC_CREATESHARED='ld -Bshareable -o $lib $libs /usr/lib/c++rt0.o'
       ;;
-    freebsd2* | netbsd* | openbsd*)
+    freebsd2* | netbsd* )
       XCC_CREATESHARED='ld -Bshareable -o $lib $libs'
       ;;
-    freebsd3* | gnu* | linux* | cygwin* | mingw* | k*bsd* | dragonfly*)
+    freebsd3* | gnu* | linux* | cygwin* | mingw* | k*bsd* | dragonfly* | openbsd* )
       XCC_CREATESHARED='${CC} ${CFLAGS} ${CLFLAGS} -shared -o $lib $libs'
       ;;
     hpux9* | hpux10*)
@@@@ -1904,7 +1905,7 @@@@ echol "# This can also be used for pre-test and post-r
 echol "#   make distrib VERSION_SUFFIX=pre"
 echol "VERSION_SUFFIX="
 echol "# The distribution's top directory"
-echol 'TOPDIR=clisp-$(VERSION)$(VERSION_SUFFIX)'
+echol 'TOPDIR=clisp'
 echol
 echol '# Directories used by "make install":'
 echol "prefix = ${PREFIX}"
@@@@ -2931,7 +2932,7 @@@@ fi
 CLISP_="${HERE_}lisp${LEXE} -M ${HERE_}lispinit.mem ${localeflags}${someflags}"
 
 if [ $CROSS = false ] ; then
-  CHECK_DEPS="check-recompile check-fresh-line check-script check-exec-image check-tests"
+  CHECK_DEPS="check-recompile check-fresh-line check-script check-tests"
 
   echol "# check the sources:"
   echol "# 1. subr.d, fsubr.d, subrkw.d and all the LISPFUNs must add up"
@


1.11
log
@Build on sparc64.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_makemake_in,v 1.10 2010/01/07 10:55:28 edd Exp $
d6 5
a10 4
--- src/makemake.in.orig	Tue Jul 28 06:58:03 2009
+++ src/makemake.in	Mon Sep 20 16:32:15 2010
@@@@ -1108,6 +1108,8 @@@@ esac
 #   cpu=hppa ;;
d13 1
d15 2
a16 2
+
 if [ "${verbose}" = true -o "${verbose}" = yes ]; then
d18 14
a31 2
 # host system:
@@@@ -1916,7 +1918,7 @@@@ echol "# This can also be used for pre-test and post-r
d40 1
a40 1
@@@@ -3002,7 +3004,7 @@@@ fi
@


1.10
log
@update to clisp-2.48. patch for texlive follows.

OK kili@@
@
text
@d1 17
a17 4
$OpenBSD: patch-src_makemake_in,v 1.9 2007/11/25 22:16:21 jasper Exp $
--- src/makemake.in.orig	Tue Jul 28 19:58:03 2009
+++ src/makemake.in	Wed Dec 30 22:12:19 2009
@@@@ -1916,7 +1916,7 @@@@ echol "# This can also be used for pre-test and post-r
d26 1
a26 1
@@@@ -3002,7 +3002,7 @@@@ fi
@


1.9
log
@- update clisp to 2.43
@
text
@d1 4
a4 4
$OpenBSD: patch-src_makemake_in,v 1.8 2007/11/24 23:52:55 jasper Exp $
--- src/makemake.in.orig	Sun Nov 25 21:15:04 2007
+++ src/makemake.in	Sun Nov 25 21:15:40 2007
@@@@ -1872,7 +1872,7 @@@@ echol "# This can also be used for pre-test and post-r
d13 9
@


1.8
log
@- update clisp to 2.42

from pedro martelletto, with tweaks by me.
@
text
@d1 4
a4 4
$OpenBSD$
--- src/makemake.in.orig	Mon Oct 15 20:16:52 2007
+++ src/makemake.in	Sun Nov 18 11:41:24 2007
@@@@ -1930,7 +1930,7 @@@@ echol "# This can also be used for pre-test and post-r
@


1.7
log
@sync line numbers
@
text
@d1 12
a12 12
$OpenBSD: patch-src_makemake_in,v 1.6 2004/11/03 19:30:37 naddy Exp $
--- src/makemake.in.orig	Thu May 27 08:43:39 2004
+++ src/makemake.in	Mon Feb 27 09:37:50 2006
@@@@ -1550,7 +1550,7 @@@@ echol "prefix = ${PREFIX}"
 echol "exec_prefix = ${EXEC_PREFIX}"
 echol "bindir  = \$(exec_prefix)${NEXT_}bin"
 echol "shared  = \$(prefix)${NEXT_}share"
-echol "mandir  = \$(shared)${NEXT_}man"
+echol "mandir  = \$(prefix)${NEXT_}man"
 echol "docdir  = \$(shared)${NEXT_}doc"
 case "$fsstnd" in
   suse)
@


1.6
log
@fix man page location
@
text
@d1 4
a4 4
$OpenBSD$
--- src/makemake.in.orig	Wed Nov  3 19:38:54 2004
+++ src/makemake.in	Wed Nov  3 19:39:16 2004
@@@@ -1534,7 +1534,7 @@@@ echol "prefix = ${PREFIX}"
@


1.5
log
@Update to 2.32: fixes compilation with gcc3.
Mostly from cannings@@, cleanup by yours truly, some help from espie@@.
@
text
@d1 12
a12 71
$OpenBSD: patch-src_makemake_in,v 1.4 2002/06/18 16:11:30 naddy Exp $
--- src/makemake.in.orig	Mon Jun 25 16:54:46 2001
+++ src/makemake.in	Tue Jun 18 18:07:44 2002
@@@@ -1655,6 +1655,12 @@@@ case "$fsstnd" in
     echol "docdir = \$(exec_prefix)${NEXT_}share${NEXT_}doc"
     echol "lispdocdir = \$(docdir)${NEXT_}clisp"
     ;;
+  openbsd)
+    echol "docdir = \$(exec_prefix)${NEXT_}share${NEXT_}doc"
+    echol "lispdocdir = \$(docdir)${NEXT_}clisp"
+    echol "htmldir = \$(lispdocdir)"
+    echol "dvidir = \$(lispdocdir)"
+    ;;
 esac
 echol "libdir = \$(exec_prefix)${NEXT_}lib"
 echol "lisplibdir = \$(libdir)${NEXT_}clisp"
@@@@ -3188,14 +3194,14 @@@@ if [ $CROSS = false ] ; then
         echotab "if [ ! -d \$(DESTDIR)\$(htmldir) ] ; then mkdir \$(DESTDIR)\$(htmldir) ; fi"
         echotab "if [ ! -d \$(DESTDIR)\$(dvidir) ] ; then mkdir \$(DESTDIR)\$(dvidir) ; fi"
         ;;
-      netbsd)
+      netbsd | openbsd)
         echotab "if [ ! -d \$(DESTDIR)\$(lispdocdir) ] ; then mkdir \$(DESTDIR)\$(lispdocdir) ; fi"
         ;;
     esac
     echotab "if [ ! -d \$(DESTDIR)\$(docdir) ] ; then mkdir \$(DESTDIR)\$(docdir) ; fi"
     echotab "if [ ! -d \$(DESTDIR)\$(lispdocdir) ] ; then mkdir \$(DESTDIR)\$(lispdocdir) ; fi"
     case "$fsstnd" in
-      netbsd)
+      netbsd | openbsd)
         ;;
       *)
         echotab "if [ ! -d \$(DESTDIR)\$(lispdocdir)/doc ] ; then mkdir \$(DESTDIR)\$(lispdocdir)/doc ; fi"
@@@@ -3261,7 +3267,7 @@@@ if [ $CROSS = false ] ; then
           echotab "\$(INSTALL_DATA) clreadline.dvi \$(DESTDIR)\$(dvidir)/clreadline.dvi"
         fi
         ;;
-      netbsd)
+      netbsd | openbsd)
         echotab "if [ ! -d \$(DESTDIR)\$(lispdocdir) ] ; then mkdir \$(DESTDIR)\$(lispdocdir) ; fi"
         echotab "\$(INSTALL_DATA) clisp.html \$(DESTDIR)\$(lispdocdir)/clisp.html"
         if [ $TERMINAL = readline ] ; then
@@@@ -3280,6 +3286,10 @@@@ if [ $CROSS = false ] ; then
       netbsd)
         echotab "\$(INSTALL_DATA) \$(MANUALS)${manual_dvi} \$(DESTDIR)\$(lispdocdir)/"
         ;;
+      openbsd)
+        echotab "if [ ! -d \$(DESTDIR)\$(lispdocdir) ] ; then mkdir \$(DESTDIR)\$(lispdocdir) ; fi"
+        echotab "\$(INSTALL_DATA) \$(MANUALS)${manual_dvi} \$(DESTDIR)\$(lispdocdir)/"
+        ;;
       *)
         echotab "if [ ! -d \$(DESTDIR)\$(lispdocdir)/doc ] ; then mkdir \$(DESTDIR)\$(lispdocdir)/doc ; fi"
         echotab "\$(INSTALL_DATA) \$(MANUALS)${manual_dvi} \$(DESTDIR)\$(lispdocdir)/doc/"
@@@@ -3320,7 +3330,7 @@@@ if [ $CROSS = false ] ; then
           echotab "\$(RM) \$(DESTDIR)\$(dvidir)/clreadline.dvi"
         fi
         ;;
-      netbsd)
+      netbsd | openbsd)
         echotab "\$(RM) \$(DESTDIR)\$(lispdocdir)/clisp.html"
         if [ $TERMINAL = readline ] ; then
           echotab "\$(RM) \$(DESTDIR)\$(lispdocdir)/clreadline.html"
@@@@ -3329,7 +3339,7 @@@@ if [ $CROSS = false ] ; then
     esac
     echotab "for f in \$(READMES); do \$(RM) \$(DESTDIR)\$(lispdocdir)/\$\$f; done"
     case "$fsstnd" in
-      netbsd)
+      netbsd | openbsd)
         echotab "for f in \$(MANUALS)${manual_dvi}; do \$(RM) \$(DESTDIR)\$(lispdocdir)/\$\$f; done"
         ;;
       *)
@


1.4
log
@regen with update-patches
@
text
@d1 1
a1 1
$OpenBSD: patch-src_makemake_in,v 1.3 2001/03/31 19:20:09 naddy Exp $
@


1.3
log
@regen; sync libtool patches
@
text
@d1 4
a4 4
$OpenBSD$
--- src/makemake.in.orig	Thu Mar 15 17:28:34 2001
+++ src/makemake.in	Sat Mar 31 19:56:11 2001
@@@@ -1627,6 +1627,12 @@@@ case "$fsstnd" in
d17 1
a17 1
@@@@ -3129,14 +3135,14 @@@@ if [ $CROSS = false ] ; then
d34 1
a34 1
@@@@ -3202,7 +3208,7 @@@@ if [ $CROSS = false ] ; then
d43 1
a43 1
@@@@ -3221,6 +3227,10 @@@@ if [ $CROSS = false ] ; then
d54 1
a54 1
@@@@ -3261,7 +3271,7 @@@@ if [ $CROSS = false ] ; then
d63 1
a63 1
@@@@ -3270,7 +3280,7 @@@@ if [ $CROSS = false ] ; then
@


1.2
log
@- Update to 2.25.
- Pull COMMENT into Makefile.
- Switch to .bz2 distfile.
- New maintainer; ok jsmith@@mcs.drexel.edu.
- Doesn't build on powerpc either.
Partly submitted by Shell Hung <i@@shellhung.org>.
@
text
@d1 4
a4 3
--- src/makemake.in.orig	Fri Mar 16 00:28:34 2001
+++ src/makemake.in	Thu Mar 22 22:33:30 2001
@@@@ -1627,6 +1627,12 @@@@
d17 1
a17 1
@@@@ -3129,14 +3135,14 @@@@
d34 1
a34 1
@@@@ -3202,7 +3208,7 @@@@
d43 1
a43 1
@@@@ -3221,6 +3227,10 @@@@
d54 1
a54 1
@@@@ -3261,7 +3271,7 @@@@
d63 1
a63 1
@@@@ -3270,7 +3280,7 @@@@
@


1.1
log
@Initial revision
@
text
@d1 4
a4 5
$OpenBSD$
--- src/makemake.in.orig	Mon Mar  6 12:37:21 2000
+++ src/makemake.in	Tue Oct 10 02:20:33 2000
@@@@ -1626,6 +1626,12 @@@@ case "$fsstnd" in
     echol "docdir = \$(exec_prefix)${NEXT_}doc"
d7 1
a7 1
+  bsd)
d12 12
a23 14
+    ;;                                 
   suse)
     echol "docdir = \$(exec_prefix)${NEXT_}doc"
     echol "lispdocdir = \$(docdir)${NEXT_}packages${NEXT_}clisp"
@@@@ -1647,7 +1653,7 @@@@ if [ -n "$USE_GETTEXT" ] ; then
 fi
 echol "# The value of following variable is prepended to all the paths for"
 echol "# installation. This is useful when preparing a binary distribution."
-echol "install_root ="
+echol "install_root =${WRKINST}"
 echol
 echol     "# List of add-on modules:"
 echol     "# queens               the queens function as a separate module"
@@@@ -3136,7 +3142,6 @@@@ if [ $CROSS = false ] ; then
d25 11
a35 18
     echotab "if [ ! -d \$(install_root)\$(docdir) ] ; then mkdir \$(install_root)\$(docdir) ; fi"
     echotab "if [ ! -d \$(install_root)\$(lispdocdir) ] ; then mkdir \$(install_root)\$(lispdocdir) ; fi"
-    echotab "if [ ! -d \$(install_root)\$(lispdocdir)/doc ] ; then mkdir \$(install_root)\$(lispdocdir)/doc ; fi"
     echol
     echol "install-bin : lisp${LEXE} lispinit.mem clisp.c force"
     echotab "if [ ! -d \$(install_root)\$(prefix) ] ; then mkdir \$(install_root)\$(prefix) ; fi"
@@@@ -3198,9 +3203,8 @@@@ if [ $CROSS = false ] ; then
     echotab "if [ ! -d \$(install_root)\$(exec_prefix) ] ; then mkdir \$(install_root)\$(exec_prefix) ; fi"
     echotab "if [ ! -d \$(install_root)\$(docdir) ] ; then mkdir \$(install_root)\$(docdir) ; fi"
     echotab "if [ ! -d \$(install_root)\$(lispdocdir) ] ; then mkdir \$(install_root)\$(lispdocdir) ; fi"
-    echotab "if [ ! -d \$(install_root)\$(lispdocdir)/doc ] ; then mkdir \$(install_root)\$(lispdocdir)/doc ; fi"
     echotab "\$(INSTALL_DATA) \$(READMES) \$(install_root)\$(lispdocdir)/"
-    echotab "\$(INSTALL_DATA) \$(MANUALS)${manual_dvi} \$(install_root)\$(lispdocdir)/doc/"
+    echotab "\$(INSTALL_DATA) \$(MANUALS)${manual_dvi} \$(install_root)\$(lispdocdir)/"
     echol
     echol
     echol "installcheck : ${TESTSDIR} force"
@@@@ -3238,7 +3242,7 @@@@ if [ $CROSS = false ] ; then
d37 26
d64 7
a70 6
     echotab "for f in \$(READMES); do \$(RM) \$(install_root)\$(lispdocdir)/\$\$f; done"
-    echotab "for f in \$(MANUALS)${manual_dvi}; do \$(RM) \$(install_root)\$(lispdocdir)/doc/\$\$f; done"
+    echotab "for f in \$(MANUALS)${manual_dvi}; do \$(RM) \$(install_root)\$(lispdocdir)/\$\$f; done"
     echol
     echol
   fi
@


1.1.1.1
log
@Initial import of clisp-2000-03-06.

CLISP is a Common Lisp implementation by Bruno Haible of Karlsruhe
University and Michael Stoll of Munich University, both in Germany.
It mostly supports the Lisp described in the ANSI Common Lisp
standard.
@
text
@@
