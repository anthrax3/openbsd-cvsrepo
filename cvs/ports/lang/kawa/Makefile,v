head	1.13;
access;
symbols
	OPENBSD_6_1:1.10.0.6
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.10.0.4
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	jasper_20122112:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2017.09.18.11.48.57;	author jasper;	state Exp;
branches;
next	1.12;
commitid	Fb4VsVZwc8SzmlNg;

1.12
date	2017.08.31.06.33.05;	author jasper;	state Exp;
branches;
next	1.11;
commitid	HPbMzY43xtD1WanL;

1.11
date	2017.04.21.13.27.46;	author kurt;	state Exp;
branches;
next	1.10;
commitid	lfz5IYSiUvvvq1Ub;

1.10
date	2015.12.06.20.01.33;	author jasper;	state Exp;
branches;
next	1.9;
commitid	iH1f3Wzclw7RT1fw;

1.9
date	2015.05.11.07.39.19;	author jasper;	state Exp;
branches;
next	1.8;
commitid	LgsaArknyWYUkrEz;

1.8
date	2015.02.17.20.19.05;	author naddy;	state Exp;
branches;
next	1.7;
commitid	uPuOLCvx6O3pyShi;

1.7
date	2014.05.07.15.42.16;	author kurt;	state Exp;
branches;
next	1.6;

1.6
date	2013.11.25.14.16.23;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2013.11.09.23.19.03;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.11.20.27;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2013.01.16.11.17.18;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.12.21.09.42.28;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2012.12.21.08.42.36;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.12.21.08.42.36;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.13
log
@use ${LOCALBASE} as $deity intended
@
text
@# $OpenBSD: Makefile,v 1.12 2017/08/31 06:33:05 jasper Exp $

BROKEN-i386= java

COMMENT=		Scheme and language framework for the Java platform

DISTNAME=		kawa-2.4
CATEGORIES=		lang java

HOMEPAGE=		https://www.gnu.org/software/kawa/

# MIT
PERMIT_PACKAGE_CDROM=   Yes

MASTER_SITES=		${MASTER_SITE_GNU:=kawa/}

MODULES=		java
MODJAVA_VER=		1.8+

TEST_DEPENDS=		${RUN_DEPENDS}

USE_GMAKE=		Yes

WANTLIB+=		c ncurses readline
BUILD_DEPENDS=		print/texinfo \
			devel/autoconf/2.69 \
			devel/automake/1.15
			
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--enable-kawa-frontend
CONFIGURE_ENV+=		AUTOMAKE=${LOCALBASE}/bin/automake-1.15 \
			AUTOCONF=${LOCALBASE}/bin/autoconf-2.69


MAKE_FLAGS=		JAVAC=${JAVA_HOME}/bin/javac \
			JAVA=${JAVA_HOME}/bin/java \
			MAKEINFO=${LOCALBASE}/bin/gmakeinfo \
			AUTOCONF_VERSION=2.69
			
.include <bsd.port.arch.mk>
# fails with this on i386, fails without this on amd64, unsure about
# other arch but lp64 is probably not a bad indicator.
.if ${PROPERTIES:Mlp64}
MAKE_ENV+=		SLIB_JAVAFLAGS=-Xmx1200M
.else
MAKE_ENV+=		SLIB_JAVAFLAGS=-Xmx800M
.endif

# use UTF-8 encoding to avoid following errors:
# unmappable character for encoding ASCII
MAKE_ENV+=		LANG=en_US.UTF-8

TEST_FLAGS =		DIFF=diff \
			PATH=${PATH}:${JAVA_HOME}/bin

pre-patch:
	find ${WRKSRC} -type f | \
		xargs sed -i 's,^JAR =.*,JAR = ${JAVA_HOME}/bin/jar,g'

.include <bsd.port.mk>
@


1.12
log
@update to kawa-2.4

from Timo Myyra
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2017/04/21 13:27:46 kurt Exp $
d31 2
a32 2
CONFIGURE_ENV+=		AUTOMAKE=/usr/local/bin/automake-1.15 \
			AUTOCONF=/usr/local/bin/autoconf-2.69
d37 1
a37 1
			MAKEINFO=/usr/local/bin/gmakeinfo \
@


1.11
log
@- disconnect devel/jdk/1.7 from the build
- adjust java.port.mk so all 1.7 and lower ports now build with 1.8
- bump revision on affected ports
okay sthen@@, ian@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/12/06 20:01:33 jasper Exp $
d7 1
a7 1
DISTNAME=		kawa-2.1
a8 1
REVISION=		0
d18 1
a18 1
MODJAVA_VER=		1.7+
d20 1
a20 1
TEST_DEPENDS=		${BUILD_DEPENDS}
d24 5
a28 2
WANTLIB += c ncurses readline

d31 3
a33 2
CONFIGURE_ENV=		JAVAC=${JAVA_HOME}/bin/javac \
			JAVA=${JAVA_HOME}/bin/java
d35 5
d44 1
a44 1
MAKE_ENV=		SLIB_JAVAFLAGS=-Xmx1200M
d46 1
a46 1
MAKE_ENV=		SLIB_JAVAFLAGS=-Xmx800M
d49 7
d58 1
a58 1
		xargs perl -pi -e 's,^JAR =.*,JAR = ${JAVA_HOME}/bin/jar,g'
@


1.10
log
@update to kawa-2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/05/11 07:39:19 jasper Exp $
d9 1
@


1.9
log
@- update to kawa-2.0, most important change being support for R7RS
http://www.gnu.org/software/kawa/news.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/02/17 20:19:05 naddy Exp $
d7 1
a7 1
DISTNAME=		kawa-2.0
d19 2
@


1.8
log
@don't preformat man pages and drop USE_GROFF
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/05/07 15:42:16 kurt Exp $
d7 1
a7 2
DISTNAME=		kawa-1.13
REVISION=		3
d18 1
a18 1
MODJAVA_VER=		1.6+
@


1.7
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/11/25 14:16:23 sthen Exp $
d8 1
a8 1
REVISION=		2
a21 1
USE_GROFF=		Yes
@


1.6
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/11/09 23:19:03 naddy Exp $
d8 1
a8 1
REVISION=		1
@


1.5
log
@move http://www.gnu.org to https
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:20:27 espie Exp $
a19 2

VMEM_WARNING=		Yes
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/01/16 11:17:18 sthen Exp $
d6 1
a6 1
REVISION=		0
d9 1
a9 1
HOMEPAGE=		http://www.gnu.org/software/kawa/
@


1.3
log
@Previous setting of -Xmx to java was good for amd64, but not i386.
Change to passing the flag in via the environment and use different
values for different arch. Definitely builds on amd64/i386 now. ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/12/21 09:42:28 jasper Exp $
a12 3
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
@


1.2
log
@- enable readline support on the REPL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/12/21 08:42:36 jasper Exp $
d33 9
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d27 2
d30 1
@


1.1.1.1
log
@import kawa-1.13

Kawa is a programming language for the Java platform. It is an
implementation of Scheme, which, is in the Lisp family of programming
languages. Kawa has many useful features, including convenient
integration with Java. It can be used as a "scripting language", but
includes a compiler and all the benefits of a "real" programming
language, including optional static typing, so Kawa programs can be as
efficient as Java.  Kawa is also a useful framework for implementing
other programming languages on the Java platform. It has has many useful
utility classes.

ok aja@@
@
text
@@
