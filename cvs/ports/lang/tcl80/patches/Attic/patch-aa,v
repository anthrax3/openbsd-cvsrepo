head	1.11;
access;
symbols
	OPENBSD_2_6:1.8.0.4
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.4.0.4
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	tcl_8_0:1.1.1.1
	niklas:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2000.03.27.02.01.37;	author kevlo;	state dead;
branches;
next	1.10;

1.10
date	2000.01.14.04.31.48;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2000.01.06.03.15.25;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.03.19.20.38.21;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.01.11.01.21.18;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	99.01.01.23.16.25;	author todd;	state Exp;
branches;
next	1.5;

1.5
date	98.11.03.15.43.16;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	98.04.16.17.01.44;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.02.11.07.05.48;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.01.29.05.35.11;	author don;	state Exp;
branches;
next	1.1;

1.1
date	97.12.02.16.15.24;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.02.16.15.24;	author niklas;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Bye, bye. This is integraded with tcl port.
@
text
@--- configure.orig	Tue Mar  9 01:51:26 1999
+++ configure	Thu Jan 13 18:03:25 2000
@@@@ -4095,16 +4095,21 @@@@
 fi
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
-  
-	    SHLIB_CFLAGS="-fpic"
-	    SHLIB_LD="ld -Bshareable -x"
+
+	    case `machine` in
+	    sparc)
+		SHLIB_CFLAGS="-fPIC";;
+	    *)
+		SHLIB_CFLAGS="-fpic";;
+	    esac
+	    SHLIB_LD="ld -Bshareable -Bforcearchive -x"
 	    SHLIB_LD_LIBS=""
 	    SHLIB_SUFFIX=".so"
 	    DL_OBJS="tclLoadDl.o"
 	    DL_LIBS=""
 	    LD_FLAGS=""
 	    LD_SEARCH_FLAGS=""
-	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.5'
 	
 else
   echo "$ac_t""no" 1>&6
@@@@ -4656,10 +4661,9 @@@@
     TCL_LD_SEARCH_FLAGS="${LD_SEARCH_FLAGS}"
     eval "TCL_LIB_FILE=libtcl${TCL_SHARED_LIB_SUFFIX}"
     if test "x$DL_OBJS" = "xtclLoadAout.o"; then
-	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}"
+	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}; \${RANLIB} \${TCL_LIB_FILE}"
     else
 	MAKE_LIB="\${SHLIB_LD} -o \${TCL_LIB_FILE} \${OBJS} ${SHLIB_LD_LIBS}"
-	RANLIB=":"
     fi
 else
     TCL_SHARED_BUILD=0
@


1.10
log
@fix usage of ranlib
--
PR#: 1057
@
text
@@


1.9
log
@use ld flag -Bforcearchive when making the shared library
@
text
@d2 1
a2 1
+++ configure	Wed Jan  5 21:54:00 2000
d29 12
@


1.8
log
@upgrade to tcl 8.0.5
@
text
@d1 3
a3 3
--- configure.orig	Fri Mar 19 14:20:39 1999
+++ configure	Fri Mar 19 14:23:25 1999
@@@@ -4095,8 +4095,13 @@@@
d9 1
d17 1
a17 1
 	    SHLIB_LD="ld -Bshareable -x"
d20 1
a20 1
@@@@ -4104,7 +4109,7 @@@@
@


1.7
log
@update to tcl 8.0.4
@
text
@d1 3
a3 3
--- configure.orig	Wed Nov 18 14:54:26 1998
+++ configure	Sun Jan 10 16:34:17 1999
@@@@ -4063,8 +4063,13 @@@@
d14 1
a14 1
+	    	SHLIB_CFLAGS="-fpic";;
d19 1
a19 1
@@@@ -4072,7 +4077,7 @@@@
d24 1
a24 1
+	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.4'
@


1.6
log
@o grammer correction from Corey Brenner <coreybrenner@@hotmail.com>
o update offsets for new tcl version
@
text
@d1 3
a3 3
--- ./unix/configure.orig	Mon Aug 31 15:57:20 1998
+++ ./unix/configure	Fri Jan  1 16:46:54 1999
@@@@ -4049,8 +4049,13 @@@@
d19 1
a19 1
@@@@ -4058,7 +4063,7 @@@@
d24 1
a24 1
+	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.3'
@


1.5
log
@Updated to 8.0.3, new mastersite
@
text
@d1 2
a2 2
--- configure.orig	Mon Aug 31 22:57:20 1998
+++ configure	Tue Nov  3 16:26:35 1998
@


1.4
log
@ranlib libtcl80.a when building both shared and static libs.
patch from Matthieu Herrb <matthieu@@laas.fr>, PR 438.
@
text
@d1 3
a3 3
--- configure.orig	Tue Nov 25 08:31:42 1997
+++ configure	Wed Apr 15 19:26:53 1998
@@@@ -3780,8 +3780,13 @@@@
d19 1
a19 1
@@@@ -3789,7 +3794,7 @@@@
d23 2
a24 2
-	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
+	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.2'
@


1.3
log
@Use -fPIC for sparc, needed by tk which uses tcl config.  Split patches
into two files, one for each file patched
@
text
@d1 27
a27 43
*** configure.orig	Tue Nov 25 08:31:42 1997
--- configure	Tue Feb 10 18:58:52 1998
***************
*** 3780,3787 ****
  fi
  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
!   
! 	    SHLIB_CFLAGS="-fpic"
  	    SHLIB_LD="ld -Bshareable -x"
  	    SHLIB_LD_LIBS=""
  	    SHLIB_SUFFIX=".so"
--- 3780,3792 ----
  fi
  if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
    echo "$ac_t""yes" 1>&6
! 
! 	    case `machine` in
! 	    sparc)
! 		SHLIB_CFLAGS="-fPIC";;
! 	    *)
! 	    	SHLIB_CFLAGS="-fpic";;
! 	    esac
  	    SHLIB_LD="ld -Bshareable -x"
  	    SHLIB_LD_LIBS=""
  	    SHLIB_SUFFIX=".so"
***************
*** 3789,3795 ****
  	    DL_LIBS=""
  	    LD_FLAGS=""
  	    LD_SEARCH_FLAGS=""
! 	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
  	
  else
    echo "$ac_t""no" 1>&6
--- 3794,3800 ----
  	    DL_LIBS=""
  	    LD_FLAGS=""
  	    LD_SEARCH_FLAGS=""
! 	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.2'
  	
  else
    echo "$ac_t""no" 1>&6
@


1.2
log
@Don't gzip manpages
@
text
@d1 26
a26 2
*** configure.orig	Tue Nov 25 10:31:42 1997
--- configure	Wed Jan 28 17:23:10 1998
d36 1
a36 1
--- 3789,3795 ----
a43 224
*** Makefile.in.orig	Tue Nov 25 10:31:41 1997
--- Makefile.in	Wed Jan 28 17:27:32 1998
***************
*** 55,61 ****
  BIN_INSTALL_DIR =	$(INSTALL_ROOT)$(exec_prefix)/bin
  
  # Directory in which to install the include file tcl.h:
! INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/include
  
  # Top-level directory in which to install manual entries:
  MAN_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/man
--- 55,63 ----
  BIN_INSTALL_DIR =	$(INSTALL_ROOT)$(exec_prefix)/bin
  
  # Directory in which to install the include file tcl.h:
! INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/include/tcl$(VERSION)
! GENERIC_INCLUDE_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/include/tcl$(VERSION)/generic
! UNIX_INCLUDE_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/include/tcl$(VERSION)/unix
  
  # Top-level directory in which to install manual entries:
  MAN_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/man
***************
*** 133,139 ****
  # "install" around;  better to use the install-sh script that comes
  # with the distribution, which is slower but guaranteed to work.
  
! INSTALL =		@@srcdir@@/install-sh -c
  INSTALL_PROGRAM =	${INSTALL}
  INSTALL_DATA =		${INSTALL} -m 644
  
--- 135,141 ----
  # "install" around;  better to use the install-sh script that comes
  # with the distribution, which is slower but guaranteed to work.
  
! INSTALL =		install -c
  INSTALL_PROGRAM =	${INSTALL}
  INSTALL_DATA =		${INSTALL} -m 644
  
***************
*** 310,316 ****
  
  SRCS = $(GENERIC_SRCS) $(UNIX_SRCS)
  
! all: ${TCL_LIB_FILE} tclsh
  
  # The following target is configured by autoconf to generate either
  # a shared library or non-shared library for Tcl.
--- 312,318 ----
  
  SRCS = $(GENERIC_SRCS) $(UNIX_SRCS)
  
! all: ${TCL_LIB_FILE} libtcl80.a tclsh
  
  # The following target is configured by autoconf to generate either
  # a shared library or non-shared library for Tcl.
***************
*** 319,324 ****
--- 321,331 ----
  	@@MAKE_LIB@@
  	$(RANLIB) ${TCL_LIB_FILE}
  
+ libtcl80.a: ${OBJS}
+ 	rm -f libtcl80.a
+ 	ar cr libtcl80.a ${OBJS}	
+ 	$(RANLIB) libtcl80.a
+ 
  # Make target which outputs the list of the .o contained in the Tcl lib
  # usefull to build a single big shared library containing Tcl and other
  # extensions.  used for the Tcl Plugin.  -- dl
***************
*** 410,416 ****
  # some ranlibs write to current directory, and this might not always be
  # possible (e.g. if installing as root).
  
! install-binaries: $(TCL_LIB_FILE) tclsh
  	@@for i in $(LIB_INSTALL_DIR) $(BIN_INSTALL_DIR) ; \
  	    do \
  	    if [ ! -d $$i ] ; then \
--- 417,423 ----
  # some ranlibs write to current directory, and this might not always be
  # possible (e.g. if installing as root).
  
! install-binaries: $(TCL_LIB_FILE) libtcl80.a tclsh
  	@@for i in $(LIB_INSTALL_DIR) $(BIN_INSTALL_DIR) ; \
  	    do \
  	    if [ ! -d $$i ] ; then \
***************
*** 424,441 ****
  	@@$(INSTALL_DATA) $(TCL_LIB_FILE) $(LIB_INSTALL_DIR)/$(TCL_LIB_FILE)
  	@@(cd $(LIB_INSTALL_DIR); $(RANLIB) $(TCL_LIB_FILE))
  	@@chmod 555 $(LIB_INSTALL_DIR)/$(TCL_LIB_FILE)
  	@@echo "Installing tclsh"
  	@@$(INSTALL_PROGRAM) tclsh $(BIN_INSTALL_DIR)/tclsh$(VERSION)
  	@@echo "Installing tclConfig.sh"
! 	@@$(INSTALL_DATA) tclConfig.sh $(LIB_INSTALL_DIR)/tclConfig.sh
  
  install-libraries:
! 	@@for i in $(INSTALL_ROOT)$(prefix)/lib $(INCLUDE_INSTALL_DIR) \
! 		$(SCRIPT_INSTALL_DIR); \
  	    do \
  	    if [ ! -d $$i ] ; then \
  		echo "Making directory $$i"; \
! 		mkdir $$i; \
  		chmod 755 $$i; \
  		else true; \
  		fi; \
--- 431,453 ----
  	@@$(INSTALL_DATA) $(TCL_LIB_FILE) $(LIB_INSTALL_DIR)/$(TCL_LIB_FILE)
  	@@(cd $(LIB_INSTALL_DIR); $(RANLIB) $(TCL_LIB_FILE))
  	@@chmod 555 $(LIB_INSTALL_DIR)/$(TCL_LIB_FILE)
+ 	@@echo "Installing libtcl80.a"
+ 	@@$(INSTALL_DATA) libtcl80.a $(LIB_INSTALL_DIR)/libtcl80.a
+ 	@@(cd $(LIB_INSTALL_DIR); $(RANLIB) libtcl80.a)
+ 	@@chmod 555 $(LIB_INSTALL_DIR)/libtcl80.a
  	@@echo "Installing tclsh"
  	@@$(INSTALL_PROGRAM) tclsh $(BIN_INSTALL_DIR)/tclsh$(VERSION)
  	@@echo "Installing tclConfig.sh"
! 	@@mkdir -p $(SCRIPT_INSTALL_DIR)
! 	@@$(INSTALL_DATA) tclConfig.sh $(SCRIPT_INSTALL_DIR)/tclConfig.sh
  
  install-libraries:
! 	@@for i in $(INSTALL_ROOT)$(prefix)/lib $(GENERIC_INCLUDE_INSTALL_DIR) \
! 		$(UNIX_INCLUDE_INSTALL_DIR) $(SCRIPT_INSTALL_DIR); \
  	    do \
  	    if [ ! -d $$i ] ; then \
  		echo "Making directory $$i"; \
! 		mkdir -p $$i; \
  		chmod 755 $$i; \
  		else true; \
  		fi; \
***************
*** 449,456 ****
  		else true; \
  		fi; \
  	    done;
! 	@@echo "Installing tcl.h"
! 	@@$(INSTALL_DATA) $(GENERIC_DIR)/tcl.h $(INCLUDE_INSTALL_DIR)/tcl.h
  	@@for i in $(TOP_DIR)/library/*.tcl $(TOP_DIR)/library/tclIndex $(UNIX_DIR)/tclAppInit.c $(UNIX_DIR)/ldAix; \
  	    do \
  	    echo "Installing $$i"; \
--- 461,475 ----
  		else true; \
  		fi; \
  	    done;
! 	@@echo "Installing libraries, tcl.h and other headers"
! 	@@for i in $(GENERIC_DIR)/*.h ; \
! 	    do \
! 	    echo "Installing $$i"; \
! 	    $(INSTALL_DATA) $$i $(GENERIC_INCLUDE_INSTALL_DIR); \
! 	    done;
! 	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tcl.h $(INCLUDE_INSTALL_DIR)/tcl.h
! 	@@echo "Installing $(TOP_DIR)unix/tclUnixPort.h"
! 	@@$(INSTALL_DATA) $(TOP_DIR)/unix/tclUnixPort.h $(UNIX_INCLUDE_INSTALL_DIR)
  	@@for i in $(TOP_DIR)/library/*.tcl $(TOP_DIR)/library/tclIndex $(UNIX_DIR)/tclAppInit.c $(UNIX_DIR)/ldAix; \
  	    do \
  	    echo "Installing $$i"; \
***************
*** 478,484 ****
  	@@cd $(TOP_DIR)/doc; for i in *.1; \
  	    do \
  	    echo "Installing doc/$$i"; \
! 	    rm -f $(MAN1_INSTALL_DIR)/$$i; \
  	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
  		    $$i > $(MAN1_INSTALL_DIR)/$$i; \
  	    chmod 444 $(MAN1_INSTALL_DIR)/$$i; \
--- 497,503 ----
  	@@cd $(TOP_DIR)/doc; for i in *.1; \
  	    do \
  	    echo "Installing doc/$$i"; \
! 	    rm -f $(MAN1_INSTALL_DIR)/$$i $(MAN1_INSTALL_DIR)/$$i; \
  	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
  		    $$i > $(MAN1_INSTALL_DIR)/$$i; \
  	    chmod 444 $(MAN1_INSTALL_DIR)/$$i; \
***************
*** 487,493 ****
  	@@cd $(TOP_DIR)/doc; for i in *.3; \
  	    do \
  	    echo "Installing doc/$$i"; \
! 	    rm -f $(MAN3_INSTALL_DIR)/$$i; \
  	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
  		    $$i > $(MAN3_INSTALL_DIR)/$$i; \
  	    chmod 444 $(MAN3_INSTALL_DIR)/$$i; \
--- 506,512 ----
  	@@cd $(TOP_DIR)/doc; for i in *.3; \
  	    do \
  	    echo "Installing doc/$$i"; \
! 	    rm -f $(MAN3_INSTALL_DIR)/$$i $(MAN3_INSTALL_DIR)/$$i; \
  	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
  		    $$i > $(MAN3_INSTALL_DIR)/$$i; \
  	    chmod 444 $(MAN3_INSTALL_DIR)/$$i; \
***************
*** 496,507 ****
  	@@cd $(TOP_DIR)/doc; for i in *.n; \
  	    do \
  	    echo "Installing doc/$$i"; \
! 	    rm -f $(MANN_INSTALL_DIR)/$$i; \
  	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
  		    $$i > $(MANN_INSTALL_DIR)/$$i; \
  	    chmod 444 $(MANN_INSTALL_DIR)/$$i; \
  	    done;
  	$(UNIX_DIR)/mkLinks $(MANN_INSTALL_DIR)
  
  Makefile: $(UNIX_DIR)/Makefile.in
  	$(SHELL) config.status
--- 515,533 ----
  	@@cd $(TOP_DIR)/doc; for i in *.n; \
  	    do \
  	    echo "Installing doc/$$i"; \
! 	    rm -f $(MANN_INSTALL_DIR)/$$i $(MANN_INSTALL_DIR)/$$i; \
  	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
  		    $$i > $(MANN_INSTALL_DIR)/$$i; \
  	    chmod 444 $(MANN_INSTALL_DIR)/$$i; \
  	    done;
  	$(UNIX_DIR)/mkLinks $(MANN_INSTALL_DIR)
+ 	@@echo "**********"
+ 	@@echo "IMPORTANT:"
+ 	@@echo "**********"
+ 	@@echo "tclConfig.sh in $(SCRIPT_INSTALL_DIR)/tclConfig.sh"
+ 	@@echo "tcl.h        in $(INCLUDE_INSTALL_DIR)/tcl.h"
+ 	@@echo "There are NOT default place, but good place to avoid"
+ 	@@echo "conflicting with another version of Tcl/Tks."
  
  Makefile: $(UNIX_DIR)/Makefile.in
  	$(SHELL) config.status
@


1.1
log
@Initial revision
@
text
@d1 243
a243 155
--- configure	Fri Nov  7 09:28:05 1997
+++ configure	Fri Nov 21 23:36:13 1997
@@@@ -3789,7 +3789,7 @@@@
 	    DL_LIBS=""
 	    LD_FLAGS=""
 	    LD_SEARCH_FLAGS=""
-	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
+	    TCL_SHARED_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.2'
 	
 else
   echo "$ac_t""no" 1>&6
+++ Makefile.in	Wed Oct  1 09:51:59 1997
@@@@ -55,7 +55,9 @@@@
 BIN_INSTALL_DIR =	$(INSTALL_ROOT)$(exec_prefix)/bin
 
 # Directory in which to install the include file tcl.h:
-INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/include
+INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/include/tcl$(VERSION)
+GENERIC_INCLUDE_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/include/tcl$(VERSION)/generic
+UNIX_INCLUDE_INSTALL_DIR = $(INSTALL_ROOT)$(prefix)/include/tcl$(VERSION)/unix
 
 # Top-level directory in which to install manual entries:
 MAN_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/man
@@@@ -138,7 +140,7 @@@@
 # "install" around;  better to use the install-sh script that comes
 # with the distribution, which is slower but guaranteed to work.
 
-INSTALL =		@@srcdir@@/install-sh -c
+INSTALL =		install -c
 INSTALL_PROGRAM =	${INSTALL}
 INSTALL_DATA =		${INSTALL} -m 644
 
@@@@ -315,7 +317,7 @@@@
 
 SRCS = $(GENERIC_SRCS) $(UNIX_SRCS)
 
-all: ${TCL_LIB_FILE} tclsh
+all: ${TCL_LIB_FILE} libtcl80.a tclsh
 
 # The following target is configured by autoconf to generate either
 # a shared library or non-shared library for Tcl.
@@@@ -324,6 +326,11 @@@@
 	@@MAKE_LIB@@
 	$(RANLIB) ${TCL_LIB_FILE}
 
+libtcl80.a: ${OBJS}
+	rm -f libtcl80.a
+	ar cr libtcl80.a ${OBJS}	
+	$(RANLIB) libtcl80.a
+
 # Make target which outputs the list of the .o contained in the Tcl lib
 # usefull to build a single big shared library containing Tcl and other
 # extensions.  used for the Tcl Plugin.  -- dl
@@@@ -415,7 +422,7 @@@@
 # some ranlibs write to current directory, and this might not always be
 # possible (e.g. if installing as root).
 
-install-binaries: $(TCL_LIB_FILE) tclsh
+install-binaries: $(TCL_LIB_FILE) libtcl80.a tclsh
 	@@for i in $(LIB_INSTALL_DIR) $(BIN_INSTALL_DIR) ; \
 	    do \
 	    if [ ! -d $$i ] ; then \
@@@@ -429,18 +436,23 @@@@
 	@@$(INSTALL_DATA) $(TCL_LIB_FILE) $(LIB_INSTALL_DIR)/$(TCL_LIB_FILE)
 	@@(cd $(LIB_INSTALL_DIR); $(RANLIB) $(TCL_LIB_FILE))
 	@@chmod 555 $(LIB_INSTALL_DIR)/$(TCL_LIB_FILE)
+	@@echo "Installing libtcl80.a"
+	@@$(INSTALL_DATA) libtcl80.a $(LIB_INSTALL_DIR)/libtcl80.a
+	@@(cd $(LIB_INSTALL_DIR); $(RANLIB) libtcl80.a)
+	@@chmod 555 $(LIB_INSTALL_DIR)/libtcl80.a
 	@@echo "Installing tclsh"
 	@@$(INSTALL_PROGRAM) tclsh $(BIN_INSTALL_DIR)/tclsh$(VERSION)
 	@@echo "Installing tclConfig.sh"
-	@@$(INSTALL_DATA) tclConfig.sh $(LIB_INSTALL_DIR)/tclConfig.sh
+	@@mkdir -p $(SCRIPT_INSTALL_DIR)
+	@@$(INSTALL_DATA) tclConfig.sh $(SCRIPT_INSTALL_DIR)/tclConfig.sh
 
 install-libraries:
-	@@for i in $(INSTALL_ROOT)$(prefix)/lib $(INCLUDE_INSTALL_DIR) \
-		$(SCRIPT_INSTALL_DIR); \
+	@@for i in $(INSTALL_ROOT)$(prefix)/lib $(GENERIC_INCLUDE_INSTALL_DIR) \
+		$(UNIX_INCLUDE_INSTALL_DIR) $(SCRIPT_INSTALL_DIR); \
 	    do \
 	    if [ ! -d $$i ] ; then \
 		echo "Making directory $$i"; \
-		mkdir $$i; \
+		mkdir -p $$i; \
 		chmod 755 $$i; \
 		else true; \
 		fi; \
@@@@ -454,8 +466,15 @@@@
 		else true; \
 		fi; \
 	    done;
-	@@echo "Installing tcl.h"
-	@@$(INSTALL_DATA) $(GENERIC_DIR)/tcl.h $(INCLUDE_INSTALL_DIR)/tcl.h
+	@@echo "Installing libraries, tcl.h and other headers"
+	@@for i in $(GENERIC_DIR)/*.h ; \
+	    do \
+	    echo "Installing $$i"; \
+	    $(INSTALL_DATA) $$i $(GENERIC_INCLUDE_INSTALL_DIR); \
+	    done;
+	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tcl.h $(INCLUDE_INSTALL_DIR)/tcl.h
+	@@echo "Installing $(TOP_DIR)unix/tclUnixPort.h"
+	@@$(INSTALL_DATA) $(TOP_DIR)/unix/tclUnixPort.h $(UNIX_INCLUDE_INSTALL_DIR)
 	@@for i in $(TOP_DIR)/library/*.tcl $(TOP_DIR)/library/tclIndex $(UNIX_DIR)/tclAppInit.c $(UNIX_DIR)/ldAix; \
 	    do \
 	    echo "Installing $$i"; \
@@@@ -483,30 +502,37 @@@@
 	@@cd $(TOP_DIR)/doc; for i in *.1; \
 	    do \
 	    echo "Installing doc/$$i"; \
-	    rm -f $(MAN1_INSTALL_DIR)/$$i; \
+	    rm -f $(MAN1_INSTALL_DIR)/$$i $(MAN1_INSTALL_DIR)/$$i.gz ; \
 	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
-		    $$i > $(MAN1_INSTALL_DIR)/$$i; \
-	    chmod 444 $(MAN1_INSTALL_DIR)/$$i; \
+		    $$i | gzip -c > $(MAN1_INSTALL_DIR)/$$i.gz; \
+	    chmod 444 $(MAN1_INSTALL_DIR)/$$i.gz; \
 	    done;
 	$(UNIX_DIR)/mkLinks $(MAN1_INSTALL_DIR)
 	@@cd $(TOP_DIR)/doc; for i in *.3; \
 	    do \
 	    echo "Installing doc/$$i"; \
-	    rm -f $(MAN3_INSTALL_DIR)/$$i; \
+	    rm -f $(MAN3_INSTALL_DIR)/$$i $(MAN3_INSTALL_DIR)/$$i.gz ; \
 	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
-		    $$i > $(MAN3_INSTALL_DIR)/$$i; \
-	    chmod 444 $(MAN3_INSTALL_DIR)/$$i; \
+		    $$i | gzip -c > $(MAN3_INSTALL_DIR)/$$i.gz; \
+	    chmod 444 $(MAN3_INSTALL_DIR)/$$i.gz; \
 	    done;
 	$(UNIX_DIR)/mkLinks $(MAN3_INSTALL_DIR)
 	@@cd $(TOP_DIR)/doc; for i in *.n; \
 	    do \
 	    echo "Installing doc/$$i"; \
-	    rm -f $(MANN_INSTALL_DIR)/$$i; \
+	    rm -f $(MANN_INSTALL_DIR)/$$i $(MANN_INSTALL_DIR)/$$i.gz; \
 	    sed -e '/man\.macros/r man.macros' -e '/man\.macros/d' \
-		    $$i > $(MANN_INSTALL_DIR)/$$i; \
-	    chmod 444 $(MANN_INSTALL_DIR)/$$i; \
+		    $$i | gzip -c > $(MANN_INSTALL_DIR)/$$i.gz; \
+	    chmod 444 $(MANN_INSTALL_DIR)/$$i.gz; \
 	    done;
 	$(UNIX_DIR)/mkLinks $(MANN_INSTALL_DIR)
+	@@echo "**********"
+	@@echo "IMPORTANT:"
+	@@echo "**********"
+	@@echo "tclConfig.sh in $(SCRIPT_INSTALL_DIR)/tclConfig.sh"
+	@@echo "tcl.h        in $(INCLUDE_INSTALL_DIR)/tcl.h"
+	@@echo "There are NOT default place, but good place to avoid"
+	@@echo "conflicting with another version of Tcl/Tks."
 
 Makefile: $(UNIX_DIR)/Makefile.in
 	$(SHELL) config.status
@


1.1.1.1
log
@TCL 8.0
@
text
@@
