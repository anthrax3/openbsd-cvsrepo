head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.04.09.18.27.19;	author pascal;	state dead;
branches;
next	1.1;
commitid	rhQzQaDb0TDC8Eo1;

1.1
date	2014.01.26.11.38.46;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to parrot 7.2.0.  Also builds fine for jasper@@.
@
text
@$OpenBSD: patch-config_auto_libffi_test_c_in,v 1.1 2014/01/26 11:38:46 pascal Exp $
--- config/auto/libffi/test_c.in.orig	Sun Jan 26 02:03:26 2014
+++ config/auto/libffi/test_c.in	Sun Jan 26 02:03:35 2014
@@@@ -13,7 +13,7 @@@@ int main() {
     ffi_type *args[1];
     void *values[1];
     char *s;
-    int rc;
+    ffi_arg rc;
 
     /* Initialize the argument info vectors */
     args[0] = &ffi_type_pointer;
@


1.1
log
@ffi_call()'s third argument needs to point to a storage of sizeof(ffi_args).
Otherwise this test will generate a stack overflow, silently disabling libffi
support.

Found with -fstack-protector-strong, fixed by martynas@@, thanks!  Bumping
REVISION because there are already packages with strong stack protection
enabled out there.
@
text
@d1 1
a1 1
$OpenBSD$
@

