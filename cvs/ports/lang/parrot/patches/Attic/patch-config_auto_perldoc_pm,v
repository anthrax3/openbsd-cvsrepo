head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2011.05.22.20.22.08;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2011.03.08.20.12.15;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to parrot 3.3.0, from maintainer Pascal Stumpf.
Use ${V} in PLIST to avoid churn on next update.
Tested on amd64/ppc by myself.
@
text
@$OpenBSD: patch-config_auto_perldoc_pm,v 1.1 2011/03/08 20:12:15 landry Exp $
--- config/auto/perldoc.pm.orig	Mon Jan 10 04:13:20 2011
+++ config/auto/perldoc.pm	Sun Mar  6 21:11:19 2011
@@@@ -38,7 +38,7 @@@@ sub runstep {
     my $slash = $conf->data->get('slash');
     my $cmd = $conf->data->get('scriptdirexp_provisional') . $slash . q{perldoc};
     my ( $fh, $filename ) = tempfile( UNLINK => 1 );
-    my $content = capture_output("$cmd -ud $filename perldoc") || undef;
+    my $content = capture_output("$cmd -u perldoc > $filename") || '';
 
     return 1 unless defined( $self->_initial_content_check($conf, $content) );
 
@@@@ -67,7 +67,7 @@@@ E_NOTE
         if ( $new_perldoc ) {
             $TEMP_pod_build .= <<"END"
 ops/$pod: ../src/ops/$ops
-\t\$(PERLDOC_BIN) -ud ops/$pod ../src/ops/$ops
+\t\$(PERLDOC_BIN) -u ../src/ops/$ops > ops//$pod
 \t\$(CHMOD) 0644 ops/$pod
 
 END
@


1.1
log
@Update to parrot 3.0.0, from Pascal Stumpf (thanks!) with some tweaks.
Disable threads as it seems to trigger funky bugs. Enable it on all
archs but sparc64 as it's broken there.
Testing on arm/mips64el by kili, sparc64/ppc by me.
@
text
@d1 1
a1 1
$OpenBSD$
@

