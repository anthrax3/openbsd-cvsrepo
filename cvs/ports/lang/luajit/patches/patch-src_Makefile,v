head	1.6;
access;
symbols
	OPENBSD_6_1:1.5.0.8
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.1.1.1.0.4
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	abieber_20121027:1.1.1.1
	abieber:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2017.05.05.10.21.47;	author jsg;	state Exp;
branches;
next	1.5;
commitid	zm0flcBFkl6UMYsg;

1.5
date	2015.06.06.09.03.16;	author dcoppa;	state Exp;
branches;
next	1.4;
commitid	42Yo5zTU2igR83WU;

1.4
date	2014.03.12.22.51.21;	author abieber;	state Exp;
branches;
next	1.3;

1.3
date	2014.02.10.17.31.46;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2013.10.05.15.51.08;	author abieber;	state Exp;
branches;
next	1.1;

1.1
date	2012.10.27.14.05.33;	author abieber;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.10.27.14.05.33;	author abieber;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to LuaJIT 2.0.5

Major on the library gets cranked as it removes
luaJIT_version_2_0_4
and adds
luaJIT_version_2_0_5

Tested by sthen@@ with rspamd. ok sthen@@
@
text
@$OpenBSD: patch-src_Makefile,v 1.5 2015/06/06 09:03:16 dcoppa Exp $
--- src/Makefile.orig	Tue May  2 04:11:00 2017
+++ src/Makefile	Tue May  2 11:40:27 2017
@@@@ -326,6 +326,10 @@@@ else
   ifeq (GNU/kFreeBSD,$(TARGET_SYS))
     TARGET_XLIBS+= -ldl
   endif
+  ifeq (OpenBSD,$(TARGET_SYS))
+    TARGET_XSHLDFLAGS= -shared -fPIC
+    TARGET_STRIP= @@:
+  endif
 endif
 endif
 endif
@@@@ -562,10 +566,10 @@@@ endif
 endif
 endif
 
-Q= @@
-E= @@echo
-#Q=
-#E= @@:
+#Q= @@
+#E= @@echo
+Q=
+E= @@:
 
 ##############################################################################
 # Make targets.
@


1.5
log
@
Update to LuaJIT-2.0.4

ok abieber@@ (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile,v 1.4 2014/03/12 22:51:21 abieber Exp $
--- src/Makefile.orig	Thu May 14 20:30:00 2015
+++ src/Makefile	Thu Jun  4 19:20:59 2015
@@@@ -325,6 +325,10 @@@@ else
d15 1
a15 1
@@@@ -557,10 +561,10 @@@@ endif
@


1.4
log
@Update to the latest luajit - tested on amd64 using luakit. luasocket was also
used as a test.

OK jturner@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile,v 1.3 2014/02/10 17:31:46 sthen Exp $
--- src/Makefile.orig	Wed Mar 12 06:10:00 2014
+++ src/Makefile	Wed Mar 12 13:31:24 2014
@@@@ -327,6 +327,10 @@@@ else
d15 1
a15 1
@@@@ -559,10 +563,10 @@@@ endif
@


1.3
log
@build luajit with -Wl,-E to avoid problems when dlopen()ing hit by tedu.
tracked down by jturner, I tweaked his diff to use more of upstream's
original src/Makefile. ok jasper@@ jturner@@ abieber@@
@
text
@d1 7
a7 7
$OpenBSD: patch-src_Makefile,v 1.2 2013/10/05 15:51:08 abieber Exp $
--- src/Makefile.orig	Mon Jun  3 20:00:00 2013
+++ src/Makefile	Mon Feb 10 17:12:11 2014
@@@@ -304,6 +304,10 @@@@ ifeq (iOS,$(TARGET_SYS))
   TARGET_DYNXLDOPTS=
   TARGET_XSHLDFLAGS+= -install_name $(TARGET_DYLIBPATH) -compatibility_version $(MAJVER).$(MINVER) -current_version $(MAJVER).$(MINVER).$(RELVER)
 else
d12 4
a15 4
   ifneq (,$(findstring stack-protector,$(shell $(TARGET_CC) -dumpspecs)))
     TARGET_XCFLAGS+= -fno-stack-protector
   endif
@@@@ -550,10 +554,10 @@@@ endif
@


1.2
log
@Update luajit to 2.0.2 - ran update-patches

OK jturner@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile,v 1.1.1.1 2012/10/27 14:05:33 abieber Exp $
--- src/Makefile.orig	Mon Jun  3 13:00:00 2013
+++ src/Makefile	Sat Oct  5 09:33:07 2013
@@@@ -304,6 +304,11 @@@@ ifeq (iOS,$(TARGET_SYS))
d8 4
a11 5
+ifeq (OpenBSD,$(TARGET_SYS))
+  TARGET_XSHLDFLAGS= -shared -fPIC
+  TARGET_XCFLAGS+= -fno-stack-protector
+  TARGET_STRIP= @@:
+else
d15 1
a15 9
@@@@ -321,6 +326,7 @@@@ else
 endif
 endif
 endif
+endif
 
 ifneq ($(HOST_SYS),$(TARGET_SYS))
   ifeq (Windows,$(TARGET_SYS))
@@@@ -550,10 +556,10 @@@@ endif
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- src/Makefile.orig	Tue Oct 16 19:30:00 2012
+++ src/Makefile	Sat Oct 20 10:57:31 2012
d24 1
a24 1
@@@@ -549,10 +555,10 @@@@ endif
@


1.1.1.1
log
@Initial import of luajit - a just-in-time compiler for Lua

OK sthen@@ landry@@
@
text
@@
