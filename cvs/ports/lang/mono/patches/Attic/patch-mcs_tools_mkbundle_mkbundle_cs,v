head	1.3;
access;
symbols
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2010.04.08.12.12.33;	author robert;	state dead;
branches;
next	1.2;

1.2
date	2010.03.28.15.25.15;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2009.09.06.07.25.27;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Fix kinfo_proc2 code and add support for more mono stuff using sysctl to
get process informations. Remove the mkbundle.cs patch and replace it
with one that uses configure.in so the libgc dependency ends up in the
pkg-config file. Move disabled features to configure.in from our Makefile
@
text
@$OpenBSD: patch-mcs_tools_mkbundle_mkbundle_cs,v 1.2 2010/03/28 15:25:15 robert Exp $
--- mcs/tools/mkbundle/mkbundle.cs.orig	Fri Sep 25 16:58:18 2009
+++ mcs/tools/mkbundle/mkbundle.cs	Sun Mar 28 12:41:53 2010
@@@@ -399,13 +399,13 @@@@ class MakeBundle {
 					smonolib = "`pkg-config --variable=libdir mono`/libmono.a ";
 				else
 					smonolib = "-Wl,-Bstatic -lmono -Wl,-Bdynamic ";
-				cmd = String.Format ("{4} -o {2} -Wall `pkg-config --cflags mono` {0} {3} " +
+				cmd = String.Format ("{4} -o {2} -pthread -Wall `pkg-config --cflags mono` {0} {3} " +
 						     "`pkg-config --libs-only-L mono` " + smonolib +
-						     "`pkg-config --libs-only-l mono | sed -e \"s/\\-lmono //\"` {1}",
+						     "`pkg-config --libs-only-l mono | sed -e \"s/\\-lmono //\"` -lgc {1}",
 						     temp_c, temp_o, output, zlib, cc);
 			} else {
 				
-				cmd = String.Format ("{4} " + debugging + " -o {2} -Wall {0} `pkg-config --cflags --libs mono` {3} {1}",
+				cmd = String.Format ("{4} " + debugging + " -o {2} -Wall {0} `pkg-config --cflags --libs mono` -lgc {3} {1}",
 						     temp_c, temp_o, output, zlib, cc);
 			}
                             
@


1.2
log
@mkdbundle has to link to libgc.
@
text
@d1 1
a1 1
$OpenBSD: patch-mcs_tools_mkbundle_mkbundle_cs,v 1.1 2009/09/06 07:25:27 ajacoutot Exp $
@


1.1
log
@Major update to mono-2.5.
While beeing a development release, this is the most stable version I
used on OpenBSD for now. Several patches are removed as they went
upstream. Thanks to jolan@@ for pointing me at this release and cooking a
couple of patches.

Fix build on powerpc and add it to ONLY_FOR_ARCHS ; slightly tested on
macppc.

A similar port was successfuly tested by jolan@@ on amd64.

no objection alek@@ (maintainer)
ok jolan@@ ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD$
--- mcs/tools/mkbundle/mkbundle.cs.orig	Sun Aug 23 12:08:46 2009
+++ mcs/tools/mkbundle/mkbundle.cs	Sun Aug 23 12:09:09 2009
@@@@ -399,7 +399,7 @@@@ class MakeBundle {
d11 2
a12 1
 						     "`pkg-config --libs-only-l mono | sed -e \"s/\\-lmono //\"` {1}",
d14 7
@

