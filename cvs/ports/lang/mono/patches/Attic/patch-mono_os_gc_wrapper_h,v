head	1.2;
access;
symbols
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.09.06.07.25.27;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2009.03.15.02.19.31;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Major update to mono-2.5.
While beeing a development release, this is the most stable version I
used on OpenBSD for now. Several patches are removed as they went
upstream. Thanks to jolan@@ for pointing me at this release and cooking a
couple of patches.

Fix build on powerpc and add it to ONLY_FOR_ARCHS ; slightly tested on
macppc.

A similar port was successfuly tested by jolan@@ on amd64.

no objection alek@@ (maintainer)
ok jolan@@ ok jasper@@
@
text
@$OpenBSD: patch-mono_os_gc_wrapper_h,v 1.1 2009/03/15 02:19:31 kurt Exp $
--- mono/os/gc_wrapper.h.orig	Thu Mar 12 13:08:25 2009
+++ mono/os/gc_wrapper.h	Thu Mar 12 13:14:30 2009
@@@@ -29,6 +29,12 @@@@
 #       endif
 #	endif
 
+	/*
+	 * In the case of multithreaded code, gc.h should be included
+	 * after the threads header file, and after defining GC_THREADS.
+	 */
+#	include <pthread.h>
+#	define GC_THREADS
 #	ifdef HAVE_GC_GC_H
 #		include <gc/gc.h>
 #		include <gc/gc_typed.h>
@


1.1
log
@- semop(2) is not supported by pthreads, so disable its use
- ensure boehm-gc headers are included with thread support enabled
okay robert@@ jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
@

