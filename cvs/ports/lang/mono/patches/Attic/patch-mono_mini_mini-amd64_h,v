head	1.5;
access;
symbols
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	robert_20081015:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2010.08.18.10.51.55;	author robert;	state dead;
branches;
next	1.4;

1.4
date	2010.03.23.08.25.26;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2009.09.06.07.25.27;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2008.10.15.21.33.25;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.15.13.34.10;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.10.15.13.34.10;	author robert;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to 2.6.7; remove patches that were merged backed to upstream
@
text
@$OpenBSD: patch-mono_mini_mini-amd64_h,v 1.4 2010/03/23 08:25:26 robert Exp $
--- mono/mini/mini-amd64.h.orig	Tue Mar 23 08:59:52 2010
+++ mono/mini/mini-amd64.h	Tue Mar 23 09:00:38 2010
@@@@ -254,10 +254,6 @@@@ typedef struct {
 
 #endif
 
-#ifdef __OpenBSD__
-#undef MONO_ARCH_USE_SIGACTION
-#endif
-
 #endif /* PLATFORM_WIN32 */
 
 #if defined (__NetBSD__)
@@@@ -282,7 +278,11 @@@@ typedef struct {
 
 #define MONO_ARCH_NOMAP32BIT
 
-#elif defined (__FreeBSD__) || defined (__OpenBSD__)
+#elif defined (__OpenBSD__)
+
+#define MONO_ARCH_NOMAP32BIT
+
+#elif defined (__FreeBSD__)
 
 #define REG_RAX 7
 #define REG_RCX 4
@


1.4
log
@Enable sigaction support on amd64 too, by using struct sigcontext.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Major update to mono-2.5.
While beeing a development release, this is the most stable version I
used on OpenBSD for now. Several patches are removed as they went
upstream. Thanks to jolan@@ for pointing me at this release and cooking a
couple of patches.

Fix build on powerpc and add it to ONLY_FOR_ARCHS ; slightly tested on
macppc.

A similar port was successfuly tested by jolan@@ on amd64.

no objection alek@@ (maintainer)
ok jolan@@ ok jasper@@
@
text
@d1 4
a4 6
$OpenBSD: patch-mono_mini_mini-amd64_h,v 1.2 2008/10/15 21:33:25 robert Exp $
--- mono/mini/mini-amd64.h.orig	Tue Sep  2 17:42:54 2008
+++ mono/mini/mini-amd64.h	Wed Oct 15 22:07:39 2008
@@@@ -217,7 +217,7 @@@@ typedef struct {
  */
 #define MONO_ARCH_VARARG_ICALLS 1
d6 1
a6 2
-#ifndef PLATFORM_WIN32
+#if !defined(PLATFORM_WIN32) && !defined(__OpenBSD__)
d8 5
a12 1
 #define MONO_ARCH_USE_SIGACTION 1
d14 2
a15 1
@@@@ -229,7 +229,7 @@@@ typedef struct {
d17 1
a17 1
 #endif /* PLATFORM_WIN32 */
d19 6
a24 2
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
@


1.2
log
@we don't have MAP_32BIT on amd64 so don't use it and disable generic
code sharing; makes mono work on amd64
@
text
@d1 1
a1 1
$OpenBSD: patch-mono_mini_mini-amd64_h,v 1.1.1.1 2008/10/15 13:34:10 robert Exp $
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- mono/mini/mini-amd64.h.orig	Tue Oct 14 19:41:26 2008
+++ mono/mini/mini-amd64.h	Tue Oct 14 19:48:56 2008
d13 9
@


1.1.1.1
log
@import of mono-2.0:

Mono is an open source implementation of .NET Development Framework.
Its objective is to enable UNIX developers to build and deploy cross-platform
.NET Applications. The project implements various technologies developed by
Microsoft that have now been submitted to the ECMA for standardization.

Mono provides the necessary software to develop and run .NET client and
server applications on BSD, Linux, Solaris, Mac OS X, Windows and Unix.

from alek@@, modifications by me and some amd64 patches from
Giovanni Bechis

mono is not linked to the build yet, it's getting imported so we can
work on it in tree;
@
text
@@
