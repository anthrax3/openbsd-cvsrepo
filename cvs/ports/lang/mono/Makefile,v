head	1.108;
access;
symbols
	OPENBSD_6_1:1.106.0.2
	OPENBSD_6_1_BASE:1.106
	OPENBSD_6_0:1.100.0.2
	OPENBSD_6_0_BASE:1.100
	OPENBSD_5_9:1.93.0.2
	OPENBSD_5_9_BASE:1.93
	OPENBSD_5_8:1.90.0.4
	OPENBSD_5_8_BASE:1.90
	OPENBSD_5_7:1.88.0.2
	OPENBSD_5_7_BASE:1.88
	OPENBSD_5_6:1.84.0.2
	OPENBSD_5_6_BASE:1.84
	OPENBSD_5_5:1.80.0.2
	OPENBSD_5_5_BASE:1.80
	OPENBSD_5_4:1.79.0.2
	OPENBSD_5_4_BASE:1.79
	OPENBSD_5_3:1.77.0.2
	OPENBSD_5_3_BASE:1.77
	OPENBSD_5_2:1.72.0.2
	OPENBSD_5_2_BASE:1.72
	OPENBSD_5_1_BASE:1.68
	OPENBSD_5_1:1.68.0.2
	OPENBSD_5_0:1.61.0.2
	OPENBSD_5_0_BASE:1.61
	OPENBSD_4_9:1.56.0.2
	OPENBSD_4_9_BASE:1.56
	OPENBSD_4_8:1.45.0.2
	OPENBSD_4_8_BASE:1.45
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	robert_20081015:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.108
date	2017.05.29.17.50.43;	author sthen;	state Exp;
branches;
next	1.107;
commitid	aoflgKWE3c5W2AF3;

1.107
date	2017.05.29.13.28.59;	author zhuk;	state Exp;
branches;
next	1.106;
commitid	xBDpe65AXBD2grwk;

1.106
date	2016.11.09.11.17.02;	author ajacoutot;	state Exp;
branches;
next	1.105;
commitid	1WypVcI0AfTFFTWG;

1.105
date	2016.11.07.15.22.38;	author ajacoutot;	state Exp;
branches;
next	1.104;
commitid	VoSH4ndWuPT3uL11;

1.104
date	2016.11.07.11.52.25;	author ajacoutot;	state Exp;
branches;
next	1.103;
commitid	0z3AxOp7vecbqwTb;

1.103
date	2016.10.31.11.45.07;	author robert;	state Exp;
branches;
next	1.102;
commitid	L0mjomEWrIhDuqYR;

1.102
date	2016.09.01.15.40.29;	author robert;	state Exp;
branches;
next	1.101;
commitid	KENXytT8bGxvfmn3;

1.101
date	2016.08.18.12.31.52;	author sthen;	state Exp;
branches;
next	1.100;
commitid	Bkj818TkXq2lcg8A;

1.100
date	2016.07.13.14.04.22;	author ajacoutot;	state Exp;
branches;
next	1.99;
commitid	E4OUHf6Sn2JnsEyC;

1.99
date	2016.07.13.08.21.38;	author ajacoutot;	state Exp;
branches;
next	1.98;
commitid	PuBrwqDtlsYnd6KF;

1.98
date	2016.07.02.10.22.30;	author robert;	state Exp;
branches;
next	1.97;
commitid	bxib33jmfIr3gHfR;

1.97
date	2016.06.26.10.40.28;	author robert;	state Exp;
branches;
next	1.96;
commitid	YqBeENcK7ZoJnmmW;

1.96
date	2016.04.09.14.19.02;	author robert;	state Exp;
branches;
next	1.95;
commitid	1LXo3d4XyDKXGa7c;

1.95
date	2016.03.11.20.28.27;	author naddy;	state Exp;
branches;
next	1.94;
commitid	UYLP8TE6V7RS2GhJ;

1.94
date	2016.03.02.07.17.34;	author robert;	state Exp;
branches;
next	1.93;
commitid	WOOXSxvwLx9ILSdV;

1.93
date	2015.12.15.15.32.04;	author robert;	state Exp;
branches;
next	1.92;
commitid	b3qz3HfheGXwtFx4;

1.92
date	2015.10.03.11.53.44;	author robert;	state Exp;
branches;
next	1.91;
commitid	Qu7fVLbJQ0CAaeEB;

1.91
date	2015.08.12.06.13.56;	author ajacoutot;	state Exp;
branches;
next	1.90;
commitid	qzhLD7SBGSp8yUhI;

1.90
date	2015.04.04.15.56.18;	author robert;	state Exp;
branches;
next	1.89;
commitid	B0UFXDkYECBqS2on;

1.89
date	2015.03.20.22.47.41;	author naddy;	state Exp;
branches;
next	1.88;
commitid	QOpUQJ8BomkHfmKe;

1.88
date	2015.01.17.12.24.25;	author robert;	state Exp;
branches;
next	1.87;
commitid	g3IxNsPpT9D7c8OV;

1.87
date	2014.12.30.18.47.31;	author robert;	state Exp;
branches;
next	1.86;
commitid	Eewvj2aFNAfAwSl6;

1.86
date	2014.12.29.10.49.12;	author robert;	state Exp;
branches;
next	1.85;
commitid	sXBuhXfgcPHWPwW0;

1.85
date	2014.11.22.20.14.21;	author brad;	state Exp;
branches;
next	1.84;
commitid	TxdtVqHXvKHQh7Ra;

1.84
date	2014.07.23.09.54.14;	author ajacoutot;	state Exp;
branches;
next	1.83;
commitid	C5pYQi1o0NNzw0iU;

1.83
date	2014.07.18.16.01.33;	author ajacoutot;	state Exp;
branches;
next	1.82;
commitid	8LtgCVDJ6cRIbAv8;

1.82
date	2014.07.12.16.24.20;	author robert;	state Exp;
branches;
next	1.81;
commitid	xfVIMhCJllY8Pz2G;

1.81
date	2014.07.09.11.39.16;	author robert;	state Exp;
branches;
next	1.80;
commitid	rfOnxOCfdtnXRGha;

1.80
date	2013.12.04.21.31.12;	author naddy;	state Exp;
branches;
next	1.79;

1.79
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2013.03.11.11.20.28;	author espie;	state Exp;
branches;
next	1.77;

1.77
date	2013.01.27.13.52.35;	author sthen;	state Exp;
branches;
next	1.76;

1.76
date	2013.01.27.10.45.30;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2013.01.24.13.52.09;	author kurt;	state Exp;
branches;
next	1.74;

1.74
date	2013.01.13.21.38.37;	author kurt;	state Exp;
branches;
next	1.73;

1.73
date	2012.12.26.17.47.56;	author naddy;	state Exp;
branches;
next	1.72;

1.72
date	2012.07.13.16.59.15;	author jasper;	state Exp;
branches;
next	1.71;

1.71
date	2012.07.10.22.32.01;	author robert;	state Exp;
branches;
next	1.70;

1.70
date	2012.04.13.11.51.49;	author robert;	state Exp;
branches;
next	1.69;

1.69
date	2012.03.31.18.50.17;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2012.01.08.20.05.45;	author robert;	state Exp;
branches;
next	1.67;

1.67
date	2011.12.07.11.49.43;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2011.11.09.22.13.37;	author robert;	state Exp;
branches;
next	1.65;

1.65
date	2011.11.03.09.55.12;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2011.08.29.10.53.22;	author robert;	state Exp;
branches;
next	1.62;

1.62
date	2011.08.24.10.01.21;	author espie;	state Exp;
branches;
next	1.61;

1.61
date	2011.06.05.15.16.48;	author robert;	state Exp;
branches;
next	1.60;

1.60
date	2011.06.04.11.17.08;	author robert;	state Exp;
branches;
next	1.59;

1.59
date	2011.04.27.08.50.15;	author robert;	state Exp;
branches;
next	1.58;

1.58
date	2011.03.15.10.02.59;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2011.03.02.08.37.51;	author robert;	state Exp;
branches;
next	1.56;

1.56
date	2011.01.14.21.14.12;	author robert;	state Exp;
branches;
next	1.55;

1.55
date	2010.11.18.22.40.16;	author robert;	state Exp;
branches;
next	1.54;

1.54
date	2010.11.17.08.05.18;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.07.19.12.42;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2010.10.26.17.30.38;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2010.10.16.13.21.20;	author robert;	state Exp;
branches;
next	1.49;

1.49
date	2010.10.15.16.21.07;	author robert;	state Exp;
branches;
next	1.48;

1.48
date	2010.10.01.05.23.52;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2010.08.23.13.18.50;	author robert;	state Exp;
branches;
next	1.46;

1.46
date	2010.08.18.10.51.55;	author robert;	state Exp;
branches;
next	1.45;

1.45
date	2010.07.05.06.16.58;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.06.28.18.15.24;	author robert;	state Exp;
branches;
next	1.43;

1.43
date	2010.05.15.09.40.17;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2010.05.10.20.17.31;	author robert;	state Exp;
branches;
next	1.41;

1.41
date	2010.04.27.12.39.49;	author robert;	state Exp;
branches;
next	1.40;

1.40
date	2010.04.16.11.59.45;	author robert;	state Exp;
branches;
next	1.39;

1.39
date	2010.04.08.16.40.04;	author robert;	state Exp;
branches;
next	1.38;

1.38
date	2010.04.08.14.58.10;	author robert;	state Exp;
branches;
next	1.37;

1.37
date	2010.04.08.12.12.33;	author robert;	state Exp;
branches;
next	1.36;

1.36
date	2010.04.05.10.39.35;	author robert;	state Exp;
branches;
next	1.35;

1.35
date	2010.04.05.01.02.57;	author robert;	state Exp;
branches;
next	1.34;

1.34
date	2010.04.01.21.53.51;	author robert;	state Exp;
branches;
next	1.33;

1.33
date	2010.03.28.15.25.15;	author robert;	state Exp;
branches;
next	1.32;

1.32
date	2010.03.27.12.37.15;	author robert;	state Exp;
branches;
next	1.31;

1.31
date	2010.03.27.12.06.26;	author robert;	state Exp;
branches;
next	1.30;

1.30
date	2010.03.26.17.53.26;	author robert;	state Exp;
branches;
next	1.29;

1.29
date	2010.03.26.17.01.02;	author robert;	state Exp;
branches;
next	1.28;

1.28
date	2010.03.26.13.13.47;	author robert;	state Exp;
branches;
next	1.27;

1.27
date	2010.03.26.10.41.55;	author robert;	state Exp;
branches;
next	1.26;

1.26
date	2010.03.26.10.40.44;	author robert;	state Exp;
branches;
next	1.25;

1.25
date	2010.03.24.17.57.50;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2010.03.23.10.21.32;	author robert;	state Exp;
branches;
next	1.23;

1.23
date	2010.03.23.08.25.26;	author robert;	state Exp;
branches;
next	1.22;

1.22
date	2010.03.22.16.56.13;	author robert;	state Exp;
branches;
next	1.21;

1.21
date	2010.03.22.09.49.59;	author robert;	state Exp;
branches;
next	1.20;

1.20
date	2010.03.22.09.48.15;	author robert;	state Exp;
branches;
next	1.19;

1.19
date	2010.03.21.17.35.05;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2010.03.21.13.43.10;	author robert;	state Exp;
branches;
next	1.17;

1.17
date	2010.03.20.17.16.44;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2010.01.19.15.07.01;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2009.12.17.14.00.34;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.10.10.09.44.59;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.10.09.18.18.23;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.09.22.17.55.23;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.09.06.07.25.27;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.07.21.13.51.41;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2009.03.15.02.19.31;	author kurt;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2009.02.03.09.41.40;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.01.21.16.06.59;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2008.10.24.07.06.01;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.17.09.07.12;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.16.21.47.10;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.16.16.00.27;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.15.21.33.25;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.15.13.34.10;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.10.15.13.34.10;	author robert;	state Exp;
branches;
next	;

1.9.2.1
date	2009.11.21.04.27.02;	author william;	state Exp;
branches;
next	;


desc
@@


1.108
log
@add XXX comment about wxneeded and clang
@
text
@# $OpenBSD: Makefile,v 1.107 2017/05/29 13:28:59 zhuk Exp $

# XXX also see -Wl,-z,wxneeded below; clang bypasses the wrapper
USE_WXNEEDED=	Yes

COMMENT=	cross platform, open source .NET developement framework

V=		4.6.2
DISTNAME=	mono-${V}.6
REVISION=	0

CATEGORIES=	lang devel

SHARED_LIBS +=  mono-2.0		1.0	# .0.0
SHARED_LIBS +=  monoboehm-2.0           1.0     # .0.0
SHARED_LIBS +=  mono-profiler-iomap	0.0	# .0.0
SHARED_LIBS +=  mono-profiler-aot	1.0	# .0.0
SHARED_LIBS +=  mono-profiler-log	0.0	# .0.0

HOMEPAGE=	http://www.mono-project.com/

MAINTAINER=	Robert Nagy <robert@@openbsd.org>

# GPLv2, LGPL, MIT X11, MPL
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c iconv m pthread z

MASTER_SITES=	http://download.mono-project.com/sources/mono/
EXTRACT_SUFX=	.tar.bz2

MODULES=	lang/mono \
		lang/python

MODMONO_DEPS=	No

USE_GMAKE=	Yes
USE_GROFF =	Yes

SUBST_VARS=	LIBTOOL

BUILD_DEPENDS=	devel/bison \
		devel/gettext-tools \
		lang/gawk \
		shells/bash \
		${RUN_DEPENDS}
RUN_DEPENDS=	x11/libgdiplus

LIB_DEPENDS=	converters/libiconv

TEST_DEPENDS=	lang/python/${MODPY_VERSION}

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -Wl,-z,wxneeded" \
		CPPFLAGS="-I${LOCALBASE}/include" \
		ac_cv_header_execinfo_h=no \
		ac_cv_header_pthread_np_h=yes

.if ${MACHINE_ARCH} == "i386"
CONFIGURE_ENV+=	CFLAGS="-march=i586"
.endif

WRKDIST=	${WRKDIR}/mono-${V}

CONFIGURE_ARGS=	--with-gc=included \
		--without-sgen \
		--disable-quiet-build \
		--disable-shared-handles \
		--without-sigaltstack

TEST_TARGET=check

DLLMAP_FILES=	mcs/class/System.Windows.Forms/System.Windows.Forms/MimeIcon.cs \
		mcs/tools/mono-shlib-cop/mono-shlib-cop.exe.config \
		mcs/class/System/System.IO/FAMWatcher.cs \
		mcs/class/System.Windows.Forms/System.Windows.Forms/X11DesktopColors.cs \
		mcs/class/Mono.Cairo/Samples/gtk/OldAndBusted.cs \
		data/config

FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples

pre-configure:
	${SUBST_CMD} ${WRKSRC}/runtime/mono-wrapper.in \
		${WRKSRC}/runtime/monodis-wrapper.in
	perl -pi -e 's,^prefix=.*,prefix=\@@prefix\@@,g;' \
		-e 's,^exec_prefix=.*,exec_prefix=\@@prefix\@@,g' \
		${WRKSRC}/data/*.pc.in
	perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},g' \
		${WRKSRC}/mono/tests/gc-descriptors/gen-descriptor-tests.py


	@@ln -fs /usr/local/bin/bash ${WRKDIR}/bin/bash
	@@ln -fs /usr/local/bin/gawk ${WRKDIR}/bin/gawk
	@@ln -fs ${MODPY_BIN} ${WRKDIR}/bin/python

# Force using the internal mcs compiler
pre-build:
	@@mkdir -p ${WRKSRC}/mcs/build/deps
	@@touch ${WRKSRC}/mcs/build/deps/use-monolite

# XXX stop mono failing the first time
# make _tmpinst more available
post-build:
	for i in ${WRKBUILD}/runtime/_tmpinst/bin/*; do \
		ln -s $$i ${WRKDIR}/bin; \
	done

.include <bsd.port.mk>
@


1.107
log
@Mono clearly violates W^X, so mark it as such.

Allows it to be built on amd64 at least.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2016/11/09 11:17:02 ajacoutot Exp $
d3 1
@


1.106
log
@Update to mono-4.6.2.6.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2016/11/07 15:22:38 ajacoutot Exp $
d9 1
d53 1
a53 1
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib" \
@


1.105
log
@Pass --without-sigaltstack instead of patching.
Remove checks for old OpenBSD.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2016/11/07 11:52:25 ajacoutot Exp $
d7 2
a8 3
V=		4.6.1
DISTNAME=	mono-${V}.5
REVISION=	1
@


1.104
log
@Fix DLLMAP_FILES, some files have moved.
Drop heap limit patches which never helped anything.
Set ac_cv_header_pthread_np_h=yes.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2016/10/31 11:45:07 robert Exp $
d9 1
a9 1
REVISION=	0
d52 1
a52 2
AUTOCONF_VERSION=2.69
CONFIGURE_STYLE=autoconf
d65 4
a68 3
		--with-sgen=no \
		--enable-quiet-build=no \
		--disable-shared-handles
a79 5

post-patch:
	@@cd ${WRKSRC}/eglib && \
		${SETENV} ${AUTOCONF_ENV} ${AUTOCONF} && \
		${SETENV} ${AUTOCONF_ENV} ${AUTOHEADER}
@


1.103
log
@update to 4.6.1.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2016/09/01 15:40:29 robert Exp $
d9 1
d56 2
a57 1
		ac_cv_header_execinfo_h=no
d72 1
a72 1
DLLMAP_FILES=	mcs/class/Managed.Windows.Forms/System.Windows.Forms/MimeIcon.cs \
d75 1
a75 1
		mcs/class/Managed.Windows.Forms/System.Windows.Forms/X11DesktopColors.cs \
@


1.102
log
@update to 4.4.2.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2016/08/18 12:31:52 sthen Exp $
d7 2
a8 2
V=		4.4.2
DISTNAME=	mono-${V}.11
@


1.101
log
@use USE_WXNEEDED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2016/07/13 14:04:22 ajacoutot Exp $
d7 2
a8 3
V=		4.4.0
DISTNAME=	mono-${V}.182
REVISION=	3
@


1.100
log
@Forgot to move converters/libiconv to LIB_DEPENDS in previous.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.99 2016/07/13 08:21:38 ajacoutot Exp $
d9 1
a9 1
REVISION=	2
@


1.99
log
@Limit gc stack space; half of the pkgsrc patch was missing.
May help in bulks...

ok robert (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2016/07/02 10:22:30 robert Exp $
d7 1
a7 1
REVISION=	1
d45 2
@


1.98
log
@the build needs python in the acceptance-tests target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2016/06/26 10:40:28 robert Exp $
d7 1
a7 1
REVISION=	0
d24 1
a24 1
WANTLIB=	c m pthread z
d30 1
a30 2
		lang/python \
		converters/libiconv
@


1.97
log
@update to 4.4.0.182
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2016/04/09 14:19:02 robert Exp $
d7 1
d94 1
@


1.96
log
@update to 4.2.3.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2016/03/11 20:28:27 naddy Exp $
d5 2
a6 2
V=		4.2.3
DISTNAME=	mono-${V}.4
@


1.95
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2016/03/02 07:17:34 robert Exp $
d5 2
a6 2
V=		4.2.2
DISTNAME=	mono-${V}.30
@


1.94
log
@update to 4.2.2.30
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2015/12/15 15:32:04 robert Exp $
d60 1
a60 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--with-gc=included \
@


1.93
log
@update to 4.2.1.102; tested by and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2015/10/03 11:53:44 robert Exp $
d5 2
a6 2
V=		4.2.1
DISTNAME=	mono-${V}.102
@


1.92
log
@update to mono-4.0.4.1 and introduce the MODMONO_GMCS_COMPAT flag
in the mono module because upstream has merged all the compilers
into mcs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2015/08/12 06:13:56 ajacoutot Exp $
d5 2
a6 2
V=		4.0.4
DISTNAME=	mono-${V}.1
a14 1
SHARED_LIBS +=  mono-profiler-cov	1.0	# .0.0
@


1.91
log
@Needs devel/gettext-tools.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2015/04/04 15:56:18 robert Exp $
d5 2
a6 1
DISTNAME=	mono-3.12.1
d58 2
@


1.90
log
@update to 3.12.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2015/03/20 22:47:41 naddy Exp $
d40 1
@


1.89
log
@fold PFRAG.shared into PLIST for SHARED_ONLY ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2015/01/17 12:24:25 robert Exp $
d5 1
a5 2
DISTNAME=	mono-3.12.0
REVISION=	0
@


1.88
log
@update to 3.12.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2014/12/30 18:47:31 robert Exp $
d6 1
@


1.87
log
@fix reading past the end of a string when setting the native thread name,
which would lead to a crash on i386; noticed by sthen@@

also remove a bogus patch which hardcodes the python path and properly
substitute the python binary's path in the Makefile instead
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/12/29 10:49:12 robert Exp $
d5 1
a5 2
DISTNAME=	mono-3.10.0
REVISION=	0
@


1.86
log
@update to 3.10.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2014/11/22 20:14:21 brad Exp $
d6 1
d87 1
a87 1
		mono/tests/gc-descriptors/gen-descriptor-tests.py
@


1.85
log
@Don't use malloc.h header on OpenBSD.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/07/23 09:54:14 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mono-3.4.0
REVISION=	2
@


1.84
log
@Install missing @@sample files; this unbreaks mono-basic.

ok sthen@@ robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/07/18 16:01:33 ajacoutot Exp $
d6 1
a6 1
REVISION=	1
@


1.83
log
@SYnc WANTLIB and regen PLIST>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/07/12 16:24:20 robert Exp $
d6 1
a6 1
REVISION=	0
@


1.82
log
@fix i386 build by using -march=i586 and also commit a missing diff
to fix packaging
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2014/07/09 11:39:16 robert Exp $
d6 1
d24 1
a24 1
WANTLIB=	c m pthread z stdc++
d26 1
a26 2
MASTER_SITES=	http://download.mono-project.com/sources/mono/ \
		http://ftp.novell.com/pub/mono/sources/mono/
@


1.81
log
@update to mono-3.4.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/12/04 21:31:12 naddy Exp $
d53 5
@


1.80
log
@L_cuserid will be going away
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/03/21 08:46:32 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mono-2.10.9
REVISION=	3
d10 1
a11 1
SHARED_LIBS +=  monosgen-2.0		0.0	# .0.0
d30 1
d41 2
a44 2
LIB_DEPENDS=	devel/boehm-gc
WANTLIB +=	gc
d46 3
a48 1
AUTOCONF_VERSION=2.68
d54 2
a55 1
		--with-gc=boehm \
a67 13
BASH_SCRIPTS=	mcs/class/Mono.WebBrowser/build-csproj2k5 \
		mcs/class/Managed.Windows.Forms/build-csproj \
		mcs/class/Managed.Windows.Forms/build-csproj2k5 \
		mcs/class/Mono.Cairo/Samples/x11/compile.sh \
		mcs/class/Mono.Cairo/Samples/gtk/compile.sh \
		mcs/class/Mono.Cairo/Samples/win32/compile.sh \
		mcs/class/Mono.Cairo/Samples/png/compile.sh \
		mcs/tools/tinderbox/tinderbox.sh \
		scripts/mono-find-requires.in \
		scripts/mono-find-provides.in \
		scripts/mono-test-install \
		mono/arch/arm/dpiops.sh

a77 3
	for i in ${BASH_SCRIPTS}; do \
		perl -pi -e 's,/bin/bash,/bin/sh,' ${WRKSRC}/$${i}; \
	done
d81 6
@


1.79
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/03/11 11:20:28 espie Exp $
d6 1
a6 1
REVISION=	2
@


1.78
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/01/27 13:52:35 sthen Exp $
a34 1
USE_LIBTOOL=	Yes
@


1.77
log
@set ac_cv_header_execinfo_h=no rather than BUILD_DEPENDS on execinfo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2013/01/27 10:45:30 sthen Exp $
a21 1
PERMIT_PACKAGE_FTP=	Yes
a22 2
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
d57 1
a57 1
REGRESS_TARGET=check
@


1.76
log
@build dep on libexecinfo to avoid dpb failures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/01/24 13:52:09 kurt Exp $
a44 1
		devel/libexecinfo \
d53 2
a54 1
		CPPFLAGS="-I${LOCALBASE}/include"
@


1.75
log
@- Replace my termination race work-around with upstream's proper fix.
okay naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2013/01/13 21:38:37 kurt Exp $
d45 1
@


1.74
log
@Fix termination segfault caused by a use-after free race by having the
finalizer_thread exit as soon as it finishes. okay robert@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2012/12/26 17:47:56 naddy Exp $
d6 1
a6 1
REVISION=	1
@


1.73
log
@Mark as BROKEN.  The build is unreliable and fails most of the time in
bulk builds.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.72 2012/07/13 16:59:15 jasper Exp $

BROKEN=		unreliable build, fails in bulk builds
d6 1
a6 1
REVISION=	0
@


1.72
log
@Security fix for CVE-2012-3382, Mono "ProcessRequest()" Cross-Site Scripting Vulnerability

ok robert@@ (MAINTAINER)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.71 2012/07/10 22:32:01 robert Exp $
@


1.71
log
@update to 2.10.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2012/04/13 11:51:49 robert Exp $
d6 1
@


1.70
log
@update to mono-2.10.8 and remove some old hacks now that we have
sem_timedwait()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2012/03/31 18:50:17 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mono-2.10.8
@


1.69
log
@Use autoconf 2.68.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2012/01/08 20:05:45 robert Exp $
d5 1
a5 3
DISTNAME=	mono-2.10.6

REVISION=	1
@


1.68
log
@fix after kinfo_proc2 removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/12/07 11:49:43 espie Exp $
d7 1
a7 1
REVISION=	0
d51 1
a51 1
AUTOCONF_VERSION=2.63
@


1.67
log
@fed up with mono not finding gmcs during fake.

I don't know why it doesn't find it, but it looks like the tmp inst
is supposed to get it...

so work around until eventually robert fixes this mess for real...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/11/09 22:13:37 robert Exp $
d6 2
@


1.66
log
@update to 2.10.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/11/03 09:55:12 ajacoutot Exp $
d101 7
@


1.65
log
@Fix prefix/exec_prefix in pkgconfig files.
spotted by Vadim Zhukov

Regen patches while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/09/16 10:31:21 espie Exp $
d5 1
a5 2
DISTNAME=	mono-2.10.5
REVISION=	1
@


1.64
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/08/29 10:53:22 robert Exp $
d6 1
a6 1
REVISION=		0
d94 3
@


1.63
log
@update to 2.10.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/08/24 10:01:21 espie Exp $
d6 1
@


1.62
log
@allow an interrupted build to be restarted.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/06/05 15:16:48 robert Exp $
d5 1
a5 2
DISTNAME=	mono-2.10.2
REVISION=	0
d28 2
a29 1
MASTER_SITES=	http://ftp.novell.com/pub/mono/sources/mono/
@


1.61
log
@use a different method to force using the bundled mcs.exe for bootstrapping
to avoid random build failures in fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/06/04 11:17:08 robert Exp $
d96 1
a96 1
	@@mkdir ${WRKSRC}/mcs/build/deps
@


1.60
log
@Make mono happy with vmmap. Thanks to Zoltan Varga from Mono for looking
into this issue and coming up with the fix:
Fix NOMAP32BIT support in specific trampolines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/04/27 08:50:15 robert Exp $
a42 2
MAKE_FLAGS=	EXTERNAL_MCS=false

d93 5
@


1.59
log
@update to 2.10.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/03/15 10:02:59 ajacoutot Exp $
d6 1
@


1.58
log
@Use the converters/libiconv MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/03/02 08:37:51 robert Exp $
d5 1
a5 2
DISTNAME=	mono-2.10.1
REVISION=	0
@


1.57
log
@update to 2.10.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/01/14 21:14:12 robert Exp $
d6 1
d27 1
a27 1
WANTLIB=	c iconv m pthread z stdc++
d32 2
a33 1
MODULES=	lang/mono
@


1.56
log
@update to 2.8.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/11/18 22:40:16 robert Exp $
d5 1
a5 1
DISTNAME=	mono-2.8.2
d13 1
@


1.55
log
@update to 2.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/11/17 08:05:18 espie Exp $
d5 1
a5 1
DISTNAME=	mono-2.8.1
@


1.54
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/07 19:12:42 espie Exp $
d5 1
a5 2
DISTNAME=	mono-2.8
REVISION=	0
@


1.53
log
@convert WANTLIB on geo/lang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/10/26 17:30:38 sthen Exp $
d43 1
a43 1
BUILD_DEPENDS=	:bison-*:devel/bison \
d45 2
a46 2
RUN_DEPENDS=	::x11/libgdiplus
LIB_DEPENDS=	::devel/boehm-gc
@


1.52
log
@adjust ifdefs so the kinfo_proc2 support is used. ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/10/18 19:20:42 espie Exp $
d46 2
a47 1
LIB_DEPENDS=	gc::devel/boehm-gc
@


1.51
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/10/16 13:21:20 robert Exp $
d6 1
@


1.50
log
@${_SYSTRACE_CMD} is not needed here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/10/15 16:21:07 robert Exp $
d36 1
@


1.49
log
@Update to mono-2.8;
there might be some breakage but this is the good time to do the update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/10/01 05:23:52 ajacoutot Exp $
d81 2
a82 2
		${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF} && \
		${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOHEADER}
@


1.48
log
@Sync WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/08/23 13:18:50 robert Exp $
d5 1
a5 2
DISTNAME=	mono-2.6.7
REVISION=	1
d9 5
a13 3
SHARED_LIBS +=  mono                 1.0      # .0.0
SHARED_LIBS +=  mono-profiler-cov    1.0      # .0.0
SHARED_LIBS +=  mono-profiler-aot    1.0      # .0.0
d25 1
a25 2
WANTLIB=	c glib-2.0 gmodule-2.0 gthread-2.0 \
		m pcre pthread z stdc++
d30 1
a30 2
MODULES=	devel/gettext \
		lang/mono
d49 1
a49 2
		CPPFLAGS="-I${LOCALBASE}/include" \
		LC_ALL=C
a51 1
		--with-glib=system \
d78 5
@


1.47
log
@- fix exception handling on amd64
- fix i386 builds
- remove a patchfile that is not needed anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/08/18 10:51:55 robert Exp $
d6 1
a6 1
REVISION=	0
d25 1
a25 1
		m pcre pthread z
@


1.46
log
@Update to 2.6.7; remove patches that were merged backed to upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/07/05 06:16:58 ajacoutot Exp $
d6 1
@


1.45
log
@ONLY_FOR_ARCHS is already part of the mono MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/06/28 18:15:24 robert Exp $
d5 1
a5 2
DISTNAME=	mono-2.6.4
PKGNAME=	${DISTNAME}p1
@


1.44
log
@Do not define GNU_SOURCE on OpenBSD otherwise it will pick up some
GNU API which will break badly on OpenBSD.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.43 2010/05/15 09:40:17 ajacoutot Exp $

# sync with net/avahi,-mono
ONLY_FOR_ARCHS=	amd64 i386 powerpc # arm
@


1.43
log
@Bump after recent mono MODULE change.

"sure" robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/05/10 20:17:31 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
@


1.42
log
@remove the gmake workaround
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/04/27 12:39:49 robert Exp $
d9 1
@


1.41
log
@Update to mono 2.6.4;
(a lot of patches are in upstream now)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/04/16 11:59:45 robert Exp $
a82 5

# XXX gmake randomy breaks here
pre-build:
	@@cd ${WRKSRC}/mono && exec ${_SYSTRACE_CMD} ${SETENV} ${MAKE_ENV} \
                ${MAKE} ${MAKE_FLAGS}
@


1.40
log
@Correctly calculate GC_stackbottom on OpenBSD and set the threadstack size
to a high value just like other BSD -s.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/04/08 16:40:04 robert Exp $
d8 1
a8 2
DISTNAME=	mono-2.6.3
PKGNAME=	${DISTNAME}p18
d55 1
a56 4
		--with-tls=pthread \
		--with-jit=yes \
		--with-interp=no \
		--with-libgdiplus=installed \
d83 5
@


1.39
log
@Use KERN_BOOTTIME to get the uptime instead of making up a value
because we don't have /proc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/04/08 14:58:10 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p17
@


1.38
log
@Disable shared handles because they are sometimes working, sometimes not.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/04/08 12:12:33 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p16
@


1.37
log
@Fix kinfo_proc2 code and add support for more mono stuff using sysctl to
get process informations. Remove the mkbundle.cs patch and replace it
with one that uses configure.in so the libgc dependency ends up in the
pkg-config file. Move disabled features to configure.in from our Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/04/05 10:39:35 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p15
d61 2
a62 1
		--enable-quiet-build=no
@


1.36
log
@Move lang/mono dependency to mono.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/04/05 01:02:57 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p14
a55 1
		--with-gc=boehm \
a59 1
		--with-sigaltstack=no \
@


1.35
log
@Enable shared handles and add USE_NANT to mono.port.mk to use NAnt
to build stuff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/04/01 21:53:51 robert Exp $
d35 2
@


1.34
log
@- use pthread_stackseg_np to get the stack boundaries on OpenBSD
- remove some scripts that we don't use from BASH_SCRIPTS
- ignore one of the regression tests and continue if it fails
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/03/28 15:25:15 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p13
d61 1
a61 2
		--enable-quiet-build=no \
		--disable-shared-handles
@


1.33
log
@mkdbundle has to link to libgc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/03/27 12:37:15 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p12
d53 8
a60 8
CONFIGURE_ARGS= ${CONFIGURE_SHARED} \
                --with-gc=boehm \
                --with-glib=system \
                --with-tls=pthread \
                --with-jit=yes \
                --with-interp=no \
                --with-sigaltstack=no \
                --with-libgdiplus=installed \
d62 1
a62 1
                --disable-shared-handles
a83 2
		web/mono-build-w32.sh \
		build-mingw32.sh \
@


1.32
log
@Use autoconf 2.63 and remove the SIZEOF_VOID_P definition from the CFLAGS
because new m4 in base fixes the SIZEOV_VOID_P -> SIZEOF_VOID__ stupidity,
so make sure you have up-to-date m4 before building the port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/03/27 12:06:26 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p11
@


1.31
log
@Remove the handles.c patch because that's not needed anymore because
Zoltan Varga from the mono team helped me to debug the problem we
were having. So the correct problem description is that on OpenBSD,
ctx can be NULL if we are interrupting poll().
The upstream diff also fixes the issue where we are interrupting
unmanaged code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/03/26 17:53:26 robert Exp $
d48 1
a48 1
AUTOCONF_VERSION=2.62
a62 6

.if ${MACHINE_ARCH} == "amd64"
CONFIGURE_ENV+=	CFLAGS="-DSIZEOF_VOID_P=8"
.else
CONFIGURE_ENV+=	CFLAGS="-DSIZEOF_VOID_P=4"
.endif
@


1.30
log
@retry 5 times then skip
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/03/26 17:01:02 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p10
@


1.29
log
@Sometimes we have the mutex is still in use by some other thread so
let's wait until it gets unlocked, this makes the random build errors
go away.. again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/03/26 13:13:47 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p9
@


1.28
log
@Remove the previous diff to mini.h because that was totally wrong, i made
it up before having my morning coffee.
So it turns out that sometimes the context on openbsd can be 0. This will
lead to problems. I suspect that this is because of our fantastic pthread
library. With the following diff we just skip doing some JIT stuff if the
context is 0 because the thread probably exited before.
Anyways this way everything *seems* to work fine and almost all regression
tests are passing now except for 2 out of 380.
Pepole understanding pthreads are welcome to look at it and come up with
something that is not a tripe XXX hack.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/03/26 10:41:55 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p8
@


1.27
log
@take maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/03/26 10:40:44 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p7
@


1.26
log
@Use the correct GET_CONTEXT macro otherwise we will get a 0 context
and that will freak everything out and crash.
Define EOVERFLOW based on our headers and remove the Makefile hack
that we don't need anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/03/24 17:57:50 robert Exp $
d19 1
a19 1
MAINTAINER=	Aleksander Piotrowski <alek@@openbsd.org>
@


1.25
log
@Forgot to re-enable some commented code, let's do it now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/03/23 10:21:32 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p6
@


1.24
log
@Add an ugly hack to this makefile to force the build until we figure out what's
really wrong.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/03/23 08:25:26 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p5
@


1.23
log
@Enable sigaction support on amd64 too, by using struct sigcontext.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/03/22 16:56:13 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p4
@


1.22
log
@Enable MONO_ARCH_USE_SIGACTION on i386 and switch it to use struct sigcontext,
which basically gives us exception support and sends those crashes away.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/03/22 09:49:59 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p3
@


1.21
log
@Ooops, remove gcc4 dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/03/22 09:48:15 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p2
@


1.20
log
@This part of the diff is not needed anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/03/21 17:35:05 robert Exp $
d34 1
a34 5
		lang/mono \
		gcc4

MODGCC4_ARCHES=	*
MODGCC4_LANGS=	c
@


1.19
log
@Use the upstream diff that was commited today their repository, because
this is how it's done correctly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/03/21 13:43:10 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p1
d34 5
a38 1
		lang/mono
@


1.18
log
@Include sys/param.h that was previously missed by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/03/20 17:16:44 robert Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
@


1.17
log
@- update to the latest stable version: 2.6.3
- move to autoconf
- regen patches

ok ajacoutot@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/01/19 15:07:01 jasper Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}
@


1.16
log
@- unbreak after KERN_PROC2 changes

reads ok to sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/12/17 14:00:34 ajacoutot Exp $
d8 2
a9 2
DISTNAME=	mono-2.5
PKGNAME=	${DISTNAME}p1
d30 1
a30 2
#MASTER_SITES=	http://ftp.novell.com/pub/mono/sources/mono/
MASTER_SITES=	http://ftp.novell.com/pub/mono/sources/moon/1.99.1/
d48 2
a49 1
CONFIGURE_STYLE=gnu
d63 6
@


1.15
log
@Bump after recent mono MODULE tweak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/10/10 09:44:59 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
@


1.14
log
@I need to write comments that I will be able to understand later...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/10/09 18:18:23 ajacoutot Exp $
d9 2
@


1.13
log
@Comment reminder.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/09/22 17:55:23 ajacoutot Exp $
d3 1
a3 1
# sync with update net/avahi,-mono
@


1.12
log
@More work into making this compile on armish.
We are up to the point where it segfaults during build as some other arches
used to in the past... so somehow, this is an improvement ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/09/06 07:25:27 ajacoutot Exp $
d3 1
@


1.11
log
@Major update to mono-2.5.
While beeing a development release, this is the most stable version I
used on OpenBSD for now. Several patches are removed as they went
upstream. Thanks to jolan@@ for pointing me at this release and cooking a
couple of patches.

Fix build on powerpc and add it to ONLY_FOR_ARCHS ; slightly tested on
macppc.

A similar port was successfuly tested by jolan@@ on amd64.

no objection alek@@ (maintainer)
ok jolan@@ ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/07/21 13:51:41 jasper Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	amd64 i386 powerpc
@


1.10
log
@ECURITY FIX for CVE-2009-0217 (XML Signature HMAC Truncation Spoofing)

patch extracted from mono 2.4.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/03/15 02:19:31 kurt Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	amd64 i386
d7 1
a7 2
DISTNAME=	mono-2.0
PKGNAME=	${DISTNAME}p6
d10 3
a12 3
SHARED_LIBS=	mono-profiler-aot	0.0 \
		mono-profiler-cov	0.0 \
		mono			0.0
d27 2
a28 1
MASTER_SITES=	ftp://ftp.novell.com/pub/mono/sources/mono/
d31 3
d37 4
a40 2
MODULES=	devel/gettext \
		lang/mono
d48 12
a59 5
		CPPFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
		CFLAGS="${CFLAGS} -I${LOCALBASE}/include"
CONFIGURE_ARGS=	--with-gc=boehm --with-glib=system --with-tls=pthread \
		--with-jit=yes --with-interp=no --with-sigaltstack=no \
		--with-libgdiplus=installed --disable-shared-handles
d64 20
a83 1
		mcs/tools/mono-shlib-cop/mono-shlib-cop.exe.config
d86 7
@


1.9
log
@- semop(2) is not supported by pthreads, so disable its use
- ensure boehm-gc headers are included with thread support enabled
okay robert@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/02/03 09:41:40 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p5
@


1.9.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2009-0217 (XML Signature HMAC Truncation Spoofing)

patch extracted from mono 2.4.2.2, by jasper@@

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/07/21 13:51:41 jasper Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p6
@


1.8
log
@- use gettext MODULE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/01/21 16:06:59 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p4
d47 1
a47 1
		--with-libgdiplus=installed
@


1.7
log
@- use FAKE_FLAGS instead of the post-install danse; install more @@sample
files in the process
- link with -pthread, not -lpthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/10/24 07:06:01 jasper Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
d10 1
d25 1
a25 1
WANTLIB=	c glib-2.0 gmodule-2.0 gthread-2.0 intl \
d34 2
a35 1
MODULES=	converters/libiconv lang/mono
@


1.6
log
@- don't install jay.1 into share/man/man1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/17 09:07:12 robert Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
a38 1

d52 1
a52 16
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mono
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mono/net_1_1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mono/net_2_0

	${INSTALL_DATA} ${WRKSRC}/data/config \
		${WRKSRC}/data/browscap.ini \
		${PREFIX}/share/examples/mono/

	${INSTALL_DATA} ${WRKSRC}/data/net_1_1/DefaultWsdlHelpGenerator.aspx \
		${WRKSRC}/data/net_1_1/machine.config \
		${PREFIX}/share/examples/mono/net_1_1/

	${INSTALL_DATA} ${WRKSRC}/data/net_2_0/DefaultWsdlHelpGenerator.aspx \
		${WRKSRC}/data/net_2_0/machine.config \
		${PREFIX}/share/examples/mono/net_2_0/
@


1.5
log
@install some essential config files needed by some other ports,
fix nunit.pc.in by jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/10/16 21:47:10 jasper Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.4
log
@- set CATEGORIES+=lang/mono via mono.port.mk, instead of every port doing
it themselves. like other modules do too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/10/16 16:00:27 robert Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.3
log
@- fix the pkg-config files and introduce a mono module that removes
all of the hardcoded library versions from the files that we provide
in each mono-* port
- install example config files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/10/15 21:33:25 robert Exp $
d8 1
@


1.2
log
@we don't have MAP_32BIT on amd64 so don't use it and disable generic
code sharing; makes mono work on amd64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/10/15 13:34:10 robert Exp $
d32 1
a32 1
MODULES=	converters/libiconv
d35 1
a35 1
RUN_DEPENDS+=	::x11/libgdiplus
d46 22
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
ONLY_FOR_ARCHS=	i386
d29 1
a29 1
#USE_LIBTOOL=	Yes
@


1.1.1.1
log
@import of mono-2.0:

Mono is an open source implementation of .NET Development Framework.
Its objective is to enable UNIX developers to build and deploy cross-platform
.NET Applications. The project implements various technologies developed by
Microsoft that have now been submitted to the ECMA for standardization.

Mono provides the necessary software to develop and run .NET client and
server applications on BSD, Linux, Solaris, Mac OS X, Windows and Unix.

from alek@@, modifications by me and some amd64 patches from
Giovanni Bechis

mono is not linked to the build yet, it's getting imported so we can
work on it in tree;
@
text
@@
