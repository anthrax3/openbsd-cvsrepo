head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.6
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.4
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.1.0.16
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.12
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.01.29.20.12.04;	author abieber;	state Exp;
branches;
next	1.2;
commitid	qI9YnmqKmCmi0CqS;

1.2
date	2015.10.24.02.46.47;	author abieber;	state dead;
branches;
next	1.1;
commitid	ed5E7Ght7haAuPfD;

1.1
date	2012.06.28.08.30.28;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Add in node-pledge module so users can require() it out of the box.
Build against openssl in ports.
Update to latest stable release of node.

OK giovanni@@
@
text
@$OpenBSD$
--- deps/npm/bin/node-gyp-bin/node-gyp.orig	Wed Dec 23 09:53:37 2015
+++ deps/npm/bin/node-gyp-bin/node-gyp	Fri Jan 22 15:29:28 2016
@@@@ -1,6 +1,5 @@@@
 #!/usr/bin/env sh
-if [ "x$npm_config_node_gyp" = "x" ]; then
-  node "`dirname "$0"`/../../node_modules/node-gyp/bin/node-gyp.js" "$@@"
-else
-  "$npm_config_node_gyp" "$@@"
-fi
+
+# stop trying to be cute and just call node-gyp with the full path
+
+node ${LOCALBASE}/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js "$@@"
@


1.2
log
@Finally update node to the latest version, lots of changes:
 - Use internal OpenSSL (no LibreSSL :( )
 - Remove node.port.mk as there are no longer any modules in ports.
 - Remove various patches that are now upstream.
 - Fix some tests by telling test.py the fully qualified path to node
 - Add gcc as a RUN dep for building native node modules.
 - Clean up Makefile a bit.

OK juanfra@@
@
text
@d1 4
a4 4
$OpenBSD: patch-deps_npm_bin_node-gyp-bin_node-gyp,v 1.1 2012/06/28 08:30:28 jasper Exp $
--- deps/npm/bin/node-gyp-bin/node-gyp.orig	Mon Jun 25 16:15:51 2012
+++ deps/npm/bin/node-gyp-bin/node-gyp	Mon Jun 25 16:16:25 2012
@@@@ -1,2 +1,16 @@@@
d6 5
a10 1
-node "`dirname "$0"`/../../node_modules/node-gyp/bin/node-gyp.js" "$@@"
d12 1
a12 1
+# dirname "$0" will have a different result when called internaly by node.
d14 1
a14 12
+DIR1=$( dirname "$0" )/../../node_modules/node-gyp/bin/node-gyp.js
+DIR2=$( dirname "$0" )/../lib/node_modules/node-gyp/bin/node-gyp.js
+
+if [ -e $DIR1 ]; then
+	node "$DIR1" "$@@" 
+else
+	if [ -e $DIR2 ]; then
+		node "$DIR2" "$@@" 
+	else 
+		echo "Can't find node-gyp.js!"
+	fi
+fi
@


1.1
log
@- update node to 0.8.0
* please see this blog post for more details on the changes:
  http://blog.nodejs.org/2012/06/25/node-v0-8-0/
  * the migration wiki can be consulted to port your code to node 0.8:
    https://github.com/joyent/node/wiki/API-changes-between-v0.6-and-v0.8
    - expose node-gyp, so it's now installed into ${LOCALBASE}/bin/ too

    from aaron bieber with tweaks by me
    ok jeremy@@
@
text
@d1 1
a1 1
$OpenBSD$
@

