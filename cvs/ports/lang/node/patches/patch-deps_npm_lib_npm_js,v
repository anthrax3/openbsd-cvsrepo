head	1.4;
access;
symbols
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2017.01.23.16.47.04;	author abieber;	state Exp;
branches;
next	1.3;
commitid	xBUY4sNTydDQXYd6;

1.3
date	2014.07.10.19.53.30;	author landry;	state Exp;
branches;
next	1.2;
commitid	59gz4Ni8sLt6wlhz;

1.2
date	2012.09.14.22.40.20;	author abieber;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.23.17.29.44;	author abieber;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Bump node to latest. Tested on amd64 and i386.

- fix Makefile layout
- back to using internal openssl :(

Rough OK from awolk@@, OK fcambus@@
@
text
@$OpenBSD: patch-deps_npm_lib_npm_js,v 1.3 2014/07/10 19:53:30 landry Exp $
--- deps/npm/lib/npm.js.orig	Mon Dec 12 11:29:06 2016
+++ deps/npm/lib/npm.js	Mon Dec 12 11:29:39 2016
@@@@ -288,7 +288,7 @@@@
         // go ahead and spin up the registry client.
         npm.registry = new CachingRegClient(npm.config)
 
-        var umask = npm.config.get('umask')
+        var umask = npm.config.get('umask') || 0022
         npm.modes = {
           exec: parseInt('0777', 8) & (~umask),
           file: parseInt('0666', 8) & (~umask),
@


1.3
log
@Regen patches.
@
text
@d1 6
a6 6
$OpenBSD: patch-deps_npm_lib_npm_js,v 1.2 2012/09/14 22:40:20 abieber Exp $
--- deps/npm/lib/npm.js.orig	Fri May  2 02:47:47 2014
+++ deps/npm/lib/npm.js	Thu Jul 10 15:58:13 2014
@@@@ -368,7 +368,7 @@@@ function load (npm, cli, cb) {
         }
       }
d8 5
a12 5
-      var umask = npm.config.get("umask")
+      var umask = 0022
       npm.modes = { exec: 0777 & (~umask)
                   , file: 0666 & (~umask)
                   , umask: umask }
@


1.2
log
@- update node to 0.8.9

OK jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-deps_npm_lib_npm_js,v 1.1 2012/08/23 17:29:44 abieber Exp $
--- deps/npm/lib/npm.js.orig	Fri Sep 14 14:31:07 2012
+++ deps/npm/lib/npm.js	Fri Sep 14 14:31:23 2012
@@@@ -323,7 +323,7 @@@@ function load (npm, cli, cb) {
@


1.1
log
@- update node to 0.8.7
- add @@mandir to plist
OK sthen@@, jasper@@
@
text
@d1 5
a5 4
$OpenBSD$
--- deps/npm/lib/npm.js.orig	Tue Aug 21 19:41:11 2012
+++ deps/npm/lib/npm.js	Tue Aug 21 19:41:59 2012
@@@@ -341,8 +341,8 @@@@ function load (npm, cli, cb) {
d8 4
a11 5
       var umask = parseInt(cli.umask, 8)
-      npm.modes = { exec: 0777 & (~umask)
-                  , file: 0666 & (~umask)
+      npm.modes = { exec: 0755 & (~umask)
+                  , file: 0644 & (~umask)
a12 2
 
       chain([ [ loadPrefix, npm, cli ]
@

