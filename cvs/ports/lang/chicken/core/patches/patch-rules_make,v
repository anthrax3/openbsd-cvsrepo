head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.6
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.4
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.2.0.6
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2016.06.08.01.24.45;	author juanfra;	state Exp;
branches;
next	1.2;
commitid	bQZcmQDu7zpfjoKY;

1.2
date	2014.07.04.18.26.49;	author juanfra;	state Exp;
branches;
next	1.1;
commitid	sulJhnrJ4IhswSbO;

1.1
date	2014.03.09.20.17.01;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to Chicken 4.11. From MAINTAINER. Tested on amd64 and macppc.
@
text
@$OpenBSD: patch-rules_make,v 1.2 2014/07/04 18:26:49 juanfra Exp $
disable DESTDIR check so chicken-install will run
--- rules.make.orig	Wed Apr  6 07:01:56 2016
+++ rules.make	Wed Apr  6 07:02:34 2016
@@@@ -214,7 +214,7 @@@@ $(foreach obj, $(ALWAYS_STATIC_UTILITY_PROGRAM_OBJECTS
 
 libs: $(TARGETLIBS)
 
-lib$(PROGRAM_PREFIX)chicken$(PROGRAM_SUFFIX)$(SO): $(LIBCHICKEN_SHARED_OBJECTS)
+lib$(PROGRAM_PREFIX)chicken$(PROGRAM_SUFFIX)$(SO).$(LIBchicken_VERSION): $(LIBCHICKEN_SHARED_OBJECTS)
 	$(LINKER) $(LINKER_OPTIONS) $(LINKER_LINK_SHARED_LIBRARY_OPTIONS) $(LIBCHICKEN_SO_LINKER_OPTIONS) \
 	  $(LINKER_OUTPUT) $^ $(LIBCHICKEN_SO_LIBRARIES)
 ifdef USES_SONAME
@


1.2
log
@Update to chicken 4.9.0.1 by Timo Myyra (MAINTAINER). ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- rules.make.orig	Sat Jun  7 15:24:41 2014
+++ rules.make	Tue Jul  1 09:24:42 2014
@@@@ -221,7 +221,7 @@@@ $(foreach obj, $(ALWAYS_STATIC_UTILITY_PROGRAM_OBJECTS
d9 2
a10 2
-lib$(PROGRAM_PREFIX)chicken$(PROGRAM_SUFFIX)$(SO): $(LIBCHICKEN_SHARED_OBJECTS) $(APPLY_HACK_OBJECT)
+lib$(PROGRAM_PREFIX)chicken$(PROGRAM_SUFFIX)$(SO).$(LIBchicken_VERSION): $(LIBCHICKEN_SHARED_OBJECTS) $(APPLY_HACK_OBJECT)
@


1.1
log
@- long overdue update of chicken to 4.8.0.5
- Timo takes maintainership

mostly by Timo Myyra, with some cleaning/tweaks by sthen@@/me
@
text
@d2 3
a4 2
--- rules.make.orig	Mon Sep 24 21:47:56 2012
+++ rules.make	Mon Sep 24 21:50:40 2012
a13 18
@@@@ -306,7 +306,7 @@@@ ifdef DLLSINPATH
 	$(MAKEDIR_COMMAND) $(MAKEDIR_COMMAND_OPTIONS) "$(DESTDIR)$(IBINDIR)"
 	$(INSTALL_PROGRAM) $(INSTALL_PROGRAM_SHARED_LIBRARY_OPTIONS) $(LIBCHICKEN_SO_FILE) "$(DESTDIR)$(IBINDIR)"
 else
-	$(INSTALL_PROGRAM) $(INSTALL_PROGRAM_SHARED_LIBRARY_OPTIONS) $(LIBCHICKEN_SO_FILE) "$(DESTDIR)$(ILIBDIR)$(SEP)$(LIBCHICKEN_SO_FILE)$(SONAME_VERSION)"
+	$(INSTALL_PROGRAM) $(INSTALL_PROGRAM_SHARED_LIBRARY_OPTIONS) $(LIBCHICKEN_SO_FILE) "$(DESTDIR)$(ILIBDIR)$(SEP)$(LIBCHICKEN_SO_FILE)"
 endif
 ifdef USES_SONAME
 	cd "$(DESTDIR)$(ILIBDIR)" && ln -sf $(LIBCHICKEN_SO_FILE).$(BINARYVERSION) lib$(PROGRAM_PREFIX)chicken$(PROGRAM_SUFFIX)$(SO)
@@@@ -348,7 +348,7 @@@@ install-bin:
 	$(REMOVE_COMMAND) $(REMOVE_COMMAND_OPTIONS) $(IMPORT_LIBRARIES:%=%.so)
 	$(REMOVE_COMMAND) $(REMOVE_COMMAND_OPTIONS) $(IMPORT_LIBRARIES:%=%.import.so)
 	$(REMOVE_COMMAND) $(REMOVE_COMMAND_OPTIONS) $(LIBCHICKEN_SO_FILE)
-	$(MAKE) -f $(SRCDIR)Makefile.$(PLATFORM) CONFIG=$(CONFIG) NEEDS_RELINKING=no RUNTIME_LINKER_PATH="$(LIBDIR)" SONAME_VERSION=.$(BINARYVERSION) install-bin
+	$(MAKE) -f $(SRCDIR)Makefile.$(PLATFORM) CONFIG=$(CONFIG) NEEDS_RELINKING=no RUNTIME_LINKER_PATH="$(LIBDIR)" SONAME_VERSION=.$(LIBchicken_VERSION) install-bin
 # Damn. What was this for, again?
 #
 # 	$(MAKE_WRITABLE_COMMAND) $(CHICKEN_PROGRAM)$(EXE) $(CSI_PROGRAM)$(EXE) $(CSC_PROGRAM)$(EXE) $(CHICKEN_PROFILE_PROGRAM)$(EXE)
@

