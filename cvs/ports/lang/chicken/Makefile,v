head	1.22;
access;
symbols
	OPENBSD_6_1:1.22.0.12
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.22.0.10
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.22.0.6
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.22.0.8
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.22.0.4
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.21.0.4
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.17.0.6
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.4
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.8.0.4
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	steven-20060604:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2014.03.09.20.17.01;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches
	1.21.4.1;
next	1.20;

1.20
date	2013.03.11.11.20.27;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2012.10.15.15.18.32;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.08.23.18.53.49;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.09.06.23.35;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.17.08.05.17;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.07.19.12.42;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.23.11.04.19;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.18.19.20.41;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.19.20.19.39;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2010.06.11.21.09.49;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2009.10.09.13.03.22;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2009.09.23.20.56.22;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2008.08.20.00.06.20;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.16.00.27.05;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2007.04.24.17.07.19;	author martynas;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.01.17.56.39;	author deanna;	state Exp;
branches;
next	1.4;

1.4
date	2006.07.31.08.07.54;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.07.30.12.25.19;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.07.26.18.35.06;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.04.10.36.03;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.06.04.10.36.03;	author steven;	state Exp;
branches;
next	;

1.21.4.1
date	2014.05.22.11.22.46;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.22
log
@- long overdue update of chicken to 4.8.0.5
- Timo takes maintainership

mostly by Timo Myyra, with some cleaning/tweaks by sthen@@/me
@
text
@# $OpenBSD$

SUBDIR =
SUBDIR += bootstrap
SUBDIR += core

.include <bsd.port.subdir.mk>
@


1.21
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/11 11:20:27 espie Exp $
d3 3
a5 1
COMMENT=	practical and portable Scheme system
d7 1
a7 37
DISTNAME=	chicken-2.6
EPOCH=		0

SHARED_LIBS +=	chicken              1.0      # .0.0
SHARED_LIBS +=	uchicken             1.0      # .0.0

CATEGORIES=	lang

HOMEPAGE=	http://www.call-with-current-continuation.org/

MASTER_SITES=	${HOMEPAGE}

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c m pthread

USE_GMAKE=		Yes
USE_GROFF =		Yes

LIB_DEPENDS +=		devel/libffi
WANTLIB +=		ffi

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		${CONFIGURE_SHARED}
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -pthread" \
			LDFLAGS="-L${LOCALBASE}/lib -pthread"

TEST_TARGET=		bench
TEST_DEPENDS=	${FULLPKGNAME}:lang/chicken

CFLAGS+=		-I${LOCALBASE}/include

pre-configure:
	${SUBST_CMD} ${WRKSRC}/cscbench.scm

.include <bsd.port.mk>
@


1.21.4.1
log
@security fix for CVE-2014-3776,
buffer overflow in "read-u8vector!" procedure leads to DoS or arbitrary code exec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/03/21 08:46:32 ajacoutot Exp $
a6 1
REVISION=	0
@


1.20
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/10/15 15:18:32 sthen Exp $
a22 1
USE_LIBTOOL=		Yes
@


1.19
log
@zap trailing whitespace in files where it's present on PERMIT_* lines
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/08/23 18:53:49 sthen Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d34 2
a35 2
REGRESS_TARGET=		bench
REGRESS_DEPENDS=	${FULLPKGNAME}:lang/chicken
@


1.18
log
@sync wantlib and bump epoch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/03/09 06:23:35 ajacoutot Exp $
d18 3
a20 3
PERMIT_PACKAGE_CDROM=	Yes 
PERMIT_PACKAGE_FTP=	Yes 
PERMIT_DISTFILES_CDROM= Yes 
@


1.17
log
@Use FULLPKGNAME in REGRESS_DEPENDS, much less error-prone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/17 08:05:17 espie Exp $
d6 1
a6 1
REVISION=	3
a16 2
WANTLIB=	c m

d22 2
@


1.16
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/07 19:12:42 espie Exp $
d38 1
a38 1
REGRESS_DEPENDS=	${PKGNAME}:lang/chicken
@


1.15
log
@convert WANTLIB on geo/lang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/23 11:04:19 jasper Exp $
d27 1
a27 1
USE_GROFF =	Yes
d29 1
a29 1
LIB_DEPENDS +=		::devel/libffi
d38 1
a38 1
REGRESS_DEPENDS=	:${PKGNAME}:lang/chicken
@


1.14
log
@- remove deanna@@ as maintainer after several tries and a very long timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/10/18 19:20:41 espie Exp $
d29 2
a30 1
LIB_DEPENDS+=		ffi::devel/libffi
@


1.13
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/09/19 20:19:39 jasper Exp $
d6 1
a6 1
REVISION=	2
a13 2

MAINTAINER=	Deanna Phillips <deanna@@openbsd.org>
@


1.12
log
@- adjust after libffi update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/06/11 21:09:49 landry Exp $
d29 1
@


1.11
log
@Remove sparc64-specific hack since it switched to gcc4.
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/10/09 13:03:22 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d34 2
a35 2
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.10
log
@- switch chicken to use libffi
- regen PLIST

maintained timed-out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/09/23 20:56:22 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
a40 7

# gcc 3.3.5 internal compiler error
.if ${MACHINE_ARCH} == "sparc64"
EXTRA_CFLAGS=	-O0
.endif

MAKE_FLAGS+=		EXTRA_CFLAGS=${EXTRA_CFLAGS}
@


1.9
log
@- explicitly disable libffi for now (to be revisited soon)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/08/20 00:06:20 espie Exp $
d6 1
d30 2
d33 4
a36 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--without-libffi
d48 3
@


1.8
log
@fix bogus REGRESS_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/16 00:27:05 merdely Exp $
d30 2
a31 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED}

@


1.7
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/04/24 17:07:19 martynas Exp $
d33 1
a33 1
REGRESS_DEPENDS=	${PKGNAME}:lang/chicken
@


1.6
log
@update to 2.6
ok maintainer deanna@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/01/01 17:56:39 deanna Exp $
d3 1
a3 1
COMMENT=	"practical and portable Scheme system"
@


1.5
log
@Update to 2.5.

Testing by steven@@ and Joachim Schipper, thanks!

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/07/31 08:07:54 steven Exp $
d5 1
a5 1
DISTNAME=	chicken-2.5
@


1.4
log
@- make the compiler find its header files
- set up paths correctly for extensions to work
from maintainer Deanna Phillips <deanna at sdf.lonestar.org>

clean up a bit while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/07/30 12:25:19 steven Exp $
d5 5
a9 4
DISTNAME=	chicken-2.41
PKGNAME=	${DISTNAME}p1
SHARED_LIBS=	chicken		0.0 \
		uchicken	0.0
d14 5
a18 1
MAINTAINER=	Deanna Phillips <deanna@@sdf.lonestar.org>
d26 5
a30 1
MASTER_SITES=	${HOMEPAGE}
d32 2
a33 1
WANTLIB=	c m
d35 1
a35 5
SEPARATE_BUILD=	simple
USE_GMAKE=	Yes
USE_LIBTOOL=	Yes
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
d42 1
a42 4
# benchmark runs into forever loop at low nursery sizes on some architectures
# fix this value at 128k instead of using the benchmark
MAKE_FLAGS=	NURSERY=131072 \
		EXTRA_CFLAGS=${EXTRA_CFLAGS}
@


1.3
log
@compile only the problem source file with -O0 on sparc64.

prompted by and "looks good" sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/07/26 18:35:06 steven Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
a39 7

DOCDIR=		${PREFIX}/share/doc/chicken
DOCS=		chicken.html ChangeLog README LICENSE

post-install:
	${INSTALL_DATA_DIR} ${DOCDIR}
	cd ${WRKSRC} && ${INSTALL_DATA} ${DOCS} ${DOCDIR}
@


1.2
log
@update to chicken 2.41

from maintainer Deanna Phillips <deanna at sdf.lonestar.org>

use -O0 on sparc64 to avoid an internal compiler error.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/06/04 10:36:03 steven Exp $
d6 1
d33 1
a33 1
CFLAGS+=	-O0
d38 2
a39 1
MAKE_FLAGS=	NURSERY=131072
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=	"scheme to C compiler, scheme interpreter"
d5 1
a5 1
DISTNAME=	chicken-2.3
d29 9
@


1.1.1.1
log
@import chicken 2.3

CHICKEN is a compiler for the Scheme programming language. CHICKEN
produces portable, efficient C, supports almost all of the current
Scheme language standard, the Revised Report on the Algorithmic Language
Scheme (R5RS), and includes many enhancements and extensions.

submitted by Deanna Phillips <deanna at sdf.lonestar.org>

go ahead espie@@
@
text
@@
