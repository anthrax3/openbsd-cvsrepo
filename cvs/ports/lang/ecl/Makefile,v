head	1.34;
access;
symbols
	OPENBSD_6_2:1.34.0.4
	OPENBSD_6_2_BASE:1.34
	OPENBSD_6_1:1.34.0.2
	OPENBSD_6_1_BASE:1.34
	OPENBSD_6_0:1.29.0.2
	OPENBSD_6_0_BASE:1.29
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.4
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.15.0.4
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.15.0.2
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	ecl:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.34
date	2017.02.21.09.08.22;	author jca;	state Exp;
branches;
next	1.33;
commitid	NiKwFdFgoMAEClcp;

1.33
date	2016.12.28.19.38.56;	author juanfra;	state Exp;
branches;
next	1.32;
commitid	cvcc2dEKiz10E02T;

1.32
date	2016.12.20.20.12.29;	author juanfra;	state Exp;
branches;
next	1.31;
commitid	x6oc6eGJ7cUtRsIF;

1.31
date	2016.10.13.15.14.29;	author jca;	state Exp;
branches;
next	1.30;
commitid	J2NUsGw9spt8ZHr2;

1.30
date	2016.09.01.10.53.27;	author jasper;	state Exp;
branches;
next	1.29;
commitid	LdsIxWmxagN2Kq33;

1.29
date	2016.03.16.21.19.38;	author naddy;	state Exp;
branches;
next	1.28;
commitid	eS3Ayl3CL8hkKETd;

1.28
date	2016.03.13.00.18.19;	author juanfra;	state Exp;
branches;
next	1.27;
commitid	xUw8uAA7yeYPVbBK;

1.27
date	2016.01.25.19.52.07;	author jasper;	state Exp;
branches;
next	1.26;
commitid	mdOA07PM5IQGOaV0;

1.26
date	2016.01.25.19.09.51;	author jasper;	state Exp;
branches;
next	1.25;
commitid	RIOcuZU0ZITxuCdJ;

1.25
date	2015.08.29.14.48.34;	author jasper;	state Exp;
branches;
next	1.24;
commitid	y07lV19Nif3aKbCa;

1.24
date	2015.07.19.02.14.57;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	c3tyZBovnFWQazMD;

1.23
date	2014.07.11.13.10.53;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	SMULh05LvmDXWBeg;

1.22
date	2014.07.11.09.10.27;	author robert;	state Exp;
branches;
next	1.21;
commitid	Zze71FpabWhKfLOr;

1.21
date	2013.08.07.09.14.38;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2013.06.11.10.31.35;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.11.10.30.54;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.06.01.14.28.28;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.11.11.20.27;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2012.03.30.09.06.34;	author phessler;	state Exp;
branches;
next	1.14;

1.14
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.16.10.31.20;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2011.06.13.21.04.58;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.20.15.45.16;	author shadchin;	state Exp;
branches;
next	1.10;

1.10
date	2010.12.04.14.36.19;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.30.11.23.39;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.17.08.05.17;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.24.21.06.28;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.18.19.20.41;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.09.20.18.02.47;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.13.18.14.17;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.16.11.19.12;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2008.08.19.23.45.58;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2008.05.06.09.31.25;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.05.06.09.31.25;	author espie;	state Exp;
branches;
next	;


desc
@@


1.34
log
@Remove BROKEN-arm; seems reliable here
@
text
@# $OpenBSD: Makefile,v 1.33 2016/12/28 19:38:56 juanfra Exp $

COMMENT =	embeddable common-lisp
CATEGORIES =	lang

BROKEN-mips64 =	ecl_min fails

V =		16.1.3
DISTNAME =	ecl-$V
SHARED_LIBS +=	ecl	6.0
REVISION =	0

HOMEPAGE =	https://common-lisp.net/project/ecl/
MAINTAINER =	Timo Myyra <timo.myyra@@wickedbsd.net>

SUBST_VARS =	V
EXTRACT_SUFX =	.tgz

# GPLv2 or later
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		${HOMEPAGE}static/files/release/

USE_GMAKE =		Yes
CONFIGURE_STYLE =	gnu
TEST_TARGET =		check
CONFIGURE_ENV +=	CPPFLAGS=-I${LOCALBASE}/include \
			ECLLIB_VERSION=${LIBecl_VERSION} \
			ecldir=${LOCALBASE}/lib/ecl

CONFIGURE_ARGS +=	--enable-boehm=system \
			--enable-libatomic=system \
			--with-system-gmp \
			--with-gmp-prefix=${LOCALBASE}

# etags gets picked up if it's installed, and dumps core while
# generating the tags. so override it for now untill etags is fixed.
CONFIGURE_ENV +=	ETAGS=/usr/bin/true

WANTLIB +=	atomic_ops c ffi gc gmp m pthread

LIB_DEPENDS +=	devel/gmp \
		devel/boehm-gc,-main \
		devel/boehm-gc,-atomic \
		devel/libffi

TEST_DEPENDS =	${BASE_PKGPATH}

# XXX: Workaround for missing Copyright file
post-configure:
	@@cp ${WRKSRC}/{LICENSE,Copyright}

.include <bsd.port.mk>
@


1.33
log
@Fix the issue causing maxima test failure (atan2). From Timo Myyra (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/12/20 20:12:29 juanfra Exp $
a6 1
BROKEN-arm =	infinite loop while building
@


1.32
log
@Update to ecl 16.1.3. From Timo Myyra (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/10/13 15:14:29 jca Exp $
d12 1
d15 1
@


1.31
log
@Fix MASTER_SITES

Patch from Dan Andersen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/09/01 10:53:27 jasper Exp $
d9 1
a9 1
V =		16.1.2
d11 1
a11 1
SHARED_LIBS +=	ecl	5.0
d23 1
@


1.30
log
@retire sparc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/03/16 21:19:38 naddy Exp $
d21 1
a21 1
MASTER_SITES =		${HOMEPAGE}files/release/${V}/
@


1.29
log
@remove SHARED_ONLY from ports that use only the gnu module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/03/13 00:18:19 juanfra Exp $
a6 1
BROKEN-sparc =	infinite loop while building
@


1.28
log
@Update to ecl 16.1.2. From Timo Myyra.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/01/25 19:52:07 jasper Exp $
a12 1
SHARED_ONLY =	Yes
@


1.27
log
@mark broken on mips64 for ecl_min fails to build ecl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/01/25 19:09:51 jasper Exp $
d10 1
a10 1
V =		16.0.0
d12 1
a12 1
SHARED_LIBS +=	ecl	4.0
d23 1
a23 1
MASTER_SITES =		${HOMEPAGE}files/
d48 4
@


1.26
log
@spello
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/08/29 14:48:34 jasper Exp $
d6 1
@


1.25
log
@- update to ecl-16.0.0

from Timo Myyra who got upstream to fix various issues on OpenBSD too
feedback from juanfra@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/07/19 02:14:57 ajacoutot Exp $
d35 1
a35 1
# etags gets picked up if it's install, and dumps core while
@


1.24
log
@Kill debug FLAVOR; same can be achieved by running "make DEBUG= ... "
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/07/11 13:10:53 ajacoutot Exp $
d9 1
a9 1
V =		13.5.1
d11 1
a11 1
SHARED_LIBS +=	ecl	3.0
d14 1
a14 1
REVISION =	1
a15 1
HOMEPAGE =	http://ecls.sourceforge.net/
d22 1
a22 1
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=ecls/}
d27 2
a28 1
			ECLLIB_VERSION=${LIBecl_VERSION}
a31 1
			--enable-threads=pthreads \
d39 2
d46 1
a46 1
WANTLIB +=	atomic_ops c ffi gc gmp m pthread
@


1.23
log
@Fix dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/07/11 09:10:27 robert Exp $
a28 2
FLAVORS =		debug
FLAVOR ?=
a38 4

.if ${FLAVOR:Mdebug}
CONFIGURE_ARGS +=	--with-debug-cflags=-g
.endif
@


1.22
log
@add devel/boehm-gc,-atomic as a RUN_DEPEND as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/08/07 09:14:38 sthen Exp $
d14 1
a14 1
REVISION =	0
a45 3
BUILD_DEPENDS += devel/boehm-gc,-atomic
RUN_DEPENDS +=	${BUILD_DEPENDS}

d47 2
a48 1
		devel/boehm-gc \
d51 1
a51 1
WANTLIB +=	c ffi gc gmp m pthread
@


1.21
log
@mark BROKEN-arm; infinite loop during building happens there as well as sparc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/06/11 10:31:35 sthen Exp $
d14 2
d47 1
@


1.20
log
@tweak whitespace: zap <space><tab>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/06/11 10:30:54 sthen Exp $
d7 1
@


1.19
log
@update to ecl 13.5.1, from Timo Myyra
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/06/01 14:28:28 ajacoutot Exp $
d3 2
a4 2
COMMENT = 	embeddable common-lisp
CATEGORIES = 	lang
d9 1
a9 1
DISTNAME = 	ecl-$V
d13 1
a13 1
HOMEPAGE = 	http://ecls.sourceforge.net/
d18 1
a18 1
PERMIT_PACKAGE_CDROM = 	Yes
d22 2
a23 2
CONFIGURE_STYLE = 	gnu
TEST_TARGET = 		check
d29 1
a29 1
CONFIGURE_ARGS += 	--enable-boehm=system \
@


1.18
log
@Drop pthread patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/21 08:46:32 ajacoutot Exp $
d8 1
a8 1
V =		11.1.1
d10 2
a11 2
REVISION=	1
SHARED_LIBS +=	ecl	2.0
d15 1
d23 1
a23 3
USE_GMAKE = 		Yes
USE_GROFF =		Yes
NO_TEST = 		Yes
d30 2
d34 1
d43 1
a43 4
MODGNU_CONFIG_GUESS_DIRS = 	${WRKDIST} \
				${WRKDIST}/src \
				${WRKDIST}/src/gc \
				${WRKDIST}/src/gmp
@


1.17
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/11 11:20:27 espie Exp $
d10 1
a10 1
REVISION=		0
@


1.16
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/03/30 09:06:34 phessler Exp $
a22 1
USE_LIBTOOL = 		Yes
@


1.15
log
@mark as BROKEN on sparc, the build gets stuck in an infinite loop
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/12/02 14:36:14 espie Exp $
a17 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP = 	Yes
d25 1
a25 1
NO_REGRESS = 		Yes
@


1.14
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/16 10:31:20 espie Exp $
d5 2
@


1.13
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/06/13 21:04:58 jasper Exp $
d39 1
a39 1
.if ${FLAVOR:L:Mdebug}
@


1.12
log
@don't pickup etags if it's installed, etags will choke and dump core later on in the build.
add this quick bandaid untill etags gets fixed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/04/20 15:45:16 shadchin Exp $
d8 1
@


1.11
log
@update to 11.1.1
- remove BROKEN-hppa

ok jasper@@, tested on hppa landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/12/04 14:36:19 espie Exp $
d33 4
a36 1
			--with-gmp-prefix=${LOCALBASE} \
@


1.10
log
@update to more recent version, which builds more cleanly
(documentation is only online now).

maxima requires an update to build...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/30 11:23:39 espie Exp $
d6 1
a6 3
BROKEN-hppa =	infinite loop during build

V =		10.4.1
d8 1
a8 1
SHARED_LIBS +=	ecl	1.0
d26 1
a26 3
CONFIGURE_ENV +=	LDFLAGS='-pthread -L${LOCALBASE}/lib' \
			CPPFLAGS=-I${LOCALBASE}/include \
			CFLAGS='${CFLAGS} -pthread' \
d45 4
a48 3
		devel/boehm-gc
		
WANTLIB +=	c gc gmp m pthread
@


1.9
log
@fix buffer overflow that broke maxima.
was always there, probably happened after some changes to our fp code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/17 08:05:17 espie Exp $
d8 1
a8 1
V =		8.12.0
d10 1
a10 2
REVISION =	1
SHARED_LIBS +=	ecl	0.0
d32 2
d37 5
a41 1
			--with-gmp-prefix=${LOCALBASE}
a51 8

post-build:
	cd ${WRKBUILD}/build/doc && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} ${ALL_TARGET}

post-install:
	cd ${WRKBUILD}/build/doc && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} ${INSTALL_TARGET}
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/24 21:06:28 sthen Exp $
d10 1
a10 1
REVISION =	0
@


1.7
log
@new lib_depends/revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/10/18 19:20:41 espie Exp $
d27 1
a27 1
USE_GROFF =	Yes
d43 2
a44 2
LIB_DEPENDS +=	::devel/gmp \
		::devel/boehm-gc
@


1.6
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/09/20 18:02:47 landry Exp $
d10 1
a10 1
PKGNAME =	${DISTNAME}p0
d43 2
a44 2
LIB_DEPENDS +=	gmp::devel/gmp \
		gc::devel/boehm-gc
d46 1
a46 1
WANTLIB +=	c m pthread
@


1.5
log
@Mark as broken on hppa. I'm tired to kill that f.. process after it ate
100% cpu for 2 days.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/05/13 18:14:17 jasper Exp $
d27 1
@


1.4
log
@- tweak Makefile to fit 80 column width
- add some more flesh to DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/03/16 11:19:12 espie Exp $
d5 2
@


1.3
log
@update to 8.12.0 (new numbering scheme, but >old version)
a few patches to deal with shared libraries.
there is lisp code to deal with recognizing .so, so until someone dives
in and adapts it for OpenBSD, keep a libecl.so...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/08/19 23:45:58 espie Exp $
d8 4
a11 2
MASTER_SITES = ${MASTER_SITE_SOURCEFORGE:=ecls/}
HOMEPAGE = http://ecls.sourceforge.net/
d15 2
a16 2
PERMIT_PACKAGE_CDROM = Yes
PERMIT_PACKAGE_FTP = Yes
d18 1
a18 1
PERMIT_DISTFILES_FTP = Yes
d20 1
a21 1
SHARED_LIBS +=		ecl	0.0
d46 2
a47 1
	cd ${WRKBUILD}/build/doc && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} ${ALL_TARGET}
d50 2
a51 2
	cd ${WRKBUILD}/build/doc && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${ALL_FAKE_FLAGS} ${INSTALL_TARGET}
	
@


1.2
log
@new version: still builds and runs okay, should be used to compile a new maxima!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/05/06 09:31:25 espie Exp $
d3 2
a4 2
COMMENT = embeddable common-lisp
CATEGORIES = lang
d6 2
a7 4
DISTNAME = ecl-0.9l
PKGNAME = ecl-0.9l
WRKDIST = ${WRKDIR}/ecl-0.9l
EXTRACT_SUFX = .tgz
d10 1
d19 5
a23 4
CONFIGURE_STYLE = gnu
USE_GMAKE = Yes
USE_LIBTOOL = Yes
NO_REGRESS = Yes
d26 2
a27 1
			CFLAGS='${CFLAGS} -pthread'
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 3
a8 3
DISTNAME = ecl-0.9j-p1
PKGNAME = ecl-0.9jpl1
WRKDIST = ${WRKDIR}/ecl-0.9j
d23 1
@


1.1.1.1
log
@embedded common lisp, appears to work on at least i386 and macppc,
which is a good reason to import it (since every other lisp we have
works only on i386, and flakily to boot)
@
text
@@
