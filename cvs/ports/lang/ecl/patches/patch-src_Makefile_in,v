head	1.6;
access;
symbols
	OPENBSD_6_2:1.6.0.4
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.12
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.8
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.6
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.8
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.6
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.4
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.6
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.4
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.12.20.20.12.29;	author juanfra;	state Exp;
branches;
next	1.5;
commitid	x6oc6eGJ7cUtRsIF;

1.5
date	2015.08.29.14.48.34;	author jasper;	state Exp;
branches;
next	1.4;
commitid	y07lV19Nif3aKbCa;

1.4
date	2013.06.11.10.30.54;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.20.15.45.16;	author shadchin;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.04.14.36.19;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2009.03.16.11.19.12;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to ecl 16.1.3. From Timo Myyra (MAINTAINER).
@
text
@$OpenBSD: patch-src_Makefile_in,v 1.5 2015/08/29 14:48:34 jasper Exp $
--- src/Makefile.in.orig	Mon Dec 19 21:24:59 2016
+++ src/Makefile.in	Mon Dec 19 21:27:43 2016
@@@@ -296,30 +296,15 @@@@ install:
 	for i in `(cd ecl && find . -name '*.h')`; do echo $$i; \
 	  $(INSTALL_DATA) ecl/$$i $(DESTDIR)$(includedir)/ecl/$$i; \
 	done
+	$(INSTALL_DATA) help.doc $(DESTDIR)$(ecldir)
 	$(INSTALL_SCRIPT) bin/ecl-config $(DESTDIR)$(bindir)
-	for i in build-stamp help.doc TAGS ; do \
-	  $(INSTALL_DATA) $$i $(DESTDIR)$(ecldir); \
-	done
-	for i in $(LSP_LIBRARIES) $(LIBRARIES); do \
-	  if test -s $$i ; then \
-	   if echo $$i | grep dll; then \
-	    $(INSTALL_LIBRARY) $$i $(DESTDIR)$(bindir); \
-	   fi; \
-	   $(INSTALL_LIBRARY) $$i $(DESTDIR)$(libdir); \
-	  fi \
-	done
-	if [ "x@@SONAME3@@" != "x" -a -f "@@SONAME3@@" ]; then \
-	  ( $(INSTALL_LIBRARY) @@SONAME3@@ $(DESTDIR)$(libdir) && \
-	    cd $(DESTDIR)$(libdir) && $(RM) -f @@SONAME2@@ @@SONAME1@@ @@SONAME@@ && \
-	    $(LN_S) @@SONAME3@@ @@SONAME2@@ && \
-	    $(LN_S) @@SONAME3@@ @@SONAME1@@ && \
-	    $(LN_S) @@SONAME3@@ @@SONAME@@ ) \
-	fi
+	${INSTALL_LIBRARY} libecl.so $(DESTDIR)$(libdir)/$(LSP_LIBRARIES)
+	cd $(DESTDIR)$(libdir) && ln -sf $(LSP_LIBRARIES) libecl.so
 	$(INSTALL_PROGRAM) $(DPP) $(DESTDIR)$(ecldir)
 	$(INSTALL_PROGRAM) $(ECL_MIN) $(DESTDIR)$(ecldir)
 	for i in `cat modules`; do \
 	  case $$i in \
-	    *.fas) $(INSTALL_PROGRAM) $$i $(DESTDIR)$(ecldir);; \
+	    *.fas) $(INSTALL_DATA) $$i $(DESTDIR)$(ecldir);; \
 	    *) $(INSTALL_DATA) $$i $(DESTDIR)$(ecldir);; \
 	  esac \
 	done
@


1.5
log
@- update to ecl-16.0.0

from Timo Myyra who got upstream to fix various issues on OpenBSD too
feedback from juanfra@@ sthen@@
@
text
@d1 6
a6 4
$OpenBSD$
--- src/Makefile.in.orig	Mon Aug 24 15:25:08 2015
+++ src/Makefile.in	Mon Aug 24 15:28:43 2015
@@@@ -173,30 +173,15 @@@@ install:
a7 2
 	$(RM) -f $(DESTDIR)$(includedir)/ecl/config.h
 	mv $(DESTDIR)$(includedir)/ecl/config-install.h $(DESTDIR)$(includedir)/ecl/config.h
d30 2
a31 2
 	$(INSTALL_PROGRAM) c/dpp$(EXE) $(DESTDIR)$(ecldir)
 	$(INSTALL_PROGRAM) ecl_min$(EXE) $(DESTDIR)$(ecldir)
@


1.4
log
@update to ecl 13.5.1, from Timo Myyra
@
text
@d2 3
a4 3
--- src/Makefile.in.orig	Mon May 27 23:37:36 2013
+++ src/Makefile.in	Mon Jun 10 17:44:28 2013
@@@@ -166,30 +166,15 @@@@ install:
d21 3
a23 3
-	if [ "x@@SONAME@@" != "x" -a -f "@@SONAME@@" ]; then \
-	  ( cd $(DESTDIR)$(libdir) && $(RM) -f @@SONAME3@@ @@SONAME2@@ @@SONAME1@@ && \
-	    mv @@SONAME@@ @@SONAME3@@ && \
@


1.3
log
@update to 11.1.1
- remove BROKEN-hppa

ok jasper@@, tested on hppa landry@@
@
text
@d1 4
a4 14
$OpenBSD: patch-src_Makefile_in,v 1.2 2010/12/04 14:36:19 espie Exp $
--- src/Makefile.in.orig	Mon Jan 17 02:39:56 2011
+++ src/Makefile.in	Mon Apr 18 21:29:30 2011
@@@@ -165,6 +165,7 @@@@ install:
 	for i in build-stamp help.doc TAGS ; do \
 	  $(INSTALL_DATA) $$i $(DESTDIR)$(ecldir); \
 	done
+	cp libecl.so $(LSP_LIBRARIES)
 	for i in $(LSP_LIBRARIES) $(LIBRARIES); do \
 	  if test -s $$i ; then \
 	   if echo $$i | grep dll; then \
@@@@ -173,13 +174,7 @@@@ install:
 	   $(INSTALL_LIBRARY) $$i $(DESTDIR)$(libdir); \
 	  fi \
d6 15
d28 1
d33 6
@


1.2
log
@update to more recent version, which builds more cleanly
(documentation is only online now).

maxima requires an update to build...
@
text
@d1 5
a5 5
$OpenBSD: patch-src_Makefile_in,v 1.1 2009/03/16 11:19:12 espie Exp $
--- src/Makefile.in.orig	Sun Apr  4 16:31:27 2010
+++ src/Makefile.in	Sun Nov 28 20:14:34 2010
@@@@ -152,6 +152,7 @@@@ install:
 	for i in BUILD-STAMP help.doc TAGS ; do \
d12 1
a12 1
@@@@ -160,13 +161,7 @@@@ install:
d17 1
a17 1
-	  ( cd $(DESTDIR)$(libdir) && rm -f @@SONAME3@@ @@SONAME2@@ @@SONAME1@@ && \
d24 3
a26 3
 	for i in c/dpp$(EXE) ecl_min$(EXE) `cat MODULES`; do \
 	  case $$i in \
 	    *.fas) $(INSTALL_PROGRAM) $$i $(DESTDIR)$(ecldir);; \
@


1.1
log
@update to 8.12.0 (new numbering scheme, but >old version)
a few patches to deal with shared libraries.
there is lisp code to deal with recognizing .so, so until someone dives
in and adapts it for OpenBSD, keep a libecl.so...
@
text
@d1 5
a5 5
$OpenBSD$
--- src/Makefile.in.orig	Wed Dec 17 16:41:52 2008
+++ src/Makefile.in	Mon Mar 16 11:25:55 2009
@@@@ -143,18 +143,13 @@@@ install-base:
 	for i in BUILD-STAMP help.doc ; do \
d11 3
a13 1
 	   $(INSTALL_PROGRAM) $$i $(DESTDIR)$(libdir); \
d16 1
a16 1
-	if [ "x@@SONAME@@" != "x" ]; then \
d23 1
a23 1
+	cd $(DESTDIR)$(libdir) && ln -s $(LSP_LIBRARIES) libecl.so
@

