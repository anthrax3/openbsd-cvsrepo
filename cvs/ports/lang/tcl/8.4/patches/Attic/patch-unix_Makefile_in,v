head	1.4;
access;
symbols
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.10
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.8
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.6
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2013.09.24.20.04.37;	author stu;	state dead;
branches;
next	1.3;

1.3
date	2013.06.28.06.11.39;	author stu;	state Exp;
branches;
next	1.2;

1.2
date	2011.01.05.16.19.48;	author stu;	state Exp;
branches;
next	1.1;

1.1
date	2009.01.16.00.02.13;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Bye bye 8.4.
@
text
@$OpenBSD: patch-unix_Makefile_in,v 1.3 2013/06/28 06:11:39 stu Exp $
--- unix/Makefile.in.orig	Tue May 14 14:17:31 2013
+++ unix/Makefile.in	Sat May 25 17:52:31 2013
@@@@ -484,6 +484,10 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
 	rm -f $@@
 	@@MAKE_STUB_LIB@@
 
+libtcl84.a: ${OBJS}
+	rm -f $@@
+	${STLIB_LD} $@@ ${OBJS} ; ${RANLIB} $@@
+
 # Make target which outputs the list of the .o contained in the Tcl lib
 # usefull to build a single big shared library containing Tcl and other
 # extensions.  used for the Tcl Plugin.  -- dl
@@@@ -619,21 +623,16 @@@@ install-strip:
 # possible (e.g. if installing as root).
 
 install-binaries: binaries
-	@@for i in "$(LIB_INSTALL_DIR)" "$(BIN_INSTALL_DIR)" ; \
+	@@for i in "$(LIB_INSTALL_DIR)" "$(BIN_INSTALL_DIR)" "$(SCRIPT_INSTALL_DIR)" ; \
 	    do \
 	    if [ ! -d $$i ] ; then \
 		echo "Making directory $$i"; \
-		mkdir -p $$i; \
-		chmod 755 $$i; \
+		${INSTALL_DATA_DIR} $$i; \
 		else true; \
 		fi; \
 	    done;
-	@@if test ! -x $(SRC_DIR)/install-sh; then \
-	    chmod +x $(SRC_DIR)/install-sh; \
-	    fi
 	@@echo "Installing $(LIB_FILE) to $(DLL_INSTALL_DIR)/"
 	@@@@INSTALL_LIB@@
-	@@chmod 555 $(DLL_INSTALL_DIR)/$(LIB_FILE)
 	@@if test "$(TCL_BUILD_EXP_FILE)" != ""; then \
 	    echo "Installing $(TCL_EXP_FILE) to $(LIB_INSTALL_DIR)/"; \
 	    $(INSTALL_DATA) $(TCL_BUILD_EXP_FILE) \
@@@@ -641,8 +640,8 @@@@ install-binaries: binaries
 	    fi
 	@@echo "Installing tclsh as $(BIN_INSTALL_DIR)/tclsh$(VERSION)"
 	@@$(INSTALL_PROGRAM) tclsh $(BIN_INSTALL_DIR)/tclsh$(VERSION)
-	@@echo "Installing tclConfig.sh to $(LIB_INSTALL_DIR)/"
-	@@$(INSTALL_DATA) tclConfig.sh $(LIB_INSTALL_DIR)/tclConfig.sh
+	@@echo "Installing tclConfig.sh to $(SCRIPT_INSTALL_DIR)/"
+	@@$(INSTALL_DATA) tclConfig.sh $(SCRIPT_INSTALL_DIR)/tclConfig.sh
 	@@if test "$(STUB_LIB_FILE)" != "" ; then \
 	    echo "Installing $(STUB_LIB_FILE) to $(LIB_INSTALL_DIR)/"; \
 	    @@INSTALL_STUB_LIB@@ ; \
@@@@ -672,8 +671,7 @@@@ install-libraries: libraries
 	    do \
 	    if [ ! -d $$i ] ; then \
 		echo "Making directory $$i"; \
-		mkdir -p $$i; \
-		chmod 755 $$i; \
+		${INSTALL_DATA_DIR} $$i; \
 		else true; \
 		fi; \
 	    done;
@@@@ -681,14 +679,10 @@@@ install-libraries: libraries
 	    do \
 	    if [ ! -d $(SCRIPT_INSTALL_DIR)/$$i ] ; then \
 		echo "Making directory $(SCRIPT_INSTALL_DIR)/$$i"; \
-		mkdir -p $(SCRIPT_INSTALL_DIR)/$$i; \
-		chmod 755 $(SCRIPT_INSTALL_DIR)/$$i; \
+		${INSTALL_DATA_DIR} $(SCRIPT_INSTALL_DIR)/$$i; \
 		else true; \
 		fi; \
 	    done;
-	@@if test ! -x $(SRC_DIR)/install-sh; then \
-	    chmod +x $(SRC_DIR)/install-sh; \
-	    fi
 	@@echo "Installing header files";
 	@@for i in $(GENERIC_DIR)/tcl.h $(GENERIC_DIR)/tclDecls.h \
 		$(GENERIC_DIR)/tclPlatDecls.h; \
@@@@ -697,7 +691,7 @@@@ install-libraries: libraries
 	    done;
 	@@echo "Installing library files to $(SCRIPT_INSTALL_DIR)";
 	@@for i in $(TOP_DIR)/library/*.tcl $(TOP_DIR)/library/tclIndex \
-		$(UNIX_DIR)/tclAppInit.c $(UNIX_DIR)/ldAix @@DTRACE_SRC@@; \
+		$(UNIX_DIR)/tclAppInit.c @@DTRACE_SRC@@; \
 	    do \
 	    $(INSTALL_DATA) $$i $(SCRIPT_INSTALL_DIR); \
 	    done;
@@@@ -737,31 +731,27 @@@@ install-libraries: libraries
 	done;
 
 install-doc: doc
-	@@if test ! -x $(UNIX_DIR)/installManPage; then \
-	    chmod +x $(UNIX_DIR)/installManPage; \
-	    fi
 	@@for i in $(MAN_INSTALL_DIR) $(MAN1_INSTALL_DIR) $(MAN3_INSTALL_DIR) $(MANN_INSTALL_DIR) ; \
 	    do \
 	    if [ ! -d $$i ] ; then \
 		echo "Making directory $$i"; \
-		mkdir -p $$i; \
-		chmod 755 $$i; \
+		${INSTALL_DATA_DIR} $$i; \
 		else true; \
 		fi; \
 	    done;
 	@@echo "Installing and cross-linking top-level (.1) docs";
 	@@for i in $(TOP_DIR)/doc/*.1; do \
-	    $(UNIX_DIR)/installManPage $(MAN_FLAGS) $$i $(MAN1_INSTALL_DIR); \
+	    $(SHELL) $(UNIX_DIR)/installManPage $(MAN_FLAGS) $$i $(MAN1_INSTALL_DIR); \
 	done
 
 	@@echo "Installing and cross-linking C API (.3) docs";
 	@@for i in $(TOP_DIR)/doc/*.3; do \
-	    $(UNIX_DIR)/installManPage $(MAN_FLAGS) $$i $(MAN3_INSTALL_DIR); \
+	    $(SHELL) $(UNIX_DIR)/installManPage $(MAN_FLAGS) $$i $(MAN3_INSTALL_DIR); \
 	done
 
 	@@echo "Installing and cross-linking command (.n) docs";
 	@@for i in $(TOP_DIR)/doc/*.n; do \
-	    $(UNIX_DIR)/installManPage $(MAN_FLAGS) $$i $(MANN_INSTALL_DIR); \
+	    $(SHELL) $(UNIX_DIR)/installManPage $(MAN_FLAGS) $$i $(MANN_INSTALL_DIR); \
 	done
 
 # Optional target to install private headers
@@@@ -770,14 +760,10 @@@@ install-private-headers: libraries
 	    do \
 	    if [ ! -d $$i ] ; then \
 		echo "Making directory $$i"; \
-		mkdir -p $$i; \
-		chmod 755 $$i; \
+		${INSTALL_DATA_DIR} $$i; \
 		else true; \
 		fi; \
 	    done;
-	@@if test ! -x $(SRC_DIR)/install-sh; then \
-	    chmod +x $(SRC_DIR)/install-sh; \
-	    fi
 	@@echo "Installing private header files";
 	@@for i in $(GENERIC_DIR)/tclInt.h $(GENERIC_DIR)/tclIntDecls.h \
 		$(GENERIC_DIR)/tclIntPlatDecls.h \
@


1.3
log
@Update to 8.4.20.
@
text
@d1 1
a1 1
$OpenBSD: patch-unix_Makefile_in,v 1.2 2011/01/05 16:19:48 stu Exp $
@


1.2
log
@Newer, cleaner layout, consolidate include files
into one dir, simplify modules dirs layout,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 4
a4 4
$OpenBSD: patch-unix_Makefile_in,v 1.1 2009/01/16 00:02:13 sthen Exp $
--- unix/Makefile.in.orig	Thu Apr 17 16:29:49 2008
+++ unix/Makefile.in	Sun Oct  3 08:48:18 2010
@@@@ -485,6 +485,10 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
d15 1
a15 1
@@@@ -620,21 +624,16 @@@@ install-strip:
d19 2
a20 2
-	@@for i in $(LIB_INSTALL_DIR) $(BIN_INSTALL_DIR) ; \
+	@@for i in $(LIB_INSTALL_DIR) $(BIN_INSTALL_DIR) $(SCRIPT_INSTALL_DIR) ; \
d33 1
a33 1
 	@@echo "Installing $(LIB_FILE) to $(LIB_INSTALL_DIR)/"
d35 1
a35 1
-	@@chmod 555 $(LIB_INSTALL_DIR)/$(LIB_FILE)
d39 1
a39 1
@@@@ -642,8 +641,8 @@@@ install-binaries: binaries
d50 1
a50 1
@@@@ -655,8 +654,7 @@@@ install-libraries: libraries
d60 1
a60 1
@@@@ -664,14 +662,10 @@@@ install-libraries: libraries
d76 1
a76 1
@@@@ -680,7 +674,7 @@@@ install-libraries: libraries
d85 1
a85 1
@@@@ -715,31 +709,27 @@@@ install-libraries: libraries
d121 1
a121 1
@@@@ -748,14 +738,10 @@@@ install-private-headers: libraries
@


1.1
log
@update to 8.4.19, from new maintainer Stuart Cassoff.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ unix/Makefile.in	Sun Sep 28 01:04:05 2008
d8 1
a8 1
+${TCL_BUILD_EXP_FILE}: ${OBJS}
d15 1
a15 1
@@@@ -620,30 +624,26 @@@@ install-strip:
d39 1
a39 2
 			$(LIB_INSTALL_DIR)/$(TCL_EXP_FILE); \
+	    (cd $(LIB_INSTALL_DIR) ; $(RANLIB) $(TCL_EXP_FILE)); \
d50 1
a50 7
@@@@ -651,12 +651,12 @@@@ install-binaries: binaries
 	@@EXTRA_INSTALL_BINARIES@@
 
 install-libraries: libraries
-	@@for i in $(INCLUDE_INSTALL_DIR) $(SCRIPT_INSTALL_DIR); \
+	@@for i in $(INCLUDE_INSTALL_DIR) $(SCRIPT_INSTALL_DIR) \
+		$(INCLUDE_INSTALL_DIR)/generic $(INCLUDE_INSTALL_DIR)/unix; \
d60 1
a60 1
@@@@ -664,23 +664,30 @@@@ install-libraries: libraries
d76 1
a76 3
 	    do \
 	    $(INSTALL_DATA) $$i $(INCLUDE_INSTALL_DIR); \
+	    cd $(INCLUDE_INSTALL_DIR)/generic && ln -sf ../`basename $$i` ./`basename $$i`; \
a77 10
+	@@for i in $(GENERIC_DIR)/tclInt.h $(GENERIC_DIR)/tclIntDecls.h \
+		$(GENERIC_DIR)/tclIntPlatDecls.h $(GENERIC_DIR)/tclMath.h \
+		$(GENERIC_DIR)/tclPort.h ; \
+	    do \
+	    $(INSTALL_DATA) $$i $(INCLUDE_INSTALL_DIR)/generic; \
+	    done;
+	@@for i in $(UNIX_DIR)/tclUnixPort.h; \
+	    do \
+	    $(INSTALL_DATA) $$i $(INCLUDE_INSTALL_DIR)/unix; \
+	    done;
d85 8
a92 1
@@@@ -722,8 +729,7 @@@@ install-doc: doc
d102 35
@

