head	1.31;
access;
symbols
	OPENBSD_5_4:1.30.0.2
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.27.0.4
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.27.0.2
	OPENBSD_5_2_BASE:1.27
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.6
	OPENBSD_5_0:1.26.0.4
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.26.0.2
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.22.0.8
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.22.0.6
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.22.0.4
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.21.0.4
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.21.0.2
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.18.0.4
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.18.0.2
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.14.0.4
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.2
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.12.0.4
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.2
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.4.0.2
	OPENBSD_3_5_BASE:1.4
	jose_2003-nov-19:1.1.1.1
	jose:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2013.09.24.20.04.35;	author stu;	state dead;
branches;
next	1.30;

1.30
date	2013.07.06.11.03.44;	author stu;	state Exp;
branches;
next	1.29;

1.29
date	2013.06.28.06.11.38;	author stu;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.11.11.20.28;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2012.03.29.13.38.40;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2011.01.05.16.19.48;	author stu;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.27.11.54.53;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.10.18.21.50.39;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2009.01.16.00.02.13;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2008.01.04.17.48.36;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2007.12.11.11.18.05;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.16.00.27.06;	author merdely;	state Exp;
branches;
next	1.18;

1.18
date	2007.01.31.15.12.08;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2006.11.26.13.47.31;	author matthieu;	state Exp;
branches;
next	1.16;

1.16
date	2006.10.18.13.10.37;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2006.09.29.22.10.53;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2006.01.08.13.08.01;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2005.11.03.18.28.55;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2005.02.20.03.09.35;	author jolan;	state Exp;
branches;
next	1.11;

1.11
date	2004.12.22.06.31.05;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2004.08.07.06.13.54;	author kevlo;	state Exp;
branches;
next	1.9;

1.9
date	2004.07.04.03.18.59;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2004.06.25.06.46.54;	author kevlo;	state Exp;
branches;
next	1.7;

1.7
date	2004.05.20.21.25.44;	author miod;	state Exp;
branches;
next	1.6;

1.6
date	2004.05.07.15.28.31;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2004.04.09.21.47.19;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2004.03.04.17.49.26;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2003.12.17.04.56.22;	author jose;	state Exp;
branches;
next	1.2;

1.2
date	2003.12.01.05.48.00;	author jose;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.19.15.47.15;	author jose;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.11.19.15.47.15;	author jose;	state Exp;
branches;
next	;


desc
@@


1.31
log
@Bye bye 8.4.
@
text
@# $OpenBSD: Makefile,v 1.30 2013/07/06 11:03:44 stu Exp $

COMMENT =		Tool Command Language

DISTNAME =		tcl8.4.20
PKGNAME =		tcl-8.4.20
REVISION =		0
SHARED_LIBS =		tcl84 2.0
CATEGORIES =		lang lang/tcl
HOMEPAGE =		http://www.tcl.tk/
MAINTAINER =		Stuart Cassoff <stwo@@users.sourceforge.net>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		c m

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=tcl/}
DISTFILES =		${DISTNAME}-src.tar.gz

MAKE_FLAGS +=		TCL_PACKAGE_PATH='$$(prefix)/lib/tcl' \
			TCL_LIBRARY='$$(prefix)/lib/tcl/tcl$$(VERSION)'

FAKE_FLAGS =		INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
			INSTALL_LIBRARY="${INSTALL_DATA}" \
			INSTALL_DATA="${INSTALL_DATA}" \
			INSTALL_PROGRAM="${INSTALL_PROGRAM}"

TEST_FLAGS =		HOME=${TESTHOME}
SEPARATE_BUILD =	Yes
USE_GROFF =		Yes
CONFIGURE_STYLE =	autoconf no-autoheader old

CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--includedir="${PREFIX}/include/tcl8.4" \
			--mandir="${PREFIX}/lib/tcl/tcl8.4/man" \
			--sysconfdir="${SYSCONFDIR}" \
			--enable-man-symlinks \
			--disable-rpath

CONFIGURE_ENV +=	SHLIB_VERSION="${LIBtcl84_VERSION}" \
			EXTRA_INSTALL="install-private-headers"

AUTOCONF_VERSION =	2.13

.include <bsd.port.arch.mk>

.if ${NO_SHARED_LIBS:L} == "no"
ALL_TARGET =		all libtcl84.a
CONFIGURE_ENV +=	EXTRA_INSTALL_BINARIES='@@echo "Installing libtcl84.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtcl84.a $$(LIB_INSTALL_DIR)/libtcl84.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtcl84.a)'
CONFIGURE_ENV +=	tcl_cv_ld_elf=yes
.endif

.if ${MACHINE_ARCH} == "sh"
CFLAGS +=		-O0
.endif

WRKSRC =		${WRKDIST}/unix
TEST_TARGET =		test

TESTHOME =		${WRKDIR}/testhome

pre-test:
	@@mkdir -p ${TESTHOME}

post-install:
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/lib/tcl/tcl8.4/man
.if ${NO_SHARED_LIBS:L} == "no"
	ln -s libtcl84.a ${PREFIX}/lib/libtcl84_pic.a
	ln -s libtclstub84.a ${PREFIX}/lib/libtclstub84_pic.a
.endif

.include <bsd.port.mk>
@


1.30
log
@M88k is elf now.
Skip unneeded elf check in configure.
Whitespace tweaks.
Fix packing lists for shared libs.

Thanks to miod@@ for original patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/06/28 06:11:38 stu Exp $
@


1.29
log
@Update to 8.4.20.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/11 11:20:28 espie Exp $
d7 1
d46 3
a48 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
d53 1
d61 1
a61 1
TEST_TARGET =	test
d70 1
a70 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
@


1.28
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/03/29 13:38:40 sthen Exp $
d5 3
a7 4
DISTNAME =		tcl8.4.19
PKGNAME =		tcl-8.4.19
REVISION =		1
SHARED_LIBS =		tcl84 1.1
d35 1
a35 1
			--mandir="${PREFIX}/man/tcl8.4" \
d37 2
a38 1
			--enable-man-symlinks
d65 1
a65 1
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/man/tcl8.4
@


1.27
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/01/05 16:19:48 stu Exp $
a14 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d29 1
a29 1
REGRESS_FLAGS =		HOME=${TESTHOME}
d57 1
a57 1
REGRESS_TARGET =	test
d61 1
a61 1
pre-regress:
@


1.26
log
@Newer, cleaner layout, consolidate include files
into one dir, simplify modules dirs layout,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/27 11:54:53 espie Exp $
d33 1
a33 1
SEPARATE_BUILD =	concurrent
@


1.25
log
@minor bumps after pkg_create fix: generate catN entry when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/10/18 21:50:39 sthen Exp $
d5 3
a7 5
V =			8.4.19
DISTNAME =		tcl${V}
PKGNAME =		tcl-${V}
REVISION =		0

a8 1

a9 1

a10 1

d24 2
a25 4
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
MAKE_FLAGS +=		TCL_BUILD_EXP_FILE="libtcl84.a" \
			TCL_EXP_FILE="libtcl84.a"
.endif
a32 1

d34 2
a36 2
AUTOCONF_VERSION =	2.13
CONFIGURE_STYLE =	autoconf no-autoheader old
d38 2
a39 2
			--includedir="${LOCALBASE}/include/tcl8.4" \
			--mandir="${LOCALBASE}/lib/tcl8.4/man" \
d44 3
a46 2
			CFLAGS=""
USE_GROFF =	Yes
d48 10
a57 2
# Needs a full network connection to run?
#REGRESS_IS_INTERACTIVE=Yes
d68 1
@


1.24
log
@fix tabs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/10/18 19:20:42 espie Exp $
d8 1
@


1.23
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/01/16 00:02:13 sthen Exp $
d52 1
a52 1
			USE_GROFF =	Yes
@


1.22
log
@update to 8.4.19, from new maintainer Stuart Cassoff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/01/04 17:48:36 espie Exp $
d52 1
@


1.21
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.20 2007/12/11 11:18:05 sthen Exp $
# Uses pthreads (can but does not at the moment)
d3 1
a3 1
COMMENT=	Tool Command Language
d5 3
a7 1
VERSION=	8.4.7
d9 1
a9 6
DISTNAME=	tcl${VERSION}-src
PKGNAME=	tcl-${VERSION}p6
SHARED_LIBS=	tcl84 1.0
CATEGORIES=	lang lang/tcl
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=tcl/}
WANTLIB=	c m
d11 5
a15 1
HOMEPAGE=	http://www.tcl.tk/
d18 43
a60 28
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MAKE_FLAGS=	CFLAGS="${CFLAGS}"
FAKE_FLAGS=	INSTALL="install -c" INSTALL_ROOT=${WRKINST} \
		BASE_INCLUDE_DIR='$$(prefix)/include/tcl$$(VERSION)' \
		INCLUDE_INSTALL_DIR='$$(INSTALL_ROOT)$$(BASE_INCLUDE_DIR)' \
		GENERIC_INCLUDE_INSTALL_DIR='$$(BASE_INCLUDE_DIR)/generic' \
		UNIX_INCLUDE_INSTALL_DIR='$$(BASE_INCLUDE_DIR)/unix' \
		MAN_INSTALL_DIR='$${INSTALL_ROOT}$$(TCL_LIBRARY)/man'

SEPARATE_BUILD=	concurrent
AUTOCONF_VERSION=2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ENV=	PORTSDIR="${PORTSDIR}" \
		LIBtcl84_VERSION=${LIBtcl84_VERSION}
CONFIGURE_ARGS=	--includedir="${LOCALBASE}/include/tcl8.4"

WRKDIST=	${WRKDIR}/tcl${VERSION}/unix

INSTALL_TARGET=	install-strip
REGRESS_TARGET=	test
# Needs a full network connection to run
REGRESS_IS_INTERACTIVE=Yes
TESTHOME=${WRKDIR}/testhome
REGRESS_FLAGS=	HOME=${TESTHOME}
d65 2
a66 3
	${INSTALL_SCRIPT_DIR} ${PREFIX}/share/aclocal
	${INSTALL_DATA} ${WRKSRC}/tcl.m4 ${PREFIX}/share/aclocal
	ranlib ${PREFIX}/lib/libtcl84.a
d68 1
@


1.20
log
@add a new book reference, the previous recommendation is getting
harder to find. from "antipsychic" on tech@@ "with thanks to the
help of Mr. Ousterhout himself".

ok landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/09/16 00:27:06 merdely Exp $
d24 1
a24 1
FAKE_FLAGS=	INSTALL="install -c" INSTALL_ROOT="${WRKINST}" \
@


1.19
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/01/31 15:12:08 espie Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}p5
@


1.18
log
@since libtclstub84.a is a pic lib, also create a libtclstub84_pic.a link.
This will help with libtool.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/11/26 13:47:31 matthieu Exp $
d4 1
a4 1
COMMENT=	"Tool Command Language"
@


1.17
log
@Quote automake macro names to make automake 1.9 silent.
ok (and remainder about package name bump) mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/10/18 13:10:37 naddy Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}p4
d53 1
@


1.16
log
@unconditionally use -fPIC (over -fpic)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/09/29 22:10:53 steven Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}p3
@


1.15
log
@INSTALL_DATA instead of cp to ensure correct file modes.
from deanna@@sdf.lonestar.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/01/08 13:08:01 alek Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}p2
@


1.14
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/11/03 18:28:55 naddy Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}p1
d51 1
a51 1
	cp ${WRKSRC}/tcl.m4 ${PREFIX}/share/aclocal
@


1.13
log
@Always explicitly set the AUTOCONF_VERSION to use.  In some cases
the default was not appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/02/20 03:09:35 jolan Exp $
d10 1
d34 2
a35 1
CONFIGURE_ENV=	PORTSDIR="${PORTSDIR}"
@


1.12
log
@make TCL_INCLUDE_SPEC point to the actual directory where the tcl
headers are
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/12/22 06:31:05 espie Exp $
d31 1
@


1.11
log
@fix a few WANTLIB issues.
Install librpmbuild since lib/rpmgettext wants it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/08/07 06:13:54 kevlo Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}p0
d33 1
@


1.10
log
@update to tcl 8.4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/07/04 03:18:59 brad Exp $
d9 1
a9 1
PKGNAME=	tcl-${VERSION}
d12 1
@


1.9
log
@- remove useless --enable-static
- 8.4 doesn't use CONFIGURE_SHARED either
- use arch -s instead of machine for static arch check
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/06/25 06:46:54 kevlo Exp $
d6 1
a6 1
VERSION=	8.4.6
@


1.8
log
@install m4 macro -- PR#3819
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/05/20 21:25:44 miod Exp $
a30 5
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --enable-static
.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
CONFIGURE_ARGS+= --disable-shared
.endif
@


1.7
log
@Correctly configure tcl and tk 8.4 on architectures which lack shared
libraries, though hppa might need more work.

prodded by jolan@@; ok jolan@@ pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/05/07 15:28:31 naddy Exp $
d50 2
@


1.6
log
@Remove maintainer by his request.  Thanks, Jose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/04/09 21:47:19 naddy Exp $
d33 3
@


1.5
log
@maintenance update to Tcl/Tk 8.4.6; from Jose Nazario <jose@@monkey.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/03/04 17:49:26 espie Exp $
a13 2

MAINTAINER=	Jose Nazario <jose@@crimelabs.net>
@


1.4
log
@explicitly tag no-autoheader some ports for which re-running it after autoconf
is a problem.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2003/12/17 04:56:22 jose Exp $
d6 1
a6 1
VERSION=	8.4.5
@


1.3
log
@
update to 8.4.5
update book title, isbn in DESCR
update master site to sourceforge

ok brad@@, sturm@@, naddy@@, thank you for testing on various archs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/12/01 05:48:00 jose Exp $
d32 1
a32 1
CONFIGURE_STYLE= autoconf
@


1.2
log
@
some things noticed by Stuart Cassoff <stwo@@telus.net>:
- fix HOMEPAGE ...
- PLIST exec/unexec about manpages
- flesh out DESCR some
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/11/19 15:47:15 jose Exp $
d6 1
a6 1
VERSION=	8.4.4
d11 1
a11 1
MASTER_SITES=	${MASTER_SITE_TCLTK:=tcl8_4/}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2002/12/04 21:06:31 naddy Exp $
d13 1
a13 1
HOMEPAGE=	http://dev.scriptics.com/software/tcltk/
@


1.1.1.1
log
@
had this sitting in my tree for a while, finally import tcl/tk 8.4.4.

based on 8.3 port by kevlo@@, testing and feedback from many, thank you. 
ok naddy@@
@
text
@@
