head	1.41;
access;
symbols
	OPENBSD_6_1:1.39.0.4
	OPENBSD_6_1_BASE:1.39
	OPENBSD_6_0:1.39.0.2
	OPENBSD_6_0_BASE:1.39
	OPENBSD_5_9:1.36.0.2
	OPENBSD_5_9_BASE:1.36
	OPENBSD_5_8:1.36.0.4
	OPENBSD_5_8_BASE:1.36
	OPENBSD_5_7:1.33.0.2
	OPENBSD_5_7_BASE:1.33
	OPENBSD_5_6:1.31.0.4
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.31.0.2
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.21.0.2
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.9.0.2
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	deanna_20080425:1.1.1.1
	deanna:1.1.1;
locks; strict;
comment	@# @;


1.41
date	2017.06.04.23.21.01;	author schwarze;	state Exp;
branches;
next	1.40;
commitid	DdVrOo38uL2WAHF7;

1.40
date	2017.05.12.21.44.33;	author stu;	state Exp;
branches;
next	1.39;
commitid	gVmLe5whw9zfOD1V;

1.39
date	2016.06.29.16.14.43;	author espie;	state Exp;
branches;
next	1.38;
commitid	c1yQMbJbfo0CFBcL;

1.38
date	2016.03.15.21.13.32;	author naddy;	state Exp;
branches;
next	1.37;
commitid	ip6F83eeYgRkUET3;

1.37
date	2016.03.11.20.28.27;	author naddy;	state Exp;
branches;
next	1.36;
commitid	UYLP8TE6V7RS2GhJ;

1.36
date	2015.06.06.14.19.10;	author stu;	state Exp;
branches;
next	1.35;
commitid	fldqw6xIw205uW4f;

1.35
date	2015.06.06.12.13.03;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	Iutnfu6D7PJqNzSp;

1.34
date	2015.06.05.20.34.58;	author stu;	state Exp;
branches;
next	1.33;
commitid	Cl9u6EePbrHhFl6a;

1.33
date	2014.10.21.05.08.14;	author stu;	state Exp;
branches;
next	1.32;
commitid	5PmlyMJMFi3rsN8T;

1.32
date	2014.09.22.16.54.11;	author stu;	state Exp;
branches;
next	1.31;
commitid	FxlFDVJhgbkroBHn;

1.31
date	2014.01.11.12.56.41;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2013.11.05.04.45.18;	author stu;	state Exp;
branches;
next	1.29;

1.29
date	2013.10.21.19.14.54;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2013.09.20.10.09.08;	author stu;	state Exp;
branches;
next	1.27;

1.27
date	2013.07.16.02.48.05;	author stu;	state Exp;
branches;
next	1.26;

1.26
date	2013.07.06.11.04.19;	author stu;	state Exp;
branches;
next	1.25;

1.25
date	2013.06.28.06.12.39;	author stu;	state Exp;
branches;
next	1.24;

1.24
date	2013.03.11.11.20.28;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2012.11.19.15.09.52;	author stu;	state Exp;
branches;
next	1.22;

1.22
date	2012.08.26.15.47.00;	author stu;	state Exp;
branches;
next	1.21;

1.21
date	2012.03.29.13.38.40;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.12.08.22.41.48;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2011.12.02.14.36.15;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2011.11.21.18.30.50;	author stu;	state Exp;
branches;
next	1.17;

1.17
date	2011.10.17.15.18.39;	author stu;	state Exp;
branches;
next	1.16;

1.16
date	2011.06.02.13.41.39;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.01.05.16.13.53;	author stu;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.27.11.54.53;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.15.18.26.38;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.18.21.50.39;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.06.07.18.12.05;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2010.02.06.10.27.21;	author pirofti;	state Exp;
branches;
next	1.8;

1.8
date	2009.11.21.02.50.23;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.24.21.13.13;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2008.12.26.23.36.03;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.21.21.34.14;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.01.19.47.40;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2008.04.27.13.47.15;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.25.19.33.05;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.25.14.10.46;	author deanna;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.04.25.14.10.46;	author deanna;	state Exp;
branches;
next	;


desc
@@


1.41
log
@mandoc groks .mc now; drop USE_GROFF and bump
@
text
@# $OpenBSD: Makefile,v 1.40 2017/05/12 21:44:33 stu Exp $

COMMENT =		Tool Command Language

DISTNAME =		tcl8.5.19
PKGNAME =		tcl-8.5.19
REVISION =		0
SHARED_LIBS =		tcl85 1.8
CATEGORIES =		lang lang/tcl
HOMEPAGE =		http://www.tcl.tk/
MAINTAINER =		Stuart Cassoff <stwo@@users.sourceforge.net>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		c m

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=tcl/}
DISTFILES =		${DISTNAME}-src.tar.gz

MAKE_FLAGS =		TCL_LIBRARY='$$(prefix)/lib/tcl/tcl$$(VERSION)'

FAKE_FLAGS =		INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
			INSTALL_LIBRARY="${INSTALL_DATA}" \
			INSTALL_DATA="${INSTALL_DATA}" \
			INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
			CONFIG_INSTALL_DIR='$$(SCRIPT_INSTALL_DIR)'

TEST_FLAGS =		HOME=${TESTHOME} TESTFLAGS="${TESTFLAGS}"
SEPARATE_BUILD =	Yes
CONFIGURE_STYLE =	gnu old

CONFIGURE_ARGS +=	--includedir="${PREFIX}/include/tcl8.5" \
			--mandir="${PREFIX}/lib/tcl/tcl8.5/man" \
			--sysconfdir="${SYSCONFDIR}" \
			--enable-man-symlinks \
			--disable-rpath \
			EXTRA_INSTALL="install-private-headers" \
			EXTRA_INSTALL_BINARIES='@@echo "Installing libtcl85.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtcl85.a $$(LIB_INSTALL_DIR)/libtcl85.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtcl85.a)' \
			SHLIB_VERSION="${LIBtcl85_VERSION}"

ALL_TARGET =		all libtcl85.a

WRKSRC =		${WRKDIST}/unix
TEST_TARGET =		test

TESTHOME =		${WRKDIR}/testhome
# Use TESTFLAGS to control the Tcl tests
TESTFLAGS =

# These tests will always fail due to assumptions that don't hold on OpenBSD.
# Skip them until they're improved.
# fCmd-9.4.b expects to be able to overwrite a read-only directory.
# http-4.14, socket-14.14 expect certain socket errors to occur later rather than sooner. Bug 2911139.
TESTFLAGS += -skip 'fCmd-9.4.b http-4.14 socket-14.14'

pre-configure:
	@@${SUBST_CMD} ${WRKDIST}/library/init.tcl

pre-test:
	mkdir -p ${TESTHOME}

post-install:
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/lib/tcl/tcl8.5/man
	ln -s libtcl85.a ${PREFIX}/lib/libtcl85_pic.a
	ln -s libtclstub85.a ${PREFIX}/lib/libtclstub85_pic.a

.include <bsd.port.mk>
@


1.40
log
@Update to 8.5.19.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2016/06/29 16:14:43 espie Exp $
d7 1
a30 1
USE_GROFF =		Yes
@


1.39
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/03/15 21:13:32 naddy Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.18
PKGNAME =		tcl-8.5.18
REVISION=		1
SHARED_LIBS =		tcl85 1.7
@


1.38
log
@get rid of NO_SHARED_LIBS and PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/03/11 20:28:27 naddy Exp $
d7 1
a7 1
REVISION=		0
@


1.37
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/06/06 14:19:10 stu Exp $
d7 1
d40 3
a44 3
.include <bsd.port.arch.mk>

.if ${NO_SHARED_LIBS:L} == "no"
a45 4
CONFIGURE_ARGS +=	EXTRA_INSTALL_BINARIES='@@echo "Installing libtcl85.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtcl85.a $$(LIB_INSTALL_DIR)/libtcl85.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtcl85.a)'
.endif
a67 1
.if ${NO_SHARED_LIBS:L} == "no"
a69 1
.endif
@


1.36
log
@Return to 8.5.18.
Update distinfo.
Port was based on an RC a few days prior to release.
Insignificant difference between RC and released version.
Apologies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/06/06 12:13:03 ajacoutot Exp $
d33 1
a33 2
CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--includedir="${PREFIX}/include/tcl8.5" \
@


1.35
log
@Revert tcl and tk update (8.5.18).
tcl distinfo is wrong and prevents half the tree to build.

prodded by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/10/21 05:08:14 stu Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.16
PKGNAME =		tcl-8.5.16
REVISION =		0
SHARED_LIBS =		tcl85 1.6
d20 1
a20 2
MAKE_FLAGS +=		TCL_PACKAGE_PATH='$$(prefix)/lib/tcl' \
			TCL_LIBRARY='$$(prefix)/lib/tcl/tcl$$(VERSION)'
a52 1
SUBST_VARS +=		_README_DIR
d58 8
a65 2
# XXX Until Tcl bug 2911139 is fixed; bug is in tests, not in Tcl.
TESTFLAGS += -skip 'http-4.14 socket-14.14'
@


1.34
log
@Update to 8.5.18.

Setup Tcl package path at configure time.
Cleanup README and adjust for new man.conf.
Improved lib/package/module path config/runtime.
Skip tests that will always fail due to assumptions that don't hold on OpenBSD.
@
text
@d5 4
a8 3
DISTNAME =		tcl8.5.18
PKGNAME =		tcl-8.5.18
SHARED_LIBS =		tcl85 1.7
d21 2
a22 1
MAKE_FLAGS =		TCL_LIBRARY='$$(prefix)/lib/tcl/tcl$$(VERSION)'
d55 1
d61 2
a62 8
# These tests will always fail due to assumptions that don't hold on OpenBSD.
# Skip them until they're improved.
# fCmd-9.4.b expects to be able to overwrite a read-only directory.
# http-4.14, socket-14.14 expect certain socket errors to occur later rather than sooner. Bug 2911139.
TESTFLAGS += -skip 'fCmd-9.4.b http-4.14 socket-14.14'

pre-configure:
	@@${SUBST_CMD} ${WRKDIST}/library/init.tcl
@


1.33
log
@Remove unecessary dir in Tcl's own module path.
Adjust extension module path to not conflict with anything in SUBST_VARS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/09/22 16:54:11 stu Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.16
PKGNAME =		tcl-8.5.16
REVISION =		0
SHARED_LIBS =		tcl85 1.6
d20 1
a20 2
MAKE_FLAGS +=		TCL_PACKAGE_PATH='$$(prefix)/lib/tcl' \
			TCL_LIBRARY='$$(prefix)/lib/tcl/tcl$$(VERSION)'
a52 1
SUBST_VARS +=		_README_DIR
d58 8
a65 2
# XXX Until Tcl bug 2911139 is fixed; bug is in tests, not in Tcl.
TESTFLAGS += -skip 'http-4.14 socket-14.14'
@


1.32
log
@Update to 8.5.16. Drop threaded FLAVOR.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/01/11 12:56:41 ajacoutot Exp $
d7 1
@


1.31
log
@Do not hardcode /usr/local.
Do not use SYSCONFDIR for base system etc files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/11/05 04:45:18 stu Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.15
PKGNAME =		tcl-8.5.15
REVISION =		2
SHARED_LIBS =		tcl85 1.5
a42 8
FLAVORS =		threaded
FLAVOR ?=

.if ${FLAVOR:Mthreaded}
CONFIGURE_ARGS +=	--enable-threads
WANTLIB +=		pthread
.endif

d60 2
a61 2
# XXX Until Tcl bug 2911139 is fixed; bug is in test, not in Tcl.
TESTFLAGS += -skip http-4.14
@


1.30
log
@Unbreak man page rendering. Thanks to schwarze@@ for roff help.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/10/21 19:14:54 naddy Exp $
d7 1
a7 1
REVISION =		1
@


1.29
log
@remove local changes to generate cat man pages and instead just
install the source man pages; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/09/20 10:09:08 stu Exp $
d7 1
a7 1
REVISION =		0
@


1.28
log
@Update to 8.5.15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/07/16 02:48:05 stu Exp $
d7 1
d28 1
a28 4
			CONFIG_INSTALL_DIR='$$(SCRIPT_INSTALL_DIR)' \
			MAN1_INSTALL_DIR='$$(MAN_INSTALL_DIR)/cat1' \
			MAN3_INSTALL_DIR='$$(MAN_INSTALL_DIR)/cat3' \
			MANN_INSTALL_DIR='$$(MAN_INSTALL_DIR)/catn'
@


1.27
log
@Sync patch in README with recent /etc/man.conf changes.
Sync README with 8.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/07/06 11:04:19 stu Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.14
PKGNAME =		tcl-8.5.14
REVISION =		1
SHARED_LIBS =		tcl85 1.4
a60 1
CONFIGURE_ARGS +=	tcl_cv_ld_elf=yes
@


1.26
log
@M88k is elf now.
Skip unneeded elf check in configure.
Whitespace tweaks.
Fix packing lists for shared libs.

Thanks to miod@@ for original patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/06/28 06:12:39 stu Exp $
d7 1
a7 1
REVISION =		0
@


1.25
log
@Update to 8.5.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/03/11 11:20:28 espie Exp $
d7 1
d62 1
d66 1
a66 1
TEST_TARGET =	test
@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/11/19 15:09:52 stu Exp $
d5 3
a7 3
DISTNAME =		tcl8.5.13
PKGNAME =		tcl-8.5.13
SHARED_LIBS =		tcl85 1.3
d70 3
@


1.23
log
@Update to 8.5.13.

Ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/08/26 15:47:00 stu Exp $
a13 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d32 1
a32 1
REGRESS_FLAGS =		HOME=${TESTHOME} TESTFLAGS="${TESTFLAGS}"
d64 1
a64 1
REGRESS_TARGET =	test
d71 1
a71 1
pre-regress:
@


1.22
log
@Update to 8.5.12.

Ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/03/29 13:38:40 sthen Exp $
d5 3
a7 3
DISTNAME =		tcl8.5.12
PKGNAME =		tcl-8.5.12
SHARED_LIBS =		tcl85 1.2
@


1.21
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/12/08 22:41:48 sthen Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.11
PKGNAME =		tcl-8.5.11
REVISION =		0
SHARED_LIBS =		tcl85 1.1
d35 1
a35 1
REGRESS_FLAGS =		HOME=${TESTHOME}
d71 2
@


1.20
log
@typo in README; ok stu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/12/02 14:36:15 espie Exp $
d37 1
a37 1
SEPARATE_BUILD =	concurrent
@


1.19
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/11/21 18:30:50 stu Exp $
d7 1
@


1.18
log
@Update to tcl-8.5.11, use bsd.port.arch.mk.

Ok sebastia@@, sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/10/17 15:18:39 stu Exp $
d52 1
a52 1
.if ${FLAVOR:L:Mthreaded}
@


1.17
log
@Update to 8.5.10, remove patches for changes that have gone upstream,
rework pkg-readme to conform to new template, update man.conf patch,
move man dir to Tcl's lib dir, properly preprocess man pages.
Bump major due to function signature change in tcllib.

ok sebastiap@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/06/02 13:41:39 ajacoutot Exp $
d5 3
a7 3
DISTNAME =		tcl8.5.10
PKGNAME =		tcl-8.5.10
SHARED_LIBS =		tcl85 1.0
a48 7
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
ALL_TARGET =		all libtcl85.a
CONFIGURE_ARGS +=	EXTRA_INSTALL_BINARIES='@@echo "Installing libtcl85.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtcl85.a $$(LIB_INSTALL_DIR)/libtcl85.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtcl85.a)'
.endif

d57 9
d77 1
a77 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
@


1.16
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/01/05 16:13:53 stu Exp $
d5 3
a7 3
DISTNAME =		tcl8.5.9
PKGNAME =		tcl-8.5.9
SHARED_LIBS =		tcl85 0.6
a10 1
REVISION =		0
d30 4
a33 1
			CONFIG_INSTALL_DIR='$$(SCRIPT_INSTALL_DIR)'
d38 1
a38 1
CONFIGURE_STYLE =	autoconf no-autoheader old
d42 1
a42 1
			--mandir="${PREFIX}/man/tcl8.5" \
a48 2
AUTOCONF_VERSION =	2.59

d74 1
a74 1
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/man/tcl8.5
@


1.15
log
@Upgrade to 8.5.9. Newer, cleaner layout, consolidate
include files into one dir, simplify modules dirs layout,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/27 11:54:53 espie Exp $
d11 1
@


1.14
log
@minor bumps after pkg_create fix: generate catN entry when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/15 18:26:38 jasper Exp $
d5 3
a7 4
DISTNAME =		tcl8.5.8
PKGNAME =		tcl-8.5.8
REVISION =		2
SHARED_LIBS =		tcl85 0.5
d23 2
a24 4
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
MAKE_FLAGS +=		TCL_BUILD_EXP_FILE="libtcl85.a" \
			TCL_EXP_FILE="libtcl85.a"
.endif
d30 1
a30 1
			CONFIG_INSTALL_DIR="${WRKINST}${TRUEPREFIX}/lib/tcl8.5"
d34 3
a36 1
CONFIGURE_STYLE =	gnu old
d39 1
a39 1
			--mandir="${PREFIX}/lib/tcl8.5/man" \
d42 3
a44 2
			--disable-rpath
USE_GROFF =		Yes
d46 1
a46 1
CONFIGURE_ENV +=	SHLIB_VERSION="${LIBtcl85_VERSION}"
d48 5
a52 2
.if ${MACHINE_ARCH} == "sh"
CFLAGS +=		-O0
d65 1
a67 1
DOCDIR =		${PREFIX}/share/doc/tcltk8.5
d70 1
a70 1
	@@mkdir -p ${TESTHOME}
d73 1
@


1.13
log
@- switch to pkg-readmes

ok Stuart Cassoff (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/10/18 21:50:39 sthen Exp $
d7 1
a7 1
REVISION =		1
@


1.12
log
@fix tabs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/18 19:20:42 espie Exp $
d6 2
a7 1
PKGNAME =		tcl-8.5.8p0
d44 1
a44 1
USE_GROFF =	Yes
a68 4
pre-configure:
	cp ${FILESDIR}/README.OpenBSD ${WRKBUILD}
	${SUBST_CMD} ${WRKBUILD}/README.OpenBSD

a69 2
	${INSTALL_DATA_DIR} ${DOCDIR}
	${INSTALL_DATA} ${WRKBUILD}/README.OpenBSD ${DOCDIR}
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/06/07 18:12:05 jasper Exp $
d43 1
a43 1
			USE_GROFF =	Yes
@


1.10
log
@- make mips64 a bit happier, still fails on vax though

from sebastian reitenbach
ok stuart cassoff (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/02/06 10:27:21 pirofti Exp $
d43 1
@


1.9
log
@Let there be tcl on landisk. Okay espie@@.

Use -O0 instead of -O2, otherwise compilation fails right from the
start. No package, no bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/11/21 02:50:23 sthen Exp $
d6 1
a6 1
PKGNAME =		tcl-8.5.8
@


1.8
log
@Update to 8.5.8, from maintainer Stuart Cassoff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/04/24 21:13:13 sthen Exp $
d45 4
@


1.7
log
@update to Tcl/Tk 8.5.7, from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/12/26 23:36:03 steven Exp $
d5 3
a7 4
V =			8.5.7
DISTNAME =		tcl${V}
PKGNAME =		tcl-${V}
SHARED_LIBS =		tcl85 0.4
a44 3

# Needs a full network connection to run?
#REGRESS_IS_INTERACTIVE=Yes
@


1.6
log
@update to 8.5.6

from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/21 21:34:14 steven Exp $
d5 1
a5 1
V =			8.5.6
d8 1
a8 3

SHARED_LIBS =		tcl85 0.3

a9 1

a10 1

a35 1

d37 1
a37 3

AUTOCONF_VERSION =	2.59
CONFIGURE_STYLE =	autoconf no-autoheader old
d45 1
a45 2
CONFIGURE_ENV +=	SHLIB_VERSION="${LIBtcl85_VERSION}" \
			CFLAGS=""
@


1.5
log
@bugfix update to 8.5.5

from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/10/01 19:47:40 steven Exp $
d5 1
a5 1
V =			8.5.5
d9 1
a9 1
SHARED_LIBS =		tcl85 0.2
@


1.4
log
@update to 8.5.4 and various port cleanups
add README file for tcl/tk on OpenBSD

all from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/04/25 19:33:05 deanna Exp $
d5 1
a5 1
V =			8.5.4
d9 1
a9 1
SHARED_LIBS =		tcl85 0.1
@


1.3
log
@Patch tclConfig.sh to set TCL_SRC_DIR as the directory holding the
installed headers, rather than the port build directory.

From Stuart Cassoff (maintainer), ok deanna
@
text
@d3 1
a3 1
COMMENT=	Tool Command Language
d5 3
a7 1
VERSION=	8.5.2
d9 1
a9 7
DISTNAME=	tcl${VERSION}
PKGNAME=	tcl-${VERSION}p1
SHARED_LIBS=	tcl85 0.0
CATEGORIES=	lang lang/tcl
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=tcl/}
DISTFILES=	tcl${VERSION}-src.tar.gz
WANTLIB=	c m
d11 5
a15 2
MAINTAINER=	Stuart Cassoff <stwo@@users.sourceforge.net>
HOMEPAGE=	http://www.tcl.tk/
d18 33
a50 24
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

FLAVORS=	threaded
FLAVOR?=

WRKSRC=		${WRKDIST}/unix

SEPARATE_BUILD=	concurrent
AUTOCONF_VERSION= 2.59
CONFIGURE_STYLE= autoconf no-autoheader old
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--includedir="${LOCALBASE}/include/tcl8.5" \
		--mandir="${LOCALBASE}/lib/tcl8.5/man" \
		--sysconfdir="${SYSCONFDIR}"

CONFIGURE_ENV=	LIBtcl85_VERSION=${LIBtcl85_VERSION}
CONFIGURE_ENV+= CFLAGS=""

FAKE_FLAGS=	INSTALL_DATA_DIR="${INSTALL_DATA_DIR}"\
		INSTALL_LIBRARY="${INSTALL_DATA}" \
		INSTALL_DATA="${INSTALL_DATA}"
d52 8
a59 1
FAKE_FLAGS+=INSTALL_PROGRAM="${INSTALL_PROGRAM}"
d62 2
a63 2
CONFIGURE_ARGS+=--enable-threads
WANTLIB+=pthread
d66 5
a70 5
# Needs a full network connection to run?
#REGRESS_IS_INTERACTIVE=Yes
REGRESS_TARGET=	test
REGRESS_FLAGS=	HOME=${TESTHOME}
TESTHOME=${WRKDIR}/testhome
d75 4
d80 4
d85 1
@


1.2
log
@Fix Stuart's email address.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/04/25 14:10:46 deanna Exp $
d8 1
a8 1
PKGNAME=	tcl-${VERSION}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
PKGNAME=	tcl-${VERSION}
d15 1
a15 1
MAINTAINER=	Stuart Cassoff <aa72aa60@@sympatico.ca>
@


1.1.1.1
log
@import tcl 8.5

Highlights of Tcl 8.5

    * Speed: 8.5 now runs 10% faster than 8.4 with bytecode
      improvements, object caching and reduced memory usage.
    * Bignums: Tcl now supports arbitrary-precision integers,
      which improves math operations on large integers.
    * Safer interps: Tcl's powerful safe interpreter mechanism
      now has improved control of time and command limits in
      slave interpreters.
    * clock command: More robust implementation of command for
      specifying time, with significant l10n and i18n
      improvements.
    * dict command: New data structure that allows access to
      data by value rather than a variable name, which is
      substantially faster.
    * Additional improvements: Faster list search, new and
      improved mathematics procedures, anonymous procedures, new
      ways to package Tcl extensions, Tcl-level custom channel
      types, file and line location information for each
      command, and more.

from Stuart Cassoff (MAINTAINER)

ok steven@@

@
text
@@
