head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.6
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.3.0.8
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.6
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2015.06.06.14.19.10;	author stu;	state Exp;
branches;
next	1.5;
commitid	fldqw6xIw205uW4f;

1.5
date	2015.06.06.12.13.03;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	Iutnfu6D7PJqNzSp;

1.4
date	2015.06.05.20.34.58;	author stu;	state Exp;
branches;
next	1.3;
commitid	Cl9u6EePbrHhFl6a;

1.3
date	2013.06.28.06.12.39;	author stu;	state Exp;
branches;
next	1.2;

1.2
date	2011.10.17.15.18.39;	author stu;	state Exp;
branches;
next	1.1;

1.1
date	2011.01.05.16.13.53;	author stu;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Return to 8.5.18.
Update distinfo.
Port was based on an RC a few days prior to release.
Insignificant difference between RC and released version.
Apologies.
@
text
@$OpenBSD: patch-library_init_tcl,v 1.5 2015/06/06 12:13:03 ajacoutot Exp $
--- library/init.tcl.orig	Thu Feb 12 10:13:16 2015
+++ library/init.tcl	Thu Jun  4 22:58:15 2015
@@@@ -52,9 +52,14 @@@@ namespace eval tcl {
 	    lappend ::auto_path $Dir
 	}
     }
+
+# OpenBSD layout.
+# Tcl extensions shouldn't be installed in ${LOCALBASE}/lib.
+# Don't add ${LOCALBASE}/lib to the auto_path.
+
     set Dir [file join [file dirname [file dirname \
 	    [info nameofexecutable]]] lib]
-    if {$Dir ni $::auto_path} {
+    if {$Dir ne {${LOCALBASE}/lib} && $Dir ni $::auto_path} {
 	lappend ::auto_path $Dir
     }
     catch {
@


1.5
log
@Revert tcl and tk update (8.5.18).
tcl distinfo is wrong and prevents half the tree to build.

prodded by espie@@
@
text
@d1 4
a4 4
$OpenBSD: patch-library_init_tcl,v 1.3 2013/06/28 06:12:39 stu Exp $
--- library/init.tcl.orig	Fri Mar 22 07:39:05 2013
+++ library/init.tcl	Tue Apr  9 21:51:00 2013
@@@@ -52,11 +52,14 @@@@ namespace eval tcl {
d8 5
a12 2
+# OpenBSD layout
+if {0} {
d15 2
a16 1
     if {$Dir ni $::auto_path} {
a18 1
+}
a19 2
 	foreach Dir $::tcl_pkgPath {
 	    if {$Dir ni $::auto_path} {
@


1.4
log
@Update to 8.5.18.

Setup Tcl package path at configure time.
Cleanup README and adjust for new man.conf.
Improved lib/package/module path config/runtime.
Skip tests that will always fail due to assumptions that don't hold on OpenBSD.
@
text
@d2 3
a4 3
--- library/init.tcl.orig	Thu Feb 12 10:13:16 2015
+++ library/init.tcl	Thu Jun  4 22:58:15 2015
@@@@ -52,9 +52,14 @@@@ namespace eval tcl {
d8 2
a9 5
+
+# OpenBSD layout.
+# Tcl extensions shouldn't be installed in ${LOCALBASE}/lib.
+# Don't add ${LOCALBASE}/lib to the auto_path.
+
d12 1
a12 2
-    if {$Dir ni $::auto_path} {
+    if {$Dir ne {${LOCALBASE}/lib} && $Dir ni $::auto_path} {
d15 1
d17 2
@


1.3
log
@Update to 8.5.14.
@
text
@d1 4
a4 4
$OpenBSD: patch-library_init_tcl,v 1.2 2011/10/17 15:18:39 stu Exp $
--- library/init.tcl.orig	Fri Mar 22 07:39:05 2013
+++ library/init.tcl	Tue Apr  9 21:51:00 2013
@@@@ -52,11 +52,14 @@@@ namespace eval tcl {
d8 5
a12 2
+# OpenBSD layout
+if {0} {
d15 2
a16 1
     if {$Dir ni $::auto_path} {
a18 1
+}
a19 2
 	foreach Dir $::tcl_pkgPath {
 	    if {$Dir ni $::auto_path} {
@


1.2
log
@Update to 8.5.10, remove patches for changes that have gone upstream,
rework pkg-readme to conform to new template, update man.conf patch,
move man dir to Tcl's lib dir, properly preprocess man pages.
Bump major due to function signature change in tcllib.

ok sebastiap@@, sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-library_init_tcl,v 1.1 2011/01/05 16:13:53 stu Exp $
--- library/init.tcl.orig	Tue May 31 11:03:46 2011
+++ library/init.tcl	Wed Oct  5 01:55:14 2011
@@@@ -51,11 +51,14 @@@@ namespace eval tcl {
@


1.1
log
@Upgrade to 8.5.9. Newer, cleaner layout, consolidate
include files into one dir, simplify modules dirs layout,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 4
a4 4
$OpenBSD$
--- library/init.tcl.orig	Sat Oct  2 08:31:44 2010
+++ library/init.tcl	Sat Oct  2 08:33:17 2010
@@@@ -53,11 +53,14 @@@@ namespace eval tcl {
@

