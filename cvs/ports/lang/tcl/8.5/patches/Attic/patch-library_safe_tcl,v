head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.10.17.15.18.39;	author stu;	state dead;
branches;
next	1.1;

1.1
date	2011.01.05.16.13.53;	author stu;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 8.5.10, remove patches for changes that have gone upstream,
rework pkg-readme to conform to new template, update man.conf patch,
move man dir to Tcl's lib dir, properly preprocess man pages.
Bump major due to function signature change in tcllib.

ok sebastiap@@, sthen@@
@
text
@$OpenBSD: patch-library_safe_tcl,v 1.1 2011/01/05 16:13:53 stu Exp $
--- library/safe.tcl.orig	Thu Sep 23 17:54:01 2010
+++ library/safe.tcl	Fri Sep 24 03:28:58 2010
@@@@ -492,9 +492,9 @@@@ proc ::safe::InterpInit {
     # Sync the paths used to search for Tcl modules. This can be done only
     # now, after tm.tcl was loaded.
     namespace upvar ::safe S$slave state
-    ::interp eval $slave [list \
-	      ::tcl::tm::add {*}$state(tm_path_slave)]
-
+    if {[llength $state(tm_path_slave)] > 0} {
+	::interp eval $slave [list ::tcl::tm::add {*}$state(tm_path_slave)]
+    }
     return $slave
 }
 
@


1.1
log
@Upgrade to 8.5.9. Newer, cleaner layout, consolidate
include files into one dir, simplify modules dirs layout,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 1
a1 1
$OpenBSD$
@

