head	1.6;
access;
symbols
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.16
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.14
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.12
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.10
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.8
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.6
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.4
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2007.07.30.16.59.54;	author steven;	state dead;
branches;
next	1.5;

1.5
date	2006.10.18.13.10.37;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.08.12.43.52;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2002.02.05.22.33.49;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2001.11.21.00.45.21;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.10.10.04.17.40;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove obsolete tcl and tk 8.0

ok naddy@@
@
text
@$OpenBSD: patch-configure,v 1.5 2006/10/18 13:10:37 naddy Exp $
--- configure.orig	Tue Mar  9 07:51:26 1999
+++ configure	Wed Oct 18 12:33:05 2006
@@@@ -4096,15 +4096,15 @@@@ fi
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-	    SHLIB_CFLAGS="-fpic"
-	    SHLIB_LD="ld -Bshareable -x"
+	    SHLIB_CFLAGS="-fPIC"
+	    SHLIB_LD="${CC} -shared ${SHLIB_CFLAGS}"
 	    SHLIB_LD_LIBS=""
 	    SHLIB_SUFFIX=".so"
 	    DL_OBJS="tclLoadDl.o"
 	    DL_LIBS=""
 	    LD_FLAGS=""
 	    LD_SEARCH_FLAGS=""
-	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.${LIBtcl80_VERSION}'
 	
 else
   echo "$ac_t""no" 1>&6
@@@@ -4656,10 +4656,9 @@@@ if test "$tcl_ok" = "yes" -a "${SHLIB_SU
     TCL_LD_SEARCH_FLAGS="${LD_SEARCH_FLAGS}"
     eval "TCL_LIB_FILE=libtcl${TCL_SHARED_LIB_SUFFIX}"
     if test "x$DL_OBJS" = "xtclLoadAout.o"; then
-	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}"
+	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}; \${RANLIB} \${TCL_LIB_FILE}"
     else
 	MAKE_LIB="\${SHLIB_LD} -o \${TCL_LIB_FILE} \${OBJS} ${SHLIB_LD_LIBS}"
-	RANLIB=":"
     fi
 else
     TCL_SHARED_BUILD=0
@


1.5
log
@unconditionally use -fPIC (over -fpic)
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.4 2006/01/08 12:43:52 alek Exp $
@


1.4
log
@SHARED_LIBS
@
text
@d1 4
a4 5
$OpenBSD: patch-configure,v 1.3 2002/02/05 22:33:49 pvalchev Exp $
--- configure.orig	Mon Mar  8 23:51:26 1999
+++ configure	Tue Feb  5 16:06:42 2002
@@@@ -4095,16 +4095,21 @@@@ rm -f conftest*
 fi
d7 1
a7 1
-  
d10 1
a10 7
+
+	    case `machine` in
+	    sparc|sparc64)
+		SHLIB_CFLAGS="-fPIC";;
+	    *)
+		SHLIB_CFLAGS="-fpic";;
+	    esac
d23 1
a23 1
@@@@ -4656,10 +4661,9 @@@@ if test "$tcl_ok" = "yes" -a "${SHLIB_SU
@


1.3
log
@fix this on sparc64 - use -fPIC, not -fpic
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.2 2001/11/21 00:45:21 pvalchev Exp $
d26 1
a26 1
+	    TCL_SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.5'
@


1.2
log
@remove libdl hacks from here, too
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.1 2001/10/10 04:17:40 pvalchev Exp $
d3 1
a3 1
+++ configure	Tue Nov 20 00:24:05 2001
d13 1
a13 1
+	    sparc)
@


1.1
log
@- Link with -ldl on all ELF platforms
- Rename patches while here
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
+++ configure	Tue Oct  9 21:51:56 2001
@@@@ -4095,16 +4095,26 @@@@ rm -f conftest*
d22 1
a22 7
-	    DL_LIBS=""
+	    case `echo __ELF__ | gcc -E - | grep __ELF__` in
+	    __ELF__)
+		    DL_LIBS="";;
+	    *)
+		    DL_LIBS="-ldl";;
+	    esac
d30 1
a30 1
@@@@ -4656,10 +4666,9 @@@@ if test "$tcl_ok" = "yes" -a "${SHLIB_SU
@

