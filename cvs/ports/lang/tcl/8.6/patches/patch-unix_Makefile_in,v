head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.4
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	stu_20130202:1.1.1.1
	stu:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2015.05.22.04.17.01;	author stu;	state Exp;
branches;
next	1.4;
commitid	1z4XWzlHAxv6nkCN;

1.4
date	2014.10.21.05.08.53;	author stu;	state Exp;
branches;
next	1.3;
commitid	nUJwtCApQhe1dLLv;

1.3
date	2014.09.07.18.49.13;	author stu;	state Exp;
branches;
next	1.2;
commitid	mfMxhuNj9srwScLj;

1.2
date	2013.09.22.10.33.13;	author stu;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.02.11.15.01;	author stu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.02.02.11.15.01;	author stu;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to 8.6.4.

Discontinue the installation of private header files.
Discontinue patching an irrelevant file.
Use INSTALL_* as with the other Tcl/Tk ports. Better stripping.
Setup Tcl package path at configure time.
Cleanup README and adjust for new man.conf.
Improved lib/package/module path config/runtime.
Skip tests that will always fail due to assumptions that don't hold on OpenBSD.
Port improvements for less diff churn on future port updates.
@
text
@$OpenBSD: patch-unix_Makefile_in,v 1.4 2014/10/21 05:08:53 stu Exp $
--- unix/Makefile.in.orig	Fri Oct 24 16:39:18 2014
+++ unix/Makefile.in	Sat Oct 25 19:11:21 2014
@@@@ -633,6 +633,10 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
 	rm -f $@@
 	@@MAKE_STUB_LIB@@
 
+libtcl86.a: ${OBJS}
+	rm -f $@@
+	${STLIB_LD} $@@ ${OBJS} ; ${RANLIB} $@@
+
 # Make target which outputs the list of the .o contained in the Tcl lib useful
 # to build a single big shared library containing Tcl and other extensions.
 # Used for the Tcl Plugin.  -- dl
@@@@ -799,7 +803,6 @@@@ install-binaries: binaries
 	    done;
 	@@echo "Installing $(LIB_FILE) to $(DLL_INSTALL_DIR)/"
 	@@@@INSTALL_LIB@@
-	@@chmod 555 "$(DLL_INSTALL_DIR)/$(LIB_FILE)"
 	@@echo "Installing ${TCL_EXE} as $(BIN_INSTALL_DIR)/tclsh$(VERSION)${EXE_SUFFIX}"
 	@@$(INSTALL_PROGRAM) ${TCL_EXE} "$(BIN_INSTALL_DIR)/tclsh$(VERSION)${EXE_SUFFIX}"
 	@@echo "Installing tclConfig.sh to $(CONFIG_INSTALL_DIR)/"
@@@@ -814,7 +817,7 @@@@ install-binaries: binaries
 	@@EXTRA_INSTALL_BINARIES@@
 	@@echo "Installing pkg-config file to $(LIB_INSTALL_DIR)/pkgconfig/"
 	@@$(INSTALL_DATA_DIR) $(LIB_INSTALL_DIR)/pkgconfig
-	@@$(INSTALL_DATA) tcl.pc $(LIB_INSTALL_DIR)/pkgconfig/tcl.pc
+	@@$(INSTALL_DATA) tcl.pc $(LIB_INSTALL_DIR)/pkgconfig/tcl86.pc
 
 install-libraries: libraries
 	@@for i in "$(SCRIPT_INSTALL_DIR)"; \
@@@@ -825,7 +828,7 @@@@ install-libraries: libraries
 		else true; \
 		fi; \
 	    done;
-	@@for i in opt0.4 http1.0 encoding ../tcl8 ../tcl8/8.4  ../tcl8/8.4/platform ../tcl8/8.5 ../tcl8/8.6; \
+	@@for i in opt0.4 http1.0 encoding modules modules/platform ../modules/85 ../modules/86; \
 	    do \
 	    if [ ! -d "$(SCRIPT_INSTALL_DIR)"/$$i ] ; then \
 		echo "Making directory $(SCRIPT_INSTALL_DIR)/$$i"; \
@@@@ -845,21 +848,21 @@@@ install-libraries: libraries
 	    $(INSTALL_DATA) $$i "$(SCRIPT_INSTALL_DIR)"/http1.0; \
 	    done;
 	@@echo "Installing package http 2.8.8 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.6/http-2.8.8.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/modules/http-2.8.8.tm;
 	@@echo "Installing package opt0.4 files to $(SCRIPT_INSTALL_DIR)/opt0.4/";
 	@@for i in $(TOP_DIR)/library/opt/*.tcl ; \
 	    do \
 	    $(INSTALL_DATA) $$i "$(SCRIPT_INSTALL_DIR)"/opt0.4; \
 	    done;
 	@@echo "Installing package msgcat 1.5.2 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/msgcat/msgcat.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.5/msgcat-1.5.2.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/msgcat/msgcat.tcl "$(SCRIPT_INSTALL_DIR)"/modules/msgcat-1.5.2.tm;
 	@@echo "Installing package tcltest 2.3.8 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.5/tcltest-2.3.8.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/modules/tcltest-2.3.8.tm;
 
 	@@echo "Installing package platform 1.0.13 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.4/platform-1.0.13.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/modules/platform-1.0.13.tm;
 	@@echo "Installing package platform::shell 1.1.4 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/shell.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.4/platform/shell-1.1.4.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/shell.tcl "$(SCRIPT_INSTALL_DIR)"/modules/platform/shell-1.1.4.tm;
 
 	@@echo "Installing encoding files to $(SCRIPT_INSTALL_DIR)/encoding/";
 	@@for i in $(TOP_DIR)/library/encoding/*.enc ; do \
@


1.4
log
@Remove unecessary dir in Tcl's own module path.
Adjust extension module path to not conflict with anything in SUBST_VARS.
@
text
@d1 4
a4 4
$OpenBSD: patch-unix_Makefile_in,v 1.3 2014/09/07 18:49:13 stu Exp $
--- unix/Makefile.in.orig	Mon Jul 28 11:58:05 2014
+++ unix/Makefile.in	Sat Aug 16 18:21:09 2014
@@@@ -632,6 +632,10 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
d15 1
a15 1
@@@@ -798,7 +802,6 @@@@ install-binaries: binaries
d23 1
a23 1
@@@@ -813,7 +816,7 @@@@ install-binaries: binaries
d32 1
a32 1
@@@@ -824,7 +827,7 @@@@ install-libraries: libraries
d41 1
a41 1
@@@@ -844,21 +847,21 @@@@ install-libraries: libraries
@


1.3
log
@Update to 8.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-unix_Makefile_in,v 1.2 2013/09/22 10:33:13 stu Exp $
d37 1
a37 1
+	@@for i in opt0.4 http1.0 encoding modules/8.5/platform modules/8.6 ../modules/8.5 ../modules/8.6; \
d46 1
a46 1
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.6/http-2.8.8.tm;
d54 1
a54 1
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/msgcat/msgcat.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/msgcat-1.5.2.tm;
d57 1
a57 1
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/tcltest-2.3.8.tm;
d61 1
a61 1
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/platform-1.0.13.tm;
d64 1
a64 1
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/shell.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/platform/shell-1.1.4.tm;
@


1.2
log
@Update to 8.6.1.
@
text
@d1 4
a4 4
$OpenBSD: patch-unix_Makefile_in,v 1.1.1.1 2013/02/02 11:15:01 stu Exp $
--- unix/Makefile.in.orig	Tue Sep  3 13:39:15 2013
+++ unix/Makefile.in	Sat Sep  7 09:04:12 2013
@@@@ -630,6 +630,10 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
d15 1
a15 1
@@@@ -796,7 +800,6 @@@@ install-binaries: binaries
d23 1
a23 1
@@@@ -811,7 +814,7 @@@@ install-binaries: binaries
d32 1
a32 1
@@@@ -822,7 +825,7 @@@@ install-libraries: libraries
d41 1
a41 1
@@@@ -842,21 +845,21 @@@@ install-libraries: libraries
d44 3
a46 3
 	@@echo "Installing package http 2.8.7 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.6/http-2.8.7.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.6/http-2.8.7.tm;
d55 3
a57 3
 	@@echo "Installing package tcltest 2.3.6 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.5/tcltest-2.3.6.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/tcltest-2.3.6.tm;
d59 3
a61 3
 	@@echo "Installing package platform 1.0.12 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.4/platform-1.0.12.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/platform-1.0.12.tm;
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- unix/Makefile.in.orig	Thu Dec 20 10:02:15 2012
+++ unix/Makefile.in	Sun Jan 27 11:38:28 2013
@@@@ -623,6 +623,10 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
d15 2
a16 2
@@@@ -794,7 +798,6 @@@@ install-binaries: binaries
 	fi
d23 1
a23 1
@@@@ -809,7 +812,7 @@@@ install-binaries: binaries
d32 1
a32 1
@@@@ -820,7 +823,7 @@@@ install-libraries: libraries
d41 1
a41 1
@@@@ -840,21 +843,21 @@@@ install-libraries: libraries
d44 3
a46 3
 	@@echo "Installing package http 2.8.5 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.6/http-2.8.5.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/http/http.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.6/http-2.8.5.tm;
d52 6
a57 6
 	@@echo "Installing package msgcat 1.5.0 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/msgcat/msgcat.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.5/msgcat-1.5.0.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/msgcat/msgcat.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/msgcat-1.5.0.tm;
 	@@echo "Installing package tcltest 2.3.5 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.5/tcltest-2.3.5.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/tcltest/tcltest.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/tcltest-2.3.5.tm;
d59 3
a61 3
 	@@echo "Installing package platform 1.0.10 as a Tcl Module";
-	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/../tcl8/8.4/platform-1.0.10.tm;
+	@@$(INSTALL_DATA) $(TOP_DIR)/library/platform/platform.tcl "$(SCRIPT_INSTALL_DIR)"/modules/8.5/platform-1.0.10.tm;
@


1.1.1.1
log
@Import Tcl 8.6.0
Highlights: OO, IPV6, coroutines, zlib, threads
Release info: http://tcl.tk/software/tcltk/8.6.html

ok landry@@, sthen@@
@
text
@@
