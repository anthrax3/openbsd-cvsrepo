head	1.6;
access;
symbols
	OPENBSD_2_9:1.5.0.4
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.1.1.1.0.2
	OPENBSD_2_7_BASE:1.1.1.1
	kevlo_2000-Mar-27:1.1.1.1
	kevlo:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2001.05.12.08.57.24;	author kevlo;	state dead;
branches;
next	1.5;

1.5
date	2000.11.02.23.38.56;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2000.07.19.06.14.16;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2000.07.18.08.10.02;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2000.05.24.02.04.14;	author kevlo;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.27.02.08.47;	author kevlo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.03.27.02.08.47;	author kevlo;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2000.09.15.04.55.53;	author marc;	state Exp;
branches;
next	;


desc
@@


1.6
log
@upgrade to version 8.3.3
@
text
@--- configure.orig	Tue Aug  8 14:17:11 2000
+++ configure	Thu Nov  2 10:19:48 2000
@@@@ -5063,13 +5063,23 @@@@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-		# NetBSD/SPARC needs -fPIC, -fpic will not do.
-		SHLIB_CFLAGS="-fPIC"
-		SHLIB_LD="ld -Bshareable -x"
+		# OpenBSD/SPARC needs -fPIC, -fpic will not do.
+		case `machine` in
+		sparc)
+		    SHLIB_CFLAGS="-fPIC";;
+		 *)
+		    SHLIB_CFLAGS="-fpic";;
+	        esac
+		SHLIB_LD="${CC} -shared ${SHLIB_CFLAGS}"
 		SHLIB_LD_LIBS=""
 		SHLIB_SUFFIX=".so"
 		DL_OBJS="tclLoadDl.o"
-		DL_LIBS=""
+		case `machine` in
+		powerpc)
+			DL_LIBS="-ldl";;
+		*)
+			DL_LIBS="";;
+		esac
 		LDFLAGS=""
 		LD_SEARCH_FLAGS='-Wl,-rpath,${LIB_RUNTIME_DIR}'
 		echo $ac_n "checking for ELF""... $ac_c" 1>&6
@@@@ -5091,7 +5101,7 @@@@
 else
   rm -rf conftest*
   echo "$ac_t""no" 1>&6
-		    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+		    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.3'
 		
 fi
 rm -f conftest*
@@@@ -5787,10 +5797,9 @@@@
     TCL_LD_SEARCH_FLAGS="${LD_SEARCH_FLAGS}"
     eval "TCL_LIB_FILE=libtcl${TCL_SHARED_LIB_SUFFIX}"
     if test "x$DL_OBJS" = "xtclLoadAout.o"; then
-	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}"
+	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}; \${RANLIB} \${TCL_LIB_FILE}"
     else
 	MAKE_LIB="\${SHLIB_LD} -o \${TCL_LIB_FILE} \${OBJS} ${SHLIB_LD_LIBS}"
-	RANLIB=":"
     fi
 else
     case $system in
@@@@ -5874,7 +5883,7 @@@@
 # Replace DBGX with TCL_DBGX
 eval "STUB_LIB_FILE=\"${STUB_LIB_FILE}\""
 
-MAKE_STUB_LIB="ar cr \${STUB_LIB_FILE} \${STUB_LIB_OBJS}"
+MAKE_STUB_LIB="ar cr \${STUB_LIB_FILE} \${STUB_LIB_OBJS}; \${RANLIB} \${STUB_LIB_FILE}"
 
 TCL_STUB_LIB_FILE=${STUB_LIB_FILE}
 
@


1.5
log
@Fix ppc build, from Dale.
@
text
@@


1.4
log
@fix comment in the autoconf script
@
text
@d1 3
a3 3
--- configure.orig	Wed Apr 26 16:50:57 2000
+++ configure	Wed Jul 19 02:11:34 2000
@@@@ -5063,9 +5063,14 @@@@
d17 1
a17 1
+		SHLIB_LD="ld -Bshareable -Bforcearchive -x"
d21 11
a31 1
@@@@ -5091,7 +5096,7 @@@@
d40 1
a40 1
@@@@ -5787,10 +5792,9 @@@@
d52 1
a52 1
@@@@ -5874,7 +5878,7 @@@@
@


1.3
log
@fix mistake in this patch to the autoconf script, the original values for
SHLIB_CFLAGS and SHLIB_LD were being used because they were not removed.
@
text
@d2 1
a2 1
+++ configure	Tue Jul 18 04:04:05 2000
d10 1
a10 1
+		# OpenBSD needs -fPIC, -fpic will not do.
@


1.2
log
@Upgrade to version 8.3.1
@
text
@d1 3
a3 3
--- configure.orig	Wed May 24 01:04:32 2000
+++ configure	Wed May 24 01:12:19 2000
@@@@ -5063,7 +5063,14 @@@@
d8 2
a17 2
 		SHLIB_CFLAGS="-fPIC"
 		SHLIB_LD="ld -Bshareable -x"
d19 3
a21 1
@@@@ -5091,7 +5098,7 @@@@
d30 1
a30 1
@@@@ -5787,10 +5794,9 @@@@
d42 1
a42 1
@@@@ -5874,7 +5880,7 @@@@
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- configure.orig	Thu Feb 10 19:09:57 2000
+++ configure	Wed Mar 22 19:52:56 2000
@@@@ -4933,7 +4933,14 @@@@
d12 1
a12 1
+                *)
d14 1
a14 1
+                esac
d19 1
a19 1
@@@@ -4961,7 +4968,7 @@@@
d28 1
a28 1
@@@@ -5652,10 +5659,9 @@@@
d33 1
a33 1
+       MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}; \${RANLIB} \${TCL_LIB_FILE}"
d40 1
a40 1
@@@@ -5739,7 +5745,7 @@@@
@


1.1.1.1
log
@Initial import of tcl
@
text
@@


1.1.1.1.2.1
log
@bring lang as of cut-over date into 2.7 branch
@
text
@d1 3
a3 3
--- configure.orig	Wed Apr 26 16:50:57 2000
+++ configure	Wed Jul 19 02:11:34 2000
@@@@ -5063,9 +5063,14 @@@@
d8 1
a8 3
-		SHLIB_CFLAGS="-fPIC"
-		SHLIB_LD="ld -Bshareable -x"
+		# OpenBSD/SPARC needs -fPIC, -fpic will not do.
d12 1
a12 1
+		 *)
d14 1
a14 1
+	        esac
d16 2
d19 1
a19 3
 		SHLIB_SUFFIX=".so"
 		DL_OBJS="tclLoadDl.o"
@@@@ -5091,7 +5096,7 @@@@
d28 1
a28 1
@@@@ -5787,10 +5792,9 @@@@
d33 1
a33 1
+	MAKE_LIB="ar cr \${TCL_LIB_FILE} \${OBJS}; \${RANLIB} \${TCL_LIB_FILE}"
d40 1
a40 1
@@@@ -5874,7 +5878,7 @@@@
@

