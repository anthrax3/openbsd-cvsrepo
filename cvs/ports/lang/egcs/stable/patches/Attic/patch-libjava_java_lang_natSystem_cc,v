head	1.3;
access;
symbols
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2004.01.31.14.58.03;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2002.06.03.18.32.30;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.29.10.39.53;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@switch to gcc 3.3.2 as a stable port
okay naddy@@
@
text
@$OpenBSD: patch-libjava_java_lang_natSystem_cc,v 1.2 2002/06/03 18:32:30 espie Exp $
--- libjava/java/lang/natSystem.cc.orig	Sun Apr  7 13:30:08 2002
+++ libjava/java/lang/natSystem.cc	Mon Jun  3 16:43:16 2002
@@@@ -168,7 +168,7 @@@@ java::lang::System::identityHashCode (jo
 }
 
 #if ! defined (DEFAULT_FILE_ENCODING) && defined (HAVE_ICONV) \
-    && defined (HAVE_NL_LANGINFO)
+    && defined (HAVE_LANGINFO_CODESET)
 
 static char *
 file_encoding ()
@


1.2
log
@Re-do check for nl_langinfo(CODESET) in a more correct way.
@
text
@d1 1
a1 1
$OpenBSD: patch-libjava_java_lang_natSystem_cc,v 1.1 2002/05/29 10:39:53 espie Exp $
@


1.1
log
@no CODESET for us.
@
text
@d1 11
a11 4
$OpenBSD$
--- libjava/java/lang/natSystem.cc.orig	Wed May 29 12:06:34 2002
+++ libjava/java/lang/natSystem.cc	Wed May 29 12:07:10 2002
@@@@ -174,7 +174,11 @@@@ static char *
a12 10
 {
   setlocale (LC_CTYPE, "");
+#if defined(CODESET)
   char *e = nl_langinfo (CODESET);
+#else
+  char *e = NULL;
+#endif
   if (e == NULL || *e == '\0')
     e = "8859_1";
   return e;
@

