head	1.3;
access;
symbols
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2002.11.24.11.52.32;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2002.09.14.10.14.51;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.06.09.00.34.37;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to 3.2.1
Remove a large number of `speed-up patches' as they are likely to be
the cause for sparc64 and friends issues.
@
text
@$OpenBSD: patch-gcc_combine_c,v 1.2 2002/09/14 10:14:51 espie Exp $
--- gcc/combine.c.orig	Thu Jun 20 16:46:16 2002
+++ gcc/combine.c	Thu Sep 12 14:50:58 2002
@@@@ -11915,7 +11915,7 @@@@ move_deaths (x, maybe_kill_insn, from_cu
 		if (i < regno || i >= ourend)
 		  REG_NOTES (where_dead)
 		    = gen_rtx_EXPR_LIST (REG_DEAD,
-					 gen_rtx_REG (reg_raw_mode[i], i),
+					 regno_reg_rtx[i],
 					 REG_NOTES (where_dead));
 	    }
 
@@@@ -11942,7 +11942,7 @@@@ move_deaths (x, maybe_kill_insn, from_cu
 		offset = 1;
 
 	      for (i = regno + offset; i < ourend; i++)
-		move_deaths (gen_rtx_REG (reg_raw_mode[i], i),
+		move_deaths (regno_reg_rtx[i],
 			     maybe_kill_insn, from_cuid, to_insn, &oldnotes);
 	    }
 
@@@@ -12564,7 +12564,7 @@@@ distribute_notes (notes, from_insn, i3, 
 		      for (i = regno; i < endregno;
 			   i += HARD_REGNO_NREGS (i, reg_raw_mode[i]))
 			{
-			  rtx piece = gen_rtx_REG (reg_raw_mode[i], i);
+			  rtx piece = regno_reg_rtx[i];
 			  basic_block bb = BASIC_BLOCK (this_basic_block);
 
 			  if (! dead_or_set_p (place, piece)
@


1.2
log
@Update to gcc 3.2, remove integrated patches.
Fix packing lists, including missing %%SHARED%%.
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_combine_c,v 1.1 2002/06/09 00:34:37 espie Exp $
@


1.1
log
@somewhat larger speed-up: shared rtx for hardware registers, instead of
generating them again and again.

From Jeff Law, again.
@
text
@d1 4
a4 4
$OpenBSD$
--- gcc/combine.c.orig	Tue Apr 30 02:42:48 2002
+++ gcc/combine.c	Sat Jun  8 18:09:17 2002
@@@@ -11927,7 +11927,7 @@@@ move_deaths (x, maybe_kill_insn, from_cu
d13 1
a13 1
@@@@ -11954,7 +11954,7 @@@@ move_deaths (x, maybe_kill_insn, from_cu
d22 1
a22 1
@@@@ -12576,7 +12576,7 @@@@ distribute_notes (notes, from_insn, i3, 
@

