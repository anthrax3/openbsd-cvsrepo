head	1.2;
access;
symbols
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2002.11.24.11.52.32;	author espie;	state dead;
branches;
next	1.1;

1.1
date	2002.06.09.00.34.37;	author espie;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 3.2.1
Remove a large number of `speed-up patches' as they are likely to be
the cause for sparc64 and friends issues.
@
text
@$OpenBSD: patch-gcc_df_c,v 1.1 2002/06/09 00:34:37 espie Exp $
--- gcc/df.c.orig	Wed Apr  3 23:26:51 2002
+++ gcc/df.c	Sat Jun  8 18:08:09 2002
@@@@ -633,8 +633,7 @@@@ static rtx df_reg_use_gen (regno)
   rtx reg;
   rtx use;
 
-  reg = regno >= FIRST_PSEUDO_REGISTER
-    ? regno_reg_rtx[regno] : gen_rtx_REG (reg_raw_mode[regno], regno);
+  reg = regno_reg_rtx[regno];
 
   use = gen_rtx_USE (GET_MODE (reg), reg);
   return use;
@@@@ -648,8 +647,7 @@@@ static rtx df_reg_clobber_gen (regno)
   rtx reg;
   rtx use;
 
-  reg = regno >= FIRST_PSEUDO_REGISTER
-    ? regno_reg_rtx[regno] : gen_rtx_REG (reg_raw_mode[regno], regno);
+  reg = regno_reg_rtx[regno];
 
   use = gen_rtx_CLOBBER (GET_MODE (reg), reg);
   return use;
@@@@ -905,7 +903,7 @@@@ df_ref_record (df, reg, loc, insn, ref_t
       endregno = regno + HARD_REGNO_NREGS (regno, GET_MODE (reg));
 
       for (i = regno; i < endregno; i++)
-	df_ref_record_1 (df, gen_rtx_REG (reg_raw_mode[i], i),
+	df_ref_record_1 (df, regno_reg_rtx[i],
 			 loc, insn, ref_type, ref_flags);
     }
   else
@


1.1
log
@somewhat larger speed-up: shared rtx for hardware registers, instead of
generating them again and again.

From Jeff Law, again.
@
text
@d1 1
a1 1
$OpenBSD$
@

