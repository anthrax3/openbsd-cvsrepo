head	1.3;
access;
symbols
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2002.11.24.11.52.32;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2002.09.14.10.14.51;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.06.09.00.34.37;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to 3.2.1
Remove a large number of `speed-up patches' as they are likely to be
the cause for sparc64 and friends issues.
@
text
@$OpenBSD: patch-gcc_emit-rtl_c,v 1.2 2002/09/14 10:14:51 espie Exp $
--- gcc/emit-rtl.c.orig	Mon Jul  1 23:50:14 2002
+++ gcc/emit-rtl.c	Thu Sep 12 14:50:59 2002
@@@@ -4817,6 +4817,7 @@@@ void
 init_emit ()
 {
   struct function *f = cfun;
+  int i;
 
   f->emit = (struct emit_status *) xmalloc (sizeof (struct emit_status));
   first_insn = NULL;
@@@@ -4846,8 +4847,13 @@@@ init_emit ()
   f->emit->regno_decl
     = (tree *) xcalloc (f->emit->regno_pointer_align_length, sizeof (tree));
 
+  /* Put copies of all the hard registers into regno_reg_rtx.  */
+  for (i = 0; i < FIRST_PSEUDO_REGISTER; i++)
+    regno_reg_rtx[i] = gen_raw_REG (reg_raw_mode[i], i);
+
   /* Put copies of all the virtual register rtx into regno_reg_rtx.  */
   init_virtual_regs (f->emit);
+
 
   /* Indicate that the virtual registers and stack locations are
      all pointers.  */
@


1.2
log
@Update to gcc 3.2, remove integrated patches.
Fix packing lists, including missing %%SHARED%%.
@
text
@d1 1
a1 1
$OpenBSD: patch-gcc_emit-rtl_c,v 1.1 2002/06/09 00:34:37 espie Exp $
@


1.1
log
@somewhat larger speed-up: shared rtx for hardware registers, instead of
generating them again and again.

From Jeff Law, again.
@
text
@d1 4
a4 4
$OpenBSD$
--- gcc/emit-rtl.c.orig	Fri Apr 12 14:13:26 2002
+++ gcc/emit-rtl.c	Sat Jun  8 18:08:09 2002
@@@@ -4803,6 +4803,7 @@@@ void
d12 1
a12 1
@@@@ -4832,8 +4833,13 @@@@ init_emit ()
@

