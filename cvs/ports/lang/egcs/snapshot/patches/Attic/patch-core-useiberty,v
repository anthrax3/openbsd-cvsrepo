head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	99.02.14.19.33.34;	author espie;	state dead;
branches;
next	1.3;

1.3
date	99.02.08.22.47.53;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	99.02.08.20.34.28;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	99.01.31.23.19.24;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to 990214 snapshot.
This snapshot disables recent loop changes, so the regressions from
990131 -> 990208 should no longer be there, I hope.

Removed patches have been folded back to mainstream.
This is a slight problem, as someone who wants to use an older snapshot
will have to track the CVS history of this port to find out what he
needs...

Fixed small PATH problem with autoreconf, thanks pefo.

New mips tweaks not yet in.
@
text
@--- gcc/Makefile.in.orig2	Sun Jan 31 22:49:30 1999
+++ gcc/Makefile.in	Sun Jan 31 22:57:25 1999
@@@@ -584,7 +584,8 @@@@
 
 # How to link with both our special library facilities
 # and the system's installed libraries.
-LIBS = $(OBSTACK) $(USE_ALLOCA) $(MALLOC) $(INTLLIBS) @@LIBS@@ $(VFPRINTF) $(DOPRINT) $(CLIB) ../libiberty/libiberty.a
+LIBIBERTY=../libiberty/libiberty.a
+LIBS = $(OBSTACK) $(USE_ALLOCA) $(MALLOC) $(INTLLIBS) @@LIBS@@ $(VFPRINTF) $(DOPRINT) $(CLIB) $(LIBIBERTY)
 
 # Likewise, for use in the tools that must run on this machine
 # even if we are cross-building GCC.
@@@@ -891,10 +892,10 @@@@
 # We call this executable `xgcc' rather than `gcc'
 # to avoid confusion if the current directory is in the path
 # and CC is `gcc'.  It is renamed to `gcc' when it is installed.
-xgcc$(exeext): gcc.o version.o choose-temp.o intl.o pexecute.o prefix.o \
-   version.o mkstemp.o $(LIBDEPS) $(EXTRA_GCC_OBJS)
+xgcc$(exeext): gcc.o version.o intl.o prefix.o \
+   version.o $(LIBDEPS) $(EXTRA_GCC_OBJS)
 	$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@@ gcc.o prefix.o version.o \
-	  choose-temp.o pexecute.o mkstemp.o $(EXTRA_GCC_OBJS) $(LIBS)
+	  $(EXTRA_GCC_OBJS) $(LIBS)
 
 # Dump a specs file to make -B./ read these specs over installed ones.
 specs: xgcc$(exeext)
@@@@ -1337,11 +1338,11 @@@@
     hard-reg-set.h $(BASIC_BLOCK_H)
 sbitmap.o: sbitmap.c $(CONFIG_H) system.h $(RTL_H) flags.h $(BASIC_BLOCK_H)
 
-collect2$(exeext): collect2.o tlink.o hash.o cplus-dem.o underscore.o \
-	version.o choose-temp.o mkstemp.o $(LIBDEPS)
+collect2$(exeext): collect2.o tlink.o hash.o underscore.o \
+	version.o $(LIBDEPS)
 
-COLLECT2_OBJS = collect2.o tlink.o hash.o choose-temp.o cplus-dem.o \
- intl.o underscore.o version.o mkstemp.o 
+COLLECT2_OBJS = collect2.o tlink.o hash.o \
+ intl.o underscore.o version.o 
 collect2 : $(COLLECT2_OBJS) $(LIBDEPS)
 # Don't try modifying collect2 (aka ld) in place--it might be linking this.
 	-rm -f collect2$(exeext)
@@@@ -1356,16 +1357,6 @@@@
 tlink.o: tlink.c $(DEMANGLE_H) hash.h $(CONFIG_H) system.h toplev.h collect2.h
 hash.o: hash.c hash.h system.h toplev.h
 
-cplus-dem.o: $(srcdir)/../libiberty/cplus-dem.c $(DEMANGLE_H)
-	rm -f cplus-dem.c
-	$(LN_S) $(srcdir)/../libiberty/cplus-dem.c cplus-dem.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) cplus-dem.c
-
-pexecute.o: $(srcdir)/../libiberty/pexecute.c $(CONFIG_H) system.h
-	rm -f pexecute.c
-	$(LN_S) $(srcdir)/../libiberty/pexecute.c pexecute.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) pexecute.c
-
 vfprintf.o: $(srcdir)/../libiberty/vfprintf.c $(CONFIG_H) system.h
 	rm -f vfprintf.c
 	$(LN_S) $(srcdir)/../libiberty/vfprintf.c vfprintf.c
@@@@ -1433,16 +1424,6 @@@@
 	$(LN_S) $(srcdir)/../libiberty/obstack.c obstack.c
 	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) obstack.c
 
-choose-temp.o: $(srcdir)/../libiberty/choose-temp.c $(CONFIG_H) system.h
-	rm -f choose-temp.c
-	$(LN_S) $(srcdir)/../libiberty/choose-temp.c choose-temp.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) choose-temp.c
-
-mkstemp.o: $(srcdir)/../libiberty/mkstemp.c $(CONFIG_H) system.h
-	rm -f mkstemp.c
-	$(LN_S) $(srcdir)/../libiberty/mkstemp.c mkstemp.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) mkstemp.c
-
 prefix.o: prefix.c $(CONFIG_H) system.h Makefile prefix.h
 	$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \
 	-DPREFIX=\"$(prefix)\" \
@@@@ -2022,8 +2003,7 @@@@
 
 proto: config.status protoize$(exeext) unprotoize$(exeext) SYSCALLS.c.X
 
-PROTO_OBJS = choose-temp.o getopt.o getopt1.o getpwd.o \
-  intl.o pexecute.o version.o mkstemp.o
+PROTO_OBJS = getpwd.o intl.o version.o 
 
 protoize$(exeext): protoize.o $(PROTO_OBJS) $(LIBDEPS)
 	$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@@ protoize.o $(PROTO_OBJS) $(LIBS)
@@@@ -2052,16 +2032,6 @@@@
 	  -DLOCAL_INCLUDE_DIR=\"$(includedir)\" \
 	  -DSTD_PROTO_DIR=\"$(libsubdir)\" \
 	  $(srcdir)/unprotoize.c
-
-getopt.o: $(srcdir)/../libiberty/getopt.c $(srcdir)/../include/getopt.h
-	rm -f getopt.c
-	$(LN_S) $(srcdir)/../libiberty/getopt.c getopt.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) getopt.c
-
-getopt1.o: $(srcdir)/../libiberty/getopt1.c $(srcdir)/../include/getopt.h
-	rm -f getopt1.c
-	$(LN_S) $(srcdir)/../libiberty/getopt1.c getopt1.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) getopt1.c
 
 # This info describes the target machine, so compile with GCC just built.
 SYSCALLS.c.X: $(srcdir)/sys-types.h $(srcdir)/sys-protos.h $(GCC_PASSES) \
@


1.3
log
@Revert previous change since egcs guys fucked up and didn't use their
cvs tree properly, sigh...
(took me 3 tries to get this right)
@
text
@@


1.2
log
@Update to 990208 snapshot: mainly kill all patches that I've got into egcs,
synch configure.in line numbers
and add a symbolic MASK_SNAKE I had forgotten for hppa.
@
text
@d13 91
@


1.1
log
@Clean up mkstemp patch mess.
@
text
@a12 91
@@@@ -891,10 +892,10 @@@@
 # We call this executable `xgcc' rather than `gcc'
 # to avoid confusion if the current directory is in the path
 # and CC is `gcc'.  It is renamed to `gcc' when it is installed.
-xgcc$(exeext): gcc.o version.o choose-temp.o intl.o pexecute.o prefix.o \
-   version.o mkstemp.o $(LIBDEPS) $(EXTRA_GCC_OBJS)
+xgcc$(exeext): gcc.o version.o intl.o prefix.o \
+   version.o $(LIBDEPS) $(EXTRA_GCC_OBJS)
 	$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@@ gcc.o prefix.o version.o \
-	  choose-temp.o pexecute.o mkstemp.o $(EXTRA_GCC_OBJS) $(LIBS)
+	  $(EXTRA_GCC_OBJS) $(LIBS)
 
 # Dump a specs file to make -B./ read these specs over installed ones.
 specs: xgcc$(exeext)
@@@@ -1337,11 +1338,11 @@@@
     hard-reg-set.h $(BASIC_BLOCK_H)
 sbitmap.o: sbitmap.c $(CONFIG_H) system.h $(RTL_H) flags.h $(BASIC_BLOCK_H)
 
-collect2$(exeext): collect2.o tlink.o hash.o cplus-dem.o underscore.o \
-	version.o choose-temp.o mkstemp.o $(LIBDEPS)
+collect2$(exeext): collect2.o tlink.o hash.o underscore.o \
+	version.o $(LIBDEPS)
 
-COLLECT2_OBJS = collect2.o tlink.o hash.o choose-temp.o cplus-dem.o \
- intl.o underscore.o version.o mkstemp.o 
+COLLECT2_OBJS = collect2.o tlink.o hash.o \
+ intl.o underscore.o version.o 
 collect2 : $(COLLECT2_OBJS) $(LIBDEPS)
 # Don't try modifying collect2 (aka ld) in place--it might be linking this.
 	-rm -f collect2$(exeext)
@@@@ -1356,16 +1357,6 @@@@
 tlink.o: tlink.c $(DEMANGLE_H) hash.h $(CONFIG_H) system.h toplev.h collect2.h
 hash.o: hash.c hash.h system.h toplev.h
 
-cplus-dem.o: $(srcdir)/../libiberty/cplus-dem.c $(DEMANGLE_H)
-	rm -f cplus-dem.c
-	$(LN_S) $(srcdir)/../libiberty/cplus-dem.c cplus-dem.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) cplus-dem.c
-
-pexecute.o: $(srcdir)/../libiberty/pexecute.c $(CONFIG_H) system.h
-	rm -f pexecute.c
-	$(LN_S) $(srcdir)/../libiberty/pexecute.c pexecute.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) pexecute.c
-
 vfprintf.o: $(srcdir)/../libiberty/vfprintf.c $(CONFIG_H) system.h
 	rm -f vfprintf.c
 	$(LN_S) $(srcdir)/../libiberty/vfprintf.c vfprintf.c
@@@@ -1433,16 +1424,6 @@@@
 	$(LN_S) $(srcdir)/../libiberty/obstack.c obstack.c
 	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) obstack.c
 
-choose-temp.o: $(srcdir)/../libiberty/choose-temp.c $(CONFIG_H) system.h
-	rm -f choose-temp.c
-	$(LN_S) $(srcdir)/../libiberty/choose-temp.c choose-temp.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) choose-temp.c
-
-mkstemp.o: $(srcdir)/../libiberty/mkstemp.c $(CONFIG_H) system.h
-	rm -f mkstemp.c
-	$(LN_S) $(srcdir)/../libiberty/mkstemp.c mkstemp.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) mkstemp.c
-
 prefix.o: prefix.c $(CONFIG_H) system.h Makefile prefix.h
 	$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \
 	-DPREFIX=\"$(prefix)\" \
@@@@ -2022,8 +2003,7 @@@@
 
 proto: config.status protoize$(exeext) unprotoize$(exeext) SYSCALLS.c.X
 
-PROTO_OBJS = choose-temp.o getopt.o getopt1.o getpwd.o \
-  intl.o pexecute.o version.o mkstemp.o
+PROTO_OBJS = getpwd.o intl.o version.o 
 
 protoize$(exeext): protoize.o $(PROTO_OBJS) $(LIBDEPS)
 	$(CC) $(ALL_CFLAGS) $(LDFLAGS) -o $@@ protoize.o $(PROTO_OBJS) $(LIBS)
@@@@ -2052,16 +2032,6 @@@@
 	  -DLOCAL_INCLUDE_DIR=\"$(includedir)\" \
 	  -DSTD_PROTO_DIR=\"$(libsubdir)\" \
 	  $(srcdir)/unprotoize.c
-
-getopt.o: $(srcdir)/../libiberty/getopt.c $(srcdir)/../include/getopt.h
-	rm -f getopt.c
-	$(LN_S) $(srcdir)/../libiberty/getopt.c getopt.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) getopt.c
-
-getopt1.o: $(srcdir)/../libiberty/getopt1.c $(srcdir)/../include/getopt.h
-	rm -f getopt1.c
-	$(LN_S) $(srcdir)/../libiberty/getopt1.c getopt1.c
-	$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) getopt1.c
 
 # This info describes the target machine, so compile with GCC just built.
 SYSCALLS.c.X: $(srcdir)/sys-types.h $(srcdir)/sys-protos.h $(GCC_PASSES) \
@

