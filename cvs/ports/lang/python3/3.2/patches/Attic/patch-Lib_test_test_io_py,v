head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.09.21.14.43.34;	author fgsch;	state dead;
branches;
next	1.1;

1.1
date	2011.07.20.12.06.57;	author rpointel;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Moved to python/3.2.
@
text
@$OpenBSD: patch-Lib_test_test_io_py,v 1.1 2011/07/20 12:06:57 rpointel Exp $
--- Lib/test/test_io.py.orig	Sat Jul  9 08:58:50 2011
+++ Lib/test/test_io.py	Mon Jul 11 14:13:36 2011
@@@@ -2694,12 +2694,15 @@@@
                 if e.errno != errno.EBADF:
                     raise
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupted_write_unbuffered(self):
         self.check_interrupted_write(b"xy", b"xy", mode="wb", buffering=0)
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupted_write_buffered(self):
         self.check_interrupted_write(b"xy", b"xy", mode="wb")
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupted_write_text(self):
         self.check_interrupted_write("xy", b"xy", mode="w", encoding="ascii")
 
@@@@ -2758,10 +2761,12 @@@@
             os.close(w)
             os.close(r)
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupterd_read_retry_buffered(self):
         self.check_interrupted_read_retry(lambda x: x.decode('latin1'),
                                           mode="rb")
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupterd_read_retry_text(self):
         self.check_interrupted_read_retry(lambda x: x,
                                           mode="r")
@@@@ -2821,9 +2826,11 @@@@
                 if e.errno != errno.EBADF:
                     raise
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupterd_write_retry_buffered(self):
         self.check_interrupted_write_retry(b"x", mode="wb")
 
+    @@unittest.skipIf(sys.platform.startswith("openbsd"), "blocking on OpenBSD")
     def test_interrupterd_write_retry_text(self):
         self.check_interrupted_write_retry("x", mode="w", encoding="latin1")
 
@


1.1
log
@Cleaned Makefile.inc and update Python 3.2 -> 3.2.1.
Permit to build on OpenBSD 5.x.
Added patches to permit "make regress" without block (to be improved).

Keep it unhooked.
@
text
@d1 1
a1 1
$OpenBSD$
@

