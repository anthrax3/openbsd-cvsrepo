head	1.7;
access;
symbols
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2017.02.13.16.07.07;	author juanfra;	state Exp;
branches;
next	1.6;
commitid	QSJTskHqhZ6hzlRX;

1.6
date	2016.11.21.22.37.21;	author juanfra;	state Exp;
branches;
next	1.5;
commitid	TBssDhckzBqojb0R;

1.5
date	2016.01.27.18.47.02;	author juanfra;	state Exp;
branches;
next	1.4;
commitid	lf0cHYAW8RpYx70p;

1.4
date	2015.08.24.11.47.05;	author jasper;	state Exp;
branches;
next	1.3;
commitid	R5J2vAoWC2UQ8yhw;

1.3
date	2015.07.24.23.43.17;	author juanfra;	state Exp;
branches;
next	1.2;
commitid	mHtiT1TslaedR7Fh;

1.2
date	2013.05.30.15.51.47;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2012.08.29.18.46.24;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to gambit 4.8.8.
@
text
@$OpenBSD: patch-configure,v 1.6 2016/11/21 22:37:21 juanfra Exp $

- https://github.com/feeley/gambit/pull/163

--- configure.orig	Thu Nov 17 14:08:11 2016
+++ configure	Mon Nov 21 23:02:57 2016
@@@@ -8796,7 +8796,7 @@@@ done
 
 
   case "$target_os" in
-    OpenBSD*)
+    openbsd*)
       # OpenBSD/mips64(el) does have get_fpc_csr(), but lacks union fpc_csr.
       ;;
     *)
@


1.6
log
@Update to gambit 4.8.6.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.5 2016/01/27 18:47:02 juanfra Exp $
a3 1
- https://github.com/feeley/gambit/issues/124
a15 40
@@@@ -13991,32 +13991,32 @@@@ if test "$datadir" = "\${datarootdir}"; then
   datadir="\${prefix}/share"
 fi
 
-GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR=\"\\\"`echo \"$prefix\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR=\"\\\"$prefix\\\"\""
 
 if test "$ENABLE_SYMLINKS" != yes; then
 
   if test "$bindir" != "\${prefix}/bin"; then
-    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_BIN=\"\\\"`echo \"$bindir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_BIN=\"\\\"$bindir\\\"\""
   fi
 
   if test "$includedir" != "\${prefix}/include"; then
-    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_INCLUDE=\"\\\"`echo \"$includedir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_INCLUDE=\"\\\"$includedir\\\"\""
   fi
 
   if test "$libdir" != "\${prefix}/lib"; then
-    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_LIB=\"\\\"`echo \"$libdir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_LIB=\"\\\"$libdir\\\"\""
   fi
 
   if test "$docdir" != "\${prefix}/doc"; then
-    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_DOC=\"\\\"`echo \"$docdir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_DOC=\"\\\"$docdir\\\"\""
   fi
 
   if test "$infodir" != "\${prefix}/info"; then
-    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_INFO=\"\\\"`echo \"$infodir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_INFO=\"\\\"$infodir\\\"\""
   fi
 
   if test "$datadir" != "\${prefix}/share"; then
-    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_SHARE=\"\\\"`echo \"$datadir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBITLIB_DEFS="$GAMBITLIB_DEFS -D___GAMBITDIR_SHARE=\"\\\"$datadir\\\"\""
   fi
 
 fi
@


1.5
log
@Update to Gambit 4.8.4.

In addition to the update, I'm removing the shared libs. The term
"shared" is misleading here, gambit will continue generating
dynamically linked binaries by default and the only static libraries
linked will be its own libraries. Nothing uses the non-versioned
gambit shared libraries in the ports tree.

OK jasper@@.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.4 2015/08/24 11:47:05 jasper Exp $
d6 3
a8 3
--- configure.orig	Sat Jan 16 00:50:43 2016
+++ configure	Fri Jan 22 22:22:18 2016
@@@@ -8559,7 +8559,7 @@@@ done
d17 1
a17 1
@@@@ -13619,32 +13619,32 @@@@ if test "$datadir" = "\${datarootdir}"; then
@


1.4
log
@unbreak mips64
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.3 2015/07/24 23:43:17 juanfra Exp $
d6 3
a8 3
--- configure.orig	Wed Jul 15 03:07:26 2015
+++ configure	Mon Aug 24 13:42:43 2015
@@@@ -8533,7 +8533,7 @@@@ done
d17 1
a17 1
@@@@ -13592,32 +13592,32 @@@@ if test "$datadir" = "\${datarootdir}"; then
d21 2
a22 2
-GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR=\"\\\"`echo \"$prefix\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR=\"\\\"$prefix\\\"\""
d27 2
a28 2
-    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_BIN=\"\\\"`echo \"$bindir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_BIN=\"\\\"$bindir\\\"\""
d32 2
a33 2
-    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_INCLUDE=\"\\\"`echo \"$includedir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_INCLUDE=\"\\\"$includedir\\\"\""
d37 2
a38 2
-    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_LIB=\"\\\"`echo \"$libdir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_LIB=\"\\\"$libdir\\\"\""
d42 2
a43 2
-    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_DOC=\"\\\"`echo \"$docdir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_DOC=\"\\\"$docdir\\\"\""
d47 2
a48 2
-    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_INFO=\"\\\"`echo \"$infodir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_INFO=\"\\\"$infodir\\\"\""
d52 2
a53 2
-    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_SHARE=\"\\\"`echo \"$datadir\" | sed -e \"s|/|$PATH_SEP|g\"`\\\"\""
+    GAMBCLIB_DEFS="$GAMBCLIB_DEFS -D___GAMBCDIR_SHARE=\"\\\"$datadir\\\"\""
@


1.3
log
@Update to gambit 4.7.7. Regex and OK jasper@@.
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 1
https://github.com/feeley/gambit/issues/124
d6 11
a16 2
--- configure.orig	Fri Jul 24 01:44:13 2015
+++ configure	Fri Jul 24 01:48:49 2015
@


1.2
log
@- update to gambit-4.6.8
@
text
@d1 46
a46 14
$OpenBSD: patch-configure,v 1.1 2012/08/29 18:46:24 jasper Exp $
--- configure.orig	Wed May 23 11:18:43 2012
+++ configure	Wed Aug 29 12:25:57 2012
@@@@ -21131,6 +21131,10 @@@@ choke me
 int
 main ()
 {
+#if defined(__OpenBSD__)
+#error OpenBSD/mips64(el) does have get_fpc_csr(), but lacks union fpc_csr.
+#endif
+
 return $ac_func ();
   ;
   return 0;
@


1.1
log
@skip the test for get_fpc_csr() on OpenBSD; we do have the function,
but gambit expects union fpc_csr to be present too, which we lack.
@
text
@d1 1
a1 1
$OpenBSD$
@

