head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2012.02.03.08.44.51;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2012.02.02.08.48.27;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to PHP 5.3.10, rolling in yesterday's security fix and also
fixing a memory leak.  OK robert@@
@
text
@$OpenBSD: patch-main_php_variables_c,v 1.1 2012/02/02 08:48:27 sthen Exp $

http://svn.php.net/viewvc/php/php-src/branches/PHP_5_3/main/php_variables.c?r1=321634&r2=323007&pathrev=323007&view=patch

--- main/php_variables.c.orig.port	Sun Jan  1 13:15:04 2012
+++ main/php_variables.c	Thu Feb  2 08:08:50 2012
@@@@ -198,6 +198,9 @@@@ PHPAPI void php_register_variable_ex(char *var_name, z
 						MAKE_STD_ZVAL(gpc_element);
 						array_init(gpc_element);
 						zend_symtable_update(symtable1, escaped_index, index_len + 1, &gpc_element, sizeof(zval *), (void **) &gpc_element_p);
+					} else {
+						efree(var_orig);
+						return;
 					}
 				}
 				if (index != escaped_index) {
@


1.1
log
@SECURITY - add a fix from upstream for a bug introduced with the recent
fix for CVE-2011-4885 included in PHP 5.3.9

Note that the Suhosin extension (which is enabled by default in our packages)
mitigates against this problem

ok robert@@ ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
@

