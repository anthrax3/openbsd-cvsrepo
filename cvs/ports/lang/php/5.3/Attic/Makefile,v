head	1.83;
access;
symbols
	OPENBSD_5_7:1.82.0.2
	OPENBSD_5_7_BASE:1.82
	OPENBSD_5_6:1.78.0.2
	OPENBSD_5_6_BASE:1.78
	OPENBSD_5_5:1.70.0.2
	OPENBSD_5_5_BASE:1.70
	OPENBSD_5_4:1.59.0.2
	OPENBSD_5_4_BASE:1.59
	OPENBSD_5_3:1.47.0.2
	OPENBSD_5_3_BASE:1.47
	OPENBSD_5_2:1.35.0.2
	OPENBSD_5_2_BASE:1.35
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.14.0.2
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.1.1.1.0.2
	OPENBSD_4_8_BASE:1.1.1.1
	robert_20100627:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.83
date	2015.06.10.12.53.49;	author robert;	state dead;
branches;
next	1.82;
commitid	SoY9NzRxZwkmSXir;

1.82
date	2014.11.15.10.17.44;	author robert;	state Exp;
branches;
next	1.81;
commitid	VcYTCuRa27ydXnLY;

1.81
date	2014.11.06.17.34.33;	author sthen;	state Exp;
branches;
next	1.80;
commitid	RG11JOeSvpyBzKPi;

1.80
date	2014.09.13.18.09.21;	author brad;	state Exp;
branches;
next	1.79;
commitid	PpbRjVZdAmlrmi8q;

1.79
date	2014.09.11.19.09.01;	author robert;	state Exp;
branches;
next	1.78;
commitid	kmiinGLnbjdLOUDA;

1.78
date	2014.07.14.08.02.07;	author ajacoutot;	state Exp;
branches
	1.78.2.1;
next	1.77;
commitid	r9sLn9qW4BkTzIlz;

1.77
date	2014.05.30.13.14.08;	author sthen;	state Exp;
branches;
next	1.76;

1.76
date	2014.04.21.15.35.34;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2014.04.21.14.19.52;	author sthen;	state Exp;
branches;
next	1.74;

1.74
date	2014.03.27.14.04.35;	author sthen;	state Exp;
branches;
next	1.73;

1.73
date	2014.03.27.10.41.21;	author sthen;	state Exp;
branches;
next	1.72;

1.72
date	2014.03.20.13.02.19;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2014.03.13.17.33.27;	author sthen;	state Exp;
branches;
next	1.70;

1.70
date	2014.01.16.23.17.32;	author sthen;	state Exp;
branches
	1.70.2.1;
next	1.69;

1.69
date	2014.01.11.15.01.56;	author sthen;	state Exp;
branches;
next	1.68;

1.68
date	2013.10.18.20.20.29;	author sthen;	state Exp;
branches;
next	1.67;

1.67
date	2013.10.17.09.11.34;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2013.10.12.10.44.22;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2013.08.23.10.06.45;	author sthen;	state Exp;
branches;
next	1.64;

1.64
date	2013.08.23.06.32.44;	author robert;	state Exp;
branches;
next	1.63;

1.63
date	2013.08.15.19.44.25;	author naddy;	state Exp;
branches;
next	1.62;

1.62
date	2013.08.08.18.52.40;	author robert;	state Exp;
branches;
next	1.61;

1.61
date	2013.08.08.14.26.11;	author robert;	state Exp;
branches;
next	1.60;

1.60
date	2013.08.07.07.10.36;	author jasper;	state Exp;
branches;
next	1.59;

1.59
date	2013.07.16.08.49.09;	author jasper;	state Exp;
branches
	1.59.2.1;
next	1.58;

1.58
date	2013.06.22.13.23.41;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2013.06.21.21.12.07;	author naddy;	state Exp;
branches;
next	1.56;

1.56
date	2013.06.20.06.54.38;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2013.06.17.19.30.33;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2013.06.12.20.36.33;	author brad;	state Exp;
branches;
next	1.53;

1.53
date	2013.06.11.19.00.42;	author robert;	state Exp;
branches;
next	1.52;

1.52
date	2013.05.30.00.29.50;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2013.05.25.00.33.09;	author brad;	state Exp;
branches;
next	1.50;

1.50
date	2013.04.18.08.38.54;	author sthen;	state Exp;
branches;
next	1.49;

1.49
date	2013.03.21.08.33.52;	author landry;	state Exp;
branches;
next	1.48;

1.48
date	2013.03.12.09.01.58;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2013.01.19.18.22.16;	author sthen;	state Exp;
branches
	1.47.2.1;
next	1.46;

1.46
date	2013.01.18.21.07.08;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2012.12.22.12.09.23;	author sthen;	state Exp;
branches;
next	1.44;

1.44
date	2012.11.30.12.56.02;	author sthen;	state Exp;
branches;
next	1.43;

1.43
date	2012.11.28.10.47.12;	author sthen;	state Exp;
branches;
next	1.42;

1.42
date	2012.10.24.07.58.48;	author pea;	state Exp;
branches;
next	1.41;

1.41
date	2012.09.27.16.45.51;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2012.09.25.20.16.08;	author sthen;	state Exp;
branches;
next	1.39;

1.39
date	2012.08.24.08.11.13;	author sthen;	state Exp;
branches;
next	1.38;

1.38
date	2012.08.23.19.19.17;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2012.08.05.12.00.54;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2012.08.05.10.32.09;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2012.06.21.06.58.51;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2012.06.17.06.49.07;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2012.06.16.12.51.07;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2012.06.12.09.23.10;	author landry;	state Exp;
branches;
next	1.31;

1.31
date	2012.05.19.02.49.45;	author william;	state Exp;
branches;
next	1.30;

1.30
date	2012.05.08.21.29.16;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2012.05.05.14.26.14;	author robert;	state Exp;
branches;
next	1.28;

1.28
date	2012.04.28.10.52.08;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.04.28.08.34.56;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2012.04.23.17.15.18;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2012.02.03.08.44.51;	author sthen;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2012.02.02.08.48.27;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2012.01.29.14.53.21;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2012.01.25.11.17.22;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2012.01.25.10.03.40;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2012.01.21.23.59.43;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2012.01.21.23.34.35;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.01.13.17.59.08;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.17.12.52.27;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2011.08.27.13.13.13;	author robert;	state Exp;
branches;
next	1.14;

1.14
date	2011.07.22.10.28.54;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.07.15.12.57.42;	author robert;	state Exp;
branches;
next	1.12;

1.12
date	2011.07.14.12.40.48;	author robert;	state Exp;
branches;
next	1.11;

1.11
date	2011.07.09.00.41.44;	author robert;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.08.16.57.35;	author robert;	state Exp;
branches;
next	1.9;

1.9
date	2011.05.12.14.30.12;	author robert;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.26.10.23.13;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2011.03.21.21.39.45;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.21.19.50.18;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2011.03.21.18.29.07;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.01.17.19.30.26;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.01.05.09.31.23;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.18.19.20.42;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.06.27.20.28.45;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.06.27.20.28.45;	author robert;	state Exp;
branches;
next	;

1.25.2.1
date	2012.05.08.21.35.03;	author sthen;	state Exp;
branches;
next	;

1.47.2.1
date	2013.05.08.21.05.44;	author sthen;	state Exp;
branches;
next	1.47.2.2;

1.47.2.2
date	2013.06.12.20.39.24;	author robert;	state Exp;
branches;
next	1.47.2.3;

1.47.2.3
date	2013.07.16.08.49.59;	author jasper;	state Exp;
branches;
next	;

1.59.2.1
date	2014.01.12.18.02.54;	author robert;	state Exp;
branches;
next	;

1.70.2.1
date	2014.09.12.18.42.37;	author robert;	state Exp;
branches;
next	;
commitid	MpNNGibiERI4UGDy;

1.78.2.1
date	2014.09.12.18.42.54;	author robert;	state Exp;
branches;
next	;
commitid	7Ukt7I2Y7gM0b0Xr;


desc
@@


1.83
log
@bye-bye php-5.3; prodded by aja@@
@
text
@# $OpenBSD: Makefile,v 1.82 2014/11/15 10:17:44 robert Exp $

BROKEN-hppa =	no __sync_bool_compare_and_swap support nor asm fallback

# XXX use the bundled libtool because it needs some specific options we
# don't have.
USE_LIBTOOL=	No

PV=		5.3
V=		${PV}.29
SUHOSIN_PHPV=	5.3.24
SUHOSIN_P_V=	5.3.x-0.9.10.5
REVISION=	1

INI_TEMPLATES=	development production

AUTOCONF_VERSION=      2.13

# sqlite
MULTI_PACKAGES+=	-sqlite
COMMENT-sqlite=		sqlite database access extensions for php5
CONFIGURE_ARGS+=	--with-sqlite=shared,${LOCALBASE} --enable-sqlite-utf8
LIB_DEPENDS-sqlite=	databases/sqlite
WANTLIB-sqlite=		sqlite>=8 pthread

.include <bsd.port.mk>
@


1.82
log
@fix lib-depends and prepare for php-5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2014/11/06 17:34:33 sthen Exp $
@


1.81
log
@Since we got rid of 5.2, all versions of php in tree now support fpm and
pcntl, so move the Makefile parts up to Makefile.inc. Looks ok to robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2014/09/13 18:09:21 brad Exp $
d13 1
a13 4
REVISION-pcntl=	0
REVISION-mysql=	0
REVISION-mysqli= 0
REVISION-pdo_mysql= 0
@


1.80
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2014/09/11 19:09:01 robert Exp $
d13 1
a20 20

# fpm
PKGNAME-fpm?=		php-fpm-${V}
MULTI_PACKAGES+=        -fpm
COMMENT-fpm=		stand-alone FPM version of PHP
CONFIGURE_ARGS+=	--enable-fpm \
			--with-fpm-user=www \
			--with-fpm-group=www
LIB_DEPENDS-fpm=	${LIB_DEPENDS-main}
WANTLIB-fpm=		${WANTLIB-main}
RUN_DEPENDS-fpm=	${RUN_DEPENDS-main} \
			php-${V}:lang/php/${PV}

# pcntl
PKGNAME-pcntl?=		php-pcntl-${V}
MULTI_PACKAGES+=	-pcntl
COMMENT-pcntl=		PCNTL extensions for php5
CONFIGURE_ARGS+=	--enable-pcntl=shared
LIB_DEPENDS-pcntl=
WANTLIB-pcntl=		pthread
@


1.79
log
@update to 5.3.29; includes security fix for CVE-2014-3981 and CVE-2014-3515
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2014/07/14 08:02:07 ajacoutot Exp $
d13 3
@


1.78
log
@Properly register sampled directories with @@sample instead of running
mkdir manually... bug found by sysmerge(8) WIP support for packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2014/05/30 13:14:08 sthen Exp $
d10 1
a10 1
V=		${PV}.28
d12 1
a12 3
SUHOSIN_P_V=	0.9.10unofficial
REVISION-main=	10
REVISION=	9
@


1.78.2.1
log
@MFC PHP security update to 5.3.29; includes security fix for CVE-2014-3981 and CVE-2014-3515

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2014/09/11 19:09:01 robert Exp $
d10 1
a10 1
V=		${PV}.29
d12 3
a14 1
SUHOSIN_P_V=	5.3.x-0.9.10.5
@


1.77
log
@/var/www/conf/modules.sample is no longer provided by base; noticed by florian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2014/04/21 15:35:34 sthen Exp $
d13 1
@


1.76
log
@also zap gssapi, spotted by aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2014/04/21 14:19:52 sthen Exp $
d13 1
a13 1
REVISION=	8
@


1.75
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2014/03/27 14:04:35 sthen Exp $
d13 1
a13 1
REVISION=	7
@


1.74
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2014/03/27 10:41:21 sthen Exp $
d13 1
a13 3
REVISION=	4
REVISION-main=	6
REVISION-odbc=	5
@


1.73
log
@switch sample php-fpm config to using unix sockets. ok robert@@,
tested with new nginx sample config, everything in chroot.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2014/03/20 13:02:19 ajacoutot Exp $
d15 1
@


1.72
log
@Default to UTC instead of having an undefined timezone.
This can be easily changed per application or system-wide and will allow
some PHP apps to behave right out-of-the-box without the following vomit:

PHP message: PHP Warning:  date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set().....

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2014/03/13 17:33:27 sthen Exp $
d14 1
a14 1
REVISION-main=	5
@


1.71
log
@handle httpd move, originally from florian@@, tweaks by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2014/01/16 23:17:32 sthen Exp $
d14 1
@


1.70
log
@php 5.4 now uses autoconf 2.69 upstream, pointed out by Donovan Watteau,
adjust AUTOCONF_VERSION to match.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2014/01/11 15:01:56 sthen Exp $
d13 1
a13 6
REVISION=		0
REVISION-main=		2
REVISION-fastcgi=	2
REVISION-fpm=		3
REVISION-tidy=		1
REVISION-imap=		1
@


1.70.2.1
log
@MFC PHP security update to 5.3.29; includes security fix for CVE-2014-3981 and CVE-2014-3515

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2014/01/16 23:17:32 sthen Exp $
d10 1
a10 1
V=		${PV}.29
d12 7
a18 1
SUHOSIN_P_V=	5.3.x-0.9.10.5
@


1.69
log
@update to php 5.3.28, fix CVE-2013-6420 memory corruption in openssl_x509_parse
(and roll in CVE patched locally). ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/10/18 20:20:29 sthen Exp $
d21 2
@


1.68
log
@fix the bump (REVISION was already 0 so REVISION-imap needs to be 1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2013/10/17 09:11:34 ajacoutot Exp $
d10 1
a10 1
V=		${PV}.27
@


1.67
log
@Fix deps after re-alpine -> alpine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2013/10/12 10:44:22 espie Exp $
d18 1
a18 1
REVISION-imap=		0
@


1.66
log
@no-conflict is a lie, the rcscripts conflict.
I'll let robert@@ figure out whether he wants to version the scripts
or what...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2013/08/23 10:06:45 sthen Exp $
d18 1
@


1.65
log
@Update to new PHP releases (and backported patch for 5.3), fixing the
recent security fix which was buggy.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2013/08/23 06:32:44 robert Exp $
d16 1
a16 1
REVISION-fpm=		2
@


1.64
log
@add patch from php git to fix CVE-2013-4073
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2013/08/15 19:44:25 naddy Exp $
d14 3
a16 3
REVISION-main=		1
REVISION-fastcgi=	1
REVISION-fpm=		1
@


1.63
log
@-tidy was already a revision ahead before the last general bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2013/08/08 18:52:40 robert Exp $
d13 5
a17 2
REVISION=	0
REVISION-tidy=	1
@


1.62
log
@add a patch to avoid picking libpam up in the imap module
and also add an "old sqlite" module to 5.3 which is still
supported there
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2013/08/08 14:26:11 robert Exp $
d14 1
@


1.61
log
@update to 5.3.27 (reaching EOL) and re-add the sqlite subpackage here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/07/16 08:49:09 jasper Exp $
d13 1
d35 1
a35 1
WANTLIB-pcntl=		c pthread
d42 1
a42 1
WANTLIB-sqlite=		sqlite>=8 c pthread
@


1.60
log
@previous commit lacked a revision bump and maintainer ok/time-out.
@
text
@a13 2
REVISION-tidy=	0

d35 7
@


1.59
log
@Update to php-5.3.27, includes a fix for CVE-2013-4113, heap corruption in xml parser

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/06/22 13:23:41 naddy Exp $
d13 2
@


1.59.2.1
log
@update to php 5.3.28, fix CVE-2013-6420 memory corruption in openssl_x509_parse
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/07/16 08:49:09 jasper Exp $
d10 1
a10 1
V=		${PV}.28
@


1.58
log
@bump -fastcgi after hx509 and ntlm removal from Kerberos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/06/21 21:12:07 naddy Exp $
d10 1
a10 1
V=		${PV}.26
a12 8

REVISION-main=		1
REVISION-fastcgi=	1
REVISION-fpm=		1
REVISION-imap=		1
REVISION-mysql=		1
REVISION-mysqli=	1
REVISION-pdo_mysql=	1
@


1.57
log
@bump -fpm after hx509 and ntlm removal from Kerberos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/06/20 06:54:38 ajacoutot Exp $
d15 1
a15 1
REVISION-fastcgi=	0
@


1.56
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/06/17 19:30:33 ajacoutot Exp $
d16 1
a16 1
REVISION-fpm=		0
@


1.55
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/06/12 20:36:33 brad Exp $
d14 1
a14 1
REVISION-main=		0
d17 1
a17 1
REVISION-imap=		0
@


1.54
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/06/11 19:00:42 robert Exp $
d14 4
@


1.53
log
@security update to 5.3.26, which fixes about 15 bugs, including CVE-2013-2110
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/05/30 00:29:50 sthen Exp $
d14 3
a16 3
REVISION-mysql=		0
REVISION-mysqli=	0
REVISION-pdo_mysql=	0
@


1.52
log
@update to php 5.3.25, ok robert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2013/05/25 00:33:09 brad Exp $
d10 1
a10 1
V=		${PV}.25
@


1.51
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2013/04/18 08:38:54 sthen Exp $
d10 1
a10 1
V=		${PV}.24
@


1.50
log
@update to PHP 5.3.24 and switch 5.3 to tar.bz2 distfiles
ok (and original diff for 5.3.23) william@@, maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2013/03/21 08:33:52 landry Exp $
d13 4
@


1.49
log
@Explicitely set USE_LIBTOOL=No for ports we know don't work with our
libtool.
Joint work with ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2013/03/12 09:01:58 sthen Exp $
d10 2
a11 2
V=		${PV}.22
SUHOSIN_PHPV=	5.3.21
@


1.48
log
@update to php 5.3.22, fixes a couple of segfaults and some other bugs
(http://www.php.net/ChangeLog-5.php).  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2013/01/19 18:22:16 sthen Exp $
d4 4
@


1.47
log
@unbreak patch; spotted by kili, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/01/18 21:07:08 sthen Exp $
d6 1
a6 1
V=		${PV}.21
@


1.47.2.1
log
@MFC update to PHP 5.3.24, includes various crash and security-related
fixes on the path from 5.3.21 to 5.3.24.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2013/04/18 08:38:54 sthen Exp $
d6 2
a7 2
V=		${PV}.24
SUHOSIN_PHPV=	5.3.24
a8 1
DISTFILES=	php-${V}.tar.bz2
@


1.47.2.2
log
@security update to 5.3.26, which fixes about 15 bugs, including CVE-2013-2110

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/06/11 19:00:42 robert Exp $
a4 4
# XXX use the bundled libtool because it needs some specific options we
# don't have.
USE_LIBTOOL=	No

d6 1
a6 1
V=		${PV}.26
d9 1
@


1.47.2.3
log
@Update to php-5.3.27, includes a fix for CVE-2013-4113, heap corruption in xml parser

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47.2.2 2013/06/12 20:39:24 robert Exp $
d10 1
a10 1
V=		${PV}.27
@


1.46
log
@bugfix update to php 5.3.21, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2012/12/22 12:09:23 sthen Exp $
d7 1
a7 1
SUHOSIN_PHPV=	5.3.19
@


1.45
log
@update to php 5.3.20, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2012/11/30 12:56:02 sthen Exp $
d6 1
a6 1
V=		${PV}.20
@


1.44
log
@For the ap2 flavour, strip the unwanted subpackages from MULTI_PACKAGES rather
than BUILD_PACKAGES (which is for pseudo-flavours). Reported by naddy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2012/11/28 10:47:12 sthen Exp $
d6 1
a6 1
V=		${PV}.19
@


1.43
log
@- update to PHP 5.3.19, with a re-rolled suhosin patch (the last official
one has a patch conflict due to copyright date changes)

- don't build pointless -ap2 flavoured subpackages (modules, fpm, fastcgi)

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2012/10/24 07:58:48 pea Exp $
a30 5

.include <bsd.port.arch.mk>
.if ${FLAVOR:L:Map2}
BUILD_PACKAGES :=	${BUILD_PACKAGES:N-fpm:N-fastcgi}
.endif
@


1.42
log
@Allow php to build on loongson
Fix types for sparc64

With help from Miod@@, thanks you !

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2012/09/27 16:45:51 ajacoutot Exp $
d6 3
a8 6
V=		${PV}.17
SUHOSIN_PHPV=	5.3.9
SUHOSIN_P_V=	0.9.10

REVISION-main=	0
REVISION-imap=	0
d31 5
@


1.41
log
@Use c-client from re-alpine (php-imap).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2012/09/25 20:16:08 sthen Exp $
d10 1
@


1.40
log
@update to php 5.3.17, maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2012/08/24 08:11:13 sthen Exp $
d9 2
@


1.39
log
@update to PHP 5.3.16, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/08/23 19:19:17 sthen Exp $
d6 1
a6 1
V=		${PV}.16
@


1.38
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/08/05 12:00:54 sthen Exp $
d6 1
a6 1
V=		${PV}.15
a8 2

REVISION=	0
@


1.37
log
@update PHP to 5.3.15 for real this time (committed previous from wrong machine)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/08/05 10:32:09 sthen Exp $
d10 2
d32 1
a32 1
WANTLIB-pcntl=
@


1.36
log
@bugfix update to php 5.3.15, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/06/21 06:58:51 ajacoutot Exp $
d6 1
a6 1
V=		${PV}.14
a8 3

REVISION=	0
REVISION-main=	2
@


1.35
log
@Merge pdo_sqlite into the core package; we have sqlite3 in base now.

input/ok sthen@@ robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/06/17 06:49:07 ajacoutot Exp $
d11 1
a11 1
REVISION-main=	1
@


1.34
log
@Put the ln(1) and rm(1) commands on one line so that lazy people like me
can just copy/paste it.

ok robert (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/06/16 12:51:07 sthen Exp $
d11 1
@


1.33
log
@update to PHP 5.3.14, "please do" robert@@
- also build the zip extension, from wen heping
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/06/12 09:23:10 landry Exp $
d9 2
@


1.32
log
@Mark as BROKEN on hppa, no __sync_bool_compare_and_swap() /
__sync_add_and_fetch() support and no asm fallback in
./sapi/fpm/fpm/fpm_atomic.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/05/19 02:49:45 william Exp $
d6 1
a6 1
V=		${PV}.13
a13 1
REVISION-fpm=		0
@


1.31
log
@Disable reloads of php-fpm for now, as it spins instead of reloading.
ok robert
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.30 2012/05/08 21:29:16 sthen Exp $
@


1.30
log
@update to PHP 5.3.13, fixing the fix for CVE-2012-2311 affecting CGI-based
setups (mod_php and FPM are unaffected).  OK robert@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/05/05 14:26:14 robert Exp $
d12 1
@


1.29
log
@update to 5.3.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/04/28 10:52:08 ajacoutot Exp $
d4 1
a4 1
V=		${PV}.12
@


1.28
log
@--localstatedir=/var is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/04/28 08:34:56 sthen Exp $
d4 1
a4 1
V=		${PV}.10
a6 2
REVISION-main=	0
REVISION-pdo_sqlite = 0
@


1.27
log
@Let php-config-5.[23] --php-binary report the correct path. This fixes
regression tests in pecl ports.  Part of my pecl.port.mk work which was
OK'd by jasper@@ (maintainer timeout).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/04/23 17:15:18 espie Exp $
a16 1
			--localstatedir=/var \
@


1.26
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/02/03 08:44:51 sthen Exp $
d7 1
@


1.25
log
@Update to PHP 5.3.10, rolling in yesterday's security fix and also
fixing a memory leak.  OK robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/02/02 08:48:27 sthen Exp $
d7 1
@


1.25.2.1
log
@MFC update from PHP 5.3.10 to 5.3.13, this includes SECURITY fixes for
CVE-2012-2311, CVE-2012-1172, CVE-2012-0831, etc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/05/08 21:29:16 sthen Exp $
d4 1
a4 1
V=		${PV}.13
@


1.24
log
@SECURITY - add a fix from upstream for a bug introduced with the recent
fix for CVE-2011-4885 included in PHP 5.3.9

Note that the Suhosin extension (which is enabled by default in our packages)
mitigates against this problem

ok robert@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/01/29 14:53:21 espie Exp $
d4 2
a5 2
V=		${PV}.9
SUHOSIN_PHPV=	${V}
a6 4
REVISION=	0
REVISION-main=	2
REVISION-fastcgi= 3
REVISION-fpm=	2
@


1.23
log
@allow for simultaneous install of 5.2 and 5.3 extensions.

This solves some nasty 5.0 -> current update problems.

Up to 5.0, lots of php-using packages were depending on php-mysql-5.2.
So the dependencies would update to php-mysql-5.2 from current.
BUT the php-using packages are now depending on 5.3 -> internal conflict !

With this change, things work again. After the update, you end up with
php-mysql-5.2 AND php-mysql-5.3, you can then try pkg_delete -a to weed
out "unneeded" php*-5.2

okay sthen@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/01/25 11:17:22 sthen Exp $
d8 3
a10 3
REVISION-main=	1
REVISION-fastcgi= 2
REVISION-fpm=	1
@


1.22
log
@Update the Suhosin extension to 0.9.33 fixing CVE-2012-0807.
Stack overflow, only affects a very specific and unusual non-default
configuration: transparent cookie encryption enabled, HTTP response
splitting protection disabled, *and* a PHP application must allow
unfiltered user input to header() in order to be affected.

Good write-up at http://seclists.org/fulldisclosure/2012/Jan/295
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/01/21 23:59:43 sthen Exp $
d7 1
d9 2
a10 2
REVISION-fastcgi= 1
REVISION-fpm=	0
@


1.21
log
@fix php-pcntl PKGNAME, ok robert@@
@
text
@d7 3
a9 1
REVISION-main=	0
@


1.20
log
@Enable chroot in the example php-fpm.conf file, mention it in DESCR-fpm.
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/01/21 23:34:35 sthen Exp $
d25 1
@


1.19
log
@update php-5.3 to 5.3.9
- SECURITY fixes: CVE-2012-0057 CVE-2011-4566 CVE-2012-0788 CVE-2012-0789
- sync WANTLIB for php-5.2 while there

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/01/13 17:59:08 sthen Exp $
d7 1
@


1.18
log
@- set SHARED_ONLY and roll PFRAG.shared-main into PLIST-main

- uncomment a couple of lines in the default php-fpm.conf so you
don't have to make any changes before it will start up

- add missing crypt_blowfish.h header to PLIST-main

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/17 12:52:27 robert Exp $
d4 1
a4 1
V=		${PV}.8
a6 1
REVISION =	1
@


1.17
log
@enable the pcntl extension to replace pecl-pcntl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/09/16 10:31:21 espie Exp $
d7 1
a7 1
REVISION =	0
@


1.16
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/08/27 13:13:13 robert Exp $
d23 7
@


1.15
log
@update php/5.3 to 5.3.8 and enable fpm support. the original fpm diff
was from william@@ but i had a slightly different approach of implementing
it in the port itself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/07/22 10:28:54 sthen Exp $
d7 1
@


1.14
log
@Make the description agree with the suggested commands when linking
php.conf from modules.sample into modules; ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/07/15 12:57:42 robert Exp $
d4 1
a4 1
V=		${PV}.6
d8 1
a8 2
REVISION-main=		1
REVISION-fastcgi=	2
d10 12
a21 1
INI_TEMPLATES=	development production
@


1.13
log
@fastcgi is hard without fastcgi support so enable it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/07/14 12:40:48 robert Exp $
d8 1
a8 1
REVISION-main=		0
@


1.12
log
@make sure to read the correct php configuraion file, noticed by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/07/09 00:41:44 robert Exp $
d9 1
a9 1
REVISION-fastcgi=	1
@


1.11
log
@fix fastcgi path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/07/08 16:57:35 robert Exp $
d8 2
a9 1
REVISION-fastcgi=	0
@


1.10
log
@update to 5.3.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/05/12 14:30:12 robert Exp $
d7 2
@


1.9
log
@fix update from www/php5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/03/26 10:23:13 sthen Exp $
d4 2
a5 2
V=		${PV}.5
SUHOSIN_PHPV=	${PV}.4
a6 4

REVISION=		0
REVISION-main=		4
REVISION-fastcgi=	2
@


1.8
log
@don't pick up an installed gsed; problem noticed by landry@@, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/03/21 21:39:45 robert Exp $
d8 3
a10 2
REVISION-main=		3
REVISION-fastcgi=	1
@


1.7
log
@do not conflict with the -fastcgi subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/03/21 19:50:18 jasper Exp $
d8 1
a8 1
REVISION-main=		2
@


1.6
log
@- fix the autoconf bits for openssl's pkg-config files as well as a fix
for one of the autoconf tests which assumes libssl is linked with libcrypto.

from brad
ok robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/03/21 18:29:07 ajacoutot Exp $
d8 2
a9 2
REVISION-main=		1
REVISION-fastcgi=	0
@


1.5
log
@Add femail,-chroot as a RUN_DEPENDS for php*-core. It is super small and
is nice to have around from the start.

Idea from sthen@@

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/01/17 19:30:26 sthen Exp $
d8 2
a9 1
REVISION-main=	0
@


1.4
log
@security update to 5.2.17/5.3.5; note that this port is still unlinked and WIP
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/01/05 09:31:23 robert Exp $
d7 2
@


1.3
log
@update both to their current version 5.3.4 and 5.2.16 and fix wantlibs.
update patches while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/18 19:20:42 espie Exp $
d4 2
a5 1
V=		${PV}.4
@


1.2
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/06/27 20:28:45 robert Exp $
d4 2
a5 3
V=		${PV}.2
SUHOSIN_V=	0.9.31
SUHOSIN_P_V=	0.9.9.1
a7 1
USE_GROFF =	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/03/21 09:05:55 robert Exp $
d9 1
@


1.1.1.1
log
@Import a reworked port of php to lang/php. The basic difference is that
there are no core and extensions packages anymore, everything is built by
the main ports itself and the package names have changed to php-${V} or
php-mysql-${V} for modules.

The new ports allows you to install all of the php versions just like python
so you can actually run different webservers with different versions of php
because you can't load two modules to one. You can only do that with fastcgi.

The port tries to share all the files that can be shared and the different
extensions are located in the local version's Makefile instead of Makefile.inc.

The other change is that *all* of the configuration has moved to /etc out
of /var/www because that was a realy stupid concept, since apache if you
use it chrooted, will load all of the extensions before doing the actual
chroot.

This port is not linked to the build yet because several issues have to
be resolved first, like providing a way to update from php5-* packages,
and probably other things that do not come into my mind right now,
because the Bullfrog is making me crazy.
@
text
@@
