head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.04.28.18.06.46;	author sthen;	state dead;
branches;
next	1.2;
commitid	i47ZnKZZ6MYLicYj;

1.2
date	2014.08.23.10.45.41;	author sthen;	state Exp;
branches;
next	1.1;
commitid	wQOjOJB7xqE6tAZV;

1.1
date	2014.04.19.12.06.44;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@5.4
@
text
@$OpenBSD: patch-ext_openssl_openssl_c,v 1.2 2014/08/23 10:45:41 sthen Exp $
--- ext/openssl/openssl.c.orig.port	Wed Aug 20 21:15:22 2014
+++ ext/openssl/openssl.c	Fri Aug 22 14:31:27 2014
@@@@ -915,11 +915,13 @@@@ static int php_openssl_load_rand_file(const char * fil
 
 	if (file == NULL) {
 		file = RAND_file_name(buffer, sizeof(buffer));
+#ifdef HAVE_SSL_RAND_EGD
 	} else if (RAND_egd(file) > 0) {
 		/* if the given filename is an EGD socket, don't
 		 * write anything back to it */
 		*egdsocket = 1;
 		return SUCCESS;
+#endif
 	}
 	if (file == NULL || !RAND_load_file(file, -1)) {
 		if (RAND_status() == 0) {
@


1.2
log
@update to php 5.4.32, ok robert@@
@
text
@d1 1
a1 1
$OpenBSD: patch-ext_openssl_openssl_c,v 1.1 2014/04/19 12:06:44 sthen Exp $
@


1.1
log
@handle RAND_egd removal
@
text
@d1 4
a4 4
$OpenBSD$
--- ext/openssl/openssl.c.orig.port	Sat Apr 19 06:03:42 2014
+++ ext/openssl/openssl.c	Sat Apr 19 06:04:06 2014
@@@@ -902,11 +902,13 @@@@ static int php_openssl_load_rand_file(const char * fil
@

