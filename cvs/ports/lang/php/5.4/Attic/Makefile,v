head	1.55;
access;
symbols
	OPENBSD_5_9:1.52.0.2
	OPENBSD_5_9_BASE:1.52
	OPENBSD_5_8:1.45.0.4
	OPENBSD_5_8_BASE:1.45
	OPENBSD_5_7:1.39.0.2
	OPENBSD_5_7_BASE:1.39
	OPENBSD_5_6:1.30.0.2
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.16.0.2
	OPENBSD_5_5_BASE:1.16
	robert_20130807:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.55
date	2016.04.28.18.06.46;	author sthen;	state dead;
branches;
next	1.54;
commitid	i47ZnKZZ6MYLicYj;

1.54
date	2016.04.18.09.45.52;	author sthen;	state Exp;
branches;
next	1.53;
commitid	Ix2olg4HBtWBE3Qr;

1.53
date	2016.04.13.11.42.59;	author naddy;	state Exp;
branches;
next	1.52;
commitid	6TDAtqv456sfxiTt;

1.52
date	2016.02.01.21.53.06;	author sthen;	state Exp;
branches;
next	1.51;
commitid	FC3tzOC0pxGWprm3;

1.51
date	2016.01.07.18.06.45;	author sthen;	state Exp;
branches;
next	1.50;
commitid	H4kokcanIaMGNWvF;

1.50
date	2015.11.06.18.31.45;	author sthen;	state Exp;
branches;
next	1.49;
commitid	bxfqqxWYDTbKolvQ;

1.49
date	2015.10.14.19.36.01;	author robert;	state Exp;
branches;
next	1.48;
commitid	BPcspjWq1zilTHfi;

1.48
date	2015.09.18.09.18.22;	author sthen;	state Exp;
branches;
next	1.47;
commitid	x1OqzrB6vMfHx6Ez;

1.47
date	2015.09.15.12.33.36;	author robert;	state Exp;
branches;
next	1.46;
commitid	Y6LCjIdywDeAmTXC;

1.46
date	2015.08.12.05.49.42;	author robert;	state Exp;
branches;
next	1.45;
commitid	WJG0Po8c9MDCPnp5;

1.45
date	2015.07.15.16.03.07;	author ajacoutot;	state Exp;
branches;
next	1.44;
commitid	bHx0hnbnAsyWwZso;

1.44
date	2015.07.10.06.29.25;	author robert;	state Exp;
branches;
next	1.43;
commitid	MjcrrYLGAjqlUVRw;

1.43
date	2015.06.14.13.38.46;	author robert;	state Exp;
branches;
next	1.42;
commitid	xZebkVJhemg6VOYx;

1.42
date	2015.05.17.12.00.22;	author robert;	state Exp;
branches;
next	1.41;
commitid	GuBpx50VueCHpdhS;

1.41
date	2015.04.25.16.08.35;	author robert;	state Exp;
branches;
next	1.40;
commitid	hCkgyyO1CT5SvbnY;

1.40
date	2015.03.21.22.32.41;	author sthen;	state Exp;
branches;
next	1.39;
commitid	yszZ2lalGP27QRVy;

1.39
date	2015.02.19.20.14.55;	author sthen;	state Exp;
branches
	1.39.2.1;
next	1.38;
commitid	vo4i5qquG86799vy;

1.38
date	2015.01.23.16.09.41;	author robert;	state Exp;
branches;
next	1.37;
commitid	sdnsPF9BHrxkdZ7o;

1.37
date	2014.12.28.12.13.04;	author robert;	state Exp;
branches;
next	1.36;
commitid	hrynG3CrWQFijt4B;

1.36
date	2014.11.15.10.18.12;	author robert;	state Exp;
branches;
next	1.35;
commitid	Ry9bF4JRTn5lwI5a;

1.35
date	2014.11.06.17.34.33;	author sthen;	state Exp;
branches;
next	1.34;
commitid	RG11JOeSvpyBzKPi;

1.34
date	2014.10.18.20.31.11;	author sthen;	state Exp;
branches;
next	1.33;
commitid	snE9tldJjsPCwIun;

1.33
date	2014.09.13.18.09.21;	author brad;	state Exp;
branches;
next	1.32;
commitid	PpbRjVZdAmlrmi8q;

1.32
date	2014.08.29.06.56.48;	author dlg;	state Exp;
branches;
next	1.31;
commitid	wpWhnFNueZbfhUX0;

1.31
date	2014.08.23.10.45.41;	author sthen;	state Exp;
branches;
next	1.30;
commitid	wQOjOJB7xqE6tAZV;

1.30
date	2014.07.14.08.02.07;	author ajacoutot;	state Exp;
branches
	1.30.2.1;
next	1.29;
commitid	r9sLn9qW4BkTzIlz;

1.29
date	2014.06.27.16.13.08;	author robert;	state Exp;
branches;
next	1.28;
commitid	ff6gaWmg1hi3f4yS;

1.28
date	2014.06.03.21.52.46;	author sthen;	state Exp;
branches;
next	1.27;
commitid	PPt6i4KzhTCFHg2G;

1.27
date	2014.05.30.13.14.08;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2014.05.12.22.12.03;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2014.04.23.08.39.58;	author edd;	state Exp;
branches;
next	1.24;

1.24
date	2014.04.21.15.35.34;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2014.04.21.14.19.52;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2014.04.06.12.52.25;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2014.03.27.14.04.35;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2014.03.27.10.41.21;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2014.03.20.13.02.19;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2014.03.18.15.18.36;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2014.03.13.17.33.27;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2014.01.16.23.17.32;	author sthen;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2014.01.11.15.02.46;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2013.11.03.15.34.52;	author robert;	state Exp;
branches;
next	1.13;

1.13
date	2013.10.17.09.11.35;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.10.12.10.44.23;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2013.09.20.20.20.10;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2013.09.07.13.49.42;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2013.08.24.09.23.28;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.08.23.10.06.46;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2013.08.23.06.31.29;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2013.08.10.15.05.54;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2013.08.08.19.11.56;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2013.08.08.18.50.37;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2013.08.08.18.28.58;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2013.08.08.16.25.29;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2013.08.07.16.35.45;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.08.07.16.35.45;	author robert;	state Exp;
branches;
next	;

1.16.2.1
date	2014.05.19.10.06.51;	author jasper;	state Exp;
branches;
next	1.16.2.2;

1.16.2.2
date	2014.06.28.13.14.50;	author sthen;	state Exp;
branches;
next	1.16.2.3;
commitid	BOI3jO8d3bpDmJAI;

1.16.2.3
date	2014.09.15.16.00.25;	author robert;	state Exp;
branches;
next	1.16.2.4;
commitid	GntFw8BVXTDVuPGo;

1.16.2.4
date	2014.10.22.12.24.34;	author robert;	state Exp;
branches;
next	1.16.2.5;
commitid	l8sYxvAjq1InPtYH;

1.16.2.5
date	2014.11.18.08.25.11;	author robert;	state Exp;
branches;
next	;
commitid	xgrbR4IpwVnBGbws;

1.30.2.1
date	2014.09.15.15.55.45;	author robert;	state Exp;
branches;
next	1.30.2.2;
commitid	IZy68jE1Q2MYuTit;

1.30.2.2
date	2014.10.22.12.23.08;	author robert;	state Exp;
branches;
next	1.30.2.3;
commitid	QstwVZIHILQ7Q6Od;

1.30.2.3
date	2014.11.18.08.24.03;	author robert;	state Exp;
branches;
next	1.30.2.4;
commitid	7jhkMuDYi3Ez37kP;

1.30.2.4
date	2014.12.29.11.08.33;	author robert;	state Exp;
branches;
next	1.30.2.5;
commitid	1cI1zJVcM1SYm8a9;

1.30.2.5
date	2015.01.24.17.19.43;	author robert;	state Exp;
branches;
next	1.30.2.6;
commitid	NyvT4lBAy6Pjo9E3;

1.30.2.6
date	2015.02.23.14.16.58;	author robert;	state Exp;
branches;
next	;
commitid	hEV4N1rXBBMe5x2x;

1.39.2.1
date	2015.05.18.07.06.33;	author kili;	state Exp;
branches;
next	1.39.2.2;
commitid	wchJJtpOJx3Mb2NG;

1.39.2.2
date	2015.06.14.13.39.43;	author robert;	state Exp;
branches;
next	;
commitid	MTfrSQ4RxVD5MjSS;


desc
@@


1.55
log
@5.4
@
text
@# $OpenBSD: Makefile,v 1.54 2016/04/18 09:45:52 sthen Exp $

PV=		5.4
V=		${PV}.45
REVISION=	3

.include <bsd.port.mk>
@


1.54
log
@Don't hardcode 'php5' in config file and DESCRs, there is php7 now.
Reported and initial diff from Frank Groeneveld, revised by me, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/04/13 11:42:59 naddy Exp $
@


1.53
log
@Replace iconv and gettext modules.
Clean up the dependencies of the -main and -fastcgi subpackages.
ok sthen@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/02/01 21:53:06 sthen Exp $
d5 1
a5 2
REVISION=	2
REVISION-fastcgi=3
@


1.52
log
@move php MESSAGE/UNMESSAGE to a README instead, fleshed out with a
little more information about how to use it with different web servers.
feedback/OK jasper@@ aja@@, bumps etc to follow.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/01/07 18:06:45 sthen Exp $
d6 1
@


1.51
log
@merge php-fpm into the main php packages, making things easier for
httpd/nginx/lighttpd users.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/11/06 18:31:45 sthen Exp $
d5 1
a5 2
REVISION-main=	1
REVISION-curl=	0
@


1.50
log
@WANTLIB sync, missed from the big batch of curl nghttp2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/10/14 19:36:01 robert Exp $
d5 1
a5 2
REVISION-main=	0
REVISION-fpm=	0
@


1.49
log
@Re-introduce the suhosin extension and the no_suhosin flavor as well
which can be used to disable the suhosin extension in the php packages.

We are not going to build this flavor by default because people should
use suhosin by default, but in some corner-cases if someone wants to disable
it, the flavor can be used.

Also move some variables and the sybase_ct subpackage from the Makefiles
to the shared one, there is no need to have the same data in 3 different
Makefiles.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/09/18 09:18:22 sthen Exp $
d7 1
@


1.48
log
@de-conflict php-fpm packages, ok robert@@

Heads up! The rc script has changed name:

  sed -i s/php_fpm/php56_fpm/g /etc/rc.conf.local
@
text
@d1 1
a1 7
# $OpenBSD: Makefile,v 1.47 2015/09/15 12:33:36 robert Exp $

BROKEN-hppa =	no __sync_bool_compare_and_swap support nor asm fallback

# XXX use the bundled libtool because it needs some specific options we
# don't have.
USE_LIBTOOL=	No
d5 1
a6 11

INI_TEMPLATES=	development production

CONFIGURE_ARGS+=	--enable-mysqlnd

# sybase-ct
MULTI_PACKAGES+=	-sybase_ct
COMMENT-sybase_ct=	sybase database access extensions for php5
CONFIGURE_ARGS+=	--with-sybase-ct=shared,${LOCALBASE}
LIB_DEPENDS-sybase_ct=	databases/freetds
WANTLIB-sybase_ct=	ct pthread
@


1.47
log
@security update to 5.4.45
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/08/12 05:49:42 robert Exp $
d11 1
@


1.46
log
@security update to 5.4.44
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/07/15 16:03:07 ajacoutot Exp $
d10 1
a10 1
V=		${PV}.44
@


1.45
log
@Tweak pexp a bit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/07/10 06:29:25 robert Exp $
a4 2
REVISION-fpm=	0

d10 1
a10 1
V=		${PV}.43
@


1.44
log
@update to 5.4.43
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/06/14 13:38:46 robert Exp $
d4 2
@


1.43
log
@security update to 5.4.42; fixes the following CVEs:
CVE-2015-3414, CVE-2015-3415, CVE-2015-3416
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/05/17 12:00:22 robert Exp $
d10 1
a10 1
V=		${PV}.42
@


1.42
log
@security update to 5.4.41
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/04/25 16:08:35 robert Exp $
d10 1
a10 1
V=		${PV}.41
@


1.41
log
@security update to 5.4.40; fixes the following CVEs:
CVE-2014-9709, CVE-2015-2301, CVE-2015-2783, CVE-2015-1352
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/03/21 22:32:41 sthen Exp $
d10 1
a10 1
V=		${PV}.40
@


1.40
log
@update to PHP-5.4.39, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/02/19 20:14:55 sthen Exp $
d10 1
a10 1
V=		${PV}.39
@


1.39
log
@SECURITY update to php-5.4.38, ok robert@@

CVE-2015-0273 (use-after-free with arbitrary code execution;
https://bugs.php.net/bug.php?id=68942), and various other fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/01/23 16:09:41 robert Exp $
d10 1
a10 1
V=		${PV}.38
@


1.39.2.1
log
@MFC: security update to 5.4.41

ok robert@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/02/19 20:14:55 sthen Exp $
d10 1
a10 1
V=		${PV}.41
@


1.39.2.2
log
@security update to 5.4.42; fixes the following CVEs:
CVE-2015-3414, CVE-2015-3415, CVE-2015-3416

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/06/14 13:38:46 robert Exp $
d10 1
a10 1
V=		${PV}.42
@


1.38
log
@update to 5.4.37;
fixes CVE-2015-0231, CVE-2014-9427 and CVE-2015-0232
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/12/28 12:13:04 robert Exp $
d10 1
a10 1
V=		${PV}.37
@


1.37
log
@security update to 5.4.36; fixes CVE-2014-8142
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/11/15 10:18:12 robert Exp $
d10 1
a10 1
V=		${PV}.36
@


1.36
log
@security update to php-5.4.35
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/11/06 17:34:33 sthen Exp $
d10 1
a10 1
V=		${PV}.35
@


1.35
log
@Since we got rid of 5.2, all versions of php in tree now support fpm and
pcntl, so move the Makefile parts up to Makefile.inc. Looks ok to robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/10/18 20:31:11 sthen Exp $
d10 1
a10 2
V=		${PV}.34
REVISION-pcntl=	0
a14 2

WANTLIB-main+=		stdc++ ncurses readline
@


1.34
log
@update to php 5.4.34, 5.5.18
ok robert@@ who also had a diff for this but forgot to commit it :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/09/13 18:09:21 brad Exp $
d11 1
a17 20

# fpm
PKGNAME-fpm?=		php-fpm-${V}
MULTI_PACKAGES+=	-fpm
COMMENT-fpm=		stand-alone FPM version of PHP
CONFIGURE_ARGS+=	--enable-fpm \
			--with-fpm-user=www \
			--with-fpm-group=www
LIB_DEPENDS-fpm=	${LIB_DEPENDS-main}
WANTLIB-fpm=		${WANTLIB-main}
RUN_DEPENDS-fpm=	${RUN_DEPENDS-main} \
			php-${V}:lang/php/${PV}

# pcntl
PKGNAME-pcntl?=		php-pcntl-${V}
MULTI_PACKAGES+=	-pcntl
COMMENT-pcntl=		PCNTL extensions for php5
CONFIGURE_ARGS+=	--enable-pcntl=shared
LIB_DEPENDS-pcntl=
WANTLIB-pcntl=		pthread
@


1.33
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/08/29 06:56:48 dlg Exp $
d10 1
a10 5
V=		${PV}.32
REVISION-mysql=	0
REVISION-mysqli= 0
REVISION-pdo_mysql= 0
REVISION-tidy=	1
@


1.32
log
@port the fix for the tidy tidyReleaseDate vs tidyVersion segfault.
basically ports/lang/php/5.3/patches/patch-ext_tidy_tidy_c r1.3

ok robert@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/08/23 10:45:41 sthen Exp $
d11 3
@


1.31
log
@update to php 5.4.32, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/07/14 08:02:07 ajacoutot Exp $
d11 1
@


1.30
log
@Properly register sampled directories with @@sample instead of running
mkdir manually... bug found by sysmerge(8) WIP support for packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/06/27 16:13:08 robert Exp $
d10 1
a10 2
V=		${PV}.30
REVISION-main=	0
@


1.30.2.1
log
@security update to 5.4.32; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/07/14 08:02:07 ajacoutot Exp $
d10 2
a11 1
V=		${PV}.32
@


1.30.2.2
log
@security update to 5.4.34
6 security-related bugs were fixed in this release,
including fixes for CVE-2014-3668, CVE-2014-3669 and CVE-2014-3670.
Also, a fix for OpenSSL which produced regressions was reverted

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30.2.1 2014/09/15 15:55:45 robert Exp $
d10 1
a10 1
V=		${PV}.34
@


1.30.2.3
log
@security update to 5.4.35; includes fixes for CVE-2014-3710

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30.2.2 2014/10/22 12:23:08 robert Exp $
d10 1
a10 1
V=		${PV}.35
@


1.30.2.4
log
@update to 5.4.36; fixes CVE-2014-8142
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30.2.3 2014/11/18 08:24:03 robert Exp $
d10 1
a10 1
V=		${PV}.36
@


1.30.2.5
log
@update to 5.4.37;
fixes CVE-2015-0231, CVE-2014-9427 and CVE-2015-0232

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30.2.4 2014/12/29 11:08:33 robert Exp $
d10 1
a10 1
V=		${PV}.37
@


1.30.2.6
log
@security update to 5.4.38; fixes several security issues:
CVE-2015-0235, CVE-2015-0273

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30.2.5 2015/01/24 17:19:43 robert Exp $
d10 1
a10 1
V=		${PV}.38
@


1.29
log
@update to 5.4.30:
Over 20 bugs were fixed in this release, including the following CVEs:
CVE-2014-3981, CVE-2014-0207, CVE-2014-3478, CVE-2014-3479, CVE-2014-3480,
CVE-2014-3487, CVE-2014-4049, CVE-2014-3515.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/06/03 21:52:46 sthen Exp $
d11 1
@


1.28
log
@update to php-5.4.28 / 5.5.13, bug/crash/DOS fixes.  ok robert@@
http://www.php.net/ChangeLog-5.php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/05/30 13:14:08 sthen Exp $
d10 1
a10 1
V=		${PV}.29
@


1.27
log
@/var/www/conf/modules.sample is no longer provided by base; noticed by florian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/05/12 22:12:03 sthen Exp $
d10 1
a10 2
V=		${PV}.28
REVISION-main=	0
@


1.26
log
@update to php 5.4.28/5.5.12, various fixes including some security-ish/leaks/
memory corruption.  ok robert@@

http://www.php.net/ChangeLog-5.php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/04/23 08:39:58 edd Exp $
d11 1
@


1.25
log
@Enable readline support in PHP-5.4 and PHP-5.5.

(But not in PHP-5.3, since readline support is broken and EOL).

OK sthen@@, with input from ajacoutot@@, thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/04/21 15:35:34 sthen Exp $
d10 1
a10 2
V=		${PV}.27
REVISION=	2
@


1.24
log
@also zap gssapi, spotted by aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/04/21 14:19:52 sthen Exp $
d11 1
a11 1
REVISION=	1
d17 1
a17 1
WANTLIB-main+=		stdc++
@


1.23
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/04/06 12:52:25 sthen Exp $
d11 1
a11 1
REVISION=	0
@


1.22
log
@update to PHP 5.4.27, ok robert@@

- Core: Fixed bug #60602 (proc_open() changes environment array)
- Fileinfo: Fixed bug #66946 (fileinfo: extensive backtracking in awk rule
   regular expression (CVE-2013-7345))
- FPM: Added clear_env configuration directive to disable clearenv() call.
- GMP: Fixed bug #66872 (invalid argument crashes gmp_testbit)
- Mail: Fixed bug #66535 (Don't add newline after X-PHP-Originating-Script)
- MySQLi: Fixed bug #66762 (Segfault in mysqli_stmt::bind_result() when
   link closed)
- Openssl: Fixed bug #66833 (Default disgest algo is still MD5, switch to SHA1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/03/27 14:04:35 sthen Exp $
d11 1
@


1.21
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/03/27 10:41:21 sthen Exp $
d10 1
a10 5
V=		${PV}.26
REVISION-main=	2
REVISION-fpm=	0
REVISION-fastcgi= 0
REVISION-odbc=	0
@


1.20
log
@switch sample php-fpm config to using unix sockets. ok robert@@,
tested with new nginx sample config, everything in chroot.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/03/20 13:02:19 ajacoutot Exp $
d11 4
a14 1
REVISION-main=	1
d20 2
d24 1
a24 1
MULTI_PACKAGES+=        -fpm
@


1.19
log
@Default to UTC instead of having an undefined timezone.
This can be easily changed per application or system-wide and will allow
some PHP apps to behave right out-of-the-box without the following vomit:

PHP message: PHP Warning:  date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set().....

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/03/18 15:18:36 sthen Exp $
d11 1
a11 1
REVISION-main=	0
@


1.18
log
@Security update to php 5.4.26, ok robert@@

5.4.26:
JSON: Fixed bug #65753 (JsonSerializeable couldn't implement on module extension)
Fileinfo: Fixed bug #66731 (file: infinite recursion) (CVE-2014-1943)
Fileinfo: Fixed bug #66820 (out-of-bounds memory access in fileinfo) (CVE-2014-2270)
LDAP: Implemented ldap_modify_batch (https://wiki.php.net/rfc/ldap_modify_batch).
Openssl: Fixed bug #66501 (Add EC key support to php_openssl_is_private_key).
Pgsql: Added warning for dangerous client encoding and remove possible
  injections for pg_insert()/pg_update()/pg_delete()/pg_select().

5.4.25:
Core: Fixed bug #66286 (Incorrect object comparison with inheritance).
Core: Fixed bug #66509 (copy() arginfo has changed starting from 5.4).
mysqlnd: Fixed bug #66283 (Segmentation fault after memory_limit).
PDO_pgsql: Fixed bug #62479 (PDO-psql cannot connect if password contains spaces).
Session: Fixed bug #66481 (Calls to session_name() segfault when session.name is null).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/03/13 17:33:27 sthen Exp $
d11 1
@


1.17
log
@handle httpd move, originally from florian@@, tweaks by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/01/16 23:17:32 sthen Exp $
d10 1
a10 2
V=		${PV}.24
REVISION=	0
@


1.16
log
@php 5.4 now uses autoconf 2.69 upstream, pointed out by Donovan Watteau,
adjust AUTOCONF_VERSION to match.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/01/11 15:02:46 sthen Exp $
d11 1
@


1.16.2.1
log
@security update to php-5.4.28

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/01/16 23:17:32 sthen Exp $
d10 1
a10 1
V=		${PV}.28
@


1.16.2.2
log
@MFC PHP security update, "Over 20 bugs were fixed in this release, including
the following CVEs: CVE-2014-3981, CVE-2014-0207, CVE-2014-3478, CVE-2014-3479,
CVE-2014-3480, CVE-2014-3487, CVE-2014-4049, CVE-2014-3515."

Not on the CVE list is this phpinfo bug https://bugs.php.net/bug.php?id=67498,
"if you are running as mod_php and there is mod_ssl this could be used to
steal the private SSL key from memory (if you can inject PHP code)."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/06/27 16:13:08 robert Exp $
d10 1
a10 1
V=		${PV}.30
@


1.16.2.3
log
@security update to 5.4.30; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16.2.2 2014/06/28 13:14:50 sthen Exp $
d10 1
a10 1
V=		${PV}.32
@


1.16.2.4
log
@security update 5.4.34
6 security-related bugs were fixed in this release,
including fixes for CVE-2014-3668, CVE-2014-3669 and CVE-2014-3670.
Also, a fix for OpenSSL which produced regressions was reverted

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16.2.3 2014/09/15 16:00:25 robert Exp $
d10 1
a10 1
V=		${PV}.34
@


1.16.2.5
log
@security update to 5.4.35; includes fixes for CVE-2014-3710

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16.2.4 2014/10/22 12:24:34 robert Exp $
d10 1
a10 1
V=		${PV}.35
a14 3

WANTLIB-main+=		stdc++
WANTLIB-odbc+=		iodbcinst
@


1.15
log
@update to php 5.4.24, various crash fixes, and CVE-2013-6420 memory corruption
in openssl_x509_parse.

remove local freetype patch, upstream now uses freetype-config.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/11/03 15:34:52 robert Exp $
a7 2

AUTOCONF_VERSION=	2.65
@


1.14
log
@update to 5.4.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/10/17 09:11:35 ajacoutot Exp $
d12 1
a12 1
V=		${PV}.21
@


1.13
log
@Fix deps after re-alpine -> alpine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/10/12 10:44:23 espie Exp $
d12 1
a12 3
V=		${PV}.20
REVISION-fpm =	0
REVISION-imap=	0
@


1.12
log
@no-conflict is a lie, the rcscripts conflict.
I'll let robert@@ figure out whether he wants to version the scripts
or what...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/09/20 20:20:10 sthen Exp $
d14 1
@


1.11
log
@update to php 5.4.20, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/09/07 13:49:42 sthen Exp $
d13 1
@


1.10
log
@add conflict and pkgpath markers, so that pecl-phar gets merged into PHP
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/08/24 09:23:28 sthen Exp $
d9 1
a9 1
AUTOCONF_VERSION=	2.59
d12 1
a12 2
V=		${PV}.19
REVISION-main=	1
@


1.9
log
@suhosin hasn't been ported to php 5.4 or 5.5 yet, so remove the
suhosin-related lines that we were patching into the config files
to avoid confusion.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/08/23 10:06:46 sthen Exp $
d13 1
a13 1
REVISION-main=	0
@


1.8
log
@Update to new PHP releases (and backported patch for 5.3), fixing the
recent security fix which was buggy.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/08/23 06:31:29 robert Exp $
d13 1
@


1.7
log
@update to 5.4.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/08/10 15:05:54 robert Exp $
d12 1
a12 1
V=		${PV}.18
@


1.6
log
@add @@pkgpath for pecl-fileinfo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/08/08 19:11:56 robert Exp $
d12 1
a12 3
V=		${PV}.17
REVISION=	0
REVISION-main=	1
@


1.5
log
@fix pkg conflicts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/08/08 18:50:37 robert Exp $
d14 1
@


1.4
log
@sqlite3 and pdo_sqlite moves back to -main because a lot of
ports are expecting this and we have sqlite in base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/08/08 18:28:58 robert Exp $
a10 1

d13 1
@


1.3
log
@add the sybase-ct module and add pkgpath entries for deprecated modules
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/08/08 16:25:29 robert Exp $
a37 7

# sqlite3
MULTI_PACKAGES+=	-sqlite3
COMMENT-sqlite3=	sqlite3 database access extensions for php5
CONFIGURE_ARGS+=	--with-sqlite3=shared
LIB_DEPENDS-sqlite3=
WANTLIB-sqlite3=	pthread
@


1.2
log
@add @@pkgpaths for updating from php 5.2 and add some new modules
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/08/07 16:35:45 robert Exp $
d45 7
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/07/16 08:49:09 jasper Exp $
d37 8
a44 1
WANTLIB-pcntl=		c pthread
@


1.1.1.1
log
@initial import of php 5.4
@
text
@@
