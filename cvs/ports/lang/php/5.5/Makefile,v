head	1.65;
access;
symbols
	OPENBSD_6_1:1.64.0.2
	OPENBSD_6_1_BASE:1.64
	OPENBSD_6_0:1.60.0.2
	OPENBSD_6_0_BASE:1.60
	OPENBSD_5_9:1.49.0.2
	OPENBSD_5_9_BASE:1.49
	OPENBSD_5_8:1.39.0.4
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.33.0.2
	OPENBSD_5_7_BASE:1.33
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.8.0.2
	OPENBSD_5_5_BASE:1.8
	robert_20130807:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.65
date	2017.06.12.11.48.34;	author sthen;	state Exp;
branches;
next	1.64;
commitid	yH2wqSvHTqG7Em8H;

1.64
date	2017.01.26.23.04.16;	author sthen;	state Exp;
branches;
next	1.63;
commitid	5KKS6HEkei4Omtey;

1.63
date	2016.12.19.20.34.22;	author martijn;	state Exp;
branches;
next	1.62;
commitid	eq4FUNxbaSoOK0BI;

1.62
date	2016.11.04.11.35.19;	author sthen;	state Exp;
branches;
next	1.61;
commitid	Gg5LRcnQlqj5M3F7;

1.61
date	2016.10.31.15.05.51;	author robert;	state Exp;
branches;
next	1.60;
commitid	eET11f3rUN4BSw9f;

1.60
date	2016.06.29.16.14.42;	author espie;	state Exp;
branches;
next	1.59;
commitid	c1yQMbJbfo0CFBcL;

1.59
date	2016.06.25.18.54.14;	author sthen;	state Exp;
branches;
next	1.58;
commitid	zcU2nAFaHCgsdQ9k;

1.58
date	2016.06.22.21.18.33;	author sthen;	state Exp;
branches;
next	1.57;
commitid	63hh4VGYx1HyCcWp;

1.57
date	2016.05.06.19.59.45;	author sthen;	state Exp;
branches;
next	1.56;
commitid	7WLfwBCNO2KiUdbZ;

1.56
date	2016.04.28.18.19.23;	author sthen;	state Exp;
branches;
next	1.55;
commitid	pOf6eYvOvaEiZswL;

1.55
date	2016.04.28.18.09.37;	author sthen;	state Exp;
branches;
next	1.54;
commitid	fXVFWVmkfptWbTkB;

1.54
date	2016.04.28.18.06.47;	author sthen;	state Exp;
branches;
next	1.53;
commitid	i47ZnKZZ6MYLicYj;

1.53
date	2016.04.18.09.45.52;	author sthen;	state Exp;
branches;
next	1.52;
commitid	Ix2olg4HBtWBE3Qr;

1.52
date	2016.04.13.11.42.59;	author naddy;	state Exp;
branches;
next	1.51;
commitid	6TDAtqv456sfxiTt;

1.51
date	2016.04.04.18.47.22;	author robert;	state Exp;
branches;
next	1.50;
commitid	Nkwt8xano3oZtjGD;

1.50
date	2016.03.17.16.53.58;	author sthen;	state Exp;
branches;
next	1.49;
commitid	63qdHONdPOqr0s3s;

1.49
date	2016.02.06.23.31.20;	author sthen;	state Exp;
branches;
next	1.48;
commitid	qavL05ggwVS8d1ZV;

1.48
date	2016.02.01.21.53.06;	author sthen;	state Exp;
branches;
next	1.47;
commitid	FC3tzOC0pxGWprm3;

1.47
date	2016.01.11.16.46.38;	author robert;	state Exp;
branches;
next	1.46;
commitid	hQTWafzoWcjEqif4;

1.46
date	2016.01.07.18.06.45;	author sthen;	state Exp;
branches;
next	1.45;
commitid	H4kokcanIaMGNWvF;

1.45
date	2015.11.06.18.31.45;	author sthen;	state Exp;
branches;
next	1.44;
commitid	bxfqqxWYDTbKolvQ;

1.44
date	2015.10.14.19.36.02;	author robert;	state Exp;
branches;
next	1.43;
commitid	BPcspjWq1zilTHfi;

1.43
date	2015.10.14.16.54.40;	author robert;	state Exp;
branches;
next	1.42;
commitid	jZPFfhabaYCbbrER;

1.42
date	2015.09.18.09.18.23;	author sthen;	state Exp;
branches;
next	1.41;
commitid	x1OqzrB6vMfHx6Ez;

1.41
date	2015.09.15.12.33.49;	author robert;	state Exp;
branches;
next	1.40;
commitid	OZVbnkuEJ5kOzxaz;

1.40
date	2015.08.12.05.50.04;	author robert;	state Exp;
branches;
next	1.39;
commitid	He7ZMfEtrGMoB97T;

1.39
date	2015.07.15.16.03.07;	author ajacoutot;	state Exp;
branches
	1.39.4.1;
next	1.38;
commitid	bHx0hnbnAsyWwZso;

1.38
date	2015.07.12.14.07.10;	author robert;	state Exp;
branches;
next	1.37;
commitid	8iZy6KQqRQziw4IS;

1.37
date	2015.06.11.20.25.34;	author robert;	state Exp;
branches;
next	1.36;
commitid	nijzUOf8ntTJ9dwO;

1.36
date	2015.05.17.12.00.57;	author robert;	state Exp;
branches;
next	1.35;
commitid	ybKXZ5nu7y0sKfhv;

1.35
date	2015.04.25.16.09.57;	author robert;	state Exp;
branches;
next	1.34;
commitid	knkdfMmDnlUFlt47;

1.34
date	2015.03.21.22.32.53;	author sthen;	state Exp;
branches;
next	1.33;
commitid	EM9DnSdkFSSwdBey;

1.33
date	2015.02.19.20.14.41;	author sthen;	state Exp;
branches
	1.33.2.1;
next	1.32;
commitid	76kjYWVl1azPr5P1;

1.32
date	2015.01.23.16.10.01;	author robert;	state Exp;
branches;
next	1.31;
commitid	Z6rTLhaW2N89LSBn;

1.31
date	2014.12.28.12.52.42;	author robert;	state Exp;
branches;
next	1.30;
commitid	MF6f1fF4SPKH3TBa;

1.30
date	2014.12.02.09.41.07;	author brad;	state Exp;
branches;
next	1.29;
commitid	m9vE4hf7c9HlfEOL;

1.29
date	2014.11.15.10.17.44;	author robert;	state Exp;
branches;
next	1.28;
commitid	VcYTCuRa27ydXnLY;

1.28
date	2014.11.13.19.57.16;	author robert;	state Exp;
branches;
next	1.27;
commitid	zIUSWAAv8s1CGJ7x;

1.27
date	2014.11.06.20.22.12;	author sthen;	state Exp;
branches;
next	1.26;
commitid	iK2fZMSVwq6iHDGh;

1.26
date	2014.11.06.17.34.34;	author sthen;	state Exp;
branches;
next	1.25;
commitid	RG11JOeSvpyBzKPi;

1.25
date	2014.10.18.20.31.11;	author sthen;	state Exp;
branches;
next	1.24;
commitid	snE9tldJjsPCwIun;

1.24
date	2014.09.13.18.09.21;	author brad;	state Exp;
branches;
next	1.23;
commitid	PpbRjVZdAmlrmi8q;

1.23
date	2014.08.23.10.45.51;	author sthen;	state Exp;
branches;
next	1.22;
commitid	VJF6JYwRNiBlHgCO;

1.22
date	2014.07.14.08.02.07;	author ajacoutot;	state Exp;
branches
	1.22.2.1;
next	1.21;
commitid	r9sLn9qW4BkTzIlz;

1.21
date	2014.06.27.16.10.59;	author robert;	state Exp;
branches;
next	1.20;
commitid	dcfKtNcBWPbIL6fK;

1.20
date	2014.06.03.21.52.46;	author sthen;	state Exp;
branches;
next	1.19;
commitid	PPt6i4KzhTCFHg2G;

1.19
date	2014.05.30.13.14.08;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2014.05.12.22.12.03;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2014.04.28.22.02.39;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2014.04.23.08.39.58;	author edd;	state Exp;
branches;
next	1.15;

1.15
date	2014.04.21.15.35.34;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2014.04.21.14.19.52;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2014.04.06.12.53.41;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2014.03.27.14.05.02;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2014.03.27.11.34.05;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2014.03.20.13.02.19;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2014.03.13.17.33.27;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.11.03.16.20.39;	author robert;	state Exp;
branches;
next	1.7;

1.7
date	2013.10.12.10.44.23;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2013.09.20.20.20.28;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2013.08.24.09.23.28;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2013.08.23.10.06.46;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2013.08.23.06.31.43;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2013.08.08.19.11.43;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2013.08.07.16.46.55;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.08.07.16.46.55;	author robert;	state Exp;
branches;
next	;

1.22.2.1
date	2014.09.15.15.55.22;	author robert;	state Exp;
branches;
next	1.22.2.2;
commitid	iLkEowQG8dUkjpup;

1.22.2.2
date	2014.10.22.12.22.32;	author robert;	state Exp;
branches;
next	1.22.2.3;
commitid	FTev7SzOtqm7y6CS;

1.22.2.3
date	2014.11.13.19.59.32;	author robert;	state Exp;
branches;
next	1.22.2.4;
commitid	PwqLxX9eA7ezlXi6;

1.22.2.4
date	2014.12.29.11.08.52;	author robert;	state Exp;
branches;
next	1.22.2.5;
commitid	Q1DBSSvQT36uy07r;

1.22.2.5
date	2015.01.24.17.20.01;	author robert;	state Exp;
branches;
next	1.22.2.6;
commitid	ZMWxUaz02yxFD0ve;

1.22.2.6
date	2015.02.23.14.17.24;	author robert;	state Exp;
branches;
next	;
commitid	1biXSYCJoFgtbf9h;

1.33.2.1
date	2015.05.18.07.07.12;	author kili;	state Exp;
branches;
next	1.33.2.2;
commitid	xdPfslAAvTxAPUwX;

1.33.2.2
date	2015.06.12.13.06.18;	author robert;	state Exp;
branches;
next	;
commitid	8cLk5InkLF8NTqzx;

1.39.4.1
date	2016.01.11.19.26.29;	author robert;	state Exp;
branches;
next	;
commitid	GKdM91EBUiWnEKKK;


desc
@@


1.65
log
@update to php-7.0.20, sync -intl WANTLIB
ok robert@@
@
text
@# $OpenBSD: Makefile,v 1.64 2017/01/26 23:04:16 sthen Exp $

BROKEN-alpha=	pcre_jit_compile.c:65:2: error: #error Unsupported architecture

PV=		5.5
V=		${PV}.38
REVISION =	0
REVISION-intl=	1

.include <bsd.port.mk>
@


1.64
log
@disable pcre jit in php/7.0 with a CONFIGURE_ARGS, move the BROKEN-alpha out
from Makefile.inc to 5.5 / 5.6 / 5.7, allowing 7.0 a chance to build there.
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/12/19 20:34:22 martijn Exp $
d8 1
@


1.63
log
@update to php-5.5.38, ok robert@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.62 2016/11/04 11:35:19 sthen Exp $
@


1.62
log
@sync WANTLIB (and in one case, add gettext to LIB_DEPENDS) in dependent ports
now that internationalised domain name support has been removed from net/curl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2016/10/31 15:05:51 robert Exp $
d4 1
a4 1
V=		${PV}.37
a5 5

REVISION-curl=		1
REVISION-soap=		1
REVISION-xmlrpc=	1
REVISION-xsl=		1
@


1.61
log
@fix wantlib for some subpackages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2016/06/29 16:14:42 espie Exp $
d7 1
@


1.60
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/06/25 18:54:14 sthen Exp $
d6 4
@


1.59
log
@update to php-5.5.37, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/06/22 21:18:33 sthen Exp $
d5 1
@


1.58
log
@fix no_suhosin build problem reported by Devin Ceartas
update to php-5.5.36, 5.6.22, 7.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/05/06 19:59:45 sthen Exp $
d4 1
a4 1
V=		${PV}.36
@


1.57
log
@update to php-5.5.35
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2016/04/28 18:19:23 sthen Exp $
d4 1
a4 1
V=		${PV}.35
@


1.56
log
@revert the revert: burn apache1 php modules, @@pkgpath is set so that updates
work from -ap2. ok robert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/04/28 18:06:47 sthen Exp $
d4 1
a4 3
V=		${PV}.34
REVISION=	0
REVISION-main=	1
@


1.55
log
@oops, revert, too soon (the dangers of cvs ci -m)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/04/18 09:45:52 sthen Exp $
d6 1
@


1.54
log
@5.4
@
text
@a5 1
REVISION-main=	1
@


1.53
log
@Don't hardcode 'php5' in config file and DESCRs, there is php7 now.
Reported and initial diff from Frank Groeneveld, revised by me, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/04/13 11:42:59 naddy Exp $
d6 1
@


1.52
log
@Replace iconv and gettext modules.
Clean up the dependencies of the -main and -fastcgi subpackages.
ok sthen@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/04/04 18:47:22 robert Exp $
d5 1
a5 1
REVISION-fastcgi=0
@


1.51
log
@update to 5.5.34
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2016/03/17 16:53:58 sthen Exp $
d5 1
@


1.50
log
@update to php-5.5.33, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/02/06 23:31:20 sthen Exp $
d4 1
a4 1
V=		${PV}.33
@


1.49
log
@security update to php-5.5.32, fixes include crashes, integer overflows,
and updating the bundled pcre (also security fixes).

add patches to use arc4random_buf instead of /dev/urandom (which is
typically not available on a normal OpenBSD php installation, with very
bad fallbacks in some cases).

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/02/01 21:53:06 sthen Exp $
d4 1
a4 1
V=		${PV}.32
@


1.48
log
@move php MESSAGE/UNMESSAGE to a README instead, fleshed out with a
little more information about how to use it with different web servers.
feedback/OK jasper@@ aja@@, bumps etc to follow.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/01/11 16:46:38 robert Exp $
d4 1
a4 2
V=		${PV}.31
REVISION=	0
@


1.47
log
@security update to 5.5.31
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/01/07 18:06:45 sthen Exp $
d5 1
@


1.46
log
@merge php-fpm into the main php packages, making things easier for
httpd/nginx/lighttpd users.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/11/06 18:31:45 sthen Exp $
d4 1
a4 4
V=		${PV}.30

REVISION-main=	1
REVISION-curl=	0
@


1.45
log
@WANTLIB sync, missed from the big batch of curl nghttp2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/10/14 19:36:02 robert Exp $
d6 1
a6 1
REVISION-main=	0
@


1.44
log
@Re-introduce the suhosin extension and the no_suhosin flavor as well
which can be used to disable the suhosin extension in the php packages.

We are not going to build this flavor by default because people should
use suhosin by default, but in some corner-cases if someone wants to disable
it, the flavor can be used.

Also move some variables and the sybase_ct subpackage from the Makefiles
to the shared one, there is no need to have the same data in 3 different
Makefiles.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/10/14 16:54:40 robert Exp $
d7 1
@


1.43
log
@update to 5.5.30
@
text
@d1 1
a1 7
# $OpenBSD: Makefile,v 1.42 2015/09/18 09:18:23 sthen Exp $

BROKEN-hppa =	no __sync_bool_compare_and_swap support nor asm fallback

# XXX use the bundled libtool because it needs some specific options we
# don't have.
USE_LIBTOOL=	No
d6 1
a6 10
INI_TEMPLATES=	development production

CONFIGURE_ARGS+=	--enable-mysqlnd

# sybase-ct
MULTI_PACKAGES+=	-sybase_ct
COMMENT-sybase_ct=	sybase database access extensions for php5
CONFIGURE_ARGS+=	--with-sybase-ct=shared,${LOCALBASE}
LIB_DEPENDS-sybase_ct=	databases/freetds
WANTLIB-sybase_ct=	ct pthread
@


1.42
log
@de-conflict php-fpm packages, ok robert@@

Heads up! The rc script has changed name:

  sed -i s/php_fpm/php56_fpm/g /etc/rc.conf.local
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/09/15 12:33:49 robert Exp $
d10 1
a10 2
V=		${PV}.29
REVISION-fpm=	0
@


1.41
log
@security update to 5.5.29
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/08/12 05:50:04 robert Exp $
d11 1
@


1.40
log
@security update to 5.5.28
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/07/15 16:03:07 ajacoutot Exp $
d10 1
a10 1
V=		${PV}.28
@


1.39
log
@Tweak pexp a bit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/07/12 14:07:10 robert Exp $
a4 2
REVISION-fpm=	0

d10 1
a10 1
V=		${PV}.27
@


1.39.4.1
log
@security update to 5.5.31;

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/07/15 16:03:07 ajacoutot Exp $
d5 2
d12 1
a12 1
V=		${PV}.31
@


1.38
log
@update to 5.5.27
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2015/06/11 20:25:34 robert Exp $
d4 2
@


1.37
log
@security update to 5.5.26; includes fixes for the following CVEs:
CVE-2015-2325, CVE-2015-2326, CVE-2015-3414, CVE-2015-3415, CVE-2015-3416
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/05/17 12:00:57 robert Exp $
d10 1
a10 1
V=		${PV}.26
@


1.36
log
@security update to 5.5.25
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/04/25 16:09:57 robert Exp $
d10 1
a10 1
V=		${PV}.25
@


1.35
log
@security update to 5.5.24; fixes the following CVEs:
CVE-2015-1351, CVE-2015-1352
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/03/21 22:32:53 sthen Exp $
d10 1
a10 1
V=		${PV}.24
@


1.34
log
@update to PHP-5.5.23, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/02/19 20:14:41 sthen Exp $
d10 1
a10 1
V=		${PV}.23
@


1.33
log
@SECURITY update to php-5.5.22, ok robert@@

CVE-2015-0273 (use-after-free with arbitrary code execution;
https://bugs.php.net/bug.php?id=68942), and various other fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/01/23 16:10:01 robert Exp $
d10 1
a10 1
V=		${PV}.22
@


1.33.2.1
log
@MFC: security update to 5.5.25
(also contains necessary changes from previous updates)

ok robert@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/02/19 20:14:41 sthen Exp $
d10 1
a10 1
V=		${PV}.25
@


1.33.2.2
log
@security update to 5.5.26; includes fixes for the following CVEs:
CVE-2015-2325, CVE-2015-2326, CVE-2015-3414, CVE-2015-3415, CVE-2015-3416

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33.2.1 2015/05/18 07:07:12 kili Exp $
d10 1
a10 1
V=		${PV}.26
@


1.32
log
@update to 5.5.21;
fixes CVE-2015-0231, CVE-2014-9427 and CVE-2015-0232
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/12/28 12:52:42 robert Exp $
d10 1
a10 1
V=		${PV}.21
@


1.31
log
@security update to 5.5.20; fixes CVE-2014-8142
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/12/02 09:41:07 brad Exp $
d10 1
a10 1
V=		${PV}.20
@


1.30
log
@Correct the php.ini file name used for PHP 5.6 to look for php-5.6.ini instead
of php-5.5.ini as it looks like the patch was simply copied over from 5.5 when
creating the new port. Also use the ${PV} variable with the 5.5 / 5.6 ports as
well so as to do things in the same manner as done with the 5.3 / 5.4 ports.

Issue noticed by otto@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/11/15 10:17:44 robert Exp $
d10 1
a10 3
V=		${PV}.19

REVISION=	1
@


1.29
log
@fix lib-depends and prepare for php-5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/11/13 19:57:16 robert Exp $
d12 1
a12 1
REVISION=	0
@


1.28
log
@security update to 5.5.19; includes fix for CVE-2014-3710
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/11/06 20:22:12 sthen Exp $
d12 2
a16 2

WANTLIB-main+=		stdc++ ncurses readline
@


1.27
log
@As reported by Mike <gmail/lesniewskister>, php 5.5 opcache isn't included
in the packages - it was already built, we just didn't install it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/11/06 17:34:34 sthen Exp $
d10 1
a10 3
V=		${PV}.18
REVISION-main=	0
REVISION-pcntl=	0
@


1.26
log
@Since we got rid of 5.2, all versions of php in tree now support fpm and
pcntl, so move the Makefile parts up to Makefile.inc. Looks ok to robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/10/18 20:31:11 sthen Exp $
d11 1
@


1.25
log
@update to php 5.4.34, 5.5.18
ok robert@@ who also had a diff for this but forgot to commit it :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/09/13 18:09:21 brad Exp $
d11 1
a17 20

# fpm
PKGNAME-fpm?=		php-fpm-${V}
MULTI_PACKAGES+=	-fpm
COMMENT-fpm=		stand-alone FPM version of PHP
CONFIGURE_ARGS+=	--enable-fpm \
			--with-fpm-user=www \
			--with-fpm-group=www
LIB_DEPENDS-fpm=	${LIB_DEPENDS-main}
WANTLIB-fpm=		${WANTLIB-main}
RUN_DEPENDS-fpm=	${RUN_DEPENDS-main} \
			php-${V}:lang/php/${PV}

# pcntl
PKGNAME-pcntl?=		php-pcntl-${V}
MULTI_PACKAGES+=	-pcntl
COMMENT-pcntl=		PCNTL extensions for php5
CONFIGURE_ARGS+=	--enable-pcntl=shared
LIB_DEPENDS-pcntl=
WANTLIB-pcntl=		pthread
@


1.24
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/08/23 10:45:51 sthen Exp $
d10 1
a10 4
V=		${PV}.16
REVISION-mysql=	0
REVISION-mysqli= 0
REVISION-pdo_mysql= 0
@


1.23
log
@update to php 5.5.16, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/07/14 08:02:07 ajacoutot Exp $
d11 3
@


1.22
log
@Properly register sampled directories with @@sample instead of running
mkdir manually... bug found by sysmerge(8) WIP support for packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/06/27 16:10:59 robert Exp $
d10 1
a10 2
V=		${PV}.14
REVISION-main=	0
@


1.22.2.1
log
@security update to 5.5.16; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/07/14 08:02:07 ajacoutot Exp $
d10 2
a11 1
V=		${PV}.16
@


1.22.2.2
log
@security update to 5.5.18; fixes 4 CVEs in different components

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22.2.1 2014/09/15 15:55:22 robert Exp $
d10 1
a10 1
V=		${PV}.18
@


1.22.2.3
log
@security update to 5.5.19; includes fix for CVE-2014-3710
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22.2.2 2014/10/22 12:22:32 robert Exp $
d10 1
a10 1
V=		${PV}.19
@


1.22.2.4
log
@update to 5.5.20; fixes CVE-2014-8142
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22.2.3 2014/11/13 19:59:32 robert Exp $
d10 1
a10 1
V=		${PV}.20
@


1.22.2.5
log
@update to 5.5.21;
fixes CVE-2015-0231, CVE-2014-9427 and CVE-2015-0232

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22.2.4 2014/12/29 11:08:52 robert Exp $
d10 1
a10 1
V=		${PV}.21
@


1.22.2.6
log
@security update to 5.5.22; fixes several security issues:
CVE-2015-0235, CVE-2015-0273

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22.2.5 2015/01/24 17:20:01 robert Exp $
d10 1
a10 1
V=		${PV}.22
@


1.21
log
@update to 5.5.14:
This release fixes several bugs in addition to 8 CVEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/06/03 21:52:46 sthen Exp $
d11 1
@


1.20
log
@update to php-5.4.28 / 5.5.13, bug/crash/DOS fixes.  ok robert@@
http://www.php.net/ChangeLog-5.php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/05/30 13:14:08 sthen Exp $
d10 1
a10 1
V=		${PV}.13
@


1.19
log
@/var/www/conf/modules.sample is no longer provided by base; noticed by florian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/05/12 22:12:03 sthen Exp $
d10 1
a10 2
V=		${PV}.12
REVISION-main=	0
@


1.18
log
@update to php 5.4.28/5.5.12, various fixes including some security-ish/leaks/
memory corruption.  ok robert@@

http://www.php.net/ChangeLog-5.php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/04/28 22:02:39 sthen Exp $
d11 1
@


1.17
log
@remove unguarded "#define AI_ADDRCONFIG 0"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/04/23 08:39:58 edd Exp $
d10 1
a10 2
V=		${PV}.11
REVISION=	3
@


1.16
log
@Enable readline support in PHP-5.4 and PHP-5.5.

(But not in PHP-5.3, since readline support is broken and EOL).

OK sthen@@, with input from ajacoutot@@, thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/04/21 15:35:34 sthen Exp $
d11 1
a11 1
REVISION=	2
@


1.15
log
@also zap gssapi, spotted by aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/04/21 14:19:52 sthen Exp $
d11 1
a11 1
REVISION=	1
d17 1
a17 1
WANTLIB-main+=		stdc++
@


1.14
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/04/06 12:53:41 sthen Exp $
d11 1
a11 1
REVISION=	0
@


1.13
log
@update to PHP 5.5.11, ok robert@@ - various bug fixes including
fileinfo CVE-2013-7345
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/03/27 14:05:02 sthen Exp $
d11 1
@


1.12
log
@fix WANTLIB and add a patch I forgot to 'cvs add'; didn't build without the
patch, so no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/03/27 11:34:05 sthen Exp $
a8 2
AUTOCONF_VERSION=	2.65

d10 1
a10 1
V=		${PV}.10
@


1.11
log
@update php/5.5 to 5.5.10 and adjust php-fpm.conf to use unix sockets
(5.5 is still unlinked to the build)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/03/20 13:02:19 ajacoutot Exp $
d18 2
d22 1
a22 1
MULTI_PACKAGES+=        -fpm
@


1.10
log
@Default to UTC instead of having an undefined timezone.
This can be easily changed per application or system-wide and will allow
some PHP apps to behave right out-of-the-box without the following vomit:

PHP message: PHP Warning:  date(): It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set().....

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/03/13 17:33:27 sthen Exp $
a10 1

d12 1
a12 3
V=		${PV}.5
REVISION=	1
REVISION-main=	2
@


1.9
log
@handle httpd move, originally from florian@@, tweaks by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/11/03 16:20:39 robert Exp $
d15 1
@


1.8
log
@update to 5.5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/10/12 10:44:23 espie Exp $
d14 1
a30 1
REVISION-fpm=		0
@


1.7
log
@no-conflict is a lie, the rcscripts conflict.
I'll let robert@@ figure out whether he wants to version the scripts
or what...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/09/20 20:20:28 sthen Exp $
d13 1
a13 1
V=		${PV}.4
@


1.6
log
@update to php 5.5.4, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/08/24 09:23:28 sthen Exp $
d30 1
@


1.5
log
@suhosin hasn't been ported to php 5.4 or 5.5 yet, so remove the
suhosin-related lines that we were patching into the config files
to avoid confusion.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/08/23 10:06:46 sthen Exp $
d9 1
a9 1
AUTOCONF_VERSION=	2.59
d13 1
a13 2
V=		${PV}.3
REVISION-main=	0
@


1.4
log
@Update to new PHP releases (and backported patch for 5.3), fixing the
recent security fix which was buggy.  ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/08/23 06:31:43 robert Exp $
d14 1
@


1.3
log
@update to 5.5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/08/08 19:11:43 robert Exp $
d13 1
a13 1
V=		${PV}.2
@


1.2
log
@don't pick libpam up in the imap module and fix PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/08/08 18:50:37 robert Exp $
d13 1
a13 1
V=		${PV}.1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/07/16 08:49:09 jasper Exp $
d37 8
a44 1
WANTLIB-pcntl=		c pthread
@


1.1.1.1
log
@initial import of php 5.5.1
@
text
@@
