head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.10
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.8
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.6
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2015.04.03.17.53.44;	author sthen;	state Exp;
branches;
next	1.2;
commitid	gBqrJ9sK3QsZqoHd;

1.2
date	2015.01.23.16.10.28;	author robert;	state Exp;
branches
	1.2.2.1;
next	1.1;
commitid	KwlA9EyazwEJrcNM;

1.1
date	2014.11.15.13.43.01;	author robert;	state Exp;
branches;
next	;
commitid	qky5fmLhNW6GE6fd;

1.2.2.1
date	2015.05.18.07.07.52;	author kili;	state Exp;
branches;
next	;
commitid	7cqHwateyPT4K485;


desc
@@


1.3
log
@repair a mismerge in the sample php-fpm.conf file, problem pointed
out by Jason Tubnor
@
text
@$OpenBSD: patch-sapi_fpm_php-fpm_conf_in,v 1.2 2015/01/23 16:10:28 robert Exp $
--- sapi/fpm/php-fpm.conf.in.orig.port	Wed Jan 21 00:40:37 2015
+++ sapi/fpm/php-fpm.conf.in	Fri Apr  3 18:51:43 2015
@@@@ -161,7 +161,7 @@@@ group = @@php_fpm_group@@
 ;                            (IPv6 and IPv4-mapped) on a specific port;
 ;   '/path/to/unix/socket' - to listen on a unix socket.
 ; Note: This value is mandatory.
-listen = 127.0.0.1:9000
+listen = /var/www/run/php-fpm.sock
 
 ; Set listen(2) backlog.
 ; Default Value: 65535 (-1 on FreeBSD and OpenBSD)
@@@@ -172,9 +172,9 @@@@ listen = 127.0.0.1:9000
 ; BSD-derived systems allow connections regardless of permissions. 
 ; Default Values: user and group are set as the running user
 ;                 mode is set to 0660
-;listen.owner = @@php_fpm_user@@
-;listen.group = @@php_fpm_group@@
-;listen.mode = 0660
+listen.owner = www
+listen.group = www
+listen.mode = 0660
 ; When POSIX Access Control Lists are supported you can set them using
 ; these options, value is a comma separated list of user/group names.
 ; When set, listen.owner and listen.group are ignored
@@@@ -471,7 +471,7 @@@@ pm.max_spare_servers = 3
 ;       possible. However, all PHP paths will be relative to the chroot
 ;       (error_log, sessions.save_path, ...).
 ; Default Value: not set
-;chroot = 
+chroot = /var/www
  
 ; Chdir to this directory at the start.
 ; Note: relative path can be used.
@


1.2
log
@update to 5.6.5;
fixes CVE-2015-0231, CVE-2014-9427 and CVE-2015-0232
@
text
@d1 4
a4 16
$OpenBSD$
--- sapi/fpm/php-fpm.conf.in.orig.port	Fri Jan 23 17:05:28 2015
+++ sapi/fpm/php-fpm.conf.in	Fri Jan 23 17:06:21 2015
@@@@ -146,8 +146,9 @@@@
 ; Unix user/group of processes
 ; Note: The user is mandatory. If the group is not set, the default user's group
 ;       will be used.
-user = @@php_fpm_user@@
-group = @@php_fpm_group@@
+listen.owner = www
+listen.group = www
+listen.mode = 0660
 
 ; The address on which to accept FastCGI requests.
 ; Valid syntaxes are:
@@@@ -161,7 +162,7 @@@@ group = @@php_fpm_group@@
d13 14
a26 1
@@@@ -471,7 +472,7 @@@@ pm.max_spare_servers = 3
@


1.2.2.1
log
@MFC: security update to 5.6.9
(also contains necessary changes from previous updates)

ok robert@@, sthen@@
@
text
@d1 16
a16 4
$OpenBSD: patch-sapi_fpm_php-fpm_conf_in,v 1.3 2015/04/03 17:53:44 sthen Exp $
--- sapi/fpm/php-fpm.conf.in.orig.port	Wed Jan 21 00:40:37 2015
+++ sapi/fpm/php-fpm.conf.in	Fri Apr  3 18:51:43 2015
@@@@ -161,7 +161,7 @@@@ group = @@php_fpm_group@@
d25 1
a25 14
@@@@ -172,9 +172,9 @@@@ listen = 127.0.0.1:9000
 ; BSD-derived systems allow connections regardless of permissions. 
 ; Default Values: user and group are set as the running user
 ;                 mode is set to 0660
-;listen.owner = @@php_fpm_user@@
-;listen.group = @@php_fpm_group@@
-;listen.mode = 0660
+listen.owner = www
+listen.group = www
+listen.mode = 0660
 ; When POSIX Access Control Lists are supported you can set them using
 ; these options, value is a comma separated list of user/group names.
 ; When set, listen.owner and listen.group are ignored
@@@@ -471,7 +471,7 @@@@ pm.max_spare_servers = 3
@


1.1
log
@add php-5.6; ok sthen@@
@
text
@d1 17
a17 5
$OpenBSD: patch-sapi_fpm_php-fpm_conf_in,v 1.3 2014/05/12 22:12:03 sthen Exp $
--- sapi/fpm/php-fpm.conf.in.orig.port	Wed Nov 12 14:52:21 2014
+++ sapi/fpm/php-fpm.conf.in	Sat Nov 15 10:45:12 2014
@@@@ -158,7 +158,7 @@@@ group = @@php_fpm_group@@
 ;                            specific port;
d25 1
a25 14
@@@@ -169,9 +169,9 @@@@ listen = 127.0.0.1:9000
 ; BSD-derived systems allow connections regardless of permissions. 
 ; Default Values: user and group are set as the running user
 ;                 mode is set to 0660
-;listen.owner = @@php_fpm_user@@
-;listen.group = @@php_fpm_group@@
-;listen.mode = 0660
+listen.owner = www
+listen.group = www
+listen.mode = 0660
  
 ; List of ipv4 addresses of FastCGI clients which are allowed to connect.
 ; Equivalent to the FCGI_WEB_SERVER_ADDRS environment variable in the original
@@@@ -463,7 +463,7 @@@@ pm.max_spare_servers = 3
@

