head	1.6;
access;
symbols
	OPENBSD_6_2:1.6.0.4
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2016.12.19.20.35.09;	author martijn;	state Exp;
branches;
next	1.5;
commitid	9FlIvp5U76UztEIb;

1.5
date	2016.05.06.19.59.32;	author sthen;	state Exp;
branches;
next	1.4;
commitid	UzpLZYzVr4LUZMqT;

1.4
date	2016.02.01.23.37.23;	author sthen;	state Exp;
branches
	1.4.2.1;
next	1.3;
commitid	ZzrsijJJ78jHvaa8;

1.3
date	2015.03.21.22.33.01;	author sthen;	state Exp;
branches;
next	1.2;
commitid	ETgKAWqcno4xV07i;

1.2
date	2015.01.23.16.10.28;	author robert;	state Exp;
branches
	1.2.2.1;
next	1.1;
commitid	KwlA9EyazwEJrcNM;

1.1
date	2014.11.15.13.43.01;	author robert;	state Exp;
branches;
next	;
commitid	qky5fmLhNW6GE6fd;

1.2.2.1
date	2015.05.18.07.07.52;	author kili;	state Exp;
branches;
next	;
commitid	7cqHwateyPT4K485;

1.4.2.1
date	2016.05.18.07.31.03;	author jasper;	state Exp;
branches;
next	;
commitid	heX4EVSUSe92YffZ;


desc
@@


1.6
log
@update to php-5.6.29, ok robert@@
@
text
@$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.5 2016/05/06 19:59:32 sthen Exp $
--- sapi/cgi/cgi_main.c.orig.port	Wed Nov  9 02:22:57 2016
+++ sapi/cgi/cgi_main.c	Thu Dec  8 10:55:27 2016
@@@@ -1749,6 +1749,7 @@@@ int main(int argc, char *argv[])
 	char *orig_optarg = php_optarg;
 	char *script_file = NULL;
 	int ini_entries_len = 0;
+	char *ini;
 	/* end of temporary locals */
 
 #ifdef ZTS
@@@@ -1809,7 +1810,12 @@@@ int main(int argc, char *argv[])
 
 	sapi_startup(&cgi_sapi_module);
 	fastcgi = fcgi_is_fastcgi();
-	cgi_sapi_module.php_ini_path_override = NULL;
+
+	if ((ini = getenv("PHP_INI_PATH"))) {
+		cgi_sapi_module.php_ini_path_override = ini;
+	} else {
+		cgi_sapi_module.php_ini_path_override = NULL;
+	}
 
 #ifdef PHP_WIN32
 	_fmode = _O_BINARY; /* sets default for file streams to binary */
@


1.5
log
@update to php-5.6.21
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.4 2016/02/01 23:37:23 sthen Exp $
--- sapi/cgi/cgi_main.c.orig.port	Thu Apr 28 01:33:49 2016
+++ sapi/cgi/cgi_main.c	Fri Apr 29 14:02:27 2016
@@@@ -1745,6 +1745,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1805,7 +1806,12 @@@@ int main(int argc, char *argv[])
@


1.4
log
@sync patches, no pkg change
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.3 2015/03/21 22:33:01 sthen Exp $
--- sapi/cgi/cgi_main.c.orig.port	Wed Jan  6 15:14:47 2016
+++ sapi/cgi/cgi_main.c	Mon Jan 25 20:18:17 2016
@@@@ -1744,6 +1744,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1804,7 +1805,12 @@@@ int main(int argc, char *argv[])
@


1.4.2.1
log
@- update to php-5.6.21

ok robert@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.4 2016/02/01 23:37:23 sthen Exp $
--- sapi/cgi/cgi_main.c.orig.port	Thu Apr 28 02:33:49 2016
+++ sapi/cgi/cgi_main.c	Wed May 18 09:07:24 2016
@@@@ -1745,6 +1745,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1805,7 +1806,12 @@@@ int main(int argc, char *argv[])
@


1.3
log
@update to PHP-5.6.7, ok robert@@
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.2 2015/01/23 16:10:28 robert Exp $
--- sapi/cgi/cgi_main.c.orig.port	Thu Mar 19 00:19:30 2015
+++ sapi/cgi/cgi_main.c	Fri Mar 20 14:18:19 2015
@@@@ -1749,6 +1749,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1803,7 +1804,12 @@@@ int main(int argc, char *argv[])
@


1.2
log
@update to 5.6.5;
fixes CVE-2015-0231, CVE-2014-9427 and CVE-2015-0232
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.1 2014/11/15 13:43:01 robert Exp $
--- sapi/cgi/cgi_main.c.orig.port	Wed Jan 21 01:40:37 2015
+++ sapi/cgi/cgi_main.c	Fri Jan 23 16:57:07 2015
@@@@ -1746,6 +1746,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1800,7 +1801,12 @@@@ int main(int argc, char *argv[])
@


1.2.2.1
log
@MFC: security update to 5.6.9
(also contains necessary changes from previous updates)

ok robert@@, sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.2 2015/01/23 16:10:28 robert Exp $
--- sapi/cgi/cgi_main.c.orig.port	Thu May 14 01:13:33 2015
+++ sapi/cgi/cgi_main.c	Sun May 17 21:13:12 2015
@@@@ -1749,6 +1749,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1803,7 +1804,12 @@@@ int main(int argc, char *argv[])
@


1.1
log
@add php-5.6; ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-sapi_cgi_cgi_main_c,v 1.1.1.1 2013/08/07 16:46:56 robert Exp $
--- sapi/cgi/cgi_main.c.orig.port	Wed Nov 12 14:52:21 2014
+++ sapi/cgi/cgi_main.c	Sat Nov 15 10:45:12 2014
@@@@ -1744,6 +1744,7 @@@@ int main(int argc, char *argv[])
d12 1
a12 1
@@@@ -1798,7 +1799,12 @@@@ int main(int argc, char *argv[])
@

