head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.4
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.12
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.8
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.6
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.03.19.21.18.38;	author naddy;	state Exp;
branches;
next	1.5;
commitid	kfhmX9DZFoKOU0Kt;

1.5
date	2015.11.14.14.55.47;	author sthen;	state Exp;
branches;
next	1.4;
commitid	KXFKdKmM5By044KX;

1.4
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.11.11.20.28;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.23.19.35.31;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.19.21.29.33;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.6
log
@For all our ports that use the pecl module, SHARED_ONLY is always
defined and "c" is always added to WANTLIB.  Remove the check from
the module and add WANTLIB += c to the individual port Makefiles.
No changes in package signature, no other modules affected.
@
text
@# $OpenBSD: pecl.port.mk,v 1.5 2015/11/14 14:55:47 sthen Exp $
# PHP PECL module

MODULES +=	lang/php

CATEGORIES +=	www

PKGNAME ?=	pecl-${DISTNAME:S/pecl-//:S/_/-/:L}
_PECLMOD ?=	${DISTNAME:S/pecl-//:C/-[0-9].*//:L}

.if !defined(MASTER_SITES)
MASTER_SITES ?=	http://pecl.php.net/get/
HOMEPAGE ?=	http://pecl.php.net/package/${_PECLMOD}
EXTRACT_SUFX ?=	.tgz
.endif

# XXX CONFIGURE_STYLE would be nice but it can't be set here
AUTOCONF_VERSION ?= 2.62
AUTOMAKE_VERSION ?= 1.9

LIBTOOL_FLAGS += --tag=disable-static

DESTDIRNAME ?=	INSTALL_ROOT

BUILD_DEPENDS += www/pear \
	${MODGNU_AUTOCONF_DEPENDS} \
	${MODGNU_AUTOMAKE_DEPENDS}

MODPHP_DO_SAMPLE ?= ${_PECLMOD}
MODPHP_DO_PHPIZE ?= Yes

.if !target(do-test) && ${NO_TEST:L:Mno}
TEST_TARGET = test
TEST_FLAGS =  NO_INTERACTION=1
USE_GMAKE ?=  Yes
.endif
@


1.5
log
@set USE_GMAKE for ports using the default pecl target.
fixes running tests on 12/15 pecl ports.
@
text
@d1 1
a1 1
# $OpenBSD: pecl.port.mk,v 1.4 2013/03/21 08:46:32 ajacoutot Exp $
a5 1
SHARED_ONLY ?=	Yes
a35 4
.endif

.if ${SHARED_ONLY:L} == "yes"
WANTLIB += c
@


1.4
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: pecl.port.mk,v 1.3 2013/03/11 11:20:28 espie Exp $
d36 1
@


1.3
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: pecl.port.mk,v 1.2 2012/08/23 19:35:31 sthen Exp $
a21 1
USE_LIBTOOL ?=	Yes
@


1.2
log
@sync wantlib for pecl-*
@
text
@d1 1
a1 1
# $OpenBSD: pecl.port.mk,v 1.1 2012/04/19 21:29:33 sthen Exp $
d34 3
a36 3
.if !target(do-regress) && ${NO_REGRESS:L:Mno}
REGRESS_TARGET = test
REGRESS_FLAGS =  NO_INTERACTION=1
@


1.1
log
@add a MODULE for pecl ports. ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: pear.port.mk,v 1.5 2011/06/04 11:40:00 sthen Exp $
d37 4
@

