head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.03.30.18.46.20;	author naddy;	state Exp;
branches;
next	;
commitid	jEj5nM27ra16jq7E;


desc
@@


1.1
log
@fix a build race: patch rustbuild to ensure that the documentation
requires rustdoc as dependency; from Sebastien Marie
@
text
@$OpenBSD$
Require having building rustdoc before trying to build docs.
--- src/bootstrap/step.rs.orig	Wed Mar 29 18:57:20 2017
+++ src/bootstrap/step.rs	Wed Mar 29 18:57:35 2017
@@@@ -542,7 +542,7 @@@@ pub fn build_rules<'a>(build: &'a Build) -> Rules {
              s.name("rustc")
               .host(&build.config.build)
               .target(&build.config.build)
-              .stage(0)
+              .stage(2)
          })
          .default(build.config.docs)
          .run(move |s| doc::standalone(build, s.target));
@
