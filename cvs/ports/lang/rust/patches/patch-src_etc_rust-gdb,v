head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.2
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2017.02.15.12.52.35;	author landry;	state Exp;
branches;
next	1.1;
commitid	NM74A8PX4zxQ5FFL;

1.1
date	2016.01.13.07.39.08;	author semarie;	state Exp;
branches;
next	;
commitid	byiYh0dzYB8WFAob;


desc
@@


1.2
log
@Update to rust 1.15.1.

- switch to rustbuild build system instead of configure (the world
  definitely needed one more build system!)
- the build still takes +INF hours, this is being investigated

Note that rust will be a hard-requirement for gecko 54... sigh.

Tested by semarie@@ and myself on i386 & amd64.

All the hard work and countless build hours by semarie@@, thanks!
@
text
@$OpenBSD: patch-src_etc_rust-gdb,v 1.1 2016/01/13 07:39:08 semarie Exp $
only compatible with egdb (gdb from ports)
--- src/etc/rust-gdb.orig	Tue Jan 31 01:29:51 2017
+++ src/etc/rust-gdb	Sun Feb  5 15:40:37 2017
@@@@ -12,12 +12,17 @@@@
 # Exit if anything fails
 set -e
 
+if ! command -v egdb; then
+	echo "error: rust-gdb requires devel/gdb to be installed" >&2
+	exit 1
+fi
+
 # Find out where the pretty printer Python module is
 RUSTC_SYSROOT=`rustc --print=sysroot`
 GDB_PYTHON_MODULE_DIRECTORY="$RUSTC_SYSROOT/lib/rustlib/etc"
 
 # Run GDB with the additional arguments that load the pretty printers
-PYTHONPATH="$PYTHONPATH:$GDB_PYTHON_MODULE_DIRECTORY" gdb \
+PYTHONPATH="$PYTHONPATH:$GDB_PYTHON_MODULE_DIRECTORY" egdb \
   -d "$GDB_PYTHON_MODULE_DIRECTORY" \
   -iex "add-auto-load-safe-path $GDB_PYTHON_MODULE_DIRECTORY" \
   "$@@"
@


1.1
log
@install libraries with rustc

- remove now unneeded MAKE_ENV option to pass --sysroot argument to bootstrapper
- backport the latest changes for building rustc under openbsd
- switch the install from installing a stage3 rustc binary to installing a stage2 rustc binary (and all required libraries)

ok juanfra@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 13
a15 3
--- src/etc/rust-gdb.orig	Sat Dec 12 07:12:56 2015
+++ src/etc/rust-gdb	Sat Dec 12 07:13:44 2015
@@@@ -17,7 +17,7 @@@@ RUSTC_SYSROOT=`rustc --print=sysroot`
@

