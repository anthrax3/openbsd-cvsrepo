head	1.6;
access;
symbols
	OPENBSD_4_9:1.5.0.10
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.8
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.6
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.12
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.10
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.8
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.6
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.8
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.6
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.0.6
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.4
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.2
	OPENBSD_3_1_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2011.03.21.15.31.38;	author shadchin;	state dead;
branches;
next	1.5;

1.5
date	2009.01.31.21.48.31;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2006.02.05.15.08.43;	author david;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.04.23.37.27;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2003.04.26.14.55.32;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2001.11.27.10.06.50;	author form;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Remove cyrproxy (old, unmaintained)

ok jasper@@, mikeb@@
@
text
@$OpenBSD: patch-Makefile,v 1.5 2009/01/31 21:48:31 ajacoutot Exp $
--- Makefile.orig	Thu Feb  8 23:33:53 2001
+++ Makefile	Sat Jan 31 22:32:17 2009
@@@@ -6,9 +6,9 @@@@
 
 CHMOD=/bin/chmod
 CHOWN=/usr/sbin/chown
-GCC=gcc -O
-CFLAGS=-funsigned-char -Wall
-CC=${GCC} ${CFLAGS}
+#GCC=gcc -O
+CFLAGS+=-funsigned-char -Wall
+#CC=${GCC} ${CFLAGS}
 # Some systems contains resolver routines in libresolv
 # EXTRALIBS=lresolv
 EXTRALIBS=
@@@@ -34,7 +34,7 @@@@ SPY=tcpspy
 TBLDIR=/usr/local/share/proxy
 
 # config file location
-CONF_FILE=/etc/cyrproxy.conf
+CONF_FILE=%%SYSCONFDIR%%/cyrproxy.conf
 
 # Subdirs for make
 # cyrcoder - filter-like cyrillic recoder
@@@@ -65,7 +65,7 @@@@ all: ${CYRPROXY} ${SPY} subdirmake config.gen
 
 
 subdirmake:
-	@@for i in ${SUBDIRS}; do echo "Making all in $$i" ;cd $$i; pmake all; cd ..; done
+	@@for i in ${SUBDIRS}; do echo "Making all in $$i" ;cd $$i; ${MAKE} all; cd ..; done
 
 .SUFFIXES: .a .o .c
 
@@@@ -78,12 +78,12 @@@@ clean: clean-sub
 	rm -f config.gen cyrproxy.config.sample alldefs.h
 
 clean-sub:
-	@@for i in ${SUBDIRS}; do echo "Make clean in $$i" ; cd $$i; pmake clean; cd .. ; done
+	@@for i in ${SUBDIRS}; do echo "Make clean in $$i" ; cd $$i; ${MAKE} clean; cd .. ; done
 
 install: install-bin install-config install-tables install-sub
 
 install-sub:
-	@@for i in ${SUBDIRS} ; do cd $$i ; pmake install; cd ..; done
+	@@for i in ${SUBDIRS} ; do cd $$i ; ${MAKE} install; cd ..; done
 
 install-bin: ${CYRPROXY} ${SPY}
 	cp ${CYRPROXY} ${BINDIR}
@@@@ -128,7 +128,7 @@@@ alldefs.h: policy.h
 	awk '/^\#/{print $0}' <policy.h >alldefs.h
 
 config.gen: cyrproxy.conf.tmpl Makefile alldefs.h
-	${CC}  ${CFLAGS} -P -E - < cyrproxy.conf.tmpl | awk -f extranl.awk >config.gen
+	${CC}  ${CFLAGS} -P -E - < cyrproxy.conf.tmpl | sed -e '/^XCOMM /s//#/' -e '/^XCOMM$$/s//#/' |awk -f extranl.awk >config.gen
 
 ${CYRPROXY}: ${OBJS}
 	${CC} ${CFLAGS} ${LDFLAGS} -o ${CYRPROXY} ${OBJS} ${EXTRALIBS}
@


1.5
log
@- Russia invasion:
* fix license marker
* regen PLIST
* regen patches
* bump
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.4 2006/02/05 15:08:43 david Exp $
@


1.4
log
@move post-patch to pre-configure (fixes make update-patches); ok sturm@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile,v 1.3 2004/01/04 23:37:27 espie Exp $
--- Makefile.orig	2001-02-08 23:33:53.000000000 +0100
+++ Makefile	2004-01-05 00:34:41.000000000 +0100
d26 1
a26 1
@@@@ -65,7 +65,7 @@@@ all: ${CYRPROXY} ${SPY} subdirmake confi
@


1.3
log
@preprocessor fixes
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.2 2003/04/26 14:55:32 sturm Exp $
d17 9
@


1.2
log
@don't hardcode /etc but use SYSCONFDIR
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile,v 1.1 2001/11/27 10:06:50 form Exp $
--- Makefile.orig	Thu Feb  8 23:33:53 2001
+++ Makefile	Sat Apr 26 14:10:35 2003
a16 9
@@@@ -34,7 +34,7 @@@@ SPY=tcpspy
 TBLDIR=/usr/local/share/proxy
 
 # config file location
-CONF_FILE=/etc/cyrproxy.conf
+CONF_FILE=%%SYSCONFDIR%%/cyrproxy.conf
 
 # Subdirs for make
 # cyrcoder - filter-like cyrillic recoder
d41 9
@


1.1
log
@Master site is alive.
New distfile.
md5 -> distinfo.
rename patches.
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.orig	Fri Feb  9 04:33:53 2001
+++ Makefile	Tue Nov 27 15:53:47 2001
d17 9
@

