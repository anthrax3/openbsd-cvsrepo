head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4;
locks; strict;
comment	@# @;


1.4
date	2016.12.18.18.38.59;	author jca;	state Exp;
branches;
next	1.3;
commitid	iWlZlPQrgS84z40F;

1.3
date	2016.11.02.07.42.55;	author jca;	state Exp;
branches;
next	1.2;
commitid	bTkEJwv9bKneCxNh;

1.2
date	2016.10.28.04.03.36;	author jca;	state Exp;
branches;
next	1.1;
commitid	Xowb9kzPd18Rcucg;

1.1
date	2016.10.28.04.01.33;	author jca;	state Exp;
branches;
next	;
commitid	n3Ql9WOapnO9ce9A;


desc
@@


1.4
log
@Add arm to ONLY_FOR_ARCHS, give a chance to mips64* while here.
@
text
@$OpenBSD: patch-Make_openbsd,v 1.3 2016/11/02 07:42:55 jca Exp $
--- Make.openbsd.orig	Tue Nov  1 23:05:17 2016
+++ Make.openbsd	Mon Nov 14 04:00:14 2016
@@@@ -5,17 +5,17 @@@@ AS=as
 RANLIB=ranlib
 X11=/usr/X11R6
 CC=gcc
-CFLAGS=-Wall -Wno-missing-braces -ggdb -I$(ROOT) -I$(ROOT)/include -I$(ROOT)/kern -c -I$(X11)/include -D_THREAD_SAFE $(PTHREAD) -O2
+CFLAGS=-Wall -Wno-missing-braces -I$(ROOT) -I$(ROOT)/include -I$(ROOT)/kern -c -I$(X11)/include -D_THREAD_SAFE $(PTHREAD) $(PORTS_CFLAGS)
 O=o
 OS=posix
 GUI=x11
-LDADD=-L$(X11)/lib64 -L$(X11)/lib -lX11 -lsndio -ggdb
-LDFLAGS=$(PTHREAD)
+LDADD=-L$(X11)/lib64 -L$(X11)/lib -lX11 -lsndio
+LDFLAGS+=$(PTHREAD) $(PORTS_LDFLAGS)
 TARG=drawterm
 AUDIO=sndio
 
 all: default
 
 libmachdep.a:
-	arch=`uname -m|sed 's/i.86/386/; s/macppc/power/; s/socppc/power/; s/x86_64/amd64/; s/sparc64/sun4u/'`; \
+	arch=`uname -m|sed 's/i.86/386/; s/macppc/power/; s/socppc/power/; s/x86_64/amd64/; s/sparc64/sun4u/; s/arm.*/arm/; s/mips64.*/mips/'`; \
 	(cd posix-$$arch &&  make)
@


1.3
log
@Update to drawterm-20161101

Switch from hg tarballs to proper releases, and remove a few patches
merged upstream.

From Stanley Lieber (maintainer)
@
text
@d1 4
a4 4
$OpenBSD$
--- Make.openbsd.orig	Tue Nov  1 20:07:39 2016
+++ Make.openbsd	Tue Nov  1 20:04:52 2016
@@@@ -5,12 +5,12 @@@@ AS=as
d20 6
@


1.2
log
@Respect CFLAGS/LDFLAGS

ok Stanley Lieber (maintainer)
@
text
@d2 3
a4 7

- respect CFLAGS/LDFLAGS
- fix build on powerpc and sparc64

--- Make.openbsd.orig	Sun Sep 11 23:44:20 2016
+++ Make.openbsd	Fri Oct 28 05:03:18 2016
@@@@ -5,17 +5,17 @@@@ AS=as
a19 6
 all: default
 
 libmachdep.a:
-	arch=`uname -m|sed 's/i.86/386/;s/Power Macintosh/power/; s/x86_64/amd64/'`; \
+	arch=`uname -m|sed 's/i.86/386/; s/macppc/power/; s/socppc/power/; s/x86_64/amd64/; s/sparc64/sun4u/'`; \
 	(cd posix-$$arch &&  make)
@


1.1
log
@fix build on powerpc and sparc64

ok Stanley Lieber (maintainer)
@
text
@d3 1
d7 17
a23 2
+++ Make.openbsd	Fri Oct 28 06:00:43 2016
@@@@ -17,5 +17,5 @@@@ AUDIO=sndio
@

