head	1.3;
access;
symbols
	OPENBSD_3_2:1.2.0.10
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.8
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.6
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.4
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.2
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.1.1.1.0.8
	OPENBSD_2_7_BASE:1.1.1.1
	OPENBSD_2_6:1.1.1.1.0.6
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.4
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-Sep-28:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2002.11.04.10.28.56;	author markus;	state dead;
branches;
next	1.2;

1.2
date	2000.06.07.00.52.09;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	98.09.28.21.01.57;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.09.28.21.01.57;	author marc;	state Exp;
branches
	1.1.1.1.8.1;
next	;

1.1.1.1.8.1
date	2000.09.15.05.12.16;	author marc;	state Exp;
branches;
next	;


desc
@@


1.3
log
@use ${CC}, ${PREFIX}, ${X11BASE}, new patch names, use ssh instead of rsh; with and ok naddy@@
@
text
@$OpenBSD: patch-ae,v 1.2 2000/06/07 00:52:09 espie Exp $
--- sam/unix.c.orig	Wed Jun  7 02:38:23 2000
+++ sam/unix.c	Wed Jun  7 02:38:26 2000
@@@@ -147,18 +147,18 @@@@ notifyf(void *a, char *b)	/* never calle
 int
 newtmp(int i)
 {
-	char *s;
-	FILE *f;
-	extern char *tempnam(const char*, const char*);
+	char file[40];
+	int fd;
+	extern int mkstemp(char *);
 
-	s = tempnam(TMPDIR, "sam.");
-	if (!s)
+	snprintf(file, 40, "%s/sam.XXXXXXXXXX", TMPDIR);
+	fd = mkstemp(file);
+	if(fd < 0){
+		unlink(file);
 		return -1;
-	f = fopen(s, "w+");
-	if (!f)
-		return -1;
-	unlink(s);
-	return fileno(f);
+	}
+	unlink(file);
+	return fd;
 }
 
 void
@


1.2
log
@Fake plan9 subdir.
Add rc flavors.
@
text
@d1 1
a1 1
$OpenBSD: update-patches,v 1.1 2000/04/19 11:16:27 espie Exp $
@


1.1
log
@Initial revision
@
text
@d1 4
a4 3
--- sam/unix.c.dist	Thu Sep  3 19:23:37 1998
+++ sam/unix.c	Thu Sep  3 19:24:32 1998
@@@@ -147,18 +147,18 @@@@
@


1.1.1.1
log
@port added; Markus Friedl <Markus.Friedl@@informatik.uni-erlangen.de>
@
text
@@


1.1.1.1.8.1
log
@bring plan9 as of cut-over date into 2.7 branch
@
text
@d1 3
a3 4
$OpenBSD: patch-ae,v 1.2 2000/06/07 00:52:09 espie Exp $
--- sam/unix.c.orig	Wed Jun  7 02:38:23 2000
+++ sam/unix.c	Wed Jun  7 02:38:26 2000
@@@@ -147,18 +147,18 @@@@ notifyf(void *a, char *b)	/* never calle
@

