head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2013.10.19.16.51.32;	author sebastia;	state dead;
branches;
next	1.1;

1.1
date	2013.09.12.16.30.59;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update qlandkartegt to 1.7.5

OK landry@@
@
text
@$OpenBSD: patch-src_CTrackDB_cpp,v 1.1 2013/09/12 16:30:59 sebastia Exp $

use arc4random

--- src/CTrackDB.cpp.orig	Wed Aug 14 19:56:40 2013
+++ src/CTrackDB.cpp	Thu Sep 12 09:08:18 2013
@@@@ -16,6 +16,8 @@@@
     along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 **********************************************************************************************/
+#include "config.h"
+
 #include <stdio.h>
 #include <limits>
 
@@@@ -173,7 +175,11 @@@@ void CTrackDB::loadGPX(CGpx& gpx)
         hasItems = true;
         CTrack* track = new CTrack(this);
                                  //preset a random color
+#if defined(HAVE_ARC4RANDOM)
+        track->setColor((arc4random() % 13)+1);
+#else
         track->setColor((rand() % 13)+1);
+#endif
 
         /*
          *  Global track information
@


1.1
log
@Update QLGT to 1.7.3,
use arc4random, License changed to GPLv3

looks good dcoppa@@
@
text
@d1 1
a1 1
$OpenBSD$
@

