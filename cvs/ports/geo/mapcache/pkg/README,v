head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	landry_20140826:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2014.10.06.08.28.35;	author landry;	state Exp;
branches;
next	1.1;
commitid	wAUzre6aNyjAJ9SC;

1.1
date	2014.08.26.18.38.49;	author landry;	state Exp;
branches
	1.1.1.1;
next	;
commitid	er3s5UvUAjYvhqKj;

1.1.1.1
date	2014.08.26.18.38.49;	author landry;	state Exp;
branches;
next	;
commitid	er3s5UvUAjYvhqKj;


desc
@@


1.2
log
@Remove the 'run ldconfig in the chroot' hack from the README now that
cmake has been fixed to not register full paths in libraries, thx to
dcoppa@@.
@
text
@# $OpenBSD: README,v 1.1.1.1 2014/08/26 18:38:49 landry Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

If you plan to use mapcache CGI with a chrooted web server, make sure to
copy the libs needed by mapcache binary from ${LOCALBASE}/lib. If you
copy them keeping the same directory hierarchy (with lib, local/lib and
X11R6/lib, you need to make sure there's a ld.so.hints file inside the
chroot pointing to those dirs. You can do all this with:
# mkdir -p /var/www/usr/{libexec,{,local,X11R6}/lib}
# ldd /var/www/cgi-bin/mapcache  | awk '/lib/ { print $7 }' | while read f ; do cp $f /var/www/$f ; done

You also need to ensure mapcache can write to its cache directory, /tmp
in the chroot by default:

# install -d -o www /var/www/tmp

If you would like to use FastCGI with nginx from base, use the provided rc.d(8)
script and add the following lines to your nginx.conf:

location /cgi-bin/mapcache {
	fastcgi_pass  unix:run/mapcache.sock;
	fastcgi_split_path_info ^(/cgi-bin/mapcache)(.*)$;
	fastcgi_param SCRIPT_NAME $fastcgi_script_name;
	fastcgi_param PATH_INFO $fastcgi_path_info;
	include fastcgi_params;
}

You also need to set the path to the mapcache configuration file via a
login.conf class:

mapcache:\
	:setenv=MAPCACHE_CONFIG_FILE=conf/mapcache.xml:\
	:tc=daemon:

and then visit http://localhost/cgi-bin/mapcache/demo.
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a13 5

# cp /sbin/ldconfig /var/www \
	&& mkdir -p /var/www/var/run \
	&& chroot /var/www ./ldconfig /usr/lib /usr/local/lib /usr/X11R6/lib \
	&& rm /var/www/ldconfig
@


1.1.1.1
log
@Import mapcache 1.2.1.

MapCache is a WMTS/TMS server that implements tile caching to speed up
access to WMS layers. The primary objectives are to be fast and easily
deployable, while offering the essential features (and more!) expected
from a tile caching solution.

ok ajacoutot@@ sthen@@
@
text
@@
