head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2011.07.07.20.34.27;	author landry;	state dead;
branches;
next	1.3;

1.3
date	2011.05.17.08.53.50;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.08.09.07.48;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2010.09.07.10.23.31;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to QuantumGIS 1.7.0, been using it for some weeks without issues.
Add a bunch of patches to install/access the doc in the correct dir.
see release notes for details :
http://www.qgis.org/en/component/content/article/127-qgis-1-7-release.html
With feedback from okan@@, thanks !
@
text
@$OpenBSD: patch-python_core_conversions_sip,v 1.3 2011/05/17 08:53:50 dcoppa Exp $

Fix build with newer PySIP/PyQt

--- python/core/conversions.sip.orig	Sun Oct  3 11:11:28 2010
+++ python/core/conversions.sip	Mon May 16 11:14:35 2011
@@@@ -15,6 +15,7 @@@@ which are not wrapped by PyQt:
 */
 
 %Feature QSETINT_CONVERSION
+%Feature QSETTYPE_CONVERSION
 
 %ModuleHeaderCode
 // From Python 2.5, some functions use Py_ssize_t instead of int
@@@@ -320,7 +321,7 @@@@ template <TYPE>
 };
 %End
 
-
+%If (QSETTYPE_CONVERSION)
 template <TYPE>
 %MappedType QSet<TYPE>
 {
@@@@ -394,8 +395,7 @@@@ template <TYPE>
 %End
 
 };
-
-
+%End
 
 template<TYPE>
 %MappedType QMap<int, QMap<int, TYPE> >
@


1.3
log
@Unbreak build after py-sip/py-qt4 updates
(Upstream changeset 14988).

Tested in a bulk build by landry@@
OK landry@@, sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Update to QuantumGIS 1.6.0.
See http://blog.qgis.org/node/146 for details on this release.
@
text
@d1 1
a1 1
$OpenBSD: patch-python_core_conversions_sip,v 1.1 2010/09/07 10:23:31 sthen Exp $
d3 1
a3 1
workaround build problem with sip >= 4.11
d5 4
a8 3
--- python/core/conversions.sip.orig	Tue Sep  7 00:14:55 2010
+++ python/core/conversions.sip	Tue Sep  7 00:17:23 2010
@@@@ -265,59 +265,6 @@@@ template <TYPE>
d10 2
d13 5
a18 52
-%MappedType QSet<int>
-{
-%TypeHeaderCode
-#include <QSet>
-#if (SIP_VERSION >= 0x040900)
-#define sipClass_QString ((sipWrapperType *) sipTypeAsPyTypeObject (sipType_QString))
-#define sipClass_QVariant ((sipWrapperType *) sipTypeAsPyTypeObject (sipType_QVariant))
-#endif
-%End
-
-%ConvertFromTypeCode
-  // Create the list.
-  PyObject *l;
-
-  if ((l = PyList_New(sipCpp->size())) == NULL)
-    return NULL;
-      
-  // Set the list elements.
-  QSet<int>::iterator it = sipCpp->begin();
-  for (int i = 0; it != sipCpp->end(); ++it, ++i)
-  {
-    PyObject *tobj;
-
-    if ((tobj = PyInt_FromLong(*it)) == NULL)
-    {
-      Py_DECREF(l);
-      return NULL;
-    }
-    PyList_SET_ITEM(l, i, tobj);
-  }
-
-  return l;
-%End
-
-%ConvertToTypeCode
-  // Check the type if that is all that is required.
-  if (sipIsErr == NULL)
-    return PyList_Check(sipPy);
-
-  QSet<int> *qset = new QSet<int>;
-
-  for (int i = 0; i < PyList_GET_SIZE(sipPy); ++i)
-  {
-    qset->insert(PyInt_AsLong(PyList_GET_ITEM(sipPy, i)));
-  }
-
-  *sipCppPtr = qset;
-  return sipGetState(sipTransferObj);
-%End
-
-};
-
d20 1
d24 10
@


1.1
log
@Fix build with sip >= 4.11; discussed with Phil @@ riverbank
@
text
@d1 1
a1 1
$OpenBSD$
@

