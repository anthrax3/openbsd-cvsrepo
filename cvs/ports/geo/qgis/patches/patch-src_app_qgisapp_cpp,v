head	1.18;
access;
symbols
	OPENBSD_6_1:1.16.0.2
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.11.0.2
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.8.0.2
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.7.0.4
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.3.0.8
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.18
date	2017.05.23.09.16.29;	author landry;	state Exp;
branches;
next	1.17;
commitid	cuCr0JSG144FXtFl;

1.17
date	2017.04.18.12.08.59;	author landry;	state Exp;
branches;
next	1.16;
commitid	uzMQfOANNVDYuTnf;

1.16
date	2017.02.07.08.20.51;	author landry;	state Exp;
branches;
next	1.15;
commitid	Qm8MNo1pB68QhptD;

1.15
date	2016.12.22.21.34.06;	author landry;	state Exp;
branches;
next	1.14;
commitid	jwITfOoOKISmCXhd;

1.14
date	2016.11.30.16.53.37;	author landry;	state Exp;
branches;
next	1.13;
commitid	cjmZ7DoNViEt9t4u;

1.13
date	2016.11.01.09.18.13;	author landry;	state Exp;
branches;
next	1.12;
commitid	zhoy0itRDzYZ7eNv;

1.12
date	2016.08.08.17.45.40;	author landry;	state Exp;
branches;
next	1.11;
commitid	kgtur4oqjelyjxc4;

1.11
date	2016.06.01.14.05.22;	author landry;	state Exp;
branches;
next	1.10;
commitid	1V5V3D2korSIqSud;

1.10
date	2016.03.29.15.09.52;	author landry;	state Exp;
branches;
next	1.9;
commitid	0YMHkMI3jkAkiXCn;

1.9
date	2016.03.02.14.39.10;	author landry;	state Exp;
branches;
next	1.8;
commitid	awC2u2jrEcQN8OHM;

1.8
date	2015.10.31.15.29.44;	author landry;	state Exp;
branches;
next	1.7;
commitid	55lUL9SpLjszeDFA;

1.7
date	2015.07.21.10.06.14;	author landry;	state Exp;
branches;
next	1.6;
commitid	a3MaLha3xPZ70OiS;

1.6
date	2015.03.16.20.06.33;	author landry;	state Exp;
branches;
next	1.5;
commitid	SvyS159T3egvlXcm;

1.5
date	2014.11.10.16.05.17;	author landry;	state Exp;
branches;
next	1.4;
commitid	KLYTJIVzgCdqoELJ;

1.4
date	2014.08.20.08.54.45;	author landry;	state Exp;
branches;
next	1.3;
commitid	B1F8DMuRyMhTh3L0;

1.3
date	2012.11.01.07.25.36;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2011.12.29.21.44.06;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.07.20.34.27;	author landry;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Bugfix update to QGIS 2.18.8.
@
text
@$OpenBSD: patch-src_app_qgisapp_cpp,v 1.17 2017/04/18 12:08:59 landry Exp $
Fix paths to docs

Last chunk:
https://github.com/qgis/QGIS/commit/af8fb04f396b8dce8eaae1d939fbe371ba05e6fb
Index: src/app/qgisapp.cpp
--- src/app/qgisapp.cpp.orig
+++ src/app/qgisapp.cpp
@@@@ -1712,7 +1712,7 @@@@ void QgisApp::createActions()
   mActionReportaBug->setShortcut( QString() );
 #endif
 
-  mActionHelpContents->setEnabled( QFileInfo( QgsApplication::pkgDataPath() + "/doc/index.html" ).exists() );
+  mActionHelpContents->setEnabled( QFileInfo( QgsApplication::pkgDataPath() + "/../doc/qgis/index.html" ).exists() );
 
   connect( mActionHelpContents, SIGNAL( triggered() ), this, SLOT( helpContents() ) );
   connect( mActionHelpAPI, SIGNAL( triggered() ), this, SLOT( apiDocumentation() ) );
@@@@ -9162,7 +9162,7 @@@@ void QgisApp::helpContents()
 
 void QgisApp::apiDocumentation()
 {
-  if ( QFileInfo( QgsApplication::pkgDataPath() + "/doc/api/index.html" ).exists() )
+  if ( QFileInfo( QgsApplication::pkgDataPath() + "/../doc/qgis/api/index.html" ).exists() )
   {
     openURL( "api/index.html" );
   }
@@@@ -9191,7 +9191,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
   // open help in user browser
   if ( useQgisDocDirectory )
   {
-    url = "file://" + QgsApplication::pkgDataPath() + "/doc/" + url;
+    url = "file://" + QgsApplication::pkgDataPath() + "/../doc/qgis/" + url;
   }
 #ifdef Q_OS_MACX
   /* Use Mac OS X Launch Services which uses the user's default browser
@@@@ -9315,7 +9315,7 @@@@ QgsVectorLayer* QgisApp::addVectorLayer( const QString
       Q_ASSERT( elements.size() >= 4 );
       if ( layer->name() != elements.at( 1 ) )
       {
-        layer->setName( QStringLiteral( "%1 %2 %3" ).arg( layer->name(), elements.at( 1 ), elements.at( 3 ) ) );
+        layer->setName( QString( "%1 %2 %3" ).arg( layer->name(), elements.at( 1 ), elements.at( 3 ) ) );
       }
 
       myList << layer;
@


1.17
log
@Bugfix update to QGIS 2.18.6.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.16 2017/02/07 08:20:51 landry Exp $
d3 7
a9 3
--- src/app/qgisapp.cpp.orig	Fri Apr  7 14:12:04 2017
+++ src/app/qgisapp.cpp	Tue Apr 18 10:48:50 2017
@@@@ -1713,7 +1713,7 @@@@ void QgisApp::createActions()
d18 1
a18 1
@@@@ -9166,7 +9166,7 @@@@ void QgisApp::helpContents()
d27 1
a27 1
@@@@ -9195,7 +9195,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
d36 9
@


1.16
log
@Update to qgis 2.18.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.15 2016/12/22 21:34:06 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri Jan 13 13:00:04 2017
+++ src/app/qgisapp.cpp	Mon Feb  6 16:40:20 2017
@@@@ -1708,7 +1708,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -9154,7 +9154,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -9183,7 +9183,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.15
log
@Update to qgis 2.18.2.

Remove patch-src_gui_qgisgui_h which was part of
https://github.com/qgis/QGIS/commit/3e738405e2e91eaf8a54f82640e5f59fc977e21a
upstream.

Switch to use gcc4 on all platforms (not only on i386), the new DWG
importer (added in a stable branch.. sigh) doesn't build with base gcc,
and what's the point of trying to build a modern c++ codebase with a 10
year-old compiler ?

Bump all shlib majors for lots of symbols removed as a consequence.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.14 2016/11/30 16:53:37 landry Exp $
d3 2
a4 2
--- src/app/qgisapp.cpp.orig	Fri Dec 16 13:00:14 2016
+++ src/app/qgisapp.cpp	Tue Dec 20 17:10:39 2016
d14 1
a14 1
@@@@ -9152,7 +9152,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -9181,7 +9181,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.14
log
@Bugfix update to qgis 2.18.1
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.13 2016/11/01 09:18:13 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri Nov 25 14:13:12 2016
+++ src/app/qgisapp.cpp	Tue Nov 29 14:20:04 2016
@@@@ -1706,7 +1706,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -9143,7 +9143,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -9172,7 +9172,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.13
log
@Update to QGIS 2.18.0.

See http://changelog.qgis.org/en/qgis/version/2.18.0/ for a visual list
of changes.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.12 2016/08/08 17:45:40 landry Exp $
d3 2
a4 2
--- src/app/qgisapp.cpp.orig	Fri Oct 21 14:14:02 2016
+++ src/app/qgisapp.cpp	Tue Oct 25 10:29:38 2016
d14 1
a14 1
@@@@ -9129,7 +9129,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -9158,7 +9158,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.12
log
@Update to QGIS 2.16.1.

See http://changelog.qgis.org/en/qgis/version/2.16.0/.

Add two patches reverting selected chunks of upstream commits leading to
segfaults in python/sip initializations, until if figure out what's
wrong in upstream ticket #15347, hopefully at g2k16. With those two
commits reverted, it runs fine...
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.11 2016/06/01 14:05:22 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri Jul 29 14:04:56 2016
+++ src/app/qgisapp.cpp	Thu Aug  4 08:48:57 2016
@@@@ -1674,7 +1674,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -9080,7 +9080,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -9109,7 +9109,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.11
log
@Bugfix update to QGIS 2.14.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.10 2016/03/29 15:09:52 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri May 20 14:05:10 2016
+++ src/app/qgisapp.cpp	Wed Jun  1 10:50:25 2016
@@@@ -1527,7 +1527,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -8533,7 +8533,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -8562,7 +8562,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.10
log
@Bugfix update to QGIS 2.14.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.9 2016/03/02 14:39:10 landry Exp $
d3 2
a4 2
--- src/app/qgisapp.cpp.orig	Fri Mar 25 13:17:01 2016
+++ src/app/qgisapp.cpp	Tue Mar 29 14:24:04 2016
d14 1
a14 1
@@@@ -8528,7 +8528,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -8557,7 +8557,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.9
log
@Update to QGIS 2.14.

See http://changelog.qgis.org/en/qgis/version/2.14.0/ for changes.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.8 2015/10/31 15:29:44 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri Feb 26 13:23:48 2016
+++ src/app/qgisapp.cpp	Tue Mar  1 13:51:41 2016
@@@@ -1528,7 +1528,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -8518,7 +8518,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -8547,7 +8547,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.8
log
@Upgrade to QGIS 2.12.

- See https://www.qgis.org/en/site/forusers/visualchangelog212/ for the
changes.
- Regenerate qgisrastercalcparser.{h,c}pp with out-of-ports bison 2.6
- Now uses qca2 & qca-ossl for https handling
- Remove now useless patches
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.7 2015/07/21 10:06:14 landry Exp $
d3 4
a6 4
--- src/app/qgisapp.cpp.orig	Fri Oct 23 14:10:38 2015
+++ src/app/qgisapp.cpp	Fri Oct 30 15:44:07 2015
@@@@ -1481,7 +1481,7 @@@@ void QgisApp::createActions()
   mActionQgisHomePage->setShortcut( QString() );
d14 1
a14 1
@@@@ -8218,7 +8218,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -8243,7 +8243,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.7
log
@Update to QGIS 2.10.1.

See https://github.com/qgis/QGIS/blob/master/NEWS for ...news...
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.6 2015/03/16 20:06:33 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri Jun 26 14:38:57 2015
+++ src/app/qgisapp.cpp	Mon Jun 29 22:08:17 2015
@@@@ -1339,7 +1339,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -7989,7 +7989,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -8014,7 +8014,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.6
log
@Update to QGIS 2.8.1.

See http://www2.qgis.org/en/site/forusers/visualchangelog28/
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.5 2014/11/10 16:05:17 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Thu Feb 26 10:12:00 2015
+++ src/app/qgisapp.cpp	Tue Mar  3 10:15:34 2015
@@@@ -1286,7 +1286,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -7840,7 +7840,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -7865,7 +7865,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.5
log
@Update to qgis 2.6.0 'Brighton'.

See https://www.qgis.org/en/site/forusers/visualchangelog260/index.html
Use devel/gflex instead of base flex which doesnt seem to handle
%option reentrant, used since
https://github.com/qgis/QGIS/commit/2427546d8850c7f0b2ca191b238a77c49f648510
commit parser files generated locally with bison 2.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.4 2014/08/20 08:54:45 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Fri Oct 31 15:17:19 2014
+++ src/app/qgisapp.cpp	Fri Nov  7 14:32:50 2014
@@@@ -1247,7 +1247,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -7684,7 +7684,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -7709,7 +7709,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.4
log
@Long awaited update to QGIS 2.4.0.

Since 1.8, QGIS requires bison > 2.4 at build time, but since noone
cares enough our bison is still stuck at 2.3. To workaround this,
add the parsers generated with a WIP bison 2.6.2 to files/, and comment
out the Cmake goo to call/detect bison.

Add patches from http://hub.qgis.org/issues/10762.

I've used QGIS 1.8, 2.0, 2.2 and 2.4 without issues since > 2 years.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.3 2012/11/01 07:25:36 landry Exp $
d3 2
a4 2
--- src/app/qgisapp.cpp.orig	Fri Jun 27 14:00:08 2014
+++ src/app/qgisapp.cpp	Tue Jul  1 08:53:16 2014
d14 1
a14 1
@@@@ -7496,7 +7496,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -7521,7 +7521,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.3
log
@Bugfix update to qgis 1.7.4.

See for the list of bugs fixed:
http://www.qgis.org/en/about-qgis/qgis-releases/139-qgis-1-7-4-releasehtml.html

(we cant update to 1.8.0 because our bison is too old, and newer bisons
dont cope well with our m4)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.2 2011/12/29 21:44:06 landry Exp $
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Wed Feb 22 21:48:14 2012
+++ src/app/qgisapp.cpp	Wed Oct 31 11:09:36 2012
@@@@ -855,7 +855,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -4880,7 +4880,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -4900,7 +4900,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.2
log
@Bugfix update to QuantumGIS 1.7.3 :
- set SHARED_ONLY and merge PFRAG.shared into PLIST
- fix my mail address
- see http://www.qgis.org/en/about-qgis/qgis-releases/137-qgis-1-7-3-releasehtml.html
@
text
@d1 1
a1 1
$OpenBSD: patch-src_app_qgisapp_cpp,v 1.1 2011/07/07 20:34:27 landry Exp $
d3 2
a4 2
--- src/app/qgisapp.cpp.orig	Sat Dec 10 19:23:35 2011
+++ src/app/qgisapp.cpp	Wed Dec 28 22:24:16 2011
d14 1
a14 1
@@@@ -4887,7 +4887,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -4907,7 +4907,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@


1.1
log
@Update to QuantumGIS 1.7.0, been using it for some weeks without issues.
Add a bunch of patches to install/access the doc in the correct dir.
see release notes for details :
http://www.qgis.org/en/component/content/article/127-qgis-1-7-release.html
With feedback from okan@@, thanks !
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- src/app/qgisapp.cpp.orig	Sun Jun  5 13:59:48 2011
+++ src/app/qgisapp.cpp	Thu Jun 30 08:57:21 2011
@@@@ -854,7 +854,7 @@@@ void QgisApp::createActions()
d14 1
a14 1
@@@@ -4991,7 +4991,7 @@@@ void QgisApp::helpContents()
d23 1
a23 1
@@@@ -5011,7 +5011,7 @@@@ void QgisApp::openURL( QString url, bool useQgisDocDir
@

