head	1.16;
access;
symbols
	OPENBSD_6_1:1.16.0.2
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.13.0.2
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.5.0.14
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.12
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.10
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.8
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.6
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.4
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3;
locks; strict;
comment	@# @;


1.16
date	2016.11.30.16.53.37;	author landry;	state Exp;
branches;
next	1.15;
commitid	cjmZ7DoNViEt9t4u;

1.15
date	2016.11.01.09.18.13;	author landry;	state Exp;
branches;
next	1.14;
commitid	zhoy0itRDzYZ7eNv;

1.14
date	2016.08.08.17.45.40;	author landry;	state Exp;
branches;
next	1.13;
commitid	kgtur4oqjelyjxc4;

1.13
date	2016.03.29.15.09.52;	author landry;	state Exp;
branches;
next	1.12;
commitid	0YMHkMI3jkAkiXCn;

1.12
date	2016.03.02.14.39.10;	author landry;	state Exp;
branches;
next	1.11;
commitid	awC2u2jrEcQN8OHM;

1.11
date	2015.11.16.10.22.59;	author landry;	state Exp;
branches;
next	1.10;
commitid	iSvteyoUFXmgWFLJ;

1.10
date	2015.10.31.15.29.44;	author landry;	state Exp;
branches;
next	1.9;
commitid	55lUL9SpLjszeDFA;

1.9
date	2015.07.21.10.06.14;	author landry;	state Exp;
branches;
next	1.8;
commitid	a3MaLha3xPZ70OiS;

1.8
date	2015.03.16.20.06.33;	author landry;	state Exp;
branches;
next	1.7;
commitid	SvyS159T3egvlXcm;

1.7
date	2014.11.10.16.05.17;	author landry;	state Exp;
branches;
next	1.6;
commitid	KLYTJIVzgCdqoELJ;

1.6
date	2014.08.20.08.54.45;	author landry;	state Exp;
branches;
next	1.5;
commitid	B1F8DMuRyMhTh3L0;

1.5
date	2011.07.07.20.34.27;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2010.12.08.09.07.48;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2010.05.11.06.41.30;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2010.01.11.20.13.31;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2009.09.06.11.19.17;	author landry;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Bugfix update to qgis 2.18.1
@
text
@$OpenBSD: patch-src_core_CMakeLists_txt,v 1.15 2016/11/01 09:18:13 landry Exp $

chunk 1: workaround $area expansion issue with gmake expanding to $$$$area

--- src/core/CMakeLists.txt.orig	Fri Nov 25 14:13:12 2016
+++ src/core/CMakeLists.txt	Tue Nov 29 14:20:04 2016
@@@@ -365,7 +365,7 @@@@ SET(QGIS_CORE_SRCS
 )
 
 
-FILE(GLOB JSON_HELP_FILES "${CMAKE_SOURCE_DIR}/resources/function_help/json/*")
+FILE(GLOB JSON_HELP_FILES "${CMAKE_SOURCE_DIR}/resources/function_help/json/a*")
 IF(NOT USING_NINJA)
   STRING(REPLACE "$" "$$" JSON_HELP_FILES "${JSON_HELP_FILES}")
 ENDIF(NOT USING_NINJA)
@@@@ -977,9 +977,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
 TARGET_LINK_LIBRARIES(qgis_core
   ${QT_QTMAIN_LIBRARY}
   ${QT_QTXML_LIBRARY}
-  ${QT_QTCORE_LIBRARY}
-  ${QT_QTGUI_LIBRARY}
-  ${QT_QTNETWORK_LIBRARY}
+  ${QT_QTCORE_LIBRARY} ${QT_QTCORE_LIB_DEPENDENCIES}
+  ${QT_QTGUI_LIBRARY} ${QT_QTGUI_LIB_DEPENDENCIES}
+  ${QT_QTNETWORK_LIBRARY} ${QT_QTNETWORK_LIB_DEPENDENCIES}
   ${QT_QTSVG_LIBRARY}
   ${QT_QTWEBKIT_LIBRARY}
   ${QT_QTSQL_LIBRARY}
@


1.15
log
@Update to QGIS 2.18.0.

See http://changelog.qgis.org/en/qgis/version/2.18.0/ for a visual list
of changes.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.14 2016/08/08 17:45:40 landry Exp $
d5 2
a6 2
--- src/core/CMakeLists.txt.orig	Fri Oct 21 14:14:02 2016
+++ src/core/CMakeLists.txt	Tue Oct 25 10:29:38 2016
d16 1
a16 1
@@@@ -976,9 +976,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.14
log
@Update to QGIS 2.16.1.

See http://changelog.qgis.org/en/qgis/version/2.16.0/.

Add two patches reverting selected chunks of upstream commits leading to
segfaults in python/sip initializations, until if figure out what's
wrong in upstream ticket #15347, hopefully at g2k16. With those two
commits reverted, it runs fine...
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.13 2016/03/29 15:09:52 landry Exp $
d5 3
a7 3
--- src/core/CMakeLists.txt.orig	Fri Jul 29 14:04:56 2016
+++ src/core/CMakeLists.txt	Thu Aug  4 08:48:57 2016
@@@@ -363,7 +363,7 @@@@ SET(QGIS_CORE_SRCS
d16 1
a16 1
@@@@ -970,9 +970,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.13
log
@Bugfix update to QGIS 2.14.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.12 2016/03/02 14:39:10 landry Exp $
d5 3
a7 4
--- src/core/CMakeLists.txt.orig	Fri Mar 25 13:17:01 2016
+++ src/core/CMakeLists.txt	Tue Mar 29 14:24:04 2016
@@@@ -341,7 +341,7 @@@@ SET(QGIS_CORE_SRCS
   geometry/qgswkbtypes.cpp
d10 1
d13 4
a16 4
 STRING(REPLACE "$" "$$" JSON_HELP_FILES "${JSON_HELP_FILES}")
 STRING(REPLACE "\(" "\\(" JSON_HELP_FILES "${JSON_HELP_FILES}")
 STRING(REPLACE "\)" "\\)" JSON_HELP_FILES "${JSON_HELP_FILES}")
@@@@ -915,9 +915,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.12
log
@Update to QGIS 2.14.

See http://changelog.qgis.org/en/qgis/version/2.14.0/ for changes.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.11 2015/11/16 10:22:59 landry Exp $
d5 3
a7 3
--- src/core/CMakeLists.txt.orig	Fri Feb 26 13:23:48 2016
+++ src/core/CMakeLists.txt	Tue Mar  1 13:51:41 2016
@@@@ -340,7 +340,7 @@@@ SET(QGIS_CORE_SRCS
d16 1
a16 1
@@@@ -913,9 +913,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.11
log
@Remove generated files and cmake butchery now that we have a decent
bison. Thanks jca@@!
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.10 2015/10/31 15:29:44 landry Exp $
d5 3
a7 3
--- src/core/CMakeLists.txt.orig	Fri Oct 23 14:10:38 2015
+++ src/core/CMakeLists.txt	Mon Nov 16 09:27:43 2015
@@@@ -327,7 +327,7 @@@@ SET(QGIS_CORE_SRCS
d16 1
a16 1
@@@@ -864,9 +864,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.10
log
@Upgrade to QGIS 2.12.

- See https://www.qgis.org/en/site/forusers/visualchangelog212/ for the
changes.
- Regenerate qgisrastercalcparser.{h,c}pp with out-of-ports bison 2.6
- Now uses qca2 & qca-ossl for https handling
- Remove now useless patches
@
text
@d1 4
a4 3
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.9 2015/07/21 10:06:14 landry Exp $
chunk 1/3: dont call bison to generate the parser, and build the pregenerated file instead
chunk 2: workaround $area expansion issue with gmake expanding to $$$$area
d6 2
a7 10
+++ src/core/CMakeLists.txt	Fri Oct 30 16:47:52 2015
@@@@ -100,6 +100,7 @@@@ SET(QGIS_CORE_SRCS
   qgsdistancearea.cpp
   qgserror.cpp
   qgsexpression.cpp
+  qgsexpressionparser.cpp
   qgsexpressioncontext.cpp
   qgsexpression_texts.cpp
   qgsexpressionfieldbuffer.cpp
@@@@ -327,7 +328,7 @@@@ SET(QGIS_CORE_SRCS
d16 1
a16 10
@@@@ -392,7 +393,7 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND OR Qt5Positioning_FO
 
 ADD_FLEX_FILES(QGIS_CORE_SRCS qgsexpressionlexer.ll)
 
-ADD_BISON_FILES(QGIS_CORE_SRCS qgsexpressionparser.yy)
+#ADD_BISON_FILES(QGIS_CORE_SRCS qgsexpressionparser.yy)
 
 SET(QGIS_CORE_MOC_HDRS
 
@@@@ -864,9 +865,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.9
log
@Update to QGIS 2.10.1.

See https://github.com/qgis/QGIS/blob/master/NEWS for ...news...
@
text
@d1 6
a6 5
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.8 2015/03/16 20:06:33 landry Exp $
chunk 1/2: dont call bison to generate the parser, and build the pregenerated file instead
--- src/core/CMakeLists.txt.orig	Fri Jun 26 14:38:57 2015
+++ src/core/CMakeLists.txt	Mon Jun 29 22:08:17 2015
@@@@ -93,6 +93,7 @@@@ SET(QGIS_CORE_SRCS
d11 1
d14 10
a23 2
   qgsfeature.cpp
@@@@ -368,7 +369,7 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND OR Qt5Positioning_FO
d32 1
a32 1
@@@@ -812,9 +813,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
d44 1
a44 1
 
@


1.8
log
@Update to QGIS 2.8.1.

See http://www2.qgis.org/en/site/forusers/visualchangelog28/
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.7 2014/11/10 16:05:17 landry Exp $
d3 3
a5 3
--- src/core/CMakeLists.txt.orig	Thu Feb 26 10:12:00 2015
+++ src/core/CMakeLists.txt	Tue Mar  3 10:15:34 2015
@@@@ -83,6 +83,7 @@@@ SET(QGIS_CORE_SRCS
d13 1
a13 1
@@@@ -333,7 +334,7 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
d22 1
a22 1
@@@@ -743,9 +744,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
d34 1
a34 1
   ${QSCINTILLA_LIBRARY}
@


1.7
log
@Update to qgis 2.6.0 'Brighton'.

See https://www.qgis.org/en/site/forusers/visualchangelog260/index.html
Use devel/gflex instead of base flex which doesnt seem to handle
%option reentrant, used since
https://github.com/qgis/QGIS/commit/2427546d8850c7f0b2ca191b238a77c49f648510
commit parser files generated locally with bison 2.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.6 2014/08/20 08:54:45 landry Exp $
d3 3
a5 3
--- src/core/CMakeLists.txt.orig	Fri Oct 31 15:17:19 2014
+++ src/core/CMakeLists.txt	Mon Nov 10 10:59:34 2014
@@@@ -79,6 +79,7 @@@@ SET(QGIS_CORE_SRCS
d13 1
a13 1
@@@@ -337,7 +338,7 @@@@ ENDIF (WITH_INTERNAL_SPATIALITE)
d22 1
a22 1
@@@@ -760,9 +761,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
@


1.6
log
@Long awaited update to QGIS 2.4.0.

Since 1.8, QGIS requires bison > 2.4 at build time, but since noone
cares enough our bison is still stuck at 2.3. To workaround this,
add the parsers generated with a WIP bison 2.6.2 to files/, and comment
out the Cmake goo to call/detect bison.

Add patches from http://hub.qgis.org/issues/10762.

I've used QGIS 1.8, 2.0, 2.2 and 2.4 without issues since > 2 years.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.5 2011/07/07 20:34:27 landry Exp $
d3 3
a5 3
--- src/core/CMakeLists.txt.orig	Fri Jun 27 14:00:08 2014
+++ src/core/CMakeLists.txt	Mon Aug 18 13:32:26 2014
@@@@ -74,6 +74,7 @@@@ SET(QGIS_CORE_SRCS
d11 1
d13 1
a13 2
   qgsfeatureiterator.cpp
@@@@ -317,7 +318,7 @@@@ ENDIF (WITH_INTERNAL_SPATIALITE)
d22 1
a22 1
@@@@ -715,9 +716,9 @@@@ ENDIF (QT_MOBILITY_LOCATION_FOUND)
d34 1
a34 1
 
@


1.5
log
@Update to QuantumGIS 1.7.0, been using it for some weeks without issues.
Add a bunch of patches to install/access the doc in the correct dir.
see release notes for details :
http://www.qgis.org/en/component/content/article/127-qgis-1-7-release.html
With feedback from okan@@, thanks !
@
text
@d1 22
a22 4
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.4 2010/12/08 09:07:48 landry Exp $
--- src/core/CMakeLists.txt.orig	Sun Jun  5 13:59:48 2011
+++ src/core/CMakeLists.txt	Mon Jun 27 15:28:09 2011
@@@@ -339,9 +339,9 @@@@ ENDIF(APPLE)
d24 5
a28 5
   ${QT_QTMAIN_LIBRARY} 
   ${QT_QTXML_LIBRARY} 
-  ${QT_QTCORE_LIBRARY} 
-  ${QT_QTGUI_LIBRARY} 
-  ${QT_QTNETWORK_LIBRARY} 
d32 2
a33 1
   ${QT_QTSVG_LIBRARY} 
a34 1
   ${PROJ_LIBRARY}
@


1.4
log
@Update to QuantumGIS 1.6.0.
See http://blog.qgis.org/node/146 for details on this release.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.3 2010/05/11 06:41:30 dcoppa Exp $
--- src/core/CMakeLists.txt.orig	Thu Oct 28 01:58:43 2010
+++ src/core/CMakeLists.txt	Mon Nov 29 17:31:38 2010
@@@@ -345,9 +345,9 @@@@ ENDIF(APPLE)
@


1.3
log
@Pass Qt4 dependent libraries to linker: this makes lib-depends-check
happy.

OK landry@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/core/CMakeLists.txt.orig	Mon May 10 11:32:02 2010
+++ src/core/CMakeLists.txt	Mon May 10 11:35:23 2010
@@@@ -289,9 +289,9 @@@@ ENDIF (WIN32)
@


1.2
log
@Update to Quantum GIS 1.4.0.
see http://blog.qgis.org/node/142 for details.
@
text
@d1 16
a16 13
$OpenBSD: patch-src_core_CMakeLists_txt,v 1.1 2009/09/06 11:19:17 landry Exp $
don't link with lpthread or the linux-only libdl.
--- src/core/CMakeLists.txt.orig	Sun Aug  2 17:28:05 2009
+++ src/core/CMakeLists.txt	Fri Sep  4 02:56:08 2009
@@@@ -280,7 +280,7 @@@@ IF (WITH_INTERNAL_SPATIALITE)
     TARGET_LINK_LIBRARIES(qgis_core ${ICONV_LIBRARY})
   ENDIF (WIN32 OR APPLE)
   IF (UNIX)
-    TARGET_LINK_LIBRARIES(qgis_core pthread dl)
+    TARGET_LINK_LIBRARIES(qgis_core)
   ENDIF (UNIX)
 ELSE (WITH_INTERNAL_SPATIALITE)
   TARGET_LINK_LIBRARIES(qgis_core ${SQLITE3_LIBRARY})
@


1.1
log
@Update to Quantum GIS 1.2.0, see http://blog.qgis.org/node/137 for
details.
Use gettext module & modpy_lib_depends.
@
text
@d1 1
a1 1
$OpenBSD$
@

