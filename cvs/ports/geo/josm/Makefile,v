head	1.40;
access;
symbols
	OPENBSD_6_2:1.40.0.2
	OPENBSD_6_2_BASE:1.40
	OPENBSD_6_1:1.38.0.2
	OPENBSD_6_1_BASE:1.38
	OPENBSD_6_0:1.35.0.2
	OPENBSD_6_0_BASE:1.35
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.28.0.4
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.25.0.2
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.16.0.4
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	ian_2009-Aug-02:1.1.1.1
	ian:1.1.1;
locks; strict;
comment	@# @;


1.40
date	2017.09.10.19.10.43;	author landry;	state Exp;
branches;
next	1.39;
commitid	W4cDniWbIcPdKU8k;

1.39
date	2017.07.21.10.04.27;	author sthen;	state Exp;
branches;
next	1.38;
commitid	j2UEuLkETpzuUPgy;

1.38
date	2017.02.13.08.31.47;	author landry;	state Exp;
branches;
next	1.37;
commitid	8ezepIfb3jd6dygt;

1.37
date	2016.11.11.20.41.17;	author landry;	state Exp;
branches;
next	1.36;
commitid	s2CKoElzNxbLL3es;

1.36
date	2016.08.21.20.10.32;	author landry;	state Exp;
branches;
next	1.35;
commitid	ECXNFeqE8G4RBohd;

1.35
date	2016.06.22.06.20.19;	author landry;	state Exp;
branches;
next	1.34;
commitid	mTEoV0qs1RW88b5j;

1.34
date	2016.06.08.19.30.11;	author landry;	state Exp;
branches;
next	1.33;
commitid	BHP5HLVfGpxezXm2;

1.33
date	2016.03.07.14.44.46;	author landry;	state Exp;
branches;
next	1.32;
commitid	nzbdkQ3dBV9uhHcf;

1.32
date	2016.01.11.22.18.33;	author landry;	state Exp;
branches;
next	1.31;
commitid	Y0nVY0tTiTEuOzyj;

1.31
date	2015.12.25.21.05.18;	author landry;	state Exp;
branches;
next	1.30;
commitid	cC2ApdX07egW9tmd;

1.30
date	2015.10.31.18.44.31;	author landry;	state Exp;
branches;
next	1.29;
commitid	CtQTwfxL01z30Sv4;

1.29
date	2015.08.31.05.23.29;	author landry;	state Exp;
branches;
next	1.28;
commitid	StxNBAJV5YYRIJ1n;

1.28
date	2015.05.17.09.57.07;	author jasper;	state Exp;
branches;
next	1.27;
commitid	jAUKbhyjhuor3wNN;

1.27
date	2015.05.08.09.08.44;	author espie;	state Exp;
branches;
next	1.26;
commitid	8WaxsMNN6opOzn9t;

1.26
date	2014.10.21.22.07.25;	author landry;	state Exp;
branches;
next	1.25;
commitid	cefU8VAIE0YVxy5Y;

1.25
date	2014.05.07.15.42.16;	author kurt;	state Exp;
branches;
next	1.24;

1.24
date	2014.04.20.08.04.10;	author landry;	state Exp;
branches;
next	1.23;

1.23
date	2014.04.20.06.49.10;	author landry;	state Exp;
branches;
next	1.22;

1.22
date	2013.12.22.08.02.48;	author landry;	state Exp;
branches;
next	1.21;

1.21
date	2013.12.10.22.26.21;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.11.11.07.42;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2012.09.10.08.21.22;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2012.09.10.08.13.16;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2012.09.09.19.38.25;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2011.12.15.21.35.18;	author kili;	state Exp;
branches;
next	1.15;

1.15
date	2011.10.31.20.22.20;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.16.09.48.10;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.01.17.18.50;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2011.08.30.17.16.36;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.06.21.20.17.53;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.27.17.05.00;	author ian;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.17.08.05.12;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.10.18.18.13.12;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.30.19.47.36;	author ian;	state Exp;
branches;
next	1.6;

1.6
date	2009.12.21.21.21.59;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.11.18.20.39.34;	author ian;	state Exp;
branches;
next	1.4;

1.4
date	2009.08.10.14.50.58;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.08.03.20.48.26;	author ian;	state Exp;
branches;
next	1.2;

1.2
date	2009.08.02.21.02.44;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.08.02.18.38.53;	author ian;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.08.02.18.38.53;	author ian;	state Exp;
branches;
next	;


desc
@@


1.40
log
@Update to JOSM svn r12712, from maintainer Holger Mikolon
@
text
@# $OpenBSD: Makefile,v 1.39 2017/07/21 10:04:27 sthen Exp $

COMMENT=		OpenStreetMap map editor

SVN_REV=		12712
DISTNAME=		josm-snapshot-${SVN_REV}
EXTRACT_SUFX =		.jar
EXTRACT_CASES+=		*.jar) unzip -qa ${FULLDISTDIR}/$$archive -d ${WRKDIST};;
PKGNAME=		josm-${SVN_REV}

PKG_ARCH=		*

CATEGORIES=		geo

HOMEPAGE=		http://josm.openstreetmap.de/
MASTER_SITES=		${HOMEPAGE}/download/

MAINTAINER=		Holger Mikolon <holger@@mikolon.com>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MODULES=		java \
			textproc/intltool
MODJAVA_VER=		1.8+
BUILD_DEPENDS =		archivers/unzip
RUN_DEPENDS=		java/javaPathHelper \
			devel/desktop-file-utils
NO_TEST=		Yes
NO_BUILD=		Yes

INSTALL_DIR =		josm

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/${INSTALL_DIR}
	${INSTALL_DATA} $(DISTDIR)/${DISTNAME}${EXTRACT_SUFX} ${PREFIX}/share/${INSTALL_DIR}/josm-latest.jar
	@@${SUBST_CMD} -m 0755 -c ${FILESDIR}/josm.sh $(PREFIX)/bin/josm
	chown ${BINOWN}:${BINGRP} $(PREFIX)/bin/josm
	chmod +x $(PREFIX)/bin/josm
	${INSTALL_MAN} $(FILESDIR)/josm.1 ${PREFIX}/man/man1/josm.1
	${INSTALL_DATA} $(WRKDIST)/images/logo.png ${PREFIX}/share/${INSTALL_DIR}/osm_logo.png
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	@@${SUBST_CMD} -m 0644 -c ${FILESDIR}/josm.desktop ${PREFIX}/share/applications/josm.desktop
	chown ${SHAREOWN}:${SHAREGRP} $(PREFIX)/share/applications/josm.desktop

.include <bsd.port.mk>
@


1.39
log
@update to josm-snapshot-12450, from maintainer Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2017/02/13 08:31:47 landry Exp $
d5 1
a5 1
SVN_REV=		12450
@


1.38
log
@Update to josm r11526, from MAINTAINER Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/11/11 20:41:17 landry Exp $
d5 1
a5 1
SVN_REV=		11526
@


1.37
log
@Update to josm r11223, from Maintainer Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/08/21 20:10:32 landry Exp $
d5 1
a5 1
SVN_REV=		11223
@


1.36
log
@Update to josm r10786, from maintainer Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/06/22 06:20:19 landry Exp $
d5 1
a5 1
SVN_REV=		10786
@


1.35
log
@Update to josm r10448, from maintainer Holger Mikolon.

Fixes the lsb_release issue, and set MODJAVA_VER to 1.8+ while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/06/08 19:30:11 landry Exp $
d5 1
a5 1
SVN_REV=		10448
@


1.34
log
@Update to josm r10327, looks ok to MAINTAINER.

Note that it tries to exec 'lsb_release' at runtime and produces a
stacktrace at startup, this will be dealt with upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/03/07 14:44:46 landry Exp $
d5 1
a5 1
SVN_REV=		10327
d25 1
a25 1
MODJAVA_VER=		1.7+
@


1.33
log
@Update to josm r9900, from MAINTAINER Holger Mikolon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/01/11 22:18:33 landry Exp $
d5 1
a5 1
SVN_REV=		9900
@


1.32
log
@Update to josm r9329 and switch MODJAVA_VER to 1.7+.
From maintainer Holger Mikolon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/12/25 21:05:18 landry Exp $
d5 1
a5 1
SVN_REV=		9329
@


1.31
log
@Update to josm r9060, from MAINTAINER Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/10/31 18:44:31 landry Exp $
d5 1
a5 1
SVN_REV=		9060
d25 1
a25 1
MODJAVA_VER=		1.6+
@


1.30
log
@update to josm r8969, from maintainer Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/08/31 05:23:29 landry Exp $
d5 1
a5 1
SVN_REV=		8969
@


1.29
log
@Update to josm r8677, from maintainer Holger Mikolon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/05/17 09:57:07 jasper Exp $
d5 1
a5 1
SVN_REV=		8677
@


1.28
log
@- update to josm-8339

from Holger Mikolon (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/05/08 09:08:44 espie Exp $
d5 1
a5 1
SVN_REV=		8339
@


1.27
log
@don't depend on modes in the ports tree being what we want installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/10/21 22:07:25 landry Exp $
d5 1
a5 1
SVN_REV=		7643
@


1.26
log
@Update to josm svn r7643.

with maintainer Holger Mikolon, ok bcallah@@ ian@@ on a previous update to r7632.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/05/07 15:42:16 kurt Exp $
d37 1
a37 1
	@@${SUBST_CMD} -c ${FILESDIR}/josm.sh $(PREFIX)/bin/josm
d43 1
a43 1
	@@${SUBST_CMD} -c ${FILESDIR}/josm.desktop ${PREFIX}/share/applications/josm.desktop
@


1.25
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/04/20 08:04:10 landry Exp $
d5 1
a5 1
SVN_REV=		6950
a9 1
REVISION=		0
@


1.24
log
@s/files/${FILESDIR}/, from maintainer Holger Mikolon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/04/20 06:49:10 landry Exp $
d10 1
@


1.23
log
@Update to josm svn r6950 from Holger Mikolon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/12/22 08:02:48 landry Exp $
d37 1
a37 1
	@@${SUBST_CMD} -c files/josm.sh $(PREFIX)/bin/josm
@


1.22
log
@Update to josm rev 6502, from MAINTAINER Holger Mikolon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/12/10 22:26:21 landry Exp $
d5 1
a5 1
SVN_REV=		6502
@


1.21
log
@Update to josm svn rev 6388.

From Holger Mikolon, who also takes MAINTAINERship.
ok ian@@ (previous MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/11 11:07:42 espie Exp $
d5 1
a5 1
SVN_REV=		6388
@


1.20
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/09/10 08:21:22 ajacoutot Exp $
d5 1
a5 1
SVN_REV=		5485
d18 1
a18 1
MAINTAINER=		Ian Darwin <ian@@openbsd.org>
@


1.19
log
@Remove non existent variable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/09/10 08:13:16 landry Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d29 1
a29 1
NO_REGRESS=		Yes
@


1.18
log
@Add missing BUILD_DEPENDS on unzip, spotted by nigel@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/09/09 19:38:25 landry Exp $
a33 1
NO_EXTRACT=		Yes
@


1.17
log
@Update to josm svn rev 5485.
Directly use the provided jar instead of rebuilding it for nothing.
ok ian@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/12/15 21:35:18 kili Exp $
d29 1
@


1.16
log
@JAVA_HOME is now added to MAKE_ENV in java.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/10/31 20:22:20 jasper Exp $
d5 5
a9 3
SVN_REV=		3592
DISTNAME=		josm-1.5.${SVN_REV}
REVISION=		2
d16 1
a16 1
MASTER_SITES=		http://www.darwinsys.com/mirror/
a28 6
MODJAVA_BUILD=		ant
MODJAVA_BUILD_ARGS=	-Dant.build.javac.source="1.5" \
			-Dant.build.javac.target="1.5"
MODJAVA_BUILD_TARGET=	dist

BUILD_DEPENDS=		devel/apache-ant
d32 2
d39 1
a39 1
	${INSTALL_DATA} $(WRKDIST)/dist/josm-custom.jar ${PREFIX}/share/${INSTALL_DIR}/josm-latest.jar
@


1.15
log
@- fix build after recent subversion update (spotted by naddy@@) by extending
the initial efforts of patch-build_xml
- tweak DESCR while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/16 09:48:10 espie Exp $
a30 1
MAKE_ENV+=		JAVA_HOME=${JAVA_HOME}
@


1.14
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/01 17:18:50 jasper Exp $
d7 1
a7 1
REVISION=		1
@


1.13
log
@- switch to MODJAVA_BUILD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/08/30 17:16:36 jasper Exp $
d7 1
a7 1
REVISION=		0
@


1.12
log
@- bump REVISION after recent java.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/06/21 20:17:53 naddy Exp $
d27 4
a31 1
USE_GROFF =		Yes
a36 4

do-build:
	@@cd ${WRKDIST} && exec ${SETENV} ${MAKE_ENV} ant -q \
	-Dant.build.javac.source="1.5" -Dant.build.javac.target="1.5" dist
@


1.11
log
@simply install the source man page
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/11/27 17:05:00 ian Exp $
d7 1
@


1.10
log
@Minor version update 3376->3592
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/17 08:05:12 espie Exp $
d46 1
a46 1
	nroff -man $(FILESDIR)/josm.1 > $(PREFIX)/man/cat1/josm.0
@


1.9
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/10/18 18:13:12 espie Exp $
d5 1
a5 1
SVN_REV=		3376
@


1.8
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/07/30 19:47:36 ian Exp $
a6 1
PKGNAME=		${DISTNAME}
d27 1
a27 1
USE_GROFF =	Yes
d29 3
a31 3
BUILD_DEPENDS=		::devel/apache-ant
RUN_DEPENDS=		::java/javaPathHelper \
			::devel/desktop-file-utils
@


1.7
log
@Update my mirror and Makefile to latest stable SVN. Nagged by Landry.
Strip some garbage from their build script. Reluctantly use JDK 1.6
since code doesn't build on 1.7 due to better error checking.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/12/21 21:21:59 ajacoutot Exp $
d28 1
@


1.6
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/11/18 20:39:34 ian Exp $
d5 1
a5 1
SVN_REV=		2313
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d26 1
a26 1
MODJAVA_VER=		1.7+
@


1.5
log
@Simple update to latest stable revision. MODJAVA_VER -> 1.7+ so you can build
with a JDK from packages; use MAKE_ENV to propagate JAVA_HOME for JDK version.
Proddy by & OK landry@@; improved by kurt@@, sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/08/10 14:50:58 sthen Exp $
d7 2
@


1.4
log
@BUILD_DEPENDS on ant. No bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/08/03 20:48:26 ian Exp $
d5 1
a5 1
SVN_REV=		1788
a6 1
PKGNAME=		${DISTNAME}p0
d24 2
a25 1
MODJAVA_VER=		1.6+
@


1.3
log
@Simplified mirror directory structure, tweak MASTER_SITE, no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/08/02 21:02:44 ajacoutot Exp $
d27 1
@


1.2
log
@Add missing update-desktop-database goo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/08/02 18:38:53 ian Exp $
d13 1
a13 1
MASTER_SITES=		http://www.darwinsys.com/mirror/josm/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.50 2006/11/03 17:03:28 espie Exp $
d7 1
@


1.1.1.1
log
@Import JOSM, graphical editor for OpenStreetMap, improved & ok sthen@@
@
text
@@
