head	1.4;
access;
symbols
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2015.09.19.15.44.12;	author landry;	state dead;
branches;
next	1.3;
commitid	vvL3AIQSI9z8I7Ii;

1.3
date	2015.01.14.10.58.44;	author sthen;	state Exp;
branches;
next	1.2;
commitid	jYG5LFdUqTIN1ATv;

1.2
date	2015.01.12.20.57.55;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	GI7dBb23lfxvh7gv;

1.1
date	2014.12.19.21.16.55;	author landry;	state Exp;
branches;
next	;
commitid	gnMKwUfrcF0mQNMt;


desc
@@


1.4
log
@Update to pgrouting 2.1.0.

Tested with grenoble data from mapzen metro extracts, imported with
osm2pgrouting, and using pgRoutingLayer extension in QGIS.
@
text
@$OpenBSD: patch-tools_test-runner_pl,v 1.3 2015/01/14 10:58:44 sthen Exp $
Allow tests to run.
See also: https://github.com/pgRouting/pgrouting/pull/284
--- tools/test-runner.pl.orig	Wed Sep 25 00:38:31 2013
+++ tools/test-runner.pl	Sat Jan 10 19:07:01 2015
@@@@ -20,8 +20,8 @@@@ my $DRYRUN = 0;
 my $DEBUG = 0;
 
 my $DBNAME = "pgr_test__db__test";
-my $DBUSER = 'postgres';
-my $DBHOST = 'localhost';
+my $DBUSER = getlogin || getpwuid($<) || "postgres";
+my $DBHOST = '${MODPOSTGRESQL_TEST_PGHOST}';
 my $DBPORT = '5432';
 
 sub Usage {
@


1.3
log
@repair hand-edited patch (hint: use "editdiff" from patchutils)
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_test-runner_pl,v 1.2 2015/01/12 20:57:55 zhuk Exp $
@


1.2
log
@Use new shiny postgresql.port.mk.

Input for pgrouting part and okay for it from landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_test-runner_pl,v 1.1 2014/12/19 21:16:55 landry Exp $
d6 1
a6 1
@@@@ -20,8 +20,9 @@@@ my $DRYRUN = 0;
@


1.1
log
@Enable the regress test like its done for postgis (prompted by zhuk@@,
thanks!) - fix RDEP while here, postgis is needed at runtime.
@
text
@d1 6
a6 4
$OpenBSD$
--- tools/test-runner.pl.orig	Fri Dec 19 21:33:45 2014
+++ tools/test-runner.pl	Fri Dec 19 21:55:37 2014
@@@@ -20,7 +20,8 @@@@ my $DRYRUN = 0;
d11 3
a13 3
+my $DBUSER = `whoami`;
+chomp $DBUSER;
 my $DBHOST = 'localhost';
d16 1
@

