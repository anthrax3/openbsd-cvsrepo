head	1.30;
access;
symbols
	OPENBSD_6_1:1.28.0.4
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.28.0.2
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.26.0.8
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.26.0.10
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.26.0.6
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.26.0.4
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.2
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.24.0.2
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.18.0.4
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.16.0.4
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.14.0.4
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.2
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	ckuethe_2006-10-30:1.1.1.1
	ckuethe:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.07.16.19.18.50;	author espie;	state Exp;
branches;
next	1.29;
commitid	tt0GhWK5c4uf9ILG;

1.29
date	2017.04.10.11.46.20;	author sthen;	state Exp;
branches;
next	1.28;
commitid	BLsh88fJB8thZTwY;

1.28
date	2016.03.26.20.37.35;	author zhuk;	state Exp;
branches;
next	1.27;
commitid	OEdThNVtQpfieDxV;

1.27
date	2016.03.10.16.07.27;	author zhuk;	state Exp;
branches;
next	1.26;
commitid	kEYuMrHvoGSEEeir;

1.26
date	2013.10.10.02.08.22;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.11.11.07.42;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2013.01.05.06.18.06;	author sasano;	state Exp;
branches;
next	1.23;

1.23
date	2012.09.27.17.26.05;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.04.15.20.03.16;	author kirby;	state Exp;
branches;
next	1.21;

1.21
date	2012.02.18.22.04.07;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.11.13.13.54.04;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.16.09.48.10;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.17.08.05.12;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.07.19.12.42;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2009.08.31.22.48.17;	author ckuethe;	state Exp;
branches;
next	1.15;

1.15
date	2009.07.18.19.23.55;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2008.10.13.19.44.37;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2008.10.13.14.22.56;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2008.08.21.19.43.27;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2008.08.21.05.20.53;	author ckuethe;	state Exp;
branches;
next	1.10;

1.10
date	2007.10.20.15.50.26;	author ckuethe;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.15.21.02.37;	author simon;	state Exp;
branches;
next	1.8;

1.8
date	2007.07.13.08.53.47;	author aanriot;	state Exp;
branches;
next	1.7;

1.7
date	2007.05.04.09.56.34;	author bernd;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.15.17.39.42;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.25.00.39.41;	author ckuethe;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.23.19.49.23;	author ckuethe;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.20.16.54.25;	author ckuethe;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.09.02.31.30;	author ckuethe;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.30.17.44.57;	author ckuethe;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.30.17.44.57;	author ckuethe;	state Exp;
branches;
next	;


desc
@@


1.30
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.29 2017/04/10 11:46:20 sthen Exp $

COMMENT-main=		GPS waypoint, track, and route conversion tool
COMMENT-tk=		Tk front-end to gpsbabel
COMMENT-qt=		Qt front-end to gpsbabel

VERSION=		1.4.4
DISTNAME=		gpsbabel-${VERSION}
PKGNAME-main=		gpsbabel-${VERSION}
PKGNAME-tk=		gpsbabel-tk-${VERSION}
PKGNAME-qt=		gpsbabel-qt-${VERSION}
CATEGORIES=		geo

REVISION-main=		0
REVISION-tk=		0
REVISION-qt=		0

HOMEPAGE=		http://www.gpsbabel.org/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		http://www.linklevel.net/distfiles/

AUTOCONF_VERSION=	2.61
CONFIGURE_STYLE=	autoconf qmake
CONFIGURE_ARGS+=	--with-zlib=system \
			--with-shapefile=system \
			--with-doc=./babelweb
#CONFIGURE_ENV+=		CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
#			LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
#			WEB=${WRKSRC} 
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib" \
			WEB=${WRKSRC}

MULTI_PACKAGES=		-main -tk -qt

MODULES=		devel/qmake x11/tk x11/qt4
MODQMAKE_PROJECTS =	gui/app.pro
SEPARATE_BUILD=		No

BUILD_DEPENDS=		textproc/docbook-xsl
LIB_DEPENDS-main=	devel/libusb-compat \
			devel/shapelib

cWANTLIB = 		c m pthread
WANTLIB-main += expat shp>=1 usb z ${cWANTLIB}
WANTLIB-tk = 
WANTLIB-qt += ICE QtCore QtGui QtNetwork QtWebKit QtXml SM X11 Xext Xi
WANTLIB-qt += Xinerama Xrender fontconfig freetype ${COMPILER_LIBCXX} ${cWANTLIB}

LIB_DEPENDS-tk=
PKG_ARCH-tk=	*
RUN_DEPENDS-tk=		geo/gpsbabel \
			${MODTK_RUN_DEPENDS}
RUN_DEPENDS-qt=		geo/gpsbabel \
			devel/desktop-file-utils

pre-configure:
	${SUBST_CMD} ${WRKSRC}/guibabel
	@@perl -pi -e 's/gpsbabelfe-bin/guibabel-qt/' \
		${WRKSRC}/gui/gpsbabel.desktop

post-build:
	cd ${WRKBUILD} && make doc
	${MODQMAKE_build}

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/gpsbabel ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKBUILD}/gui/objects/gpsbabelfe-bin \
		${PREFIX}/bin/guibabel-qt
	${INSTALL_SCRIPT} ${WRKSRC}/guibabel ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/gpsbabel
	${INSTALL_DATA} ${WRKSRC}/babelweb/htmldoc-*/*.html \
		${PREFIX}/share/doc/gpsbabel
	${INSTALL_DATA} ${WRKSRC}/README* ${PREFIX}/share/doc/gpsbabel
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/gui/gpsbabel.desktop \
		${PREFIX}/share/applications
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	${INSTALL_DATA} ${WRKSRC}/gui/images/appicon.png \
		${PREFIX}/share/pixmaps/gpsbabel.png

.include <bsd.port.mk>
@


1.29
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/03/26 20:37:35 zhuk Exp $
d51 1
a51 1
WANTLIB-qt += Xinerama Xrender fontconfig freetype ${LIBCXX} ${cWANTLIB}
@


1.28
log
@Zap more lines from qmake-based ports by moving them from
the "MODULES=x11/qtX + CONFIGURE_STYLE=qmake" logic to
the "MODULES=devel/qmake x11/qtX" logic.

Discussed with espie@@ a few weeks ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/03/10 16:07:27 zhuk Exp $
d51 1
a51 1
WANTLIB-qt += Xinerama Xrender fontconfig freetype stdc++ ${cWANTLIB}
@


1.27
log
@Switch to MODQMAKE, no Makefile lines count change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/10/10 02:08:22 brad Exp $
d39 1
a39 1
MODULES=		x11/tk x11/qt4
@


1.26
log
@Remove Chris Kuethe as maintainer. OpenBSD e-mail address bounces and has been
inactive for quite awhile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/03/11 11:07:42 espie Exp $
d26 1
a26 1
CONFIGURE_STYLE=	autoconf
d40 2
d64 1
a64 3
post-configure:
	cd ${WRKSRC}/gui && ${SETENV} ${CONFIGURE_ENV} qmake4 \
		app.pro
d66 2
a67 2
	cd ${WRKSRC} && make doc
	cd ${WRKSRC}/gui && make
d70 2
a71 2
	${INSTALL_PROGRAM} ${WRKSRC}/gpsbabel ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/gui/objects/gpsbabelfe-bin \
@


1.25
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/01/05 06:18:06 sasano Exp $
d14 4
a18 2

MAINTAINER=		Chris Kuethe <ckuethe@@openbsd.org>
@


1.24
log
@update to gpsbabel 1.4.4

- add patch to open serial port with non-blocking mode
  (useful for USB-GPS dongle)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/09/27 17:26:05 ajacoutot Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.23
log
@docbook-xsl already comes with libxslt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/04/15 20:03:16 kirby Exp $
d7 1
a7 1
VERSION=		1.4.3
a9 1
REVISION-main=		0
a11 1
REVISION-qt=		0
@


1.22
log
@Add .desktop file for -qt subpackage
With the help from landry@@, naddy@@ and sthen@@
OK from sthen@@
Maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/02/18 22:04:07 sthen Exp $
d44 1
a44 3
BUILD_DEPENDS=		textproc/libxslt \
			textproc/docbook \
			textproc/docbook-xsl
@


1.21
log
@update to gpsbabel 1.4.3 from Kyrill Bychkov, maintainer timeout ~1month
- support new file formats
- adds new Qt gui
- don't hardcode dependency on Tcl/Tk 8.4 for the Tk gui
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/11/13 13:54:04 ajacoutot Exp $
d10 1
d13 1
d60 2
a61 1
RUN_DEPENDS-qt=		geo/gpsbabel
d65 2
d83 6
@


1.20
log
@Sync dependencies after move from libusb to libusb-compat and fix a
couple of fallouts. Note that these ports are only the ones that used to
have a direct dependency on devel/libusb so there may be some other
hidden ports that may break because of the switch. If that's the case,
no need to start ranting all over but instead tell me which one(s)
break. Thanks.

Note: sysutils/nut hasn't been fixed yet but will be today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/09/16 09:48:10 espie Exp $
d4 2
a5 1
COMMENT-gui=		Tk front-end to gpsbabel
d7 1
a7 1
VERSION=		1.3.6
d10 2
a11 3
PKGNAME-gui=		gpsbabel-gui-${VERSION}
REVISION-main =		0
REVISION-gui =		0
d18 1
a18 1
# GPL
d24 1
a24 3
#MASTER_SITES=		${HOMEPAGE}
MASTER_SITES=		http://comstyle.com/source/ \
			ftp://quatramaran.ens.fr/pub/espie/
d38 1
a38 2
USE_GMAKE=		Yes
MULTI_PACKAGES=		-main -gui
d40 1
a40 2
MODULES=		x11/tk
MODTK_VERSION=		8.4
d48 9
a56 5
WANTLIB-main=		expat m c z usb shp>=1 pthread

LIB_DEPENDS-gui=
PKG_ARCH-gui=	*
RUN_DEPENDS-gui=	geo/gpsbabel \
d58 1
d60 5
d66 2
a67 1
	gmake -C ${WRKSRC} doc
d71 2
@


1.19
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/11/17 08:05:12 espie Exp $
d10 1
d49 1
a49 1
LIB_DEPENDS-main=	devel/libusb \
d52 1
a52 1
WANTLIB-main=		expat m c z usb>=1 shp>=1
@


1.18
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/07 19:12:42 espie Exp $
d10 1
@


1.17
log
@convert WANTLIB on geo/lang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/08/31 22:48:17 ckuethe Exp $
d44 5
a48 5
BUILD_DEPENDS=		::textproc/libxslt \
			::textproc/docbook \
			::textproc/docbook-xsl
LIB_DEPENDS-main=	::devel/libusb \
			::devel/shapelib
d50 1
a50 1
WANTLIB-main=		expat m c z usb.>=1 shp.>=1
d54 1
a54 1
RUN_DEPENDS-gui=	::geo/gpsbabel \
@


1.16
log
@update to gpsbabel 1.3.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/07/18 19:23:55 naddy Exp $
d47 2
a48 2
LIB_DEPENDS-main=	usb.>=1::devel/libusb \
			shp.>=1::devel/shapelib
d50 1
a50 1
WANTLIB-main=		expat m c z
@


1.15
log
@use the tk module; ok ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/10/13 19:44:37 brad Exp $
d6 1
a6 1
VERSION=		1.3.5
d9 1
a9 1
PKGNAME-gui=		gpsbabel-gui-${VERSION}p0
a38 1
NO_REGRESS=		Yes # expects FP conversion to be exact and invertible
d64 1
a64 1
	${INSTALL_DATA} ${WRKSRC}/babelweb/htmldoc-${VERSION}/*.html \
@


1.14
log
@Add another mirror.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/10/13 14:22:56 espie Exp $
d9 1
a9 1
PKGNAME-gui=		gpsbabel-gui-${VERSION}
d42 3
d56 1
a56 1
			:tk-8.4.*:x11/tk/8.4
@


1.13
log
@fix fetch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/08/21 19:43:27 naddy Exp $
d23 2
a24 1
MASTER_SITES =		ftp://quatramaran.ens.fr/pub/espie/
@


1.12
log
@we need a master site
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/08/21 05:20:53 ckuethe Exp $
d22 2
a23 1
MASTER_SITES=		${HOMEPAGE}
a52 5

do-fetch:
	@@test -f ${FULLDISTDIR}/${DISTNAME}.tar.gz || \
	${FETCH_CMD} -o ${FULLDISTDIR}/${DISTNAME}.tar.gz \
	    ${HOMEPAGE}/plan9.php?dl=gpsbabel-1.3.5.tar.gz
@


1.11
log
@update to gpsbabel-1.3.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/10/20 15:50:26 ckuethe Exp $
d22 1
a22 1
#MASTER_SITES=		${HOMEPAGE}
@


1.10
log
@Update to GPSBabel 1.3.4. Adjust to new libexpat location
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/15 21:02:37 simon Exp $
d6 1
a6 1
VERSION=		1.3.4
d22 1
a22 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=gpsbabel/}
d34 1
a34 1
			WEB=${WRKSRC} 
d52 5
@


1.9
log
@remove surrounding quotes from COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/07/13 08:53:47 aanriot Exp $
d6 1
a6 1
VERSION=		1.3.2
d8 2
a9 2
PKGNAME-main=		gpsbabel-${VERSION}p2
PKGNAME-gui=		gpsbabel-gui-${VERSION}p1
d24 1
a24 1
AUTOCONF_VERSION=	2.59
d29 5
a33 2
CONFIGURE_ENV+=		CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
			LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
a36 1
USE_X11=		Yes
@


1.8
log
@USE_X11 = Yes

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/05/04 09:56:34 bernd Exp $
d3 2
a4 2
COMMENT-main=		"GPS waypoint, track, and route conversion tool"
COMMENT-gui=		"Tk front-end to gpsbabel"
@


1.7
log
@Use xenocara expat.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/12/15 17:39:42 sturm Exp $
d34 1
@


1.6
log
@BUILD_DEPENDS is not SUBPACKAGE-aware
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/11/25 00:39:41 ckuethe Exp $
d8 2
a9 2
PKGNAME-main=		gpsbabel-${VERSION}p1
PKGNAME-gui=		gpsbabel-gui-${VERSION}p0
d29 2
a30 2
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib" \
d40 1
a40 2
LIB_DEPENDS-main=	expat.>=4::textproc/expat \
			usb.>=1::devel/libusb \
d43 1
a43 1
WANTLIB-main=		m c z
@


1.5
log
@Fix a crash in the kml converter. Tested on amd64, i386, sparc64 and zaurus.
A similar fix was applied to gpsbabel cvs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/11/23 19:49:23 ckuethe Exp $
d37 1
a37 1
BUILD_DEPENDS-main=	::textproc/libxslt \
@


1.4
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/20 16:54:25 ckuethe Exp $
d8 1
a8 1
PKGNAME-main=		gpsbabel-${VERSION}p0
@


1.3
log
@Catch up with recent changes to ports infrastructure.
ok espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/11/09 02:31:30 ckuethe Exp $
d3 1
a3 1
COMMENT=		"GPS waypoint, track, and route conversion tool"
d8 2
a9 1
PKGNAME-gui=		gpsbabel-gui-${VERSION}
d35 3
a37 1
BUILD_DEPENDS=		::textproc/libxslt \
d40 1
a40 1
LIB_DEPENDS=		expat.>=4::textproc/expat \
d44 1
a44 3
MULTI_PACKAGES=		-gui

SUBPACKAGE?=
d46 4
a49 10
.if defined(PACKAGING)
. if empty(SUBPACKAGE)
WANTLIB=		m c z
. elif ${SUBPACKAGE} == "-gui"
LIB_DEPENDS=
PKG_ARCH=	*
RUN_DEPENDS=	::geo/gpsbabel \
		:tk-8.4.*:x11/tk/8.4
. endif
.endif
@


1.2
log
@trivial version bump. a number of patches have been accepted upstream.
ok naddy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/10/30 17:44:57 ckuethe Exp $
d34 1
a34 1
BUILD_DEPENDS=		xsltproc::textproc/libxslt \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
VERSION=		1.3.1
d25 3
a27 1
CONFIGURE_ARGS+=	--with-zlib=system --with-shapefile=system
@


1.1.1.1
log
@GPSBabel - gps data format translator
@
text
@@
