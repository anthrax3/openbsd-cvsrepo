head	1.57;
access;
symbols
	OPENBSD_6_1:1.55.0.2
	OPENBSD_6_1_BASE:1.55
	OPENBSD_6_0:1.49.0.2
	OPENBSD_6_0_BASE:1.49
	OPENBSD_5_9:1.43.0.2
	OPENBSD_5_9_BASE:1.43
	OPENBSD_5_8:1.39.0.4
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.35.0.2
	OPENBSD_5_7_BASE:1.35
	OPENBSD_5_6:1.32.0.2
	OPENBSD_5_6_BASE:1.32
	OPENBSD_5_5:1.29.0.2
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.21.0.4
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.19.0.2
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.8.0.4
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	pvalchev_20090209:1.1.1.1
	pvalchev:1.1.1;
locks; strict;
comment	@# @;


1.57
date	2017.05.19.09.19.48;	author landry;	state Exp;
branches;
next	1.56;
commitid	JtTvAUMlejehmeSb;

1.56
date	2017.04.10.11.46.20;	author sthen;	state Exp;
branches;
next	1.55;
commitid	BLsh88fJB8thZTwY;

1.55
date	2017.02.07.08.16.45;	author landry;	state Exp;
branches;
next	1.54;
commitid	WYAfzZTHlYeotSz9;

1.54
date	2017.02.06.20.20.23;	author sthen;	state Exp;
branches;
next	1.53;
commitid	5y3PZ7bZF4hgO1nQ;

1.53
date	2016.11.04.11.35.19;	author sthen;	state Exp;
branches;
next	1.52;
commitid	Gg5LRcnQlqj5M3F7;

1.52
date	2016.10.31.15.44.35;	author landry;	state Exp;
branches;
next	1.51;
commitid	fWvw2ExHTeHZm9xr;

1.51
date	2016.09.23.09.16.54;	author sthen;	state Exp;
branches;
next	1.50;
commitid	XLnI6AbHAmyVU5mO;

1.50
date	2016.08.01.08.56.40;	author landry;	state Exp;
branches;
next	1.49;
commitid	0yjrBAR731pufQMo;

1.49
date	2016.05.28.09.10.55;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	G0OAd2b8swEbN6BC;

1.48
date	2016.05.25.20.53.45;	author landry;	state Exp;
branches;
next	1.47;
commitid	PYU8tBKyAgx18v2Q;

1.47
date	2016.05.15.12.29.20;	author landry;	state Exp;
branches;
next	1.46;
commitid	5FHXMTUTXBRKElnr;

1.46
date	2016.05.15.12.18.26;	author landry;	state Exp;
branches;
next	1.45;
commitid	7XFhX0bbCeuGRktq;

1.45
date	2016.03.20.15.58.26;	author naddy;	state Exp;
branches;
next	1.44;
commitid	kD9ZPBluLnwfHdUE;

1.44
date	2016.03.11.20.28.25;	author naddy;	state Exp;
branches;
next	1.43;
commitid	UYLP8TE6V7RS2GhJ;

1.43
date	2016.02.07.12.28.28;	author landry;	state Exp;
branches;
next	1.42;
commitid	pjMLvP4CjY0emLGq;

1.42
date	2015.10.30.12.47.39;	author sthen;	state Exp;
branches;
next	1.41;
commitid	IIzCiS5xiW9Dmxlk;

1.41
date	2015.09.29.10.52.12;	author sthen;	state Exp;
branches;
next	1.40;
commitid	xbfDwwa9BDEzVq2B;

1.40
date	2015.09.25.08.19.21;	author landry;	state Exp;
branches;
next	1.39;
commitid	BArimEfD8T1s30iE;

1.39
date	2015.07.30.18.15.11;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	Bv4l2f7XK6mCZ2hs;

1.38
date	2015.07.22.19.32.51;	author landry;	state Exp;
branches;
next	1.37;
commitid	e2xuKOBPsLkDGY92;

1.37
date	2015.07.20.14.45.37;	author landry;	state Exp;
branches;
next	1.36;
commitid	2faqHKwbQp3TytXk;

1.36
date	2015.06.27.06.55.38;	author landry;	state Exp;
branches;
next	1.35;
commitid	Fhg6UPsySZMKnXE1;

1.35
date	2015.02.17.21.47.43;	author landry;	state Exp;
branches;
next	1.34;
commitid	KvdYclPsGxiVJOy8;

1.34
date	2014.11.29.13.25.46;	author sthen;	state Exp;
branches;
next	1.33;
commitid	u5mPrK7cnTCAemb5;

1.33
date	2014.10.20.10.56.59;	author landry;	state Exp;
branches;
next	1.32;
commitid	d1bwAH7s10LW1t46;

1.32
date	2014.06.14.10.34.44;	author sthen;	state Exp;
branches;
next	1.31;
commitid	HiKZ10xJk2o55vyF;

1.31
date	2014.05.04.20.17.35;	author landry;	state Exp;
branches;
next	1.30;

1.30
date	2014.04.21.15.20.06;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2013.10.30.15.22.33;	author landry;	state Exp;
branches;
next	1.28;

1.28
date	2013.09.25.07.56.57;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2013.06.04.18.41.46;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2013.05.31.15.00.08;	author landry;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.21.08.45.17;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.03.11.11.07.42;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2012.10.18.07.09.29;	author landry;	state Exp;
branches;
next	1.22;

1.22
date	2012.08.23.13.52.39;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2011.12.28.21.14.04;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2011.09.16.09.48.10;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2011.07.01.08.04.57;	author landry;	state Exp;
branches;
next	1.18;

1.18
date	2011.06.22.13.07.32;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2011.06.22.12.53.12;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2011.06.08.17.35.13;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.21.09.37.40;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.17.08.05.12;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.07.19.12.42;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.09.24.15.29.22;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.09.01.10.13.49;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2010.08.30.17.11.35;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2009.07.19.12.01.58;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.26.11.01.04;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.01.10.46.48;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2009.03.14.12.52.14;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.14.11.05.50;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.13.08.56.52;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.12.20.55.09;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.09.23.07.05;	author pvalchev;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.09.23.07.05;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.57
log
@Update to GDAL 2.2.0.

See http://www.osgeo.org/node/1789.
@
text
@# $OpenBSD: Makefile,v 1.56 2017/04/10 11:46:20 sthen Exp $

COMMENT-main =	translator library for geospatial data formats
COMMENT-python =python bindings and utilities for GDAL
COMMENT-perl =	perl bindings for GDAL

V =		2.2.0
DISTNAME =	gdal-${V}
DISTFILES =	${DISTNAME}${EXTRACT_SUFX} \
		gdalautotest-${V}${EXTRACT_SUFX}

PKGNAME-main =	${DISTNAME}
PKGNAME-python =py-${DISTNAME}
PKGNAME-perl =	p5-Geo-GDAL-${V}

SHARED_LIBS =	gdal 29.0 #22.0
CATEGORIES =	geo devel

HOMEPAGE =	http://www.gdal.org/

MAINTAINER =	Landry Breuil <landry@@openbsd.org>

# MIT/X
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES =	http://download.osgeo.org/gdal/${V}/

MODULES =	perl lang/python devel/gettext

MULTI_PACKAGES =	-main -python -perl

LIB_DEPENDS-main =	${LIB_DEPENDS} \
			databases/sqlite3 \
			graphics/tiff \
			net/curl \
			math/qhull \
			databases/postgresql \
			geo/geos \
			geo/spatialite/libspatialite \
			devel/json-c \
			graphics/png \
			graphics/giflib \
			graphics/libwebp \
			graphics/jpeg \
			graphics/jasper \
			graphics/openjp2 \
			devel/pcre \
			devel/proj \
			devel/geotiff

WANTLIB-main =		${WANTLIB} c expat m ${LIBCXX} z tiff openjp2 ssl crypto qhull \
			curl pq geos geos_c png gif jpeg jasper json-c geotiff \
			proj pthread freexl pcre spatialite sqlite3 xml2 lzma nghttp2 webp


LIB_DEPENDS-python =	${PKGNAME}:${BASE_PKGPATH},-main
WANTLIB-python =	${MODPY_WANTLIB} gdal m pthread ${LIBCXX}

LIB_DEPENDS-perl =	${PKGNAME}:${BASE_PKGPATH},-main
WANTLIB-perl =		perl gdal # uses perl ABI
WANTLIB-perl += c crypto curl expat freexl geos_c geotiff gif iconv
WANTLIB-perl += jasper jpeg json-c lzma m nghttp2 openjp2 pcre png
WANTLIB-perl += pq pthread qhull spatialite sqlite3 ssl tiff xml2 webp z


RUN_DEPENDS +=		math/py-numpy
BUILD_DEPENDS +=	${RUN_DEPENDS} devel/swig

TEST_DEPENDS +=		${PKGNAME-python}:${BASE_PKGPATH},-python
TEST_ENV =		GDAL_DOWNLOAD_TEST_DATA=1 GDAL_RUN_SLOW_TESTS=yes

MODPY_SETUPTOOLS =	Yes
MODPY_EGG_VERSION =	${V}
MODPY_ADJ_FILES =	swig/python/scripts/*.py

MAKE_FILE =	GNUmakefile
MAKE_FLAGS =	LIBTOOL_FINISH=:
USE_GMAKE =	Yes
CONFIGURE_STYLE =	gnu
CONFIGURE_ENV =	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -pthread"
INSTALL_TARGET =	install install-man

CONFIGURE_ARGS =--without-hdf5 \
		--without-cfitsio \
		--without-netcdf \
		--without-xerces \
		--without-mysql \
		--without-odbc \
		--without-oci \
		--without-grass \
		--without-idb \
		--without-sde \
		--without-libgrass \
		--without-php \
		--without-ruby \
		--with-pg=${LOCALBASE}/bin/pg_config \
		--with-python \
		--with-perl \
		--with-geos \
		--with-gnm \
		--with-freexl=${LOCALBASE} \
		--with-spatialite=${LOCALBASE} \
		--with-png=${LOCALBASE} \
		--with-geotiff=${LOCALBASE} \
		--with-libtiff=${LOCALBASE} \
		--with-curl=${LOCALBASE} \
		--with-gif=${LOCALBASE} \
		--with-jpeg=${LOCALBASE} \
		--with-libjson-c=${LOCALBASE} \
		--with-jasper=${LOCALBASE}

post-extract:
	ln -sf ${WRKDIR}/gdalautotest-${V} ${WRKSRC}/autotest

do-test:
	cd ${WRKSRC}/autotest && env ${TEST_ENV} ${MODPY_BIN} run_all.py

.include <bsd.port.mk>
@


1.56
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2017/02/07 08:16:45 landry Exp $
d7 1
a7 1
V =		2.1.3
d16 1
a16 1
SHARED_LIBS =	gdal 28.0 #21.3
d43 1
d53 1
a53 1
			proj pthread freexl pcre spatialite sqlite3 xml2 lzma nghttp2
d61 4
@


1.55
log
@Update to gdal 2.1.3.

See https://trac.osgeo.org/gdal/wiki/Release/2.1.3-News
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2017/02/06 20:20:23 sthen Exp $
d50 1
a50 1
WANTLIB-main =		${WANTLIB} c expat m stdc++ z tiff openjp2 ssl crypto qhull \
d56 1
a56 1
WANTLIB-python =	${MODPY_WANTLIB} gdal m pthread stdc++
@


1.54
log
@Add perl to WANTLIB, first batch. This used to be done automatically but
since SHARED_ONLY support was removed across the ports tree the perl module
no longer adds it, so it must be done manually for any perl ports that
provide perl shared-library modules (i.e. libdata/perl5/site_perl/$ARCH/*.so)
and you must not remove them from WANTLIB even if they show as "Extra".
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/11/04 11:35:19 sthen Exp $
d7 1
a7 1
V =		2.1.2
a14 2
REVISION-main =	0
REVISION-perl =	0
d16 1
a16 1
SHARED_LIBS =	gdal 27.0 #21.2
@


1.53
log
@sync WANTLIB (and in one case, add gettext to LIB_DEPENDS) in dependent ports
now that internationalised domain name support has been removed from net/curl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/10/31 15:44:35 landry Exp $
d16 1
d61 1
a61 1
WANTLIB-perl =		gdal
@


1.52
log
@Bugfix update to gdal 2.1.2.

See for details: https://trac.osgeo.org/gdal/wiki/Release/2.1.2-News
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/09/23 09:16:54 sthen Exp $
d15 1
a40 1
			devel/libidn \
d52 1
a52 1
			curl pq geos geos_c idn png gif jpeg jasper json-c geotiff \
@


1.51
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2016/08/01 08:56:40 landry Exp $
d7 1
a7 1
V =		2.1.1
a14 1
REVISION-main =	0
d16 1
a16 1
SHARED_LIBS =	gdal 26.0 #21.1
@


1.50
log
@Bugfix update to gdal 2.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/05/28 09:10:55 ajacoutot Exp $
d15 1
d34 1
@


1.49
log
@Bump to unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/05/25 20:53:45 landry Exp $
d7 1
a7 1
V =		2.1.0
d16 1
a16 3
REVISION-main =	0

SHARED_LIBS =	gdal 25.0 #21.0
a109 3

post-install:
	rm ${PREFIX}/man/man1/_home_rouault_dist_wrk_gdal_apps_.1
@


1.48
log
@Add explicit dependency on math/qhull, since it was detected at build
time if found (and failed to build), or the bundled version was used
otherwise..

Reported by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/05/15 12:29:20 landry Exp $
d15 2
@


1.47
log
@Add gdalautotest tarball to DISTFILES, and hook up the test suite in
do-test. Explicitely enable slow and "fetching data over the network"
tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/05/15 12:18:26 landry Exp $
d35 1
d50 1
a50 1
WANTLIB-main =		${WANTLIB} c expat m stdc++ z tiff openjp2 ssl crypto \
@


1.46
log
@Update to gdal 2.1.0.

see http://trac.osgeo.org/gdal/wiki/Release/2.1.0-News for details.
enable support for Geographical networks, see
https://trac.osgeo.org/gdal/wiki/rfc48_geographical_networks_support

tested in a bulk build by ajacoutot@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/03/20 15:58:26 naddy Exp $
d9 2
d63 3
a72 1
NO_TEST =	Yes
d107 3
d112 3
@


1.45
log
@remove SHARED_ONLY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2016/03/11 20:28:25 naddy Exp $
d7 1
a7 1
V =		2.0.2
d14 1
a14 1
SHARED_LIBS =	gdal 24.0 #20.2
d49 1
a49 1
			perl proj pthread freexl pcre spatialite sqlite3 xml2 lzma nghttp2
d56 1
a56 4
WANTLIB-perl =		gdal crypto curl expat geos_c geotiff gif idn \
			jasper jpeg openjp2 m png pq ssl tiff z pthread \
			json-c freexl pcre spatialite sqlite3 xml2 \
			nghttp2 ${MODGETTEXT_WANTLIB}
d91 1
a101 4

post-build:
	# fix manpages doubled .TH lines/sections, http://trac.osgeo.org/gdal/ticket/6048
	sed -i -e '2,5d' ${WRKSRC}/man/man1/*.1
@


1.44
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2016/02/07 12:28:28 landry Exp $
a8 1
SHARED_ONLY =	Yes
d49 1
a49 1
			proj pthread freexl pcre spatialite sqlite3 xml2 lzma nghttp2
@


1.43
log
@Bugfix update to GDAL 2.0.2.

See https://trac.osgeo.org/gdal/wiki/Release/2.0.2-News for details.
Bump major as two function signatures changed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/10/30 12:47:39 sthen Exp $
d78 1
a78 2
CONFIGURE_ARGS =${CONFIGURE_SHARED} \
		--without-hdf5 \
@


1.42
log
@sync WANTLIB (curl+nghttp2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/09/29 10:52:12 sthen Exp $
d7 1
a7 1
V =		2.0.1
a13 3
REVISION-main =	0
REVISION-perl =	0
REVISION-python =	0
d15 1
a15 1
SHARED_LIBS =	gdal 23.0 #20.0
d110 3
@


1.41
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/09/25 08:19:21 landry Exp $
d14 2
d53 1
a53 1
			proj pthread freexl pcre spatialite sqlite3 xml2 lzma
d63 1
a63 1
			${MODGETTEXT_WANTLIB}
@


1.40
log
@Update to gdal 2.0.1.

See https://trac.osgeo.org/gdal/wiki/Release/2.0.1-News
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/07/30 18:15:11 ajacoutot Exp $
d14 1
@


1.39
log
@Explicitely pass --without-hdf5 otherwise libhdf5 gets picked up if installed.
I'll leave it to maintainer whether we want hdf5 or not but I am committing
this now because we are approaching lock.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/07/22 19:32:51 landry Exp $
d7 1
a7 1
V =		2.0.0
a13 2
REVISION-main =	1
REVISION-python =	1
@


1.38
log
@Remove the duplicated .TH section using sed -i. Reported upstream as
http://trac.osgeo.org/gdal/ticket/6048. With hints from schwarze@@ &
bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2015/07/20 14:45:37 landry Exp $
d80 2
a81 1
CONFIGURE_ARGS =	${CONFIGURE_SHARED} \
@


1.37
log
@Install the damn manpages provided in the tarball, with a hint from
upstream.. there's some rendering issues with .TH but at least it's
better than no manpage for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/06/27 06:55:38 landry Exp $
d14 2
a15 2
REVISION-main =	0
REVISION-python =	0
d107 4
@


1.36
log
@Update to gdal 2.0.0.

See http://www.osgeo.org/node/1591 for changes.

tested in a bulk by ajacoutot@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/02/17 21:47:43 landry Exp $
d14 2
d78 1
@


1.35
log
@Bugfix update to gdal 1.11.2.

See http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
Do a better job at detecting the correct version of openjpeg 2..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/11/29 13:25:46 sthen Exp $
d7 1
a7 1
V =		1.11.2
d15 1
a15 1
SHARED_LIBS =	gdal 22.0 #19.1
@


1.34
log
@handle api change in openjp2, simplified version of a diff committed upstream
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/10/20 10:56:59 landry Exp $
d7 1
a7 1
V =		1.11.1
a8 1
REVISION-main =	0
d50 1
a50 1
			proj pthread freexl pcre spatialite sqlite3 xml2
@


1.33
log
@Bugfix update to gdal 1.11.1.

Remove patches from http://trac.osgeo.org/gdal/ticket/5449, merged.
See http://trac.osgeo.org/gdal/wiki/Release/1.11.1-News for changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/06/14 10:34:44 sthen Exp $
d9 1
@


1.32
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/05/04 20:17:35 landry Exp $
d7 1
a7 1
V =		1.11.0
a13 1
REVISION-perl =	0
d15 1
a15 1
SHARED_LIBS =	gdal 21.0 #19.0
@


1.31
log
@Update to gdal 1.11.0.

Add dependency on system json-c, and add a bunch of patches to cope with
json-c 0.12 API change (upstream r27267 / bug #5449)

See http://trac.osgeo.org/gdal/wiki/Release/1.11.0-News for details.
Now installs a gdal.pc file for easier detection.

went in a bulk build without fallout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/04/21 15:20:06 ajacoutot Exp $
d14 1
@


1.30
log
@Guessing wantlib regen since these don't build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/10/30 15:22:33 landry Exp $
d7 1
a7 1
V =		1.10.0
a8 2
REVISION-main =	2
REVISION-perl =	0
d15 1
a15 1
SHARED_LIBS =	gdal 20.0 #18.0
d38 1
d48 2
a49 2
WANTLIB-main =		${WANTLIB} c expat m stdc++ z tiff openjp2 \
			curl pq geos geos_c idn png gif jpeg jasper geotiff \
d59 1
a59 1
			freexl pcre spatialite xml2 \
d102 1
@


1.29
log
@Enable the JP2OpenJPEG driver using the newly imported graphics/openjp2
port. See http://www.gdal.org/frmt_jp2openjpeg.html for features and
differences with the jasper-based driver (mainly, being able to use
GeoJP2 support without needing a hacked up jasper library).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/09/25 07:56:57 sthen Exp $
d9 1
a9 1
REVISION-main =	1
d49 1
a49 1
WANTLIB-main =		${WANTLIB} c crypto expat m ssl stdc++ z tiff \
d51 1
a51 2
			asn1 heimbase krb5 openjp2 roken wind \
			com_err proj pthread freexl pcre spatialite sqlite3 xml2
@


1.28
log
@libungif->giflib and patch where necessary, ok jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/06/04 18:41:46 naddy Exp $
d9 2
a10 1
REVISION-main =	0
d44 1
d51 1
d60 1
a60 1
			jasper jpeg m png pq ssl tiff z pthread \
@


1.27
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/05/31 15:00:08 landry Exp $
d9 1
d40 1
a40 1
			graphics/libungif \
@


1.26
log
@Update to gdal 1.10.0.

Enable spatialite & freexl support.
See http://trac.osgeo.org/gdal/wiki/Release/1.10.0-News for details.

Went in a bulk build without issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/03/21 08:45:17 ajacoutot Exp $
d72 1
a72 2
CONFIGURE_ENV =	CPPFLAGS="-I${LOCALBASE}/include \
			  -I${LOCALBASE}/include/libpng" \
@


1.25
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/03/11 11:07:42 espie Exp $
d7 1
a7 1
V =		1.9.2
d15 1
a15 1
SHARED_LIBS =	gdal 19.0 #17.1
d25 1
a25 1
MASTER_SITES =	http://download.osgeo.org/gdal/
d36 1
d42 2
d48 2
a49 1
			com_err proj pthread
d57 1
a80 1
		--without-sqlite3 \
d93 2
a101 3

pre-configure:
	${SUBST_CMD} ${WRKSRC}/configure
@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/10/18 07:09:29 landry Exp $
a64 1
USE_LIBTOOL =	Yes
@


1.23
log
@Update to gdal 1.9.2.

Tested in an amd64 bulk build and on sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/08/23 13:52:39 sthen Exp $
a23 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d66 1
a66 1
NO_REGRESS =	Yes
@


1.22
log
@missing wantlib/modules; p5-* thingys which are *not* just WANTLIB+=c.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/12/28 21:14:04 landry Exp $
d7 1
a7 1
V =		1.8.1
d9 1
a13 1
REVISION-perl = 0
d15 1
a15 1
SHARED_LIBS =	gdal 18.0 #16.1
d51 1
a51 1
WANTLIB-python =	${MODPY_WANTLIB} gdal m stdc++
d54 1
a54 1
WANTLIB-perl =		c gdal crypto curl expat geos_c geotiff gif idn \
@


1.21
log
@Bugfix update to gdal 1.8.1.
See http://trac.osgeo.org/gdal/wiki/Release/1.8.1-News.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/09/16 09:48:10 espie Exp $
d13 1
d54 3
a56 2
WANTLIB-perl =		gdal crypto curl expat geos_c geotiff gif idn \
			jasper jpeg m png pq ssl tiff z pthread
@


1.20
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/07/01 08:04:57 landry Exp $
d7 1
a7 1
V =		1.8.0
a12 2
REVISION-main =	1
REVISION-python =	1
d14 1
a14 1
SHARED_LIBS =	gdal 17.0
d67 1
@


1.19
log
@Move some .py from -main to the -python subpackage, add @@conflict marker
to ease updates, use MODPY_ADJ_FILES on the python scripts, and bump
corresponding REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/06/22 13:07:32 landry Exp $
d13 2
a14 2
REVISION-main =	0
REVISION-python =	0
@


1.18
log
@Spacing/tabs/reordering. My eyes feels better.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/06/22 12:53:12 landry Exp $
d13 2
d63 1
@


1.17
log
@Update to gdal 1.8.0, loosely based on a diff from wen heping..

Remove REVISION, bump major, remove NO_REGRESS, enable thread support,
change my mail adress while here.
Tested on amd64 with qgis, mapserver and qlandkartegt, built fine on
sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/06/08 17:35:13 jasper Exp $
d3 3
a5 3
COMMENT-main=	translator library for geospatial data formats
COMMENT-python=	python bindings and utilities for GDAL
COMMENT-perl=	perl bindings for GDAL
d7 2
a8 2
V=		1.8.0
DISTNAME=	gdal-${V}
d10 3
a12 3
PKGNAME-main=	${DISTNAME}
PKGNAME-python=	py-${DISTNAME}
PKGNAME-perl=   p5-Geo-GDAL-${V}
d14 2
a15 2
SHARED_LIBS=	gdal 17.0
CATEGORIES=	geo devel
d31 1
a31 4
WANTLIB-main =	${WANTLIB} c crypto expat m ssl stdc++ z
WANTLIB-perl =	crypto curl expat geos_c geotiff gif idn jasper jpeg m \
		png pq ssl tiff z pthread
WANTLIB-python =	${MODPY_WANTLIB} m stdc++
d34 34
a67 32
		graphics/tiff \
		net/curl \
		databases/postgresql \
		geo/geos \
		devel/libidn \
		graphics/png \
		graphics/libungif \
		graphics/jpeg \
		graphics/jasper \
		devel/geotiff
WANTLIB-main +=	tiff curl pq geos geos_c idn png gif jpeg jasper geotiff \
		com_err proj pthread

LIB_DEPENDS-python=	${PKGNAME}:${BASE_PKGPATH},-main
WANTLIB-python +=	gdal
LIB_DEPENDS-perl=	${PKGNAME}:${BASE_PKGPATH},-main
WANTLIB-perl +=		gdal

RUN_DEPENDS+=	math/py-numpy
BUILD_DEPENDS+=	${RUN_DEPENDS} devel/swig

MULTI_PACKAGES=	-main -python -perl

MODPY_SETUPTOOLS=Yes
MODPY_EGG_VERSION=${V}

MAKE_FILE=	GNUmakefile
MAKE_FLAGS=	LIBTOOL_FINISH=:
USE_GMAKE=	Yes
USE_LIBTOOL=	Yes
CONFIGURE_STYLE= gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include \
d71 1
a71 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
@


1.16
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/21 09:37:40 landry Exp $
d7 1
a7 1
V=		1.7.3
d14 1
a14 5
REVISION-main=	0
REVISION-python=0
REVISION-perl=	0

SHARED_LIBS=	gdal 16.0
d19 1
a19 1
MAINTAINER =	Landry Breuil <gaston@@gcu.info>
d33 2
a34 2
		png pq ssl tiff z
WANTLIB-python =	m stdc++
a62 1
NO_REGRESS=	Yes
a85 1
		--without-threads \
d92 1
@


1.15
log
@Update to gdal 1.7.3:
- bump major
- fix WANTLIBs after proj update
- clean CONFIGURE_ARGS, remove unknown flags and precise png/geotiff dir
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/17 08:05:12 espie Exp $
d13 4
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/07 19:12:42 espie Exp $
d7 1
a7 1
V=		1.6.1
a11 3
REVISION-main = 1
REVISION-perl = 1
REVISION-python = 1
d14 1
a14 1
SHARED_LIBS=	gdal 15.0
d33 2
a34 2
		perl png pq ssl tiff z
WANTLIB-python =
d47 2
a48 1
WANTLIB-main +=	tiff curl pq geos geos_c idn png gif jpeg jasper geotiff
d71 1
a71 1
		LDFLAGS="-L${LOCALBASE}/lib"
a86 1
		--without-ogpython \
a87 2
		--with-png-inc="${LOCALBASE}/include/libpng" \
		--with-png-lib="${LOCALBASE}/lib" \
d92 2
a94 1
		--with-tiff=${LOCALBASE} \
@


1.13
log
@convert WANTLIB on geo/lang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/06 16:07:00 espie Exp $
d40 10
a49 10
		::graphics/tiff \
		::net/curl \
		:postgresql-client-*:databases/postgresql \
		::geo/geos \
		::devel/libidn \
		::graphics/png \
		::graphics/libungif \
		::graphics/jpeg \
		::graphics/jasper \
		::devel/geotiff
d52 1
a52 1
LIB_DEPENDS-python=	:${PKGNAME}:${BASE_PKGPATH},-main
d54 1
a54 1
LIB_DEPENDS-perl=	:${PKGNAME}:${BASE_PKGPATH},-main
d57 2
a58 2
RUN_DEPENDS+=	::math/py-numpy
BUILD_DEPENDS+=	${RUN_DEPENDS} ::devel/swig
@


1.12
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/09/24 15:29:22 sthen Exp $
d40 16
a55 13
		tiff::graphics/tiff \
		curl::net/curl \
		pq:postgresql-client-*:databases/postgresql \
		geos,geos_c::geo/geos \
		idn::devel/libidn \
		png::graphics/png \
		gif::graphics/libungif \
		jpeg::graphics/jpeg \
		jasper::graphics/jasper \
		geotiff::devel/geotiff

LIB_DEPENDS-python=	gdal:${PKGNAME}:${BASE_PKGPATH},-main
LIB_DEPENDS-perl=	gdal:${PKGNAME}:${BASE_PKGPATH},-main
@


1.11
log
@bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/09/01 10:13:49 sthen Exp $
d37 1
@


1.10
log
@missing python bumps in subpackages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/08/30 17:11:35 fgsch Exp $
d12 3
a14 3
REVISION-main = 0
REVISION-perl = 0
REVISION-python = 0
d36 1
a36 1
		png pq ssl tiff z
@


1.9
log
@Bump revision after python's default change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/07/19 12:01:58 landry Exp $
d12 2
@


1.8
log
@Update to gdal 1.6.1, fix MODPY_EGG_VERSION while here.
See http://trac.osgeo.org/gdal/wiki/Release/1.6.1-News for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/04/26 11:01:04 ajacoutot Exp $
d12 1
@


1.7
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/04/01 10:46:48 kili Exp $
d7 1
a7 1
V=		1.6.0
d10 3
a12 3
PKGNAME-main=	${DISTNAME}p1
PKGNAME-python=	py-${DISTNAME}p0
PKGNAME-perl=   p5-Geo-GDAL-${V}p0
d14 1
a14 1
SHARED_LIBS=	gdal 14.0
d56 1
a56 1
MODPY_EGG_VERSION=1.6.0
@


1.6
log
@
Add @@pkgpath geo/gdal after package rename and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/03/14 12:52:14 ajacoutot Exp $
d66 1
a66 2
		LDFLAGS="-L${LOCALBASE}/lib" \
		PYTHON=${MODPY_BIN}
@


1.5
log
@- fix wantlib & bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/03/14 11:05:50 landry Exp $
d10 1
a10 1
PKGNAME-main=	${DISTNAME}p0
@


1.4
log
@Enable perl bindings, and split them into a new subpackage.
While here, take maintainership (prodded by pval@@)
Diff from James Wright james2vegas // aim.com (thanks!) via pval@@, plus
some tweaks by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/03/13 08:56:52 landry Exp $
d12 1
a12 1
PKGNAME-perl=   p5-Geo-GDAL-${V}
d32 2
@


1.3
log
@Update to GDAL/OGR 1.6.0 :
- enable python bindings and utilities
- split package into -main and -python
- enable support for WMS/WFS through curl
- enable geos support
- enable postgis support through postgresql-client
(all this is needed by bigger incoming GIS ports)
looks good to pval@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/03/12 20:55:09 sthen Exp $
d5 1
d7 2
a8 1
DISTNAME=	gdal-1.6.0
d10 3
a12 2
PKGNAME-main=	${DISTNAME}
PKGNAME-python=	py-${DISTNAME}
d19 1
a19 1
MAINTAINER =	Peter Valchev <pvalchev@@openbsd.org>
d29 1
a29 1
MODULES =	lang/python devel/gettext
d46 1
d51 1
a51 1
MULTI_PACKAGES=	-main -python
a78 1
		--without-perl \
d87 1
@


1.2
log
@add --without-geos and bump the package; autoconf sucks!
ok pval (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/02/09 23:07:05 pvalchev Exp $
d3 9
a11 4
COMMENT=	translator library for raster geospatial data formats
DISTNAME=	gdal-1.5.3
PKGNAME=	${DISTNAME}p0
SHARED_LIBS=	gdal 13.3
d24 3
a26 1
WANTLIB =	c expat m stdc++ z
d28 1
a28 1
MASTER_SITES =	http://download.osgeo.org/gdal/
d30 6
a35 1
LIB_DEPENDS =	tiff::graphics/tiff \
d42 10
d60 3
a62 1
		LDFLAGS="-L${LOCALBASE}/lib"
a63 1
		--without-curl \
a68 1
		--without-pg \
a70 1
		--without-geos \
a77 1
		--without-python \
d82 4
d90 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
d49 1
@


1.1.1.1
log
@import gdal, translator library for raster geospatial data formats

ok & tweaks/testing from kili@@, thx to sthen@@ for arm testing
@
text
@@
