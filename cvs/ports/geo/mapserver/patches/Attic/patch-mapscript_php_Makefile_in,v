head	1.3;
access;
symbols
	OPENBSD_5_4:1.1.0.10
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2013.12.25.21.55.57;	author landry;	state dead;
branches;
next	1.2;

1.2
date	2013.08.06.19.47.18;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.22.20.16.43;	author landry;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to mapserver 6.4.0.

Upstream switched to cmake, but apparently things still magically work.
Slightly tested the cgi & perl examples.
http://mapserver.org/development/announce/6-4.html#announce-6-4
@
text
@$OpenBSD: patch-mapscript_php_Makefile_in,v 1.2 2013/08/06 19:47:18 landry Exp $
--- mapscript/php/Makefile.in.orig	Sat Apr 20 06:08:49 2013
+++ mapscript/php/Makefile.in	Sat Jul 20 10:10:32 2013
@@@@ -86,7 +86,7 @@@@ MS_STATIC = @@ALL_STATIC_LIB@@
 MS_LIBS =   $(RUNPATHS) @@MS_LIB@@ @@ALL_LIB@@ @@XTRALIBS@@ $(MS_STATIC)
 PHP_EXT_DIR=`$(PHPCONFIG) --extension-dir`
 
-LT_LDFLAGS=-rpath $(PHP_EXT_DIR) -module
+LT_LDFLAGS=-rpath $(PHP_EXT_DIR) -module -avoid-version
 OBJ_SUFFIX=lo
 LINK=$(LTLD) $(LD) $(LT_LDFLAGS)
 MS_LIBS =   ../../libmapserver.la
@@@@ -116,7 +116,7 @@@@ PHPPROJ_OBJS = php_mapscript_util.$(OBJ_SUFFIX) php_pr
 
 
 php_mapscript.la: $(PHPMS_OBJS) ../../libmapserver.la
-	$(LINK) -release $(MS_VERSION) -o $@@ $(PHPMS_OBJS) $(MS_LIBS)
+	$(LINK) -o $@@ $(PHPMS_OBJS) $(MS_LIBS)
 
 php_proj.la:  $(PHPPROJ_OBJS) ../libmapserver.la
 	$(LINK) -release $(MS_VERSION) -o $@@ $(PHPPROJ_OBJS) $(MS_LIBS)
@


1.2
log
@Update to mapserver 6.2.1.

See http://mapserver.org/development/announce/6-2.html for a list of new
features in the 6.2 branch.

- Uses its own local copy of agg (as mapnik..)
- now uses libtool and installs a library. Adapt chroot setups as needed.
- provides an install target, so install perl examples and mapscript.ini
  in post-install.
- dont install php examples, they're badly outdated
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Update to mapserver 6.0.0, loosely based on a diff from wen heping.

- enable cairo & kml output backend, don't enable OpenGL yet.
- remove native tiff support now provided by gdal
- shuffle deps, fix WANTLIB
See http://mapserver.org/development/announce/6-0.html for a list of
goodies.
@
text
@d2 5
a6 3
--- mapscript/php/Makefile.in.orig	Wed Jun 22 21:27:37 2011
+++ mapscript/php/Makefile.in	Wed Jun 22 21:27:48 2011
@@@@ -86,7 +86,7 @@@@ PHPPROJ_OBJS = php_mapscript_util.o php_proj.o $(PHP_R
d8 6
a14 3
 php_mapscript.so: $(PHPMS_OBJS) ../../libmapserver.a
-	$(LD) -o $@@ $(PHPMS_OBJS) $(MS_LIBS)
+	$(LD) -fPIC -o $@@ $(PHPMS_OBJS) $(MS_LIBS)
d16 6
a21 2
 php_proj.so:  $(PHPPROJ_OBJS)
 	$(LD) -o $@@ $(PHPPROJ_OBJS) $(MS_LIBS)
@

