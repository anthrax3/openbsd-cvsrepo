head	1.2;
access;
symbols
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.06.22.20.16.43;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2011.01.11.09.47.55;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to mapserver 6.0.0, loosely based on a diff from wen heping.

- enable cairo & kml output backend, don't enable OpenGL yet.
- remove native tiff support now provided by gdal
- shuffle deps, fix WANTLIB
See http://mapserver.org/development/announce/6-0.html for a list of
goodies.
@
text
@$OpenBSD: patch-mapobject_c,v 1.1 2011/01/11 09:47:55 landry Exp $
http://trac.osgeo.org/mapserver/ticket/3525
--- mapobject.c.orig	Mon Sep 21 08:26:37 2009
+++ mapobject.c	Tue Jan 11 10:01:43 2011
@@@@ -774,10 +774,17 @@@@ int msMapLoadOWSParameters(mapObj *map, cgiRequestObj 
 {
 #ifdef USE_WMS_SVR
     int version;
+    char *wms_exception_format = NULL;
+    int i =0;
 
     version = msOWSParseVersionString(wmtver);
+    for(i=0; i<request->NumParams; i++) 
+    {
+         if (strcasecmp(request->ParamNames[i], "EXCEPTIONS") == 0)
+           wms_exception_format = request->ParamValues[i];
+    }
     return msWMSLoadGetMapParams(map, version, request->ParamNames,
-                                 request->ParamValues, request->NumParams);
+                                 request->ParamValues, request->NumParams,  wms_exception_format);
 #else
     msSetError(MS_WMSERR, "WMS server support is not available.",
                "msMapLoadOWSParameters()");
@


1.1
log
@Add fix for http://trac.osgeo.org/mapserver/ticket/3525.
Don't return invalid when EXCEPTION param is not passed in WMS 1.3.0.
@
text
@d1 1
a1 1
$OpenBSD$
@

