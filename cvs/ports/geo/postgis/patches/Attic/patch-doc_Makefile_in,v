head	1.3;
access;
symbols
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2012.11.24.08.54.34;	author landry;	state dead;
branches;
next	1.2;

1.2
date	2010.11.04.13.45.54;	author eric;	state Exp;
branches;
next	1.1;

1.1
date	2009.08.06.10.30.20;	author eric;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Unbreak by finally updating to postgis 2.0.1, working with postgres 9.2.

- add build dep on ImageMagick/docbook-xsl/libxslt to build the documentation
- dont install the utils anymore, they're not maintained and were barely
  useful. postgis_restore.pl is in share/postgresql/contrib/postgis-2.0 now
- provide a complete do-regress target taking care of creating/starting/tearing
  down a temporary database
- 'CREATE EXTENSION postgis' is now the simpler way to spatially-enabled a db
- add a README explaining how to LD_PRELOAD libpthread.so in postgresql since
  it's required by postgis
- take maintainership from eric@@ since he doesn't use it anymore
- see http://www.postgis.org/news/20120403/ for the list of new features
  in the 2.x branch.
@
text
@$OpenBSD: patch-doc_Makefile_in,v 1.2 2010/11/04 13:45:54 eric Exp $
--- doc/Makefile.in.orig	Sun Sep 19 14:21:28 2010
+++ doc/Makefile.in	Tue Nov  2 17:59:04 2010
@@@@ -41,25 +41,14 @@@@ DBLATEX=@@DBLATEX@@
 IMAGEMAGICK=@@IMAGEMAGICK@@
 
 # Directories for postgresql subdirectories
-PGSQL_DOCDIR=@@PGSQL_DOCDIR@@
-PGSQL_MANDIR=@@PGSQL_MANDIR@@
+PGSQL_DOCDIR=${WRKINST}@@PGSQL_DOCDIR@@
+PGSQL_MANDIR=${WRKINST}@@PGSQL_MANDIR@@
 PGSQL_SHAREDIR=@@PGSQL_SHAREDIR@@
 
+
 # If XSLTPROC or XSLBASE were not found during configure, we cannot
 # build the documentation
-ifeq ($(XSLTPROC),)
-all: requirements_not_met_xsltproc
-else
-ifeq ($(XSLBASE),)
-all: requirements_not_met_xslbase
-else
-ifeq ($(IMAGEMAGICK),)
-all: requirements_not_met_imagemagick
-else
-all: images html/postgis.html postgis_comments.sql
-endif
-endif
-endif
+all:
 
 postgis_aggs_mm.xml: ./xsl/postgis_aggs_mm.xml.xsl postgis.xml
 	$(XSLTPROC) ./xsl/postgis_aggs_mm.xml.xsl postgis.xml > $@@
@@@@ -130,10 +119,13 @@@@ comments-install: comments
 comments-uninstall:
 	make -f Makefile.comments uninstall
 
-install: html/postgis.html man/shp2pgsql.1 man/pgsql2shp.1
+install:
 	@@mkdir -p $(PGSQL_DOCDIR)/postgis
+	@@mkdir -p $(PGSQL_DOCDIR)/postgis/images
 	@@mkdir -p $(PGSQL_MANDIR)/man1
+	cp html/images/* $(PGSQL_DOCDIR)/postgis/images/
 	cp html/postgis.html $(PGSQL_DOCDIR)/postgis/postgis.html
+	cp html/style.css $(PGSQL_DOCDIR)/postgis/style.css
 	cp ../README.postgis $(PGSQL_DOCDIR)/postgis/README.postgis
 	cp man/pgsql2shp.1 $(PGSQL_MANDIR)/man1/pgsql2shp.1
 	cp man/shp2pgsql.1 $(PGSQL_MANDIR)/man1/shp2pgsql.1
@


1.2
log
@- update postgis to 1.5.2
- install documentation properly

NOTE: An upgrade of all postgis DBs is required. A "hard upgrade" is
advised. A "soft upgrade" might be possible by keeping a copy of
/usr/local/lib/postgresql/postgis-1.4.so. In all cases, read the
documentation.

ok landry@@ jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@update to 1.4.0

For upgrading a postgis-enabled db, refer to
/usr/local/share/doc/postgresql/postgis/README.postgis
Try using new_postgis_restore.pl instead of postgis_restore.pl
if it doesn't work.

feedback and ok kili@@ landry@@
@
text
@d2 4
a5 4
--- doc/Makefile.in.orig	Wed Jul  8 17:16:53 2009
+++ doc/Makefile.in	Mon Aug  3 14:07:35 2009
@@@@ -41,8 +41,8 @@@@ DBLATEX = @@DBLATEX@@
 IMAGEMAGICK = @@IMAGEMAGICK@@
d14 1
d16 15
a30 3
@@@@ -77,11 +77,6 @@@@ chunked-html: postgis-out.xml
 		$(CHUNK_HTML_DOCBOOK_XSL) \
 		$<
d32 5
a36 5
-html/postgis.html: postgis-out.xml
-	$(XSLTPROC) $(XSLTPROC_COMMONOPTS) $(XSLTPROC_HTMLOPTS) \
-		--output html/postgis.html \
-		$(HTML_DOCBOOK_XSL) \
-		$<
d38 11
a48 2
 
 postgis-${POSTGIS_MAJOR_VERSION}.${POSTGIS_MINOR_VERSION}.${POSTGIS_MICRO_VERSION}.pdf: postgis-out.xml
@

