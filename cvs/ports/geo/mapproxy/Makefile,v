head	1.8;
access;
symbols
	OPENBSD_6_0:1.7.0.2
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	landry_20140826:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2016.08.30.16.21.25;	author landry;	state Exp;
branches;
next	1.7;
commitid	foTNx9Hcwitaq3K4;

1.7
date	2016.04.13.10.58.49;	author landry;	state Exp;
branches;
next	1.6;
commitid	JMwcLGHf8rlVg0ia;

1.6
date	2015.12.29.19.49.40;	author jasper;	state Exp;
branches;
next	1.5;
commitid	qnWWfNxRwuFA0B7n;

1.5
date	2015.10.31.08.20.42;	author landry;	state Exp;
branches;
next	1.4;
commitid	mGVJJw9avqukg6oV;

1.4
date	2015.09.29.10.52.12;	author sthen;	state Exp;
branches;
next	1.3;
commitid	xbfDwwa9BDEzVq2B;

1.3
date	2015.06.26.07.52.24;	author landry;	state Exp;
branches;
next	1.2;
commitid	raa0Epy6KDWtdZvY;

1.2
date	2015.03.26.12.14.15;	author sthen;	state Exp;
branches;
next	1.1;
commitid	qYDTmzXxLoW0kaEv;

1.1
date	2014.08.26.18.47.04;	author landry;	state Exp;
branches
	1.1.1.1;
next	;
commitid	Iyw1rZqgfYL3PjOh;

1.1.1.1
date	2014.08.26.18.47.04;	author landry;	state Exp;
branches;
next	;
commitid	Iyw1rZqgfYL3PjOh;


desc
@@


1.8
log
@Update to mapproxy 1.9.0.

https://mapproxy.org/blog/new-mapproxy-1.9.0-release/
@
text
@# $OpenBSD: Makefile,v 1.7 2016/04/13 10:58:49 landry Exp $

COMMENT =	GIS WMTS/TMS tile caching server

GH_TAGNAME =	1.9.0
GH_PROJECT =	mapproxy
GH_ACCOUNT =	mapproxy

CATEGORIES =	geo www

HOMEPAGE =	http://www.mapproxy.org/
# apache v2
PERMIT_PACKAGE_CDROM =	Yes

MAINTAINER =	Landry Breuil <landry@@openbsd.org>

MODULES =	lang/python
MODPY_SETUPTOOLS =	Yes
MODPY_ADJ_FILES =	mapproxy/test/system/fixture/cgi.py
SUBST_VARS +=	GH_TAGNAME

# libproj is dlopen'ed by proj.py - otherwise fallbacks to py-proj
RUN_DEPENDS =	devel/proj \
		textproc/py-yaml \
		textproc/py-lxml \
		graphics/py-Pillow>2.4.0

TEST_DEPENDS =	${RUN_DEPENDS} \
		devel/py-nose \
		geo/py-shapely \
		geo/gdal,-python \
		www/py-requests \
		www/py-webtest
# some tests need mocker from https://labix.org/mocker
post-patch:
	# simpler than patching and fixing the patch at each update
	sed -i -e 's#1.8.2a0#${GH_TAGNAME}#' ${WRKSRC}/setup.py

pre-test:
	# can't be fixed by MODPY_ADJ_FILES since this is not on the 1st line
	sed -i -e 's# /usr/bin/env python#${MODPY_BIN}#' \
		${WRKSRC}/mapproxy/test/unit/test_client_cgi.py

.include <bsd.port.mk>
@


1.7
log
@Update to mapproxy 1.8.2.

While here:
* add proj to RUN_DEPENDS (libproj is dlopen'ed on the fly by
  proj.py, and if not found it would fallback to py-proj). Prompted after
a mail by attila
* add py-requests, py-shapely and py-gdal to TEST_DEPENDS
* fix python shebang in tests - now only 5 tests should fail
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/12/29 19:49:40 jasper Exp $
d5 1
a5 1
GH_TAGNAME =	1.8.2
d37 1
a37 1
	sed -i -e 's#${GH_TAGNAME}a0#${GH_TAGNAME}#' ${WRKSRC}/setup.py
@


1.6
log
@DISTNAME is set by bsd.port.mk for these ports now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/10/31 08:20:42 landry Exp $
d5 1
a5 1
GH_TAGNAME =	1.8.1
d19 1
d22 3
a24 1
RUN_DEPENDS =	textproc/py-yaml \
d30 3
d35 8
@


1.5
log
@update to mapproxy 1.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/09/29 10:52:12 sthen Exp $
a7 1
DISTNAME =	${GH_PROJECT}-${GH_TAGNAME}
@


1.4
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/06/26 07:52:24 landry Exp $
d5 1
a5 1
GH_TAGNAME =	1.8.0
a8 1
REVISION =	0
@


1.3
log
@Update to mapproxy 1.8.0.

See http://mapproxy.org/blog/new-mapproxy-1.8.0-release/ and
https://github.com/mapproxy/mapproxy/blob/1.8.0/CHANGES.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/03/26 12:14:15 sthen Exp $
d9 1
@


1.2
log
@REVISION bumps for py-Pillow RDEP change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/08/26 18:47:04 landry Exp $
d5 1
a5 1
GH_TAGNAME =	1.7.1
a8 1
REVISION =	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2014/05/18 09:29:50 landry Exp $
d9 1
@


1.1.1.1
log
@Import mapproxy 1.7.0.

MapProxy is an open source proxy for geospatial data. It caches, accelerates and
transforms data from existing map services and serves any desktop or web GIS
client. It supports WMS-C, TMS and WMTS protocols.

MapProxy is a tile cache, but also offers many new and innovative features like
full support for WMS clients.

ok ajacoutot@@ sthen@@
@
text
@@
