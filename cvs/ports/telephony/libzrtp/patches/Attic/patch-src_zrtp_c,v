head	1.2;
access;
symbols
	OPENBSD_6_1:1.1.0.6
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2017.06.08.14.27.47;	author czarkoff;	state dead;
branches;
next	1.1;
commitid	1yA5t9czENn6idqy;

1.1
date	2015.10.01.20.13.39;	author czarkoff;	state Exp;
branches;
next	;
commitid	7oyTKr6vhm5SUXzT;


desc
@@


1.2
log
@update to libzrtp-0.20170606

In the process:

 * change upstream to https://github.com/juha-h/libzrtp
 * remove patches that are already integrated by upstream
 * avoid hidden dependency on doxygen
@
text
@$OpenBSD: patch-src_zrtp_c,v 1.1 2015/10/01 20:13:39 czarkoff Exp $
--- src/zrtp.c.orig	Wed Sep 30 20:13:58 2015
+++ src/zrtp.c	Wed Sep 30 20:15:23 2015
@@@@ -810,6 +810,7 @@@@ void zrtp_profile_defaults(zrtp_profile_t* profile, zr
 	profile->cipher_types[0]	= ZRTP_CIPHER_AES256;
 	profile->cipher_types[1]	= ZRTP_CIPHER_AES128;
 	profile->auth_tag_lens[0]	= ZRTP_ATL_HS32;
+	profile->auth_tag_lens[1]	= ZRTP_ATL_HS80;
 	profile->hash_schemes[0]	= ZRTP_HASH_SHA256;
 
 	if (zrtp && (ZRTP_LICENSE_MODE_PASSIVE == zrtp->lic_mode)) {
@@@@ -863,6 +864,11 @@@@ zrtp_status_t zrtp_profile_check(const zrtp_profile_t*
      
     if (0 > zrtp_profile_find(profile, ZRTP_CC_ATL, ZRTP_ATL_HS32)) {
         ZRTP_LOG(1, (_ZTU_,"WARNING! can't find '32      ' in profile.\n"));
+        return zrtp_status_fail;
+    }
+
+    if (0 > zrtp_profile_find(profile, ZRTP_CC_ATL, ZRTP_ATL_HS80)) {
+        ZRTP_LOG(1, (_ZTU_,"WARNING! can't find '80      ' in profile.\n"));
         return zrtp_status_fail;
     }
     
@


1.1
log
@Fix for interoperability with Linphone's implementation of ZRTP

From feinerer@@
@
text
@d1 1
a1 1
$OpenBSD$
@

