head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.03.18.21.42.04;	author sthen;	state Exp;
branches;
next	;
commitid	RxgFeqBeHktNBVUd;


desc
@@


1.1
log
@Don't use thread-unsafe getprotobyname(), patch from jira ticket ASTERISK-26759.
Teach some helper scripts about common coredump paths in OpenBSD.
@
text
@$OpenBSD$
--- contrib/scripts/ast_coredumper.orig	Wed Feb 15 09:39:31 2017
+++ contrib/scripts/ast_coredumper	Wed Feb 15 09:46:42 2017
@@@@ -203,7 +203,7 @@@@ declare -a ARGS_COREDUMPS
 
 # For *BSD, the preferred gdb may be in /usr/local/bin so we
 # need to search for one that supports python.
-for g in $(which -a gdb) ; do
+for g in $(which -a egdb; which -a gdb) ; do
 	result=$($g --batch --ex "python print('hello')" 2>/dev/null || : )
 	if [[ "$result" =~ ^hello$ ]] ; then
 		GDB=$g
@@@@ -217,7 +217,7 @@@@ if [ -z "$GDB" ] ; then
 fi
 
 if [ ${#COREDUMPS[@@]} -eq 0 ] ; then
-	COREDUMPS+=(/tmp/core[-._]asterisk!(*.txt) /tmp/core[-._]$(hostname)!(*.txt))
+	COREDUMPS+=(/var/crash/asterisk/*.core /tmp/asterisk.core)
 fi
 
 DATEFORMAT=${DATEFORMAT:-'date +%FT%H-%M-%S%z'}
@
