head	1.47;
access;
symbols
	OPENBSD_6_2:1.47.0.2
	OPENBSD_6_2_BASE:1.47
	OPENBSD_6_1:1.45.0.2
	OPENBSD_6_1_BASE:1.45
	OPENBSD_6_0:1.41.0.2
	OPENBSD_6_0_BASE:1.41
	OPENBSD_5_9:1.40.0.2
	OPENBSD_5_9_BASE:1.40
	OPENBSD_5_8:1.38.0.4
	OPENBSD_5_8_BASE:1.38
	OPENBSD_5_7:1.36.0.4
	OPENBSD_5_7_BASE:1.36
	OPENBSD_5_6:1.36.0.2
	OPENBSD_5_6_BASE:1.36
	OPENBSD_5_5:1.32.0.2
	OPENBSD_5_5_BASE:1.32
	OPENBSD_5_4:1.31.0.2
	OPENBSD_5_4_BASE:1.31
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2;
locks; strict;
comment	@# @;


1.47
date	2017.07.12.19.55.29;	author sthen;	state Exp;
branches;
next	1.46;
commitid	MEAHFhNzvDYzCDPk;

1.46
date	2017.04.07.21.32.20;	author sthen;	state Exp;
branches;
next	1.45;
commitid	nV235s3Hk3XJ0tGS;

1.45
date	2017.02.14.12.31.38;	author sthen;	state Exp;
branches;
next	1.44;
commitid	quKKQrLn1snJOX5r;

1.44
date	2016.11.29.13.57.49;	author sthen;	state Exp;
branches;
next	1.43;
commitid	Gf4sUy4BJIuXDwFE;

1.43
date	2016.11.11.10.55.17;	author sthen;	state Exp;
branches;
next	1.42;
commitid	JHzWucB4VBXAd6MH;

1.42
date	2016.09.02.10.34.59;	author sthen;	state Exp;
branches;
next	1.41;
commitid	RfL2JeKVfoGkzDta;

1.41
date	2016.03.29.23.24.46;	author sthen;	state Exp;
branches;
next	1.40;
commitid	6xsz7ii52z8elbLl;

1.40
date	2015.10.12.22.07.29;	author sthen;	state Exp;
branches
	1.40.2.1;
next	1.39;
commitid	s4D60mgjUjajPmDX;

1.39
date	2015.10.10.19.58.47;	author sthen;	state Exp;
branches;
next	1.38;
commitid	DVU5rjHiL77qkjwC;

1.38
date	2015.06.08.08.44.52;	author sthen;	state Exp;
branches;
next	1.37;
commitid	fpwQjZS08bdnhHwf;

1.37
date	2015.04.02.17.09.30;	author sthen;	state Exp;
branches;
next	1.36;
commitid	pFawx8i9X16VMpMZ;

1.36
date	2014.05.31.00.35.31;	author sthen;	state Exp;
branches
	1.36.4.1;
next	1.35;

1.35
date	2014.05.07.00.38.59;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2014.04.26.11.59.51;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2014.04.21.22.54.50;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2013.12.20.12.37.05;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2013.07.16.13.03.19;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2013.06.20.21.33.53;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2013.06.17.19.31.17;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.28.20.24.53;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2012.12.11.14.46.41;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2012.09.28.00.03.57;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2012.06.07.10.39.25;	author sthen;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2012.05.03.11.25.27;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2012.04.08.22.34.51;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2012.03.23.22.42.25;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2012.03.13.23.17.46;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2012.01.28.08.16.22;	author sthen;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	2011.12.16.14.50.09;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.24.13.47.42;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.09.09.15.29.21;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2011.07.12.19.54.39;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2011.03.02.13.28.24;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.01.19.11.25.16;	author sthen;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2010.11.16.21.58.52;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.19.21.14.05;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.25.10.08.03;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.06.18.22.10.44;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2010.06.02.13.18.56;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2010.04.14.08.23.38;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2010.04.08.16.18.00;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2010.03.25.12.01.47;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2010.01.17.13.18.36;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.12.13.12.11.29;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.11.19.16.17.05;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.05.22.09.05.10;	author sthen;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2009.03.29.22.23.35;	author sthen;	state Exp;
branches;
next	;

1.2.2.1
date	2009.11.23.03.42.45;	author william;	state Exp;
branches;
next	;

1.14.2.1
date	2011.06.03.16.10.21;	author sthen;	state Exp;
branches;
next	;

1.20.2.1
date	2012.04.11.15.12.47;	author sthen;	state Exp;
branches;
next	;

1.25.2.1
date	2013.01.02.22.34.16;	author sthen;	state Exp;
branches;
next	;

1.36.4.1
date	2015.04.02.17.21.01;	author sthen;	state Exp;
branches;
next	;
commitid	77NV89UWaeltDPPP;

1.40.2.1
date	2016.05.06.19.51.59;	author sthen;	state Exp;
branches;
next	;
commitid	MNvllYhiYcbujMNc;


desc
@@


1.47
log
@update to asterisk-13.17.0
@
text
@$OpenBSD: patch-configure_ac,v 1.46 2017/04/07 21:32:20 sthen Exp $

c-client requires both kerbV libs *and* (separately) libssl.

Index: configure.ac
--- configure.ac.orig
+++ configure.ac
@@@@ -60,7 +60,7 @@@@ AC_SUBST([astvarrundir],      ['${localstatedir}/run/a
 
 case "${host_os}" in
      *bsd*)
-     if test ${prefix} = 'NONE'; then
+     if test ${prefix} != 'NONE'; then
         astvarlibdir='${prefix}/share/asterisk'
         astdbdir='${localstatedir}/db/asterisk'
      fi
@@@@ -1938,7 +1938,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
 			)
 		else #looking in imap directory didn't work, try c-client
 			imap_ldflags=""
-			imap_libs="-lc-client"
+			imap_libs="-lcrypto -lssl -lc-client"
 			imap_include="-DUSE_SYSTEM_CCLIENT"
 			CPPFLAGS="${saved_cppflags}"
 			LIBS="${saved_libs}"
@@@@ -2124,7 +2124,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
 
 AST_EXT_LIB_CHECK([NEWT], [newt], [newtBell], [newt.h])
 
-AST_EXT_LIB_CHECK([UNIXODBC], [odbc], [SQLConnect], [sql.h], [])
+AST_EXT_LIB_CHECK([UNIXODBC], [iodbc], [SQLConnect], [sql.h], [-lpthread])
 
 AST_EXT_LIB_CHECK([OGG], [ogg], [ogg_sync_init], [])
 
@


1.46
log
@update to asterisk-13.15.0.

add various OPENSSL_VERSION_NUMBER patches now that asterisk supports
openssl 1.1:

- we don't have openssl 1.1's SSL_is_server yet, so use the old check
for ssl->server instead

- we do still need the hack to avoid initing multiple times which is
no longer needed in openssl 1.1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.45 2017/02/14 12:31:38 sthen Exp $
d5 3
a7 2
--- configure.ac.orig	Fri Apr  7 16:49:39 2017
+++ configure.ac	Fri Apr  7 21:42:55 2017
@


1.45
log
@update to asterisk-13.14.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.44 2016/11/29 13:57:49 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Mon Feb 13 19:51:51 2017
+++ configure.ac	Mon Feb 13 22:27:04 2017
d16 1
a16 1
@@@@ -1937,7 +1937,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2123,7 +2123,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.44
log
@update to asterisk-13.13.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.43 2016/11/11 10:55:17 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Wed Nov 23 15:26:01 2016
+++ configure.ac	Tue Nov 29 12:26:11 2016
d16 1
a16 1
@@@@ -1931,7 +1931,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2117,7 +2117,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.43
log
@update to asterisk-13.12.2, fixing a chan_sip rtptimeout problem introduced
in 13.12.1 that would cause calls to be dropped early
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.42 2016/09/02 10:34:59 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Thu Nov 10 19:34:55 2016
+++ configure.ac	Fri Nov 11 10:39:52 2016
d16 1
a16 1
@@@@ -1922,7 +1922,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2108,7 +2108,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.42
log
@update to asterisk-13.11.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.41 2016/03/29 23:24:46 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Thu Sep  1 17:23:34 2016
+++ configure.ac	Fri Sep  2 10:59:07 2016
d16 1
a16 1
@@@@ -1899,7 +1899,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2085,7 +2085,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.41
log
@update to asterisk-13.8.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.40 2015/10/12 22:07:29 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Tue Mar 29 20:39:33 2016
+++ configure.ac	Tue Mar 29 23:51:01 2016
d16 1
a16 1
@@@@ -1905,7 +1905,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2091,7 +2091,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.40
log
@update to asterisk-13.6.0

this is a major update - upgrading users should review UPGRADE-12.txt and
UPGRADE.txt in /usr/local/share/doc/asterisk. some configurations will work
unchanged, but there have been big changes in other areas, notably AMI,
CDR and CEL.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.37 2015/04/02 17:09:30 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Fri Oct  9 22:48:48 2015
+++ configure.ac	Sun Oct 11 21:00:19 2015
d16 1
a16 1
@@@@ -1814,7 +1814,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2000,7 +2000,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.40.2.1
log
@MFC update to asterisk-13.8.2, includes some crashes and DoS issues with pjsip
fixed in 13.8.1 and other small fixes
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.41 2016/03/29 23:24:46 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Tue Mar 29 20:39:33 2016
+++ configure.ac	Tue Mar 29 23:51:01 2016
d16 1
a16 1
@@@@ -1905,7 +1905,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -2091,7 +2091,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.39
log
@update to asterisk-11.20.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.38 2015/06/08 08:44:52 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Fri Oct  9 23:23:39 2015
+++ configure.ac	Sat Oct 10 14:18:22 2015
d16 1
a16 1
@@@@ -1740,7 +1740,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1926,7 +1926,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.38
log
@update to asterisk-11.18.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.37 2015/04/02 17:09:30 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Thu Jun  4 01:44:42 2015
+++ configure.ac	Fri Jun  5 10:41:19 2015
d16 1
a16 1
@@@@ -1739,7 +1739,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1925,7 +1925,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.37
log
@update to asterisk-11.17.0, which includes a fix from Ed Hynan for an
FD exhaustion problem he was seeing on OpenBSD.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.36 2014/05/31 00:35:31 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Thu Mar 12 12:26:57 2015
+++ configure.ac	Thu Apr  2 17:41:56 2015
d16 1
a16 1
@@@@ -1772,7 +1772,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1958,7 +1958,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.36
log
@update to asterisk 11.10.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.35 2014/05/07 00:38:59 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Tue May 13 00:48:13 2014
+++ configure.ac	Thu May 29 21:32:09 2014
d16 1
a16 1
@@@@ -1747,7 +1747,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1933,7 +1933,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.36.4.1
log
@MFC update to asterisk-11.17.0, including FD leak fix.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.37 2015/04/02 17:09:30 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Thu Mar 12 12:26:57 2015
+++ configure.ac	Thu Apr  2 17:41:56 2015
d16 1
a16 1
@@@@ -1772,7 +1772,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1958,7 +1958,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.35
log
@Now that c-client no longer pulls in ssl/crypto itself via kerbV, patch
Asterisk's configure script so it can find these required libs. No bump
needed here as it didn't build previously since c-client's lib version
was last bumped.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.34 2014/04/26 11:59:51 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Wed Mar  5 16:55:52 2014
+++ configure.ac	Wed May  7 01:11:10 2014
d16 1
a16 1
@@@@ -1746,7 +1746,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1932,7 +1932,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.34
log
@update to asterisk 11.9.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.33 2014/04/21 22:54:50 sthen Exp $
d6 1
a6 1
+++ configure.ac	Wed Apr 23 22:09:43 2014
d16 9
@


1.33
log
@remove configure.ac patching not needed since c-client no longer needs
kerb5 libs.

@@comment autosupport file which is very linux-centric.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.32 2013/12/20 12:37:05 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Tue Oct  8 23:27:59 2013
+++ configure.ac	Tue Dec 17 23:12:01 2013
d16 1
a16 1
@@@@ -1926,7 +1926,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.32
log
@update to asterisk 11.7.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.31 2013/07/16 13:03:19 sthen Exp $
a15 9
@@@@ -1740,7 +1740,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
 			)
 		else #looking in imap directory didn't work, try c-client
 			imap_ldflags=""
-			imap_libs="-lc-client"
+			imap_libs="`krb5-config --libs gssapi` -lssl -lc-client"
 			imap_include="-DUSE_SYSTEM_CCLIENT"
 			CPPFLAGS="${saved_cppflags}"
 			LIBS="${saved_libs}"
@


1.31
log
@update to Asterisk 11.5.0 (and enabled FreeTDS cel/cdr support)
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.28 2013/03/28 20:24:53 sthen Exp $
d5 2
a6 2
--- configure.ac.orig	Wed May 15 13:39:55 2013
+++ configure.ac	Tue Jul 16 10:37:02 2013
d16 1
a16 1
@@@@ -1735,7 +1735,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1921,7 +1921,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.30
log
@c-client requires libssl for its own purposes, and gssapi libs.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.29 2013/06/17 19:31:17 ajacoutot Exp $
d5 2
a6 2
--- configure.ac.orig	Tue Feb 26 12:45:09 2013
+++ configure.ac	Thu Jun 20 15:14:30 2013
d16 1
a16 1
@@@@ -1733,7 +1733,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d25 1
a25 1
@@@@ -1919,7 +1919,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.29
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 6
a6 3
$OpenBSD: patch-configure_ac,v 1.28 2013/03/28 20:24:53 sthen Exp $
--- configure.ac.orig	Wed Jan 30 17:46:52 2013
+++ configure.ac	Sat Feb 23 21:29:27 2013
d16 9
@


1.28
log
@update to Asterisk 11.3.0, various testing by myself and chris@@

- this is a major version update to the new long-term support version
- please review UPGRADE.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.26 2012/09/28 00:03:57 sthen Exp $
a12 9
@@@@ -1733,7 +1733,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
 			)
 		else #looking in imap directory didn't work, try c-client
 			imap_ldflags=""
-			imap_libs="-lc-client"
+			imap_libs="-lcrypto -lssl -lgssapi -lkrb5 -lc-client"
 			imap_include="-DUSE_SYSTEM_CCLIENT"
 			CPPFLAGS="${saved_cppflags}"
 			LIBS="${saved_libs}"
@


1.27
log
@bugfix update to Asterisk 10.11.0

- while there, revise pbx_spool.c kevent timeout fix; rather than
clamping the timestamp, in the particular problem situation we hit
the loop (where dirlist is empty), pass in NULL rather than
INT_MAX-timenow similar to what's done in the inotify case.
@
text
@d2 3
a4 3
--- configure.ac.orig	Thu Oct 18 20:53:08 2012
+++ configure.ac	Tue Dec 11 10:56:24 2012
@@@@ -59,7 +59,7 @@@@ AC_SUBST([astvarrundir],      ['${localstatedir}/run/a
d13 1
a13 1
@@@@ -1618,7 +1618,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1804,7 +1804,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d27 1
a27 1
+AST_EXT_LIB_CHECK([UNIXODBC], [iodbc], [SQLConnect], [sql.h], [-pthread])
@


1.26
log
@Update the asterisk port to 10.8.0 - This is a major update, notable changes:

- If using ConfBridge, note that the dialplan arguments have changed.

- If using the built-in HTTP server, note that a bindaddr must now be given,
previously the default was 0.0.0.0 but this must now be given explicitly.

- Internal database now uses SQLite3 not BDB, conversion tools are provided.

See share/doc/asterisk/UPGRADE.txt for more.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.19 2011/12/16 14:50:09 sthen Exp $
--- configure.ac.orig	Thu Apr 12 16:01:13 2012
+++ configure.ac	Tue Sep 18 23:44:17 2012
d13 1
a13 1
@@@@ -1617,7 +1617,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1803,7 +1803,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.25
log
@bugfix update to Asterisk 1.8.13.0
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.24 2012/05/03 11:25:27 sthen Exp $
--- configure.ac.orig	Thu Apr 12 15:26:06 2012
+++ configure.ac	Wed Jun  6 21:57:10 2012
@@@@ -55,7 +55,7 @@@@ AC_SUBST([astvarrundir],      ['${localstatedir}/run/a
d13 1
a13 1
@@@@ -1605,7 +1605,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1791,7 +1791,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.25.2.1
log
@update -stable to Asterisk 1.8.19.1, fixing:

AST-2012-014: crashes due to large stack allocations in TCP;
affects remote unauthenticated SIP *over TCP* and remote authenticated
XMPP/HTTP connections.

AST-2012-015: DoS through resource consumption by exploiting device
state caching; exploitable if anonymous calls are permitted.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.25 2012/06/07 10:39:25 sthen Exp $
--- configure.ac.orig	Thu Oct 18 20:42:53 2012
+++ configure.ac	Wed Jan  2 21:59:29 2013
d13 1
a13 1
@@@@ -1606,7 +1606,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1792,7 +1792,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.24
log
@Update to Asterisk 1.8.12.0, including lots of fixes for bad sizeof()
use and possible uninitialized var use, some memory leaks, a couple of
possible deadlocks and other issues.

While there, enable the http post module (done as a subpackage to
avoid pulling gmime/glib2 into the main package) and WANTLIB cleanup.

AEL dialplan users should see UPGRADE.txt for information about
changes to inheritance of the 'h' extension.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.23 2012/04/08 22:34:51 sthen Exp $
--- configure.ac.orig	Mon Mar 26 20:35:31 2012
+++ configure.ac	Thu May  3 08:42:50 2012
d13 1
a13 1
@@@@ -1590,7 +1590,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1776,7 +1776,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.23
log
@update to asterisk 1.8.11.0, including fixes for :
- crash in app_voicemail
- resource leak in SIP TCP/TLS
- ACK routing for non-2xx responses
- buffer overrun/memory leak in 'sip show peers' (race when adding peers whilst displaying)
- various locking problems
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.22 2012/03/23 22:42:25 sthen Exp $
--- configure.ac.orig	Thu Feb 16 19:26:16 2012
+++ configure.ac	Fri Mar 30 01:18:07 2012
d13 1
a13 1
@@@@ -1586,7 +1586,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1772,7 +1772,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
@


1.22
log
@tweaks to the asterisk port; currently no effective change to the packages.

- remove unused non-working patches and framework for chan_h323;
this driver is deprecated upstream anyway.

- add patches to let the alternative chan_ooh323 addon module build.
currently unused in the port, 'make configure; cd $WRKSRC; gmake menuselect'
and enable it there if you want to play.

- sync unistim patch.

- mention the IMAP flavour in DESCR (and thus bump REVISION-main).
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.21 2012/03/13 23:17:46 sthen Exp $
--- configure.ac.orig	Sat Jan 14 16:40:17 2012
+++ configure.ac	Tue Mar  6 14:19:49 2012
a30 9
@@@@ -2077,7 +2077,7 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
 
 if test "${OSARCH}" = "OpenBSD";
 then
-	AST_EXT_LIB_CHECK([VORBIS], [vorbis], [vorbis_info_init], [vorbis/codec.h], [-lm -lvorbisenc -logg])
+	AST_EXT_LIB_CHECK([VORBIS], [vorbis], [vorbis_info_init], [vorbis/codec.h], [-lm -lvorbisenc -lvorbis -logg])
 else
 	AST_EXT_LIB_CHECK([VORBIS], [vorbis], [vorbis_info_init], [vorbis/codec.h], [-lm -lvorbisenc])
 fi
@


1.21
log
@update to Asterisk 1.8.10.0

- includes the iLBC codec which now has a free copyright license; patent
licensing has a "no litigation" clause (see codecs/ilbc/LICENSE_ADDENDUM)
so mark as not permitted for CDs
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.20 2012/01/28 08:16:22 sthen Exp $
d31 1
a31 11
@@@@ -1925,7 +1925,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
 	AST_CHECK_OPENH323()
 	AST_CHECK_PWLIB_VERSION([OpenH323], [OPENH323], [openh323buildopts.h], [1], [17], [3], [], [1], [19], [0])
 	AST_CHECK_OPENH323_BUILD()
-	PLATFORM_OPENH323="h323_${PWLIB_PLATFORM}_${OPENH323_SUFFIX}"
+	dnl PLATFORM_OPENH323="h323_${PWLIB_PLATFORM}_${OPENH323_SUFFIX}"
+	PLATFORM_OPENH323="h323"
 	AST_CHECK_PWLIB_BUILD([OpenH323], [OPENH323],
 		[Define if your system has the OpenH323 libraries.],
 		[#include "ptlib.h"
@@@@ -2077,7 +2078,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
a35 1
+dnl XXX should use pkg-config
@


1.20
log
@update to asterisk 1.8.9.0, ok ajacoutot@@

This release has many fixes including thread locking issues,
crashes, resource leaks and others.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.19 2011/12/16 14:50:09 sthen Exp $
--- configure.ac.orig	Mon Dec 19 21:31:34 2011
+++ configure.ac	Sat Jan 28 01:04:17 2012
d13 1
a13 1
@@@@ -1585,7 +1585,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1771,7 +1771,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1924,7 +1924,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2076,7 +2077,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.20.2.1
log
@MFC update to asterisk 1.8.11.0, relative to previous version this
includes fixes for various crash/deadlock problems and the following
SECURITY problems:

AST-2012-002: stack buffer overflow (remote unauthenticated sessions).
requires a dialplan using the Milliwatt application with the 'o' option,
and internal_timing off.  Affects all 1.4+ Asterisk versions.

AST-2012-003: stack buffer overflow (remote unauth'd sessions) in HTTP
manager interface; triggered by long digest authentication strings.
Code injection possibility.  Affects 1.8+.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.23 2012/04/08 22:34:51 sthen Exp $
--- configure.ac.orig	Thu Feb 16 19:26:16 2012
+++ configure.ac	Fri Mar 30 01:18:07 2012
d13 1
a13 1
@@@@ -1586,7 +1586,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1772,7 +1772,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 20
@


1.19
log
@update Asterisk to 1.8.8.0
- various fixes, including a range of possible deadlocks
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.18 2011/09/24 13:47:42 sthen Exp $
--- configure.ac.orig	Tue Oct 18 22:26:48 2011
+++ configure.ac	Sat Dec 10 14:34:33 2011
d13 1
a13 1
@@@@ -1557,7 +1557,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1743,7 +1743,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1896,7 +1896,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2048,7 +2049,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.18
log
@update to asterisk 1.8.7.0
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.16 2011/07/12 19:54:39 sthen Exp $
--- configure.ac.orig	Mon Sep 19 17:57:40 2011
+++ configure.ac	Fri Sep 23 20:54:33 2011
d13 1
a13 1
@@@@ -1495,7 +1495,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1705,7 +1705,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1858,7 +1858,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2014,7 +2015,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.17
log
@update to asterisk 1.8.6.0
@
text
@d2 2
a3 2
--- configure.ac.orig	Thu Aug 25 20:08:04 2011
+++ configure.ac	Thu Sep  1 10:37:01 2011
d13 1
a13 1
@@@@ -1514,7 +1514,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1724,7 +1724,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1876,7 +1876,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2032,7 +2033,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.16
log
@update to asterisk 1.8.5.0, chan_unistim parts from & ok ian@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.15 2011/03/02 13:28:24 sthen Exp $
--- configure.ac.orig	Mon May 23 17:19:32 2011
+++ configure.ac	Mon Jul 11 23:45:36 2011
d41 1
a41 1
@@@@ -2030,7 +2031,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.15
log
@bugfix update to 1.8.3
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.14 2011/01/19 11:25:16 sthen Exp $
--- configure.ac.orig	Sun Jan  9 21:40:34 2011
+++ configure.ac	Wed Mar  2 13:00:15 2011
d13 1
a13 1
@@@@ -1512,7 +1512,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1722,7 +1722,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1874,7 +1874,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2029,7 +2030,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.14
log
@SECURITY update to asterisk 1.8.2.1, fixes AST-2011-001 "an issue
when forming an outgoing SIP request while in pedantic mode, which
can cause a stack buffer to be made to overflow if supplied with
carefully crafted caller ID information"

http://downloads.asterisk.org/pub/security/AST-2011-001.html

This is also a major version update to the long-term support
1.8 branch, previous versions of this diff have been tested by
various ports@@ readers, thanks for testing.

Please review /usr/local/share/doc/asterisk/UPGRADE.txt
(also note that memory use has increased).

ok ajacoutot@@ jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.11 2010/07/25 10:08:03 sthen Exp $
--- configure.ac.orig	Wed Jan 12 16:52:31 2011
+++ configure.ac	Fri Jan 14 21:48:05 2011
d13 1
a13 1
@@@@ -1492,7 +1492,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1702,7 +1702,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1854,7 +1854,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2009,7 +2010,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.14.2.1
log
@Merge Asterisk from current to -stable (mostly; we still have to
use autoconf 2.64 as 2.65 needs newer m4 than 4.9-release has).
Too many important fixes to cherrypick them, including the security
fixes below, plus some others which aren't directly security-related.

AST-2011-007 (CVE-2011-2216): Null pointer deref in SIP if
malformed Contact headers are present. Remote crash can be triggered
by anyone who can send you a SIP call.

AST-2011-006: shell access via remote authenticated manager
sessions (logged-in manager users can execute shell commands via
the manager interface without having the "system" privilege that
should be required)

AST-2011-005: DoS with remote unauthenticated sessions (add limits
to prevent unauthenticated users from tying up all available FDs for
the manager interface, SIP-over-TCP, Skinny and the built in HTTP
server).

AST-2011-003 and AST-2011-004: unchecked return codes (fdopen, fwrite)
causing null pointer deref / resource exhaustion.

AST-2011-002: buffer overflow.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.15 2011/03/02 13:28:24 sthen Exp $
--- configure.ac.orig	Sun Jan  9 21:40:34 2011
+++ configure.ac	Wed Mar  2 13:00:15 2011
d13 1
a13 1
@@@@ -1512,7 +1512,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1722,7 +1722,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp-config], , [--
d31 1
a31 1
@@@@ -1874,7 +1874,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -2029,7 +2030,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.13
log
@update Asterisk to 1.6.2.14
@
text
@d1 13
a13 4
$OpenBSD: patch-configure_ac,v 1.12 2010/09/19 21:14:05 sthen Exp $
--- configure.ac.orig	Fri Sep 10 02:16:32 2010
+++ configure.ac	Thu Nov 11 21:06:10 2010
@@@@ -1294,7 +1294,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d22 1
a22 1
@@@@ -1487,7 +1487,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d31 1
a31 1
@@@@ -1612,7 +1612,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d41 1
a41 1
@@@@ -1715,7 +1716,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.12
log
@- update Asterisk to 1.6.2.13

- upstream have prevented chan_h323 from building with pwlib>=1.19.0
as it segfaults at startup; disable the h323 flavour for now.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.11 2010/07/25 10:08:03 sthen Exp $
--- configure.ac.orig	Tue Jul 27 18:54:54 2010
+++ configure.ac	Thu Sep 16 08:30:55 2010
@@@@ -1232,7 +1232,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d13 1
a13 1
@@@@ -1425,7 +1425,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d22 1
a22 1
@@@@ -1550,7 +1550,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1653,7 +1654,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.11
log
@update to 1.6.2.10, switch to new LIB_DEPENDS etc.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.10 2010/06/18 22:10:44 sthen Exp $
--- configure.ac.orig	Mon Jun  7 23:13:04 2010
+++ configure.ac	Sat Jul 24 12:42:48 2010
@@@@ -1231,7 +1231,7 @@@@ if test "${USE_IMAP_TK}" != "no"; then
d13 1
a13 1
@@@@ -1424,7 +1424,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d22 1
a22 1
@@@@ -1549,7 +1549,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d24 1
a24 1
 	AST_CHECK_PWLIB_VERSION([OpenH323], [OPENH323], [openh323buildopts.h], [1], [17], [3])
d32 1
a32 1
@@@@ -1652,7 +1653,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.10
log
@update to 1.6.2.9; various crash fixes (including one with dtmf detection)
@
text
@d1 13
a13 4
$OpenBSD: patch-configure_ac,v 1.9 2010/06/02 13:18:56 sthen Exp $
--- configure.ac.orig	Wed May 26 01:33:49 2010
+++ configure.ac	Wed Jun  9 15:03:28 2010
@@@@ -1423,7 +1423,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d22 1
a22 1
@@@@ -1548,7 +1548,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1651,7 +1652,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.9
log
@update to 1.6.2.8
@
text
@d1 4
a4 21
$OpenBSD: patch-configure_ac,v 1.8 2010/04/14 08:23:38 sthen Exp $
--- configure.ac.orig	Wed Apr 28 21:34:07 2010
+++ configure.ac	Tue Jun  1 22:23:41 2010
@@@@ -528,6 +528,8 @@@@ AC_MSG_RESULT(no)
 )
 
 AC_MSG_CHECKING(for pthread_rwlock_timedwrlock() in pthread.h)
+saved_LIBS="${LIBS}"
+LIBS="${PTHREAD_CFLAGS}"
 AC_LINK_IFELSE(
   [AC_LANG_PROGRAM(
     [#include <pthread.h>
@@@@ -541,6 +543,7 @@@@ AC_LINK_IFELSE(
     ac_cv_pthread_rwlock_timedwrlock="no"
   ]
 )
+LIBS="${saved_LIBS}"
 if test "${ac_cv_pthread_rwlock_timedwrlock}" = "yes"; then
   AC_DEFINE([HAVE_PTHREAD_RWLOCK_TIMEDWRLOCK], 1, [Define if your system has pthread_rwlock_timedwrlock()])
 fi
@@@@ -1415,7 +1418,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d13 1
a13 1
@@@@ -1540,7 +1543,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d23 1
a23 1
@@@@ -1639,7 +1643,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.8
log
@Use -pthread when checking for pthread_rwlock_timedwrlock.
No change yet, but means that the function can be used when it's
added to pthread. From Brad.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.7 2010/04/08 16:18:00 sthen Exp $
--- configure.ac.orig	Wed Feb 10 14:49:18 2010
+++ configure.ac	Tue Apr 13 17:42:12 2010
@@@@ -526,6 +526,8 @@@@ AC_MSG_RESULT(no)
d13 1
a13 1
@@@@ -539,6 +541,7 @@@@ AC_LINK_IFELSE(
d21 1
a21 1
@@@@ -1399,7 +1402,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d30 1
a30 1
@@@@ -1524,7 +1527,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d40 1
a40 1
@@@@ -1623,7 +1627,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.7
log
@Update Asterisk to 1.6.2.6, which will be the only of the 1.6.x branches
receiving most updates in the future; notably, compared to the in-tree
version, this adds a portable (pthread-based) clocking source rather
than relying on a non-portable zaptel timer.

Main functions tested and working well for myself and Diego Casati (thanks!)
Note that ConfBridge (added since 1.6.0) may need more work
@
text
@d1 21
a21 4
$OpenBSD: patch-configure_ac,v 1.6 2010/03/25 12:01:47 sthen Exp $
--- configure.ac.orig	Wed Feb 10 19:49:18 2010
+++ configure.ac	Fri Apr  2 01:04:31 2010
@@@@ -1399,7 +1399,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d30 1
a30 1
@@@@ -1524,7 +1524,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d40 1
a40 1
@@@@ -1623,7 +1624,8 @@@@ AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [
@


1.6
log
@update to 1.6.0.26 + a patch from a ticket upstream.
@
text
@d1 4
a4 13
$OpenBSD: patch-configure_ac,v 1.5 2010/01/17 13:18:36 sthen Exp $
--- configure.ac.orig	Mon Jan 25 21:53:28 2010
+++ configure.ac	Fri Mar 12 20:54:09 2010
@@@@ -298,7 +298,7 @@@@ AST_EXT_LIB_SETUP([NBS], [Network Broadcast Sound], [n
 AST_EXT_LIB_SETUP([NCURSES], [ncurses], [ncurses])
 AST_EXT_LIB_SETUP([NETSNMP], [Net-SNMP], [netsnmp])
 AST_EXT_LIB_SETUP([NEWT], [newt], [newt])
-AST_EXT_LIB_SETUP([UNIXODBC], [unixODBC], [odbc])
+AST_EXT_LIB_SETUP([UNIXODBC], [unixODBC], [iodbc])
 AST_EXT_LIB_SETUP([OGG], [OGG], [ogg])
 AST_EXT_LIB_SETUP([OSPTK], [OSP Toolkit], [osptk])
 AST_EXT_LIB_SETUP([OSS], [Open Sound System], [oss])
@@@@ -1324,7 +1324,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d13 1
a13 1
@@@@ -1439,7 +1439,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d23 1
a23 8
@@@@ -1536,7 +1537,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
 
 AST_EXT_LIB_CHECK([USB], [usb], [usb_init], [usb.h], [])
 
-AST_EXT_LIB_CHECK([VORBIS], [vorbis], [vorbis_info_init], [vorbis/codec.h], [-lm -lvorbisenc])
+AST_EXT_LIB_CHECK([VORBIS], [vorbis], [vorbis_info_init], [vorbis/codec.h], [-lm -lvorbisenc -logg])
 
 AC_LANG_PUSH(C++)
d25 8
@


1.5
log
@Update to 1.6.0.21, various bugs (including some crashes) fixed.
This also has a small change in CDR generation, it's been well tested
upstream but still this can be a touchy area to change, so it's
going in now so the first OpenBSD release with Asterisk 1.6
packages has the change already made.

ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.4 2009/12/13 12:11:29 sthen Exp $
--- configure.ac.orig	Mon Dec 28 15:31:19 2009
+++ configure.ac	Fri Jan 15 16:13:27 2010
@@@@ -253,7 +253,7 @@@@ AST_EXT_LIB_SETUP([NBS], [Network Broadcast Sound], [n
d13 1
a13 1
@@@@ -1278,7 +1278,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d22 1
a22 1
@@@@ -1393,7 +1393,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1490,7 +1491,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
@


1.4
log
@Major version update to 1.6.0.19. For more information about the
upgrade, see /usr/local/share/doc/asterisk/UPGRADE-1.6.txt

Particular thanks to fgsch@@, ian@@ and Michiel van Baak for help and testing.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.1 2009/03/29 22:23:35 sthen Exp $
--- configure.ac.orig	Mon Oct 26 23:13:28 2009
+++ configure.ac	Sun Nov  8 13:12:03 2009
d13 1
a13 1
@@@@ -1258,7 +1258,7 @@@@ AST_EXT_TOOL_CHECK([NETSNMP], [net-snmp], , [--agent-l
d22 1
a22 1
@@@@ -1373,7 +1373,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1470,7 +1471,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
@


1.3
log
@update to 1.4.27, I'll soon be committing a 1.6.0 version but first let's
have the latest 1.4 for people who don't want to move yet.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.2 2009/05/22 09:05:10 sthen Exp $
--- configure.ac.orig	Mon Oct 26 22:13:25 2009
+++ configure.ac	Thu Nov 19 15:06:35 2009
@@@@ -198,7 +198,7 @@@@ AST_EXT_LIB_SETUP([NBS], [Network Broadcast Sound], [n
d13 1
a13 1
@@@@ -1227,7 +1227,7 @@@@ fi
d22 1
a22 1
@@@@ -1346,7 +1346,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1441,7 +1442,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
@


1.2
log
@maintenance update to 1.4.25. disable building the speex plugin by default
for now, it causes a SIGBUS at startup (and also did in the previous version)
which hasn't been tracked down yet.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.1 2009/03/29 22:23:35 sthen Exp $
--- configure.ac.orig	Wed Apr 22 22:35:03 2009
+++ configure.ac	Thu May 21 21:22:19 2009
@@@@ -195,7 +195,7 @@@@ AST_EXT_LIB_SETUP([NBS], [Network Broadcast Sound], [n
d13 1
a13 1
@@@@ -1221,7 +1221,7 @@@@ fi
d22 1
a22 1
@@@@ -1340,7 +1340,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1435,7 +1436,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
@


1.2.2.1
log
@MFC:

SECURITY UPDATE

asterisk-1.4.27

Resolves multiple security issues

ok sthen@@ jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.2 2009/05/22 09:05:10 sthen Exp $
--- configure.ac.orig	Mon Oct 26 22:13:25 2009
+++ configure.ac	Thu Nov 19 15:06:35 2009
@@@@ -198,7 +198,7 @@@@ AST_EXT_LIB_SETUP([NBS], [Network Broadcast Sound], [n
d13 1
a13 1
@@@@ -1227,7 +1227,7 @@@@ fi
d22 1
a22 1
@@@@ -1346,7 +1346,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1441,7 +1442,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
@


1.1
log
@maintenance update to 1.4.24
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.ac.orig	Wed Feb 18 20:06:45 2009
+++ configure.ac	Sat Mar 28 00:17:00 2009
@@@@ -191,7 +191,7 @@@@ AST_EXT_LIB_SETUP([NBS], [Network Broadcast Sound], [n
d13 1
a13 1
@@@@ -1183,7 +1183,7 @@@@ fi
d22 1
a22 1
@@@@ -1302,7 +1302,8 @@@@ if test "${PBX_PWLIB}" = "1" -a "${USE_OPENH323}" != "
d32 1
a32 1
@@@@ -1397,7 +1398,7 @@@@ AST_EXT_LIB_CHECK([TONEZONE], [tonezone], [tone_zone_f
@

