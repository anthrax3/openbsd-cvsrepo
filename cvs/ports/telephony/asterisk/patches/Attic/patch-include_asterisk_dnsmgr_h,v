head	1.2;
access;
symbols
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.01.19.11.25.16;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2010.04.09.11.05.55;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@SECURITY update to asterisk 1.8.2.1, fixes AST-2011-001 "an issue
when forming an outgoing SIP request while in pedantic mode, which
can cause a stack buffer to be made to overflow if supplied with
carefully crafted caller ID information"

http://downloads.asterisk.org/pub/security/AST-2011-001.html

This is also a major version update to the long-term support
1.8 branch, previous versions of this diff have been tested by
various ports@@ readers, thanks for testing.

Please review /usr/local/share/doc/asterisk/UPGRADE.txt
(also note that memory use has increased).

ok ajacoutot@@ jasper@@
@
text
@$OpenBSD: patch-include_asterisk_dnsmgr_h,v 1.1 2010/04/09 11:05:55 sthen Exp $

https://issues.asterisk.org/view.php?id=15827

--- include/asterisk/dnsmgr.h.orig	Mon Mar  9 20:58:17 2009
+++ include/asterisk/dnsmgr.h	Fri Apr  9 10:46:27 2010
@@@@ -42,12 +42,12 @@@@ struct ast_dnsmgr_entry;
  *
  * \param name the hostname
  * \param result where the DNS manager should store the IP address as it refreshes it.
- *      it.
+ * \param service SRV prefix (optional, set to NULL to disable SRV)
  *
  * This function allocates a new DNS manager entry object, and fills it with the
  * provided hostname and IP address.  This function does not force an initial lookup
- * of the IP address.  So, generally, this should be used when the initial address
- * is already known.
+ * of the IP address.  So, this should be used when the initial address
+ * is already known and stored in result.
  *
  * \return a DNS manager entry
  * \version 1.6.1 result changed from struct in_addr to struct sockaddr_in to store port number
@@@@ -69,6 +69,7 @@@@ void ast_dnsmgr_release(struct ast_dnsmgr_entry *entry
  * \param name the hostname
  * \param result where to store the IP address as the DNS manager refreshes it
  * \param dnsmgr Where to store the allocate DNS manager entry
+ * \param service SRV prefix (optional, set to NULL to disable SRV)
  *
  * This function allocates a new DNS manager entry object, and fills it with
  * the provided hostname and IP address.  This function _does_ force an initial
@


1.1
log
@fix issues with unitialized address family; one when outboundproxy
is used, reported by Alexey Suslikov, one with dnsmgr when the looked-up
IP address of a peer changes (bug 15827).
@
text
@d1 1
a1 1
$OpenBSD$
@

