head	1.7;
access;
symbols
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.8
	OPENBSD_5_0:1.6.0.6
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.4
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6;
locks; strict;
comment	@# @;


1.7
date	2012.03.23.22.42.25;	author sthen;	state dead;
branches;
next	1.6;

1.6
date	2010.06.18.22.10.44;	author sthen;	state Exp;
branches
	1.6.8.1;
next	1.5;

1.5
date	2010.04.08.16.18.00;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2010.03.23.21.16.53;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.14.16.00.10;	author sthen;	state dead;
branches;
next	1.2;

1.2
date	2008.04.02.23.18.11;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2008.03.15.17.41.12;	author ajacoutot;	state Exp;
branches;
next	;

1.6.8.1
date	2012.04.11.15.12.47;	author sthen;	state dead;
branches;
next	;


desc
@@


1.7
log
@tweaks to the asterisk port; currently no effective change to the packages.

- remove unused non-working patches and framework for chan_h323;
this driver is deprecated upstream anyway.

- add patches to let the alternative chan_ooh323 addon module build.
currently unused in the port, 'make configure; cd $WRKSRC; gmake menuselect'
and enable it there if you want to play.

- sync unistim patch.

- mention the IMAP flavour in DESCR (and thus bump REVISION-main).
@
text
@$OpenBSD: patch-channels_h323_ast_h323_cxx,v 1.6 2010/06/18 22:10:44 sthen Exp $
--- channels/h323/ast_h323.cxx.orig	Mon May 24 23:07:11 2010
+++ channels/h323/ast_h323.cxx	Wed Jun  9 15:03:28 2010
@@@@ -2366,6 +2366,7 @@@@ int h323_start_listener(int listenPort, struct sockadd
 	return 0;
 };
 
+#ifndef __OpenBSD__
 /* Addition of functions just to make the channel driver compile with H323Plus */
 #if VERSION(OPENH323_MAJOR, OPENH323_MINOR, OPENH323_BUILD) > VERSION(1,19,4)
 /* Alternate RTP port information for Same NAT */
@@@@ -2391,6 +2392,7 @@@@ BOOL MyH323_ExternalRTPChannel::OnReceivedAckAltPDU(co
 	return TRUE;
 }
 #endif
+#endif // __OpenBSD__
 
 
 int h323_set_alias(struct oh323_alias *alias)
@


1.6
log
@update to 1.6.2.9; various crash fixes (including one with dtmf detection)
@
text
@d1 1
a1 1
$OpenBSD: patch-channels_h323_ast_h323_cxx,v 1.5 2010/04/08 16:18:00 sthen Exp $
@


1.6.8.1
log
@MFC update to asterisk 1.8.11.0, relative to previous version this
includes fixes for various crash/deadlock problems and the following
SECURITY problems:

AST-2012-002: stack buffer overflow (remote unauthenticated sessions).
requires a dialplan using the Milliwatt application with the 'o' option,
and internal_timing off.  Affects all 1.4+ Asterisk versions.

AST-2012-003: stack buffer overflow (remote unauth'd sessions) in HTTP
manager interface; triggered by long digest authentication strings.
Code injection possibility.  Affects 1.8+.
@
text
@d1 1
a1 1
$OpenBSD: patch-channels_h323_ast_h323_cxx,v 1.6 2010/06/18 22:10:44 sthen Exp $
@


1.5
log
@Update Asterisk to 1.6.2.6, which will be the only of the 1.6.x branches
receiving most updates in the future; notably, compared to the in-tree
version, this adds a portable (pthread-based) clocking source rather
than relying on a non-portable zaptel timer.

Main functions tested and working well for myself and Diego Casati (thanks!)
Note that ConfBridge (added since 1.6.0) may need more work
@
text
@d1 4
a4 4
$OpenBSD: patch-channels_h323_ast_h323_cxx,v 1.4 2010/03/23 21:16:53 ajacoutot Exp $
--- channels/h323/ast_h323.cxx.orig	Thu Jun 18 17:44:37 2009
+++ channels/h323/ast_h323.cxx	Thu Apr  1 02:57:26 2010
@@@@ -2365,6 +2365,7 @@@@ int h323_start_listener(int listenPort, struct sockadd
d12 1
a12 1
@@@@ -2390,6 +2391,7 @@@@ BOOL MyH323_ExternalRTPChannel::OnReceivedAckAltPDU(co
@


1.4
log
@Move to using h323plus and ptlib.
@
text
@d1 4
a4 4
$OpenBSD$
--- channels/h323/ast_h323.cxx.orig	Thu Jan 28 12:05:04 2010
+++ channels/h323/ast_h323.cxx	Thu Jan 28 12:05:42 2010
@@@@ -2364,6 +2364,7 @@@@ int h323_start_listener(int listenPort, struct sockadd
d12 1
a12 1
@@@@ -2389,6 +2390,7 @@@@ BOOL MyH323_ExternalRTPChannel::OnReceivedAckAltPDU(co
@


1.3
log
@Update Asterisk to 1.4.21, lots of quality-control fixes
ok ian
@
text
@d1 6
a6 6
$OpenBSD: patch-channels_h323_ast_h323_cxx,v 1.2 2008/04/02 23:18:11 sthen Exp $
--- channels/h323/ast_h323.cxx.orig	Thu Mar  6 09:33:18 2008
+++ channels/h323/ast_h323.cxx	Thu Mar  6 09:33:45 2008
@@@@ -81,6 +81,7 @@@@ static MyH323EndPoint *endPoint = NULL;
 /** PWLib entry point */
 static MyProcess *localProcess = NULL;
d8 9
a16 2
+int timerChangePipe[2];
 static int _timerChangePipe[2];
d18 2
a19 1
 static unsigned traceOptions = PTrace::Timestamp | PTrace::Thread | PTrace::FileAndLine;
@


1.2
log
@update to 1.4.19
ok ian@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@- make the h323 FLAVOR build correctly with new pwlib/h323
- add a pre-build target so that we can remove IS_INTERACTIVE
(from sthen@@)

ok sthen@@
@
text
@@

