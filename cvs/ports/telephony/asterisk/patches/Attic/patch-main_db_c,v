head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2007.10.11.08.05.18;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2007.09.05.22.42.52;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@SECURITY update for 1.4 versions (doesn't affect OpenBSD before 4.2);
fixes an overflow in IMAP voicemail storage reachable by anyone who can
send email to a VM box accessed from the phone. AST-2007-022, found by
sprintf audit.

ok ian@@
@
text
@$OpenBSD: patch-main_db_c,v 1.1 2007/09/05 22:42:52 sthen Exp $
--- main/db.c.orig	Wed Jun 13 13:17:50 2007
+++ main/db.c	Wed Jun 13 13:17:51 2007
@@@@ -63,7 +63,7 @@@@ AST_MUTEX_DEFINE_STATIC(dblock);
 static int dbinit(void) 
 {
 	if (!astdb && !(astdb = dbopen((char *)ast_config_AST_DB, O_CREAT | O_RDWR, 0664, DB_BTREE, NULL))) {
-		ast_log(LOG_WARNING, "Unable to open Asterisk database\n");
+		ast_log(LOG_WARNING, "Unable to open Asterisk database %s\n", ast_config_AST_DB);
 		return -1;
 	}
 	return 0;
@


1.1
log
@major version update to 1.4.11, ok ian@@ jolan@@
@
text
@d1 1
a1 1
$OpenBSD$
@

