head	1.8;
access;
symbols
	OPENBSD_5_8:1.7.0.12
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.8
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.6
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.4
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4;
locks; strict;
comment	@# @;


1.8
date	2015.10.12.22.07.29;	author sthen;	state dead;
branches;
next	1.7;
commitid	s4D60mgjUjajPmDX;

1.7
date	2013.03.28.20.24.53;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.15.12.43.49;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2012.08.04.21.53.56;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.17.13.01.55;	author sthen;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2012.06.07.10.39.25;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.05.30.22.45.26;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.05.30.22.41.30;	author sthen;	state Exp;
branches;
next	;

1.4.2.1
date	2012.12.09.13.21.43;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.8
log
@update to asterisk-13.6.0

this is a major update - upgrading users should review UPGRADE-12.txt and
UPGRADE.txt in /usr/local/share/doc/asterisk. some configurations will work
unchanged, but there have been big changes in other areas, notably AMI,
CDR and CEL.
@
text
@$OpenBSD: patch-main_features_c,v 1.7 2013/03/28 20:24:53 sthen Exp $
--- main/features.c.orig	Tue Oct  2 02:27:19 2012
+++ main/features.c	Fri Oct 26 14:17:04 2012
@@@@ -1199,7 +1199,9 @@@@ static void bridge_call_thread_launch(struct ast_bridg
 	}
 	pthread_attr_destroy(&attr);
 	memset(&sched, 0, sizeof(sched));
+#if defined(_POSIX_THREAD_PRIORITY_SCHEDULING) && (_POSIX_THREAD_PRIORITY_SCHEDULING > 0)
 	pthread_setschedparam(thread, SCHED_RR, &sched);
+#endif
 }
 
 /*!
@


1.7
log
@update to Asterisk 11.3.0, various testing by myself and chris@@

- this is a major version update to the new long-term support version
- please review UPGRADE.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-main_features_c,v 1.6 2012/09/15 12:43:49 sthen Exp $
@


1.6
log
@update to Asterisk 1.8.16.0
@
text
@d1 4
a4 4
$OpenBSD: patch-main_features_c,v 1.5 2012/08/04 21:53:56 sthen Exp $
--- main/features.c.orig	Tue Sep 11 17:15:05 2012
+++ main/features.c	Wed Sep 12 14:36:19 2012
@@@@ -1045,7 +1045,9 @@@@ static void bridge_call_thread_launch(struct ast_bridg
@


1.5
log
@update to asterisk 1.8.15.0
@
text
@d1 4
a4 4
$OpenBSD: patch-main_features_c,v 1.4 2012/07/17 13:01:55 sthen Exp $
--- main/features.c.orig	Mon Jun 25 16:57:28 2012
+++ main/features.c	Mon Jul 30 23:13:45 2012
@@@@ -1014,7 +1014,9 @@@@ static void bridge_call_thread_launch(struct ast_bridg
@


1.4
log
@update to asterisk 1.8.14.1, fixes a problem with tcptls SIP connections
where an SSL_CTX was freed where it shouldn't have been leading to a possible
crash.
@
text
@d1 4
a4 4
$OpenBSD: patch-main_features_c,v 1.3 2012/06/07 10:39:25 sthen Exp $
--- main/features.c.orig	Fri Jul  6 00:07:27 2012
+++ main/features.c	Tue Jul 17 12:41:21 2012
@@@@ -1014,7 +1014,9 @@@@ static void bridge_call_thread_launch(void *data) 
@


1.4.2.1
log
@Update Asterisk in 5.2-stable to 1.8.18.1, various fixes including
deadlocks, crashes, thread and memory leaks and heap corruption.
@
text
@d1 4
a4 4
$OpenBSD: patch-main_features_c,v 1.4 2012/07/17 13:01:55 sthen Exp $
--- main/features.c.orig	Tue Oct  2 01:31:14 2012
+++ main/features.c	Fri Dec  7 13:36:57 2012
@@@@ -1045,7 +1045,9 @@@@ static void bridge_call_thread_launch(struct ast_bridg
@


1.3
log
@bugfix update to Asterisk 1.8.13.0
@
text
@d1 5
a5 5
$OpenBSD: patch-main_features_c,v 1.2 2012/05/30 22:45:26 sthen Exp $
--- main/features.c.orig	Thu Apr 26 21:23:09 2012
+++ main/features.c	Wed Jun  6 21:57:10 2012
@@@@ -1012,7 +1012,9 @@@@ static void bridge_call_thread_launch(void *data) 
 	ast_pthread_create(&thread, &attr, bridge_call_thread, data);
@


1.2
log
@SECURITY update to Asterisk 1.8.12.2

AST-2012-007, AST-2012-008 fixed in the short-lived 1.8.12.1 release:

* A remotely exploitable crash vulnerability exists in the IAX2 channel
  driver if an established call is placed on hold without a suggested music
  class. Asterisk will attempt to use an invalid pointer to the music
  on hold class name, potentially causing a crash.

* A remotely exploitable crash vulnerability was found in the Skinny (SCCP)
  Channel driver. When an SCCP client closes its connection to the server,
  a pointer in a structure is set to NULL.  If the client was not in the
  on-hook state at the time the connection was closed, this pointer is later
  dereferenced. This allows remote authenticated connections the ability to
  cause a crash in the server, denying services to legitimate users.

Also from 1.8.12.2

* Resolve crash in subscribing for MWI notifications.

ASTOBJ_UNREF sets the variable to NULL after unreffing it, so the
variable should definitely not be used after that. To solve this in
the two cases that affect subscribing for MWI notifications, we
instead save the ref locally, and unref them in the error
conditions.
@
text
@d1 4
a4 4
$OpenBSD$
--- main/features.c.orig	Thu May 17 23:30:18 2012
+++ main/features.c	Thu May 17 23:31:57 2012
@@@@ -960,7 +960,9 @@@@ static void bridge_call_thread_launch(void *data) 
@


1.1
log
@tweaks to the Asterisk port:

- add an extra file to PLIST-calendar
- add comments to the sample sip.conf showing how to hide version numbers
- fix use of _POSIX_THREAD_PRIORITY_SCHEDULING, from Brad
@
text
@@

