head	1.8;
access;
symbols
	OPENBSD_6_1:1.8.0.20
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.8.0.18
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.14
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.16
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.12
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.10
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.8
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.6
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.4
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.2
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.4
	OPENBSD_5_0:1.6.0.2
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.4.0.6
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.10
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.8
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	jolan_2004-09-25:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2012.05.30.22.45.26;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2012.05.30.22.41.30;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2011.06.27.21.15.14;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2011.03.02.12.53.11;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.12.13.12.11.29;	author sthen;	state Exp;
branches
	1.4.6.1;
next	1.3;

1.3
date	2007.09.05.22.42.52;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.15.17.36.07;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2004.09.26.00.38.24;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.09.26.00.38.24;	author jolan;	state Exp;
branches;
next	;

1.4.6.1
date	2011.06.03.16.10.21;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.8
log
@SECURITY update to Asterisk 1.8.12.2

AST-2012-007, AST-2012-008 fixed in the short-lived 1.8.12.1 release:

* A remotely exploitable crash vulnerability exists in the IAX2 channel
  driver if an established call is placed on hold without a suggested music
  class. Asterisk will attempt to use an invalid pointer to the music
  on hold class name, potentially causing a crash.

* A remotely exploitable crash vulnerability was found in the Skinny (SCCP)
  Channel driver. When an SCCP client closes its connection to the server,
  a pointer in a structure is set to NULL.  If the client was not in the
  on-hook state at the time the connection was closed, this pointer is later
  dereferenced. This allows remote authenticated connections the ability to
  cause a crash in the server, denying services to legitimate users.

Also from 1.8.12.2

* Resolve crash in subscribing for MWI notifications.

ASTOBJ_UNREF sets the variable to NULL after unreffing it, so the
variable should definitely not be used after that. To solve this in
the two cases that affect subscribing for MWI notifications, we
instead save the ref locally, and unref them in the error
conditions.
@
text
@; $OpenBSD: sip.conf.sample,v 1.6 2011/06/27 21:15:14 sthen Exp $
; Longer example available in ${TRUEPREFIX}/share/examples/asterisk/default

[general]
disallow=all
allow=ulaw

; If Asterisk server is behind nat with port-forwarding for some
; external clients, set the external address and local network and
; perhaps restrict the port range (see rtpstart/rtpend in rtp.conf).
;externip=11.22.33.44
;localnet=192.168.0.0/255.255.0.0

; Defaults for these include the Asterisk version number, which you
; might not want to expose.
useragent=Asterisk PBX
sdpsession=Asterisk PBX

; Phone #1
[100]
type=friend
; N.B. People can and do make very high-speed password scans of hosts
; responding to SIP; if you cannot restrict access by source IP address,
; be sure to use strong secrets and ideally also non-standard extension
; numbers if your users can live with them.
secret=DDmKucsYo7V4Sb_change_me
nat=yes
host=dynamic
directmedia=no
qualify=yes
mailbox=100
context=default

; Phone #2
[101]
type=friend
secret=96Odmh3decU1_change_me
nat=yes
host=dynamic
directmedia=no
qualify=yes
mailbox=100
context=default
@


1.7
log
@tweaks to the Asterisk port:

- add an extra file to PLIST-calendar
- add comments to the sample sip.conf showing how to hide version numbers
- fix use of _POSIX_THREAD_PRIORITY_SCHEDULING, from Brad
@
text
@@


1.6
log
@- add commented-out example settings for configuring a server behind nat
- be explicit in sample config that people should use strong secrets
@
text
@d1 1
a1 1
; $OpenBSD: sip.conf.sample,v 1.5 2011/03/02 12:53:11 sthen Exp $
d7 1
d13 5
@


1.5
log
@SECURITY update to 1.8.2.4 fixes AST-2011-002 buffer overflow
Workaround: add "t38pt_udptl = no" to the general section in sip.conf
(chan_ooh323 is also affected but we don't build that).
@
text
@d1 1
a1 1
; $OpenBSD: sip.conf.sample,v 1.4 2009/12/13 12:11:29 sthen Exp $
d7 5
d16 5
a20 1
secret=100
d31 1
a31 1
secret=101
@


1.4
log
@Major version update to 1.6.0.19. For more information about the
upgrade, see /usr/local/share/doc/asterisk/UPGRADE-1.6.txt

Particular thanks to fgsch@@, ian@@ and Michiel van Baak for help and testing.
@
text
@d1 1
a1 1
; $OpenBSD: sip.conf.sample,v 1.3 2007/09/05 22:42:52 sthen Exp $
d14 1
a14 1
canreinvite=no
d25 1
a25 1
canreinvite=no
@


1.4.6.1
log
@Merge Asterisk from current to -stable (mostly; we still have to
use autoconf 2.64 as 2.65 needs newer m4 than 4.9-release has).
Too many important fixes to cherrypick them, including the security
fixes below, plus some others which aren't directly security-related.

AST-2011-007 (CVE-2011-2216): Null pointer deref in SIP if
malformed Contact headers are present. Remote crash can be triggered
by anyone who can send you a SIP call.

AST-2011-006: shell access via remote authenticated manager
sessions (logged-in manager users can execute shell commands via
the manager interface without having the "system" privilege that
should be required)

AST-2011-005: DoS with remote unauthenticated sessions (add limits
to prevent unauthenticated users from tying up all available FDs for
the manager interface, SIP-over-TCP, Skinny and the built in HTTP
server).

AST-2011-003 and AST-2011-004: unchecked return codes (fdopen, fwrite)
causing null pointer deref / resource exhaustion.

AST-2011-002: buffer overflow.
@
text
@d1 1
a1 1
; $OpenBSD: sip.conf.sample,v 1.5 2011/03/02 12:53:11 sthen Exp $
d14 1
a14 1
directmedia=no
d25 1
a25 1
directmedia=no
@


1.3
log
@major version update to 1.4.11, ok ian@@ jolan@@
@
text
@d1 2
a2 2
; $OpenBSD: sip.conf.sample,v 1.2 2005/08/15 17:36:07 jolan Exp $
; Longer example available in %%LOCALBASE%%/share/examples/asterisk/default
@


1.2
log
@update to 1.0.9, ok jcs pval

most notably fixes an overflow in the management interface (which is not
enabled by default)
@
text
@d1 3
a3 1
; $OpenBSD: sip.conf.sample,v 1.1.1.1 2004/09/26 00:38:24 jolan Exp $
@


1.1
log
@Initial revision
@
text
@d1 4
a4 1
; $OpenBSD$
@


1.1.1.1
log
@asterisk-1.0.0, open source pbx
@
text
@@
