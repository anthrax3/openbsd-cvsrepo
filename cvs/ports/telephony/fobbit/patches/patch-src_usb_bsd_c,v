head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.10
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.1.1.0.34
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.32
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.30
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.28
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.26
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.24
	OPENBSD_5_0:1.1.1.1.0.22
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.20
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.18
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.16
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.14
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.12
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.10
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.8
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.6
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.4
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jolan_20060511:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2015.01.17.23.51.07;	author naddy;	state Exp;
branches;
next	1.1;
commitid	tGYjlVbL5OVuiIl5;

1.1
date	2006.05.12.01.29.41;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.05.12.01.29.41;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.2
log
@add missing limits.h, regen patches
@
text
@$OpenBSD: patch-src_usb_bsd_c,v 1.1.1.1 2006/05/12 01:29:41 jolan Exp $
--- src/usb_bsd.c.orig	Tue Nov 23 06:41:32 2004
+++ src/usb_bsd.c	Sun Jan 18 00:48:30 2015
@@@@ -278,13 +278,13 @@@@ validate_descriptors(int fd, usb_device_descriptor_t *
     // -----------------------------------------------------------------------
 
     memset(&conf, 0, sizeof(conf));
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     conf.ucd_config_index = 0;
 #else
     conf.config_index = 0; // there is only one configuration
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     conf.ucd_desc.bLength = USB_CONFIG_DESCRIPTOR_SIZE;
 #else
     conf.desc.bLength = USB_CONFIG_DESCRIPTOR_SIZE; // only get first part
@@@@ -296,7 +296,7 @@@@ validate_descriptors(int fd, usb_device_descriptor_t *
         return 0;
     }
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     if(check_desc_config(&(conf.ucd_desc)) == 0) { return 0; } // not valid
 #else
     if(check_desc_config(&(conf.desc)) == 0) { return 0; } // not valid
@@@@ -307,25 +307,25 @@@@ validate_descriptors(int fd, usb_device_descriptor_t *
 
     memset(&intf, 0, sizeof(intf));
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     intf.uid_config_index = 0;
 #else
     intf.config_index    = 0;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     intf.uid_interface_index = 0;
 #else
     intf.interface_index = 0;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     intf.uid_alt_index   = 0;
 #else
     intf.alt_index       = 0;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     intf.uid_desc.bLength = USB_INTERFACE_DESCRIPTOR_SIZE;
 #else
     intf.desc.bLength    = USB_INTERFACE_DESCRIPTOR_SIZE;
@@@@ -337,7 +337,7 @@@@ validate_descriptors(int fd, usb_device_descriptor_t *
         return 0;
     }
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
     if(check_desc_interface(&(intf.uid_desc)) == 0) { return 0; } // not valid
 #else
     if(check_desc_interface(&(intf.desc)) == 0) { return 0; } // not valid
@@@@ -350,31 +350,31 @@@@ validate_descriptors(int fd, usb_device_descriptor_t *
     for(i = 0; i < 4; i++) // get endpoint descriptors
     {
         memset(&endp, 0, sizeof(endp));
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
         endp.ued_config_index    = 0;
 #else
         endp.config_index    = 0;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
         endp.ued_interface_index = 0;
 #else
         endp.interface_index = 0;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
 	endp.ued_alt_index   = 0;
 #else
         endp.alt_index       = 0;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
 	endp.ued_endpoint_index = i;
 #else
         endp.endpoint_index  = i;
 #endif
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
 	endp.ued_desc.bLength = USB_ENDPOINT_DESCRIPTOR_SIZE;
 #else
         endp.desc.bLength    = USB_ENDPOINT_DESCRIPTOR_SIZE;
@@@@ -386,7 +386,7 @@@@ validate_descriptors(int fd, usb_device_descriptor_t *
             return 0;
         }
 
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
 	if(check_desc_endpoint(&(endp.ued_desc), i) == 0) { return 0; }
 #else
         if(check_desc_endpoint(&(endp.desc), i) == 0) { return 0; }
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- src/usb_bsd.c.orig	Mon Nov 22 23:41:32 2004
+++ src/usb_bsd.c	Tue Aug  2 19:56:03 2005
@@@@ -278,13 +278,13 @@@@ validate_descriptors(int fd, usb_device_
d20 1
a20 1
@@@@ -296,7 +296,7 @@@@ validate_descriptors(int fd, usb_device_
d29 1
a29 1
@@@@ -307,25 +307,25 @@@@ validate_descriptors(int fd, usb_device_
d59 1
a59 1
@@@@ -337,7 +337,7 @@@@ validate_descriptors(int fd, usb_device_
d68 1
a68 1
@@@@ -350,31 +350,31 @@@@ validate_descriptors(int fd, usb_device_
d105 1
a105 1
@@@@ -386,7 +386,7 @@@@ validate_descriptors(int fd, usb_device_
@


1.1.1.1
log
@fobbit-0.61, creative voip blaster driver/software
@
text
@@
