head	1.6;
access;
symbols
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.12
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.8
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.10
	OPENBSD_5_0:1.1.1.1.0.8
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.6
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.4
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	sthen_20091013:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2017.02.26.20.07.40;	author sthen;	state Exp;
branches;
next	1.5;
commitid	UEUeI1ZjpKGXWziC;

1.5
date	2016.03.16.16.46.33;	author naddy;	state Exp;
branches;
next	1.4;
commitid	4Ekn8nPgVVHWLTwe;

1.4
date	2015.12.03.21.24.32;	author sthen;	state Exp;
branches;
next	1.3;
commitid	qh8BBe4z9PLvLPKf;

1.3
date	2013.03.11.11.41.33;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2012.03.08.12.13.00;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.13.11.10.41;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.10.13.11.10.41;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.6
log
@honour CC
@
text
@# $OpenBSD: Makefile,v 1.5 2016/03/16 16:46:33 naddy Exp $

COMMENT =	proxy for Asterisk Manager Interface
DISTNAME =	astmanproxy-1.22pre081119
REVISION =	0

CATEGORIES =	telephony

HOMEPAGE =	http://www.voip-info.org/tiki-index.php?page=AstManProxy

MAINTAINER =	Stuart Henderson <sthen@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =	c crypto pthread ssl

# mirrored from git repository
MASTER_SITES =	https://spacehopper.org/mirrors/

MAKE_ENV =	CFLAGS="${CFLAGS}"

MAKE_FLAGS =	CC="${CC}" SYSCONFDIR=${SYSCONFDIR} \
		LIBDIR=${WRKINST}/${PREFIX}/lib/astmanproxy \
		MODDIR=${PREFIX}/lib/astmanproxy/modules \
		MODDIR_REAL=${WRKINST}/${PREFIX}/lib/astmanproxy/modules \
		CONFDIR=${SYSCONFDIR}/astmanproxy \
		CONFDIR_REAL=${WRKINST}/${PREFIX}/share/examples/astmanproxy \
		PERMDIR=${SYSCONFDIR}/astmanproxy \
		PERMDIR_REAL=${WRKINST}/${PREFIX}/share/examples/astmanproxy

FAKE_FLAGS =	PREFIX=${PREFIX}

USE_GMAKE =	Yes
NO_TEST =	Yes
ALL_TARGET =	astmanproxy

pre-configure:
	${SUBST_CMD} ${WRKSRC}/configs/astmanproxy.conf

post-install:
	${INSTALL_DATA} ${WRKSRC}/configs/ssl.conf \
	    ${PREFIX}/share/examples/astmanproxy/proxy-ssl.conf
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/astmanproxy/
	${INSTALL_DATA} ${WRKSRC}/README ${WRKSRC}/doc/* \
	    ${PREFIX}/share/doc/astmanproxy

.include <bsd.port.mk>
@


1.5
log
@remove SHARED_ONLY from ports that don't use any MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/12/03 21:24:32 sthen Exp $
d23 1
a23 1
MAKE_FLAGS =	SYSCONFDIR=${SYSCONFDIR} \
@


1.4
log
@switch my distfiles mirror to https
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.3 2013/03/11 11:41:33 espie Exp $

SHARED_ONLY =	Yes
@


1.3
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/03/08 12:13:00 ajacoutot Exp $
d21 1
a21 1
MASTER_SITES =	http://spacehopper.org/mirrors/
@


1.2
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/10/13 11:10:41 sthen Exp $
a16 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d37 1
a37 1
NO_REGRESS =	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
@


1.1.1.1
log
@import astmanproxy;

AstManProxy is a multi-threaded proxy server for the Asterisk
Manager Interface. As well as straight proxying, it can also 
translate between AMI and HTTP (with output in plaintext, XML,
or CSV formats). SSL is also available (for both AMI and HTTP).
@
text
@@
