head	1.8;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.6.0.4
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	sthen_20140925:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2016.12.26.14.53.25;	author czarkoff;	state Exp;
branches;
next	1.7;
commitid	i8mCVtaSxMbrtMA2;

1.7
date	2016.11.25.21.26.26;	author czarkoff;	state Exp;
branches;
next	1.6;
commitid	ou1QP63MGlQlF28r;

1.6
date	2016.01.12.09.22.07;	author czarkoff;	state Exp;
branches;
next	1.5;
commitid	MRfsOYO2QD4nnfOW;

1.5
date	2015.10.09.09.54.00;	author czarkoff;	state Exp;
branches;
next	1.4;
commitid	BFiBBheEzd6zJtpb;

1.4
date	2015.10.02.19.24.23;	author czarkoff;	state Exp;
branches;
next	1.3;
commitid	WC5pFiAqwQO2PfRl;

1.3
date	2015.07.09.10.36.24;	author czarkoff;	state Exp;
branches;
next	1.2;
commitid	gMZRBOV09ed9Bew6;

1.2
date	2014.12.11.13.48.42;	author sthen;	state Exp;
branches;
next	1.1;
commitid	zl0ReLSmeylhNtt2;

1.1
date	2014.09.25.19.32.37;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	CSoaIyiD3X8GgoI8;

1.1.1.1
date	2014.09.25.19.32.37;	author sthen;	state Exp;
branches;
next	;
commitid	CSoaIyiD3X8GgoI8;


desc
@@


1.8
log
@Update to baresip 0.5.0
@
text
@# $OpenBSD: Makefile.inc,v 1.7 2016/11/25 21:26:26 czarkoff Exp $

CATEGORIES =		telephony

HOMEPAGE =		http://www.creytiv.com/
MASTER_SITES ?=		${HOMEPAGE:=pub/}

MAINTAINER =		Dmitrij D. Czarkoff <czarkoff@@openbsd.org>

# Code is BSD-licensed, but zrtp.so module is statically linked to AGPLv3-
# licensed libzrtp.  As a result, main baresip package is subject to AGPLv3.
PERMIT_PACKAGE_CDROM =	Yes

USE_GMAKE =		Yes

MAKE_ENV +=		CC="${CC}"
MAKE_ENV +=		LD="${CC}"
MAKE_ENV +=		AR="${AR}"
#MAKE_ENV +=		DFLAGS=-MD -MF config -MT config
MAKE_ENV +=		APP_LFLAGS="-rdynamic"
MAKE_ENV +=		AFLAGS="${ARFLAGS}"
MAKE_ENV +=		BUILD="build-${ARCH}"
MAKE_ENV +=		OS=openbsd
MAKE_ENV +=		LFLAGS="-fPIC -L${LOCALBASE}/lib -L/${X11BASE}/lib"
MAKE_ENV +=		SH_LFLAGS="-shared"
MAKE_ENV +=		MOD_SUFFIX=".so"
MAKE_ENV +=		SYSROOT="/usr"
MAKE_ENV +=		V=Yes
MAKE_ENV +=		LIBRE_MK=/dev/null
MAKE_ENV +=		LIBRE_INC="${LOCALBASE}/include/re"
MAKE_ENV +=		HAVE_ARC4RANDOM=1
MAKE_ENV +=		HAVE_DLFCN_H=1
MAKE_ENV +=		HAVE_EPOLL=
MAKE_ENV +=		HAVE_GETIFADDRS=1
MAKE_ENV +=		HAVE_GETOPT=1
MAKE_ENV +=		HAVE_INET6=1
MAKE_ENV +=		HAVE_INET_NTOP=1
MAKE_ENV +=		HAVE_INET_PTON=1
MAKE_ENV +=		HAVE_INTTYPES_H=1
MAKE_ENV +=		HAVE_KQUEUE=1
MAKE_ENV +=		HAVE_LIBPTHREAD=1
MAKE_ENV +=		HAVE_NET_ROUTE_H=1
MAKE_ENV +=		HAVE_PTHREAD=1
MAKE_ENV +=		HAVE_PTHREAD_RWLOCK=1
MAKE_ENV +=		HAVE_RESOLV=1
MAKE_ENV +=		HAVE_STRERROR_R=1
MAKE_ENV +=		HAVE_SYSLOG=1
MAKE_ENV +=		HAVE_SYS_SYSCTL_H=1
MAKE_ENV +=		USE_OPENSSL=yes
MAKE_ENV +=		USE_OPENSSL_AES=yes
MAKE_ENV +=		USE_OPENSSL_DTLS=yes
MAKE_ENV +=		USE_OPENSSL_HMAC=yes
MAKE_ENV +=		USE_OPENSSL_SRTP=yes
MAKE_ENV +=		USE_TLS=yes
MAKE_ENV +=		USE_ZLIB=yes

FAKE_FLAGS +=		PREFIX=${PREFIX}

CFLAGS +=		-I${X11BASE}/include -I${LOCALBASE}/include -fPIC \
			-DARCH=\"${ARCH}\" -DOPENBSD -DOS=\"openbsd\" -std=c99 \
			-DUSE_OPENSSL -DUSE_TLS -DUSE_OPENSSL_DTLS -DUSE_DTLS \
			-DUSE_OPENSSL_SRTP -DUSE_DTLS_SRTP -DUSE_ZLIB \
			-DHAVE_PTHREAD -DHAVE_GETIFADDRS -DHAVE_STRERROR_R \
			-DHAVE_GETOPT -DHAVE_INTTYPES_H -DHAVE_NET_ROUTE_H \
			-DHAVE_SYS_SYSCTL_H -DHAVE_STDBOOL_H -DHAVE_INET6 \
			-DHAVE_RESOLV -DHAVE_SYSLOG -DHAVE_FORK \
			-DHAVE_INET_NTOP -DHAVE_PWD_H -DHAVE_POLL \
			-DHAVE_INET_PTON -DHAVE_SELECT -DHAVE_SELECT_H \
			-DHAVE_SETRLIMIT -DHAVE_SIGNAL -DHAVE_SYS_TIME_H \
			-DHAVE_KQUEUE -DHAVE_UNAME -DHAVE_UNISTD_H \
			-DHAVE_STRINGS_H -DHAVE_GAI_STRERROR -DHAVE_ARC4RANDOM \
			-DVERSION=\"$V\" -DHAVE_ROUTE_LIST

NO_TEST ?=		Yes
@


1.7
log
@Update re to 0.5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.6 2016/01/12 09:22:07 czarkoff Exp $
d6 1
a6 1
MASTER_SITES =		${HOMEPAGE:=pub/}
d74 1
a74 1
NO_TEST =		Yes
@


1.6
log
@update to re-0.4.14 rem-0.4.7 baresip-0.4.16

OK feinerer@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.5 2015/10/09 09:54:00 czarkoff Exp $
d31 1
a41 1
MAKE_ENV +=		HAVE_LIBRESOLV=
d45 1
d50 1
d52 1
d60 1
a60 1
			-DARCH=\"${ARCH}\" -DVERSION=\"$V\" -DOPENBSD \
d66 7
a72 6
			-DHAVE_SYSLOG -DHAVE_FORK -DHAVE_INET_NTOP \
			-DHAVE_PWD_H -DHAVE_POLL -DHAVE_INET_PTON \
			-DHAVE_SELECT -DHAVE_SELECT_H -DHAVE_SETRLIMIT \
			-DHAVE_SIGNAL -DHAVE_SYS_TIME_H -DHAVE_KQUEUE \
			-DHAVE_UNAME -DHAVE_UNISTD_H -DHAVE_STRINGS_H \
			-DHAVE_GAI_STRERROR -DHAVE_ROUTE_LIST
@


1.5
log
@Re-enable DTLS in libre

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.4 2015/10/02 19:24:23 czarkoff Exp $
d16 37
a52 29
MAKE_FLAGS +=		OS=openbsd
MAKE_FLAGS +=		SYSROOT=/usr
MAKE_FLAGS +=		ARCH=${ARCH}
MAKE_FLAGS +=		MOD_SUFFIX=.so
MAKE_FLAGS +=		LIBS+="-lssl -lcrypto -lz -lpthread"
MAKE_FLAGS +=		LFLAGS="-L${LOCALBASE}/lib -L/${X11BASE}/lib"
MAKE_FLAGS +=		SH_LFLAGS+="-shared"
MAKE_FLAGS +=		CC="${CC}"
MAKE_FLAGS +=		LD="${CC}"
MAKE_FLAGS +=		APP_LFLAGS+="-rdynamic"
MAKE_FLAGS +=		AFLAGS="${ARFLAGS}"
MAKE_FLAGS +=		BUILD="build-${ARCH}"
MAKE_FLAGS +=		USE_OPENSSL=yes USE_TLS=yes USE_DTLS=yes
MAKE_FLAGS +=		USE_ZLIB=yes
MAKE_FLAGS +=		HAVE_PTHREAD=1 HAVE_PTHREAD_RWLOCK=1 HAVE_LIBPTHREAD=1
MAKE_FLAGS +=		HAVE_GETIFADDRS=1
MAKE_FLAGS +=		HAVE_STRERROR_R=1
MAKE_FLAGS +=		HAVE_GETOPT=1
MAKE_FLAGS +=		HAVE_INTTYPES_H=1
MAKE_FLAGS +=		HAVE_NET_ROUTE_H=1
MAKE_FLAGS +=		HAVE_SYS_SYSCTL_H=1
MAKE_FLAGS +=		HAVE_INET6=1
MAKE_FLAGS +=		HAVE_SYSLOG=1
MAKE_FLAGS +=		HAVE_DLFCN_H=1
MAKE_FLAGS +=		HAVE_LIBRESOLV=1
MAKE_FLAGS +=		HAVE_INET_NTOP=1
MAKE_FLAGS +=		HAVE_INET_PTON=1
MAKE_FLAGS +=		LIBRE_MK=/dev/null
MAKE_FLAGS +=		LIBRE_INC="${LOCALBASE}/include/re"
d56 4
a59 5
CFLAGS +=		-I${X11BASE}/include -I${LOCALBASE}/include \
			-DOPENBSD -DOS=\"openbsd\" -DARCH=\"${ARCH}\" \
			-DVERSION=\"${V}\" -fPIC -std=c99 -pedantic \
			-DUSE_OPENSSL -DUSE_TLS -DUSE_DTLS \
			-DUSE_OPENSSL_DTLS -DUSE_OPENSSL_SRTP -DUSE_ZLIB \
d63 8
a70 6
			-DHAVE_LIBRESOLV -DHAVE_SYSLOG -DHAVE_FORK \
			-DHAVE_INET_NTOP -DHAVE_PWD_H -DHAVE_POLL \
			-DHAVE_INET_PTON -DHAVE_KQUEUE -DHAVE_SELECT \
			-DHAVE_SELECT_H -DHAVE_SETRLIMIT -DHAVE_SIGNAL \
			-DHAVE_SYS_TIME_H -DHAVE_UNAME -DHAVE_UNISTD_H \
			-DHAVE_STRINGS_H -DHAVE_GAI_STRERROR
@


1.4
log
@change my email address in MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.3 2015/07/09 10:36:24 czarkoff Exp $
d51 2
a52 1
			-DUSE_OPENSSL -DUSE_TLS -DUSE_DTLS -DUSE_ZLIB \
@


1.3
log
@Enable kqueue support in re

OK feinerer@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.2 2014/12/11 13:48:42 sthen Exp $
d8 1
a8 1
MAINTAINER =		Dmitrij D. Czarkoff <czarkoff@@gmail.com>
@


1.2
log
@update to re & restund 0.4.11, from maintainer Dmitrij D. Czarkoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.1.1.1 2014/09/25 19:32:37 sthen Exp $
d57 4
a60 4
			-DHAVE_INET_PTON -DHAVE_SELECT -DHAVE_SELECT_H \
			-DHAVE_SETRLIMIT -DHAVE_SIGNAL -DHAVE_SYS_TIME_H \
			-DHAVE_UNAME -DHAVE_UNISTD_H -DHAVE_STRINGS_H \
			-DHAVE_GAI_STRERROR
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d28 1
a28 1
MAKE_FLAGS +=		USE_OPENSSL=yes USE_TLS=yes
d51 3
a53 3
			-DUSE_OPENSSL -DUSE_TLS -DUSE_ZLIB -DHAVE_PTHREAD \
			-DHAVE_GETIFADDRS -DHAVE_STRERROR_R -DHAVE_GETOPT \
			-DHAVE_INTTYPES_H -DHAVE_NET_ROUTE_H \
@


1.1.1.1
log
@Import ports/telephony/baresip, a portable and modular SIP voice/video client.
From maintainer Dmitrij D. Czarkoff, tweak/ok landry@@
@
text
@@
