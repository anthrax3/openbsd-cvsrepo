head	1.3;
access;
symbols
	OPENBSD_5_8:1.1.1.1.0.6
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	sthen_20140925:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2016.01.12.09.22.07;	author czarkoff;	state dead;
branches;
next	1.2;
commitid	MRfsOYO2QD4nnfOW;

1.2
date	2015.10.02.19.01.24;	author czarkoff;	state Exp;
branches;
next	1.1;
commitid	at9mDnJ7YoTqzuxJ;

1.1
date	2014.09.25.19.32.37;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	CSoaIyiD3X8GgoI8;

1.1.1.1
date	2014.09.25.19.32.37;	author sthen;	state Exp;
branches;
next	;
commitid	CSoaIyiD3X8GgoI8;


desc
@@


1.3
log
@update to re-0.4.14 rem-0.4.7 baresip-0.4.16

OK feinerer@@, sthen@@
@
text
@$OpenBSD: patch-Makefile,v 1.2 2015/10/02 19:01:24 czarkoff Exp $
--- Makefile.orig	Sat Sep 26 20:15:57 2015
+++ Makefile	Sun Sep 27 14:48:17 2015
@@@@ -123,13 +123,8 @@@@ ifneq ($(LIBREM_PATH),)
 LIBS	+= -L$(LIBREM_PATH)
 endif
 
-# Static build: include module linker-flags in binary
-ifneq ($(STATIC),)
-LIBS      += $(MOD_LFLAGS)
-else
 LIBS      += -L$(SYSROOT)/local/lib
 MOD_LFLAGS += -L$(SYSROOT)/local/lib
-endif
 
 LIBS      += -lrem -lm
 LIBS      += -L$(SYSROOT)/lib
@@@@ -157,47 +152,38 @@@@ Makefile:	mk/*.mk $(MOD_MK) $(LIBRE_MK)
 
 
 $(SHARED): $(LIB_OBJS)
-	@@echo "  LD      $@@"
-	@@$(LD) $(LFLAGS) $(SH_LFLAGS) $^ -L$(LIBRE_SO) -lre $(LIBS) -o $@@
+	$(LD) $(LFLAGS) $(SH_LFLAGS) $^ -L$(LIBRE_SO) -lre $(LIBS) -o $@@
 
 $(STATICLIB): $(LIB_OBJS)
-	@@echo "  AR      $@@"
-	@@rm -f $@@; $(AR) $(AFLAGS) $@@ $^
+	rm -f $@@; $(AR) $(AFLAGS) $@@ $^
 ifneq ($(RANLIB),)
-	@@echo "  RANLIB  $@@"
-	@@$(RANLIB) $@@
+	$(RANLIB) $@@
 endif
 
 # GPROF requires static linking
 $(BIN):	$(APP_OBJS)
-	@@echo "  LD      $@@"
-ifneq ($(GPROF),)
-	@@$(LD) $(LFLAGS) $(APP_LFLAGS) $^ ../re/libre.a $(LIBS) -o $@@
+ifneq ($(STATIC),)
+	$(LD) $(LFLAGS) $(APP_LFLAGS) $^ -lre $(LIBS) $(MOD_LFLAGS) -o $@@
 else
-	@@$(LD) $(LFLAGS) $(APP_LFLAGS) $^ -L$(LIBRE_SO) -lre $(LIBS) -o $@@
+	$(LD) $(LFLAGS) $(APP_LFLAGS) $^ -lre $(LIBS) -o $@@
 endif
 
 
 .PHONY: test
 test:	$(TEST_BIN)
+	./$(TEST_BIN)
 
 $(TEST_BIN):	$(STATICLIB) $(TEST_OBJS)
-	@@echo "  LD      $@@"
-	@@$(LD) $(LFLAGS) $(TEST_OBJS) \
-		-L$(LIBRE_SO) -L. \
-		-l$(PROJECT) -lre $(LIBS) -o $@@
+	$(LD) $(LFLAGS) $(TEST_OBJS) -L. -l$(PROJECT) -lre $(LIBS) -o $@@
 
 $(BUILD)/%.o: %.c $(BUILD) Makefile $(APP_MK)
-	@@echo "  CC      $@@"
-	@@$(CC) $(CFLAGS) -c $< -o $@@ $(DFLAGS)
+	$(CC) $(CFLAGS) -c $< -o $@@ $(DFLAGS)
 
 $(BUILD)/%.o: %.m $(BUILD) Makefile $(APP_MK)
-	@@echo "  OC      $@@"
-	@@$(CC) $(CFLAGS) $(OBJCFLAGS) -c $< -o $@@ $(DFLAGS)
+	$(CC) $(CFLAGS) $(OBJCFLAGS) -c $< -o $@@ $(DFLAGS)
 
 $(BUILD)/%.o: %.S $(BUILD) Makefile $(APP_MK)
-	@@echo "  AS      $@@"
-	@@$(CC) $(CFLAGS) -c $< -o $@@ $(DFLAGS)
+	$(CC) $(CFLAGS) -c $< -o $@@ $(DFLAGS)
 
 $(BUILD): Makefile
 	@@mkdir -p $(BUILD)/src $(MOD_BLD) $(BUILD)/test
@


1.2
log
@update to baresip 0.4.15

 - GUI
 - bugfixes
 - experimental daala support
 - GTK-dependent modules isolated in -gtk2 subpackage
 - default config now only mentions modules that are packaged

OK feinerer@@, sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.1.1.1 2014/09/25 19:32:37 sthen Exp $
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.orig	Sat Jun 21 13:36:42 2014
+++ Makefile	Thu Sep 25 10:49:52 2014
@@@@ -110,13 +110,8 @@@@ ifneq ($(LIBREM_PATH),)
d18 1
a18 1
@@@@ -141,37 +136,30 @@@@ Makefile:	mk/*.mk $(MOD_MK) $(LIBRE_MK)
d21 1
a21 1
 $(SHARED): $(APP_OBJS)
d26 1
a26 1
 $(STATICLIB): $(APP_OBJS)
d48 12
d76 1
a76 1
 	@@mkdir -p $(BUILD)/src $(MOD_BLD)
@


1.1.1.1
log
@Import ports/telephony/baresip, a portable and modular SIP voice/video client.
From maintainer Dmitrij D. Czarkoff, tweak/ok landry@@
@
text
@@
