head	1.11;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	sthen_20140925:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2017.09.22.07.26.48;	author feinerer;	state Exp;
branches;
next	1.10;
commitid	pCzCSKhadUexTTGq;

1.10
date	2017.06.28.10.20.25;	author czarkoff;	state Exp;
branches;
next	1.9;
commitid	81uiiADjwECdaGFf;

1.9
date	2017.06.08.14.29.37;	author czarkoff;	state Exp;
branches;
next	1.8;
commitid	cMLEk1fcXfb71SwL;

1.8
date	2016.12.26.14.53.25;	author czarkoff;	state Exp;
branches;
next	1.7;
commitid	i8mCVtaSxMbrtMA2;

1.7
date	2016.08.03.09.21.30;	author czarkoff;	state Exp;
branches;
next	1.6;
commitid	vg9MxGMoirR4aZZH;

1.6
date	2016.06.14.16.15.55;	author czarkoff;	state Exp;
branches;
next	1.5;
commitid	MdbIV5Vbslsy7khk;

1.5
date	2016.01.19.23.00.40;	author czarkoff;	state Exp;
branches;
next	1.4;
commitid	XJxkvCkRT1BJPpF9;

1.4
date	2016.01.12.09.22.07;	author czarkoff;	state Exp;
branches;
next	1.3;
commitid	MRfsOYO2QD4nnfOW;

1.3
date	2015.10.02.19.20.32;	author czarkoff;	state Exp;
branches;
next	1.2;
commitid	Hr8pQkTS2YsjR227;

1.2
date	2014.12.29.20.40.27;	author jca;	state dead;
branches;
next	1.1;
commitid	lIUPuvNyv8BVlHix;

1.1
date	2014.09.25.19.32.37;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	CSoaIyiD3X8GgoI8;

1.1.1.1
date	2014.09.25.19.32.37;	author sthen;	state Exp;
branches;
next	;
commitid	CSoaIyiD3X8GgoI8;


desc
@@


1.11
log
@Update to baresip 0.5.5

"go ahead" czarkoff@@
@
text
@$OpenBSD: patch-src_config_c,v 1.10 2017/06/28 10:20:25 czarkoff Exp $
Index: src/config.c
--- src/config.c.orig
+++ src/config.c
@@@@ -385,7 +385,7 @@@@ static const char *default_video_device(void)
 #endif
 
 #else
-	return "v4l2,/dev/video0";
+	return "v4l2,/dev/video";
 #endif
 }
 
@@@@ -612,31 +612,31 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "stdio" MOD_EXT "\n");
 #endif
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "cons" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "evdev" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "evdev" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "httpd" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Audio codec Modules (in order)\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "opus" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "silk" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "amr" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "g7221" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "g722" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "g726" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "opus" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "silk" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "amr" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "g7221" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "g722" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "g726" MOD_EXT "\n");
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "g711" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "gsm" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "l16" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "speex" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "bv32" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "mpa" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "codec2" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "ilbc" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "isac" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "gsm" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "l16" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "speex" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "bv32" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "mpa" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "codec2" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "ilbc" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "isac" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Audio filter Modules (in encoding order)\n");
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "vumeter" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "sndfile" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "speex_aec" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "speex_pp" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "speex_aec" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "speex_pp" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "plc" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Audio driver Modules\n");
@@@@ -655,8 +655,8 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "alsa" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "pulse" MOD_EXT "\n");
 #endif
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "jack" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "portaudio" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "jack" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "portaudio" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "aubridge" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "aufile" MOD_EXT "\n");
 
@@@@ -668,9 +668,9 @@@@ int config_write_template(const char *file, const stru
 #else
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "avcodec" MOD_EXT "\n");
 #endif
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "vp8" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "vp9" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "h265" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "vp8" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "vp9" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "h265" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Video filter Modules (in encoding order)\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "selfview" MOD_EXT "\n");
@@@@ -691,14 +691,14 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "dshow" MOD_EXT "\n");
 
 #else
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "v4l" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "v4l2" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "v4l2_codec" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "v4l" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "v4l2" MOD_EXT "\n");
+//	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "v4l2_codec" MOD_EXT "\n");
 #endif
 #ifdef USE_AVFORMAT
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "avformat" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "avformat" MOD_EXT "\n");
 #endif
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "x11grab" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "x11grab" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "cairo" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "vidbridge" MOD_EXT "\n");
 
@@@@ -709,16 +709,16 @@@@ int config_write_template(const char *file, const stru
 #ifdef LINUX
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "directfb" MOD_EXT "\n");
 #endif
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "x11" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "x11" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "sdl2" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "fakevideo" MOD_EXT "\n");
 
 #endif /* USE_VIDEO */
 
 	(void)re_fprintf(f, "\n# Audio/Video source modules\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "rst" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "gst1" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "gst_video1" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "rst" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "gst1" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "gst_video1" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Media NAT modules\n");
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "stun" MOD_EXT "\n");
@@@@ -727,8 +727,8 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "natpmp" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Media encryption modules\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "srtp" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "dtls_srtp" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "srtp" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "dtls_srtp" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "zrtp" MOD_EXT "\n");
 	(void)re_fprintf(f, "\n");
 
@@@@ -773,8 +773,8 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "\n");
 	(void)re_fprintf(f, "http_listen\t\t0.0.0.0:8000\n");
 
-	(void)re_fprintf(f, "\n");
-	(void)re_fprintf(f, "evdev_device\t\t/dev/input/event0\n");
+//	(void)re_fprintf(f, "\n");
+//	(void)re_fprintf(f, "evdev_device\t\t/dev/input/event0\n");
 
 	(void)re_fprintf(f, "\n# Speex codec parameters\n");
 	(void)re_fprintf(f, "speex_quality\t\t7 # 0-10\n");
@


1.10
log
@update to baresip 0.5.4
@
text
@d1 1
a1 1
$OpenBSD: patch-src_config_c,v 1.9 2017/06/08 14:29:37 czarkoff Exp $
d5 1
a5 1
@@@@ -383,7 +383,7 @@@@ static const char *default_video_device(void)
d14 1
a14 1
@@@@ -609,31 +609,31 @@@@ int config_write_template(const char *file, const stru
d63 1
a63 1
@@@@ -652,8 +652,8 @@@@ int config_write_template(const char *file, const stru
d74 1
a74 1
@@@@ -665,9 +665,9 @@@@ int config_write_template(const char *file, const stru
d87 1
a87 1
@@@@ -688,14 +688,14 @@@@ int config_write_template(const char *file, const stru
d107 1
a107 1
@@@@ -706,16 +706,16 @@@@ int config_write_template(const char *file, const stru
d128 1
a128 1
@@@@ -724,8 +724,8 @@@@ int config_write_template(const char *file, const stru
d139 1
a139 1
@@@@ -770,8 +770,8 @@@@ int config_write_template(const char *file, const stru
@


1.9
log
@Update to baresip-0.5.3, rem-0.5.1, re-0.5.3

While at it, disable Daala support, as corresponding module is not being
updated upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_config_c,v 1.8 2016/12/26 14:53:25 czarkoff Exp $
d5 1
a5 1
@@@@ -378,7 +378,7 @@@@ static const char *default_video_device(void)
d14 1
a14 1
@@@@ -603,31 +603,31 @@@@ int config_write_template(const char *file, const stru
d63 1
a63 1
@@@@ -646,8 +646,8 @@@@ int config_write_template(const char *file, const stru
d74 1
a74 1
@@@@ -659,9 +659,9 @@@@ int config_write_template(const char *file, const stru
d87 1
a87 1
@@@@ -682,14 +682,14 @@@@ int config_write_template(const char *file, const stru
d107 1
a107 1
@@@@ -700,16 +700,16 @@@@ int config_write_template(const char *file, const stru
d128 1
a128 1
@@@@ -718,8 +718,8 @@@@ int config_write_template(const char *file, const stru
d139 1
a139 1
@@@@ -764,8 +764,8 @@@@ int config_write_template(const char *file, const stru
@


1.8
log
@Update to baresip 0.5.0
@
text
@d1 4
a4 3
$OpenBSD: patch-src_config_c,v 1.7 2016/08/03 09:21:30 czarkoff Exp $
--- src/config.c.orig	Fri Dec 23 15:43:25 2016
+++ src/config.c	Sun Dec 25 15:52:59 2016
d74 1
a74 1
@@@@ -659,9 +659,10 @@@@ int config_write_template(const char *file, const stru
a83 1
+	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "daala" MOD_EXT "\n");
d87 1
a87 1
@@@@ -682,14 +683,14 @@@@ int config_write_template(const char *file, const stru
d107 1
a107 1
@@@@ -700,16 +701,16 @@@@ int config_write_template(const char *file, const stru
d128 1
a128 1
@@@@ -718,8 +719,8 @@@@ int config_write_template(const char *file, const stru
d139 1
a139 1
@@@@ -764,8 +765,8 @@@@ int config_write_template(const char *file, const stru
@


1.7
log
@update to baresip-0.4.20
@
text
@d1 13
a13 4
$OpenBSD: patch-src_config_c,v 1.6 2016/06/14 16:15:55 czarkoff Exp $
--- src/config.c.orig	Fri Jul 22 21:17:45 2016
+++ src/config.c	Wed Aug  3 11:00:53 2016
@@@@ -592,28 +592,24 @@@@ int config_write_template(const char *file, const stru
d18 1
d29 1
d31 1
d40 3
d46 1
d48 3
d62 1
a62 2
@@@@ -631,8 +627,8 @@@@ int config_write_template(const char *file, const stru
 #else
d64 1
d66 1
d68 2
d71 1
a71 3
+	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "aufile" MOD_EXT "\n");
 
 #ifdef USE_VIDEO
d73 1
a73 1
@@@@ -642,10 +638,14 @@@@ int config_write_template(const char *file, const stru
d78 2
d83 1
a83 1
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "daala" MOD_EXT "\n");
d86 3
a88 8
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "selfview" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "selfview" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "snapshot" MOD_EXT "\n");
 
 	(void)re_fprintf(f, "\n# Video source modules\n");
 #if defined (DARWIN)
@@@@ -657,38 +657,33 @@@@ int config_write_template(const char *file, const stru
 #endif
d93 2
d96 1
a102 1
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "cairo" MOD_EXT "\n");
d104 2
a105 1
+	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "vidbridge" MOD_EXT "\n");
d107 3
a109 3
 	(void)re_fprintf(f, "\n# Video display modules\n");
 #ifdef DARWIN
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "opengl" MOD_EXT "\n");
a111 1
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "sdl2" MOD_EXT "\n");
d113 2
a114 1
+	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "fakevideo" MOD_EXT "\n");
d118 8
a125 5
-	(void)re_fprintf(f,
-			"\n# Audio/Video source modules\n"
-			"#module\t\t\t" MOD_PRE "rst" MOD_EXT "\n"
-			"#module\t\t\t" MOD_PRE "gst" MOD_EXT "\n");
-
d128 2
a129 4
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "turn" MOD_EXT "\n");
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "ice" MOD_EXT "\n");
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "natpmp" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "natpmp" MOD_EXT "\n");
d136 1
a136 1
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "zrtp" MOD_EXT "\n");
d139 1
a139 22
 	(void)re_fprintf(f, "\n#------------------------------------"
@@@@ -705,14 +700,22 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "\n");
 	(void)re_fprintf(f, "module_app\t\t" MOD_PRE "auloop"MOD_EXT"\n");
 	(void)re_fprintf(f, "module_app\t\t"  MOD_PRE "contact"MOD_EXT"\n");
+	(void)re_fprintf(f, "#module_app\t\t"  MOD_PRE "echo"MOD_EXT"\n");
 	(void)re_fprintf(f, "module_app\t\t"  MOD_PRE "menu"MOD_EXT"\n");
 	(void)re_fprintf(f, "#module_app\t\t"  MOD_PRE "mwi"MOD_EXT"\n");
 	(void)re_fprintf(f, "#module_app\t\t" MOD_PRE "natbd"MOD_EXT"\n");
-	(void)re_fprintf(f, "#module_app\t\t" MOD_PRE "presence"MOD_EXT"\n");
+	(void)re_fprintf(f, "module_app\t\t" MOD_PRE "presence"MOD_EXT"\n");
 	(void)re_fprintf(f, "#module_app\t\t" MOD_PRE "syslog"MOD_EXT"\n");
 #ifdef USE_VIDEO
 	(void)re_fprintf(f, "module_app\t\t" MOD_PRE "vidloop"MOD_EXT"\n");
 #endif
+
+	(void)re_fprintf(f, "\n#------------------------------------"
+			 "------------------------------------------\n");
+	(void)re_fprintf(f, "# These modules are in baresip-gtk2 package:\n");
+	(void)re_fprintf(f, "#module\t\t" MOD_PRE "gst1" MOD_EXT"\n");
+	(void)re_fprintf(f, "#module\t\t" MOD_PRE "gst_video1" MOD_EXT"\n");
+	(void)re_fprintf(f, "#module_app\t" MOD_PRE "gtk" MOD_EXT"\n");
d141 1
a142 6
 	(void)re_fprintf(f, "\n#------------------------------------"
@@@@ -725,9 +728,6 @@@@ int config_write_template(const char *file, const stru
 
 	(void)re_fprintf(f, "\n");
 	(void)re_fprintf(f, "http_listen\t\t0.0.0.0:8000\n");
-
d145 2
@


1.6
log
@update to re-0.4.16 and baresip-0.4.19

Changes:
 - removed remaining static archs support goo,
 - use arc4random() in re,
 - new baresip module "mpa" for corresponding codec,
 - multiple bugfixes.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_config_c,v 1.5 2016/01/19 23:00:40 czarkoff Exp $
--- src/config.c.orig	Fri May 20 17:57:56 2016
+++ src/config.c	Tue Jun 14 15:18:33 2016
@@@@ -552,28 +552,24 @@@@ int config_write_template(const char *file, const stru
d43 1
a43 1
@@@@ -591,8 +587,8 @@@@ int config_write_template(const char *file, const stru
d53 1
a53 1
@@@@ -602,10 +598,13 @@@@ int config_write_template(const char *file, const stru
d57 4
a60 1
-	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "vpx" MOD_EXT "\n");
a61 2
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "h265" MOD_EXT "\n");
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "vpx" MOD_EXT "\n");
d70 1
a70 1
@@@@ -617,38 +616,33 @@@@ int config_write_template(const char *file, const stru
d119 1
a119 1
@@@@ -665,14 +659,22 @@@@ int config_write_template(const char *file, const stru
d143 1
a143 1
@@@@ -685,9 +687,6 @@@@ int config_write_template(const char *file, const stru
@


1.5
log
@update to baresip-0.4.17

OK and fix from feinerer@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_config_c,v 1.4 2016/01/12 09:22:07 czarkoff Exp $
--- src/config.c.orig	Sun Jan 17 13:17:04 2016
+++ src/config.c	Sun Jan 17 19:04:50 2016
@@@@ -552,27 +552,23 @@@@ int config_write_template(const char *file, const stru
d27 1
d31 1
d43 1
a43 1
@@@@ -590,8 +586,8 @@@@ int config_write_template(const char *file, const stru
d53 1
a53 1
@@@@ -601,10 +597,13 @@@@ int config_write_template(const char *file, const stru
d69 1
a69 1
@@@@ -616,38 +615,33 @@@@ int config_write_template(const char *file, const stru
d118 1
a118 1
@@@@ -664,14 +658,22 @@@@ int config_write_template(const char *file, const stru
d142 1
a142 1
@@@@ -684,9 +686,6 @@@@ int config_write_template(const char *file, const stru
@


1.4
log
@update to re-0.4.14 rem-0.4.7 baresip-0.4.16

OK feinerer@@, sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_config_c,v 1.3 2015/10/02 19:20:32 czarkoff Exp $
--- src/config.c.orig	Tue Dec  1 13:09:48 2015
+++ src/config.c	Thu Jan  7 21:34:41 2016
@@@@ -552,21 +552,17 @@@@ int config_write_template(const char *file, const stru
d33 9
a41 1
@@@@ -591,7 +587,6 @@@@ int config_write_template(const char *file, const stru
d46 2
d51 1
a51 1
@@@@ -601,10 +596,12 @@@@ int config_write_template(const char *file, const stru
d57 1
d67 1
a67 1
@@@@ -616,38 +613,30 @@@@ int config_write_template(const char *file, const stru
d82 1
d91 1
d112 1
d116 5
a120 1
@@@@ -667,11 +656,17 @@@@ int config_write_template(const char *file, const stru
d131 6
a136 5
+	(void)re_fprintf(f,
+			"\n# These modules are in baresip-gtk2 package:\n"
+			"#module\t\tgst1.so\n"
+			"#module\t\tgst1_video.so\n"
+			"#module_app\t\tgtk.so\n");
d140 1
a140 1
@@@@ -684,9 +679,6 @@@@ int config_write_template(const char *file, const stru
@


1.3
log
@update to baresip 0.4.15

 - GUI
 - bugfixes
 - experimental daala support
 - GTK-dependent modules isolated in -gtk2 subpackage
 - default config now only mentions modules that are packaged

OK feinerer@@, sthen@@
@
text
@d1 3
a3 3
$OpenBSD$
--- src/config.c.orig	Sat Sep 26 20:15:57 2015
+++ src/config.c	Fri Oct  2 19:00:00 2015
d41 1
a41 1
@@@@ -601,10 +596,11 @@@@ int config_write_template(const char *file, const stru
d52 1
d56 1
a56 1
@@@@ -616,38 +612,30 @@@@ int config_write_template(const char *file, const stru
d102 1
a102 1
@@@@ -667,11 +655,17 @@@@ int config_write_template(const char *file, const stru
d121 1
a121 1
@@@@ -684,9 +678,6 @@@@ int config_write_template(const char *file, const stru
@


1.2
log
@Update to baresip-0.4.12, removing patches and libuuid dep.

From Dmitrij D. Czarkoff.
@
text
@d1 4
a4 31
$OpenBSD: patch-src_config_c,v 1.1 2014/09/25 19:32:37 sthen Exp $
--- src/config.c.orig	Sat Jun 21 14:36:42 2014
+++ src/config.c	Tue Sep  9 21:45:13 2014
@@@@ -20,7 +20,7 @@@@
 static struct config core_config = {
 	/* Input */
 	{
-		"/dev/event0",
+		"/dev/wskbd",
 		5555
 	},
 
@@@@ -332,6 +332,8 @@@@ static const char *default_audio_device(void)
 	return "coreaudio,nil";
 #elif defined (FREEBSD)
 	return "oss,/dev/dsp";
+#elif defined (OPENBSD)
+	return "sndio,default";
 #elif defined (WIN32)
 	return "winwave,nil";
 #elif defined (ANDROID)
@@@@ -391,7 +393,7 @@@@ static int core_config_template(struct re_printf *pf, 
 
 	err |= re_hprintf(pf,
 			  "\n# Core\n"
-			  "poll_method\t\t%s\t\t# poll, select, epoll ..\n"
+			  "poll_method\t\t%s\t\t# poll, select ..\n"
 			  "\n# Input\n"
 			  "input_device\t\t/dev/event0\n"
 			  "input_port\t\t5555\n"
@@@@ -561,21 +563,17 @@@@ int config_write_template(const char *file, const stru
d12 1
a12 1
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "opus" MOD_EXT "\n");
d14 1
a14 1
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "amr" MOD_EXT "\n");
d16 6
a21 2
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "g722" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "g726" MOD_EXT "\n");
d23 3
a25 3
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "gsm" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "l16" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "speex" MOD_EXT "\n");
d27 3
d33 1
a33 6
@@@@ -593,11 +591,12 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "coreaudio" MOD_EXT "\n");
 #elif defined (ANDROID)
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "opensles" MOD_EXT "\n");
+#elif defined (OPENBSD)
+	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "sndio" MOD_EXT "\n");
a34 1
 	(void)re_fprintf(f, "module\t\t\t" MOD_PRE "oss" MOD_EXT "\n");
d41 25
a65 2
@@@@ -629,21 +628,17 @@@@ int config_write_template(const char *file, const stru
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "avformat" MOD_EXT "\n");
d67 1
a67 1
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "x11grab" MOD_EXT "\n");
d69 1
d75 1
a75 1
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "x11" MOD_EXT "\n");
d77 1
d81 1
a81 1
 	(void)re_fprintf(f,
d85 1
a85 2
+			"\n# Audio/Video source modules\n");
 
d88 5
a92 1
@@@@ -654,6 +649,7 @@@@ int config_write_template(const char *file, const stru
d94 4
a97 3
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "srtp" MOD_EXT "\n");
 	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "dtls_srtp" MOD_EXT "\n");
+	(void)re_fprintf(f, "#module\t\t\t" MOD_PRE "zrtp" MOD_EXT "\n");
d101 29
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import ports/telephony/baresip, a portable and modular SIP voice/video client.
From maintainer Dmitrij D. Czarkoff, tweak/ok landry@@
@
text
@@
