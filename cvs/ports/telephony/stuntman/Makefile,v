head	1.18;
access;
symbols
	OPENBSD_6_1:1.13.0.2
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.11.0.2
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.7.0.6
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.6.0.2
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	sthen_20130618:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.07.16.19.19.02;	author espie;	state Exp;
branches;
next	1.17;
commitid	tt0GhWK5c4uf9ILG;

1.17
date	2017.06.22.15.52.46;	author sthen;	state Exp;
branches;
next	1.16;
commitid	T85W0jYm0MhJiux6;

1.16
date	2017.05.27.19.57.07;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	H08QxD8pqoInz6Rz;

1.15
date	2017.05.27.13.55.59;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	SykG6k6P85X3Gc2i;

1.14
date	2017.04.10.11.46.34;	author sthen;	state Exp;
branches;
next	1.13;
commitid	HY6VNZxjJWzKQFDV;

1.13
date	2017.03.07.14.22.15;	author espie;	state Exp;
branches;
next	1.12;
commitid	ovzYQUSpyq6vQp3w;

1.12
date	2017.03.07.12.49.35;	author espie;	state Exp;
branches;
next	1.11;
commitid	4vMwkmtEXWcIj09e;

1.11
date	2016.05.27.22.50.31;	author sthen;	state Exp;
branches;
next	1.10;
commitid	KlGkUVXJWFCIOHYG;

1.10
date	2016.02.21.16.17.26;	author jsg;	state Exp;
branches;
next	1.9;
commitid	IZQsfcjAwN1evvTh;

1.9
date	2016.02.21.11.45.25;	author jsg;	state Exp;
branches;
next	1.8;
commitid	hmrlJabpoKlXZ7t2;

1.8
date	2015.12.28.08.46.07;	author jasper;	state Exp;
branches;
next	1.7;
commitid	QQdXcoUUkrY2xR6W;

1.7
date	2014.10.24.14.08.40;	author sthen;	state Exp;
branches;
next	1.6;
commitid	pAd89P21La8fbDgh;

1.6
date	2014.07.22.10.55.41;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	3LzguPEQl5LkjlcD;

1.5
date	2014.07.12.11.25.00;	author sthen;	state Exp;
branches;
next	1.4;
commitid	76ij4rO0HAnPaXZj;

1.4
date	2013.12.24.13.57.18;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2013.07.04.06.57.45;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2013.07.03.21.44.09;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.06.18.14.28.37;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.06.18.14.28.37;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.18
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.17 2017/06/22 15:52:46 sthen Exp $

COMMENT =	STUN server implementing RFCs 5389, 5769, and 5780
NOT_FOR_ARCHS = arm hppa # atomic ops

VERSION =	1.2.13
DISTNAME =	stunserver-${VERSION}
PKGNAME =	stuntman-${VERSION}
CATEGORIES =	telephony net
EXTRACT_SUFX =	.tgz

MAINTAINER =	Roman Kravchuk <kravchuk.kp@@gmail.com>

HOMEPAGE =	http://www.stunprotocol.org/

MASTER_SITES =	${HOMEPAGE}

# Apache 2.0 license
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB +=	c crypto m pthread ${COMPILER_LIBCXX}

BUILD_DEPENDS =	devel/boost

MAKE_FLAGS =	BOOST_INCLUDE='-I${LOCALBASE}/include' \
		FLAVOR_FLAGS='${CXXFLAGS} -Wno-unknown-pragmas -DHAVE_ARC4RANDOM' \
		CXX="${CXX}"

USE_GMAKE =	Yes

WRKDIST =	${WRKDIR}/stunserver

do-install:
	cd ${WRKSRC}; ${INSTALL_PROGRAM} stunserver stunclient ${PREFIX}/sbin
	cd ${WRKSRC}/resources/; ${INSTALL_MAN} stunclient.1 stunserver.1 \
	    ${PREFIX}/man/man1

do-test:
	${WRKSRC}/stuntestcode

.include <bsd.port.mk>
@


1.17
log
@update to stuntman-1.2.13, from maintainer Roman Kravchuk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2017/05/27 19:57:07 ajacoutot Exp $
d21 1
a21 1
WANTLIB +=	c crypto m pthread ${LIBCXX}
@


1.16
log
@Bring rc_bg back.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2017/05/27 13:55:59 ajacoutot Exp $
d6 1
a6 1
VERSION =	1.2.9
a10 1
REVISION =	1
@


1.15
log
@I forgot the bump commit...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2017/04/10 11:46:34 sthen Exp $
d11 1
a11 1
REVISION =	0
@


1.14
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2017/03/07 14:22:15 espie Exp $
d11 1
@


1.13
log
@better fix, don't commit before coffee
thx aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2017/03/07 12:49:35 espie Exp $
d21 1
a21 1
WANTLIB +=	c crypto m pthread stdc++
@


1.12
log
@no idea where this g++ comes from but it's easy to fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/05/27 22:50:31 sthen Exp $
d27 1
a27 1
		CXX=c++
@


1.11
log
@update to stuntman-1.2.9, from maintainer Roman Kravchuk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/02/21 16:17:26 jsg Exp $
d26 2
a27 1
		FLAVOR_FLAGS='${CXXFLAGS} -Wno-unknown-pragmas -DHAVE_ARC4RANDOM'
@


1.10
log
@Don't attempt to build on arm.  sync atomic builtins required.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/02/21 11:45:25 jsg Exp $
d6 1
a6 1
VERSION =	1.2.7
@


1.9
log
@Remove sparc64 from NOT_FOR_ARCHS.  Builds without any problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/12/28 08:46:07 jasper Exp $
d4 1
a4 1
NOT_FOR_ARCHS = hppa # atomic ops
@


1.8
log
@give this a chance to build on mips64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/10/24 14:08:40 sthen Exp $
d4 1
a4 1
NOT_FOR_ARCHS = hppa sparc64 # atomic ops
@


1.7
log
@update to stunserver-1.2.7 from maintainer Roman Kravchuk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/07/22 10:55:41 ajacoutot Exp $
d4 1
a4 1
NOT_FOR_ARCHS = hppa mips64 mips64el sparc64 # atomic ops
@


1.6
log
@Tweak documentation according to recent rc changes.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/07/12 11:25:00 sthen Exp $
d6 1
a6 2
VERSION =	1.2.5
REVISION =	1
@


1.5
log
@don't use "echo 'pkg_scripts="${pkg_scripts} icinga' >> /etc/rc.conf.local"
examples
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/12/24 13:57:18 sthen Exp $
d7 1
a7 1
REVISION =	0
@


1.4
log
@Update to stuntman 1.2.5, add patches to use arc4random.
From maintainer Roman Kravchuk.
@
text
@d1 1
a1 1
# $OpenBSD: $
d7 1
@


1.3
log
@add two more of the usual suspects
@
text
@d1 1
a1 1
# $OpenBSD:
d6 1
a6 1
VERSION =	1.2.3
d26 1
a26 1
		FLAVOR_FLAGS='${CXXFLAGS} -Wno-unknown-pragmas'
@


1.2
log
@add some NOT_FOR_ARCHS, atomic ops
@
text
@d4 1
a4 1
NOT_FOR_ARCHS = hppa sparc64 # atomic ops
@


1.1
log
@Initial revision
@
text
@d4 1
@


1.1.1.1
log
@import ports/telephony/stuntman, from Roman Kravchuk, ok dcoppa

STUNTMAN is an open source, high performance STUN server, implementation
of the STUN protocol as specified in RFCs 5389, 5769, and 5780. It also
includes backwards compatibility for RFC 3489.
@
text
@@
