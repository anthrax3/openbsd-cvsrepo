head	1.3;
access;
symbols
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.1.0.2
	OPENBSD_4_6_BASE:1.1.1.1
	sthen_20090604:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2012.04.22.21.44.24;	author sthen;	state dead;
branches;
next	1.2;

1.2
date	2009.09.12.09.42.04;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.04.13.44.09;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.04.13.44.09;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to kamailio 3.2.3, mostly from Roman Kravchuk (taking maintainer,
previous maintainer ok).
@
text
@$OpenBSD: patch-scripts_kamctl,v 1.2 2009/09/12 09:42:04 sthen Exp $
--- scripts/kamctl.orig	Tue Jul 14 15:48:56 2009
+++ scripts/kamctl	Sat Sep 12 09:04:33 2009
@@@@ -56,7 +56,7 @@@@ fi
 if [ -f "$MYLIBDIR/kamctl.base" ]; then
 	. "$MYLIBDIR/kamctl.base"
 else
-	echo -e "Cannot load core functions '$MYLIBDIR/kamctl.base' - exiting ...\n"
+	printf "Cannot load core functions '$MYLIBDIR/kamctl.base' - exiting ...\n"
 	exit -1
 fi
 
@@@@ -1795,7 +1795,7 @@@@ openser_stop() {
 options_ping() {
 	myhost=`get_my_host`
 	require_ctlengine
-	CMD="t_uac_dlg OPTIONS \"$1\" \".\" \".\" \"From:daemon@@$myhost"$'\r\n'"To:<$1>"$'\r\n'"Contact:daemon@@$myhost"$'\r\n'"\""
+	CMD="t_uac_dlg OPTIONS \"$1\" \".\" \".\" \"From:daemon@@$myhost"$(printf '\r\n')"To:<$1>"$(printf '\r\n')"Contact:daemon@@$myhost"$(printf '\r\n')"\""
 	RET=`$CTLCMD $CMD | head -1`
 	print_status $RET
 }
@


1.2
log
@- fix unportable code in scripts;

"echo -e" -> "printf"
"exit -1" -> "exit 255"

- some of the patches had hand-rolled chunks to replace /bin/bash
with /bin/sh near a CVS keyword; remove these and replace with a
pre-configure target making it easier to update-patches

- change sample config to disable hardcoded escape sequences for
colours by default

- bump PKGNAME-main
@
text
@d1 1
a1 1
$OpenBSD: patch-scripts_kamctl,v 1.1.1.1 2009/06/04 13:44:09 sthen Exp $
@


1.1
log
@Initial revision
@
text
@d1 13
a13 11
$OpenBSD$

# N.B. Hand-edited to avoid CVS keywords.

--- scripts/kamctl.orig	Wed May 13 21:34:58 2009
+++ scripts/kamctl	Wed May 13 21:36:31 2009
@@@@ -1,2 +1,2 @@@@
-#!/usr/local/bin/bash
+#!/bin/sh
 #
@@@@ -1654,7 +1654,7 @@@@ openser_stop() {
@


1.1.1.1
log
@import telephony/kamailio, reworked from a port submission by Don Jackson.
some more work still to do but most things should run ok, and it's easier
to handle that in-tree.

KAMAILIO (OpenSER) is a mature and flexible open source SIP server (RFC3261).
It can be used on systems with limitted resources as well as on carrier grade
servers, scaling to up to thousands call setups per second. It is written in
pure C for Unix/Linux-like systems with architecture specific optimizations to
offer high performances. It is customizable, being able to feature as fast load
balancer; SIP server flavours: registrar, location server, proxy server,
redirect server; gateway to SMS/XMPP; or advanced VoIP application server.
@
text
@@
