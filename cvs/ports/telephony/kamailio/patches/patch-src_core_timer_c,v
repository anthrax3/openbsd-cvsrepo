head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.07.03.22.14.20;	author sthen;	state Exp;
branches;
next	;
commitid	3YCFei450KKbueMF;


desc
@@


1.1
log
@update to Kamailio 5.0.2, from maintainer Roman Kravchuk,
plus minor wantlib cleanup by me
@
text
@$OpenBSD$
--- src/core/timer.c.orig	Mon May 15 22:55:54 2017
+++ src/core/timer.c	Mon May 15 22:57:05 2017
@@@@ -244,7 +244,11 @@@@ int init_timer()
 
 	/* initial values */
 	memset(timer_lst, 0, sizeof(struct timer_lists));
+#ifdef HAVE_ARC4RANDOM
+	*ticks=arc4random();
+#else
 	*ticks=random(); /* random value for start, for debugging */
+#endif
 	prev_ticks=last_ticks=last_adj_check=*ticks;
 	*running_timer=0;
 	if (gettimeofday(&start_time, 0)<0){
@
