head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.07.03.22.14.20;	author sthen;	state Exp;
branches;
next	;
commitid	3YCFei450KKbueMF;


desc
@@


1.1
log
@update to Kamailio 5.0.2, from maintainer Roman Kravchuk,
plus minor wantlib cleanup by me
@
text
@$OpenBSD$

Index: src/modules/auth_identity/auth_crypt.c
--- src/modules/auth_identity/auth_crypt.c.orig
+++ src/modules/auth_identity/auth_crypt.c
@@@@ -114,7 +114,7 @@@@ int check_x509_subj(X509 *pcert, str* sdom)
 
 			if (actname->type == GEN_DNS || actname->type == GEN_URI) {
 				/* we've found one */
-#if OPENSSL_VERSION_NUMBER >= 0x010100000L
+#if OPENSSL_VERSION_NUMBER >= 0x010100000L && !defined(LIBRESSL_VERSION_NUMBER)
 				altptr = (char *)ASN1_STRING_get0_data(actname->d.ia5);
 #else
 				altptr = (char *)ASN1_STRING_data(actname->d.ia5);
@
