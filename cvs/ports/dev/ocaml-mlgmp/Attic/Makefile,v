head	1.2;
access;
symbols
	edd_20120716:1.1.1.1 edd:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2012.07.16.15.48.16;	author edd;	state dead;
branches;
next	1.1;

1.1
date	2012.07.16.15.41.26;	author edd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.07.16.15.41.26;	author edd;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Kludged my last import - my apologies.
@
text
@# $OpenBSD: Makefile,v 1.1 2012/07/16 15:41:26 edd Exp $

COMMENT =		GMP bindings for OCaml

V =			0.13
DISTNAME =		mlgmp-${V}
PKGNAME =		ocaml-mlgmp-${V}

CATEGORIES =		devel math
HOMEPAGE =		http://caml.inria.fr/cgi-bin/hump.en.cgi?contrib=278
MAINTAINER =		Edd Barrett <edd@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes

MASTER_SITES =		http://theunixzoo.co.uk/files/

MODULES =		lang/ocaml
BUILD_DEPENDS =		devel/gmp devel/mpfr
RUN_DEPENDS =		${BUILD_DEPENDS}

USE_GMAKE =		Yes

# overide their site specific include/lib paths
MAKE_FLAGS += GMP_LIBDIR=${LOCALBASE}/lib
MAKE_FLAGS += GMP_INCLUDES=-I${LOCALBASE}/include
MAKE_FLAGS += CFLAGS_MISC="${CFLAGS}"

# build does not support just bytecode, but we can
# deal with this my calling certain make targets
LIBS_NATIVE =	gmp.a gmp.cmxa
LIBS_OTHER =	libmlgmp.a gmp.cma gmp.cmi
MAKE_FLAGS +=	LIBS="${LIBS_OTHER} ${MODOCAML_NATIVE:L:S/yes/${LIBS_NATIVE}/:S/no//}"
MAKE_FLAGS +=	TESTS="test_suite ${MODOCAML_NATIVE:L:S/yes/test_suite.opt/:S/no//}"
MAKE_FLAGS +=	TESTS_RUN="tests-nonative ${MODOCAML_NATIVE:L:S/yes/tests-native/:S/no//}"

REGRESS_TARGET =	tests

# make dependencies are screwed up in the release tarball
pre-build:
	cd ${WRKBUILD} && ${MAKE_PROGRAM} clean

.include <bsd.port.mk>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.60 2010/10/24 20:41:23 ajacoutot Exp $
@


1.1.1.1
log
@Import mlgmp for ocaml.

OK dcoppa@@
@
text
@@
