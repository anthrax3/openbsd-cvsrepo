head	1.55;
access;
symbols
	OPENBSD_6_2:1.55.0.2
	OPENBSD_6_2_BASE:1.55
	OPENBSD_6_1:1.48.0.2
	OPENBSD_6_1_BASE:1.48
	OPENBSD_6_0:1.46.0.2
	OPENBSD_6_0_BASE:1.46
	OPENBSD_5_9:1.45.0.4
	OPENBSD_5_9_BASE:1.45
	OPENBSD_5_8:1.45.0.6
	OPENBSD_5_8_BASE:1.45
	OPENBSD_5_7:1.45.0.2
	OPENBSD_5_7_BASE:1.45
	OPENBSD_5_6:1.44.0.4
	OPENBSD_5_6_BASE:1.44
	OPENBSD_5_5:1.44.0.2
	OPENBSD_5_5_BASE:1.44
	OPENBSD_5_4:1.43.0.2
	OPENBSD_5_4_BASE:1.43
	OPENBSD_5_3:1.39.0.2
	OPENBSD_5_3_BASE:1.39
	OPENBSD_5_2:1.36.0.2
	OPENBSD_5_2_BASE:1.36
	OPENBSD_5_1_BASE:1.34
	OPENBSD_5_1:1.34.0.2
	OPENBSD_5_0:1.32.0.2
	OPENBSD_5_0_BASE:1.32
	OPENBSD_4_9:1.31.0.2
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.25.0.2
	OPENBSD_4_8_BASE:1.25
	OPENBSD_4_7:1.22.0.2
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.20.0.2
	OPENBSD_4_6_BASE:1.20
	OPENBSD_4_5:1.18.0.2
	OPENBSD_4_5_BASE:1.18
	OPENBSD_4_4:1.16.0.2
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.11.0.2
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	ajacoutot_20061019:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.55
date	2017.09.29.16.48.50;	author jca;	state Exp;
branches;
next	1.54;
commitid	uStp8kLM3AQdeVRh;

1.54
date	2017.09.27.20.36.17;	author jca;	state Exp;
branches;
next	1.53;
commitid	veD5c8S8QsX9QmHq;

1.53
date	2017.09.27.20.11.21;	author naddy;	state Exp;
branches;
next	1.52;
commitid	SelyFDc365wvLSOC;

1.52
date	2017.07.26.22.45.26;	author sthen;	state Exp;
branches;
next	1.51;
commitid	tD4MFrpYYDDL2UFT;

1.51
date	2017.07.16.19.19.00;	author espie;	state Exp;
branches;
next	1.50;
commitid	tt0GhWK5c4uf9ILG;

1.50
date	2017.07.16.19.19.00;	author espie;	state Exp;
branches;
next	1.49;
commitid	tt0GhWK5c4uf9ILG;

1.49
date	2017.04.10.11.46.23;	author sthen;	state Exp;
branches;
next	1.48;
commitid	BLsh88fJB8thZTwY;

1.48
date	2017.01.03.08.33.32;	author jca;	state Exp;
branches;
next	1.47;
commitid	f4mened9ItVtEWJu;

1.47
date	2016.08.30.10.20.15;	author jasper;	state Exp;
branches;
next	1.46;
commitid	ldmJChLP8htfEKn3;

1.46
date	2016.03.11.20.28.28;	author naddy;	state Exp;
branches;
next	1.45;
commitid	UYLP8TE6V7RS2GhJ;

1.45
date	2014.11.05.11.43.59;	author sthen;	state Exp;
branches;
next	1.44;
commitid	RB64hioD1zIM5GcO;

1.44
date	2014.01.31.09.37.06;	author jca;	state Exp;
branches;
next	1.43;

1.43
date	2013.06.04.18.41.52;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2013.05.31.15.34.52;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2013.03.21.08.46.33;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2013.03.11.11.35.43;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2013.01.21.21.23.27;	author naddy;	state Exp;
branches;
next	1.38;

1.38
date	2012.12.21.12.13.36;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2012.08.11.22.58.18;	author pascal;	state Exp;
branches;
next	1.36;

1.36
date	2012.05.22.18.39.42;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2012.04.15.11.37.41;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2011.09.16.10.31.23;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2011.08.30.21.50.29;	author kili;	state Exp;
branches;
next	1.32;

1.32
date	2011.04.28.18.38.40;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.19.22.28.08;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.19.07.23.12;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.10.24.21.40.38;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2010.10.24.21.27.41;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2010.10.11.08.15.53;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2010.09.30.07.21.20;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2010.07.09.23.12.07;	author landry;	state Exp;
branches;
next	1.24;

1.24
date	2010.04.26.02.09.03;	author jakemsr;	state Exp;
branches;
next	1.23;

1.23
date	2010.03.20.16.56.57;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.12.22.15.46.59;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.08.10.06.33.02;	author kili;	state Exp;
branches;
next	1.20;

1.20
date	2009.03.16.19.46.57;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2009.03.13.13.23.54;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.02.10.10.11.00;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2008.09.15.22.08.40;	author jakemsr;	state Exp;
branches;
next	1.16;

1.16
date	2008.07.25.08.08.20;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2008.07.11.08.51.40;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2008.06.01.08.21.15;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2008.04.03.10.21.26;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2008.03.19.09.21.37;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2007.11.17.20.39.02;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.16.03.24.28;	author merdely;	state Exp;
branches;
next	1.9;

1.9
date	2007.06.29.06.19.46;	author jakemsr;	state Exp;
branches;
next	1.8;

1.8
date	2007.06.01.00.36.43;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2007.04.08.17.34.54;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2007.02.11.00.56.57;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.22.16.30.17;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.06.16.20.30;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.20.23.35.17;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.19.16.22.06;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.19.16.22.06;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.55
log
@Use COMPILER=base-gcc, for consistency.  Requested by sthen@@
@
text
@# $OpenBSD: Makefile,v 1.54 2017/09/27 20:36:17 jca Exp $

# XXX base clang says: i386/fft_sse.c:172:43: error: unknown token in expression
COMPILER=	base-gcc

COMMENT=	free video editor

V=		2.4.4
DISTNAME=	avidemux_${V}
PKGNAME=	avidemux-${V}

REVISION=	19

CATEGORIES=	multimedia

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=avidemux/}

HOMEPAGE=	http://fixounet.free.fr/avidemux/

# GPLv2
PERMIT_PACKAGE_CDROM=	yes

WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xv atk-1.0 c cairo
WANTLIB += expat fontconfig freetype gio-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 gthread-2.0 m ogg pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png pthread pthread-stubs sndio
WANTLIB += ${COMPILER_LIBCXX} xcb xcb-render xcb-shm z gdk_pixbuf-2.0 gdk-x11-2.0
WANTLIB += gtk-x11-2.0 faad mp3lame vorbis vorbisenc xml2 xvidcore
WANTLIB += ffi harfbuzz graphite2 lzma

MODULES=	devel/gettext

RUN_DEPENDS =	devel/desktop-file-utils
BUILD_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}
LIB_DEPENDS=	x11/gtk+2 \
		audio/faad>=2.7 \
		audio/lame \
		audio/libvorbis \
		textproc/libxml \
		multimedia/xvidcore \
		multimedia/x264

USE_GMAKE=	Yes

AUTOCONF_VERSION=2.60
AUTOMAKE_VERSION=1.9

.if ${MACHINE_ARCH} == "i386"
MD_CFLAGS =	-fno-pie
MD_LDFLAGS =	-nopie
.elif ${MACHINE_ARCH} == "arm"
# binutils-2.17 can't handle -falign-loops=16 on arm; 0 == default
MD_CFLAGS =	-falign-loops=0
.endif

CONFIGURE_STYLE=gnu
CONFIGURE_ENV+=	CFLAGS="${MD_CFLAGS} ${CFLAGS}" \
		CXXFLAGS="${MD_CFLAGS} ${CXXFLAGS}" \
		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="${MD_LDFLAGS} -L${LOCALBASE}/lib -logg -lm -lz"
CONFIGURE_ARGS+=--enable-xv \
		--with-x \
		--with-freetype2 \
		--with-lame \
		--with-fontconfig \
		--with-faad2 \
		--without-libsdl \
		--without-oss \
		--without-esd \
		--without-arts \
		--without-faac \
		--without-libdca \
		--without-newfaad \
		--without-aften \
		--without-qt-dir \
		--without-qt-includes \
		--without-gpt \
		--disable-ssse3 \
		--disable-altivec

post-patch:
	@@cd ${WRKSRC} && env \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		${MAKE_PROGRAM} -f Makefile.dist

pre-build:
	@@cp ${FILESDIR}/ADM_devicesndio.{cpp,h} ${WRKSRC}/avidemux/ADM_audiodevice/

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	${INSTALL_DATA} ${WRKSRC}/avidemux2.desktop \
		${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/avidemux_icon.png \
		${PREFIX}/share/pixmaps/avidemux.png

.include <bsd.port.mk>
@


1.54
log
@Disable ports that don't build on clang archs; ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2017/09/27 20:11:21 naddy Exp $
d3 2
a4 2
# XXX i386/fft_sse.c:172:43: error: unknown token in expression
NOT_FOR_ARCHS =		${CLANG_ARCHS}
@


1.53
log
@BROKEN on amd64: inline assembly and C++ syntax errors with clang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2017/07/26 22:45:26 sthen Exp $
d3 2
a4 1
BROKEN-amd64=	inline assembly and C++ syntax errors with clang
@


1.52
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.51 2017/07/16 19:19:00 espie Exp $
@


1.51
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2017/04/10 11:46:23 sthen Exp $
d9 1
a9 1
REVISION=	18
@


1.50
log
@use COMPILER_LIBCXX where applicable
@
text
@@


1.49
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2017/01/03 08:33:32 jca Exp $
d25 1
a25 1
WANTLIB += ${LIBCXX} xcb xcb-render xcb-shm z gdk_pixbuf-2.0 gdk-x11-2.0
@


1.48
log
@Support for armv7, where gas chokes on code produced by -falign-loops=16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/08/30 10:20:15 jasper Exp $
d25 1
a25 1
WANTLIB += stdc++ xcb xcb-render xcb-shm z gdk_pixbuf-2.0 gdk-x11-2.0
@


1.47
log
@bump after faad subpackage changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/03/11 20:28:28 naddy Exp $
d9 1
a9 1
REVISION=	17
d48 5
a52 2
PIE_CFLAGS = -fno-pie
PIE_LDFLAGS = -nopie
d56 2
a57 2
CONFIGURE_ENV+=	CFLAGS="${PIE_CFLAGS} ${CFLAGS}" \
		CXXFLAGS="${PIE_CFLAGS} ${CXXFLAGS}" \
d59 1
a59 1
		LDFLAGS="${PIE_LDFLAGS} -L${LOCALBASE}/lib -logg -lm -lz"
@


1.46
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/11/05 11:43:59 sthen Exp $
d9 1
a9 1
REVISION=	16
@


1.45
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/01/31 09:37:06 jca Exp $
d57 1
a57 2
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
		--enable-xv \
@


1.44
log
@Unbreak on i386 (disable PIE).  ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/06/04 18:41:52 naddy Exp $
d9 1
a9 1
REVISION=	15
d20 2
a21 2
WANTLIB += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xv Xxf86vm atk-1.0 c cairo drm
d27 1
a27 1
WANTLIB += ffi harfbuzz
@


1.43
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/05/31 15:34:52 ajacoutot Exp $
d9 1
a9 1
REVISION=	14
d47 5
d53 4
a56 2
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -logg -lm -lz"
@


1.42
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/03/21 08:46:33 ajacoutot Exp $
d48 1
a48 2
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include \
		-I${LOCALBASE}/include/libpng" \
@


1.41
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/03/11 11:35:43 espie Exp $
d9 1
a9 1
REVISION=	13
d27 1
a27 1
WANTLIB += ffi harfbuzz icudata icule icuuc
@


1.40
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/01/21 21:23:27 naddy Exp $
a41 1
USE_LIBTOOL=	Yes
@


1.39
log
@prepare for gettext 0.18.2: bump to autoconf 2.60 and automake 1.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/12/21 12:13:36 sthen Exp $
a18 3
PERMIT_PACKAGE_FTP=	yes
PERMIT_DISTFILES_CDROM=	yes
PERMIT_DISTFILES_FTP=	yes
@


1.38
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/08/11 22:58:18 pascal Exp $
d48 2
a49 2
AUTOCONF_VERSION=2.59
AUTOMAKE_VERSION=1.8
@


1.37
log
@Further PIE preparations: aircrack-ng and avidemux both use non-PIC optimised
assembler.  Wrap an #ifndef PIC around it.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/05/22 18:39:42 ajacoutot Exp $
d9 1
a9 1
REVISION=	12
d30 1
a30 1
WANTLIB += x264
@


1.36
log
@Remove workarounds now that we have a modern faad.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/04/15 11:37:41 naddy Exp $
d9 1
a9 1
REVISION=	11
@


1.35
log
@The rfork() system call has been removed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/09/16 10:31:23 espie Exp $
d9 1
a9 1
REVISION=	10
d38 1
a38 1
		audio/faad \
@


1.34
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/08/30 21:50:29 kili Exp $
d9 1
a9 1
REVISION=	9
@


1.33
log
@Disable faac.

From Brad. ok jasper@@

this also moves autoconf/automake goo from pre-configure to post-patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/04/28 18:38:40 jasper Exp $
d9 1
a9 1
REVISION=	8
@


1.32
log
@- we have nearbyintf() in libm now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/19 22:28:08 espie Exp $
d9 1
a9 1
REVISION=	7
d23 2
a24 2
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xv atk-1.0 c cairo
d28 3
a30 3
WANTLIB += stdc++ xcb xcb-render xcb-render-util z gdk_pixbuf-2.0
WANTLIB += gdk-x11-2.0 gtk-x11-2.0 faac faad mp3lame vorbis vorbisenc
WANTLIB += xml2 xvidcore x264
a37 1
		audio/faac \
a60 1
		--with-faac \
d66 1
d76 2
a77 2
pre-configure:
	@@cd ${WRKSRC} && \
@


1.31
log
@fix typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/19 07:23:12 espie Exp $
d9 1
a9 1
REVISION=	6
@


1.30
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/10/24 21:40:38 sthen Exp $
d34 1
a34 1
RUN_DEPENDSdesktop-file-utils-*:devel/desktop-file-utils
@


1.29
log
@lib_depends, revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/10/24 21:27:41 ajacoutot Exp $
d34 1
a34 1
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
d37 8
a44 8
LIB_DEPENDS=	::x11/gtk+2 \
		::audio/faac \
		::audio/faad \
		::audio/lame \
		::audio/libvorbis \
		::textproc/libxml \
		::multimedia/xvidcore \
		::multimedia/x264
@


1.28
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/10/11 08:15:53 jasper Exp $
d29 2
d37 8
a44 8
LIB_DEPENDS=	gdk-x11-2.0,gtk-x11-2.0::x11/gtk+2 \
		faac.>=1::audio/faac \
		faad.>=2::audio/faad \
		mp3lame.>=1::audio/lame \
		vorbis.>=5,vorbisenc.>=2::audio/libvorbis \
		xml2.>=9::textproc/libxml \
		xvidcore.>=4::multimedia/xvidcore \
		x264::multimedia/x264
@


1.27
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/09/30 07:21:20 ajacoutot Exp $
a43 1
USE_X11=	Yes
@


1.26
log
@Fix DEPENDS after gtk+2 and gdk-pixbuf split.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/07/09 23:12:07 landry Exp $
d9 1
a9 1
REVISION=	5
d25 1
a25 1
WANTLIB += expat fontconfig freetype gio-2.0 glib-2.0 glitz gmodule-2.0
@


1.25
log
@Add the needed auto-fu to set the necessary #define ARCH_64_BITS on
sparc64 too. Fixes build on sparc64, which was broken since a good while..
ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/04/26 02:09:03 jakemsr Exp $
d7 3
a9 1
PKGNAME=	avidemux-${V}p4
d28 1
a28 1
WANTLIB += stdc++ xcb xcb-render xcb-render-util z
d35 1
a35 1
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
@


1.24
log
@sndio supported by default; drop ossaudio(3), artsd and esd support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/03/20 16:56:57 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p3
@


1.23
log
@Remove myself from maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/12/22 15:46:59 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p2
d22 1
a22 1
WANTLIB += Xi Xinerama Xrandr Xrender Xv atk-1.0 audiofile c cairo
d24 3
a26 3
WANTLIB += gobject-2.0 gthread-2.0 m ogg ossaudio pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png pthread pthread-stubs sndio stdc++
WANTLIB += xcb z
d40 1
a40 3
		x264::multimedia/x264 \
		artsc.>=1::x11/kde/arts3 \
		esd::audio/esound
a52 2
# XXX TODO:	remove arts, esd, oss
#		add sndio
a58 1
		--with-oss \
d61 4
a64 2
		--with-esd \
		--with-arts \
a65 1
		--without-libsdl \
d79 3
@


1.22
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/08/10 06:33:02 kili Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p1
a13 2

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.21
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/03/16 19:46:57 sthen Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p0
@


1.20
log
@autoconf build depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/03/13 13:23:54 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}
d27 2
a28 2
WANTLIB += pangoft2-1.0 pcre pixman-1 png pthread sndio stdc++
WANTLIB += z
@


1.19
log
@- add XXX reminder for myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/02/10 10:11:00 ajacoutot Exp $
d33 2
a34 2
BUILD_DEPENDS=	:autoconf-${AUTOCONF_VERSION}:devel/autoconf/${AUTOCONF_VERSION} \
		:automake-${AUTOMAKE_VERSION}.*:devel/automake/${AUTOMAKE_VERSION}
@


1.18
log
@- bugfix update to avidemux-2.4.4
- install desktop file and icon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/09/15 22:08:40 jakemsr Exp $
d57 2
@


1.17
log
@- faac/faad related changes
- bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/07/25 08:08:20 ajacoutot Exp $
d5 1
a5 1
V=		2.4.3
d7 1
a7 1
PKGNAME=	avidemux-${V}p0
d23 6
a28 6
WANTLIB=	X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama Xrandr \
		Xcomposite Xdamage pcre audiofile esd \
		Xrender Xv atk-1.0 c cairo expat fontconfig \
		freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 m ogg pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread stdc++ z ossaudio
d32 1
d43 2
a44 1
		artsc.>=1::x11/kde/arts3
d80 2
a81 1
		AUTOCONF_VERSION=${AUTOCONF_VERSION} AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
d83 8
@


1.16
log
@- bugfix update to avidemux-2.4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/07/11 08:51:40 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}
d35 2
a36 2
		faac::audio/faac \
		faad.>=1::audio/faad \
@


1.15
log
@- bugfix update to avidemux-2.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/06/01 08:21:15 sthen Exp $
d5 1
a5 1
V=		2.4.2
@


1.14
log
@sync WANTLIB, bump package version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/04/03 10:21:26 ajacoutot Exp $
d5 1
a5 1
V=		2.4.1
d7 1
a7 1
PKGNAME=	avidemux-${V}p1
a55 1
		--with-jsapi-include=${LOCALBASE}/include/js \
d57 1
d72 1
@


1.13
log
@- use default CFLAGS so that it builds correctly under i386
(i.e. don't force -O0 as this seems to trigger an issue in the asm code)

noticed by Stephan Andre <andres at msu dot edu> and bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/03/19 09:21:37 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p0
d28 1
a28 1
		pangoft2-1.0 png pthread stdc++ z ossaudio
@


1.12
log
@- update to version 2.4.1
- add support for artsd and esound

ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/11/17 20:39:02 steven Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}
a46 3

# force minimal optimisation; needed for overwhole stability
CFLAGS+=	-O0
@


1.11
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/16 03:24:28 merdely Exp $
d5 1
a5 1
V=		2.3.0
d7 2
a8 1
PKGNAME=	avidemux-${V}p4
d10 2
a11 1
MASTER_SITES=	${MASTER_SITE_BERLIOS:=avidemux/}
d24 1
a24 1
		Xcomposite Xdamage pcre \
d32 2
d37 1
a37 2
		js.>=1::lang/spidermonkey \
		mp3lame::audio/lame \
d41 2
a42 1
		x264::multimedia/x264
d46 7
a52 1
USE_GCC3=	Yes
d57 1
a57 1
		LDFLAGS="-L${LOCALBASE}/lib -logg"
d67 2
a68 2
		--without-arts \
		--without-esd \
d71 11
a81 1
		--without-newfaad
@


1.10
log
@Remove surrounding quotes in COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/06/29 06:19:46 jakemsr Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p3
d22 1
@


1.9
log
@- use exact width data types for libfaad interaction
- move libfaad from WANTLIB to LIB_DEPENDS and LIB_DEPEND
  libfaad >= 1.0
- bump PKGNAME

libfaad move from WANTLIB to LIB_DEPENDS OK ajacoutot@@ (MAINTAINER)
OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/06/01 00:36:43 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"free video editor"
@


1.8
log
@- improve powerpc support:
  properly detect cpu at configure time
  enable ppc specific code where possible (i.e. where altivec is not needed)
- reorder dependencies and fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/04/08 17:34:54 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p2
d22 1
a22 1
		Xrender Xv atk-1.0 c cairo expat faad fontconfig \
d31 1
@


1.7
log
@- enable x264 support
- add missing xenocara LIBS (and remove obsolete)
- regen patches while here

"go for it" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/02/11 00:56:57 steven Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p1
d21 5
a25 4
WANTLIB=	freetype c stdc++ Xv ossaudio m X11 Xrender pthread \
		Xext fontconfig z pango-1.0 pangocairo-1.0 cairo.>=4 \
		atk-1.0 gmodule-2.0 gthread-2.0 glib-2.0 pangoft2-1.0 \
		gobject-2.0 Xau Xdmcp expat
d30 3
a33 2
		mp3lame::audio/lame \
		js.>=1::lang/spidermonkey \
a35 5
		faad::audio/faad \
		faac::audio/faac \
		glitz.>=1::graphics/glitz \
		ogg.>=5::audio/libogg \
		png.>=5::graphics/png \
@


1.6
log
@WANTLIB fixes, mostly needed by recent cairo update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/12/22 16:30:17 steven Exp $
d7 1
a7 1
PKGNAME=	avidemux-${V}p0
d21 1
a21 1
WANTLIB=	ICE SM freetype c stdc++ Xv ossaudio m X11 Xrender pthread \
d24 1
a24 1
		gobject-2.0
d38 2
a39 1
		png.>=5::graphics/png
@


1.5
log
@unbreak by finding pkg-config in the right place
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/12/16 12:22:34 espie Exp $
d7 2
a8 2
PKGNAME=	avidemux-${V}
CATEGORIES=     multimedia
d21 1
a21 1
WANTLIB=	freetype c stdc++ Xv ossaudio m X11 Xrender pthread \
@


1.4
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/12/06 16:20:30 ajacoutot Exp $
d47 1
a47 2
		LDFLAGS="-L${LOCALBASE}/lib -logg" \
		PKG_CONFIG=${LOCALBASE}/bin/pkg-config
@


1.3
log
@- update to 2.3.0
- remove SDL dependency

"go ahead" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/10/20 23:35:17 ajacoutot Exp $
a27 1
BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig
@


1.2
log
@Fix a core dump when trying to configure the "copy" audio codec.
Noticed by Olivier Cherrier <oc at symacx dot com>, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/10/19 16:22:06 ajacoutot Exp $
d5 3
a7 2
DISTNAME=	avidemux-2.1.2
PKGNAME=	${DISTNAME}p0
d22 3
a24 3
		usbhid Xext fontconfig z pango-1.0 pangocairo-1.0 \
		cairo.>=4 atk-1.0 gmodule-2.0 gthread-2.0 glib-2.0 \
		pangoft2-1.0 gobject-2.0
a32 3
		a52::audio/liba52 \
		mad.>=2::audio/libmad \
		SDL.>=6::devel/sdl \
d48 2
a49 1
		LDFLAGS="-L${LOCALBASE}/lib -logg"
a52 2
		--enable-mad \
		--with-libsdl \
d55 1
a55 1
		--with-a52dec \
d61 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@Import avidemux, a free video editor.

ok pvalchev@@
@
text
@@
