head	1.27;
access;
symbols
	OPENBSD_6_2:1.27.0.2
	OPENBSD_6_2_BASE:1.27
	OPENBSD_6_1:1.25.0.2
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.23.0.2
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.21.0.12
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.21.0.8
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.6
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.4
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.19.0.4
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.19.0.2
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.10.0.8
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.6
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.4
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.2
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.8.0.2
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.4
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	jakemsr_20050928:1.1.1.1
	jakemsr:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2017.07.22.19.11.31;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	WlGJzOB5o9OU3aGm;

1.26
date	2017.05.18.10.29.00;	author espie;	state Exp;
branches;
next	1.25;
commitid	K96VminAcMCcWPHM;

1.25
date	2016.11.07.10.51.36;	author sthen;	state Exp;
branches;
next	1.24;
commitid	bXhLeQYbQdffqUSF;

1.24
date	2016.08.27.16.57.16;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	fhjoSiyEF0EyGq3B;

1.23
date	2016.05.06.21.39.03;	author sthen;	state Exp;
branches;
next	1.22;
commitid	SQKkVAkQS2xPvJnu;

1.22
date	2015.11.06.20.37.34;	author sthen;	state Exp;
branches
	1.22.2.1;
next	1.21;
commitid	PjPpZyw8X2OGSgMF;

1.21
date	2013.06.04.18.41.53;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.11.11.35.43;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2012.06.19.12.59.15;	author okan;	state Exp;
branches;
next	1.18;

1.18
date	2011.11.08.15.29.44;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.08.08.00.21;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.16.10.31.23;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2011.07.07.01.06.59;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.19.07.23.12;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.24.21.40.38;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.24.21.27.41;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.18.21.25.07;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2008.11.20.18.18.35;	author okan;	state Exp;
branches;
next	1.9;

1.9
date	2008.11.20.13.35.11;	author okan;	state Exp;
branches;
next	1.8;

1.8
date	2008.06.01.08.21.15;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2007.11.17.20.39.02;	author steven;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.27.12.54.00;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.02.20.24.17;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.13.11.20.25;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.08.03.23.15.57;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.12.08.05.47.26;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.28.06.52.55;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.09.28.06.52.55;	author jakemsr;	state Exp;
branches;
next	;

1.22.2.1
date	2016.05.06.21.35.59;	author sthen;	state Exp;
branches;
next	;
commitid	vDjdgur9VOwg5QQm;


desc
@@


1.27
log
@Update to dvdauthor-0.7.2.
@
text
@# $OpenBSD: Makefile,v 1.26 2017/05/18 10:29:00 espie Exp $

COMMENT=	creates DVD file structures

DISTNAME=	dvdauthor-0.7.2
CATEGORIES=	multimedia
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=dvdauthor/}

HOMEPAGE=	http://dvdauthor.sourceforge.net/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ICE MagickCore-6.Q16 SM X11 Xext Xt bz2 c djvulibre
WANTLIB += dvdread expat fftw3 fontconfig freetype fribidi iconv
WANTLIB += jbig jpeg lcms2 lzma m openjp2 png pthread pthread-stubs
WANTLIB += tiff webp xcb xml2 z

LIB_DEPENDS=	devel/fribidi \
		devel/libdvdread \
		graphics/ImageMagick \
		textproc/libxml

MAKE_FLAGS+=	BISON="yacc"

USE_GMAKE=	Yes
CONFIGURE_STYLE= gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"


WRKDIST=	${WRKDIR}/dvdauthor

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/dvdauthor
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/dvdauthor

.include <bsd.port.mk>

# XXX there is some limited functionality that requires nested routines
# the configure detection works with clang but not with our gcc
# -> activate the extra functionality on gcc (see HAVE_NESTED_ROUTINES)
.if !${PROPERTIES:Mclang}
# error: trampoline code generation is not allowed without -ftrampolines
CFLAGS += -ftrampolines
.endif
@


1.26
log
@nested functions are not "mandatory", get it to build with clang, even
if we lose some functionality (this code is such a mess that I don't
even know what we lose)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/11/07 10:51:36 sthen Exp $
d5 1
a5 2
DISTNAME=	dvdauthor-0.7.1
REVISION=	0
d14 4
a17 2
WANTLIB += MagickCore-6.Q16 c dvdread fontconfig freetype fribidi
WANTLIB += iconv lzma m png xml2 z
@


1.25
log
@sync WANTLIB (readding idn to some where I was overzealous, plus some lzma/pthread)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/08/27 16:57:16 ajacoutot Exp $
a29 2
# error: trampoline code generation is not allowed without -ftrampolines
CFLAGS += -ftrampolines
d38 8
@


1.24
log
@Update to dvdauthor-0.7.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/05/06 21:39:03 sthen Exp $
d6 1
d16 1
a16 1
WANTLIB += iconv m png xml2 z
@


1.23
log
@make sure -current pkgname/revision are higher than stable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/11/06 20:37:34 sthen Exp $
d5 1
a5 2
DISTNAME=	dvdauthor-0.7.0
REVISION=	3
d14 2
a15 2
WANTLIB += MagickCore-6.Q16 c dvdread expat fontconfig freetype
WANTLIB += fribidi m png pthread xml2 z
d17 1
a17 2
MODULES=	converters/libiconv
LIB_DEPENDS=	devel/fribidi>=0.19.2 \
d28 3
@


1.22
log
@fix following ImageMagick update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/06/04 18:41:53 naddy Exp $
d6 1
a6 1
REVISION=	2
@


1.22.2.1
log
@bump users of MagickWand-6.Q16 and Magick++-6.Q16 in -stable due to
shlib major bump in ImageMagick update; thanks jasper for the list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/11/06 20:37:34 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.21
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/11 11:35:43 espie Exp $
d6 1
a6 1
REVISION=	1
d15 1
a15 1
WANTLIB += MagickCore c dvdread expat fontconfig freetype
@


1.20
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/06/19 12:59:15 okan Exp $
d28 1
a28 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
@


1.19
log
@WANTLIB sync after ImageMagick update; ok sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/11/08 15:29:44 naddy Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.18
log
@remove libs from libwmf from wantlib. they are added when the installed imagemagick
is !,no_x11. So instead of enforcing the non-non_x11 flavor, fix wantlib.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/08 08:00:21 dcoppa Exp $
d6 1
a6 1
REVISION=	0
d18 2
a19 3
WANTLIB+=	ICE MagickCore SM X11 Xext Xt bz2 c djvulibre dvdread
WANTLIB+=	expat fftw3 fontconfig freetype fribidi jasper jbig
WANTLIB+=	jpeg lcms2 ltdl lzma m png pthread tiff xml2 z
d32 1
a32 1
		LDFLAGS="-L${LOCALBASE}/lib" \
@


1.17
log
@Update to dvdauthor-0.7.0 (and unbreak build with newer fribidi)

From Brad
OK nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/09/16 10:31:23 espie Exp $
d6 1
d20 1
a20 2
WANTLIB+=	jpeg lcms2 ltdl lzma m png pthread tiff wmf wmflite
WANTLIB+=	xml2 z
@


1.16
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/07/07 01:06:59 ajacoutot Exp $
d3 1
a3 4
COMMENT=		creates DVD file structures
DISTNAME=		dvdauthor-0.6.14
REVISION=		1
CATEGORIES=		multimedia
d5 3
a7 1
HOMEPAGE=		http://dvdauthor.sourceforge.net/
d9 3
a11 1
# GPLv2
d17 17
a33 14
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=dvdauthor/}

MODULES=		converters/libiconv

LIB_DEPENDS=		devel/libdvdread \
			devel/fribidi \
			textproc/libxml \
			graphics/ImageMagick

WANTLIB += c freetype m png z dvdread fribidi xml2 MagickCore MagickWand

USE_GMAKE=		Yes
USE_GROFF=		Yes
CONFIGURE_STYLE=	gnu
d35 1
a35 3
CONFIGURE_ENV+=		LDFLAGS="-L${LOCALBASE}/lib" \
			CFLAGS="${CFLAGS} -I${LOCALBASE}/include/libpng"
MAKE_FLAGS+=		BISON="yacc" LDFLAGS="-L${LOCALBASE}/lib"
@


1.15
log
@Remove some duplicate wantlibs, use the libiconv MODULE where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/19 07:23:12 espie Exp $
d5 1
a5 1
REVISION=		0
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/10/24 21:40:38 sthen Exp $
d5 1
d18 2
d25 1
a25 1
WANTLIB += c freetype iconv m png z dvdread fribidi xml2 MagickCore MagickWand
@


1.13
log
@lib_depends, revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/10/24 21:27:41 ajacoutot Exp $
d17 4
a20 4
LIB_DEPENDS=		::devel/libdvdread \
			::devel/fribidi \
			::textproc/libxml \
			::graphics/ImageMagick
@


1.12
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/18 21:25:07 espie Exp $
d17 4
a20 4
LIB_DEPENDS=		dvdread.>=3::devel/libdvdread \
			fribidi::devel/fribidi \
			xml2.>=5::textproc/libxml \
			MagickCore.>=1,MagickWand.>=1::graphics/ImageMagick
d22 1
a22 1
WANTLIB=		c freetype iconv m png z 
d25 1
a25 1
USE_GROFF =	Yes
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/11/20 18:18:35 okan Exp $
a23 1
USE_X11=		Yes
@


1.10
log
@- update to 0.6.14 from Giovanni Bechis
- explicitly state GLPv2 license

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/11/20 13:35:11 okan Exp $
d26 1
@


1.9
log
@- adapt for updated ImageMagick
- sync PLIST (@@bin markers)
- fixup WANTLIB

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/06/01 08:21:15 sthen Exp $
d4 1
a4 2
DISTNAME=		dvdauthor-0.6.11
PKGNAME=		${DISTNAME}p5
d9 1
@


1.8
log
@sync WANTLIB, bump package version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/11/17 20:39:02 steven Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p4
d20 1
a20 1
			Magick.>=6,Wand.>=6::graphics/ImageMagick
d22 1
a22 2
WANTLIB=		ICE SM X11 Xext Xt bz2 c freetype iconv jasper jbig \
			jpeg lcms m png tiff z expat fontconfig wmflite
@


1.7
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/12/27 12:54:00 steven Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p3
d23 1
a23 1
			jpeg lcms m png tiff z expat fontconfig
@


1.6
log
@add missing library in LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/12/02 20:24:17 pvalchev Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p2
d23 1
a23 1
			jpeg lcms m png tiff z
@


1.5
log
@Remove jakemsr@@ from maintainer position, as he has been inactive and
email has been bouncing for several months.  Jacob, if you get this
and/or get back to things, let us know.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/11/13 11:20:25 steven Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p1
d20 1
a20 1
			Magick.>=6::graphics/ImageMagick
@


1.4
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/08/03 23:15:57 espie Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
a8 2

MAINTAINER=		Jacob Meuser <jakemsr@@openbsd.org>
@


1.3
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/12/08 05:47:26 jakemsr Exp $
d27 2
a28 1
USE_GMAKE=		yes
@


1.2
log
@- use locale_charset() from libiconv instead if nl_langinfo(CODESET)
  directly to get the codeset.  locale_charset() canonicalizes the
  codeset name "646", which libiconv does not understand, to "ASCII",
  which libiconv does understand.
- use my OpenBSD email address
- and of course, bump the PKGNAME

OK jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/09/28 06:52:55 jakemsr Exp $
d19 4
a22 4
LIB_DEPENDS=		dvdread.3::devel/libdvdread \
			fribidi.0::devel/fribidi \
			xml2.5::textproc/libxml \
			Magick.6::graphics/ImageMagick
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
d10 1
a10 1
MAINTAINER=		Jacob Meuser <jakemsr@@jakemsr.com>
@


1.1.1.1
log
@initial import of multimedia/dvdauthor

The dvdauthor package is a simple set of tools for DVD authoring.  The
idea is to be able to create menus, buttons, chapters, etc.  For now
functionality is mostly limited to creating DVD filesystems from mpeg
streams that were created by mplex -f 8 from mjpegtools 1.6.0 or newer.

testing and ok jolan@@

@
text
@@
