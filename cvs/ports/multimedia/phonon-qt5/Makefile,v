head	1.2;
access;
symbols
	zhuk_20170718:1.1.1.1 zhuk:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.07.27.09.55.45;	author sthen;	state Exp;
branches;
next	1.1;
commitid	B5vWYrki33kPVNK6;

1.1
date	2017.07.17.21.06.37;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;
commitid	4DqFfktRUX1r91p7;

1.1.1.1
date	2017.07.17.21.06.37;	author zhuk;	state Exp;
branches;
next	;
commitid	4DqFfktRUX1r91p7;


desc
@@


1.2
log
@add COMPILER_LIBCXX to WANTLIB and bump
@
text
@# $OpenBSD: Makefile,v 1.1.1.1 2017/07/17 21:06:37 zhuk Exp $

COMMENT =	multimedia layer for Qt4/KDE4
VERSION =	4.9.1
DISTNAME =	phonon-${VERSION}
PKGNAME =	phonon-qt5-${VERSION}

# XXX major should be tweaked on any update, to unbreak
# IMPORTED_LINK_INTERFACE_LIBRARIES CMake feature.
SHARED_LIBS +=	phonon4qt5		1.0
SHARED_LIBS +=	phonon4qt5experimental	1.0

CATEGORIES =	multimedia devel
HOMEPAGE =	http://phonon.kde.org/
MAINTAINER =	KDE porting team <openbsd-kde@@googlegroups.com>

# LGPL v2.1
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		${MASTER_SITE_KDE:=stable/phonon/${VERSION}/}
EXTRACT_SUFX =		.tar.xz

WANTLIB =		m pulse pulse-mainloop-glib
WANTLIB +=		Qt5Core Qt5DBus Qt5Gui Qt5Widgets ${COMPILER_LIBCXX}

MODULES =		devel/kf5

LIB_DEPENDS =		audio/pulseaudio
BUILD_DEPENDS =		x11/qt5/qtdeclarative
RUN_DEPENDS =		x11/qt5/qtdeclarative

PHONON_INCLUDE_DIR =	include/phonon4qt5

# Clashes with the one provided by Qt itself.
CONFIGURE_ARGS +=	-DPHONON_BUILD_DESIGNER_PLUGIN:Bool=No \
			-DCMAKE_POLICY_DEFAULT_CMP0017=NEW \
			-DPHONON_INSTALL_QT_COMPAT_HEADERS=No

CONFIGURE_ARGS +=	-DPHONON_BUILD_PHONON4QT5=Yes \
			-DINCLUDE_INSTALL_DIR=${PHONON_INCLUDE_DIR} \
			-DPHONON_INSTALL_QT_EXTENSIONS_INTO_SYSTEM_QT=Yes

SUBST_VARS =		PHONON_INCLUDE_DIR

.include <bsd.port.mk>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d24 1
a24 1
WANTLIB +=		Qt5Core Qt5DBus Qt5Gui Qt5Widgets
@


1.1.1.1
log
@Import a separate port for Qt5-based Phonon, bumped to 4.9.1 (latest).

This is needed to resolve issues coming after recent Qt update.
Tweaks for phonon.port.mk and dependencies to follow.
@
text
@@
