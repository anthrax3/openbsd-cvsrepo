head	1.4;
access;
symbols
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.6
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.4
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.1.0.2
	OPENBSD_3_9_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2008.07.09.02.13.01;	author jakemsr;	state dead;
branches;
next	1.3;

1.3
date	2008.01.26.02.02.50;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2006.03.20.05.51.59;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2006.02.03.04.55.56;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.4
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* add @@bin markers in PLISTs
* bump PKGNAMEs

feedback/ok brad@@
@
text
@$OpenBSD: patch-configure_ac,v 1.3 2008/01/26 02:02:50 jakemsr Exp $
--- configure.ac.orig	Wed Jan  2 12:57:44 2008
+++ configure.ac	Sat Jan 19 21:06:11 2008
@@@@ -190,6 +190,9 @@@@ VORBIS_REQUIRED="1.0"
  
 have_vorbis=false
 AH_TEMPLATE([HAVE_VORBIS], [Vorbis libraries are there])
+
+OLD_LIBS="$LIBS"
+LIBS="$LIBS -logg"
   
 if test "x$with_vorbis" != "xno"; then
 XIPH_PATH_VORBIS(have_vorbis=true)
@@@@ -199,7 +202,9 @@@@ AM_CONDITIONAL(HAVE_VORBIS, test x$have_vorbis = xtrue
 if test x$have_vorbis = xtrue; then
 AC_DEFINE(HAVE_VORBIS)
 fi
- 
+
+LIBS="$OLD_LIBS"
+
 AC_SUBST(VORBIS_REQUIRED)
 
 dnl
@@@@ -216,11 +221,11 @@@@ if test "x$with_lame" != "xno"; then
 OLD_CFLAGS=$CFLAGS
 OLD_LIBS=$LIBS
 
-if test x$have_vorbis = xtrue; then
-LIBS="$LIBS -lmp3lame -lvorbis -lm"
-else
+# if test x$have_vorbis = xtrue; then
+# LIBS="$LIBS -lmp3lame -lvorbis -logg -lm"
+# else
 LIBS="$LIBS -lmp3lame -lm"
-fi
+# fi
 
 dnl CFLAGS="$CFLAGS"
 
@


1.3
log
@update to libquicktime-1.0.2

build gpl modules as well (AAC and H264)
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.2 2006/03/20 05:51:59 jakemsr Exp $
@


1.2
log
@- accomodate for libavcodec changes
- bump PKGNAME

OK brad@@
@
text
@d1 4
a4 16
$OpenBSD: patch-configure_ac,v 1.1 2006/02/03 04:55:56 jakemsr Exp $
--- configure.ac.orig	Thu May 26 06:35:22 2005
+++ configure.ac	Thu Feb  2 22:41:52 2006
@@@@ -104,8 +104,10 @@@@ AC_CHECK_LIB(dl, dlopen)
 AC_CHECK_LIB(z, inflateEnd)
 AC_CHECK_LIB(m, cos)
 
-AC_SEARCH_LIBS(pthread_create, [gthread pthread c_r])
+dnl AC_SEARCH_LIBS(pthread_create, [gthread pthread c_r])
 
+LIBS="$LIBS -pthread"
+
 AC_SUBST(LIBS)
 
 AC_CHECK_HEADERS(fcntl.h sys/time.h unistd.h linux/videodev.h sys/soundcard.h soundcard.h stddef.h)
@@@@ -138,6 +140,9 @@@@ VORBIS_REQUIRED="1.0"
d12 1
d14 1
a14 2
 AM_CONDITIONAL(HAVE_VORBIS, test x$have_vorbis = xtrue)
@@@@ -145,7 +150,9 @@@@ AM_CONDITIONAL(HAVE_VORBIS, test x$have_
d25 1
a25 1
@@@@ -158,11 +165,11 @@@@ have_lame="false"
a40 46
@@@@ -235,9 +242,9 @@@@ fi
 ALSA_CFLAGS="$ALSA_CFLAGS"
 AC_SUBST(ALSA_CFLAGS)
 
-# NetBSD 2.0 (for whatever reason) moved the audio routines to a new place
-AH_TEMPLATE([HAVE_LIBOSSAUDIO], [Have -lossaudio for NetBSD 2.x?])
-AC_CHECK_LIB(ossaudio, _oss_ioctl)
+# NetBSD and OpenBSD have an OSS compatability library
+AH_TEMPLATE([HAVE_LIBOSSAUDIO], [Have -lossaudio for NetBSD and OpenBSD])
+AC_CHECK_LIB(ossaudio, _oss_ioctl, [have_libossaudio=true])
 if test x$have_libossaudio = xtrue; then
 AC_DEFINE(HAVE_LIBOSSAUDIO,1)
 OSSAUDIO_LIBS=-lossaudio
@@@@ -457,9 +464,14 @@@@ have_libavcodec=false
 
 AVCODEC_BUILD="4734"
 
+OLD_LIBS="$LIBS"
+LIBS="$LIBS -lavutil -lm -lz -pthread"
+
 dnl PKG_CHECK_MODULES(AVCODEC, avcodec_acl = $AVCODEC_REQUIRED, have_libavcodec="true", have_libavcodec="false")
 ACL_PATH_AVCODEC($AVCODEC_BUILD , have_libavcodec="true", have_libavcodec="false")
 
+LIBS="$OLD_LIBS"
+
 AVCODEC_REQUIRED=$AVCODEC_VERSION
 
 AM_CONDITIONAL(HAVE_LIBAVCODEC, test x$have_libavcodec = xtrue)
@@@@ -581,7 +593,7 @@@@ COMMON_CFLAGS="-finline-functions -Wall 
 
 dnl Optimizing flags
 
-LQT_OPT_CFLAGS($host_cpu, ["-O3 -funroll-all-loops -fomit-frame-pointer"])
+dnl LQT_OPT_CFLAGS($host_cpu, ["-O3 -funroll-all-loops -fomit-frame-pointer"])
 
 AH_TEMPLATE([NDEBUG],
             [Causes debug code to e removed])
@@@@ -590,7 +602,7 @@@@ if test x$LQT_DEBUG != xtrue; then
 AC_DEFINE(NDEBUG)
 fi
 
-CFLAGS="$OPT_CFLAGS $COMMON_CFLAGS"
+CFLAGS="$CFLAGS $OPT_CFLAGS $COMMON_CFLAGS"
 
 # -L is required so that linker can find libquicktime when DESTDIR is used.
 # libtool bug, documented at: http://www.geocrawler.com/mail/thread.php3?subject=install+phase+fails&list=404
@


1.1
log
@update to libquicktime-0.9.7

see $HOMEPAGE for changes

ok jolan@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ configure.ac	Mon Dec  5 23:30:21 2005
d37 2
a38 1
@@@@ -159,7 +166,7 @@@@ OLD_CFLAGS=$CFLAGS
d41 1
a41 1
 if test x$have_vorbis = xtrue; then
d43 4
a46 2
+LIBS="$LIBS -lmp3lame -lvorbis -logg -lm"
 else
d48 5
a52 1
 fi
d71 1
a71 1
+LIBS="$LIBS -lvorbis -lvorbisenc -logg -la52 -lmp3lame"
@

