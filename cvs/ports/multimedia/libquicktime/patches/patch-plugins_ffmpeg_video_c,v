head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_4_5:1.1.0.4
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.04.06.20.24.01;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.29.21.22.14;	author kili;	state dead;
branches;
next	1.1;

1.1
date	2008.07.09.02.13.01;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update for newer FFmpeg API.

ok ajacoutot@@
@
text
@$OpenBSD$

Deal with newer FFmpeg API.

--- plugins/ffmpeg/video.c.orig	Thu Mar 27 17:15:32 2014
+++ plugins/ffmpeg/video.c	Thu Mar 27 17:16:55 2014
@@@@ -1335,6 +1335,11 @@@@ static int lqt_ffmpeg_encode_video(quicktime_t *file, 
     codec->avctx->height = height;
 
     lqt_ffmpeg_setup_encoding_colormodel(vtrack);
+#if ENCODE_VIDEO2
+    codec->frame->width = width;
+    codec->frame->height = height;
+    codec->frame->format = codec->avctx->pix_fmt;
+#endif
 
     lqt_get_pixel_aspect(file, track, &pixel_width, &pixel_height);
     codec->avctx->sample_aspect_ratio.num = pixel_width;
@


1.2
log
@Unbreak after the x264 update (problem first noticed by naddy@@, no
cookies for me).

Dependency improvements (x264 and doxygen) and whitespace cleanups
from Brad.

DOXYGEN_ENCODE_PATH_STRIP=${WRKSRC} trick pointed out by simon@@
(tested with two builds using different WRKOBJDIRs).


[kili@@petunia:libquicktime]$ head -30 libquicktime.diff
Unbreak after the x264 update (problem first noticed by naddy@@, no
cookies for me).

Dependency improvements (x264 and doxygen) and whitespace cleanups
from Brad.

DOXYGEN_ENCODE_PATH_STRIP=${WRKSRC} trick pointed out by simon@@
(tested with two builds using different WRKOBJDIRs).

ok jasper
@
text
@d1 8
a8 5
$OpenBSD: patch-plugins_ffmpeg_video_c,v 1.1 2008/07/09 02:13:01 jakemsr Exp $
--- plugins/ffmpeg/video.c.orig	Sat Jun 21 21:02:38 2008
+++ plugins/ffmpeg/video.c	Sat Jun 21 21:02:53 2008
@@@@ -32,7 +32,7 @@@@
 #define LOG_DOMAIN "ffmpeg_video"
d10 6
a15 4
 #ifdef HAVE_LIBSWSCALE
-#include <swscale.h>
+#include <libswscale/swscale.h>
 #endif
d17 2
a18 1
 // Enable interlaced encoding (experimental)
@


1.1
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* add @@bin markers in PLISTs
* bump PKGNAMEs

feedback/ok brad@@
@
text
@d1 1
a1 1
$OpenBSD$
@

