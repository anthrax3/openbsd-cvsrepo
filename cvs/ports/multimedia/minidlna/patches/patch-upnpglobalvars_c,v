head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.6
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	sthen_20121010:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2015.10.13.10.34.00;	author sthen;	state Exp;
branches;
next	1.3;
commitid	YT5n6YS8po9Up6v3;

1.3
date	2015.09.11.09.51.12;	author sthen;	state Exp;
branches;
next	1.2;
commitid	VsU8l8YUUQw8T9Fs;

1.2
date	2013.05.07.20.37.23;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2012.10.10.10.45.05;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.10.10.10.45.05;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update the minidlna port to use a newer version of the 'rescan' patch
@
text
@$OpenBSD$

Support -r for incremental rescan
http://sourceforge.net/p/minidlna/patches/145/

--- upnpglobalvars.c.orig	Thu Sep 10 20:24:09 2015
+++ upnpglobalvars.c	Tue Oct 13 11:23:03 2015
@@@@ -92,3 +92,4 @@@@ short int scanning = 0;
 volatile short int quitting = 0;
 volatile uint32_t updateID = 0;
 const char *force_sort_criteria = NULL;
+short int rescan_db = 0;
@


1.3
log
@Add the patchset from https://sourceforge.net/p/minidlna/patches/145/ to
support incremental rescans with the -r flag.
@
text
@d6 3
a8 8
--- upnpglobalvars.c.orig	Thu Sep 10 21:24:09 2015
+++ upnpglobalvars.c	Fri Sep 11 11:43:37 2015
@@@@ -88,7 +88,7 @@@@ char db_path[PATH_MAX] = {'\0'};
 char log_path[PATH_MAX] = {'\0'};
 struct media_dir_s * media_dirs = NULL;
 struct album_art_name_s * album_art_names = NULL;
-short int scanning = 0;
+short int scanning = 0, rescan_db = 0;
d12 1
@


1.2
log
@update to MiniDLNA 1.1.0, rolling in a bunch of patches which have been committed upstream
@
text
@d1 16
a16 22
$OpenBSD: patch-upnpglobalvars_c,v 1.1 2012/10/10 10:45:05 sthen Exp $
--- upnpglobalvars.c.orig	Tue Feb 14 18:44:56 2012
+++ upnpglobalvars.c	Sat Sep 22 02:08:06 2012
@@@@ -47,8 +47,8 @@@@
  * POSSIBILITY OF SUCH DAMAGE.
  */
 #include <sys/types.h>
+#include <sys/syslimits.h>
 #include <netinet/in.h>
-#include <linux/limits.h>
 
 #include "config.h"
 #include "upnpglobalvars.h"
@@@@ -63,7 +63,7 @@@@ time_t startup_time = 0;
 struct runtime_vars_s runtime_vars;
 uint32_t runtime_flags = INOTIFY_MASK;
 
-const char * pidfilename = "/var/run/minidlna.pid";
+const char * pidfilename = "/var/run/minidlna/minidlna.pid";
 
 char uuidvalue[] = "uuid:00000000-0000-0000-0000-000000000000";
 char modelname[MODELNAME_MAX_LEN] = ROOTDEV_MODELNAME;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import ports/multimedia/minidlna, ok/testing landry@@

MiniDLNA is lightweight server software written in C, capable of
serving media files to DLNA/UPnP-AV clients (televisions, tablets,
etc).
@
text
@@
