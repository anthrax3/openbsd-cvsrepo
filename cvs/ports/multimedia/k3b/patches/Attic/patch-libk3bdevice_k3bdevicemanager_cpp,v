head	1.2;
access;
symbols
	OPENBSD_5_9:1.1.1.1.0.30
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.32
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.28
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.26
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.24
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.22
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.20
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.18
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.16
	OPENBSD_5_0:1.1.1.1.0.14
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.12
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.10
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.8
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.6
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.4
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	jakemsr-20080511:1.1.1.1
	jakemsr:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2016.04.29.21.10.22;	author zhuk;	state dead;
branches;
next	1.1;
commitid	u9TvebbKy1wgQMr9;

1.1
date	2008.05.11.22.18.35;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.05.11.22.18.35;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove KDE3 applications that have well-working KDE4+ counterparts.
@
text
@$OpenBSD: patch-libk3bdevice_k3bdevicemanager_cpp,v 1.1 2008/05/11 22:18:35 jakemsr Exp $
--- libk3bdevice/k3bdevicemanager.cpp.orig	Fri Nov  2 02:55:06 2007
+++ libk3bdevice/k3bdevicemanager.cpp	Thu Jan 17 21:45:15 2008
@@@@ -97,7 +97,7 @@@@ typedef unsigned char u8;
 #include <camlib.h>
 #endif
 
-#ifdef Q_OS_NETBSD
+#if defined(Q_OS_NETBSD) || defined(Q_OS_OPENBSD)
 #include <sys/scsiio.h>
 #endif
 
@@@@ -238,7 +238,7 @@@@ int K3bDevice::DeviceManager::scanBus()
 #ifdef Q_OS_FREEBSD
   BSDDeviceScan();
 #endif
-#ifdef Q_OS_NETBSD
+#if defined(Q_OS_NETBSD) || defined(Q_OS_OPENBSD)
   NetBSDDeviceScan();
 #endif
 
@@@@ -327,11 +327,15 @@@@ void K3bDevice::DeviceManager::NetBSDDeviceScan()
   // Whole disk mask (According to cd(4), the AMD64, i386 and BeBox ports use
   // 'd' as whole-disk partition, the rest uses 'c'.)
 
+#ifndef Q_OS_OPENBSD
 #if defined(__i386__) || defined (__amd64__) || defined (__bebox__)
   static const char slicename = 'd';
 #else
   static const char slicename = 'c';
 #endif
+#else  // Q_OS_OPENBSD
+  static const char slicename = 'c';
+#endif
 
   char devicename[11]; // /dev/rcdXd + trailing zero
 
@@@@ -630,7 +634,7 @@@@ bool K3bDevice::DeviceManager::testForCdrom( const QSt
   Q_UNUSED(devicename);
   return true;
 #endif
-#if defined(Q_OS_LINUX) || defined(Q_OS_NETBSD)
+#if defined(Q_OS_LINUX) || defined(Q_OS_NETBSD) || defined(Q_OS_OPENBSD)
   bool ret = false;
   int cdromfd = K3bDevice::openDevice( devicename.ascii() );
   if (cdromfd < 0) {
@@@@ -648,7 +652,7 @@@@ bool K3bDevice::DeviceManager::testForCdrom( const QSt
   }
   else {
     k3bDebug() << devicename << " is block device (" << (int)(cdromStat.st_rdev & 0xFF) << ")" << endl;
-#if defined(Q_OS_NETBSD)
+#if defined(Q_OS_NETBSD) || defined(Q_OS_OPENBSD)
   }
   {
 #endif
@@@@ -798,7 +802,7 @@@@ void K3bDevice::DeviceManager::removeDevice( const QSt
 
 bool K3bDevice::DeviceManager::determineBusIdLun( const QString& dev, int& bus, int& id, int& lun )
 {
-#ifdef Q_OS_FREEBSD
+#if defined(Q_OS_FREEBSD) || defined(Q_OS_OPENBSD)
   Q_UNUSED(dev);
   Q_UNUSED(bus);
   Q_UNUSED(id);
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import k3b-1.0.4

K3b was created to be a feature-rich and easy to handle CD burning
application.  It can do many things, such as creating or copying audio,
data, video or mixed-mode CDs, CD ripping, and DVD ripping, burning and
blanking.

ok ian@@

@
text
@@
