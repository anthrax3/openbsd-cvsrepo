head	1.3;
access;
symbols
	OPENBSD_5_2:1.2.0.20
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.18
	OPENBSD_5_0:1.2.0.16
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.14
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.12
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.10
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.8
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.6
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	ckuethe-20071116:1.1.1.1
	ckuethe:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2013.01.21.05.30.59;	author brad;	state dead;
branches;
next	1.2;

1.2
date	2007.11.20.19.12.12;	author ckuethe;	state Exp;
branches;
next	1.1;

1.1
date	2007.11.19.21.10.40;	author ckuethe;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.11.19.21.10.40;	author ckuethe;	state Exp;
branches;
next	;


desc
@@


1.3
log
@tedu pspvc. pspvc is a dead project and hasn't worked with ffmpeg(1)
due to command line parameter changes ages ago. has been marked BROKEN
for over 3 releases.

ok ajacoutot@@
@
text
@--- src/callbacks.c.orig	Tue Mar 13 05:02:00 2007
+++ src/callbacks.c	Mon Nov 19 17:37:33 2007
@@@@ -379,9 +379,9 @@@@ void launchffmpeg_video(struct convparam *param,gint p
 			
 
 //	needed stuff for H.264'
-//  -acodec aac -vcodec h264 width*height<=76800 width%16=0? height%16=0? -ar 48000 -coder 1 -r 30000/1001  -f psp 
+//  -acodec libfaac -vcodec libx264 width*height<=76800 width%16=0? height%16=0? -ar 48000 -coder 1 -r 30000/1001  -f psp
 			
-			args[argc++]=g_strdup(PACKAGE_DATA_DIR"/pspvc/bin/ffmpeg");
+			args[argc++]=g_strdup("ffmpeg");
 			if(nb_threads>1)
 			{
 				args[argc++]=g_strdup("-threads");
@@@@ -390,15 +390,21 @@@@ void launchffmpeg_video(struct convparam *param,gint p
 			args[argc++]=g_strdup("-y");
  			args[argc++]=g_strdup("-i");
  			args[argc++]=g_strdup_printf("%s",cparam->filename);
+			args[argc++]=g_strdup("-map");
+			args[argc++]=g_strdup("-0.0:0.0");
+			args[argc++]=g_strdup("-map");
+			args[argc++]=g_strdup("-0.1:0.1");
+			args[argc++]=g_strdup("-ac");
+			args[argc++]=g_strdup("2");
 			args[argc++]=g_strdup("-acodec");
-			args[argc++]=g_strdup("aac");
+			args[argc++]=g_strdup("libfaac");
 			args[argc++]=g_strdup("-ab");
 			args[argc++]=g_strdup_printf("%dkb",cparam->ab);
 			args[argc++]=g_strdup("-vol");
 			args[argc++]=g_strdup_printf("%d",cparam->volume);
 			args[argc++]=g_strdup("-vcodec");
 			if(cparam->codec==0)
-				args[argc++]=g_strdup("h264");
+				args[argc++]=g_strdup("libx264");
 			else
 				args[argc++]=g_strdup("mpeg4");
 			args[argc++]=g_strdup("-b");
@@@@ -549,7 +555,7 @@@@ void launchffmpeg_thumbnail(struct convparam *param,gi
 //				command=g_strdup_printf("ffmpeg -y -i \"%s\" -title \"%s\" -f singlejpeg -ss 5 -vframes 1 -s %s -padtop %d -padbottom %d -an M4V%05d.THM 2>&1"
 				 //,shm_param->filename,shm_param->title,thmsize,cf,cf,shm_param->pspnum);
 			argc=0;
-			args[argc++]=g_strdup(PACKAGE_DATA_DIR"/pspvc/bin/ffmpeg");
+			args[argc++]=g_strdup("ffmpeg");
 			printf("[launchffmpeg] program=%s\n",args[0]);
 			args[argc++]=g_strdup("-y");
  			args[argc++]=g_strdup("-i");
@


1.2
log
@I just got some matroska files with multiple input audio streams that crashes
ffmpeg unless I specifically select which streams to encode. Add a patch to
"-map" the right streams.
@
text
@@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
+++ src/callbacks.c	Wed Nov  7 15:06:34 2007
d15 2
a16 1
@@@@ -391,14 +391,14 @@@@ void launchffmpeg_video(struct convparam *param,gint p
d19 6
d39 1
a39 1
@@@@ -549,7 +549,7 @@@@ void launchffmpeg_thumbnail(struct convparam *param,gi
@


1.1.1.1
log
@pspvc is a GUI front end to ffmpeg to ease the process of compressing video
to play on portable MPEG4 players (like the Playstation Portable)
ok kili@@
@
text
@@
