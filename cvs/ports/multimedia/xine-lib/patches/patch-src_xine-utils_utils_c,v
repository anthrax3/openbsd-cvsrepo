head	1.7;
access;
symbols
	OPENBSD_6_1:1.7.0.2
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.6.0.14
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.10
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.12
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.8
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.6
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.4
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_4_8:1.4.0.12
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.10
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.8
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.6
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jakemsr:1.1.1.1
	jakemsr-20060324:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2017.02.25.11.17.30;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	R9cUvPmiwv30c4Ve;

1.6
date	2013.04.04.16.48.22;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2010.09.20.07.58.13;	author sthen;	state dead;
branches;
next	1.4;

1.4
date	2008.01.15.00.36.46;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2007.06.13.10.58.29;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.12.04.48.14;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2006.11.01.13.13.03;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to xine-lib-1.2.8.

from Brad (maintainer)
@
text
@$OpenBSD: patch-src_xine-utils_utils_c,v 1.6 2013/04/04 16:48:22 brad Exp $

Make use of clock_gettime() on OpenBSD. Until we have per-process
timers and can enable _POSIX_TIMERS in unistd.h.

--- src/xine-utils/utils.c.orig	Tue Feb 21 06:13:14 2017
+++ src/xine-utils/utils.c	Thu Feb 23 19:17:09 2017
@@@@ -669,7 +669,8 @@@@ void xine_xprintf(xine_t *xine, int verbose, const cha
 
 int xine_monotonic_clock(struct timeval *tv, struct timezone *tz)
 {
-#if _POSIX_TIMERS > 0 && defined(_POSIX_MONOTONIC_CLOCK) && defined(HAVE_POSIX_TIMERS)
+#if _POSIX_TIMERS > 0 && defined(_POSIX_MONOTONIC_CLOCK) && defined(HAVE_POSIX_TIMERS) || \
+    defined(__OpenBSD__)
   static int xmc_mode = 0;
 
   do {
@


1.6
log
@Make use of clock_gettime() on OpenBSD.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 3
--- src/xine-utils/utils.c.orig	Wed Apr  3 18:51:41 2013
+++ src/xine-utils/utils.c	Wed Apr  3 19:04:04 2013
@@@@ -671,7 +671,8 @@@@ void xine_xprintf(xine_t *xine, int verbose, const cha
d15 1
a15 2
   static int initialized = 0;
   static int use_clock_monotonic = 0;
d17 1
@


1.5
log
@Garbage collect some patches for Xine-lib which are not necessary.
From Brad.
@
text
@d1 8
a8 4
$OpenBSD: patch-src_xine-utils_utils_c,v 1.4 2008/01/15 00:36:46 jakemsr Exp $
--- src/xine-utils/utils.c.orig	Tue Jan  1 08:30:09 2008
+++ src/xine-utils/utils.c	Wed Jan  9 01:50:22 2008
@@@@ -49,6 +49,7 @@@@
d10 7
a16 4
 #ifdef HAVE_NL_LANGINFO
 #include <langinfo.h>
+#include <localcharset.h>
 #endif
a17 1
 #if defined(__CYGWIN__) || defined(WIN32)
@


1.4
log
@update to 1.1.9.1

security fix: CVE-2008-0225 - heap-based buffer overflow in libreal (RTSP)

also incorporates post release bug fix in WMV decoding

from brad, thanks
@
text
@d1 1
a1 1
$OpenBSD: patch-src_xine-utils_utils_c,v 1.3 2007/06/13 10:58:29 jakemsr Exp $
@


1.3
log
@update to xine-lib-1.1.7

- use some CONFIGURE_ENV instead of patching
- rearrange/update CONFIGURE_ARGS
- many patches no longer relevant
- add CD audio support

input, tetsing and prodding from brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/xine-utils/utils.c.orig	Sun Apr 15 10:42:17 2007
+++ src/xine-utils/utils.c	Sun May 20 22:40:14 2007
@@@@ -52,6 +52,7 @@@@
@


1.2
log
@upgrade to xine-lib 1.1.2

* Security fixes:
  - CVE-2006-2802: possible buffer overflow in the HTTP plugin.
  - possible buffer overflow via bad indexes in specially-crafted AVI files
* Fix a potential crash with fixed-size lacing in the Matroska demuxer
* Enable AMD64 mmx/sse support in some plugins (tvtime, libmpeg2, goom...)
* Fix xxmc subpictures (broken since 1.1.1)
* Add support for RealPlayer 10 codecs

WANTLIB tweak from bernd@@

testing by steven@@ and bernd@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_xine-utils_utils_c,v 1.1.1.1 2006/03/24 22:43:41 jakemsr Exp $
--- src/xine-utils/utils.c.orig	Fri Jun 23 14:24:22 2006
+++ src/xine-utils/utils.c	Fri Sep 15 17:53:22 2006
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- src/xine-utils/utils.c.orig	Mon Sep  5 12:02:57 2005
+++ src/xine-utils/utils.c	Thu Dec 29 23:39:06 2005
d6 1
a6 1
 #ifdef HAVE_LANGINFO_CODESET
a11 9
@@@@ -523,7 +524,7 @@@@ char *xine_get_system_encoding(void) {
   char *codeset = NULL;
   
 #ifdef HAVE_LANGINFO_CODESET
-  codeset = nl_langinfo(CODESET);
+  codeset = locale_charset();
 #endif
   /*
    * guess locale codeset according to shell variables
@


1.1.1.1
log
@initial import of xine-lib

xine is a free multimedia player. It plays back CDs, DVDs, and VCDs. It
also decodes multimedia files like AVI, MOV, WMV, and MP3 from local
disk drives, and displays multimedia streamed over the Internet. It
interprets many of the most common multimedia formats available - and
some of the most uncommon formats, too.

prodded by jolan@@ and bernd@@

@
text
@@


1.1.1.1.2.1
log
@MFC:
upgrade to xine-lib 1.1.2

* Security fixes:
- CVE-2006-2802: possible buffer overflow in the HTTP plugin.
- possible buffer overflow via bad indexes in specially-crafted AVI files
* Fix a potential crash with fixed-size lacing in the Matroska demuxer
* Enable AMD64 mmx/sse support in some plugins (tvtime, libmpeg2, goom...)
* Fix xxmc subpictures (broken since 1.1.1)
* Add support for RealPlayer 10 codecs

WANTLIB tweak from bernd@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_xine-utils_utils_c,v 1.2 2006/10/12 04:48:14 brad Exp $
--- src/xine-utils/utils.c.orig	Fri Jun 23 14:24:22 2006
+++ src/xine-utils/utils.c	Fri Sep 15 17:53:22 2006
d6 1
a6 1
 #ifdef HAVE_NL_LANGINFO
d12 9
@

