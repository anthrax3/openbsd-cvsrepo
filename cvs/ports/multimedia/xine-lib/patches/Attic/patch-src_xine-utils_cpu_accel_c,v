head	1.4;
access;
symbols
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.1.1.0.4
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jakemsr:1.1.1.1
	jakemsr-20060324:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2009.04.04.00.28.56;	author sthen;	state dead;
branches;
next	1.3;

1.3
date	2008.09.25.20.43.09;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2007.06.13.10.58.29;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Security update to 1.1.16.3 from Brad (maintainer) - int overflows in
the 4XM demux (TKADV2009-004, CVE-2009-0385) and the Quicktime demux.
@
text
@$OpenBSD: patch-src_xine-utils_cpu_accel_c,v 1.3 2008/09/25 20:43:09 brad Exp $
--- src/xine-utils/cpu_accel.c.orig	Tue Sep 23 19:09:01 2008
+++ src/xine-utils/cpu_accel.c	Tue Sep 23 19:12:58 2008
@@@@ -40,6 +40,10 @@@@
 
 #include "xineutils.h"
 
+#if defined(PIC) && ! defined(__PIC__)
+#define __PIC__
+#endif
+
 #if defined(ARCH_X86) || defined(ARCH_X86_64)
 
 static jmp_buf sigill_return;
@


1.3
log
@Correct detection of code being compiled as PIC. Allows the cpuid inline
assembly code to compile thus allowing dynamic SIMD instruction detection
and the use of MMX Extended and 3DNow (as well as SSE/SSE2 if and when
such code is added).

ok jakemsr@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_xine-utils_cpu_accel_c,v 1.2 2007/06/13 10:58:29 jakemsr Exp $
@


1.2
log
@update to xine-lib-1.1.7

- use some CONFIGURE_ENV instead of patching
- rearrange/update CONFIGURE_ARGS
- many patches no longer relevant
- add CD audio support

input, tetsing and prodding from brad@@
@
text
@d1 9
a9 7
$OpenBSD$
--- src/xine-utils/cpu_accel.c.orig	Thu Mar 29 15:45:12 2007
+++ src/xine-utils/cpu_accel.c	Sun May 20 22:40:14 2007
@@@@ -56,6 +56,12 @@@@ static uint32_t arch_accel (void)
   /* No need to test for this on AMD64, we know what the
      platform has.  */
   caps = MM_ACCEL_X86_MMX | MM_ACCEL_X86_SSE | MM_ACCEL_X86_MMXEXT | MM_ACCEL_X86_SSE2;
d12 1
a12 5
+#if defined(__OpenBSD__)
+#ifdef __i386__
+  caps = MM_ACCEL_X86_MMX;
+#endif
 #else
d14 1
a14 1
 #ifndef _MSC_VER
@


1.1
log
@Initial revision
@
text
@d2 2
a3 2
--- src/xine-utils/cpu_accel.c.orig	Fri Jul 29 13:31:13 2005
+++ src/xine-utils/cpu_accel.c	Fri Dec 30 00:36:21 2005
@


1.1.1.1
log
@initial import of xine-lib

xine is a free multimedia player. It plays back CDs, DVDs, and VCDs. It
also decodes multimedia files like AVI, MOV, WMV, and MP3 from local
disk drives, and displays multimedia streamed over the Internet. It
interprets many of the most common multimedia formats available - and
some of the most uncommon formats, too.

prodded by jolan@@ and bernd@@

@
text
@@
