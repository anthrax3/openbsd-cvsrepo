head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.04.16.05.09.00;	author brad;	state dead;
branches;
next	1.3;

1.3
date	2013.11.30.22.13.37;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.04.00.28.56;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2009.02.16.01.24.24;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to Xine-lib 1.2.5.

ok juanfra@@
@
text
@$OpenBSD: patch-src_combined_ffmpeg_Makefile_in,v 1.3 2013/11/30 22:13:37 brad Exp $

Improve locating of avcodec.h by replacing the sed scripts.

--- src/combined/ffmpeg/Makefile.in.orig	Wed Nov 20 18:40:06 2013
+++ src/combined/ffmpeg/Makefile.in	Wed Nov 20 18:40:47 2013
@@@@ -998,7 +998,7 @@@@ avcodec_video.list: AV_CODECS:=/CODEC_ID_MPEG1VIDEO/,/
 # that weird shell call just yields full path of the avcodec.h file
 avcodec_audio.list avcodec_video.list: $(shell \
  echo '#include "$(srcdir)/ffmpeg_decoder.h"' | $(AV_CPP) -M - |\
- sed -e 's/ \+/\n/g;' | sed -n -e '/avcodec\.h/p;')
+ sed -e '/avcodec\.h/! d; s%^.* \([^ ]*/avcodec\.h\) .*%\1%')
 	$(AM_V_GEN)echo '#include "$(srcdir)/ffmpeg_decoder.h"' | $(AV_CPP) - |\
 	  sed -e $(AV_CODECS)'! d; s/^[ \t]*//; s/[=,].*//; /^$$/ d' >$@@
 
@


1.3
log
@Update to Xine-lib 1.2.4.

ok juanfra@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Security update to 1.1.16.3 from Brad (maintainer) - int overflows in
the 4XM demux (TKADV2009-004, CVE-2009-0385) and the Quicktime demux.
@
text
@d1 14
a14 4
$OpenBSD: patch-src_combined_ffmpeg_Makefile_in,v 1.1 2009/02/16 01:24:24 sthen Exp $
--- src/combined/ffmpeg/Makefile.in.orig	Tue Feb 10 13:34:50 2009
+++ src/combined/ffmpeg/Makefile.in	Fri Feb 13 12:44:19 2009
@@@@ -889,8 +889,7 @@@@ avcodec_video.list: AV_CODECS:=/CODEC_ID_MPEG1VIDEO/,/
a15 8
 avcodec_audio.list avcodec_video.list:
 	echo '#include "$(srcdir)/ffmpeg_decoder.h"' | $(AV_CPP) - |\
-	  sed -e $(AV_CODECS)'! d; s/^\s*//; s/[=,].*//; /^$$/ d' |\
-	  head -n -1 >$@@
+	  sed -e $(AV_CODECS)'! d; s/^[ \t]*//; s/[=,].*//; /^$$/ d' >$@@
 
 # Generate the mappings. These are #included where needed.
 ff_%_list.h: $(srcdir)/mkcodeclist.pl avcodec_%.list $(srcdir)/xine_%.list
@


1.1
log
@SECURITY update to 1.1.16.2; CVE-2008-5239, CVE-2008-5240, TKADV2009-004
from Brad (maintainer).
@
text
@d1 1
a1 1
$OpenBSD$
@

