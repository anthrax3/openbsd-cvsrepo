head	1.9;
access;
symbols
	OPENBSD_4_9:1.8.0.6
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.4
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.1.0.2
	OPENBSD_4_2_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2011.04.15.23.22.31;	author sthen;	state dead;
branches;
next	1.8;

1.8
date	2010.01.05.11.48.51;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.02.16.01.24.24;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.02.02.22.00.42;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2008.07.02.01.02.42;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2008.06.18.01.26.41;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2008.01.15.00.36.46;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.31.10.55.37;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2007.06.13.10.58.29;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.9
log
@remove casts now that NULL is a void *
from Brad.
@
text
@$OpenBSD: patch-src_input_input_http_c,v 1.8 2010/01/05 11:48:51 sthen Exp $
--- src/input/input_http.c.orig	Mon Nov 30 15:55:44 2009
+++ src/input/input_http.c	Wed Dec  2 20:36:12 2009
@@@@ -411,7 +411,7 @@@@ static off_t http_plugin_read_int (http_input_plugin_t
 
 error:
   if (!_x_action_pending(this->stream))
-    _x_message (this->stream, XINE_MSG_READ_ERROR, this->host, NULL);
+    _x_message (this->stream, XINE_MSG_READ_ERROR, this->host, (char *)NULL);
   xine_log (this->stream->xine, XINE_LOG_MSG, _("input_http: read error %d\n"), errno);
   return read_bytes;
 }
@@@@ -683,7 +683,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
       if (http_plugin_basicauth (this_class->proxyuser,
 			         this_class->proxypassword,
 				 this->proxyauth, BUFSIZE)) {
-	_x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "proxy error", NULL);
+	_x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "proxy error", (char *)NULL);
 	return 0;
       }
     }
@@@@ -693,7 +693,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
   if (!_x_parse_url(this->mrl, &this->proto, &this->host, &this->port,
                     &this->user, &this->password, &this->uri,
                     &this->user_agent)) {
-    _x_message(this->stream, XINE_MSG_GENERAL_WARNING, "malformed url", NULL);
+    _x_message(this->stream, XINE_MSG_GENERAL_WARNING, "malformed url", (char *)NULL);
     return 0;
   }
   use_proxy = use_proxy && _x_use_proxy(this_class, this->host);
@@@@ -703,7 +703,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
 
   if (this->user && strlen(this->user)) {
     if (http_plugin_basicauth (this->user, this->password, this->auth, BUFSIZE)) {
-      _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "basic auth error", NULL);
+      _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "basic auth error", (char *)NULL);
       return -1;
     }
   }
@@@@ -757,7 +757,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
     } while ((res == XIO_TIMEOUT) && (progress <= 100000));
 
     if (res != XIO_READY) {
-      _x_message(this->stream, XINE_MSG_NETWORK_UNREACHABLE, this->mrl, NULL);
+      _x_message(this->stream, XINE_MSG_NETWORK_UNREACHABLE, this->mrl, (char *)NULL);
       return -3;
     }
   }
@@@@ -799,7 +799,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
 		     this->user_agent ? " " : "",
 		     VERSION);
   if (_x_io_tcp_write (this->stream, this->fh, this->buf, buflen) != buflen) {
-    _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "couldn't send request", NULL);
+    _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "couldn't send request", (char *)NULL);
     xprintf(this_class->xine, XINE_VERBOSITY_DEBUG, "input_http: couldn't send request\n");
     return -4;
   }
@@@@ -843,7 +843,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
 	    (sscanf(this->buf, "ICY %d %50[^\015\012]", /* icecast 1 ? */
 		    &httpcode, httpstatus) != 2)
 	   ) {
-	    _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "invalid http answer", NULL);
+	    _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "invalid http answer", (char *)NULL);
 	    xine_log (this->stream->xine, XINE_LOG_MSG,
 		      _("input_http: invalid http answer\n"));
 	    return -6;
@@@@ -854,20 +854,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
 		    _("input_http: 3xx redirection: >%d %s<\n"),
 		    httpcode, httpstatus);
 	} else if (httpcode == 404) {
-	  _x_message(this->stream, XINE_MSG_FILE_NOT_FOUND, this->mrl, NULL);
+	  _x_message(this->stream, XINE_MSG_FILE_NOT_FOUND, this->mrl, (char *)NULL);
 	  xine_log (this->stream->xine, XINE_LOG_MSG,
 		    _("input_http: http status not 2xx: >%d %s<\n"),
 		                        httpcode, httpstatus);
 	  return -7;
 	} else if (httpcode == 403 || httpcode == 401) {
-          _x_message(this->stream, XINE_MSG_PERMISSION_ERROR, this->mrl, NULL);
+          _x_message(this->stream, XINE_MSG_PERMISSION_ERROR, this->mrl, (char *)NULL);
 	  xine_log (this->stream->xine, XINE_LOG_MSG,
 		    _("input_http: http status not 2xx: >%d %s<\n"),
 		    httpcode, httpstatus);
 	  return -8;
 	} else if (httpcode < 200 || httpcode >= 300) {
 	  _x_message(this->stream, XINE_MSG_CONNECTION_REFUSED, "http status not 2xx: ",
-	               httpstatus, NULL);
+	               httpstatus, (char *)NULL);
 	  xine_log (this->stream->xine, XINE_LOG_MSG,
 		    _("input_http: http status not 2xx: >%d %s<\n"),
 		    httpcode, httpstatus);
@@@@ -964,7 +964,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
     } else
       len ++;
     if ( len >= BUFSIZE ) {
-       _x_message(this->stream, XINE_MSG_PERMISSION_ERROR, this->mrl, NULL);
+       _x_message(this->stream, XINE_MSG_PERMISSION_ERROR, this->mrl, (char *)NULL);
        xine_log (this->stream->xine, XINE_LOG_MSG,
          _("input_http: buffer exhausted after %d bytes."), BUFSIZE);
        return -10;
@


1.8
log
@Update to xine-lib 1.1.17 and disable win32 codecs. From Brad.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_input_input_http_c,v 1.7 2009/02/16 01:24:24 sthen Exp $
@


1.7
log
@SECURITY update to 1.1.16.2; CVE-2008-5239, CVE-2008-5240, TKADV2009-004
from Brad (maintainer).
@
text
@d1 5
a5 5
$OpenBSD: patch-src_input_input_http_c,v 1.6 2009/02/02 22:00:42 sthen Exp $
--- src/input/input_http.c.orig	Tue Feb 10 12:32:23 2009
+++ src/input/input_http.c	Wed Feb 11 00:55:26 2009
@@@@ -409,7 +409,7 @@@@ static off_t http_plugin_read_int (http_input_plugin_t
   
d7 1
a7 1
   if (!_x_action_pending(this->stream)) 
d13 1
a13 1
@@@@ -681,7 +681,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 2
@@@@ -690,7 +690,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
   
d24 2
a25 1
                     &this->user, &this->password, &this->uri)) {
d31 2
a32 2
@@@@ -700,7 +700,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
   
d40 1
a40 1
@@@@ -754,7 +754,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 2
a50 2
@@@@ -794,7 +794,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
 		     "\015\012",
d58 1
a58 1
@@@@ -838,7 +838,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d64 1
a64 1
 	    xine_log (this->stream->xine, XINE_LOG_MSG, 
d67 1
a67 1
@@@@ -849,20 +849,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d88 1
a88 1
       	  xine_log (this->stream->xine, XINE_LOG_MSG,
d91 1
a91 1
@@@@ -959,7 +959,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@


1.6
log
@- SECURITY update to Xine-lib 1.1.16.1
  - Heap overflow in Quicktime atom parsing.  (CVE-2008-5234 vector 1)
  - Multiple buffer overflows.                (CVE-2008-5236)
  - Multiple integer overflows.               (CVE-2008-5237)
  - Unchecked read function results.          (CVE-2008-5239)
  - Unchecked malloc using untrusted values.  (CVE-2008-5240 vectors 3 & 4)
  - Buffer indexing using an untrusted value. (CVE-2008-5243)
- Clean up the Makefile
- Enable the Xv motion compensation support
- Remove the JACK sound support
- Remove the now unnecessary multi-packaging
- Remove an unnecessary patch for the Sun sound code
- Comment out some files in the PLIST that do not pertain to OpenBSD
- Add WavPack support

from Brad (taking MAINTAINER).
@
text
@d1 3
a3 3
$OpenBSD: patch-src_input_input_http_c,v 1.5 2008/07/02 01:02:42 brad Exp $
--- src/input/input_http.c.orig	Wed Jan  7 11:14:32 2009
+++ src/input/input_http.c	Thu Jan  8 01:02:34 2009
d13 1
a13 1
@@@@ -679,7 +679,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 1
@@@@ -688,7 +688,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d31 1
a31 1
@@@@ -698,7 +698,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d40 1
a40 1
@@@@ -752,7 +752,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 1
a49 1
@@@@ -792,7 +792,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d58 1
a58 1
@@@@ -836,7 +836,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d67 1
a67 1
@@@@ -847,20 +847,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d91 1
a91 1
@@@@ -957,7 +957,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@


1.5
log
@update to Xine-lib 1.1.14

ok jakemsr@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_input_input_http_c,v 1.4 2008/06/18 01:26:41 brad Exp $
--- src/input/input_http.c.orig	Wed Jun 25 09:04:09 2008
+++ src/input/input_http.c	Sun Jun 29 20:54:12 2008
d13 1
a13 1
@@@@ -671,7 +671,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 1
@@@@ -680,7 +680,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d31 1
a31 1
@@@@ -690,7 +690,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d40 1
a40 1
@@@@ -744,7 +744,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 1
a49 1
@@@@ -784,7 +784,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d58 1
a58 1
@@@@ -828,7 +828,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d67 1
a67 1
@@@@ -839,20 +839,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d91 1
a91 1
@@@@ -949,7 +949,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@


1.4
log
@update to Xine-lib 1.1.13

This release contains a security fix (buffer overflow in the NSF demuxer,
CVE-2008-1878). There are also a few bug fixes, and a new JACK output
plugin.

ok jakemsr@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_input_http_c,v 1.3 2008/01/15 00:36:46 jakemsr Exp $
--- src/input/input_http.c.orig	Sat Jun 14 19:15:00 2008
+++ src/input/input_http.c	Mon Jun 16 02:30:50 2008
@@@@ -407,7 +407,7 @@@@ static off_t http_plugin_read_int (http_input_plugin_t
d13 1
a13 1
@@@@ -663,7 +663,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 1
@@@@ -672,7 +672,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d31 1
a31 1
@@@@ -682,7 +682,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d40 1
a40 1
@@@@ -736,7 +736,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 1
a49 1
@@@@ -776,7 +776,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d58 1
a58 1
@@@@ -820,7 +820,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d67 1
a67 1
@@@@ -831,20 +831,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d91 1
a91 1
@@@@ -940,7 +940,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@


1.3
log
@update to 1.1.9.1

security fix: CVE-2008-0225 - heap-based buffer overflow in libreal (RTSP)

also incorporates post release bug fix in WMV decoding

from brad, thanks
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_input_http_c,v 1.2 2007/10/31 10:55:37 jakemsr Exp $
--- src/input/input_http.c.orig	Tue Jan  1 08:30:08 2008
+++ src/input/input_http.c	Wed Jan  9 01:50:22 2008
@@@@ -417,7 +417,7 @@@@ static off_t http_plugin_read_int (http_input_plugin_t
d13 1
a13 1
@@@@ -673,7 +673,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 1
@@@@ -682,7 +682,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d31 1
a31 1
@@@@ -692,7 +692,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d40 1
a40 1
@@@@ -746,7 +746,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 3
a51 3
@@@@ -791,7 +791,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
            VERSION);
   buflen = strlen(this->buf);
d58 1
a58 1
@@@@ -835,7 +835,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d67 1
a67 1
@@@@ -846,20 +846,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d91 1
a91 1
@@@@ -952,7 +952,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@


1.2
log
@maintainence update to xine-lib-1.1.8

from brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_input_http_c,v 1.1 2007/06/13 10:58:29 jakemsr Exp $
--- src/input/input_http.c.orig	Sat Aug 18 19:36:45 2007
+++ src/input/input_http.c	Wed Oct 17 20:29:24 2007
@@@@ -419,7 +419,7 @@@@ static off_t http_plugin_read_int (http_input_plugin_t
d13 1
a13 1
@@@@ -675,7 +675,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 1
@@@@ -684,7 +684,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d31 1
a31 1
@@@@ -694,7 +694,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d40 1
a40 1
@@@@ -748,7 +748,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 1
a49 1
@@@@ -793,7 +793,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d58 1
a58 1
@@@@ -837,7 +837,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d67 1
a67 1
@@@@ -848,20 +848,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d91 1
a91 1
@@@@ -954,7 +954,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@


1.1
log
@update to xine-lib-1.1.7

- use some CONFIGURE_ENV instead of patching
- rearrange/update CONFIGURE_ARGS
- many patches no longer relevant
- add CD audio support

input, tetsing and prodding from brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/input/input_http.c.orig	Fri May 11 14:33:21 2007
+++ src/input/input_http.c	Fri Jun  8 17:30:34 2007
@@@@ -396,7 +396,7 @@@@ static off_t http_plugin_read_int (http_input_plugin_t
d13 1
a13 1
@@@@ -651,7 +651,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d22 1
a22 1
@@@@ -660,7 +660,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d31 1
a31 1
@@@@ -670,7 +670,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d40 1
a40 1
@@@@ -724,7 +724,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d49 1
a49 1
@@@@ -769,7 +769,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d58 1
a58 1
@@@@ -813,7 +813,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d67 1
a67 1
@@@@ -824,20 +824,20 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
d91 1
a91 1
@@@@ -916,7 +916,7 @@@@ static int http_plugin_open (input_plugin_t *this_gen 
@

