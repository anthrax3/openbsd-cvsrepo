head	1.9;
access;
symbols
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jakemsr:1.1.1.1
	jakemsr-20060324:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2008.06.18.01.26.41;	author brad;	state dead;
branches;
next	1.8;

1.8
date	2008.01.15.00.36.46;	author jakemsr;	state Exp;
branches;
next	1.7;

1.7
date	2007.10.31.10.55.37;	author jakemsr;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.13.10.58.29;	author jakemsr;	state Exp;
branches;
next	1.5;

1.5
date	2007.05.01.20.05.10;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2007.01.02.19.42.59;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.07.09.21.01;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.12.04.48.14;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2006.11.01.13.13.03;	author sturm;	state Exp;
branches;
next	1.1.1.1.2.2;

1.1.1.1.2.2
date	2006.12.07.21.46.58;	author sturm;	state Exp;
branches;
next	1.1.1.1.2.3;

1.1.1.1.2.3
date	2007.01.03.21.20.53;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.9
log
@update to Xine-lib 1.1.13

This release contains a security fix (buffer overflow in the NSF demuxer,
CVE-2008-1878). There are also a few bug fixes, and a new JACK output
plugin.

ok jakemsr@@
@
text
@$OpenBSD: patch-src_input_libreal_real_c,v 1.8 2008/01/15 00:36:46 jakemsr Exp $
--- src/input/libreal/real.c.orig	Tue Jan  1 08:30:08 2008
+++ src/input/libreal/real.c	Wed Jan  9 01:50:22 2008
@@@@ -48,8 +48,9 @@@@ static const unsigned char xor_table[] = {
 #define _X_BE_32C(x,y) do { *(uint32_t *)(x) = be2me_32((y)); } while(0)
 #define _X_LE_32C(x,y) do { *(uint32_t *)(x) = le2me_32((y)); } while(0)
 
+#ifndef MAX
 #define MAX(x,y) ((x>y) ? x : y)
-
+#endif
 
 static void hash(char *field, char *param) {
 
@


1.8
log
@update to 1.1.9.1

security fix: CVE-2008-0225 - heap-based buffer overflow in libreal (RTSP)

also incorporates post release bug fix in WMV decoding

from brad, thanks
@
text
@d1 1
a1 1
$OpenBSD: patch-src_input_libreal_real_c,v 1.7 2007/10/31 10:55:37 jakemsr Exp $
@


1.7
log
@maintainence update to xine-lib-1.1.8

from brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_libreal_real_c,v 1.6 2007/06/13 10:58:29 jakemsr Exp $
--- src/input/libreal/real.c.orig	Sat Aug 18 19:36:47 2007
+++ src/input/libreal/real.c	Wed Oct 17 20:29:25 2007
@@@@ -51,8 +51,9 @@@@ static const unsigned char xor_table[] = {
@


1.6
log
@update to xine-lib-1.1.7

- use some CONFIGURE_ENV instead of patching
- rearrange/update CONFIGURE_ARGS
- many patches no longer relevant
- add CD audio support

input, tetsing and prodding from brad@@
@
text
@d1 3
a3 3
$OpenBSD$
--- src/input/libreal/real.c.orig	Sun Apr 15 10:42:16 2007
+++ src/input/libreal/real.c	Sun May 20 22:40:02 2007
d5 2
a6 2
 #define BE_32C(x,y) do { *(uint32_t *)(x) = be2me_32((y)); } while(0)
 #define LE_32C(x,y) do { *(uint32_t *)(x) = le2me_32((y)); } while(0)
@


1.5
log
@regen patches
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_libreal_real_c,v 1.4 2007/01/02 19:42:59 robert Exp $
--- src/input/libreal/real.c.orig	Sun Jul  9 16:37:40 2006
+++ src/input/libreal/real.c	Tue May  1 22:03:06 2007
@@@@ -51,9 +51,10 @@@@ static const unsigned char xor_table[] = {
d10 1
a12 1
-
a14 15
   uint32_t a, b, c, d;
@@@@ -472,11 +473,11 @@@@ rmff_header_t *real_parse_sdp(char *data, char **strea
     int j=0;
     int n;
     char b[64];
-    int rulematches[16];
+    int rulematches[MAX_RULEMATCHES];
 
     lprintf("calling asmrp_match with:\n%s\n%u\n", desc->stream[i]->asm_rule_book, bandwidth);
 
-    n=asmrp_match(desc->stream[i]->asm_rule_book, bandwidth, rulematches);
+    n=asmrp_match(desc->stream[i]->asm_rule_book, bandwidth, rulematches, sizeof(rulematches)/sizeof(rulematches[0]));
     for (j=0; j<n; j++) {
       lprintf("asmrp rule match: %u for stream %u\n", rulematches[j], desc->stream[i]->stream_id);
       sprintf(b,"stream=%u;rule=%u,", desc->stream[i]->stream_id, rulematches[j]);
@


1.4
log
@fix a buffer overflow found in the code used to handle RealMedia RTSP
streams; bump PKNAME;

from Brad <brad@@comstyle.com>
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_libreal_real_c,v 1.3 2006/12/07 09:21:01 steven Exp $
--- src/input/libreal/real.c.orig	Sun Jul  9 10:37:40 2006
+++ src/input/libreal/real.c	Mon Jan  1 15:28:07 2007
@@@@ -51,9 +51,10 @@@@ static const unsigned char xor_table[] =
d16 1
a16 1
@@@@ -472,11 +473,11 @@@@ rmff_header_t *real_parse_sdp(char *data
@


1.3
log
@Security fixes:
- Heap overflow in libmms (related to CVE-2006-2200)
- Buffer overrun in Real Media input plugin. [bug #1603458]
  Thanks to Roland Kay for reporting and JW for the patch.

from brad@@, tested by bernd@@ and me
@
text
@d1 1
a1 1
$OpenBSD: patch-src_input_libreal_real_c,v 1.2 2006/10/12 04:48:14 brad Exp $
d3 1
a3 1
+++ src/input/libreal/real.c	Mon Dec  4 14:34:35 2006
d16 6
a21 1
@@@@ -476,7 +477,7 @@@@ rmff_header_t *real_parse_sdp(char *data
@


1.2
log
@upgrade to xine-lib 1.1.2

* Security fixes:
  - CVE-2006-2802: possible buffer overflow in the HTTP plugin.
  - possible buffer overflow via bad indexes in specially-crafted AVI files
* Fix a potential crash with fixed-size lacing in the Matroska demuxer
* Enable AMD64 mmx/sse support in some plugins (tvtime, libmpeg2, goom...)
* Fix xxmc subpictures (broken since 1.1.1)
* Add support for RealPlayer 10 codecs

WANTLIB tweak from bernd@@

testing by steven@@ and bernd@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_input_libreal_real_c,v 1.1.1.1 2006/03/24 22:43:41 jakemsr Exp $
d3 2
a4 2
+++ src/input/libreal/real.c	Fri Sep 15 17:53:21 2006
@@@@ -51,8 +51,9 @@@@ static const unsigned char xor_table[] =
a9 1
-
d12 1
d15 10
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- src/input/libreal/real.c.orig	Thu Jan  5 00:55:43 2006
+++ src/input/libreal/real.c	Thu Jan  5 00:56:17 2006
@@@@ -50,8 +50,9 @@@@ const unsigned char xor_table[] = {
@


1.1.1.1
log
@initial import of xine-lib

xine is a free multimedia player. It plays back CDs, DVDs, and VCDs. It
also decodes multimedia files like AVI, MOV, WMV, and MP3 from local
disk drives, and displays multimedia streamed over the Internet. It
interprets many of the most common multimedia formats available - and
some of the most uncommon formats, too.

prodded by jolan@@ and bernd@@

@
text
@@


1.1.1.1.2.1
log
@MFC:
upgrade to xine-lib 1.1.2

* Security fixes:
- CVE-2006-2802: possible buffer overflow in the HTTP plugin.
- possible buffer overflow via bad indexes in specially-crafted AVI files
* Fix a potential crash with fixed-size lacing in the Matroska demuxer
* Enable AMD64 mmx/sse support in some plugins (tvtime, libmpeg2, goom...)
* Fix xxmc subpictures (broken since 1.1.1)
* Add support for RealPlayer 10 codecs

WANTLIB tweak from bernd@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_input_libreal_real_c,v 1.2 2006/10/12 04:48:14 brad Exp $
--- src/input/libreal/real.c.orig	Sun Jul  9 10:37:40 2006
+++ src/input/libreal/real.c	Fri Sep 15 17:53:21 2006
@@@@ -51,8 +51,9 @@@@ static const unsigned char xor_table[] =
@


1.1.1.1.2.2
log
@MFC:
Security fixes:
- Heap overflow in libmms (related to CVE-2006-2200)
- Buffer overrun in Real Media input plugin. [bug #1603458]
Thanks to Roland Kay for reporting and JW for the patch.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_input_libreal_real_c,v 1.3 2006/12/07 09:21:01 steven Exp $
d3 2
a4 2
+++ src/input/libreal/real.c	Mon Dec  4 14:34:35 2006
@@@@ -51,9 +51,10 @@@@ static const unsigned char xor_table[] =
d10 1
a12 1
-
a14 10
   uint32_t a, b, c, d;
@@@@ -476,7 +477,7 @@@@ rmff_header_t *real_parse_sdp(char *data
 
     lprintf("calling asmrp_match with:\n%s\n%u\n", desc->stream[i]->asm_rule_book, bandwidth);
 
-    n=asmrp_match(desc->stream[i]->asm_rule_book, bandwidth, rulematches);
+    n=asmrp_match(desc->stream[i]->asm_rule_book, bandwidth, rulematches, sizeof(rulematches)/sizeof(rulematches[0]));
     for (j=0; j<n; j++) {
       lprintf("asmrp rule match: %u for stream %u\n", rulematches[j], desc->stream[i]->stream_id);
       sprintf(b,"stream=%u;rule=%u,", desc->stream[i]->stream_id, rulematches[j]);
@


1.1.1.1.2.3
log
@MFC:
fix a buffer overflow found in the code used to handle RealMedia RTSP
streams; bump PKNAME;
@
text
@d1 1
a1 1
$OpenBSD: patch-src_input_libreal_real_c,v 1.4 2007/01/02 19:42:59 robert Exp $
d3 1
a3 1
+++ src/input/libreal/real.c	Mon Jan  1 15:28:07 2007
d16 1
a16 6
@@@@ -472,11 +473,11 @@@@ rmff_header_t *real_parse_sdp(char *data
     int j=0;
     int n;
     char b[64];
-    int rulematches[16];
+    int rulematches[MAX_RULEMATCHES];
@


