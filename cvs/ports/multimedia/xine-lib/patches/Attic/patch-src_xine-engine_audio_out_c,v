head	1.15;
access;
symbols
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jakemsr:1.1.1.1
	jakemsr-20060324:1.1.1;
locks; strict;
comment	@# @;


1.15
date	2012.06.10.07.35.30;	author ajacoutot;	state dead;
branches;
next	1.14;

1.14
date	2012.05.09.06.29.43;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.04.15.23.22.31;	author sthen;	state dead;
branches;
next	1.12;

1.12
date	2010.09.13.20.12.16;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.03.21.01.41.15;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.01.05.11.48.51;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.04.04.00.28.56;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2008.02.11.01.17.33;	author jakemsr;	state Exp;
branches;
next	1.7;

1.7
date	2008.01.30.03.52.32;	author jakemsr;	state Exp;
branches;
next	1.6;

1.6
date	2008.01.15.00.36.46;	author jakemsr;	state Exp;
branches;
next	1.5;

1.5
date	2007.10.31.10.55.37;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2007.06.13.10.58.29;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.01.20.05.10;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.12.04.48.14;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.03.24.22.43.41;	author jakemsr;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2006.11.01.13.13.03;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Update to stable, xine-lib-1.1.21.

from Brad (maintainer)
@
text
@$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.14 2012/05/09 06:29:43 ajacoutot Exp $
--- src/xine-engine/audio_out.c.orig	Tue May  8 23:21:09 2012
+++ src/xine-engine/audio_out.c	Tue May  8 23:21:30 2012
@@@@ -2284,7 +2284,7 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
     this->audio_loop_running = 1;
 
     pthread_attr_init(&pth_attrs);
-#ifdef _POSIX_THREAD_PRIORITY_SCHEDULING
+#if defined(_POSIX_THREAD_PRIORITY_SCHEDULING) && (_POSIX_THREAD_PRIORITY_SCHEDULING > 0)
     pthread_attr_setscope(&pth_attrs, PTHREAD_SCOPE_SYSTEM);
 #endif
 
@


1.14
log
@Correct the utilization of the _POSIX_THREAD_PRIORITY_SCHEDULING feature
test macro.

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.13
log
@remove casts now that NULL is a void *
from Brad.
@
text
@d1 5
a5 27
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.12 2010/09/13 20:12:16 sthen Exp $
--- src/xine-engine/audio_out.c.orig	Wed Jul 21 13:43:52 2010
+++ src/xine-engine/audio_out.c	Sun Jul 25 14:37:08 2010
@@@@ -1089,7 +1089,7 @@@@ static void *ao_loop (void *this_gen) {
                                 in_buf->format.rate,
                                 in_buf->format.mode) == 0 ) {
              in_buf->stream->emergency_brake = 1;
-             _x_message (in_buf->stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, NULL);
+             _x_message (in_buf->stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, (char *)NULL);
          }
       }
     }
@@@@ -1120,7 +1120,7 @@@@ static void *ao_loop (void *this_gen) {
 	  stream = xine_list_get_value (this->streams, ite);
           if( !stream->emergency_brake ) {
             stream->emergency_brake = 1;
-            _x_message (stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, NULL);
+            _x_message (stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, (char *)NULL);
           }
 	}
 	pthread_mutex_unlock(&this->streams_lock);
@@@@ -1252,7 +1252,7 @@@@ static void *ao_loop (void *this_gen) {
       if( result < 0 ) {
         /* device unplugged. */
         xprintf(this->xine, XINE_VERBOSITY_LOG, _("write to sound card failed. Assuming the device was unplugged.\n"));
-        _x_message (in_buf->stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, NULL);
+        _x_message (in_buf->stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, (char *)NULL);
d7 5
a11 12
         pthread_mutex_lock( &this->driver_lock );
         if(this->driver_open) {
@@@@ -1266,7 +1266,7 @@@@ static void *ao_loop (void *this_gen) {
                 in_buf->format.rate,
                 in_buf->format.mode) == 0) {
             in_buf->stream->emergency_brake = 1;
-            _x_message (in_buf->stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, NULL);
+            _x_message (in_buf->stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, (char *)NULL);
           }
         }
         pthread_mutex_unlock( &this->driver_lock );
@@@@ -1514,7 +1514,7 @@@@ static int ao_open(xine_audio_port_t *this_gen, xine_s
a12 7
       if( !ret ) {
         stream->emergency_brake = 1;
-        _x_message (stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, NULL);
+        _x_message (stream, XINE_MSG_AUDIO_OUT_UNAVAILABLE, (char *)NULL);
         return 0;
       }
     } else {
@


1.12
log
@update xine-lib to 1.1.19 and switch to new-style LIB_DEPENDS/WANTLIB
from Brad, thanks landry@@ for testing in bulk build
@
text
@d1 1
a1 1
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.11 2010/03/21 01:41:15 sthen Exp $
@


1.11
log
@update to 1.1.18.1, from Brad
@
text
@d1 3
a3 3
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.10 2010/01/05 11:48:51 sthen Exp $
--- src/xine-engine/audio_out.c.orig	Tue Feb 23 16:59:05 2010
+++ src/xine-engine/audio_out.c	Tue Feb 23 19:29:39 2010
a48 10
@@@@ -2284,7 +2284,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
     this->audio_loop_running = 1;
 
     pthread_attr_init(&pth_attrs);
+#if !defined(__OpenBSD__)
     pthread_attr_setscope(&pth_attrs, PTHREAD_SCOPE_SYSTEM);
+#endif
 
     this->audio_thread_created = 1;
     if ((err = pthread_create (&this->audio_thread,
@


1.10
log
@Update to xine-lib 1.1.17 and disable win32 codecs. From Brad.
@
text
@d1 3
a3 3
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.9 2009/04/04 00:28:56 sthen Exp $
--- src/xine-engine/audio_out.c.orig	Mon Nov 30 20:33:30 2009
+++ src/xine-engine/audio_out.c	Wed Dec  2 19:15:36 2009
d49 1
a49 1
@@@@ -2279,7 +2279,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
@


1.9
log
@Security update to 1.1.16.3 from Brad (maintainer) - int overflows in
the 4XM demux (TKADV2009-004, CVE-2009-0385) and the Quicktime demux.
@
text
@d1 3
a3 3
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.8 2008/02/11 01:17:33 jakemsr Exp $
--- src/xine-engine/audio_out.c.orig	Sun Mar 15 16:52:55 2009
+++ src/xine-engine/audio_out.c	Fri Apr  3 14:42:43 2009
d41 1
a41 1
       
d50 2
a51 2
     this->audio_loop_running = 1;  
     
@


1.8
log
@update to 1.1.10.1
security - fix stack overflow in FLAC tag parser
-fix RealPlayer codec detection bug
- improve id3v2 tag parser

from brad@@

while here, fix a couple "missing sentinel" issues
@
text
@d1 4
a4 4
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.7 2008/01/30 03:52:32 jakemsr Exp $
--- src/xine-engine/audio_out.c.orig	Sat Jan 26 17:54:05 2008
+++ src/xine-engine/audio_out.c	Sun Feb 10 16:29:11 2008
@@@@ -1084,7 +1084,7 @@@@ static void *ao_loop (void *this_gen) {
d13 1
a13 1
@@@@ -1115,7 +1115,7 @@@@ static void *ao_loop (void *this_gen) {
d22 1
a22 1
@@@@ -1247,7 +1247,7 @@@@ static void *ao_loop (void *this_gen) {
d31 1
a31 1
@@@@ -1261,7 +1261,7 @@@@ static void *ao_loop (void *this_gen) {
d40 1
a40 1
@@@@ -1499,7 +1499,7 @@@@ static int ao_open(xine_audio_port_t *this_gen, xine_s
d49 1
a49 1
@@@@ -2252,7 +2252,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
@


1.7
log
@maintenence update to 1.1.10

SECURITY- fixx buffer overflow which allows a remote attacker to
execute arbitrary code or crash the client program via a crafted ASF
header

from brad, thanks
@
text
@d1 3
a3 3
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.6 2008/01/15 00:36:46 jakemsr Exp $
--- src/xine-engine/audio_out.c.orig	Thu Jan 24 18:32:41 2008
+++ src/xine-engine/audio_out.c	Tue Jan 29 11:48:37 2008
d22 18
@


1.6
log
@update to 1.1.9.1

security fix: CVE-2008-0225 - heap-based buffer overflow in libreal (RTSP)

also incorporates post release bug fix in WMV decoding

from brad, thanks
@
text
@d1 4
a4 4
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.5 2007/10/31 10:55:37 jakemsr Exp $
--- src/xine-engine/audio_out.c.orig	Tue Jan  1 08:30:09 2008
+++ src/xine-engine/audio_out.c	Wed Jan  9 01:50:22 2008
@@@@ -1083,7 +1083,7 @@@@ static void *ao_loop (void *this_gen) {
d13 1
a13 1
@@@@ -1114,7 +1114,7 @@@@ static void *ao_loop (void *this_gen) {
d22 1
a22 1
@@@@ -1498,7 +1498,7 @@@@ static int ao_open(xine_audio_port_t *this_gen, xine_s
d31 1
a31 1
@@@@ -2247,7 +2247,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
@


1.5
log
@maintainence update to xine-lib-1.1.8

from brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.4 2007/06/13 10:58:29 jakemsr Exp $
--- src/xine-engine/audio_out.c.orig	Sat Aug 18 19:36:59 2007
+++ src/xine-engine/audio_out.c	Wed Oct 17 20:29:25 2007
@@@@ -1072,7 +1072,7 @@@@ static void *ao_loop (void *this_gen) {
d13 1
a13 1
@@@@ -1103,7 +1103,7 @@@@ static void *ao_loop (void *this_gen) {
d22 1
a22 1
@@@@ -1485,7 +1485,7 @@@@ static int ao_open(xine_audio_port_t *this_gen, xine_s
d31 1
a31 1
@@@@ -2229,7 +2229,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
@


1.4
log
@update to xine-lib-1.1.7

- use some CONFIGURE_ENV instead of patching
- rearrange/update CONFIGURE_ARGS
- many patches no longer relevant
- add CD audio support

input, tetsing and prodding from brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/xine-engine/audio_out.c.orig	Mon Jun  4 14:37:38 2007
+++ src/xine-engine/audio_out.c	Fri Jun  8 17:27:47 2007
@@@@ -1052,7 +1052,7 @@@@ static void *ao_loop (void *this_gen) {
d13 1
a13 1
@@@@ -1083,7 +1083,7 @@@@ static void *ao_loop (void *this_gen) {
d22 1
a22 1
@@@@ -1465,7 +1465,7 @@@@ static int ao_open(xine_audio_port_t *this_gen, xine_s
d31 1
a31 1
@@@@ -2207,7 +2207,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
@


1.3
log
@regen patches
@
text
@d1 31
a31 4
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.2 2006/10/12 04:48:14 brad Exp $
--- src/xine-engine/audio_out.c.orig	Sun Jul  9 16:40:08 2006
+++ src/xine-engine/audio_out.c	Tue May  1 22:03:06 2007
@@@@ -2188,7 +2188,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_t *xine, ao_dr
@


1.2
log
@upgrade to xine-lib 1.1.2

* Security fixes:
  - CVE-2006-2802: possible buffer overflow in the HTTP plugin.
  - possible buffer overflow via bad indexes in specially-crafted AVI files
* Fix a potential crash with fixed-size lacing in the Matroska demuxer
* Enable AMD64 mmx/sse support in some plugins (tvtime, libmpeg2, goom...)
* Fix xxmc subpictures (broken since 1.1.1)
* Add support for RealPlayer 10 codecs

WANTLIB tweak from bernd@@

testing by steven@@ and bernd@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.1.1.1 2006/03/24 22:43:41 jakemsr Exp $
--- src/xine-engine/audio_out.c.orig	Sun Jul  9 10:40:08 2006
+++ src/xine-engine/audio_out.c	Fri Sep 15 17:53:21 2006
@@@@ -2188,7 +2188,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- src/xine-engine/audio_out.c.orig	Sat Oct 29 19:18:35 2005
+++ src/xine-engine/audio_out.c	Mon Jan  9 20:55:41 2006
@@@@ -2152,7 +2152,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_
@


1.1.1.1
log
@initial import of xine-lib

xine is a free multimedia player. It plays back CDs, DVDs, and VCDs. It
also decodes multimedia files like AVI, MOV, WMV, and MP3 from local
disk drives, and displays multimedia streamed over the Internet. It
interprets many of the most common multimedia formats available - and
some of the most uncommon formats, too.

prodded by jolan@@ and bernd@@

@
text
@@


1.1.1.1.2.1
log
@MFC:
upgrade to xine-lib 1.1.2

* Security fixes:
- CVE-2006-2802: possible buffer overflow in the HTTP plugin.
- possible buffer overflow via bad indexes in specially-crafted AVI files
* Fix a potential crash with fixed-size lacing in the Matroska demuxer
* Enable AMD64 mmx/sse support in some plugins (tvtime, libmpeg2, goom...)
* Fix xxmc subpictures (broken since 1.1.1)
* Add support for RealPlayer 10 codecs

WANTLIB tweak from bernd@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_xine-engine_audio_out_c,v 1.2 2006/10/12 04:48:14 brad Exp $
--- src/xine-engine/audio_out.c.orig	Sun Jul  9 10:40:08 2006
+++ src/xine-engine/audio_out.c	Fri Sep 15 17:53:21 2006
@@@@ -2188,7 +2188,9 @@@@ xine_audio_port_t *_x_ao_new_port (xine_
@

