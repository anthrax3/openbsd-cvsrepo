head	1.43;
access;
symbols
	OPENBSD_6_1:1.41.0.2
	OPENBSD_6_1_BASE:1.41
	OPENBSD_6_0:1.38.0.2
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.36.0.2
	OPENBSD_5_9_BASE:1.36
	OPENBSD_5_8:1.33.0.4
	OPENBSD_5_8_BASE:1.33
	OPENBSD_5_7:1.31.0.2
	OPENBSD_5_7_BASE:1.31
	OPENBSD_5_6:1.29.0.2
	OPENBSD_5_6_BASE:1.29
	OPENBSD_5_5:1.27.0.2
	OPENBSD_5_5_BASE:1.27
	OPENBSD_5_4:1.24.0.2
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.20.0.2
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.18.0.2
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.9.0.4
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	ajacoutot_20070408:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.43
date	2017.08.10.12.01.20;	author sthen;	state Exp;
branches;
next	1.42;
commitid	NZQ9L6batgbzxZbV;

1.42
date	2017.06.12.08.54.55;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	nCx6z6RC9JJ3jXax;

1.41
date	2017.03.01.08.53.46;	author ajacoutot;	state Exp;
branches;
next	1.40;
commitid	4qiHFRkQc9hfscJm;

1.40
date	2017.01.26.03.16.57;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	8CZx9Eo4X0JPAW90;

1.39
date	2016.10.03.08.04.37;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	H70xgNLnEV1Yuiky;

1.38
date	2016.05.09.06.09.09;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	OWktFjaK2UvrOJdD;

1.37
date	2016.03.10.22.51.45;	author naddy;	state Exp;
branches;
next	1.36;
commitid	D0hGQOTgJEa4SK1D;

1.36
date	2016.01.02.07.49.19;	author ajacoutot;	state Exp;
branches;
next	1.35;
commitid	sc5HTNX7zopm9gM3;

1.35
date	2015.12.25.07.51.36;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	hem4SaO6NCXv44eA;

1.34
date	2015.08.13.07.35.21;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	LNaY8oXb06bvpzg1;

1.33
date	2015.07.06.21.54.33;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	S4krdyibmB5KZDi4;

1.32
date	2015.05.11.19.30.20;	author kettenis;	state Exp;
branches;
next	1.31;
commitid	6zuYHuedHbE4or8F;

1.31
date	2015.01.07.08.53.07;	author brad;	state Exp;
branches;
next	1.30;
commitid	c60Vyn40Z7Fnnzmm;

1.30
date	2014.10.15.17.33.51;	author jasper;	state Exp;
branches;
next	1.29;
commitid	OQNQxUz9Z5La8jxd;

1.29
date	2014.06.02.22.01.02;	author brad;	state Exp;
branches;
next	1.28;
commitid	PxbSA5wQF4NDNHgd;

1.28
date	2014.05.31.01.54.17;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2014.01.10.19.31.51;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2013.10.06.20.38.52;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2013.08.07.15.37.11;	author naddy;	state Exp;
branches;
next	1.24;

1.24
date	2013.07.05.21.32.21;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2013.07.05.06.34.46;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.11.11.35.44;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2013.03.09.09.31.12;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2012.11.23.03.53.37;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2012.08.27.09.34.43;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2012.05.25.07.45.33;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.07.15.53.08;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.14.09.23.49;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.07.11.12.13.03;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2011.06.24.20.10.27;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.03.12.21.07.09;	author jakemsr;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.06.23.05.48;	author jakemsr;	state Exp;
branches;
next	1.11;

1.11
date	2010.06.15.10.07.41;	author sebastia;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.26.21.18.17;	author jakemsr;	state Exp;
branches;
next	1.9;

1.9
date	2009.04.14.19.50.47;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2008.08.28.15.23.31;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2008.08.22.12.43.33;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2008.08.20.01.44.44;	author jakemsr;	state Exp;
branches;
next	1.5;

1.5
date	2008.07.25.20.25.59;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2008.07.22.20.24.04;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2007.07.20.20.11.48;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.04.23.10.20.48;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.04.08.17.31.01;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.04.08.17.31.01;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.43
log
@update to x264-20170717, from Brad
@
text
@# $OpenBSD: Makefile,v 1.42 2017/06/12 08:54:55 ajacoutot Exp $

COMMENT=	free H.264/MPEG-4 AVC encoder

V=		20170717
DISTNAME=	x264-snapshot-${V}-2245
PKGNAME=	x264-${V}
CATEGORIES=	multimedia
MASTER_SITES=	http://downloads.videolan.org/pub/videolan/x264/snapshots/
EXTRACT_SUFX=	.tar.bz2

SHARED_LIBS=	x264	18.0

HOMEPAGE=	http://www.videolan.org/developers/x264.html

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# GPLv2+
PERMIT_PACKAGE_CDROM=	patents
PERMIT_PACKAGE_FTP=	Yes

WANTLIB=	c m pthread

COMPILER=	clang
COMPILER_LANGS=	c
MODCLANG_ARCHS=	amd64 i386

.if ${MACHINE_ARCH} == "amd64"
BUILD_DEPENDS+=	devel/nasm>=2.13.01
.endif

USE_GMAKE=	Yes
CONFIGURE_STYLE= simple
CONFIGURE_ENV=	API=${LIBx264_VERSION}
CONFIGURE_ARGS+=--enable-shared \
		--system-libx264 \
		--disable-ffms \
		--disable-gpac \
		--disable-lavf \
		--disable-swscale \
		--enable-static \
		--prefix=${PREFIX}

.if ${MACHINE_ARCH} != "amd64"
CONFIGURE_ARGS+=--disable-asm
.endif

NO_TEST=	Yes

.include <bsd.port.mk>
@


1.42
log
@Drop MODULES and use COMPILER instead.

from Brad (maintaine) with input from espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2017/03/01 08:53:46 ajacoutot Exp $
d5 1
a5 1
V=		20170125
a10 1
REVISION=	0
d12 1
a12 1
SHARED_LIBS=	x264	17.0
d29 1
a29 1
BUILD_DEPENDS+=	devel/yasm
@


1.41
log
@Use atomic ops on aarch64.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2017/01/26 03:16:57 ajacoutot Exp $
d25 2
a26 2
MODULES=	lang/clang

@


1.40
log
@Update to x264-20170125.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2016/10/03 08:04:37 ajacoutot Exp $
d11 1
@


1.39
log
@Update to x264-20160930.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/05/09 06:09:09 ajacoutot Exp $
d5 1
a5 1
V=		20160930
d12 1
a12 1
SHARED_LIBS=	x264	16.0
@


1.38
log
@Update to x264-20160508.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/03/10 22:51:45 naddy Exp $
d5 1
a5 1
V=		20160508
@


1.37
log
@remove simple instances of NO_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/01/02 07:49:19 ajacoutot Exp $
d5 1
a5 1
V=		20150728
a7 1
REVISION=	1
d12 1
a12 1
SHARED_LIBS=	x264	15.0
@


1.36
log
@Use __sync atomic op on sparc64.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/12/25 07:51:36 ajacoutot Exp $
d36 3
a38 1
CONFIGURE_ARGS+=--disable-ffms \
a51 5

.if ${NO_SHARED_LIBS:L} == "no"
CONFIGURE_ARGS+=--enable-shared \
		--system-libx264
.endif
@


1.35
log
@Enable the use of built-in atomic ops on mips64.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/08/13 07:35:21 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
@


1.34
log
@Update to x264-20150728.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/07/06 21:54:33 ajacoutot Exp $
d8 1
@


1.33
log
@Use __sync_fetch_and_add on a few more archs other than i386 (amd64,
powerpc, alpha, sparc).

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/05/11 19:30:20 kettenis Exp $
d5 1
a5 1
V=		20141218
a7 1
REVISION=	1
d12 1
a12 1
SHARED_LIBS=	x264	14.0
@


1.32
log
@Drop local changes that build the static library without -fPIC.  These days
most of our architectures default to PIE, which for all practical purpose
is equivalent to PIC.  This also brings back -Bsymbolic, which is needed
on amd64 to work around the fact that some of the assembler code generates
R_X86_64_PC32 relocations that binutils 2.17 complains about (rightly so).

Set REVISION to reflect that this actually changes the generated binaries.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/01/07 08:53:07 brad Exp $
d8 1
a8 1
REVISION=	0
@


1.31
log
@Update to x264-20141218.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/10/15 17:33:51 jasper Exp $
d8 1
@


1.30
log
@remove instances of MODCLANG_LANGS=c as 'c' is already the default.
nb: it leaves cases where multiple languages (such as 'c' and 'c++') to make
it clear what the full list is.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/06/02 22:01:02 brad Exp $
d5 1
a5 1
V=		20140525
d12 1
a12 1
SHARED_LIBS=	x264	13.0
@


1.29
log
@Update to x264-20140525.

ok juan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/05/31 01:54:17 brad Exp $
a26 1
MODCLANG_LANGS=	c
@


1.28
log
@Also build with Clang on i386.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/01/10 19:31:51 brad Exp $
d5 1
a5 1
V=		20131002
a7 1
REVISION=	1
d12 1
a12 1
SHARED_LIBS=	x264	12.0
@


1.27
log
@Have amd64 use Clang + the integrated assembler to build the ASM support
within x264. Enabling the ASM support results in a huge performance
improvement.

ok sthen@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/10/06 20:38:52 brad Exp $
d8 1
a8 1
REVISION=	0
d27 1
a27 1
MODCLANG_ARCHS=	amd64
@


1.26
log
@Update to x264-20131002.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/08/07 15:37:11 naddy Exp $
d8 1
d25 9
d37 1
a37 2
CONFIGURE_ARGS+=--disable-asm \
		--disable-ffms \
d43 4
@


1.25
log
@kill direct and indirect references to GCC2_ARCHS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/07/05 21:32:21 brad Exp $
d5 1
a5 1
V=		20130302
d12 1
a12 1
SHARED_LIBS=	x264	11.0
@


1.24
log
@Move this up to the top.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.23 2013/07/05 06:34:46 espie Exp $

NOT_FOR_ARCHS=	${GCC2_ARCHS}
@


1.23
log
@heck, even configure says it won't build
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.22 2013/03/11 11:35:44 espie Exp $
a12 1
NOT_FOR_ARCHS =	${GCC2_ARCHS}
@


1.22
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/03/09 09:31:12 brad Exp $
d11 1
@


1.21
log
@Update to x 264 20130302.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/11/23 03:53:37 brad Exp $
d35 1
a35 1
NO_REGRESS=	Yes
@


1.20
log
@Update to x264-20121114.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/08/27 09:34:43 jasper Exp $
d3 1
a3 1
COMMENT=	free H264/AVC encoder
d5 1
a5 1
V=		20121114
d12 1
a12 1
SHARED_LIBS=	x264	10.0
a20 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.19
log
@Remove -pthread patching.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/05/25 07:45:33 ajacoutot Exp $
d5 1
a5 1
V=		20120520
a7 1
REVISION=	0
d12 1
a12 1
SHARED_LIBS=	x264	9.0
@


1.18
log
@Update to x264-20120520.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/07 15:53:08 ajacoutot Exp $
d8 1
@


1.17
log
@Update to x264-20111027.

from Brad, maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/09/14 09:23:49 ajacoutot Exp $
d5 1
a5 1
V=		20111027
d9 1
a9 1
MASTER_SITES=	ftp://ftp.videolan.org/pub/videolan/x264/snapshots/
d12 1
a12 1
SHARED_LIBS=	x264	8.0
@


1.16
log
@Update to x264-20110830.

from Brad (maintainer)
bulk testing by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/07/11 12:13:03 jasper Exp $
d5 1
a5 1
V=		20110830
d12 1
a12 1
SHARED_LIBS=	x264	7.0
@


1.15
log
@- no need to use the gcc3 module anymore on sparc

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/06/24 20:10:27 sthen Exp $
d5 1
a5 1
V=		20110225
a7 1
REVISION=	1
d12 1
a12 1
SHARED_LIBS=	x264	6.0
d23 1
d34 1
d42 2
a43 1
CONFIGURE_ARGS+=--enable-shared
@


1.14
log
@fix license markers, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/03/12 21:07:09 jakemsr Exp $
d8 1
a8 1
REVISION=	0
a24 3

MODULES=	gcc3
MODGCC3_ARCHES=	sparc
@


1.13
log
@update to x264-20110225

from Brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/06 23:05:48 jakemsr Exp $
d8 1
d20 1
a20 1
PERMIT_PACKAGE_CDROM=	Yes
@


1.12
log
@update to x264-snapshot-20101023-2245
works with upcoming mplayer update as well as current ports
from Brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/06/15 10:07:41 sebastia Exp $
d5 1
a5 1
V=		20101023
d12 1
a12 1
SHARED_LIBS=	x264	5.0
@


1.11
log
@build with gcc3 on sparc
OK landry@@ sthen@@
MAINTAINER OKed x264
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/05/26 21:18:17 jakemsr Exp $
d5 1
a5 1
V=		20100511
d12 1
a12 1
SHARED_LIBS=	x264	4.0
d32 4
a35 3
		--disable-ffms-input \
		--disable-lavf-input \
		--disable-mp4-output \
d43 1
a43 2
CONFIGURE_ARGS+=--enable-shared \
		--enable-pic
@


1.10
log
@update to x264-snapshot-20100511-2245

this is an ABI/API change.  there will be fallout, but patches
exist and will be committed rsn ...

mostly from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/04/14 19:50:47 kili Exp $
d24 3
@


1.9
log
@
Update to a newer snapshot.

From Brad (new maintainer).

"theoretically ok" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/08/28 15:23:31 brad Exp $
d5 1
a5 1
V=		20090204
d12 1
a12 1
SHARED_LIBS=	x264	3.0
d28 4
a31 1
CONFIGURE_ARGS+=--disable-mp4-output \
a32 4

.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	::devel/yasm
.endif
@


1.8
log
@- Add support for x264 detecting the number of CPUs via the
  hw.ncpu sysctl.
- Switch the AltiVec code from using the signals method of
  presence detection to using the machdep.altivec sysctl.

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/08/22 12:43:33 brad Exp $
d5 1
a5 1
V=		20080713
d7 1
a7 1
PKGNAME=	x264-${V}p2
d12 1
a12 1
SHARED_LIBS=	x264	2.0
d16 2
d28 2
a29 2
CONFIGURE_ARGS+=--prefix=${PREFIX} \
		--disable-mp4-output
@


1.7
log
@- Don't use ${CONFIGURE_SHARED} since this isn't autoconf proper
- Add missing --prefix
- Remove no longer used pre-configure target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/08/20 01:44:44 jakemsr Exp $
d7 1
a7 1
PKGNAME=	x264-${V}p1
@


1.6
log
@
- fix build on macppc
- we have isfinite() now

ok brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/07/25 20:25:59 sthen Exp $
d24 1
a24 1
CONFIGURE_STYLE=simple
d26 1
a26 2
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
		--enable-pic \
d35 1
a35 3
pre-configure:
	@@perl -pi -e 's,!!PREFIX!!,${PREFIX},g; s,!!X11BASE!!,${X11BASE},g' \
		${WRKSRC}/configure
d37 4
a40 1
.include <bsd.port.mk>
@


1.5
log
@shared library and PKGNAME bumps due to use of isinf/isnan/nan
following libc/libm changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/07/22 20:24:04 brad Exp $
d7 1
a7 1
PKGNAME=	x264-${V}p0
@


1.4
log
@Upgrade to x264 snapshot 20080713.

Also remove ajacoutot@@ as maintainer per his request.

ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/07/20 20:11:48 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	x264-${V}
d12 1
a12 1
SHARED_LIBS=	x264	1.0
@


1.3
log
@- really use nasm to build x264 under i386 and use yasm under amd64
- dont't add -fPIC to $CFLAGS automatically (even though we set --enable-pic) ;
this is handled in the Makefile so that we can build the static lib from
non-pic objects

Tested by sthen and myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/04/23 10:20:48 ajacoutot Exp $
d3 1
a3 1
COMMENT=	free h264/avc encoder
d5 1
a5 1
V=		20070325
d7 1
a7 2
PKGNAME=	x264-${V}p1
SHARED_LIBS=	x264	0.0	# 5.0
d9 4
d16 1
a16 5
EXTRACT_SUFX=	.tar.bz2

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2
a20 3

MASTER_SITES=	ftp://ftp.videolan.org/pub/videolan/x264/snapshots/

a22 1
NO_REGRESS=	Yes
a23 1

d27 2
a28 2
		--enable-pthread \
		--enable-pic
d30 2
a31 2
.if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	::devel/nasm
d34 1
a34 3
.if ${MACHINE_ARCH} == "amd64"
BUILD_DEPENDS+=	::devel/yasm
.endif
@


1.2
log
@- use -pthread instead of -lpthread when linking
- kill a hardcoded /usr/X11R6 in configure
- generate x264.pc with proper libraries (add -m, use -pthread instead
of -lpthread)

from jakemsr (Jacob Meuser)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/04/08 17:31:01 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"free h264/avc encoder"
d7 1
a7 1
PKGNAME=	x264-${V}p0
d33 2
a34 1
		--enable-pthread
d38 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
PKGNAME=	x264-${V}
d40 2
a41 1
	@@perl -pi -e 's,!!PREFIX!!,${PREFIX},g' ${WRKSRC}/configure
@


1.1.1.1
log
@Import x264-20070325

x264 is a free library for encoding H264/AVC video streams.

This program requires a processor with recent instructions (MMX/SSE for
i386, AltiVec for powerpc).

Encoder features:
 * CAVLC/CABAC
 * Multi-references
 * Intra: all macroblock types (16x16, 8x8, and 4x4 with all predictions)
 * Inter P: all partitions (from 16x16 down to 4x4)
 * Inter B: partitions from 16x16 down to 8x8 (including skip/direct)
 * Ratecontrol: constant quantizer, single or multipass ABR, optional VBV
 * Scene cut detection
 * Adaptive B-frame placement
 * B-frames as references / arbitrary frame order
 * 8x8 and 4x4 adaptive spatial transform
 * Lossless mode
 * Custom quantization matrices
 * Parallel encoding of multiple slices
 * Interlacing


based on an original submission by Nikns Siankin <nikns at secure dot lv>
help and ok naddy@@ steven@@
@
text
@@
