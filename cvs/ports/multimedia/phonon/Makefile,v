head	1.23;
access;
symbols
	OPENBSD_6_2:1.23.0.2
	OPENBSD_6_2_BASE:1.23
	OPENBSD_6_1:1.21.0.2
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.20.0.2
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.19.0.2
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.9.0.4
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.8
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.6
	OPENBSD_5_0:1.5.0.4
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	ports:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2017.07.27.09.55.45;	author sthen;	state Exp;
branches;
next	1.22;
commitid	B5vWYrki33kPVNK6;

1.22
date	2017.07.17.21.17.47;	author zhuk;	state Exp;
branches;
next	1.21;
commitid	HzWyQjn649jbaJOT;

1.21
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.20;
commitid	l6KSNN1DfB6ABkhu;

1.20
date	2016.04.28.11.13.15;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	MXI1DpaFM03YoPJr;

1.19
date	2015.11.19.18.42.21;	author zhuk;	state Exp;
branches;
next	1.18;
commitid	vO8gbkaocciH69Aa;

1.18
date	2015.11.19.13.53.34;	author zhuk;	state Exp;
branches;
next	1.17;
commitid	YHMryTM71Omi6xYR;

1.17
date	2015.07.06.23.54.04;	author zhuk;	state Exp;
branches;
next	1.16;
commitid	T1KhZJCICGoFIj23;

1.16
date	2015.07.05.01.24.04;	author zhuk;	state Exp;
branches;
next	1.15;
commitid	hldiU95MDSZByeUh;

1.15
date	2015.05.28.10.17.24;	author pascal;	state Exp;
branches;
next	1.14;
commitid	020U4lCPk8wUkCOz;

1.14
date	2014.11.05.12.49.22;	author dcoppa;	state Exp;
branches;
next	1.13;
commitid	H6kcwagi97yugLCx;

1.13
date	2014.11.01.20.32.54;	author zhuk;	state Exp;
branches;
next	1.12;
commitid	1GXV09U7oBpf6YS6;

1.12
date	2014.07.10.19.50.25;	author zhuk;	state Exp;
branches;
next	1.11;
commitid	QVQcP2pDNqjWtiP7;

1.11
date	2014.07.10.07.37.32;	author espie;	state Exp;
branches;
next	1.10;
commitid	KPU8t8Q7zqDjgcrZ;

1.10
date	2014.04.29.08.40.02;	author zhuk;	state Exp;
branches;
next	1.9;

1.9
date	2013.06.04.15.32.15;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.04.24.08.53.37;	author zhuk;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.11.11.35.44;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2013.02.03.13.21.42;	author zhuk;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.19.07.23.15;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.07.09.11.59.59;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.06.18.14.27.14;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.06.18.14.02.01;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.06.18.12.53.38;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.06.18.12.53.38;	author espie;	state Exp;
branches;
next	;


desc
@@


1.23
log
@add COMPILER_LIBCXX to WANTLIB and bump
@
text
@# $OpenBSD: Makefile,v 1.22 2017/07/17 21:17:47 zhuk Exp $

COMMENT =	multimedia layer for Qt4/KDE4
CATEGORIES =	multimedia devel
VERSION =	4.8.3
DISTNAME =	phonon-${VERSION}
HOMEPAGE =	http://phonon.kde.org/
REVISION =	6

# The phonon_s* are for KDE4-only, renamed to avoid clashing with Qt4's one
# XXX major should be tweaked on any update, to unbreak
# IMPORTED_LINK_INTERFACE_LIBRARIES CMake feature.
SHARED_LIBS =	phonon_s		2.0
SHARED_LIBS +=	phonon_sexperimental	1.0

MAINTAINER =	KDE porting team <openbsd-kde@@googlegroups.com>

# LGPL v2.1
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		${MASTER_SITE_KDE:=stable/phonon/${VERSION}/src/}
EXTRACT_SUFX =		.tar.xz

WANTLIB =		m pulse pulse-mainloop-glib
LIB_DEPENDS =		audio/pulseaudio

MODULES =		x11/kde4
MODKDE4_USE =
MODKDE4_LIB_LINKS =	Yes
PHONON_INCLUDE_DIR =	${MODKDE4_INCLUDE_DIR}
WANTLIB +=		QtDBus QtGui
WANTLIB += ${COMPILER_LIBCXX}

# Not sure if it's needed at all but doesn't hurt either for now.
CONFIGURE_ARGS =	-DPHONON_INSTALL_QT_EXTENSIONS_INTO_SYSTEM_QT:Bool=Yes

# Clashes with the one provided by Qt itself.
CONFIGURE_ARGS +=	-DPHONON_BUILD_DESIGNER_PLUGIN:Bool=No \
			-DCMAKE_POLICY_DEFAULT_CMP0017=NEW \
			-DPHONON_INSTALL_QT_COMPAT_HEADERS=No

CONFIGURE_ARGS +=	-DBACKEND_INSTALL_DIR="${PREFIX}/lib/kde4/plugins/phonon_backend"

# Upstream says, tests need to be redone.
NO_TEST =		Yes

SUBST_VARS =		PHONON_INCLUDE_DIR

.include <bsd.port.mk>
@


1.22
log
@Switch Qt5-based Phonon to a separate port, with a separate version.

The phonon.port.mk stays where it is (at least until KDE4 dies).

This gives a chance for various KF5 things to build again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/12/25 14:34:39 zhuk Exp $
d8 1
a8 1
REVISION =	5
d32 1
@


1.21
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/04/28 11:13:15 ajacoutot Exp $
d8 1
a8 1
REVISION =	4
d10 1
a10 2
# The phonon_s* are for KDE4-only; the phonon4qt5* are Qt5-only
# Renamed to avoid clashing with Qt4's one
a14 2
SHARED_LIBS +=	phonon4qt5		0.0
SHARED_LIBS +=	phonon4qt5experimental	0.0
a23 4
# XXX Qt5 FLAVOR doesn't work yet!
FLAVORS =		qt5
FLAVOR ?=

a26 7
.if ${FLAVOR:Mqt5}
MODULES =		x11/qt5 devel/cmake
PHONON_INCLUDE_DIR =	include/phonon4qt5
PKGNAME =		phonon-qt5-${VERSION}
FULLPKGNAME =		${PKGNAME}
WANTLIB +=		Qt5Core Qt5DBus Qt5Gui Qt5Widgets
.else
a31 1
.endif
a40 4
.if ${FLAVOR:Mqt5}
CONFIGURE_ARGS +=	-DPHONON_BUILD_PHONON4QT5=Yes \
			-DINCLUDE_INSTALL_DIR=include/phonon4qt5
.else
a41 1
.endif
@


1.20
log
@zeitgeist is going away, so drop support for it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/11/19 18:42:21 zhuk Exp $
d8 1
a8 1
REVISION =	3
@


1.19
log
@Finish Qt5 version of Phonon.

At least, it packages and passes make port-lib-depends-check now.

The Qt5 version is perfectly co-installable with Qt4-based version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/11/19 13:53:34 zhuk Exp $
d8 1
a8 1
REVISION =	2
d45 1
a45 2
WANTLIB +=		QtDBus QtDeclarative QtGui QtTest qzeitgeist
LIB_DEPENDS +=		productivity/libqzeitgeist>=0.8.0
@


1.18
log
@First bits of qt5 FLAVOR for multimedia/phonon. Needed for KDE5 - do not
hold your breath, there is still a lot of things to do.

Main change is that relative paths in FindPhononInternal.cmake are kept
relative now; things worked only by accident before. This requires a bump,
though, as this file is included in package.

KDE4 builds fine still (at least major suspects like kdelibs and dragon).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/07/06 23:54:04 zhuk Exp $
d8 1
a8 1
REVISION =	1
d10 1
d14 4
a17 2
SHARED_LIBS =	phonon_s		2.0 \
		phonon_sexperimental	1.0
d28 1
a28 1
#FLAVORS =		qt5
d31 3
d37 3
d45 2
a46 5

WANTLIB =	m
WANTLIB +=	lib/qt4/QtDBus lib/qt4/QtDeclarative lib/qt4/QtGui
WANTLIB +=	lib/qt4/QtTest
WANTLIB +=	pulse pulse-mainloop-glib qzeitgeist
a47 3

LIB_DEPENDS =	productivity/libqzeitgeist>=0.8.0 \
		audio/pulseaudio
@


1.17
log
@Revert upstream commit 457492e97dd1435021cff15d4fbb8f1fd7be9b24, it breaks
due to changing "-I/usr/local/include/kde4" to
"-isystem /usr/local/include/kde4". Still investigating, who to blame:
CMake, Phonon or maybe someone else... not me, right?

(note for myself: there is no such thing as extra build for KDE stuff)

Breakage noticed by naddy@@: thanks and sorry.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/07/05 01:24:04 zhuk Exp $
d8 1
a8 1
REVISION =	0
d22 1
d24 8
d35 1
d41 1
d47 1
a47 3
CONFIGURE_ARGS =	-DPHONON_INSTALL_QT_EXTENSIONS_INTO_SYSTEM_QT:Bool=Yes \
			-DINCLUDE_INSTALL_DIR=include/phonon \
			-DBACKEND_INSTALL_DIR="${PREFIX}/lib/kde4/plugins/phonon_backend"
d51 9
a59 1
			-DCMAKE_POLICY_DEFAULT_CMP0017=NEW
d63 2
@


1.16
log
@Minor update for Phonon to 4.8.3, mostly build infrastructire fixes;
this results in removing many extra Qt dependencies from WANTLIB.

Also, sync MASTER_SITES with reality while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/05/28 10:17:24 pascal Exp $
d8 1
@


1.15
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/11/05 12:49:22 dcoppa Exp $
d5 1
a5 1
VERSION =	4.8.1
a6 1
REVISION =	1
d20 1
a20 1
MASTER_SITES =		${MASTER_SITE_KDE:=stable/phonon/${VERSION}/}
d28 1
a28 2
WANTLIB +=	lib/qt4/QtNetwork lib/qt4/QtScript lib/qt4/QtSql lib/qt4/QtSvg
WANTLIB +=	lib/qt4/QtTest lib/qt4/QtXml lib/qt4/QtXmlPatterns
@


1.14
log
@
Like kdelibs, drop optimizations
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/11/01 20:32:54 zhuk Exp $
d7 1
a7 1
REVISION =	0
@


1.13
log
@Update Phonon to 4.8.1.

This also updates its backends, due to some API changes it's easier to this
in a single batch. The biggest news here are that phonon-gstreamer switches
to GStreamer 1.0, finally.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/07/10 19:50:25 zhuk Exp $
d7 1
@


1.12
log
@Another meaningful update from KDE land: Phonon 4.7.2 and friends.
Main change is that VLC backend becames the default (and really performs
better than GStreamer one).

(now please get your children out of display)

Another change is that due the fact that Phonon now supports library
renaming upstream, libphononexperimental.so becomes
libphonon_sexperimental.so. This doesn't affect any ports imported as of now.

REVISION bumps for the dependant ports to follow.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/07/10 07:37:32 espie Exp $
d5 1
a5 1
VERSION =	4.7.2
d10 6
a15 2
SHARED_LIBS =	phonon_s		1.0 \
		phonon_sexperimental	0.0
d26 1
a26 1
WANTLIB =	m pthread
d41 2
a42 1
CONFIGURE_ARGS +=	-DPHONON_BUILD_DESIGNER_PLUGIN:Bool=No
@


1.11
log
@more missed bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/04/29 08:40:02 zhuk Exp $
d5 1
a5 1
VERSION =	4.6.0
a7 1
REVISION =	2
d10 2
a11 2
SHARED_LIBS =	phonon_s		0.0 \
		phononexperimental	2.0
d16 1
a16 1
MASTER_SITES =		${MASTER_SITE_KDE:=stable/phonon/${VERSION}/src/}
d22 1
a22 1
WANTLIB =	m pthread stdc++
d32 3
a34 1
CONFIGURE_ARGS =	-DPHONON_INSTALL_QT_EXTENSIONS_INTO_SYSTEM_QT:Bool=Yes
@


1.10
log
@Comment out in PLIST stuff that is not useful at least, and breaks
compilation of some unported apps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/06/04 15:32:15 ajacoutot Exp $
d8 1
a8 1
REVISION =	1
@


1.9
log
@Bump after the pulseaudio update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/04/24 08:53:37 zhuk Exp $
d8 1
a8 1
REVISION =	0
@


1.8
log
@Update Phonon to 4.6.0. Major changes:
  * Main library renamed from "phonon" to "phonon_s", to avoid clashing
    with Qt4's one.
  * Backends now live in multimedia/phonon-backend port (committed earlier).
  * The multimedia/phonon module added, to avoid adding complicated
    RDEP strings to ports of Phonon users.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/11 11:35:44 espie Exp $
d8 1
@


1.7
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/02/03 13:21:42 zhuk Exp $
d3 1
a3 1
COMMENT =	multimedia layer from qt4/kde4
d5 1
a5 1
VERSION =	4.4.2
d7 1
a7 2
EXTRACT_SUFX =	.tar.bz2
MASTER_SITES =	${MASTER_SITE_KDE:=stable/phonon/4.4.2/}
d9 3
a11 2
# LGPL 2.1
PERMIT_PACKAGE_CDROM =   Yes
d13 2
a14 1
# higher than base kde4 to avoid issues
d16 1
a16 3
SHARED_LIBS +=		phonon 5.0
SHARED_LIBS +=		phononexperimental 0.0
BUILD_DEPENDS +=	devel/automoc
d18 3
a20 1
MODULES =		x11/qt4 devel/cmake
d22 5
a26 1
LIB_DEPENDS +=	multimedia/xine-lib
d28 11
a38 4
WANTLIB +=  GL glib-2.0 gmodule-2.0 gobject-2.0 gstaudio-0.10 gstbase-0.10 \
	gstinterfaces-0.10 gstpbutils-0.10 gstreamer-0.10 gstvideo-0.10 \
	gthread-2.0 lib/qt4/QtDBus lib/qt4/QtGui lib/qt4/QtOpenGL m stdc++ \
	xine
@


1.6
log
@Change x11/kde4/automoc dependency to devel/automoc for current KDE4 ports.

okay espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/19 07:23:15 espie Exp $
a10 2
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =   Yes
a11 1
PERMIT_PACKAGE_FTP =     Yes
@


1.5
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/07/09 11:59:59 espie Exp $
d20 1
a20 1
BUILD_DEPENDS +=	x11/kde4/automoc
@


1.4
log
@new-style LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/06/18 14:27:14 espie Exp $
d20 1
a20 1
BUILD_DEPENDS +=	::x11/kde4/automoc
d24 1
a24 1
LIB_DEPENDS +=	::multimedia/xine-lib
@


1.3
log
@requires automoc too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/06/18 14:02:01 espie Exp $
d24 6
a29 6
LIB_DEPENDS +=	xine::multimedia/xine-lib
WANTLIB += 	GL glib-2.0 gmodule-2.0 gthread-2.0 gobject-2.0
WANTLIB +=	lib/qt4/QtDBus lib/qt4/QtGui lib/qt4/QtOpenGL
WANTLIB +=	gstaudio-0.10 gstbase-0.10 gstinterfaces-0.10
WANTLIB +=	gstpbutils-0.10 gstreamer-0.10 gstvideo-0.10
WANTLIB +=	m stdc++
@


1.2
log
@stupid
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/06/18 12:53:38 espie Exp $
d20 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d21 1
a21 4
MODULES =		devel/cmake
CONFIGURE_STYLE = 	cmake

MODULES = x11/qt4
@


1.1.1.1
log
@integrated phonon (from qt4) is not enough for kde4.
to be linked to the build once I figure out the consequences.
@
text
@@
