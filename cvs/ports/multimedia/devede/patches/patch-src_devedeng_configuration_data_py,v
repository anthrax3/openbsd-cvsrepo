head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.4
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.04.12.15.54.26;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	iwTqLglIoRLfpSmN;

1.2
date	2015.12.30.13.02.24;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	RUw4TWyUKB3wCmdf;

1.1
date	2015.06.18.09.03.33;	author ajacoutot;	state Exp;
branches;
next	;
commitid	vpNgNLdUvfemthuO;


desc
@@


1.3
log
@Update to devede-4.6.1.
@
text
@ $OpenBSD: patch-src_devedeng_configuration_data_py,v 1.2 2015/12/30 13:02:24 ajacoutot Exp $
--- src/devedeng/configuration_data.py.orig	Mon Mar 14 16:08:41 2016
+++ src/devedeng/configuration_data.py	Tue Apr 12 17:49:47 2016
@@@@ -42,11 +42,8 @@@@ class configuration(GObject.GObject):
     def fill_config(self):
 
         self.cores = 0
-        proc_file = open("/proc/cpuinfo","r")
-        for line in proc_file:
-            if (line.startswith("processor")):
-                self.cores += 1
-        proc_file.close()
+        if (os.name == "posix"):
+            self.cores = os.cpu_count()
 
         is_local = None
         self.log = ""
@@@@ -61,7 +58,7 @@@@ class configuration(GObject.GObject):
 
         if is_local is None:
             try:
-                os.stat("/usr/local/share/devedeng/wselect_disk.ui")
+                os.stat("${PREFIX}/share/devedeng/wselect_disk.ui")
                 is_local = True
             except:
                 pass
@@@@ -71,12 +68,12 @@@@ class configuration(GObject.GObject):
         else:
             if (is_local):
                 # locales must be always at /usr/share/locale because Gtk.Builder always search there
-                self.share_locale="/usr/share/locale"
-                self.glade="/usr/local/share/devedeng"
-                self.font_path="/usr/local/share/devedeng"
-                self.pic_path="/usr/local/share/devedeng"
-                self.other_path="/usr/local/share/devedeng"
-                self.help_path="/usr/local/share/doc/devedeng"
+                self.share_locale="${PREFIX}/share/locale"
+                self.glade="${PREFIX}/share/devedeng"
+                self.font_path="${PREFIX}/share/devedeng"
+                self.pic_path="${PREFIX}/share/devedeng"
+                self.other_path="${PREFIX}/share/devedeng"
+                self.help_path="${PREFIX}/share/doc/devedeng"
             else:
                 self.share_locale="/usr/share/locale"
                 self.glade="/usr/share/devedeng"
@


1.2
log
@Update to devede-4.4.0.
@
text
@d1 3
a3 3
 $OpenBSD: patch-src_devedeng_configuration_data_py,v 1.1 2015/06/18 09:03:33 ajacoutot Exp $
--- src/devedeng/configuration_data.py.orig	Sat Nov 21 00:09:29 2015
+++ src/devedeng/configuration_data.py	Wed Dec 30 12:12:10 2015
d18 10
a27 1
@@@@ -71,7 +68,7 @@@@ class configuration(GObject.GObject):
d32 5
d38 8
a45 3
                 self.glade="/usr/local/share/devede_ng"
                 self.font_path="/usr/local/share/devede_ng"
                 self.pic_path="/usr/local/share/devede_ng"
@


1.1
log
@Update to devede-4.0.
@
text
@d1 4
a4 4
 $OpenBSD$
--- src/devedeng/configuration_data.py.orig	Sun Apr 26 00:41:09 2015
+++ src/devedeng/configuration_data.py	Thu Jun 18 10:47:14 2015
@@@@ -42,10 +42,8 @@@@ class configuration(GObject.GObject):
d12 1
d18 1
a18 1
@@@@ -69,7 +67,7 @@@@ class configuration(GObject.GObject):
@

