head	1.20;
access;
symbols
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.14.0.4
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.20
date	2012.05.23.07.51.00;	author ajacoutot;	state dead;
branches;
next	1.19;

1.19
date	2011.12.31.08.14.33;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.12.09.07.25.58;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.27.16.53.55;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.11.22.08.55.23;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.20.13.24.28;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.03.23.21.48.41;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.03.21.10.48.10;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.11.27.18.14.48;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.07.17.19.14;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.07.20.09.05.12;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.05.25.18.14.07;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.05.15.08.11.59;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.01.25.16.14.25;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2008.08.24.22.02.26;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.08.20.08.30.36;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.06.24.10.43.21;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.05.26.13.49.59;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.16.13.35.23;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.11.17.11.06.14;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.20
log
@Update to devede-3.22.0.
@
text
@$OpenBSD: patch-devede_py,v 1.19 2011/12/31 08:14:33 ajacoutot Exp $
--- devede.py.orig	Fri Dec 30 11:27:44 2011
+++ devede.py	Sat Dec 31 09:06:51 2011
@@@@ -19,6 +19,13 @@@@
 # You should have received a copy of the GNU General Public License
 # along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
+try:
+  import psyco
+  import re
+  psyco.cannotcompile(re.compile)
+  psyco.profile()
+except ImportError:
+  pass
 
 import sys
 import os
@@@@ -35,7 +42,7 @@@@ import pickle
 import cairo
 
 print "DeVeDe 3.21.0"
-if (sys.platform!="win32") and (sys.platform!="win64"):
+if (sys.platform!="win32") and (sys.platform!="win64") and not sys.platform.startswith('openbsd'):
 	try:
 		print "Locale: "+str(os.environ["LANG"])
 	except:
@@@@ -79,13 +86,13 @@@@ if tipo==0:
 	#arbol=gtk.Builder("/usr/share/devede/devede.glade",domain="devede")
 	# append the directories where we install the devede's own modules
 
-	share_locale="/usr/share/locale"
-	glade="/usr/share/devede"
-	sys.path.append("/usr/lib/devede")
-	font_path="/usr/share/devede"
-	pic_path="/usr/share/devede"
-	other_path="/usr/share/devede"
-	help_path="/usr/share/doc/devede"
+	share_locale="${PREFIX}/share/locale"
+	glade="${PREFIX}/share/devede"
+	sys.path.append("${MODPY_SITEPKG}/devede")
+	font_path="${PREFIX}/share/devede"
+	pic_path="${PREFIX}/share/devede"
+	other_path="${PREFIX}/share/devede"
+	help_path="${PREFIX}/share/doc/devede"
 	print "Using package-installed files"
 	
 elif tipo==1:
@


1.19
log
@Update to devede-3.21.0.
* uses FFmpeg by default instead of mencoder
@
text
@d1 1
a1 1
$OpenBSD: patch-devede_py,v 1.18 2011/12/09 07:25:58 ajacoutot Exp $
@


1.18
log
@Bugfix update to devede-3.20.0.
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.17 2011/11/27 16:53:55 ajacoutot Exp $
--- devede.py.orig	Thu Dec  8 13:22:47 2011
+++ devede.py	Fri Dec  9 07:57:10 2011
d21 1
a21 1
 print "DeVeDe 3.20.0"
@


1.17
log
@Bugfix update to devede-3.19.0.
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.16 2011/11/22 08:55:23 ajacoutot Exp $
--- devede.py.orig	Sat Nov 26 14:53:30 2011
+++ devede.py	Sun Nov 27 17:49:33 2011
d21 1
a21 1
 print "DeVeDe 3.19.0"
@


1.16
log
@Update to devede-3.18.0.
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.15 2011/06/20 13:24:28 ajacoutot Exp $
--- devede.py.orig	Sun Nov 20 13:26:23 2011
+++ devede.py	Tue Nov 22 09:43:11 2011
d18 1
a18 2
@@@@ -34,8 +41,8 @@@@ import shutil
 import pickle
d21 1
a21 1
-print "DeVeDe 3.17.1"
a22 1
+print "DeVeDe 3.18.0"
@


1.15
log
@Update to devede-3.16.9.
Drop maintainership.
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.14 2010/03/23 21:48:41 ajacoutot Exp $
--- devede.py.orig	Sat Jul  3 00:09:18 2010
+++ devede.py	Mon Jun 20 15:19:37 2011
d18 2
a19 1
@@@@ -35,7 +42,7 @@@@ import pickle
d22 1
a22 1
 print "DeVeDe 3.16.9"
d24 1
d29 1
a29 10
@@@@ -44,7 +51,7 @@@@ if (sys.platform!="win32") and (sys.platform!="win64")
 # append the directories where we install the devede's own modules
 tipo=-1
 try:
-	fichero=open("/usr/share/devede/wmain.ui","r")
+	fichero=open("${PREFIX}/share/devede/wmain.ui","r")
 	fichero.close()
 	tipo=0
 	found=True
@@@@ -78,13 +85,13 @@@@ if tipo==0:
@


1.14
log
@Unbreak by updating to devede-3.16.6.

breakage spotted by naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.13 2010/03/21 10:48:10 ajacoutot Exp $
--- devede.py.orig	Fri Mar 19 00:42:12 2010
+++ devede.py	Tue Mar 23 22:41:28 2010
d18 1
a18 2
@@@@ -34,8 +41,8 @@@@ import shutil
 import pickle
d21 1
a21 1
-print "DeVeDe 3.16.5"
a22 1
+print "DeVeDe 3.16.6"
@


1.13
log
@Update to devede-3.16.4.
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.12 2009/11/27 18:14:48 ajacoutot Exp $
--- devede.py.orig	Wed Feb 24 00:06:07 2010
+++ devede.py	Thu Feb 25 08:33:15 2010
d18 2
a19 1
@@@@ -35,7 +42,7 @@@@ import pickle
d22 1
a22 1
 print "DeVeDe 3.16.4"
d24 1
@


1.12
log
@Update to devede-3.15.0.
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.11 2009/08/07 17:19:14 ajacoutot Exp $
--- devede.py.orig	Fri Nov 27 18:33:25 2009
+++ devede.py	Fri Nov 27 18:35:22 2009
d21 3
a23 3
 print "DeVeDe 3.15.0"
-if sys.platform!="win32":
+if sys.platform!="win32" and not sys.platform.startswith('openbsd'):
d27 1
a27 1
@@@@ -44,7 +51,7 @@@@ if sys.platform!="win32":
@


1.11
log
@Fix py-psyco support.
Fix path to fonts.

from FreeBSD
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.10 2009/07/20 09:05:12 ajacoutot Exp $
--- devede.py.orig	Fri Jul 17 00:19:28 2009
+++ devede.py	Fri Aug  7 19:12:40 2009
d21 1
a21 1
 print "DeVeDe 3.14.0"
@


1.10
log
@Update to devede-3.14.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-devede_py,v 1.9 2009/05/25 18:14:07 ajacoutot Exp $
d3 16
a18 2
+++ devede.py	Mon Jul 20 11:00:32 2009
@@@@ -35,7 +35,7 @@@@ import pickle
d27 1
a27 1
@@@@ -44,7 +44,7 @@@@ if sys.platform!="win32":
d36 1
a36 1
@@@@ -78,13 +78,13 @@@@ if tipo==0:
@


1.9
log
@- minor update to devede-3.13.1
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.8 2009/05/15 08:11:59 ajacoutot Exp $
--- devede.py.orig	Mon May 25 14:50:34 2009
+++ devede.py	Mon May 25 19:58:08 2009
d7 1
a7 1
 print "DeVeDe 3.13.1"
@


1.8
log
@- update to devede-3.13.0
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.7 2009/01/25 16:14:25 ajacoutot Exp $
--- devede.py.orig	Thu May 14 21:50:35 2009
+++ devede.py	Fri May 15 09:55:55 2009
d7 1
a7 1
 print "DeVeDe 3.13.0"
@


1.7
log
@- minor update to devede-3.12
@
text
@d1 4
a4 4
$OpenBSD: patch-devede_py,v 1.6 2008/08/24 22:02:26 ajacoutot Exp $
--- devede.py.orig	Sun Jan 25 17:09:52 2009
+++ devede.py	Sun Jan 25 17:11:10 2009
@@@@ -36,13 +36,13 @@@@ import pickle
d7 1
a7 1
 print "DeVeDe 3.12"
d10 4
a13 2
 	print "Locale: "+str(os.environ["LANG"])
 
d17 2
a18 2
-	fichero=open("/usr/share/devede/devede.glade","r")
+	fichero=open("${PREFIX}/share/devede/devede.glade","r")
d22 2
a23 2
@@@@ -76,13 +76,13 @@@@ if tipo==0:
 	#arbol=gtk.glade.XML("/usr/share/devede/devede.glade",domain="devede")
d27 1
a27 1
-	glade="/usr/share/devede/devede.glade"
d34 1
a34 1
+	glade="${PREFIX}/share/devede/devede.glade"
@


1.6
log
@- bugfix update to DeVeDe 3.11
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.5 2008/08/20 08:30:36 ajacoutot Exp $
--- devede.py.orig	Sun Aug 24 23:55:02 2008
+++ devede.py	Sun Aug 24 23:56:45 2008
d7 1
a7 1
 print "DeVeDe 3.11"
d15 1
a15 1
-	fichero=open("/usr/local/share/devede/devede.glade","r")
d18 1
a18 1
 	tipo=1
d20 3
a22 3
@@@@ -94,15 +94,15 @@@@ elif tipo==1:
 	#gtk.glade.bindtextdomain("devede","/usr/share/locale")
 	#arbol=gtk.glade.XML("/usr/local/share/devede/devede.glade",domain="devede")
d24 8
a31 10
-	share_locale="/usr/share/locale" # Are you sure?
+	share_locale="${PREFIX}/share/locale" # Are you sure?
 	# if the files aren't at /usr, try with /usr/local
-	glade="/usr/local/share/devede/devede.glade"
-	sys.path.append("/usr/local/lib/devede")
-	font_path="/usr/local/share/devede"
-	pic_path="/usr/local/share/devede"
-	other_path="/usr/local/share/devede"
-	help_path="/usr/local/share/doc/devede"
-	print "Using local-installed files"
d38 1
a38 1
+        print "Using local-installed files"
d40 1
a40 2
 elif tipo==2:
 	# if the files aren't at /usr/local, try with ./
@


1.5
log
@- update to devede-3.10 (several enhancements, see changelog in source
for details)
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.4 2008/06/24 10:43:21 ajacoutot Exp $
--- devede.py.orig	Mon Aug 18 15:19:45 2008
+++ devede.py	Mon Aug 18 15:22:14 2008
d7 1
a7 1
 print "DeVeDe 3.10"
d20 1
a20 1
@@@@ -94,14 +94,14 @@@@ elif tipo==1:
d33 1
d40 1
a40 1
 	print "Using local-installed files"
d43 1
@


1.4
log
@- small bugfix update to devede-3.9
@
text
@d1 5
a5 5
$OpenBSD: patch-devede_py,v 1.3 2008/05/26 13:49:59 ajacoutot Exp $
--- devede.py.orig	Tue Jun 24 00:25:56 2008
+++ devede.py	Tue Jun 24 12:40:40 2008
@@@@ -42,13 +42,13 @@@@ except ImportError:
 	print 'Psyco not installed, the program will just run slower'
d7 1
a7 1
 print "DeVeDe 3.9"
d20 1
a20 1
@@@@ -96,12 +96,12 @@@@ elif tipo==1:
d31 2
d37 4
a41 2
 	# if the files aren't at /usr/local, try with ./
 	#gettext.bindtextdomain('devede', './po/')
@


1.3
log
@- update to devede-3.8
- use SUBST_CMD

* video bitrate is automatically adjusted
* subtitle's language may be specified
* video can be rotated and flipped
* more elegant menu system...
@
text
@d1 5
a5 4
$OpenBSD: patch-devede_py,v 1.2 2008/04/16 13:35:23 ajacoutot Exp $
--- devede.py.orig	Sun May 25 02:14:15 2008
+++ devede.py	Mon May 26 15:44:06 2008
@@@@ -55,7 +55,7 @@@@ except:
d7 14
a20 8
 if found==False:
 	try:
-		fichero=open("/usr/local/share/devede/devede.glade","r")
+		fichero=open("${PREFIX}/share/devede/devede.glade","r")
 		fichero.close()
 		tipo=1
 		found=True
@@@@ -94,12 +94,12 @@@@ elif tipo==1:
@


1.2
log
@- bugfix update to devede-3.7
@
text
@d1 3
a3 3
$OpenBSD: patch-devede_py,v 1.1 2007/11/17 11:06:14 ajacoutot Exp $
--- devede.py.orig	Wed Apr 16 00:16:41 2008
+++ devede.py	Wed Apr 16 15:14:55 2008
d9 1
a9 1
+		fichero=open("!!PREFIX!!/share/devede/devede.glade","r")
d13 1
a13 1
@@@@ -94,12 +94,11 @@@@ elif tipo==1:
d18 2
a19 1
-	# if the files aren't at /usr, try with /usr/local
d24 4
a27 5
+	share_locale="!!LOCALBASE!!/share/locale"
+	glade="!!PREFIX!!/share/devede/devede.glade"
+	sys.path.append("!!MODPY_SITEPKG!!/devede")
+	font_path="!!PREFIX!!/share/devede"
+	pic_path="!!PREFIX!!/share/devede"
a30 38
@@@@ -138,32 +137,11 @@@@ arbol=gtk.glade.XML(glade,domain="devede")
 #   The following shortcut are usually used:
 _ = gettext.gettext
 
-try:
-	from devede_other import *
-except:
-	print "Failed to load modules DEVEDE_OTHER. Exiting"
-	sys.exit(1)
-try:
-	import devede_convert
-except:
-	print "Failed to load modules DEVEDE_CONVERT. Exiting"
-	sys.exit(1)
-try:
-	import devede_newfiles
-except:
-	print "Failed to load module DEVEDE_NEWFILES. Exiting"
-	sys.exit(1)
-try:
-	import devede_xml_menu
-except:
-	print "Failed to load module DEVEDE_XML_MENU"
-	sys.exit(1)
-
-try:
-	import devede_disctype
-except:
-	print "Failed to load module DEVEDE_DISCTYPE"
-	sys.exit(1)
+from devede_other import *
+import devede_convert
+import devede_newfiles
+import devede_xml_menu
+import devede_disctype
 
 
 # TODO Change the following to work on both linux and windows
@


1.1
log
@- don't hardcode path
@
text
@d1 3
a3 3
$OpenBSD$
--- devede.py.orig	Sat Nov 17 11:49:57 2007
+++ devede.py	Sat Nov 17 11:57:06 2007
d25 1
a25 1
+	sys.path.append("!!PREFIX!!/lib/devede")
d31 38
@

