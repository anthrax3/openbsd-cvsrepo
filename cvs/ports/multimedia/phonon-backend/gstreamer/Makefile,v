head	1.19;
access;
symbols
	OPENBSD_6_1:1.18.0.2
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.17.0.2
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.13.0.4
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	zhuk_20130424:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.19
date	2017.07.17.21.17.47;	author zhuk;	state Exp;
branches;
next	1.18;
commitid	HzWyQjn649jbaJOT;

1.18
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.17;
commitid	l6KSNN1DfB6ABkhu;

1.17
date	2016.05.27.03.41.30;	author zhuk;	state Exp;
branches;
next	1.16;
commitid	VUR16C3C4HUwJqPJ;

1.16
date	2016.05.27.02.44.00;	author zhuk;	state Exp;
branches;
next	1.15;
commitid	xxosZx4J979jj8yJ;

1.15
date	2015.10.07.07.50.37;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	sKbmO8C7oFjiJU2D;

1.14
date	2015.10.07.05.50.25;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	cfUqLA2EnNvfaPZH;

1.13
date	2015.07.05.01.21.34;	author zhuk;	state Exp;
branches;
next	1.12;
commitid	MVM6PFGeKFci0pLT;

1.12
date	2015.07.05.00.47.56;	author zhuk;	state Exp;
branches;
next	1.11;
commitid	Jj3Y0w6yZxbx7k2x;

1.11
date	2015.07.05.00.27.16;	author zhuk;	state Exp;
branches;
next	1.10;
commitid	mVPW1aXvRvkzMh1G;

1.10
date	2015.05.28.10.17.24;	author pascal;	state Exp;
branches;
next	1.9;
commitid	020U4lCPk8wUkCOz;

1.9
date	2015.03.27.08.13.03;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	qkrQPO6KjSKIuf3s;

1.8
date	2014.11.07.12.54.47;	author naddy;	state Exp;
branches;
next	1.7;
commitid	fU0a7Pgs9pO0dxO6;

1.7
date	2014.11.04.06.55.04;	author zhuk;	state Exp;
branches;
next	1.6;
commitid	FNFCsYZpG7iWvoKE;

1.6
date	2014.11.02.07.39.30;	author zhuk;	state Exp;
branches;
next	1.5;
commitid	r2TbsZzcy76pXZZo;

1.5
date	2014.11.01.20.32.54;	author zhuk;	state Exp;
branches;
next	1.4;
commitid	1GXV09U7oBpf6YS6;

1.4
date	2014.07.10.19.50.26;	author zhuk;	state Exp;
branches;
next	1.3;
commitid	QVQcP2pDNqjWtiP7;

1.3
date	2014.07.10.08.18.35;	author espie;	state Exp;
branches;
next	1.2;
commitid	zwSlnozFp9LnFaeZ;

1.2
date	2013.05.08.07.32.25;	author zhuk;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.24.08.42.12;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.24.08.42.12;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.19
log
@Switch Qt5-based Phonon to a separate port, with a separate version.

The phonon.port.mk stays where it is (at least until KDE4 dies).

This gives a chance for various KF5 things to build again.
@
text
@# $OpenBSD: Makefile,v 1.18 2016/12/25 14:34:39 zhuk Exp $

COMMENT-main =	GStreamer-based Phonon backend
COMMENT-icons =	GStreamer-based Phonon backend icons
VERSION =	4.8.2
DISTNAME =	phonon-backend-gstreamer-${VERSION}
PKGNAME-main =	${PKGNAME}
PKGNAME-icons =	phonon-gstreamer-icons-${VERSION}
HOMEPAGE =	https://projects.kde.org/projects/kdesupport/phonon/phonon-gstreamer
REVISION-main =	5
REVISION-icons =1

FULLPKGNAME-main =	${PKGNAME}
FULLPKGPATH-main =	${PKGPATH},${FLAVOR},-main

# deconflict Qt4 and Qt5 versions by extracting common data
MULTI_PACKAGES =	-main -icons

# icons are same, so not reason to have different packages
PKG_ARCH-icons =	*

RUN_DEPENDS-icons =	x11/gtk+3,-guic
# allow playing Vorbis and MP3 notification sounds out of the box
RUN_DEPENDS-main =	multimedia/gstreamer1/plugins-good \
			multimedia/gstreamer1/plugins-libav \
			${BASE_PKGPATH},-icons

LIB_DEPENDS-icons =
LIB_DEPENDS-main =	${LIB_DEPENDS} \
			multimedia/gstreamer1/core \
			multimedia/gstreamer1/plugins-base

WANTLIB-icons =
WANTLIB-main =	${WANTLIB} GL m
WANTLIB-main +=	glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB-main +=	gstaudio-1.0 gstbase-1.0 gstpbutils-1.0
WANTLIB-main +=	gstreamer-1.0 gstvideo-1.0 gstapp-1.0

FLAVORS =	qt5
FLAVOR ?=
.if ${FLAVOR:Mqt5}
WANTLIB-main +=		Qt5Core Qt5Gui Qt5OpenGL Qt5Widgets
.else
WANTLIB-main +=		QtGui QtOpenGL
.endif

.include <bsd.port.mk>
@


1.18
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/05/27 03:41:30 zhuk Exp $
d10 1
a10 1
REVISION-main =	4
@


1.17
log
@Fix complex package combinations for Phonon GStreamer backend, until
someone runs into real issues.

We produce two similar 100% interchangeable packages for now:
phonon-gstreamer-icons-4.8.2p0 and phonon-gstreamer-icons-4.8.2p0-qt5.
Not sure how to deal with it, but at least it builds and updates fine now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/05/27 02:44:00 zhuk Exp $
d10 2
a11 2
REVISION-main =	3
REVISION-icons =0
@


1.16
log
@Add Qt5 support for building GStreamer Phonon plugin.

VLC plugin doesn't support Qt5 support yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/10/07 07:50:37 ajacoutot Exp $
d7 1
d10 5
a14 1
REVISION-main =	2
a19 5
FULLPKGNAME-icons =	${PKGNAME-icons}
FULLPKGPATH-icons =	${PKGPATH,-icons}
PKGNAME-main =		${PKGNAME}
FULLPKGNAME-main =	${FULLPKGNAME}
FULLPKGPATH-main =	${PKGPATH},${FLAVOR},-main
d25 2
a26 1
			multimedia/gstreamer1/plugins-libav
d42 1
a42 1
WANTLIB-main +=	Qt5Core Qt5Gui Qt5OpenGL Qt5Widgets
d44 1
a44 1
WANTLIB-main +=	QtGui QtOpenGL
@


1.15
log
@ffmpeg -> libav

from nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/10/07 05:50:25 ajacoutot Exp $
d3 2
a4 1
COMMENT =	GStreamer-based Phonon backend
d7 1
d9 1
a9 1
REVISION =	1
d11 12
d24 21
a44 12
RUN_DEPENDS =	multimedia/gstreamer1/plugins-good \
		multimedia/gstreamer1/plugins-libav \
		x11/gtk+3,-guic

LIB_DEPENDS =	multimedia/gstreamer1/core \
		multimedia/gstreamer1/plugins-base

WANTLIB =	GL m
WANTLIB +=	lib/qt4/QtGui lib/qt4/QtOpenGL
WANTLIB +=	glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB +=	gstaudio-1.0 gstbase-1.0 gstpbutils-1.0
WANTLIB +=	gstreamer-1.0 gstvideo-1.0 gstapp-1.0
@


1.14
log
@Bring consistency in GStreamer dependencies:
- remove most dependencies on plugins-bad and plugins-ugly; there is no reason
on depend on these because they should only provide support for rare and/or
rarely used codecs
- for standard how-of-the-box support for most modern files, always depend on
plugins-good and plugins-ffmpeg|libav.

gstreamer1 parts from Brad, gstreamer-0.10 parts from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/07/05 01:21:34 zhuk Exp $
d11 1
a11 1
		multimedia/gstreamer1/plugins-ffmpeg \
@


1.13
log
@Vorbis plugins now lives in gstreamer1-plugins-good, so add dependency on it.
Otherwise most Phonon (read: KDE) apps won't be able to play sounds,
including System Settings test widget.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/07/05 00:47:56 zhuk Exp $
d7 1
a7 1
REVISION =	0
d11 1
a11 1
		multimedia/gstreamer1/plugins-ugly \
@


1.12
log
@No need for explicit MASTER_SITES here, too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/07/05 00:27:16 zhuk Exp $
d7 1
d10 2
a11 1
RUN_DEPENDS =	multimedia/gstreamer1/plugins-ugly \
@


1.11
log
@Very minor update of GStreamer backend for Phonon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/05/28 10:17:24 pascal Exp $
a6 2

MASTER_SITES =	${MASTER_SITE_KDE:=stable/phonon/phonon-backend-gstreamer/${VERSION}/src/}
@


1.10
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/03/27 08:13:03 ajacoutot Exp $
d4 1
a4 1
VERSION =	4.8.0
d6 1
a6 1
REVISION =	2
d8 1
a8 1
MASTER_SITES =	${MASTER_SITE_KDE:=stable/phonon/phonon-backend-gstreamer/${VERSION}/}
@


1.9
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/11/07 12:54:47 naddy Exp $
d6 1
a6 1
REVISION =	1
@


1.8
log
@restore accidentally lost REVISION
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
REVISION =	0
d12 1
a12 1
		x11/gtk+2,-guic
@


1.7
log
@Forgot to run update-patches, noticed by naddy@@.

Went unnoticed in "dpb x11/kde4142" build because gstreamer backend doesn't
get picked up by dependency, since it's not default backend now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/11/02 07:39:30 zhuk Exp $
d6 1
@


1.6
log
@multimedia/gstreamer1/plugins-base is a LIB_DEPENDS item, actually.

Spotted by ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/11/01 20:32:54 zhuk Exp $
a5 1
REVISION =	0
@


1.5
log
@Update Phonon to 4.8.1.

This also updates its backends, due to some API changes it's easier to this
in a single batch. The biggest news here are that phonon-gstreamer switches
to GStreamer 1.0, finally.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/07/10 19:50:26 zhuk Exp $
d6 1
d11 1
a11 2
RUN_DEPENDS =	multimedia/gstreamer1/plugins-base \
		multimedia/gstreamer1/plugins-ugly \
d14 2
a15 1
LIB_DEPENDS =	multimedia/gstreamer1/core
@


1.4
log
@Another meaningful update from KDE land: Phonon 4.7.2 and friends.
Main change is that VLC backend becames the default (and really performs
better than GStreamer one).

(now please get your children out of display)

Another change is that due the fact that Phonon now supports library
renaming upstream, libphononexperimental.so becomes
libphonon_sexperimental.so. This doesn't affect any ports imported as of now.

REVISION bumps for the dependant ports to follow.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/07/10 08:18:35 espie Exp $
d4 1
a4 1
VERSION =	4.7.1
d10 2
a11 2
RUN_DEPENDS =	multimedia/gstreamer-0.10/plugins-base \
		multimedia/gstreamer-0.10/plugins-ugly \
d14 1
a14 1
LIB_DEPENDS =	multimedia/gstreamer-0.10/core
d19 2
a20 10
WANTLIB +=	gstaudio-0.10 gstbase-0.10 gstinterfaces-0.10 gstpbutils-0.10
WANTLIB +=	gstreamer-0.10 gstvideo-0.10 gstapp-0.10

# XXX
# (gst-plugin-scanner:18789): GLib-GObject-WARNING **: cannot register existing
# type `GstVorbisDec'
# (gst-plugin-scanner:18789): GLib-CRITICAL **: g_once_init_leave: assertion
# `result != 0' failed
# (gst-plugin-scanner:18789): GStreamer-CRITICAL **: gst_element_register:
# assertion `g_type_is_a (type, GST_TYPE_ELEMENT)' failed
@


1.3
log
@bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/05/08 07:32:25 zhuk Exp $
d4 1
a4 1
VERSION =	4.6.3
a5 1
REVISION =	0
d7 1
a7 1
MASTER_SITES =	${MASTER_SITE_KDE:=stable/phonon/phonon-backend-gstreamer/${VERSION}/src/}
d16 1
a16 1
WANTLIB =	GL m stdc++
@


1.2
log
@Bugfix update to 4.6.3. Contains fix for some GTK-related crashes.

port-wise okay sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/04/24 08:42:12 zhuk Exp $
d6 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
VERSION =	4.6.2
a5 1
REVISION =	3
@


1.1.1.1
log
@Import Phonon backends, separated since Phonon 4.6.0.
Phonon update will follow shortly.

VLC backend has limited functionality, so default is GStreamer one.

"since all the other stuff is disconnected, go ahead with it" landry@@
@
text
@@
