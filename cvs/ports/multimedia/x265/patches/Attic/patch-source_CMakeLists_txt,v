head	1.5;
access;
symbols
	brad_20140904:1.1.1.1 brad:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2015.11.09.06.44.09;	author ajacoutot;	state dead;
branches;
next	1.4;
commitid	wizMmVYftri7cVV0;

1.4
date	2015.10.01.15.13.36;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	jRLTdddb6avm75zA;

1.3
date	2014.11.02.11.36.48;	author brad;	state dead;
branches;
next	1.2;
commitid	ELp7Pc16upI0oUQA;

1.2
date	2014.09.05.15.29.41;	author brad;	state Exp;
branches;
next	1.1;
commitid	yBvK2SdLezUhEHtU;

1.1
date	2014.09.04.05.37.41;	author brad;	state Exp;
branches
	1.1.1.1;
next	;
commitid	PknvhOeWaMsrwaYu;

1.1.1.1
date	2014.09.04.05.37.41;	author brad;	state Exp;
branches;
next	;
commitid	PknvhOeWaMsrwaYu;


desc
@@


1.5
log
@Update to x265-1.8.93.

from Brad (maintainer)
@
text
@$OpenBSD: patch-source_CMakeLists_txt,v 1.4 2015/10/01 15:13:36 ajacoutot Exp $

threading: add a slow-path for platforms with no system atomics

--- source/CMakeLists.txt.orig	Thu Oct  1 04:11:47 2015
+++ source/CMakeLists.txt	Thu Oct  1 04:12:30 2015
@@@@ -82,6 +82,10 @@@@ if(UNIX)
         endif()
     endif()
     mark_as_advanced(LIBRT NUMA_FOUND)
+    option(NO_ATOMICS "Use a slow mutex to replace atomics" OFF)
+    if(NO_ATOMICS)
+        add_definitions(-DNO_ATOMICS=1)
+    endif(NO_ATOMICS)
 endif(UNIX)
 
 if(X64 AND NOT WIN32)
@


1.4
log
@Unbreak on all archs.

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Update to x265 1.4.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-source_CMakeLists_txt,v 1.2 2014/09/05 15:29:41 brad Exp $
d3 1
a3 1
https://bitbucket.org/multicoreware/x265/commits/139d6b2a1b19
d5 10
a14 12
--- source/CMakeLists.txt.orig	Thu Aug 21 17:49:02 2014
+++ source/CMakeLists.txt	Thu Sep  4 13:07:00 2014
@@@@ -55,9 +55,10 @@@@ endif()
 
 if(UNIX)
     SET(PLATFORM_LIBS pthread)
-    if(NOT ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
+    find_library(LIBRT rt)
+    if(LIBRT)
         SET(PLATFORM_LIBS ${PLATFORM_LIBS} rt)
-    endif(NOT ${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
+    endif()
d17 1
a17 1
 # Compiler detection
@


1.2
log
@Sync one of the patches with what was commited upstream and add URLs
to the commited patches.

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-source_CMakeLists_txt,v 1.1.1.1 2014/09/04 05:37:41 brad Exp $
@


1.1
log
@Initial revision
@
text
@d1 4
a4 1
$OpenBSD$
d6 2
a7 2
+++ source/CMakeLists.txt	Sun Aug 31 10:30:23 2014
@@@@ -55,9 +55,9 @@@@ endif()
d12 2
a13 1
+    if(NOT ${CMAKE_SYSTEM_NAME} MATCHES "Darwin" AND NOT ${CMAKE_SYSTEM_NAME} MATCHES "OpenBSD")
d16 1
a16 1
+    endif(NOT ${CMAKE_SYSTEM_NAME} MATCHES "Darwin" AND NOT ${CMAKE_SYSTEM_NAME} MATCHES "OpenBSD")
@


1.1.1.1
log
@Import of x265.

x265 is an open-source project and free application library for
encoding video streams into the H.265/High Efficiency Video Coding
(HEVC) format.

ok ajacoutot@@
@
text
@@
