head	1.13;
access;
symbols
	OPENBSD_6_1:1.13.0.4
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.13.0.2
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.9.0.2
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.4.0.4
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4
	zhuk_20140714:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2016.04.28.08.20.32;	author sthen;	state Exp;
branches;
next	1.12;
commitid	Pjxa5qgT4yAaTzoN;

1.12
date	2016.04.27.10.46.31;	author jca;	state Exp;
branches;
next	1.11;
commitid	IocDWuupo8zWa7kJ;

1.11
date	2016.04.03.19.15.23;	author zhuk;	state Exp;
branches;
next	1.10;
commitid	s4p0t9iYJV6DHna1;

1.10
date	2016.03.19.23.44.54;	author naddy;	state Exp;
branches;
next	1.9;
commitid	qStWOgPYAL7HBOR8;

1.9
date	2015.07.20.05.20.27;	author zhuk;	state Exp;
branches;
next	1.8;
commitid	GUmdq1NANxbAw9cd;

1.8
date	2015.05.28.12.01.15;	author jca;	state Exp;
branches;
next	1.7;
commitid	O8gNk971NEZQQ1Dk;

1.7
date	2015.05.28.10.17.24;	author pascal;	state Exp;
branches;
next	1.6;
commitid	020U4lCPk8wUkCOz;

1.6
date	2015.05.01.16.05.07;	author zhuk;	state Exp;
branches;
next	1.5;
commitid	XqnC7eVBtl0OZMXr;

1.5
date	2015.03.27.08.13.02;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	qkrQPO6KjSKIuf3s;

1.4
date	2014.07.20.09.17.46;	author zhuk;	state Exp;
branches;
next	1.3;
commitid	DpFB36OY5sSfcG8S;

1.3
date	2014.07.17.08.30.58;	author zhuk;	state Exp;
branches;
next	1.2;
commitid	hwiPSWfSsFB9r8N8;

1.2
date	2014.07.16.12.44.22;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	jNmFzoRDRVd458aX;

1.1
date	2014.07.14.09.15.12;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;
commitid	l8jEgJOw3Q3u2CTr;

1.1.1.1
date	2014.07.14.09.15.12;	author zhuk;	state Exp;
branches;
next	;
commitid	l8jEgJOw3Q3u2CTr;


desc
@@


1.13
log
@regen plist
@
text
@# $OpenBSD: Makefile,v 1.12 2016/04/27 10:46:31 jca Exp $

COMMENT-main =		multimedia transformations framework
COMMENT-gpl2 =		GPLv2-licensed modules for mlt
VERSION =		6.0.0
DISTNAME =		mlt-${VERSION}
PKGNAME-main =		${DISTNAME}
PKGNAME-gpl2 =		mlt-gpl2-${VERSION}
REVISION-main =		1
REVISION-gpl2 =		0

# XXX versions should be kept in sync together
SHARED_LIBS =		mlt		1.1
SHARED_LIBS +=		mlt++		1.1

CATEGORIES =		multimedia devel
HOMEPAGE =		http://www.mltframework.org/

MAINTAINER =		KDE porting team <openbsd-kde@@googlegroups.com>

# GPLv2+, LGPLv2.1+
# Actually, qimage module could be under GPLv3+ if one more object
# file gets included, see --enable-gpl3 configure option.
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB-main =  ${MODGCC4_CPPWANTLIB} SDL SDL_image X11 avcodec
WANTLIB-main += avdevice avformat avutil c cairo exif gdk-x11-2.0
WANTLIB-main += gdk_pixbuf-2.0 glib-2.0 gobject-2.0 jack m pango-1.0
WANTLIB-main += pangoft2-1.0 pthread sox swscale xml2 fftw3

WANTLIB-gpl2 =  ${MODGCC4_CPPWANTLIB} ${MODQT4_WANTLIB} lib/qt4/QtGui
WANTLIB-gpl2 += lib/qt4/QtSvg lib/qt4/QtXml lib/qt4/QtOpenGL
WANTLIB-gpl2 += X11 exif m mlt mlt++ pthread samplerate

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=mlt/}
EXTRACT_SUFX =		.tar.gz

MULTI_PACKAGES =	-main -gpl2

MODULES =		x11/kde4
MODKDE4_USE =
KDE4_ONLY =		Yes

BUILD_DEPENDS =		audio/ladspa \
			textproc/libxml>=2.5 \
			${MODKDE4_DEP_DIR}/libs>=${MODKDE4_DEP_VERSION}

RUN_DEPENDS-main =	audio/ladspa \
			x11/gtk+3,-guic

LIB_DEPENDS-main =	${MODGCC4_CPPLIBDEP} \
			audio/jack \
			audio/sox \
			devel/sdl>=1.2 \
			devel/sdl-image>=1.2 \
			graphics/ffmpeg \
			graphics/libexif \
			math/fftw3 \
			x11/gtk+2,-main

LIB_DEPENDS-gpl2 =	${BUILD_PKGPATH},-main \
			${MODGCC4_CPPLIBDEP} \
			${MODQT4_LIB_DEPENDS} \
			audio/libsamplerate>=0.1.5 \
			graphics/libexif

MAKE_FLAGS =		soversion=${LIBmlt_VERSION}
MAKE_ENV =		LDFLAGS="${LDFLAGS} -L${X11BASE}/lib" SHFLAGS="-shared"

USE_GMAKE =		Yes
CONFIGURE_STYLE =	simple
CONFIGURE_ARGS =	--mandir=${PREFIX}/man \
			--disable-dv \
			--disable-frei0r \
			--disable-kino \
			--disable-swfdec \
			--enable-gpl

# one test fails due to lack of support of locale-specific numeric formatting
TEST_DEPENDS =		${BUILD_PKGPATH},-main
TEST_FLAGS =		-e
# LFLAGS is not a typo
TEST_ENV =		COPTS="${CXXFLAGS}" LFLAGS="${LDFLAGS} -pthread"
do-test:
	cd ${WRKSRC}/src/tests; ${SETENV} ${ALL_TEST_ENV} qmake4 tests.pro
	cd ${WRKSRC}/src/tests; ${SETENV} ${ALL_TEST_ENV} ${MAKE_PROGRAM} \
	    ${ALL_TEST_FLAGS} clean all check

.include <bsd.port.mk>
@


1.12
log
@Kill swfdec support.

ok ajacoutot@@ phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/04/03 19:15:23 zhuk Exp $
d9 1
a9 1
REVISION-main =		0
@


1.11
log
@Update MLT to 6.0.0.

The tests statistics improved in four times (twice more tests, twice less
failings). Remember to remove old mlt packages before build, this port
is one of those who'll pick up old libs from system when present.

From Rafael Sadowski with patience, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/03/19 23:44:54 naddy Exp $
d9 2
d29 1
a29 1
WANTLIB-main += pangoft2-1.0 pthread sox swfdec-0.8 swscale xml2 fftw3
a57 1
			graphics/swfdec \
d76 1
@


1.10
log
@drop SHARED_ONLY from KDE4 ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/07/20 05:20:27 zhuk Exp $
d5 1
a5 1
VERSION =		0.9.6
d11 2
a12 2
SHARED_LIBS =		mlt		1.0
SHARED_LIBS +=		mlt++		1.0
d27 1
a27 1
WANTLIB-main += pangoft2-1.0 pthread sox swfdec-0.8 swscale xml2
d57 1
a74 2
			--disable-vorbis \
			--enable-debug \
a75 1
CONFIGURE_ENV =		CFLAGS="${CFLAGS} -std=gnu99"
@


1.9
log
@Update mlt to 0.9.6, the kdenlive package still builds fine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/05/28 12:01:15 jca Exp $
a2 1
SHARED_ONLY =		Yes
@


1.8
log
@Compile as PIC code and link using -shared, not -Wl,-shared

Fixes build with binutils-2.17@@amd64

"looks correct" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/05/28 10:17:24 pascal Exp $
d6 1
a6 1
VERSION =		0.9.2
a9 2
REVISION-main =		3
REVISION-gpl2 =		3
d12 2
a13 2
SHARED_LIBS =		mlt		0.0
SHARED_LIBS +=		mlt++		0.0
@


1.7
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/05/01 16:05:07 zhuk Exp $
d10 2
a11 2
REVISION-main =		2
REVISION-gpl2 =		2
@


1.6
log
@Two missing KDE4 tags, spotted by espie@@.

Should fix (at least some) KDE3 vs. KDE4 build problems out there.

Since both ports are mine, its noone who to blame for the months long
breakage, other than me. :(
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/03/27 08:13:02 ajacoutot Exp $
d10 2
a11 2
REVISION-main =		1
REVISION-gpl2 =		1
@


1.5
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/07/20 09:17:46 zhuk Exp $
d43 1
@


1.4
log
@Instead of relying on implicit BUILD_DEPENDS to come from LIB_DEPENDS,
specify BUILD_DEPENDS on kdelibs-4.x explicitly. This avoids a bug when
extraneous LIB_DEPENDS became stripped at build time, resulting in no
actual build dependency.

Noticed by naddy@@, explained by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/07/17 08:30:58 zhuk Exp $
d10 2
a11 2
REVISION-main =		0
REVISION-gpl2 =		0
d49 1
a49 1
			x11/gtk+2,-guic
@


1.3
log
@Fix @@conflict marker, and mark that we're fine with current versions of
freeze package. Shame on me.

Didn't package => no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/07/16 12:44:22 zhuk Exp $
d42 1
a42 1
MODKDE4_USE =		libs
d45 2
a46 1
			textproc/libxml>=2.5
@


1.2
log
@Mark conflict between archivers/freeze and multimedia/mlt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/07/14 09:15:12 zhuk Exp $
d11 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 1
@


1.1.1.1
log
@MLT is an open source multimedia framework, designed and developed
for television broadcasting. It provides a toolkit for broadcasters,
video editors, media players, transcoders, web streamers and many
more types of applications. The functionality of the system is
provided via an assortment of ready to use tools, XML authoring
components, and an extensible plug-in based API.

GPL2 (not LGPL) licensed plugins are separated in an individual
subpackage. GPL3 plugins aren't built; feel free to ask if you
really need them.

Input from and okay landry@@
@
text
@@
