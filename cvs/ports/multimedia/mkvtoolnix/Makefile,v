head	1.65;
access;
symbols
	OPENBSD_6_1:1.64.0.2
	OPENBSD_6_1_BASE:1.64
	OPENBSD_6_0:1.53.0.2
	OPENBSD_6_0_BASE:1.53
	OPENBSD_5_9:1.49.0.2
	OPENBSD_5_9_BASE:1.49
	OPENBSD_5_8:1.41.0.4
	OPENBSD_5_8_BASE:1.41
	OPENBSD_5_7:1.32.0.8
	OPENBSD_5_7_BASE:1.32
	OPENBSD_5_6:1.32.0.6
	OPENBSD_5_6_BASE:1.32
	OPENBSD_5_5:1.32.0.4
	OPENBSD_5_5_BASE:1.32
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.29.0.2
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.28.0.2
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.4
	OPENBSD_5_0:1.27.0.2
	OPENBSD_5_0_BASE:1.27
	OPENBSD_4_9:1.26.0.2
	OPENBSD_4_9_BASE:1.26
	OPENBSD_4_8:1.22.0.2
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.19.0.2
	OPENBSD_4_7_BASE:1.19
	OPENBSD_4_6:1.17.0.2
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.12.0.2
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.7.0.2
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	ajacoutot_20070319:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.65
date	2017.04.25.11.45.31;	author sthen;	state Exp;
branches;
next	1.64;
commitid	ITPK30XXtJUZxSze;

1.64
date	2016.12.31.08.11.59;	author ajacoutot;	state Exp;
branches;
next	1.63;
commitid	MqHU5OLjWK18b2AZ;

1.63
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.62;
commitid	l6KSNN1DfB6ABkhu;

1.62
date	2016.12.05.09.01.16;	author ajacoutot;	state Exp;
branches;
next	1.61;
commitid	Eg5ou7tdHMucTxFx;

1.61
date	2016.11.18.12.37.08;	author ajacoutot;	state Exp;
branches;
next	1.60;
commitid	gR9UETD6TI5sfI8D;

1.60
date	2016.10.29.10.37.12;	author ajacoutot;	state Exp;
branches;
next	1.59;
commitid	34H8aYGWvArKQc4m;

1.59
date	2016.10.29.08.53.31;	author ajacoutot;	state Exp;
branches;
next	1.58;
commitid	og9tnNfYQLQ1VyI4;

1.58
date	2016.10.28.08.32.11;	author ajacoutot;	state Exp;
branches;
next	1.57;
commitid	RnQhyKZPKdMAAX8M;

1.57
date	2016.10.26.07.45.09;	author ajacoutot;	state Exp;
branches;
next	1.56;
commitid	FxIu0lg9udA25uVi;

1.56
date	2016.09.18.07.47.48;	author ajacoutot;	state Exp;
branches;
next	1.55;
commitid	4GE5bPMdTQCSUxVO;

1.55
date	2016.08.28.07.39.17;	author ajacoutot;	state Exp;
branches;
next	1.54;
commitid	Cf00y2iyF53FhMUW;

1.54
date	2016.08.20.12.02.01;	author ajacoutot;	state Exp;
branches;
next	1.53;
commitid	cQpMAItLyIrA4ULE;

1.53
date	2016.06.19.05.59.14;	author ajacoutot;	state Exp;
branches;
next	1.52;
commitid	d8rMbYL6dNDv8MHw;

1.52
date	2016.04.27.08.52.38;	author ajacoutot;	state Exp;
branches;
next	1.51;
commitid	knqzaHT2pLHsv3HI;

1.51
date	2016.04.11.05.55.37;	author ajacoutot;	state Exp;
branches;
next	1.50;
commitid	Bs5KfsL4WuzynUy6;

1.50
date	2016.03.07.07.14.44;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	nIbSGLx0L2uvY5fG;

1.49
date	2016.01.18.07.11.36;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	UdL5fjsuo9wuQd76;

1.48
date	2016.01.03.20.02.31;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	eCQQtOfbHPMe0XM3;

1.47
date	2015.12.17.09.45.33;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	ka6NnzUYRLOCLmts;

1.46
date	2015.11.22.08.12.12;	author ajacoutot;	state Exp;
branches;
next	1.45;
commitid	k1eYN2CKSSUL18wA;

1.45
date	2015.10.25.18.47.32;	author ajacoutot;	state Exp;
branches;
next	1.44;
commitid	nFqAtrG1314T2pDq;

1.44
date	2015.10.24.09.19.33;	author ajacoutot;	state Exp;
branches;
next	1.43;
commitid	hAWTjivCHKrOwtjS;

1.43
date	2015.09.27.06.38.16;	author ajacoutot;	state Exp;
branches;
next	1.42;
commitid	NhJ1NY79o5MjitUd;

1.42
date	2015.08.26.10.28.03;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	EHBSo5keIjOayDS1;

1.41
date	2015.07.20.20.24.53;	author ajacoutot;	state Exp;
branches;
next	1.40;
commitid	P15f5j0Tu3xnDfuQ;

1.40
date	2015.07.20.07.09.29;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	qTdgMMwCWuprVVVH;

1.39
date	2015.07.16.17.27.09;	author jeremy;	state Exp;
branches;
next	1.38;
commitid	wGOk1Dw0Jh0UvwX9;

1.38
date	2015.07.02.08.30.24;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	izMiAvnREXHsWMqz;

1.37
date	2015.06.20.20.30.08;	author ajacoutot;	state Exp;
branches;
next	1.36;
commitid	isEtRJwaE4rzojXg;

1.36
date	2015.06.20.19.14.26;	author ajacoutot;	state Exp;
branches;
next	1.35;
commitid	k9gy8QsMSZVwm0sw;

1.35
date	2015.06.20.06.08.01;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	JthuH1X2RFilH6Rp;

1.34
date	2015.05.28.10.25.36;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	lN3w4COcYGfnysHu;

1.33
date	2015.05.27.21.18.48;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	4xqY7BI7NdLo6z5n;

1.32
date	2013.04.11.20.26.10;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2013.03.11.11.35.44;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2013.03.08.01.32.25;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2012.03.08.12.13.01;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2011.07.30.04.35.51;	author benoit;	state Exp;
branches;
next	1.26;

1.26
date	2010.11.19.07.23.15;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.07.20.15.42;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.10.24.21.27.41;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.18.21.25.07;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.07.17.22.52.50;	author benoit;	state Exp;
branches;
next	1.21;

1.21
date	2010.04.17.13.14.01;	author benoit;	state Exp;
branches;
next	1.20;

1.20
date	2010.04.05.20.27.03;	author benoit;	state Exp;
branches;
next	1.19;

1.19
date	2009.12.23.12.11.29;	author benoit;	state Exp;
branches;
next	1.18;

1.18
date	2009.07.24.14.37.23;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2009.06.09.20.30.14;	author benoit;	state Exp;
branches;
next	1.16;

1.16
date	2009.05.13.20.45.21;	author benoit;	state Exp;
branches;
next	1.15;

1.15
date	2009.05.13.13.02.17;	author benoit;	state Exp;
branches;
next	1.14;

1.14
date	2009.03.24.05.10.30;	author jakemsr;	state Exp;
branches;
next	1.13;

1.13
date	2009.03.05.12.03.58;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.02.15.12.14.25;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.01.16.07.52.50;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2008.12.05.20.48.05;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2008.10.12.12.22.10;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2008.09.09.07.27.49;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2008.03.15.10.11.34;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2007.11.17.20.39.02;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2007.08.27.11.36.21;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2007.04.30.10.49.22;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2007.04.30.10.09.14;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.21.12.02.45;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.03.19.12.23.42;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.03.19.12.23.42;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.65
log
@avoid hidden build dep on gtest; it's now picked up following the
gtest update and causes a failure with dpb junking
@
text
@# $OpenBSD: Makefile,v 1.64 2016/12/31 08:11:59 ajacoutot Exp $

COMMENT=	create, alter and inspect Matroska files

DISTNAME=	mkvtoolnix-9.7.1
CATEGORIES=	multimedia x11
MASTER_SITES=	${HOMEPAGE}sources/
EXTRACT_SUFX=	.tar.xz

HOMEPAGE =	https://www.bunkus.org/videotools/mkvtoolnix/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	FLAC boost_filesystem-mt boost_regex-mt boost_system-mt \
		c ebml m magic matroska ogg pthread vorbis z

MODULES=	devel/gettext \
		lang/ruby \
		gcc4

MODRUBY_RUNDEP=	No

MODGCC4_ARCHS=	*
MODGCC4_LANGS=	c++

BUILD_DEPENDS=	devel/ruby-rake
LIB_DEPENDS=	audio/flac \
		audio/libogg \
		audio/libvorbis \
		devel/boost \
		devel/libmagic \
		multimedia/libmatroska>=1.4.5 \
		textproc/libebml>=1.3.4

MAKE_ENV+=	V=1

USE_GROFF=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ARGS=	--disable-optimization \
		--with-boost-date-time=boost_date_time-mt \
		--with-boost-filesystem=boost_filesystem-mt \
		--with-boost-libdir=${LOCALBASE}/lib \
		--with-boost-regex=boost_regex-mt \
		--with-boost-system=boost_system-mt \
		--without-curl
CPPFLAGS=	-I${LOCALBASE}/include
LDFLAGS=	-L${LOCALBASE}/lib

FLAVORS=	no_x11
FLAVOR?=

.if ${FLAVOR:Mno_x11}
CONFIGURE_ARGS+= --disable-gui
.else
MODULES+=	x11/qt5
WANTLIB+=	Qt5Concurrent Qt5Core Qt5Gui Qt5Network Qt5Widgets
RUN_DEPENDS+=	devel/desktop-file-utils \
		misc/shared-mime-info \
		x11/gtk+3,-guic
CPPFLAGS+=	-I${X11BASE}/include
LDFLAGS+=	-L${X11BASE}/lib -L${MODQT5_LIBDIR}
.endif

CONFIGURE_ENV=	CPPFLAGS="${CPPFLAGS}" \
		LDFLAGS="${LDFLAGS}"

# XXX does not build with our pugixml (it's too new)
CONFIGURE_ENV +=ac_cv_header_pugixml_hpp=no

# avoid hidden build dep on gtest
CONFIGURE_ENV +=ac_cv_lib_gtest_main_main=no

NO_TEST=	Yes

do-build:
	@@cd ${WRKSRC} && \
		env -i ${MAKE_ENV} ${RUBY} ./drake -j${MAKE_JOBS} \
		${MAKE_FLAGS}

do-install:
	@@cd ${WRKSRC} && \
		env -i ${MAKE_ENV} ${RUBY} ./drake \
		DESTDIR=${WRKINST} install

.include <bsd.port.mk>
@


1.64
log
@Update to mkvtoolnix-9.7.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/12/25 14:34:39 zhuk Exp $
d73 3
@


1.63
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/12/05 09:01:16 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.6.0
a8 1
REVISION=	0
d60 1
a60 1
WANTLIB+=	Qt5Core Qt5Gui Qt5Network Qt5Widgets
@


1.62
log
@Update to mkvtoolnix-9.6.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2016/11/18 12:37:08 ajacoutot Exp $
d9 1
@


1.61
log
@Don't pick up pugixml if installed but use the internal copy; ours is too
new.

reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2016/10/29 10:37:12 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mkvtoolnix-9.5.0
REVISION=	0
d7 1
a7 1
MASTER_SITES=	${HOMEPAGE}/sources/
d10 1
a10 1
HOMEPAGE =	http://www.bunkus.org/videotools/mkvtoolnix/
@


1.60
log
@utfcpp can not be automatically picked up anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/10/28 08:32:11 ajacoutot Exp $
d71 3
@


1.59
log
@Fix FLAVOR description after the switch from wxGTK2 to qt5.

from Brad (maintainer)
@
text
@d30 1
a30 2
BUILD_DEPENDS=	devel/ruby-rake \
		devel/utfcpp
@


1.58
log
@devel/utfcpp is picked up if installed, so add it as a build-dep.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/10/26 07:45:09 ajacoutot Exp $
d6 1
@


1.57
log
@Update to mkvtoolnix-9.5.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2016/09/18 07:47:48 ajacoutot Exp $
d29 2
a30 1
BUILD_DEPENDS=	devel/ruby-rake
@


1.56
log
@Update to mkvtoolnix-9.4.2.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2016/08/28 07:39:17 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.4.2
@


1.55
log
@Update to mkvtoolnix-9.4.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/08/20 12:02:01 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.4.0
@


1.54
log
@Update to mkvtoolnix-9.3.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/06/19 05:59:14 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.3.1
@


1.53
log
@Update to mkvtoolnix-9.2.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/04/27 08:52:38 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.2.0
d35 2
a36 2
		multimedia/libmatroska>=1.4.4 \
		textproc/libebml>=1.3.3
@


1.52
log
@Update to mkvtoolnix-9.1.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2016/04/11 05:55:37 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.1.0
@


1.51
log
@Update to mkvtoolnix-9.0.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2016/03/07 07:14:44 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-9.0.1
@


1.50
log
@Update to mkvtoolnix-8.9.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/01/18 07:11:36 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.9.0
@


1.49
log
@Update to mkvtoolnix-8.8.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/01/03 20:02:31 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.8.0
@


1.48
log
@Update to mkvtoolnix-8.7.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/12/17 09:45:33 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.7.0
@


1.47
log
@Update to mkvtoolnix-8.6.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/11/22 08:12:12 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.6.1
@


1.46
log
@Update to mkvtoolnix-8.5.2.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/10/25 18:47:32 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.5.2
@


1.45
log
@Unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/10/24 09:19:33 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.5.1
a8 1
REVISION=	0
@


1.44
log
@Update to mkvtoolnix-8.5.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/09/27 06:38:16 ajacoutot Exp $
d9 1
@


1.43
log
@Update to mkvtoolnix-8.4.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/08/26 10:28:03 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.4.0
d35 2
a36 2
		multimedia/libmatroska>=1.4.2 \
		textproc/libebml>=1.3.1
@


1.42
log
@Update to mkvtoolnix-8.3.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/07/20 20:24:53 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.3.0
a43 1
		--disable-wxwidgets \
@


1.41
log
@Thank you Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/07/20 07:09:29 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.2.0
a8 2

REVISION=	0
@


1.40
log
@Update to mkvtoolnix-8.2.0.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/07/16 17:27:09 jeremy Exp $
d9 2
@


1.39
log
@Switch the default ruby version from ruby 2.1 to 2.2, and bump affected
ports.

OK jcs@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/07/02 08:30:24 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mkvtoolnix-8.1.0
REVISION=	0
@


1.38
log
@Update to mkvtoolnix-8.1.0.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2015/06/20 20:30:08 ajacoutot Exp $
d6 1
@


1.37
log
@Unbreak.

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/06/20 19:14:26 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-8.0.0
d61 1
a61 1
WANTLIB+=	Qt5Core Qt5Gui Qt5Widgets
@


1.36
log
@Mark BROKEN.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.35 2015/06/20 06:08:01 ajacoutot Exp $

BROKEN=		configure: error: C compiler cannot create executables
d51 2
a52 2
CONFIGURE_ENV=	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib -L${MODQT5_LIBDIR}"
d65 2
d68 3
@


1.35
log
@Update to mkvtoolnix-8.0.0.

from brad (maintainer)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.34 2015/05/28 10:25:36 ajacoutot Exp $
@


1.34
log
@Bump after lang/gcc/4.9 became the default MODGCC4_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/05/27 21:18:48 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-7.9.0
a8 1
REVISION =	0
d52 1
a52 1
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib -L${LOCALBASE}/lib/qt5"
@


1.33
log
@Update to mkvtoolnix-7.9.0.

from brad (maintainer) with a few tweaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/04/11 20:26:10 brad Exp $
d9 1
@


1.32
log
@- Takeover as MAINTAINER
- Sort WANTLIB / LIB_DEPENDS / CONFIGURE_ARGS
- Remove unnecessary CONFIGURE_ARGS options
- Remove some LDFLAGS hacks
- Remove now unnecessary chunk of the autoconf patch
- Tidy up the Makefile a bit

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/03/11 11:35:44 espie Exp $
d5 1
a5 2
DISTNAME=	mkvtoolnix-4.0.0
REVISION=	3
d8 1
a8 1
EXTRACT_SUFX=	.tar.bz2
d18 1
a18 2
		bz2 c ebml expat lzo2 m magic matroska ogg pthread \
		stdc++ vorbis z
d20 3
a22 1
MODULES=	devel/gettext
d24 8
a31 3
LIB_DEPENDS=	archivers/bzip2 \
		archivers/lzo2 \
		audio/flac \
d35 2
a36 1
		multimedia/libmatroska
d38 1
a38 1
MAKE_FLAGS+=	V=1
d41 6
a46 3
USE_GMAKE=	Yes
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--with-boost-filesystem=boost_filesystem-mt \
d48 3
a50 1
		--with-boost-regex=boost_regex-mt
d52 1
a52 1
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib"
d58 1
a58 1
CONFIGURE_ARGS+= --disable-gui --disable-wxwidgets
d60 5
a64 4
LIB_DEPENDS+=	x11/wxWidgets>=2.8.10
WANTLIB+=	wx_base wx_base_net wx_base_odbc wx_base_xml wx_gtk2_adv \
		wx_gtk2_aui wx_gtk2_core wx_gtk2_dbgrid wx_gtk2_html \
		wx_gtk2_qa wx_gtk2_xrc wx_gtk2_richtext
d67 6
a72 1
NO_TEST=    Yes
d75 3
a77 20
	${INSTALL_DATA_DIR} ${PREFIX}/man/ja.po
	${INSTALL_DATA_DIR} ${PREFIX}/man/zh_CN.po
	${INSTALL_DATA_DIR} ${PREFIX}/man/man1
.for i in mkvextract mkvinfo mkvmerge mkvpropedit
	${INSTALL_PROGRAM} ${WRKBUILD}/src/$i ${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/doc/man/$i.1 ${PREFIX}/man/man1
	${INSTALL_DATA} ${WRKSRC}/doc/man/ja/$i.1 ${PREFIX}/man/ja.po
	${INSTALL_DATA} ${WRKSRC}/doc/man/zh_CN/$i.1 ${PREFIX}/man/zh_CN.po	
.endfor
.if !${FLAVOR:Mno_x11}
	${INSTALL_PROGRAM} ${WRKBUILD}/src/mmg/mmg ${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/doc/man/mmg.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/mkvtoolnix/images
	${INSTALL_DATA} ${WRKSRC}/doc/guide/en/mkvmerge-gui.* ${PREFIX}/share/mkvtoolnix
	${INSTALL_DATA} ${WRKSRC}/doc/guide/en/images/*.gif ${PREFIX}/share/mkvtoolnix/images
.endif
.for l in de ja nl ru uk zh_CN zh_TW
	${INSTALL_DATA_DIR} ${PREFIX}/share/locale/$l/LC_MESSAGES
	${INSTALL_DATA} ${WRKSRC}/po/$l.mo ${PREFIX}/share/locale/$l/LC_MESSAGES/mkvtoolnix.mo
.endfor
@


1.31
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/03/08 01:32:25 brad Exp $
d3 1
a3 1
COMMENT =	create, alter and inspect Matroska files
d5 5
a9 3
DISTNAME =	mkvtoolnix-4.0.0
CATEGORIES =	multimedia x11
REVISION =	2
d13 2
d16 1
a16 6
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =	boost_system-mt>=1.1 boost_regex-mt>=1.1 \
		boost_filesystem-mt>=1.1 \
		bz2>=10 c ebml expat FLAC>=9 lzo2 m magic>=2 matroska>=1.0 \
		ogg stdc++ vorbis>=8 z pthread
d18 3
a20 1
MASTER_SITES =	${HOMEPAGE}/sources/
d22 1
a22 1
EXTRACT_SUFX =	.tar.bz2
d24 1
a24 4
MODULES =	devel/gettext

LIB_DEPENDS =	audio/flac \
		archivers/bzip2 \
d26 1
a26 1
		multimedia/libmatroska \
d28 1
d30 1
a30 3
		devel/boost

MAKE_FLAGS +=	V=1
d32 1
a32 1
USE_GMAKE =	Yes
d34 4
a37 5
CONFIGURE_STYLE = gnu
CONFIGURE_ARGS += --enable-lzo \
		--enable-bz2 \
		--disable-qt \
		--with-flac \
d39 3
a41 7
		--with-boost-regex=boost_regex-mt \
		--with-boost-filesystem=boost_filesystem-mt
CONFIGURE_ENV =	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib \
		-lm -lstdc++ -pthread -liconv" \
		ac_cv_has_nl_langinfo=no
USE_GROFF =	Yes
d43 2
a44 2
FLAVORS =	no_x11
FLAVOR ?=
d47 1
a47 1
CONFIGURE_ARGS += --disable-gui --disable-wxwidgets
d49 2
a50 2
LIB_DEPENDS +=	x11/wxWidgets>=2.8.10
WANTLIB +=	wx_base wx_base_net wx_base_odbc wx_base_xml wx_gtk2_adv \
a52 1
CONFIGURE_ARGS += --enable-gui --enable-wxwidgets
d55 1
a55 1
NO_TEST =    Yes
@


1.30
log
@Update for newer Boost.

From Amit Kulkarni.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/02/09 14:49:51 sthen Exp $
a12 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d64 1
a64 1
NO_REGRESS =    Yes
@


1.29
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/03/08 12:13:01 ajacoutot Exp $
d7 1
a7 1
REVISION =	1
@


1.28
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/07/30 04:35:51 benoit Exp $
d57 1
a57 1
.if ${FLAVOR:L:Mno_x11}
d79 1
a79 1
.if !${FLAVOR:L:Mno_x11}
@


1.27
log
@- drop maintainership on it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/11/19 07:23:15 espie Exp $
d7 1
a7 1
REVISION =	0
@


1.26
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/07 20:15:42 espie Exp $
d7 1
a9 2

MAINTAINER =	Benoit Lecocq <benoit@@openbsd.org>
@


1.25
log
@LIB_DEPENDS -> WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/10/24 21:27:41 ajacoutot Exp $
d18 4
a21 3
WANTLIB =	boost_system-mt.>=1.1 boost_regex-mt.>=1.1 boost_filesystem-mt.>=1.1 \
		bz2.>=10 c ebml expat FLAC.>=9 lzo2 m magic.>=2 matroska.>=1.0 \
		ogg stdc++ vorbis.>=8 z pthread
d29 7
a35 7
LIB_DEPENDS =	::audio/flac \
		::archivers/bzip2 \
		::archivers/lzo2 \
		::multimedia/libmatroska \
		::audio/libvorbis \
		::devel/libmagic \
		::devel/boost
d61 1
a61 1
LIB_DEPENDS +=	:wxWidgets-gtk2->=2.8.10:x11/wxWidgets
@


1.24
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/10/18 21:25:07 espie Exp $
d60 4
a63 1
LIB_DEPENDS +=	wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_aui,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc,wx_gtk2_richtext:wxWidgets-gtk2->=2.8.10:x11/wxWidgets
@


1.23
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/07/17 22:52:50 benoit Exp $
a59 1
USE_X11 =	Yes
@


1.22
log
@- update mkvtoolnix to 4.0.0
- update patches
- use new WANTLIB/LIB_DEPENDS style

initial diff from brad, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/04/17 13:14:01 benoit Exp $
d52 1
@


1.21
log
@- unbreak port
- fix in configure from naddy@@

with tweaks and ok by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/04/05 20:27:03 benoit Exp $
d5 1
a5 2
DISTNAME =	mkvtoolnix-3.2.0
PKGNAME =	${DISTNAME}p0
d18 3
a20 1
WANTLIB =	c ebml expat m ogg stdc++ z pthread
d26 1
a26 2
MODULES +=	converters/libiconv
MODULES +=	devel/gettext
d28 7
a34 7
LIB_DEPENDS =	FLAC.>=7::audio/flac \
		bz2.>=10::archivers/bzip2 \
		lzo2::archivers/lzo2 \
		matroska:libmatroska->=0.8.1:multimedia/libmatroska \
		vorbis.>=5::audio/libvorbis \
		magic.>=1::devel/libmagic \
		boost_system-mt.>=1.1,boost_regex-mt.>=1.1,boost_filesystem-mt.>=1.1::devel/boost
d83 1
a83 1
.for l in de ja zh_CN zh_TW
@


1.20
log
@- update mkvtoolnix to 3.2.0
- update patches

with tweaks and ok by ajacoutot@@, thanks !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/12/23 12:11:29 benoit Exp $
d6 1
d19 1
a19 1
WANTLIB =	c ebml expat m ogg stdc++ z
d25 2
a26 1
MODULES =	converters/libiconv
d34 1
a34 1
		boost_regex-mt.>=1.1,boost_filesystem-mt.>=1.1::devel/boost
a38 1
USE_X11 =	Yes
d41 1
a41 1
CONFIGURE_ARGS = --enable-lzo \
d57 1
a57 1
CONFIGURE_ARGS += --disable-gui
d59 3
a61 4
WANTLIB +=	pthread
LIB_DEPENDS +=	wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc,wx_gtk2_aui,wx_gtk2_richtext:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
CONFIGURE_ARGS += --enable-gui \
		--enable-wxwidgets
d76 7
a86 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/mkvtoolnix/images
	${INSTALL_DATA} ${WRKSRC}/doc/guide/en/mkvmerge-gui.* ${PREFIX}/share/mkvtoolnix
	${INSTALL_DATA} ${WRKSRC}/doc/guide/en/images/*.gif ${PREFIX}/share/mkvtoolnix/images
@


1.19
log
@- update mkvtoolnix to 3.0.0
- regen PLIST
- update patch

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/07/24 14:37:23 sthen Exp $
d5 1
a5 1
DISTNAME =	mkvtoolnix-3.0.0
d25 1
a25 1
		
d32 1
a32 1
		boost_regex-mt.>=1::devel/boost
a39 1

d44 3
a46 1
		--with-boost-regex=boost_regex-mt
d65 18
@


1.18
log
@move to archivers/lzo2, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/06/09 20:30:14 benoit Exp $
d5 1
a5 2
DISTNAME =	mkvtoolnix-2.9.5
PKGNAME =	${DISTNAME}p0
d25 1
d40 1
d48 1
a48 1
		-lm -lstdc++ -pthread" \
@


1.17
log
@- update mkvtoolnix to 2.9.5
- change email maintainer
- update and regen patches

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/05/13 20:45:21 benoit Exp $
d6 1
d28 1
a28 1
		lzo.>=1::archivers/lzo \
@


1.16
log
@- reorg Makefile

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/05/13 13:02:17 benoit Exp $
d5 1
a5 1
DISTNAME =	mkvtoolnix-2.7.0
d10 1
a10 1
MAINTAINER =	Benoit Lecocq <blq@@arcane-labs.net>
@


1.15
log
@- update to mkvtoolnix 2.7.0

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/03/24 05:10:30 jakemsr Exp $
d3 1
a3 1
COMMENT=	create, alter and inspect Matroska files
d5 2
a6 2
DISTNAME=	mkvtoolnix-2.7.0
CATEGORIES=	multimedia x11
d8 1
a8 1
EXTRACT_SUFX=	.tar.bz2
d10 1
a10 1
HOMEPAGE=	http://www.bunkus.org/videotools/mkvtoolnix/
d12 5
a16 1
MAINTAINER=	Benoit Lecocq <blq@@arcane-labs.net>
d18 1
a18 5
# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d20 1
a20 1
MASTER_SITES=	${HOMEPAGE}/sources/
d22 1
a22 1
WANTLIB=	c ebml expat m ogg stdc++ z
d24 2
a25 2
MODULES=	converters/libiconv
LIB_DEPENDS=	FLAC.>=7::audio/flac \
d33 1
a33 1
MAKE_FLAGS+=	V=1
d35 2
a36 3
NO_REGRESS=	Yes
USE_GMAKE=	Yes
USE_X11=	Yes
d38 2
a39 6
CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib \
			-lm -lstdc++ -pthread" \
		ac_cv_has_nl_langinfo=no
CONFIGURE_ARGS=	--enable-lzo \
d44 4
d49 2
a50 2
FLAVORS=	no_x11
FLAVOR?=
d53 1
a53 1
CONFIGURE_ARGS+=--disable-gui
d55 3
a57 3
WANTLIB+=	pthread
LIB_DEPENDS+=	wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc,wx_gtk2_aui,wx_gtk2_richtext:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
CONFIGURE_ARGS+=--enable-gui \
d60 2
@


1.14
log
@use /dev/arandom instead of /dev/urandom

ok Benoit Lecocq (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/03/05 12:03:58 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mkvtoolnix-2.5.2
PKGNAME=	${DISTNAME}p0
@


1.13
log
@- update mkvtoolnix to version 2.5.2

from Benoit Lecocq (maintainer), thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/02/15 12:14:25 ajacoutot Exp $
d6 1
@


1.12
log
@- update mkvtoolnix to version 2.4.2

from Benoit Lecocq, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/01/16 07:52:50 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-2.4.2
@


1.11
log
@- new MAINTAINER: Benoit Lecocq
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/12/05 20:48:05 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mkvtoolnix-2.4.1
PKGNAME=	${DISTNAME}p0
@


1.10
log
@- bugfix update to version 2.4.1
fixes some audio/video sync issues amongst others
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/10/12 12:22:10 ajacoutot Exp $
d6 1
d13 1
a13 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.9
log
@- update to mkvtoolnix 2.4.0
- base64tool has been removed as mkvmerge can now read binary in hex
several bugfixes and enhancements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/09/09 07:27:49 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-2.4.0
@


1.8
log
@- update to mkvtoolnix-2.3.0
several bugfixes and enhancements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/03/15 10:11:34 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mkvtoolnix-2.3.0
@


1.7
log
@- update to version 2.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/11/17 20:39:02 steven Exp $
d3 1
a3 1
COMMENT=	set of tools to create, alter and inspect Matroska files
d5 1
a5 1
DISTNAME=	mkvtoolnix-2.2.0
d22 1
a22 1
WANTLIB=	c ebml m ogg stdc++ z expat
a25 1
		pcre.>=1,pcrecpp.>=2::devel/pcre \
d30 2
a31 1
		magic.>=1::devel/libmagic
d38 1
a39 1

d41 2
a42 1
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
a43 1

d47 2
a48 1
		--with-flac
@


1.6
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/08/27 11:36:21 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	mkvtoolnix-2.1.0
PKGNAME=	${DISTNAME}p0
d56 1
a56 1
LIB_DEPENDS+=	wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc,wx_gtk2_aui:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
@


1.5
log
@- small update to mkvtoolnix-2.1.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/04/30 10:49:22 ajacoutot Exp $
d6 1
d57 1
a57 1
LIB_DEPENDS+=	wx_base,wx_base_net,wx_base_odbc,wx_base_xml,wx_gtk2_adv,wx_gtk2_core,wx_gtk2_dbgrid,wx_gtk2_html,wx_gtk2_qa,wx_gtk2_xrc:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
@


1.4
log
@- USE_X11 is needed whatever the FLAVOR
no package change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/04/30 10:09:14 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"set of tools to create, alter and inspect Matroska files"
d5 1
a5 2
DISTNAME=	mkvtoolnix-2.0.2
PKGNAME=	${DISTNAME}p0
d46 1
d57 2
a58 1
CONFIGURE_ARGS+=--enable-gui
@


1.3
log
@- use xenocara expat

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/03/21 12:02:45 ajacoutot Exp $
d38 1
a54 1
USE_X11=	Yes
@


1.2
log
@- update to mkvtoolnix-2.0.2

ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/03/19 12:23:42 ajacoutot Exp $
d6 1
d23 1
a23 1
WANTLIB=	c ebml m ogg stdc++ z
d32 1
a32 2
		magic.>=1::devel/libmagic \
		expat.>=6::textproc/expat
d40 2
a41 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME=	mkvtoolnix-2.0.0
d29 1
a29 1
		matroska::multimedia/libmatroska \
@


1.1.1.1
log
@Import mkvtoolnix-2.0.0

MKVToolnix: cross-platform tools for Matroska.
With these tools one can get information about (mkvinfo) Matroska files,
extract tracks/data from (mkvextract) Matroska files and create
(mkvmerge) Matroska files from other media files.

Available flavors:
        no_x11 - do not build the wxGTK2 frontend

ok jolan@@ simon@@
@
text
@@
