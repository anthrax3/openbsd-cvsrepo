head	1.2;
access;
symbols
	Brad_20090718:1.1.1.1 Brad:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2010.01.15.09.07.27;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2009.07.18.08.53.08;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.07.18.08.53.08;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove workarounds now that _SC_NPROCESSORS_ONLN/_SC_NPROCESSORS_CONF
have been added to libc. Needs new libc before building. From Brad; ok jasper
@
text
@$OpenBSD: patch-schroedinger_schroasync-pthread_c,v 1.1 2009/07/18 08:53:08 sthen Exp $
--- schroedinger/schroasync-pthread.c.orig	Thu Jul  2 15:32:36 2009
+++ schroedinger/schroasync-pthread.c	Thu Jul  2 15:35:33 2009
@@@@ -20,6 +20,12 @@@@
 #include <sys/sysctl.h>
 #endif
 
+#if defined(__OpenBSD__)
+#include <sys/param.h>
+#include <sys/sysctl.h>
+#include <machine/cpu.h>
+#endif
+
 struct _SchroAsync {
   int n_threads;
   int n_threads_running;
@@@@ -95,7 +101,7 @@@@ schro_async_new(int n_threads,
       if (s) {
         n_threads = atoi(s);
       }
-#elif defined(__APPLE__)
+#elif defined(__APPLE__) || defined(__OpenBSD__)
       {
         int    mib[]    = {CTL_HW, HW_NCPU};
         size_t dataSize =  sizeof(int);
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import multimedia/schroedinger, from Brad.

Schroedinger is a high-speed Dirac codec being developed by Fluendo
in partnership with the BBC. The main developer is David Schleef, who
developed the liboil optimisation library which is heavily used in
the project.
@
text
@@
