head	1.29;
access;
symbols
	OPENBSD_6_0:1.28.0.4
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.28.0.2
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.27.0.8
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.27.0.4
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.27.0.2
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.26.0.4
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.25.0.2
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.9.0.2
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.7.0.6
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.4
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.2
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	steven-20070127:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.29
date	2016.09.13.16.12.14;	author naddy;	state Exp;
branches;
next	1.28;
commitid	LsYahYRn03mp1yEc;

1.28
date	2015.08.17.19.10.12;	author sthen;	state Exp;
branches;
next	1.27;
commitid	4CippZtWcqcVBaoK;

1.27
date	2014.04.06.20.13.52;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.11.11.35.43;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2013.01.14.02.15.46;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2012.09.13.06.04.46;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2012.09.12.07.07.21;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.02.16.22.35.57;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.08.21.08.46.19;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.07.07.01.06.59;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.06.24.11.17.05;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2011.04.18.23.27.31;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.29.23.22.17;	author jakemsr;	state Exp;
branches;
next	1.16;

1.16
date	2011.01.16.19.53.17;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2011.01.02.07.42.01;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.19.07.23.13;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.24.21.40.38;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.18.21.25.07;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.08.25.23.27.21;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.26.23.18.45;	author jakemsr;	state Exp;
branches;
next	1.9;

1.9
date	2009.07.19.22.49.12;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.07.19.12.42.04;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2008.07.09.02.13.01;	author jakemsr;	state Exp;
branches;
next	1.6;

1.6
date	2008.06.01.08.21.15;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.16.03.24.28;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2007.07.25.14.26.24;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.25.16.00.13;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.02.23.42.41;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.27.17.56.14;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.27.17.56.14;	author steven;	state Exp;
branches;
next	;


desc
@@


1.29
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.28 2015/08/17 19:10:12 sthen Exp $

COMMENT=	re-encode many media file formats to Ogg Theora

N=		ffmpeg2theora
DISTNAME=	${N}-0.29
REVISION=	3
CATEGORIES=	multimedia
EXTRACT_SUFX=	.tar.bz2

HOMEPAGE=	http://www.v2v.cc/~j/${N}/

# GPLv2+
PERMIT_PACKAGE_CDROM=	patents in FFmpeg
PERMIT_PACKAGE_FTP=	Yes

WANTLIB += avcodec avdevice avfilter avformat avutil c iconv m ogg postproc
WANTLIB += swscale theoradec theoraenc vorbis vorbisenc
WANTLIB += avresample opus pthread speex swresample vpx x264 x265

MASTER_SITES=	${HOMEPAGE}downloads/

LIB_DEPENDS=	converters/libiconv \
		graphics/ffmpeg>=20121026 \
		audio/libvorbis \
		multimedia/libtheora

MODULES=	devel/scons

MODSCONS_FLAGS=	libkate=0

NO_TEST=	Yes

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/${N} ${PREFIX}/bin
	${INSTALL_MAN} ${WRKBUILD}/${N}.1 ${PREFIX}/man/man1

.include <bsd.port.mk>
@


1.28
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/04/06 20:13:52 brad Exp $
d17 1
a17 1
WANTLIB += avcodec avdevice avfilter avformat avutil c m ogg postproc
d23 2
a24 1
LIB_DEPENDS=	graphics/ffmpeg>=20121026 \
d28 1
a28 1
MODULES=	devel/scons converters/libiconv
@


1.27
log
@Remove the use of deprecated API for FFmpeg.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/03/11 11:35:43 espie Exp $
d7 1
a7 1
REVISION=	2
d19 1
@


1.26
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/01/14 02:15:46 brad Exp $
d7 1
a7 1
REVISION=	1
@


1.25
log
@Update after FFmpeg 20121026 update.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/09/13 06:04:46 ajacoutot Exp $
a15 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d30 1
a30 1
NO_REGRESS=	Yes
@


1.24
log
@With newer FFmpeg the use of APPEND_LINKFLAGS is no longer necessary.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/09/12 07:07:21 ajacoutot Exp $
d7 1
a7 1
REVISION=	0
d24 1
a24 1
LIB_DEPENDS=	graphics/ffmpeg>=20120610p1 \
@


1.23
log
@Update to ffmpeg2theora-0.29.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/02/16 22:35:57 ajacoutot Exp $
d7 1
d24 1
a24 1
LIB_DEPENDS=	graphics/ffmpeg>=20110408p5 \
d30 1
a30 2
MODSCONS_FLAGS=	libkate=0 \
		APPEND_LINKFLAGS="-L${X11BASE}/lib"
@


1.22
log
@Remove USE_GROFF, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/08/21 08:46:19 ajacoutot Exp $
d6 1
a6 1
DISTNAME=	${N}-0.28
d12 1
a12 1
# GPLv3
d18 2
a19 4
WANTLIB += X11 Xext Xfixes avcodec avdevice avformat avutil bz2
WANTLIB += c gsm m mp3lame ogg orc-0.4 postproc pthread
WANTLIB += schroedinger-1.0 sndio speex swscale theoradec theoraenc
WANTLIB += vorbis vorbisenc vpx x264 z
d29 2
a30 1
MODSCONS_FLAGS=	libkate=0
@


1.21
log
@Update to ffmpeg2theora 0.28.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/07/07 01:06:59 ajacoutot Exp $
d32 1
a32 1
USE_GROFF=	Yes
@


1.20
log
@Remove some duplicate wantlibs, use the libiconv MODULE where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/06/24 11:17:05 sthen Exp $
d3 1
a3 1
COMMENT=	reencode many media file formats to Ogg Theora
d6 1
a6 2
DISTNAME=	${N}-0.27
REVISION=	4
d13 1
a13 1
PERMIT_PACKAGE_CDROM=	patents in ffmpeg
d25 1
a25 1
LIB_DEPENDS=	graphics/ffmpeg>=20080620p10 \
d33 1
@


1.19
log
@Chase ffmpeg dep changes. Mostly from Brad ok dcoppa@@, plus opencv from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/04/18 23:27:31 sthen Exp $
d7 1
a7 1
REVISION=	3
d20 1
a20 1
WANTLIB += c gsm iconv m mp3lame ogg orc-0.4 postproc pthread
d30 1
a30 1
MODULES=	devel/scons
@


1.18
log
@sync WANTLIB (re: ffmpeg update), from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/03/29 23:22:17 jakemsr Exp $
d7 1
a7 1
REVISION=	2
d20 1
a20 1
WANTLIB += c faac gsm iconv m mp3lame ogg orc-0.4 postproc pthread
@


1.17
log
@more ports that need faad removed from WANTLIB after ffmpeg update,
as noted on ports@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/01/16 19:53:17 naddy Exp $
d7 1
a7 1
REVISION=	1
d19 4
a22 5
WANTLIB += X11 Xext Xfixes bz2 c gsm iconv m ogg pthread
WANTLIB += faac mp3lame orc-0.4 sndio speex
WANTLIB += schroedinger-1.0 x264 z avcodec avdevice avformat
WANTLIB += avutil postproc swscale vorbis vorbisenc
WANTLIB += theora theoradec theoraenc
@


1.16
log
@drop maintainership; on behalf of mgrimm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/01/02 07:42:01 ajacoutot Exp $
d7 1
a7 1
REVISION=	0
d20 1
a20 1
WANTLIB += faac faad mp3lame orc-0.4 sndio speex
@


1.15
log
@Update to ffmpeg2theora-0.27.

from Brad, maintainer time-out.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/19 07:23:13 espie Exp $
d7 1
a11 2

MAINTAINER=	Moritz Grimm <mdgrimm@@gmx.net>
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/10/24 21:40:38 sthen Exp $
d6 1
a6 2
DISTNAME=	${N}-0.26
REVISION=	0
@


1.13
log
@lib_depends, revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/10/18 21:25:07 espie Exp $
d29 3
a31 3
LIB_DEPENDS=	:ffmpeg->=20080620p10:graphics/ffmpeg \
		::audio/libvorbis \
		::multimedia/libtheora
@


1.12
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/08/25 23:27:21 sthen Exp $
d21 5
a25 3
WANTLIB=		X11 Xext Xfixes bz2 c gsm iconv m ogg pthread \
			faac faad mp3lame orc-0.4 sndio speex \
			schroedinger-1.0 x264 z
d29 3
a31 3
LIB_DEPENDS=	avcodec.>=13.1,avdevice.>=3.0,avformat.>=12,avutil.>=6,postproc.>=13,swscale.>=1:ffmpeg->=20080620p10:graphics/ffmpeg \
		vorbis.>=5,vorbisenc.>=2::audio/libvorbis \
		theora.>=2,theoradec.>=1,theoraenc.>=1::multimedia/libtheora
d36 1
a36 1
USE_GROFF =	Yes
@


1.11
log
@- chase the library change in multimedia/schroedinger; oil->orc
- add various other missing WANTLIB (and LIB_DEPENDS in some cases)
- while there move PKGNAME=..pX to REVISION, and move some ports
to new-style LIB_DEPENDS

original diff from Brad, extensive checking by me (clean build of everything
related to liboil).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/05/26 23:18:45 jakemsr Exp $
d34 1
@


1.10
log
@update to ffmpeg2theora-0.26, for newer ffmpeg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/07/19 22:49:12 sthen Exp $
d7 1
d22 1
a22 1
			faac faad mp3lame oil-0.3 sndio speex \
@


1.9
log
@set the pkgspec for LIB_DEPENDS on ffmpeg to a version with schroedinger
included, so the tools know that old ffmpeg versions won't satisfy the
dependencies listed in WANTLIB.

this way, attempting to install these packages with old ffmpeg will
no longer give you a cryptic error message as seen by dhill@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/07/19 12:42:04 sthen Exp $
d5 2
a6 2
DISTNAME=	ffmpeg2theora-0.19
PKGNAME=	${DISTNAME}p3
d10 1
a10 1
HOMEPAGE=	http://www.v2v.cc/~j/ffmpeg2theora/
d14 1
a14 1
# GPL
d20 3
a22 2
WANTLIB=		bz2 c m ogg pthread a52 faac faad mp3lame x264 z \
			oil-0.3 schroedinger-1.0
d24 1
a24 1
MASTER_SITES=	${HOMEPAGE}
d26 1
a26 1
LIB_DEPENDS=	avcodec.>=13.1,avformat.>=12,avutil.>=6,swscale.>=1:ffmpeg->=20080620p10:graphics/ffmpeg \
d28 1
a28 1
		theora.>=2::multimedia/libtheora
d30 1
a30 2
SEPARATE_BUILD=	flavored
USE_LIBTOOL=	Yes
d32 5
a36 2
CONFIGURE_STYLE= gnu
CONFIGURE_ENV+=	CPPFLAGS=-pthread LDFLAGS=-pthread
@


1.8
log
@add schroedinger/oil WANTLIB, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/07/09 02:13:01 jakemsr Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d25 1
a25 1
LIB_DEPENDS=	avcodec.>=8,avformat.>=8,avutil.>=2,swscale.>=1::graphics/ffmpeg \
@


1.7
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* add @@bin markers in PLISTs
* bump PKGNAMEs

feedback/ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/06/01 08:21:15 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d19 3
a21 1
WANTLIB=		bz2 c m ogg pthread a52 faac faad mp3lame x264 z
@


1.6
log
@sync WANTLIB, bump package version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/16 03:24:28 merdely Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d19 1
a19 1
WANTLIB=		c m ogg pthread a52 faac faad mp3lame x264 z
d23 1
a23 1
LIB_DEPENDS=	avcodec.>=8,avformat.>=8,avutil.>=2::graphics/ffmpeg \
@


1.5
log
@Remove surrounding quotes in COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/07/25 14:26:24 steven Exp $
d6 1
d19 1
a19 1
WANTLIB=		c m ogg pthread
@


1.4
log
@update to 0.19

from maintainer Moritz Grimm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/05/25 16:00:13 jakemsr Exp $
d14 1
a14 1
PERMIT_PACKAGE_CDROM=	"patents in ffmpeg"
@


1.3
log
@WANTLIB changes after graphics/ffmpeg update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/03/02 23:42:41 kurt Exp $
d3 1
a3 1
COMMENT=	"reencode many media file formats to Ogg Theora"
d5 1
a5 2
DISTNAME=	ffmpeg2theora-0.17
PKGNAME=	${DISTNAME}p1
d11 1
a11 1
MAINTAINER=	Moritz Grimm <gtgbr@@gmx.net>
@


1.2
log
@adjust LIB_DEPENDS due to disabling swscale support in ffmpeg.
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/01/27 17:56:14 steven Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d19 1
a19 1
WANTLIB=		c faac faad m mp3lame ogg ossaudio pthread z
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d23 1
a23 1
LIB_DEPENDS=	avcodec.>=8,avformat.>=8,avutil.>=2,swscale::graphics/ffmpeg \
@


1.1.1.1
log
@import ffmpeg2theora 0.17

ffmpeg2theora is a simple command line tool to convert media files to
.ogg with Theora video and Vorbis audio streams. It supports reading any
file format that ffmpeg can decode.

from Moritz Grimm <mlist at scapa.dnsalias.net>
@
text
@@
