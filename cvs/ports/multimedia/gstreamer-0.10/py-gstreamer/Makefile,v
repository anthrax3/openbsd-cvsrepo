head	1.27;
access;
symbols
	OPENBSD_6_1:1.27.0.2
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.26.0.6
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.26.0.4
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.25.0.4
	OPENBSD_5_7_BASE:1.25
	OPENBSD_5_6:1.25.0.2
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.24.0.4
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.24.0.2
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.22.0.2
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.21.0.2
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.3.0.4
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	ajacoutot_20080122:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2016.10.26.12.35.08;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	KLOhQ3DPI5LztBTS;

1.26
date	2015.04.21.18.51.25;	author sthen;	state Exp;
branches;
next	1.25;
commitid	ptMCPiyuhL0JiHRZ;

1.25
date	2014.04.01.16.31.40;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.05.22.07.18.01;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2013.03.11.11.35.43;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2012.09.06.12.37.58;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.02.21.15.26.58;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.02.21.11.28.01;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.10.29.18.44.48;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.16.10.31.23;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2011.07.07.23.18.43;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.06.08.18.18.13;	author rpointel;	state Exp;
branches;
next	1.15;

1.15
date	2011.03.07.19.46.06;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.12.13.06.37.06;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.12.02.14.05.02;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.19.07.23.13;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.24.15.53.55;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.08.30.17.46.56;	author fgsch;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.22.19.22.08;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.17.15.30.18;	author giovanni;	state Exp;
branches;
next	1.7;

1.7
date	2010.06.02.13.08.32;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.11.29.09.18.42;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.11.14.37.21;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.23.19.21.34;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.21.21.03.56;	author deanna;	state Exp;
branches;
next	1.2;

1.2
date	2008.05.13.15.11.51;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2008.01.22.08.53.41;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.01.22.08.53.41;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.27
log
@http -> https
@
text
@# $OpenBSD: Makefile,v 1.26 2015/04/21 18:51:25 sthen Exp $

COMMENT=		Python bindings for GStreamer

V=			0.10.22
DISTNAME=		gst-python-${V}
PKGNAME=		py-gstreamer-${V}
REVISION=		6

HOMEPAGE=		http://gstreamer.freedesktop.org/modules/gst-python.html

MASTER_SITES =		${MASTER_SITE_GST:=gst-python/}


# check-lib-depends(1) list them as extra, but they are dlopened

WANTLIB += ${MODPY_WANTLIB}
WANTLIB += ffi glib-2.0 gmodule-2.0 gobject-2.0 gstaudio-0.10
WANTLIB += gstbase-0.10 gstcontroller-0.10 gstdataprotocol-0.10
WANTLIB += gstinterfaces-0.10 gstnet-0.10 gstpbutils-0.10 gstreamer-0.10
WANTLIB += gsttag-0.10 gstvideo-0.10 gthread-2.0 lzma m orc-0.4 pcre
WANTLIB += pthread util xml2 z

MODULES=		lang/python

BUILD_DEPENDS=		x11/py-gtk2
RUN_DEPENDS=		x11/py-gtk2 \
			textproc/libxml,-python
LIB_DEPENDS=		${P}/plugins-base

TEST_DEPENDS=	${P}/plugins-good

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--disable-shave

post-install:
	@@cd ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/ && \
		${MODPY_BIN} -OOOO -c 'import pygst' && \
		${MODPY_BIN} -c 'import pygst'
	rm ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/gst-${VERSION}/gst/*.{a,la}
	rm ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/*.{a,la}
	rm ${PREFIX}/lib/gstreamer-${VERSION}/*.{a,la}

.include <bsd.port.mk>
@


1.26
log
@add some simple missing lzma WANTLIBs (crept in via libxml)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/04/01 16:31:40 ajacoutot Exp $
d8 1
a8 1
REVISION=		5
@


1.25
log
@Seems I forgot that part in previous rampage...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/05/22 07:18:01 ajacoutot Exp $
d8 1
a8 1
REVISION=		4
d14 4
d21 2
a22 5
WANTLIB += gsttag-0.10 gstvideo-0.10 gthread-2.0 m orc-0.4 pcre
WANTLIB += pthread xml2 z

# check-lib-depends(1) list them as extra, but they are dlopened
WANTLIB += ${MODPY_WANTLIB} util
@


1.24
log
@-fprofile-arcs works fine nowadays.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/03/11 11:35:43 espie Exp $
d8 1
a8 1
REVISION=		3
d39 3
a41 3
	rm ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/gst-${VERSION}/gst/*.la \
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages/*.la \
		${PREFIX}/lib/gstreamer-${VERSION}/*.la
@


1.23
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/09/06 12:37:58 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
d33 1
a33 2
CONFIGURE_ARGS=		--disable-gcov \
			--disable-shave
@


1.22
log
@HUGE cleanup to be in synced with upcoming gstreamer1.
Add DIST_SUBDIR, req. by jasper@@
Merge -cdda into -main for plugins-base.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/02/21 15:26:58 ajacoutot Exp $
d30 1
a30 1
REGRESS_DEPENDS=	${P}/plugins-good
@


1.21
log
@Load libutil along with libpython to prevent undefined symbols from
openpty().
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/02/21 11:28:01 ajacoutot Exp $
d3 1
a3 1
COMMENT =		Python bindings for GStreamer
d5 4
a8 4
V =			0.10.22
DISTNAME =		gst-python-$V
PKGNAME =		py-gstreamer-$V
REVISION =		1
d10 1
a10 1
HOMEPAGE =		http://gstreamer.freedesktop.org/modules/gst-python.html
d18 1
a18 1
WANTLIB += xml2 z
d23 1
a23 2
MODULES =		devel/gettext \
			lang/python
d25 2
a26 2
BUILD_DEPENDS =		x11/py-gtk2
RUN_DEPENDS =		x11/py-gtk2 \
d28 1
a28 1
LIB_DEPENDS =		$P/plugins-base
d30 1
a30 1
REGRESS_DEPENDS =	$P/plugins-good
d32 2
a33 6
# don't heritate from Makefile.inc
# needed for the "regress" target
SEPARATE_BUILD =	No

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS =	--disable-gcov \
d40 3
@


1.20
log
@Sync WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/10/29 18:44:48 ajacoutot Exp $
d8 1
a8 1
REVISION =		0
d19 3
@


1.19
log
@Update to py-gstreamer-0.10.22.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/09/16 10:31:23 espie Exp $
d8 1
d17 2
a18 1
WANTLIB += gsttag-0.10 gstvideo-0.10 gthread-2.0 m pcre xml2 z
@


1.18
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/07/07 23:18:43 ajacoutot Exp $
d5 1
a5 1
V =			0.10.21
a7 1
REVISION =		2
d13 4
a16 5
WANTLIB =		glib-2.0 gmodule-2.0 gobject-2.0 gstbase-0.10 \
			gstcontroller-0.10 gstdataprotocol-0.10 gstnet-0.10 \
			gstreamer-0.10 gthread-2.0 gstpbutils-0.10 \
			m pcre xml2 z gstinterfaces-0.10 gstaudio-0.10 \
			gsttag-0.10 gstvideo-0.10
@


1.17
log
@Reality is hard but one has to accept it... take maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/06/08 18:18:13 rpointel Exp $
d8 1
a8 1
REVISION =		1
@


1.16
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/03/07 19:46:06 ajacoutot Exp $
d8 1
a8 1
REVISION =		0
@


1.15
log
@Update to py-gstreamer-0.10.21.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/12/13 06:37:06 ajacoutot Exp $
d8 1
@


1.14
log
@Unbreak dlopening this module by actually patching the right file.

breakage also reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/12/02 14:05:02 ajacoutot Exp $
d5 1
a5 1
V =			0.10.20
a7 1
REVISION =		0
@


1.13
log
@Update to py-gstreamer-0.10.20.
Relase notes available at:
 http://gstreamer.freedesktop.org/releases/gst-python/0.10.20.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/19 07:23:13 espie Exp $
d8 1
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/24 15:53:55 sthen Exp $
d5 1
a5 1
V =			0.10.19
a7 1
REVISION =		0
d16 1
a16 1
			m pcre xml2 z util gstinterfaces-0.10 gstaudio-0.10 \
a17 1
WANTLIB += ${MODPY_WANTLIB}
d25 1
a25 2
LIB_DEPENDS =		$P/plugins-base \
			${MODPY_LIB_DEPENDS}
@


1.11
log
@Add MODPY_WANTLIB, adjust MODPY_LIB_DEPENDS to new-style LIB_DEPENDS,
update all ports to match. Plists don't change -> no bump.
Looks ok to jasper.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/08/30 17:46:56 fgsch Exp $
d24 4
a27 4
BUILD_DEPENDS =		::x11/py-gtk2
RUN_DEPENDS =		::x11/py-gtk2 \
			:py-libxml-*:textproc/libxml,-python
LIB_DEPENDS =		::$P/plugins-base \
d30 1
a30 1
REGRESS_DEPENDS =	::$P/plugins-good
@


1.10
log
@Bump revision after python's default change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/07/22 19:22:08 ajacoutot Exp $
d19 1
@


1.9
log
@Update to py-gstreamer-0.10.19.
Convert to new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/06/17 15:30:18 giovanni Exp $
d8 1
@


1.8
log
@
Update to 0.10.18
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/06/02 13:08:32 ajacoutot Exp $
d5 1
a5 1
V =			0.10.18
d16 2
a17 1
			m pcre xml2 z util
d25 1
a25 1
LIB_DEPENDS =		gstinterfaces-0.10,gstaudio-0.10,gsttag-0.10,gstvideo-0.10::$P/plugins-base \
@


1.7
log
@Move --disable-shave were supported.
no binary change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/11/29 09:18:42 ajacoutot Exp $
d5 1
a5 1
V =			0.10.17
@


1.6
log
@Major update to py-gstreamer-0.10.17.
Months (years?) of changes, refer to the source for changelog.

tested on a bulk by jasper@@
feedback and sparc64+macppc testing from landry@@

"commitski" jasper, ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/04/11 14:37:21 ajacoutot Exp $
d34 2
a35 1
CONFIGURE_ARGS =	--disable-gcov
@


1.5
log
@GStreamer configure script does not set --disable-debug by default and
for a good reason. One of them being that the gstdebug.so plugin is
actually needed by other apps.

gstreamer,-main: move some files from -main to -frontend ; fix dependencies

Regen all PLISTs and bump all PKGNAMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/03/23 19:21:34 jasper Exp $
d3 1
a3 1
COMMENT =		Python bindings for gstreamer
d5 1
a5 1
V =			0.10.11
d7 1
a7 1
PKGNAME =		py-gstreamer-$Vp2
d16 1
a16 1
			m pcre xml2 z
d18 2
a19 1
MODULES =		devel/gettext
d24 2
a25 1
LIB_DEPENDS =		gstinterfaces-0.10::$P/plugins-base
@


1.4
log
@- more missing bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/06/21 21:03:56 deanna Exp $
d7 1
a7 1
PKGNAME =		py-gstreamer-$Vp1
@


1.3
log
@Enable the debugging subsystem.

Discussed with ajacoutot@@ who did not object.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/05/13 15:11:51 espie Exp $
d7 1
a7 1
PKGNAME =		py-gstreamer-$Vp0
@


1.2
log
@update to recent gstreamer + plugins. Some breakage might occur, it will
be dealt with afterwards.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/01/22 08:53:41 ajacoutot Exp $
d7 1
a7 1
PKGNAME =		py-gstreamer-$V
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=	Python bindings for gstreamer
d5 3
a7 3
V=		0.10.9
DISTNAME=	gst-python-$V
PKGNAME=	py-gstreamer-$V
d9 1
a9 1
HOMEPAGE=	http://gstreamer.freedesktop.org/modules/gst-python.html
d11 1
a11 1
MASTER_SITES=	${MASTER_SITE_GST:=gst-python/}
d13 4
a16 3
WANTLIB=	glib-2.0 gmodule-2.0 gobject-2.0 gstbase-0.10 gstcontroller-0.10 \
		gstdataprotocol-0.10 gstnet-0.10 gstreamer-0.10 gthread-2.0 \
		m pcre xml2 z
d18 1
a18 1
MODULES=	devel/gettext
d20 4
a23 4
BUILD_DEPENDS=	::x11/py-gtk2
RUN_DEPENDS=	::x11/py-gtk2 \
		:py-libxml-*:textproc/libxml,-python
LIB_DEPENDS=	gstinterfaces-0.10::multimedia/gstreamer-0.10/plugins-base
d25 1
a25 1
REGRESS_DEPENDS=::multimedia/gstreamer-0.10/plugins-good
d29 1
a29 1
SEPARATE_BUILD=	No
d31 2
a32 2
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--disable-gcov
@


1.1.1.1
log
@Import py-gstreamer-0.10.9

gst-python provides a convenient wrapper for the GStreamer library for
use in Python programs, and takes care of many of the boring details
such as managing memory and type casting.


Joint work with jasper@@
ok jasper@@
@
text
@@
