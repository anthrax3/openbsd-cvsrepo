head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2014.04.18.08.54.13;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.02.21.15.26.26;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2012.02.21.13.38.22;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Fix pushed upstream.
@
text
@$OpenBSD$

From 3e24bbefba9889c621d35234143271d6f0453326 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@gnome.org>
Date: Wed, 09 Apr 2014 14:44:07 +0000
Subject: libs: g-ir-scanner: do not hardcode libtool path

--- gst/Makefile.in.orig	Fri Apr 18 10:43:59 2014
+++ gst/Makefile.in	Fri Apr 18 10:44:06 2014
@@@@ -1793,7 +1793,7 @@@@ Android.mk: Makefile.am
 @@HAVE_INTROSPECTION_TRUE@@		--include=GObject-2.0 \
 @@HAVE_INTROSPECTION_TRUE@@		--include=GModule-2.0 \
 @@HAVE_INTROSPECTION_TRUE@@		--include=libxml2-2.0 \
-@@HAVE_INTROSPECTION_TRUE@@		--libtool="$(top_builddir)/libtool" \
+@@HAVE_INTROSPECTION_TRUE@@		--libtool="${LIBTOOL}" \
 @@HAVE_INTROSPECTION_TRUE@@		--pkg glib-2.0 \
 @@HAVE_INTROSPECTION_TRUE@@		--pkg gobject-2.0 \
 @@HAVE_INTROSPECTION_TRUE@@		--pkg gmodule-no-export-2.0 \
@


1.2
log
@Better leave gstpython itself deals with libutil.
@
text
@d1 1
a1 1
$OpenBSD: patch-gst_Makefile_in,v 1.1 2012/02/21 13:38:22 ajacoutot Exp $
d3 4
a6 2
Needed for loading libgstpython.so:
/usr/local/lib/libpythonX.Y.so.X.Y: undefined symbol 'forkpty'
d8 11
a18 11
--- gst/Makefile.in.orig	Tue Feb 21 14:18:54 2012
+++ gst/Makefile.in	Tue Feb 21 14:19:23 2012
@@@@ -669,7 +669,7 @@@@ libgstreamer_@@GST_MAJORMINOR@@_la_LIBADD = \
 	$(LIBM)
 
 libgstreamer_@@GST_MAJORMINOR@@_la_LDFLAGS = \
-	$(GST_LIB_LDFLAGS) $(GST_ALL_LDFLAGS) $(GST_LT_LDFLAGS)
+	$(GST_LIB_LDFLAGS) $(GST_ALL_LDFLAGS) $(GST_LT_LDFLAGS) -lutil
 
 libgstreamer_@@GST_MAJORMINOR@@includedir = $(includedir)/gstreamer-@@GST_MAJORMINOR@@/gst
 gst_headers = \
@


1.1
log
@Link libgstreamer with libutil to prevent undefined symbols when
dlopening libgstpython.so.
@
text
@d1 1
a1 1
$OpenBSD$
@

