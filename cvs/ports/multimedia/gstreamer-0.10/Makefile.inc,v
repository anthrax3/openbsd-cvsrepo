head	1.35;
access;
symbols
	OPENBSD_6_1:1.34.0.2
	OPENBSD_6_1_BASE:1.34
	OPENBSD_6_0:1.33.0.2
	OPENBSD_6_0_BASE:1.33
	OPENBSD_5_9:1.31.0.4
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.31.0.6
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.31.0.2
	OPENBSD_5_7_BASE:1.31
	OPENBSD_5_6:1.28.0.2
	OPENBSD_5_6_BASE:1.28
	OPENBSD_5_5:1.27.0.4
	OPENBSD_5_5_BASE:1.27
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.24.0.2
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.21.0.2
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.4.0.4
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.6
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.4
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	new:1.1.1.1
	gstreamer:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2017.09.12.14.15.03;	author naddy;	state Exp;
branches;
next	1.34;
commitid	uYQ71cFezfILAvsx;

1.34
date	2016.10.26.12.35.07;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	KLOhQ3DPI5LztBTS;

1.33
date	2016.03.19.15.47.04;	author naddy;	state Exp;
branches;
next	1.32;
commitid	CeZtv5u8EElUYJB4;

1.32
date	2016.03.11.20.28.28;	author naddy;	state Exp;
branches;
next	1.31;
commitid	UYLP8TE6V7RS2GhJ;

1.31
date	2014.09.13.16.36.53;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	N2TalFGi4jKRwS2u;

1.30
date	2014.09.05.14.45.02;	author jasper;	state Exp;
branches;
next	1.29;
commitid	f4VbjcUvEOJXzzBc;

1.29
date	2014.09.05.06.29.12;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	4m1eBoGtlQNqwmMc;

1.28
date	2014.04.01.16.31.40;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2013.06.04.18.41.53;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.21.08.46.33;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.11.11.35.43;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2012.09.21.14.48.06;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2012.09.06.12.37.57;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.09.06.06.35.43;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.04.28.10.51.44;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.04.05.16.24.35;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2012.03.29.13.38.40;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.01.25.14.06.43;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.07.07.23.18.43;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.06.02.17.35.47;	author kili;	state Exp;
branches;
next	1.15;

1.15
date	2011.05.27.09.03.14;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.04.28.09.57.01;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.04.07.12.46.05;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.03.07.19.42.16;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.19.07.23.13;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.09.08.21.44.36;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.06.02.13.08.32;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.04.28.08.18.16;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.11.29.09.16.17;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.09.28.19.52.14;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.11.14.37.21;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.05.13.15.11.51;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.09.23.22.56;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2007.01.09.20.00.23;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.08.17.37.27;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.08.17.37.27;	author espie;	state Exp;
branches;
next	;


desc
@@


1.35
log
@replace gettext module; ok ajacoutot@@
@
text
@# $OpenBSD: Makefile.inc,v 1.34 2016/10/26 12:35:07 ajacoutot Exp $

# Most frequent usage of the GStreamer packages:
# core          base library
# plugins-base  minimal set: gio, playback, Ogg Vorbis
# plugins-good  audio (sndio), volume control
# plugins-ugly  mp3 decoding, dvd
# plugins-bad   vaapi
# plugins-libav divx, mpeg4, h264, vp8 (same decoding capabilities as FFmpeg)
#
# i.e. applications that use GStreamer require:
#     gstreamer-plugins-base and gstreamer-plugins-good
# audio/video support for MP3 decoding requires:
#     gstreamer-plugins-ugly
# support for most video codecs is provided by
#     gstreamer-plugins-ffmpeg

PORTROACH=		limit:^0\.10

CATEGORIES ?=		multimedia devel

HOMEPAGE ?=		http://gstreamer.freedesktop.org/

MAINTAINER ?=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2 - GPLv2+ - LGPLv2
PERMIT_PACKAGE_CDROM ?=	Yes
PERMIT_PACKAGE_FTP ?=	Yes
PERMIT_DISTFILES_FTP ?=	Yes

VERSION=		0.10
SUBST_VARS +=		VERSION

DIST_SUBDIR=		gstreamer
MASTER_SITE_GST=	http://gstreamer.freedesktop.org/src/
EXTRACT_SUFX?=		.tar.bz2
P=			multimedia/gstreamer-${VERSION}

.if defined(MULTI_PACKAGES)
.for i in ${MULTI_PACKAGES}
TEST_DEPENDS +=	${BASE_PKGPATH},${i}
.endfor
.else
TEST_DEPENDS +=	${BASE_PKGPATH}
.endif

USE_GMAKE ?=		Yes
AUTOCONF_VERSION ?=	2.68

BUILD_DEPENDS +=	devel/bison \
			devel/gobject-introspection

CONFIGURE_STYLE ?=	autoconf
CONFIGURE_ENV +=	CPPFLAGS="${CPPFLAGS}" \
			LDFLAGS="${LDFLAGS}"
CONFIGURE_ARGS +=	--with-package-name="OpenBSD ${DISTNAME} package" \
			--with-package-origin="https://www.openbsd.org/" \
			--with-default-audiosink=sndiosink \
			--with-default-audiosrc=sndiosrc \
			--with-default-videosink=xvimagesink \
			--with-default-videosrc=v4l2src \
			--with-default-visualizer=goom \
			--enable-introspection \
			--disable-valgrind

CPPFLAGS +=		-I${LOCALBASE}/include \
			-I${X11BASE}/include
LDFLAGS +=		-L${LOCALBASE}/lib \
			-L${X11BASE}/lib

.if !target(post-install)
post-install:
	rm ${PREFIX}/lib/gstreamer-${VERSION}/*.la
.endif
@


1.34
log
@http -> https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.33 2016/03/19 15:47:04 naddy Exp $
a45 2

MODULES +=		devel/gettext
@


1.33
log
@remove SHARED_ONLY, nothing uses it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.32 2016/03/11 20:28:28 naddy Exp $
d59 1
a59 1
			--with-package-origin="http://www.openbsd.org/" \
@


1.32
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.31 2014/09/13 16:36:53 ajacoutot Exp $
a18 1
SHARED_ONLY=		Yes
@


1.31
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.30 2014/09/05 14:45:02 jasper Exp $
d59 1
a59 2
CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--with-package-name="OpenBSD ${DISTNAME} package" \
@


1.30
log
@PORTSCOUT -> PORTROACH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.29 2014/09/05 06:29:12 ajacoutot Exp $
a67 1
			--disable-gtk-doc \
a68 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.29
log
@Add PORTSCOUT annotations.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.28 2014/04/01 16:31:40 ajacoutot Exp $
d18 1
a18 1
PORTSCOUT=		limit:^0\.10
@


1.28
log
@Seems I forgot that part in previous rampage...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.27 2013/06/04 18:41:53 naddy Exp $
d18 1
@


1.27
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.26 2013/03/21 08:46:33 ajacoutot Exp $
a49 1
LIBTOOL_FLAGS ?=	--tag=disable-static
d68 1
a68 2
			--disable-valgrind \
			--disable-static
@


1.26
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.25 2013/03/11 11:35:43 espie Exp $
a78 1
			-I${LOCALBASE}/include/libpng \
@


1.25
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.24 2012/09/21 14:48:06 ajacoutot Exp $
a49 1
USE_LIBTOOL ?=		Yes
@


1.24
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.23 2012/09/06 12:37:57 ajacoutot Exp $
a28 1
PERMIT_DISTFILES_CDROM ?=	Yes
d41 1
a41 1
REGRESS_DEPENDS +=	${BASE_PKGPATH},${i}
d44 1
a44 1
REGRESS_DEPENDS +=	${BASE_PKGPATH}
@


1.23
log
@HUGE cleanup to be in synced with upcoming gstreamer1.
Add DIST_SUBDIR, req. by jasper@@
Merge -cdda into -main for plugins-base.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.21 2012/04/28 10:51:44 ajacoutot Exp $
d73 6
@


1.22
log
@farsight2 -> farstream
@
text
@d3 26
a28 9
CATEGORIES ?=	multimedia devel

HOMEPAGE ?=	http://gstreamer.freedesktop.org/

MAINTAINER ?=	Antoine Jacoutot <ajacoutot@@openbsd.org>

# LGPL
PERMIT_PACKAGE_CDROM ?=		Yes
PERMIT_PACKAGE_FTP ?=		Yes
d30 1
a30 1
PERMIT_DISTFILES_FTP ?=		Yes
d32 1
a32 5
# NOTE: when VERSION changes, check the following ports that hardcode
# the current gstreamer version in their PLIST:
# net/farstream
# net/libnice
VERSION =		0.10
d35 14
a48 5
MASTER_SITE_GST =	http://gstreamer.freedesktop.org/src/
EXTRACT_SUFX ?=		.tar.bz2
SHARED_ONLY =		Yes
SEPARATE_BUILD ?=	Yes
P =			multimedia/gstreamer-${VERSION}
a51 1
# avoid compiling plugins as static libraries
d53 1
a57 1
AUTOCONF_VERSION ?=	2.68
d59 2
a60 3

LOCALSTATEDIR=		${BASELOCALSTATEDIR}/db

d62 2
d80 4
a83 2
CONFIGURE_ENV +=	CPPFLAGS="${CPPFLAGS}" \
			LDFLAGS="${LDFLAGS}"
@


1.21
log
@Use LOCALSTATEDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.20 2012/04/05 16:24:35 ajacoutot Exp $
d17 1
a17 1
# net/farsight2
@


1.20
log
@Add comment about dependant ports that hardcode the version in their PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.19 2012/03/29 13:38:40 sthen Exp $
d39 2
a41 1
			--localstatedir=/var/db \
@


1.19
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.18 2012/01/25 14:06:43 ajacoutot Exp $
d15 7
a23 2
VERSION =		0.10
SUBST_VARS +=		VERSION
@


1.18
log
@Default audio sink and src is sndio now (was libsndio).
Bump accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.17 2011/07/07 23:18:43 ajacoutot Exp $
d20 1
a20 1
SEPARATE_BUILD ?=	simple
@


1.17
log
@Reality is hard but one has to accept it... take maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.16 2011/06/02 17:35:47 kili Exp $
d36 2
a37 2
			--with-default-audiosink=libsndiosink \
			--with-default-audiosrc=libsndiosrc \
@


1.16
log
@Doh, can zap --disable-silent-rules here, too.
My grep skills suffer today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.15 2011/05/27 09:03:14 ajacoutot Exp $
d6 2
@


1.15
log
@Set autoconf version to 2.68 (was hanging in my local tree for weeks).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.14 2011/04/28 09:57:01 ajacoutot Exp $
a39 1
			--disable-silent-rules \
@


1.14
log
@Set proper AUTOCONF_VERSION, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.13 2011/04/07 12:46:05 ajacoutot Exp $
d29 1
a29 1
AUTOCONF_VERSION ?=	2.67
@


1.13
log
@Pass --enable-introspection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.12 2011/03/07 19:42:16 ajacoutot Exp $
d29 1
a29 1
AUTOCONF_VERSION ?=	2.62
@


1.12
log
@Add --disable-gtk-doc by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.11 2010/11/19 07:23:13 espie Exp $
d26 2
a27 1
BUILD_DEPENDS +=	devel/bison
d39 1
a40 1
			--disable-introspection \
@


1.11
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.10 2010/09/08 21:44:36 ajacoutot Exp $
d40 1
@


1.10
log
@Make it possible to tweak CPPFLAGS and LDFLAGS in children ports.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.9 2010/06/02 13:08:32 ajacoutot Exp $
d26 1
a26 1
BUILD_DEPENDS +=	:bison-*:devel/bison
@


1.9
log
@Move --disable-shave were supported.
no binary change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.8 2010/04/28 08:18:16 ajacoutot Exp $
d43 8
a50 5
CONFIGURE_ENV +=	CPPFLAGS="-I${LOCALBASE}/include \
				-I${LOCALBASE}/include/libpng \
				-I${X11BASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib \
				-L${X11BASE}/lib"
@


1.8
log
@Add --disable-silent-rules to CONFIGURE_ARGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.7 2009/11/29 09:16:17 ajacoutot Exp $
a39 1
			--disable-shave \
@


1.7
log
@Prepare for upcoming GStreamer update.
Better HOMEPAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.6 2009/09/28 19:52:14 ajacoutot Exp $
d38 1
@


1.6
log
@Several cleanings, typos and consistencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.5 2009/04/11 14:37:21 ajacoutot Exp $
d5 1
a5 1
HOMEPAGE ?=	http://www.gstreamer.net/
a25 2
MODULES +=		lang/python

d28 1
a28 1
AUTOCONF_VERSION ?=	2.61
d33 7
a39 1
			--with-cachedir=/var/db/gstreamer-${VERSION} \
d44 4
a47 3
			-I${LOCALBASE}/include/libpng" \
			LDFLAGS="-L${LOCALBASE}/lib" \
			MODPY_VERSION=${MODPY_VERSION}
@


1.5
log
@GStreamer configure script does not set --disable-debug by default and
for a good reason. One of them being that the gstdebug.so plugin is
actually needed by other apps.

gstreamer,-main: move some files from -main to -frontend ; fix dependencies

Regen all PLISTs and bump all PKGNAMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.4 2008/05/13 15:11:51 espie Exp $
d37 1
a37 2
			--disable-static \
#			--enable-gtk-doc
@


1.4
log
@update to recent gstreamer + plugins. Some breakage might occur, it will
be dealt with afterwards.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.3 2007/01/09 23:22:56 espie Exp $
a35 1
			--disable-debug \
@


1.3
log
@all of gstreamer is happy with SEPARATE_BUILD.

patch it to compile and build the sunaudio plugin.
Not really functional yet, though...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.2 2007/01/09 20:00:23 espie Exp $
d3 1
a3 1
CATEGORIES?=	multimedia devel
d5 1
a5 1
HOMEPAGE?=	http://www.gstreamer.net/
d8 17
a24 15
PERMIT_PACKAGE_CDROM?=	Yes
PERMIT_PACKAGE_FTP?=	Yes
PERMIT_DISTFILES_CDROM?=Yes
PERMIT_DISTFILES_FTP?=	Yes

MASTER_SITE_GST=	http://gstreamer.freedesktop.org/src/
EXTRACT_SUFX?=		.tar.bz2
VERSION=		0.10
SUBST_VARS+=		VERSION
SHARED_ONLY=		Yes
SEPARATE_BUILD?=	simple

USE_GMAKE?=		Yes
USE_LIBTOOL?=		Yes
LIBTOOL_FLAGS?=		--tag=disable-static
d26 1
a26 1
MODULES+=		lang/python
d28 1
a28 1
BUILD_DEPENDS+=		:bison-*:devel/bison
d30 2
a31 2
AUTOCONF_VERSION?=	2.60
CONFIGURE_STYLE?=	autoconf
d33 1
a33 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
d41 1
a41 1
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include \
@


1.2
log
@gstreamer does not make a lot of sense of non-shared architectures.
Explicitly disable all static building, which basically will halve
build time, and set no shared.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.1.1.1 2007/01/08 17:37:27 espie Exp $
d18 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d17 1
d21 1
d35 1
@


1.1.1.1
log
@new gstreamer-0.10 that can mostly co-exist with the older gstreamer.
Lots of packaging details to figure out yet.
@
text
@@
