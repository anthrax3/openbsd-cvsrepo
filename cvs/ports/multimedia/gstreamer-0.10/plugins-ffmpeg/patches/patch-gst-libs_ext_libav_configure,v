head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.10
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.8
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.6
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.05.22.06.40.19;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	5wX6Wih1rcU9lh7f;

1.1
date	2013.02.05.13.07.09;	author brad;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Sync with ffmpeg configure patch.
@
text
@$OpenBSD: patch-gst-libs_ext_libav_configure,v 1.1 2013/02/05 13:07:09 brad Exp $
--- gst-libs/ext/libav/configure.orig	Mon Feb  4 08:39:50 2013
+++ gst-libs/ext/libav/configure	Mon Feb  4 08:40:36 2013
@@@@ -2562,7 +2562,7 @@@@ die_license_disabled version3 libvo_amrwbenc
 
 enabled version3 && { enabled gpl && enable gplv3 || enable lgplv3; }
 
-disabled optimizations || check_cflags -fomit-frame-pointer
+enabled x86_32 && check_cflags -fomit-frame-pointer
 
 enable_pic() {
     enable pic
@


1.1
log
@Switch gstreamer-ffmpeg to using the internal copy of FFmpeg.
gstreamer-ffmpeg is unmaintained upstream and it uses long
deprecated API which has been removed from newer FFMpeg/Libav.

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
a12 19
@@@@ -2993,7 +2993,6 @@@@ enabled extra_warnings && check_cflags -Winline
 # add some linker flags
 check_ldflags -Wl,--warn-common
 check_ldflags -Wl,-rpath-link,libpostproc -Wl,-rpath-link,libswscale -Wl,-rpath-link,libavfilter -Wl,-rpath-link,libavdevice -Wl,-rpath-link,libavformat -Wl,-rpath-link,libavcodec -Wl,-rpath-link,libavutil
-test_ldflags -Wl,-Bsymbolic && append SHFLAGS -Wl,-Bsymbolic
 
 echo "X{};" > $TMPV
 if test_ldflags -Wl,--version-script,$TMPV; then
@@@@ -3010,10 +3009,6 @@@@ fi
 
 if enabled small; then
     add_cflags $size_cflags
-elif enabled optimizations; then
-    add_cflags $speed_cflags
-else
-    add_cflags $noopt_cflags
 fi
 check_cflags -fno-math-errno
 check_cflags -fno-signed-zeros
@

