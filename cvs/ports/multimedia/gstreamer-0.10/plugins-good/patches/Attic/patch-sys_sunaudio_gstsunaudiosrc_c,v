head	1.7;
access;
symbols
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.6
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.4
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.0.4
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2010.04.28.15.26.15;	author ajacoutot;	state dead;
branches;
next	1.6;

1.6
date	2010.04.28.08.03.23;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.11.29.09.17.38;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.06.21.21.03.56;	author deanna;	state Exp;
branches;
next	1.3;

1.3
date	2008.05.13.15.11.51;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2007.09.16.18.15.23;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.09.23.22.56;	author espie;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Remove patches that we longer need as sunaudio is disabled now.
spotted by jakemsr@@
@
text
@$OpenBSD: patch-sys_sunaudio_gstsunaudiosrc_c,v 1.6 2010/04/28 08:03:23 ajacoutot Exp $
--- sys/sunaudio/gstsunaudiosrc.c.orig	Thu Mar 18 18:55:13 2010
+++ sys/sunaudio/gstsunaudiosrc.c	Wed Apr 28 09:06:23 2010
@@@@ -42,8 +42,6 @@@@
 #include <fcntl.h>
 #include <string.h>
 #include <unistd.h>
-#include <stropts.h>
-#include <sys/mixer.h>
 
 #include "gstsunaudiosrc.h"
 
@@@@ -263,12 +261,14 @@@@ gst_sunaudiosrc_open (GstAudioSrc * asrc)
       sunaudiosrc->info.monitor_gain);
   GST_DEBUG_OBJECT (sunaudiosrc, "output_muted %d",
       sunaudiosrc->info.output_muted);
+#ifndef __OpenBSD__
   GST_DEBUG_OBJECT (sunaudiosrc, "hw_features %08x",
       sunaudiosrc->info.hw_features);
   GST_DEBUG_OBJECT (sunaudiosrc, "sw_features %08x",
       sunaudiosrc->info.sw_features);
   GST_DEBUG_OBJECT (sunaudiosrc, "sw_features_enabled %08x",
       sunaudiosrc->info.sw_features_enabled);
+#endif
 
   if (!sunaudiosrc->mixer) {
     const char *audiodev;
@@@@ -355,7 +355,7 @@@@ gst_sunaudiosrc_prepare (GstAudioSrc * asrc, GstRingBu
   }
 
 
-  ioctl (sunaudiosrc->fd, I_FLUSH, FLUSHR);
+  ioctl (sunaudiosrc->fd, AUDIO_FLUSH);
 
   return TRUE;
 }
@@@@ -409,7 +409,7 @@@@ gst_sunaudiosrc_reset (GstAudioSrc * asrc)
   }
 
   /* Flush the audio */
-  ret = ioctl (sunaudiosrc->fd, I_FLUSH, FLUSHR);
+  ret = ioctl (sunaudiosrc->fd, AUDIO_FLUSH);
   if (ret == -1) {
     GST_ELEMENT_ERROR (sunaudiosrc, RESOURCE, SETTINGS, (NULL), ("%s",
             strerror (errno)));
@


1.6
log
@Update to gstreamer-plugins-good-0.10.22.
@
text
@d1 1
a1 1
$OpenBSD: patch-sys_sunaudio_gstsunaudiosrc_c,v 1.5 2009/11/29 09:17:38 ajacoutot Exp $
@


1.5
log
@Major update to GStreamer plugins-good 0.10.17.
Months (years?) of changes, refer to the source for changelog.

Simplify DESCR.
Remove -esd subpackage (idea from landry, and ok espie@@ naddy@@)
Remove sunaudio support (solaris) and enable ossaudio to have mixing
capabilities (audio still handled with sndio by default).

tested on a bulk by jasper@@
feedback and sparc64+macppc testing from landry@@

"commitski" jasper, ok landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-sys_sunaudio_gstsunaudiosrc_c,v 1.4 2008/06/21 21:03:56 deanna Exp $
--- sys/sunaudio/gstsunaudiosrc.c.orig	Sat May 16 00:34:32 2009
+++ sys/sunaudio/gstsunaudiosrc.c	Mon Nov 23 18:28:12 2009
d13 1
a13 1
@@@@ -266,12 +264,14 @@@@ gst_sunaudiosrc_open (GstAudioSrc * asrc)
d28 1
a28 1
@@@@ -358,7 +358,7 @@@@ gst_sunaudiosrc_prepare (GstAudioSrc * asrc, GstRingBu
d37 1
a37 1
@@@@ -412,7 +412,7 @@@@ gst_sunaudiosrc_reset (GstAudioSrc * asrc)
@


1.4
log
@Enable the debugging subsystem.

Discussed with ajacoutot@@ who did not object.
@
text
@d1 4
a4 4
$OpenBSD: patch-sys_sunaudio_gstsunaudiosrc_c,v 1.3 2008/05/13 15:11:51 espie Exp $
--- sys/sunaudio/gstsunaudiosrc.c.orig	Wed Apr  2 18:37:29 2008
+++ sys/sunaudio/gstsunaudiosrc.c	Wed Jun 11 16:51:49 2008
@@@@ -46,8 +46,6 @@@@
d13 1
a13 1
@@@@ -270,12 +268,14 @@@@ gst_sunaudiosrc_open (GstAudioSrc * asrc)
d28 1
a28 1
@@@@ -363,7 +363,7 @@@@ gst_sunaudiosrc_prepare (GstAudioSrc * asrc, GstRingBu
d37 1
a37 1
@@@@ -417,7 +417,7 @@@@ gst_sunaudiosrc_reset (GstAudioSrc * asrc)
@


1.3
log
@update to recent gstreamer + plugins. Some breakage might occur, it will
be dealt with afterwards.
@
text
@d1 3
a3 3
$OpenBSD: patch-sys_sunaudio_gstsunaudiosrc_c,v 1.2 2007/09/16 18:15:23 naddy Exp $
--- sys/sunaudio/gstsunaudiosrc.c.orig	Thu Apr  3 00:37:29 2008
+++ sys/sunaudio/gstsunaudiosrc.c	Mon May 12 14:28:03 2008
d13 16
a28 1
@@@@ -363,7 +361,7 @@@@ gst_sunaudiosrc_prepare (GstAudioSrc * asrc, GstRingBu
d37 1
a37 1
@@@@ -417,7 +415,7 @@@@ gst_sunaudiosrc_reset (GstAudioSrc * asrc)
@


1.2
log
@sync patches
@
text
@d1 4
a4 4
$OpenBSD: patch-sys_sunaudio_gstsunaudiosrc_c,v 1.1 2007/01/09 23:22:56 espie Exp $
--- sys/sunaudio/gstsunaudiosrc.c.orig	Sat Dec 16 14:51:48 2006
+++ sys/sunaudio/gstsunaudiosrc.c	Sun Sep 16 20:09:41 2007
@@@@ -45,8 +45,6 @@@@
d13 1
a13 12
@@@@ -248,9 +246,8 @@@@ gst_sunaudiosrc_open (GstAudioSrc * asrc)
   int fd, ret, err;
 
   fd = open (sunaudiosrc->device, O_RDONLY);
-  err = ioctl (fd, AUDIO_MIXER_MULTIPLE_OPEN);
 
-  if (fd == -1 || err == -1) {
+  if (fd == -1) {
     GST_ELEMENT_ERROR (sunaudiosrc, RESOURCE, OPEN_READ, (NULL),
         ("can't open connection to Sun Audio device %s", sunaudiosrc->device));
 
@@@@ -375,7 +372,7 @@@@ gst_sunaudiosrc_prepare (GstAudioSrc * asrc, GstRingBu
d22 1
a22 1
@@@@ -429,7 +426,7 @@@@ gst_sunaudiosrc_reset (GstAudioSrc * asrc)
@


1.1
log
@all of gstreamer is happy with SEPARATE_BUILD.

patch it to compile and build the sunaudio plugin.
Not really functional yet, though...
@
text
@d1 3
a3 3
$OpenBSD$
--- sys/sunaudio/gstsunaudiosrc.c.orig	Tue Jan  9 23:24:45 2007
+++ sys/sunaudio/gstsunaudiosrc.c	Tue Jan  9 23:26:04 2007
d13 1
a13 1
@@@@ -248,9 +246,8 @@@@ gst_sunaudiosrc_open (GstAudioSrc * asrc
d24 1
a24 1
@@@@ -375,7 +372,7 @@@@ gst_sunaudiosrc_prepare (GstAudioSrc * a
d33 1
a33 1
@@@@ -429,7 +426,7 @@@@ gst_sunaudiosrc_reset (GstAudioSrc * asr
@

