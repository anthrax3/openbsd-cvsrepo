head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_4_7:1.1.1.1.0.16
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.14
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.12
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.10
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.8
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.6
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.4
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jakemsr:1.1.1.1
	jakemsr-20060324:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.03.30.18.38.31;	author brad;	state dead;
branches;
next	1.3;

1.3
date	2013.02.05.12.31.03;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.18.20.59.39;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2006.03.24.22.46.37;	author jakemsr;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.03.24.22.46.37;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to Xine-ui 0.99.8.

ok sthen@@
@
text
@$OpenBSD: patch-src_xitk_event_c,v 1.3 2013/02/05 12:31:03 brad Exp $

Fix X access deadlocks and stack corruption.

--- src/xitk/event.c.orig	Tue Feb  5 07:06:22 2013
+++ src/xitk/event.c	Tue Feb  5 07:08:08 2013
@@@@ -2125,7 +2125,13 @@@@ void gui_run(char **session_opts) {
   kbindings_save_kbinding(gGui->kbindings);
   kbindings_free_kbinding(&gGui->kbindings);
 
+  XLockDisplay(gGui->display);
   XCloseDisplay(gGui->display);
-  if( gGui->video_display != gGui->display )
+  XUnlockDisplay(gGui->display);
+  if( gGui->video_display != gGui->display ) {
+    XLockDisplay(gGui->video_display);
     XCloseDisplay(gGui->video_display);
+    XUnlockDisplay(gGui->video_display);
+  }
 }
+
@


1.3
log
@Some bug fixes from upstream..

- Fix X access deadlocks and stack corruption.
- Fix segfaults in signal handler.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@update to 0.99.6, from Brad
@
text
@d1 9
a9 4
$OpenBSD: patch-src_xitk_event_c,v 1.1 2006/03/24 22:46:37 jakemsr Exp $
--- src/xitk/event.c.orig	Sat Jul 23 19:40:37 2005
+++ src/xitk/event.c	Sat Dec 24 21:41:58 2005
@@@@ -47,6 +47,10 @@@@
d11 10
a20 5
 #define STEP_SIZE 256
 
+#ifndef PRIi64
+#define PRIi64 "ld"
+#endif
a21 3
 /*
  * global variables
  */
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@initial import of xine-ui

xine-ui is a graphical user interface for xine-lib.

prodded by jolan@@

@
text
@@
