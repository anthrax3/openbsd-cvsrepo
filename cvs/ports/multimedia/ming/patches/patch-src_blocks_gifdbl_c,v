head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.8
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.03.28.17.48.53;	author sthen;	state Exp;
branches;
next	1.1;
commitid	r3KnkbhDf1i8OqKL;

1.1
date	2013.09.25.07.58.44;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@handle giflib api change
@
text
@$OpenBSD: patch-src_blocks_gifdbl_c,v 1.1 2013/09/25 07:58:44 sthen Exp $

support giflib 5.0+, from http://cvsweb.netbsd.org/bsdweb.cgi/pkgsrc/multimedia/ming/patches/

--- src/blocks/gifdbl.c.orig	Sun Oct 10 08:19:23 2010
+++ src/blocks/gifdbl.c	Sat Mar 28 17:48:30 2015
@@@@ -203,7 +203,7 @@@@ readGif(GifFileType *file, dblData result)
 	}
 
 	/* Done! */
-	DGifCloseFile(file);
+	DGifCloseFile(file, NULL);
 
 	result->data = malloc(outsize = (int)floor(size*1.01+12));
 
@@@@ -227,7 +227,7 @@@@ SWFDBLBitmapData newSWFDBLBitmapData_fromGifFile(const
 	SWFDBLBitmapData ret;
 	struct dbl_data gifdata;
 
-	if((file = DGifOpenFileName(fileName)) == NULL)
+	if((file = DGifOpenFileName(fileName, NULL)) == NULL)
 		return NULL;
 	if(!readGif(file, &gifdata))
 		return NULL;
@@@@ -246,7 +246,7 @@@@ SWFDBLBitmapData newSWFDBLBitmapData_fromGifInput(SWFI
 	SWFDBLBitmapData ret;
 	struct dbl_data gifdata;
 
-	if((file = DGifOpen(input, (InputFunc) gifReadFunc)) == NULL)
+	if((file = DGifOpen(input, (InputFunc) gifReadFunc, NULL)) == NULL)
 		return NULL;
 	if(!readGif(file, &gifdata))
 		return NULL;
@


1.1
log
@libungif->giflib and patch where necessary, ok jasper@@ aja@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 11
a15 2
--- src/blocks/gifdbl.c.orig	Thu Sep 19 17:06:25 2013
+++ src/blocks/gifdbl.c	Thu Sep 19 17:06:51 2013
@

