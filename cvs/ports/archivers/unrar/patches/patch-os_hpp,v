head	1.13;
access;
symbols
	OPENBSD_6_1:1.12.0.8
	OPENBSD_6_1_BASE:1.12
	OPENBSD_6_0:1.12.0.6
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.2
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.4
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.11.0.2
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.10.0.4
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.9.0.4
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.2
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.6
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2;
locks; strict;
comment	@# @;


1.13
date	2017.06.21.21.19.05;	author naddy;	state Exp;
branches;
next	1.12;
commitid	ZOJP6E8fPhi3bneZ;

1.12
date	2015.04.03.11.58.51;	author naddy;	state Exp;
branches
	1.12.8.1;
next	1.11;
commitid	HZfqNSfTpZ8TcT5c;

1.11
date	2014.09.08.18.54.30;	author naddy;	state Exp;
branches;
next	1.10;
commitid	C44zr3BzpchHfAvL;

1.10
date	2013.09.06.13.28.16;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2012.11.26.17.17.41;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2012.04.08.17.04.20;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2012.04.08.16.36.12;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2010.12.30.07.51.31;	author benoit;	state Exp;
branches;
next	1.5;

1.5
date	2009.09.11.16.14.01;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2008.09.21.18.25.32;	author rui;	state Exp;
branches;
next	1.3;

1.3
date	2007.09.25.19.40.57;	author rui;	state Exp;
branches;
next	1.2;

1.2
date	2007.06.26.19.47.59;	author rui;	state Exp;
branches;
next	1.1;

1.1
date	2007.05.26.21.42.58;	author rui;	state Exp;
branches;
next	;

1.12.8.1
date	2017.06.29.19.58.36;	author naddy;	state Exp;
branches;
next	;
commitid	Nk2C5iprcqY1Jk1m;


desc
@@


1.13
log
@Security update to 5.50 beta 4 to fix the VMSF_DELTA filter signedness
error and unspecified other issues.
@
text
@$OpenBSD: patch-os_hpp,v 1.12 2015/04/03 11:58:51 naddy Exp $
Index: os.hpp
--- os.hpp.orig
+++ os.hpp
@@@@ -119,6 +119,7 @@@@
 
 #define  NM  2048
 
+#include <machine/endian.h>
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/stat.h>
@@@@ -150,6 +151,10 @@@@
 #include <locale.h>
 
 
+#ifdef OPENSSL_AES
+#include <openssl/evp.h>
+#endif
+
 #ifdef  S_IFLNK
 #define SAVE_LINKS
 #endif
@@@@ -245,7 +250,7 @@@@
   #endif
 #endif
 
-#if !defined(BIG_ENDIAN) && defined(_WIN_ALL) || defined(__i386__) || defined(__x86_64__)
+#if !defined(BIG_ENDIAN) && defined(_WIN_ALL) || !defined(__STRICT_ALIGNMENT)
 // Allow not aligned integer access, increases speed in some operations.
 #define ALLOW_MISALIGNED
 #endif
@


1.12
log
@update to 5.21
@
text
@d1 8
a8 7
$OpenBSD: patch-os_hpp,v 1.11 2014/09/08 18:54:30 naddy Exp $
--- os.hpp.orig	Sun Feb 15 09:02:48 2015
+++ os.hpp	Fri Apr  3 13:57:04 2015
@@@@ -137,6 +137,7 @@@@
   #endif
 #endif
 #if defined(__FreeBSD__) || defined (__NetBSD__) || defined (__OpenBSD__) || defined(__APPLE__)
d10 4
a13 4
 #endif
 #include <pwd.h>
 #include <grp.h>
@@@@ -156,6 +157,10 @@@@
d24 1
a24 1
@@@@ -242,7 +247,7 @@@@
@


1.12.8.1
log
@Security update to 5.50 beta 4 to fix the VMSF_DELTA filter signedness
error and unspecified other issues.
@
text
@d1 7
a7 8
$OpenBSD: patch-os_hpp,v 1.13 2017/06/21 21:19:05 naddy Exp $
Index: os.hpp
--- os.hpp.orig
+++ os.hpp
@@@@ -119,6 +119,7 @@@@
 
 #define  NM  2048
 
d9 4
a12 4
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/stat.h>
@@@@ -150,6 +151,10 @@@@
d23 1
a23 1
@@@@ -245,7 +250,7 @@@@
@


1.11
log
@update to 5.1.6; specifically tested on sparc64
@
text
@d1 4
a4 4
$OpenBSD: patch-os_hpp,v 1.10 2013/09/06 13:28:16 naddy Exp $
--- os.hpp.orig	Tue Jun 10 19:14:06 2014
+++ os.hpp	Tue Sep  2 22:22:52 2014
@@@@ -136,6 +136,7 @@@@
d12 1
a12 2
@@@@ -154,6 +155,10 @@@@
 #include <utime.h>
d15 1
d23 1
a23 1
@@@@ -235,7 +240,7 @@@@
@


1.10
log
@Update to 5.00 and take maintainer.
Multithreading is enabled but doesn't appear to be functional.
@
text
@d1 5
a5 5
$OpenBSD: patch-os_hpp,v 1.9 2012/11/26 17:17:41 naddy Exp $
--- os.hpp.orig	Thu Aug 22 15:10:37 2013
+++ os.hpp	Thu Sep  5 18:34:55 2013
@@@@ -133,6 +133,7 @@@@
   #include <sys/statvfs.h>
d12 1
a12 1
@@@@ -151,6 +152,10 @@@@
d23 1
a23 1
@@@@ -233,12 +238,12 @@@@
d27 2
a28 2
-#if !defined(BIG_ENDIAN) && defined(_WIN_ALL)
+#if !defined(BIG_ENDIAN) && defined(_WIN_ALL) && !defined(__STRICT_ALIGNMENT)
d30 1
a30 1
 #define ALLOW_NOT_ALIGNED_INT
a31 6
 
-#if defined(__sparc) || defined(sparc) || defined(__sparcv9)
+#ifndef STRICT_ALIGNMENT_REQUIRED
 // Prohibit not aligned access to data structures in text compression
 // algorithm, increases memory requirements.
 #define STRICT_ALIGNMENT_REQUIRED
@


1.9
log
@maintenance update to 4.20; drop maintainer by his request
@
text
@d1 12
a12 4
$OpenBSD: patch-os_hpp,v 1.8 2012/04/08 17:04:20 naddy Exp $
--- os.hpp.orig	Sat Jun  9 15:21:04 2012
+++ os.hpp	Sun Nov 25 23:31:08 2012
@@@@ -169,6 +169,10 @@@@
d16 1
a16 1
+#ifdef OPENSSL
d23 1
a23 1
@@@@ -240,12 +244,12 @@@@
d27 2
a28 2
-#if !defined(BIG_ENDIAN) && !defined(_WIN_CE) && defined(_WIN_ALL)
+#if defined(ALLOW_NOT_ALIGNED_INT)
d30 1
a30 2
-#define ALLOW_NOT_ALIGNED_INT
+#undef ALLOW_NOT_ALIGNED_INT
d36 1
a36 1
 // algorithm, increases memory requirements
@


1.8
log
@update to 4.10; suggested by Amit Kulkarni
@
text
@d1 4
a4 4
$OpenBSD: patch-os_hpp,v 1.7 2012/04/08 16:36:12 naddy Exp $
--- os.hpp.orig	Mon Jan  9 14:46:08 2012
+++ os.hpp	Sun Apr  8 18:41:22 2012
@@@@ -193,6 +193,10 @@@@
d15 1
a15 1
@@@@ -263,12 +267,12 @@@@
d21 1
a21 1
 /* allow not aligned integer access, increases speed in some operations */
d28 2
a29 2
 /* prohibit not aligned access to data structures in text comression
    algorithm, increases memory requirements */
@


1.7
log
@Use OpenSSL instead of the included AES code to speed up extraction
of encrypted archives.
@
text
@d1 4
a4 4
$OpenBSD: patch-os_hpp,v 1.6 2010/12/30 07:51:31 benoit Exp $
--- os.hpp.orig	Wed Mar  2 08:43:12 2011
+++ os.hpp	Fri Apr  6 00:30:19 2012
@@@@ -192,6 +192,10 @@@@
d15 1
a15 1
@@@@ -262,12 +266,12 @@@@
@


1.6
log
@- update unrar to 4.02
- maintainer timeout
- add and regen patches

ok giovanni@@
@
text
@d1 15
a15 4
$OpenBSD$
--- os.hpp.orig	Fri Nov 26 08:20:01 2010
+++ os.hpp	Mon Dec  6 07:49:22 2010
@@@@ -262,12 +262,12 @@@@
@


1.5
log
@update to 3.96; ok rui@@
@
text
@d1 4
a4 4
$OpenBSD: patch-os_hpp,v 1.4 2008/09/21 18:25:32 rui Exp $
--- os.hpp.orig	Sun Aug 16 13:09:36 2009
+++ os.hpp	Mon Sep  7 17:50:51 2009
@@@@ -245,12 +245,12 @@@@
d8 1
a8 1
-#if !defined(BIG_ENDIAN) && !defined(_WIN_CE) && defined(_WIN_32)
@


1.4
log
@- maintenance update to unrar 3.82.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-os_hpp,v 1.3 2007/09/25 19:40:57 rui Exp $
--- os.hpp.orig	Sun Jun 15 13:42:13 2008
+++ os.hpp	Sat Sep 20 21:56:10 2008
@@@@ -228,12 +228,12 @@@@
@


1.3
log
@maintenance update to 3.7.8

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD$
--- os.hpp.orig	Mon Sep 10 12:49:28 2007
+++ os.hpp	Mon Sep 24 17:14:20 2007
@@@@ -227,12 +227,12 @@@@ typedef const char* MSGID;
@


1.2
log
@update unrar to 3.76

ok jasper@@
@
text
@d2 2
a3 2
--- os.hpp.orig	Tue May 22 06:03:02 2007
+++ os.hpp	Mon Jun 25 19:34:54 2007
@


1.1
log
@make sure that it'll work on every archs without keeping a list of them

pointed by and ok naddy@@
@
text
@d2 2
a3 2
--- os.hpp.orig	Sat May 26 19:11:08 2007
+++ os.hpp	Sat May 26 19:17:50 2007
@

