head	1.26;
access;
symbols
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.6
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.4
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.2
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.22.0.2
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.21.0.6
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.21.0.4
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.16.0.4
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.16.0.2
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.15.0.2
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.14.0.4
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.10.0.6
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.10.0.4
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.2
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.9.0.4
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.2
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.6.0.6
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.4
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.2.0.6
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.4
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.2
	OPENBSD_2_9_BASE:1.2
	lebel_2001-Apr-09:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2016.04.26.17.47.36;	author naddy;	state Exp;
branches;
next	1.25;
commitid	SDUSmabPkRFMvy2u;

1.25
date	2015.09.17.20.16.49;	author naddy;	state Exp;
branches;
next	1.24;
commitid	LSQA2hSb03IcYnZB;

1.24
date	2015.03.31.15.36.52;	author naddy;	state Exp;
branches;
next	1.23;
commitid	2ATlUkZrXvt3nbGs;

1.23
date	2013.11.09.23.19.01;	author naddy;	state Exp;
branches
	1.23.4.1
	1.23.6.1;
next	1.22;

1.22
date	2013.03.10.22.28.04;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2011.12.18.09.01.19;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.06.02.17.09.31;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.18.21.35.47;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.18.16.47.00;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.05.16.58.59;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2009.06.09.15.09.44;	author ajacoutot;	state Exp;
branches
	1.16.4.1;
next	1.15;

1.15
date	2009.01.16.16.58.05;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2007.10.02.19.09.44;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2007.09.15.10.14.32;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2007.07.09.17.38.42;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2007.04.17.19.46.42;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2005.10.20.21.45.18;	author naddy;	state Exp;
branches
	1.10.2.1
	1.10.4.1
	1.10.6.1;
next	1.9;

1.9
date	2005.02.11.23.28.34;	author naddy;	state Exp;
branches
	1.9.2.1
	1.9.4.1;
next	1.8;

1.8
date	2004.11.21.12.50.32;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2004.09.15.00.06.58;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2003.05.24.01.29.15;	author jolan;	state Exp;
branches
	1.6.4.1
	1.6.6.1;
next	1.5;

1.5
date	2003.02.22.16.38.40;	author lebel;	state Exp;
branches;
next	1.4;

1.4
date	2002.12.29.15.15.18;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.12.21.37.03;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.20.17.35.33;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.10.00.41.32;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.04.10.00.41.32;	author lebel;	state Exp;
branches;
next	;

1.6.4.1
date	2005.02.12.12.10.53;	author robert;	state Exp;
branches;
next	;

1.6.6.1
date	2005.02.12.12.09.57;	author robert;	state Exp;
branches;
next	1.6.6.2;

1.6.6.2
date	2005.10.30.07.11.45;	author sturm;	state Exp;
branches;
next	;

1.9.2.1
date	2005.10.30.07.22.47;	author sturm;	state Exp;
branches;
next	;

1.9.4.1
date	2005.11.01.11.33.12;	author sturm;	state Exp;
branches;
next	;

1.10.2.1
date	2007.04.19.13.47.06;	author sturm;	state Exp;
branches;
next	;

1.10.4.1
date	2007.04.19.14.26.56;	author sturm;	state Exp;
branches;
next	;

1.10.6.1
date	2007.05.01.16.37.55;	author sturm;	state Exp;
branches;
next	;

1.16.4.1
date	2010.06.03.04.07.41;	author william;	state Exp;
branches;
next	;

1.23.4.1
date	2015.03.31.17.47.02;	author naddy;	state Exp;
branches;
next	;
commitid	7Z6Erp1glhgnAeOI;

1.23.6.1
date	2015.03.31.17.19.37;	author naddy;	state Exp;
branches;
next	;
commitid	NnVrKcAFUjoWE1Yb;


desc
@@


1.26
log
@replace gettext module
@
text
@# $OpenBSD: Makefile,v 1.25 2015/09/17 20:16:49 naddy Exp $

COMMENT=	GNU cpio copies files to and from archives

DISTNAME=	cpio-2.12
PKGNAME=	g${DISTNAME}
REVISION=	0
CATEGORIES=	archivers
HOMEPAGE=	https://www.gnu.org/software/cpio/

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_GNU:=cpio/}
EXTRACT_SUFX=	.tar.bz2

LIB_DEPENDS=	devel/gettext
WANTLIB=	c iconv intl

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--program-prefix="g" \
		--with-rmt=/etc/rmt
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/build-aux

# autom4te
AUTOCONF_VERSION=2.69
TEST_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS}
TEST_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION}

.include <bsd.port.mk>
@


1.25
log
@Update to 2.12, but retain local fix for CVE-2015-1197.
Grab maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/03/31 15:36:52 naddy Exp $
d7 1
d19 2
a20 2
MODULES=	devel/gettext
WANTLIB=	c
@


1.24
log
@CVE-2014-9112: Heap-based buffer overflow in the process_copy_in
function allows remote attackers to cause a denial of service via
a large block value in a cpio archive.
Fix from a series of upstream commits by Sergey Poznyakoff, via Debian.

CVE-2015-1197: cpio, when using the --no-absolute-filenames option,
allows local users to write to arbitrary files via a symlink attack
on a file in an archive.
Fix from Vitezslav Cizek after 3.5 years of gestation in the SUSE
bug tracker, via Debian.

Also apply an upstream fix for some regression tests while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/11/09 23:19:01 naddy Exp $
d3 1
a3 1
COMMENT=	GNU copy-in/out (cpio)
d5 1
a5 1
DISTNAME=	cpio-2.11
a6 1
REVISION=	1
d8 1
d10 1
a10 1
HOMEPAGE=	https://www.gnu.org/software/cpio/
d16 1
d27 1
a27 1
AUTOCONF_VERSION=2.63
@


1.23
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/10 22:28:04 espie Exp $
d7 1
a7 1
REVISION=	0
d24 5
@


1.23.4.1
log
@CVE-2014-9112: Heap-based buffer overflow in the process_copy_in
function allows remote attackers to cause a denial of service via
a large block value in a cpio archive.
Fix from a series of upstream commits by Sergey Poznyakoff, via Debian.

CVE-2015-1197: cpio, when using the --no-absolute-filenames option,
allows local users to write to arbitrary files via a symlink attack
on a file in an archive.
Fix from Vitezslav Cizek after 3.5 years of gestation in the SUSE
bug tracker, via Debian.

Also apply an upstream fix for some regression tests while here.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/03/31 15:36:52 naddy Exp $
d7 1
a7 1
REVISION=	1
a23 5

# autom4te
AUTOCONF_VERSION=2.63
TEST_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS}
TEST_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION}
@


1.23.6.1
log
@CVE-2014-9112: Heap-based buffer overflow in the process_copy_in
function allows remote attackers to cause a denial of service via
a large block value in a cpio archive.
Fix from a series of upstream commits by Sergey Poznyakoff, via Debian.

CVE-2015-1197: cpio, when using the --no-absolute-filenames option,
allows local users to write to arbitrary files via a symlink attack
on a file in an archive.
Fix from Vitezslav Cizek after 3.5 years of gestation in the SUSE
bug tracker, via Debian.

Also apply an upstream fix for some regression tests while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/03/31 15:36:52 naddy Exp $
d7 1
a7 1
REVISION=	1
a23 5

# autom4te
AUTOCONF_VERSION=2.63
TEST_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS}
TEST_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION}
@


1.22
log
@regress -> test
PERMIT_* cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/12/18 09:01:19 ajacoutot Exp $
d7 1
d10 1
a10 1
HOMEPAGE=	http://www.gnu.org/software/cpio/
@


1.21
log
@Remove USE_GROFF from ports where mandoc doesn't have any ERRORs and
formatting looks Ok.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/06/02 17:09:31 kili Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.20
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/18 21:35:47 sthen Exp $
a24 1
USE_GROFF =	Yes
@


1.19
log
@fix a few tabtabUSE_GROFF, problem pointed out by Alexandr Shadchin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/18 16:47:00 espie Exp $
a23 1
		--disable-silent-rules \
@


1.18
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/04/05 16:58:59 naddy Exp $
d26 1
a26 1
		USE_GROFF =	Yes
@


1.17
log
@SECURITY update to 2.11 for CVE-2010-0624:
Heap-based buffer overflow allows remote rmt servers to cause a
denial of service (memory corruption) or possibly execute arbitrary
code by sending more data than was requested.

with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/06/09 15:09:44 ajacoutot Exp $
d26 1
@


1.16
log
@Add homepage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/01/16 16:58:05 naddy Exp $
d5 2
a6 2
DISTNAME=	cpio-2.9
PKGNAME=	g${DISTNAME}p1
d24 1
@


1.16.4.1
log
@MFC:

SECURITY UPDATE to gcpio-2.11

Resolves CVE-2010-0624

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/06/09 15:09:44 ajacoutot Exp $
d5 2
a6 2
DISTNAME=	cpio-2.11
PKGNAME=	g${DISTNAME}
a23 1
		--disable-silent-rules \
@


1.15
log
@SECURITY:
Fix potential crash induced by malicious archives; from upstream CVS.
CVE-2007-4476, Bugtraq ID 26445
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/10/02 19:09:44 jasper Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p0
d8 2
@


1.14
log
@we prefer the idiom of MODULES=devel/gettext over MODULES=gettext

"looks good" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/09/15 10:14:32 espie Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
@


1.13
log
@zap all quotes in COMMENT/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/07/09 17:38:42 naddy Exp $
d17 1
a17 1
MODULES=	gettext
@


1.12
log
@update to 2.9:
* Option --owner can be used in copy-out mode, allowing to uniformly
override ownership of the files being added to the archive.
* Symlinks were handled incorrectly in copy-out mode.
* Fix handling of large files.
* Fix setting the file permissions in copy-out mode.
* Honor umask when creating intermediate directories, not specified
in the archive.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/04/17 19:46:42 naddy Exp $
d3 1
a3 1
COMMENT=	"GNU copy-in/out (cpio)"
@


1.11
log
@Update to 2.7:
* Improved error checking and diagnostics
* Fixed CAN-1999-1572
* Allow to use --sparse in both copy-in and copy-pass.
* Fix bug that eventually caused copying out the same hard-linked file
several times to archive.

From: Rui Reis
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/10/20 21:45:18 naddy Exp $
d5 1
a5 1
DISTNAME=	cpio-2.7
d9 1
a9 1
# GPL
d23 1
@


1.10
log
@Update to 2.6, which brings I18N support.
Also include Debian/Ubuntu patches for CAN-2005-1111 (chmod races) and
CAN-2005-1229 (path traversal).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/02/11 23:28:34 naddy Exp $
d5 1
a5 1
DISTNAME=	cpio-2.6
@


1.10.6.1
log
@MFC:
Update to 2.7:
* Improved error checking and diagnostics
* Fixed CAN-1999-1572
* Allow to use --sparse in both copy-in and copy-pass.
* Fix bug that eventually caused copying out the same hard-linked file
several times to archive.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/10/20 21:45:18 naddy Exp $
d5 1
a5 1
DISTNAME=	cpio-2.7
@


1.10.4.1
log
@MFC:
Update to 2.7:
* Improved error checking and diagnostics
* Fixed CAN-1999-1572
* Allow to use --sparse in both copy-in and copy-pass.
* Fix bug that eventually caused copying out the same hard-linked file
several times to archive.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/10/20 21:45:18 naddy Exp $
d5 1
a5 1
DISTNAME=	cpio-2.7
@


1.10.2.1
log
@MFC:
* Improved error checking and diagnostics
* Fixed CAN-1999-1572
* Allow to use --sparse in both copy-in and copy-pass.
* Fix bug that eventually caused copying out the same hard-linked file
several times to archive.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/10/20 21:45:18 naddy Exp $
d5 1
a5 1
DISTNAME=	cpio-2.7
a21 2
		--infodir='${PREFIX}/info' \
		--mandir='${PREFIX}/man' \
@


1.9
log
@SECURITY:
cpio used a 0 umask when creating files using the -O (archive) or
-F options, which created the files with mode 0666 and allowed local
users to read or overwrite those files. (CAN-1999-1572)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/11/21 12:50:32 espie Exp $
d3 1
a3 1
COMMENT=		"GNU copy-in/out (cpio)"
d5 3
a7 3
DISTNAME=		cpio-2.5
PKGNAME=		g${DISTNAME}p0
CATEGORIES=		archivers
d9 1
a9 1
# GPL/LGPL
a13 1
WANTLIB=		c
d15 1
a15 1
MASTER_SITES=		${MASTER_SITE_GNU:=cpio/}
d17 6
a22 2
CONFIGURE_STYLE=	gnu dest
CONFIGURE_ARGS=		--program-prefix="g"
@


1.9.4.1
log
@Debian/Ubuntu patches for CAN-2005-1111 (chmod races) and
CAN-2005-1229 (path traversal)

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/02/11 23:28:34 naddy Exp $
d6 1
a6 1
PKGNAME=		g${DISTNAME}p1
@


1.9.2.1
log
@Debian/Ubuntu patches for CAN-2005-1111 (chmod races) and
CAN-2005-1229 (path traversal)

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/02/11 23:28:34 naddy Exp $
d6 1
a6 1
PKGNAME=		g${DISTNAME}p1
@


1.8
log
@Mark all system libs in WANTLIB, result of running newlib-depends-check
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/09/15 00:06:58 pvalchev Exp $
d6 1
a6 1
PKGNAME=		g${DISTNAME}
@


1.7
log
@remove David Lebel from maintainer position per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/05/24 01:29:15 jolan Exp $
d14 1
@


1.6
log
@# GPL/LGPL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/02/22 16:38:40 lebel Exp $
a7 2

MAINTAINER=		David Lebel <lebel@@openbsd.org>
@


1.6.4.1
log
@SECURITY:
cpio used a 0 umask when creating files using the -O (archive) or
-F options, which created the files with mode 0666 and allowed local
users to read or overwrite those files. (CAN-1999-1572)

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/05/24 01:29:15 jolan Exp $
d6 1
a6 1
PKGNAME=		g${DISTNAME}p0
@


1.6.6.1
log
@SECURITY:
cpio used a 0 umask when creating files using the -O (archive) or
-F options, which created the files with mode 0666 and allowed local
users to read or overwrite those files. (CAN-1999-1572)

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/05/24 01:29:15 jolan Exp $
d6 1
a6 1
PKGNAME=		g${DISTNAME}p0
@


1.6.6.2
log
@add Debian/Ubuntu patches for CAN-2005-1111 (chmod races) and
CAN-2005-1229 (path traversal)

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6.6.1 2005/02/12 12:09:57 robert Exp $
d6 1
a6 1
PKGNAME=		g${DISTNAME}p1
@


1.5
log
@update archivers/gcpio to 2.5; thanks naddy@@ for the heads up
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/12/29 15:15:18 fgsch Exp $
d11 1
@


1.4
log
@sayonara NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/05/12 21:37:03 brad Exp $
d5 1
a5 1
DISTNAME=		cpio-2.4.2
@


1.3
log
@bye MASTER_SITE_SUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/04/20 17:35:33 brad Exp $
a7 1
NEED_VERSION=	1.525
@


1.2
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/04/10 00:41:32 lebel Exp $
d8 1
a8 1
NEED_VERSION=		1.384
d17 1
a17 2
MASTER_SITES=		${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR=	cpio
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
NEED_VERSION=		1.364
@


1.1.1.1
log
@initial import of gcpio-2.4.2. naddy@@ OK.
@
text
@@
