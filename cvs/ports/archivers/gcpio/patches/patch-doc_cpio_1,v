head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.8
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.6
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.32
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.30
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.28
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.26
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.24
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.22
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.20
	OPENBSD_5_0:1.2.0.18
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.16
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.14
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.6
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.4
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.2
	OPENBSD_3_9_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2015.09.17.20.16.49;	author naddy;	state Exp;
branches;
next	1.3;
commitid	LSQA2hSb03IcYnZB;

1.3
date	2015.03.31.15.36.52;	author naddy;	state Exp;
branches;
next	1.2;
commitid	2ATlUkZrXvt3nbGs;

1.2
date	2007.07.09.17.38.42;	author naddy;	state Exp;
branches
	1.2.30.1
	1.2.32.1;
next	1.1;

1.1
date	2005.10.20.21.45.18;	author naddy;	state Exp;
branches;
next	;

1.2.30.1
date	2015.03.31.17.47.02;	author naddy;	state Exp;
branches;
next	;
commitid	7Z6Erp1glhgnAeOI;

1.2.32.1
date	2015.03.31.17.19.37;	author naddy;	state Exp;
branches;
next	;
commitid	NnVrKcAFUjoWE1Yb;


desc
@@


1.4
log
@Update to 2.12, but retain local fix for CVE-2015-1197.
Grab maintainer.
@
text
@$OpenBSD: patch-doc_cpio_1,v 1.3 2015/03/31 15:36:52 naddy Exp $

CVE-2015-1197: cpio directory traversal

--- doc/cpio.1.orig	Sat Sep 12 12:57:30 2015
+++ doc/cpio.1	Wed Sep 16 23:20:28 2015
@@@@ -15,9 +15,9 @@@@
 .\" along with GNU cpio.  If not, see <http://www.gnu.org/licenses/>.
 .TH CPIO 1 "December 1, 2014" "CPIO" "GNU CPIO"
 .SH NAME
-cpio \- copy files to and from archives
+gcpio \- copy files to and from archives
 .SH SYNOPSIS
-.B cpio
+.B gcpio
 {\fB\-o\fR|\fB\-\-create\fR} [\fB\-0acvABLV\fR] [\fB\-C\fR \fIBYTES\fR]
 [\fB\-H\fR \fIFORMAT\fR] [\fB\-M\fR \fIMESSAGE\fR]
 [\fB\-O\fR [[\fIUSER\fB@@\fR]\fIHOST\fB:\fR]\fIARCHIVE\fR]
@@@@ -31,7 +31,7 @@@@ cpio \- copy files to and from archives
 [\fB\-\-force\-local\fR] [\fB\-\-rsh\-command=\fICOMMAND\fR]
 \fB<\fR \fIname-list\fR [\fB>\fR \fIarchive\fR]
 
-.B cpio
+.B gcpio
 {\fB\-i\fR|\fB\-\-extract\fR} [\fB\-bcdfmnrtsuvBSV\fR] [\fB\-C\fR \fIBYTES\fR]
 [\fB\-E\fR \fIFILE\fR] [\fB\-H\fR \fIFORMAT\fR]
 [\fB\-M\fR \fIMESSAGE\fR] [\fB\-R\fR [\fIUSER\fR][\fB:.\fR][\fIGROUP\fR]]
@@@@ -50,9 +50,10 @@@@ cpio \- copy files to and from archives
 [\fB\-\-force\-local\fR] [\fB\-\-no\-absolute\-filenames\fR] [\fB\-\-sparse\fR]
 [\fB\-\-only\-verify\-crc\fR] [\fB\-\-to\-stdout\fR] [\fB\-\-quiet\fR]
 [\fB\-\-rsh\-command=\fICOMMAND\fR]
+[\fB\-\-extract\-over\-symlinks\fR]
 [\fIpattern\fR...] [\fB<\fR \fIarchive\fR]
 
-.B cpio
+.B gcpio
 {\fB\-p\fR|\fB\-\-pass\-through\fR} [\fB\-0adlmuvLV\fR]
 [\fB\-R\fR [\fIUSER\fR][\fB:.\fR][\fIGROUP\fR]]
 [\fB\-\-null\fR] [\fB\-\-reset\-access\-time\fR]
@@@@ -63,7 +64,7 @@@@ cpio \- copy files to and from archives
 [\fB\-\-no\-preserve\-owner\fR] [\fB\-\-sparse\fR]
 \fIdestination-directory\fR \fB<\fR \fIname-list\fR
 
-.B cpio
+.B gcpio
 {\fB\-?\fR|\fB\-\-help\fR|\fB\-\-usage\fR|\fB\-\-version\fR}
 .SH NOTE
 This manpage is a short description of GNU \fBcpio\fR.  For a detailed
@


1.3
log
@CVE-2014-9112: Heap-based buffer overflow in the process_copy_in
function allows remote attackers to cause a denial of service via
a large block value in a cpio archive.
Fix from a series of upstream commits by Sergey Poznyakoff, via Debian.

CVE-2015-1197: cpio, when using the --no-absolute-filenames option,
allows local users to write to arbitrary files via a symlink attack
on a file in an archive.
Fix from Vitezslav Cizek after 3.5 years of gestation in the SUSE
bug tracker, via Debian.

Also apply an upstream fix for some regression tests while here.
@
text
@d1 1
a1 1
$OpenBSD: patch-doc_cpio_1,v 1.2 2007/07/09 17:38:42 naddy Exp $
d5 5
a9 4
--- doc/cpio.1.orig	Sat Feb 14 19:15:50 2009
+++ doc/cpio.1	Sun Mar 29 21:11:10 2015
@@@@ -1,8 +1,8 @@@@
 .TH CPIO 1L \" -*- nroff -*-
d16 6
a21 6
 {\-o|\-\-create} [\-0acvABLV] [\-C bytes] [\-H format] [\-M message]
 [\-O [[user@@]host:]archive] [\-F [[user@@]host:]archive]
 [\-\-file=[[user@@]host:]archive] [\-\-format=format] [\-\-message=message]
@@@@ -11,7 +11,7 @@@@ cpio \- copy files to and from archives
 [\-\-force\-local] [\-\-rsh-command=command] [\-\-help] [\-\-version]
 < name-list [> archive]
d25 9
a33 9
 {\-i|\-\-extract} [\-bcdfmnrtsuvBSV] [\-C bytes] [\-E file] [\-H format]
 [\-M message] [\-R [user][:.][group]] [\-I [[user@@]host:]archive]
 [\-F [[user@@]host:]archive] [\-\-file=[[user@@]host:]archive]
@@@@ -22,9 +22,10 @@@@ cpio \- copy files to and from archives
 [\-\-owner=[user][:.][group]] [\-\-no-preserve-owner] [\-\-message=message]
 [\-\-force\-local] [\-\-no\-absolute\-filenames] [\-\-sparse]
 [\-\-only\-verify\-crc] [\-\-to\-stdout] [\-\-quiet] [\-\-rsh-command=command]
+[\-\-extract\-over\-symlinks]
 [\-\-help] [\-\-version] [pattern...] [< archive]
d37 12
a48 3
 {\-p|\-\-pass-through} [\-0adlmuvLV] [\-R [user][:.][group]]
 [\-\-null] [\-\-reset-access-time] [\-\-make-directories] [\-\-link] [\-\-quiet]
 [\-\-preserve-modification-time] [\-\-unconditional] [\-\-verbose] [\-\-dot]
@


1.2
log
@update to 2.9:
* Option --owner can be used in copy-out mode, allowing to uniformly
override ownership of the files being added to the archive.
* Symlinks were handled incorrectly in copy-out mode.
* Fix handling of large files.
* Fix setting the file permissions in copy-out mode.
* Honor umask when creating intermediate directories, not specified
in the archive.
@
text
@d1 6
a6 3
$OpenBSD: patch-doc_cpio_1,v 1.1 2005/10/20 21:45:18 naddy Exp $
--- doc/cpio.1.orig	Thu Jun 28 10:59:17 2007
+++ doc/cpio.1	Fri Jul  6 18:06:24 2007
d27 3
a29 1
@@@@ -24,7 +24,7 @@@@ cpio \- copy files to and from archives
d31 1
@


1.2.30.1
log
@CVE-2014-9112: Heap-based buffer overflow in the process_copy_in
function allows remote attackers to cause a denial of service via
a large block value in a cpio archive.
Fix from a series of upstream commits by Sergey Poznyakoff, via Debian.

CVE-2015-1197: cpio, when using the --no-absolute-filenames option,
allows local users to write to arbitrary files via a symlink attack
on a file in an archive.
Fix from Vitezslav Cizek after 3.5 years of gestation in the SUSE
bug tracker, via Debian.

Also apply an upstream fix for some regression tests while here.

ok sthen@@
@
text
@d1 3
a3 6
$OpenBSD: patch-doc_cpio_1,v 1.3 2015/03/31 15:36:52 naddy Exp $

CVE-2015-1197: cpio directory traversal

--- doc/cpio.1.orig	Sat Feb 14 19:15:50 2009
+++ doc/cpio.1	Sun Mar 29 21:11:10 2015
d24 1
a24 3
@@@@ -22,9 +22,10 @@@@ cpio \- copy files to and from archives
 [\-\-owner=[user][:.][group]] [\-\-no-preserve-owner] [\-\-message=message]
 [\-\-force\-local] [\-\-no\-absolute\-filenames] [\-\-sparse]
a25 1
+[\-\-extract\-over\-symlinks]
@


1.2.32.1
log
@CVE-2014-9112: Heap-based buffer overflow in the process_copy_in
function allows remote attackers to cause a denial of service via
a large block value in a cpio archive.
Fix from a series of upstream commits by Sergey Poznyakoff, via Debian.

CVE-2015-1197: cpio, when using the --no-absolute-filenames option,
allows local users to write to arbitrary files via a symlink attack
on a file in an archive.
Fix from Vitezslav Cizek after 3.5 years of gestation in the SUSE
bug tracker, via Debian.

Also apply an upstream fix for some regression tests while here.
@
text
@d1 3
a3 6
$OpenBSD: patch-doc_cpio_1,v 1.3 2015/03/31 15:36:52 naddy Exp $

CVE-2015-1197: cpio directory traversal

--- doc/cpio.1.orig	Sat Feb 14 19:15:50 2009
+++ doc/cpio.1	Sun Mar 29 21:11:10 2015
d24 1
a24 3
@@@@ -22,9 +22,10 @@@@ cpio \- copy files to and from archives
 [\-\-owner=[user][:.][group]] [\-\-no-preserve-owner] [\-\-message=message]
 [\-\-force\-local] [\-\-no\-absolute\-filenames] [\-\-sparse]
a25 1
+[\-\-extract\-over\-symlinks]
@


1.1
log
@Update to 2.6, which brings I18N support.
Also include Debian/Ubuntu patches for CAN-2005-1111 (chmod races) and
CAN-2005-1229 (path traversal).
@
text
@d1 3
a3 3
$OpenBSD$
--- doc/cpio.1.orig	Thu Oct 20 22:08:15 2005
+++ doc/cpio.1	Thu Oct 20 22:08:49 2005
d25 2
a26 2
 [\-\-only\-verify\-crc] [\-\-quiet] [\-\-rsh-command=command] [\-\-help]
 [\-\-version] [pattern...] [< archive]
@

