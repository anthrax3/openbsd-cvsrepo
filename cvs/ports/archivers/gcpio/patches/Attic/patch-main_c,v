head	1.4;
access;
symbols
	OPENBSD_3_8:1.3.0.8
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.6
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_5:1.3.0.4
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_2:1.1.1.1.0.8
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.6
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.4
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	lebel_2001-Apr-09:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2005.10.20.21.45.18;	author naddy;	state dead;
branches;
next	1.3;

1.3
date	2005.02.11.23.28.34;	author naddy;	state Exp;
branches
	1.3.2.1
	1.3.4.1;
next	1.2;

1.2
date	2003.02.22.16.38.40;	author lebel;	state dead;
branches;
next	1.1;

1.1
date	2001.04.10.00.41.32;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.04.10.00.41.32;	author lebel;	state Exp;
branches;
next	;

1.3.2.1
date	2005.02.12.12.09.57;	author robert;	state Exp;
branches;
next	;

1.3.4.1
date	2005.02.12.12.10.53;	author robert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to 2.6, which brings I18N support.
Also include Debian/Ubuntu patches for CAN-2005-1111 (chmod races) and
CAN-2005-1229 (path traversal).
@
text
@$OpenBSD: patch-main_c,v 1.3 2005/02/11 23:28:34 naddy Exp $
--- main.c.orig	Sat Feb 12 00:13:59 2005
+++ main.c	Sat Feb 12 00:15:20 2005
@@@@ -512,7 +512,6 @@@@ main (argc, argv)
      char *argv[];
 {
   program_name = argv[0];
-  umask (0);
 
 #ifdef __TURBOC__
   _fmode = O_BINARY;		/* Put stdin and stdout in binary mode.  */
@@@@ -523,6 +522,7 @@@@ main (argc, argv)
 #endif
 
   process_args (argc, argv);
+  umask (0);
 
   initialize_buffers ();
 
@


1.3
log
@SECURITY:
cpio used a 0 umask when creating files using the -O (archive) or
-F options, which created the files with mode 0666 and allowed local
users to read or overwrite those files. (CAN-1999-1572)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3.4.1
log
@SECURITY:
cpio used a 0 umask when creating files using the -O (archive) or
-F options, which created the files with mode 0666 and allowed local
users to read or overwrite those files. (CAN-1999-1572)

ok brad@@
@
text
@@


1.3.2.1
log
@SECURITY:
cpio used a 0 umask when creating files using the -O (archive) or
-F options, which created the files with mode 0666 and allowed local
users to read or overwrite those files. (CAN-1999-1572)

ok brad@@
@
text
@@


1.2
log
@update archivers/gcpio to 2.5; thanks naddy@@ for the heads up
@
text
@d1 18
a18 6
$OpenBSD: patch-main_c,v 1.1 2001/04/10 00:41:32 lebel Exp $
--- main.c.orig	Wed Nov 30 19:24:21 1994
+++ main.c	Fri Apr  6 10:10:36 2001
@@@@ -492,7 +492,7 @@@@ initialize_buffers ()
   bzero (zeros_512, 512);
 }
a19 5
-void
+int
 main (argc, argv)
      int argc;
      char *argv[];
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: update-patches,v 1.4 2001/03/31 22:54:41 espie Exp $
@


1.1.1.1
log
@initial import of gcpio-2.4.2. naddy@@ OK.
@
text
@@
