head	1.34;
access;
symbols
	OPENBSD_6_1:1.33.0.2
	OPENBSD_6_1_BASE:1.33
	OPENBSD_6_0:1.32.0.2
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.21.0.4
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.15.0.2
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.2
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	naddy_20090910:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.34
date	2017.04.25.15.09.53;	author naddy;	state Exp;
branches;
next	1.33;
commitid	RHGv4KExyzqrZGY4;

1.33
date	2017.01.18.21.28.35;	author naddy;	state Exp;
branches;
next	1.32;
commitid	HQa4GWWjp8sp7RsH;

1.32
date	2016.03.11.20.28.21;	author naddy;	state Exp;
branches;
next	1.31;
commitid	UYLP8TE6V7RS2GhJ;

1.31
date	2016.01.17.20.28.36;	author naddy;	state Exp;
branches;
next	1.30;
commitid	WWj9GY5jrrQpbeRG;

1.30
date	2015.10.18.19.45.13;	author naddy;	state Exp;
branches;
next	1.29;
commitid	jupDZsRDGaMu3Qsd;

1.29
date	2015.10.17.22.57.56;	author naddy;	state Exp;
branches;
next	1.28;
commitid	aM88QupBVSk5KMDa;

1.28
date	2015.10.15.00.17.48;	author sthen;	state Exp;
branches;
next	1.27;
commitid	8kamreRkC8LmJHzu;

1.27
date	2015.10.14.23.16.15;	author sthen;	state Exp;
branches;
next	1.26;
commitid	eeVTf77hE0axv34o;

1.26
date	2015.10.14.21.18.51;	author sthen;	state Exp;
branches;
next	1.25;
commitid	3Z7w4noWqqwujbdx;

1.25
date	2015.03.31.18.00.23;	author naddy;	state Exp;
branches;
next	1.24;
commitid	tGRbOtp4fw2Q5D0d;

1.24
date	2015.01.12.22.07.17;	author brad;	state Exp;
branches;
next	1.23;
commitid	FShz3Ez23SnVexwT;

1.23
date	2014.09.21.12.18.29;	author naddy;	state Exp;
branches;
next	1.22;
commitid	xUpNW7nfpM8B2NR2;

1.22
date	2014.09.19.20.58.39;	author naddy;	state Exp;
branches;
next	1.21;
commitid	5Ng3XY3IMvYcWcF2;

1.21
date	2013.08.07.15.37.07;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2013.08.07.11.50.26;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2013.07.04.18.37.32;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2013.04.04.16.03.56;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.21.08.45.11;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.10.22.28.05;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.26.15.04.09;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2012.06.25.11.07.22;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2012.03.29.13.38.12;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2011.12.18.09.01.19;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.11.20.12.33.13;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.27.19.06.45;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2011.07.11.12.13.03;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2011.05.27.19.08.20;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.03.19.48.08;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.14.09.17.26;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2011.03.02.20.53.36;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.08.20.11.13;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.18.16.47.00;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.19.12.04.12;	author sebastia;	state Exp;
branches;
next	1.1;

1.1
date	2009.09.10.15.27.26;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.09.10.15.27.26;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.34
log
@switch home page and master site to https
@
text
@# $OpenBSD: Makefile,v 1.33 2017/01/18 21:28:35 naddy Exp $

COMMENT=	LZMA compression and decompression tools

DISTNAME=	xz-5.2.3
REVISION=	0
SHARED_LIBS=	lzma                 2.1      # 7.3
CATEGORIES=	archivers
DPB_PROPERTIES=	parallel

HOMEPAGE=	https://tukaani.org/xz/

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${HOMEPAGE}

# uses pledge()
WANTLIB=	c pthread

SEPARATE_BUILD=	Yes
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--disable-nls \
		--enable-external-sha256
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/build-aux

.include <bsd.port.mk>
@


1.33
log
@maintenance update to 5.2.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/03/11 20:28:21 naddy Exp $
d6 1
d11 1
a11 1
HOMEPAGE=	http://tukaani.org/xz/
@


1.32
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/01/17 20:28:36 naddy Exp $
d5 2
a6 3
DISTNAME=	xz-5.2.2
REVISION=	0
SHARED_LIBS=	lzma                 2.1      # .7.2
d24 2
a25 1
CONFIGURE_ARGS=	--disable-nls
@


1.31
log
@add pledge to xz, xzdec, lzmadec; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/10/18 19:45:13 naddy Exp $
d25 1
a25 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-nls
@


1.30
log
@maintenance update to 5.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/10/17 22:57:56 naddy Exp $
d6 1
d20 1
@


1.29
log
@revert incomplete pledge support; there are problems with signals and
with multi-threading
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/10/15 00:17:48 sthen Exp $
d5 2
a6 3
DISTNAME=	xz-5.2.1
REVISION=	3
SHARED_LIBS=	lzma                 2.1      # .7.1
@


1.28
log
@use standard "local" error handling (sprintf+exit/message_fatal) rather than
err() to avoid the need to pull in err.h, idea from deraadt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/10/14 23:16:15 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.27
log
@oops, missed err.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/10/14 21:18:51 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.26
log
@Initial pledge() for xz, after initial setup (which looks at a few sysctls)
it's easy to drop to only allowing stdio and file operations. There's scope to
push this further (e.g. when used in a simple pipeline, no more than stdio
should be necessary).  ok naddy@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/03/31 18:00:23 naddy Exp $
d6 1
a6 1
REVISION=	0
@


1.25
log
@maintenance update to 5.2.1 and enable multi-threading; mostly from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/01/12 22:07:17 brad Exp $
d6 1
@


1.24
log
@Update to xz 5.2.0.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/09/21 12:18:29 naddy Exp $
d5 2
a6 2
DISTNAME=	xz-5.2.0
SHARED_LIBS=	lzma                 2.0      # .7.0
d19 1
a19 1
WANTLIB=	c
a23 1
		--disable-threads \
@


1.23
log
@update to 5.0.7: fix invalid Libs.private value in liblzma.pc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/09/19 20:58:39 naddy Exp $
d5 2
a6 2
DISTNAME=	xz-5.0.7
SHARED_LIBS=	lzma                 1.0      # .5.6
@


1.22
log
@maintenance update to 5.0.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/08/07 15:37:07 naddy Exp $
d5 1
a5 1
DISTNAME=	xz-5.0.6
@


1.21
log
@kill direct and indirect references to GCC2_ARCHS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/08/07 11:50:26 espie Exp $
d5 2
a6 2
DISTNAME=	xz-5.0.5
SHARED_LIBS=	lzma                 1.0      # .5.5
a7 1
REVISION =	0
@


1.20
log
@zap nls, so that it doesn't depend on gettext
should tweak build order somewhat, and make it easier to put on the CD
if we want to.

okay naddy@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.19 2013/07/04 18:37:32 naddy Exp $

NOT_FOR_ARCHS=	${GCC2_ARCHS}
@


1.19
log
@maintenance update to 5.0.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/04/04 16:03:56 brad Exp $
d10 1
a21 2
MODULES=	devel/gettext

d27 2
a28 1
		--disable-threads
@


1.18
log
@sync distinfo and merge in PFRAG.shared.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/21 08:45:11 ajacoutot Exp $
d7 2
a8 3
DISTNAME=	xz-5.0.4
REVISION=	0
SHARED_LIBS=	lzma                 1.0      # .5.4
@


1.17
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/10 22:28:05 espie Exp $
d8 1
@


1.16
log
@regress -> test
PERMIT_* cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/09/26 15:04:09 sthen Exp $
a24 1
USE_LIBTOOL=	Yes
@


1.15
log
@add DPB_PROPERTIES=Parallel for some things high in the dependency tree
which benefit from it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/06/25 11:07:22 naddy Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.14
log
@maintenance update to 5.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/03/29 13:38:12 sthen Exp $
d10 1
@


1.13
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/12/18 09:01:19 ajacoutot Exp $
d7 2
a8 3
DISTNAME=	xz-5.0.3
REVISION=	1
SHARED_LIBS=	lzma                 1.0      # .5.3
@


1.12
log
@Remove USE_GROFF from ports where mandoc doesn't have any ERRORs and
formatting looks Ok.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/11/20 12:33:13 naddy Exp $
d29 1
a29 1
SEPARATE_BUILD=	simple
@


1.11
log
@requires C99
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/07/27 19:06:45 naddy Exp $
a28 1
USE_GROFF=	Yes
@


1.10
log
@disable unaligned access optimization on all __STRICT_ALIGNMENT archs
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.9 2011/07/11 12:13:03 jasper Exp $
@


1.9
log
@- no need to use the gcc3 module anymore on sparc

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/05/27 19:08:20 naddy Exp $
d6 1
a6 1
REVISION=	0
@


1.8
log
@minor bugfix update to 5.0.3; from Antti Harri
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/05/03 19:48:08 naddy Exp $
d6 1
d22 1
a22 2
MODULES=	devel/gettext gcc3
MODGCC3_ARCHES=	sparc
d27 1
a27 1
USE_GROFF =	Yes
@


1.7
log
@update to 5.0.2; prodded by Wim Lewis
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/03/14 09:17:26 sthen Exp $
d5 2
a6 2
DISTNAME=	xz-5.0.2
SHARED_LIBS=	lzma                 1.0      # .5.0
@


1.6
log
@fix various typos, from Anthony J. Bentley with a few tweaks by myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/03/02 20:53:36 naddy Exp $
d5 1
a5 2
DISTNAME=	xz-5.0.1
REVISION=	0
@


1.5
log
@Update to 5.0.1:
* xz --force now (de)compresses files that have setuid, setgid,
  or sticky bit set and files that have multiple hard links.
  The man page had it documented this way already, but the code
  had a bug.
* gzip and bzip2 support in xzdiff was fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/08 20:11:13 naddy Exp $
d6 1
@


1.4
log
@update to first non-beta release 5.0.0; mostly from steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/18 16:47:00 espie Exp $
d5 1
a5 1
DISTNAME=	xz-5.0.0
@


1.3
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/07/19 12:04:12 sebastia Exp $
d5 2
a6 2
DISTNAME=	xz-4.999.9beta
SHARED_LIBS +=  lzma                 0.0      # .0.0
a30 1
		--enable-dynamic=yes \
@


1.2
log
@Use gcc3 module to build on sparc.
OK naddy@@, landry@@, steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/09/10 15:27:26 naddy Exp $
d27 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d21 3
a23 1
MODULES=	devel/gettext
@


1.1.1.1
log
@Import XZ Utils 4.999.9beta, which replaces LZMA Utils.

LZMA is a general purporse compression algorithm designed by Igor
Pavlov as part of 7-Zip. It provides high compression ratio while
keeping the decompression speed fast.

XZ Utils are an attempt to make LZMA compression easy to use on
free (as in freedom) operating systems. This is achieved by providing
tools and libraries which are similar to use than the equivalents
of the most popular existing compression algorithms.
@
text
@@
