head	1.6;
access;
symbols
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	OPENBSD_2_3:1.1.0.2
	OPENBSD_2_3_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2000.07.24.02.43.00;	author brad;	state dead;
branches;
next	1.5;

1.5
date	2000.07.20.23.13.35;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.26.22.34.29;	author brad;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	99.12.24.23.33.30;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	98.06.22.10.15.31;	author form;	state dead;
branches;
next	1.1;

1.1
date	97.11.24.19.49.53;	author angelos;	state Exp;
branches;
next	;

1.4.2.1
date	2000.09.15.04.40.54;	author marc;	state dead;
branches;
next	;


desc
@@


1.6
log
@upgrade to unzip 5.41
@
text
@--- unix/Makefile.orig	Thu Nov 19 16:59:08 1998
+++ unix/Makefile	Thu Jul 20 19:09:37 2000
@@@@ -61,8 +61,8 @@@@
 
 # general-purpose stuff
 #CP = cp
-CP = ln
-LN = ln
+CP = ln -s
+LN = ln -fs
 RM = rm -f
 CHMOD = chmod
 BINPERMS = 755
@@@@ -412,18 +412,16 @@@@
 
 install:	$(MANS)
 	-$(INSTALL_D) $(BINDIR)
-	$(INSTALL) $(UNZIPS) $(BINDIR)
-	$(INSTALL) unix/zipgrep $(BINDIR)
+	$(BSD_INSTALL_PROGRAM) $(UNZIPS) $(BINDIR)
+	$(BSD_INSTALL_SCRIPT) unix/zipgrep $(BINDIR)
 	$(RM) $(BINDIR)/zipinfo$E
 	$(LN) $(BINDIR)/unzip$E $(BINDIR)/zipinfo$E
 	-$(INSTALL_D) $(MANDIR)
-	$(INSTALL) unix/funzip.1 $(MANDIR)/funzip.$(manext)
-	$(INSTALL) unix/unzip.1 $(MANDIR)/unzip.$(manext)
-	$(INSTALL) unix/unzipsfx.1 $(MANDIR)/unzipsfx.$(manext)
-	$(INSTALL) unix/zipgrep.1 $(MANDIR)/zipgrep.$(manext)
-	$(INSTALL) unix/zipinfo.1 $(MANDIR)/zipinfo.$(manext)
-	$(CHMOD) $(BINPERMS) $(INSTALLEDBIN)
-	$(CHMOD) $(MANPERMS) $(INSTALLEDMAN)
+	$(BSD_INSTALL_MAN) unix/funzip.1 $(MANDIR)/funzip.$(manext)
+	$(BSD_INSTALL_MAN) unix/unzip.1 $(MANDIR)/unzip.$(manext)
+	$(BSD_INSTALL_MAN) unix/unzipsfx.1 $(MANDIR)/unzipsfx.$(manext)
+	$(BSD_INSTALL_MAN) unix/zipgrep.1 $(MANDIR)/zipgrep.$(manext)
+	$(BSD_INSTALL_MAN) unix/zipinfo.1 $(MANDIR)/zipinfo.$(manext)
 
 uninstall:
 	$(RM) $(INSTALLEDBIN) $(INSTALLEDMAN)
@@@@ -531,8 +529,8 @@@@
 	$(MAKE) objsdll CC=gcc CF="-O3 -Wall -I. -fPIC -DDLL $(LOC)"
 	gcc -shared -Wl,-soname,libunzip.so.0 -o libunzip.so.0.4 $(OBJSDLL)
 	$(RM) libunzip.so.0 libunzip.so
-	$(LN) -s libunzip.so.0.4 libunzip.so.0
-	$(LN) -s libunzip.so.0 libunzip.so
+	$(LN) libunzip.so.0.4 libunzip.so.0
+	$(LN) libunzip.so.0 libunzip.so
 	gcc -c -O unzipstb.c
 	gcc -o unzip_shlib unzipstb.o -L. -lunzip
 
@


1.5
log
@use symbolic links instead of hard links
@
text
@@


1.4
log
@- make use of MAKE_FLAGS
- bump NEED_VERSION
@
text
@d2 12
a13 1
+++ unix/Makefile	Sun Mar 26 17:25:48 2000
d40 11
@


1.4.2.1
log
@bring cut-off archivers into 2.7 branch
@
text
@@


1.3
log
@- remove do-install target
- cleanup Makefile
- make this port respect CC and CFLAGS
- use unzip's own install target and use BSD_INSTALL macros instead of
just copying the files
@
text
@d2 2
a3 27
+++ unix/Makefile	Fri Dec 24 04:11:38 1999
@@@@ -42,12 +42,11 @@@@
 # such as -DDOSWILD).
 
 # UnZip flags
-CC = cc#	try using "gcc" target rather than changing this (CC and LD
-LD = $(CC)#	must match, else "unresolved symbol:  ___main" is possible)
+LD = $(CC)
 AS = as
-LOC = $(LOCAL_UNZIP)
+LOC = $(CFLAGS) -DUSE_UNSHRINK
 AF = $(LOC)
-CF = -O -I. $(LOC)
+CF = -I. $(LOC)
 LF = -o unzip
 LF2 = -s
 
@@@@ -98,7 +97,7 @@@@
 INSTALL_D = mkdir -p
 # on some systems, manext=l and MANDIR=/usr/man/man$(manext) may be appropriate
 manext = 1
-prefix = /usr/local
+prefix = $(PREFIX)
 BINDIR = $(prefix)/bin#			where to install executables
 MANDIR = $(prefix)/man/man$(manext)#	where to install man pages
 INSTALLEDBIN = $(BINDIR)/funzip$E $(BINDIR)/unzip$E $(BINDIR)/unzipsfx$E \
@@@@ -412,18 +411,16 @@@@
@


1.2
log
@fix...
@
text
@d1 53
a53 34
*** unix/Makefile.orig	Mon Nov 24 14:30:41 1997
--- unix/Makefile	Mon Nov 24 14:37:38 1997
***************
*** 123,129 ****
  SYSTEMS6 = next next10 next2x next3x nextfat osf1 pixel ptx pyramid realix 
  SYSTEMS7 = regulus rs6000 sco sco_dos sco_sl sco_x286 sequent sgi solaris 
  SYSTEMS8 = solaris_pkg stardent stellar sunos3 sunos4 sysv sysv_gcc sysv6300 
! SYSTEMS9 = tahoe ti_sysv ultrix vax v7 wombat xenix xos
  
  
  ####################
--- 123,129 ----
  SYSTEMS6 = next next10 next2x next3x nextfat osf1 pixel ptx pyramid realix 
  SYSTEMS7 = regulus rs6000 sco sco_dos sco_sl sco_x286 sequent sgi solaris 
  SYSTEMS8 = solaris_pkg stardent stellar sunos3 sunos4 sysv sysv_gcc sysv6300 
! SYSTEMS9 = tahoe ti_sysv ultrix vax v7 wombat xenix xos openbsd
  
  
  ####################
***************
*** 661,666 ****
--- 661,672 ----
  # FreeBSD on Intel:
  freebsd:		unix_make
  	@@echo 'NOTE:  use bsd target for non-Intel FreeBSD compiles (if any).'
+ 	$(MAKE) unzips CC=gcc LD=gcc AS=gcc\
+ 	 CF="-O3 -Wall -I. -DASM_CRC -DBSD $(LOC)"\
+ 	 AF="-Di386 $(AF)" CRC32=crc_gcc
+ 
+ # OpenBSD
+ openbsd:		unix_make
  	$(MAKE) unzips CC=gcc LD=gcc AS=gcc\
  	 CF="-O3 -Wall -I. -DASM_CRC -DBSD $(LOC)"\
  	 AF="-Di386 $(AF)" CRC32=crc_gcc
@


1.1
log
@Add unzip port.
@
text
@@

