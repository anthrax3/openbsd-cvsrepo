head	1.60;
access;
symbols
	OPENBSD_6_1:1.60.0.2
	OPENBSD_6_1_BASE:1.60
	OPENBSD_6_0:1.58.0.4
	OPENBSD_6_0_BASE:1.58
	OPENBSD_5_9:1.58.0.2
	OPENBSD_5_9_BASE:1.58
	OPENBSD_5_8:1.54.0.4
	OPENBSD_5_8_BASE:1.54
	OPENBSD_5_7:1.52.0.2
	OPENBSD_5_7_BASE:1.52
	OPENBSD_5_6:1.49.0.2
	OPENBSD_5_6_BASE:1.49
	OPENBSD_5_5:1.47.0.2
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.46.0.2
	OPENBSD_5_4_BASE:1.46
	OPENBSD_5_3:1.43.0.8
	OPENBSD_5_3_BASE:1.43
	OPENBSD_5_2:1.43.0.6
	OPENBSD_5_2_BASE:1.43
	OPENBSD_5_1_BASE:1.43
	OPENBSD_5_1:1.43.0.4
	OPENBSD_5_0:1.43.0.2
	OPENBSD_5_0_BASE:1.43
	OPENBSD_4_9:1.42.0.2
	OPENBSD_4_9_BASE:1.42
	OPENBSD_4_8:1.41.0.2
	OPENBSD_4_8_BASE:1.41
	OPENBSD_4_7:1.40.0.8
	OPENBSD_4_7_BASE:1.40
	OPENBSD_4_6:1.40.0.6
	OPENBSD_4_6_BASE:1.40
	OPENBSD_4_5:1.40.0.4
	OPENBSD_4_5_BASE:1.40
	OPENBSD_4_4:1.40.0.2
	OPENBSD_4_4_BASE:1.40
	OPENBSD_4_3:1.39.0.2
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.38.0.6
	OPENBSD_4_2_BASE:1.38
	OPENBSD_4_1:1.38.0.4
	OPENBSD_4_1_BASE:1.38
	OPENBSD_4_0:1.38.0.2
	OPENBSD_4_0_BASE:1.38
	OPENBSD_3_9:1.37.0.4
	OPENBSD_3_9_BASE:1.37
	OPENBSD_3_8:1.37.0.2
	OPENBSD_3_8_BASE:1.37
	OPENBSD_3_7:1.36.0.2
	OPENBSD_3_7_BASE:1.36
	OPENBSD_3_6:1.35.0.2
	OPENBSD_3_6_BASE:1.35
	OPENBSD_3_5:1.32.0.4
	OPENBSD_3_5_BASE:1.32
	OPENBSD_3_4:1.32.0.2
	OPENBSD_3_4_BASE:1.32
	OPENBSD_3_3:1.29.0.4
	OPENBSD_3_3_BASE:1.29
	OPENBSD_3_2:1.29.0.2
	OPENBSD_3_2_BASE:1.29
	OPENBSD_3_1:1.28.0.2
	OPENBSD_3_1_BASE:1.28
	OPENBSD_3_0:1.26.0.2
	OPENBSD_3_0_BASE:1.26
	OPENBSD_2_9_TRACKING_SWITCH:1.25
	OPENBSD_2_9:1.24.0.2
	OPENBSD_2_9_BASE:1.24
	OPENBSD_2_8:1.20.0.2
	OPENBSD_2_8_BASE:1.20
	OPENBSD_2_7:1.17.0.2
	OPENBSD_2_7_BASE:1.17
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2;
locks; strict;
comment	@# @;


1.60
date	2017.03.23.17.26.17;	author bluhm;	state Exp;
branches;
next	1.59;
commitid	AKvOWgM1JlPfL9UC;

1.59
date	2016.09.13.11.44.06;	author naddy;	state Exp;
branches;
next	1.58;
commitid	C6SmwZ8lkBQj7CMw;

1.58
date	2016.01.15.19.57.24;	author sthen;	state Exp;
branches
	1.58.4.1;
next	1.57;
commitid	E468onXLCPTmHVpN;

1.57
date	2015.11.30.15.16.29;	author sthen;	state Exp;
branches;
next	1.56;
commitid	6h1wx1ly7xAGYE2e;

1.56
date	2015.10.20.13.13.52;	author ajacoutot;	state Exp;
branches;
next	1.55;
commitid	1yOrpJNjathxt7QZ;

1.55
date	2015.10.16.16.22.16;	author sthen;	state Exp;
branches;
next	1.54;
commitid	XskTEemw8gNR4AEG;

1.54
date	2015.05.11.21.22.06;	author czarkoff;	state Exp;
branches;
next	1.53;
commitid	hFrOUUPVYNihRcQk;

1.53
date	2015.05.11.21.19.23;	author czarkoff;	state Exp;
branches;
next	1.52;
commitid	1S9miRjiTnPRTARw;

1.52
date	2015.02.06.21.37.04;	author naddy;	state Exp;
branches;
next	1.51;
commitid	brtKeMQtJb1XFQo4;

1.51
date	2014.12.09.22.51.35;	author rpe;	state Exp;
branches;
next	1.50;
commitid	SzSRrLz5NECW5PvF;

1.50
date	2014.10.07.10.13.57;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	KYwWEIIbajAmHKK8;

1.49
date	2014.04.20.10.00.21;	author jasper;	state Exp;
branches
	1.49.2.1;
next	1.48;

1.48
date	2014.03.10.12.02.59;	author naddy;	state Exp;
branches;
next	1.47;

1.47
date	2014.01.09.15.22.45;	author naddy;	state Exp;
branches
	1.47.2.1;
next	1.46;

1.46
date	2013.07.16.18.44.39;	author schwarze;	state Exp;
branches;
next	1.45;

1.45
date	2013.05.24.18.58.40;	author edd;	state Exp;
branches;
next	1.44;

1.44
date	2013.03.10.22.28.05;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2011.05.17.19.01.39;	author landry;	state Exp;
branches;
next	1.42;

1.42
date	2010.10.18.16.47.00;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2010.04.25.10.36.05;	author jsg;	state Exp;
branches;
next	1.40;

1.40
date	2008.03.25.19.39.30;	author jasper;	state Exp;
branches;
next	1.39;

1.39
date	2007.09.15.10.14.33;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2006.07.11.06.55.28;	author steven;	state Exp;
branches;
next	1.37;

1.37
date	2005.06.21.19.48.28;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2004.11.21.12.50.33;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2004.06.27.23.29.55;	author pvalchev;	state Exp;
branches;
next	1.34;

1.34
date	2004.06.25.14.04.08;	author sturm;	state Exp;
branches;
next	1.33;

1.33
date	2004.06.24.21.35.14;	author sturm;	state Exp;
branches;
next	1.32;

1.32
date	2003.08.17.23.48.40;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2003.07.02.16.03.59;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2003.05.24.02.40.42;	author jolan;	state Exp;
branches;
next	1.29;

1.29
date	2002.07.05.01.07.26;	author brad;	state Exp;
branches
	1.29.2.1
	1.29.4.1;
next	1.28;

1.28
date	2002.03.21.20.35.41;	author espie;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	2001.10.28.13.05.45;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2001.10.04.22.26.48;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2001.08.14.18.35.59;	author pvalchev;	state Exp;
branches;
next	1.24;

1.24
date	2001.04.20.17.35.36;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2001.04.09.14.06.41;	author avsm;	state Exp;
branches;
next	1.22;

1.22
date	2001.03.29.15.02.02;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2001.02.26.08.44.53;	author kevlo;	state Exp;
branches;
next	1.20;

1.20
date	2000.10.07.20.05.33;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.07.24.02.42.59;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2000.06.10.20.22.18;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.03.26.22.34.28;	author brad;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2000.03.24.22.11.34;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.16.03.36.31;	author kevlo;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.05.18.31.25;	author todd;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.22.17.08.34;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.02.11.00.37.16;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.02.05.17.49.01;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.12.24.23.33.30;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.09.06.17.40.58;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.04.02.06.39.47;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	99.04.01.02.16.41;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.03.24.04.35.24;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	98.10.20.08.39.43;	author form;	state Exp;
branches;
next	1.4;

1.4
date	98.06.24.16.39.19;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.06.22.10.05.57;	author form;	state Exp;
branches;
next	1.2;

1.2
date	97.11.27.22.22.03;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	97.11.24.19.49.51;	author angelos;	state Exp;
branches;
next	;

1.17.2.1
date	2000.09.15.04.40.53;	author marc;	state Exp;
branches;
next	;

1.28.2.1
date	2002.09.30.16.55.44;	author brad;	state Exp;
branches;
next	;

1.29.2.1
date	2003.07.02.16.09.06;	author brad;	state Exp;
branches;
next	1.29.2.2;

1.29.2.2
date	2003.08.18.00.04.42;	author brad;	state Exp;
branches;
next	;

1.29.4.1
date	2003.07.02.16.06.52;	author brad;	state Exp;
branches;
next	1.29.4.2;

1.29.4.2
date	2003.08.18.00.01.55;	author brad;	state Exp;
branches;
next	;

1.47.2.1
date	2015.02.07.16.10.12;	author naddy;	state Exp;
branches;
next	;
commitid	kdfxzaCb2rwAYF96;

1.49.2.1
date	2015.02.07.16.09.53;	author naddy;	state Exp;
branches;
next	;
commitid	402Kj726Pf7WgFX2;

1.58.4.1
date	2017.03.27.12.25.15;	author pirofti;	state Exp;
branches;
next	;
commitid	dwmOwe5VLIc9aQKL;


desc
@@


1.60
log
@Apply a bunch of CVE and other fixes for unzip from debian and
redhat bug tracker.  Add the links to the patch files.  The fix for
CVE-2014-9636 was improved.
OK jca@@
@
text
@# $OpenBSD: Makefile,v 1.59 2016/09/13 11:44:06 naddy Exp $

PORTROACH =	skipv:552

COMMENT =	extract, list & test files in a ZIP archive

VERSION =	6.0
DISTNAME =	unzip${VERSION:S/.//}
PKGNAME =	unzip-${VERSION}
REVISION =	10
CATEGORIES =	archivers
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=infozip/} \
		ftp://ftp.info-zip.org/pub/infozip/src/

HOMEPAGE =	http://www.info-zip.org/UnZip.html

FLAVORS =	iconv
FLAVOR ?=

# Conditional
PERMIT_PACKAGE_CDROM =	Yes

# uses pledge()
WANTLIB =		c

MAKE_FLAGS =	CC="${CC}" LD="${CC}" CF="${CFLAGS}" LOC="${LOC}"
FAKE_FLAGS =	prefix="${WRKINST}${PREFIX}"

MAKE_FILE =	unix/Makefile

ALL_TARGET =	bsd

DOCS =	COPYING.OLD LICENSE README WHERE

LOC =		-DLARGE_FILE_SUPPORT -DNO_LCHMOD -DUSE_UNSHRINK

.if ${FLAVOR:L:Miconv}
LIB_DEPENDS +=	converters/libiconv
WANTLIB +=	iconv
CFLAGS +=	-I${LOCALBASE}/include
LOC +=		-DUNICODE_SUPPORT -DUNICODE_WCHAR -DUTF8_MAYBE_NATIVE \
		-DNO_WORKING_ISPRINT
MAKE_FLAGS +=	LF2="-L${LOCALBASE}/lib -liconv"
PATCH_LIST =	patch-* iconv-*
.endif

CFLAGS +=	-I. ${LOC}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/unzip
	cd ${WRKSRC}; ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/unzip

do-test:
	cd ${WRKBUILD} && ./unzip -x -a -o testmake.zip
	cmp -s ${WRKBUILD}/notes ${FILESDIR}/notes

.include <bsd.port.mk>
@


1.59
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/01/15 19:57:24 sthen Exp $
d10 1
a10 1
REVISION =	9
@


1.58
log
@add an easily-greppable marker for ports known to use pledge().
it's not so important while they're only in patches in the ports tree,
but for any which get upstreamed it saves a ~100GB grep to find them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2015/11/30 15:16:29 sthen Exp $
d38 2
a39 1
MODULES +=	converters/libiconv
@


1.58.4.1
log
@Backport the unzip CVE fixes committed by bluhm@@.

%-------------------------------------------------------------------
 Apply a bunch of CVE and other fixes for unzip from debian and
 redhat bug tracker.  Add the links to the patch files.  The fix for
 CVE-2014-9636 was improved.
 OK jca@@
%-------------------------------------------------------------------

OK robert@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/01/15 19:57:24 sthen Exp $
d10 1
a10 1
REVISION =	10
@


1.57
log
@add portroach marker, skipv:552
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2015/10/20 13:13:52 ajacoutot Exp $
d22 2
@


1.56
log
@tame -> pledge

ok sthen@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.55 2015/10/16 16:22:16 sthen Exp $
@


1.55
log
@unzip can pledge to use the following: stdio rpath wpath cpath fattr tty.
This is possible now that pledge(2) treats TIOCGWINSZ like TIOCGETA, allowing
it to return ENOTTY rather than killing the process for a non-terminal device.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2015/05/11 21:22:06 czarkoff Exp $
d8 1
a8 1
REVISION =	8
@


1.54
log
@consistent spacing

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2015/05/11 21:19:23 czarkoff Exp $
d8 1
a8 1
REVISION =	7
@


1.53
log
@add "iconv" flavor

OK sthen@@, stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/02/06 21:37:04 naddy Exp $
d3 1
a3 1
COMMENT=	extract, list & test files in a ZIP archive
d5 3
a7 3
VERSION=	6.0
DISTNAME=	unzip${VERSION:S/.//}
PKGNAME=	unzip-${VERSION}
d9 2
a10 2
CATEGORIES=	archivers
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=infozip/} \
d19 2
a20 2
PERMIT_PACKAGE_CDROM=	Yes
WANTLIB=		c
d22 2
a23 2
MAKE_FLAGS=	CC="${CC}" LD="${CC}" CF="${CFLAGS}" LOC="${LOC}"
FAKE_FLAGS=	prefix="${WRKINST}${PREFIX}"
d25 1
a25 1
MAKE_FILE=	unix/Makefile
d27 1
a27 1
ALL_TARGET=	bsd
d29 1
a29 1
DOCS=	COPYING.OLD LICENSE README WHERE
@


1.52
log
@Security fixes:
CVE-2014-8139: CRC32 verification heap-based overflow
CVE-2014-8140: out-of-bounds write issue in test_compr_eb()
CVE-2014-8141: out-of-bounds read issues in getZip64Data()
CVE-2014-9636: out-of-bounds read/write in test_compr_eb()

Via Debian; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2014/12/09 22:51:35 rpe Exp $
d8 1
a8 1
REVISION =	6
d15 3
d22 1
a22 2
MAKE_FLAGS=	CC="${CC}" LD="${CC}" CF='-I. $$(LOC)' \
		LOC="${CFLAGS} -DUSE_UNSHRINK -DNO_LCHMOD"
d30 13
@


1.51
log
@Remove mirror.switch.ch from MASTER_SITES.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2014/10/07 10:13:57 ajacoutot Exp $
d8 1
a8 1
REVISION =	5
@


1.50
log
@Trailing whitespace.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/04/20 10:00:21 jasper Exp $
a10 1
		http://mirror.switch.ch/ftp/mirror/infozip/src/ \
@


1.49
log
@use ${FILESDIR} instead of hardcoding 'files/'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/03/10 12:02:59 naddy Exp $
d8 1
a8 1
REVISION =	4
@


1.49.2.1
log
@Security fixes:
CVE-2014-8139: CRC32 verification heap-based overflow
CVE-2014-8140: out-of-bounds write issue in test_compr_eb()
CVE-2014-8141: out-of-bounds read issues in getZip64Data()
CVE-2014-9636: out-of-bounds read/write in test_compr_eb()

Via Debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/04/20 10:00:21 jasper Exp $
d8 1
a8 1
REVISION =	5
@


1.48
log
@we have lchown()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/01/09 15:22:45 naddy Exp $
d36 1
a36 1
	cmp -s ${WRKBUILD}/notes files/notes
@


1.47
log
@fix extraction of symlinks; found by tedu@@
http://article.gmane.org/gmane.comp.version-control.git/181173
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/07/16 18:44:39 schwarze Exp $
d8 1
a8 1
REVISION =	3
d21 1
a21 1
		LOC="${CFLAGS} -DUSE_UNSHRINK -DNO_LCHMOD -DNO_LCHOWN"
@


1.47.2.1
log
@Security fixes:
CVE-2014-8139: CRC32 verification heap-based overflow
CVE-2014-8140: out-of-bounds write issue in test_compr_eb()
CVE-2014-8141: out-of-bounds read issues in getZip64Data()
CVE-2014-9636: out-of-bounds read/write in test_compr_eb()

Via Debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/01/09 15:22:45 naddy Exp $
d8 1
a8 1
REVISION =	4
@


1.46
log
@Some time ago, espie@@ sent me this patch to drop USE_GROFF.
Back then, the patch was actually incorrect, mandoc(1) didn't cope.
Meanwhile, i fixed both mandoc and groff in all required respects.
Committing now because of an author timeout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2013/05/24 18:58:40 edd Exp $
d8 1
a8 1
REVISION =	2
@


1.45
log
@The unzip HOMEPAGE was dead. Revise to the current home page.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2013/03/10 22:28:05 espie Exp $
d8 1
a8 1
REVISION =	1
a22 1
USE_GROFF =	Yes
@


1.44
log
@regress -> test
PERMIT_* cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/05/17 19:01:39 landry Exp $
d8 1
a8 1
REVISION=	0
d14 1
a14 1
HOMEPAGE=	http://www.ctan.org/tex-archive/tools/zip/info-zip/UnZip.html
@


1.43
log
@Remove hppa-specific hack adding -O0, it seems to just build and run
fine now. Fold back common MAKE_FLAGS in a single place.
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/10/18 16:47:00 espie Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d35 1
a35 1
do-regress:
@


1.42
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/04/25 10:36:05 jsg Exp $
d8 1
d23 2
a24 1
MAKE_FLAGS=	CC="${CC}" LD="${CC}" CF='-I. $$(LOC)'
a26 7

# Workaround compiler bug on hppa which causes crashes
.if ${MACHINE_ARCH} == "hppa"
MAKE_FLAGS+=	LOC="${CFLAGS} -O0 -DUSE_UNSHRINK -DNO_LCHMOD -DNO_LCHOWN"
.else
MAKE_FLAGS+=	LOC="${CFLAGS} -DUSE_UNSHRINK -DNO_LCHMOD -DNO_LCHOWN"
.endif
@


1.41
log
@update to unzip 6.0 which adds support for ZIP64 & UTF8 filenames
among other things.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/03/25 19:39:30 jasper Exp $
d24 1
@


1.40
log
@Security fix for unzip;
fix CVE-2008-0888, patch from debian.
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-0888

ok grunk@@ (who came up with the same diff)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/09/15 10:14:33 espie Exp $
d5 1
a5 1
VERSION=	5.52
d7 1
a7 1
PKGNAME=	unzip-${VERSION}p0
d27 1
a27 1
MAKE_FLAGS+=	LOC="${CFLAGS} -O0 -DUSE_UNSHRINK"
d29 1
a29 1
MAKE_FLAGS+=	LOC="${CFLAGS} -DUSE_UNSHRINK"
a34 2

WRKDIST=	${WRKDIR}/unzip-${VERSION}
@


1.39
log
@zap all quotes in COMMENT/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/07/11 06:55:28 steven Exp $
d7 1
a7 1
PKGNAME=	unzip-${VERSION}
@


1.38
log
@fix master sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2005/06/21 19:48:28 naddy Exp $
d3 1
a3 1
COMMENT=	"extract, list & test files in a ZIP archive"
@


1.37
log
@maintenance update to 5.52; from Alexandre Anriot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2004/11/21 12:50:33 espie Exp $
d9 3
a11 3
MASTER_SITES=	ftp://ftp.info-zip.org/pub/infozip/src/ \
		ftp://ftp.uu.net/pub/archiving/zip/src/ \
		ftp://ftp.icce.rug.nl/infozip/src/
@


1.36
log
@Mark all system libs in WANTLIB, result of running newlib-depends-check
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2004/06/27 23:29:55 pvalchev Exp $
d5 1
a5 1
VERSION=	5.51
@


1.35
log
@Use -O0 to compile on hppa, workarounds a compiler bug which lead to
crashes, hangs, and other odd behaviour during extraction.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2004/06/25 14:04:08 sturm Exp $
d20 1
@


1.34
log
@keep the dash in the PKGNAME, noticed by Jacob Meuser
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2004/06/24 21:35:14 sturm Exp $
d21 1
a21 2
MAKE_FLAGS=	CC="${CC}" LD="${CC}" CF='-I. $$(LOC)' \
		LOC="${CFLAGS} -DUSE_UNSHRINK"
d23 7
@


1.33
log
@update to unzip 5.51
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2003/08/17 23:48:40 brad Exp $
d7 1
@


1.32
log
@Improvement on the existing directory traversal patch, fixes the case
where the path component includes a quoted slash.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2003/07/02 16:03:59 brad Exp $
d5 1
a5 1
VERSION=	5.50
a6 1
PKGNAME=	unzip-${VERSION}p2
@


1.31
log
@Another directory traversal issue in unzip 5.50 and earlier. Similar to
the first except this issue is triggered by prefixing the .. sequence with
certain non-printable characters which are filtered out resulting in just
the .. sequence.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2003/05/24 02:40:42 jolan Exp $
d7 1
a7 1
PKGNAME=	unzip-${VERSION}p1
@


1.30
log
@lzo     -- # GPL
lzop    -- # GNU GPL -> # GPL
macutil -- sync w/# None style
nulib   -- # Restrictive
rar     -- # Restrictive
ucl     -- # GPL
unace   -- # Copyrighted but freely distributable.
             That's all the author states.  Is this acceptable as a
             license?
        -- Drop MAINTAINER per his request
unarj   -- # Restrictive
           PERMIT_*_CDROM=No
             "If you wish to distribute a modified version of UNARJ
              you MUST indicate that it is a modified version both in
              the program and source code."
unrar  --  # Restrictive
unzip  --  # Conditional
             It is freely re-distributable with conditions which we meet.
             This could use another pair of eyes to confirm.
zip    --  # Conditional
             Same thing as unzip.
zoo    --  # Conditional
             Different author/license but same idea as zip/unzip.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2002/07/05 01:07:26 brad Exp $
d5 3
a7 2
DISTNAME=	unzip550
PKGNAME=	unzip-5.50
d29 1
a29 1
WRKDIST=	${WRKDIR}/${PKGNAME}
@


1.29
log
@upgrade to unzip 5.50
--
From: Aaron Yourk <ayourk@@srt.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/03/21 20:35:41 espie Exp $
d14 1
@


1.29.2.1
log
@Another directory traversal issue in unzip 5.50 and earlier. Similar to
the first except this issue is triggered by prefixing the .. sequence with
certain non-printable characters which are filtered out resulting in just
the .. sequence.

http://marc.theaimsgroup.com/?l=bugtraq&m=105259038503175&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2003/07/02 16:03:59 brad Exp $
d5 2
a6 3
VERSION=	5.50
DISTNAME=	unzip${VERSION:S/.//}
PKGNAME=	unzip-${VERSION}p1
a13 1
# Conditional
d27 1
a27 1
WRKDIST=	${WRKDIR}/unzip-${VERSION}
@


1.29.2.2
log
@MFC:
Improvement on the existing directory traversal patch, fixes the case
where the path component includes a quoted slash.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29.2.1 2003/07/02 16:09:06 brad Exp $
d7 1
a7 1
PKGNAME=	unzip-${VERSION}p2
@


1.29.4.1
log
@Another directory traversal issue in unzip 5.50 and earlier. Similar to
the first except this issue is triggered by prefixing the .. sequence with
certain non-printable characters which are filtered out resulting in just
the .. sequence.

http://marc.theaimsgroup.com/?l=bugtraq&m=105259038503175&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2003/07/02 16:03:59 brad Exp $
d5 2
a6 3
VERSION=	5.50
DISTNAME=	unzip${VERSION:S/.//}
PKGNAME=	unzip-${VERSION}p1
a13 1
# Conditional
d27 1
a27 1
WRKDIST=	${WRKDIR}/unzip-${VERSION}
@


1.29.4.2
log
@MFC:
Improvement on the existing directory traversal patch, fixes the case
where the path component includes a quoted slash.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29.4.1 2003/07/02 16:06:52 brad Exp $
d7 1
a7 1
PKGNAME=	unzip-${VERSION}p2
@


1.28
log
@bump NEED_VERSION for distinfo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/10/28 13:05:45 espie Exp $
d5 2
a6 2
DISTNAME=	unzip542
PKGNAME=	unzip-5.42
d8 2
a9 2
NEED_VERSION=	1.515
MASTER_SITES=	ftp://ftp.uu.net/pub/archiving/zip/src/ \
@


1.28.2.1
log
@Fix two security related issues...
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2001-1268
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2001-1269

MFC:
upgrade to unzip 5.50
--
From: Aaron Yourk <ayourk@@srt.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/03/21 20:35:41 espie Exp $
d5 2
a6 2
DISTNAME=	unzip550
PKGNAME=	unzip-5.50
d9 1
a9 2
MASTER_SITES=	ftp://ftp.info-zip.org/pub/infozip/src/ \
		ftp://ftp.uu.net/pub/archiving/zip/src/ \
@


1.27
log
@Zap default MAINTAINER from Makefile.
Especially now that the default line is more verbose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/10/04 22:26:48 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.384
@


1.26
log
@Note existing regression tests for archivers. No need to update
NEED_VERSION, this won't break anything otherwise.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/08/14 18:35:59 pvalchev Exp $
a12 2

MAINTAINER=	ports@@openbsd.org
@


1.25
log
@- Remove 2 dead master sites and put one working one
- Replace HOMEPAGE with a working one
From FreeBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/04/20 17:35:36 brad Exp $
d36 4
@


1.24
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/04/09 14:06:41 avsm Exp $
d9 2
a10 3
MASTER_SITES=	ftp://ftp.freesoftware.com/pub/infozip/src/ \
		ftp://ftp.info-zip.org/pub/infozip/src/ \
		ftp://ftp.uu.net/pub/archiving/zip/src/
d12 1
a12 1
HOMEPAGE=	http://www.info-zip.org/pub/infozip/Info-ZIP.html
@


1.23
log
@A couple more MASTER_SITES for this (it only had one listed)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/03/29 15:02:02 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.364
@


1.22
log
@- integrate COMMENT
- bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/02/26 08:44:53 kevlo Exp $
d9 3
a11 1
MASTER_SITES=	ftp://ftp.freesoftware.com/pub/infozip/src/
@


1.21
log
@- Upgrade to version 5.42
- Update HOMEPAGE
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.20 2000/10/07 20:05:33 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.336
@


1.20
log
@enable additional code to support decrypting encrypted zip files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/07/24 02:42:59 brad Exp $
d3 2
a4 2
DISTNAME=	unzip541
PKGNAME=	unzip-5.41
d9 1
a9 1
HOMEPAGE=	http://ftp.freesoftware.com/pub/infozip/
d19 1
a19 1
		LOC="${CFLAGS} -DUSE_UNSHRINK -DUSE_SMITH_CODE"
d28 1
a28 1
DOCS=	README COPYING WHERE
@


1.19
log
@upgrade to unzip 5.41
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/06/10 20:22:18 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.310
d18 2
a19 2
MAKE_FLAGS=	CC="${CC}" LD="${CC}" LOC="${CFLAGS} -DUSE_UNSHRINK" \
		CF='-I. $$(LOC)'
d28 2
d32 1
a32 1
	cd ${WRKSRC}; ${INSTALL_DATA} README COPYING WHERE ${PREFIX}/share/doc/unzip
@


1.18
log
@- remove FAKE=Yes
- add @@comment with RCS id to PLIST
- HAS_CONFIGURE/GNU_CONFIGURE -> CONFIGURE_STYLE
- remove NO_CONFIGURE, NO_PATCH
- use new framework for PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/03/26 22:34:28 brad Exp $
d3 2
a4 2
DISTNAME=	unzip540
PKGNAME=	unzip-5.40
d6 1
a6 1
NEED_VERSION=	1.301
d8 2
@


1.17
log
@- make use of MAKE_FLAGS
- bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/03/24 22:11:34 espie Exp $
d6 1
a6 1
NEED_VERSION=	1.218
a15 3
FAKE=		Yes

MAKE_FILE=	unix/Makefile
d19 2
@


1.17.2.1
log
@bring cut-off archivers into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/07/24 02:42:59 brad Exp $
d3 2
a4 2
DISTNAME=	unzip541
PKGNAME=	unzip-5.41
d6 1
a6 1
NEED_VERSION=	1.310
a8 2
HOMEPAGE=	http://ftp.freesoftware.com/pub/infozip/

d16 3
a21 2

MAKE_FILE=	unix/Makefile
@


1.16
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/03/16 03:36:31 kevlo Exp $
d6 1
a6 1
NEED_VERSION=	1.210
d17 6
a23 1
MAKE_FILE=	unix/Makefile
d29 1
a29 2
	@@cd ${WRKSRC};  ${INSTALL_DATA} README COPYING WHERE \
		${PREFIX}/share/doc/unzip
@


1.15
log
@Update the MASTER_SITES because the original site has been moved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/03/05 18:31:25 todd Exp $
d6 1
a7 1
NEED_VERSION=	1.210
@


1.14
log
@fake, license
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/22 17:08:34 espie Exp $
d6 1
a6 1
MASTER_SITES=	ftp://ftp.cdrom.com/pub/infozip/src/
@


1.13
log
@MAKEFILE-> MAKE_FILE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/02/11 00:37:16 espie Exp $
d11 6
@


1.12
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/02/05 17:49:01 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.191
d12 1
a12 1
MAKEFILE=	unix/Makefile
@


1.11
log
@mkdir -> ${INSTALL_DATA_DIR}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/12/24 23:33:30 brad Exp $
d7 1
d14 1
a14 1
WRKSRC=	${WRKDIR}/${PKGNAME}
@


1.10
log
@- remove do-install target
- cleanup Makefile
- make this port respect CC and CFLAGS
- use unzip's own install target and use BSD_INSTALL macros instead of
just copying the files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/09/06 17:40:58 brad Exp $
d16 3
a18 3
	@@mkdir -p ${PREFIX}/share/doc/unzip
	@@cd ${WRKSRC} && \
	 ${INSTALL_DATA} README COPYING WHERE ${PREFIX}/share/doc/unzip
@


1.9
log
@ln -> ${LN}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/04/02 06:39:47 marc Exp $
d6 1
a6 1
MASTER_SITES=   ftp://ftp.cdrom.com/pub/infozip/src/
d8 1
a8 1
MAINTAINER=     ports@@openbsd.org
d10 2
a11 5
WRKSRC=		${WRKDIR}/${PKGNAME}
MAKEFILE=       unix/Makefile
ALL_TARGET=     bsd
MAKE_FLAGS=     LOCAL_UNZIP="${CFLAGS} -DUSE_UNSHRINK" -f
MAN1=		funzip.1 unzip.1 unzipsfx.1 zipgrep.1 zipinfo.1
d13 4
a16 9
do-install:
	@@cd ${WRKSRC} && \
		${INSTALL_PROGRAM} unzip funzip unzipsfx ${PREFIX}/bin
	@@${LN} -sf unzip ${PREFIX}/bin/zipinfo
	@@cd ${WRKSRC}/unix && \
		${INSTALL_SCRIPT} zipgrep ${PREFIX}/bin
	@@cd ${WRKSRC}/unix && \
		${INSTALL_MAN} ${MAN1} ${PREFIX}/man/man1
	${INSTALL} -d -m 555 -o ${SHAREOWN} -g ${SHAREGRP} ${PREFIX}/share/doc/unzip
d18 1
a18 1
		${INSTALL_DATA} README COPYING WHERE ${PREFIX}/share/doc/unzip
@


1.8
log
@back out incorrect change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/04/01 02:16:41 brad Exp $
d17 1
a17 1
	cd ${WRKSRC} && \
d19 2
a20 2
	ln -sf unzip ${PREFIX}/bin/zipinfo
	cd ${WRKSRC}/unix && \
d22 1
a22 1
	cd ${WRKSRC}/unix && \
d25 1
a25 1
	cd ${WRKSRC} && \
@


1.7
log
@remove unnecessary comments and fix email address's
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/03/24 04:35:24 fgsch Exp $
d14 1
@


1.6
log
@Update to 5.40.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.5 1998/10/20 08:39:43 form Exp $
#
d8 1
a8 1
MAINTAINER=     form@@OpenBSD.ORG
a13 1
MAN1=           funzip.1 unzip.1 unzipsfx.1 zipgrep.1 zipinfo.1
@


1.5
log
@form@@vs.itam.nsc.ru -> form@@openbsd.org
@
text
@d1 1
a1 7
# New ports collection makefile for:    unzip
# Version required:     5.3.2
# Date created:         22 Jun 1998
# Whom:                 form
#
# $OpenBSD: Makefile,v 1.4 1998/06/24 16:39:19 marc Exp $
# FreeBSD: Makefile,v 1.18 1998/01/24 07:11:16 jkh Exp
d4 2
a5 2
DISTNAME=	unzip532
PKGNAME=	unzip-5.3.2
d11 1
a11 1
WRKSRC=		${WRKDIR}/unzip-5.32
@


1.4
log
@use bsd target so it builds on all architectures
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1998/06/22 10:05:57 form Exp $
d15 1
a15 1
MAINTAINER=     form@@vs.itam.nsc.ru
@


1.3
log
@update to 5.3.2
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.0 1998/06/22 17:00:03 form Exp $
d19 1
a19 1
ALL_TARGET=     freebsd
@


1.2
log
@Doh, it's not only 386s that use the ports :-)
Thanks to Clarence Wilkerson.
@
text
@d1 4
a4 4
# OpenBSD makefile for:   unzip
# Version required:     5.3.1
# Date created:         24 Nov 1997
# Whom:                 angelos
d6 2
a7 1
# $OpenBSD: Makefile,v 1.1 1997/11/24 19:49:51 angelos Exp $
d10 2
a11 1
DISTNAME=       unzip-5.3.1
a13 1
DISTFILES=      unzip531.tar.gz
d15 1
a15 1
MAINTAINER=     angelos@@openbsd.org
d17 1
a17 1
NO_WRKSUBDIR=   YES
d19 1
a19 1
ALL_TARGET=     bsd
d31 1
a31 1
	install -d -m 555 -o ${SHAREOWN} -g ${SHAREGRP} ${PREFIX}/share/doc/unzip
d33 1
a33 1
		${INSTALL_DATA} README Where COPYING ${PREFIX}/share/doc/unzip
@


1.1
log
@Add unzip port.
@
text
@d6 1
a6 1
# $OpenBSD$
d18 1
a18 1
ALL_TARGET=     openbsd
@
