head	1.3;
access;
symbols
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2015.10.05.16.50.14;	author sthen;	state dead;
branches;
next	1.2;
commitid	kVs6P9p0QqyoSbRx;

1.2
date	2015.04.19.17.53.59;	author jca;	state Exp;
branches;
next	1.1;
commitid	2KaUBmc2zuIwJTvf;

1.1
date	2015.04.19.17.52.47;	author jca;	state Exp;
branches;
next	;
commitid	r819aGN19NQQ00f0;


desc
@@


1.3
log
@Update to par2cmdline-0.6.14, and add a patch to fix a byte order issue
(__BYTE_ORDER not being defined) causing 'repair' to fail on files from other
par2 implementations or from pre-5.6 OpenBSD. ok jca@@

From Mikolaj Kucharski, taking maintainer.
@
text
@$OpenBSD: patch-par2creatorsourcefile_cpp,v 1.2 2015/04/19 17:53:59 jca Exp $

- par2 crash with -q or -qq: https://bugs.debian.org/299658 and
  http://sf.net/p/parchive/bugs/37/

--- par2creatorsourcefile.cpp.orig	Thu Apr 15 14:45:23 2004
+++ par2creatorsourcefile.cpp	Sun Apr 19 10:57:32 2015
@@@@ -213,11 +213,12 @@@@ bool Par2CreatorSourceFile::Open(CommandLine::NoiseLev
         }
       }
 
+      offset += want;
+
       if (noiselevel > CommandLine::nlQuiet)
       {
         // Display progress
         u32 oldfraction = (u32)(1000 * offset / filesize);
-        offset += want;
         u32 newfraction = (u32)(1000 * offset / filesize);
         if (oldfraction != newfraction)
         {
@


1.2
log
@Fold long line.
@
text
@d1 1
a1 1
$OpenBSD: patch-par2creatorsourcefile_cpp,v 1.1 2015/04/19 17:52:47 jca Exp $
@


1.1
log
@Fix incorrect logic leading to a fatal assert when using the -q flag.

Ports patch from Mikolaj Kucharski, source patch from Debian
(https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=299658),
upstream issue: http://sourceforge.net/p/parchive/bugs/37/
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 1
- par2 crash with -q or -qq: https://bugs.debian.org/299658 and http://sf.net/p/parchive/bugs/37/
@

