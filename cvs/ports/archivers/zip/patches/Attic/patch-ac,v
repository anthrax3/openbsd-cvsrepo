head	1.3;
access;
symbols
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	98.06.22.10.18.12;	author form;	state dead;
branches;
next	1.2;

1.2
date	97.11.25.22.22.43;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	97.11.25.21.33.34;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.3
log
@fix...
@
text
@*** zip.c.orig	Sat Apr 27 08:32:56 1996
--- zip.c	Tue Nov 25 17:17:26 1997
***************
*** 1519,1531 ****
        return 0;
  #endif
      }
!     if ((tempzip = tempname(zipfile)) == NULL) {
        ziperr(ZE_MEM, "allocating temp filename");
  #ifdef WIZZIPDLL
        return 0;
  #endif
      }
!     if ((tempzf = y = fopen(tempzip, FOPW)) == NULL) {
        ziperr(ZE_TEMP, tempzip);
  #ifdef WIZZIPDLL
        return 0;
--- 1519,1531 ----
        return 0;
  #endif
      }
!     if ((tempzip = tempname(zipfile, &y)) == NULL) {
        ziperr(ZE_MEM, "allocating temp filename");
  #ifdef WIZZIPDLL
        return 0;
  #endif
      }
!     if ((tempzf = y) == NULL) {
        ziperr(ZE_TEMP, tempzip);
  #ifdef WIZZIPDLL
        return 0;
@


1.2
log
@Fix for my fix :-)
@
text
@@


1.1
log
@Fix mktemp() race conditions.
@
text
@d1 2
a2 2
*** zip.c.orig	Tue Nov 25 16:22:01 1997
--- zip.c	Tue Nov 25 16:23:08 1997
d22 1
a22 1
!     if ((tempzip = tempname(zipfile, y)) == NULL) {
@
