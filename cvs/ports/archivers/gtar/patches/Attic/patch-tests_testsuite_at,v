head	1.2;
access;
symbols
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.03.10.14.54.16;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2008.12.30.17.37.05;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 1.22 which adds --xz/-J support for xz compression.
(xz itself will be imported once there is a stable release.)
@
text
@$OpenBSD: patch-tests_testsuite_at,v 1.1 2008/12/30 17:37:05 naddy Exp $
--- tests/testsuite.at.orig	Thu Jul 31 08:57:51 2008
+++ tests/testsuite.at	Tue Dec 30 18:19:43 2008
@@@@ -21,6 +21,7 @@@@
 # We need a recent Autotest.
 m4_version_prereq([2.52g])
 
+m4_define([AT_TAR_CHECK_HOOK])
 m4_define([AT_TAR_CHECK],[
   AT_XFAIL_IF(test -f $[]XFAILFILE)
   m4_foreach([FMT],
@@@@ -33,9 +34,20 @@@@ export TEST_TAR_FORMAT
 TAR_OPTIONS="-H FMT"
 export TAR_OPTIONS
 rm -rf *
-$1)],$2,$3,$4,$5,$6)])
+$1)],$2,$3,$4,$5,$6)
+              AT_TAR_CHECK_HOOK])
 ])
 
+m4_define([AT_TAR_WITH_HOOK],[
+  m4_pushdef([AT_TAR_CHECK_HOOK],[$1])
+  $2
+  
+  m4_popdef([AT_TAR_CHECK_HOOK])])
+
+m4_define([TAR_IGNREC_HOOK],[
+  AT_CHECK([grep -v '^.*tar: Record size = ' stderr; exit 0])
+])
+  
 m4_define([RE_CHECK],[
 AT_DATA([$1.re],[$2])
 awk '{print NR " " $[]0}' $1 > $[]$.1
@


1.1
log
@Update to 1.21 which brings
* some new options, e.g. -J for lzma compression and --lzop,
* transformation scope flags,
* bug fixes

Testsuite patches from upstream CVS.
@
text
@d1 1
a1 1
$OpenBSD$
@

