head	1.2;
access;
symbols
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.03.15.21.10.13;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2010.10.28.13.50.30;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to bugfix release 1.26
@
text
@$OpenBSD: patch-gnu_fdopendir_c,v 1.1 2010/10/28 13:50:30 naddy Exp $
--- gnu/fdopendir.c.orig	Tue Oct 26 17:44:19 2010
+++ gnu/fdopendir.c	Tue Oct 26 17:45:00 2010
@@@@ -144,6 +144,7 @@@@ fd_clone_opendir (int fd)
 # else /* !REPLACE_FCHDIR */
 
       /* Occupy the destination FD slot, so that save_cwd cannot hijack it.  */
+      struct saved_cwd saved_cwd;
       int fd_reserve = dup (fd);
       if (fd_reserve < 0)
         {
@@@@ -152,7 +153,6 @@@@ fd_clone_opendir (int fd)
           goto fail;
         }
 
-      struct saved_cwd saved_cwd;
       if (save_cwd (&saved_cwd) != 0)
         openat_save_fail (errno);
 
@


1.1
log
@update to 1.24: various bug fixes, no major changes
@
text
@d1 1
a1 1
$OpenBSD$
@

