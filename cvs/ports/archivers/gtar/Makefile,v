head	1.78;
access;
symbols
	OPENBSD_6_0:1.78.0.2
	OPENBSD_6_0_BASE:1.78
	OPENBSD_5_9:1.76.0.2
	OPENBSD_5_9_BASE:1.76
	OPENBSD_5_8:1.76.0.4
	OPENBSD_5_8_BASE:1.76
	OPENBSD_5_7:1.75.0.2
	OPENBSD_5_7_BASE:1.75
	OPENBSD_5_6:1.73.0.2
	OPENBSD_5_6_BASE:1.73
	OPENBSD_5_5:1.72.0.2
	OPENBSD_5_5_BASE:1.72
	OPENBSD_5_4:1.70.0.2
	OPENBSD_5_4_BASE:1.70
	OPENBSD_5_3:1.69.0.2
	OPENBSD_5_3_BASE:1.69
	OPENBSD_5_2:1.68.0.4
	OPENBSD_5_2_BASE:1.68
	OPENBSD_5_1_BASE:1.68
	OPENBSD_5_1:1.68.0.2
	OPENBSD_5_0:1.66.0.2
	OPENBSD_5_0_BASE:1.66
	OPENBSD_4_9:1.62.0.2
	OPENBSD_4_9_BASE:1.62
	OPENBSD_4_8:1.55.0.2
	OPENBSD_4_8_BASE:1.55
	OPENBSD_4_7:1.50.0.2
	OPENBSD_4_7_BASE:1.50
	OPENBSD_4_6:1.49.0.2
	OPENBSD_4_6_BASE:1.49
	OPENBSD_4_5:1.48.0.2
	OPENBSD_4_5_BASE:1.48
	OPENBSD_4_4:1.47.0.2
	OPENBSD_4_4_BASE:1.47
	OPENBSD_4_3:1.46.0.2
	OPENBSD_4_3_BASE:1.46
	OPENBSD_4_2:1.43.0.2
	OPENBSD_4_2_BASE:1.43
	OPENBSD_4_1:1.42.0.2
	OPENBSD_4_1_BASE:1.42
	OPENBSD_4_0:1.38.0.4
	OPENBSD_4_0_BASE:1.38
	OPENBSD_3_9:1.38.0.2
	OPENBSD_3_9_BASE:1.38
	OPENBSD_3_8:1.36.0.2
	OPENBSD_3_8_BASE:1.36
	OPENBSD_3_7:1.34.0.2
	OPENBSD_3_7_BASE:1.34
	OPENBSD_3_6:1.31.0.2
	OPENBSD_3_6_BASE:1.31
	OPENBSD_3_5:1.27.0.4
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.27.0.2
	OPENBSD_3_4_BASE:1.27
	OPENBSD_3_3:1.26.0.4
	OPENBSD_3_3_BASE:1.26
	OPENBSD_3_2:1.26.0.2
	OPENBSD_3_2_BASE:1.26
	OPENBSD_3_1:1.25.0.2
	OPENBSD_3_1_BASE:1.25
	OPENBSD_3_0:1.24.0.2
	OPENBSD_3_0_BASE:1.24
	OPENBSD_2_9_TRACKING_SWITCH:1.21
	OPENBSD_2_9:1.21.0.2
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_8:1.17.0.2
	OPENBSD_2_8_BASE:1.17
	OPENBSD_2_7:1.14.0.2
	OPENBSD_2_7_BASE:1.14
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	NIKLAS_980114:1.1.1.1
	NIKLAS:1.1.1;
locks; strict;
comment	@# @;


1.78
date	2016.06.03.14.53.32;	author naddy;	state Exp;
branches;
next	1.77;
commitid	75G0vwiLe6moV8WA;

1.77
date	2016.04.06.21.14.13;	author naddy;	state Exp;
branches;
next	1.76;
commitid	P01r7yni5mRqDRMc;

1.76
date	2015.03.14.20.52.46;	author naddy;	state Exp;
branches;
next	1.75;
commitid	jnrLBcPmz76yfcWI;

1.75
date	2015.02.04.21.16.11;	author sthen;	state Exp;
branches;
next	1.74;
commitid	FKPNuHeplfsYsl3x;

1.74
date	2014.08.09.19.46.19;	author naddy;	state Exp;
branches;
next	1.73;
commitid	r59eb23lrd0aW07G;

1.73
date	2014.05.12.21.35.30;	author naddy;	state Exp;
branches;
next	1.72;

1.72
date	2013.11.09.23.19.01;	author naddy;	state Exp;
branches;
next	1.71;

1.71
date	2013.10.07.17.07.15;	author naddy;	state Exp;
branches;
next	1.70;

1.70
date	2013.03.10.22.28.04;	author espie;	state Exp;
branches;
next	1.69;

1.69
date	2013.02.05.14.51.16;	author sthen;	state Exp;
branches;
next	1.68;

1.68
date	2011.10.17.11.14.11;	author espie;	state Exp;
branches;
next	1.67;

1.67
date	2011.10.17.10.59.19;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2011.06.14.22.00.13;	author naddy;	state Exp;
branches;
next	1.65;

1.65
date	2011.06.02.17.09.31;	author kili;	state Exp;
branches;
next	1.64;

1.64
date	2011.06.01.18.53.52;	author jasper;	state Exp;
branches;
next	1.63;

1.63
date	2011.03.15.21.10.13;	author naddy;	state Exp;
branches;
next	1.62;

1.62
date	2010.11.27.21.02.54;	author naddy;	state Exp;
branches;
next	1.61;

1.61
date	2010.11.26.07.07.56;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2010.11.15.00.22.45;	author espie;	state Exp;
branches;
next	1.59;

1.59
date	2010.11.09.16.28.59;	author naddy;	state Exp;
branches;
next	1.58;

1.58
date	2010.11.08.16.31.51;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2010.11.04.22.51.13;	author jasper;	state Exp;
branches;
next	1.56;

1.56
date	2010.10.28.13.50.30;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2010.07.13.12.45.49;	author sebastia;	state Exp;
branches;
next	1.54;

1.54
date	2010.07.11.15.57.46;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2010.06.12.15.17.11;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2010.03.28.18.35.00;	author naddy;	state Exp;
branches;
next	1.51;

1.51
date	2010.03.24.18.02.00;	author naddy;	state Exp;
branches;
next	1.50;

1.50
date	2009.09.10.15.30.21;	author naddy;	state Exp;
branches
	1.50.2.1;
next	1.49;

1.49
date	2009.03.10.14.54.16;	author naddy;	state Exp;
branches
	1.49.2.1;
next	1.48;

1.48
date	2008.12.30.17.37.05;	author naddy;	state Exp;
branches;
next	1.47;

1.47
date	2008.04.18.14.52.25;	author naddy;	state Exp;
branches;
next	1.46;

1.46
date	2007.10.22.16.33.41;	author naddy;	state Exp;
branches;
next	1.45;

1.45
date	2007.09.01.21.05.21;	author naddy;	state Exp;
branches;
next	1.44;

1.44
date	2007.08.25.19.49.01;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2007.06.10.19.27.18;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2006.12.23.20.24.42;	author sturm;	state Exp;
branches
	1.42.2.1;
next	1.41;

1.41
date	2006.12.14.20.29.00;	author naddy;	state Exp;
branches;
next	1.40;

1.40
date	2006.11.30.20.37.29;	author naddy;	state Exp;
branches;
next	1.39;

1.39
date	2006.11.13.16.25.10;	author naddy;	state Exp;
branches;
next	1.38;

1.38
date	2006.02.27.21.29.55;	author naddy;	state Exp;
branches
	1.38.2.1
	1.38.4.1;
next	1.37;

1.37
date	2006.01.11.16.40.51;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2005.07.03.22.42.20;	author alek;	state Exp;
branches
	1.36.2.1;
next	1.35;

1.35
date	2005.04.23.15.29.45;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2005.01.30.14.56.57;	author naddy;	state Exp;
branches
	1.34.2.1;
next	1.33;

1.33
date	2005.01.01.23.47.43;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2004.11.21.12.50.32;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2004.08.03.09.24.50;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2004.07.31.15.36.46;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2004.05.15.12.57.34;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2004.04.22.02.56.10;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2003.05.24.01.38.08;	author jolan;	state Exp;
branches;
next	1.26;

1.26
date	2002.10.01.02.03.52;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2001.11.05.00.58.29;	author naddy;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2001.09.23.05.32.18;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2001.09.19.17.30.44;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2001.09.15.14.50.08;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2001.04.20.17.35.33;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2001.03.29.15.01.54;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.22.00.13.32;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2000.12.21.19.38.11;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2000.09.27.22.09.34;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2000.09.27.20.11.37;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.06.10.20.22.13;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2000.04.09.07.17.23;	author turan;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2000.03.30.23.04.10;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2000.03.30.22.07.39;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.24.22.11.33;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.02.15.05.03.53;	author turan;	state Exp;
branches;
next	1.9;

1.9
date	2000.02.12.08.02.08;	author turan;	state Exp;
branches;
next	1.8;

1.8
date	2000.01.01.00.42.12;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.12.15.22.13.13;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.09.06.17.17.52;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.07.17.05.05.04;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.04.09.22.36.48;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	99.04.01.02.16.37;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.03.07.01.38.58;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	98.01.14.09.23.59;	author niklas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.01.14.09.23.59;	author niklas;	state Exp;
branches;
next	;

1.14.2.1
date	2000.09.15.04.40.35;	author marc;	state Exp;
branches;
next	;

1.25.2.1
date	2002.10.03.02.50.45;	author brad;	state Exp;
branches;
next	;

1.34.2.1
date	2006.02.28.09.11.51;	author sturm;	state Exp;
branches;
next	;

1.36.2.1
date	2006.02.28.09.12.19;	author sturm;	state Exp;
branches;
next	;

1.38.2.1
date	2006.11.30.22.05.07;	author sturm;	state Exp;
branches;
next	;

1.38.4.1
date	2006.11.30.21.14.19;	author sturm;	state Exp;
branches;
next	1.38.4.2;

1.38.4.2
date	2007.09.04.06.10.21;	author ajacoutot;	state Exp;
branches;
next	;

1.42.2.1
date	2007.09.04.06.10.52;	author ajacoutot;	state Exp;
branches;
next	;

1.49.2.1
date	2010.04.22.02.56.47;	author william;	state Exp;
branches;
next	;

1.50.2.1
date	2010.06.04.02.14.10;	author william;	state Exp;
branches;
next	;


desc
@@


1.78
log
@Update to 1.29, which adds some new options:
--verbatim-files-from, --no-verbatim-files-from
--owner-map=FILE, --group-map=FILE
--clamp-mtime
@
text
@# $OpenBSD: Makefile,v 1.77 2016/04/06 21:14:13 naddy Exp $

COMMENT=	GNU version of the traditional tape archiver

DISTNAME=	tar-1.29
PKGNAME=	g${DISTNAME}
CATEGORIES=	archivers
HOMEPAGE=	https://www.gnu.org/software/tar/

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

# GPLv3+
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_GNU:=tar/}
EXTRACT_SUFX=	.tar.xz

# fake WANTLIB to ensure updates occur for major changes in base even for static
WANTLIB=	c

# only force dependencies for compressors that have a single-letter option
RUN_DEPENDS=	archivers/bzip2 archivers/xz

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--program-prefix=g
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib ${LDSTATIC}" \
		DEFAULT_ARCHIVE=/dev/rst0 \
		DEFAULT_RMT_COMMAND=/etc/rmt
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/build-aux

# supply result to skip a test that will abort configure if run as root
CONFIGURE_ENV+=	gl_cv_func_mknod_works=no

FLAVORS=	static
FLAVOR?=

.if ${FLAVOR:Mstatic}
BUILD_DEPENDS+=	devel/gettext
CONFIGURE_ENV+=	SHLIBEXT=""
LDSTATIC=	${STATIC}
.else
WANTLIB+=	iconv intl
LIB_DEPENDS+=	devel/gettext
LDSTATIC=
.endif

# autom4te
TEST_DEPENDS=	devel/autoconf/2.69
TEST_ENV=	AUTOCONF_VERSION=2.69
# without GNU m4, commands with leading parenthesis are mis-expanded
TEST_DEPENDS+=	devel/m4
TEST_ENV+=	M4=${LOCALBASE}/bin/gm4

# do not rebuild tar.info
post-patch:
	touch -r ${WRKSRC}/doc/stamp-vti ${WRKSRC}/configure

.include <bsd.port.mk>
@


1.77
log
@replace gettext module with library dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/03/14 20:52:46 naddy Exp $
d5 1
a5 2
DISTNAME=	tar-1.28
REVISION=	2
d48 10
a57 5
# Test 87 is known to fail because getcwd(3) fails if the
# parent directory is unreadable.

# Tests 161 163 are known to fail because path resolution of ".."
# in a removed directory fails.
@


1.76
log
@switch from "-static" to "${STATIC}, i.e., build static PIE executables
on most archs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2015/02/04 21:16:11 sthen Exp $
d6 1
a6 1
REVISION=	1
a21 1
MODULES=	devel/gettext
a39 2
LDSTATIC=	${STATIC}
MODULES=
d42 1
d44 2
@


1.75
log
@Force a WANTLIB on libc for ports linked statically, to ensure they get updated
following major updates in base. kurt is ok with this approach. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2014/08/09 19:46:19 naddy Exp $
d6 1
a6 1
REVISION=	0
d41 1
a41 1
LDSTATIC=	-static
@


1.74
log
@Update to 1.28.  Noteworthy changes in this release:
* New checkpoint action: totals
* Extended checkpoint format specification.
* New option --one-top-level
* New option --sort
* New exclusion options
* Manpages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2014/05/12 21:35:30 naddy Exp $
d6 1
d19 3
a46 1
WANTLIB=	c
@


1.73
log
@Update to 1.17.1. Bug fixes:
* Fix unquoting of file names obtained via the -T option.
* Fix GNU long link header timestamp (backward compatibility).
* Fix extracting sparse members from star archives.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/11/09 23:19:01 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.27.1
d46 1
a46 1
# Test 85 is known to fail because getcwd(3) fails if the
d48 3
@


1.72
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/10/07 17:07:15 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.27
a6 1
REVISION=	0
d46 1
a46 1
# Tests 63 85 are known to fail because getcwd(3) fails if the
@


1.71
log
@Update to 1.27.  Small changes:
https://lists.gnu.org/archive/html/bug-tar/2013-10/msg00002.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/03/10 22:28:04 espie Exp $
d7 1
d9 1
a9 1
HOMEPAGE=	http://www.gnu.org/software/tar/
@


1.70
log
@regress -> test
PERMIT_* cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/02/05 14:51:16 sthen Exp $
d5 1
a5 1
DISTNAME=	tar-1.26
a6 1
REVISION=	1
d39 1
a39 1
BUILD_DEPENDS+=	devel/gettext>=0.17
d46 1
a46 1
# Tests 35 56 are known to fail because getcwd(3) fails if the
a47 2
TEST_DEPENDS=	devel/autoconf/2.63
TEST_FLAGS=	AUTOCONF_VERSION=2.63
@


1.69
log
@bump; make sure static binaries get updated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/10/17 11:14:11 espie Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d49 2
a50 2
REGRESS_DEPENDS=	devel/autoconf/2.63
REGRESS_FLAGS=	AUTOCONF_VERSION=2.63
@


1.68
log
@zap :L in FLAVOR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/10/17 10:59:19 espie Exp $
d7 1
a7 1
REVISION=	0
@


1.67
log
@rely on PKGSPEC for autoconf 2.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/06/14 22:00:13 naddy Exp $
d40 1
a40 1
.if ${FLAVOR:L:Mstatic}
@


1.66
log
@add a missing va_end(), found by one of espie@@'s students
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/06/02 17:09:31 kili Exp $
d52 1
a52 1
REGRESS_DEPENDS=autoconf-2.63:devel/autoconf/2.63
@


1.65
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/06/01 18:53:52 jasper Exp $
d7 1
@


1.64
log
@remove EXTRACT_CASES now that .xz is dealt with in bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/03/15 21:10:13 naddy Exp $
d26 1
a26 2
CONFIGURE_ARGS=	--program-prefix=g \
		--disable-silent-rules
@


1.63
log
@update to bugfix release 1.26
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/11/27 21:02:54 naddy Exp $
a19 4

BUILD_DEPENDS=	archivers/xz
EXTRACT_CASES=	*.tar.xz) \
		${LOCALBASE}/bin/xz -dc ${FULLDISTDIR}/$$archive | ${TAR} xf -;;
@


1.62
log
@Fix bug with --one-file-system and --listed-incremental.  This is
important for at least misc/amanda-client.  From upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/11/26 07:07:56 espie Exp $
d5 1
a5 1
DISTNAME=	tar-1.25
a6 1
REVISION=	0
d56 2
@


1.61
log
@redo depends with >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/11/15 00:22:45 espie Exp $
d7 1
@


1.60
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/11/09 16:28:59 naddy Exp $
d47 1
a47 1
BUILD_DEPENDS+=	gettext->=0.17:devel/gettext
@


1.59
log
@allow building as root; requested by ckuethe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/11/08 16:31:51 naddy Exp $
d21 1
a21 1
BUILD_DEPENDS=	::archivers/xz
d27 1
a27 1
RUN_DEPENDS=	::archivers/bzip2 ::archivers/xz
d47 1
a47 1
BUILD_DEPENDS+=	:gettext->=0.17:devel/gettext
@


1.58
log
@update to 1.25: fixes extraction with the -C option in effect
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/11/04 22:51:13 jasper Exp $
d37 3
@


1.57
log
@don't reset BUILD_DEPENDS if we're using the static flavor, so we keep
xz as a build dependency there. fixes build of gtar,static on a clean box
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/10/28 13:50:30 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.24
d51 1
a51 1
# Tests 34, 53 are known to fail because getcwd(3) fails if the
a52 2
REGRESS_DEPENDS=:autoconf-2.63:devel/autoconf/2.63
REGRESS_FLAGS=	AUTOCONF_VERSION=2.63
@


1.56
log
@update to 1.24: various bug fixes, no major changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/07/13 12:45:49 sebastia Exp $
d44 1
a44 1
BUILD_DEPENDS=	:gettext->=0.17:devel/gettext
@


1.55
log
@fix compilation on gcc-2.95 archs.
OK naddy@@, landry@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/07/11 15:57:46 espie Exp $
d5 1
a5 1
DISTNAME=	tar-1.23
d19 5
a23 1
EXTRACT_SUFX=	.tar.bz2
a40 1
REVISION =	1
d51 2
@


1.54
log
@switch to REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/06/12 15:17:11 naddy Exp $
d37 1
a37 1
REVISION =	0
@


1.53
log
@Fix dead loop on extracting existing symlinks with the -k option.
From upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/03/28 18:35:00 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p0
d37 1
@


1.52
log
@update to 1.23
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/03/24 18:02:00 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
@


1.51
log
@SECURITY fix for CVE-2010-0624:
Heap-based buffer overflow allows remote rmt servers to cause a
denial of service (memory corruption) or possibly execute arbitrary
code by sending more data than was requested.

prodded by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/09/10 15:30:21 naddy Exp $
d5 2
a6 2
DISTNAME=	tar-1.22
PKGNAME=	g${DISTNAME}p1
d22 2
a23 1
RUN_DEPENDS=	::archivers/bzip2 ::archivers/lzop ::archivers/xz
d26 2
a27 1
CONFIGURE_ARGS=	--program-prefix=g
d46 3
@


1.50
log
@switch dependencies from lzma to xz
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2009/03/10 14:54:16 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p0
@


1.50.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2010-0624

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/09/10 15:30:21 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p1
@


1.49
log
@Update to 1.22 which adds --xz/-J support for xz compression.
(xz itself will be imported once there is a stable release.)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/12/30 17:37:05 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
d22 1
a22 2
# Add xz once the lzma/xz confusion has settled down
RUN_DEPENDS=	::archivers/bzip2 ::archivers/lzop
@


1.49.2.1
log
@SECURITY FIX

Resolves CVE-2010-0624

ok naddy@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2009/03/10 14:54:16 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p1
@


1.48
log
@Update to 1.21 which brings
* some new options, e.g. -J for lzma compression and --lzop,
* transformation scope flags,
* bug fixes

Testsuite patches from upstream CVS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/04/18 14:52:25 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.21
d12 1
a12 1
# GPLv3
d22 2
a23 2
BUILD_DEPENDS=	::devel/autoconf/${AUTOCONF_VERSION}	# autom4te
RUN_DEPENDS=	::archivers/bzip2 ::archivers/lzma ::archivers/lzop
a24 1
AUTOCONF_VERSION=2.61
a32 2
MAKE_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION}

d39 1
a39 1
BUILD_DEPENDS=	:gettext->=0.16.1:devel/gettext
@


1.47
log
@Update to 1.20.  Notable changes: This release adds support for
lzma compression and the -a option to select the compression algorithm
basing on the suffix of the archive file name.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/10/22 16:33:41 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.20
d22 2
a23 1
RUN_DEPENDS=	::archivers/bzip2 ::archivers/lzma
d25 1
d33 2
@


1.46
log
@* update to 1.19
* fix static flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/09/01 21:05:21 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.19
d22 1
a22 1
RUN_DEPENDS=	:bzip2-*:archivers/bzip2
@


1.45
log
@SECURITY:
Fix a directory traversal vulnerability. (CVE-2007-4131)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/08/25 19:49:01 naddy Exp $
d5 2
a6 2
DISTNAME=	tar-1.18
PKGNAME=	g${DISTNAME}p0
d39 1
@


1.44
log
@maintenance update to 1.18, only noteworthy change is switch to GPLv3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/06/10 19:27:18 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
@


1.43
log
@Update to 1.17.  Changes in this release:
* Fix archivation of sparse files in posix mode.
* Fix operation of --verify --listed-incremental.
* Fix --occurrence.
* Scope of --transform and --strip-components options.
* End-of-volume script can send the new volume name to tar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/12/23 20:24:42 sturm Exp $
d3 1
a3 1
COMMENT=	"GNU version of the traditional tar archiver"
d5 1
a5 1
DISTNAME=	tar-1.17
d12 1
a12 1
# GPL
d38 1
a38 1
BUILD_DEPENDS=	:gettext->=0.14.6:devel/gettext
@


1.42
log
@the static FLAVOR needs gettext to build as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/12/14 20:29:00 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.16.1
a17 1
FAKE=		all
d26 2
a27 2
CONFIGURE_ENV=	CPPFLAGS="-I${DEPBASE}/include" \
		LDFLAGS="-L${DEPBASE}/lib ${LDSTATIC}" \
@


1.42.2.1
log
@MFC (original commit naddy@@):
Fix a directory traversal vulnerability. (CVE-2007-4131)

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/12/23 20:24:42 sturm Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p0
@


1.41
log
@Update to 1.16.1.  User-visible changes:
* New option --exclude-tag allows to specify "exclusion tag files".
* The --exclude-cache option now excludes the directories themselves, too.
* Support for reading ustar type 'N' logical records has been removed.
* Race conditions around 'tar -x --same-owner' have been fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/11/30 20:37:29 naddy Exp $
d39 1
@


1.40
log
@SECURITY:
GNU tar allows user-assisted attackers to overwrite arbitrary files
via a tar file that contains a GNUTYPE_NAMES record with a symbolic
link. (CVE-2006-6097)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/11/13 16:25:10 naddy Exp $
d5 2
a6 2
DISTNAME=	tar-1.16
PKGNAME=	g${DISTNAME}p0
a23 2
REGRESS_DEPENDS=:autoconf-2.60:devel/autoconf/2.60
REGRESS_FLAGS=	AUTOCONF_VERSION=2.60
@


1.39
log
@update to 1.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/02/27 21:29:55 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
d24 1
a24 1
REGRESS_DEPENDS=::devel/autoconf/2.60
@


1.38
log
@SECURITY:
A buffer overflow allows user-complicit attackers to cause a denial
of service (application crash) and possibly execute code via
unspecified vectors involving PAX extended headers.
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0300

Fix via Ubuntu (ultimately from upstream CVS).

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/01/11 16:40:51 naddy Exp $
d5 2
a6 2
DISTNAME=	tar-1.15.1
PKGNAME=	g${DISTNAME}p4
d24 2
d33 1
a33 1
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/config
@


1.38.2.1
log
@MFC:
SECURITY:
GNU tar allows user-assisted attackers to overwrite arbitrary files
via a tar file that contains a GNUTYPE_NAMES record with a symbolic
link. (CVE-2006-6097)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/02/27 21:29:55 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p5
@


1.38.4.1
log
@MFC:
SECURITY:
GNU tar allows user-assisted attackers to overwrite arbitrary files
via a tar file that contains a GNUTYPE_NAMES record with a symbolic
link. (CVE-2006-6097)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/02/27 21:29:55 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p5
@


1.38.4.2
log
@MFC (original commit naddy@@):
Fix a directory traversal vulnerability. (CVE-2007-4131)

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38.4.1 2006/11/30 21:14:19 sturm Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p6
@


1.37
log
@Fix large sparse file corruption.
From bug-tar mailing list via Han Boetes <han@@mijncomputer.nl>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/07/03 22:42:20 alek Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p3
@


1.36
log
@- Fix WANTLIB marker for -static FLAVOR
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/04/23 15:29:45 espie Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p2
@


1.36.2.1
log
@MFC:
SECURITY:
A buffer overflow allows user-complicit attackers to cause a denial
of service (application crash) and possibly execute code via
unspecified vectors involving PAX extended headers.
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0300

Fix via Ubuntu (ultimately from upstream CVS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/07/03 22:42:20 alek Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p4
@


1.35
log
@FAKE=all + @@endfake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/01/30 14:56:57 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p1
d38 1
@


1.34
log
@Fix command line parsing; from GNU CVS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/01/01 23:47:43 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p0
d18 1
d27 2
a28 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib ${LDSTATIC}" \
@


1.34.2.1
log
@MFC:
SECURITY:
A buffer overflow allows user-complicit attackers to cause a denial
of service (application crash) and possibly execute code via
unspecified vectors involving PAX extended headers.
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0300

Fix via Ubuntu (ultimately from upstream CVS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/01/30 14:56:57 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p4
@


1.33
log
@Update to 1.15.1.
- Compressed archives are now recognized automatically.
- Numerous bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/11/21 12:50:32 espie Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
@


1.32
log
@Mark all system libs in WANTLIB, result of running newlib-depends-check
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/08/03 09:24:50 espie Exp $
d5 1
a5 1
DISTNAME=	tar-1.14
@


1.31
log
@switch to new style MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/07/31 15:36:46 naddy Exp $
d39 1
@


1.30
log
@correctly set MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/05/15 12:57:34 naddy Exp $
d21 1
a21 1
MODULES=	gettext
@


1.29
log
@update to 1.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/04/22 02:56:10 naddy Exp $
d30 1
@


1.28
log
@Update to 1.13.94:
- Added support for POSIX.1-2001 and ustar archive formats.
- Various option cleanups.
- New message translations.
- Bug fixes.

Switch to .bz2 distfile since we already depend on bzip2 anyway.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2003/05/24 01:38:08 jolan Exp $
d5 1
a5 1
DISTNAME=	tar-1.13.94
d8 1
a8 2
MASTER_SITES=	ftp://alpha.gnu.org/gnu/tar/ \
		ftp://ftp.funet.fi/pub/mirrors/alpha.gnu.org/gnu/tar/
d18 1
d28 2
a29 1
		DEFAULT_ARCHIVE="/dev/rst0"
@


1.27
log
@# GPL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/10/01 02:03:52 brad Exp $
d5 2
a6 2
DISTNAME=	tar-1.13.25
PKGNAME=	g${DISTNAME}p1
a8 1
		ftp://ftp.sunsite.org.uk/Mirrors/alpha.gnu.org/gnu/tar/ \
d19 2
d22 1
a22 3
RUN_DEPENDS+=	:bzip2-*:archivers/bzip2

SEPARATE_BUILD=	flavored
d24 1
a24 1
CONFIGURE_STYLE= gnu
d28 1
a28 2
		DEFAULT_ARCHIVE="/dev/rst0" \
		MAKEINFO="makeinfo --no-split"
@


1.26
log
@Fix a directory traversal vulnerability in GNU tar 1.13.25 which allows
attackers to overwrite arbitrary files durring extraction via a ".."
in an extracted filename.

http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-0399
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/11/05 00:58:29 naddy Exp $
d14 1
@


1.25
log
@Update to 1.13.25:
* New option --overwrite-dir.
* Fixes for buffer overrun, porting, and copyright notice problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/09/23 05:32:18 brad Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}
a7 1
NEED_VERSION=	1.460
@


1.25.2.1
log
@Fix a directory traversal vulnerability in GNU tar 1.13.25 which allows
attackers to overwrite arbitrary files durring extraction via a ".."
in an extracted filename.

http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2002-0399
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/11/05 00:58:29 naddy Exp $
d6 1
a6 1
PKGNAME=	g${DISTNAME}p1
@


1.24
log
@use iconv or gettext module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/09/19 17:30:44 naddy Exp $
d5 1
a5 1
DISTNAME=	tar-1.13.23
@


1.23
log
@- update to 1.13.23; input from todd@@
- fix install of info docs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/09/15 14:50:08 naddy Exp $
d8 1
a8 1
NEED_VERSION=	1.384
d20 2
a21 2
LIB_DEPENDS=	intl.1::devel/gettext
RUN_DEPENDS=	bzip2::archivers/bzip2
@


1.22
log
@Update to 1.13.22.  Note:
- The semantics for excludes have changed, and new options have
  been added in this area.
- bzip2 filtering has stabilized at -j.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/04/20 17:35:33 brad Exp $
d5 1
a5 1
DISTNAME=	tar-1.13.22
d28 3
a30 1
		DEFAULT_ARCHIVE="/dev/rst0"
d36 1
a36 1
CONFIGURE_ENV+=	LDFLAGS="-L${LOCALBASE}/lib -static"
d38 1
a38 1
CONFIGURE_ENV+=	LDFLAGS="-L${LOCALBASE}/lib"
@


1.21
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/03/29 15:01:54 brad Exp $
d5 1
a5 1
DISTNAME=	tar-1.13.19
a12 2
LIB_DEPENDS=	intl.1::devel/gettext

d19 5
@


1.20
log
@- integrate COMMENT
- bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/01/22 00:13:32 naddy Exp $
d8 1
a8 1
NEED_VERSION=	1.364
@


1.19
log
@Update to 1.13.19; improve DESCR.
Partly from Cyrille Lefevre <clefevre@@citeweb.net> via FreeBSD.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.18 2000/12/21 19:38:11 naddy Exp $
d8 1
a8 1
NEED_VERSION=	1.330
@


1.18
log
@Update to 1.13.18.
Since the GNU project seems to have abandoned the idea of releases, we might
as well integrate nine months of bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/09/27 22:09:34 naddy Exp $
d3 1
a3 1
DISTNAME=	tar-1.13.18
d21 1
a21 1
CONFIGURE_ARGS=	--program-prefix="g"
a32 3

post-extract:
	@@rm -f ${WRKSRC}/doc/tar.info*
@


1.17
log
@- claim maintainership; ok niklas@@, brad@@
- add further master sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/09/27 20:11:37 brad Exp $
d3 1
a3 1
DISTNAME=	tar-1.13.17
@


1.16
log
@upgrade to GNU tar 1.13.17; most of this came from naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/06/10 20:22:13 brad Exp $
d7 3
a9 1
MASTER_SITES=	ftp://alpha.gnu.org/gnu/tar/
d13 1
a13 1
MAINTAINER=	ports@@openbsd.org
@


1.15
log
@- remove FAKE=Yes
- add @@comment with RCS id to PLIST
- HAS_CONFIGURE/GNU_CONFIGURE -> CONFIGURE_STYLE
- remove NO_CONFIGURE, NO_PATCH
- use new framework for PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/04/09 07:17:23 turan Exp $
d3 2
a4 1
DISTNAME=	tar-1.13
d6 2
a7 3
NEED_VERSION=	1.301
MASTER_SITES=	${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR= tar
d9 1
a9 1
BUILD_DEPENDS=	msgfmt::devel/gettext
d11 1
a11 1
MAINTAINER=	niklas@@openbsd.org
a17 1
SEPARATE_BUILD=	simple
d19 12
a30 1
CONFIGURE_ARGS+= --program-prefix="g"
@


1.14
log
@add build_depend for gettext.  msgfmt is required.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/03/30 23:04:10 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.230
d9 2
a17 2
FAKE=		Yes

d19 2
a20 4
GNU_CONFIGURE=	Yes
CONFIGURE_ARGS=	--program-prefix="g"

BUILD_DEPENDS=	msgfmt::devel/gettext
@


1.14.2.1
log
@bring cut-off archivers into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/06/10 20:22:13 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.301
a8 2
BUILD_DEPENDS=	msgfmt::devel/gettext

d16 2
d19 4
a22 2
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+= --program-prefix="g"
@


1.13
log
@remove unnecessary post-install target, the binary is stripped anyway when
installed with "install"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/03/30 22:07:39 espie Exp $
d21 2
@


1.12
log
@Fake, separate_build for gtar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/03/24 22:11:33 espie Exp $
a8 1

a10 1
LICENSE_TYPE=		GPL
a15 2
GNU_CONFIGURE=	Yes
CONFIGURE_ARGS=	--program-prefix=g
d17 1
d19 2
a23 4

post-install:
	@@strip ${PREFIX}/bin/gtar
	@@strip ${PREFIX}/libexec/grmt
@


1.11
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/02/15 05:03:53 turan Exp $
d5 1
a5 1
NEED_VERSION=	1.114
d13 4
a16 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d18 1
a18 1
GNU_CONFIGURE=	yes
d20 2
a28 2
	@@install-info ${PREFIX}/info/tar.info ${PREFIX}/info/dir
	@@PKG_PREFIX="${PREFIX}" ${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.10
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/02/12 08:02:08 turan Exp $
d5 1
a8 1
NEED_VERSION=	1.114
@


1.9
log
@gpl licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/01/01 00:42:12 brad Exp $
d13 4
a16 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.8
log
@re-add post-extract target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/12/15 22:13:13 brad Exp $
d11 6
@


1.7
log
@- remove unnecessary post-extract target, this is performed in gtar's
Makefile as-is
- remove workaround for texinfo install-info bug
- ${STRIP} -> strip
- rearrange PLIST a bit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/09/06 17:17:52 brad Exp $
d14 3
@


1.6
log
@- strip -> ${STRIP}
- sed -> ${SED}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/07/17 05:05:04 brad Exp $
a14 3
post-extract:
	@@${RM} -f ${WRKSRC}/doc/*.info*

d16 2
a17 5
	@@${STRIP} ${PREFIX}/bin/gtar
	@@${STRIP} ${PREFIX}/libexec/grmt
	@@if [ ! -f ${PREFIX}/info/dir ]; then \
	  ${SED} -ne '1,/Menu:/p' /usr/share/info/dir > ${PREFIX}/info/dir; \
	 fi
@


1.5
log
@upgrade to GNU tar 1.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/04/09 22:36:48 marc Exp $
d8 2
d19 2
a20 2
	@@strip ${PREFIX}/bin/gtar
	@@strip ${PREFIX}/libexec/grmt
d22 1
a22 1
	  sed -ne '1,/Menu:/p' /usr/share/info/dir > ${PREFIX}/info/dir; \
@


1.4
log
@commit the rest of the change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/04/01 02:16:37 brad Exp $
d3 1
a3 1
DISTNAME=	tar-1.12
d13 3
d17 3
a19 3
	strip ${PREFIX}/bin/gtar
	strip ${PREFIX}/libexec/grmt
	if [ ! -f ${PREFIX}/info/dir ]; then \
d21 2
a22 2
	fi
	install-info ${PREFIX}/info/tar.info ${PREFIX}/info/dir
@


1.3
log
@remove unnecessary comments and fix email address's
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1999/03/07 01:38:58 brad Exp $
d20 1
a20 6
	@@echo
	@@echo "*** You might want to setup a link to /etc/rmt by issuing:"
	@@echo "*** ln -sf ${PREFIX}/libexec/grmt /etc/rmt"
	@@echo "*** If so, you should try to remember to reset that link"
	@@echo "*** to its former value if you ever pkg_delete this package."
	@@echo
@


1.2
log
@add MASTER_SITE_SUBDIR
@
text
@d1 1
a1 7
# OpenBSD makefile for:	gtar
# Version required:			1.12
# Date created:				14 Jan 1998
# Whom:					niklas
#
# $OpenBSD: Makefile,v 1.1.1.1 1998/01/14 09:23:59 niklas Exp $
#
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1997/12/19 14:27:07 niklas Exp $
d12 1
@


1.1.1.1
log
@GNU tar 1.12 port
@
text
@@
