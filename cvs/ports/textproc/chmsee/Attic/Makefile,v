head	1.17;
access;
symbols
	OPENBSD_5_7:1.15.0.6
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.4
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.2
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.2
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.11.0.2
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	ajacoutot_20100706:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2015.04.02.11.57.20;	author jasper;	state dead;
branches;
next	1.16;
commitid	2LOw3GfDAIhpkNTS;

1.16
date	2015.03.27.08.14.15;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	ERm8DOTUF1j7394B;

1.15
date	2013.11.25.21.48.53;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2013.08.07.21.32.40;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2013.03.11.11.42.41;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2012.11.12.20.45.32;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2012.06.15.08.32.18;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.12.07.23.31.04;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2011.12.03.23.04.37;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.10.14.07.00.23;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2011.09.16.11.41.40;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.20.19.56.48;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.10.27.13.25.01;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.24.21.38.06;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.11.08.18.29;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.25.10.24.35;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.07.06.16.43.29;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.07.06.16.43.29;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.17
log
@remove chmsee, it's been officially dead upstream and has been marked broken
for about 17 months.

ok aja@@ landry@@
@
text
@# $OpenBSD: Makefile,v 1.16 2015/03/27 08:14:15 ajacoutot Exp $

COMMENT =	html help viewer
BROKEN =	doesnt work with newer xulrunner

DISTNAME =	chmsee-2.0.2
REVISION =	0

CATEGORIES =	textproc x11

HOMEPAGE =	https://code.google.com/p/chmsee/

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =	https://chmsee.googlecode.com/files/

WRKSRC=${WRKDIST}/src
MODULES =	lang/python gcc4 lang/clang

MODGCC4_ARCHS =		powerpc sparc64
MODGCC4_LANGS =		c c++
MODCLANG_ARCHS =	amd64 i386
MODCLANG_LANGS =	c c++

MAKE_FILE =	Makefile.netbsd
USE_GMAKE = yes
CONFIGURE_STYLE = none
MODPY_RUNDEP =	no
 
BUILD_DEPENDS =	devel/xulrunner/24,-devel \
		textproc/intltool

RUN_DEPENDS =	devel/desktop-file-utils \
		devel/xulrunner/24 \
		x11/gtk+3,-guic
LIB_DEPENDS =	devel/nspr \
		devel/chmlib
WANTLIB += chm m nspr4 plc4 plds4 pthread stdc++

NO_TEST =	Yes

TARGETDIR =	${PREFIX}/lib/chmsee
pre-configure:
	${SUBST_CMD} ${WRKSRC}/${MAKE_FILE}

do-install:
	${INSTALL_DATA_DIR} ${TARGETDIR}
	${INSTALL_DATA_DIR} ${TARGETDIR}/data
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/../application.ini ${TARGETDIR}
	${INSTALL_DATA} ${WRKSRC}/../data/*.png ${TARGETDIR}/data/
	${INSTALL_DATA} ${WRKSRC}/../data/chmsee.desktop.in ${PREFIX}/share/applications/chmsee.desktop
	cp -pR ${WRKSRC}/../{components,chrome,chrome.manifest,about.md,defaults} ${TARGETDIR}
	cp -pR ${WRKSRC}/../data/icons ${PREFIX}/share/
	chown -R ${SHAREOWN}:${SHAREGRP} ${TARGETDIR} ${PREFIX}/share/
	echo "#!/bin/sh\n\n${LOCALBASE}/bin/xulrunner ${TRUEPREFIX}/lib/chmsee/application.ini" > ${PREFIX}/bin/chmsee
	chmod +x ${PREFIX}/bin/chmsee

.include <bsd.port.mk>
@


1.16
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/11/25 21:48:53 landry Exp $
@


1.15
log
@Tentatively update to 2.0.2, and mark it BROKEN.

- this doesnt work at runtime with newer xulrunner (starts, but fails to
  open a chm file), and is dead upstream
- debian & freebsd removed it, ubuntu ships a version with a 3 year old
  patch adding webkit support.

use xchm if you need a chm viewer for your warez ebooks.. or help fixing
it :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/08/07 21:32:40 naddy Exp $
d7 1
d36 1
a36 1
		x11/gtk+2,-guic
@


1.14
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/03/11 11:42:41 espie Exp $
d4 1
d6 1
a6 2
DISTNAME =	chmsee-1.2.0
REVISION=	7
d17 2
a18 7
WANTLIB += GL X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB += Xrandr Xrender atk-1.0 c cairo chm expat fontconfig
WANTLIB += freetype gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0
WANTLIB += m nspr4 pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1
WANTLIB += plc4 plds4 png pthread-stubs stdc++ xcb xcb-render
WANTLIB += xcb-shm xml2 z
d20 11
a30 4
MODULES =	devel/cmake \
		devel/gettext

BUILD_DEPENDS =	devel/xulrunner/1.9,-devel \
d34 1
a34 1
		devel/xulrunner/1.9 \
a35 1

d37 2
a38 3
		devel/chmlib \
		x11/gtk+2 \
		security/libgcrypt
d40 1
d42 16
a57 1
NO_TEST =	Yes
@


1.13
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/11/12 20:45:32 landry Exp $
d6 1
a6 1
REVISION=	6
d10 1
a10 1
HOMEPAGE =	http://code.google.com/p/chmsee/
d15 1
a15 1
MASTER_SITES =	http://chmsee.googlecode.com/files/
@


1.12
log
@Bump all ports depending on nspr to account for the devel/nspr,-main ->
devel/nspr pkgpath change. While here, make sure mozilla ports depend on
the latest and greatest via mozilla.port.mk.
Tested in a bulk build..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/06/15 08:32:18 ajacoutot Exp $
a13 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d41 1
a41 1
NO_REGRESS =	Yes
@


1.11
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/12/07 23:31:04 espie Exp $
d6 1
a6 1
REVISION=	5
@


1.10
log
@missing lib-depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/12/03 23:04:37 ajacoutot Exp $
d6 1
a6 1
REVISION=	4
@


1.9
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/10/14 07:00:23 jasper Exp $
d31 2
a32 1
BUILD_DEPENDS =	devel/xulrunner/1.9,-devel
@


1.8
log
@Regen WANTLIB to unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/09/16 11:41:40 espie Exp $
d6 1
a6 1
REVISION=	3
d34 2
a35 1
		devel/xulrunner/1.9
@


1.7
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/20 19:56:48 espie Exp $
d6 1
a6 1
REVISION=	2
d20 7
a26 7
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 c cairo expat fontconfig
WANTLIB += freetype gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pixman-1 png pthread-stubs stdc++ xcb xcb-render gcrypt
WANTLIB += xcb-render-util xml2 z nspr4 plc4 plds4 chm gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gtk-x11-2.0
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/10/27 13:25:01 steven Exp $
d6 1
a6 1
REVISION=	1
@


1.5
log
@bump revision

this was using -O3 before the recent change in cmake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/10/24 21:38:06 ajacoutot Exp $
d31 1
a31 1
BUILD_DEPENDS =	::devel/xulrunner/1.9,-devel
d33 2
a34 2
RUN_DEPENDS =	::devel/desktop-file-utils \
		::devel/xulrunner/1.9
d36 4
a39 4
LIB_DEPENDS =	::devel/nspr \
		::devel/chmlib \
		::x11/gtk+2 \
		::security/libgcrypt
@


1.4
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/11 08:18:29 jasper Exp $
d6 1
a6 1
REVISION=	0
@


1.3
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/07/25 10:24:35 ajacoutot Exp $
a40 1
USE_X11 =	Yes
@


1.2
log
@Update to chmsee-1.2.0.

Based on a submission by Abel Abraham Camarillo Ojeda with tweaks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/07/06 16:43:29 ajacoutot Exp $
d6 1
d22 1
a22 1
WANTLIB += freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME =	chmsee-1.1.0
d23 3
a25 2
WANTLIB += pixman-1 png pthread-stubs stdc++ xcb xcb-render
WANTLIB += xcb-render-util xml2 z
d35 4
a38 4
LIB_DEPENDS =	nspr4.>=21,plc4,plds4::devel/nspr \
		chm::devel/chmlib \
		gdk-x11-2.0.>=1403,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		gcrypt.>=15::security/libgcrypt
@


1.1.1.1
log
@Import chmsee-1.1.0

Gtk viewer for Microsoft HTML Help (aka "CHM", Compiled HTML) files
using chmlib and Mozilla's gecko engine.

Based on a submission from Jiri B. with some tweaks.
@
text
@@
