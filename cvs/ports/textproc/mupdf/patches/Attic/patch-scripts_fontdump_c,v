head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.2.0.6
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2014.06.12.14.07.19;	author sthen;	state dead;
branches;
next	1.3;
commitid	C2eaivHbBza8zYGB;

1.3
date	2013.10.29.22.08.59;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.04.25.13.55.12;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.12.13.31.01;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to mupdf 1.5
@
text
@$OpenBSD: patch-scripts_fontdump_c,v 1.3 2013/10/29 22:08:59 sthen Exp $
--- scripts/fontdump.c.orig	Thu Aug 15 14:26:18 2013
+++ scripts/fontdump.c	Thu Aug 15 14:25:32 2013
@@@@ -49,7 +49,7 @@@@ main(int argc, char **argv)
 	}
 
 	fprintf(fo, "#ifndef __STRICT_ANSI__\n");
-	fprintf(fo, "#if defined(__linux__) || defined(__FreeBSD__)\n");
+	fprintf(fo, "#if defined(__linux__) || defined(__FreeBSD__) || defined(__OpenBSD__)\n");
 	fprintf(fo, "#ifndef __clang__\n");
 	fprintf(fo, "#define HAVE_INCBIN\n");
 	fprintf(fo, "#endif\n");
@


1.3
log
@Update to MuPDF 1.3, and enable cURL support (separate binary, not subpackaged
here as cURL is a fairly common package).

Earlier version without cURL support ok rpe@@, additional tests on various
arch from brett@@, Florian Stinglmayr and Donovan Watteau (who also reminded
me about a change of name for mubusy needed in DESCR).
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@update to MuPDF 1.0
- thanks to krw@@, brett@@ and "Dawe" for testing the release candidate
@
text
@d1 3
a3 3
$OpenBSD: patch-scripts_fontdump_c,v 1.1 2012/04/12 13:31:01 sthen Exp $
--- scripts/fontdump.c.orig	Thu Mar 29 11:46:53 2012
+++ scripts/fontdump.c	Thu Apr 12 14:31:51 2012
d10 1
a11 1
 	fprintf(fo, "#endif\n");
@


1.1
log
@MuPDF has two ways to embed fonts; a stonking great static array which
GCC hates and uses 800MB+ to compile, and embedding with .incbin.
Switch the port to using .incbin. Fixes out of memory on alpha reported
and tested by naddy@@, greatly improves build time on arm.
The VMEM_WARNING can now be removed.

- while there, don't use groff.
@
text
@d1 4
a4 4
$OpenBSD$
--- scripts/fontdump.c.orig	Thu Apr 12 14:05:45 2012
+++ scripts/fontdump.c	Thu Apr 12 14:05:54 2012
@@@@ -48,7 +48,7 @@@@ main(int argc, char **argv)
@

