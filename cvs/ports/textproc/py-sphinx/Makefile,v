head	1.23;
access;
symbols
	OPENBSD_6_0:1.18.0.2
	OPENBSD_6_0_BASE:1.18
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.12.0.6
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.4
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.8.0.6
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.8.0.4
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.1.1.1.0.6
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.4
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.2
	OPENBSD_4_6_BASE:1.1.1.1
	martynas_20090409:1.1.1.1
	martynas:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2017.02.11.21.25.50;	author danj;	state Exp;
branches;
next	1.22;
commitid	My8JNr6e1HGSEHys;

1.22
date	2017.01.03.19.27.52;	author landry;	state Exp;
branches;
next	1.21;
commitid	iwPqarwpK6U3gsCi;

1.21
date	2016.11.10.21.58.41;	author danj;	state Exp;
branches;
next	1.20;
commitid	4ER2f1Ti7zNi2Qmp;

1.20
date	2016.11.06.06.54.56;	author shadchin;	state Exp;
branches;
next	1.19;
commitid	cbxa1Qhy2ua9FA87;

1.19
date	2016.09.01.05.49.57;	author danj;	state Exp;
branches;
next	1.18;
commitid	MQ8vkZBeIQrIseYo;

1.18
date	2016.04.15.08.46.34;	author shadchin;	state Exp;
branches;
next	1.17;
commitid	CNnTfSGJFgxBowQj;

1.17
date	2015.09.29.10.52.53;	author sthen;	state Exp;
branches;
next	1.16;
commitid	YNrJu4NUvrCuknd3;

1.16
date	2015.04.02.14.21.17;	author jasper;	state Exp;
branches;
next	1.15;
commitid	4Dkfcsk2uZtFDSwy;

1.15
date	2014.09.21.16.54.02;	author sthen;	state Exp;
branches;
next	1.14;
commitid	nmndpPj8NoNxRvmT;

1.14
date	2014.09.20.20.30.09;	author sthen;	state Exp;
branches;
next	1.13;
commitid	FYu1YmtC7bHLW6hY;

1.13
date	2014.09.03.13.43.16;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	ta62EZtazCmQCaCR;

1.12
date	2013.06.04.07.57.13;	author fgsch;	state Exp;
branches;
next	1.11;

1.11
date	2013.04.04.22.36.51;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.28.23.44.14;	author rpe;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.11.11.42.46;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2011.09.16.11.41.41;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2011.06.08.18.09.58;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2011.04.09.14.24.27;	author benoit;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.11.11.02.08;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.20.19.56.51;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.19.07.54.25;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.08.30.21.47.16;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.08.23.35.07;	author martynas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.04.08.23.35.07;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Replace the find(1) that rename the binaries (to avoid conflicts) with
a for loop.

reported by landry@@, ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.22 2017/01/03 19:27:52 landry Exp $

COMMENT =		python documentation generator

MODPY_EGG_VERSION =	1.4.8
DISTNAME =		Sphinx-${MODPY_EGG_VERSION}
PKGNAME =		py-sphinx-${MODPY_EGG_VERSION}
REVISION =		0

CATEGORIES =		textproc

HOMEPAGE =		http://sphinx-doc.org/

MAINTAINER =		frantisek holop <minusf@@obiit.org>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

MODPY_PI =		Yes

MODULES =		lang/python
RUN_DEPENDS =		devel/py-babel${MODPY_FLAVOR} \
			devel/py-six${MODPY_FLAVOR} \
			graphics/py-imagesize${MODPY_FLAVOR} \
			textproc/py-alabaster${MODPY_FLAVOR} \
			textproc/py-docutils${MODPY_FLAVOR} \
			textproc/py-pygments${MODPY_FLAVOR} \
			textproc/py-sphinx_rtd_theme${MODPY_FLAVOR} \
			textproc/py-snowballstemmer${MODPY_FLAVOR} \
			www/py-jinja2${MODPY_FLAVOR}
BUILD_DEPENDS =		${RUN_DEPENDS}
TEST_DEPENDS =		devel/py-mock${MODPY_FLAVOR} \
			devel/py-nose${MODPY_FLAVOR} \
			print/texlive/texmf,-full

MODPY_SETUPTOOLS =	Yes

FLAVORS =		python3
FLAVOR ?=

post-build:
	cd ${WRKSRC} && ${MAKE_ENV} PYTHONPATH=${WRKSRC} \
		${MODPY_BIN} sphinx-build.py doc doc/_build/html

DOCS =		${PREFIX}/share/doc/${MODPY_PY_PREFIX}sphinx

post-install:
	${INSTALL_DATA_DIR} ${DOCS}
	cd ${WRKSRC}/doc/_build/html && pax -rw * ${DOCS}
	for i in ${PREFIX}/bin/*; do \
		mv $${i} $${i}${MODPY_BIN_SUFFIX} ;\
	done

do-test:
	cd ${WRKSRC} && env SPHINX_TEST_TEMPDIR=${WRKDIR} \
	    ${LOCALBASE}/bin/nosetests${MODPY_BIN_SUFFIX} --first-package-wins

.include <bsd.port.mk>
@


1.22
log
@bump ports depending on python3 in textproc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/11/10 21:58:41 danj Exp $
d50 3
a52 1
	cd ${PREFIX}/bin && find . -name '*' -exec mv {} {}${MODPY_BIN_SUFFIX} \;
@


1.21
log
@Remove superfluous if ${FLAVOR:Mpython3}

tweaks and ok rpointel@@ shadchin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/11/06 06:54:56 shadchin Exp $
d8 1
@


1.20
log
@Update to py-sphinx 1.4.8

ok danj@@, frantisek holop (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/09/01 05:49:57 danj Exp $
a48 1
.if ${FLAVOR:Mpython3}
a49 1
.endif
@


1.19
log
@Update to py-sphinx-1.4.6

bulk tested by ajacoutot@@, thanks!
ok ajacoutot@@ sthen@@ Frantisek Holop (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/04/15 08:46:34 shadchin Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.4.6
d29 1
a29 2
			www/py-jinja2${MODPY_FLAVOR} \
			www/py-requests${MODPY_FLAVOR}
@


1.18
log
@Update to py-sphinx 1.4.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/09/29 10:52:53 sthen Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.4
d29 2
a30 1
			www/py-jinja2${MODPY_FLAVOR}
@


1.17
log
@bump REVISION for setuptools dep change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/04/02 14:21:17 jasper Exp $
d5 1
a5 2
MODPY_EGG_VERSION =	1.2.3
REVISION =		1
d11 1
a11 1
HOMEPAGE =		http://sphinx.pocoo.org/
d21 9
a29 4
RUN_DEPENDS =		devel/py-babel \
			textproc/py-docutils \
			textproc/py-pygments \
			www/py-jinja2
d31 2
a32 2
TEST_DEPENDS =		devel/py-mock \
			devel/py-nose \
d37 3
d44 1
a44 1
DOCS =		${PREFIX}/share/doc/py-sphinx
d49 7
a55 4

do-test: fake
	@@cd ${WRKSRC}/tests && ${MAKE_ENV} \
		PYTHONPATH=${WRKINST}${MODPY_SITEPKG} nosetests
@


1.16
log
@- switch to MODPY_PI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/09/21 16:54:02 sthen Exp $
d6 1
a6 1
REVISION =		0
@


1.15
log
@unbreak last commit, py-* modules are not LIB_DEPENDS but BUILD_ and RUN_DEPENDS
reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/09/20 20:30:09 sthen Exp $
d19 1
a19 1
MASTER_SITES =		${MASTER_SITE_PYPI:=S/Sphinx/}
@


1.14
log
@update to py-sphinx 1.2.3, from maintainer frantisek holop
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/09/03 13:43:16 dcoppa Exp $
d6 1
d22 1
a22 1
LIB_DEPENDS =		devel/py-babel \
d26 1
@


1.13
log
@
Fix manpage writer, from upstream HG changeset
ffb145b7884fc926d6a68f4aaeede1d4964f727c

Needed by the upcoming update to cmake-3.0.1

This port could use an update...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/06/04 07:57:13 fgsch Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.1.3
a7 1
REVISION =		1
d13 1
a13 1
MAINTAINER =		Martynas Venckus <martynas@@openbsd.org>
d21 1
a21 1
RUN_DEPENDS =		devel/py-babel \
d25 2
a26 2
BUILD_DEPENDS =		${RUN_DEPENDS}
TEST_DEPENDS =		devel/py-nose \
d32 4
a35 4
	@@cd ${WRKSRC}/doc && \
		perl -pi -e 's|^(SPHINXBUILD.*) python |\1 ${MODPY_BIN} |' \
			Makefile && \
		${SETENV} ${MAKE_ENV} ${MAKE} text
d38 2
a39 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/py-sphinx
	cd ${WRKSRC}/doc/_build/text && pax -rw * ${PREFIX}/share/doc/py-sphinx/
d41 3
a43 2
do-test:
	cd ${WRKSRC}/tests && ${MODPY_BIN} run.py
@


1.12
log
@Remove MODPY_JSON from RDEP and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/04/04 22:36:51 martynas Exp $
d8 1
a8 1
REVISION =		0
@


1.11
log
@Add test dependency on texlive to get a better test coverage.
From Juan Francisco Cantero Hurtado.  OK rpe@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/03/28 23:44:14 rpe Exp $
d8 1
d25 1
a25 2
			www/py-jinja2 \
			${MODPY_JSON}
@


1.10
log
@update to 1.1.3

ok martynas@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/11 11:42:46 espie Exp $
d27 2
a28 1
TEST_DEPENDS =		devel/py-nose
@


1.9
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/09/16 11:41:41 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.7
a7 1
REVISION=		1
d27 1
a27 1
TEST_DEPENDS =	devel/py-nose
@


1.8
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/06/08 18:09:58 jasper Exp $
a17 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	Yes
d28 1
a28 1
REGRESS_DEPENDS =	devel/py-nose
d42 1
a42 1
do-regress:
@


1.7
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/04/09 14:24:27 benoit Exp $
d8 1
a8 1
REVISION=		0
@


1.6
log
@- update py-sphinx to 1.0.7

OK martynas@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/12/11 11:02:08 martynas Exp $
d8 1
@


1.5
log
@update to py-sphinx-1.0.5.  requested by Ryan Boggs, benoit@@.
freedback, ok fgs@@, benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/20 19:56:51 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	1.0.5
@


1.4
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/19 07:54:25 espie Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.6.1
a7 1
REVISION=		1
d24 1
a24 2
USE_GROFF =		Yes
RUN_DEPENDS =		textproc/py-pygments \
d26 3
a28 1
			www/py-jinja2
d34 6
d41 2
a42 1
	${INSTALL_MAN} ${WRKSRC}/doc/*.1 ${PREFIX}/man/man1/
@


1.3
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/08/30 21:47:16 jasper Exp $
d25 4
a28 4
USE_GROFF =	Yes
RUN_DEPENDS =		::textproc/py-pygments \
			::textproc/py-docutils \
			::www/py-jinja2
d30 1
a30 1
REGRESS_DEPENDS =	::devel/py-nose
@


1.2
log
@Might as well bump. Bump!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/04/08 23:35:07 martynas Exp $
d25 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
@


1.1.1.1
log
@import py-sphinx-0.6.1

Sphinx is a tool that makes it easy to create intelligent and
beautiful documentation for Python projects (or other documents
consisting of multiple reStructuredText sources), by Georg Brandl.
It was originally created to translate the new Python documentation,
but has now been cleaned up in the hope that it will be useful to
many other projects.

input, testing, ok fgs@@
@
text
@@
