head	1.28;
access;
symbols
	OPENBSD_4_5:1.27.0.2
	OPENBSD_4_5_BASE:1.27
	OPENBSD_4_4:1.25.0.2
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.24.0.2
	OPENBSD_4_3_BASE:1.24
	OPENBSD_4_2:1.21.0.2
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.20.0.4
	OPENBSD_4_1_BASE:1.20
	OPENBSD_4_0:1.20.0.2
	OPENBSD_4_0_BASE:1.20
	OPENBSD_3_9:1.19.0.2
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.15.0.4
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.2
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.13.0.2
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.10.0.2
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.5.0.2
	OPENBSD_3_0_BASE:1.5
	scrollkeeper_0_2:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2009.03.14.10.02.47;	author ajacoutot;	state dead;
branches;
next	1.27;

1.27
date	2008.12.17.18.38.17;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2008.12.16.10.41.56;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2008.06.03.13.56.56;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2007.12.17.20.33.43;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2007.09.19.13.04.57;	author martynas;	state Exp;
branches;
next	1.22;

1.22
date	2007.09.15.20.59.42;	author merdely;	state Exp;
branches;
next	1.21;

1.21
date	2007.05.19.09.13.54;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2006.08.03.23.55.11;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2006.02.03.16.00.09;	author bernd;	state Exp;
branches;
next	1.18;

1.18
date	2006.01.14.19.38.02;	author steven;	state Exp;
branches;
next	1.17;

1.17
date	2005.12.30.08.14.33;	author steven;	state Exp;
branches;
next	1.16;

1.16
date	2005.09.04.23.38.18;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2004.12.07.00.23.23;	author alek;	state Exp;
branches;
next	1.14;

1.14
date	2004.08.10.08.46.50;	author xsa;	state Exp;
branches;
next	1.13;

1.13
date	2004.02.21.22.25.33;	author marcm;	state Exp;
branches;
next	1.12;

1.12
date	2003.09.29.05.59.33;	author marcm;	state Exp;
branches;
next	1.11;

1.11
date	2003.07.12.06.24.49;	author marcm;	state Exp;
branches;
next	1.10;

1.10
date	2002.11.30.04.41.29;	author marcm;	state Exp;
branches;
next	1.9;

1.9
date	2002.09.20.08.15.15;	author nino;	state Exp;
branches;
next	1.8;

1.8
date	2002.08.10.11.41.27;	author nino;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.14.12.07.10;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2001.10.24.12.36.37;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.20.18.39.13;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.09.20.01.32.03;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.18.15.53.13;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.14.14.41.30;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.13.20.40.56;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.09.13.20.40.56;	author todd;	state Exp;
branches;
next	;


desc
@@


1.28
log
@- remove scrollkeeper
it has been superseded by rarian and has been set to IGNORE for a while now

ok jasper@@
@
text
@# $OpenBSD: Makefile,v 1.27 2008/12/17 18:38:17 jasper Exp $

IGNORE= 		superseded by rarian

COMMENT=		Scrollkeeper Open Documentation Cataloging System

DISTNAME=		scrollkeeper-0.3.14
PKGNAME=		${DISTNAME}p6
SHARED_LIBS=		scrollkeeper	1.0
CATEGORIES=		textproc

HOMEPAGE=		http://scrollkeeper.sourceforge.net

MASTER_SITES=		${MASTER_SITE_GNOME:=sources/scrollkeeper/0.3/}
EXTRACT_SUFX=		.tar.bz2

# LGPLv2 - GFPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB=		c m z 

MODULES=		devel/gettext

BUILD_DEPENDS=		:docbook->=4.2p1:textproc/docbook

# we don't use textproc/intltool MODULE because scrollkeeper needs a
# very old intltool-merge ; it is unmaintained software anyway and will
# be deprecated when rarian (scrollkeeper replacement) hits the tree
BUILD_DEPENDS+=		:p5-XML-Parser-*:textproc/p5-XML-Parser

RUN_DEPENDS=		:docbook->=4.2p1:textproc/docbook
LIB_DEPENDS=		xml2.>=7:libxml->=2.6.16p6:textproc/libxml \
			xslt.>=1::textproc/libxslt

USE_LIBTOOL=		Yes
USE_GMAKE=		Yes
CONFIGURE_STYLE= 	gnu
CONFIGURE_ARGS+= 	${CONFIGURE_SHARED}
CONFIGURE_ARGS+= 	--localstatedir=/var
CONFIGURE_ARGS+=	--with-omfdirs=${LOCALBASE}/share/omf
CONFIGURE_ARGS+=	--with-xml-catalog=/var/db/xmlcatalog
CONFIGURE_ENV=   	CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

post-install:
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/scrollkeeper; \
	cp -Rp ${WRKINST}/${SYSCONFDIR}/* ${PREFIX}/share/examples/scrollkeeper/
	${INSTALL_DATA_DIR} ${PREFIX}/share/libxml2
	${INSTALL_DATA} ${FILESDIR}/scrollkeeper.spec ${PREFIX}/share/libxml2

.include <bsd.port.mk>
@


1.27
log
@- hook rarian up to the tree.
- add IGNORE to scrollkeeper, it'll be removed soon.

i'll be committing diffs to convert ports using scrollkeeper to rarian.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/12/16 10:41:56 jasper Exp $
@


1.26
log
@- there's always a bigger fish, so make scrollkeeper conflict with that.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.25 2008/06/03 13:56:56 ajacoutot Exp $
@


1.25
log
@- add comment about why we need to use bundled intltool for this port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/12/17 20:33:43 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p5
@


1.24
log
@- execute scrollkeeper-update at package install time
- remove unused VERSION variable

"looks good" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/09/19 13:04:57 martynas Exp $
d15 1
a15 1
# LGPL
d20 1
d25 7
a31 2
BUILD_DEPENDS=		:docbook->=4.2p1:textproc/docbook \
			:p5-XML-Parser-*:textproc/p5-XML-Parser
@


1.23
log
@man pages lie.  so fix that.  regen patches and bump pkgname along, of
course;  ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/09/15 20:59:42 merdely Exp $
d5 2
a6 3
VERSION=		0.3.14
DISTNAME=		scrollkeeper-${VERSION}
PKGNAME=		${DISTNAME}p4
@


1.22
log
@Remove surrounding quotes in COMMENT-*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/05/19 09:13:54 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
@


1.21
log
@remove marcm@@ as maintainer

ok marcm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/08/03 23:55:11 espie Exp $
d3 1
a3 1
COMMENT=		"Scrollkeeper Open Documentation Cataloging System"
@


1.20
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/02/03 16:00:09 bernd Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
a11 2

MAINTAINER=		Marc Matteo <marcm@@openbsd.org>
@


1.19
log
@scrollkeeper-rebuilddb is executed too early. Put it at the end of PLIST to
make sure all necessary files are installed.

Fixes a core dump:

$ sudo pkg_add /usr/ports/packages/i386/all/scrollkeeper-0.3.14p1.tgz
Segmentation fault (core dumped)                                       | 19%
scrollkeeper-0.3.14p1: complete

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/01/14 19:38:02 steven Exp $
d30 2
a31 2
LIB_DEPENDS=		xml2.7:libxml->=2.6.16p6:textproc/libxml \
			xslt.1::textproc/libxslt
@


1.18
log
@zap unneeded MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/12/30 08:14:33 steven Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
@


1.17
log
@SHARED_LIBS, USE_LIBTOOL, sync with update-plist
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/09/04 23:38:18 espie Exp $
a8 1
MODGNU_SHARED_LIBS=	scrollkeeper	''
@


1.16
log
@replace the @@exec stuff with a registration mechanism that handles
updates correctly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/12/07 00:23:23 alek Exp $
d7 3
a9 1
PKGNAME=		${DISTNAME}p0
d34 1
@


1.15
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/08/10 08:46:50 xsa Exp $
d7 1
d28 2
a29 3
RUN_DEPENDS=		:docbook->=4.2p1:textproc/docbook \
			:libxml->=2.5.7p1:textproc/libxml
LIB_DEPENDS=		xml2.7::textproc/libxml \
d44 2
@


1.14
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/02/21 22:25:33 marcm Exp $
d21 1
@


1.13
log
@Update to 0.3.14.  Standard bug fixary... and part of Gnome 2.4.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2003/09/29 05:59:33 marcm Exp $
d22 1
a22 1
MODULES=		gettext
@


1.12
log
@Stop scrollkeeper from opening it's "database" once for each *.omf file
without closing it.  A "base" Gnome 2 install has over 160 *.omf files
so this would play havoc with the default open file limits.

Bump version number accordingly.

Also add the scrollkeeper logs to the @@extra list.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/07/12 06:24:49 marcm Exp $
d5 1
a5 1
VERSION=		0.3.12
a6 1
PKGNAME=		scrollkeeper-${VERSION}p1
d25 1
a25 1
			:intltool->=0.8.4:textproc/intltool
d36 1
@


1.11
log
@Update to 0.3.12 and regen patches.

In addition to the usual bug fixing this update does away with the hack
that built a custom XML catalog file (now that we have proper XML catalog
support).  This will cause some problems with scrollkeeper dependent ports
until I commit the fix for them shortly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/11/30 04:41:29 marcm Exp $
d5 3
a7 1
DISTNAME=		scrollkeeper-0.3.12
@


1.10
log
@Update to 0.3.11 to support more recent apps that use it.

Also take MAINTAINER.

ok nino@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/08/10 11:41:27 nino Exp $
d5 1
a5 1
DISTNAME=		scrollkeeper-0.3.11
d23 1
a23 1
BUILD_DEPENDS=		:docbook->=4.1.2:textproc/docbook \
d25 3
a27 2
RUN_DEPENDS=		:docbook->=4.1.2:textproc/docbook
LIB_DEPENDS=		xml2.6::textproc/libxml \
a38 2
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/xml; \
	sh ${FILESDIR}/buildDocBookCatalog.openbsd
@


1.9
log
@Update email and MASTER_SITES, zap NEED_VERSION.
@
text
@d5 1
a5 1
DISTNAME=		scrollkeeper-0.2
a8 1
MAINTAINER=		Nils Nordman <nino@@openbsd.org>
d10 1
a10 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/scrollkeeper/0.2/}
d12 2
a13 2
MODULES=		gettext
LIB_DEPENDS=		xml.9::textproc/libxml1
d15 1
d21 9
d33 1
d37 5
a41 5
post-extract:
	@@find ${WRKSRC}/cl/templates -name Makefile.in | xargs \
	perl -pi -e 's|data_link_dir = \$$\(datadir\)/scrollkeeper/Templates/|data_link_dir = |g; \
		     s|\$$\(LN_S\) -f -n \$$\(DESTDIR\)|\$$\(LN_S\) -f |g'
	@@ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
@


1.8
log
@Add deinstall notice about removing the /var/lib/scrollkeeper directory.
Also move the scrollkeeper-update install invocation to pkg install
time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/05/14 12:07:10 naddy Exp $
d11 1
a11 1
MASTER_SITES=		${MASTER_SITE_GNOME:=stable/sources/scrollkeeper/}
@


1.7
log
@bye MASTER_SITE_SUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/10/24 12:36:37 espie Exp $
d4 2
a5 2
V=			0.2
DISTNAME=		scrollkeeper-${V}
d7 1
a7 1
NEED_VERSION=   	1.455
d9 1
a9 1
MAINTAINER=		Nils Nordman <nino@@nforced.com>
d31 1
@


1.6
log
@full lib depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/09/20 18:39:13 naddy Exp $
d11 1
a11 2
MASTER_SITES=		${MASTER_SITE_GNOME}
MASTER_SITE_SUBDIR= 	stable/sources/scrollkeeper
@


1.5
log
@remove gratuitous gmake dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/09/20 01:32:03 naddy Exp $
d14 1
@


1.4
log
@fix configure script directly, not worth running autoconf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/09/18 15:53:13 naddy Exp $
a20 1
USE_GMAKE=	 	Yes
@


1.3
log
@cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/09/14 14:41:30 todd Exp $
d22 1
a22 1
CONFIGURE_STYLE= 	autoconf
@


1.2
log
@crank NEED_VERSION= because these require current
use ${HOMEPAGE} in pkg/DESCR
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=		"the Scrollkeeper Open Documentation Cataloging System"
d22 1
a22 1
CONFIGURE_STYLE= 	gnu
d26 1
a26 1
			LDFLAGS="-L${LOCALBASE}/lib -lintl"
@


1.1
log
@Initial revision
@
text
@d7 1
a7 1
NEED_VERSION=   	1.384
@


1.1.1.1
log
@the Scrollkeeper Open Documentation Cataloging System
@
text
@@
