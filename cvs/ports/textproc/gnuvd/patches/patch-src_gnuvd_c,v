head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.18
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.14
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.16
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.12
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2012.06.29.21.03.35;	author steven;	state Exp;
branches;
next	;


desc
@@


1.1
log
@make this work again, more or less.
@
text
@$OpenBSD$
--- src/gnuvd.c.orig	Fri Jun 29 22:54:46 2012
+++ src/gnuvd.c	Fri Jun 29 22:57:48 2012
@@@@ -57,12 +57,12 @@@@ static const char* VANDALE_PORT   = "80";
 	"\r\n"
 
 #define HTTP_REQUEST							\
-	"GET /vandale/zoekService.do?selectedDictionary=nn&"		\
-	"selectedDictionaryName=Nederlands&searchQuery=%s HTTP/1.1\r\n" HTTP_HEADERS
+	"GET /opzoeken?lang=nn&"		\
+	"pattern=%s HTTP/1.1\r\n" HTTP_HEADERS
 
 #define HTTP_REQUEST_PROXY \
-	"GET http://www.vandale.nl/vandale/zoekService.do?selectedDictionary=nn&" \
-	"selectedDictionaryName=Nederlands&searchQuery=%s HTTP/1.1\r\n" HTTP_HEADERS
+	"GET http://www.vandale.nl/opzoeken?lang=nn&" \
+	"pattern=%s HTTP/1.1\r\n" HTTP_HEADERS
 
 static char* HTTP_PROXY_HOST      = NULL;
 static char* HTTP_PROXY_PORT      = NULL;
@@@@ -401,9 +401,9 @@@@ vd_filter_http_buffer (Buffer *http_buffer, VDError* e
 {
 	unsigned pos;
 	
-	static const char *word        = "<div class=\"pnn4web_b\"";
+	static const char *word        = "<div id=\"content-area\"";
 	static const char *notfound    = "of het staat niet";
-	static const char *iframe      = "<div class=\"query\">";
+	static const char *iframe      = "<div id=\"sidebar\">";
 
 	assert (http_buffer);
 	assert (ex);
@
