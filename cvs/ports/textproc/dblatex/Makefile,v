head	1.14;
access;
symbols
	OPENBSD_6_1:1.14.0.10
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.8
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.4
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.13.0.4
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.2
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.4
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	stsp_20100506:1.1.1.1
	stsp:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.13;
commitid	jyyOLTDxRdjpw44n;

1.13
date	2014.01.11.18.53.34;	author edd;	state Exp;
branches;
next	1.12;

1.12
date	2013.05.04.09.41.32;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.11.11.42.41;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2012.09.27.17.26.05;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.09.16.11.41.40;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2011.06.08.18.09.58;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.28.18.19.50;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.20.19.56.48;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.10.19.07.54.21;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.24.18.50.34;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2010.08.30.21.47.15;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.05.10.22.04.59;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.06.18.08.02;	author stsp;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.05.06.18.08.02;	author stsp;	state Exp;
branches;
next	;


desc
@@


1.14
log
@use more specific version of SUBST_* where appropriate
@
text
@# $OpenBSD: Makefile,v 1.13 2014/01/11 18:53:34 edd Exp $

COMMENT =		convert DocBook to LaTeX, DVI, PostScript, and PDF
DISTNAME =		dblatex-0.3
REVISION =		8
CATEGORIES =		textproc

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

HOMEPAGE =		http://dblatex.sourceforge.net
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=dblatex/}
EXTRACT_SUFX =		.tar.bz2

MODULES =		lang/python
MODPY_DISTUTILS_INSTALL =install --prefix=${LOCALBASE} \
				--root=${DESTDIR} \
				--catalogs=${LOCALBASE}/share/xsl/docbook

RUN_DEPENDS =		print/texlive/texmf,-full \
			textproc/docbook-xsl \
			graphics/ImageMagick
BUILD_DEPENDS =		print/texlive/base \
			textproc/docbook-xsl \
			graphics/ImageMagick
NO_TEST =		Yes

SUBST_VARS +=		LOCALBASE MODPY_BIN

post-extract:
	@@cd ${WRKSRC}/docs/manpage/ && gunzip dblatex.1.gz

post-install:
	@@rm -r ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/contrib
	${SUBST_PROGRAM} ${FILESDIR}/dblatex ${PREFIX}/bin/dblatex

.include <bsd.port.mk>
@


1.13
log
@Use the new texlive buildset as a BUILD_DEPEND.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/05/04 09:41:32 sthen Exp $
d35 1
a35 2
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -m ${BINMODE} \
	    -c ${FILESDIR}/dblatex ${PREFIX}/bin/dblatex
@


1.12
log
@avoid a two-step SUBST_CMD/INSTALL_SCRIPT process by using new(ish)
SUBST_CMD -m to set the mode while copying.

regen distinfo and switch to mandoc while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 11:42:41 espie Exp $
d5 1
a5 1
REVISION =		7
d20 4
a23 3
RUN_DEPENDS =		print/texlive/base \
			print/texlive/texmf,-full \
			print/texlive/texmf,-main \
a25 1
BUILD_DEPENDS =		${RUN_DEPENDS}
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/09/27 17:26:05 ajacoutot Exp $
d5 1
a5 1
REVISION=		6
d25 1
a25 2
BUILD_DEPENDS = 	${RUN_DEPENDS}
USE_GROFF =		Yes
d35 2
a36 2
	${SUBST_CMD} -c ${FILESDIR}/dblatex ${WRKSRC}/scripts/dblatex
	${INSTALL_SCRIPT} ${WRKSRC}/scripts/dblatex ${PREFIX}/bin/dblatex
@


1.10
log
@docbook-xsl already comes with libxslt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/09/16 11:41:40 espie Exp $
a9 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d27 1
a27 1
NO_REGRESS =		Yes
@


1.9
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/06/08 18:09:58 jasper Exp $
d5 1
a5 1
REVISION=		5
a25 1
			textproc/libxslt \
@


1.8
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/28 18:19:50 kili Exp $
d5 1
a5 1
REVISION=		4
@


1.7
log
@Let this work with both texlive2009 and texlive2010.

The os.environ stuff is ok according to martynas@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/20 19:56:48 espie Exp $
d5 1
a5 1
REVISION=		3
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/10/19 07:54:21 espie Exp $
d5 1
a5 1
REVISION=		2
@


1.5
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/09/24 18:50:34 jasper Exp $
d23 6
a28 6
RUN_DEPENDS =		::print/texlive/base \
			::print/texlive/texmf,-full \
			::print/texlive/texmf,-main \
			::textproc/libxslt \
			::textproc/docbook-xsl \
			:ImageMagick-*:graphics/ImageMagick
d30 1
a30 1
USE_GROFF =	Yes
@


1.4
log
@don't install gzipped manpages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/08/30 21:47:15 jasper Exp $
d30 1
@


1.3
log
@Might as well bump. Bump!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/05/10 22:04:59 kili Exp $
d5 1
a5 1
REVISION=		1
d35 1
a35 1
	@@perl -pi -e 's,share/man/man1,man/man1,' ${WRKSRC}/setup.py
@


1.2
log
@This depends on texlive_texmf-full. Noticed by naddy@@. I also added
texlive_texmf-minimal (pkgpath print/texlive/texmf,-main), because
nobody knows how the texlive interdependencies will change in the
future.

While here, be nice to SUBST_VARS and give yet another space and a
tab, too.

"sure", stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/05/06 18:08:02 stsp Exp $
d5 1
a5 1
PKGNAME =		${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
d24 2
d32 1
a32 1
SUBST_VARS+=	LOCALBASE MODPY_BIN
@


1.1.1.1
log
@Port of dblatex.

hints and ok kili@@
@
text
@@
