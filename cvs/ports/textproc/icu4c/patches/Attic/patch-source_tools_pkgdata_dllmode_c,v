head	1.2;
access;
symbols
	OPENBSD_4_4:1.1.0.6
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.4
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.2
	OPENBSD_4_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.01.27.22.11.15;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2007.08.06.21.17.43;	author steven;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to icu4c 4.0.1, from MAINTAINER :
- Link with -pthread instead of -lphtread.
- Use VERSION (consistent with other ports, although it's still not a
  rule) and propagate it where needed.
- Propagate SO_VERSION using MAKE_FLAGS.
- Fix MASTER_SITES.
- Remove a bunch of patches that prevented .so links to be created, use
  a post-install target to remove them instead.

Discussed with and ok ajacoutot@@
@
text
@$OpenBSD: patch-source_tools_pkgdata_dllmode_c,v 1.1 2007/08/06 21:17:43 steven Exp $
--- source/tools/pkgdata/dllmode.c.orig	Fri Feb 24 20:47:48 2006
+++ source/tools/pkgdata/dllmode.c	Mon Aug  6 19:11:42 2007
@@@@ -120,9 +120,6 @@@@ void pkg_mode_dll(UPKGOptions *o, FileStream *makefile
 #endif
 
     uprv_strcpy(tmp, "all: $(TARGETDIR)/$(FINAL_SO_TARGET) $(BATCH_TARGET)");
-    if (o->version) {
-        uprv_strcat(tmp, " $(TARGETDIR)/$(MIDDLE_SO_TARGET) $(TARGETDIR)/$(SO_TARGET)");
-    }
     uprv_strcat(tmp, "\n\n");
     T_FileStream_writeLine(makefile, tmp);
     
@@@@ -260,13 +257,6 @@@@ void pkg_mode_dll(UPKGOptions *o, FileStream *makefile
     T_FileStream_writeLine(makefile, "\t$(INSTALL-L) $(TARGETDIR)/$(basename $(FINAL_SO_TARGET))$(IMPORT_LIB_EXT) $(INSTALLTO)/$(basename( $(FINAL_SO_TARGET))$(IMPORT_LIB_EXT)\n");
     T_FileStream_writeLine(makefile, "endif\n");
     if (o->version) {
-        T_FileStream_writeLine(makefile, "ifneq ($(FINAL_SO_TARGET),$(SO_TARGET))\n");
-        T_FileStream_writeLine(makefile, "\tcd $(INSTALLTO) && $(RM) $(SO_TARGET) && ln -s $(FINAL_SO_TARGET) $(SO_TARGET)\n");
-        T_FileStream_writeLine(makefile, "ifneq ($(FINAL_SO_TARGET),$(MIDDLE_SO_TARGET))\n");
-        T_FileStream_writeLine(makefile, "\tcd $(INSTALLTO) && $(RM) $(MIDDLE_SO_TARGET) && ln -s $(FINAL_SO_TARGET) $(MIDDLE_SO_TARGET)\n");
-        T_FileStream_writeLine(makefile, "endif\n");
-        T_FileStream_writeLine(makefile, "endif\n");
-
 #ifdef OS390
         T_FileStream_writeLine(makefile, "ifneq ($(IMPORT_LIB_EXT),)\n");
         T_FileStream_writeLine(makefile, "\tcd $(INSTALLTO) && $(RM) $(basename $(MIDDLE_SO_TARGET))$(IMPORT_LIB_EXT) && ln -s $(basename $(FINAL_SO_TARGET))$(IMPORT_LIB_EXT) $(basename $(MIDDLE_SO_TARGET))$(IMPORT_LIB_EXT)\n");
@


1.1
log
@don't install shared libraries that don't follow our naming scheme,
and some port cleanup while here.

ok naddy@@ simon@@
@
text
@d1 1
a1 1
$OpenBSD$
@

