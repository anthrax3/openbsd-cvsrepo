head	1.24;
access;
symbols
	OPENBSD_6_0:1.20.0.2
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.19.0.2
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.10.0.2
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.7.0.2
	OPENBSD_5_5_BASE:1.7
	bcallah_2013-Sep-20:1.1.1.1
	bcallah:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2017.01.05.13.50.49;	author tb;	state Exp;
branches;
next	1.23;
commitid	jOcUACC4TpAvcliX;

1.23
date	2016.12.15.14.16.38;	author fcambus;	state Exp;
branches;
next	1.22;
commitid	J68TDZythdtUeriv;

1.22
date	2016.12.02.14.51.52;	author sthen;	state Exp;
branches;
next	1.21;
commitid	XzevVviwGc41bACB;

1.21
date	2016.09.30.02.08.52;	author juanfra;	state Exp;
branches;
next	1.20;
commitid	DljmXZBFQCLzmyxC;

1.20
date	2016.05.17.10.57.07;	author sthen;	state Exp;
branches;
next	1.19;
commitid	Rrof7qAbNmLpYWqg;

1.19
date	2015.10.09.12.48.22;	author jasper;	state Exp;
branches;
next	1.18;
commitid	AFkr9NkKTHp2WFB2;

1.18
date	2015.09.18.14.54.15;	author benoit;	state Exp;
branches;
next	1.17;
commitid	43t2h7oreN3WbM2n;

1.17
date	2015.05.17.13.58.42;	author bcallah;	state Exp;
branches;
next	1.16;
commitid	jApXiKPtLFjWE4TO;

1.16
date	2015.02.09.20.56.44;	author bcallah;	state Exp;
branches;
next	1.15;
commitid	h9kKzZdkroKgRAYH;

1.15
date	2014.12.26.16.06.02;	author bcallah;	state Exp;
branches;
next	1.14;
commitid	3002vZbtuyGqrRY5;

1.14
date	2014.12.06.18.01.00;	author bcallah;	state Exp;
branches;
next	1.13;
commitid	G4XAU46RTVHpW32d;

1.13
date	2014.10.27.18.53.27;	author bcallah;	state Exp;
branches;
next	1.12;
commitid	DBvc8bPdOEBU5RMU;

1.12
date	2014.10.13.15.04.11;	author bcallah;	state Exp;
branches;
next	1.11;
commitid	9GDyHlBOhJfipkyA;

1.11
date	2014.09.10.19.14.30;	author bcallah;	state Exp;
branches;
next	1.10;
commitid	xV3RpTwaUyHSmFVP;

1.10
date	2014.07.06.21.00.41;	author sthen;	state Exp;
branches;
next	1.9;
commitid	sG9Upb9gdGMnNTzm;

1.9
date	2014.05.30.13.08.47;	author bcallah;	state Exp;
branches;
next	1.8;

1.8
date	2014.03.25.18.57.31;	author bcallah;	state Exp;
branches;
next	1.7;

1.7
date	2014.02.06.17.17.53;	author bcallah;	state Exp;
branches;
next	1.6;

1.6
date	2014.01.23.18.14.35;	author bcallah;	state Exp;
branches;
next	1.5;

1.5
date	2013.11.06.21.56.49;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2013.09.30.17.17.36;	author bcallah;	state Exp;
branches;
next	1.3;

1.3
date	2013.09.30.16.08.27;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2013.09.20.14.40.09;	author bcallah;	state Exp;
branches;
next	1.1;

1.1
date	2013.09.20.12.46.59;	author bcallah;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.09.20.12.46.59;	author bcallah;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Fix a buffer overrun and subsequent crash that may occur when ag is given
an absolute path as root of the tree to search: it's looking for a trailing
slash that isn't always there.

Fix by Allen Wild, https://github.com/ggreer/the_silver_searcher/pull/1040/

ok awolk, sthen, jca
@
text
@# $OpenBSD: Makefile,v 1.23 2016/12/15 14:16:38 fcambus Exp $

COMMENT =	code searching tool, with a focus on speed (ag)

DISTNAME =	the_silver_searcher-1.0.2
REVISION =	0
CATEGORIES =	textproc

HOMEPAGE =	https://github.com/ggreer/the_silver_searcher
MAINTAINER =	Florian Stinglmayr <florian@@n0la.org>

# Apache 2.0
PERMIT_PACKAGE_CDROM =	Yes

# uses pledge()
WANTLIB += c lzma pcre pthread z

MODULES =	gcc4
MODGCC4_ARCHS =	* # needed for TLS

MASTER_SITES =	http://geoff.greer.fm/ag/releases/

LIB_DEPENDS =	archivers/xz \
		devel/pcre

CONFIGURE_STYLE =	gnu
SEPARATE_BUILD =	Yes
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include"
FAKE_FLAGS =		bashcompdir=${PREFIX}/share/bash-completion/completions

# not included in distfile, only in repository. requires cram.
NO_TEST =	YES

.include <bsd.port.mk>
@


1.23
log
@Update the_silver_searcher to 1.0.2, from maintainer Florian Stinglmayr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/12/02 14:51:52 sthen Exp $
d6 1
@


1.22
log
@update to the_silver_searcher-1.0.1, from maintainer Florian Stinglmayr,
tweak by me and ok with Florian.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/09/30 02:08:52 juanfra Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-1.0.1
@


1.21
log
@Update to the_silver_searcher 0.33.0. From Florian Stinglmayr (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/05/17 10:57:07 sthen Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.33.0
d16 3
@


1.20
log
@update to the_silver_searcher-0.32.0, which adds pledge support (upstream).
use more of upstream's build infrastructure to simplify the ports Makefile.
ok Florian Stinglmayr (maintainer), tb@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/10/09 12:48:22 jasper Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.32.0
@


1.19
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/09/18 14:54:15 benoit Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.31.0
d14 1
d23 1
d25 1
d27 1
a27 1
# referenced in Makefile, but apparently included in distfile
a28 9

pre-configure:
	sed -i "s,-O2,,g" ${WRKSRC}/configure

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/ag ${PREFIX}/bin/ag
	${INSTALL_MAN} ${WRKSRC}/doc/ag.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/bash-completion/completions
	${INSTALL_DATA} ${WRKSRC}/ag.bashcomp.sh ${PREFIX}/share/bash-completion/completions/ag
@


1.18
log
@Update to the_silver_searcher-0.31.0.

from Florian Stinglmayr (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/05/17 13:58:42 bcallah Exp $
d28 1
a28 1
	perl -pi -e "s,-O2,,g" ${WRKSRC}/configure
@


1.17
log
@Update to 0.30.0
From Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/02/09 20:56:44 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.30.0
@


1.16
log
@Update to 0.29.1
From Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/12/26 16:06:02 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.29.1
@


1.15
log
@Update to 0.28.0
From Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/12/06 18:01:00 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.28.0
@


1.14
log
@Update to 0.27.0, also remove a hardcoded -O2 while here.
ok Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/10/27 18:53:27 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.27.0
@


1.13
log
@Update to 0.26.0
From Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/10/13 15:04:11 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.26.0
d26 3
@


1.12
log
@Update to 0.25.0
ok Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/09/10 19:14:30 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.25.0
@


1.11
log
@Update to 0.24.1
From maintainer Florian Stinglmayr - thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/07/06 21:00:41 sthen Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.24.1
@


1.10
log
@update the the_silver_searcher-0.23.0, from maintainer Florian Stinglmayr
add a comment next to NO_TEST while there (tests are referenced in the
Makefile but don't appear in the distfile).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/05/30 13:08:47 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.23.0
@


1.9
log
@Update to 0.22.0. Contains an updated file detection mechanism and a few
simple updates.
From MAINTAINER Florian Stinglmayr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/03/25 18:57:31 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.22.0
d24 1
@


1.8
log
@Bugfix update to 0.21.1
From Florian Stinglmayr (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/02/06 17:17:53 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.21.1
@


1.7
log
@Bugfix update to 0.19.2
From MAINTAINER Florian Stinglmayr <florian AT n0la DOT org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/01/23 18:14:35 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.19.2
@


1.6
log
@Bugfix update to 0.19.1
From Florian Stinglmayr (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/11/06 21:56:49 sthen Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.19.1
@


1.5
log
@update to the_silver_searcher-0.18.1, from maintainer Florian Stinglmayr
also update DESCR to add some information from upstream about why it's fast,
ok with Florian.

* Searching for literals (no regex) uses Boyer-Moore-Horspool strstr.
* Files are mmap()ed instead of read into a buffer.
* Regex searches use PCRE 8.21+'s JIT compiler.
* Ag calls pcre_study() before executing the regex on a jillion files.
* Instead of calling fnmatch() on every pattern in your ignore files,
  non-regex patterns are loaded into an array and binary searched.
* Ag uses Pthreads to take advantage of multiple CPU cores and search
  files in parallel.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/09/30 17:17:36 bcallah Exp $
d5 1
a5 1
DISTNAME =	the_silver_searcher-0.18.1
d9 1
a9 1
MAINTAINER =	Florian Stinglmayr <fstinglmayr@@gmail.com>
@


1.4
log
@Fix configure so it finds pthread.h
Bump REVISION
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/09/30 16:08:27 sthen Exp $
d5 1
a5 2
DISTNAME =	the_silver_searcher-0.17
REVISION =	0
@


1.3
log
@update to the_silver_searcher-0.17, from maintainer Florian Stinglmayr,
and thanks to upstream for generating proper tar.gz releases when I requested :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/09/20 14:40:09 bcallah Exp $
d6 1
@


1.2
log
@Use the Github tarball instead of MAINTAINER-generated tarball.
Use an autoconf/automake pre-configure routine (lifted from games/manaplus)
Use a do-install routine to eliminate install-rerunning-autoconf weirdness.
Also, the do-install routine installs the bash-completions script under the
correct name.
Bump REVISION.
ok aja@@, with tweak from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/09/20 12:46:59 bcallah Exp $
a2 1
V =		0.16
d5 1
a5 3
DISTNAME =	the_silver_searcher-${V}
DISTFILES =	the_silver_searcher-${V}.tar.gz{${V}.tar.gz}
REVISION =	0
d16 1
a16 4
MASTER_SITES =	https://github.com/ggreer/the_silver_searcher/archive/

BUILD_DEPENDS =	${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}
a24 8

AUTOCONF_VERSION =	2.69
AUTOMAKE_VERSION =	1.11

pre-configure:
	cd ${WRKSRC} && \
		${SETENV} AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
			AUTOCONF_VERSION=${AUTOCONF_VERSION} autoreconf -i
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2012/03/29 13:41:58 sthen Exp $
d3 1
d6 3
a8 1
DISTNAME =	the_silver_searcher-0.16
d19 4
a22 1
MASTER_SITES =	http://pub.n0la.org/
d31 14
@


1.1.1.1
log
@Import textproc/the_silver_searcher.
The silver searcher, also known as ag, is a fast text searching tool
similar to grep or ack.
ok sthen@@
@
text
@@
