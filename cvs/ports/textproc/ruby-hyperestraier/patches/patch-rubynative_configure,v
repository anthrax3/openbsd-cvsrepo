head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.10
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.8
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.4
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.14
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.12
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.10
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.8
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.6
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.4
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.1.1.0.16
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.14
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.12
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.10
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.8
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.6
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.4
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	bernd_2007-jan-18:1.1.1.1
	bernd:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2015.01.08.18.59.03;	author jeremy;	state Exp;
branches;
next	1.3;
commitid	PMZ4YDTaZgK8cx5M;

1.3
date	2011.07.12.18.06.23;	author jeremy;	state Exp;
branches;
next	1.2;

1.2
date	2010.09.23.22.15.32;	author jeremy;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.18.10.38.47;	author bernd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.18.10.38.47;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Add a ruby22 FLAVOR to support a ruby 2.2 package.

Update the configure patch so that it builds with ruby 2.2.
@
text
@$OpenBSD: patch-rubynative_configure,v 1.3 2011/07/12 18:06:23 jeremy Exp $

Use RbConfig instead of Config, as RbConfig no longer exists
in ruby 2.2.

Use the current ruby version to figure out prefix and sitelibdir.

--- rubynative/configure.orig	Mon Dec 24 17:53:40 2007
+++ rubynative/configure	Mon Dec  1 15:57:38 2014
@@@@ -1228,8 +1228,6 @@@@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 
 # Export variables
-RUBY="ruby"
-RDOC="rdoc"
 MYRBLIBDIR=/usr/local/lib/ruby/site_ruby
 MYRUNPATH=""
 
@@@@ -1258,7 +1256,7 @@@@ fi
 # Setting the default prefix
 if test "$prefix" = NONE
 then
-  prefix=`ruby -rrbconfig -e 'puts(Config::CONFIG.fetch("prefix"))'`
+  prefix=`$RUBY -rrbconfig -e 'puts(RbConfig::CONFIG.fetch("prefix"))'`
 fi
 
 
@@@@ -1268,24 +1266,8 @@@@ fi
 #================================================================
 
 
-# Ruby interpreter
-printf 'checking RUBY... '
-if which ruby > /dev/null
-then
-  RUBY=`which ruby`
-fi
-printf '%s\n' "$RUBY"
-
-# Other building tools
-printf 'checking RDOC... '
-if which rdoc > /dev/null
-then
-  RDOC=`which rdoc`
-fi
-printf '%s\n' "$RDOC"
-
 # Librarh path
-myrblibdir=`ruby -rrbconfig -e 'puts(Config::CONFIG.fetch("sitelibdir"))'`
+myrblibdir=`$RUBY -rrbconfig -e 'puts(RbConfig::CONFIG.fetch("sitearchdir"))'`
 if test -n "$myrblibdir"
 then
   MYRBLIBDIR="$myrblibdir"
@


1.3
log
@Add a ruby19 FLAVOR to build a ruby 1.9 version that can be installed
side by side with the default ruby 1.8 version.

OK landry@@
@
text
@d1 7
a7 1
$OpenBSD: patch-rubynative_configure,v 1.2 2010/09/23 22:15:32 jeremy Exp $
d9 1
a9 1
+++ rubynative/configure	Fri Jul  8 09:01:02 2011
d24 1
a24 1
+  prefix=`$RUBY -rrbconfig -e 'puts(Config::CONFIG.fetch("prefix"))'`
d50 1
a50 1
+myrblibdir=`$RUBY -rrbconfig -e 'puts(Config::CONFIG.fetch("sitearchdir"))'`
@


1.2
log
@Handle changes caused by splitting the ruby port and bump

OK jcs@@, landry@@, jasper@@, sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-rubynative_configure,v 1.1.1.1 2007/01/18 10:38:47 bernd Exp $
d3 2
a4 2
+++ rubynative/configure	Mon Sep 13 12:44:01 2010
@@@@ -1228,8 +1228,8 @@@@ ac_compiler_gnu=$ac_cv_c_compiler_gnu
a9 2
+RUBY="ruby18"
+RDOC="rdoc18"
d13 1
a13 1
@@@@ -1258,7 +1258,7 @@@@ fi
d18 1
a18 1
+  prefix=`ruby18 -rrbconfig -e 'puts(Config::CONFIG.fetch("prefix"))'`
d22 2
a23 1
@@@@ -1270,22 +1270,22 @@@@ fi
d25 3
a27 2
 # Ruby interpreter
 printf 'checking RUBY... '
d29 1
a29 2
+if which ruby18 > /dev/null
 then
d31 5
a35 6
+  RUBY=`which ruby18`
 fi
 printf '%s\n' "$RUBY"
 
 # Other building tools
 printf 'checking RDOC... '
d37 1
a37 2
+if which rdoc18 > /dev/null
 then
d39 3
a41 4
+  RDOC=`which rdoc18`
 fi
 printf '%s\n' "$RDOC"
 
d44 1
a44 1
+myrblibdir=`ruby18 -rrbconfig -e 'puts(Config::CONFIG.fetch("sitearchdir"))'`
@


1.1
log
@Initial revision
@
text
@d1 43
a43 4
$OpenBSD$
--- rubynative/configure.orig	Fri Jan  5 19:24:11 2007
+++ rubynative/configure	Fri Jan  5 19:24:21 2007
@@@@ -1285,7 +1285,7 @@@@ fi
d48 1
a48 1
+myrblibdir=`ruby -rrbconfig -e 'puts(Config::CONFIG.fetch("sitearchdir"))'`
@


1.1.1.1
log
@Initial import of ruby-hyperestraier-1.0.0.

This is a Ruby interface to the Hyper Estraier high performance full-text
search engine.

Submitted and maintained by Jeremy Evans <jeremyevans0 at gmail dot com>
@
text
@@
