head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_1:1.1.1.1.0.8
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.6
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.4
	OPENBSD_5_8_BASE:1.1.1.1
	okan_20150324:1.1.1.1
	okan:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2015.03.24.19.16.13;	author okan;	state Exp;
branches
	1.1.1.1;
next	;
commitid	F0CFyG1IJkn4sMvY;

1.1.1.1
date	2015.03.24.19.16.13;	author okan;	state Exp;
branches;
next	;
commitid	F0CFyG1IJkn4sMvY;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$

Switch from strcat to a safer idiom.

--- writer.c.orig	Mon Mar  9 18:52:39 2015
+++ writer.c	Sat Mar 21 15:44:10 2015
@@@@ -648,6 +648,7 @@@@ char * dimension_for_attribute(char *querystring, node
     int i;
     char *upper;
     GString *result;
+    size_t dimension_len;
 
     attribute = node_for_attribute(querystring, list);
     if (attribute == NULL) return NULL;
@@@@ -655,6 +656,7 @@@@ char * dimension_for_attribute(char *querystring, node
 	fprintf(stderr, "a\n");
 #endif
 
+    dimension_len = strlen(attribute->children->str);
     dimension = strdup(attribute->children->str);
     upper = strdup(attribute->children->str);
 
@@@@ -667,15 +669,13 @@@@ char * dimension_for_attribute(char *querystring, node
 	fprintf(stderr, "b\n");
 #endif
 
-    if (strstr(dimension, "px")) {
-        ptr = strstr(dimension,"px");
-        ptr[0] = '\0';
-        strcat(ptr,"pt");
-    }
+    ptr = strstr(dimension, "px");
+    if (ptr)
+        ptr[1] = 't';
 
     result = g_string_new(dimension);
     
-    if ((strcmp(dimension,upper) == 0) && (dimension[strlen(dimension) -1] != '%')) {
+    if ((strcmp(dimension,upper) == 0) && (dimension[dimension_len-1] != '%')) {
         /* no units */
         g_string_append_printf(result, "pt");
     }
@


1.1.1.1
log
@Import textproc/multimarkdown
feedback and ok bcallah@@

MultiMarkdown is a derivative of Markdown that adds new syntax
features, such as footnotes, tables, and metadata. Additionally, it
offers mechanisms to convert plain text into LaTeX in addition to
HTML.

From Sean Levy
@
text
@@
