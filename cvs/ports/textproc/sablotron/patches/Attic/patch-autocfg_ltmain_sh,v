head	1.2;
access;
symbols
	OPENBSD_3_8:1.1.0.8
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2005.12.25.16.13.44;	author steven;	state dead;
branches;
next	1.1;

1.1
date	2004.02.29.00.39.25;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@SHARED_LIBS and USE_LIBTOOL
ok sturm@@
@
text
@$OpenBSD: patch-autocfg_ltmain_sh,v 1.1 2004/02/29 00:39:25 avsm Exp $
--- autocfg/ltmain.sh.orig	2003-11-24 10:13:10.000000000 +0000
+++ autocfg/ltmain.sh	2004-02-29 00:31:03.000000000 +0000
@@@@ -1079,12 +1079,34 @@@@ compiler."
 	    # Do not include libc_r directly, use -pthread flag.
 	    continue
 	    ;;
+	  *-*-openbsd*)
+	    # Do not include libc due to us having libc/libc_r.
+	    continue
+	    ;;
+	  esac
+	elif test "$arg" = "-lc_r"; then
+	  case "$host" in
+	  *-*-openbsd*)
+	    # Do not include libc_r directly, use -pthread flag.
+	    continue
+	    ;;
 	  esac
 	fi
 	deplibs="$deplibs $arg"
 	continue
 	;;
 
+      -pthread)
+	case $host in
+	*-*-openbsd*)
+	  deplibs="$deplibs $arg"
+	  ;;
+	*)
+	  continue
+	  ;;
+	esac
+	;;
+
       -module)
 	module=yes
 	continue
@


1.1
log
@juggle patches around
@
text
@d1 1
a1 1
$OpenBSD$
@

