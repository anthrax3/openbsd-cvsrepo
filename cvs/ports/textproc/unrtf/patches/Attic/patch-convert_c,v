head	1.3;
access;
symbols
	OPENBSD_5_6:1.2.0.38
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.36
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.34
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.32
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.30
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.28
	OPENBSD_5_0:1.2.0.26
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.24
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.22
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.20
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.18
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.16
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.14
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.12
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.10
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.8
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_5:1.1.0.4
	OPENBSD_3_6:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2014.12.30.15.02.32;	author sthen;	state dead;
branches;
next	1.2;
commitid	GI8r6U53xUmkVguh;

1.2
date	2005.05.15.18.09.41;	author db;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.17.22.46.05;	author robert;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2005.01.20.21.14.37;	author robert;	state Exp;
branches;
next	;

1.1.4.1
date	2005.01.20.21.15.36;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to unrtf 0.21.8, fixing some issues discovered with afl
@
text
@$OpenBSD: patch-convert_c,v 1.2 2005/05/15 18:09:41 db Exp $
--- convert.c.orig	Thu Feb 19 00:35:03 2004
+++ convert.c	Thu May 12 13:03:29 2005
@@@@ -341,7 +341,7 @@@@ process_font_table (Word *w)
 				while(w2) {
 					tmp = word_string (w2);
 					if (tmp && tmp[0] != '\\')
-						strcat(name,tmp);
+						strlcat(name,tmp,sizeof(name) - strlen(name) - 1);
 
 					w2=w2->next;
 				}
@@@@ -676,7 +676,7 @@@@ cmd_cf (Word *w, int align, char has_par
 	}
 	else
 	{
-		sprintf (str,"#%02x%02x%02x",
+		snprintf (str, sizeof(str), "#%02x%02x%02x",
 			color_table[num].r,
 			color_table[num].g,
 			color_table[num].b);
@@@@ -703,7 +703,7 @@@@ cmd_cb (Word *w, int align, char has_par
 	}
 	else
 	{
-		sprintf (str,"#%02x%02x%02x",
+		snprintf (str, sizeof(str), "#%02x%02x%02x",
 			color_table[num].r,
 			color_table[num].g,
 			color_table[num].b);
@@@@ -728,7 +728,7 @@@@ cmd_fs (Word *w, int align, char has_par
 	/* Note, fs20 means 10pt */
 	points /= 2;
 
-	sprintf (str,"%d",points);
+	snprintf (str, sizeof(str), "%d",points);
 	attr_push(ATTR_FONTSIZE,str);
 
 	return FALSE;
@@@@ -862,7 +862,7 @@@@ cmd_highlight (Word *w, int align, char 
 	}
 	else
 	{
-		sprintf (str,"#%02x%02x%02x",
+		snprintf (str, sizeof(str), "#%02x%02x%02x",
 			color_table[num].r,
 			color_table[num].g,
 			color_table[num].b);
@@@@ -1019,7 +1019,7 @@@@ static int 
 cmd_expand (Word *w, int align, char has_param, short param) {
 	char str[10];
 	if (has_param) {
-		sprintf (str, "%d", param/4);
+		snprintf (str, sizeof(str), "%d", param/4);
 		if (!param) 
 			attr_pop(ATTR_EXPAND);
 		else 
@@@@ -1043,7 +1043,7 @@@@ cmd_emboss (Word *w, int align, char has
 		attr_pop(ATTR_EMBOSS);
 	else
 	{
-		sprintf (str, "%d", param);
+		snprintf (str, sizeof(str), "%d", param);
 		attr_push(ATTR_EMBOSS, str);
 	}
 	return FALSE;
@@@@ -1064,7 +1064,7 @@@@ cmd_engrave (Word *w, int align, char ha
 		attr_pop(ATTR_ENGRAVE);
 	else
 	{
-		sprintf (str, "%d", param);
+		snprintf (str, sizeof(str), "%d", param);
 		attr_push(ATTR_ENGRAVE, str);
 	}
 	return FALSE;
@@@@ -2610,7 +2610,7 @@@@ word_print_core (Word *w)
 						case PICT_DI: ext="dib"; break; /* Device independent bitmap=??? */
 						case PICT_PM: ext="pmm"; break; /* OS/2 metafile=??? */
 						}
-						sprintf (picture_path, "pict%03d.%s", 
+						snprintf (picture_path, sizeof(picture_path), "pict%03d.%s", 
 							picture_file_number++,ext);
 						f=fopen(picture_path,"w");
 					}
@


1.2
log
@update to version 0.19.3
ok maintainer, sturm@@
@
text
@d1 1
a1 1
$OpenBSD: patch-convert_c,v 1.1 2005/01/17 22:46:05 robert Exp $
@


1.1
log
@SECURITY:
fix a buffer overflow vulnerability; bump PKGNAME;
http://www.vuxml.org/openbsd/0393affc-68d8-11d9-9b34-00065bd5b0b6.html
@
text
@d1 4
a4 4
$OpenBSD$
--- convert.c.orig	Mon Jan 17 23:32:14 2005
+++ convert.c	Mon Jan 17 23:33:03 2005
@@@@ -332,7 +332,7 @@@@
d13 72
@


1.1.4.1
log
@SECURITY:
fix a buffer overflow vulnerability; bump PKGNAME;
http://www.vuxml.org/openbsd/0393affc-68d8-11d9-9b34-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
$OPenBSD$
@


1.1.2.1
log
@SECURITY:
fix a buffer overflow vulnerability; bump PKGNAME;
http://www.vuxml.org/openbsd/0393affc-68d8-11d9-9b34-00065bd5b0b6.html

ok brad@@
@
text
@@

