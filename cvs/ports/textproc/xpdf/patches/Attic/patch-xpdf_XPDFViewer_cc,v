head	1.5;
access;
symbols
	OPENBSD_4_3:1.4.0.4
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.6
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.8
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.6
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.4
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2008.04.25.19.19.05;	author deanna;	state dead;
branches;
next	1.4;

1.4
date	2007.03.30.04.09.42;	author ckuethe;	state Exp;
branches;
next	1.3;

1.3
date	2005.09.09.17.34.53;	author brad;	state Exp;
branches
	1.3.2.1
	1.3.4.1
	1.3.6.1;
next	1.2;

1.2
date	2004.01.25.06.02.40;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.24.19.31.57;	author brad;	state Exp;
branches;
next	;

1.3.2.1
date	2007.04.03.12.16.22;	author sturm;	state Exp;
branches;
next	;

1.3.4.1
date	2007.04.03.12.03.20;	author sturm;	state Exp;
branches;
next	;

1.3.6.1
date	2007.05.01.16.28.30;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Simplify anti-DRM patches.  Catches a new DRM check that slipped in
from upstream.

Diff from brad@@, inspired by Floor on ports@@

ok brad@@, bernd@@, pvalchev@@, and a special "Kill the DRM!  DIE DIE
DIE!!!!!!!!" from todd@@
@
text
@$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.4 2007/03/30 04:09:42 ckuethe Exp $
--- xpdf/XPDFViewer.cc.orig	Tue Feb 27 22:05:52 2007
+++ xpdf/XPDFViewer.cc	Fri Mar 30 00:31:19 2007
@@@@ -3406,11 +3406,6 @@@@ void XPDFViewer::printPrintCbk(Widget widget, XtPointe
   PSOutputDev *psOut;
 
   doc = viewer->core->getDoc();
-  if (!doc->okToPrint()) {
-    error(-1, "Printing this document is not allowed.");
-    return;
-  }
-
   viewer->core->setBusyCursor(gTrue);
 
   XtVaGetValues(viewer->printWithCmdBtn, XmNset, &withCmd, NULL);
@


1.4
log
@Update to xpdf 3.0.2, from Stuart Henderson and Brad Smith
Includes some security fixes

ok pvalchev, todd
@
text
@d1 1
a1 1
$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.3 2005/09/09 17:34:53 brad Exp $
@


1.3
log
@upgrade to xpdf 3.01

Most of the update is from Bernd Ahlers <bernd at ba-net dot org>
@
text
@d1 4
a4 4
$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.2 2004/01/25 06:02:40 brad Exp $
--- xpdf/XPDFViewer.cc.orig	Wed Aug 17 07:34:31 2005
+++ xpdf/XPDFViewer.cc	Thu Aug 18 10:08:25 2005
@@@@ -2391,11 +2391,6 @@@@ void XPDFViewer::printPrintCbk(Widget wi
@


1.3.6.1
log
@MFC:
Update to xpdf 3.0.2, from Stuart Henderson and Brad Smith
Includes some security fixes
@
text
@d1 4
a4 4
$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.3 2005/09/09 17:34:53 brad Exp $
--- xpdf/XPDFViewer.cc.orig	Tue Feb 27 23:05:52 2007
+++ xpdf/XPDFViewer.cc	Sat Apr 14 23:07:36 2007
@@@@ -3406,11 +3406,6 @@@@ void XPDFViewer::printPrintCbk(Widget wi
@


1.3.2.1
log
@MFC:
Update to xpdf 3.0.2, from Stuart Henderson and Brad Smith
Includes some security fixes
@
text
@d1 4
a4 4
$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.3 2005/09/09 17:34:53 brad Exp $
--- xpdf/XPDFViewer.cc.orig	Tue Feb 27 23:05:52 2007
+++ xpdf/XPDFViewer.cc	Tue Apr  3 14:11:57 2007
@@@@ -3406,11 +3406,6 @@@@ void XPDFViewer::printPrintCbk(Widget wi
@


1.3.4.1
log
@MFC:
Update to xpdf 3.0.2, from Stuart Henderson and Brad Smith
Includes some security fixes
@
text
@d1 4
a4 4
$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.3 2005/09/09 17:34:53 brad Exp $
--- xpdf/XPDFViewer.cc.orig	Tue Feb 27 23:05:52 2007
+++ xpdf/XPDFViewer.cc	Mon Apr  2 23:37:33 2007
@@@@ -3406,11 +3406,6 @@@@ void XPDFViewer::printPrintCbk(Widget wi
@


1.2
log
@upgrade to xpdf 3.00

"shitloads better rendering" - jose@@
@
text
@d1 4
a4 4
$OpenBSD: patch-xpdf_XPDFViewer_cc,v 1.1 2003/10/24 19:31:57 brad Exp $
--- xpdf/XPDFViewer.cc.orig	2004-01-21 20:26:45.000000000 -0500
+++ xpdf/XPDFViewer.cc	2004-01-24 23:34:15.000000000 -0500
@@@@ -2285,11 +2285,6 @@@@ void XPDFViewer::printPrintCbk(Widget wi
@


1.1
log
@remove DRM bullshit.
--
From: cloder@@
@
text
@d1 4
a4 4
$OpenBSD$
--- xpdf/XPDFViewer.cc.orig	2003-10-23 22:55:18.000000000 -0700
+++ xpdf/XPDFViewer.cc	2003-10-23 22:55:31.000000000 -0700
@@@@ -2132,11 +2132,6 @@@@ void XPDFViewer::printPrintCbk(Widget wi
@

