head	1.5;
access;
symbols
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_5:1.1.0.4
	OPENBSD_3_6:1.1.0.2;
locks; strict;
comment	@# @;


1.5
date	2010.12.04.10.44.33;	author miod;	state dead;
branches;
next	1.4;

1.4
date	2010.10.13.17.29.37;	author jasper;	state Exp;
branches
	1.4.2.1
	1.4.4.1;
next	1.3;

1.3
date	2005.09.09.17.34.53;	author brad;	state dead;
branches;
next	1.2;

1.2
date	2005.08.10.20.27.25;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.22.17.36.24;	author robert;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2004.12.27.12.19.00;	author robert;	state Exp;
branches;
next	;

1.1.4.1
date	2004.12.27.12.21.44;	author robert;	state Exp;
branches;
next	;

1.4.2.1
date	2010.10.17.21.30.54;	author jasper;	state Exp;
branches;
next	;

1.4.4.1
date	2010.10.17.21.32.24;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to xpdf 3.02pl5. ok kili@@
@
text
@$OpenBSD: patch-xpdf_Gfx_cc,v 1.4 2010/10/13 17:29:37 jasper Exp $

Security fix for CVE-2010-3702.
Based on patch from upstream poppler git:
http://cgit.freedesktop.org/poppler/poppler/commit/?id=e853106b58d6b4b0467dbd6436c9bb1cfbd372cf

--- xpdf/Gfx.cc.orig	Wed Oct 13 18:58:01 2010
+++ xpdf/Gfx.cc	Wed Oct 13 18:59:56 2010
@@@@ -443,6 +443,7 @@@@ Gfx::Gfx(XRef *xrefA, OutputDev *outA, int pageNum, Di
 
   xref = xrefA;
   subPage = gFalse;
+  parser = NULL;
   printCommands = globalParams->getPrintCommands();
 
   // start the resource stack
@@@@ -485,6 +486,7 @@@@ Gfx::Gfx(XRef *xrefA, OutputDev *outA, Dict *resDict,
 
   xref = xrefA;
   subPage = gTrue;
+  parser = NULL;
   printCommands = globalParams->getPrintCommands();
 
   // start the resource stack
@


1.4
log
@- add security fix for CVE-2010-3702.

ok kili@@ naddy@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.4.4.1
log
@- Security fix for CVE-2010-3702 and CVE-2010-3704.
@
text
@d1 1
a1 1
$OpenBSD: patch-xpdf_Gfx_cc,v 1.4 2010/10/13 17:29:37 jasper Exp $
@


1.4.2.1
log
@- Security fix for CVE-2010-3702 and CVE-2010-3704.
@
text
@d1 1
a1 1
$OpenBSD: patch-xpdf_Gfx_cc,v 1.4 2010/10/13 17:29:37 jasper Exp $
@


1.3
log
@upgrade to xpdf 3.01

Most of the update is from Bernd Ahlers <bernd at ba-net dot org>
@
text
@d1 24
a24 14
$OpenBSD: patch-xpdf_Gfx_cc,v 1.2 2005/08/10 20:27:25 naddy Exp $
--- xpdf/Gfx.cc.orig	Thu Jan 22 02:26:45 2004
+++ xpdf/Gfx.cc	Wed Aug 10 22:27:55 2005
@@@@ -2654,7 +2654,9 @@@@ void Gfx::doImage(Object *ref, Stream *s
     haveMask = gFalse;
     dict->lookup("Mask", &maskObj);
     if (maskObj.isArray()) {
-      for (i = 0; i < maskObj.arrayGetLength(); ++i) {
+      for (i = 0;
+	   i < maskObj.arrayGetLength() && i < 2*gfxColorMaxComps;
+	   ++i) {
 	maskObj.arrayGet(i, &obj1);
 	maskColors[i] = obj1.getInt();
 	obj1.free();
@


1.2
log
@sync patches
@
text
@d1 1
a1 1
$OpenBSD: patch-xpdf_Gfx_cc,v 1.1 2004/12/22 17:36:24 robert Exp $
@


1.1
log
@SECURITY:
fix a buffer overflow vulnerability; bump PKGNAME; use autoconf-2.59

ok MAINTAINER (brad@@)
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
+++ xpdf/Gfx.cc	Wed Dec 22 12:59:33 2004
@@@@ -2654,7 +2654,9 @@@@
@


1.1.4.1
log
@SECURITY:
fixed integer overflows:
http://www.vuxml.org/openbsd/d79a032a-2763-11d9-a0f4-00065bd5b0b6.html

fixed buffer overflow vulnerability:
http://www.vuxml.org/openbsd/9317ac06-5441-11d9-8ad2-00065bd5b0b6.html

ok brad@@
@
text
@@


1.1.2.1
log
@SECURITY:
fixed integer overflows:
http://www.vuxml.org/openbsd/d79a032a-2763-11d9-a0f4-00065bd5b0b6.html

fixed buffer overflow vulnerability:
http://www.vuxml.org/openbsd/9317ac06-5441-11d9-8ad2-00065bd5b0b6.html

ok brad@@
@
text
@@

