head	1.38;
access;
symbols
	OPENBSD_6_1:1.38.0.2
	OPENBSD_6_1_BASE:1.38
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	jasper_20141512:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.38
date	2017.03.12.11.39.34;	author jasper;	state Exp;
branches;
next	1.37;
commitid	zaeDHes0dU1GsXSD;

1.37
date	2017.02.28.16.18.47;	author jasper;	state Exp;
branches;
next	1.36;
commitid	QBKZbRh1WfHu92rG;

1.36
date	2017.01.13.08.49.38;	author jasper;	state Exp;
branches;
next	1.35;
commitid	Kx396uyzbc0ckKpv;

1.35
date	2016.12.20.18.49.17;	author jasper;	state Exp;
branches;
next	1.34;
commitid	ITDcPl2qhwgxnWNo;

1.34
date	2016.12.17.12.11.02;	author jasper;	state Exp;
branches;
next	1.33;
commitid	szHCWtBQfQHvZfI1;

1.33
date	2016.10.03.09.34.45;	author giovanni;	state Exp;
branches;
next	1.32;
commitid	Lu4hLv0IovCg7gY9;

1.32
date	2016.08.11.10.57.30;	author jasper;	state Exp;
branches;
next	1.31;
commitid	SL9orE2H4PocjRhX;

1.31
date	2016.07.15.11.08.45;	author jasper;	state Exp;
branches;
next	1.30;
commitid	seMOuVxiAiVQh2BP;

1.30
date	2016.05.21.10.13.16;	author jasper;	state Exp;
branches;
next	1.29;
commitid	GXUih30wqTzOmfqk;

1.29
date	2016.04.27.09.02.19;	author jasper;	state Exp;
branches;
next	1.28;
commitid	QItf7krOB0835Ler;

1.28
date	2016.04.07.10.37.23;	author jasper;	state Exp;
branches;
next	1.27;
commitid	IdOigoYWHuispGDv;

1.27
date	2016.04.01.11.05.18;	author jasper;	state Exp;
branches;
next	1.26;
commitid	t6qAPksA5fgf9BZo;

1.26
date	2016.03.16.13.04.35;	author jasper;	state Exp;
branches;
next	1.25;
commitid	lIasmqxs0T0WmuUA;

1.25
date	2016.01.18.07.53.21;	author sebastia;	state Exp;
branches;
next	1.24;
commitid	lqBxmvPJAQUyCW1w;

1.24
date	2016.01.16.15.22.08;	author jasper;	state Exp;
branches;
next	1.23;
commitid	4rMupnPIyPZYjciq;

1.23
date	2016.01.16.14.32.38;	author jasper;	state Exp;
branches;
next	1.22;
commitid	Ss7SITDyvXisMmXt;

1.22
date	2015.11.25.12.56.11;	author sebastia;	state Exp;
branches;
next	1.21;
commitid	hnNZokzWjoSz3vPI;

1.21
date	2015.11.24.09.11.06;	author jasper;	state Exp;
branches;
next	1.20;
commitid	x9aAifyKiYiivEom;

1.20
date	2015.11.16.19.01.12;	author jasper;	state Exp;
branches;
next	1.19;
commitid	YOAzCfNjrxP86rVH;

1.19
date	2015.11.11.21.21.04;	author jasper;	state Exp;
branches;
next	1.18;
commitid	H1jYTc8HQ7Tg69Qk;

1.18
date	2015.11.10.20.12.44;	author jasper;	state Exp;
branches;
next	1.17;
commitid	XqUQ2ALbDF0JUmc1;

1.17
date	2015.11.10.20.02.54;	author jasper;	state Exp;
branches;
next	1.16;
commitid	wjnxkT2AVUCrqXiC;

1.16
date	2015.10.09.12.23.24;	author jasper;	state Exp;
branches;
next	1.15;
commitid	w9A0FulCq6qJ8jC4;

1.15
date	2015.07.30.07.54.51;	author jasper;	state Exp;
branches;
next	1.14;
commitid	Mfm565oDkL2k54R5;

1.14
date	2015.07.18.00.59.51;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	1VpoB3Hj4fedb2aV;

1.13
date	2015.07.15.23.34.49;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	d9vjtDOpS0FMv46j;

1.12
date	2015.06.14.09.16.59;	author jasper;	state Exp;
branches;
next	1.11;
commitid	eZXoQ09hZKrzEnoq;

1.11
date	2015.06.10.13.19.03;	author jasper;	state Exp;
branches;
next	1.10;
commitid	24As6wHViNgTQfHU;

1.10
date	2015.05.17.09.43.22;	author jasper;	state Exp;
branches;
next	1.9;
commitid	UkHuAQ62VXpj4efb;

1.9
date	2015.04.28.06.29.45;	author jasper;	state Exp;
branches;
next	1.8;
commitid	gIelqW1oRYd9jCnS;

1.8
date	2015.04.26.19.01.51;	author jasper;	state Exp;
branches;
next	1.7;
commitid	VSza2X6NDeYQRyzV;

1.7
date	2015.03.16.17.55.39;	author jasper;	state Exp;
branches;
next	1.6;
commitid	CfNBTBJO5aQqQvhs;

1.6
date	2015.02.20.07.09.18;	author jasper;	state Exp;
branches
	1.6.2.1;
next	1.5;
commitid	PMswRfW4ynJjdFSm;

1.5
date	2015.02.12.08.26.33;	author jasper;	state Exp;
branches;
next	1.4;
commitid	XSNkk0NzQfkueG8C;

1.4
date	2014.12.18.08.39.32;	author jasper;	state Exp;
branches;
next	1.3;
commitid	WTfHSTuasKRrMUSC;

1.3
date	2014.12.17.15.34.12;	author jasper;	state Exp;
branches;
next	1.2;
commitid	DAsmw1Kj6SZWRzL6;

1.2
date	2014.12.17.08.36.56;	author jasper;	state Exp;
branches;
next	1.1;
commitid	QlaYn9xaYGAVJXFV;

1.1
date	2014.12.15.17.57.33;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	JwOhY5vxP4sUZps0;

1.1.1.1
date	2014.12.15.17.57.33;	author jasper;	state Exp;
branches;
next	;
commitid	JwOhY5vxP4sUZps0;

1.6.2.1
date	2015.06.24.14.11.56;	author jasper;	state Exp;
branches;
next	;
commitid	tg22vYM6d92NJQaj;


desc
@@


1.38
log
@update to elasticsearch-5.2.2

from Pavel Korovin, also tested by sebastia@@
@
text
@# $OpenBSD: Makefile,v 1.36 2017/01/13 08:49:38 jasper Exp $

COMMENT=		distributed RESTful search and analytics

V=			5.2.2
DISTNAME=		elasticsearch-$V
CATEGORIES=		textproc

HOMEPAGE=		https://www.elastic.co/products/elasticsearch

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>

# Apache2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		https://artifacts.elastic.co/downloads/elasticsearch/

MODULES=		java
MODJAVA_VER=		1.8+
MODJAVA_JRERUN=		Yes

RUN_DEPENDS=		java/javaPathHelper \
			shells/bash

NO_BUILD=		Yes
NO_TEST=		Yes

SUBST_VARS +=		V
ES_BASE=		${PREFIX}/elasticsearch/

do-install:
	cd ${WRKSRC}/bin; \
		sed -i 's,#!/bin/bash,#!${LOCALBASE}/bin/bash,' \
		elasticsearch elasticsearch{-plugin,-translog,.in.sh}
	${INSTALL_DATA_DIR} ${ES_BASE}/{bin,lib,modules,plugins}/ \
		${PREFIX}/share/{doc,examples}/elasticsearch/
.for b in elasticsearch elasticsearch-plugin elasticsearch-translog
	${INSTALL_SCRIPT} ${WRKSRC}/bin/$b ${ES_BASE}/bin/
.endfor
	${INSTALL_DATA} ${WRKSRC}/lib/*.jar ${ES_BASE}/lib/
.for c in ${WRKSRC}/config/*.yml ${WRKSRC}/config/*.options ${WRKSRC}/config/*.properties ${WRKSRC}/bin/elasticsearch.in.sh
	${INSTALL_DATA} ${WRKSRC}/$c ${PREFIX}/share/examples/elasticsearch/
.endfor
	cp -R ${WRKSRC}/modules ${ES_BASE}
	${INSTALL_DATA} ${WRKSRC}/README.textile ${PREFIX}/share/doc/elasticsearch/

.include <bsd.port.mk>
@


1.37
log
@update to elasticsearch-5.2.1

ok sebastia@@
@
text
@d5 1
a5 1
V=			5.2.1
@


1.36
log
@update to elasticsearch-5.1.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/12/20 18:49:17 jasper Exp $
d5 1
a5 1
V=			5.1.2
d28 1
@


1.35
log
@missing RDEP on bash; found the hard way by rpointel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/12/17 12:11:02 jasper Exp $
d5 1
a5 1
V=			5.1.1
a6 1
REVISION=		0
@


1.34
log
@- update to elasticsearch-5.1.1

please refer to the changelog [1] and list of breaking changes between 2 and 5 [2]
before upgrading (requires a cluster restart)

1: https://www.elastic.co/blog/elasticsearch-5-1-1-released
2: https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes.html

from Pavel Korovin
additional testing by sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/10/03 09:34:45 giovanni Exp $
d7 1
d23 2
a24 1
RUN_DEPENDS=		java/javaPathHelper
@


1.33
log
@Update to 2.4.1
tested by jasper@@ and Pavel Korovin
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/08/11 10:57:30 jasper Exp $
d5 1
a5 1
V=			2.4.1
d16 1
a16 1
MASTER_SITES=		https://download.elasticsearch.org/elasticsearch/elasticsearch/
a27 1
SUBST_VARS+=		VARBASE V
d30 4
a33 3
	${SUBST_CMD} ${WRKSRC}/config/elasticsearch.yml \
			${WRKSRC}/bin/plugin
	${INSTALL_DATA_DIR} ${ES_BASE}/{bin,lib,modules}/ \
d35 1
a35 1
.for b in elasticsearch plugin
d39 1
a39 1
.for c in ${WRKSRC}/config/*.yml ${WRKSRC}/bin/elasticsearch.in.sh
@


1.32
log
@- update to elasticsearch-2.3.5

from Pavel Korovin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/07/15 11:08:45 jasper Exp $
d5 1
a5 1
V=			2.3.5
@


1.31
log
@update to elasticsearch-2.3.4

https://www.elastic.co/blog/elasticsearch-2-3-4-released:
"The transaction log can be corrupted following a disk full exception and
several attempts to recover the shard. This has been reported once in the wild."

from Pavel Korovin
ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/05/21 10:13:16 jasper Exp $
d5 1
a5 1
V=			2.3.4
@


1.30
log
@update to elasticsearch-2.3.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/04/27 09:02:19 jasper Exp $
d5 1
a5 1
V=			2.3.3
@


1.29
log
@update to elasticsearch-2.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/04/07 10:37:23 jasper Exp $
d5 1
a5 1
V=			2.3.2
@


1.28
log
@update to elasticsearch-2.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/04/01 11:05:18 jasper Exp $
d5 1
a5 1
V=			2.3.1
@


1.27
log
@update to elasticsearch-2.3.0

from Pavel Korovin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/03/16 13:04:35 jasper Exp $
d5 1
a5 1
V=			2.3.0
d16 1
a16 2
MASTER_SITES=		https://distfiles.nl/ \
			https://download.elasticsearch.org/elasticsearch/elasticsearch/
@


1.26
log
@update to elasticsearch-2.2.1

based on an update to 2.2.0 by pavel korovin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/01/18 07:53:21 sebastia Exp $
d5 1
a5 1
V=			2.2.1
@


1.25
log
@update the URL in README where to check the max_file_descriptors in ES.

OK jasper@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/01/16 15:22:08 jasper Exp $
d5 1
a5 2
V=			2.1.1
REVISION =		0
d34 1
a34 1
	${INSTALL_DATA_DIR} ${ES_BASE}/{bin,lib}/ \
d43 1
@


1.24
log
@remove bogus portroach marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/01/16 14:32:38 jasper Exp $
d6 1
@


1.23
log
@- update to elasticsearch-2.1.1

from Pavel Korovin
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.22 2015/11/25 12:56:11 sebastia Exp $

PORTROACH=		site:https://github.com/elastic/elasticsearch
@


1.22
log
@Update to 2.1.0

OK jasper@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/11/24 09:11:06 jasper Exp $
d7 1
a7 1
V=			2.1.0
@


1.21
log
@switch distfiles.nl to SSL, setup with security/letsencrypt/client
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/11/16 19:01:12 jasper Exp $
d7 1
a7 1
V=			2.0.0
@


1.20
log
@- update to elasticsearch-2.0.0

NB: please update your configuration with 'sysmerge -p'; there have been
many changes to the default elasticsearch.yml: e.g. the default configuration
will bind to 127.0.0.1 and will no longer automatically form a cluster.

please refer to https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-upgrade.html
for more information; adding @@ask-update to prevent broken clusters
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/11/11 21:21:04 jasper Exp $
d18 1
a18 1
MASTER_SITES=		http://distfiles.nl/ \
@


1.19
log
@unbreak 'rcctl stop'; otherwise 'rcctl restart' would create a private cluster for you..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/11/10 20:12:44 jasper Exp $
d7 1
a7 2
V=			1.7.3
REVISION=		0
@


1.18
log
@tell portroach to look elsewhere for checking for new versions
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/11/10 20:02:54 jasper Exp $
d8 1
@


1.17
log
@- update to elasticsearch-1.7.3, last release before 2.0.0
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.16 2015/10/09 12:23:24 jasper Exp $
@


1.16
log
@update to elasticsearch-1.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/07/30 07:54:51 jasper Exp $
d5 1
a5 1
V=			1.7.2
@


1.15
log
@- update to elasticsearch-1.7.1
- switch to jdk 1.8

with Pavel Korovin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/07/18 00:59:51 ajacoutot Exp $
d5 2
a6 1
DISTNAME=		elasticsearch-1.7.1
d29 1
a29 1
SUBST_VARS+=		VARBASE
@


1.14
log
@sudo(8) -> su(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/07/15 23:34:49 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		elasticsearch-1.6.0
a6 1
REVISION=		1
d19 1
a19 1
MODJAVA_VER=		1.7+
@


1.13
log
@Tweak pexp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/06/14 09:16:59 jasper Exp $
d7 1
a7 1
REVISION=		0
@


1.12
log
@- update to elasticsearch-1.6.0

from pavel korovin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/06/10 13:19:03 jasper Exp $
d7 1
@


1.11
log
@add paragraph regarding plugins management

from Pavel Korovin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/05/17 09:43:22 jasper Exp $
d5 1
a5 2
DISTNAME=		elasticsearch-1.5.2
REVISION=		0
@


1.10
log
@- update to elasticsearch-1.5.2
- add README regarding openfiles

based on a diff from p@@tristero.se
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/04/28 06:29:45 jasper Exp $
d6 1
@


1.9
log
@naddy@@ reported the distfile cannot be fetched over v6, it just hangs.
so add a v6 capable mirror to the list and use it first
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/04/26 19:01:51 jasper Exp $
d5 1
a5 1
DISTNAME=		elasticsearch-1.5.1
@


1.8
log
@- update to elasticsearch-1.5.1
- add patch from "jiri b" to ensure JAVA_HOME is set for the plugin installer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/03/16 17:55:39 jasper Exp $
d15 2
a16 1
MASTER_SITES=		https://download.elasticsearch.org/elasticsearch/elasticsearch/
@


1.7
log
@switch to new HOMEPAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/02/20 07:09:18 jasper Exp $
d5 1
a5 2
DISTNAME=		elasticsearch-1.4.4
REVISION=		0
d30 2
a31 1
	${SUBST_CMD} ${WRKSRC}/config/elasticsearch.yml
@


1.6
log
@update to elasticsearch-1.4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/02/12 08:26:33 jasper Exp $
d6 1
d9 1
a9 1
HOMEPAGE=		http://www.elasticsearch.org/
@


1.6.2.1
log
@security update to 1.4.5 addressing CVE-2015-3337
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/02/20 07:09:18 jasper Exp $
d5 1
a5 1
DISTNAME=		elasticsearch-1.4.5
@


1.5
log
@security update to elasticsearch-1.4.3, addressing CVE-2015-1427

Note that this disables dynamic script execution for Groovy:
https://www.elasticsearch.org/blog/elasticsearch-1-4-3-and-1-3-8-released/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/12/18 08:39:32 jasper Exp $
d5 1
a5 1
DISTNAME=		elasticsearch-1.4.3
@


1.4
log
@- update to elasticsearch-1.4.2
* http://www.elasticsearch.org/downloads/1-4-2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/12/17 15:34:12 jasper Exp $
d5 1
a5 1
DISTNAME=		elasticsearch-1.4.2
@


1.3
log
@keep the original name for the 'plugin' script, there's no need to rename it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/12/17 08:36:56 jasper Exp $
d5 1
a5 2
DISTNAME=		elasticsearch-1.4.1
REVISION=		1
@


1.2
log
@take maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/12/15 17:57:33 jasper Exp $
d6 1
a6 1
REVISION=		0
d34 3
a36 2
	${INSTALL_SCRIPT} ${WRKSRC}/bin/elasticsearch ${ES_BASE}/bin/
	${INSTALL_SCRIPT} ${WRKSRC}/bin/plugin ${ES_BASE}/bin/elasticsearch-plugin
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d10 2
@


1.1.1.1
log
@import elasticsearch-1.4.1

Elasticsearch is a flexible and powerful open source, distributed,
real-time search and analytics engine. Architected from the ground up
for use in distributed environments where reliability and scalability
are must haves, Elasticsearch gives you the ability to move easily
beyond simple full-text search. Through its robust set of APIs and query
DSLs, plus clients for the most popular programming languages,
Elasticsearch delivers on the near limitless promises of search
technology.

ok aja@@
@
text
@@
