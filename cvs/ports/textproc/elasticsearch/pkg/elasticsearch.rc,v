head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.2
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	jasper_20141512:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@ * @;


1.5
date	2016.12.17.12.11.02;	author jasper;	state Exp;
branches;
next	1.4;
commitid	szHCWtBQfQHvZfI1;

1.4
date	2015.11.16.19.01.12;	author jasper;	state Exp;
branches;
next	1.3;
commitid	YOAzCfNjrxP86rVH;

1.3
date	2015.11.11.21.21.04;	author jasper;	state Exp;
branches;
next	1.2;
commitid	H1jYTc8HQ7Tg69Qk;

1.2
date	2015.07.15.23.34.49;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	d9vjtDOpS0FMv46j;

1.1
date	2014.12.15.17.57.33;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	JwOhY5vxP4sUZps0;

1.1.1.1
date	2014.12.15.17.57.33;	author jasper;	state Exp;
branches;
next	;
commitid	JwOhY5vxP4sUZps0;


desc
@@


1.5
log
@- update to elasticsearch-5.1.1

please refer to the changelog [1] and list of breaking changes between 2 and 5 [2]
before upgrading (requires a cluster restart)

1: https://www.elastic.co/blog/elasticsearch-5-1-1-released
2: https://www.elastic.co/guide/en/elasticsearch/reference/current/breaking-changes.html

from Pavel Korovin
additional testing by sebastia@@
@
text
@#!/bin/sh
#
# $OpenBSD: elasticsearch.rc,v 1.4 2015/11/16 19:01:12 jasper Exp $

daemon="${TRUEPREFIX}/elasticsearch/bin/elasticsearch"
daemon_flags="-d -Edefault.path.conf=${SYSCONFDIR}/elasticsearch -p /var/run/elasticsearch/elasticsearch.pid"
daemon_user="_elasticsearch"

. /etc/rc.d/rc.subr

pexp="$(${LOCALBASE}/bin/javaPathHelper -c elasticsearch) .*org.elasticsearch.bootstrap.Elasticsearch.*"

rc_reload=NO

rc_start() {
	${rcexec} \
		"ES_INCLUDE=\"${SYSCONFDIR}/elasticsearch/elasticsearch.in.sh\" \
                "CONF_DIR=\"${SYSCONFDIR}/elasticsearch\"" \
		JAVA_HOME=\"$(${LOCALBASE}/bin/javaPathHelper -h elasticsearch)\" \
		${daemon} ${daemon_flags}"
}

rc_pre() {
	install -d -o _elasticsearch /var/run/elasticsearch/
}

rc_cmd $1
@


1.4
log
@- update to elasticsearch-2.0.0

NB: please update your configuration with 'sysmerge -p'; there have been
many changes to the default elasticsearch.yml: e.g. the default configuration
will bind to 127.0.0.1 and will no longer automatically form a cluster.

please refer to https://www.elastic.co/guide/en/elasticsearch/reference/current/setup-upgrade.html
for more information; adding @@ask-update to prevent broken clusters
@
text
@d3 1
a3 1
# $OpenBSD: elasticsearch.rc,v 1.3 2015/11/11 21:21:04 jasper Exp $
d6 1
a6 1
daemon_flags="-d -Des.default.path.conf=${SYSCONFDIR}/elasticsearch -p /var/run/elasticsearch/elasticsearch.pid"
@


1.3
log
@unbreak 'rcctl stop'; otherwise 'rcctl restart' would create a private cluster for you..
@
text
@d3 1
a3 1
# $OpenBSD: elasticsearch.rc,v 1.2 2015/07/15 23:34:49 ajacoutot Exp $
d6 1
a6 1
daemon_flags="-d -Des.config=${SYSCONFDIR}/elasticsearch/elasticsearch.yml -p /var/run/elasticsearch/elasticsearch.pid"
d18 1
@


1.2
log
@Tweak pexp.
@
text
@d3 1
a3 1
# $OpenBSD: elasticsearch.rc,v 1.1.1.1 2014/12/15 17:57:33 jasper Exp $
d11 1
a11 1
pexp="$(${LOCALBASE}/bin/javaPathHelper -c elasticsearch) .*org.elasticsearch.bootstrap.Elasticsearch"
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
# $OpenBSD$
d11 1
a11 1
pexp="$(${LOCALBASE}/bin/javaPathHelper -c elasticsearch).*org.elasticsearch.bootstrap.Elasticsearch"
@


1.1.1.1
log
@import elasticsearch-1.4.1

Elasticsearch is a flexible and powerful open source, distributed,
real-time search and analytics engine. Architected from the ground up
for use in distributed environments where reliability and scalability
are must haves, Elasticsearch gives you the ability to move easily
beyond simple full-text search. Through its robust set of APIs and query
DSLs, plus clients for the most popular programming languages,
Elasticsearch delivers on the near limitless promises of search
technology.

ok aja@@
@
text
@@
