head	1.8;
access;
symbols
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.6.0.4
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.5.0.2
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.2
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2;
locks; strict;
comment	@# @;


1.8
date	2003.06.13.21.51.09;	author marcm;	state dead;
branches;
next	1.7;

1.7
date	2002.12.02.12.23.47;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2001.11.06.08.40.54;	author kevlo;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.05.21.55.50;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2001.08.18.03.46.15;	author kevlo;	state Exp;
branches;
next	1.3;

1.3
date	2001.02.19.02.38.45;	author kevlo;	state Exp;
branches;
next	1.2;

1.2
date	2001.02.05.00.27.51;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.08.18.55.01;	author brad;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Update to 2.5.7.

In addition to updating, this restores the libxml includes to
${LOCALBASE}/include/libxml2, thereby avoiding odd conflicts in other
ports.

It also creates and uses an xml catalog at /var/db/xmlcatalog that can
be updated by other ports with local dtds.

ok naddy@@ jolan@@
@
text
@--- ltmain.sh.orig	Fri Nov 22 16:36:27 2002
+++ ltmain.sh	Mon Dec  2 11:36:14 2002
@@@@ -1046,15 +1046,18 @@@@ compiler."
 	;;
 
       -l*)
-	if test "X$arg" = "X-lc" || test "X$arg" = "X-lm"; then
-	  case $host in
-	  *-*-cygwin* | *-*-pw32* | *-*-beos*)
-	    # These systems don't actually have a C or math library (as such)
+	if test "$arg" = "-lc"; then
+	  case "$host" in
+	  *-*-openbsd*)
+	    # Do not include libc due to us having libc/libc_r.
 	    continue
 	    ;;
-	  *-*-mingw* | *-*-os2*)
-	    # These systems don't actually have a C library (as such)
-	    test "X$arg" = "X-lc" && continue
+          esac
+	elif test "$arg" = "-lc_r"; then
+	  case "$host" in
+	  *-*-openbsd*)
+	    # Do not include libc_r directly, use -pthread flag.
+	    continue
 	    ;;
 	  *-*-openbsd*)
 	    # Do not include libc due to us having libc/libc_r.
@@@@ -1073,6 +1076,17 @@@@ compiler."
 	continue
 	;;
 
+      -pthread)
+	case $host in
+	*-*-openbsd*)
+	  deplibs="$deplibs $arg"
+	  ;;
+	*)
+	  continue
+	  ;;
+	esac
+	;;
+
       -module)
 	module=yes
 	continue
@@@@ -2496,6 +2510,9 @@@@ compiler."
 	    # Rhapsody C library is in the System framework
 	    deplibs="$deplibs -framework System"
 	    ;;
+          *-*-openbsd*)
+	    # Do not include libc due to us having libc/libc_r.
+	    ;;
 	  *-*-netbsd*)
 	    # Don't link with libc until the a.out ld.so is fixed.
 	    ;;
@@@@ -4526,40 +4543,6 @@@@ relink_command=\"$relink_command\""
     # Exit here if they wanted silent mode.
     test "$show" = : && exit 0
 
-    echo "----------------------------------------------------------------------"
-    echo "Libraries have been installed in:"
-    for libdir in $libdirs; do
-      echo "   $libdir"
-    done
-    echo
-    echo "If you ever happen to want to link against installed libraries"
-    echo "in a given directory, LIBDIR, you must either use libtool, and"
-    echo "specify the full pathname of the library, or use the \`-LLIBDIR'"
-    echo "flag during linking and do at least one of the following:"
-    if test -n "$shlibpath_var"; then
-      echo "   - add LIBDIR to the \`$shlibpath_var' environment variable"
-      echo "     during execution"
-    fi
-    if test -n "$runpath_var"; then
-      echo "   - add LIBDIR to the \`$runpath_var' environment variable"
-      echo "     during linking"
-    fi
-    if test -n "$hardcode_libdir_flag_spec"; then
-      libdir=LIBDIR
-      eval flag=\"$hardcode_libdir_flag_spec\"
-
-      echo "   - use the \`$flag' linker flag"
-    fi
-    if test -n "$admincmds"; then
-      echo "   - have your system administrator run these commands:$admincmds"
-    fi
-    if test -f /etc/ld.so.conf; then
-      echo "   - have your system administrator add LIBDIR to \`/etc/ld.so.conf'"
-    fi
-    echo
-    echo "See any operating system documentation about shared libraries for"
-    echo "more information, such as the ld(1) and ld.so(8) manual pages."
-    echo "----------------------------------------------------------------------"
     exit 0
     ;;
 
@


1.7
log
@2.4.28, crucial patch added...
@
text
@@


1.6
log
@- upgrade to version 2.4.8
- add BUILD_DEPENDS and RUN_DEPENDS for pkgconfig
- bump NEED_VERSION
@
text
@d1 3
a3 3
--- ltmain.sh.orig	Sun Nov  4 20:24:01 2001
+++ ltmain.sh	Tue Nov  6 12:41:48 2001
@@@@ -1021,15 +1021,18 @@@@
d27 3
a29 3
 	  esac
 	fi
@@@@ -1037,6 +1040,17 @@@@
d47 1
a47 1
@@@@ -2405,6 +2419,9 @@@@
d57 1
a57 1
@@@@ -4412,40 +4429,6 @@@@
d59 1
a59 1
     test "$show" = ":" && exit 0
@


1.5
log
@this port uses libtool 1.4 as well.
@
text
@d1 12
a12 6
--- ltmain.sh.orig	Thu Aug 23 19:24:25 2001
+++ ltmain.sh	Wed Sep  5 15:11:27 2001
@@@@ -1031,12 +1031,28 @@@@ compiler."
 	    # These systems don't actually have a C library (as such)
 	    test "X$arg" = "X-lc" && continue
 	    ;;
d15 8
a22 6
+	    test "X$arg" = "X-lc" && continue
+	    ;;
+	  esac
+	fi
+	if test "X$arg" = "X-lc_r"; then
+	  case $host in
d26 1
a26 1
+	    ;;
d29 1
a29 1
 	deplibs="$deplibs $arg"
d33 9
a41 2
+      -?thread)
+	deplibs="$deplibs $arg"
d47 3
a49 3
@@@@ -2401,6 +2417,9 @@@@ compiler."
 	  *-*-cygwin* | *-*-mingw* | *-*-pw32* | *-*-os2* | *-*-beos*)
 	    # these systems don't actually have a c library (as such)!
d51 1
a51 1
+	  *-*-openbsd*)
d54 4
a57 4
 	  *-*-rhapsody* | *-*-darwin1.[012])
 	    # Rhapsody C library is in the System framework
 	    deplibs="$deplibs -framework System"
@@@@ -4412,40 +4431,6 @@@@ relink_command=\"$relink_command\""
@


1.4
log
@upgrade to version 2.4.2
@
text
@d1 21
a21 3
--- ltmain.sh.orig	Fri Aug 17 21:15:18 2001
+++ ltmain.sh	Fri Aug 17 21:20:01 2001
@@@@ -1037,6 +1037,10 @@@@
d32 1
a32 1
@@@@ -2401,6 +2405,9 @@@@
d42 1
a42 1
@@@@ -4412,40 +4419,6 @@@@
@


1.3
log
@sync libtool patches
@
text
@d1 4
a4 22
--- ltmain.sh.orig	Fri Jan  5 07:13:13 2001
+++ ltmain.sh	Mon Feb 19 10:30:34 2001
@@@@ -1079,6 +1079,17 @@@@
 	    # These systems don't actually have c library (as such)
 	    continue
 	    ;;
+          *-*-openbsd*)
+	    # Do not include libc due to us having libc/libc_r.
+	    continue
+            ;;
+          esac
+        elif test "$arg" = "-lc_r"; then
+	  case "$host" in
+	  *-*-openbsd*) 
+            # Do not include libc_r directly, use -pthread flag. 
+	    continue
+	    ;;
 	  esac
 	elif test "$arg" = "-lm"; then
 	  case "$host" in
@@@@ -1091,6 +1102,10 @@@@
 	deplibs="$deplibs $arg"
d8 2
a9 2
+       deplibs="$deplibs $arg"
+       ;;
d14 11
a24 11
@@@@ -1795,6 +1810,9 @@@@
 	*-*-cygwin* | *-*-mingw* | *-*-os2* | *-*-beos*)
 	  # these systems don't actually have a c library (as such)!
 	  ;;
+        *-*-openbsd*) 
+	  # Do not include libc due to us having libc/libc_r.
+	  ;;
 	*)
 	  # Add libc to deplibs on all other systems.
 	  deplibs="$deplibs -lc"
@@@@ -3555,40 +3573,6 @@@@
d26 1
a26 1
     test "$show" = : && exit 0
d36 1
a36 1
-    echo "specify the full pathname of the library, or use \`-LLIBDIR'"
@


1.2
log
@sync libtool patches
@
text
@d1 32
a32 3
--- ltmain.sh.orig	Fri Jan  5 02:13:13 2001
+++ ltmain.sh	Sun Feb  4 19:25:57 2001
@@@@ -1795,6 +1795,9 @@@@
d36 2
a37 2
+	*-*-openbsd*)
+	  # do not include libc due to us having libc/libc_r.
d42 1
a42 1
@@@@ -3555,40 +3558,6 @@@@
@


1.1
log
@upgrade to libxml 2.2.1

NOTE: libxml 2.x is not source compatible with programs that use libxml
1.x but we don't have GNOME or anything for that matter that depends
on libxml then it isn't that big of a deal.
@
text
@d1 13
a13 12
--- ltmain.sh.orig	Wed Jul 26 18:45:21 2000
+++ ltmain.sh	Wed Jul 26 18:45:34 2000
@@@@ -2619,7 +2619,7 @@@@
 	  # linked before any other PIC object.  But we must not use
 	  # pic_flag when linking with -static.  The problem exists in
 	  # FreeBSD 2.2.6 and is fixed in FreeBSD 3.1.
-	  *-*-freebsd2*|*-*-freebsd3.0*|*-*-freebsdelf3.0*)
+	  *-*-freebsd2*|*-*-freebsd3.0*|*-*-freebsdelf3.0*)
 	    case "$compile_command " in
 	    *" -static "*) ;;
 	    *) pic_flag_for_symtable=" $pic_flag -DPIC -DFREEBSD_WORKAROUND";;
@@@@ -3555,40 +3555,6 @@@@
@

