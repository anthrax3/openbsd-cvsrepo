head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2017.06.03.09.40.42;	author pirofti;	state Exp;
branches
	1.1.2.1;
next	;
commitid	A6NZrwGvL1iFi1PY;

1.1.2.1
date	2017.06.03.10.49.07;	author pirofti;	state Exp;
branches;
next	;
commitid	afoZeycaVM1iq8sU;


desc
@@


1.1
log
@Security update for textproc/libxml

Patches for CVE-2017-9047, CVE-2017-9048, CVE-2017-9049, CVE-2017-9050.
From Matthias Pitzl, thanks!

OK ajacoutot
@
text
@$OpenBSD$

Fix CVE-2017-9047 and CVE-2017-9048.

Index: valid.c
--- valid.c.orig
+++ valid.c
@@@@ -1270,6 +1270,7 @@@@ xmlSnprintfElementContent(char *buf, int size, xmlElem
 		}
 		strcat(buf, (char *) content->prefix);
 		strcat(buf, ":");
+		len += xmlStrlen(content->prefix);
 	    }
 	    if (size - len < xmlStrlen(content->name) + 10) {
 		strcat(buf, " ...");
@@@@ -1319,6 +1320,7 @@@@ xmlSnprintfElementContent(char *buf, int size, xmlElem
 		xmlSnprintfElementContent(buf, size, content->c2, 0);
 	    break;
     }
+    if (size - strlen(buf) <= 2) return;
     if (englob)
         strcat(buf, ")");
     switch (content->ocur) {
@


1.1.2.1
log
@Backport recent textproc/libxml security fixes.

Patches CVE-2017-9047, CVE-2017-9048, CVE-2017-9049 and CVE-2017-9050.
From Matthias Pitzl, thanks!

OK ajacoutot@@
@
text
@@

