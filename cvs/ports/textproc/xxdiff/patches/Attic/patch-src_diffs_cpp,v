head	1.4;
access;
symbols
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	wilfried_20010320:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2002.04.09.15.43.40;	author naddy;	state dead;
branches;
next	1.3;

1.3
date	2001.06.20.19.31.00;	author lebel;	state Exp;
branches;
next	1.2;

1.2
date	2001.05.25.17.02.03;	author lebel;	state Exp;
branches;
next	1.1;

1.1
date	2001.03.20.14.29.32;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.03.20.14.29.32;	author wilfried;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Unbreak by updating to 2.4 which uses tmake to configure.
In part from maintainer Dan Weeks <danimal@@danimal.org>.
@
text
@--- src/diffs.cpp.orig	Wed Jun 20 14:41:57 2001
+++ src/diffs.cpp	Wed Jun 20 14:47:37 2001
@@@@ -79,16 +79,16 @@@@ std::string buildTag( 
 {
    char buf[ 1024 ];
    char buf2[ 1024 ];
-   ::strncpy( buf, tag, sizeof(buf) );
+   ::strlcpy( buf, tag, sizeof(buf) );
    
    // FIXME this could lead to a bug.
 
    if ( useNumber ) {
-      ::strncpy( buf2, buf, sizeof(buf2) );
+      ::strlcpy( buf2, buf, sizeof(buf2) );
       ::snprintf( buf, sizeof(buf), buf2, number );
    }
    if ( useString ) {
-      ::strncpy( buf2, buf, sizeof(buf2) );
+      ::strlcpy( buf2, buf, sizeof(buf2) );
       if ( useConditionals ) {
          if ( nbFiles == 3 && ( number == 1 || number == 2 ) ) {
             ::snprintf( buf, sizeof(buf), buf2, conditional2.c_str() );
@


1.3
log
@update textproc/xxdiff to 1.12;  from maintainer
@
text
@@


1.2
log
@update textproc/xxdiff to 1.10.0.  Submitted by maintainer.
@
text
@d1 3
a3 8
$OpenBSD: patch-src_diffs_cpp,v 1.1.1.1 2001/03/20 14:29:32 wilfried Exp $

fixes multiple strcpy and sprintf instances to potentially
prevent buffer overruns

--- src/diffs.cpp.orig	Thu May 24 00:40:20 2001
+++ src/diffs.cpp	Thu May 24 14:38:50 2001
@@@@ -76,26 +76,26 @@@@ std::string buildTag( 
d7 1
a7 1
-   ::strcpy( buf, tag );
d13 3
a15 4
-      ::strcpy( buf2, buf );
-      ::sprintf( buf, buf2, number );
+      ::strlcpy( buf2, buf, sizeof(buf2));
+      ::snprintf( buf, sizeof(buf), buf2, number );
d18 1
a18 1
-      ::strcpy( buf2, buf );
d22 1
a22 23
-            ::sprintf( buf, buf2, conditional2.c_str() );
+            ::snprintf( buf, sizeof(buf), buf2, conditional2.c_str() );
          }
          else {
-            ::sprintf( buf, buf2, conditional1.c_str() );
+            ::snprintf( buf, sizeof(buf), buf2, conditional1.c_str() );
          }
       }
       else {
-         ::sprintf( buf, buf2, file->getDisplayName() );
+         ::snprintf( buf, sizeof(buf), buf2, file->getDisplayName() );
       }
    }
 
@@@@ -727,7 +727,7 @@@@ bool XxDiffs::save( 
       std::string::size_type pos = tags[ii].find( "%d" );
       if ( pos != std::string::npos ) {
          char buf[12];
-         ::sprintf( buf, "%d", ii+1 );
+         ::snprintf( buf, sizeof(buf), "%d", ii+1 );
          tags[ii].replace( pos, 2, buf );
       }
 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: $
d6 3
a8 4

--- xxdiff/src/diffs.cpp.orig	Thu Mar 15 11:57:11 2001
+++ xxdiff/src/diffs.cpp	Thu Mar 15 13:20:06 2001
@@@@ -77,26 +77,26 @@@@ std::string buildTag( 
@


1.1.1.1
log
@Initial import of xxdiff-1.9.1
graphical file comparator and merge tool

Submitted by:  Dan Weeks <danimal@@danimal.org>
@
text
@@
