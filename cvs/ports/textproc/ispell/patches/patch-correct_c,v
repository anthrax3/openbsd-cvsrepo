head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.2
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.1.0.20
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.18
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.14
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.16
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.12
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2017.06.03.12.46.37;	author sthen;	state Exp;
branches;
next	1.1;
commitid	eIOVk2yovrNMh5oy;

1.1
date	2012.03.17.17.19.59;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to ispell-3.4.00 and patch to fix some implicit declarations, done
while investigating a crash (bogus free) reported by Bryan Linton when running
"DICTIONARY=/usr/local/lib/ispell/american.hash ispell" (but it doesn't fix this)
@
text
@$OpenBSD: patch-correct_c,v 1.1 2012/03/17 17:19:59 naddy Exp $
Index: correct.c
--- correct.c.orig
+++ correct.c
@@@@ -203,6 +203,9 @@@@ static char Rcs_Id[] =
  *
  */
 
+#include <sys/types.h>
+#include <sys/stat.h>
+#include <fcntl.h>
 #include <ctype.h>
 #include "config.h"
 #include "ispell.h"
@


1.1
log
@getline -> get_line
@
text
@d1 7
a7 13
$OpenBSD$
--- correct.c.orig	Sat Mar 17 11:14:03 2012
+++ correct.c	Sat Mar 17 11:14:41 2012
@@@@ -231,7 +231,7 @@@@ static void	save_root_cap P ((ichar_t * word, ichar_t 
 		  struct flagent * sufent,
 		  ichar_t savearea[MAX_CAPS][INPUTWORDLEN + MAXAFFIXLEN],
 		  int * nsaved));
-static char *	getline P ((char * buf));
+static char *	get_line P ((char * buf));
 void		askmode P ((void));
 void		copyout P ((unsigned char ** cc, int cnt));
 static void	lookharder P ((unsigned char * string));
@@@@ -546,7 +546,7 @@@@ checkagain:
d9 6
a14 34
 		move (li - 1, 0);
 		(void) putchar ('!');
-		if (getline ((char *) buf) == NULL)
+		if (get_line ((char *) buf) == NULL)
 		    {
 		    (void) putchar (7);
 		    erase ();
@@@@ -571,7 +571,7 @@@@ checkagain:
 		    (void) printf ("%s ", CORR_C_READONLY);
 		    }
 		(void) printf (CORR_C_REPLACE_WITH);
-		if (getline ((char *) ctok) == NULL)
+		if (get_line ((char *) ctok) == NULL)
 		    {
 		    (void) putchar (7);
 		    /* Put it back */
@@@@ -639,7 +639,7 @@@@ checkagain:
 		unsigned char	buf[100];
 		move (li - 1, 0);
 		(void) printf (CORR_C_LOOKUP_PROMPT);
-		if (getline ((char *) buf) == NULL)
+		if (get_line ((char *) buf) == NULL)
 		    {
 		    (void) putchar (7);
 		    erase ();
@@@@ -1477,7 +1477,7 @@@@ static void save_root_cap (word, pattern, prestrip, pr
     return;
     }
 
-static char * getline (s)
+static char * get_line (s)
     register char *	s;
     {
     register char *	p;
@

