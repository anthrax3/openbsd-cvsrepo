head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.16
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.12
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.14
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.10
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.8
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.6
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.12
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.10
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.8
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4;
locks; strict;
comment	@# @;


1.6
date	2012.09.21.13.17.45;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2012.01.17.10.59.27;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.13.17.07.27;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.01.19.19.29;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.31.09.33.41;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.28.16.51.17;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.6
log
@- remove -lpthread related patches/chunks.
@
text
@$OpenBSD: patch-configure,v 1.5 2012/01/17 10:59:27 ajacoutot Exp $
--- configure.orig	Mon Jul  4 10:58:50 2011
+++ configure	Tue Jan 17 10:55:18 2012
@@@@ -2645,7 +2645,7 @@@@ fi
 
 if test "$pkgdatadir" = "undef"
 then
-  pkgdatadir=\${libdir}/aspell-0.60
+  pkgdatadir=\${libdir}/aspell
 fi
 
 
@@@@ -20216,10 +20123,10 @@@@ XGETTEXT!$XGETTEXT$ac_delim
 XGETTEXT_015!$XGETTEXT_015$ac_delim
 MSGMERGE!$MSGMERGE$ac_delim
 INTL_MACOSX_LIBS!$INTL_MACOSX_LIBS$ac_delim
-LIBICONV!$LIBICONV$ac_delim
+LIBICONV!$LTLIBICONV$ac_delim
 LTLIBICONV!$LTLIBICONV$ac_delim
-INTLLIBS!$INTLLIBS$ac_delim
-LIBINTL!$LIBINTL$ac_delim
+INTLLIBS!$LTLIBINTL$ac_delim
+LIBINTL!$LTLIBINTL$ac_delim
 LTLIBINTL!$LTLIBINTL$ac_delim
 POSUB!$POSUB$ac_delim
 PTHREAD_LIB!$PTHREAD_LIB$ac_delim
@


1.5
log
@Update to aspell-0.60.6.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.4 2008/11/13 17:07:27 ajacoutot Exp $
a12 101
@@@@ -17958,100 +17958,7 @@@@ _ACEOF
   fi
 
 
-# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
-#                                                                 #
-#                   Posix lock function tests                     #
-#                                                                 #
-# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 
-
-
-{ echo "$as_me:$LINENO: checking if posix mutexes are supported" >&5
-echo $ECHO_N "checking if posix mutexes are supported... $ECHO_C" >&6; }
-
-ORIG_LIBS="$LIBS"
-
-for l in '' '-lpthread'
-do
-  if test -z "$use_posix_mutex"
-  then
-    LIBS="$l $ORIG_LIBS"
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <pthread.h>
-int
-main ()
-{
-pthread_mutex_t lck;
-       pthread_mutex_init(&lck, 0);
-       pthread_mutex_lock(&lck);
-       pthread_mutex_unlock(&lck);
-       pthread_mutex_destroy(&lck);
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  PTHREAD_LIB=$l
-       use_posix_mutex=1
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
-  fi
-done
-
-LIBS="$ORIG_LIBS"
-
-if test "$use_posix_mutex"
-then
-  if test -z "$PTHREAD_LIB"
-  then
-    { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
-  else
-    { echo "$as_me:$LINENO: result: yes (in $PTHREAD_LIB)" >&5
-echo "${ECHO_T}yes (in $PTHREAD_LIB)" >&6; }
-  fi
-
-cat >>confdefs.h <<\_ACEOF
-#define USE_POSIX_MUTEX 1
-_ACEOF
-
-else
-  { echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
-  { echo "$as_me:$LINENO: WARNING: Unable to find locking mechanism, Aspell will not be thread safe." >&5
-echo "$as_me: WARNING: Unable to find locking mechanism, Aspell will not be thread safe." >&2;}
-fi
-
-
 # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
 #                                                                 #
 #                     Terminal function tests                     #
@


1.4
log
@- disable threading; by default it will link with -lpthread which is
wrong; linking with -pthread will not get recorded and induce other
issues while non-threaded apps won't be able to use libaspell at all
- fix post-build target to make sure the aspell "en" dictionnary building
process can find all required libs
- add CPPFLAGS and LDFLAGS to CONFIGURE_ENV to that libaspell.la is created
with correct ddependency_libs
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.3 2008/11/01 19:19:29 ajacoutot Exp $
--- configure.orig	Mon Apr  7 06:31:31 2008
+++ configure	Thu Nov 13 17:42:24 2008
d13 1
a13 1
@@@@ -17899,100 +17899,7 @@@@ _ACEOF
d114 1
a114 1
@@@@ -20127,10 +20034,10 @@@@ XGETTEXT!$XGETTEXT$ac_delim
@


1.3
log
@- revert previous s/pthread/lpthread and keep linking with -lpthread for
now until I have time to fix the breakage induced on dependent ports

issue reported by matthieu@@ and Aaron Stellman
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.2 2008/10/31 09:33:41 ajacoutot Exp $
d3 1
a3 1
+++ configure	Fri Oct 31 10:33:20 2008
d13 102
a114 1
@@@@ -20127,10 +20127,10 @@@@ XGETTEXT!$XGETTEXT$ac_delim
@


1.2
log
@- s/lpthread/pthread
- correct the way it links with iconv+intl
- bump
@
text
@d1 1
a1 1
$OpenBSD$
a12 9
@@@@ -17912,7 +17912,7 @@@@ echo $ECHO_N "checking if posix mutexes are supported.
 
 ORIG_LIBS="$LIBS"
 
-for l in '' '-lpthread'
+for l in '' '-pthread'
 do
   if test -z "$use_posix_mutex"
   then
@


1.1
log
@- update aspell to 0.60.6
- bumped major to be on the safe side
- update homepage
- be more precise about license version
- tweak DESCR

joint work with and ok ajacoutot@@, thanks!
@
text
@d2 2
a3 3

--- configure.orig	Mon Oct 27 11:55:37 2008
+++ configure	Mon Oct 27 11:55:39 2008
d13 1
a13 7
@@@@ -2666,7 +2666,7 @@@@ fi
 
 if test "$pkglibdir" = "undef"
 then
-  pkglibdir=\${libdir}/aspell-0.60
+  pkglibdir=\${libdir}/aspell
 fi
d15 1
d17 19
@

