head	1.2;
access;
symbols
	OPENBSD_2_6:1.1.0.6
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.4
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2000.04.21.23.42.11;	author espie;	state dead;
branches;
next	1.1;

1.1
date	98.04.28.01.10.17;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Repair, fake.
@
text
@*** doctype/usmarc.cxx.orig	Mon Apr 27 21:02:09 1998
--- doctype/usmarc.cxx	Mon Apr 27 21:04:23 1998
***************
*** 453,463 ****
     // "Sutrs" is the Z39.50-compliant way to say "ASCII".
     
  
!    CHR *TempFile = tmpnam(NULL);
     if((fp = fopen(TempFile, "w")) == NULL) {
  	perror(TempFile);
  	exit(1);
  	}
  
     MARC *m;
     m = new MARC(myBuff);
--- 453,471 ----
     // "Sutrs" is the Z39.50-compliant way to say "ASCII".
     
  
!    CHR TempFile[30];
!    sprintf(TempFile, "%s/usm.XXXXXXXXXX", P_tmpdir);
! 
!    if ((fp = fdopen(mkstemp(TempFile), "w")) == NULL) {
! 	perror(TempFile);
!         exit(1);
!    }
! #if 0
     if((fp = fopen(TempFile, "w")) == NULL) {
  	perror(TempFile);
  	exit(1);
  	}
+ #endif
  
     MARC *m;
     m = new MARC(myBuff);
@


1.1
log
@tmpnam->mkstemp
@
text
@@

