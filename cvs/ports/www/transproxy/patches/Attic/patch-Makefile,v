head	1.4;
access;
symbols
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.38
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.36
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.34
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.32
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.30
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.28
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.26
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.24
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.22
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.20
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.18
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.16
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.14
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.12
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.10
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.8
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.6
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.4
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.0.6
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.4
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2011.09.10.06.16.51;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2011.03.07.07.25.40;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2001.12.06.07.28.11;	author jasoni;	state Exp;
branches;
next	1.1;

1.1
date	2000.10.05.21.48.41;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Remove tansproxy. It's not needed anymore (PF "route-to" works perfect
for that purpose).

ok sthen@@
@
text
@$OpenBSD: patch-Makefile,v 1.3 2011/03/07 07:25:40 ajacoutot Exp $
--- Makefile.orig	Wed Mar 31 14:19:34 2004
+++ Makefile	Mon Mar  7 07:39:57 2011
@@@@ -47,8 +47,11 @@@@ OPTIONS += -DLOG_TO_FILE_LINEBUFF
 # BSD IPFILTER mechanism for fetching intended destination address.
 #OPTIONS += -DIPFILTER
 
+# OpenBSD PF mechanism for fetching intended destination address.
+OPTIONS += -DOPENBSD_PF
+
 # linux-2.4 iptables mechanism for fetching intended destination address.
-OPTIONS += -DIPTABLES
+#OPTIONS += -DIPTABLES
 
 # Double fork to make init(8) handle zombie processes. Some Unix variants
 # simply don't let you ignore the death of child processes easily.
@@@@ -56,15 +59,15 @@@@ OPTIONS += -DIPTABLES
 
 # Define these to enable tcp_wrappers. You can use the built-in ACLs
 # instead though.
-#OPTIONS += -DTCP_WRAPPERS
-#LIBS    += -lwrap
+OPTIONS += -DTCP_WRAPPERS
+LIBS    += -lwrap
 
 # You may need one or both of these to get a clean compile.
 #OPTIONS += -DHAVE_PATHS_H
 #OPTIONS += -DHAVE_GETOPT_H
 
 # You may need to touch PREFIX, CC and CFLAGS.
-PREFIX = /usr/local
+PREFIX ?= /usr/local
 INSTALL_PROGRAM = install -c -m 555 -o bin -g bin
 INSTALL_MAN = install -c -m 444 -o bin -g bin
 
@@@@ -72,8 +75,8 @@@@ INSTALL_MAN = install -c -m 444 -o bin -g bin
 RM      = rm -f
 
 # Should be OK for GNU gcc.
-CC      = gcc
-CFLAGS  = -O2 -Wall
+CC      ?= gcc
+CFLAGS  ?= -O2 -Wall
 LDFLAGS = -s
 
 # For using BIND resolver instead of system resolver.
@


1.3
log
@Long overdue update to transproxy-1.6 (fixes a problem with posting
large amount of data amongst other things).

Add an rc.d(8) script.
Add a _tproxy user/group and make tproxy runs as this user by default.
Remove jakob@@ from maintainer per his request.

While here, do some cleanings:
* clean-up indent
* don't overwrite CC, CFLAGS and PREFIX
* fix patch naming
* fix a wording in DESCR
* comment tproxyrun and tproxywatch, they are useless under OpenBSD
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@- add support for the new packet filter
- mark unbroken
- md5 -> distinfo
ok jakob@@
@
text
@d1 4
a4 3
--- Makefile.orig	Thu Aug 17 23:35:46 2000
+++ Makefile	Fri Nov 30 13:24:09 2001
@@@@ -46,6 +46,9 @@@@ OPTIONS += -DLOG_TO_FILE_LINEBUFF
d12 2
a13 1
 #OPTIONS += -DIPTABLES
d15 3
a17 2
@@@@ -53,8 +56,8 @@@@ OPTIONS += -DLOG_TO_FILE_LINEBUFF
 #OPTIONS += -DDO_DOUBLE_FORK
d19 2
a20 1
 # Define these to enable tcp_wrappers. You can use the built-in ACLs instead though.
d28 19
@


1.1
log
@rework patches
@
text
@d1 3
a3 5
--- Makefile.orig	Fri Aug 18 08:35:46 2000
+++ Makefile	Tue Oct  3 09:37:23 2000
@@@@ -44,7 +44,7 @@@@
 OPTIONS += -DLOG_TO_FILE_LINEBUFF
 
d5 1
a5 2
-#OPTIONS += -DIPFILTER
+OPTIONS += -DIPFILTER
d7 3
d12 2
a13 1
@@@@ -53,8 +53,8 @@@@
@

