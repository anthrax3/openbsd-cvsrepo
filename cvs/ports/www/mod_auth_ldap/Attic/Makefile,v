head	1.21;
access;
symbols
	OPENBSD_5_9:1.20.0.6
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.20.0.8
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.20.0.4
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.20.0.2
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.19.0.4
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.18.0.6
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.18.0.4
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.16.0.4
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.13.0.4
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.10.0.6
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.5.0.8
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.6
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.4
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.3.0.6
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.4
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3
	henning_20030505:1.1.1.1
	henning:1.1.1;
locks; strict;
comment	@# @;


1.21
date	2016.04.28.15.42.34;	author sthen;	state dead;
branches;
next	1.20;
commitid	dl8E9n5uDA5wcBTp;

1.20
date	2014.03.13.17.33.27;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.11.11.44.43;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.17.10.29.44;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.09.16.12.00.07;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.22.08.36.49;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.11.12.35.14;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.09.26.17.45.13;	author sebastia;	state Exp;
branches;
next	1.13;

1.13
date	2010.02.26.14.45.02;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.06.03.00.48.51;	author pyr;	state Exp;
branches;
next	1.11;

1.11
date	2009.05.11.19.40.58;	author claudio;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.15.20.38.22;	author merdely;	state Exp;
branches;
next	1.9;

1.9
date	2007.06.30.15.32.30;	author simon;	state Exp;
branches;
next	1.8;

1.8
date	2007.06.21.20.25.40;	author simon;	state Exp;
branches;
next	1.7;

1.7
date	2007.02.11.10.31.20;	author bernd;	state Exp;
branches;
next	1.6;

1.6
date	2007.01.22.15.04.31;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2005.02.13.11.04.23;	author mbalmer;	state Exp;
branches
	1.5.6.1
	1.5.8.1;
next	1.4;

1.4
date	2005.01.26.02.40.55;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.22.14.16.22;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.05.00.58.57;	author henning;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.04.23.09.01;	author henning;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.05.04.23.09.01;	author henning;	state Exp;
branches;
next	;

1.5.6.1
date	2007.01.23.21.03.48;	author sturm;	state Exp;
branches;
next	1.5.6.2;

1.5.6.2
date	2007.02.20.21.16.49;	author sturm;	state Exp;
branches;
next	;

1.5.8.1
date	2007.01.23.21.44.49;	author sturm;	state Exp;
branches;
next	1.5.8.2;

1.5.8.2
date	2007.02.20.21.04.55;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.21
log
@rm apache1 modules, 'Destroy them all' ajacoutot@@

feel free to submit apache2 variants of these if wanted and still useful.

(this isn't all of them: those which are dependencies of other ports
will come later).
@
text
@# $OpenBSD: Makefile,v 1.20 2014/03/13 17:33:27 sthen Exp $

COMMENT=	Apache LDAP authentication module

REVISION=	12
VERSION=	1.6.0
DISTNAME=	auth_ldap-${VERSION}
PKGNAME=	mod_auth_ldap-${VERSION}
CATEGORIES=	www

HOMEPAGE=	http://www.rudedog.org/auth_ldap/

MASTER_SITES=	${HOMEPAGE}

MODULES+=	apache-module

# Apache License, one unused function GPL
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ldap lber

MODAPACHE_NAME=		auth_ldap
MODAPACHE_FILE=		${MODAPACHE_LOCATION}/auth_ldap.so

LIB_DEPENDS=	databases/openldap

NO_TEST=	Yes

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=		--with-apxs=${MODAPACHE_APXS}

post-build:
	@@${MODAPACHE_CREATE_ENABLE_SCRIPT}

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mod_auth_ldap
	${INSTALL_DATA} ${WRKBUILD}/auth_ldap.html \
		${PREFIX}/share/doc/mod_auth_ldap
	${MODAPACHE_INSTALL}

.include <bsd.port.mk>
@


1.20
log
@handle httpd move, originally from florian@@, tweaks by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/11 11:44:43 espie Exp $
@


1.19
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/09/17 10:29:44 sthen Exp $
d5 1
a5 1
REVISION=	11
d30 1
@


1.18
log
@Better @@exec-update lines; don't produce an error with pkg_add updates
if the module is installed but not activated. From Mikolaj Kucharski with
help from halex@@, looks good to halex.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/09/16 12:00:07 espie Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d27 1
a27 1
NO_REGRESS=	Yes
@


1.17
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/22 08:36:49 espie Exp $
d5 1
a5 1
REVISION=	10
@


1.16
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/11 12:35:14 sthen Exp $
d5 1
a5 1
REVISION=	9
@


1.15
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/09/26 17:45:13 sebastia Exp $
d28 1
a28 1
LIB_DEPENDS=	::databases/openldap
@


1.14
log
@bump apache modules, since mod_headers in base httpd was updated.

OK, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/02/26 14:45:02 sthen Exp $
d23 2
d28 1
a28 1
LIB_DEPENDS=	ldap,lber::databases/openldap
@


1.13
log
@bump PKGNAMEs, the httpd abi changed, resulting in segfaults after
updating httpd until newly-built packages are installed.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/06/03 00:48:51 pyr Exp $
d5 1
d8 1
a8 1
PKGNAME=	mod_auth_ldap-${VERSION}p8
@


1.12
log
@Bump apache modules after my recent ABI breakage, to be on the safe side.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/05/11 19:40:58 claudio Exp $
d7 1
a7 1
PKGNAME=	mod_auth_ldap-${VERSION}p7
@


1.11
log
@Define LDAP_DEPRECATED because OpenLDAP wants to make sure that every older
app is subtly but totaly broken by removing API functions unless we use the
magic button. Depending on the architecture the code may work or crash horribly
without this. OK sthen@@ (there are similar hacks in many other apps)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/15 20:38:22 merdely Exp $
d7 1
a7 1
PKGNAME=	mod_auth_ldap-${VERSION}p6
@


1.10
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/06/30 15:32:30 simon Exp $
d7 1
a7 1
PKGNAME=	mod_auth_ldap-${VERSION}p5
@


1.9
log
@bump versions as MODAPACHE_FINAL changed
and fix mod_security packaging while there

"go ahead" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/06/21 20:25:40 simon Exp $
d3 1
a3 1
COMMENT=	"Apache LDAP authentication module"
@


1.8
log
@switch to apache-module framework and
remove maintainer per his own request

"looks good" henning@@ (former maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/02/11 10:31:20 bernd Exp $
d7 1
a7 1
PKGNAME=	mod_auth_ldap-${VERSION}p4
@


1.7
log
@Fix security patch. Some parts of it aren't needed and caused problems.

ok henning@@
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.6 2007/01/22 15:04:31 bernd Exp $

# This port currently only works with archs supporting dynamic loading
# and has Apache that supports DSO's.
NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
d7 1
a7 1
PKGNAME=	mod_auth_ldap-${VERSION}p3
d14 1
a14 1
MAINTAINER=	Henning Brauer <henning@@openbsd.org>
d22 3
d32 1
a32 3
	sed 's,!!PREFIX!!,${PREFIX},' \
		< ${FILESDIR}/mod_auth_ldap-enable \
		> ${WRKBUILD}/mod_auth_ldap-enable
a34 2
	${INSTALL_DATA} ${WRKBUILD}/auth_ldap.so ${PREFIX}/lib
	${INSTALL_SCRIPT} ${WRKBUILD}/mod_auth_ldap-enable ${PREFIX}/sbin
d38 1
@


1.6
log
@Security fix for mod_auth_ldap-1.6.0.

Fixes a security bug that could allow attacker to execute arbitrary
commands as the apache user.

More information:
http://www.rudedog.org/auth_ldap/Changes.html

ok henning@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/02/13 11:04:23 mbalmer Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p2
@


1.5
log
@Install the documentation in ${PREFIX}/share/doc/mod_auth_ldap.

ok henning@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/01/26 02:40:55 alek Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p1
@


1.5.8.1
log
@MFC:
Security fix for mod_auth_ldap-1.6.0.

Fixes a security bug that could allow attacker to execute arbitrary
commands as the apache user.

More information:
http://www.rudedog.org/auth_ldap/Changes.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/02/13 11:04:23 mbalmer Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p2
@


1.5.8.2
log
@MFC:
Fix security patch. Some parts of it aren't needed and caused problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5.8.1 2007/01/23 21:44:49 sturm Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p3
@


1.5.6.1
log
@MFC:
Security fix for mod_auth_ldap-1.6.0.

Fixes a security bug that could allow attacker to execute arbitrary
commands as the apache user.

More information:
http://www.rudedog.org/auth_ldap/Changes.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/02/13 11:04:23 mbalmer Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p2
@


1.5.6.2
log
@MFC:
Fix security patch. Some parts of it aren't needed and caused problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5.6.1 2007/01/23 21:03:48 sturm Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p3
@


1.4
log
@- Replace DEINSTALL with UNMESSAGE and @@unexec
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2003/05/22 14:16:22 naddy Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}p0
d40 3
@


1.3
log
@Use NO_SHARED_ARCHS rather than hardcoding the list of architectures that
support dynamic loading.  From Xavier Santolaria <xavier@@santolaria.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/05/05 00:58:57 henning Exp $
d11 1
a11 1
PKGNAME=	mod_auth_ldap-${VERSION}
@


1.2
log
@:brad: remove the bogus BUILD_DEPENDS
this time in the right dir - nfs fucked up the previous, sorry for the
confusion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/05/04 23:09:01 henning Exp $
d5 1
a5 1
ONLY_FOR_ARCHS=	alpha i386 m68k powerpc sparc sparc64
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a26 1
BUILD_DEPENDS=	${LIB_DEPENDS}
@


1.1.1.1
log
@ldap authentication module for apache; ok margarida@@
@
text
@@
