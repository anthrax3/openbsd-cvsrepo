head	1.14;
access;
symbols
	OPENBSD_6_1:1.13.0.2
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.12.0.4
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.2
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.11.0.4
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.10.0.10
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.8
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.6
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.4
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.8
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.6
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.4
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.14
date	2017.07.14.17.04.12;	author sthen;	state Exp;
branches;
next	1.13;
commitid	wQJfYUy8pBAlIj4V;

1.13
date	2017.03.17.07.36.35;	author sthen;	state Exp;
branches
	1.13.2.1;
next	1.12;
commitid	EpVFwhilOQoj8lKc;

1.12
date	2015.10.27.18.18.17;	author sthen;	state Exp;
branches
	1.12.4.1;
next	1.11;
commitid	MeULVXlNLekuQ4rD;

1.11
date	2015.05.15.08.08.04;	author stsp;	state Exp;
branches;
next	1.10;
commitid	Cjn8n79ocvk9kzM0;

1.10
date	2012.10.18.08.12.17;	author giovanni;	state Exp;
branches;
next	1.9;

1.9
date	2012.07.18.08.45.42;	author sthen;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2011.09.01.13.40.09;	author giovanni;	state Exp;
branches;
next	1.7;

1.7
date	2009.12.01.13.38.23;	author bernd;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.09.18.36.00;	author bernd;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2008.09.02.22.05.23;	author bernd;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2008.01.28.19.48.47;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2007.09.19.05.47.36;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.25.17.40.55;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.25.20.40.02;	author deanna;	state Exp;
branches;
next	;

1.5.2.1
date	2009.09.15.02.27.53;	author william;	state Exp;
branches;
next	;

1.6.2.1
date	2009.12.09.01.01.55;	author william;	state Exp;
branches;
next	;

1.9.2.1
date	2012.11.06.16.24.11;	author giovanni;	state Exp;
branches;
next	;

1.12.4.1
date	2017.03.27.15.04.24;	author pirofti;	state Exp;
branches;
next	;
commitid	dUe3XnsmP7jvE5rG;

1.13.2.1
date	2017.07.14.18.31.32;	author sthen;	state Exp;
branches;
next	;
commitid	P9GRWa0c67xX1b6I;


desc
@@


1.14
log
@security update to apache-httpd-2.4.26, from David CARLIER with minor tweaks from me
(2.4.27 to follow)
@
text
@$OpenBSD: patch-configure,v 1.13 2017/03/17 07:36:35 sthen Exp $
Index: configure
--- configure.orig
+++ configure
@@@@ -3423,7 +3423,7 @@@@ do
   ap_last="${ap_cur}"
   ap_cur=`eval "echo ${ap_cur}"`
 done
-exp_sysconfdir="${ap_cur}"
+exp_sysconfdir=%%CONFDIR%%
 
 
   APACHE_VAR_SUBST="$APACHE_VAR_SUBST exp_sysconfdir"
@@@@ -4629,7 +4629,7 @@@@ APR_INCLUDEDIR=`$apr_config --includedir`
 APR_INCLUDES=`$apr_config --includes`
 APR_VERSION=`$apr_config --version`
 apr_major_version=`echo ${APR_VERSION} | sed 's,\..*,,'`
-APR_CONFIG="$APR_BINDIR/apr-${apr_major_version}-config"
+APR_CONFIG="$apr_config"
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: " >&5
 $as_echo "$as_me: " >&6;}
@


1.13
log
@update to apache-httpd-2.4.25
CVE-2016-8740 CVE-2016-5387 CVE-2016-2161 CVE-2016-0736 CVE-2016-8743
@
text
@d1 5
a5 4
$OpenBSD: patch-configure,v 1.12 2015/10/27 18:18:17 sthen Exp $
--- configure.orig	Fri Dec 16 18:24:48 2016
+++ configure	Wed Dec 21 11:09:53 2016
@@@@ -3418,7 +3418,7 @@@@ do
d14 1
a14 1
@@@@ -4624,7 +4624,7 @@@@ APR_INCLUDEDIR=`$apr_config --includedir`
@


1.13.2.1
log
@MFC security update to Apache httpd-2.4.27

fixed in 2.4.26:

ap_get_basic_auth_pw() Authentication Bypass CVE-2017-3167
mod_ssl Null Pointer Dereference CVE-2017-3169
mod_http2 Null Pointer Dereference CVE-2017-7659
ap_find_token() Buffer Overread CVE-2017-7668
mod_mime Buffer Overread CVE-2017-7679

fixed in 2.4.27:

Read after free in mod_http2 CVE-2017-9789
Uninitialized memory reflection in mod_auth_digest CVE-2017-9788
@
text
@d1 4
a4 5
$OpenBSD: patch-configure,v 1.14 2017/07/14 17:04:12 sthen Exp $
Index: configure
--- configure.orig
+++ configure
@@@@ -3423,7 +3423,7 @@@@ do
d13 1
a13 1
@@@@ -4629,7 +4629,7 @@@@ APR_INCLUDEDIR=`$apr_config --includedir`
@


1.12
log
@update to apache-httpd-2.4.17, and add scaffolding to use the same type of
modules.sample mechanism as apache-httpd-openbsd
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.11 2015/05/15 08:08:04 stsp Exp $
--- configure.orig	Fri Oct  9 18:32:07 2015
+++ configure	Mon Oct 26 12:26:50 2015
@@@@ -3414,7 +3414,7 @@@@ do
d13 1
a13 1
@@@@ -4620,7 +4620,7 @@@@ APR_INCLUDEDIR=`$apr_config --includedir`
@


1.12.4.1
log
@Backport Apache CVE fixes from sthen@@.

%--------------------------------------------------------------------
 [PATCH] update to apache-httpd-2.4.25 CVE-2016-8740 CVE-2016-5387
 CVE-2016-2161 CVE-2016-0736 CVE-2016-8743
%--------------------------------------------------------------------

OK robert@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.13 2017/03/17 07:36:35 sthen Exp $
--- configure.orig	Fri Dec 16 18:24:48 2016
+++ configure	Wed Dec 21 11:09:53 2016
@@@@ -3418,7 +3418,7 @@@@ do
d13 1
a13 1
@@@@ -4624,7 +4624,7 @@@@ APR_INCLUDEDIR=`$apr_config --includedir`
@


1.11
log
@Update www/apache-httpd to 2.4.12.
Manual configuration updates might be required, see
http://httpd.apache.org/docs/2.4/upgrading.html
MPMs can now be loaded at runtime. The default config keeps using 'prefork'.
Based on an initial diff by claudio@@
ok sthen@@ ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.10 2012/10/18 08:12:17 giovanni Exp $
--- configure.orig	Tue Jul 15 19:15:03 2014
+++ configure	Sat Jan 10 14:33:24 2015
@@@@ -3397,7 +3397,7 @@@@ do
d13 1
a13 1
@@@@ -4603,7 +4603,7 @@@@ APR_INCLUDEDIR=`$apr_config --includedir`
@


1.10
log
@
Update to 2.2.23, fixes CVE-2012-2687 and CVE-2012-0883.
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2012/07/18 08:45:42 sthen Exp $
--- configure.orig	Tue Aug 21 20:39:21 2012
+++ configure	Thu Sep 20 09:59:57 2012
@@@@ -3113,7 +3113,7 @@@@ do
d13 2
a14 3
@@@@ -4093,7 +4093,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
 APR_BINDIR=`$apr_config --bindir`
 APR_INCLUDEDIR=`$apr_config --includedir`
d16 2
a17 1
-APR_CONFIG="$APR_BINDIR/apr-`echo ${APR_VERSION} | sed 's,\..*,,'`-config"
d20 2
a21 11
 echo $ac_n "${nl}Configuring Apache Portable Runtime Utility library...${nl}"
 
@@@@ -4400,7 +4400,7 @@@@ fi
 APU_BINDIR=`$apu_config --bindir`
 APU_INCLUDEDIR=`$apu_config --includedir`
 APU_VERSION=`$apu_config --version`
-APU_CONFIG="$APU_BINDIR/apu-`echo ${APU_VERSION} | sed 's,\..*,,'`-config"
+APU_CONFIG="$apu_config"
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@


1.9
log
@Update to the Apache HTTP server 2.2.22, the current release on the 2.2 branch.
Merged from diffs from myself, Rodolfo Gouveia and with an rc script from
giovanni@@.

This is a security update, fixing CVE-2011-3348, CVE-2011-3368, CVE-2011-3607,
CVE-2011-4317, CVE-2012-0021, CVE-2012-0031 and CVE-2012-0053.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.8 2011/09/01 13:40:09 giovanni Exp $
--- configure.orig	Wed Jan 25 22:26:34 2012
+++ configure	Tue Feb 21 23:16:50 2012
@@@@ -3102,7 +3102,7 @@@@ do
d13 1
a13 1
@@@@ -4082,7 +4082,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
d22 1
a22 1
@@@@ -4389,7 +4389,7 @@@@ fi
@


1.9.2.1
log
@
Update to 2.2.23, fixes CVE-2012-2687 and CVE-2012-0883.
ok sthen@@
Reminded by Rodolfo Gouveia
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2012/07/18 08:45:42 sthen Exp $
--- configure.orig	Tue Aug 21 20:39:21 2012
+++ configure	Thu Sep 20 09:59:57 2012
@@@@ -3113,7 +3113,7 @@@@ do
d13 1
a13 1
@@@@ -4093,7 +4093,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
d22 1
a22 1
@@@@ -4400,7 +4400,7 @@@@ fi
@


1.8
log
@
Update to latest version, fixes CVE-2011-3192
ok fkr@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2009/12/01 13:38:23 bernd Exp $
--- configure.orig	Tue Aug 30 02:13:20 2011
+++ configure	Wed Aug 31 11:53:52 2011
@@@@ -3121,7 +3121,7 @@@@ do
d13 1
a13 1
@@@@ -4112,7 +4112,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
d22 1
a22 1
@@@@ -4430,7 +4430,7 @@@@ fi
@


1.7
log
@Security update to apache-httpd-2.2.14. (CVE-2009-3095, CVE-2009-3094)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2009/04/09 18:36:00 bernd Exp $
--- configure.orig	Thu Sep 24 01:29:56 2009
+++ configure	Fri Oct  9 11:52:03 2009
@@@@ -3097,7 +3097,7 @@@@ do
d13 1
a13 1
@@@@ -4077,7 +4077,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
d22 1
a22 1
@@@@ -4384,7 +4384,7 @@@@ fi
@


1.6
log
@Update to apache-httpd-2.2.11.

Lots of bugfixes and a security fix for CVE-2008-2939.

Enable usage of the threaded apr which is needed for
an upcoming port.

ok simon@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2008/09/02 22:05:23 bernd Exp $
--- configure.orig	Sat Dec  6 16:17:59 2008
+++ configure	Fri Mar 13 03:16:01 2009
@@@@ -2822,7 +2822,7 @@@@ do
d13 1
a13 1
@@@@ -3825,7 +3825,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
d22 1
a22 1
@@@@ -4144,7 +4144,7 @@@@ fi
@


1.6.2.1
log
@MFC:

Security update to apache-httpd-2.2.14. (CVE-2009-3095, CVE-2009-3094)

ok jasper@@ bernd@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2009/04/09 18:36:00 bernd Exp $
--- configure.orig	Thu Sep 24 01:29:56 2009
+++ configure	Fri Oct  9 11:52:03 2009
@@@@ -3097,7 +3097,7 @@@@ do
d13 1
a13 1
@@@@ -4077,7 +4077,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
d22 1
a22 1
@@@@ -4384,7 +4384,7 @@@@ fi
@


1.5
log
@Security update to apache-httpd-2.2.9. (CVE-2008-2364 and CVE-2007-6420)

http://www.apache.org/dist/httpd/CHANGES_2.2.9

Also fix LIB_DEPENDS and use the external pcre library instead of the shipped
one.

ok dlg@@, simon@@, merdely@@ (pre-lock)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.4 2008/01/28 19:48:47 bernd Exp $
--- configure.orig	Tue Jun 10 21:18:00 2008
+++ configure	Thu Jul 24 12:22:14 2008
@@@@ -2816,7 +2816,7 @@@@ do
d13 18
@


1.5.2.1
log
@MFC:

SECURITY FIX

Update to 2.2.13
SECURITY: CVE-2009-2412, CVE-2009-1891, CVE-2009-1195, CVE-2009-1890,
CVE-2009-1191, CVE-2009-0023, CVE-2009-1955, CVE-2009-1956

Update the Makefile to properly depend on the mt version of apr-util
in ldap flavour. (from bernd@@)

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2009/04/09 18:36:00 bernd Exp $
--- configure.orig	Sat Dec  6 16:17:59 2008
+++ configure	Fri Mar 13 03:16:01 2009
@@@@ -2822,7 +2822,7 @@@@ do
a12 18
@@@@ -3825,7 +3825,7 @@@@ SHLIBPATH_VAR=`$apr_config --shlib-path-var`
 APR_BINDIR=`$apr_config --bindir`
 APR_INCLUDEDIR=`$apr_config --includedir`
 APR_VERSION=`$apr_config --version`
-APR_CONFIG="$APR_BINDIR/apr-`echo ${APR_VERSION} | sed 's,\..*,,'`-config"
+APR_CONFIG="$apr_config"
 
 echo $ac_n "${nl}Configuring Apache Portable Runtime Utility library...${nl}"
 
@@@@ -4144,7 +4144,7 @@@@ fi
 APU_BINDIR=`$apu_config --bindir`
 APU_INCLUDEDIR=`$apu_config --includedir`
 APU_VERSION=`$apu_config --version`
-APU_CONFIG="$APU_BINDIR/apu-`echo ${APU_VERSION} | sed 's,\..*,,'`-config"
+APU_CONFIG="$apu_config"
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
@


1.4
log
@Security update to apache2 2.2.8.

(CVE-2007-6420, CVE-2007-6421, CVE-2007-6422, CVE-2007-6423,
CVE-2008-0005, CVE-2007-6388)

http://lists.grok.org.uk/pipermail/full-disclosure/2008-January/059626.html
http://lists.grok.org.uk/pipermail/full-disclosure/2008-January/059560.html
http://lists.grok.org.uk/pipermail/full-disclosure/2008-January/059561.html

ok dlg@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2007/09/19 05:47:36 steven Exp $
--- configure.orig	Thu Jan 10 17:54:40 2008
+++ configure	Wed Jan 23 22:21:27 2008
@@@@ -2588,7 +2588,7 @@@@ do
@


1.3
log
@SECURITY update to 2.2.6

fixes various vulnerabilities:
CVE-2007-3847, CVE-2007-1863, CVE-2007-3304, CVE-2006-5752, CVE-2007-1862

more details can be found at:
http://www.apache.org/dist/httpd/CHANGES_2.2.6

ok merdely@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2007/03/25 17:40:55 deanna Exp $
--- configure.orig	Tue Sep  4 22:09:24 2007
+++ configure	Tue Sep 18 17:00:40 2007
@@@@ -2583,7 +2583,7 @@@@ do
@


1.2
log
@Update to 2.2.4.  This is principally a bugfix release.  See
Changelog: http://www.apache.org/dist/httpd/CHANGES_2.2

While here, regen patches with the new diff.

ok dlg
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1 2006/12/25 20:40:02 deanna Exp $
--- configure.orig	Sat Jan  6 01:40:00 2007
+++ configure	Sun Mar 25 13:21:03 2007
@@@@ -1983,7 +1983,7 @@@@ do
@


1.1
log
@- stop setting SYSCONFDIR

- put config files in /etc/apache2 instead of /var since this is not
chrooted

- make a couple of comments that refer to 'httpd' refer to 'httpd2'
instead

- don't install the build makefiles

ideas from bernd@@ and steven@@, ok steven@@
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Sun Dec 17 11:37:04 2006
+++ configure	Sun Dec 17 11:41:13 2006
@@@@ -1975,7 +1975,7 @@@@ do
@

