head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.8
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.6
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.5.0.14
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.12
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.10
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.8
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.6
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.12
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.10
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.8
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2015.05.15.08.08.04;	author stsp;	state Exp;
branches;
next	1.5;
commitid	Cjn8n79ocvk9kzM0;

1.5
date	2011.09.01.13.40.09;	author giovanni;	state Exp;
branches;
next	1.4;

1.4
date	2008.09.02.22.05.23;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2008.01.28.19.48.47;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.25.17.40.55;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.16.01.12.26;	author deanna;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update www/apache-httpd to 2.4.12.
Manual configuration updates might be required, see
http://httpd.apache.org/docs/2.4/upgrading.html
MPMs can now be loaded at runtime. The default config keeps using 'prefork'.
Based on an initial diff by claudio@@
ok sthen@@ ajacoutot@@
@
text
@$OpenBSD: patch-docs_man_rotatelogs_8,v 1.5 2011/09/01 13:40:09 giovanni Exp $
--- docs/man/rotatelogs.8.orig	Thu Jan  1 16:30:56 2015
+++ docs/man/rotatelogs.8	Wed Apr 15 00:12:00 2015
@@@@ -19,21 +19,21 @@@@
 .el .ne 3
 .IP "\\$1" \\$2
 ..
-.TH "ROTATELOGS" 8 "2015-01-01" "Apache HTTP Server" "rotatelogs"
+.TH "ROTATELOGS2" 8 "2015-01-01" "Apache HTTP Server" "rotatelogs2"
 
 .SH NAME
-rotatelogs \- Piped logging program to rotate Apache logs
+rotatelogs2 \- Piped logging program to rotate Apache logs
 
 .SH "SYNOPSIS"
  
 .PP
-\fBrotatelogs\fR [ -\fBl\fR ] [ -\fBL\fR \fIlinkname\fR ] [ -\fBp\fR \fIprogram\fR ] [ -\fBf\fR ] [ -\fBt\fR ] [ -\fBv\fR ] [ -\fBe\fR ] [ -\fBc\fR ] [ -\fBn\fR \fInumber-of-files\fR ] \fIlogfile\fR \fIrotationtime\fR|\fIfilesize\fR(B|K|M|G) [ \fIoffset\fR ]
+\fBrotatelogs2\fR [ -\fBl\fR ] [ -\fBL\fR \fIlinkname\fR ] [ -\fBp\fR \fIprogram\fR ] [ -\fBf\fR ] [ -\fBt\fR ] [ -\fBv\fR ] [ -\fBe\fR ] [ -\fBc\fR ] [ -\fBn\fR \fInumber-of-files\fR ] \fIlogfile\fR \fIrotationtime\fR|\fIfilesize\fR(B|K|M|G) [ \fIoffset\fR ]
  
 
 .SH "SUMMARY"
  
 .PP
-rotatelogs is a simple program for use in conjunction with Apache's piped logfile feature\&. It supports rotation based on a time interval or maximum size of the log\&.
+rotatelogs2 is a simple program for use in conjunction with Apache's piped logfile feature\&. It supports rotation based on a time interval or maximum size of the log\&.
  
 
 .SH "OPTIONS"
@@@@ -47,10 +47,10 @@@@ Causes the use of local time rather than GMT as the ba
 Causes a hard link to be made from the current logfile to the specified link name\&. This can be used to watch the log continuously across rotations using a command like tail -F linkname\&.  
 .TP
 -p \fIprogram\fR
-If given, rotatelogs will execute the specified program every time a new log file is opened\&. The filename of the newly opened file is passed as the first argument to the program\&. If executing after a rotation, the old log file is passed as the second argument\&. rotatelogs does not wait for the specified program to terminate before continuing to operate, and will not log any error code returned on termination\&. The spawned program uses the same stdin, stdout, and stderr as rotatelogs itself, and also inherits the environment\&.  
+If given, rotatelogs2 will execute the specified program every time a new log file is opened\&. The filename of the newly opened file is passed as the first argument to the program\&. If executing after a rotation, the old log file is passed as the second argument\&. rotatelogs2 does not wait for the specified program to terminate before continuing to operate, and will not log any error code returned on termination\&. The spawned program uses the same stdin, stdout, and stderr as rotatelogs2 itself, and also inherits the environment\&.  
 .TP
 -f
-Causes the logfile to be opened immediately, as soon as rotatelogs starts, instead of waiting for the first logfile entry to be read (for non-busy sites, there may be a substantial delay between when the server is started and when the first request is handled, meaning that the associated logfile does not "exist" until then, which causes problems from some automated logging tools)  
+Causes the logfile to be opened immediately, as soon as rotatelogs2 starts, instead of waiting for the first logfile entry to be read (for non-busy sites, there may be a substantial delay between when the server is started and when the first request is handled, meaning that the associated logfile does not "exist" until then, which causes problems from some automated logging tools)  
 .TP
 -t
 Causes the logfile to be truncated instead of rotated\&. This is useful when a log is processed in real time by a command like tail, and there is no need for archived data\&. No suffix will be added to the filename, however format strings containing '%' characters will be respected\&.  
@@@@ -83,7 +83,7 @@@@ The number of minutes offset from UTC\&. If omitted, z
  
 .nf
 
-     CustomLog "|bin/rotatelogs /var/log/logfile 86400" common
+     CustomLog "|bin/rotatelogs2 /var/log/logfile 86400" common
 
 .fi
  
@@@@ -92,7 +92,7 @@@@ This creates the files /var/log/logfile\&.nnnn where n
  
 .nf
 
-     CustomLog "|bin/rotatelogs -l /var/log/logfile\&.%Y\&.%m\&.%d 86400" common
+     CustomLog "|bin/rotatelogs2 -l /var/log/logfile\&.%Y\&.%m\&.%d 86400" common
 
 .fi
  
@@@@ -101,7 +101,7 @@@@ This creates the files /var/log/logfile\&.yyyy\&.mm\&.
  
 .nf
 
-     CustomLog "|bin/rotatelogs /var/log/logfile 5M" common
+     CustomLog "|bin/rotatelogs2 /var/log/logfile 5M" common
 
 .fi
  
@@@@ -110,7 +110,7 @@@@ This configuration will rotate the logfile whenever it
  
 .nf
 
-     ErrorLog "|bin/rotatelogs /var/log/errorlog\&.%Y-%m-%d-%H_%M_%S 5M"
+     ErrorLog "|bin/rotatelogs2 /var/log/errorlog\&.%Y-%m-%d-%H_%M_%S 5M"
 
 .fi
  
@@@@ -119,7 +119,7 @@@@ This configuration will rotate the error logfile whene
  
 .nf
 
-     CustomLog "|bin/rotatelogs -t /var/log/logfile 86400" common
+     CustomLog "|bin/rotatelogs2 -t /var/log/logfile 86400" common
 
 .fi
  
@


1.5
log
@
Update to latest version, fixes CVE-2011-3192
ok fkr@@
@
text
@d1 4
a4 4
$OpenBSD: patch-docs_man_rotatelogs_8,v 1.4 2008/09/02 22:05:23 bernd Exp $
--- docs/man/rotatelogs.8.orig	Fri Feb  4 16:20:03 2011
+++ docs/man/rotatelogs.8	Wed Aug 31 11:58:24 2011
@@@@ -19,7 +19,7 @@@@
d8 2
a9 2
-.TH "ROTATELOGS" 8 "2010-11-06" "Apache HTTP Server" "rotatelogs"
+.TH "ROTATELOGS2" 8 "2010-11-06" "Apache HTTP Server" "rotatelogs"
d12 3
a14 2
 rotatelogs \- Piped logging program to rotate Apache logs
@@@@ -27,13 +27,13 @@@@ rotatelogs \- Piped logging program to rotate Apache l
d18 2
a19 2
-\fBrotatelogs\fR [ -\fBl\fR ] [ -\fBf\fR ] \fIlogfile\fR \fIrotationtime\fR|\fIfilesize\fRM [ \fIoffset\fR ]
+\fBrotatelogs2\fR [ -\fBl\fR ] [ -\fBf\fR ] \fIlogfile\fR \fIrotationtime\fR|\fIfilesize\fRM [ \fIoffset\fR ]
d30 6
a35 2
@@@@ -44,7 +44,7 @@@@ rotatelogs is a simple program for use in conjunction 
 Causes the use of local time rather than GMT as the base for the interval or for strftime(3) formatting with size-based rotation\&. Note that using -l in an environment which changes the GMT offset (such as for BST or DST) can lead to unpredictable results!  
d38 2
a39 2
-Causes the logfile to be opened immediately, as soon as rotatelogs starts, instead of waiting for the first logfile entry to be read (for non-busy sites, there may be a substantial delay between when the server is started and when the first request is handled, meaning that the associated logfile does not "exist" until then, which causes problems from some automated logging tools)\&. \fIAvailable in version 2\&.2\&.9 and later\&.\fR  
+Causes the logfile to be opened immediately, as soon as rotatelogs2 starts, instead of waiting for the first logfile entry to be read (for non-busy sites, there may be a substantial delay between when the server is started and when the first request is handled, meaning that the associated logfile does not "exist" until then, which causes problems from some automated logging tools)\&. \fIAvailable in version 2\&.2\&.9 and later\&.\fR  
d41 12
a52 3
 \fIlogfile\fR
 .PP The path plus basename of the logfile\&. If \fIlogfile\fR includes any '%' characters, it is treated as a format string for strftime(3)\&. Otherwise, the suffix \fI\&.nnnnnnnnnn\fR is automatically added and is the time in seconds\&. Both formats compute the start time from the beginning of the current period\&. For example, if a rotation time of 86400 is specified, the hour, minute, and second fields created from the strftime(3) format will all be zero, referring to the beginning of the current 24-hour period (midnight)\&. .PP When using strftime(3) filename formatting, be sure the log file format has enough granularity to produce a different file name each time the logs are rotated\&. Otherwise rotation will overwrite the same file instead of starting a new one\&. For example, if \fIlogfile\fR was /var/logs/errorlog\&.%Y-%m-%d with log rotation at 5 megabytes, but 5 megabytes was reached twice in the same day, the same log file name would be produced and log rotation would keep writing to the same file\&.  
@@@@ -62,7 +62,7 @@@@ The number of minutes offset from UTC\&. If omitted, z
d56 2
a57 2
-     CustomLog "|bin/rotatelogs /var/logs/logfile 86400" common
+     CustomLog "|bin/rotatelogs2 /var/logs/logfile 86400" common
d61 1
a61 1
@@@@ -71,7 +71,7 @@@@ This creates the files /var/logs/logfile\&.nnnn where 
d65 2
a66 2
-     CustomLog "|bin/rotatelogs -l /var/logs/logfile\&.%Y\&.%m\&.%d 86400" common
+     CustomLog "|bin/rotatelogs2 -l /var/logs/logfile\&.%Y\&.%m\&.%d 86400" common
d70 1
a70 1
@@@@ -80,7 +80,7 @@@@ This creates the files /var/logs/logfile\&.yyyy\&.mm\&
d74 2
a75 2
-     CustomLog "|bin/rotatelogs /var/logs/logfile 5M" common
+     CustomLog "|bin/rotatelogs2 /var/logs/logfile 5M" common
d79 1
a79 1
@@@@ -89,7 +89,7 @@@@ This configuration will rotate the logfile whenever it
d83 2
a84 2
-     ErrorLog "|bin/rotatelogs /var/logs/errorlog\&.%Y-%m-%d-%H_%M_%S 5M"
+     ErrorLog "|bin/rotatelogs2 /var/logs/errorlog\&.%Y-%m-%d-%H_%M_%S 5M"
@


1.4
log
@Security update to apache-httpd-2.2.9. (CVE-2008-2364 and CVE-2007-6420)

http://www.apache.org/dist/httpd/CHANGES_2.2.9

Also fix LIB_DEPENDS and use the external pcre library instead of the shipped
one.

ok dlg@@, simon@@, merdely@@ (pre-lock)
@
text
@d1 4
a4 4
$OpenBSD: patch-docs_man_rotatelogs_8,v 1.3 2008/01/28 19:48:47 bernd Exp $
--- docs/man/rotatelogs.8.orig	Thu Jul 24 12:24:38 2008
+++ docs/man/rotatelogs.8	Thu Jul 24 12:25:28 2008
@@@@ -19,21 +19,21 @@@@
d8 2
a9 2
-.TH "ROTATELOGS" 8 "2008-05-10" "Apache HTTP Server" "rotatelogs"
+.TH "ROTATELOGS2" 8 "2008-05-10" "Apache HTTP Server" "rotatelogs"
d12 2
a13 3
-rotatelogs \- Piped logging program to rotate Apache logs
+rotatelogs2 \- Piped logging program to rotate Apache logs
 
d37 1
a37 1
 The path plus basename of the logfile\&. If \fIlogfile\fR includes any '%' characters, it is treated as a format string for strftime(3)\&. Otherwise, the suffix \fI\&.nnnnnnnnnn\fR is automatically added and is the time in seconds\&. Both formats compute the start time from the beginning of the current period\&. For example, if a rotation time of 86400 is specified, the hour, minute, and second fields created from the strftime(3) format will all be zero, referring to the beginning of the current 24-hour period (midnight)\&.  
@


1.3
log
@Security update to apache2 2.2.8.

(CVE-2007-6420, CVE-2007-6421, CVE-2007-6422, CVE-2007-6423,
CVE-2008-0005, CVE-2007-6388)

http://lists.grok.org.uk/pipermail/full-disclosure/2008-January/059626.html
http://lists.grok.org.uk/pipermail/full-disclosure/2008-January/059560.html
http://lists.grok.org.uk/pipermail/full-disclosure/2008-January/059561.html

ok dlg@@
@
text
@d1 3
a3 3
$OpenBSD: patch-docs_man_rotatelogs_8,v 1.2 2007/03/25 17:40:55 deanna Exp $
--- docs/man/rotatelogs.8.orig	Wed Jan 23 22:23:27 2008
+++ docs/man/rotatelogs.8	Wed Jan 23 22:24:59 2008
d8 2
a9 2
-.TH "ROTATELOGS" 8 "2007-12-09" "Apache HTTP Server" "rotatelogs"
+.TH "ROTATELOGS2" 8 "2007-12-09" "Apache HTTP Server" "rotatelogs2"
d18 2
a19 2
-\fBrotatelogs\fR [ -\fBl\fR ] \fIlogfile\fR \fIrotationtime\fR|\fIfilesize\fRM [ \fIoffset\fR ]
+\fBrotatelogs2\fR [ -\fBl\fR ] \fIlogfile\fR \fIrotationtime\fR|\fIfilesize\fRM [ \fIoffset\fR ]
d30 10
a39 1
@@@@ -59,7 +59,7 @@@@ The number of minutes offset from UTC\&. If omitted, z
d48 1
a48 1
@@@@ -68,7 +68,7 @@@@ This creates the files /var/logs/logfile\&.nnnn where 
d57 1
a57 1
@@@@ -77,7 +77,7 @@@@ This creates the files /var/logs/logfile\&.yyyy\&.mm\&
d66 1
a66 1
@@@@ -86,7 +86,7 @@@@ This configuration will rotate the logfile whenever it
@


1.2
log
@Update to 2.2.4.  This is principally a bugfix release.  See
Changelog: http://www.apache.org/dist/httpd/CHANGES_2.2

While here, regen patches with the new diff.

ok dlg
@
text
@d1 4
a4 4
$OpenBSD: patch-docs_man_rotatelogs_8,v 1.1 2007/01/16 01:12:26 deanna Exp $
--- docs/man/rotatelogs.8.orig	Sat Nov 20 15:16:24 2004
+++ docs/man/rotatelogs.8	Sun Mar 25 13:21:04 2007
@@@@ -19,25 +19,25 @@@@
d8 2
a9 2
-.TH "ROTATELOGS" 8 "2004-06-20" "Apache HTTP Server" "rotatelogs"
+.TH "ROTATELOGS2" 8 "2004-06-20" "Apache HTTP Server" "rotatelogs2"
d18 2
a19 2
-\fBrotatelogs\fR [ -\fBl\fR ] \fIlogfile\fR [ \fIrotationtime\fR [ \fIoffset\fR ]] | [ \fIfilesize\fRM ]
+\fBrotatelogs2\fR [ -\fBl\fR ] \fIlogfile\fR [ \fIrotationtime\fR [ \fIoffset\fR ]] | [ \fIfilesize\fRM ]
d25 6
a30 2
-rotatelogs is a simple program for use in conjunction with Apache's piped logfile feature\&. For example:
+rotatelogs2 is a simple program for use in conjunction with Apache's piped logfile feature\&. For example:
d39 10
a48 1
@@@@ -46,7 +46,7 @@@@ This creates the files /var/logs/logfile\&.nnnn where 
d57 1
a57 1
@@@@ -55,7 +55,7 @@@@ This configuration will rotate the logfile whenever it
@


1.1
log
@Append a 2 to every mention of anything that exists in both the base
httpd and this port.  Hopefully we got them all.

Requested by robert@@, ok dlg@@.
@
text
@d1 3
a3 3
$OpenBSD$
--- docs/man/rotatelogs.8.orig	Sun Jan 14 19:01:44 2007
+++ docs/man/rotatelogs.8	Sun Jan 14 19:07:06 2007
d35 1
a35 1
@@@@ -46,7 +46,7 @@@@ This creates the files /var/logs/logfile
d44 1
a44 1
@@@@ -55,7 +55,7 @@@@ This configuration will rotate the logfi
@

