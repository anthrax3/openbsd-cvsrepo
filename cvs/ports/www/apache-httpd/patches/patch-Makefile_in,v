head	1.7;
access;
symbols
	OPENBSD_6_0:1.7.0.6
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.4
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.5.0.26
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.24
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.22
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.20
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.18
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.16
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.14
	OPENBSD_5_0:1.5.0.12
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.10
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.8
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.6
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.8
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.6
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.4
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	deanna_20061214:1.1.1.1
	deanna:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2015.07.18.00.55.09;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	n0As3qyb8zPdwoae;

1.6
date	2015.05.15.08.08.03;	author stsp;	state Exp;
branches;
next	1.5;
commitid	Cjn8n79ocvk9kzM0;

1.5
date	2008.09.02.22.05.23;	author bernd;	state Exp;
branches;
next	1.4;

1.4
date	2007.01.09.09.56.57;	author dlg;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.05.22.22.04;	author dlg;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.25.20.40.02;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.14.07.14.21;	author deanna;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.12.14.07.14.21;	author deanna;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to apache-httpd-2.4.16.

ok sthen@@
@
text
@$OpenBSD: patch-Makefile_in,v 1.6 2015/05/15 08:08:03 stsp Exp $
--- Makefile.in.orig	Wed Apr 15 20:06:04 2015
+++ Makefile.in	Sat Jul 18 02:34:37 2015
@@@@ -49,6 +49,8 @@@@ install-conf:
 	    			sed -e 's#@@@@ServerRoot@@@@#$(prefix)#g' \
 	    				-e 's#@@@@Port@@@@#$(PORT)#g' \
 	    				-e 's#@@@@SSLPort@@@@#$(SSLPORT)#g' \
+					-e 's#@@@@User@@@@#$(rel_user)#g' \
+					-e 's#@@@@Group@@@@#$(rel_group)#g' \
 	    				-e '/@@@@LoadModule@@@@/d' \
 	    				< $$i; \
 	    		else \
@@@@ -56,6 +58,8 @@@@ install-conf:
 	    				-e 's#@@@@ServerRoot@@@@#$(prefix)#g' \
 	    				-e 's#@@@@Port@@@@#$(PORT)#g' \
 	    				-e 's#@@@@SSLPort@@@@#$(SSLPORT)#g' \
+					-e 's#@@@@User@@@@#$(rel_user)#g' \
+					-e 's#@@@@Group@@@@#$(rel_group)#g' \
 	    				-e 'p' \
 	    				< $$i; \
 	    			if echo " $(DSO_MODULES) "|$(EGREP) " cgi " > /dev/null ; then \
@@@@ -96,6 +100,8 @@@@ install-conf:
 	    				-e 's#@@@@ServerRoot@@@@#$(prefix)#g' \
 	    				-e 's#@@@@Port@@@@#$(PORT)#g' \
 	    				-e 's#@@@@SSLPort@@@@#$(SSLPORT)#g' \
+					-e 's#@@@@User@@@@#$(rel_user)#g' \
+					-e 's#@@@@Group@@@@#$(rel_group)#g' \
 	    				< $$i; \
 	    		fi \
 	    	) > $(DESTDIR)$(sysconfdir)/original/$$i; \
@


1.6
log
@Update www/apache-httpd to 2.4.12.
Manual configuration updates might be required, see
http://httpd.apache.org/docs/2.4/upgrading.html
MPMs can now be loaded at runtime. The default config keeps using 'prefork'.
Based on an initial diff by claudio@@
ok sthen@@ ajacoutot@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile_in,v 1.5 2008/09/02 22:05:23 bernd Exp $
--- Makefile.in.orig	Mon Dec 17 12:50:41 2012
+++ Makefile.in	Sat Jan 10 14:31:17 2015
d21 2
a22 2
 	    			for j in $(DSO_MODULES) "^EOL^"; do \
@@@@ -76,6 +80,8 @@@@ install-conf:
@


1.5
log
@Security update to apache-httpd-2.2.9. (CVE-2008-2364 and CVE-2007-6420)

http://www.apache.org/dist/httpd/CHANGES_2.2.9

Also fix LIB_DEPENDS and use the external pcre library instead of the shipped
one.

ok dlg@@, simon@@, merdely@@ (pre-lock)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.4 2007/01/09 09:56:57 dlg Exp $
--- Makefile.in.orig	Thu Jul 24 12:22:37 2008
+++ Makefile.in	Thu Jul 24 12:24:01 2008
@@@@ -48,6 +48,8 @@@@ install-conf:
d13 1
a13 1
@@@@ -55,6 +57,8 @@@@ install-conf:
d22 1
a22 1
@@@@ -67,6 +71,8 @@@@ install-conf:
@


1.4
log
@switch apache2 from a gnu style configure to a simple one so we can
define prefix the way apache likes it.

this is because apache2 has a different understanding of what the prefix
means, and our understanding and application of it on this port leads to
extremely confused paths in a lot of its generated files.

our understanding of prefix is to mean the path at which the binaries,
libs, manpages, and so on are stored, ie, /usr/local. apache2 understands
prefix to mean "install architecture-independent files", or in real terms
the ServerRoot. obviously using /usr/local as the server root when we want
to use /var/apache2 for that purpose is uncomfortable for it, and it leads
to things like broken paths in the default config files and builds of
modules.

ok robert@@
@
text
@d1 4
a4 5
$OpenBSD: patch-Makefile_in,v 1.1.1.1 2006/12/14 07:14:21 deanna Exp $
--- Makefile.in.orig	Sun Nov 13 16:33:15 2005
+++ Makefile.in	Mon Jan  8 20:30:37 2007
@@@@ -47,12 +47,16 @@@@ install-conf:
 	    		if test $$n_lm -eq 0 -o "x$(DSO_MODULES)" = "x"; then \
d7 3
a9 2
+	    				-e 's#@@@@User@@@@#$(rel_user)#g' \
+	    				-e 's#@@@@Group@@@@#$(rel_group)#g' \
d13 1
a13 1
 	    			sed -n -e '/@@@@LoadModule@@@@/q' \
d16 3
a18 2
+	    				-e 's#@@@@User@@@@#$(rel_user)#g' \
+	    				-e 's#@@@@Group@@@@#$(rel_group)#g' \
d22 1
a22 2
@@@@ -64,6 +68,8 @@@@ install-conf:
 	    				-e '/@@@@LoadModule@@@@/d' \
d25 3
a27 2
+	    				-e 's#@@@@User@@@@#$(rel_user)#g' \
+	    				-e 's#@@@@Group@@@@#$(rel_group)#g' \
@


1.3
log
@revert the part of the previous commit that removed the install of the
build dir. you can build apache 2 modules again now.
@
text
@d3 2
a4 4
+++ Makefile.in	Fri Jan  5 15:05:01 2007
@@@@ -45,14 +45,18 @@@@ install-conf:
 	    	( \
 	    		n_lm=`awk 'BEGIN {n=0} /@@@@LoadModule@@@@/ {n+=1} END {print n}' < $$i`; \
d6 1
a6 2
-	    			sed -e 's#@@@@ServerRoot@@@@#$(prefix)#g' \
+	    			sed -e 's#@@@@ServerRoot@@@@#$(rel_datadir)#g' \
d14 1
a14 2
-	    				-e 's#@@@@ServerRoot@@@@#$(prefix)#g' \
+	    				-e 's#@@@@ServerRoot@@@@#$(rel_datadir)#g' \
d21 1
a21 3
@@@@ -62,8 +66,10 @@@@ install-conf:
 	    			done; \
 	    			sed -e '1,/@@@@LoadModule@@@@/d' \
d23 1
a23 2
-	    				-e 's#@@@@ServerRoot@@@@#$(prefix)#g' \
+	    				-e 's#@@@@ServerRoot@@@@#$(rel_datadir)#g' \
@


1.2
log
@- stop setting SYSCONFDIR

- put config files in /etc/apache2 instead of /var since this is not
chrooted

- make a couple of comments that refer to 'httpd' refer to 'httpd2'
instead

- don't install the build makefiles

ideas from bernd@@ and steven@@, ok steven@@
@
text
@d2 3
a4 13
--- Makefile.in.orig	Sun Nov 13 01:33:15 2005
+++ Makefile.in	Sun Dec 17 00:42:22 2006
@@@@ -15,8 +15,7 @@@@ PROGRAM_DEPENDENCIES = \
 PROGRAMS        = $(PROGRAM_NAME)
 TARGETS         = $(PROGRAMS) $(shared_build) $(other_targets)
 INSTALL_TARGETS = install-conf install-htdocs install-error install-icons \
-	install-other install-cgi install-include install-suexec install-build \
-	install-man
+	install-other install-cgi install-include install-suexec install-man
 
 DISTCLEAN_TARGETS  = include/ap_config_auto.h include/ap_config_layout.h \
 	modules.c config.cache config.log config.status build/config_vars.mk \
@@@@ -45,14 +44,18 @@@@ install-conf:
d25 1
a25 1
@@@@ -62,8 +65,10 @@@@ install-conf:
@


1.1
log
@Initial revision
@
text
@d1 14
a14 4
$OpenBSD$
--- Makefile.in.orig	Sun Nov 13 16:33:15 2005
+++ Makefile.in	Sun Oct 29 19:50:52 2006
@@@@ -45,14 +45,18 @@@@ install-conf:
d35 1
a35 1
@@@@ -62,8 +66,10 @@@@ install-conf:
@


1.1.1.1
log
@Bringing this in now so that we can work on it here.  Batting tarballs
back and forth in email messages doesn't make any sense when we have a
cvs tree to work in.

So, not hooked into the package builds yet.

Original work and port name from dlg.

ok robert@@, dlg@@

@
text
@@
