head	1.7;
access;
symbols
	OPENBSD_5_7:1.6.0.8
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.6
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.4
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.16
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.14
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.12
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2015.05.15.08.08.04;	author stsp;	state dead;
branches;
next	1.6;
commitid	Cjn8n79ocvk9kzM0;

1.6
date	2013.07.15.07.40.18;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2012.10.18.08.12.17;	author giovanni;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2011.09.01.13.40.09;	author giovanni;	state Exp;
branches
	1.4.4.1;
next	1.3;

1.3
date	2007.09.19.05.47.36;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.25.17.40.55;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.16.01.12.26;	author deanna;	state Exp;
branches;
next	;

1.4.4.1
date	2012.11.06.16.24.11;	author giovanni;	state Exp;
branches;
next	;

1.5.2.1
date	2013.07.15.07.48.48;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update www/apache-httpd to 2.4.12.
Manual configuration updates might be required, see
http://httpd.apache.org/docs/2.4/upgrading.html
MPMs can now be loaded at runtime. The default config keeps using 'prefork'.
Based on an initial diff by claudio@@
ok sthen@@ ajacoutot@@
@
text
@$OpenBSD: patch-server_mpm_common_c,v 1.6 2013/07/15 07:40:18 sthen Exp $
--- server/mpm_common.c.orig	Sat Feb 16 22:51:16 2013
+++ server/mpm_common.c	Mon Jul 15 08:40:33 2013
@@@@ -994,18 +994,18 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
             *exit_status = 1;
             return 1;
         }
-        status = "httpd (no pid file) not running";
+        status = "httpd2 (no pid file) not running";
     }
     else {
         if (kill(otherpid, 0) == 0) {
             running = 1;
             status = apr_psprintf(pconf,
-                                  "httpd (pid %" APR_PID_T_FMT ") already "
+                                  "httpd2 (pid %" APR_PID_T_FMT ") already "
                                   "running", otherpid);
         }
         else {
             status = apr_psprintf(pconf,
-                                  "httpd (pid %" APR_PID_T_FMT "?) not running",
+                                  "httpd2 (pid %" APR_PID_T_FMT "?) not running",
                                   otherpid);
         }
     }
@@@@ -1029,7 +1029,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
 
     if (!strcmp(dash_k_arg, "restart")) {
         if (!running) {
-            printf("httpd not running, trying to start\n");
+            printf("httpd2 not running, trying to start\n");
         }
         else {
             *exit_status = send_signal(otherpid, SIGHUP);
@@@@ -1039,7 +1039,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
 
     if (!strcmp(dash_k_arg, "graceful")) {
         if (!running) {
-            printf("httpd not running, trying to start\n");
+            printf("httpd2 not running, trying to start\n");
         }
         else {
             *exit_status = send_signal(otherpid, AP_SIG_GRACEFUL);
@@@@ -1056,7 +1056,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
             *exit_status = send_signal(otherpid, AP_SIG_GRACEFUL_STOP);
         }
 #else
-        printf("httpd MPM \"" MPM_NAME "\" does not support graceful-stop\n");
+        printf("httpd2 MPM \"" MPM_NAME "\" does not support graceful-stop\n");
 #endif
         return 1;
     }
@


1.6
log
@regen patch; no pkg change
@
text
@d1 1
a1 1
$OpenBSD: patch-server_mpm_common_c,v 1.5 2012/10/18 08:12:17 giovanni Exp $
@


1.5
log
@
Update to 2.2.23, fixes CVE-2012-2687 and CVE-2012-0883.
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-server_mpm_common_c,v 1.4 2011/09/01 13:40:09 giovanni Exp $
--- server/mpm_common.c.orig	Sat Aug 18 11:25:46 2012
+++ server/mpm_common.c	Fri Oct 12 16:17:16 2012
@@@@ -981,18 +981,18 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d26 1
a26 1
@@@@ -1016,7 +1016,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d35 1
a35 1
@@@@ -1026,7 +1026,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d44 1
a44 1
@@@@ -1043,7 +1043,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
@


1.5.2.1
log
@MFC Apache update (CVE-2013-1896, CVE-2013-1862).
Req'd by jasper@@.
@
text
@d1 4
a4 4
$OpenBSD: patch-server_mpm_common_c,v 1.5 2012/10/18 08:12:17 giovanni Exp $
--- server/mpm_common.c.orig	Sat Feb 16 22:51:16 2013
+++ server/mpm_common.c	Mon Jul 15 08:38:55 2013
@@@@ -994,18 +994,18 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d26 1
a26 1
@@@@ -1029,7 +1029,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d35 1
a35 1
@@@@ -1039,7 +1039,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d44 1
a44 1
@@@@ -1056,7 +1056,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
@


1.4
log
@
Update to latest version, fixes CVE-2011-3192
ok fkr@@
@
text
@d1 4
a4 4
$OpenBSD: patch-server_mpm_common_c,v 1.3 2007/09/19 05:47:36 steven Exp $
--- server/mpm_common.c.orig	Thu Apr 14 15:43:04 2011
+++ server/mpm_common.c	Wed Aug 31 12:01:22 2011
@@@@ -979,18 +979,18 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d26 1
a26 1
@@@@ -1014,7 +1014,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d35 1
a35 1
@@@@ -1024,7 +1024,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d44 1
a44 1
@@@@ -1041,7 +1041,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
@


1.4.4.1
log
@
Update to 2.2.23, fixes CVE-2012-2687 and CVE-2012-0883.
ok sthen@@
Reminded by Rodolfo Gouveia
@
text
@d1 4
a4 4
$OpenBSD: patch-server_mpm_common_c,v 1.4 2011/09/01 13:40:09 giovanni Exp $
--- server/mpm_common.c.orig	Sat Aug 18 11:25:46 2012
+++ server/mpm_common.c	Fri Oct 12 16:17:16 2012
@@@@ -981,18 +981,18 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d26 1
a26 1
@@@@ -1016,7 +1016,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d35 1
a35 1
@@@@ -1026,7 +1026,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d44 1
a44 1
@@@@ -1043,7 +1043,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
@


1.3
log
@SECURITY update to 2.2.6

fixes various vulnerabilities:
CVE-2007-3847, CVE-2007-1863, CVE-2007-3304, CVE-2006-5752, CVE-2007-1862

more details can be found at:
http://www.apache.org/dist/httpd/CHANGES_2.2.6

ok merdely@@
@
text
@d1 4
a4 4
$OpenBSD: patch-server_mpm_common_c,v 1.2 2007/03/25 17:40:55 deanna Exp $
--- server/mpm_common.c.orig	Tue Jul 17 16:48:25 2007
+++ server/mpm_common.c	Tue Sep 18 17:00:40 2007
@@@@ -980,19 +980,19 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
a11 1
         have_pid_file = 1;
d26 1
a26 1
@@@@ -1016,7 +1016,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d35 1
a35 1
@@@@ -1026,7 +1026,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d44 1
a44 1
@@@@ -1043,7 +1043,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
@


1.2
log
@Update to 2.2.4.  This is principally a bugfix release.  See
Changelog: http://www.apache.org/dist/httpd/CHANGES_2.2

While here, regen patches with the new diff.

ok dlg
@
text
@d1 4
a4 4
$OpenBSD: patch-server_mpm_common_c,v 1.1 2007/01/16 01:12:26 deanna Exp $
--- server/mpm_common.c.orig	Fri Sep 15 09:19:25 2006
+++ server/mpm_common.c	Sun Mar 25 13:21:04 2007
@@@@ -915,19 +915,19 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d27 1
a27 1
@@@@ -951,7 +951,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d36 1
a36 1
@@@@ -961,7 +961,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
d45 1
a45 1
@@@@ -978,7 +978,7 @@@@ int ap_signal_server(int *exit_status, apr_pool_t *pco
@


1.1
log
@Append a 2 to every mention of anything that exists in both the base
httpd and this port.  Hopefully we got them all.

Requested by robert@@, ok dlg@@.
@
text
@d1 4
a4 4
$OpenBSD$
--- server/mpm_common.c.orig	Sun Jan 14 17:15:18 2007
+++ server/mpm_common.c	Sun Jan 14 17:16:25 2007
@@@@ -915,19 +915,19 @@@@ int ap_signal_server(int *exit_status, a
d27 1
a27 1
@@@@ -951,7 +951,7 @@@@ int ap_signal_server(int *exit_status, a
d36 1
a36 1
@@@@ -961,7 +961,7 @@@@ int ap_signal_server(int *exit_status, a
d45 1
a45 1
@@@@ -978,7 +978,7 @@@@ int ap_signal_server(int *exit_status, a
@

