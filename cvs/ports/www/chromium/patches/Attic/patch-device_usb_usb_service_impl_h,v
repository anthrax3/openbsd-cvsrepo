head	1.4;
access;
symbols
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2015.08.16.20.42.46;	author robert;	state dead;
branches;
next	1.3;
commitid	UFytJBj1eg3jtj0e;

1.3
date	2015.07.23.13.44.04;	author robert;	state Exp;
branches;
next	1.2;
commitid	vxhJdppNzKtP7lYz;

1.2
date	2015.05.24.15.51.53;	author robert;	state Exp;
branches;
next	1.1;
commitid	rFaYcWD2ntiXn5nr;

1.1
date	2015.04.27.16.38.25;	author robert;	state Exp;
branches;
next	;
commitid	jwX00slFR1NY9xHC;


desc
@@


1.4
log
@drop the dependency on libusb in favor of the internal libusb due to
extra functionality implemented in the bundled version
@
text
@$OpenBSD: patch-device_usb_usb_service_impl_h,v 1.3 2015/07/23 13:44:04 robert Exp $
--- device/usb/usb_service_impl.h.orig.port	Wed Jul 22 09:47:11 2015
+++ device/usb/usb_service_impl.h	Wed Jul 22 09:47:32 2015
@@@@ -92,11 +92,13 @@@@ class UsbServiceImpl : public UsbService,
 
   void RemoveDevice(scoped_refptr<UsbDeviceImpl> device);
 
+#if !defined(OS_BSD)
   // Handle hotplug events from libusb.
   static int LIBUSB_CALL HotplugCallback(libusb_context* context,
                                          PlatformUsbDevice device,
                                          libusb_hotplug_event event,
                                          void* user_data);
+#endif
   // These functions release a reference to the provided platform device.
   void OnPlatformDeviceAdded(PlatformUsbDevice platform_device);
   void OnPlatformDeviceRemoved(PlatformUsbDevice platform_device);
@@@@ -112,7 +114,9 @@@@ class UsbServiceImpl : public UsbService,
   // connected instead of only when a full enumeration is requested.
   // TODO(reillyg): Support this on all platforms. crbug.com/411715
   bool hotplug_enabled_ = false;
+#if !defined(OS_BSD)
   libusb_hotplug_callback_handle hotplug_handle_;
+#endif
 
   // Enumeration callbacks are queued until an enumeration completes.
   bool enumeration_ready_ = false;
@


1.3
log
@update to 44.0.2403.89
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@update to 43.0.2357.65
@
text
@d1 6
a6 6
$OpenBSD: patch-device_usb_usb_service_impl_h,v 1.1 2015/04/27 16:38:25 robert Exp $
--- device/usb/usb_service_impl.h.orig.port	Thu May 14 00:35:46 2015
+++ device/usb/usb_service_impl.h	Wed May 20 08:34:56 2015
@@@@ -42,11 +42,13 @@@@ class UsbServiceImpl : public UsbService {
   // Adds a new UsbDevice to the devices_ map based on the given libusb device.
   scoped_refptr<UsbDeviceImpl> AddDevice(PlatformUsbDevice platform_device);
d16 3
a18 3
   void OnDeviceAdded(PlatformUsbDevice platform_device);
   void OnDeviceRemoved(PlatformUsbDevice platform_device);
@@@@ -67,7 +69,9 @@@@ class UsbServiceImpl : public UsbService {
d21 1
a21 1
   bool hotplug_enabled_;
d26 2
a27 2
   // The map from unique IDs to UsbDevices.
   typedef std::map<uint32, scoped_refptr<UsbDeviceImpl>> DeviceMap;
@


1.1
log
@update to 42.0.2311.90
@
text
@d1 4
a4 4
$OpenBSD$
--- device/usb/usb_service_impl.h.orig.port	Wed Apr 15 15:35:01 2015
+++ device/usb/usb_service_impl.h	Wed Apr 15 15:44:34 2015
@@@@ -38,11 +38,13 @@@@ class UsbServiceImpl : public UsbService {
d18 1
a18 1
@@@@ -63,7 +65,9 @@@@ class UsbServiceImpl : public UsbService {
@

