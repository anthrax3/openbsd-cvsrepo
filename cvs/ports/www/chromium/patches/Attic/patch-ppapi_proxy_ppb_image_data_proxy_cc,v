head	1.4;
access;
symbols
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2011.10.27.07.59.09;	author robert;	state dead;
branches;
next	1.3;

1.3
date	2011.09.19.08.55.26;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2011.08.16.08.17.44;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.29.13.18.01;	author robert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to 15.0.874.102.

switch from using the hacked macosx transport dib to the linux one
which uses sysv shms.
make sure you also have a current kernel before using this version
@
text
@$OpenBSD: patch-ppapi_proxy_ppb_image_data_proxy_cc,v 1.3 2011/09/19 08:55:26 robert Exp $
--- ppapi/proxy/ppb_image_data_proxy.cc.orig	Wed Sep 14 10:01:09 2011
+++ ppapi/proxy/ppb_image_data_proxy.cc	Fri Sep 16 18:17:23 2011
@@@@ -118,7 +118,7 @@@@ int32_t ImageData::GetSharedMemory(int* /* handle */,
 
 #if defined(OS_WIN)
 const ImageHandle ImageData::NullHandle = NULL;
-#elif defined(OS_MACOSX)
+#elif defined(OS_MACOSX) || defined(OS_OPENBSD)
 const ImageHandle ImageData::NullHandle = ImageHandle();
 #else
 const ImageHandle ImageData::NullHandle = 0;
@@@@ -127,7 +127,7 @@@@ const ImageHandle ImageData::NullHandle = 0;
 ImageHandle ImageData::HandleFromInt(int32_t i) {
 #if defined(OS_WIN)
     return reinterpret_cast<ImageHandle>(i);
-#elif defined(OS_MACOSX)
+#elif defined(OS_MACOSX) || defined(OS_OPENBSD)
     return ImageHandle(i, false);
 #else
     return static_cast<ImageHandle>(i);
@


1.3
log
@update to 14.0.835.163
@
text
@d1 1
a1 1
$OpenBSD: patch-ppapi_proxy_ppb_image_data_proxy_cc,v 1.2 2011/08/16 08:17:44 robert Exp $
@


1.2
log
@update to the next stable release (13.0.782.112)
@
text
@d1 4
a4 4
$OpenBSD$
--- ppapi/proxy/ppb_image_data_proxy.cc.orig	Tue Aug  2 20:44:03 2011
+++ ppapi/proxy/ppb_image_data_proxy.cc	Tue Aug  2 20:44:37 2011
@@@@ -111,7 +111,7 @@@@ void ImageData::Unmap() {
d13 1
a13 1
@@@@ -120,7 +120,7 @@@@ const ImageHandle ImageData::NullHandle = 0;
@


1.1
log
@update to the latest stable version which is now 11.0.696.60
+ switch from using system sqlite to the bundled one because they have
  many modifications that are needed
+ add a new mirror for the distfile because the google one is utterly slow
@
text
@d2 3
a4 30
--- ppapi/proxy/ppb_image_data_proxy.cc.orig	Thu Apr 28 11:52:04 2011
+++ ppapi/proxy/ppb_image_data_proxy.cc	Thu Apr 28 11:52:22 2011
@@@@ -23,7 +23,7 @@@@
 
 #if defined(OS_LINUX)
 #include <sys/shm.h>
-#elif defined(OS_MACOSX)
+#elif defined(OS_MACOSX) || defined(OS_OPENBSD)
 #include <sys/stat.h>
 #include <sys/mman.h>
 #endif
@@@@ -80,7 +80,7 @@@@ void* ImageData::Map() {
 #if defined(OS_WIN)
   NOTIMPLEMENTED();
   return NULL;
-#elif defined(OS_MACOSX)
+#elif defined(OS_MACOSX) || defined(OS_OPENBSD)
   struct stat st;
   if (fstat(handle_.fd, &st) != 0)
     return NULL;
@@@@ -105,7 +105,7 @@@@ void* ImageData::Map() {
 void ImageData::Unmap() {
 #if defined(OS_WIN)
   NOTIMPLEMENTED();
-#elif defined(OS_MACOSX)
+#elif defined(OS_MACOSX) || defined(OS_OPENBSD)
   if (mapped_data_) {
     struct stat st;
     if (fstat(handle_.fd, &st) == 0)
@@@@ -120,7 +120,7 @@@@ void ImageData::Unmap() {
d13 1
a13 1
@@@@ -129,7 +129,7 @@@@ const ImageHandle ImageData::NullHandle = 0;
@

