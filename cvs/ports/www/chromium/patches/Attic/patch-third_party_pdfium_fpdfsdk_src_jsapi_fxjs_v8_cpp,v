head	1.5;
access;
symbols
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2015.12.05.16.13.32;	author robert;	state dead;
branches;
next	1.4;
commitid	D0GFSwUDbKAnIs1m;

1.4
date	2015.10.14.16.42.07;	author robert;	state Exp;
branches;
next	1.3;
commitid	iw6THZfJQngZlw1r;

1.3
date	2015.09.05.16.06.50;	author robert;	state Exp;
branches;
next	1.2;
commitid	rTmBXJaDIIWe1XKA;

1.2
date	2015.07.23.13.44.04;	author robert;	state Exp;
branches;
next	1.1;
commitid	vxhJdppNzKtP7lYz;

1.1
date	2014.09.11.19.04.52;	author robert;	state Exp;
branches;
next	;
commitid	WrglT9ERNBhPArdd;


desc
@@


1.5
log
@update to 47.0.2526.73
@
text
@$OpenBSD: patch-third_party_pdfium_fpdfsdk_src_jsapi_fxjs_v8_cpp,v 1.4 2015/10/14 16:42:07 robert Exp $
--- third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp.orig.port	Wed Oct 14 07:56:35 2015
+++ third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp	Wed Oct 14 08:01:06 2015
@@@@ -920,7 +920,12 @@@@ double _getLocalTZA() {
   long timezone = 0;
   _get_timezone(&timezone);
 #endif
+#ifdef __OpenBSD__
+  struct tm *lt;
+  return (double)(-(lt->tm_gmtoff * 1000));
+#else
   return (double)(-(timezone * 1000));
+#endif
 }
 
 int _getDaylightSavingTA(double d) {
@


1.4
log
@update to 46.0.2490.71
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@update to 45.0.2454.85
@
text
@d1 4
a4 12
$OpenBSD: patch-third_party_pdfium_fpdfsdk_src_jsapi_fxjs_v8_cpp,v 1.2 2015/07/23 13:44:04 robert Exp $
--- third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp.orig.port	Tue Sep  1 22:10:52 2015
+++ third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp	Wed Sep  2 07:31:55 2015
@@@@ -772,6 +772,7 @@@@ void JS_ValueCopy(v8::Local<v8::Value>& pTo, v8::Local
 
 double _getLocalTZA()
 {
+	struct tm *lt;
 	if(!FSDK_IsSandBoxPolicyEnabled(FPDF_POLICY_MACHINETIME_ACCESS))
 		return 0;
 	time_t t = 0;
@@@@ -784,7 +785,11 @@@@ double _getLocalTZA()
d9 2
a10 1
+        return (double)(-(lt->tm_gmtoff * 1000));
d12 1
a12 1
 	return (double)(-(timezone * 1000));
d16 1
a16 1
 int _getDaylightSavingTA(double d)
@


1.2
log
@update to 44.0.2403.89
@
text
@d1 4
a4 4
$OpenBSD$
--- third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp.orig.port	Wed Jul 22 08:51:58 2015
+++ third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp	Wed Jul 22 08:52:59 2015
@@@@ -747,6 +747,7 @@@@ void JS_ValueCopy(v8::Handle<v8::Value>& pTo, v8::Hand
d12 1
a12 1
@@@@ -759,7 +760,11 @@@@ double _getLocalTZA()
@


1.1
log
@update to 37.0.2062.120
@
text
@d2 3
a4 3
--- third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp.orig.port	Thu Sep 11 10:27:45 2014
+++ third_party/pdfium/fpdfsdk/src/jsapi/fxjs_v8.cpp	Thu Sep 11 10:27:45 2014
@@@@ -753,12 +753,16 @@@@ void JS_ValueCopy(v8::Handle<v8::Value>& pTo, v8::Hand
d12 4
a15 2
 	time(&t);
-	localtime(&t);
d17 1
a17 1
+	return (double)(-(lt->tm_gmtoff * 1000));
@

