head	1.5;
access;
symbols
	OPENBSD_5_5:1.2.0.14
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.12
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.10
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2014.05.24.15.27.34;	author robert;	state dead;
branches;
next	1.4;

1.4
date	2014.04.17.16.27.53;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2014.03.11.14.52.01;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2011.02.08.09.43.02;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.12.13.09.51.45;	author espie;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to 35.0.1916.114
@
text
@$OpenBSD: patch-build_gyp_chromium,v 1.4 2014/04/17 16:27:53 robert Exp $
--- build/gyp_chromium.orig.port	Sat Apr 12 09:48:24 2014
+++ build/gyp_chromium	Tue Apr 15 20:08:59 2014
@@@@ -39,8 +39,6 @@@@ sys.path.insert(1, os.path.join(chrome_src, 'third_par
 sys.path.insert(1, os.path.join(chrome_src, 'third_party', 'WebKit',
     'Source', 'build', 'scripts'))
 
-import find_depot_tools
-
 # On Windows, Psyco shortens warm runs of build/gyp_chromium by about
 # 20 seconds on a z600 machine with 12 GB of RAM, from 90 down to 70
 # seconds.  Conversely, memory usage of build/gyp_chromium with Psyco
@@@@ -376,6 +374,7 @@@@ if __name__ == '__main__':
   # TODO(bradnelson): take this out once this issue is fixed:
   #    http://code.google.com/p/gyp/issues/detail?id=177
   if sys.platform == 'cygwin':
+    import find_depot_tools
     depot_tools_path = find_depot_tools.add_depot_tools_to_path()
     python_dir = sorted(glob.glob(os.path.join(depot_tools_path,
                                                'python2*_bin')))[-1]
@@@@ -441,6 +440,7 @@@@ if __name__ == '__main__':
   # don't use the automatic toolchain, as it currently only supports VS2013.
   msvs_version = os.environ.get('GYP_MSVS_VERSION', '2013')
   if sys.platform in ('win32', 'cygwin') and msvs_version.startswith('2013'):
+    import find_depot_tools
     depot_tools_path = find_depot_tools.add_depot_tools_to_path()
     toolchain = os.path.normpath(os.path.join(
         depot_tools_path, 'win_toolchain', 'vs2013_files'))
@@@@ -477,8 +477,8 @@@@ if __name__ == '__main__':
     args.append('--check')
 
   supplemental_includes = GetSupplementalFiles()
-  if not RunGN(supplemental_includes):
-    sys.exit(1)
+#  if not RunGN(supplemental_includes):
+#    sys.exit(1)
   args.extend(
       ['-I' + i for i in additional_include_files(supplemental_includes, args)])
 
@


1.4
log
@update to 34.0.1847.116 and disable Werror for the future clang update
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@update to 33.0.1750.146
@
text
@d2 29
a30 3
--- build/gyp_chromium.orig.port	Thu Feb 20 21:28:44 2014
+++ build/gyp_chromium	Fri Feb 21 23:47:00 2014
@@@@ -245,8 +245,8 @@@@ if __name__ == '__main__':
a32 1
 
d35 2
a36 3
+  #if not RunGN(supplemental_includes):
+  #  sys.exit(1)
 
d39 1
@


1.2
log
@late update to chromium 9, robert@@ did the work, but he doesn't have the
time right now.
Tree is still locked!
Reasons for the update:
- good work that can be used now
- only builds on i386/amd64, and they're fast
- multiple security problems in old chrome
- old chrome half working, can't break it more than it was.

This one requires resources (see MESSAGE), but it's ways more stable.

Again, discussed with sthen@@, jasper@@, naddy@@, miod@@
@
text
@d2 3
a4 5
--- build/gyp_chromium.orig	Mon Jan 24 10:14:18 2011
+++ build/gyp_chromium	Mon Jan 24 10:14:26 2011
@@@@ -1,4 +1,4 @@@@
-#!/usr/bin/python
+#!/usr/bin/env python
d6 9
a14 2
 # Copyright (c) 2009 The Chromium Authors. All rights reserved.
 # Use of this source code is governed by a BSD-style license that can be
@


1.1
log
@cut the "monster patches" into small pieces. pval can fix it to his liking
if he comes back.
In the mean time, fix build of chromium by adding the required
-I/usr/local/includes to gyp glue where needed.
@
text
@d2 2
a3 2
--- build/gyp_chromium.orig	Tue Mar 30 07:28:31 2010
+++ build/gyp_chromium	Sun Nov 28 00:11:29 2010
d6 1
a6 1
+#!/usr/local/bin/python2.6
@

