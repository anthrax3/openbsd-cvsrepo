head	1.4;
access;
symbols
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2011.10.27.07.59.09;	author robert;	state dead;
branches;
next	1.3;

1.3
date	2011.09.19.08.55.26;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2011.08.16.08.17.44;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.29.13.18.01;	author robert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to 15.0.874.102.

switch from using the hacked macosx transport dib to the linux one
which uses sysv shms.
make sure you also have a current kernel before using this version
@
text
@$OpenBSD: patch-content_browser_renderer_host_render_sandbox_host_linux_cc,v 1.3 2011/09/19 08:55:26 robert Exp $
--- content/browser/renderer_host/render_sandbox_host_linux.cc.orig	Wed Sep 14 10:01:10 2011
+++ content/browser/renderer_host/render_sandbox_host_linux.cc	Fri Sep 16 18:17:23 2011
@@@@ -335,7 +335,7 @@@@ class SandboxIPCProcess  {
       return;
     }
 
-    uint64_t inode;
+    uint64 inode;
     if (!pickle.ReadUInt64(&iter, &inode))
       return;
 
@


1.3
log
@update to 14.0.835.163
@
text
@d1 1
a1 1
$OpenBSD: patch-content_browser_renderer_host_render_sandbox_host_linux_cc,v 1.2 2011/08/16 08:17:44 robert Exp $
@


1.2
log
@update to the next stable release (13.0.782.112)
@
text
@d1 3
a3 3
$OpenBSD$
--- content/browser/renderer_host/render_sandbox_host_linux.cc.orig	Tue Aug  2 20:35:04 2011
+++ content/browser/renderer_host/render_sandbox_host_linux.cc	Tue Aug  2 20:35:27 2011
@


1.1
log
@update to the latest stable version which is now 11.0.696.60
+ switch from using system sqlite to the bundled one because they have
  many modifications that are needed
+ add a new mirror for the distfile because the google one is utterly slow
@
text
@d2 2
a3 2
--- content/browser/renderer_host/render_sandbox_host_linux.cc.orig	Thu Apr 28 11:28:33 2011
+++ content/browser/renderer_host/render_sandbox_host_linux.cc	Thu Apr 28 11:29:21 2011
a12 13
@@@@ -665,7 +665,12 @@@@ void RenderSandboxHostLinux::Init(const std::string& s
   // inherit some sockets. With PF_UNIX+SOCK_DGRAM, it can call sendmsg to send
   // a datagram to any (abstract) socket on the same system. With
   // SOCK_SEQPACKET, this is prevented.
+#if defined(OS_OPENBSD)
+  if (socketpair(AF_UNIX, SOCK_SEQPACKET, 0, fds) != 0)
+    CHECK(socketpair(AF_UNIX, SOCK_DGRAM, 0, fds) == 0);
+#else
   CHECK(socketpair(AF_UNIX, SOCK_SEQPACKET, 0, fds) == 0);
+#endif
 
   renderer_socket_ = fds[0];
   const int browser_socket = fds[1];
@

