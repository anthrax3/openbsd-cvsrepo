head	1.332;
access;
symbols
	OPENBSD_6_1:1.319.0.2
	OPENBSD_6_1_BASE:1.319
	OPENBSD_6_0:1.297.0.2
	OPENBSD_6_0_BASE:1.297
	OPENBSD_5_9:1.273.0.2
	OPENBSD_5_9_BASE:1.273
	OPENBSD_5_8:1.231.0.4
	OPENBSD_5_8_BASE:1.231
	OPENBSD_5_7:1.203.0.2
	OPENBSD_5_7_BASE:1.203
	OPENBSD_5_6:1.179.0.2
	OPENBSD_5_6_BASE:1.179
	OPENBSD_5_5:1.163.0.2
	OPENBSD_5_5_BASE:1.163
	OPENBSD_5_4:1.144.0.2
	OPENBSD_5_4_BASE:1.144
	OPENBSD_5_3:1.123.0.2
	OPENBSD_5_3_BASE:1.123
	OPENBSD_5_2:1.100.0.2
	OPENBSD_5_2_BASE:1.100
	OPENBSD_5_1_BASE:1.80
	OPENBSD_5_1:1.80.0.2
	OPENBSD_5_0:1.63.0.2
	OPENBSD_5_0_BASE:1.63
	OPENBSD_4_9:1.23.0.2
	OPENBSD_4_9_BASE:1.23
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	pvalchev_20091218:1.1.1.1
	pvalchev:1.1.1;
locks; strict;
comment	@# @;


1.332
date	2017.07.21.10.59.57;	author robert;	state Exp;
branches;
next	1.331;
commitid	C7G77qvdOEV9uvQ8;

1.331
date	2017.07.20.19.36.44;	author robert;	state Exp;
branches;
next	1.330;
commitid	KaqqIPrXyxlLYc2y;

1.330
date	2017.07.16.19.19.03;	author espie;	state Exp;
branches;
next	1.329;
commitid	tt0GhWK5c4uf9ILG;

1.329
date	2017.07.14.20.39.29;	author robert;	state Exp;
branches;
next	1.328;
commitid	I8Zo9lckGtE6TIhY;

1.328
date	2017.06.29.19.00.28;	author robert;	state Exp;
branches;
next	1.327;
commitid	l52nhXzB0ZUFQdvs;

1.327
date	2017.06.26.17.16.30;	author robert;	state Exp;
branches;
next	1.326;
commitid	qS3pkiWUKrphv0pz;

1.326
date	2017.06.25.21.53.56;	author robert;	state Exp;
branches;
next	1.325;
commitid	l6xAjqoVop0UE8Em;

1.325
date	2017.06.03.15.01.46;	author espie;	state Exp;
branches;
next	1.324;
commitid	gECC5aGdJBqFm9Hf;

1.324
date	2017.05.31.08.08.17;	author espie;	state Exp;
branches;
next	1.323;
commitid	ij92FtFXiSiT1ani;

1.323
date	2017.05.26.09.52.16;	author espie;	state Exp;
branches;
next	1.322;
commitid	vgLvzNzPdcKkFXCg;

1.322
date	2017.05.11.14.34.53;	author robert;	state Exp;
branches;
next	1.321;
commitid	GfBBRISI3e9ZyBEX;

1.321
date	2017.05.04.19.04.23;	author robert;	state Exp;
branches;
next	1.320;
commitid	NfssmMK1SuNoDVzJ;

1.320
date	2017.04.28.14.21.00;	author robert;	state Exp;
branches;
next	1.319;
commitid	XFDnyB7tGNawHUbl;

1.319
date	2017.03.30.17.54.24;	author robert;	state Exp;
branches;
next	1.318;
commitid	rhPOc14L9XV2yth3;

1.318
date	2017.03.17.10.17.29;	author robert;	state Exp;
branches;
next	1.317;
commitid	LssEOymfp9CORQev;

1.317
date	2017.03.14.12.18.53;	author robert;	state Exp;
branches;
next	1.316;
commitid	FgEdsLreTqAdn1i5;

1.316
date	2017.02.23.17.30.49;	author robert;	state Exp;
branches;
next	1.315;
commitid	Xchfuy8J4FssXfjr;

1.315
date	2017.02.03.09.47.16;	author robert;	state Exp;
branches;
next	1.314;
commitid	ULtWCuOApJJTuKib;

1.314
date	2017.01.26.17.08.25;	author robert;	state Exp;
branches;
next	1.313;
commitid	SWz5LewWpip0ZZLw;

1.313
date	2016.12.14.08.35.49;	author robert;	state Exp;
branches;
next	1.312;
commitid	u4xkntqusv5vpTnv;

1.312
date	2016.12.10.15.35.25;	author robert;	state Exp;
branches;
next	1.311;
commitid	D24Pj03ujnweitOe;

1.311
date	2016.11.17.16.59.35;	author robert;	state Exp;
branches;
next	1.310;
commitid	4oL7tLu3Rtv4PlGg;

1.310
date	2016.11.02.18.21.14;	author robert;	state Exp;
branches;
next	1.309;
commitid	Bdm7EVY9LsfEPDPF;

1.309
date	2016.10.26.06.22.07;	author robert;	state Exp;
branches;
next	1.308;
commitid	Dt81be1Osjz00Uwx;

1.308
date	2016.09.30.16.04.13;	author robert;	state Exp;
branches;
next	1.307;
commitid	xacg0QNzmseLIkKK;

1.307
date	2016.09.24.16.24.41;	author robert;	state Exp;
branches;
next	1.306;
commitid	E5d2hZ2gzNVNIM5q;

1.306
date	2016.09.08.13.00.34;	author robert;	state Exp;
branches;
next	1.305;
commitid	PxHqyYGmSllQoH8A;

1.305
date	2016.09.01.16.28.11;	author robert;	state Exp;
branches;
next	1.304;
commitid	0duujWXlyOCBrehm;

1.304
date	2016.08.25.20.00.07;	author sthen;	state Exp;
branches;
next	1.303;
commitid	zcBP2Im9altB5c41;

1.303
date	2016.08.19.19.58.47;	author robert;	state Exp;
branches;
next	1.302;
commitid	17YLM1qUvWVtr4dh;

1.302
date	2016.08.17.11.06.50;	author robert;	state Exp;
branches;
next	1.301;
commitid	ho0WBaBoHvorC0o0;

1.301
date	2016.08.09.04.28.13;	author robert;	state Exp;
branches;
next	1.300;
commitid	Xftw9qYVJaPLsuLF;

1.300
date	2016.08.08.16.20.39;	author robert;	state Exp;
branches;
next	1.299;
commitid	c7BrD2hEhcm00KGm;

1.299
date	2016.08.04.15.43.00;	author robert;	state Exp;
branches;
next	1.298;
commitid	yFzXA9qXTDTBem6T;

1.298
date	2016.07.31.13.11.44;	author robert;	state Exp;
branches;
next	1.297;
commitid	dRegVegviFQGKQZc;

1.297
date	2016.07.12.06.05.32;	author robert;	state Exp;
branches;
next	1.296;
commitid	ITZF1GxikKWpbxyb;

1.296
date	2016.07.09.18.39.18;	author robert;	state Exp;
branches;
next	1.295;
commitid	d1HBOg4uzkqyEalj;

1.295
date	2016.06.24.12.58.09;	author robert;	state Exp;
branches;
next	1.294;
commitid	GZDqZqkuiqVExQIc;

1.294
date	2016.06.17.10.56.28;	author robert;	state Exp;
branches;
next	1.293;
commitid	RNQUtBbyRR5xPvkU;

1.293
date	2016.06.10.05.15.55;	author robert;	state Exp;
branches;
next	1.292;
commitid	enhOIOkMpSINaiYy;

1.292
date	2016.06.02.21.03.38;	author sthen;	state Exp;
branches;
next	1.291;
commitid	W1RU9mHJIFcOFHst;

1.291
date	2016.06.02.14.13.13;	author robert;	state Exp;
branches;
next	1.290;
commitid	UHaP0U2EkaQlohNm;

1.290
date	2016.06.02.10.47.47;	author sthen;	state Exp;
branches;
next	1.289;
commitid	pT2wIYwad61o35bk;

1.289
date	2016.05.28.16.37.10;	author robert;	state Exp;
branches;
next	1.288;
commitid	aIKtUREkDKzrw5oq;

1.288
date	2016.05.27.06.28.20;	author robert;	state Exp;
branches;
next	1.287;
commitid	cpiCcJ3vjht5tEkH;

1.287
date	2016.05.20.15.36.05;	author robert;	state Exp;
branches;
next	1.286;
commitid	qC64HGNGQR4E2jxg;

1.286
date	2016.05.12.15.26.01;	author robert;	state Exp;
branches;
next	1.285;
commitid	mUSGPSpUF0rjF9Kb;

1.285
date	2016.04.26.14.22.24;	author robert;	state Exp;
branches;
next	1.284;
commitid	qCqOPZ55nJ1pWebp;

1.284
date	2016.04.25.17.12.53;	author robert;	state Exp;
branches;
next	1.283;
commitid	DDWfbROMtID57WMf;

1.283
date	2016.04.21.13.52.06;	author robert;	state Exp;
branches;
next	1.282;
commitid	n4PVp0kUjDdeBuGw;

1.282
date	2016.04.16.19.08.45;	author robert;	state Exp;
branches;
next	1.281;
commitid	SE10dvx9aTcZrjRO;

1.281
date	2016.04.09.13.33.13;	author robert;	state Exp;
branches;
next	1.280;
commitid	QBAFvrGUqljXqiCh;

1.280
date	2016.03.29.17.37.38;	author robert;	state Exp;
branches;
next	1.279;
commitid	rT3Nr3gnVvUhgy0F;

1.279
date	2016.03.26.10.49.50;	author robert;	state Exp;
branches;
next	1.278;
commitid	pReef6K8Qf295gOV;

1.278
date	2016.03.09.14.21.23;	author naddy;	state Exp;
branches;
next	1.277;
commitid	aFn6qYVcRMMqlPCE;

1.277
date	2016.03.09.13.18.10;	author naddy;	state Exp;
branches;
next	1.276;
commitid	GeZoh0hIoxe7MyDE;

1.276
date	2016.03.08.17.29.24;	author robert;	state Exp;
branches;
next	1.275;
commitid	mYFhvlhd5NXxGoLT;

1.275
date	2016.03.06.10.51.13;	author robert;	state Exp;
branches;
next	1.274;
commitid	Upms3IeOsaLsGxbP;

1.274
date	2016.03.05.16.04.06;	author pascal;	state Exp;
branches;
next	1.273;
commitid	EJSWd5DpdfEFGBlM;

1.273
date	2016.02.20.10.08.51;	author robert;	state Exp;
branches;
next	1.272;
commitid	vqVfDkiVNGxqHIKW;

1.272
date	2016.02.17.13.33.29;	author robert;	state Exp;
branches;
next	1.271;
commitid	tXgh6yYG2m735wYZ;

1.271
date	2016.02.06.18.02.18;	author robert;	state Exp;
branches;
next	1.270;
commitid	itY5DfZQhJopvv2a;

1.270
date	2016.01.31.20.45.29;	author robert;	state Exp;
branches;
next	1.269;
commitid	1W0lvpVPlqRBm1pa;

1.269
date	2016.01.29.16.56.10;	author robert;	state Exp;
branches;
next	1.268;
commitid	JWqzGUmr86Q88BC3;

1.268
date	2016.01.28.21.36.00;	author robert;	state Exp;
branches;
next	1.267;
commitid	fzf1cnb9zzGy9f3w;

1.267
date	2016.01.28.12.27.20;	author sthen;	state Exp;
branches;
next	1.266;
commitid	ddR8DsSTXWm8uOt7;

1.266
date	2016.01.27.20.05.23;	author robert;	state Exp;
branches;
next	1.265;
commitid	kzUO5Yv2QltXWqca;

1.265
date	2016.01.23.20.43.27;	author robert;	state Exp;
branches;
next	1.264;
commitid	858mkCBSSGIN9Szh;

1.264
date	2016.01.23.18.49.30;	author robert;	state Exp;
branches;
next	1.263;
commitid	KVrkvcBYFue8N3VB;

1.263
date	2016.01.17.17.29.12;	author sthen;	state Exp;
branches;
next	1.262;
commitid	bS2FIbTCCkF3XjOq;

1.262
date	2016.01.15.19.57.24;	author sthen;	state Exp;
branches;
next	1.261;
commitid	E468onXLCPTmHVpN;

1.261
date	2016.01.14.13.21.06;	author robert;	state Exp;
branches;
next	1.260;
commitid	q26Owgf3huFOHhSj;

1.260
date	2016.01.08.15.18.09;	author robert;	state Exp;
branches;
next	1.259;
commitid	GGnNyVdaRZkrDRcU;

1.259
date	2016.01.06.21.46.44;	author robert;	state Exp;
branches;
next	1.258;
commitid	QCpbcWCjgKtMUGZ9;

1.258
date	2015.12.28.09.53.27;	author robert;	state Exp;
branches;
next	1.257;
commitid	2TgUzHrA9onQRRf9;

1.257
date	2015.12.16.16.14.13;	author robert;	state Exp;
branches;
next	1.256;
commitid	EZ6EFsD0KFpZstZI;

1.256
date	2015.12.12.20.20.01;	author robert;	state Exp;
branches;
next	1.255;
commitid	pICiE7sceSszB2d2;

1.255
date	2015.12.12.09.23.30;	author robert;	state Exp;
branches;
next	1.254;
commitid	KENeKa9cimy3Wwbt;

1.254
date	2015.12.09.15.01.21;	author robert;	state Exp;
branches;
next	1.253;
commitid	QGe2b46g9Bj4ggAf;

1.253
date	2015.12.05.16.13.32;	author robert;	state Exp;
branches;
next	1.252;
commitid	D0GFSwUDbKAnIs1m;

1.252
date	2015.11.20.11.24.04;	author sthen;	state Exp;
branches;
next	1.251;
commitid	xESrXKEQBEZ66Kvo;

1.251
date	2015.11.14.22.47.59;	author sthen;	state Exp;
branches;
next	1.250;
commitid	YeKtv0jyVCCYAayc;

1.250
date	2015.11.11.18.37.05;	author robert;	state Exp;
branches;
next	1.249;
commitid	8BORRSXWOMguZ0e6;

1.249
date	2015.10.24.09.10.35;	author robert;	state Exp;
branches;
next	1.248;
commitid	8y9xKxIunw8cVkhM;

1.248
date	2015.10.19.11.36.59;	author robert;	state Exp;
branches;
next	1.247;
commitid	AG5YmXDbqc7V3jhW;

1.247
date	2015.10.14.16.42.07;	author robert;	state Exp;
branches;
next	1.246;
commitid	iw6THZfJQngZlw1r;

1.246
date	2015.09.25.21.09.19;	author robert;	state Exp;
branches;
next	1.245;
commitid	K3Ls9QPxhXf6oFiP;

1.245
date	2015.09.25.13.43.04;	author robert;	state Exp;
branches;
next	1.244;
commitid	GlIMk3NkHbjuXlZ1;

1.244
date	2015.09.25.13.08.54;	author robert;	state Exp;
branches;
next	1.243;
commitid	Ch0sXqEIoNbyRPgp;

1.243
date	2015.09.22.16.42.21;	author robert;	state Exp;
branches;
next	1.242;
commitid	G9D5L89yDxCewbsr;

1.242
date	2015.09.20.18.32.18;	author robert;	state Exp;
branches;
next	1.241;
commitid	ketelgrGxwKUOjVY;

1.241
date	2015.09.19.10.03.26;	author robert;	state Exp;
branches;
next	1.240;
commitid	SPsaWJzh0mvhvsNl;

1.240
date	2015.09.19.09.52.36;	author robert;	state Exp;
branches;
next	1.239;
commitid	01hDhvwwbeMAYfky;

1.239
date	2015.09.17.18.59.44;	author robert;	state Exp;
branches;
next	1.238;
commitid	p9LxfjBeMgQVXi5y;

1.238
date	2015.09.07.14.29.38;	author robert;	state Exp;
branches;
next	1.237;
commitid	98EM0fEEPZkJ6Jhe;

1.237
date	2015.09.05.16.06.50;	author robert;	state Exp;
branches;
next	1.236;
commitid	rTmBXJaDIIWe1XKA;

1.236
date	2015.08.27.14.16.50;	author robert;	state Exp;
branches;
next	1.235;
commitid	PRkSgpfX2j4G76uf;

1.235
date	2015.08.21.12.58.15;	author robert;	state Exp;
branches;
next	1.234;
commitid	0TrjAKs7r1l1ivEH;

1.234
date	2015.08.20.08.04.33;	author robert;	state Exp;
branches;
next	1.233;
commitid	EK92NkUZOaQYFSu4;

1.233
date	2015.08.16.20.42.46;	author robert;	state Exp;
branches;
next	1.232;
commitid	UFytJBj1eg3jtj0e;

1.232
date	2015.08.12.05.55.16;	author robert;	state Exp;
branches;
next	1.231;
commitid	XfzSnOIYa9PRzMMq;

1.231
date	2015.08.02.16.14.06;	author robert;	state Exp;
branches;
next	1.230;
commitid	brQSaFjiRNV9cvQj;

1.230
date	2015.08.01.11.07.29;	author robert;	state Exp;
branches;
next	1.229;
commitid	72Iv5IGoGEGhq8aH;

1.229
date	2015.07.29.11.36.38;	author robert;	state Exp;
branches;
next	1.228;
commitid	AXDxVQ1WuTzLU1sx;

1.228
date	2015.07.28.11.30.25;	author robert;	state Exp;
branches;
next	1.227;
commitid	pNgepkqLMkuXYpPh;

1.227
date	2015.07.25.12.59.15;	author robert;	state Exp;
branches;
next	1.226;
commitid	auRZVkyT9T4bzTbf;

1.226
date	2015.07.24.07.29.52;	author robert;	state Exp;
branches;
next	1.225;
commitid	UlwU3KabcGQQnOog;

1.225
date	2015.07.23.13.44.04;	author robert;	state Exp;
branches;
next	1.224;
commitid	vxhJdppNzKtP7lYz;

1.224
date	2015.07.15.08.06.42;	author robert;	state Exp;
branches;
next	1.223;
commitid	H5wwnEJwOgDwaelt;

1.223
date	2015.07.12.14.44.04;	author robert;	state Exp;
branches;
next	1.222;
commitid	l7PcG9vJcRk01QDc;

1.222
date	2015.07.08.15.26.50;	author robert;	state Exp;
branches;
next	1.221;
commitid	nrkTHmlzveD60u9B;

1.221
date	2015.06.23.11.51.53;	author robert;	state Exp;
branches;
next	1.220;
commitid	tJt30BnOn9Mc15FB;

1.220
date	2015.06.12.07.39.16;	author robert;	state Exp;
branches;
next	1.219;
commitid	ChSRvkwDzSro4XIr;

1.219
date	2015.06.11.10.55.18;	author robert;	state Exp;
branches;
next	1.218;
commitid	NDalSZCAwVgphaln;

1.218
date	2015.05.26.12.49.49;	author robert;	state Exp;
branches;
next	1.217;
commitid	BQDOeSJFbVsgH50p;

1.217
date	2015.05.26.06.18.29;	author robert;	state Exp;
branches;
next	1.216;
commitid	muos8tMpYcgryt33;

1.216
date	2015.05.24.15.51.52;	author robert;	state Exp;
branches;
next	1.215;
commitid	rFaYcWD2ntiXn5nr;

1.215
date	2015.05.19.07.27.17;	author dcoppa;	state Exp;
branches;
next	1.214;
commitid	EpMxUPYh8sw9Uwcb;

1.214
date	2015.05.15.10.47.55;	author dcoppa;	state Exp;
branches;
next	1.213;
commitid	Ala40gCJV8x3JQ0k;

1.213
date	2015.05.07.12.29.07;	author robert;	state Exp;
branches;
next	1.212;
commitid	SwQDnemtJzUZUiR6;

1.212
date	2015.05.01.12.45.04;	author robert;	state Exp;
branches;
next	1.211;
commitid	i1xTDwtqy7Yj8qrr;

1.211
date	2015.04.30.22.51.46;	author sthen;	state Exp;
branches;
next	1.210;
commitid	HfM0HKJN1nbEVfVF;

1.210
date	2015.04.27.16.38.25;	author robert;	state Exp;
branches;
next	1.209;
commitid	jwX00slFR1NY9xHC;

1.209
date	2015.04.04.09.21.04;	author ajacoutot;	state Exp;
branches;
next	1.208;
commitid	kS3kwKZogsvzYmEY;

1.208
date	2015.04.03.10.32.04;	author robert;	state Exp;
branches;
next	1.207;
commitid	a4CoD5nCXkH0x1nB;

1.207
date	2015.03.31.09.44.48;	author ajacoutot;	state Exp;
branches;
next	1.206;
commitid	Ea3rOcpyiLlaXbHa;

1.206
date	2015.03.27.08.15.03;	author ajacoutot;	state Exp;
branches;
next	1.205;
commitid	pJtemCapJ8nySttp;

1.205
date	2015.03.21.14.11.19;	author robert;	state Exp;
branches;
next	1.204;
commitid	Kg1xuyx3ToAqDyEk;

1.204
date	2015.03.18.19.26.29;	author robert;	state Exp;
branches;
next	1.203;
commitid	aPwx9j7rbIsa650M;

1.203
date	2015.02.22.11.33.57;	author robert;	state Exp;
branches;
next	1.202;
commitid	5vSaT6ucdnz9y8nA;

1.202
date	2015.02.22.05.58.34;	author robert;	state Exp;
branches;
next	1.201;
commitid	WwLxBLDEZ8DeX8e8;

1.201
date	2015.02.15.19.51.28;	author robert;	state Exp;
branches;
next	1.200;
commitid	aXaFfxvdOjpKJO7H;

1.200
date	2015.02.12.07.38.09;	author robert;	state Exp;
branches;
next	1.199;
commitid	zg3KC4gJ2kK8uLNQ;

1.199
date	2015.02.10.10.12.49;	author sthen;	state Exp;
branches;
next	1.198;
commitid	QFFoBO1MOCNMXhWr;

1.198
date	2015.02.06.17.45.14;	author robert;	state Exp;
branches;
next	1.197;
commitid	wOONffEfwEc5BZ9C;

1.197
date	2015.01.28.15.04.21;	author robert;	state Exp;
branches;
next	1.196;
commitid	z8CxEHbjLSiG1mcL;

1.196
date	2015.01.24.18.07.46;	author sthen;	state Exp;
branches;
next	1.195;
commitid	OOJnCRnc9VCyAALT;

1.195
date	2015.01.22.11.42.24;	author robert;	state Exp;
branches;
next	1.194;
commitid	pg6r1f66nHgHahb7;

1.194
date	2015.01.22.11.16.40;	author robert;	state Exp;
branches;
next	1.193;
commitid	yDb21GVFY5iIUXUw;

1.193
date	2015.01.15.17.29.49;	author robert;	state Exp;
branches;
next	1.192;
commitid	oYSm09TktULl6NoH;

1.192
date	2014.12.13.14.57.49;	author robert;	state Exp;
branches;
next	1.191;
commitid	Jg6qn8jbqGu4cRvY;

1.191
date	2014.11.29.16.52.06;	author robert;	state Exp;
branches;
next	1.190;
commitid	JzeCo9V3MlxlZXhb;

1.190
date	2014.11.19.21.27.32;	author robert;	state Exp;
branches;
next	1.189;
commitid	Fr3Mh6eWvxxgNbvB;

1.189
date	2014.11.14.21.04.36;	author robert;	state Exp;
branches;
next	1.188;
commitid	8GeG8ezephDzABrX;

1.188
date	2014.10.30.22.20.23;	author robert;	state Exp;
branches;
next	1.187;
commitid	obzTsB3L561naFfA;

1.187
date	2014.10.21.14.03.06;	author robert;	state Exp;
branches;
next	1.186;
commitid	u2q5ODijXjc0cA0p;

1.186
date	2014.10.13.14.20.28;	author robert;	state Exp;
branches;
next	1.185;
commitid	91GScP2DtPVMB4Nf;

1.185
date	2014.10.13.06.49.19;	author robert;	state Exp;
branches;
next	1.184;
commitid	GAMY6AdJxC6cdD6g;

1.184
date	2014.10.04.12.30.58;	author robert;	state Exp;
branches;
next	1.183;
commitid	gnzpAFeHaeeQ2ms0;

1.183
date	2014.09.15.06.29.56;	author robert;	state Exp;
branches;
next	1.182;
commitid	wrHoSdj9o4sHYCS0;

1.182
date	2014.09.11.19.04.52;	author robert;	state Exp;
branches;
next	1.181;
commitid	WrglT9ERNBhPArdd;

1.181
date	2014.08.15.15.59.49;	author robert;	state Exp;
branches;
next	1.180;
commitid	GbSB2H5tgaETHBgA;

1.180
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.179;
commitid	jyyOLTDxRdjpw44n;

1.179
date	2014.07.28.12.33.47;	author espie;	state Exp;
branches;
next	1.178;
commitid	AsGXLQC1ztSjjvqB;

1.178
date	2014.07.24.08.37.40;	author robert;	state Exp;
branches;
next	1.177;
commitid	6t0J98ZxMxPTEU9l;

1.177
date	2014.07.20.17.22.33;	author robert;	state Exp;
branches;
next	1.176;
commitid	yFSQqywU9tg3Fhqe;

1.176
date	2014.07.11.07.39.58;	author ajacoutot;	state Exp;
branches;
next	1.175;
commitid	5cw0orQVFaeAQgTs;

1.175
date	2014.06.12.14.22.07;	author robert;	state Exp;
branches;
next	1.174;
commitid	Aoqa8RZu9fc7Dk1J;

1.174
date	2014.05.24.15.27.34;	author robert;	state Exp;
branches;
next	1.173;

1.173
date	2014.05.16.06.51.43;	author robert;	state Exp;
branches;
next	1.172;

1.172
date	2014.04.28.22.04.21;	author sthen;	state Exp;
branches;
next	1.171;

1.171
date	2014.04.25.15.58.09;	author robert;	state Exp;
branches;
next	1.170;

1.170
date	2014.04.20.10.00.21;	author jasper;	state Exp;
branches;
next	1.169;

1.169
date	2014.04.17.16.27.53;	author robert;	state Exp;
branches;
next	1.168;

1.168
date	2014.04.07.19.32.03;	author robert;	state Exp;
branches;
next	1.167;

1.167
date	2014.04.06.22.21.11;	author robert;	state Exp;
branches;
next	1.166;

1.166
date	2014.03.14.10.18.56;	author robert;	state Exp;
branches;
next	1.165;

1.165
date	2014.03.11.14.52.01;	author robert;	state Exp;
branches;
next	1.164;

1.164
date	2014.03.10.20.27.25;	author landry;	state Exp;
branches;
next	1.163;

1.163
date	2014.02.10.18.34.59;	author robert;	state Exp;
branches;
next	1.162;

1.162
date	2014.02.10.07.02.24;	author robert;	state Exp;
branches;
next	1.161;

1.161
date	2014.02.03.16.37.31;	author robert;	state Exp;
branches;
next	1.160;

1.160
date	2014.01.18.11.42.03;	author robert;	state Exp;
branches;
next	1.159;

1.159
date	2013.12.12.10.43.18;	author robert;	state Exp;
branches;
next	1.158;

1.158
date	2013.11.15.07.44.49;	author ajacoutot;	state Exp;
branches;
next	1.157;

1.157
date	2013.11.01.14.09.19;	author robert;	state Exp;
branches;
next	1.156;

1.156
date	2013.10.29.06.51.34;	author robert;	state Exp;
branches;
next	1.155;

1.155
date	2013.10.16.15.04.08;	author bluhm;	state Exp;
branches;
next	1.154;

1.154
date	2013.10.11.14.53.57;	author dcoppa;	state Exp;
branches;
next	1.153;

1.153
date	2013.10.11.13.52.07;	author ajacoutot;	state Exp;
branches;
next	1.152;

1.152
date	2013.09.30.14.21.46;	author robert;	state Exp;
branches;
next	1.151;

1.151
date	2013.09.29.19.03.59;	author robert;	state Exp;
branches;
next	1.150;

1.150
date	2013.09.27.17.49.09;	author ajacoutot;	state Exp;
branches;
next	1.149;

1.149
date	2013.09.25.23.39.55;	author sthen;	state Exp;
branches;
next	1.148;

1.148
date	2013.09.25.16.53.53;	author sthen;	state Exp;
branches;
next	1.147;

1.147
date	2013.08.08.11.52.51;	author naddy;	state Exp;
branches;
next	1.146;

1.146
date	2013.08.07.22.15.52;	author robert;	state Exp;
branches;
next	1.145;

1.145
date	2013.08.07.21.32.47;	author naddy;	state Exp;
branches;
next	1.144;

1.144
date	2013.07.15.14.59.30;	author robert;	state Exp;
branches;
next	1.143;

1.143
date	2013.06.21.21.59.13;	author sthen;	state Exp;
branches;
next	1.142;

1.142
date	2013.06.21.15.15.18;	author sthen;	state Exp;
branches;
next	1.141;

1.141
date	2013.06.13.21.23.33;	author sthen;	state Exp;
branches;
next	1.140;

1.140
date	2013.06.12.06.20.20;	author robert;	state Exp;
branches;
next	1.139;

1.139
date	2013.05.31.15.38.59;	author robert;	state Exp;
branches;
next	1.138;

1.138
date	2013.05.30.18.42.18;	author robert;	state Exp;
branches;
next	1.137;

1.137
date	2013.04.20.13.28.02;	author ajacoutot;	state Exp;
branches;
next	1.136;

1.136
date	2013.04.15.17.03.49;	author ajacoutot;	state Exp;
branches;
next	1.135;

1.135
date	2013.04.14.16.39.04;	author ajacoutot;	state Exp;
branches;
next	1.134;

1.134
date	2013.04.10.18.46.43;	author robert;	state Exp;
branches;
next	1.133;

1.133
date	2013.04.10.16.14.28;	author robert;	state Exp;
branches;
next	1.132;

1.132
date	2013.04.03.08.19.10;	author robert;	state Exp;
branches;
next	1.131;

1.131
date	2013.04.02.16.16.47;	author ajacoutot;	state Exp;
branches;
next	1.130;

1.130
date	2013.03.25.08.48.33;	author robert;	state Exp;
branches;
next	1.129;

1.129
date	2013.03.22.07.46.04;	author robert;	state Exp;
branches;
next	1.128;

1.128
date	2013.03.20.16.20.04;	author robert;	state Exp;
branches;
next	1.127;

1.127
date	2013.03.15.23.08.48;	author robert;	state Exp;
branches;
next	1.126;

1.126
date	2013.03.15.08.30.33;	author robert;	state Exp;
branches;
next	1.125;

1.125
date	2013.03.11.12.17.51;	author espie;	state Exp;
branches;
next	1.124;

1.124
date	2013.03.11.11.44.41;	author espie;	state Exp;
branches;
next	1.123;

1.123
date	2013.02.07.19.13.49;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2013.02.05.06.23.25;	author robert;	state Exp;
branches;
next	1.121;

1.121
date	2013.01.20.07.46.16;	author brad;	state Exp;
branches;
next	1.120;

1.120
date	2013.01.19.12.06.51;	author sthen;	state Exp;
branches;
next	1.119;

1.119
date	2013.01.19.11.56.06;	author sthen;	state Exp;
branches;
next	1.118;

1.118
date	2013.01.18.21.38.02;	author robert;	state Exp;
branches;
next	1.117;

1.117
date	2012.12.26.12.07.51;	author sthen;	state Exp;
branches;
next	1.116;

1.116
date	2012.12.23.12.25.30;	author sthen;	state Exp;
branches;
next	1.115;

1.115
date	2012.12.15.10.23.31;	author robert;	state Exp;
branches;
next	1.114;

1.114
date	2012.12.10.08.49.17;	author robert;	state Exp;
branches;
next	1.113;

1.113
date	2012.11.28.22.28.35;	author robert;	state Exp;
branches;
next	1.112;

1.112
date	2012.11.26.07.32.30;	author robert;	state Exp;
branches;
next	1.111;

1.111
date	2012.11.25.18.57.21;	author ratchov;	state Exp;
branches;
next	1.110;

1.110
date	2012.11.07.06.59.45;	author robert;	state Exp;
branches;
next	1.109;

1.109
date	2012.10.12.17.34.17;	author robert;	state Exp;
branches;
next	1.108;

1.108
date	2012.10.12.16.46.09;	author robert;	state Exp;
branches;
next	1.107;

1.107
date	2012.10.04.07.40.25;	author landry;	state Exp;
branches;
next	1.106;

1.106
date	2012.10.01.18.12.34;	author naddy;	state Exp;
branches;
next	1.105;

1.105
date	2012.10.01.17.49.26;	author naddy;	state Exp;
branches;
next	1.104;

1.104
date	2012.09.05.14.18.28;	author robert;	state Exp;
branches;
next	1.103;

1.103
date	2012.08.26.18.47.01;	author robert;	state Exp;
branches;
next	1.102;

1.102
date	2012.08.12.15.13.57;	author fgsch;	state Exp;
branches;
next	1.101;

1.101
date	2012.08.04.14.46.24;	author ajacoutot;	state Exp;
branches;
next	1.100;

1.100
date	2012.07.12.19.35.17;	author robert;	state Exp;
branches;
next	1.99;

1.99
date	2012.07.10.12.55.25;	author robert;	state Exp;
branches;
next	1.98;

1.98
date	2012.07.10.09.49.29;	author ajacoutot;	state Exp;
branches;
next	1.97;

1.97
date	2012.07.10.09.22.34;	author robert;	state Exp;
branches;
next	1.96;

1.96
date	2012.06.15.08.32.18;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2012.05.17.08.52.59;	author robert;	state Exp;
branches;
next	1.94;

1.94
date	2012.05.05.14.03.39;	author robert;	state Exp;
branches;
next	1.93;

1.93
date	2012.04.15.13.33.24;	author robert;	state Exp;
branches;
next	1.92;

1.92
date	2012.04.15.10.40.44;	author robert;	state Exp;
branches;
next	1.91;

1.91
date	2012.04.10.19.13.46;	author robert;	state Exp;
branches;
next	1.90;

1.90
date	2012.04.08.07.56.21;	author robert;	state Exp;
branches;
next	1.89;

1.89
date	2012.04.03.13.59.35;	author robert;	state Exp;
branches;
next	1.88;

1.88
date	2012.03.24.07.36.43;	author robert;	state Exp;
branches;
next	1.87;

1.87
date	2012.03.23.13.31.25;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2012.03.20.20.52.44;	author robert;	state Exp;
branches;
next	1.85;

1.85
date	2012.03.12.10.28.30;	author robert;	state Exp;
branches;
next	1.84;

1.84
date	2012.03.08.18.56.26;	author robert;	state Exp;
branches;
next	1.83;

1.83
date	2012.03.06.18.41.54;	author robert;	state Exp;
branches;
next	1.82;

1.82
date	2012.03.05.12.57.48;	author robert;	state Exp;
branches;
next	1.81;

1.81
date	2012.02.17.10.19.50;	author robert;	state Exp;
branches;
next	1.80;

1.80
date	2012.01.24.08.31.40;	author robert;	state Exp;
branches;
next	1.79;

1.79
date	2012.01.11.16.24.07;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2012.01.06.16.27.26;	author robert;	state Exp;
branches;
next	1.77;

1.77
date	2012.01.01.09.04.13;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2011.12.14.16.58.19;	author robert;	state Exp;
branches;
next	1.75;

1.75
date	2011.12.03.23.20.53;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2011.11.17.14.53.21;	author robert;	state Exp;
branches;
next	1.73;

1.73
date	2011.11.11.22.54.53;	author robert;	state Exp;
branches;
next	1.72;

1.72
date	2011.10.27.07.59.08;	author robert;	state Exp;
branches;
next	1.71;

1.71
date	2011.10.05.16.16.44;	author robert;	state Exp;
branches;
next	1.70;

1.70
date	2011.09.19.08.55.26;	author robert;	state Exp;
branches;
next	1.69;

1.69
date	2011.09.16.12.00.06;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2011.09.08.10.35.16;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2011.09.04.20.44.47;	author robert;	state Exp;
branches;
next	1.66;

1.66
date	2011.08.31.13.50.42;	author robert;	state Exp;
branches;
next	1.65;

1.65
date	2011.08.23.09.33.03;	author robert;	state Exp;
branches;
next	1.64;

1.64
date	2011.08.16.08.17.44;	author robert;	state Exp;
branches;
next	1.63;

1.63
date	2011.07.26.20.47.55;	author robert;	state Exp;
branches;
next	1.62;

1.62
date	2011.07.05.09.16.19;	author halex;	state Exp;
branches;
next	1.61;

1.61
date	2011.06.29.06.32.32;	author robert;	state Exp;
branches;
next	1.60;

1.60
date	2011.06.28.11.34.42;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2011.06.17.04.25.06;	author canacar;	state Exp;
branches;
next	1.58;

1.58
date	2011.06.15.19.41.02;	author robert;	state Exp;
branches;
next	1.57;

1.57
date	2011.06.15.10.59.55;	author robert;	state Exp;
branches;
next	1.56;

1.56
date	2011.06.10.07.41.24;	author robert;	state Exp;
branches;
next	1.55;

1.55
date	2011.06.08.20.36.56;	author robert;	state Exp;
branches;
next	1.54;

1.54
date	2011.06.08.18.15.28;	author rpointel;	state Exp;
branches;
next	1.53;

1.53
date	2011.06.07.10.39.53;	author robert;	state Exp;
branches;
next	1.52;

1.52
date	2011.06.02.07.22.12;	author robert;	state Exp;
branches;
next	1.51;

1.51
date	2011.05.31.07.55.04;	author robert;	state Exp;
branches;
next	1.50;

1.50
date	2011.05.26.11.39.14;	author robert;	state Exp;
branches;
next	1.49;

1.49
date	2011.05.25.16.41.28;	author robert;	state Exp;
branches;
next	1.48;

1.48
date	2011.05.20.08.35.24;	author robert;	state Exp;
branches;
next	1.47;

1.47
date	2011.05.19.11.57.37;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2011.05.19.11.52.06;	author robert;	state Exp;
branches;
next	1.45;

1.45
date	2011.05.18.17.02.56;	author robert;	state Exp;
branches;
next	1.44;

1.44
date	2011.05.17.08.35.31;	author robert;	state Exp;
branches;
next	1.43;

1.43
date	2011.05.14.21.29.03;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2011.05.13.11.48.19;	author robert;	state Exp;
branches;
next	1.41;

1.41
date	2011.05.12.07.51.10;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2011.05.07.11.19.25;	author robert;	state Exp;
branches;
next	1.39;

1.39
date	2011.04.29.13.18.01;	author robert;	state Exp;
branches;
next	1.38;

1.38
date	2011.04.15.10.10.27;	author robert;	state Exp;
branches;
next	1.37;

1.37
date	2011.03.27.15.13.01;	author robert;	state Exp;
branches;
next	1.36;

1.36
date	2011.03.23.12.33.25;	author robert;	state Exp;
branches;
next	1.35;

1.35
date	2011.03.21.11.27.45;	author robert;	state Exp;
branches;
next	1.34;

1.34
date	2011.03.20.07.51.00;	author robert;	state Exp;
branches;
next	1.33;

1.33
date	2011.03.18.10.28.30;	author robert;	state Exp;
branches;
next	1.32;

1.32
date	2011.03.16.10.52.46;	author robert;	state Exp;
branches;
next	1.31;

1.31
date	2011.03.15.11.38.05;	author robert;	state Exp;
branches;
next	1.30;

1.30
date	2011.03.09.17.24.21;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2011.03.05.20.12.35;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2011.03.03.19.39.17;	author robert;	state Exp;
branches;
next	1.27;

1.27
date	2011.03.03.13.47.47;	author robert;	state Exp;
branches;
next	1.26;

1.26
date	2011.03.03.10.37.33;	author robert;	state Exp;
branches;
next	1.25;

1.25
date	2011.03.02.11.11.31;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2011.03.02.08.53.51;	author robert;	state Exp;
branches;
next	1.23;

1.23
date	2011.02.12.10.42.43;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2011.02.10.08.26.06;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2011.02.08.21.10.28;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.02.08.09.43.02;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2011.02.03.10.31.12;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2010.12.13.09.51.45;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.22.08.36.47;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.11.19.06.23;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.24.21.40.09;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.11.08.19.03;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.09.28.07.02.28;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2010.08.01.19.15.18;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2010.05.17.19.01.34;	author pvalchev;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.10.15.26.31;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.04.01.21.14.14;	author pvalchev;	state Exp;
branches;
next	1.8;

1.8
date	2010.02.03.12.32.54;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.02.03.01.05.41;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2010.01.26.15.48.21;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.12.31.12.06.35;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2009.12.20.17.27.34;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.12.19.16.56.07;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2009.12.18.23.26.34;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.12.18.22.25.56;	author pvalchev;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.12.18.22.25.56;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.332
log
@Extend PATCH_LIST with clang-* for base clang builds; this was missed out from
the previous commit.
@
text
@# $OpenBSD: Makefile,v 1.331 2017/07/20 19:36:44 robert Exp $

.include <bsd.port.arch.mk>

USE_WXNEEDED=		Yes

ONLY_FOR_ARCHS=		i386 amd64
DPB_PROPERTIES=		parallel

COMMENT=		Chromium browser

V=			59.0.3071.115
REVISION=		1

DISTNAME=		chromium-${V}
DISTFILES=		${DISTNAME}-unofficial${EXTRACT_SUFX}

CATEGORIES=		www

HOMEPAGE=		https://www.chromium.org/Home

MAINTAINER=		Robert Nagy <robert@@openbsd.org>

EXTRACT_SUFX=		.tar.xz

FLAVORS=		debug
FLAVOR?=

# BSD-like
PERMIT_PACKAGE_CDROM=	patents
PERMIT_PACKAGE_FTP =	Yes

MASTER_SITES=	https://commondatastorage.googleapis.com/chromium-browser-official/ \
		http://nerd.hu/distfiles/

MODULES=	lang/python

COMPILER =	clang gcc

MODPY_RUNDEP=	No

.if ${PROPERTIES:Mclang}    
PATCH_LIST=	patch-* clang-*                            
.endif                      

PATCHORIG=	.orig.port

# uses pledge()
WANTLIB += X11 Xext Xfixes Xrender Xss c cups dbus-1 event
WANTLIB += execinfo fontconfig freetype gconf-2
WANTLIB += gdk_pixbuf-2.0 glib-2.0 gobject-2.0
WANTLIB += m
WANTLIB += pthread
WANTLIB += xslt
WANTLIB += sndio
WANTLIB += Xcomposite
WANTLIB += ${COMPILER_LIBCXX}
WANTLIB += Xi Xtst
WANTLIB += Xdamage
WANTLIB += Xcursor Xrandr gio-2.0
WANTLIB += nspr4 nss3 nssutil3 smime3
WANTLIB += gmodule-2.0
WANTLIB += X11-xcb xcb
WANTLIB += GL expat
WANTLIB += atk-1.0 cairo gdk-3 gtk-3 pango-1.0
WANTLIB += pangocairo-1.0

RUN_DEPENDS=	devel/xdg-utils \
		devel/desktop-file-utils \
		fonts/noto/fonts \
		graphics/libexif \
		x11/gnome/libgnome-keyring \
		x11/gtk+3,-guic
BUILD_DEPENDS=	archivers/bzip2 \
		devel/gperf \
		devel/bison \
		lang/node \
		devel/yasm \
		shells/bash \
		sysutils/flock \
		sysutils/pciutils \
		x11/gnome/libgnome-keyring \
		devel/ninja \
		x11/gtk+3 \
		${MODGCC4_CPPDEP}
LIB_DEPENDS=	devel/libexecinfo \
		security/nss \
		devel/gconf2 \
		textproc/libxslt \
		x11/gtk+3 \
		print/cups,-libs \
		${MODGCC4_CPPLIBDEP}

.include <bsd.own.mk>

# Set BUILDTYPE to Debug for a debug build
.if ${FLAVOR:Mdebug}
BUILDTYPE=	Debug
.else
BUILDTYPE=	Release
.endif

ALL_TARGET=	chrome
TEST_TARGET=	base_unittests

CONFIGURE_STYLE=none # prevent python MODULE from overriding do-build

BUILDDIR=	${WRKSRC}/out/${BUILDTYPE}

# These libraries are used from the system and the build infrastructure
# removes them from the bundled third_party directory and replaces them
# with hooks to use them from the system.
GN_SYSTEM_LIBS=	libevent \
		libxslt \
		yasm

GN_ARGS=	enable_nacl=false \
		is_debug=false \
		enable_webrtc=false \
		enable_one_click_signin=true \
		use_kerberos=false \
		use_sndio=true \
		use_cups=true \
		use_experimental_allocator_shim=false \
		use_gtk3=true \
		is_clang=true \
		use_sysroot=false \
		treat_warnings_as_errors=false \
		clang_use_chrome_plugins=false \
		use_allocator=\"none\" \
		is_official_build=true \
		fieldtrial_testing_like_official_build=true \
		extra_cppflags=\"-idirafter ${LOCALBASE}/include -idirafter ${X11BASE}/include\" \
		extra_ldflags=\"-L${LOCALBASE}/lib -L${X11BASE}/lib\"

# Note: these keys are for OpenBSD use ONLY. For your own distribution,
# please get your own set of keys. It's free!
GN_ARGS+=	google_api_key=\"AIzaSyA015yecfJyWi8UQpneQVrNzIKlxjv4MhI\" \
		google_default_client_id=\"451220141585.apps.googleusercontent.com\" \
		google_default_client_secret=\"nQcDyaBvDyCeDrsRqKIWSHJn\" \
		ffmpeg_branding=\"Chrome\" \
		proprietary_codecs=true

.if ${FLAVOR:Mdebug}
GN_ARGS+=	remove_webcore_debug_symbols=true
MAKE_ENV+=	V=1
.endif

pre-configure:
	@@ln -sf ${MODPY_BIN} ${WRKDIR}/bin/python
.for _arch in x64 ia32
.  for _dir in avcodec avformat avutil
	@@cp -pR ${WRKSRC}/third_party/ffmpeg/chromium/config/Chrome/linux/${_arch}/lib${_dir} \
		${WRKSRC}/third_party/ffmpeg/chromium/config/Chrome/openbsd/${_arch}/lib${_dir}
.  endfor
.endfor
	@@mkdir -p ${WRKSRC}/media/audio/sndio ${WRKSRC}/media/audio/openbsd
	@@cp ${FILESDIR}/sndio_{out,in}put.{cc,h} ${WRKSRC}/media/audio/sndio
	@@cp ${FILESDIR}/audio_manager_openbsd.{cc,h} ${WRKSRC}/media/audio/openbsd
	@@mkdir -p ${WRKSRC}/third_party/node/openbsd/node-openbsd/bin
	@@ln -sf ${TRUEPREFIX}/bin/node ${WRKSRC}/third_party/node/openbsd/node-openbsd/bin/node

# Configuration consists of three steps:
# 1. replace the specified bundled libraries with hooks to use the system libs
# 2. bootstrap gn, the tool to generate ninja files
# 3. run gn with the appropriate configuration arguments
do-configure:
	@@cd ${WRKSRC} && env -i ${MAKE_ENV} build/linux/unbundle/replace_gn_files.py \
		--system-libraries ${GN_SYSTEM_LIBS}
	@@cd ${WRKSRC}/tools/gn && env -i ${MAKE_ENV} LDFLAGS=-L${LOCALBASE}/lib ${MODPY_BIN} bootstrap/bootstrap.py \
		--no-clean -s --gn-gen-args "${GN_ARGS}"
	@@cd ${WRKSRC} && env -i ${CONFIGURE_ENV} ${WRKSRC}/out/${BUILDTYPE}/gn \
		gen --args="${GN_ARGS}" out/Release

do-build:
	@@cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
		-j ${MAKE_JOBS} -C out/${BUILDTYPE} ${ALL_TARGET}

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/chrome
	${INSTALL_PROGRAM} ${BUILDDIR}/chrome ${PREFIX}/chrome
	${SUBST_PROGRAM} ${FILESDIR}/chrome ${PREFIX}/bin/chrome
	${INSTALL_MAN} ${BUILDDIR}/chrome.1 ${PREFIX}/man/man1

	${INSTALL_DATA} ${BUILDDIR}/*.pak ${PREFIX}/chrome

	${INSTALL_DATA_DIR} ${PREFIX}/chrome/locales
	${INSTALL_DATA} ${BUILDDIR}/locales/* ${PREFIX}/chrome/locales
	${INSTALL_DATA} ${BUILDDIR}/*.png ${PREFIX}/chrome
	${INSTALL_DATA} ${BUILDDIR}/*.service ${PREFIX}/chrome
	${INSTALL_DATA_DIR} ${PREFIX}/chrome/resources
	@@cp -Rp ${BUILDDIR}/resources/* ${PREFIX}/chrome/resources
	@@chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/chrome/resources
.for f in protoc icudtl.dat mksnapshot natives_blob.bin snapshot_blob.bin
	${INSTALL_DATA} ${BUILDDIR}/${f} ${PREFIX}/chrome
.endfor
.for s in 22 24 48 64 128 256
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/${s}x${s}/apps
	${INSTALL_DATA} ${WRKSRC}/chrome/app/theme/chromium/product_logo_${s}.png \
		${PREFIX}/share/icons/hicolor/${s}x${s}/apps/chrome.png
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${FILESDIR}/chromium-browser.desktop \
		${PREFIX}/share/applications/chromium-browser.desktop

.include <bsd.port.mk>
@


1.331
log
@make chromium build with base clang by applying the following changes:
- use the proper compiler and linker in ${WRKDIR}/bin
- casting to nullptr where required (diff from espie@@)
- link the character_data_generator with c++abi twice until a linker
  bug is figured out
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.330 2017/07/16 19:19:03 espie Exp $
d41 4
@


1.330
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.329 2017/07/14 20:39:29 robert Exp $
d11 1
a11 1
REVISION=		0
@


1.329
log
@Backport a fix from chromium git so that DPI settings are honored.

https://bugs.chromium.org/p/chromium/issues/detail?id=732440
https://chromium.googlesource.com/chromium/src/+/b50cab37a165f1f11d9a046d7f3367e4a563a73f
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.328 2017/06/29 19:00:28 robert Exp $
d51 1
a51 1
WANTLIB += ${LIBECXX}
@


1.328
log
@update to 59.0.3071.115;

use a hand-crafted tarball this time because google failed to create a
a working one :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.327 2017/06/26 17:16:30 robert Exp $
d11 1
@


1.327
log
@do not call malloc and sysctl twice that was introduced by a bad copy & paste

diff from Caspar Schutijser
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.326 2017/06/25 21:53:56 robert Exp $
d10 1
a10 2
V=			59.0.3071.109
REVISION=		0
d13 1
a13 1
DISTFILES=		${DISTNAME}${EXTRACT_SUFX}
d30 2
a31 2
MASTER_SITES=	https://commondatastorage.googleapis.com/chromium-browser-official/
MASTER_SITES0=	http://nerd.hu/distfiles/
@


1.326
log
@update to 59.0.3071.109
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.325 2017/06/03 15:01:46 espie Exp $
d11 1
@


1.325
log
@allows base clang to pass the bootstrap step, even though there are lots
of issues later
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.324 2017/05/31 08:08:17 espie Exp $
d10 1
a10 1
V=			58.0.3029.110
d42 6
a47 6
WANTLIB += X11 Xext Xfixes Xrender Xss c cairo cups dbus-1 event
WANTLIB += execinfo expat fontconfig freetype gconf-2 gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 glib-2.0 gobject-2.0 gtk-x11-2.0
WANTLIB += m pango-1.0 pangocairo-1.0
WANTLIB += png pthread
WANTLIB += xml2 xslt
d55 1
a55 1
WANTLIB += atk-1.0 gmodule-2.0
d57 3
d83 1
a83 1
		x11/gtk+2 \
a106 1
		libxml \
d118 1
@


1.324
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.323 2017/05/26 09:52:16 espie Exp $
d160 1
a160 1
	@@cd ${WRKSRC}/tools/gn && env -i ${MAKE_ENV} ${MODPY_BIN} bootstrap/bootstrap.py \
@


1.323
log
@use the MODGCC4* variables instead of hardcoding dependencies.
convert to WANT_CXX even though it might not work yet.
bump the ports that didn't even the full spec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.322 2017/05/11 14:34:53 robert Exp $
d35 1
a35 1
WANT_CXX =	base clang gcc
@


1.322
log
@update to 58.0.3029.110
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.321 2017/05/04 19:04:23 robert Exp $
d33 1
a33 1
MODULES=	lang/clang lang/python gcc4
d35 1
a35 2
MODCLANG_ARCHS=	*
MODCLANG_LANGS=	c++
d50 1
a50 1
WANTLIB += estdc++>=17
d75 1
a75 1
		lang/gcc/4.9,-c++>=4.9,<4.10
d82 1
a82 1
		lang/gcc/4.9,-libs>=4.9,<4.10
@


1.321
log
@update to 58.0.3029.96
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.320 2017/04/28 14:21:00 robert Exp $
d10 1
a10 1
V=			58.0.3029.96
@


1.320
log
@update to 58.0.3029.81
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.319 2017/03/30 17:54:24 robert Exp $
d10 1
a10 1
V=			58.0.3029.81
@


1.319
log
@update to 57.0.2987.133
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.318 2017/03/17 10:17:29 robert Exp $
d10 1
a10 1
V=			57.0.2987.133
d68 1
d116 1
d122 1
a122 1
		is_official_build=false \
d151 2
@


1.318
log
@update to 57.0.2987.110
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.317 2017/03/14 12:18:53 robert Exp $
d10 1
a10 1
V=			57.0.2987.110
d120 2
@


1.317
log
@update to 57.0.2987.98
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.316 2017/02/23 17:30:49 robert Exp $
d10 1
a10 1
V=			57.0.2987.98
@


1.316
log
@use more linux specific code for font handling and gpu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.315 2017/02/03 09:47:16 robert Exp $
d10 1
a10 2
V=			56.0.2924.87
REVISION=		0
d175 1
@


1.315
log
@update to 56.0.2924.87
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.314 2017/01/26 17:08:25 robert Exp $
d11 1
@


1.314
log
@update to 56.0.2924.76
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.313 2016/12/14 08:35:49 robert Exp $
d10 1
a10 1
V=			56.0.2924.76
@


1.313
log
@update to 55.0.2883.87
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.312 2016/12/10 15:35:25 robert Exp $
d10 2
a11 1
V=			55.0.2883.87
d57 1
d74 1
d139 4
a142 2
	@@cp -pR ${WRKSRC}/third_party/ffmpeg/chromium/config/Chrome/linux/${_arch}/libavutil \
		${WRKSRC}/third_party/ffmpeg/chromium/config/Chrome/openbsd/${_arch}/libavutil
@


1.312
log
@update to 55.0.2883.75; add lpr support to the system dialog while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.311 2016/11/17 16:59:35 robert Exp $
d10 1
a10 1
V=			55.0.2883.75
@


1.311
log
@update to 54.0.2840.100
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.310 2016/11/02 18:21:14 robert Exp $
d10 1
a10 1
V=			54.0.2840.100
@


1.310
log
@update to 54.0.2840.87
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.309 2016/10/26 06:22:07 robert Exp $
d10 1
a10 1
V=			54.0.2840.87
@


1.309
log
@update to 54.0.2840.71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.308 2016/09/30 16:04:13 robert Exp $
d10 1
a10 1
V=			54.0.2840.71
@


1.308
log
@update to 53.0.2785.143
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.307 2016/09/24 16:24:41 robert Exp $
d10 1
a10 1
V=			53.0.2785.143
@


1.307
log
@update to 53.0.2785.116
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.306 2016/09/08 13:00:34 robert Exp $
d10 1
a10 1
V=			53.0.2785.116
@


1.306
log
@update to 53.0.2785.101
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.305 2016/09/01 16:28:11 robert Exp $
d10 1
a10 1
V=			53.0.2785.101
@


1.305
log
@update to 53.0.2785.89
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.304 2016/08/25 20:00:07 sthen Exp $
d10 1
a10 1
V=			53.0.2785.89
@


1.304
log
@use USE_WXNEEDED for chromium/iridium now that it works with gcc4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.303 2016/08/19 19:58:47 robert Exp $
d10 1
a10 1
V=			52.0.2743.116
a12 1
REVISION=		2
a55 1
WANTLIB += pthread-stubs
d107 1
a107 1
		enable_webrtc=true \
@


1.303
log
@remove some unnecessary patches
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.302 2016/08/17 11:06:50 robert Exp $
d13 1
a13 1
REVISION=		1
d120 1
a120 1
		extra_ldflags=\"-L${LOCALBASE}/lib -L${X11BASE}/lib -Wl,-z,wxneeded\"
@


1.302
log
@Move chromium to the new build system (gn - generate ninja)

This commit moves the chromium port to use gn to generate ninja files
which will hopefully resolve the random build errors. Gyp is dead so
this move has to be done anyway.

Also change the way how we handle openbsd. Let's assume we are running
on linux and only handle !linux cases where needed. This also ensures
that a change on linux will for sure end up in our builds as well.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.301 2016/08/09 04:28:13 robert Exp $
d11 1
a11 1
REVISION=		0
@


1.301
log
@add another pre-build target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.300 2016/08/08 16:20:39 robert Exp $
d11 1
a30 3
#PATCHFILES+=		issue1236863006_160001.diff:0
#PATCH_DIST_STRIP=	-p1

d55 1
d90 1
a93 5
CONFIGURE_ENV=	CPPFLAGS="-idirafter ${LOCALBASE}/include -idirafter ${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib -Wl,-z,wxneeded" \
		GYP_GENERATORS=ninja

ALL_TARGET=	chrome
d97 22
a118 30
GYP_DEFS=	-Duse_system_bzip2=1 \
		-Duse_system_libevent=1 \
		-Duse_system_libjpeg=0 \
		-Duse_system_libpng=1 \
		-Duse_system_libusb=0 \
		-Duse_system_libvpx=0 \
		-Duse_system_libxml=1 \
		-Duse_system_sqlite=0 \
		-Duse_system_yasm=1 \
		-Duse_system_zlib=0 \
		-Duse_system_ssl=0 \
		-Duse_system_icu=0 \
		-Ddisable_nacl=1 \
		-Dlinux_breakpad=0 \
		-Duse_allocator=none \
		-Dlinux_strip_binary=0 \
		-Dlinux_use_heapchecker=0 \
		-Denable_webrtc=1 \
		-Denable_one_click_signin=1 \
		-Duse_kerberos=0 \
		-Duse_sndio=1 \
		-Duse_aura=1 \
		-Dclang=1 \
		-Dclang_use_chrome_plugins=0 \
		-Dwerror= \
		-Dno_gc_sections=1 \
		-Ddisable_fatal_linker_warnings=1 \
		-Dv8_use_external_startup_data=0 \
		-Dlibraries_for_target='-lestdc++' \
		-DOS=openbsd
d122 5
a126 13
GYP_DEFS+=	-Dgoogle_api_key='AIzaSyA015yecfJyWi8UQpneQVrNzIKlxjv4MhI' \
		-Dgoogle_default_client_id='451220141585.apps.googleusercontent.com' \
		-Dgoogle_default_client_secret='nQcDyaBvDyCeDrsRqKIWSHJn' \
		-Dffmpeg_branding=Chrome \
		-Dproprietary_codecs=1

.if ${MACHINE_ARCH} == "i386"
CARCH=		i386
.elif ${MACHINE_ARCH} == "amd64"
CARCH=		x86_64
.endif

REL!=		uname -r
d129 1
a129 1
GYP_DEFS+=	-Dremove_webcore_debug_symbols=1
a132 2
MODPY_ADJ_FILES=build/linux/unbundle/replace_gyp_files.py

a141 2
	# XXX Create a missing html file to avoid a build failure (unused in the actual package)
	@@touch ${WRKSRC}/chrome/test/data/webui/i18n_process_css_test.html
d143 4
a146 1
# gyp_chromium generates all the Makefiles from gyp
d148 6
a153 4
	cd ${WRKSRC} && \
		build/linux/unbundle/replace_gyp_files.py ${GYP_DEFS} && \
		env -i ${CONFIGURE_ENV} ${MODPY_BIN} build/gyp_chromium \
		${GYP_DEFS} "--depth=${WRKSRC}"
a155 12
	# Build all the resources as the first step to avoid build failures
	# due to internal dependency issues.
	@@cd ${WRKSRC}/out/${BUILDTYPE} && \
	for _r in generate_version_info cloud_policy_proto net_interfaces suggestions \
	cacheinvalidation cacheinvalidation_proto_cpp gfx_vector_icons \
	data_reduction_proxy_proto cloud_policy_code_generate common_constants \
	profile_reset_report_proto autofill_server_proto ipc_mojo ax_gen extensions_api \
	$$(ninja -t targets | grep -E '(bindings_mojom|mojo_bindings|resources): phony' | \
		grep -v test | cut -d ':' -f1); do \
		cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
			-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
	done
a167 1
	${INSTALL_DATA_DIR} ${PREFIX}/chrome/pseudo_locales
a168 1
	${INSTALL_DATA} ${BUILDDIR}/pseudo_locales/* ${PREFIX}/chrome/pseudo_locales
d173 1
a173 1
.for f in protoc icudtl.dat mksnapshot
@


1.300
log
@add ax_gen into prebuild
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.299 2016/08/04 15:43:00 robert Exp $
d182 1
a182 1
	profile_reset_report_proto autofill_server_proto ipc_mojo ax_gen \
@


1.299
log
@update to 52.0.2743.116
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.298 2016/07/31 13:11:44 robert Exp $
d182 1
a182 1
	profile_reset_report_proto autofill_server_proto ipc_mojo \
@


1.298
log
@update to 52.0.2743.82
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.297 2016/07/12 06:05:32 robert Exp $
d8 1
a8 1
V=			52.0.2743.82
@


1.297
log
@add the required recvfd pledges
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.296 2016/07/09 18:39:18 robert Exp $
d8 1
a8 1
V=			51.0.2704.106
a10 1
REVISION=		0
@


1.296
log
@add another pre-build target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.295 2016/06/24 12:58:09 robert Exp $
d11 1
@


1.295
log
@update to 51.0.2704.106
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.294 2016/06/17 10:56:28 robert Exp $
d182 1
a182 1
	profile_reset_report_proto autofill_server_proto \
@


1.294
log
@update to 51.0.2704.103
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.293 2016/06/10 05:15:55 robert Exp $
d8 1
a8 1
V=			51.0.2704.103
@


1.293
log
@update to 51.0.2704.84
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.292 2016/06/02 21:03:38 sthen Exp $
d8 1
a8 1
V=			51.0.2704.84
@


1.292
log
@since the chrome wrapper script is already doing some checks and warning
the user if they fail, also add a check for wxallowed on the mountpoint,
a message giving a clue is better than "syntax error: `)' unexpected"
ok robert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.291 2016/06/02 14:13:13 robert Exp $
d8 1
a8 2
V=			51.0.2704.79
REVISION=		0
@


1.291
log
@update to 51.0.2704.79
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.290 2016/06/02 10:47:47 sthen Exp $
d9 1
@


1.290
log
@Link chromium with -Wl,-z,wxneeded. This has two effects:

1. it will disable the kernel logs about W^X violations.

2. the binary will not run at all unless the filesystem holding
/usr/local has the "wxallowed" flag set (in /etc/fstab), rather
than starting but having tabs crash all the time.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.289 2016/05/28 16:37:10 robert Exp $
d8 1
a8 2
V=			51.0.2704.63
REVISION=		0
@


1.289
log
@add more mojom prebuild targets
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.288 2016/05/27 06:28:20 robert Exp $
d9 1
d96 1
a96 1
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
@


1.288
log
@update to 51.0.2704.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.287 2016/05/20 15:36:05 robert Exp $
d183 2
a184 1
	$$(ninja -t targets | grep -E '(mojo_bindings|resources): phony' | grep -v test | cut -d ':' -f1); do \
@


1.287
log
@pre-build the autofill_server_proto target as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.286 2016/05/12 15:26:01 robert Exp $
d8 1
a8 1
V=			50.0.2661.102
d199 1
d201 1
d206 1
a206 1
.for f in libexif.so protoc icudtl.dat mksnapshot
@


1.286
log
@update to 50.0.2661.102
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.285 2016/04/26 14:22:24 robert Exp $
d182 1
a182 1
	profile_reset_report_proto \
@


1.285
log
@enable webrtc support and fix video recording. the only thing
that's missing from working video conferencing is the sndio
input support, which is being worked on
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.284 2016/04/25 17:12:53 robert Exp $
d8 1
a8 2
V=			50.0.2661.86
REVISION=		1
@


1.284
log
@cache the amount of physical memory in the UtilityProcess as well before
the pledge(2) call; issue found by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.283 2016/04/21 13:52:06 robert Exp $
d9 1
a9 1
REVISION=		0
d120 1
a120 1
		-Denable_webrtc=0 \
d164 1
a164 1
	@@cp ${FILESDIR}/sndio_output.{cc,h} ${WRKSRC}/media/audio/sndio
@


1.283
log
@update to 50.0.2661.86
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.282 2016/04/16 19:08:45 robert Exp $
d9 1
@


1.282
log
@update to 50.0.2661.75
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.281 2016/04/09 13:33:13 robert Exp $
d8 1
a8 1
V=			50.0.2661.75
@


1.281
log
@update to 49.0.2623.112
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.280 2016/03/29 17:37:38 robert Exp $
d8 1
a8 1
V=			49.0.2623.112
@


1.280
log
@update to 49.0.2623.110
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.279 2016/03/26 10:49:50 robert Exp $
d8 1
a8 1
V=			49.0.2623.110
@


1.279
log
@update to 49.0.2623.108
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.278 2016/03/09 14:21:23 naddy Exp $
d8 1
a8 1
V=			49.0.2623.108
d182 1
@


1.278
log
@oops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.277 2016/03/09 13:18:10 naddy Exp $
d8 1
a8 1
V=			49.0.2623.75
a9 1
REVISION=		0
@


1.277
log
@droid-fonts -> noto-fonts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.276 2016/03/08 17:29:24 robert Exp $
d61 1
a61 1
		fonts/noto-fonts \
@


1.276
log
@add common_constants to the pre-build list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.275 2016/03/06 10:51:13 robert Exp $
d10 1
d61 1
a61 1
		fonts/droid-fonts \
@


1.275
log
@update to 49.0.2623.75
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.273 2016/02/20 10:08:51 robert Exp $
d181 1
a181 1
	data_reduction_proxy_proto cloud_policy_code_generate \
@


1.274
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d8 1
a8 1
V=			48.0.2564.116
a10 1
REVISION=		0
a147 1
MAKE_ENV+=	CPATH=${LOCALBASE}/include/c++/${MODGCC4_VERSION}.3/bits/:${LOCALBASE}/include/c++/${MODGCC4_VERSION}.3/:${LOCALBASE}/include/c++/${MODGCC4_VERSION}.3/${CARCH}-unknown-openbsd${REL}/
@


1.273
log
@security update to 48.0.2564.116; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.272 2016/02/17 13:33:29 robert Exp $
d11 1
@


1.272
log
@security update to 48.0.2564.109; ok sthen@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.271 2016/02/06 18:02:18 robert Exp $
d8 1
a8 1
V=			48.0.2564.109
@


1.271
log
@update to 48.0.2564.103
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.270 2016/01/31 20:45:29 robert Exp $
d8 1
a8 1
V=			48.0.2564.103
@


1.270
log
@since we are not using the Zygote model, make sure to initialize the
sandbox ipc channel for the renderer in order to get proper font
handling outside of the sandbox if necessary
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.269 2016/01/29 16:56:10 robert Exp $
d8 1
a8 2
V=			48.0.2564.97
REVISION=		1
d182 1
a182 1
	data_reduction_proxy_proto \
@


1.269
log
@Initialize the FcInit library early just like it is being done on Linux
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.268 2016/01/28 21:36:00 robert Exp $
d9 1
a9 1
REVISION=		0
@


1.268
log
@update to 48.0.2564.97
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.267 2016/01/28 12:27:20 sthen Exp $
d9 1
@


1.267
log
@prebuild a missing dep that I ran into with chromium on a bulk build; ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.266 2016/01/27 20:05:23 robert Exp $
d8 1
a8 2
V=			48.0.2564.82
REVISION=		1
@


1.266
log
@move to libjpeg_turbo from using the system libjpeg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.265 2016/01/23 20:43:27 robert Exp $
d183 1
@


1.265
log
@use the ipc channel to replace fonts inside the sandbox that are not
available on the system, this fixes a lot of pdf viewer issues where
the text was missing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.264 2016/01/23 18:49:30 robert Exp $
d9 1
a9 1
REVISION=		0
d52 1
a52 1
WANTLIB += stdc++ estdc++>=17
d56 1
a56 1
WANTLIB += jpeg nspr4 nss3 nssutil3 smime3
d105 1
a105 1
		-Duse_system_libjpeg=1 \
d181 2
a182 1
	for _r in cloud_policy_proto net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp gfx_vector_icons \
@


1.264
log
@update to 48.0.2564.82
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.263 2016/01/17 17:29:12 sthen Exp $
d9 1
@


1.263
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.262 2016/01/15 19:57:24 sthen Exp $
d8 1
a8 2
V=			47.0.2526.111
REVISION=		0
@


1.262
log
@add an easily-greppable marker for ports known to use pledge().
it's not so important while they're only in patches in the ports tree,
but for any which get upstreamed it saves a ~100GB grep to find them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.261 2016/01/14 13:21:06 robert Exp $
d9 1
d52 1
a52 1
WANTLIB += estdc++>=17
@


1.261
log
@update to 47.0.2526.111
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.260 2016/01/08 15:18:09 robert Exp $
d42 1
@


1.260
log
@remove rpath from the GPU process's pledge call now that mesa has been taken care of
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.259 2016/01/06 21:46:44 robert Exp $
d8 1
a8 1
V=			47.0.2526.106
a10 1
REVISION=		1
d179 1
a179 1
	for _r in net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp gfx_vector_icons \
@


1.259
log
@pledge(2) the chromium processes;

The renderer, gpu, plugin and utility processes are now using pledge(2)
Unfortunately the GPU process only requires an rpath pledge because of
Mesa trying to parse two configuration files, /etc/drirc and ${HOME}/.drirc
So currently the GPU process will use an rpath pledge in the next
week or so so that people can test, but this situation has to be
resolved because it is not acceptable that a mostly unused configuration
file is being parsed from a library and that stops us from using less
pledges and thus disallowing the GPU process to have read access
to the filsystem ... like your ssh keys.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.258 2015/12/28 09:53:27 robert Exp $
d11 1
a11 1
REVISION=		0
@


1.258
log
@add mojo bindings to the pre-build targets
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.257 2015/12/16 16:14:13 robert Exp $
d11 1
@


1.257
log
@update to 47.0.2526.106
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.256 2015/12/12 20:20:01 robert Exp $
d180 1
a180 1
	$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
@


1.256
log
@remove unused patches up and enable some more functionalty like HiDPI support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.255 2015/12/12 09:23:30 robert Exp $
d8 1
a8 1
V=			47.0.2526.80
a10 2

REVISION=		0
@


1.255
log
@re-enable pre-build hack for resources
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.254 2015/12/09 15:01:21 robert Exp $
d12 2
d195 2
a196 3
.for p in chrome_100_percent content_resources keyboard_resources resources
	${INSTALL_DATA} ${BUILDDIR}/${p}.pak ${PREFIX}/chrome
.endfor
@


1.254
log
@update to 47.0.2526.80
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.253 2015/12/05 16:13:32 robert Exp $
d178 6
a183 6
	#@@cd ${WRKSRC}/out/${BUILDTYPE} && \
	#for _r in net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp gfx_vector_icons \
	#$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
	#	cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
	#		-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
	#done
@


1.253
log
@update to 47.0.2526.73
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.252 2015/11/20 11:24:04 sthen Exp $
d8 1
a8 1
V=			47.0.2526.73
@


1.252
log
@remove devel/flex dep, these are ok with base flex
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.251 2015/11/14 22:47:59 sthen Exp $
d8 1
a8 1
V=			46.0.2490.86
d162 1
a162 1
	@@mkdir -p ${WRKSRC}/media/audio/sndio
d164 1
d178 6
a183 6
	@@cd ${WRKSRC}/out/${BUILDTYPE} && \
	for _r in net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp gfx_vector_icons \
	$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
		cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
			-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
	done
@


1.251
log
@pre-build gfx_vector_icons in chromium+iridium, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2015/11/11 18:37:05 robert Exp $
a65 1
		devel/flex \
@


1.250
log
@update to 46.0.2490.86
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2015/10/24 09:10:35 robert Exp $
d179 1
a179 1
	for _r in net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp \
@


1.249
log
@update to 46.0.2490.80
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2015/10/19 11:36:59 robert Exp $
d8 1
a8 1
V=			46.0.2490.80
@


1.248
log
@add fonts/droid-fonts as a run dependency to ease displaying
some special Japanese, Russian and other characters by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2015/10/14 16:42:07 robert Exp $
d8 1
a8 1
V=			46.0.2490.71
a10 1
REVISION=		0
d147 2
a148 1
MAKE_ENV+=	CPATH=${LOCALBASE}/include/c++/4.9.3/bits/:${LOCALBASE}/include/c++/4.9.3/:${LOCALBASE}/include/c++/4.9.3/${CARCH}-unknown-openbsd5.8/
@


1.247
log
@update to 46.0.2490.71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2015/09/25 21:09:19 robert Exp $
d11 1
d60 1
@


1.246
log
@re-enable the pre-build targets which i accidentally disabled in the previous
commit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.245 2015/09/25 13:43:04 robert Exp $
d8 1
a8 1
V=			45.0.2454.101
a10 1
REVISION=		0
d30 2
a31 2
PATCHFILES+=		issue1236863006_160001.diff:0
PATCH_DIST_STRIP=	-p1
d46 1
a46 1
WANTLIB += png pthread speex
d54 1
a54 1
WANTLIB += jpeg nspr4 nss3 nssutil3 plc4 smime3
a77 1
		audio/speex \
a107 1
		-Duse_system_speex=1 \
d163 2
@


1.245
log
@make v8 pre-allocate less memory on OpenBSD/amd64 to avoid v8 running out
of memory
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2015/09/25 13:08:54 robert Exp $
d177 6
a182 6
#	@@cd ${WRKSRC}/out/${BUILDTYPE} && \
#	for _r in net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp \
#	$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
#		cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
#			-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
#	done
@


1.244
log
@update to 45.0.2454.101
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.243 2015/09/22 16:42:21 robert Exp $
d11 1
@


1.243
log
@update to 45.0.2454.99
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2015/09/20 18:32:18 robert Exp $
d8 1
a8 1
V=			45.0.2454.99
d176 6
a181 6
	@@cd ${WRKSRC}/out/${BUILDTYPE} && \
	for _r in net_interfaces suggestions cacheinvalidation cacheinvalidation_proto_cpp \
	$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
		cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
			-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
	done
@


1.242
log
@sync the heap handling code of v8 with linux and regen patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2015/09/19 10:03:26 robert Exp $
d8 1
a8 1
V=			45.0.2454.93
a10 1
REVISION=		0
@


1.241
log
@fix typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2015/09/19 09:52:36 robert Exp $
d11 1
@


1.240
log
@add cacheinvalidation and cacheinvalidation_proto_cpp to the pre-build targets
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2015/09/17 18:59:44 robert Exp $
d177 1
a177 1
	for _r in net_interfaces suggestions cacheinvalidation and cacheinvalidation_proto_cpp \
@


1.239
log
@update to 45.0.2454.93
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2015/09/07 14:29:38 robert Exp $
d176 6
a181 6
#	@@cd ${WRKSRC}/out/${BUILDTYPE} && \
#	for _r in net_interfaces suggestions \
#	$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
#		cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
#			-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
#	done
@


1.238
log
@fix build by applying a patch from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.237 2015/09/05 16:06:50 robert Exp $
d8 1
a8 1
V=			45.0.2454.85
d176 6
a181 6
	@@cd ${WRKSRC}/out/${BUILDTYPE} && \
	for _r in net_interfaces suggestions \
	$$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
		cd ${WRKSRC} && env -i ${MAKE_ENV} ninja \
			-j ${MAKE_JOBS} -C out/${BUILDTYPE} $${_r}; \
	done
@


1.237
log
@update to 45.0.2454.85
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.236 2015/08/27 14:16:50 robert Exp $
d28 4
@


1.236
log
@detect *BSD in the javascript code of webui
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2015/08/21 12:58:15 robert Exp $
d8 1
a8 1
V=			44.0.2403.157
a10 1
REVISION=		0
d29 1
a29 1
MODULES=	lang/clang lang/python
d46 1
a46 1
WANTLIB += stdc++
d66 3
a68 2
		x11/gnome/libgnome-keyring
BUILD_DEPENDS+=	devel/ninja
d75 2
a76 1
		print/cups,-libs
d127 1
d137 8
@


1.235
log
@update to 44.0.2403.157
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2015/08/20 08:04:33 robert Exp $
d11 1
@


1.234
log
@update to 44.0.2403.156
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2015/08/16 20:42:46 robert Exp $
d8 1
a8 1
V=			44.0.2403.156
@


1.233
log
@drop the dependency on libusb in favor of the internal libusb due to
extra functionality implemented in the bundled version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2015/08/12 05:55:16 robert Exp $
d8 1
a8 1
V=			44.0.2403.155
a10 1
REVISION=		0
@


1.232
log
@update to 44.0.2403.155
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2015/08/02 16:14:06 robert Exp $
d11 1
d45 1
a45 1
WANTLIB += usb-1.0 sndio
a69 1
		devel/libusb1 \
d101 1
a101 1
		-Duse_system_libusb=1 \
@


1.231
log
@add net_interfaces to the list of pre-built targets
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2015/08/01 11:07:29 robert Exp $
d8 1
a8 1
V=			44.0.2403.125
@


1.230
log
@add the suggestions target to the list of pre-built targets
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2015/07/29 11:36:38 robert Exp $
d163 2
a164 1
	for _r in suggestions $$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
@


1.229
log
@update to 44.0.2403.125;
add a hack to build the generated resources to avoid random build failures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2015/07/28 11:30:25 robert Exp $
d163 1
a163 1
	for _r in $$(ninja -t targets | grep 'resources: phony' | cut -d ':' -f1); do \
@


1.228
log
@add a missing patch and remove some bad practice shell code from the Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2015/07/25 12:59:15 robert Exp $
d8 1
a8 1
V=			44.0.2403.107
a10 1
REVISION=		0
d160 7
@


1.227
log
@update to 44.0.2403.107
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2015/07/24 07:29:52 robert Exp $
d11 1
d179 2
a180 2
.for f in libexif.so libffmpegsumo.so libpdf.so protoc icudtl.dat mksnapshot
	if [ -f ${BUILDDIR}/${f} ]; then ${INSTALL_DATA} ${BUILDDIR}/${f} ${PREFIX}/chrome; fi
@


1.226
log
@fix a patch for llvm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2015/07/23 13:44:04 robert Exp $
d8 1
a8 1
V=			44.0.2403.89
a10 1
REVISION=		0
@


1.225
log
@update to 44.0.2403.89
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2015/07/15 08:06:42 robert Exp $
d11 1
@


1.224
log
@update to 43.0.2357.134
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2015/07/12 14:44:04 robert Exp $
d8 1
a8 1
V=			43.0.2357.134
@


1.223
log
@allow chromium to restart itself when necessary after asking the user
for confirmation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2015/07/08 15:26:50 robert Exp $
d8 1
a8 1
V=			43.0.2357.132
a10 1
REVISION=		0
@


1.222
log
@update to 43.0.2357.132
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2015/06/23 11:51:53 robert Exp $
d11 1
@


1.221
log
@update to 43.0.2357.130
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2015/06/12 07:39:16 robert Exp $
d8 1
a8 1
V=			43.0.2357.130
@


1.220
log
@update to 43.0.2357.125
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2015/06/11 10:55:18 robert Exp $
d8 1
a8 1
V=			43.0.2357.125
@


1.219
log
@update to 43.0.2357.124
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2015/05/26 12:49:49 robert Exp $
d8 1
a8 1
V=			43.0.2357.124
@


1.218
log
@remove unused MASTER_SITE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2015/05/26 06:18:29 robert Exp $
d8 1
a8 1
V=			43.0.2357.81
@


1.217
log
@update to 43.0.2357.81
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2015/05/24 15:51:52 robert Exp $
a27 1
MASTER_SITES0=	http://nerd.hu/distfiles/
@


1.216
log
@update to 43.0.2357.65
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2015/05/19 07:27:17 dcoppa Exp $
d8 1
a8 1
V=			43.0.2357.65
@


1.215
log
@
Zap bogus '${SUBST_CMD}' line
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2015/05/15 10:47:55 dcoppa Exp $
d8 1
a8 1
V=			42.0.2311.135
a9 1
REVISION=		0
d52 1
a140 13

BB_VER=		20150502
.if ${MACHINE_ARCH} == "i386" || ${FLAVOR:Mdebug}
GYP_DEFS+=	-Dlinux_use_bundled_binutils=1
DISTFILES+=	binutils-2.17-${MACHINE_ARCH}-${BB_VER}.tar.gz:0

pre-patch:
	@@mkdir -p ${WRKSRC}/third_party/binutils/Linux_x64/Release
	@@ln -fs ${WRKDIR}/binutils-2.17-${MACHINE_ARCH}-${BB_VER}/bin \
		${WRKSRC}/third_party/binutils/Linux_x64/Release/bin
.endif
SUPDISTFILES+=	binutils-2.17-amd64-${BB_VER}.tar.gz:0 \
		binutils-2.17-i386-${BB_VER}.tar.gz:0
@


1.214
log
@
Our nm doesn't support neither '-D' nor '-f', hence some non-critical
errors occur during chromium and iridium builds:

---8<---

[2581/10537] CXX obj/components/policy/core/common/cloud/policy_component_common.cloud_external_data_manager.o
[2582/10537] CXX obj/components/policy/core/common/cloud/policy_component_common.external_policy_data_updater.o
[2583/10537] CXX obj/components/policy/core/common/cloud/policy_component_common.component_cloud_policy_service.o
[2584/10537] SOLINK(module) libffmpegsumo.so
nm: unknown option -- D
usage: nm [-aCegnoprsuw] [file ...]

[8618/16362] STAMP obj/extensions/extensions_browser.actions_depends.stamp
[8619/16362] AR obj/extensions/libextensions_browser.a
nm: unknown option -- D
usage: nm [-aCegnoprsuw] [file ...]

---8<---

Fix these errors by using llvm-nm instead.

While here, also fix a typo into iridium's pkg/DESCR (missing verb).

OK robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2015/05/07 12:29:07 robert Exp $
a157 1
	${SUBST_CMD} ${WRKSRC}/content/common/plugin_list_posix.cc
@


1.213
log
@unbreak i386 and make the debug flavor closer to build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2015/05/01 12:45:04 robert Exp $
d10 1
@


1.212
log
@update to 42.0.2311.135
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2015/04/30 22:51:46 sthen Exp $
a3 1
BROKEN-i386=		ld from binutils-2.15 uses too much RAM
d10 1
d28 1
d141 13
a202 8

.include <bsd.port.arch.mk>

.if ${ARCH} == i386
PKG_ARGS= -DI386_DISABLE="@@comment "
.else
PKG_ARGS= -DI386_DISABLE=""
.endif
@


1.211
log
@Mark BROKEN-i386, binutils-2.15 can no longer link this in available ram.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2015/04/27 16:38:25 robert Exp $
d9 1
a9 1
V=			42.0.2311.90
@


1.210
log
@update to 42.0.2311.90
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2015/04/04 09:21:04 ajacoutot Exp $
d4 1
@


1.209
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2015/04/03 10:32:04 robert Exp $
d8 1
a8 1
V=			41.0.2272.118
a9 1
REVISION=		0
d123 1
@


1.208
log
@update to 41.0.2272.118
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2015/03/31 09:44:48 ajacoutot Exp $
d10 1
@


1.207
log
@Move fontpath from /usr/local/lib/X11/fonts to /usr/local/share/fonts to match
XDG_DATA_DIR (where Desktop tools will look for by default).

discussed with sthen@@ and matthieu@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2015/03/27 08:15:03 ajacoutot Exp $
d8 1
a8 1
V=			41.0.2272.101
a9 1
REVISION=		1
@


1.206
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2015/03/21 14:11:19 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.205
log
@update to 41.0.2272.101 and add missing patches from last commit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2015/03/18 19:26:29 robert Exp $
d10 1
d56 1
a56 1
		x11/gtk+2,-guic
@


1.204
log
@update to 41.0.2272.89
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2015/02/22 11:33:57 robert Exp $
d8 1
a8 1
V=			41.0.2272.89
@


1.203
log
@Rework how the GPU vendor and device id is detected by using direct calls
to Mesa. The current solution is based on a diff from jsg@@.
Also fix font redering issues with WebKit, with 3rd party TTFs with a
diff from Yoshihisa Matsushita.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2015/02/22 05:58:34 robert Exp $
d8 1
a8 1
V=			40.0.2214.115
a9 1
REVISION=		0
@


1.202
log
@update to 40.0.2214.115
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2015/02/15 19:51:28 robert Exp $
d10 1
a160 2
	${CC} ${CLAGS} -o ${BUILDDIR}/gpuid -I${X11BASE}/include \
		-L${X11BASE}/lib ${FILESDIR}/gpuid.c -lGL
a164 1
	${INSTALL_PROGRAM} ${BUILDDIR}/gpuid ${PREFIX}/chrome
@


1.201
log
@use mesa to get the gpu vendor and device id and pass it to chromium because
we can't use libpci due to permission restrictions and use some more UI code
on BSD as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2015/02/12 07:38:09 robert Exp $
d8 1
a8 1
V=			40.0.2214.114
a9 1
REVISION=		0
@


1.200
log
@update to 40.0.2214.114
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2015/02/10 10:12:49 sthen Exp $
d10 1
d161 2
d167 1
@


1.199
log
@restore PLIST, unbreaks packaging on i386 (insufficient memory to link with
libpdf enabled).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2015/02/06 17:45:14 robert Exp $
d8 1
a8 2
V=			40.0.2214.111
REVISION=		0
@


1.198
log
@update to 40.0.2214.111
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2015/01/28 15:04:21 robert Exp $
d9 1
@


1.197
log
@update to 40.0.2214.93
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2015/01/24 18:07:46 sthen Exp $
d8 1
a8 1
V=			40.0.2214.93
@


1.196
log
@Repair chromium builds on i386, we are bumping into the hard 2GB MAXDSIZ
limit during linking:

- use --no-keep-memory
- disable pdf support on i386
(conditionalize the libpdf.so PLIST entry based on arch)

We are still very close to the limit and I suspect it may still intermittently
fail.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2015/01/22 11:42:24 robert Exp $
d8 1
a8 1
V=			40.0.2214.91
a9 2

REVISION=		0
@


1.195
log
@include the internal pdf viewer/generator
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2015/01/22 11:16:40 robert Exp $
d179 1
a179 1
	${INSTALL_DATA} ${BUILDDIR}/${f} ${PREFIX}/chrome
d189 8
@


1.194
log
@update to 40.0.2214.91
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2014/11/29 16:52:06 robert Exp $
d11 2
d178 1
a178 1
.for f in libffmpegsumo.so protoc icudtl.dat mksnapshot
@


1.193
log
@update to 39.0.2171.99
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2014/12/13 14:57:49 robert Exp $
d8 1
a8 1
V=			39.0.2171.99
@


1.192
log
@update to 39.0.2171.95
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2014/11/29 16:52:06 robert Exp $
d8 1
a8 1
V=			39.0.2171.95
@


1.191
log
@update to 39.0.2171.71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2014/11/19 21:27:32 robert Exp $
d8 1
a8 1
V=			39.0.2171.71
@


1.190
log
@update to 39.0.2171.65
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2014/11/14 21:04:36 robert Exp $
d8 1
a8 1
V=			39.0.2171.65
@


1.189
log
@update to 38.0.2125.122
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2014/10/30 22:20:23 robert Exp $
d8 1
a8 1
V=			38.0.2125.122
@


1.188
log
@update to 38.0.2125.111
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2014/10/21 14:03:06 robert Exp $
d8 1
a8 1
V=			38.0.2125.111
d13 1
a13 1
HOMEPAGE=		https://code.google.com/chromium/
@


1.187
log
@update to 38.0.2125.104
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2014/10/13 14:20:28 robert Exp $
d8 1
a8 1
V=			38.0.2125.104
@


1.186
log
@add missing Aura patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2014/10/13 06:49:19 robert Exp $
d8 1
a8 1
V=			38.0.2125.101
a9 2

REVISION=		0
@


1.185
log
@update to 38.0.2125.101
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2014/10/04 12:30:58 robert Exp $
d10 2
@


1.184
log
@update to 37.0.2062.124
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2014/09/15 06:29:56 robert Exp $
d8 1
a8 1
V=			37.0.2062.124
@


1.183
log
@use GPU accelerated cross process image transport on openbsd as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2014/09/11 19:04:52 robert Exp $
d8 1
a8 1
V=			37.0.2062.120
a9 1
REVISION=		0
@


1.182
log
@update to 37.0.2062.120
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2014/08/15 15:59:49 robert Exp $
d10 1
@


1.181
log
@update to 36.0.1985.143
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2014/08/10 09:58:06 espie Exp $
d8 1
a8 1
V=			36.0.1985.143
d38 1
a38 1
WANTLIB += execinfo expat fontconfig freetype gconf-2 gcrypt gdk-x11-2.0
a46 1
WANTLIB += icui18n icuuc
a69 1
		textproc/icu4c \
d107 1
a107 1
		-Duse_system_icu=1 \
d176 1
a176 1
.for f in libffmpegsumo.so protoc
a178 1
	${INSTALL_DATA} ${BUILDDIR}/mksnapshot.* ${PREFIX}/chrome/mksnapshot
@


1.180
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2014/07/28 12:33:47 espie Exp $
d8 1
a8 1
V=			36.0.1985.125
a9 1
REVISION=		0
@


1.179
log
@bulk-fix: prevent chromium from picking up installed libv8
okay sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2014/07/24 08:37:40 robert Exp $
d167 1
a167 3
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -c \
		${FILESDIR}/chrome ${PREFIX}/bin/chrome
	chmod ${BINMODE} ${PREFIX}/bin/chrome
@


1.178
log
@fix middle button copy&paste; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2014/07/20 17:22:33 robert Exp $
d90 1
a90 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
@


1.177
log
@update to 36.0.1985.125;

from this release Chromium uses Aura instead of Gtk+ so the UI will look
a bit different, and that is completely normal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2014/07/11 07:39:58 ajacoutot Exp $
d10 1
@


1.176
log
@Drop the proprietary FLAVOR. There is no point keeping it for us, so merge
the functionnality by default.

ok espie@@ jasper@@ naddy@@ robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2014/06/12 14:22:07 robert Exp $
d8 1
a8 1
V=			35.0.1916.155
a9 1
REVISION=		0
d40 2
a41 2
WANTLIB += jpeg m nspr4 nss3 nssutil3 pango-1.0 pangocairo-1.0
WANTLIB += plc4 png pthread smime3 speex
d43 1
a43 1
WANTLIB += atk-1.0 usb-1.0 sndio
d49 2
d54 1
a57 1
		audio/pulseaudio \
d112 1
a112 1
		-Dlinux_use_tcmalloc=0 \
d119 1
d171 1
a171 1
.for p in chrome_100_percent content_resources resources
@


1.175
log
@update to 35.0.1916.155
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2014/05/24 15:27:34 robert Exp $
d10 1
d20 1
a20 2
# The proprietary flavor compiles and enables patented codecs like H.264
FLAVORS=	proprietary debug
a23 1
.if ${FLAVOR:Mproprietary}
a25 3
.else
PERMIT_PACKAGE_CDROM=	Yes
.endif
d129 2
a130 4
		-Dgoogle_default_client_secret='nQcDyaBvDyCeDrsRqKIWSHJn'

.if ${FLAVOR:Mproprietary}
GYP_DEFS+=	-Dffmpeg_branding=Chrome \
a131 1
.endif
a145 3

	@@cp -pR ${WRKSRC}/third_party/ffmpeg/chromium/config/Chromium/linux/${_arch}/libavutil \
		${WRKSRC}/third_party/ffmpeg/chromium/config/Chromium/openbsd/${_arch}/libavutil
@


1.174
log
@update to 35.0.1916.114
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2014/05/16 06:51:43 robert Exp $
d8 1
a8 1
V=			35.0.1916.114
@


1.173
log
@update to 34.0.1847.137
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2014/04/28 22:04:21 sthen Exp $
d8 1
a8 1
V=			34.0.1847.137
d53 1
d126 1
@


1.172
log
@remove unguarded "#define AI_ADDRCONFIG 0"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2014/04/25 15:58:09 robert Exp $
d8 1
a8 2
V=			34.0.1847.131
REVISION=		0
@


1.171
log
@update to 34.0.1847.131
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2014/04/20 10:00:21 jasper Exp $
d9 1
@


1.170
log
@use ${FILESDIR} instead of hardcoding 'files/'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2014/04/17 16:27:53 robert Exp $
d8 1
a8 1
V=			34.0.1847.116
@


1.169
log
@update to 34.0.1847.116 and disable Werror for the future clang update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2014/04/07 19:32:03 robert Exp $
d156 1
a156 1
	@@cp files/sndio_output.{cc,h} ${WRKSRC}/media/audio/sndio
@


1.168
log
@properly initialize the media filesystem registry to avoid a crash while
closing the settings/about/history pages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2014/04/06 22:21:11 robert Exp $
d8 1
a8 1
V=			33.0.1750.152
a9 1
REVISION=		0
d115 1
a115 1
		-Dlinux_strip_binary=1 \
d123 1
d177 1
a177 1
.for p in chrome chrome_100_percent content_resources resources
@


1.167
log
@update to 33.0.1750.152
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2014/03/14 10:18:56 robert Exp $
d10 1
d116 1
a116 1
		-Dlinux_strip_binary=0 \
@


1.166
log
@fix dependencies and wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2014/03/11 14:52:01 robert Exp $
d8 1
a8 1
V=			33.0.1750.146
a9 1
REVISION=		0
d115 1
a115 1
		-Dlinux_strip_binary=1 \
@


1.165
log
@update to 33.0.1750.146
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2014/02/10 18:34:59 robert Exp $
d10 1
d43 1
a43 1
WANTLIB += X11 Xext Xfixes Xrender Xss bz2 c cairo cups dbus-1 event
d49 1
a49 1
WANTLIB += atk-1.0 usb-1.0 Xrandr sndio
d52 2
d59 2
a60 1
BUILD_DEPENDS=	audio/pulseaudio \
d70 1
a70 2
LIB_DEPENDS=	archivers/bzip2 \
		devel/libexecinfo \
d74 1
@


1.164
log
@Bump ports using gcc4 module.
(not: mozilla ports not bumped since they're going to be updated in a few)
@
text
@d8 1
a8 1
V=			32.0.1700.102
a9 1
REVISION=		0
d20 1
a20 1
FLAVORS=	proprietary
d79 3
d83 1
d108 1
d132 5
@


1.163
log
@revert update due to ports being locked and this not being a security update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2014/02/03 16:37:31 robert Exp $
d10 1
@


1.162
log
@update to 32.0.1700.107
@
text
@d8 1
a8 1
V=			32.0.1700.107
@


1.161
log
@update to 32.0.1700.102
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2014/01/18 11:42:03 robert Exp $
d8 1
a8 1
V=			32.0.1700.102
@


1.160
log
@update to 32.0.1700.76
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2013/12/12 10:43:18 robert Exp $
d8 1
a8 1
V=			32.0.1700.76
@


1.159
log
@update to 31.0.1650.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2013/11/15 07:44:49 ajacoutot Exp $
d8 1
a8 1
V=			31.0.1650.63
@


1.158
log
@Sync the Desktop file with Ubuntu and FreeBSD.
Rename to chromium-browser.desktop to match what others are doing.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2013/11/01 14:09:19 robert Exp $
d8 1
a8 1
V=			30.0.1599.101
a9 2

REVISION=		1
@


1.157
log
@make using the GTK theme work after a restart as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2013/10/29 06:51:34 robert Exp $
d11 1
a11 1
REVISION=		0
d184 2
a185 2
	${INSTALL_DATA} ${FILESDIR}/chrome.desktop \
		${PREFIX}/share/applications/chrome.desktop
@


1.156
log
@update to 30.0.1599.101
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2013/10/16 15:04:08 bluhm Exp $
d10 2
@


1.155
log
@Including the header file netinet6/in6_var.h from netinet/in_var.h
automatically is bad.  To change that, a few ports must be adapted.
Do an explicit #include <netinet6/in6_var.h> when it is needed.
OK ajacoutot@@

Commit the remaining ports that were blocked by an cvs commit error
in devel/jdk/1.7/patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2013/10/11 14:53:57 dcoppa Exp $
d8 1
a8 1
V=			29.0.1547.76
a9 1
REVISION=		3
d108 1
d115 1
d132 1
a132 1
	${SUBST_CMD} ${WRKSRC}/webkit/plugins/npapi/plugin_list_posix.cc
@


1.154
log
@There're a pair of ${SUBST_CMD} at pre-configure stage, but the
paths inside the patches were already "substituted" (hardcoded).
Use MODPY_ADJ_FILES for the python one, and get rid of that patch.

ok aja@@, robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2013/10/11 13:52:07 ajacoutot Exp $
d10 1
a10 1
REVISION=		2
@


1.153
log
@Fix mozilla plugins directory, /usr/lib64 is... meh...

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2013/09/30 14:21:46 robert Exp $
d10 1
a10 1
REVISION=		1
d128 2
d131 1
a131 2
	${SUBST_CMD} ${WRKSRC}/webkit/plugins/npapi/plugin_list_posix.cc \
		${WRKSRC}/build/linux/unbundle/replace_gyp_files.py
@


1.152
log
@use the official fix for the atk issue which was commited to the chromium git repo yesterday
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2013/09/29 19:03:59 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.151
log
@update to 29.0.1547.76
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2013/08/08 11:52:51 naddy Exp $
d10 1
@


1.150
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2013/09/25 23:39:55 sthen Exp $
d8 1
a8 2
V=			28.0.1500.95
REVISION=		1
d108 1
a108 1
		-Denable_webrtc=1 \
@


1.149
log
@handle p_flags split in kinfo_proc to unbreak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2013/09/25 16:53:53 sthen Exp $
d9 1
a9 1
REVISION=		0
@


1.148
log
@these are currently BROKEN (sysctl changes), mark them as such to save time
in builds, jasper@@ agrees
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.147 2013/08/08 11:52:51 naddy Exp $

BROKEN = sysctl changes
d9 1
@


1.147
log
@switch master site to https
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.146 2013/08/07 22:15:52 robert Exp $
@


1.146
log
@update to 28.0.1500.95
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2013/08/07 21:32:47 naddy Exp $
d31 1
a31 1
MASTER_SITES=	http://commondatastorage.googleapis.com/chromium-browser-official/
@


1.145
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2013/07/15 14:59:30 robert Exp $
d8 1
a8 1
V=			28.0.1500.45
a9 1
REVISION=		0
@


1.144
log
@update to 28.0.1500.45
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2013/06/21 21:59:13 sthen Exp $
d10 1
d14 1
a14 1
HOMEPAGE=		http://code.google.com/chromium/
@


1.143
log
@Use -fomit-frame-pointer when building libyuv on i386, needed for llvm 3.3
which doesn't leave sufficient available registers to build this otherwise.
Thanks robert@@ for clues and build system help.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2013/06/21 15:15:18 sthen Exp $
d8 1
a8 1
V=			27.0.1453.110
a9 1
REVISION=		0
d56 1
a56 2
BUILD_DEPENDS=	archivers/bzip2 \
		audio/pulseaudio \
d66 2
a67 2
LIB_DEPENDS=	devel/libexecinfo \
		archivers/bzip2 \
d103 1
d108 1
a108 1
		-Denable_webrtc=0 \
d128 2
a129 1
	${SUBST_CMD} ${WRKSRC}/webkit/plugins/npapi/plugin_list_posix.cc
d144 3
a146 2
	env -i ${CONFIGURE_ENV} ${MODPY_BIN} build/gyp_chromium \
	${GYP_DEFS} "--depth=${WRKSRC}"
d150 1
a150 1
		-j ${MAKE_JOBS} -C out/${BUILDTYPE} chrome
d169 1
a169 1
.for f in libffmpegsumo.so mksnapshot protoc
d172 1
@


1.142
log
@mark as DPB_PROPERTIES=parallel, this seems to work reliably with the
ninja build. ok espie@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2013/06/13 21:23:33 sthen Exp $
d10 1
@


1.141
log
@switch the chromium build from gmake to ninja which uses hugely less cpu
time. testing by me and espie, looks good to robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2013/06/12 06:20:20 robert Exp $
d4 1
@


1.140
log
@update to 27.0.1453.110
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2013/05/31 15:38:59 robert Exp $
d65 1
a65 2
# required for parallel building
BUILD_DEPENDS+= gmake->=3.82p2:devel/gmake
d78 1
a78 1
# Set BUILDTYPE to Debug (or omit it) for a debug build
a79 3
MAKE_ENV=	BUILDTYPE=${BUILDTYPE} V=1

USE_GMAKE=	Yes
d85 2
a86 1
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
d141 7
a147 4
	@@cd ${WRKSRC} && \
	env -i ${CONFIGURE_ENV} ${MODPY_BIN} build/gyp_chromium -fmake --ignore-environment \
	${GYP_DEFS} \
	"--depth=${WRKSRC}"
@


1.139
log
@fix audio output buffer size and remove the adobe flash notification

also unbreak chromium on i386 because it seems the new release magically
works on i386
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2013/05/30 18:42:18 robert Exp $
d7 1
a7 1
V=			27.0.1453.93
a8 2

REVISION=		0
@


1.138
log
@update to 27.0.1453.93
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.137 2013/04/20 13:28:02 ajacoutot Exp $

BROKEN-i386=		"sad face" at runtime
d9 2
@


1.137
log
@This patch is really not needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2013/04/15 17:03:49 ajacoutot Exp $
d9 1
a9 1
V=			26.0.1410.63
a11 2
REVISION=		2

d58 1
@


1.136
log
@We have fdatasync(2) now.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2013/04/14 16:39:04 ajacoutot Exp $
d12 1
a12 1
REVISION=		1
@


1.135
log
@Mark BROKEN on i386; this will give a chance to people still using an older
version not to update and end up with a broken browser.
Issue being investigated by robert@@

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2013/04/10 18:46:43 robert Exp $
d12 1
a12 1
REVISION=		0
@


1.134
log
@update some patches
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.133 2013/04/10 16:14:28 robert Exp $
@


1.133
log
@update to 26.0.1410.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2013/04/03 08:19:10 robert Exp $
d9 2
@


1.132
log
@- update to 26.0.1410.43
- switch chromium to use clang/llvm instead of gcc
- switch back to the internal libvpx because it's an unreleased version
  at this point
- re-enable SSE2 support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2013/03/25 08:48:33 robert Exp $
d7 1
a7 1
V=			26.0.1410.43
@


1.131
log
@No need to explicitely depend on gnome-icon-theme anymore.
@
text
@d7 1
a7 1
V=			25.0.1364.173
a8 1
REVISION=		2
d16 1
a16 1
EXTRACT_SUFX=		.tar.bz2
d32 1
a32 1
MODULES=	gcc4 lang/python
d34 2
a35 2
MODGCC4_ARCHS=	*
MODGCC4_LANGS=	c++
d39 2
d45 2
a46 2
WANTLIB += plc4 png pthread smime3 speex estdc++
WANTLIB += xml2 xslt vpx
d49 1
d74 1
a74 2
		print/cups,-libs \
		multimedia/libvpx
d99 1
a99 1
		-Duse_system_libvpx=1 \
d106 1
a106 1
		-Ddisable_sse2=1 \
d113 2
@


1.130
log
@use system yasm for building
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2013/03/22 07:46:04 robert Exp $
d9 1
a9 1
REVISION=		1
a50 1
		x11/gnome/icon-theme \
@


1.129
log
@fix ffmpeg config of i386
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2013/03/20 16:20:04 robert Exp $
d58 1
d103 1
a103 1
		-Duse_system_yasm=0 \
@


1.128
log
@use libvpx from ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2013/03/15 23:08:48 robert Exp $
d9 1
a9 1
REVISION=		0
@


1.127
log
@update to 25.0.1364.173
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2013/03/15 08:30:33 robert Exp $
d9 1
d45 1
a45 1
WANTLIB += xml2 xslt
d72 2
a73 1
		print/cups,-libs
d98 1
a101 1
		-Duse_system_vpx=0 \
a134 2
	@@cp -R ${WRKSRC}/third_party/libvpx/source/config/linux \
		${WRKSRC}/third_party/libvpx/source/config/openbsd
@


1.126
log
@update to 25.0.1364.160
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2013/03/11 12:17:51 espie Exp $
d7 1
a7 1
V=			25.0.1364.160
@


1.125
log
@fix small differences in PERMIT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2013/03/11 11:44:41 espie Exp $
d7 1
a7 1
V=			24.0.1312.68
d43 1
a43 1
WANTLIB += plc4 png pthread pthread-stubs smime3 speex estdc++
d45 2
a46 1
WANTLIB += atk-1.0 usb-1.0 Xrandr pixman-1 plds4 sndio z
d59 1
d112 6
a121 1

@


1.124
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2013/02/07 19:13:49 ajacoutot Exp $
d25 1
@


1.123
log
@MODGCC4_VERSION default to 4.6 now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2013/02/05 06:23:25 robert Exp $
a22 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
d78 1
a78 1
REGRESS_TARGET=	base_unittests
@


1.122
log
@update to 24.0.1312.68
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2013/01/20 07:46:16 brad Exp $
a37 1
MODGCC4_VERSION=4.6
@


1.121
log
@Remove a hack for FFmpeg/Libav to workaround an assembler bug now that it
has been fixed.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2013/01/19 12:06:51 sthen Exp $
d7 1
a7 1
V=			24.0.1312.52
a8 1
REVISION=		1
@


1.120
log
@Add a comment re "proprietary" flavour to DESCR, reminded by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2013/01/19 11:56:06 sthen Exp $
d9 1
a9 1
REVISION=		0
@


1.119
log
@Make PERMIT_* for chromium depend on the FLAVOR, so that FLAVOR=proprietary
disables cdrom packages as done in other ports (H.264 patents).
Link chromium,proprietary to the build.  ok brad@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2013/01/18 21:38:02 robert Exp $
d9 1
@


1.118
log
@update to 24.0.1312.52
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2012/12/26 12:07:51 sthen Exp $
d18 4
a22 1
PERMIT_PACKAGE_CDROM=	Yes
d24 1
d26 5
a30 1
PERMIT_DISTFILES_FTP=	Yes
a32 4

# The proprietary flavor compiles and enables patented codecs like H.264
FLAVORS=	proprietary
FLAVOR?=
@


1.117
log
@unfuck packaging, sorry.. WANTLIB sync changed libusb (from libusb-compat)
to libusb1 but missed that the LIB_DEPENDS also needed to change; as a result
libusb-compat was stripped from the package dependency list (because libusb
was no longer used) but this broke the dependency chain to libusb1 so packaging
failed. pointed out by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2012/12/23 12:25:30 sthen Exp $
d7 1
a7 2
V=			23.0.1271.97
REVISION=		0
d119 2
a120 2
	@@cp -pR ${WRKSRC}/third_party/ffmpeg/chromium/config/Chrome/linux/${_arch}/libavcodec \
		${WRKSRC}/third_party/ffmpeg/chromium/config/Chrome/openbsd/${_arch}/libavcodec
d122 2
a123 2
	@@cp -pR ${WRKSRC}/third_party/ffmpeg/chromium/config/Chromium/linux/${_arch}/libavcodec \
		${WRKSRC}/third_party/ffmpeg/chromium/config/Chromium/openbsd/${_arch}/libavcodec
@


1.116
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2012/12/15 10:23:31 robert Exp $
d63 1
a63 1
		devel/libusb-compat \
@


1.115
log
@update to 23.0.1271.97
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2012/12/10 08:49:17 robert Exp $
d8 1
d45 1
a45 1
WANTLIB += Xcomposite atk-1.0 usb usb-1.0
@


1.114
log
@update to 23.0.1271.95
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2012/11/28 22:28:35 robert Exp $
d7 1
a7 1
V=			23.0.1271.95
@


1.113
log
@update to 23.0.1271.91
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2012/11/26 07:32:30 robert Exp $
d7 1
a7 1
V=			23.0.1271.91
@


1.112
log
@Add a proprietary flavor which enables the patented codecs like H.246.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2012/11/25 18:57:21 ratchov Exp $
d7 1
a7 1
V=			23.0.1271.64
a8 1
REVISION=		0
@


1.111
log
@Enable audio playback support using sndio.
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2012/11/07 06:59:45 robert Exp $
d27 4
d110 6
d120 3
@


1.110
log
@update to 23.0.1271.64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2012/10/12 17:34:17 robert Exp $
d9 1
d103 1
d115 2
@


1.109
log
@re-add needed patch for i386
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2012/10/12 16:46:09 robert Exp $
d7 1
a7 1
V=			22.0.1229.94
a8 1
REVISION=		0
d129 1
a129 1
.for p in chrome content_resources resources theme_resources_100_percent ui_resources_100_percent
@


1.108
log
@update to 22.0.1229.94
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2012/10/04 07:40:25 landry Exp $
d9 1
@


1.107
log
@Remove DPB_PROPERTIES=parallel, this doesnt build reliably.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2012/10/01 18:12:34 naddy Exp $
d7 1
a7 1
V=			21.0.1180.89
d128 2
a129 1
.for p in chrome content_resources resources theme_resources_standard ui_resources_standard
@


1.106
log
@depend on latest gmake for parallel building; requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2012/10/01 17:49:26 naddy Exp $
a10 1
DPB_PROPERTIES=		parallel
@


1.105
log
@mark for parallel building
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2012/09/05 14:18:28 robert Exp $
d55 2
@


1.104
log
@update to 21.0.1180.89
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2012/08/26 18:47:01 robert Exp $
d11 1
@


1.103
log
@update to 21.0.1180.81
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2012/08/12 15:13:57 fgsch Exp $
d7 1
a7 1
V=			21.0.1180.81
@


1.102
log
@- Better fix for the cups API deprecation issue
- Remove unneeded patch since we have openat(5) now (and from 5.0)
- Bump revision

ajacoutot@@ robert@@ (maintainer) ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2012/08/04 14:46:24 ajacoutot Exp $
d7 1
a7 1
V=			20.0.1132.57
a8 1
REVISION=		1
d24 1
a24 2
MASTER_SITES=	http://blade2k.humppa.hu/distfiles/ \
		http://commondatastorage.googleapis.com/chromium-browser-official/
d86 1
d98 1
d138 1
a138 1
.for s in 16 22 24 32 48 64 128 256
@


1.101
log
@Remove dependency on x11/gtk+2,-cups; this package will soon disapear.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2012/07/12 19:35:17 robert Exp $
d9 1
a9 1
REVISION=		0
@


1.100
log
@update to 20.0.1132.57 and add a lib dependency on libusb-compat
instead of libusb1 and fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2012/07/10 12:55:25 robert Exp $
d9 1
a45 1
		x11/gtk+2,-cups \
d64 1
a64 1
		print/cups>=1.5.0
@


1.99
log
@scan the de-facto standard /usr/local/lib/mozilla/plugins dir as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2012/07/10 09:49:29 ajacoutot Exp $
d7 1
a7 1
V=			20.0.1132.47
a8 1
REVISION=		1
d40 2
a41 2
WANTLIB += xml2 xslt z
WANTLIB += Xcomposite atk-1.0 usb-1.0
d58 1
a58 1
		devel/libusb1 \
@


1.98
log
@Add x-scheme-handler for http and https in the MimeType so that chrome can
be chosen as a default browser in Desktop environments.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2012/07/10 09:22:34 robert Exp $
d9 1
a9 1
REVISION=		0
d104 1
@


1.97
log
@update to 20.0.1132.47
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2012/05/17 08:52:59 robert Exp $
d9 1
@


1.96
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d7 1
a7 1
V=			18.0.1025.168
a9 2
REVISION=		1

d37 1
a37 1
WANTLIB += gdk_pixbuf-2.0 glib-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0
d40 2
a41 1
WANTLIB += xml2 xslt
d58 1
d104 4
d125 3
a127 2
	${INSTALL_DATA} ${BUILDDIR}/chrome.pak ${PREFIX}/chrome
	${INSTALL_DATA} ${BUILDDIR}/resources.pak ${PREFIX}/chrome
@


1.95
log
@Add a temporary workaround to the chrome wrapper script that checks
if the SingletonLock file is available and valid.
The problem is that when chrome crashes one of the destructors fail to
remove the lockfile and then when you start chrome again, it will
try to communicate with the old PID of the chromium main process, because
the SingletonLock file will point to `hostname`-PID_of_old_chromium and
since that process is not running anymore, startup will fail.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2012/05/05 14:03:39 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.94
log
@update to 18.0.1025.168
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2012/04/15 13:33:24 robert Exp $
d9 2
@


1.93
log
@update to 18.0.1025.162
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2012/04/15 10:40:44 robert Exp $
d7 1
a7 1
V=			18.0.1025.162
@


1.92
log
@make sure we use big enough buffers for sysctl(3)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2012/04/10 19:13:46 robert Exp $
d7 1
a7 1
V=			18.0.1025.152
a8 1
REVISION=		0
@


1.91
log
@update to 18.0.1025.152
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2012/04/08 07:56:21 robert Exp $
d9 1
@


1.90
log
@libgnome-keyring is both a run and a build dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2012/04/03 13:59:35 robert Exp $
d7 1
a7 1
V=			18.0.1025.142
a8 1
REVISION=		0
@


1.89
log
@update to 18.0.1025.142; requires gcc 4.6 from now on
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2012/03/24 07:36:43 robert Exp $
d9 1
d54 2
a55 1
		sysutils/flock
@


1.88
log
@update to 17.0.963.83
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2012/03/23 13:31:25 ajacoutot Exp $
d7 1
a7 1
V=			17.0.963.83
d27 7
a33 1
MODULES=	lang/python
d39 1
a39 1
WANTLIB += plc4 png pthread pthread-stubs smime3 speex stdc++
a41 2
MODPY_RUNDEP=	No

d46 1
a57 1
		x11/gnome/libgnome-keyring \
@


1.87
log
@Remove left-over useless SUBST_CMD.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2012/03/20 20:52:44 robert Exp $
d7 1
a7 1
V=			17.0.963.79
a8 2

REVISION=		0
@


1.86
log
@Disable using the zygote process just like on macosx to make
chrome happy with rthreads.
This change is fine anyways because we are not using the setuid
sandboxing which would require the zygote process.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/03/12 10:28:30 robert Exp $
a100 1
	${SUBST_CMD} ${WRKSRC}/build/common.gypi
@


1.85
log
@update to 17.0.963.79
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2012/03/08 18:56:26 robert Exp $
d9 2
@


1.84
log
@update to 17.0.963.78
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/03/06 18:41:54 robert Exp $
d7 1
a7 1
V=			17.0.963.78
@


1.83
log
@update to 17.0.963.66
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2012/03/05 12:57:48 robert Exp $
d7 1
a7 1
V=			17.0.963.66
@


1.82
log
@update to 17.0.963.65
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2012/02/17 10:19:50 robert Exp $
d7 1
a7 1
V=			17.0.963.65
@


1.81
log
@update to 17.0.963.56
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/01/24 08:31:40 robert Exp $
d7 1
a7 1
V=			17.0.963.56
@


1.80
log
@update to 16.0.912.77
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/01/11 16:24:07 ajacoutot Exp $
d7 1
a7 1
V=			16.0.912.77
d29 1
a29 1
WANTLIB += X11 Xext Xrender Xss bz2 c cairo cups dbus-1 event
@


1.79
log
@Increase limits to minimum working defaults.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2012/01/06 16:27:26 robert Exp $
d7 1
a7 1
V=			16.0.912.75
a8 1
REVISION=		0
@


1.78
log
@update to 16.0.912.75 and backport a fix from Chromium SVN to fix the KDE
issues
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2012/01/01 09:04:13 ajacoutot Exp $
d9 1
d112 3
a114 2
	${INSTALL_SCRIPT} ${FILESDIR}/chrome ${PREFIX}/bin
	@@perl -pi -e "s,TRUEPREFIX,${TRUEPREFIX},g" ${PREFIX}/bin/chrome
@


1.77
log
@gamin,-server is gone, glib2 supports native file monitoring with kqueue(2).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/12/14 16:58:19 robert Exp $
d7 1
a7 1
V=			16.0.912.63
a8 1
REVISION=		0
@


1.76
log
@update to 16.0.912.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/12/03 23:20:53 ajacoutot Exp $
d9 1
d39 1
a39 2
RUN_DEPENDS=	sysutils/gamin,-server \
		devel/xdg-utils \
@


1.75
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/11/17 14:53:21 robert Exp $
d7 1
a7 1
V=			15.0.874.121
a8 1
REVISION=		0
d27 1
a27 2
MODULES=	devel/gettext \
		lang/python
d29 1
a29 1
WANTLIB += X11 Xext Xrender Xss bz2 c cairo cups dbus-glib-1 event
d34 1
a34 1
WANTLIB += xml2 xslt z
@


1.74
log
@update to 15.0.874.121
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/11/11 22:54:53 robert Exp $
d9 1
d44 2
a45 1
		x11/gnome/icon-theme
@


1.73
log
@update to 15.0.874.120
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/10/27 07:59:08 robert Exp $
d7 1
a7 1
V=			15.0.874.120
@


1.72
log
@update to 15.0.874.102.

switch from using the hacked macosx transport dib to the linux one
which uses sysv shms.
make sure you also have a current kernel before using this version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/10/05 16:16:44 robert Exp $
d7 1
a7 1
V=			15.0.874.102
d25 1
a25 2
		http://build.chromium.org/buildbot/official/ \
		ftp://rene-ladan.nl/pub/distfiles/
@


1.71
log
@update to 14.0.835.202
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/09/19 08:55:26 robert Exp $
d7 1
a7 1
V=			14.0.835.202
a23 11
WANTLIB += ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xss
WANTLIB += Xfixes Xi Xinerama Xrandr Xrender atk-1.0 c cairo dbus-1 dbus-glib-1
WANTLIB += expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB += gtk-x11-2.0 jpeg m nspr4 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pixman-1 plc4 plds4 png pthread pthread-stubs xcb xml2
WANTLIB += z execinfo bz2 nss3 nssutil3 ssl3 smime3 softokn3 gconf-2
WANTLIB += GL Xxf86vm drm stdc++ xcb-render xcb-shm
WANTLIB += Xtst event xslt kvm>=10.0 sndio speex
WANTLIB += cups gcrypt

d31 7
a48 1
		devel/yasm \
d87 1
a87 1
		-Duse_system_yasm=1 \
d93 2
d99 2
d124 1
a124 1
.for f in ffmpegsumo_nolink libffmpegsumo.so mksnapshot protoc
@


1.70
log
@update to 14.0.835.163
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/09/16 12:00:06 espie Exp $
d7 1
a7 1
V=			14.0.835.163
@


1.69
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/09/08 10:35:16 ajacoutot Exp $
d7 1
a7 1
V=			13.0.782.220
a9 2
REVISION=		1

d32 1
a32 1
WANTLIB += Xtst event xslt vpx kvm>=10.0 sndio speex
a59 1
		multimedia/libvpx \
d91 1
a91 1
		-Duse_system_vpx=1 \
d96 2
@


1.68
log
@Fix build fix cups >=1.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/09/04 20:44:47 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.67
log
@update to 13.0.782.220
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/08/31 13:50:42 robert Exp $
d10 2
d67 1
a67 1
		print/cups
@


1.66
log
@update to 13.0.782.218
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/08/23 09:33:03 robert Exp $
d7 1
a7 1
V=			13.0.782.218
@


1.65
log
@update to 13.0.782.215
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/08/16 08:17:44 robert Exp $
d7 1
a7 1
V=			13.0.782.215
@


1.64
log
@update to the next stable release (13.0.782.112)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/07/26 20:47:55 robert Exp $
d7 1
a7 1
V=			13.0.782.112
d12 1
a12 1
HOMEPAGE=		http://sightly.net/peter/openbsd/chromium/
@


1.63
log
@update to 12.0.742.122
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/07/05 09:16:19 halex Exp $
d7 1
a7 1
V=			12.0.742.122
@


1.62
log
@fix the chrome wrapper script a bit

- skip the tests if you already have a running chrome instance
- default to 'no' (meaning you must not use the mouse for doing the
  sensible thing)
- do not start chrome if you just close the window (alt+f4 etc)

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/06/29 06:32:32 robert Exp $
d7 1
a7 1
V=			12.0.742.112
a8 1
REVISION=		0
@


1.61
log
@update to 12.0.742.112
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/06/28 11:34:42 ajacoutot Exp $
d9 1
@


1.60
log
@Add gnome-icon-theme to RUN_DEPENDS, it's needed to render some icons.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/06/17 04:25:06 canacar Exp $
d7 1
a7 1
V=			12.0.742.100
a8 2

REVISION=		2
@


1.59
log
@Try to set the number of open files to the desired value before warning
about openfiles-max. ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/06/15 19:41:02 robert Exp $
d10 1
a10 1
REVISION=		1
d49 2
a50 1
		x11/gtk+2,-cups
@


1.58
log
@Use MODPY_VERSION instead of hardcoding 2.6 which is not the case anymore
since we default to python 2.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/06/15 10:59:55 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.57
log
@update to chromium-12.0.742.100
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/06/10 07:41:24 robert Exp $
d10 2
d102 1
@


1.56
log
@fix AtomicWord definition on i386, no bump needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2011/06/08 20:36:56 robert Exp $
d7 1
a7 1
V=			12.0.742.91
@


1.55
log
@Update to the new stable branch: 12.0.742.91
http://googlechromereleases.blogspot.com/2011/06/chrome-stable-release.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/06/08 18:15:28 rpointel Exp $
d35 2
a36 2
MASTER_SITES=	http://build.chromium.org/buildbot/official/ \
		http://blade2k.humppa.hu/distfiles/ \
@


1.54
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2011/06/07 10:39:53 robert Exp $
d7 1
a7 1
V=			11.0.696.77
a8 2

REVISION=		0
@


1.53
log
@update to chromium-11.0.696.77
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2011/06/02 07:22:12 robert Exp $
d9 2
@


1.52
log
@Instead of reserving 32MB of virtual memory let's reserve the quarter of
RLIMIT_DATA (ulimit -d) if RLIMIT_DATA is not 0 (unlimited).
If RLIMIT_DATA is 0 then the default 512MB reservation will be used.
Using 32MB made v8 use less memory for sure but it was a huge performance
loss too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2011/05/31 07:55:04 robert Exp $
d7 1
a7 1
V=			11.0.696.71
a8 2

REVISION=		2
@


1.51
log
@Make v8 pre-allocate at least 32M of virtual memory to avoid
crashing with vmmap. This is needed because of their JIT is
not fully 64-bit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/05/26 11:39:14 robert Exp $
d10 1
a10 1
REVISION=		1
@


1.50
log
@- re-enable flock in the build
- add support for detecting if an sqlite3 db is on an NFS mount
- fix printing: Chrome can only print to PDF and that is why you
  cannot print to LPD directly. It requres CUPS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/05/25 16:41:28 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.49
log
@update to 11.0.696.71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/05/20 08:35:24 robert Exp $
d10 2
d34 2
a35 1
WANTLIB += Xtst event xslt vpx kvm>=10.0 sndio
d48 2
a49 1
		devel/desktop-file-utils
d55 2
a56 1
		shells/bash
d64 3
a66 1
		x11/gtk+2
d91 1
@


1.48
log
@Add WIP progress sndio support to chrome, developed by jakemsr@@ and
with modifications by me.
It is not working yet so you can only enable it by setting the
CHROME_SNDIO environment variable, so by default nothing changes.
I commit this so that other people can work on it too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/05/19 11:57:37 ajacoutot Exp $
d7 1
a7 1
V=			11.0.696.68
a8 2

REVISION=		5
@


1.47
log
@Add missing RUN_DEPENDS.
Remove trailing blank line.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/05/19 11:52:06 robert Exp $
d10 1
a10 1
REVISION=		4
d34 1
a34 1
WANTLIB += Xtst event xslt vpx kvm>=10.0
@


1.46
log
@Add a .desktop file for the menus and install the icons too.
Remove the message about bumping shmall and datasize too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/05/18 17:02:56 robert Exp $
d10 1
a10 1
REVISION=		3
d46 2
a47 1
		devel/xdg-utils
@


1.45
log
@sync transport dib code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/05/17 08:35:31 robert Exp $
d10 1
a10 1
REVISION=		2
d120 8
@


1.44
log
@- use the same memory allocation values on amd64 and i386 too.
  this makes chrome use way less memory and since it does not hit
  datasize limits anymore, it is way more stable too
- remove the warning of datasize bumping from the wrapper script

tested by sthen@@, jasper@@ and me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/05/14 21:29:03 ajacoutot Exp $
d10 1
a10 1
REVISION=		1
@


1.43
log
@deve/gconf2 is about to loose its dependency on x11/gtk+2 so explicitely
register x11/gtk+2 for ports depending on gconf2 that don't have another
dependency that would bring it.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/05/13 11:48:19 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.42
log
@update to chromium-11.0.696.68
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/05/12 07:51:10 ajacoutot Exp $
d10 2
d59 2
a60 1
		textproc/libxslt
@


1.41
log
@xdg-open is used to start helpers, so add devel/xdg-utils to RUN_DEPENDS.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/05/07 11:19:25 robert Exp $
d7 1
a7 1
V=			11.0.696.65
a8 1
REVISION=		0
@


1.40
log
@update to 11.0.696.65
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/04/29 13:18:01 robert Exp $
d9 1
d44 2
a45 1
RUN_DEPENDS=	sysutils/gamin,-server
@


1.39
log
@update to the latest stable version which is now 11.0.696.60
+ switch from using system sqlite to the bundled one because they have
  many modifications that are needed
+ add a new mirror for the distfile because the google one is utterly slow
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/04/15 10:10:27 robert Exp $
d7 1
a7 1
V=			11.0.696.60
@


1.38
log
@update to 10.0.648.205 and use python 2.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/03/27 15:13:01 robert Exp $
d7 1
a7 1
V=			10.0.648.205
d32 1
a32 1
WANTLIB += Xtst event sqlite3 xslt vpx kvm>=10.0
d35 1
d81 1
a81 1
		-Duse_system_sqlite=1 \
d83 1
@


1.37
log
@update to 10.0.648.204
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/03/23 12:33:25 robert Exp $
d7 1
a7 1
V=			10.0.648.204
a40 1
MODPY_VERSION=	2.5
@


1.36
log
@merge patches from http://codereview.chromium.org/6682026
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/03/21 11:27:45 robert Exp $
d7 1
a7 1
V=			10.0.648.151
a8 2

REVISION=		2
@


1.35
log
@sync with the freebsd transport dib code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/03/20 07:51:00 robert Exp $
d10 1
a10 1
REVISION=		1
@


1.34
log
@make sure we depend on kvm>=10.0 otherwise it will fail to build
from Pascal Stumpf <Pascal.Stumpf@@cubes.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/03/18 10:28:30 robert Exp $
d10 1
a10 1
REVISION=		0
@


1.33
log
@update to 10.0.648.151
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/03/16 10:52:46 robert Exp $
d10 2
d34 1
a34 1
WANTLIB += Xtst event sqlite3 xslt vpx kvm
@


1.32
log
@Add some missing patches that were missed by the previous commit
and move back to KERN_PROC from KERN_PROC2 now that we can.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/03/15 11:38:05 robert Exp $
d7 1
a7 1
V=			10.0.648.133
a8 2

REVISION=		0
@


1.31
log
@update to 10.0.648.133
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/03/09 17:24:21 sthen Exp $
d9 2
@


1.30
log
@install the manpage, this also fixes chrome --help
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/03/05 20:12:35 sthen Exp $
d7 1
a7 1
V=			9.0.597.107
a8 2

REVISION=		2
@


1.29
log
@WANTLIB+=kvm and bump, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/03/03 19:39:17 robert Exp $
d10 1
a10 1
REVISION=		1
d105 1
@


1.28
log
@turns out that disable_sse2 is only checked on i386 so remove the check
for amd64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/03/03 13:47:47 robert Exp $
d10 1
a10 1
REVISION=		0
d34 1
a34 1
WANTLIB += Xtst event sqlite3 xslt vpx
@


1.27
log
@- remove LINK=/usr/bin/g++ from make env
- fix an ifdef
- enable SSE2 support on amd64

diff from Matthew Dempsky
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/03/03 10:37:33 robert Exp $
a88 4

.if ${MACHINE_ARCH} != "amd64"
GYP_DEFS+=	-Ddisable_sse2=1
.endif
@


1.26
log
@update to 9.0.597.107
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/03/02 11:11:31 robert Exp $
d10 2
d64 1
a64 2
MAKE_ENV=	BUILDTYPE=${BUILDTYPE} V=1 \
		LINK=/usr/bin/g++
d89 4
@


1.25
log
@no need to use gcc from ports anymore, the pragma patch has been
commited to base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/03/02 08:53:51 robert Exp $
d7 1
a7 1
V=			9.0.597.94
a8 2

REVISION=		1
@


1.24
log
@Use KERN_PROC2 everywhere instead of trying to use /proc and use
kvm(3) to help chrome identify it's own processes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/02/12 10:42:43 jasper Exp $
d10 1
a10 1
REVISION=		0
d40 1
a40 8
		lang/python \
		gcc4

MODGCC4_LANGS = c c++
MODGCC4_ARCHES = i386 amd64

# XXX cheat
COMPILER_VERSION = gcc3
@


1.23
log
@- SECURITY UPDATE of chromium to 9.0.597.94, fixes about 13 CVE's.

tested by myself on amd64, and espie@@ on i386.
"sure, make sure it works" robert@@ (MAINTAINER), ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/02/08 21:10:28 sthen Exp $
d9 2
@


1.22
log
@fix MESSAGE, bump
@
text
@d7 1
a7 2
V=			9.0.597.84
REVISION=		1
@


1.21
log
@tweak wrapper script; use larger default limits for FD and datasize
(you may still need to raise them if you open many tabs, but this
should be enough to avoid problems in normal use), only warn if
softlimits can't be raised, and adjust messages to mention login.conf
(and login.conf.db if detected).

ok espie@@ "feel free to modify it if you don't like it" robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/02/08 09:43:02 espie Exp $
d8 1
a8 1
REVISION=		0
@


1.20
log
@late update to chromium 9, robert@@ did the work, but he doesn't have the
time right now.
Tree is still locked!
Reasons for the update:
- good work that can be used now
- only builds on i386/amd64, and they're fast
- multiple security problems in old chrome
- old chrome half working, can't break it more than it was.

This one requires resources (see MESSAGE), but it's ways more stable.

Again, discussed with sthen@@, jasper@@, naddy@@, miod@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/12/13 09:51:45 espie Exp $
d8 1
@


1.19
log
@Disable on amd64, because it does not work.
After unlock a chrome update will come...

ok ajacoutot@@, sthen@@ and requested by many people
@
text
@d3 1
a3 1
ONLY_FOR_ARCHS =	i386
d5 1
a5 1
COMMENT =		Chromium browser
d7 2
a8 2
DISTNAME=		chromium-5.0.359.1
REVISION=		3
d10 1
a10 1
CATEGORIES =		www
d12 1
a12 1
HOMEPAGE =		http://sightly.net/peter/openbsd/chromium/
d14 3
a16 1
MAINTAINER =		Peter Valchev <pvalchev@@openbsd.org>
d19 4
a22 4
PERMIT_PACKAGE_CDROM =	Yes
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d32 4
d37 3
a39 2
MASTER_SITES=	${MASTER_SITE_BACKUP} \
		${HOMEPAGE}
d41 2
a42 2
MODULES =	devel/gettext \
		lang/python
d44 2
a45 1
MODPY_RUNDEP =	No
d47 6
a52 2
RUN_DEPENDS =	sysutils/gamin,-server
BUILD_DEPENDS =	devel/gperf \
d54 2
d57 1
a57 1
LIB_DEPENDS =	devel/libexecinfo \
d60 4
a63 1
		devel/gconf2
d69 2
a70 18
.if ${COMPILER_VERSION:L:Mgcc4*}
MAKE_ENV =	BUILDTYPE=${BUILDTYPE} V=1 \
		CXX=/usr/bin/g++ \
		CXX.host=/usr/bin/g++ \
		LINK.host=/usr/bin/g++ \
		CC=/usr/bin/gcc
.else

MODULES +=	gcc4
MODGCC4_ARCHES = *
MODGCC4_LANGS =	c c++

MAKE_ENV =	BUILDTYPE=${BUILDTYPE} V=1 \
		CXX=${LOCALBASE}/bin/eg++ \
		CXX.host=${LOCALBASE}/bin/eg++ \
		LINK.host=${LOCALBASE}/bin/eg++ \
		CC=${LOCALBASE}/bin/egcc
.endif
d72 1
a72 1
USE_GMAKE =	Yes
d74 1
a74 1
NO_REGRESS =	Yes
d76 2
a77 2
CONFIGURE_STYLE = none # prevent python MODULE from overriding do-build
CONFIGURE_ENV =	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
d80 1
a80 1
ALL_TARGET =	chrome
d84 12
d103 2
a104 3
	-Ibuild/common.gypi -Ibuild/features_override.gypi "--depth=${WRKSRC}" \
	-DOS=openbsd -Duse_system_libxml=1 -Duse_system_libjpeg=1 \
	build/all.gyp
d112 1
d119 3
@


1.18
log
@cut the "monster patches" into small pieces. pval can fix it to his liking
if he comes back.
In the mean time, fix build of chromium by adding the required
-I/usr/local/includes to gyp glue where needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/22 08:36:47 espie Exp $
d3 1
a3 1
ONLY_FOR_ARCHS =	i386 amd64
@


1.17
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/11 19:06:23 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
d29 1
@


1.16
log
@Use the python MODULE instead of harcoding python version.
This port is still broken though, it missed a -I/usr/local/include somewhere...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/24 21:40:09 ajacoutot Exp $
d38 8
a45 8
RUN_DEPENDS =	:gamin-*:sysutils/gamin,-server
BUILD_DEPENDS =	::devel/gperf \
		::devel/bison \
		::shells/bash
LIB_DEPENDS =	::devel/libexecinfo \
		::archivers/bzip2 \
		::security/nss \
		::devel/gconf2
@


1.15
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/11 08:19:03 jasper Exp $
d33 5
a37 2
MODULES =	devel/gettext
PYTHON_VER=	2.6
d39 1
a39 2
BUILD_DEPENDS =	:python->=${PYTHON_VER}:lang/python/${PYTHON_VER} \
		::devel/gperf \
d74 2
a75 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
d83 1
a83 1
	@@ln -sf ${LOCALBASE}/bin/python${PYTHON_VER} ${WRKDIR}/bin/python
d88 1
a88 1
	env -i ${CONFIGURE_ENV} python build/gyp_chromium -fmake --ignore-environment \
@


1.14
log
@- fix WANTLIB after cairo update.

(please note chromium is still broken, but will be dealt with soon)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/09/28 07:02:28 jasper Exp $
a67 1
USE_X11 =	Yes
@


1.13
log
@- new style depends
- tweak master sites

ok pval@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/08/01 19:15:18 naddy Exp $
d8 1
a8 1
REVISION=		1
d25 1
a25 1
WANTLIB += gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0
@


1.12
log
@now that this builds again, bump for the gcc3->gcc4 switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/05/17 19:01:34 pvalchev Exp $
d8 1
a8 1
REVISION=		0
d28 1
a28 1
WANTLIB += z
d31 1
a31 1
		http://sightly.net/peter/openbsd/chromium/
d40 4
a43 4
LIB_DEPENDS =	execinfo::devel/libexecinfo \
		bz2::archivers/bzip2 \
		nss3,nssutil3,ssl3,smime3,softokn3::security/nss \
		gconf-2::devel/gconf2
@


1.11
log
@minor update to chromium-5.0.359.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/05/10 15:26:31 espie Exp $
d8 1
@


1.10
log
@being too chummy with modules... fix gcc4 build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/04/01 21:14:14 pvalchev Exp $
d7 1
a7 1
DISTNAME=		chromium-5.0.359.0
@


1.9
log
@Update to chromium-5.0.539.0; tested by many on ports@@
- still some issues on some amd64 machines, etc. but a step forward
- see http://sightly.net/peter/openbsd/chromium/ for more
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/02/03 12:32:54 ajacoutot Exp $
d32 1
a32 4
MODULES =	gcc4 devel/gettext
MODGCC4_ARCHES = *
MODGCC4_LANGS =	c c++

d44 2
d48 12
d65 1
@


1.8
log
@While I'm still unsure why gamin is needed at all, at least use a
correct run_depends: we mean gamin, not libgamin.

"go ahead" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/02/03 01:05:41 pvalchev Exp $
d7 1
a7 2
DISTNAME=		chromium-4.0.251.0
PKGNAME =		${DISTNAME}p5
d21 2
a22 2
WANTLIB += ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB += Xfixes Xi Xinerama Xrandr Xrender atk-1.0 c cairo dbus-1
a30 1
EXTRACT_SUFX=	.tar.bz2
d43 1
d76 1
a76 1
	-Duse_system_libevent=1 build/all.gyp
@


1.7
log
@gamin RUN_DEPENDS, from speedvin@@archlinux.us; ok jasper espie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/01/26 15:48:21 sthen Exp $
d8 1
a8 1
PKGNAME =		${DISTNAME}p4
d39 1
a39 1
RUN_DEPENDS =	::sysutils/gamin
@


1.6
log
@Mention in MESSAGE that this package currently requires SSE2,
and show how to check. This should change sometime, but the
fix is fiddly and for now we should let people know. Committing
now to make sure something is in pre-4.7.

Discussed with pval, this diff ok jasper@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/12/31 12:06:35 espie Exp $
d8 1
a8 1
PKGNAME =		${DISTNAME}p3
d39 1
@


1.5
log
@remove extra under-specified stdc++ libdepends.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/12/20 17:27:34 ajacoutot Exp $
d8 1
a8 1
PKGNAME =		${DISTNAME}p2
@


1.4
log
@Move some LIB_DEPENDS to WANTLIB.
Regen PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/12/19 16:56:07 espie Exp $
d8 1
a8 1
PKGNAME =		${DISTNAME}p1
d45 1
a45 2
		gconf-2::devel/gconf2 \
		estdc++::lang/gcc/4.2,-estdc
@


1.3
log
@fix build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/12/18 23:26:34 ajacoutot Exp $
d8 1
a8 1
PKGNAME =		${DISTNAME}p0
d22 8
a33 5
WANTLIB =	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender c cairo expat fontconfig \
		freetype glitz intl m pixman-1 pthread pthread-stubs \
		xcb z

a43 1
		gtk-x11-2.0,gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 \
a44 3
		atk-1.0::devel/atk \
		ORBit-2.>=3::devel/ORBit2 \
		dbus-1.>=6::x11/dbus \
d46 1
a46 7
		glib-2.0,gmodule-2.0,gthread-2.0,gio-2.0,gobject-2.0::devel/glib2 \
		png::graphics/png \
		jpeg::graphics/jpeg \
		estdc++::lang/gcc/4.2,-estdc \
		xml2::textproc/libxml \
		nspr4,plc4,plds4::devel/nspr \
		pangocairo-1.0,pango-1.0,pangoft2-1.0::devel/pango
@


1.2
log
@Quotes around COMMENT are so 80's...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/12/18 22:25:56 pvalchev Exp $
d55 1
a55 1
# Set BUIDTYPE to Debug (or omit it) for a debug build
d76 1
a76 1
	@@ln -s ${LOCALBASE}/bin/python${PYTHON_VER} ${WRKDIR}/bin/python
d81 1
a81 1
	python build/gyp_chromium -fmake --ignore-environment \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
COMMENT =		"Chromium browser"
d8 1
a8 1
PKGNAME =		${DISTNAME}
@


1.1.1.1
log
@Initial import of Chromium for OpenBSD, a multi-month effort! :)
i386 and amd64 supported.

Chromium is an open-source browser project that aims
to build a safer, faster, and more stable way for all
Internet users to experience the web. http://www.chromium.org/

This is version 4.0.251.0 with a tarball already including hundreds
of patches by myself, Sprewell, Ben Laurie and others from the original
FreeBSD effort. See homepage for more details and known issue:
http://sightly.net/peter/openbsd/chromium/
(right now, there are i386 & amd64 -current packages there that can
be pkg_add'ed, links to the FreeBSD page for more info, etc)

The patches are being cleaned up and sent upstream in chunks, the
goal will be to have a clean tarball eventually. I _just_ got this
working earlier this week so it may crash and burn (especially on
amd64 as some parts do not appear 64-bit clean), let me know.

"commit it and let's work on it in-tree" espie@@, robert@@ & others
@
text
@@
