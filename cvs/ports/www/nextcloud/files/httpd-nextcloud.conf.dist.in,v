head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_1:1.1.1.1.0.2
	OPENBSD_6_1_BASE:1.1.1.1
	gonzalo_20171403:1.1.1.1
	gonzalo:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2017.03.14.16.19.01;	author gonzalo;	state Exp;
branches
	1.1.1.1;
next	;
commitid	7tZetj8ZX3iz7yc3;

1.1.1.1
date	2017.03.14.16.19.01;	author gonzalo;	state Exp;
branches;
next	;
commitid	7tZetj8ZX3iz7yc3;


desc
@@



1.1
log
@Initial revision
@
text
@ext_if="egress"

types { include "/usr/share/misc/mime.types" }

server "nextcloud.example.com" {
	listen on $ext_if port 80
	listen on $ext_if tls port 443

	# Set max upload size to 513M (in bytes)
	connection max request body 537919488

	# First deny access to the specified files
	location "/db_structure.xml"	{ block }
	location "/.ht*"		{ block }
	location "/README"		{ block }
	location "/data*"		{ block }
	location "/config*"		{ block }
        
	location "/*.php*" {
		root { "/nextcloud", strip 1 }
		fastcgi socket "/run/php-fpm.sock"
	}
        
	location "/*" {
		root { "/nextcloud", strip 1 }
        
	}
}
@


1.1.1.1
log
@Owncloud fork, Store your documents, calendar, contacts and photos on a server.

Initial port from Johan Huldtgren with some tweaks by me.

OK kirby@@
@
text
@@
