head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.11.17.15.53.54;	author jeremy;	state dead;
branches;
next	1.1;

1.1
date	2011.03.14.17.58.06;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update ruby-thin to 1.3.0.  Remove patch now upstream. Add
patch to allow regress testing with rspec 1.3.2.
@
text
@$OpenBSD: patch-lib_thin_daemonizing_rb,v 1.1 2011/03/14 17:58:06 jeremy Exp $

Backport commit 0ea95a0ddae14d65bc59 from upstream git to fix
backtrace on stop command.

--- lib/thin/daemonizing.rb.orig	Wed Feb 23 17:22:10 2011
+++ lib/thin/daemonizing.rb	Wed Feb 23 17:22:43 2011
@@@@ -5,6 +5,8 @@@@ module Process
   # Returns +true+ the process identied by +pid+ is running.
   def running?(pid)
     Process.getpgid(pid) != -1
+  rescue Errno::EPERM
+    true
   rescue Errno::ESRCH
     false
   end
@


1.1
log
@Backport a patch from upstream git that fixes a backtrace on exit.
Problem reported by Clint Pachl.

OK landry@@
@
text
@d1 1
a1 1
$OpenBSD$
@

