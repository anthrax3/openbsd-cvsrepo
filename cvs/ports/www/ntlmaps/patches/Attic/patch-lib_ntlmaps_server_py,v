head	1.3;
access;
symbols
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2012.01.26.09.00.58;	author dcoppa;	state dead;
branches;
next	1.2;

1.2
date	2010.03.25.21.25.28;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.21.10.50.14;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove ntlmaps (broken, unmaintained); superseded by cntlm

ok ajacoutot@@, sthen@@
@
text
@$OpenBSD: patch-lib_ntlmaps_server_py,v 1.2 2010/03/25 21:25:28 sthen Exp $

Log to syslog when startup fails due to missing password in
configuration file. Closes: Debian #343475

Upstream svn revision 942.

--- lib/ntlmaps/server.py.orig	Thu Mar 25 21:22:50 2010
+++ lib/ntlmaps/server.py	Thu Mar 25 21:23:39 2010
@@@@ -17,8 +17,8 @@@@
 # 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
 #
 
-import socket, thread, sys, signal, getpass
-import proxy_client, www_client, monitor_upstream, ntlm_procs
+import socket, thread, sys, signal, getpass, syslog, base64
+import proxy_client, monitor_upstream, ntlm_procs
 
 #--------------------------------------------------------------
 class AuthProxyServer:
@@@@ -33,6 +33,7 @@@@ class AuthProxyServer:
         self.watchUpstream = 0
         if not self.config['NTLM_AUTH']['NTLM_TO_BASIC']:
             if not self.config['NTLM_AUTH']['PASSWORD']:
+                syslog.syslog('ntlmaps: Failed to start - password required in configuration file.')
                 tries = 3
                 print '------------------------'
                 while tries and (not self.config['NTLM_AUTH']['PASSWORD']):
@


1.2
log
@unbreak packaging, found by espie@@
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_ntlmaps_server_py,v 1.1 2010/03/21 10:50:14 jasper Exp $
@


1.1
log
@- add a potpourri of fixes from svn
@
text
@d1 1
a1 1
$OpenBSD$
d8 2
a9 2
--- lib/ntlmaps/server.py.orig	Wed Feb  3 23:02:27 2010
+++ lib/ntlmaps/server.py	Wed Feb  3 23:06:29 2010
d25 1
a25 1
+            syslog.syslog('ntlmaps: Failed to start - password required in configuration file.')
@

