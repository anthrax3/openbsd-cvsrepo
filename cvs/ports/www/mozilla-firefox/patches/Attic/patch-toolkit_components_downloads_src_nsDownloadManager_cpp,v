head	1.5;
access;
symbols
	OPENBSD_4_9:1.3.0.4
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2011.06.28.05.43.57;	author landry;	state dead;
branches;
next	1.4;

1.4
date	2011.03.30.21.39.14;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2010.07.22.21.42.13;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.26.19.55.58;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2009.09.18.20.35.27;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to mozilla-firefox 5.0:

That's the first release following the new fast scheme of one major
release every 6 weeks..
Check out http://www.mozilla.com/en-US/firefox/5.0/releasenotes/ for
release notes. Note that it's still badly broken on sparc64, and
unlikely to be fixed soon... you still have www/firefox36.

Tested by (at least, probably forgetting some..) rpointel@@, pea@@,
ckuethe@@ and myself on amd64, bluhm@@ on i386 and ajacoutot@@ on macppc
(thanks!)
ok rpointel@@
@
text
@$OpenBSD: patch-toolkit_components_downloads_src_nsDownloadManager_cpp,v 1.4 2011/03/30 21:39:14 landry Exp $
--- toolkit/components/downloads/src/nsDownloadManager.cpp.orig	Tue Jan 11 04:27:36 2011
+++ toolkit/components/downloads/src/nsDownloadManager.cpp	Sat Jan 15 01:03:06 2011
@@@@ -1166,7 +1166,7 @@@@ nsDownloadManager::GetDefaultDownloadsDirectory(nsILoc
     rv = downloadDir->Exists(&exists);
     NS_ENSURE_SUCCESS(rv, rv);
     if (!exists) {
-      rv = downloadDir->Create(nsIFile::DIRECTORY_TYPE, 0755);
+      rv = downloadDir->Create(nsIFile::DIRECTORY_TYPE, 0700);
       NS_ENSURE_SUCCESS(rv, rv);
     }
   }
@@@@ -1274,7 +1274,7 @@@@ nsDownloadManager::GetUserDownloadsDirectory(nsILocalF
           (void)customDirectory->Exists(&exists);
 
           if (!exists) {
-            rv = customDirectory->Create(nsIFile::DIRECTORY_TYPE, 0755);
+            rv = customDirectory->Create(nsIFile::DIRECTORY_TYPE, 0700);
             if (NS_SUCCEEDED(rv)) {
               customDirectory.forget(aResult);
               return NS_OK;
@


1.4
log
@Lo and behold, update to mozilla-firefox 4.0 !
Too much changes to list them, just enjoy it. Thanks to the ones who
tested the betas/rc.
ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-toolkit_components_downloads_src_nsDownloadManager_cpp,v 1.3 2010/07/22 21:42:13 landry Exp $
@


1.3
log
@Security/Reliability update to firefox 3.6.7, fixes MFSA-2010-34 -> 47
http://www.mozilla.org/security/known-vulnerabilities/firefox36.html
ok naddy@@
@
text
@d1 4
a4 4
$OpenBSD: patch-toolkit_components_downloads_src_nsDownloadManager_cpp,v 1.2 2010/04/26 19:55:58 landry Exp $
--- toolkit/components/downloads/src/nsDownloadManager.cpp.orig	Tue Jul 13 21:10:35 2010
+++ toolkit/components/downloads/src/nsDownloadManager.cpp	Wed Jul 21 09:54:47 2010
@@@@ -1160,7 +1160,7 @@@@ nsDownloadManager::GetDefaultDownloadsDirectory(nsILoc
d13 1
a13 1
@@@@ -1256,7 +1256,7 @@@@ nsDownloadManager::GetUserDownloadsDirectory(nsILocalF
@


1.2
log
@Update www/mozilla-firefox from 3.0.19 to 3.6.3, merging the wip done in
www/firefox36 mostly by martynas@@ and naddy@@.
Note that the java plugin from devel/jdk currently doesn't work with this
version of firefox, in the meantime users really needed it will have to
use www/firefox35.
ok naddy@@
@
text
@d1 4
a4 4
$OpenBSD: patch-toolkit_components_downloads_src_nsDownloadManager_cpp,v 1.1.1.1 2010/03/29 20:44:12 naddy Exp $
--- toolkit/components/downloads/src/nsDownloadManager.cpp.orig	Wed Jan  6 05:35:32 2010
+++ toolkit/components/downloads/src/nsDownloadManager.cpp	Sun Jan 10 17:52:45 2010
@@@@ -1156,7 +1156,7 @@@@ nsDownloadManager::GetDefaultDownloadsDirectory(nsILoc
d13 1
a13 1
@@@@ -1252,7 +1252,7 @@@@ nsDownloadManager::GetUserDownloadsDirectory(nsILocalF
@


1.1
log
@- create downloads dir with mode 0700 instead
- pass --disable-crashreporter
@
text
@d1 21
a21 30
$OpenBSD$
--- toolkit/components/downloads/src/nsDownloadManager.cpp.orig	Fri Jan  9 14:33:18 2009
+++ toolkit/components/downloads/src/nsDownloadManager.cpp	Mon Sep 14 11:49:26 2009
@@@@ -1294,7 +1294,7 @@@@ nsDownloadManager::GetUserDownloadsDirectory(nsILocalF
         NS_ENSURE_SUCCESS(rv, rv);
         (*aResult)->Exists(&bRes);
         if (!bRes) {
-          rv = (*aResult)->Create(nsIFile::DIRECTORY_TYPE, 0755);
+          rv = (*aResult)->Create(nsIFile::DIRECTORY_TYPE, 0700);
           NS_ENSURE_SUCCESS(rv, rv);
         }
         return NS_OK;
@@@@ -1312,7 +1312,7 @@@@ nsDownloadManager::GetUserDownloadsDirectory(nsILocalF
             NS_ADDREF(*aResult = customDirectory);
             return NS_OK;
           }
-          rv = customDirectory->Create(nsIFile::DIRECTORY_TYPE, 0755);
+          rv = customDirectory->Create(nsIFile::DIRECTORY_TYPE, 0700);
           NS_ENSURE_SUCCESS(rv, rv);
           NS_ADDREF(*aResult = customDirectory);
           return NS_OK;
@@@@ -1321,7 +1321,7 @@@@ nsDownloadManager::GetUserDownloadsDirectory(nsILocalF
         NS_ENSURE_SUCCESS(rv, rv);
         (*aResult)->Exists(&bRes);
         if (!bRes) {
-          rv = (*aResult)->Create(nsIFile::DIRECTORY_TYPE, 0755);
+          rv = (*aResult)->Create(nsIFile::DIRECTORY_TYPE, 0700);
           NS_ENSURE_SUCCESS(rv, rv);
           // Update dir pref
           prefBranch->SetComplexValue(NS_PREF_DIR,
@

