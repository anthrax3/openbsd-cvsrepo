head	1.4;
access;
symbols
	OPENBSD_5_2:1.2.0.10
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.8
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2012.10.10.20.56.14;	author landry;	state dead;
branches;
next	1.3;

1.3
date	2012.09.01.13.56.45;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.28.06.56.38;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2010.04.26.19.55.58;	author landry;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to firefox 16.0.

- see http://www.mozilla.org/en-US/firefox/16.0/releasenotes/ for details
- install an icon into share/pixmaps to fix desktop file icon path
- garbage collect patch-browser_installer_Makefile_in, and
  patch-browser_installer_package-manifest_in, were from upstream
- remove patch-build_unix_mozilla_in, useless since bin/firefox is not a
  script anymore since a while
- remove patch-build_unix_run-mozilla_sh, firefox can be directly
  debugged in gdb now. update README accordingly
- remove patch-config_autoconf_mk_in, XCFLAGS are already passed
- update patch-content_media_gstreamer_nsGStreamerReader_cpp to fix
  gstreamer on BE archs (#777696)
- update patch-extensions_spellcheck_hunspell_src_mozHunspell_cpp after
  nsILocalFile api removal
- remove useless patch-gfx_thebes_Makefile_in pangox patch
- fix PLIST to use proper MOZILLA_VERSION instead of beta MOZILLA_VER
@
text
@$OpenBSD: patch-build_unix_mozilla_in,v 1.3 2012/09/01 13:56:45 landry Exp $
--- build/unix/mozilla.in.orig	Wed Aug 15 07:47:07 2012
+++ build/unix/mozilla.in	Sun Aug 19 13:30:25 2012
@@@@ -18,6 +18,11 @@@@
 #uncomment for debugging
 #set -x
 
+LIMIT=`ulimit -n`
+if [ $LIMIT -lt 128 -a "${LIMIT}" != "unlimited" ]; then
+	ulimit -Sn 128
+fi
+
 moz_libdir=%MOZAPPDIR%
 
 # Use run-mozilla.sh in the current dir if it exists
@@@@ -99,6 +104,12 @@@@ do
       ;;
   esac
 done
+
+if [ `${X11BASE}/bin/fc-list | wc -l` -eq 0 ]; then
+	export GDK_USE_XFT=0
+fi
+
+export MOZ_PLUGIN_PATH=${MOZ_PLUGIN_PATH:=${LOCALBASE}/lib/mozilla-plugins}
 
 if [ $debugging = 1 ]
 then
@


1.3
log
@Update to firefox 15.0.

- see http://www.mozilla.org/en-US/firefox/15.0/releasenotes/
- add -Os hack to fix a relocation error when linking on ppc (as was
  done in tb since 10..)
- garbage collect nsSound.cpp, the original one uses libcanberra
  properly and thus sndio.
- remove patch from #750620, merged upstream (mfbt/double-conversion)
- remove patches from #747257, merged upstream (gstreamer fix)
- remove patches from #691898, merged upstream (yarr jit ppc)
@
text
@d1 1
a1 1
$OpenBSD: patch-build_unix_mozilla_in,v 1.2 2010/04/28 06:56:38 landry Exp $
@


1.2
log
@Various cleanups, as done in www/firefox35 :
- use SUBST_CMD instead of perl -pi -e
- use ${LOCALBASE}/${TRUEPREFIX}/${X11BASE} instead of the handpatched
  _XXX_ ones
- harmonize default systemwide plugins/extensions search path to
  lib/mozilla/{plugins,extensions} as done in other mozilla ports
@
text
@d1 4
a4 4
$OpenBSD: patch-build_unix_mozilla_in,v 1.1 2010/04/26 19:55:58 landry Exp $
--- build/unix/mozilla.in.orig	Wed Jan  6 05:35:11 2010
+++ build/unix/mozilla.in	Sun Jan 10 17:47:23 2010
@@@@ -50,6 +50,11 @@@@
d16 1
a16 1
@@@@ -131,6 +136,12 @@@@ do
@


1.1
log
@Update www/mozilla-firefox from 3.0.19 to 3.6.3, merging the wip done in
www/firefox36 mostly by martynas@@ and naddy@@.
Note that the java plugin from devel/jdk currently doesn't work with this
version of firefox, in the meantime users really needed it will have to
use www/firefox35.
ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-build_unix_mozilla_in,v 1.1.1.1 2010/03/29 20:44:09 naddy Exp $
d21 1
a21 1
+if [ `_X11BASE_/bin/fc-list | wc -l` -eq 0 ]; then
d25 1
a25 1
+export MOZ_PLUGIN_PATH=${MOZ_PLUGIN_PATH:=_LOCALBASE_/lib/mozilla-plugins}
@

