head	1.28;
access;
symbols
	OPENBSD_5_8:1.26.0.4
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.12.0.2
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.28
date	2015.09.24.20.21.15;	author landry;	state dead;
branches;
next	1.27;
commitid	ZpTmiMdCoguHXVvL;

1.27
date	2015.08.11.21.14.53;	author landry;	state Exp;
branches;
next	1.26;
commitid	PZV1YnNy4qgq0kAy;

1.26
date	2015.04.02.18.17.50;	author landry;	state Exp;
branches;
next	1.25;
commitid	gL59hhX5298RVohE;

1.25
date	2015.03.23.21.02.03;	author landry;	state Exp;
branches;
next	1.24;
commitid	WmKgFwPRmsexbf7u;

1.24
date	2014.09.02.16.43.04;	author landry;	state Exp;
branches;
next	1.23;
commitid	oUjXdZ5B9Zpw9SaL;

1.23
date	2014.07.24.18.03.00;	author landry;	state Exp;
branches;
next	1.22;
commitid	k2YGqYP6dSDkuIKd;

1.22
date	2013.12.12.19.53.19;	author landry;	state Exp;
branches;
next	1.21;

1.21
date	2013.10.31.07.58.25;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2013.08.08.06.57.12;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.26.19.29.15;	author landry;	state Exp;
branches
	1.19.2.1;
next	1.18;

1.18
date	2013.05.30.14.17.32;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2013.04.06.14.44.52;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2013.01.11.22.57.14;	author landry;	state Exp;
branches;
next	1.15;

1.15
date	2012.11.24.10.21.50;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2012.10.10.20.56.14;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2012.09.01.13.56.45;	author landry;	state Exp;
branches;
next	1.12;

1.12
date	2012.06.11.15.29.56;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2012.04.30.15.28.42;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2012.03.16.21.31.24;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2012.01.11.02.42.48;	author nigel;	state Exp;
branches;
next	1.8;

1.8
date	2011.12.08.01.47.02;	author nigel;	state Exp;
branches;
next	1.7;

1.7
date	2011.10.03.21.06.09;	author landry;	state Exp;
branches;
next	1.6;

1.6
date	2011.08.23.20.14.52;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2011.06.28.05.43.57;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2011.04.19.09.16.33;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.30.21.39.14;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2011.03.02.14.39.48;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2011.01.14.22.49.47;	author landry;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2011.04.27.02.55.44;	author william;	state Exp;
branches;
next	;

1.19.2.1
date	2013.11.14.09.57.07;	author jasper;	state Exp;
branches;
next	1.19.2.2;

1.19.2.2
date	2013.12.01.22.06.19;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Update to firefox 41.0.

- See https://www.mozilla.org/en-US/firefox/41.0/releasenotes/
- Fixes MFSA 2015-96->114
- Add patch to workaround build failure on 32-bits (#1192556)
- Note that powerpc still fails due to the same issue but a
 hack^Wworkaround hasnt been found yet.

Firefox 42 will probably default to build with Gtk3.
@
text
@$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.27 2015/08/11 21:14:53 landry Exp $
set secure_delete PRAGMA on by default, instead of using internal sqlite copy
https://bugzilla.mozilla.org/show_bug.cgi?id=546162
--- storage/src/mozStorageConnection.cpp.orig	Fri Jul  3 02:42:15 2015
+++ storage/src/mozStorageConnection.cpp	Sun Jul  5 22:38:40 2015
@@@@ -721,6 +721,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
     return convertResultCode(srv);
   }
 
+  srv = ::sqlite3_exec(mDBConn, "PRAGMA secure_delete = ON", NULL, NULL, NULL);
+  if (srv != SQLITE_OK) {
+    ::sqlite3_close(mDBConn);
+    mDBConn = nullptr;
+    return convertResultCode(srv);
+  }
+
   // Set the synchronous PRAGMA, according to the preference.
   switch (Service::getSynchronousPref()) {
     case 2:
@


1.27
log
@Update to firefox{,-i18n} 40.0.

- See https://www.mozilla.org/en-US/firefox/40.0/releasenotes/
- Fixes MFSA-2015-79->92
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.26 2015/04/02 18:17:50 landry Exp $
@


1.26
log
@Update to firefox 37.0.

- See https://www.mozilla.org/en-US/firefox/37.0/releasenotes/
- Fixes MFSA 2015-30 -> 42
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.25 2015/03/23 21:02:03 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Fri Mar 13 03:47:54 2015
+++ storage/src/mozStorageConnection.cpp	Mon Mar 16 22:10:46 2015
@@@@ -713,6 +713,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.25
log
@Security update to firefox 36.0.4.

- See https://www.mozilla.org/en-US/firefox/36.0.4/releasenotes/
- Fixes MFSA 2015-28/29 (Pwn2Own)
- While here, backport commit from ratchov@@ in #1144087 fixing audio
  glitches in the sndio backend when playing youtube videos
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.24 2014/09/02 16:43:04 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Sat Mar 21 04:42:37 2015
+++ storage/src/mozStorageConnection.cpp	Mon Mar 23 21:47:01 2015
@@@@ -700,6 +700,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.24
log
@Update to firefox 32.0

- see https://www.mozilla.org/en-US/firefox/32.0/releasenotes/
- remove patch-toolkit_components_downloads_nsDownloadManager_cpp and
  patch-xpcom_io_SpecialSystemDirectory_cpp fiddling with modes when
creating user dirs, they never made sense to me, and this is the wrong
place to touch this.
- remove patch-webapprt_moz_build, patch-webapprt_gtk2_Makefile_in and
  patch-configure_in from #1012447, merged upstream
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.23 2014/07/24 18:03:00 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Jul 23 05:14:20 2014
+++ storage/src/mozStorageConnection.cpp	Thu Jul 24 20:47:22 2014
@@@@ -696,6 +696,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.23
log
@Update to firefox 31.0.

- See https://www.mozilla.org/en-US/firefox/31.0/releasenotes/
- Fixes MFSA 2014-56->66
- rm/add aboutcerterror/aboutCertError.xhtml patch, corresponding code
  moved - i'm still pondering why we keep that patch..
- remove patch-browser_branding_official_Makefile_in, merged (#992613)
- remove chunk 1 of patch-configure_in, merged (#991686)
- improve skia/i386/sse3 patches from #1028827, for something simpler and
  closer to what will be commited upstream
- fix README to point users to gstreamer1-plugins-libav instead of
  gstreamer-ffmpeg, reminded by jturner@@ a while ago

ok sthen@@ jasper@@ naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.22 2013/12/12 19:53:19 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Jun 11 01:54:51 2014
+++ storage/src/mozStorageConnection.cpp	Sat Jun 14 16:02:37 2014
@@@@ -693,6 +693,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.22
log
@Update to firefox 26.0.

- see http://www.mozilla.org/en-US/firefox/26.0/releasenotes/
- fixes MFSA 2013-104 -> 117
- remove now useless sydney_audio_sndio.c file, nothing uses it anymore
- remove patch-ipc_chromium_src_base_dir_reader_bsd_h-from (#909005),
  the getdents() patch has been merged upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.21 2013/10/31 07:58:25 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Oct 29 07:05:37 2013
+++ storage/src/mozStorageConnection.cpp	Fri Nov  1 10:23:12 2013
@@@@ -677,6 +677,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.21
log
@Update to firefox 25.0.

- see http://www.mozilla.org/en-US/firefox/25.0/releasenotes/
- fixes MFSA 2013-93 -> 102
- remove USE_GROFF (from naddy@@)
- remove LDEP on gst-plugins-base, gst is dlopened at runtime now, and
  there's a RDEP on gst-plugins-good anyway.
- add patch from #927898 to fix gst runtime dlopening (reminded by dcoppa@@)
- add comment about ipc patches from #927810 & #909005
- remove 3 useless patches
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.20 2013/08/08 06:57:12 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Oct  1 11:53:41 2013
+++ storage/src/mozStorageConnection.cpp	Sun Oct  6 18:18:54 2013
@@@@ -687,6 +687,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.20
log
@Update to firefox 23.0.

- http://www.mozilla.org/en-US/firefox/23.0/releasenotes/
- fixes MFSA 2013-63->75
- also use --disable-debug-symbols on powerpc otherwise linking fails..
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.19 2013/06/26 19:29:15 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Jun 25 22:02:33 2013
+++ storage/src/mozStorageConnection.cpp	Wed Jul  3 23:33:27 2013
@@@@ -602,6 +602,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.19
log
@Update to firefox 22.0.

- see http://www.mozilla.org/en-US/firefox/22.0/releasenotes/ (ok,
  webrtc isnt enabled yet by default on *BSD but we're working on it :)
- fixes MFSA 2013-49->62
- remove all patches related to sydneyaudio which got removed upstream,
  sound uses libcubeb which has a native sndio backend since ages (thx
to ratchov!). also remove related post-patch target while here.
- add temporary workaround (TERM=xterm) for bug #878089
- switch i386 to use clang again, using --disable-debug-symbols to make
  the code smaller (who said 'gross hack' ?)
- update patch-gfx_thebes_gfxPlatform_cpp to match what got commited
  upstream in r52b02042b27f
- remove patch-js_src_vm_SPSProfiler_cpp which unbroke powerpc, finally
  got commited in 22 branch
- rework fx-i18n's MESSAGE to be more in line with reality (discussed
  with Marcus Merighi)
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.18 2013/05/30 14:17:32 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed May 29 03:16:25 2013
+++ storage/src/mozStorageConnection.cpp	Fri May 31 16:53:04 2013
@@@@ -601,6 +601,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.19.2.1
log
@browsers have become a major security issue, so bring firefox up to date in -stable by
bumping it to 24.1.0esr and sync language packs.

ok landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.20 2013/08/08 06:57:12 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Jun 25 22:02:33 2013
+++ storage/src/mozStorageConnection.cpp	Wed Jul  3 23:33:27 2013
@@@@ -602,6 +602,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.19.2.2
log
@update to mozilla-firefox 24.1.1esr which includes fixes for MFSA2013-103

ok landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.1.1.1 2013/11/20 20:57:29 landry Exp $
d4 2
a5 2
--- storage/src/mozStorageConnection.cpp.orig	Wed Nov 13 01:09:34 2013
+++ storage/src/mozStorageConnection.cpp	Wed Nov 20 20:51:13 2013
@


1.18
log
@Update to firefox 21.0.

- See http://www.mozilla.org/en-US/firefox/21.0/releasenotes/
- Fixes MFSA 2013-41->48
- switch back again to use gcc 4.6 on i386, ld hits the memory exhausted
  wall again with objects built with clang. doh.
- stuff shuffled around in PLIST

*BIG SCARY WARNING FOR PRIVACY-CONCERNED USERS*
Firefox 21 starts implementing something called 'Firefox Health Report',
which sends _anonymized_ data to mozilla servers about Firefox
performance.
This is opt-out - users will be prompted at first start if they want to
keep it enabled. This is not turned as an opt-in knob in the port on
purpose, because i got no feedback on this, and that will allow upstream
to know they have some OpenBSD users. This is of course subject to change.

See https://blog.mozilla.org/futurereleases/2013/05/14/firefox-heal-thyself/
& about:healthreport for more info about this.
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.17 2013/04/06 14:44:52 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Apr  2 04:38:29 2013
+++ storage/src/mozStorageConnection.cpp	Thu Apr 11 17:37:12 2013
@@@@ -618,6 +618,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.17
log
@Update to firefox 20.0.

- See http://www.mozilla.org/en-US/firefox/20.0/releasenotes/
- Fixes MFSA 2013-30->40
- switch back to use clang on i386, now that llvm got fixed there
- backport libffi i386 fix (TODO: switch to systemwide libffi if possible)
- add nicer fix to avoid installing the sdk lib/headers
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.16 2013/01/11 22:57:14 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Feb 20 14:28:40 2013
+++ storage/src/mozStorageConnection.cpp	Sun Feb 24 17:33:12 2013
@@@@ -617,6 +617,13 @@@@ Connection::initializeInternal(nsIFile* aDatabaseFile)
@


1.16
log
@Update to firefox 18.0 :

- see http://www.mozilla.org/en-US/firefox/18.0/releasenotes/
- fixes MFSA 2013-14 -> 20
- build with clang on i386/amd64 and with gcc 4.6 on powerpc. Required
  since upstream dropped support for gcc < 4.4.
- don't build against systemwide jpeg anymore since it now needs its
  internal libjpeg-turbo.
- add a stub method to sydney_audio_sndio.c in post-patch. Cant add it
  to the file in cvs directly otherwise it breaks other mozillas
- remove patch-ipc_chromium_src_base_atomicops_h, not needed anymore
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.15 2012/11/24 10:21:50 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Nov 21 17:11:26 2012
+++ storage/src/mozStorageConnection.cpp	Mon Nov 26 22:15:20 2012
@@@@ -567,6 +567,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.15
log
@Update to firefox 17.0.

- see http://www.mozilla.org/en-US/firefox/17.0/releasenotes/ for details
- enable the gio/libnotify interaction, since it brings no additional
  dep. libnotify will be dlopened at runtime if present, and gio is
already in the dependency chain. The latter will interact with the gio mime
database for file associations, and firefox will ask the user if he
wants to register it as the default http:// handler. The former will
show a notify popup upon download completion, among others.
- add build depends on yasm in i386/amd64 for webm
- remove patch-browser_app_profile_firefox_js, the updater is already disabled
- remove gstreamer patches from #776838, #777696 & #747257, merged upstream
- remove ipc_message_utils.h patch from #775428, commited upstream
- remove mozalloc.cpp patch, <sys/types.h> is already included above
- remove xpcshell hang patchset from #706955, cant reproduce anymore
- remove patch-security_manager_ssl_src_Makefile_in, unneeded
- remove OS.File extra logging from #785200, merged upstream
- add patch-toolkit_system_gnome_nsGIOService_cpp, workaround for
  #805202 (libgio-2.0.so dlopening), to be removed in fx 19
- remove xpcom arm patch from #783875, merged upstream

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.14 2012/10/10 20:56:14 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Oct 17 16:33:06 2012
+++ storage/src/mozStorageConnection.cpp	Wed Oct 17 21:59:04 2012
@@@@ -554,6 +554,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.14
log
@Update to firefox 16.0.

- see http://www.mozilla.org/en-US/firefox/16.0/releasenotes/ for details
- install an icon into share/pixmaps to fix desktop file icon path
- garbage collect patch-browser_installer_Makefile_in, and
  patch-browser_installer_package-manifest_in, were from upstream
- remove patch-build_unix_mozilla_in, useless since bin/firefox is not a
  script anymore since a while
- remove patch-build_unix_run-mozilla_sh, firefox can be directly
  debugged in gdb now. update README accordingly
- remove patch-config_autoconf_mk_in, XCFLAGS are already passed
- update patch-content_media_gstreamer_nsGStreamerReader_cpp to fix
  gstreamer on BE archs (#777696)
- update patch-extensions_spellcheck_hunspell_src_mozHunspell_cpp after
  nsILocalFile api removal
- remove useless patch-gfx_thebes_Makefile_in pangox patch
- fix PLIST to use proper MOZILLA_VERSION instead of beta MOZILLA_VER
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.13 2012/09/01 13:56:45 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Aug 28 17:34:44 2012
+++ storage/src/mozStorageConnection.cpp	Sat Sep  1 23:48:17 2012
@@@@ -551,6 +551,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
d13 1
a13 1
+    mDBConn = nsnull;
@


1.13
log
@Update to firefox 15.0.

- see http://www.mozilla.org/en-US/firefox/15.0/releasenotes/
- add -Os hack to fix a relocation error when linking on ppc (as was
  done in tb since 10..)
- garbage collect nsSound.cpp, the original one uses libcanberra
  properly and thus sndio.
- remove patch from #750620, merged upstream (mfbt/double-conversion)
- remove patches from #747257, merged upstream (gstreamer fix)
- remove patches from #691898, merged upstream (yarr jit ppc)
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.12 2012/06/11 15:29:56 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Aug 15 07:48:19 2012
+++ storage/src/mozStorageConnection.cpp	Sun Aug 19 13:50:39 2012
@@@@ -663,6 +663,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.12
log
@Update to firefox 13.0.

See https://www.mozilla.org/en-US/firefox/13.0/releasenotes/ for details
- set SEPARATE_BUILD (workarounds #736961)
- cleanup useless dirs (from #717616)
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.11 2012/04/30 15:28:42 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed May  2 05:17:12 2012
+++ storage/src/mozStorageConnection.cpp	Wed May  9 23:06:35 2012
@@@@ -700,6 +700,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.11
log
@Update to firefox 12.0.

- see http://www.mozilla.org/en-US/firefox/12.0/releasenotes/ for details
- two patches moved (patch-widget_src_xpwidgets_nsPrintSettingsImpl_cpp
  and patch-widget_src_gtk2_Makefile_in)
- add two new patches for bug #691898 (patch-js_src_jsapi_cpp and
  /patch-js_src_jsprvtd_h)
- add patch-gfx_thebes_gfxPlatform_cpp to workaround regression
  introduced in bug #715658, which prevents one from building against
systemwide cairo.
- patch-extensions_auth_nsAuthGSSAPI_cpp from bug #667325 got merged
- patch-js_src_js-config_h_in and patch-js_src_jscpucfg_h from #714312 got
  merged
- patch-ipc_chromium_src_base_dir_reader_posix_ -from #714315 got merged
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.10 2012/03/16 21:31:24 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Apr 11 15:55:19 2012
+++ storage/src/mozStorageConnection.cpp	Wed Apr 18 22:09:15 2012
@@@@ -701,6 +701,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.10
log
@Update to firefox 11.0.
- Fixes MFSA 2012-12->19
- see http://www.mozilla.org/en-US/firefox/11.0/releasenotes/
- complete patchset for #691898, still fixes build on ppc (and hopefully
  commited in firefox 14...)
- add patchset from #706955, workarounds #669050 (xpcshell hangs during
  make install and chokes on CSPUtils.csm, threads related..)
- remove obsolete/commited patches
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.9 2012/01/11 02:42:48 nigel Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Thu Feb  2 00:39:27 2012
+++ storage/src/mozStorageConnection.cpp	Tue Feb 14 18:42:12 2012
@@@@ -642,6 +642,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.9
log
@Update firefox to 9.0.1
Change from mpi@@ for macppc

Ok landry@@ stsp@@ mpi@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.8 2011/12/08 01:47:02 nigel Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Wed Dec  7 06:28:02 2011
+++ storage/src/mozStorageConnection.cpp	Sat Dec 10 16:53:04 2011
@@@@ -593,6 +593,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.8
log
@Update Firefox v7.0.1 to v8.0.1 continued
patches from mpi@@ for macppc

Ok mpi@@, dcoppa@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.7 2011/10/03 21:06:09 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Fri Nov  4 21:34:16 2011
+++ storage/src/mozStorageConnection.cpp	Thu Nov 10 00:21:27 2011
@@@@ -591,6 +591,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.7
log
@Update to firefox 7.0.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.6 2011/08/23 20:14:52 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Thu Aug 25 02:37:18 2011
+++ storage/src/mozStorageConnection.cpp	Mon Aug 29 14:54:56 2011
@@@@ -595,6 +595,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.6
log
@Update to firefox 6.0.

See http://www.mozilla.com/en-US/firefox/6.0/releasenotes/.
Remove patches merged upstream (#648721, #651461, #643122, #634609 and
maybe others).
ok rpointel@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.5 2011/06/28 05:43:57 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Fri Jul 22 00:18:53 2011
+++ storage/src/mozStorageConnection.cpp	Sat Jul 30 15:37:51 2011
@@@@ -555,6 +555,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.5
log
@Update to mozilla-firefox 5.0:

That's the first release following the new fast scheme of one major
release every 6 weeks..
Check out http://www.mozilla.com/en-US/firefox/5.0/releasenotes/ for
release notes. Note that it's still badly broken on sparc64, and
unlikely to be fixed soon... you still have www/firefox36.

Tested by (at least, probably forgetting some..) rpointel@@, pea@@,
ckuethe@@ and myself on amd64, bluhm@@ on i386 and ajacoutot@@ on macppc
(thanks!)
ok rpointel@@
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.4 2011/04/19 09:16:33 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Fri May 27 18:12:44 2011
+++ storage/src/mozStorageConnection.cpp	Tue May 31 22:18:26 2011
@@@@ -558,6 +558,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.4
log
@Add comments/links to bugzilla for a bunch of patches pushed upstream:
https://bugzilla.mozilla.org/show_bug.cgi?id=546162
https://bugzilla.mozilla.org/show_bug.cgi?id=589754
https://bugzilla.mozilla.org/show_bug.cgi?id=648721
https://bugzilla.mozilla.org/show_bug.cgi?id=650742
https://bugzilla.mozilla.org/show_bug.cgi?id=650749
Add patch for https://bugzilla.mozilla.org/show_bug.cgi?id=633193
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.3 2011/03/30 21:39:14 landry Exp $
d4 3
a6 3
--- storage/src/mozStorageConnection.cpp.orig	Sat Mar 19 16:21:29 2011
+++ storage/src/mozStorageConnection.cpp	Sat Mar 19 16:22:05 2011
@@@@ -464,6 +464,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile,
@


1.3
log
@Lo and behold, update to mozilla-firefox 4.0 !
Too much changes to list them, just enjoy it. Thanks to the ones who
tested the betas/rc.
ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
@


1.2
log
@Update to firefox 3.6.14. (Fixes MFSA-2011-01->11)
Patches for https://bugzilla.mozilla.org/show_bug.cgi?id=573039 merged
upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.1 2011/01/14 22:49:47 landry Exp $
d3 3
a5 3
--- storage/src/mozStorageConnection.cpp.orig	Fri Feb 18 19:33:38 2011
+++ storage/src/mozStorageConnection.cpp	Wed Mar  2 10:30:58 2011
@@@@ -384,6 +384,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile)
d16 3
a18 3
   // Set the synchronous PRAGMA, according to the pref
   nsCOMPtr<nsIPrefBranch> pref(do_GetService(NS_PREFSERVICE_CONTRACTID));
   PRInt32 synchronous = 1; // Default to NORMAL if pref not set
@


1.1
log
@Add a patch doing PRAGMA secure_delete ON when opening connection to
sqlite database. Allows us to build against system sqlite3 again, and
get rid of the infamous symbol size mismatch warning reported several
times on ports@@.
See https://bugzilla.mozilla.org/show_bug.cgi?id=445164 for why mozilla
now hard-requires secure_delete, and
https://bugzilla.mozilla.org/show_bug.cgi?id=546162 for the reasons they
don't want to make that an option and forces us to do such hacks.
ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- storage/src/mozStorageConnection.cpp.orig	Tue Jan 11 22:23:40 2011
+++ storage/src/mozStorageConnection.cpp	Tue Jan 11 22:26:20 2011
@@@@ -383,6 +383,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile)
@


1.1.2.1
log
@SECURITY UPDATE to mozilla-firefox-3.6.16

ok jasper landry

thanks to landry for doing all the work in -current's www/firefox36,
which this was based on.
@
text
@d1 1
a1 1
$OpenBSD: patch-storage_src_mozStorageConnection_cpp,v 1.1 2011/01/14 22:49:47 landry Exp $
d3 3
a5 3
--- storage/src/mozStorageConnection.cpp.orig	Fri Feb 18 19:33:38 2011
+++ storage/src/mozStorageConnection.cpp	Wed Mar  2 10:30:58 2011
@@@@ -384,6 +384,13 @@@@ Connection::initialize(nsIFile *aDatabaseFile)
@


