head	1.12;
access;
symbols
	OPENBSD_4_9:1.11.0.4
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.6
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.4
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.2
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.8.0.4
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.6
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.4
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2
	wilfried_2004-04-15:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2011.06.19.21.21.30;	author landry;	state dead;
branches;
next	1.11;

1.11
date	2010.04.26.19.55.58;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2008.11.20.23.41.32;	author martynas;	state Exp;
branches;
next	1.9;

1.9
date	2008.07.04.13.47.25;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2007.03.27.16.04.37;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2007.03.01.22.46.06;	author robert;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2007.01.12.21.46.17;	author kurt;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.17.19.14.51;	author kurt;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.20.23.44.00;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.09.15.43.47;	author wilfried;	state Exp;
branches;
next	1.2;

1.2
date	2004.03.01.07.14.48;	author pvalchev;	state Exp;
branches
	1.2.6.1;
next	1.1;

1.1
date	2004.02.15.19.37.25;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.15.19.37.25;	author wilfried;	state Exp;
branches;
next	;

1.2.6.1
date	2005.06.06.20.30.29;	author robert;	state Exp;
branches;
next	;

1.7.2.1
date	2007.05.01.16.22.32;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Remove duplicate/unused patches - they are in security/nss, which
mozilla ports uses.
@
text
@$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.11 2010/04/26 19:55:58 landry Exp $
--- security/coreconf/OpenBSD.mk.orig	Tue Mar 16 10:57:06 2010
+++ security/coreconf/OpenBSD.mk	Sat Mar 27 16:34:28 2010
@@@@ -56,7 +56,7 @@@@ OS_LIBS			+= -pthread
 DSO_LDOPTS		+= -pthread
 endif
 
-DLL_SUFFIX		= so.1.0
+DLL_SUFFIX		= so.${SO_VERSION}
 
 OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) -ansi -Wall -Wno-switch -pipe -DOPENBSD
 
@@@@ -64,10 +64,10 @@@@ OS_LIBS			= 
 
 ARCH			= openbsd
 
-DSO_CFLAGS		= -fPIC -DPIC
+DSO_CFLAGS		= -I${LOCALBASE}/include -DRAND_DEV=\"/dev/arandom\" -fPIC -DPIC
 DSO_LDOPTS		= -shared -fPIC -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
 
-MKSHLIB			= $(CC) $(DSO_LDOPTS)
+MKSHLIB			= $(CC) -Wl,-Bsymbolic $(DSO_LDOPTS)
 
 USE_SYSTEM_ZLIB		= 1
 ZLIB_LIBS		= -lz
@


1.11
log
@Update www/mozilla-firefox from 3.0.19 to 3.6.3, merging the wip done in
www/firefox36 mostly by martynas@@ and naddy@@.
Note that the java plugin from devel/jdk currently doesn't work with this
version of firefox, in the meantime users really needed it will have to
use www/firefox35.
ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.1.1.1 2010/03/29 20:44:12 naddy Exp $
@


1.10
log
@it is the right time to update to mozilla-firefox-3.0.4, which has
been tested good enough, and i've fixed all the issues i'm aware
of.  furthermore 2.0 branch has basically reached eol, since there
will be only one minor update (2.0.0.19)
discussed with kurt@@, naddy@@ and porters
pkgname change handling help naddy@@
ok naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.1.1.1 2008/07/25 01:52:55 martynas Exp $
--- security/coreconf/OpenBSD.mk.orig	Thu Nov 22 06:39:56 2007
+++ security/coreconf/OpenBSD.mk	Sun Apr 13 18:35:49 2008
d13 13
@


1.9
log
@security update to mozilla-firefox-2.0.0.15, fixes MFSA 2008-33,
MFSA 2008-32, MFSA 2008-31, MFSA 2008-30, MFSA 2008-29, MFSA 2008-28,
MFSA 2008-27, MFSA 2008-25, MFSA 2008-24, MFSA 2008-23, MFSA 2008-22,
MFSA 2008-21
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Firefox2.0.0.15
ok kurt@@, naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.8 2007/03/27 16:04:37 martynas Exp $
--- security/coreconf/OpenBSD.mk.orig	Sun May  6 11:08:36 2007
+++ security/coreconf/OpenBSD.mk	Wed Jul  2 11:52:33 2008
d11 1
a11 1
 OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) -ansi -Wall -pipe -DOPENBSD
@


1.8
log
@- update to 2.0.0.3;
- don't force -Os;
ok naddy@@, kurt@@
@
text
@d1 4
a4 13
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.7 2007/03/01 22:46:06 robert Exp $
--- security/coreconf/OpenBSD.mk.orig	Sun Apr 25 18:02:17 2004
+++ security/coreconf/OpenBSD.mk	Thu Mar 22 20:29:45 2007
@@@@ -42,7 +42,7 @@@@ CC			= gcc
 CCC			= g++
 RANLIB			= ranlib
 
-CPU_ARCH		:= $(shell uname -p)
+CPU_ARCH		:= $(shell arch -s)
 ifeq ($(CPU_ARCH),i386)
 OS_REL_CFLAGS		= -Di386
 CPU_ARCH		= x86
@@@@ -55,7 +55,7 @@@@ OS_LIBS			+= -pthread
a12 9
@@@@ -64,7 +64,7 @@@@ OS_LIBS			= 
 ARCH			= openbsd
 
 DSO_CFLAGS		= -fPIC -DPIC
-DSO_LDOPTS		= -shared -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
+DSO_LDOPTS		= -shared -fPIC -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
 DSO_LDFLAGS		=
 
 MKSHLIB			= $(CC) $(DSO_LDOPTS)
@


1.7
log
@- update to version 2.0.0.2 and apply several security fixes,
therefore bump the PKGNAME to p0 now;
- enable official branding by default
- fix some WANTLIB markers

work done by Martynas Venckus; thanks.

tested by many many people; ok pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.6 2007/01/12 21:46:17 kurt Exp $
d3 1
a3 1
+++ security/coreconf/OpenBSD.mk	Fri Feb 23 21:56:45 2007
d22 1
a22 1
@@@@ -64,8 +64,8 @@@@ OS_LIBS			= 
d30 1
a30 3
-MKSHLIB			= $(CC) $(DSO_LDOPTS)
+MKSHLIB			= $(CC) -Wl,-Bsymbolic $(DSO_LDOPTS)
 
@


1.7.2.1
log
@MFC:
- update to 2.0.0.3;
- don't force -Os;
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.7 2007/03/01 22:46:06 robert Exp $
d3 1
a3 1
+++ security/coreconf/OpenBSD.mk	Thu Mar 22 20:29:45 2007
d22 1
a22 1
@@@@ -64,7 +64,7 @@@@ OS_LIBS			= 
d30 3
a32 1
 MKSHLIB			= $(CC) $(DSO_LDOPTS)
@


1.6
log
@- update to 2.0.0.1 from Martynas Venckus <martynas at altroot.org>
- add a -devel sub-package for vlc plugin
input and testing from many - thanks! okay naddy@@ pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.5 2006/11/17 19:14:51 kurt Exp $
d3 3
a5 11
+++ security/coreconf/OpenBSD.mk	Fri Nov  3 22:38:43 2006
@@@@ -37,12 +37,12 @@@@
 
 include $(CORE_DEPTH)/coreconf/UNIX.mk
 
-DEFAULT_COMPILER	= gcc
-CC			= gcc
-CCC			= g++
+DEFAULT_COMPILER	= ${CC}
+#CC			= ${CC}
+CCC			= ${CXX}
@


1.5
log
@use devel/nspr instead of internal nspr. now using libc strtod and __dtoa
via devel/nspr. okay pvalchev@@
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.4 2005/12/20 23:44:00 bernd Exp $
--- security/coreconf/OpenBSD.mk.orig	Sun Apr 25 11:02:17 2004
+++ security/coreconf/OpenBSD.mk	Mon Nov  6 16:39:58 2006
d30 1
a30 1
@@@@ -64,8 +64,9 @@@@ OS_LIBS			= 
d38 2
a39 1
 MKSHLIB			= $(CC) $(DSO_LDOPTS)
a40 1
+NSPR_LIBS		= $(shell pkg-config --libs nspr)
@


1.4
log
@Update to Firefox 1.5.

Team work by wilfried@@, kurt@@ and me.

Tested by many. Thanks a lot!

ok kurt@@ krw@@ jolan@@ ian@@ pvalchev@@
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.3 2005/04/09 15:43:47 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	Sun Apr 25 17:02:17 2004
+++ security/coreconf/OpenBSD.mk	Sat Sep 10 09:47:32 2005
d30 1
a30 1
@@@@ -64,7 +64,7 @@@@ OS_LIBS			= 
d39 2
@


1.3
log
@- bump major shlib version
- move INSTALL/DEINSTALL code to PLIST
- remove unused ldap config/patches
@
text
@d1 4
a4 4
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.2 2004/03/01 07:14:48 pvalchev Exp $
--- security/coreconf/OpenBSD.mk.orig	Tue Sep 16 22:50:50 2003
+++ security/coreconf/OpenBSD.mk	Wed Apr  6 21:19:25 2005
@@@@ -35,12 +35,12 @@@@
d21 1
a21 1
@@@@ -53,7 +53,7 @@@@ OS_LIBS			+= -pthread
d30 1
a30 1
@@@@ -62,7 +62,7 @@@@ OS_LIBS			= 
@


1.2
log
@amd64 support from FreeBSD & bugzilla
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.1.1.1 2004/02/15 19:37:25 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	2003-09-16 22:50:50.000000000 +0200
+++ security/coreconf/OpenBSD.mk	2004-02-28 14:07:55.000000000 +0100
d21 9
@


1.2.6.1
log
@Sync the port with the current one. It takes the port to firefox 1.0.4.
It fixes a lot of security vulnerabilities. For more information please visit:
http://www.mozilla.org/projects/security/known-vulnerabilities.html

ok brad@@
@
text
@d1 3
a3 3
$OpenBSD$
--- security/coreconf/OpenBSD.mk.orig	Tue Sep 16 22:50:50 2003
+++ security/coreconf/OpenBSD.mk	Wed Apr  6 21:19:25 2005
a20 9
@@@@ -53,7 +53,7 @@@@ OS_LIBS			+= -pthread
 DSO_LDOPTS		+= -pthread
 endif
 
-DLL_SUFFIX		= so.1.0
+DLL_SUFFIX		= so.${SO_VERSION}
 
 OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) -ansi -Wall -pipe -DOPENBSD
 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.7 2004/01/18 10:49:33 wilfried Exp $
d3 2
a4 2
+++ security/coreconf/OpenBSD.mk	2004-02-10 13:53:56.000000000 +0100
@@@@ -35,9 +35,9 @@@@
d16 5
a20 1
 CPU_ARCH		:= $(shell uname -p)
@


1.1.1.1
log
@import of mozilla firefox 0.8
@
text
@@
