head	1.4;
access;
symbols
	OPENBSD_4_9:1.3.0.2;
locks; strict;
comment	@# @;


1.4
date	2011.06.28.05.43.57;	author landry;	state dead;
branches;
next	1.3;

1.3
date	2011.04.15.11.43.46;	author landry;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2011.03.30.21.39.14;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.24.11.41.11;	author landry;	state Exp;
branches;
next	;

1.3.2.1
date	2011.04.27.02.55.44;	author william;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to mozilla-firefox 5.0:

That's the first release following the new fast scheme of one major
release every 6 weeks..
Check out http://www.mozilla.com/en-US/firefox/5.0/releasenotes/ for
release notes. Note that it's still badly broken on sparc64, and
unlikely to be fixed soon... you still have www/firefox36.

Tested by (at least, probably forgetting some..) rpointel@@, pea@@,
ckuethe@@ and myself on amd64, bluhm@@ on i386 and ajacoutot@@ on macppc
(thanks!)
ok rpointel@@
@
text
@$OpenBSD: patch-gfx_ots_include_opentype-sanitiser_h,v 1.3 2011/04/15 11:43:46 landry Exp $
https://bugzilla.mozilla.org/show_bug.cgi?id=643137
http://hg.mozilla.org/mozilla-central/rev/86d254c4f034
--- gfx/ots/include/opentype-sanitiser.h.orig	Thu Mar 24 11:31:50 2011
+++ gfx/ots/include/opentype-sanitiser.h	Thu Mar 24 11:32:45 2011
@@@@ -68,8 +68,10 @@@@ class OTSStream {
     }
 
     while (length >= 4) {
-      chksum_ += ntohl(*reinterpret_cast<const uint32_t*>(
-          reinterpret_cast<const uint8_t*>(data) + offset));
+      uint32_t tmp;
+      std::memcpy(&tmp, reinterpret_cast<const uint8_t *>(data) + offset,
+        sizeof(uint32_t));
+      chksum_ += ntohl(tmp);
       length -= 4;
       offset += 4;
     }
@


1.3
log
@Better patches for rpath-link as submitted upstream, cf
https://bugzilla.mozilla.org/show_bug.cgi?id=648721
While here grab js/src/Makefile.in patch from
https://bug638056.bugzilla.mozilla.org/attachment.cgi?id=520157
and add the hg rev of the commited sparc64 fix for opentype
@
text
@d1 1
a1 1
$OpenBSD: patch-gfx_ots_include_opentype-sanitiser_h,v 1.2 2011/03/30 21:39:14 landry Exp $
@


1.3.2.1
log
@SECURITY UPDATE to mozilla-firefox-3.6.16

ok jasper landry

thanks to landry for doing all the work in -current's www/firefox36,
which this was based on.
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 3
--- gfx/ots/include/opentype-sanitiser.h.orig	Fri Mar 18 00:02:27 2011
+++ gfx/ots/include/opentype-sanitiser.h	Fri Mar 18 00:02:35 2011
@@@@ -64,8 +64,10 @@@@ class OTSStream {
@


1.2
log
@Lo and behold, update to mozilla-firefox 4.0 !
Too much changes to list them, just enjoy it. Thanks to the ones who
tested the betas/rc.
ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
@


1.1
log
@Assorted fixes for:
https://bugzilla.mozilla.org/show_bug.cgi?id=643137 (crash on sparc64
when displaying opentypes fonts, fix from tobias ulmer)
https://bugzilla.mozilla.org/show_bug.cgi?id=644012 (crash on ssl certs
with empty issuer name, pointed our by roberth at openbsd dot pap dot st
and mikolaj kucharski)
@
text
@d3 3
a5 3
--- gfx/ots/include/opentype-sanitiser.h.orig	Fri Mar 18 00:02:27 2011
+++ gfx/ots/include/opentype-sanitiser.h	Fri Mar 18 00:02:35 2011
@@@@ -64,8 +64,10 @@@@ class OTSStream {
@

