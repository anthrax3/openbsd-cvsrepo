head	1.3;
access;
symbols
	OPENBSD_3_8:1.1.0.4
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2005.12.20.23.44.00;	author bernd;	state dead;
branches;
next	1.2;

1.2
date	2005.10.14.04.00.38;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.04.21.24.00;	author kurt;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.06.06.20.30.29;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to Firefox 1.5.

Team work by wilfried@@, kurt@@ and me.

Tested by many. Thanks a lot!

ok kurt@@ krw@@ jolan@@ ian@@ pvalchev@@
@
text
@$OpenBSD: patch-gfx_src_gtk_nsDeviceContextSpecG_cpp,v 1.2 2005/10/14 04:00:38 kurt Exp $
--- gfx/src/gtk/nsDeviceContextSpecG.cpp.orig	Thu Feb 17 16:24:34 2005
+++ gfx/src/gtk/nsDeviceContextSpecG.cpp	Sun Oct  2 01:11:12 2005
@@@@ -1133,7 +1133,7 @@@@ nsresult GlobalPrinters::InitializeGloba
       free(printerList);
     } else {
       /* Try to use CUPS */
-      PRLibrary *clib = PR_LoadLibrary("libcups.so.2");
+      PRLibrary *clib = PR_LoadLibrary("libcups.so");
       if (clib) {
         CupsGetDestsType  CupsGetDests;
         CupsGetDestType   CupsGetDest;
@


1.2
log
@remove 'don't close dlopened objects' type ld.so work-arounds
@
text
@d1 1
a1 1
$OpenBSD: patch-gfx_src_gtk_nsDeviceContextSpecG_cpp,v 1.1 2005/04/04 21:24:00 kurt Exp $
@


1.1
log
@- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype

CUPS testing and ok by mbalmer@@ idea from wilfried@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 11
+++ gfx/src/gtk/nsDeviceContextSpecG.cpp	Mon Apr  4 12:56:30 2005
@@@@ -68,6 +68,8 @@@@
 
 #include "prlink.h"
 
+static PRLibrary *clib = nsnull;
+
 typedef struct				/**** Printer Options ****/
 {
   char		*name;			/* Name of option */
@@@@ -1133,7 +1135,8 @@@@ nsresult GlobalPrinters::InitializeGloba
d9 1
a9 2
+      if (clib == nsnull)
+        clib = PR_LoadLibrary("libcups.so");
a12 8
@@@@ -1178,7 +1181,6 @@@@ nsresult GlobalPrinters::InitializeGloba
             (*CupsFreeDests)(num_dests, dests);
           }
         }
-        PR_UnloadLibrary(clib);
       }
     }
 
@


1.1.2.1
log
@Sync the port with the current one. It takes the port to firefox 1.0.4.
It fixes a lot of security vulnerabilities. For more information please visit:
http://www.mozilla.org/projects/security/known-vulnerabilities.html

ok brad@@
@
text
@@

