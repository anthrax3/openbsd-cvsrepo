head	1.2;
access;
symbols
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.03.30.21.39.14;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2010.04.26.19.55.58;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Lo and behold, update to mozilla-firefox 4.0 !
Too much changes to list them, just enjoy it. Thanks to the ones who
tested the betas/rc.
ok jasper@@
@
text
@$OpenBSD: patch-js_src_jslock_cpp,v 1.1 2010/04/26 19:55:58 landry Exp $
Fix for infinite loop in js binary during build
cf pkgsrc/devel/xulrunner/patches/patch-bb
http://lists.freebsd.org/pipermail/freebsd-gecko/2010-January/000640.html
https://bugzilla.mozilla.org/show_bug.cgi?id=550271
--- js/src/jslock.cpp.orig	Sat Apr 24 16:47:57 2010
+++ js/src/jslock.cpp	Sat Apr 24 16:52:44 2010
@@@@ -161,7 +161,11 @@@@ NativeCompareAndSwap(jsword *w, jsword ov, jsword nv)
 
     __asm__ __volatile__ (
                   "stbar\n"
+#if defined (__sparc64__)
+                  "casx [%1],%2,%3\n"
+#else
                   "cas [%1],%2,%3\n"
+#endif
                   "cmp %2,%3\n"
                   "be,a 1f\n"
                   "mov 1,%0\n"
@


1.1
log
@Update www/mozilla-firefox from 3.0.19 to 3.6.3, merging the wip done in
www/firefox36 mostly by martynas@@ and naddy@@.
Note that the java plugin from devel/jdk currently doesn't work with this
version of firefox, in the meantime users really needed it will have to
use www/firefox35.
ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-js_src_jslock_cpp,v 1.1 2010/04/24 18:20:33 landry Exp $
@

