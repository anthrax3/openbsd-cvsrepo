head	1.10;
access;
symbols
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.7.0.4
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2;
locks; strict;
comment	@# @;


1.10
date	2013.06.26.19.29.16;	author landry;	state dead;
branches;
next	1.9;

1.9
date	2012.09.01.13.56.45;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2012.08.07.08.55.40;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2011.10.03.21.06.09;	author landry;	state Exp;
branches;
next	1.6;

1.6
date	2011.08.23.20.14.52;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2011.06.28.05.43.57;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2011.04.09.11.05.06;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.30.21.39.14;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2010.06.28.21.24.22;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2010.06.12.15.00.12;	author landry;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Update to firefox 22.0.

- see http://www.mozilla.org/en-US/firefox/22.0/releasenotes/ (ok,
  webrtc isnt enabled yet by default on *BSD but we're working on it :)
- fixes MFSA 2013-49->62
- remove all patches related to sydneyaudio which got removed upstream,
  sound uses libcubeb which has a native sndio backend since ages (thx
to ratchov!). also remove related post-patch target while here.
- add temporary workaround (TERM=xterm) for bug #878089
- switch i386 to use clang again, using --disable-debug-symbols to make
  the code smaller (who said 'gross hack' ?)
- update patch-gfx_thebes_gfxPlatform_cpp to match what got commited
  upstream in r52b02042b27f
- remove patch-js_src_vm_SPSProfiler_cpp which unbroke powerpc, finally
  got commited in 22 branch
- rework fx-i18n's MESSAGE to be more in line with reality (discussed
  with Marcus Merighi)
@
text
@$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.9 2012/09/01 13:56:45 landry Exp $
https://bugzilla.mozilla.org/show_bug.cgi?id=648726
--- xulrunner/app/Makefile.in.orig	Wed Aug 15 07:48:39 2012
+++ xulrunner/app/Makefile.in	Sun Aug 19 13:50:41 2012
@@@@ -41,6 +41,12 @@@@ ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
 TK_LIBS := -framework Cocoa $(TK_LIBS)
 endif
 
+ifeq ($(OS_ARCH),OpenBSD)
+ifdef MOZ_SYDNEYAUDIO
+LIBS += -lsndio
+endif
+endif
+
 LIBS += \
   $(EXTRA_DSO_LIBS) \
   $(XPCOM_STANDALONE_GLUE_LDOPTS) \
@


1.9
log
@Update to firefox 15.0.

- see http://www.mozilla.org/en-US/firefox/15.0/releasenotes/
- add -Os hack to fix a relocation error when linking on ppc (as was
  done in tb since 10..)
- garbage collect nsSound.cpp, the original one uses libcanberra
  properly and thus sndio.
- remove patch from #750620, merged upstream (mfbt/double-conversion)
- remove patches from #747257, merged upstream (gstreamer fix)
- remove patches from #691898, merged upstream (yarr jit ppc)
@
text
@d1 1
a1 1
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.8 2012/08/07 08:55:40 landry Exp $
@


1.8
log
@Update to firefox 14.0.1.

- see http://www.mozilla.org/en-US/firefox/14.0.1/releasenotes/
- enable H.264 video support through gstreamer. Mention that one needs to
  manually install gstreamer-ffmpeg. Not all videos/sites will work.
- backport cset from #776838 & #747257 for various gst fixes.
- backport cset from #750620 to fix ppc (and other exotic archs) build.
- backport cset from #752895 to fix packaging issues.
- remove patch-content_xslt_src_base_txDouble_cpp, useless since mozilla
  switched to mfbt/double-conversion.
- remove nss opening hack in Sync, it works fine without it.
- remove the -rpath hack, not needed since matthew's ld.so fix from 12/06
@
text
@d1 1
a1 1
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.7 2011/10/03 21:06:09 landry Exp $
d3 3
a5 3
--- xulrunner/app/Makefile.in.orig	Wed Jun 13 01:47:16 2012
+++ xulrunner/app/Makefile.in	Sun Jun 17 12:04:03 2012
@@@@ -83,6 +83,12 @@@@ ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
@


1.7
log
@Update to firefox 7.0.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.6 2011/08/23 20:14:52 landry Exp $
d3 3
a5 3
--- xulrunner/app/Makefile.in.orig	Thu Aug 25 02:37:45 2011
+++ xulrunner/app/Makefile.in	Mon Aug 29 14:55:04 2011
@@@@ -80,6 +80,12 @@@@ ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
d17 1
a17 1
   $(DIST)/lib/$(LIB_PREFIX)xpcomglue_s.$(LIB_SUFFIX) \
@


1.6
log
@Update to firefox 6.0.

See http://www.mozilla.com/en-US/firefox/6.0/releasenotes/.
Remove patches merged upstream (#648721, #651461, #643122, #634609 and
maybe others).
ok rpointel@@
@
text
@d1 1
a1 1
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.5 2011/06/28 05:43:57 landry Exp $
d3 3
a5 3
--- xulrunner/app/Makefile.in.orig	Fri Jul 22 00:18:57 2011
+++ xulrunner/app/Makefile.in	Sat Jul 30 15:37:52 2011
@@@@ -79,6 +79,12 @@@@ ifeq (cocoa,$(MOZ_WIDGET_TOOLKIT))
@


1.5
log
@Update to mozilla-firefox 5.0:

That's the first release following the new fast scheme of one major
release every 6 weeks..
Check out http://www.mozilla.com/en-US/firefox/5.0/releasenotes/ for
release notes. Note that it's still badly broken on sparc64, and
unlikely to be fixed soon... you still have www/firefox36.

Tested by (at least, probably forgetting some..) rpointel@@, pea@@,
ckuethe@@ and myself on amd64, bluhm@@ on i386 and ajacoutot@@ on macppc
(thanks!)
ok rpointel@@
@
text
@d1 1
a1 1
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.4 2011/04/09 11:05:06 landry Exp $
d3 4
a6 4
--- xulrunner/app/Makefile.in.orig	Fri May 27 18:13:00 2011
+++ xulrunner/app/Makefile.in	Tue May 31 22:18:41 2011
@@@@ -87,6 +87,12 @@@@ EXTRA_DSO_LIBS += xul
 endif
@


1.4
log
@Better patches for sndio integration and kerberos/gssapi authentication
as pushed upstream, see
https://bugzilla.mozilla.org/show_bug.cgi?id=648726 and
https://bugzilla.mozilla.org/show_bug.cgi?id=648730
No binary change..
@
text
@d1 1
a1 1
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.3 2011/03/30 21:39:14 landry Exp $
d3 3
a5 3
--- xulrunner/app/Makefile.in.orig	Sat Mar 19 00:34:14 2011
+++ xulrunner/app/Makefile.in	Sat Apr  9 10:50:43 2011
@@@@ -105,6 +105,12 @@@@ EXTRA_DSO_LIBS += xul
d16 2
a17 2
 	$(EXTRA_DSO_LIBS) \
 	$(MOZ_JS_LIBS) \
@


1.3
log
@Lo and behold, update to mozilla-firefox 4.0 !
Too much changes to list them, just enjoy it. Thanks to the ones who
tested the betas/rc.
ok jasper@@
@
text
@d1 14
a14 4
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.2 2010/06/28 21:24:22 landry Exp $
--- xulrunner/app/Makefile.in.orig	Wed Dec 15 02:03:42 2010
+++ xulrunner/app/Makefile.in	Wed Dec 22 22:33:06 2010
@@@@ -108,6 +108,7 @@@@ endif
a17 4
+        -lsndio \
 	$(DIST)/lib/$(LIB_PREFIX)xpcomglue_s.$(LIB_SUFFIX) \
 	$(XPCOM_LIBS) \
 	$(NSPR_LIBS) \
@


1.2
log
@Update to mozilla-firefox 3.6.6. Fixes a bunch of MFSA, see
http://www.mozilla.org/security/known-vulnerabilities/firefox36.html
The new plugin sandboxing code is disabled because :
- it only supports binary blobs plugins we don't have
- it is an horrible maze of #ifdef linux-apple-win32 coming straight
  from an old version of chromium. Future versions should have better BSD
support..
tested by several on ports@@, thanks!
@
text
@d1 4
a4 4
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.1 2010/06/12 15:00:12 landry Exp $
--- xulrunner/app/Makefile.in.orig	Fri Jun 11 22:41:27 2010
+++ xulrunner/app/Makefile.in	Thu Jun 24 10:08:44 2010
@@@@ -118,6 +118,7 @@@@ endif
@


1.1
log
@Switch mozilla-firefox to use systemwide nss/nspr, and remove the
corresponding libs from SHARED_LIBS/PLIST. Bump minor and PKGNAME.
Bring in a pair of patches from xulrunner, and add a DIRECTORY variable
as done in xulrunner that is subst'ed in config/autoconf.mk.in.
sthen@@ likes.
@
text
@d1 4
a4 4
$OpenBSD: patch-xulrunner_app_Makefile_in,v 1.1 2010/04/24 16:08:01 landry Exp $
--- xulrunner/app/Makefile.in.orig	Thu Apr 22 08:57:25 2010
+++ xulrunner/app/Makefile.in	Thu Apr 22 08:57:56 2010
@@@@ -114,6 +114,7 @@@@ endif
@

