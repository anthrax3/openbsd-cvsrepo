head	1.5;
access;
symbols
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.1.1.0.8
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.6
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.4
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	wilfried_2004-04-15:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2010.06.16.19.05.40;	author landry;	state dead;
branches;
next	1.4;

1.4
date	2010.04.26.19.55.58;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.17.19.14.51;	author kurt;	state dead;
branches;
next	1.2;

1.2
date	2005.12.20.23.44.00;	author bernd;	state Exp;
branches
	1.2.2.1
	1.2.4.1;
next	1.1;

1.1
date	2004.02.15.19.37.25;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.15.19.37.25;	author wilfried;	state Exp;
branches;
next	;

1.2.2.1
date	2007.03.15.21.10.05;	author sturm;	state Exp;
branches;
next	;

1.2.4.1
date	2007.03.09.06.17.24;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Remove all patches applying to local copy of nss/nspr, as we now use the
systemwide on (which have all those patches). Don't call autoconf in
nsprpub/ while here, and bump PKGNAME to be on the safe side.
@
text
@$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.4 2010/04/26 19:55:58 landry Exp $
--- nsprpub/pr/src/misc/prinit.c.orig	Wed Jun 17 07:22:05 2009
+++ nsprpub/pr/src/misc/prinit.c	Sun Jun 21 17:53:51 2009
@@@@ -414,8 +414,6 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
         _PR_CleanupDtoa();
         _PR_CleanupCallOnce();
 		_PR_ShutdownLinker();
-        _PR_CleanupNet();
-        _PR_CleanupIO();
         /* Release the primordial thread's private data, etc. */
         _PR_CleanupThread(me);
 
@@@@ -426,6 +424,12 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
 	    _PR_LogCleanup();
 
         /*
+         * accesses the current thread
+         */
+        _PR_CleanupNet();
+        _PR_CleanupIO();
+
+        /*
          * This part should look like the end of _PR_NativeRunThread
          * and _PR_UserRunThread.
          */
@@@@ -437,6 +441,7 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
             PR_DELETE(me->stack);
             PR_DELETE(me);
         }
+        _PR_MD_SET_CURRENT_THREAD(NULL);
 
         /*
          * XXX: We are freeing the heap memory here so that Purify won't
@


1.4
log
@Update www/mozilla-firefox from 3.0.19 to 3.6.3, merging the wip done in
www/firefox36 mostly by martynas@@ and naddy@@.
Note that the java plugin from devel/jdk currently doesn't work with this
version of firefox, in the meantime users really needed it will have to
use www/firefox35.
ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.1.1.1 2010/03/29 20:44:12 naddy Exp $
@


1.3
log
@use devel/nspr instead of internal nspr. now using libc strtod and __dtoa
via devel/nspr. okay pvalchev@@
@
text
@d1 13
a13 4
$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.2 2005/12/20 23:44:00 bernd Exp $
--- nsprpub/pr/src/misc/prinit.c.orig	Wed Apr 28 02:34:07 2004
+++ nsprpub/pr/src/misc/prinit.c	Sat Sep 10 09:47:32 2005
@@@@ -433,6 +433,12 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d26 1
a26 1
@@@@ -444,6 +450,7 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
a33 9
@@@@ -452,8 +459,6 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
          * Ideally, for each _PR_InitXXX(), there should be a corresponding
          * _PR_XXXCleanup() that we can call here.
          */
-        _PR_CleanupNet();
-        _PR_CleanupIO();
 #ifdef WINNT
         _PR_CleanupCPUs();
 #endif
@


1.2
log
@Update to Firefox 1.5.

Team work by wilfried@@, kurt@@ and me.

Tested by many. Thanks a lot!

ok kurt@@ krw@@ jolan@@ ian@@ pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.1.1.1 2004/02/15 19:37:25 wilfried Exp $
@


1.2.2.1
log
@Security update to firefox 1.5.0.10

see http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.10
for details
@
text
@d1 4
a4 4
$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.2 2005/12/20 23:44:00 bernd Exp $
--- nsprpub/pr/src/misc/prinit.c.orig	Fri Dec  1 01:34:11 2006
+++ nsprpub/pr/src/misc/prinit.c	Thu Mar 15 16:35:10 2007
@@@@ -435,6 +435,12 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d17 1
a17 1
@@@@ -446,6 +452,7 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d25 1
a25 1
@@@@ -454,8 +461,6 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
@


1.2.4.1
log
@Security update to firefox 1.5.0.10

see http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.10
for details
@
text
@d1 4
a4 4
$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.2 2005/12/20 23:44:00 bernd Exp $
--- nsprpub/pr/src/misc/prinit.c.orig	Fri Dec  1 01:34:11 2006
+++ nsprpub/pr/src/misc/prinit.c	Mon Feb 26 21:21:23 2007
@@@@ -435,6 +435,12 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d17 1
a17 1
@@@@ -446,6 +452,7 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d25 1
a25 1
@@@@ -454,8 +461,6 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD: patch-nsprpub_pr_src_misc_prinit_c,v 1.2 2004/01/18 11:51:10 wilfried Exp $
--- nsprpub/pr/src/misc/prinit.c.orig	2003-01-20 21:13:09.000000000 +0100
+++ nsprpub/pr/src/misc/prinit.c	2003-12-12 12:41:30.000000000 +0100
@@@@ -430,6 +430,12 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d17 1
a17 1
@@@@ -441,6 +447,7 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
d25 1
a25 1
@@@@ -449,8 +456,6 @@@@ PR_IMPLEMENT(PRStatus) PR_Cleanup()
@


1.1.1.1
log
@import of mozilla firefox 0.8
@
text
@@
