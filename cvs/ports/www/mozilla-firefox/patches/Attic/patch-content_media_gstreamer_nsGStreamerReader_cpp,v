head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2012.11.24.10.21.50;	author landry;	state dead;
branches;
next	1.2;

1.2
date	2012.10.10.20.56.14;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2012.09.03.13.33.05;	author landry;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to firefox 17.0.

- see http://www.mozilla.org/en-US/firefox/17.0/releasenotes/ for details
- enable the gio/libnotify interaction, since it brings no additional
  dep. libnotify will be dlopened at runtime if present, and gio is
already in the dependency chain. The latter will interact with the gio mime
database for file associations, and firefox will ask the user if he
wants to register it as the default http:// handler. The former will
show a notify popup upon download completion, among others.
- add build depends on yasm in i386/amd64 for webm
- remove patch-browser_app_profile_firefox_js, the updater is already disabled
- remove gstreamer patches from #776838, #777696 & #747257, merged upstream
- remove ipc_message_utils.h patch from #775428, commited upstream
- remove mozalloc.cpp patch, <sys/types.h> is already included above
- remove xpcshell hang patchset from #706955, cant reproduce anymore
- remove patch-security_manager_ssl_src_Makefile_in, unneeded
- remove OS.File extra logging from #785200, merged upstream
- add patch-toolkit_system_gnome_nsGIOService_cpp, workaround for
  #805202 (libgio-2.0.so dlopening), to be removed in fx 19
- remove xpcom arm patch from #783875, merged upstream

ok sthen@@
@
text
@$OpenBSD: patch-content_media_gstreamer_nsGStreamerReader_cpp,v 1.2 2012/10/10 20:56:14 landry Exp $
https://bugzilla.mozilla.org/show_bug.cgi?id=777696
Tentative fix for powerpc
--- content/media/gstreamer/nsGStreamerReader.cpp.orig	Wed Jul 25 15:15:20 2012
+++ content/media/gstreamer/nsGStreamerReader.cpp	Wed Jul 25 15:20:34 2012
@@@@ -131,7 +131,11 @@@@ nsresult nsGStreamerReader::Init(nsBuiltinDecoderReade
 
   mAudioSink = gst_parse_bin_from_description("capsfilter name=filter ! "
         "appsink name=audiosink sync=true caps=audio/x-raw-float,"
+#ifdef IS_LITTLE_ENDIAN
         "channels={1,2},rate=44100,width=32,endianness=1234", TRUE, NULL);
+#else
+        "channels={1,2},rate=44100,width=32,endianness=4321", TRUE, NULL);
+#endif
   mAudioAppSink = GST_APP_SINK(gst_bin_get_by_name(GST_BIN(mAudioSink),
         "audiosink"));
   gst_app_sink_set_callbacks(mAudioAppSink, &mSinkCallbacks,
@


1.2
log
@Update to firefox 16.0.

- see http://www.mozilla.org/en-US/firefox/16.0/releasenotes/ for details
- install an icon into share/pixmaps to fix desktop file icon path
- garbage collect patch-browser_installer_Makefile_in, and
  patch-browser_installer_package-manifest_in, were from upstream
- remove patch-build_unix_mozilla_in, useless since bin/firefox is not a
  script anymore since a while
- remove patch-build_unix_run-mozilla_sh, firefox can be directly
  debugged in gdb now. update README accordingly
- remove patch-config_autoconf_mk_in, XCFLAGS are already passed
- update patch-content_media_gstreamer_nsGStreamerReader_cpp to fix
  gstreamer on BE archs (#777696)
- update patch-extensions_spellcheck_hunspell_src_mozHunspell_cpp after
  nsILocalFile api removal
- remove useless patch-gfx_thebes_Makefile_in pangox patch
- fix PLIST to use proper MOZILLA_VERSION instead of beta MOZILLA_VER
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Backport a patch fixing a crash when viewing H264 video through gstreamer.
https://bugzilla.mozilla.org/show_bug.cgi?id=761030.

Crash reported and fix testing by Juan Francisco Cantero Hurtado.
@
text
@d2 5
a6 11
https://bugzilla.mozilla.org/show_bug.cgi?id=761030
https://hg.mozilla.org/mozilla-central/rev/b8c6c7c773c3
--- content/media/gstreamer/nsGStreamerReader.cpp.orig	Sat Aug 25 00:55:23 2012
+++ content/media/gstreamer/nsGStreamerReader.cpp	Mon Sep  3 15:30:10 2012
@@@@ -452,6 +452,8 @@@@ bool nsGStreamerReader::DecodeVideoFrame(bool &aKeyFra
         i, height);
     b.mPlanes[i].mWidth = gst_video_format_get_component_width(format,
         i, width);
+    b.mPlanes[i].mOffset = 0;
+    b.mPlanes[i].mSkip = 0;
   }
d8 10
a17 1
   bool isKeyframe = !GST_BUFFER_FLAG_IS_SET(buffer,
@

