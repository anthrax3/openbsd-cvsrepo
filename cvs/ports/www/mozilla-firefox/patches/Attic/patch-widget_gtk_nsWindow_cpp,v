head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2017.03.07.15.31.38;	author landry;	state dead;
branches;
next	1.1;
commitid	TBtrve6ZlRazGi25;

1.1
date	2017.02.21.19.53.55;	author landry;	state Exp;
branches;
next	;
commitid	nd64jQefPeCMF5uG;


desc
@@


1.2
log
@Update mozilla-firefox to 52.0.

See https://www.mozilla.org/en-US/firefox/52.0/releasenotes/

Remove patch for #1335827, merged upstream.

Note that this release removes support for NPAPI plugins (java, etc..) -
users relying on those should migrate to firefox-esr, where NPAPI
plugins will be supported for the lifetime of 52esr branch.

Tested by several, thanks!
@
text
@$OpenBSD: patch-widget_gtk_nsWindow_cpp,v 1.1 2017/02/21 19:53:55 landry Exp $

https://hg.mozilla.org/integration/mozilla-inbound/raw-rev/97795c1d467d

--- widget/gtk/nsWindow.cpp.orig	Mon Jan 16 17:16:53 2017
+++ widget/gtk/nsWindow.cpp	Tue Feb 21 20:51:54 2017
@@@@ -727,6 +727,12 @@@@ nsWindow::Destroy()
     // destroys the the gl context attached to it).
     DestroyCompositor();
 
+#ifdef MOZ_X11
+    // Ensure any resources assigned to the window get cleaned up first
+    // to avoid double-freeing.
+    mSurfaceProvider.CleanupResources();
+#endif
+
     ClearCachedResources();
 
     g_signal_handlers_disconnect_by_func(gtk_settings_get_default(),
@


1.1
log
@Backport fix for #1335827 - frequent crashes with "ABORT:
RenderFreePicture: RenderBadPicture", reported and testing by semarie@@
@
text
@d1 1
a1 1
$OpenBSD$
@

