head	1.5;
access;
symbols
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.0.8
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2017.09.28.16.39.11;	author landry;	state Exp;
branches;
next	1.4;
commitid	5R6MitOcmJhuSw4X;

1.4
date	2017.03.07.15.31.38;	author landry;	state Exp;
branches
	1.4.2.1;
next	1.3;
commitid	TBtrve6ZlRazGi25;

1.3
date	2016.03.14.20.48.43;	author landry;	state Exp;
branches;
next	1.2;
commitid	RRyzzZuPWgdXYfVi;

1.2
date	2015.11.04.07.35.51;	author landry;	state Exp;
branches;
next	1.1;
commitid	bfkXFH77Ra3vNCam;

1.1
date	2014.04.29.21.26.43;	author landry;	state Exp;
branches;
next	;

1.4.2.1
date	2017.09.28.16.50.29;	author landry;	state Exp;
branches;
next	;
commitid	LNxIrrNYWD4PQgi0;


desc
@@


1.5
log
@Update to firefox 56.0.

- see https://www.mozilla.org/en-US/firefox/56.0/releasenotes/
- fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-21/

- switch to the bundled icu4c, as 59.1 is now required and we only have
  58 in the portstree for now
- disable stylo css engine (see #1341234 & #1401093) - hopefully for
  57.0 it'll build/work..
- pass --enable-release (#1386371) & --enable-rust-simd (#1261841)
- add a patch to fix javascript debugger in devtools (#1400197)

ok naddy@@
@
text
@$OpenBSD: patch-intl_icu_source_Makefile_in,v 1.4 2017/03/07 15:31:38 landry Exp $

https://bugzilla.mozilla.org/show_bug.cgi?id=990196

install -c -o root -g bin -m 555 /usr/obj/ports/firefox-29.0beta3/mozilla-beta/intl/icu/source/config/icu-config-top config/icu-config
install: config/icu-config: chown/chgrp: Operation not permitted
Makefile:313: recipe for target 'config/icu-config' failed
gmake[6]: *** [config/icu-config] Error 71
gmake[6]: Leaving directory '/usr/obj/ports/firefox-29.0beta3/build-amd64/js/src/intl/icu/target'
Makefile:77: recipe for target 'buildicu' failed

Index: intl/icu/source/Makefile.in
--- intl/icu/source/Makefile.in.orig
+++ intl/icu/source/Makefile.in
@@@@ -329,7 +329,7 @@@@ $(top_builddir)/config/pkgdataMakefile:
 
 $(top_builddir)/config/icu-config: $(top_builddir)/Makefile $(top_srcdir)/config/icu-config-top $(top_srcdir)/config/icu-config-bottom $(top_builddir)/config/Makefile.inc @@platform_make_fragment@@ $(top_srcdir)/config/make2sh.sed
 	-$(RMV) $@@
-	$(INSTALL_SCRIPT) $(top_srcdir)/config/icu-config-top $@@
+	install -m 555 $(top_srcdir)/config/icu-config-top $@@
 	chmod u+w $@@
 	@@echo "# Following from icu/icu4c/source/config/Makefile.inc" >> $@@
 	LC_ALL=C $(SED) -f $(top_srcdir)/config/make2sh.sed < $(top_builddir)/config/Makefile.inc | grep -v '#M#' | uniq >> $@@
@


1.4
log
@Update mozilla-firefox to 52.0.

See https://www.mozilla.org/en-US/firefox/52.0/releasenotes/

Remove patch for #1335827, merged upstream.

Note that this release removes support for NPAPI plugins (java, etc..) -
users relying on those should migrate to firefox-esr, where NPAPI
plugins will be supported for the lifetime of 52esr branch.

Tested by several, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-intl_icu_source_Makefile_in,v 1.3 2016/03/14 20:48:43 landry Exp $
d12 4
a15 3
--- intl/icu/source/Makefile.in.orig	Mon Jan 23 17:13:47 2017
+++ intl/icu/source/Makefile.in	Sat Feb 18 15:15:27 2017
@@@@ -325,7 +325,7 @@@@ $(top_builddir)/config/pkgdataMakefile:
d22 2
a23 2
 	@@echo "# Following from @@platform_make_fragment@@" >> $@@
 	LC_ALL=C sed -f $(top_srcdir)/config/make2sh.sed < $(top_builddir)/config/Makefile.inc | grep -v '#M#' | uniq >> $@@
@


1.4.2.1
log
@Sort-of-MFC: Update to firefox 56.0.

- see https://www.mozilla.org/en-US/firefox/56.0/releasenotes/
- fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-21/

- disable stylo css engine (see #1341234 & #1401093)
- pass --enable-release (#1386371) & --enable-rust-simd (#1261841)
- add a patch to fix javascript debugger in devtools (#1400197)
- add a patch to lower the rust version requirement, as we dont build
  stylo, and i'm not going to update rust in -stable..

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub
@
text
@d1 1
a1 1
$OpenBSD: patch-intl_icu_source_Makefile_in,v 1.4 2017/03/07 15:31:38 landry Exp $
d12 3
a14 3
--- intl/icu/source/Makefile.in.orig	Thu Sep 14 22:15:58 2017
+++ intl/icu/source/Makefile.in	Thu Sep 28 08:11:30 2017
@@@@ -329,7 +329,7 @@@@ $(top_builddir)/config/pkgdataMakefile:
d21 2
a22 2
 	@@echo "# Following from icu/icu4c/source/config/Makefile.inc" >> $@@
 	LC_ALL=C $(SED) -f $(top_srcdir)/config/make2sh.sed < $(top_builddir)/config/Makefile.inc | grep -v '#M#' | uniq >> $@@
@


1.3
log
@Update to firefox 45.0.

- See https://www.mozilla.org/en-US/firefox/45.0/releasenotes/
- Fixes MFSA 2016-16->38
- libmozgnome was removed upstream
- gtk3 is still not enabled by default upstream
- Remove dependency on gstreamer1, ffmpeg/libavcodec is opened on the fly
if available, as tested by naddy@@

Sidenote: no, i havent looked at i386/llvm breakage yet. i386 is the new vax.
@
text
@d1 1
a1 1
$OpenBSD: patch-intl_icu_source_Makefile_in,v 1.2 2015/11/04 07:35:51 landry Exp $
d12 3
a14 3
--- intl/icu/source/Makefile.in.orig	Mon Feb  1 23:40:47 2016
+++ intl/icu/source/Makefile.in	Tue Feb  2 09:28:54 2016
@@@@ -333,7 +333,7 @@@@ $(top_builddir)/config/pkgdataMakefile:
@


1.2
log
@Update to firefox 42.0.

- See https://www.mozilla.org/en-US/firefox/42.0/releasenotes/
- Fixes MFSA-2015-116 -> 133
- Tested by several, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-intl_icu_source_Makefile_in,v 1.1 2014/04/29 21:26:43 landry Exp $
d12 3
a14 3
--- intl/icu/source/Makefile.in.orig	Tue Sep 22 00:23:03 2015
+++ intl/icu/source/Makefile.in	Fri Sep 25 09:05:25 2015
@@@@ -329,7 +329,7 @@@@ $(top_builddir)/config/pkgdataMakefile:
@


1.1
log
@Update to firefox 29.0, with the brand new Australis UI.

- See http://www.mozilla.org/en-US/firefox/29.0/releasenotes/
- Fixes MFSA 2014-34->47
- add spellchecker.dictionary_path as a default pref in all-openbsd.js,
pointing to ${LOCALBASE}/share/mozilla-dicts/ so that it looks for
systemwide dictionaries.
- Remove now useless patch-extensions_spellcheck_hunspell_src_mozHunspell_cpp
- Add patch for #990196, tries to use INSTALL_SCRIPT during build which
  badly fails as user.

Note that starting with Fx 29, the sync protocol v1.1 used by
www/mozilla-sync still works but is not advertised anymore, and will be
phased out by v1.5 in Fx 31. www/mozilla-sync port will be updated in the
meantime, but users will have to reconfigure all their instances...
@
text
@d1 1
a1 1
$OpenBSD$
d12 3
a14 3
--- intl/icu/source/Makefile.in.orig	Sun Mar 30 23:17:59 2014
+++ intl/icu/source/Makefile.in	Sun Mar 30 23:18:18 2014
@@@@ -311,7 +311,7 @@@@ $(top_builddir)/config/pkgdataMakefile:
@

