head	1.316;
access;
symbols
	OPENBSD_6_1:1.313.0.2
	OPENBSD_6_1_BASE:1.313
	OPENBSD_6_0:1.299.0.2
	OPENBSD_6_0_BASE:1.299
	OPENBSD_5_9:1.289.0.2
	OPENBSD_5_9_BASE:1.289
	OPENBSD_5_8:1.276.0.2
	OPENBSD_5_8_BASE:1.276
	OPENBSD_5_7:1.265.0.2
	OPENBSD_5_7_BASE:1.265
	OPENBSD_5_6:1.256.0.2
	OPENBSD_5_6_BASE:1.256
	OPENBSD_5_5:1.246.0.2
	OPENBSD_5_5_BASE:1.246
	OPENBSD_5_4:1.234.0.2
	OPENBSD_5_4_BASE:1.234
	OPENBSD_5_3:1.226.0.2
	OPENBSD_5_3_BASE:1.226
	OPENBSD_5_2:1.202.0.2
	OPENBSD_5_2_BASE:1.202
	OPENBSD_5_1_BASE:1.195
	OPENBSD_5_1:1.195.0.2
	OPENBSD_5_0:1.187.0.2
	OPENBSD_5_0_BASE:1.187
	OPENBSD_4_9:1.166.0.2
	OPENBSD_4_9_BASE:1.166
	OPENBSD_4_8:1.145.0.2
	OPENBSD_4_8_BASE:1.145
	OPENBSD_4_7:1.131.0.2
	OPENBSD_4_7_BASE:1.131
	OPENBSD_4_6:1.119.0.2
	OPENBSD_4_6_BASE:1.119
	OPENBSD_4_5:1.109.0.2
	OPENBSD_4_5_BASE:1.109
	OPENBSD_4_4:1.100.0.2
	OPENBSD_4_4_BASE:1.100
	OPENBSD_4_3:1.92.0.2
	OPENBSD_4_3_BASE:1.92
	OPENBSD_4_2:1.77.0.2
	OPENBSD_4_2_BASE:1.77
	OPENBSD_4_1:1.70.0.2
	OPENBSD_4_1_BASE:1.70
	OPENBSD_4_0:1.54.0.2
	OPENBSD_4_0_BASE:1.54
	OPENBSD_3_9:1.48.0.2
	OPENBSD_3_9_BASE:1.48
	OPENBSD_3_8:1.32.0.2
	OPENBSD_3_8_BASE:1.32
	OPENBSD_3_7:1.21.0.2
	OPENBSD_3_7_BASE:1.21
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	wilfried_2004-04-15:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.316
date	2017.05.06.07.15.58;	author landry;	state Exp;
branches;
next	1.315;
commitid	3xNNUGfM70ybOPmC;

1.315
date	2017.04.20.06.12.58;	author landry;	state Exp;
branches;
next	1.314;
commitid	WUt99C6A8mADidu3;

1.314
date	2017.04.12.18.12.33;	author landry;	state Exp;
branches;
next	1.313;
commitid	obesxEciJRtUmDBz;

1.313
date	2017.03.28.20.07.27;	author landry;	state Exp;
branches
	1.313.2.1;
next	1.312;
commitid	JnDgOGKzVue6jKNP;

1.312
date	2017.03.20.19.35.15;	author landry;	state Exp;
branches;
next	1.311;
commitid	wPvjzUwqR6dzLn5m;

1.311
date	2017.03.07.15.31.38;	author landry;	state Exp;
branches;
next	1.310;
commitid	TBtrve6ZlRazGi25;

1.310
date	2017.02.21.19.53.55;	author landry;	state Exp;
branches;
next	1.309;
commitid	nd64jQefPeCMF5uG;

1.309
date	2017.02.18.16.22.54;	author landry;	state Exp;
branches;
next	1.308;
commitid	zwUjsBRx9XMscqD4;

1.308
date	2017.01.24.21.33.09;	author landry;	state Exp;
branches;
next	1.307;
commitid	nWPQGTUORNhJi9af;

1.307
date	2017.01.06.22.14.07;	author landry;	state Exp;
branches;
next	1.306;
commitid	LnVcDutHO0Uavf7e;

1.306
date	2016.12.14.13.30.34;	author landry;	state Exp;
branches;
next	1.305;
commitid	vf9bqvBZrlsfFTnD;

1.305
date	2016.11.30.21.38.53;	author landry;	state Exp;
branches;
next	1.304;
commitid	ARQYFHusD0PyPahH;

1.304
date	2016.11.29.08.11.34;	author landry;	state Exp;
branches;
next	1.303;
commitid	3a061v47Ktg7SWoj;

1.303
date	2016.11.15.22.01.15;	author landry;	state Exp;
branches;
next	1.302;
commitid	IsOIopB1HwudOJln;

1.302
date	2016.10.24.09.33.08;	author landry;	state Exp;
branches;
next	1.301;
commitid	hP9i93zPTh1EL4EG;

1.301
date	2016.09.24.14.46.45;	author landry;	state Exp;
branches;
next	1.300;
commitid	w7r9hfTRbhEpho6T;

1.300
date	2016.08.02.17.50.03;	author landry;	state Exp;
branches;
next	1.299;
commitid	C4uQzGWx3WTtTKku;

1.299
date	2016.07.10.10.04.44;	author landry;	state Exp;
branches;
next	1.298;
commitid	3YKahdSTsMu3Bymo;

1.298
date	2016.06.08.19.25.42;	author landry;	state Exp;
branches;
next	1.297;
commitid	U1wa35WXoimcLF5j;

1.297
date	2016.05.05.06.53.19;	author landry;	state Exp;
branches;
next	1.296;
commitid	WPuNI5ZjasVbidJc;

1.296
date	2016.04.27.22.08.14;	author landry;	state Exp;
branches;
next	1.295;
commitid	WX4MwEEyYKCqBOZo;

1.295
date	2016.04.27.13.50.27;	author landry;	state Exp;
branches;
next	1.294;
commitid	15LuhcSbzffxjAi3;

1.294
date	2016.03.19.13.37.37;	author landry;	state Exp;
branches;
next	1.293;
commitid	oPIRgLBFc6m7JwRV;

1.293
date	2016.03.17.20.08.56;	author landry;	state Exp;
branches;
next	1.292;
commitid	6T4sDiiHkMLM4iMs;

1.292
date	2016.03.14.20.48.43;	author landry;	state Exp;
branches;
next	1.291;
commitid	RRyzzZuPWgdXYfVi;

1.291
date	2016.03.10.02.41.49;	author sthen;	state Exp;
branches;
next	1.290;
commitid	7WUa5DG7D8y8MRlp;

1.290
date	2016.03.05.16.04.06;	author pascal;	state Exp;
branches;
next	1.289;
commitid	EJSWd5DpdfEFGBlM;

1.289
date	2016.02.13.07.39.25;	author landry;	state Exp;
branches;
next	1.288;
commitid	gCy83UszOnxEo54v;

1.288
date	2016.02.09.09.21.27;	author landry;	state Exp;
branches;
next	1.287;
commitid	HzGrOB3s5nn7N1nC;

1.287
date	2016.01.27.18.12.43;	author landry;	state Exp;
branches;
next	1.286;
commitid	nKS7cLLBGZuVCu8f;

1.286
date	2016.01.07.09.24.20;	author landry;	state Exp;
branches;
next	1.285;
commitid	0N4MfPFCqtRHe69g;

1.285
date	2015.12.23.17.41.35;	author landry;	state Exp;
branches;
next	1.284;
commitid	JSyBkfrhw5ACbQJc;

1.284
date	2015.12.16.10.12.14;	author landry;	state Exp;
branches;
next	1.283;
commitid	P5NxfYHFaYSg9xkK;

1.283
date	2015.11.04.07.35.51;	author landry;	state Exp;
branches;
next	1.282;
commitid	bfkXFH77Ra3vNCam;

1.282
date	2015.10.19.08.09.23;	author dcoppa;	state Exp;
branches;
next	1.281;
commitid	b98aLxiccUsiY0Du;

1.281
date	2015.10.16.12.04.40;	author landry;	state Exp;
branches;
next	1.280;
commitid	wjYewTs5zSOiMeVn;

1.280
date	2015.10.05.08.48.14;	author landry;	state Exp;
branches;
next	1.279;
commitid	q1mGwbu9kB3KRLLA;

1.279
date	2015.09.24.20.21.15;	author landry;	state Exp;
branches;
next	1.278;
commitid	ZpTmiMdCoguHXVvL;

1.278
date	2015.08.31.20.08.40;	author landry;	state Exp;
branches;
next	1.277;
commitid	TnLyWB4CBO1lKZnU;

1.277
date	2015.08.11.21.14.53;	author landry;	state Exp;
branches;
next	1.276;
commitid	PZV1YnNy4qgq0kAy;

1.276
date	2015.08.07.13.39.36;	author landry;	state Exp;
branches;
next	1.275;
commitid	hC7pseykcdvUW1VE;

1.275
date	2015.07.25.06.51.50;	author landry;	state Exp;
branches;
next	1.274;
commitid	gkNQ76c5g8qCN7Sf;

1.274
date	2015.07.05.20.03.36;	author landry;	state Exp;
branches;
next	1.273;
commitid	gOunmwYFnJAI66Mg;

1.273
date	2015.05.28.10.17.25;	author pascal;	state Exp;
branches;
next	1.272;
commitid	020U4lCPk8wUkCOz;

1.272
date	2015.05.16.07.22.14;	author landry;	state Exp;
branches;
next	1.271;
commitid	OBqrLFw4uaY12You;

1.271
date	2015.04.24.20.42.08;	author sthen;	state Exp;
branches;
next	1.270;
commitid	87sItPEwtKwETnO2;

1.270
date	2015.04.03.22.59.16;	author landry;	state Exp;
branches;
next	1.269;
commitid	3Gtytjd99B1nPW8m;

1.269
date	2015.04.02.18.17.50;	author landry;	state Exp;
branches;
next	1.268;
commitid	gL59hhX5298RVohE;

1.268
date	2015.03.23.21.02.03;	author landry;	state Exp;
branches;
next	1.267;
commitid	WmKgFwPRmsexbf7u;

1.267
date	2015.03.19.19.49.49;	author landry;	state Exp;
branches;
next	1.266;
commitid	Nf1F5h5niuQjotjh;

1.266
date	2015.03.16.19.53.55;	author landry;	state Exp;
branches;
next	1.265;
commitid	9ZKCoTD1IAa0M4Ts;

1.265
date	2015.01.29.17.45.31;	author naddy;	state Exp;
branches;
next	1.264;
commitid	e8JmC0QW7OTGN2Xd;

1.264
date	2015.01.28.17.45.02;	author landry;	state Exp;
branches;
next	1.263;
commitid	LcvRkE6V8RFtrGR1;

1.263
date	2015.01.14.17.33.44;	author landry;	state Exp;
branches;
next	1.262;
commitid	fYaHl28bnsgsNtwv;

1.262
date	2014.12.06.16.55.32;	author landry;	state Exp;
branches;
next	1.261;
commitid	EDhhgGD0ImXStjHY;

1.261
date	2014.12.04.17.50.12;	author landry;	state Exp;
branches;
next	1.260;
commitid	INISJ8UiDVuV9dmk;

1.260
date	2014.11.10.15.40.02;	author landry;	state Exp;
branches;
next	1.259;
commitid	Fyp3tTicAmm1aDK4;

1.259
date	2014.10.17.07.26.21;	author landry;	state Exp;
branches;
next	1.258;
commitid	o0aJsKp8pdgUDvq2;

1.258
date	2014.09.02.16.43.04;	author landry;	state Exp;
branches;
next	1.257;
commitid	oUjXdZ5B9Zpw9SaL;

1.257
date	2014.08.10.09.58.07;	author espie;	state Exp;
branches;
next	1.256;
commitid	jyyOLTDxRdjpw44n;

1.256
date	2014.07.24.18.31.03;	author landry;	state Exp;
branches;
next	1.255;
commitid	A3x0TMaYP444t2fO;

1.255
date	2014.07.24.18.03.00;	author landry;	state Exp;
branches;
next	1.254;
commitid	k2YGqYP6dSDkuIKd;

1.254
date	2014.06.26.13.40.59;	author sthen;	state Exp;
branches;
next	1.253;
commitid	LATo2UFAj5sUdilS;

1.253
date	2014.06.14.13.03.31;	author landry;	state Exp;
branches;
next	1.252;
commitid	5JfKMLDsRpzthlIZ;

1.252
date	2014.05.10.05.50.56;	author landry;	state Exp;
branches;
next	1.251;

1.251
date	2014.04.29.21.26.43;	author landry;	state Exp;
branches;
next	1.250;

1.250
date	2014.04.22.11.38.33;	author landry;	state Exp;
branches;
next	1.249;

1.249
date	2014.04.22.08.43.28;	author ajacoutot;	state Exp;
branches;
next	1.248;

1.248
date	2014.03.24.21.11.37;	author landry;	state Exp;
branches;
next	1.247;

1.247
date	2014.03.10.20.53.29;	author landry;	state Exp;
branches;
next	1.246;

1.246
date	2014.01.21.21.51.35;	author landry;	state Exp;
branches;
next	1.245;

1.245
date	2013.12.26.20.00.34;	author landry;	state Exp;
branches;
next	1.244;

1.244
date	2013.12.12.19.53.19;	author landry;	state Exp;
branches;
next	1.243;

1.243
date	2013.11.04.21.15.42;	author landry;	state Exp;
branches;
next	1.242;

1.242
date	2013.11.03.11.30.09;	author sthen;	state Exp;
branches;
next	1.241;

1.241
date	2013.10.31.19.47.10;	author landry;	state Exp;
branches;
next	1.240;

1.240
date	2013.10.31.07.58.25;	author landry;	state Exp;
branches;
next	1.239;

1.239
date	2013.09.25.23.39.54;	author sthen;	state Exp;
branches;
next	1.238;

1.238
date	2013.09.25.16.53.53;	author sthen;	state Exp;
branches;
next	1.237;

1.237
date	2013.09.19.13.19.16;	author landry;	state Exp;
branches;
next	1.236;

1.236
date	2013.08.15.10.42.51;	author sthen;	state Exp;
branches;
next	1.235;

1.235
date	2013.08.08.06.57.11;	author landry;	state Exp;
branches;
next	1.234;

1.234
date	2013.06.26.19.29.13;	author landry;	state Exp;
branches
	1.234.2.1;
next	1.233;

1.233
date	2013.06.20.06.54.38;	author ajacoutot;	state Exp;
branches;
next	1.232;

1.232
date	2013.06.17.19.29.05;	author ajacoutot;	state Exp;
branches;
next	1.231;

1.231
date	2013.05.30.14.17.32;	author landry;	state Exp;
branches;
next	1.230;

1.230
date	2013.04.06.14.44.52;	author landry;	state Exp;
branches;
next	1.229;

1.229
date	2013.03.11.11.44.43;	author espie;	state Exp;
branches;
next	1.228;

1.228
date	2013.03.07.23.51.49;	author landry;	state Exp;
branches;
next	1.227;

1.227
date	2013.03.03.17.34.15;	author landry;	state Exp;
branches;
next	1.226;

1.226
date	2013.02.07.19.13.49;	author ajacoutot;	state Exp;
branches;
next	1.225;

1.225
date	2013.02.07.18.54.27;	author landry;	state Exp;
branches;
next	1.224;

1.224
date	2013.02.06.22.44.47;	author landry;	state Exp;
branches;
next	1.223;

1.223
date	2013.01.22.23.59.22;	author sthen;	state Exp;
branches;
next	1.222;

1.222
date	2013.01.19.23.50.16;	author landry;	state Exp;
branches;
next	1.221;

1.221
date	2013.01.14.13.52.59;	author landry;	state Exp;
branches;
next	1.220;

1.220
date	2013.01.11.22.57.14;	author landry;	state Exp;
branches;
next	1.219;

1.219
date	2012.12.04.21.24.33;	author landry;	state Exp;
branches;
next	1.218;

1.218
date	2012.11.24.10.21.50;	author landry;	state Exp;
branches;
next	1.217;

1.217
date	2012.11.12.20.45.32;	author landry;	state Exp;
branches;
next	1.216;

1.216
date	2012.10.27.08.11.00;	author landry;	state Exp;
branches;
next	1.215;

1.215
date	2012.10.17.19.43.24;	author landry;	state Exp;
branches;
next	1.214;

1.214
date	2012.10.11.18.37.23;	author landry;	state Exp;
branches;
next	1.213;

1.213
date	2012.10.10.20.56.13;	author landry;	state Exp;
branches;
next	1.212;

1.212
date	2012.10.06.07.55.55;	author ajacoutot;	state Exp;
branches;
next	1.211;

1.211
date	2012.09.22.10.30.17;	author landry;	state Exp;
branches;
next	1.210;

1.210
date	2012.09.21.13.21.44;	author ajacoutot;	state Exp;
branches;
next	1.209;

1.209
date	2012.09.09.19.50.31;	author landry;	state Exp;
branches;
next	1.208;

1.208
date	2012.09.06.12.38.35;	author ajacoutot;	state Exp;
branches;
next	1.207;

1.207
date	2012.09.03.15.33.40;	author landry;	state Exp;
branches;
next	1.206;

1.206
date	2012.09.01.13.56.45;	author landry;	state Exp;
branches;
next	1.205;

1.205
date	2012.08.07.16.16.52;	author landry;	state Exp;
branches;
next	1.204;

1.204
date	2012.08.07.08.55.40;	author landry;	state Exp;
branches;
next	1.203;

1.203
date	2012.08.04.15.01.50;	author ajacoutot;	state Exp;
branches;
next	1.202;

1.202
date	2012.06.16.10.21.58;	author landry;	state Exp;
branches;
next	1.201;

1.201
date	2012.06.11.15.29.56;	author landry;	state Exp;
branches;
next	1.200;

1.200
date	2012.04.30.15.28.42;	author landry;	state Exp;
branches;
next	1.199;

1.199
date	2012.04.23.17.15.19;	author espie;	state Exp;
branches;
next	1.198;

1.198
date	2012.03.16.21.31.24;	author landry;	state Exp;
branches;
next	1.197;

1.197
date	2012.03.08.12.13.01;	author ajacoutot;	state Exp;
branches;
next	1.196;

1.196
date	2012.02.20.20.15.04;	author landry;	state Exp;
branches;
next	1.195;

1.195
date	2012.01.11.02.42.48;	author nigel;	state Exp;
branches;
next	1.194;

1.194
date	2011.12.08.00.33.36;	author nigel;	state Exp;
branches;
next	1.193;

1.193
date	2011.10.28.13.01.13;	author robert;	state Exp;
branches;
next	1.192;

1.192
date	2011.10.03.21.06.09;	author landry;	state Exp;
branches;
next	1.191;

1.191
date	2011.09.16.12.00.07;	author espie;	state Exp;
branches;
next	1.190;

1.190
date	2011.09.06.19.41.59;	author landry;	state Exp;
branches;
next	1.189;

1.189
date	2011.08.24.06.19.51;	author landry;	state Exp;
branches;
next	1.188;

1.188
date	2011.08.23.20.14.52;	author landry;	state Exp;
branches;
next	1.187;

1.187
date	2011.07.28.08.12.50;	author landry;	state Exp;
branches;
next	1.186;

1.186
date	2011.07.26.19.44.32;	author sthen;	state Exp;
branches;
next	1.185;

1.185
date	2011.07.08.11.07.32;	author landry;	state Exp;
branches;
next	1.184;

1.184
date	2011.06.28.15.53.38;	author landry;	state Exp;
branches;
next	1.183;

1.183
date	2011.06.28.11.57.39;	author landry;	state Exp;
branches;
next	1.182;

1.182
date	2011.06.28.05.43.57;	author landry;	state Exp;
branches;
next	1.181;

1.181
date	2011.06.19.21.48.46;	author landry;	state Exp;
branches;
next	1.180;

1.180
date	2011.06.08.18.15.29;	author rpointel;	state Exp;
branches;
next	1.179;

1.179
date	2011.06.02.13.41.41;	author ajacoutot;	state Exp;
branches;
next	1.178;

1.178
date	2011.05.04.12.15.33;	author landry;	state Exp;
branches;
next	1.177;

1.177
date	2011.05.04.08.11.15;	author dcoppa;	state Exp;
branches;
next	1.176;

1.176
date	2011.04.29.07.58.10;	author landry;	state Exp;
branches;
next	1.175;

1.175
date	2011.04.19.20.39.34;	author landry;	state Exp;
branches;
next	1.174;

1.174
date	2011.04.05.09.00.42;	author landry;	state Exp;
branches;
next	1.173;

1.173
date	2011.03.30.21.39.14;	author landry;	state Exp;
branches;
next	1.172;

1.172
date	2011.03.24.11.41.11;	author landry;	state Exp;
branches;
next	1.171;

1.171
date	2011.03.23.15.27.04;	author landry;	state Exp;
branches;
next	1.170;

1.170
date	2011.03.22.13.18.26;	author landry;	state Exp;
branches;
next	1.169;

1.169
date	2011.03.21.08.45.37;	author landry;	state Exp;
branches;
next	1.168;

1.168
date	2011.03.10.14.34.18;	author dcoppa;	state Exp;
branches;
next	1.167;

1.167
date	2011.03.02.14.39.48;	author landry;	state Exp;
branches;
next	1.166;

1.166
date	2011.01.28.21.38.12;	author landry;	state Exp;
branches
	1.166.2.1;
next	1.165;

1.165
date	2011.01.18.12.33.38;	author landry;	state Exp;
branches;
next	1.164;

1.164
date	2011.01.14.22.49.47;	author landry;	state Exp;
branches;
next	1.163;

1.163
date	2010.12.26.13.16.29;	author stsp;	state Exp;
branches;
next	1.162;

1.162
date	2010.12.10.10.53.40;	author landry;	state Exp;
branches;
next	1.161;

1.161
date	2010.12.01.15.00.12;	author dcoppa;	state Exp;
branches;
next	1.160;

1.160
date	2010.11.22.08.36.49;	author espie;	state Exp;
branches;
next	1.159;

1.159
date	2010.11.11.09.30.36;	author jasper;	state Exp;
branches;
next	1.158;

1.158
date	2010.10.28.12.04.00;	author landry;	state Exp;
branches;
next	1.157;

1.157
date	2010.10.27.12.56.28;	author landry;	state Exp;
branches;
next	1.156;

1.156
date	2010.10.24.21.40.10;	author ajacoutot;	state Exp;
branches;
next	1.155;

1.155
date	2010.10.22.19.19.17;	author landry;	state Exp;
branches;
next	1.154;

1.154
date	2010.10.19.08.02.54;	author espie;	state Exp;
branches;
next	1.153;

1.153
date	2010.10.18.07.15.56;	author landry;	state Exp;
branches;
next	1.152;

1.152
date	2010.10.15.07.16.19;	author landry;	state Exp;
branches;
next	1.151;

1.151
date	2010.10.11.08.19.04;	author jasper;	state Exp;
branches;
next	1.150;

1.150
date	2010.09.27.11.47.22;	author fgsch;	state Exp;
branches;
next	1.149;

1.149
date	2010.09.19.19.19.05;	author landry;	state Exp;
branches;
next	1.148;

1.148
date	2010.09.12.17.55.30;	author landry;	state Exp;
branches;
next	1.147;

1.147
date	2010.09.06.12.59.50;	author eric;	state Exp;
branches;
next	1.146;

1.146
date	2010.08.30.23.50.44;	author fgsch;	state Exp;
branches;
next	1.145;

1.145
date	2010.07.25.21.18.34;	author landry;	state Exp;
branches;
next	1.144;

1.144
date	2010.07.22.21.42.13;	author landry;	state Exp;
branches;
next	1.143;

1.143
date	2010.07.19.13.46.27;	author landry;	state Exp;
branches;
next	1.142;

1.142
date	2010.07.09.15.43.54;	author landry;	state Exp;
branches;
next	1.141;

1.141
date	2010.07.01.20.32.10;	author jasper;	state Exp;
branches;
next	1.140;

1.140
date	2010.06.28.21.24.22;	author landry;	state Exp;
branches;
next	1.139;

1.139
date	2010.06.16.19.05.40;	author landry;	state Exp;
branches;
next	1.138;

1.138
date	2010.06.12.15.00.12;	author landry;	state Exp;
branches;
next	1.137;

1.137
date	2010.05.09.09.35.55;	author dcoppa;	state Exp;
branches;
next	1.136;

1.136
date	2010.04.28.06.56.38;	author landry;	state Exp;
branches;
next	1.135;

1.135
date	2010.04.26.22.14.37;	author landry;	state Exp;
branches;
next	1.134;

1.134
date	2010.04.26.19.55.58;	author landry;	state Exp;
branches;
next	1.133;

1.133
date	2010.04.04.19.11.42;	author naddy;	state Exp;
branches;
next	1.132;

1.132
date	2010.03.31.15.46.12;	author naddy;	state Exp;
branches;
next	1.131;

1.131
date	2010.02.24.18.17.23;	author naddy;	state Exp;
branches;
next	1.130;

1.130
date	2010.01.06.14.37.35;	author naddy;	state Exp;
branches;
next	1.129;

1.129
date	2009.12.22.13.02.12;	author sthen;	state Exp;
branches;
next	1.128;

1.128
date	2009.12.17.22.08.13;	author naddy;	state Exp;
branches;
next	1.127;

1.127
date	2009.11.27.21.15.51;	author naddy;	state Exp;
branches;
next	1.126;

1.126
date	2009.09.18.20.35.27;	author martynas;	state Exp;
branches;
next	1.125;

1.125
date	2009.09.10.21.34.55;	author martynas;	state Exp;
branches;
next	1.124;

1.124
date	2009.09.10.21.28.25;	author martynas;	state Exp;
branches;
next	1.123;

1.123
date	2009.08.10.06.34.56;	author kili;	state Exp;
branches;
next	1.122;

1.122
date	2009.08.04.21.19.13;	author steven;	state Exp;
branches;
next	1.121;

1.121
date	2009.08.03.21.53.33;	author martynas;	state Exp;
branches;
next	1.120;

1.120
date	2009.07.21.19.25.49;	author martynas;	state Exp;
branches;
next	1.119;

1.119
date	2009.06.11.14.10.37;	author martynas;	state Exp;
branches;
next	1.118;

1.118
date	2009.05.01.22.53.25;	author martynas;	state Exp;
branches;
next	1.117;

1.117
date	2009.04.28.21.50.16;	author martynas;	state Exp;
branches;
next	1.116;

1.116
date	2009.04.26.11.01.05;	author ajacoutot;	state Exp;
branches;
next	1.115;

1.115
date	2009.04.22.21.59.31;	author martynas;	state Exp;
branches;
next	1.114;

1.114
date	2009.04.22.21.00.23;	author martynas;	state Exp;
branches;
next	1.113;

1.113
date	2009.04.05.00.23.49;	author martynas;	state Exp;
branches;
next	1.112;

1.112
date	2009.03.28.15.59.04;	author martynas;	state Exp;
branches;
next	1.111;

1.111
date	2009.03.10.12.08.34;	author fgsch;	state Exp;
branches;
next	1.110;

1.110
date	2009.03.05.23.42.20;	author martynas;	state Exp;
branches;
next	1.109;

1.109
date	2009.02.04.21.08.15;	author martynas;	state Exp;
branches
	1.109.2.1;
next	1.108;

1.108
date	2009.01.09.15.54.31;	author martynas;	state Exp;
branches;
next	1.107;

1.107
date	2008.12.18.19.27.13;	author martynas;	state Exp;
branches;
next	1.106;

1.106
date	2008.12.16.22.33.27;	author naddy;	state Exp;
branches;
next	1.105;

1.105
date	2008.11.20.23.41.32;	author martynas;	state Exp;
branches;
next	1.104;

1.104
date	2008.11.13.16.57.14;	author martynas;	state Exp;
branches;
next	1.103;

1.103
date	2008.09.24.19.23.25;	author martynas;	state Exp;
branches;
next	1.102;

1.102
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.101;

1.101
date	2008.08.19.23.53.45;	author martynas;	state Exp;
branches;
next	1.100;

1.100
date	2008.07.26.16.23.32;	author ajacoutot;	state Exp;
branches;
next	1.99;

1.99
date	2008.07.25.17.41.06;	author martynas;	state Exp;
branches;
next	1.98;

1.98
date	2008.07.25.08.03.15;	author martynas;	state Exp;
branches;
next	1.97;

1.97
date	2008.07.20.09.49.00;	author claudio;	state Exp;
branches;
next	1.96;

1.96
date	2008.07.17.16.47.39;	author martynas;	state Exp;
branches;
next	1.95;

1.95
date	2008.07.04.13.47.25;	author martynas;	state Exp;
branches;
next	1.94;

1.94
date	2008.04.18.15.17.17;	author martynas;	state Exp;
branches;
next	1.93;

1.93
date	2008.03.27.21.51.35;	author jasper;	state Exp;
branches;
next	1.92;

1.92
date	2008.02.11.18.13.44;	author bernd;	state Exp;
branches
	1.92.2.1;
next	1.91;

1.91
date	2008.01.23.16.41.40;	author martynas;	state Exp;
branches;
next	1.90;

1.90
date	2007.12.20.22.41.18;	author martynas;	state Exp;
branches;
next	1.89;

1.89
date	2007.12.20.21.50.31;	author kurt;	state Exp;
branches;
next	1.88;

1.88
date	2007.12.19.17.25.28;	author jasper;	state Exp;
branches;
next	1.87;

1.87
date	2007.12.19.14.47.50;	author jasper;	state Exp;
branches;
next	1.86;

1.86
date	2007.11.28.20.22.25;	author martynas;	state Exp;
branches;
next	1.85;

1.85
date	2007.11.08.16.07.42;	author martynas;	state Exp;
branches;
next	1.84;

1.84
date	2007.10.27.09.04.32;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2007.10.23.20.13.26;	author martynas;	state Exp;
branches;
next	1.82;

1.82
date	2007.10.19.17.36.17;	author fgsch;	state Exp;
branches;
next	1.81;

1.81
date	2007.10.14.18.33.09;	author kurt;	state Exp;
branches;
next	1.80;

1.80
date	2007.09.20.16.28.28;	author martynas;	state Exp;
branches;
next	1.79;

1.79
date	2007.09.15.22.14.34;	author merdely;	state Exp;
branches;
next	1.78;

1.78
date	2007.09.15.20.38.22;	author merdely;	state Exp;
branches;
next	1.77;

1.77
date	2007.08.02.13.09.41;	author martynas;	state Exp;
branches;
next	1.76;

1.76
date	2007.07.24.19.32.13;	author naddy;	state Exp;
branches;
next	1.75;

1.75
date	2007.06.12.16.45.37;	author martynas;	state Exp;
branches;
next	1.74;

1.74
date	2007.06.01.08.03.42;	author martynas;	state Exp;
branches;
next	1.73;

1.73
date	2007.04.07.17.40.02;	author kili;	state Exp;
branches;
next	1.72;

1.72
date	2007.04.06.14.33.36;	author martynas;	state Exp;
branches;
next	1.71;

1.71
date	2007.03.27.16.04.37;	author martynas;	state Exp;
branches;
next	1.70;

1.70
date	2007.03.06.17.43.36;	author espie;	state Exp;
branches
	1.70.2.1;
next	1.69;

1.69
date	2007.03.04.20.23.57;	author pvalchev;	state Exp;
branches;
next	1.68;

1.68
date	2007.03.01.22.46.06;	author robert;	state Exp;
branches;
next	1.67;

1.67
date	2007.02.26.14.21.26;	author robert;	state Exp;
branches;
next	1.66;

1.66
date	2007.02.20.20.06.56;	author sturm;	state Exp;
branches;
next	1.65;

1.65
date	2007.02.14.22.44.32;	author naddy;	state Exp;
branches;
next	1.64;

1.64
date	2007.02.05.00.11.55;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2007.01.12.21.46.17;	author kurt;	state Exp;
branches;
next	1.62;

1.62
date	2006.12.21.09.53.43;	author bernd;	state Exp;
branches;
next	1.61;

1.61
date	2006.12.16.12.22.35;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2006.11.30.21.07.13;	author kurt;	state Exp;
branches;
next	1.59;

1.59
date	2006.11.17.19.14.51;	author kurt;	state Exp;
branches;
next	1.58;

1.58
date	2006.11.10.14.15.49;	author wilfried;	state Exp;
branches;
next	1.57;

1.57
date	2006.10.01.22.23.47;	author brad;	state Exp;
branches;
next	1.56;

1.56
date	2006.09.18.12.00.00;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2006.09.17.21.02.58;	author steven;	state Exp;
branches;
next	1.54;

1.54
date	2006.07.31.09.32.19;	author bernd;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2006.06.05.09.30.06;	author bernd;	state Exp;
branches;
next	1.52;

1.52
date	2006.05.23.14.03.22;	author bernd;	state Exp;
branches;
next	1.51;

1.51
date	2006.05.05.10.14.21;	author bernd;	state Exp;
branches;
next	1.50;

1.50
date	2006.04.18.10.37.32;	author wilfried;	state Exp;
branches;
next	1.49;

1.49
date	2006.03.27.04.23.28;	author pvalchev;	state Exp;
branches;
next	1.48;

1.48
date	2006.02.06.08.21.53;	author wilfried;	state Exp;
branches
	1.48.2.1;
next	1.47;

1.47
date	2006.01.16.07.01.39;	author steven;	state Exp;
branches;
next	1.46;

1.46
date	2006.01.14.00.07.31;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2005.12.31.18.35.56;	author sturm;	state Exp;
branches;
next	1.44;

1.44
date	2005.12.26.02.17.53;	author ian;	state Exp;
branches;
next	1.43;

1.43
date	2005.12.21.15.33.00;	author kurt;	state Exp;
branches;
next	1.42;

1.42
date	2005.12.20.23.44.00;	author bernd;	state Exp;
branches;
next	1.41;

1.41
date	2005.11.15.09.21.52;	author wilfried;	state Exp;
branches;
next	1.40;

1.40
date	2005.11.14.15.50.18;	author wilfried;	state Exp;
branches;
next	1.39;

1.39
date	2005.11.03.00.59.43;	author pvalchev;	state Exp;
branches;
next	1.38;

1.38
date	2005.10.19.13.08.12;	author naddy;	state Exp;
branches;
next	1.37;

1.37
date	2005.10.14.04.00.38;	author kurt;	state Exp;
branches;
next	1.36;

1.36
date	2005.10.13.04.32.41;	author bernd;	state Exp;
branches;
next	1.35;

1.35
date	2005.09.24.16.19.29;	author bernd;	state Exp;
branches;
next	1.34;

1.34
date	2005.09.16.15.54.53;	author david;	state Exp;
branches;
next	1.33;

1.33
date	2005.09.08.12.48.39;	author kurt;	state Exp;
branches;
next	1.32;

1.32
date	2005.08.12.19.01.44;	author pvalchev;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2005.08.11.18.59.14;	author kurt;	state Exp;
branches;
next	1.30;

1.30
date	2005.07.22.19.34.20;	author kurt;	state Exp;
branches;
next	1.29;

1.29
date	2005.05.24.00.44.41;	author msf;	state Exp;
branches;
next	1.28;

1.28
date	2005.05.13.08.21.54;	author wilfried;	state Exp;
branches;
next	1.27;

1.27
date	2005.04.19.07.07.05;	author wilfried;	state Exp;
branches;
next	1.26;

1.26
date	2005.04.16.15.49.17;	author kurt;	state Exp;
branches;
next	1.25;

1.25
date	2005.04.09.15.43.47;	author wilfried;	state Exp;
branches;
next	1.24;

1.24
date	2005.04.04.21.24.00;	author kurt;	state Exp;
branches;
next	1.23;

1.23
date	2005.04.01.16.44.52;	author kurt;	state Exp;
branches;
next	1.22;

1.22
date	2005.03.26.19.05.27;	author wilfried;	state Exp;
branches;
next	1.21;

1.21
date	2005.03.16.08.59.04;	author wilfried;	state Exp;
branches
	1.21.2.1;
next	1.20;

1.20
date	2005.03.02.19.30.18;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2005.01.13.15.57.26;	author wilfried;	state Exp;
branches;
next	1.18;

1.18
date	2005.01.10.14.39.22;	author wilfried;	state Exp;
branches;
next	1.17;

1.17
date	2005.01.10.10.17.08;	author wilfried;	state Exp;
branches;
next	1.16;

1.16
date	2005.01.04.21.27.28;	author wilfried;	state Exp;
branches;
next	1.15;

1.15
date	2005.01.04.20.59.17;	author wilfried;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.11.13.29.22;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2004.12.08.21.54.49;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2004.11.26.18.29.14;	author pvalchev;	state Exp;
branches;
next	1.11;

1.11
date	2004.10.31.07.23.13;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2004.08.08.17.19.36;	author robert;	state Exp;
branches;
next	1.9;

1.9
date	2004.08.04.16.12.14;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2004.05.06.14.39.49;	author wilfried;	state Exp;
branches;
next	1.7;

1.7
date	2004.03.03.02.23.56;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2004.03.01.23.52.32;	author drahn;	state Exp;
branches;
next	1.5;

1.5
date	2004.03.01.09.12.13;	author wilfried;	state Exp;
branches;
next	1.4;

1.4
date	2004.03.01.07.14.48;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.25.02.35.17;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2004.02.23.17.58.56;	author wilfried;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.15.19.37.14;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.02.15.19.37.14;	author wilfried;	state Exp;
branches;
next	;

1.21.2.1
date	2005.06.06.20.30.29;	author robert;	state Exp;
branches;
next	1.21.2.2;

1.21.2.2
date	2005.08.15.12.05.40;	author robert;	state Exp;
branches;
next	1.21.2.3;

1.21.2.3
date	2005.08.31.19.51.41;	author sturm;	state Exp;
branches;
next	1.21.2.4;

1.21.2.4
date	2005.09.19.06.50.57;	author sturm;	state Exp;
branches;
next	1.21.2.5;

1.21.2.5
date	2005.10.30.07.18.40;	author sturm;	state Exp;
branches;
next	1.21.2.6;

1.21.2.6
date	2006.04.24.15.46.58;	author sturm;	state Exp;
branches;
next	;

1.32.2.1
date	2005.11.01.11.36.44;	author sturm;	state Exp;
branches;
next	1.32.2.2;

1.32.2.2
date	2006.04.24.15.48.59;	author sturm;	state Exp;
branches;
next	;

1.48.2.1
date	2006.05.02.07.17.13;	author sturm;	state Exp;
branches;
next	1.48.2.2;

1.48.2.2
date	2006.05.07.19.52.04;	author sturm;	state Exp;
branches;
next	1.48.2.3;

1.48.2.3
date	2006.06.19.05.19.48;	author sturm;	state Exp;
branches;
next	1.48.2.4;

1.48.2.4
date	2006.08.02.19.23.14;	author sturm;	state Exp;
branches;
next	1.48.2.5;

1.48.2.5
date	2006.09.20.20.48.05;	author sturm;	state Exp;
branches;
next	1.48.2.6;

1.48.2.6
date	2006.11.11.00.17.30;	author sturm;	state Exp;
branches;
next	1.48.2.7;

1.48.2.7
date	2006.12.23.20.53.49;	author sturm;	state Exp;
branches;
next	1.48.2.8;

1.48.2.8
date	2007.03.15.21.10.05;	author sturm;	state Exp;
branches;
next	1.48.2.9;

1.48.2.9
date	2007.04.02.11.16.33;	author sturm;	state Exp;
branches;
next	;

1.54.2.1
date	2006.11.01.09.07.11;	author sturm;	state Exp;
branches;
next	1.54.2.2;

1.54.2.2
date	2006.11.10.17.48.52;	author sturm;	state Exp;
branches;
next	1.54.2.3;

1.54.2.3
date	2006.12.24.06.11.08;	author sturm;	state Exp;
branches;
next	1.54.2.4;

1.54.2.4
date	2007.03.09.06.17.24;	author sturm;	state Exp;
branches;
next	1.54.2.5;

1.54.2.5
date	2007.04.02.14.00.27;	author sturm;	state Exp;
branches;
next	1.54.2.6;

1.54.2.6
date	2007.06.27.06.12.27;	author sturm;	state Exp;
branches;
next	;

1.70.2.1
date	2007.05.01.16.22.32;	author sturm;	state Exp;
branches;
next	1.70.2.2;

1.70.2.2
date	2007.06.17.13.13.40;	author sturm;	state Exp;
branches;
next	1.70.2.3;

1.70.2.3
date	2007.07.04.17.11.48;	author sturm;	state Exp;
branches;
next	1.70.2.4;

1.70.2.4
date	2007.08.25.18.19.47;	author sturm;	state Exp;
branches;
next	1.70.2.5;

1.70.2.5
date	2007.09.30.16.56.10;	author ajacoutot;	state Exp;
branches;
next	;

1.92.2.1
date	2008.06.10.05.19.19;	author robert;	state Exp;
branches;
next	;

1.109.2.1
date	2009.06.09.02.58.30;	author william;	state Exp;
branches;
next	;

1.166.2.1
date	2011.04.27.02.55.44;	author william;	state Exp;
branches;
next	;

1.234.2.1
date	2013.11.14.09.57.07;	author jasper;	state Exp;
branches;
next	1.234.2.2;

1.234.2.2
date	2013.12.01.22.06.19;	author jasper;	state Exp;
branches;
next	1.234.2.3;

1.234.2.3
date	2013.12.15.13.52.17;	author jasper;	state Exp;
branches;
next	1.234.2.4;

1.234.2.4
date	2014.02.05.08.07.24;	author jasper;	state Exp;
branches;
next	1.234.2.5;

1.234.2.5
date	2014.03.26.18.08.45;	author jasper;	state Exp;
branches;
next	;

1.313.2.1
date	2017.04.20.19.44.46;	author landry;	state Exp;
branches;
next	1.313.2.2;
commitid	FPZjxs6KRlLvhncc;

1.313.2.2
date	2017.05.06.07.24.08;	author landry;	state Exp;
branches;
next	;
commitid	4Tl5SNoVNiTsNfnP;


desc
@@


1.316
log
@Bugfix update to firefox 53.0.2.

See https://www.mozilla.org/en-US/firefox/53.0.2/releasenotes/
Fixes MFSA2017-14, but that only affects Windows.
@
text
@# $OpenBSD: Makefile,v 1.315 2017/04/20 06:12:58 landry Exp $

COMMENT =	Mozilla web browser

# Don't forget to bump www/firefox-i18n after updates.

MOZILLA_VERSION =	53.0.2
MOZILLA_BRANCH =	release
MOZILLA_PROJECT =	firefox
MOZILLA_CODENAME =	browser
BROKEN-sparc64 =	xpcshell SIGBUS during fake
EXTRACT_SUFX =		.tar.xz

SO_VERSION =	71.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
MOZILLA_LIBS =	mozavcodec mozavutil mozgtk xul clearkey lgpllibs

CATEGORIES =	www

# mozilla public license
PERMIT_PACKAGE_CDROM=	Yes

# lots of logic in mozilla.port.mk
MODULES =	www/mozilla devel/gettext lang/python

MODPY_RUNDEP =	No

MODULES +=		lang/clang
MODCLANG_ARCHS =	amd64 i386
MODCLANG_LANGS =	c c++

# firefox >= 44 doesnt build with base libevent
MOZILLA_USE_BUNDLED_LIBEVENT =	Yes
# firefox >= 46 defaults to gtk+3
MOZILLA_USE_GTK3 = Yes
# firefox >= 53 needs rust and cargo
BUILD_DEPENDS +=	lang/rust devel/cargo

WANTLIB += X11-xcb pixman-1 pthread-stubs xcb xcb-shm

# Regression tests are too hard to adapt to run here
NO_TEST =	Yes

CONFIGURE_STYLE =	simple
CONFIGURE_ARGS +=	--prefix=${PREFIX}

# to be able to link when building with clang on i386
.if ${MACHINE_ARCH} == "i386"
CONFIGURE_ARGS +=	--disable-debug-symbols
.endif

# relies on pulseaudio for sound and broken at runtime
#CONFIGURE_ARGS +=	--disable-webrtc

# bug 857628
CONFIGURE_ARGS +=	--enable-pie

post-install:
	${SUBST_MAN} ${FILESDIR}/mozilla-firefox.1 \
		${PREFIX}/man/man1/mozilla-firefox.1
	cd ${PREFIX}/man/man1/ && ln -sf mozilla-firefox.1 firefox.1
	cd ${PREFIX}/bin/ && ln -sf firefox mozilla-firefox
	# install prefs
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/browser/defaults/preferences
	${SUBST_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/browser/defaults/preferences/all-openbsd.js
	# install distribution.ini file
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution
	echo "[Global]\nid=OpenBSD\nversion=${OSREV}\nabout=Packaged by ${MAINTAINER}\n" > \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution/distribution.ini
	# install desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	${SUBST_DATA} ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
		${PREFIX}/share/applications/${MOZILLA_PROJECT}.desktop
	# install icon for desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps/
	${INSTALL_DATA} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/browser/icons/mozicon128.png \
		${PREFIX}/share/pixmaps/firefox.png

	# link default48.png to default.png to be used by default by non-icccm compliant wm
	ln ${PREFIX}/lib/firefox-${MOZILLA_VER}/browser/chrome/icons/default/default{48,}.png

.include <bsd.port.mk>
@


1.315
log
@Update to firefox 53.0.

See https://www.mozilla.org/en-US/firefox/53.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2017-10/.

- Now depends on rust and cargo to build.
- Remove patch-browser_installer_Makefile_in, sdk was removed in #1333826
- Ship a small distribution.ini to show package source in about dialog
- Add a blurb from Michael Reed about installing ffmpeg package to play
HTML5 audio/video.

Tested by several
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.314 2017/04/12 18:12:33 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	53.0
@


1.314
log
@Fix WANTLIB and bump REVISION for all ports depending on hunspell.

While here enforce dependency on hunspell 1.6 in mozilla.port.mk, as
it's a requirement for 53.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.313 2017/03/28 20:07:27 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	52.0.2
a12 1
REVISION =		0
d14 1
a14 1
SO_VERSION =	70.0
d37 2
d68 4
@


1.313
log
@Bugfix update to firefox 52.0.2.

See https://www.mozilla.org/en-US/firefox/52.0.2/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.312 2017/03/20 19:35:15 landry Exp $
d13 1
@


1.313.2.1
log
@MFC: update to firefox 53.0.

Over time i'll see if i keep doing this in -stable or give up.
"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub

Changes from -current include:
- dont bump SO_VERSION
- build against bundled nss/nspr (53 wants nss 3.29.5)
- add selected patches from devel/nspr and security/nss
- build against bundled hunspell (53 wants 1.6)
- add BDEP on rust/cargo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.313 2017/03/28 20:07:27 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	53.0
d17 1
a17 2
MOZILLA_LIBS =	mozavcodec mozavutil mozgtk xul clearkey lgpllibs \
	freebl3 nspr4 nss3 nssckbi nssdbm3 nssutil3 plc4 plds4 smime3 softokn3 ssl3
a34 5
# firefox >= 53 needs 3.29.5
MOZILLA_USE_BUNDLED_NSPR =	Yes
MOZILLA_USE_BUNDLED_NSS =	Yes
# firefox >= 53 needs 1.6
MOZILLA_USE_BUNDLED_HUNSPELL =	Yes
a36 2
# firefox >= 53 needs rust and cargo
BUILD_DEPENDS +=	lang/rust devel/cargo
a65 4
	# install distribution.ini file
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution
	echo "[Global]\nid=OpenBSD\nversion=${OSREV}\nabout=Packaged by ${MAINTAINER}\n" > \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution/distribution.ini
@


1.313.2.2
log
@MFC: update to firefox 53.0.2.

Stable packages for i386 and amd64 available at https://packages.rhaalovely.net/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.313.2.1 2017/04/20 19:44:46 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	53.0.2
@


1.312
log
@Update to firefox 52.0.1.

Fixes MFSA 2017-08/CVE-2017-5428, see
https://www.mozilla.org/en-US/security/advisories/mfsa2017-08/

While here, add a patch from semarie@@ (tested by and ok danj@@) to tweak
a last-minute change in the jit engine memory allocator that happened to
fix a security issue in 52 branch (bug #1334933/CVE-2017-5400) - see
https://hg.mozilla.org/releases/mozilla-esr52/rev/6b35bbf96b67.

Sadly, this change resulted in a browser crashing at startup
on OpenBSD with the default limits, because the jit engine tried to
allocate 1Gb (previously 640Mb in #1334933, then 1Gb because of
#1337561, see
https://hg.mozilla.org/releases/mozilla-esr52/rev/65bb26d07408) and hit
the default datasize ulimit of 768Mb. The patch makes it allocate 128Mb
instead (as it's done on 32bit architectures), while a better (?) fix
might be devised in bug #1347139.

Generally speaking, if you see firefox crashing with ENOMEM errors,
raise the datasize limit for your login class, write your own wrapper
script to temporarly raise the limit when starting firefox, or stop
using the modern web. Websites are ginormous, deal with it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.311 2017/03/07 15:31:38 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	52.0.1
@


1.311
log
@Update mozilla-firefox to 52.0.

See https://www.mozilla.org/en-US/firefox/52.0/releasenotes/

Remove patch for #1335827, merged upstream.

Note that this release removes support for NPAPI plugins (java, etc..) -
users relying on those should migrate to firefox-esr, where NPAPI
plugins will be supported for the lifetime of 52esr branch.

Tested by several, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.310 2017/02/21 19:53:55 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	52.0
@


1.310
log
@Backport fix for #1335827 - frequent crashes with "ABORT:
RenderFreePicture: RenderBadPicture", reported and testing by semarie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.309 2017/02/18 16:22:54 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	51.0
a12 1
REVISION =	0
d14 1
a14 1
SO_VERSION =	69.0
d17 1
a17 1
MOZILLA_LIBS =	browsercomps mozavcodec mozavutil mozgtk xul clearkey lgpllibs
@


1.309
log
@Consolidate textproc/icu4c common dependency into mozilla.port.mk, and
allow to build against bundled icu4c by setting MOZILLA_USE_BUNDLED_ICU.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.308 2017/01/24 21:33:09 landry Exp $
d13 1
@


1.308
log
@Update to firefox 51.0.

See https://www.mozilla.org/en-US/firefox/51.0/releasenotes/ and MFSA
2017-01 (https://www.mozilla.org/en-US/security/advisories/mfsa2017-01/)

Remove patch-netwerk_protocol_http_Http2Session_cpp (#1290037)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.307 2017/01/06 22:14:07 landry Exp $
a52 5

# bug #1064665
LIB_DEPENDS +=	textproc/icu4c
CONFIGURE_ARGS += --with-system-icu
WANTLIB += icudata icui18n icuuc
@


1.307
log
@Fix NS_ERROR_NET_INADEQUATE_SECURITY error messages on
wikipedia|google|cnn|various sites (http/2?) broken by the nss 3.28
update, my bad - totally forgot about this when updating.

Backport https://hg.mozilla.org/mozilla-central/rev/361ac226da2a

See https://bugzilla.mozilla.org/show_bug.cgi?id=1290037 &
https://bugzilla.mozilla.org/show_bug.cgi?id=1323209

Reported by Solene Rapenne and others, fix tested by danj@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.306 2016/12/14 13:30:34 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	50.1.0
a12 1
REVISION =	0
d14 1
a14 1
SO_VERSION =	68.0
@


1.306
log
@Bugfix update to firefox 50.1.0.

See https://www.mozilla.org/en-US/firefox/50.1.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-94/.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.305 2016/11/30 21:38:53 landry Exp $
d13 1
@


1.305
log
@Security update to firefox 50.0.2.

See https://www.mozilla.org/en-US/firefox/50.0.2/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-92/ (link not
up yet). A javascript exploit for windows was found in the wild, and the
vulnerability could technically be exploited on other platforms..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.304 2016/11/29 08:11:34 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	50.0.2
@


1.304
log
@Bugfix update to firefox 50.0.1.

See https://www.mozilla.org/en-US/firefox/50.0.1/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-91/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.303 2016/11/15 22:01:15 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	50.0.1
@


1.303
log
@Update to firefox 50.0.

See https://www.mozilla.org/en-US/firefox/50.0/releasenotes/
and https://www.mozilla.org/en-US/security/advisories/mfsa2016-89/

Switch back to build against systemwide sqlite3 coming from the
ports-tree. Remove the build goo for macppc|sparc64|alpha, it's unlikely
this will ever come back...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.302 2016/10/24 09:33:08 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	50.0
@


1.302
log
@Update to firefox 49.0.2.

See https://www.mozilla.org/en-US/firefox/49.0.2/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-87/
Fixes MFSA-2016-87:
- CVE-2016-5287 / bugzil.la/1309823
- CVE-2016-5288 / bugzil.la/1310183 (bug information private)

prodded by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.301 2016/09/24 14:46:45 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	49.0.2
d14 1
a14 1
SO_VERSION =	67.0
d17 1
a17 1
MOZILLA_LIBS =	browsercomps mozavcodec mozavutil mozgtk mozsqlite3 xul clearkey lgpllibs
d29 1
a29 4
# necessary glue to build with the correct compiler after fx 17
MODULES +=		gcc4 lang/clang
MODGCC4_ARCHS =		powerpc sparc64 alpha
MODGCC4_LANGS =		c c++
a34 2
# gecko 46 wants sqlite 3.10.2
MOZILLA_USE_BUNDLED_SQLITE = Yes
d38 2
d46 2
a47 2
# to be able to link when building with clang on i386 or gcc on ppc
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "powerpc"
@


1.301
log
@Update to firefox 49.0.1.

See https://www.mozilla.org/en-US/firefox/49.0/releasenotes/ (.1 is for
a windows-only fix) - not that 'loop' (ex-firefox hello) was removed
from the browser.
- Fixes MFSA 2016-85
- Remove media/ffvpx/config.h patch, merged upstream/fixed differently in
bug #1239550
- Set media.autoplay.enabled to false by default, i'm usually wary of
  changing upstream defaults, but this one is unfuriating with "the
modern web and all this funky video ads".. this one got support from
many.
- Add a blurb to README explaining how to enable/test e10s/multi-process
  support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.300 2016/08/02 17:50:03 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	49.0.1
@


1.300
log
@Update to firefox 48.0.

- See https://www.mozilla.org/en-US/firefox/48.0/releasenotes/
- Fixes MFSA 2016-62->84
- See
  https://blog.mozilla.org/blog/2016/08/02/exciting-improvements-in-firefox-for-desktop-and-android/
for user-facing changes
- Switch CONFIGURE_STYLE to simple as it's really not a gnu script
  anymore..
- Remove gtk 3.20 jumbo patch, most gtk3 issues are either fixed or
  being worked on, and the patch isnt maintainable
- Remove patch-gfx_skia_moz_build, it isn't needed anymore on i386, and
  SSE2 will soon be a hard runtime requirement anyway
- Remove patch-media_libcubeb_src_cubeb_sndio_c, merged upstream (#1153151 & #1153179)
- Remove
  patch-toolkit_components_protobuf_src_google_protobuf_stubs_atomicops_h,
merged upstream (#1192556)
- Note that WebRT was removed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.299 2016/07/10 10:04:44 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	48.0
d14 1
a14 1
SO_VERSION =	66.0
@


1.299
log
@Minor bugfix update to firefox 47.0.1.

- See https://www.mozilla.org/en-US/firefox/47.0.1/releasenotes/
- Fixes #1278605 & #1277522
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.298 2016/06/08 19:25:42 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	47.0.1
d14 1
a14 1
SO_VERSION =	65.0
d46 2
a47 1
CONFIGURE_STYLE =	gnu
a60 2

CONFIGURE_ARGS +=	--disable-gstreamer
@


1.298
log
@Update to firefox 47.0.

- See https://www.mozilla.org/en-US/firefox/47.0/releasenotes/
- Fixes MFSA 2016-49->61
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.297 2016/05/05 06:53:19 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	47.0
@


1.297
log
@Bugfix update to firefox 46.0.1.

- See https://www.mozilla.org/en-US/firefox/46.0.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.296 2016/04/27 22:08:14 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	46.0.1
d14 1
a14 1
SO_VERSION =	64.0
@


1.296
log
@Readd mozgtk to MOZILLA_LIBS to fix packaging - thx sthen@@ for the
testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.295 2016/04/27 13:50:27 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	46.0
@


1.295
log
@Update to firefox 46.0.

- See https://www.mozilla.org/en-US/firefox/46.0/releasenotes/
- Fixes MFSA 2016-39 -> 48
- Switch to use Gtk3 by default (finally!), following the upstream move
- Add a jumbo patch from Fedora to fix several issues with Gtk 3.20
  (#1234158)
- Leave WebRTC enabled. The code builds, sort-of works, sound support
  is not really there, but this way ppl will dogfood/test it. If you
  encounter issues, go to bugzilla.mozilla.org and get involved with
  upstream.
- If you want to disable WebRTC, just toggle media.peerconnection.enabled
  to false in about:config.
- Stop using systemwide sqlite, build the bundled one instead. Simpler,
  as it often forced us to update sqlite in base...
- Add patch from #1239550 to fix the build in ffvpx
- Backport two cubeb patches from ratchov@@ already commited upstream
  (#1153151 & #1153179)
- Remove the obsolete gstreamer section from README, from Brad (and others)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.294 2016/03/19 13:37:37 landry Exp $
d17 1
a17 1
MOZILLA_LIBS =	browsercomps mozavcodec mozavutil mozsqlite3 xul clearkey lgpllibs
@


1.294
log
@Bugfix update to firefox 45.0.1.

See https://www.mozilla.org/en-US/firefox/45.0.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.293 2016/03/17 20:08:56 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	45.0.1
d14 1
a14 1
SO_VERSION =	63.0
d17 1
a17 1
MOZILLA_LIBS =	browsercomps mozgtk xul clearkey lgpllibs
d38 4
d54 1
a54 1
CONFIGURE_ARGS +=	--disable-webrtc
@


1.293
log
@Remove BROKEN-i386 marker. Whatever happened with fx 44 & llvm 3.7.1 has
autofixed itself with fx 45, which just builds & runs fine on i386.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.292 2016/03/14 20:48:43 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	45.0
@


1.292
log
@Update to firefox 45.0.

- See https://www.mozilla.org/en-US/firefox/45.0/releasenotes/
- Fixes MFSA 2016-16->38
- libmozgnome was removed upstream
- gtk3 is still not enabled by default upstream
- Remove dependency on gstreamer1, ffmpeg/libavcodec is opened on the fly
if available, as tested by naddy@@

Sidenote: no, i havent looked at i386/llvm breakage yet. i386 is the new vax.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.291 2016/03/10 02:41:49 sthen Exp $

BROKEN-i386 =	wants __atomic_{store,fetch_add,fetch_sub,load}_8, even with -march=i586
@


1.291
log
@all the world's an amd64
disable these ports to save time in bulk builds until i386 can be repaired
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.290 2016/03/05 16:04:06 pascal Exp $
d9 1
a9 1
MOZILLA_VERSION =	44.0.2
a14 1
REVISION =		0
d16 1
a16 1
SO_VERSION =	62.0
d19 1
a19 1
MOZILLA_LIBS =	browsercomps mozgnome xul clearkey lgpllibs
d59 1
a59 1
CONFIGURE_ARGS +=	--enable-gstreamer=1.0
a62 2

BUILD_DEPENDS +=	multimedia/gstreamer1/plugins-base
@


1.290
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.289 2016/02/13 07:39:25 landry Exp $
@


1.289
log
@Security update to firefox 44.0.2.

See https://www.mozilla.org/en-US/firefox/44.0.2/releasenotes/
Fixes MFSA2016-13.
ok sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.288 2016/02/09 09:21:27 landry Exp $
d13 1
@


1.288
log
@Bugfix update to firefox 44.0.1.

See https://www.mozilla.org/en-US/firefox/44.0.1/releasenotes/

ok sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.287 2016/01/27 18:12:43 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	44.0.1
@


1.287
log
@Update to firefox-44.0.

* See https://www.mozilla.org/en-US/firefox/44.0/releasenotes/
* Fixes MFSA 2016-01 -> 12
* Fix CONFIGURE_STYLE, no need for autohell?
* Use bundled libevent
* Remove useless MOZILLA_AUTOCONF_DIRS

Note that starting with fx 45, gstreamer will be deprecated in favor of
ffmpeg. If it works, haven't tested it yet...
Tested by/discussed with naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.286 2016/01/07 09:24:20 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	44.0
@


1.286
log
@Minor update to firefox 43.0.4.

See https://www.mozilla.org/en-US/firefox/43.0.4/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.285 2015/12/23 17:41:35 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	43.0.4
d14 1
a14 1
SO_VERSION =	61.0
d36 3
d42 1
a42 1
CONFIGURE_STYLE =	autoconf no-autoheader
a62 2

MOZILLA_AUTOCONF_DIRS +=	js/src
@


1.285
log
@Update to firefox 43.0.2.

See https://www.mozilla.org/en-US/firefox/43.0.2/releasenotes/
No binary change for us since this is only to force updates for poor
windows users, because microsoft now requires SHA256 certs. But ppl
wont complain that OpenBSD doesn't ship the latest and greatest!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.284 2015/12/16 10:12:14 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	43.0.2
@


1.284
log
@Update to firefox 43.0.

See https://www.mozilla.org/en-US/firefox/43.0/releasenotes/
Fixes MFSA 2015-134 -> 149

- Remove merged patch about freetype paths/versions
- Remove outdated mention of 'disable anti-aliasing', from matthieu@@

Tested (among others) by benoit@@, mmcc@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.283 2015/11/04 07:35:51 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	43.0
@


1.283
log
@Update to firefox 42.0.

- See https://www.mozilla.org/en-US/firefox/42.0/releasenotes/
- Fixes MFSA-2015-116 -> 133
- Tested by several, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.282 2015/10/19 08:09:23 dcoppa Exp $
d7 1
a7 1
MOZILLA_VERSION =	42.0
d14 1
a14 1
SO_VERSION =	60.0
@


1.282
log
@
Enable option to mark JIT pages as non-writable.

We're enabling this now so people can test and eventual regressions
can be catched and reported upstream.

There's a bug opened on Bugzilla@@Mozilla:
https://bugzilla.mozilla.org/show_bug.cgi?id=1215479

OK landry@@, sthen@@
deraadt@@ also agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.281 2015/10/16 12:04:40 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	41.0.2
a10 1
REVISION =		0
d14 1
a14 1
SO_VERSION =	59.0
d17 1
a17 1
MOZILLA_LIBS =	browsercomps mozgnome xul clearkey
@


1.281
log
@Security update to firefox 41.0.2.

Fixes MFSA 2015-115 / CVE-2015-7184 (Cross-origin restriction bypass using Fetch)
https://www.mozilla.org/en-US/security/advisories/mfsa2015-115/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.280 2015/10/05 08:48:14 landry Exp $
d11 1
@


1.280
log
@Bugfix update to firefox 41.0.1.

- See https://www.mozilla.org/en-US/firefox/41.0.1/releasenotes/
- Mostly windows-only bugfixes but a bookmark handling regression might
affect us (see #1206376)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.279 2015/09/24 20:21:15 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	41.0.1
@


1.279
log
@Update to firefox 41.0.

- See https://www.mozilla.org/en-US/firefox/41.0/releasenotes/
- Fixes MFSA 2015-96->114
- Add patch to workaround build failure on 32-bits (#1192556)
- Note that powerpc still fails due to the same issue but a
 hack^Wworkaround hasnt been found yet.

Firefox 42 will probably default to build with Gtk3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.278 2015/08/31 20:08:40 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	41.0
@


1.278
log
@Update to firefox 40.0.3.

- See https://www.mozilla.org/en-US/firefox/40.0.3/releasenotes/
- Fixes MFSA-2015-94 & 95
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.277 2015/08/11 21:14:53 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	40.0.3
d12 1
d14 1
a14 1
SO_VERSION =	58.0
@


1.277
log
@Update to firefox{,-i18n} 40.0.

- See https://www.mozilla.org/en-US/firefox/40.0/releasenotes/
- Fixes MFSA-2015-79->92
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.276 2015/08/07 13:39:36 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	40.0
@


1.276
log
@SECURITY update to firefox 39.0.3 & firefox-esr 38.1.1.

Fixes MFSA2015-78, see
https://blog.mozilla.org/security/2015/08/06/firefox-exploit-found-in-the-wild/
and https://www.mozilla.org/en-US/security/advisories/mfsa2015-78/

ok naddy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.275 2015/07/25 06:51:50 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	39.0.3
d13 1
a13 1
SO_VERSION =	57.0
d16 1
a16 1
MOZILLA_LIBS =	browsercomps mozalloc mozgnome xul clearkey
@


1.275
log
@Face reality, mark as BROKEN-sparc64. xpcshell SIGBUSes during fake, and
nobody cares. No point in wasting hours during bulk builds....
If you want a graphical browser on sparc64, try netsurf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.274 2015/07/05 20:03:36 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	39.0
@


1.274
log
@Update to firefix{,-i18n} 39.0.

- See https://www.mozilla.org/en-US/firefox/39.0/releasenotes/
- Fixes MFSA 2015-59 -> 71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.273 2015/05/28 10:17:25 pascal Exp $
d11 1
@


1.273
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.272 2015/05/16 07:22:14 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	38.0.1
a10 1
REVISION =		0
d12 1
a12 1
SO_VERSION =	56.0
@


1.272
log
@Update to firefox 38.0.1.

- See https://www.mozilla.org/en-US/firefox/38.0.1/releasenotes/ and
  https://www.mozilla.org/en-US/firefox/38.0/releasenotes/
- Fixes MFSA 2015-46->58
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.271 2015/04/24 20:42:08 sthen Exp $
d11 1
@


1.271
log
@Add information about using Firefox with heimdal; adapted from a diff that
Jiri B wrote at my request. Feedback/ok ajacoutot@@ landry@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.270 2015/04/03 22:59:16 landry Exp $
d7 1
a7 2
MOZILLA_VERSION =	37.0.1
REVISION =		0
d12 1
a12 1
SO_VERSION =	55.0
@


1.270
log
@Bugfix update to firefox 37.0.1.

- See https://www.mozilla.org/en-US/firefox/37.0.1/releasenotes/
- Fixes MFSA 2015-43 & 44
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.269 2015/04/02 18:17:50 landry Exp $
d8 1
@


1.269
log
@Update to firefox 37.0.

- See https://www.mozilla.org/en-US/firefox/37.0/releasenotes/
- Fixes MFSA 2015-30 -> 42
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.268 2015/03/23 21:02:03 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	37.0
@


1.268
log
@Security update to firefox 36.0.4.

- See https://www.mozilla.org/en-US/firefox/36.0.4/releasenotes/
- Fixes MFSA 2015-28/29 (Pwn2Own)
- While here, backport commit from ratchov@@ in #1144087 fixing audio
  glitches in the sndio backend when playing youtube videos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.267 2015/03/19 19:49:49 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	36.0.4
d12 1
a12 1
SO_VERSION =	54.0
@


1.267
log
@Move i386 back to build with clang. The issues we had in the past seem
to have resolved, 37.0beta5 builds and runs with clang, and the build
of 36 with gcc4 is broken anyway because of #1028827 and #1122745. Boo
SSSE3/SSE4.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.266 2015/03/16 19:53:55 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	36.0.1
@


1.266
log
@Update to firefox-36.0.1.

- See https://www.mozilla.org/en-US/firefox/36.0.1/releasenotes/
- Fixes MFSA 2015-11->27
- widget code moved, move nsPrintSettingsImpl.cpp patch around
- remove patch-xpcom_reflect_xptcall_md_unix_moz_build, merged in #971897
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.265 2015/01/29 17:45:31 naddy Exp $
d29 1
a29 1
MODGCC4_ARCHS =		powerpc sparc64 alpha i386
d31 1
a31 1
MODCLANG_ARCHS =	amd64
@


1.265
log
@fix a confusing README typo; ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.264 2015/01/28 17:45:02 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	35.0.1
a10 1
REVISION =		0
d12 1
a12 1
SO_VERSION =	53.0
d15 1
a15 1
MOZILLA_LIBS =	browsercomps mozalloc mozgnome xul
@


1.264
log
@Update to firefox 35.0.1.

- See https://www.mozilla.org/en-US/firefox/35.0.1/releasenotes/
- while here, demote gstreamer1-plugins-good from RUN_DEPENDS to a
  simple note in the README. It seems having a fully working
out-of-the-box multimedia experience is not worth the attack surface
this brings via all its dependencies.

Note: this doesnt change anything for existing installs, if
gstreamer1-plugins-good/libav is found at runtime firefox will still use
it to play html audio/video. If you dont want that behaviour, have a
look in about:config for the various media.*.enabled keys. Or use lynx.

prodded by tedu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.263 2015/01/14 17:33:44 landry Exp $
d11 1
@


1.263
log
@Update to firefox 35.0.

- See https://www.mozilla.org/en-US/firefox/35.0/releasenotes/
- Fixes MFSA 2015-01 -> 09
- Remove patch-js_src_jscpucfg_h, merged upstream in #1065055
- Fix patch-gfx_skia_moz_build to use the correct SSE4_1 macro

tested by at least bcallah@@, brett@@, patrick keshishian and RD Thrush, thx!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.262 2014/12/06 16:55:32 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	35.0
a56 5
# libxul doesnt link directly with gst but dlopens it at runtime
# see content/media/gstreamer/GStreamerLoader.cpp
#LIB_DEPENDS +=	multimedia/gstreamer-0.10/plugins-base
#WANTLIB += gmodule-2.0 gstapp-0.10 gstbase-0.10 gstreamer-0.10
#WANTLIB += gstvideo-0.10 xml2
a57 1
RUN_DEPENDS +=	multimedia/gstreamer1/plugins-good
@


1.262
log
@browser/searchplugins/ddg.xml was added late in the 34 beta cycle,
and i forgot to update the PLIST.. adds duckduckgo to the list of
default available search engines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.261 2014/12/04 17:50:12 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	34.0
a10 1
REVISION = 0
d12 1
a12 1
SO_VERSION =	52.0
d53 3
@


1.261
log
@Update to firefox 34.0.

- See https://www.mozilla.org/en-US/firefox/34.0/releasenotes/
- Fixes MFSA-2014-83->91
- Remove patch-toolkit_library_libxul_mk, merged (#1036832)
- Remove patch-gfx_skia_trunk_src_opts_SkBitmapProcState_opts_SSSE3_cpp,
  merged upstream (but the root issue on i386 is still being worked on, #1028827)
- Add patch-xpcom_reflect_xptcall_md_unix_moz_build from (#971897),
  fixes the download progressbars. Nice work from Fabian Raetz, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.260 2014/11/10 15:40:02 landry Exp $
d11 1
@


1.260
log
@Update to firefox 33.1.

- See https://www.mozilla.org/en-US/firefox/33.1/releasenotes/,
, https://www.mozilla.org/en-US/firefox/tiles/ and
 https://support.mozilla.org/en-US/kb/forget-button-quickly-delete-your-browsing-history

This is a special release celebrating the 10 years anniversary of the
release of firefox 1.0. 34.0 will be released on the regular schedule in ~ two weeks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.259 2014/10/17 07:26:21 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	33.1
d12 1
a12 1
SO_VERSION =	51.0
@


1.259
log
@Update to firefox 33.0.

- See https://www.mozilla.org/en-US/firefox/33.0/releasenotes/
- Fixes MFSA 2014-74-->82
- build with systemwide icu4c, workarounds #1064665 (and as a side
  effect shrinks the libs/packages by 1 or 2 megs)
- add patch-toolkit_library_libxul_mk from bug #1036832 to workaround a
  linking failure with our ancient binutils
- remove patch-media_libvpx_Makefile_in from #982693 fixing libvpx build
  on i386, a variation of it was merged upstream

tested by bcallah@@, benoit@@ and Fabian Raetz, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.258 2014/09/02 16:43:04 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	33.0
@


1.258
log
@Update to firefox 32.0

- see https://www.mozilla.org/en-US/firefox/32.0/releasenotes/
- remove patch-toolkit_components_downloads_nsDownloadManager_cpp and
  patch-xpcom_io_SpecialSystemDirectory_cpp fiddling with modes when
creating user dirs, they never made sense to me, and this is the wrong
place to touch this.
- remove patch-webapprt_moz_build, patch-webapprt_gtk2_Makefile_in and
  patch-configure_in from #1012447, merged upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.257 2014/08/10 09:58:07 espie Exp $
a5 1
# Don't forget to update devel/xulrunner/2.0 if patches changes.
d7 1
a7 1
MOZILLA_VERSION =	32.0
d12 1
a12 2
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
SO_VERSION =	50.0
a32 4
# fix for 982693
.if ${MACHINE_ARCH:Mamd64}
MAKE_ENV += VPXHACK="-fno-integrated-as"
.endif
d46 5
@


1.257
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.256 2014/07/24 18:31:03 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.0
d14 1
a14 1
SO_VERSION =	49.0
@


1.256
log
@Darn, forgot to bump shlib major in previous...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.255 2014/07/24 18:03:00 landry Exp $
d66 1
a66 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/mozilla-firefox.1 \
d72 1
a72 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/all-openbsd.js \
d76 1
a76 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
@


1.255
log
@Update to firefox 31.0.

- See https://www.mozilla.org/en-US/firefox/31.0/releasenotes/
- Fixes MFSA 2014-56->66
- rm/add aboutcerterror/aboutCertError.xhtml patch, corresponding code
  moved - i'm still pondering why we keep that patch..
- remove patch-browser_branding_official_Makefile_in, merged (#992613)
- remove chunk 1 of patch-configure_in, merged (#991686)
- improve skia/i386/sse3 patches from #1028827, for something simpler and
  closer to what will be commited upstream
- fix README to point users to gstreamer1-plugins-libav instead of
  gstreamer-ffmpeg, reminded by jturner@@ a while ago

ok sthen@@ jasper@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.254 2014/06/26 13:40:59 sthen Exp $
d14 1
a14 1
SO_VERSION =	48.0
@


1.254
log
@Work around Firefox build failure on i386 occurring since skia was updated
in 30.0, see https://bugzilla.mozilla.org/show_bug.cgi?id=1028827.

Remove some "if build machine has SSE2/SSSE3 then don't bother with cpuid
feature checks at runtime" pieces.

ok jasper@@ (landry is away for a few days).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.253 2014/06/14 13:03:31 landry Exp $
d8 1
a8 2
MOZILLA_VERSION =	30.0
REVISION =		0
@


1.253
log
@Update to firefox 30.0.

- See http://www.mozilla.org/en-US/firefox/30.0/releasenotes/
- Fixes MFSA 2014-48->54
- Switch to use gstreamer 1.0 by default
- Add a bunch of patches from #992613, #991613, #1012447 to build
  properly with gtk3
- Note that this fixes runtime on ppc which was broken since 29 (see
  #961488), which was quite a hairy one
- Still running fine on sparc64 !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.252 2014/05/10 05:50:56 landry Exp $
d9 1
@


1.252
log
@Bugfix update to firefox 29.0.1.

- see http://www.mozilla.org/en-US/firefox/29.0.1/releasenotes/
- mostly fixes two annoying bugs with broken session restore (#1001167),
  pdf.js printing (#1003707), and disables seer for causing some
slow shutdowns (#1005958).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.251 2014/04/29 21:26:43 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	29.0.1
d14 1
a14 1
SO_VERSION =	47.0
d53 1
a53 1
CONFIGURE_ARGS +=	--enable-gstreamer
d60 2
a61 3

BUILD_DEPENDS +=	multimedia/gstreamer-0.10/plugins-base
RUN_DEPENDS +=	multimedia/gstreamer-0.10/plugins-good
@


1.251
log
@Update to firefox 29.0, with the brand new Australis UI.

- See http://www.mozilla.org/en-US/firefox/29.0/releasenotes/
- Fixes MFSA 2014-34->47
- add spellchecker.dictionary_path as a default pref in all-openbsd.js,
pointing to ${LOCALBASE}/share/mozilla-dicts/ so that it looks for
systemwide dictionaries.
- Remove now useless patch-extensions_spellcheck_hunspell_src_mozHunspell_cpp
- Add patch for #990196, tries to use INSTALL_SCRIPT during build which
  badly fails as user.

Note that starting with Fx 29, the sync protocol v1.1 used by
www/mozilla-sync still works but is not advertised anymore, and will be
phased out by v1.5 in Fx 31. www/mozilla-sync port will be updated in the
meantime, but users will have to reconfigure all their instances...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2014/04/22 11:38:33 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	29.0
@


1.250
log
@-fno-integrated-as breaks non-clang platforms, apply it only on amd64
via an environment variable hack.

from/with sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2014/04/22 08:43:28 ajacoutot Exp $
d8 1
a8 1
MOZILLA_VERSION =	28.0
a11 1
REVISION =		0
d14 1
a14 1
SO_VERSION =	46.0
d35 1
a35 2

# fix for 982693, apply only on clang archs
d73 2
a74 2
	${INSTALL_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/browser/defaults/preferences/
@


1.249
log
@Drop the gssapi patch. It will come back in the next official FF release
but better fail soon so that people realise support is gone.

discussed with landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2014/03/24 21:11:37 landry Exp $
d36 5
@


1.248
log
@Update to firefox 28.0.

- See http://www.mozilla.org/en-US/firefox/28.0/releasenotes/
- Fixes MFSA 2014-15->32
- add an all-openbsd.js file to modify default preferences instead of
  patching browser/app/profile/firefox.js like pigs. Install it in
browser/defaults/preferences/ so that it is effective by default for
newer profiles. Currently, we only use it to disable safebrowsing
feature..
- remove libffi patches, were merged upstream in #928390 and #928381
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2014/03/10 20:53:29 landry Exp $
d12 1
@


1.247
log
@Update to firefox 27.0.1.

- See http://www.mozilla.org/en-US/firefox/27.0.1/releasenotes/
- Fixes MFSA 2014-01->13
- remove GStreamerLoader.cpp patch, merged in 927898 (or now useless)
- remove patch-gfx_layers_BufferUnrotate_cpp, merged in 929439
- remove patch-ipc_chromium_src_base_debug_util_posix_cc, merged
in 927810 (was p_psflags change in base)

Note: firefox 28 is due in ~10 days, but is depending on a SQLite
update in base, currently being worked on.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2014/01/21 21:51:35 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	27.0.1
d14 1
a14 1
SO_VERSION =	45.0
d67 4
@


1.246
log
@Add a patch from Eric Radman (many thanks!) to properly load all the
depending libs of libgssapi before loading the latter - fixes
kerberos/gssapi authentication for him. To be massaged for integration
upstream in https://bugzilla.mozilla.org/show_bug.cgi?id=648730
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.245 2013/12/26 20:00:34 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	26.0
a11 1
REVISION =	1
d13 1
a13 1
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build2/source/
@


1.245
log
@Set StartupNotify=true in desktop files for nicer startup integration.
From ajacoutot@@, thx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2013/12/12 19:53:19 landry Exp $
d12 1
a12 1
REVISION =	0
@


1.244
log
@Update to firefox 26.0.

- see http://www.mozilla.org/en-US/firefox/26.0/releasenotes/
- fixes MFSA 2013-104 -> 117
- remove now useless sydney_audio_sndio.c file, nothing uses it anymore
- remove patch-ipc_chromium_src_base_dir_reader_bsd_h-from (#909005),
  the getdents() patch has been merged upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.243 2013/11/04 21:15:42 landry Exp $
d12 1
@


1.243
log
@Use MOZILLA_VER consistentely in PLIST, since it equals _VERSION on
releases and is the shortened version (ie s/b.//) for betas..
Prodded by a diff from jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2013/11/03 11:30:09 sthen Exp $
d8 1
a8 1
MOZILLA_VERSION =	25.0
d14 1
a14 1
SO_VERSION =	44.0
a39 1
WANTLIB +=	kvm
d46 3
a58 6

# needs 3.0.10 when not using gcc
# CONFIGURE_ARGS += --with-system-ffi

# --with-system-png=${LOCALBASE}
# no system png : apng support not bundled in
@


1.242
log
@move seamonkey/firefox to gcc on i386, it triggers a compiler segfault in
clang 3.3 (X86 DAG->DAG Instruction Selection)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2013/10/31 19:47:10 landry Exp $
d81 1
a81 5
	ln ${PREFIX}/lib/firefox-${MOZILLA_VERSION:C/b.//}/browser/chrome/icons/default/default{48,}.png

	# cleanup useless dirs from #798450 (fx 18?)
#	rm -Rf ${PREFIX}/lib/firefox-${MOZILLA_VERSION:C/b.//}/modules

@


1.241
log
@Add gst-plugins-base to BDEP, even if it doesnt link with it anymore
configure still checks for its presence at build time as noticed by
naddy@@..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2013/10/31 07:58:25 landry Exp $
d31 1
a31 1
MODGCC4_ARCHS =		powerpc sparc64 alpha
d33 1
a33 1
MODCLANG_ARCHS =	amd64 i386
@


1.240
log
@Update to firefox 25.0.

- see http://www.mozilla.org/en-US/firefox/25.0/releasenotes/
- fixes MFSA 2013-93 -> 102
- remove USE_GROFF (from naddy@@)
- remove LDEP on gst-plugins-base, gst is dlopened at runtime now, and
  there's a RDEP on gst-plugins-good anyway.
- add patch from #927898 to fix gst runtime dlopening (reminded by dcoppa@@)
- add comment about ipc patches from #927810 & #909005
- remove 3 useless patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2013/09/25 23:39:54 sthen Exp $
d55 1
@


1.239
log
@handle p_flags split in kinfo_proc to unbreak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2013/09/25 16:53:53 sthen Exp $
d8 1
a8 2
MOZILLA_VERSION =	24.0
REVISION =		0
d13 2
a14 2
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
SO_VERSION =	43.0
a35 1
USE_GROFF =	Yes
a47 1
LIB_DEPENDS +=	multimedia/gstreamer-0.10/plugins-base
d49 5
a53 2
WANTLIB += gmodule-2.0 gstapp-0.10 gstbase-0.10 gstreamer-0.10
WANTLIB += gstvideo-0.10 xml2
@


1.238
log
@these are currently BROKEN (sysctl changes), mark them as such to save time
in builds, jasper@@ agrees
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.237 2013/09/19 13:19:16 landry Exp $

BROKEN = sysctl changes
d9 1
@


1.237
log
@Update to firefox 24.0.

- see http://www.mozilla.org/en-US/firefox/24.0/releasenotes/
- fixes MFSA 2013-76 -> 92
- remove BROKEN-sparc64, it now works thanks the awesome work of
  martin@@netbsd.org in bugs #871101 & #871555 among others i forgot
- add sparc64 & alpha (insane!) to MODGCC4_ARCHS
- remove patch-gfx_thebes_gfxPlatform_cpp, was merged upstream in
  #722975 (and we dont build with system cairo anyway now)
- remove useless patch-parser_html_Makefile_in, maybe it made sense in
  the gcc 3 / ffx 3.6 days but those are over...

(note: a spellchecker issue since fx 23 is known, and might be fixed
later on)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.236 2013/08/15 10:42:51 sthen Exp $
@


1.236
log
@fix firefox/seamonkey build on post-flag-day -current:

- use getdents(2) now that we have it; previously OpenBSD was special-cased
to use getdirentries(2) instead.

- interim fix: declare getdents() to allow firefox/seamonkey to build on
-current until consensus has been reached on return types/adding to system
headers.

discussed with landry@@, clues from guenther@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2013/08/08 06:57:11 landry Exp $
a3 1
BROKEN-sparc64 =	https://bugzilla.mozilla.org/show_bug.cgi?id=577056
d8 1
a8 2
MOZILLA_VERSION =	23.0
REVISION =		0
d14 1
a14 1
SO_VERSION =	42.0
d31 1
a31 1
MODGCC4_ARCHS =		powerpc
a46 4

# XXX remove in 24
CONFIGURE_ENV+=	TERM=xterm
MAKE_ENV+=	TERM=xterm
@


1.235
log
@Update to firefox 23.0.

- http://www.mozilla.org/en-US/firefox/23.0/releasenotes/
- fixes MFSA 2013-63->75
- also use --disable-debug-symbols on powerpc otherwise linking fails..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2013/06/26 19:29:13 landry Exp $
d10 1
@


1.234
log
@Update to firefox 22.0.

- see http://www.mozilla.org/en-US/firefox/22.0/releasenotes/ (ok,
  webrtc isnt enabled yet by default on *BSD but we're working on it :)
- fixes MFSA 2013-49->62
- remove all patches related to sydneyaudio which got removed upstream,
  sound uses libcubeb which has a native sndio backend since ages (thx
to ratchov!). also remove related post-patch target while here.
- add temporary workaround (TERM=xterm) for bug #878089
- switch i386 to use clang again, using --disable-debug-symbols to make
  the code smaller (who said 'gross hack' ?)
- update patch-gfx_thebes_gfxPlatform_cpp to match what got commited
  upstream in r52b02042b27f
- remove patch-js_src_vm_SPSProfiler_cpp which unbroke powerpc, finally
  got commited in 22 branch
- rework fx-i18n's MESSAGE to be more in line with reality (discussed
  with Marcus Merighi)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2013/06/20 06:54:38 ajacoutot Exp $
d9 1
a9 1
MOZILLA_VERSION =	22.0
d15 1
a15 1
SO_VERSION =	41.0
d44 2
a45 2
# to be able to link when building with clang on i386
.if ${MACHINE_ARCH} == "i386"
@


1.234.2.1
log
@browsers have become a major security issue, so bring firefox up to date in -stable by
bumping it to 24.1.0esr and sync language packs.

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2013/06/26 19:29:13 landry Exp $
d4 1
d9 2
a10 2
MOZILLA_VERSION =	24.1.0esr
MOZILLA_BRANCH =	esr24
a13 2
PKGNAME =		firefox-${MOZILLA_VER}

d15 1
a15 1
SO_VERSION =	42.0
d32 1
a32 1
MODGCC4_ARCHS =		powerpc sparc64 alpha
d49 4
d84 1
a84 1
	ln ${PREFIX}/lib/firefox-${MOZILLA_VER}/browser/chrome/icons/default/default{48,}.png
@


1.234.2.2
log
@update to mozilla-firefox 24.1.1esr which includes fixes for MFSA2013-103

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234.2.1 2013/11/14 09:57:07 jasper Exp $
d8 1
a8 1
MOZILLA_VERSION =	24.1.1esr
@


1.234.2.3
log
@- update to firefox-24.2.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234.2.2 2013/12/01 22:06:19 jasper Exp $
d8 1
a8 1
MOZILLA_VERSION =	24.2.0esr
@


1.234.2.4
log
@update to firefox-esr 24.3.0

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234.2.3 2013/12/15 13:52:17 jasper Exp $
d8 1
a8 1
MOZILLA_VERSION =	24.3.0esr
@


1.234.2.5
log
@security update to firefox-24.4.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234.2.4 2014/02/05 08:07:24 jasper Exp $
d8 1
a8 1
MOZILLA_VERSION =	24.4.0esr
@


1.233
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2013/06/17 19:29:05 ajacoutot Exp $
d9 1
a9 1
MOZILLA_VERSION =	21.0
a12 1
REVISION =		1
d15 1
a15 1
SO_VERSION =	40.0
d18 1
a18 2
MOZILLA_LIBS =	browsercomps mozalloc mozgnome \
		xpcom xul
d32 1
a32 1
MODGCC4_ARCHS =		i386 powerpc
d34 1
a34 1
MODCLANG_ARCHS =	amd64
d44 9
a67 5

# add method appeared in 18
post-patch:
	echo "UNSUPPORTED(int sa_stream_set_stream_type(sa_stream_t *s,  const sa_stream_type_t stream_type))" \
		>> ${WRKSRC}/${_MOZDIR}/media/libsydneyaudio/src/sydney_audio_sndio.c
@


1.232
log
@Unbreak Mozilla ports after the Heimdal update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2013/05/30 14:17:32 landry Exp $
d13 1
a13 1
REVISION =		0
@


1.231
log
@Update to firefox 21.0.

- See http://www.mozilla.org/en-US/firefox/21.0/releasenotes/
- Fixes MFSA 2013-41->48
- switch back again to use gcc 4.6 on i386, ld hits the memory exhausted
  wall again with objects built with clang. doh.
- stuff shuffled around in PLIST

*BIG SCARY WARNING FOR PRIVACY-CONCERNED USERS*
Firefox 21 starts implementing something called 'Firefox Health Report',
which sends _anonymized_ data to mozilla servers about Firefox
performance.
This is opt-out - users will be prompted at first start if they want to
keep it enabled. This is not turned as an opt-in knob in the port on
purpose, because i got no feedback on this, and that will allow upstream
to know they have some OpenBSD users. This is of course subject to change.

See https://blog.mozilla.org/futurereleases/2013/05/14/firefox-heal-thyself/
& about:healthreport for more info about this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2013/04/06 14:44:52 landry Exp $
d13 1
@


1.230
log
@Update to firefox 20.0.

- See http://www.mozilla.org/en-US/firefox/20.0/releasenotes/
- Fixes MFSA 2013-30->40
- switch back to use clang on i386, now that llvm got fixed there
- backport libffi i386 fix (TODO: switch to systemwide libffi if possible)
- add nicer fix to avoid installing the sdk lib/headers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2013/03/11 11:44:43 espie Exp $
d9 1
a9 1
MOZILLA_VERSION =	20.0
d15 1
a15 1
SO_VERSION =	39.0
d33 1
a33 1
MODGCC4_ARCHS =		powerpc
d35 1
a35 1
MODCLANG_ARCHS =	amd64 i386
d53 3
d77 1
a77 1
	${INSTALL_DATA} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/icons/mozicon128.png \
d81 1
a81 1
	ln ${PREFIX}/lib/firefox-${MOZILLA_VERSION:C/b.//}/chrome/icons/default/default{48,}.png
d84 1
a84 1
	rm -Rf ${PREFIX}/lib/firefox-${MOZILLA_VERSION:C/b.//}/modules
@


1.229
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2013/03/07 23:51:49 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	19.0.2
d15 1
a15 1
SO_VERSION =	38.0
d33 1
a33 1
MODGCC4_ARCHS =		i386 powerpc
d35 1
a35 1
MODCLANG_ARCHS =	amd64
@


1.228
log
@Security update to firefox 19.0.2.

Fixes MFSA-2013-29 / CVE-2013-0787 / bug #848644 (vupen @@ pwn2own)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2013/03/03 17:34:15 landry Exp $
a24 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d40 1
a40 1
NO_REGRESS =	Yes
@


1.227
log
@Update to firefox 19.0.1.

- see http://www.mozilla.org/en-US/firefox/19.0/releasenotes/
- fixes MFSA 2013-21->28
- provides a builtin pdf viewer (pdf.js)
- remove patch-toolkit_system_gnome_nsGIOService_cpp (#805202), firefox
  now properly links with gio instead of dlopening it
- remove patch-toolkit_xre_nsXREDirProvider_cpp and
  patch-xpcom_io_nsAppFileLocationProvider_cpp, merged upstream (#803955)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2013/02/07 19:13:49 ajacoutot Exp $
d9 1
a9 1
MOZILLA_VERSION =	19.0.1
@


1.226
log
@MODGCC4_VERSION default to 4.6 now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2013/02/07 18:54:27 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	18.0.2
a12 1
REVISION =	0
d15 1
a15 1
SO_VERSION =	37.0
@


1.225
log
@Remove the paragraph about enabling ECC cipher suites, they've been
enabled by default since a while. Prodded by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2013/02/06 22:44:47 landry Exp $
a36 1
MODGCC4_VERSION =	4.6
@


1.224
log
@Bugfix update to firefox 18.0.2, fixing 'JavaScript related stability
issues' for a well known social network site (bug #831626).

While here remove patch for #830303, commited upstream just after 18.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2013/01/22 23:59:22 sthen Exp $
d13 1
@


1.223
log
@Build Seamonkey and Firefox with gcc on i386 due to segfaults with the
CLang build (seems to be connected with opening pages using JavaScript).
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2013/01/19 23:50:16 landry Exp $
d9 1
a9 2
MOZILLA_VERSION =	18.0.1
REVISION =		0
@


1.222
log
@Bugfix update to firefox 18.0.1.

http://www.mozilla.org/en-US/firefox/18.0.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2013/01/14 13:52:59 landry Exp $
d10 1
d38 1
a38 1
MODGCC4_ARCHS =		powerpc
d40 1
a40 1
MODCLANG_ARCHS =	i386 amd64
@


1.221
log
@Fix external plugin spawning (bug #830303), reported by nigel@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2013/01/11 22:57:14 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	18.0
a12 1
REVISION =	0
@


1.220
log
@Update to firefox 18.0 :

- see http://www.mozilla.org/en-US/firefox/18.0/releasenotes/
- fixes MFSA 2013-14 -> 20
- build with clang on i386/amd64 and with gcc 4.6 on powerpc. Required
  since upstream dropped support for gcc < 4.4.
- don't build against systemwide jpeg anymore since it now needs its
  internal libjpeg-turbo.
- add a stub method to sydney_audio_sndio.c in post-patch. Cant add it
  to the file in cvs directly otherwise it breaks other mozillas
- remove patch-ipc_chromium_src_base_atomicops_h, not needed anymore
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2012/12/04 21:24:33 landry Exp $
d13 1
@


1.219
log
@Bugfix update to firefox 17.0.1.

- Fixes bug #814101 - Font Issue
- Reverted user agent change (was bug #588909) causing some website
  incompatibilities, see #815743
- Readd the --with-system-jpeg locally (to remove in 18), and remove all the
  configure_env/args/build_depends stuff that moved to moz.port.mk.
- add @@pkgpath/@@conflict markers to update www/firefox35 users to the
  latest and greatest !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2012/11/24 10:21:50 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	17.0.1
d15 1
a15 1
SO_VERSION =	36.0
d34 8
d47 1
a47 3
# to remove in 18
CONFIGURE_ARGS +=	--with-system-jpeg=${LOCALBASE}
WANTLIB +=	jpeg
d61 5
@


1.218
log
@Update to firefox 17.0.

- see http://www.mozilla.org/en-US/firefox/17.0/releasenotes/ for details
- enable the gio/libnotify interaction, since it brings no additional
  dep. libnotify will be dlopened at runtime if present, and gio is
already in the dependency chain. The latter will interact with the gio mime
database for file associations, and firefox will ask the user if he
wants to register it as the default http:// handler. The former will
show a notify popup upon download completion, among others.
- add build depends on yasm in i386/amd64 for webm
- remove patch-browser_app_profile_firefox_js, the updater is already disabled
- remove gstreamer patches from #776838, #777696 & #747257, merged upstream
- remove ipc_message_utils.h patch from #775428, commited upstream
- remove mozalloc.cpp patch, <sys/types.h> is already included above
- remove xpcshell hang patchset from #706955, cant reproduce anymore
- remove patch-security_manager_ssl_src_Makefile_in, unneeded
- remove OS.File extra logging from #785200, merged upstream
- add patch-toolkit_system_gnome_nsGIOService_cpp, workaround for
  #805202 (libgio-2.0.so dlopening), to be removed in fx 19
- remove xpcom arm patch from #783875, merged upstream

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2012/11/12 20:45:32 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	17.0
a36 1
SEPARATE_BUILD =	Yes
d39 3
a41 5
CONFIGURE_ARGS +=	--enable-official-branding
CONFIGURE_ARGS +=	--with-system-libevent=/usr/ --disable-gconf
CONFIGURE_ARGS +=	--enable-gio
CONFIGURE_ARGS +=	--with-system-bz2=${LOCALBASE}
WANTLIB +=	event
a50 20
.if ${MACHINE_ARCH:Msparc64}
CONFIGURE_ARGS +=	--disable-tracejit --disable-methodjit
.endif

# XXX needed since 15.0b5, relocation overflow otherwise...
# replaces -g by -Os
.if ${MACHINE_ARCH} == "powerpc"
CONFIGURE_ENV +=	MOZ_DEBUG_FLAGS="-Os"
.endif

# needed for webm
.if ${MACHINE_ARCH:Mi386} || ${MACHINE_ARCH:Mamd64}
BUILD_DEPENDS +=	devel/yasm
.endif

# needed during make install
BUILD_DEPENDS +=	archivers/unzip

# ensure we depend on cairo with tee backend enabled
LIB_DEPENDS +=	graphics/cairo>=1.10.2p0
@


1.217
log
@Bump all ports depending on nspr to account for the devel/nspr,-main ->
devel/nspr pkgpath change. While here, make sure mozilla ports depend on
the latest and greatest via mozilla.port.mk.
Tested in a bulk build..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2012/10/27 08:11:00 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	16.0.2
a12 1
REVISION =	0
d14 2
a15 1
SO_VERSION =	35.0
d18 1
a18 1
MOZILLA_LIBS =	browsercomps mozalloc \
d42 2
a43 1
CONFIGURE_ARGS +=	--with-system-zlib=/usr/ --with-system-bz2=${LOCALBASE}
d64 5
d96 2
a97 2
	# cleanup useless dirs from #717616
	rm -Rf ${PREFIX}/lib/firefox-${MOZILLA_VERSION:C/b.//}/js{sub,}loader
@


1.216
log
@SECURITY update to firefox 16.0.2.

Fixes MFSA2012-90.
http://www.mozilla.org/security/announce/2012/mfsa2012-90.html
Tb & seamonkey will follow soon..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2012/10/17 19:43:24 landry Exp $
d13 1
@


1.215
log
@Remove extra verbose logging from OS.File, confuses people. (#785200)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2012/10/11 18:37:23 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	16.0.1
a12 1
REVISION =	0
@


1.214
log
@SECURITY update to firefox 16.0.1.

See https://blog.mozilla.org/security/2012/10/10/security-vulnerability-in-firefox-16/
and http://arstechnica.com/security/2012/10/firefox-16-vulnerability-attack-code-available-online/
for more details on the issue affecting only 16.0.
Bug #720619 (still sg-only)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2012/10/10 20:56:13 landry Exp $
d13 1
@


1.213
log
@Update to firefox 16.0.

- see http://www.mozilla.org/en-US/firefox/16.0/releasenotes/ for details
- install an icon into share/pixmaps to fix desktop file icon path
- garbage collect patch-browser_installer_Makefile_in, and
  patch-browser_installer_package-manifest_in, were from upstream
- remove patch-build_unix_mozilla_in, useless since bin/firefox is not a
  script anymore since a while
- remove patch-build_unix_run-mozilla_sh, firefox can be directly
  debugged in gdb now. update README accordingly
- remove patch-config_autoconf_mk_in, XCFLAGS are already passed
- update patch-content_media_gstreamer_nsGStreamerReader_cpp to fix
  gstreamer on BE archs (#777696)
- update patch-extensions_spellcheck_hunspell_src_mozHunspell_cpp after
  nsILocalFile api removal
- remove useless patch-gfx_thebes_Makefile_in pangox patch
- fix PLIST to use proper MOZILLA_VERSION instead of beta MOZILLA_VER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2012/10/06 07:55:55 ajacoutot Exp $
d9 1
a9 1
MOZILLA_VERSION =	16.0
@


1.212
log
@Extend the desktop file: add a couple of mime types (x-scheme-handler)
so that the mozilla browsers are properly recognized in the "default
browser" specification.

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2012/09/22 10:30:17 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	15.0.1
a12 1
REVISION =		2
d14 1
a14 1
SO_VERSION =	34.0
a70 1
MOZILLA_SUBST_FILES +=		config/autoconf.mk.in services/crypto/modules/WeaveCrypto.js
d81 4
@


1.211
log
@Remove useless dependency on deprecated pangox.

- remove useless patch to gfx/thebes/Makefile.in adding -lpangox-1.0 to
EXTRA_DSO_LDOPTS, this was maybe useful before ffx 3.0, but mozilla
stopped using pangox between 2.0 and 3.0. See for the last traces of
pangox.h use : https://bugzilla.mozilla.org/show_bug.cgi?id=528941. See
also bugs #323671/#338446
- backport the patch from #528941 to remove useless pangox.h inclusion
from www/firefox35.
- remove the RUN_DEPENDS on pangox-compat
- bump all corresponding REVISIONS
- while here, make sure all moz ports depend on latest nspr 4.9.2 since
  it'll be a requirement for upcoming gecko 16 releases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2012/09/21 13:21:44 ajacoutot Exp $
d13 1
a13 1
REVISION =		1
@


1.210
log
@Fix after pangox removal from devel/pango.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2012/09/09 19:50:31 landry Exp $
d13 1
a13 1
REVISION =		0
a51 3

# EXTRA_DSO_LDOPTS += -lpangox-1.0
RUN_DEPENDS +=		devel/pangox-compat
@


1.209
log
@Bugfix update to firefox 15.0.1.

Fixes a regression in private browsing mode, see
https://bugzilla.mozilla.org/show_bug.cgi?id=787743.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2012/09/06 12:38:35 ajacoutot Exp $
d13 1
d52 3
@


1.208
log
@Bump after gstreamer-plugins-base subpackaging change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2012/09/03 15:33:40 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	15.0
a12 1
REVISION =		1
@


1.207
log
@Bump REVISION, since it seems ppl have decided to be picky today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2012/09/01 13:56:45 landry Exp $
d13 1
a13 1
REVISION =	0
@


1.206
log
@Update to firefox 15.0.

- see http://www.mozilla.org/en-US/firefox/15.0/releasenotes/
- add -Os hack to fix a relocation error when linking on ppc (as was
  done in tb since 10..)
- garbage collect nsSound.cpp, the original one uses libcanberra
  properly and thus sndio.
- remove patch from #750620, merged upstream (mfbt/double-conversion)
- remove patches from #747257, merged upstream (gstreamer fix)
- remove patches from #691898, merged upstream (yarr jit ppc)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2012/08/07 16:16:52 landry Exp $
d13 1
@


1.205
log
@Sync firefox(1) with firefox -h.. fix a bunch of lies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2012/08/07 08:55:40 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	14.0.1
a12 1
REVISION =	0
d14 1
a14 1
SO_VERSION =	33.0
d54 6
@


1.204
log
@Update to firefox 14.0.1.

- see http://www.mozilla.org/en-US/firefox/14.0.1/releasenotes/
- enable H.264 video support through gstreamer. Mention that one needs to
  manually install gstreamer-ffmpeg. Not all videos/sites will work.
- backport cset from #776838 & #747257 for various gst fixes.
- backport cset from #750620 to fix ppc (and other exotic archs) build.
- backport cset from #752895 to fix packaging issues.
- remove patch-content_xslt_src_base_txDouble_cpp, useless since mozilla
  switched to mfbt/double-conversion.
- remove nss opening hack in Sync, it works fine without it.
- remove the -rpath hack, not needed since matthew's ld.so fix from 12/06
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2012/08/04 15:01:50 ajacoutot Exp $
d13 1
@


1.203
log
@There is no more gtk+2-cups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2012/06/16 10:21:58 landry Exp $
d9 1
a9 2
MOZILLA_VERSION =	13.0.1
REVISION =		0
d14 1
a14 1
SO_VERSION =	32.0
d44 8
d60 1
a60 1
LIB_DEPENDS =	graphics/cairo>=1.10.2p0
@


1.202
log
@Bugfix update to firefox 13.0.1.
See http://www.mozilla.org/en-US/firefox/13.0.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2012/06/11 15:29:56 landry Exp $
d10 1
@


1.201
log
@Update to firefox 13.0.

See https://www.mozilla.org/en-US/firefox/13.0/releasenotes/ for details
- set SEPARATE_BUILD (workarounds #736961)
- cleanup useless dirs (from #717616)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2012/04/30 15:28:42 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	13.0
@


1.200
log
@Update to firefox 12.0.

- see http://www.mozilla.org/en-US/firefox/12.0/releasenotes/ for details
- two patches moved (patch-widget_src_xpwidgets_nsPrintSettingsImpl_cpp
  and patch-widget_src_gtk2_Makefile_in)
- add two new patches for bug #691898 (patch-js_src_jsapi_cpp and
  /patch-js_src_jsprvtd_h)
- add patch-gfx_thebes_gfxPlatform_cpp to workaround regression
  introduced in bug #715658, which prevents one from building against
systemwide cairo.
- patch-extensions_auth_nsAuthGSSAPI_cpp from bug #667325 got merged
- patch-js_src_js-config_h_in and patch-js_src_jscpucfg_h from #714312 got
  merged
- patch-ipc_chromium_src_base_dir_reader_posix_ -from #714315 got merged
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2012/04/23 17:15:19 espie Exp $
d9 1
a9 1
MOZILLA_VERSION =	12.0
d14 1
a14 1
SO_VERSION =	31.0
d36 1
d71 4
@


1.199
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2012/03/16 21:31:24 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	11.0
a12 1
REVISION =		0
d14 1
a14 1
SO_VERSION =	30.0
@


1.198
log
@Update to firefox 11.0.
- Fixes MFSA 2012-12->19
- see http://www.mozilla.org/en-US/firefox/11.0/releasenotes/
- complete patchset for #691898, still fixes build on ppc (and hopefully
  commited in firefox 14...)
- add patchset from #706955, workarounds #669050 (xpcshell hangs during
  make install and chokes on CSPUtils.csm, threads related..)
- remove obsolete/commited patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2012/03/08 12:13:01 ajacoutot Exp $
d13 1
@


1.197
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2012/02/20 20:15:04 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	10.0.2
d14 1
a14 3
REVISION =	0

SO_VERSION =	29.0
@


1.196
log
@Update to firefox-10.0.2.

- Fixes MFSA-2012-01..11
- remove patch-gfx_qcms_qcmstypes_h & patch-toolkit_xre_glxtest_cpp,
  were commited upstream (bugs #651444 & #687320)
- remove patch-js_src_xpconnect_src_Makefile_in, dom_quickstubs.cpp hack
  was apparently only needed with gcc3
- remove patch-xpcom_base_nsStackWalk_cpp, codepath not reached/solaris
  only.
- add https://bug691898.bugzilla.mozilla.org/attachment.cgi?id=588391 to
  use yarr interpreter on ppc, bug #691898 still being worked on
- backport https://hg.mozilla.org/mozilla-central/rev/9cfdb612a026, fixes
endianess detection on BSDs using machine/endian.h (bug #714312)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2012/01/11 02:42:48 nigel Exp $
d13 2
@


1.195
log
@Update firefox to 9.0.1
Change from mpi@@ for macppc

Ok landry@@ stsp@@ mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2011/12/08 00:33:36 nigel Exp $
d9 1
a9 1
MOZILLA_VERSION =	9.0.1
d14 1
a14 3
# url for beta releases
# MASTER_SITES=  ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/releases/${MOZILLA_VERSION}/source/
SO_VERSION =	28.0
a56 2

SUBST_VARS +=	NSS_SO_VERSION
@


1.194
log
@Update for Firefox v7.0.1 to v8.0.1 sent to ports@@ for review.
patches from mpi@@ added for macppc.

Ok mpi@@, dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2011/10/28 13:01:13 robert Exp $
d9 1
a9 1
MOZILLA_VERSION =	8.0.1
d16 1
a16 1
SO_VERSION =	27.0
d60 1
a60 1
SUBST_VARS +=	MOZILLA_VERSION NSS_SO_VERSION
@


1.193
log
@unbreak after nspr update and enable vswprintf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2011/10/03 21:06:09 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	7.0.1
a13 2
REVISION = 0

d16 1
a16 1
SO_VERSION =	26.0
@


1.192
log
@Update to firefox 7.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2011/09/16 12:00:07 espie Exp $
d13 2
@


1.191
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2011/09/06 19:41:59 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	6.0.2
a12 1
REVISION=	0
d16 1
a16 1
SO_VERSION =	25.0
d73 1
a73 1
	ln ${PREFIX}/lib/firefox-${MOZILLA_VERSION}/chrome/icons/default/default{48,}.png
@


1.190
log
@Security update to firefox 6.0.2.
While here, rewrite DESCR (prompted by a mail from J. Scott Heppler)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2011/08/24 06:19:51 landry Exp $
d13 1
@


1.189
log
@s/_MOZ_PROJECT_SHORT/MOZILLA_PROJECT/ when installing desktop file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2011/08/23 20:14:52 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	6.0
a15 1

@


1.188
log
@Update to firefox 6.0.

See http://www.mozilla.com/en-US/firefox/6.0/releasenotes/.
Remove patches merged upstream (#648721, #651461, #643122, #634609 and
maybe others).
ok rpointel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2011/07/28 08:12:50 landry Exp $
d70 2
a71 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${_MOZ_PROJECT_SHORT}.desktop \
		${PREFIX}/share/applications/${_MOZ_PROJECT_SHORT}.desktop
@


1.187
log
@Security fix for CVE-2011-2691 backported from png 1.4.8, from naddy@@.

See https://bugzilla.mozilla.org/show_bug.cgi?id=669863 for details.

firefox35, firefox36 and sunbird use png 1.2.35 and will need other fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2011/07/26 19:44:32 sthen Exp $
d9 1
a9 1
MOZILLA_VERSION =	5.0
a12 1
REVISION =	3
d14 4
a17 2
SO_VERSION =	24.0
NSS_SO_VERSION =	27.0
d42 1
a42 1
CONFIGURE_ARGS +=	--with-system-libevent=/usr/
@


1.186
log
@Add an @@pkgpath on www/firefox4. This package path never existed in the
ports tree but was used in some early packages mentioned on ports@@ and
several testers have reported not being able to update firefox automatically
so this helps them out.  ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2011/07/08 11:07:32 landry Exp $
d13 1
a13 1
REVISION =	2
@


1.185
log
@Rename mozilla-{firefox,thunderbird} packages to {firefox,thunderbird}.
Apparently required by many at c2k11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2011/06/28 15:53:38 landry Exp $
d13 1
a13 1
REVISION =	1
@


1.184
log
@Talk about Firefox 5 in DESCR, reported by John Taylor (thanks!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2011/06/28 11:57:39 landry Exp $
d11 1
a11 1
MOZILLA_PROJECT =	mozilla-firefox
d13 1
a13 1
REVISION =	0
@


1.183
log
@Add archivers/unzip to BUILD_DEPENDS, reported by Mark Patruck (thanks!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2011/06/28 05:43:57 landry Exp $
d13 1
@


1.182
log
@Update to mozilla-firefox 5.0:

That's the first release following the new fast scheme of one major
release every 6 weeks..
Check out http://www.mozilla.com/en-US/firefox/5.0/releasenotes/ for
release notes. Note that it's still badly broken on sparc64, and
unlikely to be fixed soon... you still have www/firefox36.

Tested by (at least, probably forgetting some..) rpointel@@, pea@@,
ckuethe@@ and myself on amd64, bluhm@@ on i386 and ajacoutot@@ on macppc
(thanks!)
ok rpointel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2011/06/19 21:48:46 landry Exp $
d47 3
@


1.181
log
@Bump REVISION after spring cleanup in patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2011/06/08 18:15:29 rpointel Exp $
d9 2
a10 2
MOZILLA_VERSION =	4.0.1
MOZILLA_BRANCH =	2.0
a12 1
REVISION =		5
d14 1
a14 1
SO_VERSION =	23.0
d39 1
a39 1
CONFIGURE_ARGS +=	--enable-official-branding --disable-install-strip
@


1.180
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2011/06/02 13:41:41 ajacoutot Exp $
d13 1
a13 1
REVISION =		4
@


1.179
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2011/05/04 12:15:33 landry Exp $
d13 1
a13 1
REVISION =		3
@


1.178
log
@Ensure mozilla-firefox and fennec depends on the cairo lib with tee
backend enabled.
ok/discussed with dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2011/05/04 08:11:15 dcoppa Exp $
d13 1
a13 1
REVISION =	2
@


1.177
log
@Build firefox4 and fennec against systemwide cairo.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2011/04/29 07:58:10 landry Exp $
d13 1
a13 1
REVISION =	1
d49 2
@


1.176
log
@Update to mozilla-firefox 4.0.1.
Fixes MFSA 2011-12, 2011-17, 2011-18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2011/04/19 20:39:34 landry Exp $
d13 1
a13 1
REVISION =	0
@


1.175
log
@link default48.png to default.png to be used by non-icccm compliant wm
for the application icon. It seems they use the first in the icon list
passed to X, which in our case is the 16x16 one.
reported by claudio@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2011/04/05 09:00:42 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	4.0
@


1.174
log
@Add patches to let mozilla-firefox 4.0 at least build on sparc64.
- disable tracejit/methodjit
- add fix for https://bugzilla.mozilla.org/show_bug.cgi?id=618485
- add fix for https://bugzilla.mozilla.org/show_bug.cgi?id=589754
- don't force-enable assembler/jit on sparc64

It still doesn't run (endless loop at startup) due to 64-bits
jsval_layout (see https://bugzilla.mozilla.org/show_bug.cgi?id=577056)
but at least patches are in cvs, and the js shell can run simple things.
No change for other archs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2011/03/30 21:39:14 landry Exp $
d13 1
d63 1
a63 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/ ; \
d65 4
a68 1
		${PREFIX}/share/applications/${_MOZ_PROJECT_SHORT}.desktop ; \
@


1.173
log
@Lo and behold, update to mozilla-firefox 4.0 !
Too much changes to list them, just enjoy it. Thanks to the ones who
tested the betas/rc.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2011/03/24 11:41:11 landry Exp $
d43 4
@


1.172
log
@Assorted fixes for:
https://bugzilla.mozilla.org/show_bug.cgi?id=643137 (crash on sparc64
when displaying opentypes fonts, fix from tobias ulmer)
https://bugzilla.mozilla.org/show_bug.cgi?id=644012 (crash on ssl certs
with empty issuer name, pointed our by roberth at openbsd dot pap dot st
and mikolaj kucharski)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2011/03/23 15:27:04 landry Exp $
d4 1
d7 1
a7 1
# Don't forget to update devel/xulrunner/1.9 if patches changes.
d9 2
a10 2
MOZILLA_VERSION =	3.6.16
MOZILLA_BRANCH =	1.9.2
a12 1
REVISION =	0
d14 2
a15 1
SO_VERSION =	22.2
d18 2
a19 2
MOZILLA_LIBS =	browsercomps browserdirprovider imgicon mozjs \
		xpcom xul nullplugin unixprintplugin
a28 3
# needed for convert xpm icon to png
BUILD_DEPENDS +=	graphics/netpbm

d39 5
a43 1
CONFIGURE_ARGS +=	--enable-official-branding
d47 2
a48 2
MOZILLA_DATADIRS =	chrome components defaults dictionaries extensions \
			greprefs icons modules plugins res searchplugins
d50 1
a50 2
MOZILLA_AUTOCONF_DIRS +=	js/src
MOZILLA_SUBST_FILES +=		config/autoconf.mk.in
a52 1
	${INSTALL_DATA} ${FILESDIR}/browserconfig.properties ${MOB}/LICENSE ${MOB}/blocklist.xml ${MOZ}
d55 6
a60 10
	ln -f ${PREFIX}/man/man1/mozilla-firefox.1 ${PREFIX}/man/man1/firefox.1
	ln -f ${PREFIX}/bin/firefox ${PREFIX}/bin/mozilla-firefox
	ln -f ${MOZ}/firefox-bin ${MOZ}/mozilla-firefox-bin
	# create an xpm icon from the png one as nsWindow::SetWindowIconList
	# fails to load png icons : confuses the png pixbuf loader from gtk, which
	# differs from the libpng bundled in firefox
	cd ${MOZ}/chrome/icons/default/ && \
		${LOCALBASE}/bin/pngtopnm -alpha default48.png > ${WRKSRC}/alpha.pgm && \
		${LOCALBASE}/bin/pngtopnm default48.png | \
		${LOCALBASE}/bin/ppmtoxpm -alphamask=${WRKSRC}/alpha.pgm > default.xpm
@


1.171
log
@Updates to firefox35 3.5.18, mozilla-firefox 3.6.16 & seamonkey 2.0.3.
All fixing MFSA-2011-11, see
http://blog.mozilla.com/security/2011/03/22/firefox-blocking-fraudulent-certificates/ and
https://blog.torproject.org/blog/detecting-certificate-authority-compromises-and-web-browser-collusion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2011/03/22 13:18:26 landry Exp $
d12 1
@


1.170
log
@Remove the .if for system sqlite, now every port using mozilla MODULE
uses it. Bump dependency to 3.7.5 to ensure it has unlock_notify for
ffx4, and bump all corresponding REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2011/03/21 08:45:37 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.6.14
a11 1
REVISION =		1
@


1.169
log
@Add reminder comments for sunbird & xulrunner.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2011/03/10 14:34:18 dcoppa Exp $
d12 1
a12 1
REVISION =		0
@


1.168
log
@Adopt a patch that fixes a bug causing animated gifs to flicker
when using cairo 1.10.x and make mozilla-firefox and mozilla-thunderbird
build against systemwide cairo as it was with cairo 1.8.x.
Patch backported from FF4 branch by Rafal Muzylo <galtgendo@@o2.pl>

https://bugzilla.mozilla.org/show_bug.cgi?id=597174
http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/net-libs/xulrunner/files/fix-animated-gifs.patch

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2011/03/02 14:39:48 landry Exp $
d6 2
@


1.167
log
@Update to firefox 3.6.14. (Fixes MFSA-2011-01->11)
Patches for https://bugzilla.mozilla.org/show_bug.cgi?id=573039 merged
upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2011/01/28 21:38:12 landry Exp $
d10 1
@


1.166
log
@Fix an unaligned access on sparc64 leading to random crashes when
mozilla tries to read a malformed ICC profile on random image content
found on the web.
backport of http://hg.mozilla.org/mozilla-central/rev/e8207773d54d
ref: https://bugzilla.mozilla.org/show_bug.cgi?id=629057
issue reported and fix found by naddy@@
ok naddy@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2011/01/18 12:33:38 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.13
a9 1
REVISION = 		3
@


1.166.2.1
log
@SECURITY UPDATE to mozilla-firefox-3.6.16

ok jasper landry

thanks to landry for doing all the work in -current's www/firefox36,
which this was based on.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2011/01/28 21:38:12 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.16
d10 1
@


1.165
log
@Bump after LIB_DEPENDS changed, and add an empty
sa_stream_get_min_write() func to sydney_audio_sndio.c, required by
ffx4.0b9. (ofc it doesn't confuse other mozilla ports)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2011/01/14 22:49:47 landry Exp $
d10 1
a10 1
REVISION = 		2
@


1.164
log
@Add a patch doing PRAGMA secure_delete ON when opening connection to
sqlite database. Allows us to build against system sqlite3 again, and
get rid of the infamous symbol size mismatch warning reported several
times on ports@@.
See https://bugzilla.mozilla.org/show_bug.cgi?id=445164 for why mozilla
now hard-requires secure_delete, and
https://bugzilla.mozilla.org/show_bug.cgi?id=546162 for the reasons they
don't want to make that an option and forces us to do such hacks.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2010/12/26 13:16:29 stsp Exp $
d10 1
a10 1
REVISION = 		1
@


1.163
log
@Apply patch from upstream to fix the "Print" and "Print Preview" crashes.
https://bugzilla.mozilla.org/show_bug.cgi?id=573039
https://bug573039.bugzilla.mozilla.org/attachment.cgi?id=499233
suggested by and ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2010/12/10 10:53:40 landry Exp $
d10 1
a10 1
REVISION = 		0
d12 1
a12 1
SO_VERSION =	22.1
d16 1
a16 1
		sqlite3 xpcom xul nullplugin unixprintplugin
a41 2
# --enable-system-sqlite
# no system sqlite : requires SECURE_DELETE
@


1.162
log
@Update to mozilla-firefox 3.6.13:
Fixes MFSA 2010-74->84
http://www.mozilla.org/security/known-vulnerabilities/firefox36.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2010/12/01 15:00:12 dcoppa Exp $
d10 1
@


1.161
log
@Fix Kerberos/GSSAPI authentication within mozilla ports.
OpenBSD does not have gssapi_krb5. So, to avoid undefined symbol
errors, link libxul with "-lkrb5 -lcrypto".

OK phessler@@, landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2010/11/22 08:36:49 espie Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.12
a9 1
REVISION =		1
@


1.160
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2010/11/11 09:30:36 jasper Exp $
d10 1
a10 1
REVISION =		0
@


1.159
log
@- switch to pkg-readmes

ok landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2010/10/28 12:04:00 landry Exp $
d27 1
a27 1
BUILD_DEPENDS +=	::graphics/netpbm
@


1.158
log
@Security update to mozilla-firefox 3.6.12.
Fixes MFSA2010-73/CVE-2010-3765/bz #607222.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2010/10/27 12:56:28 landry Exp $
d10 1
@


1.157
log
@Add a patch so that run-mozilla.sh finds our gdb by default. Amend
README.OpenBSD to teach users how to properly report bugs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2010/10/24 21:40:10 ajacoutot Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.11
a9 2

REVISION =	0
@


1.156
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2010/10/22 19:19:17 landry Exp $
d10 2
@


1.155
log
@Update to mozilla-firefox 3.6.11, tested by various on ports@@ (thanks!)
Fixes (valid for other moz updates):
MFSA 2010-72 Insecure Diffie-Hellman key exchange
MFSA 2010-71 Unsafe library loading vulnerabilities
MFSA 2010-70 SSL wildcard certificate matching IP addresses
MFSA 2010-69 Cross-site information disclosure via modal calls
MFSA 2010-68 XSS in gopher parser when parsing hrefs
MFSA 2010-67 Dangling pointer vulnerability in LookupGetterOrSetter
MFSA 2010-66 Use-after-free error in nsBarProp
MFSA 2010-65 Buffer overflow and memory corruption using document.write
MFSA 2010-64 Miscellaneous memory safety hazards
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2010/10/19 08:02:54 espie Exp $
a32 1
USE_X11 =	Yes
@


1.154
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2010/10/18 07:15:56 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.10
a9 2

REVISION =	3
@


1.153
log
@Fix WANTLIB again after cairo's last commit where X11-xcb went away.
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2010/10/15 07:16:19 landry Exp $
d36 1
@


1.152
log
@Switch all mozilla-based ports to using the bundled cairo, mozilla doesn't
like the systemwide cairo since 1.10.x update (crashes,gifs not displaying
properly), and there's few hope it will be fixed in 1.9.2.x branch.
Fix WANTLIB while here and bump REVISIONs.
Reported by dcoppa@@, also found in upstream bz #597174 and various linux
vendors bugzillas (red hat #628331, mdv #60738, gentoo #337813).
devel/xulrunner will follow in a few..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2010/10/11 08:19:04 jasper Exp $
d11 1
a11 1
REVISION =	2
@


1.151
log
@- fix WANTLIB after cairo update.

(please note chromium is still broken, but will be dealt with soon)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2010/09/27 11:47:22 fgsch Exp $
d11 1
a11 1
REVISION =	1
@


1.150
log
@Fix crash on firefox if the audio handler is null. Bump.
eric@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2010/09/19 19:19:05 landry Exp $
d11 1
a11 1
REVISION =	0
@


1.149
log
@Bugfix update to mozilla-firefox 3.6.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2010/09/12 17:55:30 landry Exp $
d10 2
@


1.148
log
@Update firefox35 port to 3.5.12, fixing a whole bunch of MFSA (2010-49->63)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2010/09/06 12:59:50 eric Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.9
@


1.147
log
@simplify and improve sndio backend:
- do not use threads
- report current position correctly (fixes A/V sync)

input from jakemsr@@, ratchov@@
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2010/08/30 23:50:44 fgsch Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.8
d11 1
a11 1
SO_VERSION =	22.0
d15 1
a15 1
		xpcom xul nullplugin unixprintplugin
a16 1
REVISION =	1
a38 3
CONFIGURE_ARGS +=	--enable-system-sqlite
LIB_DEPENDS +=		:sqlite3->=3.6.16:databases/sqlite3
WANTLIB +=		sqlite3.>=13.3
d41 2
a48 4

# remove file that confuses make update-patches
pre-patch:
	rm ${WRKSRC}/toolkit/mozapps/extensions/test/unit/*.orig
@


1.146
log
@Bump for python. These are the last bits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2010/07/25 21:18:34 landry Exp $
d17 1
a17 1
REVISION =	0
@


1.145
log
@Moore's law reloaded: When you commit a firefox update, a new bugfix
release will be out within 24h. Doh!
So here comes 3.6.8, fixing MFSA-2010-48/critical bug 575836
Reminded by naddy@@/dhill@@/Patrick Keshishian
Proactive ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2010/07/22 21:42:13 landry Exp $
d17 1
@


1.144
log
@Security/Reliability update to firefox 3.6.7, fixes MFSA-2010-34 -> 47
http://www.mozilla.org/security/known-vulnerabilities/firefox36.html
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2010/07/19 13:46:27 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.7
@


1.143
log
@Add -Wl,-rpath,'$(installdir)' to LDFLAGS when linking mozilla libs, so
that when they are dlopen()'ed they can tell ld.so where to go hunt for
the other mozilla libs they depend on.
Similar fix as done in xulrunner 1.8 patch-config_rules_mk 2 years ago
by martynas@@, needed to convert py-gnome-extras to xulrunner 1.9.
No fallout on firefox.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2010/07/09 15:43:54 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	3.6.6
a10 1
REVISION =	1
d50 4
@


1.142
log
@Switch www/mozilla-firefox to www/mozilla MODULE. Makefile is now much
more sane : 31 insertions(+), 141 deletions(-)
Switch pkg/PLIST to MOZILLA_PROJECT, and correctly patch
config/autoconf.mk.in.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2010/07/01 20:32:10 jasper Exp $
d11 1
a11 1
PKGNAME =	${MOZILLA_PROJECT}-${MOZILLA_VERSION}p0
@


1.141
log
@- add a reminder for landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2010/06/28 21:24:22 landry Exp $
d3 1
a3 4
SHARED_ONLY=	Yes
ONLY_FOR_ARCHS=	alpha amd64 arm i386 powerpc sparc sparc64

COMMENT=	redesign of Mozilla's browser component
d6 4
d11 2
a12 4
VER=		3.6.6
DISTNAME=	mozilla-1.9.2
PKGNAME=	mozilla-firefox-${VER}
SO_VERSION=	22.0
d15 2
a16 9
.for _lib in browsercomps browserdirprovider imgicon mozjs \
	xpcom xul nullplugin unixprintplugin
SHARED_LIBS+=	${_lib}	${SO_VERSION}
.endfor

CATEGORIES=	www

FLAVORS=	debug
FLAVOR?=
d18 1
a18 1
HOMEPAGE=	http://www.mozilla.org/projects/firefox/
d26 2
a27 2
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
DISTFILES=	firefox-${VER}.source.tar.bz2
d29 2
a30 15
MODULES=	devel/gettext lang/python
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
		::graphics/netpbm \
		:zip->=2.3:archivers/zip
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		nspr4.>=21,plc4.>=21,plds4.>=21:nspr->=4.8:devel/nspr \
		nss3.>=25,smime3.>=25,softokn3.>=25,ssl3.>=25:nss->=3.12.6:security/nss \
		sqlite3.>=13.3:sqlite3->=3.6.16:databases/sqlite3
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xi \
		Xinerama Xrandr Xrender Xt atk-1.0 c cairo expat fontconfig \
		freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png pthread pthread-stubs sndio stdc++ xcb \
		xcb-render xcb-render-util z
d32 1
a32 1
VMEM_WARNING=	Yes
d34 1
a34 2
USE_X11=	Yes
USE_GMAKE=	Yes
d36 1
a36 38
NO_REGRESS=	Yes

MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf \
				${WRKSRC}/js/src/build/autoconf

AUTOCONF_VERSION= 2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS=	--with-system-jpeg=${LOCALBASE}	\
		--with-system-zlib=/usr/lib	\
		--with-system-nspr		\
		--with-system-nss		\
		--with-pthreads			\
		--enable-xft			\
		--disable-optimize		\
		--enable-default-toolkit=cairo-gtk2 \
		--disable-debug			\
		--disable-tests			\
		--disable-freetypetest		\
		--disable-mochitest		\
		--disable-libIDLtest		\
		--disable-glibtest		\
		--disable-pedantic		\
		--disable-installer		\
		--disable-updater		\
		--disable-gnomeui		\
		--disable-gnomevfs		\
		--disable-dbus			\
		--disable-ipc			\
		--enable-xinerama		\
		--enable-svg			\
		--enable-svg-renderer=cairo	\
		--enable-system-cairo		\
		--enable-system-sqlite		\
		--enable-canvas			\
		--disable-crashreporter		\
		--disable-libnotify		\
		--disable-necko-wifi		\
		--enable-official-branding
d38 5
d46 5
a50 2
# from browser/config/mozconfig
CONFIGURE_ARGS+=--enable-application=browser
d52 4
a55 59
.if ${FLAVOR:L:Mdebug}
CONFIGURE_ARGS+=--enable-debug
.endif

MAKE_ENV=	MOZ_CO_PROJECT=browser \
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		NSS_ENABLE_ECC=1 \
		NSS_USE_SYSTEM_SQLITE=1 \
		SO_VERSION="${SO_VERSION}"
CONFIGURE_ENV=	${MAKE_ENV} \
		MOZ_ENABLE_COREXFONTS=1 \
		topsrcdir=${WRKSRC}

MODPY_RUNDEP=	No

MOB=		${WRKSRC}/dist/bin
DIRECTORY=	mozilla-firefox
MOZ=		${PREFIX}/${DIRECTORY}

DATADIRS=	chrome components defaults dictionaries extensions \
		greprefs icons modules plugins res searchplugins

SUBST_VARS+=	VER DIRECTORY

post-extract:
	@@find ${WRKSRC} -name "*.orig" -exec rm -f {} \;
	@@cp -f ${FILESDIR}/nsSound.cpp ${WRKSRC}/widget/src/gtk2/
	@@cp -f ${FILESDIR}/sydney_audio_sndio.c \
		${WRKSRC}/media/libsydneyaudio/src/

pre-configure:
	cd ${WRKSRC}/js/src && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	${SUBST_CMD} ${WRKSRC}/xpcom/io/nsAppFileLocationProvider.cpp \
		${WRKSRC}/config/autoconf.mk.in \
		${WRKSRC}/build/unix/mozilla.in \
		${WRKSRC}/extensions/spellcheck/hunspell/src/mozHunspell.cpp \
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/toolkit/xre/nsXREDirProvider.cpp

do-install:
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \;
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD \
		${FILESDIR}/browserconfig.properties ${MOB}/*.so.${SO_VERSION} \
		${MOB}/LICENSE ${MOB}/application.ini ${MOB}/blocklist.xml \
		${MOB}/platform.ini ${MOZ}
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${FILESDIR}/firefox.desktop ${PREFIX}/share/applications
	${INSTALL_MAN} ${FILESDIR}/mozilla-firefox.1 ${PREFIX}/man/man1
	${SUBST_CMD} ${MOZ}/README.OpenBSD ${PREFIX}/man/man1/mozilla-firefox.1 \
		${PREFIX}/share/applications/firefox.desktop
	rm -f ${MOZ}/README.OpenBSD.beforesubst \
		${PREFIX}/man/man1/mozilla-firefox.1.beforesubst \
		${PREFIX}/share/applications/firefox.desktop.beforesubst
a56 1
	${INSTALL_SCRIPT} ${MOB}/firefox ${PREFIX}/bin
a57 3
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/firefox-bin ${MOB}/mozilla-xremote-client \
		${MOB}/regxpcom ${MOZ}
@


1.140
log
@Update to mozilla-firefox 3.6.6. Fixes a bunch of MFSA, see
http://www.mozilla.org/security/known-vulnerabilities/firefox36.html
The new plugin sandboxing code is disabled because :
- it only supports binary blobs plugins we don't have
- it is an horrible maze of #ifdef linux-apple-win32 coming straight
  from an old version of chromium. Future versions should have better BSD
support..
tested by several on ports@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2010/06/16 19:05:40 landry Exp $
d7 2
@


1.139
log
@Remove all patches applying to local copy of nss/nspr, as we now use the
systemwide on (which have all those patches). Don't call autoconf in
nsprpub/ while here, and bump PKGNAME to be on the safe side.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2010/06/12 15:00:12 landry Exp $
d8 1
a8 1
VER=		3.6.3
d10 2
a11 2
PKGNAME=	mozilla-firefox-${VER}p4
SO_VERSION=	21.1
d83 1
@


1.138
log
@Switch mozilla-firefox to use systemwide nss/nspr, and remove the
corresponding libs from SHARED_LIBS/PLIST. Bump minor and PKGNAME.
Bring in a pair of patches from xulrunner, and add a DIRECTORY variable
as done in xulrunner that is subst'ed in config/autoconf.mk.in.
sthen@@ likes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2010/05/09 09:35:55 dcoppa Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p3
d59 1
a59 2
				${WRKSRC}/js/src/build/autoconf \
				${WRKSRC}/nsprpub/build/autoconf
a133 1
	cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
@


1.137
log
@Adjust WANTLIB.

OK landry@@, sthen@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2010/04/28 06:56:38 landry Exp $
d10 2
a11 2
PKGNAME=	mozilla-firefox-${VER}p2
SO_VERSION=	21.0
d14 2
a15 3
.for _lib in browsercomps browserdirprovider imgicon freebl3 mozjs \
	nspr4 nss3 nssckbi nssdbm3 nssutil3 plc4 plds4 smime3 \
	softokn3 ssl3 xpcom xul nullplugin unixprintplugin
d41 2
d66 2
d119 2
a120 1
MOZ=		${PREFIX}/mozilla-firefox
d125 1
a125 1
SUBST_VARS+=	VER
d137 1
@


1.136
log
@Various cleanups, as done in www/firefox35 :
- use SUBST_CMD instead of perl -pi -e
- use ${LOCALBASE}/${TRUEPREFIX}/${X11BASE} instead of the handpatched
  _XXX_ ones
- harmonize default systemwide plugins/extensions search path to
  lib/mozilla/{plugins,extensions} as done in other mozilla ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2010/04/26 22:14:37 landry Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p1
d47 2
a48 1
		pixman-1 png pthread pthread-stubs sndio stdc++ xcb z
@


1.135
log
@Firefox uses its own libpng (for animated png support), and apparently
it breaks loading png icons through gdk_pixbuf_new_from_file as gtk is
linked with systemwide png. This went unnoticed so far as firefox always
shipped a fallback xpm icon, but this is not the case anymore, so now
gtk_window_set_icon_list() is not called anymore, and the window manager
shows the default icon for firefox windows in taskbar/tasklists..
So add graphics/netpbm as a build dependency, do the necessary netpbm
magic in do-install to create the default.xpm from mozicon128.png, and
patch widget/src/gtk2/nsWindow.cpp to not try to load png icons.
While here fix icon path in desktop file, and add a comment about why we
don't use systemwide png.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2010/04/26 19:55:58 landry Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
d120 2
d131 1
a131 1
	perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
d150 1
a150 3
	perl -pi -e 's,!!PREFIX!!,${TRUEPREFIX},g; \
		s,!!LOCALBASE!!,${LOCALBASE},g; s,!!VERSION!!,${VER},g' \
		${MOZ}/README.OpenBSD ${PREFIX}/man/man1/mozilla-firefox.1 \
d152 3
d165 4
a168 6
	cd ${WRKSRC} && \
		${LOCALBASE}/bin/pngtopnm -alpha ${MOZ}/icons/mozicon128.png > alpha.pgm
	cd ${WRKSRC} && \
		${LOCALBASE}/bin/pngtopnm ${MOZ}/icons/mozicon128.png | \
			${LOCALBASE}/bin/ppmtoxpm -alphamask=alpha.pgm > \
			${MOZ}/chrome/icons/default/default.xpm
@


1.134
log
@Update www/mozilla-firefox from 3.0.19 to 3.6.3, merging the wip done in
www/firefox36 mostly by martynas@@ and naddy@@.
Note that the java plugin from devel/jdk currently doesn't work with this
version of firefox, in the meantime users really needed it will have to
use www/firefox35.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/04/02 22:12:47 naddy Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
d39 1
d91 3
d159 9
@


1.133
log
@path to distfiles changed; no changes to the distfiles themselves
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2010/03/31 15:46:12 naddy Exp $
d8 2
a9 2
VER=		3.0.19
DISTNAME=	mozilla
d11 1
a11 1
SO_VERSION=	20.0
d14 3
a16 11
.for _lib in accessibility appcomps auth autoconfig browsercomps \
	browserdirprovider caps chardet chrome commandlines composer \
	cookie docshell embedcomponents fileview gkgfxthebes gklayout \
	gkplugin htmlpars i18n imgicon imglib2 intlapp jar50 jsd \
	mozfind necko nsappshell oji permissions pipboot pipnss \
	pippki places pref rdf remoteservice satchel spellchecker \
	storagecomps system-pref tkautocomplete toolkitcomps txmgr \
	uconv ucvmath universalchardet unixproxy webbrwsr widget_gtk2 \
	windowds xmlextras xpconnect xpinstall zipwriter gfxpsshar \
	gkgfx gtkxtbin jsj mozjs mozlcms thebes xpcom xpcom_core \
	xul nullplugin unixprintplugin
d33 2
a34 2
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}-real/source/
DISTFILES=	firefox-${VER}-source.tar.bz2
d41 2
a42 4
		nspr4.>=21,plc4.>=21,plds4.>=21:nspr->=4.8:devel/nspr \
		nss3.>=23,smime3.>=23,softokn3.>=23,ssl3.>=23:nss->=3.12.3:security/nss \
		sqlite3.>=10.0:sqlite3->=3.6.7:databases/sqlite3
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xft Xi \
d46 1
a46 1
		pixman-1 png pthread pthread-stubs stdc++ xcb z
d55 3
a57 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf
a62 2
		--with-system-nspr		\
		--with-system-nss		\
a84 1
		--disable-libxul		\
d86 2
d101 2
d117 1
d119 2
d123 2
d126 1
a126 1
		${WRKSRC}/browser/app/mozilla.in \
@


1.132
log
@SECURITY update to 3.0.19:
MFSA 2010-20 Chrome privilege escalation via forced URL drag and drop
MFSA 2010-19 Dangling pointer vulnerability in nsPluginArray
MFSA 2010-18 Dangling pointer vulnerability in nsTreeContentView
MFSA 2010-17 Remote code execution with use-after-free in nsTreeSelection
MFSA 2010-16 Crashes with evidence of memory corruption
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2010/02/24 18:17:23 naddy Exp $
d41 1
a41 1
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
@


1.131
log
@SECURITY update to 3.0.18:
MFSA 2010-05 XSS hazard using SVG document and binary Content-Type
MFSA 2010-04 XSS due to window.dialogArguments being readable cross-domain
MFSA 2010-03 Use-after-free crash in HTML parser
MFSA 2010-01 Crashes with evidence of memory corruption

Also fix some corrupted $OpenBSD keywords, pointed out by sthen@@

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2010/01/06 14:37:35 naddy Exp $
d8 1
a8 1
VER=		3.0.18
@


1.130
log
@minor reliability update to 3.0.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2009/12/22 13:02:12 sthen Exp $
d8 1
a8 1
VER=		3.0.17
@


1.129
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2009/12/17 22:08:13 naddy Exp $
d8 1
a8 1
VER=		3.0.16
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
d41 1
a41 2
#MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}-real/source/
@


1.128
log
@SECURITY update to 3.0.16:
MFSA 2009-71 GeckoActiveXObject exception messages can be used to enumerate installed COM objects
MFSA 2009-70 Privilege escalation via chrome window.opener
MFSA 2009-69 Location bar spoofing vulnerabilities
MFSA 2009-68 NTLM reflection vulnerability
MFSA 2009-65 Crashes with evidence of memory corruption
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2009/11/27 21:15:51 naddy Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
@


1.127
log
@SECURITY update to 3.0.15.  For the list of horrors, see
http://www.mozilla.org/security/known-vulnerabilities/firefox30.html#firefox3.0.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2009/09/18 20:35:27 martynas Exp $
d8 1
a8 1
VER=		3.0.15
d41 2
a42 1
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
@


1.126
log
@- create downloads dir with mode 0700 instead
- pass --disable-crashreporter
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2009/09/10 21:34:55 martynas Exp $
d8 1
a8 1
VER=		3.0.14
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p1
@


1.125
log
@- create downloads dir with mode 0700 instead
- pass --disable-crashreporter
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2009/09/10 21:28:25 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.124
log
@security update to mozilla-firefox-3.0.14.  MFSA 2009-51, MFSA
2009-50, MFSA 2009-49, MFSA 2009-48, MFSA 2009-47
http://www.mozilla.org/security/known-vulnerabilities/firefox30.html#firefox3.0.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2009/08/10 06:34:56 kili Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
d96 1
@


1.123
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2009/08/04 21:19:13 steven Exp $
d8 1
a8 1
VER=		3.0.13
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p1
@


1.122
log
@depend on more recent nss and nspr

help and ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2009/07/21 19:25:49 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
d56 1
a56 1
		pixman-1 png pthread stdc++ z
@


1.121
log
@security update to mozilla-firefox-3.0.13
@
text
@d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
d49 2
a50 2
		nspr4.>=20,plc4.>=20,plds4.>=20:nspr->=4.7:devel/nspr \
		nss3.>=22,smime3.>=22,softokn3.>=22,ssl3.>=22:nss->=3.12:security/nss \
@


1.120
log
@security update to mozilla-firefox-3.0.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2009/06/11 14:10:37 martynas Exp $
d8 1
a8 1
VER=		3.0.12
@


1.119
log
@mozilla-firefox-3.0.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2009/05/01 22:53:25 martynas Exp $
d8 1
a8 1
VER=		3.0.11
@


1.118
log
@implement sndio backend and get rid of esound.  ok jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2009/03/28 15:59:04 martynas Exp $
d8 1
a8 1
VER=		3.0.10
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
d51 1
a51 1
		sqlite3.>=10.0:sqlite3->=3.5:databases/sqlite3
@


1.117
log
@security update to mozilla-firefox-3.0.10.  from robert at openbsd.pap.st
MFSA 2009-23  Crash in nsTextFrame::ClearTextRun()
http://www.mozilla.org/security/known-vulnerabilities/firefox30.html#firefox3.0.10
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2009/04/26 11:01:05 ajacoutot Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
d45 1
a45 2
RUN_DEPENDS=	:esound-*:audio/esound \
		:desktop-file-utils-*:devel/desktop-file-utils
d121 3
@


1.116
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2009/04/22 21:59:31 martynas Exp $
d8 1
a8 1
VER=		3.0.9
@


1.115
log
@security update to mozilla-firefox-3.0.9.  MFSA 2009-22, MFSA
2009-21, MFSA 2009-20, MFSA 2009-19, MFSA 2009-18, MFSA 2009-17,
MFSA 2009-16, MFSA 2009-15, MFSA 2009-14:
"go ahead" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2009/04/22 21:00:23 martynas Exp $
a112 1
		PYTHON="${MODPY_BIN}" \
@


1.114
log
@turn off Ignore Scaling and Shrink to fit page width.  fixes printing
for beck@@.  ok kurt@@, "no objections" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2009/04/05 00:23:49 martynas Exp $
d8 1
a8 1
VER=		3.0.8
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p1
@


1.113
log
@sync switches w/ ff3
update about url
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2009/03/28 15:59:04 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.112
log
@mozilla-firefox-3.0.8:  forced release after security bugs got
attention

MFSA 2009-12 Mozilla Firefox XSL Parsing 'root' XML Tag Remote
Memory Corruption Vulnerability
    * http://www.securityfocus.com/bid/34235/exploit
    * https://bugzilla.mozilla.org/show_bug.cgi?id=485217
    * CVE-2009-1169


MFSA 2009-12 covers the Pwn2Own bug, which is a crash involving the XUL
<tree> widget.
    * https://bugzilla.mozilla.org/show_bug.cgi?id=484320
    * CVE-2009-1044

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2009/03/10 12:08:34 fgsch Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
@


1.111
log
@fix wantlib and bump package.
ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2009/03/05 23:42:20 martynas Exp $
d8 1
a8 1
VER=		3.0.7
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.110
log
@security update to mozilla-firefox-3.0.7.  MFSA 2009-11, MFSA
2009-10, MFSA 2009-09, MFSA 2009-08, MFSA 2009-07.
http://www.mozilla.org/security/known-vulnerabilities/firefox30.html#firefox3.0.7
includes security update to the png library
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2009/02/04 21:08:15 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
d55 3
a57 3
		freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0 \
		jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png \
		pthread stdc++ z
@


1.109
log
@security/stability update to mozilla-firefox-3.0.6.  MFSA 2009-06;
MFSA 2009-05; MFSA 2009-04; MFSA 2009-03; MFSA 2009-02; MFSA 2009-01
http://www.mozilla.org/security/known-vulnerabilities/firefox30.html#firefox3.0.6
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2009/01/09 15:54:31 martynas Exp $
d8 1
a8 1
VER=		3.0.6
@


1.109.2.1
log
@MFC:
security update to mozilla-firefox-3.0.10.  from robert at openbsd.pap.st
MFSA 2009-23  Crash in nsTextFrame::ClearTextRun()
http://www.mozilla.org/security/known-vulnerabilities/firefox30.html#firefox3.0.10

This update also resolves MFSA 2009-07 through MFSA 2009-22, and includes
the following fixes:

turn off Ignore Scaling and Shrink to fit page width.  fixes printing
for beck@@.

sync switches w/ ff3
update about url

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2009/04/28 21:50:16 martynas Exp $
d8 1
a8 1
VER=		3.0.10
d55 3
a57 3
		freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png pthread stdc++ z
@


1.108
log
@- do not run with a predictable directory as root:  firefox,
thunderbird, seamonkey, xulrunner
- add comment for xulrunner why -devel needs to be bumped
suggested and ok naddy@@;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2008/12/18 19:27:13 martynas Exp $
d8 1
a8 1
VER=		3.0.5
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.107
log
@security update to mozilla-firefox-3.0.5.  MFSA 2008-69; MFSA
2008-68; MFSA 2008-67; MFSA 2008-66; MFSA 2008-65; MFSA 2008-64;
MFSA 2008-63; MFSA 2008-60.
tested by sthen@@ and naddy@@.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2008/12/16 22:33:27 naddy Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
@


1.106
log
@The Gtk+2 printing default has been fixed to include lpr.  ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2008/11/20 23:41:32 martynas Exp $
d8 1
a8 1
VER=		3.0.4
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.105
log
@it is the right time to update to mozilla-firefox-3.0.4, which has
been tested good enough, and i've fixed all the issues i'm aware
of.  furthermore 2.0 branch has basically reached eol, since there
will be only one minor update (2.0.0.19)
discussed with kurt@@, naddy@@ and porters
pkgname change handling help naddy@@
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/11/13 17:00:10 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
@


1.104
log
@security update to mozilla-firefox-2.0.0.18.  MFSA 2008-58; MFSA
2008-57; MFSA 2008-56; MFSA 2008-55; MFSA 2008-54; MFSA 2008-53;
MFSA 2008-52; MFSA 2008-50; MFSA 2008-49; MFSA 2008-48; MFSA 2008-47.
http://www.mozilla.org/security/known-vulnerabilities/firefox20.html#firefox2.0.0.18
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2008/09/24 19:23:25 martynas Exp $
d8 1
a8 1
VER=		2.0.0.18
d11 1
a11 1
SO_VERSION=	19.0
d15 10
a24 9
	browserdirprovider caps chrome commandlines composer cookie docshell \
	editor embedcomponents fileview gfx_gtk gfxps gfxpsshar gkgfx \
	gklayout gkplugin gtkembedmoz gtkxtbin htmlpars i18n imglib2 jar50 \
	jsd jsj mork mozfind mozjs myspell necko necko2 nsappshell nullplugin \
	oji permissions pipboot pipnss pippki pref rdf remoteservice \
	searchservice spellchecker storagecomps system-pref toolkitcomps \
	transformiix txmgr uconv ucvmath universalchardet unixprintplugin \
	webbrwsr websrvcs widget_gtk2 xmlextras xpcom xpcom_compat \
	xpcom_compat_c xpcom_core xpconnect xpinstall xpistub
d44 1
a44 1
MODULES=	devel/gettext
d50 8
a57 8
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr \
		nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
WANTLIB=	X11 Xau Xcomposite Xdamage Xcursor Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender atk-1.0 c cairo expat \
		fontconfig freetype glib-2.0 glitz gmodule-2.0 \
		gobject-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png pthread stdc++ z \
		Xft Xinerama Xt gthread-2.0 jpeg pangox-1.0
a70 1
		--with-system-png=${LOCALBASE}	\
d77 1
a77 1
		--enable-default-toolkit=gtk2	\
d80 4
d89 1
d94 1
d96 1
a111 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
d113 1
d116 2
d122 1
a122 1
		greprefs icons init.d plugins res searchplugins
d125 1
a125 1
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
d127 3
a129 6
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp

post-build:
	@@cd ${WRKSRC}/xpfe/bootstrap && ${MAKE_PROGRAM} firefox.1
d137 12
a148 4
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
	${INSTALL_DATA} ${WRKSRC}/LICENSE \
		${FILESDIR}/browserconfig.properties ${MOZ}
a154 8
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g; s,!!LOCALBASE!!,${LOCALBASE},g' \
		< ${FILESDIR}/README.OpenBSD > ${MOZ}/README.OpenBSD
	${INSTALL_MAN} ${WRKSRC}/xpfe/bootstrap/firefox.1 ${PREFIX}/man/man1/
	@@ln -f ${PREFIX}/man/man1/firefox.1 ${PREFIX}/man/man1/mozilla-firefox.1
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		< ${FILESDIR}/firefox.desktop > \
			${PREFIX}/share/applications/firefox.desktop
@


1.103
log
@security update to mozilla-firefox-2.0.0.17.  MFSA 2008-45, MFSA
2008-44, MFSA 2008-43, MFSA 2008-42, MFSA 2008-41, MFSA 2008-40,
MFSA 2008-39, MFSA 2008-38, MFSA 2008-37
http://www.mozilla.org/security/known-vulnerabilities/firefox20.html#firefox2.0.0.17
ok naddy@@.  looks good to kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2008/09/18 13:37:41 ajacoutot Exp $
d8 1
a8 1
VER=		2.0.0.17
@


1.102
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2008/08/19 23:53:45 martynas Exp $
d8 1
a8 1
VER=		2.0.0.16
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p4
@


1.101
log
@use system libm.  was ok naddy@@, kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2008/07/26 16:23:32 ajacoutot Exp $
a63 1
SUBST_VARS=	LOCALBASE
@


1.100
log
@- s/PREFIX/LOCALBASE

ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2008/07/25 17:41:06 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p3
@


1.99
log
@document the new MOZ_PLUGIN_PATH behavior, bump pkgnames
pointed out, and looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2008/07/25 08:03:15 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p2
d142 1
a142 1
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
@


1.98
log
@@@conflict firefox3-*
bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2008/07/20 09:49:00 claudio Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p1
@


1.97
log
@Don't overwrite MOZ_PLUGIN_PATH in the startup script if it has been already
been set. This allows to load plugins on demand, especially interesting when
using multiple profiles with the -no-remote option.
OK martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2008/07/17 16:47:39 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.96
log
@security update to mozilla-firefox-2.0.0.16.  MFSA 2008-35, MFSA 2008-34
ok kurt@@, naddy@@, bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2008/07/04 13:47:25 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}
@


1.95
log
@security update to mozilla-firefox-2.0.0.15, fixes MFSA 2008-33,
MFSA 2008-32, MFSA 2008-31, MFSA 2008-30, MFSA 2008-29, MFSA 2008-28,
MFSA 2008-27, MFSA 2008-25, MFSA 2008-24, MFSA 2008-23, MFSA 2008-22,
MFSA 2008-21
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Firefox2.0.0.15
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2008/04/18 15:17:17 martynas Exp $
d8 1
a8 1
VER=		2.0.0.15
@


1.94
log
@security update to mozilla-firefox-2.0.0.14;  MFSA 2008-20
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2008/03/27 21:51:35 jasper Exp $
d8 1
a8 1
VER=		2.0.0.14
d55 1
a55 1
		png pthread stdc++ z \
d118 2
a119 1
		${WRKSRC}/browser/app/mozilla.in
@


1.93
log
@SECURITY UPDATE to mozilla-firefox 2.0.0.13
fixes multiple vulnerabilities: http://secunia.com/advisories/29526/

ok landry@@ martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2008/02/11 18:13:44 bernd Exp $
d8 1
a8 1
VER=		2.0.0.13
@


1.92
log
@Security update to mozilla-firefox-2.0.0.12.

Fixes multiple vulnerabilities:

CVE-2008-0412
CVE-2008-0413
CVE-2008-0414
CVE-2008-0415
CVE-2008-0419
CVE-2008-0591
CVE-2008-0593

More infos:
http://secunia.com/advisories/28758/

Tested by some people on ports@@. Thanks!

ok martynas@@, laurent@@, steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2008/01/23 16:41:40 martynas Exp $
d8 1
a8 1
VER=		2.0.0.12
@


1.92.2.1
log
@security update to 2.0.0.14; MFSA 2008-20

from William Yodlowsky
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2008/02/11 18:13:44 bernd Exp $
d8 1
a8 1
VER=		2.0.0.14
@


1.91
log
@- drop -devel
- move libraries to PLIST
improvements, testing and ok kurt@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2007/12/20 22:41:18 martynas Exp $
d8 1
a8 1
VER=		2.0.0.10
d10 1
a10 1
PKGNAME=	mozilla-firefox-${VER}p3
@


1.90
log
@bring back the browser.startup.homepage behavior after 1.82
requested by deraadt@@;  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2007/12/20 21:50:31 kurt Exp $
d6 1
a6 2
COMMENT-main=	redesign of Mozilla's browser component
COMMENT-devel=	devel files for Gecko
d10 1
a10 3
PKGNAME=	mozilla-firefox-${VER}
PKGNAME-main=	mozilla-firefox-${VER}p2
PKGNAME-devel=	mozilla-firefox-devel-${VER}p2
a33 2
MULTI_PACKAGES=	-main -devel

d46 2
a47 1
BUILD_DEPENDS=	:zip->=2.3:archivers/zip
d55 2
a56 8
		png pthread stdc++ z

WANTLIB-main=	${WANTLIB} Xft Xinerama Xt gthread-2.0 jpeg pangox-1.0

LIB_DEPENDS-devel= ${MODGETTEXT_LIB_DEPENDS} IDL-2::devel/libIDL \
		mozilla-firefox/gtkembedmoz,mozilla-firefox/mozjs,mozilla-firefox/xpcom,mozilla-firefox/xpcom_core:${PKGNAME-main}:www/mozilla-firefox,-main
WANTLIB-devel=	${WANTLIB} gdk-x11-2.0 gdk_pixbuf-2.0 gtk-x11-2.0 \
		nspr4 plc4 plds4
a114 1
DISTDIRS=	include idl
a125 5
	cd ${WRKSRC}/dist && \
		find ${DISTDIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DISTDIRS} ! -type d \
			-exec ${INSTALL_DATA} {} ${MOZ}/{} \;
d135 1
a135 2
	${INSTALL_SCRIPT} ${MOB}/firefox \
		${MOB}/firefox-config ${PREFIX}/bin
d139 1
a139 3
		${MOB}/regxpcom ${MOB}/TestGtkEmbed ${MOB}/nsinstall \
		${MOB}/xpcshell ${MOB}/xpicleanup ${MOB}/xpidl \
		${MOB}/xpt_dump ${MOB}/xpt_link ${MOZ}
a142 2
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${WRKBUILD}/build/unix/*.pc ${PREFIX}/lib/pkgconfig
@


1.89
log
@add back in the directory entries that were accidentally removed in the
last commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2007/12/19 17:25:28 jasper Exp $
d11 3
a13 3
PKGNAME=	mozilla-firefox-${VER}p1
PKGNAME-main=	mozilla-firefox-${VER}p1
PKGNAME-devel=	mozilla-firefox-devel-${VER}
d150 1
a150 1
		${MOB}/browserconfig.properties ${MOZ}
@


1.88
log
@oops, wrong dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2007/12/19 14:47:50 jasper Exp $
d11 2
a12 2
PKGNAME=	mozilla-firefox-${VER}p0
PKGNAME-main=	mozilla-firefox-${VER}p0
@


1.87
log
@- install a .desktop file, so that a firefox entry will appear in menus
  like gnome's.
- tweak PLIST (from kurt@@)

requested by fkr@@

feedback and ok kurt@@ martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2007/11/28 20:22:25 martynas Exp $
d50 1
a50 1
		:desktop-file-utils-*:desktop-file-utils
@


1.86
log
@- security update to mozilla-firefox-2.0.0.10:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.10
- fix canvas.drawImage regression.
ok kurt@@, kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2007/11/08 16:07:42 martynas Exp $
d11 2
a12 2
PKGNAME=	mozilla-firefox-${VER}
PKGNAME-main=	mozilla-firefox-${VER}
d49 2
a50 1
RUN_DEPENDS=	:esound-*:audio/esound
d166 4
@


1.85
log
@update to 2.0.0.9, a regression fix release:
http://developer.mozilla.org/devnews/index.php/2007/10/22/firefox-2008-update-to-be-updated/
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2007/10/27 09:04:32 ajacoutot Exp $
d9 1
a9 1
VER=		2.0.0.9
@


1.84
log
@- fix WANTLIB

"go ahead" robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2007/10/23 20:13:26 martynas Exp $
d9 1
a9 1
VER=		2.0.0.8
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
@


1.83
log
@security update to mozilla-firefox-2.0.0.8:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.8
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2007/10/19 17:36:17 fgsch Exp $
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}
PKGNAME-devel=	mozilla-firefox-devel-${VER}
d54 5
a58 4
WANTLIB=	X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama Xrandr \
		Xrender atk-1.0 c cairo expat fontconfig freetype \
		glib-2.0 glitz gmodule-2.0 gobject-2.0 m pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 png pthread stdc++ z
d60 1
a60 1
WANTLIB-main=	${WANTLIB} Xft Xinerama Xt jpeg pangox-1.0
@


1.82
log
@Re-add browserconfig.properties, otherwise you may encounter some issues
on fresh installations; bump package.
discussed an ok kurt@@ martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2007/10/14 18:33:09 kurt Exp $
d9 1
a9 1
VER=		2.0.0.7
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p1
PKGNAME-devel=	mozilla-firefox-devel-${VER}p1
a123 3

post-extract:
	@@cp ${FILESDIR}/xptc* ${WRKSRC}/xpcom/reflect/xptcall/src/md/unix/
@


1.81
log
@- fix a 64-bit problem with the LiveConnect feature. From mozilla
  bug report: https://bugzilla.mozilla.org/show_bug.cgi?id=345866
  Eventually the java plugin will need this on amd64. okay martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2007/09/20 16:28:28 martynas Exp $
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
d150 2
a151 1
	${INSTALL_DATA} ${WRKSRC}/LICENSE ${MOZ}
@


1.80
log
@update to 2.0.0.7;  fixes MFSA 2007-28:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.7
ok kurt@@; naddy@@.  similar diff from bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2007/09/15 22:14:34 merdely Exp $
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}
PKGNAME-devel=	mozilla-firefox-devel-${VER}
@


1.79
log
@Remove surrounding quotes in COMMENT-*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2007/09/15 20:38:22 merdely Exp $
d9 1
a9 1
VER=		2.0.0.6
@


1.78
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2007/08/02 13:09:41 martynas Exp $
d6 1
a6 1
COMMENT-main=	"redesign of Mozilla's browser component"
@


1.77
log
@security update to 2.0.0.6:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.6
the diff matches with naddy@@'s, ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2007/07/24 19:32:13 naddy Exp $
d7 1
a7 1
COMMENT-devel=	"devel files for Gecko"
@


1.76
log
@SECURITY update to 2.0.0.5.
Fixes a rash of security vulnerabilities and bugs.  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2007/06/12 16:45:37 martynas Exp $
d9 1
a9 1
VER=		2.0.0.5
@


1.75
log
@- set fd soft limit to 128 if it's lower: helps for people who
upgraded and didn't use mergemaster;
- remove lines, related to debug build and fd in README.OpenBSD;
help from sturm@@, kurt@@, espie@@, naddy@@
ok kurt@@, sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2007/06/01 08:03:42 martynas Exp $
d9 1
a9 1
VER=		2.0.0.4
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
@


1.74
log
@security update to mozilla-firefox-2.0.0.4
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.4

- WANTLIB for xenocara;
- use the combination of find(1) and install(1) to install the
{DATA,DIST}FILES, as suggested by kurt@@;
- remove the two patches that are already upstream;
- fmt;

ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2007/04/07 17:40:02 kili Exp $
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}
PKGNAME-devel=	mozilla-firefox-devel-${VER}
@


1.73
log
@
-devel has -main in it's plist, so bump it, too.

ok, martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2007/04/06 14:33:36 martynas Exp $
d9 1
a9 1
VER=		2.0.0.3
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
d54 2
a55 1
WANTLIB=	X11 Xext Xrender atk-1.0 c cairo fontconfig freetype \
d121 4
d138 10
a147 12
.for dir in include idl
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${WRKSRC}/dist && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
.for dir in chrome components defaults dictionaries extensions greprefs icons \
	init.d plugins res searchplugins
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${MOB} && ${TAR} -chf - ${dir}/ | \
		${TAR} -xf - -C ${MOZ}
	@@find ${MOZ} -type f -exec chmod 644 {} \;
.endfor
@


1.72
log
@- make it check LOCALBASE/share/mozilla-dicts, the global dictionaries
location for all mozilla ports;
- regen patches (due to the current changes);
- bump pkgname;
discussed with naddy@@, kurt@@, ajacoutot@@
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2007/03/27 16:04:37 martynas Exp $
d13 1
a13 1
PKGNAME-devel=	mozilla-firefox-devel-${VER}
@


1.71
log
@- update to 2.0.0.3;
- don't force -Os;
ok naddy@@, kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2007/03/06 17:43:36 espie Exp $
d12 1
a12 1
PKGNAME-main=	mozilla-firefox-${VER}
@


1.70
log
@fix @@pkgpath for debug flavor, unconfuses pkg_add -u.

okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2007/03/04 20:23:57 pvalchev Exp $
d3 1
d9 1
a9 1
VER=		2.0.0.2
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p2
PKGNAME-devel=	mozilla-firefox-devel-${VER}p1
d84 1
a84 1
		--enable-optimize=-Os		\
@


1.70.2.1
log
@MFC:
- update to 2.0.0.3;
- don't force -Os;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2007/03/06 17:43:36 espie Exp $
a2 1
SHARED_ONLY=	Yes
d8 1
a8 1
VER=		2.0.0.3
d11 2
a12 2
PKGNAME-main=	mozilla-firefox-${VER}
PKGNAME-devel=	mozilla-firefox-devel-${VER}
d83 1
a83 1
		--disable-optimize		\
@


1.70.2.2
log
@MFC:
security update to mozilla-firefox-2.0.0.4
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.4

- use the combination of find(1) and install(1) to install the
{DATA,DIST}FILES, as suggested by kurt@@;
- remove the two patches that are already upstream;
- fmt;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70.2.1 2007/05/01 16:22:32 sturm Exp $
d9 1
a9 1
VER=		2.0.0.4
a119 4
DATADIRS=	chrome components defaults dictionaries extensions \
		greprefs icons init.d plugins res searchplugins
DISTDIRS=	include idl

d133 12
a144 10
	cd ${WRKSRC}/dist && \
		find ${DISTDIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DISTDIRS} ! -type d \
			-exec ${INSTALL_DATA} {} ${MOZ}/{} \;
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \;
@


1.70.2.3
log
@MFC:
- set fd soft limit to 128 if it's lower
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70.2.2 2007/06/17 13:13:40 sturm Exp $
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
@


1.70.2.4
log
@cumulative security update to firefox 2.0.0.6

MFC:
SECURITY update to 2.0.0.5.
Fixes a rash of security vulnerabilities and bugs.
-----
security update to 2.0.0.6:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70.2.3 2007/07/04 17:11:48 sturm Exp $
d9 1
a9 1
VER=		2.0.0.6
d12 2
a13 2
PKGNAME-main=	mozilla-firefox-${VER}
PKGNAME-devel=	mozilla-firefox-devel-${VER}
@


1.70.2.5
log
@MFC (original commit martynas@@):
update to 2.0.0.7;  fixes MFSA 2007-28:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.7

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70.2.4 2007/08/25 18:19:47 sturm Exp $
d9 1
a9 1
VER=		2.0.0.7
@


1.69
log
@Fix permissions to /usr/local/mozilla (where ~/.mozilla inherits them
from) to allow owner writes. This was broken in the last commit... now
it allows users to save bookmarks, preferences, etc. From martynas
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2007/03/01 22:46:06 robert Exp $
d11 1
a11 1
PKGNAME-main=	mozilla-firefox-${VER}p1
@


1.68
log
@- update to version 2.0.0.2 and apply several security fixes,
therefore bump the PKGNAME to p0 now;
- enable official branding by default
- fix some WANTLIB markers

work done by Martynas Venckus; thanks.

tested by many many people; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2007/02/26 14:21:26 robert Exp $
d11 2
a12 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
d142 1
a142 1
	@@find ${MOZ} -type f -exec chmod 444 {} \;
@


1.67
log
@implement xptcinvoke and xptcstubs for arm based on the linux code,
and fix an endianess issue that makes minimo work on arm based
architectures; bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2007/02/20 20:06:56 sturm Exp $
d8 1
a8 1
VER=		2.0.0.1
d11 2
a12 2
PKGNAME-main=	mozilla-firefox-${VER}p3
PKGNAME-devel=	mozilla-firefox-devel-${VER}p2
a54 1
		pangox-1.0 \
d57 1
a57 1
WANTLIB-main=	${WANTLIB} Xft Xinerama Xt jpeg
d96 2
a97 1
		--enable-canvas
d110 1
a110 2
		SO_VERSION="${SO_VERSION}" \
		NSS_ENABLE_ECC=1
d113 2
a114 1
		MOZ_ENABLE_COREXFONTS=1
a122 1
	@@cd ${WRKSRC}/browser/base/branding && cp aboutCredits.png about.png
d142 1
d144 1
a144 6
	@@cd ${MOB} && ${TAR} -chf - *.so.${SO_VERSION} | \
		${TAR} -xf - -C ${MOZ}
	@@chmod 444 ${MOZ}/*.so.${SO_VERSION} \
		${MOZ}/components/*.so.${SO_VERSION} \
		${MOZ}/components/*.js \
		${MOZ}/plugins/*.so.${SO_VERSION}
d146 1
a146 3
	${INSTALL_DATA} ${WRKSRC}/LICENSE \
		${MOB}/bloaturls.txt \
		${MOB}/browserconfig.properties ${MOZ}
@


1.66
log
@fix live bookmarks on sparc64

from Martynas Venckus <martynas at altroot.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2007/02/14 22:44:32 naddy Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha amd64 i386 powerpc sparc sparc64
d11 1
a11 1
PKGNAME-main=	mozilla-firefox-${VER}p2
@


1.65
log
@add man page; from Martynas Venckus <martynas@@altroot.org>, ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2007/02/05 00:11:55 espie Exp $
d11 2
a12 2
PKGNAME-main=	mozilla-firefox-${VER}p1
PKGNAME-devel=	mozilla-firefox-devel-${VER}p1
@


1.64
log
@resurrect COREXFONTS, so that GDK_USE_XFT works again. Needs linking fixes
(+pangox-1.0).
Adjust README.OpenBSD, and provide a debug flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2007/01/12 21:46:17 kurt Exp $
d11 2
a12 2
PKGNAME-main=	mozilla-firefox-${VER}p0
PKGNAME-devel=	mozilla-firefox-devel-${VER}p0
d129 3
d167 2
@


1.63
log
@- update to 2.0.0.1 from Martynas Venckus <martynas at altroot.org>
- add a -devel sub-package for vlc plugin
input and testing from many - thanks! okay naddy@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2006/12/21 09:53:43 bernd Exp $
d11 2
a12 2
PKGNAME-main=	mozilla-firefox-${VER}
PKGNAME-devel=	mozilla-firefox-devel-${VER}
d31 3
d55 1
d102 4
d113 2
a114 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
@


1.62
log
@Security update to firefox 1.5.0.9.

More info:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Firefox

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2006/12/16 12:22:35 espie Exp $
d5 2
a6 1
COMMENT=	"redesign of Mozilla's browser component"
d8 1
a8 1
VER=		1.5.0.9
d11 3
a13 1
SO_VERSION=	18.0
d19 5
a23 5
	gklayout gkplugin gtkembedmoz gtkxtbin htmlpars i18n imglib2 inspector \
	jar50 jsd jsj mork mozfind mozjs necko necko2 nsappshell nss3 \
	nssckbi oji permissions pipboot pipnss pippki pref rdf \
	remoteservice searchservice smime3 softokn3 ssl3 system-pref \
	toolkitcomps transformiix txmgr uconv ucvmath universalchardet \
d33 2
a39 5
WANTLIB=	X11 Xext Xft Xrender Xinerama Xt c fontconfig freetype m \
		pthread z \
		atk-1.0 cairo glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		jpeg pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 png stdc++
d41 1
a41 2
MASTER_SITES=	http://ftp.eu.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/ \
		http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
d44 1
a44 1
MODULES=	gettext
d46 1
a46 2
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
		:zip->=2.3:archivers/zip
d48 12
a59 1
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
d67 1
a67 1
SUBST_VARS=	LOCALBASE SO_VERSION
d77 1
d102 2
a103 1
		SO_VERSION="${SO_VERSION}"
d114 1
a114 1
	@@cd ${WRKSRC}/browser/base/branding/ && cp aboutCredits.png about.png
d121 1
a121 1
.for dir in chrome components defaults extensions greprefs res searchplugins
d123 1
a123 1
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
d126 4
a129 1
	@@cd ${MOB} && ${TAR} -chf - *.so.??.? | \
d131 7
a137 1
	@@chmod 444 ${MOZ}/*.so.??.? ${MOZ}/components/*.so.??.? ${MOZ}/components/*.js
d139 5
a143 4
	${INSTALL_DATA} ${WRKSRC}/LICENSE ${MOZ}

	${INSTALL_DATA} ${WRKSRC}/browser/app/mozicon16.xpm ${WRKSRC}/browser/app/mozicon50.xpm ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/firefox ${MOB}/firefox-config ${PREFIX}/bin/
d146 4
a149 1
	${INSTALL_PROGRAM} ${MOB}/regxpcom ${MOB}/firefox-bin ${MOB}/mozilla-xremote-client ${MOZ}
d153 2
@


1.61
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2006/11/30 21:07:13 kurt Exp $
d7 1
a7 1
VER=		1.5.0.8
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p1
SO_VERSION=	17.0
d37 1
a37 1
		atk-1.0 cairo glib-2.0 gmodule-2.0 gobject-2.0 \
@


1.60
log
@- require nspr with PR_GetLibraryName fix
- bump major due to previous nspr removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2006/11/17 19:14:51 kurt Exp $
d48 1
a48 2
		:zip->=2.3:archivers/zip \
		:pkgconfig-*:devel/pkgconfig
@


1.59
log
@use devel/nspr instead of internal nspr. now using libc strtod and __dtoa
via devel/nspr. okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2006/11/10 14:15:49 wilfried Exp $
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p0
SO_VERSION=	16.0
d51 1
a51 1
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.3p2:devel/nspr
@


1.58
log
@SECURITY update to 1.5.0.8

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2006/10/01 22:23:47 brad Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
d17 2
a18 2
	jar50 jsd jsj mork mozfind mozjs necko necko2 nsappshell nspr4 nss3 \
	nssckbi oji permissions pipboot pipnss pippki plc4 plds4 pref rdf \
d39 1
a39 2
		pangoft2-1.0 png
WANTLIB+=	stdc++
d50 2
a51 1
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
d61 1
a61 2
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf \
				${WRKSRC}/nsprpub/build/autoconf
d68 1
a69 1
		--without-system-nspr		\
a104 1
	@@cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
a107 1
		${WRKSRC}/nsprpub/pr/include/md/_openbsd.h \
@


1.57
log
@stop using the gcc3 module on the alpha architecture.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2006/09/18 12:00:00 espie Exp $
d7 1
a7 1
VER=		1.5.0.7
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p1
SO_VERSION=	15.0
d122 1
@


1.56
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2006/09/17 21:02:58 steven Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
a39 1
.if empty(MACHINE_ARCH:Malpha)
a40 1
.endif
d46 1
a46 3
MODULES=	gcc3 gettext
MODGCC3_ARCHES=	alpha
MODGCC3_LANGS=	C++
@


1.55
log
@SECURITY update to firefox 1.5.0.7

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2006/07/31 09:32:19 bernd Exp $
d37 3
a39 3
		atk-1.0.0.0 cairo glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
		jpeg pango-1.0.0.0 pangocairo-1.0.0.0 \
		pangoft2-1.0.0.0 png
d55 1
a55 1
LIB_DEPENDS=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2
@


1.54
log
@Security update to mozilla-firefox-1.5.0.5.

This update fixes multiple security vulnerabilities.

For detailed information see:

http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.5

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2006/06/05 09:30:06 bernd Exp $
d7 1
a7 1
VER=		1.5.0.5
d10 1
a10 1
SO_VERSION=	14.0
@


1.54.2.1
log
@MFC:
SECURITY update to firefox 1.5.0.7

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2006/07/31 09:32:19 bernd Exp $
d7 1
a7 1
VER=		1.5.0.7
d10 1
a10 1
SO_VERSION=	15.0
@


1.54.2.2
log
@MFC:
SECURITY update to 1.5.0.8

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.1 2006/11/01 09:07:11 sturm Exp $
d7 1
a7 1
VER=		1.5.0.8
d10 1
a10 1
SO_VERSION=	16.0
a125 1
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
@


1.54.2.3
log
@MFC:
Security update to firefox 1.5.0.9.

More info:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Firefox
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.2 2006/11/10 17:48:52 sturm Exp $
d7 1
a7 1
VER=		1.5.0.9
d10 1
a10 1
SO_VERSION=	18.0
@


1.54.2.4
log
@Security update to firefox 1.5.0.10

see http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.10
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.3 2006/12/24 06:11:08 sturm Exp $
d7 1
a7 1
VER=		1.5.0.10
d15 1
a15 1
	editor embedcomponents fileview freebl3 gfx_gtk gfxps gfxpsshar gkgfx \
@


1.54.2.5
log
@security update to 1.5.0.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.4 2007/03/09 06:17:24 sturm Exp $
d7 1
a7 1
VER=		1.5.0.11
@


1.54.2.6
log
@security update to firefox 1.5.0.12
set soft fd to 128
backport an nss fix for a deadlock
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54.2.5 2007/04/02 14:00:27 sturm Exp $
d7 1
a7 1
VER=		1.5.0.12
@


1.53
log
@Security update to mozilla-firefox-1.5.0.4.

Fixes multiple security vulnerabilities. For detailed information see:

http://secunia.com/advisories/20376/
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.4

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2006/05/23 14:03:22 bernd Exp $
d7 1
a7 1
VER=		1.5.0.4
d10 1
a10 1
SO_VERSION=	13.0
@


1.52
log
@- better pkg/MESSAGE, from Deanna Phillips <deanna at sdf.lonestar.org>
- fix some typos in files/README.OpenBSD
- bump PKGNAME accordingly

ok wilfried@@, kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2006/05/05 10:14:21 bernd Exp $
d7 1
a7 1
VER=		1.5.0.3
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p0
SO_VERSION=	12.0
d38 1
a38 1
		jpeg pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0 \
@


1.51
log
@Update to 1.5.0.3. Security fixes inside...

More info:

CVE-2006-1993
http://secunia.com/advisories/19802/

tested by many
"go ahead" jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2006/04/18 10:37:32 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
@


1.50
log
@update to 1.5.0.2

fixes multiple critical vulnerabilities
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2006/03/27 04:23:28 pvalchev Exp $
d7 1
a7 1
VER=		1.5.0.2
d10 1
a10 1
SO_VERSION=	11.0
@


1.49
log
@check XftLockFace() for NULL return to avoid a crash, see
https://bugzilla.mozilla.org/show_bug.cgi?id=331077
from Tobias Ulmer <tobiasu@@tmux.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2006/02/06 08:21:53 wilfried Exp $
d7 1
a7 1
VER=		1.5.0.1
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p0
SO_VERSION=	10.0
@


1.48
log
@Firefox 1.5.0.1 is a stability-and-security update to Firefox 1.5.
It also includes a number of low-risk fixes for other types of bugs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2006/01/16 07:01:39 steven Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
@


1.48.2.1
log
@MFC:
update to 1.5.0.2

fixes multiple critical vulnerabilities
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2006/02/06 08:21:53 wilfried Exp $
d7 1
a7 1
VER=		1.5.0.2
d10 1
a10 1
SO_VERSION=	11.0
@


1.48.2.2
log
@MFC:
Update to 1.5.0.3. Security fixes inside...

More info:
CVE-2006-1993
http://secunia.com/advisories/19802/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.1 2006/05/02 07:17:13 sturm Exp $
d7 1
a7 1
VER=		1.5.0.3
d10 1
a10 1
SO_VERSION=	12.0
@


1.48.2.3
log
@MFC:
Security update to mozilla-firefox-1.5.0.4.

Fixes multiple security vulnerabilities. For detailed information see:

http://secunia.com/advisories/20376/
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.2 2006/05/07 19:52:04 sturm Exp $
d7 1
a7 1
VER=		1.5.0.4
d10 1
a10 1
SO_VERSION=	13.0
@


1.48.2.4
log
@MFC:
Security update to mozilla-firefox-1.5.0.5.

This update fixes multiple security vulnerabilities.

For detailed information see:

http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.3 2006/06/19 05:19:48 sturm Exp $
d7 1
a7 1
VER=		1.5.0.5
d10 1
a10 1
SO_VERSION=	14.0
@


1.48.2.5
log
@MFC:
SECURITY update to firefox 1.5.0.7

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.4 2006/08/02 19:23:14 sturm Exp $
d7 1
a7 1
VER=		1.5.0.7
d10 1
a10 1
SO_VERSION=	15.0
@


1.48.2.6
log
@MFC:
SECURITY update to 1.5.0.8

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.5 2006/09/20 20:48:05 sturm Exp $
d7 1
a7 1
VER=		1.5.0.8
d10 1
a10 1
SO_VERSION=	16.0
a125 1
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
@


1.48.2.7
log
@MFC:
Security update to firefox 1.5.0.9.

More info:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Firefox
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.6 2006/11/11 00:17:30 sturm Exp $
d7 1
a7 1
VER=		1.5.0.9
d10 1
a10 1
SO_VERSION=	18.0
@


1.48.2.8
log
@Security update to firefox 1.5.0.10

see http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox1.5.0.10
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.7 2006/12/23 20:53:49 sturm Exp $
d7 1
a7 1
VER=		1.5.0.10
d15 1
a15 1
	editor embedcomponents fileview freebl3 gfx_gtk gfxps gfxpsshar gkgfx \
@


1.48.2.9
log
@security update to 1.5.0.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48.2.8 2007/03/15 21:10:05 sturm Exp $
d7 1
a7 1
VER=		1.5.0.11
@


1.47
log
@fix WANTLIB after gtk+2 downgrade
"looks good" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2006/01/14 00:07:31 espie Exp $
d7 1
a7 1
VER=		1.5
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p3
SO_VERSION=	9.0
d123 1
a123 1
	@@cd ${MOB} && ${TAR} -chf - *.so.?.? | \
d125 1
a125 1
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
@


1.46
log
@more C++ libs bumps. Done thru mail, plus lizards.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2005/12/31 18:35:56 sturm Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p2
d35 2
a36 1
WANTLIB=	X11 Xft Xrender Xinerama Xt c fontconfig freetype m pthread z \
d38 2
a39 1
		jpeg pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0 png
@


1.45
log
@SHARED_LIBS
note that we keep the mozilla ports at a single SO_VERSION, too many
libraries, too little gain otherwise
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/12/26 02:17:53 ian Exp $
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p1
SO_VERSION=	8.0
@


1.44
log
@Add README.OpenBSD with more details on email, Java, etc.; shorten
MESSAGE accordingly to refer to new file; patchlevel bump for new file.
ok bernd@@, kurt@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2005/12/21 15:33:00 kurt Exp $
d13 12
@


1.43
log
@- Fix startup DoS. overlong document.title setting can corrupt history
data, causing non-responsive temporary hang on subsequent startups
patches from https://bugzilla.mozilla.org/show_bug.cgi?id=319004
- Fix use after free segfault after printing reported by Andy Wingate.
FT_Done_Face was being called twice on the same mFace.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2005/12/20 23:44:00 bernd Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p0
d120 2
@


1.42
log
@Update to Firefox 1.5.

Team work by wilfried@@, kurt@@ and me.

Tested by many. Thanks a lot!

ok kurt@@ krw@@ jolan@@ ian@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2005/11/15 09:21:52 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
@


1.41
log
@fix packages-specs brain fart from yesterday and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2005/11/14 15:50:18 wilfried Exp $
d7 1
a7 1
VER=		1.0.7
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p5
SO_VERSION=	7.0
d23 3
a25 4
WANTLIB=		X11 Xext Xft Xp Xrender Xt c cairo fontconfig freetype \
			atk-1.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
			jpeg m pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0 \
			png pthread z 
d27 1
a27 1
WANTLIB+=		stdc++
d34 1
a34 1
MODULES=	gcc3 devel/gettext
a37 1

d68 8
a75 1
		--disable-gnomevfs
d78 1
a78 7
CONFIGURE_ARGS+=--disable-ldap			\
		--disable-mailnews		\
		--enable-extensions=cookie,xml-rpc,xmlextras,pref,transformiix,universalchardet,webservices,inspector,negotiateauth \
		--enable-crypto			\
		--disable-composer		\
		--enable-single-profile		\
		--disable-profilesharing
d80 1
a80 6
CONFIGURE_ENV=	MOZ_PHOENIX=1 \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
MAKE_ENV=	MOZ_PHOENIX=1 \
d85 2
a89 1
MAGIC=		{972ce4c6-7e08-4474-a285-3208198ce6fd}
d95 1
d104 1
a104 1
.for dir in chrome components defaults greprefs res searchplugins
d113 1
d118 1
a118 1
	${INSTALL_PROGRAM} ${MOB}/regchrome ${MOB}/regxpcom ${MOB}/firefox-bin ${MOB}/mozilla-xremote-client ${MOZ}
a119 6

	${INSTALL_DATA_DIR} ${MOZ}/extensions
	${INSTALL_DATA} ${FILESDIR}/Extensions.rdf ${MOZ}/extensions/
	${INSTALL_DATA_DIR} ${MOZ}/extensions/${MAGIC}
	${INSTALL_DATA} ${MOZ}/defaults/profile/extensions/installed-extensions.txt ${MOZ}/extensions/installed-extensions-processed.txt
	${INSTALL_DATA} ${MOZ}/defaults/profile/extensions/${MAGIC}/install.rdf ${MOZ}/extensions/${MAGIC}/
@


1.40
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2005/11/03 00:59:43 pvalchev Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p4
d38 1
a38 1
RUN_DEPENDS=	::audio/esound
d40 1
a40 1
BUILD_DEPENDS=	::devel/libIDL \
d42 1
a42 1
		::devel/pkgconfig
@


1.39
log
@Fix a crash in prdtoa.c:mult() where there is an off-by-some bytes
in memory accessed during some very fucked up pointer acrobatics.
Allocate 2 bytes extra for that case, which seems to be a
sufficient hack to keep this working.

Debugged by me with minimo on zaurus/arm (pain!), seen also by krw@@
and others on amd64, who helped with testing.  Due to random malloc
this of course did not show up everywhere all the time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/10/19 13:08:12 naddy Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p3
d23 4
a26 4
WANTLIB=		X11 Xext Xft Xp Xrender Xt c fontconfig freetype \
			m pthread z atk-1.0.0.0 glib-2.0.0.0 \
			gmodule-2.0.0.0 gobject-2.0.0.0 jpeg pango-1.0.0.0 \
			pangox-1.0.0.0 pangoxft-1.0.0.0 png
d38 1
a38 1
RUN_DEPENDS=	:esound-*:audio/esound
d40 1
a40 1
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
d42 1
a42 1
		:pkgconfig-*:devel/pkgconfig
@


1.38
log
@Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.
ok wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2005/10/14 04:00:38 kurt Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p2
@


1.37
log
@remove 'don't close dlopened objects' type ld.so work-arounds
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/10/13 04:32:41 bernd Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p1
@


1.36
log
@If we start a second firefox, don't show the profile chooser but open a
new browser window instead. (The same for thunderbird and mozilla.)

Idea from Marc Winiger <mw at msys.ch>, thanks!

suggestions, tests & ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/09/24 16:19:29 bernd Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.35
log
@update to mozilla-firefox-1.0.7

comments & ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/09/16 15:54:53 david Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
@


1.34
log
@SECURITY: disable IDN due to buffer overflow (CAN-2005-2871)
https://addons.mozilla.org/messages/307259.html

tested by bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/09/08 12:48:39 kurt Exp $
d7 1
a7 1
VER=		1.0.6
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p3
SO_VERSION=	6.0
d69 2
a70 1
		--disable-installer
a124 1
	${INSTALL_DATA} ${FILESDIR}/bug307259.js ${MOZ}/defaults/pref/
@


1.33
log
@- switch from gtk1 to gtk2. tested by many (thanks!)
- fix backup mastersite
- fix gdk_property_get warnings (from marcm@@)

some feedback marcm@@, okay brad@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/08/12 19:01:44 pvalchev Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p2
d124 1
@


1.32
log
@Switch back to gtk1, as there are side-effects that need to be discussed
more and it's too close to release to be having such discussions, showing
this was not thought out very well.
Bump PKGNAME and shlibs again
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/07/22 19:34:20 kurt Exp $
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p1
SO_VERSION=	5.0
d23 4
a26 2
WANTLIB=		X11 Xext Xft Xi Xp Xrender Xt c fontconfig freetype \
			m pthread z
d32 1
a32 1
		http://ftp.mozilla.org/pub/firefox/releases/${VER}/source/
d39 2
a40 1
BUILD_DEPENDS=	:ORBit-*:devel/ORBit \
d43 1
a43 4
LIB_DEPENDS=	gtk.1,gdk.1::x11/gtk+ \
		glib.1,gmodule.1::devel/glib \
		jpeg.62::graphics/jpeg \
		png.3::graphics/png
d65 1
d74 1
a74 1
		--enable-extensions=cookie,xml-rpc,xmlextras,pref,transformiix,universalchardet,webservices,inspector,gnomevfs,negotiateauth \
@


1.32.2.1
log
@SECURITY: disable IDN due to buffer overflow (CAN-2005-2871)
https://addons.mozilla.org/messages/307259.html

Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/08/12 19:01:44 pvalchev Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p4
a122 1
	${INSTALL_DATA} ${FILESDIR}/bug307259.js ${MOZ}/defaults/pref/
@


1.32.2.2
log
@update to firefox 1.0.8
several security related fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32.2.1 2005/11/01 11:36:44 sturm Exp $
d7 1
a7 1
VER=		1.0.8
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}
SO_VERSION=	6.0
@


1.31
log
@-switch to gtk2 (originally from msf@@) tested by many
some minor scrolling issues noticed my naddy@@
-fix US master site

ok msf@@, fine by me naddy@@, go ahead wilfried@@
@
text
@d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p0
SO_VERSION=	4.0
d23 2
a24 4
WANTLIB=		X11 Xext Xft Xp Xrender Xt c fontconfig freetype \
			m pthread z atk-1.0.0.0 glib-2.0.0.0 \
			gmodule-2.0.0.0 gobject-2.0.0.0 pango-1.0.0.0 \
			pangox-1.0.0.0 pangoxft-1.0.0.0
d30 1
a30 1
		http://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
d37 1
a37 2

BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
d40 2
a41 2
LIB_DEPENDS=    gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2 \
		glib-2.0.0.0,gmodule-2.0.0.0::devel/glib2 \
a64 1
		--enable-default-toolkit=gtk2	\
d73 1
a73 1
		--enable-extensions=cookie,xml-rpc,xmlextras,pref,transformiix,universalchardet,webservices,inspector,negotiateauth \
@


1.30
log
@- update to 1.0.6 from Bernd Ahlers
- remove "Extentions don't work" from DESCR

tested on i386/amd64/macppc by myself, naddy@@ and/or Bernd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/05/24 00:44:41 msf Exp $
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}
SO_VERSION=	3.1
d23 4
a26 2
WANTLIB=		X11 Xext Xft Xi Xp Xrender Xt c fontconfig freetype \
			m pthread z
d32 1
a32 1
		http://ftp.mozilla.org/pub/firefox/releases/${VER}/source/
d39 2
a40 1
BUILD_DEPENDS=	:ORBit-*:devel/ORBit \
d43 2
a44 2
LIB_DEPENDS=	gtk.1,gdk.1::x11/gtk+ \
		glib.1,gmodule.1::devel/glib \
d68 1
d77 1
a77 1
		--enable-extensions=cookie,xml-rpc,xmlextras,pref,transformiix,universalchardet,webservices,inspector,gnomevfs,negotiateauth \
@


1.29
log
@- USE_SYSTRACE was written to be transparent to the port author. Adding i
  ${_SYSTRACE_CMD} to any target in a port Makefile is a mistake.

ok sturm@@ kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/05/13 08:21:54 wilfried Exp $
d7 1
a7 1
VER=		1.0.4
d10 1
a10 1
SO_VERSION=	3.0
@


1.28
log
@update to firefox 1.0.4
fixed remote code execution of Javascript and DHTML errors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/04/19 07:07:05 wilfried Exp $
d98 1
a98 1
	@@cd ${WRKSRC}/nsprpub && ${_SYSTRACE_CMD} ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
@


1.27
log
@update firefox to 1.0.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/04/16 15:49:17 kurt Exp $
d7 1
a7 1
VER=		1.0.3
@


1.26
log
@- make the build OFFICAL. This enables firefox to detect and upgrade
profiles that need to be upgraded automatically. Many annoying profile
issues will be gone now.
- Mention deleting extensions/Extensions.rdf and also the old ~/.firefox
as a location for profiles in MESSAGE. ~/.firefox will continue to be used
on systems that have been upgraded from older firefox versions.

OFFICAL build okay wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/04/09 15:43:47 wilfried Exp $
d7 1
a7 1
VER=		1.0.2
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}p3
SO_VERSION=	2.0
@


1.25
log
@- bump major shlib version
- move INSTALL/DEINSTALL code to PLIST
- remove unused ldap config/patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/04/04 21:24:00 kurt Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p2
d81 2
d86 2
@


1.24
log
@- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype

CUPS testing and ok by mbalmer@@ idea from wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/04/01 16:44:52 kurt Exp $
d9 4
a12 1
PKGNAME=	mozilla-firefox-${VER}p1
d51 1
a51 1
SUBST_VARS=	LOCALBASE
d54 1
a54 2
				${WRKSRC}/nsprpub/build/autoconf \
				${WRKSRC}/directory/c-sdk/config/autoconf
d80 2
a81 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
d83 2
a84 1
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin"
d94 1
a94 2
	@@cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	@@cd ${WRKSRC}/directory/c-sdk && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
d97 3
d107 1
a107 1
	@@cd ${MOB} && ${TAR} -chf - *.so.1.0 | \
d109 1
a109 1
	@@chmod 444 ${MOZ}/*.so.1.0 ${MOZ}/components/*.so.1.0 ${MOZ}/components/*.js
d112 1
a112 1
	${INSTALL_SCRIPT} ${MOB}/firefox ${PREFIX}/bin/
d114 1
a114 1
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOB}/firefox-config ${MOZ}
@


1.23
log
@- don't unload dependent libs (avoid dlclose bug)
- fix alpha wantlib
- adjust depends for esound & ORBit

okay alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/03/26 19:05:27 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.22
log
@update firefox to 1.0.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/03/16 08:59:04 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
d21 4
a24 1
			m pthread stdc++ z
d33 3
a35 1
BUILD_DEPENDS=	:zip->=2.3:archivers/zip \
a38 1
		IDL.4::devel/ORBit \
a40 1
RUN_DEPENDS=	:esound-0.2.*:audio/esound
@


1.21
log
@Tentative step for extensions, at least firefox stops whining.
From jamesw at bsdhosting.co.za, cleanup by me.
ok pval@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/03/02 19:30:18 naddy Exp $
d7 1
a7 1
VER=		1.0.1
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p1
d106 1
a106 1
	${INSTALL_PROGRAM} ${MOB}/regchrome ${MOB}/regxpcom ${MOB}/firefox-bin ${MOZ}
@


1.21.2.1
log
@Sync the port with the current one. It takes the port to firefox 1.0.4.
It fixes a lot of security vulnerabilities. For more information please visit:
http://www.mozilla.org/projects/security/known-vulnerabilities.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
VER=		1.0.4
d9 1
a9 4
PKGNAME=	mozilla-firefox-${VER}
SO_VERSION=	3.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
d21 1
a21 4
			m pthread z
.if empty(MACHINE_ARCH:Malpha)
WANTLIB+=		stdc++
.endif
d30 1
a30 3
RUN_DEPENDS=	:esound-*:audio/esound
BUILD_DEPENDS=	:ORBit-*:devel/ORBit \
		:zip->=2.3:archivers/zip \
d34 1
d37 1
d45 1
a45 1
SUBST_VARS=	LOCALBASE SO_VERSION
d48 2
a49 1
				${WRKSRC}/nsprpub/build/autoconf
d75 1
a75 4
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
d77 1
a77 4
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
d88 1
a90 3
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/nsprpub/pr/include/md/_openbsd.h \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp
d98 1
a98 1
	@@cd ${MOB} && ${TAR} -chf - *.so.?.? | \
d100 1
a100 1
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
d103 1
a103 1
	${INSTALL_SCRIPT} ${MOB}/firefox ${MOB}/firefox-config ${PREFIX}/bin/
d105 2
a106 2
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/regchrome ${MOB}/regxpcom ${MOB}/firefox-bin ${MOB}/mozilla-xremote-client ${MOZ}
@


1.21.2.2
log
@Sync the port with the current one. It takes the port to firefox 1.0.6
It fixes a lot of security vulnerabilities. For more information please visit:
http://www.mozilla.org/projects/security/known-vulnerabilities.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.1 2005/06/06 20:30:29 robert Exp $
d7 1
a7 1
VER=		1.0.6
@


1.21.2.3
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.2 2005/08/15 12:05:40 robert Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.21.2.4
log
@MFC:
SECURITY: disable IDN due to buffer overflow (CAN-2005-2871)
https://addons.mozilla.org/messages/307259.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.3 2005/08/31 19:51:41 sturm Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p3
a122 1
	${INSTALL_DATA} ${FILESDIR}/bug307259.js ${MOZ}/defaults/pref/
@


1.21.2.5
log
@Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.4 2005/09/19 06:50:57 sturm Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p4
@


1.21.2.6
log
@update to firefox 1.0.8
several security related fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.5 2005/10/30 07:18:40 sturm Exp $
d7 1
a7 1
VER=		1.0.8
d9 2
a10 2
PKGNAME=	mozilla-firefox-${VER}
SO_VERSION=	4.0
@


1.20
log
@* Update to 1.0.1.  Fixes IDN spoofing and other vulnerabilities.
* Dependency fixes from alek@@
* Don't install world-writable files and directories related to
extensions.  Breaks functionality in that area.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/01/13 15:57:26 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
d81 1
d108 6
@


1.19
log
@fix system png include path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/01/10 14:39:22 wilfried Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha i386 sparc sparc64 amd64 powerpc
d7 1
a7 1
VER=		1.0
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p1
d21 1
a21 1
			iconv intl m pthread stdc++ z
d27 1
a27 1
MODULES=	gcc3
d36 2
a37 2
		png.3::graphics/png \
		esd.2::audio/esound
@


1.18
log
@bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/01/10 10:17:08 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p0
@


1.17
log
@always use own nspr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/01/04 21:27:28 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
@


1.16
log
@let's make some noise, using esound
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/01/04 20:59:17 wilfried Exp $
d57 1
@


1.15
log
@fix SUBST_VARS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/12/11 13:29:22 alek Exp $
d36 2
a37 1
		png.3::graphics/png
@


1.14
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/12/08 21:54:49 naddy Exp $
d44 1
a44 1
SUBST_VARS=	LOCALBASE PORTSDIR
@


1.13
log
@Do not disable ProPolice, we have reports of success for most platforms.
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/11/26 18:29:14 pvalchev Exp $
d20 2
@


1.12
log
@mozilla-firefox-1.0; based on work by wilfried/robert/naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/08/08 17:19:36 robert Exp $
a68 7


# There is no problem with the propolice-enabled gcc3 on amd64 and sparc64,
# but it is reported to still be broken on others.
.if ${MACHINE_ARCH} != "amd64" && ${MACHINE_ARCH} != "sparc64"
CFLAGS+=	-fno-stack-protector
.endif
@


1.11
log
@gcc3/powerpc
@
text
@d7 1
a7 1
VER=		0.8
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}p1
d21 3
a23 3
MASTER_SITES=	http://ftp.eu.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/ \
		http://ftp.mozilla.org/pub/firefox/releases/${VER}/
DISTFILES=	firefox-source-${VER}.tar.bz2
d42 1
d64 1
a64 1
		--enable-extensions=cookie,xml-rpc,xmlextras,p3p,pref,transformiix,universalchardet,typeaheadfind,webservices \
d66 4
a69 1
		--disable-composer
d90 1
d95 2
a96 2
	${INSTALL_DATA_DIR} ${MOZ}
.for dir in chrome components defaults res searchplugins
d102 3
a104 1
	@@chmod 444 ${MOZ}/*.so.1.0 ${MOZ}/components/*.so.1.0
d106 2
a107 2
	ln ${PREFIX}/bin/firefox ${PREFIX}/bin/mozilla-firefox
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOB}/mozilla-config ${MOZ}
d109 1
@


1.10
log
@SECURITY:
The added patch fixes some libpng buffer overflow vulnerabilities in
mozilla's png decoder module.
http://bugzilla.mozilla.org/show_bug.cgi?id=251381

new-style PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/08/04 16:12:14 naddy Exp $
d26 1
a26 1
MODGCC3_ARCHES=	alpha powerpc
@


1.9
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/05/06 14:39:49 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-firefox-${VER}
@


1.8
log
@use no-autoheader and explicitly set autoconf version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/03/03 02:23:56 naddy Exp $
d42 4
@


1.7
log
@enable propolice on sparc64; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/03/01 23:52:32 drahn Exp $
d43 2
a44 1
CONFIGURE_STYLE= autoconf
@


1.6
log
@Patches to make firefox work on OpenBSD/macppc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/03/01 09:12:13 wilfried Exp $
d62 1
a62 1
# There is no problem with the propolice-enabled gcc3 on amd64,
d64 1
a64 1
.if ${MACHINE_ARCH} != "amd64"
@


1.5
log
@spacing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/03/01 07:14:48 pvalchev Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha i386 sparc sparc64 amd64
d26 1
a26 1
MODGCC3_ARCHES=	alpha
@


1.4
log
@amd64 support from FreeBSD & bugzilla
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/02/25 02:35:17 naddy Exp $
d63 1
a63 1
# but it is reported to still be brokenon others.
@


1.3
log
@The sparc64 compiler is gcc3 now; don't require the gcc3 module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/02/23 17:58:56 wilfried Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha i386 sparc sparc64
d62 3
d66 2
@


1.2
log
@forgot to remove graphics/libmng dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/02/15 19:37:14 wilfried Exp $
d26 1
a26 1
MODGCC3_ARCHES=	alpha sparc64
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/01/25 13:39:12 wilfried Exp $
a44 1
		--with-system-mng=${LOCALBASE}	\
@


1.1.1.1
log
@import of mozilla firefox 0.8
@
text
@@
