head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.08.18.13.04.26;	author sthen;	state dead;
branches;
next	1.1;
commitid	JSAzLWA21nhlyt34;

1.1
date	2015.06.28.12.31.53;	author czarkoff;	state Exp;
branches;
next	;
commitid	IlJQONx7jyriVBu9;


desc
@@


1.2
log
@remove dwb, suggested by Henrik Friedrichsen (maintainer), ok jca
http://marc.info/?l=openbsd-ports&m=143593955506953&w=2
@
text
@$OpenBSD: patch-src_application_c,v 1.1 2015/06/28 12:31:53 czarkoff Exp $
--- src/application.c.orig	Fri Mar  7 12:39:43 2014
+++ src/application.c	Sun Jun 28 11:17:01 2015
@@@@ -227,6 +227,12 @@@@ dwb_application_local_command_line(GApplication *app, 
     single_instance = GET_BOOL("single-instance");
     if (s_opt_single || !single_instance) 
         g_application_set_flags(app, G_APPLICATION_NON_UNIQUE);
+#if GLIB_CHECK_VERSION(2, 40, 0)
+	else {
+		int flags = g_application_get_flags(app);
+		g_application_set_flags(app, flags | G_APPLICATION_HANDLES_COMMAND_LINE);
+	}
+#endif
 
     bus = g_bus_get_sync(G_BUS_TYPE_SESSION, NULL, NULL);
     if (!s_opt_fallback && bus != NULL && g_application_register(app, NULL, &error)) 
@


1.1
log
@glib2 2.40+ compatibility fix

OK dcoppa@@@@
@
text
@d1 1
a1 1
$OpenBSD$
@

