head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.2
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.1.1.1.0.18
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.16
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.12
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.14
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.10
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.8
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.6
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.4
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	abieber_20121028:1.1.1.1
	abieber:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2017.07.26.14.19.45;	author abieber;	state Exp;
branches;
next	1.2;
commitid	TFuJyQC8K7nDNBbT;

1.2
date	2017.06.28.13.06.48;	author abieber;	state Exp;
branches;
next	1.1;
commitid	g8Kyg9PoMc8wocr9;

1.1
date	2012.10.28.23.43.00;	author abieber;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.10.28.23.43.00;	author abieber;	state Exp;
branches;
next	;


desc
@@


1.3
log
@First official release of luakit! https://github.com/luakit/luakit/issues/324

OK gsoares
@
text
@$OpenBSD: patch-Makefile,v 1.2 2017/06/28 13:06:48 abieber Exp $
Index: Makefile
--- Makefile.orig
+++ Makefile
@@@@ -17,7 +17,7 @@@@ EXT_OBJS = $(foreach obj,$(EXT_SRCS:.c=.o),$(obj))
 # Must be kept in sync with doc/docgen.ld
 DOC_SRCS = $(filter-out lib/markdown.lua,$(shell for d in doc/luadoc lib common/clib; do find $$d -type f; done)) tests/lib.lua
 
-all: options newline luakit luakit.1.gz luakit.so apidoc
+all: options newline luakit luakit.1 luakit.so
 
 options:
 	@@echo luakit build options:
@@@@ -50,21 +50,21 @@@@ buildopts.h: buildopts.h.in
 $(filter-out $(EXT_OBJS),$(OBJS)) $(EXT_OBJS): $(HEADS) config.mk
 
 $(filter-out $(EXT_OBJS),$(OBJS)) : %.o : %.c
-	@@echo $(CC) -c $< -o $@@
+	@@echo $(CC) -c $(CFLAGS) $(CPPFLAGS) $< -o $@@
 	@@$(CC) -c $(CFLAGS) $(CPPFLAGS) $< -o $@@
 
 $(EXT_OBJS) : %.o : %.c
-	@@echo $(CC) -c $< -o $@@
+	@@echo $(CC) -c $(CFLAGS) -DLUAKIT_WEB_EXTENSION -fpic $(CPPFLAGS) $< -o $@@
 	@@$(CC) -c $(CFLAGS) -DLUAKIT_WEB_EXTENSION -fpic $(CPPFLAGS) $< -o $@@
 
 widgets/webview.o: $(wildcard widgets/webview/*.c)
 
 luakit: $(OBJS)
-	@@echo $(CC) -o $@@ $(OBJS)
+	@@echo $(CC) -o $@@ $(OBJS) $(LDFLAGS)
 	@@$(CC) -o $@@ $(OBJS) $(LDFLAGS)
 
 luakit.so: $(EXT_OBJS)
-	@@echo $(CC) -o $@@ $(EXT_OBJS)
+	@@echo $(CC) -o $@@ $(EXT_OBJS) $(LDFLAGS)
 	@@$(CC) -o $@@ $(EXT_OBJS) -shared $(LDFLAGS)
 
 luakit.1: luakit.1.in
@@@@ -86,16 +86,12 @@@@ doc: buildopts.h $(THEAD) $(TSRC)
 	doxygen -s doc/luakit.doxygen
 
 clean:
-	rm -rf doc/apidocs doc/html luakit $(OBJS) $(EXT_OBJS) $(TSRC) $(THEAD) buildopts.h luakit.1 luakit.1.gz luakit.so
+	rm -rf doc/html luakit $(OBJS) $(EXT_OBJS) $(TSRC) $(THEAD) buildopts.h luakit.1 luakit.1.gz luakit.so
 
 install: all
 	install -d $(INSTALLDIR)/share/luakit/
 	install -d $(DOCDIR) $(DOCDIR)/classes $(DOCDIR)/modules $(DOCDIR)/pages
 	install -m644 README.md AUTHORS COPYING.GPLv3 $(DOCDIR)
-	install -m644 doc/apidocs/classes/* $(DOCDIR)/classes
-	install -m644 doc/apidocs/modules/* $(DOCDIR)/modules
-	install -m644 doc/apidocs/pages/* $(DOCDIR)/pages
-	install -m644 doc/apidocs/*.html $(DOCDIR)
 	install -d $(INSTALLDIR)/share/luakit/lib $(INSTALLDIR)/share/luakit/lib/lousy $(INSTALLDIR)/share/luakit/lib/lousy/widget
 	install -m644 lib/*.* $(INSTALLDIR)/share/luakit/lib
 	install -m644 lib/lousy/*.* $(INSTALLDIR)/share/luakit/lib/lousy
@@@@ -110,7 +106,7 @@@@ install: all
 	install -d $(APPDIR)
 	install -m644 extras/luakit.desktop $(APPDIR)
 	install -d $(MANPREFIX)/man1/
-	install -m644 luakit.1.gz $(MANPREFIX)/man1/
+	install -m644 luakit.1 $(MANPREFIX)/man1/
 	mkdir -p resources
 	find resources -type d -exec install -d $(INSTALLDIR)/share/luakit/'{}' \;
 	find resources -type f -exec sh -c 'f="{}"; install -m644 "$$f" "$(INSTALLDIR)/share/luakit/$$(dirname $$f)"' \;
@@@@ -127,4 +123,4 @@@@ run-tests: luakit luakit.so tests/util.so
 	@@$(LUA_BIN_NAME) tests/run_test.lua
 
 newline: options;@@echo
-.PHONY: all clean options install newline apidoc doc default
+.PHONY: all clean options install newline doc default
@


1.2
log
@Upstream is back up and running! This update includes:

- Updateded to WebKit 2 API.
- New widget types.
- Updated adblocker.
- Vertical tab support.
- Auto recovery of sessions.

Full list available here: https://aidanholm.github.io/luakit/

Port update includes:

- cleanup of Makefile
- us luakit's 'install' target

consensus (of two / myself) was to commit!
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
@@@@ -13,7 +13,7 @@@@ OBJS  = $(foreach obj,$(SRCS:.c=.o),$(obj))
 EXT_SRCS = $(filter-out $(TSRC),$(wildcard extension/*.c) $(wildcard extension/clib/*.c) $(wildcard common/*.c)) $(wildcard common/clib/*.c) $(TSRC)
 EXT_OBJS = $(foreach obj,$(EXT_SRCS:.c=.o),$(obj))
d12 3
a14 3
 default: all
 	@@echo "[DEPRECATED] Use of the 'default' target is deprecated. Please use 'all' target as a replacement."
@@@@ -49,21 +49,21 @@@@ buildopts.h: buildopts.h.in
d40 1
a40 1
@@@@ -83,16 +83,12 @@@@ doc: buildopts.h $(THEAD) $(TSRC)
d45 1
a45 1
+	rm -rf doc/apidocs doc/html luakit $(OBJS) $(EXT_OBJS) $(TSRC) $(THEAD) buildopts.h luakit.1 luakit.so
d50 1
a50 1
 	install -m644 README.md AUTHORS COPYING* $(DOCDIR)
d58 1
a58 1
@@@@ -107,7 +103,7 @@@@ install: all
d67 1
a67 1
@@@@ -124,4 +120,4 @@@@ run-tests: luakit luakit.so tests/util.so
@


1.1
log
@Initial revision
@
text
@d2 6
a7 4
--- Makefile.orig	Mon Oct  1 11:38:55 2012
+++ Makefile	Mon Oct  1 11:39:09 2012
@@@@ -37,13 +37,13 @@@@ globalconf.h: globalconf.h.in
 $(OBJS): $(HEADS) config.mk
d9 9
a17 1
 .c.o:
d22 5
d34 39
a72 1
 luakit.1: luakit
@


1.1.1.1
log
@Initial import of luakit a webkit bases browser written in lua

OK landry@@ jeremy@@
@
text
@@
