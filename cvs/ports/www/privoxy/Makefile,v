head	1.34;
access;
symbols
	OPENBSD_6_0:1.33.0.2
	OPENBSD_6_0_BASE:1.33
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.31.0.6
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.31.0.2
	OPENBSD_5_7_BASE:1.31
	OPENBSD_5_6:1.28.0.6
	OPENBSD_5_6_BASE:1.28
	OPENBSD_5_5:1.28.0.4
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.28.0.2
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.26.0.4
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.26.0.2
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.21.0.2
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.17.0.2
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.16.0.2
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.15.0.2
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.13.0.2
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.12.0.2
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.11.0.12
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.11.0.10
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.8
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.6
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.4
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.11.0.2
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.7.0.2
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	sturm_2002-Nov-29:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.34
date	2017.01.21.22.55.01;	author danj;	state Exp;
branches;
next	1.33;
commitid	venvb1rer2W00HRk;

1.33
date	2016.03.28.14.25.02;	author semarie;	state Exp;
branches;
next	1.32;
commitid	BxSAD89Ar2dppDPk;

1.32
date	2016.01.26.21.52.17;	author sthen;	state Exp;
branches;
next	1.31;
commitid	A5jHAvkbJZaQ3yWV;

1.31
date	2015.01.30.15.26.14;	author jasper;	state Exp;
branches
	1.31.6.1;
next	1.30;
commitid	IkSgZqLRmHlGlt7g;

1.30
date	2015.01.07.02.10.50;	author bcallah;	state Exp;
branches;
next	1.29;
commitid	wrazvBYmMRU43Ttc;

1.29
date	2014.08.24.09.17.52;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	KLjSYF8SXegVhowp;

1.28
date	2013.06.13.08.47.46;	author benoit;	state Exp;
branches
	1.28.6.1;
next	1.27;

1.27
date	2013.03.11.11.44.48;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2012.04.20.09.27.29;	author pascal;	state Exp;
branches;
next	1.25;

1.25
date	2011.10.14.09.57.51;	author merdely;	state Exp;
branches;
next	1.24;

1.24
date	2011.05.02.17.43.43;	author merdely;	state Exp;
branches;
next	1.23;

1.23
date	2011.03.25.07.01.14;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2011.03.25.02.56.13;	author merdely;	state Exp;
branches;
next	1.21;

1.21
date	2010.11.22.08.36.53;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.11.12.35.14;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.19.08.02.57;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.06.25.13.50.47;	author merdely;	state Exp;
branches;
next	1.17;

1.17
date	2009.10.04.19.27.21;	author benoit;	state Exp;
branches;
next	1.16;

1.16
date	2009.03.26.18.58.03;	author merdely;	state Exp;
branches;
next	1.15;

1.15
date	2009.01.21.13.54.52;	author merdely;	state Exp;
branches;
next	1.14;

1.14
date	2008.11.14.17.35.00;	author sturm;	state Exp;
branches;
next	1.13;

1.13
date	2008.04.04.02.21.29;	author merdely;	state Exp;
branches;
next	1.12;

1.12
date	2007.09.15.20.38.25;	author merdely;	state Exp;
branches;
next	1.11;

1.11
date	2004.12.11.13.29.22;	author alek;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.25.21.07.50;	author alek;	state Exp;
branches;
next	1.9;

1.9
date	2004.10.19.14.17.44;	author xsa;	state Exp;
branches;
next	1.8;

1.8
date	2004.10.08.08.22.29;	author xsa;	state Exp;
branches;
next	1.7;

1.7
date	2004.08.03.15.00.53;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2003.10.08.23.47.18;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.22.17.24.42;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2003.04.01.20.52.59;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2003.02.24.06.44.26;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2003.02.15.17.15.35;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.11.29.09.41.39;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.11.29.09.41.39;	author sturm;	state Exp;
branches;
next	;

1.28.6.1
date	2015.01.30.15.26.40;	author jasper;	state Exp;
branches;
next	;
commitid	DKFvoNzy14wiM9Uy;

1.31.6.1
date	2016.01.27.11.03.41;	author jasper;	state Exp;
branches;
next	;
commitid	ofOqqwtZETbvjlDq;


desc
@@


1.34
log
@Update to privoxy-3.0.26

From semarie
@
text
@# $OpenBSD: Makefile,v 1.33 2016/03/28 14:25:02 semarie Exp $

COMMENT=	web proxy with advanced filtering capabilities

V=		3.0.26
DISTNAME=	privoxy-${V}-stable
PKGNAME=	privoxy-${V}
CATEGORIES=	www

HOMEPAGE=	http://www.privoxy.org/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c pcre pcreposix pthread z

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=ijbswa/}
EXTRACT_SUFX=	-src.tar.gz

NO_TEST=	Yes

MAKE_FILE=	GNUmakefile

LIB_DEPENDS=	devel/pcre

CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ENV=	CPPFLAGS="-Dunix -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

pre-configure:
	@@cd ${WRKDIST} && AUTOCONF_VERSION=${AUTOCONF_VERSION} autoheader

# make install is broken
do-install:
	@@${SUBST_CMD} ${WRKSRC}/config
	${INSTALL_PROGRAM} ${WRKSRC}/privoxy ${PREFIX}/sbin
	cd ${WRKSRC}/tools && ${INSTALL_SCRIPT} * ${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/privoxy.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/privoxy
.for _f in AUTHORS ChangeLog README LICENSE
	${INSTALL_DATA} ${WRKSRC}/${_f} ${PREFIX}/share/doc/privoxy
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/privoxy
	${INSTALL_DATA} ${WRKSRC}/config ${PREFIX}/share/examples/privoxy
	${INSTALL_DATA} ${WRKSRC}/default.filter ${PREFIX}/share/examples/privoxy
	${INSTALL_DATA} ${WRKSRC}/user.filter ${PREFIX}/share/examples/privoxy
	${INSTALL_DATA} ${WRKSRC}/*.action ${PREFIX}/share/examples/privoxy
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/privoxy/templates
	${INSTALL_DATA} ${WRKSRC}/templates/* ${PREFIX}/share/examples/privoxy/templates

.include <bsd.port.mk>
@


1.33
log
@www/privoxy: annotate all templates with @@sample

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/01/26 21:52:17 sthen Exp $
d5 1
a5 1
V=		3.0.24
a8 1
REVISION=	0
@


1.32
log
@update to privoxy 3.0.24, including crash fixes and security fixes for
CVE-2016-1982 (invalid reads in case of corrupt chunk-encoded content) and
CVE-2016-1983 (invalid reads with empty Host headers).

While there, drop MESSAGE that relates to updating from a <=2011 version
of the port, and use an autoconf version from this century (upstream
doesn't provide a generated script so there is no "right" version).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/01/30 15:26:14 jasper Exp $
d9 1
@


1.31
log
@- update to privoxy-3.0.23
* includes fixes for CVE-2015-138{0,1,2}

tested by jca@@
ok jca@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/01/07 02:10:50 bcallah Exp $
d5 1
a5 1
V=		3.0.23
d26 2
a27 1
CONFIGURE_STYLE=	autoconf
@


1.31.6.1
log
@Security fixes for:
CVE-2016-1982 (invalid reads in case of corrupt chunk-encoded content) and
CVE-2016-1983 (invalid reads with empty Host headers).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/01/30 15:26:14 jasper Exp $
a5 1
REVISION=	0
@


1.30
log
@Update to 3.0.22 - drop maintainer as email bounces.
ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/08/24 09:17:52 ajacoutot Exp $
d5 1
a5 1
V=		3.0.22
@


1.29
log
@Multiline flags are not supported by the new parser for now; so unbreak
default daemon_flags.

reported by Sebastien Marie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/06/13 08:47:46 benoit Exp $
d5 1
a5 1
V=		3.0.21
a8 1
REVISION=	0
a10 2

MAINTAINER=	Michael Erdely <merdely@@openbsd.org>
@


1.28
log
@Update privoxy to 3.0.21.

ok merdely@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/03/11 11:44:48 espie Exp $
d9 1
@


1.28.6.1
log
@Security fixes for CVE-2015-138{0,1,2}

ok jca@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/06/13 08:47:46 benoit Exp $
a7 1
REVISION=	0
@


1.27
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/04/20 09:27:29 pascal Exp $
d5 1
a5 1
V=		3.0.19
a23 1
USE_GMAKE=	Yes
@


1.26
log
@Update to privoxy 3.0.19.

ok merdely@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/10/14 09:57:51 merdely Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d22 1
a22 1
NO_REGRESS=	Yes
@


1.25
log
@Fix "/etc/rc.d/privoxy stop".
Diff from Pascal Stumpf (thanks! sorry it took so long)

"looks ok to me" sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/05/02 17:43:43 merdely Exp $
d5 1
a5 1
V=		3.0.17
a8 2

REVISION=	2
@


1.24
log
@Install user.filter.
Fixes problem of privoxy not starting up without that file reported by
Lars Engblom.

"sure" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/03/25 07:01:14 ajacoutot Exp $
d10 1
a10 1
REVISION=	1
@


1.23
log
@Clean-up indent.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/03/25 02:56:13 merdely Exp $
d10 1
a10 1
REVISION=	0
d54 1
@


1.22
log
@From Pascal Stumpf with input from ajacotout@@:
"this is a small update of privoxy to 3.0.17, plus an rc script making
use of the built-in chroot functionality. For this to work, you need to
change the home of _privoxy to /var/privoxy, the rc script will copy all
necessary files into the chroot.

Also, some additional files and scripts will be installed."

Similar diff and testing from roberth
Input and OK from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/11/22 08:36:53 espie Exp $
d9 2
@


1.21
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/11 12:35:14 sthen Exp $
d5 1
a5 1
V=		3.0.16
a27 1
USE_GROFF =	Yes
d43 1
d46 3
a48 1
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/privoxy
@


1.20
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/19 08:02:57 espie Exp $
d31 1
a31 1
LIB_DEPENDS=	::devel/pcre
@


1.19
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/06/25 13:50:47 merdely Exp $
d19 2
a20 1
WANTLIB=		c pthread z
d31 1
a31 1
LIB_DEPENDS=	pcre,pcreposix::devel/pcre
@


1.18
log
@Update to 3.0.16.  Adds IPv6 support.

Diff from Robert <robert ! openbsd . pap . st>
Similar diff from Gabriel Kihlman <gk ! stacken . kth . se>

ok benoit@@, theoretical ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/10/04 19:27:21 benoit Exp $
d27 1
@


1.17
log
@- update privoxy to 3.0.12
- update & remove patch
- regen plist

ok ajacoutot@@, merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/03/26 18:58:03 merdely Exp $
d5 1
a5 1
V=		3.0.12
@


1.16
log
@Fix link order so static linking will work
Regen patches

prodded by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/01/21 13:54:52 merdely Exp $
d5 1
a5 1
V=		3.0.10
d7 1
a7 1
PKGNAME=	privoxy-${V}p0
@


1.15
log
@Update to 3.0.10.
Use SUBST_CMD.
Fix license marker (thanks sthen).
Update WANTLIB (thanks sthen).

ok sthen@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/11/14 17:35:00 sturm Exp $
d7 1
a7 1
PKGNAME=	privoxy-${V}
@


1.14
log
@silence a useless startup notice

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/04/04 02:21:29 merdely Exp $
d5 1
a5 1
V=		3.0.8
d7 1
a7 1
PKGNAME=	privoxy-${V}p0
d14 1
a14 1
# GPL
d19 1
a19 1
WANTLIB=		c pthread
d40 1
a40 3
	@@perl -pi \
		-e 's|%%SYSCONFDIR%%|${SYSCONFDIR}|g;' \
		${WRKSRC}/config
@


1.13
log
@Update to 3.0.8.
Take over MAINTAINER-ship (discussed with ckuethe, old MAINTAINER)
Remove patches that were included upstream.

ok wcmaier@@, ckuethe@@, sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/09/15 20:38:25 merdely Exp $
d7 1
a7 1
PKGNAME=	privoxy-${V}
@


1.12
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/12/11 13:29:22 alek Exp $
d5 3
a7 2
DISTNAME=	privoxy-3.0.3-2-stable
PKGNAME=	${DISTNAME:S/-2-stable//}p0
d12 1
a12 1
MAINTAINER=	Chris Kuethe <ckuethe@@ualberta.ca>
d22 1
a22 3
EXTRACT_SUFX=	.src.tar.gz

WRKDIST=	${WRKDIR}/${DISTNAME:S/-2//}
@


1.11
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/11/25 21:07:50 alek Exp $
d3 1
a3 1
COMMENT=	"web proxy with advanced filtering capabilities"
@


1.10
log
@- Replace (DE)INSTALL with MESSAGE and @@commands in PLIST
- Bump PKGNAME

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/10/19 14:17:44 xsa Exp $
d18 1
@


1.9
log
@new MAINTAINER, Chris Kuethe <ckuethe at ualberta.ca>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/10/08 08:22:29 xsa Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/-2-stable//}
@


1.8
log
@remove MAINTAINER per his request;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/08/03 15:00:53 naddy Exp $
d10 2
@


1.7
log
@update to 3.0.3; from Dan Weeks <danimal@@danimal.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/10/08 23:47:18 naddy Exp $
a9 2

MAINTAINER=	Dan Weeks <danimal@@danimal.org>
@


1.6
log
@@@extra support
From: Dan Weeks <danimal@@danimal.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/06/22 17:24:42 sturm Exp $
d5 2
a6 2
DISTNAME=	privoxy-3.0.2-stable
PKGNAME=	${DISTNAME:S/-stable//}p1
d20 3
a22 1
EXTRACT_SUFX=	-src.tar.gz
@


1.5
log
@update to new naming schema
bump PKGNAME

Dan Weeks ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/04/01 20:52:59 sturm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/-stable//}p0
@


1.4
log
@update to 3.0.2

- fixes two memory leaks, one serious
- quite some filter changes, upgraders beware!
- for details, see http://www.privoxy.org/announce.txt

from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2003/02/24 06:44:26 pvalchev Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/-stable//}
@


1.3
log
@fix DNS resolution by using thread-safe functions; patch from marc@@
bump PKGNAME. from maintainer Dan Weeks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/02/15 17:15:35 naddy Exp $
d5 2
a6 2
DISTNAME=	privoxy-3.0.0-stable
PKGNAME=	${DISTNAME:S/-stable//}p0
@


1.2
log
@pass autoconf version to autoheader
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/11/29 09:41:39 sturm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:S/-stable//}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: $
d34 1
a34 1
	@@cd ${WRKDIST} && PATH=${PORTPATH} autoheader
@


1.1.1.1
log
@import of privoxy-3.0.0
submitted by Dan Weeks <danimal@@danimal.org>

Privoxy is a web proxy with advanced filtering capabilities for protecting
privacy, filtering web page content, managing cookies, controlling access,
and removing ads, banners, pop-ups and other obnoxious Internet junk.
Privoxy has a very flexible configuration and can be customized to suit
individual needs and tastes. Privoxy has application for both stand-alone
systems and multi-user networks.

naddy@@ OK
@
text
@@
