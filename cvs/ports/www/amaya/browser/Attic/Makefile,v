head	1.29;
access;
symbols
	OPENBSD_5_2:1.28.0.4
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.28
	OPENBSD_5_1:1.28.0.2
	OPENBSD_5_0:1.27.0.2
	OPENBSD_5_0_BASE:1.27
	OPENBSD_4_9:1.25.0.2
	OPENBSD_4_9_BASE:1.25
	OPENBSD_4_8:1.22.0.2
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.20.0.2
	OPENBSD_4_7_BASE:1.20
	OPENBSD_4_6:1.19.0.8
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.19.0.6
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.4
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.17.0.2
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.14.0.2
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.13.0.2
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.12.0.4
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.2
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.11.0.4
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.11.0.2
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.10.0.2
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.9.0.2
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.8.0.6
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.8.0.4
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.8.0.2
	OPENBSD_3_0_BASE:1.8
	OPENBSD_2_9_TRACKING_SWITCH:1.6
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.3.0.2
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.1.1.1.0.2
	OPENBSD_2_7_BASE:1.1.1.1
	BrunoRohee_2000-Apr-11:1.1.1.1
	BrunoRohee:1.1.1;
locks; strict;
comment	@# @;


1.29
date	2013.01.16.07.40.36;	author jasper;	state dead;
branches;
next	1.28;

1.28
date	2011.09.16.12.00.06;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2011.07.07.00.22.37;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.04.10.18.02.55;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.22.08.36.47;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.11.12.35.09;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2010.10.24.21.40.09;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.06.06.12.27.26;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2010.04.24.20.18.39;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2009.08.10.06.34.56;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.15.23.36.43;	author merdely;	state Exp;
branches;
next	1.18;

1.18
date	2007.09.15.20.38.20;	author merdely;	state Exp;
branches;
next	1.17;

1.17
date	2007.04.28.19.45.41;	author sturm;	state Exp;
branches;
next	1.16;

1.16
date	2007.04.07.14.54.12;	author steven;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.13.12.53.08;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2006.08.04.00.10.42;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2005.11.03.18.28.56;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2004.12.11.13.29.20;	author alek;	state Exp;
branches;
next	1.11;

1.11
date	2003.12.20.01.17.43;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2003.06.17.15.03.54;	author avsm;	state Exp;
branches;
next	1.9;

1.9
date	2002.10.29.01.30.41;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2001.10.02.20.18.59;	author heko;	state Exp;
branches;
next	1.7;

1.7
date	2001.09.28.06.02.15;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2001.05.06.04.22.45;	author lebel;	state Exp;
branches;
next	1.5;

1.5
date	2001.04.18.15.01.22;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2001.03.17.12.23.44;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2000.08.10.08.48.07;	author kevlo;	state Exp;
branches;
next	1.2;

1.2
date	2000.06.20.15.27.19;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.11.20.08.46;	author rohee;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.04.11.20.08.46;	author rohee;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2000.09.15.05.21.28;	author marc;	state Exp;
branches;
next	;


desc
@@


1.29
log
@remove amaya, it's been marked broken for 1.5 years now, and hasn't been updated
in over a decade...time to officially put this browser to rest in the Attic.

ok kili@@
@
text
@# $OpenBSD: Makefile,v 1.28 2011/09/16 12:00:06 espie Exp $
#
# Many variables moved to ../Makefile.inc

COMMENT=		test-bed browser/authoring tool of the W3C

AMAYA_VERSION=		5.1
DISTNAME=		amaya-src-${AMAYA_VERSION}
PKGNAME=		amaya-${AMAYA_VERSION}
REVISION=		8

HOMEPAGE=		http://www.w3.org/Amaya/

FLAVORS=		motif gtk
FLAVOR?=		motif

WANTLIB += ICE SM X11 Xext Xt c expat m pthread-stubs xcb z

.if ${FLAVOR:L} == "gtk"
MODULES +=		devel/gettext
CONFIGURE_ARGS+=	--with-gtk=${LOCALBASE}
# I'm too lazy to write a proper imlib autoconf test.
LIB_DEPENDS+=		graphics/imlib
WANTLIB += Xi gdk gif glib gmodule gtk jpeg png tiff gdk_imlib.>=19
.elif ${FLAVOR:L} == "motif"
WANTLIB += jpeg png Xm
LIB_DEPENDS+=		graphics/jpeg \
			graphics/png  \
			x11/openmotif
CONFIGURE_ARGS+=	--without-gtk \
			--with-motif-includes=${LOCALBASE}/include \
			--with-motif-libraries=${LOCALBASE}/lib

.else
ERRORS+=		"Fatal: Conflicting or missing flavor: '${FLAVOR}'"
.endif

WRKSRC=			${WRKDIR}/Amaya
WRKBUILD=		${WRKDIR}/Amaya/obj
WRKDIST=		${WRKDIR}

USE_GMAKE=		Yes
USE_LIBTOOL=		Yes
LIBTOOL_FLAGS=		--tag=disable-shared
AUTOCONF_VERSION=	2.13
CONFIGURE_STYLE=	autoconf dest
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/../libwww/config
CONFIGURE_SCRIPT=	../configure
CONFIGURE_ENV=		CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
			LIBS="-L${X11BASE}/lib -L${LOCALBASE}/lib"
CONFIGURE_ARGS+=	--without-graphic-libs
MAKE_ENV+=MOTIFLIB='-L${LOCALBASE}/lib -lXm'

# We need to regenerate configure in two places, Amaya/ and libwww/
AUTOCONF_DIR=		${WRKSRC}
post-patch:
	@@cd ${WRKDIST}/libwww && exec ${SETENV} \
		${AUTOCONF_ENV} ${AUTOCONF}

post-configure:
	@@cd ${WRKBUILD} && cp Options.orig Options

NO_REGRESS=		Yes
	
pre-install:
	${STRIP} ${WRKBUILD}/bin/amaya
	${STRIP} ${WRKBUILD}/bin/print

post-install:
	cd ${PREFIX}/bin; rm amaya; \
		ln -s ${TRUEPREFIX}/Amaya/applis/bin/amaya

.include <bsd.port.mk>
@


1.28
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/07/07 00:22:37 ajacoutot Exp $
@


1.27
log
@Use the gettext MODULE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/04/10 18:02:55 jasper Exp $
d10 1
a10 1
REVISION=		7
@


1.26
log
@adjust after recent lesstif removal

ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/22 08:36:47 espie Exp $
d10 1
a10 1
REVISION=		6
d20 1
a20 1

d24 1
a24 3

WANTLIB += Xi gdk gif glib gmodule gtk iconv intl jpeg png tiff gdk_imlib.>=19

a25 1

@


1.25
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/11 12:35:09 sthen Exp $
d29 1
a29 2
USE_MOTIF=		any
WANTLIB += jpeg png
d31 2
a32 1
			graphics/png 
d55 1
@


1.24
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/10/24 21:40:09 ajacoutot Exp $
d23 1
a23 1
LIB_DEPENDS+=		::graphics/imlib
d31 2
a32 2
LIB_DEPENDS+=		::graphics/jpeg \
			::graphics/png 
@


1.23
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/06/06 12:27:26 kili Exp $
d9 2
a10 1
PKGNAME=		amaya-${AMAYA_VERSION}p6
d17 1
a17 2
WANTLIB=		ICE SM X11 Xext Xt c expat m pthread-stubs xcb z

d23 1
a23 1
LIB_DEPENDS+=		gdk_imlib.>=19::graphics/imlib
d25 1
a25 1
WANTLIB+=		Xi gdk gif glib gmodule gtk iconv intl jpeg png tiff
d30 3
a32 2
LIB_DEPENDS+=		jpeg.>=62::graphics/jpeg \
			png.>=2::graphics/png 
@


1.22
log
@Fix www/amaya/browser:

- don't declare static stuff (that's only needed in one file) as
  extern in a header file.

- Use system jpeg again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/04/24 20:18:39 naddy Exp $
a17 1
USE_X11=		Yes
@


1.21
log
@fix build and WANTLIB after libXp removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/08/10 06:34:56 kili Exp $
d9 1
a9 1
PKGNAME=		amaya-${AMAYA_VERSION}p5
@


1.20
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/09/15 23:36:43 merdely Exp $
d9 1
a9 1
PKGNAME=		amaya-${AMAYA_VERSION}p4
d16 1
a16 1
WANTLIB=		ICE SM X11 Xext Xp Xt c expat m pthread-stubs xcb z
@


1.19
log
@Put quotes back around ERRORS.

From simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/09/15 20:38:20 merdely Exp $
d9 1
a9 1
PKGNAME=		amaya-${AMAYA_VERSION}p3
d16 1
a16 1
WANTLIB=		ICE SM X11 Xext Xp Xt c expat m z
@


1.18
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/04/28 19:45:41 sturm Exp $
d38 1
a38 1
ERRORS+=		Fatal: Conflicting or missing flavor: '${FLAVOR}'
@


1.17
log
@use xenocara's expat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/04/07 14:54:12 steven Exp $
d5 1
a5 1
COMMENT=		"test-bed browser/authoring tool of the W3C"
d38 1
a38 1
ERRORS+=		"Fatal: Conflicting or missing flavor: '${FLAVOR}'"
@


1.16
log
@USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/11/13 12:53:08 steven Exp $
d9 1
a9 1
PKGNAME=		amaya-${AMAYA_VERSION}p2
d16 1
a16 3
LIB_DEPENDS+=	 	expat.>=2::textproc/expat

WANTLIB=		ICE SM X11 Xext Xp Xt c m z
d52 2
a53 2
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
			LIBS="-L${LOCALBASE}/lib"
@


1.15
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/08/04 00:10:42 espie Exp $
d9 1
a9 1
PKGNAME=		amaya-${AMAYA_VERSION}p1
d48 2
@


1.14
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/11/03 18:28:56 naddy Exp $
d19 2
@


1.13
log
@Always explicitly set the AUTOCONF_VERSION to use.  In some cases
the default was not appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/12/11 13:29:20 alek Exp $
d16 1
a16 1
LIB_DEPENDS+=	 	expat.2::textproc/expat
d24 1
a24 1
LIB_DEPENDS+=		gdk_imlib.19::graphics/imlib
d31 2
a32 2
LIB_DEPENDS+=		jpeg.62::graphics/jpeg \
			png.2::graphics/png 
@


1.12
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/12/20 01:17:43 espie Exp $
d46 1
@


1.11
log
@Get the correct png and zlib includes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/06/17 15:03:54 avsm Exp $
d18 2
d25 2
@


1.10
log
@patch off-by-ones in input dialogs; bump PKGNAME
version in ports is too old to submit patches upstream I think
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/10/29 01:30:41 naddy Exp $
d45 1
a45 1
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
@


1.9
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/10/02 20:18:59 heko Exp $
d9 1
a9 1
PKGNAME=		amaya-${AMAYA_VERSION}
@


1.8
log
@o Upgrade to Amaya 5.1
o Add gtk flavor, don't build it yet in www/amaya/Makefile until some
  scrollbar dysfunctionality is fixed.
o Build amaya against system versions of: jpeg, png, zlib,
  expat, md5; some of the patches for this come from FreeBSD
o Add HOMEPAGE
o Unify dictionary installation to a common $frag (a bunch
  of dictionaries will be imported later separately)
o Take over maintainer; ok naddy@@
o Fix missing trailing slash in MASTER_SITES
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.7 2001/09/28 06:02:15 pvalchev Exp $
# Original from: Bruno Rohee <rohee@@OpenBSD.ORG>
a3 1
#
a12 2
NEED_VERSION=		1.454

d57 2
@


1.7
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/05/06 04:22:45 lebel Exp $
d9 1
a9 1
AMAYA_VERSION=		3.2.1
d13 16
a28 1
NEED_VERSION=		1.402
d31 9
d42 2
a43 1
WRKBUILD=		${WRKSRC}/obj
d46 1
a46 1
CONFIGURE_STYLE=	gnu dest
d49 13
a61 1

d67 2
a68 1
	cd ${PREFIX}/bin; rm amaya; ln -s ${TRUEPREFIX}/Amaya/applis/bin/amaya
@


1.6
log
@www: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/04/18 15:01:22 espie Exp $
d22 1
@


1.5
log
@Fix USE_MOTIF, especially for those ports with `motif' flavors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/03/17 12:23:44 wilfried Exp $
d6 3
a9 1

d13 1
a13 1
NEED_VERSION=		1.400
@


1.4
log
@respect CC/CFLAGS, ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/08/10 08:48:07 kevlo Exp $
d11 1
a11 1
NEED_VERSION=		1.319
d13 1
a13 1
USE_MOTIF=		Yes
@


1.3
log
@- Update to version 3.2.1
- GNU_CONFIGURE -> CONFIGURE_STYLE
- Add @@comment to PLIST
- Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/06/20 15:27:19 espie Exp $
d20 1
a20 4

do-configure:
	cd ${WRKBUILD} && ${SETENV} ${CONFIGURE_ENV} ../configure ${CONFIGURE_ARGS}

@


1.2
log
@Fix packaging. Somehow, this went in without Faking (my fault).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/04/11 20:08:46 rohee Exp $
d6 1
a6 1
AMAYA_VERSION=		2.4
d11 1
a11 1
NEED_VERSION=		1.301
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/03/25 12:40:56 rohee Exp $
d11 1
a11 1
NEED_VERSION=		1.225
a17 1
GNU_CONFIGURE=		Yes
d19 1
d22 2
a23 2
	mkdir -p ${WRKBUILD} && cd ${WRKBUILD} && \
	../configure ${CONFIGURE_ARGS}
d28 3
@


1.1.1.1
log
@new layout for amaya port
@
text
@@


1.1.1.1.2.1
log
@bring www as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/08/10 08:48:07 kevlo Exp $
d6 1
a6 1
AMAYA_VERSION=		3.2.1
d11 1
a11 1
NEED_VERSION=		1.319
d18 1
a19 1
CONFIGURE_STYLE=	gnu dest
d22 2
a23 2
	cd ${WRKBUILD} && ${SETENV} ${CONFIGURE_ENV} ../configure ${CONFIGURE_ARGS}

a27 3

post-install:
	cd ${PREFIX}/bin; rm amaya; ln -s ${TRUEPREFIX}/Amaya/applis/bin/amaya
@

