head	1.27;
access;
symbols
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.24.0.2
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2;
locks; strict;
comment	@# @;


1.27
date	2013.11.21.16.10.46;	author landry;	state dead;
branches;
next	1.26;

1.26
date	2013.05.29.23.10.16;	author landry;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.08.14.25.07;	author landry;	state Exp;
branches;
next	1.24;

1.24
date	2012.10.22.21.18.59;	author landry;	state Exp;
branches;
next	1.23;

1.23
date	2012.09.26.17.44.56;	author landry;	state Exp;
branches;
next	1.22;

1.22
date	2012.05.16.07.16.13;	author landry;	state Exp;
branches;
next	1.21;

1.21
date	2012.04.16.21.10.06;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2012.04.16.10.08.43;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2012.03.10.10.25.27;	author landry;	state Exp;
branches;
next	1.18;

1.18
date	2011.12.24.07.47.23;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2011.10.13.06.53.30;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2011.08.16.07.49.16;	author landry;	state Exp;
branches;
next	1.15;

1.15
date	2011.05.02.19.01.10;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2011.03.14.18.57.22;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2011.03.12.12.51.25;	author landry;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.02.09.56.19;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2010.09.20.08.24.44;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2010.08.22.14.14.52;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2010.05.20.19.01.14;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2009.11.23.21.27.44;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2009.09.21.08.01.25;	author landry;	state Exp;
branches;
next	1.6;

1.6
date	2009.07.24.12.04.28;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.27.19.27.21;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.04.11.05.08;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.08.20.01.18;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2009.01.26.19.52.49;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2008.10.26.13.06.29;	author landry;	state Exp;
branches;
next	;


desc
@@


1.27
log
@Update to midori 0.5.6.

Upstream switched from waf to cmake (yay!) so rewrite patches. Fix
WANTLIB all around while here.
@
text
@$OpenBSD: patch-wscript,v 1.26 2013/05/29 23:10:16 landry Exp $

Fix paths to config files.

--- wscript.orig	Fri May 17 14:40:41 2013
+++ wscript	Wed May 29 18:30:55 2013
@@@@ -78,7 +78,7 @@@@ def rc_file(self, node):
     self.compiled_tasks.append (rctask)
 rc_file = extension ('.rc')(rc_file)
 Task.simple_task_type ('winrc', '${WINRC} -o${TGT} ${SRC}', color='BLUE',
-    before='cc cxx', shell=False)
+    before='cc cxx')
 
 def configure (conf):
     def option_checkfatal (option, desc):
@@@@ -469,7 +469,7 @@@@ def build (bld):
             'AUTHORS COPYING ChangeLog EXPAT README data/faq.html data/faq.css')
 
     # Install default configuration
-    bld.install_files ('${SYSCONFDIR}/xdg/' + APPNAME + '/', 'data/search')
+    bld.install_files ('${MDATADIR}/examples/' + APPNAME + '/', 'data/search')
 
     if bld.env['INTLTOOL']:
         obj = bld.new_task_gen ('intltool_po')
@@@@ -533,7 +533,7 @@@@ def build (bld):
             for extension in extensions:
                 source = 'data/extensions/' + extension +  '/config'
                 if os.path.exists (source):
-                    bld.install_files ('${SYSCONFDIR}/xdg/' + APPNAME + \
+                    bld.install_files ('${MDATADIR}/examples/' + APPNAME + \
                                        '/extensions/' + extension, source)
 
     if Options.commands['check'] or bld.env['tests']:
@


1.26
log
@Long awaited update to midori 0.5.2, now that webkit plugin listing code
has been fixed a while ago...
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.25 2013/03/08 14:25:07 landry Exp $
@


1.25
log
@Update to midori 0.4.8.

If you encounter SIGBUS upon entering the prefs, get in touch with me.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.24 2012/10/22 21:18:59 landry Exp $
d5 3
a7 3
--- wscript.orig	Wed Feb  6 00:28:05 2013
+++ wscript	Sun Mar  3 11:25:50 2013
@@@@ -82,7 +82,7 @@@@ def rc_file(self, node):
d16 1
a16 10
@@@@ -371,8 +371,6 @@@@ def configure (conf):
                 '-Winit-self -Wundef -Wdeclaration-after-statement '
                 '-Wmissing-format-attribute -Wnested-externs'.split ())
     conf.env.append_value ('CCFLAGS', '-Wno-unused-variable -Wno-comment'.split ())
-    if compiler == 'gcc':
-        conf.env.append_value ('CCFLAGS', '-Wno-unused-but-set-variable'.split ())
 
     if conf.env['UNIQUE_VERSION'] == '1.0.4':
         Utils.pprint ('RED', 'unique 1.0.4 found, this version is erroneous.')
@@@@ -470,7 +468,7 @@@@ def build (bld):
d25 1
a25 1
@@@@ -534,7 +532,7 @@@@ def build (bld):
@


1.24
log
@Patch out the check for zeitgeist to avoid midori picking it up if present.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.23 2012/09/26 17:44:56 landry Exp $
d5 3
a7 3
--- wscript.orig	Wed Sep 19 23:17:43 2012
+++ wscript	Mon Oct 22 23:15:43 2012
@@@@ -73,7 +73,7 @@@@ def rc_file(self, node):
d16 6
a21 3
@@@@ -237,7 +237,6 @@@@ def configure (conf):
         granite = 'no '
         conf.define ('GRANITE_VERSION', 'No')
d23 3
a25 5
-    check_pkg ('zeitgeist-1.0', '0.3.14', mandatory=False)
     conf.check (lib='m', mandatory=True)
     check_pkg ('gmodule-2.0', '2.8.0', False)
     check_pkg ('gthread-2.0', '2.8.0', False)
@@@@ -485,7 +484,7 @@@@ def build (bld):
d34 1
a34 1
@@@@ -554,7 +553,7 @@@@ def build (bld):
@


1.23
log
@Update to midori 0.4.7.

- add a gtk3 flavor.
- backport fix for urlbar c/p issue.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.22 2012/05/16 07:16:13 landry Exp $
d6 1
a6 1
+++ wscript	Wed Sep 26 18:32:03 2012
d16 9
a24 1
@@@@ -485,7 +485,7 @@@@ def build (bld):
d33 1
a33 1
@@@@ -554,7 +554,7 @@@@ def build (bld):
@


1.22
log
@Update to midori 0.4.6.
See http://mail.xfce.org/pipermail/xfce-announce/2012-May/000196.html
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.21 2012/04/16 21:10:06 landry Exp $
d5 2
a6 2
--- wscript.orig	Tue May 15 00:13:42 2012
+++ wscript	Tue May 15 17:12:44 2012
d16 1
a16 1
@@@@ -461,7 +461,7 @@@@ def build (bld):
d25 1
a25 1
@@@@ -533,7 +533,7 @@@@ def build (bld):
@


1.21
log
@Cherrypick a fix for libsoup version detections, from
http://git.xfce.org/apps/midori/commit/?id=c7c172f7ffc9316be5954c920654e1deb9f470b7
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.20 2012/04/16 10:08:43 landry Exp $
d5 2
a6 4
chunk 2 : fix libsoup detection defines
http://git.xfce.org/apps/midori/commit/?id=c7c172f7ffc9316be5954c920654e1deb9f470b7
--- wscript.orig	Sat Apr 14 21:17:35 2012
+++ wscript	Mon Apr 16 23:01:15 2012
d16 1
a16 16
@@@@ -260,11 +260,11 @@@@ def configure (conf):
     check_pkg ('libsoup-2.4', '2.27.90')
     conf.define ('LIBSOUP_VERSION', conf.check_cfg (modversion='libsoup-2.4'))
     if check_version (conf.env['LIBSOUP_VERSION'], 2, 29, 3):
-        conf.define ('LIBSOUP_2_29_3', 1)
+        conf.define ('HAVE_LIBSOUP_2_29_3', 1)
     if check_version (conf.env['LIBSOUP_VERSION'], 2, 29, 91):
-        conf.define ('LIBSOUP_2_29_91', 1)
+        conf.define ('HAVE_LIBSOUP_2_29_91', 1)
     if check_version (conf.env['LIBSOUP_VERSION'], 2, 37, 1):
-        conf.define ('LIBSOUP_2_37_1', 1)
+        conf.define ('HAVE_LIBSOUP_2_37_1', 1)
     check_pkg ('libxml-2.0', '2.6')
     check_pkg ('sqlite3', '3.0', True, var='SQLITE')
 
@@@@ -459,7 +459,7 @@@@ def build (bld):
d25 1
a25 1
@@@@ -531,7 +531,7 @@@@ def build (bld):
@


1.20
log
@Update to midori 0.4.5.

See http://mail.xfce.org/pipermail/xfce-announce/2012-April/000153.html
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.19 2012/03/10 10:25:27 landry Exp $
d5 2
d8 1
a8 1
+++ wscript	Sun Apr 15 11:43:17 2012
d18 15
@


1.19
log
@Update to midori 0.4.4.
See http://git.xfce.org/apps/midori/tree/ChangeLog for a list of
improvements.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.18 2011/12/24 07:47:23 landry Exp $
d5 2
a6 2
--- wscript.orig	Thu Mar  8 23:34:45 2012
+++ wscript	Fri Mar  9 09:38:12 2012
d16 1
a16 1
@@@@ -441,7 +441,7 @@@@ def build (bld):
d25 1
a25 1
@@@@ -513,7 +513,7 @@@@ def build (bld):
@


1.18
log
@Update to midori 0.4.3, see
http://git.xfce.org/apps/midori/tree/ChangeLog for a list of improvements.
Repair install of config files under $SYSCONFDIR/xdg/midori/
If it doesn't start after update, wipe .cache/midori.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.17 2011/10/13 06:53:30 jasper Exp $
d5 3
a7 3
--- wscript.orig	Sat Dec 17 23:47:28 2011
+++ wscript	Sat Dec 24 07:53:38 2011
@@@@ -70,7 +70,7 @@@@ def rc_file(self, node):
d16 1
a16 1
@@@@ -440,7 +440,7 @@@@ def build (bld):
d25 1
a25 1
@@@@ -512,7 +512,7 @@@@ def build (bld):
@


1.17
log
@- update to 0.4.1 (unbreak after recent webkit update)
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.16 2011/08/16 07:49:16 landry Exp $
d3 1
a3 1
We don't need those files installed..
d5 3
a7 3
--- wscript.orig	Mon Oct 10 00:41:47 2011
+++ wscript	Wed Oct 12 10:17:53 2011
@@@@ -68,7 +68,7 @@@@ def rc_file(self, node):
d16 1
a16 1
@@@@ -415,7 +415,7 @@@@ def build (bld):
d25 9
@


1.16
log
@Update to midori 0.4.0.
See http://mail.xfce.org/pipermail/xfce/2011-August/028993.html for
details.
@
text
@d1 2
a2 1
$OpenBSD: patch-wscript,v 1.15 2011/05/02 19:01:10 landry Exp $
d4 3
a6 2
--- wscript.orig	Tue Aug  2 00:06:36 2011
+++ wscript	Tue Aug  2 09:06:41 2011
d16 1
a16 1
@@@@ -401,7 +401,7 @@@@ def build (bld):
@


1.15
log
@Update to midori 0.3.5.
ok rpointel@@
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.14 2011/03/14 18:57:22 landry Exp $
d3 2
a4 2
--- wscript.orig	Mon May  2 02:06:21 2011
+++ wscript	Mon May  2 10:04:08 2011
d14 1
a14 1
@@@@ -408,7 +408,7 @@@@ def build (bld):
@


1.14
log
@Update to midori 0.3.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.13 2011/03/12 12:51:25 landry Exp $
d3 2
a4 2
--- wscript.orig	Sun Mar 13 23:03:35 2011
+++ wscript	Mon Mar 14 10:26:08 2011
d14 1
a14 1
@@@@ -407,7 +407,7 @@@@ def build (bld):
@


1.13
log
@Update to midori 0.3.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.12 2010/11/02 09:56:19 landry Exp $
d3 2
a4 2
--- wscript.orig	Mon Jan 31 02:04:53 2011
+++ wscript	Mon Jan 31 09:15:35 2011
d14 2
a15 1
@@@@ -417,12 +417,8 @@@@ def build (bld):
a16 6
     bld.add_group ()
 
-    if bld.env['docs']:
-        bld.install_files ('${DOCDIR}/', \
-            'AUTHORS COPYING ChangeLog EXPAT README')
-
d21 2
a22 2
     if bld.env['RST2HTML']:
         # FIXME: Build only if needed
@


1.12
log
@Update to midori 0.2.9, from Remi Pointel.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.11 2010/09/20 08:24:44 landry Exp $
d3 3
a5 3
--- wscript.orig        Sun Oct 31 23:20:48 2010
+++ wscript     Mon Nov  1 08:31:47 2010
@@@@ -68,7 +68,7 @@@@
d14 1
a14 1
@@@@ -416,12 +416,8 @@@@
d19 1
a19 1
-        bld.install_files ('${DOCDIR}/' + '/', \
a27 1

@


1.11
log
@Update to midori 0.2.8.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.10 2010/08/22 14:14:52 landry Exp $
d3 3
a5 3
--- wscript.orig	Sun Sep 19 23:22:41 2010
+++ wscript	Mon Sep 20 09:07:30 2010
@@@@ -68,7 +68,7 @@@@ def rc_file(self, node):
d14 1
a14 1
@@@@ -414,12 +414,8 @@@@ def build (bld):
d19 1
a19 1
-        bld.install_files ('${DOCDIR}/' + APPNAME + '/', \
d28 1
@


1.10
log
@Update to midori 0.2.7, diff from Remi Pointel (thanks!)
Few tweaks: PLIST sorting, convert to new LIB_DEPENDS style.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.9 2010/05/20 19:01:14 landry Exp $
d3 3
a5 3
--- wscript.orig	Mon Aug 16 21:31:14 2010
+++ wscript	Sun Aug 22 15:00:14 2010
@@@@ -67,7 +67,7 @@@@ def rc_file(self, node):
d14 1
a14 1
@@@@ -413,12 +413,8 @@@@ def build (bld):
@


1.9
log
@Update to midori 0.2.5, see
http://foo-projects.org/pipermail/xfce/2010-May/027108.html for list of
new features.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.8 2009/11/23 21:27:44 landry Exp $
d3 2
a4 2
--- wscript.orig	Sun May 16 20:32:33 2010
+++ wscript	Thu May 20 20:12:21 2010
d14 1
a14 1
@@@@ -449,12 +449,8 @@@@ def build (bld):
@


1.8
log
@Update to midori 0.2.1, which i somehow forgot in my tree..
Update deps on newer webkit/libsoup, and drop libidn dep which is now
provided by libsoup.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.7 2009/09/21 08:01:25 landry Exp $
d3 3
a5 3
--- wscript.orig	Fri Nov 13 23:31:25 2009
+++ wscript	Mon Nov 23 22:07:02 2009
@@@@ -63,7 +63,7 @@@@ def rc_file(self, node):
d14 1
a14 1
@@@@ -384,12 +384,8 @@@@ def build (bld):
@


1.7
log
@Update to midori 0.1.10, see
http://foo-projects.org/pipermail/xfce/2009-September/025913.html for
details. tested by benoit@@ & msf@@, ok msf@@
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.6 2009/07/24 12:04:28 landry Exp $
d3 2
a4 2
--- wscript.orig	Sat Sep 12 00:09:38 2009
+++ wscript	Sun Sep 13 13:55:02 2009
a5 1
     rctask.set_outputs (node.change_ext ('.rc.o'))
d7 1
d14 1
a14 1
@@@@ -373,12 +373,8 @@@@ def build (bld):
d20 1
a20 1
-            'AUTHORS ChangeLog COPYING EXPAT README TRANSLATE')
@


1.6
log
@Update to midori 0.1.8.
See http://foo-projects.org/pipermail/xfce/2009-July/025642.html for details.
Tested by Laurent Ghigonis, seems okay to msf@@
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.5 2009/04/27 19:27:21 landry Exp $
d3 2
a4 2
--- wscript.orig	Mon Jul 20 23:35:01 2009
+++ wscript	Tue Jul 21 22:14:56 2009
d14 1
a14 1
@@@@ -372,12 +372,8 @@@@ def build (bld):
@


1.5
log
@Update to midori 0.1.6, and explicitely depend on webkit 1.1.5v0.

ok ajacoutot@@ phessler@@
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.4 2009/04/04 11:05:08 landry Exp $
d3 8
a10 5
--- wscript.orig	Sun Apr 19 22:16:33 2009
+++ wscript	Thu Apr 23 21:42:19 2009
@@@@ -267,12 +267,8 @@@@ def build (bld):
     if option_enabled ('addons'):
         bld.add_subdirs ('extensions')
d12 7
a18 1
-    if option_enabled ('docs'):
d24 1
a24 1
+    bld.install_files ('${DATADIR}/examples/' + APPNAME + '/', 'data/search')
@


1.4
log
@Update to midori 0.1.5, which will make a lot of ppl happy as with last
webkit & libsoup updates it now supports cookies and works fine with gmail.
While here, remove the https notice in MESSAGE, as https pages works
fine now.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.3 2009/03/08 20:01:18 landry Exp $
d3 3
a5 3
--- wscript.orig	Sun Mar 22 22:49:18 2009
+++ wscript	Sat Apr  4 12:45:44 2009
@@@@ -268,12 +268,8 @@@@ def build (bld):
@


1.3
log
@Update to midori 0.1.4.
@
text
@d1 1
a1 1
$OpenBSD: patch-wscript,v 1.2 2009/01/26 19:52:49 landry Exp $
d3 3
a5 3
--- wscript.orig	Mon Feb 23 14:08:30 2009
+++ wscript	Mon Feb 23 14:08:50 2009
@@@@ -303,12 +303,8 @@@@ def build (bld):
@


1.2
log
@Update to midori 0.1.2. Enable gio support, now uses libsoup,ssl for some
http/https access, and uses waf 1.5.2 update i just commited.
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- wscript.orig	Mon Jan 19 00:18:58 2009
+++ wscript	Mon Jan 19 00:19:05 2009
@@@@ -267,10 +267,6 @@@@ def build (bld):
d13 4
a18 1
         if not os.access (blddir, os.F_OK):
@


1.1
log
@Update to midori 0.1.0.
Uses x11/xfce4 (it's now an official Xfce goodie) and devel/waf MODULES.
Enable history support through sqlite3, disable gio/gvfs for now.
Enable libunique support now that it's finally in-tree and working.

ok phessler@@
@
text
@d3 5
a7 3
--- wscript.orig	Sat Oct 25 13:18:15 2008
+++ wscript	Sat Oct 25 13:18:32 2008
@@@@ -175,8 +175,6 @@@@ def build (bld):
d9 3
a11 3
     bld.add_subdirs ('katze midori icons')
 
-    install_files ('DOCDIR', '/midori/', 'AUTHORS ChangeLog COPYING README')
d13 1
a13 1
     if bld.env ()['RST2HTML']:
@

