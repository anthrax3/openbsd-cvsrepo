head	1.15;
access;
symbols
	OPENBSD_6_1:1.15.0.2
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.12.0.4
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.2
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.11.0.10
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.6
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.4
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	jeremy_2011-Jul-05:1.1.1.1
	jeremy:1.1.1;
locks; strict;
comment	@# @;


1.15
date	2017.02.23.17.48.35;	author jca;	state Exp;
branches;
next	1.14;
commitid	lTq3agrecJnikZzC;

1.14
date	2017.02.23.17.47.16;	author jca;	state Exp;
branches;
next	1.13;
commitid	hSqSj0tmQklMGxdO;

1.13
date	2016.11.04.21.46.42;	author jeremy;	state Exp;
branches;
next	1.12;
commitid	3wLkfra1pofB72jX;

1.12
date	2016.01.03.16.42.32;	author jeremy;	state Exp;
branches;
next	1.11;
commitid	9GQpWojS4iOiLaAN;

1.11
date	2014.01.19.20.43.34;	author jeremy;	state Exp;
branches;
next	1.10;

1.10
date	2014.01.15.02.13.58;	author jeremy;	state Exp;
branches;
next	1.9;

1.9
date	2014.01.11.22.51.03;	author jeremy;	state Exp;
branches;
next	1.8;

1.8
date	2013.10.26.23.55.38;	author jeremy;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.11.11.44.49;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2013.01.09.17.38.52;	author jeremy;	state Exp;
branches;
next	1.5;

1.5
date	2012.10.13.10.48.40;	author jeremy;	state Exp;
branches;
next	1.4;

1.4
date	2012.09.23.16.57.36;	author jeremy;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.18.00.04.19;	author jeremy;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.16.12.00.09;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.06.01.14.09;	author jeremy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.07.06.01.14.09;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Tweak comment
@
text
@# $OpenBSD: Makefile,v 1.13 2016/11/04 21:46:42 jeremy Exp $

COMMENT =	real-time stats toolkit for Rack HTTP servers

DISTNAME =	raindrops-0.17.0
CATEGORIES =	www

MAINTAINER =	Jeremy Evans <jeremy@@openbsd.org>

# LGPLv2.1/LGPLv3
PERMIT_PACKAGE_CDROM =	Yes

MODULES =	lang/ruby

CONFIGURE_STYLE =	ruby gem ext

# XXX fallback if arch doesn't provide atomic builtins
BUILD_DEPENDS +=	libatomic_ops-*:devel/boehm-gc,-atomic

TEST_DEPENDS =		devel/gmake \
			www/ruby-rack,${MODRUBY_FLAVOR} \
			www/ruby-unicorn,${MODRUBY_FLAVOR} \
			${FULLPKGNAME}:${BUILD_PKGPATH}

do-test:
	cd ${WRKSRC} && ${SETENV} RUBYOPT=-rubygems \
		RUBYLIB=${WRKSRC}/lib gmake test RUBY=${RUBY}

.include <bsd.port.mk>
@


1.14
log
@Missing test dep

ok jeremy (maintainer)
@
text
@d17 1
a17 1
# XXX only actually required for gcc2/3 arch
@


1.13
log
@Update to raindrops 0.17.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/01/03 16:42:32 jeremy Exp $
d20 2
a21 1
TEST_DEPENDS =	devel/gmake \
@


1.12
log
@Update to raindrops 0.15.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/01/19 20:43:34 jeremy Exp $
d5 1
a5 1
DISTNAME =	raindrops-0.15.0
@


1.11
log
@Fix the permissions on the ChangeLog and NEWS files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/01/15 02:13:58 jeremy Exp $
d5 1
a5 2
DISTNAME =	raindrops-0.10.0
REVISION =	4
a22 3

post-extract:
	chmod 644 ${WRKSRC}/{NEWS,ChangeLog}
@


1.10
log
@Bump ruby gem ext ports after change to WANTLIB in ruby.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/01/11 22:51:03 jeremy Exp $
d6 1
a6 1
REVISION =	3
d24 3
@


1.9
log
@Remove extension source directory from package so that ruby21 FLAVOR
packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/10/26 23:55:38 jeremy Exp $
d6 1
a6 1
REVISION =	2
@


1.8
log
@Bump all ruby gem ports supporting rbx FLAVOR due to change to rubinius
gem directory when upgrading rubinius from 1.2.4 to 2.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/11 11:44:49 espie Exp $
d6 1
a6 1
REVISION =	1
@


1.7
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/01/09 17:38:52 jeremy Exp $
d6 1
a6 1
REVISION =	0
@


1.6
log
@Revision bump ruby C extension ports after addition of pthread to
WANTLIB.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/10/13 10:48:40 jeremy Exp $
a12 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =	Yes
d21 1
a21 1
REGRESS_DEPENDS =	devel/gmake \
d25 1
a25 1
do-regress:
@


1.5
log
@Update to raindrops 0.10.0.  Remove a patch accepted upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/09/23 16:57:36 jeremy Exp $
d6 1
@


1.4
log
@Bump revisions for ruby gem/extconf ports after the switch to ruby 1.9
by default, since the ruby 1.8 version now has a ruby18 explicit FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/11/18 00:04:19 jeremy Exp $
d5 1
a5 2
DISTNAME =	raindrops-0.8.0
REVISION =	0
@


1.3
log
@Update to raindrops 0.8.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/09/16 12:00:09 espie Exp $
d6 1
@


1.2
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/07/06 01:14:09 jeremy Exp $
d5 1
a5 2
DISTNAME =	raindrops-0.7.0
REVISION=	0
d24 1
a24 1
			www/ruby-rack,${MODRUBY_FLAVOR} \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/05/11 23:40:47 jeremy Exp $
d6 1
@


1.1.1.1
log
@Import ruby-raindrops 0.7.0.

Raindrops is a real-time stats toolkit to show statistics for Rack HTTP
servers. It is designed for preforking servers such as Rainbows! and
Unicorn, but should support any Rack HTTP server under Ruby 1.9, 1.8 and
Rubinius on platforms supporting POSIX shared memory. It may also be
used as a generic scoreboard for sharing atomic counters across multiple
processes.

OK sthen@@
@
text
@@
