head	1.5;
access;
symbols
	OPENBSD_6_1:1.3.0.2
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2017.07.07.10.17.28;	author fcambus;	state Exp;
branches;
next	1.4;
commitid	VOfmRqIZH881xy46;

1.4
date	2017.04.30.12.08.32;	author fcambus;	state Exp;
branches;
next	1.3;
commitid	uAdjEBdGQR9BP6wL;

1.3
date	2016.11.25.15.58.55;	author fcambus;	state Exp;
branches;
next	1.2;
commitid	ie8FKaji8Bdqmxk3;

1.2
date	2016.09.04.13.35.02;	author fcambus;	state Exp;
branches;
next	1.1;
commitid	6PUflaF4UlBNS5VW;

1.1
date	2016.04.15.03.21.51;	author tb;	state Exp;
branches;
next	;
commitid	b00Egp9kKFxMEkyS;


desc
@@


1.5
log
@Avoid parsing DOWNLOADER and PRINTER directives from lynx.cfg.

As a side note, there is no need to explicitely disable parsing UPLOADER
directives because we --disable-dired at configure time, nor EXTERNAL
directives as we do not build with --enable-externs.

OK mestre@@, tb@@
@
text
@$OpenBSD: patch-src_LYReadCFG_c,v 1.4 2017/04/30 12:08:32 fcambus Exp $
Index: src/LYReadCFG.c
--- src/LYReadCFG.c.orig
+++ src/LYReadCFG.c
@@@@ -1508,7 +1508,6 @@@@ static Config_Type Config_Table [] =
      PARSE_FUN(RC_DISPLAY_CHARSET_CHOICE, parse_display_charset_choice),
 #endif
      PARSE_SET(RC_DONT_WRAP_PRE,        dont_wrap_pre),
-     PARSE_ADD(RC_DOWNLOADER,           downloaders),
      PARSE_SET(RC_EMACS_KEYS_ALWAYS_ON, emacs_keys),
      PARSE_FUN(RC_ENABLE_LYNXRC,        enable_lynxrc),
      PARSE_SET(RC_ENABLE_SCROLLBACK,    enable_scrollback),
@@@@ -1537,7 +1536,6 @@@@ static Config_Type Config_Table [] =
 #endif
      PARSE_Env(RC_FTP_PROXY,            0),
      PARSE_STR(RC_GLOBAL_EXTENSION_MAP, global_extension_map),
-     PARSE_STR(RC_GLOBAL_MAILCAP,       global_type_map),
      PARSE_Env(RC_GOPHER_PROXY,         0),
      PARSE_SET(RC_GOTOBUFFER,           goto_buffer),
      PARSE_PRG(RC_GZIP_PATH,            ppGZIP),
@@@@ -1655,7 +1653,6 @@@@ static Config_Type Config_Table [] =
      PARSE_SET(RC_PERSISTENT_COOKIES,   persistent_cookies),
 #endif /* USE_PERSISTENT_COOKIES */
      PARSE_STR(RC_PERSONAL_EXTENSION_MAP, personal_extension_map),
-     PARSE_STR(RC_PERSONAL_MAILCAP,     personal_type_map),
      PARSE_LST(RC_POSITIONABLE_EDITOR,  positionable_editor),
      PARSE_STR(RC_PREFERRED_CHARSET,    pref_charset),
      PARSE_ENU(RC_PREFERRED_ENCODING,   LYAcceptEncoding, tbl_preferred_encoding),
@@@@ -1668,7 +1665,6 @@@@ static Config_Type Config_Table [] =
      PARSE_FUN(RC_PRETTYSRC_SPEC,       psrcspec_fun),
      PARSE_SET(RC_PRETTYSRC_VIEW_NO_ANCHOR_NUM, psrcview_no_anchor_numbering),
 #endif
-     PARSE_ADD(RC_PRINTER,              printers),
      PARSE_SET(RC_QUIT_DEFAULT_YES,     LYQuitDefaultYes),
      PARSE_INT(RC_READ_TIMEOUT,         reading_timeout),
      PARSE_FUN(RC_REFERER_WITH_QUERY,   referer_with_query_fun),
@@@@ -1767,11 +1763,9 @@@@ static Config_Type Config_Table [] =
      PARSE_PRG(RC_UUDECODE_PATH,        ppUUDECODE),
      PARSE_SET(RC_VERBOSE_IMAGES,       verbose_img),
      PARSE_SET(RC_VI_KEYS_ALWAYS_ON,    vi_keys),
-     PARSE_FUN(RC_VIEWER,               viewer_fun),
      PARSE_Env(RC_WAIS_PROXY,           0),
      PARSE_SET(RC_WAIT_VIEWER_TERMINATION, wait_viewer_termination),
      PARSE_SET(RC_WITH_BACKSPACES,      with_backspaces),
-     PARSE_STR(RC_XLOADIMAGE_COMMAND,   XLoadImageCommand),
      PARSE_SET(RC_XHTML_PARSING,        LYxhtml_parsing),
      PARSE_PRG(RC_ZCAT_PATH,            ppZCAT),
      PARSE_PRG(RC_ZIP_PATH,             ppZIP),
@


1.4
log
@Update lynx to 2.8.9pl13.

While there, amend our lynx.cfg patch to switch default site to HTTPS.
@
text
@d1 13
a13 4
$OpenBSD: patch-src_LYReadCFG_c,v 1.3 2016/11/25 15:58:55 fcambus Exp $
--- src/LYReadCFG.c.orig	Thu Nov 24 16:35:29 2016
+++ src/LYReadCFG.c	Sat Apr 29 11:09:38 2017
@@@@ -1537,7 +1537,6 @@@@ static Config_Type Config_Table [] =
d21 1
a21 1
@@@@ -1655,7 +1654,6 @@@@ static Config_Type Config_Table [] =
d29 9
a37 1
@@@@ -1766,11 +1764,9 @@@@ static Config_Type Config_Table [] =
@


1.3
log
@Update lynx to 2.8.9pl11.

OK sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_LYReadCFG_c,v 1.2 2016/09/04 13:35:02 fcambus Exp $
--- src/LYReadCFG.c.orig	Wed Oct 12 01:44:06 2016
+++ src/LYReadCFG.c	Thu Nov 17 09:58:04 2016
@@@@ -1549,7 +1549,6 @@@@ static Config_Type Config_Table [] =
d12 1
a12 1
@@@@ -1667,7 +1666,6 @@@@ static Config_Type Config_Table [] =
d20 1
a20 1
@@@@ -1778,11 +1776,9 @@@@ static Config_Type Config_Table [] =
@


1.2
log
@Disable spawning an external viewer. On top of disabling the hardcoded
XLOADIMAGE_COMMAND value in userdefs.h, we also remove the possibility
of setting a custom value in lynx.cfg.

The ability to assign MIME types to external viewers via configuration
file (via the VIEWER variables) is also disabled.

OK tb@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_LYReadCFG_c,v 1.1 2016/04/15 03:21:51 tb Exp $
--- src/LYReadCFG.c.orig	Fri Dec 18 02:58:34 2015
+++ src/LYReadCFG.c	Sat Sep  3 22:22:14 2016
@@@@ -1544,7 +1544,6 @@@@ static Config_Type Config_Table [] =
d12 1
a12 1
@@@@ -1662,7 +1661,6 @@@@ static Config_Type Config_Table [] =
d20 1
a20 1
@@@@ -1773,11 +1771,9 @@@@ static Config_Type Config_Table [] =
@


1.1
log
@Help lynx to live up to its no "proc" and no "exec" promises:

sthen@@ found that the mailcap mechanism can spawn a viewer. Rename
the hardcoded /etc/mailcap and ~/.mailcap files to /dev/null and
disable the ability to undo that via a config file. lynx copes by
offering to download files with MIME types it can't handle itself.

fcambus found that "lynx index.html" + typing e spawns an editor.
Hardcode "no_editor = TRUE" before pledge() and tweak manpage.

Most of this is by fcambus (MAINTAINER).
/dev/null bit from me, based on a hint from sthen@@.

ok sthen@@ on previous version
@
text
@d1 3
a3 3
$OpenBSD$
--- src/LYReadCFG.c.orig	Wed Apr 13 16:48:57 2016
+++ src/LYReadCFG.c	Wed Apr 13 16:49:39 2016
d20 12
@

