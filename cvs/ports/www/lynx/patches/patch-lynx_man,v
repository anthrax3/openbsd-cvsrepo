head	1.3;
access;
symbols
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2016.11.25.15.58.55;	author fcambus;	state Exp;
branches;
next	1.2;
commitid	ie8FKaji8Bdqmxk3;

1.2
date	2016.04.15.03.21.51;	author tb;	state Exp;
branches;
next	1.1;
commitid	b00Egp9kKFxMEkyS;

1.1
date	2016.03.12.14.29.13;	author tb;	state Exp;
branches;
next	;
commitid	CsSxxu6ramloxupx;


desc
@@


1.3
log
@Update lynx to 2.8.9pl11.

OK sthen@@
@
text
@$OpenBSD: patch-lynx_man,v 1.2 2016/04/15 03:21:51 tb Exp $
--- lynx.man.orig	Fri Oct 14 10:59:24 2016
+++ lynx.man	Thu Nov 17 09:58:04 2016
@@@@ -590,6 +590,22 @@@@ flushes the cache on a proxy server
 allows a list of services to be disabled selectively.
 Dashes and underscores in option names can be intermixed.
 The following list is printed if no options are specified.
+.IP
+On OpenBSD the following restrictions are always enabled:
+\fBeditor\fR,
+\fBexec\fR,
+\fBmail\fR,
+and
+\fBshell\fR.
+Additionally,
+\fBbibp-urls\fR,
+\fBdired\fR,
+\fBfinger\fR,
+\fBrlogin\fR,
+and
+\fBtelnet \fR
+features have been disabled entirely.
+.IP
 .RS
 .TP 3
 .B all
@


1.2
log
@Help lynx to live up to its no "proc" and no "exec" promises:

sthen@@ found that the mailcap mechanism can spawn a viewer. Rename
the hardcoded /etc/mailcap and ~/.mailcap files to /dev/null and
disable the ability to undo that via a config file. lynx copes by
offering to download files with MIME types it can't handle itself.

fcambus found that "lynx index.html" + typing e spawns an editor.
Hardcode "no_editor = TRUE" before pledge() and tweak manpage.

Most of this is by fcambus (MAINTAINER).
/dev/null bit from me, based on a hint from sthen@@.

ok sthen@@ on previous version
@
text
@d1 4
a4 4
$OpenBSD: patch-lynx_man,v 1.1 2016/03/12 14:29:13 tb Exp $
--- lynx.man.orig	Thu Oct  8 02:19:45 2015
+++ lynx.man	Wed Apr 13 13:03:58 2016
@@@@ -593,6 +593,22 @@@@ flushes the cache on a proxy server
@


1.1
log
@Add pledge(2) support to lynx.

The heavy lifting and final touches were done by Frederic Cambus; this
version includes earlier patches, ideas and tweaks from daniel@@ and me.

ok daniel@@, patch and notes from Frederic Cambus (MAINTAINER)

Notes :
-------
The idea is to avoid using otherwise required 'getpw', 'proc', 'exec'
promises entirely. We achieve this by disabling a couple of features,
mostly removing obsolete stuff. While we are at it, we attempt to pave
the way to be able to remove even more promises in the future, and
reduce potential attack vectors.

We disable them either at compile time :

--disable-bibp-urls
--disable-dired
--disable-finger

Or by hardcoding boolean values to disable the features just before
calling pledge and entering main program loop :

no_exec = TRUE;
no_mail = TRUE;
no_shell = TRUE;

rlogin_ok = FALSE;
telnet_ok = FALSE;

Manpage has been updated to mention those restrictions.

Also, CFLAGS="-DNOUSERS" was added in the Makefile to disable getpwnam
and getpwuid.
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
+++ lynx.man	Thu Feb  4 12:37:28 2016
@@@@ -593,6 +593,21 @@@@ flushes the cache on a proxy server
d10 1
@

