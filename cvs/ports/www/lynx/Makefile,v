head	1.36;
access;
symbols
	OPENBSD_6_1:1.31.0.2
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.18.0.4
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.13.0.2
	OPENBSD_5_6_BASE:1.13
	OPENBSD_2_6:1.10.0.8
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.10.0.6
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.10.0.4
	OPENBSD_2_4_BASE:1.10
	OPENBSD_2_3:1.10.0.2
	OPENBSD_2_3_BASE:1.10
	gene-1-1:1.1.1.1
	gene:1.1.1;
locks; strict;
comment	@# @;


1.36
date	2017.07.28.17.05.29;	author fcambus;	state Exp;
branches;
next	1.35;
commitid	Cqv3UH9O0ivHuHYw;

1.35
date	2017.07.07.10.17.28;	author fcambus;	state Exp;
branches;
next	1.34;
commitid	VOfmRqIZH881xy46;

1.34
date	2017.07.05.22.04.11;	author fcambus;	state Exp;
branches;
next	1.33;
commitid	cdan35MiYR7SeKAH;

1.33
date	2017.05.13.10.16.05;	author fcambus;	state Exp;
branches;
next	1.32;
commitid	f9uZXJF5VXr0wDqh;

1.32
date	2017.04.30.12.08.32;	author fcambus;	state Exp;
branches;
next	1.31;
commitid	uAdjEBdGQR9BP6wL;

1.31
date	2016.11.25.15.58.55;	author fcambus;	state Exp;
branches;
next	1.30;
commitid	ie8FKaji8Bdqmxk3;

1.30
date	2016.09.24.15.50.36;	author fcambus;	state Exp;
branches;
next	1.29;
commitid	dLJxyJKLRmjw0Y5C;

1.29
date	2016.09.22.12.57.18;	author fcambus;	state Exp;
branches;
next	1.28;
commitid	mgPOgZNo5YzYtJy2;

1.28
date	2016.09.04.13.35.02;	author fcambus;	state Exp;
branches;
next	1.27;
commitid	6PUflaF4UlBNS5VW;

1.27
date	2016.05.17.00.08.44;	author sthen;	state Exp;
branches;
next	1.26;
commitid	mlCyo790bbdLPjuR;

1.26
date	2016.04.22.22.21.56;	author sthen;	state Exp;
branches;
next	1.25;
commitid	h6VfcsAUlxnkLECn;

1.25
date	2016.04.15.03.21.51;	author tb;	state Exp;
branches;
next	1.24;
commitid	b00Egp9kKFxMEkyS;

1.24
date	2016.03.12.14.29.13;	author tb;	state Exp;
branches;
next	1.23;
commitid	CsSxxu6ramloxupx;

1.23
date	2016.02.27.22.46.10;	author juanfra;	state Exp;
branches;
next	1.22;
commitid	M7Zn0VccmpwsnCbp;

1.22
date	2016.01.14.10.45.07;	author dcoppa;	state Exp;
branches;
next	1.21;
commitid	7QryOqggINNPk75K;

1.21
date	2016.01.12.16.46.29;	author dcoppa;	state Exp;
branches;
next	1.20;
commitid	AQSb653rBqs3JsQc;

1.20
date	2016.01.12.16.05.54;	author dcoppa;	state Exp;
branches;
next	1.19;
commitid	GSZ4RmSbpIt5OCtx;

1.19
date	2015.08.25.13.18.28;	author sthen;	state Exp;
branches;
next	1.18;
commitid	ezNehs3ayqMPx5Ri;

1.18
date	2015.05.07.19.40.43;	author bcallah;	state Exp;
branches
	1.18.4.1;
next	1.17;
commitid	rZEL2GshCkh725e2;

1.17
date	2015.04.18.05.00.05;	author bcallah;	state Exp;
branches;
next	1.16;
commitid	Uw0C5D4xDavOgACT;

1.16
date	2015.01.27.21.16.56;	author bcallah;	state Exp;
branches;
next	1.15;
commitid	pkZyFsvVb0rucKxn;

1.15
date	2015.01.15.01.15.11;	author daniel;	state Exp;
branches;
next	1.14;
commitid	CudNP1n2ZLLCMvNn;

1.14
date	2014.12.26.16.10.52;	author bcallah;	state Exp;
branches;
next	1.13;
commitid	NSiuKIHU25c7G3Lw;

1.13
date	2014.07.21.07.18.07;	author landry;	state Exp;
branches;
next	1.12;
commitid	yo6Ufazw3AYjhnBx;

1.12
date	2014.07.17.12.15.21;	author bcallah;	state Exp;
branches;
next	1.11;
commitid	XpUNCf85ck7vE7BE;

1.11
date	99.10.31.20.53.55;	author brad;	state dead;
branches;
next	1.10;

1.10
date	98.03.12.07.48.28;	author marc;	state Exp;
branches;
next	1.9;

1.9
date	98.01.19.21.10.42;	author gene;	state Exp;
branches;
next	1.8;

1.8
date	98.01.12.17.22.51;	author gene;	state Exp;
branches;
next	1.7;

1.7
date	97.12.29.21.42.43;	author martin;	state Exp;
branches;
next	1.6;

1.6
date	97.12.18.17.52.05;	author gene;	state Exp;
branches;
next	1.5;

1.5
date	97.11.30.13.22.04;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	97.11.23.23.27.14;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	97.11.23.22.34.41;	author gene;	state Exp;
branches;
next	1.2;

1.2
date	97.11.19.01.07.58;	author joey;	state Exp;
branches;
next	1.1;

1.1
date	97.11.18.02.25.41;	author gene;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.18.02.25.41;	author gene;	state Exp;
branches;
next	;

1.18.4.1
date	2016.02.27.22.40.51;	author juanfra;	state Exp;
branches;
next	;
commitid	uJZRewSEMbEsxUzs;


desc
@@


1.36
log
@Update lynx to 2.8.9pl16.
@
text
@# $OpenBSD: Makefile,v 1.35 2017/07/07 10:17:28 fcambus Exp $

V =		2.8.9
PL =		16
COMMENT =	text web browser
DISTNAME =	lynx${V}dev.${PL}
PKGNAME =	lynx-${V}pl${PL}
EXTRACT_SUFX =	.tar.bz2
CATEGORIES =	www net

HOMEPAGE =	http://lynx.invisible-island.net/

MAINTAINER =	Frederic Cambus <fcambus@@openbsd.org>

# GPLv2 only
PERMIT_PACKAGE_CDROM =	Yes

# uses pledge()
WANTLIB +=	c crypto ncurses ssl z

MASTER_SITES =	http://invisible-mirror.net/archives/lynx/tarballs/ \
		ftp://invisible-island.net/lynx/tarballs/

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS =	--datarootdir="${PREFIX}/share/doc/lynx" \
			--disable-idna \
			--disable-nls \
			--disable-bibp-urls \
			--disable-dired \
			--disable-finger \
			--enable-default-colors \
			--enable-ipv6 \
			--enable-widec \
			--with-ssl=/usr \
			--with-zlib \
			--without-bzlib

# This disables most calls to getpw*(3) so we can avoid pledge "getpw".
CONFIGURE_ENV +=	CFLAGS="-DNOUSERS"

# Prevent accepting bzip2 compressed HTML to avoid spawning processes.
CONFIGURE_ENV +=	ac_cv_path_BZIP2=none

MAKE_FILE =	makefile

FAKE_FLAGS =	SYSCONFDIR="${DESTDIR}${PREFIX}/share/examples/lynx"
INSTALL_TARGET =	install install-help install-doc

NO_TEST =	Yes

.include <bsd.port.mk>
@


1.35
log
@Avoid parsing DOWNLOADER and PRINTER directives from lynx.cfg.

As a side note, there is no need to explicitely disable parsing UPLOADER
directives because we --disable-dired at configure time, nor EXTERNAL
directives as we do not build with --enable-externs.

OK mestre@@, tb@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2017/07/05 22:04:11 fcambus Exp $
d4 1
a4 1
PL =		15
a7 1
REVISION =	0
@


1.34
log
@Update lynx to 2.8.9pl15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2017/05/13 10:16:05 fcambus Exp $
d8 1
@


1.33
log
@Update lynx to 2.8.9pl14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2017/04/30 12:08:32 fcambus Exp $
d4 1
a4 1
PL =		14
@


1.32
log
@Update lynx to 2.8.9pl13.

While there, amend our lynx.cfg patch to switch default site to HTTPS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/11/25 15:58:55 fcambus Exp $
d4 1
a4 1
PL =		13
@


1.31
log
@Update lynx to 2.8.9pl11.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/09/24 15:50:36 fcambus Exp $
d4 1
a4 1
PL =		11
@


1.30
log
@Remove the bzip2 dependency from Lynx. We were previously linking
against bzlib so the library would be used instead of the bzip2 binary.

We now disable bzip2 detection at the configure level (thanks to sthen@@
for the pointers), which prevents accepting bzip2 compressed HTML and
thus avoid spawning processes.

OK tb@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/09/22 12:57:18 fcambus Exp $
d4 1
a4 1
PL =		9
a7 1
REVISION =	2
@


1.29
log
@Update my mail address
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/09/04 13:35:02 fcambus Exp $
d8 1
a8 1
REVISION =	1
d20 1
a20 1
WANTLIB += bz2 c crypto ncurses ssl z
a24 2
LIB_DEPENDS =	archivers/bzip2

d37 1
a37 1
			--with-bzlib
d40 4
a43 1
CONFIGURE_ENV =	CFLAGS="-DNOUSERS"
@


1.28
log
@Disable spawning an external viewer. On top of disabling the hardcoded
XLOADIMAGE_COMMAND value in userdefs.h, we also remove the possibility
of setting a custom value in lynx.cfg.

The ability to assign MIME types to external viewers via configuration
file (via the VIEWER variables) is also disabled.

OK tb@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/05/17 00:08:44 sthen Exp $
d8 1
a8 1
REVISION =	0
d14 1
a14 1
MAINTAINER =	Frederic Cambus <fred@@statdns.com>
@


1.27
log
@update to lynx2.8.9dev.9, from fcambus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/04/22 22:21:56 sthen Exp $
d8 1
@


1.26
log
@Link lynx with bzlib, to avoid an attempt to exec() to handle bzip2-
compressed http transfers. From Frederic Cambus (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/04/15 03:21:51 tb Exp $
d4 1
a4 1
PL =		8
a7 1
REVISION =	4
d21 2
a22 3
MASTER_SITES =	http://lynx.invisible-island.net/current/ \
		http://invisible-mirror.net/archives/lynx/tarballs/ \
		http://invisible-mirror.net/archives/lynx/patches/
@


1.25
log
@Help lynx to live up to its no "proc" and no "exec" promises:

sthen@@ found that the mailcap mechanism can spawn a viewer. Rename
the hardcoded /etc/mailcap and ~/.mailcap files to /dev/null and
disable the ability to undo that via a config file. lynx copes by
offering to download files with MIME types it can't handle itself.

fcambus found that "lynx index.html" + typing e spawns an editor.
Hardcode "no_editor = TRUE" before pledge() and tweak manpage.

Most of this is by fcambus (MAINTAINER).
/dev/null bit from me, based on a hint from sthen@@.

ok sthen@@ on previous version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/03/12 14:29:13 tb Exp $
d8 1
a8 1
REVISION =	3
d20 1
a20 1
WANTLIB += c crypto ncurses ssl z
d26 2
d39 2
a40 1
			--with-zlib
@


1.24
log
@Add pledge(2) support to lynx.

The heavy lifting and final touches were done by Frederic Cambus; this
version includes earlier patches, ideas and tweaks from daniel@@ and me.

ok daniel@@, patch and notes from Frederic Cambus (MAINTAINER)

Notes :
-------
The idea is to avoid using otherwise required 'getpw', 'proc', 'exec'
promises entirely. We achieve this by disabling a couple of features,
mostly removing obsolete stuff. While we are at it, we attempt to pave
the way to be able to remove even more promises in the future, and
reduce potential attack vectors.

We disable them either at compile time :

--disable-bibp-urls
--disable-dired
--disable-finger

Or by hardcoding boolean values to disable the features just before
calling pledge and entering main program loop :

no_exec = TRUE;
no_mail = TRUE;
no_shell = TRUE;

rlogin_ok = FALSE;
telnet_ok = FALSE;

Manpage has been updated to mention those restrictions.

Also, CFLAGS="-DNOUSERS" was added in the Makefile to disable getpwnam
and getpwuid.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/02/27 22:46:10 juanfra Exp $
d8 1
a8 1
REVISION =	2
@


1.23
log
@Update MASTER_SITES. Reported by Adam Jensen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/01/14 10:45:07 dcoppa Exp $
d8 1
a8 1
REVISION =	1
d19 1
d30 3
d38 3
@


1.22
log
@
Tweak COMMENT

Suggested by naddy@@
From maintainer Frederic Cambus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/01/12 16:46:29 dcoppa Exp $
d21 3
a23 1
MASTER_SITES =	http://invisible-mirror.net/archives/lynx/tarballs/
@


1.21
log
@
Add trailing slash to ${HOMEPAGE}

pointed out by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/01/12 16:05:54 dcoppa Exp $
d5 1
a5 1
COMMENT =	console Internet browser
d8 1
a8 1
REVISION =	0
@


1.20
log
@
Update to lynx-2.8.9pl8

From new maintainer Frederic Cambus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/08/25 13:18:28 sthen Exp $
d8 1
d12 1
a12 1
HOMEPAGE =	http://lynx.invisible-island.net
@


1.19
log
@remove bcallah as maintainer of his ports, at his request
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/05/07 19:40:43 bcallah Exp $
d4 1
a4 1
PL =		6
a9 1
REVISION =	0
d11 3
a13 1
HOMEPAGE =	http://lynx.isc.org/
d20 1
a20 1
MASTER_SITES =	http://lynx.isc.org/current/
d26 1
a37 1
WRKDIST =	${WRKDIR}/lynx${V:C/\./-/g}
@


1.18
log
@Update to 2.8.9dev6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/04/18 05:00:05 bcallah Exp $
d10 1
a12 1
MAINTAINER =	Brian Callahan <bcallah@@openbsd.org>
@


1.18.4.1
log
@Update MASTER_SITES. Reported by Adam Jensen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/05/07 19:40:43 bcallah Exp $
d19 1
a19 3
MASTER_SITES =	http://lynx.invisible-island.net/current/ \
		http://invisible-mirror.net/archives/lynx/tarballs/ \
		http://invisible-mirror.net/archives/lynx/patches/
@


1.17
log
@Update to 2.8.9d5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/01/27 21:16:56 bcallah Exp $
d4 1
a4 1
PL =		5
@


1.16
log
@Maintenance update to 2.8.9dev4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/01/15 01:15:11 daniel Exp $
d4 1
a4 1
PL =		4
@


1.15
log
@Update lynx to 2.8.9dev.3; ok bcallah@@ (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/12/26 16:10:52 bcallah Exp $
d4 1
a4 1
PL =		3
@


1.14
log
@Update to 2.8.9dev2
ok daniel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/07/21 07:18:07 landry Exp $
d4 1
a4 1
PL =		2
@


1.13
log
@@@sample lynx.lss to ${SYSCONFDIR}, unbreaks runtime. A better solution
would be to check why this wasnt needed when lynx was in base, but fix
it this way for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/07/17 12:15:21 bcallah Exp $
d4 1
a4 2
PL =		1
REVISION =	0
@


1.12
log
@Import www/lynx. lynx is a console Internet browser that lets you browse
the web, gopherspace, and other protocols.
tweaks and ok schwarze@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
@


1.11
log
@remove Lynx, it has been part of the standard distribution for quite awhile
@
text
@d1 36
a36 35
# OpenBSD makefile for:    lynx
# http://sol.slcc.edu/lynx/current/
# Version required:     2.8
# Date created:         17 November 1997
# Whom:                 gene
#
# $OpenBSD: Makefile,v 1.10 1998/03/12 07:48:28 marc Exp $
#

PKGNAME=        lynx-2.8
CATEGORIES=     www
MAINTAINER=     ports@@OpenBSD.ORG

NO_WRKDIR=	"no working directory"
NO_CHECKSUM=	"nothing to checksum"
NO_EXTRACT=	"nothing to extract"
NO_PATCH=	"nothing to patch"
NO_CONFIGURE=	"nothing to configure"

# Override fetch, nothing to fetch
#
do-fetch:
	@@${DO_NADA}

# Override build.  Nothing to build but this way the user still sees
# ===>  Building for lynx-2.8 instead of nothing which is what we would
# get if NO_BUILD were defined.
#
do-build:
	@@${DO_NADA}

# Just create a symbolic link to the standard distribution lynx
#
do-install:
	@@${LN} -fs /usr/bin/lynx ${PREFIX}/bin/lynx
@


1.10
log
@port no longer needed as lynx now part of standard OpenBSD release.
Change install to create link /usr/local/bin/lynx ==> /usr/bin/lynx
Change delete to remove the link.
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.9 1998/01/19 21:10:42 gene Exp $
@


1.9
log
@Don't assume unzip is in the user's $PATH.
@
text
@d3 1
a3 1
# Version required:     2.7.2
d7 1
a7 1
# $OpenBSD: Makefile,v 1.8 1998/01/12 17:22:51 gene Exp $
d10 1
a10 2
DISTNAME=       lynx2-7-2
PKGNAME=        lynx-2.7.2
d12 1
a12 2
MASTER_SITES=   http://sol.slcc.edu/lynx/release/
EXTRACT_SUFX=   .zip
d14 5
a18 1
MAINTAINER=     gene@@OpenBSD.ORG
d20 11
a30 1
BUILD_DEPENDS=  unzip:$(PORTSDIR)/archivers/unzip
d32 4
a35 4
MAN1=           lynx.1
EXTRACT_CMD=    $(PREFIX)/bin/unzip
EXTRACT_BEFORE_ARGS=    -qq
ALL_TARGET=     openbsd
@


1.8
log
@Pretty much a regen in response to PR 386.  We're backing away from the
rapidly-changing ac- series to the stable, lynx 2.7.2 release.  ac- shoudl
be in a lynx-current port.
Note that in the patches I pull some tricks with Makefiles that work _only_
because we are building out of variables set in bsd.port.mk.
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.7 1997/12/29 21:42:43 martin Exp $
d21 1
a21 1
EXTRACT_CMD=    unzip
@


1.7
log
@Update to latest lynx
@
text
@d3 1
a3 1
# Version required:     2.7.1ac
d7 1
a7 1
# $OpenBSD: Makefile,v 1.6 1997/12/18 17:52:05 gene Exp $
d10 5
a14 4
DISTNAME=       lynx2.7.1ac-0.104
PKGNAME=        lynx-2.7.1ac-0.104
CATEGORIES=	www
MASTER_SITES=   http://sol.slcc.edu/lynx/current/
d16 1
a16 1
MAINTAINER=	gene@@OpenBSD.ORG
d18 6
a23 5
WRKSRC=         ${WRKDIR}/lynx2-7-1
GNU_CONFIGURE=  YES
CONFIGURE_ARGS= --with-screen=ncurses --with-zlib --libdir="${PREFIX}/etc"
MAKEFILE=       makefile
MAN1=		lynx.1
@


1.6
log
@Update to lynx-2.7.1ac101; noted by niklas.
Also, we don't gzip manpages.
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.5 1997/11/30 13:22:04 deraadt Exp $
d10 2
a11 2
DISTNAME=       lynx2.7.1ac-0.101
PKGNAME=        lynx-2.7.1ac-0.101
@


1.5
log
@upgrade to lynx2.7.1ac-0.97; bs@@mv.post.ru
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.4 1997/11/23 23:27:14 todd Exp $
d10 2
a11 2
DISTNAME=       lynx2.7.1ac-0.97
PKGNAME=        lynx-2.7.1ac-0.97
@


1.4
log
@lynx 2.7.1ac-0.95
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.3 1997/11/23 22:34:41 gene Exp $
d10 2
a11 2
DISTNAME=       lynx2.7.1ac-0.95
PKGNAME=        lynx-2.7.1ac-0.95
@


1.3
log
@Upgrade to lac-0.93 which came out jsut in time to antiquate what I
originally imported.
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.2 1997/11/19 01:07:58 joey Exp $
d10 2
a11 2
DISTNAME=       lynx2.7.1ac-0.93
PKGNAME=        lynx-2.7.1ac-0.93
@


1.2
log
@the first line of the Makefile should be `OpenBSD makefile for:` not `New ports...`
removed FreeBSD's $id. no need for it.
@
text
@d7 1
a7 1
# $OpenBSD: Makefile,v 1.1.1.1 1997/11/18 02:25:41 gene Exp $
d10 2
a11 2
DISTNAME=       lynx2.7.1ac-0.78
PKGNAME=        lynx-2.7.1ac-0.78
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# New ports collection makefile for:    lynx
d7 1
a7 2
# $OpenBSD$
# Id: Makefile,v 1.67 1997/10/10 14:47:21 ache Exp $
@


1.1.1.1
log
@Initial import of lynx with an OpenBSDified patch-aa
@
text
@@

