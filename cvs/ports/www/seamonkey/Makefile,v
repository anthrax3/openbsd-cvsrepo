head	1.207;
access;
symbols
	OPENBSD_6_1:1.198.0.2
	OPENBSD_6_1_BASE:1.198
	OPENBSD_6_0:1.187.0.2
	OPENBSD_6_0_BASE:1.187
	OPENBSD_5_9:1.182.0.2
	OPENBSD_5_9_BASE:1.182
	OPENBSD_5_8:1.176.0.4
	OPENBSD_5_8_BASE:1.176
	OPENBSD_5_7:1.166.0.2
	OPENBSD_5_7_BASE:1.166
	OPENBSD_5_6:1.160.0.2
	OPENBSD_5_6_BASE:1.160
	OPENBSD_5_5:1.149.0.2
	OPENBSD_5_5_BASE:1.149
	OPENBSD_5_4:1.140.0.2
	OPENBSD_5_4_BASE:1.140
	OPENBSD_5_3:1.128.0.2
	OPENBSD_5_3_BASE:1.128
	OPENBSD_5_2:1.105.0.2
	OPENBSD_5_2_BASE:1.105
	OPENBSD_5_1_BASE:1.97
	OPENBSD_5_1:1.97.0.2
	OPENBSD_5_0:1.85.0.2
	OPENBSD_5_0_BASE:1.85
	OPENBSD_4_9:1.73.0.2
	OPENBSD_4_9_BASE:1.73
	OPENBSD_4_8:1.52.0.2
	OPENBSD_4_8_BASE:1.52
	OPENBSD_4_7:1.43.0.2
	OPENBSD_4_7_BASE:1.43
	OPENBSD_4_6:1.38.0.2
	OPENBSD_4_6_BASE:1.38
	OPENBSD_4_5:1.31.0.2
	OPENBSD_4_5_BASE:1.31
	OPENBSD_4_4:1.25.0.2
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.20.0.2
	OPENBSD_4_3_BASE:1.20
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	kurt_20061222:1.1.1.1
	kurt:1.1.1;
locks; strict;
comment	@# @;


1.207
date	2017.08.08.10.20.29;	author landry;	state Exp;
branches;
next	1.206;
commitid	Vv78ok9OVAgrt0ax;

1.206
date	2017.07.26.22.45.31;	author sthen;	state Exp;
branches;
next	1.205;
commitid	tD4MFrpYYDDL2UFT;

1.205
date	2017.07.18.20.19.17;	author ajacoutot;	state Exp;
branches;
next	1.204;
commitid	FjVjJe4GcOo7J3vl;

1.204
date	2017.07.16.19.19.04;	author espie;	state Exp;
branches;
next	1.203;
commitid	tt0GhWK5c4uf9ILG;

1.203
date	2017.06.14.05.23.10;	author landry;	state Exp;
branches;
next	1.202;
commitid	8bpW5n0PzKqVOaCl;

1.202
date	2017.05.31.08.08.17;	author espie;	state Exp;
branches;
next	1.201;
commitid	ij92FtFXiSiT1ani;

1.201
date	2017.05.22.13.58.24;	author espie;	state Exp;
branches;
next	1.200;
commitid	4EJzsEXJ3TtMJOtL;

1.200
date	2017.04.12.18.12.33;	author landry;	state Exp;
branches;
next	1.199;
commitid	obesxEciJRtUmDBz;

1.199
date	2017.04.10.11.46.35;	author sthen;	state Exp;
branches;
next	1.198;
commitid	HY6VNZxjJWzKQFDV;

1.198
date	2017.03.10.15.48.23;	author landry;	state Exp;
branches;
next	1.197;
commitid	Sqh5fpcany6So8OI;

1.197
date	2017.03.07.15.26.41;	author landry;	state Exp;
branches;
next	1.196;
commitid	Jk4ifNzb8H8MIHTv;

1.196
date	2017.02.18.16.22.54;	author landry;	state Exp;
branches;
next	1.195;
commitid	zwUjsBRx9XMscqD4;

1.195
date	2017.01.24.21.27.28;	author landry;	state Exp;
branches;
next	1.194;
commitid	Z4lmQdBuNlbTAYET;

1.194
date	2017.01.06.22.14.07;	author landry;	state Exp;
branches;
next	1.193;
commitid	LnVcDutHO0Uavf7e;

1.193
date	2016.12.30.08.25.18;	author landry;	state Exp;
branches;
next	1.192;
commitid	ACpcVitRdmnuOkJk;

1.192
date	2016.12.30.07.04.39;	author landry;	state Exp;
branches;
next	1.191;
commitid	rkJWjrZ9koge0Pta;

1.191
date	2016.12.28.09.14.19;	author landry;	state Exp;
branches;
next	1.190;
commitid	T05X4DSmy98ITZwX;

1.190
date	2016.09.24.12.53.27;	author sthen;	state Exp;
branches;
next	1.189;
commitid	FnCC8MMwDve2qige;

1.189
date	2016.09.23.09.16.58;	author sthen;	state Exp;
branches;
next	1.188;
commitid	XLnI6AbHAmyVU5mO;

1.188
date	2016.08.10.20.19.45;	author naddy;	state Exp;
branches;
next	1.187;
commitid	cAtwoOdz5V5xsQxv;

1.187
date	2016.03.17.19.39.38;	author landry;	state Exp;
branches;
next	1.186;
commitid	fgKg122tFEQRfZqB;

1.186
date	2016.03.14.20.42.51;	author landry;	state Exp;
branches;
next	1.185;
commitid	0NX3QckeTkXSA6p3;

1.185
date	2016.03.10.02.41.49;	author sthen;	state Exp;
branches;
next	1.184;
commitid	7WUa5DG7D8y8MRlp;

1.184
date	2016.03.08.16.07.49;	author naddy;	state Exp;
branches;
next	1.183;
commitid	JNGhYCnnqnuiLICq;

1.183
date	2016.03.05.16.04.06;	author pascal;	state Exp;
branches;
next	1.182;
commitid	EJSWd5DpdfEFGBlM;

1.182
date	2016.01.27.18.04.42;	author landry;	state Exp;
branches;
next	1.181;
commitid	ZhzqJxMDCswGemcm;

1.181
date	2015.11.09.13.54.30;	author landry;	state Exp;
branches;
next	1.180;
commitid	kjh7x3PF1jqZ1WI9;

1.180
date	2015.11.04.07.32.37;	author landry;	state Exp;
branches;
next	1.179;
commitid	InVsz1Q8NulkQetq;

1.179
date	2015.09.28.09.30.39;	author landry;	state Exp;
branches;
next	1.178;
commitid	9TyLRwkD7ZhnhGgh;

1.178
date	2015.09.24.20.19.15;	author landry;	state Exp;
branches;
next	1.177;
commitid	fjsa9Sueg0Tme4H0;

1.177
date	2015.09.19.13.03.15;	author landry;	state Exp;
branches;
next	1.176;
commitid	7O8kHDziPyi0MQXe;

1.176
date	2015.07.25.06.51.50;	author landry;	state Exp;
branches;
next	1.175;
commitid	gkNQ76c5g8qCN7Sf;

1.175
date	2015.07.19.16.33.55;	author sthen;	state Exp;
branches;
next	1.174;
commitid	brxSCeZLrgUYqIft;

1.174
date	2015.07.05.20.00.31;	author landry;	state Exp;
branches;
next	1.173;
commitid	knLl0oceap6ssmHp;

1.173
date	2015.05.28.10.17.25;	author pascal;	state Exp;
branches;
next	1.172;
commitid	020U4lCPk8wUkCOz;

1.172
date	2015.05.24.14.30.29;	author ajacoutot;	state Exp;
branches;
next	1.171;
commitid	SdhHNBVbG1akdU2y;

1.171
date	2015.05.23.12.18.32;	author ajacoutot;	state Exp;
branches;
next	1.170;
commitid	N9WiPGPvGxcyqhB5;

1.170
date	2015.05.16.07.19.06;	author landry;	state Exp;
branches;
next	1.169;
commitid	IiY8mh1e0dy4DFth;

1.169
date	2015.03.23.21.05.12;	author landry;	state Exp;
branches;
next	1.168;
commitid	rUVj0S6JHtkWRuoi;

1.168
date	2015.03.19.19.49.49;	author landry;	state Exp;
branches;
next	1.167;
commitid	Nf1F5h5niuQjotjh;

1.167
date	2015.03.16.20.00.29;	author landry;	state Exp;
branches;
next	1.166;
commitid	71CpytinYZAgGe5d;

1.166
date	2015.02.10.10.47.30;	author landry;	state Exp;
branches;
next	1.165;
commitid	mHZm9OIlHnjfnGdv;

1.165
date	2015.01.14.17.46.53;	author landry;	state Exp;
branches;
next	1.164;
commitid	UBEQfOQmLyWwA7ct;

1.164
date	2014.12.07.09.19.57;	author landry;	state Exp;
branches;
next	1.163;
commitid	Ji6sHd7GsC4poWdi;

1.163
date	2014.10.17.07.30.43;	author landry;	state Exp;
branches;
next	1.162;
commitid	LZOZT8ALvRZZLKke;

1.162
date	2014.09.09.21.27.17;	author landry;	state Exp;
branches;
next	1.161;
commitid	QBOfzQIodOXPY6Bg;

1.161
date	2014.08.10.09.58.07;	author espie;	state Exp;
branches;
next	1.160;
commitid	jyyOLTDxRdjpw44n;

1.160
date	2014.07.24.18.04.21;	author landry;	state Exp;
branches;
next	1.159;
commitid	0zjw5s3OrOyzm4WD;

1.159
date	2014.06.16.19.54.46;	author landry;	state Exp;
branches;
next	1.158;
commitid	M8fPzCchzmpSxS12;

1.158
date	2014.06.15.19.53.01;	author landry;	state Exp;
branches;
next	1.157;
commitid	iloQvEjdCAGDyY1G;

1.157
date	2014.06.14.12.52.04;	author landry;	state Exp;
branches;
next	1.156;
commitid	VSol0OIjltFPlQAH;

1.156
date	2014.05.03.07.28.30;	author landry;	state Exp;
branches;
next	1.155;

1.155
date	2014.04.29.21.47.00;	author landry;	state Exp;
branches;
next	1.154;

1.154
date	2014.04.22.11.38.33;	author landry;	state Exp;
branches;
next	1.153;

1.153
date	2014.03.24.21.34.21;	author landry;	state Exp;
branches;
next	1.152;

1.152
date	2014.03.11.17.30.06;	author landry;	state Exp;
branches;
next	1.151;

1.151
date	2014.03.11.06.31.27;	author landry;	state Exp;
branches;
next	1.150;

1.150
date	2014.03.10.20.44.12;	author landry;	state Exp;
branches;
next	1.149;

1.149
date	2013.12.12.19.58.39;	author landry;	state Exp;
branches;
next	1.148;

1.148
date	2013.11.03.11.30.09;	author sthen;	state Exp;
branches;
next	1.147;

1.147
date	2013.10.31.08.01.32;	author landry;	state Exp;
branches;
next	1.146;

1.146
date	2013.09.30.20.10.26;	author landry;	state Exp;
branches;
next	1.145;

1.145
date	2013.09.25.23.39.54;	author sthen;	state Exp;
branches;
next	1.144;

1.144
date	2013.09.25.16.53.53;	author sthen;	state Exp;
branches;
next	1.143;

1.143
date	2013.09.19.13.24.53;	author landry;	state Exp;
branches;
next	1.142;

1.142
date	2013.08.15.10.42.51;	author sthen;	state Exp;
branches;
next	1.141;

1.141
date	2013.08.08.07.02.37;	author landry;	state Exp;
branches;
next	1.140;

1.140
date	2013.07.14.11.03.13;	author landry;	state Exp;
branches;
next	1.139;

1.139
date	2013.07.11.16.23.38;	author landry;	state Exp;
branches;
next	1.138;

1.138
date	2013.06.26.19.31.57;	author landry;	state Exp;
branches;
next	1.137;

1.137
date	2013.06.22.13.19.23;	author naddy;	state Exp;
branches;
next	1.136;

1.136
date	2013.06.20.21.20.34;	author landry;	state Exp;
branches;
next	1.135;

1.135
date	2013.05.30.14.26.50;	author landry;	state Exp;
branches;
next	1.134;

1.134
date	2013.04.08.06.51.00;	author landry;	state Exp;
branches;
next	1.133;

1.133
date	2013.04.06.14.48.09;	author landry;	state Exp;
branches;
next	1.132;

1.132
date	2013.03.13.21.45.11;	author landry;	state Exp;
branches;
next	1.131;

1.131
date	2013.03.11.11.44.49;	author espie;	state Exp;
branches;
next	1.130;

1.130
date	2013.03.09.17.43.51;	author landry;	state Exp;
branches;
next	1.129;

1.129
date	2013.03.03.17.39.15;	author landry;	state Exp;
branches;
next	1.128;

1.128
date	2013.02.07.19.13.49;	author ajacoutot;	state Exp;
branches;
next	1.127;

1.127
date	2013.02.06.22.48.01;	author landry;	state Exp;
branches;
next	1.126;

1.126
date	2013.01.22.23.59.22;	author sthen;	state Exp;
branches;
next	1.125;

1.125
date	2013.01.21.16.06.19;	author landry;	state Exp;
branches;
next	1.124;

1.124
date	2013.01.14.14.11.11;	author landry;	state Exp;
branches;
next	1.123;

1.123
date	2013.01.11.23.17.31;	author landry;	state Exp;
branches;
next	1.122;

1.122
date	2012.12.04.21.17.29;	author landry;	state Exp;
branches;
next	1.121;

1.121
date	2012.11.25.13.49.47;	author landry;	state Exp;
branches;
next	1.120;

1.120
date	2012.11.24.10.36.20;	author landry;	state Exp;
branches;
next	1.119;

1.119
date	2012.11.12.20.45.32;	author landry;	state Exp;
branches;
next	1.118;

1.118
date	2012.10.28.16.24.44;	author landry;	state Exp;
branches;
next	1.117;

1.117
date	2012.10.24.20.44.50;	author landry;	state Exp;
branches;
next	1.116;

1.116
date	2012.10.24.14.12.35;	author landry;	state Exp;
branches;
next	1.115;

1.115
date	2012.10.21.09.55.47;	author landry;	state Exp;
branches;
next	1.114;

1.114
date	2012.10.14.14.26.02;	author naddy;	state Exp;
branches;
next	1.113;

1.113
date	2012.10.13.06.46.26;	author landry;	state Exp;
branches;
next	1.112;

1.112
date	2012.10.10.21.03.40;	author landry;	state Exp;
branches;
next	1.111;

1.111
date	2012.10.06.07.55.55;	author ajacoutot;	state Exp;
branches;
next	1.110;

1.110
date	2012.09.22.10.30.17;	author landry;	state Exp;
branches;
next	1.109;

1.109
date	2012.09.21.13.21.44;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2012.09.10.11.13.07;	author landry;	state Exp;
branches;
next	1.107;

1.107
date	2012.09.01.14.10.03;	author landry;	state Exp;
branches;
next	1.106;

1.106
date	2012.08.07.09.02.33;	author landry;	state Exp;
branches;
next	1.105;

1.105
date	2012.06.17.18.21.43;	author landry;	state Exp;
branches;
next	1.104;

1.104
date	2012.06.17.09.24.09;	author landry;	state Exp;
branches;
next	1.103;

1.103
date	2012.06.11.15.38.33;	author landry;	state Exp;
branches;
next	1.102;

1.102
date	2012.04.30.15.38.09;	author landry;	state Exp;
branches;
next	1.101;

1.101
date	2012.04.24.06.14.53;	author espie;	state Exp;
branches;
next	1.100;

1.100
date	2012.03.16.21.38.33;	author landry;	state Exp;
branches;
next	1.99;

1.99
date	2012.03.08.12.13.01;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2012.02.20.20.20.00;	author landry;	state Exp;
branches;
next	1.97;

1.97
date	2012.01.11.03.00.02;	author nigel;	state Exp;
branches;
next	1.96;

1.96
date	2011.12.15.23.10.32;	author nigel;	state Exp;
branches;
next	1.95;

1.95
date	2011.12.08.00.39.18;	author nigel;	state Exp;
branches;
next	1.94;

1.94
date	2011.10.28.13.17.14;	author robert;	state Exp;
branches;
next	1.93;

1.93
date	2011.10.03.21.07.39;	author landry;	state Exp;
branches;
next	1.92;

1.92
date	2011.09.21.14.34.27;	author nigel;	state Exp;
branches;
next	1.91;

1.91
date	2011.09.16.12.00.09;	author espie;	state Exp;
branches;
next	1.90;

1.90
date	2011.09.06.19.43.21;	author landry;	state Exp;
branches;
next	1.89;

1.89
date	2011.08.24.17.27.05;	author landry;	state Exp;
branches;
next	1.88;

1.88
date	2011.08.24.06.19.50;	author landry;	state Exp;
branches;
next	1.87;

1.87
date	2011.08.23.20.25.24;	author landry;	state Exp;
branches;
next	1.86;

1.86
date	2011.08.23.08.38.13;	author landry;	state Exp;
branches;
next	1.85;

1.85
date	2011.07.28.20.48.56;	author landry;	state Exp;
branches;
next	1.84;

1.84
date	2011.07.28.20.32.39;	author landry;	state Exp;
branches;
next	1.83;

1.83
date	2011.07.28.08.12.50;	author landry;	state Exp;
branches;
next	1.82;

1.82
date	2011.07.24.07.31.57;	author landry;	state Exp;
branches;
next	1.81;

1.81
date	2011.06.08.18.15.29;	author rpointel;	state Exp;
branches;
next	1.80;

1.80
date	2011.06.02.13.41.41;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2011.04.29.08.04.04;	author landry;	state Exp;
branches;
next	1.78;

1.78
date	2011.04.28.20.44.47;	author landry;	state Exp;
branches;
next	1.77;

1.77
date	2011.03.24.11.41.11;	author landry;	state Exp;
branches;
next	1.76;

1.76
date	2011.03.23.15.27.04;	author landry;	state Exp;
branches;
next	1.75;

1.75
date	2011.03.22.13.18.26;	author landry;	state Exp;
branches;
next	1.74;

1.74
date	2011.03.03.14.07.20;	author landry;	state Exp;
branches;
next	1.73;

1.73
date	2011.01.28.21.38.12;	author landry;	state Exp;
branches;
next	1.72;

1.72
date	2011.01.18.12.37.44;	author landry;	state Exp;
branches;
next	1.71;

1.71
date	2011.01.16.16.56.02;	author landry;	state Exp;
branches;
next	1.70;

1.70
date	2011.01.14.22.56.11;	author landry;	state Exp;
branches;
next	1.69;

1.69
date	2011.01.05.08.22.30;	author dcoppa;	state Exp;
branches;
next	1.68;

1.68
date	2010.12.10.10.04.21;	author landry;	state Exp;
branches;
next	1.67;

1.67
date	2010.12.01.15.16.30;	author dcoppa;	state Exp;
branches;
next	1.66;

1.66
date	2010.12.01.15.00.12;	author dcoppa;	state Exp;
branches;
next	1.65;

1.65
date	2010.11.22.08.36.54;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2010.11.11.09.55.05;	author jasper;	state Exp;
branches;
next	1.63;

1.63
date	2010.10.28.13.45.26;	author landry;	state Exp;
branches;
next	1.62;

1.62
date	2010.10.27.13.02.38;	author landry;	state Exp;
branches;
next	1.61;

1.61
date	2010.10.24.21.40.10;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2010.10.22.19.21.06;	author landry;	state Exp;
branches;
next	1.59;

1.59
date	2010.10.19.08.02.57;	author espie;	state Exp;
branches;
next	1.58;

1.58
date	2010.10.18.07.15.55;	author landry;	state Exp;
branches;
next	1.57;

1.57
date	2010.10.15.07.16.19;	author landry;	state Exp;
branches;
next	1.56;

1.56
date	2010.10.11.08.19.04;	author jasper;	state Exp;
branches;
next	1.55;

1.55
date	2010.09.19.19.21.38;	author landry;	state Exp;
branches;
next	1.54;

1.54
date	2010.09.12.17.59.31;	author landry;	state Exp;
branches;
next	1.53;

1.53
date	2010.09.01.10.18.06;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2010.07.27.16.55.21;	author landry;	state Exp;
branches;
next	1.51;

1.51
date	2010.07.22.21.48.02;	author landry;	state Exp;
branches;
next	1.50;

1.50
date	2010.07.17.22.53.13;	author landry;	state Exp;
branches;
next	1.49;

1.49
date	2010.07.09.15.39.00;	author landry;	state Exp;
branches;
next	1.48;

1.48
date	2010.06.28.21.34.39;	author landry;	state Exp;
branches;
next	1.47;

1.47
date	2010.06.23.17.11.50;	author landry;	state Exp;
branches;
next	1.46;

1.46
date	2010.06.20.19.15.03;	author landry;	state Exp;
branches;
next	1.45;

1.45
date	2010.04.27.21.03.25;	author landry;	state Exp;
branches;
next	1.44;

1.44
date	2010.04.03.09.30.14;	author landry;	state Exp;
branches;
next	1.43;

1.43
date	2010.01.30.19.08.30;	author jolan;	state Exp;
branches;
next	1.42;

1.42
date	2009.12.22.13.02.12;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2009.11.17.23.07.45;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2009.09.10.21.45.38;	author martynas;	state Exp;
branches;
next	1.39;

1.39
date	2009.08.10.06.34.56;	author kili;	state Exp;
branches;
next	1.38;

1.38
date	2009.06.24.01.08.05;	author martynas;	state Exp;
branches;
next	1.37;

1.37
date	2009.06.23.18.38.54;	author martynas;	state Exp;
branches;
next	1.36;

1.36
date	2009.05.30.20.36.33;	author landry;	state Exp;
branches;
next	1.35;

1.35
date	2009.05.03.15.47.27;	author martynas;	state Exp;
branches;
next	1.34;

1.34
date	2009.04.11.13.47.37;	author martynas;	state Exp;
branches;
next	1.33;

1.33
date	2009.03.24.22.49.59;	author landry;	state Exp;
branches;
next	1.32;

1.32
date	2009.03.19.22.03.42;	author martynas;	state Exp;
branches;
next	1.31;

1.31
date	2009.01.09.15.54.31;	author martynas;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2008.12.18.21.05.59;	author martynas;	state Exp;
branches;
next	1.29;

1.29
date	2008.11.13.17.35.44;	author martynas;	state Exp;
branches;
next	1.28;

1.28
date	2008.10.24.21.06.58;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2008.09.24.19.29.16;	author martynas;	state Exp;
branches;
next	1.26;

1.26
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2008.07.25.17.41.06;	author martynas;	state Exp;
branches;
next	1.24;

1.24
date	2008.07.21.19.19.06;	author martynas;	state Exp;
branches;
next	1.23;

1.23
date	2008.07.17.16.49.33;	author martynas;	state Exp;
branches;
next	1.22;

1.22
date	2008.07.05.00.42.31;	author martynas;	state Exp;
branches;
next	1.21;

1.21
date	2008.04.01.10.14.58;	author martynas;	state Exp;
branches;
next	1.20;

1.20
date	2008.02.22.12.55.49;	author martynas;	state Exp;
branches;
next	1.19;

1.19
date	2008.01.23.16.42.44;	author martynas;	state Exp;
branches;
next	1.18;

1.18
date	2007.12.07.21.48.01;	author martynas;	state Exp;
branches;
next	1.17;

1.17
date	2007.10.24.20.10.45;	author martynas;	state Exp;
branches;
next	1.16;

1.16
date	2007.10.14.18.33.44;	author kurt;	state Exp;
branches;
next	1.15;

1.15
date	2007.09.15.20.38.26;	author merdely;	state Exp;
branches;
next	1.14;

1.14
date	2007.08.10.23.22.11;	author martynas;	state Exp;
branches;
next	1.13;

1.13
date	2007.07.24.19.33.15;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2007.06.13.12.09.19;	author martynas;	state Exp;
branches;
next	1.11;

1.11
date	2007.06.08.11.49.47;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2007.04.22.15.04.39;	author martynas;	state Exp;
branches;
next	1.9;

1.9
date	2007.04.07.17.41.12;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2007.04.06.14.39.33;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2007.03.26.20.41.37;	author martynas;	state Exp;
branches;
next	1.6;

1.6
date	2007.03.16.17.20.55;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2007.02.22.00.40.59;	author naddy;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2007.02.14.17.13.38;	author kurt;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.12.23.11.12;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.31.01.13.24;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.22.23.32.27;	author kurt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.12.22.23.32.27;	author kurt;	state Exp;
branches;
next	;

1.5.2.1
date	2007.05.01.16.18.34;	author sturm;	state Exp;
branches;
next	1.5.2.2;

1.5.2.2
date	2007.08.25.18.23.21;	author sturm;	state Exp;
branches;
next	;

1.31.2.1
date	2009.06.13.17.05.56;	author william;	state Exp;
branches;
next	;


desc
@@


1.207
log
@Update to seamonkey 2.48/lightning-seamonkey 5.3.

See https://www.seamonkey-project.org/releases/seamonkey2.48/
Based off gecko 51 w/ fixes.
Garbage collect all the alpha/sparc64/powerpc junk, properly set
ONLY_FOR_ARCHS.
@
text
@# $OpenBSD: Makefile,v 1.206 2017/07/26 22:45:31 sthen Exp $

COMMENT-main =		Mozilla application suite
COMMENT-lightning =	Mozilla Seamonkey calendar extension
ONLY_FOR_ARCHS =	amd64 i386

MOZILLA_VERSION =	2.48
MOZILLA_PROJECT =	seamonkey
MOZILLA_CODENAME =	suite

MULTI_PACKAGES =	-main -lightning
PKGNAME-main =		${PKGNAME}
PKGNAME-lightning =	lightning-seamonkey-5.3
EPOCH-lightning =	0

HOMEPAGE =	http://www.seamonkey-project.org/

SO_VERSION =	46.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.

MOZILLA_LIBS = ldap60 ldif60 mozgtk prldap60 suite xul calbasecomps lgpllibs

CATEGORIES=	www mail net news

# MPL
PERMIT_PACKAGE_CDROM=	Yes

MODULES =	www/mozilla devel/gettext lang/python
MODPY_RUNDEP =	No

COMPILER =		clang
MODCLANG_ARCHS =	amd64 i386

# gecko >= 44 doesnt build with base libevent
MOZILLA_USE_BUNDLED_LIBEVENT =	Yes
# gecko >= 46 defaults to gtk+3
# MOZILLA_USE_GTK3 = Yes
# SM 2.46 upstream defaults to gtk+2
CONFIGURE_ARGS=--enable-default-toolkit=cairo-gtk2
NO_TEST=	Yes

CONFIGURE_STYLE =	simple
CONFIGURE_ARGS +=	--prefix=${PREFIX}

LIB_DEPENDS-lightning = STEM->=${MOZILLA_VERSION:S/b/beta/}:${BUILD_PKGPATH},-main
WANTLIB-lightning =	lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/xul \
			c m ${COMPILER_LIBCXX} nspr4 plc4 plds4 pthread

# build lightning xpi
CONFIGURE_ARGS +=	--enable-calendar

# SQLITE_CFLAGS is set from pkgconfig, but it's not used for all files that need it
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include"

GNU_ARCH =	${MACHINE_ARCH:S/amd64/x86_64/}
# guid for gdata-provider comes from em:id in install.rdf
GUIDS =	gdata-provider {a62ef8ec-5fdc-40c2-873c-223b8a6925cc}

EXTDIR =	${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/extensions/

post-install:
	${INSTALL_MAN} ${WRKBUILD}/dist/man/man1/seamonkey.1 ${PREFIX}/man/man1/

.for xpi guid in ${GUIDS}
	cp ${WRKBUILD}/dist/xpi-stage/${xpi}*.xpi ${EXTDIR}/${guid}.xpi
.endfor
	# lightning cant be used packed as a zip because it contains a binary component
	# (libcalbasecomps.so) that the system wouldnt be able to load...
	cp -r ${WRKBUILD}/dist/bin/distribution/extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103} \
		${EXTDIR}

	# install prefs
	${SUBST_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/defaults/pref/all-openbsd.js
	# install desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/ ; \
	${SUBST_DATA} ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
		${PREFIX}/share/applications/${MOZILLA_PROJECT}.desktop ; \
	# install icon for desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps/
	${INSTALL_DATA} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/chrome/icons/default/${MOZILLA_PROJECT}.png \
		${PREFIX}/share/pixmaps/${MOZILLA_PROJECT}.png

.include <bsd.port.mk>
@


1.206
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2017/07/18 20:19:17 ajacoutot Exp $
d5 1
a5 1
BROKEN-sparc64 =	xpcshell SIGBUS during fake
d7 1
a7 2
MOZILLA_VERSION =	2.46
MOZILLA_BRANCH =	release
a9 3
EXTRACT_SUFX =		.tar.xz
REVISION-main =		7
REVISION-lightning=	1
d13 1
a13 1
PKGNAME-lightning =	lightning-seamonkey-5.1
d18 1
a18 1
SO_VERSION =	45.0
d32 1
a32 4
# necessary glue to build with the correct compiler after fx 17
COMPILER =		gcc clang

MODGCC4_ARCHS =		powerpc sparc64 alpha
a54 5

# to be able to link when building with clang on i386 or gcc on powerpc
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "powerpc"
CONFIGURE_ARGS +=	--disable-debug-symbols
.endif
@


1.205
log
@Missed bump from the COMPILER_LIBCXX rampage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2017/07/16 19:19:04 espie Exp $
d12 2
a13 2
REVISION-main =		6
REVISION-lightning=	0
@


1.204
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2017/06/14 05:23:10 landry Exp $
d13 1
@


1.203
log
@Bump REVISIONs for mozilla.port.mk changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2017/05/31 08:08:17 espie Exp $
d54 1
a54 1
			c m ${LIBCXX} nspr4 plc4 plds4 pthread
@


1.202
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2017/05/22 13:58:24 espie Exp $
d12 1
a12 1
REVISION-main =		5
@


1.201
log
@most complex WANT_CXX yet. The one for which I wrote the *ARCHS support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2017/04/12 18:12:33 landry Exp $
d36 2
a37 1
WANT_CXX =	base gcc clang
@


1.200
log
@Fix WANTLIB and bump REVISION for all ports depending on hunspell.

While here enforce dependency on hunspell 1.6 in mozilla.port.mk, as
it's a requirement for 53.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2017/04/10 11:46:35 sthen Exp $
d36 1
a36 1
MODULES +=		gcc4 lang/clang
a37 1
MODGCC4_LANGS =		c c++
a38 1
MODCLANG_LANGS =	c c++
@


1.199
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2017/03/10 15:48:23 landry Exp $
d12 1
a12 1
REVISION-main =		4
@


1.198
log
@Revert seamonkey 2.46 to build against Gtk+2 as upstream does.

Requested by Misu Moldovan who's apparently the last user of seamonkey
on OpenBSD :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2017/03/07 15:26:41 landry Exp $
d55 1
a55 1
			c m stdc++ nspr4 plc4 plds4 pthread
@


1.197
log
@Bump REVISION for mozilla.port.mk LDEP change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2017/02/18 16:22:54 landry Exp $
d12 1
a12 1
REVISION-main =		3
d45 3
a47 2
MOZILLA_USE_GTK3 = Yes

@


1.196
log
@Consolidate textproc/icu4c common dependency into mozilla.port.mk, and
allow to build against bundled icu4c by setting MOZILLA_USE_BUNDLED_ICU.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2017/01/24 21:27:28 landry Exp $
d12 1
a12 1
REVISION-main =		2
@


1.195
log
@Bump REVISION for ports that depend on nss and/or nspr via mozilla.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2017/01/06 22:14:07 landry Exp $
a65 5

# bug #1064665
LIB_DEPENDS +=	textproc/icu4c
CONFIGURE_ARGS += --with-system-icu
WANTLIB += icudata icui18n icuuc
@


1.194
log
@Fix NS_ERROR_NET_INADEQUATE_SECURITY error messages on
wikipedia|google|cnn|various sites (http/2?) broken by the nss 3.28
update, my bad - totally forgot about this when updating.

Backport https://hg.mozilla.org/mozilla-central/rev/361ac226da2a

See https://bugzilla.mozilla.org/show_bug.cgi?id=1290037 &
https://bugzilla.mozilla.org/show_bug.cgi?id=1323209

Reported by Solene Rapenne and others, fix tested by danj@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2016/12/30 08:25:18 landry Exp $
d12 1
a12 1
REVISION-main =		1
@


1.193
log
@Unfuck the fuckety fuck.

- Set MOZILLA_USE_GTK3 = Yes to properly depend on Gtk+3 (reported by ajacoutot@@)
- Bump REVISION-main, better be on the safe side after such a clusterfuck
- Remove BROKEN-i386 marker while here, last i tried 2.46rc on i386 it built and
  ran fine, so it should be unfucked.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2016/12/30 07:04:39 landry Exp $
d12 1
a12 1
REVISION-main =		0
@


1.192
log
@Fix lightning packaging, somehow i commited the PLIST for 2.46rc6 but
ended up not building/packaging 2.46 final, and thus build failed.

Note that as stated in the upstream release notes, chatzilla and dom
inspector are not shipped anymore (temporarly, due to repacking issues?),
install them from addons.mozilla.org if you rely on them.

Failure reported by naddy@@ and nigel@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.191 2016/12/28 09:14:19 landry Exp $

BROKEN-i386 =   wants __atomic_{store,fetch_add,load}_8, even with -march=i586
a6 1

d12 1
d44 2
@


1.191
log
@Update to seamonkey 2.46.

See http://www.seamonkey-project.org/releases/seamonkey2.46/ and
https://unofficialseamonkeynews.wordpress.com/2016/12/22/seamonkey-2-46-release-additional-release-notes/
for news.

Whack a bunch of patches merged upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2016/09/24 12:53:27 sthen Exp $
d86 1
a86 1
	mv ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution/extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103} \
d88 1
@


1.190
log
@seamonkey needs -I/usr/local/include as well, found by naddy (missed in my
earlier build because it's BROKEN-i386).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2016/09/23 09:16:58 sthen Exp $
d10 1
a10 1
MOZILLA_VERSION =	2.40
d18 1
a18 2
PKGNAME-lightning =	lightning-seamonkey-4.5
REVISION =		1
d23 1
a23 1
SO_VERSION =	44.0
d27 1
a27 1
MOZILLA_LIBS = ldap60 ldif60 mozgnome prldap60 suite xul calbasecomps lgpllibs
d44 3
d49 2
a50 1
CONFIGURE_STYLE =	autoconf no-autoheader
a66 3
# relies on pulseaudio for sound and broken at runtime
CONFIGURE_ARGS +=	--disable-webrtc

a71 7
CONFIGURE_ARGS +=	--enable-gstreamer=1.0
BUILD_DEPENDS +=	multimedia/gstreamer1/plugins-base

ALL_TARGET =	default

MOZILLA_AUTOCONF_DIRS =		mozilla mozilla/js/src

d74 1
a74 2
GUIDS =	gdata-provider {a62ef8ec-5fdc-40c2-873c-223b8a6925cc} \
	lightning {e2fda1a4-762b-4020-b5ad-a41df1933103}
a77 5
CONFIGURE_ENV+=MOZCONFIG=${WRKSRC}/mozilla/.mozconfig
# MOZCONFIG is mandatory now even if empty ?
post-patch:
	touch ${WRKSRC}/mozilla/.mozconfig

d82 1
a82 1
	${UNZIP} -oq ${WRKBUILD}/dist/xpi-stage/${xpi}*.xpi -d ${EXTDIR}/${guid}
d84 4
@


1.189
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2016/08/10 20:19:45 naddy Exp $
d55 3
@


1.188
log
@Enable nonWritableJitCode to fix mmap W^X violations
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2016/03/17 19:39:38 landry Exp $
d19 1
a19 1
REVISION-main =		0
@


1.187
log
@Update to seamonkey 2.40 / lightning-seamonkey 4.5.

- See http://www.seamonkey-project.org/releases/seamonkey2.40/
(Based off gecko.. 43, i think ?)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2016/03/14 20:42:51 landry Exp $
d19 1
@


1.186
log
@Bump REVISION-main after mozilla.port.mk nss/nspr dependency change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2016/03/10 02:41:49 sthen Exp $
d10 1
a10 1
MOZILLA_VERSION =	2.39
d18 1
a18 1
PKGNAME-lightning =	lightning-seamonkey-4.4
a19 2
REVISION-lightning =	0
REVISION-main =		2
@


1.185
log
@all the world's an amd64
disable these ports to save time in bulk builds until i386 can be repaired
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2016/03/08 16:07:49 naddy Exp $
d21 1
a21 1
REVISION-main =		1
@


1.184
log
@really bump REVISION
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.183 2016/03/05 16:04:06 pascal Exp $
@


1.183
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2016/01/27 18:04:42 landry Exp $
a12 1
REVISION-main =	0
d19 1
a19 1
REVISION-main =		0
@


1.182
log
@Bump REVISION after sqlite dependency change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2015/11/09 13:54:30 landry Exp $
d19 2
@


1.181
log
@Update to seamonkey 2.39 / lightning-seamonkey 4.4.

See http://www.seamonkey-project.org/releases/seamonkey2.39/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2015/11/04 07:32:37 landry Exp $
d13 1
@


1.180
log
@Bump REVISION-main for nss/nspr dependency change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2015/09/28 09:30:39 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	2.38
d16 1
a16 2
PKGNAME-lightning =	lightning-seamonkey-4.3
REVISION-main =		0
d21 1
a21 1
SO_VERSION =	43.0
d25 1
a25 1
MOZILLA_LIBS = ldap60 ldif60 mozgnome prldap60 suite xul calbasecomps
@


1.179
log
@Update to seamonkey 2.38 & lightning-seamonkey 4.3, chasing firefox 41.

- See http://www.seamonkey-project.org/releases/seamonkey2.38/
- Lotsa MFSA fixed since 2.35, refer to the firefox list
- shuffle patches moving around and add i386 fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2015/09/24 20:19:15 landry Exp $
d17 1
@


1.178
log
@Bump after moz.port.mk change. Tb & Sm will be updated in the coming days anyway...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2015/09/19 13:03:15 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	2.35
d12 1
d16 1
a16 2
REVISION-main =		0
PKGNAME-lightning =	lightning-seamonkey-4.0
d21 1
a21 1
SO_VERSION =	42.0
d25 1
a25 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 suite xul calbasecomps
a43 2
MODGNU_CONFIG_GUESS_DIRS +=	${WRKSRC}/ldap/sdks/c-sdk/config/autoconf

a47 1
			lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/mozalloc \
d71 1
a71 1
MOZILLA_AUTOCONF_DIRS =		ldap/sdks/c-sdk mozilla mozilla/js/src
@


1.177
log
@Update to seamonkey 2.35 / lightning-seamonkey 4.0.

- See http://www.seamonkey-project.org/releases/seamonkey2.35/
- Now uses Gecko 38 as firefox-esr. Note that 2.38 is in beta..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2015/07/25 06:51:50 landry Exp $
d15 1
@


1.176
log
@Face reality, mark as BROKEN-sparc64. xpcshell SIGBUSes during fake, and
nobody cares. No point in wasting hours during bulk builds....
If you want a graphical browser on sparc64, try netsurf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2015/07/19 16:33:55 sthen Exp $
d8 1
a8 1
MOZILLA_VERSION =	2.33.1
d15 1
a15 3
PKGNAME-lightning =	lightning-seamonkey-3.8
REVISION-main =		4
REVISION-lightning =	4
d20 1
a20 1
SO_VERSION =	41.0
@


1.175
log
@Fix mismerge (the patch was committed upstream; however the port update
reversed the diff rather than removing it). From Peter Piwowarski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2015/07/05 20:00:31 landry Exp $
d5 2
@


1.174
log
@bump REVISION after mozilla.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2015/05/28 10:17:25 pascal Exp $
d14 2
a15 2
REVISION-main =		3
REVISION-lightning =	3
@


1.173
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2015/05/24 14:30:29 ajacoutot Exp $
d14 1
a14 1
REVISION-main =		2
@


1.172
log
@Missed bump; spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2015/05/23 12:18:32 ajacoutot Exp $
d14 2
a15 2
REVISION-main =		1
REVISION-lightning =	2
@


1.171
log
@Sync in the GStreamer change from Firefox to SeaMonkey.

from brad
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2015/05/16 07:19:06 landry Exp $
d15 1
a15 1
REVISION-lightning =	1
@


1.170
log
@Revision bumps after mozilla.port.mk dependency changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2015/03/23 21:05:12 landry Exp $
d14 1
a14 1
REVISION-main =		0
a69 1
RUN_DEPENDS +=	multimedia/gstreamer1/plugins-good
@


1.169
log
@Security update to seamonkey 2.33.1.

- Fixes MFSA-2015-28/29 (Pwn2Own)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2015/03/19 19:49:49 landry Exp $
d14 2
a15 1
REVISION-lightning =	0
@


1.168
log
@Move i386 back to build with clang. The issues we had in the past seem
to have resolved, 37.0beta5 builds and runs with clang, and the build
of 36 with gcc4 is broken anyway because of #1028827 and #1122745. Boo
SSSE3/SSE4.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2015/03/16 20:00:29 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.33
d14 1
a38 5

# fix for 982693, apply only on clang archs
.if ${MACHINE_ARCH:Mamd64}
MAKE_ENV += VPXHACK="-fno-integrated-as"
.endif
@


1.167
log
@Update to seamonkey 2.33 / lightning-seamonkey 3.8.

- See http://www.seamonkey-project.org/releases/seamonkey2.33/
- Fixes MFSA 2015-11->27
- widget code moved, move nsPrintSettingsImpl.cpp patch around
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2015/02/10 10:47:30 landry Exp $
d34 1
a34 1
MODGCC4_ARCHS =		powerpc sparc64 alpha i386
d36 1
a36 1
MODCLANG_ARCHS =	amd64
@


1.166
log
@Chase firefox 35.0.1 and update seamonkey to 2.32.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2015/01/14 17:46:53 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.32.1
d13 1
a13 2
PKGNAME-lightning =	lightning-seamonkey-3.7
REVISION-lightning =	0
@


1.165
log
@Update to seamonkey 2.32 / lightning 3.7

- See http://www.seamonkey-project.org/releases/seamonkey2.32/
- Fixes MFSA 2015-01->09 except 07, not applying
- Remove js/src/jscpucfg.h patch, merged upstream in #1065055
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2014/12/07 09:19:57 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.32
d14 1
@


1.164
log
@Update to seamonkey 2.31 / lightning 3.6

- See http://www.seamonkey-project.org/releases/seamonkey2.31/
- Fixes MFSA-2014-83->91
- remove patch-mozilla_toolkit_library_libxul_mk, merged (#1036832)
- add patch-ldap_sdks_c-sdk_configure_in to link ldap libs using a soname (#1107063)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2014/10/17 07:30:43 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.31
d13 1
a13 1
PKGNAME-lightning =	lightning-seamonkey-3.6
d18 1
a18 1
SO_VERSION =	40.0
@


1.163
log
@Update to seamonkey 2.30 / lightning-seamonkey 3.5.

- See http://www.seamonkey-project.org/releases/seamonkey2.30/
- Fixes MFSA 2014-74-->82
- build with systemwide icu4c, workarounds #1064665 (and as a side
  effect shrinks the libs/packages by 1 or 2 megs)
- for consistency with firefox, build with gstreamer1 instead of
  gstreamer-0.10
- add patch-toolkit_library_libxul_mk from bug #1036832 to workaround a
  linking failure with our ancient binutils
- remove patch-media_libvpx_Makefile_in from #982693 fixing libvpx build
  on i386, a variation of it was merged upstream
- remove patch-mozilla_js_src_configure_in, didnt apply anymore and was
  useless
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2014/09/09 21:27:17 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.30
d13 1
a13 1
PKGNAME-lightning =	lightning-seamonkey-3.5
d18 1
a18 1
SO_VERSION =	39.0
d92 1
a92 1
	${INSTALL_MAN} ${WRKBUILD}/mozilla/dist/man/man1/seamonkey.1 ${PREFIX}/man/man1/
d95 1
a95 1
	${UNZIP} -oq ${WRKBUILD}/mozilla/dist/xpi-stage/${xpi}*.xpi -d ${EXTDIR}/${guid}
@


1.162
log
@(Long awaited) update to seamonkey 2.29 / lightning 3.4.

- See http://www.seamonkey-project.org/releases/seamonkey2.29/
- this is based on gecko 32, so contains all the new changes since gecko
  20 (which was the basis for seamonkey 2.26)
- remove patches to fix lightning display (merged in #1001985)
- remove mozilla/browser/components/certerror/content/aboutCertError.xhtml,
boring patch.
- add intl/icu patch from #990196
- remove
  patch-mozilla_toolkit_components_downloads_nsDownloadManager_cpp and
patch-mozilla_xpcom_io_SpecialSystemDirectory_cpp, they neved made any
sense to me and this is the wrong place to modify this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2014/08/10 09:58:07 espie Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.29
d13 1
a13 1
PKGNAME-lightning =	lightning-seamonkey-3.4
a16 1
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
d18 1
a18 1
SO_VERSION =	38.0
d66 8
a73 3
CONFIGURE_ARGS +=	--enable-gstreamer
BUILD_DEPENDS +=	multimedia/gstreamer-0.10/plugins-base
RUN_DEPENDS +=	multimedia/gstreamer-0.10/plugins-good
d86 1
d89 1
a89 1
	touch ${WRKSRC}/.mozconfig
@


1.161
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2014/07/24 18:04:21 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.26.1
d13 1
a13 2
PKGNAME-lightning =	lightning-seamonkey-3.1
REVISION-lightning =	2
a14 1
REVISION-main =		0
d19 1
a19 1
SO_VERSION =	37.0
d81 5
@


1.160
log
@Bump REVISION-main to account for mozilla.port.mk dependency change.
Unfortunately, sm 2.28 is delayed upstream again, so will miss this
train...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2014/06/16 19:54:46 landry Exp $
d90 1
a90 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/all-openbsd.js \
d94 1
a94 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
@


1.159
log
@Bump REVISION-lightning to 2 to avoid going backwards. spotted by kili@@,
thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2014/06/15 19:53:01 landry Exp $
d16 1
@


1.158
log
@Bugfix update to seamonkey 2.26.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2014/06/14 12:52:04 landry Exp $
d14 1
a14 1
REVISION-lightning =	0
@


1.157
log
@Bump REVISIONs after mozilla.port.mk changes. Note that seamonkey 2.27
will miss the trains due to infrastructure issue, a 2.26.1 is in the
pipe, and 2.28 should be released in line with ffx/gecko 31.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2014/05/03 07:28:30 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.26
a12 1
REVISION =		1
d14 1
@


1.156
log
@sm 2.26 final was released, adjust MASTER_SITES.

while here add gstreamer's to BDEP/RDEP, otherwise configure fails if
gst-plugins-base is missing. spotted by kili@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2014/04/29 21:47:00 landry Exp $
d13 1
a13 1
REVISION =		0
@


1.155
log
@Update to seamonkey 2.26rc1 (to ride the mozilla.port.mk changes) and
lightning 3.1.

- See http://www.seamonkey-project.org/releases/seamonkey2.26/
- Fixes MFSA 2014-34,36->39,41->47
- remove now useless config.mk patch, was only here for enigmail
- add patches to fix lightning display (#1001985)
- set spellchecker.dictionary_path to look for systemwide dicts

(note that seamonkey-i18n is not update yet on purpose, as 2.26 final is
not yet available, langpacks are not there *yet* - will be fixed tmrw)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2014/04/22 11:38:33 landry Exp $
d13 1
d18 1
a18 1
MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
d67 4
@


1.154
log
@-fno-integrated-as breaks non-clang platforms, apply it only on amd64
via an environment variable hack.

from/with sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2014/03/24 21:34:21 landry Exp $
d6 1
a6 1
MOZILLA_VERSION =	2.25
d13 1
a13 1
PKGNAME-lightning =	lightning-seamonkey-3.0beta1
d17 1
a17 1
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
d19 1
a19 1
SO_VERSION =	36.0
d84 2
a85 2
	${INSTALL_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/defaults/pref/
@


1.153
log
@Update to seamonkey 2.25.

- See http://www.seamonkey-project.org/releases/seamonkey2.25/
- Fixes MFSA-2014-15->32 (except 21,24,25, not relevant to SM?)
- Remove enigmail subpackage, build goo & patches, will be
superseded by mail/enigmail,-seamonkey
- add an all-openbsd.js file to customize default preferences and
install it in defaults/pref/. Use it to set
extensions.autoDisableScopes to 3, so that extensions installed in
${LOCALBASE}/lib/mozilla/extensions/${APPID} are enabled by default.
- remove libffi patches, were merged upstream in #928390 and #928381
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2014/03/11 17:30:06 landry Exp $
d39 5
@


1.152
log
@Really disable all the bits related to enigmail; now packages fine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2014/03/11 06:31:27 landry Exp $
a4 1
COMMENT-enigmail =	Mozilla Seamonkey GnuPG extension
d6 1
a6 1
MOZILLA_VERSION =	2.24
d13 1
a13 3
PKGNAME-lightning =	lightning-seamonkey-2.9beta1
ENIG_V =		1.6
PKGNAME-enigmail =	enigmail-seamonkey-${ENIG_V}
a14 2
EPOCH-enigmail =	0
REVISION-enigmail =	1
a17 4
MASTER_SITES0 =	http://www.mozilla-enigmail.org/download/source/
DISTFILES +=	${MOZILLA_PROJECT}-${MOZILLA_VERSION}.source.tar.bz2 \
		enigmail-${ENIG_V}.tar.gz:0
EXTRACT_CASES =	enigmail-*.tar.gz) ${GZIP_CMD} -dc ${FULLDISTDIR}/$$archive | tar -C comm-${MOZILLA_BRANCH}/mailnews/extensions/ -xf -;;
d19 1
a19 1
SO_VERSION =	35.0
d23 1
a23 2
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 suite xul calbasecomps \
	subprocess-${XPCOM_ABI}-gcc3
a50 3
RUN_DEPENDS-enigmail =	security/gnupg STEM->=${MOZILLA_VERSION:S/b/beta/}:${BUILD_PKGPATH},-main
LIB_DEPENDS-enigmail =
WANTLIB-enigmail =
a65 20
ENIGMAIL_DIR =	mailnews/extensions/enigmail

post-build:
	# build enigmail
#	cd ${WRKSRC}/${ENIGMAIL_DIR} && ./makemake -o ${WRKBUILD} -r
#	cd ${WRKBUILD}/${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
#	cd ${WRKBUILD}/${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} xpi

# needed for the naming of the enigmail lib
.if ${MACHINE_ARCH:Mi386}
XPCOM_ABI =	x86
.elif ${MACHINE_ARCH:Mamd64}
XPCOM_ABI =	x86_64
.elif ${MACHINE_ARCH:Mpowerpc}
XPCOM_ABI =	ppc
.elif ${MACHINE_ARCH:Msparc64}
XPCOM_ABI =	sparc
.endif
SUBST_VARS += XPCOM_ABI

a70 2
#	../bin/enigmail-${ENIG_V}-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}

d78 3
@


1.151
log
@Disable the -enigmail subpackage. A change in mozilla's build system in
the gecko 27 cycle made it impossible to build enigmail within SM as
it used to be the way. Upstream enigmail has a new build system separate
of mozilla, which i'll shortly import (once i've figured out how to make
systemwide extensions working for different products)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2014/03/10 20:44:12 landry Exp $
d102 3
a104 2
	lightning {e2fda1a4-762b-4020-b5ad-a41df1933103} \
	../bin/enigmail-${ENIG_V}-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
@


1.150
log
@Update to seamonkey 2.24.

See http://www.seamonkey-project.org/releases/seamonkey2.24/
- Fixes MFSA-2014-01 to 13, excluding 06 and 10
- remove GStreamerLoader.cpp patch, merged in 927898 (or now useless)
- remove patch-mozilla_gfx_layers_BufferUnrotate_cpp, merged in 929439
- remove patch-mozilla_ipc_chromium_src_base_debug_util_posix_cc, merged
  in 927810 (was p_psflags change in base)

There *might* be an issue building enigmail, but i dont remember if it
appeared in 2.24 or 2.25, and i'll handle that shortly. Let's ride the
gcc4+www/mozilla MODULE change!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2013/12/12 19:58:39 landry Exp $
d12 1
a12 1
MULTI_PACKAGES =	-main -lightning -enigmail
d83 3
a85 3
	cd ${WRKSRC}/${ENIGMAIL_DIR} && ./makemake -o ${WRKBUILD} -r
	cd ${WRKBUILD}/${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	cd ${WRKBUILD}/${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} xpi
@


1.149
log
@Update to seamonkey 2.23.

- See http://www.seamonkey-project.org/releases/seamonkey2.23/
- Fixes MFSA-2013-104 -> 117 (all but 105, in fact)
- remove patch-ipc_chromium_src_base_dir_reader_bsd_h (#909005),
  the getdents() patch has been merged upstream.
- temporarly add a config/config.mk patch to reinstate XPIDL_LINK,
  fallout from http://hg.mozilla.org/releases/comm-release/rev/a6ab55f00e21
  (this is needed for enigmail to build fine.)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2013/11/03 11:30:09 sthen Exp $
d7 1
a7 1
MOZILLA_VERSION =	2.23
d14 1
a14 1
PKGNAME-lightning =	lightning-seamonkey-2.8beta1
d19 1
a19 1
REVISION-enigmail =	0
@


1.148
log
@move seamonkey/firefox to gcc on i386, it triggers a compiler segfault in
clang 3.3 (X86 DAG->DAG Instruction Selection)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2013/10/31 08:01:32 landry Exp $
d7 1
a7 1
MOZILLA_VERSION =	2.22
d14 1
a14 1
PKGNAME-lightning =	lightning-seamonkey-2.7beta1
d19 1
d28 1
a28 1
SO_VERSION =	34.0
d72 2
a73 3
# XXX remove in 24
CONFIGURE_ENV+=	TERM=xterm
MAKE_ENV+=	TERM=xterm
@


1.147
log
@Update to seamonkey 2.22/lightning 2.7b1/enigmail 1.6.

- see http://www.seamonkey-project.org/releases/seamonkey2.22/
- fixes MFSA 2013-93 -> 102 (99 didnt affect SM)
- add gstreamer patch from #927898
- remove genxpi enigmail patch, merged upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2013/09/30 20:10:26 landry Exp $
d44 1
a44 1
MODGCC4_ARCHS =		powerpc sparc64 alpha
d46 1
a46 1
MODCLANG_ARCHS =	amd64 i386
@


1.146
log
@Allow this to package the enigmail subpackage on sparc64 by defining XPCOM_ABI.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2013/09/25 23:39:54 sthen Exp $
d7 1
a7 1
MOZILLA_VERSION =	2.21
d14 2
a15 2
PKGNAME-lightning =	lightning-seamonkey-2.6beta3
ENIG_V =		1.5.2
a16 3
REVISION-main =		0
REVISION-lightning =	0
REVISION-enigmail =	2
d27 1
a27 1
SO_VERSION =	33.0
@


1.145
log
@handle p_flags split in kinfo_proc to unbreak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2013/09/25 16:53:53 sthen Exp $
d97 2
@


1.144
log
@these are currently BROKEN (sysctl changes), mark them as such to save time
in builds, jasper@@ agrees
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.143 2013/09/19 13:24:53 landry Exp $

BROKEN = sysctl changes
d17 3
a19 1
REVISION-enigmail =	1
@


1.143
log
@Update to seamonkey 2.21/lightning 2.6b3

- see http://www.seamonkey-project.org/releases/seamonkey2.21/
- fixes MFSA 2013-76 -> 92 (84, 86 & 87 didnt affect SM)
- remove BROKEN-sparc64 \o/
- add sparc64 & alpha (insane!) to MODGCC4_ARCHS
- remove patch-gfx_thebes_gfxPlatform_cpp, was merged upstream in
  #722975 (and we dont build with system cairo anyway now)
- remove useless patch-parser_html_Makefile_in, maybe it made sense in
the gcc 3 / ffx 3.6 days but those are over...
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.142 2013/08/15 10:42:51 sthen Exp $
@


1.142
log
@fix firefox/seamonkey build on post-flag-day -current:

- use getdents(2) now that we have it; previously OpenBSD was special-cased
to use getdirentries(2) instead.

- interim fix: declare getdents() to allow firefox/seamonkey to build on
-current until consensus has been reached on return types/adding to system
headers.

discussed with landry@@, clues from guenther@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2013/08/08 07:02:37 landry Exp $
a5 1
BROKEN-sparc64 =	https://bugzilla.mozilla.org/show_bug.cgi?id=577056
d7 1
a7 2
MOZILLA_VERSION =	2.20
REVISION =		0
d14 1
a14 1
PKGNAME-lightning =	lightning-seamonkey-2.5beta1
d17 1
a17 1
REVISION-enigmail =	0
d28 1
a28 1
SO_VERSION =	32.0
d45 1
a45 1
MODGCC4_ARCHS =		powerpc
d61 1
a61 1
RUN_DEPENDS-enigmail =	security/gnupg STEM->=${MOZILLA_VER}:${BUILD_PKGPATH},-main
@


1.141
log
@Update to seamonkey 2.20 / lightning 2.5b1

- see http://www.seamonkey-project.org/releases/seamonkey2.20/
- fixes MFSA-2013-63->75 (all but 66, 71 & 74, rly)
- use disable-debug-symbols on ppc too :(
- fix enigmail RDEP to depend on -main, otherwise it can be installed
  without sm, and this doesnt make much sense..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2013/07/14 11:03:13 landry Exp $
d8 2
a9 1
MOZILLA_VERSION=	2.20
@


1.140
log
@Fix packaging by unzipping the correct enigmail xpi. Probably caused by
the previous distfile reroll.
Issue reported by nigel@@ & naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2013/07/11 16:23:38 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.19
d15 1
a15 1
PKGNAME-lightning =	lightning-seamonkey-2.4beta1
d18 1
d29 1
a29 1
SO_VERSION =	31.0
d62 1
a62 1
RUN_DEPENDS-enigmail =	security/gnupg
d68 2
a69 2
# to be able to link when building with clang on i386
.if ${MACHINE_ARCH} == "i386"
@


1.139
log
@Update to seamonkey 2.19 / enigmail 1.5.2 / lightning 2.4b1.

- See http://www.seamonkey-project.org/releases/seamonkey2.19/
- Fixes more or less the same list of MFSA fixed in ffx 22
- Finally back on track after missing 2.18 due to build infra issues
- Add a patch to workaround #886095 (which puzzled me for 3 weeks)
- remove no longer needed sydneyaudio patches
- add TERM=xterm hack to workaround mozbuild issue
- reenable clang on i386, using --disable-debug-symbols
- sync patch-mozilla_gfx_thebes_gfxPlatform_cpp which the one from ffx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2013/06/26 19:31:57 landry Exp $
d102 1
a102 1
	../bin/enigmail-1.5-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
@


1.138
log
@Bump some REVISIONs after mozilla.port.mk WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2013/06/22 13:19:23 naddy Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.17
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-2.2beta1
ENIG_V =		1.5.1
a19 3
REVISION-main =		3
REVISION-lightning =	0
REVISION-enigmail =	3
d28 1
a28 1
SO_VERSION =	30.0
d32 1
a32 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 suite xpcom xul calbasecomps \
d45 1
a45 1
MODGCC4_ARCHS =		i386 powerpc
d47 1
a47 1
MODCLANG_ARCHS =	amd64
d57 1
a57 2
WANTLIB-lightning =	lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/xpcom \
			lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/xul \
d67 9
a81 5
# add method appeared in 18
post-patch:
	echo "UNSUPPORTED(int sa_stream_set_stream_type(sa_stream_t *s,  const sa_stream_type_t stream_type))" \
		>> ${WRKSRC}/${_MOZDIR}/media/libsydneyaudio/src/sydney_audio_sndio.c

a85 1
	cd ${WRKBUILD}/mozilla/dist/bin/chrome/enigmail && zip -r ../enigmail.jar .
a101 1
	calendar-timezones calendar-timezones@@mozilla.org \
a118 3

	# cleanup useless dirs from #798450 (fx 18?)
	rmdir ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/modules{/services-{aitc,common,crypto,sync{/engines,/stages,}},/identity,/accessibility,/commonjs{/promise,},}
@


1.137
log
@bump after hx509 removal from Kerberos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2013/06/20 21:20:34 landry Exp $
d20 1
a20 1
REVISION-main =		2
@


1.136
log
@Blindly fix seamonkey after the kerberos update by replacing -lkrb5 -lcrypto
by `krb5-config --libs` in toolkit/library/Makefile.in, as it was done
in other mozillas...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2013/05/30 14:26:50 landry Exp $
d20 1
a20 1
REVISION-main =		1
@


1.135
log
@Bump all REVISIONS after nspr LIB_DEPENDS bump.
No seamonkey 2.18 release with the gecko 21 train because of
infrastructure issues (see http://blog.drapostles.org/archives/95)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2013/04/08 06:51:00 landry Exp $
d20 1
a20 1
REVISION-main =		0
@


1.134
log
@Switch back i386 to use gcc 4.6. Building with clang hits MAXDSIZ limit
when linking libxul.so, as found out by espie@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2013/04/06 14:48:09 landry Exp $
d20 3
a22 1
REVISION-enigmail =	2
@


1.133
log
@Update to seamonkey 2.17.

- See http://www.seamonkey-project.org/releases/seamonkey2.17/
- Fixes MFSA 2013-30->40
- switch back to use clang on i386, now that llvm got fixed there
- backport libffi i386 fix (TODO: switch to systemwide libffi if possible)
- nicer fix to avoid installing the sdk lib/headers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2013/03/13 21:45:11 landry Exp $
d46 1
a46 1
MODGCC4_ARCHS =		powerpc
d48 1
a48 1
MODCLANG_ARCHS =	amd64 i386
@


1.132
log
@Update to seamonkey 2.16.2, fixes problems with no-NO & pt-PT locales.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2013/03/11 11:44:49 espie Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.16.2
d15 1
a15 1
PKGNAME-lightning =	lightning-seamonkey-2.1beta1
d20 1
a20 2
REVISION-lightning =	1
REVISION-enigmail =	1
d22 1
d29 1
a29 1
SO_VERSION =	29.0
d46 1
a46 1
MODGCC4_ARCHS =		i386 powerpc
d48 1
a48 1
MODCLANG_ARCHS =	amd64
d121 1
a121 1
	rmdir ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/modules{/services-{aitc,common,crypto,notifications,sync{/engines,/stages,}},/identity,/commonjs{/promise,},/accessibility,}
@


1.131
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2013/03/09 17:43:51 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.16.1
d20 2
a21 2
REVISION-lightning =	0
REVISION-enigmail =	0
@


1.130
log
@Security update to seamonkey 2.16.1, chasing firefox 19.0.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2013/03/03 17:39:15 landry Exp $
a39 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d51 1
a51 1
NO_REGRESS=	Yes
@


1.129
log
@Update to seamonkey 2.16 / enigmail 1.5.1

- see http://www.seamonkey-project.org/releases/seamonkey2.16/
- fixes MFSA 2013-21->28
- provides a builtin pdf viewer (pdf.js)
- remove patch-mozilla_toolkit_system_gnome_nsGIOService_cpp (#805202), firefox
now properly links with gio instead of dlopening it
- remove patch-mozilla_toolkit_xre_nsXREDirProvider_cpp and
patch-mozilla_xpcom_io_nsAppFileLocationProvider_cpp, merged upstream (#803955)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2013/02/07 19:13:49 ajacoutot Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.16
d20 2
@


1.128
log
@MODGCC4_VERSION default to 4.6 now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2013/02/06 22:48:01 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.15.2
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-2.0beta1
ENIG_V =		1.5.0
a19 2
REVISION-lightning =	1
REVISION-enigmail =	1
d27 1
a27 1
SO_VERSION =	28.0
d32 1
a32 1
	enigmime-${XPCOM_ABI}-gcc3 subprocess-${XPCOM_ABI}-gcc3
d65 2
a66 3
LIB_DEPENDS-enigmail =	${LIB_DEPENDS-lightning}
WANTLIB-enigmail =	${WANTLIB-lightning}

d110 1
a110 1
	${UNZIP} -oq ${WRKBUILD}/mozilla/dist/xpi-stage/${xpi}.xpi -d ${EXTDIR}/${guid}
d122 1
a122 1
	rmdir ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/modules{/services-{aitc,common,crypto,notifications,sync{/engines,}},/identity,/commonjs{/promise,},}
@


1.127
log
@Bugfix update to seamonkey 2.15.2 chasing firefox 18.0.2, fixing
'JavaScript related stability issues' for a well known social
network site (bug #831626).

While here remove patch for #830303, commited upstream in
mozilla-release just after 18.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2013/01/22 23:59:22 sthen Exp $
a48 1
MODGCC4_VERSION =	4.6
@


1.126
log
@Build Seamonkey and Firefox with gcc on i386 due to segfaults with the
CLang build (seems to be connected with opening pages using JavaScript).
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2013/01/21 16:06:19 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.15.1
d20 2
a21 3
REVISION-main =		0
REVISION-lightning =	0
REVISION-enigmail =	0
@


1.125
log
@Bugfix update to seamonkey 2.15.1 chasing firefox 18.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2013/01/14 14:11:11 landry Exp $
d20 1
d51 1
a51 1
MODGCC4_ARCHS =		powerpc
d53 1
a53 1
MODCLANG_ARCHS =	i386 amd64
@


1.124
log
@Fix external plugin spawning (bug #830303) in seamonkey too. Tb not affected.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2013/01/11 23:17:31 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.15
d20 2
a21 1
REVISION-main =		0
@


1.123
log
@Update to seamonkey 2.15/enigmail 1.5.0/lightning 2.0beta1

- see http://www.seamonkey-project.org/releases/seamonkey2.15/
- fixes MFSA 2013-01 -> 20
- build with clang on i386/amd64 and with gcc 4.6 on powerpc. Required
since upstream dropped support for gcc < 4.4.
- don't build against systemwide jpeg anymore since it now needs its
internal libjpeg-turbo.
- add a stub method to sydney_audio_sndio.c in post-patch.
- add patch-mozilla_toolkit_mozapps_installer_packager_mk to fix a tar
  vs $(TAR) usage (bug #815793)
- remove patch-ipc_chromium_src_base_atomicops_h, not needed anymore
- remove enigmail genxpi patch, and to a SUBST_VARS dance with an
XPCOM_ABI variable for the consistent naming of the new internal
libsuprocess ipc lib.
- add an enigmail patch to link with -shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2012/12/04 21:17:29 landry Exp $
d20 1
@


1.122
log
@Bugfix update to seamonkey(,-i18n) 2.14.1.

See http://www.seamonkey-project.org/releases/seamonkey2.14/changes#fixes2141
for the list of fixes.
Readd the --with-system-jpeg locally (to remove in 2.15), and remove all the
configure_env/args/build_depends stuff that moved to moz.port.mk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2012/11/25 13:49:47 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.14.1
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-1.9beta1
ENIG_V =		1.4.6
a19 2
REVISION-lightning =	0
REVISION-enigmail =	0
d27 1
a27 1
SO_VERSION =	27.0
d31 2
a32 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 suite xpcom xul calbasecomps enigmime ipc
d45 8
a57 3
# to remove in 2.15
CONFIGURE_ARGS +=	--with-system-jpeg=${LOCALBASE}
WANTLIB +=	jpeg
d78 5
d90 10
d124 1
a124 2
	rm -f ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/modules/services-{aitc,common,crypto,notifications,sync{/engines,}}/.mkdir.done
	rmdir ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/modules{/services-{aitc,common,crypto,notifications,sync{/engines,}},}
@


1.121
log
@Add missing BUILD_DEPEND on yasm for i386/amd64, from sthen@@

Forgot to cvs rm patch-configure_in, leading to a packaging failure
since libmozgnome.so was forcedly disabled by the patch.
Reported by sthen@@ and nigel@@

No bump since it didnt package, and the PLIST doesnt change anyway.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2012/11/24 10:36:20 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.14
d20 2
d51 3
a53 18
CONFIGURE_ARGS +=	--enable-official-branding
CONFIGURE_ARGS +=	--with-system-libevent=/usr/
CONFIGURE_ARGS +=	--with-system-bz2=${LOCALBASE}
WANTLIB +=	event

# bug #736961
SEPARATE_BUILD =	Yes

# XXX needed since 2.7b?, relocation overflow otherwise...
# replaces -g by -Os
.if ${MACHINE_ARCH} == "powerpc"
CONFIGURE_ENV +=	MOZ_DEBUG_FLAGS="-Os"
.endif

# needed for webm
.if ${MACHINE_ARCH:Mi386} || ${MACHINE_ARCH:Mamd64}
BUILD_DEPENDS +=	devel/yasm
.endif
a59 1
BUILD_DEPENDS +=	archivers/unzip #to unzip xpi
d66 1
a66 3
CONFIGURE_ARGS +=	--enable-calendar \
			--enable-gio \
			--disable-gconf
@


1.120
log
@Update to seamonkey 2.14/enigmail 1.4.6/lightning 1.9b1.

- see http://www.seamonkey-project.org/releases/seamonkey2.14/ for details.
- tidy up WANTLIB/CONFIGURE_ARGS
- enable the gio/libnotify interaction. If libnotify is found at
  runtime, a popup will show incoming messages notification/download complete.
- install an icon in pixmaps/ for the desktop file, like in ffx/tb
- fix desktop file Exec line so that an argument can be passed to seamonkey
- remove patch-mozilla_browser_app_profile_firefox_js, this is spar^Wseamonkey!
- for the other patches removed/added, same comments as for ffx apply
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2012/11/12 20:45:32 landry Exp $
d63 5
d73 1
a73 1
BUILD_DEPENDS+=	archivers/unzip #to unzip xpi
@


1.119
log
@Bump all ports depending on nspr to account for the devel/nspr,-main ->
devel/nspr pkgpath change. While here, make sure mozilla ports depend on
the latest and greatest via mozilla.port.mk.
Tested in a bulk build..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2012/10/28 16:24:44 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.13.2
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-1.8beta1
ENIG_V =		1.4.5
a18 2
REVISION-lightning =	2
REVISION-main =		0
a19 1
REVISION-enigmail =	1
d27 1
a27 1
SO_VERSION =	26.0
d31 1
a31 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc prldap60 suite xpcom xul calbasecomps enigmime ipc
d51 1
a51 1
CONFIGURE_ARGS +=	--with-system-zlib=/usr/ --with-system-bz2=${LOCALBASE}
a56 2
CONFIGURE_ENV +=	CPPFLAGS=-I${X11BASE}/include

a62 2


d67 1
a67 1
			c m stdc++ nspr4 plc4 plds4
d76 1
d110 8
a117 3

	# cleanup useless dirs from #717616
	rm -Rf ${PREFIX}/lib/seamonkey-${MOZILLA_VERSION:C/b.//}/js{sub,}loader
@


1.118
log
@SECURITY update to seamonkey 2.13.2.

Fixes MFSA 2012-90 & 67.
http://www.mozilla.org/security/announce/2012/mfsa2012-90.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2012/10/24 20:44:50 landry Exp $
d20 1
@


1.117
log
@Bump REVISION-lightning too, since python disappeared from the
corresponding PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2012/10/24 14:12:35 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.13.1
a14 1
REVISION-main =		0
d19 1
a19 1
REVISION-lightning =	1
d21 1
a21 1
REVISION-enigmail =	0
@


1.116
log
@Bump REVISION-main, in last commit i removed MODPY_RUNDEP=No and
USE_GROFF=Yes, effectively changing the plist.
pointed out by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2012/10/21 09:55:47 landry Exp $
d20 1
a20 1
REVISION-lightning =	0
@


1.115
log
@Free commit, shuffle things around to greatly reduce the diff between
thunderbird and seamonkey makefiles.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2012/10/14 14:26:02 naddy Exp $
d15 1
@


1.114
log
@braino
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2012/10/13 06:46:26 landry Exp $
d23 7
a29 1
SO_VERSION=	26.0
d32 1
d37 1
a37 1
# mozilla public license
d43 2
a44 12
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
MASTER_SITES0 =	http://www.mozilla-enigmail.org/download/source/

EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX} \
		enigmail-${ENIG_V}.tar.gz
EXTRACT_CASES =	enigmail-*.tar.gz) ${GZIP_CMD} -dc ${FULLDISTDIR}/$$archive | tar -C comm-${MOZILLA_BRANCH}/mailnews/extensions/ -xf -;;

DISTFILES+=	${DISTNAME}${EXTRACT_SUFX} \
		enigmail-${ENIG_V}.tar.gz:0

MODULES=	www/mozilla devel/gettext lang/python
BUILD_DEPENDS+=	archivers/unzip
a45 1
USE_GROFF =	Yes
d48 1
a48 11
MODGNU_CONFIG_GUESS_DIRS+=	${WRKSRC}/ldap/sdks/c-sdk/config/autoconf

LIB_DEPENDS-lightning = STEM->=${MOZILLA_VERSION:S/b/beta/}:${BUILD_PKGPATH},-main
WANTLIB-lightning =	lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION:C/b.//}/xpcom \
			lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION:C/b.//}/xul \
			lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION:C/b.//}/mozalloc \
			c m stdc++ nspr4 plc4 plds4

RUN_DEPENDS-enigmail =	security/gnupg
LIB_DEPENDS-enigmail =	${LIB_DEPENDS-lightning}
WANTLIB-enigmail =	${WANTLIB-lightning}
a49 2
# bug #736961
SEPARATE_BUILD =	Yes
a50 2
CONFIGURE_ENV +=	CPPFLAGS=-I${X11BASE}/include
CONFIGURE_ARGS +=	--enable-calendar
a51 1
CONFIGURE_ARGS +=	--disable-gconf
d56 5
a65 1
ALL_TARGET=	default
d67 20
a86 1
MOZILLA_AUTOCONF_DIRS =	ldap/sdks/c-sdk mozilla mozilla/js/src
d104 1
a104 2
EXTDIR =	${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION:C/b.//}/extensions/

@


1.113
log
@SECURITY update to seamonkey 2.13.1, tracking fx 16.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2012/10/10 21:03:40 landry Exp $
d19 1
a19 1
PKGNAME-lightning =	0
d21 1
a21 1
PKGNAME-enigmail =	0
@


1.112
log
@Update to seamonkey 2.13/enigmail 1.4.5/lightning 1.8b1.

- see http://www.seamonkey-project.org/releases/seamonkey2.13/ for details
- remove patch-mozilla_build_unix_mozilla_in, useless since bin/seamonkey
is not a script anymore since a while
- remove patch-mozilla_build_unix_run-mozilla_sh, seamonkey can be directly
debugged in gdb now. update README accordingly
- fix plugin path in README
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2012/10/06 07:55:55 ajacoutot Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.13
d19 1
d21 1
@


1.111
log
@Extend the desktop file: add a couple of mime types (x-scheme-handler)
so that the mozilla browsers are properly recognized in the "default
browser" specification.

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2012/09/22 10:30:17 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.12.1
d15 2
a16 3
REVISION-main =		2
PKGNAME-lightning =	lightning-seamonkey-1.7beta1
ENIG_V =		1.4.4
a18 1
REVISION-lightning =	0
a19 1
REVISION-enigmail =	0
d34 1
a80 1
MOZILLA_SUBST_FILES +=	configure
@


1.110
log
@Remove useless dependency on deprecated pangox.

- remove useless patch to gfx/thebes/Makefile.in adding -lpangox-1.0 to
EXTRA_DSO_LDOPTS, this was maybe useful before ffx 3.0, but mozilla
stopped using pangox between 2.0 and 3.0. See for the last traces of
pangox.h use : https://bugzilla.mozilla.org/show_bug.cgi?id=528941. See
also bugs #323671/#338446
- backport the patch from #528941 to remove useless pangox.h inclusion
from www/firefox35.
- remove the RUN_DEPENDS on pangox-compat
- bump all corresponding REVISIONS
- while here, make sure all moz ports depend on latest nspr 4.9.2 since
  it'll be a requirement for upcoming gecko 16 releases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2012/09/21 13:21:44 ajacoutot Exp $
d15 1
a15 1
REVISION-main =		1
@


1.109
log
@Fix after pangox removal from devel/pango.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2012/09/10 11:13:07 landry Exp $
d15 1
a15 1
REVISION-main =		0
a47 3

# EXTRA_DSO_LDOPTS += -lpangox-1.0
RUN_DEPENDS-main +=		devel/pangox-compat
@


1.108
log
@Bugfix update to seamonkey 2.12.1.

Fixes bugs #780908, #787046 & #787833, and the regression in private
browsing mode (#787743) among other mozilla-specific fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2012/09/01 14:10:03 landry Exp $
d15 1
d48 3
@


1.107
log
@Update to seamonkey 2.12.

- see http://www.seamonkey-project.org/releases/seamonkey2.12/
- garbage collect nsSound.cpp, the original one uses libcanberra
properly and thus sndio.
- remove patch from #750620, merged upstream (mfbt/double-conversion)
- remove patches from #691898, merged upstream (yarr jit ppc)
- remove useless crashreporter patch, we don't have breakpad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2012/08/07 09:02:33 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.12
d19 1
d21 1
@


1.106
log
@Update to seamonkey 2.11/enigmail 1.4.3.

- see http://www.seamonkey-project.org/releases/seamonkey2.11/
- remove the -rpath hack, not needed since matthew's ld.so fix from
  12/06
- backport cset from #750620 to fix ppc (and other exotic archs) build.
- force-disable gconf in configure.in (bug #765556)
- remove the chunk from #763408, packaging was fixed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2012/06/17 18:21:43 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.11
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-1.6beta1
ENIG_V =		1.4.3
d21 1
a21 1
SO_VERSION=	25.0
@


1.105
log
@fix typo (REVISION-ligthning) and actually bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2012/06/17 09:24:09 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.10.1
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-1.5beta1
ENIG_V =		1.4.2
a19 2
REVISION-lightning =	0
REVISION-enigmail =	0
@


1.104
log
@Bugfix update to seamonkey 2.10.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2012/06/11 15:38:33 landry Exp $
d20 1
a20 1
REVISION-ligthning =	0
@


1.103
log
@Update to seamonkey 2.10.

See http://www.seamonkey-project.org/releases/seamonkey2.10/ for details
- Update lightning to 1.5b1 and enigmail to 1.4.2
- add the rpath hack to workaround #668869
- dont make packaging warnings errors (#763181)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2012/04/30 15:38:09 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.10
d20 2
@


1.102
log
@Update to seamonkey 2.9.1/lightning 1.4b1/enigmail 1.5pre.

- See http://www.seamonkey-project.org/releases/seamonkey2.9/
- add patch-suite_installer_Makefile_in to avoid installing the SDk
  (corollary of Tb's patch-mail_installer_Makefile_in)
- use MOZ_DEBUG_FLAGS="-Os" on ppc as done in Tb to avoid a
  relocation overflow when linking libxul on ppc (reminded by aja@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2012/04/24 06:14:53 espie Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.9.1
d15 3
a17 3
PKGNAME-lightning =	lightning-seamonkey-1.4beta1
ENIG_V =		1.4.1
PKGNAME-enigmail =	enigmail-seamonkey-1.5pre
d19 1
d21 1
a21 1
SO_VERSION=	24.0
d61 2
d82 1
a82 1
ENIGMAIL_DIR =	${WRKSRC}/mailnews/extensions/enigmail
d86 4
a89 4
	cd ${ENIGMAIL_DIR} && ./makemake -r
	cd ${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	cd ${MOB}/chrome/enigmail && zip -r ../enigmail.jar .
	cd ${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} xpi
d101 1
a101 1
	${INSTALL_MAN} ${WRKSRC}/mozilla/dist/man/man1/seamonkey.1 ${PREFIX}/man/man1/
d104 1
a104 1
	${UNZIP} -oq ${MOB}/../xpi-stage/${xpi}.xpi -d ${EXTDIR}/${guid}
d110 3
@


1.101
log
@sqlite bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2012/03/16 21:38:33 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.8
d15 3
a17 4
REVISION-main =		0
PKGNAME-lightning =	lightning-seamonkey-1.3beta1
ENIG_V =		1.4
PKGNAME-enigmail =	enigmail-seamonkey-${ENIG_V}
d20 1
a20 1
SO_VERSION=	23.0
d69 5
d93 1
a93 1
	../bin/enigmail-1.4-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
@


1.100
log
@Update to seamonkey 2.8. (and enigmail 1.4/lightning 1.3b1)
- Fixes MFSA 2012-12->19
- see http://www.seamonkey-project.org/releases/seamonkey2.8/
- complete patchset for #691898, still fixes build on ppc (and hopefully
commited in firefox 14...)
- add patchset from #706955, workarounds #669050 (xpcshell hangs during
make install and chokes on CSPUtils.csm, threads related..)
- remove obsolete/commited patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2012/03/08 12:13:01 ajacoutot Exp $
d15 1
@


1.99
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2012/02/20 20:20:00 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.7.2
d15 2
a16 4
REVISION-main =		0
PKGNAME-lightning =	lightning-seamonkey-1.2beta1
REVISION-lightning =	0
ENIG_V =		1.3.5
a17 1
REVISION-enigmail =	0
d20 1
a20 1
SO_VERSION=	22.0
@


1.98
log
@Update to seamonkey 2.7.2.

Same comments as for thunderbird, and remove i18n xpis from the port,
they bring 20Mb to the package without reason and will be better as
no-arch in www/seamonkey-i18n.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2012/01/11 03:00:02 nigel Exp $
d15 1
d17 1
d20 1
@


1.97
log
@Update seamonkey to 2.6.1

Ok landry@@ stsp@@ mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2011/12/15 23:10:32 nigel Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.6.1
d15 2
a16 2
PKGNAME-lightning =	lightning-seamonkey-1.0beta9
ENIG_V =		1.3.4
a18 1
REVISION-enigmail =	0
d20 1
a20 1
SO_VERSION=	21.0
d33 1
a33 13
# url for beta releases
#MASTER_SITES =	https://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/releases/${MOZILLA_VERSION}/source/ \
#	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/releases/${MOZILLA_VERSION}/source/

MASTER_SITES0=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${MOZILLA_VERSION}/langpack/ \
		https://ftp.mozilla.org/pub/mozilla.org/seamonkey/releases/${MOZILLA_VERSION}/langpack/ \
		ftp://ftp.mozilla.org/pub/mozilla.org/seamonkey/releases/${MOZILLA_VERSION}/langpack/
MASTER_SITES1 =	http://www.mozilla-enigmail.org/download/source/

LANGUAGES=	be ca cs de en-GB en-US \
		es-AR es-ES fi fr gl hu \
		it ja lt nb-NO nl pl \
		pt-PT ru sk sv-SE tr zh-CN
d40 1
a40 4
		enigmail-${ENIG_V}.tar.gz:1
.for language in ${LANGUAGES}
DISTFILES+=	seamonkey-${MOZILLA_VERSION}.${language}.langpack.xpi:0
.endfor
a93 4
.for language in ${LANGUAGES}
	${INSTALL_DATA} ${FULLDISTDIR}/seamonkey-${MOZILLA_VERSION}.${language}.langpack.xpi \
		${EXTDIR}/langpack-${language}@@${MOZILLA_PROJECT}.mozilla.org.xpi
.endfor
@


1.96
log
@always build without gconf

Ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2011/12/08 00:39:18 nigel Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.5
d15 1
a15 2
REVISION-main =		0
PKGNAME-lightning =	lightning-seamonkey-1.0beta8
d19 1
@


1.95
log
@Update seamonkey 2.4.1 to 2.5, enimail to 1.3.4 and lightning.

Ok mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2011/10/28 13:17:14 robert Exp $
d15 1
d80 1
@


1.94
log
@unbreak after nspr change and enable vswprintf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2011/10/03 21:07:39 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.4.1
d15 3
a17 5
PKGNAME-lightning =	lightning-seamonkey-1.0beta6
PKGNAME-enigmail =	enigmail-seamonkey-1.3.2
REVISION-main =		0
REVISION-lightning =	0
REVISION-enigmail =	1
d20 1
a20 1
SO_VERSION=	20.0
d33 4
d38 1
d42 4
a45 21
LANGUAGES=	ca \
		cs \
		de \
		en-GB \
		en-US \
		es-AR \
		es-ES \
		fi \
		fr \
		hu \
		it \
		ja \
		lt \
		nb-NO \
		nl \
		pl \
		pt-PT \
		ru \
		sk \
		sv-SE \
		tr
d48 1
a48 1
		enigmail-1.3.2.tar.gz
d52 1
a52 1
		enigmail-1.3.2.tar.gz:1
d65 1
a65 1
LIB_DEPENDS-lightning = STEM->=2.4beta3:${BUILD_PKGPATH},-main
@


1.93
log
@Update to seamonkey 2.4.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2011/09/21 14:34:27 nigel Exp $
d17 3
a19 1
REVISION-enigmail =	0
@


1.92
log
@Backport from upstream

https://bugzilla.mozilla.org/show_bug.cgi?id=681026
https://hg.mozilla.org/mozilla-central/rev/bb708067dd57

enigmail v.1.3 updated to v.1.3.2

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2011/09/16 12:00:09 espie Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.3.3
d15 1
a15 1
PKGNAME-lightning =	lightning-seamonkey-1.0beta5
d17 1
a17 1
REVISION-main =		1
a18 1
REVISION-lightning =	1
d20 1
a20 2
# must be in sync with SO_VERSION in main/enigmail/seamonkey
SO_VERSION=	19.0
d77 4
a80 4
LIB_DEPENDS-lightning = STEM->=${MOZILLA_VERSION}:${BUILD_PKGPATH},-main
WANTLIB-lightning =	lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION}/xpcom \
			lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION}/xul \
			lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION}/mozalloc \
d116 1
a116 1
EXTDIR =	${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION}/extensions/
@


1.91
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2011/09/06 19:43:21 landry Exp $
d16 2
a17 1
PKGNAME-enigmail =	enigmail-seamonkey-1.3
a18 1
REVISION-main =		0
d62 1
a62 1
		enigmail-1.3.tar.gz
d66 1
a66 1
		enigmail-1.3.tar.gz:1
d116 1
a116 1
	../bin/enigmail-1.2-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
@


1.90
log
@Security update to seamonkey 2.3.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2011/08/24 17:27:05 landry Exp $
d18 2
a19 1
REVISION-lightning =	0
@


1.89
log
@Minor update to seamonkey 2.3.1, which is 2.3 plus patches for #664095
and #671466.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2011/08/24 06:19:50 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.3.1
@


1.88
log
@s/_MOZ_PROJECT_SHORT/MOZILLA_PROJECT/ when installing desktop file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2011/08/23 20:25:24 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.3
d18 1
@


1.87
log
@Update to seamonkey 2.3/lightning 1.0b5/enigmail 1.3
See http://www.seamonkey-project.org/releases/seamonkey2.3/.
Remove patches merges upstream, enigmail update lifted from nigel@@'s tb update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2011/08/23 08:38:13 landry Exp $
d130 2
a131 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${_MOZ_PROJECT_SHORT}.desktop \
		${PREFIX}/share/applications/${_MOZ_PROJECT_SHORT}.desktop ; \
@


1.86
log
@Add ftp://ftp.mozilla.org as backup MASTER_SITES to still be able to
fetch 'old' releases phased out of mirrors. Prodded by espie@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2011/07/28 20:48:56 landry Exp $
d8 1
a8 1
MOZILLA_VERSION=	2.2
d14 3
a16 5
PKGNAME-main =		seamonkey-2.2
REVISION-main =		0
PKGNAME-lightning =	lightning-seamonkey-1.0beta4
PKGNAME-enigmail =	enigmail-seamonkey-1.2
REVISION-enigmail =	0
d20 1
a20 1
SO_VERSION=	18.0
d60 1
a60 1
		enigmail-1.2.tar.gz
d64 1
a64 1
		enigmail-1.2.tar.gz:1
a127 2
	# enigmail 1.2 works in seamonkey 2.2 so adjust install.rdf
	perl -pi -e 's|<em:maxVersion>2.1.*</em:maxVersion>|<em:maxVersion>2.2.*</em:maxVersion>|' ${EXTDIR}/{847b3a00-7ab1-11d4-8f02-006008948af5}/install.rdf
@


1.85
log
@Oops, forgot to adjust enigmail's install.rdf specifying it works fine
in seamonkey 2.2. Repair.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2011/07/28 20:32:39 landry Exp $
d35 2
a36 1
MASTER_SITES0=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${MOZILLA_VERSION}/langpack/
@


1.84
log
@As done in thunderbird, merge enigmail/seamonkey port into seamonkey
port so that seamonkey is not built twice, and enigmail-seamonkey is
built as a subpackage of seamonkey, like lightning...
add @@conflict/@@pkgpath markers to allow seamless updates from previous
enigmail-seamonkey packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2011/07/28 08:12:50 landry Exp $
d129 2
@


1.83
log
@Security fix for CVE-2011-2691 backported from png 1.4.8, from naddy@@.

See https://bugzilla.mozilla.org/show_bug.cgi?id=669863 for details.

firefox35, firefox36 and sunbird use png 1.2.35 and will need other fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2011/07/24 07:31:57 landry Exp $
d5 1
d13 1
a13 1
MULTI_PACKAGES =	-main -lightning
d17 2
d25 1
a25 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc prldap60 suite xpcom xul calbasecomps
d36 1
d60 3
a62 1
EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX}
d64 2
a65 1
DISTFILES+=	${EXTRACT_ONLY}
d84 4
d101 10
d114 3
a116 1
	calendar-timezones calendar-timezones@@mozilla.org
@


1.82
log
@Update to seamonkey 2.2, based on Firefox/Thunderbird/Gecko 5.
See http://www.seamonkey-project.org/releases/seamonkey2.2/ for details.
- sync ipc patches from Firefox
- remove a bunch of useless patches
- install under lib/seamonkey-2.2 instead of using our homegrown install
  target.
- install langpacks as plain xpi instead of unzipping them, greatly
  shrinking PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2011/06/08 18:15:29 rpointel Exp $
d14 1
@


1.81
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/06/02 13:41:41 ajacoutot Exp $
d5 1
d7 2
a8 2
MOZILLA_VERSION=	2.0.14
MOZILLA_BRANCH =	1.9.1
d13 2
a14 4
PKGNAME-main =		${PKGNAME}
REVISION-main=		1
PKGNAME-lightning =	lightning-seamonkey-1.0beta1
REVISION-lightning =	18
d18 1
a18 1
SO_VERSION=	16.1
d21 1
a21 19
MOZILLA_LIBS =	accessibility appcomps auth autoconfig caps chardet chrome commandlines \
	calbasecomps composer cookie docshell embedcomponents fileview gkgfxthebes gklayout \
	gkplugin htmlpars i18n imgicon imglib2 import intlapp jar50 jsd \
	mork mozfind mozldap msgsmime necko nsappshell oji permissions pipboot \
	pipnss pippki places pref rdf remoteservice satchel spellchecker \
	storagecomps suite system-pref tkautocomplete toolkitcomps txmgr uconv \
	ucvmath universalchardet unixproxy webbrwsr widget_gtk2 windowds \
	xpautocomplete xpconnect xpinstall zipwriter gfxpsshar gkgfx gtkxtbin \
	jsj ldap60 ldif60 mozjs prldap60 ssldap60 thebes xpcom \
	xpcom_core xul nullplugin unixprintplugin


FLAVOR ?=
.if ${FLAVOR:L:Mdebug}
MOZILLA_LIBS += addrbook bayesflt fts3tok localmail mailnews mailview mime \
	mimeemitter msgcompose msgdb msgimap msgmdn msgnews vcard msgbaseutil
.else
MOZILLA_LIBS+=	mail
.endif
d33 1
a33 2
LANGUAGES=	be \
		ca \
d36 2
d40 1
a41 1
		gl \
d44 1
a44 1
		ka \
d68 1
a68 1
MODGNU_CONFIG_GUESS_DIRS+=	${WRKSRC}/directory/c-sdk/config/autoconf
d70 5
a74 2
LIB_DEPENDS-lightning = ${BUILD_PKGPATH},-main
WANTLIB-lightning =	seamonkey/mozjs seamonkey/xpcom c m stdc++ nspr4 plc4 plds4
d77 1
d79 4
d86 2
a87 2
MOZILLA_DATADIRS=	chrome components defaults dictionaries extensions \
		greprefs isp modules plugins res searchplugins
d89 5
a93 4
MOZILLA_AUTOCONF_DIRS =	directory/c-sdk mozilla mozilla/js/src
MOZILLA_SUBST_FILES +=	config/autoconf.mk.in

GDATADIR =	${MOZ}/extensions/{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}
d98 6
a103 2
	${UNZIP} -oq ${FULLDISTDIR}/seamonkey-${MOZILLA_VERSION}.${language}.langpack.xpi \
		-d ${MOZ}/extensions/langpack-${language}@@seamonkey.mozilla.org
d105 4
a108 1
	unzip -q ${MOB}/../xpi-stage/gdata-provider.xpi -d ${GDATADIR}
@


1.80
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/04/29 08:04:04 landry Exp $
d13 1
a13 1
REVISION-main=		0
d15 1
a15 1
REVISION-lightning =	17
@


1.79
log
@Update to seamonkey 2.0.14.
Fixes MFSA 2011-12,13,14,15,16 & 18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/04/28 20:44:47 landry Exp $
d13 1
@


1.78
log
@Let's use a common DIST_SUBDIR for all mozilla ports so that it's easier
to clean the gigabytes of src tarballs previously piling up in distfiles/.
Update distinfo accordingly.
Looks sane to jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/03/24 11:41:11 landry Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.13
d14 1
a14 2
REVISION-lightning =	16
REVISION-main =		0
@


1.77
log
@Assorted fixes for:
https://bugzilla.mozilla.org/show_bug.cgi?id=643137 (crash on sparc64
when displaying opentypes fonts, fix from tobias ulmer)
https://bugzilla.mozilla.org/show_bug.cgi?id=644012 (crash on ssl certs
with empty issuer name, pointed our by roberth at openbsd dot pap dot st
and mikolaj kucharski)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/03/23 15:27:04 landry Exp $
a78 2

DIST_SUBDIR=	seamonkey-${MOZILLA_VERSION}
@


1.76
log
@Updates to firefox35 3.5.18, mozilla-firefox 3.6.16 & seamonkey 2.0.3.
All fixing MFSA-2011-11, see
http://blog.mozilla.com/security/2011/03/22/firefox-blocking-fraudulent-certificates/ and
https://blog.torproject.org/blog/detecting-certificate-authority-compromises-and-web-browser-collusion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/03/22 13:18:26 landry Exp $
d15 1
@


1.75
log
@Remove the .if for system sqlite, now every port using mozilla MODULE
uses it. Bump dependency to 3.7.5 to ensure it has unlock_notify for
ffx4, and bump all corresponding REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/03/03 14:07:20 landry Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.12
d14 1
a14 2
REVISION-lightning =	15
REVISION-main =		0
@


1.74
log
@Update to seamonkey 2.0.12. Fixes MFSA 2011-08 & 2011-10
Patches for the cups printing crash merged upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/01/28 21:38:12 landry Exp $
d14 2
a15 1
REVISION-lightning =	14
@


1.73
log
@Fix an unaligned access on sparc64 leading to random crashes when
mozilla tries to read a malformed ICC profile on random image content
found on the web.
backport of http://hg.mozilla.org/mozilla-central/rev/e8207773d54d
ref: https://bugzilla.mozilla.org/show_bug.cgi?id=629057
issue reported and fix found by naddy@@
ok naddy@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/01/18 12:37:44 landry Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.11
a12 1
REVISION-main =		3
d14 1
a14 1
REVISION-lightning =	13
@


1.72
log
@mozilla.port.mk makes all mozilla ports use the sydney_audio_sndio.c
file from www/mozilla-firefox, so remove old instances of that file that
weren't updated with last commits (and were unused anyway)
While here bump all REVISIONs after LIB_DEPENDS change.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/01/16 16:56:02 landry Exp $
d13 1
a13 1
REVISION-main =		2
@


1.71
log
@Forgot to bump REVISION-lightning. All mozilla and no play makes jack a
dull boy.
Spotted by naddy@@, thanks...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/01/14 22:56:11 landry Exp $
d13 1
a13 1
REVISION-main =		1
d15 1
a15 1
REVISION-lightning =	12
@


1.70
log
@Add same PRAGMA secure_delete patch to seamonkey and ffx35 for the sake
of consistency, and build against systemwide sqlite.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/01/05 08:22:30 dcoppa Exp $
d15 1
a15 1
REVISION-lightning =	11
@


1.69
log
@Apply the cups fix to the rest of Mozilla apps (mozilla-thunderbird,
sunbird, firefox35, seamonkey).

Ok & tested by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/12/10 10:04:21 landry Exp $
d13 1
a13 1
REVISION-main =		0
d19 1
a19 1
SO_VERSION=	16.0
d30 1
a30 1
	jsj ldap60 ldif60 mozjs prldap60 sqlite3 ssldap60 thebes xpcom \
@


1.68
log
@Update to seamonkey 2.0.11.
Fixes MFSA 2010-74->84.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/12/01 15:16:30 dcoppa Exp $
d13 1
d15 1
a15 1
REVISION-lightning =	10
@


1.67
log
@Oops! Missed a bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/12/01 15:00:12 dcoppa Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.10
a12 1
REVISION-main = 	1
d14 1
a14 1
REVISION-lightning =	9
@


1.66
log
@Fix Kerberos/GSSAPI authentication within mozilla ports.
OpenBSD does not have gssapi_krb5. So, to avoid undefined symbol
errors, link libxul with "-lkrb5 -lcrypto".

OK phessler@@, landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/11/22 08:36:54 espie Exp $
d15 1
a15 1
REVISION-lightning =	8
@


1.65
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/11/11 09:55:05 jasper Exp $
d13 1
a13 1
REVISION-main = 	0
@


1.64
log
@- also switch to pkg-readmes, reminded by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/10/28 13:45:26 landry Exp $
d83 1
a83 1
BUILD_DEPENDS+=	:unzip-*:archivers/unzip
d90 1
a90 1
LIB_DEPENDS-lightning = ::${BUILD_PKGPATH},-main
@


1.63
log
@Security update to seamonkey 2.0.10.
Fixes MFSA2010-73/CVE-2010-3765/bz #607222.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/10/27 13:02:38 landry Exp $
d13 1
@


1.62
log
@Do the PFRAG dance so that it provides a working debug-flavoured
package. Add a run-mozilla.sh patch to make it found our gdb by default.
Teach users how to properly debug mozilla ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/10/24 21:40:10 ajacoutot Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.9
d14 1
a14 2
REVISION-lightning =	7
REVISION-main =		0
@


1.61
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/10/22 19:21:06 landry Exp $
d14 2
a15 1
REVISION-lightning =	6
d18 1
a18 2
# must be in sync with SO_VERSION in mail/mozilla-thunderbird
# for mail/enigmail and productivity/sunbird,-seamonkey to work fine
d24 1
a24 1
	gkplugin htmlpars i18n imgicon imglib2 import intlapp jar50 jsd mail \
d32 9
@


1.60
log
@Update to seamonkey 2.0.9. Bump lightning REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/10/19 08:02:57 espie Exp $
a75 1
USE_X11=	Yes
@


1.59
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/10/18 07:15:55 landry Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.8
d14 1
a14 2
REVISION-main=		2
REVISION-lightning =	5
@


1.58
log
@Fix WANTLIB again after cairo's last commit where X11-xcb went away.
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/10/15 07:16:19 landry Exp $
d78 1
@


1.57
log
@Switch all mozilla-based ports to using the bundled cairo, mozilla doesn't
like the systemwide cairo since 1.10.x update (crashes,gifs not displaying
properly), and there's few hope it will be fixed in 1.9.2.x branch.
Fix WANTLIB while here and bump REVISIONs.
Reported by dcoppa@@, also found in upstream bz #597174 and various linux
vendors bugzillas (red hat #628331, mdv #60738, gentoo #337813).
devel/xulrunner will follow in a few..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/10/11 08:19:04 jasper Exp $
d14 2
a15 2
REVISION-main=		1
REVISION-lightning =	4
@


1.56
log
@- fix WANTLIB after cairo update.

(please note chromium is still broken, but will be dealt with soon)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/09/19 19:21:38 landry Exp $
d14 2
a15 2
REVISION-main=		0
REVISION-lightning =	3
@


1.55
log
@Bugfix update to seamonkey 2.0.4. Bump lightning REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/09/12 17:59:31 landry Exp $
d14 2
a15 1
REVISION-lightning =	2
@


1.54
log
@Update seamonkey to 2.0.7, fixing a bunch of MFSA (2010-49->63)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/09/01 10:18:06 sthen Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.7
d14 1
a14 1
REVISION-lightning =	1
@


1.53
log
@missing python bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/07/27 16:55:21 landry Exp $
d6 1
a6 1
MOZILLA_VERSION=	2.0.6
a12 1
REVISION-main =		1
d14 1
a14 1
REVISION-lightning =	0
@


1.52
log
@Build lightning as a subpackage of seamonkey. Add necessary
@@pkgpath/@@conflict markers for seamless upgrades from
productivity/sunbird,-seamonkey. This also installs gdata provider
extension as part of lightning subpackage, for read/write access to
google calendars within lightning.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/07/22 21:48:02 landry Exp $
d13 1
a13 1
REVISION-main =		0
d15 1
@


1.51
log
@Security/Reliability update to seamonkey 2.0.6, Fixes
MFSA-2010-37,39,40,41,42,45,46,47.
http://www.mozilla.org/security/known-vulnerabilities/seamonkey20.html
While here comment --enable-calendar, shouldn't have snuck in yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/07/17 22:53:13 landry Exp $
d3 2
a4 1
COMMENT =	Mozilla application suite
d11 6
d23 1
a23 1
	composer cookie docshell embedcomponents fileview gkgfxthebes gklayout \
d81 3
d85 1
a85 2
# oops, notyet
# CONFIGURE_ARGS +=	--enable-calendar
d95 2
d103 1
@


1.50
log
@Fix make fetch/DISTFILES. From Vadim Zhukov, thx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/07/09 15:39:00 landry Exp $
d5 1
a5 1
MOZILLA_VERSION=	2.0.5
a9 2
PKGNAME =	${MOZILLA_PROJECT}-${MOZILLA_VERSION}p0

d75 2
a76 1
CONFIGURE_ARGS +=	--enable-calendar
@


1.49
log
@Switch www/seamonkey to www/mozilla MODULE. cvs diff Makefile | diffstat
says it all: 21 insertions(+), 118 deletions(-)
While here, patch and subst the appropriate config/autoconf.mk.in file,
and remove a leftover patch from ffx35. Switch PLIST to use
MOZILLA_PROJECT too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/06/28 21:34:39 landry Exp $
d36 1
a36 1
MASTER_SITES0=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${VER}/langpack/
d61 1
@


1.48
log
@Update to seamonkey 2.0.5, fixes yet another of MFSA, see
http://www.mozilla.org/security/known-vulnerabilities/seamonkey20.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/06/23 17:11:50 landry Exp $
d3 1
a3 2
SHARED_ONLY=	Yes
ONLY_FOR_ARCHS=	alpha amd64 i386 powerpc sparc sparc64
d5 4
a8 1
COMMENT=	integrated mozilla application suite
d10 1
a10 4
VER=		2.0.5
DISTNAME=	seamonkey-${VER}.source
PKGNAME=	seamonkey-${VER}
EXTRACT_SUFX=	.tar.bz2
d17 1
a17 1
.for _lib in accessibility appcomps auth autoconfig caps chardet chrome commandlines \
a26 2
SHARED_LIBS+=	${_lib}	${SO_VERSION}
.endfor
a29 2
HOMEPAGE=	http://www.mozilla.org/projects/seamonkey/

a35 1
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${VER}/source/
a58 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX}
d62 1
a62 1
DISTFILES+=	seamonkey-${VER}.${language}.langpack.xpi:0
d65 1
a65 1
DIST_SUBDIR=	seamonkey-${VER}
d67 2
a68 18
MODULES=	devel/gettext lang/python
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
		:zip->=2.3:archivers/zip \
		:unzip-*:archivers/unzip
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		nspr4.>=21,plc4.>=21,plds4.>=21:nspr->=4.8:devel/nspr \
		nss3.>=25,smime3.>=25,softokn3.>=25,ssl3.>=25:nss->=3.12.6:security/nss

RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
WANTLIB=	c glib-2.0 m pthread stdc++ sndio \
		X11 Xau Xcomposite Xcursor Xdamage Xdmcp \
		Xext Xfixes Xi Xinerama Xrandr Xrender Xt atk-1.0 \
		cairo expat fontconfig freetype glitz gmodule-2.0 \
		gobject-2.0 gthread-2.0 jpeg pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread-stubs xcb z gio-2.0 \
		xcb-render xcb-render-util

VMEM_WARNING=	Yes
a70 1
USE_GMAKE=	Yes
d73 4
a76 31
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/mozilla/build/autoconf \
				${WRKSRC}/mozilla/js/src/build/autoconf \
				${WRKSRC}/directory/c-sdk/config/autoconf

AUTOCONF_VERSION= 2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS=	--with-system-jpeg=${LOCALBASE}	\
		--with-system-zlib=/usr/lib	\
		--with-system-nspr		\
		--with-system-nss		\
		--with-pthreads			\
		--disable-optimize		\
		--disable-debug			\
		--disable-tests			\
		--disable-pedantic		\
		--disable-installer		\
		--disable-updater		\
		--disable-gnomeui		\
		--disable-gnomevfs		\
		--disable-dbus			\
		--enable-default-toolkit=cairo-gtk2	\
		--enable-xinerama		\
		--enable-svg			\
		--enable-svg-renderer=cairo	\
		--enable-system-cairo		\
		--enable-canvas			\
		--enable-application=suite

#		--disable-javaxpcom		\
# from browser/config/mozconfig
CONFIGURE_ARGS+=--enable-application=suite
d80 2
a81 11
MAKE_ENV=	MOZ_CO_PROJECT=suite \
		LD_LIBRARY_PATH="${WRKSRC}/mozilla/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
CONFIGURE_ENV=	${MAKE_ENV} \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		MOZ_ENABLE_COREXFONTS=1 \
		topsrcdir=${WRKSRC}

WRKDIST=	${WRKDIR}/comm-1.9.1
d83 2
a84 5
MOB=		${WRKSRC}/mozilla/dist/bin
MOZ=		${PREFIX}/seamonkey

DATADIRS=	chrome components defaults dictionaries extensions \
		greprefs isp modules plugins res searchplugins
d86 1
a86 30
post-extract:
	cp -f ${FILESDIR}/sydney_audio_sndio.c \
		${WRKSRC}/mozilla/media/libsydneyaudio/src/
	@@cp -f ${FILESDIR}/nsSound.cpp ${WRKSRC}/mozilla/widget/src/gtk2/

pre-configure:
	cd ${WRKSRC}/directory/c-sdk && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	cd ${WRKSRC}/mozilla && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	cd ${WRKSRC}/mozilla/js/src && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	${SUBST_CMD} ${WRKSRC}/mozilla/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/mozilla/xpcom/io/nsAppFileLocationProvider.cpp \
		${WRKSRC}/mozilla/extensions/spellcheck/hunspell/src/mozHunspell.cpp \
		${WRKSRC}/mozilla/build/unix/mozilla.in \
		${WRKSRC}/mozilla/toolkit/xre/nsXREDirProvider.cpp

do-install:
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \;
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
	${INSTALL_DATA} ${MOB}/*.ini ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/seamonkey ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/mozilla-xremote-client \
		${MOB}/regxpcom ${MOB}/seamonkey-bin ${MOZ}
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
		${MOZ}/README.OpenBSD
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
d89 1
a89 1
	${UNZIP} -oq ${FULLDISTDIR}/seamonkey-${VER}.${language}.langpack.xpi \
a91 5
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	${SUBST_CMD} -c ${FILESDIR}/seamonkey.desktop \
		${PREFIX}/share/applications/seamonkey.desktop
	chown ${SHAREOWN}:${SHAREGRP} \
		${PREFIX}/share/applications/seamonkey.desktop \
@


1.47
log
@Bump PKGNAME/SO_VERSION to chase www/mozilla-thunderbird update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/06/20 19:15:03 landry Exp $
d8 1
a8 1
VER=		2.0.4
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p2
d88 2
a89 1
		pangoft2-1.0 pixman-1 png pthread-stubs xcb z gio-2.0
@


1.46
log
@As done in ffx/tb, remove patches applied to local copy of nss/nspr, as
seamonkey uses systemwide nss/nspr. While here dont' call autojunk in
nsprpub/, and bump PKGNAME to be on the safe side.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/04/27 21:03:25 landry Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p1
d15 1
a15 1
SO_VERSION=	15.0
@


1.45
log
@Same change as done in productivity/sunbird and mail/mozilla-thunderbird,
harmonize default search paths for systemwide mozilla extensions and
plugins to ${LOCALBASE}/lib/mozilla/{plugins,extensions}. The
install.rdf files take care anyway of telling with which mozapp an xpi
extension is compatible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/04/03 09:30:14 landry Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
a97 1
				${WRKSRC}/mozilla/nsprpub/build/autoconf \
a156 1
	cd ${WRKSRC}/mozilla/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
@


1.44
log
@Major update to seamonkey 2.0.4, now built upon mozilla-1.9.1/firefox
3.5/thunderbird 3 codebase. See for details:
http://www.seamonkey-project.org/releases/seamonkey2.0.4/
Backing up your profile before upgrading is recommended..
Update also largely based on www/firefox35 port.
Tested on i386/amd64/sparc64/powerpc by myself and on alpha by naddy@@

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/01/30 19:08:30 jolan Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
d160 1
@


1.43
log
@fix MASTER_SITES, ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/12/22 13:02:12 sthen Exp $
d8 1
a8 1
VER=		1.1.18
d10 2
a11 1
PKGNAME=	seamonkey-${VER}p1
d13 3
a15 1
SO_VERSION=	11.0
d18 10
a27 15
.for _lib in accessibility addrbook appcomps auth autoconfig bayesflt \
	caps chrome composer cookie docshell editor embedcomponents \
	fileview gfx_gtk gfxps gklayout gkplugin htmlpars i18n imglib2 \
	impComm4xMail impText import jar50 jsd localmail mailnews \
	mailview mime mimeemitter mork mozfind mozldap msgcompose \
	msgdb msgimap msgmdn msgnews msgsmime myspell necko necko2 \
	nsappshell nsprefm oji p3p permissions pipboot pipnss pippki \
	pref profile rdf remoteservice searchservice spellchecker \
	sqlite3 sroaming storagecomps system-pref transformiix txmgr \
	typeaheadfind uconv ucvmath universalchardet vcard wallet \
	walletviewers webbrwsr websrvcs widget_gtk2 xmlextras \
	xpcom_compat_c xpconnect xpinstall xremoteservice gfxpsshar \
	gkgfx gtkembedmoz gtkxtbin jsj ldap50 mozjs msgbaseutil \
	prldap50 xpcom xpcom_compat xpcom_core xpistub nullplugin \
	unixprintplugin
d41 2
a42 2
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${VER}/
MASTER_SITES0=	http://openbsddistfiles.org/martynas/mozilla/seamonkey/langpacks/
d44 20
a63 18
LANGUAGES=	be-BY 1.1.9 \
		ca-AD 1.1.15 \
		cs-CZ 1.1.17 \
		de-AT 1.1.18 \
		el-GR 1.1.2 \
		es-ES 1.1.13 \
		fr-FR 1.1.16 \
		he-IL 1.1.2 \
		hu-HU 1.1.16 \
		it-IT 1.1.17 \
		lt-LT 1.1.18 \
		nl-NL 1.1.17 \
		pl-PL 1.1.18 \
		pt-BR 1.1.18 \
		ru-RU 1.1.18 \
		ur-PK 1.1.9 \
		sv-SE 1.1.12
BINLANGS=	be-BY el-GR fr-FR pl-PL pt-BR
d66 1
d68 2
a69 2
.for language version in ${LANGUAGES}
DISTFILES+=	seamonkey-${version}.${language}.langpack.xpi:0
a71 3
EXTRACT_CASES += *.xpi) \
	${UNZIP} -oq ${FULLDISTDIR}/$$archive -d ${WRKDIR}/`basename $$archive .langpack.xpi | sed "s/seamonkey-.*\.//"`;;

d74 1
a74 1
MODULES=	devel/gettext
d80 1
a80 1
		nss3.>=23,smime3.>=23,softokn3.>=23,ssl3.>=23:nss->=3.12.3:security/nss
d83 1
a83 1
WANTLIB=	c glib-2.0 m pthread stdc++ \
d85 1
a85 1
		Xext Xfixes Xft Xi Xinerama Xrandr Xrender Xt atk-1.0 \
d88 1
a88 1
		pangoft2-1.0 pangox-1.0 pixman-1 png pthread-stubs xcb z gio-2.0
d96 3
a98 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf \
a103 1
		--with-system-png=${LOCALBASE}	\
a104 1
		--with-pthreads			\
d107 1
a107 1
		--enable-xft			\
a108 1
		--enable-default-toolkit=gtk2	\
d116 2
d122 2
a123 2
		--disable-javaxpcom		\
		--enable-canvas
d125 1
d129 2
d132 1
a132 1
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
d141 1
a141 1
WRKDIST=	${WRKDIR}/mozilla
d143 1
a143 1
MOB=		${WRKSRC}/dist/bin
d146 2
a147 2
DATADIRS=	chrome components defaults dictionaries greprefs \
		init.d plugins res searchplugins
d150 3
a152 8
	@@cp -f ${FILESDIR}/nsSound.cpp ${WRKSRC}/widget/src/gtk2/
.for i in ${BINLANGS}	# normalize
	@@mv -f ${WRKDIR}/$i/bin/* ${WRKDIR}/$i/
	@@rmdir ${WRKDIR}/$i/bin
.endfor
.for language version in ${LANGUAGES}
	@@rm -f ${WRKDIR}/${language}/chrome/*-{mac,win}.jar
.endfor
d155 8
a162 7
	@@cd ${WRKSRC}/directory/c-sdk && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/rdf/chrome/tools/chromereg/Makefile.in \
		${WRKSRC}/xpfe/bootstrap/mozilla.in
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp
d171 1
a171 2
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
	${INSTALL_DATA} ${WRKSRC}/LICENSE ${MOZ}
d174 1
a174 1
	${INSTALL_PROGRAM} ${MOB}/mozilla-xremote-client ${MOB}/regchrome \
d176 7
a182 7
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		< ${FILESDIR}/README.OpenBSD > ${MOZ}/README.OpenBSD
	${INSTALL_MAN} ${WRKSRC}/dist/man/man1/seamonkey.1 ${PREFIX}/man/man1/
.for language version in ${LANGUAGES}
	${INSTALL_DATA} ${WRKDIR}/${language}/chrome/*.jar ${MOZ}/chrome/
	sh ${FILESDIR}/genchrome ${WRKDIR}/${language}/install.js \
		${language} >> ${MOZ}/chrome/installed-chrome.txt
d185 4
a188 3
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		< ${FILESDIR}/seamonkey.desktop > \
			${PREFIX}/share/applications/seamonkey.desktop
@


1.42
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2009/11/17 23:07:45 ajacoutot Exp $
d44 1
a44 1
MASTER_SITES0=	http://www.openbsddistfiles.org/~martynas/mozilla/seamonkey/langpacks/
@


1.41
log
@Firefox and Seamonkey bundle their own libnss3, so use same workaround
as for security/nss:
SHA1_Update conflicts with openssl which may be dynamically loaded
at runtime via libcups or libgssapi so causing a crash due to using
the wrong binding.  So rename here to avoid conflict.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2009/09/10 21:45:38 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
@


1.40
log
@security update to seamonkey-1.1.18.  MFSA 2009-43, MFSA 2009-42
http://www.mozilla.org/security/known-vulnerabilities/seamonkey11.html#seamonkey1.1.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2009/08/10 06:34:56 kili Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
d12 1
a12 1
SO_VERSION=	10.0
@


1.39
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2009/06/24 01:08:05 martynas Exp $
d8 1
a8 1
VER=		1.1.17
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p1
d23 1
a23 1
	sroaming storagecomps system-pref transformiix txmgr \
d44 1
a44 1
MASTER_SITES0=	http://mirrors.protection.cx/~martynas/mozilla/seamonkey/langpacks/
d49 1
a49 1
		de-AT 1.1.17 \
d56 1
a56 1
		lt-LT 1.1.12 \
d58 3
a60 3
		pl-PL 1.1.17 \
		pt-BR 1.1.17 \
		ru-RU 1.1.17 \
d81 2
a82 2
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr \
		nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
@


1.38
log
@update language packs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2009/06/23 18:38:54 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
d90 1
a90 1
		pangoft2-1.0 pangox-1.0 pixman-1 png z gio-2.0
@


1.37
log
@seamonkey-1.1.17.  MFSA 2009-33; MFSA 2009-32; MFSA 2009-29; MFSA
2009-27; MFSA 2009-26; MFSA 2009-24; MFSA 2009-21; MFSA 2009-17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2009/05/30 20:36:33 landry Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
d57 1
a57 1
		nl-NL 1.1.16 \
@


1.36
log
@Register seamonkey as a handler for various html/xml mimetypes, as
done in firefox desktop file. From James Wright on ports@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/05/03 15:47:27 martynas Exp $
d8 1
a8 1
VER=		1.1.16
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p1
d48 2
a49 2
		cs-CZ 1.1.16 \
		de-AT 1.1.16 \
d52 1
a52 1
		fr-FR 1.1.15 \
d54 2
a55 2
		hu-HU 1.1.11 \
		it-IT 1.1.15 \
d57 4
a60 4
		nl-NL 1.1.15 \
		pl-PL 1.1.15 \
		pt-BR 1.1.16 \
		ru-RU 1.1.16 \
@


1.35
log
@sndio backend for mozilla 1.8 branch;  get rid of esound
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/04/11 13:47:37 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
@


1.34
log
@security update to seamonkey-1.1.16;  fixes a few critical vulns
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/03/24 22:49:59 landry Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
d84 1
a84 2
RUN_DEPENDS=	:esound-*:audio/esound \
		:desktop-file-utils-*:devel/desktop-file-utils
d148 1
@


1.33
log
@Fix seamonkey.desktop Categories, PIM doesn't exist. Now seamonkey
correctly appears in Network sub-menu in desktop menu. Bump.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2009/03/19 22:03:42 martynas Exp $
d8 1
a8 1
VER=		1.1.15
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
d47 3
a49 3
		ca-AD 1.1.14 \
		cs-CZ 1.1.15 \
		de-AT 1.1.15 \
d52 1
a52 1
		fr-FR 1.1.14 \
d55 1
a55 1
		it-IT 1.1.14 \
d57 1
a57 1
		nl-NL 1.1.14 \
d59 2
a60 2
		pt-BR 1.1.14 \
		ru-RU 1.1.14 \
@


1.32
log
@- security update to seamonkey-1.1.15.  MFSA 2009-10, MFSA 2009-09,
MFSA 2009-07, MFSA 2009-05, MFSA 2009-01.
http://www.mozilla.org/security/known-vulnerabilities/seamonkey11.html#seamonkey1.1.15
- mirror langpacks, since suddenly mozilla decided to mirror only
last three releases...
- sync WANTLIB
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/01/09 15:54:31 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
@


1.31
log
@- do not run with a predictable directory as root:  firefox,
thunderbird, seamonkey, xulrunner
- add comment for xulrunner why -devel needs to be bumped
suggested and ok naddy@@;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2008/12/18 21:05:59 martynas Exp $
d8 1
a8 1
VER=		1.1.14
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
d44 1
a44 10
.for id version in \
	0 1.1.2 \
	1 1.1.8 \
	2 1.1.9 \
	4 1.1.11 \
	5 1.1.12 \
	6 1.1.13 \
	7 1.1.14
MASTER_SITES${id}+=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${version}/contrib-localized/
.endfor
d46 17
a62 17
LANGUAGES=	be-BY 2 1.1.9 \
		ca-AD 1 1.1.8 \
		cs-CZ 7 1.1.14 \
		de-AT 7 1.1.14 \
		el-GR 0 1.1.2 \
		es-ES 6 1.1.13 \
		fr-FR 6 1.1.13 \
		he-IL 0 1.1.2 \
		hu-HU 4 1.1.11 \
		it-IT 4 1.1.11 \
		lt-LT 5 1.1.12 \
		nl-NL 6 1.1.13 \
		pl-PL 7 1.1.14 \
		pt-BR 7 1.1.14 \
		ru-RU 6 1.1.13 \
		ur-PK 2 1.1.9 \
		sv-SE 5 1.1.12
d67 2
a68 2
.for language id version in ${LANGUAGES}
DISTFILES+=	seamonkey-${version}.${language}.langpack.xpi:${id}
d91 1
a91 1
		pangoft2-1.0 pangox-1.0 pixman-1 png z
d153 1
a153 1
.for language id version in ${LANGUAGES}
d182 1
a182 1
.for language id version in ${LANGUAGES}
@


1.31.2.1
log
@MFC:
security update to seamonkey-1.1.16;  fixes a few critical vulns

http://www.mozilla.org/security/known-vulnerabilities/seamonkey11.html#seamonkey1.1.16

this update also resolves what was fixed in 1.1.15:
MFSA 2009-10, MFSA 2009-09, MFSA 2009-07, MFSA 2009-05, MFSA 2009-01.

also:
- mirror langpacks, since suddenly mozilla decided to mirror only
last three releases...
- sync WANTLIB

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/04/11 13:47:37 martynas Exp $
d8 1
a8 1
VER=		1.1.16
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
d44 10
a53 1
MASTER_SITES0=	http://mirrors.protection.cx/~martynas/mozilla/seamonkey/langpacks/
d55 17
a71 17
LANGUAGES=	be-BY 1.1.9 \
		ca-AD 1.1.15 \
		cs-CZ 1.1.16 \
		de-AT 1.1.16 \
		el-GR 1.1.2 \
		es-ES 1.1.13 \
		fr-FR 1.1.15 \
		he-IL 1.1.2 \
		hu-HU 1.1.11 \
		it-IT 1.1.15 \
		lt-LT 1.1.12 \
		nl-NL 1.1.15 \
		pl-PL 1.1.15 \
		pt-BR 1.1.16 \
		ru-RU 1.1.16 \
		ur-PK 1.1.9 \
		sv-SE 1.1.12
d76 2
a77 2
.for language version in ${LANGUAGES}
DISTFILES+=	seamonkey-${version}.${language}.langpack.xpi:0
d100 1
a100 1
		pangoft2-1.0 pangox-1.0 pixman-1 png z gio-2.0
d162 1
a162 1
.for language version in ${LANGUAGES}
d191 1
a191 1
.for language version in ${LANGUAGES}
@


1.30
log
@security update to seamonkey-1.1.14.  MFSA 2008-68; MFSA 2008-67;
MFSA 2008-66; MFSA 2008-65; MFSA 2008-64; MFSA 2008-61; MFSA 2008-60.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/11/13 17:35:44 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
@


1.29
log
@security update to seamonkey-1.1.13.  MFSA 2008-58; MFSA 2008-57;
MFSA 2008-56; MFSA 2008-55; MFSA 2008-54; MFSA 2008-53; MFSA 2008-52;
MFSA 2008-50; MFSA 2008-49; MFSA 2008-48; MFSA 2008-47.
http://www.mozilla.org/security/known-vulnerabilities/seamonkey11.html#seamonkey1.1.13
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/10/24 21:06:58 jasper Exp $
d8 1
a8 1
VER=		1.1.13
a47 1
	3 1.1.10 \
d50 2
a51 1
	6 1.1.13
d57 2
a58 2
		cs-CZ 5 1.1.12 \
		de-AT 6 1.1.13 \
d60 2
a61 2
		es-ES 3 1.1.10 \
		fr-FR 5 1.1.12 \
d67 2
a68 2
		pl-PL 6 1.1.13 \
		pt-BR 5 1.1.12 \
@


1.28
log
@- add a .desktop file for seamonkey

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/09/24 19:29:16 martynas Exp $
d8 1
a8 1
VER=		1.1.12
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
d50 2
a51 1
	5 1.1.12
d58 1
a58 1
		de-AT 5 1.1.12 \
d61 1
a61 1
		fr-FR 2 1.1.9 \
d64 1
a64 1
		it-IT 2 1.1.9 \
d66 2
a67 2
		nl-NL 5 1.1.12 \
		pl-PL 5 1.1.12 \
d69 1
a69 1
		ru-RU 5 1.1.12 \
@


1.27
log
@security update to seamonkey-1.1.12.  MFSA 2008-45, MFSA 2008-44,
MFSA 2008-43, MFSA 2008-42, MFSA 2008-41, MFSA 2008-40, MFSA 2008-38,
MFSA 2008-37
http://www.mozilla.org/security/known-vulnerabilities/seamonkey11.html#seamonkey1.1.12
- rework to have enough MASTER_SITES for langpacks
ok naddy@@.  looks good to kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/09/18 13:37:41 ajacoutot Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
d92 2
a93 1
RUN_DEPENDS=	:esound-*:audio/esound
d195 4
@


1.26
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/07/25 17:41:06 martynas Exp $
d8 1
a8 1
VER=		1.1.11
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p1
d44 8
a51 2
.for i in 1.1.2 1.1.3 1.1.4 1.1.5 1.1.6 1.1.7 1.1.8 1.1.9 1.1.10 1.1.11
MASTER_SITES${i:C|.*([0-9])|\1|}+=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/$i/contrib-localized/
d54 17
a70 16
LANGUAGES=	be-BY 1.1.2 \
		ca-AD 1.1.8 \
		cs-CZ 1.1.11 \
		de-AT 1.1.11 \
		el-GR 1.1.2 \
		es-ES 1.1.10 \
		fr-FR 1.1.8 \
		he-IL 1.1.2 \
		hu-HU 1.1.9 \
		it-IT 1.1.8 \
		nl-NL 1.1.4 \
		pl-PL 1.1.10 \
		pt-BR 1.1.10 \
		ru-RU 1.1.11 \
		ur-PK 1.1.9 \
		sv-SE 1.1.9
d75 2
a76 2
.for l v in ${LANGUAGES}
DISTFILES+=	seamonkey-$v.$l.langpack.xpi:${v:C|.*([0-9])|\1|}
d160 2
a161 2
.for l v in ${LANGUAGES}
	@@rm -f ${WRKDIR}/$l/chrome/*-{mac,win}.jar
d189 4
a192 4
.for l v in ${LANGUAGES}
	${INSTALL_DATA} ${WRKDIR}/$l/chrome/*.jar ${MOZ}/chrome/
	sh ${FILESDIR}/genchrome ${WRKDIR}/$l/install.js $l \
		>> ${MOZ}/chrome/installed-chrome.txt
@


1.25
log
@document the new MOZ_PLUGIN_PATH behavior, bump pkgnames
pointed out, and looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/07/21 19:19:06 martynas Exp $
a97 1
SUBST_VARS=	LOCALBASE
@


1.24
log
@adapt for other mozilla projects claudio's diff of firefox to honor
MOZ_PLUGIN_PATH.  bump pkgnames
sure claudio@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/07/17 16:49:33 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
@


1.23
log
@security update to seamonkey-1.1.11.  MFSA 2008-34
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/07/05 00:42:31 martynas Exp $
d10 1
a10 1
PKGNAME=	seamonkey-${VER}
@


1.22
log
@- security update to seamonkey-1.1.10:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.10
- remove bogus hindi langpack, spotted by naddy@@
- security coreconf integrated upstream, remove
- fix linking, sync wantlib, add bin markers
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/04/01 10:14:58 martynas Exp $
d8 1
a8 1
VER=		1.1.10
d44 1
a44 1
.for i in 1.1.2 1.1.3 1.1.4 1.1.5 1.1.6 1.1.7 1.1.8 1.1.9 1.1.10
d50 2
a51 2
		cs-CZ 1.1.10 \
		de-AT 1.1.10 \
d61 1
a61 1
		ru-RU 1.1.10 \
@


1.21
log
@security update to seamonkey-1.1.9
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.9
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/02/22 12:55:49 martynas Exp $
d8 1
a8 1
VER=		1.1.9
d44 2
a45 2
.for i in 1.1.2 1.1.3 1.1.4 1.1.5 1.1.6 1.1.7 1.1.8 1.1.9
MASTER_SITES${i:E}+=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/$i/contrib-localized/
d49 3
a51 3
		ca-AD 1.1.4 \
		cs-CZ 1.1.9 \
		de-AT 1.1.9 \
d53 1
a53 1
		es-ES 1.1.8 \
a55 1
		hi-IN 1.1.7 \
d57 1
a57 1
		it-IT 1.1.6 \
d59 3
a61 3
		pl-PL 1.1.9 \
		pt-BR 1.1.9 \
		ru-RU 1.1.9 \
d63 2
a64 2
		sv-SE 1.1.8
BINLANGS=	be-BY el-GR fr-FR hi-IN pl-PL pt-BR
d69 1
a69 1
DISTFILES+=	seamonkey-$v.$l.langpack.xpi:${v:E}
d91 1
a91 1
		pangoft2-1.0 pangox-1.0 png z
d161 2
@


1.20
log
@update to seamonkey-1.1.8.  fixes MFSA 2008-01, MFSA 2008-02, MFSA
2008-03, MFSA 2008-05, MFSA 2008-06, MFSA 2008-07, MFSA 2008-09,
MFSA 2008-10.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/01/23 16:42:44 martynas Exp $
d8 1
a8 1
VER=		1.1.8
d44 1
a44 1
.for i in 1.1.2 1.1.3 1.1.4 1.1.5 1.1.6 1.1.7 1.1.8
d50 2
a51 2
		cs-CZ 1.1.8 \
		de-AT 1.1.8 \
d57 1
a57 1
		hu-HU 1.1.7 \
d60 4
a63 4
		pl-PL 1.1.8 \
		pt-BR 1.1.8 \
		ru-RU 1.1.8 \
		ur-PK 1.1.8 \
@


1.19
log
@- drop -devel
- move libraries to PLIST
improvements, testing and ok kurt@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/12/07 21:48:01 martynas Exp $
d8 1
a8 1
VER=		1.1.7
d10 1
a10 1
PKGNAME=	seamonkey-${VER}p0
d44 1
a44 1
.for i in 1.1.2 1.1.3 1.1.4 1.1.5 1.1.6 1.1.7
d50 2
a51 2
		cs-CZ 1.1.6 \
		de-AT 1.1.7 \
d53 2
a54 2
		es-ES 1.1.6 \
		fr-FR 1.1.6 \
d56 2
a57 1
		hi-IN 1.1.5 \
d60 5
a64 5
		pl-PL 1.1.7 \
		pt-BR 1.1.6 \
		ru-RU 1.1.6 \
		ur-PK 1.1.4 \
		sv-SE 1.1.6
@


1.18
log
@security update to seamonkey-1.1.7:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.7
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/10/24 20:10:45 martynas Exp $
d6 1
a6 2
COMMENT-main=	integrated mozilla application suite
COMMENT-devel=  devel files for Gecko
d10 1
a10 3
PKGNAME=	seamonkey-${VER}
PKGNAME-main=	seamonkey-${VER}
PKGNAME-devel=	seamonkey-devel-${VER}
a36 2
MULTI_PACKAGES= -main -devel

d78 2
a79 1
BUILD_DEPENDS=  :zip->=2.3:archivers/zip \
a83 1
WANTLIB=	c glib-2.0 m pthread stdc++
d85 3
a87 2
RUN_DEPENDS-main= :esound-*:audio/esound
WANTLIB-main=	${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage Xdmcp \
a92 4
LIB_DEPENDS-devel= ${MODGETTEXT_LIB_DEPENDS} IDL-2::devel/libIDL \
		seamonkey/mozjs,seamonkey/xpcom,seamonkey/xpcom_core:${PKGNAME-main}:www/seamonkey,-main
WANTLIB-devel=	${WANTLIB} nspr4 plc4 plds4

a147 1
DISTDIRS=	include idl
a165 5
	cd ${WRKSRC}/dist && \
		find ${DISTDIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DISTDIRS} ! -type d \
			-exec ${INSTALL_DATA} {} ${MOZ}/{} \;
d174 1
a174 1
	${INSTALL_SCRIPT} ${MOB}/seamonkey{,-config} ${PREFIX}/bin/
d176 2
a177 7
	${INSTALL_PROGRAM} ${MOB}/TestGtkEmbed \
		${MOB}/mozilla-xremote-client ${MOB}/nsinstall \
		${MOB}/regchrome ${MOB}/regxpcom ${MOB}/seamonkey-bin \
		${MOB}/xpcshell ${MOB}/xpicleanup ${MOB}/xpidl \
		${MOB}/xpt_dump ${MOB}/xpt_link ${MOZ}
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${WRKBUILD}/build/unix/*.pc ${PREFIX}/lib/pkgconfig
@


1.17
log
@security update to seamonkey-1.1.5:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.5
tweaks, ok naddy@@, kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/10/14 18:33:44 kurt Exp $
d9 1
a9 1
VER=		1.1.5
d49 1
a49 1
.for i in 1.1.5 1.1.4 1.1.3 1.1.2
d55 2
a56 2
		cs-CZ 1.1.5 \
		de-AT 1.1.5 \
d58 2
a59 2
		es-ES 1.1.4 \
		fr-FR 1.1.4 \
d61 2
a62 1
		it-IT 1.1.2 \
d64 6
a69 5
		pl-PL 1.1.5 \
		pt-BR 1.1.5 \
		ru-RU 1.1.5 \
		sv-SE 1.1.5
BINLANGS=	be-BY el-GR fr-FR pl-PL pt-BR
d88 1
a88 1
WANTLIB=	c glib-2.0 gthread-2.0 m pthread stdc++
d91 5
a95 5
WANTLIB-main=	${WANTLIB} X11 Xau Xcursor Xdmcp Xext Xfixes Xft \
		Xi Xinerama Xrandr Xrender Xt atk-1.0 cairo expat \
		fontconfig freetype glitz gmodule-2.0 gobject-2.0 \
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 pangox-1.0 \
		png z \
@


1.16
log
@- fix a 64-bit problem with the LiveConnect feature. From mozilla
  bug report: https://bugzilla.mozilla.org/show_bug.cgi?id=345866
  Eventually the java plugin will need this on amd64. okay martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/09/15 20:38:26 merdely Exp $
d9 1
a9 1
VER=		1.1.4
d12 2
a13 2
PKGNAME-main=	seamonkey-${VER}p0
PKGNAME-devel=	seamonkey-devel-${VER}p0
d49 1
a49 1
.for i in 1.1.4 1.1.3 1.1.2
d55 2
a56 2
		cs-CZ 1.1.3 \
		de-AT 1.1.4 \
d62 5
a66 5
		nl-NL 1.1.3 \
		pl-PL 1.1.4 \
		pt-BR 1.1.4 \
		ru-RU 1.1.4 \
		sv-SE 1.1.4
d86 1
a86 1
WANTLIB=	c glib-2.0 m pthread stdc++
a163 1
	@@cp ${FILESDIR}/xptc* ${WRKSRC}/xpcom/reflect/xptcall/src/md/unix/
@


1.15
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/08/10 23:22:11 martynas Exp $
d12 2
a13 2
PKGNAME-main=	seamonkey-${VER}
PKGNAME-devel=	seamonkey-devel-${VER}
@


1.14
log
@- security update to 1.1.4, fixes MFSA 2007-27 and MFSA 2007-26:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.4
- rearrange the way langpacks are handled, we're now able to distribute
more than ever before;
help, testing and ok naddy@@ and kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/07/24 19:33:15 naddy Exp $
d6 2
a7 2
COMMENT-main=	"integrated mozilla application suite"
COMMENT-devel=  "devel files for Gecko"
@


1.13
log
@SECURITY update to 1.1.3.
Fixes a rash of security vulnerabilities and bugs.  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/06/13 12:09:19 martynas Exp $
d9 1
a9 1
VER=		1.1.3
d49 3
a51 1
MASTER_SITES0=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${VER}/contrib-localized/
d53 15
a67 2
LANGUAGES=	cs-CZ de-AT pl-PL
BINLANGS=	pl-PL
d71 2
a72 2
.for i in ${LANGUAGES}
DISTFILES+=	seamonkey-${VER}.$i.langpack.xpi:0
d76 1
a76 1
	${UNZIP} -oq ${FULLDISTDIR}/$$archive -d ${WRKDIR}/`basename $$archive .langpack.xpi | sed "s/.*-${VER}\.//"`;;
d161 2
a162 2
.for i in ${LANGUAGES}
	@@rm -f ${WRKDIR}/$i/chrome/*-{mac,win}.jar
d199 3
a201 3
.for i in ${LANGUAGES}
	${INSTALL_DATA} ${WRKDIR}/$i/chrome/*.jar ${MOZ}/chrome/
	sh ${FILESDIR}/genchrome ${WRKDIR}/$i/install.js $i \
@


1.12
log
@soft fd to 128, as has been done for firefox; ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/06/08 11:49:47 martynas Exp $
d9 1
a9 1
VER=		1.1.2
d12 2
a13 2
PKGNAME-main=	seamonkey-${VER}p0
PKGNAME-devel=	seamonkey-devel-${VER}p0
d51 2
a52 2
LANGUAGES=	cs-CZ de-AT el-GR es-ES it-IT pl-PL pt-BR
BINLANGS=	el-GR pl-PL pt-BR
@


1.11
log
@security update to seamonkey-1.1.2
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.2

- be-BY, ca-AD, fr-FR, he-IL, ru-RU are gone;
- new el-GR, pt-BR language packs;
- WANTLIB for xenocara;
- use the combination of find(1) and install(1) to install the
{DATA,DIST}FILES, as suggested by kurt@@;
- remove the two patches that are already upstream;
- fmt;

ok kurt@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/04/22 15:04:39 martynas Exp $
d12 2
a13 2
PKGNAME-main=	seamonkey-${VER}
PKGNAME-devel=	seamonkey-devel-${VER}
@


1.10
log
@- include all supported language packs;
- generate chrome registry once (speeds up startup, esp.
with lots of chromes -- our case), noticed by kurt@@;
- work around pref-contentpacks bug;
discussed and tested by naddy@@, kurt@@, ajacoutot@@
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/04/07 17:41:12 martynas Exp $
d9 1
a9 1
VER=		1.1.1
d12 2
a13 2
PKGNAME-main=	seamonkey-${VER}p1
PKGNAME-devel=	seamonkey-devel-${VER}p1
d51 2
a52 2
LANGUAGES=	de-AT be-BY ca-AD cs-CZ es-ES fr-FR he-IL it-IT pl-PL ru-RU
BINLANGS=	be-BY fr-FR pl-PL
d74 5
a78 3
WANTLIB-main=	${WANTLIB} X11 Xau Xdmcp Xft Xinerama Xrender Xt atk-1.0 \
		cairo expat fontconfig freetype glitz gmodule-2.0 gobject-2.0 \
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 pangox-1.0 png z
d137 4
d159 10
a168 12
.for dir in include idl
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${WRKSRC}/dist && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
.for dir in chrome components defaults dictionaries greprefs init.d plugins \
	res searchplugins
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
	@@find ${MOZ} -type f -exec chmod 644 {} \;
.endfor
@


1.9
log
@bump -devel here, too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/04/06 14:39:33 martynas Exp $
d12 2
a13 2
PKGNAME-main=	seamonkey-${VER}p0
PKGNAME-devel=	seamonkey-devel-${VER}p0
d49 15
d66 2
a67 1
BUILD_DEPENDS=  :zip->=2.3:archivers/zip
d74 2
a75 2
WANTLIB-main=	${WANTLIB} X11 Xext Xft Xinerama Xrender Xt atk-1.0 \
		cairo fontconfig freetype glitz gmodule-2.0 gobject-2.0 \
d136 7
d172 3
a174 3
		${MOB}/regxpcom ${MOB}/seamonkey-bin ${MOB}/xpcshell \
		${MOB}/xpicleanup ${MOB}/xpidl ${MOB}/xpt_dump \
		${MOB}/xpt_link ${MOZ}
d180 5
@


1.8
log
@- make it check LOCALBASE/share/mozilla-dicts, the global dictionaries
location for all mozilla ports;
- regen patches (due to the current changes);
- bump pkgname;
discussed with naddy@@, kurt@@, ajacoutot@@
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/03/26 20:41:37 martynas Exp $
d13 1
a13 1
PKGNAME-devel=	seamonkey-devel-${VER}
@


1.7
log
@major update to seamonkey 1.1.1
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/03/16 17:20:55 naddy Exp $
d12 1
a12 1
PKGNAME-main=	seamonkey-${VER}
@


1.6
log
@SECURITY update to SeaMonkey 1.0.8; ok kurt@@, martynas

For details see
http://www.mozilla.org/projects/security/known-vulnerabilities.html#SeaMonkey
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/02/22 00:40:59 naddy Exp $
d3 1
d9 1
a9 1
VER=		1.0.8
d15 1
a15 1
SO_VERSION=	9.4
d18 15
a32 16
.for _lib in accessibility appcomps auth autoconfig browsercomps \
	browserdirprovider caps chrome commandlines composer cookie docshell \
	editor embedcomponents fileview freebl3 gfx_gtk gfxps gfxpsshar gkgfx \
	gklayout gkplugin gtkembedmoz gtkxtbin htmlpars i18n imglib2 inspector \
	jar50 jsd jsj mork mozfind mozjs necko necko2 nsappshell nss3 \
	nssckbi oji permissions pipboot pipnss pippki pref rdf \
	remoteservice searchservice smime3 softokn3 ssl3 system-pref \
	toolkitcomps transformiix txmgr uconv ucvmath universalchardet \
	webbrwsr websrvcs widget_gtk2 xmlextras xpcom xpcom_compat \
	xpcom_compat_c xpcom_core xpconnect xpinstall xpistub xul \
	addrbook bayesflt impComm4xMail impText import localmail \
	mailnews mailview mime mimeemitter mozldap msgbaseutil msgcompose \
	msgdb msgimap msgmdn msgnews msgsmime myspell nsprefm p3p \
	profile spellchecker sroaming typeaheadfind vcard wallet walletviewers \
	xremoteservice xulutil ldap50 prldap50 \
	fort swft
d36 1
a36 1
CATEGORIES=	www mail net
d48 1
a48 1
MASTER_SITES=	http://ftp.mozilla.org/pub/mozilla.org/seamonkey/releases/${VER}/
d53 2
a54 1
                nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
d60 1
a60 1
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 png z
d63 1
a63 1
		seamonkey/mozjs,seamonkey/nss3,seamonkey/smime3,seamonkey/ssl3,seamonkey/xpcom,seamonkey/xpcom_core:${PKGNAME-main}:www/seamonkey,-main
d83 1
d85 1
a85 1
		--enable-optimize=-Os		\
d108 1
a108 2
		SO_VERSION="${SO_VERSION}" \
		NSPR_LIB_DIR="${LOCALBASE}/lib"
d110 3
a112 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
a127 1
	@@echo "`date "+%Y%d%m%H%M%S"`" > ${WRKSRC}/config/build_number
d135 2
a136 3
	@@cd ${WRKSRC}/dist/public && ${TAR} -chf - nss | \
		${TAR} -xf - -C ${MOZ}/include   
.for dir in chrome components defaults greprefs searchplugins res 
d140 1
d142 2
a143 3
	@@cd ${MOB} && ${TAR} -chf - *.so.?.? | \
		${TAR} -xf - -C ${MOZ}
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
d145 1
a145 1
	${INSTALL_SCRIPT} ${MOB}/seamonkey ${MOB}/seamonkey-config ${PREFIX}/bin/
d147 5
a151 3
	${INSTALL_PROGRAM} ${MOB}/regxpcom ${MOB}/seamonkey-bin ${MOB}/mozilla-xremote-client ${MOB}/TestGtkEmbed \
	${MOB}/mangle ${MOB}/nsinstall ${MOB}/shlibsign ${MOB}/xpcshell ${MOB}/xpicleanup ${MOB}/xpidl \
	${MOB}/xpt_dump ${MOB}/xpt_link ${MOZ}
d156 1
a156 1
	${INSTALL_MAN} ${WRKSRC}/xpfe/bootstrap/seamonkey.1 ${PREFIX}/man/man1/
@


1.5
log
@LP64 fix for XUL templates builder; from Martynas Venckus
ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/02/14 17:13:38 kurt Exp $
d8 1
a8 1
VER=		1.0.7
d11 2
a12 2
PKGNAME-main=	seamonkey-${VER}p3
PKGNAME-devel=	seamonkey-devel-${VER}p3
d14 1
a14 1
SO_VERSION=	9.3
d19 1
a19 1
	editor embedcomponents fileview gfx_gtk gfxps gfxpsshar gkgfx \
d106 2
a107 1
		SO_VERSION="${SO_VERSION}"
@


1.5.2.1
log
@MFC:
SECURITY update to SeaMonkey 1.0.8; ok kurt@@, martynas

For details see
http://www.mozilla.org/projects/security/known-vulnerabilities.html#SeaMonkey
---
major update to seamonkey 1.1.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/04/07 17:41:12 martynas Exp $
a2 1
SHARED_ONLY=	Yes
d8 1
a8 1
VER=		1.1.1
d11 2
a12 2
PKGNAME-main=	seamonkey-${VER}
PKGNAME-devel=	seamonkey-devel-${VER}
d14 1
a14 1
SO_VERSION=	10.0
d17 16
a32 15
.for _lib in accessibility addrbook appcomps auth autoconfig bayesflt \
	caps chrome composer cookie docshell editor embedcomponents \
	fileview gfx_gtk gfxps gklayout gkplugin htmlpars i18n imglib2 \
	impComm4xMail impText import jar50 jsd localmail mailnews \
	mailview mime mimeemitter mork mozfind mozldap msgcompose \
	msgdb msgimap msgmdn msgnews msgsmime myspell necko necko2 \
	nsappshell nsprefm oji p3p permissions pipboot pipnss pippki \
	pref profile rdf remoteservice searchservice spellchecker \
	sroaming storagecomps system-pref transformiix txmgr \
	typeaheadfind uconv ucvmath universalchardet vcard wallet \
	walletviewers webbrwsr websrvcs widget_gtk2 xmlextras \
	xpcom_compat_c xpconnect xpinstall xremoteservice gfxpsshar \
	gkgfx gtkembedmoz gtkxtbin jsj ldap50 mozjs msgbaseutil \
	prldap50 xpcom xpcom_compat xpcom_core xpistub nullplugin \
	unixprintplugin
d36 1
a36 1
CATEGORIES=	www mail net news
d48 1
a48 1
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/seamonkey/releases/${VER}/
d53 1
a53 2
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr \
		nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
d59 1
a59 1
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 pangox-1.0 png z
d62 1
a62 1
		seamonkey/mozjs,seamonkey/xpcom,seamonkey/xpcom_core:${PKGNAME-main}:www/seamonkey,-main
a81 1
		--with-system-nss		\
d83 1
a83 1
		--disable-optimize		\
d108 1
a108 3
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		MOZ_ENABLE_COREXFONTS=1 \
		topsrcdir=${WRKSRC}
d124 1
d132 3
a134 2
.for dir in chrome components defaults dictionaries greprefs init.d plugins \
	res searchplugins
a137 1
	@@find ${MOZ} -type f -exec chmod 644 {} \;
d139 3
a141 2
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
d143 1
a143 1
	${INSTALL_SCRIPT} ${MOB}/seamonkey{,-config} ${PREFIX}/bin/
d145 3
a147 5
	${INSTALL_PROGRAM} ${MOB}/TestGtkEmbed \
		${MOB}/mozilla-xremote-client ${MOB}/nsinstall \
		${MOB}/regxpcom ${MOB}/seamonkey-bin ${MOB}/xpcshell \
		${MOB}/xpicleanup ${MOB}/xpidl ${MOB}/xpt_dump \
		${MOB}/xpt_link ${MOZ}
d152 1
a152 1
	${INSTALL_MAN} ${WRKSRC}/dist/man/man1/seamonkey.1 ${PREFIX}/man/man1/
@


1.5.2.2
log
@MFC:
security update to seamonkey-1.1.2
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.2
-------
SECURITY update to 1.1.3.
Fixes a rash of security vulnerabilities and bugs.
-------
- security update to 1.1.4, fixes MFSA 2007-27 and MFSA 2007-26:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#seamonkey1.1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5.2.1 2007/05/01 16:18:34 sturm Exp $
d9 1
a9 1
VER=		1.1.4
a118 4
DATADIRS=	chrome components defaults dictionaries greprefs \
		init.d plugins res searchplugins
DISTDIRS=	include idl

d130 12
a141 10
	cd ${WRKSRC}/dist && \
		find ${DISTDIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DISTDIRS} ! -type d \
			-exec ${INSTALL_DATA} {} ${MOZ}/{} \;
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \;
@


1.4
log
@- fix cups printing as noted by Gareth <garf at loveandnature.co.za>
- install man page from Martynas Venckus <martynas at altroot.org>
- regen distinfo (+sha256)

okay naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/01/12 23:11:12 kurt Exp $
d11 2
a12 2
PKGNAME-main=	seamonkey-${VER}p2
PKGNAME-devel=  seamonkey-devel-${VER}p2
@


1.3
log
@- move some things from -main to -devel package where they belong
- there's no need to install the libs again in the -devel package. noticed
by steven@@
- use make var MOB the same as firefox & thunderbird
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/12/31 01:13:24 kurt Exp $
d10 3
a12 3
PKGNAME=	seamonkey-${VER}p1
PKGNAME-main=	seamonkey-${VER}p1
PKGNAME-devel=  seamonkey-devel-${VER}p1
d152 1
@


1.2
log
@- remove some unused dirs
- register the components in the default component registry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/12/22 23:32:27 kurt Exp $
d10 3
a12 3
PKGNAME=	seamonkey-${VER}p0
PKGNAME-main=	seamonkey-${VER}p0
PKGNAME-devel=  seamonkey-devel-${VER}p0
d52 3
d57 7
a63 16
LIB_DEPENDS-main= \
		gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
                nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
WANTLIB-main=	X11 Xext Xft Xinerama Xrender Xt atk-1.0 c cairo fontconfig \
		freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 iconv \
		intl jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 png \
		pthread stdc++ z

RUN_DEPENDS-devel= :${PKGNAME-main}:www/seamonkey,-main
LIB_DEPENDS-devel= \
		IDL-2::devel/libIDL \
		gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
                nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
WANTLIB-devel=	X11 Xext Xrender Xt atk-1.0 c cairo fontconfig freetype \
		glib-2.0 glitz gmodule-2.0 gobject-2.0 iconv intl m \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 png pthread z
d112 1
a112 1
MOB=		${WRKSRC}/dist
d127 1
a127 1
.for dir in include idl lib
d129 1
a129 1
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
d132 1
a132 1
	@@cd ${MOB}/public && ${TAR} -chf - nss | \
d136 1
a136 1
	@@cd ${MOB}/bin && ${TAR} -chf - ${dir} | \
d139 1
a139 1
	@@cd ${MOB}/bin && ${TAR} -chf - *.so.?.? | \
d143 5
a147 5
	${INSTALL_SCRIPT} ${MOB}/bin/seamonkey ${MOB}/bin/seamonkey-config ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${MOB}/bin/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/bin/regxpcom ${MOB}/bin/seamonkey-bin ${MOB}/bin/mozilla-xremote-client ${MOB}/bin/TestGtkEmbed \
	${MOB}/bin/mangle ${MOB}/bin/nsinstall ${MOB}/bin/shlibsign ${MOB}/bin/xpcshell ${MOB}/bin/xpicleanup ${MOB}/bin/xpidl \
	${MOB}/bin/xpt_dump ${MOB}/bin/xpt_link ${MOZ}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2006/02/06 18:35:56 jamesw Exp $
d10 3
a12 3
PKGNAME=	seamonkey-${VER}
PKGNAME-main=	seamonkey-${VER}
PKGNAME-devel=  seamonkey-devel-${VER}
d76 1
a153 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
@


1.1.1.1
log
@import seamonkey-1.0.7

Web-browser, advanced e-mail and newsgroup client, IRC chat client,
and HTML editing made simple -- all your Internet needs in one
application.

Based mostly on a port from James Wright <jamesw at bsdhosting.co.za> with
input from several - thanks! Tested on i386/amd64/sparc64/macppc.
@
text
@@
