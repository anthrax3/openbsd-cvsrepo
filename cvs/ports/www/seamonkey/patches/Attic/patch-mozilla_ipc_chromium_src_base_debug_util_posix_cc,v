head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.03.10.20.44.12;	author landry;	state dead;
branches;
next	1.3;

1.3
date	2013.09.25.23.39.55;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.01.11.03.00.02;	author nigel;	state dead;
branches;
next	1.1;

1.1
date	2011.07.24.07.31.57;	author landry;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to seamonkey 2.24.

See http://www.seamonkey-project.org/releases/seamonkey2.24/
- Fixes MFSA-2014-01 to 13, excluding 06 and 10
- remove GStreamerLoader.cpp patch, merged in 927898 (or now useless)
- remove patch-mozilla_gfx_layers_BufferUnrotate_cpp, merged in 929439
- remove patch-mozilla_ipc_chromium_src_base_debug_util_posix_cc, merged
  in 927810 (was p_psflags change in base)

There *might* be an issue building enigmail, but i dont remember if it
appeared in 2.24 or 2.25, and i'll handle that shortly. Let's ride the
gcc4+www/mozilla MODULE change!
@
text
@$OpenBSD: patch-mozilla_ipc_chromium_src_base_debug_util_posix_cc,v 1.3 2013/09/25 23:39:55 sthen Exp $
--- mozilla/ipc/chromium/src/base/debug_util_posix.cc.orig	Wed Sep 25 13:29:45 2013
+++ mozilla/ipc/chromium/src/base/debug_util_posix.cc	Wed Sep 25 13:29:54 2013
@@@@ -50,6 +50,9 @@@@
 #define KP_FLAGS kp_flags
 #elif defined(OS_FREEBSD)
 #define KP_FLAGS ki_flag
+#elif defined(OS_OPENBSD) && !defined(_P_TRACED)
+#define KP_FLAGS p_psflags
+#define P_TRACED PS_TRACED
 #else
 #define KP_FLAGS p_flag
 #endif
@


1.3
log
@handle p_flags split in kinfo_proc to unbreak
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Update seamonkey to 2.6.1

Ok landry@@ stsp@@ mpi@@
@
text
@d1 10
a10 24
$OpenBSD: patch-mozilla_ipc_chromium_src_base_debug_util_posix_cc,v 1.1 2011/07/24 07:31:57 landry Exp $
--- mozilla/ipc/chromium/src/base/debug_util_posix.cc.orig	Mon Jun 27 05:10:41 2011
+++ mozilla/ipc/chromium/src/base/debug_util_posix.cc	Sun Jul  3 02:14:43 2011
@@@@ -8,10 +8,12 @@@@
 #include <errno.h>
 #include <fcntl.h>
 #include <stdio.h>
+#include <limits.h>
 #include <sys/stat.h>
+#include <sys/param.h>
 #include <sys/types.h>
 #include <unistd.h>
-#ifndef ANDROID
+#ifdef __GLIBC__
 #include <execinfo.h>
 #include <sys/sysctl.h>
 #endif
@@@@ -119,7 +121,7 @@@@ StackTrace::StackTrace() {
   const int kMaxCallers = 256;
 
   void* callers[kMaxCallers];
-#ifndef ANDROID
+#ifdef __GLIBC__
   int count = backtrace(callers, kMaxCallers);
d12 1
a12 8
   int count = 0;
@@@@ -138,7 +140,7 @@@@ StackTrace::StackTrace() {
 
 void StackTrace::PrintBacktrace() {
   fflush(stderr);
-#ifndef ANDROID
+#ifdef __GLIBC__
   backtrace_symbols_fd(&trace_[0], trace_.size(), STDERR_FILENO);
a13 1
 }
@


1.1
log
@Update to seamonkey 2.2, based on Firefox/Thunderbird/Gecko 5.
See http://www.seamonkey-project.org/releases/seamonkey2.2/ for details.
- sync ipc patches from Firefox
- remove a bunch of useless patches
- install under lib/seamonkey-2.2 instead of using our homegrown install
  target.
- install langpacks as plain xpi instead of unzipping them, greatly
  shrinking PLIST
@
text
@d1 1
a1 1
$OpenBSD$
@

