head	1.10;
access;
symbols
	OPENBSD_5_2:1.9.0.8
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.6
	OPENBSD_5_0:1.9.0.4
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20080905:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2012.09.24.06.51.59;	author jasper;	state dead;
branches;
next	1.9;

1.9
date	2010.12.20.07.51.58;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.07.12.06.22.45;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.01.13.08.47.57;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.07.27.17.06.16;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.05.15.06.57.18;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.22.00.28.54;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.04.17.23.17.07;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.08.21.30.54;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2008.09.05.11.19.48;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.09.05.11.19.48;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.10
log
@- remove -lpthread vs. -pthread patches/chunks.
@
text
@$OpenBSD: patch-configure,v 1.9 2010/12/20 07:51:58 ajacoutot Exp $
--- configure.orig	Mon Dec 13 14:49:57 2010
+++ configure	Wed Dec 15 16:37:42 2010
@@@@ -17414,13 +17414,14 @@@@ $as_echo "no" >&6; }
      esac
 
 	if test "$have_pthread" != "yes"; then
-        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for main in -lpthread" >&5
-$as_echo_n "checking for main in -lpthread... " >&6; }
+		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for main in -pthread" >&5 
+$as_echo_n "checking for main in -pthread... " >&6; }
+
 if ${ac_cv_lib_pthread_main+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -17451,7 +17452,7 @@@@ else
 fi
 
 	   if test "$have_pthread" = "yes"; then
-	   	 PTHREAD_LIBS="-lpthread"
+	   	 PTHREAD_LIBS="-pthread"
 	   fi
      fi
 
@@@@ -21048,7 +21049,7 @@@@ if ${ac_cv_lib_avformat_main+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lavformat  $LIBS"
+LIBS="-lavformat -pthread $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@


1.9
log
@Update to cherokee-1.0.14.

From Fernando Quintero (maintainer).
Several fixes/tweaks as well as the rc script added by myself.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.8
log
@Major update to cherokee-1.0.5.

successfully tested by Fernando Quintero (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2010/01/13 08:47:57 ajacoutot Exp $
--- configure.orig	Tue Jul  6 19:30:31 2010
+++ configure	Thu Jul  8 14:27:45 2010
@@@@ -16759,13 +16759,13 @@@@ $as_echo "no" >&6; }
d10 1
a10 1
+        { $as_echo "$as_me:${as_lineno-$LINENO}: checking for main in -pthread" >&5
d12 2
a13 1
 if test "${ac_cv_lib_pthread_main+set}" = set; then :
d22 1
a22 1
@@@@ -16796,7 +16796,7 @@@@ else
d31 1
a31 1
@@@@ -20396,7 +20396,7 @@@@ if test "${ac_cv_lib_avformat_main+set}" = set; then :
@


1.7
log
@SECURITY: CVE-2009-4489
http://www.vupen.com/english/advisories/2010/0090
(thanks fgsch@@ for the link/notice)

Update to cherokee-0.99.39.
Remove debug FLAVOR and use ifdef DEBUG.
Add rrdtool to run_depends.
Byte-compile python modules so that they are registered in the PLIST.

Be careful as cherokee is not started using ${PREFIX}/sbin/cherokee, not
cherokee-guardian anymore.

Fernando Quintero (maintainer) ok
MESSAGE tweak and ok sthen@@, ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2009/07/27 17:06:16 sthen Exp $
--- configure.orig	Tue Jan 12 10:27:34 2010
+++ configure	Tue Jan 12 10:28:23 2010
@@@@ -16613,13 +16613,13 @@@@ $as_echo "no" >&6; }
d21 1
a21 1
@@@@ -16650,7 +16650,7 @@@@ else
d30 1
a30 1
@@@@ -20249,7 +20249,7 @@@@ if test "${ac_cv_lib_avformat_main+set}" = set; then :
@


1.6
log
@- update to 0.99.20

- unbreak group setting; Cherokee assumed a fixed size 1k buffer for
getgrnam_r which is insufficient on some OS, including OpenBSD. symptom
was that group setting resulted in ERANGE. This just bumps the buffer
to 8k which isn't a perfect fix, but serves our purposes for now;
see ports@@ archives at http://marc.info/?t=124832494600002&r=1&w=2
for more discussion.

maintainer ok.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2009/05/15 06:57:18 sthen Exp $
--- configure.orig	Wed Jul  1 14:57:31 2009
+++ configure	Thu Jul 23 22:57:56 2009
@@@@ -32366,13 +32366,13 @@@@ echo "${ECHO_T}no" >&6; }
d8 6
a13 6
-        { echo "$as_me:$LINENO: checking for main in -lpthread" >&5
-echo $ECHO_N "checking for main in -lpthread... $ECHO_C" >&6; }
+        { echo "$as_me:$LINENO: checking for main in -pthread" >&5
+echo $ECHO_N "checking for main in -pthread... $ECHO_C" >&6; }
 if test "${ac_cv_lib_pthread_main+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d18 4
a21 4
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -32428,7 +32428,7 @@@@ else
d30 2
a31 2
@@@@ -39215,7 +39215,7 @@@@ if test "${ac_cv_lib_avformat_main+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d36 3
a38 3
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@


1.5
log
@bugfix update to 0.99.15 from Brad, maintainer ok.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.4 2009/04/22 00:28:54 sthen Exp $
--- configure.orig	Thu Apr 30 11:20:13 2009
+++ configure	Sun May  3 01:48:23 2009
@@@@ -32362,13 +32362,13 @@@@ echo "${ECHO_T}no" >&6; }
d21 1
a21 1
@@@@ -32424,7 +32424,7 @@@@ else
d30 1
a30 1
@@@@ -38803,7 +38803,7 @@@@ if test "${ac_cv_lib_avformat_main+set}" = set; then
@


1.4
log
@- add -streaming module for video streaming
- add "debug" flavour enabling the CHEROKEE_TRACE feature
- bump affected -main subpackage

based on a diff from Valery Masiutsin
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2009/04/17 23:17:07 sthen Exp $
--- configure.orig	Sun Apr  5 01:10:47 2009
+++ configure	Sat Apr 18 20:27:53 2009
@@@@ -32345,13 +32345,13 @@@@ echo "${ECHO_T}no" >&6; }
d21 1
a21 1
@@@@ -32407,7 +32407,7 @@@@ else
d30 1
a30 1
@@@@ -38255,7 +38255,7 @@@@ if test "${ac_cv_lib_avformat_main+set}" = set; then
@


1.3
log
@- update to 0.99.10 from Brad; maintainer timeout.
- fix typo in alternative MASTER_SITES line.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.2 2009/04/08 21:30:54 sthen Exp $
--- configure.orig	Sat Apr  4 18:10:47 2009
+++ configure	Tue Apr 14 10:50:43 2009
d30 9
@


1.2
log
@update to 0.99.0, remove conflict with spawn-fcgi/old lighttpd.
maintainer unresponsive, ok ajacoutot
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1.1.1 2008/09/05 11:19:48 ajacoutot Exp $
--- configure.orig	Sat Feb  7 17:51:30 2009
+++ configure	Wed Apr  8 10:24:02 2009
@@@@ -32331,13 +32331,13 @@@@ echo "${ECHO_T}no" >&6; }
d21 1
a21 1
@@@@ -32393,7 +32393,7 @@@@ else
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Sat Aug 30 12:22:52 2008
+++ configure	Sat Aug 30 12:23:02 2008
@@@@ -32557,13 +32557,13 @@@@ echo "${ECHO_T}no" >&6; }
d21 1
a21 1
@@@@ -32619,7 +32619,7 @@@@ else
@


1.1.1.1
log
@Import cherokee-0.8.1

Cherokee is a very fast, flexible and easy to configure Web Server. It
supports the widespread technologies nowadays: FastCGI, SCGI, PHP, CGI,
TLS and SSL encrypted connections, Virtual hosts, Authentication, on the
fly encoding, Load balancing, Apache compatible log files, and much
more.

based on a submission from Fernando Quintero (MAINTAINER)
testing, feedback and ok sthen@@
@
text
@@
