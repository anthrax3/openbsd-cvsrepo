head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2012.11.20.09.51.06;	author sebastia;	state dead;
branches;
next	1.1;

1.1
date	2012.10.30.15.09.53;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Minor bugfix update to 2.0.2a

OK giovanni@@
@
text
@$OpenBSD: patch-SoObjects_SOGo_NSString+Utilities_m,v 1.1 2012/10/30 15:09:53 sebastia Exp $

ugly hack to fix crasher, upstream is aware of it

--- SoObjects/SOGo/NSString+Utilities.m.orig	Mon Oct 15 12:05:10 2012
+++ SoObjects/SOGo/NSString+Utilities.m	Mon Oct 15 12:21:22 2012
@@@@ -134,6 +134,9 @@@@ static int cssEscapingCount;
     start--;
   start++;
 
+  if ([self length] - start < 4)
+    return NSMakeRange (start, [self length] - start);
+
   // In [UIxMailPartTextViewer flatContentAsString], we first escape HTML entities and then
   // add URLs. Therefore, the brackets (inequality signs <>) have been encoded at this point.
   if ([[self substringWithRange: NSMakeRange (start, 4)] compare: @@"&lt;"] == NSOrderedSame)
@


1.1
log
@Major update to SOGo 2.0.2, essentially unfucking it on amd64.

Problem reported and tests from giovann@@ and Jean Gerard
(jg at rilk.com).

finally OK giovanni@@
same applies to the just updated SOPE, where I hit the go button
just too fast ;)
@
text
@d1 1
a1 1
$OpenBSD$
@

