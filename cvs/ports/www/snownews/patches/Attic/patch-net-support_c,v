head	1.2;
access;
symbols
	OPENBSD_4_4:1.1.0.4
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.09.12.20.07.15;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2008.02.18.17.48.48;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to snownews-1.5.10
it contains patches from Martynas Venckus:

- net-support.c: HTTP header only needs to be ASCII in the token
- xmlparse.c: Convert feed title to target charset, too. Should
probaly be in interface.c
- main.c, interface.h, interface.c: Add a signal handler for resizing
to work on many other ncurses implementations
- conversions.c: Determine output charset with nl_langinfo()

ok kili@@
@
text
@$OpenBSD: patch-net-support_c,v 1.1 2008/02/18 17:48:48 martynas Exp $
--- net-support.c.orig	Tue Jan  8 11:41:02 2008
+++ net-support.c	Mon Feb 18 00:07:00 2008
@@@@ -243,7 +243,7 @@@@ int NetSupportAuth (struct feed * cur_ptr, const char 
 	return 0;
 }
 
-/* HTTP header may only contain ASCII characters.
+/* HTTP token may only contain ASCII characters.
  *
  * Ensure that we don't hit the terminating \0 in a string
  * with the for loop.
@@@@ -262,6 +262,8 @@@@ int checkValidHTTPHeader (const unsigned char * header
 		if (((header[i] < 32) || (header[i] > 127)) &&
 			(header[i] != '\r') && (header[i] != '\n'))
 			return -1;
+		if (header[i] == ':')
+			break;
 	}
 	return 0;
 }
@


1.1
log
@- make a bunch of feeds work.  rfc2616 says field-content is octet.
checkValidHTTPHeader assumes the whole header is ascii, while only
token should be
- update to snownews-1.5.9
ok maintainer cathcart@@ and kili@@
@
text
@d1 1
a1 1
$OpenBSD$
@

