head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.09.09.19.25.29;	author phessler;	state Exp;
branches;
next	;
commitid	Ev6r1aXzQa4JWKzI;


desc
@@


1.1
log
@ld.lld doesn't use as much memory as ld.bfd, so disable the
--no-keep-memory flag with the new PROPERTIES that sthen@@ added.

While here, port some patches from FreeBSD's ports tree to fix the build
on aarch64 and armv7.

OK ajacoutot@@
@
text
@$OpenBSD$

Index: Source/JavaScriptCore/assembler/ARMAssembler.h
--- Source/JavaScriptCore/assembler/ARMAssembler.h.orig
+++ Source/JavaScriptCore/assembler/ARMAssembler.h
@@@@ -1155,6 +1155,8 @@@@ namespace JSC {
                 linuxPageFlush(current, current + page);
 
             linuxPageFlush(current, end);
+#elif CPU(ARM_TRADITIONAL) && (OS(FREEBSD) || OS(OPENBSD))
+	__clear_cache(code, reinterpret_cast<char*>(code) + size);
 #else
 #error "The cacheFlush support is missing on this platform."
 #endif
@
