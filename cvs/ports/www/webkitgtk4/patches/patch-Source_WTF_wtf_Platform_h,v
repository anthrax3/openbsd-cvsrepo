head	1.10;
access;
symbols
	OPENBSD_6_2:1.10.0.2
	OPENBSD_6_2_BASE:1.10
	OPENBSD_6_1:1.9.0.2
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.7.0.2
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	ajacoutot_20140930:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2017.09.15.07.43.42;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	Jk9vJ3DJZZqdsKA5;

1.9
date	2017.03.29.13.25.52;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	LZozuPgYFurOX4C6;

1.8
date	2016.10.28.13.44.25;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	dmtpmxFMSxF4CjHO;

1.7
date	2016.04.19.06.05.36;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	rvyFmaCsfwn3SDW7;

1.6
date	2015.11.12.10.25.52;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	x95drCvo6wFJQ8HR;

1.5
date	2015.09.23.06.06.11;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	fzFz3YYijX0IIcsy;

1.4
date	2015.03.27.18.38.45;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	5SCjinShjLNIt1iQ;

1.3
date	2014.11.13.08.33.06;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	hSfKLcNZSLEIyeBS;

1.2
date	2014.10.07.07.31.41;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	oLDDxJryxIdrcOBU;

1.1
date	2014.09.30.08.25.27;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;
commitid	vE55uuVrh0fHHclM;

1.1.1.1
date	2014.09.30.08.25.27;	author ajacoutot;	state Exp;
branches;
next	;
commitid	vE55uuVrh0fHHclM;


desc
@@


1.10
log
@Update to webkitgtk4-2.18.0.
@
text
@$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.9 2017/03/29 13:25:52 ajacoutot Exp $

https://bugs.webkit.org/show_bug.cgi?id=129963

Index: Source/WTF/wtf/Platform.h
--- Source/WTF/wtf/Platform.h.orig
+++ Source/WTF/wtf/Platform.h
@@@@ -155,6 +155,12 @@@@
 #define WTF_CPU_BIG_ENDIAN 1
 #endif
 
+/* CPU(SPARC64) - SPARC V9 */
+#if defined(__sparc64__)
+#define WTF_CPU_SPARC64 1
+#define WTF_CPU_BIG_ENDIAN 1
+#endif
+
 /* CPU(X86) - i386 / x86 32-bit */
 #if   defined(__i386__) \
     || defined(i386)     \
@@@@ -353,7 +359,7 @@@@
 
 #endif /* ARM */
 
-#if CPU(ARM) || CPU(MIPS) || CPU(SH4)
+#if CPU(ARM) || CPU(MIPS) || CPU(SH4) || CPU(SPARC64)
 #define WTF_CPU_NEEDS_ALIGNED_ACCESS 1
 #endif
 
@@@@ -676,7 +682,7 @@@@
 #define HAVE_CFNETWORK_STORAGE_PARTITIONING 1
 #endif
 
-#if OS(DARWIN) || ((OS(FREEBSD) || defined(__GLIBC__)) && (CPU(X86) || CPU(X86_64) || CPU(ARM) || CPU(ARM64) || CPU(MIPS)))
+#if OS(DARWIN) || ((OS(FREEBSD) || OS(OPENBSD) || defined(__GLIBC__)) && (CPU(X86) || CPU(X86_64) || CPU(ARM) || CPU(ARM64) || CPU(MIPS) || CPU(SPARC64)))
 #define HAVE_MACHINE_CONTEXT 1
 #endif
 
@@@@ -713,7 +719,8 @@@@
     || CPU(S390X) \
     || CPU(MIPS64) \
     || CPU(PPC64) \
-    || CPU(PPC64LE)
+    || CPU(PPC64LE) \
+    || CPU(SPARC64)
 #define USE_JSVALUE64 1
 #else
 #define USE_JSVALUE32_64 1
@@@@ -770,7 +777,7 @@@@
 
 #if !defined(ENABLE_DFG_JIT) && ENABLE(JIT)
 /* Enable the DFG JIT on X86 and X86_64. */
-#if (CPU(X86) || CPU(X86_64)) && (OS(DARWIN) || OS(LINUX) || OS(FREEBSD) || OS(WINDOWS) || OS(HURD))
+#if (CPU(X86) || CPU(X86_64)) && (OS(DARWIN) || OS(LINUX) || OS(FREEBSD) || OS(OPENBSD) || OS(WINDOWS) || OS(HURD))
 #define ENABLE_DFG_JIT 1
 #endif
 /* Enable the DFG JIT on ARMv7.  Only tested on iOS and Qt/GTK+ Linux. */
@


1.9
log
@Update to WebKitGTK4 2.16.0. This will allow us to properly keep it updated
during the stable cycle for once \o/
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.8 2016/10/28 13:44:25 ajacoutot Exp $
d5 3
a7 2
--- Source/WTF/wtf/Platform.h.orig	Tue Feb 28 09:34:11 2017
+++ Source/WTF/wtf/Platform.h	Sun Mar 26 13:55:13 2017
d21 1
a21 1
@@@@ -348,7 +354,7 @@@@
d30 10
a39 1
@@@@ -680,7 +686,8 @@@@
d49 1
a49 1
@@@@ -736,7 +743,7 @@@@
@


1.8
log
@Update to webkitgtk4-2.14.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.7 2016/04/19 06:05:36 ajacoutot Exp $
d5 2
a6 2
--- Source/WTF/wtf/Platform.h.orig	Tue Sep 20 08:01:34 2016
+++ Source/WTF/wtf/Platform.h	Wed Oct 26 14:42:08 2016
d20 1
a20 1
@@@@ -342,7 +348,7 @@@@
d29 1
a29 1
@@@@ -697,7 +703,8 @@@@
d39 1
a39 1
@@@@ -753,7 +760,7 @@@@
@


1.7
log
@Update to webkitgtk4-2.12.1.
With help from robert@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.6 2015/11/12 10:25:52 ajacoutot Exp $
d5 2
a6 2
--- Source/WTF/wtf/Platform.h.orig	Thu Apr 14 10:45:23 2016
+++ Source/WTF/wtf/Platform.h	Sat Apr 16 13:02:54 2016
d29 1
a29 1
@@@@ -699,7 +705,8 @@@@
d39 1
a39 1
@@@@ -751,7 +758,7 @@@@
@


1.6
log
@Update to webkitgtk4-2.10.4.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.5 2015/09/23 06:06:11 ajacoutot Exp $
d5 3
a7 3
--- Source/WTF/wtf/Platform.h.orig	Wed Nov 11 08:42:50 2015
+++ Source/WTF/wtf/Platform.h	Thu Nov 12 07:53:38 2015
@@@@ -153,6 +153,12 @@@@
d20 1
a20 1
@@@@ -340,7 +346,7 @@@@
d29 1
a29 1
@@@@ -690,7 +696,8 @@@@
d39 1
a39 1
@@@@ -757,7 +764,7 @@@@
@


1.5
log
@Update to webkitgtk4-2.10.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.4 2015/03/27 18:38:45 ajacoutot Exp $
d5 2
a6 2
--- Source/WTF/wtf/Platform.h.orig	Mon Sep 21 09:29:46 2015
+++ Source/WTF/wtf/Platform.h	Mon Sep 21 15:02:30 2015
d29 1
a29 1
@@@@ -688,7 +694,8 @@@@
d39 1
a39 1
@@@@ -755,7 +762,7 @@@@
@


1.4
log
@Update to webkitgtk4-2.8.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.3 2014/11/13 08:33:06 ajacoutot Exp $
d5 2
a6 2
--- Source/WTF/wtf/Platform.h.orig	Mon Mar 23 09:08:04 2015
+++ Source/WTF/wtf/Platform.h	Fri Mar 27 10:17:17 2015
d29 1
a29 1
@@@@ -653,7 +659,8 @@@@
d36 1
a36 1
 #define WTF_USE_JSVALUE64 1
d38 2
a39 2
 #define WTF_USE_JSVALUE32_64 1
@@@@ -720,7 +727,7 @@@@
@


1.3
log
@Update to webkitgtk4-2.6.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.2 2014/10/07 07:31:41 ajacoutot Exp $
a2 1
https://bugs.webkit.org/show_bug.cgi?id=129839
d5 3
a7 3
--- Source/WTF/wtf/Platform.h.orig	Tue Nov 11 14:07:54 2014
+++ Source/WTF/wtf/Platform.h	Wed Nov 12 18:43:31 2014
@@@@ -150,6 +150,12 @@@@
d20 1
a20 1
@@@@ -333,7 +339,7 @@@@
d29 1
a29 2
@@@@ -645,7 +651,8 @@@@
     || CPU(ARM64) \
d31 1
d39 1
a39 1
@@@@ -713,7 +720,7 @@@@
a47 9
@@@@ -816,7 +823,7 @@@@
 #define ENABLE_REGEXP_TRACING 0
 
 /* Yet Another Regex Runtime - turned on by default for JIT enabled ports. */
-#if !defined(ENABLE_YARR_JIT)
+#if !defined(ENABLE_YARR_JIT) && ENABLE(JIT)
 #define ENABLE_YARR_JIT 1
 
 /* Setting this flag compares JIT results with interpreter results. */
@


1.2
log
@Make it build on sparc64.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.1.1.1 2014/09/30 08:25:27 ajacoutot Exp $
d6 2
a7 2
--- Source/WTF/wtf/Platform.h.orig	Wed Sep 17 14:31:08 2014
+++ Source/WTF/wtf/Platform.h	Thu Oct  2 16:04:20 2014
d44 2
a45 2
-#if (CPU(X86) || CPU(X86_64)) && (OS(DARWIN) || OS(LINUX) || OS(FREEBSD) || OS(WINDOWS))
+#if (CPU(X86) || CPU(X86_64)) && (OS(DARWIN) || OS(LINUX) || OS(FREEBSD) || OS(OPENBSD) || OS(WINDOWS))
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_WTF_wtf_Platform_h,v 1.5 2014/08/26 21:31:03 ajacoutot Exp $
a2 6
Add defines for sparc64/mips64.
http://trac.webkit.org/changeset/159817
https://bugs.webkit.org/show_bug.cgi?id=126502

yarr jit
https://bugs.webkit.org/show_bug.cgi?id=113638
d4 1
a4 3
http://trac.webkit.org/changeset/164220
https://bugs.webkit.org/show_bug.cgi?id=128898
https://bugs.webkit.org/show_bug.cgi?id=129963 for dfg_jit/llint
d7 2
a8 2
+++ Source/WTF/wtf/Platform.h	Sun Sep 28 10:11:55 2014
@@@@ -71,6 +71,12 @@@@
d12 1
a12 1
+/* CPU(SPARC64) - Sun Sparc64 */
d18 4
a21 21
 /* CPU(IA64) - Itanium / IA-64 */
 #if defined(__ia64__)
 #define WTF_CPU_IA64 1
@@@@ -82,9 +88,14 @@@@
 
 /* CPU(MIPS) - MIPS 32-bit */
 /* Note: Only O32 ABI is tested, so we enable it for O32 ABI for now.  */
-#if (defined(mips) || defined(__mips__) || defined(MIPS) || defined(_MIPS_)) \
-    && defined(_ABIO32)
+#if (defined(mips) || defined(__mips__) || defined(MIPS) || defined(_MIPS_) || defined(__mips64__))
+#if defined(_ABIO32)
 #define WTF_CPU_MIPS 1
+#endif
+#if defined(__mips64__)
+#define	WTF_CPU_MIPS64	1
+#define	USE_SYSTEM_MALLOC 1
+#endif
 #if defined(__MIPSEB__)
 #define WTF_CPU_BIG_ENDIAN 1
 #endif
@@@@ -333,7 +344,7 @@@@
d26 1
a26 1
+#if CPU(ARM) || CPU(MIPS) || CPU(SH4) || CPU(MIPS64) || CPU(SPARC64)
d30 1
a30 1
@@@@ -645,7 +656,9 @@@@
d36 1
a36 2
+    || CPU(SPARC64) \
+    || CPU(MIPS64)
d40 1
a40 1
@@@@ -713,7 +726,7 @@@@
d49 1
a49 1
@@@@ -816,7 +829,7 @@@@
@


1.1.1.1
log
@Import webkitgtk4-2.6.0.

WebKitGTK+ is the GNOME platform port of the WebKit rendering engine.
Offering WebKit's full functionality through a set of GObject-based
APIs, it is suitable for projects requiring any kind of web integration,
from hybrid HTML/CSS applications to full-fledged web browsers.

Still somewhat WIP, nothing depends on it yet.
ok landry@@
@
text
@@
