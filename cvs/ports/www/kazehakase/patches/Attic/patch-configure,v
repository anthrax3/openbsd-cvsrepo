head	1.8;
access;
symbols
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	landry_20080111:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2011.09.18.22.44.18;	author landry;	state dead;
branches;
next	1.7;

1.7
date	2010.09.30.07.26.05;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.19.10.34.41;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2010.05.06.19.25.51;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.30.22.38.10;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.08.16.05.23;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2008.03.18.19.25.55;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2008.01.11.14.47.28;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.01.11.14.47.28;	author landry;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Die die old horrible unmaintained piece of code. Too much bad memories
in there.
prodded by aja@@
@
text
@$OpenBSD: patch-configure,v 1.7 2010/09/30 07:26:05 ajacoutot Exp $

XXX make it compile with gtk+2 2.22 (*_DISABLE_DEPRECATED)
kz-tabtree.c:88: error: expected declaration specifiers or '...' before 'GtkNotebookPage'
kz-tabtree.c:699: error: expected declaration specifiers or '...' before 'GtkNotebookPage'

XXX we know our xl has webprogresslistener2 but nspr headers not in -I during configure

--- configure.orig	Tue Sep 29 05:44:00 2009
+++ configure	Wed Sep 29 20:09:55 2010
@@@@ -16296,13 +16296,13 @@@@ fi
 
   if test x"$enable_gtkmozembed" = "xyes"; then
     if test x"$GECKO" = "xlibxul"; then
-      GECKO_MODULE=$GECKO-unstable
+      GECKO_MODULE=$GECKO
     else
       GECKO_MODULE=$GECKO-xpcom
     fi
   else
     if test x"$GECKO" = "xlibxul"; then
-      GECKO_MODULE=$GECKO-embedding-unstable
+      GECKO_MODULE=$GECKO-embedding
     else
       GECKO_MODULE=$GECKO-gtkmozembed
     fi
@@@@ -16669,14 +16669,9 @@@@ nsIWebProgressListener2 *listener;
   return 0;
 }
 _ACEOF
-if ac_fn_cxx_try_compile "$LINENO"; then :
 
 $as_echo "#define HAVE_NSIWEBPROGRESSLISTENER2_ONREFRESHATTEMPTED 1" >>confdefs.h
 
-         result=yes
-else
-  result=no
-fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $result" >&5
@@@@ -20796,77 +20791,6 @@@@ fi
 
 anthy_exists=no
 
-pkg_failed=no
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANTHY" >&5
-$as_echo_n "checking for ANTHY... " >&6; }
-
-if test -n "$PKG_CONFIG"; then
-    if test -n "$ANTHY_CFLAGS"; then
-        pkg_cv_ANTHY_CFLAGS="$ANTHY_CFLAGS"
-    else
-        if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"anthy\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "anthy") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then
-  pkg_cv_ANTHY_CFLAGS=`$PKG_CONFIG --cflags "anthy" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
-    fi
-else
-	pkg_failed=untried
-fi
-if test -n "$PKG_CONFIG"; then
-    if test -n "$ANTHY_LIBS"; then
-        pkg_cv_ANTHY_LIBS="$ANTHY_LIBS"
-    else
-        if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"anthy\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "anthy") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then
-  pkg_cv_ANTHY_LIBS=`$PKG_CONFIG --libs "anthy" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
-    fi
-else
-	pkg_failed=untried
-fi
-
-
-
-if test $pkg_failed = yes; then
-
-if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
-        _pkg_short_errors_supported=yes
-else
-        _pkg_short_errors_supported=no
-fi
-        if test $_pkg_short_errors_supported = yes; then
-	        ANTHY_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "anthy"`
-        else
-	        ANTHY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "anthy"`
-        fi
-	# Put the nasty error message in config.log where it belongs
-	echo "$ANTHY_PKG_ERRORS" >&5
-
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-                anthy_exists=no
-elif test $pkg_failed = untried; then
-	anthy_exists=no
-else
-	ANTHY_CFLAGS=$pkg_cv_ANTHY_CFLAGS
-	ANTHY_LIBS=$pkg_cv_ANTHY_LIBS
-        { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-	anthy_exists=yes
-fi
-
 # Extract the first word of "mecab-config", so it can be a program name with args.
 set dummy mecab-config; ac_word=$2
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
@@@@ -21422,7 +21346,7 @@@@ fi
 GENHTML_OPTIONS="--title 'Kazehakase Code Coverage'"
 
 KAZEHAKASE_CFLAGS="$GTK_CFLAGS $LIBGNUTLS_CFLAGS $GIO_CFLAGS $DBUS_GLIB_CFLAGS"
-KAZEHAKASE_CFLAGS="$KAZEHAKASE_CFLAGS -DGDK_DISABLE_DEPRECATED -DGTK_DISABLE_DEPRECATED"
+KAZEHAKASE_CFLAGS="$KAZEHAKASE_CFLAGS -DGDK_DISABLE_DEPRECATED"
 KAZEHAKASE_CFLAGS="$KAZEHAKASE_CFLAGS -DG_DISABLE_DEPRECATED"
 KAZEHAKASE_CFLAGS="$KAZEHAKASE_CFLAGS -DSYSDATADIR=\\\"\"\$(datadir)\"\\\""
 KAZEHAKASE_CFLAGS="$KAZEHAKASE_CFLAGS -DLOCALEDIR=\\\"\"\$(localedir)\"\\\""
@


1.7
log
@Fix build with new GTK+2.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.6 2010/06/19 10:34:41 landry Exp $
@


1.6
log
@Finally fix www/kazehakase, after lots of cries and pain with/about
libtool. Backport upstream svn r3779 + r3872 to correctly build with
xulrunner 1.9.2, and use ports libtool which does a way better job at
linking gecko.so than gnu libtool. This needs r1.120 of build/libtool.
@
text
@d1 6
a6 1
$OpenBSD: patch-configure,v 1.5 2010/05/06 19:25:51 landry Exp $
d8 1
d10 1
a10 1
+++ configure	Fri Jun 18 22:02:55 2010
d42 1
a42 1
@@@@ -20795,77 +20790,6 @@@@ fi
d44 1
a45 2
 anthy_exists=no
-
d116 1
a116 1
 
d119 10
@


1.5
log
@WIP on unbreaking kazehakase:
- update to 0.5.8
- backport upstream svn r3871 to let it build with latest gtk+2
- switch to xulrunner 1.9.x (breaks gecko backend while here)
- don't try to create a dbus server socket in a non-existent dir
It is still badly broken, as upstream doesn't seem to care about
shipping working stuff... but at least it builds and packages.
@
text
@d1 37
a37 4
$OpenBSD$
--- configure.orig	Mon May  3 21:56:13 2010
+++ configure	Mon May  3 21:56:48 2010
@@@@ -20796,77 +20796,6 @@@@ fi
d40 1
a40 1
 
d111 1
a111 1
-
a113 1
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
@


1.4
log
@Update kazehakase to the just-released 0.5.6.
Now that we have www/webkit in ports, split it into MULTI_PACKAGES :
-main has the common infrastructure files (and the binary), -gecko provides
gecko engine support, -webkit provides webkit engine support.

To ease updates, -gecko has the same pkgname as previous package. -webkit
support is still a bit experimental, and provided for webdevelopers who
want to write and test cross-engine websites.

With help and ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2008/06/08 16:05:23 landry Exp $
--- configure.orig	Tue Oct 28 16:09:40 2008
+++ configure	Thu Oct 30 22:43:13 2008
@@@@ -29071,78 +29071,6 @@@@ fi
d6 1
a7 2
 anthy_exists=no
-
d9 2
a10 2
-{ echo "$as_me:$LINENO: checking for ANTHY" >&5
-echo $ECHO_N "checking for ANTHY... $ECHO_C" >&6; }
d17 1
a17 1
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"anthy\"") >&5
d20 2
a21 2
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
d35 1
a35 1
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"anthy\"") >&5
d38 2
a39 2
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
d66 2
a67 2
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
d74 2
a75 2
-        { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
d81 1
a81 16
 { echo "$as_me:$LINENO: checking for $ac_word" >&5
@@@@ -31100,13 +31028,7 @@@@ done
         sed -e "/POTFILES =/r po/POTFILES" po/Makefile.in > po/Makefile
       esac ;;
     "rgettext":C)
-sed \
-  -i'' \
-  -e "s/EXTRA_DISTFILES = /EXTRA_DISTFILES = rgettext.mk.in /
-      s/^itlocaledir = /itlocaledir = \$(datadir)\/locale\n#itlocaledir = /
-      /	\$(GENPOT)/r po/rgettext.mk
-     " \
-  po/Makefile
+perl -i -pe 's/^itlocaledir = /itlocaledir = \$\(datadir\)\/locale\n#itlocaledir = /' po/Makefile
  ;;
     "po/stamp-it":C)
     rm -f "po/stamp-it" "po/stamp-it.tmp" "po/POTFILES" "po/Makefile.tmp"
@


1.3
log
@Update to kazehakase 0.5.4, out since some weeks.
While here, fix WANTLIB, add licence version, and update patches.

ok ajacoutot@@
@
text
@d1 83
a83 4
$OpenBSD: patch-configure,v 1.2 2008/03/18 19:25:55 landry Exp $
--- configure.orig	Sat Mar 29 09:20:56 2008
+++ configure	Wed Apr  2 17:12:20 2008
@@@@ -31100,13 +31100,7 @@@@ done
@


1.2
log
@Update to kazehakase 0.5.3, update patches while here.

ok ajacoutot@@ (two days ago)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1.1.1 2008/01/11 14:47:28 landry Exp $
--- configure.orig	Fri Feb 29 14:49:47 2008
+++ configure	Sat Mar 15 14:07:27 2008
@@@@ -31444,13 +31444,7 @@@@ done
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Sun Oct 28 16:24:23 2007
+++ configure	Mon Nov 12 17:45:10 2007
@@@@ -31037,13 +31037,7 @@@@ done
@


1.1.1.1
log
@Import kazehakase 0.5.1, a lightweight gtk2 web browser using gecko engine.

It features tabbed browsing, session saving, dynamic bookmarks and
customizable mouse gestures. Uses xulrunner for gecko support and GnuTLS 2
for https:// links.

with feedback and testing from many on ports@@, thanks !

"import it, it can't be worse than galeon and epiphany anyway.." ajacoutot@@
@
text
@@
