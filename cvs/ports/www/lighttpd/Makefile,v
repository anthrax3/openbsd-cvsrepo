head	1.144;
access;
symbols
	OPENBSD_6_0:1.136.0.2
	OPENBSD_6_0_BASE:1.136
	OPENBSD_5_9:1.135.0.2
	OPENBSD_5_9_BASE:1.135
	OPENBSD_5_8:1.128.0.4
	OPENBSD_5_8_BASE:1.128
	OPENBSD_5_7:1.126.0.2
	OPENBSD_5_7_BASE:1.126
	OPENBSD_5_6:1.124.0.2
	OPENBSD_5_6_BASE:1.124
	OPENBSD_5_5:1.120.0.2
	OPENBSD_5_5_BASE:1.120
	OPENBSD_5_4:1.116.0.2
	OPENBSD_5_4_BASE:1.116
	OPENBSD_5_3:1.107.0.2
	OPENBSD_5_3_BASE:1.107
	OPENBSD_5_2:1.101.0.2
	OPENBSD_5_2_BASE:1.101
	OPENBSD_5_1_BASE:1.94
	OPENBSD_5_1:1.94.0.2
	OPENBSD_5_0:1.85.0.2
	OPENBSD_5_0_BASE:1.85
	OPENBSD_4_9:1.79.0.2
	OPENBSD_4_9_BASE:1.79
	OPENBSD_4_8:1.69.0.2
	OPENBSD_4_8_BASE:1.69
	OPENBSD_4_7:1.65.0.2
	OPENBSD_4_7_BASE:1.65
	OPENBSD_4_6:1.59.0.2
	OPENBSD_4_6_BASE:1.59
	OPENBSD_4_5:1.55.0.2
	OPENBSD_4_5_BASE:1.55
	OPENBSD_4_4:1.53.0.2
	OPENBSD_4_4_BASE:1.53
	OPENBSD_4_3:1.48.0.2
	OPENBSD_4_3_BASE:1.48
	OPENBSD_4_2:1.44.0.2
	OPENBSD_4_2_BASE:1.44
	OPENBSD_4_1:1.38.0.2
	OPENBSD_4_1_BASE:1.38
	OPENBSD_4_0:1.31.0.2
	OPENBSD_4_0_BASE:1.31
	OPENBSD_3_9:1.29.0.2
	OPENBSD_3_9_BASE:1.29
	OPENBSD_3_8:1.15.0.2
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	brad:1.1.1.1
	brad_2004-10-01:1.1.1;
locks; strict;
comment	@# @;


1.144
date	2017.02.12.11.19.46;	author ajacoutot;	state Exp;
branches;
next	1.143;
commitid	kTfJxyr6KIR4Mqh2;

1.143
date	2017.01.15.10.01.41;	author ajacoutot;	state Exp;
branches;
next	1.142;
commitid	D6yJa8Uw5cUhLtcQ;

1.142
date	2016.12.26.09.30.19;	author ajacoutot;	state Exp;
branches;
next	1.141;
commitid	a4dXBWt19EsaBDf6;

1.141
date	2016.12.25.10.33.27;	author ajacoutot;	state Exp;
branches;
next	1.140;
commitid	jSAuI6FL3gMaBMo7;

1.140
date	2016.11.16.12.50.51;	author sthen;	state Exp;
branches;
next	1.139;
commitid	M0yGEdvxGdvUqbb7;

1.139
date	2016.11.11.10.23.34;	author sthen;	state Exp;
branches;
next	1.138;
commitid	zcSafSSsrSci3osM;

1.138
date	2016.10.12.08.09.26;	author ajacoutot;	state Exp;
branches;
next	1.137;
commitid	RcsywKx0OmgVaY4K;

1.137
date	2016.09.17.20.22.41;	author ajacoutot;	state Exp;
branches;
next	1.136;
commitid	erqZjU8459iZzz15;

1.136
date	2016.03.18.20.49.28;	author naddy;	state Exp;
branches;
next	1.135;
commitid	8GBp5gQa5BLeR7Ti;

1.135
date	2015.12.30.07.54.42;	author jasper;	state Exp;
branches;
next	1.134;
commitid	vWsnq5hQSVa8tz2A;

1.134
date	2015.12.27.22.51.10;	author ajacoutot;	state Exp;
branches;
next	1.133;
commitid	COlvXcz2lndCbXGi;

1.133
date	2015.12.08.06.59.44;	author ajacoutot;	state Exp;
branches;
next	1.132;
commitid	CxDtNHd2uVCvIZNk;

1.132
date	2015.10.14.05.33.02;	author ajacoutot;	state Exp;
branches;
next	1.131;
commitid	vwkHDQ3nBut4c3t7;

1.131
date	2015.09.25.06.17.15;	author ajacoutot;	state Exp;
branches;
next	1.130;
commitid	hQ3MC4sMrBFcmKQQ;

1.130
date	2015.09.01.07.02.31;	author ajacoutot;	state Exp;
branches;
next	1.129;
commitid	P9vOigYzvZVKgflA;

1.129
date	2015.08.19.18.55.05;	author sthen;	state Exp;
branches;
next	1.128;
commitid	IjqIBfZ0w3tzCTnv;

1.128
date	2015.07.27.08.44.39;	author ajacoutot;	state Exp;
branches
	1.128.4.1;
next	1.127;
commitid	snxUuQF7GtUjXo3P;

1.127
date	2015.07.15.14.59.15;	author ajacoutot;	state Exp;
branches;
next	1.126;
commitid	3M8rWDdk3egW952j;

1.126
date	2014.10.26.22.42.27;	author brad;	state Exp;
branches
	1.126.2.1;
next	1.125;
commitid	o551GOYaLtyaIPe8;

1.125
date	2014.09.13.18.09.22;	author brad;	state Exp;
branches;
next	1.124;
commitid	PpbRjVZdAmlrmi8q;

1.124
date	2014.05.12.06.50.25;	author brad;	state Exp;
branches
	1.124.2.1;
next	1.123;

1.123
date	2014.04.21.13.12.09;	author sthen;	state Exp;
branches;
next	1.122;

1.122
date	2014.04.13.07.03.19;	author brad;	state Exp;
branches;
next	1.121;

1.121
date	2014.03.13.10.42.29;	author brad;	state Exp;
branches;
next	1.120;

1.120
date	2014.01.23.23.24.14;	author brad;	state Exp;
branches
	1.120.2.1;
next	1.119;

1.119
date	2013.11.30.20.35.44;	author brad;	state Exp;
branches;
next	1.118;

1.118
date	2013.11.08.21.39.43;	author brad;	state Exp;
branches;
next	1.117;

1.117
date	2013.09.30.19.26.03;	author brad;	state Exp;
branches;
next	1.116;

1.116
date	2013.06.20.08.26.14;	author ajacoutot;	state Exp;
branches
	1.116.2.1;
next	1.115;

1.115
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2013.06.17.19.28.37;	author ajacoutot;	state Exp;
branches;
next	1.113;

1.113
date	2013.06.12.20.36.34;	author brad;	state Exp;
branches;
next	1.112;

1.112
date	2013.05.25.00.33.10;	author brad;	state Exp;
branches;
next	1.111;

1.111
date	2013.04.26.07.21.40;	author sthen;	state Exp;
branches;
next	1.110;

1.110
date	2013.03.28.16.22.32;	author brad;	state Exp;
branches;
next	1.109;

1.109
date	2013.03.21.08.48.55;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2013.03.11.11.44.42;	author espie;	state Exp;
branches;
next	1.107;

1.107
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.106;

1.106
date	2013.01.25.08.00.23;	author brad;	state Exp;
branches;
next	1.105;

1.105
date	2013.01.14.09.17.03;	author brad;	state Exp;
branches;
next	1.104;

1.104
date	2012.11.21.21.58.18;	author sthen;	state Exp;
branches;
next	1.103;

1.103
date	2012.11.21.11.41.56;	author brad;	state Exp;
branches;
next	1.102;

1.102
date	2012.11.15.10.45.23;	author brad;	state Exp;
branches;
next	1.101;

1.101
date	2012.07.10.15.22.45;	author jasper;	state Exp;
branches
	1.101.2.1;
next	1.100;

1.100
date	2012.06.01.08.20.50;	author sthen;	state Exp;
branches;
next	1.99;

1.99
date	2012.05.25.08.24.40;	author sthen;	state Exp;
branches;
next	1.98;

1.98
date	2012.05.15.19.38.01;	author jasper;	state Exp;
branches;
next	1.97;

1.97
date	2012.04.28.09.25.25;	author sthen;	state Exp;
branches;
next	1.96;

1.96
date	2012.04.09.07.02.11;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2012.03.06.08.23.43;	author sthen;	state Exp;
branches;
next	1.94;

1.94
date	2012.01.13.23.02.15;	author sthen;	state Exp;
branches
	1.94.2.1;
next	1.93;

1.93
date	2011.12.20.22.27.28;	author sthen;	state Exp;
branches;
next	1.92;

1.92
date	2011.12.03.22.26.08;	author sthen;	state Exp;
branches;
next	1.91;

1.91
date	2011.12.01.12.17.11;	author gsoares;	state Exp;
branches;
next	1.90;

1.90
date	2011.10.09.20.42.33;	author sthen;	state Exp;
branches;
next	1.89;

1.89
date	2011.10.07.20.04.39;	author sthen;	state Exp;
branches;
next	1.88;

1.88
date	2011.09.16.12.00.07;	author espie;	state Exp;
branches;
next	1.87;

1.87
date	2011.09.06.08.49.51;	author sthen;	state Exp;
branches;
next	1.86;

1.86
date	2011.08.24.21.28.09;	author sthen;	state Exp;
branches;
next	1.85;

1.85
date	2011.07.07.14.34.36;	author sthen;	state Exp;
branches
	1.85.2.1;
next	1.84;

1.84
date	2011.04.25.09.39.36;	author sthen;	state Exp;
branches;
next	1.83;

1.83
date	2011.04.15.21.43.14;	author sthen;	state Exp;
branches;
next	1.82;

1.82
date	2011.03.26.10.05.24;	author sthen;	state Exp;
branches;
next	1.81;

1.81
date	2011.03.23.12.47.24;	author sthen;	state Exp;
branches;
next	1.80;

1.80
date	2011.03.20.13.42.53;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2011.01.15.10.56.51;	author jasper;	state Exp;
branches
	1.79.2.1;
next	1.78;

1.78
date	2010.11.22.10.16.08;	author espie;	state Exp;
branches;
next	1.77;

1.77
date	2010.11.22.08.36.49;	author espie;	state Exp;
branches;
next	1.76;

1.76
date	2010.11.11.19.56.19;	author espie;	state Exp;
branches;
next	1.75;

1.75
date	2010.11.11.12.35.09;	author sthen;	state Exp;
branches;
next	1.74;

1.74
date	2010.11.07.19.13.40;	author jasper;	state Exp;
branches;
next	1.73;

1.73
date	2010.10.19.08.02.53;	author espie;	state Exp;
branches;
next	1.72;

1.72
date	2010.09.17.21.59.43;	author sthen;	state Exp;
branches;
next	1.71;

1.71
date	2010.08.23.22.44.10;	author sthen;	state Exp;
branches;
next	1.70;

1.70
date	2010.08.18.11.16.55;	author sthen;	state Exp;
branches;
next	1.69;

1.69
date	2010.07.06.17.17.50;	author sthen;	state Exp;
branches;
next	1.68;

1.68
date	2010.04.18.08.24.31;	author sthen;	state Exp;
branches;
next	1.67;

1.67
date	2010.04.09.11.06.22;	author sthen;	state Exp;
branches;
next	1.66;

1.66
date	2010.03.21.09.56.55;	author sthen;	state Exp;
branches;
next	1.65;

1.65
date	2010.02.02.08.10.29;	author sthen;	state Exp;
branches
	1.65.2.1;
next	1.64;

1.64
date	2009.12.13.22.06.24;	author sthen;	state Exp;
branches;
next	1.63;

1.63
date	2009.11.25.23.06.53;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2009.11.08.13.16.40;	author sthen;	state Exp;
branches;
next	1.61;

1.61
date	2009.10.27.23.02.11;	author sthen;	state Exp;
branches;
next	1.60;

1.60
date	2009.08.11.21.55.27;	author sthen;	state Exp;
branches;
next	1.59;

1.59
date	2009.06.22.09.28.07;	author sthen;	state Exp;
branches
	1.59.2.1;
next	1.58;

1.58
date	2009.06.19.23.12.03;	author sthen;	state Exp;
branches;
next	1.57;

1.57
date	2009.03.16.17.15.34;	author sthen;	state Exp;
branches;
next	1.56;

1.56
date	2009.03.08.11.13.43;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2009.02.17.12.44.17;	author sthen;	state Exp;
branches;
next	1.54;

1.54
date	2008.10.23.20.29.17;	author brad;	state Exp;
branches;
next	1.53;

1.53
date	2008.04.25.10.23.07;	author jasper;	state Exp;
branches;
next	1.52;

1.52
date	2008.04.16.20.42.35;	author jasper;	state Exp;
branches;
next	1.51;

1.51
date	2008.04.08.19.11.40;	author jasper;	state Exp;
branches;
next	1.50;

1.50
date	2008.04.03.10.18.15;	author jasper;	state Exp;
branches;
next	1.49;

1.49
date	2008.03.16.18.43.31;	author brad;	state Exp;
branches;
next	1.48;

1.48
date	2008.03.02.10.04.22;	author jasper;	state Exp;
branches;
next	1.47;

1.47
date	2007.09.10.20.41.59;	author rui;	state Exp;
branches;
next	1.46;

1.46
date	2007.09.01.20.11.21;	author kili;	state Exp;
branches;
next	1.45;

1.45
date	2007.08.31.10.10.17;	author rui;	state Exp;
branches;
next	1.44;

1.44
date	2007.07.26.03.54.06;	author todd;	state Exp;
branches;
next	1.43;

1.43
date	2007.07.25.21.31.46;	author rui;	state Exp;
branches;
next	1.42;

1.42
date	2007.07.22.19.44.17;	author rui;	state Exp;
branches;
next	1.41;

1.41
date	2007.06.17.18.14.09;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2007.04.28.10.08.01;	author rui;	state Exp;
branches;
next	1.39;

1.39
date	2007.04.24.05.09.41;	author ckuethe;	state Exp;
branches;
next	1.38;

1.38
date	2007.02.02.09.25.18;	author bernd;	state Exp;
branches
	1.38.2.1;
next	1.37;

1.37
date	2006.12.16.12.22.35;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2006.11.11.14.26.03;	author mbalmer;	state Exp;
branches;
next	1.35;

1.35
date	2006.11.05.16.13.31;	author fgsch;	state Exp;
branches;
next	1.34;

1.34
date	2006.10.10.00.04.23;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2006.09.23.15.44.04;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2006.09.18.09.04.03;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2006.03.09.19.00.59;	author brad;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2006.03.06.06.21.02;	author sturm;	state Exp;
branches;
next	1.29;

1.29
date	2006.02.09.02.30.40;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2006.02.08.20.39.47;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2006.01.15.04.47.58;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2006.01.03.23.39.11;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2005.11.23.15.22.48;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2005.11.17.17.21.15;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.03.01.52.12;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2005.10.10.17.03.38;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2005.10.08.20.05.06;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2005.10.07.20.07.04;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2005.10.03.14.17.52;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2005.10.03.13.27.52;	author aanriot;	state Exp;
branches;
next	1.17;

1.17
date	2005.10.03.00.53.50;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2005.09.16.16.31.04;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2005.08.11.04.38.44;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2005.08.01.21.49.32;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2005.07.16.16.54.14;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2005.06.17.14.47.57;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2005.06.17.14.22.52;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.08.22.49.39;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2005.02.20.23.56.15;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2005.02.12.13.17.36;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2005.01.31.03.42.29;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2004.12.12.01.39.30;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2004.12.11.13.29.21;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2004.11.05.00.14.52;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.24.16.23.06;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2004.10.17.15.11.46;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.01.06.23.40;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.01.06.23.40;	author brad;	state Exp;
branches;
next	;

1.31.2.1
date	2007.07.29.19.01.17;	author sturm;	state Exp;
branches;
next	;

1.38.2.1
date	2007.07.29.19.00.55;	author sturm;	state Exp;
branches;
next	1.38.2.2;

1.38.2.2
date	2007.10.05.14.56.49;	author ajacoutot;	state Exp;
branches;
next	;

1.59.2.1
date	2009.12.05.22.43.33;	author william;	state Exp;
branches;
next	1.59.2.2;

1.59.2.2
date	2009.12.18.02.14.32;	author william;	state Exp;
branches;
next	1.59.2.3;

1.59.2.3
date	2010.02.02.13.58.53;	author sthen;	state Exp;
branches;
next	1.59.2.4;

1.59.2.4
date	2010.04.29.01.37.22;	author william;	state Exp;
branches;
next	;

1.65.2.1
date	2010.06.12.14.43.07;	author william;	state Exp;
branches;
next	;

1.79.2.1
date	2011.05.02.12.05.38;	author jasper;	state Exp;
branches;
next	;

1.85.2.1
date	2011.12.01.12.18.20;	author gsoares;	state Exp;
branches;
next	;

1.94.2.1
date	2012.04.11.14.20.20;	author sthen;	state Exp;
branches;
next	;

1.101.2.1
date	2012.11.21.22.00.24;	author sthen;	state Exp;
branches;
next	;

1.116.2.1
date	2013.11.22.08.42.13;	author jasper;	state Exp;
branches;
next	1.116.2.2;

1.116.2.2
date	2013.12.01.10.08.23;	author jasper;	state Exp;
branches;
next	1.116.2.3;

1.116.2.3
date	2014.03.25.18.42.26;	author brad;	state Exp;
branches;
next	1.116.2.4;

1.116.2.4
date	2014.10.30.07.50.12;	author brad;	state Exp;
branches;
next	;
commitid	DeMlylrOlOZ0YYu7;

1.120.2.1
date	2014.03.25.19.35.46;	author brad;	state Exp;
branches;
next	1.120.2.2;

1.120.2.2
date	2014.10.30.07.51.27;	author brad;	state Exp;
branches;
next	;
commitid	1TomokRnivtq5PPE;

1.124.2.1
date	2014.10.30.07.52.45;	author brad;	state Exp;
branches;
next	;
commitid	Jf2ORbvzPt89Zw66;

1.126.2.1
date	2015.07.27.08.56.06;	author jasper;	state Exp;
branches;
next	1.126.2.2;
commitid	9wLX2kXy9Meu7YwA;

1.126.2.2
date	2015.09.01.10.53.09;	author jasper;	state Exp;
branches;
next	;
commitid	Wt9I1z57OTTuhsiz;

1.128.4.1
date	2015.09.01.10.53.03;	author jasper;	state Exp;
branches;
next	1.128.4.2;
commitid	iSGQgzU52fJAV5fH;

1.128.4.2
date	2015.12.08.07.08.53;	author jasper;	state Exp;
branches;
next	1.128.4.3;
commitid	y5MVCLowDV63JuXE;

1.128.4.3
date	2015.12.30.07.58.10;	author jasper;	state Exp;
branches;
next	;
commitid	0WGSsaCY2gkZa05v;


desc
@@


1.144
log
@Use level-triggered kqueue(). https://redmine.lighttpd.net/issues/2788

from brad (maintainer)
@
text
@# $OpenBSD: Makefile,v 1.143 2017/01/15 10:01:41 ajacoutot Exp $

COMMENT=	secure, fast, compliant, and very flexible web-server

DISTNAME=	lighttpd-1.4.45
REVISION=	0
CATEGORIES=	www net
MASTER_SITES=	http://download.lighttpd.net/lighttpd/releases-1.4.x/
EXTRACT_SUFX=	.tar.xz

HOMEPAGE=	http://www.lighttpd.net/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c crypto m pcre ssl z ${MODLUA_WANTLIB}

MODULES=	lang/lua
MODLUA_SA=	Yes

LIB_DEPENDS+=	devel/pcre \
		${MODLUA_LIB_DEPENDS}
RUN_DEPENDS+=	www/spawn-fcgi

LIBTOOL_FLAGS=	--tag=disable-static
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS+= --libdir="${PREFIX}/lib/lighttpd" \
		 --with-lua \
		 --with-openssl \
		 --without-bzip2 \
		 --without-libev
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		LUA_CFLAGS="`pkg-config --cflags ${MODLUA_DEP}`" \
		LUA_LIBS="`pkg-config --libs ${MODLUA_DEP}`"

FLAVORS=	ldap mysql
FLAVOR?=

.if ${FLAVOR:Mldap}
CONFIGURE_ARGS+= --with-ldap
LIB_DEPENDS+=	databases/openldap
WANTLIB+=	lber-2.4 ldap-2.4 sasl2
.endif

.if ${FLAVOR:Mmysql}
CONFIGURE_ARGS+= --with-mysql
LIB_DEPENDS+=	databases/mariadb
WANTLIB+=	mysqlclient pthread stdc++
.endif

post-extract:
	@@cp -f ${FILESDIR}/lighttpd.conf ${WRKSRC}/doc

pre-build:
	@@${SUBST_CMD} ${WRKSRC}/doc/lighttpd.conf ${WRKSRC}/doc/lighttpd.8

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/lighttpd
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/lighttpd
	${INSTALL_DATA} ${WRKSRC}/doc/outdated/*.txt \
	    ${PREFIX}/share/doc/lighttpd
	${INSTALL_DATA} ${WRKSRC}/doc/lighttpd.conf \
	    ${PREFIX}/share/examples/lighttpd
	${INSTALL_DATA} ${WRKSRC}/doc/scripts/spawn-php.sh \
	    ${PREFIX}/share/examples/lighttpd
	${INSTALL_DATA} /dev/null \
	    ${PREFIX}/share/examples/lighttpd/access.log
	${INSTALL_DATA} /dev/null \
	    ${PREFIX}/share/examples/lighttpd/error.log
	rm -f ${PREFIX}/lib/lighttpd/*.la

.include <bsd.port.mk>
@


1.143
log
@Update to lighttpd-1.4.45.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2016/12/26 09:30:19 ajacoutot Exp $
d6 1
@


1.142
log
@tweak DESCR.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2016/12/25 10:33:27 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	lighttpd-1.4.44
REVISION=	0
@


1.141
log
@Update to lighttpd-1.4.44.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2016/11/16 12:50:51 sthen Exp $
d6 1
@


1.140
log
@Add upstream patch to lighttpd; fixes SCGI segfault regression. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2016/11/11 10:23:34 sthen Exp $
d5 1
a5 2
DISTNAME=	lighttpd-1.4.43
REVISION=	0
@


1.139
log
@update to lighttpd-1.4.43, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2016/09/17 20:22:41 ajacoutot Exp $
d6 1
@


1.138
log
@Bring in a commit from upstream
- performance: use Linux extended syscalls and flags

from Brad (maintainer)
@
text
@d5 1
a5 2
DISTNAME=	lighttpd-1.4.41
REVISION=	0
d50 1
a50 1
WANTLIB +=	mysqlclient pthread stdc++
d72 1
@


1.137
log
@Update to lighttpd-1.4.41.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2016/03/18 20:49:28 naddy Exp $
d6 1
@


1.136
log
@remove SHARED_ONLY from simple lua ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2015/12/30 07:54:42 jasper Exp $
d5 1
a5 2
DISTNAME=	lighttpd-1.4.38
REVISION=	1
@


1.135
log
@fix use after free / double free

from Brad
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.134 2015/12/27 22:51:10 ajacoutot Exp $

SHARED_ONLY=	Yes
@


1.134
log
@Fix use after free / double free.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2015/12/08 06:59:44 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
@


1.133
log
@Update to lighttpd-1.4.38.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2015/10/14 05:33:02 ajacoutot Exp $
d8 1
@


1.132
log
@Backport from upstream:
[core] don't buffer request bodies smaller than 64k on disk

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2015/09/25 06:17:15 ajacoutot Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.37
REVISION=	1
@


1.131
log
@Back port some bug fixes.
- [core] allocate at least 4k buffer for incoming data
- [core] fix search for header end if split across chunks (fixes #2670)

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2015/09/01 07:02:31 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
@


1.130
log
@Update to lighttpd-1.4.37.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2015/08/19 18:55:05 sthen Exp $
d8 1
@


1.129
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2015/07/27 08:44:39 ajacoutot Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.36
REVISION=	0
d10 1
@


1.128
log
@SECURITY update to lighttpd-1.4.36.
CVE-2015-3200: escape all strings for logging (fixes #2646 log file injection)

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2015/07/15 14:59:15 ajacoutot Exp $
d8 1
d52 1
a52 1
WANTLIB +=	mysqlclient
@


1.128.4.1
log
@- reliability update to lighttpd-1.4.37
* it contains various regression fixes including those observed in the kqueue backend.
  http://www.lighttpd.net/2015/8/30/1.4.37/

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2015/09/01 07:02:31 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.37
a9 1
EXTRACT_SUFX=	.tar.xz
@


1.128.4.2
log
@- update to lighttpd-1.4.38
* various reliability fixes for header parsing as well as an upload fix
  http://www.lighttpd.net/2015/12/5/1.4.38/

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128.4.1 2015/09/01 10:53:03 jasper Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.38
@


1.128.4.3
log
@fix use after free / double free

(committing from the correct tree this time)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128.4.2 2015/12/08 07:08:53 jasper Exp $
a7 1
REVISION=	0
@


1.127
log
@Adapr rc.d script after recent rc.subr change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2014/10/26 22:42:27 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.35
REVISION=	5
@


1.126
log
@Fix from upstream..

disable SSL3.0 by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2014/09/13 18:09:22 brad Exp $
d8 1
a8 1
REVISION=	4
@


1.126.2.1
log
@SECURITY update to lighttpd-1.4.36.
CVE-2015-3200: escape all strings for logging (fixes #2646 log file injection)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2014/10/26 22:42:27 brad Exp $
d7 2
a8 1
DISTNAME=	lighttpd-1.4.36
@


1.126.2.2
log
@- reliability update to lighttpd-1.4.37
* it contains various regression fixes including those observed in the kqueue backend.
  http://www.lighttpd.net/2015/8/30/1.4.37/

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.2.1 2015/07/27 08:56:06 jasper Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.37
a9 1
EXTRACT_SUFX=	.tar.xz
@


1.125
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2014/05/12 06:50:25 brad Exp $
d8 1
a8 1
REVISION=	3
@


1.124
log
@Fix from upstream..

Fix bad shift in conditional netmask ".../0" handling.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2014/04/21 13:12:09 sthen Exp $
d8 1
a8 1
REVISION=	2
d51 2
a52 2
LIB_DEPENDS+=	databases/mysql
WANTLIB +=	mysqlclient>=10
@


1.124.2.1
log
@Fix from upstream..

disable SSL3.0 by default

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2014/05/12 06:50:25 brad Exp $
d8 1
a8 1
REVISION=	3
@


1.123
log
@sync WANTLIB for ldap
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2014/04/13 07:03:19 brad Exp $
d8 1
a8 1
REVISION=	1
@


1.122
log
@Upstream bug fix:

Use keep-alive timeout while waiting for HTTP headers; use always the read
timeout while waiting for the HTTP body.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2014/03/13 10:42:29 brad Exp $
d8 1
a8 1
REVISION=	0
d46 1
a46 2
WANTLIB+=	sasl2 asn1 com_err gssapi krb5 wind
WANTLIB+=	heimbase lber-2.4 ldap-2.4 roken
@


1.121
log
@Update to lighttpd 1.4.35.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2014/01/23 23:24:14 brad Exp $
d8 1
@


1.120
log
@Update to lighttpd 1.4.34.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2013/11/30 20:35:44 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.34
@


1.120.2.1
log
@MFC security update to lighttpd 1.4.35. CVE-2014-2323, CVE-2014-2324
http://download.lighttpd.net/lighttpd/security/lighttpd_sa_2014_01.txt

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2014/01/23 23:24:14 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.35
@


1.120.2.2
log
@Fix from upstream..

disable SSL3.0 by default

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120.2.1 2014/03/25 19:35:46 brad Exp $
a7 1
REVISION=	0
@


1.119
log
@Two fixes from upstream..

- Check success of setuid, setgid, setgroups. CVE-2013-4559
- Fix regression from CVE-2013-4508 (client-cert sessions were broken)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2013/11/08 21:39:43 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.33
REVISION=	1
@


1.118
log
@Fix SNI handling; only use key+cert from SNI specific config. CVE-2013-4508

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2013/09/30 19:26:03 brad Exp $
d8 1
a8 1
REVISION=	0
@


1.117
log
@Update to lighttpd 1.4.33.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2013/06/20 08:26:14 ajacoutot Exp $
d8 1
@


1.116
log
@No need for pthread.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2013/06/20 06:54:37 ajacoutot Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.32
REVISION=	8
d18 1
a18 1
WANTLIB=		c crypto ${MODLUA_WANTLIB} m pcre ssl z
d28 1
a28 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
@


1.116.2.1
log
@- update lighttpd to 1.4.33 and apply the security fixes for CVE-2013-4508

testing/ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2013/06/20 08:26:14 ajacoutot Exp $
d7 2
a8 1
DISTNAME=	lighttpd-1.4.33
d29 2
a30 1
CONFIGURE_STYLE= gnu
@


1.116.2.2
log
@backport security fixes for CVE-2013-4559 and fix regression of CVE-2013-4508
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116.2.1 2013/11/22 08:42:13 jasper Exp $
a7 1
REVISION=	0
@


1.116.2.3
log
@MFC security update to lighttpd 1.4.35. CVE-2014-2323, CVE-2014-2324
http://download.lighttpd.net/lighttpd/security/lighttpd_sa_2014_01.txt

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116.2.2 2013/12/01 10:08:23 jasper Exp $
d7 2
a8 1
DISTNAME=	lighttpd-1.4.35
d19 1
a19 1
WANTLIB=	c crypto m pcre ssl z ${MODLUA_WANTLIB}
@


1.116.2.4
log
@Fix from upstream..

disable SSL3.0 by default

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116.2.3 2014/03/25 18:42:26 brad Exp $
a7 1
REVISION=	0
@


1.115
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2013/06/17 19:28:37 ajacoutot Exp $
d8 1
a8 1
REVISION=	7
d48 1
a48 1
WANTLIB+=	heimbase lber-2.4 ldap-2.4 pthread roken
@


1.114
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2013/06/12 20:36:34 brad Exp $
d8 1
a8 1
REVISION=	6
d48 1
a48 1
WANTLIB+=	heimbase heimntlm hx509 lber-2.4 ldap-2.4 pthread roken
@


1.113
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2013/05/25 00:33:10 brad Exp $
d8 1
a8 1
REVISION=	5
d47 2
a48 1
WANTLIB+=	sasl2 asn1 com_err gssapi krb5 lber ldap
@


1.112
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2013/04/26 07:21:40 sthen Exp $
d8 1
a8 1
REVISION=	4
d52 1
a52 1
LIB_DEPENDS+=	databases/mariadb
@


1.111
log
@Fix crypt(3) support in lighttpd's htpasswd support; permits use with bcrypt
ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2013/03/28 16:22:32 brad Exp $
d8 1
a8 1
REVISION=	3
d52 1
a52 1
LIB_DEPENDS+=	databases/mysql
@


1.110
log
@More fixes from upstream..

- Support multi line logging.
- Call ERR_clear_error only for SSL connections in CON_STATE_ERROR.
- Reject non ASCII characters in HTTP header names.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2013/03/21 08:48:55 ajacoutot Exp $
d8 1
a8 1
REVISION=	2
@


1.109
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2013/03/11 11:44:42 espie Exp $
d8 1
a8 1
REVISION=	1
@


1.108
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2013/02/09 14:49:53 sthen Exp $
a27 1
USE_LIBTOOL=	Yes
@


1.107
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2013/01/25 08:00:23 brad Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.106
log
@Upstream bug fix:

Fix handling of If-Modified-Since if If-None-Match is present (don't
return 412 for date parsing errors); follow current draft for HTTP/1.1,
which tells us to ignore If-Modified-Since if we have matching etags.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2013/01/14 09:17:03 brad Exp $
d48 1
a48 1
.if ${FLAVOR:L:Mldap}
d54 1
a54 1
.if ${FLAVOR:L:Mmysql}
@


1.105
log
@mod_fastcgi: Fix mix up of "mode" => "authorizer" in other FastCGI configs.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2012/11/21 21:58:18 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.104
log
@security update to lighttpd 1.4.32, fixing a trivial DoS introduced in 1.4.31
http://download.lighttpd.net/lighttpd/security/lighttpd_sa_2012_01.txt

OK brad@@ (maintainer), same update from gsoares@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2012/11/21 11:41:56 brad Exp $
d8 1
@


1.103
log
@Another fix from upstream..

Log address of untrusted proxy with debug.log-request-handling.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2012/11/15 10:45:23 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.31
REVISION=	2
d20 1
@


1.102
log
@More fixes from upstream..

- Fix :port handling in $HTTP["host"] checks.
- Ignore EPIPE/ECONNRESET after SSL_shutdown.
- Add PATCH method.
- Handle ENAMETOOLONG, return 404 Not Found.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2012/07/10 15:22:45 jasper Exp $
d8 1
a8 1
REVISION=	1
@


1.101
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2012/06/01 08:20:50 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.101.2.1
log
@MFC security update to lighttpd 1.4.32, fixing trivial DoS introduced in 1.4.31
http://download.lighttpd.net/lighttpd/security/lighttpd_sa_2012_01.txt
(also fixes other bugs previously patched in -current).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2012/11/21 21:58:18 sthen Exp $
d7 2
a8 1
DISTNAME=	lighttpd-1.4.32
a20 1

@


1.100
log
@update to lighttpd 1.4.31, rolling in the backported patches. ok brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2012/05/25 08:24:40 sthen Exp $
d8 1
d24 1
d40 3
a42 1
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.99
log
@Add lighttpd patch: add support for IPv6 to mod_extforward. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2012/05/15 19:38:01 jasper Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.30
REVISION=	5
d31 1
a31 1
AUTOCONF_VERSION= 2.68
@


1.98
log
@switch to lua.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2012/04/28 09:25:25 sthen Exp $
d8 1
a8 1
REVISION=	4
@


1.97
log
@lighttpd fixes, from upstream via Brad.
- Fix handling of empty header list entries in http_request_split_value.
- Fix access log escaping of " and \\.
- Fix digest "md5-sess" implementation (Errata ID 1649, RFC 2617).
- Add "AUTH_TYPE" environment (for *cgi), remove fastcgi specific workaround.
- Fix splitting :port with IPv6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2012/04/09 07:02:11 ajacoutot Exp $
d8 1
a8 1
REVISION=	3
d21 3
a23 1
WANTLIB=		c crypto lua>=5.1 m pcre ssl z
d26 1
a26 1
		lang/lua
@


1.96
log
@Upsteam: always convert letters to lowercase to get transitive results.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2012/03/06 08:23:43 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.95
log
@Add a lighttpd fix from upstream. From Brad.
- Disable mmap by default with mod_compress, if a user truncates a file we
are mmapping, reading the truncated area leads to SIGBUS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2012/01/13 23:02:15 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.94
log
@updates to lighttpd from upstream svn, from Brad

- remove "let HEAD for 0-byte files return the Content-Length" patch,
there are some cases where this is undesirable

- fix handling if etags are disabled but cache-dir is set - may
lead to double response
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2011/12/20 22:27:28 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.94.2.1
log
@MFC lighttpd patches.

- Disable mmap by default with mod_compress, if a user truncates a file we
are mmapping, reading the truncated area leads to SIGBUS.

- Always convert letters to lowercase to get transitive results.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2012/04/09 07:02:11 ajacoutot Exp $
d8 1
a8 1
REVISION=	2
@


1.93
log
@update to lighttpd 1.4.30, from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2011/12/03 22:26:08 sthen Exp $
d8 1
@


1.92
log
@ssl-related fixes from lighttpd upstream via Brad
- [ssl] count renegotiations to prevent client renegotiations
- [ssl] add option to honor server cipher order, true by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2011/12/01 12:17:11 gsoares Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.29
REVISION=	6
@


1.91
log
@SECURITY FIX for lighttpd:
(CVE-2011-4362: out of bounds read due to a signedness error)

OK jasper, brad(maintainer), sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2011/10/09 20:42:33 sthen Exp $
d8 1
a8 1
REVISION=	5
@


1.90
log
@lighttpd patches;
- let HEAD for 0-byte files return the Content-Length, from upstream via Brad
- implement reloads (graceful restart) in rc, from Ben Lovett via Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2011/10/07 20:04:39 sthen Exp $
d8 1
a8 1
REVISION=	4
@


1.89
log
@Fix mod_status bug: always showed "0/0" in the "Read" column for uploads.
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2011/09/16 12:00:07 espie Exp $
d8 1
a8 1
REVISION=	3
@


1.88
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2011/09/06 08:49:51 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.87
log
@fixes from lighttpd upstream via Brad (maintainer)
- Add static-file.disable-pathinfo option to prevent handling of
  urls like .../secret.php/image.jpg as static file.
- Don't overwrite 401 (auth required) with 501 (unknown method).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2011/08/24 21:28:09 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.86
log
@lighttpd bugfix: Limit amount of bytes we send in one go; fixes stalling in one
connection and timeouts on slow systems. From upstream via Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2011/07/07 14:34:36 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.85
log
@update lighttpd to 1.4.29, from Brad

- while there, remove patch-src_server_c too, all the various /dev/*random
are equivalent now, ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2011/04/25 09:39:36 sthen Exp $
d8 1
@


1.85.2.1
log
@SECURITY FIX for lighttpd:
(CVE-2011-4362: out of bounds read due to a signedness error)

OK jasper, brad(maintainer), sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2011/07/07 14:34:36 sthen Exp $
a7 1
REVISION=	0
@


1.84
log
@- backport a patch from upstream to avoid a conflict between OpenSSL and
internal implementations of MD5. Fixes SSL problems with some clients.

From Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2011/04/15 21:43:14 sthen Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.28
REVISION=	4
d29 1
a29 1
AUTOCONF_VERSION= 2.67
d33 2
a34 1
		 --without-bzip2
d62 1
a62 1
	${INSTALL_DATA} ${WRKSRC}/doc/*.txt \
@


1.83
log
@switch to autoconf 2.67, from Brad. config.h's checked.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2011/03/26 10:05:24 sthen Exp $
d8 1
a8 1
REVISION=	3
@


1.82
log
@Bump ports which should be using newer autoconf to 2.65;
config.h files checked.  From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2011/03/23 12:47:24 sthen Exp $
d30 1
a30 2
# Should be 2.67
AUTOCONF_VERSION= 2.65
@


1.81
log
@add an rc script for lighttpd; ok brad and ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/03/20 13:42:53 sthen Exp $
d31 1
a31 1
AUTOCONF_VERSION= 2.64
@


1.80
log
@Fixes from upstream via Brad (maintainer)
* mod_proxy: fix delayed connect
* mod_cgi: make read buffer as big as incoming data block
* ssl: Support for Diffie-Hellman and Elliptic-Curve Diffie-Hellman
key exchange (add ssl.use-sslv3)

While there, update autoconf version comment, should be 2.67.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/01/15 10:56:51 jasper Exp $
d8 1
a8 1
REVISION=	2
@


1.79
log
@- remove USE_GROFF=Yes, manpages checked by brad.

from brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2010/11/22 10:16:08 espie Exp $
d8 1
a8 1
REVISION=	1
d30 1
a30 1
# Should be 2.65
@


1.79.2.1
log
@- Fixes from upstream via Brad (maintainer)
* mod_proxy: fix delayed connect
* mod_cgi: make read buffer as big as incoming data block
* ssl: Support for Diffie-Hellman and Elliptic-Curve Diffie-Hellman
key exchange (add ssl.use-sslv3)

- backport a patch from upstream to avoid a conflict between OpenSSL and
internal implementations of MD5. Fixes SSL problems with some clients.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/01/15 10:56:51 jasper Exp $
d8 1
a8 1
REVISION=	2
d30 1
a30 1
# Should be 2.67
@


1.78
log
@remaining WANTLIB go .>=   to >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/11/22 08:36:49 espie Exp $
a28 1
USE_GROFF =	Yes
@


1.77
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/11/11 19:56:19 espie Exp $
d21 1
a21 1
WANTLIB=		c crypto lua.>=5.1 m pcre ssl z
@


1.76
log
@every WANTLIB that's linked to the build should be okay
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/11/11 12:35:09 sthen Exp $
d23 3
a25 3
LIB_DEPENDS+=	::devel/pcre \
		::lang/lua
RUN_DEPENDS+=	:spawn-fcgi-*:www/spawn-fcgi
d45 1
a45 1
LIB_DEPENDS+=	::databases/openldap
d51 2
a52 2
LIB_DEPENDS+=	::databases/mysql
WANTLIB +=	mysqlclient.>=10
@


1.75
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/11/07 19:13:40 jasper Exp $
d45 2
a46 2
LIB_DEPENDS+=	lber,ldap::databases/openldap
WANTLIB+=	sasl2 asn1 com_err gssapi krb5
d51 2
a52 1
LIB_DEPENDS+=	mysqlclient.>=10::databases/mysql
@


1.74
log
@- unbreak https

from brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2010/10/19 08:02:53 espie Exp $
d21 1
a21 1
WANTLIB=		c crypto m ssl z
d23 2
a24 2
LIB_DEPENDS+=	pcre::devel/pcre \
		lua.>=5.1::lang/lua
@


1.73
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2010/09/17 21:59:43 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.72
log
@Fix lighttpd mod_proxy waiting for response even if content-length is 0.
From upstream via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2010/08/23 22:44:10 sthen Exp $
d29 1
@


1.71
log
@update lighttpd to 1.4.28 (a couple of small changes only); from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2010/08/18 11:16:55 sthen Exp $
d8 1
@


1.70
log
@lighttpd 1.4.27; various fixes/cleanup. From Brad, small conf tweak from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/07/06 17:17:50 sthen Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.27
@


1.69
log
@fix gcc2 build; from Brad, tested by Sevan who submitted a different
diff to fix the same problem.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/04/18 08:24:31 sthen Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.26
PKGNAME=	${DISTNAME}p2
d52 3
d56 1
a56 4
	@@perl -pi -e "s,/usr/bin/rrdtool,${LOCALBASE}/bin/rrdtool,g" \
	    ${WRKSRC}/doc/lighttpd.conf
	@@perl -pi -e "s,/etc/lighttpd,${SYSCONFDIR},g" \
	    ${WRKSRC}/doc/lighttpd.8
d65 1
a65 1
	${INSTALL_DATA} ${WRKSRC}/doc/spawn-php.sh \
@


1.68
log
@Fix from upstream via Brad:
Check uri instead of physical path for directory redirect.
Should fix alias handling for "/foo" => "/var/www/";
http://example.com/foo should result in a redirect to
http://example.com/foo/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/04/09 11:06:22 sthen Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
d29 3
a31 1
CONFIGURE_STYLE= gnu
@


1.67
log
@mod_proxy fixes, from upstream via Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/03/21 09:56:55 sthen Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.66
log
@update to 1.4.26, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/02/02 08:10:29 sthen Exp $
d8 1
@


1.65
log
@SECURITY fix for CVE-2010-0295 DoS issue.
http://download.lighttpd.net/lighttpd/security/lighttpd_sa_2010_01.txt

From Brad, ok ajacoutot@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2009/12/13 22:06:24 sthen Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.25
PKGNAME=	${DISTNAME}p1
@


1.65.2.1
log
@MFC:

Bugfix update to 1.4.26, fix mod_proxy and alias handling

ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/02/02 08:10:29 sthen Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.26
@


1.64
log
@Add a patch from upstream via Brad; fix request parser to handle packets
with splitted \r\n\r\n. (http://redmine.lighttpd.net/issues/2105)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2009/11/25 23:06:53 sthen Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.63
log
@update to 1.4.25, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2009/11/08 13:16:40 sthen Exp $
d8 1
@


1.62
log
@add patches from upstream via Brad:

- disable warning "CLOSE-read"
- reset tlsext_server_name in connection_reset - fixes random
hostnames in the $HTTP["host"] conditional
- mod_fastcgi: fix mod_fastcgi packet parsing
- mod_fastcgi: Don't reconnect after connect() succeeded
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2009/10/27 23:02:11 sthen Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.24
PKGNAME=	${DISTNAME}p0
d9 1
a9 1
MASTER_SITES=	${HOMEPAGE}/download/
@


1.61
log
@update to 1.4.24, from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2009/08/11 21:55:27 sthen Exp $
d8 1
@


1.60
log
@Fix If-Modified-Since bug with daylight saving time; from upstream
repo via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/06/22 09:28:07 sthen Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.23
PKGNAME=	${DISTNAME}p1
@


1.59
log
@Add information about keep-alive connections to mod_status.
From upstream repo, via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/06/19 23:12:03 sthen Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.59.2.1
log
@MFC:

lighttpd-1.4.25

bugfix / stability update

requested by Brad, MAINTAINER

ok Brad, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/06/22 09:28:07 sthen Exp $
d7 2
a8 1
DISTNAME=	lighttpd-1.4.25
d10 1
a10 1
MASTER_SITES=	http://download.lighttpd.net/lighttpd/releases-1.4.x/
@


1.59.2.2
log
@MFC bugfix:

fix request parser to handle packets with splitted \r\n\r\n; from upstream
http://redmine.lighttpd.net/issues/2105

Requested by and ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59.2.1 2009/12/05 22:43:33 william Exp $
a7 1
PKGNAME=	${DISTNAME}p0
@


1.59.2.3
log
@SECURITY fix for CVE-2010-0295 DoS issue.
http://download.lighttpd.net/lighttpd/security/lighttpd_sa_2010_01.txt

From Brad, ok ajacoutot@@ jasper@@
MFC ok william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59.2.2 2009/12/18 02:14:32 william Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.59.2.4
log
@MFC:

Update to lighttpd-1.4.26p1 for bugfixes

Requested by Brad
ok Brad jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59.2.3 2010/02/02 13:58:53 sthen Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.26
@


1.58
log
@Bugfix update to 1.4.23; from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/03/16 17:15:34 sthen Exp $
d8 1
@


1.57
log
@remove internal spawn-fcgi in favour of a RUN_DEPENDS on www/spawn-fcgi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/03/08 11:13:43 sthen Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.22
PKGNAME=	${DISTNAME}p0
d54 1
a54 1
	    ${WRKSRC}/doc/lighttpd.1
@


1.56
log
@update to 1.4.22, from Brad (maintainer). Fixes regressions with 1.4.21
(notably: default vhost in mod_simple_vhost, segfault in mod_scgi).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/02/17 12:44:17 sthen Exp $
d8 1
d25 1
@


1.55
log
@update to 1.4.21 and tidy Makefile from Brad; lots of bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2008/10/23 20:29:17 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.21
@


1.54
log
@Upgrade to lighttpd 1.4.20. Large bug fix update.

Tested by a number of users.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2008/04/25 10:23:07 jasper Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.20
a10 2
MAINTAINER=	Brad Smith <brad@@comstyle.com>

d13 1
a13 2
LIB_DEPENDS+=	pcre::devel/pcre \
		lua.>=5.1::lang/lua
d22 3
d28 4
a31 4
CONFIGURE_ARGS+= --with-openssl \
		 --without-bzip2 \
		 --libdir="${PREFIX}/lib/lighttpd" \
		 --with-lua
@


1.53
log
@- Handle EINTR in mod_cgi during write()
- Fix mod_magnet to set con->mode = p->id if it generates content,
  so returning 4xx/5xx doesn't append an error page

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2008/04/16 20:42:35 jasper Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.19
PKGNAME=	${DISTNAME}p3
@


1.52
log
@- tweak sample config file to chroot(), use kqueue and bind to ipv4 and ipv6
- install documentation

from brad@@ (with the docs part from me)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2008/04/08 19:11:40 jasper Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
@


1.51
log
@- fix typos in the previous ssl fix;

from lighttpd svn (changeset 2144); via brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2008/04/03 10:18:15 jasper Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
d57 1
d59 2
d62 7
a68 1
		${PREFIX}/share/examples/lighttpd
@


1.50
log
@SECURITY FIX for http://secunia.com/advisories/29544/
lighttpd OpenSSL Error Queue Denial of Service Vulnerability

patches from upstream svn, via brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/03/16 18:43:31 brad Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.49
log
@upgrade to lighttpd 1.4.19. security and bug fix update. CVE-2008-1270

looks good jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/03/02 10:04:22 jasper Exp $
d8 1
@


1.48
log
@- SECURITY FIX for CVE-2008-0983
  ( http://secunia.com/cve_reference/CVE-2008-0983/ )
- add a patch to fix issues with group permissions,
  provided by Antti Harri ( already accepted upstream )

ok naddy@@ brad@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2007/09/10 20:41:59 rui Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.18
PKGNAME=	${DISTNAME}p0
@


1.47
log
@SECURITY: update lighttpd to 1.4.18, from brad.
Reference: http://secunia.com/advisories/26732/

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/09/01 20:11:21 kili Exp $
d8 1
@


1.46
log
@
Change Brads email address for now, so people can reach him instead of
getting bounces or 550s. Bump pkgnames. While here, remove quotes from
comments.

prompted by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/08/31 10:10:17 rui Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.17
PKGNAME=	${DISTNAME}p0
@


1.45
log
@update lighttpd to 1.4.17, from brad.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/07/26 03:54:06 todd Exp $
d8 1
d12 1
a12 1
MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.44
log
@target:: -> target: typo cleanup; no functional change, no pkg bump
from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/07/25 21:31:46 rui Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.16
d9 1
a23 2

MASTER_SITES=	${HOMEPAGE}download/
@


1.43
log
@update lighttpd to 1.4.16

ok brad (maintainer), simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/07/22 19:44:17 rui Exp $
d50 1
a50 1
pre-build::
@


1.42
log
@roll in some distribution patches which fix multiple vulnerabilities.
Reference: http://secunia.com/advisories/26130/

ok kili@@, simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/06/17 18:14:09 jasper Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.15
PKGNAME=	${DISTNAME}p1
@


1.41
log
@- remove description of non-existent flavor (from MAINTAINER)
- bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/04/28 10:08:01 rui Exp $
d5 1
a5 1
COMMENT=	"secure, fast, compliant, and very flexible web-server"
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.40
log
@update lighttpd to 1.4.15, from brad
ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/04/24 05:09:41 ckuethe Exp $
d8 1
@


1.39
log
@add a daemon user for lighttpd, from brad.
ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/02/02 09:25:18 bernd Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.13
PKGNAME=	${DISTNAME}p3
d27 1
d50 6
a59 4

post-configure:
	@@perl -pi -e "s,/usr/bin/rrdtool,${LOCALBASE}/bin/rrdtool," \
		${WRKSRC}/doc/lighttpd.conf
@


1.38
log
@Fix a possible 99% cpu bug when a client connection is dropped.
See http://trac.lighttpd.net/trac/wiki/Release-1.4.13-patches.

Submitted by Frank Denis. Thanks!

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/12/16 12:22:35 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
@


1.38.2.1
log
@security update to 1.4.16, fixes multiple vulnerabilities
Reference: http://secunia.com/advisories/26130/

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/02/02 09:25:18 bernd Exp $
d7 2
a8 1
DISTNAME=	lighttpd-1.4.16
a27 1
LIBTOOL_FLAGS=	--tag=disable-static
a49 6
pre-build:
	@@perl -pi -e "s,/usr/bin/rrdtool,${LOCALBASE}/bin/rrdtool,g" \
	    ${WRKSRC}/doc/lighttpd.conf
	@@perl -pi -e "s,/etc/lighttpd,${SYSCONFDIR},g" \
	    ${WRKSRC}/doc/lighttpd.1

d54 4
@


1.38.2.2
log
@MFC (original commit rui@@):
SECURITY: update lighttpd to 1.4.18, from brad.
Reference: http://secunia.com/advisories/26732/

worked done by brad@@, ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38.2.1 2007/07/29 19:00:55 sturm Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.18
a8 1
MASTER_SITES=	${HOMEPAGE}download/
d23 2
@


1.37
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/11/11 14:26:03 mbalmer Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.36
log
@Fix WANTLIB after openldap changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/11/05 16:13:31 fgsch Exp $
a13 2

BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig
@


1.35
log
@enable lua by default so mod_magnet and mod_cml can use it. bump package.
discussed and ok by jolan@@ and brad@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/10/10 00:04:23 brad Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
d44 1
a44 1
WANTLIB+=	sasl2
@


1.34
log
@upgrade to lighttpd 1.4.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/09/23 15:44:04 brad Exp $
d8 1
d15 4
a18 1
LIB_DEPENDS+=	pcre::devel/pcre
d25 1
a25 1
WANTLIB=		c crypto m ssl z 
d33 2
a34 1
		 --libdir="${PREFIX}/lib/lighttpd"
@


1.33
log
@upgrade to lighttpd 1.4.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2006/09/18 09:04:03 espie Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.12
@


1.32
log
@new style libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2006/03/09 19:00:59 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.11
@


1.31
log
@upgrade to lighttpd 1.4.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/03/06 06:21:02 sturm Exp $
d44 1
a44 1
LIB_DEPENDS+=	mysqlclient.10::databases/mysql
@


1.31.2.1
log
@security update to 1.4.16, fixes multiple vulnerabilities
Reference: http://secunia.com/advisories/26130/

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2006/03/09 19:00:59 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.16
d21 1
a21 1
WANTLIB=		c crypto m ssl z
a25 1
LIBTOOL_FLAGS=	--tag=disable-static
a46 6
pre-build:
	@@perl -pi -e "s,/usr/bin/rrdtool,${LOCALBASE}/bin/rrdtool,g" \
	    ${WRKSRC}/doc/lighttpd.conf
	@@perl -pi -e "s,/etc/lighttpd,${SYSCONFDIR},g" \
	    ${WRKSRC}/doc/lighttpd.1

d51 4
@


1.30
log
@don't set umask to 0 when daemonizing (changed upstream as well)

from Matthias Kilian <kili at outback.escape.de>
ok brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/02/09 02:30:40 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.10
PKGNAME=	${DISTNAME}p2
@


1.29
log
@mod_cgi is resetting physical.path

From lighttpd Trac
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/02/08 20:39:47 brad Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.28
log
@upgrade to lighttpd 1.4.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/01/15 04:47:58 brad Exp $
d8 1
@


1.27
log
@upgrade to lighttpd 1.4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/01/03 23:39:11 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.9
@


1.26
log
@fix a crash with mod_proxy if the Host: header is empty.

From lighttpd Trac
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/11/23 15:22:48 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.8
PKGNAME=	${DISTNAME}p1
@


1.25
log
@upgrade to lighttpd 1.4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/11/17 17:21:15 naddy Exp $
d8 1
@


1.24
log
@fix wantlib for ldap flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/11/03 01:52:12 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.7
#PKGNAME=	# also see below
a36 1
PKGNAME=	${DISTNAME}p0
@


1.23
log
@upgrade to lighttpd 1.4.7

the performance for high-concurrency, large file transfers has
improved dramatically.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/10/10 17:03:38 brad Exp $
d8 1
d38 1
d41 1
@


1.22
log
@upgrade to lighttpd 1.4.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/10/08 20:05:06 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.6
@


1.21
log
@add mysql and ldap FLAVORs as well as re-enabling SSL.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/10/07 20:07:04 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.4.5
PKGNAME=	${DISTNAME}p2
@


1.20
log
@remove the bz2 dependency as it's non-standard to use bz2 with mod_compress
anyway and remove the MySQL plug-in since it's useless until a proper
FLAVOR is added.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/10/03 14:17:52 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
d22 1
a22 1
WANTLIB=		c m z 
d28 1
a28 1
CONFIGURE_ARGS+= --without-openssl \
d33 13
@


1.19
log
@DON'T CUT CORNERS.
Bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/10/03 13:27:52 aanriot Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
d15 1
a15 2
LIB_DEPENDS+=	bz2::archivers/bzip2 \
		pcre::devel/pcre
d29 1
@


1.18
log
@add libm to WANTLIB.

"go ahead" brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/10/03 00:53:50 brad Exp $
d8 1
@


1.17
log
@upgrade to lighttpd 1.4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/09/16 16:31:04 brad Exp $
d22 1
a22 1
WANTLIB=		c z 
@


1.16
log
@upgrade to lighttpd 1.4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/08/11 04:38:44 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.4.4
@


1.15
log
@- disable SSL support for the time being until it actually works.
  http://trac.lighttpd.net/trac/ticket/93

- add USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/08/01 21:49:32 brad Exp $
d7 1
a7 2
DISTNAME=	lighttpd-1.3.16
PKGNAME=	${DISTNAME}p1
@


1.14
log
@upgrade to lighttpd 1.3.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/07/16 16:54:14 brad Exp $
d8 1
d23 1
a23 1
WANTLIB=		c crypto ssl z 
d27 1
d29 1
a29 1
CONFIGURE_ARGS+= --with-openssl \
@


1.13
log
@upgrade to lighttpd 1.3.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/06/17 14:47:57 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.15
@


1.12
log
@use --libdir instead of patching the Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/06/17 14:22:52 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.14
d36 4
@


1.11
log
@upgrade to lighttpd 1.3.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/03/08 22:49:39 brad Exp $
d27 2
a28 1
CONFIGURE_ARGS+= --with-openssl
@


1.10
log
@upgrade to lighttpd 1.3.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/02/20 23:56:15 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.13
@


1.9
log
@upgrade to lighttpd 1.3.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/02/12 13:17:36 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.11
@


1.8
log
@upgrade to lighttpd 1.3.10

From: Ben Lovett <ben at tilderoot dot com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/01/31 03:42:29 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.10
@


1.7
log
@upgrade to lighttpd 1.3.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/12/12 01:39:30 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.8
@


1.6
log
@upgrade to lighttpd 1.3.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/12/11 13:29:21 alek Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.7
@


1.5
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/11/05 00:14:52 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.6
d12 1
a12 1
HOMEPAGE=	http://jan.kneschke.de/projects/lighttpd/
@


1.4
log
@upgrade to lighttpd 1.3.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/10/24 16:23:06 brad Exp $
d22 1
@


1.3
log
@upgrade to lighttpd 1.3.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/10/17 15:11:46 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.4
@


1.2
log
@upgrade to lighttpd 1.3.3

license: QPL -> BSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/10/01 06:23:40 brad Exp $
d7 1
a7 1
DISTNAME=	lighttpd-1.3.3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
DISTNAME=	lighttpd-1.3.2
d17 1
a17 1
# QPL
@


1.1.1.1
log
@add lighttpd 1.3.2
--
lighttpd a secure, fast, compliant and very flexible web-server
which has been optimized for high-performance environments. It has
a very low memory footprint compared to other webservers and takes
care of cpu-load. Its advanced feature-set (FastCGI, CGI, Auth,
Output-Compression, URL-Rewriting and many more) make lighttpd the
perfect webserver-software for every server that is suffering load
problems.
@
text
@@
