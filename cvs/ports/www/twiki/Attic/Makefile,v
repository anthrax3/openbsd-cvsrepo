head	1.13;
access;
symbols
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.10.0.8
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.6
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.4
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.7.0.12
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.10
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.8
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.6
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.5.0.6
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.4
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.1.1.1.0.2
	OPENBSD_3_6_BASE:1.1.1.1
	kevlo_2004-Apr-14:1.1.1.1
	kevlo:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2013.09.29.18.37.46;	author rpe;	state dead;
branches;
next	1.12;

1.12
date	2013.07.05.09.34.36;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.11.11.44.50;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2011.05.24.20.15.31;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2011.05.19.06.27.30;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.22.08.36.54;	author espie;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2007.09.15.20.38.26;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.01.22.07.39;	author aanriot;	state Exp;
branches;
next	1.5;

1.5
date	2005.11.09.10.27.06;	author aanriot;	state Exp;
branches;
next	1.4;

1.4
date	2005.09.16.08.11.03;	author aanriot;	state Exp;
branches;
next	1.3;

1.3
date	2005.08.02.22.19.06;	author aanriot;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2005.03.08.07.43.19;	author kevlo;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2004.04.14.08.27.56;	author kevlo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.04.14.08.27.56;	author kevlo;	state Exp;
branches;
next	;

1.2.2.1
date	2005.11.09.20.33.07;	author sturm;	state Exp;
branches;
next	;

1.3.2.1
date	2005.11.09.20.33.27;	author sturm;	state Exp;
branches;
next	;

1.8.2.1
date	2011.05.19.06.29.07;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Remove TWiki
- is unmaintained/outdated for years
- has a lot of PLISTed files that change during usage
- @@comment no checksum or @@sample don't help here

suggested by and ok aja@@, ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.12 2013/07/05 09:34:36 jasper Exp $

COMMENT=	web-based collaboration platform

DISTNAME=	TWiki-4.1.1
EXTRACT_SUFX=	.tgz
EPOCH=		0
CATEGORIES=	www

HOMEPAGE=	http://twiki.org/

# GPL
PERMIT_PACKAGE_CDROM=  Yes

MASTER_SITES=	${HOMEPAGE}/p/pub/Codev/Release/

NO_BUILD=	Yes
NO_TEST=	Yes
PKG_ARCH=	*

RUN_DEPENDS=	www/p5-CGI-Session

WRKDIST=	${WRKDIR}

PREFIX=		${VARBASE}/www
WWWDOCDIR=	${PREFIX}/htdocs/twiki
WWWCGIDIR=	${PREFIX}/cgi-bin/twiki
SUBST_VARS=	WWWDOCDIR WWWCGIDIR

post-extract:
	@@cp -p ${WRKSRC}/bin/LocalLib.cfg.txt ${WRKSRC}/bin/LocalLib.cfg

do-configure:
	@@perl -i -pe 's@@%%WWWDOCDIR%%@@${WWWDOCDIR}@@g' ${WRKSRC}/bin/LocalLib.cfg
	@@find ${WRKSRC} -name '*.orig' |xargs rm
	@@find ${WRKSRC} -name '*\,v' |xargs rm

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/conf
	${INSTALL_DATA} ${FILESDIR}/httpd-twiki.conf ${PREFIX}/conf/

	${INSTALL_DATA_DIR} ${WWWDOCDIR}
	${INSTALL_SCRIPT_DIR} ${WWWCGIDIR}
	${INSTALL_SCRIPT} ${WRKSRC}/bin/!(logos) ${WWWCGIDIR}

.for f in index.html robots.txt INSTALL.html TWikiHistory.html \
	TWikiReleaseNotes04x01.html TWikiUpgradeGuide.html \
	pub-htaccess.txt readme.txt root-htaccess.txt \
	subdir-htaccess.txt  

	${INSTALL_DATA} ${WRKSRC}/${f} ${WWWDOCDIR}
.endfor

.for d in data lib pub templates tools
	cp -R ${WRKSRC}/${d} ${WWWDOCDIR}
.endfor

.include <bsd.port.mk>
@


1.12
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 11:44:50 espie Exp $
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/05/24 20:15:31 naddy Exp $
d25 1
a25 1
PREFIX=		/var/www
@


1.10
log
@bump epoch for 20040903 -> 4.1.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/05/19 06:27:30 jasper Exp $
a13 3
PERMIT_PACKAGE_FTP=    Yes
PERMIT_DISTFILES_CDROM=Yes
PERMIT_DISTFILES_FTP=  Yes
d18 1
a18 1
NO_REGRESS=	Yes
@


1.9
log
@Security fix for CVE-2011-1838:
XSS Vulnerability with origurl parameter of login script

Patch from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/22 08:36:54 espie Exp $
d7 1
a7 1
REVISION=	0
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/15 20:38:26 merdely Exp $
d7 1
@


1.8.2.1
log
@Security fix for CVE-2011-1838:
XSS Vulnerability with origurl parameter of login script

Patch from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/22 08:36:54 espie Exp $
a6 1
REVISION=	0
@


1.7
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/06/01 22:07:39 aanriot Exp $
d23 1
a23 1
RUN_DEPENDS=	::www/p5-CGI-Session
@


1.6
log
@update to 4.1.1 .

from Jason Crawford <jasonrcrawford@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/11/09 10:27:06 aanriot Exp $
d3 1
a3 1
COMMENT=	"web-based collaboration platform"
@


1.5
log
@- zap unneeded INSTALL/DEINSTALL scripts which are conflicting.
- bump PKGNAME.

spotted by sturm@@, ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/09/16 08:11:03 aanriot Exp $
d5 2
a6 2
DISTNAME=	TWiki20040903
PKGNAME=	TWiki-20040903p0
d17 1
a17 1
MASTER_SITES=	${HOMEPAGE}/swd/	
d23 3
a25 1
WRKDIST=	${WRKDIR}/twiki
d32 3
d36 1
a36 2
	@@perl -i -pe 's@@%%WWWDOCDIR%%@@${WWWDOCDIR}@@g' ${WRKSRC}/lib/TWiki.cfg
	@@perl -i -pe 's@@%%WWWDOCDIR%%@@${WWWDOCDIR}@@g' ${WRKSRC}/bin/setlib.cfg
d46 6
a51 1
	${INSTALL_SCRIPT} ${WRKSRC}/bin/* ${WWWCGIDIR}
a52 1
.for f in index.html robots.txt TWikiDocumentation.html TWikiHistory.html
d56 1
a56 1
.for d in data lib pub templates
@


1.4
log
@update to TWiki20040903.

The security alert can be found at
http://twiki.org/cgi-bin/view/Codev/TWikiSecurityAlerts .

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/08/02 22:19:06 aanriot Exp $
d6 1
a6 1
PKGNAME=	TWiki-20040903
@


1.3
log
@update to latest version (20030201).

help and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/03/08 07:43:19 kevlo Exp $
d5 2
a6 2
DISTNAME=	TWiki20040902
PKGNAME=	TWiki-20040902
@


1.3.2.1
log
@MFC:
update to TWiki20040903.

The security alert can be found at
http://twiki.org/cgi-bin/view/Codev/TWikiSecurityAlerts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/08/02 22:19:06 aanriot Exp $
d5 2
a6 2
DISTNAME=	TWiki20040903
PKGNAME=	TWiki-20040903p0
@


1.2
log
@drop maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/04/14 08:27:56 kevlo Exp $
d5 2
a6 2
DISTNAME=	TWiki20030201
PKGNAME=	TWiki-20030201
d11 1
d23 1
a23 1
WRKDIST=	${WRKDIR}
d26 3
a28 2
WWWDOCDIR=	${PREFIX}/htdocs
SUBST_VARS=	WWWDOCDIR
d34 1
d37 11
a47 4
	${INSTALL_SCRIPT_DIR} ${PREFIX}/cgi-bin/twiki
	${INSTALL_SCRIPT} ${WRKSRC}/bin/* ${PREFIX}/cgi-bin/twiki
	${INSTALL_DATA} ${WRKSRC}/lib/TWiki.cfg ${WRKSRC}/lib/TWiki.cfg-sample
	${INSTALL_DATA_DIR} ${WWWDOCDIR}/twiki
d49 1
a49 1
	cp -R ${WRKSRC}/${d} ${WWWDOCDIR}/twiki
@


1.2.2.1
log
@MFC:
update to TWiki20040903.

The security alert can be found at
http://twiki.org/cgi-bin/view/Codev/TWikiSecurityAlerts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/03/08 07:43:19 kevlo Exp $
d5 2
a6 2
DISTNAME=	TWiki20040903
PKGNAME=	TWiki-20040903p0
d22 1
a22 1
WRKDIST=	${WRKDIR}/twiki
d25 2
a26 3
WWWDOCDIR=	${PREFIX}/htdocs/twiki
WWWCGIDIR=	${PREFIX}/cgi-bin/twiki
SUBST_VARS=	WWWDOCDIR WWWCGIDIR
a31 1
	@@find ${WRKSRC} -name '*\,v' |xargs rm
d34 4
a37 11
	${INSTALL_DATA_DIR} ${PREFIX}/conf
	${INSTALL_DATA} ${FILESDIR}/httpd-twiki.conf ${PREFIX}/conf/

	${INSTALL_DATA_DIR} ${WWWDOCDIR}
	${INSTALL_SCRIPT_DIR} ${WWWCGIDIR}
	${INSTALL_SCRIPT} ${WRKSRC}/bin/* ${WWWCGIDIR}

.for f in index.html robots.txt TWikiDocumentation.html TWikiHistory.html
	${INSTALL_DATA} ${WRKSRC}/${f} ${WWWDOCDIR}
.endfor

d39 1
a39 1
	cp -R ${WRKSRC}/${d} ${WWWDOCDIR}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a9 2

MAINTAINER=	Kevin Lo <kevlo@@openbsd.org>
@


1.1.1.1
log
@Initial import of twiki.

TWiki is a flexible and powerful web-based collaboration platform
that allows you to run a dynamic intranet site, a project development
space, a document management system, a knowledge base, an issue
tracking system and many other groupware application.
@
text
@@
