head	1.5;
access;
symbols
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	avsm_2002-06-24:1.1.1.1
	avsm:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2003.05.02.19.49.01;	author avsm;	state dead;
branches;
next	1.4;

1.4
date	2003.04.03.10.26.25;	author avsm;	state Exp;
branches;
next	1.3;

1.3
date	2002.07.22.16.47.33;	author avsm;	state Exp;
branches;
next	1.2;

1.2
date	2002.07.09.20.40.51;	author avsm;	state Exp;
branches;
next	1.1;

1.1
date	2002.06.24.19.23.41;	author avsm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.06.24.19.23.41;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Make php chroot-friendly by default; the default pear directory is
/var/www/pear and php modules go into /var/www/lib/php.

Everything else still lives outside the chroot

Also tidy up the pkg/INSTALL message while I'm here
@
text
@$OpenBSD: patch-configure_in,v 1.4 2003/04/03 10:26:25 avsm Exp $
--- configure.in.orig	Fri Dec 27 04:07:18 2002
+++ configure.in	Wed Jan 22 10:48:47 2003
@@@@ -34,9 +34,7 @@@@ dnl check for working sed
 PHP_PROG_SED
 
 PHP_CONFIG_NICE(config.nice)
-for arg in $0 "$@@"; do
-  CONFIGURE_COMMAND="$CONFIGURE_COMMAND '$arg'"
-done
+CONFIGURE_COMMAND="Built via the OpenBSD Ports Tree"
 
 AC_CANONICAL_HOST
 AC_CONFIG_HEADER(main/php_config.h)
@@@@ -806,14 +804,14 @@@@ unset with_pic
 
 case $php_build_target in
 program|static)
-    standard_libtool_flag='-prefer-non-pic -static'
+    standard_libtool_flag='-static'
     if test -z "$PHP_MODULES"; then
         enable_shared=no
     fi
 ;;
 shared)
     enable_static=no
-    standard_libtool_flag=-prefer-pic
+    standard_libtool_flag=
     EXTRA_LDFLAGS="$EXTRA_LDFLAGS -avoid-version -module"
 ;;
 esac
@@@@ -926,7 +924,7 @@@@ EXPANDED_SYSCONFDIR=`eval echo $sysconfd
 EXPANDED_DATADIR=$datadir
 EXPANDED_PHP_CONFIG_FILE_PATH=`eval echo "$PHP_CONFIG_FILE_PATH"`
 EXPANDED_PHP_CONFIG_FILE_SCAN_DIR=`eval echo "$PHP_CONFIG_FILE_SCAN_DIR"`
-INCLUDE_PATH=.:$EXPANDED_PEAR_INSTALLDIR
+INCLUDE_PATH=.:$libdir
 
 exec_prefix=$old_exec_prefix
 libdir=$old_libdir
@


1.4
log
@Update to php4-core-4.3.1
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@upgrade to php-4.2.2, from brad@@

closes a security hole: http://www.php.net/release_4_2_2.php
@
text
@d1 15
a15 4
$OpenBSD: patch-configure_in,v 1.2 2002/07/09 20:40:51 avsm Exp $
--- configure.in.orig	Sun Jul 21 08:49:33 2002
+++ configure.in	Mon Jul 22 10:43:06 2002
@@@@ -791,7 +791,7 @@@@ unset with_pic
d21 1
a21 1
     if test "$lib_build_shared" != "yes"; then
a23 1
@@@@ -800,7 +800,7 @@@@ program|static)
d29 1
a29 1
     EXTRA_LDFLAGS="$EXTRA_LDFLAGS -avoid-version"
d32 1
a32 2
@@@@ -920,7 +920,7 @@@@ EXPANDED_LIBDIR=$libdir
 EXPANDED_SYSCONFDIR=`eval echo $sysconfdir`
d35 1
@


1.2
log
@force pear's path to be included in the include_path for php so it
doesn't have to be configured explicitly.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.1.1.1 2002/06/24 19:23:41 avsm Exp $
--- configure.in.orig	Sun May 12 22:23:57 2002
+++ configure.in	Tue Jul  9 21:12:31 2002
@@@@ -792,7 +792,7 @@@@ unset with_pic
d13 1
a13 1
@@@@ -801,7 +801,7 @@@@ program|static)
d22 1
a22 1
@@@@ -921,7 +921,7 @@@@ EXPANDED_LIBDIR=$libdir
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.4 2001/12/18 01:40:48 avsm Exp $
d3 1
a3 1
+++ configure.in	Sun Jun 23 18:52:12 2002
d22 9
@


1.1.1.1
log
@Import php4-core-4.2.1

Installs the barebones php4 with only the gettext, iconv and recode
modules compiled in.

All of the other modules have to be installed as shared modules on
top of this.

In addition to the Apache module, this package also includes a php
command-line binary which can be used in shell scripts.  The binary
uses the same /var/www/conf/php.ini file as the Apache module.

There is some non-i386 breakage at the moment (notably macppc).

Work by wilfried@@ and me.  espie@@ ok
@
text
@@
