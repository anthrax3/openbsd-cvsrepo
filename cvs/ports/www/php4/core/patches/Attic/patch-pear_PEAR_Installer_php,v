head	1.4;
access;
symbols
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2004.04.08.12.38.59;	author avsm;	state dead;
branches;
next	1.3;

1.3
date	2004.02.29.00.08.07;	author avsm;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2003.08.28.22.30.38;	author avsm;	state dead;
branches;
next	1.1;

1.1
date	2003.08.21.15.05.21;	author espie;	state Exp;
branches;
next	;

1.3.2.1
date	2004.07.17.00.36.33;	author robert;	state dead;
branches;
next	;


desc
@@


1.4
log
@update to php4-4.3.5
@
text
@$OpenBSD: patch-pear_PEAR_Installer_php,v 1.3 2004/02/29 00:08:07 avsm Exp $
--- pear/PEAR/Installer.php.orig	2004-02-28 17:56:50.000000000 +0000
+++ pear/PEAR/Installer.php	2004-02-28 17:57:30.000000000 +0000
@@@@ -540,21 +540,6 @@@@ class PEAR_Installer extends PEAR_Downlo
     }
 
     // }}}
-    // {{{ _prependPath($path, $prepend)
-
-    function _prependPath($path, $prepend)
-    {
-        if (strlen($prepend) > 0) {
-            if (OS_WINDOWS && preg_match('/^[a-z]:/i', $path)) {
-                $path = $prepend . substr($path, 2);
-            } else {
-                $path = $prepend . $path;
-            }
-        }
-        return $path;
-    }
-
-    // }}}
     // {{{ download()
 
     /**
@


1.3
log
@Update to php4-4.3.5RC3 (final RC), fixes some 64-bit bugs conveniently in
time for amd64 to work.  Also some gcc3 fixes.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3.2.1
log
@Update to 4.3.8:
SECURITY: PHP memory_limit remote vulnerability
http://security.e-matters.de/advisories/112004.html
It contains a lot of other fixes too, check the
changelog at http://www.php.net/ChangeLog-4.php#4.3.8 .

Tested by many; ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-pear_PEAR_Installer_php,v 1.3 2004/02/29 00:08:07 avsm Exp $
@


1.2
log
@Update to php-4.3.3; tested by many on ports@@, thanks folks!
naddy@@ ok
@
text
@d1 4
a4 19
$OpenBSD: patch-pear_PEAR_Installer_php,v 1.1 2003/08/21 15:05:21 espie Exp $
--- pear/PEAR/Installer.php.orig	2003-08-21 16:57:40.000000000 +0200
+++ pear/PEAR/Installer.php	2003-08-21 16:58:58.000000000 +0200
@@@@ -110,12 +110,16 @@@@ class PEAR_Installer extends PEAR_Common
      *
      * @@access public
      */
-    function PEAR_Installer(&$ui)
+    function PEAR_Installer(&$ui, $options = array())
     {
         parent::PEAR_Common();
         $this->setFrontendObject($ui);
         $this->debug = $this->config->get('verbose');
-        $this->registry = &new PEAR_Registry($this->config->get('php_dir'));
+	$v = $this->config->get('php_dir');
+        if (isset($options['installroot'])) {
+		$v = $this->_prependPath($v, $options['installroot']);
+	}
+        $this->registry = &new PEAR_Registry($v);
d8 18
@


1.1
log
@fix blasted installroot ignored.
@
text
@d1 1
a1 1
$OpenBSD$
@

