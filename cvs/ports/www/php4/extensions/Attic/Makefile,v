head	1.60;
access;
symbols
	OPENBSD_4_3:1.59.0.2
	OPENBSD_4_3_BASE:1.59
	OPENBSD_4_2:1.55.0.2
	OPENBSD_4_2_BASE:1.55
	OPENBSD_4_1:1.53.0.2
	OPENBSD_4_1_BASE:1.53
	OPENBSD_4_0:1.49.0.2
	OPENBSD_4_0_BASE:1.49
	OPENBSD_3_9:1.48.0.2
	OPENBSD_3_9_BASE:1.48
	OPENBSD_3_8:1.44.0.2
	OPENBSD_3_8_BASE:1.44
	OPENBSD_3_7:1.41.0.2
	OPENBSD_3_7_BASE:1.41
	OPENBSD_3_6:1.34.0.2
	OPENBSD_3_6_BASE:1.34
	OPENBSD_3_5:1.29.0.2
	OPENBSD_3_5_BASE:1.29
	OPENBSD_3_4:1.24.0.2
	OPENBSD_3_4_BASE:1.24
	OPENBSD_3_3:1.17.0.4
	OPENBSD_3_3_BASE:1.17
	OPENBSD_3_2:1.17.0.2
	OPENBSD_3_2_BASE:1.17
	avsm_2002-06-24:1.1.1.1
	avsm:1.1.1;
locks; strict;
comment	@# @;


1.60
date	2008.05.27.07.07.29;	author jasper;	state dead;
branches;
next	1.59;

1.59
date	2007.11.20.19.23.25;	author sturm;	state Exp;
branches;
next	1.58;

1.58
date	2007.10.30.10.13.05;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2007.10.21.09.43.22;	author espie;	state Exp;
branches;
next	1.56;

1.56
date	2007.09.15.20.38.25;	author merdely;	state Exp;
branches;
next	1.55;

1.55
date	2007.05.15.17.01.01;	author naddy;	state Exp;
branches;
next	1.54;

1.54
date	2007.04.28.19.58.26;	author sturm;	state Exp;
branches;
next	1.53;

1.53
date	2007.01.01.23.10.24;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2007.01.01.23.02.57;	author naddy;	state Exp;
branches;
next	1.51;

1.51
date	2006.11.24.08.39.03;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2006.09.18.09.04.03;	author espie;	state Exp;
branches;
next	1.49;

1.49
date	2006.08.04.00.10.42;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2005.11.07.21.33.58;	author bernd;	state Exp;
branches;
next	1.47;

1.47
date	2005.11.01.11.09.31;	author mbalmer;	state Exp;
branches;
next	1.46;

1.46
date	2005.10.27.20.03.25;	author sturm;	state Exp;
branches;
next	1.45;

1.45
date	2005.09.16.09.51.28;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2005.07.12.15.49.27;	author robert;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2005.06.20.16.11.11;	author robert;	state Exp;
branches;
next	1.42;

1.42
date	2005.04.04.21.11.42;	author robert;	state Exp;
branches;
next	1.41;

1.41
date	2005.03.16.21.55.54;	author naddy;	state Exp;
branches
	1.41.2.1;
next	1.40;

1.40
date	2005.02.10.12.38.28;	author naddy;	state Exp;
branches;
next	1.39;

1.39
date	2005.02.06.13.10.38;	author wilfried;	state Exp;
branches;
next	1.38;

1.38
date	2005.01.30.15.29.07;	author alek;	state Exp;
branches;
next	1.37;

1.37
date	2004.12.21.12.15.01;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2004.12.11.13.29.22;	author alek;	state Exp;
branches;
next	1.35;

1.35
date	2004.10.13.01.46.02;	author danh;	state Exp;
branches;
next	1.34;

1.34
date	2004.08.03.12.54.40;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2004.07.27.11.15.24;	author robert;	state Exp;
branches;
next	1.32;

1.32
date	2004.07.15.00.49.47;	author robert;	state Exp;
branches;
next	1.31;

1.31
date	2004.07.05.00.00.33;	author robert;	state Exp;
branches;
next	1.30;

1.30
date	2004.06.08.15.59.54;	author robert;	state Exp;
branches;
next	1.29;

1.29
date	2004.02.29.00.25.41;	author avsm;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2004.01.05.17.02.32;	author avsm;	state Exp;
branches;
next	1.27;

1.27
date	2004.01.02.04.56.24;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2003.11.21.04.54.20;	author jolan;	state Exp;
branches;
next	1.25;

1.25
date	2003.11.14.14.52.49;	author avsm;	state Exp;
branches;
next	1.24;

1.24
date	2003.08.12.04.41.08;	author jolan;	state Exp;
branches
	1.24.2.1;
next	1.23;

1.23
date	2003.07.21.20.34.52;	author avsm;	state Exp;
branches;
next	1.22;

1.22
date	2003.05.10.14.42.49;	author avsm;	state Exp;
branches;
next	1.21;

1.21
date	2003.05.07.14.02.32;	author avsm;	state Exp;
branches;
next	1.20;

1.20
date	2003.05.02.19.49.36;	author avsm;	state Exp;
branches;
next	1.19;

1.19
date	2003.04.03.14.04.25;	author avsm;	state Exp;
branches;
next	1.18;

1.18
date	2003.04.03.10.27.22;	author avsm;	state Exp;
branches;
next	1.17;

1.17
date	2002.09.14.15.22.06;	author avsm;	state Exp;
branches;
next	1.16;

1.16
date	2002.09.14.00.46.02;	author avsm;	state Exp;
branches;
next	1.15;

1.15
date	2002.09.12.14.39.28;	author avsm;	state Exp;
branches;
next	1.14;

1.14
date	2002.09.11.23.16.48;	author avsm;	state Exp;
branches;
next	1.13;

1.13
date	2002.08.17.01.33.57;	author avsm;	state Exp;
branches;
next	1.12;

1.12
date	2002.08.12.04.30.21;	author avsm;	state Exp;
branches;
next	1.11;

1.11
date	2002.08.07.15.52.05;	author avsm;	state Exp;
branches;
next	1.10;

1.10
date	2002.07.24.16.14.56;	author avsm;	state Exp;
branches;
next	1.9;

1.9
date	2002.07.24.16.14.27;	author avsm;	state Exp;
branches;
next	1.8;

1.8
date	2002.07.24.15.41.42;	author avsm;	state Exp;
branches;
next	1.7;

1.7
date	2002.07.10.09.00.49;	author avsm;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.10.08.13.27;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2002.07.09.19.35.10;	author avsm;	state Exp;
branches;
next	1.4;

1.4
date	2002.07.09.18.14.16;	author avsm;	state Exp;
branches;
next	1.3;

1.3
date	2002.07.02.01.09.50;	author kevlo;	state Exp;
branches;
next	1.2;

1.2
date	2002.06.26.22.16.40;	author avsm;	state Exp;
branches;
next	1.1;

1.1
date	2002.06.24.19.27.46;	author avsm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.06.24.19.27.46;	author avsm;	state Exp;
branches;
next	;

1.24.2.1
date	2003.11.14.15.22.23;	author avsm;	state Exp;
branches;
next	1.24.2.2;

1.24.2.2
date	2004.07.20.23.23.07;	author robert;	state Exp;
branches;
next	;

1.29.2.1
date	2004.07.17.00.36.33;	author robert;	state Exp;
branches;
next	1.29.2.2;

1.29.2.2
date	2004.07.17.00.52.34;	author robert;	state Exp;
branches;
next	;

1.41.2.1
date	2005.05.23.20.21.31;	author robert;	state Exp;
branches;
next	1.41.2.2;

1.41.2.2
date	2005.10.27.20.06.08;	author sturm;	state Exp;
branches;
next	1.41.2.3;

1.41.2.3
date	2005.11.03.09.24.50;	author sturm;	state Exp;
branches;
next	1.41.2.4;

1.41.2.4
date	2005.11.10.21.22.26;	author robert;	state Exp;
branches;
next	;

1.44.2.1
date	2005.11.01.11.50.23;	author sturm;	state Exp;
branches;
next	1.44.2.2;

1.44.2.2
date	2005.11.03.09.26.15;	author sturm;	state Exp;
branches;
next	1.44.2.3;

1.44.2.3
date	2005.11.10.21.21.24;	author robert;	state Exp;
branches;
next	;


desc
@@


1.60
log
@it's a sunny day....and the right time to kill php4.

it has been unlinked from the builds for some monthts now, and everybody
should've upgraded to php5 a long time ago.

from brad@@, ok robert@@
@
text
@# $OpenBSD: Makefile,v 1.59 2007/11/20 19:23:25 sturm Exp $

FULLPKGNAME-main=	php4-extensions-${V}p1
COMMENT-main=	informational package about PHP4 extensions

MULTI_PACKAGES=-main

# extensions get installed under the apache chroot
PREFIX=		${CHROOT_DIR}

FLAVORS=	no_x11
FLAVOR?=

WANTLIB=	stdc++ m

MODULES=	devel/gettext

CONFIGURE_ARGS+=	--with-apxs=/usr/sbin/apxs \
			--with-iconv-dir=${LOCALBASE} \
			--with-iconv=${LOCALBASE}

GRAPHIC_DEPENDS=	jpeg.>=62::graphics/jpeg \
			png.>=3::graphics/png

GRAPHIC_CONFIG=		--with-jpeg-dir=${LOCALBASE} \
			--with-png-dir=${LOCALBASE} \
			--with-zlib-dir=/usr

# bz2
PSEUDO_FLAVORS+=	no_bz2
.if ${FLAVOR:L:Mno_bz2}
CONFIGURE_ARGS+=	--without-bz2
.else
MULTI_PACKAGES+=	-bz2
COMMENT-bz2=		bzip2 compression extensions for php4
CONFIGURE_ARGS+=	--with-bz2=shared,${LOCALBASE}
LIB_DEPENDS-bz2=	bz2.>=10::archivers/bzip2
.endif

# curl
PSEUDO_FLAVORS+=	no_curl
.if ${FLAVOR:L:Mno_curl}
CONFIGURE_ARGS+=	--without-curl
.else
MULTI_PACKAGES+=	-curl
COMMENT-curl=		curl URL library extensions for php4
CONFIGURE_ARGS+=	--with-curl=shared,${LOCALBASE}
LIB_DEPENDS-curl=	curl.>=2::net/curl
WANTLIB-curl=		${WANTLIB} crypto idn ssl z
FULLPKGNAME-curl=	php4-curl-${V}p2
.endif

# dba
PSEUDO_FLAVORS+=	no_dba
.if ${FLAVOR:L:Mno_dba}
CONFIGURE_ARGS+=	--disable-dba
.else
MULTI_PACKAGES+=	-dba
COMMENT-dba=		dba GDBM access extensions for php4
CONFIGURE_ARGS+=	--enable-dba=shared --with-gdbm=${LOCALBASE}
LIB_DEPENDS-dba=	gdbm.>=2::databases/gdbm
.endif

# dbase
PSEUDO_FLAVORS+=	no_dbase
.if ${FLAVOR:L:Mno_dbase}
CONFIGURE_ARGS+=	--disable-dbase
.else
MULTI_PACKAGES+=	-dbase
COMMENT-dbase=		dBase database access extensions for php4
CONFIGURE_ARGS+=	--enable-dbase=shared
LIB_DEPENDS-dbase=
.endif

# dbx
PSEUDO_FLAVORS+=	no_dbx
.if ${FLAVOR:L:Mno_dbx}
CONFIGURE_ARGS+=	--disable-dbx
.else
MULTI_PACKAGES+=	-dbx
COMMENT-dbx=		dbx database abstraction interface for php4
CONFIGURE_ARGS+=	--enable-dbx=shared
LIB_DEPENDS-dbx=
.endif

# domxml
PSEUDO_FLAVORS+=	no_domxml
.if ${FLAVOR:L:Mno_domxml}
CONFIGURE_ARGS+=	--disable-dom
.else
MULTI_PACKAGES+=	-domxml
COMMENT-domxml=		manipulate XML via the DOM API in php4
CONFIGURE_ARGS+=	--with-dom=shared,${LOCALBASE}
LIB_DEPENDS-domxml=	xml2.>=6::textproc/libxml
WANTLIB-domxml=		${WANTLIB} z iconv
.endif

# filepro
PSEUDO_FLAVORS+=	no_filepro
.if ${FLAVOR:L:Mno_filepro}
CONFIGURE_ARGS+=	--disable-filepro
.else
MULTI_PACKAGES+=	-filepro
COMMENT-filepro=	filepro database access extensions for php4
CONFIGURE_ARGS+=	--enable-filepro=shared
LIB_DEPENDS-filepro=
.endif

# gd
PSEUDO_FLAVORS+=	no_gd
.if ${FLAVOR:L:Mno_gd}
CONFIGURE_ARGS+=	--without-gd --without-xpm-dir --without-ttf \
			--without-freetype-dir
.else
MULTI_PACKAGES+=	-gd
COMMENT-gd=		image manipulation extensions for php4
LIB_DEPENDS-gd=		ttf.>=1::print/freetype ${GRAPHIC_DEPENDS} \
			t1.>=5::devel/t1lib
WANTLIB-gd=		${WANTLIB} z
CONFIGURE_ARGS+=	--with-gd=shared ${GRAPHIC_CONFIG} \
			--with-ttf=shared,${LOCALBASE} --without-freetype-dir \
			--with-t1lib=${LOCALBASE}
.if !${FLAVOR:L:Mno_x11}
USE_X11=               yes
CONFIGURE_ARGS+=       --with-xpm-dir=${X11BASE}
WANTLIB-gd+=		X11 Xpm
FULLPKGNAME-gd=		php4-gd-${V}p5
.else
CONFIGURE_ARGS+=       --without-xpm-dir
FULLPKGNAME-gd=		php4-gd-${V}p5-no_x11
.endif
.endif

# gmp
PSEUDO_FLAVORS+=	no_gmp
.if ${FLAVOR:L:Mno_gmp}
CONFIGURE_ARGS+=	--without-gmp
.else
MULTI_PACKAGES+=	-gmp
COMMENT-gmp=		gmp math library support for php4
CONFIGURE_ARGS+=	--with-gmp=shared,${LOCALBASE}
LIB_DEPENDS-gmp=	gmp.>=4::devel/gmp
.endif

# imap
PSEUDO_FLAVORS+=	no_imap
.if ${FLAVOR:L:Mno_imap}
CONFIGURE_ARGS+=	--without-imap --without-kerberos
.else
MULTI_PACKAGES+=	-imap
COMMENT-imap=		imap, pop3 and nntp extensions for php4
CONFIGURE_ARGS+=	--with-imap=shared,${LOCALBASE} \
			--with-kerberos=/usr --with-imap-ssl
LIB_DEPENDS-imap=	c-client.>=5::mail/imap-uw,-c-client
WANTLIB-imap=		${WANTLIB} des gssapi crypto krb5 ssl
FULLPKGNAME-imap=	php4-imap-$Vp2
.endif

# ldap
PSEUDO_FLAVORS+=	no_ldap
.if ${FLAVOR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-ldap
.else
MULTI_PACKAGES+=	-ldap
COMMENT-ldap=		ldap protocol extensions for php4
CONFIGURE_ARGS+=	--with-ldap=shared,${LOCALBASE}
LIB_DEPENDS-ldap=	ldap.>=2,lber::databases/openldap
.endif

# mcrypt
PSEUDO_FLAVORS+=	no_mcrypt
.if ${FLAVOR:L:Mno_mcrypt}
CONFIGURE_ARGS+=	--without-mcrypt
.else
MULTI_PACKAGES+=	-mcrypt
COMMENT-mcrypt=		mcrypt encryption/decryption extensions for php4
CONFIGURE_ARGS+=	--with-mcrypt=shared,${LOCALBASE}
LIB_DEPENDS-mcrypt=	mcrypt::security/libmcrypt ltdl.>=1::devel/libtool,-ltdl
.endif

# mhash
PSEUDO_FLAVORS+=	no_mhash
.if ${FLAVOR:L:Mno_mhash}
CONFIGURE_ARGS+=	--without-mhash
.else
MULTI_PACKAGES+=	-mhash
COMMENT-mhash=		mhash extensions for php4
CONFIGURE_ARGS+=	--with-mhash=shared,${LOCALBASE}
LIB_DEPENDS-mhash=	mhash.>=2::security/mhash
.endif

# mysql
PSEUDO_FLAVORS+=	no_mysql
.if ${FLAVOR:L:Mno_mysql}
CONFIGURE_ARGS+=	--without-mysql
.else
MULTI_PACKAGES+=	-mysql
COMMENT-mysql=		mysql database access extensions for php4
CONFIGURE_ARGS+=	--with-mysql=shared,${LOCALBASE}
LIB_DEPENDS-mysql=	lib/mysql/mysqlclient.>=10::databases/mysql
.endif

# ncurses
PSEUDO_FLAVORS+=	no_ncurses
.if ${FLAVOR:L:Mno_ncurses}
CONFIGURE_ARGS+=	--without-ncurses
.else
MULTI_PACKAGES+=	-ncurses
COMMENT-ncurses=	ncurses extensions for php4
CONFIGURE_ARGS+=	--with-ncurses=shared,${LOCALBASE}
LIB_DEPENDS-ncurses=
WANTLIB-ncurses=	${WANTLIB} ncurses panel
.endif

# odbc
PSEUDO_FLAVORS+=	no_odbc
.if ${FLAVOR:L:Mno_odbc}
CONFIGURE_ARGS+=	--without-odbc
.else
MULTI_PACKAGES+=	-odbc
COMMENT-odbc=		odbc database access extensions for php4
CONFIGURE_ARGS+=        --with-iodbc=shared
LIB_DEPENDS-odbc=	iodbc.>=2::databases/iodbc
.endif

# pdf
PSEUDO_FLAVORS+=	no_pdf
.if ${FLAVOR:L:Mno_pdf}
CONFIGURE_ARGS+=	--without-pdflib
.else
MULTI_PACKAGES+=	-pdf
COMMENT-pdf=		pdf viewing and creation extensions for php4
CONFIGURE_ARGS+=	--with-pdflib=shared,${LOCALBASE} ${GRAPHIC_CONFIG} \
			--with-tiff-dir=${LOCALBASE}
LIB_DEPENDS-pdf=	pdf.>=2::print/pdflib ${GRAPHIC_DEPENDS} \
			tiff.>=35::graphics/tiff
WANTLIB-pdf=		${WANTLIB} z
.endif

# pgsql
PSEUDO_FLAVORS+=	no_pgsql
.if ${FLAVOR:L:Mno_pgsql}
CONFIGURE_ARGS+=	--without-pgsql
.else
MULTI_PACKAGES+=	-pgsql
COMMENT-pgsql=		pgsql database access extensions for php4
CONFIGURE_ARGS+=	--with-pgsql=shared,${LOCALBASE}
LIB_DEPENDS-pgsql=	pq.>=2:postgresql-client-*:databases/postgresql
.endif

# shmop
PSEUDO_FLAVORS+=	no_shmop
.if ${FLAVOR:L:Mno_shmop}
CONFIGURE_ARGS+=	--disable-shmop
.else
MULTI_PACKAGES+=	-shmop
COMMENT-shmop=		shared memory extensions for php4
CONFIGURE_ARGS+=	--enable-shmop=shared
LIB_DEPENDS-shmop=
.endif

# snmp
PSEUDO_FLAVORS+=	no_snmp
.if ${FLAVOR:L:Mno_snmp}
CONFIGURE_ARGS+=	--without-snmp
.else
MULTI_PACKAGES+=	-snmp
COMMENT-snmp=		snmp protocol extensions for php4
CONFIGURE_ARGS+=	--with-snmp=shared,${LOCALBASE} --enable-ucd-snmp-hack
LIB_DEPENDS-snmp=	netsnmp.>=6.2::net/net-snmp
WANTLIB-snmp=		${WANTLIB} crypto
.endif

# sybase-ct
PSEUDO_FLAVORS+=	no_sybase_ct
.if ${FLAVOR:L:Mno_sybase_ct}
CONFIGURE_ARGS+=	--without-sybase-ct
.else
MULTI_PACKAGES+=	-sybase_ct
COMMENT-sybase_ct=	sybase database access extensions for php4
CONFIGURE_ARGS+=        --with-sybase-ct=shared,${LOCALBASE}
LIB_DEPENDS-sybase_ct=	ct::databases/freetds
.endif

# xml-rpc
PSEUDO_FLAVORS+=	no_xmlrpc
.if ${FLAVOR:L:Mno_xmlrpc}
CONFIGURE_ARGS+=	--without-xmlrpc
.else
MULTI_PACKAGES+=	-xmlrpc
COMMENT-xmlrpc=		XML RPC functions for php4
CONFIGURE_ARGS+=	--with-xmlrpc=shared
WANTLIB-xmlrpc=		${WANTLIB} expat iconv
LIB_DEPENDS-xmlrpc=
FULLPKGNAME-xmlrpc=	php4-xmlrpc-${V}p3
.endif

# xslt
PSEUDO_FLAVORS+=	no_xslt
.if ${FLAVOR:L:Mno_xslt}
CONFIGURE_ARGS+=	--disable-xslt
.else
MULTI_PACKAGES+=	-xslt
COMMENT-xslt=		xslt transformation extensions for php4
CONFIGURE_ARGS+=	--enable-xslt=shared --with-xslt-sablot=shared,${LOCALBASE} 
LIB_DEPENDS-xslt=	sablot.>=96::textproc/sablotron
WANTLIB-xslt=		${WANTLIB} expat iconv
FULLPKGNAME-xslt=	php4-xslt-${V}p2
.endif

.for i in ${MULTI_PACKAGES}
FULLPKGNAME${i}?=	php4${i}-${V}p1
RUN_DEPENDS${i}=	:php4-core-${V}:www/php4/core
MODULE_NAME${i}=	${i:S/-//g}
.endfor

MESSAGE=		${PKGDIR}/MESSAGE
SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE LOCALBASE V

LIB_DEPENDS-main=
MESSAGE-main=		${PKGDIR}/DESCR-main
WANTLIB-main=

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/${MODULES_SUBDIR}
.for m in ${MULTI_PACKAGES:N-main:S/-//g}
	${INSTALL_DATA} ${WRKBUILD}/modules/${m}.so \
		${PREFIX}/${MODULES_SUBDIR}/${m}.so
.endfor


.include <bsd.port.mk>
@


1.59
log
@bumping a PKGNAME does not mean you just add p0, you have to choose a
patch level HIGHER than the previous one

another example of peer review failing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2007/10/30 10:13:05 ajacoutot Exp $
@


1.58
log
@- make php4-imap use new c-client

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2007/10/21 09:43:22 espie Exp $
d156 1
a315 2

FULLPKGNAME-imap=	php4-imap-$Vp0
@


1.57
log
@fix build after expat move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2007/09/15 20:38:25 merdely Exp $
d154 1
a154 1
LIB_DEPENDS-imap=	c-client.>=3::mail/c-client
d315 2
@


1.56
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2007/05/15 17:01:01 naddy Exp $
d304 1
a304 2
CONFIGURE_ARGS+=	--enable-xslt=shared --with-xslt-sablot=shared,${LOCALBASE} \
			--with-expat-dir=${X11BASE}
@


1.55
log
@chase wantlib changes after curl update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/04/28 19:58:26 sturm Exp $
d4 1
a4 1
COMMENT-main=	"informational package about PHP4 extensions"
d35 1
a35 1
COMMENT-bz2=		"bzip2 compression extensions for php4"
d46 1
a46 1
COMMENT-curl=		"curl URL library extensions for php4"
d59 1
a59 1
COMMENT-dba=		"dba GDBM access extensions for php4"
d70 1
a70 1
COMMENT-dbase=		"dBase database access extensions for php4"
d81 1
a81 1
COMMENT-dbx=		"dbx database abstraction interface for php4"
d92 1
a92 1
COMMENT-domxml=		"manipulate XML via the DOM API in php4"
d104 1
a104 1
COMMENT-filepro=	"filepro database access extensions for php4"
d116 1
a116 1
COMMENT-gd=		"image manipulation extensions for php4"
d140 1
a140 1
COMMENT-gmp=		"gmp math library support for php4"
d151 1
a151 1
COMMENT-imap=		"imap, pop3 and nntp extensions for php4"
d164 1
a164 1
COMMENT-ldap=		"ldap protocol extensions for php4"
d175 1
a175 1
COMMENT-mcrypt=		"mcrypt encryption/decryption extensions for php4"
d186 1
a186 1
COMMENT-mhash=		"mhash extensions for php4"
d197 1
a197 1
COMMENT-mysql=		"mysql database access extensions for php4"
d208 1
a208 1
COMMENT-ncurses=	"ncurses extensions for php4"
d220 1
a220 1
COMMENT-odbc=		"odbc database access extensions for php4"
d231 1
a231 1
COMMENT-pdf=		"pdf viewing and creation extensions for php4"
d245 1
a245 1
COMMENT-pgsql=		"pgsql database access extensions for php4"
d256 1
a256 1
COMMENT-shmop=		"shared memory extensions for php4"
d267 1
a267 1
COMMENT-snmp=		"snmp protocol extensions for php4"
d279 1
a279 1
COMMENT-sybase_ct=	"sybase database access extensions for php4"
d290 1
a290 1
COMMENT-xmlrpc=		"XML RPC functions for php4"
d303 1
a303 1
COMMENT-xslt=		"xslt transformation extensions for php4"
@


1.54
log
@use xenocara's expat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/01/01 23:10:24 naddy Exp $
d49 2
a50 1
WANTLIB-curl=		${WANTLIB} crypto ssl z
d293 2
a294 1
FULLPKGNAME-xmlrpc=	php4-xmlrpc-${V}p2
@


1.53
log
@on further reflection, bump pkgnames
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/01/01 23:02:57 naddy Exp $
d291 2
a292 2
LIB_DEPENDS-xmlrpc=	expat.>=2::textproc/expat
WANTLIB-xmlrpc=		${WANTLIB} iconv
d303 4
a306 3
			--with-expat-dir=${LOCALBASE}
LIB_DEPENDS-xslt=	sablot.>=96::textproc/sablotron expat.>=2::textproc/expat
WANTLIB-xslt=		${WANTLIB} iconv
@


1.52
log
@fix MESSAGEs using new substitution feature
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2006/11/24 08:39:03 espie Exp $
a46 1
FULLPKGNAME-curl=	php4-curl-${V}p0
d126 1
a126 1
FULLPKGNAME-gd=		php4-gd-${V}p4
d129 1
a129 1
FULLPKGNAME-gd=		php4-gd-${V}p4-no_x11
d309 1
a309 1
FULLPKGNAME${i}?=	php4${i}-${V}p0
@


1.51
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2006/09/18 09:04:03 espie Exp $
d312 1
a314 1
MODULE_NAME=		${SUBPACKAGE:S/-//g}
@


1.50
log
@new style libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2006/08/04 00:10:42 espie Exp $
d3 2
a4 2
FULLPKGNAME=	php4-extensions-${V}p0
COMMENT=	"informational package about PHP4 extensions"
d6 1
a6 2
MULTI_PACKAGES=
SUBPACKAGE?=
d9 1
a9 1
PREFIX?=	${CHROOT_DIR}
a15 2
RUN_DEPENDS=	:php4-core-${V}:www/php4/core
.if !defined(PACKAGING)
a16 1
.endif
d37 1
a37 1
BZ2_DEPENDS=		bz2.>=10::archivers/bzip2
d49 2
a50 2
CURL_DEPENDS=		curl.>=2::net/curl
CURL_WANTLIB=		crypto ssl z
d61 1
a61 1
DBA_DEPENDS=		gdbm.>=2::databases/gdbm
d72 1
d83 1
d94 2
a95 2
DOMXML_DEPENDS=		xml2.>=6::textproc/libxml
DOMXML_WANTLIB=		z iconv
d106 1
d117 1
a117 1
GD_DEPENDS=		ttf.>=1::print/freetype ${GRAPHIC_DEPENDS} \
d119 1
a119 1
GD_WANTLIB=		z
d126 1
a126 3
.  if !defined(PACKAGING) || ${SUBPACKAGE} == "-gd"
WANTLIB+=		X11 Xpm
.  endif
d142 1
a142 1
GMP_DEPENDS=		gmp.>=4::devel/gmp
d154 2
a155 2
IMAP_DEPENDS=		c-client.>=3::mail/c-client
IMAP_WANTLIB=		des gssapi crypto krb5 ssl
d166 1
a166 1
LDAP_DEPENDS=		ldap.>=2,lber::databases/openldap
d177 1
a177 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl.>=1::devel/libtool,-ltdl
d188 1
a188 1
MHASH_DEPENDS=		mhash.>=2::security/mhash
d199 1
a199 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.>=10::databases/mysql
d210 2
a211 1
NCURSES_WANTLIB+=	ncurses panel
d222 1
a222 1
ODBC_DEPENDS=		iodbc.>=2::databases/iodbc
d234 1
a234 1
PDF_DEPENDS=		pdf.>=2::print/pdflib ${GRAPHIC_DEPENDS} \
d236 1
a236 1
PDF_WANTLIB=		z
d247 1
a247 1
PGSQL_DEPENDS=		pq.>=2:postgresql-client-*:databases/postgresql
d258 1
d269 2
a270 2
SNMP_DEPENDS=		netsnmp.>=6.2::net/net-snmp
SNMP_WANTLIB=		crypto
d281 1
a281 1
SYBASE_CT_DEPENDS=	ct::databases/freetds
d292 2
a293 2
XMLRPC_DEPENDS=		expat.>=2::textproc/expat
XMLRPC_WANTLIB=		iconv
d305 2
a306 2
XSLT_DEPENDS=		sablot.>=96::textproc/sablotron expat.>=2::textproc/expat
XSLT_WANTLIB=		iconv
d310 2
a311 3
.if !defined(FULLPKGNAME${i})
FULLPKGNAME${i}=	php4${i}-${V}p0
.endif
a313 1
.if defined(PACKAGING) && !empty(SUBPACKAGE)
a314 2
LIB_DEPENDS=		${${MODULE_NAME:U}_DEPENDS}
WANTLIB+=		${${MODULE_NAME:U}_WANTLIB}
d316 5
a320 12
SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE LOCALBASE
.elif defined(PACKAGING) && empty(SUBPACKAGE)
LIB_DEPENDS=
MESSAGE=		${PKGDIR}/DESCR
SUBST_VARS=		V
WANTLIB=
.else
.for i in ${MULTI_PACKAGES}
LIB_DEPENDS+=		${${i:U:S/-//g}_DEPENDS}
WANTLIB+=		${${i:U:S/-//g}_WANTLIB}
.endfor
.endif
d324 1
a324 1
.for m in ${MULTI_PACKAGES:S/-//g}
@


1.49
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2005/11/07 21:33:58 bernd Exp $
d180 1
a180 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl.1::devel/libtool,-ltdl
d306 1
a306 1
XSLT_DEPENDS=		sablot.>=96::textproc/sablotron expat.2::textproc/expat
@


1.48
log
@Fix a nasty bug in the new php-4.4.1 release. Some php applications
are badly broken without this patch. (e.g. squirrelmail and phpadsnew)

Fix from php cvs. (BugID #35067)

http://bugs.php.net/bug.php?id=35067
http://marc.theaimsgroup.com/?l=php-cvs&m=113095430113617&w=2

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2005/11/01 11:09:31 mbalmer Exp $
d26 2
a27 2
GRAPHIC_DEPENDS=	jpeg.62::graphics/jpeg \
			png.3::graphics/png
d41 1
a41 1
BZ2_DEPENDS=		bz2.10::archivers/bzip2
d53 1
a53 1
CURL_DEPENDS=		curl.2::net/curl
d65 1
a65 1
DBA_DEPENDS=		gdbm.2::databases/gdbm
d96 1
a96 1
DOMXML_DEPENDS=		xml2.6::textproc/libxml
d118 2
a119 2
GD_DEPENDS=		ttf.1::print/freetype ${GRAPHIC_DEPENDS} \
			t1.5::devel/t1lib
d145 1
a145 1
GMP_DEPENDS=		gmp.4::devel/gmp
d157 1
a157 1
IMAP_DEPENDS=		c-client.3::mail/c-client
d169 1
a169 1
LDAP_DEPENDS=		ldap.2,lber::databases/openldap
d191 1
a191 1
MHASH_DEPENDS=		mhash.2::security/mhash
d202 1
a202 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.10::databases/mysql
d224 1
a224 1
ODBC_DEPENDS=		iodbc.2::databases/iodbc
d236 2
a237 2
PDF_DEPENDS=		pdf.2::print/pdflib ${GRAPHIC_DEPENDS} \
			tiff.35::graphics/tiff
d249 1
a249 1
PGSQL_DEPENDS=		pq.2:postgresql-client-*:databases/postgresql
d270 1
a270 1
SNMP_DEPENDS=		netsnmp.6.2::net/net-snmp
d282 1
a282 1
SYBASE_CT_DEPENDS=	ct.0::databases/freetds
d293 1
a293 1
XMLRPC_DEPENDS=		expat.2::textproc/expat
d306 1
a306 1
XSLT_DEPENDS=		sablot.96::textproc/sablotron expat.2::textproc/expat
@


1.47
log
@Update to PHP4 version 4.4.1.

The complete changelog is available at http://www.php.net/ChangeLog-4.php#4.4.1

SECURITY: This version fixes a vulnerability described in detail
at http://www.hardened-php.net/advisory_202005.79.html and
http://www.hardened-php.net/index.76.html

ok robert@@, bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2005/10/27 20:03:25 sturm Exp $
d3 1
a3 1
FULLPKGNAME=	php4-extensions-${V}
d51 1
a51 1
FULLPKGNAME-curl=	php4-curl-${V}
d130 1
a130 1
FULLPKGNAME-gd=		php4-gd-${V}p3
d133 1
a133 1
FULLPKGNAME-gd=		php4-gd-${V}p3-no_x11
d312 1
a312 1
FULLPKGNAME${i}=	php4${i}-${V}
@


1.46
log
@bump PKGNAMEs to permit the same in -stable, needed for new packages
after recent libcurl update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2005/09/16 09:51:28 espie Exp $
d3 1
a3 1
FULLPKGNAME=	php4-extensions-${V}p0
d51 1
a51 1
FULLPKGNAME-curl=	php4-curl-${V}p0
d312 1
a312 1
FULLPKGNAME${i}=	php4${i}-${V}p0
@


1.45
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/07/12 15:49:27 robert Exp $
d51 1
@


1.44
log
@upgrade to 4.4.0;

This release also includes PEAR XML-RPC version 1.3.1 which
fixes a security vulnerability.
For more information, please visit:
http://www.vuxml.org/openbsd/b9d96cbe-f2d2-11d9-82d5-00065bd5b0b6.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2005/06/20 16:11:11 robert Exp $
d3 1
a3 1
FULLPKGNAME=	php4-extensions-${V}
d129 1
a129 1
FULLPKGNAME-gd=		php4-gd-${V}p2
d132 1
a132 1
FULLPKGNAME-gd=		php4-gd-${V}p2-no_x11
d311 1
a311 1
FULLPKGNAME${i}=	php4${i}-${V}
@


1.44.2.1
log
@bump PKGNAMEs to not fall behind 3.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/07/12 15:49:27 robert Exp $
a50 1
FULLPKGNAME-curl=	php4-curl-${V}p0
@


1.44.2.2
log
@MFC:
Update to PHP4 version 4.4.1.

The complete changelog is available at http://www.php.net/ChangeLog-4.php#4.4.1

SECURITY: This version fixes a vulnerability described in detail
at http://www.hardened-php.net/advisory_202005.79.html and
http://www.hardened-php.net/index.76.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44.2.1 2005/11/01 11:50:23 sturm Exp $
d51 1
a51 1
FULLPKGNAME-curl=	php4-curl-${V}
d130 1
a130 1
FULLPKGNAME-gd=		php4-gd-${V}
d133 1
a133 1
FULLPKGNAME-gd=		php4-gd-${V}-no_x11
@


1.44.2.3
log
@Fix a nasty bug in the new php-4.4.1 release. Some php applications
are badly broken without this patch. (e.g. squirrelmail and phpadsnew)

Fix from php cvs. (BugID #35067)

http://bugs.php.net/bug.php?id=35067
http://marc.theaimsgroup.com/?l=php-cvs&m=113095430113617&w=2

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44.2.2 2005/11/03 09:26:15 sturm Exp $
d3 1
a3 1
FULLPKGNAME=	php4-extensions-${V}p0
d51 1
a51 1
FULLPKGNAME-curl=	php4-curl-${V}p0
d130 1
a130 1
FULLPKGNAME-gd=		php4-gd-${V}p0
d133 1
a133 1
FULLPKGNAME-gd=		php4-gd-${V}p0-no_x11
d312 1
a312 1
FULLPKGNAME${i}=	php4${i}-${V}p0
@


1.43
log
@add des to IMAP_WANTLIB; from naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2005/04/04 21:11:42 robert Exp $
d311 1
a311 1
FULLPKGNAME${i}=	php4${i}-${V}p0
@


1.42
log
@update to 4.3.11;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2005/03/16 21:55:54 naddy Exp $
d157 1
a157 1
IMAP_WANTLIB=		gssapi crypto krb5 ssl
d311 1
a311 1
FULLPKGNAME${i}=	php4${i}-${V}
@


1.41
log
@- fix typo in @@conflict
- properly bump package names
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2005/02/10 12:38:28 naddy Exp $
d311 1
a311 1
FULLPKGNAME${i}=	php4${i}-${V}p1
@


1.41.2.1
log
@SECURITY: update to 4.3.11
fixes multiple vulnerabilities
http://www.vuxml.org/openbsd/c6f452e8-b00a-11d9-825c-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2005/03/16 21:55:54 naddy Exp $
d129 1
a129 1
FULLPKGNAME-gd=		php4-gd-${V}
d132 1
a132 1
FULLPKGNAME-gd=		php4-gd-${V}-no_x11
d311 1
a311 1
FULLPKGNAME${i}=	php4${i}-${V}
@


1.41.2.2
log
@bump PKGNAMEs for new packages after libcurl update

discussed with pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41.2.1 2005/05/23 20:21:31 robert Exp $
a50 1
FULLPKGNAME-curl=	php4-curl-${V}p0
@


1.41.2.3
log
@MFC:
Update to PHP4 version 4.4.1.

The complete changelog is available at http://www.php.net/ChangeLog-4.php#4.4.1

SECURITY: This version fixes a vulnerability described in detail
at http://www.hardened-php.net/advisory_202005.79.html and
http://www.hardened-php.net/index.76.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41.2.2 2005/10/27 20:06:08 sturm Exp $
d51 1
a51 1
FULLPKGNAME-curl=	php4-curl-${V}
@


1.41.2.4
log
@Fix a nasty bug in the new php-4.4.1 release. Some php applications
are badly broken without this patch. (e.g. squirrelmail and phpadsnew)

Fix from php cvs. (BugID #35067)

http://bugs.php.net/bug.php?id=35067
http://marc.theaimsgroup.com/?l=php-cvs&m=113095430113617&w=2

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41.2.3 2005/11/03 09:24:50 sturm Exp $
d3 1
a3 1
FULLPKGNAME=	php4-extensions-${V}p0
d51 1
a51 1
FULLPKGNAME-curl=	php4-curl-${V}p0
d130 1
a130 1
FULLPKGNAME-gd=		php4-gd-${V}p0
d133 1
a133 1
FULLPKGNAME-gd=		php4-gd-${V}p0-no_x11
d312 1
a312 1
FULLPKGNAME${i}=	php4${i}-${V}p0
@


1.40
log
@fatal typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2005/02/06 13:10:38 wilfried Exp $
d129 1
d132 1
a132 1
FULLPKGNAME-gd=		php4-gd-${V}-no_x11
@


1.39
log
@kill whitespace at eol, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/01/30 15:29:07 alek Exp $
d233 1
a233 1
			--with-tiff-dir=${LOCALBASE} \
@


1.38
log
@- Fix WANTLIB
- Fix dependencies
- Bump PKGNAME

help & ok wilfried@@, robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2004/12/21 12:15:01 espie Exp $
d13 1
a13 1
FLAVOR?= 
d31 1
a31 1
			--with-zlib-dir=/usr 
d84 1
a84 1
CONFIGURE_ARGS+=	--enable-dbx=shared 
d127 1
a127 1
WANTLIB+=		X11 Xpm 
d260 1
a260 1
# snmp 
@


1.37
log
@mark explicit conflicts, unconfuse find-all-conflicts.
fix dependency from ltdl in mcrypt (noticed by mbalmer@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2004/12/11 13:29:22 alek Exp $
d15 1
a15 1
WANTLIB=	crypto gssapi krb5 m ncurses panel ssl z
d18 1
d20 1
d27 1
a27 2
			png.3::graphics/png \
			tiff.35::graphics/tiff
a30 1
			--with-tiff-dir=${LOCALBASE} \
d53 1
d96 1
d119 1
d126 1
d128 1
d156 1
d211 1
d232 5
a236 2
CONFIGURE_ARGS+=	--with-pdflib=shared,${LOCALBASE} ${GRAPHIC_CONFIG}
PDF_DEPENDS=		pdf.2::print/pdflib ${GRAPHIC_DEPENDS} 
d269 1
d280 1
a280 1
SYBASE_CT_DEPENDS=	tds.0,ct.0::databases/freetds
d292 1
d305 1
d310 1
a310 1
FULLPKGNAME${i}=	php4${i}-${V}p0
d317 1
d324 1
d328 1
@


1.36
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2004/10/13 01:46:02 danh Exp $
d172 1
a172 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl.1::devel/libtool
d297 1
a297 1
FULLPKGNAME${i}=	php4${i}-${V}
@


1.35
log
@replace ucd-snmp with net-snmp; ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2004/08/03 12:54:40 espie Exp $
d15 2
d123 1
@


1.34
log
@MODULES=www/php4/pear
okay maintainer(s)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2004/07/27 11:15:24 robert Exp $
d255 1
a255 1
SNMP_DEPENDS=		snmp.42::net/ucd-snmp
@


1.33
log
@Update to use new postgresql-client dependency
from Alistair Kerr <openbsd@@rukh.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/07/15 00:49:47 robert Exp $
d16 1
a16 1
MODULES=	gettext
@


1.32
log
@Update to 4.3.8:
SECURITY: PHP memory_limit remote vulnerability
http://security.e-matters.de/advisories/112004.html

Add Type 1 support for the gd extension,
from Aleksander Piotrowski <Aleksander.Piotrowski@@nic.com.pl>;

move to @@dir
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/07/05 00:00:33 robert Exp $
d234 1
a234 1
PGSQL_DEPENDS=		pq.2::databases/postgresql
@


1.31
log
@Remove the pspell extension because it is broken. And people can use aspell
without this extension.

Pointed out and requested by jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/06/08 15:59:54 robert Exp $
d113 2
a114 1
GD_DEPENDS=		ttf.1::print/freetype ${GRAPHIC_DEPENDS}
d116 2
a117 1
			--with-ttf=shared,${LOCALBASE} --without-freetype-dir
@


1.30
log
@take over maintainance; remove some unnecessary line;
remove iconv from MODULES because gettext includes it

ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/02/29 00:25:41 avsm Exp $
a253 11
.endif

# pspell
PSEUDO_FLAVORS+=	no_pspell
.if ${FLAVOR:L:Mno_pspell}
CONFIGURE_ARGS+=	--without-pspell
.else
MULTI_PACKAGES+=	-pspell
COMMENT-pspell=		"spell checking extensions for php4"
CONFIGURE_ARGS+=	--with-pspell=shared,${LOCALBASE}
LIB_DEPENDS+=		aspell.15::textproc/aspell/core
@


1.29
log
@add support for xmlrpc extension
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/01/05 17:02:32 avsm Exp $
d16 1
a16 1
MODULES=	gettext iconv
@


1.29.2.1
log
@Update to 4.3.8:
SECURITY: PHP memory_limit remote vulnerability
http://security.e-matters.de/advisories/112004.html
It contains a lot of other fixes too, check the
changelog at http://www.php.net/ChangeLog-4.php#4.3.8 .

Tested by many; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/02/29 00:25:41 avsm Exp $
d254 11
@


1.29.2.2
log
@Ok second try commiting the php fix. I love cvs.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD$
@


1.28
log
@fix build after recent tiff changes; prodded by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/01/02 04:56:24 brad Exp $
d276 11
@


1.27
log
@better LIB_DEPENDS entries for MySQL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/11/21 04:54:20 jolan Exp $
d28 2
a29 1
			--with-tiff-dir=${LOCALBASE}
@


1.26
log
@Use new aspell path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/11/14 14:52:49 avsm Exp $
d188 1
a188 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.10:mysql-client-3.23.*:databases/mysql
@


1.25
log
@generate the php4-gd no_x11 subpackage correctly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/08/12 04:41:08 jolan Exp $
d263 1
a263 1
LIB_DEPENDS+=		aspell.15::textproc/aspell
@


1.24
log
@Use new aspell (which includes pspell) for the pspell subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2003/07/21 20:34:52 avsm Exp $
d120 1
d290 1
d292 1
@


1.24.2.1
log
@MFH rev 1.25:
generate the php4-gd-4.3.3-no_x11 subpackage correctly

brad@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/11/14 14:52:49 avsm Exp $
a119 1
FULLPKGNAME-gd=		php4-gd-${V}-no_x11
a288 1
.if !defined(FULLPKGNAME${i})
a289 1
.endif
@


1.24.2.2
log
@Update to 4.3.8:
SECURITY: PHP memory_limit remote vulnerability
http://security.e-matters.de/advisories/112004.html
It contains a lot of other fixes too, check the
changelog at http://www.php.net/ChangeLog-4.php#4.3.8 .

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29.2.2 2004/07/17 00:52:34 robert Exp $
d28 1
a28 2
			--with-tiff-dir=${LOCALBASE} \
			--with-zlib-dir=/usr 
d188 1
a188 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.10::databases/mysql
d255 11
a274 11
.endif

# xml-rpc
PSEUDO_FLAVORS+=	no_xmlrpc
.if ${FLAVOR:L:Mno_xmlrpc}
CONFIGURE_ARGS+=	--without-xmlrpc
.else
MULTI_PACKAGES+=	-xmlrpc
COMMENT-xmlrpc=		"XML RPC functions for php4"
CONFIGURE_ARGS+=	--with-xmlrpc=shared
XMLRPC_DEPENDS=		expat.2::textproc/expat
@


1.23
log
@add a pspell subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2003/05/10 14:42:49 avsm Exp $
d262 1
a262 2
LIB_DEPENDS+=		pspell-modules::textproc/pspell \
			aspell.11::textproc/aspell
@


1.22
log
@missing GRAPHICS_DEPENDS for gd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2003/05/07 14:02:32 avsm Exp $
d255 10
a264 10
#PSEUDO_FLAVORS+=	no_pspell
#.if ${FLAVOR:L:Mno_pspell}
#CONFIGURE_ARGS+=	--without-pspell
#.else
#MULTI_PACKAGES+=	-pspell
#COMMENT-pspell=		"spell checking extensions for php4"
#CONFIGURE_ARGS+=	--with-pspell=shared,${LOCALBASE}
#LIB_DEPENDS+=		pspell-modules::textproc/pspell \
#			aspell.11::textproc/aspell
#.endif
@


1.21
log
@lose the xml subpackage, its part of php4-core now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2003/05/02 19:49:36 avsm Exp $
d112 1
a112 1
GD_DEPENDS=		ttf.1::print/freetype
@


1.20
log
@extensions now get installed into /var/www/lib/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/04/03 14:04:25 avsm Exp $
a274 12
.endif

# wddx & xml
PSEUDO_FLAVORS+=	no_xml
.if ${FLAVOR:L:Mno_xml}
CONFIGURE_ARGS+=	--without-wddx --disable-xml
.else
MULTI_PACKAGES+=	-xml
COMMENT-xml=		"xml parsing extensions for php4"
CONFIGURE_ARGS+=	--with-wddx=shared --enable-xml=shared \
			--with-expat-dir=${LOCALBASE}
XML_DEPENDS=		expat.2::textproc/expat
@


1.19
log
@dbx support; tholo@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/04/03 10:27:22 avsm Exp $
a5 3
PATCH_LIST=	${PORTSDIR}/www/php4/core/patches/patch-* \
		patch-*

d9 3
d309 1
a309 1
SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE
@


1.18
log
@update to php4-extensions-4.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2002/09/14 15:22:06 avsm Exp $
d71 10
@


1.17
log
@make it compile using any LOCALBASE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/09/14 00:46:02 avsm Exp $
d6 3
d19 2
a20 1
			--with-iconv-dir=${LOCALBASE} --with-iconv=${LOCALBASE}
d26 3
a28 3
GRAPHIC_CONFIG=		--with-jpeg-dir=shared,${LOCALBASE} \
			--with-png-dir=shared,${LOCALBASE} \
			--with-tiff-dir=shared,${LOCALBASE}
d102 2
a103 3
GD_DEPENDS=		gd.18::graphics/gd ${GRAPHIC_DEPENDS} \
			ttf.1::print/freetype
CONFIGURE_ARGS+=	--with-gd=shared,${LOCALBASE} ${GRAPHIC_CONFIG} \
d106 2
a107 2
USE_X11=		yes
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE}
d109 1
a109 1
CONFIGURE_ARGS+=	--without-xpm-dir 
d132 1
a132 1
			--with-kerberos=/usr/lib --with-imap-ssl
d270 1
a270 1
CONFIGURE_ARGS+=	--without-wddx --without-xml
d274 2
a275 2
CONFIGURE_ARGS+=	--with-wddx=shared --with-xml=shared \
			--with-expat-dir=shared,${LOCALBASE}
d287 1
a287 1
			--with-expat-dir=shared,${LOCALBASE}
@


1.16
log
@LIB_DEPENDS -> SNMP_DEPENDS in the snmp section
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/09/12 14:39:28 avsm Exp $
d13 1
d15 2
a16 1
CONFIGURE_ARGS+=	--with-apxs=/usr/sbin/apxs 
d283 1
a283 1
CONFIGURE_ARGS+=	--enable-xslt=shared --with-xslt-sablot=shared=${LOCALBASE} \
@


1.15
log
@set fullpkgname not pkgname so that we dont build two php4-extensions
packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/09/11 23:16:48 avsm Exp $
d236 1
a236 1
LIB_DEPENDS+=		snmp.42::net/ucd-snmp
@


1.14
log
@- update to php4-4.2.3
- include the domxml extension as a subpackage
- include some extra modules with PEAR which also disappeared
- only link against freetype1, not freetype2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/08/17 01:33:57 avsm Exp $
d3 1
a3 1
PKGNAME=	php4-extensions-${V}
@


1.13
log
@update sablotron lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/08/12 04:30:21 avsm Exp $
d67 11
d96 4
a99 2
GD_DEPENDS=		gd.18::graphics/gd ${GRAPHIC_DEPENDS}
CONFIGURE_ARGS+=	--with-gd=shared,${LOCALBASE} ${GRAPHIC_CONFIG}
d102 1
a102 1
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE} --with-ttf=shared,${LOCALBASE} --without-freetype-dir
d104 1
a104 1
CONFIGURE_ARGS+=	--without-xpm-dir --without-freetype-dir --without-ttf
d239 12
d283 1
a283 1
XSLT_DEPENDS=		sablot.95::textproc/sablotron expat.2::textproc/expat
@


1.12
log
@- mcrypt now lib_depends on libtool since it uses libltdl
- patch for snmp to link with libdes
- stop libtool from helpfully mangling the ld.so hints file with
  crap from the ports build directory by removing the finish_command
- MESSAGE file reflects phpxs command
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/08/07 15:52:05 avsm Exp $
d258 1
a258 1
XSLT_DEPENDS=		sablot.90::textproc/sablotron expat.2::textproc/expat
@


1.11
log
@add a bunch of no_* pseudo_flavors to enable building a subset of extension
packages

eg: env FLAVOR="no_gd no_pdflib no_shmop" make package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/07/24 16:14:56 avsm Exp $
d137 1
a137 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt
@


1.10
log
@oops, too early
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/07/24 16:14:27 avsm Exp $
d9 1
a9 1
FLAVORS+=	no_x11
d25 4
d33 1
d36 4
d44 1
d47 4
d55 1
d58 4
d65 1
d68 4
d75 1
d78 5
d93 1
d96 4
d104 1
d107 4
d116 1
d119 4
d127 1
d130 4
d138 1
d141 4
d149 1
d152 4
d160 1
d163 4
d170 1
d173 4
d181 1
d184 4
d192 1
d195 4
d203 1
d206 4
d213 1
d216 4
d224 1
d227 4
d235 1
d238 4
d247 1
d250 4
d259 1
d282 1
a282 1
.for m in gd ${MULTI_PACKAGES:S/-//g}
@


1.9
log
@move the jpeg/tiff/png dependencies into the right subpackage
sections, so that they aren't introduced across the board
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/07/24 15:41:42 avsm Exp $
a156 1
PSEUDO_FLAVORS+=	no_${i:L:S/-//g}
@


1.8
log
@Restore the gd extension as a subpackage.  Now the main package
is just a placeholder which informs the user to use the various
module sub-packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/07/10 09:00:49 avsm Exp $
d14 7
a20 2
CONFIGURE_ARGS+=	--with-apxs=/usr/sbin/apxs \
			--with-jpeg-dir=shared,${LOCALBASE} \
a23 4
JPEG_DEPENDS=		jpeg.62::graphics/jpeg
PNG_DEPENDS=		png.3::graphics/png 
TIFF_DEPENDS=		tiff.35::graphics/tiff

d55 2
a56 3
GD_DEPENDS=		gd.18::graphics/gd ${JPEG_DEPENDS} \
			${PNG_DEPENDS} ${TIFF_DEPENDS}
CONFIGURE_ARGS+=	--with-gd=shared,${LOCALBASE}
d115 2
a116 3
CONFIGURE_ARGS+=	--with-pdflib=shared,${LOCALBASE}
PDF_DEPENDS=		pdf.2::print/pdflib ${JPEG_DEPENDS} \
			${PNG_DEPENDS} ${TIFF_DEPENDS}
d157 1
@


1.7
log
@fix pkgnames, thanks wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/07/10 08:13:27 jakob Exp $
d3 2
a4 1
PKGNAME=	php4-gd-${V}
a21 4
GD_DEPENDS=		gd.18::graphics/gd

LIB_DEPENDS+=		${GD_DEPENDS} ${JPEG_DEPENDS} ${PNG_DEPENDS} \
			${TIFF_DEPENDS}
d52 4
a55 1
COMMENT=		"image manipulation extensions for php4"
d160 1
a160 4
.if defined(PACKAGING)
.if (empty(SUBPACKAGE))
MODULE_NAME=		gd
.else
a161 1
.endif
d165 4
@


1.6
log
@define MULTI_PACKAGES separately for each extension. ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/07/09 19:35:10 avsm Exp $
a25 4
.for i in ${MULTI_PACKAGES}
FULLPKGNAME${i}=	php4${i}-${V}
.endfor

d155 4
@


1.5
log
@add in snmp module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/07/09 18:14:16 avsm Exp $
d5 1
a5 3
MULTI_PACKAGES=	-bz2 -curl -dba -dbase -filepro \
		-gmp -imap -ldap -mcrypt -mhash -mysql -ncurses \
		-odbc -pdf -pgsql -shmop -snmp -sybase_ct -xml -xslt
d31 1
d37 1
d43 1
d49 1
d54 1
d69 1
d75 1
d82 1
d88 1
d94 1
d100 1
d106 1
d111 1
d117 1
d124 1
d130 1
d135 1
d141 1
d147 1
d154 1
@


1.4
log
@now all the subpackages load successfully into macppc as well without
any library errors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/07/02 01:09:50 kevlo Exp $
d7 1
a7 1
		-odbc -pdf -pgsql -shmop -sybase_ct -xml -xslt
d120 1
a120 1
# snmp .. waiting for ssl ...
d122 2
a123 2
#-CONFIGURE_ARGS+=	--with-snmp=shared,${LOCALBASE} --enable-ucd-snmp-hack
#-LIB_DEPENDS+=		snmp.42::net/ucd-snmp
@


1.3
log
@add gd library dependency; ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/06/26 22:16:40 avsm Exp $
d57 1
a57 1
CONFIGURE_ARGS+=	--with-gd=shared,${LOCALBASE} --with-ttf=${LOCALBASE}
d60 1
a60 1
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE}
d62 1
a62 1
CONFIGURE_ARGS+=	--without-xpm-dir
@


1.2
log
@add ncurses extension
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/06/24 19:27:46 avsm Exp $
d23 1
d25 2
a26 1
LIB_DEPENDS+=		${JPEG_DEPENDS} ${PNG_DEPENDS} ${TIFF_DEPENDS}
a63 1
GD_DEPENDS=		gd.18::graphics/gd ${PNG_DEPENDS} ${JPEG_DEPENDS}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 2
a7 2
		-gmp -imap -ldap -mcrypt -mhash -mysql -odbc \
		-pdf -pgsql -shmop -sybase_ct -xml -xslt
d94 4
@


1.1.1.1
log
@Import php4-4.2.1 extensions

This module generates a bunch of php4 extensions as shared modules,
and seperates them out into multiple packages.

End result is that you can pkg_add individual modules now without
getting into the mess of flavors that we've had in the past. 

Work by wilfried@@ and me,  espie@@ ok
@
text
@@
