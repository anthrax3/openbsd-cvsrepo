head	1.32;
access;
symbols
	OPENBSD_5_6:1.31.0.4
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.31.0.2
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.29.0.2
	OPENBSD_5_4_BASE:1.29
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.14.0.6
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.4
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.2
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.13.0.2
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	alek_20061013:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.32
date	2014.11.06.17.15.53;	author sthen;	state dead;
branches;
next	1.31;
commitid	SSzyd1iMQP8UxHGj;

1.31
date	2013.08.15.02.48.02;	author william;	state Exp;
branches;
next	1.30;

1.30
date	2013.08.12.04.11.21;	author robert;	state Exp;
branches;
next	1.29;

1.29
date	2013.07.05.09.37.26;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.11.11.44.47;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2012.09.05.09.24.13;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2012.08.30.14.09.21;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2012.08.23.19.35.31;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2012.06.18.07.56.13;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.05.01.02.25.21;	author william;	state Exp;
branches;
next	1.21;

1.21
date	2012.04.19.21.30.38;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2012.01.27.04.02.26;	author william;	state Exp;
branches;
next	1.19;

1.19
date	2011.11.16.15.56.37;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2011.09.16.12.00.07;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2011.07.09.00.04.11;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2011.03.13.17.39.36;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.22.08.36.52;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2009.04.22.21.24.09;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2008.12.20.01.06.50;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2008.06.04.09.02.59;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2008.01.04.17.48.37;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2007.12.06.11.21.09;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.17.15.12.32;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.15.20.38.25;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2007.04.30.17.39.48;	author alek;	state Exp;
branches;
next	1.5;

1.5
date	2007.03.24.12.11.03;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2007.03.22.22.48.04;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.03.20.06.51;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.23.21.31.05;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.13.14.58.42;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.13.14.58.42;	author alek;	state Exp;
branches;
next	;


desc
@@


1.32
log
@remove pecl-APC, it doesn't support php 5.5
@
text
@# $OpenBSD: Makefile,v 1.31 2013/08/15 02:48:02 william Exp $

COMMENT=	Alternative PHP Cache

DISTNAME=	APC-3.1.13
PKGNAME=	pecl-${DISTNAME}

MAINTAINER=	William Yodlowsky <william@@openbsd.org>

# PHP
PERMIT_PACKAGE_CDROM=	Yes

MODULES=	lang/php/pecl
CONFIGURE_STYLE= gnu

CONFIGURE_ARGS=	--enable-apc

FLAVORS=	shm
FLAVOR?=

.if ${FLAVOR:Mshm}
CONFIGURE_ARGS+=	--disable-apc-mmap
.endif

WEBROOT=	${VARBASE}/www
SUBST_VARS=	WEBROOT

post-configure:
	@@perl -pi -e "s,-rpath \\$$\\(phplibdir\\),-rpath ${LOCALBASE}/lib,g" \
		${WRKSRC}/Makefile

pre-install:
	@@${INSTALL_DATA_DIR} ${WRKINST}/${WEBROOT}/pecl-APC
	@@${INSTALL_DATA} ${WRKSRC}/apc.php ${WRKSRC}/INSTALL \
		${WRKINST}/${WEBROOT}/pecl-APC

.include <bsd.port.mk>
@


1.31
log
@upgrade to pecl-APC-3.1.13, resolves a segfault experienced by dlg;
as a bonus, passes more regress tests and the 2 patches
(which were from upstream) are rolled in.

ok dlg sthen

Thanks to dlg for the fix.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/08/12 04:11:21 robert Exp $
@


1.30
log
@bump REVISION due to the php update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/07/05 09:37:26 jasper Exp $
d5 1
a5 1
DISTNAME=	APC-3.1.9
a6 1
REVISION=	4
@


1.29
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/11 11:44:47 espie Exp $
d7 1
a7 1
REVISION=	3
@


1.28
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/02/09 14:49:53 sthen Exp $
d26 1
a26 1
WEBROOT=	/var/www
@


1.27
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/09/05 09:24:13 ajacoutot Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.26
log
@Remove trailing blank line.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/08/30 14:09:21 sthen Exp $
d25 1
a25 1
.if ${FLAVOR:L:Mshm}
@


1.25
log
@bump a bunch of pecl-*, thanks to cvs's non-atomic commits/updates some of
these got built on amd64 without the WANTLIB they should have had, this is
causing issues with pkg_add updates reported by Johan Huldtgren
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/08/23 19:35:31 sthen Exp $
d7 1
a7 1
REVISION=	2
@


1.24
log
@sync wantlib for pecl-*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/06/18 07:56:13 ajacoutot Exp $
d7 1
a7 1
REVISION=	1
@


1.23
log
@Missed bumps after my recent php module changes.

spotted by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/05/01 02:25:21 william Exp $
d7 1
a7 1
REVISION=	0
@


1.22
log
@update to 3.1.9
tested by dhill, thanks
ok dhill sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/04/19 21:30:38 sthen Exp $
d7 1
@


1.21
log
@use pecl.port.mk, ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/01/27 04:02:26 william Exp $
d5 1
a5 1
DISTNAME=	APC-3.1.7
a6 1
REVISION=	4
@


1.20
log
@- update MAINTAINER address
- Add a -shm FLAVOR in addition to the default (mmap), and indicate
the difference in DESCR (requested by sthen@@)
- Make the MESSAGE's instructions true by @@sample'ing the module's ini
file so it exists (reported by "f5b" and Glen Searle, thanks)
- simplify by making better use of the lang/php MODULE

ok sthen
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.19 2011/11/16 15:56:37 robert Exp $

SHARED_ONLY=	Yes
a5 1
REVISION=	3
d7 1
a7 3
CATEGORIES=	www

HOMEPAGE=	http://pecl.php.net/package/APC
d17 2
a18 2
MASTER_SITES=	http://pecl.php.net/get/
EXTRACT_SUFX=	.tgz
a19 3
MODULES=	lang/php

CONFIGURE_STYLE=gnu
a27 11

DESTDIRNAME=	INSTALL_ROOT

# needs PHP CLI sapi to run
NO_REGRESS=	Yes

USE_LIBTOOL=	Yes
LIBTOOL_FLAGS=	--tag=disable-static

MODPHP_DO_SAMPLE=	apc
MODPHP_DO_PHPIZE=	Yes
@


1.19
log
@switch php to version 5.3 by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/09/16 12:00:07 espie Exp $
d8 1
a8 1
REVISION=	2
d14 1
a14 1
MAINTAINER=	William Yodlowsky <bsd@@openbsd.rutgers.edu>
a24 3
AUTOCONF_VERSION=	2.59
AUTOMAKE_VERSION=	1.4

a25 3
BUILD_DEPENDS=	www/pear \
		${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}
d28 4
a31 4
CONFIGURE_ARGS=	--enable-apc \
		--enable-apc-mmap \
		--with-apxs \
		--with-php-config=${MODPHP_PHP_CONFIG}
d33 3
a35 2
CONFIGURE_ENV=	AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		AUTOCONF_VERSION=${AUTOCONF_VERSION}
a36 2
WEBROOT=	/var/www
SUBST_VARS=	WEBROOT
a38 3
MESSAGE=	${PORTSDIR}/lang/php/files/MESSAGE-ext
UNMESSAGE=	${PORTSDIR}/lang/php/files/UNMESSAGE-ext

d45 5
a49 2
pre-configure:
	@@cd ${WRKSRC} && ${SETENV} ${CONFIGURE_ENV} ${MODPHP_PHPIZE}
d55 1
a55 1
post-install:
a58 3
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/php-${MODPHP_VERSION}
	@@echo "extension=apc.so" > \
		${PREFIX}/share/examples/php-${MODPHP_VERSION}/apc.ini
@


1.18
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/07/09 00:04:11 robert Exp $
d8 1
a8 1
REVISION=	1
@


1.17
log
@switch to lang/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/03/13 17:39:36 jasper Exp $
d8 1
a8 1
REVISION=	0
@


1.16
log
@- update to 3.1.7

from brad
ok william@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/22 08:36:52 espie Exp $
d8 1
d28 1
a31 1
RUN_DEPENDS=	www/php5/core
d37 1
a37 1
		--with-php-config=$(LOCALBASE)/bin/php-config
d42 2
a43 1
PREFIX=		/var/www
d46 3
d56 1
a56 1
	@@cd ${WRKSRC} && ${SETENV} ${CONFIGURE_ENV} ${LOCALBASE}/bin/phpize
d63 1
a63 1
	@@${INSTALL_DATA_DIR} ${PREFIX}/pecl-APC
d65 2
a66 2
		${PREFIX}/pecl-APC
	@@${INSTALL_DATA_DIR} ${PREFIX}/conf/php5.sample
d68 1
a68 1
		${PREFIX}/conf/php5.sample/apc.ini
@


1.15
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/04/22 21:24:09 jasper Exp $
d7 1
a7 1
DISTNAME=	APC-3.1.2
d15 1
a15 1
# PHP License
@


1.14
log
@- update pecl-APC to 3.1.2

"reads fine" William Yodlowsky (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/12/20 01:06:50 sthen Exp $
d27 1
a27 1
BUILD_DEPENDS=	:pear-*:www/pear \
d30 1
a30 1
RUN_DEPENDS=	:php5-core-*:www/php5/core
@


1.13
log
@security, avoid an XSS in the apc.php web management interface.
It can only be triggered by a _local_ user on the webserver.

from maintainer on ports@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/09/18 13:37:41 ajacoutot Exp $
d7 2
a8 2
DISTNAME=	APC-3.0.19
PKGNAME=	pecl-${DISTNAME}p0
@


1.12
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/06/04 09:02:59 sthen Exp $
d8 1
a8 1
PKGNAME=	pecl-${DISTNAME}
d44 1
@


1.11
log
@SECURITY fixes (CVE-2008-1488) and bugfixes (including crash on
cache-full) for pecl-APC to bring it up to 3.0.19.

Diff from Brad Walker via maintainer on ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/01/04 17:48:37 espie Exp $
a42 1
SUBST_VARS=	LOCALBASE
@


1.10
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/12/06 11:21:09 sthen Exp $
d7 1
a7 1
DISTNAME=	APC-3.0.15
@


1.9
log
@update APC to 3.0.15 and adapt to the new configuration style
we use for PHP extensions (symlink rather than phpxs)

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/17 15:12:32 sthen Exp $
d42 1
a42 1
FAKE_FLAGS=	INSTALL_ROOT=${WRKINST}
@


1.8
log
@de-spam pkg_add by adding @@group
de-spam pkg_delete by @@comment'ing /var/www/lib/php/modules
(this dir should probably move from php5/extensions,-main to php5/core).

ok maintainer (bsd at openbsd dot rutgers.edu), naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/15 20:38:25 merdely Exp $
d7 2
a8 2
DISTNAME=	APC-3.0.14
PKGNAME=	pecl-${DISTNAME}p0
d61 3
@


1.7
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/04/30 17:39:48 alek Exp $
d8 1
a8 1
PKGNAME=	pecl-${DISTNAME:S/p2/p3/}
@


1.6
log
@Update to 3.0.14; from brad@@; maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/03/24 12:11:03 robert Exp $
d5 1
a5 1
COMMENT=	"Alternative PHP Cache"
@


1.5
log
@bump the PKGNAME in a correct way; noticed by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/03/22 22:48:04 robert Exp $
d7 1
a7 1
DISTNAME=	APC-3.0.12p2
@


1.4
log
@- adapt to the new pear port
- add @@group annotations
- bump PKGNAMEs
- fix PLISTs by removing unneeded files and directories
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/01/03 20:06:51 sturm Exp $
d7 2
a8 2
DISTNAME=	APC-3.0.12p3
PKGNAME=	pecl-${DISTNAME}
@


1.3
log
@fix BUILD_DEPENDS by using MODGNU_AUTOCONF_DEPENDS and
MODGNU_AUTOMAKE_DEPENDS instead of handcrafting those entries
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/12/23 21:31:05 sturm Exp $
d7 1
a7 1
DISTNAME=	APC-3.0.12p2
d27 1
a27 1
BUILD_DEPENDS=	:php5-pear-*:www/php5/core,-pear \
@


1.2
log
@depend on proper version of autoconf/automake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/10/13 14:58:42 alek Exp $
d24 2
a25 2
AUTOCONF_VER=	2.59
AUTOMAKE_VER=	1.4
d28 2
a29 3
		:autoconf-${AUTOCONF_VER}:devel/autoconf/${AUTOCONF_VER} \
		:automake-${AUTOMAKE_VER}.*:devel/automake/${AUTOMAKE_VER} \
		::devel/libtool
d38 2
a39 2
CONFIGURE_ENV=	AUTOMAKE_VERSION=${AUTOMAKE_VER} \
		AUTOCONF_VERSION=${AUTOCONF_VER}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d28 2
a29 2
		::devel/autoconf/${AUTOCONF_VER} \
		::devel/automake/${AUTOMAKE_VER} \
@


1.1.1.1
log
@Import pecl-APC 3.0.12p2

APC is the Alternative PHP Cache. It was conceived of to provide a 
free, open, and robust framework for caching and optimizing PHP 
intermediate code.

Joint work with William Yodlowsky <bsd@@openbsd.rutgers.edu>
@
text
@@
