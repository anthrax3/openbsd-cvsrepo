head	1.6;
access;
symbols
	OPENBSD_2_7:1.4.0.2
	OPENBSD_2_7_BASE:1.4
	dugsong_1999-Oct-26:1.1.1.1
	dugsong:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2000.08.25.02.24.10;	author brad;	state dead;
branches;
next	1.5;

1.5
date	2000.07.10.00.14.10;	author d;	state Exp;
branches;
next	1.4;

1.4
date	2000.04.10.20.03.21;	author dugsong;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2000.03.08.03.10.58;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.01.30.22.12.24;	author d;	state Exp;
branches;
next	1.1;

1.1
date	99.10.26.14.20.07;	author dugsong;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.10.26.14.20.07;	author dugsong;	state Exp;
branches;
next	;

1.4.2.1
date	2000.09.15.05.22.27;	author marc;	state Exp;
branches;
next	;


desc
@@


1.6
log
@- fixup Makefile
- use better filenames for patches
@
text
@--- display.c.orig	Thu Jul  6 15:43:29 2000
+++ display.c	Thu Jul  6 15:43:53 2000
@@@@ -717,8 +717,10 @@@@
     }
     else {
         buf->pos = l->len -1;
+#ifdef JP_CHARSET
         if (CharType(p[buf->pos]) == PC_KANJI2)
             buf->pos--;
+#endif                          /* JP_CHARSET */
     }
     cpos = COLPOS(l, buf->pos);
     buf->visualpos = cpos - buf->currentColumn;
@


1.5
log
@upgrade to w3m-0.1.10. okay espie@@
@
text
@@


1.4
log
@upgrade to w3m-0.1.8, from d@@
@
text
@d1 13
a13 31
--- XMakefile.orig	Thu Apr  6 11:13:54 2000
+++ XMakefile	Sat Apr  8 09:03:41 2000
@@@@ -64,17 +64,17 @@@@
 	cd gc; make CC='$(CC) $(MYCFLAGS)'
 
 install: $(TARGETS)
-	-$(MKDIR) $(DESTDIR)$(BIN_DIR)
-	-$(MKDIR) $(DESTDIR)$(HELP_DIR)
-	-$(MKDIR) $(DESTDIR)$(LIB_DIR)
-	$(INSTALL) -m 755 $(TARGET) $(DESTDIR)$(BIN_DIR)/$(TARGET)
-	$(INSTALL) -m 644 w3mhelp-w3m_en.html $(DESTDIR)$(HELP_DIR)/w3mhelp-w3m_en.html
-	$(INSTALL) -m 644 w3mhelp-w3m_ja.html $(DESTDIR)$(HELP_DIR)/w3mhelp-w3m_ja.html
-	$(INSTALL) -m 644 w3mhelp-lynx_en.html $(DESTDIR)$(HELP_DIR)/w3mhelp-lynx_en.html
-	$(INSTALL) -m 644 w3mhelp-lynx_ja.html $(DESTDIR)$(HELP_DIR)/w3mhelp-lynx_ja.html
-	$(INSTALL) -m 644 $(HELP_FILE) $(DESTDIR)$(HELP_DIR)/w3mhelp.html
-	for d in $(BOOKMARKER) $(HELPER); do $(INSTALL) -m 755 $$d $(DESTDIR)$(LIB_DIR)/$$d; done
-	(cd scripts; for i in *.cgi; do $(INSTALL) -m 755 $$i $(DESTDIR)$(LIB_DIR)/$$i; done)
+	$(BSD_INSTALL_PROGRAM_DIR) $(DESTDIR)$(BIN_DIR)
+	$(BSD_INSTALL_DATA_DIR) $(DESTDIR)$(HELP_DIR)
+	$(BSD_INSTALL_PROGRAM_DIR) $(DESTDIR)$(LIB_DIR)
+	$(BSD_INSTALL_PROGRAM) $(TARGET) $(DESTDIR)$(BIN_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp-w3m_en.html $(DESTDIR)$(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp-w3m_ja.html $(DESTDIR)$(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp-lynx_en.html $(DESTDIR)$(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp-lynx_ja.html $(DESTDIR)$(HELP_DIR)
+	$(BSD_INSTALL_DATA) $(HELP_FILE) $(DESTDIR)$(HELP_DIR)
+	for d in $(BOOKMARKER) $(HELPER); do $(BSD_INSTALL_PROGRAM) $$d $(DESTDIR)$(LIB_DIR); done
+	(cd scripts; for i in *.cgi; do $(BSD_INSTALL_SCRIPT) $$i $(DESTDIR)$(LIB_DIR); done)
 
 uninstall:
 	-$(RM) $(BIN_DIR)/$(TARGET)
@


1.4.2.1
log
@bring www as of cut-over date into 2.7 branch
@
text
@d1 31
a31 13
--- display.c.orig	Thu Jul  6 15:43:29 2000
+++ display.c	Thu Jul  6 15:43:53 2000
@@@@ -717,8 +717,10 @@@@
     }
     else {
         buf->pos = l->len -1;
+#ifdef JP_CHARSET
         if (CharType(p[buf->pos]) == PC_KANJI2)
             buf->pos--;
+#endif                          /* JP_CHARSET */
     }
     cpos = COLPOS(l, buf->pos);
     buf->visualpos = cpos - buf->currentColumn;
@


1.3
log
@Fake
@
text
@d1 3
a3 3
--- XMakefile.orig	Fri Jan 28 20:14:18 2000
+++ XMakefile	Fri Jan 28 20:19:41 2000
@@@@ -50,17 +50,17 @@@@
d11 2
a12 2
-	$(INSTALL) -m 644 w3mhelp_en.html $(DESTDIR)$(HELP_DIR)/w3mhelp_en.html
-	$(INSTALL) -m 644 w3mhelp_ja.html $(DESTDIR)$(HELP_DIR)/w3mhelp_ja.html
d17 1
a17 1
-	(cd scripts; ln -s ../install.sh .; for i in *.cgi; do $(INSTALL) -m 755 $$i $(DESTDIR)$(LIB_DIR)/$$i; done)
d22 2
a23 2
+	$(BSD_INSTALL_DATA) w3mhelp_en.html $(DESTDIR)$(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp_ja.html $(DESTDIR)$(HELP_DIR)
d26 1
a26 1
+	ln $(DESTDIR)$(HELP_DIR)/$(HELP_FILE) $(DESTDIR)$(HELP_DIR)/w3mhelp.html
@


1.2
log
@version 0.1.6, ok'd by dugsong@@
@
text
@d18 11
a28 11
+	$(BSD_INSTALL_PROGRAM_DIR) $(BIN_DIR)
+	$(BSD_INSTALL_DATA_DIR) $(HELP_DIR)
+	$(BSD_INSTALL_PROGRAM_DIR) $(LIB_DIR)
+	$(BSD_INSTALL_PROGRAM) $(TARGET) $(BIN_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp_en.html $(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp_ja.html $(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp-lynx_en.html $(HELP_DIR)
+	$(BSD_INSTALL_DATA) w3mhelp-lynx_ja.html $(HELP_DIR)
+	ln $(HELP_DIR)/$(HELP_FILE) $(HELP_DIR)/w3mhelp.html
+	for d in $(BOOKMARKER) $(HELPER); do $(BSD_INSTALL_PROGRAM) $$d $(LIB_DIR); done
+	(cd scripts; for i in *.cgi; do $(BSD_INSTALL_SCRIPT) $$i $(LIB_DIR); done)
@


1.1
log
@Initial revision
@
text
@d1 3
a3 13
--- XMakefile.orig	Fri Oct  8 08:19:52 1999
+++ XMakefile	Fri Oct  8 22:06:01 1999
@@@@ -15,7 +15,8 @@@@
 INCLUDES=-I.
 
 DEFS=$(INCLUDES) #-DSTR_DEBUG # -DDEBUG
-CFLAGS=$(MYCFLAGS) $(DEFS) 
+CFLAGS+=$(MYCFLAGS) $(DEFS) 
+PREFIX?=/usr/local
 LIBS=$(GCLIB) -lm $(LOCAL_LIBRARIES) $(SYS_LIBRARIES)
 
 $(TARGET): $(ALLOBJS) $(GCTARGET)
@@@@ -27,15 +28,14 @@@@
d6 23
a28 18
 install: $(TARGET)
-	-mkdir $(DESTDIR)$(BIN_DIR)
-	-mkdir $(DESTDIR)$(HELP_DIR)
-	cp $(TARGET) $(DESTDIR)$(BIN_DIR)
-	cp w3mhelp_en.html $(DESTDIR)$(HELP_DIR)
-	cp w3mhelp_ja.html $(DESTDIR)$(HELP_DIR)
-	cp w3mhelp-lynx_en.html $(DESTDIR)$(HELP_DIR)
-	cp w3mhelp-lynx_ja.html $(DESTDIR)$(HELP_DIR)
-	cp $(HELP_FILE) $(DESTDIR)$(HELP_DIR)/w3mhelp.html
-	chmod go+r $(DESTDIR)$(HELP_DIR)/w3mhelp.html
+	-mkdir -p -m 755 $(BIN_DIR)
+	-mkdir -p -m 755 $(HELP_DIR)
+	-mkdir -p -m 755 $(DOC_DIR)
+	install -c -m 755 $(TARGET) $(BIN_DIR)
+	install -c -m 644 w3mhelp*.html $(HELP_DIR)
+	ln -s $(HELP_DIR)/$(HELP_FILE) $(HELP_DIR)/w3mhelp.html
+	install -c -m 644 doc/* $(DOC_DIR)
+	mv $(DOC_DIR)/w3m.1 $(PREFIX)/man/man1
@


1.1.1.1
log
@w3m port
@
text
@@
