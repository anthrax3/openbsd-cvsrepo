head	1.3;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.04.28.22.22.36;	author robert;	state Exp;
branches;
next	1.2;
commitid	hEiDsbcK5ON7rnmo;

1.2
date	2017.04.19.05.16.47;	author robert;	state Exp;
branches;
next	1.1;
commitid	jpW2BiKwA9H7U7d6;

1.1
date	2016.10.27.18.30.41;	author robert;	state Exp;
branches;
next	;
commitid	lED1Oks5HVh03mCa;


desc
@@


1.3
log
@update to 58.0
@
text
@$OpenBSD: patch-media_audio_BUILD_gn,v 1.6 2017/04/28 14:21:00 robert Exp $
--- media/audio/BUILD.gn.orig.port	Wed Apr 19 21:06:35 2017
+++ media/audio/BUILD.gn	Thu Apr 27 19:56:02 2017
@@@@ -212,9 +212,19 @@@@ source_set("audio") {
     deps += [ "//media/base/android:media_jni_headers" ]
   }
 
-  if (is_linux) {
+  if (is_linux && !is_openbsd) {
     sources += [ "linux/audio_manager_linux.cc" ]
   }
+  if (is_openbsd) {
+    libs += [ "sndio" ]
+    sources += [
+      "openbsd/audio_manager_openbsd.cc",
+      "sndio/sndio_input.cc",
+      "sndio/sndio_input.h",
+      "sndio/sndio_output.cc",
+      "sndio/sndio_output.h"
+    ]
+  }
 
   if (use_alsa) {
     libs += [ "asound" ]
@@@@ -261,7 +271,6 @@@@ source_set("audio") {
       configs += [ ":libpulse" ]
     } else {
       # TODO(ajwong): Technically, this dl should go in the action.
-      libs += [ "dl" ]
       deps += [ ":pulse_generate_stubs" ]
       sources += get_target_outputs(":pulse_generate_stubs")
     }
@


1.2
log
@update to 57.0
@
text
@d1 4
a4 4
$OpenBSD: patch-media_audio_BUILD_gn,v 1.5 2017/03/14 12:18:54 robert Exp $
--- media/audio/BUILD.gn.orig.port	Thu Mar  9 21:04:34 2017
+++ media/audio/BUILD.gn	Fri Mar 10 07:46:24 2017
@@@@ -207,9 +207,19 @@@@ source_set("audio") {
d25 1
a25 1
@@@@ -256,7 +266,6 @@@@ source_set("audio") {
@


1.1
log
@update to 54.0
@
text
@d1 4
a4 4
$OpenBSD: patch-media_audio_BUILD_gn,v 1.3 2016/10/26 06:22:08 robert Exp $
--- media/audio/BUILD.gn.orig.port	Fri Oct 21 00:02:05 2016
+++ media/audio/BUILD.gn	Fri Oct 21 16:41:46 2016
@@@@ -206,8 +206,18 @@@@ source_set("audio") {
d11 1
a11 1
+  }
d21 1
a21 1
   }
d24 9
@

