head	1.4;
access;
symbols
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2015.08.17.17.21.31;	author robert;	state dead;
branches;
next	1.3;
commitid	yHF19P80QYcchxsK;

1.3
date	2015.08.12.10.56.13;	author robert;	state Exp;
branches;
next	1.2;
commitid	WokHnx1ONPqT4wiW;

1.2
date	2015.05.26.17.37.40;	author robert;	state Exp;
branches;
next	1.1;
commitid	imvK5OAjfFzbGwip;

1.1
date	2015.05.06.14.27.24;	author robert;	state Exp;
branches;
next	;
commitid	0TVTUxEI0BYra21v;


desc
@@


1.4
log
@merge the patches from chromium that make iridium use the internal
libusb as well
@
text
@$OpenBSD: patch-device_usb_usb_service_impl_h,v 1.3 2015/08/12 10:56:13 robert Exp $
--- device/usb/usb_service_impl.h.orig.port	Wed Jul 22 09:47:11 2015
+++ device/usb/usb_service_impl.h	Wed Jul 22 09:47:32 2015
@@@@ -92,11 +92,13 @@@@ class UsbServiceImpl : public UsbService,
 
   void RemoveDevice(scoped_refptr<UsbDeviceImpl> device);
 
+#if !defined(OS_BSD)
   // Handle hotplug events from libusb.
   static int LIBUSB_CALL HotplugCallback(libusb_context* context,
                                          PlatformUsbDevice device,
                                          libusb_hotplug_event event,
                                          void* user_data);
+#endif
   // These functions release a reference to the provided platform device.
   void OnPlatformDeviceAdded(PlatformUsbDevice platform_device);
   void OnPlatformDeviceRemoved(PlatformUsbDevice platform_device);
@@@@ -112,7 +114,9 @@@@ class UsbServiceImpl : public UsbService,
   // connected instead of only when a full enumeration is requested.
   // TODO(reillyg): Support this on all platforms. crbug.com/411715
   bool hotplug_enabled_ = false;
+#if !defined(OS_BSD)
   libusb_hotplug_callback_handle hotplug_handle_;
+#endif
 
   // Enumeration callbacks are queued until an enumeration completes.
   bool enumeration_ready_ = false;
@


1.3
log
@update to iridium-44.0 and also incorporate a patch from dcoppa@@
for the startup script that still had references to chromium directories.
@
text
@d1 1
a1 1
$OpenBSD: patch-device_usb_usb_service_impl_h,v 1.3 2015/07/23 13:44:04 robert Exp $
@


1.2
log
@update to 43.1
@
text
@d1 6
a6 6
$OpenBSD: patch-device_usb_usb_service_impl_h,v 1.2 2015/05/24 15:51:53 robert Exp $
--- device/usb/usb_service_impl.h.orig.port	Thu May 14 00:35:46 2015
+++ device/usb/usb_service_impl.h	Wed May 20 08:34:56 2015
@@@@ -42,11 +42,13 @@@@ class UsbServiceImpl : public UsbService {
   // Adds a new UsbDevice to the devices_ map based on the given libusb device.
   scoped_refptr<UsbDeviceImpl> AddDevice(PlatformUsbDevice platform_device);
d16 3
a18 3
   void OnDeviceAdded(PlatformUsbDevice platform_device);
   void OnDeviceRemoved(PlatformUsbDevice platform_device);
@@@@ -67,7 +69,9 @@@@ class UsbServiceImpl : public UsbService {
d21 1
a21 1
   bool hotplug_enabled_;
d26 2
a27 2
   // The map from unique IDs to UsbDevices.
   typedef std::map<uint32, scoped_refptr<UsbDeviceImpl>> DeviceMap;
@


1.1
log
@update to iridium-browser-42.0
@
text
@d1 4
a4 4
$OpenBSD: patch-device_usb_usb_service_impl_h,v 1.1 2015/04/27 16:38:25 robert Exp $
--- device/usb/usb_service_impl.h.orig.port	Wed Apr 15 15:35:01 2015
+++ device/usb/usb_service_impl.h	Wed Apr 15 15:44:34 2015
@@@@ -38,11 +38,13 @@@@ class UsbServiceImpl : public UsbService {
d18 1
a18 1
@@@@ -63,7 +65,9 @@@@ class UsbServiceImpl : public UsbService {
@

