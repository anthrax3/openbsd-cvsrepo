head	1.2;
access;
symbols
	OPENBSD_2_4:1.1.0.4
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.2
	OPENBSD_2_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	99.03.10.02.21.27;	author marc;	state dead;
branches;
next	1.1;

1.1
date	98.03.16.15.15.35;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove apache port: it is part of the system now, and the port
referenced a beta version of the code that is no longer available
@
text
@--- src/modules/standard/mod_userdir.c	1998/02/14 03:26:58	1.28
+++ src/modules/standard/mod_userdir.c	1998/02/21 00:50:02	1.29
@@@@ -313,7 +313,10 @@@@
          */
         if (filename && (!*userdirs || stat(filename, &statbuf) != -1)) {
             r->filename = pstrcat(r->pool, filename, dname, NULL);
-	    if (*userdirs)
+	    /* when statbuf contains info on r->filename we can save a syscall
+	     * by copying it to r->finfo
+	     */
+	    if (*userdirs && dname[0] == 0)
 		r->finfo = statbuf;
             return OK;
         }
@


1.1
log
@1.3b5
@
text
@@


