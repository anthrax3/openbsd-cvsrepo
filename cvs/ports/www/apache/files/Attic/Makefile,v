head	1.5;
access;
symbols
	OPENBSD_2_4:1.4.0.4
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	apache_1_3:1.1.1.1
	apache:1.1.1;
locks; strict;
comment	@# @;


1.5
date	99.03.10.02.21.25;	author marc;	state dead;
branches;
next	1.4;

1.4
date	98.03.16.15.25.38;	author mickey;	state Exp;
branches;
next	1.3;

1.3
date	98.03.16.15.15.31;	author mickey;	state Exp;
branches;
next	1.2;

1.2
date	98.02.17.04.00.41;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.11.17.23.01.02;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.17.23.01.02;	author joey;	state Exp;
branches;
next	;


desc
@@


1.5
log
@remove apache port: it is part of the system now, and the port
referenced a beta version of the code that is no longer available
@
text
@#
# Makefile for building and installing apache
#
SERVERROOT=@@@@PREFIX@@@@

all::
	cd src; ${MAKE} PREFIX=@@@@PREFIX@@@@ $@@

configure::
	cd src; ./Configure

INSTALL_FILE=${INSTALL} -c -m 644 -o bin -g bin

CONF_DIR=	$(SERVERROOT)/etc/apache
DOC_DIR=	$(SERVERROOT)/www/docs
DOC_FILES=	apache_pb.gif index.html

MAN_DIR=	$(SERVERROOT)/www/docs/manual
MAN_FILES=	LICENSE TODO bind.html cgi_path.html content-negotiation.html \
		custom-error.html dns-caveats.html env.html footer.html \
		handler.html header.html index.html install.html \
		invoking.html keepalive.html location.html \
		man-template.html multilogs.html process-model.html \
		new_features_1_0.html new_features_1_1.html \
		new_features_1_2.html new_features_1_3.html sections.html \
		sourcereorg.html stopping.html suexec.html unixware.html \
		upgrading_to_1_3.html windows.html

IMG_DIR=	$(SERVERROOT)/www/docs/manual/images
IMG_FILES=	custom_errordocs.gif home.gif index.gif sub.gif 

MISC_DIR=	$(SERVERROOT)/www/docs/manual/misc
MISC_FILES=	API.html FAQ.html client_block_api.html compat_notes.html \
		custom_errordocs.html descriptors.html fin_wait_2.html \
		footer.html header.html howto.html index.html known_bugs.html \
		known_client_problems.html nopgp.html perf-bsd44.html \
		perf-dec.html perf-hp.html perf-tuning.html perf.html \
		security_tips.html vif-info.html windoz_keepalive.html

MOD_DIR=	$(SERVERROOT)/www/docs/manual/mod
MOD_FILES=	core.html directive-dict.html directives.html footer.html \
		header.html index.html mod_access.html mod_actions.html \
		mod_alias.html mod_asis.html mod_auth.html mod_auth_anon.html \
		mod_auth_db.html mod_auth_dbm.html mod_autoindex.html \
		mod_browser.html mod_cern_meta.html mod_cgi.html \
		mod_cookies.html mod_digest.html mod_dir.html mod_dld.html \
		mod_dll.html mod_env.html mod_example.html mod_expires.html \
		mod_headers.html mod_imap.html mod_include.html mod_info.html \
		mod_isapi.html mod_log_agent.html mod_log_common.html \
		mod_log_config.html mod_log_referer.html mod_mime.html \
		mod_mime_magic.html mod_negotiation.html mod_proxy.html \
		mod_rewrite.html mod_setenvif.html mod_so.html \
		mod_speling.html mod_status.html mod_unique_id.html \
		mod_userdir.html mod_usertrack.html

VHOST_DIR=	$(SERVERROOT)/www/docs/manual/vhosts
VHOST_FILES=	details.html details_1_2.html examples.html fd-limits.html \
		footer.html header.html host.html index.html \
		ip-based.html name-based.html vhosts-in-depth.html \
		virtual-host.html

install::
	-mkdir -p ${CONF_DIR}
	-mkdir -p ${MAN_DIR}
	-mkdir -p $(SERVERROOT)/www/data
	-mkdir -p $(SERVERROOT)/www/icons
	-mkdir -p $(SERVERROOT)/www/cgi-bin
	${INSTALL} -c -s -m 755 -o root src/httpd $(SERVERROOT)/sbin
	${INSTALL} -c -m 644 -o nobody icons/* $(SERVERROOT)/www/icons
	for file in httpd.conf srm.conf access.conf ; do \
	    if [ ! -f ${CONF_DIR}/$$file ] ; then \
		sed -e "s#@@@@ServerRoot@@@@#${SERVERROOT}#g" < conf/$$file-dist > conf/$$file ; \
		${INSTALL_FILE} conf/$$file ${CONF_DIR}/$$file ; \
	    fi ; \
	    ${INSTALL_FILE} conf/$$file-dist ${CONF_DIR} ; \
	done
	for file in mime.types magic ; do \
	    if [ ! -f ${CONF_DIR}/$$file ] ; then \
		${INSTALL_FILE} conf/$$file ${CONF_DIR} ; \
	    fi ; \
	    ${INSTALL_FILE} conf/$$file ${CONF_DIR}/$${file}-dist ; \
	done
	-mkdir -p ${DOC_DIR}
	for file in ${DOC_FILES}; do \
	    ${INSTALL_FILE} htdocs/$$file ${DOC_DIR} ; \
	done
	-mkdir -p ${MAN_DIR}
	for file in ${MAN_FILES}; do \
	    ${INSTALL_FILE} htdocs/manual/$$file ${MAN_DIR} ; \
	done
	-mkdir -p ${IMG_DIR}
	for file in ${IMG_FILES}; do \
	    ${INSTALL_FILE} htdocs/manual/images/$$file ${IMG_DIR} ; \
	done
	-mkdir -p ${MISC_DIR}
	for file in ${MISC_FILES}; do \
	    ${INSTALL_FILE} htdocs/manual/misc/$$file ${MISC_DIR} ; \
	done
	-mkdir -p ${MOD_DIR}
	for file in ${MOD_FILES}; do \
	    ${INSTALL_FILE} htdocs/manual/mod/$$file ${MOD_DIR} ; \
	done
	-mkdir -p ${VHOST_DIR}
	for file in ${VHOST_FILES}; do \
	    ${INSTALL_FILE} htdocs/manual/vhosts/$$file ${VHOST_DIR} ; \
	done
@


1.4
log
@oops
@
text
@@


1.3
log
@1.3b5
@
text
@d30 1
a30 1
IMG_FILES=	home.gif index.gif sub.gif 
d34 2
a35 2
		descriptors.html fin_wait_2.html footer.html \
		header.html howto.html index.html known_bugs.html \
d38 1
a38 1
		security_tips.html vif-info.html windoz_keepalive.html 
d41 7
a47 8
MOD_FILES=	core.html directive-dict.html directives.html \
		footer.html header.html index.html mod_access.html \
		mod_actions.html mod_alias.html mod_asis.html mod_auth.html \
		mod_auth_anon.html mod_auth_db.html mod_auth_dbm.html \
		mod_autoindex.html mod_browser.html \
		mod_cern_meta.html mod_cgi.html mod_cookies.html \
		mod_digest.html mod_dir.html mod_dld.html mod_dll.html \
		mod_env.html mod_example.html mod_expires.html \
d52 3
a54 3
		mod_rewrite.html mod_setenvif.html mod_speling.html \
		mod_status.html mod_unique_id.html mod_userdir.html \
		mod_usertrack.html
@


1.2
log
@apache 1.3b3 plus no2slash-loop-fix patch
@
text
@d22 1
a22 1
		install_1_1.html invoking.html keepalive.html location.html \
d45 1
a45 1
		mod_auth_msql.html mod_autoindex.html mod_browser.html \
@


1.1
log
@Initial revision
@
text
@d4 2
d14 48
a61 1
CONF_DIR=   @@@@PREFIX@@@@/etc/apache
d65 6
a70 5
	-mkdir -p @@@@PREFIX@@@@/www/data
	-mkdir -p @@@@PREFIX@@@@/www/icons
	-mkdir -p @@@@PREFIX@@@@/www/cgi-bin
	${INSTALL} -c -s -m 755 -o root src/httpd @@@@PREFIX@@@@/sbin
	${INSTALL} -c -m 644 -o nobody icons/* @@@@PREFIX@@@@/www/icons
d73 2
a74 1
		${INSTALL_FILE} conf/$$file-dist ${CONF_DIR}/$$file ; \
d83 24
@


1.1.1.1
log
@
@
text
@@

