head	1.64;
access;
symbols
	OPENBSD_6_2:1.64.0.2
	OPENBSD_6_2_BASE:1.64
	OPENBSD_6_1:1.50.0.2
	OPENBSD_6_1_BASE:1.50
	OPENBSD_6_0:1.38.0.2
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.24.0.2
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.10.0.2
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	landry_20131120:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.64
date	2017.09.28.16.41.13;	author landry;	state Exp;
branches;
next	1.63;
commitid	40snWd4FRpIGYHc8;

1.63
date	2017.08.24.09.45.23;	author sthen;	state Exp;
branches;
next	1.62;
commitid	PnxiRKB45Z5BPng8;

1.62
date	2017.08.08.10.18.21;	author landry;	state Exp;
branches;
next	1.61;
commitid	cLBeKdzElOAmXAxp;

1.61
date	2017.07.26.22.45.31;	author sthen;	state Exp;
branches;
next	1.60;
commitid	tD4MFrpYYDDL2UFT;

1.60
date	2017.07.16.19.19.03;	author espie;	state Exp;
branches;
next	1.59;
commitid	tt0GhWK5c4uf9ILG;

1.59
date	2017.06.30.05.26.23;	author landry;	state Exp;
branches;
next	1.58;
commitid	TNbDxJKGN4iBVncE;

1.58
date	2017.06.14.05.26.19;	author landry;	state Exp;
branches;
next	1.57;
commitid	HSVFlSHNdz8bJaiC;

1.57
date	2017.05.31.08.08.17;	author espie;	state Exp;
branches;
next	1.56;
commitid	ij92FtFXiSiT1ani;

1.56
date	2017.05.22.10.26.14;	author espie;	state Exp;
branches;
next	1.55;
commitid	C7BG0PR2X2cyrh8i;

1.55
date	2017.05.19.21.55.40;	author landry;	state Exp;
branches;
next	1.54;
commitid	q6GQibfiHcqjR62V;

1.54
date	2017.05.06.07.17.00;	author landry;	state Exp;
branches;
next	1.53;
commitid	gu2TUaaaf8nFNFnh;

1.53
date	2017.04.20.06.17.02;	author landry;	state Exp;
branches;
next	1.52;
commitid	yoSGrTGwtDZSWuoP;

1.52
date	2017.04.20.06.12.58;	author landry;	state Exp;
branches;
next	1.51;
commitid	WUt99C6A8mADidu3;

1.51
date	2017.04.12.18.12.33;	author landry;	state Exp;
branches;
next	1.50;
commitid	obesxEciJRtUmDBz;

1.50
date	2017.03.28.20.06.41;	author landry;	state Exp;
branches
	1.50.2.1;
next	1.49;
commitid	NcPGyBRLjwRx76o8;

1.49
date	2017.03.20.19.37.06;	author landry;	state Exp;
branches;
next	1.48;
commitid	NpU77YDkfMi3m5i9;

1.48
date	2017.03.07.15.36.45;	author landry;	state Exp;
branches;
next	1.47;
commitid	aJih20t9NVbMIVBm;

1.47
date	2017.02.18.16.22.54;	author landry;	state Exp;
branches;
next	1.46;
commitid	zwUjsBRx9XMscqD4;

1.46
date	2017.01.24.21.35.09;	author landry;	state Exp;
branches;
next	1.45;
commitid	jWPA9odZ2urvqkA3;

1.45
date	2017.01.06.22.14.07;	author landry;	state Exp;
branches;
next	1.44;
commitid	LnVcDutHO0Uavf7e;

1.44
date	2016.12.14.13.44.19;	author landry;	state Exp;
branches;
next	1.43;
commitid	XTfFIvqT2apzPEna;

1.43
date	2016.11.30.21.49.10;	author landry;	state Exp;
branches;
next	1.42;
commitid	NPLiw5gioMUhM3aD;

1.42
date	2016.11.15.21.53.47;	author landry;	state Exp;
branches;
next	1.41;
commitid	FvnZdSeYk2EjFlxv;

1.41
date	2016.09.24.14.41.47;	author landry;	state Exp;
branches;
next	1.40;
commitid	qBFGAzhf6cgajRPp;

1.40
date	2016.09.23.09.16.58;	author sthen;	state Exp;
branches;
next	1.39;
commitid	XLnI6AbHAmyVU5mO;

1.39
date	2016.08.02.17.43.30;	author landry;	state Exp;
branches;
next	1.38;
commitid	soVZx4G0HixtaR4h;

1.38
date	2016.06.08.19.23.29;	author landry;	state Exp;
branches;
next	1.37;
commitid	L2oDgfZsZGB3mNHf;

1.37
date	2016.05.05.06.54.28;	author landry;	state Exp;
branches;
next	1.36;
commitid	CK0XRBIE3gOSwPO3;

1.36
date	2016.04.27.14.01.02;	author landry;	state Exp;
branches;
next	1.35;
commitid	LtlayUWmUYaPN5KT;

1.35
date	2016.03.19.13.35.58;	author landry;	state Exp;
branches;
next	1.34;
commitid	5uHNfcmd3NETDZgK;

1.34
date	2016.03.14.20.37.13;	author landry;	state Exp;
branches;
next	1.33;
commitid	ABaNQYD0Gwvtd3Y7;

1.33
date	2016.03.05.16.04.06;	author pascal;	state Exp;
branches;
next	1.32;
commitid	EJSWd5DpdfEFGBlM;

1.32
date	2016.02.13.07.40.42;	author landry;	state Exp;
branches
	1.32.2.1;
next	1.31;
commitid	D6yCupLOXgjoGVaP;

1.31
date	2016.01.27.18.07.27;	author landry;	state Exp;
branches;
next	1.30;
commitid	hBjScen5PsujvoeF;

1.30
date	2015.12.23.17.40.22;	author landry;	state Exp;
branches;
next	1.29;
commitid	tpHEfpiOQdzhKoBx;

1.29
date	2015.12.16.10.08.53;	author landry;	state Exp;
branches;
next	1.28;
commitid	D5Y4l8so6DZUB0pk;

1.28
date	2015.11.04.07.34.19;	author landry;	state Exp;
branches;
next	1.27;
commitid	18aRzUITff2NQGQY;

1.27
date	2015.09.24.20.22.06;	author landry;	state Exp;
branches;
next	1.26;
commitid	OiIpfuMDHssCDOzY;

1.26
date	2015.08.31.20.07.49;	author landry;	state Exp;
branches;
next	1.25;
commitid	cNWtsOldxOzrAZI1;

1.25
date	2015.08.11.21.16.51;	author landry;	state Exp;
branches;
next	1.24;
commitid	Bg1qeH6hOINoBexW;

1.24
date	2015.08.07.13.39.36;	author landry;	state Exp;
branches
	1.24.2.1;
next	1.23;
commitid	hC7pseykcdvUW1VE;

1.23
date	2015.07.25.06.51.50;	author landry;	state Exp;
branches;
next	1.22;
commitid	gkNQ76c5g8qCN7Sf;

1.22
date	2015.07.05.20.05.46;	author landry;	state Exp;
branches;
next	1.21;
commitid	MJMOqRcPF7kbgh0a;

1.21
date	2015.05.28.10.17.25;	author pascal;	state Exp;
branches;
next	1.20;
commitid	020U4lCPk8wUkCOz;

1.20
date	2015.05.21.06.25.30;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	y9E6kBIQXjBoRLiK;

1.19
date	2015.05.16.07.26.12;	author landry;	state Exp;
branches;
next	1.18;
commitid	3RkX44RQlwBQdvxO;

1.18
date	2015.04.02.18.20.08;	author landry;	state Exp;
branches;
next	1.17;
commitid	PcK7QRfI9ve2af7H;

1.17
date	2015.03.23.21.08.16;	author landry;	state Exp;
branches;
next	1.16;
commitid	yE4AL3kRg043Pr7Y;

1.16
date	2015.03.16.19.56.32;	author landry;	state Exp;
branches;
next	1.15;
commitid	cIcNV9Mlp2cxvt8H;

1.15
date	2015.01.14.17.35.43;	author landry;	state Exp;
branches
	1.15.2.1;
next	1.14;
commitid	s5l1rsDQFKZwigo8;

1.14
date	2014.12.04.17.52.47;	author landry;	state Exp;
branches;
next	1.13;
commitid	i8n36GQ2GN1xv49g;

1.13
date	2014.10.17.07.19.26;	author landry;	state Exp;
branches;
next	1.12;
commitid	UeVbWvidx6kpe8tJ;

1.12
date	2014.09.02.16.36.52;	author landry;	state Exp;
branches;
next	1.11;
commitid	BFdH5kbXNTfwf7OX;

1.11
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.10;
commitid	jyyOLTDxRdjpw44n;

1.10
date	2014.07.24.18.09.57;	author landry;	state Exp;
branches
	1.10.2.1;
next	1.9;
commitid	uUO4or9LxUjFwUja;

1.9
date	2014.06.14.12.52.04;	author landry;	state Exp;
branches;
next	1.8;
commitid	VSol0OIjltFPlQAH;

1.8
date	2014.06.12.18.55.21;	author jasper;	state Exp;
branches;
next	1.7;
commitid	7KuqKBZsb2FtMlj4;

1.7
date	2014.04.29.21.30.57;	author landry;	state Exp;
branches;
next	1.6;

1.6
date	2014.03.24.21.14.52;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2014.03.10.20.34.00;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2014.02.05.08.00.41;	author jasper;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2013.12.26.20.00.34;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2013.12.12.20.00.15;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2013.11.20.20.57.29;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.11.20.20.57.29;	author landry;	state Exp;
branches;
next	;

1.4.2.1
date	2014.04.02.07.35.40;	author jasper;	state Exp;
branches;
next	1.4.2.2;

1.4.2.2
date	2014.05.07.08.35.28;	author jasper;	state Exp;
branches;
next	1.4.2.3;

1.4.2.3
date	2014.06.12.19.02.26;	author jasper;	state Exp;
branches;
next	1.4.2.4;
commitid	YdLX5Gqq5F1ydN2Z;

1.4.2.4
date	2014.07.30.11.44.40;	author jasper;	state Exp;
branches;
next	1.4.2.5;
commitid	zl1sBFM8NUozagAe;

1.4.2.5
date	2014.09.10.06.44.26;	author jasper;	state Exp;
branches;
next	;
commitid	GsuHQlE7vyU4XAZ8;

1.10.2.1
date	2014.09.18.13.56.42;	author jasper;	state Exp;
branches;
next	1.10.2.2;
commitid	TekiuwPMTC7l6JUK;

1.10.2.2
date	2014.10.22.18.13.21;	author jasper;	state Exp;
branches;
next	1.10.2.3;
commitid	oS4w92kxb7YI6m8p;

1.10.2.3
date	2014.12.05.12.32.12;	author jasper;	state Exp;
branches;
next	1.10.2.4;
commitid	XiDJr7neybFhus27;

1.10.2.4
date	2015.01.29.13.12.26;	author jasper;	state Exp;
branches;
next	1.10.2.5;
commitid	1EMLkYGR1okYtLb0;

1.10.2.5
date	2015.03.18.16.18.56;	author jasper;	state Exp;
branches;
next	1.10.2.6;
commitid	ZBqsdtKS9D0CS2US;

1.10.2.6
date	2015.03.25.10.12.54;	author jasper;	state Exp;
branches;
next	1.10.2.7;
commitid	4IfSXHWK1LLOvcQL;

1.10.2.7
date	2015.04.09.06.43.53;	author jasper;	state Exp;
branches;
next	;
commitid	XyFMOwMwlrmMkAr6;

1.15.2.1
date	2015.03.18.16.19.55;	author jasper;	state Exp;
branches;
next	1.15.2.2;
commitid	XnfA2R8q0K9Orljj;

1.15.2.2
date	2015.03.25.10.12.39;	author jasper;	state Exp;
branches;
next	1.15.2.3;
commitid	vdM6jRZA7HZPPTpr;

1.15.2.3
date	2015.04.09.06.48.17;	author jasper;	state Exp;
branches;
next	;
commitid	Bxlh16xNuncRkZvs;

1.24.2.1
date	2015.09.01.14.54.52;	author jasper;	state Exp;
branches;
next	1.24.2.2;
commitid	h4Y3AaQb4k7283eg;

1.24.2.2
date	2015.09.30.07.01.25;	author jasper;	state Exp;
branches;
next	1.24.2.3;
commitid	ya5IOqkvQngkhABH;

1.24.2.3
date	2015.12.24.14.09.59;	author jasper;	state Exp;
branches;
next	1.24.2.4;
commitid	GvC5jOib3N9Lg4Fi;

1.24.2.4
date	2016.01.29.08.42.38;	author jasper;	state Exp;
branches;
next	1.24.2.5;
commitid	1kGg9tNwmos3qJEt;

1.24.2.5
date	2016.02.15.10.50.54;	author jasper;	state Exp;
branches;
next	1.24.2.6;
commitid	fF6sqVPuEp69tbku;

1.24.2.6
date	2016.03.21.09.41.04;	author jasper;	state Exp;
branches;
next	;
commitid	McrSY1cbIHnHQdSF;

1.32.2.1
date	2016.03.30.12.12.43;	author jasper;	state Exp;
branches;
next	1.32.2.2;
commitid	xKHMvjFDq7T79lUa;

1.32.2.2
date	2016.05.23.12.28.59;	author jasper;	state Exp;
branches;
next	;
commitid	XNjcIqndgrpjBtpN;

1.50.2.1
date	2017.04.20.19.40.50;	author landry;	state Exp;
branches;
next	1.50.2.2;
commitid	NRT43GMlkZv7uyqT;

1.50.2.2
date	2017.05.06.07.23.29;	author landry;	state Exp;
branches;
next	1.50.2.3;
commitid	GuWcYL2OYMraBort;

1.50.2.3
date	2017.05.19.21.59.45;	author landry;	state Exp;
branches;
next	1.50.2.4;
commitid	Xd1M1tLchu995Rck;

1.50.2.4
date	2017.06.14.05.35.20;	author landry;	state Exp;
branches;
next	1.50.2.5;
commitid	CPurSseogVojz7F1;

1.50.2.5
date	2017.06.30.05.29.34;	author landry;	state Exp;
branches;
next	1.50.2.6;
commitid	xvl0mVvUK5gHXebW;

1.50.2.6
date	2017.08.08.10.27.49;	author landry;	state Exp;
branches;
next	1.50.2.7;
commitid	Pw39eWEz8nfMDqDW;

1.50.2.7
date	2017.09.28.16.46.42;	author landry;	state Exp;
branches;
next	;
commitid	ijHuxg9PdcaiGq2R;


desc
@@


1.64
log
@Update to firefox-esr 52.4.0.

- see https://www.mozilla.org/en-US/firefox/52.4.0/releasenotes/
- fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-22/

ok naddy@@
@
text
@# $OpenBSD: Makefile,v 1.63 2017/08/24 09:45:23 sthen Exp $

COMMENT =	Firefox web browser, Extended Support Release
ONLY_FOR_ARCHS =	amd64 i386

MOZILLA_VERSION =	52.4.0esr
MOZILLA_PROJECT =	firefox
MOZILLA_CODENAME =	browser

PKGNAME =	${MOZILLA_PROJECT}-esr-${MOZILLA_VERSION:S/esr//}
SO_VERSION =	4.0
MOZILLA_LIBS =	xul clearkey lgpllibs mozavcodec mozavutil mozgtk

CATEGORIES =	www

# mozilla public license
PERMIT_PACKAGE_CDROM=	Yes

# lots of logic in mozilla.port.mk
MODULES =	www/mozilla devel/gettext lang/python

MODPY_RUNDEP =	No

COMPILER = 	clang
MODCLANG_ARCHS =	amd64 i386

# firefox >= 44 doesnt build with base libevent
MOZILLA_USE_BUNDLED_LIBEVENT =	Yes
# firefox >= 46 defaults to gtk+3
MOZILLA_USE_GTK3 = Yes

WANTLIB += X11-xcb pixman-1 pthread-stubs xcb xcb-shm ${COMPILER_LIBCXX}

# Regression tests are too hard to adapt to run here
NO_TEST =	Yes

CONFIGURE_STYLE =	simple
CONFIGURE_ARGS +=	--prefix=${PREFIX}

# avoid conflict with mainline firefox
CONFIGURE_ARGS +=	--with-app-name=firefox-esr

# bug 857628
CONFIGURE_ARGS +=	--enable-pie

post-install:
	# install prefs
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/browser/defaults/preferences
	${SUBST_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/browser/defaults/preferences/all-openbsd.js
	# install distribution.ini file
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/distribution
	echo "[Global]\nid=OpenBSD\nversion=${OSREV}\nabout=Packaged by ${MAINTAINER}\n" > \
		${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/distribution/distribution.ini
	# install desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	${SUBST_DATA} ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
		${PREFIX}/share/applications/${MOZILLA_PROJECT}-esr.desktop
	# install icon for desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps/
	${INSTALL_DATA} ${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER:S/esr//}/browser/icons/mozicon128.png \
		${PREFIX}/share/pixmaps/firefox-esr.png

	# link default48.png to default.png to be used by default by non-icccm compliant wm
	ln ${PREFIX}/lib/firefox-esr-${MOZILLA_VER:S/esr//}/browser/chrome/icons/default/default{48,}.png

.include <bsd.port.mk>
@


1.63
log
@bump; textproc/icu4c now uses multi-packages for -wwwdata
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2017/08/08 10:18:21 landry Exp $
d6 1
a6 2
MOZILLA_VERSION =	52.3.0esr
REVISION =		0
@


1.62
log
@Update to firefox-esr 52.3.0.

See https://www.mozilla.org/en-US/firefox/52.3.0/releasenotes/ (not up yet)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2017/07/26 22:45:31 sthen Exp $
d7 1
@


1.61
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2017/07/16 19:19:03 espie Exp $
d4 1
d6 1
a6 2
MOZILLA_VERSION =	52.2.1esr
MOZILLA_BRANCH =	esr52
a8 2
BROKEN-sparc64 =	xpcshell SIGBUS during fake
EXTRACT_SUFX =		.tar.xz
a12 1
REVISION =	0
a39 5
# to be able to link when building with clang on i386
.if ${MACHINE_ARCH} == "i386"
CONFIGURE_ARGS +=	--disable-debug-symbols
.endif

a41 3

# relies on pulseaudio for sound and broken at runtime
#CONFIGURE_ARGS +=	--disable-webrtc
@


1.60
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2017/06/30 05:26:23 landry Exp $
d15 1
@


1.59
log
@Update to firefox-esr 52.2.1.

See https://www.mozilla.org/en-US/firefox/52.2.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2017/06/14 05:26:19 landry Exp $
d34 1
a34 1
WANTLIB += X11-xcb pixman-1 pthread-stubs xcb xcb-shm ${LIBECXX}
@


1.58
log
@Update to firefox-esr 52.2.0.

See https://www.mozilla.org/en-US/firefox/52.2.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-16/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2017/05/31 08:08:17 espie Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.2.0esr
@


1.57
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2017/05/22 10:26:14 espie Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.1.2esr
@


1.56
log
@let it build with base clang, be explicit about the c++ lib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2017/05/19 21:55:40 landry Exp $
d26 1
a26 1
WANT_CXX =		base clang
@


1.55
log
@Bugfix update to firefox-esr 52.1.2.

See https://www.mozilla.org/en-US/firefox/52.1.2/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2017/05/06 07:17:00 landry Exp $
d26 1
a26 1
MODULES +=		lang/clang
a27 1
MODCLANG_LANGS =	c c++
d34 1
a34 1
WANTLIB += X11-xcb pixman-1 pthread-stubs xcb xcb-shm
@


1.54
log
@Bugfix update to firefox-esr 52.1.1.

See https://www.mozilla.org/en-US/firefox/52.1.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2017/04/20 06:17:02 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.1.1esr
@


1.53
log
@I screwed up in previous commit (commited to both ports..), so remove
REVISION churn, and here's the intended commit msg for firefox-esr:

Update to firefox-esr 52.1.0.

See https://www.mozilla.org/en-US/firefox/52.1.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2017-12/
- Ship a small distribution.ini to show package source in about dialog
- Remove patch-browser_installer_allowed-dupes_mn, was fixed by #1315309
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2017/04/20 06:12:58 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.1.0esr
@


1.52
log
@Update to firefox 53.0.

See https://www.mozilla.org/en-US/firefox/53.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2017-10/.

- Now depends on rust and cargo to build.
- Remove patch-browser_installer_Makefile_in, sdk was removed in #1333826
- Ship a small distribution.ini to show package source in about dialog
- Add a blurb from Michael Reed about installing ffmpeg package to play
HTML5 audio/video.

Tested by several
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2017/04/12 18:12:33 landry Exp $
a10 1
REVISION =		0
@


1.51
log
@Fix WANTLIB and bump REVISION for all ports depending on hunspell.

While here enforce dependency on hunspell 1.6 in mozilla.port.mk, as
it's a requirement for 53.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2017/03/28 20:06:41 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.0.2esr
d63 4
@


1.50
log
@Bugfix update to firefox-esr 52.0.2.

See https://www.mozilla.org/en-US/firefox/52.0.2esr/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2017/03/20 19:37:06 landry Exp $
d11 1
@


1.50.2.1
log
@MFC: update to firefox-esr 52.1.0.

Over time i'll see if i maintain this or give up.
Stable packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2017/03/28 20:06:41 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.1.0esr
a61 4
	# install distribution.ini file
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/distribution
	echo "[Global]\nid=OpenBSD\nversion=${OSREV}\nabout=Packaged by ${MAINTAINER}\n" > \
		${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/distribution/distribution.ini
@


1.50.2.2
log
@MFC: update to firefox-esr 52.1.1.

Stable packages for i386 and amd64 available at https://packages.rhaalovely.net/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50.2.1 2017/04/20 19:40:50 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.1.1esr
@


1.50.2.3
log
@MFC: bugfix update to firefox-esr 52.1.2.

See https://www.mozilla.org/en-US/firefox/52.1.2/releasenotes/

Packages for -stable available at
https://packages.rhaalovely.net/pub/OpenBSD/6.1/packages/${ARCH}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50.2.2 2017/05/06 07:23:29 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.1.2esr
@


1.50.2.4
log
@MFC: update to firefox-esr 52.2.0.

See https://www.mozilla.org/en-US/firefox/52.2.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-16/

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50.2.3 2017/05/19 21:59:45 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.2.0esr
@


1.50.2.5
log
@MFC: update to firefox-esr 52.2.1.

See https://www.mozilla.org/en-US/firefox/52.2.1/releasenotes/

"Stable" packages for i386 and amd64 available at https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50.2.4 2017/06/14 05:35:20 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.2.1esr
@


1.50.2.6
log
@MFC: update to firefox-esr 52.3.0.

See https://www.mozilla.org/en-US/firefox/52.3.0/releasenotes/ (not yet up)

"Stable" packages for i386 and amd64 available at
https://packages.rhaalovely.net/
signed with https://packages.rhaalovely.net/landry-mozilla-pkg.pub
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50.2.5 2017/06/30 05:29:34 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.3.0esr
@


1.50.2.7
log
@MFC: update to firefox-esr 52.4.0.

- see https://www.mozilla.org/en-US/firefox/52.4.0/releasenotes/
- fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-22/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50.2.6 2017/08/08 10:27:49 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.4.0esr
@


1.49
log
@Update to firefox-esr 52.0.1.

Fixes MFSA 2017-08/CVE-2017-5428, see
https://www.mozilla.org/en-US/security/advisories/mfsa2017-08/

While here, add a patch from semarie@@ (tested by and ok danj@@) to tweak
a last-minute change in the jit engine memory allocator that happened to
fix a security issue in 52 branch (bug #1334933/CVE-2017-5400) - see
https://hg.mozilla.org/releases/mozilla-esr52/rev/6b35bbf96b67.

Sadly, this change resulted in a browser crashing at startup
on OpenBSD with the default limits, because the jit engine tried to
allocate 1Gb (previously 640Mb in #1334933, then 1Gb because of
#1337561, see
https://hg.mozilla.org/releases/mozilla-esr52/rev/65bb26d07408) and hit
the default datasize ulimit of 768Mb. The patch makes it allocate 128Mb
instead (as it's done on 32bit architectures), while a better (?) fix
might be devised in bug #1347139.

Generally speaking, if you see firefox crashing with ENOMEM errors,
raise the datasize limit for your login class, write your own wrapper
script to temporarly raise the limit when starting firefox, or stop
using the modern web. Websites are ginormous, deal with it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2017/03/07 15:36:45 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.0.1esr
@


1.48
log
@Update firefox-esr to 52.0.

See https://www.mozilla.org/en-US/firefox/52.0esr/releasenotes/

This release switches to Gtk3 by default, following upstream. It also
still supports NPAPI plugins (java etc..) for the 52esr lifetime (around
1 year).

This way, 6.1 will ship with a supported branch of esr instead of the
soon-to-be-dead 45 branch.

Discussed with naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2017/02/18 16:22:54 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	52.0esr
@


1.47
log
@Consolidate textproc/icu4c common dependency into mozilla.port.mk, and
allow to build against bundled icu4c by setting MOZILLA_USE_BUNDLED_ICU.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2017/01/24 21:35:09 landry Exp $
d5 2
a6 2
MOZILLA_VERSION =	45.7.0esr
MOZILLA_BRANCH =	esr45
d13 2
a14 2
SO_VERSION =	3.0
MOZILLA_LIBS =	browsercomps xul clearkey lgpllibs
d26 1
a26 4
# necessary glue to build with the correct compiler after fx 17
MODULES +=		gcc4 lang/clang
MODGCC4_ARCHS =		powerpc sparc64 alpha
MODGCC4_LANGS =		c c++
d32 4
d40 2
a41 1
CONFIGURE_STYLE =	gnu
d43 2
a44 2
# to be able to link when building with clang on i386 or gcc on ppc
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "powerpc"
d52 1
a52 6
CONFIGURE_ARGS +=	--disable-webrtc

# SQLITE_CFLAGS is set from pkgconfig, but it's not used for all files that need it
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include"

CONFIGURE_ARGS +=	--disable-gstreamer
@


1.46
log
@Update to firefox-esr 45.7.0.

See https://www.mozilla.org/en-US/firefox/45.7.0/releasenotes/ and MFSA
2017-02 (https://www.mozilla.org/en-US/security/advisories/mfsa2017-02/)

Remove patch-netwerk_protocol_http_Http2Session_cpp (#1290037)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2017/01/06 22:14:07 landry Exp $
a53 5

# bug #1064665
LIB_DEPENDS +=	textproc/icu4c
CONFIGURE_ARGS += --with-system-icu
WANTLIB += icudata icui18n icuuc
@


1.45
log
@Fix NS_ERROR_NET_INADEQUATE_SECURITY error messages on
wikipedia|google|cnn|various sites (http/2?) broken by the nss 3.28
update, my bad - totally forgot about this when updating.

Backport https://hg.mozilla.org/mozilla-central/rev/361ac226da2a

See https://bugzilla.mozilla.org/show_bug.cgi?id=1290037 &
https://bugzilla.mozilla.org/show_bug.cgi?id=1323209

Reported by Solene Rapenne and others, fix tested by danj@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2016/12/14 13:44:19 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.6.0esr
a10 1
REVISION =	0
@


1.44
log
@Update to firefox-esr 45.6.0.

See https://www.mozilla.org/en-US/firefox/45.6.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-95/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2016/11/30 21:49:10 landry Exp $
d11 1
@


1.43
log
@Security update to firefox-esr 45.5.1.

See https://www.mozilla.org/en-US/firefox/45.5.1/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-92/ (link not
up yet). A javascript exploit for windows was found in the wild, and the
vulnerability could technically be exploited on other platforms..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2016/11/15 21:53:47 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.5.1esr
@


1.42
log
@Update to firefox-esr 45.5.0.

See https://www.mozilla.org/en-US/firefox/45.5.0/releasenotes/ and
https://www.mozilla.org/en-US/security/advisories/mfsa2016-90/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2016/09/24 14:41:47 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.5.0esr
@


1.41
log
@Update to firefox-esr 45.4.0.

See https://www.mozilla.org/en-US/firefox/45.4.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2016-86/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2016/09/23 09:16:58 sthen Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.4.0esr
@


1.40
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2016/08/02 17:43:30 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.3.0esr
a12 1
REVISION =	0
@


1.39
log
@Update to firefox-esr 45.3.0.

- See https://www.mozilla.org/en-US/firefox/45.3.0/releasenotes/
- Fixes MFSA-2016-62->65,67,70,72,73,76->80
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/06/08 19:23:29 landry Exp $
d13 1
d52 3
@


1.38
log
@Update to firefox-esr 45.2.0.

- See https://www.mozilla.org/en-US/firefox/45.2.0/releasenotes/
- Fixes MFSA 2016-49->53, 55, 56, 58
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/05/05 06:54:28 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.2.0esr
@


1.37
log
@Bugfix update to firefox-esr 45.1.1.

- See https://www.mozilla.org/en-US/firefox/45.1.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/04/27 14:01:02 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.1.1esr
@


1.36
log
@Update firefox-esr to 45 branch with 45.1.0.

- See https://www.mozilla.org/en-US/firefox/45.1.0/releasenotes/
- Fixes MFSA 2016-39, 44 & 47
- Stays with Gtk2 for now, will probably move to Gtk3 with 52 at the end
  of the year
- Bring some patches from www/mozilla-firefox to fix build issues/enable
  W^X/etc
- Disable gstreamer, now uses ffmpeg at runtime of found like firefox
- Use bundled libevent
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/03/19 13:35:58 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	45.1.0esr
@


1.35
log
@Bugfix update to firefox-esr 38.7.1.

See https://www.mozilla.org/en-US/firefox/38.7.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/03/14 20:37:13 landry Exp $
d5 2
a6 2
MOZILLA_VERSION =	38.7.1esr
MOZILLA_BRANCH =	esr38
d10 1
d13 2
a14 2
SO_VERSION =	2.0
MOZILLA_LIBS =	browsercomps mozalloc mozgnome xul clearkey
d33 3
d39 1
a39 1
CONFIGURE_STYLE =	autoconf no-autoheader
d57 1
a57 9
CONFIGURE_ARGS +=	--enable-gstreamer=1.0

BUILD_DEPENDS +=	multimedia/gstreamer1/plugins-base

# needs 3.0.10 when not using gcc
# CONFIGURE_ARGS += --with-system-ffi

# --with-system-png=${LOCALBASE}
# no system png : apng support not bundled in
d59 2
a60 1
MOZILLA_AUTOCONF_DIRS +=	js/src
@


1.34
log
@Update to firefox-esr 38.7.0.

- See https://www.mozilla.org/en-US/firefox/38.7.0/releasenotes/
- Fixes MFSA 2015-81, 2015-136, 2016-16, 17, 20, 21, 23, 24, 25, 27, 28,
  31, 34, 35 & 37

Heads-up ! This port will switch to the 45 branch within the 6 coming weeks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/03/05 16:04:06 pascal Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.7.0esr
@


1.33
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/02/13 07:40:42 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.6.1esr
a13 1
REVISION =	0
@


1.32
log
@Security update to firefox-esr 38.6.1.

See https://www.mozilla.org/en-US/firefox/38.6.1/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2016-14/
ok sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/01/27 18:07:27 landry Exp $
d14 1
@


1.32.2.1
log
@update to firefox-esr-38.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/02/13 07:40:42 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.7.1esr
@


1.32.2.2
log
@update to firefox-esr-38.8.0
https://www.mozilla.org/en-US/firefox/38.8.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32.2.1 2016/03/30 12:12:43 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.8.0esr
@


1.31
log
@Update to firefox-esr 38.6.0.

* See https://www.mozilla.org/en-US/firefox/38.6.0/releasenotes/
* Fixes MFSA 2015-150, 2016-01 & 2016-03

Note that with esr45 around the corner, esr38 will only be supported for
two more point releases.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/12/23 17:40:22 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.6.0esr
@


1.30
log
@Update to firefox-esr 38.5.2.

See https://www.mozilla.org/en-US/firefox/38.5.2/releasenotes/
No binary change for us since this is only to force updates for poor
windows users, because microsoft now requires SHA256 certs. But ppl wont
complain that OpenBSD doesn't ship the latest and greatest!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/12/16 10:08:53 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.5.2esr
@


1.29
log
@Update to firefox-esr 38.5.0.

See https://www.mozilla.org/en-US/firefox/38.5.0/releasenotes/
Fixes MFSA 2015-134,138,139,145,146,147,149
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/11/04 07:34:19 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.5.0esr
@


1.28
log
@Update to firefox-esr 38.4.0.

- See https://www.mozilla.org/en-US/firefox/38.4.0/releasenotes/
- Fixes MFSA 2015-116, 122, 123, 127, 128, 130 -> 133
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/09/24 20:22:06 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.4.0esr
@


1.27
log
@Update to firefox-esr 38.3.0.

- See https://www.mozilla.org/en-US/firefox/38.3/releasenotes/
- Fixes MFSA 2015-96, 100, 101, 105, 106, 110, 111, 112 & 113
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/08/31 20:07:49 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.3.0esr
@


1.26
log
@Update to firefox-esr 38.2.1.

- See https://www.mozilla.org/en-US/firefox/38.2.1/releasenotes/
- Fixes MFSA-2015-94 & 95.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/08/11 21:16:51 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.2.1esr
@


1.25
log
@Update to firefox-esr{,-i18n} 38.2.0.

- See https://www.mozilla.org/en-US/firefox/40.0/releasenotes/
- Fixes MFSA-2015-79, 80, 82, 83, 84, 85, 87, 88, 89, 90 & 92
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/08/07 13:39:36 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.2.0esr
@


1.24
log
@SECURITY update to firefox 39.0.3 & firefox-esr 38.1.1.

Fixes MFSA2015-78, see
https://blog.mozilla.org/security/2015/08/06/firefox-exploit-found-in-the-wild/
and https://www.mozilla.org/en-US/security/advisories/mfsa2015-78/

ok naddy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/07/25 06:51:50 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.1.1esr
@


1.24.2.1
log
@update to firefox-38.2.1esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/08/07 13:39:36 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.2.1esr
@


1.24.2.2
log
@update to firefox-38.3.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.1 2015/09/01 14:54:52 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.3.0esr
@


1.24.2.3
log
@update to firefox-esr-35.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.2 2015/09/30 07:01:25 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.5.2esr
@


1.24.2.4
log
@update to firefox-esr-38.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.3 2015/12/24 14:09:59 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.6.0esr
@


1.24.2.5
log
@- update to firefox-esr-38.6.1
https://www.mozilla.org/en-US/firefox/38.6.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.4 2016/01/29 08:42:38 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.6.1esr
@


1.24.2.6
log
@update to firefox-esr-38.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/03/19 13:35:58 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.7.1esr
@


1.23
log
@Face reality, mark as BROKEN-sparc64. xpcshell SIGBUSes during fake, and
nobody cares. No point in wasting hours during bulk builds....
If you want a graphical browser on sparc64, try netsurf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/07/05 20:05:46 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.1.0esr
@


1.22
log
@Update to firefox-esr{,-i18n} 38.1.0.

- See https://www.mozilla.org/en-US/firefox/38.1.0/releasenotes/
- Fixes MFSA 2015-59 -> 71 (unaffected by 2015-68)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/05/28 10:17:25 pascal Exp $
d9 1
@


1.21
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/05/21 06:25:30 ajacoutot Exp $
d5 1
a5 1
MOZILLA_VERSION =	38.0.1esr
a10 1
REVISION =	1
@


1.20
log
@Sync in the GStreamer related changes and the README from the mainstream
Firefox to the Firefox ESR port.

from brad
"don't care" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/05/16 07:26:12 landry Exp $
d11 1
a11 1
REVISION =	0
@


1.19
log
@Update to firefox-esr 38.0.1.

- See https://www.mozilla.org/en-US/firefox/38.0.1/releasenotes/ and
  https://www.mozilla.org/en-US/firefox/38.0/releasenotes/
- Fixes MFSA 2015-46->58
- switch i386 back to use clang.
- use system icu4c
- remove bunch of now useless/merged patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/04/02 18:20:08 landry Exp $
d11 1
a54 6
# libxul doesnt link directly with gst but dlopens it at runtime
# see content/media/gstreamer/GStreamerLoader.cpp
#LIB_DEPENDS +=	multimedia/gstreamer-0.10/plugins-base
#WANTLIB += gmodule-2.0 gstapp-0.10 gstbase-0.10 gstreamer-0.10
#WANTLIB += gstvideo-0.10 xml2

a55 1
RUN_DEPENDS +=	multimedia/gstreamer1/plugins-good
@


1.18
log
@Update to firefox-esr 31.6.0.

- See https://www.mozilla.org/en-US/firefox/31.6.0/releasenotes/
- Fixes MFSA 2015-30, 31, 33, 37, 40
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/03/23 21:08:16 landry Exp $
d5 2
a6 2
MOZILLA_VERSION =	31.6.0esr
MOZILLA_BRANCH =	esr31
d11 2
a12 2
SO_VERSION =	1.0
MOZILLA_LIBS =	browsercomps mozalloc mozgnome xul
d26 1
a26 1
MODGCC4_ARCHS =		powerpc sparc64 alpha i386
d28 1
a28 1
MODCLANG_ARCHS =	amd64
a29 4
# fix for 982693
.if ${MACHINE_ARCH:Mamd64}
MAKE_ENV += VPXHACK="-fno-integrated-as"
.endif
d46 5
@


1.17
log
@Security update to firefox-esr 31.5.3.

- See https://www.mozilla.org/en-US/firefox/31.5.2/releasenotes/
- Fixes MFSA-2015-28/29 (Pwn2Own)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/03/16 19:56:32 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.5.3esr
@


1.16
log
@Update to firefox-esr 31.5.0.

- See https://www.mozilla.org/en-US/firefox/31.5.0/releasenotes/
- Fixes MFSA 2015-11, 12, 16, 19 & 24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/01/14 17:35:43 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.5.0esr
@


1.15
log
@Update to firefox-esr 31.4.0

- See https://www.mozilla.org/en-US/firefox/31.4.0/releasenotes/
- Fixes MFSA 2015-01, 03, 04 & 06
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/12/04 17:52:47 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.4.0esr
@


1.15.2.1
log
@update to firefox-esr-31.5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.4 2015/01/29 13:12:26 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.5.0esr
d73 1
a73 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/all-openbsd.js \
d77 1
a77 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
@


1.15.2.2
log
@update to firefox-esr-31.5.3esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15.2.1 2015/03/18 16:19:55 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.5.3esr
@


1.15.2.3
log
@update to firefox-31.6.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/04/02 18:20:08 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.6.0esr
d73 1
a73 1
	${SUBST_DATA} ${FILESDIR}/all-openbsd.js \
d77 1
a77 1
	${SUBST_DATA} ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
@


1.14
log
@Update to firefox-esr 31.3.0.

- See https://www.mozilla.org/en-US/firefox/31.3.0/releasenotes/
- Fixes MFSA-2014-83,85,87->90
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/10/17 07:19:26 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.3.0esr
@


1.13
log
@Bugfix update to firefox-esr 31.2.0.

- See https://www.mozilla.org/en-US/firefox/31.2.0/releasenotes/
- Fixes MFSA 2013-74,75,76,77,79,81,82.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/09/02 16:36:52 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.2.0esr
@


1.12
log
@Update to firefox-esr 31.1.0.

See https://www.mozilla.org/en-US/firefox/31.1.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/08/10 09:58:06 espie Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.1.0esr
a9 1
#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
@


1.11
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/07/24 18:09:57 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.0esr
d10 1
@


1.10
log
@Update to firefox-esr 31 (technically the same as firefox 31).

The reasoning to update www/firefox-esr is simple: the esr31 branch will
be supported for the next 56 weeks, while the esr24 branch will die in
12 weeks - this way, 5.6-stable will receive updates.

- See https://www.mozilla.org/en-US/firefox/31.0/releasenotes/
- Fixes MFSA 2014-56->66
- Add libvpx hack for clang build (#982693)
- Build against gstreamer1
- Add skia patches for i386/sse3 (#1028827)
- Add intl install patch (#990196)
- Remove patch-ipc_chromium_src_base_debug_util_posix_cc, merged (#927810)
- Remove patch-ipc_chromium_src_base_dir_reader_bsd_h, merged (#909005)
- Remove patch-js_src_ctypes_libffi_src_x86_freebsd_S, merged (#928381)

ok sthen@@ jasper@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/06/14 12:52:04 landry Exp $
d73 1
a73 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/all-openbsd.js \
d77 1
a77 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
@


1.10.2.1
log
@Security update to firefox-esr-31.1.0esr

https://www.mozilla.org/en-US/firefox/31.1.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/07/24 18:09:57 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.1.0esr
@


1.10.2.2
log
@update to firefox-esr-31.2.0:

https://www.mozilla.org/en-US/firefox/31.2.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.1 2014/09/18 13:56:42 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.2.0esr
@


1.10.2.3
log
@- update to firefox-esr-31.3.0
https://www.mozilla.org/en-US/firefox/31.3.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.2 2014/10/22 18:13:21 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.3.0esr
@


1.10.2.4
log
@update to firefox-31.4.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.3 2014/12/05 12:32:12 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.4.0esr
@


1.10.2.5
log
@update to firefox-esr-31.5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.4 2015/01/29 13:12:26 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.5.0esr
@


1.10.2.6
log
@update to firefox-esr-31.5.3esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15.2.1 2015/03/18 16:19:55 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.5.3esr
@


1.10.2.7
log
@update to firefox-31.6.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.6 2015/03/25 10:12:54 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	31.6.0esr
a22 2

LIB_DEPENDS +=	security/nss>=3.16.2.3
@


1.9
log
@Bump REVISIONs after mozilla.port.mk changes. Note that seamonkey 2.27
will miss the trains due to infrastructure issue, a 2.26.1 is in the
pipe, and 2.28 should be released in line with ffx/gecko 31.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/06/12 18:55:21 jasper Exp $
d5 2
a6 2
MOZILLA_VERSION =	24.6.0esr
MOZILLA_BRANCH =	esr24
a8 1
REVISION =	0
d11 1
a11 1
SO_VERSION =	0.0
d30 4
d48 4
a51 1
CONFIGURE_ARGS +=	--enable-gstreamer
d59 2
a60 2
BUILD_DEPENDS +=	multimedia/gstreamer-0.10/plugins-base
RUN_DEPENDS +=	multimedia/gstreamer-0.10/plugins-ffmpeg
@


1.8
log
@- update to firefox-esr-24.6.0
* see: http://www.mozilla.org/en-US/firefox/24.6.0/releasenotes/
* fixes MFSA-2014-48, 49 and 52

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/04/29 21:30:57 landry Exp $
d9 1
@


1.7
log
@Update to firefox-esr 24.5.0.

- See http://www.mozilla.org/en-US/firefox/24.5.0/releasenotes/
- Fixes MFSA-2014-34,35,37,38,42,43,44 & 46
- add a default prefs all-openbsd.js file, pointing
  spellchecker.dictionary_path to ${LOCALBASE}/share/mozilla-dicts/ so
that systemwide dictionaries are looked for by default.
- while here the same file disables safebrowsing feature, as is already
  done in www/mozilla-firefox.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/03/24 21:14:52 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.5.0esr
@


1.6
log
@Update to firefox-esr 24.4.0.

- See http://www.mozilla.org/en-US/firefox/24.4.0/releasenotes/
- Fixes MFSA-2014-15->17,26->32
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/03/10 20:34:00 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.4.0esr
d64 4
@


1.5
log
@Bump REVISION for gcc4 & www/mozilla MODULES changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/02/05 08:00:41 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.3.0esr
a8 1
REVISION =	0
@


1.4
log
@- update firefox-esr to 24.3.0

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/12/26 20:00:34 landry Exp $
d9 1
@


1.4.2.1
log
@update to firefox-24.4.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/02/05 08:00:41 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.4.0esr
@


1.4.2.2
log
@update to firefox-esr-24.5.0, original commit by landry@@

http://www.mozilla.org/en-US/firefox/24.5.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4.2.1 2014/04/02 07:35:40 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.5.0esr
a63 4
	# install prefs
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/browser/defaults/preferences
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-esr-${MOZILLA_VER}/browser/defaults/preferences/all-openbsd.js
@


1.4.2.3
log
@- update to firefox-esr-24.6.0
* see: http://www.mozilla.org/en-US/firefox/24.6.0/releasenotes/
* fixes MFSA-2014-48, 49 and 52
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4.2.2 2014/05/07 08:35:28 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.6.0esr
@


1.4.2.4
log
@update to firefox-24.7.0esr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4.2.3 2014/06/12 19:02:26 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.7.0esr
@


1.4.2.5
log
@security update to firefox-24.8.0esr
- note, this will be the last release of the 24ESR series
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4.2.4 2014/07/30 11:44:40 jasper Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.8.0esr
@


1.3
log
@Set StartupNotify=true in desktop files for nicer startup integration.
From ajacoutot@@, thx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/12/12 20:00:15 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	24.2.0esr
a8 1
REVISION =	0
@


1.2
log
@Update to firefox-esr 24.2.0.

- Fixes MFSA 2013-104, 108, 109, 111, 113 -> 117
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/11/20 20:57:29 landry Exp $
d9 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
MOZILLA_VERSION =	24.1.1esr
a34 1
WANTLIB +=	kvm
@


1.1.1.1
log
@Import firefox ESR 24.1.1.

Firefox ESR is intended for groups who deploy and maintain the desktop
environment in large organizations such as universities and other
schools, county or city governments and businesses. During the extended
cycle, no new features will be added to a Firefox ESR; only
high-risk/high-impact security vulnerabilities or major stability fixes
will be corrected.

Note that using it on OpenBSD is NOT supported by mozilla. People
willing to deploy it should subscribe to the EWG mailing list.

http://www.mozilla.org/en-US/firefox/organizations/faq/

Installs as firefox-esr and doesnt conflict with mainline www/mozilla-firefox.
Learn to use several profiles if you plan to use both.

req'd by several.
@
text
@@
