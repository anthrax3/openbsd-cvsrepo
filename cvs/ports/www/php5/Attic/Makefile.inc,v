head	1.39;
access;
symbols
	OPENBSD_4_9:1.36.0.2
	OPENBSD_4_9_BASE:1.36
	OPENBSD_4_8:1.33.0.2
	OPENBSD_4_8_BASE:1.33
	OPENBSD_4_7:1.30.0.2
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.26.0.2
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.24.0.2
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.20.0.2
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.16.0.2
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.13.0.2
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.4.0.2
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	robert_20041002:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.39
date	2011.07.09.00.28.53;	author robert;	state dead;
branches;
next	1.38;

1.38
date	2011.06.18.19.49.22;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2011.03.26.10.23.13;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2011.01.17.11.47.19;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2011.01.03.15.03.03;	author robert;	state Exp;
branches;
next	1.34;

1.34
date	2010.08.24.09.14.43;	author robert;	state Exp;
branches;
next	1.33;

1.33
date	2010.07.21.17.04.30;	author steven;	state Exp;
branches;
next	1.32;

1.32
date	2010.05.09.16.19.22;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.03.21.09.05.55;	author robert;	state Exp;
branches;
next	1.30;

1.30
date	2009.12.22.10.39.28;	author robert;	state Exp;
branches
	1.30.2.1;
next	1.29;

1.29
date	2009.09.21.20.04.24;	author robert;	state Exp;
branches;
next	1.28;

1.28
date	2009.08.21.09.44.12;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2009.07.20.16.30.14;	author robert;	state Exp;
branches;
next	1.26;

1.26
date	2009.06.22.11.27.00;	author robert;	state Exp;
branches
	1.26.2.1;
next	1.25;

1.25
date	2009.03.06.09.18.31;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2009.01.19.14.22.47;	author robert;	state Exp;
branches
	1.24.2.1;
next	1.23;

1.23
date	2008.12.16.12.27.36;	author robert;	state Exp;
branches;
next	1.22;

1.22
date	2008.12.09.21.52.31;	author robert;	state Exp;
branches;
next	1.21;

1.21
date	2008.10.07.14.01.42;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2008.05.20.14.01.45;	author robert;	state Exp;
branches;
next	1.19;

1.19
date	2007.11.14.10.53.50;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2007.09.17.08.37.22;	author robert;	state Exp;
branches;
next	1.17;

1.17
date	2007.09.05.09.11.34;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2007.07.02.08.53.17;	author robert;	state Exp;
branches;
next	1.15;

1.15
date	2007.05.11.15.05.15;	author robert;	state Exp;
branches;
next	1.14;

1.14
date	2007.03.22.22.43.20;	author robert;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.24.09.30.25;	author wilfried;	state Exp;
branches
	1.13.2.1;
next	1.12;

1.12
date	2006.10.21.11.44.10;	author robert;	state Exp;
branches;
next	1.11;

1.11
date	2006.07.18.21.44.40;	author alek;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	2006.05.24.13.15.42;	author robert;	state Exp;
branches;
next	1.9;

1.9
date	2006.05.21.20.46.06;	author aanriot;	state Exp;
branches;
next	1.8;

1.8
date	2006.05.09.14.15.40;	author robert;	state Exp;
branches;
next	1.7;

1.7
date	2005.12.29.23.03.29;	author sturm;	state Exp;
branches;
next	1.6;

1.6
date	2005.12.21.15.42.06;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2005.09.14.15.44.19;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.04.21.13.21;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.16.20.09.41;	author robert;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2004.12.20.20.59.44;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.02.11.32.35;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.02.11.32.35;	author robert;	state Exp;
branches;
next	;

1.3.2.1
date	2005.05.23.20.20.08;	author robert;	state Exp;
branches;
next	;

1.11.2.1
date	2007.06.17.07.55.52;	author sturm;	state Exp;
branches;
next	;

1.13.2.1
date	2007.06.17.07.54.57;	author sturm;	state Exp;
branches;
next	;

1.24.2.1
date	2009.07.19.02.11.36;	author william;	state Exp;
branches;
next	1.24.2.2;

1.24.2.2
date	2009.08.13.01.04.31;	author william;	state Exp;
branches;
next	1.24.2.3;

1.24.2.3
date	2009.08.22.16.58.14;	author william;	state Exp;
branches;
next	1.24.2.4;

1.24.2.4
date	2009.09.29.00.07.14;	author william;	state Exp;
branches;
next	;

1.26.2.1
date	2009.10.25.03.07.30;	author william;	state Exp;
branches;
next	1.26.2.2;

1.26.2.2
date	2009.12.23.01.07.26;	author william;	state Exp;
branches;
next	1.26.2.3;

1.26.2.3
date	2010.04.14.03.17.20;	author william;	state Exp;
branches;
next	;

1.30.2.1
date	2010.05.27.03.55.15;	author william;	state Exp;
branches;
next	;


desc
@@


1.39
log
@bye bye
@
text
@# $OpenBSD: Makefile.inc,v 1.38 2011/06/18 19:49:22 sthen Exp $

# This port currently only works with archs supporting dynamic loading
# and has Apache that supports DSO's.
NOT_FOR_ARCHS=		${NO_SHARED_ARCHS}

V=			5.2.17
SUHOSIN_V=		0.9.32.1
SUHOSIN_P_V=		0.9.7

DISTNAME?=		php-${V}
CATEGORIES=		www lang

MAINTAINER=		Robert Nagy <robert@@openbsd.org>
HOMEPAGE=		http://www.php.net/

MASTER_SITES=		http://us2.php.net/distributions/ \
			http://se.php.net/distributions/ \
			http://no.php.net/distributions/ \
			http://uk.php.net/distributions/
MASTER_SITES0=		http://blade2k.humppa.hu/ \
			http://download.suhosin.org/

# UPGRADERS: please read BOTH the PHP and Zend licenses
# and make sure they are safe before an upgrade
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

PHP_CONFIG_PATH=	/var/www/conf
PHP_CONFIG_FILE=	${PHP_CONFIG_PATH}/php.ini

# where the main php5 module is stored (outside the chroot)
APACHE_MODULE_SUBDIR=	lib/php
APACHE_MODULE_DIR=	${LOCALBASE}/${APACHE_MODULE_SUBDIR}

# where the PEAR and extension modules are (inside the chroot)
CHROOT_DIR?=		/var/www
MODULES_SUBDIR=		lib/php/modules
MODULES_DIR=		${CHROOT_DIR}/${MODULES_SUBDIR}

.if ${COMPILER_VERSION:L:Mgcc3}
PHP_LDFLAGS=		-lstdc++ -lm
.endif

PATCHORIG=		.orig.port
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.13
CONFIGURE_ENV=          CFLAGS="${CFLAGS} -I${LOCALBASE}/include -pthread" \
                        LDFLAGS="-L${LOCALBASE}/lib ${PHP_LDFLAGS} -pthread" \
			EXTENSION_DIR=${MODULES_DIR} lt_cv_path_SED=/usr/bin/sed
MAKE_ENV=               ${CONFIGURE_ENV}

CONFIGURE_ARGS+=	--enable-shared \
			--disable-static \
			--disable-rpath \
			--with-config-file-path=${PHP_CONFIG_PATH} \
			--enable-inline-optimization \
			--with-pic

# default included extensions
CONFIGURE_ARGS+= 	--with-openssl \
			--with-zlib

REGRESS_TARGET=		test
REGRESS_FLAGS=		NO_INTERACTION=1

CHECKSUM_FILE=		${.CURDIR}/../distinfo
PATCH_LIST=		${.CURDIR}/../patches/patch-* \
			patch-*

PSEUDO_FLAVORS+=	no_suhosin
FLAVOR?=
.if ${FLAVOR:L:Mno_suhosin}
SUPDISTFILES=		suhosin-${SUHOSIN_V}.tar.gz:0 \
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
.else
DISTFILES+=		suhosin-${SUHOSIN_V}.tar.gz:0
PATCHFILES=		suhosin-patch-5.2.16-${SUHOSIN_P_V}.patch.gz:0
PATCH_DIST_STRIP=	-p1
CONFIGURE_ARGS+=	--enable-suhosin

pre-patch:
	@@mv ${WRKDIR}/suhosin-${SUHOSIN_V} ${WRKSRC}/ext/suhosin
.endif
@


1.38
log
@Use PATCHORIG, regen patches and rename the files which didn't match the
normal update-patches filenames. This avoids update-patches picking up the
.orig files in PHP distfiles and make it easier to keep in-sync. ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.37 2011/03/26 10:23:13 sthen Exp $
@


1.37
log
@don't pick up an installed gsed; problem noticed by landry@@, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.36 2011/01/17 11:47:19 sthen Exp $
d47 1
@


1.36
log
@SECURITY update to 5.2.17, and sync WANTLIB-imap while there.
lang/php will follow later.  ok robert@@ (maintainer) aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.35 2011/01/03 15:03:03 robert Exp $
d51 1
a51 1
			EXTENSION_DIR=${MODULES_DIR}
@


1.35
log
@Update to 5.2.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.34 2010/08/24 09:14:43 robert Exp $
d7 1
a7 1
V=			5.2.16
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.34
log
@Update to 5.2.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.33 2010/07/21 17:04:30 steven Exp $
d7 2
a8 2
V=			5.2.14
SUHOSIN_V=		0.9.29
d75 1
a75 1
SUPDISTFILES=		suhosin-${SUHOSIN_V}.tgz:0 \
d78 1
a78 1
DISTFILES+=		suhosin-${SUHOSIN_V}.tgz:0
@


1.33
log
@drop USE_GCC3 here as well.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.31 2010/03/21 09:05:55 robert Exp $
d7 1
a7 1
V=			5.2.13
@


1.32
log
@fix Makefile for gcc4, okay robert@@
@
text
@d43 1
a43 3
USE_GCC3 ?= No
COMPILER_VERSION ?= gcc2
.if ${USE_GCC3:L:Myes} || ${COMPILER_VERSION:L:Mgcc[34]*}
@


1.31
log
@update to version 5.2.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.30 2009/12/22 10:39:28 robert Exp $
d43 3
a45 1
.if ${USE_GCC3:L:Myes}
@


1.30
log
@Update to php-5.2.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.29 2009/09/21 20:04:24 robert Exp $
d7 1
a7 1
V=			5.2.12
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
@


1.30.2.1
log
@SECURITY UPDATE to 5.2.13

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.30 2009/12/22 10:39:28 robert Exp $
d7 1
a7 1
V=			5.2.13
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.29
log
@Update to php 5.2.11;

 Security Enhancements and Fixes in PHP 5.2.11:

    * Fixed certificate validation inside php_openssl_apply_verification_policy. (Ryan Sleevi, Ilia)
    * Fixed sanity check for the color index in imagecolortransparent(). (Pierre)
    * Added missing sanity checks around exif processing. (Ilia)
    * Fixed bug #44683 (popen crashes when an invalid mode is passed). (Pierre)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.28 2009/08/21 09:44:12 sthen Exp $
d7 1
a7 1
V=			5.2.11
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.28
log
@update Suhosin extension to 0.9.29; fixes segfaults with session encryption.
revert workaround (change default back to encrypted sessions).

ok robert@@, similar diff jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.27 2009/07/20 16:30:14 robert Exp $
d7 1
a7 1
V=			5.2.10
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
@


1.27
log
@Make suhosin.session.encrypt=off by default because there are some problems
with php 5.2.10 and the suhosin patch. noted by william@@ and people on ports@@
It's going to be re-enabled when it gets fixed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.26 2009/06/22 11:27:00 robert Exp $
d8 1
a8 1
SUHOSIN_V=		0.9.27
@


1.26
log
@update to php-5.2.10:
This is a SECURITY FIX that fixes:
  Fixed bug #48378 (exif_read_data() segfaults on certain corrupted .jpeg files.

Update the suhosin patch to the current one while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.25 2009/03/06 09:18:31 robert Exp $
d83 2
a84 2
post-patch:
	mv ${WRKDIR}/suhosin-${SUHOSIN_V} ${WRKSRC}/ext/suhosin
@


1.26.2.1
log
@MFC:

Update to php 5.2.11;

 Security Enhancements and Fixes in PHP 5.2.11:

    * Fixed certificate validation inside php_openssl_apply_verification_policy. (Ryan Sleevi, Ilia)
    * Fixed sanity check for the color index in imagecolortransparent(). (Pierre)
    * Added missing sanity checks around exif processing. (Ilia)
    * Fixed bug #44683 (popen crashes when an invalid mode is passed). (Pierre)

and

update Suhosin extension to 0.9.29; fixes segfaults with session encryption.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.29 2009/09/21 20:04:24 robert Exp $
d7 2
a8 2
V=			5.2.11
SUHOSIN_V=		0.9.29
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d83 2
a84 2
pre-patch:
	@@mv ${WRKDIR}/suhosin-${SUHOSIN_V} ${WRKSRC}/ext/suhosin
@


1.26.2.2
log
@MFC:

SECURITY FIX

php5-5.2.12

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.26.2.1 2009/10/25 03:07:30 william Exp $
d7 1
a7 1
V=			5.2.12
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
@


1.26.2.3
log
@MFC:

SECURITY FIX

php5-5.2.13

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.26.2.2 2009/12/23 01:07:26 william Exp $
d7 1
a7 1
V=			5.2.13
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.25
log
@update to php 5.2.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.24 2009/01/19 14:22:47 robert Exp $
d7 1
a7 1
V=			5.2.9
d9 1
a9 1
SUHOSIN_P_V=		0.9.6.3
d48 1
a48 1
AUTOCONF_VERSION=	2.52
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.openbsd-patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.openbsd-patch.gz:0
@


1.24
log
@fix typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.23 2008/12/16 12:27:36 robert Exp $
d7 1
a7 1
V=			5.2.8
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.24.2.1
log
@MFC:

SECURITY FIX

php5-5.2.10

Resolves:

- bug #48378 (exif_read_data() segfaults on certain corrupted .jpeg files)
- in imagerotate(), background colour isn't validated correctly with a
non-truecolour image (CVE-2008-5498)
- crash on extract in zip when files or directories entry names contain a
relative path
- explode() behavior with empty string to respect negative limit
- segfault when malformed string is passed to json_decode()
- bug in xml_error_string() which resulted in messages being off by one

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.26 2009/06/22 11:27:00 robert Exp $
d7 1
a7 1
V=			5.2.10
d9 1
a9 1
SUHOSIN_P_V=		0.9.7
d48 1
a48 1
AUTOCONF_VERSION=	2.13
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}-openbsd.patch.gz:0
@


1.24.2.2
log
@MFC:

Make suhosin.session.encrypt=off by default because there are some problems
with php 5.2.10 and the suhosin patch. noted by william@@ and people on ports@@
It's going to be re-enabled when it gets fixed upstream.

and

patch-ext_suhosin_suhosin_c has to go the the shared patch
dir.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.24.2.1 2009/07/19 02:11:36 william Exp $
d83 2
a84 2
pre-patch:
	@@mv ${WRKDIR}/suhosin-${SUHOSIN_V} ${WRKSRC}/ext/suhosin
@


1.24.2.3
log
@MFC:

update Suhosin extension to 0.9.29; fixes segfaults with session encryption.
revert workaround (change default back to encrypted sessions).

ok sthen@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.24.2.2 2009/08/13 01:04:31 william Exp $
d8 1
a8 1
SUHOSIN_V=		0.9.29
@


1.24.2.4
log
@MFC:

Update to php 5.2.11;

 Security Enhancements and Fixes in PHP 5.2.11:

    * Fixed certificate validation inside php_openssl_apply_verification_policy. (Ryan Sleevi, Ilia)
    * Fixed sanity check for the color index in imagecolortransparent(). (Pierre)
    * Added missing sanity checks around exif processing. (Ilia)
    * Fixed bug #44683 (popen crashes when an invalid mode is passed). (Pierre)

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.29 2009/09/21 20:04:24 robert Exp $
d7 1
a7 1
V=			5.2.11
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.23
log
@move to the offical suhosin patch for 5.2.8; no change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.22 2008/12/09 21:52:31 robert Exp $
d76 1
a76 1
			suhosin--patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.22
log
@update to php-5.2.8 and fix the no_suhosin flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.21 2008/10/07 14:01:42 sthen Exp $
d76 1
a76 1
			suhosin-unoffical-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-unoffical-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
@


1.21
log
@typo in SUPDISTFILES, pointed out by Pierre Riteau.
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.20 2008/05/20 14:01:45 robert Exp $
d7 3
a9 3
V=			5.2.6
SUHOSIN_V=		0.9.20
SUHOSIN_P_V=		0.9.6.2
d21 2
a22 1
MASTER_SITES0=		http://download.suhosin.org/
d76 1
a76 1
			suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d79 1
a79 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_P_V}.patch.gz:0
d82 3
@


1.20
log
@update to php-5.2.6; from Brad Walker <me@@bradmwalker.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.19 2007/11/14 10:53:50 robert Exp $
d75 1
a75 1
			suhosin-patch-${V}-4{SUHOSIN_P_V}.patch.gz:0
@


1.19
log
@- update to php-5.2.5
- include the suhosin extension and suhosin patch by default unless
  the no_suhosin flavor is defined
- add all the suhosin configuration options to the sample config
  files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.18 2007/09/17 08:37:22 robert Exp $
d7 1
a7 1
V=			5.2.5
d21 1
a21 1
MASTER_SITES0=		http://www.hardened-php.net/suhosin/_media/
@


1.18
log
@provide correct include paths by fixing a typo in patch-scripts_php_config_in;
bump PKGNAME; noticed by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.17 2007/09/05 09:11:34 robert Exp $
d7 4
a10 2
V=			5.2.4
SUHOSIN_V=		0.9.6.2
d74 2
a75 1
SUPDISTFILES=		suhosin-patch-${V}-${SUHOSIN_V}.patch.gz:0
d77 2
a78 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_V}.patch.gz:0
d80 1
@


1.17
log
@update to version 5.2.4 and remove some obsolete CONFIGURE_ARGS;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.16 2007/07/02 08:53:17 robert Exp $
d19 1
a19 2
MASTER_SITES0=		http://humppa.hu/php/
MASTER_SITES1=		http://www.hardened-php.net/suhosin/_media/
@


1.16
log
@update to version 5.2.3;
fixes many vulnerabilities just as usual. for more information
read http://www.php.net/releases/5_2_3.php

add a no_suhosin pseudo-flavor because horde has some problems
with the suhosin security patchset
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.15 2007/05/11 15:05:15 robert Exp $
d7 1
a7 1
V=			5.2.3
d19 1
a19 1
MASTER_SITES0=		http://anoncvs.silihost.hu/
d73 1
a73 1
SUPDISTFILES=		suhosin-patch-${V}-${SUHOSIN_V}.patch.gz:1
d75 1
a75 1
PATCHFILES=		suhosin-patch-${V}-${SUHOSIN_V}.patch.gz:1
@


1.15
log
@update to version 5.2.2;
fixes many vulnerabilities http://www.php.net/ChangeLog-5.php#5.2.2

from Lawrence Teo <lteo.openbsd1@@calyptix.com>;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.14 2007/03/22 22:43:20 robert Exp $
d7 1
a7 1
V=			5.2.2
d69 6
d77 1
@


1.14
log
@- update to php 5.2.1 and suhosin 0.9.2.6
- remove the pear subpackage as it is now replaced with www/pear
- the filepro extension is no longer available

tested by a couple of people
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.13 2006/10/24 09:30:25 wilfried Exp $
d7 1
a7 1
V=			5.2.1
@


1.13
log
@the suhosin patchset moved on the master site, ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.12 2006/10/21 11:44:10 robert Exp $
d7 2
a8 3
V=			5.1.6
PEAR_V= 		20060428
SUHOSIN_V=		0.9.5
a37 1
PEAR_DIR?=		${CHROOT_DIR}/pear
d48 1
a48 1
                        LDFLAGS="-L${LOCALBASE}/lib ${PHP_LDFLAGS}" \
@


1.13.2.1
log
@assorted security patches, from debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.13 2006/10/24 09:30:25 wilfried Exp $
a72 3

post-extract:
	@@find ${WRKSRC} -name \*.orig -exec rm {} \;
@


1.12
log
@update to version 5.1.6 and replace the hardened patchset with
the suhosin patchset;

kill the hardened flavor because we are going to use suhosin
patchet by default;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.11 2006/07/18 21:44:40 alek Exp $
d21 1
a21 1
MASTER_SITES1=		http://www.hardened-php.net/
@


1.11
log
@Make it work after recent iodbc changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.10 2006/05/24 13:15:42 robert Exp $
d7 1
a7 1
V=			5.1.4
d9 1
d71 1
a71 8

# the hardened flavor is used by both core and extensions
FLAVORS+=		hardened
FLAVOR?=

HARDENED_V=		0.4.9
.if ${FLAVOR:L:Mhardened}
PATCHFILES=		hardening-patch-${V}-${HARDENED_V}.patch.gz:1
a72 3
.else
SUPDISTFILES=		hardening-patch-${V}-${HARDENED_V}.patch.gz:1
.endif
@


1.11.2.1
log
@assorted security patches, from debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.11 2006/07/18 21:44:40 alek Exp $
a81 3

post-extract:
	@@find ${WRKSRC} -name \*.orig -exec rm {} \;
@


1.10
log
@There is no need to add the pear distfile to SUPDISTFILES;
noticed by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.9 2006/05/21 20:46:06 aanriot Exp $
d48 1
a48 1
CONFIGURE_ENV=          CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
@


1.9
log
@- php-5.1.4 tarball has been rerolled, so update distinfo.
- add pear's distfile to SUPDISTFILES .
- bump relevent PKGNAMEs.

prompted by and ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.8 2006/05/09 14:15:40 robert Exp $
d8 1
a81 3

PEAR_V=			20060428
SUPDISTFILES+=		pear-${PEAR_V}
@


1.8
log
@Update to version 5.1.4;

Add a hardened flavor for both core and extensions (inspired by niallo@@);
Use our own way to install pear because the bundled installer is totally
broken and upstream refuses to fix it.

Add a mysqli subpackage which can be used to access the functionality
provided by MySQL 4.1 and above.

Other minor changes and fixes are also included.

ok sturm@@; tested by many
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.7 2005/12/29 23:03:29 sturm Exp $
d81 3
@


1.7
log
@revert completely broken update, we are back at 5.0.5 now
discussed on icb
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.5 2005/09/14 15:44:19 robert Exp $
d5 1
a5 1
NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
d7 13
a19 11
V=		5.0.5
DISTNAME=	php-${V}
CATEGORIES=	www lang

MAINTAINER=	Robert Nagy <robert@@openbsd.org>
HOMEPAGE=	http://www.php.net/

MASTER_SITES=	http://us2.php.net/distributions/ \
		http://se.php.net/distributions/ \
		http://no.php.net/distributions/ \
		http://uk.php.net/distributions/
a22 1

d69 12
@


1.6
log
@Update to php-5.1.1;
for more information please check
http://www.php.net/ChangeLog-5.php#5.1.1
and
http://www.php.net/ChangeLog-5.php#5.1.0

The port now uses a CVS snapshot of PEAR;
@
text
@d7 1
a7 1
V=			5.1.1
a17 1
MASTER_SITES0=	http://www.bsd.hu/~robert/
@


1.5
log
@upgrade to php-5.0.5;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.4 2005/04/04 21:13:21 robert Exp $
d7 1
a7 1
V=		5.0.5
d18 1
@


1.4
log
@update to 5.0.4;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.3 2005/03/16 20:09:41 robert Exp $
d7 1
a7 1
V=		5.0.4
@


1.3
log
@- fix WANTLIB markers and dependencies (from alek@@ and wilfried@@)
- delete some whitespaces (from wilfried@@)
- don't leave mess in ldconfig search path
(reported by Moritz Grimm <mlist@@scapa.dnsalias.net>)
- bump PKGNAMEs

tested by many; ok pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.2 2004/12/20 20:59:44 robert Exp $
d7 1
a7 1
V=		5.0.3
@


1.3.2.1
log
@SECURITY: update to 5.0.4
fixes multiple vulnerabilities
http://www.vuxml.org/openbsd/7612fe54-b00c-11d9-9c1d-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.3 2005/03/16 20:09:41 robert Exp $
d7 1
a7 1
V=		5.0.4
@


1.2
log
@SECURITY:
update to 5.0.3;

add libstdc++ to WANTLIB;
use {.CURDIR} for PATCH_LIST and CHECKSUM_FILE from jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.1.1.1 2004/10/02 11:32:35 robert Exp $
a43 1
LIB_DEPENDS+=		xml2.8::textproc/libxml
d48 1
a48 1
			EXTENSION_DIR=${MODULES_DIR} 
d60 1
a60 1
			--with-zlib 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
V=		5.0.2	
d66 2
a67 2
CHECKSUM_FILE?=		${PORTSDIR}/www/php5/distinfo
PATCH_LIST=		${PORTSDIR}/www/php5/patches/patch-* \
@


1.1.1.1
log
@Import php-5.0.2;

PHP5 is a widely-used general-purpose scripting language 
that is especially suited for Web development and can be 
embedded into HTML. 
@
text
@@
