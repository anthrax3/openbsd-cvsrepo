head	1.14;
access;
symbols
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.10.0.6
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.4
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.9.0.6
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.4
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	robert_20041002:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2011.07.09.00.28.54;	author robert;	state dead;
branches;
next	1.13;

1.13
date	2011.06.18.19.49.22;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2011.03.21.19.50.18;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.01.03.15.03.03;	author robert;	state Exp;
branches;
next	1.10;

1.10
date	2009.06.22.11.27.00;	author robert;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.05.09.11.34;	author robert;	state Exp;
branches
	1.9.6.1;
next	1.8;

1.8
date	2007.05.11.15.05.15;	author robert;	state Exp;
branches;
next	1.7;

1.7
date	2007.04.01.21.37.27;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2006.05.09.14.15.40;	author robert;	state Exp;
branches
	1.6.2.1
	1.6.4.1;
next	1.5;

1.5
date	2005.12.29.23.07.19;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.21.15.42.06;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2005.04.04.21.13.22;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.16.20.09.41;	author robert;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2004.10.02.11.32.37;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.02.11.32.37;	author robert;	state Exp;
branches;
next	;

1.2.2.1
date	2005.05.23.20.20.08;	author robert;	state Exp;
branches;
next	;

1.6.2.1
date	2007.06.17.07.55.52;	author sturm;	state Exp;
branches;
next	;

1.6.4.1
date	2007.06.17.07.54.58;	author sturm;	state Exp;
branches;
next	;

1.9.6.1
date	2009.07.19.02.11.36;	author william;	state Exp;
branches;
next	;


desc
@@


1.14
log
@bye bye
@
text
@$OpenBSD: patch-aclocal_m4,v 1.13 2011/06/18 19:49:22 sthen Exp $
--- aclocal.m4.orig.port	Thu Jan  6 23:04:40 2011
+++ aclocal.m4	Sat Jun 18 12:17:02 2011
@@@@ -194,7 +194,7 @@@@ dnl the path is interpreted relative to the top build-
 dnl
 dnl which array to append to?
 AC_DEFUN([PHP_ADD_SOURCES],[
-  PHP_ADD_SOURCES_X($1, $2, $3, ifelse($4,cli,PHP_CLI_OBJS,ifelse($4,sapi,PHP_SAPI_OBJS,PHP_GLOBAL_OBJS)))
+  PHP_ADD_SOURCES_X($1, $2, $3, ifelse($4,cli,PHP_CLI_OBJS,ifelse($4,sapi,PHP_SAPI_OBJS,ifelse($4,cgi,PHP_CGI_OBJS,PHP_GLOBAL_OBJS))))
 ])
 
 dnl
@@@@ -968,15 +968,7 @@@@ dnl ---------------------------------------------- Sha
   if test "$3" != "shared" && test "$3" != "yes" && test "$4" = "cli"; then
 dnl ---------------------------------------------- CLI static module
     [PHP_]translit($1,a-z_-,A-Z__)[_SHARED]=no
-    case "$PHP_SAPI" in
-      cgi|embed[)]
-        PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,)
-        EXT_STATIC="$EXT_STATIC $1"
-        ;;
-      *[)]
-        PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,cli)
-        ;;
-    esac
+    PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,cgi)
     EXT_CLI_STATIC="$EXT_CLI_STATIC $1"
   fi
   PHP_ADD_BUILD_DIR($ext_builddir)
@@@@ -1026,12 +1018,6 @@@@ You either need to build $1 shared or build $2 statica
 build to be successful.
 ])
   fi
-  if test "x$is_it_enabled" = "xno" && test "x$3" != "xtrue"; then
-    AC_MSG_ERROR([
-You've configured extension $1, which depends on extension $2,
-but you've either not enabled $2, or have disabled it.
-])
-  fi
   dnl Some systems require that we link $2 to $1 when building
 ])
 
@@@@ -2274,10 +2260,9 @@@@ AC_DEFUN([PHP_SETUP_KERBEROS],[
     if test "$PHP_KERBEROS_DIR"; then
       found_kerberos=yes
       PHP_ADD_LIBPATH($PHP_KERBEROS_DIR/$PHP_LIBDIR, $1)
-      PHP_ADD_LIBRARY(gssapi_krb5, 1, $1)
       PHP_ADD_LIBRARY(krb5, 1, $1)
-      PHP_ADD_LIBRARY(k5crypto, 1, $1)
-      PHP_ADD_LIBRARY(com_err,  1, $1)
+      PHP_ADD_LIBRARY(crypto, 1, $1)
+      PHP_ADD_LIBRARY(gssapi, 1, $1)
       PHP_ADD_INCLUDE($PHP_KERBEROS_DIR/include)
     fi
   fi
@@@@ -2325,7 +2310,7 @@@@ AC_DEFUN([PHP_SETUP_OPENSSL],[
       AC_MSG_ERROR([OpenSSL version 0.9.6 or greater required.])
     fi
 
-    if test -n "$OPENSSL_LIBS" && test -n "$OPENSSL_INCS"; then
+    if test -n "$OPENSSL_LIBS"; then
       PHP_EVAL_LIBLINE($OPENSSL_LIBS, $1)
       PHP_EVAL_INCLINE($OPENSSL_INCS)
     fi
@@@@ -4319,7 +4304,7 @@@@ bsdi[[45]]*)
   need_version=no
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
+  finish_cmds=
   shlibpath_var=LD_LIBRARY_PATH
   sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
   sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
@


1.13
log
@Use PATCHORIG, regen patches and rename the files which didn't match the
normal update-patches filenames. This avoids update-patches picking up the
.orig files in PHP distfiles and make it easier to keep in-sync. ok robert@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.12
log
@- fix the autoconf bits for openssl's pkg-config files as well as a fix
for one of the autoconf tests which assumes libssl is linked with libcrypto.

from brad
ok robert@@ (MAINTAINER)
@
text
@d1 3
a3 2
--- aclocal.m4.orig	Thu Jan  6 18:04:40 2011
+++ aclocal.m4	Tue Jan 25 18:56:25 2011
@


1.11
log
@Update to 5.2.16
@
text
@d1 2
a2 2
--- aclocal.m4.orig	Wed Dec 15 14:44:59 2010
+++ aclocal.m4	Mon Jan  3 14:34:45 2011
d55 9
@


1.10
log
@update to php-5.2.10:
This is a SECURITY FIX that fixes:
  Fixed bug #48378 (exif_read_data() segfaults on certain corrupted .jpeg files.

Update the suhosin patch to the current one while here.
@
text
@d1 3
a3 3
--- aclocal.m4.orig	Wed Jun 17 14:35:16 2009
+++ aclocal.m4	Mon Jun 22 13:18:01 2009
@@@@ -194,7 +194,7 @@@@
d12 1
a12 1
@@@@ -968,15 +968,7 @@@@
d29 1
a29 1
@@@@ -1026,12 +1018,6 @@@@
d42 1
a42 1
@@@@ -2274,10 +2260,9 @@@@
d55 1
a55 1
@@@@ -4167,7 +4152,7 @@@@
@


1.9
log
@update to version 5.2.4 and remove some obsolete CONFIGURE_ARGS;
@
text
@d1 3
a3 4
$OpenBSD: patch-aclocal_m4,v 1.8 2007/05/11 15:05:15 robert Exp $
--- aclocal.m4.orig	Thu Aug 30 01:39:17 2007
+++ aclocal.m4	Wed Sep  5 10:39:20 2007
@@@@ -194,7 +194,7 @@@@ dnl the path is interpreted relative to the top build-
d12 1
a12 1
@@@@ -962,12 +962,7 @@@@ dnl ---------------------------------------------- Sha
d16 10
a25 7
-    if test "$PHP_SAPI" = "cgi"; then
-      PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,)
-      EXT_STATIC="$EXT_STATIC $1"
-    else
-      PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,cli)
-    fi
+      PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,cgi)
d29 1
a29 1
@@@@ -1017,17 +1012,12 @@@@ You either need to build $1 shared or build $2 statica
d42 1
a42 7
 dnl -------------------------------------------------------------------------
 dnl Checks for structures, typedefs, broken functions, etc.
+B
 dnl -------------------------------------------------------------------------
 
 dnl Internal helper macros
@@@@ -2265,10 +2255,9 @@@@ AC_DEFUN([PHP_SETUP_KERBEROS],[
d55 5
a59 5
@@@@ -4490,7 +4479,7 @@@@ openbsd*)
     *)                         need_version=no  ;;
   esac
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
d62 2
a63 2
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     case $host_os in
@


1.9.6.1
log
@MFC:

SECURITY FIX

php5-5.2.10

Resolves:

- bug #48378 (exif_read_data() segfaults on certain corrupted .jpeg files)
- in imagerotate(), background colour isn't validated correctly with a
non-truecolour image (CVE-2008-5498)
- crash on extract in zip when files or directories entry names contain a
relative path
- explode() behavior with empty string to respect negative limit
- segfault when malformed string is passed to json_decode()
- bug in xml_error_string() which resulted in messages being off by one

ok robert@@
@
text
@d1 4
a4 3
--- aclocal.m4.orig	Wed Jun 17 14:35:16 2009
+++ aclocal.m4	Mon Jun 22 13:18:01 2009
@@@@ -194,7 +194,7 @@@@
d13 1
a13 1
@@@@ -968,15 +968,7 @@@@
d17 7
a23 10
-    case "$PHP_SAPI" in
-      cgi|embed[)]
-        PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,)
-        EXT_STATIC="$EXT_STATIC $1"
-        ;;
-      *[)]
-        PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,cli)
-        ;;
-    esac
+    PHP_ADD_SOURCES(PHP_EXT_DIR($1),$2,$ac_extra,cgi)
d27 1
a27 1
@@@@ -1026,12 +1018,6 @@@@
d40 7
a46 1
@@@@ -2274,10 +2260,9 @@@@
d59 5
a63 5
@@@@ -4167,7 +4152,7 @@@@
   need_version=no
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${release}${shared_ext}$major $libname${shared_ext}'
   soname_spec='${libname}${release}${shared_ext}$major'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
d66 2
a67 2
   sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
   sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
@


1.8
log
@update to version 5.2.2;
fixes many vulnerabilities http://www.php.net/ChangeLog-5.php#5.2.2

from Lawrence Teo <lteo.openbsd1@@calyptix.com>;
@
text
@d1 3
a3 3
$OpenBSD: patch-aclocal_m4,v 1.7 2007/04/01 21:37:27 robert Exp $
--- aclocal.m4.orig	Wed Feb  7 01:47:35 2007
+++ aclocal.m4	Sun Apr  1 14:04:45 2007
d13 1
a13 1
@@@@ -966,12 +966,7 @@@@ dnl ---------------------------------------------- Sha
d27 1
a27 1
@@@@ -1021,17 +1016,12 @@@@ You either need to build $1 shared or build $2 statica
d45 2
a46 2
 dnl
@@@@ -2129,10 +2119,9 @@@@ AC_DEFUN([PHP_SETUP_KERBEROS],[
d59 1
a59 1
@@@@ -4320,7 +4309,7 @@@@ openbsd*)
@


1.7
log
@- add a fastcgi subpackage to core because now we are able to build
more than one php binaries within one workdir (idea from FreeBSD)
- move pdo_sqlite support from core to extensions and also add a pdo_mysql
and a pdo_sqlite subpackage
- regen patches while here
- bump PKGNAMEs
@
text
@d1 1
a1 1
$OpenBSD: patch-aclocal_m4,v 1.6 2006/05/09 14:15:40 robert Exp $
d59 1
a59 1
@@@@ -4290,7 +4279,7 @@@@ openbsd*)
@


1.6
log
@Update to version 5.1.4;

Add a hardened flavor for both core and extensions (inspired by niallo@@);
Use our own way to install pear because the bundled installer is totally
broken and upstream refuses to fix it.

Add a mysqli subpackage which can be used to access the functionality
provided by MySQL 4.1 and above.

Other minor changes and fixes are also included.

ok sturm@@; tested by many
@
text
@d1 46
a46 4
$OpenBSD$
--- aclocal.m4.orig	Wed Nov 23 22:37:40 2005
+++ aclocal.m4	Sat Nov 26 12:59:21 2005
@@@@ -2100,10 +2100,9 @@@@
d59 1
a59 1
@@@@ -4165,7 +4164,7 @@@@
@


1.6.2.1
log
@assorted security patches, from debian
@
text
@d1 4
a4 4
$OpenBSD: patch-aclocal_m4,v 1.6 2006/05/09 14:15:40 robert Exp $
--- aclocal.m4.orig	Fri May 12 16:41:08 2006
+++ aclocal.m4	Sun Jun 10 19:33:53 2007
@@@@ -2129,10 +2129,9 @@@@ AC_DEFUN([PHP_SETUP_KERBEROS],[
d17 1
a17 1
@@@@ -4202,7 +4201,7 @@@@ openbsd*)
@


1.6.4.1
log
@assorted security patches, from debian
@
text
@d1 4
a4 4
$OpenBSD: patch-aclocal_m4,v 1.6 2006/05/09 14:15:40 robert Exp $
--- aclocal.m4.orig	Wed Aug 23 14:55:01 2006
+++ aclocal.m4	Sun Jun 10 10:41:01 2007
@@@@ -2129,10 +2129,9 @@@@ AC_DEFUN([PHP_SETUP_KERBEROS],[
d17 1
a17 1
@@@@ -4202,7 +4201,7 @@@@ openbsd*)
@


1.5
log
@more
@
text
@d1 4
a4 4
$OpenBSD: patch-aclocal_m4,v 1.3 2005/04/04 21:13:22 robert Exp $
--- aclocal.m4.orig	Wed Mar 30 23:45:38 2005
+++ aclocal.m4	Sun Apr  3 21:38:56 2005
@@@@ -1656,10 +1656,9 @@@@
d7 1
a7 1
       PHP_ADD_LIBPATH($PHP_KERBEROS_DIR/lib, $1)
d17 4
a20 21
@@@@ -1753,6 +1752,7 @@@@
   
     PHP_CHECK_LIBRARY(crypto, CRYPTO_free, [
       PHP_ADD_LIBRARY(crypto,,$1)
+      PHP_ADD_LIBRARY(des,,$1)
     ],[
       AC_MSG_ERROR([libcrypto not found!])
     ],[
@@@@ -4083,7 +4083,7 @@@@
   need_version=no
   library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
   soname_spec='${libname}${release}.so$major'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
+  finish_cmds=
   shlibpath_var=LD_LIBRARY_PATH
   sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
   sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
@@@@ -4313,7 +4313,7 @@@@
     shlibpath_overrides_runpath=yes
   fi
   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
d24 2
a25 2
   ;;
 
@


1.4
log
@Update to php-5.1.1;
for more information please check
http://www.php.net/ChangeLog-5.php#5.1.1
and
http://www.php.net/ChangeLog-5.php#5.1.0

The port now uses a CVS snapshot of PEAR;
@
text
@d1 4
a4 4
$OpenBSD$
--- aclocal.m4.orig	Wed Nov 23 22:37:40 2005
+++ aclocal.m4	Sat Nov 26 12:59:21 2005
@@@@ -2100,10 +2100,9 @@@@
d7 1
a7 1
       PHP_ADD_LIBPATH($PHP_KERBEROS_DIR/$PHP_LIBDIR, $1)
d17 21
a37 4
@@@@ -4165,7 +4164,7 @@@@
     *)                         need_version=no  ;;
   esac
   library_names_spec='${libname}${release}${shared_ext}$versuffix ${libname}${shared_ext}$versuffix'
d41 2
a42 2
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
     case $host_os in
@


1.3
log
@update to 5.0.4;
@
text
@d2 3
a4 3
--- aclocal.m4.orig	Wed Mar 30 23:45:38 2005
+++ aclocal.m4	Sun Apr  3 21:38:56 2005
@@@@ -1656,10 +1656,9 @@@@
d7 1
a7 1
       PHP_ADD_LIBPATH($PHP_KERBEROS_DIR/lib, $1)
d17 4
a20 21
@@@@ -1753,6 +1752,7 @@@@
   
     PHP_CHECK_LIBRARY(crypto, CRYPTO_free, [
       PHP_ADD_LIBRARY(crypto,,$1)
+      PHP_ADD_LIBRARY(des,,$1)
     ],[
       AC_MSG_ERROR([libcrypto not found!])
     ],[
@@@@ -4083,7 +4083,7 @@@@
   need_version=no
   library_names_spec='${libname}${release}.so$versuffix ${libname}${release}.so$major $libname.so'
   soname_spec='${libname}${release}.so$major'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig $libdir'
+  finish_cmds=
   shlibpath_var=LD_LIBRARY_PATH
   sys_lib_search_path_spec="/shlib /usr/lib /usr/X11/lib /usr/contrib/lib /lib /usr/local/lib"
   sys_lib_dlsearch_path_spec="/shlib /usr/lib /usr/local/lib"
@@@@ -4313,7 +4313,7 @@@@
     shlibpath_overrides_runpath=yes
   fi
   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
d24 2
a25 2
   ;;
 
@


1.2
log
@- fix WANTLIB markers and dependencies (from alek@@ and wilfried@@)
- delete some whitespaces (from wilfried@@)
- don't leave mess in ldconfig search path
(reported by Moritz Grimm <mlist@@scapa.dnsalias.net>)
- bump PKGNAMEs

tested by many; ok pval@@
@
text
@d2 16
a17 3
--- aclocal.m4.orig	Wed Dec 15 07:58:45 2004
+++ aclocal.m4	Mon Mar 14 23:32:17 2005
@@@@ -1655,6 +1655,7 @@@@
d25 1
a25 1
@@@@ -3946,7 +3947,7 @@@@
d34 1
a34 1
@@@@ -4156,7 +4157,7 @@@@
@


1.2.2.1
log
@SECURITY: update to 5.0.4
fixes multiple vulnerabilities
http://www.vuxml.org/openbsd/7612fe54-b00c-11d9-9c1d-00065bd5b0b6.html

ok brad@@
@
text
@d2 3
a4 16
--- aclocal.m4.orig	Wed Mar 30 23:45:38 2005
+++ aclocal.m4	Sun Apr  3 21:38:56 2005
@@@@ -1656,10 +1656,9 @@@@
     if test "$PHP_KERBEROS_DIR"; then
       found_kerberos=yes
       PHP_ADD_LIBPATH($PHP_KERBEROS_DIR/lib, $1)
-      PHP_ADD_LIBRARY(gssapi_krb5, 1, $1)
       PHP_ADD_LIBRARY(krb5, 1, $1)
-      PHP_ADD_LIBRARY(k5crypto, 1, $1)
-      PHP_ADD_LIBRARY(com_err,  1, $1)
+      PHP_ADD_LIBRARY(crypto, 1, $1)
+      PHP_ADD_LIBRARY(gssapi, 1, $1)
       PHP_ADD_INCLUDE($PHP_KERBEROS_DIR/include)
     fi
   fi
@@@@ -1753,6 +1752,7 @@@@
d12 1
a12 1
@@@@ -4083,7 +4083,7 @@@@
d21 1
a21 1
@@@@ -4313,7 +4313,7 @@@@
@


1.1
log
@Initial revision
@
text
@d2 2
a3 2
--- aclocal.m4.orig	Mon Jul 26 23:06:19 2004
+++ aclocal.m4	Mon Jul 26 23:06:53 2004
d12 1
a12 1
@@@@ -3934,7 +3935,7 @@@@
d21 9
@


1.1.1.1
log
@Import php-5.0.2;

PHP5 is a widely-used general-purpose scripting language 
that is especially suited for Web development and can be 
embedded into HTML. 
@
text
@@
