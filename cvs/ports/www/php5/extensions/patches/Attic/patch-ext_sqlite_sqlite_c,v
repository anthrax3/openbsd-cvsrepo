head	1.1;
access;
symbols
	OPENBSD_4_0:1.1.0.4
	OPENBSD_4_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2007.06.17.07.54.58;	author sturm;	state dead;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2007.06.17.07.54.58;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2007.06.17.07.55.52;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file patch-ext_sqlite_sqlite_c was initially added on branch OPENBSD_4_1.
@
text
@@


1.1.4.1
log
@assorted security patches, from debian
@
text
@a0 15
$OpenBSD$
--- ext/sqlite/sqlite.c.orig	Tue Apr 18 16:30:15 2006
+++ ext/sqlite/sqlite.c	Sun Jun 10 16:14:39 2007
@@@@ -72,7 +72,10 @@@@ extern int sqlite_encode_binary(const un
 extern int sqlite_decode_binary(const unsigned char *in, unsigned char *out);
 
 #define php_sqlite_encode_binary(in, n, out) sqlite_encode_binary((const unsigned char *)in, n, (unsigned char *)out)
-#define php_sqlite_decode_binary(in, out)    sqlite_decode_binary((const unsigned char *)in, (unsigned char *)out)
+#define php_sqlite_decode_binary(in, out)    (	\
+	(!in || !*in) ? 0 : \
+		sqlite_decode_binary((const unsigned char *)in, (unsigned char *)out) \
+)
 
 static int sqlite_count_elements(zval *object, long *count TSRMLS_DC);
 
@


1.1.2.1
log
@assorted security patches, from debian
@
text
@a0 15
$OpenBSD$
--- ext/sqlite/sqlite.c.orig	Tue Apr 18 16:30:15 2006
+++ ext/sqlite/sqlite.c	Sun Jun 10 16:14:39 2007
@@@@ -72,7 +72,10 @@@@ extern int sqlite_encode_binary(const un
 extern int sqlite_decode_binary(const unsigned char *in, unsigned char *out);
 
 #define php_sqlite_encode_binary(in, n, out) sqlite_encode_binary((const unsigned char *)in, n, (unsigned char *)out)
-#define php_sqlite_decode_binary(in, out)    sqlite_decode_binary((const unsigned char *)in, (unsigned char *)out)
+#define php_sqlite_decode_binary(in, out)    (	\
+	(!in || !*in) ? 0 : \
+		sqlite_decode_binary((const unsigned char *)in, (unsigned char *)out) \
+)
 
 static int sqlite_count_elements(zval *object, long *count TSRMLS_DC);
 
@

