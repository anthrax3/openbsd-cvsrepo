head	1.72;
access;
symbols
	OPENBSD_4_9:1.67.0.2
	OPENBSD_4_9_BASE:1.67
	OPENBSD_4_8:1.60.0.2
	OPENBSD_4_8_BASE:1.60
	OPENBSD_4_7:1.57.0.2
	OPENBSD_4_7_BASE:1.57
	OPENBSD_4_6:1.45.0.2
	OPENBSD_4_6_BASE:1.45
	OPENBSD_4_5:1.44.0.2
	OPENBSD_4_5_BASE:1.44
	OPENBSD_4_4:1.43.0.2
	OPENBSD_4_4_BASE:1.43
	OPENBSD_4_3:1.41.0.2
	OPENBSD_4_3_BASE:1.41
	OPENBSD_4_2:1.36.0.2
	OPENBSD_4_2_BASE:1.36
	OPENBSD_4_1:1.32.0.2
	OPENBSD_4_1_BASE:1.32
	OPENBSD_4_0:1.23.0.2
	OPENBSD_4_0_BASE:1.23
	OPENBSD_3_9:1.17.0.2
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.13.0.2
	OPENBSD_3_8_BASE:1.13
	OPENBSD_3_7:1.7.0.2
	OPENBSD_3_7_BASE:1.7
	robert_20041002:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.72
date	2011.07.09.00.28.53;	author robert;	state dead;
branches;
next	1.71;

1.71
date	2011.07.07.01.20.58;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2011.03.30.08.23.37;	author jasper;	state Exp;
branches;
next	1.69;

1.69
date	2011.03.16.15.21.38;	author landry;	state Exp;
branches;
next	1.68;

1.68
date	2011.03.15.19.49.42;	author jasper;	state Exp;
branches;
next	1.67;

1.67
date	2011.01.17.11.47.19;	author sthen;	state Exp;
branches;
next	1.66;

1.66
date	2011.01.03.15.03.03;	author robert;	state Exp;
branches;
next	1.65;

1.65
date	2010.11.22.09.40.48;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2010.11.22.08.36.52;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.62;

1.62
date	2010.10.24.21.40.10;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2010.08.24.09.14.43;	author robert;	state Exp;
branches;
next	1.60;

1.60
date	2010.08.08.10.46.34;	author sthen;	state Exp;
branches;
next	1.59;

1.59
date	2010.04.15.14.29.18;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2010.03.21.09.05.55;	author robert;	state Exp;
branches;
next	1.57;

1.57
date	2010.02.28.23.56.20;	author espie;	state Exp;
branches
	1.57.2.1;
next	1.56;

1.56
date	2010.02.26.18.31.57;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2010.01.01.19.48.23;	author robert;	state Exp;
branches;
next	1.54;

1.54
date	2009.12.22.10.39.28;	author robert;	state Exp;
branches;
next	1.53;

1.53
date	2009.11.12.21.47.10;	author jasper;	state Exp;
branches;
next	1.52;

1.52
date	2009.09.21.20.04.24;	author robert;	state Exp;
branches;
next	1.51;

1.51
date	2009.09.19.13.09.20;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2009.08.26.13.42.30;	author sthen;	state Exp;
branches;
next	1.49;

1.49
date	2009.08.21.20.26.08;	author jolan;	state Exp;
branches;
next	1.48;

1.48
date	2009.08.21.09.44.12;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2009.07.26.22.42.22;	author robert;	state Exp;
branches;
next	1.46;

1.46
date	2009.07.20.16.30.14;	author robert;	state Exp;
branches;
next	1.45;

1.45
date	2009.04.24.08.36.49;	author espie;	state Exp;
branches
	1.45.2.1;
next	1.44;

1.44
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2008.05.20.14.01.45;	author robert;	state Exp;
branches;
next	1.42;

1.42
date	2008.03.30.11.59.56;	author robert;	state Exp;
branches;
next	1.41;

1.41
date	2007.11.14.10.53.50;	author robert;	state Exp;
branches;
next	1.40;

1.40
date	2007.11.05.10.11.10;	author robert;	state Exp;
branches;
next	1.39;

1.39
date	2007.10.30.10.13.22;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2007.09.15.20.38.25;	author merdely;	state Exp;
branches;
next	1.37;

1.37
date	2007.09.05.09.11.34;	author robert;	state Exp;
branches;
next	1.36;

1.36
date	2007.05.15.17.01.01;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2007.05.11.15.05.15;	author robert;	state Exp;
branches;
next	1.34;

1.34
date	2007.04.01.21.37.27;	author robert;	state Exp;
branches;
next	1.33;

1.33
date	2007.03.22.22.43.20;	author robert;	state Exp;
branches;
next	1.32;

1.32
date	2007.02.09.13.48.20;	author bernd;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2006.12.31.13.15.38;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2006.11.30.18.33.04;	author sturm;	state Exp;
branches;
next	1.29;

1.29
date	2006.11.25.11.45.58;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2006.11.24.09.27.33;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2006.11.20.20.57.22;	author robert;	state Exp;
branches;
next	1.26;

1.26
date	2006.11.12.13.40.20;	author robert;	state Exp;
branches;
next	1.25;

1.25
date	2006.10.21.11.44.10;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2006.09.18.09.04.03;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2006.08.04.00.10.42;	author espie;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2006.07.16.22.08.42;	author alek;	state Exp;
branches;
next	1.21;

1.21
date	2006.05.09.14.15.40;	author robert;	state Exp;
branches;
next	1.20;

1.20
date	2006.04.15.14.57.24;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2006.04.14.20.41.48;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2006.04.06.11.26.39;	author otto;	state Exp;
branches;
next	1.17;

1.17
date	2005.12.29.23.06.28;	author sturm;	state Exp;
branches;
next	1.16;

1.16
date	2005.12.21.15.42.06;	author robert;	state Exp;
branches;
next	1.15;

1.15
date	2005.09.16.09.51.28;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.09.10.18.23.00;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2005.07.06.00.50.32;	author kevlo;	state Exp;
branches
	1.13.2.1;
next	1.12;

1.12
date	2005.06.06.17.25.33;	author robert;	state Exp;
branches;
next	1.11;

1.11
date	2005.05.18.06.59.37;	author kevlo;	state Exp;
branches;
next	1.10;

1.10
date	2005.05.12.19.09.14;	author robert;	state Exp;
branches;
next	1.9;

1.9
date	2005.04.10.12.21.02;	author robert;	state Exp;
branches;
next	1.8;

1.8
date	2005.04.04.21.13.22;	author robert;	state Exp;
branches;
next	1.7;

1.7
date	2005.03.16.21.09.21;	author robert;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2005.03.16.20.09.41;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2004.12.21.12.15.02;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2004.12.11.13.29.22;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.18.15.58.53;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2004.10.13.01.47.32;	author danh;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.02.11.32.35;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.02.11.32.35;	author robert;	state Exp;
branches;
next	;

1.7.2.1
date	2005.05.23.20.20.08;	author robert;	state Exp;
branches;
next	1.7.2.2;

1.7.2.2
date	2005.05.24.16.53.19;	author robert;	state Exp;
branches;
next	1.7.2.3;

1.7.2.3
date	2005.10.27.20.06.08;	author sturm;	state Exp;
branches;
next	;

1.13.2.1
date	2005.11.01.11.50.22;	author sturm;	state Exp;
branches;
next	;

1.23.2.1
date	2007.06.17.07.55.52;	author sturm;	state Exp;
branches;
next	1.23.2.2;

1.23.2.2
date	2007.06.17.20.35.18;	author sturm;	state Exp;
branches;
next	;

1.32.2.1
date	2007.06.17.07.54.57;	author sturm;	state Exp;
branches;
next	1.32.2.2;

1.32.2.2
date	2007.06.17.20.38.18;	author sturm;	state Exp;
branches;
next	;

1.44.2.1
date	2009.08.13.01.04.31;	author william;	state Exp;
branches;
next	1.44.2.2;

1.44.2.2
date	2009.08.22.16.58.14;	author william;	state Exp;
branches;
next	1.44.2.3;

1.44.2.3
date	2009.09.29.00.07.15;	author william;	state Exp;
branches;
next	;

1.45.2.1
date	2010.04.14.03.17.20;	author william;	state Exp;
branches;
next	;

1.57.2.1
date	2010.05.27.03.55.15;	author william;	state Exp;
branches;
next	;


desc
@@


1.72
log
@bye bye
@
text
@# $OpenBSD: Makefile,v 1.71 2011/07/07 01:20:58 ajacoutot Exp $

FULLPKGNAME-main=	php5-extensions-${V}
FULLPKGPATH-main=	www/php5/extensions,-main
COMMENT-main=		informational package about PHP5 extensions

MULTI_PACKAGES=	-main

DISTFILES=		php-${V}.tar.gz

# extensions get installed under the apache chroot
PREFIX?=		${CHROOT_DIR}

FLAVORS=		no_x11
FLAVOR?=

#WANTLIB=		stdc++ m

MODULES=		devel/gettext converters/libiconv

CONFIGURE_ARGS+=	--with-apxs=/usr/sbin/apxs \
			--with-iconv-dir=${LOCALBASE} \
			--with-iconv=${LOCALBASE} \
			--disable-dom \
			--disable-cgi

GRAPHIC_LIB_DEPENDS =	graphics/jpeg \
			graphics/png
GRAPHIC_WANTLIB =	jpeg>=62 png>=3

GRAPHIC_CONFIG=		--with-jpeg-dir=${LOCALBASE} \
			--with-png-dir=${LOCALBASE} \
			--with-zlib-dir=/usr

# bz2
PSEUDO_FLAVORS+=	no_bz2
.if ${FLAVOR:L:Mno_bz2}
CONFIGURE_ARGS+=	--without-bz2
.else
MULTI_PACKAGES+=	-bz2
COMMENT-bz2=		bzip2 compression extensions for php5
CONFIGURE_ARGS+=	--with-bz2=shared,${LOCALBASE}
LIB_DEPENDS-bz2 =	archivers/bzip2
WANTLIB-bz2 =		bz2>=10
.endif

# curl
PSEUDO_FLAVORS+=	no_curl
.if ${FLAVOR:L:Mno_curl}
CONFIGURE_ARGS+=	--without-curl
.else
MULTI_PACKAGES+=	-curl
COMMENT-curl=		curl URL library extensions for php5
CONFIGURE_ARGS+=	--with-curl=shared,${LOCALBASE}
LIB_DEPENDS-curl =	net/curl
WANTLIB-curl =		curl>=2 crypto idn ssl z
.endif

# dba
PSEUDO_FLAVORS+=	no_dba
.if ${FLAVOR:L:Mno_dba}
CONFIGURE_ARGS+=	--disable-dba
.else
MULTI_PACKAGES+=	-dba
COMMENT-dba=		dba GDBM access extensions for php5
CONFIGURE_ARGS+=	--enable-dba=shared --with-gdbm=${LOCALBASE}
LIB_DEPENDS-dba =	databases/gdbm
WANTLIB-dba =		gdbm>=2
.endif

# dbase
PSEUDO_FLAVORS+=	no_dbase
.if ${FLAVOR:L:Mno_dbase}
CONFIGURE_ARGS+=	--disable-dbase
.else
MULTI_PACKAGES+=	-dbase
COMMENT-dbase=		dBase database access extensions for php5
CONFIGURE_ARGS+=	--enable-dbase=shared
LIB_DEPENDS-dbase =
WANTLIB-dbase =
.endif

# gd
PSEUDO_FLAVORS+=	no_gd
.if ${FLAVOR:L:Mno_gd}
CONFIGURE_ARGS+=	--without-gd --without-xpm-dir --without-ttf \
			--without-freetype-dir 
.else
MULTI_PACKAGES+=	-gd
COMMENT-gd=		image manipulation extensions for php5
LIB_DEPENDS-gd =	${GRAPHIC_LIB_DEPENDS} devel/t1lib
WANTLIB-gd =		t1>=5 z ${GRAPHIC_WANTLIB}
CONFIGURE_ENV+=		CPPFLAGS="${LOCALBASE}/include/libpng"
CONFIGURE_ARGS+=	--with-gd=shared ${GRAPHIC_CONFIG} \
			--with-t1lib=${LOCALBASE} \
			--with-freetype-dir=${X11BASE}

. if ${FLAVOR:L:Mno_x11}
CONFIGURE_ARGS+=	--without-xpm-dir --without-freetype-dir
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
FULLPKGPATH-gd=		www/php5/extensions,-gd,no_x11
. else
FULLPKGNAME-gd=		php5-gd-${V}
CONFIGURE_ARGS+=	--with-xpm-dir=${X11BASE}
WANTLIB-gd +=		X11 Xpm freetype
. endif
.endif

# gmp
PSEUDO_FLAVORS+=	no_gmp
.if ${FLAVOR:L:Mno_gmp}
CONFIGURE_ARGS+=	--without-gmp
.else
MULTI_PACKAGES+=	-gmp
COMMENT-gmp=		gmp math library support for php5
CONFIGURE_ARGS+=	--with-gmp=shared,${LOCALBASE}
LIB_DEPENDS-gmp =	devel/gmp
WANTLIB-gmp =		gmp>=4
.endif

# imap
PSEUDO_FLAVORS+=	no_imap
.if ${FLAVOR:L:Mno_imap}
CONFIGURE_ARGS+=	--without-imap --without-kerberos
.else
MULTI_PACKAGES+=	-imap
COMMENT-imap=		imap, pop3 and nntp extensions for php5
CONFIGURE_ARGS+=	--with-imap=shared,${LOCALBASE} \
			--with-kerberos=/usr --with-imap-ssl
LIB_DEPENDS-imap =	mail/imap-uw,-c-client
WANTLIB-imap =		c-client>=5 gssapi crypto krb5 ssl z

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/etc
	${INSTALL_DATA} ${FILESDIR}/master.passwd.imap ${PREFIX}/etc
	pwd_mkdb -d ${PREFIX}/etc master.passwd.imap
.endif

# ldap
PSEUDO_FLAVORS+=	no_ldap
.if ${FLAVOR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-ldap
.else
MULTI_PACKAGES+=	-ldap
COMMENT-ldap=		ldap protocol extensions for php5
CONFIGURE_ARGS+=	--with-ldap=shared,${LOCALBASE}
LIB_DEPENDS-ldap =	databases/openldap
WANTLIB-ldap =		ldap>=2 lber
.endif

# mbstring
PSEUDO_FLAVORS+=	no_mbstring
.if ${FLAVOR:L:Mno_mbstring}
CONFIGURE_ARGS+=	--disable-mbstring
.else
MULTI_PACKAGES+=	-mbstring
COMMENT-mbstring=	multibyte characters extensions for php5
CONFIGURE_ARGS+=	--enable-mbstring=shared
LIB_DEPENDS-mbstring =
WANTLIB-mbstring =
.endif

# mcrypt
PSEUDO_FLAVORS+=	no_mcrypt
.if ${FLAVOR:L:Mno_mcrypt}
CONFIGURE_ARGS+=	--without-mcrypt
.else
MULTI_PACKAGES+=	-mcrypt
COMMENT-mcrypt=		mcrypt encryption/decryption extensions for php5
CONFIGURE_ARGS+=	--with-mcrypt=shared,${LOCALBASE}
LIB_DEPENDS-mcrypt =	security/libmcrypt devel/libtool,-ltdl
WANTLIB-mcrypt =	mcrypt ltdl>=1
.endif

# mhash
PSEUDO_FLAVORS+=	no_mhash
.if ${FLAVOR:L:Mno_mhash}
CONFIGURE_ARGS+=	--without-mhash
.else
MULTI_PACKAGES+=	-mhash
COMMENT-mhash=		mhash extensions for php5
CONFIGURE_ARGS+=	--with-mhash=shared,${LOCALBASE}
LIB_DEPENDS-mhash =	security/mhash
WANTLIB-mhash =		mhash>=2
.endif

# mysql
PSEUDO_FLAVORS+=	no_mysql
.if ${FLAVOR:L:Mno_mysql}
CONFIGURE_ARGS+=	--without-mysql
.else
MULTI_PACKAGES+=	-mysql
COMMENT-mysql=		mysql database access extensions for php5
CONFIGURE_ARGS+=	--with-mysql=shared,${LOCALBASE}
LIB_DEPENDS-mysql =	databases/mysql
WANTLIB-mysql =		lib/mysql/mysqlclient>=10
.endif

# mysqli
PSEUDO_FLAVORS+=	no_mysqli
.if ${FLAVOR:L:Mno_mysqli}
CONFIGURE_ARGS+=	--without-mysqli
.else
MULTI_PACKAGES+=	-mysqli
COMMENT-mysqli=		mysql database access extensions for php5
CONFIGURE_ARGS+=	--with-mysqli=shared,${LOCALBASE}/bin/mysql_config
LIB_DEPENDS-mysqli =	databases/mysql
WANTLIB-mysqli =	lib/mysql/mysqlclient>=10 crypto m ssl z
.endif

# ncurses
PSEUDO_FLAVORS+=	no_ncurses
.if ${FLAVOR:L:Mno_ncurses}
CONFIGURE_ARGS+=	--without-ncurses
.else
MULTI_PACKAGES+=	-ncurses
COMMENT-ncurses=	ncurses extensions for php5
CONFIGURE_ARGS+=	--with-ncurses=shared,${LOCALBASE}
LIB_DEPENDS-ncurses =
WANTLIB-ncurses =	ncurses panel
.endif

# odbc
PSEUDO_FLAVORS+=	no_odbc
.if ${FLAVOR:L:Mno_odbc}
CONFIGURE_ARGS+=	--without-iodbc
.else
MULTI_PACKAGES+=	-odbc
COMMENT-odbc=		odbc database access extensions for php5
CONFIGURE_ARGS+=        --with-iodbc=shared
LIB_DEPENDS-odbc =	databases/iodbc
WANTLIB-odbc =		iodbc>=2
.endif

# pdo-mysql
PSEUDO_FLAVORS+=	no_pdo_mysql
.if ${FLAVOR:L:Mno_pdo_mysql}
CONFIGURE_ARGS+=	--without-pdo-mysql
.else
MULTI_PACKAGES+=	-pdo_mysql
COMMENT-pdo_mysql=	PDO mysql database access extensions for php5
CONFIGURE_ARGS+=	--with-pdo-mysql=shared,${LOCALBASE}
LIB_DEPENDS-pdo_mysql =	databases/mysql
WANTLIB-pdo_mysql =	lib/mysql/mysqlclient>=10 crypto m ssl z
.endif

# pdo-pgsql
PSEUDO_FLAVORS+=	no_pdo_pgsql
.if ${FLAVOR:L:Mno_pdo_pgsql}
CONFIGURE_ARGS+=	--without-pdo-pgsql
.else
MULTI_PACKAGES+=	-pdo_pgsql
COMMENT-pdo_pgsql=	PDO database access extensions for php5
CONFIGURE_ARGS+=        --with-pdo-pgsql=shared,${LOCALBASE}
LIB_DEPENDS-pdo_pgsql =	databases/postgresql
WANTLIB-pdo_pgsql =	pq>=2
.endif

# pdo-sqlite
PSEUDO_FLAVORS+=	no_pdo_sqlite
.if ${FLAVOR:L:Mno_pdo_sqlite}
CONFIGURE_ARGS+=	--without-pdo-sqlite
.else
MULTI_PACKAGES+=	-pdo_sqlite
COMMENT-pdo_sqlite=	PDO sqlite database access extensions for php5
CONFIGURE_ARGS+=	--with-pdo-sqlite=shared,${LOCALBASE} --enable-sqlite-utf8
LIB_DEPENDS-pdo_sqlite=	databases/sqlite3
WANTLIB-pdo_sqlite =	sqlite3>=8
.endif

# pgsql
PSEUDO_FLAVORS+=	no_pgsql
.if ${FLAVOR:L:Mno_pgsql}
CONFIGURE_ARGS+=	--without-pgsql
.else
MULTI_PACKAGES+=	-pgsql
COMMENT-pgsql=		pgsql database access extensions for php5
CONFIGURE_ARGS+=	--with-pgsql=shared,${LOCALBASE}
LIB_DEPENDS-pgsql =	databases/postgresql
WANTLIB-pgsql =		pq>=2
.endif

# pspell
PSEUDO_FLAVORS+=	no_pspell
.if ${FLAVOR:L:Mno_pspell}
CONFIGURE_ARGS+=	--without-pspell
.else
MULTI_PACKAGES+=	-pspell
COMMENT-pspell=		pspell library extensions for php5
CONFIGURE_ARGS+=	--with-pspell=shared,${LOCALBASE}
LIB_DEPENDS-pspell =	textproc/aspell/core
WANTLIB-pspell =	aspell>=16 pspell>=16
.endif

# shmop
PSEUDO_FLAVORS+=	no_shmop
.if ${FLAVOR:L:Mno_shmop}
CONFIGURE_ARGS+=	--disable-shmop
.else
MULTI_PACKAGES+=	-shmop
COMMENT-shmop=		shared memory extensions for php5
CONFIGURE_ARGS+=	--enable-shmop=shared
LIB_DEPENDS-shmop =
WANTLIB-shmop =
.endif

# soap
PSEUDO_FLAVORS+=	no_soap
.if ${FLAVOR:L:Mno_soap}
CONFIGURE_ARGS+=	--disable-soap
.else
MULTI_PACKAGES+=	-soap
COMMENT-soap=		SOAP functions for php5
CONFIGURE_ARGS+=	--enable-soap=shared
LIB_DEPENDS-soap =	textproc/libxml
WANTLIB-soap =		m xml2 z ${MODLIBICONV_WANTLIB}
REVISION-soap = 	1
.endif

# snmp
PSEUDO_FLAVORS+=	no_snmp
.if ${FLAVOR:L:Mno_snmp}
CONFIGURE_ARGS+=	--without-snmp
.else
MULTI_PACKAGES+=	-snmp
COMMENT-snmp=		snmp protocol extensions for php5
CONFIGURE_ARGS+=	--with-snmp=shared,${LOCALBASE} --enable-ucd-snmp-hack
LIB_DEPENDS-snmp =	net/net-snmp
WANTLIB-snmp =		crypto netsnmp>=6.2
.endif

# sqlite
PSEUDO_FLAVORS+=	no_sqlite
.if ${FLAVOR:L:Mno_sqlite}
CONFIGURE_ARGS+=	--without-sqlite
.else
MULTI_PACKAGES+=	-sqlite
COMMENT-sqlite=		sqlite database access extensions for php5
CONFIGURE_ARGS+=	--with-sqlite=shared,${LOCALBASE} --enable-sqlite-utf8
LIB_DEPENDS-sqlite =	databases/sqlite
WANTLIB-sqlite =	sqlite>=8
.endif

# sybase-ct
PSEUDO_FLAVORS+=	no_sybase_ct
.if ${FLAVOR:L:Mno_sybase_ct}
CONFIGURE_ARGS+=	--without-sybase-ct
.else
MULTI_PACKAGES+=	-sybase_ct
COMMENT-sybase_ct=	sybase database access extensions for php5
CONFIGURE_ARGS+=        --with-sybase-ct=shared,${LOCALBASE}
LIB_DEPENDS-sybase_ct =	databases/freetds
WANTLIB-sybase_ct =	ct
.endif

# pdo-dblib
PSEUDO_FLAVORS+=	no_pdo_dblib
.if ${FLAVOR:L:Mno_pdo_dblib}
CONFIGURE_ARGS+=	--without-pdo-dblib
.else
MULTI_PACKAGES+=	-pdo_dblib
COMMENT-pdo_dblib=	PDO DB-LIB support for php5
CONFIGURE_ARGS+=        --with-pdo-dblib=shared,${LOCALBASE}
LIB_DEPENDS-pdo_dblib=	databases/freetds
WANTLIB-pdo_dblib =	sybdb>=6
.endif

# mssql
PSEUDO_FLAVORS+=	no_mssql
.if ${FLAVOR:L:Mno_mssql}
CONFIGURE_ARGS+=	--without-mssql
.else
MULTI_PACKAGES+=	-mssql
COMMENT-mssql=		microsoft sql access extensions for php5
CONFIGURE_ARGS+=        --with-mssql=shared,${LOCALBASE}
LIB_DEPENDS-mssql =	databases/freetds
WANTLIB-mssql =		sybdb>=6
.endif

# tidy
PSEUDO_FLAVORS+=	no_tidy
.if ${FLAVOR:L:Mno_tidy}
CONFIGURE_ARGS+=	--without-tidy
.else
MULTI_PACKAGES+=	-tidy
COMMENT-tidy=		tidy HTML cleaner bindings
CONFIGURE_ARGS+=	--with-tidy=shared,${LOCALBASE}
LIB_DEPENDS-tidy =	www/tidyp
WANTLIB-tidy =		tidyp
REVISION-tidy =		0
.endif

# xml-rpc
PSEUDO_FLAVORS+=	no_xmlrpc
.if ${FLAVOR:L:Mno_xmlrpc}
CONFIGURE_ARGS+=	--without-xmlrpc
.else
MULTI_PACKAGES+=	-xmlrpc
COMMENT-xmlrpc=		XML RPC functions for php5
CONFIGURE_ARGS+=	--with-xmlrpc=shared
LIB_DEPENDS-xmlrpc =	textproc/libxml
WANTLIB-xmlrpc =	iconv m xml2 z
REVISION-xmlrpc =	0
.endif

# xsl
PSEUDO_FLAVORS+=	no_xsl
.if ${FLAVOR:L:Mno_xsl}
CONFIGURE_ARGS+=	--without-xsl
.else
MULTI_PACKAGES+=	-xsl
COMMENT-xsl=		XSL functions for php5
CONFIGURE_ARGS+=	--with-xsl=shared --enable-dom
LIB_DEPENDS-xsl=	textproc/libxslt
WANTLIB-xsl=		xslt>=3 exslt iconv m xml2 z
.endif

.for i in ${MULTI_PACKAGES}
FULLPKGNAME${i} ?=	php5${i}-${V}
FULLPKGPATH${i} ?=	www/php5/extensions,${i}
RUN_DEPENDS${i}=	php5-core-${V}:www/php5/core
MODULE_NAME${i}=	${i:S/-//g}
.endfor

MESSAGE=		${PKGDIR}/MESSAGE
UNMESSAGE=		${PKGDIR}/UNMESSAGE

SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE V

LIB_DEPENDS-main=
MESSAGE-main=		${PKGDIR}/DESCR-main
WANTLIB-main=

BUILD_DEPENDS+=		textproc/libxml

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/${MODULES_SUBDIR}
	${INSTALL_DATA_DIR} ${PREFIX}/conf/php5.sample
.for m in ${MULTI_PACKAGES:N-main:S/-//g}
	${INSTALL_DATA} ${WRKBUILD}/modules/${m}.so \
		${PREFIX}/${MODULES_SUBDIR}/${m}.so
	@@echo "extension=${m}.so" > \
		${PREFIX}/conf/php5.sample/${m}.ini
.endfor

.include <bsd.port.mk>
@


1.71
log
@libiconv MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/03/30 08:23:37 jasper Exp $
@


1.70
log
@- add missing LIB_DEPENDS for -soap and -xmlrpc

ok robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/03/16 15:21:38 landry Exp $
d19 1
a19 1
MODULES=		devel/gettext
d316 2
a317 2
WANTLIB-soap =		m xml2 z iconv
REVISION-soap = 	0
@


1.69
log
@Bump REVISION-tidy after dependency change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/03/15 19:49:42 jasper Exp $
d315 1
a315 1
LIB_DEPENDS-soap =
d317 1
d401 1
a401 1
LIB_DEPENDS-xmlrpc =
d403 1
@


1.68
log
@- switch from www/tidy to www/tidyp which is API compatible

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/01/17 11:47:19 sthen Exp $
d389 1
@


1.67
log
@SECURITY update to 5.2.17, and sync WANTLIB-imap while there.
lang/php will follow later.  ok robert@@ (maintainer) aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/01/03 15:03:03 robert Exp $
d386 3
a388 3
CONFIGURE_ARGS+=	--with-tidy=shared
LIB_DEPENDS-tidy =	www/tidy
WANTLIB-tidy =		tidy
@


1.66
log
@Update to 5.2.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/11/22 09:40:48 espie Exp $
d131 1
a131 1
WANTLIB-imap =		c-client>=5 gssapi crypto krb5 ssl
@


1.65
log
@missed a few depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/11/22 08:36:52 espie Exp $
d328 1
a328 1
WANTLIB-snmp =		netsnmp>=6.2
@


1.64
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/11/06 16:07:00 espie Exp $
d431 1
a431 1
BUILD_DEPENDS+=		::textproc/libxml
@


1.63
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/10/24 21:40:10 ajacoutot Exp $
d27 3
a29 3
GRAPHIC_LIB_DEPENDS =	::graphics/jpeg \
			::graphics/png
GRAPHIC_WANTLIB =	jpeg.>=62 png.>=3
d43 2
a44 2
LIB_DEPENDS-bz2 =	::archivers/bzip2
WANTLIB-bz2 =		bz2.>=10
d55 2
a56 2
LIB_DEPENDS-curl =	::net/curl
WANTLIB-curl =		curl.>=2 crypto idn ssl z
d67 2
a68 2
LIB_DEPENDS-dba =	::databases/gdbm
WANTLIB-dba =		gdbm.>=2
d91 2
a92 2
LIB_DEPENDS-gd =	${GRAPHIC_LIB_DEPENDS} ::devel/t1lib
WANTLIB-gd =		t1.>=5 z ${GRAPHIC_WANTLIB}
d117 2
a118 2
LIB_DEPENDS-gmp =	::devel/gmp
WANTLIB-gmp =		gmp.>=4
d130 2
a131 2
LIB_DEPENDS-imap =	::mail/imap-uw,-c-client
WANTLIB-imap =		c-client.>=5 gssapi crypto krb5 ssl
d147 2
a148 2
LIB_DEPENDS-ldap =	::databases/openldap
WANTLIB-ldap =		ldap.>=2 lber
d171 2
a172 2
LIB_DEPENDS-mcrypt =	::security/libmcrypt ::devel/libtool,-ltdl
WANTLIB-mcrypt =	mcrypt ltdl.>=1
d183 2
a184 2
LIB_DEPENDS-mhash =	::security/mhash
WANTLIB-mhash =		mhash.>=2
d195 2
a196 2
LIB_DEPENDS-mysql =	::databases/mysql
WANTLIB-mysql =		lib/mysql/mysqlclient.>=10
d207 2
a208 2
LIB_DEPENDS-mysqli =	::databases/mysql
WANTLIB-mysqli =	lib/mysql/mysqlclient.>=10 crypto m ssl z
d231 2
a232 2
LIB_DEPENDS-odbc =	::databases/iodbc
WANTLIB-odbc =		iodbc.>=2
d243 2
a244 2
LIB_DEPENDS-pdo_mysql =	::databases/mysql
WANTLIB-pdo_mysql =	lib/mysql/mysqlclient.>=10 crypto m ssl z
d255 2
a256 2
LIB_DEPENDS-pdo_pgsql =	:postgresql-client-*:databases/postgresql
WANTLIB-pdo_pgsql =	pq.>=2
d267 2
a268 2
LIB_DEPENDS-pdo_sqlite=	::databases/sqlite3
WANTLIB-pdo_sqlite =	sqlite3.>=8
d279 2
a280 2
LIB_DEPENDS-pgsql =	:postgresql-client-*:databases/postgresql
WANTLIB-pgsql =		pq.>=2
d291 2
a292 2
LIB_DEPENDS-pspell =	::textproc/aspell/core
WANTLIB-pspell =	aspell.>=16.0 pspell.>=16.0
d327 2
a328 2
LIB_DEPENDS-snmp =	::net/net-snmp
WANTLIB-snmp =		netsnmp.>=6.2
d339 2
a340 2
LIB_DEPENDS-sqlite =	::databases/sqlite
WANTLIB-sqlite =	sqlite.>=8
d351 1
a351 1
LIB_DEPENDS-sybase_ct =	::databases/freetds
d363 2
a364 2
LIB_DEPENDS-pdo_dblib=	::databases/freetds
WANTLIB-pdo_dblib =	sybdb.>=6
d375 2
a376 2
LIB_DEPENDS-mssql =	::databases/freetds
WANTLIB-mssql =		sybdb.>=6
d387 1
a387 1
LIB_DEPENDS-tidy =	::www/tidy
d411 2
a412 2
LIB_DEPENDS-xsl=	::textproc/libxslt
WANTLIB-xsl=		xslt.>=3 exslt iconv m xml2 z
d418 1
a418 1
RUN_DEPENDS${i}=	:php5-core-${V}:www/php5/core
@


1.62
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/08/24 09:14:43 robert Exp $
d27 3
a29 2
GRAPHIC_DEPENDS=	jpeg.>=62::graphics/jpeg \
			png.>=3::graphics/png
d43 2
a44 1
LIB_DEPENDS-bz2=	bz2.>=10::archivers/bzip2
d55 2
a56 2
LIB_DEPENDS-curl=	curl.>=2::net/curl
WANTLIB-curl=		${WANTLIB} crypto idn ssl z
d67 2
a68 1
LIB_DEPENDS-dba=	gdbm.>=2::databases/gdbm
d79 2
a80 1
LIB_DEPENDS-dbase=
d91 2
a92 2
LIB_DEPENDS-gd=		${GRAPHIC_DEPENDS} t1.>=5::devel/t1lib
WANTLIB-gd=		${WANTLIB} z
d105 1
a105 1
WANTLIB-gd+=		X11 Xpm freetype
d117 2
a118 1
LIB_DEPENDS-gmp=	gmp.>=4::devel/gmp
d130 2
a131 2
LIB_DEPENDS-imap=	c-client.>=5::mail/imap-uw,-c-client
WANTLIB-imap=		${WANTLIB} gssapi crypto krb5 ssl
d147 2
a148 1
LIB_DEPENDS-ldap=	ldap.>=2,lber::databases/openldap
d159 2
a160 1
LIB_DEPENDS-mbstring=
d171 2
a172 1
LIB_DEPENDS-mcrypt=	mcrypt::security/libmcrypt ltdl.>=1::devel/libtool,-ltdl
d183 2
a184 1
LIB_DEPENDS-mhash=	mhash.>=2::security/mhash
d195 2
a196 1
LIB_DEPENDS-mysql=	lib/mysql/mysqlclient.>=10::databases/mysql
d207 2
a208 2
LIB_DEPENDS-mysqli=	lib/mysql/mysqlclient.>=10::databases/mysql
WANTLIB-mysqli=		${WANTLIB} crypto m ssl z
d219 2
a220 2
LIB_DEPENDS-ncurses=
WANTLIB-ncurses=	${WANTLIB} ncurses panel
d231 2
a232 1
LIB_DEPENDS-odbc=	iodbc.>=2::databases/iodbc
d243 2
a244 2
LIB_DEPENDS-pdo_mysql=	lib/mysql/mysqlclient.>=10::databases/mysql
WANTLIB-pdo_mysql=	${WANTLIB} crypto m ssl z
d255 2
a256 1
LIB_DEPENDS-pdo_pgsql=	pq.>=2:postgresql-client-*:databases/postgresql
d267 2
a268 1
LIB_DEPENDS-pdo_sqlite=	sqlite3.>=8::databases/sqlite3
d279 2
a280 1
LIB_DEPENDS-pgsql=	pq.>=2:postgresql-client-*:databases/postgresql
d291 2
a292 1
LIB_DEPENDS-pspell=	aspell.>=16.0,pspell.>=16.0::textproc/aspell/core
d303 2
a304 1
LIB_DEPENDS-shmop=
d315 2
a316 2
LIB_DEPENDS-soap=
WANTLIB-soap=		${WANTLIB} m xml2 z iconv
d327 2
a328 1
LIB_DEPENDS-snmp=	netsnmp.>=6.2::net/net-snmp
d339 2
a340 1
LIB_DEPENDS-sqlite=	sqlite.>=8::databases/sqlite
d351 2
a352 1
LIB_DEPENDS-sybase_ct=	ct::databases/freetds
d363 2
a364 1
LIB_DEPENDS-pdo_dblib=	sybdb.>=6::databases/freetds
d375 2
a376 1
LIB_DEPENDS-mssql=	sybdb.>=6::databases/freetds
d387 2
a388 1
LIB_DEPENDS-tidy=	tidy::www/tidy
d399 2
a400 2
LIB_DEPENDS-xmlrpc=
WANTLIB-xmlrpc=		${WANTLIB} iconv m xml2 z
d411 2
a412 2
LIB_DEPENDS-xsl=	xslt.>=3,exslt::textproc/libxslt
WANTLIB-xsl=		${WANTLIB} iconv m xml2 z
@


1.61
log
@Update to 5.2.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/08/08 10:46:34 sthen Exp $
a98 1
USE_X11=		yes
@


1.60
log
@SECURITY: limited fixes cherry picked from 5.2.14.  If upstream had
mentioned the release on their announcements list maybe we would have
had time to get the full update in but, as it is, we just found out
about it and there are too many changes to test properly at short
notice, so we are just fixing these for now.

CVE-2010-2225: fix SplObjectStorage unserialization, upstream r300843

CVE-2010-0397: null pointer dereference when processing invalid XML-RPC
requests, upstream r296152

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/04/15 14:29:18 ajacoutot Exp $
a5 2
REVISION=		0
REVISION-xmlrpc=	1
d17 1
a17 1
WANTLIB=		stdc++ m
d199 1
a199 1
WANTLIB-mysqli=		${WANTLIB} crypto ssl z
d234 1
a234 1
WANTLIB-pdo_mysql=	${WANTLIB} crypto ssl z
d301 1
a301 1
WANTLIB-soap=		${WANTLIB} xml2 z iconv
d379 1
a379 1
WANTLIB-xmlrpc=		${WANTLIB} iconv xml2 z
d391 1
a391 1
WANTLIB-xsl=		${WANTLIB} iconv xml2 z
@


1.59
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.

sthen@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/03/21 09:05:55 robert Exp $
d6 2
d397 1
a397 1
FULLPKGNAME${i} ?=	php5${i}-${V}p0
@


1.58
log
@update to version 5.2.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/02/28 23:56:20 espie Exp $
d395 1
a395 1
FULLPKGNAME${i} ?=	php5${i}-${V}
@


1.57
log
@oopsie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/02/26 18:31:57 espie Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}p1
d395 1
a395 1
FULLPKGNAME${i} ?=	php5${i}-${V}p0
@


1.57.2.1
log
@SECURITY UPDATE to 5.2.13

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/02/28 23:56:20 espie Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}
@


1.56
log
@fix FULLPKGPATHs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/01/01 19:48:23 robert Exp $
d97 1
@


1.55
log
@- add mssql and pdo_dblib extensions from Antti Harri <iku@@openbsd.fi>
- fix the odbc and soap configure args when they are disabled
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/12/22 10:39:28 robert Exp $
d3 2
a4 1
FULLPKGNAME-main=	php5-extensions-${V}p0
d99 1
d394 2
a395 1
FULLPKGNAME${i} ?=	php5${i}-${V}
@


1.54
log
@Update to php-5.2.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2009/11/12 21:47:10 jasper Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}
d214 1
a214 1
CONFIGURE_ARGS+=	--without-odbc
d292 1
a292 1
CONFIGURE_ARGS+=	--without-soap
d332 22
@


1.53
log
@- add tidy bindgins

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/09/21 20:04:24 robert Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}p0
@


1.52
log
@Update to php 5.2.11;

 Security Enhancements and Fixes in PHP 5.2.11:

    * Fixed certificate validation inside php_openssl_apply_verification_policy. (Ryan Sleevi, Ilia)
    * Fixed sanity check for the color index in imagecolortransparent(). (Pierre)
    * Added missing sanity checks around exif processing. (Ilia)
    * Fixed bug #44683 (popen crashes when an invalid mode is passed). (Pierre)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2009/09/19 13:09:20 ajacoutot Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}
d332 11
@


1.51
log
@Zap trailing blank space.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/08/26 13:42:30 sthen Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}p1
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p3-no_x11
d359 1
a359 1
FULLPKGNAME${i} ?=	php5${i}-${V}p3
@


1.50
log
@Change DESCR-main to talk about symlinks not phpxs, bump FULLPKGNAME-main.
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2009/08/21 20:26:08 jolan Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}p0
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p2-no_x11
d359 1
a359 1
FULLPKGNAME${i} ?=	php5${i}-${V}p2
@


1.49
log
@remove php5/extensions,-zip in favor of pecl-zip; they conflict and
pecl-zip is more up to date/stable

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2009/08/21 09:44:12 sthen Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}
@


1.48
log
@update Suhosin extension to 0.9.29; fixes segfaults with session encryption.
revert workaround (change default back to encrypted sessions).

ok robert@@, similar diff jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/07/26 22:42:22 robert Exp $
a355 12
.endif

# zip
PSEUDO_FLAVORS+=	no_zip
.if ${FLAVOR:L:Mno_zip}
CONFIGURE_ARGS+=	--disable-zip
.else
MULTI_PACKAGES+=	-zip
COMMENT-zip=		zip functions for php5
CONFIGURE_ARGS+=	--enable-zip=shared
LIB_DEPENDS-zip=
WANTLIB-zip=		${WANTLIB} z
@


1.47
log
@patch-ext_suhosin_suhosin_c has to go the the shared patch
dir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/07/20 16:30:14 robert Exp $
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p1-no_x11
d371 1
a371 1
FULLPKGNAME${i} ?=	php5${i}-${V}p1
@


1.46
log
@Make suhosin.session.encrypt=off by default because there are some problems
with php 5.2.10 and the suhosin patch. noted by william@@ and people on ports@@
It's going to be re-enabled when it gets fixed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/04/24 08:36:49 espie Exp $
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p0-no_x11
d371 1
a371 1
FULLPKGNAME${i} ?=	php5${i}-${V}p0
@


1.45
log
@build ZipArchive, okay robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2008/09/18 13:37:41 ajacoutot Exp $
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
d371 1
a371 1
FULLPKGNAME${i} ?=	php5${i}-${V}
@


1.45.2.1
log
@MFC:

SECURITY FIX

php5-5.2.13

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/04/24 08:36:49 espie Exp $
d214 1
a214 1
CONFIGURE_ARGS+=	--without-iodbc
d292 1
a292 1
CONFIGURE_ARGS+=	--disable-soap
@


1.44
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2008/05/20 14:01:45 robert Exp $
d356 12
@


1.44.2.1
log
@MFC:

Make suhosin.session.encrypt=off by default because there are some problems
with php 5.2.10 and the suhosin patch. noted by william@@ and people on ports@@
It's going to be re-enabled when it gets fixed upstream.

and

patch-ext_suhosin_suhosin_c has to go the the shared patch
dir.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/07/26 22:42:22 robert Exp $
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p1-no_x11
d359 1
a359 1
FULLPKGNAME${i} ?=	php5${i}-${V}p1
@


1.44.2.2
log
@MFC:

update Suhosin extension to 0.9.29; fixes segfaults with session encryption.
revert workaround (change default back to encrypted sessions).

ok sthen@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44.2.1 2009/08/13 01:04:31 william Exp $
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p2-no_x11
d359 1
a359 1
FULLPKGNAME${i} ?=	php5${i}-${V}p2
@


1.44.2.3
log
@MFC:

Update to php 5.2.11;

 Security Enhancements and Fixes in PHP 5.2.11:

    * Fixed certificate validation inside php_openssl_apply_verification_policy. (Ryan Sleevi, Ilia)
    * Fixed sanity check for the color index in imagecolortransparent(). (Pierre)
    * Added missing sanity checks around exif processing. (Ilia)
    * Fixed bug #44683 (popen crashes when an invalid mode is passed). (Pierre)

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/09/21 20:04:24 robert Exp $
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
d359 1
a359 1
FULLPKGNAME${i} ?=	php5${i}-${V}
@


1.43
log
@update to php-5.2.6; from Brad Walker <me@@bradmwalker.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2008/03/30 11:59:56 robert Exp $
d367 1
a367 1
SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE LOCALBASE V
@


1.42
log
@add the pspell extension to the list of built extensions
from James Turner <james@@calminferno.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/11/14 10:53:50 robert Exp $
d275 1
a275 1
LIB_DEPENDS-pspell=	aspell.>=16.0::textproc/aspell/core
a309 1
WANTLIB-snmp=		${WANTLIB} crypto
@


1.41
log
@- update to php-5.2.5
- include the suhosin extension and suhosin patch by default unless
  the no_suhosin flavor is defined
- add all the suhosin configuration options to the sample config
  files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/11/05 10:11:10 robert Exp $
d265 11
@


1.40
log
@Kill the phpxs script that was used for enabling and disabling
the php core module and extenions.
Install a sample configuration file to /var/www/conf/modules.sample
which can be symlinked or copied over to /var/www/conf/modules
so apache is going to pick it up.

Allow php to scan /var/www/conf/php5 for php configuration
files so if the user installs or creates a symlink from the
sample configuration files from the php5.sample directory,
it is going to be picked up by php5.

Create a dummy pwd.db file in the php5-imap package in the apache
chroot because it is needed by c-client.

feedback and tests by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/10/30 10:13:22 ajacoutot Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}p0
d8 2
d95 1
a95 1
FULLPKGNAME-gd=		php5-gd-${V}p1-no_x11
d349 1
a349 1
FULLPKGNAME${i} ?=	php5${i}-${V}p1
@


1.39
log
@- make php5-imap use new c-client

testing and ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/09/15 20:38:25 merdely Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}
a51 1
FULLPKGNAME-curl=	php5-curl-${V}
d93 1
a93 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
a96 1
FULLPKGNAME-gd=		php5-gd-${V}
d123 5
d347 1
a347 1
FULLPKGNAME${i} ?=	php5${i}-${V}
d352 2
a353 1
FULLPKGNAME-imap=	php5-imap-$Vp0
a354 1
MESSAGE=		${PKGDIR}/MESSAGE
d365 1
d369 2
a371 1

@


1.38
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2007/09/05 09:11:34 robert Exp $
d123 1
a123 1
LIB_DEPENDS-imap=	c-client.>=3::mail/c-client
d348 2
@


1.37
log
@update to version 5.2.4 and remove some obsolete CONFIGURE_ARGS;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2007/05/15 17:01:01 naddy Exp $
d4 1
a4 1
COMMENT-main=		"informational package about PHP5 extensions"
d37 1
a37 1
COMMENT-bz2=		"bzip2 compression extensions for php5"
d48 1
a48 1
COMMENT-curl=		"curl URL library extensions for php5"
d61 1
a61 1
COMMENT-dba=		"dba GDBM access extensions for php5"
d72 1
a72 1
COMMENT-dbase=		"dBase database access extensions for php5"
d84 1
a84 1
COMMENT-gd=		"image manipulation extensions for php5"
d109 1
a109 1
COMMENT-gmp=		"gmp math library support for php5"
d120 1
a120 1
COMMENT-imap=		"imap, pop3 and nntp extensions for php5"
d133 1
a133 1
COMMENT-ldap=		"ldap protocol extensions for php5"
d144 1
a144 1
COMMENT-mbstring=	"multibyte characters extensions for php5"
d155 1
a155 1
COMMENT-mcrypt=		"mcrypt encryption/decryption extensions for php5"
d166 1
a166 1
COMMENT-mhash=		"mhash extensions for php5"
d177 1
a177 1
COMMENT-mysql=		"mysql database access extensions for php5"
d188 1
a188 1
COMMENT-mysqli=		"mysql database access extensions for php5"
d200 1
a200 1
COMMENT-ncurses=	"ncurses extensions for php5"
d212 1
a212 1
COMMENT-odbc=		"odbc database access extensions for php5"
d223 1
a223 1
COMMENT-pdo_mysql=	"PDO mysql database access extensions for php5"
d235 1
a235 1
COMMENT-pdo_pgsql=	"PDO database access extensions for php5"
d246 1
a246 1
COMMENT-pdo_sqlite=	"PDO sqlite database access extensions for php5"
d257 1
a257 1
COMMENT-pgsql=		"pgsql database access extensions for php5"
d268 1
a268 1
COMMENT-shmop=		"shared memory extensions for php5"
d279 1
a279 1
COMMENT-soap=		"SOAP functions for php5"
d291 1
a291 1
COMMENT-snmp=		"snmp protocol extensions for php5"
d303 1
a303 1
COMMENT-sqlite=		"sqlite database access extensions for php5"
d314 1
a314 1
COMMENT-sybase_ct=	"sybase database access extensions for php5"
d325 1
a325 1
COMMENT-xmlrpc=		"XML RPC functions for php5"
d337 1
a337 1
COMMENT-xsl=		"XSL functions for php5"
@


1.36
log
@chase wantlib changes after curl update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2007/05/11 15:05:15 robert Exp $
d52 1
a52 1
FULLPKGNAME-curl=	php5-curl-${V}p0
@


1.35
log
@update to version 5.2.2;
fixes many vulnerabilities http://www.php.net/ChangeLog-5.php#5.2.2

from Lawrence Teo <lteo.openbsd1@@calyptix.com>;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/04/01 21:37:27 robert Exp $
d51 2
a52 1
WANTLIB-curl=		${WANTLIB} crypto ssl z
@


1.34
log
@- add a fastcgi subpackage to core because now we are able to build
more than one php binaries within one workdir (idea from FreeBSD)
- move pdo_sqlite support from core to extensions and also add a pdo_mysql
and a pdo_sqlite subpackage
- regen patches while here
- bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/03/22 22:43:20 robert Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}p0
@


1.33
log
@- update to php 5.2.1 and suhosin 0.9.2.6
- remove the pear subpackage as it is now replaced with www/pear
- the filepro extension is no longer available

tested by a couple of people
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/02/09 13:48:20 bernd Exp $
d3 1
a3 1
FULLPKGNAME-main=	php5-extensions-${V}
d21 2
a22 1
			--disable-dom
a51 1
FULLPKGNAME-curl=	php5-curl-${V}
d216 34
a315 1
FULLPKGNAME-sybase_ct=	php5-sybase_ct-${V}
@


1.32
log
@Add missing @@conflict marker for 'php4-sybase_ct-*'.

help & ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2006/12/31 13:15:38 espie Exp $
d3 1
a3 1
FULLPKGNAME-main=		php5-extensions-${V}p0
d51 1
a51 1
FULLPKGNAME-curl=	php5-curl-${V}p2
a75 11
# filepro
PSEUDO_FLAVORS+=	no_filepro
.if ${FLAVOR:L:Mno_filepro}
CONFIGURE_ARGS+=	--disable-filepro
.else
MULTI_PACKAGES+=	-filepro
COMMENT-filepro=	"filepro database access extensions for php5"
CONFIGURE_ARGS+=	--enable-filepro=shared
LIB_DEPENDS-filepro=
.endif

d93 1
a93 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11p2
d97 1
a97 1
FULLPKGNAME-gd=		php5-gd-${V}p1
d282 1
a282 1
FULLPKGNAME-sybase_ct=	php5-sybase_ct-${V}p2
d310 1
a310 1
FULLPKGNAME${i} ?=	php5${i}-${V}p1
@


1.32.2.1
log
@assorted security patches, from debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/02/09 13:48:20 bernd Exp $
d3 1
a3 1
FULLPKGNAME-main=		php5-extensions-${V}p1
d51 1
a51 1
FULLPKGNAME-curl=	php5-curl-${V}p3
d104 1
a104 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11p3
d108 1
a108 1
FULLPKGNAME-gd=		php5-gd-${V}p2
d293 1
a293 1
FULLPKGNAME-sybase_ct=	php5-sybase_ct-${V}p3
d321 1
a321 1
FULLPKGNAME${i} ?=	php5${i}-${V}p2
@


1.32.2.2
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32.2.1 2007/06/17 07:54:57 sturm Exp $
d104 1
a104 1
FULLPKGNAME-gd=		php5-gd-${V}p3-no_x11
@


1.31
log
@fix MESSAGEs using new substitution feature
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/11/30 18:33:04 sturm Exp $
d293 1
@


1.30
log
@bump PKGNAMEs after MULTI_PACKAGES changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/11/25 11:45:58 espie Exp $
d51 1
a51 1
FULLPKGNAME-curl=	php5-curl-${V}p1
d104 1
a104 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11p1
d108 1
a108 1
FULLPKGNAME-gd=		php5-gd-${V}p0
a134 1
FULLPKGNAME-imap=	php5-imap-${V}p0
a258 1
FULLPKGNAME-soap=	php5-soap-${V}p0
a316 1
FULLPKGNAME-xsl=	php5-xsl-${V}p0
d320 1
a320 1
FULLPKGNAME${i} ?=	php5${i}-${V}p0
d322 1
a324 1
MODULE_NAME=		${SUBPACKAGE:S/-//g}
@


1.29
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/11/24 09:27:33 espie Exp $
d51 1
a51 1
FULLPKGNAME-curl=	php5-curl-${V}p0
d104 1
a104 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11p0
d108 1
a108 1
FULLPKGNAME-gd=		php5-gd-${V}
d135 1
a135 1
FULLPKGNAME-imap=	php5-imap-${V}
d260 1
a260 1
FULLPKGNAME-soap=	php5-soap-${V}
d319 1
a319 1
FULLPKGNAME-xsl=	php5-xsl-${V}
d323 1
a323 1
FULLPKGNAME${i} ?=	php5${i}-${V}
@


1.28
log
@broken depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/11/20 20:57:22 robert Exp $
d3 2
a4 2
FULLPKGNAME=		php5-extensions-${V}
COMMENT=		"informational package about PHP5 extensions"
d6 1
a6 2
MULTI_PACKAGES=
SUBPACKAGE?=
a15 2
RUN_DEPENDS=		:php5-core-${V}:www/php5/core
.if !defined(PACKAGING)
a16 1
.endif
d38 1
a38 1
BZ2_DEPENDS=		bz2.>=10::archivers/bzip2
d49 2
a50 2
CURL_DEPENDS=		curl.>=2::net/curl
CURL_WANTLIB=		crypto ssl z
d62 1
a62 1
DBA_DEPENDS=		gdbm.>=2::databases/gdbm
d73 1
d84 1
d95 2
a96 2
GD_DEPENDS=		${GRAPHIC_DEPENDS} t1.>=5::devel/t1lib
GD_WANTLIB=		z
d109 1
a109 3
.  if !defined(PACKAGING) || ${SUBPACKAGE} == "-gd"
GD_WANTLIB+=		X11 Xpm freetype
.  endif
d121 1
a121 1
GMP_DEPENDS=		gmp.>=4::devel/gmp
d133 2
a134 2
IMAP_DEPENDS=		c-client.>=3::mail/c-client
IMAP_WANTLIB=		gssapi crypto krb5 ssl
d146 1
a146 1
LDAP_DEPENDS=		ldap.>=2,lber::databases/openldap
d157 1
d168 1
a168 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl.>=1::devel/libtool,-ltdl
d179 1
a179 1
MHASH_DEPENDS=		mhash.>=2::security/mhash
d190 1
a190 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.>=10::databases/mysql
d201 2
a202 2
MYSQLI_DEPENDS=		lib/mysql/mysqlclient.>=10::databases/mysql
MYSQLI_WANTLIB=		crypto ssl z
d213 2
a214 1
NCURSES_WANTLIB=	ncurses panel
d225 1
a225 1
ODBC_DEPENDS=		iodbc.>=2::databases/iodbc
d236 1
a236 1
PGSQL_DEPENDS=		pq.>=2:postgresql-client-*:databases/postgresql
d247 1
d258 2
a259 1
SOAP_WANTLIB=		xml2 z iconv
d271 2
a272 2
SNMP_DEPENDS=		netsnmp.>=6.2::net/net-snmp
SNMP_WANTLIB=		crypto
d283 1
a283 1
SQLITE_DEPENDS=		sqlite.>=8::databases/sqlite
d294 1
a294 1
SYBASE_CT_DEPENDS=	ct::databases/freetds
d305 2
a306 1
XMLRPC_WANTLIB=		iconv xml2 z
d317 2
a318 2
XSL_DEPENDS=		xslt.>=3,exslt::textproc/libxslt
XSL_WANTLIB=		iconv xml2 z
d323 2
a324 3
.  if !defined(FULLPKGNAME${i})
FULLPKGNAME${i}=	php5${i}-${V}
.  endif
a326 1
.if defined(PACKAGING) && !empty(SUBPACKAGE)
a327 2
LIB_DEPENDS=		${${MODULE_NAME:U}_DEPENDS}
WANTLIB+=		${${MODULE_NAME:U}_WANTLIB}
d329 6
a334 7
SUBST_VARS=		MODULE_NAME PHP_CONFIG_FILE LOCALBASE
.elif defined(PACKAGING) && empty(SUBPACKAGE)
LIB_DEPENDS=
MESSAGE=		${PKGDIR}/DESCR
SUBST_VARS=		V
WANTLIB=
.else
a335 5
.for i in ${MULTI_PACKAGES}
LIB_DEPENDS+=		${${i:U:S/-//g}_DEPENDS}
WANTLIB+=		${${i:U:S/-//g}_WANTLIB}
.endfor
.endif
d339 1
a339 1
.for m in ${MULTI_PACKAGES:S/-//g}
@


1.27
log
@the no_x11 flavor of the gd package should not depend on freetype
as it comes with X11; bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/11/12 13:40:20 robert Exp $
d339 1
a339 1
BUILD_DEPENDS+=		xml2.>=8::textproc/libxml
@


1.26
log
@unbreak the curl extension by removing references to deprecated
constants removed from curl.h; noticed and patch provided by
Marc Wirth <marcwirth@@mac.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/10/21 11:44:10 robert Exp $
d98 1
a98 1
GD_WANTLIB=		freetype z
d105 2
a106 2
CONFIGURE_ARGS+=	--without-xpm-dir
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
d112 1
a112 1
GD_WANTLIB+=		X11 Xpm
@


1.25
log
@update to version 5.1.6 and replace the hardened patchset with
the suhosin patchset;

kill the hardened flavor because we are going to use suhosin
patchet by default;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/09/18 09:04:03 espie Exp $
d55 1
@


1.24
log
@new style libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/08/04 00:10:42 espie Exp $
d17 1
a17 5
.if ${FLAVOR:L:Mhardened}
RUN_DEPENDS=		:php5-core-${V}-hardened:www/php5/core,hardened
.else
RUN_DEPENDS=		:php5-core-${V}-!hardened:www/php5/core
.endif
a322 3
.  endif
.  if ${FLAVOR:L:Mhardened}
FULLPKGNAME${i}:=	${FULLPKGNAME${i}}-hardened
@


1.23
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/07/16 22:08:42 alek Exp $
d174 1
a174 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl.1::devel/libtool,-ltdl
@


1.23.2.1
log
@assorted security patches, from debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/08/04 00:10:42 espie Exp $
d3 1
a3 1
FULLPKGNAME=		php5-extensions-${V}p0
d109 1
a109 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11p0
d113 1
a113 1
FULLPKGNAME-gd=		php5-gd-${V}p0
d142 1
a142 1
FULLPKGNAME-imap=	php5-imap-${V}p0
d263 1
a263 1
FULLPKGNAME-soap=	php5-soap-${V}p0
d321 1
a321 1
FULLPKGNAME-xsl=	php5-xsl-${V}p0
d326 1
a326 1
FULLPKGNAME${i}=	php5${i}-${V}p0
@


1.23.2.2
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23.2.1 2007/06/17 07:55:52 sturm Exp $
d109 1
a109 1
FULLPKGNAME-gd=		php5-gd-${V}p0-no_x11
@


1.22
log
@Missing `"'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/05/09 14:15:40 robert Exp $
d31 2
a32 2
GRAPHIC_DEPENDS=	jpeg.62::graphics/jpeg \
			png.3::graphics/png
d46 1
a46 1
BZ2_DEPENDS=		bz2.10::archivers/bzip2
d57 1
a57 1
CURL_DEPENDS=		curl.2::net/curl
d69 1
a69 1
DBA_DEPENDS=		gdbm.2::databases/gdbm
d100 1
a100 1
GD_DEPENDS=		${GRAPHIC_DEPENDS} t1.5::devel/t1lib
d128 1
a128 1
GMP_DEPENDS=		gmp.4::devel/gmp
d140 1
a140 1
IMAP_DEPENDS=		c-client.3::mail/c-client
d153 1
a153 1
LDAP_DEPENDS=		ldap.2,lber::databases/openldap
d185 1
a185 1
MHASH_DEPENDS=		mhash.2::security/mhash
d196 1
a196 1
MYSQL_DEPENDS=		lib/mysql/mysqlclient.10::databases/mysql
d207 1
a207 1
MYSQLI_DEPENDS=		lib/mysql/mysqlclient.10::databases/mysql
d230 1
a230 1
ODBC_DEPENDS=		iodbc.2::databases/iodbc
d241 1
a241 1
PGSQL_DEPENDS=		pq.2:postgresql-client-*:databases/postgresql
d274 1
a274 1
SNMP_DEPENDS=		netsnmp.6.2::net/net-snmp
d286 1
a286 1
SQLITE_DEPENDS=		sqlite.8::databases/sqlite
d297 1
a297 1
SYBASE_CT_DEPENDS=	ct.0::databases/freetds
d319 1
a319 1
XSL_DEPENDS=		xslt.3,exslt::textproc/libxslt
d345 1
a345 1
BUILD_DEPENDS+=		xml2.8::textproc/libxml
@


1.21
log
@Update to version 5.1.4;

Add a hardened flavor for both core and extensions (inspired by niallo@@);
Use our own way to install pear because the bundled installer is totally
broken and upstream refuses to fix it.

Add a mysqli subpackage which can be used to access the functionality
provided by MySQL 4.1 and above.

Other minor changes and fixes are also included.

ok sturm@@; tested by many
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/04/15 14:57:24 naddy Exp $
d102 1
a102 1
CONFIGURE_ENV+=		CPPFLAGS="${LOCALBASE}/include/libpng
@


1.20
log
@bump gd-no_x11 package, simplify logic; ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/04/14 20:41:48 sturm Exp $
d3 2
a4 2
FULLPKGNAME=	php5-extensions-${V}p0
COMMENT=	"informational package about PHP5 extensions"
d10 1
a10 1
PREFIX?=	${CHROOT_DIR}
d12 1
a12 1
FLAVORS=	no_x11
d15 1
a15 1
WANTLIB=	stdc++ m
d17 5
a21 1
RUN_DEPENDS=	:php5-core-${V}:www/php5/core
d23 1
a23 1
MODULES=	devel/gettext
a81 10
# dbx
PSEUDO_FLAVORS+=	no_dbx
.if ${FLAVOR:L:Mno_dbx}
CONFIGURE_ARGS+=	--disable-dbx
.else
MULTI_PACKAGES+=	-dbx
COMMENT-dbx=		"dbx database abstraction interface for php5"
CONFIGURE_ARGS+=	--enable-dbx=shared
.endif

d101 2
a102 1
GD_WANTLIB=		z
d108 2
a109 2
CONFIGURE_ARGS+=       --without-xpm-dir
FULLPKGNAME-gd=		php5-gd-${V}p3-no_x11
d111 3
a113 3
USE_X11=               yes
CONFIGURE_ARGS+=       --with-xpm-dir=${X11BASE}
FULLPKGNAME-gd=		php5-gd-${V}p1
d141 2
a142 2
IMAP_WANTLIB=		gssapi crypto krb5 ssl des
FULLPKGNAME-imap=	php5-imap-${V}p1
d199 12
d263 1
a263 1
FULLPKGNAME-soap=	php5-soap-${V}p1
d308 1
a308 2
XMLRPC_DEPENDS=		expat.2::textproc/expat
XMLRPC_WANTLIB=		iconv
d320 2
a321 2
XSL_WANTLIB=		xml2 z iconv
FULLPKGNAME-xsl=	php5-xsl-${V}p1
d325 6
a330 3
.if !defined(FULLPKGNAME${i})
FULLPKGNAME${i}=	php5${i}-${V}p0
.endif
@


1.19
log
@actually increase FULLPKGNAME-gd

4 eyes didn't see what plist_db sees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/04/06 11:26:39 otto Exp $
d112 4
a115 1
. if !${FLAVOR:L:Mno_x11}
a121 3
. else
CONFIGURE_ARGS+=       --without-xpm-dir
FULLPKGNAME-gd=		php5-gd-${V}p2-no_x11
@


1.18
log
@Make php5-gd use freetype2 (included in X11) instead of freetype1. Solves
truetype font rendering problems in truecolor more. Tested by mbalmer@@;
help and ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/12/29 23:06:28 sturm Exp $
d115 1
a115 1
FULLPKGNAME-gd=		php5-gd-${V}p0
@


1.17
log
@more
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/09/16 09:51:28 espie Exp $
d102 1
a102 1
			--without-freetype-dir
d106 1
a106 2
GD_DEPENDS=		ttf.1::print/freetype ${GRAPHIC_DEPENDS} \
			t1.5::devel/t1lib
d109 3
a111 2
			--with-ttf=shared,${LOCALBASE} --without-freetype-dir \
			--with-t1lib=${LOCALBASE}
d115 1
@


1.16
log
@Update to php-5.1.1;
for more information please check
http://www.php.net/ChangeLog-5.php#5.1.1
and
http://www.php.net/ChangeLog-5.php#5.1.0

The port now uses a CVS snapshot of PEAR;
@
text
@d3 1
a3 1
FULLPKGNAME=	php5-extensions-${V}
d78 10
d319 1
a319 1
FULLPKGNAME${i}=	php5${i}-${V}
@


1.15
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/09/10 18:23:00 espie Exp $
d3 1
a3 1
FULLPKGNAME=	php5-extensions-${V}p0
a77 10
# dbx
PSEUDO_FLAVORS+=	no_dbx
.if ${FLAVOR:L:Mno_dbx}
CONFIGURE_ARGS+=	--disable-dbx
.else
MULTI_PACKAGES+=	-dbx
COMMENT-dbx=		"dbx database abstraction interface for php5"
CONFIGURE_ARGS+=	--enable-dbx=shared
.endif

d309 1
a309 1
FULLPKGNAME${i}=	php5${i}-${V}p0
@


1.14
log
@missing WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/07/06 00:50:32 kevlo Exp $
d3 1
a3 1
FULLPKGNAME=	php5-extensions-${V}
d120 1
a120 1
FULLPKGNAME-gd=		php5-gd-${V}p1-no_x11
d146 1
a146 1
FULLPKGNAME-imap=	php5-imap-${V}p0
d255 1
a255 1
FULLPKGNAME-soap=	php5-soap-${V}p0
d314 1
a314 1
FULLPKGNAME-xsl=	php5-xsl-${V}p0
d319 1
a319 1
FULLPKGNAME${i}=	php5${i}-${V}
@


1.13
log
@add mbstring support. ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/06/06 17:25:33 robert Exp $
d145 2
a146 1
IMAP_WANTLIB=		gssapi crypto krb5 ssl
d254 2
d312 3
a314 1
XSL_DEPENDS=		xslt.3::textproc/libxslt
@


1.13.2.1
log
@bump PKGNAMEs to not fall behind 3.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/07/06 00:50:32 kevlo Exp $
a51 1
FULLPKGNAME-curl=	php5-curl-${V}p0
@


1.12
log
@add the soap extension to php5:

SOAP (Simple Object Access Protocol) is a method for access remote
XML resources on another machine.  It is a standard defined by The
World Wide Web consortium (W3C).  Information about XSLT and related
technologies can be found at http://www.w3.org/TR/soap.

From: Ben Lindstrom <mouring@@etoh.eviladmin.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/05/18 06:59:37 kevlo Exp $
d157 10
@


1.11
log
@fix detect libxslt dependency correctly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/05/12 19:09:14 robert Exp $
d233 10
@


1.10
log
@add support for xsl extension
from Ben Lindstrom <mouring@@etoh.eviladmin.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/04/10 12:21:02 robert Exp $
d289 1
a289 1
XSLT_DEPENDS=		xslt.3::textproc/libxslt
@


1.9
log
@add textproc/libxml to BUILD_DEPENDS; noticed by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/04/04 21:13:22 robert Exp $
d248 1
a248 1
PSEUDO_FLAVORS+=       no_sqlite
d279 11
@


1.8
log
@update to 5.0.4;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/03/16 21:09:21 robert Exp $
d299 1
@


1.7
log
@fix the gd extension's conflict with php4; bump its no_x11 flavor's PKGNAME;

spotted and ok by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/03/16 20:09:41 robert Exp $
d3 1
a3 1
FULLPKGNAME=	php5-extensions-${V}p1
d283 1
a283 1
FULLPKGNAME${i}=	php5${i}-${V}p1
@


1.7.2.1
log
@SECURITY: update to 5.0.4
fixes multiple vulnerabilities
http://www.vuxml.org/openbsd/7612fe54-b00c-11d9-9c1d-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/03/16 21:09:21 robert Exp $
d3 1
a3 1
FULLPKGNAME=	php5-extensions-${V}
d283 1
a283 1
FULLPKGNAME${i}=	php5${i}-${V}
@


1.7.2.2
log
@fix the PKGNAME of the no_x11 flavor of the gd subpackage
"just commit it" brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7.2.1 2005/05/23 20:20:08 robert Exp $
d120 1
a120 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
@


1.7.2.3
log
@bump PKGNAMEs for new packages after libcurl update

discussed with pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7.2.2 2005/05/24 16:53:19 robert Exp $
a51 1
FULLPKGNAME-curl=	php5-curl-${V}p0
@


1.6
log
@- fix WANTLIB markers and dependencies (from alek@@ and wilfried@@)
- delete some whitespaces (from wilfried@@)
- don't leave mess in ldconfig search path
(reported by Moritz Grimm <mlist@@scapa.dnsalias.net>)
- bump PKGNAMEs

tested by many; ok pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/12/21 12:15:02 espie Exp $
d120 1
a120 1
FULLPKGNAME-gd=		php5-gd-${V}-no_x11
@


1.5
log
@mark explicit conflicts, unconfuse find-all-conflicts.
fix dependency from ltdl in mcrypt (noticed by mbalmer@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/12/11 13:29:22 alek Exp $
d3 1
a3 1
FULLPKGNAME=	php5-extensions-${V}
d13 1
a13 1
FLAVOR?= 
d15 1
a15 1
WANTLIB=	crypto gssapi krb5 m ncurses panel ssl z
d18 1
d20 1
d28 1
a28 2
			png.3::graphics/png \
			tiff.35::graphics/tiff
d32 1
a32 2
			--with-tiff-dir=${LOCALBASE} \
			--with-zlib-dir=/usr 
d54 1
d85 1
a85 1
CONFIGURE_ARGS+=	--enable-dbx=shared 
d108 1
d112 1
a112 1
.if !${FLAVOR:L:Mno_x11}
d115 4
a118 2
WANTLIB+=		X11 Xpm 
.else
d121 1
a121 1
.endif
d145 1
d200 1
d235 1
a235 1
# snmp 
d244 1
d266 1
a266 1
SYBASE_CT_DEPENDS=	tds.0,ct.0::databases/freetds
d278 1
d283 1
a283 1
FULLPKGNAME${i}=	php5${i}-${V}p0
d290 1
d297 1
d301 1
@


1.4
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/10/18 15:58:53 robert Exp $
d162 1
a162 1
MCRYPT_DEPENDS=		mcrypt::security/libmcrypt ltdl.1::devel/libtool
d275 1
a275 1
FULLPKGNAME${i}=	php5${i}-${V}
@


1.3
log
@Add the sqlite extension for php5;
requested by jcs@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/10/13 01:47:32 danh Exp $
d15 2
d113 1
@


1.2
log
@replace ucd-snmp with net-snmp; ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/10/02 11:32:35 robert Exp $
d235 11
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d234 1
a234 1
SNMP_DEPENDS=		snmp.42::net/ucd-snmp
@


1.1.1.1
log
@Import php-5.0.2;

PHP5 is a widely-used general-purpose scripting language 
that is especially suited for Web development and can be 
embedded into HTML. 
@
text
@@
