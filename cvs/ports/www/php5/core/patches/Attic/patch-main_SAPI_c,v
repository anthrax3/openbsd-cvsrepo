head	1.3;
access;
symbols
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2008.12.20.21.35.38;	author sthen;	state dead;
branches;
next	1.2;

1.2
date	2008.05.20.14.01.45;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2007.12.11.12.45.08;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@PHP 5.2.8 broke strtotime (making it leak memory badly, very obvious to
cacti users): add a patch from the upstream repository to fix this.
Thanks Steven Surdock for reporting the problem and testing this diff
(and similar patches sent by William Yodlowsky). While there, remove
a zero-byte patch that crept in before.  ok robert@@
@
text
@@


1.2
log
@update to php-5.2.6; from Brad Walker <me@@bradmwalker.com>
@
text
@@


1.1
log
@Integrate a patch from php's CVS repo to fix a crashing issue due
to an uninitialized variable.

from Brad
@
text
@a0 19
$OpenBSD$
--- main/SAPI.c.orig	Tue Dec 11 13:34:05 2007
+++ main/SAPI.c	Tue Dec 11 13:34:46 2007
@@@@ -301,6 +301,7 @@@@ SAPI_API void sapi_activate_headers_only(TSRMLS_D)
 
 	/* SG(sapi_headers).http_response_code = 200; */ 
 	SG(sapi_headers).http_status_line = NULL;
+	SG(sapi_headers).mimetype = NULL;
 	SG(read_post_bytes) = 0;
 	SG(request_info).post_data = NULL;
 	SG(request_info).raw_post_data = NULL;
@@@@ -340,6 +341,7 @@@@ SAPI_API void sapi_activate(TSRMLS_D)
 	SG(sapi_headers).http_response_code = 200;
 	*/
 	SG(sapi_headers).http_status_line = NULL;
+	SG(sapi_headers).mimetype = NULL;
 	SG(headers_sent) = 0;
 	SG(read_post_bytes) = 0;
 	SG(request_info).post_data = NULL;
@

