head	1.2;
access;
symbols
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.03.06.09.18.31;	author robert;	state dead;
branches;
next	1.1;

1.1
date	2008.12.20.21.35.38;	author sthen;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2009.07.19.02.11.36;	author william;	state dead;
branches;
next	;


desc
@@


1.2
log
@*** empty log message ***
@
text
@from upstream cvs, fixes bug 46889, memory leak in strtotime()

$OpenBSD: patch-ext_date_php_date_c,v 1.1 2008/12/20 21:35:38 sthen Exp $
--- ext/date/php_date.c.orig	Tue Dec  2 18:01:57 2008
+++ ext/date/php_date.c	Fri Dec 19 20:42:27 2008
@@@@ -1143,7 +1143,7 @@@@ PHP_FUNCTION(strtotime)
 	t = timelib_strtotime(times, time_len, &error, DATE_TIMEZONEDB);
 	error1 = error->error_count;
 	timelib_error_container_dtor(error);
-	timelib_fill_holes(t, now, 0);
+	timelib_fill_holes(t, now, TIMELIB_NO_CLONE);
 	timelib_update_ts(t, tzi);
 	ts = timelib_date_to_int(t, &error2);
 
@


1.1
log
@PHP 5.2.8 broke strtotime (making it leak memory badly, very obvious to
cacti users): add a patch from the upstream repository to fix this.
Thanks Steven Surdock for reporting the problem and testing this diff
(and similar patches sent by William Yodlowsky). While there, remove
a zero-byte patch that crept in before.  ok robert@@
@
text
@d3 1
a3 1
$OpenBSD$
@


1.1.2.1
log
@MFC:

SECURITY FIX

php5-5.2.10

Resolves:

- bug #48378 (exif_read_data() segfaults on certain corrupted .jpeg files)
- in imagerotate(), background colour isn't validated correctly with a
non-truecolour image (CVE-2008-5498)
- crash on extract in zip when files or directories entry names contain a
relative path
- explode() behavior with empty string to respect negative limit
- segfault when malformed string is passed to json_decode()
- bug in xml_error_string() which resulted in messages being off by one

ok robert@@
@
text
@d3 1
a3 1
$OpenBSD: patch-ext_date_php_date_c,v 1.1 2008/12/20 21:35:38 sthen Exp $
@


