head	1.85;
access;
symbols
	OPENBSD_5_2:1.78.0.2
	OPENBSD_5_2_BASE:1.78
	OPENBSD_5_1_BASE:1.74
	OPENBSD_5_1:1.74.0.2
	OPENBSD_5_0:1.68.0.2
	OPENBSD_5_0_BASE:1.68
	OPENBSD_4_9:1.59.0.2
	OPENBSD_4_9_BASE:1.59
	OPENBSD_4_8:1.40.0.2
	OPENBSD_4_8_BASE:1.40
	OPENBSD_4_7:1.35.0.2
	OPENBSD_4_7_BASE:1.35
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	martynas_20090621:1.1.1.1
	martynas:1.1.1;
locks; strict;
comment	@# @;


1.85
date	2012.12.04.21.10.12;	author landry;	state dead;
branches;
next	1.84;

1.84
date	2012.11.12.20.45.32;	author landry;	state Exp;
branches;
next	1.83;

1.83
date	2012.10.06.07.55.55;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2012.09.22.10.30.17;	author landry;	state Exp;
branches;
next	1.81;

1.81
date	2012.09.21.13.21.44;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2012.09.01.14.35.06;	author landry;	state Exp;
branches;
next	1.79;

1.79
date	2012.08.04.15.01.50;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2012.06.11.15.26.14;	author landry;	state Exp;
branches;
next	1.77;

1.77
date	2012.04.24.18.48.16;	author sthen;	state Exp;
branches;
next	1.76;

1.76
date	2012.03.16.21.43.58;	author landry;	state Exp;
branches;
next	1.75;

1.75
date	2012.03.08.12.13.00;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2011.12.15.23.05.44;	author nigel;	state Exp;
branches;
next	1.73;

1.73
date	2011.10.03.21.13.49;	author landry;	state Exp;
branches;
next	1.72;

1.72
date	2011.09.16.12.00.06;	author espie;	state Exp;
branches;
next	1.71;

1.71
date	2011.09.06.19.47.03;	author landry;	state Exp;
branches;
next	1.70;

1.70
date	2011.08.24.06.22.19;	author landry;	state Exp;
branches;
next	1.69;

1.69
date	2011.08.23.20.27.54;	author landry;	state Exp;
branches;
next	1.68;

1.68
date	2011.08.02.19.24.38;	author naddy;	state Exp;
branches;
next	1.67;

1.67
date	2011.08.01.17.43.20;	author landry;	state Exp;
branches;
next	1.66;

1.66
date	2011.06.08.18.15.29;	author rpointel;	state Exp;
branches;
next	1.65;

1.65
date	2011.06.02.13.41.41;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.04.29.08.02.16;	author landry;	state Exp;
branches;
next	1.63;

1.63
date	2011.03.24.11.41.11;	author landry;	state Exp;
branches;
next	1.62;

1.62
date	2011.03.23.15.27.04;	author landry;	state Exp;
branches;
next	1.61;

1.61
date	2011.03.22.13.18.26;	author landry;	state Exp;
branches;
next	1.60;

1.60
date	2011.03.02.14.41.09;	author landry;	state Exp;
branches;
next	1.59;

1.59
date	2011.01.28.21.38.12;	author landry;	state Exp;
branches;
next	1.58;

1.58
date	2011.01.18.12.37.44;	author landry;	state Exp;
branches;
next	1.57;

1.57
date	2011.01.14.22.56.11;	author landry;	state Exp;
branches;
next	1.56;

1.56
date	2011.01.05.08.22.30;	author dcoppa;	state Exp;
branches;
next	1.55;

1.55
date	2010.12.10.10.36.00;	author landry;	state Exp;
branches;
next	1.54;

1.54
date	2010.12.01.15.00.12;	author dcoppa;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.22.08.36.48;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.11.09.30.37;	author jasper;	state Exp;
branches;
next	1.51;

1.51
date	2010.10.28.12.03.27;	author landry;	state Exp;
branches;
next	1.50;

1.50
date	2010.10.27.12.59.29;	author landry;	state Exp;
branches;
next	1.49;

1.49
date	2010.10.27.08.14.17;	author landry;	state Exp;
branches;
next	1.48;

1.48
date	2010.10.24.21.40.09;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2010.10.22.19.23.13;	author landry;	state Exp;
branches;
next	1.46;

1.46
date	2010.10.18.07.15.55;	author landry;	state Exp;
branches;
next	1.45;

1.45
date	2010.10.16.14.47.29;	author landry;	state Exp;
branches;
next	1.44;

1.44
date	2010.10.11.08.19.03;	author jasper;	state Exp;
branches;
next	1.43;

1.43
date	2010.09.19.19.20.03;	author landry;	state Exp;
branches;
next	1.42;

1.42
date	2010.09.12.17.56.29;	author landry;	state Exp;
branches;
next	1.41;

1.41
date	2010.08.30.23.50.44;	author fgsch;	state Exp;
branches;
next	1.40;

1.40
date	2010.08.02.16.05.37;	author landry;	state Exp;
branches
	1.40.2.1;
next	1.39;

1.39
date	2010.06.28.21.32.04;	author landry;	state Exp;
branches;
next	1.38;

1.38
date	2010.04.28.06.50.23;	author landry;	state Exp;
branches;
next	1.37;

1.37
date	2010.03.31.15.56.44;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2010.03.25.16.34.09;	author landry;	state Exp;
branches;
next	1.35;

1.35
date	2010.02.24.16.59.49;	author sthen;	state Exp;
branches
	1.35.2.1;
next	1.34;

1.34
date	2010.01.05.21.26.40;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2009.12.26.20.56.24;	author steven;	state Exp;
branches;
next	1.32;

1.32
date	2009.12.22.13.02.11;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2009.12.20.20.11.37;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2009.11.27.21.18.52;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2009.11.17.23.07.45;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2009.09.18.20.35.27;	author martynas;	state Exp;
branches;
next	1.27;

1.27
date	2009.09.10.22.18.59;	author martynas;	state Exp;
branches;
next	1.26;

1.26
date	2009.08.10.06.34.56;	author kili;	state Exp;
branches;
next	1.25;

1.25
date	2009.08.03.22.15.51;	author martynas;	state Exp;
branches;
next	1.24;

1.24
date	2009.08.03.21.27.00;	author martynas;	state Exp;
branches;
next	1.23;

1.23
date	2009.07.23.19.04.42;	author martynas;	state Exp;
branches;
next	1.22;

1.22
date	2009.07.23.17.17.41;	author martynas;	state Exp;
branches;
next	1.21;

1.21
date	2009.07.21.19.53.17;	author martynas;	state Exp;
branches;
next	1.20;

1.20
date	2009.07.21.19.43.04;	author martynas;	state Exp;
branches;
next	1.19;

1.19
date	2009.07.21.12.12.37;	author martynas;	state Exp;
branches;
next	1.18;

1.18
date	2009.07.21.11.58.54;	author martynas;	state Exp;
branches;
next	1.17;

1.17
date	2009.07.20.23.41.34;	author martynas;	state Exp;
branches;
next	1.16;

1.16
date	2009.07.20.20.04.02;	author martynas;	state Exp;
branches;
next	1.15;

1.15
date	2009.07.19.18.38.08;	author martynas;	state Exp;
branches;
next	1.14;

1.14
date	2009.07.19.15.30.16;	author martynas;	state Exp;
branches;
next	1.13;

1.13
date	2009.07.17.17.09.35;	author martynas;	state Exp;
branches;
next	1.12;

1.12
date	2009.07.15.20.42.39;	author martynas;	state Exp;
branches;
next	1.11;

1.11
date	2009.06.30.16.16.00;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2009.06.23.17.55.57;	author martynas;	state Exp;
branches;
next	1.9;

1.9
date	2009.06.21.20.46.38;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2009.06.21.20.41.40;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2009.06.21.18.50.06;	author martynas;	state Exp;
branches;
next	1.6;

1.6
date	2009.06.21.18.42.15;	author martynas;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.21.18.17.11;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2009.06.21.14.28.14;	author martynas;	state Exp;
branches;
next	1.3;

1.3
date	2009.06.21.11.41.31;	author martynas;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.21.11.36.11;	author martynas;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.21.01.31.23;	author martynas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.21.01.31.23;	author martynas;	state Exp;
branches;
next	;

1.35.2.1
date	2010.06.12.03.42.22;	author william;	state Exp;
branches;
next	1.35.2.2;

1.35.2.2
date	2010.07.08.03.09.42;	author william;	state Exp;
branches;
next	1.35.2.3;

1.35.2.3
date	2010.10.02.02.47.50;	author william;	state Exp;
branches;
next	;

1.40.2.1
date	2010.10.02.03.29.02;	author william;	state Exp;
branches;
next	;


desc
@@


1.85
log
@Retire www/firefox35.

You served us well but you're EOL'ed upstream since 18 months, and your
only reason d'etre was the java plugin from jdk 1.6. But those days this
one doesnt receive updates from oracle, and icedtea-web seems to do a
good job at running java crapplets.
Users will be upgraded for free to www/mozilla-firefox !

General agreement/yays from ajacoutot@@ tobiasu@@ dcoppa@@ krw@@ kurt@@
@
text
@# $OpenBSD: Makefile,v 1.84 2012/11/12 20:45:32 landry Exp $

COMMENT =	Mozilla web browser

MOZILLA_VERSION =	3.5.19
MOZILLA_BRANCH =	1.9.1
MOZILLA_PROJECT =	firefox35
MOZILLA_DIST =		firefox
MOZILLA_CODENAME =	browser

REVISION =		18

SO_VERSION =	24.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
MOZILLA_LIBS =	browsercomps browserdirprovider imgicon mozjs \
		xpcom xul nullplugin unixprintplugin

FLAVOR ?=
.if ${FLAVOR:L:Mdebug}
MOZILLA_LIBS += accessibility appcomps auth autoconfig caps chardet chrome \
	commandlines composer cookie docshell embedcomponents fileview \
	gkgfxthebes gklayout gkplugin htmlpars i18n imglib2 intlapp \
	jar50 jsd mozfind necko nsappshell oji permissions \
	pipboot pipnss pippki places pref rdf remoteservice \
	satchel spellchecker storagecomps system-pref tkautocomplete \
	toolkitcomps txmgr uconv ucvmath universalchardet \
	unixproxy webbrwsr widget_gtk2 windowds xpconnect xpinstall \
	zipwriter gfxpsshar gkgfx gtkxtbin jsj thebes xpcom_core
.endif

CATEGORIES =	www

# mozilla public license
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES =	www/mozilla devel/gettext lang/python

MODPY_RUNDEP =	No

# Regression tests are too hard to adapt to run here
NO_REGRESS =	Yes

CONFIGURE_STYLE =	autoconf no-autoheader
CONFIGURE_ARGS +=	--enable-official-branding

MOZILLA_DATADIRS =	chrome components defaults dictionaries extensions \
			greprefs icons modules plugins res searchplugins

MOZILLA_AUTOCONF_DIRS +=	js/src
MOZILLA_SUBST_FILES +=		config/autoconf.mk.in

pre-install:
	ln -sf ${MOB}/firefox{,35}
	ln -sf ${MOB}/firefox{,35}-bin

post-install:
	${INSTALL_DATA} ${FILESDIR}/browserconfig.properties ${MOB}/LICENSE ${MOB}/blocklist.xml ${MOZ}

.include <bsd.port.mk>
@


1.84
log
@Bump all ports depending on nspr to account for the devel/nspr,-main ->
devel/nspr pkgpath change. While here, make sure mozilla ports depend on
the latest and greatest via mozilla.port.mk.
Tested in a bulk build..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/10/06 07:55:55 ajacoutot Exp $
@


1.83
log
@Extend the desktop file: add a couple of mime types (x-scheme-handler)
so that the mozilla browsers are properly recognized in the "default
browser" specification.

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2012/09/22 10:30:17 landry Exp $
d11 1
a11 1
REVISION =		17
@


1.82
log
@Remove useless dependency on deprecated pangox.

- remove useless patch to gfx/thebes/Makefile.in adding -lpangox-1.0 to
EXTRA_DSO_LDOPTS, this was maybe useful before ffx 3.0, but mozilla
stopped using pangox between 2.0 and 3.0. See for the last traces of
pangox.h use : https://bugzilla.mozilla.org/show_bug.cgi?id=528941. See
also bugs #323671/#338446
- backport the patch from #528941 to remove useless pangox.h inclusion
from www/firefox35.
- remove the RUN_DEPENDS on pangox-compat
- bump all corresponding REVISIONS
- while here, make sure all moz ports depend on latest nspr 4.9.2 since
  it'll be a requirement for upcoming gecko 16 releases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2012/09/21 13:21:44 ajacoutot Exp $
d11 1
a11 1
REVISION =		16
@


1.81
log
@Fix after pangox removal from devel/pango.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/09/01 14:35:06 landry Exp $
d11 1
a11 1
REVISION =		15
a42 3

# EXTRA_DSO_LDOPTS += -lpangox-1.0
RUN_DEPENDS +=		devel/pangox-compat
@


1.80
log
@Garge collect nsSound.cpp, the original one uses libcanberra
properly and thus sndio. Bump corresponding REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/08/04 15:01:50 ajacoutot Exp $
d11 1
a11 1
REVISION =		14
d43 3
@


1.79
log
@There is no more gtk+2-cups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2012/06/11 15:26:14 landry Exp $
d11 1
a11 1
REVISION =		13
@


1.78
log
@Fix WANTLIB (remove gmodule-2.0) and bump depending ports (others will
be updated in a sec)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2012/04/24 18:48:16 sthen Exp $
d11 1
a11 1
REVISION =		12
@


1.77
log
@bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2012/03/16 21:43:58 landry Exp $
d11 1
a11 1
REVISION =		11
@


1.76
log
@Bump after mozilla.port.mk dependency change (remember, firefox 3.5 is EOL)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2012/03/08 12:13:00 ajacoutot Exp $
d11 1
a11 1
REVISION =		10
@


1.75
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/12/15 23:05:44 nigel Exp $
d11 1
a11 1
REVISION =		9
@


1.74
log
@always build without gconf

Ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/10/03 21:13:49 landry Exp $
d11 1
a11 1
REVISION =		8
@


1.73
log
@Remove PR_LoadLibrary() patches now that nspr contains the fix.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/09/16 12:00:06 espie Exp $
d11 1
a11 1
REVISION =		7
@


1.72
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/09/06 19:47:03 landry Exp $
d11 1
a11 1
REVISION =		6
@


1.71
log
@Bump REVISION after nss dependency change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/08/24 06:22:19 landry Exp $
d11 1
a11 1
REVISION =		5
@


1.70
log
@Use MOZILLA_DIST/MOZILLA_DIST_VERSION where appropriate, remove
MASTER_SITES & DISTNAME (they're now properly set by the module).
Bump REVISION where HOMEPAGE changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/08/23 20:27:54 landry Exp $
d11 1
a11 1
REVISION =		4
@


1.69
log
@bump after nss/nspr dependency change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/08/02 19:24:38 naddy Exp $
d8 1
d11 1
a11 1
REVISION =		3
a33 2
HOMEPAGE=	http://www.mozilla.org/projects/firefox/

a38 3

MASTER_SITES =	ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/${MOZILLA_VERSION}/source/
DISTNAME =	firefox-${MOZILLA_VERSION}.source
@


1.68
log
@Fix for CVE-2011-2691 in the included apng, backported from png 1.2.45.
with landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/08/01 17:43:20 landry Exp $
d10 1
a10 1
REVISION =		2
@


1.67
log
@Fix MASTER_SITES, old & unmaintained releases were removed from
releases.mozilla.org. Spotted by kurt@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/06/08 18:15:29 rpointel Exp $
d10 1
a10 1
REVISION =		1
@


1.66
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/06/02 13:41:41 ajacoutot Exp $
d41 1
a41 1
MASTER_SITES =	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${MOZILLA_VERSION}/source/
@


1.65
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/04/29 08:02:16 landry Exp $
d10 1
a10 1
REVISION =		0
@


1.64
log
@Update to firefox35 3.5.19.
Fixes MFSA 2011-12,13,14,15,16 & 18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/03/24 11:41:11 landry Exp $
d9 2
@


1.63
log
@Assorted fixes for:
https://bugzilla.mozilla.org/show_bug.cgi?id=643137 (crash on sparc64
when displaying opentypes fonts, fix from tobias ulmer)
https://bugzilla.mozilla.org/show_bug.cgi?id=644012 (crash on ssl certs
with empty issuer name, pointed our by roberth at openbsd dot pap dot st
and mikolaj kucharski)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/03/23 15:27:04 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.18
a8 1
REVISION =	1
@


1.62
log
@Updates to firefox35 3.5.18, mozilla-firefox 3.6.16 & seamonkey 2.0.3.
All fixing MFSA-2011-11, see
http://blog.mozilla.com/security/2011/03/22/firefox-blocking-fraudulent-certificates/ and
https://blog.torproject.org/blog/detecting-certificate-authority-compromises-and-web-browser-collusion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/03/22 13:18:26 landry Exp $
d9 1
a9 1
REVISION =	0
@


1.61
log
@Remove the .if for system sqlite, now every port using mozilla MODULE
uses it. Bump dependency to 3.7.5 to ensure it has unlock_notify for
ffx4, and bump all corresponding REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/03/02 14:41:09 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.17
@


1.60
log
@Update to firefox35 3.5.17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/01/28 21:38:12 landry Exp $
d9 1
@


1.59
log
@Fix an unaligned access on sparc64 leading to random crashes when
mozilla tries to read a malformed ICC profile on random image content
found on the web.
backport of http://hg.mozilla.org/mozilla-central/rev/e8207773d54d
ref: https://bugzilla.mozilla.org/show_bug.cgi?id=629057
issue reported and fix found by naddy@@
ok naddy@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/01/18 12:37:44 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.16
a8 1
REVISION =	2
a40 1
REVISION =	0
@


1.58
log
@mozilla.port.mk makes all mozilla ports use the sydney_audio_sndio.c
file from www/mozilla-firefox, so remove old instances of that file that
weren't updated with last commits (and were unused anyway)
While here bump all REVISIONs after LIB_DEPENDS change.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/01/14 22:56:11 landry Exp $
d9 1
a9 1
REVISION =	1
@


1.57
log
@Add same PRAGMA secure_delete patch to seamonkey and ffx35 for the sake
of consistency, and build against systemwide sqlite.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/01/05 08:22:30 dcoppa Exp $
d9 1
a9 1
REVISION =	0
@


1.56
log
@Apply the cups fix to the rest of Mozilla apps (mozilla-thunderbird,
sunbird, firefox35, seamonkey).

Ok & tested by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/12/10 10:36:00 landry Exp $
d9 1
a52 3
CONFIGURE_ARGS +=	--enable-system-sqlite
LIB_DEPENDS +=		databases/sqlite3>=3.6.16
WANTLIB +=		sqlite3>=13.3
@


1.55
log
@Update to firefox35 3.5.16.
Fixes MFSA 2010-74->84.
http://www.mozilla.org/security/known-vulnerabilities/firefox35.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/12/01 15:00:12 dcoppa Exp $
d41 1
@


1.54
log
@Fix Kerberos/GSSAPI authentication within mozilla ports.
OpenBSD does not have gssapi_krb5. So, to avoid undefined symbol
errors, link libxul with "-lkrb5 -lcrypto".

OK phessler@@, landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/22 08:36:48 espie Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.15
a8 1
REVISION =		1
@


1.53
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/11 09:30:37 jasper Exp $
d9 1
a9 1
REVISION =		0
@


1.52
log
@- switch to pkg-readmes

ok landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/10/28 12:03:27 landry Exp $
d53 2
a54 2
LIB_DEPENDS +=		:sqlite3->=3.6.16:databases/sqlite3
WANTLIB +=		sqlite3.>=13.3
@


1.51
log
@Security update to firefox35 3.5.15.
Fixes MFSA2010-73/CVE-2010-3765/bz #607222.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/10/27 12:59:29 landry Exp $
d9 1
@


1.50
log
@Do the PFRAG.debug dance so that it produces a working debug-enabled
package. Teach users how to properly report bugs, and add a
run-mozilla.sh patch so that it finds our gdb. While here remove
updates/ subdir at uninstall time, otherwise it stays..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/10/27 08:14:17 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.14
a8 2

REVISION =		0
@


1.49
log
@Oops. remove debug FLAVOR here, it's now in mozilla.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/10/24 21:40:09 ajacoutot Exp $
d10 2
d17 13
@


1.48
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/10/22 19:23:13 landry Exp $
a17 3
FLAVORS =	debug
FLAVOR ?=

a40 5

.if ${FLAVOR:L:Mdebug}
CONFIGURE_ARGS+=--enable-debug
.endif

@


1.47
log
@Update to firefox35 3.5.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/10/18 07:15:55 landry Exp $
a35 1
USE_X11 =	Yes
@


1.46
log
@Fix WANTLIB again after cairo's last commit where X11-xcb went away.
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/10/16 14:47:29 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.13
a8 2

REVISION=	2
@


1.45
log
@Whoops, forgot to bump that one too, reported by naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/10/11 08:19:03 jasper Exp $
d10 1
a10 1
REVISION=	1
@


1.44
log
@- fix WANTLIB after cairo update.

(please note chromium is still broken, but will be dealt with soon)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/09/19 19:20:03 landry Exp $
d10 1
a10 1
REVISION=	0
@


1.43
log
@Bugfix update to firefox 3.5.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/09/12 17:56:29 landry Exp $
d9 2
@


1.42
log
@Update firefox35 port to 3.5.12, fixing a whole bunch of MFSA (2010-49->63)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/08/30 23:50:44 fgsch Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.12
@


1.41
log
@Bump for python. These are the last bits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/08/02 16:05:37 landry Exp $
d5 1
a5 1
MOZILLA_VERSION =	3.5.11
a15 1
REVISION =	0
@


1.40
log
@Update to firefox35 3.5.11, fixes MFSA 2010-{34..47}
Convert port to use mozilla MODULE, which gains us --enable-libxul, so
way less libs are installed. Bring patches/files inline with other
mozilla ports. java plugin still works.
ok/testing sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/06/28 21:32:04 landry Exp $
d16 1
@


1.40.2.1
log
@Upstream moved the distfile.  Noted by and new location given by
Alex Libman, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/08/02 16:05:37 landry Exp $
d29 1
a29 1
MASTER_SITES =	ftp://ftp.mozilla.org/pub/firefox/releases/${MOZILLA_VERSION}/source/
@


1.39
log
@Maintenance update to firefox35-3.5.10, Fixes yet another bunch of MFSA,
http://www.mozilla.org/security/known-vulnerabilities/firefox35.html

While here, make it build against systemwide nss/nspr, as others do, and
remove corresponding patches for local copy of nss/nspr. Use newer
${SUBST_CMD} semantics to prettify do-install: target.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/04/28 06:50:23 landry Exp $
d3 1
a3 2
SHARED_ONLY=	Yes
ONLY_FOR_ARCHS=	alpha amd64 arm i386 powerpc sparc sparc64
d5 4
a8 1
COMMENT=	redesign of Mozilla's browser component
d10 1
a10 4
VER=		3.5.10
DISTNAME=	mozilla-1.9.1
PKGNAME=	firefox35-${VER}
SO_VERSION=	23.0
d13 2
a14 13
.for _lib in accessibility appcomps auth autoconfig browsercomps \
	browserdirprovider caps chardet chrome commandlines composer \
	cookie docshell embedcomponents fileview gkgfxthebes gklayout \
	gkplugin htmlpars i18n imgicon imglib2 intlapp jar50 jsd \
	mozfind necko nsappshell oji permissions pipboot pipnss \
	pippki places pref rdf remoteservice satchel spellchecker \
	storagecomps system-pref tkautocomplete toolkitcomps txmgr \
	uconv ucvmath universalchardet unixproxy webbrwsr widget_gtk2 \
	windowds xpconnect xpinstall zipwriter gfxpsshar \
	gkgfx gtkxtbin jsj mozjs thebes xpcom xpcom_core xul \
	nullplugin unixprintplugin
SHARED_LIBS+=	${_lib}	${SO_VERSION}
.endfor
d16 1
a16 1
CATEGORIES=	www
d18 2
a19 2
FLAVORS=	debug
FLAVOR?=
d29 2
a30 2
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/firefox/releases/${VER}/source/
DISTFILES=	firefox-${VER}.source.tar.bz2
d32 1
a32 14
MODULES=	devel/gettext lang/python
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
		:zip->=2.3:archivers/zip
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		nspr4.>=21,plc4.>=21,plds4.>=21:nspr->=4.8:devel/nspr \
		nss3.>=25,smime3.>=25,softokn3.>=25,ssl3.>=25:nss->=3.12.6:security/nss \
		sqlite3.>=13.3:sqlite3->=3.6.16.1:databases/sqlite3
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xi \
		Xinerama Xrandr Xrender Xt atk-1.0 c cairo expat fontconfig \
		freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png pthread pthread-stubs sndio stdc++ xcb z \
		xcb-render xcb-render-util
d34 1
a34 1
VMEM_WARNING=	Yes
d36 1
a36 2
USE_X11=	Yes
USE_GMAKE=	Yes
d38 1
a38 1
NO_REGRESS=	Yes
d40 5
a44 37
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf \
				${WRKSRC}/js/src/build/autoconf

AUTOCONF_VERSION= 2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS=	--with-system-jpeg=${LOCALBASE}	\
		--with-system-zlib=/usr/lib	\
		--with-system-nspr		\
		--with-system-nss		\
		--with-pthreads			\
		--enable-xft			\
		--disable-optimize		\
		--enable-default-toolkit=cairo-gtk2 \
		--disable-debug			\
		--disable-tests			\
		--disable-freetypetest		\
		--disable-mochitest		\
		--disable-libIDLtest		\
		--disable-glibtest		\
		--disable-pedantic		\
		--disable-installer		\
		--disable-updater		\
		--disable-gnomeui		\
		--disable-gnomevfs		\
		--disable-dbus			\
		--enable-xinerama		\
		--enable-svg			\
		--enable-svg-renderer=cairo	\
		--enable-system-cairo		\
		--enable-system-sqlite		\
		--enable-canvas			\
		--disable-libxul		\
		--disable-crashreporter		\
		--enable-official-branding

# from browser/config/mozconfig
CONFIGURE_ARGS+=--enable-application=browser
d50 13
a62 51
MAKE_ENV=	BUILD_OFFICIAL=1 \
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		MOZILLA_OFFICIAL=1 \
		MOZ_CO_PROJECT=browser \
		NSS_ENABLE_ECC=1 \
		NSS_USE_SYSTEM_SQLITE=1 \
		SO_VERSION="${SO_VERSION}"
CONFIGURE_ENV=	${MAKE_ENV} \
		MOZ_ENABLE_COREXFONTS=1 \
		topsrcdir=${WRKSRC}

MODPY_RUNDEP=	No

MOB=		${WRKSRC}/dist/bin
MOZ=		${PREFIX}/firefox35

DATADIRS=	chrome components defaults dictionaries extensions \
		greprefs icons modules plugins res searchplugins

post-extract:
	@@find ${WRKSRC} -name "*.orig" -exec rm -f {} \;
	@@cp -f ${FILESDIR}/nsSound.cpp ${WRKSRC}/widget/src/gtk2/
	@@cp -f ${FILESDIR}/sydney_audio_sndio.c \
		${WRKSRC}/media/libsydneyaudio/src/

pre-configure:
	cd ${WRKSRC}/js/src && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	${SUBST_CMD} ${WRKSRC}/xpcom/io/nsAppFileLocationProvider.cpp \
		${WRKSRC}/build/unix/mozilla.in \
		${WRKSRC}/extensions/spellcheck/hunspell/src/mozHunspell.cpp \
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/toolkit/xre/nsXREDirProvider.cpp

do-install:
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \;
	${INSTALL_DATA} ${FILESDIR}/browserconfig.properties ${MOB}/*.so.${SO_VERSION} \
		${MOB}/LICENSE ${MOB}/application.ini ${MOB}/blocklist.xml \
		${MOB}/platform.ini ${MOZ}
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/README.OpenBSD \
		${MOZ}/README.OpenBSD
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/firefox.desktop \
		${PREFIX}/share/applications/firefox35.desktop
	${INSTALL_SCRIPT} ${MOB}/firefox ${PREFIX}/bin/firefox35
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/mozilla-xremote-client ${MOB}/regxpcom ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/firefox-bin ${MOZ}/firefox35-bin
@


1.38
log
@Various cleanups :
- use SUBST_CMD instead of perl -pi -e
- use ${LOCALBASE}/${TRUEPREFIX}/${X11BASE} instead of the handpatched
  _XXX_ ones
- harmonize default systemwide plugins/extensions search path to
  lib/mozilla/{plugins,extensions} as done in other mozilla ports, but
keep lib/mozilla-plugins added to MOZ_PLUGIN_PATH atm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/03/31 15:56:44 naddy Exp $
d8 1
a8 1
VER=		3.5.9
d10 2
a11 2
PKGNAME=	firefox35-${VER}p0
SO_VERSION=	22.0
d22 2
a23 3
	windowds xpconnect xpinstall zipwriter freebl3 gfxpsshar \
	gkgfx gtkxtbin jsj mozjs nspr4 nss3 nssckbi nssdbm3 nssutil3 \
	plc4 plds4 smime3 softokn3 ssl3 thebes xpcom xpcom_core xul \
d49 2
d56 2
a57 1
		pixman-1 png pthread pthread-stubs sndio stdc++ xcb z
d67 1
a67 2
				${WRKSRC}/js/src/build/autoconf \
				${WRKSRC}/nsprpub/build/autoconf
d73 2
a134 1
	cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
d147 1
a147 2
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD \
		${FILESDIR}/browserconfig.properties ${MOB}/*.so.${SO_VERSION} \
d151 3
a153 1
	${INSTALL_DATA} ${FILESDIR}/firefox.desktop \
a154 4
	${SUBST_CMD} ${MOZ}/README.OpenBSD \
		${PREFIX}/share/applications/firefox35.desktop
	rm -f ${MOZ}/README.OpenBSD.beforesubst \
		${PREFIX}/share/applications/firefox35.desktop.beforesubst
@


1.37
log
@SECURITY update to 3.5.9:
MFSA 2010-24  XMLDocument::load() doesn't check nsIContentPolicy
MFSA 2010-23 Image src redirect to mailto: URL opens email editor
MFSA 2010-22 Update NSS to support TLS renegotiation indication
MFSA 2010-20 Chrome privilege escalation via forced URL drag and drop
MFSA 2010-19 Dangling pointer vulnerability in nsPluginArray
MFSA 2010-18 Dangling pointer vulnerability in nsTreeContentView
MFSA 2010-17 Remote code execution with use-after-free in nsTreeSelection
MFSA 2010-16 Crashes with evidence of memory corruption
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/03/25 16:34:09 landry Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}
d133 1
a133 1
	perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
d152 1
a152 3
	perl -pi -e 's,!!PREFIX!!,${TRUEPREFIX},g; \
		s,!!LOCALBASE!!,${LOCALBASE},g; s,!!VERSION!!,${VER},g' \
		${MOZ}/README.OpenBSD \
d154 2
@


1.36
log
@Fix SIGBUS on sparc64 : https://bugzilla.mozilla.org/show_bug.cgi?id=514645
hints from martin@@netbsd, many thanks!
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/02/24 16:59:49 sthen Exp $
d8 1
a8 1
VER=		3.5.8
d10 1
a10 1
PKGNAME=	firefox35-${VER}p0
@


1.35
log
@SECURITY update to Firefox 3.5.8. Same diff from naddy@@ and Daniel Dickman.
Update sqlite dependency while there.

ok naddy@@
(reminder, ports is not fully open, do not commit without specific permission)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/01/05 21:26:40 naddy Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}
@


1.35.2.1
log
@MFC:

SECURITY UPDATE to firefox35-3.5.9

Also fix bug#514645
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/02/24 16:59:49 sthen Exp $
d8 1
a8 1
VER=		3.5.9
@


1.35.2.2
log
@MFC:

SECURITY UPDATE to firefox35-3.5.10

only the version update, none of the other changes in -current
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35.2.1 2010/06/12 03:42:22 william Exp $
d8 1
a8 1
VER=		3.5.10
@


1.35.2.3
log
@Upstream moved the distfile.  Noted by and new location given by
Alex Libman, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35.2.2 2010/07/08 03:09:42 william Exp $
d42 1
a42 1
MASTER_SITES=	ftp://ftp.mozilla.org/pub/firefox/releases/${VER}/source/
@


1.34
log
@minor reliability update to 3.5.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/12/26 20:56:24 steven Exp $
d8 1
a8 1
VER=		3.5.7
d50 1
a50 1
		sqlite3.>=13.3:sqlite3->=3.6.13:databases/sqlite3
@


1.33
log
@fix README.OpenBSD path in message

noticed by Kent R. Spillner
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/12/20 20:11:37 naddy Exp $
d8 1
a8 1
VER=		3.5.6
d10 1
a10 1
PKGNAME=	firefox35-${VER}p1
@


1.32
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d10 1
a10 1
PKGNAME=	firefox35-${VER}p0
@


1.31
log
@SECURITY update to 3.5.6.  Fixes:
MFSA 2009-71 GeckoActiveXObject exception messages can be used to enumerate installed COM objects
MFSA 2009-70 Privilege escalation via chrome window.opener
MFSA 2009-69 Location bar spoofing vulnerabilities
MFSA 2009-68 NTLM reflection vulnerability
MFSA 2009-67 Integer overflow, crash in libtheora video library
MFSA 2009-66 Memory safety fixes in liboggplay media library
MFSA 2009-65 Crashes with evidence of memory corruption
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/11/27 21:18:52 naddy Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}
@


1.30
log
@SECURITY update to 3.5.5.  For the list of horrors, see
http://www.mozilla.org/security/known-vulnerabilities/firefox35.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/11/17 23:07:45 ajacoutot Exp $
d8 1
a8 1
VER=		3.5.5
@


1.29
log
@Firefox and Seamonkey bundle their own libnss3, so use same workaround
as for security/nss:
SHA1_Update conflicts with openssl which may be dynamically loaded
at runtime via libcups or libgssapi so causing a crash due to using
the wrong binding.  So rename here to avoid conflict.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/09/18 20:35:27 martynas Exp $
d8 1
a8 1
VER=		3.5.3
d10 1
a10 1
PKGNAME=	firefox35-${VER}p1
@


1.28
log
@- create downloads dir with mode 0700 instead
- pass --disable-crashreporter
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/08/10 06:34:56 kili Exp $
d10 2
a11 2
PKGNAME=	firefox35-${VER}p0
SO_VERSION=	21.2
@


1.27
log
@security update to firefox35-3.5.3.  MFSA 2009-51, MFSA 2009-50,
MFSA 2009-49, MFSA 2009-47.
http://www.mozilla.org/security/known-vulnerabilities/firefox35.html#firefox3.5.3
@
text
@d10 1
a10 1
PKGNAME=	firefox35-${VER}
d95 1
@


1.26
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/08/03 22:15:51 martynas Exp $
d8 1
a8 1
VER=		3.5.2
d10 1
a10 1
PKGNAME=	firefox35-${VER}p1
d43 1
a43 1
DISTFILES=	firefox-${VER}-source.tar.bz2
@


1.25
log
@on pthread_create failure, don't forget to unset & close handle
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/08/03 21:27:00 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p0
d55 1
a55 1
		pixman-1 png pthread stdc++ z sndio
@


1.24
log
@security update to firefox35-3.5.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/07/23 19:04:42 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}
@


1.23
log
@put more work into sydney audio after the report from naddy@@.
- fix some hella lame bugs inherited from sun, and clean up
- despite what the big clever comment says, callback thread will
be started twice if buffering is slow enough and will screw up
playback;  guard it
- supports s16 big endian as well
- audio_callback is void
- dont print stuff to stdout/stderr in the backend
- appropriately set writing buffer
- be more careful with lists in the audio callback
- create worker thread little bit earlier
- things i've forgotten to summarize
should fix stuttering videos & out-of-sync audio in weird cases.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/07/23 17:17:41 martynas Exp $
d8 1
a8 1
VER=		3.5.1
d10 1
a10 1
PKGNAME=	firefox35-${VER}p9
@


1.22
log
@clean up dlsym nonsense;  sndio will always be present for sydney
backend anyway
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/07/21 19:53:17 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p8
@


1.21
log
@do not even try to let configure.in pick up nanojit on sparc64.
sparc* also matches sparc64;  however, native asm code is missing
for jit on sparc64, and jit is not ready for 64-bit in general (yet).
should fix sparc64.  reported by matthieu@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/07/21 19:43:04 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p7
@


1.20
log
@give it a chance to recongize some external libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/07/21 12:12:37 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p6
@


1.19
log
@implement sydney sndio backend.  bump minor;
this was the last step of getting videos working alright.
problem reported by naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/07/21 11:58:54 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p5
@


1.18
log
@- fix endianness checks
- dont use shared sems
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/07/20 23:41:34 martynas Exp $
d10 2
a11 2
PKGNAME=	firefox35-${VER}p4
SO_VERSION=	21.1
d55 1
a55 1
		pixman-1 png pthread stdc++ z
d126 2
@


1.17
log
@- mman needs types
- enable jit.  currently on i386, arm, sparc
tested by naddy@@
javascript performance more than 2x faster, according to sunspider
benchmark
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/07/20 20:04:02 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p3
@


1.16
log
@recognize openbsd nanojit target;  giving jit a chance to build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/07/19 18:38:08 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p2
a87 1
		--disable-jit			\
@


1.15
log
@add cacert class 1 & class 3 certs to ckfw builtins by default.
bumped minor, symbols were added.  req&ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/07/19 15:30:16 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p1
@


1.14
log
@sndio backend for firefox 3.5 nssound.  uses (external) audio/libcanberra
for system events, if installed.  resulting package does not depend
on it though.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/07/17 17:09:35 martynas Exp $
d10 2
a11 2
PKGNAME=	firefox35-${VER}p0
SO_VERSION=	21.0
@


1.13
log
@stability update to firefox 3.5.1.  MFSA 2009-41 doesn't affect this port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/07/15 20:42:39 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}
d46 1
a46 2
RUN_DEPENDS=	:esound-*:audio/esound \
		:desktop-file-utils-*:devel/desktop-file-utils
d126 1
@


1.12
log
@firefox cert handling is unbearable.  so automatically spawn 'Add
exception';  get cert;  and focus 'Confirm' so that one click or
Enter is needed to get in.
"OMGOMGOMG!!!!" marco@@.  naddy@@ did not object.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/06/30 16:16:00 martynas Exp $
d8 1
a8 1
VER=		3.5
d10 1
a10 1
PKGNAME=	firefox35-${VER}p0
@


1.11
log
@update to firefox35-3.5, final release.  note that this is a separate
port;  for testing.  in the similar way that firefox 3.0 was two
releases ago.  we would rather people test final release rather
than some release candidate version.  use at your own risk.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/06/23 17:55:57 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}
@


1.10
log
@ddo not even try to pick up&mix native nspr&nss;  unbreaks if local
nss&nspr is presentt
cleanup xpconnect a bit
bump package name to p2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/06/21 20:46:38 martynas Exp $
d8 1
a8 1
VER=		3.5rc2
d10 1
a10 1
PKGNAME=	firefox35-${VER}p2
@


1.9
log
@resolve collision (firefox.desktop)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/06/21 20:41:40 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p1
@


1.8
log
@- firefox-bin -> firefox35-bin
- don't link mozilla-firefox-bin
- bump to p1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/06/21 18:50:06 martynas Exp $
d148 2
a149 1
	${INSTALL_DATA} ${FILESDIR}/firefox.desktop ${PREFIX}/share/applications
d153 1
a153 1
		${PREFIX}/share/applications/firefox.desktop
@


1.7
log
@let mozilla-firefox and firefox35 coexist together.
mozilla-firefox -> LOCALBASE/mozilla-firefox;  bin/firefox,bin/mozilla-firefox
firefox35 -> LOCALBASE/firefox35;  bin/firefox35
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/06/21 18:42:15 martynas Exp $
d10 1
a10 1
PKGNAME=	firefox35-${VER}p0
d155 2
a156 3
	${INSTALL_PROGRAM} ${MOB}/firefox-bin ${MOB}/mozilla-xremote-client \
		${MOB}/regxpcom ${MOZ}
	ln -f ${MOZ}/firefox-bin ${MOZ}/mozilla-firefox-bin
@


1.6
log
@register nspr&nss;  regen plist
let nspr&nss find external sqlite3
RAND_DEV = /dev/arandom
--disable-jit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/06/21 18:17:11 martynas Exp $
d120 1
a120 1
MOZ=		${PREFIX}/mozilla-firefox
a148 1
	${INSTALL_MAN} ${FILESDIR}/mozilla-firefox.1 ${PREFIX}/man/man1
d151 1
a151 1
		${MOZ}/README.OpenBSD ${PREFIX}/man/man1/mozilla-firefox.1 \
d153 1
a153 3
	ln -f ${PREFIX}/man/man1/mozilla-firefox.1 ${PREFIX}/man/man1/firefox.1
	${INSTALL_SCRIPT} ${MOB}/firefox ${PREFIX}/bin
	ln -f ${PREFIX}/bin/firefox ${PREFIX}/bin/mozilla-firefox
@


1.5
log
@use local nss&nspr;  remove external deps
run autoconf for nspr
pass NSS_ENABLE_ECC=1, NSS_USE_SYSTEM_SQLITE=1
bump so_version major to 21.0
bump pkgname to p0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/06/21 14:28:14 martynas Exp $
d18 7
a24 6
	mozfind mozjs necko nsappshell oji permissions pipboot \
	pipnss pippki places pref rdf remoteservice satchel \
	spellchecker storagecomps system-pref tkautocomplete \
	toolkitcomps txmgr uconv ucvmath universalchardet unixproxy \
	webbrwsr widget_gtk2 windowds xpconnect xpinstall zipwriter \
	gfxpsshar gkgfx gtkxtbin jsj thebes xpcom xpcom_core xul \
d89 1
@


1.4
log
@register&regen with proper mozjs
remove pkgpath/conflict markers
sync wantlib
depends on sqlite 3.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/06/21 11:41:31 martynas Exp $
d10 2
a11 2
PKGNAME=	firefox35-${VER}
SO_VERSION=	20.0
a49 2
		nspr4.>=20.1,plc4.>=20.1,plds4.>=20.1:nspr->=4.8:devel/nspr \
		nss3.>=22.1,smime3.>=22.1,softokn3.>=22.1,ssl3.>=22.1:nss->=3.12.3:security/nss \
d65 2
a66 1
				${WRKSRC}/js/src/build/autoconf
a71 2
		--with-system-nspr		\
		--with-system-nss		\
d104 1
a104 1
MAKE_ENV=	MOZ_CO_PROJECT=browser \
a105 1
		BUILD_OFFICIAL=1 \
d107 3
d128 1
@


1.3
log
@merge in some changes from mozilla-firefox:
CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
turn off Ignore Scaling and Shrink to fit page width
sync switches w/ ff3
update about url
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/06/21 11:36:11 martynas Exp $
d18 7
a24 7
	mozfind necko nsappshell oji permissions pipboot pipnss \
	pippki places pref rdf remoteservice satchel spellchecker \
	storagecomps system-pref tkautocomplete toolkitcomps txmgr \
	uconv ucvmath universalchardet unixproxy webbrwsr widget_gtk2 \
	windowds xpconnect xpinstall zipwriter gfxpsshar gkgfx \
	gtkxtbin jsj thebes xpcom xpcom_core xul nullplugin \
	unixprintplugin
d50 4
a53 4
		nspr4.>=20,plc4.>=20,plds4.>=20:nspr->=4.8:devel/nspr \
		nss3.>=22,smime3.>=22,softokn3.>=22,ssl3.>=22:nss->=3.12.3:security/nss \
		sqlite3.>=10.0:sqlite3->=3.5:databases/sqlite3
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes Xft Xi \
@


1.2
log
@- use so_version for js
- add js to guess_dirs, and run autoconf for it
- dont redef system types
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2009/03/10 12:08:34 fgsch Exp $
a113 1
		PYTHON="${MODPY_BIN}" \
@


1.1
log
@Initial revision
@
text
@d66 2
a67 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf
d129 1
@


1.1.1.1
log
@import firefox35-3.5rc2, been using it for couple of months.
wip, not linked to the build yet.  needs nspr&nss updates.
@
text
@@
