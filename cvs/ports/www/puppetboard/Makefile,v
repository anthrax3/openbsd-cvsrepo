head	1.22;
access;
symbols
	OPENBSD_6_1:1.21.0.2
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.17.0.2
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.11.0.4
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	jasper_20132712:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2017.04.19.14.26.24;	author sebastia;	state Exp;
branches;
next	1.21;
commitid	6iAXipEExRbECn7W;

1.21
date	2017.02.13.14.22.00;	author sebastia;	state Exp;
branches;
next	1.20;
commitid	NOOOYxyxtkpFfdG6;

1.20
date	2017.01.03.19.28.48;	author landry;	state Exp;
branches;
next	1.19;
commitid	FjegDtQNQE99RNGk;

1.19
date	2016.11.02.09.01.13;	author danj;	state Exp;
branches;
next	1.18;
commitid	INr0zNQaJzHgaPPG;

1.18
date	2016.09.06.12.08.18;	author jasper;	state Exp;
branches;
next	1.17;
commitid	Rt1SpyNV2ZXjHBQo;

1.17
date	2016.07.04.07.44.24;	author jasper;	state Exp;
branches;
next	1.16;
commitid	k3NJhlbr15pC8Otk;

1.16
date	2016.06.16.09.55.55;	author jasper;	state Exp;
branches;
next	1.15;
commitid	lnz6GNqlHWRg7fGa;

1.15
date	2016.06.01.12.14.39;	author jasper;	state Exp;
branches;
next	1.14;
commitid	Ss5tyeBfy4o9tZG6;

1.14
date	2016.01.30.09.26.43;	author jasper;	state Exp;
branches;
next	1.13;
commitid	5bCr4IGW7v4nDONj;

1.13
date	2016.01.07.21.35.28;	author jasper;	state Exp;
branches;
next	1.12;
commitid	yiDwkEx5qtLmvGpL;

1.12
date	2015.10.26.18.08.01;	author jasper;	state Exp;
branches;
next	1.11;
commitid	cWXtfpjXNDxZSP9v;

1.11
date	2015.08.01.06.13.25;	author ajacoutot;	state Exp;
branches;
next	1.10;
commitid	0HCcD9d3DYSLZurb;

1.10
date	2015.07.15.22.24.51;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	PXqj7aMR0Nz0ogPW;

1.9
date	2015.04.02.14.21.17;	author jasper;	state Exp;
branches;
next	1.8;
commitid	4Dkfcsk2uZtFDSwy;

1.8
date	2014.08.13.08.44.47;	author sebastia;	state Exp;
branches;
next	1.7;
commitid	Eq87BRqVCiEEqboH;

1.7
date	2014.06.17.11.55.11;	author jasper;	state Exp;
branches;
next	1.6;
commitid	ZktY818o0u15DWHF;

1.6
date	2014.01.22.09.21.17;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2014.01.15.08.41.08;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2014.01.13.10.45.34;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2013.12.30.07.37.55;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2013.12.27.11.06.33;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2013.12.27.09.41.59;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.12.27.09.41.59;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Update to 0.2.2, and add a patch to cope with the recent py-werkzeug update
to 0.12.x
@
text
@# $OpenBSD: Makefile,v 1.21 2017/02/13 14:22:00 sebastia Exp $

COMMENT=		web interface to PuppetDB

MODPY_EGG_VERSION=	0.2.2
DISTNAME=		puppetboard-${MODPY_EGG_VERSION}
CATEGORIES=		www

MAINTAINER=		Sebastian Reitenbach <sebastia@@openbsd.org>

# Apache2
PERMIT_PACKAGE_CDROM=	Yes

MODULES=		lang/python
MODPY_PI =		Yes

MODPY_VERSION=		${MODPY_DEFAULT_VERSION_3}

NO_BUILD=		Yes
NO_TEST=		Yes
PKG_ARCH=		*

RUN_DEPENDS=		databases/py-puppetdb${MODPY_FLAVOR}>=0.3.2 \
			www/py-flask-wtf${MODPY_FLAVOR}>=0.9.4p0 \
			www/py-gunicorn${MODPY_FLAVOR} \
			www/py-requests${MODPY_FLAVOR}

PREFIX=			${VARBASE}/www
INSTDIR=		${PREFIX}/puppetboard
SUBST_VARS+=		INSTDIR

do-install:
	cp -Rp ${WRKSRC} ${INSTDIR}
	mv ${INSTDIR}/puppetboard/default_settings.py \
		${INSTDIR}/puppetboard/default_settings.py.dist
	${INSTALL_DATA_DIR} ${INSTDIR}/puppetboard/{public,tmp}/
	${INSTALL_DATA} ${FILESDIR}/puppetboard_wsgi.py ${INSTDIR}
	chown -R ${SHAREOWN}:${SHAREGRP} ${INSTDIR}

.include <bsd.port.mk>
@


1.21
log
@Update to 0.2.1, now with daily run charts on overview page
and a little python3 compatitbility patch to fix the inventory page rendering
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2017/01/03 19:28:48 landry Exp $
d5 1
a5 1
MODPY_EGG_VERSION=	0.2.1
@


1.20
log
@bump ports depending on python3 in www
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/11/02 09:01:13 danj Exp $
d5 1
a5 1
MODPY_EGG_VERSION=	0.2.0
a6 1
REVISION=		2
d23 1
a23 1
RUN_DEPENDS=		databases/py-puppetdb${MODPY_FLAVOR}>=0.2.3 \
@


1.19
log
@Remove py3 flavor but make it default. For the rationale, see
https://marc.info/?l=openbsd-ports-cvs&m=147393010423200&w=2

While there, fix wrong substitution in the PLIST

test and OK sebastia@@ (who noticed the rc script needed to be updated)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/09/06 12:08:18 jasper Exp $
d7 1
a7 1
REVISION=		1
@


1.18
log
@another port sebastia@@ takes over
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/07/04 07:44:24 jasper Exp $
d7 1
a7 1
REVISION=		0
d18 1
a18 2
FLAVORS =		python3
FLAVOR ?=
@


1.17
log
@update to puppetboard-0.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/06/16 09:55:55 jasper Exp $
d7 1
d10 1
a10 1
MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>
@


1.16
log
@remove lies spotted by sebastia@@; puppetboard supports SSL to puppetdb now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2016/06/01 12:14:39 jasper Exp $
d5 1
a5 1
MODPY_EGG_VERSION=	0.1.3
a6 1
REVISION=		0
@


1.15
log
@- update to puppetboard-0.1.3 (this version requires puppetdb >= 3)
- add python3 flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2016/01/30 09:26:43 jasper Exp $
d7 1
@


1.14
log
@add portroach annotation; newer versions require puppetdb4
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.13 2016/01/07 21:35:28 jasper Exp $

PORTROACH_COMMENT=	newer versions (>= 0.1.0) require puppetdb 4
PORTROACH=		limit:^0
d5 1
a5 1
MODPY_EGG_VERSION=	0.0.5
a7 1
REVISION=		0
d14 1
d17 2
a18 1
MODULES=		lang/python
d24 4
a27 4
RUN_DEPENDS=		databases/py-puppetdb>=0.1.0,<0.2.0 \
			www/py-flask-wtf>=0.9.4p0 \
			www/py-gunicorn \
			www/py-requests
@


1.13
log
@bump ports that now have a pypi homepage
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.12 2015/10/26 18:08:01 jasper Exp $
@


1.12
log
@update to puppetboard-0.0.5
- please note the configuration file has to be updated, see faq/current.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/08/01 06:13:25 ajacoutot Exp $
d8 1
@


1.11
log
@Fix and extend pexp.

mismatch reported by sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/07/15 22:24:51 ajacoutot Exp $
d5 1
a5 1
MODPY_EGG_VERSION=	0.0.4
a6 1
REVISION=		3
d22 1
a22 1
RUN_DEPENDS=		databases/py-puppetdb>=0.1.0 \
@


1.10
log
@Fix pexp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/04/02 14:21:17 jasper Exp $
d7 1
a7 1
REVISION=		2
@


1.9
log
@- switch to MODPY_PI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/08/13 08:44:47 sebastia Exp $
d7 1
a7 1
REVISION=		1
@


1.8
log
@puppetboard doesn't need to run as root, so add a user for it.

feedback and OK jasper@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/06/17 11:55:11 jasper Exp $
d15 1
a15 1
MASTER_SITES=		${MASTER_SITE_PYPI:=p/puppetboard/}
@


1.7
log
@- fix ${pexp}

w/ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/01/22 09:21:17 jasper Exp $
d7 1
a7 1
REVISION=		0
@


1.6
log
@update to puppetboard-0.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/01/15 08:41:08 jasper Exp $
d7 1
@


1.5
log
@sync with pypuppetdb-0.1.0 and unbreak SSL support while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/01/13 10:45:34 jasper Exp $
d5 2
a6 3
# git clone of eadcf8708ccdb6cfa7981f91bee425169d23234b
DISTNAME=		puppetboard-0.0.1
REVISION=		2
d14 1
a14 1
MASTER_SITES=		http://distfiles.nl/
d23 1
a23 1
			www/py-flask-wtf \
a30 4
# Don't bother installing some screenshots of what we're about to run
post-extract:
	rm -r ${WRKSRC}/screenshots/

d36 1
a36 1
	mv ${INSTDIR}/wsgi.py ${INSTDIR}/puppetboard_wsgi.py
@


1.4
log
@add patch from upstream to report rounded average resources per node
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/12/30 07:37:55 jasper Exp $
d7 1
a7 1
REVISION=		1
d23 1
a23 1
RUN_DEPENDS=		databases/py-puppetdb \
@


1.3
log
@add missing MASTER_SITES; spotted by espie@@/naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/12/27 11:06:33 jasper Exp $
d7 1
a7 1
REVISION=		0
@


1.2
log
@add rc script

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/12/27 09:41:59 jasper Exp $
d14 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d39 1
@


1.1.1.1
log
@import puppetboard (git HEAD)

Puppetboard is a web interface to PuppetDB aiming to replace the
reporting functionality of Puppet Dashboard.

ok aja@@

@
text
@@
