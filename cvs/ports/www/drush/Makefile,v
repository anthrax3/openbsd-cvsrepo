head	1.11;
access;
symbols
	OPENBSD_6_2:1.11.0.6
	OPENBSD_6_2_BASE:1.11
	OPENBSD_6_1:1.11.0.4
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.11.0.2
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.4
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.2
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.6
	OPENBSD_5_0:1.3.0.4
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.1.1.1.0.4
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	ports:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2016.02.27.17.15.24;	author sthen;	state Exp;
branches;
next	1.10;
commitid	XrcyUzAyscdPERgd;

1.10
date	2015.11.02.11.56.55;	author espie;	state Exp;
branches;
next	1.9;
commitid	ox8NBCUwS6UB4UwE;

1.9
date	2015.06.05.06.00.22;	author robert;	state Exp;
branches;
next	1.8;
commitid	PS9YXjRm9KQkIZjT;

1.8
date	2014.11.06.17.13.40;	author sthen;	state Exp;
branches;
next	1.7;
commitid	ig1O4RkSPXzTZYwZ;

1.7
date	2014.02.08.21.28.03;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2013.08.12.04.11.21;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.11.11.44.41;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2012.04.09.16.12.12;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.12.05.17.34.14;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2010.11.22.08.36.48;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2009.07.27.16.25.55;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.07.27.16.25.55;	author espie;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Update to drush-8.0.3.

This is packaged from a locally generated tarball, built from the downloaded
github archive, plus required dependencies installed via composer. Specifically
not using upstream's normal .phar because we need to patch it so backups work
(it uses options not supported by base tar).

Drop the forced dependency on Drupal 6 as this is suitable for D6/7/8 and is
useful for people who have installed Drupal outside of ports.
@
text
@# $OpenBSD: Makefile,v 1.10 2015/11/02 11:56:55 espie Exp $

COMMENT =	command line access to most of Drupal

CATEGORIES =	www devel

V=		8.0.3
DISTNAME=	drush-$V
EXTRACT_SUFX=	-deps.tar.xz

HOMEPAGE=	http://www.drush.org/

# packaged from github/drush-ops/drush tag 8.0.3 plus dependencies
# fetched using "composer install" as of 20160227
MASTER_SITES=	https://spacehopper.org/mirrors/

MODULES=	lang/php

PERMIT_PACKAGE_CDROM= Yes

NO_BUILD=	Yes
RUN_DEPENDS=	archivers/gtar
SUBST_VARS=	MODPHP_BIN

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/libexec/drush
	cp -R ${WRKDIST}/* ${PREFIX}/libexec/drush
	rm ${PREFIX}/libexec/drush/drush
	rm ${PREFIX}/libexec/drush/drush.bat
	rm -r ${PREFIX}/libexec/drush/tests
	${SUBST_CMD} -m 555 -c ${FILESDIR}/drush ${PREFIX}/bin/drush
	find ${PREFIX}/libexec/drush -name '*.orig' -exec rm {} +
	find ${PREFIX}/libexec/drush -name '.git' -type d -exec rm -rf {} +

.include <bsd.port.mk>
@


1.10
log
@a few minor pkg_subst fixes, for the coming patch (disallow -c without -m
outside of WRKDIR)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/06/05 06:00:22 robert Exp $
d3 21
a23 21
COMMENT =	command line access to most of drupal
CATEGORIES = 	www www/drupal6 devel
MASTER_SITES =	ftp://ftp.drupal.org/pub/drupal/files/projects/
MASTER_SITES0 =	http://download.pear.php.net/package/
HOMEPAGE =	http://drupal.org/
PKG_ARCH =	*
DISTNAME =	drush-7.x-5.9
WRKDIST =	${WRKDIR}/drush
PKGNAME =	drush-5.9
DISTFILES =	${DISTNAME}.tar.gz Console_Table-1.1.3.tgz:0
MODULES =	lang/php
MODPHP_BUILDDEP ?=	No
REVISION =	1

PERMIT_PACKAGE_CDROM = Yes

RUN_DEPENDS = 	www/drupal6/core>=6

do-build:
	${SUBST_CMD} -m 555 -c ${FILESDIR}/drush ${WRKBUILD}/drush
	cp ${WRKDIR}/Console_Table-1.1.3/Table.php ${WRKBUILD}/includes/table.inc
d28 6
a33 3
	-rm ${PREFIX}/libexec/drush/drush
	-rm ${PREFIX}/libexec/drush/drush.bat
	${INSTALL_PROGRAM} ${WRKBUILD}/drush ${PREFIX}/bin
@


1.9
log
@bump revision due to the change of the default php version to 5.6
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/11/06 17:13:40 sthen Exp $
d22 1
a22 1
	${SUBST_CMD} -c ${FILESDIR}/drush ${WRKBUILD}/drush
@


1.8
log
@bump REVISION for php version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/02/08 21:28:03 espie Exp $
d15 1
a15 1
REVISION =	0
@


1.7
log
@update to new version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/08/12 04:11:21 robert Exp $
d15 1
@


1.6
log
@bump REVISION due to the php update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/11 11:44:41 espie Exp $
d9 1
a9 1
DISTNAME =	drush-7.x-5.1
d11 1
a11 1
PKGNAME =	drush-5.1
a14 1
REVISION =	0
@


1.5
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/04/09 16:12:12 espie Exp $
d15 1
@


1.4
log
@much newer version, works with drupal5/6/7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/12/05 17:34:14 landry Exp $
a15 3
PERMIT_DISTFILES_FTP = Yes
PERMIT_PACKAGE_FTP = Yes
PERMIT_DISTFILES_CDROM = Yes
@


1.3
log
@Minor tweak.. www/drupal5 went into the attic, so remove it from drush
CATEGORIES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/11/22 08:36:48 espie Exp $
d9 1
a9 1
DISTNAME =	drush-All-Versions-2.0 
d11 1
a11 2
PKGNAME =	drush-2.0
REVISION =	0
d13 2
d21 1
a21 1
RUN_DEPENDS = 	www/drupal6/core
@


1.2
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/07/27 16:25:55 espie Exp $
d4 1
a4 1
CATEGORIES = 	www www/drupal5 www/drupal6 devel
d12 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d19 1
a19 1
RUN_DEPENDS = 	:drupal-*:www/drupal6/core
@


1.1.1.1
log
@drush is a shell for drupal, that allows some common operations to proceed
from the command line.
@
text
@@
