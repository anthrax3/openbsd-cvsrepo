head	1.7;
access;
symbols
	OPENBSD_4_8:1.6.0.14
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.12
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.10
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.8
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.6
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.4
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3;
locks; strict;
comment	@# @;


1.7
date	2010.10.26.09.09.34;	author landry;	state dead;
branches;
next	1.6;

1.6
date	2007.08.08.17.34.41;	author martynas;	state Exp;
branches;
next	1.5;

1.5
date	2007.04.01.13.19.58;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2007.04.01.09.36.15;	author martynas;	state Exp;
branches;
next	1.3;

1.3
date	2007.03.04.23.37.27;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2006.12.23.08.12.45;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.04.09.47.54;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Minimo 1.8.1.19 was released >2 years ago, its codebase is ffx-2.x,
unmaintained upstream, etc. Another mozilla port bites the dust.
(i'll port its descendant fennec once ffx4 works, if it works someday..)

no objections from zaurus/arm users (sthen, kili, deraadt, todd...)
agreed by stephan@@ & steven@@ at trofea
@
text
@$OpenBSD: patch-minimo_chrome_content_minimo_js,v 1.6 2007/08/08 17:34:41 martynas Exp $
--- minimo/chrome/content/minimo.js.orig	Fri May 25 00:23:25 2007
+++ minimo/chrome/content/minimo.js	Sun Aug  5 15:56:18 2007
@@@@ -400,10 +400,6 @@@@ function MiniNavStartup()
       gPref = Components.classes["@@mozilla.org/preferences-service;1"]
         .getService(nsIPrefBranch);
       var page = null;
-      try {
-        page = gPref.getCharPref("browser.startup.homepage.override");
-      } 
-      catch(e) {page=null;}
 
       try {
         gBackGroundColor = gPref.getCharPref("ui.chromebackgroundcolor");
@@@@ -413,8 +409,6 @@@@ function MiniNavStartup()
       if (page == null)
         page = gPref.getCharPref("browser.startup.homepage");
 
-      gPref.clearUserPref("browser.startup.homepage.override");
-
       if ( page.split("|").length > 1 ) {
            homepages = page.split("|");
       } else {
@@@@ -1685,7 +1679,8 @@@@ function FullScreenToggle()
 
 function DoFullScreen(fullscreen)
 {
-  document.getElementById("nav-bar").hidden = fullscreen;
+  // Do not hide the nav-bar in full screen mode.
+  // document.getElementById("nav-bar").hidden = fullscreen;
 
   // Show a Quit in the context menu
   document.getElementById("context_menu_quit").hidden = !fullscreen;
@@@@ -2331,7 +2326,7 @@@@ function BrowserFileOpen() {
   fp.init(window, null, nsIFilePicker.modeOpenMultiple);
 
   var fileCustomDirFile= refLocalFile.QueryInterface(nsILocalFile);
-  fileCustomDirFile.initWithPath("\\");
+  fileCustomDirFile.initWithPath("/");
   fp.displayDirectory = fileCustomDirFile;
 
   fp.appendFilters(nsIFilePicker.filterAll);
@


1.6
log
@security update to minimo-20070804 which fixes recent gecko
vulnerabilities (and has some minimo-2.0 interface fixes);  ok naddy@@
tested by kili@@ on zaurus, thank you.
@
text
@d1 1
a1 1
$OpenBSD: patch-minimo_chrome_content_minimo_js,v 1.5 2007/04/01 13:19:58 martynas Exp $
@


1.5
log
@more work on minimo:
- WANTLIB for xenocara;
- fix initxpcom crashes with HACK_AROUND_NONREENTRANT_INITXPCOM;
- respect the layout, data files belong to /usr/local/share/minimo;
- respect homepage;
- cleanup;
"looks ok" robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-minimo_chrome_content_minimo_js,v 1.4 2007/04/01 09:36:15 martynas Exp $
--- minimo/chrome/content/minimo.js.orig	Fri Feb 16 02:27:09 2007
+++ minimo/chrome/content/minimo.js	Sun Apr  1 13:48:18 2007
d24 1
a24 1
@@@@ -1629,7 +1623,8 @@@@ function FullScreenToggle()
d34 1
a34 1
@@@@ -2275,7 +2270,7 @@@@ function BrowserFileOpen() {
@


1.4
log
@- update to minimo-20070320 -- 4 months with lots of changes, including
security fixes, and the wholly new interface;
- don't force optimizations;
- use external nss;
ok kili@@
@
text
@d1 1
a1 1
$OpenBSD: patch-minimo_chrome_content_minimo_js,v 1.3 2007/03/04 23:37:27 robert Exp $
d3 22
a24 2
+++ minimo/chrome/content/minimo.js	Wed Mar 28 12:08:10 2007
@@@@ -1629,7 +1629,8 @@@@ function FullScreenToggle()
d34 1
a34 1
@@@@ -2275,7 +2276,7 @@@@ function BrowserFileOpen() {
@


1.3
log
@use more saner defaults for minimo:
- disable SSR mode
- set the default page to a blank one
- do not hide the nav-bar in full screen mode

ok pvalchev@@
@
text
@d1 4
a4 21
$OpenBSD: patch-minimo_chrome_content_minimo_js,v 1.2 2006/12/23 08:12:45 jolan Exp $
--- minimo/chrome/content/minimo.js.orig	Fri Nov 10 21:09:59 2006
+++ minimo/chrome/content/minimo.js	Mon Mar  5 00:13:50 2007
@@@@ -395,16 +395,10 @@@@ function MiniNavStartup()
       gPref = Components.classes["@@mozilla.org/preferences-service;1"]
         .getService(nsIPrefBranch);
       var page = null;
-      try {
-        page = gPref.getCharPref("browser.startup.homepage.override");
-      } 
-      catch(e) {page=null;}
 
       if (page == null)
         page = gPref.getCharPref("browser.startup.homepage");
 
-      gPref.clearUserPref("browser.startup.homepage.override");
-
       if ( page.split("|").length > 1 ) {
            homepages = page.split("|");
       } else {
@@@@ -1509,7 +1503,8 @@@@ function FullScreenToggle()
d14 1
a14 1
@@@@ -2115,7 +2110,7 @@@@ function BrowserFileOpen() {
@


1.2
log
@make startup homepage override work properly, from martynas venckus
@
text
@d1 3
a3 3
$OpenBSD: patch-minimo_chrome_content_minimo_js,v 1.1 2006/12/04 09:47:54 jolan Exp $
--- minimo/chrome/content/minimo.js.orig	Fri Nov 10 22:09:59 2006
+++ minimo/chrome/content/minimo.js	Fri Dec  8 12:21:28 2006
d21 11
a31 1
@@@@ -2115,7 +2109,7 @@@@ function BrowserFileOpen() {
@


1.1
log
@update to 20061120, from Martynas Venckus
@
text
@d1 1
a1 1
$OpenBSD$
d3 19
a21 2
+++ minimo/chrome/content/minimo.js	Fri Nov 24 13:20:41 2006
@@@@ -2115,7 +2115,7 @@@@ function BrowserFileOpen() {
@

