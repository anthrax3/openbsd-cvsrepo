head	1.6;
access;
symbols
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	jolan_2005-may-25:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2007.04.01.09.36.15;	author martynas;	state dead;
branches;
next	1.5;

1.5
date	2006.12.04.09.47.54;	author jolan;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.11.00.58.56;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2005.08.04.05.06.54;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2005.07.13.04.49.56;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.25.06.59.10;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.25.06.59.10;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.6
log
@- update to minimo-20070320 -- 4 months with lots of changes, including
security fixes, and the wholly new interface;
- don't force optimizations;
- use external nss;
ok kili@@
@
text
@$OpenBSD: patch-config_rules_mk,v 1.5 2006/12/04 09:47:54 jolan Exp $
--- config/rules.mk.orig	Thu Sep 14 21:07:03 2006
+++ config/rules.mk	Thu Nov 23 19:03:59 2006
@@@@ -1014,7 +1014,6 @@@@ endif # NO_LD_ARCHIVE_FLAGS
 else # os2 vacpp
 	$(MKSHLIB) -O:$@@ -DLL -INC:_dllentry $(LDFLAGS) $(OBJS) $(LOBJS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE)
 endif # !os2 vacpp
-	chmod +x $@@
 ifndef NO_COMPONENT_LINK_MAP
 ifndef MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS
 ifndef MOZ_DEBUG
@


1.5
log
@update to 20061120, from Martynas Venckus
@
text
@d1 1
a1 1
$OpenBSD: patch-config_rules_mk,v 1.4 2006/01/11 00:58:56 pvalchev Exp $
@


1.4
log
@add ARM configuration and enable on arm; tested on zaurus
XPCOM asm glue still missing, but basically functional
@
text
@d1 4
a4 42
$OpenBSD$
--- config/rules.mk.orig	Tue Aug  2 13:26:31 2005
+++ config/rules.mk	Sat Oct  8 18:35:46 2005
@@@@ -665,7 +665,7 @@@@ ifdef SHARED_LIBRARY
 ifdef IS_COMPONENT
 ifdef GRE_MODULE
 ifndef DISABLE_DIST_GRE
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(GRE_DIST)/components
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(GRE_DIST)/components
 	$(ELF_DYNSTR_GC) $(GRE_DIST)/components/$(SHARED_LIBRARY)
 ifdef BEOS_ADDON_WORKAROUND
 	( cd $(GRE_DIST)/components && $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )
@@@@ -692,7 +692,7 @@@@ endif # GRE_MODULE
 ifneq (,$(filter OS2 WINNT WINCE,$(OS_ARCH)))
 	$(INSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(DIST)/lib
 else
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/lib
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(DIST)/lib
 endif
 ifndef _SKIP_OLD_GRE_INSTALL
 	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(FINAL_TARGET)
@@@@ -763,15 +763,15 @@@@ ifndef NO_INSTALL
 ifdef SHARED_LIBRARY
 ifdef IS_COMPONENT
 ifdef MRE_DIST
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)/components
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)/components
 else
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)/components
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)/components
 endif
 else
 ifdef MRE_DIST
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)
 else
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)
 endif
 endif
 endif # SHARED_LIBRARY
@@@@ -1041,7 +1041,6 @@@@ endif # NO_LD_ARCHIVE_FLAGS
a11 15
@@@@ -1131,6 +1130,14 @@@@ endif
 	$(REPORT_BUILD)
 	@@$(MAKE_DEPS_AUTO)
 	$(ELOG) $(CCC) $(OUTOPTION)$@@ -c $(COMPILE_CXXFLAGS) $(_VPATH_SRCS)
+
+#
+# Temp fix for propolice bug
+#
+nsPresShell.$(OBJ_SUFFIX): nsPresShell.cpp Makefile Makefile.in
+	$(REPORT_BUILD)
+	@@$(MAKE_DEPS_AUTO)
+	$(ELOG) $(CCC) $(OUTOPTION)$@@ -c $(COMPILE_CXXFLAGS) -fno-stack-protector  $(_VPATH_SRCS)
 
 %.$(OBJ_SUFFIX): %.cpp Makefile Makefile.in
 	$(REPORT_BUILD)
@


1.3
log
@update to 20050802 and add some more debug stuff based on what kurt said
on ports@@
@
text
@d1 3
a3 3
$OpenBSD: patch-config_rules_mk,v 1.2 2005/07/13 04:49:56 jolan Exp $
--- config/rules.mk.orig	Tue Aug  2 14:26:31 2005
+++ config/rules.mk	Tue Aug  2 14:40:23 2005
@


1.2
log
@update to 20050712
@
text
@d1 4
a4 4
$OpenBSD$
--- config/rules.mk.orig	Tue Jul 12 21:48:11 2005
+++ config/rules.mk	Tue Jul 12 22:18:52 2005
@@@@ -701,7 +701,7 @@@@ ifdef SHARED_LIBRARY
d13 1
a13 1
@@@@ -728,7 +728,7 @@@@ endif # GRE_MODULE
d22 1
a22 1
@@@@ -799,15 +799,15 @@@@ ifndef NO_INSTALL
d42 1
a42 1
@@@@ -1077,7 +1077,6 @@@@ endif # NO_LD_ARCHIVE_FLAGS
d50 1
a50 1
@@@@ -1167,6 +1166,14 @@@@ endif
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD: patch-config_rules_mk,v 1.2 2005/03/13 05:02:16 kurt Exp $
--- config/rules.mk.orig	Thu Jun 24 14:58:48 2004
+++ config/rules.mk	Wed Mar  9 16:53:06 2005
@@@@ -666,7 +666,7 @@@@ ifdef SHARED_LIBRARY
d13 3
a15 3
@@@@ -676,7 +676,7 @@@@ endif # GRE_MODULE
 ifeq ($(OS_ARCH),OS2)
 	$(INSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(DIST)/lib/components
d17 2
a18 3
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/lib/components
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(DIST)/lib/components
 	$(ELF_DYNSTR_GC) $(DIST)/lib/components/$(SHARED_LIBRARY)
d21 2
a22 1
@@@@ -765,15 +765,15 @@@@ ifndef NO_INSTALL
d42 1
a42 1
@@@@ -1022,7 +1022,6 @@@@ endif # NO_LD_ARCHIVE_FLAGS
d44 1
a44 1
 	$(MKSHLIB) /O:$@@ /DLL /INC:_dllentry $(LDFLAGS) $(OBJS) $(LOBJS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE)
d50 1
a50 1
@@@@ -1113,6 +1112,14 @@@@ endif
@


1.1.1.1
log
@minimo-20050524, mini mozilla

this is smaller than firefox and has special handling for small screens
which is useful for machines like the zaurus.  unfortunately, it's not
there yet, see the TODO.  please don't add this to the www Makefile yet.
@
text
@@
