head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.32
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.30
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.26
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.28
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.24
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.22
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.20
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.18
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.16
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.14
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.12
	OPENBSD_5_0:1.2.0.10
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.8
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.6
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.4
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	aanriot_20070602:1.1.1.1
	aanriot:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2009.04.09.23.53.13;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2007.06.02.15.26.54;	author aanriot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.06.02.15.26.54;	author aanriot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 1.4, based on a diff from and ok with maintainer Claudio Correa.
@
text
@$OpenBSD$
--- src/y.tab.c.bison.orig	Tue Feb 17 19:47:27 2009
+++ src/y.tab.c.bison	Tue Feb 17 19:48:25 2009
@@@@ -198,8 +198,11 @@@@
 extern int globalDebug;
 
 #ifdef HAVE_LIBLDAP
-#include "lber.h"
-#include "ldap.h"
+#ifndef LDAP_DEPRECATED
+#define LDAP_DEPRECATED 1
+#endif
+#include <lber.h>
+#include <ldap.h>
 #endif
 
 #ifdef HAVE_MYSQL
@


1.1
log
@Initial revision
@
text
@d2 4
a5 4
--- src/y.tab.c.bison.orig	Fri Mar 16 05:15:05 2007
+++ src/y.tab.c.bison	Fri Jun  1 19:58:04 2007
@@@@ -189,9 +189,12 @@@@
 #include "sg.h"
d12 1
a12 1
 #endif
d15 1
a15 3
+#endif
 
 #include "sgEx.h"
d17 1
a17 27
@@@@ -2943,7 +2946,7 @@@@ struct Source *sgFindSource (bsrc, net, ident, domain)
 	  founduser = 1;
 	  unblockeduser = 1;
 	  if(s->userquota.seconds != 0){
-            struct UserInfo uq;
+            // struct UserInfo uq;
 	    time_t t = time(NULL) + globalDebugTimeDelta;
 	    //sgLogError("status %d time %d lasttime %d consumed %d", userquota->status, userquota->time, userquota->last, userquota->consumed);
 	    //sgLogError("renew %d seconds %d", s->userquota.renew, s->userquota.seconds);
@@@@ -3929,11 +3932,14 @@@@ void sgTimeSetAcl()
   for(rew = Rewrite; rew != NULL; rew = rew->next){
     if(rew->time != NULL){
       rew->active = rew->time->active;
-      if(rew->within == OUTSIDE)
-	if(rew->active)
+      if(rew->within == OUTSIDE) {
+	if(rew->active) {
 	  rew->active = 0;
-	else
+	}
+	else  {
 	  rew->active = 1;
+	}
+      }
     }
   }
 }
@


1.1.1.1
log
@squidGuard is a combined filter, redirector and access controller plugin
for Squid. It can be used to limit the web access for some users, block
access to URLs, redirect trafic, etc.

from Claudio Correa <correa@@pucpcaldas.br>, thanks.
@
text
@@
