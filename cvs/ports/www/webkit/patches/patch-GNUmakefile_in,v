head	1.40;
access;
symbols
	OPENBSD_6_0:1.40.0.2
	OPENBSD_6_0_BASE:1.40
	OPENBSD_5_9:1.39.0.2
	OPENBSD_5_9_BASE:1.39
	OPENBSD_5_8:1.39.0.4
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.38.0.2
	OPENBSD_5_7_BASE:1.38
	OPENBSD_5_6:1.36.0.2
	OPENBSD_5_6_BASE:1.36
	OPENBSD_5_5:1.28.0.2
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.9.0.4
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2;
locks; strict;
comment	@# @;


1.40
date	2016.03.16.07.10.57;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	oPcf1vDRhq4iPuwA;

1.39
date	2015.05.20.15.32.54;	author ajacoutot;	state Exp;
branches
	1.39.2.1;
next	1.38;
commitid	xJOF76FfGW7vXv8h;

1.38
date	2015.01.10.00.38.39;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	6GNZjB621kuzFsEK;

1.37
date	2014.09.30.12.18.09;	author ajacoutot;	state Exp;
branches;
next	1.36;
commitid	K8DkGyEKePFKvQ1V;

1.36
date	2014.07.14.21.13.31;	author ajacoutot;	state Exp;
branches
	1.36.2.1;
next	1.35;
commitid	Nz1KPcOJtAApHF1B;

1.35
date	2014.05.26.16.52.35;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2014.04.20.16.40.55;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2014.04.11.18.27.45;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2014.03.26.21.10.06;	author landry;	state Exp;
branches;
next	1.31;

1.31
date	2014.03.25.06.25.45;	author landry;	state Exp;
branches;
next	1.30;

1.30
date	2014.03.23.12.59.57;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2014.03.23.09.51.33;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2014.01.29.17.28.05;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2014.01.28.23.24.42;	author landry;	state Exp;
branches;
next	1.26;

1.26
date	2014.01.27.19.56.20;	author landry;	state Exp;
branches;
next	1.25;

1.25
date	2013.11.14.16.47.00;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.10.20.13.24.29;	author landry;	state Exp;
branches;
next	1.23;

1.23
date	2013.10.06.14.03.42;	author landry;	state Exp;
branches;
next	1.22;

1.22
date	2013.08.06.19.11.30;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2013.06.19.13.24.17;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2013.04.13.09.11.02;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2012.08.22.07.48.37;	author landry;	state Exp;
branches;
next	1.18;

1.18
date	2012.08.07.09.35.38;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2012.04.30.13.31.06;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2012.04.03.15.39.35;	author landry;	state Exp;
branches;
next	1.15;

1.15
date	2012.02.24.16.36.00;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2011.10.13.06.52.49;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2011.07.11.12.08.24;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2011.07.05.11.34.27;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2011.06.17.22.10.40;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2011.05.11.06.00.08;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.19.12.29.50;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2010.07.03.07.53.04;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2010.05.23.10.27.46;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.04.22.13.37.00;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2010.01.10.20.06.17;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2009.11.29.10.08.26;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2009.10.11.18.31.12;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.01.05.51.31;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.27.19.25.09;	author landry;	state Exp;
branches;
next	;

1.36.2.1
date	2015.01.12.13.21.59;	author ajacoutot;	state Exp;
branches;
next	;
commitid	XKidCOC6ZDYP6zNT;

1.39.2.1
date	2016.03.19.10.33.08;	author ajacoutot;	state Exp;
branches;
next	;
commitid	CO9qkVWh5gncfaCV;


desc
@@


1.40
log
@SECURITY update to webkit-2.4.10.
@
text
@$OpenBSD: patch-GNUmakefile_in,v 1.39 2015/05/20 15:32:54 ajacoutot Exp $

- chunk 1->4 : remove silent build lines
- chunk 5 : append extra -O0 cflags for sparc64 which otherwise result in overoptimization
  by emitting a fdtox %r8, %r7 call, whose second operand isn't even and thus invalid.
(on Source/JavaScriptCore/runtime/NumberPrototype.cpp)
- chunk 6->9 : fix variable quoting to properly install doc in a versionned dir

--- GNUmakefile.in.orig	Mon Mar 14 08:37:14 2016
+++ GNUmakefile.in	Tue Mar 15 08:11:20 2016
@@@@ -12541,11 +12541,11 @@@@ am__v_P_0 = false
 am__v_P_1 = :
 AM_V_GEN = $(am__v_GEN_@@AM_V@@)
 am__v_GEN_ = $(am__v_GEN_@@AM_DEFAULT_V@@)
-am__v_GEN_0 = @@echo "  GEN     " $@@;
+am__v_GEN_0 =
 am__v_GEN_1 = 
 AM_V_at = $(am__v_at_@@AM_V@@)
 am__v_at_ = $(am__v_at_@@AM_DEFAULT_V@@)
-am__v_at_0 = @@
+am__v_at_0 =
 am__v_at_1 = 
 DEFAULT_INCLUDES = -I.@@am__isrc@@
 depcomp = $(SHELL) $(top_srcdir)/Source/autotools/depcomp
@@@@ -12555,7 +12555,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 AM_V_CC = $(am__v_CC_@@AM_V@@)
 am__v_CC_ = $(am__v_CC_@@AM_DEFAULT_V@@)
-am__v_CC_0 = @@echo "  CC      " $@@;
+am__v_CC_0 =
 am__v_CC_1 = 
 CCLD = $(CC)
 LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \
@@@@ -12563,13 +12563,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
 	$(AM_LDFLAGS) $(LDFLAGS) -o $@@
 AM_V_CCLD = $(am__v_CCLD_@@AM_V@@)
 am__v_CCLD_ = $(am__v_CCLD_@@AM_DEFAULT_V@@)
-am__v_CCLD_0 = @@echo "  CCLD    " $@@;
+am__v_CCLD_0 =
 am__v_CCLD_1 = 
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 AM_V_CXX = $(am__v_CXX_@@AM_V@@)
 am__v_CXX_ = $(am__v_CXX_@@AM_DEFAULT_V@@)
-am__v_CXX_0 = @@echo "  CXX     " $@@;
+am__v_CXX_0 =
 am__v_CXX_1 = 
 CXXLD = $(CXX)
 CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) \
@@@@ -12577,7 +12577,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
 	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@@
 AM_V_CXXLD = $(am__v_CXXLD_@@AM_V@@)
 am__v_CXXLD_ = $(am__v_CXXLD_@@AM_DEFAULT_V@@)
-am__v_CXXLD_0 = @@echo "  CXXLD   " $@@;
+am__v_CXXLD_0 =
 am__v_CXXLD_1 = 
 SOURCES = $(Libraries_WebExtensions_libWebExtensionTest_la_SOURCES) \
 	$(Libraries_WebExtensions_libWebProcessTest_la_SOURCES) \
@@@@ -72944,7 +72944,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
 @@am__fastdepCXX_FALSE@@	$(AM_V_CXX@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CPPFLAGS) $(CPPFLAGS) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CXXFLAGS) $(CXXFLAGS) -c -o Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberObject.lo `test -f 'Source/JavaScriptCore/runtime/NumberObject.cpp' || echo '$(srcdir)/'`Source/JavaScriptCore/runtime/NumberObject.cpp
 
 Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo: Source/JavaScriptCore/runtime/NumberPrototype.cpp
-@@am__fastdepCXX_TRUE@@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CPPFLAGS) $(CPPFLAGS) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CXXFLAGS) $(CXXFLAGS) -MT Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo -MD -MP -MF Source/JavaScriptCore/runtime/$(DEPDIR)/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.Tpo -c -o Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo `test -f 'Source/JavaScriptCore/runtime/NumberPrototype.cpp' || echo '$(srcdir)/'`Source/JavaScriptCore/runtime/NumberPrototype.cpp
+@@am__fastdepCXX_TRUE@@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CPPFLAGS) $(CPPFLAGS) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CXXFLAGS) $(CXXFLAGS) -O0 -MT Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo -MD -MP -MF Source/JavaScriptCore/runtime/$(DEPDIR)/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.Tpo -c -o Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo `test -f 'Source/JavaScriptCore/runtime/NumberPrototype.cpp' || echo '$(srcdir)/'`Source/JavaScriptCore/runtime/NumberPrototype.cpp
 @@am__fastdepCXX_TRUE@@	$(AM_V_at)$(am__mv) Source/JavaScriptCore/runtime/$(DEPDIR)/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.Tpo Source/JavaScriptCore/runtime/$(DEPDIR)/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.Plo
 @@AMDEP_TRUE@@@@am__fastdepCXX_FALSE@@	$(AM_V_CXX)source='Source/JavaScriptCore/runtime/NumberPrototype.cpp' object='Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo' libtool=yes @@AMDEPBACKSLASH@@
 @@AMDEP_TRUE@@@@am__fastdepCXX_FALSE@@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
@@@@ -82517,8 +82517,8 @@@@ install-data-local:
 @@ENABLE_WEBKIT1_TRUE@@	then echo 1>&2 'No documentation to install' ; \
 @@ENABLE_WEBKIT1_TRUE@@	else \
 @@ENABLE_WEBKIT1_TRUE@@	  DOC_MODULE_VERSION=`cat ./Documentation/webkitgtk/version.xml`; \
-@@ENABLE_WEBKIT1_TRUE@@	  if test -n "$(DOC_MODULE_VERSION)"; then \
-@@ENABLE_WEBKIT1_TRUE@@	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk-$(DOC_MODULE_VERSION)"; \
+@@ENABLE_WEBKIT1_TRUE@@	  if test -n "$${DOC_MODULE_VERSION}"; then \
+@@ENABLE_WEBKIT1_TRUE@@	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk-$${DOC_MODULE_VERSION}"; \
 @@ENABLE_WEBKIT1_TRUE@@	  else \
 @@ENABLE_WEBKIT1_TRUE@@	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk"; \
 @@ENABLE_WEBKIT1_TRUE@@	  fi; \
@@@@ -82527,9 +82527,9 @@@@ install-data-local:
 @@ENABLE_WEBKIT1_TRUE@@	    echo ' $(INSTALL_DATA) '$$i ; \
 @@ENABLE_WEBKIT1_TRUE@@	    $(INSTALL_DATA) $$i $${installdir}; \
 @@ENABLE_WEBKIT1_TRUE@@	  done; \
-@@ENABLE_WEBKIT1_TRUE@@	  if test -n "$(DOC_MODULE_VERSION)"; then \
+@@ENABLE_WEBKIT1_TRUE@@	  if test -n "$${DOC_MODULE_VERSION}"; then \
 @@ENABLE_WEBKIT1_TRUE@@	    mv -f $${installdir}/webkitgtk.devhelp2 \
-@@ENABLE_WEBKIT1_TRUE@@	      $${installdir}/webkitgtk-$(DOC_MODULE_VERSION).devhelp2; \
+@@ENABLE_WEBKIT1_TRUE@@	      $${installdir}/webkitgtk-$${DOC_MODULE_VERSION}.devhelp2; \
 @@ENABLE_WEBKIT1_TRUE@@	  fi; \
 @@ENABLE_WEBKIT1_TRUE@@	fi
 @@ENABLE_WEBKIT2_TRUE@@	@@installfiles=`echo ./Documentation/webkit2gtk/html/*`; \
@@@@ -82557,8 +82557,8 @@@@ install-data-local:
 	then echo 1>&2 'No documentation to install' ; \
 	else \
 	  DOC_MODULE_VERSION=`cat ./Documentation/webkitdomgtk/version.xml`; \
-	  if test -n "$(DOC_MODULE_VERSION)"; then \
-	    installdir="$(DESTDIR)$(HTML_DIR)/webkitdomgtk-$(DOC_MODULE_VERSION)"; \
+	  if test -n "$${DOC_MODULE_VERSION}"; then \
+	    installdir="$(DESTDIR)$(HTML_DIR)/webkitdomgtk-$${DOC_MODULE_VERSION}"; \
 	  else \
 	    installdir="$(DESTDIR)$(HTML_DIR)/webkitdomgtk"; \
 	  fi; \
@@@@ -82567,9 +82567,9 @@@@ install-data-local:
 	    echo ' $(INSTALL_DATA) '$$i ; \
 	    $(INSTALL_DATA) $$i $${installdir}; \
 	  done; \
-	  if test -n "$(DOC_MODULE_VERSION)"; then \
+	  if test -n "$${DOC_MODULE_VERSION}"; then \
 	    mv -f $${installdir}/webkitdomgtk.devhelp2 \
-	      $${installdir}/webkitdomgtk-$(DOC_MODULE_VERSION).devhelp2; \
+	      $${installdir}/webkitdomgtk-$${DOC_MODULE_VERSION}.devhelp2; \
 	  fi; \
 	fi
 @@ENABLE_GTK_DOC_TRUE@@	@@$(AM_V_GEN) PKG_CONFIG=$(PKG_CONFIG) $(PYTHON) $(srcdir)/Tools/gtk/generate-gtkdoc --rebase --virtual-root=$${DESTDIR}
@


1.39
log
@Update to webkit-2.4.9.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.38 2015/01/10 00:38:39 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Wed May 20 11:29:33 2015
+++ GNUmakefile.in	Wed May 20 15:16:37 2015
@@@@ -12574,11 +12574,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12588,7 +12588,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12596,13 +12596,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12610,7 +12610,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72933,7 +72933,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82504,8 +82504,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82514,9 +82514,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82544,8 +82544,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82554,9 +82554,9 @@@@ install-data-local:
@


1.39.2.1
log
@SECURITY update to WebKitGTK+ 2.4.10.

CVE-2015-1120, CVE-2015-1076, CVE-2015-1071, CVE-2015-1081, CVE-2015-1122,
CVE-2015-1155, CVE-2014-1748, CVE-2015-3752, CVE-2015-5809, CVE-2015-5928,
CVE-2015-3749, CVE-2015-3659, CVE-2015-3748, CVE-2015-3743, CVE-2015-3731,
CVE-2015-3745, CVE-2015-5822, CVE-2015-3658, CVE-2015-3741, CVE-2015-3727,
CVE-2015-5801, CVE-2015-5788, CVE-2015-3747, CVE-2015-5794, CVE-2015-1127,
CVE-2015-1153, CVE-2015-1083
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.39 2015/05/20 15:32:54 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Mon Mar 14 08:37:14 2016
+++ GNUmakefile.in	Tue Mar 15 08:11:20 2016
@@@@ -12541,11 +12541,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12555,7 +12555,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12563,13 +12563,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12577,7 +12577,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72944,7 +72944,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82517,8 +82517,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82527,9 +82527,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82557,8 +82557,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82567,9 +82567,9 @@@@ install-data-local:
@


1.38
log
@Update to webkit-2.4.8.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.37 2014/09/30 12:18:09 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Wed Jan  7 10:48:04 2015
+++ GNUmakefile.in	Fri Jan  9 18:30:52 2015
@@@@ -12429,11 +12429,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12443,7 +12443,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12451,13 +12451,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12465,7 +12465,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72779,7 +72779,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82350,8 +82350,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82360,9 +82360,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82390,8 +82390,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82400,9 +82400,9 @@@@ install-data-local:
@


1.37
log
@Minor update to webkit-2.4.6.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.36 2014/07/14 21:13:31 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Fri Sep 26 13:31:23 2014
+++ GNUmakefile.in	Tue Sep 30 09:03:48 2014
@@@@ -12420,11 +12420,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12434,7 +12434,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12442,13 +12442,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12456,7 +12456,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72771,7 +72771,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82342,8 +82342,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82352,9 +82352,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82382,8 +82382,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82392,9 +82392,9 @@@@ install-data-local:
@


1.36
log
@Update to webkit-2.4.4.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.35 2014/05/26 16:52:35 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Tue Jul  8 13:15:04 2014
+++ GNUmakefile.in	Mon Jul 14 19:31:35 2014
@@@@ -12418,11 +12418,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12432,7 +12432,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12440,13 +12440,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12454,7 +12454,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72757,7 +72757,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82333,8 +82333,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82343,9 +82343,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82373,8 +82373,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82383,9 +82383,9 @@@@ install-data-local:
@


1.36.2.1
log
@SECURITY update to webkit-2.4.8v1.
CVE-2014-1344, CVE-2014-1384, CVE-2014-1385, CVE-2014-1386, CVE-2014-1387,
CVE-2014-1388, CVE-2014-1389, CVE-2014-1390.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.36 2014/07/14 21:13:31 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Wed Jan  7 10:48:04 2015
+++ GNUmakefile.in	Mon Jan 12 10:43:38 2015
@@@@ -12429,11 +12429,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12443,7 +12443,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12451,13 +12451,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12465,7 +12465,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72779,7 +72779,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82350,8 +82350,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82360,9 +82360,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82390,8 +82390,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82400,9 +82400,9 @@@@ install-data-local:
@


1.35
log
@Minor update to WebKit 2.4.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.34 2014/04/20 16:40:55 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Mon May 26 10:32:29 2014
+++ GNUmakefile.in	Mon May 26 13:49:03 2014
@@@@ -12437,11 +12437,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12451,7 +12451,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12459,13 +12459,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12473,7 +12473,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72804,7 +72804,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82391,8 +82391,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82401,9 +82401,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82431,8 +82431,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82441,9 +82441,9 @@@@ install-data-local:
@


1.34
log
@Minor update to webkit-2.4.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.33 2014/04/11 18:27:45 ajacoutot Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Mon Apr 14 14:25:06 2014
+++ GNUmakefile.in	Sun Apr 20 11:11:51 2014
@@@@ -12426,11 +12426,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12440,7 +12440,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12448,13 +12448,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12462,7 +12462,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 1
@@@@ -72778,7 +72778,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82369,8 +82369,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82379,9 +82379,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82409,8 +82409,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82419,9 +82419,9 @@@@ install-data-local:
@


1.33
log
@Remove fcntl call to set access mode flags on the duplicated files
descriptor. Those flags make fcntl to fail (upstream).

ok landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.32 2014/03/26 21:10:06 landry Exp $
d4 1
a4 2
- chunk 5 : install GtkLauncher
- chunk 6 : append extra -O0 cflags for sparc64 which otherwise result in overoptimization
d7 1
a7 1
- chunk 7->10 : fix variable quoting to properly install doc in a versionned dir
d9 3
a11 3
--- GNUmakefile.in.orig	Mon Mar 24 12:03:00 2014
+++ GNUmakefile.in	Fri Apr 11 15:11:07 2014
@@@@ -12428,11 +12428,11 @@@@ am__v_P_0 = false
d25 1
a25 1
@@@@ -12442,7 +12442,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d34 1
a34 1
@@@@ -12450,13 +12450,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d50 1
a50 1
@@@@ -12464,7 +12464,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d59 1
a59 10
@@@@ -13001,7 +13001,7 @@@@ libwebkitgtkincludedir := $(prefix)/include/webkitgtk-
 INSPECTOR_SCRIPTS_DIR := $(JavaScriptCore)/inspector/scripts
 
 # Libraries and support components
-bin_PROGRAMS := Programs/jsc-@@WEBKITGTK_API_MAJOR_VERSION@@$(EXEEXT)
+bin_PROGRAMS := Programs/jsc-@@WEBKITGTK_API_MAJOR_VERSION@@$(EXEEXT) Programs/GtkLauncher$(EXEEXT)
 noinst_DATA := DerivedSources/webkitdom/webkitdom.symbols \
 	$(am__append_33) $(am__append_94)
 noinst_HEADERS := 
@@@@ -72792,7 +72792,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d68 1
a68 1
@@@@ -82383,8 +82383,8 @@@@ install-data-local:
d79 1
a79 1
@@@@ -82393,9 +82393,9 @@@@ install-data-local:
d91 1
a91 1
@@@@ -82423,8 +82423,8 @@@@ install-data-local:
d102 1
a102 1
@@@@ -82433,9 +82433,9 @@@@ install-data-local:
@


1.32
log
@Drop chunk 7 of patch-GNUmakefile_in, it was added for webkit 2.0.0 at
that time to workaround a gmake weirdness triggering forkbombs, but now
apparently it causes weird build failures with binutils error messages
when using MAKE_JOBS>=4, as experienced by sthen@@, naddy@@ & espie@@.

Unfortunately, i don't have hardware with 4 cores or more, so didnt see
those... Removing the chunk doesnt seem to show gmake weirdness anymore,
 so just do it (tm). Analysed by espie@@.

Note that gtk3 FLAVOR is broken on powerpc with "undefined reference to
`__atomic_fetch_add_8'". /me goes crying in a corner.

building webkit is hard, let's go shopping.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.31 2014/03/25 06:25:45 landry Exp $
d10 2
a11 2
--- GNUmakefile.in.orig	Mon Mar 17 09:12:20 2014
+++ GNUmakefile.in	Tue Mar 18 07:58:48 2014
d78 1
a78 1
@@@@ -82383,8 +82381,8 @@@@ install-data-local:
d89 1
a89 1
@@@@ -82393,9 +82391,9 @@@@ install-data-local:
d101 1
a101 1
@@@@ -82423,8 +82421,8 @@@@ install-data-local:
d112 1
a112 1
@@@@ -82433,9 +82431,9 @@@@ install-data-local:
@


1.31
log
@Update to webkit 2.4.0.

See http://webkitgtk.org/2014/03/24/webkitgtk2.4.0-released.html. Note
that Webkit2 API is still broken, on OpenBSD(and FreeBSD) and this might
be the last release shipping the Webkit1 API.
Pass -DLOG_DISABLED=0 to CPPFLAGS to somewhat allow debugging.
Use the same ruby version on sparc64 as other archs now that they're
more reliable.

Remove some patches merged upstream, and add links to upstream bz for
most of the remaining patches.

Note: this needs gnu/usr.bin/binutils/include/opcode/i386.h r1.15 to
build. And gcc 4.8 (and python, ruby & perl :)
Built numerous times on amd64/ppc/sparc64 (broken at runtime on the last
two, but that's not a regression from 2.2..) and went in a bunch of
bulks.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.30 2014/03/23 12:59:57 espie Exp $
d5 1
a5 2
- chunk 7 : dont rerun make within make during install, gmake blows
- chunk 8 : append extra -O0 cflags for sparc64 which otherwise result in overoptimization
d8 1
a8 1
- chunk 9->12 : fix variable quoting to properly install doc in a versionned dir
a77 17
@@@@ -81068,14 +81068,12 @@@@ installdirs:
 	for dir in "$(DESTDIR)$(injectedbundledir)" "$(DESTDIR)$(libdir)" "$(DESTDIR)$(bindir)" "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(audiodir)" "$(DESTDIR)$(audiodir)" "$(DESTDIR)$(resourcesdir)" "$(DESTDIR)$(webresourcesdir)" "$(DESTDIR)$(girdir)" "$(DESTDIR)$(pkgconfigdir)" "$(DESTDIR)$(typelibsdir)" "$(DESTDIR)$(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkitdomincludedir)" "$(DESTDIR)$(libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)"; do \
 	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
 	done
-install: $(BUILT_SOURCES)
-	$(MAKE) $(AM_MAKEFLAGS) install-am
+install: $(BUILT_SOURCES) install-am
 install-exec: install-exec-am
 install-data: install-data-am
 uninstall: uninstall-am
 
-install-am: all-am
-	@@$(MAKE) $(AM_MAKEFLAGS) install-exec-am install-data-am
+install-am: all-am install-exec-am install-data-am
 
 installcheck: installcheck-am
 install-strip:
@


1.30
log
@better: don't bother linking if it's already there, just don't error out
for that...
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.29 2014/03/23 09:51:33 espie Exp $
d3 4
a6 5
- chunk 1,2 : install GtkLauncher, remove silent build lines
- chunk 5 : install gtk-doc in a versionned dir to avoid conflicts
- chunk 6 : dont rebase doc, python process fails
- chunk 4 : dont rerun make within make during install, gmake blows
- chunk 3 : append extra -O0 cflags for sparc64 which otherwise result in overoptimization
d9 5
a13 4
- chunk 7 & 8 : https://bugs.webkit.org/show_bug.cgi?id=118732
--- GNUmakefile.in.orig	Tue Jan 21 12:41:49 2014
+++ GNUmakefile.in	Mon Jan 27 10:24:55 2014
@@@@ -11304,11 +11304,11 @@@@ am__v_P_0 = false
d27 1
a27 1
@@@@ -11318,7 +11318,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d36 1
a36 1
@@@@ -11326,13 +11326,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d52 1
a52 1
@@@@ -11340,7 +11340,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d61 2
a62 2
@@@@ -11860,7 +11860,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
 libwebkitgtkincludedir := $(prefix)/include/webkitgtk-@@WEBKITGTK_API_VERSION@@
d67 2
a68 2
 noinst_DATA := $(am__append_44) \
 	Programs/TestWebKitAPI/WebKit2Gtk/resources/webkit2gtk-tests-resources.gresource
d70 1
a70 1
@@@@ -69854,7 +69854,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 2
a80 2
@@@@ -77713,14 +77713,12 @@@@ installdirs:
 	for dir in "$(DESTDIR)$(injectedbundledir)" "$(DESTDIR)$(libdir)" "$(DESTDIR)$(bindir)" "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(audiodir)" "$(DESTDIR)$(audiodir)" "$(DESTDIR)$(resourcesdir)" "$(DESTDIR)$(webresourcesdir)" "$(DESTDIR)$(girdir)" "$(DESTDIR)$(pkgconfigdir)" "$(DESTDIR)$(typelibsdir)" "$(DESTDIR)$(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtkincludedir)" "$(DESTDIR)$(libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtkincludedir)" "$(DESTDIR)$(libwebkitdomincludedir)" "$(DESTDIR)$(libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)"; do \
d96 8
a103 3
@@@@ -79023,7 +79021,7 @@@@ install-data-local:
 @@ENABLE_WEBKIT1_TRUE@@	  if test -n "$(DOC_MODULE_VERSION)"; then \
 @@ENABLE_WEBKIT1_TRUE@@	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk-$(DOC_MODULE_VERSION)"; \
d105 11
a115 2
-@@ENABLE_WEBKIT1_TRUE@@	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk"; \
+@@ENABLE_WEBKIT1_TRUE@@	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk-$(WEBKITGTK_API_VERSION)"; \
d117 25
a141 22
 @@ENABLE_WEBKIT1_TRUE@@	  $(mkinstalldirs) $${installdir} ; \
 @@ENABLE_WEBKIT1_TRUE@@	  for i in $$installfiles; do \
@@@@ -79224,7 +79222,8 @@@@ $(plugin_process_for_dep): $(plugin_process_for_dep_li
 WebCoreLayerGtk2.a: $(webcore_layer_gtk2_deps)
 	$(AM_V_GEN)
 	$(AM_V_at)$(shell rm -f $@@)
-	$(AM_V_at)$(foreach archive, $(webcore_layer_gtk2_archives), $(shell ar t $(archive) | xargs -n50 ar cruT $@@))
+	$(AM_V_at)$(foreach archive, $(webcore_layer_gtk2_archives), $(shell ar t $(archive) | while read f ; do find . -name $$f ; done | xargs -n50 ar cru $@@))
+	-ln $@@ libWebCoreLayerGtk2.a
 
 $(GENSOURCES_WEBKIT2)/BrowserMarshal.h: stamp-mini-browser-marshal.h
 	@@true
@@@@ -79257,7 +79256,8 @@@@ DerivedSources/InjectedBundle/JS%.cpp: Tools/WebKitTes
 WebCoreLayer.a: $(webcore_layer_deps)
 	$(AM_V_GEN)
 	$(AM_V_at)$(shell rm -f $@@)
-	$(AM_V_at)$(foreach archive, $(webcore_layer_archives), $(shell ar t $(archive) | xargs -n50 ar cruT $@@))
+	$(AM_V_at)$(foreach archive, $(webcore_layer_archives), $(shell ar t $(archive) | while read f ; do find . -name $$f ; done | xargs -n50 ar cru $@@))
+	-ln $@@ libWebCoreLayer.a
 
 Programs/TestWebKitAPI/WebKit2Gtk/resources/webkit2gtk-tests-resources.gresource: Tools/TestWebKitAPI/Tests/WebKit2Gtk/resources/webkit2gtk-tests.gresource.xml $(shell $(GLIB_COMPILE_RESOURCES) --sourcedir=$(srcdir) --generate-dependencies $(srcdir)/Tools/TestWebKitAPI/Tests/WebKit2Gtk/resources/webkit2gtk-tests.gresource.xml)
 	$(AM_V_at)mkdir -p ${GENPROGRAMS}/TestWebKitAPI/WebKit2Gtk/resources
@


1.29
log
@use ln -f, so even if we rerun things twice, we won't blow in a stupid way.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.28 2014/01/29 17:28:05 ajacoutot Exp $
d111 1
a111 1
+	ln -f $@@ libWebCoreLayerGtk2.a
d121 1
a121 1
+	ln -f $@@ libWebCoreLayer.a
@


1.28
log
@Re-update to webkit-2.2.4 with a fix for our pre-historical bison(1).
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.27 2014/01/28 23:24:42 landry Exp $
d111 1
a111 1
+	ln $@@ libWebCoreLayerGtk2.a
d121 1
a121 1
+	ln $@@ libWebCoreLayer.a
@


1.27
log
@Revert previous and bump EPOCH, seems this now requires a newer bison,
which i didnt spot since i had an update on my box.
Noticed by nigel@@, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.26 2014/01/27 19:56:20 landry Exp $
d11 3
a13 3
--- GNUmakefile.in.orig	Mon Nov 11 11:56:39 2013
+++ GNUmakefile.in	Thu Nov 14 09:38:49 2013
@@@@ -11294,11 +11294,11 @@@@ am__v_P_0 = false
d27 1
a27 1
@@@@ -11308,7 +11308,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d36 1
a36 1
@@@@ -11316,13 +11316,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d52 1
a52 1
@@@@ -11330,7 +11330,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d61 1
a61 1
@@@@ -11845,7 +11845,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d67 2
a68 1
 noinst_DATA := $(am__append_45) $(am__append_70)
d70 1
a70 2
 
@@@@ -69689,7 +69689,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 1
a79 1
@@@@ -77507,14 +77507,12 @@@@ installdirs:
d96 1
a96 1
@@@@ -78811,7 +78809,7 @@@@ install-data-local:
d105 1
a105 1
@@@@ -79012,7 +79010,8 @@@@ $(plugin_process_for_dep): $(plugin_process_for_dep_li
d113 3
a115 3
 @@ENABLE_WEBKIT2_TRUE@@Programs/resources/webkit2gtk-tests-resources.gresource: Source/WebKit2/UIProcess/API/gtk/tests/resources/webkit2gtk-tests.gresource.xml $(shell $(GLIB_COMPILE_RESOURCES) --sourcedir=$(srcdir) --generate-dependencies $(srcdir)/Source/WebKit2/UIProcess/API/gtk/tests/resources/webkit2gtk-tests.gresource.xml)
 @@ENABLE_WEBKIT2_TRUE@@	$(AM_V_at)mkdir -p ${GENPROGRAMS}/resources
@@@@ -79053,7 +79052,8 @@@@ DerivedSources/InjectedBundle/JS%.cpp: Tools/WebKitTes
d123 2
a124 2
 stamp-testwebkitapi-webcore-forwarding-headers: $(WebKit2)/Scripts/generate-forwarding-headers.pl $(Programs_TestWebKitAPI_TestWebCore_SOURCES)
 	$(AM_V_GEN)$(PERL) $< $(srcdir)/Tools/TestWebKitAPI/Tests/WebCore $(GENSOURCES_WEBCORE)/include gtk \
@


1.26
log
@Bugfix update to webkit 2.2.4.

http://webkitgtk.org/2014/01/21/webkitgtk2.2.4-released.html
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.25 2013/11/14 16:47:00 ajacoutot Exp $
d11 3
a13 3
--- GNUmakefile.in.orig	Tue Jan 21 12:41:49 2014
+++ GNUmakefile.in	Mon Jan 27 10:24:55 2014
@@@@ -11304,11 +11304,11 @@@@ am__v_P_0 = false
d27 1
a27 1
@@@@ -11318,7 +11318,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d36 1
a36 1
@@@@ -11326,13 +11326,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d52 1
a52 1
@@@@ -11340,7 +11340,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d61 1
a61 1
@@@@ -11860,7 +11860,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d67 1
a67 2
 noinst_DATA := $(am__append_44) \
 	Programs/TestWebKitAPI/WebKit2Gtk/resources/webkit2gtk-tests-resources.gresource
d69 2
a70 1
@@@@ -69854,7 +69854,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 1
a79 1
@@@@ -77713,14 +77713,12 @@@@ installdirs:
d96 1
a96 1
@@@@ -79023,7 +79021,7 @@@@ install-data-local:
d105 1
a105 1
@@@@ -79224,7 +79222,8 @@@@ $(plugin_process_for_dep): $(plugin_process_for_dep_li
d113 3
a115 3
 $(GENSOURCES_WEBKIT2)/BrowserMarshal.h: stamp-mini-browser-marshal.h
 	@@true
@@@@ -79257,7 +79256,8 @@@@ DerivedSources/InjectedBundle/JS%.cpp: Tools/WebKitTes
d123 2
a124 2
 Programs/TestWebKitAPI/WebKit2Gtk/resources/webkit2gtk-tests-resources.gresource: Tools/TestWebKitAPI/Tests/WebKit2Gtk/resources/webkit2gtk-tests.gresource.xml $(shell $(GLIB_COMPILE_RESOURCES) --sourcedir=$(srcdir) --generate-dependencies $(srcdir)/Tools/TestWebKitAPI/Tests/WebKit2Gtk/resources/webkit2gtk-tests.gresource.xml)
 	$(AM_V_at)mkdir -p ${GENPROGRAMS}/TestWebKitAPI/WebKit2Gtk/resources
@


1.25
log
@Update to webkit-2.2.2.

ok landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.24 2013/10/20 13:24:29 landry Exp $
d11 3
a13 3
--- GNUmakefile.in.orig	Mon Nov 11 11:56:39 2013
+++ GNUmakefile.in	Thu Nov 14 09:38:49 2013
@@@@ -11294,11 +11294,11 @@@@ am__v_P_0 = false
d27 1
a27 1
@@@@ -11308,7 +11308,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d36 1
a36 1
@@@@ -11316,13 +11316,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d52 1
a52 1
@@@@ -11330,7 +11330,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d61 1
a61 1
@@@@ -11845,7 +11845,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d67 2
a68 1
 noinst_DATA := $(am__append_45) $(am__append_70)
d70 1
a70 2
 
@@@@ -69689,7 +69689,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 1
a79 1
@@@@ -77507,14 +77507,12 @@@@ installdirs:
d96 1
a96 1
@@@@ -78811,7 +78809,7 @@@@ install-data-local:
d105 1
a105 1
@@@@ -79012,7 +79010,8 @@@@ $(plugin_process_for_dep): $(plugin_process_for_dep_li
d113 3
a115 3
 @@ENABLE_WEBKIT2_TRUE@@Programs/resources/webkit2gtk-tests-resources.gresource: Source/WebKit2/UIProcess/API/gtk/tests/resources/webkit2gtk-tests.gresource.xml $(shell $(GLIB_COMPILE_RESOURCES) --sourcedir=$(srcdir) --generate-dependencies $(srcdir)/Source/WebKit2/UIProcess/API/gtk/tests/resources/webkit2gtk-tests.gresource.xml)
 @@ENABLE_WEBKIT2_TRUE@@	$(AM_V_at)mkdir -p ${GENPROGRAMS}/resources
@@@@ -79053,7 +79052,8 @@@@ DerivedSources/InjectedBundle/JS%.cpp: Tools/WebKitTes
d123 2
a124 2
 stamp-testwebkitapi-webcore-forwarding-headers: $(WebKit2)/Scripts/generate-forwarding-headers.pl $(Programs_TestWebKitAPI_TestWebCore_SOURCES)
 	$(AM_V_GEN)$(PERL) $< $(srcdir)/Tools/TestWebKitAPI/Tests/WebCore $(GENSOURCES_WEBCORE)/include gtk \
@


1.24
log
@Bugfix update to webkit 2.2.1.

http://webkitgtk.org/2013/10/16/webkitgtk2.2.1-released.html
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.23 2013/10/06 14:03:42 landry Exp $
d11 3
a13 3
--- GNUmakefile.in.orig	Wed Oct 16 09:26:47 2013
+++ GNUmakefile.in	Sun Oct 20 10:46:46 2013
@@@@ -11291,11 +11291,11 @@@@ am__v_P_0 = false
d27 1
a27 1
@@@@ -11305,7 +11305,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d36 1
a36 1
@@@@ -11313,13 +11313,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d52 1
a52 1
@@@@ -11327,7 +11327,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d61 1
a61 1
@@@@ -11841,7 +11841,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d70 1
a70 1
@@@@ -69679,7 +69679,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 1
a79 1
@@@@ -77490,14 +77490,12 @@@@ installdirs:
d96 1
a96 1
@@@@ -78794,7 +78792,7 @@@@ install-data-local:
d105 1
a105 1
@@@@ -78995,7 +78993,8 @@@@ $(plugin_process_for_dep): $(plugin_process_for_dep_li
d115 1
a115 1
@@@@ -79036,7 +79035,8 @@@@ DerivedSources/InjectedBundle/JS%.cpp: Tools/WebKitTes
@


1.23
log
@Update to webkit 2.2.0.

- Now depends on newer gcc, use 4.6 by default.
- Enable webkit2 api in the gtk3 FLAVOR. Still broken/erratic behaviour at
  runtime, but at least this will allow people to debug it, and it's
  required by newer GNOMEs anyway. Provide MiniBrowser for debugging purposes.
- add hack from bug #118732 to workaround the fact that our binutils
  doesnt support 'ar T'
- update patches from #103128 to tentatively fix powerpc runtime
- force-disable YARR_JIT & ASSEMBLE on archs without JIT (ie anything
  besides i386/amd64) via Platform.h patch instead of JSC_CPPFLAGS (which
  doesnt work anymore anyway)
- add a bunch of patches to fix build (missing includes etc) in the WebKit2
  source tree

Tested in an amd64 bulk build, runtime-tested previous betas on
i386/amd64, test-built on powerpc and sparc64. Things might still be
broken at runtime on powerpc, but at least it allows more GNOME things
to be updated.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.22 2013/08/06 19:11:30 ajacoutot Exp $
d11 3
a13 3
--- GNUmakefile.in.orig	Fri Sep 27 11:20:10 2013
+++ GNUmakefile.in	Thu Oct  3 21:19:34 2013
@@@@ -11289,11 +11289,11 @@@@ am__v_P_0 = false
d27 1
a27 1
@@@@ -11303,7 +11303,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d36 1
a36 1
@@@@ -11311,13 +11311,13 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d52 1
a52 1
@@@@ -11325,7 +11325,7 @@@@ CXXLINK = $(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOL
d61 1
a61 1
@@@@ -11839,7 +11839,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d70 1
a70 1
@@@@ -69653,7 +69653,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 1
a79 1
@@@@ -77464,14 +77464,12 @@@@ installdirs:
d96 1
a96 1
@@@@ -78768,7 +78766,7 @@@@ install-data-local:
d105 1
a105 1
@@@@ -78969,7 +78967,8 @@@@ $(plugin_process_for_dep): $(plugin_process_for_dep_li
d115 1
a115 1
@@@@ -79010,7 +79009,8 @@@@ DerivedSources/InjectedBundle/JS%.cpp: Tools/WebKitTes
@


1.22
log
@Update to webkit 2.0.4.

OK landry@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.21 2013/06/19 13:24:17 ajacoutot Exp $
d3 5
a7 6
- chunk 2,3,4 : install GtkLauncher, remove silent build lines
- chunk 1,5,6,7,8,9 : add Atomics.cpp to the build (fixes mips64 ? #106739)
- chunk 12 : install gtk-doc in a versionned dir to avoid conflicts
- chunk 13 : dont rebase doc, python process fails
- chunk 11 : dont rerun make within make during install, gmake blows
- chunk 10 : append extra -O0 cflags for sparc64 which otherwise result in overoptimization
d10 18
a27 12

--- GNUmakefile.in.orig	Fri Jul 19 14:12:04 2013
+++ GNUmakefile.in	Sat Jul 20 18:29:22 2013
@@@@ -1017,6 +1017,7 @@@@ libWTF_la_DEPENDENCIES = $(am__DEPENDENCIES_1) $(am__D
 am__objects_2 = Source/WTF/wtf/libWTF_la-ArrayBuffer.lo \
 	Source/WTF/wtf/libWTF_la-ArrayBufferView.lo \
 	Source/WTF/wtf/libWTF_la-Assertions.lo \
+	Source/WTF/wtf/libWTF_la-Atomics.lo \
 	Source/WTF/wtf/libWTF_la-BitVector.lo \
 	Source/WTF/wtf/libWTF_la-CryptographicallyRandomNumber.lo \
 	Source/WTF/wtf/libWTF_la-CurrentTime.lo \
@@@@ -10770,7 +10771,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d31 1
a31 1
-am__v_CC_0 = @@echo "  CC    " $@@;
d33 4
a36 4
 AM_V_at = $(am__v_at_@@AM_V@@)
 am__v_at_ = $(am__v_at_@@AM_DEFAULT_V@@)
 am__v_at_0 = @@
@@@@ -10780,22 +10781,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d40 1
a40 1
-am__v_CCLD_0 = @@echo "  CCLD  " $@@;
d42 1
d47 1
a47 1
-am__v_CXX_0 = @@echo "  CXX   " $@@;
d49 1
d52 1
a52 1
 	$(LIBTOOLFLAGS) --mode=link $(CXXLD) $(AM_CXXFLAGS) \
d56 1
a56 1
-am__v_CXXLD_0 = @@echo "  CXXLD " $@@;
d58 1
a58 4
 AM_V_GEN = $(am__v_GEN_@@AM_V@@)
 am__v_GEN_ = $(am__v_GEN_@@AM_DEFAULT_V@@)
-am__v_GEN_0 = @@echo "  GEN   " $@@;
+am__v_GEN_0 =
d60 2
a61 3
 	$(Libraries_libTestRunnerInjectedBundle_la_SOURCES) \
 	$(nodist_Libraries_libTestRunnerInjectedBundle_la_SOURCES) \
@@@@ -11262,7 +11263,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d67 2
d70 1
a70 52
 # It seems that $(shell) does not expand when it is a rule dependency, so
 # we must redefine this list of copied files with traditional dependency wildcards.
@@@@ -11852,6 +11853,7 @@@@ wtf_sources := Source/WTF/config.h Source/WTF/wtf/Plat
 	Source/WTF/wtf/ArrayBufferView.cpp \
 	Source/WTF/wtf/ArrayBufferView.h Source/WTF/wtf/Assertions.cpp \
 	Source/WTF/wtf/Assertions.h Source/WTF/wtf/Atomics.h \
+	Source/WTF/wtf/Atomics.cpp \
 	Source/WTF/wtf/BitArray.h Source/WTF/wtf/BitVector.cpp \
 	Source/WTF/wtf/BitVector.h Source/WTF/wtf/Bitmap.h \
 	Source/WTF/wtf/BlockStack.h Source/WTF/wtf/BloomFilter.h \
@@@@ -23564,6 +23566,9 @@@@ Source/WTF/wtf/libWTF_la-ArrayBufferView.lo:  \
 Source/WTF/wtf/libWTF_la-Assertions.lo:  \
 	Source/WTF/wtf/$(am__dirstamp) \
 	Source/WTF/wtf/$(DEPDIR)/$(am__dirstamp)
+Source/WTF/wtf/libWTF_la-Atomics.lo:  \
+	Source/WTF/wtf/$(am__dirstamp) \
+	Source/WTF/wtf/$(DEPDIR)/$(am__dirstamp)
 Source/WTF/wtf/libWTF_la-BitVector.lo: Source/WTF/wtf/$(am__dirstamp) \
 	Source/WTF/wtf/$(DEPDIR)/$(am__dirstamp)
 Source/WTF/wtf/libWTF_la-CryptographicallyRandomNumber.lo:  \
@@@@ -40174,6 +40179,8 @@@@ mostlyclean-compile:
 	-rm -f Source/WTF/wtf/libWTF_la-ArrayBufferView.lo
 	-rm -f Source/WTF/wtf/libWTF_la-Assertions.$(OBJEXT)
 	-rm -f Source/WTF/wtf/libWTF_la-Assertions.lo
+	-rm -f Source/WTF/wtf/libWTF_la-Atomics.$(OBJEXT)
+	-rm -f Source/WTF/wtf/libWTF_la-Atomics.lo
 	-rm -f Source/WTF/wtf/libWTF_la-BitVector.$(OBJEXT)
 	-rm -f Source/WTF/wtf/libWTF_la-BitVector.lo
 	-rm -f Source/WTF/wtf/libWTF_la-CryptographicallyRandomNumber.$(OBJEXT)
@@@@ -47302,6 +47309,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-ArrayBuffer.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-ArrayBufferView.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-Assertions.Plo@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-Atomics.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-BitVector.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-CryptographicallyRandomNumber.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@Source/WTF/wtf/$(DEPDIR)/libWTF_la-CurrentTime.Plo@@am__quote@@
@@@@ -51997,6 +52005,13 @@@@ Source/WTF/wtf/libWTF_la-Assertions.lo: Source/WTF/wtf
 @@AMDEP_TRUE@@@@am__fastdepCXX_FALSE@@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCXX_FALSE@@	$(AM_V_CXX@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libWTF_la_CPPFLAGS) $(CPPFLAGS) $(libWTF_la_CXXFLAGS) $(CXXFLAGS) -c -o Source/WTF/wtf/libWTF_la-Assertions.lo `test -f 'Source/WTF/wtf/Assertions.cpp' || echo '$(srcdir)/'`Source/WTF/wtf/Assertions.cpp
 
+Source/WTF/wtf/libWTF_la-Atomics.lo: Source/WTF/wtf/Atomics.cpp
+@@am__fastdepCXX_TRUE@@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libWTF_la_CPPFLAGS) $(CPPFLAGS) $(libWTF_la_CXXFLAGS) $(CXXFLAGS) -MT Source/WTF/wtf/libWTF_la-Atomics.lo -MD -MP -MF Source/WTF/wtf/$(DEPDIR)/libWTF_la-Atomics.Tpo -c -o Source/WTF/wtf/libWTF_la-Atomics.lo `test -f 'Source/WTF/wtf/Atomics.cpp' || echo '$(srcdir)/'`Source/WTF/wtf/Atomics.cpp
+@@am__fastdepCXX_TRUE@@	$(AM_V_at)$(am__mv) Source/WTF/wtf/$(DEPDIR)/libWTF_la-Atomics.Tpo Source/WTF/wtf/$(DEPDIR)/libWTF_la-Atomics.Plo
+@@AMDEP_TRUE@@@@am__fastdepCXX_FALSE@@	$(AM_V_CXX)source='Source/WTF/wtf/Atomics.cpp' object='Source/WTF/wtf/libWTF_la-Atomics.lo' libtool=yes @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCXX_FALSE@@	DEPDIR=$(DEPDIR) $(CXXDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCXX_FALSE@@	$(AM_V_CXX@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libWTF_la_CPPFLAGS) $(CPPFLAGS) $(libWTF_la_CXXFLAGS) $(CXXFLAGS) -c -o Source/WTF/wtf/libWTF_la-Atomics.lo `test -f 'Source/WTF/wtf/Atomics.cpp' || echo '$(srcdir)/'`Source/WTF/wtf/Atomics.cpp
+
 Source/WTF/wtf/libWTF_la-BitVector.lo: Source/WTF/wtf/BitVector.cpp
 @@am__fastdepCXX_TRUE@@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libWTF_la_CPPFLAGS) $(CPPFLAGS) $(libWTF_la_CXXFLAGS) $(CXXFLAGS) -MT Source/WTF/wtf/libWTF_la-BitVector.lo -MD -MP -MF Source/WTF/wtf/$(DEPDIR)/libWTF_la-BitVector.Tpo -c -o Source/WTF/wtf/libWTF_la-BitVector.lo `test -f 'Source/WTF/wtf/BitVector.cpp' || echo '$(srcdir)/'`Source/WTF/wtf/BitVector.cpp
 @@am__fastdepCXX_TRUE@@	$(AM_V_at)$(am__mv) Source/WTF/wtf/$(DEPDIR)/libWTF_la-BitVector.Tpo Source/WTF/wtf/$(DEPDIR)/libWTF_la-BitVector.Plo
@@@@ -75259,7 +75274,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d79 2
a80 2
@@@@ -83129,14 +83144,12 @@@@ installdirs:
 	for dir in "$(DESTDIR)$(injectedbundledir)" "$(DESTDIR)$(libdir)" "$(DESTDIR)$(bindir)" "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(audiodir)" "$(DESTDIR)$(audiodir)" "$(DESTDIR)$(resourcesdir)" "$(DESTDIR)$(webinspectordir)" "$(DESTDIR)$(webinspectorimagesdir)" "$(DESTDIR)$(webinspectoruglifyjsdir)" "$(DESTDIR)$(webresourcesdir)" "$(DESTDIR)$(girdir)" "$(DESTDIR)$(gir2dir)" "$(DESTDIR)$(pkgconfigdir)" "$(DESTDIR)$(remoteinspectordir)" "$(DESTDIR)$(typelibsdir)" "$(DESTDIR)$(typelibs2dir)" "$(DESTDIR)$(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtkincludedir)" "$(DESTDIR)$(libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)" "$(DESTDIR)$(libwebkit2gtkincludedir)" "$(DESTDIR)$(libwebkitdomincludedir)" "$(DESTDIR)$(libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_ladir)"; do \
d96 1
a96 1
@@@@ -84409,7 +84422,7 @@@@ install-data-local:
d105 17
a121 6
@@@@ -84441,7 +84454,7 @@@@ install-data-local:
 @@ENABLE_WEBKIT2_TRUE@@	      $${installdir}/webkit2gtk-$(DOC_MODULE_VERSION).devhelp2; \
 @@ENABLE_WEBKIT2_TRUE@@	  fi; \
 @@ENABLE_WEBKIT2_TRUE@@	fi
-	@@$(AM_V_GEN) PKG_CONFIG=$(PKG_CONFIG) $(PYTHON) $(srcdir)/Tools/gtk/generate-gtkdoc --rebase --virtual-root=$${DESTDIR}
+@@ENABLE_GTK_DOC_TRUE@@	@@$(AM_V_GEN) PKG_CONFIG=$(PKG_CONFIG) $(PYTHON) $(srcdir)/Tools/gtk/generate-gtkdoc --rebase --virtual-root=$${DESTDIR}
d123 2
a124 2
 uninstall-local:
 @@ENABLE_WEBKIT1_TRUE@@	@@DOC_MODULE_VERSION=`cat ./Documentation/webkitgtk/version.xml`; \
@


1.21
log
@Update to webkit-2.0.3.

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.20 2013/04/13 09:11:02 landry Exp $
d11 4
a14 3
--- GNUmakefile.in.orig	Tue Jun 11 12:47:31 2013
+++ GNUmakefile.in	Wed Jun 12 19:27:52 2013
@@@@ -1011,6 +1011,7 @@@@ libWTF_la_DEPENDENCIES = $(am__DEPENDENCIES_1) $(am__D
d22 1
a22 1
@@@@ -10760,7 +10761,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d31 1
a31 1
@@@@ -10770,22 +10771,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d58 1
a58 1
@@@@ -11252,7 +11253,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d67 1
a67 1
@@@@ -11842,6 +11843,7 @@@@ wtf_sources := Source/WTF/config.h Source/WTF/wtf/Plat
d75 1
a75 1
@@@@ -23535,6 +23537,9 @@@@ Source/WTF/wtf/libWTF_la-ArrayBufferView.lo:  \
d85 1
a85 1
@@@@ -40133,6 +40138,8 @@@@ mostlyclean-compile:
d94 1
a94 1
@@@@ -47258,6 +47265,7 @@@@ distclean-compile:
d102 1
a102 1
@@@@ -51949,6 +51957,13 @@@@ Source/WTF/wtf/libWTF_la-Assertions.lo: Source/WTF/wtf
d116 1
a116 1
@@@@ -75218,7 +75233,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d125 1
a125 1
@@@@ -83018,14 +83033,12 @@@@ installdirs:
d142 1
a142 1
@@@@ -84298,7 +84311,7 @@@@ install-data-local:
d151 1
a151 1
@@@@ -84330,7 +84343,7 @@@@ install-data-local:
@


1.20
log
@Major update to webkit 2.0.0.

- add ruby to BDEPS. Webkit build system now uses autohell, python, ruby and perl \o/
- set MODRUBY_REV = 1.8 on sparc64 since 1.9 is broken there
- disable WebKit2 support, it needs shm_open()/shm_unlink()
- switch from gstreamer-0.10 to gstreamer1
- force-disable JIT/ASSEMBLER on non-jit archs, builds fails otherwise (bug #113638)
- only build NumberPrototype.cpp with -O0 on sparc64, not the damn whole thing
- use -Wl,--relax on ppc otherwise linking fails
- move some patches around since JavaScriptCore/wtf moved to WTF/wtf
- dont uselessly rerun make within make during install, gmake blows
- blindly backport upstream r144077 to fix mips64 build
- backport bits of #103128 & r145551 to fix powerpc build
- backport r147967 & more to fix bashisms in configure
- bug #109932 forced the use of gcc >= 4.7 or clang >= 3.0, but this is
  only for WebKit2 so loosen the check atm

Tested working fine on amd64 & i386, went in bulk builds, known broken
at runtime on ppc (being worked on. or not.) should build on mips64el
(and maybe even run!) and sparc64 (wont run! ever! nothing new here..),
but 'someone' will care about the poor exotic archs and fix'em, right ?

After too much prodding from the gnome maintainers who desperately need it
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.19 2012/08/22 07:48:37 landry Exp $
d11 3
a13 3
--- GNUmakefile.in.orig	Tue Mar 26 20:46:27 2013
+++ GNUmakefile.in	Sat Apr 13 10:01:58 2013
@@@@ -1010,6 +1010,7 @@@@ libWTF_la_DEPENDENCIES = $(am__DEPENDENCIES_1) $(am__D
d21 1
a21 1
@@@@ -10755,7 +10756,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d30 1
a30 1
@@@@ -10765,22 +10766,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d57 1
a57 1
@@@@ -11245,7 +11246,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
a62 1
 noinst_HEADERS := 
d64 3
a66 2
 # We have a different library with only the files that require GTK+. It allows us
@@@@ -11830,6 +11831,7 @@@@ wtf_sources := Source/WTF/config.h Source/WTF/wtf/Plat
d74 1
a74 1
@@@@ -23525,6 +23527,9 @@@@ Source/WTF/wtf/libWTF_la-ArrayBufferView.lo:  \
d84 1
a84 1
@@@@ -40117,6 +40122,8 @@@@ mostlyclean-compile:
d93 1
a93 1
@@@@ -47240,6 +47247,7 @@@@ distclean-compile:
d101 1
a101 1
@@@@ -51929,6 +51937,13 @@@@ Source/WTF/wtf/libWTF_la-Assertions.lo: Source/WTF/wtf
d115 1
a115 1
@@@@ -75198,7 +75213,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d124 1
a124 1
@@@@ -82970,14 +82985,12 @@@@ installdirs:
d141 1
a141 1
@@@@ -84250,7 +84263,7 @@@@ install-data-local:
d150 1
a150 1
@@@@ -84282,7 +84295,7 @@@@ install-data-local:
d154 2
a155 2
-	@@$(AM_V_GEN)$(PYTHON) $(srcdir)/Tools/gtk/generate-gtkdoc --rebase --virtual-root=$${DESTDIR}
+@@ENABLE_GTK_DOC_TRUE@@	@@$(AM_V_GEN)$(PYTHON) $(srcdir)/Tools/gtk/generate-gtkdoc --rebase --virtual-root=$${DESTDIR}
@


1.19
log
@Bugfix update to webkit 1.8.3.

Remove the pthread/lpthread chunks from patch-GNUmakefile_in while here.

Successfully tested with GtkLauncher on sparc64 after a whooping 21h-build..
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.18 2012/08/07 09:35:38 landry Exp $
d3 6
a8 4
- install GtkLauncher, remove silent build lines
- install gtk-doc in a versionned dir to avoid conflicts
- dont rebase doc, python process fails
- append extra cflags for sparc64 which otherwise result in overoptimization
d11 11
a21 3
--- GNUmakefile.in.orig	Mon Aug 20 22:37:15 2012
+++ GNUmakefile.in	Tue Aug 21 09:40:46 2012
@@@@ -11414,7 +11414,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d30 1
a30 1
@@@@ -11424,22 +11424,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d54 2
a55 1
 SOURCES = $(Libraries_libTestRunnerInjectedBundle_la_SOURCES) \
d57 1
a57 2
 	$(Libraries_libWebKit2APITestCore_la_SOURCES) \
@@@@ -11838,7 +11838,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d66 50
a115 1
@@@@ -62651,7 +62653,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d120 1
a120 1
+@@am__fastdepCXX_TRUE@@	$(AM_V_CXX)$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CPPFLAGS) $(CPPFLAGS) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CXXFLAGS) $(CXXFLAGS) $(EXTRA_FLAGS) -MT Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo -MD -MP -MF Source/JavaScriptCore/runtime/$(DEPDIR)/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.Tpo -c -o Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo `test -f 'Source/JavaScriptCore/runtime/NumberPrototype.cpp' || echo '$(srcdir)/'`Source/JavaScriptCore/runtime/NumberPrototype.cpp
d124 27
a150 10
@@@@ -70538,7 +70540,7 @@@@ install-data-local:
 	  if test -n "$(DOC_MODULE_VERSION)"; then \
 	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk-$(DOC_MODULE_VERSION)"; \
 	  else \
-	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk"; \
+	    installdir="$(DESTDIR)$(HTML_DIR)/webkitgtk-$(WEBKITGTK_API_VERSION)"; \
 	  fi; \
 	  $(mkinstalldirs) $${installdir} ; \
 	  for i in $$installfiles; do \
@@@@ -70570,7 +70572,7 @@@@ install-data-local:
d158 1
a158 1
 	@@DOC_MODULE_VERSION=`cat ./Documentation/webkitgtk/version.xml`; \
@


1.18
log
@Bugfix update to webkit 1.8.2.

See http://trac.webkit.org/wiki/WebKitGTK/1.8.x for list of fixes.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.17 2012/04/30 13:31:06 landry Exp $
d3 1
a3 1
- install GtkLauncher, remove silent build lines, fix lpthread/pthread
d9 3
a11 3
--- GNUmakefile.in.orig	Wed Aug  1 13:23:00 2012
+++ GNUmakefile.in	Fri Aug  3 16:33:41 2012
@@@@ -11354,7 +11354,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d13 2
a14 2
 AM_V_CC = $(am__v_CC_$(V))
 am__v_CC_ = $(am__v_CC_$(AM_DEFAULT_VERBOSITY))
d17 2
a18 2
 AM_V_at = $(am__v_at_$(V))
 am__v_at_ = $(am__v_at_$(AM_DEFAULT_VERBOSITY))
d20 1
a20 1
@@@@ -11364,12 +11364,12 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d22 2
a23 2
 AM_V_CCLD = $(am__v_CCLD_$(V))
 am__v_CCLD_ = $(am__v_CCLD_$(AM_DEFAULT_VERBOSITY))
d28 2
a29 2
 AM_V_CXX = $(am__v_CXX_$(V))
 am__v_CXX_ = $(am__v_CXX_$(AM_DEFAULT_VERBOSITY))
d35 13
a47 1
@@@@ -11774,7 +11774,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d56 2
a57 80
@@@@ -18908,6 +18908,7 @@@@ pkgconfig_DATA := Source/JavaScriptCore/javascriptcore
 @@OS_GNU_TRUE@@version_script = -Wl,--version-script,$(srcdir)/Source/autotools/symbols.filter
 @@OS_WIN32_TRUE@@version_script = -export-symbols-regex "^(webkit_|k?JS).*"
 libWTF_la_LDFLAGS = \
+	-pthread \
 	$(no_undefined)
 
 libWTF_la_SOURCES = \
@@@@ -18916,8 +18917,7 @@@@ libWTF_la_SOURCES = \
 libWTF_la_LIBADD = \
 	$(UNICODE_LIBS) \
 	$(GLIB_LIBS) \
-	$(WINMM_LIBS) \
-	-lpthread
+	$(WINMM_LIBS)
 
 libWTF_la_CXXFLAGS = \
 	$(global_cxxflags) \
@@@@ -18968,7 +18968,7 @@@@ libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WE
 	$(javascriptcore_sources)
 
 libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LIBADD = \
-	-lpthread \
+	-pthread \
 	libWTF.la \
 	$(UNICODE_LIBS) \
 	$(GLIB_LIBS) \
@@@@ -19001,7 +19001,7 @@@@ Programs_minidom_LDADD = \
 	libjavascriptcoregtk-@@WEBKITGTK_API_MAJOR_VERSION@@.@@WEBKITGTK_API_MINOR_VERSION@@.la \
 	$(WINMM_LIBS) \
 	-lm \
-	-lpthread \
+	-pthread \
 	-lstdc++
 
 Programs_minidom_LDFLAGS = \
@@@@ -19022,7 +19022,7 @@@@ Programs_jsc_@@WEBKITGTK_API_MAJOR_VERSION@@_CXXFLAGS = 
 	$(UNICODE_CFLAGS)
 
 Programs_jsc_@@WEBKITGTK_API_MAJOR_VERSION@@_LDADD = \
-	-lpthread \
+	-pthread \
 	libjavascriptcoregtk-@@WEBKITGTK_API_MAJOR_VERSION@@.@@WEBKITGTK_API_MINOR_VERSION@@.la \
 	$(WINMM_LIBS)
 
@@@@ -19261,12 +19261,13 @@@@ libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_
 	$(ZLIB_CFLAGS)
 
 libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LDFLAGS = \
+	-pthread \
 	-version-info @@LIBWEBKITGTK_VERSION@@ \
 	$(version_script) \
 	$(no_undefined)
 
 libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LIBADD = \
-	-lpthread \
+	-pthread \
 	libWebCore.la \
 	libWebCoreGtk.la \
 	libjavascriptcoregtk-@@WEBKITGTK_API_MAJOR_VERSION@@.@@WEBKITGTK_API_MINOR_VERSION@@.la \
@@@@ -19881,7 +19882,7 @@@@ libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK
 	$(no_undefined)
 
 libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LIBADD = \
-	-lpthread \
+	-pthread \
 	libWebCore.la \
 	libjavascriptcoregtk-@@WEBKITGTK_API_MAJOR_VERSION@@.@@WEBKITGTK_API_MINOR_VERSION@@.la \
 	libWebCoreGtk.la \
@@@@ -20037,7 +20038,7 @@@@ Programs_WebKitWebProcess_LDFLAGS = \
 @@ENABLE_PLUGIN_PROCESS_TRUE@@	$(webkit2_plugin_process_sources)
 
 @@ENABLE_PLUGIN_PROCESS_TRUE@@Programs_WebKitPluginProcess_LDADD = \
-@@ENABLE_PLUGIN_PROCESS_TRUE@@	-lpthread \
+@@ENABLE_PLUGIN_PROCESS_TRUE@@	-pthread \
 @@ENABLE_PLUGIN_PROCESS_TRUE@@	libWebCore.la \
 @@ENABLE_PLUGIN_PROCESS_TRUE@@	libjavascriptcoregtk-@@WEBKITGTK_API_MAJOR_VERSION@@.@@WEBKITGTK_API_MINOR_VERSION@@.la \
 @@ENABLE_PLUGIN_PROCESS_TRUE@@	libWebCoreGtk2.la \
@@@@ -65246,7 +65247,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
 @@am__fastdepCXX_FALSE@@	$(LIBTOOL) $(AM_V_lt) --tag=CXX $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CPPFLAGS) $(CPPFLAGS) $(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CXXFLAGS) $(CXXFLAGS) -c -o Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberObject.lo `test -f 'Source/JavaScriptCore/runtime/NumberObject.cpp' || echo '$(srcdir)/'`Source/JavaScriptCore/runtime/NumberObject.cpp
d63 3
a65 3
 @@am__fastdepCXX_FALSE@@	$(AM_V_CXX) @@AM_BACKSLASH@@
 @@AMDEP_TRUE@@@@am__fastdepCXX_FALSE@@	source='Source/JavaScriptCore/runtime/NumberPrototype.cpp' object='Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la-NumberPrototype.lo' libtool=yes @@AMDEPBACKSLASH@@
@@@@ -74012,7 +74013,7 @@@@ install-data-local:
d74 1
a74 1
@@@@ -74044,7 +74045,7 @@@@ install-data-local:
@


1.17
log
@Update to webkit 1.8.1.

ok ajacoutot@@, tested by a few on ports@@ (thanks!)
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.16 2012/04/03 15:39:35 landry Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Tue Apr 24 07:17:27 2012
+++ GNUmakefile.in	Tue Apr 24 09:56:57 2012
@@@@ -11360,7 +11360,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d20 1
a20 1
@@@@ -11370,12 +11370,12 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d35 1
a35 1
@@@@ -11780,7 +11780,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d44 1
a44 1
@@@@ -18918,6 +18918,7 @@@@ pkgconfig_DATA := Source/JavaScriptCore/javascriptcore
d52 1
a52 1
@@@@ -18926,8 +18927,7 @@@@ libWTF_la_SOURCES = \
d62 1
a62 1
@@@@ -18978,7 +18978,7 @@@@ libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WE
d71 1
a71 1
@@@@ -19011,7 +19011,7 @@@@ Programs_minidom_LDADD = \
d80 1
a80 1
@@@@ -19032,7 +19032,7 @@@@ Programs_jsc_@@WEBKITGTK_API_MAJOR_VERSION@@_CXXFLAGS = 
d89 1
a89 1
@@@@ -19271,12 +19271,13 @@@@ libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_
d104 1
a104 1
@@@@ -19891,7 +19892,7 @@@@ libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK
d113 1
a113 1
@@@@ -20047,7 +20048,7 @@@@ Programs_WebKitWebProcess_LDFLAGS = \
d122 1
a122 1
@@@@ -65284,7 +65285,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d131 1
a131 1
@@@@ -74050,7 +74051,7 @@@@ install-data-local:
d140 1
a140 1
@@@@ -74082,7 +74083,7 @@@@ install-data-local:
@


1.16
log
@Major update to webkit 1.8.0.

- disable static libs, shrinks package size by a factor 3
- now depends on geoclue for geolocation purposes (of course its up to
  the browsers to enable the feature or not..)
- simplify Makefile/FLAVORS/SHARED_LIBS
- fold most of the PFRAGs to PLIST by using variables
- remove patch-Source_JavaScriptCore_runtime_JSValue_h, seems it was
  added for sparc64 but now it breaks the build there, and noone has been
able to justify the addition of that patch. Without it, GtkLauncher
shows simple html websites on sparc64 and crashes as soon as some js is
involved, but thats not much different from before
- remove patch-Source_JavaScriptCore_wtf_text_StringHash_h &
  patch-Source_JavaScriptCore_wtf_text_StringImpl_cpp, replaced by
patch-Source_JavaScriptCore_runtime_UString_h for mips64/sparc64
- add patch-Source_JavaScriptCore_wtf_NumberOfCores_cpp for #82585

tested on i386/amd64 by several, amd64 bulk build, ppc & sparc64 testing
by myself. mips64el in the works..
ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.15 2012/02/24 16:36:00 landry Exp $
d9 3
a11 3
--- GNUmakefile.in.orig	Tue Mar 27 18:31:16 2012
+++ GNUmakefile.in	Fri Mar 30 11:32:32 2012
@@@@ -11355,7 +11355,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d20 1
a20 1
@@@@ -11365,12 +11365,12 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d35 1
a35 1
@@@@ -11774,7 +11774,7 @@@@ pkgconfigdir := $(libdir)/pkgconfig
d44 1
a44 1
@@@@ -18909,6 +18909,7 @@@@ pkgconfig_DATA := Source/JavaScriptCore/javascriptcore
d52 1
a52 1
@@@@ -18917,8 +18918,7 @@@@ libWTF_la_SOURCES = \
d62 1
a62 1
@@@@ -18969,7 +18969,7 @@@@ libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WE
d71 1
a71 1
@@@@ -19002,7 +19002,7 @@@@ Programs_minidom_LDADD = \
d80 1
a80 1
@@@@ -19023,7 +19023,7 @@@@ Programs_jsc_@@WEBKITGTK_API_MAJOR_VERSION@@_CXXFLAGS = 
d89 1
a89 1
@@@@ -19262,12 +19262,13 @@@@ libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_
d104 1
a104 1
@@@@ -19882,7 +19883,7 @@@@ libwebkit2gtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK
d113 1
a113 1
@@@@ -20038,7 +20039,7 @@@@ Programs_WebKitWebProcess_LDFLAGS = \
d122 1
a122 1
@@@@ -65247,7 +65248,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d131 1
a131 1
@@@@ -74013,7 +74014,7 @@@@ install-data-local:
d140 1
a140 1
@@@@ -74045,7 +74046,7 @@@@ install-data-local:
@


1.15
log
@Update to webkit 1.6.3, based on a diff from marco.

- switch to .tar.xz distfile
- bump libjavascriptgtk major
- backport a commit from upstream bz #68314, fixes issues on twitter

tested by aja@@/pstumpf@@/kili@@ on amd64 & myself on i386/ppc.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.14 2011/10/13 06:52:49 jasper Exp $
d4 2
d7 5
a11 14
  by emitting a fdtox %r8, %r7 call, whose second operatand isn't even and thus invalid.

--- GNUmakefile.in.orig	Wed Feb  1 14:49:37 2012
+++ GNUmakefile.in	Fri Feb  3 14:25:45 2012
@@@@ -85,7 +85,7 @@@@ POST_UNINSTALL = :
 build_triplet = @@build@@
 host_triplet = @@host@@
 bin_PROGRAMS = Programs/jsc-@@WEBKITGTK_API_MAJOR_VERSION@@$(EXEEXT) \
-	$(am__EXEEXT_1)
+	$(am__EXEEXT_1) Programs/GtkLauncher$(EXEEXT)
 noinst_PROGRAMS = Programs/jsc$(EXEEXT) Programs/minidom$(EXEEXT) \
 	$(am__EXEEXT_4) Programs/DumpRenderTree$(EXEEXT) \
 	Programs/GtkLauncher$(EXEEXT) $(am__EXEEXT_5) \
@@@@ -10572,7 +10572,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d20 1
a20 1
@@@@ -10582,12 +10582,12 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d35 19
a53 2
@@@@ -16654,9 +16654,10 @@@@ libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WE
 libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LIBADD = \
d60 1
a60 3
+libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LDFLAGS = -pthread
+
 libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CXXFLAGS = \
d62 10
a71 2
 	$(libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_CFLAGS)
@@@@ -16684,7 +16685,7 @@@@ Programs_minidom_LDADD = \
d80 1
a80 1
@@@@ -16705,7 +16706,7 @@@@ Programs_jsc_@@WEBKITGTK_API_MAJOR_VERSION@@_CXXFLAGS = 
d89 1
a89 1
@@@@ -16930,12 +16931,13 @@@@ libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_
d104 19
a122 1
@@@@ -59308,7 +59310,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
d131 18
@


1.14
log
@- update to 1.6.1

tested in a bulk on amd64, as well as on sparc64 by myself
macppc testing by pea@@

ok aja@@
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.13 2011/07/11 12:08:24 jasper Exp $
d7 3
a9 3
--- GNUmakefile.in.orig	Tue Sep 27 12:41:43 2011
+++ GNUmakefile.in	Mon Oct 10 14:34:20 2011
@@@@ -78,7 +78,7 @@@@ POST_UNINSTALL = :
d18 1
a18 1
@@@@ -10563,7 +10563,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d27 1
a27 1
@@@@ -10573,12 +10573,12 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d42 1
a42 1
@@@@ -16635,9 +16635,10 @@@@ libjavascriptcoregtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WE
d55 1
a55 1
@@@@ -16665,7 +16666,7 @@@@ Programs_minidom_LDADD = \
d64 1
a64 1
@@@@ -16686,7 +16687,7 @@@@ Programs_jsc_@@WEBKITGTK_API_MAJOR_VERSION@@_CXXFLAGS = 
d73 1
a73 1
@@@@ -16911,12 +16912,13 @@@@ libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_
d88 1
a88 1
@@@@ -59167,7 +59169,7 @@@@ Source/JavaScriptCore/runtime/libjavascriptcoregtk_@@WE
@


1.13
log
@- these ports were already ONLY_FOR_ARCHS=${GCC4_ARCHS} by using the gcc4
module on all arches. so remove the module usage and set ONLY_FOR_ARCHS instead

from brad
@
text
@d1 9
a9 5
$OpenBSD: patch-GNUmakefile_in,v 1.12 2011/07/05 11:34:27 landry Exp $
install GtkLauncher, remove silent build lines, fix lpthread/pthread
--- GNUmakefile.in.orig	Fri Jul  1 01:08:07 2011
+++ GNUmakefile.in	Fri Jul  1 09:26:33 2011
@@@@ -78,9 +78,9 @@@@ POST_UNINSTALL = :
d16 3
a18 6
-	$(am__EXEEXT_4)
+	$(am__EXEEXT_4) Programs/GtkLauncher$(EXEEXT)
 
 # For the Gtk port we want to use XP_UNIX both in X11 and Mac
 @@TARGET_WIN32_FALSE@@am__append_1 = \
@@@@ -15090,7 +15090,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d27 1
a27 1
@@@@ -15100,22 +15100,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d42 2
a43 15
 	$(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@@
 AM_V_CXXLD = $(am__v_CXXLD_$(V))
 am__v_CXXLD_ = $(am__v_CXXLD_$(AM_DEFAULT_VERBOSITY))
-am__v_CXXLD_0 = @@echo "  CXXLD " $@@;
+am__v_CXXLD_0 =
 AM_V_GEN = $(am__v_GEN_$(V))
 am__v_GEN_ = $(am__v_GEN_$(AM_DEFAULT_VERBOSITY))
-am__v_GEN_0 = @@echo "  GEN   " $@@;
+am__v_GEN_0 =
 SOURCES = $(TestNetscapePlugin_libtestnetscapeplugin_la_SOURCES) \
 	$(libJavaScriptCore_la_SOURCES) \
 	$(nodist_libJavaScriptCore_la_SOURCES) \
@@@@ -20137,9 +20137,10 @@@@ libJavaScriptCore_la_SOURCES = \
 
 libJavaScriptCore_la_LIBADD = \
d45 2
a46 1
-	$(GLIB_LIBS) \
d48 1
a48 1
+	$(GLIB_LIBS)
d50 1
a50 1
+libJavaScriptCore_la_LDFLAGS = -pthread
d52 1
a52 1
 libJavaScriptCore_la_CXXFLAGS = \
d54 43
a96 16
 	$(libJavaScriptCore_la_CFLAGS)
@@@@ -21245,12 +21246,13 @@@@ dist_webresources_DATA = \
 @@ENABLE_WEBKIT2_FALSE@@	$(XT_CFLAGS)
 
 @@ENABLE_WEBKIT2_FALSE@@libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LDFLAGS = \
+@@ENABLE_WEBKIT2_FALSE@@	-pthread \
 @@ENABLE_WEBKIT2_FALSE@@	-version-info @@LIBWEBKITGTK_VERSION@@ \
 @@ENABLE_WEBKIT2_FALSE@@	$(version_script) \
 @@ENABLE_WEBKIT2_FALSE@@	$(no_undefined)
 
 @@ENABLE_WEBKIT2_FALSE@@libwebkitgtk_@@WEBKITGTK_API_MAJOR_VERSION@@_@@WEBKITGTK_API_MINOR_VERSION@@_la_LIBADD = \
-@@ENABLE_WEBKIT2_FALSE@@	-lpthread \
+@@ENABLE_WEBKIT2_FALSE@@	-pthread \
 @@ENABLE_WEBKIT2_FALSE@@	libWebCore.la \
 @@ENABLE_WEBKIT2_FALSE@@	libJavaScriptCore.la \
 @@ENABLE_WEBKIT2_FALSE@@	$(webcore_ldflags) \
@


1.12
log
@Update to webkit 1.4.2, see http://trac.webkit.org/wiki/WebKitGTK/1.4.2
for a list of changes.
ok jasper@@, tested by a few on ports@@
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.11 2011/06/17 22:10:40 landry Exp $
a65 9
@@@@ -20182,7 +20183,7 @@@@ Programs_minidom_LDADD = \
 	 libJavaScriptCore.la \
 	 $(WINMM_LIBS) \
 	 -lm \
-	 -lstdc++
+	 -l${STDCPPLIB}
 
 Programs_minidom_LDFLAGS = \
 	-no-install \
@


1.11
log
@Update to webkit 1.4.1, see https://trac.webkit.org/wiki/WebKitGTK/1.4.1
for a list of changes.
Tested by pea@@ on macppc, myself on sparc64, rpointel@@, marco@@ and myself
on amd64.
ok rpointel@@.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.10 2011/05/11 06:00:08 ajacoutot Exp $
d3 2
a4 2
--- GNUmakefile.in.orig	Sun Jun  5 19:14:10 2011
+++ GNUmakefile.in	Tue Jun  7 09:12:33 2011
d17 1
a17 1
@@@@ -15086,7 +15086,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d26 1
a26 1
@@@@ -15096,22 +15096,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d53 1
a53 1
@@@@ -20130,9 +20130,10 @@@@ libJavaScriptCore_la_SOURCES = \
d66 1
a66 1
@@@@ -20175,7 +20176,7 @@@@ Programs_minidom_LDADD = \
d75 1
a75 1
@@@@ -21237,12 +21238,13 @@@@ dist_webresources_DATA = \
@


1.10
log
@Major update to webkit-1.4.0.
Now comes with a gtk3 FLAVOR that can be installed alongside the non
flavored package (webkit vs webkit-gtk3).

The library name changed from libwebkit to libwebkit-gtk{1,3}.

thanks to landry@@ and jasper@@ for the tests on powerpc, sparc64 and
amd64.
bulk testing from landry@@

ok jasper@@ landry@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.9 2010/07/19 12:29:50 landry Exp $
d3 2
a4 2
--- GNUmakefile.in.orig	Tue Apr 26 03:30:49 2011
+++ GNUmakefile.in	Sat May  7 10:00:31 2011
d17 1
a17 1
@@@@ -15085,7 +15085,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d26 1
a26 1
@@@@ -15095,22 +15095,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d53 1
a53 1
@@@@ -20126,9 +20126,10 @@@@ libJavaScriptCore_la_SOURCES = \
d66 1
a66 1
@@@@ -20171,7 +20172,7 @@@@ Programs_minidom_LDADD = \
d75 1
a75 1
@@@@ -21233,12 +21234,13 @@@@ dist_webresources_DATA = \
@


1.9
log
@Update to webkit 1.2.3, switch to newer LIB_DEPENDS/WANTLIB/EPOCH.
Regen patches while here.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.8 2010/07/03 07:53:04 landry Exp $
d3 3
a5 4
--- GNUmakefile.in.orig	Thu Jul 15 22:47:03 2010
+++ GNUmakefile.in	Fri Jul 16 15:53:17 2010
@@@@ -82,9 +82,9 @@@@ PRE_UNINSTALL = :
 POST_UNINSTALL = :
d8 6
a13 6
-bin_PROGRAMS = Programs/jsc$(EXEEXT)
+bin_PROGRAMS = Programs/jsc$(EXEEXT) Programs/GtkLauncher$(EXEEXT)
 noinst_PROGRAMS = Programs/minidom$(EXEEXT) \
-	Programs/GtkLauncher$(EXEEXT) Programs/DumpRenderTree$(EXEEXT) \
+	Programs/DumpRenderTree$(EXEEXT) \
 	$(am__EXEEXT_1)
d16 2
a17 1
@@@@ -5901,7 +5901,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d26 1
a26 1
@@@@ -5911,22 +5911,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d53 1
a53 1
@@@@ -8986,9 +8986,10 @@@@ libJavaScriptCore_la_SOURCES = \
d66 1
a66 16
@@@@ -9037,12 +9038,12 @@@@ libwebkit_1_0_la_CPPFLAGS = \
 	$(HILDON_CPPFLAGS)
 
 libwebkit_1_0_la_LDFLAGS = \
+	-pthread \
 	-version-info @@LIBWEBKITGTK_VERSION@@ \
 	$(version_script) \
 	$(no_undefined)
 
 libwebkit_1_0_la_LIBADD = \
-	-lpthread \
 	libJavaScriptCore.la \
 	libWebCoreJS.la \
 	$(webcore_ldflags) \
@@@@ -9104,7 +9105,7 @@@@ Programs_minidom_CFLAGS = \
 Programs_minidom_LDADD = \
d68 1
d75 15
@


1.8
log
@Update to webkit 1.2.1, fix WANTLIB, tighten lib_depends on icu4c-4.4
(from jcs@@). Tested by kili@@ on amd64 and myself on sparc64/macppc.
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.7 2010/05/23 10:27:46 espie Exp $
d3 2
a4 2
--- GNUmakefile.in.orig	Fri May  7 23:03:21 2010
+++ GNUmakefile.in	Thu Jun 24 18:04:00 2010
d17 1
a17 1
@@@@ -5895,7 +5895,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d26 1
a26 1
@@@@ -5905,22 +5905,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d53 1
a53 1
@@@@ -8976,9 +8976,10 @@@@ libJavaScriptCore_la_SOURCES = \
d66 1
a66 1
@@@@ -9027,12 +9028,12 @@@@ libwebkit_1_0_la_CPPFLAGS = \
d80 1
a80 1
@@@@ -9094,7 +9095,7 @@@@ Programs_minidom_CFLAGS = \
@


1.7
log
@fix for gcc4
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.6 2010/04/22 13:37:00 landry Exp $
d3 2
a4 2
--- GNUmakefile.in.orig	Mon Apr  5 14:55:24 2010
+++ GNUmakefile.in	Wed Apr 21 15:32:34 2010
d17 1
a17 1
@@@@ -5877,7 +5877,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d26 1
a26 1
@@@@ -5887,22 +5887,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d53 1
a53 1
@@@@ -8956,9 +8956,10 @@@@ libJavaScriptCore_la_SOURCES = \
d66 1
a66 1
@@@@ -9007,12 +9008,12 @@@@ libwebkit_1_0_la_CPPFLAGS = \
d80 1
a80 1
@@@@ -9074,7 +9075,7 @@@@ Programs_minidom_CFLAGS = \
@


1.6
log
@Update to webkit 1.2.0, with much prodding from the hobbits as it's
needed for more and more stuff in G-NOME. Still currently building on
sparc64/powerpc.
ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.5 2010/01/10 20:06:17 landry Exp $
d85 1
a85 1
+	 -lestdc++
@


1.5
log
@Update to webkit 1.1.18:
- add a pair of patches to make it finally run without SIGBUS on sparc64
  (yay!), reported as https://bugs.webkit.org/show_bug.cgi?id=19775
- add a patch to disable some optimizations on ppc, so that it finally
  builds fine, reported as https://bugs.webkit.org/show_bug.cgi?id=33451
@
text
@d1 17
a17 4
$OpenBSD: patch-GNUmakefile_in,v 1.4 2009/11/29 10:08:26 landry Exp $
--- GNUmakefile.in.orig	Tue Jan  5 17:50:30 2010
+++ GNUmakefile.in	Tue Jan  5 23:00:36 2010
@@@@ -5642,7 +5642,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d26 1
a26 1
@@@@ -5652,22 +5652,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d53 1
a53 1
@@@@ -8650,9 +8650,10 @@@@ libJavaScriptCore_la_SOURCES = \
d66 1
a66 1
@@@@ -8718,12 +8719,12 @@@@ libwebkit_1_0_la_CPPFLAGS = \
a77 1
 	libWebCore.la \
d79 2
a80 1
@@@@ -8786,7 +8787,7 @@@@ Programs_minidom_CFLAGS = \
@


1.4
log
@Update to webkit 1.1.15.4, fix stupid mistake in build output that tried
to execute every target in Makefile, and enable Gstreamer support (which
is on by default upstream since months)
@
text
@d1 4
a4 4
$OpenBSD: patch-GNUmakefile_in,v 1.3 2009/10/11 18:31:12 landry Exp $
--- GNUmakefile.in.orig	Tue Oct  6 15:18:56 2009
+++ GNUmakefile.in	Sat Oct 10 10:31:55 2009
@@@@ -5622,7 +5622,7 @@@@ COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES
d13 1
a13 1
@@@@ -5632,22 +5632,22 @@@@ LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAG
d40 1
a40 1
@@@@ -8308,9 +8308,10 @@@@ libJavaScriptCore_la_SOURCES = \
d53 1
a53 1
@@@@ -8376,12 +8377,12 @@@@ libwebkit_1_0_la_CPPFLAGS = \
d67 1
a67 1
@@@@ -8498,7 +8499,7 @@@@ Programs_minidom_CFLAGS = \
@


1.3
log
@Long overdue update to webkit 1.1.15.2 :
bump major to be on the safe side, add commented-out entries for
gstreamer LIB/RUN_DEPENDS for the day we enable HTML5 video support.
midori/devhelp are happy with it..
@
text
@d1 1
a1 1
$OpenBSD: patch-GNUmakefile_in,v 1.2 2009/06/01 05:51:31 landry Exp $
d9 1
a9 1
+am__v_CC_0 = $@@;
d18 1
a18 1
+am__v_CCLD_0 = $@@;
d24 1
a24 1
+am__v_CXX_0 = $@@;
d32 1
a32 1
+am__v_CXXLD_0 = $@@;
d36 1
a36 1
+am__v_GEN_0 = $@@;
@


1.2
log
@Update to webkit-gtk 1.1.8, heavy consumers are happy with it, tested
@@ppc/amd64/i386. Add a temporary workaround for upstream bz #26099.
Bumps minor as some funcs were added.
@
text
@d1 40
a40 4
$OpenBSD: patch-GNUmakefile_in,v 1.1 2009/04/27 19:25:09 landry Exp $
--- GNUmakefile.in.orig	Thu May 28 20:36:42 2009
+++ GNUmakefile.in	Sun May 31 01:38:02 2009
@@@@ -7655,9 +7655,10 @@@@ libJavaScriptCore_la_SOURCES = \
d53 1
a53 1
@@@@ -7723,12 +7724,12 @@@@ libwebkit_1_0_la_CPPFLAGS = \
d67 1
a67 1
@@@@ -7847,7 +7848,7 @@@@ Programs_minidom_CFLAGS = \
@


1.1
log
@Update to webkit 1.1.5v0, finally switch to plain releases instead of
tracking a random svn snapshot, as webkit-gtk has regular releases now.

ok ajacoutot@@ phessler@@
@
text
@d1 4
a4 4
$OpenBSD$
--- GNUmakefile.in.orig	Tue Apr 14 23:39:16 2009
+++ GNUmakefile.in	Fri Apr 24 13:51:52 2009
@@@@ -5966,9 +5966,10 @@@@ libJavaScriptCore_la_SOURCES = \
d17 2
a18 9
@@@@ -7481,9 +7482,9 @@@@ libWebCore_la_LIBADD = \
 	$(HILDON_LIBS) \
 	$(JPEG_LIBS) \
 	$(PNG_LIBS) \
-	$(GEOCLUE_LIBS) \
-	-lpthread
+	$(GEOCLUE_LIBS)
 
+libWebCore_la_LDFLAGS = -pthread
d20 12
a31 3
 # WebKit
 webkitgtk_h_api := WebKit/gtk/webkit/webkit.h \
@@@@ -7664,7 +7665,7 @@@@ Programs_minidom_CFLAGS = \
d38 2
a39 2
 
 # jsc
@

