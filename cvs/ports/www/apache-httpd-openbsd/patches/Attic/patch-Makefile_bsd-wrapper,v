head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	sthen_20140313:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2016.04.28.18.19.47;	author sthen;	state dead;
branches;
next	1.2;
commitid	IzB6dS8YEKbH0xwR;

1.2
date	2014.09.17.09.04.38;	author sthen;	state Exp;
branches;
next	1.1;
commitid	WjgJsD6ZoFBBT4pr;

1.1
date	2014.03.13.17.28.04;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2014.03.13.17.28.04;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove, nothing uses it any more
@
text
@$OpenBSD: patch-Makefile_bsd-wrapper,v 1.2 2014/09/17 09:04:38 sthen Exp $

Last hunk: patch to install CGIs as mode 700, so that pkg_create run as
non-root is able to add them to the package. They are still installed with
mode 000 by pkg_add because the PLIST has an "@@mode 000" marker.

--- Makefile.bsd-wrapper.orig	Thu Mar 13 01:50:02 2014
+++ Makefile.bsd-wrapper	Thu Mar 13 01:52:23 2014
@@@@ -28,15 +28,15 @@@@ LNDIR=	/usr/bin/lndir
 #    proxycachedir: $prefix/proxy
 #</Layout>
 
-HTTPD_EXEC_PREFIX=	TRUEPREFIX
+HTTPD_EXEC_PREFIX=	${TRUEPREFIX}
 HTTPD_BINDIR=		${HTTPD_EXEC_PREFIX}/bin
 HTTPD_SBINDIR=		${HTTPD_EXEC_PREFIX}/sbin
 HTTPD_LIBEXECDIR=	${HTTPD_EXEC_PREFIX}/lib/apache/modules
 HTTPD_SYSCONFDIR=	${HTTPD_PREFIX}/conf
 HTTPD_ICONSDIR=		${HTTPD_PREFIX}/icons
 HTTPD_HTDOCSDIR=	${HTTPD_PREFIX}/htdocs
-HTTPD_MANUALDIR=	${HTTPD_EXEC_PREFIX}/share/apache-httpd-openbsd/doc/
-HTTPD_PREFIX=		${HTTPD_EXEC_PREFIX}/share/apache-httpd-openbsd/www
+HTTPD_MANUALDIR=	${HTTPD_EXEC_PREFIX}/share/doc/apache-httpd-openbsd
+HTTPD_PREFIX=		/var/www
 HTTPD_INCLUDEDIR=	${HTTPD_EXEC_PREFIX}/lib/apache/include
 HTTPD_RUNDIR=		${HTTPD_PREFIX}/logs
 HTTPD_LOGDIR=		${HTTPD_PREFIX}/logs
@@@@ -767,7 +767,7 @@@@ distribution:
 		j=`dirname $$i`; \
 		${INSTALL} -d -g ${BINGRP} -m 755 ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
 		echo "Installing ${DESTDIR}${HTTPD_PREFIX}/$$i"; \
-		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 000 \
+		${INSTALL} ${INSTALL_COPY} -g ${BINGRP} -m 700 \
 		    ${.OBJDIR}/$$i ${DESTDIR}${HTTPD_PREFIX}/$$j/; \
 	done
 	@@-for i in ${ICONFILES}; do \
@


1.2
log
@Modify apache-httpd-openbsd Makefile to install CGIs as mode 700 instead
of 000, so that pkg_create run as non-root is able to create the package.
These files are annotated "@@mode 000" in the PLIST so when the package
is installed, they still have no access permissions, so no change to
the end results. Remove FAKE_AS_ROOT=Yes.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_bsd-wrapper,v 1.1.1.1 2014/03/13 17:28:04 sthen Exp $
@


1.1
log
@Initial revision
@
text
@d1 6
a6 1
$OpenBSD$
d28 9
@


1.1.1.1
log
@Import a snapshot of the modified Apache httpd (previously in base) to ports.
Mostly worked on by florian@@, port tweaks by me.
@
text
@@
