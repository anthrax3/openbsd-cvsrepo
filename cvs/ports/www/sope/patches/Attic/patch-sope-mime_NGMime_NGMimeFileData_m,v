head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.10.17.09.19.32;	author sebastia;	state dead;
branches;
next	1.1;
commitid	03L8WiYUX7RAenY5;

1.1
date	2014.05.16.14.54.16;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update sope to 2.2.9a

had most or even all intermediate versions running, some of them
introduced problems, that were fixed in following version, introducing
new problems, ...
Have this now running since a few weeks without issues
@
text
@$OpenBSD: patch-sope-mime_NGMime_NGMimeFileData_m,v 1.1 2014/05/16 14:54:16 giovanni Exp $
Fixed fd leak where files were unlinked w/o being closed first. 
https://github.com/inverse-inc/sope/commit/60caf252df2eed12115f05ff5025b54f01b42efb

--- sope-mime/NGMime/NGMimeFileData.m.orig	Thu May 15 18:22:04 2014
+++ sope-mime/NGMime/NGMimeFileData.m	Thu May 15 18:23:19 2014
@@@@ -95,6 +95,9 @@@@ static unsigned      tmpmask  = 0600;
     [self release];
     return nil;
   }
+  
+  close(fd);
+
   return [self initWithPath:filename removeFile:YES];
 }
 
@


1.1
log
@
Fixed fd leak where files were unlinked w/o being closed first.
patch from upstream
ok sebastia@@
@
text
@d1 1
a1 1
$OpenBSD$
@

