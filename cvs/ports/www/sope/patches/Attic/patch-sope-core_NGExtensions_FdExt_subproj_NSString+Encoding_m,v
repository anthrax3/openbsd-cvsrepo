head	1.2;
access;
symbols
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.07.21.06.27.21;	author sebastia;	state dead;
branches;
next	1.1;

1.1
date	2010.12.11.14.10.32;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update SOPE to 1.3.8a, zap a couple of patches that made it upstream.

OK landry@@
@
text
@$OpenBSD: patch-sope-core_NGExtensions_FdExt_subproj_NSString+Encoding_m,v 1.1 2010/12/11 14:10:32 sebastia Exp $

fix abort(), when there was an error with iconv_open getting a conversion descriptor

--- sope-core/NGExtensions/FdExt.subproj/NSString+Encoding.m.orig	Tue Nov  2 15:12:13 2010
+++ sope-core/NGExtensions/FdExt.subproj/NSString+Encoding.m	Fri Dec 10 19:58:24 2010
@@@@ -256,7 +256,7 @@@@ static char *iconv_wrapper(id self, char *_src, unsign
   return outbuf;
   
  CLEAR_AND_RETURN:
-  if (type)
+  if (type && (type != (iconv_t)-1))
     iconv_close(type);
   
   if (outbuf) {
@


1.1
log
@Fix an abort() in sogo, and bump.

was OK landry@@
@
text
@d1 1
a1 1
$OpenBSD$
@

