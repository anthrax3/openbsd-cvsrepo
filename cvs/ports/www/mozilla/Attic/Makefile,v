head	1.119;
access;
symbols
	OPENBSD_4_1:1.117.0.2
	OPENBSD_4_1_BASE:1.117
	OPENBSD_4_0:1.106.0.2
	OPENBSD_4_0_BASE:1.106
	OPENBSD_3_9:1.103.0.2
	OPENBSD_3_9_BASE:1.103
	OPENBSD_3_8:1.88.0.2
	OPENBSD_3_8_BASE:1.88
	OPENBSD_3_7:1.83.0.2
	OPENBSD_3_7_BASE:1.83
	OPENBSD_3_6:1.73.0.2
	OPENBSD_3_6_BASE:1.73
	OPENBSD_3_5:1.70.0.2
	OPENBSD_3_5_BASE:1.70
	OPENBSD_3_4:1.59.0.2
	OPENBSD_3_4_BASE:1.59
	OPENBSD_3_3:1.24.0.2
	OPENBSD_3_3_BASE:1.24
	OPENBSD_3_2:1.23.0.4
	OPENBSD_3_2_BASE:1.23
	OPENBSD_3_1:1.23.0.2
	OPENBSD_3_1_BASE:1.23
	OPENBSD_3_0:1.21.0.2
	OPENBSD_3_0_BASE:1.21
	OPENBSD_2_9_TRACKING_SWITCH:1.19
	OPENBSD_2_9:1.15.0.2
	OPENBSD_2_9_BASE:1.15
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	mozilla-19980728:1.1.1.1
	mozilla:1.1.1;
locks; strict;
comment	@# @;


1.119
date	2007.05.25.16.31.39;	author martynas;	state dead;
branches;
next	1.118;

1.118
date	2007.04.06.14.48.28;	author martynas;	state Exp;
branches;
next	1.117;

1.117
date	2007.02.22.00.40.59;	author naddy;	state Exp;
branches;
next	1.116;

1.116
date	2007.02.17.22.27.37;	author steven;	state Exp;
branches;
next	1.115;

1.115
date	2007.02.14.17.13.42;	author naddy;	state Exp;
branches;
next	1.114;

1.114
date	2007.01.12.20.47.53;	author kurt;	state Exp;
branches;
next	1.113;

1.113
date	2007.01.04.20.19.54;	author steven;	state Exp;
branches;
next	1.112;

1.112
date	2006.12.16.12.22.35;	author espie;	state Exp;
branches;
next	1.111;

1.111
date	2006.11.30.21.06.35;	author kurt;	state Exp;
branches;
next	1.110;

1.110
date	2006.11.25.14.24.47;	author steven;	state Exp;
branches;
next	1.109;

1.109
date	2006.11.17.19.33.19;	author kurt;	state Exp;
branches;
next	1.108;

1.108
date	2006.10.01.22.23.47;	author brad;	state Exp;
branches;
next	1.107;

1.107
date	2006.09.18.12.00.00;	author espie;	state Exp;
branches;
next	1.106;

1.106
date	2006.06.13.13.34.56;	author bernd;	state Exp;
branches;
next	1.105;

1.105
date	2006.05.02.07.27.12;	author wilfried;	state Exp;
branches;
next	1.104;

1.104
date	2006.03.27.04.23.28;	author pvalchev;	state Exp;
branches;
next	1.103;

1.103
date	2006.02.12.19.31.37;	author david;	state Exp;
branches
	1.103.2.1;
next	1.102;

1.102
date	2006.02.08.21.22.07;	author ian;	state Exp;
branches;
next	1.101;

1.101
date	2006.02.05.00.21.21;	author espie;	state Exp;
branches;
next	1.100;

1.100
date	2006.01.16.20.47.35;	author steven;	state Exp;
branches;
next	1.99;

1.99
date	2006.01.14.00.07.31;	author espie;	state Exp;
branches;
next	1.98;

1.98
date	2006.01.01.16.02.36;	author sturm;	state Exp;
branches;
next	1.97;

1.97
date	2005.12.09.19.59.54;	author wilfried;	state Exp;
branches;
next	1.96;

1.96
date	2005.11.15.15.57.29;	author wilfried;	state Exp;
branches;
next	1.95;

1.95
date	2005.11.03.03.11.22;	author pvalchev;	state Exp;
branches;
next	1.94;

1.94
date	2005.10.19.15.21.21;	author naddy;	state Exp;
branches;
next	1.93;

1.93
date	2005.10.14.04.00.38;	author kurt;	state Exp;
branches;
next	1.92;

1.92
date	2005.10.13.04.32.41;	author bernd;	state Exp;
branches;
next	1.91;

1.91
date	2005.10.03.19.28.25;	author kurt;	state Exp;
branches;
next	1.90;

1.90
date	2005.09.26.21.04.48;	author kurt;	state Exp;
branches;
next	1.89;

1.89
date	2005.09.22.17.00.24;	author kurt;	state Exp;
branches;
next	1.88;

1.88
date	2005.05.15.16.24.06;	author kurt;	state Exp;
branches
	1.88.2.1;
next	1.87;

1.87
date	2005.04.16.23.54.53;	author kurt;	state Exp;
branches;
next	1.86;

1.86
date	2005.04.11.15.03.18;	author kurt;	state Exp;
branches;
next	1.85;

1.85
date	2005.03.30.22.03.04;	author kurt;	state Exp;
branches;
next	1.84;

1.84
date	2005.03.26.19.05.54;	author wilfried;	state Exp;
branches;
next	1.83;

1.83
date	2005.03.13.05.02.16;	author kurt;	state Exp;
branches
	1.83.2.1;
next	1.82;

1.82
date	2005.03.06.07.53.57;	author alek;	state Exp;
branches;
next	1.81;

1.81
date	2005.01.19.14.49.33;	author kurt;	state Exp;
branches;
next	1.80;

1.80
date	2005.01.11.22.52.55;	author kurt;	state Exp;
branches;
next	1.79;

1.79
date	2005.01.11.04.26.45;	author kurt;	state Exp;
branches;
next	1.78;

1.78
date	2005.01.04.21.27.28;	author wilfried;	state Exp;
branches;
next	1.77;

1.77
date	2005.01.04.20.59.16;	author wilfried;	state Exp;
branches;
next	1.76;

1.76
date	2004.12.11.13.29.22;	author alek;	state Exp;
branches;
next	1.75;

1.75
date	2004.12.08.21.54.49;	author naddy;	state Exp;
branches;
next	1.74;

1.74
date	2004.10.31.07.23.13;	author brad;	state Exp;
branches;
next	1.73;

1.73
date	2004.08.04.16.12.14;	author naddy;	state Exp;
branches;
next	1.72;

1.72
date	2004.05.06.14.39.49;	author wilfried;	state Exp;
branches;
next	1.71;

1.71
date	2004.04.09.14.12.15;	author kevlo;	state Exp;
branches;
next	1.70;

1.70
date	2004.03.03.02.23.56;	author naddy;	state Exp;
branches;
next	1.69;

1.69
date	2004.03.02.08.32.13;	author pvalchev;	state Exp;
branches;
next	1.68;

1.68
date	2004.03.01.23.51.58;	author drahn;	state Exp;
branches;
next	1.67;

1.67
date	2004.02.25.02.35.17;	author naddy;	state Exp;
branches;
next	1.66;

1.66
date	2004.02.15.19.44.01;	author wilfried;	state Exp;
branches;
next	1.65;

1.65
date	2004.02.02.04.53.49;	author marcm;	state Exp;
branches;
next	1.64;

1.64
date	2004.01.19.14.36.48;	author wilfried;	state Exp;
branches;
next	1.63;

1.63
date	2004.01.18.10.48.38;	author wilfried;	state Exp;
branches;
next	1.62;

1.62
date	2003.12.04.15.01.38;	author wilfried;	state Exp;
branches;
next	1.61;

1.61
date	2003.10.18.19.44.47;	author sturm;	state Exp;
branches;
next	1.60;

1.60
date	2003.10.11.01.43.03;	author brad;	state Exp;
branches;
next	1.59;

1.59
date	2003.09.03.17.35.47;	author pvalchev;	state Exp;
branches;
next	1.58;

1.58
date	2003.08.18.14.22.12;	author wilfried;	state Exp;
branches;
next	1.57;

1.57
date	2003.07.24.12.18.41;	author naddy;	state Exp;
branches;
next	1.56;

1.56
date	2003.07.17.08.24.24;	author wilfried;	state Exp;
branches;
next	1.55;

1.55
date	2003.07.16.16.41.24;	author jason;	state Exp;
branches;
next	1.54;

1.54
date	2003.07.04.06.59.15;	author marcm;	state Exp;
branches;
next	1.53;

1.53
date	2003.07.01.11.10.36;	author wilfried;	state Exp;
branches;
next	1.52;

1.52
date	2003.07.01.02.34.36;	author pvalchev;	state Exp;
branches;
next	1.51;

1.51
date	2003.07.01.02.28.42;	author pvalchev;	state Exp;
branches;
next	1.50;

1.50
date	2003.06.25.12.01.16;	author wilfried;	state Exp;
branches;
next	1.49;

1.49
date	2003.06.19.19.07.59;	author jolan;	state Exp;
branches;
next	1.48;

1.48
date	2003.06.06.12.50.30;	author wilfried;	state Exp;
branches;
next	1.47;

1.47
date	2003.06.02.07.05.56;	author pvalchev;	state Exp;
branches;
next	1.46;

1.46
date	2003.05.27.12.26.40;	author wilfried;	state Exp;
branches;
next	1.45;

1.45
date	2003.05.26.11.06.48;	author wilfried;	state Exp;
branches;
next	1.44;

1.44
date	2003.05.23.10.09.17;	author wilfried;	state Exp;
branches;
next	1.43;

1.43
date	2003.05.21.11.15.28;	author wilfried;	state Exp;
branches;
next	1.42;

1.42
date	2003.05.18.20.41.19;	author wilfried;	state Exp;
branches;
next	1.41;

1.41
date	2003.05.18.17.06.05;	author wilfried;	state Exp;
branches;
next	1.40;

1.40
date	2003.05.18.15.22.45;	author wilfried;	state Exp;
branches;
next	1.39;

1.39
date	2003.05.18.05.39.10;	author wilfried;	state Exp;
branches;
next	1.38;

1.38
date	2003.05.17.16.58.35;	author wilfried;	state Exp;
branches;
next	1.37;

1.37
date	2003.05.17.16.04.17;	author wilfried;	state Exp;
branches;
next	1.36;

1.36
date	2003.05.17.15.38.30;	author wilfried;	state Exp;
branches;
next	1.35;

1.35
date	2003.05.17.06.48.41;	author wilfried;	state Exp;
branches;
next	1.34;

1.34
date	2003.05.17.05.56.22;	author wilfried;	state Exp;
branches;
next	1.33;

1.33
date	2003.05.17.05.52.25;	author wilfried;	state Exp;
branches;
next	1.32;

1.32
date	2003.05.17.05.15.10;	author wilfried;	state Exp;
branches;
next	1.31;

1.31
date	2003.05.17.01.30.32;	author wilfried;	state Exp;
branches;
next	1.30;

1.30
date	2003.05.16.19.11.30;	author wilfried;	state Exp;
branches;
next	1.29;

1.29
date	2003.05.16.03.56.41;	author wilfried;	state Exp;
branches;
next	1.28;

1.28
date	2003.05.15.14.35.45;	author wilfried;	state Exp;
branches;
next	1.27;

1.27
date	2003.05.15.00.53.45;	author wilfried;	state Exp;
branches;
next	1.26;

1.26
date	2003.05.14.21.50.59;	author wilfried;	state Exp;
branches;
next	1.25;

1.25
date	2003.04.13.02.40.48;	author david;	state Exp;
branches;
next	1.24;

1.24
date	2002.12.29.15.03.57;	author fgsch;	state Exp;
branches;
next	1.23;

1.23
date	2001.12.27.12.59.01;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2001.10.28.13.05.50;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2001.08.30.13.43.20;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2001.08.19.02.30.45;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2001.08.13.14.16.34;	author drahn;	state Exp;
branches;
next	1.18;

1.18
date	2001.06.23.04.45.16;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.22.16.32.51;	author fgsch;	state Exp;
branches;
next	1.16;

1.16
date	2001.05.06.04.22.49;	author lebel;	state Exp;
branches;
next	1.15;

1.15
date	2001.04.18.15.01.23;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2001.03.13.14.43.12;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.22.15.43.40;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.09.16.16.13.06;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.04.09.17.38.38;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.24.23.28.37;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2000.03.24.22.13.48;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2000.03.24.22.12.03;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.05.18.30.45;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.01.10.08.08;	author turan;	state Exp;
branches;
next	1.5;

1.5
date	2000.02.11.01.10.13;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2000.02.11.00.37.39;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	99.10.05.16.51.31;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	98.12.16.20.17.34;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.08.22.18.38.50;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.08.22.18.38.50;	author marc;	state Exp;
branches;
next	;

1.83.2.1
date	2005.10.03.13.39.31;	author sturm;	state Exp;
branches;
next	1.83.2.2;

1.83.2.2
date	2005.10.30.07.19.27;	author sturm;	state Exp;
branches;
next	;

1.88.2.1
date	2005.11.01.11.38.31;	author sturm;	state Exp;
branches;
next	1.88.2.2;

1.88.2.2
date	2006.05.07.06.40.33;	author sturm;	state Exp;
branches;
next	;

1.103.2.1
date	2006.05.07.06.40.57;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.119
log
@remove unmaintained mozilla port; if you are still using it consider
switching to seamonkey
ok kurt@@ pval@@ espie@@ steven@@ jasper@@ alek@@
@
text
@# $OpenBSD: Makefile,v 1.118 2007/04/06 14:48:28 martynas Exp $

ONLY_FOR_ARCHS= alpha i386 sparc sparc64 amd64 powerpc

COMMENT-main=	"open source version of the Netscape browser"
COMMENT-devel=	"devel files for Gecko"

VER=		1.7.13
DISTNAME=	mozilla
PKGNAME=	mozilla-${VER}
PKGNAME-main=	mozilla-${VER}p8
PKGNAME-devel=	mozilla-devel-${VER}p8
DISTFILES=	mozilla-${VER}-source.tar.bz2
SO_VERSION=	8.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
.for _lib in accessibility addrbook appcomps autoconfig bayesflt caps chrome \
	composer cookie docshell editor embedcomponents fileview fort gfx_gtk \
	gfxps gfxxprint gkgfx gklayout gkplugin gtkembedmoz gtkxtbin htmlpars \
	i18n imglib2 impComm4xMail impText import inspector ipcdc jar50 jsd \
	jsj localmail mailnews mailview mime mimeemitter mork mozfind mozjs \
	msgbaseutil msgcompose msgdb msgimap msgmdn msgnews msgsmime myspell \
	necko necko2 nsappshell nsprefm nss3 nssckbi oji p3p pipboot \
	pipnss pippki pref profile rdf smime3 softokn3 \
	spellchecker ssl3 swft system-pref transformiix txmgr typeaheadfind \
	uconv ucvmath universalchardet vcard wallet walletviewers webbrwsr \
	websrvcs widget_gtk2 xlibrgb xmlextras xpcom xpcom_compat \
	xpcom_compat_c xpconnect xpinstall xpistub xremote_client \
	xremoteservice
SHARED_LIBS+=	${_lib} ${SO_VERSION}
.endfor
 
CATEGORIES=	www

HOMEPAGE=	http://www.mozilla.org/

# mozilla public license
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/mozilla/releases/mozilla${VER}/source/

VMEM_WARNING=yes

MULTI_PACKAGES=	-main -devel

MODULES=	devel/gettext
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
		:zip->=2.3:archivers/zip
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
WANTLIB=	X11 Xext Xrender Xt atk-1.0 c cairo fontconfig freetype \
		glib-2.0 gmodule-2.0 gobject-2.0 glitz png m z \
		pango-1.0 pangocairo-1.0 pangoft2-1.0

RUN_DEPENDS-devel=	:${PKGNAME-main}:www/mozilla,-main
RUN_DEPENDS-main=	:esound-0.2.*:audio/esound
WANTLIB-main=		${WANTLIB} \
			Xft Xp jpeg pthread stdc++

USE_X11=	Yes
USE_GMAKE=	Yes
# Regression tests are too hard to adapt to run here
NO_REGRESS=	Yes
SUBST_VARS=	LOCALBASE SO_VERSION

MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf \
				${WRKSRC}/directory/c-sdk/config/autoconf

AUTOCONF_VERSION= 2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS=					\
		--with-system-jpeg=${LOCALBASE}	\
		--with-system-png=${LOCALBASE}	\
		--with-system-zlib=/usr/lib	\
		--with-system-nspr		\
		--with-pthreads			\
		--enable-default-toolkit=gtk2	\
		--enable-xft			\
		--enable-optimize=-Os		\
		--enable-crypto			\
		--enable-extensions=default	\
		--disable-pedantic		\
		--disable-debug			\
		--disable-tests			\
		--disable-ldap			\
		--disable-gnomevfs

CONFIGURE_ENV=	PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION=${SO_VERSION}

MAKE_ENV=	LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION=${SO_VERSION}

MOB=		${WRKSRC}/dist
MOZ=		${PREFIX}/mozilla

post-extract:
	@@cp ${FILESDIR}/xptc* ${WRKSRC}/xpcom/reflect/xptcall/src/md/unix/

pre-configure:
	@@cd ${WRKSRC}/directory/c-sdk && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
		${WRKSRC}/xpfe/bootstrap/mozilla.in
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp

do-install:
.for dir in include lib
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
	@@cd ${MOB}/public && ${TAR} -chf - nss | \
		${TAR} -xf - -C ${MOZ}/include
.for dir in chrome components defaults greprefs res searchplugins
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${MOB}/bin && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
	@@cd ${MOB}/bin && ${TAR} -chf - *.so.?.? | \
		${TAR} -xf - -C ${MOZ}
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
	${INSTALL_DATA} ${MOB}/bin/LICENSE ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/bin/mozilla ${PREFIX}/bin
	${INSTALL_SCRIPT} ${MOB}/bin/run-mozilla.sh ${MOB}/bin/mozilla-config ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/bin/regchrome ${MOB}/bin/regxpcom ${MOB}/bin/mozilla-bin ${MOB}/bin/mozilla-xremote-client ${MOZ}
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${WRKBUILD}/build/unix/*.pc ${PREFIX}/lib/pkgconfig
	${INSTALL_MAN} ${WRKSRC}/xpfe/bootstrap/mozilla.1 ${PREFIX}/man/man1/

.include <bsd.port.mk>
@


1.118
log
@consistent MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2007/02/22 00:40:59 naddy Exp $
@


1.117
log
@LP64 fix for XUL templates builder; from Martynas Venckus
ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2007/02/17 22:27:37 steven Exp $
d43 1
a43 2
MASTER_SITES=	http://ftp.eu.mozilla.org/pub/mozilla.org/mozilla/releases/mozilla${VER}/source/ \
		http://ftp.mozilla.org/pub/mozilla.org/mozilla/releases/mozilla${VER}/source/
@


1.116
log
@bump PKGNAME-devel, which depends on PKGNAME-main.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2007/02/14 17:13:42 naddy Exp $
d11 2
a12 2
PKGNAME-main=	mozilla-${VER}p7
PKGNAME-devel=	mozilla-devel-${VER}p7
@


1.115
log
@install man page; from Martynas Venckus, ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2007/01/12 20:47:53 kurt Exp $
d12 1
a12 1
PKGNAME-devel=	mozilla-devel-${VER}p6
@


1.114
log
@libfreetype 2.2 support. From NetBSD PR -> Brad <brad at comstyle.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2007/01/04 20:19:54 steven Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p6
PKGNAME-main=	mozilla-${VER}p6
d139 1
@


1.113
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2006/12/16 12:22:35 espie Exp $
d10 3
a12 3
PKGNAME=	mozilla-${VER}p5
PKGNAME-main=	mozilla-${VER}p5
PKGNAME-devel=	mozilla-devel-${VER}p5
@


1.112
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2006/11/30 21:06:35 kurt Exp $
d10 3
a12 3
PKGNAME=	mozilla-${VER}p4
PKGNAME-main=	mozilla-${VER}p4
PKGNAME-devel=	mozilla-devel-${VER}p4
d55 2
a56 2
WANTLIB=	X11 Xt atk-1.0 c cairo fontconfig freetype \
		glib-2.0 gmodule-2.0 gobject-2.0 m \
d62 1
a62 1
			Xext Xft Xp Xrender jpeg png pthread stdc++ z
@


1.111
log
@- require nspr with PR_GetLibraryName fix
- bump major due to previous nspr removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2006/11/25 14:24:47 steven Exp $
d52 1
a52 2
		:zip->=2.3:archivers/zip \
		:pkgconfig-*:devel/pkgconfig
@


1.110
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2006/11/17 19:33:19 kurt Exp $
d10 3
a12 3
PKGNAME=	mozilla-${VER}p3
PKGNAME-main=	mozilla-${VER}p3
PKGNAME-devel=	mozilla-devel-${VER}p3
d14 1
a14 1
SO_VERSION=	7.0
d55 1
a55 1
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.3p2:devel/nspr
@


1.109
log
@use devel/nspr instead of internal nspr. now using libc strtod and __dtoa
via devel/nspr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2006/10/01 22:23:47 brad Exp $
d5 1
a5 1
COMMENT=	"open source version of the Netscape browser"
d10 3
a12 2
PKGNAME=	mozilla-${VER}p2
PKGNAME-devel=	mozilla-devel-${VER}p2
d48 1
a48 2
MULTI_PACKAGES=	-devel
SUBPACKAGE?=
d60 4
a63 7
.if defined(PACKAGING) && ${SUBPACKAGE} == "-devel"
MODULES=	devel/gettext
RUN_DEPENDS=	:${PKGNAME}:www/mozilla
.else
RUN_DEPENDS=	:esound-0.2.*:audio/esound
WANTLIB+=	Xext Xft Xp Xrender jpeg png pthread stdc++ z
.endif
@


1.108
log
@stop using the gcc3 module on the alpha architecture.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2006/09/18 12:00:00 espie Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p1
PKGNAME-devel=	mozilla-devel-${VER}p1
d22 2
a23 2
	necko necko2 nsappshell nspr4 nsprefm nss3 nssckbi oji p3p pipboot \
	pipnss pippki plc4 plds4 pref profile rdf smime3 softokn3 \
d54 3
a56 2
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
WANTLIB=	X11 Xt atk-1.0 fontconfig freetype \
d58 1
a58 1
		pango-1.0 pangocairo-1.0 pangoft2-1.0 cairo
d65 1
a65 2
WANTLIB+=	Xext Xft Xp Xrender c jpeg png pthread z
WANTLIB+=	stdc++
a74 1
				${WRKSRC}/nsprpub/build/autoconf \
d83 1
a84 1
		--without-system-nspr		\
a112 1
	@@cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
a116 1
		${WRKSRC}/nsprpub/pr/include/md/_openbsd.h \
@


1.107
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2006/06/13 13:34:56 bernd Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p0
PKGNAME-devel=	mozilla-devel-${VER}p0
d50 1
a50 3
MODULES=	gcc3 devel/gettext
MODGCC3_ARCHES=	alpha
MODGCC3_LANGS=	C++
a64 1
.  if empty(MACHINE_ARCH:Malpha)
a65 1
.  endif
@


1.106
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2006/05/02 07:27:12 wilfried Exp $
d56 4
a59 4
LIB_DEPENDS=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2
WANTLIB=	X11 Xt atk-1.0.0.0 fontconfig freetype \
		glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 m \
		pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0 cairo
@


1.105
log
@update to 1.7.13, ok kurt@@

fixes multiple critical vulnerabilities
the last official release of the Mozilla Application Suite
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2006/03/27 04:23:28 pvalchev Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}
PKGNAME-devel=	mozilla-devel-${VER}
d57 1
a57 1
WANTLIB=	X11 Xext Xft Xrender Xt atk-1.0.0.0 fontconfig freetype \
d59 1
a59 1
		pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0 pangoft2-1.0.0.0
d66 1
a66 1
WANTLIB+=	Xp c jpeg png pthread z
@


1.104
log
@check XftLockFace() for NULL return to avoid a crash, see
https://bugzilla.mozilla.org/show_bug.cgi?id=331077
from Tobias Ulmer <tobiasu@@tmux.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2006/02/12 19:31:37 david Exp $
d8 1
a8 1
VER=		1.7.12
d10 2
a11 2
PKGNAME=	mozilla-${VER}p12
PKGNAME-devel=	mozilla-devel-${VER}p12
d13 1
a13 1
SO_VERSION=	6.0
@


1.103
log
@remove "the the" and replace /usr/local with PREFIX in MESSAGE; bump PKGNAME
ok wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2006/02/08 21:22:07 ian Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p11
PKGNAME-devel=	mozilla-devel-${VER}p11
@


1.103.2.1
log
@MFC:
update to 1.7.13, ok kurt@@

fixes multiple critical vulnerabilities
the last official release of the Mozilla Application Suite
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2006/02/12 19:31:37 david Exp $
d8 1
a8 1
VER=		1.7.13
d10 2
a11 2
PKGNAME=	mozilla-${VER}
PKGNAME-devel=	mozilla-devel-${VER}
d13 1
a13 1
SO_VERSION=	7.0
@


1.102
log
@Forgat to bump PKGNAME, reminded by nikolay@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2006/02/05 00:21:21 espie Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p10
PKGNAME-devel=	mozilla-devel-${VER}p10
@


1.101
log
@allow updates to work.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2006/01/16 20:47:35 steven Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p9
PKGNAME-devel=	mozilla-devel-${VER}p9
@


1.100
log
@fix WANTLIB after gtk+2 downgrade
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2006/01/14 00:07:31 espie Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p8
PKGNAME-devel=	mozilla-devel-${VER}p8
@


1.99
log
@more C++ libs bumps. Done thru mail, plus lizards.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2006/01/01 16:02:36 sturm Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p7
PKGNAME-devel=	mozilla-devel-${VER}p7
d57 1
a57 1
WANTLIB=	X11 Xt atk-1.0.0.0 fontconfig freetype \
d59 1
a59 1
		cairo pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0
d66 1
a66 1
WANTLIB+=	Xext Xft Xrender Xp c jpeg png pthread z
@


1.98
log
@SHARED_LIBS, keeping the same SO_VERSION for all libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2005/12/09 19:59:54 wilfried Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p6
PKGNAME-devel=	mozilla-devel-${VER}p6
d13 1
a13 1
SO_VERSION=	5.0
@


1.97
log
@move libgfxft2_s.a to -devel, found by Moritz Grimm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2005/11/15 15:57:29 wilfried Exp $
d16 15
@


1.96
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2005/11/03 03:11:22 pvalchev Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p5
PKGNAME-devel=	mozilla-devel-${VER}p5
@


1.95
log
@(same as firefox/minimo)
Fix a crash in prdtoa.c:mult() where there is an off-by-some bytes
in memory accessed during some very fucked up pointer acrobatics.
Allocate 2 bytes extra for that case, which seems to be a
sufficient hack to keep this working.

Debugged by me with minimo on zaurus/arm (pain!), seen also by krw@@
and others on amd64, who helped with testing.  Due to random malloc
this of course did not show up everywhere all the time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2005/10/19 15:21:21 naddy Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p4
PKGNAME-devel=	mozilla-devel-${VER}p4
d42 1
a42 1
WANTLIB=	X11 Xt Xft Xrender atk-1.0.0.0 fontconfig freetype \
d44 1
a44 1
		pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
d51 1
a51 1
WANTLIB+=	Xext Xp c jpeg png pthread z
@


1.94
log
@Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2005/10/14 04:00:38 kurt Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p3
PKGNAME-devel=	mozilla-devel-${VER}p3
@


1.93
log
@remove 'don't close dlopened objects' type ld.so work-arounds
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2005/10/13 04:32:41 bernd Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p2
PKGNAME-devel=	mozilla-devel-${VER}p2
@


1.92
log
@If we start a second firefox, don't show the profile chooser but open a
new browser window instead. (The same for thunderbird and mozilla.)

Idea from Marc Winiger <mw at msys.ch>, thanks!

suggestions, tests & ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2005/10/03 19:28:25 kurt Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p1
PKGNAME-devel=	mozilla-devel-${VER}p0
@


1.91
log
@fix PLIST problem. include files go in -devel. noticed by Roland Kuebert
in -stable testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2005/09/26 21:04:48 kurt Exp $
d10 1
a10 1
PKGNAME=	mozilla-${VER}p0
@


1.90
log
@- update to 1.7.12. fixes security issues, see:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Mozilla
- disable gnomevfs support (causes https pages to crash)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2005/09/22 17:00:24 kurt Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}
PKGNAME-devel=	mozilla-devel-${VER}
@


1.89
log
@- update to 1.7.11
- remove gtk2 flavor and make gtk2 the default
- fix gdk_property_get warnings (from Marc Matteo)
some feedback from Marc Matteo and Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2005/05/15 16:24:06 kurt Exp $
d8 1
a8 1
VER=		1.7.11
d13 1
a13 1
SO_VERSION=	4.0
a49 3
LIB_DEPENDS+=	gnomevfs-2::x11/gnome/vfs2 \
		jpeg.62::graphics/jpeg \
		png.3::graphics/png
d51 1
a51 2
WANTLIB+=	Xext Xp ORBit-2 bonobo-2 bonobo-activation c \
		gconf-2 gthread-2.0.0.0 pthread z
d83 2
a84 1
		--disable-ldap
@


1.88
log
@- update to 1.7.8. multiple security issues, see:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Mozilla
- Bump shlib major after recent libc changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2005/04/16 23:54:53 kurt Exp $
d8 1
a8 1
VER=		1.7.8
d13 1
a13 1
SO_VERSION=	3.0
a34 3
FLAVORS=	gtk2
FLAVOR?=

d38 2
a39 1
BUILD_DEPENDS=	:zip->=2.3:archivers/zip \
d41 4
a44 4
LIB_DEPENDS=	jpeg.62::graphics/jpeg \
		png.3::graphics/png

WANTLIB=	X11 Xext Xt m
a46 1
LIB_DEPENDS=
a47 4
.  if ${FLAVOR:L:Mgtk2}
RUN_DEPENDS=	:${PKGNAME}-gtk2:www/mozilla,gtk2
WANTLIB+=	Xft Xrender fontconfig freetype
.  else
a48 1
.  endif
d50 3
d54 2
a55 1
WANTLIB+=	Xft Xp Xrender c fontconfig freetype pthread z
a58 16

.  if ${FLAVOR:L:Mgtk2}
LIB_DEPENDS+=	gnomevfs-2::x11/gnome/vfs2
WANTLIB+=	ORBit-2 bonobo-2 bonobo-activation gconf-2 gthread-2.0.0.0
.  endif
.endif

.if ${FLAVOR:L:Mgtk2}
BUILD_DEPENDS+=	:libIDL-*:devel/libIDL
LIB_DEPENDS+=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2
WANTLIB+=	Xcursor Xinerama atk-1.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
.else
BUILD_DEPENDS+=	:ORBit-*:devel/ORBit
LIB_DEPENDS+=	gtk.1,gdk.1::x11/gtk+
WANTLIB+=	Xi glib gmodule
d79 1
a87 6

.if ${FLAVOR:L:Mgtk2}
CONFIGURE_ARGS+=--enable-default-toolkit=gtk2
.else
CONFIGURE_ARGS+=--enable-default-toolkit=gtk
.endif
@


1.88.2.1
log
@update to Mozilla 1.7.12, fixes several security vulnerabilities

Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.

ok brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2005/05/15 16:24:06 kurt Exp $
d8 1
a8 1
VER=		1.7.12
d13 1
a13 1
SO_VERSION=	5.0
d46 2
a49 1
WANTLIB=	X11 Xt m Xext
d59 1
a59 1
WANTLIB=	X11 Xext Xft Xp Xrender Xt c fontconfig freetype m pthread z
d63 5
d106 1
a106 2
		--disable-ldap			\
		--disable-gnomevfs
@


1.88.2.2
log
@MFC:
update to 1.7.13, ok kurt@@

fixes multiple critical vulnerabilities
the last official release of the Mozilla Application Suite
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88.2.1 2005/11/01 11:38:31 sturm Exp $
d8 1
a8 1
VER=		1.7.13
d13 1
a13 1
SO_VERSION=	7.0
@


1.87
log
@- make the build OFFICAL. mostly for consistancy. mozilla profiles don't
work the same as firefox and thunderbird.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2005/04/11 15:03:18 kurt Exp $
d8 1
a8 1
VER=		1.7.6
d10 4
a13 4
PKGNAME=	mozilla-${VER}p2
PKGNAME-devel=	mozilla-devel-${VER}p2
DISTFILES=	mozilla-source-${VER}.tar.bz2
SO_VERSION=	2.0
@


1.86
log
@- bump major shlib version
- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype & esd
- move INSTALL/DEINSTALL code to PLIST
- Add MESSAGE regarding profiles

okay wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2005/03/30 22:03:04 kurt Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p1
PKGNAME-devel=	mozilla-devel-${VER}p1
d115 2
d120 2
@


1.85
log
@- re-enable xft for gtk
- wantlib correction for alpha (from alek@@)
- fix lp64 bug that prevented mail from being viewed on sparc64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2005/03/26 19:05:54 wilfried Exp $
d10 2
a11 1
PKGNAME=	mozilla-${VER}p0
d13 4
a16 1

a29 2
MULTI_PACKAGES=	-devel

d32 1
a32 4
.for i in ${MULTI_PACKAGES}
PKGNAME$i=	mozilla${i}-${VER}p0
.endfor

d85 1
a85 1
SUBST_VARS=	LOCALBASE
d114 5
a118 2
CONFIGURE_ENV=	PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
MAKE_ENV=	LD_LIBRARY_PATH="${WRKSRC}/dist/bin"
d131 3
d148 1
a148 1
	@@cd ${MOB}/bin && ${TAR} -chf - *.so.1.0 | \
d150 1
a150 1
	@@chmod 444 ${MOZ}/*.so.1.0 ${MOZ}/components/*.so.1.0 ${MOZ}/components/*.js
@


1.84
log
@update mozilla to 1.7.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2005/03/13 05:02:16 kurt Exp $
d10 1
a10 1
PKGNAME=	mozilla-${VER}
d31 1
a31 1
PKGNAME$i=	mozilla${i}-${VER}
d47 2
d51 1
a51 1
WANTLIB=	X11 Xt m Xext
d60 5
a64 1
WANTLIB=	X11 Xext Xp Xt c m pthread stdc++ z
d74 2
a75 3
WANTLIB+=	Xcursor Xft Xinerama Xrender atk-1.0.0.0 fontconfig freetype \
		glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
		pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
d100 1
d110 1
a110 3
CONFIGURE_ARGS+=--enable-default-toolkit=gtk2	\
		--enable-xft			\
		--disable-freetype2
d112 1
a112 3
CONFIGURE_ARGS+=--enable-default-toolkit=gtk	\
		--disable-xft			\
		--enable-freetype2
@


1.83
log
@Upgrade to 1.7.5

Tested on i386/sparc64/macppc/alpha by myself and/or alek@@
One issue found with sparc64: fetching mail crashes.

okay pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2005/03/06 07:53:57 alek Exp $
d8 1
a8 1
VER=		1.7.5
d147 1
a147 1
	${INSTALL_PROGRAM} ${MOB}/bin/regchrome ${MOB}/bin/regxpcom ${MOB}/bin/mozilla-bin ${MOZ}
@


1.83.2.1
log
@update to Mozilla 1.7.12, fixes several security vulnerabilities

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2005/03/13 05:02:16 kurt Exp $
d8 1
a8 1
VER=		1.7.12
d11 1
a11 5
PKGNAME-devel=	mozilla-devel-${VER}
DISTFILES=	mozilla-${VER}-source.tar.bz2
SO_VERSION=	5.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
d26 2
d30 4
a33 1
MULTI_PACKAGES=	-devel
a49 1
MODULES=	devel/gettext
d58 4
a61 3
WANTLIB=	X11 Xext Xft Xp Xrender Xt c fontconfig freetype m pthread z
.  if empty(MACHINE_ARCH:Malpha)
WANTLIB+=	stdc++
d68 3
a70 2
WANTLIB+=	Xcursor Xinerama atk-1.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
d81 1
a81 1
SUBST_VARS=	LOCALBASE SO_VERSION
a94 1
		--enable-xft			\
d101 1
a101 2
		--disable-ldap			\
		--disable-gnomevfs
d104 3
a106 1
CONFIGURE_ARGS+=--enable-default-toolkit=gtk2
d108 3
a110 1
CONFIGURE_ARGS+=--enable-default-toolkit=gtk
d113 2
a114 8
CONFIGURE_ENV=	PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION=${SO_VERSION}
MAKE_ENV=	LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION=${SO_VERSION}
a126 3
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/nsprpub/pr/include/md/_openbsd.h \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp
d141 1
a141 1
	@@cd ${MOB}/bin && ${TAR} -chf - *.so.?.? | \
d143 1
a143 1
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
d147 1
a147 1
	${INSTALL_PROGRAM} ${MOB}/bin/regchrome ${MOB}/bin/regxpcom ${MOB}/bin/mozilla-bin ${MOB}/bin/mozilla-xremote-client ${MOZ}
@


1.83.2.2
log
@MFC:
Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83.2.1 2005/10/03 13:39:31 sturm Exp $
d10 2
a11 2
PKGNAME=	mozilla-${VER}p3
PKGNAME-devel=	mozilla-devel-${VER}p3
@


1.82
log
@- Adjust WANTLIB marker and *_DEPENDS
- Use devel/gettext MODULE
- Bump PKGNAME

ok naddy@@, kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2005/01/19 14:49:33 kurt Exp $
d8 1
a8 1
VER=		1.6
d10 1
a10 1
PKGNAME=	mozilla-${VER}p1
d23 2
a24 2
MASTER_SITES=	http://ftp.eu.mozilla.org/pub/mozilla.org/mozilla/releases/mozilla${VER}/src/ \
		http://ftp.mozilla.org/pub/mozilla/releases/mozilla${VER}/src/
d31 1
a31 1
PKGNAME$i=	mozilla${i}-${VER}p1
d51 2
a52 2
RUN_DEPENDS=	::www/mozilla,gtk2
WANTLIB+=	fontconfig freetype Xrender Xft
d54 1
a54 1
RUN_DEPENDS=	::www/mozilla
d58 5
a62 2
WANTLIB=	X11 Xext Xft Xp Xrender Xt c fontconfig freetype m pthread \
		stdc++ z
d68 3
a70 2
WANTLIB+=	Xcursor Xinerama atk-1.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 \
		gobject-2.0.0.0 pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
a94 1
		--enable-xft			\
d104 7
a110 1
CONFIGURE_ARGS+=--enable-default-toolkit=gtk2
d124 1
d136 1
a136 1
.for dir in chrome components defaults res searchplugins
d143 1
a143 1
	@@chmod 444 ${MOZ}/*.so.1.0 ${MOZ}/components/*.so.1.0
a149 4
.for file in mozilla mozilla-mail mozilla-compose
	${INSTALL_DATA} ${WRKSRC}/build/package/rpm/SOURCES/${file}.desktop ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/build/package/rpm/SOURCES/${file}-icon.* ${PREFIX}/share/pixmaps
.endfor
@


1.81
log
@adjust -devel subpackage so that 'SUBPACKAGE=-devel make' includes
wantlib and build & lib depends.

problem noticed by Matthias Kilian. commit this wilfried@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2005/01/11 22:52:55 kurt Exp $
d10 1
a10 1
PKGNAME=	mozilla-${VER}p0
a21 2
WANTLIB=		X11 Xext Xft Xp Xrender Xt c fontconfig freetype \
			iconv intl m pthread stdc++ z
d31 1
a31 1
PKGNAME$i=	mozilla${i}-${VER}p0
d39 8
d48 2
d52 1
d56 4
a60 9

MODULES=	gcc3
MODGCC3_ARCHES=	alpha
MODGCC3_LANGS=	C++
BUILD_DEPENDS=	:zip->=2.3:archivers/zip \
		:pkgconfig-*:devel/pkgconfig
LIB_DEPENDS=	jpeg.62::graphics/jpeg \
		png.3::graphics/png \
		esd.2::audio/esound
@


1.80
log
@- make gtk2 -devel subpackage depend specifically on the gtk2 flavor of base
package
- bump -devel package to match base package

okay wilfried@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2005/01/11 04:26:45 kurt Exp $
d41 1
a41 1
.if ${SUBPACKAGE} == "-devel"
d47 2
a48 1
.else
d58 1
a58 1
.  if ${FLAVOR:L:Mgtk2}
d63 1
a63 1
.  else
a66 1
.  endif
@


1.79
log
@- add gtk2 flavor
- fix system png include path
- change !gtk2 IDL lib to BUILD_DEPEND
- bump package name
- always use own nspr

with help and ok from wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2005/01/04 21:27:28 wilfried Exp $
d33 1
a33 1
PKGNAME$i=	mozilla${i}-${VER}
d42 3
d46 1
@


1.78
log
@let's make some noise, using esound
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2005/01/04 20:59:16 wilfried Exp $
d10 1
a10 1
PKGNAME=	mozilla-${VER}
d22 2
a23 2
WANTLIB=		X11 Xext Xft Xi Xp Xrender Xt c fontconfig freetype \
			glib gmodule iconv intl m pthread stdc++ z
d38 3
d49 1
a49 3
LIB_DEPENDS=	gtk.1,gdk.1::x11/gtk+ \
		IDL.4::devel/ORBit \
		jpeg.62::graphics/jpeg \
d52 11
d82 1
d91 4
@


1.77
log
@fix SUBST_VARS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2004/12/11 13:29:22 alek Exp $
d49 2
a50 1
		png.3::graphics/png
@


1.76
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2004/12/08 21:54:49 naddy Exp $
d56 1
@


1.75
log
@Do not disable ProPolice, we have reports of success for most platforms.
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2004/10/31 07:23:13 brad Exp $
d22 2
@


1.74
log
@gcc3/powerpc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2004/08/04 16:12:14 naddy Exp $
a73 6

# There is no problem with the propolice-enabled gcc3 on amd64 and sparc64,
# but it is reported to still be broken on others.
.if ${MACHINE_ARCH} != "amd64" && ${MACHINE_ARCH} != "sparc64"
CFLAGS+=	-fno-stack-protector
.endif
@


1.73
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2004/05/06 14:39:49 wilfried Exp $
d40 1
a40 1
MODGCC3_ARCHES=	alpha powerpc
@


1.72
log
@use no-autoheader and explicitly set autoconf version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2004/04/09 14:12:15 kevlo Exp $
d54 4
@


1.71
log
@remove redundant glib dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2004/03/03 02:23:56 naddy Exp $
d55 2
a56 1
CONFIGURE_STYLE= autoconf
@


1.70
log
@enable propolice on sparc64; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2004/03/02 08:32:13 pvalchev Exp $
a44 1
		glib.1,gmodule.1::devel/glib \
@


1.69
log
@amd64 support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2004/03/01 23:51:58 drahn Exp $
d71 1
a71 1
# There is no problem with the propolice-enabled gcc3 on amd64,
d73 1
a73 1
.if ${MACHINE_ARCH} != "amd64"
@


1.68
log
@Patches to make Mozilla work on OpenBSD/macppc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2004/02/25 02:35:17 naddy Exp $
d3 1
a3 1
ONLY_FOR_ARCHS= alpha i386 sparc sparc64 powerpc
d71 3
d75 2
@


1.67
log
@The sparc64 compiler is gcc3 now; don't require the gcc3 module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2004/02/15 19:44:01 wilfried Exp $
d3 1
a3 1
ONLY_FOR_ARCHS= alpha i386 sparc sparc64
d40 1
a40 1
MODGCC3_ARCHES=	alpha
@


1.66
log
@sync port/patches with other mozillas
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2004/02/02 04:53:49 marcm Exp $
d40 1
a40 1
MODGCC3_ARCHES=	alpha sparc64
@


1.65
log
@Install the Netscape Security System (NSS) include files with the
-devel subpackage.  For applications that want to compile against
Mozilla's NSS libs.

ok wilfried
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2004/01/19 14:36:48 wilfried Exp $
d23 2
a24 1
MASTER_SITES=	http://ftp.mozilla.org/pub/mozilla/releases/mozilla${VER}/src/
d40 1
a40 1
MODGCC3_ARCHES=	alpha sparc64 powerpc
d63 1
a63 1
		--enable-optimize=-O2		\
d94 1
a94 1
.for dir in chrome components defaults icons res plugins searchplugins
d101 1
@


1.64
log
@don't use xft if no xft fonts is available
stops moz from crashing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2004/01/18 10:48:38 wilfried Exp $
d91 2
@


1.63
log
@update mozilla to 1.6
add enable-xft and -optimize
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2003/12/04 15:01:38 wilfried Exp $
d82 1
a82 1
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g' \
@


1.62
log
@update mozilla to 1.6a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2003/10/18 19:44:47 sturm Exp $
d8 1
a8 1
VER=		1.6a
d41 2
a42 1
BUILD_DEPENDS=	:zip->=2.3:archivers/zip
d61 2
d71 1
@


1.61
log
@license markers and some corrections
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2003/10/11 01:43:03 brad Exp $
d8 1
a8 1
VER=		1.4
d46 1
a46 2
		png.3::graphics/png \
		mng.1::graphics/libmng
a56 1
		--with-system-mng=${LOCALBASE}	\
d104 2
@


1.60
log
@NOT_FOR_ARCHS -> ONLY_FOR_ARCHS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2003/09/03 17:35:47 pvalchev Exp $
d17 1
@


1.59
log
@mark these as not for powerpc as it doesn't currently work, especially
for release; suggested by drahn
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2003/08/18 14:22:12 wilfried Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	vax m68k hppa powerpc
@


1.58
log
@ppc patches from drahn@@, getting closer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2003/07/24 12:18:41 naddy Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	vax m68k hppa
@


1.57
log
@Give Mozilla a fighting chance on alpha.  Low-level xpcom code from
FreeBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2003/07/17 08:24:24 wilfried Exp $
d38 1
a38 1
MODGCC3_ARCHES=	alpha sparc64
@


1.56
log
@add support for ppc and sparc64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2003/07/16 16:41:24 jason Exp $
d38 1
a38 1
MODGCC3_ARCHES=	sparc64
@


1.55
log
@add VMEM_WARNING=yes, ok pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2003/07/04 06:59:15 marcm Exp $
d73 3
@


1.54
log
@Add some menu eyecandy for environs with menus that allow eyecandy :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2003/07/01 11:10:36 wilfried Exp $
d25 2
@


1.53
log
@update to 1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2003/07/01 02:34:36 pvalchev Exp $
d94 6
@


1.52
log
@do not even bother trying to build this on vax, m68k, hppa for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2003/07/01 02:28:42 pvalchev Exp $
d8 1
a8 1
VER=		1.4b
@


1.51
log
@Regression tests are too hard to adapt to run here, and noone seems to
want to do it; mark as NO_REGRESS so it does not stop 'make regress'
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.50 2003/06/25 12:01:16 wilfried Exp $
@


1.50
log
@add/use regchrome
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2003/06/19 19:07:59 jolan Exp $
d47 2
@


1.49
log
@search what will become the common plugin directory
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2003/06/06 12:50:30 wilfried Exp $
d89 1
a89 1
	${INSTALL_PROGRAM} ${MOB}/bin/regxpcom ${MOB}/bin/mozilla-bin ${MOZ}
@


1.48
log
@install mozilla-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2003/06/02 07:05:56 pvalchev Exp $
d70 2
@


1.47
log
@do not help this find iconv, as it cannot deal with it properly...
this was the cause for the strange japanese, etc chars in the menus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2003/05/27 12:26:40 wilfried Exp $
d86 1
a86 1
	${INSTALL_SCRIPT} ${MOB}/bin/run-mozilla.sh ${MOZ}
@


1.46
log
@optimization doesn't work together with stack-protector
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2003/05/26 11:06:48 wilfried Exp $
d33 1
a33 2
MODULES=	iconv
MODULES+=	gcc3
a62 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="-L${LOCALBASE}/lib"
@


1.45
log
@find and use iconv and libIDL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2003/05/23 10:09:17 wilfried Exp $
d63 3
a65 4
CONFIGURE_ENV=	CFLAGS="" CXXFLAGS="" \
		CPPFLAGS="-I${LOCALBASE}/include" LDFLAGS="-L${LOCALBASE}/lib"
MAKE_ENV=	LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		CFLAGS="" CXXFLAGS=""
@


1.44
log
@simplify patches
move run-mozilla to private dir
use PFRAG.shared
add -devel subpackage for browsers that uses the Gecko layout engine
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2003/05/21 11:15:28 wilfried Exp $
d58 1
d63 2
a64 1
CONFIGURE_ENV=	CFLAGS="" CXXFLAGS=""
@


1.43
log
@enable profilesharing
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.42 2003/05/18 20:41:19 wilfried Exp $
# Uses pthreads
d4 1
d22 11
d44 1
d57 1
d66 1
a66 1
MOB=		${WRKSRC}/dist/bin
d73 5
a77 1
	${INSTALL_DATA_DIR} ${MOZ}
d80 1
a80 1
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
d83 1
a83 1
	@@cd ${MOB} && ${TAR} -chf - *.so.1.0 | \
d85 4
a88 3
	${INSTALL_SCRIPT} ${MOB}/mozilla ${MOB}/run-mozilla.sh ${PREFIX}/bin
	${INSTALL_DATA} ${MOB}/LICENSE ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/regxpcom ${MOB}/mozilla-bin ${MOZ}
@


1.42
log
@be more quiet
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2003/05/18 17:06:05 wilfried Exp $
a46 1
		--disable-profilesharing	\
a47 2
# enable these once Mozilla actually runs
#		--enable-optimize="${CFLAGS}"	\
d62 1
@


1.41
log
@remove useless file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2003/05/18 15:22:45 wilfried Exp $
d60 1
a60 1
	cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
@


1.40
log
@create the data files on install instead
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2003/05/18 05:39:10 wilfried Exp $
d70 1
a70 1
	${INSTALL_SCRIPT} ${MOB}/mozilla ${MOB}/mozilla-config ${MOB}/run-mozilla.sh ${PREFIX}/bin
@


1.39
log
@Install pre-built compreg.dat and xpti.dat files.
This will make mozilla start much faster.
(yeah right, fast and mozilla in the same sentence ...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2003/05/17 16:58:35 wilfried Exp $
d9 1
a9 2
DISTFILES=	mozilla-source-${VER}.tar.bz2 \
		${EXTRA_FILE}:0
a20 1
MASTER_SITES0=	http://w1.402.telia.com/~u40214514/
a57 1
EXTRA_FILE=	mozilla-${VER}-openbsd-p1.tgz
a70 1
	${INSTALL_DATA} ${WRKDIR}/compreg.dat ${WRKDIR}/xpti.dat ${MOZ}/components
d72 1
a72 1
	${INSTALL_PROGRAM} ${MOB}/mozilla-bin ${MOZ}
@


1.38
log
@update to 1.4b
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2003/05/17 16:04:17 wilfried Exp $
d9 2
a10 1
DISTFILES=	mozilla-source-${VER}.tar.bz2
d22 1
d60 1
d74 1
@


1.37
log
@the http site seems more up-to-date than the ftp site
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2003/05/17 15:38:30 wilfried Exp $
d6 1
a6 1
VER=		1.4a
@


1.36
log
@not needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2003/05/17 06:48:41 wilfried Exp $
d20 1
a20 1
MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla/releases/mozilla${VER}/src/
@


1.35
log
@oops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2003/05/17 05:56:22 wilfried Exp $
d52 2
a53 1
CONFIGURE_ENV=	BSD_PTHREAD_LIBS="-pthread" \
a54 3
MAKE_ENV=	LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		CFLAGS="" CXXFLAGS="" \
		MALLOC_OPTIONS=j
@


1.34
log
@switch to native pthreads
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2003/05/17 05:52:25 wilfried Exp $
d23 1
a23 1
MODULES=	gcc3
@


1.33
log
@use autoconf in nsprpub
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2003/05/17 05:15:10 wilfried Exp $
d43 1
a48 2
# does not pass NSPR tests
#		--with-pthreads			\
@


1.32
log
@fix whitespace
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2003/05/17 01:30:32 wilfried Exp $
d61 3
@


1.31
log
@give sparc64 a fighting chance
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2003/05/16 19:11:30 wilfried Exp $
d23 3
a25 3
MODULES=	gcc3                                                                                          
MODGCC3_ARCHES=	sparc64                                                                               
MODGCC3_LANGS=	C++                                                                                           
d46 1
a46 1
		--disable-profilesharing        \
@


1.30
log
@enable crypto
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/05/16 03:56:41 wilfried Exp $
d23 3
@


1.29
log
@runs reasonably well on i386, patches for other archs will be forthcoming
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/05/15 14:35:45 wilfried Exp $
d40 1
a44 2
# disable this for now
#		--enable-crypto			\
@


1.28
log
@fix some depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2003/05/15 00:53:45 wilfried Exp $
a10 2
BROKEN=		More debugging needed

d40 2
a48 1
#		--disable-debug			\
a49 1
#		--disable-tests			\
@


1.27
log
@update package and coerce the scripts to run
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2003/05/14 21:50:59 wilfried Exp $
d24 1
d26 2
a27 2
LIB_DEPENDS=	gtk.1.2,gdk.1.2::x11/gtk+ \
		glib.1.2::devel/glib \
@


1.26
log
@The lizard runs, but a lot of debugging is still needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/04/13 02:40:48 david Exp $
d58 3
d62 10
a71 8
	${INSTALL_DATA_DIR} ${PREFIX}/lib/mozilla
	@@chmod 755 ${PREFIX}/lib/mozilla
	@@cd ${WRKSRC}/dist/bin && ${TAR} -chf - . | \
		${TAR} -xf - -C ${PREFIX}/lib/mozilla
	${INSTALL_SCRIPT} ${WRKSRC}/dist/bin/mozilla ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/dist/bin/mozilla-bin ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/dist/bin/mozilla-config ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/dist/bin/run-mozilla.sh ${PREFIX}/bin
@


1.25
log
@update to the latest mozilla release (1.4a)
add correct dependencies
simplify configure options
ok pvalchev@@

XXX: this port is still marked BROKEN (doesn't run)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/12/29 15:03:57 fgsch Exp $
d11 1
a11 1
BROKEN=		core dumps in dynamic library constructor
d41 1
@


1.24
log
@byebye NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/12/27 12:59:01 naddy Exp $
d4 1
a4 1
COMMENT=	"free version of the Netscape browser"
d6 1
a6 1
VER=		0.9.3
d15 2
d24 7
a30 7
#BUILD_DEPENDS=	zip:archivers/zip
#LIB_DEPENDS=	gtk.1.2::x11/gtk+ \
#		ORBit.2:devel/ORBit \
#		jpeg.9:graphics/jpeg \
#		png.4:graphics/png \
#		mng.1:graphics/libmng \
#		gdk-pixbuf.2:graphics/gdk-pixbuf
d37 13
a49 23
		--disable-cpp-exceptions	\
		--disable-cpp-rtti		\
		--disable-debug			\
		--disable-idltool		\
		--disable-md			\
		--disable-pedantic		\
		--disable-xterm-updates		\
		--enable-crypto			\
		--enable-double-buffer		\
		--enable-editor			\
		--enable-mailnews		\
		--enable-mathml			\
		--enable-optimize="${CFLAGS}"	\
		--enable-pics			\
		--enable-svg			\
		--enable-tests			\
		--enable-toolkit=gtk		\
		--enable-x11-shm		\
		--enable-chrome-format=jar	\
		--with-jpeg=${LOCALBASE}	\
		--with-png=${LOCALBASE}		\
		--with-mng=${LOCALBASE}		\
		--with-pthreads
@


1.23
log
@add PERMIT_* to shut up reports about this
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/10/28 13:05:50 espie Exp $
a13 1
NEED_VERSION=	1.435
@


1.22
log
@Zap default MAINTAINER from Makefile.
Especially now that the default line is more verbose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/08/30 13:43:20 brad Exp $
d15 5
@


1.21
log
@this port uses pthreads as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/08/19 02:30:45 brad Exp $
a14 2

MAINTAINER=	ports@@openbsd.org
@


1.20
log
@- fix typo with BROKEN tag
- remove "gnu" from CONFIGURE_STYLE since it is redundant
- mkdir -> ${INSTALL_DATA_DIR}
- ${CHMOD} -> chmod
- remove FreeBSD-ism, ${PTHREAD_LIBS} -> -pthread
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.19 2001/08/13 14:16:34 drahn Exp $
@


1.19
log
@Update to 0.9.3, still fails to run, but other people can work
on the ld.so problems too.
heavily based on the FreeBSD port.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.18 2001/06/23 04:45:16 fgsch Exp $
#
# From: $NetBSD: Makefile,v 1.13 1998/08/04 13:09:21 fvdl Exp $
#	but modified to use lesstif 0.86.0...
d10 1
a10 1
bROKEN=		core dumps in dynamic library constructor
d13 1
a13 1
NEED_VERSION=	1.402
d30 1
a30 1
CONFIGURE_STYLE=	gnu	autoconf
d56 1
a56 1
CONFIGURE_ENV=	BSD_PTHREAD_LIBS="${PTHREAD_LIBS}" \
d58 1
a58 1
MAKE_ENV=	LD_LIBRARY_PATH=${WRKSRC}/dist/bin \
d61 1
d63 3
a65 3
	mkdir -p ${PREFIX}/lib/mozilla
	${CHMOD} 755 ${PREFIX}/lib/mozilla
	cd ${WRKSRC}/dist/bin && ${TAR} -chf - . | \
@


1.18
log
@previous update was just not enough; try again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/06/22 16:32:51 fgsch Exp $
d8 1
a8 1
VER=		0.9.1
d13 1
a13 1
BROKEN=		core dumps in dynamic library constructor
d22 7
a28 2
LIB_DEPENDS=	IDL.4::devel/ORBit \
		gtk.1.2::x11/gtk+
d34 30
a63 1

d65 8
a72 8
	${INSTALL_PROGRAM} ${WRKSRC}/dist/${MOZ_OBJDIR}/bin/moz-export \
	    ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/dist/${MOZ_OBJDIR}/bin/mozilla-export \
	    ${PREFIX}/bin
	ln -sf ${PREFIX}/bin/moz-export ${PREFIX}/bin/mozilla
	mkdir -p ${MOZ_LIBDIR}
	${INSTALL_DATA} ${WRKSRC}/dist/${MOZ_OBJDIR}/bin/*.so* ${MOZ_LIBDIR}
	${INSTALL_DATA} ${WRKSRC}/dist/${MOZ_OBJDIR}/lib/*.so* ${MOZ_LIBDIR}
@


1.17
log
@Update to 0.9.1 so we can play games with ld; doesn't work yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/05/06 04:22:49 lebel Exp $
d22 2
a23 1
LIB_DEPENDS=	IDL.4::devel/ORBit
a26 1
USE_MOTIF=	any
d31 4
a34 2
	${INSTALL_PROGRAM} ${WRKSRC}/dist/${MOZ_OBJDIR}/bin/moz-export ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/dist/${MOZ_OBJDIR}/bin/mozilla-export ${PREFIX}/bin
@


1.16
log
@www: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/04/18 15:01:23 espie Exp $
d8 1
d10 2
a11 3
M=		17
PKGNAME=	mozilla-$M
DISTFILES=	mozilla-source-M$M.tar.bz2
d20 1
a20 3
MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla/releases/m$M/src/ \
	ftp://sunsite.org.uk/Mirrors/ftp.mozilla.org/pub/mozilla/source/ \
	ftp://mirror.aarnet.edu.au/pub/mozilla/mozilla/source/
@


1.15
log
@Fix USE_MOTIF, especially for those ports with `motif' flavors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/03/13 14:43:12 brad Exp $
d6 2
d16 1
a16 1
NEED_VERSION=	1.400
@


1.14
log
@LIB_DEPENDS -> USE_MOTIF
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/10/22 15:43:40 espie Exp $
d14 1
a14 1
NEED_VERSION=	1.324
d26 1
a26 1
USE_MOTIF=	Yes
@


1.13
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/09/16 16:13:06 espie Exp $
d22 1
a22 2
LIB_DEPENDS=	Xm.1.::x11/lesstif \
		IDL.4::devel/ORBit
d26 1
@


1.12
log
@Recent lizards don't work yet, but this is definitely needed
for static constructors in dynamic libraries to be called.

Mozilla crashes in a dynamic library, btw.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/04/09 17:38:38 espie Exp $
d14 1
a14 1
NEED_VERSION=	 1.324
@


1.11
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/03/24 23:28:37 espie Exp $
d6 6
a11 1
BROKEN=		"extremely old, needs updating"
a12 1
DISTNAME=	mozilla-19980728
d14 1
a14 2
NEED_VERSION=	 1.230
FAKE=No
d18 1
a18 1
MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla/source/ \
d22 2
a23 1
LIB_DEPENDS=	Xm.1.::x11/lesstif
d28 1
a28 17
WRKDIST=	${WRKDIR}/mozilla

RELEASE!=	uname -r
MOZ_OBJDIR=	${OPSYS}${RELEASE}_OPT.OBJ
MOZ_LIBDIR=	${PREFIX}/lib/mozilla

MAKE_ENV+=	NO_SECURITY=1 MOZ_MEDIUM=1 MOZILLA_CLIENT=1 NO_MDUPDATE=1
MAKE_ENV+=	LIBRUNPATH=${MOZ_LIBDIR}
#comment out for debugging
MAKE_ENV+=	BUILD_OPT=1

.if !defined(NO_WARNINGS)
pre-fetch:
	@@echo ""
	@@echo "*** Please see ${FILESDIR}/README for general caveats"
	@@echo ""
.endif
@


1.10
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/03/24 22:13:48 espie Exp $
d11 1
@


1.9
log
@Unwanted change, oops.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/03/05 18:30:45 espie Exp $
d10 1
a10 1
NEED_VERSION=	1.223
d18 1
a18 1
LIB_DEPENDS=	Xm\\.1\\.:x11/lesstif
@


1.8
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d2 3
d6 3
a8 1
DISTNAME=	mozilla-source-M14-no-crypto
a11 1
HOME_PAGE=	http://www.mozilla.org/
d14 3
a16 3
MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla/releases/m14/src/ \
	ftp://sunsite.org.uk/Mirrors/ftp.mozilla.org/pub/mozilla/releases/m14 \
	ftp://mirror.aarnet.edu.au/pub/mozilla/releases/m14/
d18 1
a18 1
#LIB_DEPENDS=	Xm.1.:x11/lesstif
d20 1
a20 1
#USE_X11=	Yes
a24 1
GNU_CONFIGURE=	Yes
d29 2
a30 2
#MAKE_ENV+=	NO_SECURITY=1 MOZ_MEDIUM=1 MOZILLA_CLIENT=1 NO_MDUPDATE=1
#MAKE_ENV+=	LIBRUNPATH=${MOZ_LIBDIR}
d32 1
a32 1
#MAKE_ENV+=	BUILD_OPT=1
@


1.7
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.6 2000/03/01 10:08:08 turan Exp $
#
# From: $NetBSD: Makefile,v 1.13 1998/08/04 13:09:21 fvdl Exp $
#	but modified to use lesstif 0.86.0...
d3 1
a3 3
BROKEN=		"extremely old, needs updating"

DISTNAME=	mozilla-19980728
d7 1
d10 3
a12 3
MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla/source/ \
	ftp://sunsite.org.uk/Mirrors/ftp.mozilla.org/pub/mozilla/source/ \
	ftp://mirror.aarnet.edu.au/pub/mozilla/mozilla/source/
d14 1
a14 1
LIB_DEPENDS=	Xm\\.1\\.:x11/lesstif
d16 1
a16 1
USE_X11=	Yes
d21 1
d26 2
a27 2
MAKE_ENV+=	NO_SECURITY=1 MOZ_MEDIUM=1 MOZILLA_CLIENT=1 NO_MDUPDATE=1
MAKE_ENV+=	LIBRUNPATH=${MOZ_LIBDIR}
d29 1
a29 1
MAKE_ENV+=	BUILD_OPT=1
@


1.6
log
@change maintainer to ports@@openbsd.org as requested
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/02/11 01:10:13 espie Exp $
d10 1
a16 1
NEED_VERSION=	1.191
d18 1
a18 1
LIB_DEPENDS=	Xm\\.1\\.:${PORTSDIR}/x11/lesstif
d20 2
a21 2
USE_X11=	yes
USE_GMAKE=	yes
@


1.5
log
@Kill a large set of deprecated variables.
Thoroughly unsubtle, most mkdir -p should probably be INSTALL* at
*install stage, and echo/ECHO_MSG is somewhat unsorted.

It's quite possible I missed a few automated changes...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/02/11 00:37:39 espie Exp $
d11 1
a11 1
MAINTAINER=	marc@@OpenBSD.org
@


1.4
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/10/05 16:51:31 brad Exp $
d36 3
a38 3
	@@${ECHO} ""
	@@${ECHO} "*** Please see ${FILESDIR}/README for general caveats"
	@@${ECHO} ""
d44 2
a45 2
	${LN} -sf ${PREFIX}/bin/moz-export ${PREFIX}/bin/mozilla
	${MKDIR} ${MOZ_LIBDIR}
@


1.3
log
@mark BROKEN, needs to be upgraded
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1998/12/16 20:17:34 marc Exp $
d16 1
d23 1
a23 1
WRKSRC=		${WRKDIR}/mozilla
@


1.2
log
@guard build instructions with NO_WARNINGS flag
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/08/22 18:38:50 marc Exp $
d5 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d31 1
d36 1
@


1.1.1.1
log
@mozilla-19980728
@
text
@@
