head	1.2;
access;
symbols
	OPENBSD_3_3:1.1.0.8
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.6
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.4
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1;
locks; strict;
comment	@# @;


1.2
date	2003.04.13.02.40.48;	author david;	state dead;
branches;
next	1.1;

1.1
date	2001.08.13.14.16.35;	author drahn;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to the latest mozilla release (1.4a)
add correct dependencies
simplify configure options
ok pvalchev@@

XXX: this port is still marked BROKEN (doesn't run)
@
text
@
$FreeBSD: ports/www/mozilla/files/patch-qt,v 1.11 2001/08/07 11:52:15 sobomax Exp $

--- configure.orig	Wed Jul 25 08:44:09 2001
+++ configure	Sat Aug  4 11:18:33 2001
@@@@ -6528,7 +6528,7 @@@@
     echo "$ac_t""$HOST_MOC" 1>&6
     MOC=$HOST_MOC
 
-    QT_CFLAGS="-I${QTDIR}${QTINCDIR} -DQT_GENUINE_STR"
+    QT_CFLAGS="-I${QTDIR}/include/X11/qt -DQT_GENUINE_STR"
     QT_LIBS="-L/usr/X11R6/lib -L${QTDIR}/lib -lqt -lXext -lX11"
 
     # Check whether --with-static-qt or --without-static-qt was given.
@@@@ -8587,6 +8587,9 @@@@
 os2*)
     LIBS=
     ;;
+freebsd*)
+    CPPFLAGS="${CPPFLAGS} ${X_CFLAGS}"
+    ;;
 esac
 for ac_hdr in sys/byteorder.h compat.h getopt.h
 do
@@@@ -9316,8 +9319,6 @@@@
 	if test $? -eq 0; then
 		if test -z "`egrep -i '(unrecognize|unknown)' conftest.out | grep pthread`" && test -z "`egrep -i '(error|incorrect)' conftest.out`" ; then
 			ac_cv_have_dash_pthread=yes
-			CFLAGS="$CFLAGS -pthread"
-			CXXFLAGS="$CXXFLAGS -pthread"
 		fi
 	fi
 	rm -f conftest*
@@@@ -9351,7 +9352,7 @@@@
 EOF
 
 						if test "$ac_cv_have_dash_pthread" = "yes"; then
-				_PTHREAD_LDFLAGS=""
+				_PTHREAD_LDFLAGS="-pthread"
 			else
 				_PTHREAD_LDFLAGS="-lc_r"
 			fi
@@@@ -13701,6 +13702,7 @@@@
         ;;
     *)
         NSPR_LIBS=`./nsprpub/config/nspr-config --prefix=$MOZ_BUILD_ROOT/dist --exec-prefix=$MOZ_BUILD_ROOT/dist --libs`
+	NSPR_LIBS="$NSPR_LIBS $BSD_PTHREAD_LIBS"
         $PERL -pi.bak -e "s {^NSPR_LIBS\s*=.*} {NSPR_LIBS = $NSPR_LIBS }" config/autoconf.mk
         ;;
     esac
@


1.1
log
@Update to 0.9.3, still fails to run, but other people can work
on the ld.so problems too.
heavily based on the FreeBSD port.
@
text
@@

