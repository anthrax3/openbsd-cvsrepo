head	1.3;
access;
symbols
	OPENBSD_4_1:1.2.0.10
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.8
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.6
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2007.05.25.16.31.39;	author martynas;	state dead;
branches;
next	1.2;

1.2
date	2005.03.13.05.02.16;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.15.19.44.01;	author wilfried;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove unmaintained mozilla port; if you are still using it consider
switching to seamonkey
ok kurt@@ pval@@ espie@@ steven@@ jasper@@ alek@@
@
text
@$OpenBSD: patch-config_rules_mk,v 1.2 2005/03/13 05:02:16 kurt Exp $
--- config/rules.mk.orig	Thu Jun 24 14:58:48 2004
+++ config/rules.mk	Wed Mar  9 16:53:06 2005
@@@@ -666,7 +666,7 @@@@ ifdef SHARED_LIBRARY
 ifdef IS_COMPONENT
 ifdef GRE_MODULE
 ifndef DISABLE_DIST_GRE
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(GRE_DIST)/components
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(GRE_DIST)/components
 	$(ELF_DYNSTR_GC) $(GRE_DIST)/components/$(SHARED_LIBRARY)
 ifdef BEOS_ADDON_WORKAROUND
 	( cd $(GRE_DIST)/components && $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )
@@@@ -676,7 +676,7 @@@@ endif # GRE_MODULE
 ifeq ($(OS_ARCH),OS2)
 	$(INSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(DIST)/lib/components
 else
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/lib/components
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(DIST)/lib/components
 	$(ELF_DYNSTR_GC) $(DIST)/lib/components/$(SHARED_LIBRARY)
 endif
 ifndef _SKIP_OLD_GRE_INSTALL
@@@@ -765,15 +765,15 @@@@ ifndef NO_INSTALL
 ifdef SHARED_LIBRARY
 ifdef IS_COMPONENT
 ifdef MRE_DIST
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)/components
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)/components
 else
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)/components
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)/components
 endif
 else
 ifdef MRE_DIST
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mredir)
 else
-	$(SYSINSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)
+	$(SYSINSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(IMPORT_LIBRARY) $(DESTDIR)$(mozappdir)
 endif
 endif
 endif # SHARED_LIBRARY
@@@@ -1022,7 +1022,6 @@@@ endif # NO_LD_ARCHIVE_FLAGS
 else # os2 vacpp
 	$(MKSHLIB) /O:$@@ /DLL /INC:_dllentry $(LDFLAGS) $(OBJS) $(LOBJS) $(EXTRA_DSO_LDOPTS) $(OS_LIBS) $(EXTRA_LIBS) $(DEF_FILE)
 endif # !os2 vacpp
-	chmod +x $@@
 ifndef NO_COMPONENT_LINK_MAP
 ifndef MOZ_COMPONENTS_VERSION_SCRIPT_LDFLAGS
 ifndef MOZ_DEBUG
@@@@ -1113,6 +1112,14 @@@@ endif
 	$(REPORT_BUILD)
 	@@$(MAKE_DEPS_AUTO)
 	$(ELOG) $(CCC) $(OUTOPTION)$@@ -c $(COMPILE_CXXFLAGS) $(_VPATH_SRCS)
+
+#
+# Temp fix for propolice bug
+#
+nsPresShell.$(OBJ_SUFFIX): nsPresShell.cpp Makefile Makefile.in
+	$(REPORT_BUILD)
+	@@$(MAKE_DEPS_AUTO)
+	$(ELOG) $(CCC) $(OUTOPTION)$@@ -c $(COMPILE_CXXFLAGS) -fno-stack-protector  $(_VPATH_SRCS)
 
 %.$(OBJ_SUFFIX): %.cpp Makefile Makefile.in
 	$(REPORT_BUILD)
@


1.2
log
@Upgrade to 1.7.5

Tested on i386/sparc64/macppc/alpha by myself and/or alek@@
One issue found with sparc64: fetching mail crashes.

okay pval@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@sync port/patches with other mozillas
@
text
@d2 3
a4 3
--- config/rules.mk.orig	2004-02-15 14:41:57.000000000 +0100
+++ config/rules.mk	2004-02-15 15:22:16.000000000 +0100
@@@@ -664,7 +664,7 @@@@ ifdef SHARED_LIBRARY
d13 1
a13 1
@@@@ -674,11 +674,11 @@@@ endif # GRE_MODULE
d22 1
a22 28
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/bin/components
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(DIST)/bin/components
 	$(ELF_DYNSTR_GC) $(DIST)/bin/components/$(SHARED_LIBRARY)
 ifdef BEOS_ADDON_WORKAROUND
 	( cd $(DIST)/bin/components && $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )
@@@@ -687,7 +687,7 @@@@ endif # ! _SKIP_OLD_GRE_INSTALL
 else # ! IS_COMPONENT
 ifdef GRE_MODULE
 ifndef DISABLE_DIST_GRE
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(GRE_DIST)
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(GRE_DIST)
 ifdef BEOS_ADDON_WORKAROUND
 	( cd $(GRE_DIST) && $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )
 endif
@@@@ -696,10 +696,10 @@@@ endif # GRE_MODULE
 ifneq (,$(filter OS2 WINNT,$(OS_ARCH)))
 	$(INSTALL) $(IFLAGS2) $(IMPORT_LIBRARY) $(DIST)/lib
 else
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/lib
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(DIST)/lib
 endif
 ifndef _SKIP_OLD_GRE_INSTALL
-	$(INSTALL) $(IFLAGS2) $(SHARED_LIBRARY) $(DIST)/bin
+	$(INSTALL) $(IFLAGS1) $(SHARED_LIBRARY) $(DIST)/bin
 ifdef BEOS_ADDON_WORKAROUND
 	( cd $(DIST)/bin && $(CC) -nostart -o $(SHARED_LIBRARY).stub $(SHARED_LIBRARY) )
 endif
@@@@ -763,15 +763,15 @@@@ ifndef NO_INSTALL
d42 4
a45 4
@@@@ -1030,7 +1030,6 @@@@ ifdef RESFILE
 	$(RC) $(RCFLAGS) $(RESFILE) $@@
 endif
 endif # OS2
d50 15
@

