head	1.12;
access;
symbols
	OPENBSD_4_1:1.11.0.8
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.6
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.4
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.11.0.2
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.8.0.4
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.2.0.8
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.6
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.1.0.4
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@# @;


1.12
date	2007.05.25.16.31.39;	author martynas;	state dead;
branches;
next	1.11;

1.11
date	2005.04.11.15.03.18;	author kurt;	state Exp;
branches;
next	1.10;

1.10
date	2005.03.13.05.02.16;	author kurt;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2005.01.11.04.26.45;	author kurt;	state Exp;
branches;
next	1.8;

1.8
date	2004.02.15.19.44.01;	author wilfried;	state Exp;
branches;
next	1.7;

1.7
date	2004.01.18.10.49.33;	author wilfried;	state Exp;
branches;
next	1.6;

1.6
date	2003.07.18.20.44.33;	author wilfried;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.22.12.04.49;	author wilfried;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.17.22.15.41;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.14.21.50.59;	author wilfried;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.13.14.16.35;	author drahn;	state Exp;
branches;
next	1.1;

1.1
date	2000.09.16.16.13.06;	author espie;	state Exp;
branches;
next	;

1.10.2.1
date	2005.10.03.13.39.31;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.12
log
@remove unmaintained mozilla port; if you are still using it consider
switching to seamonkey
ok kurt@@ pval@@ espie@@ steven@@ jasper@@ alek@@
@
text
@$OpenBSD: patch-configure_in,v 1.11 2005/04/11 15:03:18 kurt Exp $
--- configure.in.orig	Tue Oct 12 00:13:29 2004
+++ configure.in	Tue Apr  5 14:50:29 2005
@@@@ -1346,10 +1346,14 @@@@ case "$target" in
 	;;
 
 *-openbsd*)
-    DLL_SUFFIX=".so.1.0"
+    DLL_SUFFIX=".so.${SO_VERSION}"
     DSO_CFLAGS=''
     DSO_PIC_CFLAGS='-fPIC'
     DSO_LDOPTS='-shared -fPIC'
+    MKSHLIB='$(CXX) $(DSO_LDOPTS) -o $@@'
+    MKCSHLIB='$(CC) $(DSO_LDOPTS) -o $@@'
+    MKSHLIB_FORCE_ALL=''
+    MKSHLIB_UNFORCE_ALL=''
     if test "$LIBRUNPATH"; then
 	DSO_LDOPTS="-R$LIBRUNPATH $DSO_LDOPTS"
     fi
@@@@ -3100,7 +3104,7 @@@@ _SAVE_LIBS=$LIBS
 CFLAGS="$ZLIB_CFLAGS $CFLAGS"
 LDFLAGS="$ZLIB_LIBS -lz $LDFLAGS"
 if test -n "${PNG_DIR}"; then
-    CFLAGS="-I${PNG_DIR}/include $CFLAGS"
+    CFLAGS="-I${PNG_DIR}/include/libpng $CFLAGS"
     LDFLAGS="-L${PNG_DIR}/lib $LDFLAGS"
 fi
 if test -z "$PNG_DIR" -o "$PNG_DIR" = no; then
@@@@ -3130,7 +3134,7 @@@@ LDFLAGS=$_SAVE_LDFLAGS
 LIBS=$_SAVE_LIBS
 
 if test "${PNG_DIR}" -a -d "${PNG_DIR}" -a "$SYSTEM_PNG" = 1; then
-    PNG_CFLAGS="-I${PNG_DIR}/include"
+    PNG_CFLAGS="-I${PNG_DIR}/include/libpng"
     PNG_LIBS="-L${PNG_DIR}/lib ${PNG_LIBS}"
 fi
 
@


1.11
log
@- bump major shlib version
- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype & esd
- move INSTALL/DEINSTALL code to PLIST
- Add MESSAGE regarding profiles

okay wilfried@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.10 2005/03/13 05:02:16 kurt Exp $
@


1.10
log
@Upgrade to 1.7.5

Tested on i386/sparc64/macppc/alpha by myself and/or alek@@
One issue found with sparc64: fetching mail crashes.

okay pval@@
@
text
@d1 9
a9 4
$OpenBSD$
--- configure.in.orig	Tue Jan 11 22:59:51 2005
+++ configure.in	Tue Jan 11 23:02:47 2005
@@@@ -1350,6 +1350,10 @@@@ case "$target" in
@


1.10.2.1
log
@update to Mozilla 1.7.12, fixes several security vulnerabilities

ok brad@@
@
text
@d1 4
a4 9
$OpenBSD: patch-configure_in,v 1.11 2005/04/11 15:03:18 kurt Exp $
--- configure.in.orig	Tue Oct 12 00:13:29 2004
+++ configure.in	Tue Apr  5 14:50:29 2005
@@@@ -1346,10 +1346,14 @@@@ case "$target" in
 	;;
 
 *-openbsd*)
-    DLL_SUFFIX=".so.1.0"
+    DLL_SUFFIX=".so.${SO_VERSION}"
@


1.9
log
@- add gtk2 flavor
- fix system png include path
- change !gtk2 IDL lib to BUILD_DEPEND
- bump package name
- always use own nspr

with help and ok from wilfried@@
@
text
@d1 4
a4 5
$OpenBSD: patch-configure_in,v 1.8 2004/02/15 19:44:01 wilfried Exp $
--- configure.in.orig	Thu Dec 11 18:30:36 2003
+++ configure.in	Thu Jan  6 11:08:01 2005
@@@@ -1286,12 +1286,11 @@@@ case "$target" in
     DLL_SUFFIX=".so.1.0"
d7 1
a7 7
-    DSO_LDOPTS='-shared -h $@@'
-    MKSHLIB='$(LD) $(DSO_LDOPTS) -o $@@'
-    MKCSHLIB='$(LD) $(DSO_LDOPTS) -o $@@'
-    if $CC -E - -dM </dev/null | grep -v __ELF__ >/dev/null; then
-	DSO_LDOPTS="-Bshareable /usr/lib/c++rt0.o"
-    fi
+    DSO_LDOPTS='-shared -fPIC'
d15 1
a15 13
@@@@ -2159,9 +2158,8 @@@@ then
 			AC_DEFINE(_THREAD_SAFE)
 			dnl -pthread links in -lc_r, so don't specify it explicitly.
 			if test "$ac_cv_have_dash_pthread" = "yes"; then
-				_PTHREAD_LDFLAGS=""
-			else
-				_PTHREAD_LDFLAGS="-lc_r"
+				_PTHREAD_LDFLAGS="-pthread"
+                LDFLAGS="${_PTHREAD_LDFLAGS} ${LDFLAGS}"
 			fi
 			;;
 
@@@@ -3038,7 +3036,7 @@@@ _SAVE_LIBS=$LIBS
d24 1
a24 1
@@@@ -3068,7 +3066,7 @@@@ LDFLAGS=$_SAVE_LDFLAGS
@


1.8
log
@sync port/patches with other mozillas
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.7 2004/01/18 10:49:33 wilfried Exp $
--- configure.in.orig	2003-12-03 00:19:34.000000000 +0100
+++ configure.in	2003-12-12 15:43:28.000000000 +0100
d33 18
@


1.7
log
@sync patches
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.6 2003/07/18 20:44:33 wilfried Exp $
d15 1
a15 1
+    MKSHLIB='$(CC) $(DSO_LDOPTS) -o $@@'
@


1.6
log
@sync w/update-patches
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.5 2003/05/22 12:04:49 wilfried Exp $
--- configure.in.orig	Mon Jun 16 21:15:23 2003
+++ configure.in	Fri Jul 18 19:26:35 2003
@@@@ -1208,12 +1208,11 @@@@ case "$target" in
d22 1
a22 1
@@@@ -2089,9 +2088,8 @@@@ then
@


1.5
log
@sync w/update-patches
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.4 2003/05/17 22:15:41 wilfried Exp $
--- configure.in.orig	Sat May  3 00:06:30 2003
+++ configure.in	Thu May 22 13:17:40 2003
d22 1
a22 1
@@@@ -2087,9 +2086,8 @@@@ then
@


1.4
log
@use -fPIC together with -shared
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.3 2003/05/14 21:50:59 wilfried Exp $
--- configure.in.orig	Sat May 10 20:39:08 2003
+++ configure.in	Mon May 12 09:40:07 2003
@@@@ -1208,12 +1208,11 @@@@
d22 1
a22 1
@@@@ -2087,9 +2086,8 @@@@
@


1.3
log
@The lizard runs, but a lot of debugging is still needed.
@
text
@d1 1
a1 1
$OpenBSD$
d4 1
a4 1
@@@@ -1208,12 +1208,11 @@@@ case "$target" in
d14 1
a14 1
+    DSO_LDOPTS='-shared'
d22 12
@


1.2
log
@Update to 0.9.3, still fails to run, but other people can work
on the ld.so problems too.
heavily based on the FreeBSD port.
@
text
@d1 4
a4 3
--- configure.in.orig	Tue Jul 24 18:29:54 2001
+++ configure.in	Fri Aug 10 23:31:00 2001
@@@@ -842,12 +842,11 @@@@
@


1.1
log
@Recent lizards don't work yet, but this is definitely needed
for static constructors in dynamic libraries to be called.

Mozilla crashes in a dynamic library, btw.
@
text
@d1 3
a3 5
$OpenBSD$
--- configure.in.orig	Sat Sep 16 01:30:59 2000
+++ configure.in	Sat Sep 16 01:40:29 2000
@@@@ -738,16 +738,12 @@@@ case "$target" in
 *-openbsd*)
d6 1
a6 1
-    DSO_PIC_CFLAGS='-fPIC'
a12 6
-    if test "$LIBRUNPATH"; then
-	DSO_LDOPTS="-R$LIBRUNPATH $DSO_LDOPTS"
-    fi
+    CFLAGS="$CFLAGS -Dunix"
+    CXXFLAGS="$CXXFLAGS -Dunix"
+    DSO_PIC_CFLAGS='-fPIC -DPIC'
d14 7
a20 5
+    MKSHLIB='$(CXX) $(CXXFLAGS) $(DSO_LDOPTS) -o $@@'
+    MKCSHLIB='$(CC) $(CFLAGS) $(DSO_LDOPTS) -o $@@'
     ;;
 
 *-openvms*) 
@

