head	1.3;
access;
symbols
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2007.05.25.16.31.39;	author martynas;	state dead;
branches;
next	1.2;

1.2
date	2005.10.14.04.00.38;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.11.15.03.18;	author kurt;	state Exp;
branches
	1.1.4.1;
next	;

1.1.4.1
date	2005.10.03.13.39.31;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove unmaintained mozilla port; if you are still using it consider
switching to seamonkey
ok kurt@@ pval@@ espie@@ steven@@ jasper@@ alek@@
@
text
@$OpenBSD: patch-gfx_src_gtk_nsDeviceContextSpecG_cpp,v 1.2 2005/10/14 04:00:38 kurt Exp $
--- gfx/src/gtk/nsDeviceContextSpecG.cpp.orig	Thu Feb 17 16:25:16 2005
+++ gfx/src/gtk/nsDeviceContextSpecG.cpp	Mon Sep 26 17:14:17 2005
@@@@ -1133,7 +1133,7 @@@@ nsresult GlobalPrinters::InitializeGloba
       free(printerList);
     } else {
       /* Try to use CUPS */
-      PRLibrary *clib = PR_LoadLibrary("libcups.so.2");
+      PRLibrary *clib = PR_LoadLibrary("libcups.so");
       if (clib) {
         CupsGetDestsType  CupsGetDests;
         CupsGetDestType   CupsGetDest;
@


1.2
log
@remove 'don't close dlopened objects' type ld.so work-arounds
@
text
@d1 1
a1 1
$OpenBSD: patch-gfx_src_gtk_nsDeviceContextSpecG_cpp,v 1.1 2005/04/11 15:03:18 kurt Exp $
@


1.1
log
@- bump major shlib version
- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype & esd
- move INSTALL/DEINSTALL code to PLIST
- Add MESSAGE regarding profiles

okay wilfried@@
@
text
@d1 4
a4 13
$OpenBSD$
--- gfx/src/gtk/nsDeviceContextSpecG.cpp.orig	Thu Feb 17 16:24:34 2005
+++ gfx/src/gtk/nsDeviceContextSpecG.cpp	Mon Apr  4 12:56:30 2005
@@@@ -68,6 +68,8 @@@@
 
 #include "prlink.h"
 
+static PRLibrary *clib = nsnull;
+
 typedef struct				/**** Printer Options ****/
 {
   char		*name;			/* Name of option */
@@@@ -1133,7 +1135,8 @@@@ nsresult GlobalPrinters::InitializeGloba
d9 1
a9 2
+      if (clib == nsnull)
+        clib = PR_LoadLibrary("libcups.so");
a12 8
@@@@ -1178,7 +1181,6 @@@@ nsresult GlobalPrinters::InitializeGloba
             (*CupsFreeDests)(num_dests, dests);
           }
         }
-        PR_UnloadLibrary(clib);
       }
     }
 
@


1.1.4.1
log
@update to Mozilla 1.7.12, fixes several security vulnerabilities

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gfx_src_gtk_nsDeviceContextSpecG_cpp,v 1.1 2005/04/11 15:03:18 kurt Exp $
@

