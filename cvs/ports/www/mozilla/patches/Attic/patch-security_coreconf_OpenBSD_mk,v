head	1.12;
access;
symbols
	OPENBSD_4_1:1.11.0.2
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.10.0.6
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.4
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.2
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.9.0.6
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.9.0.4
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5;
locks; strict;
comment	@# @;


1.12
date	2007.05.25.16.31.39;	author martynas;	state dead;
branches;
next	1.11;

1.11
date	2006.11.17.19.33.19;	author kurt;	state Exp;
branches;
next	1.10;

1.10
date	2005.04.11.15.03.18;	author kurt;	state Exp;
branches;
next	1.9;

1.9
date	2004.03.02.08.34.57;	author pvalchev;	state Exp;
branches
	1.9.6.1;
next	1.8;

1.8
date	2004.02.15.19.44.01;	author wilfried;	state Exp;
branches;
next	1.7;

1.7
date	2004.01.18.10.49.33;	author wilfried;	state Exp;
branches;
next	1.6;

1.6
date	2003.12.04.15.01.38;	author wilfried;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.22.12.04.49;	author wilfried;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.18.06.03.10;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.18.05.53.31;	author wilfried;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.17.06.36.31;	author wilfried;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.17.05.56.23;	author wilfried;	state Exp;
branches;
next	;

1.9.6.1
date	2005.10.03.13.39.31;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.12
log
@remove unmaintained mozilla port; if you are still using it consider
switching to seamonkey
ok kurt@@ pval@@ espie@@ steven@@ jasper@@ alek@@
@
text
@$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.11 2006/11/17 19:33:19 kurt Exp $
--- security/coreconf/OpenBSD.mk.orig	Tue Sep 16 16:50:50 2003
+++ security/coreconf/OpenBSD.mk	Tue Nov  7 11:55:14 2006
@@@@ -35,12 +35,12 @@@@
 
 include $(CORE_DEPTH)/coreconf/UNIX.mk
 
-DEFAULT_COMPILER	= gcc
-CC			= gcc
-CCC			= g++
+DEFAULT_COMPILER	= ${CC}
+#CC			= ${CC}
+CCC			= ${CXX}
 RANLIB			= ranlib
 
-CPU_ARCH		:= $(shell uname -p)
+CPU_ARCH		:= $(shell arch -s)
 ifeq ($(CPU_ARCH),i386)
 OS_REL_CFLAGS		= -Di386
 CPU_ARCH		= x86
@@@@ -53,7 +53,7 @@@@ OS_LIBS			+= -pthread
 DSO_LDOPTS		+= -pthread
 endif
 
-DLL_SUFFIX		= so.1.0
+DLL_SUFFIX		= so.${SO_VERSION}
 
 OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) -ansi -Wall -pipe -DOPENBSD
 
@@@@ -62,8 +62,9 @@@@ OS_LIBS			= 
 ARCH			= openbsd
 
 DSO_CFLAGS		= -fPIC -DPIC
-DSO_LDOPTS		= -shared -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
+DSO_LDOPTS		= -shared -fPIC -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
 DSO_LDFLAGS		=
 
 MKSHLIB			= $(CC) $(DSO_LDOPTS)
 
+NSPR_LIBS		= $(shell pkg-config --libs nspr)
@


1.11
log
@use devel/nspr instead of internal nspr. now using libc strtod and __dtoa
via devel/nspr.
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.10 2005/04/11 15:03:18 kurt Exp $
@


1.10
log
@- bump major shlib version
- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype & esd
- move INSTALL/DEINSTALL code to PLIST
- Add MESSAGE regarding profiles

okay wilfried@@
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.9 2004/03/02 08:34:57 pvalchev Exp $
d3 1
a3 1
+++ security/coreconf/OpenBSD.mk	Tue Apr  5 19:44:03 2005
d30 1
a30 1
@@@@ -62,7 +62,7 @@@@ OS_LIBS			= 
d39 2
@


1.9
log
@rest of amd64, cvs is piece of shit
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.8 2004/02/15 19:44:01 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	2003-09-16 14:50:50.000000000 -0600
+++ security/coreconf/OpenBSD.mk	2004-03-01 17:45:03.000000000 -0700
d21 9
@


1.9.6.1
log
@update to Mozilla 1.7.12, fixes several security vulnerabilities

ok brad@@
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.10 2005/04/11 15:03:18 kurt Exp $
--- security/coreconf/OpenBSD.mk.orig	Tue Sep 16 16:50:50 2003
+++ security/coreconf/OpenBSD.mk	Tue Apr  5 19:44:03 2005
a20 9
@@@@ -53,7 +53,7 @@@@ OS_LIBS			+= -pthread
 DSO_LDOPTS		+= -pthread
 endif
 
-DLL_SUFFIX		= so.1.0
+DLL_SUFFIX		= so.${SO_VERSION}
 
 OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) -ansi -Wall -pipe -DOPENBSD
 
@


1.8
log
@sync port/patches with other mozillas
@
text
@d1 4
a4 4
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.7 2004/01/18 10:49:33 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	2003-09-16 22:50:50.000000000 +0200
+++ security/coreconf/OpenBSD.mk	2004-02-10 13:53:56.000000000 +0100
@@@@ -35,9 +35,9 @@@@
d16 5
a20 1
 CPU_ARCH		:= $(shell uname -p)
@


1.7
log
@sync patches
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.6 2003/12/04 15:01:38 wilfried Exp $
d3 14
a16 1
+++ security/coreconf/OpenBSD.mk	2003-12-12 15:43:28.000000000 +0100
@


1.6
log
@update mozilla to 1.6a
@
text
@d1 3
a3 3
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.5 2003/05/22 12:04:49 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	2003-09-16 22:52:43.000000000 +0200
+++ security/coreconf/OpenBSD.mk	2003-11-17 14:04:58.000000000 +0100
@


1.5
log
@sync w/update-patches
@
text
@d1 4
a4 18
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.4 2003/05/18 06:03:10 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	Sat May 18 05:24:14 2002
+++ security/coreconf/OpenBSD.mk	Thu May 22 13:17:40 2003
@@@@ -46,6 +46,13 @@@@ OS_REL_CFLAGS		= -Di386
 CPU_ARCH		= x86
 endif
 
+ifndef CLASSIC_NSPR
+USE_PTHREADS		= 1
+DEFINES			+= -D_THREAD_SAFE -pthread
+OS_LIBS			+= -pthread
+DSO_LDOPTS		+= -pthread
+endif
+
 DLL_SUFFIX		= so.1.0
 
 OS_CFLAGS		= $(DSO_CFLAGS) $(OS_REL_CFLAGS) -ansi -Wall -pipe -DOPENBSD
@@@@ -55,7 +62,7 @@@@ OS_LIBS			= 
@


1.4
log
@where the fuck did the spaces come from
@
text
@d1 4
a4 4
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.3 2003/05/18 05:53:31 wilfried Exp $
--- security/coreconf/OpenBSD.mk.orig	Fri May 17 21:24:14 2002
+++ security/coreconf/OpenBSD.mk	Fri May 16 22:41:19 2003
@@@@ -46,6 +46,13 @@@@
d18 1
a18 1
@@@@ -55,7 +62,7 @@@@
@


1.3
log
@use -fPIC together with -shared
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.2 2003/05/17 06:36:31 wilfried Exp $
d19 1
a19 1
 ARCH                   = openbsd
d21 4
a24 4
 DSO_CFLAGS             = -fPIC -DPIC
-DSO_LDOPTS             = -shared -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
+DSO_LDOPTS             = -shared -fPIC -Wl,-soname,lib$(LIBRARY_NAME)$(LIBRARY_VERSION).$(DLL_SUFFIX)
 DSO_LDFLAGS            =
d26 1
a26 1
 MKSHLIB                        = $(CC) $(DSO_LDOPTS)
@


1.2
log
@more pthread ...
@
text
@d1 1
a1 1
$OpenBSD: patch-security_coreconf_OpenBSD_mk,v 1.1 2003/05/17 05:56:23 wilfried Exp $
d18 9
@


1.1
log
@switch to native pthreads
@
text
@d1 1
a1 1
$OpenBSD$
d10 1
a10 1
+DEFINES			+= -D_THREAD_SAFE
@

