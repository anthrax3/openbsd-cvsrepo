head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.10
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.6
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.8
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.4
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.2
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	jolan_20060921:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2014.04.10.06.13.04;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2012.02.22.13.22.00;	author dcoppa;	state dead;
branches;
next	1.4;

1.4
date	2011.12.19.21.23.24;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.03.15.02.11;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.20.04.06.41;	author jolan;	state dead;
branches;
next	1.1;

1.1
date	2006.09.21.15.48.10;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.09.21.15.48.10;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Back port updated FFmpeg backend for Gnash to bring in some
bug fixes and deal with newer FFmpeg.

ok ajacoutot@@
@
text
@$OpenBSD$
--- configure.ac.orig	Mon Apr  7 06:49:03 2014
+++ configure.ac	Mon Apr  7 06:52:19 2014
@@@@ -3497,6 +3497,23 @@@@ if test x"${build_media_ffmpeg}" = x"yes"; then
     DEB_INSTALL([libswscale-dev])
     PKG_ALTERNATIVE(or reconfigure with --enable-media=gst)
   fi
+
+  if test x"${have_ffmpeg_libavutil}" = "xno"; then
+    PKG_ERR([No libavutil development package installed!])
+    PKG_SUGGEST([You can install libavutil from http://ffmpeg.org])
+    DEB_INSTALL([libavutil-dev])
+    PKG_ALTERNATIVE(or reconfigure with --enable-media=gst)
+  fi
+
+  if test x"${ffmpeg_aac_float_planar}" = "xyes" -a \
+    x"${have_ffmpeg_swresample}" = "xno" -a \
+    x"${have_libav_avresample}" = "xno"; then
+      PKG_REC([Please install libswresample/libavresample development package. If you don't, Gnash will be unable to resample some formats (e.g. AAC on youtube)])
+      PKG_SUGGEST([You can install libavresample from http://libav.org])
+      PKG_SUGGEST([You can install libswresample from http://ffmpeg.org])
+      DEB_INSTALL([libavresample-dev])
+      PKG_ALTERNATIVE(or reconfigure with --enable-media=gst)
+  fi
 fi
 
 if test x$build_cairo = xyes; then
@


1.5
log
@Bugfixing update to gnash-0.8.10

from brad
@
text
@d1 24
a24 35
$OpenBSD: patch-configure_ac,v 1.4 2011/12/19 21:23:24 sthen Exp $
--- configure.ac.orig	Fri Mar 18 09:49:55 2011
+++ configure.ac	Thu Dec 15 05:05:30 2011
@@@@ -191,7 +191,6 @@@@ case "${host}" in
 esac
 
 
-AM_CONDITIONAL(PLUGIN_LINK_UNDEFINED, test x$openbsd_os = xopenbsd)
 AM_CONDITIONAL(WIN32, test x$windows = xyes)
 AM_CONDITIONAL(HAIKU, test x$haiku = xyes)
 AM_CONDITIONAL(AMIGAOS4, test x$amigaos4 = xyes)
@@@@ -636,7 +635,7 @@@@ AC_ARG_ENABLE(gui,
   [ dnl Run the following code if no --enable-gui is given
   build_fb=auto
   build_sdl=auto
-  if test x"${openbsd_os}" = x"openbsd"; then
+  if test x"${openbsd}" = xyes; then
     build_gtk=yes
     build_dump=auto
   else if test x"${haiku}" = xyes; then
@@@@ -1936,11 +1935,7 @@@@ AC_CHECK_HEADERS(signal.h)
 AC_CHECK_HEADERS(unistd.h)
 AC_CHECK_HEADERS(sys/time.h)
 AC_CHECK_HEADERS(ieeefp.h)
-dnl libcurl3-dev on Ubuntu has a dependency on lber, and Gnash won't link
-dnl on most machines without it. While it isn't diretly used by Gnash at all,
-dnl it's to work around an Ubuntu packaging bug.
-AC_CHECK_LIB(lber, ber_free)
-AC_CHECK_LIB(bz2, BZ2_bzopen)
+AC_CHECK_LIB(bz2, BZ2_bzopen, [AC_SUBST(BZ2_LIBS, -lbz2)])
 AC_CHECK_LIB(c, getpwnam, AC_DEFINE(HAVE_GETPWNAM, 1, [Has getpwnam] ))
 
 dnl X11 is needed for fltk (at least),
@@@@ -2129,6 +2124,7 @@@@ if test "x$ac_cv_long_timezone" = "xyes" ; then
   AC_DEFINE(HAVE_LONG_TIMEZONE, [1], [extern timezone is a long integer, not a function])
d27 1
a27 17
+AC_CHECK_FUNCS(mkstemps)
 AC_CHECK_FUNCS(sysconf)
 AC_CHECK_FUNCS(shmget shmat shmdt mmap)
 AC_CHECK_FUNCS(memmove)
@@@@ -2147,11 +2143,7 @@@@ AC_SUBST(WINDRES)
 
 GNASH_PKG_FIND(z, [zlib.h], [zlib compression library], compress)
 GNASH_PKG_FIND(jpeg, [jpeglib.h], [jpeg images], jpeg_mem_init)
-if test x"${openbsd_os}" = x"yes"; then
-  GNASH_PKG_FIND(libpng, [png.h], [png images], png_info_init)
-else
-  GNASH_PKG_FIND(png, [png.h], [png images], png_info_init)
-fi
+GNASH_PKG_FIND(png, [png.h], [png images], png_info_init)
 GNASH_PKG_FIND(gif, [gif_lib.h], [gif images], DGifOpen)
 if test x"${GIF_LIBS}" = x ; then
  GNASH_PKG_FIND(ungif, [gif_lib.h], [gif images], DGifOpen)
@


1.4
log
@Actually check for and use mkstemps() rather than use a broken check
for glibc version and some hand-rolled alternative. From Brad.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.3 2011/04/03 15:02:11 dcoppa Exp $
@


1.3
log
@Some fixes backported from upstream:

- Remove dependency on bzip2.
- Remove some OpenBSD build hacks which have been broken for quite
  awhile and are not necessary anyway.
- Update FFmpeg macro for newer versions.

From Brad.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ configure.ac	Fri Apr  1 21:34:04 2011
d34 9
a42 1
@@@@ -2147,11 +2142,7 @@@@ AC_SUBST(WINDRES)
@


1.2
log
@update to 0.7.2, from maintainer
@
text
@d1 5
a5 6
$OpenBSD: patch-configure_ac,v 1.1 2006/09/21 15:48:10 jolan Exp $
--- configure.ac.orig	Tue Sep 19 08:39:04 2006
+++ configure.ac	Wed Sep 20 15:54:37 2006
@@@@ -456,7 +456,7 @@@@ if test x"$pthreads" = x"yes"; then
 	fi
 fi
a6 2
-AX_GCC_ARCHFLAG(no)
+#AX_GCC_ARCHFLAG(no)
d8 39
a46 2
 dnl enable more warnings. These should be cleaned up to make Gnash a
 dnl better project, but for now they generate too many messages,
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@gnash-20060919, flash player with firefox browser plugin, from deanna
phillips with some tweaks by me.  not really usable imho, but getting
there
@
text
@@
