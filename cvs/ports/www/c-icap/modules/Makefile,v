head	1.15;
access;
symbols
	OPENBSD_6_1:1.14.0.2
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.11.0.2
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	sthen_20130416:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.15
date	2017.07.04.11.06.38;	author sthen;	state Exp;
branches;
next	1.14;
commitid	Ej2W801DlYAkAa42;

1.14
date	2016.11.04.10.26.18;	author sthen;	state Exp;
branches;
next	1.13;
commitid	3HFBrosvEEMOPMOJ;

1.13
date	2016.10.11.13.26.45;	author sthen;	state Exp;
branches;
next	1.12;
commitid	RkayFcUjS8KaIf1c;

1.12
date	2016.09.12.17.51.07;	author naddy;	state Exp;
branches;
next	1.11;
commitid	unrzt8OtHTH3JdtT;

1.11
date	2016.04.22.20.08.04;	author sthen;	state Exp;
branches;
next	1.10;
commitid	Z1TGoNFldpAnLXPM;

1.10
date	2015.11.25.14.24.12;	author sthen;	state Exp;
branches;
next	1.9;
commitid	xSNIOlfYKi998U9G;

1.9
date	2015.09.09.13.19.37;	author sthen;	state Exp;
branches;
next	1.8;
commitid	bZJOMQs7XdlCemlk;

1.8
date	2015.09.08.18.17.49;	author sthen;	state Exp;
branches;
next	1.7;
commitid	LfRpUencQ928UEWC;

1.7
date	2015.08.12.22.27.31;	author sthen;	state Exp;
branches;
next	1.6;
commitid	SHEFBfUb4YY8KIkG;

1.6
date	2014.11.05.12.16.21;	author sthen;	state Exp;
branches;
next	1.5;
commitid	hcpuA3bEKh7PPsgq;

1.5
date	2014.05.12.12.45.53;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2014.01.10.20.18.08;	author sthen;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2013.11.05.15.05.04;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2013.10.01.15.53.36;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.16.09.59.35;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.16.09.59.35;	author sthen;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2013.10.22.09.02.51;	author sthen;	state Exp;
branches;
next	;

1.4.2.1
date	2014.05.12.12.10.58;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.15
log
@update to c-icap-modules 0.4.5
@
text
@# $OpenBSD: Makefile,v 1.14 2016/11/04 10:26:18 sthen Exp $

MULTI_PACKAGES=	-main -urlcheck
COMMENT-main=	libclamav-based virus scanner for c-icap
COMMENT-urlcheck= basic URL filtering service for c-icap

V=		0.4.5
DISTNAME=	c_icap_modules-$V
PKGNAME-main=	c-icap-clamav-$V
PKGNAME-urlcheck= c-icap-urlcheck-$V

CONFIGURE_STYLE= gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include/db4 -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	--with-c-icap=${LOCALBASE}

FAKE_FLAGS=	CONFIGDIR=${PREFIX}/share/examples/c-icap

.for i in ${MULTI_PACKAGES}
RUN_DEPENDS$i = www/c-icap/c-icap>=0.4.1
.endfor

cWANTLIB=	bz2 crypto pthread ssl z

LIB_DEPENDS-main=	security/clamav
WANTLIB-main=		${cWANTLIB}
WANTLIB-main+=		clamav crypto iconv ltdl lzma m pcre2-8 pthread ssl \
			xml2 z

LIB_DEPENDS-urlcheck=	archivers/bzip2 \
			databases/db/v4 \
			devel/pcre \
			www/c-icap/c-icap
WANTLIB-urlcheck=	c db icapapi pcre ${cWANTLIB}

pre-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/c-icap/

post-install:
	rm ${PREFIX}/lib/c_icap/*.la
	rm ${PREFIX}/share/examples/c-icap/*.conf.default

.include <bsd.port.mk>
@


1.14
log
@regen WANTLIB following clamav move to pcre2, reminded by ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/10/11 13:26:45 sthen Exp $
d7 1
a7 1
V=		0.4.4
a9 1
REVISION-main=	0
d23 1
a23 1
cWANTLIB=	bz2 pthread z
@


1.13
log
@update to c-icap 0.4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/09/12 17:51:07 naddy Exp $
d10 1
d28 2
a29 2
WANTLIB-main+=		clamav crypto iconv ltdl lzma m pcre pthread ssl \
			stdc++ xml2 z
@


1.12
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/04/22 20:08:04 sthen Exp $
d7 1
a7 1
V=		0.4.3
@


1.11
log
@update to c-icap 0.4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/11/25 14:24:12 sthen Exp $
a22 2
MODULES=	converters/libiconv

d26 3
a28 2
WANTLIB-main=		${cWANTLIB} ${WANTLIB}
WANTLIB-main+=		clamav crypto ltdl lzma m pcre pthread ssl stdc++ xml2 z
@


1.10
log
@update to c-icap-modules 0.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/09/09 13:19:37 sthen Exp $
d7 1
a7 1
V=		0.4.2
@


1.9
log
@missing lib dep on www/c-icap/c-icap, thanks aja@@ for the report.
didn't package -> no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/09/08 18:17:49 sthen Exp $
d7 1
a7 1
V=		0.4.1
d29 1
a29 1
WANTLIB-main+=		clamav crypto ltdl lzma m pthread ssl stdc++ xml2 z
@


1.8
log
@update to c_icap-0.4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/08/12 22:27:31 sthen Exp $
d33 2
a34 1
			devel/pcre
@


1.7
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/11/05 12:16:21 sthen Exp $
d7 1
a7 1
V=		0.3.2
a11 2
REVISION-main=	2

d20 1
a20 1
RUN_DEPENDS$i = www/c-icap/c-icap>=0.3.2
d33 2
a34 2
			www/c-icap/c-icap>=0.3.2
WANTLIB-urlcheck=	c db icapapi ${cWANTLIB}
@


1.6
log
@sync WANTLIB, ssl/crypto and xml2/lzma come from clamav
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/05/12 12:45:53 jasper Exp $
d12 1
a12 1
REVISION-main=	1
d30 2
a31 1
WANTLIB-main=		clamav crypto ltdl lzma m pthread ssl xml2 z ${cWANTLIB} ${WANTLIB}
@


1.5
log
@ensure the REVISION for these packages are not smaller than what's currently
in 5.5-stable, to prevent upgrading issues when 5.6 comes around.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/01/10 20:18:08 sthen Exp $
d12 1
a12 1
REVISION-main=	0
d30 1
a30 1
WANTLIB-main=		clamav ltdl m pthread z ${cWANTLIB} ${WANTLIB}
@


1.4
log
@update to c-icap 0.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/11/05 15:05:04 sthen Exp $
d11 2
@


1.4.2.1
log
@bump after clamav update which had a major lib bump

discussed with/ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/01/10 20:18:08 sthen Exp $
a10 2

REVISION-main=	0
@


1.3
log
@update to c-icap 0.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/10/01 15:53:36 sthen Exp $
d7 1
a7 1
V=		0.3.1
d20 1
a20 1
RUN_DEPENDS$i = www/c-icap/c-icap>=0.3.1
d32 1
a32 1
			www/c-icap/c-icap>=0.3.1
@


1.2
log
@update to c-icap-modules 0.2.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/04/16 09:59:35 sthen Exp $
d7 1
a7 1
V=		0.2.5
d20 1
a20 1
RUN_DEPENDS$i = www/c-icap/c-icap
d25 1
a25 1
WANTLIB=	pthread z
d28 1
a28 1
WANTLIB-main=		bz2 clamav ltdl m pthread z ${WANTLIB}
d30 4
a33 3
LIB_DEPENDS-urlcheck=	databases/db/v4 \
			www/c-icap/c-icap
WANTLIB-urlcheck=	c db icapapi pthread z
d40 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
V=		0.2.4
@


1.1.1.1
log
@import c-icap, ok benoit@@

c-icap is an implementation of an ICAP server. It can be used with HTTP
proxies that support the ICAP protocol to implement content adaptation
and filtering services. Squid 3.x and most commercial HTTP proxies
support the ICAP protocol.
@
text
@@


1.1.1.1.2.1
log
@bump REVISION for libclamav users due to abi change in clamav update, to help
stable package builders.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/04/16 09:59:35 sthen Exp $
a7 1
REVISION-main=	0
@

