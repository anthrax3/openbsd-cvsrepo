head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.07.04.11.06.27;	author sthen;	state Exp;
branches;
next	;
commitid	C914SsghvlYl7qFZ;


desc
@@


1.1
log
@update to c-icap 0.5.2
@
text
@$OpenBSD$

Index: openssl/net_io_ssl.c
--- openssl/net_io_ssl.c.orig
+++ openssl/net_io_ssl.c
@@@@ -731,7 +731,7 @@@@ int ci_tls_connect_nonblock(ci_connection_t *connectio
         /*SSL_new increases the reference count for ctx*/
         ssl = SSL_new(ctx);
 
-#if defined(OPENSSL_VERSION_NUMBER) && OPENSSL_VERSION_NUMBER >= 0x1000201fL
+#if defined(OPENSSL_VERSION_NUMBER) && OPENSSL_VERSION_NUMBER >= 0x1000201fL && !defined(LIBRESSL_VERSION_NUMBER)
         if (SSL_CTX_get_verify_mode(ctx) & SSL_VERIFY_PEER) {
             X509_VERIFY_PARAM *param = SSL_get0_param(ssl);
             /* Enable automatic hostname checks */
@
