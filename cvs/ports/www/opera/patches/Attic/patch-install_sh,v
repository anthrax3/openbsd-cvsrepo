head	1.26;
access;
symbols
	OPENBSD_5_2:1.25.0.8
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.6
	OPENBSD_5_0:1.25.0.4
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.25.0.2
	OPENBSD_4_9_BASE:1.25
	OPENBSD_4_8:1.24.0.2
	OPENBSD_4_8_BASE:1.24
	OPENBSD_4_7:1.23.0.2
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.21.0.6
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.4
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.21.0.2
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.19.0.6
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.19.0.4
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.19.0.2
	OPENBSD_4_1_BASE:1.19
	OPENBSD_4_0:1.18.0.2
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.15.0.2
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.12.0.2
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.9.0.2
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.4
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	naddy_20010516:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2012.10.11.10.47.41;	author ajacoutot;	state dead;
branches;
next	1.25;

1.25
date	2010.11.23.13.56.18;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.06.10.06.12.57;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2009.11.03.05.50.21;	author sturm;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2009.09.22.05.14.43;	author sturm;	state Exp;
branches;
next	1.21;

1.21
date	2008.06.13.23.01.36;	author sturm;	state Exp;
branches
	1.21.6.1;
next	1.20;

1.20
date	2008.06.12.19.04.11;	author sturm;	state dead;
branches;
next	1.19;

1.19
date	2006.09.22.20.22.28;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2006.08.02.17.29.48;	author sturm;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2006.06.23.08.34.17;	author bernd;	state Exp;
branches;
next	1.16;

1.16
date	2006.04.05.18.36.36;	author sturm;	state Exp;
branches;
next	1.15;

1.15
date	2006.02.20.10.36.02;	author bernd;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2005.11.22.21.44.22;	author sturm;	state Exp;
branches;
next	1.13;

1.13
date	2005.09.21.11.38.51;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2005.06.18.20.46.32;	author sturm;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2005.05.28.16.32.18;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2005.02.05.13.14.35;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2004.07.07.12.14.43;	author sturm;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2004.05.12.19.35.46;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2003.11.09.09.46.26;	author sturm;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2003.04.27.16.27.51;	author naddy;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2002.07.03.20.37.37;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.05.16.12.55.21;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.23.15.44.43;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.16.17.10.29;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.16.14.44.27;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.05.16.14.44.27;	author naddy;	state Exp;
branches;
next	;

1.6.2.1
date	2004.06.03.11.33.35;	author robert;	state Exp;
branches;
next	1.6.2.2;

1.6.2.2
date	2004.07.07.14.06.30;	author robert;	state Exp;
branches;
next	;

1.7.2.1
date	2004.05.26.08.38.23;	author robert;	state Exp;
branches;
next	1.7.2.2;

1.7.2.2
date	2004.07.07.14.04.36;	author robert;	state Exp;
branches;
next	1.7.2.3;

1.7.2.3
date	2005.02.05.17.55.51;	author sturm;	state Exp;
branches;
next	;

1.9.2.1
date	2005.02.05.17.55.05;	author sturm;	state Exp;
branches;
next	;

1.12.2.1
date	2005.11.24.19.09.02;	author sturm;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2006.02.20.22.04.07;	author sturm;	state Exp;
branches;
next	1.12.2.3;

1.12.2.3
date	2006.06.25.13.45.26;	author sturm;	state Exp;
branches;
next	1.12.2.4;

1.12.2.4
date	2006.09.22.20.45.52;	author sturm;	state Exp;
branches;
next	;

1.15.2.1
date	2006.06.25.13.45.52;	author sturm;	state Exp;
branches;
next	1.15.2.2;

1.15.2.2
date	2006.09.22.20.42.05;	author sturm;	state Exp;
branches;
next	;

1.18.2.1
date	2006.11.01.12.39.13;	author sturm;	state Exp;
branches;
next	;

1.21.6.1
date	2010.02.06.17.50.40;	author william;	state Exp;
branches;
next	;

1.23.2.1
date	2010.08.03.02.51.27;	author william;	state Exp;
branches;
next	;


desc
@@


1.26
log
@Major update to opera-12.02.
@
text
@$OpenBSD: patch-install_sh,v 1.25 2010/11/23 13:56:18 ajacoutot Exp $
--- install.sh.orig	Mon Jun 21 14:16:08 2010
+++ install.sh	Tue Nov 23 14:28:30 2010
@@@@ -870,7 +870,7 @@@@ generate_wrapper()
     wrapper_contain="#!/bin/sh
 
 # Required for Session Management
-case \$0 in /*) OPERA_SCRIPT_PATH=\$0;; *) OPERA_SCRIPT_PATH=`/bin/pwd`/\$0;; esac
+case \$0 in /*) OPERA_SCRIPT_PATH=\$0;; *) OPERA_SCRIPT_PATH=${str_paramwrapper}/\$0;; esac
 export OPERA_SCRIPT_PATH
 
 # Location of the Opera binaries
@@@@ -922,9 +922,6 @@@@ if test \"\${OPERA_DIR}\" = '' ; then
   fi
 fi
 
-OPERA_LD_PRELOAD=\"\${LD_PRELOAD}\"
-export OPERA_LD_PRELOAD
-
 # Native Java enviroment
 for d in \"\$OPERA_PERSONALDIR\" \"\$HOME/.opera\"
 do if test -f \"\$d/javapath.txt\"
@@@@ -1060,9 +1057,6 @@@@ if test \"\${OPERA_JAVA_DIR}\"; then
     export LD_LIBRARY_PATH OPERA_JAVA_DIR
 fi
 
-# Workarounds for the \"preloaded libXt\" problem.
-LD_PRELOAD=\"libjvm.so:libawt.so:\${OPERA_LD_PRELOAD}\"
-export LD_PRELOAD
 # To disable the first workaround, comment the next line.
 JAVA_WORKAROUND=\`\${OPERA_BINARYDIR}/works 2>/dev/null\`
 
@@@@ -1126,8 +1120,14 @@@@ esac
 
 wrapper_contain="${wrapper_contain}
 
+# lock file is not needed as Opera will open a new tab if already
+# running ; this helps recovering from a crash/hang with compat_linux(8)
+if [ -f \${HOME}/.opera/lock ]; then
+	rm -f \${HOME}/.opera/lock
+fi
+
 # Running Opera
-exec \"\${OPERA_BINARYDIR}opera\" \"\$@@\"
+exec \"\${OPERA_BINARYDIR}opera\" \"-notrayicon\" \"\$@@\"
 "
 
 echo "${wrapper_contain}" > ${wrapper_file}
@


1.25
log
@Add -notrayicon to args by default. This prevent a (hard to reproduce)
crash under some circumstances where the linux qt libs fail to load
if one is running a panel which then ends up in a hard crash of opera
(which in turn can hangs the entire display)...

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-install_sh,v 1.24 2010/06/10 06:12:57 ajacoutot Exp $
@


1.24
log
@Remove ~/.opera/lock on startup if it exists. It helps recovering from
a crash/hang and isn't really useful for us as opera will open a new
tab if we try to open a new instance.

ok dcoppa@@ robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.23 2009/11/03 05:50:21 sturm Exp $
--- install.sh.orig	Fri Nov 20 20:11:15 2009
+++ install.sh	Wed Jun  9 19:33:20 2010
d33 1
a33 2
@@@@ -1125,6 +1119,12 @@@@ test -d /usr/sfw/lib/ && LD_LIBRARY_PATH=\"\${LD_LIBRA
 esac
d36 1
a36 1
+
d42 5
d48 1
a48 2
 # Running Opera
 exec \"\${OPERA_BINARYDIR}opera\" \"\$@@\"
@


1.23
log
@security update to opera 10.01
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.22 2009/09/22 05:14:43 sturm Exp $
--- install.sh.orig	Mon Oct 19 17:55:07 2009
+++ install.sh	Mon Nov  2 14:11:30 2009
d33 13
@


1.23.2.1
log
@MFC:

SECURITY UPDATE to opera-10.11

ok sturm ajacoutot
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.23 2009/11/03 05:50:21 sturm Exp $
--- install.sh.orig	Fri Nov 20 20:11:15 2009
+++ install.sh	Wed Jun  9 19:33:20 2010
a32 13
@@@@ -1125,6 +1119,12 @@@@ test -d /usr/sfw/lib/ && LD_LIBRARY_PATH=\"\${LD_LIBRA
 esac
 
 wrapper_contain="${wrapper_contain}
+
+# lock file is not needed as Opera will open a new tab if already
+# running ; this helps recovering from a crash/hang with compat_linux(8)
+if [ -f \${HOME}/.opera/lock ]; then
+	rm -f \${HOME}/.opera/lock
+fi
 
 # Running Opera
 exec \"\${OPERA_BINARYDIR}opera\" \"\$@@\"
@


1.22
log
@update to opera 10

note: this version of opera has font issue on OpenBSD, there are missing
MathML characters and some fonts, like Farsi(?), cannot be displayed at all.
I looked at it, but have no clue what to do about it.
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.21 2008/06/13 23:01:36 sturm Exp $
--- install.sh.orig	Sun Aug 30 18:25:07 2009
+++ install.sh	Wed Sep  2 20:04:25 2009
d13 1
a13 1
@@@@ -925,9 +925,6 @@@@ if test \"\${OPERA_DIR}\" = '' ; then
d23 1
a23 1
@@@@ -1063,9 +1060,6 @@@@ if test \"\${OPERA_JAVA_DIR}\"; then
@


1.21
log
@restore ability to launch external applications
get rid of a reference to opera's fake dir
@
text
@d1 3
a3 3
$OpenBSD$
--- install.sh.orig	Wed Jun 11 23:11:27 2008
+++ install.sh	Sat Jun 14 00:54:10 2008
d23 1
a23 1
@@@@ -1060,9 +1057,6 @@@@ if test \"\${OPERA_JAVA_DIR}\"; then
@


1.21.6.1
log
@MFC:

SECURITY FIX

opera-10.10

ok sturm@@ jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.21 2008/06/13 23:01:36 sturm Exp $
--- install.sh.orig	Mon Oct 19 17:55:07 2009
+++ install.sh	Mon Nov  2 14:11:30 2009
d13 1
a13 1
@@@@ -922,9 +922,6 @@@@ if test \"\${OPERA_DIR}\" = '' ; then
@


1.20
log
@update to opera 9.50
@
text
@d1 31
a31 19
$OpenBSD: patch-install_sh,v 1.19 2006/09/22 20:22:28 sturm Exp $
--- install.sh.orig	Tue Sep 19 15:40:47 2006
+++ install.sh	Fri Sep 22 17:20:03 2006
@@@@ -1342,7 +1342,7 @@@@ run_install()
     then
 	# System wide configuration files
 	config_dir="/etc"
-	if can_write_to "$config_dir"
+	if false can_write_to "$config_dir"
 	then
 	    echo
 	    echo "System wide configuration files:"
@@@@ -1372,7 +1372,7 @@@@ run_install()
 	then
 	    echo
 	    echo "Shortcut icons will be ignored if installed with the prefix \"$prefix\"."
-	    con_firm "Do you want to (try to) install them in default locations" || bool_icons=0
+	    bool_icons=0
 	fi
a32 1
 	if test "${bool_icons}" -ne 0
@


1.19
log
@security update to opera 9.02
@
text
@d1 1
a1 1
$OpenBSD: patch-install_sh,v 1.18 2006/08/02 17:29:48 sturm Exp $
@


1.18
log
@update to opera 9.01
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.17 2006/06/23 08:34:17 bernd Exp $
--- install.sh.orig	Fri Jul 28 15:10:44 2006
+++ install.sh	Wed Aug  2 19:17:48 2006
@@@@ -1338,7 +1338,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1368,7 +1368,7 @@@@ run_install()
@


1.18.2.1
log
@MFC:
security update to opera 9.02
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.19 2006/09/22 20:22:28 sturm Exp $
--- install.sh.orig	Tue Sep 19 15:40:47 2006
+++ install.sh	Fri Sep 22 17:20:03 2006
@@@@ -1342,7 +1342,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1372,7 +1372,7 @@@@ run_install()
@


1.17
log
@Security update to opera-9.00.

This fixes an integer overflow when processing JPEG images.

More information: http://secunia.com/advisories/20787/

ok sturm@@
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.16 2006/04/05 18:36:36 sturm Exp $
--- install.sh.orig	Fri Jun 16 13:18:52 2006
+++ install.sh	Tue Jun 20 11:01:55 2006
@@@@ -1330,7 +1330,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1360,7 +1360,7 @@@@ run_install()
@


1.16
log
@update to opera 8.54
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.15 2006/02/20 10:36:02 bernd Exp $
--- install.sh.orig	Wed Apr  5 20:13:19 2006
+++ install.sh	Wed Apr  5 20:17:44 2006
@@@@ -1379,7 +1379,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1409,7 +1409,7 @@@@ run_install()
@


1.15
log
@Security update to opera-8.52.

More info: http://secunia.com/advisories/17571/

ok sturm@@
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.14 2005/11/22 21:44:22 sturm Exp $
--- install.sh.orig	Wed Feb  1 15:24:19 2006
+++ install.sh	Fri Feb 17 14:00:42 2006
@@@@ -1340,11 +1340,11 @@@@ run_install()
d7 1
a7 6
 	case "${os}" in
-	    FreeBSD|OpenBSD|NetBSD)	config_dir="/usr/local/etc";;
+	    FreeBSD|NetBSD)		config_dir="/usr/local/etc";;
 	    *)				config_dir="/etc";;
 	esac
 
d13 1
a13 1
@@@@ -1374,7 +1374,7 @@@@ run_install()
@


1.15.2.1
log
@MFC:
Security update to opera-9.00.

This fixes an integer overflow when processing JPEG images.

More information: http://secunia.com/advisories/20787/
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.17 2006/06/23 08:34:17 bernd Exp $
--- install.sh.orig	Fri Jun 16 13:18:52 2006
+++ install.sh	Tue Jun 20 11:01:55 2006
@@@@ -1330,7 +1330,7 @@@@ run_install()
d7 6
a12 1
 	config_dir="/etc"
d18 1
a18 1
@@@@ -1360,7 +1360,7 @@@@ run_install()
@


1.15.2.2
log
@MFC:
security update to opera 9.02
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.15.2.1 2006/06/25 13:45:52 sturm Exp $
--- install.sh.orig	Tue Sep 19 15:40:47 2006
+++ install.sh	Fri Sep 22 22:31:10 2006
@@@@ -1342,7 +1342,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1372,7 +1372,7 @@@@ run_install()
@


1.14
log
@security update to 8.51

it updates Opera's wrapper script to not run commands included with URLs
passed from other applications (as suggested in Secunia Advisory 16907)
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.13 2005/09/21 11:38:51 sturm Exp $
--- install.sh.orig	Tue Nov 22 22:07:45 2005
+++ install.sh	Tue Nov 22 22:13:47 2005
@@@@ -1302,7 +1302,7 @@@@ run_install()
d7 6
a12 1
 	config_dir="/etc"
d18 1
a18 1
@@@@ -1332,7 +1332,7 @@@@ run_install()
@


1.13
log
@update to opera 8.50, which is now free to use
a few bug fixes on the way
@
text
@d1 5
a5 25
$OpenBSD: patch-install_sh,v 1.12 2005/06/18 20:46:32 sturm Exp $
--- install.sh.orig	Fri Sep 16 12:16:47 2005
+++ install.sh	Tue Sep 20 11:14:10 2005
@@@@ -1132,7 +1132,7 @@@@ run_install()
 	    mkdir $mkdirv $mkdirp $share_dir/help/
 	    chmod $chmodv 755 $share_dir/help
 	    cp $cpv $cpf $cpR help/* $share_dir/help/
-	    if not test -d "$doc_dir/help"; then ln -s $str_localdirshare/help $doc_dir/help; fi
+	    ln -s $str_localdirshare/help $doc_dir/help
 	fi
 
 	mkdir $mkdirv $mkdirp $share_dir/config/
@@@@ -1182,9 +1182,7 @@@@ run_install()
 	chmod $chmodv 755 $share_dir/styles/user
 	cp $cpv $cpf $cpR styles/user/* $share_dir/styles/user/
 
-	if not test -f "$share_dir/styles/OPF.css"; then
-	    ln $lns opf.css $share_dir/styles/OPF.css
-	fi
+	ln $lns opf.css $share_dir/styles/OPF.css
 
 	cp $cpv $cpf chartables.bin $share_dir/
 
@@@@ -1295,7 +1293,7 @@@@ run_install()
 
d8 3
a10 2
-	if can_write_to "$config_dir"; then
+	if false can_write_to "$config_dir"; then
d13 2
a14 3
 	    echo "  $config_dir/opera6rc"
@@@@ -1322,9 +1320,7 @@@@ run_install()
 	if test "$flag_mode" = "--force" -o "$flag_mode" = "--prefix="; then
d16 2
a17 4
 	    echo "Shortcut icons cannot be installed with the prefix \"$prefix\"."
-	    if not con_firm "Do you still want to install them"; then
-		bool_icons=0
-	    fi
d21 1
a21 1
 	if test "${bool_icons}" -ne 0; then
@


1.12
log
@security and bugfix update to opera 8.01
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.11 2005/05/28 16:32:18 sturm Exp $
--- install.sh.orig	Wed Jun 15 11:17:40 2005
+++ install.sh	Sat Jun 18 19:20:22 2005
d33 8
a40 1
@@@@ -1317,12 +1315,6 @@@@ run_install()
d43 1
a43 10
      # Shorcuts and Icons
-	icons
-	gnome
-	kde 3
-	kde 2
-	kde1
-	mandrake
 
 	fi # OPERADESTDIR
 
@


1.12.2.1
log
@MFC:
security update to 8.51

it updates Opera's wrapper script to not run commands included with URLs
passed from other applications (as suggested in Secunia Advisory 16907)
@
text
@d1 25
a25 5
$OpenBSD: patch-install_sh,v 1.14 2005/11/22 21:44:22 sturm Exp $
--- install.sh.orig	Tue Nov 22 22:07:45 2005
+++ install.sh	Tue Nov 22 22:13:47 2005
@@@@ -1302,7 +1302,7 @@@@ run_install()
     then
d28 2
a29 3
-	if can_write_to "$config_dir"
+	if false can_write_to "$config_dir"
 	then
d32 2
a33 6
@@@@ -1332,7 +1332,7 @@@@ run_install()
 	then
 	    echo
 	    echo "Shortcut icons will be ignored if installed with the prefix \"$prefix\"."
-	    con_firm "Do you want to (try to) install them in default locations" || bool_icons=0
+	    bool_icons=0
d36 10
a45 1
 	if test "${bool_icons}" -ne 0
@


1.12.2.2
log
@MFC:
Security update to opera-8.52.

More info: http://secunia.com/advisories/17571/
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.15 2006/02/20 10:36:02 bernd Exp $
--- install.sh.orig	Wed Feb  1 15:24:19 2006
+++ install.sh	Fri Feb 17 14:00:42 2006
@@@@ -1340,11 +1340,11 @@@@ run_install()
d7 1
a7 6
 	case "${os}" in
-	    FreeBSD|OpenBSD|NetBSD)	config_dir="/usr/local/etc";;
+	    FreeBSD|NetBSD)		config_dir="/usr/local/etc";;
 	    *)				config_dir="/etc";;
 	esac
 
d13 1
a13 1
@@@@ -1374,7 +1374,7 @@@@ run_install()
@


1.12.2.3
log
@MFC:
Security update to opera-9.00.

This fixes an integer overflow when processing JPEG images.

More information: http://secunia.com/advisories/20787/
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.17 2006/06/23 08:34:17 bernd Exp $
--- install.sh.orig	Fri Jun 16 13:18:52 2006
+++ install.sh	Tue Jun 20 11:01:55 2006
@@@@ -1330,7 +1330,7 @@@@ run_install()
d7 6
a12 1
 	config_dir="/etc"
d18 1
a18 1
@@@@ -1360,7 +1360,7 @@@@ run_install()
@


1.12.2.4
log
@MFC:
security update to opera 9.02
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.12.2.3 2006/06/25 13:45:26 sturm Exp $
--- install.sh.orig	Tue Sep 19 15:40:47 2006
+++ install.sh	Fri Sep 22 22:43:09 2006
@@@@ -1342,7 +1342,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1372,7 +1372,7 @@@@ run_install()
@


1.11
log
@update to opera 8, two issues described in DESCR
@
text
@d1 3
a3 3
$OpenBSD: patch-install_sh,v 1.10 2005/02/05 13:14:35 sturm Exp $
--- install.sh.orig	Fri Apr 15 06:19:38 2005
+++ install.sh	Fri May 27 13:04:10 2005
d22 1
a22 1
 	cp $cpv $cpf hhd.ssr chartables.bin $share_dir/
@


1.10
log
@SECURITY update to Opera 7.54u2

From the opera advisory:
A bug in Opera's file download handling causes the download dialog to
give wrong information to the user when a data URL with an executable
file is loaded. In some cases, it will tell the user that the file will
be opened with NOTEPAD.EXE.[...] But when the user clicks "Open", the file
is executed.

see http://www.opera.com/support/search/supsearch.dml?index=784 for details
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.9 2004/07/07 12:14:43 sturm Exp $
--- install.sh.orig	Mon Jan 31 16:19:45 2005
+++ install.sh	Sat Feb  5 14:04:03 2005
@@@@ -1129,7 +1129,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1179,9 +1179,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1287,7 +1285,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1309,12 +1307,6 @@@@ run_install()
@


1.9
log
@update to opera 7.52

security fixes for Bugtraq ID #10517 and Secunia Advisory SA11978, plus
misc fixes, see http://www.opera.com/linux/changelogs/752/ for details
@
text
@d1 10
a10 9
$OpenBSD: patch-install_sh,v 1.8 2004/05/12 19:35:46 sturm Exp $
--- install.sh.orig	2004-07-06 13:37:54.000000000 +0200
+++ install.sh	2004-07-07 14:02:45.000000000 +0200
@@@@ -1132,7 +1132,7 @@@@ run_install()
 	mkdir $mkdirv $mkdirp $doc_dir/
 	chmod $chmodv 755 $doc_dir
 	cp $cpv $cpf LICENSE $doc_dir
-	if not test -d "$doc_dir/help"; then ln -s $str_localdirshare/help $doc_dir/help; fi
+	ln -s $str_localdirshare/help $doc_dir/help
d12 2
a13 3
     # Shared files
 	debug_msg 1 "Shared files"
@@@@ -1183,9 +1183,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1280,7 +1278,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1302,12 +1300,6 @@@@ run_install()
@


1.9.2.1
log
@MFC:

SECURITY update to Opera 7.54u2

From the opera advisory:
A bug in Opera's file download handling causes the download dialog to
give wrong information to the user when a data URL with an executable
file is loaded. In some cases, it will tell the user that the file will
be opened with NOTEPAD.EXE.[...] But when the user clicks "Open", the file
is executed.

see http://www.opera.com/support/search/supsearch.dml?index=784 for details

ok brad@@
@
text
@d1 9
a9 10
$OpenBSD: patch-install_sh,v 1.10 2005/02/05 13:14:35 sturm Exp $
--- install.sh.orig	Mon Jan 31 16:19:45 2005
+++ install.sh	Sat Feb  5 14:04:03 2005
@@@@ -1129,7 +1129,7 @@@@ run_install()
 	    mkdir $mkdirv $mkdirp $share_dir/help/
 	    chmod $chmodv 755 $share_dir/help
 	    cp $cpv $cpf $cpR help/* $share_dir/help/
-	    if not test -d "$doc_dir/help"; then ln -s $str_localdirshare/help $doc_dir/help; fi
+	    ln -s $str_localdirshare/help $doc_dir/help
 	fi
d11 3
a13 2
 	mkdir $mkdirv $mkdirp $share_dir/config/
@@@@ -1179,9 +1179,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1287,7 +1285,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1309,12 +1307,6 @@@@ run_install()
@


1.8
log
@update to opera 7.50

lots of bug fixes and improvements, see
http://www.opera.com/windows/changelogs/750/ for details
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.7 2003/11/09 09:46:26 sturm Exp $
--- install.sh.orig	2004-05-12 17:34:45.000000000 +0200
+++ install.sh	2004-05-12 17:37:01.000000000 +0200
@@@@ -1129,7 +1129,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1180,9 +1180,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1256,7 +1254,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1278,12 +1276,6 @@@@ run_install()
@


1.7
log
@update to opera 7.21
@
text
@d1 24
a24 4
$OpenBSD: patch-install_sh,v 1.6 2003/04/27 16:27:51 naddy Exp $
--- install.sh.orig	2003-10-13 18:55:36.000000000 +0200
+++ install.sh	2003-11-09 09:59:27.000000000 +0100
@@@@ -1247,7 +1247,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1269,12 +1269,12 @@@@ run_install()
a42 6
+#	icons
+#	gnome
+#	kde 3
+#	kde 2
+#	kde1
+#	mandrake
@


1.7.2.1
log
@update to 7.50; security fix for:
http://www.idefense.com/application/poi/display?id=104&type=vulnerabilities&flashstatus=true
@
text
@d1 4
a4 24
$OpenBSD: patch-install_sh,v 1.8 2004/05/12 19:35:46 sturm Exp $
--- install.sh.orig	2004-05-12 17:34:45.000000000 +0200
+++ install.sh	2004-05-12 17:37:01.000000000 +0200
@@@@ -1129,7 +1129,7 @@@@ run_install()
 	mkdir $mkdirv $mkdirp $doc_dir/
 	chmod $chmodv 755 $doc_dir
 	cp $cpv $cpf LICENSE $doc_dir
-	if not test -d "$doc_dir/help"; then ln -s $str_localdirshare/help $doc_dir/help; fi
+	ln -s $str_localdirshare/help $doc_dir/help
 
     # Shared files
 	debug_msg 1 "Shared files"
@@@@ -1180,9 +1180,7 @@@@ run_install()
 	chmod $chmodv 755 $share_dir/styles/user
 	cp $cpv $cpf $cpR styles/user/* $share_dir/styles/user/
 
-	if not test -f "$share_dir/styles/OPF.css"; then
-	    ln $lns opf.css $share_dir/styles/OPF.css
-	fi
+	ln $lns opf.css $share_dir/styles/OPF.css
 
 	cp $cpv $cpf hhd.ssr chartables.bin $share_dir/
 
@@@@ -1256,7 +1254,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1278,12 +1276,6 @@@@ run_install()
d23 6
@


1.7.2.2
log
@SECURITY:

update to opera 7.52

security fixes for Bugtraq ID #10517 and Secunia Advisory SA11978, plus
misc fixes, see http://www.opera.com/linux/changelogs/752/ for details
@
text
@d1 4
a4 4
$OpenBSD$
--- install.sh.orig	2004-07-06 13:37:54.000000000 +0200
+++ install.sh	2004-07-07 14:02:45.000000000 +0200
@@@@ -1132,7 +1132,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1183,9 +1183,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1280,7 +1278,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1302,12 +1300,6 @@@@ run_install()
@


1.7.2.3
log
@MFC:

SECURITY update to Opera 7.54u2

From the opera advisory:
A bug in Opera's file download handling causes the download dialog to
give wrong information to the user when a data URL with an executable
file is loaded. In some cases, it will tell the user that the file will
be opened with NOTEPAD.EXE.[...] But when the user clicks "Open", the file
is executed.

see http://www.opera.com/support/search/supsearch.dml?index=784 for details

ok brad@@
@
text
@d1 9
a9 10
$OpenBSD: patch-install_sh,v 1.10 2005/02/05 13:14:35 sturm Exp $
--- install.sh.orig	Mon Jan 31 16:19:45 2005
+++ install.sh	Sat Feb  5 14:04:03 2005
@@@@ -1129,7 +1129,7 @@@@ run_install()
 	    mkdir $mkdirv $mkdirp $share_dir/help/
 	    chmod $chmodv 755 $share_dir/help
 	    cp $cpv $cpf $cpR help/* $share_dir/help/
-	    if not test -d "$doc_dir/help"; then ln -s $str_localdirshare/help $doc_dir/help; fi
+	    ln -s $str_localdirshare/help $doc_dir/help
 	fi
d11 3
a13 2
 	mkdir $mkdirv $mkdirp $share_dir/config/
@@@@ -1179,9 +1179,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1287,7 +1285,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1309,12 +1307,6 @@@@ run_install()
@


1.6
log
@Update to Opera 6.12 for Linux.
@
text
@d1 4
a4 4
$OpenBSD: patch-install_sh,v 1.5 2002/07/03 20:37:37 naddy Exp $
--- install.sh.orig	Sat Apr 26 13:40:48 2003
+++ install.sh	Sat Apr 26 13:42:13 2003
@@@@ -1101,7 +1101,7 @@@@ run_install()
d6 1
a6 1
      # System wide configuration files
d13 1
a13 1
@@@@ -1138,10 +1138,10 @@@@ run_install()
d19 4
a22 2
-	kde2
-	kde
d25 4
a28 2
+#	kde2
+#	kde
d30 1
a30 1
 # Add uninstallation here
@


1.6.2.1
log
@update to 7.50; security fix for:
http://www.idefense.com/application/poi/display?id=104&type=vulnerabilities&flashstatus=true

ok brad@@
@
text
@d1 4
a4 9
$OpenBSD: patch-install_sh,v 1.8 2004/05/12 19:35:46 sturm Exp $
--- install.sh.orig	2004-05-12 17:34:45.000000000 +0200
+++ install.sh	2004-05-12 17:37:01.000000000 +0200
@@@@ -1129,7 +1129,7 @@@@ run_install()
 	mkdir $mkdirv $mkdirp $doc_dir/
 	chmod $chmodv 755 $doc_dir
 	cp $cpv $cpf LICENSE $doc_dir
-	if not test -d "$doc_dir/help"; then ln -s $str_localdirshare/help $doc_dir/help; fi
+	ln -s $str_localdirshare/help $doc_dir/help
d6 1
a6 16
     # Shared files
 	debug_msg 1 "Shared files"
@@@@ -1180,9 +1180,7 @@@@ run_install()
 	chmod $chmodv 755 $share_dir/styles/user
 	cp $cpv $cpf $cpR styles/user/* $share_dir/styles/user/
 
-	if not test -f "$share_dir/styles/OPF.css"; then
-	    ln $lns opf.css $share_dir/styles/OPF.css
-	fi
+	ln $lns opf.css $share_dir/styles/OPF.css
 
 	cp $cpv $cpf hhd.ssr chartables.bin $share_dir/
 
@@@@ -1256,7 +1254,7 @@@@ run_install()
 
 	# System wide configuration files
d13 1
a13 1
@@@@ -1278,12 +1276,6 @@@@ run_install()
d19 6
a24 4
-	kde 3
-	kde 2
-	kde1
-	mandrake
d26 1
a26 1
 	fi # OPERADESTDIR
@


1.6.2.2
log
@SECURITY:

update to opera 7.52

security fixes for Bugtraq ID #10517 and Secunia Advisory SA11978, plus
misc fixes, see http://www.opera.com/linux/changelogs/752/ for details
@
text
@d1 4
a4 4
$OpenBSD$
--- install.sh.orig	2004-07-06 13:37:54.000000000 +0200
+++ install.sh	2004-07-07 14:02:45.000000000 +0200
@@@@ -1132,7 +1132,7 @@@@ run_install()
d13 1
a13 1
@@@@ -1183,9 +1183,7 @@@@ run_install()
d24 1
a24 1
@@@@ -1280,7 +1278,7 @@@@ run_install()
d33 1
a33 1
@@@@ -1302,12 +1300,6 @@@@ run_install()
@


1.5
log
@Update to 6.02:
* New preferences look.
* Tons of unnoticeable bug fixes.

Install both opera6rc and opera6rc.fixed.
Move sync DNS lookup disable to opera6rc.fixed.
@
text
@d1 4
a4 5
$OpenBSD: patch-install_sh,v 1.4 2002/05/16 12:55:21 naddy Exp $
--- install.sh.orig	Wed Jul  3 21:16:45 2002
+++ install.sh	Wed Jul  3 21:18:32 2002
@@@@ -938,7 +938,7 @@@@ run_install()
 	ln $lns $lnf libnpp.so.$plugin_version_major.$plugin_version_minor.$plugin_version_release $plugin_dir/libnpp.so
d7 3
a9 2
-	if can_write_to "/etc"; then
+	if false can_write_to "/etc"; then
d12 2
a13 2
 	    echo "  /etc/opera6rc"
@@@@ -975,10 +975,10 @@@@ run_install()
d21 4
a24 4
+	: icons
+	: gnome
+	: kde2
+	: kde
@


1.4
log
@Update to 6.0 release.
@
text
@d1 4
a4 5
$OpenBSD: patch-install_sh,v 1.3 2002/04/23 15:44:43 naddy Exp $
--- install.sh.orig	Fri May 10 15:36:21 2002
+++ install.sh	Thu May 16 00:25:05 2002
@@@@ -922,10 +922,10 @@@@ run_install()
 	ln $lns $lnf libnpp.so.$plugin_version_major.$plugin_version_minor.$plugin_version_release $plugin_dir/libnpp.so.$plugin_version_major
d7 10
d21 4
a24 4
+#	icons
+#	gnome
+#	kde2
+#	kde
@


1.3
log
@Upgrade to 6.0 beta 2.
Adds i18n, mouse gestures, and innumerable other improvements.
@
text
@d1 4
a4 24
$OpenBSD: patch-install_sh,v 1.2 2001/09/16 17:10:29 naddy Exp $
--- install.sh.orig	Fri Apr 12 14:01:42 2002
+++ install.sh	Fri Apr 19 00:13:41 2002
@@@@ -347,6 +347,9 @@@@ set_os_spesific()
 		fi
 	;;
 
+	i386:OpenBSD)
+	;;
+
 	i[3456]86:Linux|mips:Linux)
 		cpf='-f'
 		if test "$verbose" -gt "1"; then
@@@@ -731,6 +734,9 @@@@ generate_wrapper()
 	    wrapper_plugin_paths=''
 	;;
 
+	i386:OpenBSD)
+	;;
+
 	*:*)
 		error 'os'
 	;;
@@@@ -906,10 +912,10 @@@@ run_install()
@


1.2
log
@Update to 5.05TP1:
- bug fixes
- asynchronous DNS lookups don't leave zombies
- support for Netscape plug-ins
@
text
@d1 6
a6 6
$OpenBSD: patch-install_sh,v 1.1.1.1 2001/05/16 14:44:27 naddy Exp $
--- install.sh.orig	Fri Aug 10 14:29:05 2001
+++ install.sh	Tue Aug 14 22:38:06 2001
@@@@ -186,14 +186,14 @@@@ runinstall()
 	mkdir $v -p $plugin_dir/
 	chmod $vv 755 $plugin_dir
d8 19
a26 5
-	cp $v -fdp plugins/* $plugin_dir
+	(cd plugins; pax -r -w -pe * $plugin_dir)
         chmod $vv 755 $plugin_dir/operamotifwrapper
-        chmod $vv 755 $plugin_dir/libnpp.so.0.1.0
+        chmod $vv 755 $plugin_dir/libnpp.so.0.1.1
@


1.1
log
@Initial revision
@
text
@d1 12
a12 6
$OpenBSD$
--- install.sh.orig	Tue May 15 21:09:35 2001
+++ install.sh	Tue May 15 21:10:28 2001
@@@@ -159,10 +159,10 @@@@ runinstall()
 	cp $v -fp opera.xpm opera.wmconfig opera.desktop opera_*.png $share_dir/
 	cp $v -fp opera.adr $share_dir/
d23 2
a24 2
     # Uninstallation
 #	echo '' > $share_dir/uninstall.sh
@


1.1.1.1
log
@Initial import of Opera 5.0 for i386; various input from jakob@@

Opera is a fast and customizable WWW browser that claims W3C standards
compliance and a plethora of features.
@
text
@@
