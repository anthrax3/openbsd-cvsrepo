head	1.18;
access;
symbols
	OPENBSD_4_8:1.17.0.4
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.17.0.2
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.14.0.2
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.11.0.2
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2;
locks; strict;
comment	@# @;


1.18
date	2010.09.27.12.21.24;	author stephan;	state dead;
branches;
next	1.17;

1.17
date	2010.03.05.09.39.52;	author stephan;	state Exp;
branches;
next	1.16;

1.16
date	2009.10.01.12.28.34;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.09.20.13.39.34;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2009.05.15.21.21.09;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2009.04.03.19.03.03;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2009.04.03.12.55.08;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2008.10.25.14.20.34;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2008.08.19.23.44.48;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2008.07.26.10.34.01;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2008.07.24.09.28.40;	author bernd;	state Exp;
branches;
next	1.7;

1.7
date	2008.07.09.23.40.29;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2008.05.03.18.16.25;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2008.04.09.14.32.22;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2008.03.16.10.15.28;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2008.03.15.09.36.48;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.24.15.48.25;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2008.02.16.16.49.10;	author espie;	state Exp;
branches;
next	;


desc
@@


1.18
log
@remove drupal5, which will soon be end-of-life. Switch to drupal6, please. explicit ok sthen@@, aja@@
@
text
@# $OpenBSD: Makefile,v 1.17 2010/03/05 09:39:52 stephan Exp $

COMMENT =	powerful content management system
 
DISTNAME =	drupal-5.22
DISTFILES=	${DISTNAME}${EXTRACT_SUFX}

RUN_DEPENDS = 	::www/php5/core \
	:php5-mysql-*|php5-mysqli-*|php5-pgsql-*:www/php5/extensions,-mysql \
		::www/php5/extensions,-gd \
		::www/php5/extensions,-mbstring
		
do-install:
		mkdir -p ${PREFIX}/${DRUPAL_ROOT}
		# copy base distrib
		cp -R ${WRKDIST}/* ${PREFIX}/${DRUPAL_ROOT}
		# copy config file
		perl -p \
			-e 's@@\$$\{DRUPAL_ROOT\}@@${DRUPAL_ROOT}@@g;' \
			-e 's@@\$$\{DRUPAL\}@@${DRUPAL}@@g;' \
			<${FILESDIR}/drupal.conf \
			>${PREFIX}/${DRUPAL_ROOT}/misc/drupal.conf
		cd ${PREFIX}/${DRUPAL_ROOT}/sites/default && \
			mv settings.php settings.php.sample
		${INSTALL_DATA_DIR} ${PREFIX}/${DRUPAL_ROOT}/files
		${INSTALL_DATA_DIR} ${PREFIX}/${DRUPAL_MODS}
		${INSTALL_DATA_DIR} ${PREFIX}/${DRUPAL_THEMES}
		# give everything to www
		chown -R www.www ${PREFIX}/${DRUPAL_ROOT}

.include <bsd.port.mk>
@


1.17
log
@security update to 5.22, addresses DRUPAL-SA-CORE-2010-001.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/10/01 12:28:34 ajacoutot Exp $
@


1.16
log
@Tweak MESSAGE now that /var/www/tmp/ is here by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/09/20 13:39:34 espie Exp $
d5 1
a5 2
DISTNAME =	drupal-5.20
PKGNAME=	${DISTNAME}p0
@


1.15
log
@security update.
PLEASE NOTE: I no longer use drupal5, switch to drupal6 or someone should
step in as drupal5 maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/05/15 21:21:09 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
@


1.14
log
@update to 5.18, fixes an xss issue. ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/04/03 19:03:03 espie Exp $
d5 1
a5 1
DISTNAME =	drupal-5.18
@


1.13
log
@finally, update to 5.16, after fixing the modules.inc stuff to work with
jquery_update....

sigh
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/04/03 12:55:08 espie Exp $
d5 1
a5 1
DISTNAME =	drupal-5.16
@


1.12
log
@drupal5 is pending an update. In the mean time, make it possible to
install alongside drupal6 (I've given up figuring out a clean update
path for now)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/10/25 14:20:34 espie Exp $
d5 2
a6 2
DISTNAME =	drupal-5.12
PKGNAME=	${DISTNAME}p0
@


1.11
log
@security fixes in core.

allows jquery_update to work more generally (I had broken it slightly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/08/19 23:44:48 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
@


1.10
log
@security update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/07/26 10:34:01 espie Exp $
d5 1
a5 1
DISTNAME =	drupal-5.10
@


1.9
log
@minor update to 5.9 (session fix was missed was 5.8)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/07/24 09:28:40 bernd Exp $
d5 1
a5 1
DISTNAME =	drupal-5.9
@


1.8
log
@Fix setup instructions. Noticed by Wim, fixed by me.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/07/09 23:40:29 espie Exp $
d5 2
a6 2
DISTNAME =	drupal-5.8
PKGNAME=	${DISTNAME}p0
@


1.7
log
@DRUPAL-SA-2008-044

prevents some risks that can occur if you install some third party modules,
or have very malicious users with high privileges.

- deletion of translated terms under cross site requests.
- session fixation attacks after installing 3rd party modules like workgroup
NG.

(other vulnerabilities are Drupal6 only).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/05/03 18:16:25 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
@


1.6
log
@tweak MESSAGE a little
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/04/09 14:32:22 naddy Exp $
d5 2
a6 2
DISTNAME =	drupal-5.7
PKGNAME=	${DISTNAME}p3
@


1.5
log
@missing PREFIX, ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/03/16 10:15:28 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.4
log
@make DRUPAL_OWNER/DRUPAL_GROUP variables.
Create DRUPAL_MODS in core module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/03/15 09:36:48 espie Exp $
d27 2
a28 3
		${INSTALL_DATA_DIR} ${PREFIX}/${DRUPAL_ROOT}/sites/all/modules
		${INSTALL_DATA_DIR} ${PREFIX}/${DRUPAL_ROOT}/sites/all/themes
		${INSTALL_DATA_DIR} ${DRUPAL_MODS}
@


1.3
log
@a few tweaks to core:
- allow autogen passwords for new users
- put the names of roles more often on the rights page.
- extra hook for jquery_update, to avoid having to overwrite jquery
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/02/24 15:48:25 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d29 1
@


1.2
log
@put stuff in the right location, namely, not with core.

PEOPLE WHO TESTED drupal BEFORE:
You *must* disable extra modules and themes from a working drupal install
before the update, and reenable them afterwards.

If you forgot to,
- ln all the stuff in sites/all/modules and sites/all/themes to modules and themes
- check your site runs again, disable extra stuff
- remove the links and re-enable stuff.

okay naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2008/02/16 16:49:10 espie Exp $
d6 2
a7 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@finish importing, cvs ignores `core' on import, sigh...
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d26 2
@

