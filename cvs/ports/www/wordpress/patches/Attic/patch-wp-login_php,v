head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2009.08.31.23.05.57;	author merdely;	state dead;
branches;
next	1.1;

1.1
date	2009.08.11.23.43.17;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 2.8.4.
Remove patch that was included in 2.8.4.
Remove pre-configure target that searched for *.orig files.

ok sthen@@, martynas@@
@
text
@$OpenBSD: patch-wp-login_php,v 1.1 2009/08/11 23:43:17 martynas Exp $
--- wp-login.php.orig	Thu Jun  4 01:15:22 2009
+++ wp-login.php	Tue Aug 11 14:20:43 2009
@@@@ -187,7 +187,7 @@@@ function reset_password($key) {
 
 	$key = preg_replace('/[^a-z0-9]/i', '', $key);
 
-	if ( empty( $key ) )
+	if ( empty( $key ) || is_array( $key ) )
 		return new WP_Error('invalid_key', __('Invalid key'));
 
 	$user = $wpdb->get_row($wpdb->prepare("SELECT * FROM $wpdb->users WHERE user_activation_key = %s", $key));
@


1.1
log
@fix remote admin reset password vuln.  full disclosure posted @@ seclists
tweak, ok merdely@@, sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@

