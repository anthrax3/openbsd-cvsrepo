head	1.31;
access;
symbols
	OPENBSD_6_1:1.31.0.4
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.28.0.4
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.27.0.2
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.22.0.2
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.18.0.2
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.16.0.2
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.6.0.4
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.4.0.6
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.4
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	robert200707023:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2016.03.19.23.59.15;	author naddy;	state Exp;
branches;
next	1.30;
commitid	f78UdaLw3Lb0ClLt;

1.30
date	2016.03.19.23.00.41;	author mmcc;	state Exp;
branches;
next	1.29;
commitid	x4XeT74RZ6m3UZBl;

1.29
date	2016.02.01.21.55.39;	author sthen;	state Exp;
branches;
next	1.28;
commitid	2J5vYXDnKDkPvPP4;

1.28
date	2015.06.05.06.00.23;	author robert;	state Exp;
branches;
next	1.27;
commitid	PS9YXjRm9KQkIZjT;

1.27
date	2014.11.19.01.07.52;	author brad;	state Exp;
branches;
next	1.26;
commitid	PyqsID0cjIzk1pEX;

1.26
date	2014.11.06.17.13.41;	author sthen;	state Exp;
branches;
next	1.25;
commitid	ig1O4RkSPXzTZYwZ;

1.25
date	2014.09.18.13.26.43;	author sthen;	state Exp;
branches;
next	1.24;
commitid	lyS5hEcHjTeQw5aU;

1.24
date	2014.09.16.09.07.03;	author espie;	state Exp;
branches;
next	1.23;
commitid	RMOje3pTBXZOKU4I;

1.23
date	2014.03.10.01.11.39;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2013.08.12.04.11.22;	author robert;	state Exp;
branches;
next	1.21;

1.21
date	2013.07.05.09.37.26;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.21.08.48.55;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.11.11.44.50;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2012.09.11.23.41.43;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2012.06.18.07.56.13;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.05.26.09.22.18;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.11.16.15.56.38;	author robert;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.16.12.00.09;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2011.08.21.09.26.58;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2011.07.08.22.52.23;	author robert;	state Exp;
branches;
next	1.10;

1.10
date	2011.06.16.20.24.43;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.01.16.07.58.09;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.22.08.36.55;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.11.12.35.19;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.10.17.16.22.21;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.09.02.11.57.31;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2008.03.23.21.36.20;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.01.04.17.48.38;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2007.09.15.20.38.26;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.23.18.57.07;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.23.18.57.07;	author robert;	state Exp;
branches;
next	;


desc
@@


1.31
log
@remove SHARED_ONLY from PHP ports, unused
@
text
@# $OpenBSD: Makefile,v 1.30 2016/03/19 23:00:41 mmcc Exp $

COMMENT=	fast and stable PHP opcode cacher

VERSION=	3.2.0
DISTNAME=	xcache-${VERSION}
CATEGORIES=	www
MASTER_SITES=	http://xcache.lighttpd.net/pub/Releases/${VERSION}/
REVISION=	1

HOMEPAGE=	http://xcache.lighttpd.net/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

MODULES=		lang/php

BUILD_DEPENDS+=		${MODGNU_AUTOCONF_DEPENDS} \
			devel/re2c>=0.13.4 \
			devel/gindent

WEBROOT=		${VARBASE}/www
SUBST_VARS=		WEBROOT

LIBTOOL_FLAGS=		--tag=disable-static
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--enable-xcache
CONFIGURE_ENV=		AUTOCONF_VERSION=${AUTOCONF_VERSION}

DESTDIRNAME=	INSTALL_ROOT

NO_TEST=	Yes

FLAVORS=	constant coverager
FLAVOR?=

.if ${FLAVOR:Mconstant}
CONFIGURE_ARGS+=	--enable-xcache-constant
.endif

.if ${FLAVOR:Mcoverager}
CONFIGURE_ARGS+=	--enable-xcache-coverager
.endif

MODPHP_DO_PHPIZE=	Yes
MODPHP_DO_SAMPLE=	xcache

post-extract:
	@@ln -sf ${LOCALBASE}/bin/gindent ${WRKDIR}/bin/indent

post-install:
	${INSTALL_DATA_DIR} ${WRKINST}${WEBROOT}/xcache
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/php-${MODPHP_VERSION}
	cd ${WRKSRC}/htdocs && cp -R * ${WRKINST}${WEBROOT}/xcache
	chown -R ${SHAREOWN}:${SHAREGRP} ${WRKINST}${WEBROOT}/xcache/*
	find ${WRKINST}${WEBROOT}/xcache -type f -print0 | \
		xargs -0 chmod ${SHAREMODE}
	${INSTALL_DATA} ${WRKSRC}/xcache.ini \
		${PREFIX}/share/examples/php-${MODPHP_VERSION}

.include <bsd.port.mk>
@


1.30
log
@remove assignment of MESSAGE to the default value
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.29 2016/02/01 21:55:39 sthen Exp $

SHARED_ONLY=	Yes
@


1.29
log
@Bump pecl-* and a couple of other ports which have now lost their
MESSAGE/UNMESSAGE. Add @@extra lines in place of UNMESSAGE. Docs about
activating these have been rolled into the general PHP pkg-readmes file.
OK/feedback aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/06/05 06:00:23 robert Exp $
a50 1
MESSAGE=		${PKGDIR}/MESSAGE
@


1.28
log
@bump revision due to the change of the default php version to 5.6
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/11/19 01:07:52 brad Exp $
d11 1
a11 1
REVISION=	0
@


1.27
log
@Update to XCache 3.2.0.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/11/06 17:13:41 sthen Exp $
d11 1
@


1.26
log
@bump REVISION for php version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/09/18 13:26:43 sthen Exp $
d7 1
a7 2
VERSION=	3.1.0
REVISION=	1
@


1.25
log
@don't chmod directories 444, it worked when pkg_create was run as root, but
fails in a FAKE_AS_ROOT=No world. remove FAKE_AS_ROOT=Yes. ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/09/16 09:07:03 espie Exp $
d8 1
a8 1
REVISION=	0
@


1.24
log
@explicitly mark the few ports that don't build with FAKE_AS_ROOT=No
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/03/10 01:11:39 brad Exp $
d8 1
a11 1
FAKE_AS_ROOT =	Yes
d61 2
a62 1
	chmod -R ${SHAREMODE} ${WRKINST}${WEBROOT}/xcache/*
@


1.23
log
@Update to XCache 3.1.0.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/08/12 04:11:22 robert Exp $
d11 1
@


1.22
log
@bump REVISION due to the php update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/07/05 09:37:26 jasper Exp $
d7 1
a7 2
VERSION=	2.0.1
REVISION=	0
a18 2
AUTOCONF_VERSION=	2.59

d37 1
a37 1
FLAVORS=	coverager
d40 4
a56 1
	${INSTALL_DATA_DIR} ${WRKINST}${WEBROOT}/xcache/admin
d58 3
a60 1
	cd ${WRKSRC}/admin && ${INSTALL_DATA} * ${WRKINST}${WEBROOT}/xcache/admin
a62 5

.if ${FLAVOR:Mcoverager}
	${INSTALL_DATA_DIR} ${WRKINST}${WEBROOT}/xcache/coverager
	cd ${WRKSRC}/coverager && ${INSTALL_DATA} * ${WRKINST}${WEBROOT}/xcache/coverager
.endif
@


1.21
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/21 08:48:55 ajacoutot Exp $
d8 1
@


1.20
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/11 11:44:50 espie Exp $
d27 1
a27 1
WEBROOT=		/var/www
@


1.19
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/02/09 14:49:53 sthen Exp $
a29 1
USE_LIBTOOL=		Yes
@


1.18
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/09/11 23:41:43 sthen Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d38 1
a38 1
NO_REGRESS=	Yes
@


1.17
log
@update to xcache 2.0.1, from Brad
- includes some segv fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/06/18 07:56:13 ajacoutot Exp $
d46 1
a46 1
.if ${FLAVOR:L:Mcoverager}
d65 1
a65 1
.if ${FLAVOR:L:Mcoverager}
@


1.16
log
@Missed bumps after my recent php module changes.

spotted by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/05/26 09:22:18 sthen Exp $
d7 1
a7 1
VERSION=	2.0.0
a8 1
REVISION=	0
d58 2
a59 2
	${INSTALL_DATA_DIR} ${WRKINST}/${WEBROOT}/xcache
	${INSTALL_DATA_DIR} ${WRKINST}/${WEBROOT}/xcache/admin
d61 1
a61 1
	cd ${WRKSRC}/admin && ${INSTALL_DATA} * ${WRKINST}/${WEBROOT}/xcache/admin
d66 2
a67 2
	${INSTALL_DATA_DIR} ${WRKINST}/${WEBROOT}/xcache/coverager
	cd ${WRKSRC}/coverager && ${INSTALL_DATA} * ${WRKINST}/${WEBROOT}/xcache/coverager
@


1.15
log
@update to xcache 2.0.0, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/11/16 15:56:38 robert Exp $
d9 1
@


1.14
log
@switch php to version 5.3 by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/16 12:00:09 espie Exp $
d7 1
a7 2
VERSION=	1.3.2
REVISION=	3
d27 2
a28 1
			devel/re2c>=0.13.4
d53 3
@


1.13
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/08/21 09:26:58 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.12
log
@Fix MESSAGE/UNMESSAGE, since the php infrastructure changes this was telling
people to adjust /usr/local/conf/php5.sample/xcache.ini rather than the correct
file. ok Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/07/08 22:52:23 robert Exp $
d8 1
a8 1
REVISION=	1
@


1.11
log
@switch to lang/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/06/16 20:24:43 sthen Exp $
d8 1
a8 1
REVISION=	0
d51 2
@


1.10
log
@bugfix update to xcache 1.3.2, from Brad, also tested by Vijay Sankar, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/01/16 07:58:09 ajacoutot Exp $
d8 1
d25 2
a27 1
			www/php5/core \
d29 3
a31 1
RUN_DEPENDS+=		www/php5/core
a38 1
PREFIX=		/var/www
d50 1
a50 2
pre-configure:
	@@cd ${WRKSRC} && ${SETENV} ${CONFIGURE_ENV} ${LOCALBASE}/bin/phpize
d53 6
a58 5
	${INSTALL_DATA_DIR} ${PREFIX}/xcache
	${INSTALL_DATA_DIR} ${PREFIX}/xcache/admin
	${INSTALL_DATA_DIR} ${PREFIX}/conf/php5.sample
	cd ${WRKSRC}/admin && ${INSTALL_DATA} * ${PREFIX}/xcache/admin
	${INSTALL_DATA} ${WRKSRC}/xcache.ini ${PREFIX}/conf/php5.sample/xcache.ini.dist
d61 2
a62 2
	${INSTALL_DATA_DIR} ${PREFIX}/xcache/coverager
	cd ${WRKSRC}/coverager && ${INSTALL_DATA} * ${PREFIX}/xcache/coverager
@


1.9
log
@Update to xcache-1.3.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/22 08:36:55 espie Exp $
d7 1
a7 1
VERSION=	1.3.1
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/11 12:35:19 sthen Exp $
d7 1
a7 1
VERSION=	1.3.0
a8 1
REVISION=	0
@


1.7
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/10/17 16:22:21 sthen Exp $
d26 3
a28 3
			::www/php5/core \
			:re2c->=0.13.4:devel/re2c
RUN_DEPENDS+=		::www/php5/core
@


1.6
log
@add Brad as maintainer, bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/09/02 11:57:31 sthen Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}p0
@


1.5
log
@update www/xcache to 1.3.0, from Stephan Rickauer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/03/23 21:36:20 sthen Exp $
d9 1
d14 2
@


1.4
log
@from Brad:
- Maintenance update of XCache, also tested by myself.

from me:
- adjust for /var/www/conf/php5 symlinks
- add re2c as BUILD_DEPENDS, configure picks it up if installed
ok brad@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/01/04 17:48:38 espie Exp $
d5 1
a5 1
COMMENT=	fast and stable PHP opcode cache
d7 1
a7 1
VERSION=	1.2.2
d24 1
a24 1
			::devel/re2c
@


1.3
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/09/15 20:38:26 merdely Exp $
d7 1
a7 1
VERSION=	1.2.1
d12 1
a12 1
HOMEPAGE=	http://trac.lighttpd.net/xcache/
d23 2
a24 1
			::www/php5/core
a49 3
	${INSTALL_DATA} ${WRKSRC}/INSTALL ${PREFIX}/xcache
	${INSTALL_DATA} ${WRKSRC}/xcache.ini ${PREFIX}/xcache

d51 1
d53 1
@


1.2
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/23 18:57:07 robert Exp $
d33 1
a33 1
FAKE_FLAGS=	INSTALL_ROOT=${WRKINST}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
COMMENT=	"fast and stable PHP opcode cache"
@


1.1.1.1
log
@import of xache-1.2.1;

XCache is a fast, stable PHP opcode cacher that has been tested and is
now running on production servers under high load.

from Brad;
@
text
@@
