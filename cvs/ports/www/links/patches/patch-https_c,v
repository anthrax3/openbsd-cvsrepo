head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.10
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.6
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.8
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.04.19.17.42.59;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.1
log
@no more RAND_egd
@
text
@$OpenBSD$
--- https.c.orig	Sat Apr 19 18:36:12 2014
+++ https.c	Sat Apr 19 18:37:12 2014
@@@@ -33,11 +33,8 @@@@ SSL *getSSL(void)
 		char f_randfile[PATH_MAX];
 
 		const char *f = RAND_file_name(f_randfile, sizeof(f_randfile));
-		if (f && RAND_egd(f)<0) {
-			/* Not an EGD, so read and write to it */
-			if (RAND_load_file(f_randfile, -1))
-				RAND_write_file(f_randfile);
-		}
+		if (RAND_load_file(f_randfile, -1))
+			RAND_write_file(f_randfile);
 		SSLeay_add_ssl_algorithms();
 		context = SSL_CTX_new(SSLv23_client_method());
 		SSL_CTX_set_options(context, SSL_OP_ALL);
@
