head	1.8;
access;
symbols
	OPENBSD_6_0:1.7.0.2
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.6.0.28
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.30
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.26
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.24
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.22
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.20
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.18
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.16
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.14
	OPENBSD_5_0:1.6.0.12
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.10
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.8
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.6
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.4
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.4.0.10
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.8
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.6
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2017.03.24.15.21.46;	author okan;	state dead;
branches;
next	1.7;
commitid	nWqCMAZ7YaZlqVmp;

1.7
date	2016.04.28.15.34.14;	author sthen;	state Exp;
branches;
next	1.6;
commitid	JG8H3j1Ikempr0RH;

1.6
date	2008.11.18.20.00.09;	author okan;	state Exp;
branches;
next	1.5;

1.5
date	2008.11.11.19.58.15;	author okan;	state Exp;
branches;
next	1.4;

1.4
date	2006.05.15.17.08.43;	author fkr;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.24.17.56.19;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2005.10.28.12.48.49;	author markus;	state Exp;
branches;
next	1.1;

1.1
date	2005.06.04.11.56.50;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Unhook games/sudoku-solver and www/clearsilver; clearsilver being abandoned
upstream and Marc Balmer (original auther) agrees with removing the only
dependent port, sudoku-solver.

ok many and sthen@@
@
text
@--- cs/csparse.c.orig	Fri Oct 20 00:26:11 2006
+++ cs/csparse.c	Thu Apr 28 16:33:48 2016
@@@@ -1832,6 +1832,7 @@@@ static NEOERR *eval_expr_string(CSPARSE *parse, CSARG 
 {
   char *s1, *s2;
   int out;
+  size_t need;
 
   result->op_type = CS_TYPE_NUM;
   s1 = arg_eval (parse, arg1);
@@@@ -1906,11 +1907,12 @@@@ static NEOERR *eval_expr_string(CSPARSE *parse, CSARG 
       case CS_OP_ADD:
 	result->op_type = CS_TYPE_STRING;
 	result->alloc = 1;
-	result->s = (char *) calloc ((strlen(s1) + strlen(s2) + 1), sizeof(char));
+	need = strlen(s1) + strlen(s2) + 1;
+	result->s = (char *) calloc (need, sizeof(char));
 	if (result->s == NULL)
 	  return nerr_raise (NERR_NOMEM, "Unable to allocate memory to concatenate strings in expression: %s + %s", s1, s2);
-	strcpy(result->s, s1);
-	strcat(result->s, s2);
+	strlcpy(result->s, s1, need);
+	strlcat(result->s, s2, need);
 	break;
       default:
 	ne_warn ("Unsupported op %s in eval_expr_string", expand_token_type(op, 1));
@


1.7
log
@regen; no real changes
@
text
@@


1.6
log
@backout 0.10.5 update due incompatible license (apache 1 -> apache 2) change

requested by mbalmer@@
@
text
@d1 3
a3 3
--- cs/csparse.c.orig	Fri Feb  3 03:17:41 2006
+++ cs/csparse.c	Mon May  8 16:54:19 2006
@@@@ -1706,6 +1706,7 @@@@ static NEOERR *eval_expr_string(CSPARSE 
d11 1
a11 1
@@@@ -1780,11 +1781,12 @@@@ static NEOERR *eval_expr_string(CSPARSE 
@


1.5
log
@- update to 0.10.5
- more str* and 64bit fixes
- update license marker

ok markus (MAINTAINER)
@
text
@d1 3
a3 3
--- cs/csparse.c.orig	Wed Jul 11 22:37:34 2007
+++ cs/csparse.c	Sun Nov  9 16:28:06 2008
@@@@ -1948,6 +1948,7 @@@@ static NEOERR *eval_expr_string(CSPARSE *parse, CSARG 
d11 1
a11 1
@@@@ -2022,11 +2023,12 @@@@ static NEOERR *eval_expr_string(CSPARSE *parse, CSARG 
a26 9
@@@@ -3717,7 +3719,7 @@@@ static NEOERR * _builtin_str_crc(CSPARSE *parse, CS_FU
   if (val.op_type & (CS_TYPE_VAR | CS_TYPE_STRING))
   {
     char *s = arg_eval(parse, &val);
-    if (s) result->n = ne_crc((unsigned char *)s, strlen(s));
+    if (s) result->n = (INT32) ne_crc((unsigned char *)s, strlen(s));
   }
   if (val.alloc) free(val.s);
   return STATUS_OK;
@


1.4
log
@update to version 0.10.3
ok mbalmer@@, markus@@ (maintainer)
@
text
@d1 3
a3 3
--- cs/csparse.c.orig	Fri Feb  3 03:17:41 2006
+++ cs/csparse.c	Mon May  8 16:54:19 2006
@@@@ -1706,6 +1706,7 @@@@ static NEOERR *eval_expr_string(CSPARSE 
d11 1
a11 1
@@@@ -1780,11 +1781,12 @@@@ static NEOERR *eval_expr_string(CSPARSE 
d27 9
@


1.3
log
@this part was mistakenly removed, it is still needed on sparc64

ok markus
@
text
@d1 3
a3 4
$OpenBSD: patch-cs_csparse_c,v 1.2 2005/10/28 12:48:49 markus Exp $
--- cs/csparse.c.orig	Thu Sep 30 02:46:33 2004
+++ cs/csparse.c	Wed Nov 23 20:43:33 2005
@@@@ -1667,6 +1667,7 @@@@ static NEOERR *eval_expr_string(CSPARSE 
d11 1
a11 1
@@@@ -1741,11 +1742,12 @@@@ static NEOERR *eval_expr_string(CSPARSE 
a26 13
@@@@ -3359,9 +3361,9 @@@@ static NEOERR * _builtin_str_slice (CSPA
   NEOERR *err;
   char *s = NULL;
   char *slice;
-  int b = 0;
-  int e = 0;
-  int len;
+  long int b = 0;
+  long int e = 0;
+  size_t len;
 
   result->op_type = CS_TYPE_STRING;
   result->s = "";
@


1.2
log
@fix compiler warnings and replace strcpy & friends, ok fgs, sturm
@
text
@d1 3
a3 3
$OpenBSD: patch-cs_csparse_c,v 1.1 2005/06/04 11:56:50 sturm Exp $
--- cs/csparse.c.orig	Tue Oct 25 10:52:42 2005
+++ cs/csparse.c	Tue Oct 25 10:55:12 2005
d28 13
@


1.1
log
@fix build on 64bit machines
@
text
@d1 8
a8 13
$OpenBSD$
--- cs/csparse.c.orig	Wed Jun  1 23:46:41 2005
+++ cs/csparse.c	Wed Jun  1 23:45:35 2005
@@@@ -3359,9 +3359,9 @@@@ static NEOERR * _builtin_str_slice (CSPA
   NEOERR *err;
   char *s = NULL;
   char *slice;
-  int b = 0;
-  int e = 0;
-  int len;
+  long int b = 0;
+  long int e = 0;
+  size_t len;
d10 18
a27 2
   result->op_type = CS_TYPE_STRING;
   result->s = "";
@

