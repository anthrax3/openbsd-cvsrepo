head	1.33;
access;
symbols
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.28.0.6
	OPENBSD_5_9_BASE:1.28
	OPENBSD_5_8:1.28.0.8
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.28.0.4
	OPENBSD_5_7_BASE:1.28
	OPENBSD_5_6:1.28.0.2
	OPENBSD_5_6_BASE:1.28
	OPENBSD_5_5:1.26.0.4
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.25.0.4
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.2
	OPENBSD_5_0:1.22.0.2
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.17.0.6
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.17.0.4
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.17.0.2
	OPENBSD_4_6_BASE:1.17
	OPENBSD_4_5:1.16.0.2
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.13.0.4
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.2
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.2
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	sturm_20050525:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2017.02.06.20.28.32;	author sthen;	state Exp;
branches;
next	1.32;
commitid	o4jH3JaEdON0pzgr;

1.32
date	2017.02.04.14.03.41;	author sthen;	state Exp;
branches;
next	1.31;
commitid	lBPmGp7G3xvG20Li;

1.31
date	2016.04.28.15.59.02;	author sthen;	state Exp;
branches;
next	1.30;
commitid	AkyzY4ag5wKNNSSF;

1.30
date	2016.04.28.15.57.19;	author sthen;	state Exp;
branches;
next	1.29;
commitid	Yk0CD3RLbaChCNSi;

1.29
date	2016.03.20.16.12.26;	author naddy;	state Exp;
branches;
next	1.28;
commitid	guiZq8cnNbVyyHzx;

1.28
date	2014.06.14.10.34.45;	author sthen;	state Exp;
branches;
next	1.27;
commitid	HiKZ10xJk2o55vyF;

1.27
date	2014.03.13.17.33.27;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.11.11.44.41;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2012.06.20.14.45.23;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2011.09.16.12.00.06;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.05.17.12.35;	author okan;	state Exp;
branches;
next	1.22;

1.22
date	2011.06.15.23.33.00;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2011.06.08.18.15.29;	author rpointel;	state Exp;
branches;
next	1.20;

1.20
date	2011.06.06.19.46.16;	author rpointel;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.19.08.02.53;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.08.30.22.15.24;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2009.03.16.22.20.02;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2008.11.18.20.00.09;	author okan;	state Exp;
branches;
next	1.15;

1.15
date	2008.11.11.19.58.15;	author okan;	state Exp;
branches;
next	1.14;

1.14
date	2008.10.02.20.32.19;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2007.10.08.08.22.43;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2007.09.15.20.38.21;	author merdely;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.18.09.13.59;	author fkr;	state Exp;
branches;
next	1.10;

1.10
date	2007.02.14.17.42.32;	author bernd;	state Exp;
branches;
next	1.9;

1.9
date	2006.06.05.18.30.20;	author alek;	state Exp;
branches;
next	1.8;

1.8
date	2006.06.04.10.04.34;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2006.05.15.17.08.43;	author fkr;	state Exp;
branches;
next	1.6;

1.6
date	2005.11.24.17.56.19;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2005.10.28.12.48.49;	author markus;	state Exp;
branches;
next	1.4;

1.4
date	2005.10.11.03.59.24;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2005.07.23.17.08.13;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.04.11.56.50;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.26.01.33.38;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.26.01.33.38;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.33
log
@Add perl to WANTLIB, second batch. This used to be done automatically but
since SHARED_ONLY support was removed across the ports tree the perl module
no longer adds it, so it must be done manually for any perl ports that
provide perl shared-library modules (i.e. libdata/perl5/site_perl/$ARCH/*.so)
and you must not remove them from WANTLIB even if they show as "Extra".
@
text
@# $OpenBSD: Makefile,v 1.32 2017/02/04 14:03:41 sthen Exp $

COMMENT-main=	fast, powerful, and language-neutral HTML template system
COMMENT-perl=	perl bindings for clearsilver
COMMENT-python=	python bindings for clearsilver

V=		0.10.4
DISTNAME=	clearsilver-${V}
EPOCH=		0
REVISION=	12
REVISION-perl=	13

PKGNAME-main=	${DISTNAME}
PKGNAME-perl=	clearsilver-perl-${V}
PKGNAME-python=	clearsilver-python-${V}

CATEGORIES=	www net

HOMEPAGE=       http://www.clearsilver.net/
MASTER_SITES=   ${HOMEPAGE}/downloads/

# Apache 1
PERMIT_PACKAGE_CDROM=	Yes

MULTI_PACKAGES=	-main -perl -python
MODULES=	lang/python

WANTLIB-main=	c pthread z
RUN_DEPENDS-main=

WANTLIB-perl=	pthread z perl # uses perl ABI
RUN_DEPENDS-perl= ${PKGPATH} 

WANTLIB-python=	${MODPY_WANTLIB} pthread z
RUN_DEPENDS-python= ${MODPY_RUN_DEPENDS} ${PKGPATH}

USE_GMAKE=	Yes

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS= --disable-csharp \
		--disable-java \
		--disable-ruby \
		--disable-apache \
		--with-python=${MODPY_BIN} \
		LDFLAGS="-L${LOCALBASE}/lib"

pre-configure:
	@@perl -pi -e 's|%%WRKSRC%%|${WRKSRC}|g' ${WRKSRC}/python/setup.py

do-test:
	@@cd ${WRKSRC}/perl && ${MAKE_PROGRAM} test

# can remove the /*/ line and -f after perl 5.24 update.
post-install:
	rm -f ${PREFIX}/libdata/perl5/${MACHINE_ARCH}-openbsd/perllocal.pod \
		${PREFIX}/libdata/perl5/${MACHINE_ARCH}-openbsd/*/perllocal.pod
	find -d ${PREFIX}/libdata/perl5/${MACHINE_ARCH}-openbsd -type d | xargs rmdir

.include <bsd.port.mk>
@


1.32
log
@preemptive fix for perl update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/04/28 15:59:02 sthen Exp $
d11 1
d31 1
a31 1
WANTLIB-perl=	pthread z
@


1.31
log
@drop okan as maintainer: "oh, sure - remove me"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/04/28 15:57:19 sthen Exp $
d52 1
d54 2
a55 1
	rm ${PREFIX}/libdata/perl5/${MACHINE_ARCH}-openbsd/*/perllocal.pod
@


1.30
log
@drop clearsilver's apache1 module, ok okan
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/03/20 16:12:26 naddy Exp $
d10 1
a10 1
REVISION=	11
a19 2

MAINTAINER=	Okan Demirmen <okan@@openbsd.org>
@


1.29
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/06/14 10:34:45 sthen Exp $
d10 1
a10 1
REVISION=	10
a25 2
BUILD_DEPENDS=		www/apache-httpd-openbsd

d44 1
a44 1
		--with-apache=${LOCALBASE} \
d53 4
@


1.28
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.27 2014/03/13 17:33:27 sthen Exp $

SHARED_ONLY=	Yes
@


1.27
log
@handle httpd move, originally from florian@@, tweaks by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/03/11 11:44:41 espie Exp $
d12 1
a12 1
REVISION=	9
@


1.26
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/06/20 14:45:23 sthen Exp $
d12 2
a13 2
REVISION=	7
REVISION-perl=	8
d28 2
d48 1
@


1.25
log
@don't install perllocal.pod, ok okan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/09/16 12:00:06 espie Exp $
a26 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d52 1
a52 1
do-regress:
@


1.24
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/09/05 17:12:35 okan Exp $
d13 1
@


1.23
log
@switch from flavors to multi-packages (-main, -perl, -python), triggered
by a side-note from sthen.  take maintainership.

feedback and ok sthen, ok markus (previous maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/06/15 23:33:00 sthen Exp $
d12 1
a12 1
REVISION=	6
@


1.22
log
@move WANTLIB+=${MODPY_WANTLIB} within the .if ${FLAVOR:L:Mpython} block;
no package change as the python module is only included if the python
flavour is selected (and unless that's included, MODPY_WANTLIB is blank),
but it's clearer this way.

side-note, python bindings should probably be split into a subpackage
sometime, there seems to be no need to have a separate flavour for this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/06/08 18:15:29 rpointel Exp $
d5 3
a7 1
COMMENT=	fast, powerful, and language-neutral HTML template system
d9 2
a10 1
DISTNAME=	clearsilver-0.10.4
d12 5
a16 1
REVISION=	5
d20 1
d22 1
a22 1
MAINTAINER=	Markus Friedl <markus@@openbsd.org>
d30 8
a37 1
WANTLIB=	c pthread z
d39 2
a40 1
MASTER_SITES=   ${HOMEPAGE}/downloads/
d48 1
a49 12
USE_GROFF =	Yes

FLAVORS+=	python
FLAVOR?=

.if ${FLAVOR:L:Mpython}
MODULES=		lang/python
CONFIGURE_ARGS+=	--with-python=${MODPY_BIN}
WANTLIB+=		${MODPY_WANTLIB}
.else
CONFIGURE_ARGS+=	--disable-python
.endif
@


1.21
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/06/06 19:46:16 rpointel Exp $
d21 2
a22 1
WANTLIB=	c pthread z ${MODPY_WANTLIB}
d41 1
@


1.20
log
@Repair clearsilver after recent commits of Python.
Ok markus@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/19 08:02:53 espie Exp $
d9 1
a9 1
REVISION=	4
@


1.19
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/08/30 22:15:24 sthen Exp $
d9 1
a9 1
REVISION=	3
d21 1
a21 1
WANTLIB=	c pthread z
d30 2
a31 1
		--disable-ruby
@


1.18
log
@python bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/03/16 22:20:02 kili Exp $
d31 1
@


1.17
log
@
Bump for python deps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/11/18 20:00:09 okan Exp $
d8 2
a9 1
PKGNAME=	${DISTNAME}p2v0
@


1.16
log
@backout 0.10.5 update due incompatible license (apache 1 -> apache 2) change

requested by mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/10/02 20:32:19 sthen Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1v0
@


1.15
log
@- update to 0.10.5
- more str* and 64bit fixes
- update license marker

ok markus (MAINTAINER)
@
text
@d7 2
a8 1
DISTNAME=	clearsilver-0.10.5
d15 1
a15 1
# Apache 2
d40 3
@


1.14
log
@bump packages with Perl .so modules; the old ones don't work
with new perl and the package signature doesn't change, so we
have to do this ourselves to make pkg_add updates work.

ok simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/10/08 08:22:43 steven Exp $
d7 1
a7 2
DISTNAME=	clearsilver-0.10.4
PKGNAME=	${DISTNAME}p1
d14 1
a14 1
# Apache 1
a38 3

pre-configure:
	@@perl -pi -e 's|%%WRKSRC%%|${WRKSRC}|g' ${WRKSRC}/python/setup.py
@


1.13
log
@bump PKGNAME after python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/09/15 20:38:21 merdely Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.12
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/05/18 09:13:59 fkr Exp $
d8 1
@


1.11
log
@update to version 0.10.4
ok markus@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/02/14 17:42:32 bernd Exp $
d5 1
a5 1
COMMENT=	"fast, powerful, and language-neutral HTML template system"
@


1.10
log
@Unbreak perl module by solving issues with pthread linking.

Much help from sturm@@, thanks!

ok sturm@@, espie@@, fkr@@, markus@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/06/05 18:30:20 alek Exp $
d7 1
a7 2
DISTNAME=	clearsilver-0.10.3
PKGNAME=	${DISTNAME}p1
@


1.9
log
@Use MODPY_BIN were applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/06/04 10:04:34 steven Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
d20 1
a20 1
WANTLIB=	c z
@


1.8
log
@use MODULES=lang/python (which switches it to 2.4), and bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/05/15 17:08:43 fkr Exp $
d36 1
a36 1
CONFIGURE_ARGS+=	--with-python=${LOCALBASE}/bin/python${MODPY_VERSION}
@


1.7
log
@update to version 0.10.3
ok mbalmer@@, markus@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/11/24 17:56:19 sturm Exp $
d8 1
d35 1
a35 1
MODPY_VERSION?=	2.3
a36 3
BUILD_DEPENDS+=		:python-${MODPY_VERSION}*:lang/python/${MODPY_VERSION}
RUN_DEPENDS+=		:python-${MODPY_VERSION}*:lang/python/${MODPY_VERSION}
SUBST_VARS=		MODPY_VERSION
@


1.6
log
@this part was mistakenly removed, it is still needed on sparc64

ok markus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/10/28 12:48:49 markus Exp $
d7 1
a7 2
DISTNAME=	clearsilver-0.9.14
PKGNAME=	${DISTNAME}p4
@


1.5
log
@fix compiler warnings and replace strcpy & friends, ok fgs, sturm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/10/11 03:59:24 fgsch Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
@


1.4
log
@make this python2.4 friendly by allowing mk.conf to overwritte the
desired python version; maintainer and sturm@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/07/23 17:08:13 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
@


1.3
log
@add python FLAVOR

from Ben Lovett <ben at tilderoot.com>, ok markus@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/06/04 11:56:50 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
d35 5
a39 3
CONFIGURE_ARGS+=	--with-python=${LOCALBASE}/bin/python
BUILD_DEPENDS+=		:python-2.3*:lang/python/2.3
RUN_DEPENDS+=		:python-2.3*:lang/python/2.3
@


1.2
log
@fix build on 64bit machines
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/05/26 01:33:38 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
a28 1
		--disable-python \
d30 14
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2004/12/11 13:29:22 alek Exp $
d8 1
@


1.1.1.1
log
@Initial import of clearsilver 0.9.14

Clearsilver is a fast, powerful, and language-neutral HTML template
system. In both static content sites and dynamic HTML applications,
it provides a separation between presentation code and application
logic which makes working with your project easier.

from markus@@
@
text
@@
