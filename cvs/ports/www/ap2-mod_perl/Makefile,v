head	1.39;
access;
symbols
	OPENBSD_6_0:1.37.0.2
	OPENBSD_6_0_BASE:1.37
	OPENBSD_5_9:1.33.0.2
	OPENBSD_5_9_BASE:1.33
	OPENBSD_5_8:1.32.0.4
	OPENBSD_5_8_BASE:1.32
	OPENBSD_5_7:1.26.0.2
	OPENBSD_5_7_BASE:1.26
	OPENBSD_5_6:1.25.0.2
	OPENBSD_5_6_BASE:1.25
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.20.0.4
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.20.0.2
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.6
	OPENBSD_5_0:1.19.0.4
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.14.0.6
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.14.0.4
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.2
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.13.0.2
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	dlg20070110:1.1.1.1
	dlg:1.1.1;
locks; strict;
comment	@# @;


1.39
date	2016.10.12.11.05.05;	author sthen;	state Exp;
branches;
next	1.38;
commitid	yjrxB3leyglrNIbx;

1.38
date	2016.09.13.19.15.03;	author naddy;	state Exp;
branches;
next	1.37;
commitid	jaf8mxJOKaqyTZtO;

1.37
date	2016.04.29.08.21.03;	author sthen;	state Exp;
branches;
next	1.36;
commitid	SMJBqdjuvttHUzIJ;

1.36
date	2016.04.29.08.20.36;	author sthen;	state Exp;
branches;
next	1.35;
commitid	cj9DiHjCyHSemkrs;

1.35
date	2016.04.28.16.41.22;	author sthen;	state Exp;
branches;
next	1.34;
commitid	dkAUZwX3XAaZfGaA;

1.34
date	2016.03.20.19.57.13;	author naddy;	state Exp;
branches;
next	1.33;
commitid	WXJcpbKc0PauxEav;

1.33
date	2015.11.24.09.11.06;	author jasper;	state Exp;
branches;
next	1.32;
commitid	x9aAifyKiYiivEom;

1.32
date	2015.07.17.23.58.43;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	oY2rvgPTcr4esxta;

1.31
date	2015.07.16.23.57.28;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	tdKVYJOlplb8bzTQ;

1.30
date	2015.06.17.06.16.51;	author bentley;	state Exp;
branches;
next	1.29;
commitid	v2zUgHSPTVmz35aA;

1.29
date	2015.05.16.10.42.52;	author sthen;	state Exp;
branches;
next	1.28;
commitid	qDsLo0K8nbte36MW;

1.28
date	2015.05.15.10.56.34;	author jasper;	state Exp;
branches;
next	1.27;
commitid	iwJGTARdeCvRP5cZ;

1.27
date	2015.05.15.08.08.36;	author stsp;	state Exp;
branches;
next	1.26;
commitid	HTzdqaJnU6cFXPFe;

1.26
date	2014.11.05.11.43.59;	author sthen;	state Exp;
branches;
next	1.25;
commitid	RB64hioD1zIM5GcO;

1.25
date	2014.06.14.10.34.45;	author sthen;	state Exp;
branches;
next	1.24;
commitid	HiKZ10xJk2o55vyF;

1.24
date	2014.03.21.17.26.04;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2013.07.19.18.01.53;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.22.21.49.43;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2013.03.11.11.44.41;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2012.04.28.09.53.07;	author stsp;	state Exp;
branches;
next	1.19;

1.19
date	2010.12.03.11.46.50;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.22.08.36.47;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.11.12.35.09;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.19.08.02.53;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.09.24.15.37.42;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2009.04.09.18.37.35;	author simon;	state Exp;
branches;
next	1.13;

1.13
date	2008.10.02.20.34.13;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2008.08.30.08.25.48;	author simon;	state Exp;
branches;
next	1.11;

1.11
date	2008.05.05.21.21.43;	author simon;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.15.20.38.20;	author merdely;	state Exp;
branches;
next	1.9;

1.9
date	2007.06.09.17.55.01;	author simon;	state Exp;
branches;
next	1.8;

1.8
date	2007.06.09.16.02.04;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2007.01.29.16.31.58;	author simon;	state Exp;
branches;
next	1.6;

1.6
date	2007.01.10.19.21.47;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.10.15.09.13;	author bernd;	state Exp;
branches;
next	1.4;

1.4
date	2007.01.10.14.27.11;	author dlg;	state Exp;
branches;
next	1.3;

1.3
date	2007.01.10.14.24.35;	author dlg;	state Exp;
branches;
next	1.2;

1.2
date	2007.01.10.14.22.00;	author dlg;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.10.13.51.50;	author dlg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.10.13.51.50;	author dlg;	state Exp;
branches;
next	;


desc
@@


1.39
log
@add patches needed for perl 5.22+, from upstream repo via afresh1@@
@
text
@# $OpenBSD: Makefile,v 1.38 2016/09/13 19:15:03 naddy Exp $

COMMENT=	module that embeds a Perl interpreter into Apache2

DISTNAME=	mod_perl-2.0.9
REVISION=	2
PKGNAME=	ap2-${DISTNAME:S/-rc/rc/}
CATEGORIES=	www net

MODULES=	cpan
MASTER_SITES=	https://distfiles.nl/ \
		${MASTER_SITE_APACHE:=perl/}

# Apache Software License
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += apr-1 aprutil-1 c db expat iconv m perl pthread util

CONFIGURE_ARGS+=	MP_APXS=${LOCALBASE}/sbin/apxs2 \
			MP_NO_THREADS=1
LIB_DEPENDS=		converters/libiconv \
			devel/apr \
			devel/apr-util
RUN_DEPENDS=		www/apache-httpd
BUILD_DEPENDS=		${RUN_DEPENDS}

PORTHOME=		${WRKDIR}

.include <bsd.port.mk>
@


1.38
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/04/29 08:21:03 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.37
log
@missed cvs add in previous
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/04/29 08:20:36 sthen Exp $
d10 1
a10 1
MODULES=	cpan converters/libiconv
d17 1
a17 1
WANTLIB += apr-1 aprutil-1 c db expat m perl pthread util
d21 2
a22 1
LIB_DEPENDS=		devel/apr \
@


1.36
log
@p5-Apache-Test and p5-Apache-Reload were previously disabled in the
mod_perl/ap2-mod_perl builds and packaged separately, to avoid conflicts
between the two mod_perls. This isn't needed any more so move them into
the man ap2-mod_perl package, fixing a loop found by nigel@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/04/28 16:41:22 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.35
log
@update from rc to mod_perl-2.0.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/03/20 19:57:13 naddy Exp $
d6 1
d24 1
a24 3
BUILD_DEPENDS=		${RUN_DEPENDS} \
			www/p5-Apache-Test>=1.29 \
			www/p5-Apache-Reload
a26 4

# avoid conflicts
post-extract:
	rm -r ${WRKSRC}/Apache-Test ${WRKSRC}/Apache-Reload/lib/Apache
@


1.34
log
@Remove SHARED_ONLY from all CPAN Perl ports and the cpan and perl MODULES.
Add WANTLIB+=perl and PKG_ARCH=* as appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/11/24 09:11:06 jasper Exp $
d5 1
a5 1
DISTNAME=	mod_perl-2.0.9-rc1
a6 1
REVISION=	3
@


1.33
log
@switch distfiles.nl to SSL, setup with security/letsencrypt/client
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/07/17 23:58:43 ajacoutot Exp $
a17 2

SHARED_ONLY=		Yes
@


1.32
log
@Bump after apache-http subpackaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/07/16 23:57:28 ajacoutot Exp $
d11 1
a11 1
MASTER_SITES=	http://distfiles.nl/ \
@


1.31
log
@Remove the perl bullshit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/06/17 06:16:51 bentley Exp $
d7 1
a7 1
REVISION=	1
@


1.30
log
@Remove MAINTAINER per request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/05/16 10:42:52 sthen Exp $
d7 1
a7 1
REVISION=	0
@


1.29
log
@fix PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/05/15 10:56:34 jasper Exp $
d7 1
a12 2

MAINTAINER=	Srebrenko Sehic <haver@@insecure.dk>
@


1.28
log
@mod_perl-2.0.9-rc1 vanished from the mirrors; mirror a copy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/05/15 08:08:36 stsp Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}
@


1.27
log
@Update ap2-mod_perl to 2.0.9-rc1. Using an RC since other available
releases don't support Apache HTTPD 2.4.
with help from dcoppa@@, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/11/05 11:43:59 sthen Exp $
d10 2
a11 1
MASTER_SITES=	${MASTER_SITE_APACHE:=perl/}
@


1.26
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/06/14 10:34:45 sthen Exp $
d5 1
a5 1
DISTNAME=	mod_perl-2.0.8
a7 1
REVISION=	1
d21 2
a22 1
CONFIGURE_ARGS+=	MP_APXS=${LOCALBASE}/sbin/apxs2
d27 2
a28 1
			www/p5-Apache-Test>=1.29
@


1.25
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/03/21 17:26:04 jasper Exp $
d8 1
a8 1
REVISION=	0
a9 1
WANTLIB=	c m perl util db expat apr-1 aprutil-1
d17 2
@


1.24
log
@update to mod_perl-2.0.8 and adjust MASTER_SITES

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/07/19 18:01:53 jasper Exp $
d8 1
@


1.23
log
@don't install the apache1 Apache::Reload module to resolve a conflict with
p5-Apache-Reload. ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/22 21:49:43 sthen Exp $
d5 1
a5 1
DISTNAME=	mod_perl-2.0.7
a6 1
REVISION=	0
d11 1
a11 2
MASTER_SITES=	http://perl.apache.org/dist/ \
		${MASTER_SITE_PERL_CPAN:=Apache/}
@


1.22
log
@update to ap2-mod_perl-2.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/03/11 11:44:41 espie Exp $
d7 1
d33 1
a33 1
	@@rm -rf ${WRKSRC}/Apache-Test
@


1.21
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/04/28 09:53:07 stsp Exp $
d5 1
a5 1
DISTNAME=	mod_perl-2.0.4
a6 1
REVISION=	5
a21 1
USE_GROFF =		Yes
@


1.20
log
@Needs bump because of devel/apr update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/12/03 11:46:50 ajacoutot Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.19
log
@Bump after recent cpan.port.mk change.
ok jasper@@
(final commit)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/11/22 08:36:47 espie Exp $
d7 1
a7 1
REVISION=	4
@


1.18
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/11 12:35:09 sthen Exp $
d7 1
a7 1
REVISION=	3
@


1.17
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/19 08:02:53 espie Exp $
d27 3
a29 3
LIB_DEPENDS=		::devel/apr \
			::devel/apr-util
RUN_DEPENDS=		::www/apache-httpd
d31 1
a31 1
			:p5-Apache-Test->=1.29:www/p5-Apache-Test
@


1.16
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/09/24 15:37:42 sthen Exp $
d10 1
a10 1
WANTLIB=	c m perl util db expat
d26 3
a28 3
USE_GROFF =	Yes
LIB_DEPENDS=		apr-1::devel/apr \
			aprutil-1::devel/apr-util
@


1.15
log
@bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/04/09 18:37:35 simon Exp $
d26 1
@


1.14
log
@since apache-httpd's LIB_DEPENDS changed and ap2-mod_perl used it
indirectly via WANTLIB instead of pulling it in itself, we now have to
do so; p++

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/10/02 20:34:13 sthen Exp $
d6 2
a7 1
PKGNAME=	ap2-${DISTNAME}p2
@


1.13
log
@bump SHARED_ONLY ports so they get updated and work with the new perl
pointed out by simon@@ (I missed it since it's not linked to build)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/08/30 08:25:48 simon Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p1
d9 1
a9 1
WANTLIB=	c m perl util apr-1 aprutil-1 db expat
d25 2
@


1.12
log
@remove patch for an issue that was fixed with the last release

pointed out by djm@@, confirmed by maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/05/05 21:21:43 simon Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p0
@


1.11
log
@update to version 2.0.4 and enable tests

help by Sergey Skvortsov
confirmed by maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/15 20:38:20 merdely Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}
@


1.10
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/06/09 17:55:01 simon Exp $
d5 2
a6 2
DISTNAME=	mod_perl-2.0.3
PKGNAME=	ap2-${DISTNAME}p6
a21 1
NO_REGRESS=		Yes
d28 2
@


1.9
log
@prepend "_" to "bsd_size_check" so it matches an existing function

ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/06/09 16:02:04 martynas Exp $
d3 1
a3 1
COMMENT=	"module that embeds a Perl interpreter into Apache2"
@


1.8
log
@DL_GLOBAL=0x01, makes APR::* work, and regression tests of p5-libapreq2
pass; asked to fix and ok by simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/01/29 16:31:58 simon Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p5
@


1.7
log
@resolve conflict between p5-Apache-Test and ap2-mod_perl

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/01/10 19:21:47 bernd Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p4
@


1.6
log
@p5-Apache-Test and ap2-mod_perl have some conflicting manpages.
Add @@conflict markers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/01/10 15:09:13 bernd Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p3
d10 1
a10 2
MODULES=	converters/libiconv

a24 1
CONFIGURE_STYLE=	perl
d27 6
a32 1
BUILD_DEPENDS=		${RUN_DEPENDS}
@


1.5
log
@Add missing WANTLIBs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/01/10 14:27:11 dlg Exp $
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p2
@


1.4
log
@more tweaks from steven@@:

use BUILD_DEPENDS= RUN_DEPENDS, not the other way round
use SHARED_ONLY=Yes instead of the NOT_FOR_ARCHS line
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
PKGNAME=	ap2-${DISTNAME}p1
d9 2
a10 1
WANTLIB=	c m perl util
@


1.3
log
@whitespace fixes
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.2 2007/01/10 14:22:00 dlg Exp $

NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
d5 2
a6 2
DISTNAME=	mod_perl-2.0.3p0
PKGNAME=	ap2-${DISTNAME}
d23 1
d26 3
a28 3
CONFIGURE_ARGS+=	MP_APXS=/usr/local/sbin/apxs2
BUILD_DEPENDS=		::www/apache-httpd
RUN_DEPENDS=		${BUILD_DEPENDS}
@


1.2
log
@tweak MESSAGE and UNMESSAGE to use ${SYSCONFDIR} and ${PREFIX} rather than
hard coded paths. better wording while here.

pointed out by steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/01/10 13:51:50 dlg Exp $
d3 1
a3 1
NOT_FOR_ARCHS=  ${NO_SHARED_ARCHS}
d5 1
a5 1
COMMENT=        "module that embeds a Perl interpreter into Apache2"
d11 1
a11 1
WANTLIB=        c m perl util
d13 2
a14 2
MASTER_SITES=   http://perl.apache.org/dist/ \
                ${MASTER_SITE_PERL_CPAN:=Apache/}
d19 4
a22 4
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d26 4
a29 4
CONFIGURE_STYLE=        perl
CONFIGURE_ARGS+=        MP_APXS=/usr/local/sbin/apxs2
BUILD_DEPENDS=          ::www/apache-httpd
RUN_DEPENDS=            ${BUILD_DEPENDS}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
DISTNAME=	mod_perl-2.0.3
@


1.1.1.1
log
@import of mod_perl 2.0.3 for use on apache 2

this package aims to provide the full power of perl together with the
apache web server version 2. you can use perl to manage apache, respond to
requests for web pages and much more.

there already exists a mod_perl in ports (www/mod_perl) for use with the
apache in the base openbsd system. this one is usable only with
www/apache-httpd. the mod_perl developers were kind enough to set things up
so they wont conflict with each other, so you can have both running
concurrently.

originally from srebrenko sehic, with some naming tweaks from me. lots of
help from robert@@ (as always).

im importing this now so it can be worked on in tree, but not hooking it up
to the bulk builds. there are a few warts that need to be fixed but i hate
sending tarballs around when we have a tree to develop in. its also nice to
have commit messages against changes so you can see why decisions were made
a certain way. after everyone is happy it can be hooked up.
@
text
@@
