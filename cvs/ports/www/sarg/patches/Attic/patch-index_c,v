head	1.4;
access;
symbols
	OPENBSD_4_1:1.3.0.6
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2007.05.16.15.59.23;	author aanriot;	state dead;
branches;
next	1.3;

1.3
date	2006.01.28.21.22.07;	author aanriot;	state Exp;
branches;
next	1.2;

1.2
date	2006.01.22.11.05.02;	author aanriot;	state dead;
branches;
next	1.1;

1.1
date	2005.11.13.17.32.27;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to 2.2.3.1 .

from Douglas Santos;
tested by michele@@ and myself
@
text
@--- index.c.orig	Tue Nov 29 17:39:45 2005
+++ index.c	Thu Jan 26 21:31:44 2006
@@@@ -369,9 +369,9 @@@@ void make_index()
       unlink(wdir_tmp2);
    } else {
       if(strcmp(IndexSortOrder,"A") == 0)
-         sprintf(warea,"sort -t';' +6.5n +6.2M +6.0n '%s' -o '%s'", wdir_tmp, wdir_tmp2);
+      	 sprintf(warea,"sort -t';' -k 7,7 %s -o %s", wdir_tmp, wdir_tmp2);
       else
-         sprintf(warea,"sort -t';' +6.5nr +6.2Mr +6.0nr '%s' -o '%s'", wdir_tmp, wdir_tmp2);
+      	 sprintf(warea,"sort -t';' -r -k 7,7 %s -o %s", wdir_tmp, wdir_tmp2);
       system(warea);
       unlink(wdir_tmp);
       if((fp_ou=fopen(wdir,"w"))==NULL) {
@


1.3
log
@- use log files paths accordingly to www/squid.
- fix SYSCONFDIR and other substitutions.

from maintainer Douglas Santos with a few changes;
inputs and ok alek@@
@
text
@@


1.2
log
@update to Sarg 2.1 .

from maintainer Douglas Santos, with a few additions;
help and ok alek@@
@
text
@d1 14
a14 19
$OpenBSD: patch-index_c,v 1.1 2005/11/13 17:32:27 pvalchev Exp $
--- index.c.orig	Thu Aug  4 19:32:44 2005
+++ index.c	Fri Nov  4 17:06:04 2005
@@@@ -113,11 +113,11 @@@@ void geraindex()
    (void)closedir( dirp );
 
    if(strcmp(IndexSortOrder,"A") == 0)
-//      sprintf(html,"sort -t';' -k 7,7 %s -o %s", wdir_tmp, wdir_tmp2);
-      sprintf(html,"sort -t';' +6.5n +6.2M +6.0n '%s' -o '%s'", wdir_tmp, wdir_tmp2);
+      sprintf(html,"sort -t';' -k 7,7 %s -o %s", wdir_tmp, wdir_tmp2);
+//      sprintf(html,"sort -t';' +6.5n +6.2M +6.0n '%s' -o '%s'", wdir_tmp, wdir_tmp2);
    else
-//      sprintf(html,"sort -t';' -r -k 7,7 %s -o %s", wdir_tmp, wdir_tmp2);
-      sprintf(html,"sort -t';' +6.5nr +6.2Mr +6.0nr '%s' -o '%s'", wdir_tmp, wdir_tmp2);
+      sprintf(html,"sort -t';' -r -k 7,7 %s -o %s", wdir_tmp, wdir_tmp2);
+//      sprintf(html,"sort -t';' +6.5nr +6.2Mr +6.0nr '%s' -o '%s'", wdir_tmp, wdir_tmp2);
 
    system(html);
 
@


1.1
log
@unbreak sort; from Marcello Morsello <morsello@@gmail.com> via Douglas Santos
@
text
@d1 1
a1 1
$OpenBSD$
@

