head	1.25;
access;
symbols
	OPENBSD_6_2:1.25.0.2
	OPENBSD_6_2_BASE:1.25
	OPENBSD_6_1:1.24.0.10
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.24.0.8
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.24.0.4
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.20.0.4
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.13.0.8
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.6
	OPENBSD_5_0:1.13.0.4
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.10.0.8
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.6
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.4
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.2
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.5.0.6
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.4
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	alek_20050927:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.25
date	2017.06.02.11.33.16;	author schwarze;	state Exp;
branches;
next	1.24;
commitid	BmRlJvPP6AksX52q;

1.24
date	2015.02.18.08.41.27;	author rpe;	state Exp;
branches;
next	1.23;
commitid	9OnEqCgyGKys2HsA;

1.23
date	2014.10.05.17.35.24;	author rpe;	state Exp;
branches;
next	1.22;
commitid	2KG9prqYDFlyPWjw;

1.22
date	2014.03.17.23.22.21;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2014.03.09.22.43.25;	author rpe;	state Exp;
branches;
next	1.20;

1.20
date	2013.07.05.09.34.36;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.23.19.23.29;	author rpe;	state Exp;
branches;
next	1.18;

1.18
date	2013.05.03.22.58.21;	author rpe;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.11.11.44.49;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2013.01.21.08.30.01;	author rpe;	state Exp;
branches;
next	1.14;

1.14
date	2012.11.21.21.42.07;	author rpe;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.22.08.36.54;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.11.12.35.18;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.19.08.02.57;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2008.12.08.08.35.46;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2008.03.31.06.54.13;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.15.20.38.26;	author merdely;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2007.06.22.12.48.25;	author martynas;	state Exp;
branches;
next	1.6;

1.6
date	2007.05.16.15.59.23;	author aanriot;	state Exp;
branches;
next	1.5;

1.5
date	2006.01.28.21.22.07;	author aanriot;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.22.11.05.01;	author aanriot;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.13.17.32.26;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2005.10.08.08.13.21;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.27.13.03.45;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.09.27.13.03.45;	author alek;	state Exp;
branches;
next	;

1.8.2.1
date	2008.06.15.01.47.33;	author robert;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Drop USE_GROFF and bump.
Mandoc now copes with DocBook lists using \h.
@
text
@# $OpenBSD: Makefile,v 1.24 2015/02/18 08:41:27 rpe Exp $

COMMENT=		Squid Analysis Report Generator

DISTNAME=		sarg-2.3.10
REVISION=		0
CATEGORIES=		www

HOMEPAGE=		http://sarg.sourceforge.net/

MAINTAINER=		Robert Peichaer <rpe@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c gd m pcre pthread

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=sarg/}

MODULES=		devel/gettext

LIB_DEPENDS=		devel/pcre \
 			graphics/gd

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--sysconfdir=${SYSCONFDIR}/sarg \
			--enable-sargphp=${VARBASE}/www/htdocs/sarg-php \
			--enable-fontdir=${SYSCONFDIR}/sarg/fonts \
			--enable-imagedir=${SYSCONFDIR}/sarg/images
CONFIGURE_ENV=		CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
			LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib -liconv -lintl"

MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/cfgaux

FLAVORS=		ldap
FLAVOR?=

.if ${FLAVOR:Mldap}
CONFIGURE_ARGS+=	--with-ldap
LIB_DEPENDS+=		databases/openldap
WANTLIB+=		ldap
.else
CONFIGURE_ARGS+=	--without-ldap
.endif

NO_TEST=		Yes

EXAMPLESDIR=		${PREFIX}/share/examples/sarg

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/sarg ${PREFIX}/bin
	${INSTALL_MAN} ${WRKSRC}/sarg.1 ${PREFIX}/man/man1/sarg.1
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}/{images,fonts,sarg-php}
	${INSTALL_DATA} ${WRKSRC}/{css.tpl,exclude_codes,sarg.conf} \
		${EXAMPLESDIR}/
	${INSTALL_DATA} ${WRKSRC}/fonts/*.ttf ${EXAMPLESDIR}/fonts/
	${INSTALL_DATA} ${WRKSRC}/images/* ${EXAMPLESDIR}/images/
	cp -R ${WRKSRC}/sarg-php/{locale,*.php} ${EXAMPLESDIR}/sarg-php/

.include <bsd.port.mk>
@


1.24
log
@Update www/sarg to 2.3.10

OK sthen@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/10/05 17:35:24 rpe Exp $
d6 1
a18 2

USE_GROFF=		Yes
@


1.23
log
@Update sarg to 2.3.9

OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/03/17 23:22:21 sthen Exp $
d5 1
a5 1
DISTNAME=		sarg-2.3.9
@


1.22
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/03/09 22:43:25 rpe Exp $
d5 1
a5 2
DISTNAME=		sarg-2.3.8
REVISION=		0
@


1.21
log
@update to sarg 2.3.8

- remove chmod for configure script, it has the right mods now
- compact the do-install target

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/07/05 09:34:36 jasper Exp $
d6 1
d9 1
a9 1
HOMEPAGE=	 	http://sarg.sourceforge.net/
d16 1
a16 1
WANTLIB=		c gd m pcre
@


1.20
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/06/23 19:23:29 rpe Exp $
d5 1
a5 1
DISTNAME=		sarg-2.3.7
a50 3
pre-configure:
	@@chmod u=rwx,go=rx ${WRKSRC}/configure

d54 4
a57 6
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}/images
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}/fonts
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}/sarg-php
	${INSTALL_DATA} ${WRKSRC}/css.tpl ${EXAMPLESDIR}/
	${INSTALL_DATA} ${WRKSRC}/exclude_codes ${EXAMPLESDIR}/
d59 1
a59 4
	${INSTALL_DATA} ${WRKSRC}/sarg.conf ${EXAMPLESDIR}/
	${INSTALL_DATA} ${WRKSRC}/fonts/*.ttf ${EXAMPLESDIR}/fonts/
	${INSTALL_DATA} ${WRKSRC}/sarg-php/*php ${EXAMPLESDIR}/sarg-php/
	cp -R ${WRKSRC}/sarg-php/locale ${EXAMPLESDIR}/sarg-php/
@


1.19
log
@update sarg to 2.3.7

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/05/03 22:58:21 rpe Exp $
d28 1
a28 1
			--enable-sargphp=/var/www/htdocs/sarg-php \
@


1.18
log
@update sarg to 2.3.6

ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/11 11:44:49 espie Exp $
d5 1
a5 1
DISTNAME=		sarg-2.3.6
@


1.17
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/02/09 14:49:53 sthen Exp $
d5 1
a5 1
DISTNAME=		sarg-2.3.5
@


1.16
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/01/21 08:30:01 rpe Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d47 1
a47 1
NO_REGRESS=		Yes
@


1.15
log
@update sarg to 2.3.5

Changes since 2.3.3:

Version 2.3.5
- Fix an issue when creating the redirector report. Sarg was not
  creating the unsorted file as expected. That regression was
  introduced in sarg 2.3.4.

Version 2.3.4
- Fix an error occuring when serveral user's ID contain at least
  two consecutive non alphanumeric characters. In that case, the
  mangled file name is not unique. Thanks to Fabiola and Pecha for
  reporting this bug.
- Remove a warning about the redirector file that can't be deleted
  when it is not created.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/11/21 21:42:07 rpe Exp $
d42 1
a42 1
.if ${FLAVOR:L:Mldap}
@


1.14
log
@update sarg to 2.3.3
- take maintainership from Douglas Santos <dsantos@@hydroxyl.org>
- add ldap flavor for loginname to username translation via ldap

feedback from and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/22 08:36:54 espie Exp $
d5 1
a5 1
DISTNAME=		sarg-2.3.3
@


1.13
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/11 12:35:18 sthen Exp $
d5 1
a5 2
DISTNAME=		sarg-2.2.5
REVISION=		0
d10 1
a10 1
MAINTAINER=		Douglas Santos <dsantos@@hydroxyl.org>
d18 2
d22 6
a27 1
WANTLIB=		c
d30 19
a48 3
CONFIGURE_ARGS=		--enable-bindir=${LOCALBASE}/bin \
			--enable-sysconfdir=${SYSCONFDIR}/sarg \
			--enable-htmldir=/var/www/htdocs/sarg \
a49 1
USE_GROFF =		Yes
a52 4
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/cfgaux

post-extract:
	@@chmod 755 ${WRKSRC}/sarg-php/locale
d54 2
a55 6
post-build:
	@@perl -pi -e \
		"s,%%SYSCONFDIR%%,${SYSCONFDIR},g" \
		${WRKSRC}/log.c \
		${WRKSRC}/sarg.conf \
		${WRKSRC}/sarg.1
a62 1
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}/languages
d68 1
a68 2
	${INSTALL_DATA} ${WRKSRC}/fonts/FreeSans.ttf ${EXAMPLESDIR}/fonts/
	${INSTALL_DATA} ${WRKSRC}/languages/* ${EXAMPLESDIR}/languages/
@


1.12
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/19 08:02:57 espie Exp $
d28 1
a28 1
USE_GROFF =	Yes
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/12/08 08:35:46 sthen Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
@


1.10
log
@- add prototypes for functions returning pointers, fixes LP64 problems
- regen PLIST
From Tobias Ulmer, thanks!

- tidy whitespace in Makefile
- specify version in license marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/03/31 06:54:13 jasper Exp $
d28 1
@


1.9
log
@SECURITY UPDATE to sarg 2.2.5
which includes fixes for http://secunia.com/advisories/28668/

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/15 20:38:26 merdely Exp $
d6 1
d13 2
a14 2
# GPL
PERMIT_PACKAGE_CDROM=	Yes 
d19 1
a19 1
MASTER_SITES=   	${MASTER_SITE_SOURCEFORGE:=sarg/}
d23 1
a23 1
CONFIGURE_STYLE=  	gnu
d34 1
a34 1
	@@chmod 755 ${WRKSRC}/sarg-php/locale	
d55 1
a55 1
	${INSTALL_DATA} ${WRKSRC}/fonts/FreeSans.ttf ${EXAMPLESDIR}/fonts/ 
@


1.8
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/06/22 12:48:25 martynas Exp $
d5 1
a5 2
DISTNAME=		sarg-2.2.3.1
PKGNAME=		${DISTNAME}p0
@


1.8.2.1
log
@SECURITY UPDATE to sarg 2.2.5
which includes fixes for http://secunia.com/advisories/28668/

from William Yodlowsky
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/15 20:38:26 merdely Exp $
d5 2
a6 2
DISTNAME=		sarg-2.2.5
PKGNAME=		${DISTNAME}
@


1.7
log
@fix a segmentation fault when you are using authentication and have
a user named "log"; from sarg bugtracker via freebsd
also, fix sprintf and rcs id; from maintainer Douglas Santos
thanks to aanriot@@, who found some errors when i merged Douglas
Santos diff
ok aanriot@@ and maintainer Douglas Santos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/05/16 15:59:23 aanriot Exp $
d3 1
a3 1
COMMENT=		"Squid Analysis Report Generator"
@


1.6
log
@update to 2.2.3.1 .

from Douglas Santos;
tested by michele@@ and myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/01/28 21:22:07 aanriot Exp $
d6 1
d39 1
@


1.5
log
@- use log files paths accordingly to www/squid.
- fix SYSCONFDIR and other substitutions.

from maintainer Douglas Santos with a few changes;
inputs and ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/01/22 11:05:01 aanriot Exp $
d5 1
a5 2
DISTNAME=		sarg-2.1
PKGNAME=		${DISTNAME}p0
@


1.4
log
@update to Sarg 2.1 .

from maintainer Douglas Santos, with a few additions;
help and ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/11/13 17:32:26 pvalchev Exp $
d6 1
d38 2
a39 1
		"s,/usr/local/sarg,${SYSCONFDIR}/sarg," \
a40 2
	@@perl -pi -e \
		"s,/usr/local/squid,/var/squid," ${WRKSRC}/sarg.1
@


1.3
log
@unbreak sort; from Marcello Morsello <morsello@@gmail.com> via Douglas Santos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/10/08 08:13:21 pvalchev Exp $
d5 1
a5 2
DISTNAME=		sarg-2.0.9
PKGNAME=		${DISTNAME}p0
d8 1
a8 1
HOMEPAGE=	 	http://sarg.sourceforge.net/	
@


1.2
log
@fix build on macppc (config.guess), no package change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/09/27 13:03:45 alek Exp $
d6 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d30 1
@


1.1.1.1
log
@Import sarg 2.0.9

Sarg is a Squid Analysis Report Generator that allows to view "where"
your users are going to on the Internet. Sarg generate reports in HTML,
with many fields, like: users, IP addresses, bytes, sites and times.

From Douglas Santos <dsantos@@hydroxyl.org>
@
text
@@
