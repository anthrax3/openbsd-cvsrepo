head	1.12;
access;
symbols
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	jasper_20071012:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2010.06.18.16.55.10;	author landry;	state dead;
branches;
next	1.11;

1.11
date	2009.11.24.09.01.47;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.08.10.06.34.56;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2009.07.27.21.44.15;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.16.10.42.06;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.02.12.20.00.33;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.02.11.22.54.01;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2008.01.23.16.36.03;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2008.01.04.17.48.37;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.17.19.25.59;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.13.16.05.13;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.12.19.57.56;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.12.19.57.56;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.12
log
@I made you a diff to make mplayerplug-in build against xulrunner 1.9.2...
but gecko-mediaplayer eated it^Wis its successor, so let's just drop
this abandoned upstream cruft. Its developer works on gecko-mediaplayer
anyway - so you should use it instead..
agreed/prodded by jasper@@ dcoppa@@ ajacoutot@@ Gleydon Soares (MAINTAINER)
@
text
@# $OpenBSD: Makefile,v 1.11 2009/11/24 09:01:47 ajacoutot Exp $

SHARED_ONLY=		Yes

COMMENT=		embedded video player for mozilla

DISTNAME=		mplayerplug-in-3.55
PKGNAME=		${DISTNAME}p2

CATEGORIES=		www

HOMEPAGE=		http://mplayerplug-in.sourceforge.net/

MAINTAINER=		Gleydson Soares <gsoares@@trusted.com.br>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB += ICE SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB += Xfixes Xi Xinerama Xpm Xrandr Xrender Xt atk-1.0 cairo
WANTLIB += expat fontconfig freetype gio-2.0 glib-2.0 glitz gmodule-2.0
WANTLIB += gobject-2.0 gthread-2.0 m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pixman-1 png pthread-stubs xcb z

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=mplayerplug-in/}

MODULES=		devel/gettext

BUILD_DEPENDS=		${MODGNU_AUTOMAKE_DEPENDS} \
			:xulrunner-devel->=1.8,<1.9:devel/xulrunner/1.8,-devel
LIB_DEPENDS=		gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
RUN_DEPENDS=		::x11/mplayer

USE_X11=		yes
USE_GMAKE=		yes

AUTOCONF_VERSION=	2.61
AUTOMAKE_VERSION=	1.4
CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS+= 	--enable-gmp
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include \
			-I${X11BASE}/include \
			-I${LOCALBASE}/xulrunner/include/xpcom -DBSD" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"

NO_REGRESS=		Yes

PLUGINS=	mplayerplug-in.so mplayerplug-in-wmp.so \
		mplayerplug-in-qt.so mplayerplug-in-rm.so \
		mplayerplug-in-gmp.so mplayerplug-in-dvx.so

COMPONENTS=	mplayerplug-in.xpt mplayerplug-in-wmp.xpt \
		mplayerplug-in-qt.xpt mplayerplug-in-rm.xpt \
		mplayerplug-in-gmp.xpt mplayerplug-in-dvx.xpt

post-patch:
	@@perl -pi -e 's|/etc|${SYSCONFDIR}/mplayerplug-in|g' \
		${WRKDIST}/Source/plugin-setup.cpp
	@@cd ${WRKSRC} && \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} ${LOCALBASE}/bin/aclocal

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/mozilla-plugins
.for i in ${PLUGINS} ${COMPONENTS}
	${INSTALL_DATA} ${WRKSRC}/$i \
		${PREFIX}/lib/mozilla-plugins
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mplayerplug-in
	${INSTALL_DATA} ${WRKSRC}/mplayerplug-in.{conf,types} \
		${PREFIX}/share/examples/mplayerplug-in
	@@cd ${WRKSRC}/po && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} ${FAKE_TARGET}

.include <bsd.port.mk>
@


1.11
log
@Fix xulrunner package spec.

from an original diff for yelp by Mikolaj Kucharski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/08/10 06:34:56 kili Exp $
@


1.10
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/07/27 21:44:15 martynas Exp $
d33 1
a33 1
			:xulrunner-devel-*:devel/xulrunner/1.8,-devel
@


1.9
log
@adapt for the new xulrunner infrastructure.
no breakage in bulk build & bumps done by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/03/16 10:42:06 ajacoutot Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
d26 1
a26 1
WANTLIB += pangoft2-1.0 pixman-1 png z
@


1.8
log
@- unbreak by fixing dependency spec
- remove run_depends requirement on firefox while here, this plugin can be
used by other ns4 browsers (tested with epiphany)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/02/12 20:00:33 ajacoutot Exp $
d33 1
a33 1
			:xulrunner-devel-*:devel/xulrunner,-devel
@


1.7
log
@- fix dependencies, this would not not build on a clean system
porters, please add your run_depends *after* all build and lib depends
have been resolved

On a side note, I don't know if we really need to run_depends on firefox
as supposedly this plug-in should work with other mozilla-based
browsers... but that's just my guess.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/02/11 22:54:01 jasper Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
d32 1
a32 1
BUILD_DEPENDS=		:automake-1.4.*:devel/automake/1.4 \
d35 1
a35 2
RUN_DEPENDS=		:mozilla-firefox-*|firefox3-*:www/mozilla-firefox \
			::x11/mplayer
@


1.6
log
@- update mplayerplug-in to 3.55
- install plugins into a more appropriate directory (prodded by claudio@@,
done with help from martynas@@)
- fix mplayer zombie and firefox freeze when closing a movie,
with mplayer still playing it.

this makes mplayerplug-in work as it should've.

from mikolaj kucharski, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/01/23 16:36:03 martynas Exp $
d8 1
d22 5
a26 7
WANTLIB=	ICE SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
		Xfixes Xi Xinerama Xpm Xrandr Xrender Xt atk-1.0 cairo \
		expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 \
		gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0 \
		gtk-x11-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png z

d34 1
@


1.5
log
@make it use xulrunner-devel instead of firefox-devel.  improvements,
testing and ok kurt@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/01/04 17:48:37 espie Exp $
d7 1
a7 2
DISTNAME=		mplayerplug-in-3.50
PKGNAME=		${DISTNAME}p0
d24 1
a24 1
		glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0 \
d26 2
a27 1
		png z
d33 3
a35 2
BUILD_DEPENDS=		:xulrunner-devel-*:devel/xulrunner,-devel
RUN_DEPENDS=		::www/mozilla-firefox \
d42 1
a51 2
WRKDIST=		${WRKDIR}/mplayerplug-in/

d62 3
a64 1
	    ${WRKDIST}/Source/plugin-setup.cpp
d67 2
a68 7
	${INSTALL_DATA_DIR} ${PREFIX}/mozilla-firefox/plugins
	${INSTALL_DATA_DIR} ${PREFIX}/mozilla-firefox/components
.for i in ${PLUGINS}
	${INSTALL_DATA} ${WRKSRC}/$i \
		${PREFIX}/mozilla-firefox/plugins
.endfor
.for i in ${COMPONENTS}
d70 1
a70 1
		${PREFIX}/mozilla-firefox/components
@


1.4
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/12/17 19:25:59 jasper Exp $
d8 1
d33 1
a33 1
BUILD_DEPENDS=		:mozilla-firefox-devel-*:www/mozilla-firefox,-devel
d39 3
a41 1
CONFIGURE_STYLE=	gnu
d44 2
a45 1
			-I${X11BASE}/include -DBSD" \
@


1.3
log
@- update mplayerplug-in to 3.50

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/10/13 16:05:13 fgsch Exp $
d75 1
a75 1
		${FAKE_FLAGS} ${FAKE_TARGET}
@


1.2
log
@* Don't use bundled strlcat or strlcpy
* Use the right config dir, allowing something else than /etc as side effect
* Reorder entries
* Bump package

jasper@@ ok; maintainer is on holidays but jasper believes he'll be ok
with this, so commiting with his bless.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/10/12 19:57:56 jasper Exp $
d7 1
a7 2
DISTNAME=		mplayerplug-in-3.45
PKGNAME=		${DISTNAME}p0
d21 6
a26 5
WANTLIB=	ICE SM X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama \
		Xpm Xrandr Xrender Xt atk-1.0 cairo expat fontconfig \
		freetype gdk-x11-2.0 gdk_pixbuf-2.0 glib-2.0 glitz \
		gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0 m pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 png z
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 2
a12 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=mplayerplug-in/}
d28 2
d32 5
a37 2
USE_X11=		yes

d39 1
a42 5
CONFIGURE_ARGS= 	--enable-gmp

BUILD_DEPENDS=		:mozilla-firefox-devel-*:www/mozilla-firefox,-devel
RUN_DEPENDS=		::www/mozilla-firefox \
			::x11/mplayer
d55 4
@


1.1.1.1
log
@import mplayerplug-in 3.45

mplayerplug-in is a browser plugin that uses mplayer to play digital
media from websites.

This plug-in gives Mozilla the ability to play media from a website the
net without reading the source html and getting the url manually. Media
is played embedded in the page or in a separate window depending on how
the author of the webpage intended the media to be seen.

from Gleydson Soares <gsoares at trusted.com.br> (MAINTAINER)

feedback and ok steven@@
@
text
@@
