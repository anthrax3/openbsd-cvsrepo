head	1.5;
access;
symbols
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2;
locks; strict;
comment	@# @;


1.5
date	2002.09.09.22.16.20;	author brad;	state dead;
branches;
next	1.4;

1.4
date	2002.04.06.21.16.16;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.18.19.57.25;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.15.23.45.45;	author avsm;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2000.07.18.21.55.44;	author jakob;	state Exp;
branches;
next	;

1.2.2.1
date	2002.01.16.23.52.07;	author brad;	state Exp;
branches;
next	;


desc
@@


1.5
log
@this should have been stubbed out in the first place.
@
text
@$OpenBSD: patch-configure,v 1.4 2002/04/06 21:16:16 brad Exp $
--- configure.orig	Fri Oct 20 15:05:17 2000
+++ configure	Sat Apr  6 15:55:22 2002
@@@@ -1493,7 +1493,7 @@@@ fi
 	echo "$ac_t""$php_cv_cc_rpath" 1>&6
 	if test $php_cv_cc_rpath = "yes"; then
 		ld_runpath_switch="-Wl,-rpath,"
-		apxs_runpath_switch="-Wl,'-rpath "
+		apxs_runpath_switch="-Wl,'-Wl,-rpath,"
 	else
 				ld_runpath_switch="-L"
 		apxs_runpath_switch="-L'"
@@@@ -5157,8 +5157,8 @@@@ if test "${with_imap+set}" = set; then
     fi
 	if test "$withval" != "no" && test "$withval" != "yes"; then
 		IMAP_DIR=$withval
-		if test -f $IMAP_DIR/include/imap/mail.h; then
-			IMAP_INC_DIR=$IMAP_DIR/include/imap
+		if test -f $IMAP_DIR/include/c-client/mail.h; then
+			IMAP_INC_DIR=$IMAP_DIR/include/c-client
 		else
 			IMAP_INC_DIR=$withval/include
 		fi
@@@@ -5317,7 +5317,7 @@@@ if test "${with_imap+set}" = set; then
     ai_p="`pwd`/$IMAP_INC_DIR"
   fi
 
-    
+
   unique=`echo $ac_n "$ai_p$ac_c" | tr -c -d a-zA-Z0-9`
   cmd="echo $ac_n \"\$INCLUDEPATH$unique$ac_c\""
   if test -n "$unique" && test "`eval $cmd`" = "" ; then
@@@@ -5328,6 +5328,79 @@@@ if test "${with_imap+set}" = set; then
   fi
 
   fi
+
+
+
+
+  unique=`echo $ac_n "gssapi$ac_c" | tr -c -d a-zA-Z0-9`
+  cmd="echo $ac_n \"\$LIBRARY$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBRARY$unique=set"
+    
+    EXTRA_LIBS="$EXTRA_LIBS -lgssapi"
+  
+  fi
+
+
+
+
+  unique=`echo $ac_n "krb$ac_c" | tr -c -d a-zA-Z0-9`
+  cmd="echo $ac_n \"\$LIBRARY$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBRARY$unique=set"
+    
+    EXTRA_LIBS="$EXTRA_LIBS -lkrb"
+  
+  fi
+
+
+
+
+  unique=`echo $ac_n "krb5$ac_c" | tr -c -d a-zA-Z0-9`
+  cmd="echo $ac_n \"\$LIBRARY$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBRARY$unique=set"
+    
+    EXTRA_LIBS="$EXTRA_LIBS -lkrb5"
+  
+  fi
+
+
+
+
+  unique=`echo $ac_n "asn1$ac_c" | tr -c -d a-zA-Z0-9`
+  cmd="echo $ac_n \"\$LIBRARY$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBRARY$unique=set"
+    
+    EXTRA_LIBS="$EXTRA_LIBS -lasn1"
+  
+  fi
+
+
+
+
+  unique=`echo $ac_n "com_err$ac_c" | tr -c -d a-zA-Z0-9`
+  cmd="echo $ac_n \"\$LIBRARY$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBRARY$unique=set"
+    
+    EXTRA_LIBS="$EXTRA_LIBS -lcom_err_pic"
+  
+  fi
+
+
+
+
+  unique=`echo $ac_n "kafs$ac_c" | tr -c -d a-zA-Z0-9`
+  cmd="echo $ac_n \"\$LIBRARY$unique$ac_c\""
+  if test -n "$unique" && test "`eval $cmd`" = "" ; then
+    eval "LIBRARY$unique=set"
+    
+    EXTRA_LIBS="$EXTRA_LIBS -lkafs"
+  
+  fi
+
 
         cat >> confdefs.h <<\EOF
 #define HAVE_IMAP 1
@


1.4
log
@- Wl,'-rpath vs. Wl,'-Wl,-rpath, the first instance of Wl is stripped off by
APXS and thus the original command line option was incorrect.
- add some more Kerberos libraries which fixes the imap FLAVOR on ELF systems.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.3 2001/11/18 19:57:25 brad Exp $
@


1.3
log
@- add pkgspec for c-client
- link with libcom_err_pic vs. libcom_err
@
text
@d1 13
a13 4
$OpenBSD: patch-configure,v 1.2 2001/10/15 23:45:45 avsm Exp $
--- configure.orig	Fri Oct 20 19:05:17 2000
+++ configure	Mon Oct 15 01:11:36 2001
@@@@ -5157,8 +5157,8 @@@@
d24 3
a26 1
@@@@ -5329,6 +5329,54 @@@@
d28 6
d36 5
a40 2
+	
+  
d51 3
a53 3
+	
+  
+  unique=`echo $ac_n "asn1$ac_c" | tr -c -d a-zA-Z0-9`
d58 1
a58 1
+    EXTRA_LIBS="$EXTRA_LIBS -lasn1"
d63 2
a64 2
+	
+  
d75 8
a82 1
+	
d84 5
d99 12
a112 1
 EOF
@


1.2
log
@Repair imap FLAVOR:
- c-client is at shlib version 3 now
- link in with kerberos libraries like php4

pointed out by brad, tested by heko, ok naddy
@
text
@d1 1
a1 1
$OpenBSD$
d62 1
a62 1
+    EXTRA_LIBS="$EXTRA_LIBS -lcom_err"
@


1.2.2.1
log
@Upgrade Pine to 4.44 which requires newer c-client.
This also fixes dependency entries for c-client and brings in some other
minor fixes from the -current ports tree.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.2 2001/10/15 23:45:45 avsm Exp $
d62 1
a62 1
+    EXTRA_LIBS="$EXTRA_LIBS -lcom_err_pic"
@


1.1
log
@depend on c-client port instead of imap-uw
add patch to make configure detect the c-client include-files
@
text
@d1 4
a4 10
--- configure.orig	Wed Apr  5 01:32:58 2000
+++ configure	Tue Jul 18 23:39:15 2000
@@@@ -5133,14 +5133,14 @@@@
 			withval=/usr/local
 		elif test -f /usr/include/mail.h; then
 			withval=/usr
-		elif test -f /usr/include/imap/mail.h; then
+		elif test -f /usr/include/c-client/mail.h; then
 			withval=/usr
 		fi
d15 55
@

