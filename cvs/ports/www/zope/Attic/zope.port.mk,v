head	1.9;
access;
symbols
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.6
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.4
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.5.0.4
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.3.0.8
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.6
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.6
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.4
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2;
locks; strict;
comment	@# @;


1.9
date	2011.12.15.22.19.51;	author fgsch;	state dead;
branches;
next	1.8;

1.8
date	2011.10.21.16.23.45;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.22.08.36.55;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.16.10.52.08;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2008.03.20.11.37.47;	author winiger;	state Exp;
branches;
next	1.4;

1.4
date	2007.11.19.19.43.36;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.06.20.20.58;	author mbalmer;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.03.17.08.29;	author xsa;	state Exp;
branches;
next	1.1;

1.1
date	2004.08.03.12.08.10;	author xsa;	state Exp;
branches;
next	;


desc
@@


1.9
log
@Kill Zope and friends that only run under python 2.4.
ok by many.
@
text
@# $OpenBSD: zope.port.mk,v 1.8 2011/10/21 16:23:45 espie Exp $
#
#	zope.port.mk - Xavier Santolaria <xavier@@santolaria.net>
#	This file is in the public domain.

MODZOPE_VERSION?=	2.10
MODZOPE_PYTHON_VERSION=	2.4

.if ${MODZOPE_PYTHON_VERSION} == 2.4
MODZOPE_PY_VSPEC = >=${MODZOPE_PYTHON_VERSION},<2.5
.elif ${MODZOPE_PYTHON_VERSION} == 2.5
MODZOPE_PY_VSPEC = >=${MODZOPE_PYTHON_VERSION},<2.6
.endif

BUILD_DEPENDS+= python-${MODZOPE_PY_VSPEC}:lang/python/${MODZOPE_PYTHON_VERSION}
RUN_DEPENDS+=	www/zope/${MODZOPE_VERSION}

MODZOPE_HOME=		${PREFIX}/lib/zope
MODZOPE_PRODUCTSDIR=	${MODZOPE_HOME}/lib/python/Products

PYTHON_BIN=		${LOCALBASE}/bin/python${MODZOPE_PYTHON_VERSION}
PYTHON_LIBDIR=		${LOCALBASE}/lib/python${MODZOPE_PYTHON_VERSION}
PYTHON_INCLUDEDIR=	${LOCALBASE}/include/python${MODZOPE_PYTHON_VERSION}

NO_REGRESS=	Yes

# dirty way to do it with no modifications in bsd.port.mk
.if !target(do-build)
do-build:
	${PYTHON_BIN} ${PYTHON_LIBDIR}/compileall.py ${WRKDIST} || true
.endif

post-install:
	chown -R ${LIBOWN}:${LIBGRP} ${MODZOPE_PRODUCTSDIR}
@


1.8
log
@CHMOD and CHOWN serve no useful purpose, they're just chown/chmod
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.7 2010/11/22 08:36:55 espie Exp $
@


1.7
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.6 2009/03/16 10:52:08 sthen Exp $
d34 1
a34 1
	${CHOWN} -R ${LIBOWN}:${LIBGRP} ${MODZOPE_PRODUCTSDIR}
@


1.6
log
@fix BUILD_DEPENDS for anything pulling in MODULES=www/zope
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.5 2008/03/20 11:37:47 winiger Exp $
d15 2
a16 2
BUILD_DEPENDS+= :python-${MODZOPE_PY_VSPEC}:lang/python/${MODZOPE_PYTHON_VERSION}
RUN_DEPENDS+=	::www/zope/${MODZOPE_VERSION}
@


1.5
log
@split port into multiple versions, unbreaks www/plone

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.4 2007/11/19 19:43:36 sturm Exp $
d9 7
a15 1
BUILD_DEPENDS+= :python-${MODZOPE_PYTHON_VERSION}*:lang/python/${MODZOPE_PYTHON_VERSION}
@


1.4
log
@fix BUILD_DEPENDS to depend on the specific version of python
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.3 2005/11/06 20:20:58 mbalmer Exp $
d6 1
d10 1
a10 1
RUN_DEPENDS+=	::www/zope
@


1.3
log
@Update to Zope 2.8.4 and switch to Python 2.4
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.2 2004/08/03 17:08:29 xsa Exp $
d8 1
a8 1
BUILD_DEPENDS+= ::lang/python/${MODZOPE_PYTHON_VERSION}
@


1.2
log
@
shutup!
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.1 2004/08/03 12:08:10 xsa Exp $
d6 1
a6 1
MODZOPE_PYTHON_VERSION=	2.3
@


1.1
log
@
prepare for MODULES= www/zope
@
text
@d1 1
a1 1
# $OpenBSD: zope.port.mk,v 1.3 2004/08/03 10:16:36 xsa Exp $
d23 1
a23 1
	${PYTHON_BIN} ${PYTHON_LIBDIR}/compileall.py ${WRKDIST}
@

