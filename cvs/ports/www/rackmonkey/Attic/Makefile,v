head	1.16;
access;
symbols
	OPENBSD_5_9:1.14.0.6
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.8
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.4
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.2
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.13.0.4
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.9.0.4
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.4
	OPENBSD_5_0:1.6.0.2
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	sthen_20101028:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.16
date	2016.04.28.14.41.29;	author sthen;	state dead;
branches;
next	1.15;
commitid	JvncZM73ZPctFeA7;

1.15
date	2016.04.05.12.21.41;	author sthen;	state Exp;
branches;
next	1.14;
commitid	aRJxV2bHdrUEKr07;

1.14
date	2014.05.30.13.14.09;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2013.07.05.09.34.36;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2013.05.24.14.10.01;	author zhuk;	state Exp;
branches;
next	1.11;

1.11
date	2013.05.05.19.24.13;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.11.11.44.49;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2012.05.17.23.13.52;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2012.04.29.20.26.09;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2012.04.23.17.15.19;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2011.06.02.13.41.41;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.24.19.08.38;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.22.08.36.53;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.06.07.56.48;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.29.12.45.57;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.10.28.14.33.54;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.10.28.14.33.54;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.16
log
@unhook www/rackmonkey, it's undeveloped upstream and depends on mod_perl
which needs to get reworked anyway
@
text
@# $OpenBSD: Makefile,v 1.15 2016/04/05 12:21:41 sthen Exp $

COMMENT=	web-based tool for managing racks of equipment

VER=		1.2.5-1
DISTNAME=	rackmonkey-${VER}
PKGNAME=	rackmonkey-${VER:S/-/./}
REVISION=	7

CATEGORIES=	www net databases

HOMEPAGE=	http://flux.org.uk/projects/rackmonkey/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv2+, icons CC:Attribution 2.5
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=rackmonkey/}

MODULES =	perl

RUN_DEPENDS=	p5-DBD-SQLite-*|p5-DBD-Pg-*|p5-DBD-mysql-*:databases/p5-DBD-SQLite \
		misc/p5-Spreadsheet-WriteExcel \
		net/p5-Net-DNS \
		www/mod_perl \
		www/p5-CGI \
		www/p5-HTML-Template \
		www/p5-HTML-Parser

NO_TEST=	Yes
PREFIX=		${VARBASE}/www
PKG_ARCH=	*

do-configure:
	find ${WRKSRC}/perl -type f -print0 | xargs -r0 ${MODPERL_BIN_ADJ}

# setup a sample database: not strictly necessary, but makes for
# easy end-user configuration for the simplest case.
# sqlite databases are arch-independent so PKG_ARCH=* is ok.
SAMPLEDB = db/rackmonkey.db.sample
do-build:
	cd ${WRKSRC}; mkdir db; \
	/usr/bin/sqlite3 ${SAMPLEDB} < sql/schema/schema.sqlite.sql; \
	/usr/bin/sqlite3 ${SAMPLEDB} < sql/data/default_data.sql; \
	/usr/bin/sqlite3 ${SAMPLEDB} < sql/data/sample_data.sql

do-install:
	find ${WRKSRC} -type f -and -name '*.orig' -print0 | xargs -r0 rm
	${INSTALL_DATA_DIR} ${PREFIX}/rackmonkey/db ${PREFIX}/htdocs/rackmonkey
	cd ${WRKSRC} && pax -rw conf db doc sql tmpl ${PREFIX}/rackmonkey
	cd ${WRKSRC}/www && pax -rw * ${PREFIX}/htdocs/rackmonkey
	cd ${WRKSRC}/perl && pax -rw * ${PREFIX}/htdocs/rackmonkey
	chown -R ${SHAREOWN}:${SHAREGRP} \
	    ${PREFIX}/rackmonkey \
	    ${PREFIX}/htdocs/rackmonkey

.include <bsd.port.mk>
@


1.15
log
@sprinkle some deps on www/p5-CGI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/05/30 13:14:09 sthen Exp $
@


1.14
log
@/var/www/conf/modules.sample is no longer provided by base; noticed by florian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/07/05 09:34:36 jasper Exp $
d8 1
a8 2

REVISION=	6
d27 1
@


1.13
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/05/24 14:10:01 zhuk Exp $
d9 1
a9 1
REVISION=	5
@


1.12
log
@/tmp/cvsIyELi3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/05/05 19:24:13 jasper Exp $
d32 1
a32 1
PREFIX=		/var/www
@


1.11
log
@modules.sample/ always lives in /var/www, so no need for ${PREFIX} here.

as discussed with aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/03/11 11:44:49 espie Exp $
d22 2
d36 1
a36 2
	find ${WRKSRC}/perl -type f -print0 | \
	    xargs -r0 perl -pi -e 's,#!/usr/bin/env perl,#!/usr/bin/perl,'
@


1.10
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/05/17 23:13:52 sthen Exp $
d9 1
a9 1
REVISION=	4
@


1.9
log
@tweak www/rackmonkey package docs:

- tell people to use /etc/rc.d/httpd restart not apachectl stop / start
- remind people to enable mod_perl
- zap blank line
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/04/29 20:26:09 sthen Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d29 1
a29 1
NO_REGRESS=	Yes
@


1.8
log
@no need to leave a "BUILD_DEPENDS=" line following sqlite3->base move.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/04/23 17:15:19 espie Exp $
d9 1
a9 1
REVISION=	3
@


1.7
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/06/02 13:41:41 ajacoutot Exp $
a24 5
# to setup a sample database (not strictly necessary, but makes for
# easy end-user configuration for the simplest case). sqlite databases
# are arch-independent so PKG_ARCH=* is ok.
BUILD_DEPENDS=

d40 3
d49 1
a49 1
	
@


1.6
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/24 19:08:38 sthen Exp $
d28 1
a28 1
BUILD_DEPENDS=	databases/sqlite3
d48 3
a50 3
	${LOCALBASE}/bin/sqlite3 ${SAMPLEDB} < sql/schema/schema.sqlite.sql; \
	${LOCALBASE}/bin/sqlite3 ${SAMPLEDB} < sql/data/default_data.sql; \
	${LOCALBASE}/bin/sqlite3 ${SAMPLEDB} < sql/data/sample_data.sql
@


1.5
log
@add missing RUN_DEPENDS and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/22 08:36:53 espie Exp $
d9 1
a9 1
REVISION=	2
@


1.4
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/11/06 07:56:48 ajacoutot Exp $
d9 1
a9 1
REVISION=	1
d33 1
@


1.3
log
@Cosmetic, be consistent with how we set the rcs id in other files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/29 12:45:57 ajacoutot Exp $
d28 1
a28 1
BUILD_DEPENDS=	::databases/sqlite3
d30 5
a34 5
RUN_DEPENDS=	:p5-DBD-SQLite-*|p5-DBD-Pg-*|p5-DBD-mysql-*:databases/p5-DBD-SQLite \
		::misc/p5-Spreadsheet-WriteExcel \
		::net/p5-Net-DNS \
		::www/p5-HTML-Template \
		::www/p5-HTML-Parser
@


1.2
log
@Add RCS IDs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/10/28 14:33:54 sthen Exp $
d9 1
a9 1
REVISION=	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.54 2008/01/13 16:43:57 espie Exp $
d8 2
@


1.1.1.1
log
@import ports/www/rackmonkey, feedback/ok jasper@@. requires up-to-date
infrastructure/mk/bsd.port.mk to fix pkg-readmes ownership.

RackMonkey is a tool for managing racks of equipment such as servers
and switches. You can keep track of what's where, which OS it runs,
who it belongs to and what it's used for. RackMonkey quickly finds
any device and draws a rack diagram of its location.
@
text
@@
