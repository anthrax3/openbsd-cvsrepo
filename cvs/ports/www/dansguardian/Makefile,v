head	1.18;
access;
symbols
	OPENBSD_6_1:1.16.0.6
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.4
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.15.0.12
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.15.0.8
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.6
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.4
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.2
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.14.0.2
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.13.0.2
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.6
	OPENBSD_5_0:1.12.0.4
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.4
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.7.0.4
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.2
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	aanriot_20070607:1.1.1.1
	aanriot:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.07.16.19.19.03;	author espie;	state Exp;
branches;
next	1.17;
commitid	tt0GhWK5c4uf9ILG;

1.17
date	2017.04.10.11.46.35;	author sthen;	state Exp;
branches;
next	1.16;
commitid	HY6VNZxjJWzKQFDV;

1.16
date	2015.12.18.11.08.46;	author sthen;	state Exp;
branches;
next	1.15;
commitid	4vTaZkAbvZybn00A;

1.15
date	2013.03.11.11.44.41;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2013.01.18.15.04.09;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2012.04.28.10.52.09;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.22.08.36.47;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.11.12.35.09;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.19.08.02.53;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.06.11.12.41.13;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.04.18.14.42.41;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2008.05.23.14.32.08;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2008.04.21.18.32.06;	author mbalmer;	state Exp;
branches;
next	1.5;

1.5
date	2008.04.21.17.59.36;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2007.10.27.23.44.41;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2007.08.29.09.17.04;	author aanriot;	state Exp;
branches;
next	1.2;

1.2
date	2007.06.07.14.36.46;	author aanriot;	state Exp;
branches;
next	1.1;

1.1
date	2007.06.07.13.16.14;	author aanriot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.06.07.13.16.14;	author aanriot;	state Exp;
branches;
next	;


desc
@@


1.18
log
@use COMPILER_LIBCXX where applicable
@
text
@# $OpenBSD: Makefile,v 1.17 2017/04/10 11:46:35 sthen Exp $

# note, this isn't really maintained upstream any more
# see e2guardian.org for a maintained fork

COMMENT =	content scanning web filter
DISTNAME =	dansguardian-2.12.0.3
EXTRACT_SUFX =	.tar.bz2
CATEGORIES =	www net

HOMEPAGE =	http://www.dansguardian.org/

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		c m pcre pcreposix ${COMPILER_LIBCXX} z

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=dansguardian/}

LIB_DEPENDS =		devel/pcre

CONFIGURE_STYLE =	gnu
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS =	--with-proxygroup=_dansguardian \
			--with-proxyuser=_dansguardian \
			--enable-segv-backtrace=no \
			--enable-clamd

FLAVORS =		debug
FLAVOR ?=
.if ${FLAVOR:Mdebug}
CONFIGURE_ARGS +=	--with-dgdebug
.endif

FAKE_FLAGS +=		DGCONFDIR=${PREFIX}/share/examples/dansguardian \
			rel_group=_dansguardian rel_user=_dansguardian

.include <bsd.port.mk>
@


1.17
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/12/18 11:08:46 sthen Exp $
d16 1
a16 1
WANTLIB =		c m pcre pcreposix ${LIBCXX} z
@


1.16
log
@dansguardian doesn't seem actively developed any more, add a comment
to the Makefile pointing at the e2guardian fork
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/11 11:44:41 espie Exp $
d16 1
a16 1
WANTLIB =		c m pcre pcreposix stdc++ z
@


1.15
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.14 2013/01/18 15:04:09 sthen Exp $
@


1.14
log
@- update to DansGuardian 2.12.0.3, modified from a diff from abieber
- add an rc script
- fix incompatibility with pcre 8.3+, patch from Debian
- distfiles are now on sourceforge
- drop maintainer; no response to emails

ok abieber@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/04/28 10:52:09 ajacoutot Exp $
a11 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.13
log
@--localstatedir=/var is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/22 08:36:47 espie Exp $
d4 2
a5 1
DISTNAME =	dansguardian-2.10.1.1
a9 2
MAINTAINER =	Bartosz Kuzma <bartosz.kuzma@@gmail.com>

d16 1
a16 1
WANTLIB =		c execinfo m pcre pcreposix stdc++ z
d18 1
a18 6
# This is deliberately not downloaded directly from the author's
# master site, since although it is GPL code, the author only
# grants commercial users permission to download it *once* from
# official sources. http://dansguardian.org/?page=copyright2
MASTER_SITES =		http://spacehopper.org/mirrors/
#MASTER_SITES =		http://dansguardian.org/downloads/2/Stable/
d20 1
a20 2
LIB_DEPENDS =		devel/pcre \
			devel/libexecinfo
d27 1
a27 1
			--enable-segv-backtrace \
d29 6
a34 1
USE_GROFF =		Yes
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/11 12:35:09 sthen Exp $
d32 1
a32 2
CONFIGURE_ARGS =	--localstatedir=/var \
			--with-proxygroup=_dansguardian \
@


1.11
log
@new-style LIB_DEPENDS/REVISION/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/10/19 08:02:53 espie Exp $
d26 2
a27 2
LIB_DEPENDS =		::devel/pcre \
			::devel/libexecinfo
d37 1
a37 1
USE_GROFF =	Yes
@


1.10
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/06/11 12:41:13 sthen Exp $
d17 1
a17 1
WANTLIB =		c m stdc++ z
d26 2
a27 2
LIB_DEPENDS =		pcre.>=1,pcreposix.>=1::devel/pcre \
			execinfo::devel/libexecinfo
@


1.9
log
@update to 2.10.1.1, some testing from Steven Surdock, maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/04/18 14:42:41 sthen Exp $
d37 1
@


1.8
log
@- update dansguardian to 2.10.0.3

- remove clamav flavour in favour of enabling clamd support in
the main package.

- rearrange the Makefile slightly

the clamav flavour was using libclamav, which past experience shows
to not be a stable interface to the clamav virus scanner; dansguardian
also supports scanning via the clamd socket, this is now enabled
instead (by default since it doesn't add a required dependency).

note: those currently using the clamav flavour and upgrading will
need to adjust their configuration.

maintainer timeout. on ports@@ for a few days, lightly tested here
but lacking test reports from real users.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/05/23 14:32:08 sthen Exp $
d4 1
a4 1
DISTNAME =	dansguardian-2.10.0.3
d24 1
@


1.7
log
@remove curl-related dependencies from WANTLIB for the clamav flavour
and bump; clamav used to pull in curl but it was removed some time ago,
resulting in broken dansguardian,-clamav packages. thanks to qgiovanni
at gmail dot com for pointing these out. update license marker while
there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/04/21 18:32:06 mbalmer Exp $
d3 3
a5 4
COMMENT=	true web content filtering for all
DISTNAME=	dansguardian-2.9.8.5
PKGNAME=	${DISTNAME}p3
CATEGORIES=	www net
d7 1
a7 1
HOMEPAGE=	http://www.dansguardian.org/
d9 1
a9 1
MAINTAINER=	Bartosz Kuzma <bartosz.kuzma@@gmail.com>
d12 6
a17 5
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c m stdc++ z
d23 1
a23 1
MASTER_SITES=		http://www.bsdfrog.org/OpenBSD/distfiles/
d25 2
a26 1
LIB_DEPENDS=		pcre.>=1,pcreposix.>=1::devel/pcre
d28 8
a35 13
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--localstatedir=/var \
		--with-proxygroup=_dansguardian \
		--with-proxyuser=_dansguardian

FLAVORS=clamav
FLAVOR?=

.if ${FLAVOR:L:Mclamav}
WANTLIB+=	bz2 gmp iconv pthread
LIB_DEPENDS+=	clamav.>=1::security/clamav
CONFIGURE_ARGS+=--enable-clamav
.endif
d37 2
a38 2
FAKE_FLAGS+=	sysconfdir=${PREFIX}/share/examples \
		rel_group=_dansguardian rel_user=_dansguardian
@


1.6
log
@Fix package build after ClamAV update.  Option ArchiveMaxCompressionRatio
is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/04/21 17:59:36 sthen Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p2
d12 1
a12 1
# GPL
d36 1
a36 1
WANTLIB+=	bz2 crypto curl gmp iconv idn pthread ssl
@


1.5
log
@Add Makefile comments noting the restrictions about commercial
users downloading this from official distribution sources.
(We are in compliance, but without an explanation, someone
might not notice this if they update it later).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/10/27 23:44:41 ajacoutot Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p1
@


1.4
log
@- domain name change; fix MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/08/29 09:17:04 aanriot Exp $
d19 4
@


1.3
log
@fix the SYNOPSIS in dansguardian.8 .

"looks fine" Bartosz Kuzma (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/06/07 14:36:46 aanriot Exp $
d19 1
a19 1
MASTER_SITES=		http://www.obsd.fr/OpenBSD/distfiles/
@


1.2
log
@change MASTER_SITES because of damn license issues,
"it's GPL but blablabla"...

spotted by Stuart Henderson <stu@@spacehopper.org>;
thanks to ajacoutot@@ for hosting the distfile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/06/07 13:16:14 aanriot Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
d19 1
a19 1
MASTER_SITES=		http://dansguardian.org/downloads/2/Beta/
@


1.1.1.1
log
@DansGuardian is an award winning Open Source web content filter which
currently runs on Linux, FreeBSD, OpenBSD, NetBSD, Mac OS X, HP-UX, and
Solaris. It filters the actual content of pages based on many methods
including phrase matching, PICS filtering and URL filtering. It does not
purely filter based on a banned list of sites like lesser totally
commercial filters.

from Bartosz Ku??ma <i486@@o2.pl>.
ok ajacoutot@@
@
text
@@
