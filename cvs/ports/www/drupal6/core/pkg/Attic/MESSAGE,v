head	1.4;
access;
symbols
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2010.11.15.12.58.52;	author stephan;	state dead;
branches;
next	1.3;

1.3
date	2009.10.01.12.28.34;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.17.09.33.12;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.03.23.26.48;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@switch to pkg-readme, ok jasper@@
@
text
@To enable a decent configuration of drupal, please create a symbolic
link from ${PREFIX}/conf/modules.sample/drupal6.conf
to ${PREFIX}/conf/modules/drupal6.conf

ln -s ${PREFIX}/conf/modules.sample/drupal6.conf \
	${PREFIX}/conf/modules

In order to run with standard OpenBSD chroot'ed httpd:

- make sure you can connect to your database.

Create a directory for the mysql socket.

	mkdir -p /var/www/var/run/mysql

Adjust ${SYSCONFDIR}/my.cnf to put the mysql socket into the chroot.

	[client]
	socket = /var/www/var/run/mysql/mysql.sock

	[mysqld]
	socket = /var/www/var/run/mysql/mysql.sock

Don't forget to set the character set to utf8 in your database.

In mysql, assuming you're connected as admin initially.

create user drupal@@localhost identified by 'password';
create database drupal character set utf8;
grant all on drupal.* to drupal@@localhost;

In postgresql, assuming an `admin' account has all rights:

createuser -U admin --pwprompt --no-superuser --createdb --no-createrole drupal
createdb -U drupal -E UTF8 drupal

Updating from a drupal5 installation:

a lot of things now work. Major stumbling blocks:
* views are lost. Recreating them may be quick, or very painful if you
have a lot of them.
* usernodes no longer exist.
* image has been replaced by imagefield.

- first back-up your installation, using backup and migrate
- then DISABLE all 3rd party modules
- put the drupal5 site offline
- make sure you have enough space (database, website...)
- install the drupal6 packages you need.
- cp the defaults.settings.php to the settings.php, edit it to point to
your existing database. You will often also need $update_free_access=TRUE
- point your browser to update.php
- assuming things work, go to the /admin page, enable the modules you need
- rerun update.php
- you will often need to reconstruct the permissions
- don't forget to reset $update_free_access=FALSE
@


1.3
log
@Tweak MESSAGE now that /var/www/tmp/ is here by default.
@
text
@@


1.2
log
@a few minor tweaks:
- don't reload rewrite if it's already there, one less warning for httpd
- pinpoint translation errors
- document the painful state of updates from drupal5...
@
text
@a23 6
- file uploads require a tmp directory writable by www.
.e.g., with the default php setup:

	mkdir -p /var/www/tmp
	chown www /var/www/tmp

@


1.1
log
@hate cvs... "core" directory with stuff in it should be okay by default.
noticed by naddy@@
@
text
@d42 21
@

