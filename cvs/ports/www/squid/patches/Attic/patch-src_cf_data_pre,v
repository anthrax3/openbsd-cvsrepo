head	1.39;
access;
symbols
	OPENBSD_5_5:1.38.0.2
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.37.0.2
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.34.0.2
	OPENBSD_5_3_BASE:1.34
	OPENBSD_5_2:1.32.0.6
	OPENBSD_5_2_BASE:1.32
	OPENBSD_5_1_BASE:1.32
	OPENBSD_5_1:1.32.0.4
	OPENBSD_5_0:1.32.0.2
	OPENBSD_5_0_BASE:1.32
	OPENBSD_4_9:1.31.0.10
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.31.0.8
	OPENBSD_4_8_BASE:1.31
	OPENBSD_4_7:1.31.0.6
	OPENBSD_4_7_BASE:1.31
	OPENBSD_4_6:1.31.0.4
	OPENBSD_4_6_BASE:1.31
	OPENBSD_4_5:1.31.0.2
	OPENBSD_4_5_BASE:1.31
	OPENBSD_4_4:1.28.0.2
	OPENBSD_4_4_BASE:1.28
	OPENBSD_4_3:1.26.0.2
	OPENBSD_4_3_BASE:1.26
	OPENBSD_4_2:1.24.0.2
	OPENBSD_4_2_BASE:1.24
	OPENBSD_4_1:1.22.0.2
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.19.0.4
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.19.0.2
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.17.0.2
	OPENBSD_3_8_BASE:1.17
	OPENBSD_3_7:1.16.0.2
	OPENBSD_3_7_BASE:1.16
	OPENBSD_3_6:1.15.0.2
	OPENBSD_3_6_BASE:1.15
	OPENBSD_3_5:1.14.0.2
	OPENBSD_3_5_BASE:1.14
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.8.0.4
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.8.0.2
	OPENBSD_3_2_BASE:1.8
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2;
locks; strict;
comment	@# @;


1.39
date	2014.04.21.19.22.06;	author sthen;	state dead;
branches;
next	1.38;

1.38
date	2013.09.17.16.56.24;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2013.05.25.12.33.05;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2013.04.30.18.41.50;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.12.14.58.16;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2012.12.04.10.40.19;	author sthen;	state Exp;
branches
	1.34.2.1;
next	1.33;

1.33
date	2012.11.28.17.45.29;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2011.05.30.20.56.30;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2009.02.08.15.04.33;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2009.01.08.03.37.24;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2008.08.20.16.35.15;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2008.07.16.21.18.28;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2008.05.31.10.07.45;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2007.12.04.01.27.13;	author todd;	state Exp;
branches;
next	1.25;

1.25
date	2007.09.10.17.49.23;	author merdely;	state Exp;
branches;
next	1.24;

1.24
date	2007.05.20.00.52.32;	author todd;	state Exp;
branches;
next	1.23;

1.23
date	2007.04.12.15.10.02;	author robert;	state Exp;
branches;
next	1.22;

1.22
date	2007.02.01.07.46.24;	author todd;	state Exp;
branches;
next	1.21;

1.21
date	2007.01.13.16.13.29;	author todd;	state Exp;
branches;
next	1.20;

1.20
date	2006.10.03.05.00.49;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2005.10.29.23.26.39;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2005.09.25.17.03.32;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2005.05.25.02.27.13;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2004.10.20.21.44.21;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2004.07.11.17.00.47;	author brad;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2004.03.03.01.20.42;	author brad;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2004.02.16.10.21.20;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2003.10.17.18.03.55;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2003.07.08.20.43.21;	author brad;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	2003.07.07.17.44.44;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2003.05.13.20.12.03;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2002.09.20.01.27.11;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2002.08.23.14.10.20;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2002.07.24.18.14.09;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2002.06.30.18.29.22;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2002.05.02.02.37.05;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.17.18.03.21;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2002.03.21.21.17.54;	author brad;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2002.02.20.20.31.26;	author brad;	state Exp;
branches;
next	;

1.2.2.1
date	2002.06.30.18.36.34;	author brad;	state Exp;
branches;
next	;

1.11.2.1
date	2004.04.16.01.04.00;	author brad;	state Exp;
branches;
next	;

1.14.2.1
date	2005.01.30.08.43.21;	author sturm;	state Exp;
branches;
next	;

1.15.2.1
date	2005.01.30.08.44.29;	author sturm;	state Exp;
branches;
next	;

1.34.2.1
date	2013.05.01.08.53.27;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.39
log
@remove dead patch files
@
text
@$OpenBSD: patch-src_cf_data_pre,v 1.38 2013/09/17 16:56:24 sthen Exp $

30 seconds is too long for rc.d

--- src/cf.data.pre.orig	Wed Sep 11 05:08:38 2013
+++ src/cf.data.pre	Tue Sep 17 16:29:48 2013
@@@@ -5299,7 +5299,7 @@@@ NAME: shutdown_lifetime
 COMMENT: time-units
 TYPE: time_t
 LOC: Config.shutdownLifetime
-DEFAULT: 30 seconds
+DEFAULT: 20 seconds
 DOC_START
 	When SIGTERM or SIGHUP is received, the cache is put into
 	"shutdown pending" mode until all active sockets are closed.
@


1.38
log
@update to squid 3.3.9
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.37 2013/05/25 12:33:05 sthen Exp $
@


1.37
log
@update to squid 3.3.5
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.36 2013/04/30 18:41:50 sthen Exp $
d5 3
a7 3
--- src/cf.data.pre.orig	Mon May 20 12:48:55 2013
+++ src/cf.data.pre	Sat May 25 12:08:28 2013
@@@@ -5297,7 +5297,7 @@@@ NAME: shutdown_lifetime
@


1.36
log
@Major update to Squid 3.3.4 (moving the port from the 3.2 branch to 3.3).
New features include:

- SQL Database logging helper
- Time-Quota session helper
- Custom HTTP request headers
- SSL-Bump Server First
- Server Certificate Mimic

While there, add notes to README-main about increasing the number of
file descriptors via login.conf.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.35 2013/03/12 14:58:16 sthen Exp $
d3 1
a3 1
30 seconds is too slow for rc.d
d5 3
a7 3
--- src/cf.data.pre.orig	Sat Apr 27 04:34:48 2013
+++ src/cf.data.pre	Sat Apr 27 16:24:25 2013
@@@@ -5284,7 +5284,7 @@@@ NAME: shutdown_lifetime
@


1.35
log
@update to Squid 3.2.9, various fixes including DoS affecting 3.2.0.9 and up
(CVE-2013-1839).
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.34 2012/12/04 10:40:19 sthen Exp $
d5 3
a7 3
--- src/cf.data.pre.orig	Tue Mar 12 10:15:58 2013
+++ src/cf.data.pre	Tue Mar 12 14:21:28 2013
@@@@ -4850,7 +4850,7 @@@@ NAME: shutdown_lifetime
@


1.34
log
@update to Squid 3.2.4
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.33 2012/11/28 17:45:29 sthen Exp $
d5 3
a7 3
--- src/cf.data.pre.orig	Sun Dec  2 09:23:10 2012
+++ src/cf.data.pre	Tue Dec  4 00:44:33 2012
@@@@ -4767,7 +4767,7 @@@@ NAME: shutdown_lifetime
@


1.34.2.1
log
@MFC update to squid 3.2.11; includes fix for a denial-of-service affecting
3.2.0.9 and up (CVE-2013-1839).
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.35 2013/03/12 14:58:16 sthen Exp $
d5 3
a7 3
--- src/cf.data.pre.orig	Tue Mar 12 10:15:58 2013
+++ src/cf.data.pre	Tue Mar 12 14:21:28 2013
@@@@ -4850,7 +4850,7 @@@@ NAME: shutdown_lifetime
@


1.33
log
@Update to Squid 3.2.3.

This is merged from work by myself and Matthias Pitzl @@ genua, thanks to
Rodolfo Gouveia for testing with NTLM.

Flavours have been removed:

- the external helper programs for NTLM/LDAP are now in subpackages:
squid-ldap and squid-ntlm.

- SNMP support is built by default in Squid 3.x so this has moved
to the main package (no external dependencies for this).
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- src/cf.data.pre.orig	Sat Oct 20 13:39:49 2012
+++ src/cf.data.pre	Fri Nov  9 10:14:31 2012
@@@@ -4765,7 +4765,7 @@@@ NAME: shutdown_lifetime
@


1.32
log
@- reduce the default shutdown_lifetime to 20s; previously it was 30s which
is the maximum time rc.subr waits for a daemon, so usually it would end up
being forcefully killed (i.e. unclean shutdown -> cache must be rescanned
at next startup). suggested by aja@@, diff from Brad.

- adjust PLIST to prevent warnings with pkg_delete -c, from aja@@ ok Brad.
@
text
@d1 7
a7 4
$OpenBSD: patch-src_cf_data_pre,v 1.31 2009/02/08 15:04:33 sthen Exp $
--- src/cf.data.pre.orig	Mon Nov  9 17:38:57 2009
+++ src/cf.data.pre	Sun May 29 16:36:32 2011
@@@@ -3738,7 +3738,7 @@@@ NAME: shutdown_lifetime
a15 18
@@@@ -3787,7 +3787,7 @@@@ DOC_END
 
 NAME: cache_effective_user
 TYPE: string
-DEFAULT: nobody
+DEFAULT: _squid
 LOC: Config.effectiveUser
 DOC_START
 	If you start Squid as root, it will change its effective/real
@@@@ -3801,7 +3801,7 @@@@ DOC_END
 
 NAME: cache_effective_group
 TYPE: string
-DEFAULT: none
+DEFAULT: _squid
 LOC: Config.effectiveGroup
 DOC_START
 	If you want Squid to run with a specific GID regardless of
@


1.31
log
@bug fix update to Squid 2.7-STABLE6, from Brad.
@
text
@d1 12
a12 3
$OpenBSD: patch-src_cf_data_pre,v 1.30 2009/01/08 03:37:24 sthen Exp $
--- src/cf.data.pre.orig	Mon Feb  2 06:28:55 2009
+++ src/cf.data.pre	Fri Feb  6 11:03:31 2009
@


1.30
log
@update to 2.7.STABLE5, various bugfixes. From Brad (and running here ~3wks).
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.29 2008/08/20 16:35:15 brad Exp $
--- src/cf.data.pre.orig	Wed Sep 24 22:33:37 2008
+++ src/cf.data.pre	Sat Oct 25 06:21:46 2008
@@@@ -3778,7 +3778,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3792,7 +3792,7 @@@@ DOC_END
@


1.29
log
@Upgrade Squid to 2.7-STABLE4

ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.28 2008/07/16 21:18:28 brad Exp $
--- src/cf.data.pre.orig	Thu Jul 10 05:47:28 2008
+++ src/cf.data.pre	Fri Aug  8 22:44:01 2008
@@@@ -3755,7 +3755,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3769,7 +3769,7 @@@@ DOC_END
@


1.28
log
@Upgrade Squid to 2.7-STABLE3.

ok okan@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.27 2008/05/31 10:07:45 jasper Exp $
--- src/cf.data.pre.orig	Tue Jun 24 18:54:18 2008
+++ src/cf.data.pre	Sun Jun 29 03:10:15 2008
@@@@ -3753,7 +3753,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3767,7 +3767,7 @@@@ DOC_END
@


1.27
log
@- update squid to 2.6STABLE20
- update license marker
- remove transparent flavor
- add ldap flavor

from brad@@ (MAINTAINER), testing by several users
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.26 2007/12/04 01:27:13 todd Exp $
--- src/cf.data.pre.orig	Mon Mar 17 19:34:14 2008
+++ src/cf.data.pre	Fri Apr 18 18:27:32 2008
@@@@ -3390,7 +3390,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3404,7 +3404,7 @@@@ DOC_END
@


1.26
log
@update to 2.6.STABLE17
from maint; works and builds ok for me
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.25 2007/09/10 17:49:23 merdely Exp $
--- src/cf.data.pre.orig	Mon Nov 26 06:03:45 2007
+++ src/cf.data.pre	Sun Dec  2 12:29:01 2007
@@@@ -3389,7 +3389,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3403,7 +3403,7 @@@@ DOC_END
@


1.25
log
@Update to Squid 2.6.STABLE16.

From brad (MAINTAINER)
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.24 2007/05/20 00:52:32 todd Exp $
--- src/cf.data.pre.orig	Wed Sep  5 17:50:15 2007
+++ src/cf.data.pre	Wed Sep  5 21:00:34 2007
@@@@ -3374,7 +3374,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3388,7 +3388,7 @@@@ DOC_END
@


1.24
log
@update to 2.6 stable13, from brad@@ (maint)
ok kili@@ tested by me
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.23 2007/04/12 15:10:02 robert Exp $
--- src/cf.data.pre.orig	Tue Apr 24 17:30:03 2007
+++ src/cf.data.pre	Sat May 12 23:44:31 2007
@@@@ -3311,7 +3311,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3326,7 +3326,7 @@@@ DOC_END
@


1.23
log
@update to version 2.6.STABLE12 (regen patches while here);

from MAINTAINER; Brad <brad@@comstyle.com>
@
text
@d1 3
a3 3
$OpenBSD: patch-src_cf_data_pre,v 1.22 2007/02/01 07:46:24 todd Exp $
--- src/cf.data.pre.orig	Sat Feb  3 22:59:24 2007
+++ src/cf.data.pre	Thu Apr 12 11:26:11 2007
@


1.22
log
@bugfix maintenance release update for Squid.
from maint brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.21 2007/01/13 16:13:29 todd Exp $
--- src/cf.data.pre.orig	Fri Jan 19 17:03:03 2007
+++ src/cf.data.pre	Wed Jan 24 02:11:55 2007
@@@@ -3309,7 +3309,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3324,7 +3324,7 @@@@ DOC_END
@


1.21
log
@bugfix update; from maintainer (brad@@)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.20 2006/10/03 05:00:49 brad Exp $
--- src/cf.data.pre.orig	Tue Nov 28 18:51:52 2006
+++ src/cf.data.pre	Fri Dec 22 23:55:29 2006
@@@@ -3285,7 +3285,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3300,7 +3300,7 @@@@ DOC_END
@


1.20
log
@upgrade to 2.6.STABLE4

Squid 2.6 supports kqueue and hw accelerated SSL via OpenSSL,
as well as many other improvements.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.19 2005/10/29 23:26:39 brad Exp $
--- src/cf.data.pre.orig	Fri Sep 22 02:36:51 2006
+++ src/cf.data.pre	Tue Sep 26 19:30:13 2006
@@@@ -3280,7 +3280,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -3295,7 +3295,7 @@@@ DOC_END
@


1.19
log
@upgrade to 2.5.STABLE12

- [Major] Error introduced in 2.5.STABLE11 causing truncated responses
  when using delay pools (Bug #1405)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.18 2005/09/25 17:03:32 brad Exp $
--- src/cf.data.pre.orig	Thu Oct 20 13:28:08 2005
+++ src/cf.data.pre	Tue Oct 25 21:27:32 2005
@@@@ -2482,7 +2482,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -2497,7 +2497,7 @@@@ DOC_END
@


1.18
log
@upgrade to 2.5.STABLE11

Alex Masterov has reported a vulnerability in Squid,
which potentially can be exploited by malicious people
to cause a DoS.

The vulnerability is caused due to an unspecified error
in the "sslConnectTimeout()" function after handling
malformed requests. This may be exploited to crash Squid.

CAN-2005-2796
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.17 2005/05/25 02:27:13 brad Exp $
--- src/cf.data.pre.orig	Tue Sep 13 09:44:35 2005
+++ src/cf.data.pre	Mon Sep 19 11:01:59 2005
@@@@ -2471,7 +2471,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -2486,7 +2486,7 @@@@ DOC_END
@


1.17
log
@upgrade to 2.5.STABLE10

- Malicious users may spoof DNS lookups if the DNS client UDP port (random,
  assigned by OS at startup) is unfiltered and your network is not protected
  from IP spoofing.
- CVE-1999-0710, adds access controls to the cachemgr.cgi script, preventing
  it from being abused to reach other servers than allowed in a local
  configuration file.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.16 2004/10/20 21:44:21 brad Exp $
--- src/cf.data.pre.orig	Tue May 10 19:08:40 2005
+++ src/cf.data.pre	Wed May 18 18:10:13 2005
@@@@ -2446,7 +2446,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -2461,7 +2461,7 @@@@ DOC_END
@


1.16
log
@upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.15 2004/07/11 17:00:47 brad Exp $
--- src/cf.data.pre.orig	Fri Oct  8 13:41:10 2004
+++ src/cf.data.pre	Wed Oct 20 16:44:53 2004
@@@@ -2425,7 +2425,7 @@@@ DOC_END
d13 1
a13 1
@@@@ -2440,7 +2440,7 @@@@ DOC_END
@


1.15
log
@upgrade to Squid 2.5.STABLE6
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.14 2004/03/03 01:20:42 brad Exp $
--- src/cf.data.pre.orig	Fri Apr 30 16:40:39 2004
+++ src/cf.data.pre	Sun Jul 11 12:22:44 2004
@@@@ -2389,13 +2389,13 @@@@ DOC_END
d11 3
a13 1
 DOC_NONE
d21 1
a21 1
 
@


1.15.2.1
log
@MFC:

upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.

MFC:

upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.

---
Fix 2 security issues...

A bug exists in the code that parses responses from Gopher servers.
The bug results in a buffer overflow if a Gopher server returns a
line longer than 4096 bytes.  The overflow results in memory
corruption and usually crashes Squid.

CAN-2005-0094

A bug exists in the code that parses WCCP messages.  An attacker
that sends a malformed WCCP messages, with a spoofed source address
matching Squid's "home router" can crash Squid.

CAN-2005-0095

ok brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.15 2004/07/11 17:00:47 brad Exp $
--- src/cf.data.pre.orig	Fri Oct  8 19:41:10 2004
+++ src/cf.data.pre	Thu Jan 20 22:33:45 2005
@@@@ -2425,7 +2425,7 @@@@ DOC_END
d11 1
a11 3
 DOC_START
 	If you start Squid as root, it will change its effective/real
@@@@ -2440,7 +2440,7 @@@@ DOC_END
d19 1
a19 1
 	If you want Squid to run with a specific GID regardless of
@


1.14
log
@upgrade to Squid 2.5.STABLE5
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.13 2004/02/16 10:21:20 brad Exp $
--- src/cf.data.pre.orig	2004-02-10 16:01:21.000000000 -0500
+++ src/cf.data.pre	2004-03-02 20:10:06.000000000 -0500
@@@@ -2383,13 +2383,13 @@@@ DOC_END
@


1.14.2.1
log
@MFC:

upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.

---
Fix 2 security issues...

A bug exists in the code that parses responses from Gopher servers.
The bug results in a buffer overflow if a Gopher server returns a
line longer than 4096 bytes.  The overflow results in memory
corruption and usually crashes Squid.

CAN-2005-0094

A bug exists in the code that parses WCCP messages.  An attacker
that sends a malformed WCCP messages, with a spoofed source address
matching Squid's "home router" can crash Squid.

CAN-2005-0095

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.14 2004/03/03 01:20:42 brad Exp $
d4 1
a4 1
@@@@ -2425,7 +2425,7 @@@@ DOC_END
d11 1
a11 3
 DOC_START
        If you start Squid as root, it will change its effective/real
@@@@ -2440,7 +2440,7 @@@@ DOC_END
d19 1
a19 1
        If you want Squid to run with a specific GID regardless of 
@


1.13
log
@add 29 of the latest distribution patches.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.12 2003/10/17 18:03:55 brad Exp $
--- src/cf.data.pre.orig	2004-02-16 05:03:04.000000000 -0500
+++ src/cf.data.pre	2004-02-16 05:03:05.000000000 -0500
@@@@ -2362,13 +2362,13 @@@@ DOC_END
@


1.12
log
@upgrade to Squid 2.5.STABLE4
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.11 2003/07/08 20:43:21 brad Exp $
--- src/cf.data.pre.orig	2003-09-02 03:49:32.000000000 -0400
+++ src/cf.data.pre	2003-10-17 13:35:41.000000000 -0400
@@@@ -2325,13 +2325,13 @@@@ DOC_END
@


1.11
log
@switch to new schema for user/group.
--
From: sturm@@
Thanks to mpech@@ for testing and pointing out the user/group
I almost missed in MESSAGE.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.10 2003/07/07 17:44:44 brad Exp $
--- src/cf.data.pre.orig	Wed May 21 10:34:38 2003
+++ src/cf.data.pre	Fri May 30 10:17:35 2003
@@@@ -2309,13 +2309,13 @@@@ DOC_END
@


1.11.2.1
log
@MFC:
upgrade to Squid 2.5.STABLE5 + latest patches

A bug in Squid that allows users to bypass certain access controls.
Squid versions 2.5.STABLE4 and earlier contain a bug in the "%xx"
URL decoding function. It may insert a NULL character into decoded
URLs, which may allow users to bypass url_regex ACLs.

http://www.squid-cache.org/Advisories/SQUID-2004_1.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.14 2004/03/03 01:20:42 brad Exp $
--- src/cf.data.pre.orig	2004-02-10 16:01:21.000000000 -0500
+++ src/cf.data.pre	2004-03-02 20:10:06.000000000 -0500
@@@@ -2383,13 +2383,13 @@@@ DOC_END
@


1.10
log
@upgrade to Squid 2.5.STABLE3

throw in the SSL gatewaying support, this is not enabled by default.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cf_data_pre,v 1.9 2003/05/13 20:12:03 brad Exp $
d9 1
a9 1
+DEFAULT: squid
d16 1
a16 1
+DEFAULT: squid
@


1.9
log
@upgrade to Squid 2.5.STABLE2
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.8 2002/09/20 01:27:11 brad Exp $
--- src/cf.data.pre.orig	Tue Feb  4 22:27:50 2003
+++ src/cf.data.pre	Mon May 12 07:03:22 2003
@@@@ -2286,13 +2286,13 @@@@ DOC_END
@


1.8
log
@upgrade to Squid 2.5.PRE13
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.7 2002/08/23 14:10:20 brad Exp $
--- src/cf.data.pre.orig	Wed Sep  4 09:35:01 2002
+++ src/cf.data.pre	Fri Sep 13 20:43:03 2002
@@@@ -2296,13 +2296,13 @@@@ DOC_END
@


1.7
log
@upgrade to Squid 2.5.PRE11
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.6 2002/07/24 18:14:09 brad Exp $
--- src/cf.data.pre.orig	Tue Aug 13 01:13:50 2002
+++ src/cf.data.pre	Fri Aug 23 09:28:07 2002
@@@@ -2332,13 +2332,13 @@@@ DOC_END
@


1.6
log
@upgrade to Squid 2.5.PRE10
- The squid binary has been moved from bin/ to sbin/
- The cachemgr CGI is statically linked now
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.5 2002/06/30 18:29:22 brad Exp $
--- src/cf.data.pre.orig	Sun Jul 21 19:45:03 2002
+++ src/cf.data.pre	Tue Jul 23 18:04:19 2002
@@@@ -2321,13 +2321,13 @@@@ DOC_END
@


1.5
log
@upgrade to Squid 2.5.PRE8
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.4 2002/05/02 02:37:05 brad Exp $
--- src/cf.data.pre.orig	Sun Jun 23 17:54:12 2002
+++ src/cf.data.pre	Wed Jun 26 18:46:02 2002
@@@@ -2303,13 +2303,13 @@@@ DOC_END
@


1.4
log
@upgrade to Squid 2.5.PRE7
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.3 2002/04/17 18:03:21 brad Exp $
--- src/cf.data.pre.orig	Sun Apr 21 10:10:44 2002
+++ src/cf.data.pre	Wed May  1 22:15:47 2002
@@@@ -2250,13 +2250,13 @@@@ DOC_END
@


1.3
log
@upgrade to Squid 2.5.PRE6
- PF patches integrated
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.2 2002/03/21 21:17:54 brad Exp $
--- src/cf.data.pre.orig	Sat Apr 13 18:32:07 2002
+++ src/cf.data.pre	Wed Apr 17 13:19:18 2002
@@@@ -2236,13 +2236,13 @@@@ DOC_END
@


1.2
log
@upgrade to Squid 2.5.PRE5
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.1 2002/02/20 20:31:26 brad Exp $
--- src/cf.data.pre.orig	Sun Feb 24 22:12:08 2002
+++ src/cf.data.pre	Wed Mar 20 22:47:49 2002
@@@@ -2233,13 +2233,13 @@@@ DOC_END
@


1.2.2.1
log
@MFC: SECURITY FIXES.
upgrade to Squid 2.5.PRE8
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cf_data_pre,v 1.5 2002/06/30 18:29:22 brad Exp $
--- src/cf.data.pre.orig	Sun Jun 23 17:54:12 2002
+++ src/cf.data.pre	Wed Jun 26 18:46:02 2002
@@@@ -2303,13 +2303,13 @@@@ DOC_END
@


1.1
log
@use uid/gid of squid:squid instead of nobody:nogroup
@
text
@d1 4
a4 4
$OpenBSD$
--- src/cf.data.pre.orig	Tue Jan 15 21:57:27 2002
+++ src/cf.data.pre	Wed Feb 20 09:18:58 2002
@@@@ -2222,13 +2222,13 @@@@ DOC_END
@

