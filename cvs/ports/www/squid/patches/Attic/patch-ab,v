head	1.6;
access;
symbols
	OPENBSD_2_8:1.5.0.2
	OPENBSD_2_8_BASE:1.5
	OPENBSD_2_7:1.2.0.4
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.1.1.1.0.4
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-Sep-13:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2001.01.15.17.22.01;	author brad;	state dead;
branches;
next	1.5;

1.5
date	2000.07.20.01.17.10;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2000.07.12.21.26.30;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2000.06.28.07.08.29;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.05.09.20.01.52;	author brad;	state Exp;
branches
	1.2.4.1;
next	1.1;

1.1
date	98.09.14.01.36.53;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.09.14.01.36.53;	author marc;	state Exp;
branches;
next	;

1.2.4.1
date	2000.09.15.05.22.15;	author marc;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove this patch, it's not needed anymore now that we're using GCC
2.95.3, unfortunately this bug still affects GCC 2.95.3 and thus the other
workaround patch has been left in place until the issue has been fixed.
@
text
@--- configure.orig	Wed Jul 19 20:38:22 2000
+++ configure	Wed Jul 19 20:41:03 2000
@@@@ -4191,18 +4191,6 @@@@
 		;;
 esac
 
-# Remove optimization for GCC 2.95.[12]
-# gcc -O[2] on *BSD and Linux (x86) causes pointers to magically become NULL
-if test "$GCC" = "yes"; then
-	GCCVER=`$CC -v 2>&1 | awk '$2 ==  "version" {print $3}'`
-	case "$GCCVER" in
-	2.95.[12])
-		echo "Removing -O for gcc on $host with GCC $GCCVER"
-		CFLAGS="`echo $CFLAGS | sed -e 's/-O[0-9]*//'`"
-		;;
-	esac
-fi
-
 # Recommended by Balint Nagy Endre <bne@@CareNet.hu>
 case "$host" in
 	*-univel-sysv4.2MP)
@


1.5
log
@upgrade to Squid 2.3.STABLE4
@
text
@@


1.4
log
@with these patches Squid now compiles with our ipf headers when using the
IPF Transparent proxying support
@
text
@d1 3
a3 24
--- configure.orig	Fri Apr 28 16:17:12 2000
+++ configure	Sun Jul  9 19:32:00 2000
@@@@ -673,12 +673,6 @@@@
 REGEXLIB=''	# -lregex
 LIBREGEX=''	# libregex.a
 
-if test "$libexecdir" = '${exec_prefix}/libexec'; then
-	libexecdir='${bindir}'
-	localstatedir='${prefix}'
-
-fi
-
 case "$host_os" in
 cygwin32|os2)
 	exec_suffix=".exe"
@@@@ -2301,6 +2295,7 @@@@
 	netinet/tcp.h \
 	netinet/ip_compat.h \
 	netinet/ip_fil.h \
+	netinet/ip_fil_compat.h \
 	netinet/ip_nat.h \
 	poll.h \
 	pwd.h \
@@@@ -4064,18 +4059,6 @@@@
a21 15
@@@@ -4338,6 +4321,14 @@@@
 EOF
 
     elif test "$ac_cv_header_netinet_ip_compat_h" = "yes" &&
+         test "$ac_cv_header_netinet_ip_fil_h" = "yes" &&
+         test "$ac_cv_header_netinet_ip_nat_h" = "yes" ; then
+        IPF_TRANSPARENT="yes"
+        cat >> confdefs.h <<\EOF
+#define IPF_TRANSPARENT 1
+EOF
+
+    elif test "$ac_cv_header_netinet_ip_fil_compat_h" = "yes" &&
          test "$ac_cv_header_netinet_ip_fil_h" = "yes" &&
          test "$ac_cv_header_netinet_ip_nat_h" = "yes" ; then
         IPF_TRANSPARENT="yes"
@


1.3
log
@upgrade to Squid 2.3.STABLE3

- NOTE: you can now override the dir used for cache/logs by using the
variable STATEDIR. i.e., "make STATEDIR=/alternate/dir package", and it
will be substituted into the INSTALL/DEINSTALL scripts.
@
text
@d2 1
a2 1
+++ configure	Wed Jun 28 00:52:33 2000
d16 9
a24 2
@@@@ -4063,18 +4057,6 @@@@
 
d27 1
a27 1
-
d39 1
a39 1
 
d42 16
@


1.2
log
@upgrade to Squid 2.2
@
text
@d1 3
a3 3
--- configure.orig	Tue Apr 20 23:36:03 1999
+++ configure	Fri Apr 23 12:53:10 1999
@@@@ -644,11 +644,11 @@@@
d12 1
a12 6
+#if test "$libexecdir" = '${exec_prefix}/libexec'; then
+#	libexecdir='${bindir}'
+#	localstatedir='${prefix}'
+#
+#fi
 
d15 20
@


1.2.4.1
log
@bring www as of cut-over date into 2.7 branch
@
text
@d1 5
a5 5
--- configure.orig	Wed Jul 19 20:38:22 2000
+++ configure	Wed Jul 19 20:41:03 2000
@@@@ -4191,18 +4191,6 @@@@
 		;;
 esac
d7 4
a10 10
-# Remove optimization for GCC 2.95.[12]
-# gcc -O[2] on *BSD and Linux (x86) causes pointers to magically become NULL
-if test "$GCC" = "yes"; then
-	GCCVER=`$CC -v 2>&1 | awk '$2 ==  "version" {print $3}'`
-	case "$GCCVER" in
-	2.95.[12])
-		echo "Removing -O for gcc on $host with GCC $GCCVER"
-		CFLAGS="`echo $CFLAGS | sed -e 's/-O[0-9]*//'`"
-		;;
-	esac
d12 8
a19 4
-
 # Recommended by Balint Nagy Endre <bne@@CareNet.hu>
 case "$host" in
 	*-univel-sysv4.2MP)
@


1.1
log
@Initial revision
@
text
@d1 3
a3 6

remove the bogus hack that effectively ignores the --localstatedir option

--- configure.orig	Sat Aug  8 13:57:15 1998
+++ configure	Sat Aug  8 13:58:00 1998
@@@@ -573,11 +573,11 @@@@
d18 2
a19 21
 if test -z "$CACHE_HTTP_PORT"; then
 	CACHE_HTTP_PORT="3128"
--- configure.in.orig	Sat Aug  8 13:57:35 1998
+++ configure.in	Wed Mar 18 10:11:58 1998
@@@@ -20,11 +20,11 @@@@
 LIBREGEX=''	# libregex.a
 
 dnl use directory structure of cached as default (hack)
-if test "$libexecdir" = '${exec_prefix}/libexec'; then
-	libexecdir='${bindir}'
-	localstatedir='${prefix}'
-
-fi
+#if test "$libexecdir" = '${exec_prefix}/libexec'; then
+#	libexecdir='${bindir}'
+#	localstatedir='${prefix}'
+#
+#fi
 
 if test -z "$CACHE_HTTP_PORT"; then
 	CACHE_HTTP_PORT="3128"
@


1.1.1.1
log
@squid port from d@@openbsd.org
@
text
@@
