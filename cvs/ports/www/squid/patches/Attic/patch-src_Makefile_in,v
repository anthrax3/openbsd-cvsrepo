head	1.18;
access;
symbols
	OPENBSD_5_2:1.17.0.10
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.8
	OPENBSD_5_0:1.17.0.6
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.17.0.4
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.15.0.6
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.15.0.4
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.15.0.2
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.12.0.2
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.10.0.4
	OPENBSD_4_0_BASE:1.10
	OPENBSD_3_9:1.10.0.2
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.9.0.2
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.8.0.2
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.7.0.2
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.6.0.4
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.4
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.1.0.2
	OPENBSD_3_1_BASE:1.1;
locks; strict;
comment	@# @;


1.18
date	2012.11.28.17.45.29;	author sthen;	state dead;
branches;
next	1.17;

1.17
date	2010.06.18.10.32.17;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2009.10.30.00.56.57;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2008.07.16.21.18.28;	author brad;	state Exp;
branches
	1.15.6.1;
next	1.14;

1.14
date	2007.09.10.17.49.23;	author merdely;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.20.00.52.32;	author todd;	state Exp;
branches;
next	1.12;

1.12
date	2006.11.13.02.11.39;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2006.10.03.05.00.49;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2005.10.29.23.26.39;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.25.02.27.13;	author brad;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2004.10.20.21.44.21;	author brad;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2004.07.11.17.00.47;	author brad;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2003.05.13.20.12.03;	author brad;	state Exp;
branches
	1.6.4.1;
next	1.5;

1.5
date	2002.08.23.14.10.20;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2002.07.24.18.14.09;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2002.06.30.18.29.22;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.17.18.03.21;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.20.01.17.03;	author brad;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2002.06.30.18.36.34;	author brad;	state Exp;
branches;
next	;

1.6.4.1
date	2005.01.30.08.43.21;	author sturm;	state Exp;
branches;
next	;

1.7.2.1
date	2005.01.30.08.44.29;	author sturm;	state Exp;
branches;
next	1.7.2.2;

1.7.2.2
date	2005.05.26.03.53.29;	author robert;	state Exp;
branches;
next	;

1.8.2.1
date	2005.05.26.03.47.27;	author robert;	state Exp;
branches;
next	1.8.2.2;

1.8.2.2
date	2005.11.02.09.40.35;	author sturm;	state Exp;
branches;
next	;

1.9.2.1
date	2005.11.02.09.41.14;	author sturm;	state Exp;
branches;
next	;

1.15.6.1
date	2010.02.09.03.07.43;	author william;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Update to Squid 3.2.3.

This is merged from work by myself and Matthias Pitzl @@ genua, thanks to
Rodolfo Gouveia for testing with NTLM.

Flavours have been removed:

- the external helper programs for NTLM/LDAP are now in subpackages:
squid-ldap and squid-ntlm.

- SNMP support is built by default in Squid 3.x so this has moved
to the main package (no external dependencies for this).
@
text
@$OpenBSD: patch-src_Makefile_in,v 1.17 2010/06/18 10:32:17 sthen Exp $
--- src/Makefile.in.orig	Sun Mar 14 16:27:27 2010
+++ src/Makefile.in	Thu Jun 17 22:13:15 2010
@@@@ -238,7 +238,7 @@@@ CPP = @@CPP@@
 CPPFLAGS = @@CPPFLAGS@@
 CRYPTLIB = @@CRYPTLIB@@
 CYGPATH_W = @@CYGPATH_W@@
-DEFS = @@DEFS@@ -DDEFAULT_CONFIG_FILE=\"$(DEFAULT_CONFIG_FILE)\"
+DEFS = @@DEFS@@ -DDEFAULT_CONFIG_FILE=\"$(sysconfdir)/squid.conf\"
 DEPDIR = @@DEPDIR@@
 DIGEST_AUTH_HELPERS = @@DIGEST_AUTH_HELPERS@@
 ECHO_C = @@ECHO_C@@
@@@@ -354,7 +354,7 @@@@ psdir = @@psdir@@
 sbindir = @@sbindir@@
 sharedstatedir = @@sharedstatedir@@
 srcdir = @@srcdir@@
-sysconfdir = @@sysconfdir@@
+sysconfdir = @@sysconfdir@@/squid
 target_alias = @@target_alias@@
 top_build_prefix = @@top_build_prefix@@
 top_builddir = @@top_builddir@@
@@@@ -609,8 +609,8 @@@@ EXTRA_DIST = \
 DEFAULT_HTTP_PORT = @@CACHE_HTTP_PORT@@
 DEFAULT_ICP_PORT = @@CACHE_ICP_PORT@@
 DEFAULT_PREFIX = $(prefix)
-DEFAULT_CONFIG_FILE = $(sysconfdir)/squid.conf
-DEFAULT_MIME_TABLE = $(sysconfdir)/mime.conf
+DEFAULT_CONFIG_FILE = $(prefix)/share/examples/squid/squid.conf
+DEFAULT_MIME_TABLE = $(prefix)/share/examples/squid/mime.conf
 DEFAULT_DNSSERVER = $(libexecdir)/`echo dnsserver | sed '$(transform);s/$$/$(EXEEXT)/'`
 DEFAULT_LOG_PREFIX = $(localstatedir)/logs
 DEFAULT_CACHE_LOG = $(DEFAULT_LOG_PREFIX)/cache.log
@@@@ -884,37 +884,37 @@@@ distclean-compile:
 @@am__fastdepCC_FALSE@@	$(COMPILE) -c `$(CYGPATH_W) '$<'`
 install-dataDATA: $(data_DATA)
 	@@$(NORMAL_INSTALL)
-	test -z "$(datadir)" || $(MKDIR_P) "$(DESTDIR)$(datadir)"
+	test -z "$(datadir)" || $(MKDIR_P) "$(DESTDIR)$(prefix)/share/examples/squid"
 	@@list='$(data_DATA)'; for p in $$list; do \
 	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
 	  f=$(am__strip_dir) \
-	  echo " $(dataDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(datadir)/$$f'"; \
-	  $(dataDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(datadir)/$$f"; \
+	  echo " $(dataDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(prefix)/share/examples/squid/$$f'"; \
+	  $(dataDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
 	done
 
 uninstall-dataDATA:
 	@@$(NORMAL_UNINSTALL)
 	@@list='$(data_DATA)'; for p in $$list; do \
 	  f=$(am__strip_dir) \
-	  echo " rm -f '$(DESTDIR)$(datadir)/$$f'"; \
-	  rm -f "$(DESTDIR)$(datadir)/$$f"; \
+	  echo " rm -f '$(DESTDIR)$(prefix)/share/examples/squid/$$f'"; \
+	  rm -f "$(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
 	done
 install-sysconfDATA: $(sysconf_DATA)
 	@@$(NORMAL_INSTALL)
-	test -z "$(sysconfdir)" || $(MKDIR_P) "$(DESTDIR)$(sysconfdir)"
+	test -z "$(sysconfdir)" || $(MKDIR_P) "$(DESTDIR)$(prefix)/share/examples/squid"
 	@@list='$(sysconf_DATA)'; for p in $$list; do \
 	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
 	  f=$(am__strip_dir) \
-	  echo " $(sysconfDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(sysconfdir)/$$f'"; \
-	  $(sysconfDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(sysconfdir)/$$f"; \
+	  echo " $(sysconfDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(prefix)/share/examples/squid/$$f'"; \
+	  $(sysconfDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
 	done
 
 uninstall-sysconfDATA:
 	@@$(NORMAL_UNINSTALL)
 	@@list='$(sysconf_DATA)'; for p in $$list; do \
 	  f=$(am__strip_dir) \
-	  echo " rm -f '$(DESTDIR)$(sysconfdir)/$$f'"; \
-	  rm -f "$(DESTDIR)$(sysconfdir)/$$f"; \
+	  echo " rm -f '$(DESTDIR)$(prefix)/share/examples/squid/$$f'"; \
+	  rm -f "$(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
 	done
 
 # This directory's subdirectories are mostly independent; you can cd
@@@@ -1096,7 +1096,7 @@@@ check: $(BUILT_SOURCES)
 all-am: Makefile $(PROGRAMS) $(DATA)
 installdirs: installdirs-recursive
 installdirs-am:
-	for dir in "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(sbindir)" "$(DESTDIR)$(datadir)" "$(DESTDIR)$(sysconfdir)"; do \
+	for dir in "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(sbindir)" "$(DESTDIR)$(prefix)/share/examples/squid"; do \
 	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
 	done
 install: $(BUILT_SOURCES)
@@@@ -1243,7 +1243,7 @@@@ cf.data: cf.data.pre Makefile
 	sed "\
 	s%@@DEFAULT_HTTP_PORT@@%$(DEFAULT_HTTP_PORT)%g;\
 	s%@@DEFAULT_ICP_PORT@@%$(DEFAULT_ICP_PORT)%g;\
-	s%@@DEFAULT_MIME_TABLE@@%$(DEFAULT_MIME_TABLE)%g;\
+	s%@@DEFAULT_MIME_TABLE@@%$(sysconfdir)/mime.conf%g;\
 	s%@@DEFAULT_DNSSERVER@@%$(DEFAULT_DNSSERVER)%g;\
 	s%@@DEFAULT_UNLINKD@@%$(DEFAULT_UNLINKD)%g;\
 	s%@@DEFAULT_PINGER@@%$(DEFAULT_PINGER)%g;\
@


1.17
log
@update to 2.7.STABLE9, from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.16 2009/10/30 00:56:57 sthen Exp $
@


1.16
log
@update to the latest bug fix release in the 2.7 branch. From Brad (maintainer).
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile_in,v 1.15 2008/07/16 21:18:28 brad Exp $
--- src/Makefile.in.orig	Thu Apr 30 21:24:42 2009
+++ src/Makefile.in	Thu Oct 29 18:44:21 2009
d22 1
a22 1
@@@@ -610,8 +610,8 @@@@ EXTRA_DIST = \
d33 1
a33 1
@@@@ -885,37 +885,37 @@@@ distclean-compile:
d81 1
a81 1
@@@@ -1097,7 +1097,7 @@@@ check: $(BUILT_SOURCES)
d90 1
a90 1
@@@@ -1244,7 +1244,7 @@@@ cf.data: cf.data.pre Makefile
@


1.15
log
@Upgrade Squid to 2.7-STABLE3.

ok okan@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.14 2007/09/10 17:49:23 merdely Exp $
--- src/Makefile.in.orig	Wed Jan  2 20:16:40 2008
+++ src/Makefile.in	Sun Jun 29 03:10:24 2008
@@@@ -241,7 +241,7 @@@@ CPP = @@CPP@@
d13 1
a13 2
@@@@ -397,7 +397,7 @@@@ program_transform_name = @@program_transform_name@@
 psdir = @@psdir@@
d16 1
d20 3
a22 3
 @@USE_DNSSERVER_FALSE@@DNSSOURCE = dns_internal.c
 @@USE_DNSSERVER_TRUE@@DNSSOURCE = dns.c
@@@@ -650,8 +650,8 @@@@ EXTRA_DIST = \
d33 2
a34 2
@@@@ -926,37 +926,37 @@@@ distclean-compile:
 uninstall-info-am:
d37 2
a38 2
-	test -z "$(datadir)" || $(mkdir_p) "$(DESTDIR)$(datadir)"
+	test -z "$(datadir)" || $(mkdir_p) "$(DESTDIR)$(prefix)/share/examples/squid"
d59 2
a60 2
-	test -z "$(sysconfdir)" || $(mkdir_p) "$(DESTDIR)$(sysconfdir)"
+	test -z "$(DESTDIR)$(prefix)/share/examples/squid" || $(mkdir_p) "$(DESTDIR)$(prefix)/share/examples/squid"
d81 1
a81 1
@@@@ -1139,7 +1139,7 @@@@ check: $(BUILT_SOURCES)
d86 2
a87 2
+	for dir in "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(sbindir)" "$(DESTDIR)$(DESTDIR)$(prefix)/share/examples/squid"; do \
 	  test -z "$$dir" || $(mkdir_p) "$$dir"; \
d90 1
a90 1
@@@@ -1278,7 +1278,7 @@@@ cf.data: cf.data.pre Makefile
@


1.15.6.1
log
@MFC:

SECURITY FIX

Resolves:  CVE-2009-2855, CVE-2010-0308, and bugfixes

ok Brad jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.16 2009/10/30 00:56:57 sthen Exp $
--- src/Makefile.in.orig	Thu Apr 30 21:24:42 2009
+++ src/Makefile.in	Thu Oct 29 18:44:21 2009
@@@@ -238,7 +238,7 @@@@ CPP = @@CPP@@
d13 2
a14 1
@@@@ -354,7 +354,7 @@@@ psdir = @@psdir@@
a16 1
 srcdir = @@srcdir@@
d20 3
a22 3
 top_build_prefix = @@top_build_prefix@@
 top_builddir = @@top_builddir@@
@@@@ -610,8 +610,8 @@@@ EXTRA_DIST = \
d33 2
a34 2
@@@@ -885,37 +885,37 @@@@ distclean-compile:
 @@am__fastdepCC_FALSE@@	$(COMPILE) -c `$(CYGPATH_W) '$<'`
d37 2
a38 2
-	test -z "$(datadir)" || $(MKDIR_P) "$(DESTDIR)$(datadir)"
+	test -z "$(datadir)" || $(MKDIR_P) "$(DESTDIR)$(prefix)/share/examples/squid"
d59 2
a60 2
-	test -z "$(sysconfdir)" || $(MKDIR_P) "$(DESTDIR)$(sysconfdir)"
+	test -z "$(sysconfdir)" || $(MKDIR_P) "$(DESTDIR)$(prefix)/share/examples/squid"
d81 1
a81 1
@@@@ -1097,7 +1097,7 @@@@ check: $(BUILT_SOURCES)
d86 2
a87 2
+	for dir in "$(DESTDIR)$(libexecdir)" "$(DESTDIR)$(sbindir)" "$(DESTDIR)$(prefix)/share/examples/squid"; do \
 	  test -z "$$dir" || $(MKDIR_P) "$$dir"; \
d90 1
a90 1
@@@@ -1244,7 +1244,7 @@@@ cf.data: cf.data.pre Makefile
@


1.14
log
@Update to Squid 2.6.STABLE16.

From brad (MAINTAINER)
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.13 2007/05/20 00:52:32 todd Exp $
--- src/Makefile.in.orig	Wed Sep  5 17:57:25 2007
+++ src/Makefile.in	Wed Sep  5 21:01:07 2007
@@@@ -224,7 +224,7 @@@@ CPP = @@CPP@@
d13 1
a13 1
@@@@ -382,7 +382,7 @@@@ program_transform_name = @@program_transform_name@@
d22 1
a22 1
@@@@ -622,8 +622,8 @@@@ EXTRA_DIST = \
d33 1
a33 1
@@@@ -884,37 +884,37 @@@@ distclean-compile:
d81 1
a81 1
@@@@ -1097,7 +1097,7 @@@@ check: $(BUILT_SOURCES)
d90 1
a90 1
@@@@ -1236,7 +1236,7 @@@@ cf.data: cf.data.pre Makefile
@


1.13
log
@update to 2.6 stable13, from brad@@ (maint)
ok kili@@ tested by me
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.12 2006/11/13 02:11:39 brad Exp $
--- src/Makefile.in.orig	Sat May  5 18:06:55 2007
+++ src/Makefile.in	Sat May 12 23:44:43 2007
@@@@ -223,7 +223,7 @@@@ CPP = @@CPP@@
d13 2
a14 2
@@@@ -373,7 +373,7 @@@@ prefix = @@prefix@@
 program_transform_name = @@program_transform_name@@
d22 1
a22 1
@@@@ -610,8 +610,8 @@@@ EXTRA_DIST = \
d33 1
a33 1
@@@@ -871,37 +871,37 @@@@ distclean-compile:
d81 1
a81 1
@@@@ -1084,7 +1084,7 @@@@ check: $(BUILT_SOURCES)
d90 1
a90 1
@@@@ -1222,7 +1222,7 @@@@ cf.data: cf.data.pre Makefile
@


1.12
log
@upgrade to 2.6.STABLE5
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.11 2006/10/03 05:00:49 brad Exp $
--- src/Makefile.in.orig	Sun Oct 29 21:21:34 2006
+++ src/Makefile.in	Sat Nov  4 15:50:31 2006
@@@@ -224,7 +224,7 @@@@ CPP = @@CPP@@
d13 1
a13 1
@@@@ -374,7 +374,7 @@@@ prefix = @@prefix@@
d22 1
a22 1
@@@@ -605,8 +605,8 @@@@ EXTRA_DIST = \
d33 1
a33 1
@@@@ -866,37 +866,37 @@@@ distclean-compile:
d81 1
a81 1
@@@@ -1079,7 +1079,7 @@@@ check: $(BUILT_SOURCES)
d90 1
a90 1
@@@@ -1217,7 +1217,7 @@@@ cf.data: cf.data.pre Makefile
@


1.11
log
@upgrade to 2.6.STABLE4

Squid 2.6 supports kqueue and hw accelerated SSL via OpenSSL,
as well as many other improvements.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.10 2005/10/29 23:26:39 brad Exp $
--- src/Makefile.in.orig	Fri Sep 22 05:09:48 2006
+++ src/Makefile.in	Tue Sep 26 19:32:48 2006
@@@@ -223,7 +223,7 @@@@ CPP = @@CPP@@
d13 1
a13 1
@@@@ -372,7 +372,7 @@@@ prefix = @@prefix@@
d22 1
a22 1
@@@@ -601,8 +601,8 @@@@ EXTRA_DIST = \
d33 1
a33 1
@@@@ -861,37 +861,37 @@@@ distclean-compile:
d81 1
a81 1
@@@@ -1074,7 +1074,7 @@@@ check: $(BUILT_SOURCES)
d90 1
a90 1
@@@@ -1212,7 +1212,7 @@@@ cf.data: cf.data.pre Makefile
@


1.10
log
@upgrade to 2.5.STABLE12

- [Major] Error introduced in 2.5.STABLE11 causing truncated responses
  when using delay pools (Bug #1405)
@
text
@d1 14
a14 4
$OpenBSD: patch-src_Makefile_in,v 1.9 2005/05/25 02:27:13 brad Exp $
--- src/Makefile.in.orig	Wed Sep 28 16:57:21 2005
+++ src/Makefile.in	Wed Oct 26 21:42:47 2005
@@@@ -33,7 +33,7 @@@@ bindir = @@bindir@@
d16 1
a16 2
 libexecdir = @@libexecdir@@
 datadir = @@datadir@@
d19 4
a22 4
 sharedstatedir = @@sharedstatedir@@
 localstatedir = @@localstatedir@@
 libdir = @@libdir@@
@@@@ -380,9 +380,9 @@@@ EXTRA_DIST = \
a26 1
-DEFAULT_CACHEMGR_CONFIG = $(sysconfdir)/cachemgr.conf
a28 1
+DEFAULT_CACHEMGR_CONFIG = $(prefix)/share/examples/squid/cachemgr.conf
d33 1
a33 19
@@@@ -397,7 +397,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
 DEFAULT_ERROR_DIR = $(datadir)/errors/@@ERR_DEFAULT_LANGUAGE@@
 DEFAULT_MIB_PATH = $(datadir)/mib.txt
 
-DEFS = @@DEFS@@ -DDEFAULT_CONFIG_FILE=\"$(DEFAULT_CONFIG_FILE)\"
+DEFS = @@DEFS@@ -DDEFAULT_CONFIG_FILE=\"$(sysconfdir)/squid.conf\"
 
 
 # Don't automatically uninstall config files
@@@@ -451,7 +451,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr_
 cachemgr__CGIEXT__OBJECTS = $(am_cachemgr__CGIEXT__OBJECTS)
 cachemgr__CGIEXT__LDADD = $(LDADD)
 cachemgr__CGIEXT__DEPENDENCIES =
-cachemgr__CGIEXT__LDFLAGS =
+cachemgr__CGIEXT__LDFLAGS = -static
 am_cf_gen_OBJECTS = cf_gen.$(OBJEXT)
 cf_gen_OBJECTS = $(am_cf_gen_OBJECTS)
 cf_gen_LDADD = $(LDADD)
@@@@ -860,37 +860,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d37 2
a38 2
-	$(mkinstalldirs) $(DESTDIR)$(datadir)
+	$(mkinstalldirs) $(DESTDIR)$(prefix)/share/examples/squid
d41 5
a45 5
 	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " $(INSTALL_DATA) $$d$$p $(DESTDIR)$(datadir)/$$f"; \
-	  $(INSTALL_DATA) $$d$$p $(DESTDIR)$(datadir)/$$f; \
+	  echo " $(INSTALL_DATA) $$d$$p $(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
+	  $(INSTALL_DATA) $$d$$p $(DESTDIR)$(prefix)/share/examples/squid/$$f; \
d51 5
a55 5
 	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " rm -f $(DESTDIR)$(datadir)/$$f"; \
-	  rm -f $(DESTDIR)$(datadir)/$$f; \
+	  echo " rm -f $(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
+	  rm -f $(DESTDIR)$(prefix)/share/examples/squid/$$f; \
d59 2
a60 2
-	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
+	$(mkinstalldirs) $(DESTDIR)$(prefix)/share/examples/squid
d63 5
a67 5
 	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " $(INSTALL_DATA) $$d$$p $(DESTDIR)$(sysconfdir)/$$f"; \
-	  $(INSTALL_DATA) $$d$$p $(DESTDIR)$(sysconfdir)/$$f; \
+	  echo " $(INSTALL_DATA) $$d$$p $(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
+	  $(INSTALL_DATA) $$d$$p $(DESTDIR)$(prefix)/share/examples/squid/$$f; \
d73 5
a77 5
 	  f="`echo $$p | sed -e 's|^.*/||'`"; \
-	  echo " rm -f $(DESTDIR)$(sysconfdir)/$$f"; \
-	  rm -f $(DESTDIR)$(sysconfdir)/$$f; \
+	  echo " rm -f $(DESTDIR)$(prefix)/share/examples/squid/$$f"; \
+	  rm -f $(DESTDIR)$(prefix)/share/examples/squid/$$f; \
d81 1
a81 1
@@@@ -1024,7 +1024,7 @@@@ check: check-recursive
d85 6
a90 6
-	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(libexecdir) $(DESTDIR)$(sbindir) $(DESTDIR)$(datadir) $(DESTDIR)$(sysconfdir)
+	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(libexecdir) $(DESTDIR)$(sbindir) $(DESTDIR)$(prefix)/share/examples/squid
 
 install: install-recursive
 install-exec: install-exec-recursive
@@@@ -1150,7 +1150,7 @@@@ cf.data: cf.data.pre Makefile
@


1.9
log
@upgrade to 2.5.STABLE10

- Malicious users may spoof DNS lookups if the DNS client UDP port (random,
  assigned by OS at startup) is unfiltered and your network is not protected
  from IP spoofing.
- CVE-1999-0710, adds access controls to the cachemgr.cgi script, preventing
  it from being abused to reach other servers than allowed in a local
  configuration file.
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile_in,v 1.8 2004/10/20 21:44:21 brad Exp $
--- src/Makefile.in.orig	Sat Apr 23 20:12:08 2005
+++ src/Makefile.in	Wed May 18 18:11:44 2005
d13 3
a15 3
@@@@ -376,9 +376,9 @@@@ EXTRA_DIST = \
 
 
d26 1
a26 1
@@@@ -393,7 +393,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d35 1
a35 1
@@@@ -447,7 +447,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr_
d44 1
a44 1
@@@@ -856,37 +856,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d92 1
a92 1
@@@@ -1020,7 +1020,7 @@@@ check: check-recursive
d101 1
a101 3
@@@@ -1144,7 +1144,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
 
 cf.data: cf.data.pre Makefile
d103 2
@


1.9.2.1
log
@MFC:
upgrade to 2.5.STABLE12

- [Major] Error introduced in 2.5.STABLE11 causing truncated responses
when using delay pools (Bug #1405)

ok brad
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.9 2005/05/25 02:27:13 brad Exp $
d14 2
a15 2
 DEFAULT_HTTP_PORT = @@CACHE_HTTP_PORT@@
 DEFAULT_ICP_PORT = @@CACHE_ICP_PORT@@
d102 2
a104 2
 	s%@@DEFAULT_HTTP_PORT@@%$(DEFAULT_HTTP_PORT)%g;\
 	s%@@DEFAULT_ICP_PORT@@%$(DEFAULT_ICP_PORT)%g;\
@


1.8
log
@upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile_in,v 1.7 2004/07/11 17:00:47 brad Exp $
--- src/Makefile.in.orig	Sat Sep 25 17:37:59 2004
+++ src/Makefile.in	Wed Oct 20 16:45:55 2004
d13 1
a13 1
@@@@ -373,8 +373,8 @@@@ EXTRA_DIST = \
d18 1
d21 1
d26 1
a26 1
@@@@ -389,7 +389,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d35 1
a35 1
@@@@ -443,7 +443,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr.
d44 1
a44 1
@@@@ -838,37 +838,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d92 1
a92 1
@@@@ -1002,7 +1002,7 @@@@ check: check-recursive
d101 1
a101 1
@@@@ -1126,7 +1126,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.8.2.1
log
@SECURITY: update to 2.5.STABLE10
fix multiple vulnerabilities
http://www.vuxml.org/openbsd/cf9986f2-cd8d-11d9-a230-00065bd5b0b6.html

ok brad@@
@
text
@d1 3
a3 3
$OpenBSD$
--- src/Makefile.in.orig	Sat Apr 23 20:12:08 2005
+++ src/Makefile.in	Wed May 18 18:11:44 2005
d13 1
a13 1
@@@@ -376,9 +376,9 @@@@ EXTRA_DIST = \
a17 1
-DEFAULT_CACHEMGR_CONFIG = $(sysconfdir)/cachemgr.conf
a19 1
+DEFAULT_CACHEMGR_CONFIG = $(prefix)/share/examples/squid/cachemgr.conf
d24 1
a24 1
@@@@ -393,7 +393,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d33 1
a33 1
@@@@ -447,7 +447,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr_
d42 1
a42 1
@@@@ -856,37 +856,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d90 1
a90 1
@@@@ -1020,7 +1020,7 @@@@ check: check-recursive
d99 1
a99 1
@@@@ -1144,7 +1144,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.8.2.2
log
@MFC:
upgrade to 2.5.STABLE12

- [Major] Error introduced in 2.5.STABLE11 causing truncated responses
when using delay pools (Bug #1405)

ok brad
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.8.2.1 2005/05/26 03:47:27 robert Exp $
d14 2
a15 2
 DEFAULT_HTTP_PORT = @@CACHE_HTTP_PORT@@
 DEFAULT_ICP_PORT = @@CACHE_ICP_PORT@@
d102 2
a104 2
 	s%@@DEFAULT_HTTP_PORT@@%$(DEFAULT_HTTP_PORT)%g;\
 	s%@@DEFAULT_ICP_PORT@@%$(DEFAULT_ICP_PORT)%g;\
@


1.7
log
@upgrade to Squid 2.5.STABLE6
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile_in,v 1.6 2003/05/13 20:12:03 brad Exp $
--- src/Makefile.in.orig	Tue Jun  8 07:37:22 2004
+++ src/Makefile.in	Sun Jul 11 12:23:14 2004
d21 1
a21 1
 DEFAULT_DNSSERVER = $(libexecdir)/dnsserver$(EXEEXT)
@


1.7.2.1
log
@MFC:

upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.

MFC:

upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.

---
Fix 2 security issues...

A bug exists in the code that parses responses from Gopher servers.
The bug results in a buffer overflow if a Gopher server returns a
line longer than 4096 bytes.  The overflow results in memory
corruption and usually crashes Squid.

CAN-2005-0094

A bug exists in the code that parses WCCP messages.  An attacker
that sends a malformed WCCP messages, with a spoofed source address
matching Squid's "home router" can crash Squid.

CAN-2005-0095

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.7 2004/07/11 17:00:47 brad Exp $
d21 1
a21 1
 DEFAULT_DNSSERVER = $(libexecdir)/`echo dnsserver | sed '$(transform);s/$$/$(EXEEXT)/'`
@


1.7.2.2
log
@SECURITY: update to 2.5.STABLE10
fix multiple vulnerabilities
http://www.vuxml.org/openbsd/cf9986f2-cd8d-11d9-a230-00065bd5b0b6.html

ok brad@@
@
text
@d1 3
a3 3
$OpenBSD$
--- src/Makefile.in.orig	Sat Apr 23 20:12:08 2005
+++ src/Makefile.in	Wed May 18 18:11:44 2005
d13 1
a13 1
@@@@ -376,9 +376,9 @@@@ EXTRA_DIST = \
a17 1
-DEFAULT_CACHEMGR_CONFIG = $(sysconfdir)/cachemgr.conf
a19 1
+DEFAULT_CACHEMGR_CONFIG = $(prefix)/share/examples/squid/cachemgr.conf
d24 1
a24 1
@@@@ -393,7 +393,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d33 1
a33 1
@@@@ -447,7 +447,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr_
d42 1
a42 1
@@@@ -856,37 +856,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d90 1
a90 1
@@@@ -1020,7 +1020,7 @@@@ check: check-recursive
d99 1
a99 1
@@@@ -1144,7 +1144,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.6
log
@upgrade to Squid 2.5.STABLE2
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile_in,v 1.5 2002/08/23 14:10:20 brad Exp $
--- src/Makefile.in.orig	Tue Feb 11 19:03:14 2003
+++ src/Makefile.in	Mon May 12 07:08:29 2003
d13 1
a13 1
@@@@ -371,8 +371,8 @@@@ EXTRA_DIST = \
d24 1
a24 1
@@@@ -387,7 +387,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d33 1
a33 1
@@@@ -441,7 +441,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr.
d42 1
a42 1
@@@@ -836,37 +836,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d90 1
a90 1
@@@@ -1000,7 +1000,7 @@@@ check: check-recursive
d99 1
a99 1
@@@@ -1124,7 +1124,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.6.4.1
log
@MFC:

upgrade to Squid 2.5.STABLE7

A parsing error exists in the SNMP module of Squid where a
specially-crafted UDP packet can potentially cause the server to
restart, closing all current connections.

---
Fix 2 security issues...

A bug exists in the code that parses responses from Gopher servers.
The bug results in a buffer overflow if a Gopher server returns a
line longer than 4096 bytes.  The overflow results in memory
corruption and usually crashes Squid.

CAN-2005-0094

A bug exists in the code that parses WCCP messages.  An attacker
that sends a malformed WCCP messages, with a spoofed source address
matching Squid's "home router" can crash Squid.

CAN-2005-0095

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.6 2003/05/13 20:12:03 brad Exp $
d21 1
a21 1
 DEFAULT_DNSSERVER = $(libexecdir)/`echo dnsserver | sed '$(transform);s/$$/$(EXEEXT)/'`
@


1.5
log
@upgrade to Squid 2.5.PRE11
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile_in,v 1.4 2002/07/24 18:14:09 brad Exp $
--- src/Makefile.in.orig	Fri Jul 12 11:10:04 2002
+++ src/Makefile.in	Fri Aug 23 09:32:02 2002
d13 1
a13 1
@@@@ -373,8 +373,8 @@@@ EXTRA_DIST = \
d21 1
a21 1
 DEFAULT_DNSSERVER = $(libexecdir)/@@OPT_DNSSERVER_EXE@@
d24 1
a24 1
@@@@ -389,7 +389,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d31 3
a33 3
 DISTCLEANFILES = cf_gen_defines.h cf.data cf_parser.h squid.conf.default \
 	globals.c string_arrays.c repl_modules.c auth_modules.c store_modules.c
@@@@ -424,7 +424,7 @@@@ am_cachemgr__CGIEXT__OBJECTS = cachemgr.
d42 1
a42 1
@@@@ -819,37 +819,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d90 1
a90 1
@@@@ -983,7 +983,7 @@@@ check: check-recursive
d99 1
a99 1
@@@@ -1107,7 +1107,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.4
log
@upgrade to Squid 2.5.PRE10
- The squid binary has been moved from bin/ to sbin/
- The cachemgr CGI is statically linked now
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.3 2002/06/30 18:29:22 brad Exp $
d3 10
a12 1
+++ src/Makefile.in	Tue Jul 23 20:25:13 2002
@


1.3
log
@upgrade to Squid 2.5.PRE8
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.2 2002/04/17 18:03:21 brad Exp $
--- src/Makefile.in.orig	Sun Jun 23 10:54:48 2002
+++ src/Makefile.in	Wed Jun 26 18:46:02 2002
@@@@ -367,8 +367,8 @@@@ EXTRA_DIST = \
d15 1
a15 1
@@@@ -383,7 +383,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d24 10
a33 1
@@@@ -787,37 +787,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d81 1
a81 1
@@@@ -951,7 +951,7 @@@@ check: check-recursive
d85 2
a86 2
-	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(libexecdir) $(DESTDIR)$(datadir) $(DESTDIR)$(sysconfdir)
+	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(libexecdir) $(DESTDIR)$(prefix)/share/examples/squid
d90 1
a90 1
@@@@ -1074,7 +1074,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.2
log
@upgrade to Squid 2.5.PRE6
- PF patches integrated
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.1 2002/02/20 01:17:03 brad Exp $
--- src/Makefile.in.orig	Sun Apr 14 16:02:03 2002
+++ src/Makefile.in	Wed Apr 17 13:28:26 2002
@@@@ -366,8 +366,8 @@@@ EXTRA_DIST = \
d15 1
a15 1
@@@@ -382,7 +382,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
d24 1
a24 1
@@@@ -784,37 +784,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d72 1
a72 1
@@@@ -948,7 +948,7 @@@@ check: check-recursive
d81 1
a81 1
@@@@ -1071,7 +1071,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
@


1.1
log
@upgrade to Squid 2.5.PRE4
- The port now runs as uid/gid of nobody:nobody instead of www:www
- This needs some testing, especially the transparent proxy support for PF
@
text
@d1 24
a24 4
$OpenBSD$
--- src/Makefile.in.orig	Thu Feb  7 12:47:49 2002
+++ src/Makefile.in	Thu Feb  7 13:03:31 2002
@@@@ -791,37 +791,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d72 1
a72 1
@@@@ -955,7 +955,7 @@@@ check: check-recursive
d81 1
a81 2
@@@@ -1104,28 +1104,28 @@@@ auth_modules.c: auth_modules.sh Makefile
 	@@$(SHELL) $(srcdir)/auth_modules.sh $(AUTH_MODULES) >auth_modules.c
d83 7
a89 40
 install-data-local: install-sysconfDATA install-dataDATA
-	@@if test -f $(DESTDIR)$(sysconfdir)/mime.conf ; then \
-	        echo "$@@ will not overwrite existing $(DESTDIR)$(sysconfdir)/mime.conf" ; \
+	@@if test -f $(DESTDIR)$(prefix)/share/examples/squid/mime.conf ; then \
+	        echo "$@@ will not overwrite existing $(DESTDIR)$(prefix)/share/examples/squid/mime.conf" ; \
 	else \
-	        echo "$(INSTALL_DATA) $(srcdir)/mime.conf.default $(DESTDIR)$(sysconfdir)/mime.conf" ;\
-	        $(INSTALL_DATA) $(srcdir)/mime.conf.default $(DESTDIR)$(sysconfdir)/mime.conf; \
+	        echo "$(INSTALL_DATA) $(srcdir)/mime.conf.default $(DESTDIR)$(prefix)/share/examples/squid/mime.conf" ;\
+	        $(INSTALL_DATA) $(srcdir)/mime.conf.default $(DESTDIR)$(prefix)/share/examples/squid/mime.conf; \
 	fi
-	@@if test -f $(DESTDIR)$(sysconfdir)/squid.conf ; then \
-	        echo "$@@ will not overwrite existing $(DESTDIR)$(sysconfdir)/squid.conf" ; \
+	@@if test -f $(DESTDIR)$(prefix)/share/examples/squid/squid.conf ; then \
+	        echo "$@@ will not overwrite existing $(DESTDIR)$(prefix)/share/examples/squid/squid.conf" ; \
 	else \
-	        echo "$(INSTALL_DATA) squid.conf.default $(DESTDIR)$(sysconfdir)/squid.conf"; \
-	        $(INSTALL_DATA) squid.conf.default $(DESTDIR)$(sysconfdir)/squid.conf; \
+	        echo "$(INSTALL_DATA) squid.conf.default $(DESTDIR)$(prefix)/share/examples/squid/squid.conf"; \
+	        $(INSTALL_DATA) squid.conf.default $(DESTDIR)$(prefix)/share/examples/squid/squid.conf; \
 	fi
 	$(mkinstalldirs) $(DESTDIR)$(DEFAULT_LOG_PREFIX)
 
 uninstall-local:
-	@@if test -f $(DESTDIR)$(sysconfdir)/mime.conf ; then \
-		echo "rm -f $(DESTDIR)$(sysconfdir)/mime.conf"; \
-		$(RM) -f $(DESTDIR)$(sysconfdir)/mime.conf; \
+	@@if test -f $(DESTDIR)$(prefix)/share/examples/squid/mime.conf ; then \
+		echo "rm -f $(DESTDIR)$(prefix)/share/examples/squid/mime.conf"; \
+		$(RM) -f $(DESTDIR)$(prefix)/share/examples/squid/mime.conf; \
 	fi
-	@@if test -f $(DESTDIR)$(sysconfdir)/squid.conf ; then \
-		echo "rm -f $(DESTDIR)$(sysconfdir)/squid.conf"; \
-		$(RM) -f $(DESTDIR)$(sysconfdir)/squid.conf; \
+	@@if test -f $(DESTDIR)$(prefix)/share/examples/squid/squid.conf ; then \
+		echo "rm -f $(DESTDIR)$(prefix)/share/examples/squid/squid.conf"; \
+		$(RM) -f $(DESTDIR)$(prefix)/share/examples/squid/squid.conf; \
 	fi
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
@


1.1.2.1
log
@MFC: SECURITY FIXES.
upgrade to Squid 2.5.PRE8
@
text
@d1 4
a4 24
$OpenBSD: patch-src_Makefile_in,v 1.3 2002/06/30 18:29:22 brad Exp $
--- src/Makefile.in.orig	Sun Jun 23 10:54:48 2002
+++ src/Makefile.in	Wed Jun 26 18:46:02 2002
@@@@ -367,8 +367,8 @@@@ EXTRA_DIST = \
 
 
 DEFAULT_PREFIX = $(prefix)
-DEFAULT_CONFIG_FILE = $(sysconfdir)/squid.conf
-DEFAULT_MIME_TABLE = $(sysconfdir)/mime.conf
+DEFAULT_CONFIG_FILE = $(prefix)/share/examples/squid/squid.conf
+DEFAULT_MIME_TABLE = $(prefix)/share/examples/squid/mime.conf
 DEFAULT_DNSSERVER = $(libexecdir)/@@OPT_DNSSERVER_EXE@@
 DEFAULT_LOG_PREFIX = $(localstatedir)/logs
 DEFAULT_CACHE_LOG = $(DEFAULT_LOG_PREFIX)/cache.log
@@@@ -383,7 +383,7 @@@@ DEFAULT_ICON_DIR = $(datadir)/icons
 DEFAULT_ERROR_DIR = $(datadir)/errors/@@ERR_DEFAULT_LANGUAGE@@
 DEFAULT_MIB_PATH = $(datadir)/mib.txt
 
-DEFS = @@DEFS@@ -DDEFAULT_CONFIG_FILE=\"$(DEFAULT_CONFIG_FILE)\"
+DEFS = @@DEFS@@ -DDEFAULT_CONFIG_FILE=\"$(sysconfdir)/squid.conf\"
 
 DISTCLEANFILES = cf_gen_defines.h cf.data cf_parser.h squid.conf.default \
 	globals.c string_arrays.c repl_modules.c auth_modules.c store_modules.c
@@@@ -787,37 +787,37 @@@@ CCDEPMODE = @@CCDEPMODE@@
d52 1
a52 1
@@@@ -951,7 +951,7 @@@@ check: check-recursive
d61 2
a62 1
@@@@ -1074,7 +1074,7 @@@@ cf_gen_defines.h: $(srcdir)/cf_gen_defin
d64 40
a103 7
 cf.data: cf.data.pre Makefile
 	sed "\
-	s%@@DEFAULT_MIME_TABLE@@%$(DEFAULT_MIME_TABLE)%g;\
+	s%@@DEFAULT_MIME_TABLE@@%$(sysconfdir)/mime.conf%g;\
 	s%@@DEFAULT_DNSSERVER@@%$(DEFAULT_DNSSERVER)%g;\
 	s%@@DEFAULT_UNLINKD@@%$(DEFAULT_UNLINKD)%g;\
 	s%@@DEFAULT_PINGER@@%$(DEFAULT_PINGER)%g;\
@


