head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2015.11.30.10.26.16;	author sthen;	state dead;
branches;
next	1.1;
commitid	pxWZOh8nRyayut1w;

1.1
date	2015.11.04.15.39.55;	author sthen;	state Exp;
branches;
next	;
commitid	voOXekJXqwC0zgC0;


desc
@@


1.2
log
@update to squid-3.5.12
@
text
@$OpenBSD: patch-acinclude_lib-checks_m4,v 1.1 2015/11/04 15:39:55 sthen Exp $
--- acinclude/lib-checks.m4.orig	Wed Nov  4 15:17:13 2015
+++ acinclude/lib-checks.m4	Wed Nov  4 15:17:21 2015
@@@@ -93,7 +93,7 @@@@ AC_DEFUN([SQUID_CHECK_OPENSSL_GETCERTIFICATE_WORKS],[
     ],
     [
     SSLeay_add_ssl_algorithms();
-    SSL_CTX *sslContext = SSL_CTX_new(SSLv3_method());
+    SSL_CTX *sslContext = SSL_CTX_new(SSLv23_method());
     SSL *ssl = SSL_new(sslContext);
     X509* cert = SSL_get_certificate(ssl);
     return 0;
@@@@ -120,7 +120,7 @@@@ AC_DEFUN([SQUID_CHECK_OPENSSL_GETCERTIFICATE_WORKS],[
     ],
     [
     SSLeay_add_ssl_algorithms();
-    SSL_CTX *sslContext = SSL_CTX_new(SSLv3_method());
+    SSL_CTX *sslContext = SSL_CTX_new(SSLv23_method());
     X509 ***pCert = (X509 ***)sslContext->cert;
     X509 *sslCtxCert = pCert && *pCert ? **pCert : (X509 *)0x1;
     if (sslCtxCert != NULL)
@


1.1
log
@fix autoconf check which used SSLv3_method; results in assert failure in
some ssl interception modes
@
text
@d1 1
a1 1
$OpenBSD$
@

