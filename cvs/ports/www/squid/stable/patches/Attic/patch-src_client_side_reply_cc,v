head	1.4;
access;
symbols
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.06.26.12.54.31;	author sthen;	state dead;
branches;
next	1.3;
commitid	Bim1wgakpenAoOkI;

1.3
date	2014.04.08.12.22.48;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2014.03.16.12.58.48;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.11.15.19.09.18;	author sthen;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2014.09.10.10.11.08;	author sthen;	state Exp;
branches;
next	;
commitid	yUDArhYMopOagxMr;


desc
@@


1.4
log
@Update to squid-3.4.6, various fixes (especially for SSL-bump but some general
ones). Includes some memory leak and segv fixes.
@
text
@$OpenBSD: patch-src_client_side_reply_cc,v 1.3 2014/04/08 12:22:48 sthen Exp $
--- src/client_side_reply.cc.orig	Sun Mar  9 09:40:56 2014
+++ src/client_side_reply.cc	Sun Mar 16 12:40:07 2014
@@@@ -1323,7 +1323,7 @@@@ clientReplyContext::buildReplyHeader()
             if (http->storeEntry()->timestamp <= squid_curtime) {
                 // put X-Cache-Age: instead of Age:
                 char age[64];
-                snprintf(age, sizeof(age), "%ld", (long int) squid_curtime - http->storeEntry()->timestamp);
+                snprintf(age, sizeof(age), "%lld", (long long) squid_curtime - http->storeEntry()->timestamp);
                 hdr->putExt("X-Cache-Age", age);
             }
         } else if (http->storeEntry()->timestamp <= squid_curtime) {
@


1.3
log
@switch squid/stable to the 3.4 branch, and update squid/snapshot to a
recent snapshot from the 3.5 branch
@
text
@d1 1
a1 1
$OpenBSD: patch-src_client_side_reply_cc,v 1.3 2014/03/16 13:15:12 sthen Exp $
@


1.2
log
@update to squid-3.3.12, security fix for CVE-2014-0128 in HTTPS request
handling, only affects users who have enabled the "ssl-bump" MITM feature.

workarounds at
http://www.squid-cache.org/Advisories/SQUID-2014_1.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.1 2013/11/15 19:09:18 sthen Exp $
--- src/client_side_reply.cc.orig	Sun Mar  9 05:24:25 2014
+++ src/client_side_reply.cc	Sun Mar 16 12:41:32 2014
@@@@ -1350,7 +1350,7 @@@@ clientReplyContext::buildReplyHeader()
@


1.1
log
@Update to squid-3.3.10 and reorganise the squid ports; retire squid-2.7
(it was kept separately because 3.x didn't build on some arch due to an
incomplete atomic ops autoconf check which has since been repaired) and
replace with 3.4 (devel version). Enable additional helpers and turn on
support for rock cache dirs.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.3 2013/09/17 16:56:24 sthen Exp $
--- src/client_side_reply.cc.orig	Wed Sep 11 05:08:38 2013
+++ src/client_side_reply.cc	Tue Sep 17 16:29:48 2013
@@@@ -1341,7 +1341,7 @@@@ clientReplyContext::buildReplyHeader()
@


1.1.2.1
log
@SECURITY update to squid 3.3.13 - clients can perform a DoS due to
incorrect input validation in range checking.

http://www.squid-cache.org/Advisories/SQUID-2014_2.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.1 2013/11/15 19:09:18 sthen Exp $
--- src/client_side_reply.cc.orig	Wed Aug 27 15:16:59 2014
+++ src/client_side_reply.cc	Wed Sep 10 11:09:58 2014
@@@@ -1350,7 +1350,7 @@@@ clientReplyContext::buildReplyHeader()
@


