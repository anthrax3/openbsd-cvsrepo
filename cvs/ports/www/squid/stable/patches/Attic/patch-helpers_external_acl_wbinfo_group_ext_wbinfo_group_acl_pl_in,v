head	1.3;
access;
symbols
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2015.09.10.13.00.11;	author sthen;	state dead;
branches;
next	1.2;
commitid	vagA8GU9rOjsV69E;

1.2
date	2014.04.08.12.22.48;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.11.15.19.09.18;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Currently Squid 3.5 is considered stable. Rather than moving snapshot/*
to stable/*, just drop back to a single version of squid in ports.
@
text
@$OpenBSD: patch-helpers_external_acl_wbinfo_group_ext_wbinfo_group_acl_pl_in,v 1.2 2014/04/08 12:22:48 sthen Exp $
--- helpers/external_acl/wbinfo_group/ext_wbinfo_group_acl.pl.in.orig	Sat Oct 20 13:39:49 2012
+++ helpers/external_acl/wbinfo_group/ext_wbinfo_group_acl.pl.in	Fri Nov  9 21:55:59 2012
@@@@ -126,14 +126,14 @@@@ sub check {
 		@@tmpuser = split(/\@@/, $user);
 		$user = "$tmpuser[1]\\$tmpuser[0]";
 	}
-        $groupSID = `wbinfo -n "$group" | cut -d" " -f1`;
+        $groupSID = `/usr/local/bin/wbinfo -n "$group" | cut -d" " -f1`;
         chop  $groupSID;
-        $groupGID = `wbinfo -Y "$groupSID"`;
+        $groupGID = `/usr/local/bin/wbinfo -Y "$groupSID"`;
         chop $groupGID;
         &debug( "User:  -$user-\nGroup: -$group-\nSID:   -$groupSID-\nGID:   -$groupGID-");
         return 'ERR' if($groupGID eq ""); # Verify if groupGID variable is empty.
-        return 'ERR' if(`wbinfo -r \Q$user\E` eq ""); # Verify if "wbinfo -r" command returns no value.
-        return 'OK' if(`wbinfo -r \Q$user\E` =~ /^$groupGID$/m);
+        return 'ERR' if(`/usr/local/bin/wbinfo -r \Q$user\E` eq ""); # Verify if "wbinfo -r" command returns no value.
+        return 'OK' if(`/usr/local/bin/wbinfo -r \Q$user\E` =~ /^$groupGID$/m);
         return 'ERR';
 }
 
@


1.2
log
@switch squid/stable to the 3.4 branch, and update squid/snapshot to a
recent snapshot from the 3.5 branch
@
text
@d1 1
a1 1
$OpenBSD: patch-helpers_external_acl_wbinfo_group_ext_wbinfo_group_acl_pl_in,v 1.1 2013/11/15 19:09:17 sthen Exp $
@


1.1
log
@Update to squid-3.3.10 and reorganise the squid ports; retire squid-2.7
(it was kept separately because 3.x didn't build on some arch due to an
incomplete atomic ops autoconf check which has since been repaired) and
replace with 3.4 (devel version). Enable additional helpers and turn on
support for rock cache dirs.
@
text
@d1 1
a1 1
$OpenBSD: patch-helpers_external_acl_wbinfo_group_ext_wbinfo_group_acl_pl_in,v 1.1 2012/11/28 17:45:29 sthen Exp $
@

