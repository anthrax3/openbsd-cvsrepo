head	1.7;
access;
symbols
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.4
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@# @;


1.7
date	2012.11.28.17.45.29;	author sthen;	state dead;
branches;
next	1.6;

1.6
date	2012.06.20.07.10.39;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2012.04.28.11.06.12;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.06.02.13.41.41;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.14.08.11.50;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.12.18.58.32;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2010.11.26.13.45.04;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to Squid 3.2.3.

This is merged from work by myself and Matthias Pitzl @@ genua, thanks to
Rodolfo Gouveia for testing with NTLM.

Flavours have been removed:

- the external helper programs for NTLM/LDAP are now in subpackages:
squid-ldap and squid-ntlm.

- SNMP support is built by default in Squid 3.x so this has moved
to the main package (no external dependencies for this).
@
text
@$OpenBSD: README,v 1.6 2012/06/20 07:10:39 ajacoutot Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

The local (OpenBSD) differences are:
- configuration files are in		${SYSCONFDIR}/squid
- sample configuration files are in	${TRUEPREFIX}/share/examples/squid
- error message files are in		${TRUEPREFIX}/share/squid/errors
- sample error message files are in	${TRUEPREFIX}/share/examples/squid/errors
- icons are in				${TRUEPREFIX}/share/squid/icons
- sample icons are in			${TRUEPREFIX}/share/examples/squid/icons
- the cache is in			${LOCALSTATEDIR}/cache
- logs are stored in			${LOCALSTATEDIR}/logs
- the ugid squid runs as is		_squid:_squid

Please remember to initialize the cache by running "squid -z" before
trying to run Squid for the first time.

Transparent Proxying with PF
============================

To configure a transparent proxy, bind to a specific address in
${SYSCONFDIR}/squid/squid.conf, for example:

http_port 127.0.0.1:3127 transparent

On the machine running Squid, add a firewall rule similar to this:

pass in quick log inet proto tcp to port 80 divert-to 127.0.0.1 port 3127

If Squid is running on a machine which doesn't normally handle the
traffic (e.g. if you have a firewall and would like to divert packets
to Squid on another machine) you will also need a rule like this:

pass in quick from 10.77.3.5
pass in quick inet proto tcp to port 80 route-to (vr2 10.77.3.5)

(this example assumes Squid is running on 10.77.3.5 reachable over
the vr2 interface).

If the proxy server is running on the same subnet as the clients, the
return traffic from the proxy will go directly back to them without
ever hitting the firewall, which means the states will never get updated
and may fill-up your pflog(4) with blocked attempts. To circumvent this
the "no state" option needs to be specified for the route-to rule.
e.g.
pass in quick inet proto tcp to port 80 route-to (vr2 10.77.3.5) no state
@


1.6
log
@Extend README:
If the proxy server is running on the same subnet as the clients, the
return traffic from the proxy will go directly back to them without
ever hitting the firewall, which means the states will never get updated
and may fill-up your pflog(4) with blocked attempts. To circumvent this
the "no state" option needs to be specified for the route-to rule.

ok Brad, intput/ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.5 2012/04/28 11:06:12 ajacoutot Exp $
@


1.5
log
@Use LOCALSTATEDIR instead of local variables.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.4 2011/06/02 13:41:41 ajacoutot Exp $
d42 8
@


1.4
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.3 2011/04/14 08:11:50 sthen Exp $
d14 2
a15 2
- the cache is in			${SQUIDDIR}/cache
- logs are stored in			${SQUIDDIR}/logs
@


1.3
log
@Remove --enable-pf-transparent, it's no longer needed now that
PF supports divert-to. Pointed out by reyk on misc@@. Add documentation
to README showing how to configure a transparent proxy. ok Brad.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.2 2010/12/12 18:58:32 jasper Exp $
d3 3
a5 2
Running Squid on OpenBSD
========================
d22 1
a22 1
----------------------------
@


1.2
log
@style
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.1 2010/11/26 13:45:04 dcoppa Exp $
d11 1
a11 1
- icons are in 				${TRUEPREFIX}/share/squid/icons
d13 2
a14 2
- the cache is in 			${SQUIDDIR}/cache
- logs are stored in 			${SQUIDDIR}/logs
d19 22
@


1.1
log
@Add ntlm flavor for NTLM authentication
Fix pthread linkage
Fix default path for errors directory
Switch to pkg-readmes
Add an rcscript

OK giovanni@@, Brad (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 1
Notes on OpenBSD post-installation of Squid
d8 5
a12 5
- sample configuration files are in	${PREFIX}/share/examples/squid
- error message files are in		${PREFIX}/share/squid/errors
- sample error message files are in	${PREFIX}/share/examples/squid/errors
- icons are in 				${PREFIX}/share/squid/icons
- sample icons are in			${PREFIX}/share/examples/squid/icons
@

