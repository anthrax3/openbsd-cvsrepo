head	1.6;
access;
symbols
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2014.06.26.13.08.42;	author sthen;	state dead;
branches;
next	1.5;
commitid	NT87JHEXo5skwIoI;

1.5
date	2014.05.07.20.52.06;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2014.04.08.12.22.48;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2014.03.16.13.15.12;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2014.03.09.20.56.44;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.11.15.19.09.17;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update squid/snapshot to squid-3.HEAD-20140626
@
text
@$OpenBSD: patch-src_client_side_reply_cc,v 1.5 2014/05/07 20:52:06 sthen Exp $
--- src/client_side_reply.cc.orig	Tue May  6 04:30:25 2014
+++ src/client_side_reply.cc	Wed May  7 20:14:52 2014
@@@@ -1347,7 +1347,7 @@@@ clientReplyContext::buildReplyHeader()
             if (http->storeEntry()->timestamp <= squid_curtime) {
                 // put X-Cache-Age: instead of Age:
                 char age[64];
-                snprintf(age, sizeof(age), "%ld", (long int) squid_curtime - http->storeEntry()->timestamp);
+                snprintf(age, sizeof(age), "%lld", (long long) squid_curtime - http->storeEntry()->timestamp);
                 hdr->putExt("X-Cache-Age", age);
             }
         } else if (http->storeEntry()->timestamp <= squid_curtime) {
@


1.5
log
@update squid/stable to 3.4.5 and squid/snapshot to 20140506-r13398.
use ports/lang/gcc to build snapshot, squid will be moving to requiring
c++11 so let's build this with it already to get more experience.
squid/stable stays with base gcc for most arch for now.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_client_side_reply_cc,v 1.4 2014/04/08 12:22:48 sthen Exp $
@


1.4
log
@switch squid/stable to the 3.4 branch, and update squid/snapshot to a
recent snapshot from the 3.5 branch
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.3 2014/03/16 13:15:12 sthen Exp $
--- src/client_side_reply.cc.orig	Sat Apr  5 04:31:01 2014
+++ src/client_side_reply.cc	Tue Apr  8 11:59:04 2014
@@@@ -1352,7 +1352,7 @@@@ clientReplyContext::buildReplyHeader()
@


1.3
log
@update to squid-3.4.4, security fix for CVE-2014-0128 in HTTPS request
handling affecting users who have enabled the "ssl-bump" MITM feature.

workarounds at
http://www.squid-cache.org/Advisories/SQUID-2014_1.txt

Also includes other fixes, see changelog.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.2 2014/03/09 20:56:44 sthen Exp $
--- src/client_side_reply.cc.orig	Sun Mar  9 09:40:56 2014
+++ src/client_side_reply.cc	Sun Mar 16 12:40:07 2014
@@@@ -1323,7 +1323,7 @@@@ clientReplyContext::buildReplyHeader()
@


1.2
log
@update to squid 3.4.3
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.1 2013/11/15 19:09:17 sthen Exp $
--- src/client_side_reply.cc.orig	Sun Feb  2 08:41:53 2014
+++ src/client_side_reply.cc	Thu Feb 20 23:37:39 2014
@@@@ -1316,7 +1316,7 @@@@ clientReplyContext::buildReplyHeader()
@


1.1
log
@Update to squid-3.3.10 and reorganise the squid ports; retire squid-2.7
(it was kept separately because 3.x didn't build on some arch due to an
incomplete atomic ops autoconf check which has since been repaired) and
replace with 3.4 (devel version). Enable additional helpers and turn on
support for rock cache dirs.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_client_side_reply_cc,v 1.3 2013/09/17 16:56:24 sthen Exp $
--- src/client_side_reply.cc.orig	Thu Oct  3 13:32:47 2013
+++ src/client_side_reply.cc	Mon Oct 21 13:49:36 2013
@@@@ -1312,7 +1312,7 @@@@ clientReplyContext::buildReplyHeader()
@

