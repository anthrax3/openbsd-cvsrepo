head	1.27;
access;
symbols
	OPENBSD_6_2:1.27.0.6
	OPENBSD_6_2_BASE:1.27
	OPENBSD_6_1:1.27.0.4
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.21.0.4
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.11.0.2
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.9.0.6
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.4
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.5.0.2
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	alek_20050223:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2016.03.19.21.18.38;	author naddy;	state Exp;
branches;
next	1.26;
commitid	kfhmX9DZFoKOU0Kt;

1.26
date	2016.02.01.21.55.38;	author sthen;	state Exp;
branches;
next	1.25;
commitid	2J5vYXDnKDkPvPP4;

1.25
date	2015.11.14.15.01.36;	author sthen;	state Exp;
branches;
next	1.24;
commitid	pBSiPt0ewkaKnrlf;

1.24
date	2015.06.23.13.44.40;	author giovanni;	state Exp;
branches;
next	1.23;
commitid	iu1YIcv2u1I77n7A;

1.23
date	2015.06.05.06.00.22;	author robert;	state Exp;
branches;
next	1.22;
commitid	PS9YXjRm9KQkIZjT;

1.22
date	2014.11.06.17.13.40;	author sthen;	state Exp;
branches;
next	1.21;
commitid	ig1O4RkSPXzTZYwZ;

1.21
date	2013.08.12.04.11.21;	author robert;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.11.11.44.47;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2012.08.30.14.09.21;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.08.23.19.35.31;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2012.06.18.07.56.13;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2012.04.19.21.30.38;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2012.04.16.17.44.38;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.11.16.15.56.38;	author robert;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.16.12.00.07;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2011.07.09.00.04.11;	author robert;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.22.08.36.52;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.04.06.02.08.45;	author william;	state Exp;
branches;
next	1.9;

1.9
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2008.01.21.20.36.05;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2008.01.04.17.48.38;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2007.09.15.20.38.25;	author merdely;	state Exp;
branches;
next	1.5;

1.5
date	2007.03.22.22.48.04;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2007.01.03.20.08.07;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.23.21.30.31;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.06.20.38.43;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.23.14.40.47;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.23.14.40.47;	author alek;	state Exp;
branches;
next	;


desc
@@


1.27
log
@For all our ports that use the pecl module, SHARED_ONLY is always
defined and "c" is always added to WANTLIB.  Remove the check from
the module and add WANTLIB += c to the individual port Makefiles.
No changes in package signature, no other modules affected.
@
text
@# $OpenBSD: Makefile,v 1.26 2016/02/01 21:55:38 sthen Exp $

COMMENT=	PHP interface to memcached

DISTNAME=	memcache-3.0.8
MAINTAINER=	William Yodlowsky <william@@openbsd.org>
REVISION=	0

# PHP
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c

MODULES=	lang/php/pecl
CONFIGURE_STYLE= gnu

CONFIGURE_ARGS+=	--with-zlib-dir=/usr

post-configure:
	@@perl -pi -e 's,(finish_cmds=").*,\1" #,g' ${WRKSRC}/libtool

# A running memcached server is needed
TEST_IS_INTERACTIVE=	Yes

pre-test:
	cp ${FILESDIR}/connect.inc ${WRKSRC}

.include <bsd.port.mk>
@


1.26
log
@Bump pecl-* and a couple of other ports which have now lost their
MESSAGE/UNMESSAGE. Add @@extra lines in place of UNMESSAGE. Docs about
activating these have been rolled into the general PHP pkg-readmes file.
OK/feedback aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/11/14 15:01:36 sthen Exp $
d11 2
@


1.25
log
@fix pecl-memcache tests if you already have memcache symlinked in /etc/php-5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/06/23 13:44:40 giovanni Exp $
d7 1
@


1.24
log
@update to 3.0.8 and enable regression tests.
ok sthen@@ william@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/06/05 06:00:22 robert Exp $
d22 2
a23 4
do-test:
	cd ${WRKSRC} && \
	cp ${FILESDIR}/connect.inc . && \
	env NO_INTERACTION=Yes TEST_PHP_EXECUTABLE=${MODPHP_BIN} ${MODPHP_BIN} ${WRKSRC}/run-tests.php -d extension=modules/memcache.so
@


1.23
log
@bump revision due to the change of the default php version to 5.6
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/11/06 17:13:40 sthen Exp $
d5 1
a5 2
DISTNAME=	memcache-3.0.6
REVISION=	6
d18 8
@


1.22
log
@bump REVISION for php version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/08/12 04:11:21 robert Exp $
d6 1
a6 1
REVISION=	5
@


1.21
log
@bump REVISION due to the php update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/11 11:44:47 espie Exp $
d6 1
a6 1
REVISION=	4
@


1.20
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/08/30 14:09:21 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.19
log
@bump a bunch of pecl-*, thanks to cvs's non-atomic commits/updates some of
these got built on amd64 without the WANTLIB they should have had, this is
causing issues with pkg_add updates reported by Johan Huldtgren
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/08/23 19:35:31 sthen Exp $
a10 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.18
log
@sync wantlib for pecl-*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/06/18 07:56:13 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
@


1.17
log
@Missed bumps after my recent php module changes.

spotted by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/04/19 21:30:38 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.16
log
@use pecl.port.mk, ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/04/16 17:44:38 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.15
log
@update to pecl-memcache 3.0.6, ok william@@

- 3.0.4 was generating bogus 'delete' commands in some cases;
I noticed this when trying to use memcache as a session storage
backend with Roundcube webmail - this update fixes this.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.14 2011/11/16 15:56:38 robert Exp $

SHARED_ONLY=	Yes
d6 1
a6 5
PKGNAME=	pecl-${DISTNAME}
CATEGORIES=	www

HOMEPAGE=	http://pecl.php.net/package/memcache

d9 1
a9 1
# PHP License
d15 2
a16 5
MASTER_SITES=	http://pecl.php.net/get/
EXTRACT_SUFX=	.tgz

MODULES=	lang/php
BUILD_DEPENDS=	www/pear
a17 1
CONFIGURE_STYLE=gnu
a18 9

DESTDIRNAME=	INSTALL_ROOT

NO_REGRESS=	Yes

USE_LIBTOOL=	Yes

MODPHP_DO_SAMPLE=	memcache
MODPHP_DO_PHPIZE=	Yes
@


1.14
log
@switch php to version 5.3 by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/16 12:00:07 espie Exp $
d7 1
a7 2
DISTNAME=	memcache-3.0.4
REVISION=	2
@


1.13
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/07/09 00:04:11 robert Exp $
d8 1
a8 1
REVISION=	1
@


1.12
log
@switch to lang/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/22 08:36:52 espie Exp $
d8 1
a8 1
REVISION=	0
@


1.11
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/04/06 02:08:45 william Exp $
d8 1
d25 2
a26 7
AUTOCONF_VERSION=	2.59
AUTOMAKE_VERSION=	1.4

BUILD_DEPENDS=	www/pear \
		${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}
RUN_DEPENDS=	www/php5/core
d29 1
a29 3
CONFIGURE_ARGS=	--with-zlib-dir=/usr
CONFIGURE_ENV=	AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		AUTOCONF_VERSION=${AUTOCONF_VERSION}
a30 1
PREFIX=		/var/www
d37 2
a38 2
pre-configure:
	@@cd ${WRKSRC} && ${SETENV} ${CONFIGURE_ENV} ${LOCALBASE}/bin/phpize
a41 8

post-install:
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/pecl-memcache
	@@${INSTALL_DATA} ${WRKSRC}/example.php \
		${PREFIX}/share/examples/pecl-memcache
	@@${INSTALL_DATA_DIR} ${PREFIX}/conf/php5.sample
	@@echo "extension=memcache.so" > \
		${PREFIX}/conf/php5.sample/memcache.ini
@


1.10
log
@Update to 3.0.4, and include a patch to fix compile from their svn.  Fixes
PHP session storage and now does locking which helps some apps.

MAINTAINER change and diff ok alek@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/09/18 13:37:41 ajacoutot Exp $
d27 1
a27 1
BUILD_DEPENDS=	:pear-*:www/pear \
d30 1
a30 1
RUN_DEPENDS=	:php5-core-*:www/php5/core
@


1.9
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/01/21 20:36:05 sthen Exp $
d7 2
a8 2
DISTNAME=	memcache-1.5
PKGNAME=	pecl-${DISTNAME}p1
d13 1
a13 1
MAINTAINER=	Aleksander Piotrowski <alek@@openbsd.org>
@


1.8
log
@adjust pecl-memcache to new PHP config mechanism (symlink not phpxs)

ok merdely
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/01/04 17:48:38 espie Exp $
a38 1
SUBST_VARS=	LOCALBASE
@


1.7
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/09/15 20:38:25 merdely Exp $
d8 1
a8 1
PKGNAME=	pecl-${DISTNAME}p0
d55 3
@


1.6
log
@Remove surrounding quotes from
COMMENT-*/ERRORS/NO_REGRESS/PERMIT_*/REGRESS_IS_INTERACTIVE

Change '.include "bsd.port.mk"' to '.include <bsd.port.mk>' while here
(ok naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/03/22 22:48:04 robert Exp $
d38 1
a38 1
FAKE_FLAGS=	INSTALL_ROOT=${WRKINST}
@


1.5
log
@- adapt to the new pear port
- add @@group annotations
- bump PKGNAMEs
- fix PLISTs by removing unneeded files and directories
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/01/03 20:08:07 sturm Exp $
d5 1
a5 1
COMMENT=	"PHP interface to memcached"
@


1.4
log
@fix BUILD_DEPENDS by using MODGNU_AUTOCONF_DEPENDS and
MODGNU_AUTOMAKE_DEPENDS instead of handcrafting those entries
USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/12/23 21:30:31 sturm Exp $
d8 1
a8 1
PKGNAME=	pecl-${DISTNAME}
d27 1
a27 1
BUILD_DEPENDS=	:php5-pear-*:www/php5/core,-pear \
@


1.3
log
@depend on proper version of autoconf/automake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/08/06 20:38:43 alek Exp $
d24 2
a25 2
AUTOCONF_VER=	2.59
AUTOMAKE_VER=	1.4
d28 2
a29 3
		:autoconf-${AUTOCONF_VER}:devel/autoconf/${AUTOCONF_VER} \
		:automake-${AUTOMAKE_VER}.*:devel/automake/${AUTOMAKE_VER} \
		::devel/libtool
d34 2
a35 2
CONFIGURE_ENV=	AUTOMAKE_VERSION=${AUTOMAKE_VER} \
		AUTOCONF_VERSION=${AUTOCONF_VER}
d42 2
@


1.2
log
@Update to 1.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/02/23 14:40:47 alek Exp $
d28 2
a29 2
		::devel/autoconf/${AUTOCONF_VER} \
		::devel/automake/${AUTOMAKE_VER} \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
DISTNAME=	memcache-1.4
@


1.1.1.1
log
@Import PECL memcache 1.4

PHP interface to memcached

This extension allows you to work with memcached, a caching daemon
designed to decrease database load by storing objects in memory, through
handy OO and procedural interfaces.

help & ok mbalmer@@, robert@@
@
text
@@
