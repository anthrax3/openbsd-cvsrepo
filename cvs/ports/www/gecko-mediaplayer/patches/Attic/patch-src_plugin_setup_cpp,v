head	1.7;
access;
symbols
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2;
locks; strict;
comment	@# @;


1.7
date	2012.03.26.14.41.51;	author dcoppa;	state dead;
branches;
next	1.6;

1.6
date	2012.01.11.13.06.47;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2011.04.28.11.49.56;	author dcoppa;	state dead;
branches;
next	1.4;

1.4
date	2011.01.18.11.04.23;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.08.15.06.31;	author dcoppa;	state dead;
branches;
next	1.2;

1.2
date	2010.07.08.06.35.13;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.29.12.17.42;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update gecko-mediaplayer to 1.0.6beta1
@
text
@$OpenBSD: patch-src_plugin_setup_cpp,v 1.6 2012/01/11 13:06:47 dcoppa Exp $

Add rtp to the list of streaming URIs
(upstream svn revision r494)

--- src/plugin_setup.cpp.orig	Wed Jan 11 14:01:14 2012
+++ src/plugin_setup.cpp	Wed Jan 11 14:01:49 2012
@@@@ -591,6 +591,9 @@@@ gboolean streaming(gchar * url)
     if (g_ascii_strncasecmp(url, "rtsp://", 7) == 0)
         ret = TRUE;
 
+    if (g_ascii_strncasecmp(url, "rtp://", 6) == 0)
+        ret = TRUE;
+
     if (g_ascii_strncasecmp(url, "tv://", 5) == 0)
         ret = TRUE;
 
@


1.6
log
@Add rtp to the list of streaming URIs
(upstream svn revision r494)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.5
log
@Update to gecko-mediaplayer-1.0.3.

dconf clue stick by ajacoutot@@

Tested by Antti Harri on YouTube using the flashvideoreplacer
extension for firefox (thanks!)

please go ahead fgsch@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_plugin_setup_cpp,v 1.4 2011/01/18 11:04:23 dcoppa Exp $
d3 2
a4 2
fix from upstream: set width and height from the style attribute
if present
d6 11
a16 14
--- src/plugin_setup.cpp.orig	Fri Nov  5 17:12:59 2010
+++ src/plugin_setup.cpp	Tue Jan 18 11:07:47 2011
@@@@ -112,6 +112,14 @@@@ void new_instance(CPlugin * instance, int16_t argc, ch
             if (g_ascii_strcasecmp(argn[i], "height") == 0) {
                 sscanf(argv[i], "%i", &height);
             }
+            
+            if (g_ascii_strcasecmp(argn[i], "style") == 0) {
+                tmp = g_strrstr(argv[i],"width:");
+                sscanf(tmp + strlen("width:"), "%i", &width);
+                tmp = g_strrstr(argv[i],"height:");
+                sscanf(tmp + strlen("height:"), "%i", &height);
+            }
+            
a17 2
             if (g_ascii_strcasecmp(argn[i], "src") == 0 || g_ascii_strcasecmp(argn[i], "url") == 0) {
                 item = g_new0(ListItem, 1);
@


1.4
log
@From upstream svn:

bump QuickTime emulation to 7.6.9 (fix apple.com movie trailers)
set width and height from the style attribute if present
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Update to gecko-mediaplayer 1.0.0 and drop GConf dependency.

OK landry@@
"go ahead" jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_plugin_setup_cpp,v 1.2 2010/07/08 06:35:13 dcoppa Exp $
d3 2
a4 4
fixes from upstream svn:
move "stream" test to streaming function
change it from int to boolean
protect against NULL console
d6 5
a10 16
--- src/plugin_setup.cpp.orig	Tue Feb 23 17:12:37 2010
+++ src/plugin_setup.cpp	Tue Mar 23 17:14:09 2010
@@@@ -80,9 +80,11 @@@@ void new_instance(CPlugin * instance, int16_t argc, ch
 
             if (g_ascii_strcasecmp(argn[i], "console") == 0) {
                 instance->console = g_strdup(argv[i]);
-                for (j = 0; j < strlen(instance->console); j++) {
-                    if (!g_ascii_isalnum(instance->console[j])) {
-                        instance->console[j] = 'a';
+                if (instance->console != NULL) {
+                    for (j = 0; j < strlen(instance->console); j++) {
+                        if (!g_ascii_isalnum(instance->console[j])) {
+                            instance->console[j] = 'a';
+                        }
                     }
                 }
d12 8
a19 22
@@@@ -524,38 +526,41 @@@@ void new_instance(CPlugin * instance, int16_t argc, ch
 
 }
 
-gint streaming(gchar * url)
+gboolean streaming(gchar * url)
 {
-    gint ret = 0;
+    gboolean ret = FALSE;
     char *p;
 
     if (g_ascii_strncasecmp(url, "mms://", 6) == 0)
-        ret = 1;
+        ret = TRUE;
 
     if (g_ascii_strncasecmp(url, "mmst://", 7) == 0)
-        ret = 1;
+        ret = TRUE;
 
     if (g_ascii_strncasecmp(url, "mmsu://", 7) == 0)
-        ret = 1;
+        ret = TRUE;
d21 2
a22 29
     if (g_ascii_strncasecmp(url, "rtsp://", 7) == 0)
-        ret = 1;
+        ret = TRUE;
 
     if (g_ascii_strncasecmp(url, "tv://", 5) == 0)
-        ret = 1;
+        ret = TRUE;
 
     if (g_ascii_strncasecmp(url, "dvd://", 6) == 0)
-        ret = 1;
+        ret = TRUE;
 
     if (g_strrstr(url, ".m3u") != NULL)
-        ret = 1;
+        ret = TRUE;
 
+    if (g_strrstr(url, "stream") != NULL)
+        ret = TRUE;
+
     if (g_ascii_strncasecmp(url, "file://", 7) == 0) {
         p = g_filename_from_uri(url, NULL, NULL);
         if (p != NULL) {
             if (g_file_test(p, G_FILE_TEST_EXISTS)) {
                 g_strlcpy(url, p, 1024);
-                ret = 1;
+                ret = TRUE;
             }
             g_free(p);
         }
@


1.2
log
@Apply some small bugfixes from upstream: see patches for descriptions.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_plugin_setup_cpp,v 1.1 2010/03/29 12:17:42 dcoppa Exp $
@


1.1
log
@update to 0.9.9.2

OK landry@@, ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
d6 1
d10 16
a25 1
@@@@ -524,38 +524,41 @@@@ void new_instance(CPlugin * instance, int16_t argc, ch
@

