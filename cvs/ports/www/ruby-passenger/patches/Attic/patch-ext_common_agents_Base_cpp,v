head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.03.25.18.13.36;	author dcoppa;	state dead;
branches;
next	1.1;
commitid	awEx0UCw6KRI08bC;

1.1
date	2014.06.24.21.43.02;	author jeremy;	state Exp;
branches;
next	;
commitid	7wpvj72TnIOd2X3b;


desc
@@


1.2
log
@
Remove obsolete/useless patch: our sigaltstack() implementation
does the right thing since we switched to rthreads, as confirmed
by miod@@

ok jeremy@@
@
text
@$OpenBSD: patch-ext_common_agents_Base_cpp,v 1.1 2014/06/24 21:43:02 jeremy Exp $
--- ext/common/agents/Base.cpp.orig	Thu Jun  5 09:10:14 2014
+++ ext/common/agents/Base.cpp	Thu Jun  5 09:10:38 2014
@@@@ -1100,10 +1100,12 @@@@ installAbortHandler() {
 	stack.ss_flags = 0;
 	if (sigaltstack(&stack, NULL) != 0) {
 		int e = errno;
-		fprintf(stderr, "Cannot install an alternative stack for use in signal handlers: %s (%d)\n",
-			strerror(e), e);
-		fflush(stderr);
-		abort();
+		if (e != EINVAL) {
+			fprintf(stderr, "Cannot install an alternative stack for use in signal handlers: %s (%d)\n",
+				strerror(e), e);
+			fflush(stderr);
+			abort();
+		}
 	}
 	
 	struct sigaction action;
@


1.1
log
@Update passenger to 4.0.44.  Update the nginx version used by
passenger standalone to 1.4.7.

Thanks to Frank Groeneveld for feedback and testing.
@
text
@d1 1
a1 1
$OpenBSD$
@

