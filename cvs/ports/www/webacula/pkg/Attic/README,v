head	1.11;
access;
symbols
	OPENBSD_5_4:1.10.0.6
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.4
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.2
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	ajacoutot_20110321:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2013.09.19.15.54.57;	author ajacoutot;	state dead;
branches;
next	1.10;

1.10
date	2012.06.21.07.00.20;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.06.07.10.26.38;	author robert;	state Exp;
branches;
next	1.8;

1.8
date	2012.04.22.11.41.55;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.03.28.07.47.47;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2011.10.16.15.20.33;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.07.28.09.24.35;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.06.02.13.41.42;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.23.21.01.33;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.03.23.07.41.46;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.21.18.01.09;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.03.21.18.01.09;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.11
log
@It makes no sense to distribute some webapps using the pkg tools when it's
just a matter of following upstream and untarring under htdocs.
webapp as a pkg needs to have some added value and no, 'pkg_add webapp' is
not easier if the app has actually no maintainer -- it is safer to follow
upstream.
webacula is one of them and is not even maintained upstream, so zap it.

discusssed with and ok sthen@@
@
text
@$OpenBSD: README,v 1.10 2012/06/21 07:00:20 ajacoutot Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

Webacula has been installed into ${INSTDIR}

*** Upgrading users: refer to the "Update from prior version" section in
*** ${INSTDIR}/docs/txt/install.txt

Database creation
=================

Webacula can work with a PostgreSQL, MySQL or SQLite3 database.
Support for SQLite3 is included with the main php package; to use
another database, the corresponding package needs to be installed:
    php-pdo_pgsql or php-pdo_mysql

To add the webacula DB tables, run the following commands according to
the RDBMS that bacula(8) uses. Note that prior to run these commands,
you will have to ajust at least "db_name", "db_user", "db_pwd" and
"webacula_root_pwd" in ${INSTDIR}/install/db.conf.
Also note that the scripts can take arguments and you must use the
already available bacula user for connecting to the database.

* change to the directory matching your DB (PostgreSql, MySql or SqLite)
    # cd ${INSTDIR}/install/PostgreSql

* run the included scripts to create the webacula tables
    # ./10_make_tables.sh -U bacula
    # ./20_acl_make_tables.sh -U bacula

When using SQLite3, make sure that the "www" user|group has write access
to the directory containing the DB as well as the DB file itself.

Running Webacula under chroot(8)ed Apache
=========================================

Under OpenBSD, the default Apache runs chrooted under /var/www.
Since Webacula needs to access the bconsole(8) binary we will need to
copy it in the chroot along with the required libs and configuration.
To do so, run the following command:
    # ${INSTDIR}/webacula-chroot-bconsole enable

(note that you will have to run this command again when the bacula
package is updated)

With Apache, AllowOverride settings are required on the ${INSTDIR}
directory. You can configure this as follows:
    # ln -s ${PREFIX}/conf/modules.sample/webacula.conf \
        /var/www/conf/modules

Webacula setup and configuration
================================

While upstream install notes are available with this package in:
    ${INSTDIR}/docs/INSTALL
we advise you to follow the following instructions that were written
specifically for OpenBSD.

Webacula configuration itself is done in
    ${INSTDIR}/application/config.ini

Under [general] you need to configure the way you will connect to the
bacula(8) catalog DB. When using SQLite3, make sure the bacula(8) DB
is available from the chroot(8).
Then you may want to adapt "def.timezone" according to your current
location.

Under [webacula] you may want to adapt "email.to_admin" and "email.from"
according to your site.

After restarting your webserver, you can access webacula at:
    http://<hostname>/webacula/

The built-in admin username is "root" and the password is the one you
configured in "webacula_root_pwd" (${INSTDIR}/install/db.conf).

Bacula messages configuration
=============================

To show messages of the Job output, you must change the "catalog' line
from the "Messages" block in ${SYSCONFDIR}/bacula/bacula-dir.conf to
read:
    catalog = all, !skipped, !saved

i.e.
Messages {
  Name = Standard
  <snip>
  catalog = all, !skipped, !saved
}

Then reload bacula-dir(8):
    # ${RCDIR}/bacula_dir reload
@


1.10
log
@Adapt now that pdo_sqlite is part of main php.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.9 2012/06/07 10:26:38 robert Exp $
@


1.9
log
@modify the README so that webacula can properly be configured with pgsql

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.6 2011/10/16 15:20:33 ajacoutot Exp $
d15 4
a18 5
You need to install the PHP module corresponding to the database used by
your bacula(8) installation. e.g:
    for PostreSQL you'll need to install php-pdo_pgsql
    for MySQL you'll need to install php-pdo_mysql
    for SQLite3 you'll need to install php-pdo_sqlite
@


1.8
log
@Use RCDIR instead of /etc/rc.d when refering to packages rc scripts.

discussed with espie and sthen
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.7 2012/03/28 07:47:47 sthen Exp $
d25 2
a26 2
Also note that the scripts can take arguments:
    e.g. ./10_make_tables.sh -U postgres
d32 2
a33 2
    # ./10_make_tables.sh
    # ./20_acl_make_tables.sh
@


1.7
log
@Remove duplicated /webacula/webacula in a path in the README. ok aja@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.6 2011/10/16 15:20:33 ajacoutot Exp $
d97 1
a97 1
    # /etc/rc.d/bacula_dir reload
@


1.6
log
@php5 -> php.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.5 2011/07/28 09:24:35 ajacoutot Exp $
d10 1
a10 1
*** ${INSTDIR}/webacula/docs/txt/install.txt
@


1.5
log
@Update to webacula-5.5.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.4 2011/06/02 13:41:42 ajacoutot Exp $
d17 3
a19 3
    for PostreSQL you'll need to install php5-pdo_pgsql
    for MySQL you'll need to install php5-pdo_mysql
    for SQLite3 you'll need to install php5-pdo_sqlite
@


1.4
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.3 2011/03/23 21:01:33 ajacoutot Exp $
d9 3
d15 2
a16 2
Depending on the database you wish to access, you'll need the
corresponding PHP module.  e.g:
d21 4
a24 8
Note that this is needed for both the webacula DB itself and the one
used by bacula(8) so you may need two different modules if using
different RDBMS.

To setup the webacula DB, run the following commands according to the
RDBMS that webacula will use. While it is not advised to modify
"db_name" you may want to ajust "db_user", "db_password" and "host" in
these scripts.
d26 8
a33 1
    e.g. ./webacula_postgresql_create_database.sh -U postgres
d35 2
a36 14
* MySQL
    # cd ${INSTDIR}/install && ./webacula_mysql_create_database.sh
    # cd ${INSTDIR}/install && ./webacula_mysql_make_tables.sh

* PostgreSQL
    # cd ${INSTDIR}/install && ./webacula_postgresql_create_database.sh
    # cd ${INSTDIR}/install && ./webacula_postgresql_make_tables.sh

* SQLite3
    # mkdir -p /var/www/var/db/sqlite/
    # cd ${INSTDIR}/install && ./webacula_sqlite_create_database.sh
    # chown -R www /var/www/var/db/sqlite
    # chmod 0700 /var/www/var/db/sqlite
    # chmod 0600 /var/www/var/db/sqlite/webacula.db
d72 2
a73 8
Under [webacula] you need to configure the way you will connect to the
webacula DB.
Then you may want to adapt "email.to_admin" and "email.from" according
to your site.

You should add the following cron(8) job to the root's crontab to clean
old temporary files:
    0 1 * * *	find /var/www/tmp/ -name "webacula*" -type f -mtime -24 -exec rm -f {} \;
d78 2
a79 5
*** WARNING!
By default *anyone* can access the webacula interface from localhost.
A sample commented configuration for http basic authentication is
available in /var/www/conf/modules.sample/webacula.conf and you are
STRONGLY ADVISED to enable and edit it to your needs.
d96 1
a96 1
The reload bacula-dir(8):
@


1.3
log
@Simplify: this step is not needed anymore.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.2 2011/03/23 07:41:46 ajacoutot Exp $
d3 3
a5 2
Running webacula under OpenBSD
==============================
d10 1
a10 1
-----------------
d45 1
a45 1
-----------------------------------------
d62 1
a62 1
--------------------------------
d97 1
a97 1
-----------------------------
@


1.2
log
@Better webacula.conf.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.1.1.1 2011/03/21 18:01:09 ajacoutot Exp $
a53 4

The rewrite module needs to be enabled. As root:
    # perl -pi -e 's,^# LoadModule rewrite_module,LoadModule rewrite_module,' \
    	/var/www/conf/httpd.conf 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d94 1
a94 1
By default *anyone* can access the webacula interface.
@


1.1.1.1
log
@Import webacula-5.0.3.

Webacula, i.e. Web + Bacula is a web interface for the Bacula backup
system.

ok sthen@@ robert@@
@
text
@@
