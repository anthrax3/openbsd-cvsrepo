head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.6
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@ * @;


1.1
date	2016.01.16.20.05.35;	author mmcc;	state Exp;
branches;
next	;
commitid	tHmhkX3WCcLNrLPa;


desc
@@


1.1
log
@add an rc.d script

with help from and ok sthen@@, ajacoutot@@
@
text
@#!/bin/sh
#
# $OpenBSD$

daemon="${TRUEPREFIX}/sbin/thttpd"

. /etc/rc.d/rc.subr

# The /var/www root directory will be overridden by any -d flag the user
# supplies. This addresses the awkward fact that thttpd defaults to the
# current working directory.
rc_start() {
	${rcexec} "cd /var/www; ${daemon} ${daemon_flags}"
}

# SIGUSR1 allows all existing connections to terminate before exiting.
rc_stop() {
	pkill -USR1 -xf "^${pexp}"
}

rc_cmd $1
@
