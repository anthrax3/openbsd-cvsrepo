head	1.18;
access;
symbols
	OPENBSD_6_1:1.16.0.6
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.4
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	bentley_20120528:1.1.1.1
	bentley:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.05.31.08.08.15;	author espie;	state Exp;
branches;
next	1.17;
commitid	ij92FtFXiSiT1ani;

1.17
date	2017.05.13.20.59.05;	author espie;	state Exp;
branches;
next	1.16;
commitid	hCOaIXl1koWE76qe;

1.16
date	2015.09.24.10.38.34;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	5JhbHFWtaghcvpKH;

1.15
date	2015.05.18.10.06.37;	author bentley;	state Exp;
branches;
next	1.14;
commitid	InQNjlpIkovWbFr4;

1.14
date	2015.03.27.08.11.27;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	mHt3hIg3nxq5XDcy;

1.13
date	2014.08.19.05.53.59;	author landry;	state Exp;
branches;
next	1.12;
commitid	Sa2Bs4visCDo4gew;

1.12
date	2013.11.25.14.16.22;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2013.11.09.14.12.28;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2013.09.16.01.17.26;	author bentley;	state Exp;
branches;
next	1.9;

1.9
date	2013.06.28.10.27.23;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.04.09.06.21.22;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.11.11.06.04;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2013.02.02.04.39.56;	author bentley;	state Exp;
branches;
next	1.5;

1.5
date	2013.01.11.13.44.24;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.09.21.13.21.44;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.07.09.06.01.01;	author bentley;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.15.08.32.15;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.05.28.09.18.56;	author bentley;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.05.28.09.18.56;	author bentley;	state Exp;
branches;
next	;


desc
@@


1.18
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@# $OpenBSD: Makefile,v 1.17 2017/05/13 20:59:05 espie Exp $

# XXX check if still needed at next update
CXXFLAGS +=		-std=c++11 -fpermissive

COMMENT =		emulator for Nintendo Game Boy (Color/Advance)
BROKEN-alpha =		ICE or OOM on hq_implementation.cpp
BROKEN-hppa =		ICE or OOM on src/filters/hq/c/hq_base.h:421

DISTNAME =		vbam-1.8.0.1054-src
PKGNAME =		${DISTNAME:S/-src//}
REVISION =		9

CATEGORIES =		emulators

HOMEPAGE =		http://www.vba-m.com

# GPLv2+ (see doc/License.txt)
PERMIT_PACKAGE_CDROM =		Yes

WANTLIB += GL GLU ICE SDL SM X11 Xcomposite Xcursor Xdamage Xext
WANTLIB += Xfixes Xi Xinerama Xmu Xrandr Xrender Xt atk-1.0 atkmm-1.6
WANTLIB += c cairo cairomm-1.0 fontconfig freetype gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gdkglext-x11-1.0 gdkglextmm-x11-1.2
WANTLIB += gdkmm-2.4 gio-2.0 giomm-2.4 glib-2.0 glibmm-2.4 gmodule-2.0
WANTLIB += gobject-2.0 gtk-x11-2.0 gtkglext-x11-1.0 gtkglextmm-x11-1.2
WANTLIB += gtkmm-2.4 m pango-1.0 pangocairo-1.0 pangoft2-1.0 pangomm-1.4
WANTLIB += pangox-1.0 png pthread sigc-2.0 z

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=vbam/}

MODULES =		devel/cmake \
			devel/gettext

# c++11
COMPILER =		gcc

RUN_DEPENDS =		devel/desktop-file-utils \
			x11/gtk+3,-guic

LIB_DEPENDS =		devel/sdl \
			x11/gtkglextmm

NO_TEST =		Yes

WRKDIST =		${WRKDIR}/${DISTNAME:S/-src//}

# requires posix_openpt
CONFIGURE_ARGS +=	-DENABLE_WX=OFF -DENABLE_FFMPEG=OFF
CXXFLAGS +=		-Wno-c++11-narrowing

pre-fake:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/vbam

.include <bsd.port.mk>
@


1.17
log
@let it build with clang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/09/24 10:38:34 ajacoutot Exp $
d36 1
a36 1
WANT_CXX =		base gcc
@


1.16
log
@Needs the gcc4 MODULE for c++11 support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/05/18 10:06:37 bentley Exp $
d36 1
a36 3
MODULES +=		gcc4
MODGCC4_ARCHS=		*
MODGCC4_LANGS=		c++
d50 1
@


1.15
log
@Drop maintainership of vbam.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.14 2015/03/27 08:11:27 ajacoutot Exp $
d12 1
a12 1
REVISION =		8
d28 1
a28 1
WANTLIB += pangox-1.0 png pthread sigc-2.0 stdc++ z
d34 5
@


1.14
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/08/19 05:53:59 landry Exp $
d9 1
a9 1
REVISION =		7
a13 2

MAINTAINER =		Anthony J. Bentley <anthony@@cathet.us>
@


1.13
log
@BROKEN-hppa, never built reliably there, gcc OOM or ICE after a while..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/11/25 14:16:22 sthen Exp $
d9 1
a9 1
REVISION =		6
d35 1
a35 1
			x11/gtk+2,-guic
@


1.12
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/11/09 14:12:28 landry Exp $
d5 1
@


1.11
log
@Mark those as BROKEN-alpha for various fully reproducible OOM/ICE reasons.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/09/16 01:17:26 bentley Exp $
a44 2

VMEM_WARNING =		Yes
@


1.10
log
@Trim pathologically long DESCR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/06/28 10:27:23 ajacoutot Exp $
d4 1
@


1.9
log
@Patch not needed with newer gtk2mm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/04/09 06:21:22 ajacoutot Exp $
d7 1
a7 1
REVISION =		5
@


1.8
log
@Fix build with gtkmm>=2.24.3; shoud be the last fallout.

reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/11 11:06:04 espie Exp $
d7 1
a7 1
REVISION =		4
@


1.7
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/02/02 04:39:56 bentley Exp $
d7 1
a7 1
REVISION =		3
d18 8
a25 9
WANTLIB +=	GL GLU ICE SDL SM X11 Xcomposite Xcursor Xdamage Xext
WANTLIB +=	Xfixes Xi Xinerama Xmu Xrandr Xrender Xt atk-1.0 atkmm-1.6
WANTLIB +=	c cairo cairomm-1.0 expat fontconfig freetype gdk-x11-2.0
WANTLIB +=	gdk_pixbuf-2.0 gdkglext-x11-1.0 gdkglextmm-x11-1.2
WANTLIB +=	gdkmm-2.4 gio-2.0 giomm-2.4 glib-2.0 glibmm-2.4 gmodule-2.0
WANTLIB +=	gobject-2.0 gtk-x11-2.0 gtkglext-x11-1.0 gtkglextmm-x11-1.2
WANTLIB +=	gtkmm-2.4 m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB +=	pangomm-1.4 pangox-1.0 pixman-1 png pthread pthread-stubs
WANTLIB +=	sigc-2.0 stdc++ xcb xcb-render xcb-shm z
@


1.6
log
@Take maintainership of some ports I'm interested in.

Initially suggested by kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/01/11 13:44:24 ajacoutot Exp $
a16 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d39 1
a39 1
NO_REGRESS =		Yes
@


1.5
log
@Bump after libsigc++-2 -docs => -main merge.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/09/21 13:21:44 ajacoutot Exp $
d7 1
a7 1
REVISION=		2
d12 2
@


1.4
log
@Fix after pangox removal from devel/pango.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/07/09 06:01:01 bentley Exp $
d7 1
a7 1
REVISION=		1
@


1.3
log
@Disable ffmpeg in vbam's configure, since it's not actually used.

ffmpeg is only used in the wx frontend, which doesn't build on OpenBSD
(for unrelated reasons).

From Mikolaj Kucharski, ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/06/15 08:32:15 ajacoutot Exp $
d7 1
a7 1
REVISION=		0
@


1.2
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/05/28 09:18:56 bentley Exp $
d45 1
a45 1
CONFIGURE_ARGS +=	-DENABLE_WX=OFF
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.60 2010/10/24 20:41:23 ajacoutot Exp $
d7 1
@


1.1.1.1
log
@Import vbam-1.8.0.1054.

VBA-M is a fork from the now inactive VisualBoy Advance project, with
goals to improve the capabilities and features of the emulator.


This is basically a replacement for emulators/vba, which is currently
broken in at least two ways:
 - emulation speed is whacked out when sndiod is running
 - gvba recently started segfaulting on startup


tweaks & oks from landry@@ jasper@@ edd@@


@
text
@@
