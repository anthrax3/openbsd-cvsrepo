head	1.5;
access;
symbols
	OPENBSD_4_2:1.4.0.6
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	jsg_20041007:1.1.1.1
	jsg:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2007.08.31.23.42.08;	author jsg;	state dead;
branches;
next	1.4;

1.4
date	2006.03.31.13.56.51;	author jsg;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.26.04.42.39;	author jsg;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.25.01.40.24;	author jsg;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.07.03.05.32;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.07.03.05.32;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to 0.72
@
text
@$OpenBSD: patch-src_dos_cdrom_image_cpp,v 1.4 2006/03/31 13:56:51 jsg Exp $
--- src/dos/cdrom_image.cpp.orig	Thu Feb  9 23:32:52 2006
+++ src/dos/cdrom_image.cpp	Fri Mar 31 21:36:23 2006
@@@@ -118,7 +118,7 @@@@ int CDROM_Interface_Image::AudioFile::ge
 			shift += time >> 1;
 			time = 1;
 		} else {
-			if (time > ((numeric_limits<int>::max() - shift) / 2)) return -1;
+			if (time > ((INT_MAX - shift) / 2)) return -1;
 			time = time << 1;
 		}
 	}
@


1.4
log
@Update to 0.65
@
text
@d1 1
a1 1
$OpenBSD: patch-src_dos_cdrom_image_cpp,v 1.3 2005/11/26 04:42:39 jsg Exp $
@


1.3
log
@No need to patch out lround now it is in libm.
@
text
@d1 4
a4 4
$OpenBSD$
--- src/dos/cdrom_image.cpp.orig	Sat Nov 26 15:18:06 2005
+++ src/dos/cdrom_image.cpp	Sat Nov 26 15:18:13 2005
@@@@ -115,7 +115,7 @@@@ int CDROM_Interface_Image::AudioFile::ge
@


1.2
log
@update to 0.63
@
text
@d1 4
a4 9
$OpenBSD: patch-src_dos_cdrom_image_cpp,v 1.1.1.1 2004/10/07 03:05:32 jsg Exp $
--- src/dos/cdrom_image.cpp.orig	Wed Oct  6 05:55:03 2004
+++ src/dos/cdrom_image.cpp	Mon Nov 22 21:13:39 2004
@@@@ -111,11 +111,11 @@@@ int CDROM_Interface_Image::AudioFile::ge
 	while (true) {
 		int success = Sound_Seek(sample, (unsigned int)(shift + time));
 		if (!success) {
-			if (time == 1) return lround((double)shift * 176.4f);
+			if (time == 1) return (int)((double)shift * 176.4f) + 0.5;
@


1.1
log
@Initial revision
@
text
@d1 3
a3 14
$OpenBSD$
--- src/dos/cdrom_image.cpp.orig	Sun Oct  3 20:48:13 2004
+++ src/dos/cdrom_image.cpp	Sun Oct  3 20:48:32 2004
@@@@ -23,9 +23,9 @@@@
 #include <cstdio>
 #include <fstream>
 #include <iostream>
-#include <limits>
 #include <sstream>
 #include <vector>
+#include <sys/limits.h>
 #include <sys/stat.h>
 #include "cdrom.h"
 #include "drives.h"
a17 9
@@@@ -572,7 +572,7 @@@@ bool CDROM_Interface_Image::GetRealFileN
 	if (stat(filename.c_str(), &test) == 0) return true;
 	
 	// check if file with path relative to cue file exists
-#if not defined(WIN32)
+#if !defined(WIN32)
 	string tmpstr(pathname + "/" + filename);
 	if (stat(tmpstr.c_str(), &test) == 0) {
 		filename = tmpstr;
@


1.1.1.1
log
@Initial import of dosbox-0.62

DOSBox emulates an x86 PC + DOS as well as various hardware
required to play old games.

earlier version ok sturm@@, ok brad@@
@
text
@@
