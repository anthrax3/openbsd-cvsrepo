head	1.32;
access;
symbols
	OPENBSD_6_0:1.31.0.4
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.30.0.6
	OPENBSD_5_8_BASE:1.30
	OPENBSD_5_7:1.30.0.2
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.28.0.4
	OPENBSD_5_6_BASE:1.28
	OPENBSD_5_5:1.28.0.2
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.25.0.2
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.21.0.4
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.20.0.4
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.15.0.2
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.10.0.6
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.4
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	jsg_20041007:1.1.1.1
	jsg:1.1.1;
locks; strict;
comment	@# @;


1.32
date	2017.03.25.15.53.56;	author landry;	state Exp;
branches;
next	1.31;
commitid	G2Y1U5pjUPmGBiUw;

1.31
date	2015.12.24.13.08.12;	author bentley;	state Exp;
branches;
next	1.30;
commitid	Y6k3LBuo4zfp6cxJ;

1.30
date	2015.01.20.09.08.32;	author jsg;	state Exp;
branches;
next	1.29;
commitid	OKbOqYzhyaH3V01B;

1.29
date	2014.09.29.22.10.37;	author juanfra;	state Exp;
branches;
next	1.28;
commitid	0q0JSmB11BM4cXWP;

1.28
date	2014.01.09.10.10.15;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2013.06.04.18.41.41;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.11.11.06.04;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2012.12.23.13.25.11;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2012.12.21.17.44.47;	author landry;	state Exp;
branches;
next	1.23;

1.23
date	2012.11.17.14.07.50;	author ratchov;	state Exp;
branches;
next	1.22;

1.22
date	2012.09.29.05.07.24;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2011.09.21.09.15.21;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.15.23.22.08;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.24.21.17.48;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.23.22.01.29;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.18.00.16;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.09.28.09.09.15;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2010.07.23.19.41.49;	author jsg;	state Exp;
branches;
next	1.14;

1.14
date	2010.07.10.13.16.14;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2010.04.03.00.32.55;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.11.18.00.49.09;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.15.17.22.46;	author jsg;	state Exp;
branches;
next	1.10;

1.10
date	2008.06.12.20.36.34;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.16.00.45.13;	author merdely;	state Exp;
branches;
next	1.8;

1.8
date	2007.08.31.23.42.08;	author jsg;	state Exp;
branches;
next	1.7;

1.7
date	2007.03.15.09.05.20;	author jsg;	state Exp;
branches;
next	1.6;

1.6
date	2006.08.02.09.36.20;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.03.31.13.56.51;	author jsg;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.26.04.42.38;	author jsg;	state Exp;
branches;
next	1.3;

1.3
date	2004.11.27.10.39.13;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.25.01.40.24;	author jsg;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.07.03.05.32;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.07.03.05.32;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.32
log
@Add USE_WXNEEDED marker otherwise this blows in some circumstances.
Patch from Benjamin Baier, ok tsg@@
@
text
@# $OpenBSD: Makefile,v 1.31 2015/12/24 13:08:12 bentley Exp $

ONLY_FOR_ARCHS=	${GCC4_ARCHS}
USE_WXNEEDED=	Yes

COMMENT=	x86 with DOS emulator targeted at playing games

DISTNAME=	dosbox-0.74
REVISION=	7
CATEGORIES=	games x11 emulators
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=dosbox/}

HOMEPAGE=	http://www.dosbox.com/

MAINTAINER=	Jonathan Gray <jsg@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM=   Yes

WANTLIB += GL SDL SDL_net SDL_sound stdc++ png X11 c m pthread sndio z

LIB_DEPENDS=	devel/sdl-net \
		devel/sdl-sound \
		graphics/png

NO_TEST=	Yes

AUTOCONF_VERSION=       2.69
AUTOMAKE_VERSION=       1.12
BUILD_DEPENDS=          ${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS}

CONFIGURE_STYLE= gnu
CONFIGURE_ENV=CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include"
CONFIGURE_ENV+=LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
CONFIGURE_ARGS+=	--disable-alsatest

pre-configure:
	cp ${FILESDIR}/midi_sndio.h ${WRKSRC}/src/gui
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} aclocal
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} autoconf
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} autoheader
	cd ${WRKSRC} && env AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} automake

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/dosbox
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/dosbox

.include <bsd.port.mk>
@


1.31
log
@Update homepage and license marker.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/01/20 09:08:32 jsg Exp $
d4 1
d9 1
a9 1
REVISION=	6
@


1.30
log
@Enable support for OpenGL output modes.
From Dmitrij D. Czarkoff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/09/29 22:10:37 juanfra Exp $
d8 1
a8 1
REVISION=	5
d12 1
a12 1
HOMEPAGE=	http://dosbox.sourceforge.net/
d16 1
a16 1
# GPL
@


1.29
log
@Unbreak on hppa. The package builds fine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/01/09 10:10:15 sthen Exp $
d8 1
a8 1
REVISION=	4
d19 1
a19 1
WANTLIB += SDL SDL_net SDL_sound stdc++ png X11 c m pthread sndio z
a24 1
USE_GROFF=	Yes
a35 1
CONFIGURE_ARGS+=	--disable-opengl
@


1.28
log
@Make use of some code in dosbox, intended for MacOS X, which avoids using
%ebx on i386 (now used for PIE). Not 100% sure if this is the best way to go,
but it works in initial tests, and the port no longer builds without it,
so let's try this for now and see how it goes, jsg@@ agrees.

There's a bit more commentary in a comment in the patch (the enabled code
also aligns stack on 16 bytes which OSX IA-32 ABI requires as they use SSE
extensively, which we won't need but it seems safer to enable all the
related code together).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/06/04 18:41:41 naddy Exp $
a5 1
BROKEN-hppa =	mpu401.cpp:42: error: expected identifier before numeric constant
@


1.27
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/03/11 11:06:04 espie Exp $
d9 1
a9 1
REVISION=	3
@


1.26
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/12/23 13:25:11 sthen Exp $
d35 1
a35 1
CONFIGURE_ENV=CPPFLAGS="-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include -I${X11BASE}/include"
@


1.25
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/12/21 17:44:47 landry Exp $
a18 3
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes
d27 1
a27 1
NO_REGRESS=	Yes
@


1.24
log
@Mark as BROKEN-hppa: it never built there.
mpu401.cpp:42: error: expected identifier before numeric constant
mpu401.cpp:42: error: expected `}' before numeric constant
mpu401.cpp:42: error: expected unqualified-id before numeric constant
mpu401.cpp:42: error: expected declaration before '}' token
mpu401.cpp:42: error: expected `}' before numeric constant
mpu401.cpp:42: error: expected unqualified-id before numeric constant
mpu401.cpp:42: error: expected declaration before '}' token
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/11/17 14:07:50 ratchov Exp $
d9 1
a9 1
REVISION=	2
d23 1
a23 1
WANTLIB=		SDL SDL_net SDL_sound png X11 c m pthread sndio z
d38 1
a38 1
CONFIGURE_ENV=CPPFLAGS="-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include -I${X11BASE}/include" 
@


1.23
log
@Add support for midi output using libsndio, to allow dosbox to use
softsynths or remote midi hardware

ok jsg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/09/29 05:07:24 brad Exp $
d6 1
@


1.22
log
@Add X11BASE paths to CPPFLAGS/LDFLAGS.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/09/21 09:15:21 jasper Exp $
d8 1
a8 1
REVISION=	1
d22 1
a22 1
WANTLIB=		SDL SDL_net SDL_sound png X11 c m pthread z
d31 5
d41 11
@


1.21
log
@use ONLY_FOR_ARCHS=${GCC4_ARCHS}

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/15 23:22:08 espie Exp $
d32 2
a33 2
CONFIGURE_ENV=CPPFLAGS="-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include" 
CONFIGURE_ENV+=LDFLAGS="-L${LOCALBASE}/lib"
@


1.20
log
@new depends
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2010/10/24 21:17:48 ajacoutot Exp $
d6 1
d8 1
a8 1
REVISION=	0
d28 1
a28 1
USE_GROFF =	Yes
a29 4

MODULES+=       gcc4
MODGCC4_ARCHES= *
MODGCC4_LANGS=  c c++
@


1.19
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/23 22:01:29 sthen Exp $
d21 3
a23 3
LIB_DEPENDS=	::devel/sdl-net \
		::devel/sdl-sound \
		::graphics/png
@


1.18
log
@revision/lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 18:00:16 espie Exp $
a24 1
USE_X11=	Yes
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/09/28 09:09:15 jasper Exp $
d19 1
a19 1
WANTLIB=		SDL X11 c m pthread z
d21 3
a23 3
LIB_DEPENDS=	SDL_net::devel/sdl-net \
		SDL_sound::devel/sdl-sound \
		png.>=2::graphics/png
@


1.16
log
@- bump after gcc4 switch of mips64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/07/23 19:41:49 jsg Exp $
d26 1
@


1.15
log
@update to 0.74, from bwaichu@@yahoo.com
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/07/10 13:16:14 naddy Exp $
d5 1
@


1.14
log
@bump after gcc3->gcc4 switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/04/03 00:32:55 sthen Exp $
d4 1
a4 2
DISTNAME=	dosbox-0.73
REVISION=	2
@


1.13
log
@sync WANTLIB/LIB_DEPENDS, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/11/18 00:49:09 sthen Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p1
@


1.12
log
@- fix dependencies following libstdc++ bump from 4.2.4p3 to 4.2.4v0
- bump relevant PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/08/15 17:22:46 jsg Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}p0
d19 1
a19 1
WANTLIB=		SDL c m pthread stdc++ z
@


1.11
log
@Update to 0.73 and depend on gcc4 as this won't compile
with either of our old in tree versions of gcc.

No thanks to cwm for requiring keyboard pointer control keys
to be forcibly unmapped via a configuration file for
keen to be playable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/06/12 20:36:34 sthen Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME}
d18 1
@


1.10
log
@sync wantlib, bump packages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/16 00:45:13 merdely Exp $
d4 2
a5 2
DISTNAME=	dosbox-0.72
PKGNAME=	${DISTNAME}p0
d26 4
@


1.9
log
@Removed surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/08/31 23:42:08 jsg Exp $
d5 1
d18 1
a18 1
WANTLIB=		SDL X11 Xext c m pthread stdc++ usbhid z
@


1.8
log
@Update to 0.72
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/03/15 09:05:20 jsg Exp $
d3 1
a3 1
COMMENT=	"x86 with DOS emulator targeted at playing games"
@


1.7
log
@Update to 0.70
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/08/02 09:36:20 espie Exp $
d4 1
a4 2
DISTNAME=	dosbox-0.70
PKGNAME=	${DISTNAME}
@


1.6
log
@more newstyle lib-depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/03/31 13:56:51 jsg Exp $
d4 1
a4 1
DISTNAME=	dosbox-0.65
@


1.5
log
@Update to 0.65
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/11/26 04:42:38 jsg Exp $
d22 1
a22 1
		png.2::graphics/png
@


1.4
log
@No need to patch out lround now it is in libm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/11/27 10:39:13 espie Exp $
d3 3
a5 3
COMMENT=	"x86 with DOS emulator targeted at playing old games"
DISTNAME=	dosbox-0.63
PKGNAME=	${DISTNAME}p0
a29 2
# The dynamic CPU core does nasty things
CONFIGURE_ARGS=		--disable-dynamic-x86 
@


1.3
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/11/25 01:40:24 jsg Exp $
d4 2
a5 2
VERSION=	0.63
DISTNAME=	dosbox-${VERSION}
@


1.2
log
@update to 0.63
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/10/07 03:05:32 jsg Exp $
d18 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
VERSION=	0.62
d33 4
@


1.1.1.1
log
@Initial import of dosbox-0.62

DOSBox emulates an x86 PC + DOS as well as various hardware
required to play old games.

earlier version ok sturm@@, ok brad@@
@
text
@@
