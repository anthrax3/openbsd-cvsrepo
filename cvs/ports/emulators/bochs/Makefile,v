head	1.71;
access;
symbols
	OPENBSD_6_1:1.67.0.2
	OPENBSD_6_1_BASE:1.67
	OPENBSD_6_0:1.66.0.6
	OPENBSD_6_0_BASE:1.66
	OPENBSD_5_9:1.66.0.2
	OPENBSD_5_9_BASE:1.66
	OPENBSD_5_8:1.66.0.4
	OPENBSD_5_8_BASE:1.66
	OPENBSD_5_7:1.62.0.2
	OPENBSD_5_7_BASE:1.62
	OPENBSD_5_6:1.60.0.6
	OPENBSD_5_6_BASE:1.60
	OPENBSD_5_5:1.60.0.4
	OPENBSD_5_5_BASE:1.60
	OPENBSD_5_4:1.60.0.2
	OPENBSD_5_4_BASE:1.60
	OPENBSD_5_3:1.56.0.2
	OPENBSD_5_3_BASE:1.56
	OPENBSD_5_2:1.55.0.4
	OPENBSD_5_2_BASE:1.55
	OPENBSD_5_1_BASE:1.55
	OPENBSD_5_1:1.55.0.2
	OPENBSD_5_0:1.50.0.2
	OPENBSD_5_0_BASE:1.50
	OPENBSD_4_9:1.49.0.2
	OPENBSD_4_9_BASE:1.49
	OPENBSD_4_8:1.47.0.2
	OPENBSD_4_8_BASE:1.47
	OPENBSD_4_7:1.45.0.2
	OPENBSD_4_7_BASE:1.45
	OPENBSD_4_6:1.44.0.2
	OPENBSD_4_6_BASE:1.44
	OPENBSD_4_5:1.43.0.4
	OPENBSD_4_5_BASE:1.43
	OPENBSD_4_4:1.43.0.2
	OPENBSD_4_4_BASE:1.43
	OPENBSD_4_3:1.41.0.2
	OPENBSD_4_3_BASE:1.41
	OPENBSD_4_2:1.39.0.2
	OPENBSD_4_2_BASE:1.39
	OPENBSD_4_1:1.38.0.10
	OPENBSD_4_1_BASE:1.38
	OPENBSD_4_0:1.38.0.8
	OPENBSD_4_0_BASE:1.38
	OPENBSD_3_9:1.38.0.6
	OPENBSD_3_9_BASE:1.38
	OPENBSD_3_8:1.38.0.4
	OPENBSD_3_8_BASE:1.38
	OPENBSD_3_7:1.38.0.2
	OPENBSD_3_7_BASE:1.38
	OPENBSD_3_6:1.37.0.2
	OPENBSD_3_6_BASE:1.37
	OPENBSD_3_5:1.35.0.2
	OPENBSD_3_5_BASE:1.35
	OPENBSD_3_4:1.31.0.2
	OPENBSD_3_4_BASE:1.31
	OPENBSD_3_3:1.29.0.2
	OPENBSD_3_3_BASE:1.29
	OPENBSD_3_2:1.24.0.2
	OPENBSD_3_2_BASE:1.24
	OPENBSD_3_1:1.22.0.4
	OPENBSD_3_1_BASE:1.22
	OPENBSD_3_0:1.22.0.2
	OPENBSD_3_0_BASE:1.22
	OPENBSD_2_9_TRACKING_SWITCH:1.21
	OPENBSD_2_9:1.19.0.2
	OPENBSD_2_9_BASE:1.19
	OPENBSD_2_8:1.15.0.2
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.13.0.2
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.8.0.4
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.4.0.2
	OPENBSD_2_4_BASE:1.4
	form_980520:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.71
date	2017.07.26.22.45.19;	author sthen;	state Exp;
branches;
next	1.70;
commitid	tD4MFrpYYDDL2UFT;

1.70
date	2017.07.16.19.18.53;	author espie;	state Exp;
branches;
next	1.69;
commitid	tt0GhWK5c4uf9ILG;

1.69
date	2017.04.23.13.25.29;	author ajacoutot;	state Exp;
branches;
next	1.68;
commitid	VWJLoVzlczq0QiJk;

1.68
date	2017.04.10.11.45.27;	author sthen;	state Exp;
branches;
next	1.67;
commitid	XDh1zlSBq0boKsHk;

1.67
date	2016.09.13.15.29.01;	author naddy;	state Exp;
branches;
next	1.66;
commitid	ZR0IP7QclqedYIO6;

1.66
date	2015.05.10.08.01.58;	author ajacoutot;	state Exp;
branches;
next	1.65;
commitid	eTnpCBhROLDEBNgF;

1.65
date	2015.04.09.20.09.35;	author sthen;	state Exp;
branches;
next	1.64;
commitid	ac06p2m832Zn9YsK;

1.64
date	2015.03.23.18.06.36;	author landry;	state Exp;
branches;
next	1.63;
commitid	8jRr3YJxjlPF3HFl;

1.63
date	2015.03.19.18.56.57;	author landry;	state Exp;
branches;
next	1.62;
commitid	ioR597jr143mBCQW;

1.62
date	2014.12.31.08.42.26;	author landry;	state Exp;
branches;
next	1.61;
commitid	vf8MnqY339W3vwfX;

1.61
date	2014.11.04.06.01.41;	author brad;	state Exp;
branches;
next	1.60;
commitid	E18pWof7BEVBTE70;

1.60
date	2013.06.15.22.59.58;	author brad;	state Exp;
branches;
next	1.59;

1.59
date	2013.04.26.17.32.26;	author brad;	state Exp;
branches;
next	1.58;

1.58
date	2013.03.21.08.45.17;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2013.03.11.11.06.03;	author espie;	state Exp;
branches;
next	1.56;

1.56
date	2012.09.25.23.21.47;	author brad;	state Exp;
branches;
next	1.55;

1.55
date	2012.01.12.17.01.47;	author giovanni;	state Exp;
branches;
next	1.54;

1.54
date	2011.12.13.08.46.51;	author giovanni;	state Exp;
branches;
next	1.53;

1.53
date	2011.12.05.14.56.27;	author giovanni;	state Exp;
branches;
next	1.52;

1.52
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2011.11.29.17.22.01;	author giovanni;	state Exp;
branches;
next	1.50;

1.50
date	2011.03.23.11.27.39;	author giovanni;	state Exp;
branches;
next	1.49;

1.49
date	2010.10.24.21.17.48;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2010.10.18.18.00.16;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2010.07.08.15.40.11;	author giovanni;	state Exp;
branches;
next	1.46;

1.46
date	2010.03.29.07.37.12;	author giovanni;	state Exp;
branches;
next	1.45;

1.45
date	2009.08.10.06.31.09;	author kili;	state Exp;
branches;
next	1.44;

1.44
date	2009.06.23.16.03.58;	author pirofti;	state Exp;
branches;
next	1.43;

1.43
date	2008.07.16.20.31.33;	author brad;	state Exp;
branches;
next	1.42;

1.42
date	2008.04.10.03.39.54;	author fgsch;	state Exp;
branches;
next	1.41;

1.41
date	2007.11.13.14.54.30;	author steven;	state Exp;
branches;
next	1.40;

1.40
date	2007.09.16.00.45.13;	author merdely;	state Exp;
branches;
next	1.39;

1.39
date	2007.03.31.12.58.13;	author steven;	state Exp;
branches;
next	1.38;

1.38
date	2004.11.27.10.39.13;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2004.08.11.04.46.49;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2004.05.12.22.40.11;	author pedro;	state Exp;
branches;
next	1.35;

1.35
date	2004.01.22.14.55.15;	author todd;	state Exp;
branches;
next	1.34;

1.34
date	2004.01.22.14.43.01;	author todd;	state Exp;
branches;
next	1.33;

1.33
date	2004.01.12.12.32.29;	author grange;	state Exp;
branches;
next	1.32;

1.32
date	2004.01.09.16.15.04;	author fgsch;	state Exp;
branches;
next	1.31;

1.31
date	2003.05.30.19.59.52;	author todd;	state Exp;
branches;
next	1.30;

1.30
date	2003.04.25.21.15.43;	author todd;	state Exp;
branches;
next	1.29;

1.29
date	2003.03.12.12.56.22;	author todd;	state Exp;
branches;
next	1.28;

1.28
date	2003.01.13.14.55.46;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2003.01.03.18.44.33;	author todd;	state Exp;
branches;
next	1.26;

1.26
date	2002.12.28.06.20.19;	author todd;	state Exp;
branches;
next	1.25;

1.25
date	2002.10.26.12.52.48;	author naddy;	state Exp;
branches;
next	1.24;

1.24
date	2002.06.09.16.24.57;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2002.05.08.17.19.36;	author todd;	state Exp;
branches;
next	1.22;

1.22
date	2001.09.19.20.44.53;	author todd;	state Exp;
branches;
next	1.21;

1.21
date	2001.06.13.16.12.49;	author todd;	state Exp;
branches;
next	1.20;

1.20
date	2001.05.26.05.52.55;	author todd;	state Exp;
branches;
next	1.19;

1.19
date	2001.03.26.15.58.18;	author todd;	state Exp;
branches;
next	1.18;

1.18
date	2001.03.02.14.51.35;	author todd;	state Exp;
branches;
next	1.17;

1.17
date	2001.03.01.22.43.49;	author todd;	state Exp;
branches;
next	1.16;

1.16
date	2001.02.02.16.59.06;	author todd;	state Exp;
branches;
next	1.15;

1.15
date	2000.07.18.05.16.58;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2000.05.31.15.15.44;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.04.09.17.36.25;	author espie;	state Exp;
branches
	1.13.2.1;
next	1.12;

1.12
date	2000.03.24.22.11.41;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.16.22.26.18;	author turan;	state Exp;
branches;
next	1.10;

1.10
date	2000.02.11.00.37.23;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	99.10.31.20.22.37;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.04.01.06.20.12;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.03.10.21.48.24;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.02.22.04.52.22;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	98.11.18.11.06.52;	author form;	state Exp;
branches;
next	1.4;

1.4
date	98.10.20.08.39.45;	author form;	state Exp;
branches;
next	1.3;

1.3
date	98.10.18.05.02.06;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.10.15.04.33.25;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.05.20.07.11.31;	author form;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.05.20.07.11.31;	author form;	state Exp;
branches;
next	;

1.13.2.1
date	2000.09.15.04.50.43;	author marc;	state Exp;
branches;
next	;


desc
@@


1.71
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.70 2017/07/16 19:18:53 espie Exp $

COMMENT=	x86 machine simulator

DISTNAME=	bochs-2.6.9
CATEGORIES=	emulators
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=bochs/}
REVISION=	0

HOMEPAGE=	http://bochs.sourceforge.net/

# LGPLv2.1+ and MIT
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c m pthread ${COMPILER_LIBCXX} termlib

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--enable-all-optimizations \
		--enable-avx \
		--enable-e1000 \
		--enable-es1370 \
		--enable-large-ramfile \
		--enable-ne2000 \
		--enable-pnic \
		--enable-smp \
		--enable-svm \
		--enable-x86-64 \
		--enable-usb \
		--enable-usb-ohci \
		--enable-vmx=2 \
		--with-term

FLAVORS=	debug no_x11
FLAVOR?=

.if ${FLAVOR:Mdebug}
CONFIGURE_ARGS+=--disable-debugger-gui \
		--enable-debugger \
		--enable-x86-debugger \
		--enable-readline
WANTLIB+=	curses readline
.endif

.if ${FLAVOR:Mno_x11}
CONFIGURE_ARGS+=--with-nogui
.else
LIB_DEPENDS+=	converters/libiconv \
		devel/sdl
CONFIGURE_ARGS+=--with-sdl \
		--with-x11
WANTLIB+=	SDL X11 Xext Xpm Xrandr Xrender iconv sndio usbhid xcb
.endif

NO_TEST=	Yes

post-install:
	${INSTALL_DATA} ${WRKSRC}/docs-html/*.html ${PREFIX}/share/doc/bochs
	@@mv ${PREFIX}/share/doc/bochs/bochsrc-sample.txt \
	    ${PREFIX}/share/bochs/bochsrc

.include <bsd.port.mk>
@


1.70
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2017/04/23 13:25:29 ajacoutot Exp $
d8 1
@


1.69
log
@Update to bochs-2.6.9.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2017/04/10 11:45:27 sthen Exp $
d14 1
a14 1
WANTLIB=	c m pthread ${LIBCXX} termlib
@


1.68
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2016/09/13 15:29:01 naddy Exp $
d5 1
a5 1
DISTNAME=	bochs-2.6.8
@


1.67
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2015/05/10 08:01:58 ajacoutot Exp $
d14 1
a14 1
WANTLIB=	c m pthread stdc++ termlib
@


1.66
log
@Update to bochs-2.6.8.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2015/04/09 20:09:35 sthen Exp $
d46 2
a47 2
MODULES=	converters/libiconv
LIB_DEPENDS+=	devel/sdl
d50 1
a50 1
WANTLIB+=	SDL X11 Xext Xpm Xrandr Xrender sndio usbhid xcb
@


1.65
log
@Fix bximage compilation on big endian hosts, to unbreak bochs. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2015/03/23 18:06:36 landry Exp $
d5 1
a5 2
DISTNAME=	bochs-2.6.7
REVISION=	0
@


1.64
log
@nobody cares about poor bochs on non-mainstream archs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2015/03/19 18:56:57 landry Exp $
a3 3
BROKEN-hppa=	./iodev/hdimage/hdimage.cc:807: error: 'bx_bswap32' was not declared in this scope
BROKEN-powerpc= error: 'bx_bswap32' was not declared in this scope
BROKEN-sparc64= error: 'bx_bswap32' was not declared in this scope
d6 1
@


1.63
log
@BROKEN-powerpc= error: bx_bswap32 was not declared in this scope (like hppa)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2014/12/31 08:42:26 landry Exp $
d6 1
@


1.62
log
@Yet another bunch of ports that reliably fail to build on hppa.

BROKEN-hppa =	SIGILL when running lilypond
BROKEN-hppa =	libjson-c.so.0.0: undefined reference to __sync_val_compare_and_swap_4
BROKEN-hppa=	missing atomic ops
BROKEN-hppa=	./iodev/hdimage/hdimage.cc:807: error: 'bx_bswap32' was not declared in this scope
BROKEN-hppa =	cc1plus: error: unrecognized command line option '-std=c++11'
BROKEN-hppa =	src/bin/jp2/convert.c:192: error: expected identifier or '(' before '__extension__'
BROKEN-hppa=	libpt.so.7.0: undefined reference to __sync_fetch_and_or_4
BROKEN-hppa=	ykpers-json.c:42: error: redefinition of typedef 'json_bool'
BROKEN-hppa=	OOM on src/lxml/lxml.etree.c
BROKEN-hppa =	undefined reference to `__sync_val_compare_and_swap_4' in libjson-c
BROKEN-hppa =	rake fails when linking PassengerHelperAgent
BROKEN-hppa =	kstars/kstars/tools/scriptbuilder.cpp:103: internal compiler error: Segmentation fault
BROKEN-hppa=	build stuck on virt-viewer-window.c

See http://build-failures.rhaalovely.net/hppa/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2014/11/04 06:01:41 brad Exp $
d5 1
@


1.61
log
@Update to Bochs 2.6.7.

ok ratchov@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2013/06/15 22:59:58 brad Exp $
d4 1
@


1.60
log
@Update to Bochs 2.6.2.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/04/26 17:32:26 brad Exp $
d5 1
a5 1
DISTNAME=	bochs-2.6.2
@


1.59
log
@Update to Bochs 2.6.1.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/03/21 08:45:17 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	bochs-2.6.1
@


1.58
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/03/11 11:06:03 espie Exp $
d5 1
a5 1
DISTNAME=	bochs-2.6
d14 1
a14 1
WANTLIB=	c m stdc++ termlib
a22 1
		--enable-pci \
d50 1
a50 2
WANTLIB+=	SDL X11 Xext Xpm Xrandr Xrender pthread sndio usbhid \
		xcb
@


1.57
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2012/09/25 23:21:47 brad Exp $
a15 1
USE_LIBTOOL=	Yes
@


1.56
log
@Update to Bochs 2.6.

LIB_DEPENDS placement correction and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2012/01/12 17:01:47 giovanni Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d56 1
a56 1
NO_REGRESS=	Yes
@


1.55
log
@
Update to 2.5.1
from Brad (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/12/13 08:46:51 giovanni Exp $
d5 1
a5 1
DISTNAME=	bochs-2.5.1
d11 1
a11 1
# LGPLv2.1+
d23 2
d28 1
d30 1
d51 6
a56 2
CONFIGURE_ARGS+=--with-x11
WANTLIB+=	ICE SM X11 Xext Xpm Xrandr Xrender xcb
@


1.54
log
@
Better fix for a bus DMA bug
From Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2011/12/05 14:56:27 giovanni Exp $
d5 1
a5 2
DISTNAME=	bochs-2.5
REVISION=	2
@


1.53
log
@
Add a fix for a bus DMA bug
From Brad, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2011/12/02 14:36:14 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.52
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2011/11/29 17:22:01 giovanni Exp $
d6 1
@


1.51
log
@
Update to 2.5
from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/03/23 11:27:39 giovanni Exp $
d36 1
a36 1
.if ${FLAVOR:L:Mdebug}
d44 1
a44 1
.if ${FLAVOR:L:Mno_x11}
@


1.50
log
@
Update to 2.4.6 from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/10/24 21:17:48 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	bochs-2.4.6
d16 1
d21 11
a31 10
CONFIGURE_ARGS+= --enable-acpi \
		 --enable-all-optimizations \
		 --enable-fpu \
		 --enable-ne2000 \
		 --enable-pci \
		 --enable-smp \
		 --enable-x86-64 \
		 --enable-usb \
		 --enable-usb-ohci \
		 --with-term
d37 4
a40 4
CONFIGURE_ARGS+= --disable-debugger-gui \
		 --enable-debugger \
		 --enable-x86-debugger \
		 --enable-readline
d45 1
a45 1
CONFIGURE_ARGS+= --with-nogui
d47 2
a48 3
CONFIGURE_ARGS+= --with-x11
WANTLIB+=	ICE SM X11 Xau Xdmcp Xext Xpm Xrandr Xrender \
		pthread-stubs xcb
@


1.49
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/10/18 18:00:16 espie Exp $
d5 1
a5 1
DISTNAME=	bochs-2.4.5
a18 1
USE_GROFF =	Yes
d46 2
a47 1
WANTLIB+=	ICE SM X11 Xau Xdmcp pthread-stubs xcb
@


1.48
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/07/08 15:40:11 giovanni Exp $
a45 1
USE_X11=	Yes
@


1.47
log
@
Update to 2.4.5
from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/03/29 07:37:12 giovanni Exp $
d19 1
@


1.46
log
@
Update Bochs to 2.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/08/10 06:31:09 kili Exp $
d5 1
a5 1
DISTNAME=	bochs-2.4.2
@


1.45
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/06/23 16:03:58 pirofti Exp $
d5 1
a5 2
DISTNAME=	bochs-2.4.1
PKGNAME=	${DISTNAME}p0
@


1.44
log
@Update bochs to 2.4.1. From brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2008/07/16 20:31:33 brad Exp $
d6 1
d48 1
a48 1
WANTLIB+=	ICE SM X11 Xau Xdmcp
@


1.43
log
@Upgrade to Bochs 2.3.7.

ok okan@@
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.42 2008/04/10 03:39:54 fgsch Exp $
# $NetBSD: Makefile,v 1.2 1998/09/22 06:11:36 garbled Exp $
d5 1
a5 1
DISTNAME=	bochs-2.3.7
a6 1

a15 1

d27 2
d35 2
a36 2
CONFIGURE_ARGS+= --enable-debugger \
		 --enable-disasm \
a37 1
		 --enable-port-e9-hack \
d52 1
a52 14
BIOS += BIOS-bochs-latest
BIOS += VGABIOS-elpin-2.40 VGABIOS-elpin-LICENSE
BIOS += VGABIOS-lgpl-latest VGABIOS-lgpl-README
BIOS += VGABIOS-lgpl-latest-cirrus VGABIOS-lgpl-latest-cirrus-debug

BINS+= bochs bxcommit bximage

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/bochs
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bochs
	cd ${WRKBUILD}; ${INSTALL_PROGRAM} ${BINS} ${PREFIX}/bin
	cd ${WRKSRC}/bios; ${INSTALL_DATA} ${BIOS} ${PREFIX}/share/bochs
	${INSTALL_MAN} ${WRKSRC}/doc/man/*.1 ${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKSRC}/doc/man/*.5 ${PREFIX}/man/man5
d54 2
a55 1
	${INSTALL_DATA} ${WRKSRC}/.bochsrc ${PREFIX}/share/bochs/bochsrc
@


1.42
log
@upgrade to bochs 2.3.6. remove maintainer. from brad.
tested and agreed between brad, okan and myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/11/13 14:54:30 steven Exp $
d6 1
a6 1
DISTNAME=	bochs-2.3.6
d13 1
a13 1
# LGPL
a41 1
CFLAGS+=	-DMAGIC_BREAKPOINT
@


1.41
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/09/16 00:45:13 merdely Exp $
d6 1
a6 2
DISTNAME=	bochs-2.1.1
PKGNAME=	${DISTNAME}p1
d13 1
a13 3
MAINTAINER=	Todd T. Fries <todd@@openbsd.org>

# GPL
d19 1
a19 1
WANTLIB=	ICE SM X11 Xau Xdmcp Xpm c m stdc++ termlib z
d23 8
a30 6
CONFIGURE_ARGS=	--enable-cdrom \
		--enable-fpu \
		--enable-ne2000 \
		--with-nogui \
		--with-term \
		--enable-all-optimizations
d32 1
a32 2
FLAVORS=	debug i386 i486 i686 x86_64 smp smp_4 smp_8 \
		no_x11 no_mmx no_comp no_pci
d36 7
a42 3
CONFIGURE_ARGS+= --enable-debugger --enable-disasm --enable-x86-debugger
CONFIGURE_ARGS+= --enable-readline
WANTLIB+=		curses readline
d45 3
a47 1
.if !${FLAVOR:L:Mno_x11}
d50 1
a52 66
.if ${FLAVOR:L:Mi386}
CONFIGURE_ARGS+= --enable-cpu-level="3" --disable-mmx
. if ${FLAVOR:L:Mi486} || ${FLAVOR:L:Mi686} || ${FLAVOR:L:Mx86_64}
ERRORS +=	"Fatal: cannot use i486, i686, or x86_64 flavors with i386"
. endif
.endif

.if ${FLAVOR:L:Mi486}
CONFIGURE_ARGS+= --enable-cpu-level="4" --disable-mmx
. if ${FLAVOR:L:Mi386} ||  ${FLAVOR:L:Mi686} || ${FLAVOR:L:Mx86_64}
ERRORS +=	"Fatal: cannot use i386, i686, or x86_64 flavors with i486"
. endif
.endif

.if ! ${FLAVOR:L:Mi386} && ! ${FLAVOR:L:Mi486} && ! ${FLAVOR:L:Mi686}
CONFIGURE_ARGS+= --enable-cpu-level="5"
.endif

.if ${FLAVOR:L:Mi686}
CONFIGURE_ARGS+= --enable-cpu-level="6"
. if ${FLAVOR:L:Mi386} ||  ${FLAVOR:L:Mi486}
ERRORS +=	"Fatal: cannot use i386 or i486 flavors with i686"
. endif
.endif

.if ${FLAVOR:L:Mx86_64}
CONFIGURE_ARGS+= --enable-x86-64 --enable-cpu-level="6"
.else
CONFIGURE_ARGS+= --disable-x86-64
.endif

.if !${FLAVOR:L:Mno_pci}
CONFIGURE_ARGS+= --enable-pci
.endif

.if ${FLAVOR:L:Msmp} || ${FLAVOR:L:Msmp_4} || ${FLAVOR:L:Msmp_8}
. if ! ${FLAVOR:L:Mi686}
ERRORS += "Fatal: i686 flavor required for smp"
. endif
. if ${FLAVOR:L:Msmp_8}
CONFIGURE_ARGS+= --enable-processors=8
. elif ${FLAVOR:L:Msmp_4}
CONFIGURE_ARGS+= --enable-processors=4
. else
CONFIGURE_ARGS+= --enable-processors=2
. endif
CONFIGURE_ARGS+= --enable-apic
.else
CONFIGURE_ARGS+= --disable-apic
.endif

.if !${FLAVOR:L:Mno_mmx}
CONFIGURE_ARGS+= --enable-mmx
. if ${FLAVOR:L:Mi386} || ${FLAVOR:L:Mi486}
ERRORS +=	"Fatal: cannot use i386 or i486 with mmx"
. endif
.endif

.if !${FLAVOR:L:Mno_comp}
CONFIGURE_ARGS+= --enable-compressed-hd
.endif

pre-build:
	@@sed -e 's@@!!PREFIX!!@@${PREFIX}@@' \
		< ${WRKSRC}/.bochsrc > ${WRKSRC}/bochsrc

a54 3
.for _ncpu in 2 4 8
BIOS  += BIOS-bochs-${_ncpu}-processors
.endfor
d58 3
d63 1
a63 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/bochs/bios
d65 2
a66 2
	cd ${WRKBUILD}; ${INSTALL_PROGRAM} bochs bximage ${PREFIX}/bin
	cd ${WRKSRC}/bios; ${INSTALL_DATA} ${BIOS} ${PREFIX}/share/bochs/bios
d70 1
a70 1
	${INSTALL_DATA} ${WRKSRC}/bochsrc ${PREFIX}/share/bochs
@


1.40
log
@Removed surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/03/31 12:58:13 steven Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d21 2
a22 1
WANTLIB=		ICE SM X11 c m stdc++ termlib z
@


1.39
log
@USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2004/11/27 10:39:13 espie Exp $
d4 1
a4 1
COMMENT=	"x86 machine simulator"
@


1.38
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2004/08/11 04:46:49 brad Exp $
d7 1
d23 1
@


1.37
log
@somehow the patch to have a decent sample bochsrc installed was removed
some time ago.

issue noticed by deraadt@@

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2004/05/12 22:40:11 pedro Exp $
d20 1
d37 1
@


1.36
log
@update to bochs 2.1.1
ok todd@@, the maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2004/01/22 14:55:15 todd Exp $
d105 1
a105 1
post-configure:
@


1.35
log
@while here, flip 'pci' flavor knob to 'no_pci' flavor knob to
enable pci by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2004/01/22 14:43:01 todd Exp $
d6 1
a6 1
DISTNAME=	bochs-2.1
@


1.34
log
@update to 2.1; with input from brad, grange, and Oliver Cherrier

new flavors:
	no_mmx  - do not build with mmx support
	no_comp - do not build with compressed hard drive support

Also new in this version is the vga font is compiled into the binary, no
more 'xset fp+ ..' or editing XF86Config to run bochs!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2004/01/12 12:32:29 grange Exp $
d29 2
a30 2
FLAVORS=	debug i386 i486 i686 x86_64 pci smp smp_4 smp_8 \
		no_x11 no_mmx no_comp
d74 1
a74 1
.if ${FLAVOR:L:Mpci}
@


1.33
log
@For some reason bochs compiled with the x86_64 flavor generates
cpu exception on every x86-64 specific instruction. Adding
--enable-all-optimizations to the configure flags fairy fixes it.

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/01/09 16:15:04 fgsch Exp $
d6 1
a6 1
DISTNAME=	bochs-2.0.2
d26 2
a27 1
		--with-term
d29 2
a30 1
FLAVORS=	debug i386 i486 i686 x86_64 pci smp smp_4 smp_8 no_x11
d69 1
a69 4
CONFIGURE_ARGS+= --enable-x86-64 --enable-all-optimizations
. if ! ${FLAVOR:L:Mi686}
ERRORS +=	"Fatal: x86_64 emulation requires i686 flavor"
. endif
d94 11
a125 1
	${INSTALL_DATA} ${WRKSRC}/docs-html/*.gif ${PREFIX}/share/doc/bochs
a126 7
.if !${FLAVOR:L:Mno_x11}
	${INSTALL_DATA_DIR} ${PREFIX}/share/bochs/fonts
	${INSTALL_DATA} ${WRKSRC}/font/hercules.bdf ${PREFIX}/share/bochs/fonts
	${INSTALL_DATA} ${WRKSRC}/font/vga.bdf ${PREFIX}/share/bochs/fonts
	${INSTALL_DATA} ${WRKSRC}/font/vga.pcf ${PREFIX}/share/bochs/fonts
	${X11BASE}/bin/mkfontdir ${PREFIX}/share/bochs/fonts
.endif
@


1.32
log
@- add USE_X11 if X support is requested (default).
- always build term and nogui support.
- if no_x11 is used, don't use mkfontdir nor X11 fonts.
- install bochsrc(5)

maintainer ok (todd@@).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2003/05/30 19:59:52 todd Exp $
d67 1
a67 1
CONFIGURE_ARGS+= --enable-x86-64
@


1.31
log
@rework abit; ERROR out if invalid combinations of flavors are attempted
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2003/04/25 21:15:43 todd Exp $
d25 2
a26 1
		--enable-vga
d28 1
a28 1
FLAVORS=	debug i386 i486 i686 x86_64 pci smp smp_4 smp_8 no_x11 term
d36 2
a37 6
.if ${FLAVOR:L:Mno_x11}
CONFIGURE_ARGS+= --with-nogui
. if ${FLAVOR:L:Mterm}
ERRORS +=	"Fatal: term and no_x11 are mutually exclusive"
. endif
.else
a40 7
.if ${FLAVOR:L:Mterm}
CONFIGURE_ARGS+= --with-term
. if ${FLAVOR:L:Mno_x11}
ERRORS +=	"Fatal: term and no_x11 are mutually exclusive"
. endif
.endif

a109 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/bochs/fonts
d114 1
d117 3
a122 1
	${INSTALL_DATA} ${WRKSRC}/bochsrc ${PREFIX}/share/bochs
d124 1
@


1.30
log
@straightforward version bump from 2.0.1 to 2.0.2

Changes in 2.0.2 (January 21, 2003):

- fix possible segfault in wxWindows (Volker Ruppert)
- fix instrumentation (Stanislav Shwartsman)
- fix cdrom read_toc() function for *BSD (Keith Matthew Jones)
- fix NetBSD boot from cdrom (Christophe Bothamy)
- fix cmos checksum (Volker)
- fix "refresh bit" behaviour in pit (Volker)
- fix .bochsrc parsing (Volker)
- fix vga resize/redraw problems (Volker)
- fix compilation issues on Irix and Tru64 (Christophe)
- fix MMX/SSE bugs (Stanislav, Peter Tattam)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/03/12 12:56:22 todd Exp $
d37 3
a39 2
.elif ${FLAVOR:L:Mterm}
CONFIGURE_ARGS+= --with-term
d44 7
d53 6
a58 1
.elif ${FLAVOR:L:Mi486}
d60 10
a69 1
.elif ${FLAVOR:L:Mi686}
d71 6
a76 1
.elif ${FLAVOR:L:Mx86_64}
d78 3
a81 4
CONFIGURE_ARGS+= --enable-cpu-level="5"
.endif

.if !${FLAVOR:L:Mx86_64}
d90 2
a91 2
. if ! ( ${FLAVOR:L:Mi686} || ${FLAVOR:L:Mx86_64} )
BROKEN= "must use i686 or x86_64 flavor for smp"
@


1.29
log
@fix a typo in a flavor not built by default
caught by tdeval@@
ok pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2003/01/13 14:55:46 brad Exp $
d6 1
a6 1
DISTNAME=	bochs-2.0.1
@


1.28
log
@upgrade to bochs 2.0.1
--
MAINTAINER ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2003/01/03 18:44:33 todd Exp $
d48 1
a48 1
CONFIGURE_ARGS+= --enable-cpu-leve="6"
@


1.27
log
@'improvements' for bochs from brad@@; thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/12/28 06:20:19 todd Exp $
d6 1
a6 1
DISTNAME=	bochs-2.0
@


1.26
log
@update to bochs 2.0:

Changes in 2.0 (December 21, 2002):

Since the change log is hundreds of lines long, here is a very brief summary.
- 2x emulation speedup!!!
- added plugin devices and guis. Now you can compile with many more
  options, and choose between them at runtime.
- added emulation of AMD x86-64, MMX, SSE, SSE2 instructions
- add wxWindows port (a graphical configuration interface and display lib)
  and SVGAlib port (full screen display for Linux without X11)
- improvements in many I/O devices: for example up to 8 hard disks/cdroms,
  TUN/TAP network interface, 360k floppies,
- improved MacOSX/Carbon interface and updated MacOS9 port
- GDB remote stub, allows symbolic debugging with Bochs simulation.
- support for up to 32gig hard disk images
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2002/10/26 12:52:48 naddy Exp $
d15 1
d44 1
a44 1
CONFIGURE_ARGS+= --enable-cpu-level="3" --disable-mmx --disable-x86-64
d46 1
a46 1
CONFIGURE_ARGS+= --enable-cpu-level="4" --disable-mmx --disable-x86-64
d48 1
a48 1
CONFIGURE_ARGS+= --enable-cpu-leve="6" --disable-x86-64
d52 5
a56 1
CONFIGURE_ARGS+= --enable-cpu-level="5" --disable-x86-64
@


1.25
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/06/09 16:24:57 brad Exp $
d6 1
a6 1
DISTNAME=	bochs-1.4
d26 1
a26 1
FLAVORS=	debug i386 i486 i686 pci smp no_x11 term
d43 1
a43 1
CONFIGURE_ARGS+= --enable-cpu-level="3"
d45 1
a45 1
CONFIGURE_ARGS+= --enable-cpu-level="4"
d47 3
a49 1
CONFIGURE_ARGS+= --enable-cpu-leve="6"
d51 1
a51 1
CONFIGURE_ARGS+= --enable-cpu-level="5"
d58 9
a66 1
.if ${FLAVOR:L:Msmp}
d68 4
d80 3
a82 1
BIOS  = BIOS-bochs-4-processors BIOS-bochs-2-processors
d84 2
a85 1
BIOS += VGABIOS-elpin-2.40
@


1.24
log
@upgrade to Bochs 1.4
--
Ok'd by: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/05/08 17:19:36 todd Exp $
d8 1
a8 1
NEED_VERSION=	1.525
d63 2
@


1.23
log
@sync(h)ing my maint addr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/09/19 20:44:53 todd Exp $
d5 2
a6 1
DISTNAME=	bochs-1.2.1
d8 2
a9 2
NEED_VERSION=	1.413
MASTER_SITES=	http://prdownloads.sourceforge.net/bochs/
d20 5
a24 3
CONFIGURE_STYLE= autoconf
CONFIGURE_ARGS=	--enable-vga \
		--enable-fpu --enable-cdrom
d26 1
a26 1
FLAVORS=	debug i386 i486 i686 pci smp net no_x11 term
a59 7
.if ${FLAVOR:L:Mnet}
CONFIGURE_ARGS+= --enable-ne2000
.endif

post-extract:
	@@rm -f ${WRKSRC}/debug/lexer.c

d72 1
a72 1
	${INSTALL_PROGRAM} ${WRKBUILD}/bochs ${PREFIX}/bin
d74 1
@


1.22
log
@use autoconf to generate configure to use -lreadline -lcurses for debug
flavor.
Problem found by yanick@@qmkos.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/06/13 16:12:49 todd Exp $
d12 1
a12 1
MAINTAINER=	Todd T. Fries <todd@@OpenBSD.org>
@


1.21
log
@Update to bochs 1.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/05/26 05:52:55 todd Exp $
d19 1
a19 1
CONFIGURE_STYLE= gnu
d28 1
@


1.20
log
@after much stagnation, bochs is back.  Thanks to angelos@@ who got the
networking working, I'm committing this from inside bochs!

There are too many changes to mention, not the least of which is
two hard drive support, smp (up to 16 cpus), networking, and much,
much more ..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/03/26 15:58:18 todd Exp $
d5 1
a5 1
DISTNAME=	bochs-1.2.pre1
d7 1
a7 1
NEED_VERSION=	1.364
d68 1
a68 1
BIOS += BIOS-bochs-2001_0524 BIOS-bochs-2001_0517
d83 1
a83 1
	mkfontdir ${PREFIX}/share/bochs/fonts
@


1.19
log
@move COMMENTS to Makefile's
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/03/02 14:51:35 todd Exp $
d4 2
a5 2
COMMENT=	"x86 CPU emulator"
DISTNAME=	bochs-2000_0325a
d8 1
a8 1
MASTER_SITES=	ftp://ftp.bochs.com/bochs/
d10 1
a10 1
HOMEPAGE=	http://www.bochs.com/
d23 1
a23 1
FLAVORS=	debug i386 i486 pci smp net no_x11 term
d42 2
d53 1
a53 1
CONFIGURE_ARGS+= --enable-num-sim=2
d67 4
d76 1
a76 2
	${INSTALL_DATA} ${WRKSRC}/bios/BIOS-bochs-990925a ${PREFIX}/share/bochs/bios
	${INSTALL_DATA} ${WRKSRC}/bios/VGABIOS-elpin-2.20 ${PREFIX}/share/bochs/bios
d83 1
@


1.18
log
@cleanup from conversion to i586 default cpu; thanks brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/03/01 22:43:49 todd Exp $
d4 1
d7 1
a7 1
NEED_VERSION=	1.310
@


1.17
log
@make the default flavor i586 (i486 doesn't boot alot correctly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/02/02 16:59:06 todd Exp $
d22 2
a23 2
FLAVORS=	debug i386 i486 i586 pci smp net no_x11 term
FLAVOR?=	i586
d31 1
a31 2
.else
.if ${FLAVOR:L:Mterm}
a35 1
.endif
d39 2
a41 3
. if ${FLAVOR:L:Mi486}
CONFIGURE_ARGS+= --enable-cpu-level="4"
. else
a42 1
. endif
@


1.16
log
@o take over maintainership
o too many changes to mention specifically, but amongst them:
	- better error reporting
	- openbsd boots, freebsd boots
	- new 'term' flavor, I added a textmode interface, the only drawback
	  is that control-c is intercepted, and you must kill -9 it from
	  another tty if it doesn't exit normally
	- new flavors:
		- debugger -> debug (for shortness)
		- i386
		- pci
		- smp
		- net (compiles, does not yet provide networking, if anyone
			wants to help, I'd be ELATED to have this fixed!)
		- no_x11 (made it actually work)
		- term (make sure to use 'log: /dev/null' or something else
		  on the cmdline, otherwise, debugging and the screen will
		  start getting quite confusing!)
	- better error reporting (and no error reporting where it is not
	  necessary; a typicall boot of cdrom28.fs is a screenful of output now)
	- in general, if the hardware reaches an unknown state, fail
	  gracefully instead of calling exit(1) .. are we trying to work or
	  are we trying to .. fail?  I like working myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/07/18 05:16:58 brad Exp $
d22 2
a23 2
FLAVORS=	debug i386 i586 pci smp net no_x11 term
FLAVOR?=
d42 3
a44 1
. if ${FLAVOR:L:Mi586}
a45 2
. else
CONFIGURE_ARGS+= --enable-cpu-level="4"
@


1.15
log
@upgrade to Bochs 2000_0325a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/05/31 15:15:44 espie Exp $
d7 1
a7 1
MASTER_SITES=	ftp://ftp.bochs.com/pub/
d11 1
a11 1
MAINTAINER=	ports@@openbsd.org
d19 1
a19 1
CONFIGURE_ARGS=	--with-x11 --enable-vga --enable-cpu-level="4" \
d22 1
a22 1
FLAVORS=	debugger
d25 34
a58 2
.if ${FLAVOR:L} == "debugger"
CONFIGURE_ARGS+= --enable-debugger --enable-disasm
@


1.14
log
@trivial fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/04/09 17:36:25 espie Exp $
d4 1
a4 1
DISTNAME=	bochs-991023a
d6 1
a6 2
NEED_VERSION=	1.191
FAKE=		Yes
d13 3
a15 3
PERMIT_PACKAGE_CDROM=	"trial period only"
PERMIT_PACKAGE_FTP=	"trial period only"
PERMIT_DISTFILES_CDROM=	"trial period only"
d18 10
a27 4
USE_GMAKE=	yes
USE_X11=	yes
GNU_CONFIGURE=	yes
CONFIGURE_ARGS=	--with-x11 --enable-vga
d29 2
a30 1
WRKDIST=	${WRKDIR}/bochs-991023a
d33 1
a33 1
	@@sed -e 's@@XXXPREFIXXXX@@${PREFIX}@@' \
d37 4
a40 4
	@@mkdir -p ${PREFIX}/share/bochs/bios
	@@mkdir -p ${PREFIX}/share/bochs/fonts
	@@mkdir -p ${PREFIX}/share/doc/bochs
	${INSTALL_PROGRAM} ${WRKSRC}/bochs ${PREFIX}/bin
a42 1
	${INSTALL_DATA} ${WRKSRC}/docs-html/LICENSE ${PREFIX}/share/doc/bochs
a48 5
	@@${X11BASE}/bin/mkfontdir ${PREFIX}/share/bochs/fonts
	@@echo "***"
	@@echo "*** Don't forget to add ${PREFIX}/share/bochs/fonts"
	@@echo "*** to FontPath in /etc/XF86Config."
	@@echo "***"
@


1.13
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/03/24 22:11:41 espie Exp $
d7 1
a7 1
FAKE=No
@


1.13.2.1
log
@bring emulators as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/07/18 05:16:58 brad Exp $
d4 1
a4 1
DISTNAME=	bochs-2000_0325a
d6 2
a7 1
NEED_VERSION=	1.310
d14 3
a16 3
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
d19 4
a22 10
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--with-x11 --enable-vga --enable-cpu-level="4" \
		--enable-fpu --enable-cdrom

FLAVORS=	debugger
FLAVOR?=

.if ${FLAVOR:L} == "debugger"
CONFIGURE_ARGS+= --enable-debugger --enable-disasm
.endif
d24 1
a24 2
post-extract:
	@@rm -f ${WRKSRC}/debug/lexer.c
d27 1
a27 1
	@@sed -e 's@@!!PREFIX!!@@${PREFIX}@@' \
d31 4
a34 4
	${INSTALL_DATA_DIR} ${PREFIX}/share/bochs/bios
	${INSTALL_DATA_DIR} ${PREFIX}/share/bochs/fonts
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bochs
	${INSTALL_PROGRAM} ${WRKBUILD}/bochs ${PREFIX}/bin
d37 1
d44 5
@


1.12
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/03/16 22:26:18 turan Exp $
d7 1
@


1.11
log
@license
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/02/11 00:37:23 espie Exp $
d6 1
a7 1
NEED_VERSION=	1.191
@


1.10
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/10/31 20:22:37 brad Exp $
a8 3
NO_CDROM=	"Commercial software"
RESTRICTED=	"Commercial software"

d12 5
@


1.9
log
@- upgrade to Bochs 991023a
- add misssing NO_CDROM and RESTRICTED tags
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/04/01 06:20:12 brad Exp $
d7 1
d21 1
a21 1
WRKSRC=	${WRKDIR}/bochs-991023a
@


1.8
log
@fix dependency lists, fix email address's and remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/03/10 21:48:24 brad Exp $
d4 17
a20 13
DISTNAME=		bochs-990219a
CATEGORIES=		emulators
MASTER_SITES=		ftp://ftp.bochs.com/pub/

MAINTAINER=		brad@@openbsd.org
HOMEPAGE=		http://www.bochs.com/

LICENSE=		shareware
WRKSRC=			${WRKDIR}/bochs-990219
USE_GMAKE=		yes
CONFIGURE_ARGS+=	--enable-vga #--with-x11
GNU_CONFIGURE=		yes
USE_X11=		yes
d23 2
a24 1
	${SED} -e 's@@XXXPREFIXXXX@@${PREFIX}@@' < ${WRKSRC}/.bochsrc > ${WRKSRC}/bochsrc
d27 5
a31 3
	${MKDIR} ${PREFIX}/share/bochs/bios
	${MKDIR} ${PREFIX}/share/bochs/fonts
	${INSTALL_DATA} ${WRKSRC}/bios/BIOS-bochs-990218a ${PREFIX}/share/bochs/bios
d33 3
a35 2
	${MKDIR} ${PREFIX}/share/doc/bochs
	${INSTALL_DATA} ${WRKSRC}/docs-html/* ${PREFIX}/share/doc/bochs
a38 1
	${INSTALL_PROGRAM} ${WRKSRC}/bochs ${PREFIX}/bin
d40 5
a44 6
	[ -x ${X11BASE}/bin/mkfontdir ] && \
		${X11BASE}/bin/mkfontdir ${PREFIX}/share/bochs/fonts
	@@${ECHO} "***"
	@@${ECHO} "*** Don't forget to add ${PREFIX}/share/bochs/fonts"
	@@${ECHO} "*** to FontPath in /etc/XF86Config."
	@@${ECHO} "***"
@


1.7
log
@fix filenames
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/02/22 04:52:22 brad Exp $
d8 1
a8 1
MAINTAINER=		form@@OpenBSD.ORG
@


1.6
log
@upgrade to bochs-990219a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1998/11/18 11:06:52 form Exp $
d24 1
a24 1
	${INSTALL_DATA} ${WRKSRC}/bios/BIOS-bochs-990219a ${PREFIX}/share/bochs/bios
@


1.5
log
@update to 980707a
@
text
@d1 2
a2 2
# $OpenBSD: Makefile,v 1.4 1998/10/20 08:39:45 form Exp $
# NetBSD: Makefile,v 1.2 1998/09/22 06:11:36 garbled Exp
d4 1
a4 1
DISTNAME=		bochs-980707a
d6 1
a6 3
MASTER_SITES=		ftp://ftp.std.com/pub/bochs/

#NOT_FOR_ARCHS=		alpha	#runs, SEGV.
d9 1
a9 1
HOMEPAGE=		http://world.std.com/~bochs/
d12 1
a12 1
WRKSRC=			${WRKDIR}/bochs-980707
d24 1
a24 1
	${INSTALL_DATA} ${WRKSRC}/bios/BIOS-bochs-980702a ${PREFIX}/share/bochs/bios
@


1.4
log
@form@@vs.itam.nsc.ru -> form@@openbsd.org
@
text
@d1 2
a2 3
# $OpenBSD: Makefile,v 1.3 1998/10/18 05:02:06 marc Exp $
# FreeBSD: Makefile,v 1.9 1998/05/18 23:49:17 alex Exp
#
d4 15
a18 3
VGABIOS=	VGABIOS-elpin-2.00A
BIOS=		BIOS-bochs-980331a
DATE= 		980513
d20 2
a21 25
DISTNAME=	bochs-${DATE}a
CATEGORIES= 	emulators

ONLY_FOR_ARCHS=	i386
#BROKEN=	"BROKEN: newer version available"
RESTRICTED=	"COMM: Commercial software"
NO_CDROM=	${RESTRICTED}
NO_PACKAGE=	${RESTRICTED}


MAINTAINER=	form@@OpenBSD.ORG

MASTER_SITES= 	ftp://ftp.std.com/pub/bochs/


GNU_CONFIGURE=	YES
CONFIGURE_ARGS=	--enable-80386 --enable-memory=16 \
		--enable-v8086-mode --enable-paging --enable-vga \
		--enable-bochs-bios-hooks --enable-dma-floppy-io \
		--enable-processor-ips=200000

WRKSRC=		${WRKDIR}/bochs-${DATE}

GZIP!=		which gzip
MKFONTDIR!=	which mkfontdir
d24 9
d34 7
a40 16
	-@@${MKDIR} ${PREFIX}/lib/bochs
	${INSTALL_DATA} ${WRKSRC}/.bochsrc ${PREFIX}/lib/bochs/bochsrc.sample
	-@@${MKDIR} ${PREFIX}/lib/bochs/bios
	${INSTALL_DATA} ${WRKSRC}/bios/${VGABIOS} \
		${PREFIX}/lib/bochs/bios
	${INSTALL_DATA} ${WRKSRC}/bios/${BIOS} \
		${PREFIX}/lib/bochs/bios
.if !defined(NOPORTDOCS)
	-@@${MKDIR} ${PREFIX}/share/doc/bochs
	${INSTALL_MAN} ${WRKSRC}/docs-html/LICENSE ${PREFIX}/share/doc/bochs
	${INSTALL_MAN} ${WRKSRC}/docs-html/*.html ${PREFIX}/share/doc/bochs
	${MKDIR} ${PREFIX}/lib/bochs/fonts
	${CP} ${WRKSRC}/font/vga.pcf ${PREFIX}/lib/bochs/fonts
	if [ "${GZIP}" ]; then ${GZIP} ${PREFIX}/lib/bochs/fonts/vga.pcf; fi
	if [ "${MKFONTDIR}" ]; then ${MKFONTDIR} ${PREFIX}/lib/bochs/fonts; fi
.endif
@


1.3
log
@comment out the BROKEN reason for all ports where the reason
was source files out of date and we have a copy of the required
version on ftp.openbsd.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1998/10/15 04:33:25 marc Exp $
d19 1
a19 1
MAINTAINER=	form@@vs.itam.nsc.ru
@


1.2
log
@BROKEN: newer version available
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/05/20 07:11:31 form Exp $
d13 1
a13 1
BROKEN=		"BROKEN: newer version available"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 6
# New ports collection makefile for:   bochs
# Version required:    980513a
# Date created:        20 Apr 1998
# Whom:                form
#
# $OpenBSD: Makefile,v 1.0 1998/05/20 13:14:17 form Exp $
d11 10
a22 1
MAINTAINER=	form@@vs.itam.nsc.ru
d26 3
a28 3
	--enable-v8086-mode --enable-paging --enable-vga \
	--enable-bochs-bios-hooks --enable-dma-floppy-io \
	--enable-processor-ips=200000
a30 6

RESTRICTED=	"Commercial software"
NO_CDROM=	${RESTRICTED}
NO_PACKAGE=	${RESTRICTED}

ONLY_FOR_ARCHS=	i386
@


1.1.1.1
log
@bochs, x86 emulator
@
text
@@
