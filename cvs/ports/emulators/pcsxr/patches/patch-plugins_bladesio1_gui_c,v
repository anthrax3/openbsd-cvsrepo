head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.14
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.12
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.8
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.02.06.03.10.48;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Update to pcsxr 1.9.94.r87113, fixes breakage at runtime on amd64 (and
possibly other arches).

Note that the binary named changed from pcsx to pcsxr.

Feedback from bentley@@, sthen@@, and zhuk@@
OK bentley@@
@
text
@$OpenBSD$
--- plugins/bladesio1/gui.c.orig	Tue Feb  4 19:27:11 2014
+++ plugins/bladesio1/gui.c	Tue Feb  4 19:29:14 2014
@@@@ -26,8 +26,6 @@@@
 #include <gtk/gtk.h>
 
 #include <sys/socket.h>
-#include <sys/ioctl.h>
-#include <linux/if.h>
 #include <netinet/in.h>
 #include <arpa/inet.h>
 #include <netdb.h>
@@@@ -42,6 +40,7 @@@@
 
 #define MAXINTERFACES 16
 
+#if 0
 void sockGetIP(char *IPAddress) {
 	int fd, intrface;
 	struct ifreq buf[MAXINTERFACES];
@@@@ -66,6 +65,22 @@@@ void sockGetIP(char *IPAddress) {
 		close(fd);
 	}
 }
+
+#else
+
+void sockGetIP(char *IPAddress) {
+    struct hostent *host;
+    char str[256];
+
+    gethostname(str, 256);
+    host = gethostbyname(str);
+
+    if (host != NULL)
+        strcpy(IPAddress, inet_ntoa(*((struct in_addr *)host->h_addr_list[0])));
+    else strcpy(IPAddress, "127.0.0.1");
+}
+
+#endif
 
 void cfgSysMessage(const char *fmt, ...) {
 	GtkWidget *MsgDlg;
@
