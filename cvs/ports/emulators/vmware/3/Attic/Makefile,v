head	1.14;
access;
symbols
	OPENBSD_4_4:1.13.0.4
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.2
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.11.0.2
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.5.0.4
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	todd_20041005:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2008.09.30.17.39.24;	author brad;	state dead;
branches;
next	1.13;

1.13
date	2007.09.16.00.45.13;	author merdely;	state Exp;
branches;
next	1.12;

1.12
date	2007.05.31.20.31.36;	author aanriot;	state Exp;
branches;
next	1.11;

1.11
date	2007.02.09.23.15.21;	author ian;	state Exp;
branches;
next	1.10;

1.10
date	2006.10.19.00.15.36;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2006.07.16.15.13.27;	author mcbride;	state Exp;
branches;
next	1.8;

1.8
date	2006.07.14.04.23.03;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2006.04.10.21.33.36;	author todd;	state Exp;
branches;
next	1.6;

1.6
date	2006.01.08.02.20.30;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2005.03.07.18.15.09;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	2005.03.07.17.54.49;	author todd;	state dead;
branches;
next	1.3;

1.3
date	2005.01.07.17.28.20;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.27.10.39.14;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.05.18.32.27;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.05.18.32.27;	author todd;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Remove this ancient VMware 3 port for the kernel LKMs. They have never
really worked very well and with newer kernels they do not work at all.

PR 5893.
@
text
@# $OpenBSD: Makefile,v 1.13 2007/09/16 00:45:13 merdely Exp $

ONLY_FOR_ARCHS= i386

COMMENT=	VMware emulator
DISTNAME=	VMware-workstation-3.2.1-2242
PKGNAME=	vmware-3.2.1_2242p7
CATEGORIES=	emulators
MASTER_SITES=	http://download3.vmware.com/software/wkst/
MASTER_SITES0=	http://monkey.org/~marius/vmware-openbsd/
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} \
		vmware-openbsd-1.3${EXTRACT_SUFX}:0

HOMEPAGE=	http://www.vmware.com/

MAINTAINER=	Todd T. Fries <todd@@openbsd.org>

# Restrictive
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
WANTLIB=		c

#NO_BUILD=	Yes
NO_REGRESS=	Yes
USE_X11=	Yes

RUN_DEPENDS+=	::emulators/fedora/base
BUILD_DEPENDS+=	${RUN_DEPENDS}

WRKDIST=	${WRKDIR}/vmware-openbsd
VMWARE_DISTRIB=	${WRKDIR}/vmware-distrib

LIB_DATA_DIRS=	configurator \
		isoimages \
		messages/chef \
		messages/ja \
		messages/jive \
		smb/codepages \
		help \
		xkeymap

post-patch:
	@@chmod 755 ${VMWARE_DISTRIB}/bin/vmware
	@@if [ x`sysctl -n kern.emul.linux` = x1 ]; then \
		${WRKDIST}/vmware-any-any-update37/update ${VMWARE_DISTRIB}/bin/vmware; \
	else \
		echo "need to set kern.emul.linux=1"; \
		exit 1; \
	fi

do-configure:
	@@perl -pi -e 's|_PREFIX_|${PREFIX}|g' ${WRKSRC}/util/vmware-run.c

pre-install:
	@@sed -e "s|@@PREFIX@@|${TRUEPREFIX}|g" ${FILESDIR}/vmware-modules.sh > \
		${WRKBUILD}/vmware-modules.sh

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/vmware
	${INSTALL_PROGRAM_DIR} ${PREFIX}/lib/vmware/bin
	${INSTALL_SCRIPT} ${VMWARE_DISTRIB}/bin/vmware \
		${PREFIX}/lib/vmware/bin
	${INSTALL_SCRIPT} ${VMWARE_DISTRIB}/bin/vmnet-netifup ${PREFIX}/bin
	${INSTALL_SCRIPT} ${VMWARE_DISTRIB}/lib/bin/* ${PREFIX}/lib/vmware/bin
	@@sed -e "s|@@PREFIX@@|${TRUEPREFIX}|g" ${FILESDIR}/vmware.sh > \
		${PREFIX}/bin/vmware
	@@chown ${BINOWN} ${PREFIX}/bin/vmware
	@@chgrp ${BINGRP} ${PREFIX}/bin/vmware
	@@chmod ${BINMODE} ${PREFIX}/bin/vmware
	${INSTALL_DATA_DIR} ${PREFIX}/lib/vmware/licenses/{site,user}
.for d in ${LIB_DATA_DIRS}
	${INSTALL_DATA_DIR} ${PREFIX}/lib/vmware/${d}
	${INSTALL_DATA} ${VMWARE_DISTRIB}/lib/${d}/* ${PREFIX}/lib/vmware/${d}
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/vmware
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/vmware
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD ${PREFIX}/share/doc/vmware
	@@sed -e "s|@@PREFIX@@|${TRUEPREFIX}|g" ${FILESDIR}/config > \
		${PREFIX}/share/examples/vmware/config

	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/vmware
	${INSTALL_DATA_DIR} ${PREFIX}/lib/vmware/modules
	${INSTALL_DATA_DIR} ${PREFIX}/lib/vmware/bin
	${INSTALL_DATA_DIR} ${PREFIX}/libexec
	${INSTALL_DATA} ${WRKBUILD}/README \
		${PREFIX}/share/doc/vmware/README.NetBSD
	${INSTALL_DATA} ${WRKBUILD}/README.OpenBSD \
		${PREFIX}/share/doc/vmware/README.OpenBSD.Modules
	${INSTALL_DATA} ${WRKBUILD}/source/linuxrtc/linuxrtc.o \
		${WRKBUILD}/source/vmmon/vmmon.o \
		${WRKBUILD}/source/vmnet/if_hub.o \
		${PREFIX}/lib/vmware/modules
	${INSTALL_PROGRAM} ${WRKBUILD}/vmware-any-any-update37/update \
		${PREFIX}/lib/vmware/bin
	${INSTALL_PROGRAM} ${WRKBUILD}/util/vmware-run ${PREFIX}/lib/vmware/bin
	${INSTALL_SCRIPT} ${WRKBUILD}/source/linuxrtc/linuxrtc_post.sh \
		${PREFIX}/libexec/vmware-linuxrtc_load.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/source/vmmon/vmmon_post.sh \
		${PREFIX}/libexec/vmware-vmmon_load.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/source/vmnet/if_hub_post.sh \
		${PREFIX}/libexec/vmware-vmnet_load.sh
.for S in linuxrtc vmmon vmnet
	${INSTALL_SCRIPT} ${FILESDIR}/vmware-${S}_unload.sh \
		${PREFIX}/libexec
.endfor
	${INSTALL_SCRIPT} ${WRKBUILD}/vmware-modules.sh \
		${PREFIX}/bin/vmware-modules
		
.include <bsd.port.mk>
@


1.13
log
@Removed surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/05/31 20:31:36 aanriot Exp $
@


1.12
log
@- unbreak vmmon/vmnet removing the PHOLD/PRELE calls that are not
present anymore.
- while there, regen patches.

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/02/09 23:15:21 ian Exp $
d5 1
a5 1
COMMENT=	"VMware emulator"
@


1.11
log
@Bump pkg after DESCR, reminded by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/10/19 00:15:36 sturm Exp $
d7 1
a7 1
PKGNAME=	vmware-3.2.1_2242p6
@


1.10
log
@switch to fedora_base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/07/16 15:13:27 mcbride Exp $
d7 1
a7 1
PKGNAME=	vmware-3.2.1_2242p5
@


1.9
log
@Make vmware work with pae. Most of the fixups from drahn@@

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/07/14 04:23:03 pvalchev Exp $
d7 1
a7 1
PKGNAME=	vmware-3.2.1_2242p4
d29 2
a30 2
BUILD_DEPENDS+=	::emulators/redhat/base
RUN_DEPENDS+=	${BUILD_DEPENDS}
@


1.8
log
@mark as broken (PAE changes)
someone should really fix this!
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.7 2006/04/10 21:33:36 todd Exp $

BROKEN=		"PAE broke this, fix needed"
d7 1
a7 1
PKGNAME=	vmware-3.2.1_2242p3
@


1.7
log
@permit vmware to compile since bpf changes
from Frank Dennis
bump pkgname
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.6 2006/01/08 02:20:30 brad Exp $
@


1.6
log
@bump the PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/03/07 18:15:09 todd Exp $
d7 1
a7 1
PKGNAME=	vmware-3.2.1_2242p2
@


1.5
log
@I screwed up.  This was not ok to remove, perhaps another time, but not now,
and not without ok's and the proper process.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/01/07 17:28:20 todd Exp $
d7 1
a7 1
PKGNAME=	vmware-3.2.1_2242p1
@


1.4
log
@Now that qemu is in, and is comparable to vmware, good bye vmware.
A free license is preferred to a non-native no-source-available binary
requiring license keys, kernel lkm's, and root.
@
text
@@


1.3
log
@Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/11/27 10:39:14 espie Exp $
@


1.2
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/10/05 18:32:27 todd Exp $
d9 1
a9 3
MASTER_SITES=	http://vmware-chil.www.conxion.com/software/ \
		http://vmware-svca.www.conxion.com/software/ \
		http://vmware-heva.www.conxion.com/software/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
@


1.1.1.1
log
@Proprietary/commercial x86 machine emulator for x86.
based on work from others.
@
text
@@
