head	1.163;
access;
symbols
	OPENBSD_6_1:1.158.0.2
	OPENBSD_6_1_BASE:1.158
	OPENBSD_6_0:1.148.0.2
	OPENBSD_6_0_BASE:1.148
	OPENBSD_5_9:1.143.0.2
	OPENBSD_5_9_BASE:1.143
	OPENBSD_5_8:1.126.0.4
	OPENBSD_5_8_BASE:1.126
	OPENBSD_5_7:1.121.0.2
	OPENBSD_5_7_BASE:1.121
	OPENBSD_5_6:1.116.0.2
	OPENBSD_5_6_BASE:1.116
	OPENBSD_5_5:1.113.0.2
	OPENBSD_5_5_BASE:1.113
	OPENBSD_5_4:1.108.0.2
	OPENBSD_5_4_BASE:1.108
	OPENBSD_5_3:1.99.0.2
	OPENBSD_5_3_BASE:1.99
	OPENBSD_5_2:1.87.0.2
	OPENBSD_5_2_BASE:1.87
	OPENBSD_5_1_BASE:1.84
	OPENBSD_5_1:1.84.0.2
	OPENBSD_5_0:1.72.0.2
	OPENBSD_5_0_BASE:1.72
	OPENBSD_4_9:1.61.0.2
	OPENBSD_4_9_BASE:1.61
	OPENBSD_4_8:1.52.0.2
	OPENBSD_4_8_BASE:1.52
	OPENBSD_4_7:1.45.0.2
	OPENBSD_4_7_BASE:1.45
	OPENBSD_4_6:1.43.0.2
	OPENBSD_4_6_BASE:1.43
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.36.0.2
	OPENBSD_4_4_BASE:1.36
	OPENBSD_4_3:1.25.0.2
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.21.0.2
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.20.0.2
	OPENBSD_4_1_BASE:1.20
	OPENBSD_4_0:1.15.0.2
	OPENBSD_4_0_BASE:1.15
	OPENBSD_3_9:1.13.0.2
	OPENBSD_3_9_BASE:1.13
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	todd_20050307:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.163
date	2017.05.07.20.33.42;	author sthen;	state Exp;
branches;
next	1.162;
commitid	5nKluC2YOs8UgG6k;

1.162
date	2017.05.07.08.43.28;	author ajacoutot;	state Exp;
branches;
next	1.161;
commitid	sgdHPmewjFHNfELb;

1.161
date	2017.05.06.19.25.18;	author uaa;	state Exp;
branches;
next	1.160;
commitid	1nlBjFqFBhjzgbiq;

1.160
date	2017.04.23.13.24.17;	author ajacoutot;	state Exp;
branches;
next	1.159;
commitid	gPX2SDVWfkzQZiy5;

1.159
date	2017.04.10.13.13.02;	author ajacoutot;	state Exp;
branches;
next	1.158;
commitid	A38fnr4bpnrATLak;

1.158
date	2017.02.26.13.31.57;	author ajacoutot;	state Exp;
branches;
next	1.157;
commitid	8OoM6xLWCdtCtgBU;

1.157
date	2017.02.25.11.16.25;	author ajacoutot;	state Exp;
branches;
next	1.156;
commitid	9G2ThejRafmEuL9S;

1.156
date	2017.01.01.10.50.55;	author ajacoutot;	state Exp;
branches;
next	1.155;
commitid	RCnl5XqUNUqVZ0sj;

1.155
date	2016.12.22.09.05.06;	author ajacoutot;	state Exp;
branches;
next	1.154;
commitid	sJbSyhFGZ1IRixbo;

1.154
date	2016.10.07.08.51.05;	author ajacoutot;	state Exp;
branches;
next	1.153;
commitid	PVKTu3sMLdNfHJky;

1.153
date	2016.09.03.15.31.07;	author ajacoutot;	state Exp;
branches;
next	1.152;
commitid	NWgBn03iuey8agUy;

1.152
date	2016.08.25.15.59.58;	author jasper;	state Exp;
branches;
next	1.151;
commitid	MV0PXv5dIk0GVzmC;

1.151
date	2016.08.25.08.56.12;	author jasper;	state Exp;
branches;
next	1.150;
commitid	FeJ0E0KIN9Bzi3Kh;

1.150
date	2016.08.21.12.04.23;	author ajacoutot;	state Exp;
branches;
next	1.149;
commitid	9Tf4JPbtR4q0Gi0t;

1.149
date	2016.08.16.10.59.47;	author bluhm;	state Exp;
branches;
next	1.148;
commitid	ubRbL0vnPiTHOZlk;

1.148
date	2016.05.13.07.20.46;	author ajacoutot;	state Exp;
branches;
next	1.147;
commitid	dF53LaUBYmEM2Sg2;

1.147
date	2016.05.10.16.08.13;	author ajacoutot;	state Exp;
branches;
next	1.146;
commitid	gIOaASEPCdNLMZoB;

1.146
date	2016.04.11.05.56.45;	author ajacoutot;	state Exp;
branches;
next	1.145;
commitid	Hmp7osnSUjdtZKjS;

1.145
date	2016.03.14.19.46.12;	author ajacoutot;	state Exp;
branches;
next	1.144;
commitid	ZypCecrzOxeE8g1E;

1.144
date	2016.03.01.10.18.25;	author ajacoutot;	state Exp;
branches;
next	1.143;
commitid	D5jqwTdSa5ppzwr8;

1.143
date	2016.02.20.22.46.46;	author ajacoutot;	state Exp;
branches;
next	1.142;
commitid	qHYC60n3VEZAJH5H;

1.142
date	2016.02.14.11.27.32;	author sthen;	state Exp;
branches;
next	1.141;
commitid	nAjcpd4pmbLbcSLM;

1.141
date	2016.01.22.07.00.15;	author ajacoutot;	state Exp;
branches;
next	1.140;
commitid	N9MQkE5ZHFln07qI;

1.140
date	2016.01.14.06.12.10;	author ajacoutot;	state Exp;
branches;
next	1.139;
commitid	Al0gdBpCDreQ5CKi;

1.139
date	2016.01.05.06.56.12;	author ajacoutot;	state Exp;
branches;
next	1.138;
commitid	z2cMvU8TlZZSH8m0;

1.138
date	2015.12.22.06.43.05;	author ajacoutot;	state Exp;
branches;
next	1.137;
commitid	JiptCpdEMaCRSsRY;

1.137
date	2015.12.16.06.41.06;	author ajacoutot;	state Exp;
branches;
next	1.136;
commitid	Mr3TINbPs4mSz43P;

1.136
date	2015.12.08.06.55.13;	author ajacoutot;	state Exp;
branches;
next	1.135;
commitid	9Su6avHi3SEMpjSH;

1.135
date	2015.11.03.16.25.24;	author sthen;	state Exp;
branches;
next	1.134;
commitid	XsrNATn66OYkkEpO;

1.134
date	2015.10.28.09.17.31;	author sthen;	state Exp;
branches;
next	1.133;
commitid	btLpwcAQY0PdZrMt;

1.133
date	2015.10.23.15.15.28;	author sthen;	state Exp;
branches;
next	1.132;
commitid	tqv6R9BHJVZOm1zO;

1.132
date	2015.09.16.09.18.13;	author ajacoutot;	state Exp;
branches;
next	1.131;
commitid	PEOP5ubHLhtcX6y5;

1.131
date	2015.09.16.07.08.41;	author ajacoutot;	state Exp;
branches;
next	1.130;
commitid	HnAiLDQKaBryPwya;

1.130
date	2015.09.15.12.48.39;	author ajacoutot;	state Exp;
branches;
next	1.129;
commitid	teqpSHjLxYco3kIq;

1.129
date	2015.09.04.14.20.29;	author ajacoutot;	state Exp;
branches;
next	1.128;
commitid	d3DaxWu8vJYmW4l6;

1.128
date	2015.08.25.06.43.35;	author ajacoutot;	state Exp;
branches;
next	1.127;
commitid	teZPzfk11SBrfDjn;

1.127
date	2015.08.11.21.28.53;	author sthen;	state Exp;
branches;
next	1.126;
commitid	bEQ3qdmOkJ4uPZfR;

1.126
date	2015.08.03.19.14.56;	author jung;	state Exp;
branches
	1.126.4.1;
next	1.125;
commitid	TJf6NtYRtAfiUzo3;

1.125
date	2015.07.28.09.51.20;	author sthen;	state Exp;
branches;
next	1.124;
commitid	2NPee2gDjXx8hV56;

1.124
date	2015.07.18.20.36.56;	author sthen;	state Exp;
branches;
next	1.123;
commitid	fLpBoZoLY5S7yyUx;

1.123
date	2015.07.18.05.48.43;	author ajacoutot;	state Exp;
branches;
next	1.122;
commitid	OTVRnGSIhuAeeSbj;

1.122
date	2015.04.09.20.12.15;	author sthen;	state Exp;
branches;
next	1.121;
commitid	BxgIdYd6anp8w9k8;

1.121
date	2014.12.15.18.19.51;	author brad;	state Exp;
branches
	1.121.2.1;
next	1.120;
commitid	I8kHOEaYPfsvTEn6;

1.120
date	2014.09.28.21.36.45;	author brad;	state Exp;
branches;
next	1.119;
commitid	j99aWUDcNdGSzQV7;

1.119
date	2014.09.20.03.03.19;	author brad;	state Exp;
branches;
next	1.118;
commitid	CAZIPYgsShMsATyE;

1.118
date	2014.08.14.21.14.09;	author brad;	state Exp;
branches;
next	1.117;
commitid	xVqHPyJtSzMk6iri;

1.117
date	2014.08.14.01.05.03;	author brad;	state Exp;
branches;
next	1.116;
commitid	ejiIL7GjEJGAPEiv;

1.116
date	2014.04.25.20.59.43;	author brad;	state Exp;
branches;
next	1.115;

1.115
date	2014.03.26.14.14.47;	author brad;	state Exp;
branches;
next	1.114;

1.114
date	2014.03.09.22.50.17;	author brad;	state Exp;
branches;
next	1.113;

1.113
date	2013.11.29.21.21.38;	author brad;	state Exp;
branches;
next	1.112;

1.112
date	2013.11.25.14.16.22;	author sthen;	state Exp;
branches;
next	1.111;

1.111
date	2013.10.30.19.53.29;	author brad;	state Exp;
branches;
next	1.110;

1.110
date	2013.09.08.14.15.00;	author brad;	state Exp;
branches;
next	1.109;

1.109
date	2013.08.19.05.28.20;	author brad;	state Exp;
branches;
next	1.108;

1.108
date	2013.07.18.20.20.18;	author brad;	state Exp;
branches;
next	1.107;

1.107
date	2013.06.23.21.27.55;	author brad;	state Exp;
branches;
next	1.106;

1.106
date	2013.06.03.22.34.24;	author brad;	state Exp;
branches;
next	1.105;

1.105
date	2013.05.24.22.05.51;	author brad;	state Exp;
branches;
next	1.104;

1.104
date	2013.04.19.02.47.43;	author brad;	state Exp;
branches;
next	1.103;

1.103
date	2013.04.14.20.28.56;	author brad;	state Exp;
branches;
next	1.102;

1.102
date	2013.04.01.13.40.32;	author brad;	state Exp;
branches;
next	1.101;

1.101
date	2013.03.20.00.46.01;	author brad;	state Exp;
branches;
next	1.100;

1.100
date	2013.03.11.11.06.04;	author espie;	state Exp;
branches;
next	1.99;

1.99
date	2013.02.02.23.51.45;	author brad;	state Exp;
branches;
next	1.98;

1.98
date	2013.02.02.11.30.34;	author brad;	state Exp;
branches;
next	1.97;

1.97
date	2013.01.29.10.57.03;	author sthen;	state Exp;
branches;
next	1.96;

1.96
date	2013.01.03.08.30.54;	author brad;	state Exp;
branches;
next	1.95;

1.95
date	2012.12.31.07.12.19;	author brad;	state Exp;
branches;
next	1.94;

1.94
date	2012.12.20.23.12.20;	author brad;	state Exp;
branches;
next	1.93;

1.93
date	2012.12.12.18.01.08;	author brad;	state Exp;
branches;
next	1.92;

1.92
date	2012.11.21.11.41.02;	author brad;	state Exp;
branches;
next	1.91;

1.91
date	2012.09.24.17.55.36;	author brad;	state Exp;
branches;
next	1.90;

1.90
date	2012.09.03.08.47.47;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2012.08.08.10.44.44;	author sthen;	state Exp;
branches;
next	1.87;

1.87
date	2012.07.08.14.30.40;	author sthen;	state Exp;
branches
	1.87.2.1;
next	1.86;

1.86
date	2012.06.15.11.53.28;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2012.03.16.11.40.53;	author fgsch;	state Exp;
branches;
next	1.84;

1.84
date	2012.02.02.22.07.33;	author sthen;	state Exp;
branches;
next	1.83;

1.83
date	2012.01.26.19.19.15;	author sthen;	state Exp;
branches;
next	1.82;

1.82
date	2012.01.11.02.21.09;	author sthen;	state Exp;
branches;
next	1.81;

1.81
date	2011.12.12.10.56.56;	author sthen;	state Exp;
branches;
next	1.80;

1.80
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.79;

1.79
date	2011.11.07.21.37.30;	author sthen;	state Exp;
branches;
next	1.78;

1.78
date	2011.10.19.08.12.06;	author sthen;	state Exp;
branches;
next	1.77;

1.77
date	2011.10.17.20.27.17;	author sthen;	state Exp;
branches;
next	1.76;

1.76
date	2011.09.21.09.02.30;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2011.08.28.11.21.05;	author sthen;	state Exp;
branches;
next	1.74;

1.74
date	2011.08.17.08.50.25;	author sthen;	state Exp;
branches;
next	1.73;

1.73
date	2011.08.16.21.24.42;	author sthen;	state Exp;
branches;
next	1.72;

1.72
date	2011.07.19.06.05.42;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2011.06.15.21.13.33;	author sthen;	state Exp;
branches;
next	1.70;

1.70
date	2011.06.10.21.47.54;	author sthen;	state Exp;
branches;
next	1.69;

1.69
date	2011.06.02.13.41.38;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2011.05.25.07.43.48;	author sthen;	state Exp;
branches;
next	1.67;

1.67
date	2011.05.23.23.43.28;	author sthen;	state Exp;
branches;
next	1.66;

1.66
date	2011.05.12.22.19.24;	author sthen;	state Exp;
branches;
next	1.65;

1.65
date	2011.05.09.15.54.56;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.03.25.01.05.15;	author sthen;	state Exp;
branches;
next	1.63;

1.63
date	2011.03.20.20.40.52;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2011.03.12.23.28.39;	author sthen;	state Exp;
branches;
next	1.61;

1.61
date	2011.01.26.13.51.43;	author sthen;	state Exp;
branches
	1.61.2.1;
next	1.60;

1.60
date	2011.01.19.16.22.31;	author sthen;	state Exp;
branches;
next	1.59;

1.59
date	2010.11.22.11.32.01;	author fgsch;	state Exp;
branches;
next	1.58;

1.58
date	2010.11.15.23.22.08;	author espie;	state Exp;
branches;
next	1.57;

1.57
date	2010.11.12.14.43.12;	author jasper;	state Exp;
branches;
next	1.56;

1.56
date	2010.10.28.22.34.47;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2010.10.24.21.17.48;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2010.10.18.18.00.17;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2010.08.26.13.44.29;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2010.07.23.00.27.09;	author fgsch;	state Exp;
branches;
next	1.51;

1.51
date	2010.06.24.09.48.06;	author sthen;	state Exp;
branches;
next	1.50;

1.50
date	2010.06.17.09.57.55;	author fgsch;	state Exp;
branches;
next	1.49;

1.49
date	2010.06.08.01.08.20;	author fgsch;	state Exp;
branches;
next	1.48;

1.48
date	2010.05.28.00.04.17;	author fgsch;	state Exp;
branches;
next	1.47;

1.47
date	2010.05.27.18.49.41;	author fgsch;	state Exp;
branches;
next	1.46;

1.46
date	2010.05.27.17.55.05;	author fgsch;	state Exp;
branches;
next	1.45;

1.45
date	2010.01.07.14.15.17;	author giovanni;	state Exp;
branches;
next	1.44;

1.44
date	2009.10.27.13.07.49;	author jasper;	state Exp;
branches;
next	1.43;

1.43
date	2009.06.02.22.47.52;	author todd;	state Exp;
branches;
next	1.42;

1.42
date	2009.04.20.20.45.47;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2009.02.11.23.39.30;	author todd;	state Exp;
branches;
next	1.40;

1.40
date	2008.12.11.09.47.06;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2008.12.11.09.17.33;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2008.12.10.23.30.33;	author todd;	state Exp;
branches;
next	1.37;

1.37
date	2008.09.22.15.17.54;	author mpf;	state Exp;
branches;
next	1.36;

1.36
date	2008.07.24.19.00.11;	author martynas;	state Exp;
branches;
next	1.35;

1.35
date	2008.06.19.05.51.17;	author todd;	state Exp;
branches;
next	1.34;

1.34
date	2008.06.18.00.44.19;	author todd;	state Exp;
branches;
next	1.33;

1.33
date	2008.05.12.07.47.22;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2008.04.28.22.52.38;	author todd;	state Exp;
branches;
next	1.31;

1.31
date	2008.04.01.08.51.18;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2008.03.31.20.59.21;	author okan;	state Exp;
branches;
next	1.29;

1.29
date	2008.03.31.20.36.35;	author todd;	state Exp;
branches;
next	1.28;

1.28
date	2008.03.31.20.16.52;	author todd;	state Exp;
branches;
next	1.27;

1.27
date	2008.03.31.14.25.59;	author todd;	state Exp;
branches;
next	1.26;

1.26
date	2008.03.31.06.49.27;	author todd;	state Exp;
branches;
next	1.25;

1.25
date	2008.01.21.20.40.20;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2008.01.19.23.53.58;	author todd;	state Exp;
branches;
next	1.23;

1.23
date	2008.01.09.10.17.54;	author todd;	state Exp;
branches;
next	1.22;

1.22
date	2007.09.16.00.45.13;	author merdely;	state Exp;
branches;
next	1.21;

1.21
date	2007.05.01.12.55.13;	author todd;	state Exp;
branches;
next	1.20;

1.20
date	2007.02.19.22.59.33;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2007.02.19.12.43.38;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2007.01.17.20.35.09;	author mpf;	state Exp;
branches;
next	1.17;

1.17
date	2007.01.10.20.20.06;	author mpf;	state Exp;
branches;
next	1.16;

1.16
date	2006.12.22.17.31.45;	author todd;	state Exp;
branches;
next	1.15;

1.15
date	2006.06.08.14.33.38;	author todd;	state Exp;
branches;
next	1.14;

1.14
date	2006.04.10.21.10.05;	author todd;	state Exp;
branches;
next	1.13;

1.13
date	2006.02.17.12.43.32;	author todd;	state Exp;
branches;
next	1.12;

1.12
date	2006.02.16.16.27.44;	author todd;	state Exp;
branches;
next	1.11;

1.11
date	2006.02.08.13.44.17;	author todd;	state Exp;
branches;
next	1.10;

1.10
date	2006.01.04.21.47.39;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2005.12.27.07.56.14;	author todd;	state Exp;
branches;
next	1.8;

1.8
date	2005.11.25.04.12.54;	author todd;	state Exp;
branches;
next	1.7;

1.7
date	2005.11.05.12.11.05;	author todd;	state Exp;
branches;
next	1.6;

1.6
date	2005.11.03.18.41.55;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	2005.10.25.03.25.44;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	2005.09.26.20.47.56;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	2005.08.11.01.15.17;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.08.16.29.43;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.07.16.41.28;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.07.16.41.28;	author todd;	state Exp;
branches;
next	;

1.61.2.1
date	2011.07.20.17.51.55;	author gsoares;	state Exp;
branches;
next	;

1.87.2.1
date	2013.01.02.00.58.48;	author brad;	state Exp;
branches;
next	;

1.121.2.1
date	2015.07.18.20.38.02;	author sthen;	state Exp;
branches;
next	1.121.2.2;
commitid	iiChQZHRvFg0LFK5;

1.121.2.2
date	2015.07.28.09.52.07;	author sthen;	state Exp;
branches;
next	1.121.2.3;
commitid	kUZrfdQ3yuPaBMxg;

1.121.2.3
date	2015.08.14.06.39.38;	author jasper;	state Exp;
branches;
next	1.121.2.4;
commitid	Px3KHwTLTWPaYnGe;

1.121.2.4
date	2015.09.07.08.51.58;	author jasper;	state Exp;
branches;
next	1.121.2.5;
commitid	N7Psk4gdOB3X62F6;

1.121.2.5
date	2015.09.16.07.29.24;	author jasper;	state Exp;
branches;
next	1.121.2.6;
commitid	ReftfG7QJl8FYlWa;

1.121.2.6
date	2015.09.16.11.16.53;	author jasper;	state Exp;
branches;
next	;
commitid	vx84FGNAvSnETZKj;

1.126.4.1
date	2015.08.24.09.35.36;	author jasper;	state Exp;
branches;
next	1.126.4.2;
commitid	U0ZAwVDx3wCcvGa4;

1.126.4.2
date	2015.09.07.08.52.55;	author jasper;	state Exp;
branches;
next	1.126.4.3;
commitid	p33ZZs31bJ0CAbvm;

1.126.4.3
date	2015.09.16.07.28.43;	author jasper;	state Exp;
branches;
next	1.126.4.4;
commitid	YFDteHqI7C3ii7OT;

1.126.4.4
date	2015.09.16.11.16.44;	author jasper;	state Exp;
branches;
next	1.126.4.5;
commitid	CsrVZj67iJuahhlE;

1.126.4.5
date	2015.12.09.10.42.58;	author jasper;	state Exp;
branches;
next	1.126.4.6;
commitid	v3AIAVQ5v2HwniSB;

1.126.4.6
date	2015.12.24.09.44.14;	author jasper;	state Exp;
branches;
next	1.126.4.7;
commitid	FaciMaYoEtARAEEx;

1.126.4.7
date	2016.01.07.10.27.40;	author jasper;	state Exp;
branches;
next	1.126.4.8;
commitid	Ciob9S8eFBoLGbjT;

1.126.4.8
date	2016.01.14.07.20.47;	author jasper;	state Exp;
branches;
next	1.126.4.9;
commitid	ZWmRO3r4YkYZ8232;

1.126.4.9
date	2016.01.22.08.45.01;	author jasper;	state Exp;
branches;
next	1.126.4.10;
commitid	H77s5eoekhucC6XR;

1.126.4.10
date	2016.02.15.11.06.13;	author jasper;	state Exp;
branches;
next	1.126.4.11;
commitid	fruAVf67zMiz1SDO;

1.126.4.11
date	2016.02.22.09.12.35;	author jasper;	state Exp;
branches;
next	1.126.4.12;
commitid	oI3BPACP1hxhbjIW;

1.126.4.12
date	2016.03.09.13.45.46;	author jasper;	state Exp;
branches;
next	;
commitid	8JZMGHgp6qLrLmc8;


desc
@@


1.163
log
@readd --enable-curses, it causes configure to exit out if curses isn't
detected, so we shouldn't run into it silently breaking again in future.
ok Brad
@
text
@# $OpenBSD: Makefile,v 1.162 2017/05/07 08:43:28 ajacoutot Exp $

USE_WXNEEDED=	Yes

ONLY_FOR_ARCHS=	aarch64 amd64 arm i386 powerpc sparc64

COMMENT=	multi system emulator

DISTNAME=	qemu-2.9.0
REVISION=	1
CATEGORIES=	emulators
MASTER_SITES=	http://wiki.qemu.org/download/
EXTRACT_SUFX=	.tar.bz2

HOMEPAGE=	http://www.qemu.org/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# GPLv2, LGPLv2 and BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	SDL X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama \
		Xrandr Xrender atk-1.0 bz2 c cairo curl drm epoxy fdt \
		fontconfig freetype gbm gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 \
		glib-2.0 gnutls gobject-2.0 gthread-2.0 gtk-x11-2.0 intl \
		iscsi jpeg lzo2 m ncursesw nettle nfs pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread pthread-stubs ssh2 \
		usb-1.0 util vte z

# Using gcc4 for the TLS emulation layer
MODULES=	lang/python \
		gcc4

MODGCC4_ARCHS=	*
MODGCC4_LANGS=	c++

BUILD_DEPENDS=	devel/gettext-tools \
		textproc/texi2html
LIB_DEPENDS=	archivers/bzip2 \
		archivers/lzo2 \
		devel/dtc>=1.4.4 \
		devel/gettext \
		devel/glib2 \
		devel/libiscsi \
		devel/libnfs \
		devel/libusb1>=1.0.20 \
		devel/sdl \
		devel/vte \
		graphics/jpeg \
		graphics/png \
		net/curl \
		security/gnutls \
		security/libnettle \
		security/libssh2 \
		x11/gtk+2

MODPY_RUNDEP=	No

MAKE_ENV=	V=1
FAKE_FLAGS=	qemu_confdir=${PREFIX}/share/examples/qemu

EXTRA_CFLAGS=	-I${LOCALBASE}/include -I${X11BASE}/include
EXTRA_LDFLAGS=	-L${LOCALBASE}/lib -L${X11BASE}/lib

# until the system headers are fixed properly.
EXTRA_CFLAGS+=	-Wno-redundant-decls

EXTRA_CFLAGS+=	-DTIME_MAX=LLONG_MAX

USE_GMAKE=	Yes
CONFIGURE_STYLE=simple
CONFIGURE_ARGS=	--prefix=${PREFIX} \
		--sysconfdir=${SYSCONFDIR} \
		--mandir=${PREFIX}/man \
		--python=${MODPY_BIN} \
		--smbd=${LOCALBASE}/sbin/smbd \
		--cc="${CC}" \
		--cxx="${CXX}" \
		--host-cc="${CC}" \
		--extra-cflags="${EXTRA_CFLAGS}" \
		--extra-ldflags="${EXTRA_LDFLAGS}" \
		--disable-bsd-user \
		--enable-curses \
		--disable-gcrypt \
		--disable-smartcard \
		--disable-spice \
		--disable-usb-redir \
		--disable-vnc-sasl

FLAVORS=	debug
FLAVOR?=

.if ${FLAVOR:Mdebug}
CFLAGS+=	-O0
CONFIGURE_ARGS+=--enable-debug
INSTALL_STRIP=
.else
CONFIGURE_ARGS+=--disable-debug-info
.endif

TEST_TARGET=	check

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/qemu
	${INSTALL_SCRIPT} ${FILESDIR}/qemu-ifup \
	    ${PREFIX}/share/examples/qemu
	${INSTALL_SCRIPT} ${FILESDIR}/qemu-ifdown \
	    ${PREFIX}/share/examples/qemu

.include <bsd.port.mk>
@


1.162
log
@- Remove --enable-curses as the probe is run anyway
- Add ncursesw to WANTLIB

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2017/05/06 19:25:18 uaa Exp $
d83 1
@


1.161
log
@fixed configure script to enable -curses option

ok sthen@@ and brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2017/04/23 13:24:17 ajacoutot Exp $
d10 1
a10 1
REVISION=	0
d26 1
a26 1
		iscsi jpeg lzo2 m nettle nfs pango-1.0 pangocairo-1.0 \
a81 1
		--enable-curses \
@


1.160
log
@Update to qemu-2.9.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2017/04/10 13:13:02 ajacoutot Exp $
d10 1
d82 1
@


1.159
log
@Update to qemu-2.8.1.

from Brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2017/02/26 13:31:57 ajacoutot Exp $
d9 1
a9 1
DISTNAME=	qemu-2.8.1
d25 1
a25 1
		iscsi jpeg lzo2 m ncurses nettle nfs pango-1.0 pangocairo-1.0 \
d40 1
a40 1
		devel/dtc \
@


1.158
log
@Add aarch64 to ONLY_FOR_ARCHS.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2017/02/25 11:16:25 ajacoutot Exp $
d9 1
a9 2
DISTNAME=	qemu-2.8.0
REVISION=	0
@


1.157
log
@Fix interrupts with virtio when not using MSI.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2017/01/01 10:50:55 ajacoutot Exp $
d5 1
a5 1
ONLY_FOR_ARCHS=	amd64 arm i386 powerpc sparc64
@


1.156
log
@Enable QEMU on arm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2016/12/22 09:05:06 ajacoutot Exp $
d10 1
@


1.155
log
@Update to qemu-2.8.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2016/10/07 08:51:05 ajacoutot Exp $
d5 1
a5 1
ONLY_FOR_ARCHS=	amd64 i386 powerpc sparc64
@


1.154
log
@Better diff to deal with the tap(4) transition. No functional change.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2016/09/03 15:31:07 ajacoutot Exp $
d9 1
a9 2
DISTNAME=	qemu-2.7.0
REVISION=	0
d27 1
a27 1
		usb-1.0 util uuid vte z
a53 1
		sysutils/e2fsprogs \
@


1.153
log
@Update to qemu-2.7.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2016/08/25 15:59:58 jasper Exp $
d10 1
@


1.152
log
@once more with an updated gcc; drop the workarounds and XXX comments

spotted by naddy@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.151 2016/08/25 08:56:12 jasper Exp $
a6 2
USE_WXNEEDED =	Yes

d9 1
a9 2
DISTNAME=	qemu-2.6.1
REVISION=	0
@


1.151
log
@annotate two more ports that were marked as wxneeded with USE_WXNEEDED,
even though in both cases it doesn't work yet, at least they're marked
so they are indexed by sqlports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2016/08/21 12:04:23 ajacoutot Exp $
a4 1
# XXX: Doesn't work, see EXTRA_LDFLAGS below
d10 1
d64 1
a64 1
EXTRA_LDFLAGS=	-L${LOCALBASE}/lib -L${X11BASE}/lib -Wl,-z,wxneeded
@


1.150
log
@Update to qemu-2.6.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2016/08/16 10:59:47 bluhm Exp $
d4 3
@


1.149
log
@Add wxneeded flag when linking qemu.
Add build dependency for msgfmt.
OK jca@@ jung@@ Brad Smith (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2016/05/13 07:20:46 ajacoutot Exp $
d7 1
a7 2
DISTNAME=	qemu-2.6.0
REVISION=	0
@


1.148
log
@Update to qemu-2.6.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2016/04/11 05:56:45 ajacoutot Exp $
d8 1
d35 2
a36 1
BUILD_DEPENDS=	textproc/texi2html
d62 1
a62 1
EXTRA_LDFLAGS=	-L${LOCALBASE}/lib -L${X11BASE}/lib
@


1.147
log
@Update to qemu-2.5.1.1.
@
text
@d7 1
a7 1
DISTNAME=	qemu-2.5.1.1
d20 6
a25 5
		Xrandr Xrender atk-1.0 bz2 c cairo curl epoxy fdt fontconfig \
		freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gnutls \
		gobject-2.0 gthread-2.0 gtk-x11-2.0 iscsi jpeg lzo2 m ncurses \
		nettle nfs pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png \
		pthread pthread-stubs ssh2 usb-1.0 util uuid vte z
d28 1
a28 2
MODULES=	devel/gettext \
		lang/python \
d38 1
@


1.146
log
@Update to qemu-2.5.1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2016/03/14 19:46:12 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	qemu-2.5.1
@


1.145
log
@Major update to qemu-2.5.0.
Please direct any runtime fallout to Brad.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2016/03/01 10:18:25 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	qemu-2.5.0
@


1.144
log
@Fix for CVE-2016-2538.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2016/02/20 22:46:46 ajacoutot Exp $
d7 1
a7 2
DISTNAME=	qemu-2.2.1
REVISION=	20
d19 6
a24 6
WANTLIB=	GL SDL X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama \
		Xrandr Xrender atk-1.0 c cairo curl fdt fontconfig freetype \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gnutls gobject-2.0 \
		gthread-2.0 gtk-x11-2.0 iscsi jpeg lzo2 m ncurses nfs pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pixman-1 png pthread pthread-stubs \
		ssh2 stdc++ usb-1.0 util uuid vte z
d26 1
d28 6
a33 1
		lang/python
d35 2
a36 1
LIB_DEPENDS=	archivers/lzo2 \
d48 1
d79 2
a80 1
		--disable-smartcard-nss \
d99 1
@


1.143
log
@Security fix for CVE-2016-2391 and CVE-2016-2393.

from Brad (maintainer)
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2016/02/14 11:27:32 sthen Exp $
d8 1
a8 1
REVISION=	19
@


1.142
log
@Add a patch from QEMU upstream to fix CVE-2016-2198. From Brad, ok aja@@

"USB Ehci emulation supports host controller capability registers.
But its mmio '.write' function was missing, which lead to a null
pointer dereference issue. Add a do nothing 'ehci_caps_write'
definition to avoid it; Do nothing because capability registers
are Read Only(RO)."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2016/01/22 07:00:15 ajacoutot Exp $
d8 1
a8 1
REVISION=	18
@


1.141
log
@SECURITY fix for CVE-2016-1981.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2016/01/14 06:12:10 ajacoutot Exp $
d8 1
a8 1
REVISION=	17
@


1.140
log
@SECURITY fix for CVE-2016-1714.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2016/01/05 06:56:12 ajacoutot Exp $
d8 1
a8 1
REVISION=	16
@


1.139
log
@SECURITY fixes for:
CVE-2015-8619, CVE-2015-8666, CVE-2015-8743, CVE-2015-8744, and CVE-2015-8745

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2015/12/22 06:43:05 ajacoutot Exp $
d8 1
a8 1
REVISION=	15
@


1.138
log
@SECURITY fix for CVE-2015-8613; from Brad (maintainer)
While here, fix path to smbd(8); reported by mlarkin@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2015/12/16 06:41:06 ajacoutot Exp $
d8 1
a8 1
REVISION=	14
@


1.137
log
@SECURITY fixes for:
CVE-2015-7549, CVE-2015-8504, CVE-2015-8558, CVE-2015-8567 and CVE-2015-8568

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2015/12/08 06:55:13 ajacoutot Exp $
d8 1
a8 1
REVISION=	13
d65 1
a65 1
		--smbd=${LOCALBASE}/libexec/smbd \
@


1.136
log
@SECURITY fixes for CVE-2015-7504, CVE-2015-7512, CVE-2015-8345.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2015/11/03 16:25:24 sthen Exp $
d8 1
a8 1
REVISION=	12
@


1.135
log
@Remove malloc tracing from QEMU, this was removed in newer glib and results
in annoying messages:

(process:23283): GLib-WARNING **: gmem.c:482: custom memory allocation vtable not supported

From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2015/10/28 09:17:31 sthen Exp $
d8 1
a8 1
REVISION=	11
@


1.134
log
@tap(4) and sudo cleanup for QEMU, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2015/10/23 15:15:28 sthen Exp $
d8 1
a8 1
REVISION=	10
@


1.133
log
@Adjust Qemu following the split of tun(4)'s "link0" mode into tap(4).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2015/09/16 09:18:13 ajacoutot Exp $
d8 1
a8 1
REVISION=	9
@


1.132
log
@SECURITY: CVE-2015-5278, CVE-2015-5279, CVE-2015-6815
Some more fixes, mostly security related.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2015/09/16 07:08:41 ajacoutot Exp $
d8 1
a8 1
REVISION=	8
@


1.131
log
@SECURITY: CVE-2015-5745
virtio-serial: fix ANY_LAYOUT
Don't assume a specific layout for control messages.
Required by virtio 1.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2015/09/15 12:48:39 ajacoutot Exp $
d8 1
a8 1
REVISION=	7
@


1.130
log
@Enable USB support now that libusb1>=1.0.20 is in.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2015/09/04 14:20:29 ajacoutot Exp $
d8 1
a8 1
REVISION=	6
@


1.129
log
@SECURITY: vnc, fix memory corruption (CVE-2015-5225).

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2015/08/25 06:43:35 ajacoutot Exp $
d8 1
a8 1
REVISION=	5
d25 1
a25 1
		ssh2 stdc++ util uuid vte z
d35 1
a71 1
		--disable-libusb \
@


1.128
log
@Enable the built-in iSCSI and NFS clients, the LZO support and the UUID
support.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2015/08/11 21:28:53 sthen Exp $
d8 1
a8 1
REVISION=	4
@


1.127
log
@Backport SECURITY fixes for qemu, from Brad.

ide/atapi: Fix START STOP UNIT command completion
rtl8139: avoid nested ifs in IP header parsing (CVE-2015-5165)
rtl8139: drop tautologous if (ip) {...} statement (CVE-2015-5165)
rtl8139: skip offload on short Ethernet/IP header (CVE-2015-5165)
rtl8139: check IP Header Length field (CVE-2015-5165)
rtl8139: check IP Total Length field (CVE-2015-5165)
rtl8139: skip offload on short TCP header (CVE-2015-5165)
rtl8139: check TCP Data Offset field (CVE-2015-5165)
scsi: fix buffer overflow in scsi_req_parse_cdb (CVE-2015-5158)
slirp: use less predictable directory name in /tmp for smb config (CVE-2015-4037)
i8254: fix out-of-bounds memory access in pit_ioport_read() (CVE-2015-3214)
incrementally decode websocket frames (CVE-2015-1779)
limit size of HTTP headers from websockets clients (CVE-2015-1779)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2015/08/03 19:14:56 jung Exp $
d8 1
a8 1
REVISION=	3
d23 3
a25 3
		gthread-2.0 gtk-x11-2.0 jpeg m ncurses pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread pthread-stubs ssh2 stdc++ util \
		vte z
d30 2
a31 1
LIB_DEPENDS=	devel/dtc>=1.3.0 \
d33 2
d42 1
a70 1
		--disable-libiscsi \
a71 1
		--disable-lzo \
a73 1
		--disable-uuid \
@


1.126
log
@remove sudo as run dependency and switch to doas in readme and scripts

ok sthen deraadt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2015/07/28 09:51:20 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.126.4.1
log
@Backport SECURITY fixes for qemu

ide/atapi: Fix START STOP UNIT command completion
rtl8139: avoid nested ifs in IP header parsing (CVE-2015-5165)
rtl8139: drop tautologous if (ip) {...} statement (CVE-2015-5165)
rtl8139: skip offload on short Ethernet/IP header (CVE-2015-5165)
rtl8139: check IP Header Length field (CVE-2015-5165)
rtl8139: check IP Total Length field (CVE-2015-5165)
rtl8139: skip offload on short TCP header (CVE-2015-5165)
rtl8139: check TCP Data Offset field (CVE-2015-5165)
scsi: fix buffer overflow in scsi_req_parse_cdb (CVE-2015-5158)
slirp: use less predictable directory name in /tmp for smb config (CVE-2015-4037)
i8254: fix out-of-bounds memory access in pit_ioport_read() (CVE-2015-3214)
incrementally decode websocket frames (CVE-2015-1779)
limit size of HTTP headers from websockets clients (CVE-2015-1779)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2015/08/11 21:28:53 sthen Exp $
d8 1
a8 1
REVISION=	3
@


1.126.4.2
log
@SECURITY: vnc, fix memory corruption (CVE-2015-5225).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.1 2015/08/24 09:35:36 jasper Exp $
d8 1
a8 1
REVISION=	4
@


1.126.4.3
log
@Security fix for CVE-2015-5745, qemu buffer overflow in virtio-serial
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.2 2015/09/07 08:52:55 jasper Exp $
d8 1
a8 1
REVISION=	5
@


1.126.4.4
log
@Security fixes for CVE-2015-5278, CVE-2015-5279, CVE-2015-6815,
as well as several other reliability fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.3 2015/09/16 07:28:43 jasper Exp $
d8 1
a8 1
REVISION=	6
@


1.126.4.5
log
@SECURITY fixes for CVE-2015-7504, CVE-2015-7512, CVE-2015-8345.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.4 2015/09/16 11:16:44 jasper Exp $
d8 1
a8 1
REVISION=	7
@


1.126.4.6
log
@Security fixes for CVE-2015-7549, CVE-2015-8504, CVE-2015-8558, CVE-2015-8567,
CVE-2015-8568, CVE-2015-8613
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.5 2015/12/09 10:42:58 jasper Exp $
d8 1
a8 1
REVISION=	8
@


1.126.4.7
log
@SECURITY fixes for:
CVE-2015-8619, CVE-2015-8666, CVE-2015-8743, CVE-2015-8744, and CVE-2015-8745
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.6 2015/12/24 09:44:14 jasper Exp $
d8 1
a8 1
REVISION=	9
@


1.126.4.8
log
@security fix for CVE-2016-1714
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.7 2016/01/07 10:27:40 jasper Exp $
d8 1
a8 1
REVISION=	10
@


1.126.4.9
log
@Security fix for CVE-2016-1981

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.8 2016/01/14 07:20:47 jasper Exp $
d8 1
a8 1
REVISION=	11
@


1.126.4.10
log
@Security fix for CVE-2016-2198
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.9 2016/01/22 08:45:01 jasper Exp $
d8 1
a8 1
REVISION=	12
@


1.126.4.11
log
@Security fixes for CVE-2016-2391 and CVE-2016-2393.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.10 2016/02/15 11:06:13 jasper Exp $
d8 1
a8 1
REVISION=	13
@


1.126.4.12
log
@security fix for CVE-2016-2538
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126.4.11 2016/02/22 09:12:35 jasper Exp $
d8 1
a8 1
REVISION=	14
@


1.125
log
@add security fix for qemu CVE-2015-5154, from brad:
ide: Check array bounds before writing to io_buffer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2015/07/18 20:36:56 sthen Exp $
d8 1
a8 1
REVISION=	1
a39 2

RUN_DEPENDS=	security/sudo
@


1.124
log
@Security fixes for qemu, from brad:


CVE-2015-3456  fdc: force the fifo access to be in bounds of the allocated buffer

During processing of certain commands such as FD_CMD_READ_ID and
FD_CMD_DRIVE_SPECIFICATION_COMMAND the fifo memory access could
get out of bounds leading to memory corruption with values coming
from the guest.

Fix this by making sure that the index is always bounded by the
allocated memory.


CVE-2015-3209  pcnet: force the buffer access to be in bounds during tx

4096 is the maximum length per TMD and it is also currently the size of
the relay buffer pcnet driver uses for sending the packet data to QEMU
for further processing. With packet spanning multiple TMDs it can
happen that the overall packet size will be bigger than sizeof(buffer),
which results in memory corruption.

Fix this by only allowing to queue maximum sizeof(buffer) bytes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2015/07/18 05:48:43 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
a11 1
REVISION=	0
@


1.123
log
@ifdow/ifup require security/sudo.

ok brad@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2015/04/09 20:12:15 sthen Exp $
d8 1
@


1.122
log
@Update to QEMU 2.2.1, from Brad (maintainer).
"The QEMU update was also Ok'd by rpe@@ bcallah@@"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2014/12/15 18:19:51 brad Exp $
d11 1
d40 2
@


1.121
log
@Update to QEMU 2.2.0.

ok rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2014/09/28 21:36:45 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-2.2.0
@


1.121.2.1
log
@MFC Security fixes for qemu, from brad:

CVE-2015-3456 fdc: force the fifo access to be in bounds of the allocated buffer

During processing of certain commands such as FD_CMD_READ_ID and
FD_CMD_DRIVE_SPECIFICATION_COMMAND the fifo memory access could
get out of bounds leading to memory corruption with values coming
from the guest.

Fix this by making sure that the index is always bounded by the
allocated memory.

CVE-2015-3209  pcnet: force the buffer access to be in bounds during tx

4096 is the maximum length per TMD and it is also currently the size of
the relay buffer pcnet driver uses for sending the packet data to QEMU
for further processing. With packet spanning multiple TMDs it can
happen that the overall packet size will be bigger than sizeof(buffer),
which results in memory corruption.

Fix this by only allowing to queue maximum sizeof(buffer) bytes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2014/12/15 18:19:51 brad Exp $
a7 1
REVISION=	0
@


1.121.2.2
log
@MFC: add security fix for qemu CVE-2015-5154, from brad:
ide: Check array bounds before writing to io_buffer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121.2.1 2015/07/18 20:38:02 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.121.2.3
log
@backport security fixes from -current, ok brad

ide/atapi: Fix START STOP UNIT command completion
rtl8139: avoid nested ifs in IP header parsing (CVE-2015-5165)
rtl8139: drop tautologous if (ip) {...} statement (CVE-2015-5165)
rtl8139: skip offload on short Ethernet/IP header (CVE-2015-5165)
rtl8139: check IP Header Length field (CVE-2015-5165)
rtl8139: check IP Total Length field (CVE-2015-5165)
rtl8139: skip offload on short TCP header (CVE-2015-5165)
rtl8139: check TCP Data Offset field (CVE-2015-5165)
scsi: fix buffer overflow in scsi_req_parse_cdb (CVE-2015-5158)
slirp: use less predictable directory name in /tmp for smb config (CVE-2015-4037)
i8254: fix out-of-bounds memory access in pit_ioport_read() (CVE-2015-3214)
incrementally decode websocket frames (CVE-2015-1779)
limit size of HTTP headers from websockets clients (CVE-2015-1779)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121.2.2 2015/07/28 09:52:07 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.121.2.4
log
@SECURITY: vnc, fix memory corruption (CVE-2015-5225).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121.2.3 2015/08/14 06:39:38 jasper Exp $
d8 1
a8 1
REVISION=	3
@


1.121.2.5
log
@Security fix for CVE-2015-5745, qemu buffer overflow in virtio-serial
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121.2.4 2015/09/07 08:51:58 jasper Exp $
d8 1
a8 1
REVISION=	4
@


1.121.2.6
log
@Security fixes for CVE-2015-5278, CVE-2015-5279, CVE-2015-6815,
as well as several other reliability fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121.2.5 2015/09/16 07:29:24 jasper Exp $
d8 1
a8 1
REVISION=	5
@


1.120
log
@Update to QEMU 2.1.2.

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2014/09/20 03:03:19 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-2.1.2
@


1.119
log
@Update to QEMU 2.1.1.

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2014/08/14 21:14:09 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-2.1.1
@


1.118
log
@commit from the right dir so the actual 2.1.0 Makefile goes in.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2014/08/14 01:05:03 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-2.1.0
@


1.117
log
@Update to QEMU 2.1.0

ok bcallah@@ rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2014/04/25 20:59:43 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-2.0.0
REVISION=	0
@


1.116
log
@Update to QEMU 2.0.0

ok bcallah@@ gsoares@@ rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2014/03/26 14:14:47 brad Exp $
d8 1
d69 1
@


1.115
log
@Update to QEMU 1.7.1.

ok gsoares@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2014/03/09 22:50:17 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-1.7.1
d23 2
a24 1
		pangoft2-1.0 pixman-1 png pthread pthread-stubs ssh2 util vte z
@


1.114
log
@- Sync PIE bits with what was commited upstream
- Use stack protector strong instead of all

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2013/11/29 21:21:38 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-1.7.0
REVISION=	0
@


1.113
log
@Update to QEMU 1.7.0.

ok rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2013/11/25 14:16:22 sthen Exp $
d8 1
@


1.112
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2013/10/30 19:53:29 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-1.6.1
d60 1
@


1.111
log
@Update to QEMU 1.6.1.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2013/09/08 14:15:00 brad Exp $
a50 2

VMEM_WARNING=	Yes
@


1.110
log
@Update to QEMU 1.6.0.

ok sthen@@ rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2013/08/19 05:28:20 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-1.6.0
@


1.109
log
@Switch TIME_MAX from int to long long.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2013/07/18 20:20:18 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-1.5.1
REVISION=	0
a85 3

post-extract:
	@@rm ${WRKSRC}/include/libfdt_env.h
@


1.108
log
@Update to QEMU 1.5.1.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2013/06/23 21:27:55 brad Exp $
d8 1
d51 1
a51 1
EXTRA_CFLAGS+=	-DTIME_MAX=INT_MAX
@


1.107
log
@Back port a commit from master to make use of external libfdt
instead of the integrated copy.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2013/06/03 22:34:24 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-1.5.0
REVISION=	0
a64 1
		--audio-drv-list=sdl \
@


1.106
log
@Update to QEMU 1.5.0.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2013/05/24 22:05:51 brad Exp $
d8 1
d21 1
a21 1
		Xrandr Xrender atk-1.0 c cairo curl fontconfig freetype \
d29 2
a30 1
LIB_DEPENDS=	devel/glib2 \
d88 3
@


1.105
log
@Update to QEMU 1.4.2. Includes a fix for CVE-2013-2007.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2013/04/19 02:47:43 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-1.4.2
d19 5
a23 2
WANTLIB=	GL SDL X11 c curl glib-2.0 gnutls gthread-2.0 jpeg m ncurses \
		pixman-1 png pthread pthread-stubs util z
d30 1
d34 3
a36 1
		security/gnutls
d67 1
@


1.104
log
@Update to QEMU 1.4.1. Includes a fix for CVE-2013-1922.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2013/04/14 20:28:56 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-1.4.1
@


1.103
log
@Make use of the testsuite.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2013/04/01 13:40:32 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-1.4.0
REVISION=	0
d65 1
a65 2
		--disable-vnc-sasl \
		--with-coroutine=sigaltstack
@


1.102
log
@Update the get_clock() function so it will utilize clock_gettime() with
monotonic time on OpenBSD instead of using gettimeofday().

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2013/03/20 00:46:01 brad Exp $
d80 1
a80 1
NO_TEST=	Yes
@


1.101
log
@Upgrade to QEMU 1.4.0. Enable the VNC TLS support.

Tested by todd@@ kirby@@ sthen@@ and OK kirby@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2013/03/11 11:06:04 espie Exp $
d8 1
@


1.100
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2013/02/02 23:51:45 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-1.3.1
REVISION=	0
d19 1
a19 1
WANTLIB=	GL SDL X11 c curl glib-2.0 gthread-2.0 jpeg m ncurses \
d29 2
a30 1
		net/curl
a65 1
		--disable-vnc-tls \
@


1.99
log
@- Build option ROM .S files with separate preprocessor and
  assembler steps because the C compiler could be unsuitable.
- When the pxa2xx performance counter related cp14 registers were converted
  from a switch-statement implementation to the new table driven cpregs
  format in commit dc2a9045c, the crn and crm values for all these
  registers were accidentally transposed. Fixes being able to boot
  OpenBSD/zaurus.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2013/02/02 11:30:34 brad Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d80 1
a80 1
NO_REGRESS=	Yes
@


1.98
log
@Update to QEMU 1.3.1.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2013/01/29 10:57:03 sthen Exp $
d8 1
@


1.97
log
@32-bit-align PCI data structure for vgabios in Qemu. ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2013/01/03 08:30:54 brad Exp $
d7 1
a7 2
DISTNAME=	qemu-1.2.2
REVISION=	2
d23 1
a23 1
		png pthread util z
@


1.96
log
@- Remove unused sparc CONFIGURE_ARGS option
- Clear contents of INSTALL_STRIP when using the debug FLAVOR so that
  the binary is not stripped
- Some small tweaks to the README

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2012/12/31 07:12:19 brad Exp $
d8 1
a8 1
REVISION=	1
@


1.95
log
@Update ONLY_FOR_ARCHS and remove a few archs that do not build
or just do not make sense anyway.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2012/12/20 23:12:20 brad Exp $
d8 1
a8 1
REVISION=	0
a71 4
.if ${MACHINE_ARCH:Msparc}
CONFIGURE_ARGS+=--sparc_cpu=v7
.endif

d78 1
@


1.94
log
@e1000: Also discard oversized packets if LPE is enabled.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2012/12/12 18:01:08 brad Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	amd64 arm i386 mips64 mips64el powerpc sparc sparc64
@


1.93
log
@Upgrade to QEMU 1.2.2.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2012/11/21 11:41:02 brad Exp $
d8 1
@


1.92
log
@Update to QEMU 1.2.1.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2012/09/24 17:55:36 brad Exp $
d7 1
a7 1
DISTNAME=	qemu-1.2.1
d68 2
a69 1
		--disable-vnc-tls
@


1.91
log
@Update to QEMU 1.2.0.

Ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2012/09/03 08:47:47 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	qemu-1.2.0
@


1.90
log
@Remove MESSAGE, people have had several releases to adjust.

ok Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2012/09/01 14:36:57 ajacoutot Exp $
d3 1
a3 2
ONLY_FOR_ARCHS=	amd64 arm hppa i386 mips64 mips64el powerpc sparc sparc64
BROKEN-hppa=	compiler bug with gcc 4.2
d7 1
a7 2
DISTNAME=	qemu-1.1.1-1
PKGNAME=	qemu-1.1.1
a10 3
REVISION=	1

WRKDIST=	${WRKDIR}/qemu-1.1.1
@


1.89
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2012/08/08 10:44:44 sthen Exp $
d13 1
a13 1
REVISION=	0
@


1.88
log
@update to QEMU 1.1.1, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2012/07/08 14:30:40 sthen Exp $
d13 1
@


1.87
log
@switch from 5.1 to 5.2 in README, ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2012/06/15 11:53:28 ajacoutot Exp $
d8 2
a9 3
DISTNAME=	qemu-1.1.0-1
PKGNAME=	qemu-1.1.0
REVISION=	0
d14 1
a14 1
WRKDIST=	${WRKDIR}/qemu-1.1.0
@


1.87.2.1
log
@MFC:
e1000: Discard oversized packets based on SBP|LPE. CVE-2012-6075

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2012/07/08 14:30:40 sthen Exp $
d10 1
a10 1
REVISION=	1
@


1.86
log
@Update to QEMU 1.1.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/03/16 11:40:53 fgsch Exp $
d10 1
@


1.85
log
@Update to qemu 1.0.1, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2012/02/02 22:07:33 sthen Exp $
d8 2
a9 1
DISTNAME=	qemu-1.0.1
d12 3
d41 1
a41 1
FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples
d82 1
d84 2
a90 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/qemu
@


1.84
log
@Add a fix for CVE-2012-0029 from QEMU upstream, ok Brad, ajacoutot

"Heap-based buffer overflow in the process_tx_desc function in the
e1000 emulation (hw/e1000.c) [...] allows guest OS users to cause
a denial of service (QEMU crash) and possibly execute arbitrary
code via crafted legacy mode packets."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/01/26 19:19:15 sthen Exp $
d3 2
a4 1
ONLY_FOR_ARCHS=	amd64 i386 mips64 mips64el powerpc sparc sparc64
d8 1
a8 2
DISTNAME=	qemu-1.0
REVISION=	1
d10 1
a10 2
MASTER_SITES=	http://wiki.qemu.org/download/ \
		http://comstyle.com/source/
@


1.83
log
@Update README to use cd51.iso, also talk about SPARC emulation now
that it's usable. OK Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2012/01/11 02:21:09 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.82
log
@tidy Makefile, from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2011/12/12 10:56:56 sthen Exp $
d8 1
@


1.81
log
@Update to QEMU 1.0, from Brad.

- disable the BSD userland emulation support for now, it's not widely useful yet
- workaround for incorrect time_t type assumption, from stsp@@

N.B. As of QEMU 1.0 the i386 target has been renamed from qemu to
qemu-system-i386, you will need to change scripts/command lines as necessary.

ok stsp@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/12/02 14:36:14 espie Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=		amd64 i386 mips64 mips64el powerpc sparc sparc64
d5 1
a5 1
COMMENT =		multi system emulator
d7 4
a10 4
DISTNAME=		qemu-1.0
CATEGORIES =		emulators
MASTER_SITES =		http://wiki.qemu.org/download/ \
			http://comstyle.com/source/
d12 1
a12 1
HOMEPAGE =		http://www.qemu.org/
d14 1
a14 1
MAINTAINER=		Brad Smith <brad@@comstyle.com>
d17 16
a32 16
PERMIT_PACKAGE_CDROM =	Yes
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	Yes

WANTLIB=		GL SDL X11 c curl glib-2.0 gthread-2.0 jpeg m ncurses \
			png pthread util z

MODULES=		devel/gettext \
			lang/python
BUILD_DEPENDS =		textproc/texi2html
LIB_DEPENDS=		devel/glib2 \
			devel/sdl \
			graphics/jpeg \
			graphics/png \
			net/curl
d34 1
a34 1
MODPY_RUNDEP=		No
d36 2
a37 2
MAKE_ENV =		V=1
FAKE_FLAGS =		sysconfdir=${PREFIX}/share/examples
d39 2
a40 2
EXTRA_CFLAGS=		-I${LOCALBASE}/include -I${X11BASE}/include
EXTRA_LDFLAGS=		-L${LOCALBASE}/lib -L${X11BASE}/lib
d43 1
a43 1
EXTRA_CFLAGS+=		-Wno-redundant-decls
d45 1
a45 1
EXTRA_CFLAGS+=		-DTIME_MAX=INT_MAX
d47 1
a47 1
VMEM_WARNING =		Yes
d49 20
a68 20
USE_GMAKE =		Yes
CONFIGURE_STYLE =	simple
CONFIGURE_ARGS =	--prefix=${PREFIX} \
			--sysconfdir=${SYSCONFDIR} \
			--mandir=${PREFIX}/man \
			--python=${MODPY_BIN} \
			--smbd=${LOCALBASE}/libexec/smbd \
			--cc="${CC}" \
			--host-cc="${CC}" \
			--extra-cflags="${EXTRA_CFLAGS}" \
			--extra-ldflags="${EXTRA_LDFLAGS}" \
			--audio-drv-list=sdl \
			--disable-bsd-user \
			--disable-libiscsi \
			--disable-smartcard-nss \
			--disable-spice \
			--disable-uuid \
			--disable-usb-redir \
			--disable-vnc-sasl \
			--disable-vnc-tls
d71 1
a71 1
CONFIGURE_ARGS +=	--sparc_cpu=v7
d74 2
a75 2
FLAVORS=		debug
FLAVOR ?=
d78 1
a78 1
CONFIGURE_ARGS +=	--enable-debug
d81 1
a81 1
NO_REGRESS=		Yes
@


1.80
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/11/07 21:37:30 sthen Exp $
d3 1
a3 2
# no success building on other archs yet
ONLY_FOR_ARCHS =	amd64 arm i386 mips64 mips64el powerpc sparc sparc64
d7 1
a7 2
DISTNAME =		qemu-0.15.1
REVISION=		1
d10 1
a10 1
			${MASTER_SITE_SAVANNAH:=qemu/}
d22 2
a23 1
WANTLIB =		c curl jpeg m ncurses ossaudio png pthread util z
d25 2
d28 3
a30 1
LIB_DEPENDS =		graphics/jpeg \
d34 2
d39 7
a45 2
EXTRA_CFLAGS=		-I${LOCALBASE}/include
EXTRA_LDFLAGS=		-L${LOCALBASE}/lib
d54 1
d60 3
a62 1
			--disable-guest-agent \
d74 1
a74 8
.if ${MACHINE_ARCH:Mamd64} || ${MACHINE_ARCH:Mi386} || ${MACHINE_ARCH:Msparc64}
PKG_ARGS +=		-Dbsduser=1
.else
CONFIGURE_ARGS +=	--disable-bsd-user
PKG_ARGS +=		-Dbsduser=0
.endif

FLAVORS =		debug no_x11
a76 14
.if ${FLAVOR:Mno_x11}
CONFIGURE_ARGS +=	--disable-sdl --disable-opengl
.else
WANTLIB +=		GL SDL X11

LIB_DEPENDS +=		devel/sdl

EXTRA_CFLAGS +=		-I${X11BASE}/include
EXTRA_LDFLAGS +=	-L${X11BASE}/lib
.endif

# until the system headers are fixed properly.
EXTRA_CFLAGS +=		-Wno-redundant-decls

d81 1
a81 5
# Currently, the regression tests are utterly broken.
REGRESS_TARGET =	test

pre-configure:
	@@perl -pi -e 's|/dev/dsp|/dev/audio|g' ${WRKSRC}/audio/ossaudio.c
@


1.79
log
@Drop a patch which originated from FreeBSD which we don't need.
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/10/19 08:12:06 sthen Exp $
d71 1
a71 1
.if ${FLAVOR:L:Mno_x11}
d85 1
a85 1
.if ${FLAVOR:L:Mdebug}
@


1.78
log
@e1000 driver fix; don't set the capabilities list bit in the status register
as the capabiliities pointer is not defined. From Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/10/17 20:27:17 sthen Exp $
d9 1
a9 1
REVISION=		0
@


1.77
log
@update to QEMU 0.15.1, from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/09/21 09:02:30 sthen Exp $
d9 1
@


1.76
log
@Backport some upstream qemu fixes, from Brad (maintainer) -

- Fix install(1) usage to be compatible with OpenBSD's install(1).
- Allow overriding the location of Samba's smbd,

From Brad

- Remove PROVIDE_HIDDEN and ONLY_IF_{RO,RW} from linker scripts to make
  them work with older binutils versions. Fixes *-bsd-user build on
  OpenBSD 4.9 which ships binutils 2.15.

From Gerd Hoffmann <kraxel at redhat dot com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/08/28 11:21:05 sthen Exp $
d8 1
a8 2
DISTNAME =		qemu-0.15.0
REVISION =		1
@


1.75
log
@qemu e1000 driver: use MII status reg for link up/down. From upstream via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/08/17 08:50:25 sthen Exp $
d9 1
a9 1
REVISION =		0
d44 1
a92 1
	@@${SUBST_CMD} ${WRKSRC}/net.h ${WRKSRC}/qemu-options.hx
@


1.74
log
@set CONFIGURE_ARGS for sparc; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/08/16 21:24:42 sthen Exp $
d9 1
@


1.73
log
@update to qemu 0.15.0, from Brad (maintainer)
- handle qemu-old/kqemu removal in PLISTs, allowing seamless updates to
the new version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/07/19 06:05:42 ajacoutot Exp $
d54 4
@


1.72
log
@SECURITY: CVE-2011-2527 qemu: when started as root, extra groups are not
dropped correctly.

from Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/06/15 21:13:33 sthen Exp $
d4 1
a4 2
ONLY_FOR_ARCHS =	amd64 i386 mips64 mips64el powerpc sparc64
VMEM_WARNING =		yes
d8 1
a8 2
DISTNAME =		qemu-0.14.1
REVISION =		4
d10 2
a11 1
MASTER_SITES =		${MASTER_SITE_SAVANNAH:=qemu/}
d23 1
a23 1
WANTLIB =		c jpeg m ncurses ossaudio png pthread util z
d27 2
a28 1
			graphics/png
d33 5
d45 5
a49 4
			--extra-cflags="-I${LOCALBASE}/include \
					-I${LOCALBASE}/include/libpng" \
			--extra-ldflags=-L${LOCALBASE}/lib \
			--disable-curl \
d51 1
d55 3
a57 1
.if ${MACHINE_ARCH:Mpowerpc} || ${MACHINE_ARCH:Mmips64*}
d59 1
a59 3
PKG_ARGS+=	-Dbsduser=0
.else
PKG_ARGS+=	-Dbsduser=1
d66 1
a66 1
CONFIGURE_ARGS +=	--disable-sdl
d68 2
d72 2
a73 1
WANTLIB +=		SDL X11
d75 3
@


1.71
log
@Build the bsd-user emulation binaries; they're still early work-in-progress
upstream, but this brings the port closer to a default qemu build. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/06/10 21:47:54 sthen Exp $
d10 1
a10 1
REVISION =		3
@


1.70
log
@Re-enable curses support and stop disabling GUEST_BASE support. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/06/02 13:41:38 ajacoutot Exp $
d10 1
a10 1
REVISION =		2
a42 1
			--disable-bsd-user \
d48 7
d61 1
a61 1
LIB_DEPENDS +=    	devel/sdl
@


1.69
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/05/25 07:43:48 sthen Exp $
d10 1
a10 1
REVISION =		1
d18 1
a18 1
# GPLv2/LGPLv2/BSD
d24 1
a24 1
WANTLIB =		c jpeg m ossaudio png pthread util z
a44 2
			--disable-curses \
			--disable-guest-base \
@


1.68
log
@- support powerpc/mips64/mips64el, from Brad, tests me/phessler

- make VMEM_WARNING unconditional, some files won't compile without
increasing datasize limits, at least on powerpc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/05/23 23:43:28 sthen Exp $
d10 1
a10 1
REVISION =		0
@


1.67
log
@qemu Makefile/patch changes, from Brad.

- Sort the arch list.
- Remove some local patching from the configure script
  which is not necessary.
- Remove debug option from linker command line when not using --enable-debug.
- Recognize arm / hppa OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/05/12 22:19:24 sthen Exp $
d4 2
a5 1
ONLY_FOR_ARCHS =	amd64 i386 sparc64
a62 1
VMEM_WARNING =	yes
@


1.66
log
@update to 0.14.1, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/05/09 15:54:56 ajacoutot Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	i386 amd64 sparc64
d9 1
d60 1
@


1.65
log
@Tweak README after recent vnd(4) changes.

ok todd@@ (maintainer qemu-old)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/03/25 01:05:15 sthen Exp $
d8 1
a8 2
DISTNAME =		qemu-0.14.0
REVISION =		2
d28 1
a28 1
MAKE_ENV +=		V=1
@


1.64
log
@sort CONFIGURE_ARGS, from Brad (taking maintainer), discussed with fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/03/20 20:40:52 sthen Exp $
d9 1
a9 1
REVISION =		1
@


1.63
log
@this doesn't need groff, also don't use @@ to hide the commands in the
install target. from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/03/12 23:28:39 sthen Exp $
d9 1
a9 1
REVISION=		0
d11 1
d15 2
a24 2
MASTER_SITES =		${MASTER_SITE_SAVANNAH:=qemu/}

d42 2
a43 2
			--disable-vnc-tls \
			--disable-vnc-sasl \
a44 2
			--disable-curl \
			--disable-bsd-user \
d46 3
a48 1
			--disable-uuid
@


1.62
log
@update qemu to 0.14.0, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/01/26 13:51:43 sthen Exp $
d9 1
a31 2
USE_GROFF =		Yes

d72 2
a73 2
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/qemu
	@@${INSTALL_SCRIPT} ${FILESDIR}/qemu-ifup \
d75 1
a75 1
	@@${INSTALL_SCRIPT} ${FILESDIR}/qemu-ifdown \
@


1.61
log
@- fix multicast virtual networks; setsockopt(SOL_IP, IP_MULTICAST_LOOP)
takes a u_char, not int as in the 0.13.0 qemu code. from mcbride@@ with
name change by fgsch@@.

- fix copy-and-pasto in the sample qemu-ifdown script resulting in
tun interface not being removed and errors when qemu closes. from me.

ok mcbride@@(first part) fgsch@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/01/19 16:22:31 sthen Exp $
d8 1
a8 2
DISTNAME =		qemu-0.13.0
REVISION =		1
d37 2
@


1.61.2.1
log
@SECURITY fix for CVE-2011-2527 qemu: when started as root, extra groups are not
dropped correctly.

OK sthen@@ jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/01/26 13:51:43 sthen Exp $
d9 1
a9 1
REVISION =		2
@


1.60
log
@minor README changes;

- give examples for qemu-system-x86_64 (for 64-bit client OS)
- use 4.9 in examples

ok phessler@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/11/22 11:32:01 fgsch Exp $
d9 1
a9 1
REVISION =		0
@


1.59
log
@Update to qemu 0.13.0. fmt README and sync with reality.
with input and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/11/15 23:22:08 espie Exp $
d9 1
@


1.58
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/11/12 14:43:12 jasper Exp $
d8 1
a8 2
DISTNAME =		qemu-0.12.5
REVISION =		1
d19 1
a19 1
WANTLIB =		c m ossaudio pthread util z
d24 5
d31 1
a31 1
USE_GROFF =	Yes
d35 5
d41 1
d46 1
a46 1
			--extra-cflags=-fno-stack-protector
d54 1
a54 1
LIB_DEPENDS =    	devel/sdl
d59 1
@


1.57
log
@- switch to pkg-readmes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/10/28 22:34:47 sthen Exp $
d24 1
a24 1
BUILD_DEPENDS =		::textproc/texi2html
d44 1
a44 1
LIB_DEPENDS =    	::devel/sdl
@


1.56
log
@remove bogus conflict markers and bump, problem noticed by henning@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/10/24 21:17:48 ajacoutot Exp $
d9 1
a9 1
REVISION =		0
a59 1
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/qemu
a60 4
	@@${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
	    ${PREFIX}/share/doc/qemu/README.OpenBSD
	@@chown ${SHAREOWN}:${SHAREGRP} \
	    ${PREFIX}/share/doc/qemu/README.OpenBSD
@


1.55
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/10/18 18:00:17 espie Exp $
d9 1
@


1.54
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/08/26 13:44:29 sthen Exp $
a44 1
USE_X11 =		Yes
@


1.53
log
@update qemu to 0.12.5; testing/feedback from Daniel Dickman, Dawe, lum@@,
commit requested by fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/07/23 00:27:09 fgsch Exp $
d26 1
@


1.52
log
@Remove special treatment for i386 now that it switched to gcc4. While I'm
here use REVISION. sthen@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/06/24 09:48:06 sthen Exp $
d8 1
a8 2
DISTNAME =		qemu-0.12.4
REVISION =		0
d42 1
a42 1
LIB_DEPENDS =    	SDL::devel/sdl
d45 1
a45 1
WANTLIB +=		X11
@


1.51
log
@remove i386 from ONLY_FOR_ARCHS unless the compiler is gcc4,
various reports of not being usable with i386/gcc3 and it segfaults
at startup for me.

ok fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/06/17 09:57:55 fgsch Exp $
d4 1
a4 5
ONLY_FOR_ARCHS =	amd64 sparc64
.include <bsd.own.mk>
.if ${COMPILER_VERSION:L:Mgcc4}
ONLY_FOR_ARCHS +=	i386
.endif
d9 1
a9 1
PKGNAME =		${DISTNAME}p0
@


1.50
log
@Add debug flavor.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/06/08 01:08:20 fgsch Exp $
d4 5
a8 1
ONLY_FOR_ARCHS =	amd64 i386 sparc64
@


1.49
log
@- update to 0.12.4
- add sparc64 to the list of supported archs
- remove cache-utils.c patch for now
- regen patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/05/28 00:04:17 fgsch Exp $
d9 1
d37 1
a37 1
FLAVORS =		no_x11
d47 3
@


1.48
log
@Remove todd@@ as maintainer. todd@@ ok'd.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/05/27 18:49:41 fgsch Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	amd64 i386
d8 1
a8 1
DISTNAME =		qemu-0.12.3
@


1.47
log
@disable ppc. it's not supported atm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/05/27 17:55:05 fgsch Exp $
a11 2

MAINTAINER =		Todd T. Fries <todd@@openbsd.org>
@


1.46
log
@Update to qemu 0.12.3. Work in progress so not linked to the tree yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/10/27 13:07:49 jasper Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	amd64 i386 powerpc
d38 1
a38 1
FLAVORS =		no_x11 O0
a47 4
.endif

.if ${FLAVOR:L:Mo0}
CFLAGS+=		-O0
@


1.45
log
@
Change qemu scripts after brconfig(4) has gone in the attic,
fix homepage and master_site (upstream does not provide old versions
anymore).
ok todd@@ (Maintainer)
@
text
@d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 powerpc
d6 1
a6 1
COMMENT=		multi system emulator
d8 2
a9 3
DISTNAME=		qemu-0.9.1
PKGNAME=		${DISTNAME}p12
CATEGORIES=		emulators
d11 1
a11 1
HOMEPAGE=		http://www.nongnu.org/qemu/
d13 1
a13 1
MAINTAINER=		Todd T. Fries <todd@@openbsd.org>
d16 21
a36 13
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=		${MASTER_SITE_OPENBSD}

BUILD_DEPENDS=		::textproc/texi2html
USE_GMAKE=		Yes
WANTLIB=		c m ossaudio z
CONFIGURE_STYLE=	simple
CONFIGURE_ARGS+=	--prefix=${PREFIX} \
			--disable-vnc-tls
d38 2
a39 9
# Currently, the regression tests are utterly broken.
REGRESS_TARGET=		test test2

.if ${MACHINE_ARCH} == "amd64"
PATCH_LIST=     patch-* misc-*
.endif

FLAVORS=		no_x11
FLAVOR?=
d42 1
a42 2
CONFIGURE_ARGS+=	--disable-gfx-check \
			--disable-sdl
d44 5
a48 1
LIB_DEPENDS=    	SDL::devel/sdl
d50 2
a51 2
USE_X11=		Yes
WANTLIB+=		pthread
d54 3
d58 2
a59 1
	@@${SUBST_CMD} ${WRKSRC}/vl.c ${WRKSRC}/qemu-doc.texi
d62 1
a63 3
	@@${INSTALL_SCRIPT} ${FILESDIR}/qemu-ifup ${PREFIX}/share/examples/qemu
	@@${INSTALL_SCRIPT} ${FILESDIR}/qemu-ifdown ${PREFIX}/share/examples/qemu
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/qemu
d65 7
a71 2
		${PREFIX}/share/doc/qemu/README.OpenBSD
	@@chown ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/doc/qemu/README.OpenBSD
@


1.44
log
@- adapt patch now that we have ENOTSUP defined
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2009/06/02 22:47:52 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p11
d12 1
a12 1
HOMEPAGE=		http://bellard.org/qemu/
d22 1
a22 1
MASTER_SITES=		${HOMEPAGE}
@


1.43
log
@- normal users cannot bind to < 1024, so suggest ports > 1024
- bump
from Rodolfo Gouveia rgouveia at cosmico dot net
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/04/20 20:45:47 sthen Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p10
@


1.42
log
@autoselect the most likely interface for qemu-ifup to bridge with by
looking at the default IPv4 route. still overridable in the environment
as before. ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2009/02/11 23:39:30 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p9
@


1.41
log
@o more clarity in README based on feedback
o we are now at 4.5(beta)
bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/12/11 09:47:06 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p8
@


1.40
log
@- change the way README.OpenBSD is installed so that the .bak file does
not end up in PLIST; INSTALL_SCRIPT was wrong too since we don't need to
install this file as executable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/12/11 09:17:33 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p7
@


1.39
log
@- fix typo in SUBST_CMD to make this port build
- SYSCONFDIR is always /etc for base system files (i.e. /etc/hostname.if...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/12/10 23:30:33 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p6
d59 3
a61 2
	@@${INSTALL_SCRIPT} ${FILESDIR}/README.OpenBSD ${PREFIX}/share/doc/qemu
	@@${SUBST_CMD} ${PREFIX}/share/doc/qemu/README.OpenBSD
@


1.38
log
@*** empty log message ***
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/09/22 15:17:54 mpf Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p5
d52 1
a52 1
	@@${SUBST_CMD} ${WRKSRC}/vl.c ${WRKSRc}/qemu-doc.texi
@


1.37
log
@Fix -net tap,ifname=/dev/tunX support.
Bump PKGNAME.
OK todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2008/07/24 19:00:11 martynas Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p4
d52 1
a52 1
	@@perl -pi -e "s,!!LOCALBASE!!,${LOCALBASE},g;" ${WRKSRC}/vl.c ${WRKSRC}/qemu-doc.texi
d60 1
@


1.36
log
@remove.  math has isnormal, isgreater, isgreaterequal, isless,
islessequal, isunordered.  tested by me and sthen@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2008/06/19 05:51:17 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p3
@


1.35
log
@add usb host support, from jcs@@
bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2008/06/18 00:44:19 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p2
@


1.34
log
@update homepage, from naddy@@; bump pkgname (also bumped kqemu)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2008/05/12 07:47:22 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
@


1.33
log
@- s/LOCALBASE/PREFIX

maintainer timeout
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2008/04/28 22:52:38 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d12 1
a12 1
HOMEPAGE=		http://fabrice.bellard.free.fr/qemu/
@


1.32
log
@o update to 0.9.1, lots from brad@@
o see http://qemu.org/changelog.html for details
o see README.OpenBSD for an intro to qemu on OpenBSD
o disable broken arm host support for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2008/04/01 08:51:18 ajacoutot Exp $
d9 1
@


1.31
log
@- add license markers
no pkg change

"go for it" todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2008/03/31 20:59:21 okan Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 arm i386 powerpc
d8 1
a8 2
DISTNAME=		qemu-0.9.0
PKGNAME=		${DISTNAME}p5
d15 1
a15 1
# GPLv2 - LGPL
d25 4
a28 2
WANTLIB=		m z ossaudio c
CONFIGURE_STYLE=	gnu
a39 2
CONFIGURE_ENV+=		USE_KQEMU=yes

d44 1
a44 2
LIB_DEPENDS=    	SDL::devel/sdl \
			aa::graphics/aalib
d47 1
a47 1
WANTLIB+=		X11 Xext pthread usbhid
d56 3
@


1.30
log
@build with kqemu by default

ok todd@@ merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/03/31 20:36:35 todd Exp $
d16 1
@


1.29
log
@cleanup stray comment
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/03/31 20:16:52 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p4
d35 1
a35 1
FLAVORS=		no_x11 kqemu
d38 1
a38 3
.if ${FLAVOR:L:Mkqemu}
CONFIGURE_ENV+= USE_KQEMU=yes
.endif
@


1.28
log
@give encrypted image support a chance to work, from viq at viq dot ath dot cx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/03/31 14:25:59 todd Exp $
a38 1
#CONFIGURE_ARGS+=	--enable-kqemu
@


1.27
log
@fix -smb option, from viq at viq dot ath dot cx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/03/31 06:49:27 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p3
@


1.26
log
@fix timers, from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/01/21 20:40:20 sthen Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p2
d53 3
@


1.25
log
@Document -kernel-kqemu and -no-kqemu in qemu(1).

ok todd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/01/19 23:53:58 todd Exp $
d9 1
a9 1
PKGNAME=		qemu-0.9.0p1
@


1.24
log
@kqemu flavor, tested by several in an unflavored earlier version
prodded by marco@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/01/09 10:17:54 todd Exp $
d9 1
a9 1
PKGNAME=		qemu-0.9.0p0
@


1.23
log
@o clean up output of qemu-ifup
o s/qcow/qcow2/ as that is now the recommended default
o bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/09/16 00:45:13 merdely Exp $
d35 1
a35 1
FLAVORS=		no_x11
d37 5
@


1.22
log
@Removed surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/05/01 12:55:13 todd Exp $
d9 1
@


1.21
log
@update to 0.9.0, thanks to all who gave feedback
see http://qemu.org/changelog.html for details
new in OpenBSD, support for raw block devices
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2007/02/19 22:59:33 kili Exp $
d6 1
a6 1
COMMENT=		"multi system emulator"
@


1.20
log
@
Fix build on powerpc.
Remove extra util from WANTLIB (spotted by ajacoutot), and bump the
PKGNAME.
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/02/19 12:43:38 robert Exp $
d8 1
a8 2
DISTNAME=		qemu-0.8.2
PKGNAME=		${DISTNAME}p4
a22 1
LIB_DEPENDS=    	SDL::devel/sdl
d24 1
a24 2
USE_X11=		Yes
WANTLIB=		m z ossaudio X11 Xext usbhid pthread c
d32 14
@


1.19
log
@- allow building on armish
- fix the build on the arm architecture by moving the cpu_get_real_ticks()
function for non-optimized to the correct place
- add correct REGRESS_TARGET even if the regressions tests are utterly broken
- bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/01/17 20:35:09 mpf Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p3
d27 1
a27 1
WANTLIB=		m z ossaudio X11 Xext usbhid util pthread c
@


1.18
log
@Fix busy loop on closed stdin in -nograhpic mode.
From qemu cvs vl.c -r 1.218.
bump PKGNAME

OK todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/01/10 20:20:06 mpf Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p2
d29 3
@


1.17
log
@Call setsockopt(2) IP_MULTICAST_LOOP w/ correct optlen.
This fixes UDP multicast socket networking.
bump PKGNAME

OK sturm@@, todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/12/22 17:31:45 todd Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
@


1.16
log
@update qemu to 0.8.2, from brad@@

See http://fabrice.bellard.free.fr/qemu/changelog.html for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/06/08 14:33:38 todd Exp $
d9 1
@


1.15
log
@update to 0.8.1, see http://qemu.org/changelog.html for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/04/10 21:10:05 todd Exp $
d7 2
a8 1
DISTNAME=		qemu-0.8.1
@


1.14
log
@fixes from various
o permit auto tun# allocation
o do not destroy trunk# to permit multiple qemu sessions to use the same trunk#
  in the sample qemu-ifup script
o fix building on zaurus
o detect case where no tun# is available, Nicholas Marriott
o bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/02/17 12:43:32 todd Exp $
d7 1
a7 2
DISTNAME=		qemu-0.8.0
PKGNAME=		${DISTNAME}p4
@


1.13
log
@qemu-ifup should be executable, reported by djm@@, thanks
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/02/16 16:27:44 todd Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p3
@


1.12
log
@from Andrew Dalgleish openbsd at ajd dot net dot au
o sample qemu-ifup
o permit -net tap,ifname=/dev/tun1 to actually use tun1
from Reyk Floeter reyk at openbsd dot org
o re-enable pcnet

bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/02/08 13:44:17 todd Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p2
@


1.11
log
@o from the qemu mailing list, prompted by brad@@, improve userland
  networking througput since otherwise the emulated NICs didn't
  have a way of indicating the receive queue is full and would
  drop packets.
o bump PKGNAME
o inttypes.h made irrelevent a few chunks of patches, so use it instead
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/01/04 21:47:39 brad Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
d32 4
@


1.10
log
@in ONLY_FOR_ARCHS change macppc & zaurus to powerpc & arm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/12/27 07:56:14 todd Exp $
d8 1
@


1.9
log
@update to 0.8.0, see qemu.org for full ChangeLog
for OpenBSD, amd64 simulation on i386 appars to work ok now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/11/25 04:12:54 todd Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 macppc zaurus
@


1.8
log
@back out a couple #define'd c99 math functions now that OpenBSD
implements them natively
bump PKGNAME, reminded by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/11/05 12:11:05 todd Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=		amd64 i386 macppc
d7 1
a7 2
DISTNAME=		qemu-0.7.2
PKGNAME=		${DISTNAME}p2
@


1.7
log
@permit -nographic to work instead of crash on parallel devices
investigation/suggested fix by Thomas Dettbarn, dettus at dettus dot net
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/11/03 18:41:55 fgsch Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
@


1.6
log
@workaround to make qemu happy on amd64 until a better and more correct
fix is applied.
sturm@@ ok, maintainer ok a previous more generic approach.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/10/25 03:25:44 todd Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
@


1.5
log
@update to qemu 0.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/09/26 20:47:56 todd Exp $
d3 2
a4 1
ONLY_FOR_ARCHS=	i386 macppc # no success building on other archs yet
d8 1
a8 1
PKGNAME=		qemu-0.7.2
d28 4
@


1.4
log
@o add patch to permit osx x86 guest to run
o fix Makefile.target to add -fno-stack-protector for op.o for all archs,
  noted, debugged, and tested by Antoine Jacoutot on macppc, thanks!
o bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/08/11 01:15:17 todd Exp $
d6 2
a7 2
DISTNAME=		qemu-0.7.1
PKGNAME=		qemu-0.7.1p1
@


1.3
log
@update to 0.7.1 (http://qemu.org/changelog.html)
add pcnet nic support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/03/08 16:29:43 todd Exp $
d7 1
@


1.2
log
@texi2html is a build depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/03/07 16:41:28 todd Exp $
d6 1
a6 1
DISTNAME=		qemu-20050227
d18 1
a18 1
MASTER_SITES=		ftp://ftp.FreeDaemonHosting.com/pub/users/todd/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d20 1
@


1.1.1.1
log
@Import qemu snapshot from 2005-02-27

QEMU is a generic and open source processor emulator 
which achieves a good emulation speed by using dynamic translation.

QEMU has two operating modes:

* Full system emulation. In this mode, QEMU emulates 
a full system (for example a PC), including a processor and 
various peripherials. It can be used to launch different
Operating Systems without rebooting the PC or to debug system code.

* User mode emulation (Linux host only). In this mode, 

.. many thanks for feedback from many people, and for Lars Hansson and 
   Michael Schmidt for posting early work on the port of qemu to ports@@

For now, only for macppc and i386, as these are currently the only archs
that have reported success building qemu.
QEMU can launch Linux processes compiled for one CPU on another CPU. 
@
text
@@
