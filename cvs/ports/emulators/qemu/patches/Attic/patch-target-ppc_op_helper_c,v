head	1.6;
access;
symbols
	OPENBSD_4_7:1.5.0.8
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.6
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.4
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.4.0.4
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.4
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	todd_20050307:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2010.05.27.17.55.05;	author fgsch;	state dead;
branches;
next	1.5;

1.5
date	2008.04.28.22.52.38;	author todd;	state Exp;
branches;
next	1.4;

1.4
date	2007.05.01.12.55.14;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	2006.06.08.14.33.38;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.11.01.15.17;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.07.16.41.28;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.07.16.41.28;	author todd;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to qemu 0.12.3. Work in progress so not linked to the tree yet.
@
text
@$OpenBSD: patch-target-ppc_op_helper_c,v 1.5 2008/04/28 22:52:38 todd Exp $
--- target-ppc/op_helper.c.orig	Sun Jan  6 14:38:45 2008
+++ target-ppc/op_helper.c	Tue Apr  1 01:33:40 2008
@@@@ -17,6 +17,7 @@@@
  * License along with this library; if not, write to the Free Software
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
+#include <math.h>
 #include "exec.h"
 #include "host-utils.h"
 
@


1.5
log
@o update to 0.9.1, lots from brad@@
o see http://qemu.org/changelog.html for details
o see README.OpenBSD for an intro to qemu on OpenBSD
o disable broken arm host support for now
@
text
@d1 1
a1 1
$OpenBSD: patch-target-ppc_op_helper_c,v 1.4 2007/05/01 12:55:14 todd Exp $
@


1.4
log
@update to 0.9.0, thanks to all who gave feedback
see http://qemu.org/changelog.html for details
new in OpenBSD, support for raw block devices
@
text
@d1 3
a3 3
$OpenBSD$
--- target-ppc/op_helper.c.orig	Mon Feb  5 17:01:54 2007
+++ target-ppc/op_helper.c	Sat Mar 10 16:39:41 2007
d10 1
a11 1
 #define MEMSUFFIX _raw
@


1.3
log
@update to 0.8.1, see http://qemu.org/changelog.html for details
@
text
@d2 2
a3 2
--- target-ppc/op_helper.c.orig	Fri May  5 22:29:25 2006
+++ target-ppc/op_helper.c	Fri May  5 22:29:34 2006
@


1.2
log
@update to 0.7.1 (http://qemu.org/changelog.html)
add pcnet nic support
@
text
@d1 5
a5 4
$OpenBSD: patch-target-ppc_op_helper_c,v 1.1.1.1 2005/03/07 16:41:28 todd Exp $
--- target-ppc/op_helper.c.orig	Sun Jul 24 13:52:08 2005
+++ target-ppc/op_helper.c	Tue Aug  9 22:34:49 2005
@@@@ -18,6 +18,7 @@@@
d8 1
a8 2
 #include <math.h>
+#include <float.h>
@


1.1
log
@Initial revision
@
text
@d1 9
a9 39
$OpenBSD$
--- target-ppc/op_helper.c.orig	Tue Feb 15 17:06:19 2005
+++ target-ppc/op_helper.c	Sun Feb 27 15:47:13 2005
@@@@ -226,6 +226,18 @@@@ void do_store_fpscr (uint32_t mask)
     /* Set rounding mode */
     switch (env->fpscr[0] & 0x3) {
     case 0:
+#ifdef _BSD
+	fpsetround(FP_RN);
+	break;
+    case 1:
+	fpsetround(FP_RZ);
+	break;
+    case 2:
+	fpsetround(FP_RP);
+	break;
+    case 3:
+	fpsetround(FP_RM);
+#else
         /* Best approximation (round to nearest) */
         fesetround(FE_TONEAREST);
         break;
@@@@ -240,6 +252,7 @@@@ void do_store_fpscr (uint32_t mask)
     case 3:
         /* Round toward -infinite */
         fesetround(FE_DOWNWARD);
+#endif
         break;
     }
 }
@@@@ -267,9 +280,14 @@@@ void do_fctiwz (void)
         double d;
         uint64_t i;
     } *p = (void *)&FT1;
+#ifdef _BSD
+    int cround = fpgetround();
+    fpsetround(FP_RZ);
+#else
     int cround = fegetround();
d11 1
a11 17
     fesetround(FE_TOWARDZERO);
+#endif
     if (FT0 > (double)0x7FFFFFFF)
         p->i = 0x7FFFFFFFULL << 32;
     else if (FT0 < -(double)0x80000000)
@@@@ -278,7 +296,11 @@@@ void do_fctiwz (void)
         p->i = 0;
     p->i |= (uint32_t)FT0;
     FT0 = p->d;
+#ifdef _BSD
+    fpsetround(cround);
+#else
     fesetround(cround);
+#endif
 }
 
 void do_fnmadd (void)
@


1.1.1.1
log
@Import qemu snapshot from 2005-02-27

QEMU is a generic and open source processor emulator 
which achieves a good emulation speed by using dynamic translation.

QEMU has two operating modes:

* Full system emulation. In this mode, QEMU emulates 
a full system (for example a PC), including a processor and 
various peripherials. It can be used to launch different
Operating Systems without rebooting the PC or to debug system code.

* User mode emulation (Linux host only). In this mode, 

.. many thanks for feedback from many people, and for Lars Hansson and 
   Michael Schmidt for posting early work on the port of qemu to ports@@

For now, only for macppc and i386, as these are currently the only archs
that have reported success building qemu.
QEMU can launch Linux processes compiled for one CPU on another CPU. 
@
text
@@
