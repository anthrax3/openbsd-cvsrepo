head	1.2;
access;
symbols
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.03.14.19.46.12;	author ajacoutot;	state dead;
branches;
next	1.1;
commitid	ZypCecrzOxeE8g1E;

1.1
date	2015.11.03.16.25.24;	author sthen;	state Exp;
branches;
next	;
commitid	XsrNATn66OYkkEpO;


desc
@@


1.2
log
@Major update to qemu-2.5.0.
Please direct any runtime fallout to Brad.

from Brad (maintainer)
@
text
@$OpenBSD: patch-trace-events,v 1.1 2015/11/03 16:25:24 sthen Exp $

trace: remove malloc tracing

The malloc vtable is not supported anymore in glib, because it broke
when constructors called g_malloc.  Remove tracing of g_malloc,
g_realloc and g_free calls.

Note that, for systemtap users, glib also provides tracepoints
glib.mem_alloc, glib.mem_free, glib.mem_realloc, glib.slice_alloc
and glib.slice_free.

--- trace-events.orig	Sun Oct 25 21:33:15 2015
+++ trace-events	Sun Oct 25 21:33:29 2015
@@@@ -571,9 +571,6 @@@@ scsi_request_sense(int target, int lun, int tag) "targ
 vm_state_notify(int running, int reason) "running %d reason %d"
 load_file(const char *name, const char *path) "name %s location %s"
 runstate_set(int new_state) "new state %d"
-g_malloc(size_t size, void *ptr) "size %zu ptr %p"
-g_realloc(void *ptr, size_t size, void *newptr) "ptr %p size %zu newptr %p"
-g_free(void *ptr) "ptr %p"
 system_wakeup_request(int reason) "reason=%d"
 qemu_system_shutdown_request(void) ""
 qemu_system_powerdown_request(void) ""
@


1.1
log
@Remove malloc tracing from QEMU, this was removed in newer glib and results
in annoying messages:

(process:23283): GLib-WARNING **: gmem.c:482: custom memory allocation vtable not supported

From Brad.
@
text
@d1 1
a1 1
$OpenBSD$
@

