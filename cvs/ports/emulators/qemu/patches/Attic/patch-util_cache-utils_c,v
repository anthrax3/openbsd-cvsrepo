head	1.3;
access;
symbols
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.08.14.01.05.03;	author brad;	state dead;
branches;
next	1.2;
commitid	ejiIL7GjEJGAPEiv;

1.2
date	2014.04.25.20.59.43;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.20.00.46.01;	author brad;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to QEMU 2.1.0

ok bcallah@@ rpe@@
@
text
@$OpenBSD: patch-util_cache-utils_c,v 1.2 2014/04/25 20:59:43 brad Exp $
--- util/cache-utils.c.orig	Thu Mar 13 23:10:11 2014
+++ util/cache-utils.c	Sun Mar 16 09:06:40 2014
@@@@ -81,6 +81,12 @@@@ void qemu_cache_utils_init(void)
     qemu_cache_conf.dcache_bsize = cacheline;
     qemu_cache_conf.icache_bsize = cacheline;
 }
+#elif defined(__OpenBSD__)
+void qemu_cache_utils_init(void)
+{
+    qemu_cache_conf.dcache_bsize = 32;
+    qemu_cache_conf.icache_bsize = 32;
+}
 #endif
 
 #endif /* _ARCH_PPC */
@


1.2
log
@Update to QEMU 2.0.0

ok bcallah@@ gsoares@@ rpe@@
@
text
@d1 1
a1 1
$OpenBSD: patch-util_cache-utils_c,v 1.1 2013/03/20 00:46:01 brad Exp $
@


1.1
log
@Upgrade to QEMU 1.4.0. Enable the VNC TLS support.

Tested by todd@@ kirby@@ sthen@@ and OK kirby@@ sthen@@
@
text
@d1 6
a6 6
$OpenBSD$
--- util/cache-utils.c.orig	Sat Feb  2 07:47:18 2013
+++ util/cache-utils.c	Sat Feb  2 07:49:46 2013
@@@@ -55,9 +55,16 @@@@ static void ppc_init_cacheline_sizes(void)
         qemu_cache_conf.icache_bsize = cacheline;
     }
a7 3
-#endif
 
-#if defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
d9 1
a9 2
+
+static void ppc_init_cacheline_sizes(void)
d14 3
a16 5
+
+#elif defined(__FreeBSD__) || defined(__FreeBSD_kernel__)
 #include <errno.h>
 #include <stdio.h>
 #include <stdlib.h>
@

