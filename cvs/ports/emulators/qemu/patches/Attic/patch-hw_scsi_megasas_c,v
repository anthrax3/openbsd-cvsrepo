head	1.2;
access;
symbols
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2016.03.14.19.46.12;	author ajacoutot;	state dead;
branches;
next	1.1;
commitid	ZypCecrzOxeE8g1E;

1.1
date	2015.12.22.06.43.05;	author ajacoutot;	state Exp;
branches
	1.1.2.1;
next	;
commitid	JiptCpdEMaCRSsRY;

1.1.2.1
date	2015.12.24.09.44.14;	author jasper;	state Exp;
branches;
next	;
commitid	FaciMaYoEtARAEEx;


desc
@@


1.2
log
@Major update to qemu-2.5.0.
Please direct any runtime fallout to Brad.

from Brad (maintainer)
@
text
@$OpenBSD: patch-hw_scsi_megasas_c,v 1.1 2015/12/22 06:43:05 ajacoutot Exp $

scsi: initialise info object with appropriate size

While processing controller 'CTRL_GET_INFO' command, the routine
'megasas_ctrl_get_info' overflows the '&info' object size. Use its
appropriate size to null initialise it.

CVE-2015-8613

--- hw/scsi/megasas.c.orig	Mon Dec 21 20:22:57 2015
+++ hw/scsi/megasas.c	Mon Dec 21 20:23:52 2015
@@@@ -721,7 +721,7 @@@@ static int megasas_ctrl_get_info(MegasasState *s, Mega
     BusChild *kid;
     int num_pd_disks = 0;
 
-    memset(&info, 0x0, cmd->iov_size);
+    memset(&info, 0x0, dcmd_size);
     if (cmd->iov_size < dcmd_size) {
         trace_megasas_dcmd_invalid_xfer_len(cmd->index, cmd->iov_size,
                                             dcmd_size);
@


1.1
log
@SECURITY fix for CVE-2015-8613; from Brad (maintainer)
While here, fix path to smbd(8); reported by mlarkin@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@Security fixes for CVE-2015-7549, CVE-2015-8504, CVE-2015-8558, CVE-2015-8567,
CVE-2015-8568, CVE-2015-8613
@
text
@d1 1
a1 1
$OpenBSD: patch-hw_scsi_megasas_c,v 1.1 2015/12/22 06:43:05 ajacoutot Exp $
@

