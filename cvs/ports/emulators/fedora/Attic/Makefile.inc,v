head	1.12;
access;
symbols
	OPENBSD_5_9:1.11.0.10
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.12
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.8
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.6
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.4
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.5.0.8
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.6
	OPENBSD_5_0:1.5.0.4
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.10
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.8
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.6
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.4
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	sturm_20061018:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2016.03.01.16.09.38;	author naddy;	state dead;
branches;
next	1.11;
commitid	o7dgXeDn7iTsv39S;

1.11
date	2013.03.11.12.27.54;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.11.11.06.04;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2012.10.22.11.41.56;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.10.22.10.09.11;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.10.11.12.00.46;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2012.10.11.10.16.29;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.15.23.22.08;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.06.07.08.41.38;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.10.04.10.56.20;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.14.16.30.27;	author jsg;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.17.22.33.44;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.17.22.33.44;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Linux emulation is gone, remove the Fedora userland and the last
port depending on it
@
text
@# $OpenBSD: Makefile.inc,v 1.11 2013/03/11 12:27:54 sthen Exp $

# Note that PLIST with shared libs requires the following cleaning:
# perl -pi -e "s,^\@@lib ,," pkg/PLIST

ONLY_FOR_ARCHS=	i386
SHARED_ONLY=	Yes

FEDORA_V ?=	10
FEDORADIR ?=	${PREFIX}/emul/fedora

CATEGORIES=	emulators

PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITE_FEDORA=	http://archives.fedoraproject.org/pub/archive/fedora/linux/releases/${FEDORA_V}/Fedora/i386/os/Packages/
MASTER_SITE_FEDORA0=	http://archives.fedoraproject.org/pub/archive/fedora/linux/updates/${FEDORA_V}/i386/

MASTER_SITES ?=		${MASTER_SITE_FEDORA}
MASTER_SITES0 ?=	${MASTER_SITE_FEDORA0}

DISTFILES ?=	${RPMS}
RPMDIR ?=	${FULLDISTDIR}

DIST_SUBDIR=	rpm
EXTRACT_ONLY=

BUILD_DEPENDS+=	rpm-*|rpm2cpio-*:converters/rpm2cpio \
		archivers/gcpio

NO_BUILD=	Yes
NO_TEST=	Yes

.if !target(do-install)
do-install:
	${INSTALL_DATA_DIR} ${FEDORADIR}
.for rpm in ${RPMS:S/:0//}
	cd ${FEDORADIR}; rpm2cpio ${RPMDIR}/${rpm} | ${LOCALBASE}/bin/gcpio -id
.endfor

# get rid of some unnecessary files and directories
.for D in ${REMOVE_DIRS}
	rm -rf ${FEDORADIR}/${D}
.endfor
.for F in ${REMOVE_FILES}
	rm -f ${FEDORADIR}/${F}
.endfor
.for D in ${ADD_DIRS}
	mkdir -p ${FEDORADIR}/${D}
.endfor

# better safe than sorry
	find ${FEDORADIR} -perm -4000 | xargs -r chmod u-s
	find ${FEDORADIR} \( -user 37 -o -user 5041 -o -group 37 \) -print | \
		xargs -r chown -h root:wheel
.endif
@


1.11
log
@PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.10 2013/03/11 11:06:04 espie Exp $
@


1.10
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.9 2012/10/22 11:41:56 ajacoutot Exp $
a14 2
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.9
log
@Allow overriding FEDORADIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.8 2012/10/22 10:09:11 ajacoutot Exp $
a15 1
PERMIT_DISTFILES_CDROM=	Yes
d34 1
a34 1
NO_REGRESS=	Yes
@


1.8
log
@Allow overriding FEDORA_V.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.7 2012/10/11 12:00:46 ajacoutot Exp $
d10 1
a35 2

FEDORADIR=	${PREFIX}/emul/fedora
@


1.7
log
@Factorize do-install and several variables.
Fix MASTER_SITES and add the Fedora "updates" repository.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.6 2012/10/11 10:16:29 robert Exp $
d9 1
a9 1
FEDORA_V=	10
@


1.6
log
@update fedora_base and fedora_cups to fedora 10 packages to allow us to run up-to-date opera
@
text
@d1 4
a4 1
# $OpenBSD: Makefile.inc,v 1.5 2010/11/15 23:22:08 espie Exp $
d9 2
d18 2
a19 4
MASTER_SITE_FEDORA=	http://critical.ch/distfiles/rpm/i386/fedora/ \
			http://energy.critical.ch/distfiles/rpm/i386/fedora/ \
			http://snow.critical.ch/distfiles/rpm/i386/fedora/ \
			http://www.bluestop.org/distfiles/rpm/i386/fedora/
d21 5
a25 1
MASTER_SITE_FEDORA0=	http://ftp-stud.hs-esslingen.de/pub/Mirrors/archive.fedoraproject.org/fedora/linux/releases/
d37 24
@


1.5
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.4 2010/06/07 08:41:38 ajacoutot Exp $
d13 6
a18 2
MASTER_SITE_FEDORA=http://archive.fedoraproject.org/pub/archive/fedora/linux/core/ \
	ftp://archive.kernel.org/fedora-archive/core/
d23 2
a24 1
BUILD_DEPENDS+=	rpm-*|rpm2cpio-*:converters/rpm2cpio
@


1.4
log
@We can use either rpm or rpm2cpio to build this, so allow both.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.3 2009/10/04 10:56:20 sturm Exp $
d19 1
a19 1
BUILD_DEPENDS+=	:rpm-*|rpm2cpio-*:converters/rpm2cpio
@


1.3
log
@switch BUILD_DEPENDS from rpm to rpm2cpio
more lightweight, less chance of conflict
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.2 2009/06/14 16:30:27 jsg Exp $
d19 1
a19 1
BUILD_DEPENDS+=	::converters/rpm2cpio
@


1.2
log
@Replace the contents of MASTER_SITE_FEDORA with sites that
still carry FC4 and updates as we require.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.1.1.1 2006/10/17 22:33:44 sturm Exp $
d19 1
a19 1
BUILD_DEPENDS+=	:rpm->=3.0.6p1:misc/rpm
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.9 2006/01/18 05:15:48 steven Exp $
d13 2
a14 2
MASTER_SITE_FEDORA=http://download.fedora.redhat.com/pub/fedora/linux/core/ \
	ftp://ftp.funet.fi/pub/mirrors/ftp.redhat.com/pub/fedora/linux/core/
@


1.1.1.1
log
@Initial import of linux libraries based on fedora core 4.

This is the last version of fedora core supporting the old linuxthreads,
for the newer threading library we need some kernel support first.
@
text
@@
