head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.22
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.20
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.18
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.14
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.16
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.12
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.10
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.8
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.6
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.4
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.12
	OPENBSD_5_0:1.4.0.10
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.8
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.6
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.4
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2012.07.10.00.07.44;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.06.10.33.23;	author form;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.04.22.13.30;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.10.21.01.15;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2006.07.10.17.55.44;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to simh 3.9.0, from Brad, tested by me and william@@
@
text
@$OpenBSD: patch-VAX_vax780_sbi_c,v 1.4 2009/03/06 10:33:23 form Exp $
--- VAX/vax780_sbi.c.orig	Mon Mar 19 18:08:46 2012
+++ VAX/vax780_sbi.c	Wed Jun 13 06:39:29 2012
@@@@ -35,6 +35,10 @@@@
 
 #include "vax_defs.h"
 
+#ifndef PATH_VMB_EXE
+#define PATH_VMB_EXE   "vmb.exe"
+#endif
+
 /* 11/780 specific IPRs */
 
 /* Writeable control store */
@@@@ -686,10 +690,10 @@@@ t_stat cpu_boot (int32 unitno, DEVICE *dptr)
 {
 t_stat r;
 
-printf ("Loading boot code from vmb.exe\n");
+printf ("Loading boot code from %s\n", PATH_VMB_EXE);
 if (sim_log)
-    fprintf (sim_log, "Loading boot code from vmb.exe\n");
-r = load_cmd (0, "-O vmb.exe 200");
+    fprintf (sim_log, "Loading boot code from %s\n", PATH_VMB_EXE);
+r = load_cmd (0, "-O " PATH_VMB_EXE " 200");
 if (r != SCPE_OK)
     return r;
 SP = PC = 512;
@


1.4
log
@update to 3.8.1
@
text
@d1 4
a4 4
$OpenBSD: patch-VAX_vax780_sbi_c,v 1.3 2008/11/04 22:13:30 sthen Exp $
--- VAX/vax780_sbi.c.orig	Tue Nov 18 10:37:06 2008
+++ VAX/vax780_sbi.c	Tue Feb 10 22:38:53 2009
@@@@ -34,6 +34,10 @@@@
d15 1
a15 1
@@@@ -661,10 +665,10 @@@@ t_stat cpu_boot (int32 unitno, DEVICE *dptr)
d21 2
a22 2
 if (sim_log) fprintf (sim_log, 
-    "Loading boot code from vmb.exe\n");
d24 1
a24 1
+    "Loading boot code from %s\n", PATH_VMB_EXE);
@


1.3
log
@update to 3.8.0, based on a diff from Sergey Prysiazhnyi.
tweaked by Giovanni Bechis and myself.
@
text
@d1 3
a3 3
$OpenBSD: patch-VAX_vax780_sbi_c,v 1.2 2007/05/10 21:01:15 matthieu Exp $
--- VAX/vax780_sbi.c.orig	Sat May 31 15:26:34 2008
+++ VAX/vax780_sbi.c	Tue Nov  4 22:06:49 2008
d9 1
a9 1
+#define PATH_VMB_EXE	"vmb.exe"
d15 1
a15 1
@@@@ -643,10 +647,10 @@@@ t_stat cpu_boot (int32 unitno, DEVICE *dptr)
d26 2
a27 1
 if (r != SCPE_OK) return r;
a28 1
 return SCPE_OK;
@


1.2
log
@Update to 3.7. todd@@ sent me an almost identical patch. Tested and ok kili@@
@
text
@d1 4
a4 4
$OpenBSD: patch-VAX_vax780_sbi_c,v 1.1 2006/07/10 17:55:44 fgsch Exp $
--- VAX/vax780_sbi.c.orig	Thu May 11 07:53:04 2006
+++ VAX/vax780_sbi.c	Tue May  8 21:33:31 2007
@@@@ -32,6 +32,10 @@@@
@


1.1
log
@o install bootrom code for VAX780
o use installed bootrom code on VAX780 emulator
o adds support for 16-line DHU/DHV interfaces (vh). Checked on
  RSX-11M-PLUS 4.0 w/ 4 DHx multiplexers.
from Oleg Safiullin (form at pdp-11 dot org dot ru)
@
text
@d1 3
a3 3
$OpenBSD$
--- VAX/vax780_sbi.c.orig	Thu May 11 08:53:04 2006
+++ VAX/vax780_sbi.c	Sat Jul  8 19:18:19 2006
d15 1
a15 1
@@@@ -643,10 +647,10 @@@@ t_stat cpu_boot (int32 unitno, DEVICE *d
@

