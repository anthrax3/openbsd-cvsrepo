head	1.16;
access;
symbols
	OPENBSD_6_1:1.16.0.18
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.16.0.16
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.12
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.14
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.16.0.10
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.16.0.8
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.16.0.6
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.4
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.15.0.2
	OPENBSD_5_2_BASE:1.15
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.6
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.4
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.12.0.6
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.4
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.2
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.11.0.6
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.11.0.4
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.9.0.6
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.7.0.8
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.7.0.6
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.4
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5;
locks; strict;
comment	@# @;


1.16
date	2012.08.19.21.20.52;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2012.07.10.00.07.44;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2011.12.24.12.57.10;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2010.03.21.09.26.49;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2008.11.04.22.13.30;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2007.07.24.20.45.41;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2007.05.10.21.01.15;	author matthieu;	state Exp;
branches;
next	1.9;

1.9
date	2005.12.21.01.32.29;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2005.06.19.03.47.25;	author david;	state Exp;
branches;
next	1.7;

1.7
date	2003.06.24.22.24.39;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2003.05.28.16.31.07;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	2003.02.02.20.24.47;	author fgsch;	state Exp;
branches;
next	1.4;

1.4
date	2002.11.28.16.41.12;	author fgsch;	state dead;
branches;
next	1.3;

1.3
date	2002.10.29.23.55.01;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.04.10.56.39;	author form;	state dead;
branches;
next	1.1;

1.1
date	2002.02.04.05.10.29;	author form;	state Exp;
branches;
next	;


desc
@@


1.16
log
@- remove now unneeded -lpthread/-pthread patches
@
text
@$OpenBSD: patch-makefile,v 1.15 2012/07/10 00:07:44 sthen Exp $
--- makefile.orig	Mon Apr 23 16:28:04 2012
+++ makefile	Fri Jul  6 20:09:32 2012
@@@@ -300,7 +300,7 @@@@ ifneq ($(DEBUG),)
   CFLAGS_O = -O0
   BUILD_FEATURES = - debugging support
 else
-  CFLAGS_O = -O2
+  CFLAGS_O = $(CFLAGS)
   LDFLAGS_O = 
   GCC_MAJOR_VERSION = $(firstword $(subst  ., ,$(GCC_VERSION)))
   ifneq (3,$(GCC_MAJOR_VERSION))
@


1.15
log
@update to simh 3.9.0, from Brad, tested by me and william@@
@
text
@d1 1
a1 1
$OpenBSD: patch-makefile,v 1.14 2011/12/24 12:57:10 sthen Exp $
a3 9
@@@@ -145,7 +145,7 @@@@ ifeq ($(WIN32),)  #*nix Environments (&& cygwin)
       ifeq (,$(NOASYNCH))
         OS_CCDEFS += -DSIM_ASYNCH_IO 
       endif
-      OS_LDFLAGS += -lpthread
+      OS_LDFLAGS += -pthread
       $(info using libpthread: $(call find_lib,pthread) $(call find_include,pthread))
     endif
   endif
@


1.14
log
@- Fix up the compiler flags and enable the extended file support
to allow for more sane hard drive sizes.  From Brad.

- Honour CC.
@
text
@d1 21
a21 207
$OpenBSD: patch-makefile,v 1.13 2010/03/21 09:26:49 jasper Exp $
--- makefile.orig	Wed Nov 19 21:53:48 2008
+++ makefile	Sun Nov 20 03:46:22 2011
@@@@ -1,32 +1,6 @@@@
-#
-# CC Command
-#
-ifeq ($(WIN32),)
-  #Unix Environments
-  ifneq (,$(findstring solaris,$(OSTYPE)))
-    OS_CCDEFS = -lm -lsocket -lnsl -lrt -lpthread -D_GNU_SOURCE
-  else
-    ifneq (,$(findstring darwin,$(OSTYPE)))
-      OS_CCDEFS = -D_GNU_SOURCE
-    else
-      OS_CCDEFS = -lrt -lm -D_GNU_SOURCE
-    endif
-  endif
-  CC = gcc -std=c99 -U__STRICT_ANSI__ -g $(OS_CCDEFS) -I .
-  ifeq ($(USE_NETWORK),)
-  else
-    NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include /usr/local/lib/libpcap.a
-  endif
-else
-  #Win32 Environments
-  LDFLAGS = -lm -lwsock32 -lwinmm
-  CC = gcc -std=c99 -U__STRICT_ANSI__ -O2 -I.
-  EXE = .exe
-  ifeq ($(USE_NETWORK),)
-  else
-    NETWORK_OPT = -DUSE_NETWORK -lwpcap -lpacket
-  endif
-endif
+OS_CCDEFS = -D_GNU_SOURCE
+CFLAGS += $(OS_CCDEFS) -std=c99 -U__STRICT_ANSI__ -g -lm -I .
+NETWORK_OPT = -DUSE_NETWORK -lpcap
 
 #
 # Common Libraries
@@@@ -262,11 +236,7 @@@@ ALL = pdp1 pdp4 pdp7 pdp8 pdp9 pdp15 pdp11 pdp10 \
 all : ${ALL}
 
 clean :
-ifeq ($(WIN32),)
 	${RM} ${BIN}*
-else
-	if exist BIN\*.exe del /q BIN\*.exe
-endif
 
 #
 # Individual builds
@@@@ -274,129 +244,129 @@@@ endif
 pdp1 : ${BIN}pdp1${EXE}
 
 ${BIN}pdp1${EXE} : ${PDP1} ${SIM}
-	${CC} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@ ${LDFLAGS}
 
 pdp4 : ${BIN}pdp4${EXE}
 
 ${BIN}pdp4${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@ ${LDFLAGS}
 
 pdp7 : ${BIN}pdp7${EXE}
 
 ${BIN}pdp7${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@ ${LDFLAGS}
 
 pdp8 : ${BIN}pdp8${EXE}
 
 ${BIN}pdp8${EXE} : ${PDP8} ${SIM}
-	${CC} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@ ${LDFLAGS}
 
 pdp9 : ${BIN}pdp9${EXE}
 
 ${BIN}pdp9${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@ ${LDFLAGS}
 
 pdp15 : ${BIN}pdp15${EXE}
 
 ${BIN}pdp15${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@ ${LDFLAGS}
 
 pdp10 : ${BIN}pdp10${EXE}
 
 ${BIN}pdp10${EXE} : ${PDP10} ${SIM}
-	${CC} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@ ${LDFLAGS}
 
 pdp11 : ${BIN}pdp11${EXE}
 
 ${BIN}pdp11${EXE} : ${PDP11} ${SIM}
-	${CC} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@ ${LDFLAGS}
 
 vax : ${BIN}vax${EXE}
 
 ${BIN}vax${EXE} : ${VAX} ${SIM}
-	${CC} ${VAX} ${SIM} ${VAX_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${VAX} ${SIM} ${VAX_OPT} -o $@@ ${LDFLAGS}
 
 vax780 : ${BIN}vax780${EXE}
 
 ${BIN}vax780${EXE} : ${VAX780} ${SIM}
-	${CC} ${VAX780} ${SIM} ${VAX780_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${VAX780} ${SIM} ${VAX780_OPT} -o $@@ ${LDFLAGS}
 
 nova : ${BIN}nova${EXE}
 
 ${BIN}nova${EXE} : ${NOVA} ${SIM}
-	${CC} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@ ${LDFLAGS}
 
 eclipse : ${BIN}eclipse${EXE}
 
 ${BIN}eclipse${EXE} : ${ECLIPSE} ${SIM}
-	${CC} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@ ${LDFLAGS}
 
 h316 : ${BIN}h316${EXE}
 
 ${BIN}h316${EXE} : ${H316} ${SIM}
-	${CC} ${H316} ${SIM} ${H316_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${H316} ${SIM} ${H316_OPT} -o $@@ ${LDFLAGS}
 
 hp2100 : ${BIN}hp2100${EXE}
 
 ${BIN}hp2100${EXE} : ${HP2100} ${SIM}
-	${CC} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@ ${LDFLAGS}
 
 i1401 : ${BIN}i1401${EXE}
 
 ${BIN}i1401${EXE} : ${I1401} ${SIM}
-	${CC} ${I1401} ${SIM} ${I1401_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${I1401} ${SIM} ${I1401_OPT} -o $@@ ${LDFLAGS}
 
 i1620 : ${BIN}i1620${EXE}
 
 ${BIN}i1620${EXE} : ${I1620} ${SIM}
-	${CC} ${I1620} ${SIM} ${I1620_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${I1620} ${SIM} ${I1620_OPT} -o $@@ ${LDFLAGS}
 
 i7094 : ${BIN}i7094${EXE}
 
 ${BIN}i7094${EXE} : ${I7094} ${SIM}
-	${CC} ${I7094} ${SIM} ${I7094_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${I7094} ${SIM} ${I7094_OPT} -o $@@ ${LDFLAGS}
 
 ibm1130 : ${BIN}ibm1130${EXE}
 
 ${BIN}ibm1130${EXE} : ${IBM1130}
-	${CC} ${IBM1130} ${SIM} ${IBM1130_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${IBM1130} ${SIM} ${IBM1130_OPT} -o $@@ ${LDFLAGS}
 
 s3 : ${BIN}s3${EXE}
 
 ${BIN}s3${EXE} : ${S3} ${SIM}
-	${CC} ${S3} ${SIM} ${S3_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${S3} ${SIM} ${S3_OPT} -o $@@ ${LDFLAGS}
 
 altair : ${BIN}altair${EXE}
 
 ${BIN}altair${EXE} : ${ALTAIR} ${SIM}
-	${CC} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@ ${LDFLAGS}
 
 altairz80 : ${BIN}altairz80${EXE}
 
 ${BIN}altairz80${EXE} : ${ALTAIRZ80} ${SIM} 
-	${CC} ${ALTAIRZ80} ${SIM} ${ALTAIRZ80_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ALTAIRZ80} ${SIM} ${ALTAIRZ80_OPT} -o $@@ ${LDFLAGS}
 
 gri : ${BIN}gri${EXE}
 
 ${BIN}gri${EXE} : ${GRI} ${SIM}
-	${CC} ${GRI} ${SIM} ${GRI_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${GRI} ${SIM} ${GRI_OPT} -o $@@ ${LDFLAGS}
 
 lgp : ${BIN}lgp${EXE}
 
 ${BIN}lgp${EXE} : ${LGP} ${SIM}
-	${CC} ${LGP} ${SIM} ${LGP_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${LGP} ${SIM} ${LGP_OPT} -o $@@ ${LDFLAGS}
 
 id16 : ${BIN}id16${EXE}
 
 ${BIN}id16${EXE} : ${ID16} ${SIM}
-	${CC} ${ID16} ${SIM} ${ID16_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ID16} ${SIM} ${ID16_OPT} -o $@@ ${LDFLAGS}
 
 id32 : ${BIN}id32${EXE}
 
 ${BIN}id32${EXE} : ${ID32} ${SIM}
-	${CC} ${ID32} ${SIM} ${ID32_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ID32} ${SIM} ${ID32_OPT} -o $@@ ${LDFLAGS}
 
 sds : ${BIN}sds${EXE}
 
 ${BIN}sds${EXE} : ${SDS} ${SIM}
-	${CC} ${SDS} ${SIM} ${SDS_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${SDS} ${SIM} ${SDS_OPT} -o $@@ ${LDFLAGS}
@


1.13
log
@- tweak master sites
- set license version
- honor cflags
- regen patches

maintainer timed-out.
@
text
@d1 1
a1 1
$OpenBSD: patch-makefile,v 1.12 2008/11/04 22:13:30 sthen Exp $
d3 1
a3 1
+++ makefile	Tue Jan 26 13:21:07 2010
d35 2
a36 2
+CFLAGS += $(OS_CCDEFS) -std=c99 -O2 -U__STRICT_ANSI__ -g -lm -I .
+NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include -lpcap
@


1.12
log
@update to 3.8.0, based on a diff from Sergey Prysiazhnyi.
tweaked by Giovanni Bechis and myself.
@
text
@d1 3
a3 3
$OpenBSD: patch-makefile,v 1.11 2007/07/24 20:45:41 kili Exp $
--- makefile.orig	Fri Jun  6 15:00:46 2008
+++ makefile	Tue Nov  4 22:09:36 2008
d34 2
a35 2
+OS_CCDEFS = -D_GNU_SOURCE $(CFLAGS)
+CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm  $(OS_CCDEFS) -I .
d40 1
a40 1
@@@@ -259,11 +233,7 @@@@ ALL = pdp1 pdp4 pdp7 pdp8 pdp9 pdp15 pdp11 pdp10 \
d52 156
@


1.11
log
@
Update to 3.7.2.

ok, fgsch (maintainer), kurt@@
@
text
@d1 7
a7 7
$OpenBSD: patch-makefile,v 1.10 2007/05/10 21:01:15 matthieu Exp $
--- makefile.orig	Tue Feb  6 19:24:54 2007
+++ makefile	Sun Jul 22 20:02:53 2007
@@@@ -3,32 +3,9 @@@@
 # Note: -O2 is sometimes broken in GCC when setjump/longjump is being
 # used. Try -O2 only with released simulators.
 #
d9 15
a23 12
-#Unix Environments
-ifeq ($(OSTYPE),solaris)
-OS_CCDEFS = -lsocket -lnsl -lpthread -D_GNU_SOURCE
-else
-OS_CCDEFS = -D_GNU_SOURCE
-endif
-ifeq ($(OSTYPE),macos)
-CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm -lrt $(OS_CCDEFS) -I .
-else
-CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm $(OS_CCDEFS) -I .
-endif
-ifeq ($(USE_NETWORK),)
d25 8
a32 11
-NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include /usr/local/lib/libpcap.a
-endif
-else
-#Win32 Environments
-LDFLAGS = -lm -lwsock32 -lwinmm
-CC = gcc -std=c99 -U__STRICT_ANSI__ -O0 -I.
-EXE = .exe
-ifeq ($(USE_NETWORK),)
-else
-NETWORK_OPT = -DUSE_NETWORK -lwpcap -lpacket
-endif
d40 1
a40 1
@@@@ -248,11 +225,7 @@@@ ALL = pdp1 pdp4 pdp7 pdp8 pdp9 pdp15 pdp11 pdp10 \
@


1.10
log
@Update to 3.7. todd@@ sent me an almost identical patch. Tested and ok kili@@
@
text
@d1 4
a4 4
$OpenBSD: patch-makefile,v 1.9 2005/12/21 01:32:29 fgsch Exp $
--- makefile.orig	Fri Feb  2 07:12:20 2007
+++ makefile	Tue May  8 21:43:20 2007
@@@@ -3,28 +3,28 @@@@
d9 1
a9 2
+#ifeq ($(WIN32),)
 #Unix Environments
d15 1
d17 3
d25 1
a25 12
+#ifeq ($(OSTYPE),solaris)
+#OS_CCDEFS = -lsocket -lnsl -lpthread -D_GNU_SOURCE
+#else
+OS_CCDEFS = -D_GNU_SOURCE $(CFLAGS)
+#endif
+CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm  $(OS_CCDEFS) -I .
+#ifeq ($(USE_NETWORK),)
+#else
+NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include -lpcap
+#endif
+#else
 #Win32 Environments
d34 3
a36 8
+#LDFLAGS = -lm -lwsock32 -lwinmm
+#CC = gcc -std=c99 -U__STRICT_ANSI__ -O0 -I.
+#EXE = .exe
+#ifeq ($(USE_NETWORK),)
+#else
+#NETWORK_OPT = -DUSE_NETWORK -lwpcap -lpacket
+#endif
+#endif
d40 1
a40 1
@@@@ -244,11 +244,7 @@@@ ALL = pdp1 pdp4 pdp7 pdp8 pdp9 pdp15 pdp11 pdp10 \
@


1.9
log
@remove unneeded patches; pcap now includes these functions.
@
text
@d1 4
a4 4
$OpenBSD: patch-makefile,v 1.8 2005/06/19 03:47:25 david Exp $
--- makefile.orig	Thu Apr  7 16:56:36 2005
+++ makefile	Sat Jun 18 03:49:17 2005
@@@@ -3,28 +3,29 @@@@
d16 1
a16 6
+#ifeq ($(OSTYPE),solaris)
+#OS_CCDEFS = -lsocket -lnsl -lpthread -D_GNU_SOURCE
+#else
+OS_CCDEFS = -D_GNU_SOURCE ${CFLAGS}
+#endif
 CC = gcc -std=c99 -O2 -U__STRICT_ANSI__ -g -lm $(OS_CCDEFS) -I .
d22 6
d30 1
a30 2
+#NETWORK_OPT = -DUSE_NETWORK -isystem /usr/local/include /usr/local/lib/libpcap.a
+NETWORK_OPT = -DUSE_NETWORK -DNEED_PCAP_SENDPACKET -lpcap
d34 1
a34 1
-LDFLAGS = -lm -lwsock32
d42 1
a42 1
+#LDFLAGS = -lm -lwsock32
a50 1
 
d52 2
a53 1
@@@@ -253,11 +254,11 @@@@ ALL = ${BIN}pdp1${EXE} ${BIN}pdp4${EXE} 
d58 1
a58 2
+#ifeq ($(WIN32),)
 	${RM} ${ALL}
d62 1
a62 3
+#else
+#	if exist BIN\*.exe del /q BIN\*.exe
+#endif
a64 1
 #
@


1.8
log
@update to simh-3.4-0; ok fgsch@@ kettenis@@
adds extended memory support for VAX allowing up to 512MB of memory
@
text
@d1 1
a1 1
$OpenBSD$
d30 1
a30 1
+NETWORK_OPT = -DUSE_NETWORK -DNEED_PCAP_SENDPACKET -DDONT_USE_PCAP_FINDALLDEVS -lpcap
@


1.7
log
@correct library order (by putting -lm in LDFLAGS rather than CFLAGS)
now can link on static arches; ok maintainer fgsch
@
text
@d1 4
a4 4
$OpenBSD: patch-makefile,v 1.6 2003/05/28 16:31:07 fgsch Exp $
--- makefile.orig	Sun Mar  2 15:44:14 2003
+++ makefile	Sat Jun 14 05:07:07 2003
@@@@ -3,24 +3,26 @@@@
d11 11
a21 3
-CC = gcc -O2 -lm -I . 
+#CC = gcc -O2 -lm -I . 
 #CC = gcc -O2 -g -lm -I . 
d24 3
a26 2
+CFLAGS += -I.
+LDFLAGS += -lm
d29 2
a30 3
 NETWORK_OPT = -DUSE_NETWORK -lpcap
-endif
-else
d35 1
a35 1
-CC = gcc -O0 -I.
d43 1
a43 1
+#CC = gcc -O0 -I.
d53 1
a53 1
@@@@ -223,117 +225,117 @@@@ ALL = ${BIN}pdp1${EXE} ${BIN}pdp4${EXE} 
a68 129
 ${BIN}pdp1${EXE} : ${PDP1} ${SIM}
-	${CC} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp4${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp7${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp8${EXE} : ${PDP8} ${SIM}
-	${CC} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp9${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp15${EXE} : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp10${EXE} : ${PDP10} ${SIM}
-	${CC} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}pdp11${EXE} : ${PDP11} ${SIM}
-	${CC} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}vax${EXE} : ${VAX} ${SIM}
-	${CC} ${VAX} ${SIM} ${VAX_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${VAX} ${SIM} ${VAX_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}nova${EXE} : ${NOVA} ${SIM}
-	${CC} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}eclipse${EXE} : ${ECLIPSE} ${SIM}
-	${CC} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}h316${EXE} : ${H316} ${SIM}
-	${CC} ${H316} ${SIM} ${H316_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${H316} ${SIM} ${H316_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}hp2100${EXE} : ${HP2100} ${SIM}
-	${CC} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}i1401${EXE} : ${I1401} ${SIM}
-	${CC} ${I1401} ${SIM} ${I1401_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${I1401} ${SIM} ${I1401_OPT} -o $@@ ${LDFLAGS}
 
 
 
 ${BIN}i1620${EXE} : ${I1620} ${SIM}
-	${CC} ${I1620} ${SIM} ${I1620_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${I1620} ${SIM} ${I1620_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}ibm1130${EXE} : ${IBM1130}
-	${CC} ${IBM1130} ${SIM} ${IBM1130_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${IBM1130} ${SIM} ${IBM1130_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}s3${EXE} : ${S3} ${SIM}
-	${CC} ${S3} ${SIM} ${S3_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${S3} ${SIM} ${S3_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}altair${EXE} : ${ALTAIR} ${SIM}
-	${CC} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}altairz80${EXE} : ${ALTAIRZ80} ${SIM} 
-	${CC} ${ALTAIRZ80} ${SIM} ${ALTAIRZ80_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ALTAIRZ80} ${SIM} ${ALTAIRZ80_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}gri${EXE} : ${GRI} ${SIM}
-	${CC} ${GRI} ${SIM} ${GRI_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${GRI} ${SIM} ${GRI_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}id16${EXE} : ${ID16} ${SIM}
-	${CC} ${ID16} ${SIM} ${ID16_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ID16} ${SIM} ${ID16_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}id32${EXE} : ${ID32} ${SIM}
-	${CC} ${ID32} ${SIM} ${ID32_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${ID32} ${SIM} ${ID32_OPT} -o $@@ ${LDFLAGS}
 
 
 ${BIN}sds${EXE} : ${SDS} ${SIM}
-	${CC} ${SDS} ${SIM} ${SDS_OPT} -o $@@ ${LDFLAGS}
+	${CC} ${CFLAGS} ${SDS} ${SIM} ${SDS_OPT} -o $@@ ${LDFLAGS}
 
 
@


1.6
log
@update to simh 2.10-4.
@
text
@d1 1
a1 1
$OpenBSD: patch-makefile,v 1.5 2003/02/02 20:24:47 fgsch Exp $
d3 2
a4 2
+++ makefile	Wed May 28 13:24:55 2003
@@@@ -3,24 +3,25 @@@@
d16 2
a17 1
+CFLAGS += -lm -I.
d45 1
a45 1
@@@@ -223,117 +224,117 @@@@ ALL = ${BIN}pdp1${EXE} ${BIN}pdp4${EXE} 
@


1.5
log
@oops, i missed this.
@
text
@d1 3
a3 3
$OpenBSD$
--- makefile.orig	Mon Jan 13 20:36:40 2003
+++ makefile	Sun Feb  2 17:04:30 2003
d44 14
a57 1
@@@@ -225,108 +226,108 @@@@ all : ${BIN}pdp1${EXE} ${BIN}pdp4${EXE} 
@


1.4
log
@Update to simh 2.10-1; interdata and sds simulators are not included.
@
text
@d1 4
a4 4
$OpenBSD: patch-makefile,v 1.3 2002/10/29 23:55:01 fgsch Exp $
--- makefile.orig	Sat Oct 26 08:09:58 2002
+++ makefile	Tue Oct 29 20:00:44 2002
@@@@ -3,8 +3,9 @@@@
d8 8
a15 3
-CC = gcc -O2 -lm -I .
+#CC = gcc -O2 -lm -I .
 #CC = gcc -O2 -g -lm -I .
d17 24
d43 7
a50 16
@@@@ -62,7 +63,7 @@@@ PDP11 = ${PDP11D}pdp11_fp.c ${PDP11D}pdp
 	${PDP11D}pdp11_tm.c ${PDP11D}pdp11_ts.c ${PDP11D}pdp11_io.c \
 	${PDP11D}pdp11_rq.c ${PDP11D}pdp11_tq.c ${PDP11D}pdp11_pclk.c \
 	${PDP11D}pdp11_ry.c ${PDP11D}pdp11_pt.c ${PDP11D}pdp11_hk.c \
-	${PDP11D}pdp11_xq.c
+	${PDP11D}pdp11_xq.c sim_ether.c
 PDP11_OPT = -I ${PDP11D}
 
 
@@@@ -73,7 +74,7 @@@@ VAX = ${VAXD}vax_cpu1.c ${VAXD}vax_cpu.c
 	${VAXD}vax_sysdev.c \
 	${PDP11D}pdp11_rl.c ${PDP11D}pdp11_rq.c ${PDP11D}pdp11_ts.c \
 	${PDP11D}pdp11_dz.c ${PDP11D}pdp11_lp.c ${PDP11D}pdp11_tq.c \
-	${PDP11D}pdp11_pt.c ${PDP11D}pdp11_xq.c
+	${PDP11D}pdp11_pt.c ${PDP11D}pdp11_xq.c sim_ether.c
 VAX_OPT = -I ${VAXD} -I ${PDP11D} -DUSE_INT64
d53 4
a56 6
@@@@ -208,106 +209,106 @@@@ all : ${BIN}pdp1 ${BIN}pdp4 ${BIN}pdp7 $
 # Individual builds
 #
 ${BIN}pdp1 : ${PDP1} ${SIM}
-	${CC} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@
d59 3
a62 3
 ${BIN}pdp4 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@
d65 3
a68 3
 ${BIN}pdp7 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@
d71 3
a74 3
 ${BIN}pdp8 : ${PDP8} ${SIM}
-	${CC} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@
d77 3
a80 3
 ${BIN}pdp9 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@
d83 3
a86 3
 ${BIN}pdp15 : ${PDP18B} ${SIM}
-	${CC} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@
d89 3
a92 3
 ${BIN}pdp10 : ${PDP10} ${SIM}
-	${CC} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@
d95 3
a98 3
 ${BIN}pdp11 : ${PDP11} ${SIM}
-	${CC} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@ -lpcap
d101 3
a104 3
 ${BIN}vax : ${VAX} ${SIM}
-	${CC} ${VAX} ${SIM} ${VAX_OPT} -o $@@
+	${CC} ${CFLAGS} ${VAX} ${SIM} ${VAX_OPT} -o $@@ -lpcap
d107 3
a110 3
 ${BIN}nova : ${NOVA} ${SIM}
-	${CC} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@
+	${CC} ${CFLAGS} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@
d113 3
a116 3
 ${BIN}eclipse : ${ECLIPSE} ${SIM}
-	${CC} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@
+	${CC} ${CFLAGS} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@
d119 3
a122 3
 ${BIN}h316 : ${H316} ${SIM}
-	${CC} ${H316} ${SIM} ${H316_OPT} -o $@@
+	${CC} ${CFLAGS} ${H316} ${SIM} ${H316_OPT} -o $@@
d125 3
a128 3
 ${BIN}hp2100 : ${HP2100} ${SIM}
-	${CC} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@
+	${CC} ${CFLAGS} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@
d131 3
a134 3
 ${BIN}i1401 : ${I1401} ${SIM}
-	${CC} ${I1401} ${SIM} ${I1401_OPT} -o $@@
+	${CC} ${CFLAGS} ${I1401} ${SIM} ${I1401_OPT} -o $@@
d136 3
d141 3
a143 3
 ${BIN}i1620 : ${I1620} ${SIM}
-	${CC} ${I1620} ${SIM} ${I1620_OPT} -o $@@
+	${CC} ${CFLAGS} ${I1620} ${SIM} ${I1620_OPT} -o $@@
d146 3
a148 3
 ${BIN}ibm1130 : ${IBM1130}
-	${CC} ${IBM1130} ${SIM} ${IBM1130_OPT} -o $@@
+	${CC} ${CFLAGS} ${IBM1130} ${SIM} ${IBM1130_OPT} -o $@@
d151 3
a153 3
 ${BIN}s3 : ${S3} ${SIM}
-	${CC} ${S3} ${SIM} ${S3_OPT} -o $@@
+	${CC} ${CFLAGS} ${S3} ${SIM} ${S3_OPT} -o $@@
d156 3
a158 3
 ${BIN}altair : ${ALTAIR} ${SIM}
-	${CC} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@
+	${CC} ${CFLAGS} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@
d161 3
a163 5
 ${BIN}altairz80 : ${ALTAIRZ80} ${SIM} ${ALTAIRZ80D}altairZ80_defs.h
-	${CC} ${ALTAIRZ80_OPT} ${ALTAIRZ80} ${SIM} -o $@@
+	${CC} ${CFLAGS} ${ALTAIRZ80_OPT} ${ALTAIRZ80} ${SIM} -o $@@
 ${ALTAIRZ80D}altairZ80_defs.h : ${ALTAIRZ80D}altairz80_defs.h
 	cp ${ALTAIRZ80D}altairz80_defs.h ${ALTAIRZ80D}altairZ80_defs.h
a164 3
 ${BIN}gri : ${GRI} ${SIM}
-	${CC} ${GRI} ${SIM} ${GRI_OPT} -o $@@
+	${CC} ${CFLAGS} ${GRI} ${SIM} ${GRI_OPT} -o $@@
d166 3
a168 3
 ${BIN}id16 : ${ID16} ${SIM}
-	${CC} ${ID16} ${SIM} ${ID16_OPT} -o $@@
+	${CC} ${CFLAGS} ${ID16} ${SIM} ${ID16_OPT} -o $@@
a169 3
 ${BIN}id32 : ${ID32} ${SIM}
-	${CC} ${ID32} ${SIM} ${ID32_OPT} -o $@@
+	${CC} ${CFLAGS} ${ID32} ${SIM} ${ID32_OPT} -o $@@
d171 3
a173 3
 ${BIN}sds : ${SDS} ${SIM}
-	${CC} ${SDS} ${SIM} ${SDS_OPT} -o $@@
+	${CC} ${CFLAGS} ${SDS} ${SIM} ${SDS_OPT} -o $@@
@


1.3
log
@o update to simh 2.10b3.
o include DELQA and DEQNA ethernet support for vax and pdp11.

some diffs have been submited for future inclusion.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@upgrade to 2.9.0
@
text
@d1 6
a6 5
$OpenBSD: patch-makefile,v 1.1 2002/02/04 05:10:29 form Exp $
--- makefile.orig	Wed Jan 30 22:45:25 2002
+++ makefile	Wed Jan 30 22:45:43 2002
@@@@ -1,8 +1,9 @@@@
 # CC Command
d10 2
a11 4
 #CC = gcc -O0 -g -lm -I .
-
+CC ?= cc
+CFLAGS += -I. -lm
a13 31
 #
@@@@ -18,32 +19,32 @@@@ SIM = scp.c scp_tty.c sim_sock.c sim_tmx
 #
 PDP1D = PDP1/
 PDP1 = ${PDP1D}pdp1_lp.c ${PDP1D}pdp1_cpu.c ${PDP1D}pdp1_stddev.c \
-        ${PDP1D}pdp1_sys.c
+	${PDP1D}pdp1_sys.c
 PDP1_OPT = -I ${PDP1D}
 
 
 NOVAD = NOVA/
 NOVA = ${NOVAD}nova_sys.c ${NOVAD}nova_cpu.c ${NOVAD}nova_dkp.c \
-        ${NOVAD}nova_dsk.c ${NOVAD}nova_lp.c ${NOVAD}nova_mta.c \
-        ${NOVAD}nova_plt.c ${NOVAD}nova_pt.c ${NOVAD}nova_clk.c \
-        ${NOVAD}nova_tt.c ${NOVAD}nova_tt1.c
+	${NOVAD}nova_dsk.c ${NOVAD}nova_lp.c ${NOVAD}nova_mta.c \
+	${NOVAD}nova_plt.c ${NOVAD}nova_pt.c ${NOVAD}nova_clk.c \
+	${NOVAD}nova_tt.c ${NOVAD}nova_tt1.c
 NOVA_OPT = -I ${NOVAD}
 
 
 
 ECLIPSE = ${NOVAD}eclipse_cpu.c ${NOVAD}eclipse_tt.c ${NOVAD}nova_sys.c \
-        ${NOVAD}nova_dkp.c ${NOVAD}nova_dsk.c ${NOVAD}nova_lp.c \
-        ${NOVAD}nova_mta.c ${NOVAD}nova_plt.c ${NOVAD}nova_pt.c \
-        ${NOVAD}nova_clk.c ${NOVAD}nova_tt1.c
+	${NOVAD}nova_dkp.c ${NOVAD}nova_dsk.c ${NOVAD}nova_lp.c \
+	${NOVAD}nova_mta.c ${NOVAD}nova_plt.c ${NOVAD}nova_pt.c \
+	${NOVAD}nova_clk.c ${NOVAD}nova_tt1.c
 ECLIPSE_OPT = -I ${NOVAD} -DECLIPSE
 
d15 6
a20 26
 
 PDP18BD = PDP18B/
 PDP18B = ${PDP18BD}pdp18b_dt.c ${PDP18BD}pdp18b_drm.c ${PDP18BD}pdp18b_cpu.c \
-        ${PDP18BD}pdp18b_lp.c ${PDP18BD}pdp18b_mt.c ${PDP18BD}pdp18b_rf.c \
-        ${PDP18BD}pdp18b_rp.c ${PDP18BD}pdp18b_stddev.c ${PDP18BD}pdp18b_sys.c \
-        ${PDP18BD}pdp18b_tt1.c
+	${PDP18BD}pdp18b_lp.c ${PDP18BD}pdp18b_mt.c ${PDP18BD}pdp18b_rf.c \
+	${PDP18BD}pdp18b_rp.c ${PDP18BD}pdp18b_stddev.c ${PDP18BD}pdp18b_sys.c \
+	${PDP18BD}pdp18b_tt1.c
 PDP4_OPT = -DPDP4 -I ${PDP18BD}
 PDP7_OPT = -DPDP7 -I ${PDP18BD}
 PDP9_OPT = -DPDP9 -I ${PDP18BD}
@@@@ -53,45 +54,45 @@@@ PDP15_OPT = -DPDP15 -I ${PDP18BD}
 
 PDP11D = PDP11/
 PDP11 = ${PDP11D}pdp11_fp.c ${PDP11D}pdp11_cpu.c ${PDP11D}pdp11_dz.c \
-        ${PDP11D}pdp11_cis.c ${PDP11D}pdp11_lp.c ${PDP11D}pdp11_rk.c \
-        ${PDP11D}pdp11_rl.c ${PDP11D}pdp11_rp.c ${PDP11D}pdp11_rx.c \
-        ${PDP11D}pdp11_stddev.c ${PDP11D}pdp11_sys.c ${PDP11D}pdp11_tc.c \
-        ${PDP11D}pdp11_tm.c ${PDP11D}pdp11_ts.c ${PDP11D}pdp11_io.c \
-        ${PDP11D}pdp11_rq.c
+	${PDP11D}pdp11_cis.c ${PDP11D}pdp11_lp.c ${PDP11D}pdp11_rk.c \
+	${PDP11D}pdp11_rl.c ${PDP11D}pdp11_rp.c ${PDP11D}pdp11_rx.c \
+	${PDP11D}pdp11_stddev.c ${PDP11D}pdp11_sys.c ${PDP11D}pdp11_tc.c \
+	${PDP11D}pdp11_tm.c ${PDP11D}pdp11_ts.c ${PDP11D}pdp11_io.c \
+	${PDP11D}pdp11_rq.c
d24 6
a29 64
 
 PDP10D = PDP10/
 PDP10 = ${PDP10D}pdp10_fe.c ${PDP10D}pdp10_dz.c ${PDP10D}pdp10_cpu.c \
-        ${PDP10D}pdp10_ksio.c ${PDP10D}pdp10_lp20.c ${PDP10D}pdp10_mdfp.c \
-        ${PDP10D}pdp10_pag.c ${PDP10D}pdp10_pt.c ${PDP10D}pdp10_rp.c \
-        ${PDP10D}pdp10_sys.c ${PDP10D}pdp10_tim.c ${PDP10D}pdp10_tu.c \
-        ${PDP10D}pdp10_xtnd.c
+	${PDP10D}pdp10_ksio.c ${PDP10D}pdp10_lp20.c ${PDP10D}pdp10_mdfp.c \
+	${PDP10D}pdp10_pag.c ${PDP10D}pdp10_pt.c ${PDP10D}pdp10_rp.c \
+	${PDP10D}pdp10_sys.c ${PDP10D}pdp10_tim.c ${PDP10D}pdp10_tu.c \
+	${PDP10D}pdp10_xtnd.c
 PDP10_OPT = -DUSE_INT64 -I ${PDP10D}
 
 
 
 PDP8D = PDP8/
 PDP8 = ${PDP8D}pdp8_cpu.c ${PDP8D}pdp8_clk.c ${PDP8D}pdp8_df.c \
-        ${PDP8D}pdp8_dt.c ${PDP8D}pdp8_lp.c ${PDP8D}pdp8_mt.c \
-        ${PDP8D}pdp8_pt.c ${PDP8D}pdp8_rf.c ${PDP8D}pdp8_rk.c \
-        ${PDP8D}pdp8_rx.c ${PDP8D}pdp8_sys.c ${PDP8D}pdp8_tt.c \
-        ${PDP8D}pdp8_ttx.c ${PDP8D}pdp8_rl.c
+	${PDP8D}pdp8_dt.c ${PDP8D}pdp8_lp.c ${PDP8D}pdp8_mt.c \
+	${PDP8D}pdp8_pt.c ${PDP8D}pdp8_rf.c ${PDP8D}pdp8_rk.c \
+	${PDP8D}pdp8_rx.c ${PDP8D}pdp8_sys.c ${PDP8D}pdp8_tt.c \
+	${PDP8D}pdp8_ttx.c ${PDP8D}pdp8_rl.c
 PDP8_OPT = -I ${PDP8D}
 
 
 
 H316D = H316/
 H316 = ${H316D}h316_stddev.c ${H316D}h316_lp.c ${H316D}h316_cpu.c \
-        ${H316D}h316_sys.c
+	${H316D}h316_sys.c
 H316_OPT = -I ${H316D}
 
 
 
 HP2100D = HP2100/
 HP2100 = ${HP2100D}hp2100_stddev.c ${HP2100D}hp2100_dp.c ${HP2100D}hp2100_lp.c \
-        ${HP2100D}hp2100_mt.c ${HP2100D}hp2100_cpu.c ${HP2100D}hp2100_sys.c
+	${HP2100D}hp2100_mt.c ${HP2100D}hp2100_cpu.c ${HP2100D}hp2100_sys.c
 HP2100_OPT = -I ${HP2100D}
 
 
@@@@ -104,38 +105,38 @@@@ ID4_OPT = -I ${ID4D}
 
 I1401D = I1401/
 I1401 = ${I1401D}i1401_lp.c ${I1401D}i1401_cpu.c ${I1401D}i1401_iq.c \
-        ${I1401D}i1401_cd.c ${I1401D}i1401_mt.c ${I1401D}i1401_sys.c
+	${I1401D}i1401_cd.c ${I1401D}i1401_mt.c ${I1401D}i1401_sys.c
 I1401_OPT = -I ${I1401D}
 
 
 
 VAXD = VAX/
 VAX = ${VAXD}vax_cpu1.c ${VAXD}vax_cpu.c ${VAXD}vax_fpa.c ${VAXD}vax_io.c \
-        ${VAXD}vax_mmu.c ${VAXD}vax_stddev.c ${VAXD}vax_sys.c \
-        ${VAXD}vax_sysdev.c \
-        ${PDP11D}pdp11_rl.c ${PDP11D}pdp11_rq.c ${PDP11D}pdp11_ts.c \
-        ${PDP11D}pdp11_dz.c ${PDP11D}pdp11_lp.c
+	${VAXD}vax_mmu.c ${VAXD}vax_stddev.c ${VAXD}vax_sys.c \
+	${VAXD}vax_sysdev.c \
+	${PDP11D}pdp11_rl.c ${PDP11D}pdp11_rq.c ${PDP11D}pdp11_ts.c \
+	${PDP11D}pdp11_dz.c ${PDP11D}pdp11_lp.c
d33 1
a33 46
 
 SDSD = SDS/
 SDS = ${SDSD}sds_stddev.c ${SDSD}sds_fhd.c ${SDSD}sds_io.c ${SDSD}sds_lp.c \
-        ${SDSD}sds_mt.c ${SDSD}sds_rad.c ${SDSD}sds_cpu.c ${SDSD}sds_sys.c
+	${SDSD}sds_mt.c ${SDSD}sds_rad.c ${SDSD}sds_cpu.c ${SDSD}sds_sys.c
 SDS_OPT = -I ${SDSD}
 
 
 
 S3D = S3/
 S3 = ${S3D}s3_cd.c ${S3D}s3_cpu.c ${S3D}s3_disk.c ${S3D}s3_lp.c \
-        ${S3D}s3_pkb.c ${S3D}s3_sys.c
+	${S3D}s3_pkb.c ${S3D}s3_sys.c
 S3_OPT = -I ${S3D}
 
 
 
 ALTAIRD = ALTAIR/
 ALTAIR = ${ALTAIRD}altair_sio.c ${ALTAIRD}altair_cpu.c ${ALTAIRD}altair_dsk.c \
-        ${ALTAIRD}altair_sys.c
+	${ALTAIRD}altair_sys.c
 ALTAIR_OPT = -I ${ALTAIRD}
 
 
@@@@ -143,8 +144,8 @@@@ ALTAIR_OPT = -I ${ALTAIRD}
 # Build everything
 #
 all : ${BIN}pdp1 ${BIN}pdp4 ${BIN}pdp7 ${BIN}pdp8 ${BIN}pdp9 ${BIN}pdp15 \
-        ${BIN}pdp11 ${BIN}pdp10 ${BIN}vax ${BIN}nova ${BIN}eclipse ${BIN}h316 \
-        ${BIN}hp2100 ${BIN}id4 ${BIN}i1401 ${BIN}sds ${BIN}s3 ${BIN}altair
+	${BIN}pdp11 ${BIN}pdp10 ${BIN}nova ${BIN}eclipse ${BIN}h316 \
+	${BIN}hp2100 ${BIN}i1401 ${BIN}s3 ${BIN}altair
 
 
 
@@@@ -152,96 +153,96 @@@@ all : ${BIN}pdp1 ${BIN}pdp4 ${BIN}pdp7 $
 # Make sure subdirectory exists
 #
 ${BIN} : simh_doc.txt
-        -mkdir ${BIN}
-        -touch ${BIN}
+#	-mkdir ${BIN}
+#	-touch ${BIN}
 
 
 #
d36 2
a37 2
 ${BIN}pdp1 : ${PDP1} ${SIM} ${BIN}
-        ${CC} ${PDP1} ${SIM} ${PDP1_OPT} -o $@@
d42 2
a43 2
 ${BIN}pdp4 : ${PDP18B} ${SIM} ${BIN}
-        ${CC} ${PDP18B} ${SIM} ${PDP4_OPT} -o $@@
d48 2
a49 2
 ${BIN}pdp7 : ${PDP18B} ${SIM} ${BIN}
-        ${CC} ${PDP18B} ${SIM} ${PDP7_OPT} -o $@@
d54 2
a55 2
 ${BIN}pdp8 : ${PDP8} ${SIM} ${BIN}
-        ${CC} ${PDP8} ${SIM} ${PDP8_OPT} -o $@@
d60 2
a61 2
 ${BIN}pdp9 : ${PDP18B} ${SIM} ${BIN}
-        ${CC} ${PDP18B} ${SIM} ${PDP9_OPT} -o $@@
d66 2
a67 2
 ${BIN}pdp15 : ${PDP18B} ${SIM} ${BIN}
-        ${CC} ${PDP18B} ${SIM} ${PDP15_OPT} -o $@@
d72 2
a73 2
 ${BIN}pdp10 : ${PDP10} ${SIM} ${BIN}
-        ${CC} ${PDP10} ${SIM} ${PDP10_OPT} -o $@@
d78 3
a80 3
 ${BIN}pdp11 : ${PDP11} ${SIM} ${BIN}
-        ${CC} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@
+	${CC} ${CFLAGS} ${PDP11} ${SIM} ${PDP11_OPT} -o $@@
d84 3
a86 3
 ${BIN}vax : ${VAX} ${SIM} ${BIN}
-        ${CC} ${VAX} ${SIM} ${VAX_OPT} -o $@@
+	${CC} ${CFLAGS} ${VAX} ${SIM} ${VAX_OPT} -o $@@
d90 2
a91 2
 ${BIN}nova : ${NOVA} ${SIM} ${BIN}
-        ${CC} ${NOVA} ${SIM} ${NOVA_OPT} -o $@@
d96 2
a97 2
 ${BIN}eclipse : ${ECLIPSE} ${SIM} ${BIN}
-        ${CC} ${ECLIPSE} ${SIM} ${ECLIPSE_OPT} -o $@@
d102 2
a103 2
 ${BIN}h316 : ${H316} ${SIM} ${BIN}
-        ${CC} ${H316} ${SIM} ${H316_OPT} -o $@@
d108 2
a109 2
 ${BIN}hp2100 : ${HP2100} ${SIM} ${BIN}
-        ${CC} ${HP2100} ${SIM} ${HP2100_OPT} -o $@@
d114 9
a122 3
 ${BIN}id4 : ${ID4} ${SIM} ${BIN}
-        ${CC} ${ID4} ${SIM} ${ID4_OPT} -o $@@
+	${CC} ${CFLAGS} ${ID4} ${SIM} ${ID4_OPT} -o $@@
d125 3
a128 3
 ${BIN}i1401 : ${I1401} ${SIM} ${BIN}
-        ${CC} ${I1401} ${SIM} ${I1401_OPT} -o $@@
+	${CC} ${CFLAGS} ${I1401} ${SIM} ${I1401_OPT} -o $@@
d130 3
d135 3
a137 3
 ${BIN}sds : ${SDS} ${SIM} ${BIN}
-        ${CC} ${SDS} ${SIM} ${SDS_OPT} -o $@@
+	${CC} ${CFLAGS} ${SDS} ${SIM} ${SDS_OPT} -o $@@
d140 17
d158 3
a160 3
 ${BIN}s3 : ${S3} ${SIM} ${BIN}
-        ${CC} ${S3} ${SIM} ${S3_OPT} -o $@@
+	${CC} ${CFLAGS} ${S3} ${SIM} ${S3_OPT} -o $@@
a162 3
 ${BIN}altair : ${ALTAIR} ${SIM} ${BIN}
-        ${CC} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@
+	${CC} ${CFLAGS} ${ALTAIR} ${SIM} ${ALTAIR_OPT} -o $@@
@


1.1
log
@upgrade to 2.8.5
@
text
@d1 1
a1 1
$OpenBSD$
@

