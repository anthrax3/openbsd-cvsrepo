head	1.10;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	fcambus_20160901:1.1.1.1
	fcambus:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2017.08.11.10.37.10;	author sthen;	state Exp;
branches;
next	1.9;
commitid	eui9Z8wfBaKpmxrD;

1.9
date	2017.06.05.07.26.30;	author fcambus;	state Exp;
branches;
next	1.8;
commitid	LjnqdnRVHcdEPFwJ;

1.8
date	2017.03.24.08.51.35;	author fcambus;	state Exp;
branches;
next	1.7;
commitid	j6MSLBlQxbnXQLbA;

1.7
date	2017.03.09.09.56.44;	author fcambus;	state Exp;
branches;
next	1.6;
commitid	zJVY49UH8p0phq0j;

1.6
date	2017.02.28.09.05.09;	author fcambus;	state Exp;
branches;
next	1.5;
commitid	2c4thpRlJUlDUsmt;

1.5
date	2017.02.19.15.43.33;	author fcambus;	state Exp;
branches;
next	1.4;
commitid	mWU1g3BAbkJ907Nx;

1.4
date	2017.01.02.23.27.01;	author fcambus;	state Exp;
branches;
next	1.3;
commitid	UQkv0d7UBjVp3Mwv;

1.3
date	2016.12.05.10.05.39;	author fcambus;	state Exp;
branches;
next	1.2;
commitid	xvSdqOWiG09x1Xxg;

1.2
date	2016.09.22.12.57.18;	author fcambus;	state Exp;
branches;
next	1.1;
commitid	mgPOgZNo5YzYtJy2;

1.1
date	2016.09.01.14.30.11;	author fcambus;	state Exp;
branches
	1.1.1.1;
next	;
commitid	I8L5ouMeNzZXEXlA;

1.1.1.1
date	2016.09.01.14.30.11;	author fcambus;	state Exp;
branches;
next	;
commitid	I8L5ouMeNzZXEXlA;


desc
@@


1.10
log
@add -fomit-frame-pointer for i386 to unbreak, clang builds use an extra
register compared to the gcc build and we run out.
@
text
@# $OpenBSD: Makefile,v 1.9 2017/06/05 07:26:30 fcambus Exp $

COMMENT =	MAME port with advanced video support for monitors and TVs

V =		3.5
DISTNAME =	advancemame-$V

CATEGORIES =	emulators games

HOMEPAGE =	http://www.advancemame.it/

MAINTAINER =	Frederic Cambus <fcambus@@openbsd.org>

# GPLv2+ and MAME License
PERMIT_PACKAGE_CDROM =	unclear license
PERMIT_PACKAGE_FTP =	unclear license
PERMIT_DISTFILES_FTP =	unclear license

WANTLIB +=	SDL2 c expat freetype m pthread z

MASTER_SITES =	https://github.com/amadvance/advancemame/releases/download/v$V/

LIB_DEPENDS =	devel/sdl2

.if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS += devel/nasm
CFLAGS +=	 -fno-pie -fomit-frame-pointer
.endif

CONFIGURE_STYLE = gnu

USE_GMAKE =	Yes

post-patch:
	@@sed -i 's,@@@@,@@,' ${WRKSRC}/Makefile.in

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/obj/mame/generic/blend/advmame ${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/doc/advmame.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/advancemame
	${INSTALL_DATA} ${WRKSRC}/doc/advmame.txt ${PREFIX}/share/doc/advancemame

.include <bsd.port.mk>
@


1.9
log
@Update advancemame to 3.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2017/03/24 08:51:35 fcambus Exp $
d27 1
a27 2

CFLAGS +=	 -fno-pie
@


1.8
log
@Enable assembly optimizations on i386 for advancemame and advancemess.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2017/03/09 09:56:44 fcambus Exp $
d5 1
a5 1
V =		3.4
a6 1
REVISION =	0
@


1.7
log
@Update advancemame to 3.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2017/02/28 09:05:09 fcambus Exp $
d7 1
d26 6
a32 3

CONFIGURE_ARGS += --disable-asm \
		  --disable-asm-mips3
@


1.6
log
@Update advancemame to 3.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2017/02/19 15:43:33 fcambus Exp $
d5 1
a5 1
V =		3.3
@


1.5
log
@Update advancemame to 3.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2017/01/02 23:27:01 fcambus Exp $
d5 1
a5 1
V =		3.2
@


1.4
log
@Disable assembly code on i386 for advancemame and advancemess.

As spotted by sthen@@, when nasm is installed, assembly optimized code
is enabled at configure time on i386, and compilation fails. This code
only exists for i386, so disabling it globally using CONFIGURE_ARGS
does not affect other architectures.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/12/05 10:05:39 fcambus Exp $
d5 1
a5 1
V =		3.0
d19 1
a19 1
WANTLIB +=	SDL c expat freetype m pthread z
d23 1
a23 1
LIB_DEPENDS =	devel/sdl
@


1.3
log
@Update advancemame to 3.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/09/22 12:57:18 fcambus Exp $
d26 3
@


1.2
log
@Update my mail address
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/09/01 14:30:11 fcambus Exp $
d5 2
a6 2
DISTNAME =	advancemame-1.4
REVISION =	0
d21 1
a21 1
MASTER_SITES =	https://github.com/amadvance/advancemame/releases/download/${DISTNAME}/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.75 2016/03/20 17:19:49 naddy Exp $
d6 1
d12 1
a12 1
MAINTAINER =	Frederic Cambus <fred@@statdns.com>
@


1.1.1.1
log
@Import emulators/advancemame

AdvanceMAME is an unofficial MAME version with an advanced video support
for helping the use with TVs, Arcade Monitors, Fixed Frequencies Monitors
and also with normal PC Monitors.

AdvanceMAME supports many special video effects to improve image quality
when it's stretched. The most advanced effects add missing pixels trying
to match the image patterns.

OK bentley@@

@
text
@@
