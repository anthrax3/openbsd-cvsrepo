head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.2
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	bentley_20121224:1.1.1.1
	bentley:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.08.01.18.31.29;	author bentley;	state Exp;
branches;
next	1.4;
commitid	hfjUIes4X96qCIfP;

1.4
date	2015.10.02.05.15.53;	author bentley;	state Exp;
branches;
next	1.3;
commitid	Rjx7d6YVNO0NIC8v;

1.3
date	2014.04.10.06.04.42;	author bentley;	state Exp;
branches;
next	1.2;

1.2
date	2013.04.22.23.28.07;	author bentley;	state Exp;
branches;
next	1.1;

1.1
date	2012.12.25.00.07.01;	author bentley;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.12.25.00.07.01;	author bentley;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to fceux-2.2.3.

Release notes:
http://www.fceux.com/web/pressrelease-2.2.3.html
@
text
@$OpenBSD$
--- SConstruct.orig	Sun Jul 31 20:35:51 2016
+++ SConstruct	Sun Jul 31 20:36:16 2016
@@@@ -128,9 +128,6 @@@@ else:
     env.Append(CPPDEFINES=["_GTK3"])
     env.Append(CCFLAGS = ["-D_GTK"])
 
-  ### Just make every configuration use -ldl, it may be needed for some reason.
-  env.Append(LIBS = ["-ldl"])
-
   ### Lua platform defines
   ### Applies to all files even though only lua needs it, but should be ok
   if env['LUA']:
@@@@ -144,9 +141,9 @@@@ else:
       env.Append(CCFLAGS = ["-DLUA_USE_LINUX"])
     lua_available = False
     if env['SYSTEM_LUA']:
-      if conf.CheckLib('lua5.1'):
-        env.Append(LINKFLAGS = ["-llua5.1"])
-        env.Append(CCFLAGS = ["-I/usr/include/lua5.1"])
+      if conf.CheckLib('${MODLUA_WANTLIB}'):
+        env.Append(LINKFLAGS = ["${MODLUA_LIB}"])
+        env.Append(CCFLAGS = ["-I${MODLUA_INCL_DIR}"])
         lua_available = True
       elif conf.CheckLib('lua'):
         env.Append(LINKFLAGS = ["-llua"])
@@@@ -184,11 +181,6 @@@@ if env['FRAMESKIP']:
 print "base CPPDEFINES:",env['CPPDEFINES']
 print "base CCFLAGS:",env['CCFLAGS']
 
-if env['DEBUG']:
-  env.Append(CPPDEFINES=["_DEBUG"], CCFLAGS = ['-g', '-O0'])
-else:
-  env.Append(CCFLAGS = ['-O2'])
-
 if env['PLATFORM'] != 'win32' and env['PLATFORM'] != 'cygwin' and env['CREATE_AVI']:
   env.Append(CPPDEFINES=["CREATE_AVI"])
 else:
@@@@ -237,5 +229,5 @@@@ env.InstallAs(prefix + '/share/fceux/', share_src)
 env.Install(prefix + '/share/fceux/', auxlib_src)
 env.Install(prefix + '/share/pixmaps/', image_src)
 env.Install(prefix + '/share/applications/', desktop_src)
-env.Install(prefix + "/share/man/man6/", [man_src, man_net_src])
+env.Install(prefix + "/man/man6/", [man_src, man_net_src])
 env.Alias('install', prefix)
@


1.4
log
@Fix path in desktop file.

Reported by James Wells.
@
text
@d1 14
a14 6
$OpenBSD: patch-SConstruct,v 1.3 2014/04/10 06:04:42 bentley Exp $
Fix SCons install target. From upstream r3067.
--- SConstruct.orig	Thu Oct  1 22:43:24 2015
+++ SConstruct	Thu Oct  1 22:43:25 2015
@@@@ -138,9 +138,9 @@@@ else:
       # Should work on any *nix
d17 13
a29 10
-    if conf.CheckLib('lua5.1'):
-      env.Append(LINKFLAGS = ["-ldl", "-llua5.1"])
-      env.Append(CCFLAGS = ["-I/usr/include/lua5.1"])
+    if conf.CheckLib('${MODLUA_WANTLIB}'):
+      env.Append(LINKFLAGS = '${MODLUA_LIB}')
+      env.Append(CCFLAGS = ["-I${MODLUA_INCL_DIR}"])
       lua_available = True
     elif conf.CheckLib('lua'):
       env.Append(LINKFLAGS = ["-ldl", "-llua"])
@@@@ -177,8 +177,6 @@@@ print "base CCFLAGS:",env['CCFLAGS']
d31 2
a32 2
 if env['DEBUG']:
   env.Append(CPPDEFINES=["_DEBUG"], CCFLAGS = ['-g', '-O0'])
d35 1
a35 1
 
d38 6
a43 39
@@@@ -205,7 +203,6 @@@@ fceux_net_server_dst = 'bin/fceux-net-server' + exe_su
 
 auxlib_src = 'src/auxlib.lua'
 auxlib_dst = 'bin/auxlib.lua'
-auxlib_inst_dst = prefix + '/share/fceux/auxlib.lua'
 
 fceux_h_src = 'output/fceux.chm'
 fceux_h_dst = 'bin/fceux.chm'
@@@@ -217,25 +214,17 @@@@ env.Command(auxlib_dst, auxlib_src, [Copy(auxlib_dst, 
 
 man_src = 'documentation/fceux.6'
 man_net_src = 'documentation/fceux-net-server.6'
-man_dst = prefix + '/share/man/man6/fceux.6'
-man_net_dst = prefix + '/share/man/man6/fceux-net-server.6'
 
 share_src = 'output/'
-share_dst = prefix + '/share/fceux/'
 
 image_src = 'fceux.png'
-image_dst = prefix + '/share/pixmaps'
 
 desktop_src = 'fceux.desktop'
-desktop_dst = prefix + '/share/applications/'
 
-env.Install(prefix + "/bin/", fceux)
-env.Install(prefix + "/bin/", "fceux-net-server")
-# TODO:  Where to put auxlib on "scons install?"
-env.Alias('install', env.Command(auxlib_inst_dst, auxlib_src, [Copy(auxlib_inst_dst, auxlib_src)]))
-env.Alias('install', env.Command(share_dst, share_src, [Copy(share_dst, share_src)]))
-env.Alias('install', env.Command(man_dst, man_src, [Copy(man_dst, man_src)]))
-env.Alias('install', env.Command(man_net_dst, man_net_src, [Copy(man_net_dst, man_net_src)]))
-env.Alias('install', env.Command(image_dst, image_src, [Copy(image_dst, image_src)]))
-env.Alias('install', env.Command(desktop_dst, desktop_src, [Copy(desktop_dst, desktop_src)]))
-env.Alias('install', (prefix + "/bin/"))
+env.Install(prefix + "/bin/", [fceux, fceux_net_server_src])
+env.InstallAs(prefix + '/share/fceux/', share_src)
+env.Install(prefix + '/share/fceux/', auxlib_src)
+env.Install(prefix + '/share/pixmaps/', image_src)
+env.Install(prefix + '/share/applications/', desktop_src)
d45 1
a45 1
+env.Alias('install', prefix)
@


1.3
log
@Update to fceux-2.2.2.

ok benoit@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
--- SConstruct.orig	Thu Mar 13 23:30:04 2014
+++ SConstruct	Thu Mar 13 23:30:28 2014
d27 1
a27 1
@@@@ -205,7 +205,6 @@@@
d35 1
a35 1
@@@@ -217,25 +216,17 @@@@
d50 1
a50 1
-
a60 1
+
@


1.2
log
@Update to fceux-2.2.1.

ok rfreeman@@
@
text
@d1 5
a5 4
$OpenBSD: patch-SConstruct,v 1.1.1.1 2012/12/25 00:07:01 bentley Exp $
--- SConstruct.orig	Sun Mar 10 15:21:52 2013
+++ SConstruct	Fri Apr 19 14:34:56 2013
@@@@ -125,8 +125,8 @@@@ else:
d11 1
d14 1
d18 1
a18 1
@@@@ -164,8 +164,6 @@@@ print "base CCFLAGS:",env['CCFLAGS']
d21 1
a21 1
   env.Append(CPPDEFINES=["_DEBUG"], CCFLAGS = ['-g'])
d27 9
a35 1
@@@@ -203,8 +201,8 @@@@ env.Command(auxlib_dst, auxlib_src, [Copy(auxlib_dst, 
a40 2
+man_dst = prefix + '/man/man6/fceux.6'
+man_net_dst = prefix + '/man/man6/fceux-net-server.6'
d43 26
a68 1
 share_dst = prefix + '/share/fceux/'
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- SConstruct.orig	Mon Dec 24 02:05:25 2012
+++ SConstruct	Mon Dec 24 02:06:15 2012
@@@@ -113,8 +113,8 @@@@ else:
d15 1
a15 1
@@@@ -152,8 +152,6 @@@@ print "base CCFLAGS:",env['CCFLAGS']
d24 1
a24 1
@@@@ -191,8 +189,8 @@@@ env.Command(auxlib_dst, auxlib_src, [Copy(auxlib_dst, 
@


1.1.1.1
log
@Import fceux-2.2.0.

FCEUX is a portable and highly accurate NES/Famicom/Famicom Disk System
emulator with excellent compatibility with almost every rom dump
available, supports both PAL and NTSC modes, save states, game genie
support, and networking. FCEUX also offers tools for debugging,
rom-hacking, map making, Tool-assisted movies, and Lua scripting.
Finally FCEUX includes a GTK2 GUI to assist in configuration and
gameplay.

ok rfreeman@@ landry@@
@
text
@@
