head	1.14;
access;
symbols
	OPENBSD_6_1:1.10.0.2
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.9.0.4
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.2
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.6.0.8
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.4
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.2
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.5.0.4
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	bentley_20121224:1.1.1.1
	bentley:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2017.07.26.22.45.19;	author sthen;	state Exp;
branches;
next	1.13;
commitid	tD4MFrpYYDDL2UFT;

1.13
date	2017.07.16.19.18.53;	author espie;	state Exp;
branches;
next	1.12;
commitid	tt0GhWK5c4uf9ILG;

1.12
date	2017.04.28.13.17.21;	author espie;	state Exp;
branches;
next	1.11;
commitid	wJ2ufXCD0EhkdMc2;

1.11
date	2017.04.10.11.45.27;	author sthen;	state Exp;
branches;
next	1.10;
commitid	XDh1zlSBq0boKsHk;

1.10
date	2016.08.01.18.31.29;	author bentley;	state Exp;
branches;
next	1.9;
commitid	hfjUIes4X96qCIfP;

1.9
date	2016.01.11.09.35.44;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	WYnGla3sNqiyLTEw;

1.8
date	2015.10.02.05.15.53;	author bentley;	state Exp;
branches;
next	1.7;
commitid	Rjx7d6YVNO0NIC8v;

1.7
date	2015.08.17.19.10.12;	author sthen;	state Exp;
branches;
next	1.6;
commitid	4CippZtWcqcVBaoK;

1.6
date	2014.04.10.06.04.42;	author bentley;	state Exp;
branches;
next	1.5;

1.5
date	2013.04.22.23.28.07;	author bentley;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.11.06.04;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2013.02.02.04.39.56;	author bentley;	state Exp;
branches;
next	1.2;

1.2
date	2013.01.07.03.14.00;	author bentley;	state Exp;
branches;
next	1.1;

1.1
date	2012.12.25.00.07.01;	author bentley;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.12.25.00.07.01;	author bentley;	state Exp;
branches;
next	;


desc
@@


1.14
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.13 2017/07/16 19:18:53 espie Exp $

COMMENT =		emulator for Nintendo Entertainment System

V =			2.2.3
DISTNAME =		fceux-${V}.src
PKGNAME =		fceux-${V}
CATEGORIES =		emulators games
REVISION =		0

HOMEPAGE =		http://fceux.com/

MAINTAINER =		Anthony J. Bentley <anthony@@anjbe.name>

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=fceultra/}

WANTLIB += 		GL SDL X11 c gd gdk-x11-2.0 gdk_pixbuf-2.0 glib-2.0
WANTLIB += 		gobject-2.0 gtk-x11-2.0 lua5.1 m pthread
WANTLIB += 		${COMPILER_LIBCXX} z ${MODLUA_WANTLIB}

RUN_DEPENDS =		devel/desktop-file-utils
LIB_DEPENDS =		devel/sdl \
			graphics/gd \
			x11/gtk+2 

MODULES =		devel/scons \
			lang/lua

MAKE_ENV =		CC="${CC}" \
			CXX="${CXX}" \
			CXXFLAGS="${CXXFLAGS} -DIOAPI_NO_64" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib -lpthread"
MODSCONS_FLAGS =	SYSTEM_LUA=1

CONFIGURE_STYLE =	scons

WRKDIST =		${WRKDIR}/fceux-${V}

NO_TEST =		Yes

SUBST_VARS +=		MODLUA_WANTLIB
SUBST_VARS +=		MODLUA_LIB

post-extract:
	@@perl -MExtUtils::Command -e dos2unix ${WRKSRC}

pre-configure:
	${SUBST_CMD} ${WRKDIST}/SConstruct ${WRKDIST}/fceux.desktop

do-install:
	${SETENV} ${MAKE_ENV} ${MODSCONS_BIN} -C ${WRKSRC} \
		${MODSCONS_ENV} ${MODSCONS_FLAGS} \
		--prefix=${PREFIX} ${INSTALL_TARGET}

#BROKEN = nojunk
# XXX scons picks up x264.h even though it's in an apparently unused ifdef block
DPB_PROPERTIES =	nojunk

.include <bsd.port.mk>
@


1.13
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2017/04/28 13:17:21 espie Exp $
d9 1
@


1.12
log
@link does some weird things with clang thx to the pthread-stubs coming
from cairo/pixman-1 (doesn't work well with pthread-stubs)
Since this is scons, just link with -lpthread already, it's all compiled
-pthread anyway.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2017/04/10 11:45:27 sthen Exp $
d21 1
a21 1
WANTLIB += 		${LIBCXX} z ${MODLUA_WANTLIB}
@


1.11
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/08/01 18:31:29 bentley Exp $
d34 1
a34 1
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
d57 1
@


1.10
log
@Update to fceux-2.2.3.

Release notes:
http://www.fceux.com/web/pressrelease-2.2.3.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/01/11 09:35:44 ajacoutot Exp $
d21 1
a21 1
WANTLIB += 		stdc++ z ${MODLUA_WANTLIB}
@


1.9
log
@Use consistent email address for the MAINTAINER line.

ok bentley@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/10/02 05:15:53 bentley Exp $
d5 1
a5 2
V =			2.2.2
REVISION =		2
d20 1
a20 1
WANTLIB += 		gobject-2.0 gtk-x11-2.0 lua5.1 m pixman-1 pthread
d35 1
@


1.8
log
@Fix path in desktop file.

Reported by James Wells.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/08/17 19:10:12 sthen Exp $
d6 1
a6 1
REVISION =		1
d13 1
a13 1
MAINTAINER =		Anthony J. Bentley <anthony@@cathet.us>
@


1.7
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/04/10 06:04:42 bentley Exp $
d6 1
a6 1
REVISION =		0
@


1.6
log
@Update to fceux-2.2.2.

ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/04/22 23:28:07 bentley Exp $
d6 1
d21 1
a21 1
WANTLIB += 		gobject-2.0 gtk-x11-2.0 lua5.1 m pthread
@


1.5
log
@Update to fceux-2.2.1.

ok rfreeman@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:06:04 espie Exp $
d5 1
a5 1
V =			2.2.1
d23 1
d49 1
a49 1
	${SUBST_CMD} ${WRKDIST}/SConstruct
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/02/02 04:39:56 bentley Exp $
d5 3
a7 3
DISTNAME =		fceux-2.2.0.src
PKGNAME =		${DISTNAME:S/.src//}
REVISION =		0
d15 1
a15 1
PERMIT_PACKAGE_CDROM =		Yes
d20 1
a20 1
WANTLIB += 		gobject-2.0 gtk-x11-2.0 lua5.1 m pixman-1 pthread
d32 1
d37 1
a37 1
WRKDIST =		${WRKDIR}/fceux
@


1.3
log
@Take maintainership of some ports I'm interested in.

Initially suggested by kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/01/07 03:14:00 bentley Exp $
a15 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d38 1
a38 1
NO_REGRESS =		Yes
@


1.2
log
@Don't junk packages. Even though x264 isn't actually used in the final
executable, scons barfs if it disappears during build.

suggested by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/12/25 00:07:01 bentley Exp $
d7 1
d11 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d53 3
@


1.1.1.1
log
@Import fceux-2.2.0.

FCEUX is a portable and highly accurate NES/Famicom/Famicom Disk System
emulator with excellent compatibility with almost every rom dump
available, supports both PAL and NTSC modes, save states, game genie
support, and networking. FCEUX also offers tools for debugging,
rom-hacking, map making, Tool-assisted movies, and Lua scripting.
Finally FCEUX includes a GTK2 GUI to assist in configuration and
gameplay.

ok rfreeman@@ landry@@
@
text
@@
