head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.14
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.12
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.10
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.6
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.8
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.4
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	edd_20121122:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2014.03.15.13.04.16;	author edd;	state Exp;
branches;
next	1.4;

1.4
date	2013.12.02.16.32.12;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2013.09.10.10.23.35;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.31.20.16.10;	author edd;	state Exp;
branches;
next	1.1;

1.1
date	2012.11.22.23.45.20;	author edd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.11.22.23.45.20;	author edd;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to fs-uae-2.4.0.

Joystick and hardfile support tested.

Note that the launcher has moved out of the main fs-uae source tree. A
commit adding the launcher as a new port will follow.

OK bcallah@@
@
text
@$OpenBSD$

Remove optimiser flags. No libcompat.

--- Makefile.orig	Thu Mar 13 15:23:38 2014
+++ Makefile	Thu Mar 13 15:34:16 2014
@@@@ -98,14 +98,6 @@@@ endif
 profile_generate := 0
 profile_use := 0
 
-ifeq ($(optimize), 1)
-	cflags += -O2 -ggdb
-	cxxflags += -O2 -ggdb
-else ifneq ($(noflags), 1)
-	cflags += -O0 -ggdb
-	cxxflags += -O0 -ggdb
-endif
-
 ifeq ($(profile_generate), 1)
 	cflags += -fprofile-generate
 	cxxflags += -fprofile-generate
@@@@ -169,7 +161,7 @@@@ else ifeq ($(os), freebsd)
   libs += -lGL -lGLU -lopenal -lX11 -lcompat
 else ifeq ($(os), openbsd)
   cppflags += -DOPENBSD
-  libs += -lGL -lGLU -lopenal -lX11 -lcompat
+  libs += -lGL -lGLU -lopenal -lX11
 else
   cppflags += -DLINUX
   ldflags += -Wa,--execstack
@


1.4
log
@replace ftime() with gettimeofday() and drop -lcompat; ok edd@@ jca@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.3 2013/09/10 10:23:35 edd Exp $
d3 1
a3 1
Disable custom optimisation flags.
d5 26
a30 26
--- Makefile.orig	Tue Jun 25 21:21:16 2013
+++ Makefile	Sun Dec  1 23:43:29 2013
@@@@ -88,14 +88,6 @@@@ endif
 profile_generate := 0
 profile_use := 0
 
-ifeq ($(optimize), 1)
-	cflags += -O2 -ggdb
-	cxxflags += -O2 -ggdb
-else ifneq ($(noflags), 1)
-	cflags += -O0 -ggdb
-	cxxflags += -O0 -ggdb
-endif
-
 ifeq ($(profile_generate), 1)
 	cflags += -fprofile-generate
 	cxxflags += -fprofile-generate
@@@@ -154,7 +146,7 @@@@ else ifeq ($(os), freebsd)
   libs += -lGL -lGLU -lopenal -lX11 -lcompat
 else ifeq ($(os), openbsd)
   cppflags += -DOPENBSD
-  libs += -lGL -lGLU -lopenal -lX11 -lcompat
+  libs += -lGL -lGLU -lopenal -lX11
 else
   cppflags += -DLINUX
   ldflags += -Wa,--execstack
@


1.3
log
@Unbreak "real device" passthrough in fs-uae.

Allows a real hard disk (or other) device node to be used as an Amiga disk.
Most of these patches have been discussed with upstream and have been
accepted.

Also add comments to existing patches.

ok bcallah@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.2 2013/03/31 20:16:10 edd Exp $
d5 2
a6 2
--- Makefile.orig	Sun Mar 24 23:49:51 2013
+++ Makefile	Sun Mar 24 23:50:00 2013
d22 9
@


1.2
log
@Update fs-uae to 2.2.0.

Upstream took most of our patches, they mostly have gone.

There is one remaining -O0 in the top level Makefile, which works
around an optimiser bug. Yay.

OK bcallah@@
@
text
@d1 4
a4 1
$OpenBSD$
@


1.1
log
@Initial revision
@
text
@d2 3
a4 6

Add OpenBSD support

--- Makefile.orig	Fri Oct 26 17:28:39 2012
+++ Makefile	Thu Nov 22 09:45:02 2012
@@@@ -66,14 +66,6 @@@@ endif
a18 30
@@@@ -123,6 +115,9 @@@@ else ifeq ($(os), macosx)
 else ifeq ($(os), freebsd)
   cppflags += -DFREEBSD
   libs += -lGL -lGLU -lopenal -lX11 -lcompat
+else ifeq ($(os), openbsd)
+  cppflags += -DOPENBSD
+  libs += -lGL -lGLU -lopenal -lX11 -lcompat
 else
   ldflags += -Wa,--execstack
   libs += -lGL -lGLU -lopenal -ldl -lX11
@@@@ -595,13 +590,13 @@@@ dist: distdir pubfiles-source po-dist
 		dist/$(series)/$(version)/fs-uae-game-server-$(version).py
 
 install:
-	mkdir -p $(DESTDIR)$(prefix)/bin
-	cp out/fs-uae $(DESTDIR)$(prefix)/bin/fs-uae
-	mkdir -p $(DESTDIR)$(prefix)/share
-	cp -a share/* $(DESTDIR)$(prefix)/share
+	install -d $(DESTDIR)$(prefix)/bin
+	install out/fs-uae $(DESTDIR)$(prefix)/bin/fs-uae
+	install -d $(DESTDIR)$(prefix)/share
+	tar cf - share/ | tar xf - -C $(DESTDIR)$(prefix)/
 
-	mkdir -p $(DESTDIR)$(docdir)
-	cp -a README COPYING example.conf $(DESTDIR)$(docdir)
+	install -d $(DESTDIR)$(docdir)
+	install README COPYING example.conf $(DESTDIR)$(docdir)
 
 clean:
 	rm -f gen/build68k gen/genblitter gen/gencpu gen/genlinetoscr
@


1.1.1.1
log
@Import fs-uae-2.0.1; a modern Amiga emulator based on the windows
version of UAE.

OK sthen@@, gonzalo@@

@
text
@@
