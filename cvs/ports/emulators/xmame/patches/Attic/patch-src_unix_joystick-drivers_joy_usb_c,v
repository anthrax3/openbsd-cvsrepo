head	1.6;
access;
symbols
	OPENBSD_3_8:1.5.0.14
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.12
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.5.0.10
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.5.0.8
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.6
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.5.0.4
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2005.10.02.01.39.38;	author fgsch;	state dead;
branches;
next	1.5;

1.5
date	2002.05.25.01.18.00;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.06.02.05.08;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2002.02.05.15.27.17;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.01.10.02.09.53;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.30.17.21.52;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to xmame/mess 0.100; from maintainer.
add amd64 support.  aanrio@@ ok.
@
text
@$OpenBSD: patch-src_unix_joystick-drivers_joy_usb_c,v 1.5 2002/05/25 01:18:00 pvalchev Exp $
--- src/unix/joystick-drivers/joy_usb.c.orig	Fri Nov  2 18:22:56 2001
+++ src/unix/joystick-drivers/joy_usb.c	Fri May 24 13:49:05 2002
@@@@ -15,13 +15,13 @@@@ struct rc_option joy_usb_opts[] = {
 
 #ifdef USB_JOYSTICK
 
-#if !defined(__ARCH_netbsd) && !defined(__ARCH_freebsd)
-#error "USB joysticks are only supported under NetBSD and FreeBSD. "
+#if !defined(__ARCH_netbsd) && !defined(__ARCH_freebsd) && !defined(__ARCH_openbsd)
+#error "USB joysticks are only supported under NetBSD, FreeBSD and OpenBSD. "
    "Patches to support other archs are welcome ;)"
 #endif
 
-#if defined(__ARCH_netbsd)
-#include <usb.h>
+#if defined(__ARCH_netbsd) || defined(__ARCH_openbsd)
+#include <usbhid.h>
 #elif defined(__ARCH_freebsd)
 #include <libusb.h>
 #endif
@@@@ -82,7 +82,7 @@@@ static int joy_initialize_hid(int i)
 
   priv_joy_data[i].hids = NULL;
 
-  size = hid_report_size(rd, hid_input, &report_id);
+  size = hid_report_size(rd, hid_input, report_id);
   if ((priv_joy_data[i].data_buf = malloc(size)) == NULL)
     {
       fprintf(stderr_file, "error: couldn't malloc %d bytes\n", size);
@@@@ -93,7 +93,7 @@@@ static int joy_initialize_hid(int i)
   priv_joy_data[i].offset = (report_id != 0);
 
   is_joystick = 0;
-  for (d = hid_start_parse(rd, 1 << hid_input); hid_get_item(d, &h); )
+  for (d = hid_start_parse(rd, 1 << hid_input, NULL); hid_get_item(d, &h); )
     {
       int axis, usage, page, interesting_hid;
 
@


1.5
log
@sync with libusbhid interface changes
@
text
@d1 1
a1 1
$OpenBSD: patch-src_unix_joystick-drivers_joy_usb_c,v 1.4 2002/02/06 02:05:08 naddy Exp $
@


1.4
log
@* restore fix for include order; error reported by espie@@
* regen patches with update-patches
@
text
@d1 3
a3 3
$OpenBSD: patch-src_unix_joystick-drivers_joy_usb_c,v 1.3 2002/02/05 15:27:17 naddy Exp $
--- src/unix/joystick-drivers/joy_usb.c.orig	Sat Nov  3 02:22:56 2001
+++ src/unix/joystick-drivers/joy_usb.c	Wed Feb  6 02:18:17 2002
d22 18
@


1.3
log
@Update to 0.56.2.
Submitted by maintainer Claudio Castiglia <ccastig@@softhome.net>.
@
text
@d1 4
a4 4
$OpenBSD$
--- src/unix/joystick-drivers/joy_usb.c.orig	Wed Jan 16 00:28:53 2002
+++ src/unix/joystick-drivers/joy_usb.c	Wed Jan 16 00:33:20 2002
@@@@ -15,13 +15,13 @@@@
@


1.2
log
@* update to 0.37b15.2; from maintainer Claudio Castiglia <ccastig@@softhome.net>
* handle libusb -> libusbhid change
* respect CC, CFLAGS
@
text
@d1 4
a4 4
$OpenBSD: patch-src_unix_joystick-drivers_joy_usb_c,v 1.1 2001/09/30 17:21:52 naddy Exp $
--- src/unix/joystick-drivers/joy_usb.c.orig	Mon Jul  2 02:03:49 2001
+++ src/unix/joystick-drivers/joy_usb.c	Tue Jan  1 19:24:47 2002
@@@@ -15,13 +15,13 @@@@ struct rc_option joy_usb_opts[] = {
d11 1
a11 1
+#error "USB joysticks are only supported under NetBSD, FreeBSD, and OpenBSD. "
@


1.1
log
@- cheat distfile changed; from Claudio Castiglia <ccastig@@softhome.net>
- add USB joystick support
- fix order of includes
@
text
@d1 4
a4 4
$OpenBSD$
--- src/unix/joystick-drivers/joy_usb.c.orig	Sun Sep 30 17:43:03 2001
+++ src/unix/joystick-drivers/joy_usb.c	Sun Sep 30 17:45:54 2001
@@@@ -15,12 +15,12 @@@@ struct rc_option joy_usb_opts[] = {
d16 1
d18 1
a18 1
 #include <usb.h>
d21 1
@

