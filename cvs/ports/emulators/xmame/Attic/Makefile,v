head	1.35;
access;
symbols
	OPENBSD_4_7:1.33.0.2
	OPENBSD_4_7_BASE:1.33
	OPENBSD_4_6:1.32.0.2
	OPENBSD_4_6_BASE:1.32
	OPENBSD_4_5:1.31.0.6
	OPENBSD_4_5_BASE:1.31
	OPENBSD_4_4:1.31.0.4
	OPENBSD_4_4_BASE:1.31
	OPENBSD_4_3:1.31.0.2
	OPENBSD_4_3_BASE:1.31
	OPENBSD_4_2:1.29.0.2
	OPENBSD_4_2_BASE:1.29
	OPENBSD_4_1:1.27.0.2
	OPENBSD_4_1_BASE:1.27
	OPENBSD_4_0:1.25.0.2
	OPENBSD_4_0_BASE:1.25
	OPENBSD_3_9:1.20.0.2
	OPENBSD_3_9_BASE:1.20
	OPENBSD_3_8:1.12.0.4
	OPENBSD_3_8_BASE:1.12
	OPENBSD_3_7:1.12.0.2
	OPENBSD_3_7_BASE:1.12
	OPENBSD_3_6:1.10.0.4
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.6.0.4
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	naddy_20010404:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2010.05.09.17.51.48;	author jakemsr;	state dead;
branches;
next	1.34;

1.34
date	2010.04.15.13.56.35;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2009.08.10.06.31.09;	author kili;	state Exp;
branches;
next	1.32;

1.32
date	2009.03.18.20.23.11;	author landry;	state Exp;
branches;
next	1.31;

1.31
date	2008.01.04.17.48.34;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2007.09.16.00.45.14;	author merdely;	state Exp;
branches;
next	1.29;

1.29
date	2007.05.13.12.11.25;	author aanriot;	state Exp;
branches;
next	1.28;

1.28
date	2007.04.30.17.03.52;	author bernd;	state Exp;
branches;
next	1.27;

1.27
date	2006.11.26.09.54.34;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2006.11.20.13.07.20;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2006.08.18.17.09.23;	author kurt;	state Exp;
branches;
next	1.24;

1.24
date	2006.08.16.16.55.09;	author kurt;	state Exp;
branches;
next	1.23;

1.23
date	2006.06.06.09.23.16;	author aanriot;	state Exp;
branches;
next	1.22;

1.22
date	2006.05.31.01.41.55;	author sturm;	state Exp;
branches;
next	1.21;

1.21
date	2006.04.01.07.20.33;	author jsg;	state Exp;
branches;
next	1.20;

1.20
date	2005.12.31.15.56.09;	author sturm;	state Exp;
branches;
next	1.19;

1.19
date	2005.11.12.04.25.22;	author kurt;	state Exp;
branches;
next	1.18;

1.18
date	2005.11.03.22.04.41;	author aanriot;	state Exp;
branches;
next	1.17;

1.17
date	2005.10.18.19.08.00;	author aanriot;	state Exp;
branches;
next	1.16;

1.16
date	2005.10.04.02.21.41;	author fgsch;	state Exp;
branches;
next	1.15;

1.15
date	2005.10.02.20.56.38;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.10.02.20.36.49;	author aanriot;	state Exp;
branches;
next	1.13;

1.13
date	2005.10.02.01.39.37;	author fgsch;	state Exp;
branches;
next	1.12;

1.12
date	2004.11.27.10.39.14;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2004.11.20.20.41.00;	author alek;	state Exp;
branches;
next	1.10;

1.10
date	2003.10.11.01.37.55;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2003.09.22.22.53.37;	author pvalchev;	state Exp;
branches;
next	1.8;

1.8
date	2003.04.17.07.47.22;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2002.10.26.12.52.48;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2002.03.22.06.38.35;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.05.15.27.17;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.01.10.02.09.52;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.30.17.21.52;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.12.23.03.10;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.04.14.31.54;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.04.04.14.31.54;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.35
log
@x{mame,mess} has been superceeded by sdl{mame,mess}, remove the
xmame port
@
text
@# $OpenBSD: Makefile,v 1.34 2010/04/15 13:56:35 ajacoutot Exp $

COMMENT-main=	emulates arcade machines and old home computers
COMMENT-mame=	emulates a massive variety of arcade machines
COMMENT-mess=	emulates game consoles and old home computers

VERSION=	0.104
DISTNAME=	xmame-${VERSION}

PKGNAME-main=	xmame+xmess-${VERSION}p5
PKGNAME-mame=	xmame-${VERSION}p4
PKGNAME-mess=	xmess-${VERSION}p4

CATEGORIES=	emulators games
MASTER_SITES=	ftp://xmame.kaupp.us/pub/xmame/ \
		http://www.energyhq.be/files/ \
		http://www.pkix.net/mirror/x.mame.net/

HOMEPAGE=	http://x.mame.net

# Need to know endianness
ONLY_FOR_ARCHS=	amd64 alpha hppa i386 m68k sparc

# xmame license, see http://x.mame.net/license.html
PERMIT_PACKAGE_CDROM=	may not sell
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	may not sell
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		X11 Xext Xv Xxf86dga Xxf86vm expat c m pthread-stubs \
			usbhid xcb z

EXTRACT_SUFX=	.tar.bz2

VMEM_WARNING=	Yes

USE_GMAKE=	Yes
USE_X11=	Yes

MULTI_PACKAGES=	-main -mame -mess

FLAVORS=	esd sdl x11
FLAVOR?=	x11 

.if ${FLAVOR:L:Msdl} && ${FLAVOR:L:Mx11}
ERRORS+=	"Fatal: Please select only one video flavor."
DISPLAY_METHOD=
.endif

.if ${FLAVOR:L:Msdl}
DISPLAY_METHOD= SDL
LIB_DEPENDS+=	SDL.:sdl-*-!no_x11:devel/sdl
.else
DISPLAY_METHOD=	x11
LIB_DEPENDS+=	jpeg.::graphics/jpeg
MAKE_FLAGS+=	X11_OPENGL=1
.endif

.if ${FLAVOR:L:Mesd}
LIB_DEPENDS+=	esd::audio/esound
MAKE_FLAGS+=	SOUND_ESOUND=1
.endif

.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "amd64"
. if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	::devel/nasm
MAKE_FLAGS+=	X86_ASM_68000=1 \
		EFFECT_MMX_ASM=1
. endif
MAKE_FLAGS+=	MY_CPU=${MACHINE_ARCH}
. if ${DISPLAY_METHOD} == "x11"
MAKE_FLAGS+=	X11_DGA=1 
. endif
.elif ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "m68k"
MAKE_FLAGS+=	MY_CPU=${MACHINE_ARCH}
.elif ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "sparc"
MAKE_FLAGS+=	MY_CPU=risc
.endif

MAKE_ENV=	PREFIX="${PREFIX}"
MAKE_FILE=	Makefile.OpenBSD
MAKE_FLAGS+=	ARCH=openbsd \
		CC="${CC}" CFLAGS="${CFLAGS}" \
		DISPLAY_METHOD="${DISPLAY_METHOD}" \
		INCLUDES="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LIBS="-L${X11BASE}/lib -L${LOCALBASE}/lib -lexpat -lz" GLLIBS="" \
		INSTALL_PROGRAM_DIR="${INSTALL_PROGRAM_DIR}" \
		INSTALL_MAN_DIR="${INSTALL_MAN_DIR}" \
		INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
		INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
		INSTALL_PROGRAM_SUID="${INSTALL_PROGRAM}" \
		INSTALL_MAN="${INSTALL_MAN}" \
		INSTALL_DATA="${INSTALL_DATA}" \
		SYSCONFDIR="${SYSCONFDIR}" \
		JOY_USB=1

NO_REGRESS=	Yes

MAME_EXTBIN=	romcmp xml2info
MESS_EXTBIN=	chdman dat2html imgtool 

DOCS=		changes.opengl changes.unix dga2.txt liesmich.unix \
		multiplayer-readme.txt xmame-doc-2.html xmame-doc-3.html \
		xmame-doc-4.html xmame-doc-5.html xmame-doc-6.html \
		xmame-doc-7.html xmame-doc.html xmame-doc.lyx \
		xmame-doc.man.skel xmame-doc.txt xmame-gdoc-1.html \
		xmame-gdoc-2.html xmame-gdoc-3.html xmame-gdoc-4.html \
		xmame-gdoc-5.html xmame-gdoc-6.html xmame-gdoc-7.html \
		xmame-gdoc-8.html xmame-gdoc.html xmame.css xmamerc.dist \
		xmessrc.dist

MESS_DOCS=	imgtool.txt messnew.txt style.css wintoc.xml faq.htm \
		credits.htm messroms.txt images/logo.gif windows/update.htm \
		windows/osmenu.htm windows/install.htm windows/compile.htm \
		windows/guiuse.htm windows/main.htm windows/choice.htm \
		windows/config.htm windows/win32cmd.htm windows/guiconf.htm \
		windows/control.htm windows/images/iniicon.gif \
		windows/images/tree.gif windows/images/wzip.gif \
		windows/images/propsnd.gif windows/images/propd3d.gif \
		windows/images/command.gif windows/images/newmenu.gif \
		windows/images/keybcnt.gif windows/images/propmsc.gif \
		windows/images/startup.gif windows/images/propadv.gif \
		windows/images/gui.gif windows/images/frog.gif \
		windows/images/oldmenu.gif windows/images/propcnt.gif \
		windows/images/prop.gif windows/images/props.gif \
		windows/mgebios.htm windows/instbios.htm windows/runsw.htm \
		windows/suppsys.htm

post-patch:
	@@cp ${FILESDIR}/${MAKE_FILE} ${WRKSRC}

post-install:
	mv ${PREFIX}/bin/xmame.${DISPLAY_METHOD} ${PREFIX}/bin/xmame
	mv ${PREFIX}/bin/xmess.${DISPLAY_METHOD} ${PREFIX}/bin/xmess
.for i in ${MAME_EXTBIN} ${MESS_EXTBIN}
	${INSTALL_PROGRAM} ${WRKSRC}/${i} ${PREFIX}/bin
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame/img
	${INSTALL_DATA} ${WRKSRC}/doc/img/xmame.jpg \
		${PREFIX}/share/doc/xmame/img
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/xmame
.for i in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/doc/${i} ${PREFIX}/share/doc/xmame
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame/mame
	${INSTALL_DATA} ${WRKSRC}/doc/mame/* ${PREFIX}/share/doc/xmame/mame
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame/mess/images
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame/mess/windows/images
.for i in ${MESS_DOCS}
	${INSTALL_DATA} ${WRKSRC}/doc/mess/${i} \
		${PREFIX}/share/doc/xmame/mess/${i}
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/xmame/ctrlr
	${INSTALL_DATA} ${FILESDIR}/xmame-${DISPLAY_METHOD}rc \
		${PREFIX}/share/xmame/xmamerc
	${INSTALL_DATA} ${WRKSRC}/ctrlr/* ${PREFIX}/share/xmame/ctrlr
	${INSTALL_DATA_DIR} ${PREFIX}/share/xmess/hash
	${INSTALL_DATA} ${WRKSRC}/hash/* ${PREFIX}/share/xmess/hash
	${INSTALL_DATA} ${FILESDIR}/xmess-${DISPLAY_METHOD}rc \
		${PREFIX}/share/xmess/xmessrc
	${INSTALL_DATA} ${WRKSRC}/doc/mess/sysinfo.dat ${PREFIX}/share/xmess

.include <bsd.port.mk>
@


1.34
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/08/10 06:31:09 kili Exp $
@


1.33
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2009/03/18 20:23:11 landry Exp $
d10 3
a12 3
PKGNAME-main=	xmame+xmess-${VERSION}p4
PKGNAME-mame=	xmame-${VERSION}p3
PKGNAME-mess=	xmess-${VERSION}p3
@


1.32
log
@Add appropriate conflict markers between sdlmame, sdlmess, and the
various flavours of the xmame/xmess/xmame+xmess multipackages.
Tweak ${V} handling and sdlmame RUN_DEPENDS.
Diff from Pierre Riteau, thx!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2008/01/04 17:48:34 espie Exp $
d10 3
a12 3
PKGNAME-main=	xmame+xmess-${VERSION}p3
PKGNAME-mame=	xmame-${VERSION}p2
PKGNAME-mess=	xmess-${VERSION}p2
d29 2
a30 1
WANTLIB=		X11 Xext Xv Xxf86dga Xxf86vm expat c m usbhid z
@


1.31
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/09/16 00:45:14 merdely Exp $
d10 3
a12 3
PKGNAME-main=	xmame+xmess-${VERSION}p2
PKGNAME-mame=	xmame-${VERSION}p1
PKGNAME-mess=	xmess-${VERSION}p1
@


1.30
log
@Removed surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/05/13 12:11:25 aanriot Exp $
a79 1
FAKE_FLAGS=	${MAKE_FLAGS}
@


1.29
log
@- remove broken flavors.
- fix MASTER_SITES.
- get ride of unmaintained/unreachable additional files (hiscore,
cheat). we ship xmame, and people have to get roms and addons
themselves.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/04/30 17:03:52 bernd Exp $
d3 3
a5 3
COMMENT-main=	"emulates arcade machines and old home computers"
COMMENT-mame=	"emulates a massive variety of arcade machines"
COMMENT-mess=	"emulates game consoles and old home computers"
d25 4
a28 4
PERMIT_PACKAGE_CDROM=	"may not sell"
PERMIT_PACKAGE_FTP=	"Yes"
PERMIT_DISTFILES_CDROM=	"may not sell"
PERMIT_DISTFILES_FTP=	"Yes"
@


1.28
log
@Use xenocara expat.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/11/26 09:54:34 espie Exp $
d10 3
a12 3
PKGNAME-main=	xmame+xmess-${VERSION}p1
PKGNAME-mame=	xmame-${VERSION}p0
PKGNAME-mess=	xmess-${VERSION}p0
d15 3
a17 6
MASTER_SITES=	${HOMEPAGE}/download/ \
		${HOMEPAGE}/download/historic/ \
		ftp://ftp.kaupp.cx/pub/xmame/ \
		http://www.atlantilde.com/~aanriot/distfiles/
MASTER_SITES0=	http://www.mameworld.net/highscore/ \
		http://www.atlantilde.com/~aanriot/distfiles/
a20 6
HISCORE_FILE=	uhsdat${VERSION:S/.//}.zip
HISTORY_FILE=	history1_02.zip
CHEAT_FILE=	cheat_20051018.zip
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} ${HISCORE_FILE}:0 \
		${HISTORY_FILE} ${CHEAT_FILE}

d24 1
a24 2
# xmame license, see
# http://x.mame.net/license.html
d40 1
a40 6
FLAVORS=	x11 sdl
FLAVORS+=	esd

#XXX arts coredumps, net broken
#FLAVORS+=	arts net

a56 11
# XXX coredump
#.if ${FLAVOR:L:Marts}
#LIB_DEPENDS+=	artsc::x11/kde/arts3
#MAKE_FLAGS+=	SOUND_ARTS_SMOTEK=1 SOUND_ARTS_TEIRA=1
#.endif

# XXX broken
#.if ${FLAVOR:L:Mnet}
#MAKE_FLAGS+=	XMAME_NET=1
#.endif

a127 5
post-extract:
	${UNZIP} -u ${FULLDISTDIR}/${HISCORE_FILE} -d ${WRKDIR}
	${UNZIP} -u ${FULLDISTDIR}/${HISTORY_FILE} -d ${WRKDIR}
	${UNZIP} -u ${FULLDISTDIR}/${CHEAT_FILE} -d ${WRKDIR}

a155 1
	${INSTALL_DATA} ${WRKDIR}/*.{dat,txt} ${PREFIX}/share/xmame
@


1.27
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/11/20 13:07:20 espie Exp $
d10 3
a12 3
PKGNAME-main=	xmame+xmess-${VERSION}p0
PKGNAME-mame=	xmame-${VERSION}
PKGNAME-mess=	xmess-${VERSION}
d39 1
a39 1
WANTLIB=		X11 Xext Xv Xxf86dga Xxf86vm c m usbhid z
a103 2
LIB_DEPENDS+=	expat::textproc/expat

d110 2
a111 2
		INCLUDES="-I${LOCALBASE}/include" \
		LIBS="-L${LOCALBASE}/lib -lexpat -lz" GLLIBS="" \
@


1.26
log
@fix a few obviously wrong dependencies, and remove extra shells in ghc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/08/18 17:09:23 kurt Exp $
d3 1
a3 1
COMMENT=	"emulates arcade machines and old home computers"
d10 1
a10 1
PKGNAME=	xmame+xmess-${VERSION}
d48 1
a48 1
MULTI_PACKAGES=	-mame -mess
@


1.25
log
@this won't run on macppc anytime soon since the huge executable's .text
size exceeds MAXTSIZ on macppc so remove powerpc from ONLY_FOR_ARCHS.
reported by marco@@ okay nikolay@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/08/16 16:55:09 kurt Exp $
d90 1
a90 1
BUILD_DEPENDS+=	nasm::devel/nasm
@


1.24
log
@fix "relocation truncated to fit" errors on powerpc. with input and
okay nikolay@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/06/06 09:23:16 aanriot Exp $
d31 1
a31 1
ONLY_FOR_ARCHS=	amd64 alpha hppa i386 m68k powerpc sparc
a101 3
.elif ${MACHINE_ARCH} == "powerpc"
MAKE_FLAGS+=	MY_CPU=risc \
		LD="${CC} -Wl,-s,--relax"
@


1.23
log
@update MASTER_SITES*, atlantilde.com is now reachable with HTTP .
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/05/31 01:41:55 sturm Exp $
d100 1
a100 2
.elif ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "powerpc" || \
      ${MACHINE_ARCH} == "sparc"
d102 3
@


1.22
log
@remove ftp.erisiandiscord.de from MASTER_SITES, it is dead
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/04/01 07:20:33 jsg Exp $
d18 1
a18 1
		ftp://ftp.atlantilde.com/pub/distfiles/
d20 1
a20 1
		ftp://ftp.atlantilde.com/pub/distfiles/
@


1.21
log
@Update to 0.104

Remove $MAINTAINER due to lack response to mail.

"seems good" niallo@@ ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/12/31 15:56:09 sturm Exp $
a16 1
		ftp://ftp.erisiandiscord.de/pub/misc/ \
a19 1
		ftp://ftp.erisiandiscord.de/pub/misc/ \
@


1.20
log
@mirror distfiles on my server (requested by aanriot@@)
and use xmame's historic/ directory
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/11/12 04:25:22 kurt Exp $
d7 1
a7 1
VERSION=	0.100
d10 3
a12 3
PKGNAME=	xmame+xmess-${VERSION}p2
PKGNAME-mame=	xmame-${VERSION}p2
PKGNAME-mess=	xmess-${VERSION}p2
a24 2

MAINTAINER=	Claudio Castiglia <ccastig@@mail.ru>
@


1.19
log
@remove RTLD_GLOBAL work-around. also fix some warnings from rc file
entries from mantainer Claudio Castiglia <ccastiglia@@gmail.com>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/11/03 22:04:41 aanriot Exp $
d16 2
d21 1
@


1.18
log
@mirror the other distfiles as they have gone away.

spotted by and ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/10/18 19:08:00 aanriot Exp $
d10 3
a12 3
PKGNAME=	xmame+xmess-${VERSION}p1
PKGNAME-mame=	xmame-${VERSION}p1
PKGNAME-mess=	xmess-${VERSION}p1
d112 1
a112 1
		CC="${CC}" CFLAGS="${CFLAGS} -DRTLD_GLOBAL=0" \
@


1.17
log
@- reorder includes (problem spotted by naddy)
- mirror a distfile which has gone away
- add a version number to cheat.zip
- cleanings

no binary change;
discussed with fgsch@@ and Claudio Castiglia, ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/10/04 02:21:41 fgsch Exp $
d16 4
a19 3
		ftp://ftp.kaupp.cx/pub/xmame/
MASTER_SITES0=	http://www.mameworld.net/highscore/
MASTER_SITES1=	ftp://ftp.atlantilde.com/pub/distfiles/
d29 1
a29 1
		${HISTORY_FILE}:1 ${CHEAT_FILE}:1
@


1.16
log
@enable DGA on amd64 as well; bump package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/10/02 20:56:38 espie Exp $
d10 4
d15 2
a16 2
MASTER_SITES=   ${HOMEPAGE}/download/ \
                ftp://ftp.kaupp.cx/pub/xmame/
d18 1
a18 3
MASTER_SITES1=	http://www.arcade-history.com/download/
MASTER_SITES2=	http://cheat.retrogames.com/ \
		${MASTER_SITE_BACKUP}
d26 1
a26 1
CHEAT_FILE=	cheat.zip
d28 1
a28 1
		${HISTORY_FILE}:1 ${CHEAT_FILE}:2
a48 4

PKGNAME=	xmame+xmess-${VERSION}p1
PKGNAME-mame=	xmame-${VERSION}p1
PKGNAME-mess=	xmess-${VERSION}p1
@


1.15
log
@YES, a license change affects the generated packages, since it changes
the extrainfo line from ftp=no to ftp=yes.
So bump the names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/10/02 20:36:49 aanriot Exp $
d48 3
a50 3
PKGNAME=	xmame+xmess-${VERSION}p0
PKGNAME-mame=	xmame-${VERSION}p0
PKGNAME-mess=	xmess-${VERSION}p0
d90 2
a91 1
.if ${MACHINE_ARCH} == "i386"
d93 1
a93 2
MAKE_FLAGS+=	MY_CPU=i386 \
		X86_ASM_68000=1 \
d95 2
d100 1
a100 2
.elif ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "m68k" || \
      ${MACHINE_ARCH} == "amd64"
@


1.14
log
@fix a license part issue spotted by naddy.

"go ahead" fgsch@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/10/02 01:39:37 fgsch Exp $
d48 3
a50 3
PKGNAME=	xmame+xmess-${VERSION}
PKGNAME-mame=	xmame-${VERSION}
PKGNAME-mess=	xmess-${VERSION}
@


1.13
log
@Update to xmame/mess 0.100; from maintainer.
add amd64 support.  aanrio@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/11/27 10:39:14 espie Exp $
d31 2
d34 1
a34 1
PERMIT_PACKAGE_FTP=	"may not sell"
d36 1
a36 1
PERMIT_DISTFILES_FTP=	"may not sell"
@


1.12
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/11/20 20:41:00 alek Exp $
d7 1
a7 1
VERSION=	0.56.2
d11 6
a16 5
MASTER_SITES=	${HOMEPAGE}/download/ \
		ftp://ftp.kaupp.cx/pub/xmame/
MASTER_SITES0=	http://www.mame.net/zips/
MASTER_SITES1=	http://www.sys2064.com/files/mame/
MASTER_SITES2=	${MASTER_SITE_BACKUP}
d20 1
a20 1
MAINTAINER=	Claudio Castiglia <ccastig@@softhome.net>
d22 2
a23 2
HISCORE_FILE=	hsdat7.zip
HISTORY_FILE=	history.zip
d25 2
a26 2
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} ${HISCORE_FILE}:0 ${HISTORY_FILE}:1 \
		${CHEAT_FILE}:2
d29 1
a29 1
ONLY_FOR_ARCHS=	alpha hppa i386 m68k powerpc sparc
d35 1
a35 1
WANTLIB=		X11 Xext Xxf86dga Xxf86vm c m usbhid z
d46 3
a48 3
PKGNAME=	xmame+xmess-${VERSION}p0
PKGNAME-mame=	xmame-${VERSION}p0
PKGNAME-mess=	xmess-${VERSION}p0
d50 2
a51 1
VIDEOF=		x11 gl sdl
d53 2
a54 2
FLAVORS=	${VIDEOF}
# FLAVORS+=	arts esd
d58 2
a59 14
EXFL?=
EXFI?=

# Video flavors are mutually exclusive
.for i in ${FLAVOR:L}
.  if ${VIDEOF:L:M${i}}
EXFL+=		${i}
.    if empty (EXFI)
EXFI+=		${i}
.    endif
.  endif
.endfor
.if   ${EXFL} != ${EXFI}
ERRORS+=	"Fatal: Mutually exclusive flavors: ${EXFL}."
d63 1
a63 6
# Default video flavor is X11
.if empty (EXFI)
FLAVOR+=	x11
.endif

.if   ${FLAVOR:L:Msdl}
a65 3
.elif ${FLAVOR:L:Mgl}
DISPLAY_METHOD=	xgl
LIB_DEPENDS+=	jpeg.::graphics/jpeg
d68 2
d73 3
a75 3
#.if  ${FLAVOR:L:Marts}
#MAKE_FLAGS+=	SOUND_ARTS_SMOTEK=1
#LIB_DEPENDS+=	artsc::x11/kde/libs2
d77 4
a80 4
#
#.if  ${FLAVOR:L:Mesd}
#MAKE_FLAGS+=	SOUND_ESOUND=1
#LIB_DEPENDS+=	esd::audio/esound
d83 23
d112 2
a113 3
		INCLUDES="-I${LOCALBASE}/include" LIBS="-L${LOCALBASE}/lib" \
		X11INC="-I${X11BASE}/include" X11LIB="-L${X11BASE}/lib" \
		GLLIBS="-pthread" \
d124 1
a124 9
DOCS=	changes.mame changes.mess changes.opengl changes.unix credits.mess \
	dga2.txt gamelist.mame gamelist.mess imgtool.txt liesmich.unix \
	messroms.txt multiplayer-readme.txt old-changes.mess readme.mame \
	readme.mess xmame-doc-1.html xmame-doc-2.html xmame-doc-3.html \
	xmame-doc-4.html xmame-doc-5.html xmame-doc-6.html xmame-doc-7.html \
	xmame-doc-8.html xmame-doc.html xmame-doc.lyx xmame-doc.man.skel \
	xmame-doc.txt xmame-gdoc-1.html xmame-gdoc-2.html xmame-gdoc-3.html \
	xmame-gdoc-4.html xmame-gdoc-5.html xmame-gdoc-6.html \
	xmame-gdoc-7.html xmame-gdoc-8.html xmame-gdoc.html xmame.css
d126 2
a127 17
.if   ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	nasm::devel/nasm
MAKE_FLAGS+=	MY_CPU=i386 \
		X86_ASM_68000=1 \
		NASM_FMT="-f elf" \
		ASM_STRIP="src/unix/contrib/porting/strip_"
.  if   ${DISPLAY_METHOD} == "x11"
MAKE_FLAGS+=	X11_DGA=1
.  elif ${DISPLAY_METHOD} != "SDL"
MAKE_FLAGS+=	JOY_I386=1
.  endif
.elif ${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "m68k"
MAKE_FLAGS+=	MY_CPU=${MACHINE_ARCH}
.elif ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "powerpc" || \
      ${MACHINE_ARCH} == "sparc"
MAKE_FLAGS+=	MY_CPU=risc
.endif
d129 26
a154 1
NO_REGRESS=	Yes
a159 1
	cp ${WRKSRC}/doc/xmame.6 ${WRKSRC}/doc/xmess.6
d165 5
d177 9
a185 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/xmame
d188 4
a191 4
	perl -i -pe 's:%%PREFIX%%:${TRUEPREFIX}:' ${PREFIX}/share/xmame/xmamerc
	${INSTALL_DATA} ${WRKDIR}/*.dat ${PREFIX}/share/xmame
	${INSTALL_DATA} ${WRKDIR}/*.txt ${PREFIX}/share/doc/xmame
	${INSTALL_DATA_DIR} ${PREFIX}/share/xmess
d194 1
a194 2
	perl -i -pe 's:%%PREFIX%%:${TRUEPREFIX}:' ${PREFIX}/share/xmess/xmessrc
	${INSTALL_DATA} ${WRKSRC}/doc/sysinfo.dat ${PREFIX}/share/xmess
@


1.11
log
@- Remove MESSAGEs that wasn't really needed
- Add @@sample
- Bump PKGNAME

ok MAINTAINER pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/10/11 01:37:55 brad Exp $
d34 1
@


1.10
log
@use MASTER_SITE_BACKUP.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/09/22 22:53:37 pvalchev Exp $
d44 3
a46 3
PKGNAME=	xmame+xmess-${VERSION}
PKGNAME-mame=	xmame-${VERSION}
PKGNAME-mess=	xmess-${VERSION}
@


1.9
log
@mark bad/incomplete/missing licenses as such.
most work by nikolay, comments from naddy

the ports tree is now open for commits
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/04/17 07:47:22 pvalchev Exp $
d15 1
a15 1
MASTER_SITES2=	http://cheat.retrogames.com/
@


1.8
log
@nasm -f elf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/10/26 12:52:48 naddy Exp $
d30 4
a33 4
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.7
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/03/22 06:38:35 fgsch Exp $
d131 2
a132 2
		NASM_FMT="-f aoutb" \
		ASM_STRIP="true"
@


1.6
log
@add warning about virtual memory exhausted.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/02/05 15:27:17 naddy Exp $
a9 1
NEED_VERSION=	1.500
d144 2
@


1.5
log
@Update to 0.56.2.
Submitted by maintainer Claudio Castiglia <ccastig@@softhome.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/01/10 02:09:52 naddy Exp $
d37 2
@


1.4
log
@* update to 0.37b15.2; from maintainer Claudio Castiglia <ccastig@@softhome.net>
* handle libusb -> libusbhid change
* respect CC, CFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/09/30 17:21:52 naddy Exp $
d7 1
a7 1
VERSION=	0.37b15.2
d24 1
a24 1
CHEAT_FILE=	cheat37b2.zip
d67 1
a67 1
ERRORS+=        "Fatal: Mutually exclusive flavors: ${EXFL}."
d71 5
d116 10
d148 1
d154 3
a156 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame
d158 3
a160 1
	${INSTALL_DATA} ${WRKSRC}/doc/* ${PREFIX}/share/doc/xmame
d164 1
a164 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/xmame
d170 2
@


1.3
log
@- cheat distfile changed; from Claudio Castiglia <ccastig@@softhome.net>
- add USB joystick support
- fix order of includes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/08/12 23:03:10 naddy Exp $
d7 1
a7 1
VERSION=	0.37b13.2
d10 1
a10 1
NEED_VERSION=	1.427
d47 1
a47 2
FLAVORS=	x11 gl sdl
FLAVOR?=	x11
d49 23
a71 1
.if   ${FLAVOR} == "sdl"
d74 1
a74 1
.elif ${FLAVOR} == "gl"
d77 1
a77 1
.elif ${FLAVOR} == "x11"
a78 11
.else
.  for i in ${FLAVOR:L}
.    if ${FLAVORS:L:M${i}}
EXFL+=		${i}
EXFI?=		${i}
.    endif
.  endfor
.  if ${EXFL} != ${EXFI}
ERRORS+=	"Fatal: Mutually exclusive flavors: ${EXFL}."
.  endif
DISPLAY_METHOD=
d81 11
d95 2
a96 1
MAKE_FLAGS=	ARCH=openbsd \
d100 1
a100 1
		GLLIBS="-pthread" CFLAGS="-DRTLD_GLOBAL=0" \
d112 5
a116 1
MAKE_FLAGS+=	MY_CPU=i386
d129 5
d138 3
a140 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame/sysinfo
	@@cd ${WRKSRC}/doc && find . -type f \
		-exec ${INSTALL_DATA} {} ${PREFIX}/share/doc/xmame/{} \;
a143 3
	${UNZIP} -u ${FULLDISTDIR}/${HISCORE_FILE} -d ${WRKDIR}
	${UNZIP} -u ${FULLDISTDIR}/${HISTORY_FILE} -d ${WRKDIR}
	${UNZIP} -u ${FULLDISTDIR}/${CHEAT_FILE} -d ${WRKDIR}
d145 2
a146 2
	${INSTALL_DATA} ${WRKDIR}/*dat ${PREFIX}/share/xmame
	${INSTALL_DATA} ${WRKDIR}/*txt ${PREFIX}/share/doc/xmame
@


1.2
log
@- Update to 0.37b13.2.
- Add SDL flavor.
- Add hiscores, histories, cheats.
- Add example rc files.

Submitted by Claudio Castiglia <ccastig@@softhome.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/04/04 14:31:54 naddy Exp $
d24 1
a24 1
CHEAT_FILE=	cheat.zip
d86 2
a87 1
		SYSCONFDIR="${SYSCONFDIR}"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 3
a5 3
COMMENT=	emulates arcade machines and old home computers
COMMENT-mame=	emulates a massive variety of arcade machines
COMMENT-mess=	emulates game consoles and old home computers
d7 1
a7 1
VERSION=	0.37b11.2
d9 2
a10 1
NEED_VERSION=	1.377
d14 3
d22 6
d47 2
a48 2
FLAVORS=	gl
FLAVOR?=
d50 4
a53 2
.if ${FLAVOR:L:Mgl}
LIB_DEPENDS+=	GLU.3::graphics/Mesa
d55 3
d59 10
a68 1
DISPLAY_METHOD=	x11
d78 1
d85 2
a86 1
		INSTALL_DATA="${INSTALL_DATA}"
d89 6
a94 1
MAKE_FLAGS+=	MY_CPU=i386 JOY_I386=1 X11_DGA=1
d106 15
a120 3
	@@echo "\nInstalling extra documentation..."
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmame
	${INSTALL_DATA} ${WRKSRC}/doc/* ${PREFIX}/share/doc/xmame
@


1.1.1.1
log
@Import of xmame/xmess 0.37b11.2.
Submitted by Claudio Castiglia <ccastig@@softhome.net>.

Multi Arcade Machine Emulator and Multi Emulator Super System.
Emulates a staggering number of old arcade machines and game consoles.
@
text
@@
