head	1.3;
access;
symbols
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2005.10.13.09.06.54;	author kevlo;	state dead;
branches;
next	1.2;

1.2
date	2005.01.31.06.18.23;	author kevlo;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.01.06.18.14;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to spim 7.2.1
@
text
@$OpenBSD: patch-spim_c,v 1.2 2005/01/31 06:18:23 kevlo Exp $
--- spim.c.orig	Mon Jan  3 00:03:50 2005
+++ spim.c	Mon Jan 31 13:40:55 2005
@@@@ -32,6 +32,7 @@@@
 #include <ctype.h>
 #include <setjmp.h>
 #include <signal.h>
+#include <netinet/in.h>
 #include <arpa/inet.h>
 #include <sys/ioctl.h>
 
@@@@ -1016,7 +1017,8 @@@@ console_to_program ()
 #ifdef USE_TERMIOS
       struct termios params;
 
-      ioctl (console_in.i, TCGETA, (char *) &saved_console_state);
+      tcgetattr(console_in.i, &saved_console_state);
+
       params = saved_console_state;
       params.c_iflag &= ~(ISTRIP|IUCLC|INLCR|ICRNL|IGNCR|IXON|IXOFF|IXANY|INPCK|BRKINT|PARMRK);
 
@@@@ -1027,7 +1029,7 @@@@ console_to_program ()
       params.c_lflag = 0;
       params.c_cc[VMIN] = 1;
       params.c_cc[VTIME] = 1;
-      ioctl ((int)console_in.i, TCSETA, (char *) &params);
+      tcsetattr(console_in.i, TCSANOW, &params);
 #else
       int flags;
       ioctl ((int) console_in.i, TIOCGETP, (char *) &saved_console_state);
@@@@ -1048,7 +1050,7 @@@@ console_to_spim ()
 {
   if (mapped_io && console_state_saved)
 #ifdef USE_TERMIOS
-    ioctl ((int) console_in.i, TCSETA, (char *) &saved_console_state);
+    tcsetattr(console_in.i, TCSANOW, &saved_console_state);
 #else
     ioctl ((int) console_in.i, TIOCSETP, (char *) &saved_console_state);
 #endif
@


1.2
log
@upgrade to spim 7.1
@
text
@d1 1
a1 1
$OpenBSD: patch-spim_c,v 1.1 2004/10/01 06:18:14 robert Exp $
@


1.1
log
@update to 7.0; fix the patches; from MAINTAINER
@
text
@d1 3
a3 3
$OpenBSD$
--- spim.c.orig	Fri Oct  1 08:03:15 2004
+++ spim.c	Fri Oct  1 08:06:33 2004
d12 28
@

