head	1.13;
access;
symbols
	OPENBSD_6_1:1.13.0.2
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.10.0.6
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.2
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.9.0.4
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.9.0.2
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.2
	edd_20120123:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2017.02.28.21.29.05;	author edd;	state Exp;
branches;
next	1.12;
commitid	H0RA3iDMfx56K86y;

1.12
date	2016.05.14.14.11.21;	author landry;	state Exp;
branches;
next	1.11;
commitid	WuyIum58v2tFHy2o;

1.11
date	2015.11.24.10.26.02;	author bentley;	state Exp;
branches;
next	1.10;
commitid	Q1Klg0kc0qP8kJZx;

1.10
date	2014.08.19.05.50.29;	author landry;	state Exp;
branches;
next	1.9;
commitid	rGD2IksfmhkIj7ZZ;

1.9
date	2013.11.25.14.16.22;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.11.09.14.12.28;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.23.02.12.21;	author edd;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.11.11.06.03;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2012.11.19.23.31.55;	author edd;	state Exp;
branches;
next	1.4;

1.4
date	2012.03.13.11.15.02;	author edd;	state Exp;
branches;
next	1.3;

1.3
date	2012.02.29.21.38.31;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2012.02.18.01.16.08;	author edd;	state Exp;
branches;
next	1.1;

1.1
date	2012.01.23.09.22.59;	author edd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.01.23.09.22.59;	author edd;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Stop emulators/dgen-sdl from picking up doxygen.

Since doxygen isn't a BUILD_DEPEND (and we don't install any doxygen docs
anyway), it can disappear mid-build during a bulk.

Spotted by, and OK, naddy@@. Thanks.
@
text
@# $OpenBSD: Makefile,v 1.12 2016/05/14 14:11:21 landry Exp $

BROKEN-alpha =		OOM or ICE on hqx/src/hq4x_32.c
BROKEN-hppa =		OOM or ICE on hqx/src/hq4x_32.c
BROKEN-powerpc =	OOM or ICE on hqx/src/hq4x_32.c
COMMENT =		Sega Megadrive/Genesis emulator
DISTNAME =		dgen-sdl-1.33
CATEGORIES =		emulators games
HOMEPAGE =		http://dgen.sourceforge.net/
MAINTAINER =		Edd Barrett <edd@@openbsd.org>

FLAVORS =		debugger
FLAVOR ?=

# Various parts of dgen are under different licenses
# Mainly a 3 clause BSD license, but also:
#  - musa non-commercial license
#  - starscream non-commercial license
#  - mz80 non-commercial license
#  - cz80 non-commercial license
#  - scale2x GPLv2
#  - hqx LGPL
PERMIT_PACKAGE_CDROM =	No
PERMIT_PACKAGE_FTP =	Yes

WANTLIB =		GL SDL archive c m pthread stdc++

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=dgen/}

BUILD_DEPENDS =		devel/sdl

# optimisation for x86 using asm
.if ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS +=        devel/nasm
.endif

LIB_DEPENDS =		devel/sdl \
			archivers/libarchive

CONFIGURE_STYLE =	gnu
CONFIGURE_ENV +=	LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS +=	--without-doxygen

# m68k debugger, at a slight performance cost
.if ${FLAVOR:Mdebugger}
CONFIGURE_ARGS +=	--enable-debugger
.endif

SAMPLEDIR =	${PREFIX}/share/examples/dgen-sdl/
DOCDIR =	${PREFIX}/share/doc/dgen-sdl/
# cover our asses by providing copies of the non-free(ish) licenses
# particularly starscream:
# "Starscream may be distributed freely in unmodified form, as long as this
# documentation is included."
LICENSES =	musa/musa-readme.txt star/stardoc.txt \
		mz80/mz80.txt cz80/cz80-readme.txt
post-install:
	mkdir ${SAMPLEDIR}
	cp ${WRKSRC}/sample.dgenrc ${SAMPLEDIR}
	mkdir -p ${DOCDIR}
	cp ${WRKSRC}/musa/readme.txt ${WRKSRC}/musa/musa-readme.txt
	cp ${WRKSRC}/cz80/readme.txt ${WRKSRC}/cz80/cz80-readme.txt
.for i in ${LICENSES}
	cp ${WRKSRC}/$i ${DOCDIR}
.endfor

.include <bsd.port.mk>
@


1.12
log
@Mark BROKEN-macppc, it failed randomly too many times
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/11/24 10:26:02 bentley Exp $
d42 1
@


1.11
log
@Update to dgen-sdl-1.33.

ok edd@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/08/19 05:50:29 landry Exp $
d5 1
@


1.10
log
@BROKEN-hppa the same reason as alpha, build was never reliable and never
finished after spending days building the same file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/11/25 14:16:22 sthen Exp $
d6 1
a6 1
DISTNAME =		dgen-sdl-1.32
@


1.9
log
@kill VMEM_WARNING
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/11/09 14:12:28 landry Exp $
d4 1
@


1.8
log
@Mark those as BROKEN-alpha for various fully reproducible OOM/ICE reasons.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/23 02:12:21 edd Exp $
a33 4

# when building hq4x.o:
# cc1: out of memory allocating 4072 bytes after a total of 0 bytes
VMEM_WARNING = Yes
@


1.7
log
@Update to dgen-sdl-1.32.

OK bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/11 11:06:03 espie Exp $
d3 1
@


1.6
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/11/19 23:31:55 edd Exp $
d4 1
a4 1
DISTNAME =		dgen-sdl-1.31
@


1.5
log
@Update to dgen-1.31.

OK rfreeman@@, bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/03/13 11:15:02 edd Exp $
a21 2
PERMIT_DISTFILES_CDROM =No
PERMIT_DISTFILES_FTP =	Yes
@


1.4
log
@update to dgen-1.30

OK jeremy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/02/29 21:38:31 edd Exp $
d4 1
a4 1
DISTNAME =		dgen-sdl-1.30
@


1.3
log
@Fix usb joysticks when the device is not /dev/ugen0

From zamaz (upstream), many thanks.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/02/18 01:16:08 edd Exp $
d4 1
a4 2
DISTNAME =		dgen-sdl-1.29
REVISION =		0
d9 3
d18 2
d45 5
@


1.2
log
@Update to dgen-sdl-1.29.

Upstream took our joystick patches for this release, so they are gone.

Fixes some odd display bugs reported by rfreeman@@ and fixes some games for me also.

OK rfreeman@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/01/23 09:22:59 edd Exp $
d5 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.60 2010/10/24 20:41:23 ajacoutot Exp $
d4 1
a4 1
DISTNAME =		dgen-sdl-1.28
d30 4
@


1.1.1.1
log
@Import dgen-sdl-1.28; A Sega Megadrive/Genesis emulator.

Hopefully this can replace emulators/generator.

OK jeremy@@

@
text
@@
