head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.28
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.26
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.22
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.24
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.20
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.18
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.16
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.14
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.12
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.10
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.8
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2010.05.19.14.05.37;	author espie;	state Exp;
branches;
next	;


desc
@@


1.1
log
@clean-up very old code. gcc4 no longer complains
@
text
@$OpenBSD$
--- onewlib.c.orig	Sun Jul  2 09:55:41 1995
+++ onewlib.c	Wed May 19 15:54:13 2010
@@@@ -19,6 +19,7 @@@@
 #define STATIC static
 
 #include <stdio.h>
+#include <string.h>
 #include <ctype.h>
 #include "onew.h"
 
@@@@ -101,7 +102,12 @@@@ enq_keyinQ(c){ return strQenq(rawc_inbuff,c); }
 deq_keyinQ(){  return strQdeq(rawc_inbuff);   }
 ready_keyinQ(){ return rawc_inbuff[0] != 0; }
 
+static int definedKanamode(unsigned char);
+static void romkan_modesw();
 char *romkan_cmode();
+static void thru_char1(int);
+static Onew_kakuteiInRomkan(int);
+
 int ONEW_getch_asis; /* never interpret as command keys */
 
 ONEW_getch0(asis){
@@@@ -116,9 +122,6 @@@@ ONEW_getch0(asis){
 }
 ONEW_getch1(){
    int ch;
-   static definedKanamode();
-   static romkan_modesw();
-   static thru_char1();
 
    for(;;){
 	ch = ONEW_getch0(ONEW_getch_asis);
@@@@ -180,7 +183,7 @@@@ static IFUNC KanamodeSw[128];
 static int kanamodes[16];
 static int kanamodex;
 
-static definedKanamode(ch)
+static int definedKanamode(ch)
 	unsigned char ch;
 {	IFUNC func;
 
@@@@ -198,13 +201,13 @@@@ Onew_defineKanamode(mode,ch,func)
 }
 
 
-static romkan_modesw(){
+static void romkan_modesw(){
 	int cmode;
 
 	cmode = ONEW_getch1();
 	romkan_mode_switch(cmode);
 }
-static thru_char1(ch){
+static void thru_char1(ch){
 	ins_keyinQ(ch);
 	ins_keyinQ(ONEW_I_THRU_NEXTCH);
 }
@@@@ -313,7 +316,6 @@@@ Onew_RK_init(){
 
 kget_char1(){
 	unsigned int kc;
-   	static Onew_kakuteiInRomkan();
 
 	if( !Onew_RK_init() ){
 		kc = OnewGetchar();
@
