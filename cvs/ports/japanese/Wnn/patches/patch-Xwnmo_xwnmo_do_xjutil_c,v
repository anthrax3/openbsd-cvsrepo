head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.2
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.2.0.8
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.14
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.12
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.10
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.8
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.6
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2017.04.29.14.31.40;	author espie;	state Exp;
branches;
next	1.2;
commitid	BANaREjfB2FZ9POp;

1.2
date	2015.07.25.16.47.12;	author espie;	state Exp;
branches;
next	1.1;
commitid	lfUoLFpbeIFyf3Ry;

1.1
date	2011.11.13.13.24.14;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@fixes for clang: don't compile a clone of getopt.
while there, fix system includes, implicit ints, and void main.
@
text
@$OpenBSD: patch-Xwnmo_xwnmo_do_xjutil_c,v 1.2 2015/07/25 16:47:12 espie Exp $
--- Xwnmo/xwnmo/do_xjutil.c.orig
+++ Xwnmo/xwnmo/do_xjutil.c
@@@@ -37,6 +37,7 @@@@
 #ifdef	USING_XJUTIL
 
 #include <stdio.h>
+#include <stdlib.h>
 #include <sys/wait.h>
 #include <signal.h>
 #include <X11/Xos.h>
@@@@ -247,18 +248,14 @@@@ int counter;
     } else {
 	p = (unsigned char *)xjutil_name;
     }
-    execlp((char*)p, (char*)p, DisplayString(dpy), prop_name, tmp, 0);
+    execlp((char*)p, (char*)p, DisplayString(dpy), prop_name, tmp, NULL);
 }
 
 static void
 catch_sigchld()
 {
     XIMLangDataBase *ld;
-#ifdef SYSVR2
-   int status;
-#else
-    union wait status;
-#endif
+    int status;
     int pid;
 
 #ifdef SYSVR2
@


1.2
log
@move to new auth checks. Add "a few" includes to placate a lot of warnings.
(and bump affected packages of course)
@
text
@d1 3
a3 3
$OpenBSD: patch-Xwnmo_xwnmo_do_xjutil_c,v 1.1 2011/11/13 13:24:14 naddy Exp $
--- Xwnmo/xwnmo/do_xjutil.c.orig	Tue Aug 23 10:16:57 1994
+++ Xwnmo/xwnmo/do_xjutil.c	Fri Jul 24 18:29:45 2015
d12 9
a20 1
@@@@ -254,11 +255,7 @@@@ static void
@


1.1
log
@don't use union wait
@
text
@d1 12
a12 4
$OpenBSD$
--- Xwnmo/xwnmo/do_xjutil.c.orig	Sun Nov 13 06:08:50 2011
+++ Xwnmo/xwnmo/do_xjutil.c	Sun Nov 13 06:09:04 2011
@@@@ -254,11 +254,7 @@@@ static void
@

