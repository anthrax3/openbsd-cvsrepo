head	1.3;
access;
symbols
	OPENBSD_2_6:1.2.0.4
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2000.04.16.21.53.32;	author espie;	state dead;
branches;
next	1.2;

1.2
date	98.11.22.00.13.44;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	98.07.29.01.31.20;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Loads of changes, not quite finished yet.

- format man pages using new jgroff, so that we can install a full set
of documentation.
- move INSTALL script into a separate script, so that adding a new user
need not be done at the time of INSTALL.
- add a few strlcpy to fix a few holes. This stuff is rather bad, though.
- use terminfo instead of termcap, for better keycap names, fixing quite
a few bugs that made it impossible to build that version along the way...
- move scripts into /usr/local/bin instead of /usr/local/bin/Wnn4.

- use @@comment no checksum
in packing list, even though pkg_add does not support that yet.
Not quite completely ready, but getting there...
@
text
@diff -arcN ../Xsi.org/Wnn/jlib/js.c ./Wnn/jlib/js.c
*** ../Xsi.org/Wnn/jlib/js.c	Fri Aug 19 10:30:48 1994
--- ./Wnn/jlib/js.c	Tue Aug 20 21:39:15 1996
***************
*** 221,227 ****
  #endif
  	return -1;
      }
!     if (connect(sd,(caddr_t)&saddr,strlen(saddr.sun_path)+sizeof(saddr.sun_family)) == ERROR) {
  
  #if DEBUG
  	xerror("jslib:Can't connect socket.\n");
--- 221,227 ----
  #endif
  	return -1;
      }
!     if (connect(sd,(caddr_t)&saddr,SUN_LEN(&saddr)) == ERROR) {
  
  #if DEBUG
  	xerror("jslib:Can't connect socket.\n");
diff -arcN ../Xsi.org/Wnn/pubdic/Imakefile ./Wnn/pubdic/Imakefile
*** ../Xsi.org/Wnn/pubdic/Imakefile	Tue Aug 23 11:21:30 1994
--- ./Wnn/pubdic/Imakefile	Wed Aug 21 20:13:36 1996
***************
*** 96,106 ****
  instserver:: install
  
  WnnMakeDirectories(install,$(JWNNDICDIR))
! #if WnnInstallDicForcibly
  InstallMultiple($(DIC),$(JWNNPUBDICDIR))
  
  install::
! 	@@for i in $(DICS); \
  	do \
  		$(WNNTOUCH) $(DESTDIR)$(JWNNPUBDICDIR)/$$i ;\
  	done
--- 96,112 ----
  instserver:: install
  
  WnnMakeDirectories(install,$(JWNNDICDIR))
! /*
!  * Bugfix.
!  * Because "NO" is same to "YES"!!
!  * And some additional bugfix.
!  * Patched by Hidekazu Kuroki(hidekazu@@cs.titech.ac.jp)		1996/8/20
!  */
! #if (WnnInstallDicForcibly == YES)
  InstallMultiple($(DIC),$(JWNNPUBDICDIR))
  
  install::
! 	@@for i in $(DIC); \
  	do \
  		$(WNNTOUCH) $(DESTDIR)$(JWNNPUBDICDIR)/$$i ;\
  	done
***************
*** 108,114 ****
--- 114,133 ----
  #else
  WnnInstallDicMultiple($(DIC),$(JWNNPUBDICDIR))
  #endif
+ 
+ #if (WnnInstallDicForcibly == YES)
  InstallMultiple($(FZKDATA),$(JWNNPUBDICDIR))
+ 
+ install::
+ 	@@for i in $(FZKDATA); \
+ 	do \
+ 		$(WNNTOUCH) $(DESTDIR)$(JWNNPUBDICDIR)/$$i ;\
+ 	done
+ 
+ #else
+ WnnInstallDicMultiple($(FZKDATA),$(JWNNPUBDICDIR))
+ #endif
+ 
  InstallMultiple($(FZK_SRC),$(JWNNFZKSRCDIR))
  
  depend::
diff -arcN ../Xsi.org/config/Project.tmpl ./config/Project.tmpl
*** ../Xsi.org/config/Project.tmpl	Mon Aug 29 17:40:17 1994
--- ./config/Project.tmpl	Wed Aug 21 20:07:05 1996
***************
*** 389,394 ****
--- 389,396 ----
  XCOMM -----------------------------------------------------------------------
  XCOMM X Window System make variables; these need to be coordinated with rules
  
+ XCOMM    SYS_LIBRARIES = -lcrypt		/* For FreeBSD, not OpenBSD */
+ 
  /*
   * This list must be reflected in the DIRS_TO_BUILD list in the top-level
   * Makefile.
***************
*** 413,418 ****
--- 415,423 ----
        XAPPLOADDIR = XAppLoadDir		/* application default resource dir */
         FONTCFLAGS = FontCompilerFlags
  
+      INSTINCFLAGS = InstIncFlags -c     /* XXX - dirty hack by */
+      INSTDATFLAGS = InstDatFlags -c     /* XXX -  Satoshi */
+      INSTBINFLAGS = InstBinFlags -c     /* XXX -   Asami */
       INSTAPPFLAGS = $(INSTDATFLAGS)	/* XXX - this should go away - XXX */
  
  #ifdef UseInstalled
***************
*** 1117,1126 ****
  #undef ImakeSubCmdHelper
  #endif 
  
  #ifdef UseInstalled
! #define ImakeSubCmdHelper $(IMAKE) -DUseInstalled -I$$imakeprefix$(IMIRULESRC) -I$(IRULESRC) $(IMAKE_DEFINES)
  #else
! #define ImakeSubCmdHelper $$imakeprefix$(IMAKE) -I$$imakeprefix$(IMIRULESRC) -I$$imakeprefix$(IRULESRC) $(IMAKE_DEFINES)
  #endif
  
  #define WnnInstallDicMultiple(list,dest)				@@@@\
--- 1122,1137 ----
  #undef ImakeSubCmdHelper
  #endif 
  
+ /*
+  * Change a variavle's name from "$imakeprefix" to "$(IMAKEPREFIX)".
+  * Because it caused a error on XFree86 3.1.2S and 3.1.2E.
+  * The Imake rule of XFree86 3.1.2S and 3.1.2E FreeBSD was changed.
+  * Patched by Hidekazu Kuroki(hidekazu@@cs.titech.ac.jp)		1996/8/20
+  */
  #ifdef UseInstalled
! #define ImakeSubCmdHelper $(IMAKE) -DUseInstalled -I$(IMAKEPREFIX)$(IMIRULESRC) -I$(IRULESRC) $(IMAKE_DEFINES)
  #else
! #define ImakeSubCmdHelper $(IMAKEPREFIX)$(IMAKE) -I$(IMAKEPREFIX)$(IMIRULESRC) -I$(IMAKEPREFIX)$(IRULESRC) $(IMAKE_DEFINES)
  #endif
  
  #define WnnInstallDicMultiple(list,dest)				@@@@\
***************
*** 1236,1243 ****
  #else
            IMTOP = $(CONTRIBSRC)/programs/Xsi
  #endif
!       WNNWNNDIR = /usr/local/lib/wnn
!       WNNBINDIR = /usr/local/bin
        WNNINCDIR = $(INCROOT)
        WNNLIBDIR = $(USRLIBDIR)
      WNNTERM_LIB = termLibrary
--- 1251,1259 ----
  #else
            IMTOP = $(CONTRIBSRC)/programs/Xsi
  #endif
!          PREFIX = /usr/local
!       WNNWNNDIR = ${PREFIX}/lib/wnn
!       WNNBINDIR = ${PREFIX}/bin
        WNNINCDIR = $(INCROOT)
        WNNLIBDIR = $(USRLIBDIR)
      WNNTERM_LIB = termLibrary
@


1.2
log
@remove a few looked over FreeBSD-isms.
@
text
@@


1.1
log
@
First cut at a japanese environment
@
text
@d87 1
a87 1
+     SYS_LIBRARIES = -lcrypt		/* For FreeBSD */
@

