head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.2
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.2.0.34
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.32
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.28
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.30
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.26
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.24
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.22
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.20
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.18
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.16
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.14
	OPENBSD_5_0:1.2.0.12
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.10
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.8
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.6
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.0.36
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.34
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.32
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.30
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.28
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.26
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.24
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.22
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.20
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.18
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.16
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.14
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.12
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.04.29.14.31.40;	author espie;	state Exp;
branches;
next	1.2;
commitid	BANaREjfB2FZ9POp;

1.2
date	2008.08.30.11.16.59;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.04.16.21.53.30;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@fixes for clang: don't compile a clone of getopt.
while there, fix system includes, implicit ints, and void main.
@
text
@$OpenBSD: patch-Wnn_conv_cvt_read_c,v 1.2 2008/08/30 11:16:59 espie Exp $
--- Wnn/conv/cvt_read.c.orig
+++ Wnn/conv/cvt_read.c
@@@@ -59,19 +59,11 @@@@
 #include <stdio.h>
 #include <ctype.h>
 #include "cvt_head.h"
-
-#ifdef BSD42
-#include <strings.h>
-#endif
-
-#ifdef SYSVR2
 #include <string.h>
-#include <fcntl.h>
-#ifdef TERMINFO
+
 #include <curses.h>
-#endif /* TERMINFO */
 #include <term.h>
-#endif
+#include <fcntl.h>
 
 #define ENTRY_LEN 10 /* ¥³¥ó¥Ð¡¼¥ÈÉ½¤Î¥¨¥ó¥È¥êÌ¾¤ÎºÇÂçÄ¹ */
 
@@@@ -437,6 +429,40 @@@@ int	flg; /* verbose¥â¡¼¥É¤Çµ¯¤³¤¹¤«¤Î¥Õ¥é¥°¡Êº£¤Î½ê¤½¤
 	keydef_key[i++] = stradd(&tdataptr, key_f29);
 	keydef_key[i++] = stradd(&tdataptr, key_f30);
 	keydef_key[i++] = stradd(&tdataptr, key_f31);
+#ifndef uniosu
+	keydef_key[i++] = stradd(&tdataptr, key_f32);
+	keydef_key[i++] = stradd(&tdataptr, key_f33);
+	keydef_key[i++] = stradd(&tdataptr, key_f34);
+	keydef_key[i++] = stradd(&tdataptr, key_f35);
+	keydef_key[i++] = stradd(&tdataptr, key_f36);
+	keydef_key[i++] = stradd(&tdataptr, key_f37);
+	keydef_key[i++] = stradd(&tdataptr, key_f38);
+	keydef_key[i++] = stradd(&tdataptr, key_f39);
+	keydef_key[i++] = stradd(&tdataptr, key_f40);
+	keydef_key[i++] = stradd(&tdataptr, key_f41);
+	keydef_key[i++] = stradd(&tdataptr, key_f42);
+	keydef_key[i++] = stradd(&tdataptr, key_f43);
+	keydef_key[i++] = stradd(&tdataptr, key_f44);
+	keydef_key[i++] = stradd(&tdataptr, key_f45);
+	keydef_key[i++] = stradd(&tdataptr, key_f46);
+	keydef_key[i++] = stradd(&tdataptr, key_f47);
+	keydef_key[i++] = stradd(&tdataptr, key_f48);
+	keydef_key[i++] = stradd(&tdataptr, key_f49);
+	keydef_key[i++] = stradd(&tdataptr, key_f50);
+	keydef_key[i++] = stradd(&tdataptr, key_f51);
+	keydef_key[i++] = stradd(&tdataptr, key_f52);
+	keydef_key[i++] = stradd(&tdataptr, key_f53);
+	keydef_key[i++] = stradd(&tdataptr, key_f54);
+	keydef_key[i++] = stradd(&tdataptr, key_f55);
+	keydef_key[i++] = stradd(&tdataptr, key_f56);
+	keydef_key[i++] = stradd(&tdataptr, key_f57);
+	keydef_key[i++] = stradd(&tdataptr, key_f58);
+	keydef_key[i++] = stradd(&tdataptr, key_f59);
+	keydef_key[i++] = stradd(&tdataptr, key_f60);
+	keydef_key[i++] = stradd(&tdataptr, key_f61);
+	keydef_key[i++] = stradd(&tdataptr, key_f62);
+	keydef_key[i++] = stradd(&tdataptr, key_f63);
+#endif
 #endif /* SUPPORT_TWODIGIT_FUNCTIONS */
 /* °Ê²¼½ç¤Ë
 	"kcuu1", "kcuf1", "kcub1", "kcud1", "khome",
@@@@ -505,14 +531,18 @@@@ int	flg;
 			termname);
 	fd = open("/dev/null", O_WRONLY, 0);
 	setupterm(termname, fd, &rsl);
-	close(fd);
+#ifndef __OpenBSD__
+	close(fd); 
+#endif
 	if(rsl != 1){
 		errdsp2("Can't get terminfo entry", termname);
 		 /* ¤³¤Î¤È¤­resetterm()¤ÏÉ¬Í×¤«¡© */
 		return(1);
 	}
 	convert_getstrs(flg);
-	resetterm();
+#ifndef __OpenBSD__
+	resetterm(); 
+#endif
 	return(0);
 }
 #endif
@


1.2
log
@restyle and regen patches, wow old stuff
@
text
@d1 19
a19 5
$OpenBSD: patch-Wnn_conv_cvt_read_c,v 1.1 2000/04/16 21:53:30 espie Exp $
--- Wnn/conv/cvt_read.c.orig	Thu Apr  8 03:59:13 1993
+++ Wnn/conv/cvt_read.c	Sat Aug 30 13:13:01 2008
@@@@ -72,6 +72,13 @@@@
 #endif /* TERMINFO */
d21 1
a21 6
 #endif
+#ifdef __OpenBSD__
+#ifdef TERMINFO
+#include <curses.h>
+#endif
+#include <term.h>
a22 1
+#endif
d26 1
a26 1
@@@@ -437,6 +444,40 @@@@ int	flg; /* verbose¥â¡¼¥É¤Çµ¯¤³¤¹¤«¤Î¥Õ¥é¥°¡Êº£¤Î½ê¤½¤
d67 1
a67 1
@@@@ -505,14 +546,18 @@@@ int	flg;
@


1.1
log
@Loads of changes, not quite finished yet.

- format man pages using new jgroff, so that we can install a full set
of documentation.
- move INSTALL script into a separate script, so that adding a new user
need not be done at the time of INSTALL.
- add a few strlcpy to fix a few holes. This stuff is rather bad, though.
- use terminfo instead of termcap, for better keycap names, fixing quite
a few bugs that made it impossible to build that version along the way...
- move scripts into /usr/local/bin instead of /usr/local/bin/Wnn4.

- use @@comment no checksum
in packing list, even though pkg_add does not support that yet.
Not quite completely ready, but getting there...
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ Wnn/conv/cvt_read.c	Sun Apr 16 02:05:08 2000
d18 1
a18 1
@@@@ -437,6 +444,40 @@@@ int	flg; /* verbose¥â¡¼¥É¤Çµ¯¤³¤¹¤«¤Î¥Õ¥
@

