head	1.18;
access;
symbols
	OPENBSD_6_1:1.14.0.2
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.10.0.10
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.6
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.4
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	fgsch_20120320:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.08.22.19.19.26;	author jasper;	state Exp;
branches;
next	1.17;
commitid	e9cU9RRr3kjk56IP;

1.17
date	2017.07.26.22.45.25;	author sthen;	state Exp;
branches;
next	1.16;
commitid	tD4MFrpYYDDL2UFT;

1.16
date	2017.07.16.19.18.57;	author espie;	state Exp;
branches;
next	1.15;
commitid	tt0GhWK5c4uf9ILG;

1.15
date	2017.04.10.11.46.22;	author sthen;	state Exp;
branches;
next	1.14;
commitid	BLsh88fJB8thZTwY;

1.14
date	2016.12.30.13.58.49;	author jsg;	state Exp;
branches;
next	1.13;
commitid	rIdbnqSmS8bUUkUY;

1.13
date	2016.10.01.11.54.16;	author naddy;	state Exp;
branches;
next	1.12;
commitid	VJ09Ih4WMjVIWTmz;

1.12
date	2016.04.29.11.19.35;	author naddy;	state Exp;
branches;
next	1.11;
commitid	t3wdG7C9Wz3Nx3M2;

1.11
date	2015.12.25.08.39.46;	author ajacoutot;	state Exp;
branches;
next	1.10;
commitid	lWzNW4D9TtO7X1J3;

1.10
date	2013.10.31.16.42.08;	author fgsch;	state Exp;
branches;
next	1.9;

1.9
date	2013.08.24.22.31.15;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2013.08.07.21.32.07;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.11.11.12.33;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2012.12.03.14.48.51;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.10.06.09.22.36;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2012.08.19.21.00.23;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.04.19.29.16;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2012.03.20.23.43.12;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.03.20.23.43.12;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.18
log
@remove broken HOMEPAGE/MASTER_SITES and add backup mirror
@
text
@# $OpenBSD: Makefile,v 1.17 2017/07/26 22:45:25 sthen Exp $

# .libs/libmecab.so.0.0: undefined reference to `__sync_val_compare_and_swap_4'
# .libs/libmecab.so.0.0: undefined reference to `__sync_add_and_fetch_4'
BROKEN-hppa =	undefined refs to __sync operations

COMMENT-main =	japanese morphological analyzer engine
COMMENT-ipadic = IPA japanese dictionary for mecab

DISTNAME =	mecab-0.996
PKGNAME-main =	${DISTNAME}
PKGNAME-ipadic = mecab-ipadic-2.7.0
REVISION-main =	1
REVISION-ipadic = 3

SHARED_LIBS =	mecab	0.0 # 2.0

CATEGORIES =	japanese

HOMEPAGE =	http://taku910.github.io/mecab/

# BSD + IPADIC
PERMIT_PACKAGE_CDROM =	Yes

MULTI_PACKAGES = -main -ipadic

WANTLIB-main =	c iconv m pthread ${COMPILER_LIBCXX}
WANTLIB-ipadic =

MASTER_SITES =	https://distfiles.nl/

DISTFILES =	${DISTNAME}${EXTRACT_SUFX} \
		${PKGNAME-ipadic}-${IPADIC_VER}.tar.gz

# for atomic builtins
MODULES =	gcc4
MODGCC4_ARCHS =	arm
MODGCC4_LANGS =	c++

LIB_DEPENDS-main = converters/libiconv
RUN_DEPENDS-main = mecab-ipadic-*:japanese/mecab,-ipadic
RUN_DEPENDS-ipadic =


CONFIGURE_STYLE = gnu
CONFIGURE_ENV =	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBS="-liconv"

IPADIC_VER =	20070801
IPADIC_FILES =	char.bin dicrc left-id.def matrix.bin pos-id.def \
		rewrite.def right-id.def sys.dic unk.dic

post-build:
	cd ${WRKDIR}/${PKGNAME-ipadic}-${IPADIC_VER} && \
	    ${WRKSRC}/src/mecab-dict-index -t utf-8

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mecab
	${INSTALL_DATA} ${WRKSRC}/mecabrc ${PREFIX}/share/examples/mecab
	${INSTALL_DATA_DIR} ${PREFIX}/share/mecab/dic/ipadic
	cd ${WRKDIR}/${PKGNAME-ipadic}-${IPADIC_VER} && \
	    ${INSTALL_DATA} ${IPADIC_FILES} ${PREFIX}/share/mecab/dic/ipadic

.include <bsd.port.mk>
@


1.17
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2017/07/16 19:18:57 espie Exp $
a10 1
REVISION-ipadic = 2
d13 2
a14 1
REVISION-main =	0
d20 1
a20 1
HOMEPAGE =	https://code.google.com/p/mecab/
d30 1
a30 1
MASTER_SITES =	${MASTER_SITE_GOOGLECODE:=mecab/}
@


1.16
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2017/04/10 11:46:22 sthen Exp $
d11 1
a11 1
REVISION-ipadic = 1
d14 1
@


1.15
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2016/12/30 13:58:49 jsg Exp $
d26 1
a26 1
WANTLIB-main =	c iconv m pthread ${LIBCXX}
@


1.14
log
@use ports gcc on arm to get atomic builtins
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/10/01 11:54:16 naddy Exp $
d26 1
a26 1
WANTLIB-main =	c iconv m pthread stdc++
@


1.13
log
@The ${PROJECT}.googlecode.com/files/ master sites are no longer
accessible, but the distfiles are still available at an archive URL.
Introduce MASTER_SITE_GOOGLECODE and use it for all affected ports.

ok czarkoff@@ danj@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/04/29 11:19:35 naddy Exp $
a4 1
BROKEN-arm =	undefined refs to __sync operations
d33 5
@


1.12
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/12/25 08:39:46 ajacoutot Exp $
d30 1
a30 1
MASTER_SITES =	https://mecab.googlecode.com/files/
@


1.11
log
@Remove some BROKEN markers for ports that should build now with the new libgcc
assisted built-in atomic ops for mips64.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/10/31 16:42:08 fgsch Exp $
d27 1
a27 1
WANTLIB-main =	c m pthread stdc++ ${MODLIBICONV_WANTLIB}
d35 1
a35 3
MODULES =	converters/libiconv

LIB_DEPENDS-main = ${MODLIBICONV_LIB_DEPENDS}
@


1.10
log
@Update mecab to 0.996.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/08/24 22:31:15 fgsch Exp $
a6 1
BROKEN-mips64 =	undefined refs to __sync operations
@


1.9
log
@Mark as BROKEN-arm, same reason as hppa and mips64 (no __sync operations).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/08/07 21:32:07 naddy Exp $
d12 1
a12 2
DISTNAME =	mecab-0.994
REVISION-main =	1
@


1.8
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/21 08:46:32 ajacoutot Exp $
d5 1
@


1.7
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/11 11:12:33 espie Exp $
d12 2
a13 2
REVISION-main =	0
REVISION-ipadic = 0
d21 1
a21 1
HOMEPAGE =	http://code.google.com/p/mecab/
d31 1
a31 1
MASTER_SITES =	http://mecab.googlecode.com/files/
@


1.6
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/12/03 14:48:51 jasper Exp $
a41 1
USE_LIBTOOL =	Yes
@


1.5
log
@mark broken on mips64 for the same reason it's broken on hppa (lack of atomic ops)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/10/06 09:22:36 landry Exp $
a24 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.4
log
@Mark as BROKEN-hppa, undefined refs to __sync operations.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/08/19 21:00:23 jasper Exp $
d6 1
@


1.3
log
@- remove now unneeded -lpthread/-pthread chunk
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.2 2012/08/04 19:29:16 fgsch Exp $
@


1.2
log
@Update to mecab 0.994.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/03/20 23:43:12 fgsch Exp $
d7 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
DISTNAME =	mecab-0.993
@


1.1.1.1
log
@import mecab, a Japanese morphological analyzer engine
tested by yozo-at-v007-dot-vaio-dot-ne-dot-jp.  sthen@@ ok
@
text
@@
