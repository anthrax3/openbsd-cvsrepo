head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.34
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.32
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.30
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.26
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.28
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.24
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.22
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.20
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.18
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.16
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.14
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.12
	OPENBSD_5_0:1.3.0.10
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.8
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.6
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.6
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2009.05.07.14.47.15;	author giovanni;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.08.23.12.37;	author okan;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.26.20.38.21;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@
Use x11/tk module and ${SUBST_CMD}
Add a few mirrors
"ports-wise it's ok" sthen@@
@
text
@$OpenBSD: patch-Makefile,v 1.2 2008/02/08 23:12:37 okan Exp $
--- Makefile.orig	Sat Mar 14 14:57:48 1998
+++ Makefile	Tue Jan 29 14:22:02 2008
@@@@ -5,10 +5,8 @@@@ SHELL = /bin/sh
 
 ### EDIT THE NEXT LINES ONLY ###
 
-PREFIX = /usr/local
-
 # The directory where the tkhylafax library will be installed
-TCLLIB_DEST = $(PREFIX)/lib/tkhylafax-3.2
+TCLLIB_DEST = $(PREFIX)/lib/tkhylafax
 
 # The directory where the tkhylafax command will be installed
 TCLPRG_DEST = $(PREFIX)/bin
@@@@ -17,13 +15,13 @@@@ TCLPRG_DEST = $(PREFIX)/bin
 TCLMAN_DEST = $(PREFIX)/man/man1
 
 # The full path to tclsh
-TCLSH = /usr/bin/tclsh
+TCLSH = ${MODTCL_BIN}
 
 # The full path to wish.
-WISH = /usr/bin/wish
+WISH = ${MODTK_BIN}
 
 # The full path to your postscript viewer
-GHOSTVIEW = /usr/X11/bin/gv
+GHOSTVIEW = ${LOCALBASE}/bin/gv
 
 ### DON'T EDIT ANYTHING BELOW THIS LINE ###
 
@@@@ -52,7 +50,6 @@@@ TCLMAN_FILE = tkhylafax
 
 all:
 	$(MAKE) build
-	$(MAKE) install
 
 build: Makefile
 	@@echo "Patching tkhylafax..."
@@@@ -66,24 +63,24 @@@@ install: install.lib install.man install.tkhylafax
 
 $(TCLLIB_DEST):
 	if [ ! -d $(TCLLIB_DEST) ]; then mkdir -p $(TCLLIB_DEST); fi
-	chmod 775 $(TCLLIB_DEST)
+	chmod 755 $(TCLLIB_DEST)
 
 install.lib: $(TCLLIB_DEST)
 	@@echo "Installing tkhylafax library..." 
 	-for i in $(TCLLIB_FILES) ; do \
 	    cp $$i $(TCLLIB_DEST)/$$i ; \
-	    chmod 664 $(TCLLIB_DEST)/$$i ; \
+	    chmod 644 $(TCLLIB_DEST)/$$i ; \
 	done
 	@@echo "Done" 
 
 $(TCLPRG_DEST):
 	if [ ! -d $(TCLPRG_DEST) ]; then mkdir -p $(TCLPRG_DEST); fi
-	chmod 775 $(TCLPRG_DEST)
+	chmod 755 $(TCLPRG_DEST)
 
 install.tkhylafax: $(TCLPRG_DEST) $(TCLPRG_FILE) 
 	@@echo "Installing tkhylafax command..." 
 	cp $(TCLPRG_FILE) $(TCLPRG_DEST)/$(TCLPRG_FILE)
-	chmod 775 $(TCLPRG_DEST)/$(TCLPRG_FILE)
+	chmod 755 $(TCLPRG_DEST)/$(TCLPRG_FILE)
 	@@echo "Done" 
 
 install.man:
@


1.2
log
@- update to 3.2, making it un-BROKEN from Giovanni Bechis, thanks!
- LOCALBASE/PREFIX goo
- move lib/tkhylafax-$version/ to lib/tkhylafax/
- Giovanni takes maintainership

ok merdely@@
@
text
@d1 1
a1 1
$OpenBSD$
d21 1
a21 1
+TCLSH = %%LOCALBASE%%/bin/tclsh8.4
d25 1
a25 1
+WISH = %%LOCALBASE%%/bin/wish8.4
d29 1
a29 1
+GHOSTVIEW = %%LOCALBASE%%/bin/gv
@


1.1
log
@- use our naming scheme for patches
@
text
@d2 16
a17 4
--- Makefile.orig	Sun Dec 29 19:26:39 1996
+++ Makefile	Fri Oct 26 22:34:13 2007
@@@@ -14,10 +14,10 @@@@ TCLPRG_DEST = /usr/local/bin
 TCLMAN_DEST = /usr/local/man/man1
d20 2
a21 2
-TCLSH = /usr/local/bin/tclsh
+TCLSH = tclsh7.6
d24 7
a30 2
-WISH = /usr/local/bin/wish
+WISH = wish4.2
d33 9
a41 10
 TCLLIB_FILES =  \
@@@@ -40,7 +40,9 @@@@ TCLLIB_FILES =  \
 TCLPRG_FILE = tkhylafax
 TCLMAN_FILE = tkhylafax
 
-all: lib install.man tkhylafax
+all:
+
+install: lib install.man tkhylafax.inst
 	echo 'auto_mkindex $(TCLLIB_DEST) *.tcl *.t' | $(TCLSH);
d44 14
a57 1
@@@@ -59,16 +61,15 @@@@ $(TCLPRG_DEST):
d59 2
a60 1
 	chmod 775 $(TCLPRG_DEST)
d62 1
a62 7
-tkhylafax: $(TCLPRG_DEST)
+tkhylafax.inst: $(TCLPRG_DEST)
 	@@echo "Patching tkhylafax..." 
 	mv tkhylafax tkhylafax.unpatched
 	sed -e 's|XXX_TKHYLAFAX_XXX|$(TCLLIB_DEST)|g' \
 	    tkhylafax.unpatched > tkhylafax
 	@@echo "Done" 
d64 3
a66 5
-	cp $(TCLPRG_FILE) $(TCLPRG_DEST)/$@@
-	chmod 775 $(TCLPRG_DEST)/$@@
-	mv tkhylafax.unpatched tkhylafax
+	cp $(TCLPRG_FILE) $(TCLPRG_DEST)/tkhylafax
+	chmod 775 $(TCLPRG_DEST)/tkhylafax
@

