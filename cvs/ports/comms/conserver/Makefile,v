head	1.56;
access;
symbols
	OPENBSD_6_1:1.56.0.4
	OPENBSD_6_1_BASE:1.56
	OPENBSD_6_0:1.56.0.2
	OPENBSD_6_0_BASE:1.56
	OPENBSD_5_9:1.55.0.2
	OPENBSD_5_9_BASE:1.55
	OPENBSD_5_8:1.51.0.4
	OPENBSD_5_8_BASE:1.51
	OPENBSD_5_7:1.50.0.2
	OPENBSD_5_7_BASE:1.50
	OPENBSD_5_6:1.44.0.2
	OPENBSD_5_6_BASE:1.44
	OPENBSD_5_5:1.43.0.4
	OPENBSD_5_5_BASE:1.43
	OPENBSD_5_4:1.43.0.2
	OPENBSD_5_4_BASE:1.43
	OPENBSD_5_3:1.42.0.2
	OPENBSD_5_3_BASE:1.42
	OPENBSD_5_2:1.41.0.4
	OPENBSD_5_2_BASE:1.41
	OPENBSD_5_1_BASE:1.41
	OPENBSD_5_1:1.41.0.2
	OPENBSD_5_0:1.40.0.4
	OPENBSD_5_0_BASE:1.40
	OPENBSD_4_9:1.40.0.2
	OPENBSD_4_9_BASE:1.40
	OPENBSD_4_8:1.32.0.10
	OPENBSD_4_8_BASE:1.32
	OPENBSD_4_7:1.32.0.8
	OPENBSD_4_7_BASE:1.32
	OPENBSD_4_6:1.32.0.6
	OPENBSD_4_6_BASE:1.32
	OPENBSD_4_5:1.32.0.4
	OPENBSD_4_5_BASE:1.32
	OPENBSD_4_4:1.32.0.2
	OPENBSD_4_4_BASE:1.32
	OPENBSD_4_3:1.30.0.2
	OPENBSD_4_3_BASE:1.30
	OPENBSD_4_2:1.29.0.2
	OPENBSD_4_2_BASE:1.29
	OPENBSD_4_1:1.28.0.8
	OPENBSD_4_1_BASE:1.28
	OPENBSD_4_0:1.28.0.6
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.28.0.4
	OPENBSD_3_9_BASE:1.28
	OPENBSD_3_8:1.28.0.2
	OPENBSD_3_8_BASE:1.28
	OPENBSD_3_7:1.26.0.2
	OPENBSD_3_7_BASE:1.26
	OPENBSD_3_6:1.25.0.4
	OPENBSD_3_6_BASE:1.25
	OPENBSD_3_5:1.25.0.2
	OPENBSD_3_5_BASE:1.25
	OPENBSD_3_4:1.24.0.2
	OPENBSD_3_4_BASE:1.24
	OPENBSD_3_3:1.20.0.2
	OPENBSD_3_3_BASE:1.20
	OPENBSD_3_2:1.18.0.4
	OPENBSD_3_2_BASE:1.18
	OPENBSD_3_1:1.18.0.2
	OPENBSD_3_1_BASE:1.18
	OPENBSD_3_0:1.17.0.2
	OPENBSD_3_0_BASE:1.17
	OPENBSD_2_9_TRACKING_SWITCH:1.17
	OPENBSD_2_9:1.15.0.2
	OPENBSD_2_9_BASE:1.15
	OPENBSD_2_8:1.13.0.2
	OPENBSD_2_8_BASE:1.13
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.4.0.4
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	angelos_04281998:1.1.1.1
	conserver:1.1.1;
locks; strict;
comment	@# @;


1.56
date	2016.06.20.15.08.44;	author sthen;	state Exp;
branches;
next	1.55;
commitid	xmnWepbn36TvswKg;

1.55
date	2015.11.19.14.03.30;	author sthen;	state Exp;
branches;
next	1.54;
commitid	G7eL2iJB3RFTttuo;

1.54
date	2015.08.14.13.49.41;	author sthen;	state Exp;
branches;
next	1.53;
commitid	0rGmJmPJq1lr7XKE;

1.53
date	2015.08.12.07.45.04;	author sthen;	state Exp;
branches;
next	1.52;
commitid	i2gi5NGxov9DtoLN;

1.52
date	2015.08.11.21.13.14;	author sthen;	state Exp;
branches;
next	1.51;
commitid	9hl79octDlLWtXEa;

1.51
date	2015.06.10.13.07.33;	author sthen;	state Exp;
branches;
next	1.50;
commitid	3uRPoxaeskADhvvS;

1.50
date	2014.10.07.22.14.17;	author sthen;	state Exp;
branches;
next	1.49;
commitid	a1IT1kguOal23Uj8;

1.49
date	2014.10.07.15.21.42;	author sthen;	state Exp;
branches;
next	1.48;
commitid	wnzP5w6X4P21AOcQ;

1.48
date	2014.10.07.14.05.02;	author sthen;	state Exp;
branches;
next	1.47;
commitid	PY2bmVFSSDjWSQrT;

1.47
date	2014.10.07.12.51.35;	author sthen;	state Exp;
branches;
next	1.46;
commitid	h3R2AIE9hjXTGTPA;

1.46
date	2014.09.08.16.12.11;	author sthen;	state Exp;
branches;
next	1.45;
commitid	e1jNM87A2LcUOgkW;

1.45
date	2014.08.21.19.58.07;	author sthen;	state Exp;
branches;
next	1.44;
commitid	hLcRnpvx5RybkT62;

1.44
date	2014.07.15.13.47.26;	author benno;	state Exp;
branches;
next	1.43;
commitid	WlcIS8bA5kH25CI5;

1.43
date	2013.03.11.01.30.26;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2012.12.08.14.50.40;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2011.12.17.22.01.12;	author sthen;	state Exp;
branches;
next	1.40;

1.40
date	2010.12.27.14.50.22;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2010.12.24.10.40.04;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2010.12.11.08.05.38;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.11.08.09.58.11;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2010.11.07.20.47.08;	author jasper;	state Exp;
branches;
next	1.35;

1.35
date	2010.10.18.21.35.48;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2010.10.18.16.57.48;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2010.09.03.14.39.07;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2008.06.24.16.08.34;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2008.06.21.11.29.25;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2007.09.16.01.37.09;	author merdely;	state Exp;
branches;
next	1.29;

1.29
date	2007.06.15.11.53.39;	author sturm;	state Exp;
branches;
next	1.28;

1.28
date	2005.08.02.07.25.47;	author pvalchev;	state Exp;
branches;
next	1.27;

1.27
date	2005.04.15.18.41.38;	author pvalchev;	state Exp;
branches;
next	1.26;

1.26
date	2004.11.21.22.29.50;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2004.03.02.07.57.21;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2003.07.09.07.17.15;	author pvalchev;	state Exp;
branches;
next	1.23;

1.23
date	2003.06.23.00.02.04;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2003.05.26.20.20.53;	author pvalchev;	state Exp;
branches;
next	1.21;

1.21
date	2003.05.24.19.46.14;	author pvalchev;	state Exp;
branches;
next	1.20;

1.20
date	2002.12.23.00.37.50;	author pvalchev;	state Exp;
branches;
next	1.19;

1.19
date	2002.10.25.11.34.24;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2002.03.21.20.46.23;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.20.01.43.12;	author pvalchev;	state Exp;
branches;
next	1.16;

1.16
date	2001.05.05.22.39.40;	author jakob;	state Exp;
branches;
next	1.15;

1.15
date	2001.02.27.23.36.18;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2000.12.14.13.22.59;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.22.14.02.59;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.09.15.13.42.00;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.06.16.23.06.03;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.05.27.23.49.39;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.09.17.36.05;	author espie;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2000.03.24.22.11.36;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.15.05.04.04;	author turan;	state Exp;
branches;
next	1.6;

1.6
date	2000.02.12.06.29.50;	author turan;	state Exp;
branches;
next	1.5;

1.5
date	2000.02.10.23.14.29;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	99.04.01.02.57.55;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.01.05.16.57.17;	author jason;	state Exp;
branches;
next	1.2;

1.2
date	98.10.07.05.24.18;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.04.29.03.31.56;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.04.29.03.31.56;	author angelos;	state Exp;
branches;
next	;

1.9.2.1
date	2000.09.15.04.46.59;	author marc;	state Exp;
branches;
next	;


desc
@@


1.56
log
@fix @@sample directory name
@
text
@# $OpenBSD: Makefile,v 1.55 2015/11/19 14:03:30 sthen Exp $

COMMENT=	manage remote serial consoles via TCP/IP

DISTNAME=	conserver-8.2.1
REVISION=	3
CATEGORIES=	comms

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

HOMEPAGE=	http://www.conserver.com/

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c util

FLAVORS=	ipmi net
FLAVOR?=

MASTER_SITES=	${HOMEPAGE} \
		ftp://ftp.conserver.com/conserver/

AUTOCONF_VERSION= 2.68
CONFIGURE_STYLE= autoconf
CONFIGURE_ARGS=	--with-master=localhost \
		--with-pidfile=${LOCALSTATEDIR}/run/conserver/conserver.pid

.if ${FLAVOR:Mnet}
# not yet using experimental IPv6 support added in 8.2.0; investigate
# implications of ifdef'ing out ProbeInterfaces in cutil.c before enabling
WANTLIB+= crypto ssl
CONFIGURE_ARGS+= --with-openssl \
		--with-port=3109
.else
CONFIGURE_ARGS+= --with-uds=${LOCALSTATEDIR}/run/conserver \
		--with-trust-uds-cred
.endif

.if ${FLAVOR:Mipmi}
CONFIGURE_ARGS+= --with-freeipmi=yes
LIB_DEPENDS+=	sysutils/freeipmi
WANTLIB+=	freeipmi ipmiconsole pthread
.endif

post-install:
	${INSTALL_DATA} ${WRKSRC}/conserver.cf/samples/* \
	    ${FILESDIR}/console.cf ${PREFIX}/share/examples/conserver/

TEST_TARGET=	test

.include <bsd.port.mk>
@


1.55
log
@getpwnam -> getpwnam_shadow
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2015/08/14 13:49:41 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.54
log
@don't strip bin/console, reported by jirib at devio.us
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2015/08/12 07:45:04 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.53
log
@bump REVISION, missed in last commit. reported by aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/08/11 21:13:14 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.52
log
@add a flavour to build comms/conserver with internal IPMI console support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/06/10 13:07:33 sthen Exp $
d6 1
@


1.51
log
@update to conserver-8.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2014/10/07 22:14:17 sthen Exp $
d17 1
a17 1
FLAVORS=	net
d31 1
a31 1
WANTLIB += crypto ssl
d37 6
@


1.50
log
@update conserver to 8.2.0, and make some port changes ...

- Switch to using unix domain sockets instead of network sockets for
comms between "console" client and "conserver" server. This is a compile-
time toggle and disables network sockets. Uses SO_PEERCRED for access
control so it's possible to do per-user acls in conserver without
the need to re-enter user passwords.

- Add a flavour to use network sockets for those that need it (i.e.
running the client on a different machine to the server).

- Tweaks to pkg-readme explaining the above.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/10/07 15:21:42 sthen Exp $
d5 1
a5 1
DISTNAME=	conserver-8.2.0
@


1.49
log
@conserver tweaks:
- setup break sequence for ipmitool in sample config
- remind people about log rotation (console logs sometimes get quite large)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/10/07 14:05:02 sthen Exp $
d5 1
a5 2
DISTNAME=	conserver-8.1.20
REVISION=	2
d15 4
a18 1
WANTLIB=		c ssl crypto util
d25 8
a32 3
CONFIGURE_ARGS=	--with-openssl \
		--with-pidfile=${LOCALSTATEDIR}/run/conserver/conserver.pid \
		--with-master=localhost \
d34 4
d40 2
a41 3
	${INSTALL_DATA} ${FILESDIR}/console.cf \
	    ${WRKSRC}/conserver.cf/samples/* \
	    ${PREFIX}/share/examples/conserver/
@


1.48
log
@tweak sample ipmitool line; avoid keeping the shell around
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/10/07 12:51:35 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.47
log
@conserver tweaks:

- add http master site
- use correct autoconf version for 8.1.20
- install upstream's other sample configs
- actually install pkg-readme
- add sample config to work with IPMI SOL consoles using ipmitool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/09/08 16:12:11 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.46
log
@update to conserver 8.1.20, add more notes for upgrading users on how to
unbreak things following the uid change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/08/21 19:58:07 sthen Exp $
d6 1
d18 2
a19 1
MASTER_SITES=	ftp://ftp.conserver.com/conserver/
d21 1
a21 1
AUTOCONF_VERSION= 2.59
d30 1
@


1.45
log
@fix up some more things to cope with the change to running conserver as
a separate uid
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/07/15 13:47:26 benno Exp $
d5 1
a5 2
DISTNAME=	conserver-8.1.16
REVISION=	9
@


1.44
log
@run conserver as user _conserver instead of root
change maintainer to sthen@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/03/11 01:30:26 espie Exp $
d6 1
a6 1
REVISION=	8
@


1.43
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2012/12/08 14:50:40 naddy Exp $
d6 1
a6 1
REVISION=	7
d9 1
a9 1
MAINTAINER=	Peter Valchev <pvalchev@@openbsd.org>
d22 8
a29 2
CONFIGURE_ARGS=	--with-openssl		\
		--with-master=localhost
@


1.42
log
@* bump as this will now use openpty()
* drop configure argument that doesn't exist any longer
* no need for groff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/12/17 22:01:12 sthen Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d25 1
a25 1
REGRESS_TARGET=	test
@


1.41
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/12/27 14:50:22 ajacoutot Exp $
d6 1
a6 1
REVISION=	6
d25 1
a25 2
CONFIGURE_ARGS=	--with-64bit		\
		--with-openssl		\
a26 1
USE_GROFF =	Yes
@


1.40
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/12/24 10:40:04 ajacoutot Exp $
d6 1
a6 1
REVISION=	5
d25 2
a26 2
CONFIGURE_ARGS=	--with-64bit 		\
		--with-openssl 		\
@


1.39
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/12/11 08:05:38 ajacoutot Exp $
d6 1
a6 1
REVISION=	4
@


1.38
log
@Use quotes to be consistent with other rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/11/08 09:58:11 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.37
log
@move to rc.d; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/11/07 20:47:08 jasper Exp $
d6 1
a6 1
REVISION=	2
@


1.36
log
@- move to pkg-readmes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/10/18 21:35:48 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.35
log
@fix a few tabtabUSE_GROFF, problem pointed out by Alexandr Shadchin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/10/18 16:57:48 espie Exp $
d6 1
a6 1
REVISION=	0
d11 1
a11 1
HOMEPAGE=	http://www.conserver.com
a30 4

post-install:
	@@${INSTALL_DATA} ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/examples/conserver
@


1.34
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/09/03 14:39:07 sthen Exp $
d28 1
a28 1
		USE_GROFF =	Yes
@


1.33
log
@new lib_depends/revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2008/06/24 16:08:34 sthen Exp $
d28 1
@


1.32
log
@since I removed MESSAGE, UNMESSAGE should go too. package bumped.
ok pvalchev
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2008/06/21 11:29:25 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d18 1
@


1.31
log
@Update conserver to 8.1.16, which fixes some bugs, rolls in
pvalchev's strcpy->strlcpy diffs, and adds some new functionality
(see http://www.conserver.com/CHANGES for more details).
Our /etc/services now includes a definition for conserver,
so no need to mention it in the package installation message.

ok pvalchev (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/09/16 01:37:09 merdely Exp $
d6 1
@


1.30
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/06/15 11:53:39 sturm Exp $
d5 1
a5 2
DISTNAME=	conserver-8.1.11
PKGNAME=	${DISTNAME}p0
d30 2
a31 1
	@@${INSTALL_DATA} ${FILESDIR}/README.OpenBSD ${PREFIX}/share/examples/conserver
@


1.29
log
@fix unaligned access on sparc64

ok pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/08/02 07:25:47 pvalchev Exp $
d3 1
a3 1
COMMENT=	"manage remote serial consoles via TCP/IP"
@


1.28
log
@update to conserver-8.1.11 with help from aanriot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/04/15 18:41:38 pvalchev Exp $
d6 1
@


1.27
log
@remove default passwords from the passwd file that could
lead ppl onto stuff; from beck
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/11/21 22:29:50 espie Exp $
d5 1
a5 2
DISTNAME=	conserver-7.2.7
PKGNAME=	${DISTNAME}p0
d17 1
a17 1
WANTLIB=		c
d21 1
a21 1
AUTOCONF_VERSION= 2.54
d23 2
a24 1
CONFIGURE_ARGS=	--with-64bit \
@


1.26
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/03/02 07:57:21 brad Exp $
d6 1
@


1.25
log
@AUTOCONF_NEW -> AUTOCONF_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/07/09 07:17:15 pvalchev Exp $
d17 1
@


1.24
log
@- connect to "localhost" by default
- mention the need for an entry to be added to /etc/services manually
- create (empty) log file directory
- add proper deinstall steps for above
based on a diff from wilfried
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2003/06/23 00:02:04 naddy Exp $
d12 1
a12 1
# License: BSD
d20 1
a20 1
AUTOCONF_NEW=	Yes
@


1.23
log
@enable building on 64-bit archs and regression tests; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2003/05/26 20:20:53 pvalchev Exp $
d22 2
a23 1
CONFIGURE_ARGS=	--with-64bit
@


1.22
log
@Update to conserver-7.2.7. many many changes to list, see http://www.conserver.com
some minor tweaks may still be coming
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2003/05/24 19:46:14 pvalchev Exp $
d22 3
@


1.21
log
@Take maintainership
big update coming - this has been actively developed over the past
several years, none of which this port reflects
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/12/23 00:37:50 pvalchev Exp $
d5 1
a5 2
PKGNAME=	conserver-5.21
DISTFILES=	conserver-5.21-Beta.shar.gz
d8 4
d18 1
a18 12
MAINTAINER=	Peter Valchev <pvalchev@@openbsd.org>

MASTER_SITES=	ftp://ftp.uu.net/vendor/bitsko/config-mgmt/ \
		ftp://unix.hensa.ac.uk/mirrors/uunet/vendor/bitsko/config-mgmt/
WRKDIST=	${WRKDIR}

# Set this to where you want console(8) to connect to by default
# or use something like ``make DEFAULTHOST=myserver.mydomain.net''
DEFAULTHOST?=	localhost
MAKE_ENV+=	CC="${CC}" DEFAULTHOST="${DEFAULTHOST}"

NO_REGRESS=	Yes
d20 2
a21 2
post-extract:
	cp ${FILESDIR}/Makefile ${WRKSRC}
@


1.20
log
@Remove Angelos from maintainer per his request
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2002/10/25 11:34:24 naddy Exp $
d14 2
@


1.19
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2002/03/21 20:46:23 espie Exp $
a7 2

MAINTAINER=	Angelos D. Keromytis <angelos@@openbsd.org>
@


1.18
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/06/20 01:43:12 pvalchev Exp $
a7 1
NEED_VERSION=	1.515
d25 2
@


1.17
log
@Remove deprecated LICENSE_TYPE and set appropriate # comments
with its contents.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/05/05 22:39:40 jakob Exp $
d8 1
a8 1
NEED_VERSION=	1.406
@


1.16
log
@integrate COMMENT & bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/02/27 23:36:18 naddy Exp $
d12 1
a12 1
LICENSE_TYPE=		BSD
@


1.15
log
@respect CC and CFLAGS
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.14 2000/12/14 13:22:59 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.342
@


1.14
log
@Bye, bye, EXTRACT_CMD, EXTRACT_BEFORE_ARGS, EXTRACT_AFTER_ARGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/10/22 14:02:59 espie Exp $
d23 1
a23 1
MAKE_ENV+=	DEFAULTHOST="${DEFAULTHOST}"
@


1.13
log
@Complete a few MAINTAINER names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/09/15 13:42:00 espie Exp $
d6 1
a6 1
NEED_VERSION=	1.330
a18 2

EXTRACT_CASES=	*.shar.gz) zcat ${FULLDISTDIR}/$$archive| /bin/sh -;;
@


1.12
log
@Use new extraction framework
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/06/16 23:06:03 espie Exp $
d8 1
a8 1
MAINTAINER=	angelos@@openbsd.org
@


1.11
log
@Remove NO_CONFIGURE/NO_PATCH/NO_EXTRACT/NO_MTREE

Kill corresponding FAKE=Yes and switch to CONFIGURE_STYLE while I'm at it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/05/27 23:49:39 espie Exp $
a2 1
DISTNAME=	conserver-5.21-Beta
d4 1
d6 1
a6 1
NEED_VERSION=	1.191
d19 2
a20 4
EXTRACT_SUFX=	.shar.gz
EXTRACT_CMD=	zcat
EXTRACT_BEFORE_ARGS=
EXTRACT_AFTER_ARGS=	|sh
@


1.10
log
@Fake.
Put BSD ack in MESSAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/04/09 17:36:05 espie Exp $
a8 1
FAKE=Yes
a22 2

NO_CONFIGURE=	yes
@


1.9
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/03/24 22:11:36 espie Exp $
a6 11
FAKE=No

# If you want to distribute a package you must heed this part of
# the copyright:
#	distributions including binaries display the following
#	acknowledgement:  ``This product includes software
#	developed by The Ohio State University and its contributors''
#	in the documentation or other materials provided with the
#	distribution and in all advertising materials mentioning
#	features or use of this software. 
NO_PACKAGE=	"binary distribution requires explicit acknowledgement"
d9 1
d12 4
a15 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d36 1
a36 2
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD ${PREFIX}/share/examples/conserver
	more ${FILESDIR}/README.OpenBSD
@


1.9.2.1
log
@bring comms as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/06/16 23:06:03 espie Exp $
d7 11
d22 4
a25 4
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d35 2
d46 2
a47 1
	@@${INSTALL_DATA} ${FILESDIR}/README.OpenBSD ${PREFIX}/share/examples/conserver
@


1.8
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/02/15 05:04:04 turan Exp $
d7 1
@


1.7
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/02/12 06:29:50 turan Exp $
d6 1
a27 1
NEED_VERSION=	1.191
@


1.6
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/02/10 23:14:29 espie Exp $
d20 4
a23 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.5
log
@Kill NO_WRKSUBDIR.
Clean up a few deprecated variables on the fly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/04/01 02:57:55 brad Exp $
d18 6
@


1.4
log
@remove unnecessary comments and fix email address's
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/01/05 16:57:17 jason Exp $
d21 2
a27 1
NO_WRKSUBDIR=	yes
@


1.3
log
@o Put config in /etc (and make manpages refer to it there)
o Put examples and README.OpenBSD in share/examples/conserver
o Update packing list to reflect new locations
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.2 1998/10/07 05:24:18 marc Exp $
#
@


1.2
log
@NO_PACKAGE: binary distribution requires explicit acknowledgement
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/04/29 03:31:56 angelos Exp $
d39 2
a40 8
	@@if [ ! -f ${PREFIX}/etc/rc.d/conserver.sh ]; then \
	  echo "Installing ${PREFIX}/etc/rc.d/conserver.sh startup file."; \
	  echo "#!/bin/sh" > ${PREFIX}/etc/rc.d/conserver.sh; \
	  echo "if [ -x /usr/local/sbin/conserver -a -f /usr/local/etc/conserver.cf ]; then" >> ${PREFIX}/etc/rc.d/conserver.sh; \
	  echo "	/usr/local/sbin/conserver -d -n ; echo -n ' conserver'" >> ${PREFIX}/etc/rc.d/conserver.sh; \
	  echo "fi" >> ${PREFIX}/etc/rc.d/conserver.sh; \
	  chmod 751 ${PREFIX}/etc/rc.d/conserver.sh; \
	fi
@


1.1
log
@Initial revision
@
text
@d1 1
a1 6
# OpenBSD  makefile for:    conserver
# Version required:     5.21-Beta
# Date created:         28 April 1998
# Whom:                 Angelos D. Keromytis
#
# $OpenBSD$
d7 13
a22 3

MAINTAINER=	angelos@@openbsd.org

d26 1
a28 2
MAN5=		conserver.cf.5
MAN8=		console.8 conserver.8
d40 6
a45 6
		echo "Installing ${PREFIX}/etc/rc.d/conserver.sh startup file."; \
		echo "#!/bin/sh" > ${PREFIX}/etc/rc.d/conserver.sh; \
		echo "if [ -x /usr/local/sbin/conserver -a -f /usr/local/etc/conserver.cf ]; then" >> ${PREFIX}/etc/rc.d/conserver.sh; \
		echo "	/usr/local/sbin/conserver -d -n ; echo -n ' conserver'" >> ${PREFIX}/etc/rc.d/conserver.sh; \
		echo "fi" >> ${PREFIX}/etc/rc.d/conserver.sh; \
		chmod 751 ${PREFIX}/etc/rc.d/conserver.sh; \
@


1.1.1.1
log
@conserver port.
@
text
@@
