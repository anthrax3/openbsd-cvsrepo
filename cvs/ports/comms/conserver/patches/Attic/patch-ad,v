head	1.4;
access;
symbols
	OPENBSD_3_3:1.3.0.8
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.6
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.4
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.2.0.10
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.8
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.6
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.4
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	angelos_04281998:1.1.1.1
	conserver:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2003.05.26.20.20.53;	author pvalchev;	state dead;
branches;
next	1.3;

1.3
date	2001.05.22.02.04.53;	author brian;	state Exp;
branches;
next	1.2;

1.2
date	99.01.04.22.59.24;	author jason;	state Exp;
branches;
next	1.1;

1.1
date	98.04.29.03.31.57;	author angelos;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.04.29.03.31.57;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to conserver-7.2.7. many many changes to list, see http://www.conserver.com
some minor tweaks may still be coming
@
text
@--- conserver/consent.c.orig	Fri May 11 16:39:58 2001
+++ conserver/consent.c	Fri May 11 16:42:45 2001
@@@@ -78,6 +78,12 @@@@
 
 
 BAUD baud [] = {
+#if defined(B115200)
+	{ "115200", B115200 },
+#endif
+#if defined(B57600)
+	{ "57600", B57600 },
+#endif
 #if defined(B38400)
 	{ "38400", B38400 },
 #endif
@@@@ -197,7 +203,7 @@@@
 	 */
 	termp.c_iflag = IXON|IXOFF|BRKINT;
 	termp.c_oflag = 0;
-	termp.c_cflag = CREAD;
+	termp.c_cflag = CREAD|CLOCAL;
 	termp.c_cflag |= pCE->pparity->iset;
 	termp.c_lflag = 0;
 	/*
@@@@ -205,7 +211,7 @@@@
 	 * Set the VTIME == 1 (0.1 sec)
 	 * Don't bother with the control characters as they are not used
 	 */
-	termp.c_cc[VMIN] = 128;
+	termp.c_cc[VMIN] = 1;
 	termp.c_cc[VTIME] = 1;
 
 	if (-1 == cfsetospeed(&termp,pCE->pbaud->irate)) {
@@@@ -424,15 +430,15 @@@@
 #endif
 
 #if USE_TERMIOS
-	if (0 != ioctl(0, TCGETS, & n_tio)) {
+	if (0 != tcgetattr(0, & n_tio)) {
 		fprintf(stderr, "%s: iotcl: getsw: %s\n", progname, strerror(errno));
 		exit(1);
 	}
-	n_tio.c_iflag &= ~(IGNCR|IUCLC);
+
+	n_tio.c_iflag &= ~(IGNCR);
 	n_tio.c_iflag |= ICRNL|IXON|IXANY;
-	n_tio.c_oflag &= ~(OLCUC|ONOCR|ONLRET|OFILL|NLDLY|CRDLY|TABDLY|BSDLY);
 	n_tio.c_oflag |= OPOST|ONLCR;
-	n_tio.c_lflag &= ~(XCASE|NOFLSH|ECHOK|ECHONL);
+	n_tio.c_lflag &= ~(NOFLSH|ECHOK|ECHONL);
 	n_tio.c_lflag |= ISIG|ICANON|ECHO;
 	n_tio.c_cc[VEOF] = '\004';
 	n_tio.c_cc[VEOL] = '\000';
@@@@ -444,7 +450,7 @@@@
 	n_tio.c_cc[VSTART] = '\021';
 	n_tio.c_cc[VSTOP] = '\023';
 	n_tio.c_cc[VSUSP] = '\032';
-	if (0 != ioctl(0, TCSETS, & n_tio)) {
+	if (0 != tcsetattr(0, TCSANOW, & n_tio)) {
 		fprintf(stderr, "%s: getarrt: %s\n", progname, strerror(errno));
 		exit(1);
 	}
@


1.3
log
@Understand B57600 and B115200; silence by angelos
@
text
@@


1.2
log
@o use CLOCAL in conserver/comsent.c
o patch man pages to always refer to the config file in /usr/local/etc
@
text
@d1 16
a16 3
--- ./conserver/consent.c.orig	Sun Jan  3 18:32:32 1999
+++ ./conserver/consent.c	Mon Jan  4 08:13:38 1999
@@@@ -197,7 +197,7 @@@@
d25 1
a25 1
@@@@ -205,7 +205,7 @@@@
d34 1
a34 1
@@@@ -424,15 +424,15 @@@@
d54 1
a54 1
@@@@ -444,7 +444,7 @@@@
@


1.1
log
@Initial revision
@
text
@d1 13
a13 3
--- ./conserver/consent.c	Sat Nov 22 20:21:46 1997
+++ ./conserver/consent.c	Sat Aug 23 18:05:11 1997
@@@@ -206,5 +206,5 @@@@
d20 3
a22 1
@@@@ -425,13 +425,13 @@@@
d40 3
a42 1
@@@@ -445,5 +445,5 @@@@
d49 1
@


1.1.1.1
log
@conserver port.
@
text
@@
