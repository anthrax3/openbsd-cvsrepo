head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.10
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.8
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.4
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3;
locks; strict;
comment	@# @;


1.6
date	2014.10.07.22.14.17;	author sthen;	state Exp;
branches;
next	1.5;
commitid	a1IT1kguOal23Uj8;

1.5
date	2014.10.07.15.21.42;	author sthen;	state Exp;
branches;
next	1.4;
commitid	wnzP5w6X4P21AOcQ;

1.4
date	2014.09.08.16.12.11;	author sthen;	state Exp;
branches;
next	1.3;
commitid	e1jNM87A2LcUOgkW;

1.3
date	2014.07.15.13.47.26;	author benno;	state Exp;
branches;
next	1.2;
commitid	WlcIS8bA5kH25CI5;

1.2
date	2010.11.08.09.58.11;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2010.11.07.20.47.08;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update conserver to 8.2.0, and make some port changes ...

- Switch to using unix domain sockets instead of network sockets for
comms between "console" client and "conserver" server. This is a compile-
time toggle and disables network sockets. Uses SO_PEERCRED for access
control so it's possible to do per-user acls in conserver without
the need to re-enter user passwords.

- Add a flavour to use network sockets for those that need it (i.e.
running the client on a different machine to the server).

- Tweaks to pkg-readme explaining the above.
@
text
@$OpenBSD: README,v 1.5 2014/10/07 15:21:42 sthen Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

Connecting to /dev/cuaXX serial ports
=====================================
As installed, conserver is running as user _conserver. If you want to
use conserver to manage local serial ports, you have to add _conserver
to group dialer in /etc/group:

  dialer:*:117:_conserver

This is not necessary if you only use it to log and control access to
terminal servers over the network rather than on local serial ports.

Port flavours
=============
Conserver can be built using different methods to communicate between the
server ("conserver" process) and clients ("console") - network sockets, and
unix domain sockets.

The default in OpenBSD packages before 8.2.0 was to communicate using
network sockets.

Since 8.2.0, the OpenBSD package has switched to using unix domain sockets
by default; this means that server and client must be on the same machine.
The old method is still available by installing the "net" flavour of the
package; you will need to install the "conserver-XX-net" package. If you
have already installed the standard package, "pkg_delete conserver" and
then "pkg_add conserver--net".

Other notes
===========
Log files (by default, /var/log/conserver and /var/log/consoles/<name>)
can get large, so you will probably want to arrange rotation, either with
newsyslog(8) or some other method.

Upgrading from previous OpenBSD packages
========================================
If you have upgraded from a previous version of the OpenBSD package which
ran as root (pre-OpenBSD 5.6), you will need to change permissions/ownership
on log files to ensure that the _conserver user can write to them, e.g.:

  chown _conserver /var/log/conserver /var/log/consoles/*
@


1.5
log
@conserver tweaks:
- setup break sequence for ipmitool in sample config
- remind people about log rotation (console logs sometimes get quite large)
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.4 2014/09/08 16:12:11 sthen Exp $
d7 2
d18 24
d43 2
a44 2
ran as root, you will need to change permissions/ownership on log files to
ensure that the _conserver user can write to them, e.g.:
a46 5

Note that you will probably also want to arrange rotation of the above
log files (via newsyslog(8) or another method).

See more information at http://www.conserver.com/
@


1.4
log
@update to conserver 8.1.20, add more notes for upgrading users on how to
unbreak things following the uid change
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.3 2014/07/15 13:47:26 benno Exp $
d21 3
@


1.3
log
@run conserver as user _conserver instead of root
change maintainer to sthen@@
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d14 7
a20 1
terminal servers over the network.
@


1.2
log
@move to rc.d; ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.1 2010/11/07 20:47:08 jasper Exp $
d3 3
a5 1
Using conserver in an OpenBSD environment:
d7 3
a9 1
1. Customize the configuration for your needs, see /etc/conserver.cf
d11 1
a11 3
2. Edit /etc/rc.conf.local file:
   ...
   conserver=YES
d13 2
a14 10
3. Edit /etc/rc.local file:
   echo -n 'starting local daemons:'
   ...
   if [ -f /etc/conserver.cf ]; then
       if [ X"${conserver}" = X"YES" -a -x ${PREFIX}/sbin/conserver ]; then
           echo -n ' conserver';    ${PREFIX}/sbin/conserver -d -n
       fi
   fi
   ...
   echo '.'
d16 1
a16 2
4. See the man pages for conserver, conserver.cf, and console as well as
   the files in ${PREFIX}/share/examples/conserver for more information.
@


1.1
log
@- move to pkg-readmes
@
text
@d1 1
a1 1
$OpenBSD$
@

