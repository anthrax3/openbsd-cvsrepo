head	1.3;
access;
symbols
	OPENBSD_5_6:1.2.0.14
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.12
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.10
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.8
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.6
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.4
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.1.1.1.0.10
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.8
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.6
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.4
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ian_2009-Feb-08:1.1.1.1
	ian:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2014.10.21.15.08.51;	author abieber;	state dead;
branches;
next	1.2;
commitid	YhMp3H3j2hpyjY3O;

1.2
date	2011.03.02.06.31.35;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.08.22.32.40;	author ian;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.08.22.32.40;	author ian;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to the latest release. Tested with SparkCore.

OK ian@@
@
text
@$OpenBSD: patch-src_main_c,v 1.2 2011/03/02 06:31:35 jasper Exp $

From Bug 672 in OpenMoko via Simon Moore

--- src/main.c.orig	Wed Feb 16 15:36:44 2011
+++ src/main.c	Wed Feb 16 15:36:47 2011
@@@@ -103,8 +103,8 @@@@ static int find_dfu_if(struct usb_device *dev, int (*h
 
 	memset(dfu_if, 0, sizeof(*dfu_if));
 
-	for (cfg_idx = 0; cfg_idx < dev->descriptor.bNumConfigurations;
-	     cfg_idx++) {
+	for (cfg_idx = 0; NULL != dev->config &&
+		cfg_idx < dev->descriptor.bNumConfigurations; cfg_idx++) {
 		cfg = &dev->config[cfg_idx];
 		/* in some cases, noticably FreeBSD if uid != 0,
 		 * the configuration descriptors are empty */
@


1.2
log
@- update dfu-util to 0.3
- various cleanups

ok ian@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_main_c,v 1.1.1.1 2009/02/08 22:32:40 ian Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- src/main.c.orig	Fri Mar 30 13:21:03 2007
+++ src/main.c	Tue Aug  7 15:29:25 2007
@@@@ -82,8 +82,8 @@@@ static int find_dfu_if(struct usb_device *dev, int (*h
d10 1
a10 1
 	
d16 2
a17 2
 		for (intf_idx = 0; intf_idx < cfg->bNumInterfaces;
 		     intf_idx++) {
@


1.1.1.1
log
@dfu-util for Openmoko & similar devices, improved by fgsch@@,
comments by various, ok sthen@@
@
text
@@
