head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.2
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.4.0.20
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.18
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.14
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.16
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.12
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.10
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.4
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.2.0.16
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.14
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.22
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.20
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.18
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.16
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.14
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.12
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.10
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.8
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.6
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.4
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.2
	OPENBSD_3_1_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2017.05.06.21.57.27;	author sthen;	state Exp;
branches;
next	1.4;
commitid	M61ENKX23xiwP666;

1.4
date	2012.03.19.22.17.43;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.22.11.21.46;	author stsp;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.23.16.40.56;	author ckuethe;	state Exp;
branches;
next	1.1;

1.1
date	2002.03.22.05.31.37;	author form;	state Exp;
branches;
next	;


desc
@@


1.5
log
@regen
@
text
@$OpenBSD$

Index: src/windiv.c
--- src/windiv.c.orig
+++ src/windiv.c
@@@@ -20,6 +20,7 @@@@
 #include <config.h>
 #endif
 
+#include <sys/types.h>
 #include <dirent.h>
 #include <sys/stat.h>
 #include "port.h"
@


1.4
log
@update to minicom 2.5
- rolls in a huge bunch of wprintf patches, also fixes conflict with getline()
- note that the setuid support has been removed from the code
@
text
@d2 4
a5 2
--- src/windiv.c.orig	Sat Dec 12 15:47:47 2009
+++ src/windiv.c	Fri Mar 16 22:24:59 2012
@


1.3
log
@minicom contains a function called wprintf() (print to a window) which
collides with the standard C wprintf() (print a wide character string).
Upstream already realised this was a bad idea and changed the function's
name to mc_wprintf(). Do the same for our port.
ok ajacoutot landry dcoppa
@
text
@d1 6
a6 6
$OpenBSD: patch-src_windiv_c,v 1.2 2007/05/23 16:40:56 ckuethe Exp $
--- src/windiv.c.orig	Wed Oct 11 22:46:21 2006
+++ src/windiv.c	Thu Apr 21 23:48:44 2011
@@@@ -19,6 +19,7 @@@@
 #include "rcsid.h"
 RCSID("$Id: windiv.c,v 1.8 2006/10/11 20:46:21 al-guest Exp $")
a11 18
@@@@ -120,7 +121,7 @@@@ int ask(const char *what, const char **s)
   while (1) {
     wlocate(w, 2 + offs + 10 * cur, 1);
     if (!useattr)
-      wprintf(w, ">%s", _(s[cur]) + 1);
+      mc_wprintf(w, ">%s", _(s[cur]) + 1);
     else {
       wsetattr(w, XA_REVERSE | stdattr);
       wputs(w, _(s[cur]));
@@@@ -169,7 +170,7 @@@@ char *input(char *s, char *buf)
              BDOUBLE, stdattr, mfcolor, mbcolor, 1, 0, 1);
   wputs(w, s);
   wlocate(w, 0, 1);
-  wprintf(w, "> %-38.38s", buf);
+  mc_wprintf(w, "> %-38.38s", buf);
   wlocate(w, 2, 1);
   if (wgets(w, buf, 38, 128) < 0)
     buf = NULL;
@


1.2
log
@As I seem to be the only minicom user, take maintainership.
Update from 2.00.0 to 2.2.
Minicom 2.2 includes improved logging
@
text
@d1 3
a3 3
$OpenBSD$
--- src/windiv.c.orig	Thu May 17 12:50:11 2007
+++ src/windiv.c	Thu May 17 12:50:13 2007
d12 18
@


1.1
log
@upgrade to 2.00.0
@
text
@d2 2
a3 2
--- src/windiv.c.orig	Tue Feb  1 02:12:08 2000
+++ src/windiv.c	Fri Mar 22 09:03:35 2002
d6 1
a6 1
 RCSID("$Id: windiv.c,v 1.2 2000/01/27 11:25:31 misiek Exp $")
a11 16
@@@@ -251,8 +252,14 @@@@ char *file_dir;
 
       /* get regular files */
       dirlist[nCnt].d_ino    = dirent->d_ino;
-      dirlist[nCnt].d_off    = dirent->d_off;
       dirlist[nCnt].d_reclen = dirent->d_reclen;
+#if (defined(BSD) && (BSD >= 199306))
+      dirlist[nCnt].d_type   = dirent->d_type;
+      dirlist[nCnt].d_namlen = dirent->d_namlen;
+#else
+      dirlist[nCnt].d_off    = dirent->d_off;
+#endif
+
       strcpy(dirlist[nCnt].d_name, dirent->d_name );
       nMaxWidth = max(nMaxWidth, strlen(dirent->d_name));
       nCnt++;
@

