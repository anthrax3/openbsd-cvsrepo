head	1.4;
access;
symbols
	OPENBSD_3_0:1.3.0.8
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.6
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.1.1.1.0.8
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.6
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	seyon2_14b:1.1.1.1
	seyon:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2002.02.20.21.46.49;	author naddy;	state dead;
branches;
next	1.3;

1.3
date	99.11.29.21.47.16;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.10.27.12.20.25;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	97.12.31.16.37.29;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.31.16.37.29;	author joey;	state Exp;
branches;
next	;


desc
@@


1.4
log
@* return -1 by int rather than char
* md5 -> distinfo
* sensible patch names
@
text
@--- Imakefile.orig	Sat Mar 27 16:20:12 1993
+++ Imakefile	Mon Nov 29 16:29:36 1999
@@@@ -46,13 +46,6 @@@@
 InstallAppDefaultsLong(Seyon-co,Seyon-color)
 InstallNonExecFile(seyon.help,$(LIBDIR))
 
-install::
-	@@if [ ! -d $(HOME)/.seyon ]; then mkdir $(HOME)/.seyon; fi; \
-	echo "=== Copying example files (no overwrite) to $(HOME)/.seyon ..."; \
-	for i in phonelist protocols startup script.*; do \
-		if [ ! -f $(HOME)/.seyon/$$i ]; then cp $$i $(HOME)/.seyon; fi;\
-	done;
-
 clean::
 	rm -f version.h y.tab.* SeParse.c
 
@


1.3
log
@don't install seyon sgid dialer
@
text
@@


1.2
log
@- convert patches to unified diffs
- each patch only patches one file now
@
text
@d1 3
a3 14
--- Imakefile.orig	Thu Oct 21 16:55:03 1999
+++ Imakefile	Thu Oct 21 16:54:51 1999
@@@@ -11,6 +11,9 @@@@
 DEPLIBS = 
 LOCAL_LIBRARIES = XawClientLibs
 
+/* We need seyon to be sgid dialer */
+INSTPGMFLAGS = -s -m 2755 -o bin -g dialer
+
 /* SYS_LIBRARIES = -lm */
 
 SRCS  = Seyon.c SeActions.c SeScan.c SeDial.c SeErr.c SeGeneric.c \
@@@@ -45,13 +48,6 @@@@
 InstallAppDefaults(Seyon)
d6 1
a6 1
-
d13 1
a13 1
 
d16 1
@


1.1
log
@Initial revision
@
text
@d1 26
a26 118
diff -c ./Imakefile ../seyon.new/Imakefile
*** ./Imakefile	Sat Mar 27 22:20:12 1993
--- ../seyon.new/Imakefile	Fri Feb  3 07:51:12 1995
***************
*** 11,16 ****
--- 11,19 ----
  DEPLIBS = 
  LOCAL_LIBRARIES = XawClientLibs
  
+ /* We need seyon to be sgid dialer */
+ INSTPGMFLAGS = -s -m 2755 -o bin -g dialer
+ 
  /* SYS_LIBRARIES = -lm */
  
  SRCS  = Seyon.c SeActions.c SeScan.c SeDial.c SeErr.c SeGeneric.c \
Only in .: Makefile
diff -c ./SePort.c ../seyon.new/SePort.c
*** ./SePort.c	Wed Apr 21 15:38:31 1993
--- ../seyon.new/SePort.c	Fri Feb  3 07:37:50 1995
***************
*** 627,645 ****
  #endif
        break;
  #if USE_NONSTD_BAUD
- #ifdef linux
      case 57600:
        baudrate = B38400;
        ser_io.flags &= ~ASYNC_SPD_MASK;
        ser_io.flags |= ASYNC_SPD_HI;
        break;
      case 115200:
        baudrate = B38400;
        ser_io.flags &= ~ASYNC_SPD_MASK;
        ser_io.flags |= ASYNC_SPD_VHI;
        break;
  #endif
- #endif
      default:
        return (-1);
      }
--- 627,651 ----
  #endif
        break;
  #if USE_NONSTD_BAUD
      case 57600:
+ #ifdef linux
        baudrate = B38400;
        ser_io.flags &= ~ASYNC_SPD_MASK;
        ser_io.flags |= ASYNC_SPD_HI;
+ #else
+ 		baudrate = B57600;
+ #endif 
        break;
      case 115200:
+ #ifdef linux
        baudrate = B38400;
        ser_io.flags &= ~ASYNC_SPD_MASK;
        ser_io.flags |= ASYNC_SPD_VHI;
+ #else
+ 		baudrate = B115200;
+ #endif 
        break;
  #endif
      default:
        return (-1);
      }
***************
*** 691,696 ****
--- 697,710 ----
  #endif
  #endif
        return 38400;
+ #if USE_NONSTD_BAUD
+ #ifndef linux
+   case B57600:
+ 		return(57600);
+   case B115200:
+ 		return(115200);
+ #endif 
+ #endif 
    }
  
    SeError("Consistency error in baud rate");
Only in ../seyon.new: SePort.c.orig
diff -c ./SeSubs.c ../seyon.new/SeSubs.c
*** ./SeSubs.c	Fri Apr 23 12:24:17 1993
--- ../seyon.new/SeSubs.c	Fri Feb  3 07:47:37 1995
***************
*** 249,254 ****
--- 249,256 ----
  
      if (setuid(getuid()) < 0)
        SePError("Failed to set effective uid");
+     if (setgid(getgid()) < 0)
+       SePError("Failed to set effective gid");
  
      if (*scmd == '\0') {
        SeNotice(FmtString1("Executing the shell ``%s''", shell));
diff -c ./config.h ../seyon.new/config.h
*** ./config.h	Wed Apr 21 14:47:48 1993
--- ../seyon.new/config.h	Fri Feb  3 07:37:50 1995
***************
*** 81,86 ****
--- 81,94 ----
  #define HAVE_USLEEP         YES
  #endif
  
+ #ifdef __FreeBSD__
+ #define USE_NONSTD_BAUD     YES
+ #define LF_PATH				"/var/spool/lock"
+ #define LF_PREFIX           "LCK.."
+ #define LF_USE_ASCII_PID	YES
+ #define LF_USE_DEV_NUMBERS	NO
+ #endif 
+ 
  #ifdef SVR4
  #define HAVE_TERMIOS        YES
  #define HAVE_MODEM_CONTROL  YES
@


1.1.1.1
log
@
seyon
@
text
@@
