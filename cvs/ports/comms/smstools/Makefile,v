head	1.33;
access;
symbols
	OPENBSD_6_1:1.33.0.2
	OPENBSD_6_1_BASE:1.33
	OPENBSD_6_0:1.32.0.8
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.32.0.4
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.32.0.6
	OPENBSD_5_8_BASE:1.32
	OPENBSD_5_7:1.32.0.2
	OPENBSD_5_7_BASE:1.32
	OPENBSD_5_6:1.31.0.2
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.30.0.4
	OPENBSD_5_5_BASE:1.30
	OPENBSD_5_4:1.30.0.2
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.26.0.4
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.2
	OPENBSD_5_0:1.25.0.2
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.21.0.2
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	jasper_20070718:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2016.09.13.11.44.07;	author naddy;	state Exp;
branches;
next	1.32;
commitid	C6SmwZ8lkBQj7CMw;

1.32
date	2014.08.10.09.58.04;	author espie;	state Exp;
branches;
next	1.31;
commitid	jyyOLTDxRdjpw44n;

1.31
date	2014.03.09.20.52.25;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2013.05.04.11.31.57;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.30.22.18.20;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.11.01.30.27;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2013.01.14.01.36.04;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2011.12.09.10.01.32;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2011.05.11.06.22.16;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2011.04.13.13.27.53;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.03.02.08.59.20;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2011.03.02.08.39.13;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2010.11.15.00.22.50;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.19.20.07.15;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.09.21.22.40.26;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.09.03.13.37.13;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.06.30.22.23.44;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2010.06.30.16.45.27;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.06.25.22.44.33;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.05.22.08.22.42;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.05.06.23.01.59;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2010.05.03.14.29.31;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.04.22.21.07.58;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2010.02.09.12.23.59;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2009.12.02.14.24.35;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.06.02.15.57.48;	author sthen;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2009.03.17.10.47.44;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2008.10.30.13.45.19;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.28.15.21.49;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2008.01.30.14.34.01;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2007.09.04.10.33.19;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2007.08.03.17.42.45;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.18.11.03.34;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.18.11.03.34;	author jasper;	state Exp;
branches;
next	;

1.8.2.1
date	2009.12.28.02.13.11;	author william;	state Exp;
branches;
next	;


desc
@@


1.33
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.32 2014/08/10 09:58:04 espie Exp $

COMMENT =	gateway to send and receive SMS through GSM mobile phones

DISTNAME =	smstools3-3.1.15
REVISION =	1

CATEGORIES =	comms

HOMEPAGE =	http://smstools3.kekekasvi.com/

MAINTAINER =	Stuart Henderson <sthen@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =	c iconv mm

MASTER_SITES =	${HOMEPAGE}/packages/

# some scripts use formail
RUN_DEPENDS =	mail/procmail
LIB_DEPENDS =	converters/libiconv \
		devel/mm

USE_GMAKE =	Yes
NO_TEST =	Yes
WRKDIST =	${WRKDIR}/smstools3
WRKSRC =	${WRKDIST}/src

EXTRA_CFLAGS +=	-I${LOCALBASE}/include -L${LOCALBASE}/lib

MAKE_FLAGS +=	CFLAGS="${CFLAGS} -D NUMBER_OF_MODEMS=64 `mm-config --cflags`"

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/smsd ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKDIST}/scripts/{sendsms,sms2html} \
		${WRKDIST}/scripts/{sms2unicode,unicode2sms} \
		${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/smstools \
		${PREFIX}/share/examples/smstools/scripts
	${INSTALL_DATA} ${WRKDIST}/examples/* \
		${PREFIX}/share/examples/smstools
	${INSTALL_DATA} ${WRKDIST}/scripts/* \
		${PREFIX}/share/examples/smstools/scripts
	rm ${PREFIX}/share/examples/smstools/scripts/*.orig
	${SUBST_DATA} ${FILESDIR}/smsd.conf.openbsd \
		${PREFIX}/share/examples/smstools/smsd.conf.openbsd
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smstools
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smstools/slideshow
	${INSTALL_DATA} ${WRKDIST}/doc/*html ${PREFIX}/share/doc/smstools
	${INSTALL_DATA} ${WRKDIST}/doc/slideshow/* \
		${PREFIX}/share/doc/smstools/slideshow

.include <bsd.port.mk>
@


1.32
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/03/09 20:52:25 sthen Exp $
d17 1
a17 1
WANTLIB =	c mm
d23 2
a24 2
LIB_DEPENDS =	devel/mm
MODULES =	converters/libiconv
@


1.31
log
@enable iconv in smstools
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/05/04 11:31:57 sthen Exp $
d47 1
a47 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} \
		-c ${FILESDIR}/smsd.conf.openbsd \
@


1.30
log
@avoid unnecessary two-step install/subst_cmd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/30 22:18:20 sthen Exp $
d6 1
a6 1
REVISION =	0
d24 1
@


1.29
log
@reset @@mode before installing rc script
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/11 01:30:27 espie Exp $
d46 3
a48 4
	${SUBST_CMD} -c ${FILESDIR}/smsd.conf.openbsd \
	       ${WRKDIR}/smsd.conf.openbsd
	${INSTALL_DATA} ${WRKDIR}/smsd.conf.openbsd \
	       ${PREFIX}/share/examples/smstools/smsd.conf.openbsd
@


1.28
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/01/14 01:36:04 sthen Exp $
d6 1
@


1.27
log
@update smstools to 3.1.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/12/09 10:01:32 sthen Exp $
a14 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d25 1
a25 1
NO_REGRESS =	Yes
@


1.26
log
@minor whitespace
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/05/11 06:22:16 ajacoutot Exp $
d5 1
a5 2
DISTNAME =	smstools3-3.1.14
REVISION =	3
@


1.25
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and remove remove everything under the @@sample'd directory instead
of the directory itself to prevent a warning from pkg_delete(1) trying
to remove a non existing directory and to help preventing left-over
files and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/04/13 13:27:53 sthen Exp $
d31 1
a31 1
WRKSRC = 	${WRKDIST}/src
@


1.24
log
@remove MESSAGE lines obsoleted by the rcscript. bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/03/02 08:59:20 sthen Exp $
d6 1
a6 1
REVISION =	2
@


1.23
log
@rc_reload=NO, reminded by/ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/03/02 08:39:13 sthen Exp $
d6 1
a6 1
REVISION =	1
@


1.22
log
@install an rc.d script for smstools
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/11/15 00:22:50 espie Exp $
d6 1
a6 1
REVISION =	0
@


1.21
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/19 20:07:15 espie Exp $
d6 1
@


1.20
log
@LIB_DEPENDS -> WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/09/21 22:40:26 sthen Exp $
d24 2
a25 2
RUN_DEPENDS =	::mail/procmail
LIB_DEPENDS =	::devel/mm
@


1.19
log
@update smstools3 to 3.1.14, patch away a /bin/bash
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/09/03 13:37:13 sthen Exp $
d19 1
a19 1
WANTLIB =	c
d25 1
a25 1
LIB_DEPENDS =	mm::devel/mm
@


1.18
log
@update smstools3 to 3.1.12; many fixes/improvements including better
spool directory handling with many modems
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/06/30 22:23:44 sthen Exp $
d5 1
a5 1
DISTNAME =	smstools3-3.1.12
@


1.17
log
@Install sample scripts under share/examples/smstools
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/06/30 16:45:27 sthen Exp $
d5 1
a5 2
DISTNAME =	smstools3-3.1.11
PKGNAME =	${DISTNAME}p1
@


1.16
log
@improve sample config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/06/25 22:44:33 sthen Exp $
d6 1
a6 1
PKGNAME =	${DISTNAME}p0
d42 3
a44 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/smstools
	${INSTALL_DATA} ${WRKDIST}/examples/smsd.conf.full \
d46 3
@


1.15
log
@update to 3.1.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/05/22 08:22:42 jasper Exp $
d6 1
@


1.14
log
@- remove unneeded mips64 workaround
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/05/06 23:01:59 sthen Exp $
d5 1
a5 2
DISTNAME =	smstools3-3.1.8
PKGNAME =	${DISTNAME}p0
@


1.13
log
@minor update to 3.1.8, update plist, add some @@extraunexec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/05/03 14:29:31 sthen Exp $
d6 1
a31 5

# gcc 3.3.5 internal compiler error
.if ${MACHINE_ARCH:Mmips64*}
CFLAGS +=	-O0
.endif
@


1.12
log
@update to 3.1.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/04/22 21:07:58 sthen Exp $
d5 1
a5 1
DISTNAME =	smstools3-3.1.7
@


1.11
log
@Improve the sample config following some wrangling setting up a
tmobile usb stick (zte 120).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/02/09 12:23:59 jasper Exp $
d5 1
a5 2
DISTNAME =	smstools3-3.1.6
PKGNAME =	${DISTNAME}p0
@


1.10
log
@- extend archtecture tests for mips64el

ok naddy@@ phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/12/02 14:24:35 sthen Exp $
d6 1
d50 4
a53 2
	${INSTALL_DATA} ${FILESDIR}/smsd.conf.openbsd \
	       ${PREFIX}/share/examples/smstools
@


1.9
log
@update smstools to 3.1.6;

'This version was released because of a critical bug in the handling
of a concatenation storage. Users of version 3.1.5 should upgrade
to this version. As a workaround, disable purging of a concatenation
storage with a global setting in the smsd.conf: ic_purge_hours =
0. If ic_purge_minutes was set, remove the setting or change it to
0.'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/06/02 15:57:48 sthen Exp $
d33 1
a33 1
.if ${MACHINE_ARCH} == "mips64"
@


1.8
log
@- update to 3.1.5; adds smart logging (loglevel 7 output can be buffered
and written in full only when a voicecall/SMS transmission has an error),
additional modem settings, default modem configs, etc.

- enable stats support (using devel/mm)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/03/17 10:47:44 sthen Exp $
d5 1
a5 1
DISTNAME =	smstools3-3.1.5
@


1.8.2.1
log
@MFC:

smstools-3.1.6

Fix a critical bug

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/12/02 14:24:35 sthen Exp $
d5 1
a5 1
DISTNAME =	smstools3-3.1.6
@


1.7
log
@- remove bashisms
- add RUN_DEPENDS on procmail (some scripts use formail)
pointed out by Alexander Hall

- tidy Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/10/30 13:45:19 sthen Exp $
d5 1
a5 2
DISTNAME =	smstools3-3.1.3
PKGNAME =	${DISTNAME}p0
d25 1
d34 1
a34 1
EXTRA_CFLAGS =   -O0
d37 3
a39 1
MAKE_FLAGS +=		EXTRA_CFLAGS=${EXTRA_CFLAGS}
@


1.6
log
@maintenance update to 3.1.3, small bug fixes and some new features.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/28 15:21:49 naddy Exp $
d3 1
a3 1
COMMENT=		gateway to send and receive SMS through GSM mobile phones
d5 2
a6 1
DISTNAME=		smstools3-3.1.3
d8 1
a8 1
CATEGORIES=		comms
d10 1
a10 1
HOMEPAGE=		http://smstools3.kekekasvi.com/
d12 1
a12 1
MAINTAINER=		Stuart Henderson <sthen@@openbsd.org>
d15 16
a30 13
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB=		c

MASTER_SITES=		${HOMEPAGE}/packages/

USE_GMAKE=		Yes
NO_REGRESS=		Yes
WRKDIST=		${WRKDIR}/smstools3
WRKSRC= 		${WRKDIST}/src
d34 1
a34 1
EXTRA_CFLAGS=   -O0
d37 1
a37 1
MAKE_FLAGS+=		EXTRA_CFLAGS=${EXTRA_CFLAGS}
@


1.5
log
@Change "${SYSCONFDIR}" to "/etc" for files that are *always* in the
latter location.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/01/30 14:34:01 jasper Exp $
d5 1
a5 3
V=			3.0.9
DISTNAME=		smstools3-${V}
PKGNAME=		smstools-${V}p2
d13 1
a13 1
#GPLv2
@


1.4
log
@fix build on mips64.

no bump, because !mips64 packages didn't change, and mips64 didn't package.

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/09/04 10:33:19 sthen Exp $
d7 1
a7 1
PKGNAME=		smstools-${V}p1
@


1.3
log
@update my email address

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/08/03 17:42:45 bernd Exp $
d29 7
@


1.2
log
@Add @@conflict markers for the following conflicts:

devtodo-0.1.17p1,openmotif-demos-2.3.0
        /usr/local/bin/todo
gnokii-0.6.14p2,gnokii-0.6.14p2-no_x11,smstools-3.0.9
        /usr/local/bin/sendsms
openmotif-demos-2.3.0,tree-0.61
        /usr/local/bin/tree

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/18 11:03:34 jasper Exp $
d7 1
a7 1
PKGNAME=		smstools-${V}p0
d13 1
a13 1
MAINTAINER=		Stuart Henderson <stu@@spacehopper.org>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
PKGNAME=		smstools-${V}
@


1.1.1.1
log
@import smstools 3.0.9

The SMS Server Tools 3 is a SMS Gateway software which can send and
receive short messages through GSM modems and mobile phones.

from Stuart Henderson (MAINTAINER)
@
text
@@
