head	1.53;
access;
symbols
	OPENBSD_6_0:1.53.0.4
	OPENBSD_6_0_BASE:1.53
	OPENBSD_5_9:1.53.0.2
	OPENBSD_5_9_BASE:1.53
	OPENBSD_5_8:1.52.0.4
	OPENBSD_5_8_BASE:1.52
	OPENBSD_5_7:1.51.0.2
	OPENBSD_5_7_BASE:1.51
	OPENBSD_5_6:1.49.0.4
	OPENBSD_5_6_BASE:1.49
	OPENBSD_5_5:1.49.0.2
	OPENBSD_5_5_BASE:1.49
	OPENBSD_5_4:1.47.0.2
	OPENBSD_5_4_BASE:1.47
	OPENBSD_5_3:1.46.0.8
	OPENBSD_5_3_BASE:1.46
	OPENBSD_5_2:1.46.0.6
	OPENBSD_5_2_BASE:1.46
	OPENBSD_5_1_BASE:1.46
	OPENBSD_5_1:1.46.0.4
	OPENBSD_5_0:1.46.0.2
	OPENBSD_5_0_BASE:1.46
	OPENBSD_4_9:1.44.0.2
	OPENBSD_4_9_BASE:1.44
	OPENBSD_4_8:1.42.0.2
	OPENBSD_4_8_BASE:1.42
	OPENBSD_4_7:1.40.0.8
	OPENBSD_4_7_BASE:1.40
	OPENBSD_4_6:1.40.0.6
	OPENBSD_4_6_BASE:1.40
	OPENBSD_4_5:1.40.0.4
	OPENBSD_4_5_BASE:1.40
	OPENBSD_4_4:1.40.0.2
	OPENBSD_4_4_BASE:1.40
	OPENBSD_4_3:1.39.0.2
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.37.0.2
	OPENBSD_4_2_BASE:1.37
	OPENBSD_4_1:1.35.0.2
	OPENBSD_4_1_BASE:1.35
	OPENBSD_4_0:1.30.0.2
	OPENBSD_4_0_BASE:1.30
	OPENBSD_3_9:1.29.0.2
	OPENBSD_3_9_BASE:1.29
	OPENBSD_3_8:1.23.0.14
	OPENBSD_3_8_BASE:1.23
	OPENBSD_3_7:1.23.0.12
	OPENBSD_3_7_BASE:1.23
	OPENBSD_3_6:1.23.0.10
	OPENBSD_3_6_BASE:1.23
	OPENBSD_3_5:1.23.0.8
	OPENBSD_3_5_BASE:1.23
	OPENBSD_3_4:1.23.0.6
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.23.0.4
	OPENBSD_3_3_BASE:1.23
	OPENBSD_3_2:1.23.0.2
	OPENBSD_3_2_BASE:1.23
	OPENBSD_3_1:1.22.0.2
	OPENBSD_3_1_BASE:1.22
	OPENBSD_3_0:1.20.0.2
	OPENBSD_3_0_BASE:1.20
	OPENBSD_2_9_TRACKING_SWITCH:1.20
	OPENBSD_2_9:1.19.0.2
	OPENBSD_2_9_BASE:1.19
	OPENBSD_2_8:1.18.0.2
	OPENBSD_2_8_BASE:1.18
	OPENBSD_2_7:1.16.0.2
	OPENBSD_2_7_BASE:1.16
	OPENBSD_2_6:1.11.0.2
	OPENBSD_2_6_BASE:1.11
	OPENBSD_2_5:1.10.0.2
	OPENBSD_2_5_BASE:1.10
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	form_980504:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.53
date	2015.11.02.11.56.54;	author espie;	state Exp;
branches;
next	1.52;
commitid	ox8NBCUwS6UB4UwE;

1.52
date	2015.07.18.15.31.16;	author jasper;	state Exp;
branches;
next	1.51;
commitid	f4C5VBirmu8AeiLk;

1.51
date	2015.01.24.13.46.44;	author schwarze;	state Exp;
branches;
next	1.50;
commitid	r3ywIYD0rT3uuQW8;

1.50
date	2014.08.27.06.58.00;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	LV57HYD4QXzcqbWn;

1.49
date	2014.01.19.09.48.29;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2013.08.09.16.46.23;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2013.03.11.01.30.26;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2011.05.11.06.22.16;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.03.28.18.44.01;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.11.15.00.22.50;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2010.10.18.16.57.48;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2010.06.07.05.59.27;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2010.03.21.11.04.29;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2008.06.02.10.46.04;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2008.01.04.18.38.51;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2007.09.16.01.37.09;	author merdely;	state Exp;
branches;
next	1.37;

1.37
date	2007.06.15.11.30.38;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2007.03.23.20.28.28;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2006.11.17.13.37.06;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2006.11.05.10.02.14;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2006.10.18.08.20.25;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2006.10.16.15.49.50;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2006.10.15.16.07.07;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2006.03.04.10.38.58;	author mbalmer;	state Exp;
branches;
next	1.29;

1.29
date	2006.01.14.11.59.39;	author steven;	state Exp;
branches;
next	1.28;

1.28
date	2005.12.22.16.28.10;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2005.12.08.22.52.33;	author steven;	state Exp;
branches;
next	1.26;

1.26
date	2005.12.07.08.29.50;	author steven;	state Exp;
branches;
next	1.25;

1.25
date	2005.12.03.07.01.56;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2005.09.25.18.18.23;	author aanriot;	state Exp;
branches;
next	1.23;

1.23
date	2002.07.17.16.30.58;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2002.03.21.20.46.23;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2001.10.28.13.05.45;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2001.05.05.22.40.06;	author jakob;	state Exp;
branches;
next	1.19;

1.19
date	2001.03.31.21.56.45;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2000.09.24.07.04.02;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2000.08.15.19.38.18;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2000.04.09.17.36.09;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.24.22.11.36;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2000.03.03.12.07.03;	author turan;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.11.00.37.18;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	99.12.08.01.41.14;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.08.28.18.13.36;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.04.01.02.57.55;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.02.25.04.14.07;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	98.12.18.02.55.46;	author form;	state Exp;
branches;
next	1.7;

1.7
date	98.12.07.20.47.27;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	98.10.20.08.39.44;	author form;	state Exp;
branches;
next	1.5;

1.5
date	98.10.18.05.01.59;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	98.10.07.18.43.11;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.08.28.06.11.48;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.05.05.03.31.52;	author form;	state Exp;
branches;
next	1.1;

1.1
date	98.05.04.05.22.02;	author form;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.05.04.05.22.02;	author form;	state Exp;
branches;
next	;


desc
@@


1.53
log
@a few minor pkg_subst fixes, for the coming patch (disallow -c without -m
outside of WRKDIR)
@
text
@# $OpenBSD: Makefile,v 1.52 2015/07/18 15:31:16 jasper Exp $

COMMENT=	handle external logins, send and receive faxes

VERSION=	1.1.37
RELEASE=	Jun05
DISTNAME=	mgetty${VERSION}-${RELEASE}
PKGNAME=	mgetty+sendfax-${VERSION}
CATEGORIES=	comms

REVISION=	4

HOMEPAGE=	http://mgetty.greenie.net/

# GPLv2
PERMIT_PACKAGE_CDROM=	yes

WANTLIB=	c m util

MASTER_SITES=	ftp://mgetty.greenie.net/pub/mgetty/source/1.1/

RUN_DEPENDS=	print/ghostscript/gnu \
		graphics/netpbm

WRKDIST=	${WRKDIR}/mgetty-${VERSION}

MAKE_ENV+=	SYSCONFDIR=${SYSCONFDIR}

SAMPLE_SCRIPTS=	answer_fax.sh coverpg* fax* printfax* \
		new_fax.{NeXT,hpa,lj,m*,pbm,th,tiff}

pre-configure:
	sed -e "s,@@prefix@@,${PREFIX},g" \
		-e "s,@@sysconfdir@@,${SYSCONFDIR},g" \
		${FILESDIR}/setup > ${WRKDIR}/setup
	cp ${WRKSRC}/policy.h-dist ${WRKSRC}/policy.h
	${SUBST_CMD} -m 555 -c ${FILESDIR}/new_voice ${WRKSRC}/voice/scripts/new_voice

pre-install:
.for i in faxq.1 faxrm.1 faxqueue.5 fax.1 faxq-helper.8 mgetty.texi
	sed -i "s,faxrm,mgetty-faxrm,g" ${WRKSRC}/doc/${i}
	sed -i "s,usage\: faxrm,usage\: mgetty-faxrm,g" ${WRKSRC}/fax/faxrm.in
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mgetty+sendfax

post-install:
	mv ${PREFIX}/bin/faxrm ${PREFIX}/bin/mgetty-faxrm
	mv ${PREFIX}/man/man1/faxrm.1 ${PREFIX}/man/man1/mgetty-faxrm.1
	${INSTALL_SCRIPT} ${WRKDIR}/setup ${PREFIX}/lib/mgetty+sendfax
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mgetty+sendfax
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mgetty+sendfax/faq
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mgetty+sendfax/voice
	${INSTALL_DATA} ${WRKSRC}/doc/*.txt ${PREFIX}/share/doc/mgetty+sendfax
	${INSTALL_DATA} ${WRKSRC}/faq/SGML/* ${PREFIX}/share/doc/mgetty+sendfax/faq
	${INSTALL_DATA} ${WRKSRC}/voice/doc/* ${PREFIX}/share/doc/mgetty+sendfax/voice
	${INSTALL_DATA} -m 600 ${WRKSRC}/voice/voice.conf-dist ${PREFIX}/share/examples/mgetty+sendfax/voice.conf
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mgetty+sendfax/samples/new_fax.all
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mgetty+sendfax/voice/scripts
.for s in ${SAMPLE_SCRIPTS}
	${INSTALL_SCRIPT} ${WRKSRC}/samples/$s \
		${PREFIX}/share/examples/mgetty+sendfax/samples
.endfor
	${INSTALL_DATA} ${WRKSRC}/samples/new_fax.all/* \
		${PREFIX}/share/examples/mgetty+sendfax/samples/new_fax.all
	${INSTALL_SCRIPT} ${WRKSRC}/samples/new_fax.all/new_fax \
		${PREFIX}/share/examples/mgetty+sendfax/samples/new_fax.all
	${INSTALL_SCRIPT} ${WRKSRC}/voice/scripts/*.{sh,pl} \
		${PREFIX}/share/examples/mgetty+sendfax/voice/scripts
	${INSTALL_SCRIPT} ${WRKSRC}/voice/scripts/new_voice \
		${PREFIX}/share/examples/mgetty+sendfax/voice/scripts
	@@mv ${PREFIX}/man/man1/fax.1 ${PREFIX}/man/man7/fax.7

TEST_TARGET=		check
TESTS_ENVIRONMENT=	MAKE=${GMAKE}

do-test:
	@@cd ${WRKBUILD} && \
		exec ${SETENV} ${MAKE_ENV} \
		TESTS_ENVIRONMENT='${TESTS_ENVIRONMENT}' \
			${MAKE_PROGRAM} ${ALL_TEST_FLAGS} -f ${MAKE_FILE} \
			${TEST_TARGET}

.include <bsd.port.mk>
@


1.52
log
@use sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/01/24 13:46:44 schwarze Exp $
d37 1
a37 1
	${SUBST_CMD} -c ${FILESDIR}/new_voice ${WRKSRC}/voice/scripts/new_voice
@


1.51
log
@only minor formatting differences; drop USE_GROFF; no bump needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2014/08/27 06:58:00 ajacoutot Exp $
d41 2
a42 2
	perl -pi -e "s,faxrm,mgetty-faxrm,g" ${WRKSRC}/doc/${i}
	perl -pi -e "s,usage\: faxrm,usage\: mgetty-faxrm,g" ${WRKSRC}/fax/faxrm.in
d45 1
a45 1
	
@


1.50
log
@Cope with openssl(1) move from /usr/sbin to /usr/bin

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/01/19 09:48:29 ajacoutot Exp $
a27 1
USE_GROFF =	Yes
@


1.49
log
@Explicitely set @@mode.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2013/08/09 16:46:23 ajacoutot Exp $
d11 1
a11 1
REVISION=	3
@


1.48
log
@MESSAGE->README
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2013/03/11 01:30:26 espie Exp $
d11 1
a11 1
REVISION=	2
@


1.47
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/05/11 06:22:16 ajacoutot Exp $
d11 1
a11 1
REVISION=	1
@


1.46
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and remove remove everything under the @@sample'd directory instead
of the directory itself to prevent a warning from pkg_delete(1) trying
to remove a non existing directory and to help preventing left-over
files and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/03/28 18:44:01 ajacoutot Exp $
a16 3
PERMIT_PACKAGE_FTP=	yes
PERMIT_DISTFILES_CDROM=	yes
PERMIT_DISTFILES_FTP=	yes
d74 1
a74 1
REGRESS_TARGET=		check
d77 1
a77 1
do-regress:
d81 2
a82 2
			${MAKE_PROGRAM} ${ALL_REGRESS_FLAGS} -f ${MAKE_FILE} \
			${REGRESS_TARGET}
@


1.45
log
@Resign from maintainer, I don't use this anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/11/15 00:22:50 espie Exp $
d11 1
a11 1
REVISION=	0
@


1.44
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/10/18 16:57:48 espie Exp $
d11 2
a13 2

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.43
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/06/07 05:59:27 ajacoutot Exp $
d25 2
a26 2
RUN_DEPENDS=	::print/ghostscript/gnu \
		::graphics/netpbm
@


1.42
log
@Update to mgetty+sendfax-1.1.37.
This is a "minor maintenance" release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/03/21 11:04:29 ajacoutot Exp $
d31 1
@


1.41
log
@Missing new_fax @@sample spotted by Guy Daniel guy at pctechs dot com dot au
While here, also add a sample voice script.

Some cleanups and remove antique comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/06/02 10:46:04 ajacoutot Exp $
d5 2
a6 2
VERSION=	1.1.36
RELEASE=	Jun15
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p1
@


1.40
log
@- use tty00 by default for {in,out}coming voice+fax
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/01/04 18:38:51 espie Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p0
d36 1
a36 1
	@@sed -e "s,@@prefix@@,${PREFIX},g" \
d39 2
a40 1
	@@cp ${WRKSRC}/policy.h-dist ${WRKSRC}/policy.h
d71 2
@


1.39
log
@do the same thing with REGRESS_FLAGS as FAKE_FLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/09/16 01:37:09 merdely Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}
d15 1
a15 1
# GPL
d20 2
a21 1
WANTLIB=		c m util
@


1.38
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2007/06/15 11:30:38 ajacoutot Exp $
d79 1
a79 1
			${MAKE_PROGRAM} ${REGRESS_FLAGS} -f ${MAKE_FILE} \
@


1.37
log
@- minor update to version 1.1.36
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2007/03/23 20:28:28 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"handle external logins, send and receive faxes"
@


1.36
log
@- add Caller-ID support for filtering calls
(from Paul Pruett <ppruett at webengr dot com>)
- install more default config files with correct perms (and fix
voice.conf former installation) ; tweak MESSAGE accordingly
- regen patches while there
- bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/11/17 13:37:06 ajacoutot Exp $
d5 2
a6 2
VERSION=	1.1.35
RELEASE=	Feb22
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p5
@


1.35
log
@- fix faxq-helper owner/mode in PLIST

Noticed by and ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/11/05 10:02:14 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p4
@


1.34
log
@- warn people about mgetty/vgetty path change
- bump PKGNAME

patch from and ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/10/18 08:20:25 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p3
@


1.33
log
@Installs vgetty and mgetty into ${LOCALBASE}/libexec
Regen patches.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2006/10/16 15:49:50 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p2
@


1.32
log
@typo.
spotted by steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2006/10/15 16:07:07 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p1
@


1.31
log
@Workaround to remove mgetty/hylafax conflict.
Update my email address while there.
ok mbalmer@@ kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/03/04 10:38:58 mbalmer Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p0
@


1.30
log
@mgetty+sendfax 1.1.35

From Antoine Jacoutot <ajacoutot@@lphp.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/01/14 11:59:39 steven Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}
d13 1
a13 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@lphp.org>
d41 4
d48 2
@


1.29
log
@move fax(1) to fax(7) so the package doesn't conflict with comms/efax.
problem noticed by alexander.farber at gmail.com.
sync with update-patches while here

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/12/22 16:28:10 steven Exp $
d5 2
a6 2
VERSION=	1.1.34
RELEASE=	Nov30
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p3
d11 1
a11 1
HOMEPAGE=	http://mgetty.greenie.net
@


1.28
log
@remove mgettydefs(4) man page, since gettydefs support is disabled.
from Antoine Jacoutot (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/12/08 22:52:33 steven Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p2
d64 1
@


1.27
log
@better file permissions, don't install ugly sample scripts.
ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/12/07 08:29:50 steven Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p1
@


1.26
log
@- include more useful sample scripts for dealing with voice.
- bump PKGNAME

from Antoine Jacoutot (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/12/03 07:01:56 steven Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}p0
d31 3
d52 12
a63 2
	${TAR} -cf - -C ${WRKSRC} samples | ${TAR} -xf - -C ${PREFIX}/share/examples/mgetty+sendfax
	${TAR} -cf - -C ${WRKSRC} voice/scripts | ${TAR} -xf - -C ${PREFIX}/share/examples/mgetty+sendfax
@


1.25
log
@update to 1.1.34

from Antoine Jacoutot (maintainer)
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/09/25 18:18:23 aanriot Exp $
d8 1
a8 1
PKGNAME=	mgetty+sendfax-${VERSION}
d50 1
@


1.24
log
@update to 1.1.33. It's no longer broken, as the temporary files issue
has gone away.

from Antoine Jacoutot <ajacoutot@@lphp.org>;
ok alek@@ brad@@
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 2
VERSION=	1.1.33
RELEASE=	Apr10
d11 1
a11 1
HOMEPAGE=	http://alpha.greenie.net/mgetty/
d22 1
a22 2
MASTER_SITES=	ftp://alpha.greenie.net/pub/mgetty/source/1.1/ \
		ftp://ftp.leo.org/pub/comp/os/unix/networking/mgetty/
@


1.23
log
@shut up
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.22 2002/03/21 20:46:23 espie Exp $
# $FreeBSD: Makefile,v 1.25 1998/07/16 06:44:37 vanilla Exp $
d5 7
a11 1
BROKEN=		insecure tempfile handling: can overwrite any file on the system
d13 1
a13 3
DISTNAME=	mgetty1.1.21-Jul24
PKGNAME=	mgetty-1.1.21
CATEGORIES=	comms
d15 6
a20 4
PERMIT_PACKAGE_CDROM=
PERMIT_PACKAGE_FTP=
PERMIT_DISTFILES_CDROM=
PERMIT_DISTFILES_FTP=
a21 1
FAKE=No
d25 2
a26 5
HOMEPAGE=	http://alpha.greenie.net/mgetty/

MAKE_ENV+=	prefix="${PREFIX}" spool="/var/spool" \
		CONFDIR="/etc/mgetty+sendfax" \
		PHONE_GROUP="wheel" PHONE_PERMS="700"
d28 1
a28 1
WRKDIST=	${WRKDIR}/${PKGNAME}
d30 1
a30 2
post-build:
	@@sed -e "s,@@prefix@@,${PREFIX},g" ${FILESDIR}/setup > ${WRKDIR}/setup
d32 9
d43 18
a60 5
	@@echo "***"
	@@echo "*** Finished installing mgetty+sendfax."
	@@echo "*** To complete the install, run ${PREFIX}/lib/mgetty+sendfax/setup"
	@@echo "*** script."
	@@echo "***"
@


1.22
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/10/28 13:05:45 espie Exp $
d11 5
a15 1
NEED_VERSION=	1.515
@


1.21
log
@Zap default MAINTAINER from Makefile.
Especially now that the default line is more verbose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/05/05 22:40:06 jakob Exp $
d11 1
a11 1
NEED_VERSION=	1.406
@


1.20
log
@integrate COMMENT & bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/03/31 21:56:45 brad Exp $
a17 2

MAINTAINER=	ports@@openbsd.org
@


1.19
log
@remove myself as MAINTAINER of this port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/09/24 07:04:02 brad Exp $
d4 2
d11 2
a12 1
NEED_VERSION=	1.330
@


1.18
log
@add name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/08/15 19:38:18 brad Exp $
d16 1
a16 1
MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.17
log
@even better reason why this should be marked BROKEN,
insecure tempfile handling: can overwrite any file on the system
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/04/09 17:36:09 espie Exp $
d9 1
a9 1
NEED_VERSION=	1.191
d16 1
a16 1
MAINTAINER=	brad@@openbsd.org
@


1.16
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/03/24 22:11:36 espie Exp $
d4 1
a4 1
BROKEN=		installs files in /etc automatically
@


1.15
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/03/03 12:07:03 turan Exp $
d10 1
@


1.14
log
@broken, installs files automatically in /etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/11 00:37:18 espie Exp $
d9 1
a11 1
NEED_VERSION=	1.191
@


1.13
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/12/08 01:41:14 brad Exp $
d3 2
@


1.12
log
@- add new official dist site
- add HOMEPAGE
- cleanup Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/08/28 18:13:36 brad Exp $
d9 1
d19 1
a19 1
WRKSRC=	${WRKDIR}/${PKGNAME}
@


1.11
log
@upgrade to mgetty+sendfax 1.1.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/04/01 02:57:55 brad Exp $
d7 4
a10 1
MASTER_SITES=	ftp://ftp.leo.org/pub/comp/os/unix/networking/mgetty/
a13 1
WRKSRC=		${WRKDIR}/${PKGNAME}
d18 2
d21 1
a21 1
	@@${SED} -e "s,@@prefix@@,${PREFIX},g" ${FILESDIR}/setup > ${WRKDIR}/setup
d25 5
a29 5
	@@${ECHO} "***"
	@@${ECHO} "*** Finished installing mgetty+sendfax."
	@@${ECHO} "*** To complete the install, run ${PREFIX}/lib/mgetty+sendfax/setup"
	@@${ECHO} "*** script."
	@@${ECHO} "***"
@


1.10
log
@remove unnecessary comments and fix email address's
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/02/25 04:14:07 brad Exp $
d4 2
a5 2
DISTNAME=	mgetty1.1.20-Jan17
PKGNAME=	mgetty-1.1.20
d9 1
a9 1
MAINTAINER=	ports@@openbsd.org
d12 3
a14 3
MAKE_ENV+=	prefix=${PREFIX} spool=/var/spool \
		CONFDIR=/etc/mgetty+sendfax \
		PHONE_GROUP=wheel PHONE_PERMS=700
d17 1
a17 1
	${SED} -e "s,@@prefix@@,${PREFIX},g" ${FILESDIR}/setup >${WRKDIR}/setup
@


1.9
log
@upgrade to mgetty 1.1.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1998/12/18 02:55:46 form Exp $
d9 1
a9 1
MAINTAINER=	form@@OpenBSD.ORG
a14 6

MAN1=		coverpg.1 fax.1 faxq.1 faxrm.1 faxrunq.1 faxspool.1 g3cat.1 \
		g32pbm.1 pbm2g3.1 pvf.1 zplay.1
MAN4=		mgettydefs.4
MAN5=		faxqueue.5
MAN8=		callback.8 faxrunqd.8 mgetty.8 sendfax.8 
@


1.8
log
@update to 1.1.9, make port non-interactive.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1998/12/07 20:47:27 marc Exp $
d4 2
a5 2
DISTNAME=	mgetty1.1.19-Nov24
PKGNAME=	mgetty-1.1.19
@


1.7
log
@no package for this port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1998/10/20 08:39:44 form Exp $
a2 1
#
d4 2
a5 2
DISTNAME=	mgetty1.1.17-Aug07
PKGNAME=	mgetty-1.1.17
d7 1
a7 2

#BROKEN=	"newer version available"
d11 10
a20 1
MASTER_SITES=	ftp://ftp.leo.org/pub/comp/os/unix/networking/mgetty/
d22 2
a23 1
IS_INTERACTIVE=	yes
d25 2
a26 13
# Needs site specific setup info
#
NO_PACKAGE=	yes

WRKSRC=		${WRKDIR}/mgetty-1.1.17
MAKE_FLAGS=	prefix=${PREFIX} -f

MGETTY_ETC?=	/etc

pre-build:
.if defined(AUTO_PPP)
CFLAGS+= "-DAUTO_PPP"
.else
d28 3
a30 2
	@@${ECHO} "*** You're building mgetty without PPP detection support."
	@@${ECHO} "*** If you want to enable it, type \"make AUTO_PPP=yes\""
a31 11
.endif

pre-install:
	@@(cd ${WRKSRC}/doc; ${MAKE} manpages)

.if !defined(BATCH)
post-install:
	@@(cd ${PKGDIR}; \
	  export PKG_PREFIX=${PREFIX} MGETTY_ETC=${MGETTY_ETC}; \
	  /usr/bin/perl INSTALL _ POST-INSTALL)
.endif
@


1.6
log
@form@@vs.itam.nsc.ru -> form@@openbsd.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1998/10/18 05:01:59 marc Exp $
d16 4
@


1.5
log
@comment out the BROKEN reason for all ports where the reason
was source files out of date and we have a copy of the required
version on ftp.openbsd.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1998/10/07 18:43:11 marc Exp $
d11 1
a11 1
MAINTAINER=	form@@vs.itam.nsc.ru
@


1.4
log
@BROKEN: newer version available
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1998/08/28 06:11:48 marc Exp $
d9 1
a9 1
BROKEN=		"newer version available"
@


1.3
log
@update to 1.1.17
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 3

# Port			created			by
# mgetty+sendfax	27 April 1998		form
d8 2
a9 1
MASTER_SITES=	ftp://ftp.leo.org/pub/comp/os/unix/networking/mgetty/
d12 2
@


1.2
log
@update config directory in makefile
@
text
@d1 2
a2 5
# New ports collection makefile for:    mgetty+sendfax
# Version required:     1.1.14
# Date created:         27 April 1998
# Whom:                 form
#
d4 5
a8 2
DISTNAME=	mgetty1.1.14-Apr02
PKGNAME=	mgetty-1.1.14
d14 3
a16 1
WRKSRC=		${WRKDIR}/mgetty-1.1.14
a17 5
MAN1=		coverpg.1 fax.1 faxq.1 faxrm.1 faxrunq.1 faxspool.1 \
		g3cat.1 g32pbm.1 pbm2g3.1 pvf.1 zplay.1
MAN4=		mgettydefs.4
MAN5=		faxqueue.5
MAN8=		sendfax.8 mgetty.8 callback.8 faxrunqd.8
d19 1
a19 1
MGETTY_ETC?=	/etc/mgetty+sendfax
d36 3
a38 1
	@@(cd ${PKGDIR}; export PKG_PREFIX=${PREFIX}; /usr/bin/perl INSTALL _ POST-INSTALL)
a39 3

post-install:
	@@(cd ${PKGDIR}; export PKG_PREFIX=${PREFIX} MGETTY_ETC=${MGETTY_ETC}; /usr/bin/perl INSTALL _ POST-INSTALL)
@


1.1
log
@Initial revision
@
text
@d22 1
a22 1
MGETTY_ETC?=	/etc/mgetty
@


1.1.1.1
log
@
mgetty+sendfax port, nice getty replacement with fax/ppp recognition support
@
text
@@
