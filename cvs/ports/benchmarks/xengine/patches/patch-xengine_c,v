head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.60
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.58
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.54
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.56
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.52
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.50
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.48
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.46
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.44
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.42
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.40
	OPENBSD_5_0:1.1.0.38
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.36
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.34
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.32
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.30
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.28
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.26
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.24
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.22
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.20
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.18
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.16
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.14
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.12
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.10
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.8
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.6
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2002.07.31.06.10.56;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.1
log
@- add more libs at link time to satisfy X inter-library dependendcies -
fixes static archs (vax works)
- also update-patches while here
ok pjanzen
@
text
@$OpenBSD$
--- xengine.c.orig	Sun Jul 14 21:16:31 2002
+++ xengine.c	Sun Jul 14 21:16:31 2002
@@@@ -29,13 +29,13 @@@@ static char     sccsid[] = "@@(#)xengine.
 
 #define	PI	3.141592654
 
-XtCallbackProc  redraw_callback();
-XtTimerCallbackProc Cylcle();
+void redraw_callback( Widget, XEvent*, String*, Cardinal*);
+void Cycle( XtPointer, XtIntervalId* );
 
 Widget          toplevel, base, rpm_info, engine;
 GC              gcPiston, gcShaft, gcCylinder, gcRoter, gcBack, gcDep, gcPre, gcEngine;
 Pixmap          enginePixmap;
-int             width, height;
+Dimension       width, height;
 
 String          colors[] = {"gray", "lightseagreen", "dimgrey", "forestgreen", "black", "red", "cyan", "firebrick"};
 
@@@@ -47,7 +47,7 @@@@ main(argc, argv)
 	Arg             args[10];
 	XtTranslations  newTranslations;
 	static XtActionsRec redrawActions[] = {
-		{"expose", (XtCallbackProc) redraw_callback},
+		{"expose", redraw_callback},
 	};
 
 	static char    *overrideTranslations =
@@@@ -59,8 +59,6 @@@@ main(argc, argv)
 	int             i;
 	int             count;
 
-	XtTimerCallbackProc Cycle();
-
 	toplevel = XtInitialize("xengine", "XEngine", NULL, 0, &argc, argv);
 
 	for (count = 1; count < argc; count++) {
@@@@ -170,7 +168,7 @@@@ main(argc, argv)
 	XtMainLoop();
 }
 
-XtCallbackProc
+void
 redraw_callback(w, event, params, nparams)
 	Widget          w;
 	XEvent         *event;
@@@@ -180,22 +178,19 @@@@ redraw_callback(w, event, params, nparam
 
 	Arg             args[10];
 
-	XtSetArg(args[0], XtNwidth, 0);
-	XtSetArg(args[1], XtNheight, 0);
+	XtSetArg(args[0], XtNwidth, &width);
+	XtSetArg(args[1], XtNheight, &height);
 	XtGetValues(w, args, 2);
 
-	width = args[0].value;
-	height = args[1].value;
-
 	XFreePixmap(XtDisplay(engine), enginePixmap);
 	enginePixmap = XCreatePixmap(XtDisplay(engine), XtWindow(engine), width, height, DefaultDepthOfScreen(XtScreen(engine)));
 
 }
 
-XtTimerCallbackProc
+void
 Cycle(client_data, id)
-	caddr_t         client_data;
-	XtIntervalId    id;
+	XtPointer       client_data;
+	XtIntervalId*   id;
 {
 
 	Arg             args[10];
@
