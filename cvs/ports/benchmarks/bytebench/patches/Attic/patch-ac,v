head	1.2;
access;
symbols
	OPENBSD_3_1:1.1.0.18
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.16
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.14
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.12
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.10
	OPENBSD_2_7_BASE:1.1
	OPENBSD_2_6:1.1.0.8
	OPENBSD_2_6_BASE:1.1
	OPENBSD_2_5:1.1.0.6
	OPENBSD_2_5_BASE:1.1
	OPENBSD_2_4:1.1.0.4
	OPENBSD_2_4_BASE:1.1
	OPENBSD_2_3:1.1.0.2
	OPENBSD_2_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2002.07.17.21.57.21;	author lebel;	state dead;
branches;
next	1.1;

1.1
date	98.02.27.04.06.12;	author marc;	state Exp;
branches;
next	;


desc
@@


1.2
log
@respect ${CC} and update patches
@
text
@--- src/big.c.orig	Wed Feb  5 02:08:47 1992
+++ src/big.c	Thu Feb 26 19:55:18 1998
@@@@ -81,10 +81,10 @@@@
     int		nch;		/* # characters to write */
     int		written;	/* # characters actully written */
     char	logname[15];	/* name of the log file(s) */
-    int		onalarm();
-    int		pipeerr();
-    int		wrapup();
-    int		grunt();
+    void	onalarm( int );
+    void	pipeerr( int );
+    int		wrapup( char * );
+    void	grunt( int );
     int		pvec[2];	/* for pipes */
     char	*p;
     char	*prog;		/* my name */
@@@@ -383,22 +383,28 @@@@
 
 }
 
-onalarm()
+void
+onalarm( int sigraised )
 {
+    (void) sigraised;
     thres += est_rate;
     signal(SIGALRM, onalarm);
     alarm(GRANULE);
 }
 
-grunt()
+void
+grunt( int sigraised )
 {
+    (void) sigraised;
     /* timeout after label "bepatient" in main */
     exit_status = 4;
     wrapup("Timed out waiting for jobs to finish ...");
 }
 
-pipeerr()
+void
+pipeerr( int sigraised )
 {
+	(void) sigraised;
 	sigpipe++;
 }
 
@@@@ -434,9 +440,13 @@@@
     char		c;
     char		*malloc(), *realloc();
 
-    while (gets(line) != NULL) {
+    while (fgets(line, sizeof line, stdin) != NULL) {
+	lp = strchr( line, '\n' );
+	if ( lp ) {
+	    *lp = 0;
+	}
 	if (nwork >= MAXWORK) {
-	    fprintf(stderr, stderr, "Too many jobs specified, .. increase MAXWORK\n");
+	    fprintf(stderr, "Too many jobs specified, .. increase MAXWORK\n");
 	    exit(4);
 	}
 	w = &work[nwork];
@


1.1
log
@remove patch residue before install so uninstall is clean.
Minor tweaks to DESCR.  Replace gets with fgets.
Get rid of all compile warnings.
@
text
@@


