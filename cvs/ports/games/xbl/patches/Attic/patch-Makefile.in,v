head	1.5;
access;
symbols
	OPENBSD_4_9:1.4.0.14
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.12
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.10
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.8
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.6
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.3.0.16
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.14
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.12
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.10
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.8
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.6
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.0.14
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.12
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2011.07.08.11.42.09;	author jasper;	state dead;
branches;
next	1.4;

1.4
date	2007.12.06.15.45.23;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2003.10.17.18.03.29;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2003.07.18.15.03.53;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.24.20.05.28;	author turan;	state Exp;
branches
	1.1.12.1
	1.1.14.1;
next	;

1.1.12.1
date	2003.07.21.01.20.03;	author brad;	state Exp;
branches;
next	;

1.1.14.1
date	2003.07.21.01.11.55;	author brad;	state Exp;
branches;
next	;


desc
@@


1.5
log
@- fix patch names, no binary change
- regen a patch while here
@
text
@$OpenBSD: patch-Makefile.in,v 1.4 2007/12/06 15:45:23 ajacoutot Exp $
--- Makefile.in.orig	Sun Jan 28 19:22:32 2007
+++ Makefile.in	Thu Dec  6 16:41:56 2007
@@@@ -11,11 +11,10 @@@@
 
 # If xbl must NOT run with SGID bit (for protect scores files) then
 # comment next line
-USE_SETGID=-DUSE_SETGID
+#USE_SETGID=-DUSE_SETGID
 
 # group owner of games file.
-GROUP_GID=5
-@@GROUP_GID@@
+GROUP_GID=13
 
 ###########################################################################
 # You don't need to read below if you have xmkmf or imake
@@@@ -30,27 +29,23 @@@@ IMAKE_OPTIONS=-DTOP=/ -DUseInstalled
 # Directory who contain X Resource Database
 # The default value if overrided by configure if xmkmf or imake exists.
 #
-RESOURCEDIR=/usr/lib/X11/app-defaults
-@@XAPPLOADDIR@@
+RESOURCEDIR=$(PREFIX)/lib/X11/app-defaults
 
 # Directory where install binary
 # The default value if overrided by configure if xmkmf or imake exists.
 #
-BINDIR=/usr/local/bin
-@@BINDIR@@
+BINDIR=$(PREFIX)/bin
 
 # Directory who contain score
 # Put your HOME if you have a private use of the game
 # The default value if overrided by configure if xmkmf or imake exists.
 #
-SCOREDIR=/usr/local/lib/xbl
-@@SCOREDIR@@
+SCOREDIR=$(PREFIX)/lib/xbl
 
 # Directory where put man pages.
 # The default value if overrided by configure if xmkmf or imake exists.
 #
-MANPATH=/usr/local/man
-@@MANPATH@@
+MANPATH=$(PREFIX)/man
 
 ###########################################################################
 # Some values defined in imakefiles
@@@@ -83,9 +78,9 @@@@ LINTFLAGS=-Zf1000 -Zn4096 -Zt10000
 
 # For linking (configure script will modify this line)
 # xmkmf et imake informations are take into account.
-LIBS = @@LIBS@@ -lm
+LIBS = @@LIBS@@ -lm -lcompat
 
-all:demo
+all:bl
 
 XBLVERSION=1.1.5
 XBL=xbl-$(XBLVERSION)
@@@@ -94,7 +89,7 @@@@ CFLAGS = -DSCOREDIR=\"$(SCOREDIR)\" \
 	 -DRESOURCEDIR=\"$(RESOURCEDIR)\" \
 	 -DXBLVERSION=\"$(XBLVERSION)\" \
 	 -DGROUP_GID=$(GROUP_GID) \
-	  $(USE_SETGID) @@DEFS@@ @@CFLA@@ -g
+	  $(USE_SETGID) @@DEFS@@ @@CFLA@@ $(OPTCFLAGS)
 # For link edit options
 LDOPTIONS=$(CFLAGS)
 LDOPTIONS=@@LDOPTIONS@@
@@@@ -124,29 +119,24 @@@@ install:bl
 	@@echo "Executable go in $(BINDIR)"
 	@@echo "Scores     go in $(SCOREDIR)"
 	@@echo "Defaults   go in $(RESOURCEDIR)/Xbl"
-	@@echo "Man pages  go in $(MANPATH)/mann or man1"
+	@@echo "Man pages  go in $(MANPATH)/man1"
 	@@-if [ "" != "$(USE_SETGID)" ] ; then \
 		echo "You use GID=$(GROUP_GID) protection" ; \
 		fi
-	@@echo "Type <Return> to continue installation"
-	@@echo "Type NO       to stop installation"
-	@@read LINE && test "" = "$$LINE"
+#	@@echo "Type <Return> to continue installation"
+#	@@echo "Type NO       to stop installation"
+#	@@read LINE && test "" = "$$LINE"
 	#
 	# Remove old score file
 	#
 	@@-if [ -d "$(SCOREDIR)" ] ; \
 		then \
-		echo "The scoring method and speeds of Xbl had change" ; \
-		echo "If your version is older than 0.2e, destroy score." ; \
-		echo "Type <Return> to destroy old score files" ; \
-		echo "Type NO       to hold old score files" ; \
-		read LINE && test "" = "$$LINE" && rm $(SCOREDIR)/[1-9]* ; \
-		exit 0 ; \
+		rm $(SCOREDIR)/[1-9]* ; \
 		fi
 	#
 	# Install executable
 	#
-	$(CP) bl $(BINDIR)/xbl	
+	$(BSD_INSTALL_PROGRAM) bl $(BINDIR)/xbl	
 	-if [ "" = "$(USE_SETGID)" ] ; then \
 	     chmod 755  $(BINDIR)/xbl ;\
 	   else \
@@@@ -163,7 +153,6 @@@@ install:bl
 	$(CP) COPYING  $(SCOREDIR) ;		chmod 444 $(SCOREDIR)/COPYING
 	-if [ "" = "$(USE_SETGID)" ] ; then \
 	     chmod 777 $(SCOREDIR) ;\
-	     chmod 666 $(SCOREDIR)/[1-9]* ;\
 	   else \
 	     chmod 775 $(SCOREDIR) ;\
 	     chmod 664 $(SCOREDIR)/[1-9]* ;\
@@@@ -173,17 +162,11 @@@@ install:bl
 	#
 	# Install manual pages
 	#
-	-if [ -d $(MANPATH)/mann ] ; \
-		then \
-		$(CP) xbl.man $(MANPATH)/mann/xbl.n ;\
-		chmod 444 $(MANPATH)/mann/xbl.n ; \
-	   else \
-		$(CP) xbl.man $(MANPATH)/man1/xbl.1 ;\
-		chmod 444 $(MANPATH)/man1/xbl.1 ; \
-		fi
+	$(CP) xbl.man $(MANPATH)/man1/xbl.1 ;\
+	chmod 444 $(MANPATH)/man1/xbl.1 ; \
 	cp *.gif *.html $(SCOREDIR)
 	#
-	-ls -lsa $(SCOREDIR) $(BINDIR)/xbl $(MANPATH)/man[1n]/xbl.[1n]
+	-ls -lsa $(SCOREDIR) $(BINDIR)/xbl $(MANPATH)/man1/xbl.1
 	@@echo "Type xbl to play"
 
 bl:$(OBJ)
@


1.4
log
@- update to xbl-1.1.5
- respect CFLAGS
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile.in,v 1.3 2003/10/17 18:03:29 naddy Exp $
@


1.3
log
@Update to 1.1.2.  Drop setgid games, store per-user highscores in indivual
home directories.
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile.in,v 1.2 2003/07/18 15:03:53 naddy Exp $
--- Makefile.in.orig	2003-08-31 21:59:38.000000000 +0200
+++ Makefile.in	2003-10-17 19:55:27.000000000 +0200
d60 1
a60 1
 XBLVERSION=1.1.2
d62 9
d107 9
a115 1
@@@@ -173,17 +163,11 @@@@ install:bl
@


1.2
log
@update to 1.1.1, prune DESCR
@
text
@d1 9
a9 5
$OpenBSD$
--- Makefile.in.orig	Wed Jul  9 21:55:09 2003
+++ Makefile.in	Fri Jul 18 16:54:31 2003
@@@@ -14,8 +14,7 @@@@
 USE_SETGID=-DUSE_SETGID
d60 1
a60 1
 XBLVERSION=1.1.1
@


1.1
log
@- reorder patches
- force install in local instead X11R6
- fix packing lists
@
text
@d1 4
a4 3
--- Makefile.in.orig	Thu Nov 12 14:57:13 1998
+++ Makefile.in	Fri Mar 24 12:17:54 2000
@@@@ -14,7 +14,7 @@@@
d7 3
a9 2
 # group owner of games file
-GROUP_GID=2
d14 1
a14 1
@@@@ -29,27 +29,23 @@@@
d20 1
a20 1
+RESOURCEDIR=$(X11BASE)/lib/X11/app-defaults
d46 1
a46 1
@@@@ -82,9 +78,9 @@@@
d56 1
a56 1
 XBLVERSION=1.0j
d58 1
a58 11
@@@@ -93,7 +89,8 @@@@
 	 -DRESOURCEDIR=\"$(RESOURCEDIR)\" \
 	 -DXBLVERSION=\"$(XBLVERSION)\" \
 	 -DGROUP_GID=$(GROUP_GID) \
-	  $(USE_SETGID) @@DEFS@@ -g
+	 -I${X11BASE}/include \
+	  $(USE_SETGID) @@DEFS@@ @@CFLAGS@@
 # For link edit options
 LDOPTIONS=$(CFLAGS)
 LDOPTIONS=@@LDOPTIONS@@
@@@@ -123,29 +120,24 @@@@
d94 1
a94 1
@@@@ -172,17 +164,11 @@@@
@


1.1.12.1
log
@MFC:
update to 1.1.1, prune DESCR

Fixes a number of various buffer overflows which could allow an attacker
gid games access.

http://marc.theaimsgroup.com/?l=bugtraq&m=105777074308792&w=2
@
text
@d1 3
a3 4
$OpenBSD: patch-Makefile.in,v 1.2 2003/07/18 15:03:53 naddy Exp $
--- Makefile.in.orig	Wed Jul  9 21:55:09 2003
+++ Makefile.in	Fri Jul 18 16:54:31 2003
@@@@ -14,8 +14,7 @@@@
d6 2
a7 3
 # group owner of games file.
-GROUP_GID=5
-@@GROUP_GID@@
d12 1
a12 1
@@@@ -30,27 +29,23 @@@@ IMAKE_OPTIONS=-DTOP=/ -DUseInstalled
d18 1
a18 1
+RESOURCEDIR=$(PREFIX)/lib/X11/app-defaults
d44 1
a44 1
@@@@ -83,9 +78,9 @@@@ LINTFLAGS=-Zf1000 -Zn4096 -Zt10000
d54 1
a54 1
 XBLVERSION=1.1.1
d56 11
a66 1
@@@@ -124,29 +119,24 @@@@ install:bl
d102 1
a102 1
@@@@ -173,17 +163,11 @@@@ install:bl
@


1.1.14.1
log
@MFC:
update to 1.1.1, prune DESCR

Fixes a number of various buffer overflows which could allow an attacker
gid games access.

http://marc.theaimsgroup.com/?l=bugtraq&m=105777074308792&w=2
@
text
@d1 3
a3 4
$OpenBSD: patch-Makefile.in,v 1.2 2003/07/18 15:03:53 naddy Exp $
--- Makefile.in.orig	Wed Jul  9 21:55:09 2003
+++ Makefile.in	Fri Jul 18 16:54:31 2003
@@@@ -14,8 +14,7 @@@@
d6 2
a7 3
 # group owner of games file.
-GROUP_GID=5
-@@GROUP_GID@@
d12 1
a12 1
@@@@ -30,27 +29,23 @@@@ IMAKE_OPTIONS=-DTOP=/ -DUseInstalled
d18 1
a18 1
+RESOURCEDIR=$(PREFIX)/lib/X11/app-defaults
d44 1
a44 1
@@@@ -83,9 +78,9 @@@@ LINTFLAGS=-Zf1000 -Zn4096 -Zt10000
d54 1
a54 1
 XBLVERSION=1.1.1
d56 11
a66 1
@@@@ -124,29 +119,24 @@@@ install:bl
d102 1
a102 1
@@@@ -173,17 +163,11 @@@@ install:bl
@


