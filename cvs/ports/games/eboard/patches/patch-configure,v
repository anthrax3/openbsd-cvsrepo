head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.12
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.8
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.10
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.6
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.4
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.8
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.6
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.8
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.6
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3;
locks; strict;
comment	@# @;


1.6
date	2013.08.09.19.04.49;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.12.15.17.59.21;	author fgsch;	state Exp;
branches;
next	1.4;

1.4
date	2010.01.07.09.49.21;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.19.09.01.25;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2007.12.16.01.46.57;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.12.03.18.54.58;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Remove -lpthread patching.
@
text
@$OpenBSD: patch-configure,v 1.5 2011/12/15 17:59:21 fgsch Exp $
--- configure.orig	Fri Feb 22 16:51:22 2008
+++ configure	Fri Aug  9 20:48:04 2013
@@@@ -6,7 +6,7 @@@@ my $prefix      = "/usr/local";
 my $package     = "eboard";
 my $version     = "1.1.1";
 my $cxx         = "g++";
-my @@cxxflags    = ("-O6");
+my @@cxxflags    = ();
 my @@ldflags     = ("-lpthread");
 my @@libs        = ();
 my $configh     = "config.h";
@@@@ -236,7 +236,7 @@@@ sub append_flags {
     my $x = shift @@_;
     my @@y;
 
-    @@y = split(/:/, $x);
+    @@y = split(/\s+/, $x);
     for (@@y) {
 	push @@cxxflags, "$_";
     }
@@@@ -264,7 +264,7 @@@@ sub macro_check {
     my $hdr = shift @@_;
     my $mac = shift @@_;
     my $chn = shift @@_;
-    my $program = "#include <$hdr>\n#if !defined($mac)\n#error not there\n#endif\n";
+    my $program = "#include <sys/types.h>\n#include <$hdr>\n#if !defined($mac)\n#error not there\n#endif\n";
 
     print "checking for $mac in $hdr... ";
     if (!open(TESTCC,">test.cc")) {
@@@@ -342,6 +342,8 @@@@ sub header_check {
 	print "$y";
 	if ($bsdbug != 0) {
 	    $program = "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n#include <$z>\nint main() { return 0; }\n";
+	} elsif ($z == "sys/audioio.h") {
+	    $program = "#include <sys/types.h>\n#include <$z>\nint main() { return 0; }\n";
 	} else {
 	    $program = "#include <$z>\nint main() { return 0; }\n";
         }
@@@@ -512,6 +514,10 @@@@ if (!header_check("stdio.h","stdlib.h","string.h","uni
 #optional headers
 header_check("strings.h","sys/soundcard.h","sys/audioio.h","linux/joystick.h");
 
+if (header_check("sndio.h")) {
+    append_libs("sndio");
+}
+
 $t1=macro_check("netinet/in.h","IPPROTO_TCP","HAVE_IPPROTO_TCP_ON_IN_H");
 $t2=macro_check("netinet/in.h","TCP_NODELAY","HAVE_TCP_NODELAY_ON_IN_H");
 $t3=macro_check("netinet/in.h","SOL_TCP","HAVE_SOL_TCP_ON_IN_H");
@@@@ -536,7 +542,7 @@@@ if ($t2 != 0) {
 	print "netinet/tcp.h not required, SOL_TCP present.\n";
     }
 } else {
-    if ($t5 != 0 && ($t1!=0 || $t4!=0) && ($t3!=0 || $t6!=0) ) {
+    if ($t5 != 0 && ($t1!=0 || $t4!=0 || $t3!=0 || $t6!=0) ) {
 	cppdef("NEED_TCP_H");
 	cppdef("USE_SOCK_OPTS");
 	if ($t1!=0 || $t4!=0) {
@


1.5
log
@Update to eboard 1.1.1.
ajacoutot@@ ok
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.4 2010/01/07 09:49:21 jakemsr Exp $
--- configure.orig	Fri Feb 22 13:51:22 2008
+++ configure	Wed Dec 14 23:30:00 2011
@@@@ -6,8 +6,8 @@@@ my $prefix      = "/usr/local";
a8 1
-my @@ldflags     = ("-lpthread");
d10 1
a10 1
+my @@ldflags     = ("-pthread");
a12 1
 my $configmake  = "config.make";
@


1.4
log
@use sndio for audio
ok ratchov@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.3 2007/12/19 09:01:25 fgsch Exp $
--- configure.orig	Wed May 23 11:57:45 2007
+++ configure	Sat Dec 26 03:23:34 2009
d6 1
a6 1
 my $version     = "1.0.4";
@


1.3
log
@better fix for the compilation problems. ajacoutot@@ steven@@ ok.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2007/12/16 01:46:57 ajacoutot Exp $
--- configure.orig	Wed May 23 20:57:45 2007
+++ configure	Sun Dec 16 02:26:41 2007
@@@@ -6,7 +6,7 @@@@ my $prefix      = "/usr/local";
d9 1
d11 1
a11 1
 my @@ldflags     = ("-lpthread");
d14 1
d42 12
a53 1
@@@@ -536,7 +538,7 @@@@ if ($t2 != 0) {
@


1.2
log
@- make it compile again (problem noticed by steven@@)
- respect CXXFLAGS
- add license marker
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.1 2007/12/03 18:54:58 fgsch Exp $
d18 1
a18 1
+    @@y = split(/ /, $x);
a48 8
@@@@ -668,6 +670,7 @@@@ print "wrote $configh\n";
 
 print CONFIGMAKE "CXX       = $cxx\n";
 print CONFIGMAKE "CXXFLAGS  = @@cxxflags\n";
+print CONFIGMAKE "CXXFLAGS  += !!CXXFLAGS!!\n";
 print CONFIGMAKE "LDFLAGS   = @@ldflags\n";
 
 print CONFIGMAKE "prefix    = \${DESTDIR}$prefix\n";
@


1.1
log
@update to eboard 1.0.4 and remove myself as maintainer.
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.orig	Wed May 23 19:57:45 2007
+++ configure	Mon Dec  3 11:39:59 2007
d49 8
@

