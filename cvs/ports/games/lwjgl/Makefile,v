head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.3.0.4
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	abieber_20140930:1.1.1.1
	abieber:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.03.18.23.12.17;	author naddy;	state Exp;
branches;
next	1.4;
commitid	KZAl4KEiw6a3Jixw;

1.4
date	2016.03.02.14.42.08;	author abieber;	state Exp;
branches;
next	1.3;
commitid	jdQsfpAmjjeOsL4J;

1.3
date	2014.10.07.16.25.32;	author abieber;	state Exp;
branches;
next	1.2;
commitid	FTZ2by098T46CUhY;

1.2
date	2014.10.03.19.24.46;	author sthen;	state Exp;
branches;
next	1.1;
commitid	qBrTQMmtcgDlhp4O;

1.1
date	2014.09.30.17.44.48;	author abieber;	state Exp;
branches
	1.1.1.1;
next	;
commitid	CzhH90HACCMqIFt3;

1.1.1.1
date	2014.09.30.17.44.48;	author abieber;	state Exp;
branches;
next	;
commitid	CzhH90HACCMqIFt3;


desc
@@


1.5
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@# $OpenBSD: Makefile,v 1.4 2016/03/02 14:42:08 abieber Exp $

COMMENT=	lightweight game library for java

V=		2.9.3
GH_ACCOUNT=	LWJGL
GH_PROJECT=	lwjgl
GH_TAGNAME=	${GH_PROJECT}${V}
DISTNAME=	lwjgl${V}
PKGNAME=	lwjgl-${V}

.if ${MACHINE_ARCH} == "i386"
M_ARCH=		""
.elif ${MACHINE_ARCH} == "amd64"
M_ARCH=		64
.endif

LWJGL_HOME=	${PREFIX}/share/lwjgl

CATEGORIES=	games devel

HOMEPAGE=	http://lwjgl.org

MAINTAINER=	Aaron Bieber <abieber@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=   Yes

# GL listed here as it is dlopen()d by the lib
WANTLIB += GL X11 Xcursor Xext Xrandr Xxf86vm m pthread

MODULES=	java
MODJAVA_VER=	1.6+
MODJAVA_BUILD=	ant
MODJAVA_JRERUN=	Yes

BUILD_DEPENDS=	audio/openal \
		devel/apache-ant

NO_TEST=	Yes

ANT_CMD=	${SETENV} ${MAKE_ENV} PATH=${JAVA_HOME}/bin:${PATH} \
		${LOCALBASE}/bin/ant

SUBST_VARS+=	M_ARCH

pre-configure:
	perl -pi -e 's,/usr/X11R6,${X11BASE},g' \
		${WRKSRC}/platform_build/bsd_ant/build.xml
	perl -pi -e 's,/usr/local,${LOCALBASE},g' \
		${WRKSRC}/platform_build/bsd_ant/build.xml

do-build:
	cd ${WRKSRC} && ${ANT_CMD}

do-install:
	${INSTALL_DATA_DIR} ${LWJGL_HOME}
	for x in ${WRKSRC}/libs/*.jar; do \
		${INSTALL_DATA} $$x ${LWJGL_HOME}/; \
	done
	${INSTALL_DATA} ${WRKSRC}/libs/openbsd/liblwjgl${M_ARCH}.so ${LWJGL_HOME}/

.include <bsd.port.mk>
@


1.4
log
@Update to 2.9.3, all our patches were pulled in upstream! Re-enable i386.

Played minecraft on a CR48 at about 2 frames per second!

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/10/07 16:25:32 abieber Exp $
a38 2

SHARED_ONLY=	Yes
@


1.3
log
@Add missing patches for full OpenBSD compat.

OK armani@@ - tweak from sthen@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.2 2014/10/03 19:24:46 sthen Exp $

BROKEN-i386=	/usr/bin/ld: cannot find -ljawt
d5 1
a5 2
V=		2.9.1
REVISION=	0
d60 3
a62 2
	${INSTALL_DATA} ${WRKSRC}/libs/lwjgl.jar ${LWJGL_HOME}/
	${INSTALL_DATA} ${WRKSRC}/libs/lwjgl_util.jar ${LWJGL_HOME}/
@


1.2
log
@last commit still wasn't enough for i386, mark broken there for now
/usr/bin/ld: cannot find -ljawt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/09/30 17:44:48 abieber Exp $
d8 1
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.40 2014/05/07 15:42:16 kurt Exp $
@


1.1.1.1
log
@Initial import of lwjgl, a java game development library. This is required
for games like Minecraft.

Next release the patches can probably be removed as they were submitted
and merged with upstream: https://github.com/LWJGL/lwjgl/pull/54

OK sthen@@
@
text
@@
