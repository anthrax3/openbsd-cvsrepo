head	1.3;
access;
symbols
	OPENBSD_3_7:1.2.0.6
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.4
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.1.1.1.0.4
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.2
	OPENBSD_3_3_BASE:1.1.1.1
	pvalchev_20030202:1.1.1.1
	pvalchev:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2005.08.10.05.24.10;	author jolan;	state dead;
branches;
next	1.2;

1.2
date	2004.02.20.06.49.11;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2003.02.03.04.09.56;	author pvalchev;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.02.03.04.09.56;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to 2.0.2
@
text
@$OpenBSD: patch-src_platform_LinuxMedia_cxx,v 1.2 2004/02/20 06:49:11 jolan Exp $
--- src/platform/LinuxMedia.cxx.orig	2004-01-16 16:21:04.000000000 -0600
+++ src/platform/LinuxMedia.cxx	2004-02-20 00:03:48.000000000 -0600
@@@@ -23,7 +23,11 @@@@
 #include <unistd.h>
 #include <sys/wait.h>
 #include "bzsignal.h"
+#if defined(__OpenBSD__)
+#include <soundcard.h>
+#else
 #include <sys/soundcard.h>
+#endif
 #include <sys/ioctl.h>
 #include <TimeKeeper.h>
 #include <errno.h>
@


1.2
log
@update to 1.10.4 and mark as BROKEN pending resolution of some issues.
the old version (1.7g0) is incompatible with 1.10.x+ so you would have
gotten a BROKEN either way unfortunately.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Initial revision
@
text
@d2 3
a4 3
--- src/platform/LinuxMedia.cxx.orig	Tue Jun  4 00:40:34 2002
+++ src/platform/LinuxMedia.cxx	Sun Jul 14 21:49:05 2002
@@@@ -23,7 +23,7 @@@@
d8 1
a8 1
-#include <sys/soundcard.h>
d10 3
a15 23
@@@@ -119,7 +119,7 @@@@ boolean			LinuxMedia::openAudio()
 boolean			LinuxMedia::checkForAudioHardware()
 {
   boolean flag=False;
-  if (!access("/dev/dsp", W_OK)) flag=True;
+  if (!access("/dev/audio", W_OK)) flag=True;
   if (!access("/dev/sound/dsp", W_OK)) flag=True;
   return flag;
 }
@@@@ -176,11 +176,11 @@@@ boolean			LinuxMedia::openAudioHardware(
   audioLowWaterMark = 2;
 
   // open device (but don't wait for it)
-  audioPortFd = open("/dev/dsp", O_WRONLY | O_NDELAY, 0);
+  audioPortFd = open("/dev/audio", O_WRONLY | O_NDELAY, 0);
   if (audioPortFd == -1) {
     audioPortFd = open("/dev/sound/dsp", O_WRONLY | O_NDELAY, 0);
     if (audioPortFd == -1) {
-      fprintf(stderr, "Failed to open audio device /dev/dsp or /dev/sound/dsp (%d)\n", errno);
+      fprintf(stderr, "Failed to open audio device /dev/audio or /dev/sound/dsp (%d)\n", errno);
       return False;
 	}
   }
@


1.1.1.1
log
@Initial import of bzflag-1.7g0

bzflag is a multiplayer 3d tank war game
WWW: http://www.bzflag.org/

Maintainer Jolan Luff <jolan@@cryptonomicon.org>
@
text
@@
