head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.01.24.12.34.07;	author dcoppa;	state Exp;
branches;
next	;
commitid	C4S8wWkBOB6DiHpp;


desc
@@


1.1
log
@
Replace overlapping memcpy with memmove

Breakage spotted by bentley@@, who forgot to reply to my request for
feedback
@
text
@$OpenBSD$

Replace overlapping memcpy with memmove

--- libj/jstr/str_trim.c.orig	Sat Jan 24 13:32:27 2015
+++ libj/jstr/str_trim.c	Sat Jan 24 13:32:45 2015
@@@@ -47,7 +47,7 @@@@ char *trim(char *s) {
       SET_LAST_NWS(ws, s);
 
       /* Copy the non-ws characters in <s>. */
-      if(ws.fnws > d) MEMCPY(d, ws.fnws, NWS_SIZE(ws));
+      if(ws.fnws > d) MEMMOVE(d, ws.fnws, NWS_SIZE(ws));
       *(d + NWS_SIZE(ws)) = '\0';
       return(d);
 
@
