head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.11.02.15.28.29;	author ajacoutot;	state dead;
branches;
next	1.1;
commitid	5az0FqAodTPKJK4T;

1.1
date	2013.08.28.18.56.38;	author martin;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove; we haven't been able to update for a while now because this has
become a paied app. We never shipped pkg anyway.

ok jasper@@
@
text
@--- src/multiplayer.cpp.orig	Tue Mar 12 23:25:45 2013
+++ src/multiplayer.cpp	Tue Aug 27 20:05:43 2013
@@@@ -131,7 +131,8 @@@@ void setup_networked_game(const std::string& server)
 	udp_socket.reset(new udp::socket(io_service));
     udp_socket->open(udp::v4());
 
-	boost::array<char, 4> udp_msg;
+	// on some archs, char is unsigned by default
+	boost::array<signed char, 4> udp_msg;
 	memcpy(&udp_msg[0], &id, 4);
 
 //	udp_socket->send_to(boost::asio::buffer(udp_msg), receiver_endpoint);
@@@@ -152,7 +153,8 @@@@ void setup_networked_game(const std::string& server)
 
 namespace {
 void send_confirm_packet(int nplayer, std::vector<char>& msg, bool has_confirm) {
-	boost::array<char, 4096> udp_msg;
+	// on some archs, char is unsigned by default
+	boost::array<signed char, 4096> udp_msg;
 	msg.resize(6);
 	msg[0] = has_confirm ? 'a' : 'A';
 	memcpy(&msg[1], &id, 4);
@@@@ -288,7 +290,8 @@@@ void sync_start_time(const level& lvl, boost::function
 		}
 
 		while(udp_packet_waiting()) {
-			boost::array<char, 4096> udp_msg;
+			// on some archs, char is unsigned by default
+			boost::array<signed char, 4096> udp_msg;
 			udp::endpoint endpoint;
 			size_t len = udp_socket->receive_from(boost::asio::buffer(udp_msg), endpoint);
 			if(len == 6 && ::toupper(udp_msg[0]) == 'A') {
@


1.1
log
@fix compilation on archs where char is unsigned by default (like ppc)
bump and fix Makefile typo while there

ok ajacoutot
@
text
@@

