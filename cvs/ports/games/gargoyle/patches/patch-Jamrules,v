head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.12
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.8
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.10
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.6
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.4
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.12
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.10
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.8
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.6
	OPENBSD_5_0:1.5.0.4
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	sthen_20090211:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2013.08.22.20.06.49;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2010.10.23.09.15.16;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.17.22.21.55;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2009.08.28.01.02.21;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.05.11.58.38;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.11.13.30.44;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.11.13.30.44;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to gargoyle 2011.1

patch to disable SDL sound for now; it fails during init, "error: modified
chunk-pointer". this happens with the previous version of gargoyle too,
suspect this got broken in an update of one of the SDL ports at some
point as it used to work..
@
text
@$OpenBSD: patch-Jamrules,v 1.5 2010/10/23 09:15:16 jasper Exp $
--- Jamrules.orig	Wed Jul 13 09:22:30 2011
+++ Jamrules	Thu Mar  7 12:14:11 2013
@@@@ -135,6 +135,23 @@@@ switch $(OS)
         else      { SHRLINKLIBS += $(GARGLKLIBS) ; }
 
 
+    case OPENBSD :
+        Echo "OS is OpenBSD (gtk+)" ;
+        SUFDLL  = .so.$(LIBgarglk_VERSION) ;
+        PKGCONFIG = "pkg-config freetype2 gtk+-2.0 gdk-x11-2.0 gobject-2.0" ;
+        #PKGCONFIG = "pkg-config freetype2 gtk+" ;
+        SHELLHEADER = "#!/bin/sh" ;
+        GARGLKCCFLAGS = "`$(PKGCONFIG) --cflags`" -fPIC ;
+        SHRLINKLIBS = "`$(PKGCONFIG) --libs`" -ljpeg -lpng -lz ;
+        LINKLIBS = -L$(PREFIX)/lib -L$(X11BASE)/lib -lz ;
+
+	if $(USESDL)
+	{
+	    GARGLKCCFLAGS += -I$(PREFIX)/include/SDL -I$(PREFIX)/include/ ;
+	    LINKLIBS += -pthread ;
+	    SHRLINKLIBS += -pthread -lSDL_mixer -lSDL_sound -lSDL -lsmpeg -lvorbisfile ;
+	}
+
     case MACOSX :
         Echo "OS is MACOSX (cocoa)" ;
         SUFDLL = .dylib ;
@@@@ -167,7 +184,7 @@@@ switch $(BUILD)
 
     case RELEASE :
         Echo "BUILD is RELEASE" ;
-        OPTIM = -O2 $(CFLAGS) ;
+        OPTIM = $(CFLAGS) ;
         LINKFLAGS = $(LDFLAGS) ;
         SHRLINKFLAGS = $(LDFLAGS) ;
 
@


1.5
log
@- update gargoyle to 2001.1
- use new style DEPENDS

ok sthen@@ (MAINTAINER)
@
text
@d1 4
a4 15
$OpenBSD: patch-Jamrules,v 1.4 2010/10/17 22:21:55 jasper Exp $
--- Jamrules.orig	Mon Sep 27 15:05:16 2010
+++ Jamrules	Thu Oct 21 23:12:05 2010
@@@@ -6,8 +6,8 @@@@ BUILD ?= RELEASE ;
 USESDL = yes ;
 BUNDLEFONTS = yes ;
 
-CC      = gcc ;
-C++     = g++ ;
+CC      ?= gcc ;
+C++     ?= g++ ;
 
 if $(CROSS)
 {
@@@@ -89,6 +89,23 @@@@ switch $(OS)
d13 1
a13 1
+        SHELLHEADER = "#!/bin/sh" ;		
d28 1
a28 1
@@@@ -121,7 +138,7 @@@@ switch $(BUILD)
d32 1
a32 1
-        OPTIM = -O2 ;
d34 2
a36 2
     case TURBO :
         Echo "BUILD is TURBO" ;
@


1.4
log
@- unbreak after cairo update.
@
text
@d1 4
a4 4
$OpenBSD: patch-Jamrules,v 1.3 2009/08/28 01:02:21 sthen Exp $
--- Jamrules.orig	Sat Jun  6 08:17:22 2009
+++ Jamrules	Fri Jun 19 12:35:31 2009
@@@@ -7,8 +7,8 @@@@ BUILD ?= RELEASE ;
d6 1
a6 1
 # USEFMOD = yes ;
d15 3
a17 3
@@@@ -72,6 +72,23 @@@@ switch $(OS)
 	    SHRLINKLIBS += -lSDL_mixer -lSDL -lsmpeg -lvorbisfile ;
 	}
d37 1
a37 1
         Echo "OS is MACOSX (gtk+)" ;
d39 1
a39 1
@@@@ -98,7 +115,7 @@@@ switch $(BUILD)
@


1.3
log
@update Gargoyle to 20090825 (bug fixes, new features, and some
license cleanup). enable distfiles/packages for ftp; some parts
are noncommercial only so not for cdrom.
@
text
@d1 1
a1 1
$OpenBSD: patch-Jamrules,v 1.2 2009/04/05 11:58:38 sthen Exp $
d31 1
a31 1
+	    GARGLKCCFLAGS += -I$(PREFIX)/include/SDL ;
@


1.2
log
@use -L$(X11BASE)/lib for linking, fixes build on macppc (failure pointed
out by ajacoutot). bump PKGNAME (possibly gratuitously).
@
text
@d1 3
a3 3
$OpenBSD: patch-Jamrules,v 1.1.1.1 2009/02/11 13:30:44 sthen Exp $
--- Jamrules.orig	Mon Dec 22 15:19:34 2008
+++ Jamrules	Wed Jan 21 14:29:25 2009
d15 1
a15 1
@@@@ -57,6 +57,23 @@@@ switch $(OS)
d39 1
a39 1
@@@@ -83,7 +100,7 @@@@ switch $(BUILD)
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d27 1
a27 1
+        LINKLIBS = -L$(PREFIX)/lib -lz ;
@


1.1.1.1
log
@import games/gargoyle; some licenses missing and upstream didn't
reply so PERMIT_*=no for now.

Gargoyle is an IF player that supports all the major interactive
fiction formats. Most interactive fiction is distributed as portable
game files. These portable game files come in many formats. In the
past, you used to have to download a separate player (interpreter)
for each format of IF you wanted to play.

Gargoyle is based on the standard interpreters for the formats it
supports: Agility, Alan 2 and 3, Frotz (glk port), Glulxe, Hugo,
Level 9, Magnetic, Scare, Tads 2 and 3.  

Gargoyle cares about typography! In this computer age of typographical
poverty, where horrible fonts, dazzling colors, and inadequate white
space is God, Gargoyle dares to rebel!
@
text
@@
