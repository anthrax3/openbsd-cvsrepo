head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.14
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.12
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.8
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.10
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.6
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.0.12
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.10
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.8
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.6
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.08.22.20.06.50;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2010.10.23.09.15.16;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to gargoyle 2011.1

patch to disable SDL sound for now; it fails during init, "error: modified
chunk-pointer". this happens with the previous version of gargoyle too,
suspect this got broken in an update of one of the SDL ports at some
point as it used to work..
@
text
@$OpenBSD: patch-garglk_launchgtk_c,v 1.1 2010/10/23 09:15:16 jasper Exp $

Remove Linux'ism to figure out the libexec dir.

--- garglk/launchgtk.c.orig	Thu Aug 22 20:12:01 2013
+++ garglk/launchgtk.c	Thu Aug 22 20:13:27 2013
@@@@ -149,6 +149,10 @@@@ void winbrowsefile(char *buffer)
 
 void winpath(char *buffer)
 {
+#if defined(__OpenBSD__)
+    char exepath[MaxBuffer] = "${TRUEPREFIX}/libexec/gargoyle/";
+    snprintf(buffer, sizeof(exepath), "%s", exepath );
+#else
     char exepath[MaxBuffer] = {0};
     unsigned int exelen;
 
@@@@ -161,6 +165,7 @@@@ void winpath(char *buffer)
     }
 
     strcpy(buffer, exepath);
+#endif
 
     char *dirpos = strrchr(buffer, *DirSeparator);
     if ( dirpos != NULL )
@


1.1
log
@- update gargoyle to 2001.1
- use new style DEPENDS

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- garglk/launchgtk.c.orig	Fri Sep 24 12:36:30 2010
+++ garglk/launchgtk.c	Fri Oct 22 18:00:34 2010
@@@@ -146,6 +146,7 @@@@ void winbrowsefile(char *buffer)
d11 4
a14 1
+#if defined(__linux__)
d18 1
a18 1
@@@@ -157,6 +158,10 @@@@ void winpath(char *buffer)
a21 3
+#elif defined(__OpenBSD__)
+    char exepath[MaxBuffer] = "${LOCALBASE}/libexec/gargoyle/";
+    snprintf(buffer, sizeof(exepath), "%s", exepath );
@

