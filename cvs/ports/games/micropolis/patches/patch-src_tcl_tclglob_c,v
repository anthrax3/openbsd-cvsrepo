head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.04.22.15.02.55;	author espie;	state Exp;
branches;
next	;
commitid	AQNfN3vsQXkndu1t;


desc
@@


1.1
log
@fix a large number of warnings, some of them actual errors, exposed by clang
I haven't even started on the game itself...
@
text
@$OpenBSD$
--- src/tcl/tclglob.c.orig	Sat Apr 22 15:22:33 2017
+++ src/tcl/tclglob.c	Sat Apr 22 15:23:46 2017
@@@@ -364,9 +364,9 @@@@ DoGlob(interp, dir, rem)
 	if (l2 <= STATIC_SIZE) {
 	    newDir = static1;
 	} else {
-	    newDir = (char *) ckalloc((unsigned) l2);
+	    newDir = ckalloc((unsigned) l2);
 	}
-	sprintf(newDir, "%s%s%.*s", dir, separator, p-rem, rem);
+	sprintf(newDir, "%s%s%.*s", dir, separator, (int)(p-rem), rem);
 	result = DoGlob(interp, newDir, p+1);
 	if (newDir != static1) {
 	    ckfree(newDir);
@
