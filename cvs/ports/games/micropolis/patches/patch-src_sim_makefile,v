head	1.4;
access;
symbols
	OPENBSD_6_1:1.3.0.38
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.36
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.32
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.34
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.30
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.28
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.26
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.24
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.22
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.20
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.18
	OPENBSD_5_0:1.3.0.16
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.14
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.12
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	deanna_20080117:1.1.1.1
	deanna:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2017.05.09.13.01.42;	author espie;	state Exp;
branches;
next	1.3;
commitid	FofH9KkwRtpIk4FP;

1.3
date	2008.02.19.13.25.18;	author deanna;	state Exp;
branches;
next	1.2;

1.2
date	2008.01.27.16.34.32;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2008.01.18.03.36.32;	author deanna;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.01.18.03.36.32;	author deanna;	state Exp;
branches;
next	;


desc
@@


1.4
log
@use modern idioms for subst, pass X11BASE on the command line.
regen all patches for newer headers.
@
text
@$OpenBSD: patch-src_sim_makefile,v 1.3 2008/02/19 13:25:18 deanna Exp $
Index: src/sim/makefile
--- src/sim/makefile.orig
+++ src/sim/makefile
@@@@ -1,4 +1,3 @@@@
-XINCLUDE = /usr/include/X11
 TCLHOME = ../tcl
 TKHOME = ../tk
 TCLXHOME = ../tclx
@@@@ -8,15 +7,13 @@@@ TKLIBRARY = /usr/local/lib/tk
 SDLINCLUDE = $$(/bin/sh ./sdl_helper cflags)
 SDLLIBS = $$(/bin/sh ./sdl_helper libs)
 
-CC = gcc
-
 OPTFLAGS = -O3
 #OPTFLAGS = -g
 
 #DEFINES = -DIS_LINUX -DCAM -DNET
-DEFINES = -DIS_LINUX -DNO_AIRCRASH
+DEFINES = -DIS_LINUX 
 
-CFLAGS += $(OPTFLAGS) $(DEFINES)
+CFLAGS += $(DEFINES)
 
 #LDFLAGS = -Bstatic
 LDFLAGS=-L/usr/X11/lib -L/usr/X11R6/lib
@


1.3
log
@Update to a new snapshot.  Features SDL sound, pre-made cities and
lots of build system improvements.

ok espie
@
text
@d1 4
a4 3
$OpenBSD$
--- src/sim/makefile.orig	Mon Feb 11 23:14:17 2008
+++ src/sim/makefile	Mon Feb 11 23:14:33 2008
@


1.2
log
@- Build from a recent snapshot of the repository at git.zerfleddert.de
  instead of the tarball from laptop.org.  Lets us get rid of many
  patches.

- Enable shared memory (run without -w) since kurt@@'s patch has fixed
  it.

This gives us many bugfixes and goodies such as a fix for the numlock
freeze bug and re-enabling the air crash disaster.  Full changelog at

http://git.zerfleddert.de/cgi-bin/gitweb.cgi/micropolis
@
text
@d2 3
a4 3
--- src/sim/makefile.orig	Sat Jan 26 18:23:50 2008
+++ src/sim/makefile	Sat Jan 26 18:27:08 2008
@@@@ -1,28 +1,26 @@@@
a5 2
+XINCLUDE = %%X11BASE%%/include
+XLIBS = %%X11BASE%%/lib
d9 3
a11 2
 TCLLIBRARY = /usr/local/lib/tcl
 TKLIBRARY = /usr/local/lib/tk
d22 1
a22 1
-CFLAGS = $(OPTFLAGS) $(DEFINES)
d26 1
a26 19
-LDFLAGS=-L/usr/X11/lib -L/usr/X11R6/lib
+LDFLAGS += -L$(XLIBS)
 
 INSTALL = install -s
 
 INCLUDES = \
 	-Iheaders \
-	-I$(XPMHOME) \
 	-I$(XINCLUDE) \
 	-I$(TCLHOME) \
 	-I$(TCLXHOME)/src \
@@@@ -32,6 +30,7 @@@@ CPPFLAGS = $(INCLUDES)
 
 LIBS =	$(TCLXHOME)/libtk.a \
 	$(TCLXHOME)/libtcl.a \
+	-L$(XLIBS) \
 	-lm \
         -lX11 \
         -lXext \
@


1.1
log
@Initial revision
@
text
@d2 3
a4 3
--- src/sim/makefile.orig	Fri Nov 30 21:49:55 2007
+++ src/sim/makefile	Sun Jan 13 11:20:13 2008
@@@@ -1,28 +1,24 @@@@
d19 4
a22 3
 #DEFINES = -DIS_LINUX -DIS_INTEL -DCAM -DNET
 DEFINES = -DIS_LINUX -DIS_INTEL
-
d24 2
a25 2
-
+CFLAGS+= $(DEFINES)
d27 2
d33 1
a33 1
-	-Iheaders \
a35 1
+	-Iheaders \
d38 1
a38 2
 	-I$(TKHOME)
@@@@ -31,6 +27,7 @@@@ CPPFLAGS = $(INCLUDES)
a45 9
@@@@ -97,7 +94,7 @@@@ lint:
 	alint $(INCLUDES) $(SRCS) > LINT
 
 sim: $(ALLOBJS)
-	$(CC) $(CFLAGS) $(LDFLAGS) $(INCLUDES) $(ALLOBJS) $(LIBS) -o sim
+	$(CC) ${DEFINES} $(CFLAGS) $(LDFLAGS) $(INCLUDES) $(ALLOBJS) $(LIBS) -o sim
 
 clean:
 	rm -f $(OBJS) \
@


1.1.1.1
log
@Import micropolis

Micropolis, Unix Version, (A.K.A. "S*mC*ty"). This game was released
for the Unix platform in or about 1990 and has been modified for
inclusion in the One Laptop Per Child program. Copyright (C) 1989 -
2007 Electronic Arts Inc.

This port is based on patches written by Michael Gernoth, located at
http://git.zerfleddert.de/cgi-bin/gitweb.cgi/micropolis

Help from kurt@@ and ian@@, tested by lots of people, thanks!

ok ian@@, espie@@

@
text
@@
