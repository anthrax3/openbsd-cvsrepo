head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.04.22.15.02.55;	author espie;	state Exp;
branches;
next	;
commitid	AQNfN3vsQXkndu1t;


desc
@@


1.1
log
@fix a large number of warnings, some of them actual errors, exposed by clang
I haven't even started on the game itself...
@
text
@$OpenBSD$
--- src/tk/tkoption.c.orig	Sat Apr 22 16:04:02 2017
+++ src/tk/tkoption.c	Sat Apr 22 16:04:36 2017
@@@@ -21,6 +21,7 @@@@ static char rcsid[] = "$Header: /user6/ouster/wish/RCS
 
 #include "tkconfig.h"
 #include "tkint.h"
+#include <unistd.h>
 
 /*
  * The option database is stored as one tree for each main window.
@@@@ -872,7 +873,7 @@@@ ReadOptionFile(interp, tkwin, fileName, priority)
 #ifdef MSDOS
     if (read(fileId, buffer, (int) statBuf.st_size) < 0) {
 #else
-    if (read(fileId, buffer, (int) statBuf.st_size) != statBuf.st_size) {
+    if (read(fileId, buffer, statBuf.st_size) != statBuf.st_size) {
 #endif
 	Tcl_AppendResult(interp, "error reading file \"", fileName, "\"",
 		(char *) NULL);
@
