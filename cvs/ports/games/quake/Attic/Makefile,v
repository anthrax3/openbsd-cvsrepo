head	1.47;
access;
symbols
	OPENBSD_5_9:1.44.0.2
	OPENBSD_5_9_BASE:1.44
	OPENBSD_5_8:1.42.0.4
	OPENBSD_5_8_BASE:1.42
	OPENBSD_5_7:1.41.0.8
	OPENBSD_5_7_BASE:1.41
	OPENBSD_5_6:1.41.0.6
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.41.0.4
	OPENBSD_5_5_BASE:1.41
	OPENBSD_5_4:1.41.0.2
	OPENBSD_5_4_BASE:1.41
	OPENBSD_5_3:1.39.0.6
	OPENBSD_5_3_BASE:1.39
	OPENBSD_5_2:1.39.0.4
	OPENBSD_5_2_BASE:1.39
	OPENBSD_5_1_BASE:1.39
	OPENBSD_5_1:1.39.0.2
	OPENBSD_5_0:1.35.0.2
	OPENBSD_5_0_BASE:1.35
	OPENBSD_4_9:1.31.0.2
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.29.0.2
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.24.0.2
	OPENBSD_4_7_BASE:1.24
	OPENBSD_4_6:1.21.0.4
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.2
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.20.0.2
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.16.0.4
	OPENBSD_4_2_BASE:1.16
	OPENBSD_4_1:1.16.0.2
	OPENBSD_4_1_BASE:1.16
	OPENBSD_4_0:1.12.0.4
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.12.0.2
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.11.0.4
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.11.0.2
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.9.0.4
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.2
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.7.0.4
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.5.0.4
	OPENBSD_3_2_BASE:1.5
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.4
	Nonnekes:1.1.1.1
	quake:1.1.1;
locks; strict;
comment	@# @;


1.47
date	2016.04.15.15.42.07;	author awolk;	state dead;
branches;
next	1.46;
commitid	k6HLhGvtw0JJqMlI;

1.46
date	2016.04.09.14.50.59;	author sthen;	state Exp;
branches;
next	1.45;
commitid	Eoz6esMqTz2ITNMP;

1.45
date	2016.04.04.16.09.09;	author naddy;	state Exp;
branches;
next	1.44;
commitid	u3lQjrjlcAL26lGp;

1.44
date	2015.10.30.12.47.39;	author sthen;	state Exp;
branches;
next	1.43;
commitid	IIzCiS5xiW9Dmxlk;

1.43
date	2015.08.24.10.01.10;	author sthen;	state Exp;
branches;
next	1.42;
commitid	2huNwQ3eew4irBXJ;

1.42
date	2015.05.22.11.31.14;	author ajacoutot;	state Exp;
branches;
next	1.41;
commitid	2khjHXfpTaOuNVcx;

1.41
date	2013.03.21.08.45.17;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2013.03.11.11.07.40;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2011.12.21.13.23.44;	author jasper;	state Exp;
branches;
next	1.38;

1.38
date	2011.12.13.12.58.04;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2011.12.13.12.51.17;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2011.11.14.13.43.45;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2011.07.11.16.33.06;	author jasper;	state Exp;
branches;
next	1.34;

1.34
date	2011.06.10.19.49.11;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2011.06.07.06.46.26;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2011.05.22.17.20.58;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.16.11.23.27;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.08.15.54.54;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.07.11.00.15.42;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2010.05.02.13.35.48;	author ratchov;	state Exp;
branches;
next	1.27;

1.27
date	2010.04.15.14.11.01;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2010.04.15.07.11.54;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2010.03.20.16.59.14;	author jasper;	state Exp;
branches;
next	1.24;

1.24
date	2010.02.26.18.08.51;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2010.01.07.21.54.29;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2009.08.10.06.31.42;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2009.02.14.10.39.38;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2008.05.07.17.34.33;	author simon;	state Exp;
branches;
next	1.19;

1.19
date	2008.01.11.16.48.44;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2008.01.04.17.48.35;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2007.09.15.18.01.02;	author simon;	state Exp;
branches;
next	1.16;

1.16
date	2006.11.25.19.50.07;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.24.07.21.27;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2006.11.21.11.03.35;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2006.10.10.08.34.22;	author bernd;	state Exp;
branches;
next	1.12;

1.12
date	2005.09.10.18.07.43;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2005.01.21.13.26.32;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2004.11.28.22.41.20;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2004.02.18.20.05.12;	author xsa;	state Exp;
branches;
next	1.8;

1.8
date	2004.01.27.21.37.06;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2003.02.15.17.25.15;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2002.12.29.15.10.08;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	2001.12.28.22.11.58;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2001.08.10.02.53.55;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2001.08.09.22.29.21;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.08.04.00.37.12;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.03.13.02.16;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.08.03.13.02.16;	author espie;	state Exp;
branches;
next	;


desc
@@


1.47
log
@Remove the games/quake port

The port was superseded by games/quakespasm

OK abieber@@
@
text
@# $OpenBSD: Makefile,v 1.46 2016/04/09 14:50:59 sthen Exp $

COMMENT-main =		Quake/QuakeWorld client
COMMENT-libs =		Quake common libs
COMMENT-server =	QuakeWorld server

# .so.1.0
SOMAJOR =		0
SOMINOR =		0
V =			0.6.0
DISTNAME =		quakeforge-$V
PKGNAME-main =		quake-$V
PKGNAME-libs =		quake-libs-$V
FULLPKGNAME-server =	quakeworld-server-$V
FULLPKGPATH-server =	games/quake,-server
EPOCH-main =		0
EPOCH-libs =		0
EPOCH-server =		1
REVISION-libs =		3
REVISION-main =		2
REVISION-server =	1

MULTI_PACKAGES =	-main -libs -server

SHARED_LIBS +=		QFcd		${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFconsole	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFgamecode	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFgib		${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFimage		${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFjs		${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFmodels	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFmodels_gl	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFmodels_sw	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFrenderer_gl	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFrenderer_sw32	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFruamoko	${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFsound		${SOMAJOR}.${SOMINOR}
SHARED_LIBS +=		QFutil		${SOMAJOR}.${SOMINOR}

CATEGORIES =		games x11

HOMEPAGE =		http://www.quakeforge.net/

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB-main += QFcd QFconsole QFgamecode QFgib QFimage QFjs QFmodels
WANTLIB-main += QFmodels_gl QFmodels_sw QFrenderer_gl QFrenderer_sw32
WANTLIB-main += QFruamoko QFsound QFutil SDL X11 Xext Xxf86dga Xxf86vm
WANTLIB-main += c crypto idn m ncurses nghttp2 png pthread sndio ssl usbhid
WANTLIB-main += xcb z curl ${MODGETTEXT_WANTLIB}

WANTLIB-libs += FLAC SDL m ncurses ogg png samplerate sndio usbhid
WANTLIB-libs += vorbis vorbisfile z iconv pthread

WANTLIB-server += QFconsole QFgamecode QFgib QFimage QFmodels QFruamoko
WANTLIB-server += QFutil c m ncurses png pthread z

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=quake/}
EXTRACT_SUFX =		.tar.bz2

MODULES =		devel/gettext
BUILD_DEPENDS =		devel/bison
LIB_DEPENDS-server =	${FULLPKGNAME-libs}:${BUILD_PKGPATH},-libs
LIB_DEPENDS-main =	${FULLPKGNAME-libs}:${BUILD_PKGPATH},-libs \
			audio/flac \
			devel/libidn \
			devel/sdl \
			graphics/png \
			net/curl 
LIB_DEPENDS-libs =	audio/flac \
			audio/libsamplerate \
			audio/libvorbis \
			devel/sdl \
			graphics/png

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS +=	--with-clients=glx,sdl,sdl32,sgl,x11 \
			--with-gl-driver=libGL.so \
			--with-cd-default=SDL \
			--with-sharepath=${PREFIX}/share/quakeforge \
			--enable-version-info=${SOMAJOR}:${SOMINOR} \
			--disable-asmopt \
			--disable-oss \
			--disable-sun \
			--disable-jack
YACC =			bison

NO_TEST =		Yes

.include <bsd.port.mk>
@


1.46
log
@drop Antti Harri as maintainer, as per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/04/04 16:09:09 naddy Exp $
@


1.45
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/10/30 12:47:39 sthen Exp $
d19 3
a21 3
REVISION-libs =		2
REVISION-main =		1
REVISION-server =	0
a42 2

MAINTAINER =		Antti Harri <iku@@openbsd.fi>
@


1.44
log
@sync WANTLIB (curl+nghttp2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/08/24 10:01:10 sthen Exp $
d19 1
a19 1
REVISION-libs =		1
@


1.43
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/05/22 11:31:14 ajacoutot Exp $
d20 1
a20 1
REVISION-main =		0
d52 1
a52 1
WANTLIB-main += c crypto idn m ncurses png pthread sndio ssl usbhid
@


1.42
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/03/21 08:45:17 ajacoutot Exp $
d19 1
a19 1
REVISION-libs =		0
d56 1
a56 1
WANTLIB-libs += vorbis vorbisfile z iconv
@


1.41
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/03/11 11:07:40 espie Exp $
d19 3
@


1.40
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/12/21 13:23:44 jasper Exp $
a75 1
USE_LIBTOOL =		Yes
@


1.39
log
@- update to 0.6.0

from antti harri (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/12/13 12:58:04 jasper Exp $
a44 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d89 1
a89 1
NO_REGRESS =		Yes
@


1.38
log
@slightly tweak previous
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/12/13 12:51:17 jasper Exp $
d10 1
a10 1
V =			0.5.99beta2
a15 1
REVISION-main = 	0
@


1.37
log
@- enable on sparc64
- use official distfile and set EPOCH
- sort WANTLIB and depends a little
- builds now with bsd make
- switch to ipv4 networking, leave ipv6 disabled -> ipv4 works out of the box
- remove asm optimization bits, got it to build but it crashes the client
- mention upstream's nice docs
- some fixes that went straight to upstream

Quake has some audio bugs that cause stuttering. If you experience any
stuttering you should try without sndiod or make sndiod block size larger (-b).
Note that the bigger the sndiod block size is, the bigger the latency becomes
between video and audio.

from Antti Harri (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/11/14 13:43:45 sthen Exp $
d16 1
d54 1
a54 1
WANTLIB-main += xcb z iconv intl curl
@


1.36
log
@BROKEN on sparc64, qfcc tool built as part of the build and then used to
work on other files segfaults.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.35 2011/07/11 16:33:06 jasper Exp $

BROKEN-sparc64 =	segv during build
d10 1
a10 1
V =			20110710
d16 3
a18 1
EPOCH-server =		0
d49 11
a59 9
WANTLIB-main =		c m ncurses z X11 Xau Xdmcp Xext Xxf86dga Xxf86vm crypto \
			iconv pthread pthread-stubs ssl usbhid xcb \
			SDL curl idn intl png QFcd QFconsole QFgamecode QFgib \
			QFjs QFimage QFmodels_gl QFmodels_sw QFrenderer_gl \
			QFrenderer_sw32 QFruamoko QFsound QFutil sndio
WANTLIB-libs =		m ncurses usbhid z iconv SDL png ogg \
			vorbis vorbisfile samplerate sndio
WANTLIB-server =	c m ncurses z QFconsole QFgamecode QFgib QFmodels QFruamoko QFutil \
			QFimage png pthread
d61 2
a62 1
MASTER_SITES =		http://openbsd.fi/dist/
d68 1
a70 4
			net/curl \
			graphics/png \
			audio/flac
LIB_DEPENDS-libs =	devel/sdl \
d72 3
a74 1
			audio/flac \
d76 2
a77 3
			audio/libsamplerate

USE_GMAKE =		Yes
a81 1
			--with-ipv6 \
d86 1
d90 1
a90 9
CONFIGURE_ENV =		LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib' \
			CPPFLAGS='-I${LOCALBASE}/include -I${X11BASE}/include' \
			YACC="bison -y"
# Quakeforge should automatically detect support for assembler
# optimizations on i386, however it's currently not linking
# correctly so disable until a fix exists.
.if ${MACHINE_ARCH:Mi386}
CONFIGURE_ARGS +=	--disable-asmopt
.endif
a92 2

CFLAGS +=		-pthread
@


1.35
log
@- Update to 20110710
- Working sound via SDL
- Binaries renamed in upstream (see pkg_info -L)
- Data directory handled better (see DESCR)
- Common -libs package for -main and -server
- GGI renderer got removed, renderers now available:
 glx, sdl, sdl32 (32b bit depth) and sgl (SDL OpenGL) and x11
- All binaries can be compiled at once now
- All patches in upstream

from antti harri (MAINTAINER)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.34 2011/06/10 19:49:11 naddy Exp $
@


1.34
log
@bump -server EPOCH to deal with old versioning screwup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/06/07 06:46:26 jasper Exp $
d3 37
a39 18
COMMENT-main=		Quake/Quake-world client
COMMENT-server=		Quake world server
CATEGORIES=		games

FULLPKGNAME-server=	quakeworld-server-20000101
FULLPKGPATH-server=	games/quake,-server
EPOCH-server=		0

PKGNAME-main=		quake-20000101
REVISION-main=		10

DISTNAME=		quake-v6-bsd-kame
PATCHFILES=		quake6-00-v6-20000202b.diff.gz:0
PATCH_DIST_STRIP=	-p1

HOMEPAGE=		http://www.viagenie.qc.ca/en/ipv6-quake.shtml
MASTER_SITES=		${MASTER_SITE_BACKUP}
MASTER_SITES0=		ftp://ftp.kame.net/pub/kame/misc/
d42 53
a94 45
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

WANTLIB=		c m

USE_GMAKE=		Yes

MULTI_PACKAGES=		-main -server
FLAVORS=		sdl ggi x11 gl
FLAVOR?=		sdl

CONFIGURE_ENV=LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib'
CONFIGURE_ENV+=CPPFLAGS='-I${LOCALBASE}/include -I${X11BASE}/include'
CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS =	--bindir=/bin \
			--with-opengl=no --with-opengl-includes=no

WANTLIB-main=		${WANTLIB} sndio
.if ${FLAVOR:L} == sdl
WANTLIB+=		pthread
LIB_DEPENDS-main=	devel/sdl
WANTLIB-main +=		SDL
CONFIGURE_ARGS+=	--with-sdl=${LOCALBASE} --without-ggi
MAKE_FLAGS=		HAS_X11=no
CFLAGS+=		-pthread
.elif ${FLAVOR:L} == ggi
WANTLIB+=		pthread
LIB_DEPENDS-main=	graphics/ggi
WANTLIB-main +=		ggi
CONFIGURE_ARGS+=	--with-ggi=${LOCALBASE} --without-sdl
MAKE_FLAGS=		HAS_X11=no
CFLAGS+=		-pthread
.elif ${FLAVOR:L} == x11
CONFIGURE_ARGS+=	--without-sdl --without-ggi
MAKE_FLAGS=	
WANTLIB-main=		X11 Xext c m sndio
.elif ${FLAVOR:L} == gl
CONFIGURE_ARGS+=	--with-opengl=yes \
			--with-opengl-includes=${X11BASE}/include \
			--without-ggi
WANTLIB-main+=		GL X11 Xext pthread
.else
ERRORS+=		choose either sdl, ggi, gl or x11
d97 1
a97 9
WRKDIST=	${WRKDIR}/quakeforge

post-extract:
	@@rm ${WRKDIST}/{config.cache,config.log}
	@@find ${WRKDIST} -name \*.o |xargs rm
	@@cp ${FILESDIR}/snd_sndio.c ${WRKDIST}/common

post-patch:
	cd ${WRKDIST}; PATH=${PORTPATH} AUTOCONF_VERSION="${AUTOCONF_VERSION}" autoreconf
d99 1
a99 2
post-install:
	@@chown -R ${BINOWN}:${BINGRP} ${PREFIX}/bin/*
@


1.33
log
@missed bump it seems
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/05/22 17:20:58 jasper Exp $
d9 1
a9 1
REVISION-server=	8
@


1.32
log
@- Add GPL version
- Remove extraneous compiler flags that override CFLAGS
  from ports (by disabling --enable-release)
  - Fix X11 WANTLIB
  - Fix GL build when GGI libs are installed

from antti harri
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/16 11:23:27 espie Exp $
d9 1
a9 1
REVISION-server=	7
@


1.31
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/08 15:54:54 espie Exp $
d12 1
a12 1
REVISION-main=		9
d22 1
a22 1
# GPL
d39 1
a39 2
CONFIGURE_ARGS=		--enable-release
CONFIGURE_ARGS+=	--bindir=/bin \
d60 1
a60 1
WANTLIB-main=		X11 Xext c m pthread-stubs sndio xcb
d62 3
a64 1
CONFIGURE_ARGS+=	--with-opengl=yes --with-opengl-includes=${X11BASE}/include
@


1.30
log
@a few more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/07/11 00:15:42 naddy Exp $
d46 1
a46 1
LIB_DEPENDS-main=	::devel/sdl
d53 1
a53 1
LIB_DEPENDS-main=	::graphics/ggi
@


1.29
log
@fix package revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/05/02 13:35:48 ratchov Exp $
d46 2
a47 1
LIB_DEPENDS-main=	SDL::devel/sdl
d53 2
a54 1
LIB_DEPENDS-main=	ggi::graphics/ggi
@


1.28
log
@replace sun audio backend by a sndio backend. Diff from jakemsr with
tweaks from me.

ok jakemsr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/04/15 14:11:01 ajacoutot Exp $
d7 1
a7 1
FULLPKGNAME-server=	quakeworld-server-20000101p6p0
d9 5
a13 1
PKGNAME-main=		quake-20000101p9
@


1.27
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.

sthen@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/04/15 07:11:54 jasper Exp $
d9 1
a9 1
PKGNAME-main=		quake-20000101p8
d39 1
d55 1
a55 1
WANTLIB-main=		X11 Xext c m pthread-stubs xcb
d58 1
a58 1
WANTLIB+=		GL X11 Xext pthread
d68 1
a68 1
	@@cp ${FILESDIR}/snd_openbsd.c ${WRKDIST}/common
@


1.26
log
@- use ERRORS here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/03/20 16:59:14 jasper Exp $
d7 1
a7 1
FULLPKGNAME-server=	quakeworld-server-20000101p6
@


1.25
log
@- tweak DESCR, from daniel dickman

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/02/26 18:08:51 espie Exp $
d59 1
a59 1
BROKEN=			choose either sdl, ggi, gl or x11
@


1.24
log
@fix broken FULLPKGPATH
(ports is locked !)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/01/07 21:54:29 jasper Exp $
d7 1
a7 1
FULLPKGNAME-server=	quakeworld-server-20000101p5
d9 1
a9 1
PKGNAME-main=		quake-20000101p7
@


1.23
log
@- add a gl flavor
* seems to have issues still on amd64 though.

based on a diff by oga@@, tweaked by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/08/10 06:31:42 kili Exp $
d7 2
a8 1
FULLPKGNAME-server=	quakeworld-server-20000101p4
@


1.22
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/02/14 10:39:38 jasper Exp $
d7 2
a8 2
FULLPKGNAME-server=	quakeworld-server-20000101p3
PKGNAME-main=		quake-20000101p6
d28 1
a28 1
FLAVORS=		sdl ggi x11
d35 2
a36 3
CONFIGURE_ARGS+=	--bindir=/bin
CONFIGURE_ARGS+=	--with-opengl=no --with-opengl-includes=no

d54 3
d58 1
a58 1
BROKEN=			choose either sdl, ggi or x11
@


1.21
log
@- fix potential 64-bit issues
- clean post-extract a bit
- regen PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/05/07 17:34:33 simon Exp $
d8 1
a8 1
PKGNAME-main=		quake-20000101p5
d54 1
a54 1
WANTLIB-main=		c m X11 Xext
@


1.20
log
@make the flavor conditions easier to read

from a diff by Antti Harri

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/01/11 16:48:44 ajacoutot Exp $
d7 2
a8 2
FULLPKGNAME-server=	quakeworld-server-20000101p2
PKGNAME-main=		quake-20000101p4
d62 3
a64 3
	cd ${WRKDIST}; rm config.cache config.log
	cd ${WRKDIST}; find . -name \*.o |xargs rm
	cp ${FILESDIR}/snd_openbsd.c ${WRKDIST}/common
@


1.19
log
@- remove broken MASTER_SITES
- make sure only one FLAVOR is selected to avoid packaging error
- fix WANTLIB
- regen patches while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/01/04 17:48:35 espie Exp $
a37 1
BRKFLAVORMSG=		choose either sdl, ggi or x11
d39 1
a39 4
.if ${FLAVOR:L:Msdl}
.if ${FLAVOR:L:Mggi} || ${FLAVOR:L:Mx11}
BROKEN=			${BRKFLAVORMSG}
.endif
d45 1
a45 4
.elif ${FLAVOR:L:Mggi}
.if ${FLAVOR:L:Msdl} || ${FLAVOR:L:Mx11}
BROKEN=			${BRKFLAVORMSG}
.endif
d51 1
a51 4
.elif ${FLAVOR:L:Mx11}
.if ${FLAVOR:L:Mggi} || ${FLAVOR:L:Msdl}
BROKEN=			${BRKFLAVORMSG}
.endif
d56 1
a56 1
ERRORS="Need some non empty flavor"
@


1.18
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/09/15 18:01:02 simon Exp $
d7 2
a8 2
FULLPKGNAME-server=	quakeworld-server-20000101p1
PKGNAME-main=		quake-20000101p3
d14 1
a14 1
MASTER_SITES=		http://www.viagenie.qc.ca/quake/
d22 2
a23 1
WANTLIB=		c m pthread
d38 2
d41 4
d50 4
d59 3
@


1.17
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/11/25 19:50:07 espie Exp $
a55 1
FAKE_FLAGS=	${MAKE_FLAGS}	DESTDIR=${WRKINST}
@


1.16
log
@fix @@pkgpath using new possibilities
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/11/24 07:21:27 steven Exp $
d3 2
a4 2
COMMENT-main=		"Quake/Quake-world client"
COMMENT-server=		"Quake world server"
@


1.15
log
@add forgotten @@pkgpath annotations
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/11/21 11:03:35 espie Exp $
d8 1
a8 1
PKGNAME-main=		quake-20000101p2
@


1.14
log
@switch to new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/10/10 08:34:22 bernd Exp $
d8 1
a8 1
PKGNAME-main=		quake-20000101p1
@


1.13
log
@Fix binfiles ownership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/09/10 18:07:43 espie Exp $
d3 1
a3 1
COMMENT=		"Quake/Quake-world client"
d8 1
a8 1
PKGNAME=		quake-20000101p0
d22 1
a22 1
WANTLIB=		c m
d26 2
a27 2
MULTI_PACKAGES=-server
FLAVORS=		sdl ggi
a29 6
.if ${FLAVOR:L:Msdl} && ${FLAVOR:L:Mggi}
ERRORS="Fatal: Choose only one flavor: sdl or ggi"
.endif

SUBPACKAGE?=

d38 1
a38 4
.  if !defined(PACKAGING) || ${SUBPACKAGE} == ""
LIB_DEPENDS=		SDL::devel/sdl
WANTLIB+=		pthread
.  endif
d43 1
a43 4
.  if !defined(PACKAGING) || ${SUBPACKAGE} == ""
LIB_DEPENDS=		ggi.::graphics/ggi
WANTLIB+=		pthread
.  endif
d47 1
a47 1
.else
d50 3
a52 4
WANTLIB+=		X11 Xext
.endif
.if defined(PACKAGING) && ${SUBPACKAGE} == "-server"
WANTLIB+=		pthread
d55 1
a55 1
WRKDIST=		${WRKDIR}/quakeforge
@


1.12
log
@missing WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/01/21 13:26:32 naddy Exp $
d7 2
a8 2
FULLPKGNAME-server=	quakeworld-server-20000101p0
PKGNAME=		quake-20000101
d78 3
@


1.11
log
@libggi requires -pthread, too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/11/28 22:41:20 espie Exp $
d7 1
a7 1
FULLPKGNAME-server=	quakeworld-server-20000101
d63 3
@


1.10
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/02/18 20:05:12 xsa Exp $
d49 1
a49 1
MAKE_FLAGS=	HAS_X11=no
d57 2
a58 1
MAKE_FLAGS=	HAS_X11=no
@


1.9
log
@
remove MAINTAINER per his resquest;
via and ok ish@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/01/27 21:37:06 sturm Exp $
d22 1
d46 1
d54 1
d61 1
@


1.8
log
@fix PATH in post-patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/02/15 17:25:15 naddy Exp $
a15 2

MAINTAINER=		Maurice Nonnekes <maurice@@amaze.nl>
@


1.7
log
@pass on autoconf version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/12/29 15:10:08 fgsch Exp $
d71 1
a71 1
	cd ${WRKDIST}; AUTOCONF_VERSION="${AUTOCONF_VERSION}" autoreconf
@


1.6
log
@more NEED_VERSION removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/12/28 22:11:58 pvalchev Exp $
d71 1
a71 1
	cd ${WRKDIST}; autoreconf
@


1.5
log
@change SDL dependency entries to simply match latest in-tree version, any flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/08/10 02:53:55 pvalchev Exp $
a5 1
NEED_VERSION=		1.405
@


1.4
log
@Fix a typo: ERROR -> ERRORS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/08/09 22:29:21 naddy Exp $
d47 1
a47 1
LIB_DEPENDS=		SDL.0.3:sdl-*-!no_x11:devel/sdl
@


1.3
log
@fix ggi dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/08/04 00:37:12 naddy Exp $
d33 1
a33 1
ERROR="Fatal: Choose only one flavor: sdl or ggi"
@


1.2
log
@MASTER_SITES{,0}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/08/03 13:02:16 espie Exp $
d54 1
a54 1
LIB_DEPENDS=		ggi.::devel/ggi
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d11 1
a11 1
PATCHFILES=		quake6-00-v6-20000202b.diff.gz
d15 2
a16 2
MASTER_SITES=		http://www.viagenie.qc.ca/quake/  \
			ftp://ftp.kame.net/pub/kame/misc/
@


1.1.1.1
log
@Quake. Needs you to have datafiles to be useful.

Original by Maurices Nonnekes, a few tweaks (sound, i386 optimizations,
longer save menus) by me.

The client/server part probably still needs some work... 
and it is definitely unaudited.

Packaging might be changed to account for docs...

In fact, I really need `common' package files and reference counting...
@
text
@@
