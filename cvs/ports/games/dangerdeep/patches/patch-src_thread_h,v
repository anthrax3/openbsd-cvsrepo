head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.04.30.08.56.45;	author espie;	state Exp;
branches;
next	;
commitid	fXCmguvQ3rIBrrRl;


desc
@@


1.1
log
@wrap dangerdeep's mutex into its own namespace so that it doesn't conflict
with std::mutex on modern compilers.
Fixes the build with clang, and still builds with gcc
@
text
@$OpenBSD$
--- src/thread.h.orig
+++ src/thread.h
@@@@ -25,6 +25,7 @@@@
 
 #include "condvar.h"
 #include <stdexcept>
+#include <string>
 
 #if defined  WIN32 && defined _MSC_VER
 	// win32 lacks stdint.h (thankfully SDL provides...)
@@@@ -53,7 +54,7 @@@@ class thread
 	struct SDL_Thread* thread_id;
 	bool thread_abort_request;
 	thread_state_t thread_state;
-	mutex thread_state_mutex;
+	dd::mutex thread_state_mutex;
 	condvar thread_start_cond;
 	std::string thread_error_message; // to pass exception texts via thread boundaries
 	const char* myname;
@
