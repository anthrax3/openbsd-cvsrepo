head	1.25;
access;
symbols
	OPENBSD_6_0:1.25.0.2
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.22.0.4
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.21.0.4
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.2
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.20.0.2
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.14.0.4
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.4
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.7.0.4
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	jameswright_20090602:1.1.1.1
	not_for_hackathon_use_slacking_ist_verboten:1.1.1;
locks; strict;
comment	@# @;


1.25
date	2016.05.18.10.11.48;	author naddy;	state Exp;
branches;
next	1.24;
commitid	PMbeBK6Rev2AJ2O5;

1.24
date	2016.03.20.16.36.34;	author naddy;	state Exp;
branches;
next	1.23;
commitid	QNVHEfO6FpaH0tra;

1.23
date	2015.08.17.19.10.12;	author sthen;	state Exp;
branches;
next	1.22;
commitid	4CippZtWcqcVBaoK;

1.22
date	2015.07.16.23.57.24;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	tdKVYJOlplb8bzTQ;

1.21
date	2014.06.14.10.34.44;	author sthen;	state Exp;
branches;
next	1.20;
commitid	HiKZ10xJk2o55vyF;

1.20
date	2013.08.09.19.04.49;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.25.23.43.40;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.07.39;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2012.09.07.08.12.50;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2012.09.02.20.52.35;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.16.09.48.10;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.16.11.23.26;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.08.23.12.31;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.08.15.54.53;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.18.18.00.18;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.09.24.15.29.22;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.11.07.12.21.04;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.08.20.21.20.13;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.08.16.12.29.21;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.08.10.06.31.42;	author kili;	state Exp;
branches;
next	1.3;

1.3
date	2009.06.18.12.54.28;	author martynas;	state Exp;
branches;
next	1.2;

1.2
date	2009.06.06.03.23.21;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.02.22.07.24;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.02.22.07.24;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.25
log
@replace gettext module; ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.24 2016/03/20 16:36:34 naddy Exp $

COMMENT-main =		bubble popping game, like puzzle bobble
COMMENT-server =	server for the frozen-bubble bubble popping game

VER =			2.2.0
DISTNAME =		frozen-bubble-${VER}
PKGNAME-main =		${DISTNAME}
REVISION-main =		12
PKGNAME-server =	frozen-bubble-server-${VER}
REVISION-server =	8
CATEGORIES =		games

HOMEPAGE =		http://www.frozen-bubble.org
MAINTAINER =		James Wright <jamesw@@bsdhosting.co.za>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		${HOMEPAGE}/data/
EXTRACT_SUFX =		.tar.bz2

USE_GMAKE =		Yes

# No regress tests here
NO_TEST =		Yes

MODULES =		perl

BUILD_DEPENDS =		devel/p5-SDL \
			devel/p5-Locale-gettext \
			devel/gettext-tools

RUN_DEPENDS-main =	devel/p5-SDL \
			devel/p5-Locale-gettext \
			${BASE_PKGPATH},-server

LIB_DEPENDS-main =	devel/gettext \
			devel/sdl-pango \
			devel/sdl-mixer \
			devel/glib2

LIB_DEPENDS-server =	devel/gettext \
			devel/glib2

WANTLIB-main =		SDL SDL_Pango SDL_mixer glib-2.0 gobject-2.0 \
			intl m pango-1.0 pthread
WANTLIB-server =	c glib-2.0 intl pthread

MULTI_PACKAGES =	-main -server

.include <bsd.port.mk>
@


1.24
log
@remove SHARED_ONLY from non-CPAN Perl ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/08/17 19:10:12 sthen Exp $
d9 1
a9 1
REVISION-main =		11
d11 1
a11 1
REVISION-server =	7
d28 1
a28 2
MODULES =		perl \
			devel/gettext
d31 2
a32 1
			devel/p5-Locale-gettext
d38 1
a38 1
LIB_DEPENDS-main =	${MODGETTEXT_LIB_DEPENDS} \
d43 1
a43 1
LIB_DEPENDS-server =	${MODGETTEXT_LIB_DEPENDS} \
d46 3
a48 5
WANTLIB-main =		${MODGETTEXT_WANTLIB} \
			SDL m pango-1.0 pthread \
			SDL_Pango SDL_mixer glib-2.0 \
			gobject-2.0
WANTLIB-server =	${MODGETTEXT_WANTLIB} c glib-2.0 pthread
@


1.23
log
@sync WANTLIB
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.22 2015/07/16 23:57:24 ajacoutot Exp $

SHARED_ONLY =		Yes
@


1.22
log
@Remove the perl bullshit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/06/14 10:34:44 sthen Exp $
d13 1
a13 1
REVISION-server =	6
d52 1
a52 1
WANTLIB-server =	${MODGETTEXT_WANTLIB} c glib-2.0
@


1.21
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/08/09 19:04:49 ajacoutot Exp $
d11 1
a11 1
REVISION-main =		10
@


1.20
log
@Remove -lpthread patching.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/25 23:43:40 sthen Exp $
d11 1
a11 1
REVISION-main =		9
@


1.19
log
@remove workaround
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:07:39 espie Exp $
d11 1
a11 1
REVISION-main =		8
d13 1
a13 1
REVISION-server =	5
a33 1
			devel/sdl-pango \
a36 1
			devel/sdl-pango \
d49 2
a50 2
			SDL X11 m pango-1.0 pthread pthread-stubs xcb \
			SDL_Pango SDL_mixer glib-2.0 gmodule-2.0 \
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/09/07 08:12:50 sthen Exp $
d11 1
a11 1
REVISION-main =		7
d13 1
a13 1
REVISION-server =	4
a26 2
MAKE_ENV =	LD_PRELOAD=libpthread.so # XXX remove when perl is -lpthread

a56 8

post-configure:
	${SUBST_CMD} -c ${FILESDIR}/wrapper.sh ${WRKDIR}/wrapper.sh

post-install:
	mv ${PREFIX}/bin/frozen-bubble* ${PREFIX}/libexec/frozen-bubble/
	${INSTALL_SCRIPT} ${WRKDIR}/wrapper.sh ${PREFIX}/bin/frozen-bubble
	${INSTALL_SCRIPT} ${WRKDIR}/wrapper.sh ${PREFIX}/bin/frozen-bubble-editor
@


1.17
log
@use MAKE_ENV rather than patching Makefile to let this build without
perl being linked with -lpthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/09/02 20:52:35 sthen Exp $
a20 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d30 1
a30 1
NO_REGRESS =		Yes
@


1.16
log
@bodge frozen-bubble into working following changes to pthreads;

- patch the Makefile to avoid p5-SDL version checks which require
pthread functions

- install a wrapper script to preload pthread/so before running
frozen-bubble{,-editor}

ok aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/16 09:48:10 espie Exp $
d29 2
a30 1
USE_GROFF =		Yes
@


1.15
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d62 8
@


1.14
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/16 11:23:26 espie Exp $
d11 1
a11 1
REVISION-main =		6
d13 1
a13 1
REVISION-server =	3
@


1.13
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/08 23:12:31 espie Exp $
d11 1
a11 1
REVISION-main =		5
d13 1
a13 1
REVISION-server =	2
@


1.12
log
@old-style LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/08 15:54:53 espie Exp $
d37 8
a44 8
BUILD_DEPENDS =		::devel/p5-SDL \
			::devel/sdl-pango \
			::devel/p5-Locale-gettext

RUN_DEPENDS-main =	::devel/p5-SDL \
			::devel/sdl-pango \
			::devel/p5-Locale-gettext \
			::${BASE_PKGPATH},-server
d47 3
a49 3
			::devel/sdl-pango \
			::devel/sdl-mixer \
			::devel/glib2
d52 1
a52 1
			::devel/glib2
@


1.11
log
@a few more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/11/06 16:07:00 espie Exp $
d52 1
a52 1
			glib-2.0::devel/glib2
d58 1
a58 1
WANTLIB-server =	${MODGETTEXT_WANTLIB} c
@


1.10
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/10/18 18:00:18 espie Exp $
d29 1
a29 1
USE_GROFF =	Yes
d47 3
a49 3
			SDL_Pango::devel/sdl-pango \
			SDL_mixer::devel/sdl-mixer \
			glib-2.0,gmodule-2.0,gobject-2.0::devel/glib2
d55 3
a57 1
			SDL X11 m pango-1.0 pthread pthread-stubs xcb
@


1.9
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/09/24 15:29:22 sthen Exp $
d54 3
a56 2
WANTLIB-main =		SDL X11 m pango-1.0 pthread pthread-stubs xcb
WANTLIB-server =	c
@


1.8
log
@bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/11/07 12:21:04 ajacoutot Exp $
d29 1
@


1.7
log
@RUN_DEPENDS=${BUILD_DEPENDS} should never be used. In this case it adds
a stupid run dependency on gmake.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/08/20 21:20:13 sthen Exp $
d10 4
a13 2
PKGNAME-main =		${DISTNAME}p4
PKGNAME-server =	frozen-bubble-server-${VER}p1
@


1.6
log
@avoid a cyclic dependency found by Kili. ok ajacoutot@@ kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/08/16 12:29:21 ajacoutot Exp $
d10 1
a10 1
PKGNAME-main =		${DISTNAME}p3
d38 3
a40 1
RUN_DEPENDS-main =	${BUILD_DEPENDS} \
@


1.5
log
@Add the -server subpackage as a run dependency of the -main one.
This way, the frozen-bubble client works out-of-the-box for LAN games
(the client auto starts the server if it cannot find one on the local
net).

James Wright (maintainer) is ok with it.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/08/10 06:31:42 kili Exp $
d34 3
a36 2
BUILD_DEPENDS =		${RUN_DEPENDS-main} \
			${RUN_DEPENDS-server}
d38 1
a38 3
RUN_DEPENDS-main =	::devel/p5-SDL \
			::devel/sdl-pango \
			::devel/p5-Locale-gettext \
@


1.4
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/06/18 12:54:28 martynas Exp $
d10 1
a10 1
PKGNAME-main =		${DISTNAME}p2
d39 2
a40 1
			::devel/p5-Locale-gettext
@


1.3
log
@don't preserve permissions from shared data files, since we want
local files be writable.  fixes crash in single player & level edit
ok maintainer James Wright.  ruined productivity for aja@@ & sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/06/06 03:23:21 ajacoutot Exp $
d10 1
a10 1
PKGNAME-main =		${DISTNAME}p1
d49 1
a49 1
WANTLIB-main =		SDL X11 m pango-1.0 pthread
@


1.2
log
@- sanitise dependencies...
... sadly, this port core dumped on me :(
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/06/02 22:07:24 sthen Exp $
d10 2
a11 2
PKGNAME-main =		${DISTNAME}p0
PKGNAME-server =	frozen-bubble-server-${VER}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 2
a11 2
PKGNAME-main =		${DISTNAME}
PKGNAME-server =	frozen-bubble-server-${VER}
d31 2
a32 1
MODULES =		perl converters/libiconv devel/gettext
d37 1
a37 2
RUN_DEPENDS-main =	::devel/sdl \
			::devel/sdl-mixer \
d39 1
a39 2
			::devel/p5-Locale-gettext \
			::devel/p5-SDL
d41 1
a41 1
LIB_DEPENDS-main =	SDL::devel/sdl \
d46 2
a47 1
LIB_DEPENDS-server =	glib-2.0::devel/glib2
d49 2
a50 3
WANTLIB =		iconv intl
WANTLIB-main =		${WANTLIB} X11 m pango-1.0 pthread
WANTLIB-server =	${WANTLIB} c
@


1.1.1.1
log
@import frozen-bubble from maintainer James Wright. it has a couple of
small issues but works well enough, they can be fixed in-tree.

An amazingly cute game of popping bubbles.  Full-featured, colorful
animated penguin eye candy, 100 levels of 1p game, hours and hours of
2p game, a level-editor, 3 professional quality 20-channels musics, 15
stereo sound effects, 7 unique graphical transition effects.
@
text
@@
