head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.0.14
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.12
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.10
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.09.04.11.56.52;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	SrvM9rovKON48kjT;

1.1
date	2011.07.08.20.36.09;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to tuxpaint-0.9.22.
@
text
@$OpenBSD$

64-bit time_t

--- src/tuxpaint.c.orig	Thu Sep  4 13:54:51 2014
+++ src/tuxpaint.c	Thu Sep  4 13:54:29 2014
@@@@ -12976,9 +12976,9 @@@@ static void set_chunk_data(unsigned char **chunk_data,
 
   strcat(headers, "Tuxpaint\n");
   strcat(headers, "Tuxpaint_" VER_VERSION "\n");
-  sprintf(line, "%d%s", uncompressed_size, "\n");
+  sprintf(line, "%lld%s", uncompressed_size, "\n");
   strcat(headers, line);
-  sprintf(line, "%d%s", dataLen, "\n");
+  sprintf(line, "%lld%s", dataLen, "\n");
   strcat(headers, line);
 
   headersLen = strlen(headers);
@


1.1
log
@Fix build with png-1.5.
All fixes from/via NetBSD pkgsrc.  The people there did a lot of
heavy lifting.
@
text
@d3 1
a3 1
Fix build with png-1.5.
d5 3
a7 5
--- src/tuxpaint.c.orig	Tue Jul  5 16:58:39 2011
+++ src/tuxpaint.c	Tue Jul  5 17:01:44 2011
@@@@ -12898,12 +12898,8 @@@@ static int do_png_save(FILE * fi, const char *const fn
       {
 	png_init_io(png_ptr, fi);
d9 8
a16 8
-	info_ptr->width = surf->w;
-	info_ptr->height = surf->h;
-	info_ptr->bit_depth = 8;
-	info_ptr->color_type = PNG_COLOR_TYPE_RGB;
-	info_ptr->interlace_type = 1;
-	info_ptr->valid = 0;	/* will be updated by various png_set_FOO() functions */
+	png_set_IHDR(png_ptr, info_ptr, surf->w, surf->h, 8, PNG_COLOR_TYPE_RGB,
+ 		     1, PNG_COMPRESSION_TYPE_BASE, PNG_FILTER_TYPE_BASE);
d18 1
a18 2
 	png_set_sRGB_gAMA_and_cHRM(png_ptr, info_ptr,
 				   PNG_sRGB_INTENT_PERCEPTUAL);
@

