head	1.27;
access;
symbols
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.6
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.21.0.2
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.19.0.2
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.13.0.4
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	ajacoutot_20070710:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2016.06.17.18.55.42;	author jasper;	state Exp;
branches;
next	1.26;
commitid	scePW11FiSb49kVd;

1.26
date	2016.01.04.19.35.28;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	4rCvUMSKNb1kR8hu;

1.25
date	2016.01.04.12.21.12;	author bentley;	state Exp;
branches;
next	1.24;
commitid	20wk7FDnsNtK5gEK;

1.24
date	2014.11.02.15.19.22;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	mS4au0pRyvw4qqzn;

1.23
date	2013.06.04.18.41.42;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.11.11.07.39;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2012.09.19.08.15.08;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2012.08.05.08.05.38;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2012.07.10.15.22.45;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2012.05.29.06.18.37;	author bentley;	state Exp;
branches;
next	1.17;

1.17
date	2012.05.15.18.21.12;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2011.12.15.07.59.08;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.12.03.08.19.08;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.21.09.12.43;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.12.12.06.04.20;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.16.11.23.26;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.08.15.54.53;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.24.21.19.01;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.03.21.10.47.01;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.08.10.06.31.42;	author kili;	state Exp;
branches;
next	1.7;

1.7
date	2009.03.15.15.28.29;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.13.21.53.49;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.21.17.07.45;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.03.14.33.53;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.12.22.10.38;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.12.04.17.21.29;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.10.08.37.19;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.10.08.37.19;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.27
log
@update to freedroidrpg-0.16.1
@
text
@# $OpenBSD: Makefile,v 1.26 2016/01/04 19:35:28 ajacoutot Exp $

ONLY_FOR_ARCHS=	${GCC4_ARCHS}

COMMENT=	isometric RPG game

DISTNAME =	freedroidRPG-0.16.1
PKGNAME =	${DISTNAME:L}
CATEGORIES=	games x11

HOMEPAGE =	http://www.freedroid.org/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += GL SDL SDL_gfx SDL_image SDL_mixer X11 c execinfo jpeg
WANTLIB += ${MODLUA_WANTLIB} m ogg png pthread vorbis z

MASTER_SITES =	ftp://ftp.osuosl.org/pub/freedroid/${DISTNAME:R}/

WRKDIST =	${WRKDIR}/${DISTNAME:L}

MODULES =	devel/gettext \
		lang/lua \
		lang/python

MODLUA_SA =	Yes
MODLUA_VERSION =5.3

MODPY_RUNDEP =	No

BUILD_DEPENDS =	lang/gawk
LIB_DEPENDS=	devel/libexecinfo \
		devel/sdl-gfx \
		devel/sdl-image \
		devel/sdl-mixer \
		${MODLUA_LIB_DEPENDS}
RUN_DEPENDS =	devel/desktop-file-utils \
		x11/gtk+3,-guic

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		LUA_CFLAGS="$$(pkg-config --cflags ${MODLUA_DEP})" \
		LUA_LIBS="$$(pkg-config --libs ${MODLUA_DEP})" \
		ac_cv_path_LUADOX=

USE_GMAKE =	Yes
MAKE_FLAGS =	AWK=gawk

post-install:
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/freedroidrpg

.include <bsd.port.mk>
@


1.26
log
@python is needed to build; spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/01/04 12:21:12 bentley Exp $
d7 1
a7 1
DISTNAME =	freedroidRPG-0.16
d19 1
a19 1
MASTER_SITES =	ftp://ftp.osuosl.org/pub/freedroid/${DISTNAME}/
@


1.25
log
@Update to freedroidrpg-0.16.

tweaks + ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/11/02 15:19:22 ajacoutot Exp $
d24 3
a26 1
		lang/lua
d28 1
d30 1
a30 1
MODLUA_VERSION =	5.3
a40 1
USE_GMAKE =	Yes
d45 4
a48 1
		LUA_LIBS="$$(pkg-config --libs ${MODLUA_DEP})"
@


1.24
log
@Properly build against system lua instead of bundling its own.
Drop maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/06/04 18:41:42 naddy Exp $
d7 1
a7 1
DISTNAME =	freedroidRPG-0.15.1
a9 1
REVISION =	3
d19 1
a19 1
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=freedroid/}
d23 2
a24 1
MODULES=	lang/lua
d27 3
d35 2
d38 1
d42 3
a44 2
		LUA_CFLAGS="$$(pkg-config --cflags lua51)" \
		LUA_LIBS="$$(pkg-config --libs lua51)"
@


1.23
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/11 11:07:39 espie Exp $
a7 1
REVISION =	2
d10 1
a13 2
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>

d36 2
a37 5
		PTHREAD_CFLAGS="-pthread" \
		PTHREAD_LIBS="-pthread" \
		am_cv_prog_tar_ustar=plaintar
CONFIGURE_ARGS=	--with-x \
		--enable-opengl
d40 1
a40 1
	@@chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/freedroidrpg
@


1.22
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/09/19 08:15:08 jasper Exp $
d36 1
a36 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include \
			-I${LOCALBASE}/include/libpng" \
@


1.21
log
@sync after recent lua.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/08/05 08:05:38 sthen Exp $
a16 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
a17 1
PERMIT_PACKAGE_FTP=	Yes
@


1.20
log
@Use SHARED_ONLY=Yes for now to avoid a bug in lua.port.mk which causes
PKG_ARCH=* to be set. Marked XXX - temporary until Jasper works out what
to do with the lua module.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/07/10 15:22:45 jasper Exp $
a3 4
SHARED_ONLY=	Yes # XXX lua.port.mk bug
# The lua module marks packages PKG_ARCH=* unless they are SHARED_ONLY.
# To be fixed in lua, but marking this SHARED_ONLY as a temporary workaround
# and doesn't hurt anyway as freedroidrpg is gcc4-only.
d8 1
a8 1
REVISION =	1
@


1.19
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/05/29 06:18:37 bentley Exp $
d4 4
d12 1
a12 1
REVISION =	0
@


1.18
log
@Update games/freedroidrpg to 0.15.1.

While here, simplify MASTER_SITES and update homepage.

ok ajacoutot@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/05/15 18:21:12 jasper Exp $
d8 1
d30 1
@


1.17
log
@switch to lua.port.mk and a few tweaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/12/15 07:59:08 ajacoutot Exp $
d7 2
a8 3
M_V=		0.15
DISTNAME=	freedroidrpg-${M_V}rc2
REVISION=	0
d11 1
a11 1
HOMEPAGE=	http://freedroid.sourceforge.net/
d24 3
a26 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=freedroid/freedroidRPG/freedroidRPG-${M_V}/}
@


1.16
log
@Bugfix update to freedroidrpg-0.15rc2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/12/03 08:19:08 ajacoutot Exp $
d9 1
d23 1
a23 1
WANTLIB += lua m ogg png pthread vorbis z
d27 2
d33 1
a33 1
		lang/lua
@


1.15
log
@Update to freedroidrpg-0.15rc1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/21 09:12:43 ajacoutot Exp $
d8 1
a8 1
DISTNAME=	freedroidrpg-${M_V}rc1
a24 1
EXTRACT_SUFX=	.tar.bz2
@


1.14
log
@Set ONLY_FOR_ARCHS=${GCC4_ARCHS} and remove the MODGCC4 stuff.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/12/12 06:04:20 ajacoutot Exp $
d7 2
a8 3
M_V=		0.14
DISTNAME=	freedroidrpg-${M_V}.1
REVISION=	0
d21 3
d25 1
d27 3
a29 4
WANTLIB=	GL SDL X11 c jpeg m ogg png pthread vorbis z \
		SDL_image>=2 SDL_mixer>=3 execinfo

LIB_DEPENDS=	devel/sdl-image \
d31 1
a31 1
		devel/libexecinfo
@


1.13
log
@Update to freedroidrpg-0.14.1.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.12 2010/11/16 11:23:26 espie Exp $
d9 1
a26 1

a29 6

# needed to avoid a SIGSEGV
# (int i corruption in enemy.c line 2056:
# should be "0" or "1" instead of a nonsense negative value)
MODULES+=	gcc4
MODGCC4_ARCHES=	*
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/08 15:54:53 espie Exp $
d5 2
a6 1
DISTNAME=	freedroidrpg-0.13
a8 2
EXTRACT_SUFX=	.tar.bz2

d19 1
a19 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=freedroid/}
@


1.11
log
@a few more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/10/24 21:19:01 ajacoutot Exp $
d23 1
a23 1
		SDL_image.>=2 SDL_mixer.>=3 execinfo
d26 3
a28 3
LIB_DEPENDS=	::devel/sdl-image \
		::devel/sdl-mixer \
		::devel/libexecinfo
@


1.10
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/03/21 10:47:01 ajacoutot Exp $
d22 2
a23 1
WANTLIB=	GL SDL X11 c jpeg m ogg png pthread vorbis z
d26 3
a28 3
LIB_DEPENDS=	SDL_image.>=2::devel/sdl-image \
		SDL_mixer.>=3::devel/sdl-mixer \
		execinfo::devel/libexecinfo
@


1.9
log
@Update to freedroidrpg-0.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/08/10 06:31:42 kili Exp $
a23 1
USE_X11=	Yes
@


1.8
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/03/15 15:28:29 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	freedroidrpg-0.12
PKGNAME=	${DISTNAME}p1
d22 1
a22 1
WANTLIB=	GL SDL X11 c jpeg m ogg png pthread pthread-stubs vorbis xcb z
a23 1
MODULES=	devel/gettext
d40 2
d44 1
a44 2
		--enable-opengl \
		--enable-editors
@


1.7
log
@- unbreak on sparc64, it seems to work fine now
- tweak MESSAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/03/13 21:53:49 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d23 1
a23 1
WANTLIB=	GL SDL X11 c jpeg m ogg png pthread vorbis z
@


1.6
log
@- update to freedroidrpg-0.12
several enhancements and lots of bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/21 17:07:45 ajacoutot Exp $
d6 1
a30 4

.if ${MACHINE_ARCH} == "sparc64"
BROKEN=		SIGBUS on startup under sparc64
.endif
@


1.5
log
@- enable libexecinfo support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/10/03 14:33:53 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	freedroidrpg-0.11
PKGNAME=	${DISTNAME}p0
@


1.4
log
@- update to freedroidrpg-0.11
- needs gcc4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/06/12 22:10:38 ajacoutot Exp $
d6 1
d29 2
a30 1
		SDL_mixer.>=3::devel/sdl-mixer
d49 1
a49 2
		--enable-editors \
		--disable-backtrace # needs libexecinfo
@


1.3
log
@- NOT_FOR_ARCHS -> BROKEN
no change, but it makes more sense: when bored people grep for BROKEN
they have a chance to find this

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/12/04 17:21:29 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	freedroidrpg-0.10.3
d22 1
a22 2
WANTLIB=	GL SDL X11 Xext Xi c glib gmodule jpeg m ogg png \
		pthread vorbis z
d27 2
a28 4
LIB_DEPENDS=	gdk.>=3,gtk.>=3::x11/gtk+ \
		SDL_image.>=2::devel/sdl-image \
		SDL_mixer.>=3::devel/sdl-mixer \
		SDL_net.>=1::devel/sdl-net
d34 6
d48 1
a48 1
		--disable-backtrace
@


1.2
log
@- update to freedroidrpg-0.10.3
(upstream imported all of our patches)
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/10 08:37:19 ajacoutot Exp $

# Bus Error on startup
NOT_FOR_ARCHS=	sparc64
d32 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
DISTNAME=	freedroidrpg-0.10.2
d26 1
a26 1
		pthread usbhid vorbis z
@


1.1.1.1
log
@Import freedroidrpg-0.10.2

FreeDroidRPG is a free isometric RPG game inspired by elements of Diablo
and Fallout. Originally based on FreeDroid Classic, this project now has
vastly deviated from its parent.

This game tells the story of a world destroyed by a conflict between the
bots and their human masters. Play as Tux in a quest to save the world
from the murderous rebel bots who know no mercy...
... Or maybe just spend your time wandering around the land while the
people are slaughtered. You get to choose which path you wish to follow,
and freedom of choice is everywhere in the game.

FreeDroidRPG comes with an innovative system of magic, with features
such as forced casting and over 20 spells. You can use over 50 different
kinds of items and fight countless enemies on your way to your destiny.
We have an advanced dialogue system, with it's aim to be at least on par
with Fallout's. Our battle engine supports both ranged and close combat
in real time. Finally, if guns are too inaccurate and blades too messy,
you can always take over your enemies and have them fight on your side.


- joint work with FreeDroidRPG developer Arthur Huillet <ahuillet at freedroid dot org>
- thanks to Joachim Schipper <j.schipper at math.uu dot nl> for all the
feedbacks and testing
- disable on sparc64 ("Bus Error" on startup, I'll try to work on it)
@
text
@@
