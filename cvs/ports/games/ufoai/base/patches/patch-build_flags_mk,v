head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.2
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.2.0.10
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.0.6
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.05.13.17.56.55;	author espie;	state Exp;
branches;
next	1.2;
commitid	f3eietsL7nC66Quy;

1.2
date	2014.09.29.18.23.15;	author kirby;	state Exp;
branches;
next	1.1;
commitid	XgzPY68RwZ98PQ3m;

1.1
date	2013.05.16.10.10.35;	author kirby;	state Exp;
branches;
next	;


desc
@@


1.3
log
@fix configury for clang, fix code for building under more stringent C++11
@
text
@$OpenBSD: patch-build_flags_mk,v 1.2 2014/09/29 18:23:15 kirby Exp $
Index: build/flags.mk
--- build/flags.mk.orig
+++ build/flags.mk
@@@@ -21,7 +21,7 @@@@ CFLAGS += -g
 CFLAGS += -Winline
 CFLAGS += -Wcast-qual
 CFLAGS += -Wcast-align
-CFLAGS += -Wmissing-declarations
+#CFLAGS += -Wmissing-declarations
 CFLAGS += -Wpointer-arith
 CFLAGS += -Wno-long-long
 CFLAGS += -pedantic
@@@@ -32,13 +32,17 @@@@ CFLAGS += -Wno-unused-parameter
 CFLAGS += -Wreturn-type
 CFLAGS += -Wwrite-strings
 CFLAGS += -Wno-variadic-macros
-CFLAGS += -Wno-format-zero-length
+#CFLAGS += -Wno-format-zero-length
 
 # clang stuff
-ifneq (,$(findstring clang,$(CXX)))
+ifeq ($(USE_CLANG), 1)
   CFLAGS += -Wno-extended-offsetof
-  CFLAGS += -Wno-c++11-extensions
   CFLAGS += -Wno-cast-align
+  CFLAGS += -Wno-expansion-to-defined
+# XXX this one may break at runtime, to investigate
+  CFLAGS += -Wno-dynamic-class-memaccess
+# XXX so far so good ?
+  CFLAGS += -Wno-varargs
 endif
 
 ifeq ($(PROFILING),1)
@@@@ -62,3 +66,6 @@@@ CCFLAGS += -std=c99
 #CCFLAGS += -Wc++-compat
 
 CXXFLAGS += -Wnon-virtual-dtor
+# features such as nullptr can only be used safely with variadic functions
+# in C++11
+CXXFLAGS += -std=c++11
@


1.2
log
@update to ufoai-2.5
@
text
@d1 4
a4 3
$OpenBSD: patch-build_flags_mk,v 1.1 2013/05/16 10:10:35 kirby Exp $
--- build/flags.mk.orig	Thu Jun  5 08:18:39 2014
+++ build/flags.mk	Tue Jul  1 20:09:09 2014
d14 1
a14 1
@@@@ -32,7 +32,7 @@@@ CFLAGS += -Wno-unused-parameter
d22 20
a41 1
 ifneq (,$(findstring clang,$(CXX)))
@


1.1
log
@Update to ufoai 2.4
From now all textures have permissive licenses, so we can ship packages.

Here are just a few of the changes in 2.4:
 - A dozen new maps to battle aliens
 - Rescue soldiers in dropships shot down by aliens and retreat from battles
 - New particle and sound effects for weapons
 - Support for smoke and incendiary effects
 - New skirmish options to save squads and respawn aliens
 - Battlescape render speed dramatically improved

Full changelog: http://ufoai.org/wiki/Changelog/2.4

With input from sthen@@ and bentley@@. Thanks guys!
Tested by me and bentley@@
OK bentley@@
@
text
@d1 4
a4 4
$OpenBSD$
--- build/flags.mk.orig	Wed Feb  6 12:58:38 2013
+++ build/flags.mk	Wed Feb  6 12:58:58 2013
@@@@ -21,7 +21,7 @@@@ CFLAGS += -ggdb
d13 9
@

