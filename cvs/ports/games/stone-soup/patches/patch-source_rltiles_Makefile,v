head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.2
	OPENBSD_6_2_BASE:1.3
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2017.05.27.16.41.41;	author espie;	state Exp;
branches;
next	1.2;
commitid	0kjAJV4gfBFowFoA;

1.2
date	2013.01.12.16.21.43;	author stsp;	state dead;
branches;
next	1.1;

1.1
date	2011.12.16.15.03.03;	author stsp;	state Exp;
branches;
next	;


desc
@@


1.3
log
@stupid build system. unhardcode gcc/g++, get sqlite path in the right location.
force everything in the build system
@
text
@$OpenBSD$

Index: source/rltiles/Makefile
--- source/rltiles/Makefile.orig
+++ source/rltiles/Makefile
@@@@ -50,13 +50,7 @@@@ endif
 
 # Attempt to use a full compiler name, to make
 # distcc builds work nicely.
-LMACH := $(shell gcc -dumpmachine)-
-ifeq ($(LMACH),-)
 LMACH :=
-endif
-ifeq ($(shell which $(LMACH)gcc > /dev/null 2> /dev/null && echo "Yes"),)
-LMACH :=
-endif
 HOSTCXX ?= $(LMACH)g++
 
 DELETE = rm -f
@


1.2
log
@Update Dungeon Crawl Stone Soup to version 0.11.0.
with silent agreement from ports@@
@
text
@d1 6
a6 7
$OpenBSD: patch-source_rltiles_Makefile,v 1.1 2011/12/16 15:03:03 stsp Exp $
honour CFLAGS
--- source/rltiles/Makefile.orig	Fri Dec 16 12:05:25 2011
+++ source/rltiles/Makefile	Fri Dec 16 12:05:37 2011
@@@@ -10,7 +10,7 @@@@ SDL_LDFLAGS := $(shell sdl-config --libs 2> /dev/null 
 PNG_INCLUDE := $(shell pkg-config libpng --cflags 2> /dev/null || echo "-I../contrib/install/include")
 PNG_LIB := $(shell pkg-config libpng --libs 2> /dev/null || echo "../contrib/install/lib/libpng.a ../contrib/install/lib/libz.a")
d8 10
a17 3
-CFLAGS := -O2 $(SDL_CFLAGS) $(PNG_INCLUDE)
+CFLAGS := $(SDL_CFLAGS) $(PNG_INCLUDE) $(CFLAGS) 
 LDFLAGS += $(SDL_LDFLAGS) $(PNG_LIB)
d19 1
a19 1
 ifneq (,$(findstring MINGW,$(uname_S)))
@


1.1
log
@Add a .desktop file and properly heed CFLAGS. help and ok sthen aja
@
text
@d1 1
a1 1
$OpenBSD$
@

