head	1.17;
access;
symbols
	OPENBSD_6_1:1.14.0.2
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.11.0.6
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.4
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.2.0.6
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	jsg_20130429:1.1.1.1
	jsg:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2017.07.26.22.45.21;	author sthen;	state Exp;
branches;
next	1.16;
commitid	tD4MFrpYYDDL2UFT;

1.16
date	2017.07.16.19.18.55;	author espie;	state Exp;
branches;
next	1.15;
commitid	tt0GhWK5c4uf9ILG;

1.15
date	2017.04.10.11.46.19;	author sthen;	state Exp;
branches;
next	1.14;
commitid	BLsh88fJB8thZTwY;

1.14
date	2017.01.23.11.40.16;	author jsg;	state Exp;
branches;
next	1.13;
commitid	zYNYXx5IGy7RgxQu;

1.13
date	2016.11.11.23.39.48;	author jsg;	state Exp;
branches;
next	1.12;
commitid	E6i5pfClwzAFox7q;

1.12
date	2016.07.30.15.41.37;	author jsg;	state Exp;
branches;
next	1.11;
commitid	7oCPvGDBWW6sXdyf;

1.11
date	2015.07.29.04.04.04;	author jsg;	state Exp;
branches;
next	1.10;
commitid	Vvq7Dqei2P3GsyF0;

1.10
date	2015.07.18.20.25.15;	author jasper;	state Exp;
branches;
next	1.9;
commitid	Hu2hQbIhkJT5XzVI;

1.9
date	2015.07.18.20.12.55;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	zSpPH9LHbP7RqLY9;

1.8
date	2015.07.17.21.46.10;	author jasper;	state Exp;
branches;
next	1.7;
commitid	1Pqo8w3qhrFUoe3q;

1.7
date	2015.06.28.03.47.09;	author jsg;	state Exp;
branches;
next	1.6;
commitid	PejxZ6u0scjkWd9R;

1.6
date	2015.06.05.12.20.39;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	EN63WAVsZfWHjAV3;

1.5
date	2015.05.25.07.54.27;	author jasper;	state Exp;
branches;
next	1.4;
commitid	jsaRAQWqOGFN8HTC;

1.4
date	2015.04.11.12.49.30;	author jsg;	state Exp;
branches;
next	1.3;
commitid	ysDMANSKZS3MbvrE;

1.3
date	2015.03.27.08.41.06;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	bGtJfGn7cri3zP6L;

1.2
date	2013.08.20.22.05.53;	author zhuk;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.29.01.50.53;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.29.01.50.53;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.17
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.16 2017/07/16 19:18:55 espie Exp $

ONLY_FOR_ARCHS=	i386 amd64

COMMENT-main=	redeclipse client
COMMENT-data=	redeclipse data
CATEGORIES=	games x11
MASTER_SITES=	https://github.com/red-eclipse/

HOMEPAGE=	http://www.redeclipse.net/
MAINTAINER=	Jonathan Gray <jsg@@openbsd.org>

MULTI_PACKAGES=	-main -data

N=		redeclipse
V=		1.5.8
PKGNAME=	${N}-${V}
PKGNAME-main=	${N}-${V}
PKGNAME-data=	${N}-data-${V}
REVISION-data=	0
REVISION-main=	0

DISTFILES=	redeclipse-{base/archive/v}${V}${EXTRACT_SUFX}


SM=	acerspyro actors appleflap blendbrush caustics crosshairs dziq \
	elyvisions fonts freezurbern john jojo jwin luckystrike maps mayhem \
	mikeplus64 misc nieb nobiax particles philipk projectiles props \
	skyboxes snipergoth sounds textures torley trak ulukai unnamed \
	vanities vegetation weapons wicked

.for MOD in ${SM}
DISTFILES+=	redeclipse-data-${MOD}-{${MOD}/archive/v}${V}${EXTRACT_SUFX}
.endfor

PKG_ARCH-data=	*

# zlib (code) + CC-BY-SA-3.0+ (data)
PERMIT_PACKAGE_CDROM=	Yes

RUN_DEPENDS-main +=	${BASE_PKGPATH},-data>=${V} \
			devel/desktop-file-utils \
			x11/gtk+3,-guic

BUILD_DEPENDS=		graphics/GraphicsMagick
LIB_DEPENDS-main=	devel/sdl2-mixer \
			devel/sdl2-image \
			net/enet>=1.3.12
WANTLIB-main+=		GL X11 SDL2 SDL2_image SDL2_mixer c enet m pthread \
			${COMPILER_LIBCXX} z

WRKDIST=		${WRKDIR}/base-${V}/src
USE_GMAKE=		Yes
MAKE_ENV+=		CXX="${CXX}" CXXFLAGS="${CXXFLAGS}" \
			    TRUEPREFIX="${TRUEPREFIX}"
NO_TEST=		Yes

INSTALL_TARGET=		system-install

post-extract:
.for MOD in ${SM}
	rm -f ${WRKDIR}/${MOD}-${V}/.gitattributes
	rm -rf ${WRKDIR}/${MOD}-${V}/.github
	rm -f ${WRKDIR}/${MOD}-${V}/.gitignore
	rm -f ${WRKDIR}/${MOD}-${V}/.gitmodules
	rmdir ${WRKDIR}/base-${V}/data/${MOD}
	mv ${WRKDIR}/${MOD}-${V} ${WRKDIR}/base-${V}/data/${MOD}
.endfor

.include <bsd.port.mk>
@


1.16
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2017/04/10 11:46:19 sthen Exp $
d20 2
@


1.15
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2017/01/23 11:40:16 jsg Exp $
d48 1
a48 1
			${LIBCXX} z
@


1.14
log
@update to Red Eclipse 1.5.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/11/11 23:39:48 jsg Exp $
d48 1
a48 1
			stdc++ z
@


1.13
log
@update to Red Eclipse 1.5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/07/30 15:41:37 jsg Exp $
d16 1
a16 1
V=		1.5.6
@


1.12
log
@update to Red Eclipse 1.5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/07/29 04:04:04 jsg Exp $
d16 1
a16 1
V=		1.5.5
@


1.11
log
@Unbreak after the redeclipse github repository got restructured
to have a large number of submodules.  Update to 1.5.3 while here
as the submodules don't have the 1.5.2 tag.

Problem reported by Henrique Lengler.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/07/18 20:25:15 jasper Exp $
d16 1
a16 1
V=		1.5.3
d23 6
a28 4
SM=	acerspyro actors appleflap blendbrush caustics crosshairs elyvisions \
	fonts freezurbern john jojo jwin luckystrike maps mayhem mikeplus64 \
	misc nobiax particles philipk projectiles props skyboxes sounds \
	textures torley trak ulukai unnamed vanities vegetation weapons wicked 
d44 2
a45 2
LIB_DEPENDS-main=	devel/sdl-mixer \
			devel/sdl-image \
d47 2
a48 1
WANTLIB-main+=		GL X11 SDL SDL_image SDL_mixer c enet m pthread stdc++ z
d61 1
d63 1
@


1.10
log
@drop gsed dependency by fixing up the patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/07/18 20:12:55 ajacoutot Exp $
d16 1
a16 1
V=		1.5.2
d21 10
a30 2
DISTFILES=	redeclipse-{base/archive/v}${V}${EXTRACT_SUFX} \
		redeclipse-data-{data/archive/v}${V}${EXTRACT_SUFX}
d56 6
a61 4
	rm ${WRKDIR}/data-${V}/.gitattributes
	rm ${WRKDIR}/data-${V}/.gitignore
	rmdir ${WRKDIR}/base-${V}/data
	mv ${WRKDIR}/data-${V} ${WRKDIR}/base-${V}/data
@


1.9
log
@Re-instate gsed dependency for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/07/17 21:46:10 jasper Exp $
d33 1
a33 2
BUILD_DEPENDS=		graphics/GraphicsMagick \
			textproc/gsed
@


1.8
log
@drop dependencies on gsed now that our sed can cope with -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/06/28 03:47:09 jsg Exp $
d33 2
a34 1
BUILD_DEPENDS=		graphics/GraphicsMagick
@


1.7
log
@update to Red Eclipse 1.5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/06/05 12:20:39 ajacoutot Exp $
d33 1
a33 2
BUILD_DEPENDS=		textproc/gsed \
			graphics/GraphicsMagick
@


1.6
log
@Sync PLIST for share/applications/.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/05/25 07:54:27 jasper Exp $
d16 1
a16 1
V=		1.5.1
a19 2

REVISION-main=	0
@


1.5
log
@remove a whole bunch more @@rm -f cases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/04/11 12:49:30 jsg Exp $
d20 2
@


1.4
log
@update to Red Eclipse 1.5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/03/27 08:41:06 ajacoutot Exp $
d49 4
a52 4
	@@rm -f ${WRKDIR}/data-${V}/.gitattributes
	@@rm -f ${WRKDIR}/data-${V}/.gitignore
	@@rmdir ${WRKDIR}/base-${V}/data
	@@mv ${WRKDIR}/data-${V} ${WRKDIR}/base-${V}/data
@


1.3
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/08/20 22:05:53 zhuk Exp $
d8 1
a8 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=redeclipse/}
d16 1
a16 3
V=		1.4
REVISION-main=	3
REVISION-data=	3
d20 3
a22 2
DISTNAME=	${N}_${V}_nix
EXTRACT_SUFX=	.tar.bz2
d26 1
a26 1
# zlib (code) + CC-BY-SA-3.0 (data)
d29 1
a29 1
RUN_DEPENDS-main +=	${BASE_PKGPATH},-data \
d33 2
a34 1
BUILD_DEPENDS=		textproc/gsed
d37 1
a37 1
			net/enet
d40 1
a40 1
WRKDIST=		${WRKDIR}/${N}-${V}/src
d47 6
@


1.2
log
@Fixup handling of FreeDesktop goo: desktop-file-utils, gtk-update-icon-cache
and shared-mime-info. Found by portcheck.

A lot of input from and okay ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/04/29 01:50:53 jsg Exp $
d17 2
a18 2
REVISION-main=	2
REVISION-data=	2
d32 1
a32 1
			x11/gtk+2,-guic
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d17 2
a18 1
REVISION=	1
@


1.1.1.1
log
@import Red Eclipse 1.4

Red Eclipse is a single-player and multi-player first-person
ego-shooter, built as a total conversion of Cube Engine 2,
which lends itself toward a balanced gameplay, completely at
the control of map makers, while maintaining a general theme
of agility in a variety of environments.

help from and ok ajacoutot@@, ok rfreeman@@
@
text
@@
