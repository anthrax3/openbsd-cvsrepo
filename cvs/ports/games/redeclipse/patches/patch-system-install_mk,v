head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.10
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.8
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.6
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.1.1.1.0.8
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.6
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.4
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	jsg_20130429:1.1.1.1
	jsg:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2015.07.18.20.25.15;	author jasper;	state Exp;
branches;
next	1.3;
commitid	Hu2hQbIhkJT5XzVI;

1.3
date	2015.06.28.03.47.09;	author jsg;	state Exp;
branches;
next	1.2;
commitid	PejxZ6u0scjkWd9R;

1.2
date	2015.04.11.12.49.30;	author jsg;	state Exp;
branches;
next	1.1;
commitid	ysDMANSKZS3MbvrE;

1.1
date	2013.04.29.01.50.57;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.29.01.50.57;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@drop gsed dependency by fixing up the patch
@
text
@$OpenBSD: patch-system-install_mk,v 1.3 2015/06/28 03:47:09 jsg Exp $
--- system-install.mk.orig	Tue Jun 16 23:08:34 2015
+++ system-install.mk	Sat Jul 18 14:16:44 2015
@@@@ -5,7 +5,7 @@@@ cappname=$(shell echo $(appname) | tr '[:lower:]' '[:u
 appclient=$(APPCLIENT)$(APPMODIFIER)$(BIN_SUFFIX)
 appserver=$(APPSERVER)$(APPMODIFIER)$(BIN_SUFFIX)
 
-prefix=/usr/local
+prefix=$(TRUEPREFIX)
 games=
 gamesbin=/bin
 bindir=$(DESTDIR)$(prefix)/bin
@@@@ -13,7 +13,8 @@@@ gamesbindir=$(DESTDIR)$(prefix)$(gamesbin)
 libexecdir=$(DESTDIR)$(prefix)/lib$(games)
 datadir=$(DESTDIR)$(prefix)/share$(games)
 docdir=$(DESTDIR)$(prefix)/share/doc
-mandir=$(DESTDIR)$(prefix)/share/man
+examplesdir=$(DESTDIR)$(prefix)/share/examples
+mandir=$(DESTDIR)$(prefix)/man
 menudir=$(DESTDIR)$(prefix)/share/applications
 icondir=$(DESTDIR)$(prefix)/share/icons/hicolor
 pixmapdir=$(DESTDIR)$(prefix)/share/pixmaps
@@@@ -93,16 +94,11 @@@@ system-install-server: server
 system-install-common:
 	$(MKDIR) $(libexecdir)/$(appname)
 	$(MKDIR) $(datadir)/$(appname)
-	$(MKDIR) $(datadir)/$(appname)/doc
 	$(MKDIR) $(docdir)/$(appname)
 	cp -r ../config $(datadir)/$(appname)/config
 	ln -s $(patsubst $(DESTDIR)%,%,$(datadir))/$(appname)/config \
 		$(libexecdir)/$(appname)/config
-	install -m644 ../doc/guidelines.txt $(datadir)/$(appname)/doc
-	ln -s $(patsubst $(DESTDIR)%,%,$(datadir))/$(appname)/doc \
-		$(libexecdir)/$(appname)/doc
-	ln -s $(patsubst $(DESTDIR)%,%,$(datadir))/$(appname)/doc/guidelines.txt \
-		$(docdir)/$(appname)/guidelines.txt
+	install -m644 ../doc/guidelines.txt $(docdir)/$(appname)
 
 system-install-data:
 	$(MKDIR) $(datadir)/$(appname)
@@@@ -119,16 +115,16 @@@@ system-install-docs: $(MANPAGES)
 		-e 's,@@DOCDIR@@,$(patsubst $(DESTDIR)%,%,$(docdir)),g' \
 		-e 's,@@APPNAME@@,$(appname),g' \
 		-e 's,@@CAPPNAME@@,$(cappname),g' \
-		../doc/man/$(appsrcname).6.am | \
-		gzip -9 -n -c > $(mandir)/man6/$(appname).6.gz
+		../doc/man/$(appsrcname).6.am \
+		> $(mandir)/man6/$(appname).6
 	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
 		-e 's,@@DATADIR@@,$(patsubst $(DESTDIR)%,%,$(datadir)),g' \
 		-e 's,@@DOCDIR@@,$(patsubst $(DESTDIR)%,%,$(docdir)),g' \
 		-e 's,@@APPNAME@@,$(appname),g' \
 		-e 's,@@CAPPNAME@@,$(cappname),g' \
-		../doc/man/$(appsrcname)-server.6.am | \
-		gzip -9 -n -c > $(mandir)/man6/$(appname)-server.6.gz
-	cp -r ../doc/examples $(docdir)/$(appname)/examples
+		../doc/man/$(appsrcname)-server.6.am \
+		> $(mandir)/man6/$(appname)-server.6
+	cp -r ../doc/examples $(examplesdir)/$(appname)
 
 system-install-menus: icons
 	$(MKDIR) $(menudir)
@@@@ -170,52 +166,51 @@@@ system-install-cube2font: cube2font system-install-cub
 
 system-install-cube2font-docs: ../doc/man/cube2font.1
 	$(MKDIR) $(mandir)/man1
-	gzip -9 -n -c < ../doc/man/cube2font.1 \
-		> $(mandir)/man1/cube2font.1.gz
+	install -m644 ../doc/man/cube2font.1 $(mandir)/man1/cube2font.1
 
 system-install: system-install-client system-install-server system-install-common system-install-data system-install-docs system-install-menus
 
 system-uninstall-common:
 	rm -rf $(datadir)/$(appname)/config
-	@@rm -fv $(libexecdir)/$(appname)/config
+	@@rm -f $(libexecdir)/$(appname)/config
 	rm -rf $(datadir)/$(appname)/doc
-	@@rm -fv $(libexecdir)/$(appname)/doc
-	@@rm -fv $(docdir)/$(appname)/guidelines.txt
+	@@rm -f $(libexecdir)/$(appname)/doc
+	@@rm -f $(docdir)/$(appname)/guidelines.txt
 
 system-uninstall-client:
-	@@rm -fv $(libexecdir)/$(appname)/$(appname)
-	@@rm -fv $(libexecdir)/$(appname)/data
-	@@rm -fv $(gamesbindir)/$(appname)
+	@@rm -f $(libexecdir)/$(appname)/$(appname)
+	@@rm -f $(libexecdir)/$(appname)/data
+	@@rm -f $(gamesbindir)/$(appname)
 
 system-uninstall-server:
-	@@rm -fv $(libexecdir)/$(appname)/$(appname)-server
-	@@rm -fv $(gamesbindir)/$(appname)-server
+	@@rm -f $(libexecdir)/$(appname)/$(appname)-server
+	@@rm -f $(gamesbindir)/$(appname)-server
 
 system-uninstall-data:
 	rm -rf $(datadir)/$(appname)/data
 
 system-uninstall-docs:
-	@@rm -rfv $(docdir)/$(appname)/examples
-	@@rm -fv $(mandir)/man6/$(appname).6.gz
-	@@rm -fv $(mandir)/man6/$(appname)-server.6.gz
+	@@rm -rf $(docdir)/$(appname)/examples
+	@@rm -f $(mandir)/man6/$(appname).6
+	@@rm -f $(mandir)/man6/$(appname)-server.6
 
 system-uninstall-menus:
-	@@rm -fv $(menudir)/$(appname).desktop
-	@@rm -fv $(appdatadir)/$(appname).appdata.xml
-	@@rm -fv $(icondir)/16x16/apps/$(appname).png
-	@@rm -fv $(icondir)/32x32/apps/$(appname).png
-	@@rm -fv $(icondir)/48x48/apps/$(appname).png
-	@@rm -fv $(icondir)/64x64/apps/$(appname).png
-	@@rm -fv $(icondir)/128x128/apps/$(appname).png
-	@@rm -fv $(pixmapdir)/$(appname).xpm
+	@@rm -f $(menudir)/$(appname).desktop
+	@@rm -f $(appdatadir)/$(appname).appdata.xml
+	@@rm -f $(icondir)/16x16/apps/$(appname).png
+	@@rm -f $(icondir)/32x32/apps/$(appname).png
+	@@rm -f $(icondir)/48x48/apps/$(appname).png
+	@@rm -f $(icondir)/64x64/apps/$(appname).png
+	@@rm -f $(icondir)/128x128/apps/$(appname).png
+	@@rm -f $(pixmapdir)/$(appname).xpm
 
 system-uninstall: system-uninstall-client system-uninstall-server system-uninstall-common system-uninstall-data system-uninstall-docs system-uninstall-menus
-	-@@rmdir -v $(libexecdir)/$(appname)
-	-@@rmdir -v $(datadir)/$(appname)
-	-@@rmdir -v $(docdir)/$(appname)
+	-@@rmdir $(libexecdir)/$(appname)
+	-@@rmdir $(datadir)/$(appname)
+	-@@rmdir $(docdir)/$(appname)
 
 system-uninstall-cube2font-docs:
-	@@rm -fv $(mandir)/man1/cube2font.1.gz
+	@@rm -f $(mandir)/man1/cube2font.1
 
 system-uninstall-cube2font: system-uninstall-cube2font-docs
-	@@rm -fv $(bindir)/bin/cube2font
+	@@rm -f $(bindir)/bin/cube2font
@


1.3
log
@update to Red Eclipse 1.5.2
@
text
@d1 4
a4 9
$OpenBSD: patch-system-install_mk,v 1.2 2015/04/11 12:49:30 jsg Exp $
--- system-install.mk.orig	Wed Jun 17 15:08:34 2015
+++ system-install.mk	Sun Jun 28 13:24:41 2015
@@@@ -1,11 +1,11 @@@@
 appname=$(APPNAME)
-appnamefull=$(shell sed -n 's/.define VERSION_NAME *"\([^"]*\)"/\1/p' version.h)
+appnamefull=$(shell gsed -n 's/.define VERSION_NAME *"\([^"]*\)"/\1/p' version.h)
 appsrcname=$(APPNAME)
 cappname=$(shell echo $(appname) | tr '[:lower:]' '[:upper:]')# Captial appname
d41 1
a41 7
@@@@ -114,21 +110,21 @@@@ system-install-data:
 system-install-docs: $(MANPAGES)
 	$(MKDIR) $(mandir)/man6
 	$(MKDIR) $(docdir)/$(appname)
-	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
+	gsed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
 		-e 's,@@DATADIR@@,$(patsubst $(DESTDIR)%,%,$(datadir)),g' \
a46 1
-	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
d49 1
a49 1
+	gsed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
a62 16
@@@@ -139,13 +135,13 @@@@ system-install-menus: icons
 	$(MKDIR) $(icondir)/64x64/apps
 	$(MKDIR) $(icondir)/128x128/apps
 	$(MKDIR) $(pixmapdir)
-	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
+	gsed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
 		-e 's,@@DATADIR@@,$(patsubst $(DESTDIR)%,%,$(datadir)),g' \
 		-e 's,@@DOCDIR@@,$(patsubst $(DESTDIR)%,%,$(docdir)),g' \
 		-e 's,@@APPNAME@@,$(appname),g' \
 		install/nix/$(appsrcname).desktop.am > \
 		$(menudir)/$(appname).desktop
-	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
+	gsed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
 		-e 's,@@DATADIR@@,$(patsubst $(DESTDIR)%,%,$(datadir)),g' \
 		-e 's,@@DOCDIR@@,$(patsubst $(DESTDIR)%,%,$(docdir)),g' \
 		-e 's,@@APPNAME@@,$(appname),g' \
@


1.2
log
@update to Red Eclipse 1.5.1
@
text
@d1 3
a3 3
$OpenBSD: patch-system-install_mk,v 1.1.1.1 2013/04/29 01:50:57 jsg Exp $
--- system-install.mk.orig	Fri Apr  3 17:00:37 2015
+++ system-install.mk	Sat Apr 11 15:16:04 2015
d28 15
a42 11
@@@@ -89,10 +90,9 @@@@ system-install-server: server
 	g,@@APPNAME@@,\
 	s,@@APPNAME@@,$(appname),g\n\
 	w\n" | ed -s $(gamesbindir)/$(appname)-server
-	install -m644 ../config/version.cfg \
-		$(datadir)/$(appname)/version.cfg
-	ln -s $(patsubst $(DESTDIR)%,%,$(datadir))/$(appname)/version.cfg \
-		$(libexecdir)/$(appname)/version.cfg
+	cp -R ../config $(datadir)/$(appname)/config
+	ln -s $(patsubst $(DESTDIR)%,%,$(datadir))/$(appname)/config \
+		$(libexecdir)/$(appname)/config
d45 2
a46 2
 	cp -r ../data $(datadir)/$(appname)/data
@@@@ -101,21 +101,21 @@@@ system-install-data:
d59 1
a59 1
+		../doc/man/$(appsrcname).6.am  \
d71 1
a71 2
+	cp -R ../doc/examples $(examplesdir)/$(appname)
 	cp ../doc/guidelines.txt $(docdir)/$(appname)/guidelines.txt
d74 2
a75 1
@@@@ -126,7 +126,7 @@@@ system-install-menus: icons
d84 8
a91 1
@@@@ -151,47 +151,46 @@@@ system-install-cube2font: cube2font system-install-cub
d99 11
a109 1
 system-install: system-install-client system-install-server system-install-data system-install-docs system-install-menus
a113 1
-	@@rm -fv	$(libexecdir)/$(appname)/version.cfg
a116 1
+	@@rm -f	$(libexecdir)/$(appname)/version.cfg
a126 2
-	rm -fv $(datadir)/$(appname)/version.cfg
+	rm -f $(datadir)/$(appname)/version.cfg
a129 1
-	@@rm -fv $(docdir)/$(appname)/guidelines.txt
d133 2
a134 3
+	@@rm -f $(docdir)/$(appname)/guidelines.txt
+	@@rm -f $(mandir)/man6/$(appname).6.gz
+	@@rm -f $(mandir)/man6/$(appname)-server.6.gz
d138 1
d146 1
d154 1
a154 1
 system-uninstall: system-uninstall-client system-uninstall-server system-uninstall-data system-uninstall-docs system-uninstall-menus
d164 1
a164 1
+	@@rm -f $(mandir)/man1/cube2font.1.gz
@


1.1
log
@Initial revision
@
text
@d1 11
a11 6
$OpenBSD$
--- system-install.mk.orig	Thu Mar 21 09:21:57 2013
+++ system-install.mk	Fri Apr 12 15:56:44 2013
@@@@ -6,7 +6,7 @@@@ appclient=$(APPCLIENT)
 appserver=$(APPSERVER)
 appgamedir=game/$(APPSHORTNAME)
d18 1
a18 1
@@@@ -14,7 +14,8 @@@@ gamesbindir=$(DESTDIR)$(prefix)$(gamesbin)
d28 15
a42 19
@@@@ -59,7 +60,7 @@@@ system-install-client: client
 	install -m755 $(appclient) $(libexecdir)/$(appname)/$(appname)
 	install -m755 install/nix/$(appsrcname).am \
 		$(gamesbindir)/$(appname)
-	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
+	gsed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
 		-e 's,@@DATADIR@@,$(patsubst $(DESTDIR)%,%,$(datadir)),g' \
 		-e 's,@@DOCDIR@@,$(patsubst $(DESTDIR)%,%,$(docdir)),g' \
 		-e 's,@@APPNAME@@,$(appname),g' \
@@@@ -77,7 +78,7 @@@@ system-install-server: server
 		$(libexecdir)/$(appname)/$(appname)-server
 	install -m755 install/nix/$(appsrcname)-server.am \
 		$(gamesbindir)/$(appname)-server
-	sed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
+	gsed -e 's,@@LIBEXECDIR@@,$(patsubst $(DESTDIR)%,%,$(libexecdir)),g' \
 		-e 's,@@DATADIR@@,$(patsubst $(DESTDIR)%,%,$(datadir)),g' \
 		-e 's,@@DOCDIR@@,$(patsubst $(DESTDIR)%,%,$(docdir)),g' \
 		-e 's,@@APPNAME@@,$(appname),g' \
@@@@ -94,21 +95,21 @@@@ system-install-data:
d44 2
a45 2
 	install	-d $(mandir)/man6
 	install -d $(docdir)/$(appname)
d55 1
a55 1
+		../doc/man/$(appsrcname).6.am \
d71 4
a74 4
@@@@ -119,7 +120,7 @@@@ system-install-menus: icons
 	install -d $(icondir)/64x64/apps
 	install -d $(icondir)/128x128/apps
 	install -d $(pixmapdir)
d80 1
a80 1
@@@@ -144,47 +145,46 @@@@ system-install-cube2font: cube2font system-install-cub
d83 1
a83 1
 	install -d $(mandir)/man1
d93 1
a93 1
-	@@rm -fv $(libexecdir)/$(appname)/game
d97 1
a97 1
+	@@rm -f $(libexecdir)/$(appname)/game
d108 2
a109 1
 	rm -rf $(datadir)/$(appname)/game
d118 2
a119 2
+	@@rm -f $(mandir)/man6/$(appname).6
+	@@rm -f $(mandir)/man6/$(appname)-server.6
d147 1
a147 1
+	@@rm -f $(mandir)/man1/cube2font.1
@


1.1.1.1
log
@import Red Eclipse 1.4

Red Eclipse is a single-player and multi-player first-person
ego-shooter, built as a total conversion of Cube Engine 2,
which lends itself toward a balanced gameplay, completely at
the control of map makers, while maintaining a general theme
of agility in a variety of environments.

help from and ok ajacoutot@@, ok rfreeman@@
@
text
@@
