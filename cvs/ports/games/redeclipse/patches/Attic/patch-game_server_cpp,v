head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2015.06.28.03.47.09;	author jsg;	state dead;
branches;
next	1.1;
commitid	PejxZ6u0scjkWd9R;

1.1
date	2015.04.11.12.49.30;	author jsg;	state Exp;
branches;
next	;
commitid	ysDMANSKZS3MbvrE;


desc
@@


1.2
log
@update to Red Eclipse 1.5.2
@
text
@$OpenBSD: patch-game_server_cpp,v 1.1 2015/04/11 12:49:30 jsg Exp $
--- game/server.cpp.orig	Sat Apr 11 15:42:15 2015
+++ game/server.cpp	Sat Apr 11 15:43:13 2015
@@@@ -3934,7 +3934,7 @@@@ namespace server
                 if(G(serverdebug) >= 2) srvmsgf(ci->clientnum, "sync error: sticky [%d (%d)] failed - not found", weap, id);
                 return;
             }
-            clientinfo *m = m >= 0 ? (clientinfo *)getinfo(target) : NULL;
+            clientinfo *m = target >= 0 ? (clientinfo *)getinfo(target) : NULL;
             if(target < 0 || (m && m->state.state == CS_ALIVE && !m->state.protect(gamemillis, m_protect(gamemode, mutators))))
                 sendf(-1, 1, "ri9ix", N_STICKY, ci->clientnum, target, id, norm.x, norm.y, norm.z, pos.x, pos.y, pos.z, ci->clientnum);
             else if(G(serverdebug) >= 2) srvmsgf(ci->clientnum, "sync error: sticky [%d (%d)] failed - state disallows it", weap, id);
@


1.1
log
@update to Red Eclipse 1.5.1
@
text
@d1 1
a1 1
$OpenBSD$
@

