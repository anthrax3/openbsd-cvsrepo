head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2017.05.20.17.13.01;	author espie;	state dead;
branches;
next	1.1;
commitid	hclfBXCjeJc0rOur;

1.1
date	2017.05.17.11.00.07;	author espie;	state Exp;
branches;
next	;
commitid	3bZ6fJYxqX3GimA9;


desc
@@


1.2
log
@bleh sdl wants gnu89 inlines anyway, so just assert it, and don't convert
the rest...
@
text
@$OpenBSD: patch-lgeneral_sdl_c,v 1.1 2017/05/17 11:00:07 espie Exp $

Index: lgeneral/sdl.c
--- lgeneral/sdl.c.orig
+++ lgeneral/sdl.c
@@@@ -136,20 +136,11 @@@@ int disp_format(SDL_Surface *sur)
 /*
     lock surface
 */
-inline void lock_surf(SDL_Surface *sur)
-{
-    if (SDL_MUSTLOCK(sur))
-        SDL_LockSurface(sur);
-}
-
+extern void lock_surf(SDL_Surface *sur);
 /*
     unlock surface
 */
-inline void unlock_surf(SDL_Surface *sur)
-{
-    if (SDL_MUSTLOCK(sur))
-        SDL_UnlockSurface(sur);
-}
+extern void unlock_surf(SDL_Surface *sur);
 
 /*
     blit surface with destination DEST and source SOURCE using it's actual alpha and color key settings
@@@@ -405,21 +396,11 @@@@ int write_text(Font *fnt, SDL_Surface *dest, int x, in
 /*
     lock font surface
 */
-inline void lock_font(Font *fnt)
-{
-    if (SDL_MUSTLOCK(fnt->pic))
-        SDL_LockSurface(fnt->pic);
-}
-
+extern void lock_font(Font *sfnt);
 /*
     unlock font surface
 */
-inline void unlock_font(Font *fnt)
-{
-    if (SDL_MUSTLOCK(fnt->pic))
-        SDL_UnlockSurface(fnt->pic);
-}
-	
+extern void unlock_font(Font *sfnt);
 /*
     return last update region
 */
@@@@ -622,10 +603,7 @@@@ void hardware_cap()
 /*
     update rectangle (0,0,0,0)->fullscreen
 */
-inline void refresh_screen(int x, int y, int w, int h)
-{
-    SDL_UpdateRect(sdl.screen, x, y, w, h);
-}
+extern void refresh_screen(int x, int y, int w, int h);
 
 /*
     draw all update regions
@


1.1
log
@those people don't understand inline, plus numerous typos
@
text
@d1 1
a1 1
$OpenBSD$
@

