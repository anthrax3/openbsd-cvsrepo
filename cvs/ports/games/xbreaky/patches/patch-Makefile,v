head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.30
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.28
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.24
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.26
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.22
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.20
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.18
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.16
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.14
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.12
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.10
	OPENBSD_5_0:1.5.0.8
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.6
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.26
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.24
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.22
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.20
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.18
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.16
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.14
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.12
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.10
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.8
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.6
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.4
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.1.0.6
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2010.01.07.09.38.20;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2003.06.20.02.17.25;	author kevlo;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.24.08.24.05;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2002.09.13.06.07.47;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.18.04.13.18;	author kevlo;	state Exp;
branches
	1.1.6.1;
next	;

1.1.6.1
date	2002.09.13.06.11.58;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.5
log
@use sndio instead of ossaudio
ok kevlo@@ (MAINTAINER)
@
text
@$OpenBSD: patch-Makefile,v 1.4 2003/06/20 02:17:25 kevlo Exp $
--- Makefile.orig	Thu Sep 12 02:08:57 2002
+++ Makefile	Sun Jan  3 01:14:53 2010
@@@@ -1,36 +1,32 @@@@
 # Makefile for Xbreaky from {davebrul@@hotmail.com}   
 
 
-CC=g++
-GC=gcc
+#CC=g++
+#GC=gcc
 
-CFLAGS = -O2 -DPREFIX=\"${prefix}\"
-LDFLAGS = -L/usr/X11R6/lib -I/usr/X11/include/X11 -lX11 -lXpm -lm
-prefix = /usr/local
+CFLAGS+=-DPREFIX=\"${PREFIX}\" -I${X11BASE}/include
+CXXFLAGS+=-DPREFIX=\"${PREFIX}\" -I${X11BASE}/include
+LDFLAGS = -L${X11BASE}/lib -lX11 -lXpm -lm
+#prefix = /usr/local
 
 all: xbreaky xbreaky.snd
 
 xbreaky:
-	$(CC) $(CFLAGS) -c xbreaky.cpp -o xbreaky.o
-	$(CC) $(LDFLAGS) xbreaky.o -o xbreaky
+	$(CXX) $(CXXFLAGS) -c xbreaky.cpp -o xbreaky.o
+	$(CXX) $(LDFLAGS) xbreaky.o -o xbreaky
 
 xbreaky.snd:
-	$(GC) $(CFLAGS) -lm -o xbreaky.snd xbreaky.snd.c
+	$(CC) $(CFLAGS) -lm -lsndio -o xbreaky.snd xbreaky.snd.c
 
 install:
-	for d in $(prefix)/bin $(prefix)/share/pixmaps $(prefix)/man/man6 \
-          $(prefix)/share/games/xbreaky $(prefix)/doc/xbreaky ; do \
-          test -d $$d || install -d -m755 $$d ; \
-        done
-	install -m755 -s  xbreaky      $(prefix)/bin
-	install -m755 -s  xbreaky.snd  $(prefix)/bin
-	install -m644     xbreaky.xpm  $(prefix)/share/pixmaps
-	install -m644     *.dat        $(prefix)/share/games/xbreaky
-	install -m644     *.raw        $(prefix)/share/games/xbreaky
-	install -m644     README       $(prefix)/doc/xbreaky
-	install -m644     COPYING      $(prefix)/doc/xbreaky
-	install -m644     AUTHORS      $(prefix)/doc/xbreaky
-	install -m644     xbreaky.6    $(prefix)/man/man6
+	for d in ${PREFIX}/bin ${PREFIX}/share/pixmaps ${PREFIX}/man/man6 \
+	${PREFIX}/share/xbreaky; do test -d $$d || install -d -m755 $$d ; done
+	install -m555 -s  xbreaky      ${PREFIX}/bin
+	install -m555 -s  xbreaky.snd  ${PREFIX}/bin
+	install -m644     xbreaky.xpm  ${PREFIX}/share/pixmaps
+	install -m644     *.dat        ${PREFIX}/share/xbreaky
+	install -m644     *.raw        ${PREFIX}/share/xbreaky
+	install -m644     xbreaky.6    ${PREFIX}/man/man6
 
  clean:
 	rm -f xbreaky a.out core xbreaky.snd *.o
@


1.4
log
@- upgrade to version 0.0.5
- respect cc/cxx/cflags/cxxflags/prefix

Submitted by jolan@@
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.orig	Thu Sep 12 09:08:57 2002
+++ Makefile	Fri Jun 20 09:59:50 2003
d31 1
a31 1
+	$(CC) $(CFLAGS) -lm -lossaudio -o xbreaky.snd xbreaky.snd.c
@


1.3
log
@rearrange libs so that static linking works
@
text
@d1 11
a11 5
--- Makefile.orig	Thu May 11 01:53:15 2000
+++ Makefile	Tue Sep 24 02:14:30 2002
@@@@ -4,33 +4,34 @@@@
 CC=g++
 GC=gcc
d15 5
a19 4
+CFLAGS = -O2 -I${X11BASE}/include -DPREFIX=\"${prefix}\"
+LDFLAGS = -L${X11BASE}/lib
+LIBS = -lXpm -lX11 -lm
 prefix = /usr/local
d24 1
a24 1
 	$(CC) $(CFLAGS) -c xbreaky.cpp -o xbreaky.o
d26 2
a27 1
+	$(CC) $(LDFLAGS) xbreaky.o -o xbreaky ${LIBS}
d31 1
a31 1
+	$(GC) $(CFLAGS) -o xbreaky.snd xbreaky.snd.c -lm -lossaudio
d36 4
a39 6
+	for d in $(prefix)/bin $(DESTDIR)$(prefix)/share/xbreaky/pixmaps $(prefix)/man/man6 \
+          $(DESTDIR)$(prefix)/share/xbreaky $(DESTDIR)$(prefix)/share/xbreaky/doc ; do \
           test -d $$d || install -d -m755 $$d ; \
         done
-	install -m6755 -s xbreaky      $(prefix)/bin
-	install -m6755 -s xbreaky.snd  $(prefix)/bin
d47 8
a54 9
+	install -m555 -s xbreaky      $(DESTDIR)$(prefix)/bin
+	install -m555 -s xbreaky.snd  $(DESTDIR)$(prefix)/bin
+	install -m644     xbreaky.xpm  $(DESTDIR)$(prefix)/share/xbreaky/pixmaps
+	install -m644     *.dat        $(DESTDIR)$(prefix)/share/xbreaky
+	install -m644     *.raw        $(DESTDIR)$(prefix)/share/xbreaky
+	install -m644     README       $(DESTDIR)$(prefix)/share/xbreaky/doc
+	install -m644     COPYING      $(DESTDIR)$(prefix)/share/xbreaky/doc
+	install -m644     AUTHORS      $(DESTDIR)$(prefix)/share/xbreaky/doc
+	install -m644     xbreaky.6    $(DESTDIR)$(prefix)/man/man6
@


1.2
log
@remove setuid bit which is not needed and can be abused, per recent bugtraq
vulnerability; ok kevlo naddy
bump PKGNAME
@
text
@d2 2
a3 2
+++ Makefile	Thu Sep 12 12:26:38 2002
@@@@ -4,8 +4,8 @@@@
d10 2
a11 1
+LDFLAGS = -L${X11BASE}/lib -lX11 -lXpm -lm
d15 5
a19 2
@@@@ -15,22 +15,22 @@@@ xbreaky:
 	$(CC) $(LDFLAGS) xbreaky.o -o xbreaky
d23 1
a23 1
+	$(GC) $(CFLAGS) -lm -lossaudio -o xbreaky.snd xbreaky.snd.c
@


1.1
log
@- don't hardcode /usr/local and /usr/X11R6
- integrate COMMENT
- bump NEED_VERSION
@
text
@d1 2
a2 2
--- Makefile.orig	Thu May 11 07:53:15 2000
+++ Makefile	Wed Apr 18 11:42:55 2001
d14 1
a14 1
@@@@ -15,22 +15,22 @@@@
d37 2
a38 2
+	install -m6755 -s xbreaky      $(DESTDIR)$(prefix)/bin
+	install -m6755 -s xbreaky.snd  $(DESTDIR)$(prefix)/bin
@


1.1.6.1
log
@MFC:
remove setuid bit which is not needed and can be abused, per recent bugtraq
vulnerability
@
text
@d1 2
a2 2
--- Makefile.orig	Thu May 11 01:53:15 2000
+++ Makefile	Thu Sep 12 12:26:38 2002
d14 1
a14 1
@@@@ -15,22 +15,22 @@@@ xbreaky:
d37 2
a38 2
+	install -m555 -s xbreaky      $(DESTDIR)$(prefix)/bin
+	install -m555 -s xbreaky.snd  $(DESTDIR)$(prefix)/bin
@


