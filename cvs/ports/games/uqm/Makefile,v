head	1.42;
access;
symbols
	OPENBSD_6_2:1.42.0.8
	OPENBSD_6_2_BASE:1.42
	OPENBSD_6_1:1.42.0.6
	OPENBSD_6_1_BASE:1.42
	OPENBSD_6_0:1.42.0.4
	OPENBSD_6_0_BASE:1.42
	OPENBSD_5_9:1.42.0.2
	OPENBSD_5_9_BASE:1.42
	OPENBSD_5_8:1.40.0.6
	OPENBSD_5_8_BASE:1.40
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.39.0.6
	OPENBSD_5_6_BASE:1.39
	OPENBSD_5_5:1.39.0.4
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.39.0.2
	OPENBSD_5_4_BASE:1.39
	OPENBSD_5_3:1.38.0.2
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.34.0.2
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.29
	OPENBSD_5_1:1.29.0.2
	OPENBSD_5_0:1.28.0.4
	OPENBSD_5_0_BASE:1.28
	OPENBSD_4_9:1.28.0.2
	OPENBSD_4_9_BASE:1.28
	OPENBSD_4_8:1.25.0.12
	OPENBSD_4_8_BASE:1.25
	OPENBSD_4_7:1.25.0.10
	OPENBSD_4_7_BASE:1.25
	OPENBSD_4_6:1.25.0.8
	OPENBSD_4_6_BASE:1.25
	OPENBSD_4_5:1.25.0.6
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.25.0.4
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.25.0.2
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.23.0.2
	OPENBSD_4_2_BASE:1.23
	OPENBSD_4_1:1.21.0.2
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.19.0.2
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.16.0.2
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.14.0.2
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.13.0.2
	OPENBSD_3_7_BASE:1.13
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3
	wilfried_20030411:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.42
date	2016.01.11.21.29.50;	author espie;	state Exp;
branches;
next	1.41;
commitid	Bfh2X7dWSjg6kdAb;

1.41
date	2016.01.11.09.35.44;	author ajacoutot;	state Exp;
branches;
next	1.40;
commitid	WYnGla3sNqiyLTEw;

1.40
date	2015.01.20.12.28.31;	author bentley;	state Exp;
branches;
next	1.39;
commitid	q7zcAyUcnmeHpyJX;

1.39
date	2013.03.11.11.07.41;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2013.02.02.04.39.56;	author bentley;	state Exp;
branches;
next	1.37;

1.37
date	2012.10.21.16.38.24;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2012.10.11.19.02.12;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2012.10.10.14.06.40;	author bentley;	state Exp;
branches;
next	1.34;

1.34
date	2012.06.04.20.59.41;	author pascal;	state Exp;
branches;
next	1.33;

1.33
date	2012.05.18.05.22.47;	author bentley;	state Exp;
branches;
next	1.32;

1.32
date	2012.05.01.15.49.12;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2012.04.30.08.03.50;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2012.04.28.09.04.14;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2011.11.18.12.38.00;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2010.11.16.11.23.28;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2010.11.08.18.14.21;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.24.21.19.02;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2008.01.11.14.05.35;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2007.09.15.18.01.03;	author simon;	state Exp;
branches;
next	1.23;

1.23
date	2007.06.01.02.11.23;	author jolan;	state Exp;
branches;
next	1.22;

1.22
date	2007.06.01.02.06.01;	author jolan;	state Exp;
branches;
next	1.21;

1.21
date	2006.12.23.09.32.03;	author jolan;	state Exp;
branches;
next	1.20;

1.20
date	2006.11.24.00.15.11;	author jolan;	state Exp;
branches;
next	1.19;

1.19
date	2006.08.02.10.10.35;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2006.05.12.01.27.42;	author jolan;	state Exp;
branches;
next	1.17;

1.17
date	2006.03.21.04.00.09;	author jsg;	state Exp;
branches;
next	1.16;

1.16
date	2005.11.05.03.48.40;	author jolan;	state Exp;
branches;
next	1.15;

1.15
date	2005.09.16.09.51.27;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.06.23.00.50.17;	author jolan;	state Exp;
branches;
next	1.13;

1.13
date	2004.11.28.22.41.22;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2004.10.16.00.28.22;	author jolan;	state Exp;
branches;
next	1.11;

1.11
date	2004.10.01.05.08.22;	author jolan;	state Exp;
branches;
next	1.10;

1.10
date	2004.08.08.00.27.24;	author jolan;	state Exp;
branches;
next	1.9;

1.9
date	2004.03.31.03.42.16;	author jolan;	state Exp;
branches;
next	1.8;

1.8
date	2003.11.12.23.18.26;	author jolan;	state Exp;
branches;
next	1.7;

1.7
date	2003.10.31.04.09.21;	author jolan;	state Exp;
branches;
next	1.6;

1.6
date	2003.10.18.02.44.45;	author jolan;	state Exp;
branches;
next	1.5;

1.5
date	2003.09.28.19.15.52;	author jolan;	state Exp;
branches;
next	1.4;

1.4
date	2003.09.24.07.57.33;	author jolan;	state Exp;
branches;
next	1.3;

1.3
date	2003.07.25.11.04.30;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.12.08.23.47;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2003.04.11.09.12.52;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.04.11.09.12.52;	author wilfried;	state Exp;
branches;
next	;


desc
@@


1.42
log
@sloppy, antoine
@
text
@# $OpenBSD: Makefile,v 1.41 2016/01/11 09:35:44 ajacoutot Exp $

COMMENT-main=		ur-quan masters: space exploration game with battles
COMMENT-content=	ur-quan masters: game content
COMMENT-remix1=		ur-quan masters: remix pack number one
COMMENT-remix2=		ur-quan masters: remix pack number two
COMMENT-remix3=		ur-quan masters: remix pack number three
COMMENT-remix4=		ur-quan masters: remix pack number four
COMMENT-threedomusic=	ur-quan masters: 3DO music content
COMMENT-voice=		ur-quan masters: speech content

V =			0.7.0
EPOCH=			0# N.B. in RUN_DEPENDS
DISTNAME =		uqm-$V
CATEGORIES=		games x11
uqm_source =		uqm-$V-source.tgz
uqm_packages =		uqm-$V-content.uqm
uqm_addons =		uqm-$V-3domusic.uqm \
			uqm-$V-voice.uqm \
			uqm-remix-disc1.uqm \
			uqm-remix-disc2.uqm \
			uqm-remix-disc3.uqm \
			uqm-remix-disc4.uqm
DISTFILES =		${uqm_source} \
			${uqm_packages} \
			${uqm_addons}
DIST_SUBDIR=		uqm
CATEGORIES=		games x11
PKGNAME-main =		uqm-$V
PKGNAME-content =	uqm-content-$V
PKGNAME-remix1 =	uqm-remix1-$V
PKGNAME-remix2 =	uqm-remix2-$V
PKGNAME-remix3 =	uqm-remix3-$V
PKGNAME-remix4 =	uqm-remix4-$V
PKGNAME-threedomusic =	uqm-threedomusic-$V
PKGNAME-voice =		uqm-voice-$V
REVISION =		3
EXTRACT_ONLY =		${uqm_source}
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=sc2/}

HOMEPAGE=		http://sc2.sourceforge.net/

MAINTAINER =		Anthony J. Bentley <anthony@@anjbe.name>

# code GPLv2+, data Creative Commons Attribution-NonCommercial-ShareAlike 2.5
# NC does not apply to unmodified uqm distributions, but mark it to be safe
PERMIT_PACKAGE_CDROM=	NonCommercial
PERMIT_PACKAGE_FTP=	Yes

LIB_DEPENDS-main=	audio/libmikmod \
			audio/tremor>=20120410 \
			devel/sdl-image
PKG_ARCH-content=	*
PKG_ARCH-remix1=	*
PKG_ARCH-remix2=	*
PKG_ARCH-remix3=	*
PKG_ARCH-remix4=	*
PKG_ARCH-threedomusic=	*
PKG_ARCH-voice=		*
RUN_DEPENDS=		${PKGNAME-main}v0:games/uqm
RUN_DEPENDS-content=
RUN_DEPENDS-main=	${PKGNAME-content}v0:games/uqm,-content
WANTLIB-main=		c m pthread z SDL mikmod>=2.4 vorbisidec>=3 \
			SDL_image

NO_TEST=	Yes
USE_GMAKE=	Yes

MULTI_PACKAGES =	-main \
			-content \
			-remix1 \
			-remix2 \
			-remix3 \
			-remix4 \
			-threedomusic \
			-voice

.include <bsd.port.arch.mk>

do-configure:
.if ${PROPERTIES:Mle}
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g ; s|@@ENDIAN@@|undef|g" \
		${FILESDIR}/config_unix.h > ${WRKSRC}/src/config_unix.h
.else
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g ; s|@@ENDIAN@@|define|g" \
		${FILESDIR}/config_unix.h > ${WRKSRC}/src/config_unix.h
.endif
	@@sed -e "s|@@CC@@|${CC}|g ; s|@@CFLAGS@@|${CFLAGS}|g ; \
		s|@@LOCALBASE@@|${LOCALBASE}|g ; s|@@PREFIX@@|${PREFIX}|g ; \
		s|@@X11BASE@@|${X11BASE}|g" ${FILESDIR}/build.vars \
		> ${WRKSRC}/build.vars

do-build:
	cd ${WRKBUILD}; env MAKE_VERBOSE=1 ./build.sh uqm

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/uqm
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm/content/packages
	${INSTALL_MAN} ${FILESDIR}/uqm.6 ${PREFIX}/man/man6
	${INSTALL_DATA} ${WRKBUILD}/doc/users/manual.txt \
		${PREFIX}/share/doc/uqm
	${INSTALL_DATA} ${WRKBUILD}/content/version \
		${PREFIX}/share/uqm/content
	${INSTALL_PROGRAM} ${WRKBUILD}/uqm ${PREFIX}/bin
.for package in ${uqm_packages}
	${INSTALL_DATA} ${FULLDISTDIR}/${package} \
		${PREFIX}/share/uqm/content/packages
.endfor
.for addon in ${uqm_addons}
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm/content/addons
	${INSTALL_DATA} ${FULLDISTDIR}/${addon} \
		${PREFIX}/share/uqm/content/addons
.endfor

.include <bsd.port.mk>
@


1.41
log
@Use consistent email address for the MAINTAINER line.

ok bentley@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/01/20 12:28:31 bentley Exp $
d37 1
a37 1
REVISION =		2
a39 2

REVISION =		0
@


1.40
log
@clean up uqm makefile, add -remix4 package, add upstream manpage.

ok kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/03/11 11:07:41 espie Exp $
d41 2
d45 1
a45 1
MAINTAINER =		Anthony J. Bentley <anthony@@cathet.us>
@


1.39
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/02/02 04:39:56 bentley Exp $
d3 1
a3 1
COMMENT-main=		ur-quan masters: sdl port of star control 2; multiplayer
d8 1
d12 1
a12 1
VER =			0.7.0
d14 1
a14 1
DISTNAME =		uqm-${VER}
d16 11
a26 9
PDIST=			${DISTNAME}-source.tgz
CDIST =			${DISTNAME}-content.uqm
MDIST =			${DISTNAME}-3domusic.uqm
VDIST =			${DISTNAME}-voice.uqm
RM1DIST =		uqm-remix-disc1.uqm
RM2DIST =		uqm-remix-disc2.uqm
RM3DIST =		uqm-remix-disc3.uqm
DISTFILES=		${PDIST} ${CDIST}
SUPDISTFILES=		${MDIST} ${VDIST} ${RM1DIST} ${RM2DIST} ${RM3DIST}
d29 10
a38 15
PKGNAME-main=		uqm-${VER}
PKGNAME-content=	uqm-content-${VER}
PKGNAME-remix1=		uqm-remix1-${VER}
PKGNAME-remix2=		uqm-remix2-${VER}
PKGNAME-remix3=		uqm-remix3-${VER}
PKGNAME-threedomusic=	uqm-threedomusic-${VER}
PKGNAME-voice=		uqm-voice-${VER}
REVISION-main=		1
REVISION-content=	1
REVISION-remix1=	1
REVISION-remix2=	1
REVISION-remix3=	1
REVISION-threedomusic=	1
REVISION-voice=		1
EXTRACT_ONLY=		${PDIST}
d57 1
d69 8
a76 4
PSEUDO_FLAVORS=	no_remix1 no_remix2 no_remix3 no_threedomusic no_voice
FLAVOR?=

MULTI_PACKAGES= -main -content -remix1 -remix2 -remix3 -threedomusic -voice
a79 16
.if ${BUILD_PACKAGES:M-remix1}
DISTFILES+=	${RM1DIST}
.endif
.if ${BUILD_PACKAGES:M-remix2}
DISTFILES+=	${RM2DIST}
.endif
.if ${BUILD_PACKAGES:M-remix3}
DISTFILES+=	${RM3DIST}
.endif
.if ${BUILD_PACKAGES:M-threedomusic}
DISTFILES+=	${MDIST}
.endif
.if ${BUILD_PACKAGES:M-voice}
DISTFILES+=	${VDIST}
.endif

d99 1
a99 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm/content/addons
d104 3
a106 1
	${INSTALL_DATA} ${FULLDISTDIR}/${CDIST} \
d108 4
a111 2
.if ${BUILD_PACKAGES:M-remix1}
	${INSTALL_DATA} ${FULLDISTDIR}/${RM1DIST} \
d113 1
a113 18
.endif
.if ${BUILD_PACKAGES:M-remix2}
	${INSTALL_DATA} ${FULLDISTDIR}/${RM2DIST} \
		${PREFIX}/share/uqm/content/addons
.endif
.if ${BUILD_PACKAGES:M-remix3}
	${INSTALL_DATA} ${FULLDISTDIR}/${RM3DIST} \
		${PREFIX}/share/uqm/content/addons
.endif
.if ${BUILD_PACKAGES:M-threedomusic}
	${INSTALL_DATA} ${FULLDISTDIR}/${MDIST} \
		${PREFIX}/share/uqm/content/addons
.endif
.if ${BUILD_PACKAGES:M-voice}
	${INSTALL_DATA} ${FULLDISTDIR}/${VDIST} \
		${PREFIX}/share/uqm/content/addons
.endif
	${INSTALL_PROGRAM} ${WRKBUILD}/uqm ${PREFIX}/bin
@


1.38
log
@Take maintainership of some ports I'm interested in.

Initially suggested by kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/10/21 16:38:24 espie Exp $
a50 2
PERMIT_DISTFILES_CDROM=	NonCommercial
PERMIT_DISTFILES_FTP=	Yes
d67 1
a67 1
NO_REGRESS=	Yes
@


1.37
log
@zap spaces
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/10/11 19:02:12 naddy Exp $
d33 7
a39 7
REVISION-main=		0
REVISION-content=	0
REVISION-remix1=	0
REVISION-remix2=	0
REVISION-remix3=	0
REVISION-threedomusic=	0
REVISION-voice=		0
d44 2
@


1.36
log
@bump after PERMIT_* change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/10/10 14:06:40 bentley Exp $
d12 1
a12 1
EPOCH=			0 # N.B. in RUN_DEPENDS
@


1.35
log
@Build extra content packages by default.
While here, clarify license marker.

Initial prodding a very long time ago by kirby@@; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/06/04 20:59:41 pascal Exp $
d33 7
@


1.34
log
@Use PROPERTIES for checking for be/le.

ok naddy@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/05/18 05:22:47 bentley Exp $
d38 3
a40 2
# GPL + Creative Commons Attribution-NonCommercial-ShareAlike 2.5
PERMIT_PACKAGE_CDROM=	Yes
d42 1
a42 1
PERMIT_DISTFILES_CDROM=	Yes
d64 1
a64 1
FLAVOR?= no_remix1 no_remix2 no_remix3 no_threedomusic no_voice
@


1.33
log
@Update to uqm-0.7.0.

Addons structure and behavior has changed in this release:
 - 3domusic and remix addons can, when installed, be selected from the game
   settings menu rather than as command-line arguments
 - voice addon will be automatically enabled when installed, but can be
   turned off by adjusting the voice volume in the game settings menu

ok kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/05/01 15:49:12 sthen Exp $
a84 2
BYTEORDER!=sysctl -n hw.byteorder

d86 1
a86 1
.if ${BYTEORDER} == "1234"
@


1.32
log
@fix RUN_DEPENDS, PKGNAME does not append v0 from EPOCH and we don't really
want FULLPKGNAME here. breakage spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/04/30 08:03:50 sthen Exp $
d11 1
a11 1
VER=			0.6.0
d13 1
a13 1
DISTNAME=		uqm-0.6.2
d16 6
a21 6
CDIST=			uqm-${VER}-content.uqm
MDIST=			uqm-${VER}-3domusic.uqm
VDIST=			uqm-${VER}-voice.uqm
RM1DIST=		uqm-remix-pack1.zip
RM2DIST=		uqm-remix-pack2.zip
RM3DIST=		uqm-remix-pack3.zip
d26 1
a26 2
PKGNAME-main=		uqm-0.6.2
REVISION-main =		2
a61 2
WRKSRC=	${WRKDIST}/sc2

d105 2
a106 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm/content/packages/addons/uqmremix
d115 1
a115 1
		${PREFIX}/share/uqm/content/packages/addons/uqmremix
d119 1
a119 1
		${PREFIX}/share/uqm/content/packages/addons/uqmremix
d123 1
a123 1
		${PREFIX}/share/uqm/content/packages/addons/uqmremix
d127 1
a127 1
		${PREFIX}/share/uqm/content/packages
d131 1
a131 1
		${PREFIX}/share/uqm/content/packages
@


1.31
log
@"Found newer package uqm-20060507p0" -> bump EPOCH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/04/28 09:04:14 ajacoutot Exp $
d12 1
a12 1
EPOCH=			0
d54 3
a56 3
RUN_DEPENDS=		${PKGNAME-main}:games/uqm
RUN_DEPENDS-content=	
RUN_DEPENDS-main=	${PKGNAME-content}:games/uqm,-content
@


1.30
log
@Cope with recent audio/tremor update.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/11/18 12:38:00 espie Exp $
d12 1
@


1.29
log
@fix typo wrt remix3. use bsd.port.arch.mk for pseudo-flavors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/11/16 11:23:28 espie Exp $
d26 1
a26 1
REVISION-main =		1
d45 1
a45 1
			audio/tremor \
d56 1
a56 1
WANTLIB-main=		c m pthread z SDL mikmod>=2.4 vorbisidec>=1 \
@


1.28
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/11/08 18:14:21 espie Exp $
d64 2
a65 2
PSEUDO_FLAVORS=	remix1 remix2 remix3 threedomusic voice
FLAVOR?=
d67 5
a71 2
MULTI_PACKAGES= -main -content
.if ${FLAVOR:L:Mremix1}
a72 1
MULTI_PACKAGES+=-remix1
d74 1
a74 1
.if ${FLAVOR:L:Mremix2}
a75 1
MULTI_PACKAGES+=-remix2
d77 1
a77 1
.if ${FLAVOR:L:Mremix3}
a78 1
MULTI_PACKAGES+=-remix3
d80 1
a80 1
.if ${FLAVOR:L:Mthreedomusic}
a81 1
MULTI_PACKAGES+=-threedomusic
d83 1
a83 1
.if ${FLAVOR:L:Mvoice}
a84 1
MULTI_PACKAGES+=-voice
d114 1
a114 1
.if ${FLAVOR:L:Mremix1}
d118 1
a118 1
.if ${FLAVOR:L:Mremix2}
d122 1
a122 1
.if ${FLAVOR:L:Mremix2}
d126 1
a126 1
.if ${FLAVOR:L:Mthreedomusic}
d130 1
a130 1
.if ${FLAVOR:L:Mvoice}
@


1.27
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/10/24 21:19:02 ajacoutot Exp $
d44 3
a46 3
LIB_DEPENDS-main=	::audio/libmikmod \
			::audio/tremor \
			::devel/sdl-image
d53 1
a53 1
RUN_DEPENDS=		:${PKGNAME-main}:games/uqm
d55 2
a56 2
RUN_DEPENDS-main=	:${PKGNAME-content}:games/uqm,-content
WANTLIB-main=		c m pthread z SDL mikmod.>=2.4 vorbisidec.>=1 \
@


1.26
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/01/11 14:05:35 ajacoutot Exp $
d25 2
a26 1
PKGNAME-main=		uqm-0.6.2p1
d44 3
a46 3
LIB_DEPENDS-main=	mikmod.>=2.4::audio/libmikmod \
			vorbisidec.>=1::audio/tremor \
			SDL_image::devel/sdl-image
d56 2
a57 1
WANTLIB-main=		c m pthread z SDL
@


1.25
log
@- don't hardcode paths
- fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/09/15 18:01:03 simon Exp $
a58 1
USE_X11=	Yes
@


1.24
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/06/01 02:11:23 jolan Exp $
d25 1
a25 1
PKGNAME-main=		uqm-0.6.2
d55 1
a55 2
WANTLIB-main=		X11 Xext c m pthread usbhid z \
			SDL
@


1.23
log
@remove hardcoded arch endian list
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/06/01 02:06:01 jolan Exp $
d3 7
a9 7
COMMENT-main=		"ur-quan masters: sdl port of star control 2; multiplayer"
COMMENT-content=	"ur-quan masters: game content"
COMMENT-remix1=		"ur-quan masters: remix pack number one"
COMMENT-remix2=		"ur-quan masters: remix pack number two"
COMMENT-remix3=		"ur-quan masters: remix pack number three"
COMMENT-threedomusic=	"ur-quan masters: 3DO music content"
COMMENT-voice=		"ur-quan masters: speech content"
@


1.22
log
@update to 0.6.2 (bugfix release)
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.21 2006/12/23 09:32:03 jolan Exp $
# XXX hardcoded endian list
d89 2
d92 1
a92 3
.if (${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "amd64" || \
	${MACHINE_ARCH} == "arm" || ${MACHINE_ARCH} == "i386" || \
	${MACHINE_ARCH} == "vax")
@


1.21
log
@update to 0.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/11/24 00:15:11 jolan Exp $
d13 1
a13 1
DISTNAME=		uqm-${VER}
d26 1
a26 1
PKGNAME-main=		uqm-${VER}
@


1.20
log
@- switch to new MULTI_PACKAGES format
- split out the content into -content and mark it arch independent

help / tips from espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/08/02 10:10:35 espie Exp $
d4 1
a4 1
COMMENT-main=		"ur-quan masters: sdl port of star control 2"
d12 2
a13 3
DATE=			20060507
VER=			0.5.0
DISTNAME=		uqm-${DATE}
d15 1
a15 1
PDIST=			${DISTNAME}.tar.gz
a16 1
CDIST2=			uqm-${DATE}-content.zip
d22 1
a22 1
DISTFILES=		${PDIST}:0 ${CDIST} ${CDIST2}:0
d26 1
a26 1
PKGNAME-main=		uqm-${DATE}p0
a34 1
MASTER_SITES0=		http://mirrors.protection.cx/~jolan/
d38 5
a42 5
# GPL + Conditional licensing on content
PERMIT_PACKAGE_CDROM=	"content must accompany distribution of ur-quan masters"
PERMIT_PACKAGE_FTP=	"content must accompany distribution of ur-quan masters"
PERMIT_DISTFILES_CDROM=	"content must accompany distribution of ur-quan masters"
PERMIT_DISTFILES_FTP=	"content must accompany distribution of ur-quan masters"
d44 2
a45 1
LIB_DEPENDS-main=	vorbisidec.>=1::audio/tremor \
d63 2
a100 1
		s|@@CFLAGS_TREMOR@@|-DOVCODEC_TREMOR|g ; \
a101 1
		s|@@SOUNDLIB@@|-lvorbisidec|g ; \
a115 2
		${PREFIX}/share/uqm/content/packages
	${INSTALL_DATA} ${FULLDISTDIR}/${CDIST2} \
@


1.19
log
@more new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/05/12 01:27:42 jolan Exp $
d4 2
a5 1
COMMENT=		"ur-quan masters: sdl port of star control 2"
d28 2
d39 1
a39 1
HOMEPAGE=	http://sc2.sourceforge.net/
d41 1
a41 1
# GPL
d47 13
a59 4
LIB_DEPENDS=	vorbisidec.>=1::audio/tremor \
		SDL_image::devel/sdl-image
WANTLIB=	X11 Xext c m pthread usbhid z \
		SDL
d68 1
a68 1
MULTI_PACKAGES=
a87 28
.endif

SUBPACKAGE?=

.if defined(PACKAGING)
. if !empty(SUBPACKAGE)
WANTLIB=
. endif
. if ${SUBPACKAGE} == "-remix1"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
. if ${SUBPACKAGE} == "-remix2"
PKG_ARCH=	*
RUN_DEPENDS=    ::games/uqm
. endif
. if ${SUBPACKAGE} == "-remix3"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
. if ${SUBPACKAGE} == "-threedomusic"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
. if ${SUBPACKAGE} == "-voice"
PKG_ARCH=	*
RUN_DEPENDS=	::games/uqm
. endif
@


1.18
log
@update to 20060507 which fixes 64-bit/alignment problems
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/03/21 04:00:09 jsg Exp $
d44 1
a44 1
LIB_DEPENDS=	vorbisidec.1::audio/tremor \
@


1.17
log
@Update to 0.5.0, ok jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/11/05 03:48:40 jolan Exp $
a3 3
# 64-bit issues, unaligned memory access
ONLY_FOR_ARCHS=	arm i386 powerpc

d11 1
d13 1
a13 1
DISTNAME=		uqm-${VER}-source
d17 1
d23 1
a23 1
DISTFILES=		${PDIST} ${CDIST}
a26 1
PKGNAME=		uqm-${VER}
d34 1
d39 4
a42 4
PERMIT_PACKAGE_CDROM=	"Unresolved licensing issues"
PERMIT_PACKAGE_FTP=	"Unresolved licensing issues"
PERMIT_DISTFILES_CDROM=	"Unresolved licensing issues"
PERMIT_DISTFILES_FTP=	"Unresolved licensing issues"
d44 2
a45 1
LIB_DEPENDS=	SDL_image::devel/sdl-image
a48 7
.if ${MACHINE_ARCH} == "arm"
LIB_DEPENDS+=	vorbisidec.1::audio/tremor
.else
LIB_DEPENDS+=	vorbis.0,vorbisfile.1::audio/libvorbis
WANTLIB+=	ogg
.endif

a105 2
WRKDIST=	${WRKDIR}/${DISTNAME:S/-source//}

a115 1
.if ${MACHINE_ARCH} == "arm"
a121 8
.else
	@@sed -e "s|@@CC@@|${CC}|g ; s|@@CFLAGS@@|${CFLAGS}|g ; \
		s|@@CFLAGS_TREMOR@@||g ; \
		s|@@LOCALBASE@@|${LOCALBASE}|g ; s|@@PREFIX@@|${PREFIX}|g ; \
		s|@@SOUNDLIB@@|-lvorbisfile -lvorbis -logg|g ; \
		s|@@X11BASE@@|${X11BASE}|g" ${FILESDIR}/build.vars \
		> ${WRKSRC}/build.vars
.endif
d124 1
a124 1
	cd ${WRKBUILD}; ./build.sh uqm
d134 2
@


1.16
log
@- make sure WANTLIB doesn't get passed down to subpackages
- add tremor support and enable it on arm
- pull in fixes for some annoyances from uqm cvs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/09/16 09:51:27 espie Exp $
d14 1
a14 1
VER=			0.4.0
d28 6
a33 6
PKGNAME=		uqm-${VER}p1
PKGNAME-remix1=		uqm-remix1-${VER}p0
PKGNAME-remix2=		uqm-remix2-${VER}p0
PKGNAME-remix3=		uqm-remix3-${VER}p0
PKGNAME-threedomusic=	uqm-threedomusic-${VER}p0
PKGNAME-voice=		uqm-voice-${VER}p0
@


1.15
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.14 2005/06/23 00:50:17 jolan Exp $
d28 6
a33 6
PKGNAME=		uqm-${VER}p0
PKGNAME-remix1=		uqm-remix1-${VER}
PKGNAME-remix2=		uqm-remix2-${VER}
PKGNAME-remix3=		uqm-remix3-${VER}
PKGNAME-threedomusic=	uqm-threedomusic-${VER}
PKGNAME-voice=		uqm-voice-${VER}
a43 1
WANTLIB=		SDL X11 Xext c m ogg pthread usbhid z
d45 10
a54 2
LIB_DEPENDS=	SDL_image::devel/sdl-image \
		vorbis.0,vorbisfile.1::audio/libvorbis
d88 3
d125 8
d134 1
d136 1
d139 1
@


1.14
log
@- update to 0.4.0
- enable on arm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/11/28 22:41:22 espie Exp $
d27 1
a27 1
PKGNAME=		uqm-${VER}
@


1.13
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/10/16 00:28:22 jolan Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	i386 powerpc
d13 1
a13 1
VER=			0.3
d16 4
a19 4
PDIST=			${DISTNAME}.tgz
CDIST=			uqm-${VER}-content.zip
MDIST=			uqm-${VER}-3domusic.zip
VDIST=			uqm-${VER}-voice.zip
d27 1
a27 1
PKGNAME=		uqm-${VER}p0
a37 2
MAINTAINER=	Jolan Luff <jolan@@openbsd.org>

d106 2
a107 1
	${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "vax")
d109 1
a109 1
		${FILESDIR}/config.h > ${WRKSRC}/src/config.h
d112 1
a112 1
		${FILESDIR}/config.h > ${WRKSRC}/src/config.h
@


1.12
log
@dont read past the end of the array, from uqm cvs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/10/01 05:08:22 jolan Exp $
d45 1
@


1.11
log
@add amd64 to lil endian list, not sure if it actually works there
though.  can someone check please?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/08/08 00:27:24 jolan Exp $
d27 1
a27 1
PKGNAME=		uqm-${VER}
d103 1
a103 1
WRKSRC=	${WRKDIR}/${PKGNAME}
@


1.10
log
@add remix3 subpackage, rename 3domusic -> threedomusic
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/03/31 03:42:16 jolan Exp $
d106 2
a107 2
.if (${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "i386" || \
     ${MACHINE_ARCH} == "vax")
@


1.9
log
@sprinkle some PKG_ARCH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/11/12 23:18:26 jolan Exp $
a6 1
COMMENT-3domusic=	"ur-quan masters: 3DO music content"
d9 2
d22 1
d24 1
a24 1
SUPDISTFILES=		${MDIST} ${VDIST} ${RM1DIST} ${RM2DIST}
a27 1
PKGNAME-3domusic=	uqm-3domusic-${VER}
d30 2
d53 1
a53 1
PSEUDO_FLAVORS=	3domusic remix1 remix2 voice
a56 4
.if ${FLAVOR:L:M3domusic}
DISTFILES+=	${MDIST}
MULTI_PACKAGES+=-3domusic
.endif
d65 8
d81 1
a81 1
. if ${SUBPACKAGE} == "-3domusic"
d85 5
a89 1
. if ${SUBPACKAGE} == "-remix1"
d93 1
a93 1
. if ${SUBPACKAGE} == "-remix2"
d95 1
a95 1
RUN_DEPENDS=    ::games/uqm
a130 4
.if ${FLAVOR:L:M3domusic}
	${INSTALL_DATA} ${FULLDISTDIR}/${MDIST} \
		${PREFIX}/share/uqm/content/packages
.endif
d138 8
@


1.8
log
@add remixed music package #2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/10/31 04:09:21 jolan Exp $
d75 1
d79 1
d83 1
d87 1
@


1.7
log
@add remixed music package #1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/10/18 02:44:45 jolan Exp $
d9 1
d20 1
d22 1
a22 1
SUPDISTFILES=		${MDIST} ${VDIST} ${RM1DIST}
d28 1
d50 1
a50 1
PSEUDO_FLAVORS=	3domusic remix1 voice
d62 4
d80 3
d122 4
@


1.6
log
@fix typo that prevented this from actually building on big endian
machines, noticed by pvalchev
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/09/28 19:15:52 jolan Exp $
d8 1
d18 1
d20 1
a20 1
SUPDISTFILES=		${MDIST} ${VDIST}
d25 1
d47 1
a47 1
PSEUDO_FLAVORS=	3domusic voice
d55 4
d70 3
d99 1
a99 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm/content/packages/addons
d109 4
@


1.5
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/09/24 07:57:33 jolan Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	i386 macppc
d76 1
a76 1
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g ; s|@@ENDIAN|define|g" \
@


1.4
log
@Update to 0.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2003/07/25 11:04:30 jolan Exp $
d60 1
a60 1
. if ${SUBPACKAGE} == "-3dmusic"
@


1.3
log
@merge in games/uqmcontent, bump PKGNAME
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.2 2003/05/12 08:23:47 jolan Exp $
a6 1
COMMENT-content=	"ur-quan masters: minimal content"
d10 1
a10 1
VER=			0.2
d12 1
d18 2
d21 1
a21 1
PKGNAME=		uqm-${VER}p0
a22 1
PKGNAME-content=	uqm-content-${VER}
d24 1
d44 1
a44 1
PSEUDO_FLAVORS=	no_3domusic no_voice
d46 3
a48 2
MULTI_PACKAGES=	-content
.if !${FLAVOR:L:Mno_3domusic}
d52 1
a52 1
.if !${FLAVOR:L:Mno_voice}
d59 11
d73 2
a74 2
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g" ${FILESDIR}/config.h-lilendian \
		> ${WRKSRC}/src/config.h
d76 2
a77 2
	@@sed -e "s|@@PREFIX@@|${PREFIX}|g" ${FILESDIR}/config.h-bigendian \
		> ${WRKSRC}/src/config.h
a86 14
pre-install:
	@@mkdir -p ${WRKDIST}/content
.for R in androsyn arilou blackurq chenjesu chmmr druuge human ilwrath \
	melnorme mmrnmhrm mycon orz pkunk shofixti slylandr spathi supox \
	syreen thradd umgah urquan utwig vux yehat zoqfot
	@@mv ${WRKDIR}/${R} ${WRKDIST}/content
	@@mv ${WRKDIR}/${R}.shp ${WRKDIST}/content
.endfor
.for E in comm ipanims lastbat{,.sc2} lbm melee probe{,.sc2} sis{_ship,.dat} \
	slides starcon{.key,.ndx,.txt} version
	@@mv ${WRKDIR}/${E} ${WRKDIST}/content
.endfor
	@@mv ${WRKDIR}/*.con ${WRKDIST}/content

d89 16
a104 7
	${INSTALL_DATA_DIR} ${PREFIX}/share/uqm
	${INSTALL_DATA} ${WRKSRC}/doc/users/manual.txt ${PREFIX}/share/doc/uqm
	${INSTALL_PROGRAM} ${WRKSRC}/uqm ${PREFIX}/bin
	@@cp -R ${WRKDIST}/content/* ${PREFIX}/share/uqm

post-install:
	@@find ${PREFIX}/share/uqm -type f -print0 | xargs -0 chmod 444
@


1.2
log
@update e-mail address, ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/04/11 09:12:52 wilfried Exp $
d4 18
a21 7
COMMENT=	"ur-quan masters: sdl port of star control 2"

DISTNAME=	uqm-0.2-source
EXTRACT_SUFX=	.tgz
PKGNAME=	uqm-0.2
CATEGORIES=	games x11
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=sc2/}
d28 4
a31 4
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
a34 1
RUN_DEPENDS=	:uqmcontent-*:games/uqmcontent
d40 14
d69 15
a83 1
	cd ${WRKSRC}; ./build.sh uqm
d87 1
d90 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d14 1
a14 1
MAINTAINER=	Jolan Luff <jolan@@cryptonomicon.org>
@


1.1.1.1
log
@Import uqm 0.2; submitted by Jolan Luff <jolan@@cryptonomicon.org>

The Ur-Quan Masters is an SDL-based port of the 3DO version of the
popular game Star Control 2.
@
text
@@
