head	1.2;
access;
symbols
	OPENBSD_3_4:1.1.1.1.0.2
	OPENBSD_3_4_BASE:1.1.1.1
	wilfried_20030411:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2003.09.24.07.57.34;	author jolan;	state dead;
branches;
next	1.1;

1.1
date	2003.04.11.09.12.52;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.04.11.09.12.52;	author wilfried;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 0.3.
@
text
@$OpenBSD: patch-src_sc2code_libs_graphics_tfb_draw_c,v 1.1 2003/04/11 09:12:52 wilfried Exp $
--- src/sc2code/libs/graphics/tfb_draw.c.orig	Fri Feb 14 18:17:16 2003
+++ src/sc2code/libs/graphics/tfb_draw.c	Tue Mar  4 01:16:07 2003
@@@@ -197,14 +197,14 @@@@ void
 TFB_DrawScreen_WaitForSignal (void)
 {
 	TFB_DrawCommand DrawCommand;
+	int channel;
 	DrawCommand.Type = TFB_DRAWCOMMANDTYPE_SENDSIGNAL;
-	// We need to lock the mutex before enqueueing the DC to prevent races 
-	LockSignalMutex ();
 	Lock_DCQ (1);
+	channel = FindSignalChannel ();
 	TFB_BatchReset ();
 	TFB_EnqueueDrawCommand(&DrawCommand);
 	Unlock_DCQ();
-	WaitForSignal ();
+	WaitForSignal (channel);
 }
 
 void
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import uqm 0.2; submitted by Jolan Luff <jolan@@cryptonomicon.org>

The Ur-Quan Masters is an SDL-based port of the 3DO version of the
popular game Star Control 2.
@
text
@@
