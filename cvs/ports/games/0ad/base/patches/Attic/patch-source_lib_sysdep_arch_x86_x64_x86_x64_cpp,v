head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.1.1.0.8
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.4
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.2
	OPENBSD_5_6_BASE:1.1.1.1
	bentley_20140720:1.1.1.1
	bentley:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2015.09.21.11.27.08;	author pascal;	state dead;
branches;
next	1.1;
commitid	1mZSW3dkObaCxyiJ;

1.1
date	2014.07.21.01.24.06;	author bentley;	state Exp;
branches
	1.1.1.1;
next	;
commitid	3EsJTGaRFthQb768;

1.1.1.1
date	2014.07.21.01.24.06;	author bentley;	state Exp;
branches;
next	;
commitid	3EsJTGaRFthQb768;


desc
@@


1.2
log
@Update to latest version 0.0.18.  Switch to internal spidermonkey as updating
devel/spidermonkey would cause issues with other ports, and we don't want yet
another version of it in the tree for just one port.

feedback on spidermonkey landry@@, ok bentley "I am a filthy slacker" @@
@
text
@$OpenBSD: patch-source_lib_sysdep_arch_x86_x64_x86_x64_cpp,v 1.1 2014/07/21 01:24:06 bentley Exp $
--- source/lib/sysdep/arch/x86_x64/x86_x64.cpp.orig.port	Tue Dec 27 15:12:31 2011
+++ source/lib/sysdep/arch/x86_x64/x86_x64.cpp	Sun Jul 13 18:58:20 2014
@@@@ -49,10 +49,20 @@@@ namespace x86_x64 {
 #if defined(_MSC_FULL_VER) && _MSC_FULL_VER >= 150030729
 // VC10+ and VC9 SP1: __cpuidex is already available
 #elif GCC_VERSION
+# if defined(__i386__) && defined(__PIC__)
 # define __cpuidex(regsArray, level, index)\
+	__asm__ __volatile__ ("pushl	%%ebx\n" \
+	" cpuid\n"\
+	"mov %%ebx,%1\n" \
+	"popl %%ebx" \
+	: "=a" ((regsArray)[0]), "=r" ((regsArray)[1]), "=c" ((regsArray)[2]), "=d" ((regsArray)[3])\
+	: "0" (level), "2" (index));
+# else
+# define __cpuidex(regsArray, level, index)\
 	__asm__ __volatile__ ("cpuid"\
 	: "=a" ((regsArray)[0]), "=b" ((regsArray)[1]), "=c" ((regsArray)[2]), "=d" ((regsArray)[3])\
 	: "0" (level), "2" (index));
+# endif
 #else
 # error "compiler not supported"
 #endif
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import 0ad-0.0.16.

0 A.D. (pronounced "zero ey-dee") is a free, open-source, cross-platform
real-time strategy game of ancient warfare. In short, it is a
historically-based war/economy game that allows players to relive or
rewrite the history of Western civilizations, focusing on the years
between 500 B.C. and 500 A.D. The project is highly ambitious, involving
state-of-the-art 3D graphics, detailed artwork, sound, and a flexible
and powerful custom-built game engine.

ok pascal@@
@
text
@@
