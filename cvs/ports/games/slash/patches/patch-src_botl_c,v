head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.8
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.6
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.03.27.11.11.01;	author tobiasu;	state Exp;
branches;
next	;
commitid	DjIjGXpBTvCoENa2;


desc
@@


1.1
log
@Fix crashing build on sparc

makedefs: the strict alignment gods demand time_t
fixed format strings that could anger the same gods
ospeed: homegrown termcap.h, sync ospeed symbol size
include string.h for those new machines with 64 bit pointers

Play-tested on sparc sparc64
@
text
@$OpenBSD$
--- src/botl.c.orig	Sat Mar 21 10:22:30 2015
+++ src/botl.c	Sat Mar 21 10:25:35 2015
@@@@ -543,7 +543,7 @@@@ bot2()
 	if (Upolyd)
 		Sprintf(nb = eos(nb), " HD:%d", mons[u.umonnum].mlevel);
 	Sprintf(nb = eos(nb), " Level:%u  Exp:%-1ld(%-1ld)", u.ulevel,u.uexp,newuexp(u.ulevel));
-	Sprintf(nb = eos(nb), "  Wt:%ld/%ld",inv_weight()+weight_cap(),weight_cap());
+	Sprintf(nb = eos(nb), "  Wt:%d/%d",inv_weight()+weight_cap(),weight_cap());
 	if(strcmp(hu_stat[u.uhs], "        ")) {
 		Sprintf(nb = eos(nb), " ");
 		Strcat(newbot2, hu_stat[u.uhs]);
@@@@ -571,7 +571,7 @@@@ bot3()
 	  else	Sprintf(newbot3, "Dlvl:%-2d ", depth(&u.uz));
 #ifdef SCORE_ON_BOTL
 	Sprintf(nb = eos(newbot3),
-		"%c:%-2ld  Score:%d", oc_syms[GOLD_CLASS],
+		"%c:%-2ld  Score:%ld", oc_syms[GOLD_CLASS],
 		u.ugold, botl_score());
 	Sprintf(nb = eos(nb), "  Turn:%ld", moves);
 #else
@
