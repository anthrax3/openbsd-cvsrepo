head	1.18;
access;
symbols
	OPENBSD_6_2:1.18.0.4
	OPENBSD_6_2_BASE:1.18
	OPENBSD_6_1:1.18.0.2
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.17.0.2
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.15.0.4
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.15.0.6
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.13.0.6
	OPENBSD_5_6_BASE:1.13
	OPENBSD_5_5:1.13.0.4
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.2
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.10.0.2
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2;
locks; strict;
comment	@# @;


1.18
date	2016.11.01.13.03.14;	author jsg;	state Exp;
branches;
next	1.17;
commitid	I7969ol4asGZxJd2;

1.17
date	2016.06.05.10.47.25;	author jsg;	state Exp;
branches;
next	1.16;
commitid	ZoPweXPixONuiAxp;

1.16
date	2016.03.17.00.40.54;	author jsg;	state Exp;
branches;
next	1.15;
commitid	VeoIPTvSspQ0SBfW;

1.15
date	2014.11.29.10.10.47;	author jsg;	state Exp;
branches;
next	1.14;
commitid	bn7P8nBlqTT27kAV;

1.14
date	2014.08.17.06.08.05;	author jsg;	state Exp;
branches;
next	1.13;
commitid	dQ1Jdh4IPoP1TZNh;

1.13
date	2013.07.07.02.46.26;	author jsg;	state Exp;
branches;
next	1.12;

1.12
date	2013.01.08.04.11.55;	author jsg;	state Exp;
branches;
next	1.11;

1.11
date	2012.08.04.15.58.37;	author jsg;	state Exp;
branches;
next	1.10;

1.10
date	2012.04.19.07.43.47;	author ratchov;	state Exp;
branches;
next	1.9;

1.9
date	2012.02.17.06.59.41;	author jsg;	state Exp;
branches;
next	1.8;

1.8
date	2011.11.12.12.59.58;	author jsg;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.29.11.48.45;	author jsg;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.17.19.59.51;	author jsg;	state Exp;
branches;
next	1.5;

1.5
date	2010.07.13.21.23.39;	author jsg;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.19.10.23.09;	author jsg;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.03.09.35.31;	author jsg;	state dead;
branches;
next	1.2;

1.2
date	2005.06.30.02.47.49;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2005.04.16.05.54.15;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.18
log
@update to scummvm 1.9.0
@
text
@$OpenBSD: patch-configure,v 1.17 2016/06/05 10:47:25 jsg Exp $
--- configure.orig	Tue Oct 11 08:50:16 2016
+++ configure	Tue Nov  1 19:50:55 2016
@@@@ -1973,22 +1973,6 @@@@ if test "$_use_cxx11" = "yes" ; then
 fi
 echo $_use_cxx11
 
-# By default, we add -pedantic to the CXXFLAGS to catch some potentially
-# non-portable constructs, like use of GNU extensions.
-# However, some platforms use GNU extensions in system header files, so
-# for these we must not use -pedantic.
-case $_host_os in
-android | androidsdl | gamecube | psp | tizen | wii | webos)
-	;;
-*)
-	# ICC does not support pedantic, while GCC and clang do.
-	if test "$have_icc" = no ; then
-		# We *do* want the 'long long' extension.
-		append_var CXXFLAGS "-pedantic -Wno-long-long"
-	fi
-	;;
-esac
-
 # If possible, we want to use -Wglobal-constructors
 # However, not all compilers support that, so check whether the active one does.
 echocheck "whether -Wglobal-constructors work"
@@@@ -3838,18 +3822,16 @@@@ if test "$_flac" = auto ; then
 int main(void) { return FLAC__STREAM_SYNC_LEN >> 30; /* guaranteed to be 0 */ }
 EOF
 	if test "$_vorbis" = yes ; then
-		cc_check $FLAC_CFLAGS $FLAC_LIBS $OGG_CFLAGS $OGG_LIBS \
-			-lFLAC -logg && _flac=yes
+		cc_check `pkg-config --cflags --libs flac ogg` && _flac=yes
 	else
-		cc_check $FLAC_CFLAGS $FLAC_LIBS \
-			-lFLAC && _flac=yes
+		cc_check `pkg-config --cflags --libs flac` && _flac=yes
 	fi
 fi
 if test "$_flac" = yes ; then
 	if test "$_vorbis" = yes ; then
-		append_var LIBS "$FLAC_LIBS $OGG_LIBS -lFLAC -logg"
+		append_var LIBS "`pkg-config --libs flac ogg`"
 	else
-		append_var LIBS "$FLAC_LIBS -lFLAC"
+		append_var LIBS "`pkg-config --libs flac`"
 	fi
 	append_var INCLUDES "$FLAC_CFLAGS"
 fi
@


1.17
log
@update to scummvm 1.8.1
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.16 2016/03/17 00:40:54 jsg Exp $
--- configure.orig	Sun Jun  5 20:09:33 2016
+++ configure	Sun Jun  5 20:11:31 2016
@@@@ -1903,22 +1903,6 @@@@ if test "$_use_cxx11" = "yes" ; then
d27 1
a27 1
@@@@ -3738,18 +3722,16 @@@@ if test "$_flac" = auto ; then
@


1.16
log
@update to scummvm 1.8.0
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.15 2014/11/29 10:10:47 jsg Exp $
--- configure.orig	Wed Mar 16 22:48:06 2016
+++ configure	Wed Mar 16 22:51:54 2016
@@@@ -1862,22 +1862,6 @@@@ if test "$_use_cxx11" = "yes" ; then
d13 1
a13 1
-android | gamecube | psp | tizen | wii | webos)
d27 1
a27 1
@@@@ -3613,18 +3597,16 @@@@ if test "$_flac" = auto ; then
@


1.15
log
@equate powerpc with ppc for alignment checks
from Donovan Watteau
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.14 2014/08/17 06:08:05 jsg Exp $
--- configure.orig	Fri Jul 11 23:10:26 2014
+++ configure	Fri Nov 28 21:51:37 2014
@@@@ -1814,22 +1814,6 @@@@ if test "$_use_cxx11" = "yes" ; then
d19 1
a19 1
-		CXXFLAGS="$CXXFLAGS -pedantic -Wno-long-long"
d27 1
a27 19
@@@@ -2003,7 +1987,7 @@@@ cc_check_clean tmp_find_type_with_size.cpp
 # for the smaller sizes.
 echo_n "Alignment required... "
 case $_host_cpu in
-	i[3-6]86 | amd64 | x86_64 | ppc*)
+	i[3-6]86 | amd64 | x86_64 | powerpc* | ppc*)
 		# Unaligned access should work
 		_need_memalign=no
 		;;
@@@@ -2046,7 +2030,7 @@@@ case $_host_cpu in
 		echo "MIPS"
 		DEFINES="$DEFINES -DMIPS_TARGET"
 		;;
-	ppc*)
+	powerpc* | ppc*)
 		echo "PowerPC"
 		DEFINES="$DEFINES -DPPC_TARGET"
 		;;
@@@@ -3460,18 +3444,16 @@@@ if test "$_flac" = auto ; then
d42 2
a43 2
-		LIBS="$LIBS $FLAC_LIBS $OGG_LIBS -lFLAC -logg"
+		LIBS="$LIBS `pkg-config --libs flac ogg`"
d45 2
a46 2
-		LIBS="$LIBS $FLAC_LIBS -lFLAC"
+		LIBS="$LIBS `pkg-config --libs flac`"
d48 1
a48 1
 	INCLUDES="$INCLUDES $FLAC_CFLAGS"
@


1.14
log
@update to 1.7.0
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.13 2013/07/07 02:46:26 jsg Exp $
--- configure.orig	Tue Jul 22 15:17:11 2014
+++ configure	Tue Jul 22 15:21:25 2014
d27 18
@


1.13
log
@update to 1.6.0
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.12 2013/01/08 04:11:55 jsg Exp $
--- configure.orig	Mon May 27 06:21:47 2013
+++ configure	Sun Jul  7 00:14:14 2013
@@@@ -1762,21 +1762,6 @@@@ if test "$_use_cxx11" = "yes" ; then
d13 1
a13 1
-android | gamecube | psp | wii | webos)
d18 2
a19 1
-		CXXFLAGS="$CXXFLAGS -pedantic"
d27 12
a38 1
@@@@ -3278,9 +3263,9 @@@@ EOF
d43 1
a43 1
+		LIBS="$LIBS `pkg-config --libs flac` -logg"
@


1.12
log
@equate amd64 with x86_64 so alignment checks in configure
will work as intended on amd64.

from Donovan Watteau
@
text
@d1 6
a6 6
$OpenBSD: patch-configure,v 1.11 2012/08/04 15:58:37 jsg Exp $
--- configure.orig	Fri Jul 20 20:52:49 2012
+++ configure	Mon Jan  7 17:43:16 2013
@@@@ -1632,21 +1632,6 @@@@ elif test "$have_icc" = yes ; then
 	add_line_to_config_mk 'CXX_UPDATE_DEP_FLAG = -MMD -MF "$(*D)/$(DEPDIR)/$(*F).d" -MQ "$@@" -MP'
 fi;
d26 1
a26 19
@@@@ -1811,7 +1796,7 @@@@ cc_check_clean tmp_find_type_with_size.cpp
 # for the smaller sizes.
 echo_n "Alignment required... "
 case $_host_cpu in
-	i[3-6]86 | x86_64 | ppc*)
+	i[3-6]86 | x86_64 | amd64 | ppc*)
 		# Unaligned access should work
 		_need_memalign=no
 		;;
@@@@ -1856,7 +1841,7 @@@@ case $_host_cpu in
 		echo "PowerPC"
 		DEFINES="$DEFINES -DPPC_TARGET"
 		;;
-	x86_64)
+	x86_64 | amd64)
 		echo "x86_64"
 		;;
 	*)
@@@@ -3141,9 +3126,9 @@@@ EOF
@


1.11
log
@update to 1.5.0
sndio midi backend now included upstream
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.orig	Tue Jul 31 12:42:27 2012
+++ configure	Tue Jul 31 12:43:45 2012
d26 18
@


1.10
log
@make scummvm use sndio(7) for midi. Now, those who have no hardware midi
synth could use any soft synth to get the music. This decreases the
number of sequencer(4) users as well ;)

ok jsg, dcoppa
@
text
@d1 4
a4 33
$OpenBSD: patch-configure,v 1.9 2012/02/17 06:59:41 jsg Exp $
--- configure.orig	Sun Jan 15 10:08:27 2012
+++ configure	Wed Apr 11 19:02:04 2012
@@@@ -134,6 +134,7 @@@@ _flac=auto
 _mad=auto
 _alsa=auto
 _seq_midi=auto
+_sndio=auto
 _timidity=auto
 _zlib=auto
 _sparkle=auto
@@@@ -879,6 +880,8 @@@@ for ac_option in $@@; do
 	--disable-alsa)           _alsa=no        ;;
 	--enable-seq-midi)        _seq_midi=yes   ;;
 	--disable-seq-midi)       _seq_midi=no    ;;
+	--enable-sndio)           _sndio=yes      ;;
+	--disable-sndio)          _sndio=no       ;;
 	--enable-timidity)        _timidity=yes   ;;
 	--disable-timidity)       _timidity=no    ;;
 	--enable-vorbis)          _vorbis=yes     ;;
@@@@ -937,6 +940,11 @@@@ for ac_option in $@@; do
 		ALSA_CFLAGS="-I$arg/include"
 		ALSA_LIBS="-L$arg/lib"
 		;;
+	--with-sndio-prefix=*)
+		arg=`echo $ac_option | cut -d '=' -f 2`
+		SNDIO_CFLAGS="-I$arg/include"
+		SNDIO_LIBS="-L$arg/lib"
+		;;
 	--with-ogg-prefix=*)
 		arg=`echo $ac_option | cut -d '=' -f 2`
 		OGG_CFLAGS="-I$arg/include"
@@@@ -1613,21 +1621,6 @@@@ elif test "$have_icc" = yes ; then
d13 1
a13 1
-android | gamecube | psp | wii)
d26 1
a26 1
@@@@ -3076,9 +3069,11 @@@@ EOF
a30 1
+		# LIBS="$LIBS $FLAC_LIBS $OGG_LIBS -lFLAC -logg"
a33 1
+		# LIBS="$LIBS $FLAC_LIBS -lFLAC"
a37 25
@@@@ -3205,6 +3200,24 @@@@ if test "$_seq_midi" = auto ; then
 fi
 define_in_config_h_if_yes "$_seq_midi" 'USE_SEQ_MIDI'
 echo "$_seq_midi"
+
+#
+# Check for sndio
+#
+echocheck "sndio"
+if test "$_sndio" = auto ; then
+	cat > $TMPC << EOF
+#include <sndio.h>
+int main(void) { struct sio_par par; sio_init(&par); return 0; }
+EOF
+	cc_check $SNDIO_CFLAGS $SNDIO_LIBS -lsndio && _sndio=yes
+fi
+if test "$_sndio" = yes ; then
+	LIBS="$LIBS $SNDIO_LIBS -lsndio"
+	INCLUDES="$INCLUDES $SNDIO_CFLAGS"
+fi
+define_in_config_h_if_yes "$_sndio" 'USE_SNDIO'
+echo "$_sndio"
 
 #
 # Check for TiMidity(++)
@


1.9
log
@update to 1.4.1 and stop the configure script from adding -pedantic
to CXXFLAGS as this hard errored on the long long in ogg headers
resulting in a binary with no vorbis/flac support.
@
text
@d1 33
a33 4
$OpenBSD: patch-configure,v 1.8 2011/11/12 12:59:58 jsg Exp $
--- configure.orig	Sun Jan 15 20:08:27 2012
+++ configure	Fri Feb 17 13:18:29 2012
@@@@ -1613,21 +1613,6 @@@@ elif test "$have_icc" = yes ; then
d55 1
a55 1
@@@@ -3076,9 +3061,11 @@@@ EOF
d69 25
@


1.8
log
@update to 1.4.0
@
text
@d1 26
a26 4
$OpenBSD: patch-configure,v 1.6 2010/10/17 19:59:51 jsg Exp $
--- configure.orig	Fri Nov  4 05:06:06 2011
+++ configure	Fri Nov 11 15:35:24 2011
@@@@ -3048,9 +3048,11 @@@@ EOF
@


1.7
log
@update to 1.3.0
@
text
@d2 3
a4 3
--- configure.orig	Tue May 24 23:52:12 2011
+++ configure	Sun May 29 11:32:51 2011
@@@@ -2512,9 +2512,11 @@@@ EOF
@


1.6
log
@update to 1.2.0
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2010/07/13 21:23:39 jsg Exp $
--- configure.orig	Thu Oct  7 17:48:52 2010
+++ configure	Sun Oct 17 15:45:59 2010
@@@@ -2278,9 +2278,11 @@@@ EOF
@


1.5
log
@update to 1.1.1
@
text
@d1 5
a5 4
$OpenBSD: patch-configure,v 1.4 2008/10/19 10:23:09 jsg Exp $
--- configure.orig	Thu Apr  1 00:51:54 2010
+++ configure	Mon Jul 12 21:58:22 2010
@@@@ -1949,9 +1949,11 @@@@ fi
a6 1
 	_def_flac='#define USE_FLAC'
d17 1
a17 1
 else
@


1.4
log
@Update to 0.12.0
With a fix to link against libogg for flac from sthen@@
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Mon Sep 15 05:08:08 2008
+++ configure	Mon Sep 15 05:07:48 2008
@@@@ -1417,9 +1417,11 @@@@ fi
@


1.3
log
@Update to 0.8.0
@
text
@d1 17
a17 91
$OpenBSD: patch-configure,v 1.2 2005/06/30 02:47:49 jolan Exp $
--- configure.orig	Fri Jan  7 08:14:07 2005
+++ configure	Wed Jun 29 20:50:35 2005
@@@@ -15,6 +15,7 @@@@ CXXFLAGS="$CXXFLAGS $CPPFLAGS"
 
 # default lib behaviour yes/no/auto
 _vorbis=auto
+_tremor=auto
 _flac=auto
 _mad=auto
 _alsa=auto
@@@@ -280,6 +281,9 @@@@ Optional Libraries:
   --with-vorbis-prefix=DIR Prefix where libvorbis is installed (optional)
   --disable-vorbis         disable Ogg Vorbis support [autodetect]
 
+  --with-tremor-prefix=DIR Prefix where tremor is installed (optional)
+  --disable-tremor          disable tremor support [autodetect]
+
   --with-mad-prefix=DIR    Prefix where libmad is installed (optional)
   --disable-mad            disable libmad (MP3) support [autodetect]
   
@@@@ -326,6 +330,8 @@@@ for ac_option in $@@; do
       --disable-alsa)		_alsa=no	;;
       --enable-vorbis)		_vorbis=yes	;;
       --disable-vorbis)		_vorbis=no	;;
+      --enable-tremor)          _tremor=yes     ;;
+      --disable-tremor)         _tremor=no      ;;
       --enable-flac)		_flac=yes	;;
       --disable-flac)		_flac=no	;;
       --enable-mad)		_mad=yes	;;
@@@@ -358,6 +364,11 @@@@ for ac_option in $@@; do
 	VORBIS_CFLAGS="-I$_prefix/include"
 	VORBIS_LIBS="-L$_prefix/lib"
 	;;
+      --with-tremor-prefix=*)
+	_prefix=`echo $ac_option | cut -d '=' -f 2`
+	TREMOR_CFLAGS="-I$_prefix/include"
+	TREMOR_LIBS="-L$_prefix/lib"
+	;;
       --with-flac-prefix=*)
 	_prefix=`echo $ac_option | cut -d '=' -f 2`
 	FLAC_CFLAGS="-I$_prefix/include"
@@@@ -822,6 +833,31 @@@@ else
 fi
 echo "$_vorbis"
 
+#
+# Check for Tremor
+#
+echocheck "Tremor"
+if test "$_tremor" = auto ; then
+  _tremor=no
+  cat > $TMPC << EOF
+#include <tremor/ivorbiscodec.h>
+int main(void) { vorbis_packet_blocksize(0,0); return 0; }
+EOF
+cc_check $LDFLAGS $CXXFLAGS $TREMOR_CFLAGS $TREMOR_LIBS -lvorbisidec && \
+  _tremor=yes
+fi
+if test "$_tremor" = yes && test "$_vorbis" = no; then
+  _def_tremor='#define USE_TREMOR'
+  LIBS="$LIBS $TREMOR_LIBS -lvorbisidec"
+  INCLUDES="$INCLUDES $TREMOR_CFLAGS"
+else
+  if test "$_vorbis" = yes; then
+    _tremor="no (Ogg Vorbis/Tremor support is mutually exclusive)"
+  fi
+  _def_tremor='#undef USE_TREMOR'
+fi
+echo "$_tremor"
+
 echocheck "FLAC >= 1.0.1"
 if test "$_flac" = auto ; then
   _flac=no
@@@@ -1072,6 +1108,7 @@@@ typedef signed $type_4_byte int32;
 
 /* Libs */
 $_def_vorbis
+$_def_tremor
 $_def_flac
 $_def_mad
 $_def_alsa
@@@@ -1090,7 +1127,7 @@@@ cat > config.mak << EOF
 # -------- Generated by configure -----------
 
 CXX := $CXX
-CXXFLAGS += $CXXFLAGS
+CXXFLAGS := $CXXFLAGS
 LIBS += $LIBS
 RANLIB := $_ranlib
 INSTALL := $_install
@


1.2
log
@flesh out scummvm's tremor support and enable it on arm

ok jsg@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.1 2005/04/16 05:54:15 jsg Exp $
@


1.1
log
@Update to 0.7.1
@
text
@d1 83
a83 4
$OpenBSD$
--- configure.orig	Thu Apr 14 16:53:48 2005
+++ configure	Thu Apr 14 16:53:51 2005
@@@@ -1090,7 +1090,7 @@@@ cat > config.mak << EOF
@

