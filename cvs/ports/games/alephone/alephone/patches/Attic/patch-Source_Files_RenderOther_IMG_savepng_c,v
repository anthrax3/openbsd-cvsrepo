head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.11.16.15.10.55;	author phessler;	state dead;
branches;
next	1.1;

1.1
date	2011.07.08.20.38.01;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to alephone 1.0!

OK ajacoutot@@

while here, sneak in a fix so the internal version string also says "1.0"
@
text
@$OpenBSD: patch-Source_Files_RenderOther_IMG_savepng_c,v 1.1 2011/07/08 20:38:01 naddy Exp $

Fix build with png-1.5.

--- Source_Files/RenderOther/IMG_savepng.c.orig	Tue Jul  5 16:45:04 2011
+++ Source_Files/RenderOther/IMG_savepng.c	Tue Jul  5 16:45:58 2011
@@@@ -29,6 +29,7 @@@@
 #include <SDL/SDL.h>
 #include <SDL/SDL_byteorder.h>
 #include <png.h>
+#include <zlib.h>
 #include "IMG_savepng.h"
 
 int IMG_SavePNG(const char *file, SDL_Surface *surf,int compression, struct IMG_PNG_text* text, int num_text){
@@@@ -85,7 +86,7 @@@@ int IMG_SavePNG_RW(SDL_RWops *src, SDL_Surface *surf,i
 		goto savedone;
 	}
 	/* setup custom writer functions */
-	png_set_write_fn(png_ptr,(voidp)src,png_write_data,NULL);
+	png_set_write_fn(png_ptr,src,png_write_data,NULL);
 
 	if (setjmp(png_jmpbuf(png_ptr))){
 		SDL_SetError("Unknown error writing PNG");
@


1.1
log
@Fix build with png-1.5.
All fixes by yours truly.
@
text
@d1 1
a1 1
$OpenBSD$
@

