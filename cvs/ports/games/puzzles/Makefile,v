head	1.11;
access;
symbols
	OPENBSD_6_1:1.11.0.6
	OPENBSD_6_1_BASE:1.11
	OPENBSD_6_0:1.11.0.4
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.10.0.4
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.6
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.4
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.6.0.4
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	landry_20120328:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2015.11.22.19.34.00;	author landry;	state Exp;
branches;
next	1.10;
commitid	xDM8axH6ibrj8nwO;

1.10
date	2015.04.05.15.51.49;	author landry;	state Exp;
branches;
next	1.9;
commitid	g2Qazy7hmDFE74FE;

1.9
date	2015.03.27.08.41.06;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	bGtJfGn7cri3zP6L;

1.8
date	2014.12.06.23.05.11;	author landry;	state Exp;
branches;
next	1.7;
commitid	cqeUG4zdYxHwgpII;

1.7
date	2013.03.11.11.07.40;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2012.06.15.08.32.15;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2012.05.24.08.23.02;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2012.04.08.20.54.34;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2012.04.02.10.06.13;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.03.28.13.03.28;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.03.28.12.53.53;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.03.28.12.53.53;	author landry;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Update to a newer git snapshot, adds a new 'palisade' puzzle.
@
text
@# $OpenBSD: Makefile,v 1.10 2015/04/05 15:51:49 landry Exp $

COMMENT =	collection of puzzles games

DISTNAME =	puzzles-20151117
CATEGORIES =	games

MASTER_SITES =	http://rhaalovely.net/stuff/
HOMEPAGE =	http://www.chiark.greenend.org.uk/~sgtatham/puzzles/

#gitweb generates tarballs on the fly with varying timestamps
GIT_COMMIT =	2acd8baae8e411fae3235a5ab5c25b7523e55132
GIT_COMMIT_SHORT = 2acd8ba
GITWEB_URL =	http://tartarus.org/~simon-git/gitweb/

# MIT
PERMIT_PACKAGE_CDROM=	Yes

WRKDIST =	${WRKDIR}/puzzles
USE_GMAKE =	yes
MAKE_FILE =	Makefile.gtk
MODULES =	devel/gettext
LIB_DEPENDS =	x11/gtk+2
RUN_DEPENDS =	devel/desktop-file-utils devel/xdg-utils \
		x11/gtk+3,-guic
MAKE_FLAGS =	CC="${CC}"

WANTLIB += atk-1.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gobject-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB += Xrandr Xrender c cairo fontconfig freetype gdk-x11-2.0
WANTLIB += gtk-x11-2.0 m pthread z

# needs textproc/halibut, convert from ImageMagick, and a running X
dist:
	ftp -o - "${GITWEB_URL}?p=puzzles.git;a=snapshot;h=${GIT_COMMIT};sf=tgz" | \
	tar -C /tmp -xzf - && \
		cd /tmp/puzzles-${GIT_COMMIT_SHORT} && \
		perl mkfiles.pl && \
		patch -i ${PATCHDIR}/patch-Makefile_gtk && \
		${GMAKE} -f Makefile.gtk && \
		${GMAKE} -C icons pngicons && \
		sh makedist.sh
	mv /tmp/puzzles.tar.gz /usr/ports/distfiles/${DISTNAME}.tar.gz
	rm -Rf /tmp/puzzles-${GIT_COMMIT_SHORT}

.include <bsd.port.mk>
@


1.10
log
@Package a new tarball of Simon Thatham's puzzles collection, adding
Flood and Tracks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/03/27 08:41:06 ajacoutot Exp $
d5 1
a5 1
DISTNAME =	puzzles-20150325
d12 2
a13 2
GIT_COMMIT =	10460d1bc7dab94e84c5fbbde221c3d20f9e263b
GIT_COMMIT_SHORT = 10460d1
@


1.9
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/12/06 23:05:11 landry Exp $
d5 1
a5 1
DISTNAME =	puzzles-20141206
a6 1
REVISION =	0
d12 2
a13 2
GIT_COMMIT =	c2f111dd556320cfbf28f1aa6bc640a709d41710
GIT_COMMIT_SHORT = c2f111d
@


1.8
log
@Update to puzzles 20141206.

- Adds two new puzzles, unruly and undead
- Add a convenience dist target to fetch a tarball from gitweb and
  repackage it, with Makefile.gtk and icons properly generated from the
source. Selfhost the resulting distfiles.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/11 11:07:40 espie Exp $
d7 1
d26 1
a26 1
		x11/gtk+2,-guic
@


1.7
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/06/15 08:32:15 ajacoutot Exp $
d5 1
a5 3
DISTNAME =	puzzles-r9534
PKGNAME =	${DISTNAME:S/-r/-/}
REVISION =	0
d8 1
d10 5
a14 2
# distfile cksum changes daily
MASTER_SITES =	http://spacehopper.org/mirrors/
d19 1
d21 1
d30 16
a45 4
WANTLIB += GL X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB += Xrandr Xrender c cairo expat fontconfig freetype gdk-x11-2.0
WANTLIB += gtk-x11-2.0 m pixman-1 png pthread pthread-stubs
WANTLIB += xcb xcb-render xcb-shm z
@


1.6
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/05/24 08:23:02 landry Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.5
log
@Update to puzzles r9534, fix WANTLIB and regen PLIST while here.
Thx sthen@@ for distfile mirroring..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/04/08 20:54:34 landry Exp $
d7 1
@


1.4
log
@Minor tweak: use perl magic with ucfirst to capitalize first letter in
Desktop file name/comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/04/02 10:06:13 sthen Exp $
d5 1
a5 1
DISTNAME =	puzzles-r9411
a6 1
REVISION =	2
d26 2
a27 2
WANTLIB += atk-1.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 gthread-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.3
log
@Allow puzzle's online help to work with the puzzles with a space in the name.
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/03/28 13:03:28 ajacoutot Exp $
d7 1
a7 1
REVISION =	1
@


1.2
log
@Missing dependency on gtk-update-icon-cache.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/03/28 12:53:53 landry Exp $
d7 1
a7 1
REVISION =	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/03/08 12:13:01 ajacoutot Exp $
d7 1
d23 2
a24 1
RUN_DEPENDS =	devel/desktop-file-utils devel/xdg-utils
@


1.1.1.1
log
@Import puzzles svn rev9411:

WWW: http://www.chiark.greenend.org.uk/~sgtatham/puzzles/

This is is a collection of 34 well-known puzzle games, all built around a
common portable framework by Simon Tatham. They're perfect to slack
during a compilation. Local improvements :
- add 'online help' menu item opening help in web browser through xdg-open
- install icons and generate .desktop files for nice desktop integration

ok sthen@@
@
text
@@
