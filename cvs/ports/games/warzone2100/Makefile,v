head	1.33;
access;
symbols
	OPENBSD_6_1:1.31.0.2
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.24.0.4
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.22.0.4
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.22.0.2
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.20.0.2
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.18.0.4
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	simon_20070722:1.1.1.1
	simon:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2017.05.27.08.18.46;	author espie;	state Exp;
branches;
next	1.32;
commitid	Y02R7XkJg5y7moRD;

1.32
date	2017.05.24.13.06.47;	author kirby;	state Exp;
branches;
next	1.31;
commitid	Mh8Vm3Cc0TsTE11c;

1.31
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.30;
commitid	l6KSNN1DfB6ABkhu;

1.30
date	2016.12.19.12.29.01;	author kirby;	state Exp;
branches;
next	1.29;
commitid	fcjo2oTOoqZmdyIk;

1.29
date	2016.08.02.10.19.55;	author kirby;	state Exp;
branches;
next	1.28;
commitid	TtWtPfLP2O1jXpzS;

1.28
date	2016.08.01.10.25.02;	author kirby;	state Exp;
branches;
next	1.27;
commitid	XGO7dqsqdVI0bEKu;

1.27
date	2016.04.19.11.20.42;	author kirby;	state Exp;
branches;
next	1.26;
commitid	iHbdX14URPXdM47S;

1.26
date	2016.03.01.19.33.54;	author kirby;	state Exp;
branches;
next	1.25;
commitid	UbjuvOJh4fNi5tuK;

1.25
date	2016.03.01.07.29.32;	author kirby;	state Exp;
branches;
next	1.24;
commitid	t4iIvYE1lZ0QMl3F;

1.24
date	2015.01.15.21.03.22;	author kirby;	state Exp;
branches;
next	1.23;
commitid	7pTHzBYJh9z4dvSw;

1.23
date	2014.03.09.22.35.51;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2013.06.04.18.41.45;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2013.03.11.11.07.41;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2013.01.30.01.40.49;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2013.01.21.16.37.41;	author pascal;	state Exp;
branches;
next	1.18;

1.18
date	2011.11.07.13.55.44;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.06.21.12.37;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2011.07.07.21.16.44;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2011.04.28.18.38.04;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2011.03.26.10.05.24;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.03.13.10.26.26;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2011.01.13.09.36.35;	author dcoppa;	state Exp;
branches;
next	1.11;

1.11
date	2011.01.12.14.17.46;	author dcoppa;	state Exp;
branches;
next	1.10;

1.10
date	2010.12.05.16.14.16;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.22.10.16.08;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.16.11.23.28;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.08.18.14.21;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.10.24.21.19.02;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.12.22.16.28.01;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.12.16.21.13.24;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2009.08.10.06.31.43;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2008.09.28.07.34.43;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.22.14.57.52;	author simon;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.22.14.57.52;	author simon;	state Exp;
branches;
next	;


desc
@@


1.33
log
@WANT_CXX, patches inspired by freebsd.

horrible hack to prevent build failure if incompatible ports' glm is
installed...
@
text
@# $OpenBSD: Makefile,v 1.32 2017/05/24 13:06:47 kirby Exp $

ONLY_FOR_ARCHS=	amd64 i386

COMMENT=	3D realtime strategy on a future earth

DISTNAME=	warzone2100-3.2.3
CATEGORIES=	games
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=warzone2100/}
EXTRACT_SUFX=	.tar.xz

HOMEPAGE=	http://wz2100.net/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += GL GLEW GLU Qt5Core Qt5Gui Qt5Script Qt5Widgets SDL2 X11
WANTLIB += Xrandr c crypto fontconfig freetype fribidi harfbuzz iconv
WANTLIB += intl m ogg openal physfs png pthread theora vorbis
WANTLIB += vorbisfile z ${LIBECXX}

MODULES=	x11/qt5
WANT_CXX =	base gcc

LIB_DEPENDS=	audio/libogg \
		audio/libvorbis \
		audio/openal>=20110627 \
		devel/fribidi \
		devel/physfs \
		devel/sdl2 \
		graphics/glew \
		graphics/png \
		multimedia/libtheora \
		x11/qt5/qtscript

BUILD_DEPENDS=	archivers/unzip \
		archivers/zip \
		textproc/asciidoc
RUN_DEPENDS=	devel/desktop-file-utils

SEPARATE_BUILD=	Yes
USE_GMAKE=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ARGS+= --with-distributor="OpenBSD"
CONFIGURE_ENV+=	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
		ac_cv_path_MOC4="${LOCALBASE}/bin/moc4" \
		ac_cv_path_UIC4="${LOCALBASE}/bin/uic4"

# XXX this is a horrible hack to make sure we get to our glm
# which is 100% incompatible with ports glm
MAKE_FLAGS += "DEFS=-DHAVE_CONFIG_H -I${WRKSRC}/includefirst"

pre-configure:
	mkdir -p ${WRKSRC}/includefirst
	ln -sf ${WRKSRC}/3rdparty/glm ${WRKSRC}/includefirst/glm
.for _prog in git svn svnversion
	@@cd ${WRKDIR}/bin && ln -sf /usr/bin/true ${_prog}
.endfor
	@@cd ${WRKDIR}/bin && ln -sf ${LOCALBASE}/bin/gflex flex

.include <bsd.port.mk>
@


1.32
log
@Updateb to warzone2100-3.2.3.
Remove patch committed upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/12/25 14:34:39 zhuk Exp $
d20 1
a20 1
WANTLIB += vorbisfile z
d22 2
a23 3
MODULES=	x11/qt5 gcc4
MODGCC4_ARCHS =	*
MODGCC4_LANGS +=c++
d51 4
d56 2
@


1.31
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/12/19 12:29:01 kirby Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.2.2
a10 1
REVISION=	0
@


1.30
log
@Bugfix update to warzone2100-3.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/08/02 10:19:55 kirby Exp $
d11 1
d35 3
a37 1
		multimedia/libtheora
@


1.29
log
@bugfix update to warzone2100-3.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/08/01 10:25:02 kirby Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.2.1
d18 3
a20 2
WANTLIB += Xrandr c crypto fontconfig freetype fribidi iconv intl m
WANTLIB += ogg openal physfs png pthread theora vorbis vorbisfile z
@


1.28
log
@update to warzone2100-3.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/04/19 11:20:42 kirby Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.2.0
@


1.27
log
@bugfix update to warzone2100-3.1.5
remove gettext module and enable SEPARATE_BUILD while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/03/01 19:33:54 kirby Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.1.5
d17 7
a23 5
WANTLIB += GL GLEW GLU QtNetwork QtScript SDL X11 Xrandr c fontconfig
WANTLIB += freetype fribidi iconv intl m ogg openal physfs png pthread
WANTLIB += stdc++ theora vorbis vorbisfile z

MODULES=	x11/qt4
d30 1
a30 1
		devel/sdl \
@


1.26
log
@add missing BUILD_DEPENDS on textproc/asciidoc
spotted by nigel@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/03/01 07:29:32 kirby Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.1.3
d18 4
a21 2
WANTLIB += freetype fribidi m ogg openal physfs png pthread stdc++
WANTLIB += theora vorbis vorbisfile z
a22 2
MODULES=	devel/gettext \
		x11/qt4
d37 1
a43 1
		PKG_CONFIG_LIBDIR="/usr/lib/pkgconfig:${X11BASE}/lib/pkgconfig:${LOCALBASE}/lib/pkgconfig:${LOCALBASE}/lib/qt4/pkgconfig" \
@


1.25
log
@update to warzone2100-3.1.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/01/15 21:03:22 kirby Exp $
d33 2
a34 1
		archivers/zip
@


1.24
log
@bugfix update to warzone2100-3.1.2
changelog: https://github.com/Warzone2100/warzone2100/blob/master/ChangeLog
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/03/09 22:35:51 brad Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.1.2
@


1.23
log
@Update to Warzone 2100 3.1.1.

ok pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/06/04 18:41:45 naddy Exp $
d7 1
a7 1
DISTNAME=	warzone2100-3.1.1
d38 1
a38 1
AUTOCONF_VERSION= 2.68
@


1.22
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/03/11 11:07:41 espie Exp $
d7 1
a7 2
DISTNAME=	warzone2100-3.1.0
REVISION=	0
d17 3
a19 3
WANTLIB += GL GLEW GLU QtNetwork QtScript SDL X11 Xrandr c expat
WANTLIB += fontconfig freetype fribidi m ogg openal physfs png
WANTLIB += pthread stdc++ theora vorbis vorbisfile z
d33 1
a33 3
		archivers/zip \
		devel/bison \
		devel/flex
d38 1
a38 1
AUTOCONF_VERSION= 2.69
a42 2
		YACC="bison -y" \
		ac_cv_prog_LEX="flex" \
@


1.21
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/01/30 01:40:49 brad Exp $
d43 1
a43 2
CONFIGURE_ENV+=	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include/libpng \
		    -I${LOCALBASE}/include" \
@


1.20
log
@- Uncomment bits of code using dprintf() now that OpenBSD has dprintf()
  within libc
- Slightly better way of dealing with the lack of a sys/ucontext.h header

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/01/21 16:37:41 pascal Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.19
log
@Update to Warzone2100 3.1.0.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/11/07 13:55:44 sthen Exp $
d8 1
@


1.18
log
@Don't pick up hidden dependency on Motif. From Pascal Stumpf via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/06 21:12:37 dcoppa Exp $
d7 1
a7 1
DISTNAME=	warzone2100-2.3.9
d10 1
d20 3
a22 2
WANTLIB=	GL GLC GLU SDL X11 c m physfs ogg openal png popt \
		pthread sndio stdc++ theora vorbis vorbisfile z
d24 2
a25 1
MODULES=	devel/gettext
d29 1
a30 1
		devel/popt \
d32 1
a33 1
		graphics/quesoglc \
d43 2
a44 3
AUTOCONF_VERSION= 2.65
CONFIGURE_ARGS+=--disable-motif \
		--with-distributor="OpenBSD"
d48 1
d50 3
a52 1
		ac_cv_prog_LEX="gflex"
d54 1
a54 1
pre-build:
d58 1
@


1.17
log
@Update to warzone2100-2.3.9

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/07/07 21:16:44 jasper Exp $
d41 2
a42 1
CONFIGURE_ARGS+= --with-distributor="OpenBSD"
@


1.16
log
@- update to 2.3.8
- enable on amd64, after the openal update things have improved a tad

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/04/28 18:38:04 jasper Exp $
d7 1
a7 1
DISTNAME=	warzone2100-2.3.8
@


1.15
log
@- we have nearbyint() in libm now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/03/26 10:05:24 sthen Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	i386
d7 1
a7 2
DISTNAME=	warzone2100-2.3.7
REVISION=	0
d18 3
a20 3
WANTLIB=	GL GLC GLU SDL X11 c m physfs ogg openal>=1 png \
		popt pthread sndio stdc++ theora vorbis vorbisfile \
		z
d25 1
a25 1
		audio/openal>=0.0.8p7 \
@


1.14
log
@Bump ports which should be using newer autoconf to 2.65;
config.h files checked.  From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/03/13 10:26:26 dcoppa Exp $
d8 1
@


1.13
log
@Bugfix update to warzone2100-2.3.7.
From Brad. Tested by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/01/13 09:36:35 dcoppa Exp $
d40 1
a40 2
# Should be 2.65
AUTOCONF_VERSION= 2.64
@


1.12
log
@Revert previous commit: warzone2100 is still too flakey on amd64 atm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/01/12 14:17:46 dcoppa Exp $
d7 1
a7 2
DISTNAME=	warzone2100-2.3.6
REVISION=	1
d40 2
a41 1
AUTOCONF_VERSION= 2.61
@


1.11
log
@Add amd64 to the list of supported ARCHS
Rivo Nurges <rix at estpak dot ee> says it works well.

Ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/12/05 16:14:16 dcoppa Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	i386 amd64
d8 1
a8 1
REVISION=	0
@


1.10
log
@Update to warzone2100-2.3.6

From Brad, with tweaks by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/22 10:16:08 espie Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	i386
d8 1
@


1.9
log
@remaining WANTLIB go .>=   to >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/16 11:23:28 espie Exp $
d3 1
a3 1
COMMENT=	3d realtime strategy on a future earth
d5 3
a7 2
DISTNAME=	warzone2100-2.0.7
REVISION =	2
d9 1
a9 1
EXTRACT_SUFX=	.tar.bz2
d13 1
a13 3
MAINTAINER=	Simon Bertrang <simon@@openbsd.org>

# GPL
d18 3
a20 3
WANTLIB=	GL GLU SDL X11 Xext c m ogg pthread pthread-stubs \
		sndio usbhid xcb z SDL_net>=1 physfs>=1 openal>=1 \
		vorbis>=5 vorbisfile>=4 mad>=2 jpeg>=62 png>=5
d22 4
a25 3
MASTER_SITES=	http://download.gna.org/warzone/releases/2.0/

LIB_DEPENDS=	devel/sdl-net \
d27 9
a35 9
		audio/openal \
		audio/libvorbis \
		audio/libmad \
		graphics/jpeg \
		graphics/png

BUILD_DEPENDS=	devel/bison \
		archivers/unzip \
		archivers/zip
d39 13
a51 8

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS+=${CONFIGURE_SHARED}
CONFIGURE_ENV+=	CPPFLAGS='-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng \
		    -I${X11BASE}/include' \
		LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib' \
		LIBS='-pthread' \
		YACC='bison -y'
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/08 18:14:21 espie Exp $
d20 2
a21 2
		sndio usbhid xcb z SDL_net.>=1 physfs.>=1 openal.>=1 \
		vorbis.>=5 vorbisfile.>=4 mad.>=2 jpeg.>=62 png.>=5
@


1.7
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/10/24 21:19:02 ajacoutot Exp $
d25 12
a36 12
LIB_DEPENDS=	::devel/sdl-net \
		::devel/physfs \
		::audio/openal \
		::audio/libvorbis \
		::audio/libmad \
		::graphics/jpeg \
		::graphics/png

BUILD_DEPENDS=	::devel/bison \
		::archivers/unzip \
		::archivers/zip
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
@


1.6
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/12/22 16:28:01 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d20 2
a21 1
		sndio usbhid xcb z
d25 7
a31 7
LIB_DEPENDS=	SDL_net.>=1::devel/sdl-net \
		physfs.>=1::devel/physfs \
		openal.>=1::audio/openal \
		vorbis.>=5,vorbisfile.>=4::audio/libvorbis \
		mad.>=2::audio/libmad \
		jpeg.>=62::graphics/jpeg \
		png.>=5::graphics/png
@


1.5
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/12/16 21:13:24 naddy Exp $
a37 1
USE_X11=	Yes
@


1.4
log
@openal now pulls in libsndio rather than libossaudio
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/08/10 06:31:43 kili Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.3
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/09/28 07:34:43 sturm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d19 2
a20 2
WANTLIB=	GL GLU SDL X11 Xext c m ogg ossaudio pthread pthread-stubs \
		usbhid xcb z
d45 1
a45 1
		LIBS='-pthread -lossaudio' \
@


1.2
log
@missing BUILD_DEPENDS on unzip
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/22 14:57:52 simon Exp $
d6 1
d19 2
a20 1
WANTLIB=	GL GLU SDL X11 Xext c m ogg ossaudio pthread usbhid z
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d31 1
@


1.1.1.1
log
@import warzone2100

Warzone 2100 was an innovative 3D real-time strategy game back in 1999,
and most will agree it didn't enjoy the commercial success it could
have had.  The game's source code was liberated on December 6th,
2004, under a GPL license.  Soon after that, the Warzone 2100 ReDev
project was formed to take care of its future.

feedback, help & ok ajacoutot@@
@
text
@@
