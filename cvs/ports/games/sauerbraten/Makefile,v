head	1.4;
access;
symbols
	OPENBSD_6_1:1.3.0.6
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.4
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.1.1.0.8
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.6
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.4
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	jsg_20130429:1.1.1.1
	jsg:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2017.04.10.11.46.19;	author sthen;	state Exp;
branches;
next	1.3;
commitid	BLsh88fJB8thZTwY;

1.3
date	2015.11.02.11.56.54;	author espie;	state Exp;
branches;
next	1.2;
commitid	ox8NBCUwS6UB4UwE;

1.2
date	2015.04.11.13.49.14;	author jsg;	state Exp;
branches;
next	1.1;
commitid	vllcndKeon610C6y;

1.1
date	2013.04.29.01.56.38;	author jsg;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.29.01.56.38;	author jsg;	state Exp;
branches;
next	;


desc
@@


1.4
log
@use LIBCXX
@
text
@# $OpenBSD: Makefile,v 1.3 2015/11/02 11:56:54 espie Exp $

ONLY_FOR_ARCHS=	i386 amd64

COMMENT-main=	sauerbraten client
COMMENT-data=	sauerbraten data
CATEGORIES=	games x11
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=sauerbraten/}

HOMEPAGE=	http://sauerbraten.org/
MAINTAINER=	Jonathan Gray <jsg@@openbsd.org>

MULTI_PACKAGES=	-main -data

N=		sauerbraten
V=		20130203
REVISION=	1
PKGNAME=	${N}-${V}
PKGNAME-main=	${N}-${V}
PKGNAME-data=	${N}-data-${V}
DISTNAME=	${N}_2013_02_03_collect_edition_linux
EXTRACT_SUFX=	.tar.bz2

PKG_ARCH-data=	*

# zlib (code) + no modification (data)
PERMIT_PACKAGE_CDROM=	no modify
PERMIT_PACKAGE_FTP=	no modify
PERMIT_DISTFILES_FTP=	Yes

WRKDIST=		${WRKDIR}/${N}/src
USE_GMAKE=		Yes
MAKE_ENV+=              CXX="${CXX}" CXXFLAGS="${CXXFLAGS}"
NO_TEST=		Yes

RUN_DEPENDS-main +=	${BASE_PKGPATH},-data

LIB_DEPENDS-main=	devel/sdl-mixer \
			devel/sdl-image \
			net/enet
WANTLIB-main=		GL X11 SDL SDL_image SDL_mixer c enet m pthread ${LIBCXX} z

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/sauer_client ${PREFIX}/libexec
	${INSTALL_PROGRAM} ${WRKSRC}/sauer_server ${PREFIX}/libexec
	${SUBST_CMD} -m 555 -c ${FILESDIR}/sauerbraten.sh ${WRKSRC}/sauerbraten.sh
	${INSTALL_SCRIPT} ${WRKSRC}/sauerbraten.sh ${PREFIX}/bin/sauerbraten
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/${N}
	cp -R ${WRKDIR}/${N}/docs/* ${PREFIX}/share/doc/${N}/
	@@perl -pi -e s,docs/,, ${WRKDIR}/${N}/README.html
	${INSTALL_DATA} ${WRKDIR}/${N}/README.html ${PREFIX}/share/doc/${N}/
	${INSTALL_DATA_DIR} ${PREFIX}/share/${N}
	cp -R ${WRKDIR}/${N}/packages ${PREFIX}/share/${N}
	cp -R ${WRKDIR}/${N}/data ${PREFIX}/share/${N}

.include <bsd.port.mk>
@


1.3
log
@a few minor pkg_subst fixes, for the coming patch (disallow -c without -m
outside of WRKDIR)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/04/11 13:49:14 jsg Exp $
d41 1
a41 1
WANTLIB-main=		GL X11 SDL SDL_image SDL_mixer c enet m pthread stdc++ z
@


1.2
log
@enet_address_set_host() is not thread safe on OpenBSD
due to lack of gethostbyname_r().

Retain the resolver mutex when calling it to avoid
crashes in the multiplayer server browser.

Remove a now uneeded patch while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/04/29 01:56:38 jsg Exp $
d46 1
a46 1
	${SUBST_CMD} -c ${FILESDIR}/sauerbraten.sh ${WRKSRC}/sauerbraten.sh
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d17 1
a17 1
REVISION=	0
@


1.1.1.1
log
@import Cube 2: Sauerbraten Collect Edition

Cube 2: Sauerbraten is a free multiplayer/singleplayer first person
shooter, built as a major redesign of the Cube FPS.

Much like the original Cube, the aim of this game is not necessarily
to produce the most features & eyecandy possible, but rather to allow
map/geometry editing to be done dynamically in-game, to create fun
gameplay and an elegant engine. 

help from and ok ajacoutot@@, ok rfreeman@@
@
text
@@
