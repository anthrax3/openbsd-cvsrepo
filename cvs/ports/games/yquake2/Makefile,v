head	1.8;
access;
symbols
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.4.0.2
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	bmercer_20160117:1.1.1.1
	bmercer:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2017.05.27.19.57.06;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	H08QxD8pqoInz6Rz;

1.7
date	2017.05.27.13.55.58;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	SykG6k6P85X3Gc2i;

1.6
date	2017.01.10.23.45.49;	author kirby;	state Exp;
branches;
next	1.5;
commitid	2iUki3fAWKbVcDrH;

1.5
date	2016.12.05.21.03.33;	author awolk;	state Exp;
branches;
next	1.4;
commitid	zjoA385uBhhUF4Cq;

1.4
date	2016.06.28.20.50.22;	author awolk;	state Exp;
branches;
next	1.3;
commitid	OCjzSGt5M9IIpgwf;

1.3
date	2016.03.16.16.46.32;	author naddy;	state Exp;
branches;
next	1.2;
commitid	4Ekn8nPgVVHWLTwe;

1.2
date	2016.02.25.16.02.23;	author landry;	state Exp;
branches;
next	1.1;
commitid	25AJERRbYgktKVQp;

1.1
date	2016.01.17.15.18.31;	author bmercer;	state Exp;
branches
	1.1.1.1;
next	;
commitid	UDrVFvAKcGhbOYCv;

1.1.1.1
date	2016.01.17.15.18.31;	author bmercer;	state Exp;
branches;
next	;
commitid	UDrVFvAKcGhbOYCv;


desc
@@


1.8
log
@Bring rc_bg back.
@
text
@# $OpenBSD: Makefile,v 1.7 2017/05/27 13:55:58 ajacoutot Exp $

ONLY_FOR_ARCHS=	i386 amd64 sparc64

COMMENT=	Yamagi Quake II
N=		yquake2
V=		6.00
PKGNAME=	${N}-${V}
DISTNAME=	quake2-${V}
REVISION=	2
CATEGORIES=	games

HOMEPAGE=	http://www.yamagi.org/quake2/
MAINTAINER=	Adam Wolk <awolk@@openbsd.org>
MASTER_SITES=	http://deponie.yamagi.org/quake2/
EXTRACT_SUFX=	.tar.xz

# GPLv2
PERMIT_PACKAGE_CDROM=   Yes

WANTLIB += GL SDL2 c m ogg openal pthread vorbis vorbisfile z

LIB_DEPENDS=	audio/libvorbis \
		audio/openal \
		devel/sdl2

MAKE_ENV+=	VERBOSE=1
USE_GMAKE=	Yes

MAKE_FLAGS = config WITH_SYSTEMWIDE=yes WITH_SYSTEMDIR=${PREFIX}/share/${N}

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/${N}
	${INSTALL_PROGRAM} ${WRKBUILD}/release/{quake2,q2ded} \
	    ${PREFIX}/bin/
	${INSTALL_DATA_DIR} ${PREFIX}/share/${N}/baseq2
	${INSTALL_PROGRAM} ${WRKBUILD}/release/baseq2/game.so \
	    ${PREFIX}/share/${N}/baseq2/

.include <bsd.port.mk>
@


1.7
log
@I forgot the bump commit...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2017/01/10 23:45:49 kirby Exp $
d10 1
a10 1
REVISION=	1
@


1.6
log
@README tweaks. OK awolk@@, MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/12/05 21:03:33 awolk Exp $
d10 1
a10 1
REVISION=	0
@


1.5
log
@Update games/yquake2 5.34 => 6.00
OK abieber@@

Upstream changelog:

Quake II 5.34 to 6.00:
- Make the client asynchronous. The old behaviour can be forced by
  setting cl_async to 0. Please note that asynchronicity can lead to
  problems if the old SDL 1.2 backend is used and vsync is enabled.
- Implement gl_overbrightbits in the non multitexturing case.  A value
  of 1 just fixes lighting on water surfaces, higher values increase
  the brightness of everything.
- General renderer overhaul for better compatibility with modern GPUs.
  OpenGL 1.4 is now required, older versions are no longer supported.
  Multitexturing was deprecated and will be removed in a future release.
- Fix some longstanding AI problems.
- Several general gameplay fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2016/06/28 20:50:22 awolk Exp $
d10 1
@


1.4
log
@Update games/yquake2 5.32 => 5.34

OK abieber@@

Changes in the port:
 - taking MAINTAINER, agreed with bmercer@@ who provided the initial port
 - added a q2ded rc script in a similar fashion as the games/ioquake3
   port does
 - the existing /usr/local/share/yquake2/q2ded binary from previous
   port did not work as it was searching for games.so from a relative
   path. I found a way to make both quake2 and q2ded work with an
   upstream supported MAKE variable to provide the system wide quake
   data directory. Thanks to this change we can drop the wrapper script
   and use the binaries directly.
 - adding a new _yquake2 user/group plus /var/yquake2 for the dedicated server
   binary
 - updated the port to version 5.34

Additional notes:
 - make port-lib-depends-check complains on:
   Extra:  openal.2 pthread.22

   ktrace tells me that the check is wrong. Openal and pthreads are both
   used.
 - upstream said in their changelog that they are changing their
   platform policy 'Switch from an arch whitelist to an "all archs are
   supported" approach.'. I saw in our tree a change by landry@@
   specifically limiting the supported platform to the upstream
   supported versions
   (http://cvsweb.openbsd.org/cgi-bin/cvsweb/ports/games/yquake2/Makefile?rev=1.2&content-type=text/x-cvsweb-markup).
   I am not removing this restriction until I get some feedback from
   people able to test other platforms than currently
   listed in ONLY_FOR_ARCHS.

Upstream changelog:

Quake II 5.33 to 5.34:
- Add support for stereo 3D (by Valery Guskov)
- Make gibt solid so they move with conveyor belts.
- Disable gl_ext_multitexturing by default.
- Switch from an arch whitelist to an "all archs are supported"
  approach.
- Add a new README.

Quake II 5.32 to 5.33:
- Add OGG volume slider in settings menu
- Fixed some bugs in volume settings
- Replaced HUD scale option in video menu with generic UI scale
- General UI upscaling improvements
- Better support for keyboards with AZERTY layout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/03/16 16:46:32 naddy Exp $
d7 1
a7 1
V=		5.34
@


1.3
log
@remove SHARED_ONLY from ports that don't use any MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/02/25 16:02:23 landry Exp $
d7 1
a7 1
V=		5.32
d13 1
d29 2
a31 1
	${INSTALL_SCRIPT} ${FILESDIR}/yquake2 ${PREFIX}/bin/
d34 1
a34 1
	    ${PREFIX}/share/${N}/
@


1.2
log
@ONLY_FOR_ARCHS=i386 amd64 sparc64. Upstream Makefile explicitely
supports only those archs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/01/17 15:18:31 bmercer Exp $
a3 1
SHARED_ONLY=	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
@


1.1.1.1
log
@Import of yquake2. Original port from jsg@@. This port will replace the aged and non working quake2 port with something that actually plays. Much feedback and OK from sthen@@ abieber@@ and jsg@@
@
text
@@
