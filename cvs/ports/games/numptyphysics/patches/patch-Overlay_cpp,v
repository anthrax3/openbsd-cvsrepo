head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.18
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.16
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.12
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.14
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.10
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.8
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.6
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2012.12.12.14.58.00;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2011.01.14.12.01.18;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.22.23.07.54;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to the latest svn snapshots:

numptyphysics -> 2010/09/16

npcomplete -> 2010/01/24

Kudos to sthen@@ for mirroring the distfiles
@
text
@$OpenBSD: patch-Overlay_cpp,v 1.2 2011/01/14 12:01:18 dcoppa Exp $
--- Overlay.cpp.orig	Wed Dec  5 15:53:11 2012
+++ Overlay.cpp	Thu Dec  6 10:33:22 2012
@@@@ -36,6 +36,10 @@@@ class OverlayBase : public Overlay (public)
     : m_game(game),
       m_x(x), m_y(y),
       m_canvas(NULL),
+      m_orgx(0),
+      m_orgy(0),
+      m_prevx(0),
+      m_prevy(0),
       m_dragging(false),
       m_dragging_allowed(dragging_allowed),
       m_buttonDown(false)
@@@@ -549,6 +553,7 @@@@ class NextLevelOverlay : public UiOverlay (public)
 			  FULLSCREEN_RECT.centroid().y-120,
 			  FULLSCREEN_RECT.centroid().x+200,
 			  FULLSCREEN_RECT.centroid().y+80 ) ),
+      m_selectedLevel(0),
       m_levelIcon(-2),
       m_worker(NULL)
   {
@@@@ -740,11 +745,11 @@@@ class NextLevelOverlay : public UiOverlay (public)
 
 class EditOverlay : public IconOverlay
 {
-  int m_saving, m_sending;
+  int m_saving;
 public:
   EditOverlay( GameControl& game )
     : IconOverlay(game,"edit.png"),
-      m_saving(0), m_sending(0)
+      m_saving(0)
       
   {
     for ( int i=0; i<18; i++ ) {
@@@@ -780,9 +785,8 @@@@ class EditOverlay : public IconOverlay (public)
     if ( m_game.m_strokeFixed ) outline( screen, 12, 0 );
     if ( m_game.m_strokeSleep ) outline( screen, 13, 0 );
     if ( m_game.m_strokeDecor ) outline( screen, 14, 0 );
-    if ( m_sending ) outline( screen, 16, screen.makeColour((m_sending--)<<9) );
     if ( m_saving )  outline( screen, 17, screen.makeColour((m_saving--)<<9) );
-    if ( m_saving || m_sending ) dirty();
+    if ( m_saving ) dirty();
   }
   virtual bool onHotSpot( int i )
   {
@@@@ -790,7 +794,6 @@@@ class EditOverlay : public IconOverlay (public)
     case 12: m_game.m_strokeFixed = ! m_game.m_strokeFixed; break;
     case 13: m_game.m_strokeSleep = ! m_game.m_strokeSleep; break;
     case 14: m_game.m_strokeDecor = ! m_game.m_strokeDecor; break;
-    case 16: if ( m_game.send() ) m_sending=10; break;
     case 17: if ( m_game.save() ) m_saving=10; break;
     default: if (i<NUM_BRUSHES) m_game.m_colour = i; else return false;
     }
@


1.2
log
@Do not build the HTTP client code since it's unused and poorly written.
@
text
@d1 4
a4 4
$OpenBSD: patch-Overlay_cpp,v 1.1 2009/10/22 23:07:54 sthen Exp $
--- Overlay.cpp.orig	Thu Nov  6 14:44:45 2008
+++ Overlay.cpp	Thu Jan 13 10:55:43 2011
@@@@ -31,6 +31,10 @@@@ class OverlayBase : public Overlay (public)
a11 1
       m_isDirty(true),
d14 5
a18 4
@@@@ -176,6 +180,7 @@@@ class NextLevelOverlay : public IconOverlay (public)
     : IconOverlay(game,"next.png",
 		  FULLSCREEN_RECT.centroid().x-200,
 		  FULLSCREEN_RECT.centroid().y-120),
d21 1
a21 1
       m_icon(NULL)
d23 26
a48 1
@@@@ -302,7 +307,6 @@@@ class EditOverlay : public IconOverlay (public)
@


1.1
log
@Various patches to improve the game engine and allow all the npcomplete
levels to work. Some from Erik Hovland via the numptyphysics bug tracker,
some from David Coppa. Port diff from David Coppa (maintainer).
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ Overlay.cpp	Thu Oct 15 14:49:47 2009
d23 8
@

