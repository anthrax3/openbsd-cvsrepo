head	1.23;
access;
symbols
	OPENBSD_6_0:1.23.0.6
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.22.0.8
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.22.0.6
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.22.0.4
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.22.0.2
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.21.0.6
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.21.0.4
	OPENBSD_5_2_BASE:1.21
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.17.0.4
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.17.0.2
	OPENBSD_4_7_BASE:1.17
	OPENBSD_4_6:1.16.0.6
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.4
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.2
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.15.0.2
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.13.0.6
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.13.0.4
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.13.0.2
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.12.0.2
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.9.0.4
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.2
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.5.0.8
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.5.0.6
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.5.0.4
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.3.0.4
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	lebel_2001-Jul-28:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2015.06.20.21.32.46;	author naddy;	state Exp;
branches;
next	1.22;
commitid	9gUgtON7xaoRrCLj;

1.22
date	2013.03.11.11.07.42;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2011.12.02.14.36.14;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2011.05.11.06.56.43;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.16.11.23.29;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.24.21.19.03;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2009.08.10.06.31.43;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2008.06.12.17.06.45;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2008.01.08.10.50.49;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2007.09.15.18.01.04;	author simon;	state Exp;
branches;
next	1.13;

1.13
date	2006.07.11.11.30.06;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2005.11.03.22.32.40;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2005.11.03.14.51.34;	author niallo;	state Exp;
branches;
next	1.10;

1.10
date	2005.11.01.13.54.34;	author niallo;	state Exp;
branches;
next	1.9;

1.9
date	2005.01.11.07.16.01;	author sturm;	state Exp;
branches;
next	1.8;

1.8
date	2004.11.28.22.41.28;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2004.09.15.00.46.12;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.15.00.06.59;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2003.02.15.14.28.25;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2002.12.29.15.10.08;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.10.15.00.47;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.05.16.17.13;	author lebel;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.28.16.33.39;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.07.28.16.33.39;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.23
log
@remove dead and dying master sites, switch to SourceForge
@
text
@# $OpenBSD: Makefile,v 1.22 2013/03/11 11:07:42 espie Exp $

COMMENT=	Zangband (Zelazny Angband) with color, X11 support

VERSION=	2.6.2
DISTNAME=	zangband-${VERSION}
REVISION =	4
CATEGORIES=	games
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=zangband/}

PERMIT_PACKAGE_CDROM=	not-for-profit redistribution only
PERMIT_PACKAGE_FTP=	Yes

WANTLIB=		c ncurses

HOMEPAGE=		http://www.zangband.org/

USE_GMAKE=		Yes
MAKE_ENV=		CC="${CC}" CFLAGS="${CFLAGS}"

AUTOCONF_VERSION=	2.54
AUTOMAKE_VERSION=	1.4
CONFIGURE_STYLE=	autoconf automake
CONFIGURE_ENV=		TRUEPREFIX="${TRUEPREFIX}"

WRKDIST=		${WRKDIR}/zangband

FLAVORS=		no_x11
FLAVOR?=	

.if !${FLAVOR:Mno_x11}
CONFIGURE_ARGS+=	--with-x
WANTLIB+=		ICE SM X11 Xaw Xmu Xt pthread-stubs xcb
.else
CONFIGURE_ARGS+=	--without-x
.endif

post-patch:
	@@cd ${WRKSRC}; AUTOMAKE_VERSION=${AUTOMAKE_VERSION} aclocal

pre-configure:
	@@cd ${WRKSRC}; AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		automake --foreign --add-missing --copy

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/zangband
	(cd ${WRKDIST}/lib && tar -cf - * ) | \
	   (cd ${PREFIX}/share/zangband && tar -xf - )
	@@chown -R ${SHAREOWN}:games ${PREFIX}/share/zangband
	@@find ${PREFIX} \( -name Makefile\* -o -name delete.me \) \
           -exec rm "{}" \;
	${INSTALL} -s -o ${BINOWN} -g games -m 2555 ${WRKSRC}/src/zangband \
	   ${PREFIX}/bin

.include <bsd.port.mk>
@


1.22
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/12/02 14:36:14 espie Exp $
d9 1
a9 3
MASTER_SITES=	ftp://ftp.sunet.se/pub/games/Angband/Variant/ZAngband/ \
		ftp://ftp.planetmirror.com/pub/angband/Variant/ZAngband/ \
		ftp://clockwork.dementia.org/angband/Variant/ZAngband/
@


1.21
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/05/11 06:56:43 ajacoutot Exp $
a14 2
PERMIT_DISTFILES_CDROM=	not-for-profit redistribution only
PERMIT_DISTFILES_FTP=	Yes
@


1.20
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/16 11:23:29 espie Exp $
d35 1
a35 1
.if !${FLAVOR:L:Mno_x11}
@


1.19
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/24 21:19:03 ajacoutot Exp $
d7 1
a7 1
REVISION =	3
@


1.18
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/08/10 06:31:43 kili Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p3
@


1.17
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/06/12 17:06:45 naddy Exp $
a35 1
USE_X11=		Yes
@


1.16
log
@autotools pull in some macros shipped with gettext 0.17 that require
at least autoconf 2.54
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/01/08 10:50:49 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p2
d38 1
a38 1
WANTLIB+=		ICE SM X11 Xaw Xmu Xt
@


1.15
log
@- small cleaning:
regen patches, remove uneeded comments from Makefile, reorder PLIST
no functionnal change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/09/15 18:01:04 simon Exp $
d25 1
a25 1
AUTOCONF_VERSION=	2.52
@


1.14
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/07/11 11:30:06 steven Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
d17 1
a42 2
# Autotools bootstrap

a44 3

# autoconf...
# autoheader...
@


1.13
log
@better master sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/11/03 22:32:40 naddy Exp $
d3 1
a3 1
COMMENT=	"Zangband (Zelazny Angband) with color, X11 support"
d13 1
a13 1
PERMIT_PACKAGE_CDROM=	"not-for-profit redistribution only"
d15 1
a15 1
PERMIT_DISTFILES_CDROM=	"not-for-profit redistribution only"
@


1.12
log
@fix autotools bootstrap
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/11/03 14:51:34 niallo Exp $
d9 3
a11 1
MASTER_SITES=	ftp://clockwork.dementia.org/angband/Variant/ZAngband/
@


1.11
log
@- setgid fixes (missed this the first time)
- bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/11/01 13:54:34 niallo Exp $
d22 2
a23 1
AUTOCONF_VERSION=	2.13
d40 8
d49 2
a50 2
	@@cd ${WRKSRC}; AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} ${WRKSRC}/bootstrap
@


1.10
log
@- fix modes of some files in the package
- bump PKGNAME

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/01/11 07:16:01 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
@


1.9
log
@use metaauto for automake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/11/28 22:41:28 espie Exp $
d7 1
@


1.8
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/09/15 00:46:12 pvalchev Exp $
a17 5
AUTOCONF_VERSION=	2.13
BUILD_DEPENDS=  	::devel/autoconf/${AUTOCONF_VERSION} \
			::devel/metaauto \
	                ::devel/automake

d20 3
a22 1
CONFIGURE_STYLE=	gnu
d39 2
a40 1
	@@cd ${WRKSRC}; AUTOCONF_VERSION=${AUTOCONF_VERSION} ${WRKSRC}/bootstrap
@


1.7
log
@this license is NOT FREE as it does not grant the right to modify, and only
restricts distribution to non-profit causes.
set PERMIT fields accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/09/15 00:06:59 pvalchev Exp $
d14 1
d36 1
@


1.6
log
@remove David Lebel from maintainer position per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/02/15 14:28:25 espie Exp $
d10 1
a10 1
PERMIT_PACKAGE_CDROM=	Yes
d12 1
a12 1
PERMIT_DISTFILES_CDROM=	Yes
@


1.5
log
@hardcode autoconf version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/12/29 15:10:08 fgsch Exp $
a8 2

MAINTAINER=	David Lebel <lebel@@openbsd.org>
@


1.4
log
@more NEED_VERSION removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/11/10 15:00:47 espie Exp $
d19 3
a21 1
BUILD_DEPENDS=  	::devel/autoconf \
d42 1
a42 1
	@@cd ${WRKSRC}; ${WRKSRC}/bootstrap
@


1.3
log
@Kill first component of BUILD_DEPENDS.

Fix sawfish comment while I'm at it.
`window manager for the X windows system'.
Like DUH ! It's going to be a window manager for my microwave oven ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/10/05 16:17:13 lebel Exp $
a8 1
NEED_VERSION=	1.489
@


1.2
log
@update games/zangband to 2.6.2; see http://www.zangband.org/changes.html#2.6.2
for a list of changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/07/28 16:33:39 lebel Exp $
d9 1
a9 1
NEED_VERSION=	1.402
d20 2
a21 2
BUILD_DEPENDS=  	autoconf::devel/autoconf \
	                automake::devel/automake
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/07/18 15:06:33 lebel Exp $
d5 1
a5 1
VERSION=	2.6.1
d20 4
d28 2
d39 3
@


1.1.1.1
log
@initial import of zangband-2.6.1:
--
The game of Zangband is a single player dungeon simulation. A player
may choose from a number of races, classes and magic realms when
creating a character (see charattr.txt [3]), and then "run" that
character over a period of days, weeks, even months. Deep down
inside, the real objective of the game is to increase your experience,
and certain other characteristics, and also to collect useful items,
to give you a decent chance against the great Serpent of Chaos, who
lurks somewhere in the depths of the dungeon.

The player will begin his adventure on the town level where he may
acquire supplies, weapons, armor, and magical devices by bartering
with various shop owners. After preparing for his adventure, the
player can descend into the dungeon where fantastic adventures await
his coming!

Flavors:
	no_x11	- build without X11 support

WWW: http://www.zangband.org/

@
text
@@
