head	1.54;
access;
symbols
	OPENBSD_6_2:1.54.0.2
	OPENBSD_6_2_BASE:1.54
	OPENBSD_6_1:1.49.0.2
	OPENBSD_6_1_BASE:1.49
	OPENBSD_6_0:1.47.0.2
	OPENBSD_6_0_BASE:1.47
	OPENBSD_5_9:1.46.0.2
	OPENBSD_5_9_BASE:1.46
	OPENBSD_5_8:1.43.0.4
	OPENBSD_5_8_BASE:1.43
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.36.0.2
	OPENBSD_5_6_BASE:1.36
	OPENBSD_5_5:1.34.0.2
	OPENBSD_5_5_BASE:1.34
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.29.0.2
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.2
	OPENBSD_5_0:1.19.0.2
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.10.0.4
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.6
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.4
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.5.0.2
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_0_BASE:1.3
	jolan_20060601:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.54
date	2017.08.24.09.45.23;	author sthen;	state Exp;
branches;
next	1.53;
commitid	PnxiRKB45Z5BPng8;

1.53
date	2017.07.26.22.45.21;	author sthen;	state Exp;
branches;
next	1.52;
commitid	tD4MFrpYYDDL2UFT;

1.52
date	2017.07.16.19.18.54;	author espie;	state Exp;
branches;
next	1.51;
commitid	tt0GhWK5c4uf9ILG;

1.51
date	2017.04.13.07.37.08;	author bentley;	state Exp;
branches;
next	1.50;
commitid	ONpwpVsO03fFSzWC;

1.50
date	2017.04.10.11.46.19;	author sthen;	state Exp;
branches;
next	1.49;
commitid	BLsh88fJB8thZTwY;

1.49
date	2016.12.05.16.16.23;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	gqiTecFQJUBdiJ4R;

1.48
date	2016.08.01.19.19.46;	author bentley;	state Exp;
branches;
next	1.47;
commitid	tZ7sgz2ZLlu4ndT4;

1.47
date	2016.06.05.11.28.25;	author bentley;	state Exp;
branches;
next	1.46;
commitid	V2nVr2CtbWnfNDtf;

1.46
date	2016.01.11.09.35.44;	author ajacoutot;	state Exp;
branches;
next	1.45;
commitid	WYnGla3sNqiyLTEw;

1.45
date	2015.12.07.04.26.53;	author bentley;	state Exp;
branches;
next	1.44;
commitid	MUEBCvKA2tt6mwHu;

1.44
date	2015.09.07.21.32.27;	author bentley;	state Exp;
branches;
next	1.43;
commitid	wHbacAKkYFgciN0b;

1.43
date	2015.06.02.17.16.13;	author bentley;	state Exp;
branches;
next	1.42;
commitid	iyEMKrRZ0juTyzZ8;

1.42
date	2015.04.15.01.39.16;	author bentley;	state Exp;
branches;
next	1.41;
commitid	nM7qOBaaAEdytgiH;

1.41
date	2015.03.27.08.41.05;	author ajacoutot;	state Exp;
branches;
next	1.40;
commitid	bGtJfGn7cri3zP6L;

1.40
date	2014.12.23.11.32.30;	author dcoppa;	state Exp;
branches;
next	1.39;
commitid	n2ad5foZ0wTncxqp;

1.39
date	2014.11.11.07.49.07;	author bentley;	state Exp;
branches;
next	1.38;
commitid	g908n550bEgC0oHy;

1.38
date	2014.10.13.11.22.58;	author bentley;	state Exp;
branches;
next	1.37;
commitid	wgQfz7FRTeAFIIRR;

1.37
date	2014.08.22.02.32.26;	author bentley;	state Exp;
branches;
next	1.36;
commitid	HfdFmINcLQWyF9TE;

1.36
date	2014.07.01.02.09.27;	author bentley;	state Exp;
branches;
next	1.35;
commitid	Rx4Ljc2tF8yhtegl;

1.35
date	2014.04.10.06.32.48;	author bentley;	state Exp;
branches;
next	1.34;

1.34
date	2013.12.08.14.58.32;	author bentley;	state Exp;
branches;
next	1.33;

1.33
date	2013.09.24.06.33.02;	author bentley;	state Exp;
branches;
next	1.32;

1.32
date	2013.06.25.22.41.41;	author bentley;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2013.04.20.02.52.31;	author bentley;	state Exp;
branches;
next	1.30;

1.30
date	2013.03.11.11.07.40;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2013.02.02.04.39.56;	author bentley;	state Exp;
branches;
next	1.28;

1.28
date	2013.01.18.11.34.37;	author kirby;	state Exp;
branches;
next	1.27;

1.27
date	2012.12.25.00.17.37;	author bentley;	state Exp;
branches;
next	1.26;

1.26
date	2012.08.21.18.01.42;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2012.06.15.08.32.15;	author ajacoutot;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2012.01.22.21.41.48;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2012.01.13.07.54.43;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2011.12.03.19.49.46;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.12.02.08.29.45;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.09.26.10.12.46;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2011.06.02.13.41.38;	author ajacoutot;	state Exp;
branches
	1.19.2.1;
next	1.18;

1.18
date	2011.04.02.15.39.36;	author rpointel;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.22.13.04.22;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.16.11.23.27;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.24.21.19.02;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.18.18.00.18;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.09.24.10.33.34;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.19.20.55.01;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.09.19.18.52.08;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2010.03.01.14.13.04;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2008.06.19.20.40.04;	author mk;	state Exp;
branches;
next	1.8;

1.8
date	2008.01.26.16.32.14;	author merdely;	state Exp;
branches;
next	1.7;

1.7
date	2007.10.05.18.22.22;	author mk;	state Exp;
branches;
next	1.6;

1.6
date	2007.09.15.18.01.02;	author simon;	state Exp;
branches;
next	1.5;

1.5
date	2007.06.11.10.56.28;	author mk;	state Exp;
branches;
next	1.4;

1.4
date	2007.02.22.22.02.13;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2006.08.02.09.36.20;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2006.06.04.14.30.29;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.01.08.06.45;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.06.01.08.06.45;	author jolan;	state Exp;
branches;
next	;

1.19.2.1
date	2012.01.13.08.26.12;	author ajacoutot;	state Exp;
branches;
next	;

1.25.2.1
date	2012.08.21.18.01.48;	author jasper;	state Exp;
branches;
next	;

1.32.2.1
date	2013.12.15.14.19.28;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.54
log
@bump; textproc/icu4c now uses multi-packages for -wwwdata
@
text
@# $OpenBSD: Makefile,v 1.53 2017/07/26 22:45:21 sthen Exp $

COMMENT=	open source clone of the game Transport Tycoon Deluxe

V =		1.7.0
DISTNAME =	openttd-$V-source
PKGNAME =	openttd-$V
REVISION =	1

CATEGORIES=	games

HOMEPAGE=	https://www.openttd.org/en/

MAINTAINER =	Anthony J. Bentley <anthony@@anjbe.name>

# GPLv2 only
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += SDL c fontconfig freetype icudata icui18n icuuc
WANTLIB += lzma lzo2 m png pthread ${COMPILER_LIBCXX} xdg-basedir z

MASTER_SITES=		https://binaries.openttd.org/releases/$V/

DIST_SUBDIR =		openttd

LIB_DEPENDS=		archivers/lzo2 \
			devel/sdl \
			graphics/png \
			textproc/icu4c \
			archivers/xz \
			x11/libxdg-basedir

RUN_DEPENDS=            devel/desktop-file-utils \
			games/openttd-data/opengfx \
			games/openttd-data/openmsx \
			games/openttd-data/opensfx \
			x11/gtk+3,-guic

CONFIGURE_STYLE=	simple
CONFIGURE_ARGS+=	--prefix-dir=${PREFIX} \
			--binary-dir=bin \
			--data-dir=share/openttd \
			--icon-dir=share/pixmaps \
			--man-dir=man/man6 \
			--personal-dir=.openttd \
			--install-dir=${WRKINST} \
			--with-png \
			--with-zlib \
			--without-allegro \
			--without-libtimidity \
			--with-midi=/usr/bin/midiplay \
			--CFLAGS_BUILD="${CFLAGS}" \
			--disable-strip

MAKE_ENV+=		VERBOSE=1

USE_GMAKE=		Yes
NO_TEST=		Yes

DOCSDIR=		${PREFIX}/share/doc/openttd
EXAMPLESDIR=		${PREFIX}/share/examples/openttd
GAMEDIR=		${PREFIX}/share/openttd

FAKE_FLAGS=BUNDLE_DIR=${WRKINST}/bundle BUNDLES_DIR=${WRKINST}/bundle

WRKDIST =		${WRKDIR}/openttd-$V

post-install:
	${INSTALL_DATA_DIR} ${GAMEDIR}/media
	cd ${WRKSRC}/media/ && umask 022 && pax -rw . ${GAMEDIR}/media
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}
	${INSTALL_DATA} ${WRKSRC}/bin/scripts/* ${EXAMPLESDIR}
	${INSTALL_DATA_DIR} ${DOCSDIR}
	cd ${WRKSRC}/docs/ && umask 022 && pax -rw . ${DOCSDIR}
	rm -rf ${WRKINST}/bundle
	rm -rf ${GAMEDIR}/media/openttd.desktop*

.include <bsd.port.mk>
@


1.53
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2017/07/16 19:18:54 espie Exp $
d8 1
a8 1
REVISION =	0
@


1.52
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2017/04/13 07:37:08 bentley Exp $
d8 1
@


1.51
log
@Update to openttd-1.7.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2017/04/10 11:46:19 sthen Exp $
d19 1
a19 1
WANTLIB += lzma lzo2 m png pthread ${LIBCXX} xdg-basedir z
@


1.50
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2016/12/05 16:16:23 ajacoutot Exp $
d5 3
a7 12
V =		1.6.1
DISTNAME =	openttd-$V
EXTRACT_SUFX=	-source.tar.gz
GFX_V =		0.5.4
SFX_V=		0.2.3
MSX_V=		0.3.1
REVISION=	0
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} \
		opengfx-${GFX_V}.zip:0 \
		opensfx-${SFX_V}.zip:1 \
		openmsx-${MSX_V}.zip:2
DIST_SUBDIR=	openttd
d21 3
a23 4
MASTER_SITES=		http://binaries.openttd.org/releases/${V}/
MASTER_SITES0=		https://bundles.openttdcoop.org/opengfx/releases/${GFX_V}/
MASTER_SITES1=		https://bundles.openttdcoop.org/opensfx/releases/${SFX_V}/
MASTER_SITES2=		https://bundles.openttdcoop.org/openmsx/releases/${MSX_V}/
d33 3
d65 1
a65 2
post-extract:
	cd ${WRKDIR} && ${TAR} xf opengfx-${GFX_V}.tar
a73 5
	${INSTALL_DATA_DIR} ${GAMEDIR}/data
	${INSTALL_DATA_DIR} ${GAMEDIR}/gm
	${INSTALL_DATA} ${WRKDIR}/opengfx-${GFX_V}/*.{grf,obg} ${GAMEDIR}/data
	${INSTALL_DATA} ${WRKDIR}/opensfx-${SFX_V}/*.{cat,obs} ${GAMEDIR}/data
	${INSTALL_DATA} ${WRKDIR}/openmsx-${MSX_V}/*.{mid,obm} ${GAMEDIR}/gm
@


1.49
log
@Sync WANTLIB after recent icu4c update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2016/08/01 19:19:46 bentley Exp $
d28 1
a28 1
WANTLIB += lzma lzo2 m png pthread stdc++ xdg-basedir z
@


1.48
log
@Update to openttd-1.6.1.

Release notes:
http://us.binaries.openttd.org/binaries/releases/1.6.1/changelog.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/06/05 11:28:25 bentley Exp $
d11 1
d28 1
a28 1
WANTLIB += icule iculx lzma lzo2 m png pthread stdc++ xdg-basedir z
@


1.47
log
@Update to openttd-1.6.0.

Changelog:
http://us.binaries.openttd.org/binaries/releases/1.6.0/changelog.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/01/11 09:35:44 ajacoutot Exp $
d5 1
a5 1
V =		1.6.0
@


1.46
log
@Use consistent email address for the MAINTAINER line.

ok bentley@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/12/07 04:26:53 bentley Exp $
d5 1
a5 1
V =		1.5.3
d8 1
a8 1
GFX_V =		0.5.3
a15 2

REVISION=	0
@


1.45
log
@Update to openttd-1.5.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/09/07 21:32:27 bentley Exp $
d17 2
d23 1
a23 1
MAINTAINER =	Anthony J. Bentley <anthony@@cathet.us>
@


1.44
log
@Update to openttd-1.5.2.

Changelog:
http://us.binaries.openttd.org/binaries/releases/1.5.2/changelog.txt

ok kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/06/02 17:16:13 bentley Exp $
d5 2
a6 2
V =		1.5.2
DISTNAME =	openttd-${V}
d8 1
a8 1
GFX_V =		0.5.2
@


1.43
log
@Update to openttd-1.5.1.

Changelog:
http://us.binaries.openttd.org/binaries/releases/1.5.1/changelog.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/04/15 01:39:16 bentley Exp $
d5 1
a5 1
V =		1.5.1
@


1.42
log
@Update to openttd-1.5.0.

Changelog:
http://us.binaries.openttd.org/binaries/releases/1.5.0/changelog.txt

ok daniel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/03/27 08:41:05 ajacoutot Exp $
d5 1
a5 1
V =		1.5.0
@


1.41
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/12/23 11:32:30 dcoppa Exp $
d5 1
a5 1
V =		1.4.4
a6 1
REVISION =	1
d8 1
a8 1
GFX_V =		0.5.1
d23 1
a23 1
# GPLv2
@


1.40
log
@
Fix compilation with freetype2 version 2.5.4 and newer
(upstream svn revision r27079)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/11/11 07:49:07 bentley Exp $
d7 1
a7 1
REVISION =	0
d43 1
a43 1
			x11/gtk+2,-guic
@


1.39
log
@Update to openttd-1.4.4.

Patch from Jakub Skrzypnik.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/10/13 11:22:58 bentley Exp $
d7 1
@


1.38
log
@Update to openttd-1.4.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/08/22 02:32:26 bentley Exp $
d5 1
a5 1
V =		1.4.3
@


1.37
log
@Update to openttd-1.4.2.

Replace an unnecessary patch with a configure option. (from zhuk@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/07/01 02:09:27 bentley Exp $
d5 1
a5 1
V =		1.4.2
@


1.36
log
@Update to openttd-1.4.1.

ok bcallah@@ kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/04/10 06:32:48 bentley Exp $
d5 1
a5 1
V =		1.4.1
d56 1
@


1.35
log
@Update to openttd-1.4.0.

Changelog for 1.4.0 at:
http://vcs.openttd.org/svn/changeset?new=26378%40trunk%2Fchangelog.txt&old=26137%40trunk%2Fchangelog.txt

comments + ok kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/12/08 14:58:32 bentley Exp $
d5 1
a5 1
V =		1.4.0
d8 1
a8 1
GFX_V =		0.5.0
@


1.34
log
@Security update to openttd-1.3.3.

Fixes CVE-2013-6411:
Denial of service (server) using forcefully crashed aircrafts
https://security.openttd.org/en/CVE-2013-6411

Full changelog at:
http://us.binaries.openttd.org/binaries/releases/1.3.3/changelog.txt

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/09/24 06:33:02 bentley Exp $
d5 1
a5 1
V =		1.3.3
d8 1
a8 1
GFX_V=		0.4.7
d27 1
a27 1
WANTLIB += icule iculx lzma lzo2 m png pthread stdc++ z
d38 2
a39 1
			archivers/xz
d69 3
@


1.33
log
@Update to openttd-1.3.2.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/06/25 22:41:41 bentley Exp $
d5 1
a5 1
V =		1.3.2
d19 1
a19 1
HOMEPAGE=	http://www.openttd.org/
@


1.32
log
@Update to openttd-1.3.1.
Respect CFLAGS.
Don't crash during build (use our strndup/strcasestr instead of openttd's).

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/04/20 02:52:31 bentley Exp $
d5 1
a5 1
V =		1.3.1
d27 1
a27 1
WANTLIB += lzma lzo2 m png pthread stdc++ z
d30 3
a32 3
MASTER_SITES0=		http://bundles.openttdcoop.org/opengfx/releases/${GFX_V}/
MASTER_SITES1=		http://bundles.openttdcoop.org/opensfx/releases/${SFX_V}/
MASTER_SITES2=		http://bundles.openttdcoop.org/openmsx/releases/${MSX_V}/
@


1.32.2.1
log
@Security fix for CVE-2013-6411 openttd: DoS using forcefully crashed aircrafts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/06/25 22:41:41 bentley Exp $
a6 1
REVISION =	0
@


1.31
log
@Update to openttd-1.3.0.

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/03/11 11:07:40 espie Exp $
d5 1
a5 1
V =		1.3.0
d8 1
a8 1
GFX_V=		0.4.6.1
d54 3
a56 1
			--without-libtimidity
@


1.30
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/02/02 04:39:56 bentley Exp $
d5 1
a5 2
V =		1.2.3
REVISION=	1
d8 1
a8 1
GFX_V=		0.4.4
d26 1
a26 1
WANTLIB += SDL c expat fontconfig freetype icudata icui18n icuuc
@


1.29
log
@Take maintainership of some ports I'm interested in.

Initially suggested by kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/01/18 11:34:37 kirby Exp $
a25 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d60 1
a60 1
NO_REGRESS=		Yes
@


1.28
log
@ - Use DIST_SUBDIR. Reflects data files belonging.
 - Remove *.desktop file templates.
 - Remove unneeded patch.

ok bentley@@, maintaiber
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/12/25 00:17:37 bentley Exp $
d6 1
a6 1
REVISION=	0
d21 2
@


1.27
log
@Update to openttd-1.2.3.

ok tobiasu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/08/21 18:01:42 jasper Exp $
d6 1
d16 1
d82 1
@


1.26
log
@Security fix for CVE-2012-3436,
Denial of service (server) using ships on half tiles and landscaping.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/06/15 08:32:15 ajacoutot Exp $
d5 2
a6 2
V=		1.1.5
DISTNAME=	openttd-${V}
d8 1
a8 2
REVISION=	1
GFX_V=		0.3.5
d74 2
@


1.25
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/01/22 21:41:48 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.25.2.1
log
@Security fix for CVE-2012-3436,
Denial of service (server) using ships on half tiles and landscaping.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/06/15 08:32:15 ajacoutot Exp $
d8 1
a8 1
REVISION=	1
@


1.24
log
@SECURITY update to OpenTTD 1.1.5, CVE-2012-0049
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/01/13 07:54:43 ajacoutot Exp $
d8 1
@


1.23
log
@SECURITY update to openttd-1.1.4.
(CVE-2011-3341, CVE-2011-3342, CVE-2011-3343)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/12/03 19:49:46 ajacoutot Exp $
d5 1
a5 1
V=		1.1.4
@


1.22
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/12/02 08:29:45 ajacoutot Exp $
d5 1
a5 1
V=		1.1.3
a15 2
REVISION=	1

d77 1
@


1.21
log
@Remove MAINTAINER as per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/09/26 10:12:46 sthen Exp $
d16 1
a16 1
REVISION=	0
d42 2
a43 1
RUN_DEPENDS=            devel/desktop-file-utils
@


1.20
log
@SECURITY/bugfix update to OpenTTD 1.1.3, from Daniel Dickman (maintainer),
thanks Tobias Ulmer for testing.

CVE-2011-3341 Denial of service via improperly validated commands
CVE-2011-3342 Buffer overflows in savegame loading
CVE-2011-3343 Multiple buffer overflows in validation of external data
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/06/02 13:41:38 ajacoutot Exp $
d16 2
a20 2

MAINTAINER=	Daniel Dickman <didickman@@gmail.com>
@


1.19
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/04/02 15:39:36 rpointel Exp $
d5 1
a5 1
V=		1.1.0
d8 1
a8 1
GFX_V=		0.3.2
d12 3
a14 3
		opengfx-${GFX_V}.zip:0 opensfx-${SFX_V}.zip:1 openmsx-${MSX_V}.zip:2

REVISION=	0
@


1.19.2.1
log
@MFC: SECURITY update to openttd-1.1.4.
(CVE-2011-3341, CVE-2011-3342, CVE-2011-3343)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/01/13 07:54:43 ajacoutot Exp $
d5 1
a5 1
V=		1.1.4
d8 1
a8 1
GFX_V=		0.3.5
d12 3
a14 3
		opengfx-${GFX_V}.zip:0 \
		opensfx-${SFX_V}.zip:1 \
		openmsx-${MSX_V}.zip:2
d20 2
a77 1
	rm -rf ${WRKINST}/bundle
@


1.18
log
@Update opentdd to 1.1.0 from Daniel Dickman (MAINTAINER).
Adjust WANTLIB and LIB_DEPENDS with lzma from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/22 13:04:22 jasper Exp $
d13 2
@


1.17
log
@- update openttd to 1.0.5, which among bugfixes, fixes CVE-2010-4168.

with daniel dickman (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/16 11:23:27 espie Exp $
d5 1
a5 1
V=		1.0.5
d7 2
a8 2
EXTRACT_SUFX=	-source.tar.bz2
GFX_V=		0.3.1
d27 1
a27 1
WANTLIB += lzo2 m png pthread stdc++ z
d29 1
a29 1
MASTER_SITES=		http://cz.binaries.openttd.org/openttd/binaries/releases/${V}/
d37 2
a38 1
			textproc/icu4c
@


1.16
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/24 21:19:02 ajacoutot Exp $
d5 1
a5 1
V=		1.0.3
a6 1
REVISION=	1
d8 3
a10 3
DIST_GFX=	opengfx-0.2.4
DIST_SFX=	opensfx-0.2.3
DIST_MSX=	openmsx-0.3.1
d12 1
a12 1
		${DIST_GFX}.tar.bz2:0 ${DIST_SFX}.zip:1 ${DIST_MSX}.zip:2
d30 3
a32 3
MASTER_SITES0=		http://bundles.openttdcoop.org/opengfx/releases/
MASTER_SITES1=		http://bundles.openttdcoop.org/opensfx/releases/
MASTER_SITES2=		http://bundles.openttdcoop.org/openmsx/releases/0.3.1/
a41 2
USE_GROFF =		Yes

d67 1
a67 1
	${INSTALL_DATA} ${WRKSRC}/media/* ${GAMEDIR}/media
d71 4
a74 4
	${INSTALL_DATA} ${WRKSRC}/docs/* ${DOCSDIR}
	${INSTALL_DATA} ${WRKDIR}/${DIST_GFX}/*.{grf,obg} ${GAMEDIR}/data
	${INSTALL_DATA} ${WRKDIR}/${DIST_SFX}/*.{cat,obs} ${GAMEDIR}/data
	${INSTALL_DATA} ${WRKDIR}/${DIST_MSX}/*.{mid,obm} ${GAMEDIR}/gm
@


1.15
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/18 18:00:18 espie Exp $
d35 4
a38 4
LIB_DEPENDS=		::archivers/lzo2 \
			::devel/sdl \
			::graphics/png \
			::textproc/icu4c
d40 1
a40 1
RUN_DEPENDS=            ::devel/desktop-file-utils
d43 1
a43 1
USE_GROFF =	Yes
@


1.14
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/09/24 10:33:34 jasper Exp $
a58 1
USE_X11=		Yes
@


1.13
log
@- don't install a gzipped manpage

ok daniel dickman (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/09/19 20:55:01 sthen Exp $
d43 1
@


1.12
log
@- missing update-icon-cache goo
- regen plist
- disable configure tests for timidity, allegro to avoid picking
up deps if installed at build time
- add dep on icu4c
- Daniel Dickman takes maintainer

(discussed with Daniel and mostly in a diff he agreed with which
crossed over with the update being committed ;)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/03/01 14:13:04 espie Exp $
d7 1
a7 1
REVISION=	0
@


1.11
log
@- update openttd to 1.0.3, fixing a host of security issues along the way

from Anton Yabchinskiy and Daniel Dickman

mk@@ drops maintainership, any takers?
@
text
@d6 3
a8 3
DISTNAME=	openttd-${V}-source
PKGNAME=	${DISTNAME:S/-source//}
EXTRACT_SUFX=	.tar.bz2
d19 2
d27 2
a28 1
WANTLIB=		SDL c expat fontconfig freetype lzo2 m png pthread stdc++ z
d37 2
a38 1
			::graphics/png
d52 3
a54 1
			--with-zlib
a60 2

WRKDIST= 		${WRKDIR}/${DISTNAME:S/-source//}
@


1.10
log
@move the bundle to WKRINST, so that things clean up correctly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/06/19 20:40:04 mk Exp $
d4 3
a6 1
DISTNAME=	openttd-0.6.1-source
d9 6
d17 1
a17 3
HOMEPAGE=	http://www.openttd.com/

MAINTAINER=	Michael Knudsen <mk@@molioner.dk>
d19 1
a19 1
# GPL
a23 1
WANTLIB=	c expat fontconfig freetype m pthread stdc++ z
d25 1
d27 8
a34 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=openttd/}
d36 1
a36 2
LIB_DEPENDS=		SDL::devel/sdl \
			png.>=2::graphics/png
d41 8
a48 1
			--install-dir=${WRKINST}
d50 1
a50 6
MAKE_ENV+=		VERBOSE=1 WITH_PNG=1 \
			WITH_ZLIB=1 \
			DATA_DIR=share/openttd \
			ICON_DIR=share/pixmaps \
			BINARY_DIR=bin \
			PERSONAL_DIR=.openttd
d56 1
a56 1
WRKDIST=		${WRKDIR}/${DISTNAME:S/-source//}
d71 3
@


1.9
log
@Update to 0.6.1.

ok landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/01/26 16:32:14 merdely Exp $
d47 2
@


1.8
log
@Remove -O and allow our CFLAGS to do the right thing
Fixes build on alpha.

ok naddy, mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/10/05 18:22:22 mk Exp $
d4 2
a5 2
DISTNAME=	openttd-0.5.3-source
PKGNAME=	${DISTNAME:S/-source//}p0
d18 1
a18 1
WANTLIB=	X11 Xext c expat fontconfig freetype m pthread stdc++ usbhid z
d26 6
a31 1
MAKE_ENV+=		INSTALL=1 USE_HOMEDIR=1 VERBOSE=1 WITH_PNG=1 \
d49 4
d55 1
a55 6
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}
	${INSTALL_DATA} ${WRKSRC}/scripts/* ${EXAMPLESDIR}
	${INSTALL_DATA_DIR} ${GAMEDIR}
	${INSTALL_DATA_DIR} ${GAMEDIR}/media
	${INSTALL_DATA} ${WRKSRC}/media/* ${GAMEDIR}/media
	
@


1.7
log
@Update openttd to 0.5.3 which is mostly a bugfix release.

Many requests from joris@@.

Tested by simon@@ on i386 and macppc, on i386 by myself.

ok simon@@ (who mailed me an identical diff to what I had in my tree).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/09/15 18:01:02 simon Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME:S/-source//}
@


1.6
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/06/11 10:56:28 mk Exp $
d4 1
a4 1
DISTNAME=	openttd-0.5.2-source
@


1.5
log
@Long overdue update of openttd to v. 0.5.2.

Diff from Jeff Quast, tweaked by jasper@@, thanks a lot to both of you.

Tested a lot by myself, and I think niallo@@ and jasper@@ too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/02/22 22:02:13 jasper Exp $
d3 1
a3 1
COMMENT=	"open source clone of the game Transport Tycoon Deluxe"
@


1.4
log
@- put info about installing the data files into MESSAGE
- sha256'ify
- regen a patch and PLIST
- bump PKGNAME

ok espie@@, mk@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/08/02 09:36:20 espie Exp $
d4 2
a5 2
DISTNAME=	openttd-0.4.7-source
PKGNAME=	${DISTNAME:S/-source//}p0
d18 2
a19 1
WANTLIB=		X11 Xext c m pthread usbhid z
d26 2
a27 1
MAKE_ENV+=		WITH_ZLIB=1 WITH_PNG=1 INSTALL=1 VERBOSE=1 \
d31 1
a31 2
			PERSONAL_DIR=.openttd \
			USE_HOMEDIR=1
@


1.3
log
@more newstyle lib-depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/06/04 14:30:29 alek Exp $
d5 1
a5 1
PKGNAME=	${DISTNAME:S/-source//}
@


1.2
log
@NO_REGRESS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/06/01 08:06:45 jolan Exp $
d23 1
a23 1
			png.2::graphics/png
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d34 1
@


1.1.1.1
log
@openttd-0.4.7, open source clone of the game Transport Tycoon Deluxe

from mk@@
@
text
@@
