head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.6
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.6
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2015.04.15.01.39.16;	author bentley;	state Exp;
branches;
next	1.2;
commitid	nM7qOBaaAEdytgiH;

1.2
date	2013.12.08.14.58.32;	author bentley;	state Exp;
branches;
next	1.1;

1.1
date	2013.06.25.22.41.41;	author bentley;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to openttd-1.5.0.

Changelog:
http://us.binaries.openttd.org/binaries/releases/1.5.0/changelog.txt

ok daniel@@
@
text
@$OpenBSD: patch-src_string_func_h,v 1.2 2013/12/08 14:58:32 bentley Exp $
Don't use openttd's internal copy of strcasestr().
--- src/string_func.h.orig	Thu Apr  2 21:51:26 2015
+++ src/string_func.h	Thu Apr  2 21:54:19 2015
@@@@ -250,7 +250,7 @@@@ static inline bool IsWhitespace(WChar c)
 #endif
 
 /* strcasestr is available for _GNU_SOURCE, BSD and some Apple */
-#if defined(_GNU_SOURCE) || (defined(__BSD_VISIBLE) && __BSD_VISIBLE) || (defined(__APPLE__) && (!defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE))) || defined(_NETBSD_SOURCE)
+#if defined(_GNU_SOURCE) || (defined(__BSD_VISIBLE) && __BSD_VISIBLE) || (defined(__APPLE__) && (!defined(_POSIX_C_SOURCE) || defined(_DARWIN_C_SOURCE))) || defined(_NETBSD_SOURCE) || defined(__OpenBSD__)
 #	undef DEFINE_STRCASESTR
 #else
 #	define DEFINE_STRCASESTR
@


1.2
log
@Security update to openttd-1.3.3.

Fixes CVE-2013-6411:
Denial of service (server) using forcefully crashed aircrafts
https://security.openttd.org/en/CVE-2013-6411

Full changelog at:
http://us.binaries.openttd.org/binaries/releases/1.3.3/changelog.txt

ok sthen@@
@
text
@d1 5
a5 5
$OpenBSD: patch-src_string_func_h,v 1.1 2013/06/25 22:41:41 bentley Exp $
Don't use openttd's internal copies of strndup()/strcasestr().
--- src/string_func.h.orig	Fri Nov 29 05:16:09 2013
+++ src/string_func.h	Tue Dec  3 02:39:29 2013
@@@@ -249,7 +249,7 @@@@ static inline bool IsWhitespace(WChar c)
a6 9
 
 /* strndup is a GNU extension */
-#if defined(_GNU_SOURCE) || (defined(__NetBSD_Version__) && 400000000 <= __NetBSD_Version__) || (defined(__FreeBSD_version) && 701101 <= __FreeBSD_version) || (defined(__DARWIN_C_LEVEL) && __DARWIN_C_LEVEL >= 200809L)
+#if defined(_GNU_SOURCE) || (defined(__NetBSD_Version__) && 400000000 <= __NetBSD_Version__) || (defined(__FreeBSD_version) && 701101 <= __FreeBSD_version) || (defined(__DARWIN_C_LEVEL) && __DARWIN_C_LEVEL >= 200809L) || defined(__OpenBSD__)
 #	undef DEFINE_STRNDUP
 #else
 #	define DEFINE_STRNDUP
@@@@ -257,7 +257,7 @@@@ char *strndup(const char *s, size_t len);
 #endif /* strndup is available */
@


1.1
log
@Update to openttd-1.3.1.
Respect CFLAGS.
Don't crash during build (use our strndup/strcasestr instead of openttd's).

ok espie@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 3
a5 3
--- src/string_func.h.orig	Fri May 31 14:57:15 2013
+++ src/string_func.h	Sun Jun 23 21:47:08 2013
@@@@ -196,7 +196,7 @@@@ static inline bool IsWhitespace(WChar c)
d14 1
a14 1
@@@@ -204,7 +204,7 @@@@ char *strndup(const char *s, size_t len);
@

