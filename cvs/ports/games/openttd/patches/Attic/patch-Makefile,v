head	1.4;
access;
symbols
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.1.1.0.4
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jolan_20060601:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2008.06.19.20.40.04;	author mk;	state dead;
branches;
next	1.3;

1.3
date	2008.01.26.16.32.14;	author merdely;	state Exp;
branches;
next	1.2;

1.2
date	2007.06.11.10.56.28;	author mk;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.01.08.06.45;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.06.01.08.06.45;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to 0.6.1.

ok landry
@
text
@$OpenBSD: patch-Makefile,v 1.3 2008/01/26 16:32:14 merdely Exp $
--- Makefile.orig	Sat Sep 15 05:31:37 2007
+++ Makefile	Wed Jan 23 20:43:53 2008
@@@@ -319,7 +319,7 @@@@ CC_VERSION = $(shell $(CC_TARGET) -dumpversion | cut -
 # GNU make can only test for (in)equality
 # this is a workaround to test for >=
 ifeq ($(shell expr $(CC_VERSION) \>= 29), 1)
-  CFLAGS += -O -Wall -Wno-multichar -Wsign-compare -Wundef
+  CFLAGS += -Wall -Wno-multichar -Wsign-compare -Wundef
   CC_CFLAGS += -Wstrict-prototypes
   CFLAGS += -Wwrite-strings -Wpointer-arith
 endif
@@@@ -408,7 +408,6 @@@@ LRT:=
 endif
 endif
 
-CFLAGS += $(BASECFLAGS)
 
 ifdef UNIX
 CDEFS += -DUNIX
@@@@ -933,7 +932,7 @@@@ endif
 
 $(STRGEN): strgen/strgen.c string.c endian_host.h table/control_codes.h
 	@@echo '===> Compiling and Linking $@@'
-	$(Q)$(CC_HOST) $(CFLAGS_HOST) -DSTRGEN strgen/strgen.c string.c -o $@@
+	$(Q)$(CC_HOST) $(CFLAGS) -DSTRGEN strgen/strgen.c string.c -o $@@
 
 table/strings.h: lang/english.txt $(STRGEN)
 	@@echo '===> Generating $@@'
@@@@ -957,8 +956,6 @@@@ release: all
 	$(Q)cp -R $(TTD)                      "/t/openttd-$(REV)-morphos/"
 	$(Q)cp data/*                         "/t/openttd-$(REV)-morphos/data/"
 	$(Q)cp lang/*.lng                     "/t/openttd-$(REV)-morphos/lang/"
-	$(Q)-cp scenario/*.scn                "/t/openttd-$(REV)-morphos/scenario/"
-	$(Q)-cp scenario/heightmap/*          "/t/openttd-$(REV)-morphos/scenario/heightmap/"
 	$(Q)cp readme.txt                     "/t/openttd-$(REV)-morphos/docs/ReadMe"
 	$(Q)cp COPYING                        "/t/openttd-$(REV)-morphos/docs/"
 	$(Q)cp changelog.txt                  "/t/openttd-$(REV)-morphos/docs/ChangeLog"
@


1.3
log
@Remove -O and allow our CFLAGS to do the right thing
Fixes build on alpha.

ok naddy, mk
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.2 2007/06/11 10:56:28 mk Exp $
@


1.2
log
@Long overdue update of openttd to v. 0.5.2.

Diff from Jeff Quast, tweaked by jasper@@, thanks a lot to both of you.

Tested a lot by myself, and I think niallo@@ and jasper@@ too.
@
text
@d1 12
a12 3
$OpenBSD$
--- Makefile.orig	Fri Apr 20 21:47:49 2007
+++ Makefile	Tue May 29 15:00:57 2007
d21 1
a21 1
@@@@ -929,7 +928,7 @@@@ endif
d30 1
a30 1
@@@@ -953,8 +952,6 @@@@ release: all
@


1.1
log
@Initial revision
@
text
@d2 3
a4 12
--- Makefile.orig	Sun Mar 26 13:32:00 2006
+++ Makefile	Sun May 28 21:12:34 2006
@@@@ -292,7 +292,7 @@@@ CFLAGS_HOST = $(BASECFLAGS)
 endif
 
 
-CC_VERSION = $(shell $(CC) -dumpversion | cut -c 1,3)
+CC_VERSION = 0
 
 # GNU make can only test for (in)equality
 # this is a workaround to test for >=
@@@@ -379,7 +379,7 @@@@ LDFLAGS += -mno-cygwin
a8 1
+#CFLAGS += $(BASECFLAGS)
d12 1
a12 10
@@@@ -821,7 +821,7 @@@@ endian_target.h: $(ENDIAN_CHECK)
 
 $(ENDIAN_CHECK): endian_check.c
 	@@echo '===> Compiling and Linking $@@'
-	$(Q)$(CC_HOST) $(CFLAGS_HOST) $(CDEFS) $< -o $@@
+	$(Q)$(CC_HOST) $(CFLAGS) $(CDEFS) $< -o $@@
 
 
 $(TTD): $(OBJS) $(MAKE_CONFIG)
@@@@ -830,7 +830,7 @@@@ $(TTD): $(OBJS) $(MAKE_CONFIG)
d14 1
a14 1
 $(STRGEN): strgen/strgen.c endian_host.h
d16 2
a17 2
-	$(Q)$(CC_HOST) $(CFLAGS_HOST) $(CDEFS) $< -o $@@
+	$(Q)$(CC_HOST) $(CFLAGS) $(CDEFS) $< -o $@@
d21 9
a29 24
@@@@ -926,9 +926,9 @@@@ endif
 						 $(ICON_DIR_INSTALL) \
 	           $(BINARY_DIR_INSTALL)
 ifndef USE_HOMEDIR
-	mkdir -p $(PERSONAL_DIR)/scenario
+	#mkdir -p $(PERSONAL_DIR)/scenario
 else
-	mkdir -p $(DATA_DIR_INSTALL)/scenario
+	#mkdir -p $(DATA_DIR_INSTALL)/scenario
 endif
 	install $(TTD) $(BINARY_DIR_INSTALL)
 	install -m 644 lang/*.lng $(DATA_DIR_INSTALL)/lang
@@@@ -937,9 +937,9 @@@@ endif
 	install -m 644 media/openttd.64.png $(ICON_DIR_INSTALL)
 	install -m 644 media/openttd.32.xpm $(ICON_DIR_INSTALL)
 ifndef USE_HOMEDIR
-	cp scenario/* $(PERSONAL_DIR)/scenario/
+	#cp scenario/* $(PERSONAL_DIR)/scenario/
 else
-	cp scenario/* $(DATA_DIR_INSTALL)/scenario/
+	#cp scenario/* $(DATA_DIR_INSTALL)/scenario/
 endif
 else	#MorphOS
 install:
@


1.1.1.1
log
@openttd-0.4.7, open source clone of the game Transport Tycoon Deluxe

from mk@@
@
text
@@
