head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_1:1.1.1.1.0.32
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.30
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.26
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.28
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.24
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.22
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.20
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.18
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.16
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.14
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.12
	OPENBSD_5_0:1.1.1.1.0.10
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.8
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.6
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.4
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.2
	OPENBSD_4_6_BASE:1.1.1.1
	landry_20090319:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2009.03.19.18.30.30;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.03.19.18.30.30;	author landry;	state Exp;
branches;
next	;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$
--- sources/CPlayer.cpp.orig	Sat Mar  7 11:53:33 2009
+++ sources/CPlayer.cpp	Sat Mar  7 12:30:45 2009
@@@@ -7,6 +7,7 @@@@
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
+#include <sys/types.h>
 #include <time.h>
 #include <SDL.h>
 
@@@@ -259,11 +260,12 @@@@ void CPlayerInfo::set_points(int i, int p)
 #else
 
 	struct timeval ttime;
-
+	struct timespec ts;
 	struct tm *today;
 
 	gettimeofday(&ttime, NULL);
-	today = localtime(&(ttime.tv_sec));
+	ts.tv_sec = ttime.tv_sec;
+	today = localtime(&(ts.tv_sec));
 
 	position_date[i].year = today->tm_year;
 	position_date[i].month = today->tm_mon;
@@@@ -289,11 +291,12 @@@@ void CPlayerInfo::set_time(int i, Uint32 p)
 #else
 
 	struct timeval ttime;
-
+	struct timespec ts;
 	struct tm *today;
 
 	gettimeofday(&ttime, NULL);
-	today = localtime(&(ttime.tv_sec));
+	ts.tv_sec = ttime.tv_sec;
+	today = localtime(&(ts.tv_sec));
 
 	time_date[i].year = today->tm_year;
 	time_date[i].month = today->tm_mon;
@@@@ -319,11 +322,12 @@@@ void CPlayerInfo::set_bestlap(int i, Uint32 p)
 #else
 
 	struct timeval ttime;
-
+	struct timespec ts;
 	struct tm *today;
 
 	gettimeofday(&ttime, NULL);
-	today = localtime(&(ttime.tv_sec));
+	ts.tv_sec = ttime.tv_sec;
+	today = localtime(&(ts.tv_sec));
 
 	lap_date[i].year = today->tm_year;
 	lap_date[i].month = today->tm_mon;
@@@@ -349,11 +353,12 @@@@ void CPlayerInfo::set_position(int i, int p)
 #else
 
 	struct timeval ttime;
-
+	struct timespec ts;
 	struct tm *today;
 
 	gettimeofday(&ttime, NULL);
-	today = localtime(&(ttime.tv_sec));
+	ts.tv_sec = ttime.tv_sec;
+	today = localtime(&(ts.tv_sec));
 
 	position_date[i].year = today->tm_year;
 	position_date[i].month = today->tm_mon;
@


1.1.1.1
log
@Import f1spirit, a remake of Konami's original F1-Spirit from 1987.

F-1 Spirit is a racing game. You will race with many different types
of cars, starting by Stock or Rally cars, and finishing by driving F1
cars (once you have classified for it by passing for F3, F3000 and
Endurance cars).

Note that this requires DRI, the game is barely usable otherwise.
@
text
@@
