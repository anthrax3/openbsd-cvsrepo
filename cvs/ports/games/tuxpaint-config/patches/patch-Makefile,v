head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.22
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.20
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.18
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.16
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.14
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.12
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.10
	OPENBSD_5_0:1.4.0.8
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.6
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.4
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	ajacoutot_20070120:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2015.07.19.21.44.07;	author jasper;	state Exp;
branches;
next	1.4;
commitid	8pPFGQ9p45ZMEZqc;

1.4
date	2009.12.20.21.13.31;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2009.12.17.17.11.00;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.07.04.17.36.00;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.20.14.18.10;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.20.14.18.10;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@use install -D and drop ginstall dependency where applicable
@
text
@$OpenBSD: patch-Makefile,v 1.4 2009/12/20 21:13:31 naddy Exp $
--- Makefile.orig	Fri May 29 00:08:08 2009
+++ Makefile	Sun Dec 20 22:09:37 2009
@@@@ -20,7 +20,6 @@@@ VER_DATE=`date +"%Y-%m-%d"`
 
 # Where to install things:
 
-PREFIX=/usr/local
 
 
 # Program:
@@@@ -37,16 +36,12 @@@@ DATA_PREFIX=$(PREFIX)/share/tuxpaint-config/
 # Docs and man page:
 
 DOC_PREFIX=$(PREFIX)/share/doc/tuxpaint-config/
-MAN_PREFIX=$(PREFIX)/share/man/
+MAN_PREFIX=$(PREFIX)/man/
 
 
 # Tux Paint's 'System-wide' Config file:
 
-ifeq ($(PREFIX),/usr)
-  CONFDIR=/etc/tuxpaint
-else
-  CONFDIR=$(PREFIX)/etc/tuxpaint
-endif
+CONFDIR=${SYSCONFDIR}/tuxpaint
 
 
 # Icons and launchers:
@@@@ -84,7 +79,6 @@@@ FLTK_LIBS=`fltk-config --ldflags`
 PAPER_LIB=-lpaper
 
 # Default CFLAGS:
-CFLAGS=-O2 -Wall
 
 # The entire set of CFLAGS:
 ALL_CFLAGS=$(CFLAGS) $(FLTK_CFLAGS) -DDATA_PREFIX=\"$(DATA_PREFIX)\" \
@@@@ -96,11 +90,6 @@@@ ALL_CFLAGS=$(CFLAGS) $(FLTK_CFLAGS) -DDATA_PREFIX=\"$(
 # "make" with no arguments builds the program and man page from sources:
 
 all:	tuxpaint-config translations
-	@@echo
-	@@echo "Done compiling."
-	@@echo "Now (probably as 'root' superuser), run 'make install'"
-	@@echo "to install Tux Paint Configuration Tool."
-	@@echo
 
 releaseclean:
 	@@echo
@@@@ -153,16 +142,9 @@@@ install-win32:
 # (depending on the *PREFIX variables at the top, you probably need
 # to do this as superuser ("root"))
 
-install:	install-bin install-data install-man install-doc \
-		install-gnome install-kde install-kde-icons \
+install:	install-bin install-man install-doc \
+		install-gnome \
 		install-icon install-gettext
-	@@echo
-	@@echo "All done! Now (preferably NOT as 'root' superuser),"
-	@@echo "you can type the command 'tuxpaint-config' to run the"
-	@@echo "configuration tool!"
-	@@echo
-	@@echo "Enjoy!"
-	@@echo
 
 
 # "make clean" deletes the program, the compiled objects and the
@@@@ -240,23 +222,15 @@@@ install-kde-icons:
 # and the 24-color 32x32 XPM (for other Window managers):
 
 install-icon:
-	@@echo
-	@@echo "...Installing launcher icon graphics..."
-	@@install -d $(ICON_PREFIX)
-	@@cp data/images/icon.png $(ICON_PREFIX)tuxpaint-config.png
-	@@chmod 644 $(ICON_PREFIX)tuxpaint-config.png
-	@@install -d $(X11_ICON_PREFIX)
-	@@cp data/images/icon32x32.xpm $(X11_ICON_PREFIX)tuxpaint-config.xpm
-	@@chmod 644 $(X11_ICON_PREFIX)tuxpaint-config.xpm
+	${BSD_INSTALL_DATA_DIR} $(ICON_PREFIX)
+	${BSD_INSTALL_DATA} data/images/icon.png $(ICON_PREFIX)tuxpaint-config.png
+	${BSD_INSTALL_DATA} data/images/icon32x32.xpm $(ICON_PREFIX)tuxpaint-config.xpm
 
 
 # Install the program:
 
 install-bin:
-	@@echo
-	@@echo "...Installing program itself..."
-	@@cp tuxpaint-config $(BIN_PREFIX)
-	@@chmod a+rx,g-w,o-w $(BIN_PREFIX)/tuxpaint-config$(EXE_EXT)
+	${BSD_INSTALL_PROGRAM} tuxpaint-config $(BIN_PREFIX)
 
 
 # Install the data (sound, graphics, fonts):
@@@@ -272,31 +246,15 @@@@ install-data:
 # Install the text documentation:
 
 install-doc:
-	@@echo
-	@@echo "...Installing documentation..."
-	@@echo "(English)"
-	@@install -d $(DOC_PREFIX)
-	@@install -d $(DOC_PREFIX)/html
-	@@cp docs/AUTHORS.txt $(DOC_PREFIX)
-	@@cp docs/CHANGES.txt $(DOC_PREFIX)
-	@@cp docs/COPYING.txt $(DOC_PREFIX)
-	@@cp docs/README.txt $(DOC_PREFIX)
-	@@cp docs/html/README.html $(DOC_PREFIX)/html
-	@@cp docs/TODO.txt $(DOC_PREFIX)
-	@@echo "(...Setting permissions)"
-	@@chmod -R a+rx,g-w,o-w $(DOC_PREFIX)
+	${BSD_INSTALL_DATA_DIR} $(DOC_PREFIX)
+	${BSD_INSTALL_DATA} docs/README.txt $(DOC_PREFIX)
 
 
 # Install the man page:
 
 install-man:
-	@@echo "...Installing man pages..."
-	# man1 directory...
-	@@install -d $(MAN_PREFIX)/man1/
-	# tuxpaint-config.1
-	@@cp src/tuxpaint-config.1 $(MAN_PREFIX)/man1/
-	@@gzip -9f $(MAN_PREFIX)/man1/tuxpaint-config.1
-	@@chmod a+rx,g-w,o-w $(MAN_PREFIX)/man1/tuxpaint-config.1.gz
+	${BSD_INSTALL_MAN_DIR} $(MAN_PREFIX)/man1/
+	${BSD_INSTALL_MAN} src/tuxpaint-config.1 $(MAN_PREFIX)/man1/
 
 
 # Build the program!
@@@@ -304,22 +262,22 @@@@ install-man:
 tuxpaint-config:	obj/tuxpaint-config.o obj/tuxpaint-config2.o	\
 			obj/defaults.o $(ARCH_LIBS)
 	@@echo Linking
-	$(CXX) $(ALL_CFLAGS) -o tuxpaint-config obj/tuxpaint-config.o 	\
+	$(CXX) $(ALL_CFLAGS) -liconv -lintl -o tuxpaint-config obj/tuxpaint-config.o 	\
 			obj/tuxpaint-config2.o obj/defaults.o $(ARCH_LIBS) \
 			$(FLTK_LIBS) $(ARCH_LINKS) $(PAPER_LIB)
 
 
 # Build the object for the program!
 
-obj/tuxpaint-config.o:	src/tuxpaint-config.cxx src/version.h src/about.h
+obj/tuxpaint-config.o:	src/tuxpaint-config.cxx obj src/version.h src/about.h
 	@@echo Compiling tuxpaint-config.cxx
 	$(CXX) $(ALL_CFLAGS) -c src/tuxpaint-config.cxx -o obj/tuxpaint-config.o
 
-obj/tuxpaint-config2.o:	src/tuxpaint-config2.cxx src/version.h src/about.h
+obj/tuxpaint-config2.o:	src/tuxpaint-config2.cxx obj src/version.h src/about.h
 	@@echo Compiling tuxpaint-config2.cxx
 	$(CXX) $(ALL_CFLAGS) -c src/tuxpaint-config2.cxx -o obj/tuxpaint-config2.o
 
-obj/defaults.o:	src/defaults.cxx
+obj/defaults.o:	src/defaults.cxx obj
 	@@echo Compiling defaults.cxx
 	$(CXX) $(ALL_CFLAGS) -c src/defaults.cxx -o obj/defaults.o
 
@


1.4
log
@correctly install message catalogs
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.3 2009/12/17 17:11:00 ajacoutot Exp $
a160 10
@@@@ -340,7 +298,8 @@@@ MOFILES:=$(patsubst src/po/%.po,trans/%.mo,$(POFILES))
 INSTALLED_MOFILES:=$(patsubst trans/%.mo,$(LOCALE_PREFIX)/%/LC_MESSAGES/tuxpaint-config.mo,$(MOFILES))
 
 $(INSTALLED_MOFILES): $(LOCALE_PREFIX)/%/LC_MESSAGES/tuxpaint-config.mo: trans/%.mo
-	install -D -m 644 $< $@@
+	$(BSD_INSTALL_DATA_DIR) $(@@D)
+	$(BSD_INSTALL_DATA) $< $@@
 
 .PHONY: uninstall-i18n
 uninstall-i18n:
@


1.3
log
@Update to tuxpaint-config-0.0.12.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.2 2007/07/04 17:36:00 ajacoutot Exp $
d3 1
a3 1
+++ Makefile	Thu Dec 17 17:44:16 2009
d161 1
a161 1
@@@@ -340,7 +298,10 @@@@ MOFILES:=$(patsubst src/po/%.po,trans/%.mo,$(POFILES))
d166 2
a167 4
+	for i in src/po/*.po ; do \
+		${BSD_INSTALL_DATA_DIR} ${PREFIX}/share/locale/`basename $${i} .po`/LC_MESSAGES ; \
+		${BSD_INSTALL_DATA} trans/`basename $${i} .po`.mo \
+			${PREFIX}/share/locale/`basename $${i} .po`/LC_MESSAGES/ ; done
@


1.2
log
@- update to tuxpaint-config-0.0.8
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile,v 1.1.1.1 2007/01/20 14:18:10 ajacoutot Exp $
--- Makefile.orig	Sun Jul  1 17:06:18 2007
+++ Makefile	Wed Jul  4 12:37:25 2007
d31 1
a31 1
@@@@ -77,7 +72,6 @@@@ FLTK_LIBS=`fltk-config --ldflags`
d39 1
a39 1
@@@@ -89,11 +83,6 @@@@ ALL_CFLAGS=$(CFLAGS) $(FLTK_CFLAGS) -DDATA_PREFIX=\"$(
d51 1
a51 1
@@@@ -146,16 +135,9 @@@@ install-win32:
d70 1
a70 1
@@@@ -233,23 +215,15 @@@@ install-kde-icons:
d83 2
a84 2
+	${BSD_INSTALL_DATA} ../data/images/icon.png $(ICON_PREFIX)tuxpaint-config.png
+	${BSD_INSTALL_DATA} ../data/images/icon32x32.xpm $(ICON_PREFIX)tuxpaint-config.xpm
d94 1
a94 1
+	${BSD_INSTALL_PROGRAM} ../tuxpaint-config $(BIN_PREFIX)
d98 1
a98 9
@@@@ -265,39 +239,21 @@@@ install-data:
 # Install the translated text:
 
 install-gettext:
-	@@echo
-	@@echo "...Installing translation files..."
 
 
 
d116 1
a116 1
+	${BSD_INSTALL_DATA} ../docs/README.txt $(DOC_PREFIX)
d130 1
a130 1
+	${BSD_INSTALL_MAN} ../src/tuxpaint-config.1 $(MAN_PREFIX)/man1/
d134 1
a134 1
@@@@ -305,22 +261,22 @@@@ install-man:
d138 2
a139 2
-	@@$(CXX) $(ALL_CFLAGS) -o tuxpaint-config obj/tuxpaint-config.o 	\
+	@@$(CXX) $(ALL_CFLAGS) -liconv -lintl -o tuxpaint-config obj/tuxpaint-config.o 	\
d149 1
a149 1
 	@@$(CXX) $(ALL_CFLAGS) -c src/tuxpaint-config.cxx -o obj/tuxpaint-config.o
d154 1
a154 1
 	@@$(CXX) $(ALL_CFLAGS) -c src/tuxpaint-config2.cxx -o obj/tuxpaint-config2.o
d159 11
a169 1
 	@@$(CXX) $(ALL_CFLAGS) -c src/defaults.cxx -o obj/defaults.o
d171 2
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.orig	Thu Oct 19 09:42:09 2006
+++ Makefile	Fri Jan 19 23:13:38 2007
@@@@ -19,7 +19,6 @@@@ VER_DATE=`date +"%Y-%m-%d"`
d12 1
a12 1
@@@@ -36,16 +35,12 @@@@ DATA_PREFIX=$(PREFIX)/share/tuxpaint-con
d31 2
a32 6
@@@@ -71,10 +66,10 @@@@ NOSOUNDFLAG=__SOUND
 # Libraries, paths, and flags:
 
 FLTK_CFLAGS=`fltk-config --cxxflags`
-FLTK_LIBS=`fltk-config --ldstaticflags`
+FLTK_LIBS=`fltk-config --ldflags`
a35 1
+#CFLAGS=-O2 -Wall
d39 1
a39 1
@@@@ -86,11 +81,6 @@@@ ALL_CFLAGS=$(CFLAGS) $(FLTK_CFLAGS) -DDA
d51 1
a51 1
@@@@ -142,16 +132,9 @@@@ install-win32:
d70 1
a70 1
@@@@ -228,23 +211,15 @@@@ install-kde-icons:
d76 6
a81 6
-	install -d $(ICON_PREFIX)
-	cp data/images/icon.png $(ICON_PREFIX)tuxpaint-config.png
-	chmod 644 $(ICON_PREFIX)tuxpaint-config.png
-	install -d $(X11_ICON_PREFIX)
-	cp data/images/icon32x32.xpm $(X11_ICON_PREFIX)tuxpaint-config.xpm
-	chmod 644 $(X11_ICON_PREFIX)tuxpaint-config.xpm
d92 2
a93 2
-	cp tuxpaint-config $(BIN_PREFIX)
-	chmod a+rx,g-w,o-w $(BIN_PREFIX)/tuxpaint-config$(EXE_EXT)
d98 1
a98 1
@@@@ -260,44 +235,28 @@@@ install-data:
d113 8
a120 6
-	install -d $(DOC_PREFIX)
-	cp docs/AUTHORS.txt $(DOC_PREFIX)
-	cp docs/CHANGES.txt $(DOC_PREFIX)
-	cp docs/COPYING.txt $(DOC_PREFIX)
-	cp docs/README.txt $(DOC_PREFIX)
-	cp docs/TODO.txt $(DOC_PREFIX)
d122 1
a122 1
-	chmod a+rx,g-w,o-w $(DOC_PREFIX)
d132 1
a132 1
-	install -d $(MAN_PREFIX)/man1/
d134 3
a136 3
-	cp src/tuxpaint-config.1 $(MAN_PREFIX)/man1/
-	gzip -9f $(MAN_PREFIX)/man1/tuxpaint-config.1
-	chmod a+rx,g-w,o-w $(MAN_PREFIX)/man1/tuxpaint-config.1.gz
d142 1
a142 1
 
d145 3
a147 2
-	$(CXX) $(ALL_CFLAGS) -o tuxpaint-config obj/tuxpaint-config.o 	\
+	$(CXX) $(ALL_CFLAGS) -liconv -lintl -o tuxpaint-config obj/tuxpaint-config.o 	\
d149 19
a167 1
 			$(FLTK_LIBS) $(ARCH_LINKS)
@


1.1.1.1
log
@Import tuxpaint-config-0.0.7

Tux Paint Config is a graphical configuration tool for Tux Paint.
It provides a point-and-click interface that allows parents and teachers
to alter Tux Paint's behavior (disable sound effects, run in full-screen
mode, etc) without needing to manipulate a text-based configuration
file.

ok steven@@
@
text
@@
