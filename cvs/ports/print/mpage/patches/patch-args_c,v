head	1.6;
access;
symbols
	OPENBSD_6_1:1.5.0.28
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.26
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.22
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.24
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.20
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.18
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.16
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.14
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.12
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.10
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.8
	OPENBSD_5_0:1.5.0.6
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.4
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.3.0.30
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.28
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.26
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.24
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.22
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.20
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.18
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.16
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.14
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.12
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.10
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.8
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.6
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.4
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2017.08.23.07.45.00;	author jca;	state Exp;
branches;
next	1.5;
commitid	D1cWsejxO8OldXBP;

1.5
date	2010.05.26.13.53.16;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.19.14.55.00;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2002.11.13.17.15.49;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.08.02.11.32.54;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.07.17.03.37;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to mpage-2.5.7 (move to gplv2+)

from Ian McWilliam (maintainer)
@
text
@$OpenBSD: patch-args_c,v 1.5 2010/05/26 13:53:16 jasper Exp $
Index: args.c
--- args.c.orig
+++ args.c
@@@@ -44,6 +44,7 @@@@ do_args(int argc, char **argv, int envflag)
     int finished;
     int currarg;
     int opterrors;
+    size_t len;
 
     int i;
 
@@@@ -160,18 +161,17 @@@@ do_args(int argc, char **argv, int envflag)
                         break;
                 case 'C':    /* select character definitions */
                         consumed = 1;
+                        len = (strlen(libdir) + strlen(optstr) + 2);
                         if (*++optstr) { /* did we get a encoding name ? */
-                            if ((charvec_file = (char *) malloc(strlen(libdir) +
-                                                                strlen(optstr) +
-                                                                2)) == NULL) {
+                            if ((charvec_file = (char *) malloc(len)) == NULL) {
                                 perror(optstr);
                                 fprintf(stderr,
                                     "ignoring character encoding definition\n");
                             }
                             else {
-                                (void) strcpy(charvec_file, libdir);
-                                (void) strcat(charvec_file, "/");
-                                (void) strcat(charvec_file, optstr);
+                                (void) strlcpy(charvec_file, libdir, len);
+                                (void) strlcat(charvec_file, "/", len);
+                                (void) strlcat(charvec_file, optstr, len);
                                 opt_encoding = 1;
                             }
                         }
@


1.5
log
@- update mpage to 2.5.6
- update maintainer address
- regen plist

from ian mcwilliam (MAINTAINER)
@
text
@d1 5
a5 4
$OpenBSD: patch-args_c,v 1.4 2010/05/19 14:55:00 espie Exp $
--- args.c.orig	Mon May 31 05:37:45 2004
+++ args.c	Fri May 21 11:57:57 2010
@@@@ -36,6 +36,7 @@@@ do_args(int argc, char **argv, int envflag)
d13 1
a13 1
@@@@ -152,18 +153,17 @@@@ do_args(int argc, char **argv, int envflag)
@


1.4
log
@fix declaration order (gcc4)
@
text
@d1 5
a5 5
$OpenBSD: patch-args_c,v 1.3 2002/11/13 17:15:49 naddy Exp $
--- args.c.orig	Wed Oct 16 23:22:48 2002
+++ args.c	Wed May 19 14:52:00 2010
@@@@ -35,6 +35,7 @@@@ do_args(int argc, char **argv, int envflag)
     int consumed;
d12 1
a12 1
@@@@ -142,18 +143,17 @@@@ do_args(int argc, char **argv, int envflag)
@


1.3
log
@Update to 2.5.3:  Various bug fixes.
From: Ian McWilliam <i.mcwilliam@@uws.edu.au>
@
text
@d1 4
a4 4
$OpenBSD: patch-args_c,v 1.2 2002/08/02 11:32:54 naddy Exp $
--- args.c.orig	Thu Oct 17 07:22:48 2002
+++ args.c	Mon Nov 11 05:43:01 2002
@@@@ -35,6 +35,7 @@@@ do_args(int argc, char **argv, int envfl
d12 1
a12 1
@@@@ -142,18 +143,17 @@@@ do_args(int argc, char **argv, int envfl
@


1.2
log
@Remove spurious strcpy() that writes to random memory location.
From Guy Middleton <guy@@crtsol.com>.
@
text
@d1 3
a3 3
$OpenBSD: patch-args_c,v 1.1 2002/07/07 17:03:37 naddy Exp $
--- args.c.orig	Wed Nov 14 22:05:10 2001
+++ args.c	Fri Aug  2 13:23:06 2002
a35 8
@@@@ -442,7 +442,6 @@@@ do_env()
         libdir = env;
 
     if ((env = getenv("MPAGE")) != NULL) {
-        strcpy(copy, env);
         if ((copy = strdup(env)) == NULL) {
             fprintf(stderr, "%s: Unable to alloc memory for environment args\n",
                     MPAGE);
@


1.1
log
@* Update to 2.5.2.
* All-around clean-up.
* Fix licensing information.

Once upon a time okayed by maintainer.
@
text
@d1 3
a3 3
$OpenBSD$
--- args.c.orig	Sun May 19 00:35:16 2002
+++ args.c	Sun May 19 00:38:18 2002
d36 1
a36 1
@@@@ -442,7 +442,7 @@@@ do_env()
a40 1
+        (void)strlcpy(copy, env, sizeof(copy));
@

