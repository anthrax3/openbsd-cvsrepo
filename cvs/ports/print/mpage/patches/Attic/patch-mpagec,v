head	1.2;
access;
symbols
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2002.07.07.17.03.37;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	99.12.14.06.42.22;	author kevlo;	state Exp;
branches;
next	;


desc
@@


1.2
log
@* Update to 2.5.2.
* All-around clean-up.
* Fix licensing information.

Once upon a time okayed by maintainer.
@
text
@--- mpage.c.orig	Wed Nov 26 10:14:47 1997
+++ mpage.c	Mon Dec 13 19:35:15 1999
@@@@ -77,10 +77,10 @@@@
      */
     if (doprint) {
         if (printque != NULL)
-            (void) sprintf(outcommand, "%s %s%s",
+            (void) snprintf(outcommand, sizeof(outcommand), "%s %s%s",
                            printprog, printarg, printque);
         else
-            (void) strcpy(outcommand, printprog);
+            (void) strlcpy(outcommand, printprog, sizeof(outcommand));
         if ((outfd = popen(outcommand, "w")) == NULL) {
             fprintf(stderr, "%s: cannot create pipe for '%s'\n",
                             MPAGE, outcommand);
@@@@ -277,7 +277,7 @@@@
                 exit(1);
             }
             while (fgets(buf, LINESIZE, charfp) != NULL) {
-                if (*buf != '%' && *buf != '\n')
+                if (*buf != '%' && *buf != '\n') {
                     if (first_encoding == -1) {
                         first_encoding = atoi(buf);
                         last_encoding = atoi(strchr(buf, ' '));
@@@@ -286,11 +286,12 @@@@
                                         first_encoding, last_encoding);
 #endif
                     }
-                    else
+                    else {
                         fprintf(outfd, "%s", buf);
-            }
+			} 
+           }
         }
-        else { /* use internal default encoding */
+       } else { /* use internal default encoding */
             int i;
 
             first_encoding = encoding_table_first;
@


1.1
log
@Remove all warnings. Change all strcpy -> strlcpy, strcat-> strlcat,
and  sprintf -> snprintf.
@
text
@@

