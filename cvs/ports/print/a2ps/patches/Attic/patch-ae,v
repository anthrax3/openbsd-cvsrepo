head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	98.09.30.03.27.08;	author angelos;	state dead;
branches;
next	1.1;

1.1
date	98.06.19.17.34.56;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to version 4.10.4
@
text
@*** src/generate.c.orig	Thu Jun 18 19:21:32 1998
--- src/generate.c	Thu Jun 18 19:26:31 1998
***************
*** 83,89 ****
    struct file_job * file_job;
    struct stat statbuf;		/* to get file modification time */
    struct tm *tm;
!   char * sample_file = NULL;	/* the name of the file on which run file(1) */
  
    a2ps_open_input_session (job, name);
    file_job = CURRENT_FILE (job);
--- 83,89 ----
    struct file_job * file_job;
    struct stat statbuf;		/* to get file modification time */
    struct tm *tm;
!   char sample_file[40];	/* the name of the file on which run file(1) */
  
    a2ps_open_input_session (job, name);
    file_job = CURRENT_FILE (job);
***************
*** 96,102 ****
        /* Create the buffer in charge of stdin */
        buffer_stream_set (res, stdin, end_of_line);
        /* Ask it to make a sample of the file */
!       sample_file = tmpnam (NULL);
        buffer_sample_get (res, sample_file);
      }
    else
--- 96,103 ----
        /* Create the buffer in charge of stdin */
        buffer_stream_set (res, stdin, end_of_line);
        /* Ask it to make a sample of the file */
!       snprintf(sample_file, 40, "%s/a2ps.XXXXXXXX", P_tmpdir);
!       close(mkstemp(sample_file));
        buffer_sample_get (res, sample_file);
      }
    else
@


1.1
log
@Fix some tempnam/tmpnam usages
@
text
@@

