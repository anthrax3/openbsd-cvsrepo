head	1.62;
access;
symbols
	OPENBSD_6_1:1.61.0.4
	OPENBSD_6_1_BASE:1.61
	OPENBSD_6_0:1.61.0.2
	OPENBSD_6_0_BASE:1.61
	OPENBSD_5_9:1.60.0.2
	OPENBSD_5_9_BASE:1.60
	OPENBSD_5_8:1.59.0.4
	OPENBSD_5_8_BASE:1.59
	OPENBSD_5_7:1.58.0.2
	OPENBSD_5_7_BASE:1.58
	OPENBSD_5_6:1.57.0.4
	OPENBSD_5_6_BASE:1.57
	OPENBSD_5_5:1.57.0.2
	OPENBSD_5_5_BASE:1.57
	OPENBSD_5_4:1.54.0.2
	OPENBSD_5_4_BASE:1.54
	OPENBSD_5_3:1.52.0.2
	OPENBSD_5_3_BASE:1.52
	OPENBSD_5_2:1.49.0.2
	OPENBSD_5_2_BASE:1.49
	OPENBSD_5_1_BASE:1.47
	OPENBSD_5_1:1.47.0.6
	OPENBSD_5_0:1.47.0.4
	OPENBSD_5_0_BASE:1.47
	OPENBSD_4_9:1.47.0.2
	OPENBSD_4_9_BASE:1.47
	OPENBSD_4_8:1.45.0.2
	OPENBSD_4_8_BASE:1.45
	OPENBSD_4_7:1.42.0.4
	OPENBSD_4_7_BASE:1.42
	OPENBSD_4_6:1.42.0.2
	OPENBSD_4_6_BASE:1.42
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.38.0.4
	OPENBSD_4_4_BASE:1.38
	OPENBSD_4_3:1.38.0.2
	OPENBSD_4_3_BASE:1.38
	OPENBSD_4_2:1.37.0.2
	OPENBSD_4_2_BASE:1.37
	OPENBSD_4_1:1.36.0.6
	OPENBSD_4_1_BASE:1.36
	OPENBSD_4_0:1.36.0.4
	OPENBSD_4_0_BASE:1.36
	OPENBSD_3_9:1.36.0.2
	OPENBSD_3_9_BASE:1.36
	OPENBSD_3_8:1.31.0.4
	OPENBSD_3_8_BASE:1.31
	OPENBSD_3_7:1.31.0.2
	OPENBSD_3_7_BASE:1.31
	OPENBSD_3_6:1.29.0.2
	OPENBSD_3_6_BASE:1.29
	OPENBSD_3_5:1.28.0.6
	OPENBSD_3_5_BASE:1.28
	OPENBSD_3_4:1.28.0.4
	OPENBSD_3_4_BASE:1.28
	OPENBSD_3_3:1.28.0.2
	OPENBSD_3_3_BASE:1.28
	OPENBSD_3_2:1.27.0.6
	OPENBSD_3_2_BASE:1.27
	OPENBSD_3_1:1.27.0.4
	OPENBSD_3_1_BASE:1.27
	OPENBSD_3_0:1.27.0.2
	OPENBSD_3_0_BASE:1.27
	OPENBSD_2_9_TRACKING_SWITCH:1.26
	OPENBSD_2_9:1.25.0.4
	OPENBSD_2_9_BASE:1.25
	OPENBSD_2_8:1.25.0.2
	OPENBSD_2_8_BASE:1.25
	OPENBSD_2_7:1.21.0.2
	OPENBSD_2_7_BASE:1.21
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.9.0.2
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	TOBY_19980131:1.1.1.1
	TOBY:1.1.1;
locks; strict;
comment	@# @;


1.62
date	2017.09.26.08.57.19;	author ajacoutot;	state Exp;
branches;
next	1.61;
commitid	GqBbOOutUq2vN1xz;

1.61
date	2016.03.11.19.59.16;	author naddy;	state Exp;
branches;
next	1.60;
commitid	pguKLBEFv33DrgKU;

1.60
date	2015.11.17.08.38.52;	author ajacoutot;	state Exp;
branches;
next	1.59;
commitid	j5owKhnqxW2pO41M;

1.59
date	2015.04.06.21.05.07;	author ajacoutot;	state Exp;
branches
	1.59.4.1;
next	1.58;
commitid	UHU0EaklEoJbSKjp;

1.58
date	2014.10.31.15.38.22;	author dcoppa;	state Exp;
branches;
next	1.57;
commitid	ALmaKkW5RR89egyb;

1.57
date	2014.02.03.19.06.42;	author jasper;	state Exp;
branches;
next	1.56;

1.56
date	2013.11.09.23.19.03;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2013.11.02.08.44.19;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2013.03.11.11.37.53;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2013.02.09.14.49.52;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2013.02.07.07.39.04;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2012.11.11.09.12.55;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2012.02.18.09.08.16;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2012.02.16.22.13.05;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2010.11.20.09.48.38;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2010.10.18.21.25.08;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2010.07.22.16.18.05;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.07.20.14.58.47;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2010.03.21.10.14.50;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2009.04.09.09.25.20;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2009.01.08.09.54.32;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2009.01.07.17.51.16;	author jasper;	state Exp;
branches;
next	1.39;

1.39
date	2008.11.23.20.28.32;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2007.09.15.21.36.44;	author merdely;	state Exp;
branches;
next	1.37;

1.37
date	2007.08.04.22.04.11;	author kili;	state Exp;
branches;
next	1.36;

1.36
date	2006.02.19.17.32.59;	author alek;	state Exp;
branches;
next	1.35;

1.35
date	2006.01.19.14.20.17;	author mbalmer;	state Exp;
branches;
next	1.34;

1.34
date	2005.12.24.09.14.42;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2005.12.24.05.30.25;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2005.12.23.20.22.30;	author mbalmer;	state Exp;
branches;
next	1.31;

1.31
date	2005.02.11.19.44.38;	author alek;	state Exp;
branches;
next	1.30;

1.30
date	2004.12.25.20.58.34;	author alek;	state Exp;
branches;
next	1.29;

1.29
date	2004.08.10.09.26.13;	author xsa;	state Exp;
branches;
next	1.28;

1.28
date	2002.12.14.14.09.07;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2001.09.28.06.02.14;	author pvalchev;	state Exp;
branches;
next	1.26;

1.26
date	2001.05.06.03.19.44;	author lebel;	state Exp;
branches;
next	1.25;

1.25
date	2000.10.22.16.16.29;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2000.07.04.01.33.56;	author krw;	state Exp;
branches;
next	1.23;

1.23
date	2000.06.11.02.17.22;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2000.06.11.01.13.42;	author weingart;	state Exp;
branches;
next	1.21;

1.21
date	2000.04.22.12.12.07;	author turan;	state Exp;
branches
	1.21.2.1;
next	1.20;

1.20
date	2000.04.11.06.09.57;	author turan;	state Exp;
branches;
next	1.19;

1.19
date	2000.04.09.17.37.49;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2000.03.24.23.28.29;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2000.03.19.16.43.41;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.05.18.30.40;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.15.05.05.04;	author turan;	state Exp;
branches;
next	1.14;

1.14
date	2000.02.12.08.02.29;	author turan;	state Exp;
branches;
next	1.13;

1.13
date	99.11.27.13.33.50;	author kevlo;	state Exp;
branches;
next	1.12;

1.12
date	99.10.29.09.40.16;	author turan;	state Exp;
branches;
next	1.11;

1.11
date	99.10.26.04.56.39;	author turan;	state Exp;
branches;
next	1.10;

1.10
date	99.09.14.10.01.31;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	99.03.02.04.41.08;	author marc;	state Exp;
branches;
next	1.8;

1.8
date	99.02.21.04.26.15;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	99.02.18.02.37.37;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	98.09.30.03.27.07;	author angelos;	state Exp;
branches;
next	1.5;

1.5
date	98.08.10.22.01.56;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	98.06.18.22.55.45;	author angelos;	state Exp;
branches;
next	1.3;

1.3
date	98.06.10.20.18.00;	author weingart;	state Exp;
branches;
next	1.2;

1.2
date	98.04.28.02.17.11;	author angelos;	state Exp;
branches;
next	1.1;

1.1
date	98.01.31.21.54.44;	author weingart;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.01.31.21.54.44;	author weingart;	state Exp;
branches;
next	;

1.21.2.1
date	2000.09.15.05.12.58;	author marc;	state Exp;
branches;
next	;

1.54.2.1
date	2014.02.03.19.09.34;	author jasper;	state Exp;
branches;
next	;

1.59.4.1
date	2015.11.17.08.40.24;	author ajacoutot;	state Exp;
branches;
next	;
commitid	BlcongnKJUjRFVpX;


desc
@@


1.62
log
@When using cups(1), lp.default should be set to ${LOCALBASE}/bin/lpr in
${SYSCONFDIR}/a2ps-site.cfg.

original diff from benno@@
@
text
@# $OpenBSD: Makefile,v 1.61 2016/03/11 19:59:16 naddy Exp $

COMMENT=	format files for printing on PostScript printers

DISTNAME=	a2ps-4.14
REVISION=	12

SHARED_LIBS +=  a2ps                 2.0      # 2.0

CATEGORIES=	print

HOMEPAGE=	https://www.gnu.org/software/a2ps/

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv3 or later, includes AFM files from Adobe with still unclear
# terms (see ${WRKSRC}/afm/MustRead.html).
PERMIT_PACKAGE_CDROM=	without charge
PERMIT_PACKAGE_FTP=	Yes

WANTLIB += c m paper

MASTER_SITES=	${MASTER_SITE_GNU:=a2ps/}

MODULES=	devel/gettext

BUILD_DEPENDS=	devel/gperf \
		print/psutils

RUN_DEPENDS=	print/psutils

LIB_DEPENDS=	print/libpaper

MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/auxdir

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		ac_cv_prog_EMACS=no \
		lispdir=${PREFIX}/share/a2ps/emacs

.for p in bzip2 gv ghostview dvips pdf2ps tex latex ps2pdf \
	  bzip distill netscape html2ps grog convert
CONFIGURE_ENV+= ac_cv_prog_COM_$p=no
.endfor

pre-configure:
	${SUBST_CMD} ${WRKSRC}/configure \
		${WRKSRC}/etc/a2ps_cfg.in \
		${WRKSRC}/etc/a2ps-site.cfg.in

pre-build:
	/usr/bin/touch $(WRKSRC)/doc/*.info
	/usr/bin/touch $(WRKSRC)/doc/*.dvi

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/a2ps
	mv ${WRKINST}${SYSCONFDIR}/a2ps.cfg ${PREFIX}/share/examples/a2ps
	mv ${WRKINST}${SYSCONFDIR}/a2ps-site.cfg ${PREFIX}/share/examples/a2ps

.include <bsd.port.mk>
@


1.61
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2015/11/17 08:38:52 ajacoutot Exp $
d6 1
a6 1
REVISION=	11
d49 2
a50 1
		${WRKSRC}/etc/a2ps_cfg.in
@


1.60
log
@SECURITY fix for CVE-2015-8107:
http://www.openwall.com/lists/oss-security/2015/11/16/4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2015/04/06 21:05:07 ajacoutot Exp $
a36 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
@


1.59
log
@Cope with recent fonts directory change in ghostscript.

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2014/10/31 15:38:22 dcoppa Exp $
d6 1
a6 1
REVISION=	10
@


1.59.4.1
log
@SECURITY fix for CVE-2015-8107:
http://www.openwall.com/lists/oss-security/2015/11/16/4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2015/04/06 21:05:07 ajacoutot Exp $
d6 1
a6 1
REVISION=	11
@


1.58
log
@
Remove the last vestiges of acroread

spotted by naddy@@
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2014/02/03 19:06:42 jasper Exp $
d6 1
a6 1
REVISION=	9
@


1.57
log
@Security fix for insecure temporary file use
(a CVE identifier has been requested but not assigned as of yet)

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/11/09 23:19:03 naddy Exp $
d43 1
a43 1
.for p in bzip2 gv ghostview dvips pdf2ps acroread tex latex ps2pdf \
@


1.56
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/11/02 08:44:19 ajacoutot Exp $
d6 1
a6 1
REVISION=	8
@


1.55
log
@Use libpaper to set the default papersize and remove hardcoded FLAVORs.
Fix LibraryPath in a2ps.cfg.
Silence some warnings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/03/21 08:46:35 ajacoutot Exp $
d6 1
a6 1
REVISION=	7
d12 1
a12 1
HOMEPAGE=	http://www.gnu.org/software/a2ps/
@


1.54
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/03/11 11:37:53 espie Exp $
d6 4
a9 1
REVISION=	6
a10 2
SHARED_LIBS=	a2ps	2.0
MODGNU_SHARED_LIBS=a2ps	''
d21 1
a21 1
WANTLIB=		c m
d27 2
a28 3
USE_GROFF =		Yes
CONFIGURE_STYLE=	gnu
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/auxdir
d30 1
a30 1
BUILD_DEPENDS=	devel/gperf
d32 1
a32 2
FLAVORS=	a4
FLAVOR?=
d34 1
a34 9
.if ${FLAVOR} == "a4"
PAPERSIZE=	A4
BUILD_DEPENDS+=	print/psutils,a4
RUN_DEPENDS+=	psutils-*-a4:print/psutils,a4
.else
PAPERSIZE=	Letter
BUILD_DEPENDS+=	print/psutils
RUN_DEPENDS+=	print/psutils
.endif
d36 2
a37 2
CONFIGURE_ARGS=	--with-medium=${PAPERSIZE} \
		${CONFIGURE_SHARED}
a40 1
		ac_cv_lib_paper_systempapername=no \
d44 1
a44 1
	bzip distill netscape html2ps
d57 3
a59 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/a2ps/etc
	${INSTALL_DATA} ${WRKSRC}/etc/a2ps.cfg ${PREFIX}/share/a2ps/etc
	${INSTALL_DATA} ${WRKSRC}/etc/a2ps-site.cfg ${PREFIX}/share/a2ps/etc
@


1.54.2.1
log
@Security fix for insecure temporary file use

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/03/21 08:46:35 ajacoutot Exp $
d6 1
a6 1
REVISION=	7
@


1.53
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/02/09 14:49:52 sthen Exp $
a25 1
USE_LIBTOOL=		Yes
@


1.52
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2013/02/07 07:39:04 ajacoutot Exp $
a17 1
PERMIT_DISTFILES_CDROM=	without charge
a18 1
PERMIT_DISTFILES_FTP=	Yes
@


1.51
log
@Match default BUILD_DEPENDS on psutils according to the choosen FLAVOR
(a4 or empty). It is not enforced since it does not modify the build and
we don't want to break bulk builds in case of psutils being already
installed with another FLAVOR; but this allows to
'env FLAVOR=a4 make install'
without the need to build psutils twice.

reported by Markus Lude
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/11/11 09:12:55 ajacoutot Exp $
d38 1
a38 1
.if ${FLAVOR:L} == "a4"
@


1.50
log
@Add a pkg-readmes explaining that some external helper tools may be
needed depending on what kind of file(s) one wants to convert.
e.g. ImageMagick is needed to converting image files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/02/18 09:08:16 ajacoutot Exp $
d33 1
a33 2
BUILD_DEPENDS=	print/psutils \
		devel/gperf
d40 1
d44 1
@


1.49
log
@Tweak DESCR after recent FLAVORs change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/02/16 22:13:05 ajacoutot Exp $
d6 1
a6 1
REVISION=	5
@


1.48
log
@Drop all FLAVORs except for a4. Uses letter size by default.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/11/20 09:48:38 espie Exp $
d6 1
a6 1
REVISION=	4
@


1.47
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/10/18 21:25:08 espie Exp $
d6 1
a6 1
REVISION=	3
d36 2
a37 2
FLAVORS=	a4 a4dj letter letterdj
FLAVOR?=	letter
a38 1
.if defined(FLAVOR)
d42 1
a42 7
.elif ${FLAVOR:L} == "a4dj"
PAPERSIZE=	A4dj
RUN_DEPENDS+=	psutils-*-a4:print/psutils,a4
.elif ${FLAVOR:L} == "letterdj"
PAPERSIZE=	Letterdj
RUN_DEPENDS+=	psutils-*-letter:print/psutils,letter
.elif ${FLAVOR:L} == "letter"
a43 2
RUN_DEPENDS+=	psutils-*-letter:print/psutils,letter
.else
a44 1
.endif
@


1.46
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/07/22 16:18:05 ajacoutot Exp $
d29 1
a29 1
USE_GROFF =	Yes
d33 2
a34 2
BUILD_DEPENDS=	::print/psutils \
		::devel/gperf
d42 1
a42 1
RUN_DEPENDS+=	:psutils-*-a4:print/psutils,a4
d45 1
a45 1
RUN_DEPENDS+=	:psutils-*-a4:print/psutils,a4
d48 1
a48 1
RUN_DEPENDS+=	:psutils-*-letter:print/psutils,letter
d51 1
a51 1
RUN_DEPENDS+=	:psutils-*-letter:print/psutils,letter
d53 1
a53 1
RUN_DEPENDS+=	::print/psutils
@


1.45
log
@It's official, I suck.
Unbreak bulks by not forcing to build_depends on a specific psutils
FLAVOR which is dumb and useless.
I blame the Tripes de Caen.

spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/07/20 14:58:47 ajacoutot Exp $
d29 1
@


1.44
log
@Synchronise a4* and letter* FLAVORS to the required psutils dependency
FLAVOR.
That is: a2ps--a4 now depends on psutils--a4...

prodded by eric@@ who was confused when installing a2ps-*-a4 it pulled
psutil-*-letter.

ok eric@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/03/21 10:14:50 ajacoutot Exp $
d32 1
a32 1
BUILD_DEPENDS=	${RUN_DEPENDS} \
@


1.43
log
@Take maintainership of these print ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/04/09 09:25:20 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
a31 1
RUN_DEPENDS=	::print/psutils
d41 1
d44 1
d47 1
d50 3
@


1.42
log
@- make sure Type1 fonts can be found at runtime
from Slackware Linux
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2009/01/08 09:54:32 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d12 2
@


1.41
log
@- this needs gperf to build

from Andreas Kahari on ports@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2009/01/07 17:51:16 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d63 2
a64 1
	${SUBST_CMD} ${WRKSRC}/configure
@


1.40
log
@- add a bunch of missing headers that fix a crash at startup on amd64.
* another example why checking build logs for implicit declarations
  makes sense

crash noticed by claudio@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/11/23 20:28:32 ajacoutot Exp $
d31 2
a32 1
BUILD_DEPENDS=	${RUN_DEPENDS}
@


1.39
log
@- update to a2ps-4.14
- tweak license marker (from kili@@)
- sync COMMENT with reality
- this needs psutils for most features
- enable delegations without needing to build_depends on the
corresponding programs so that printing for most formats will just work,
granted necessary utilities are installed

"commit it" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/09/15 21:36:44 merdely Exp $
d6 1
@


1.38
log
@Remove surrounding quotes in COMMENT/PERMIT_*/ERRORS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2007/08/04 22:04:11 kili Exp $
d3 1
a3 1
COMMENT=	format ascii files for printing on PostScript printers
d5 1
a5 3
DISTNAME=	a2ps-4.13b
PKGNAME=	${DISTNAME}p4
WRKDIST=	${WRKDIR}/a2ps-4.13
d12 4
a15 5
# License info.  There is some questionable Sun and
# Adobe Copyrighted things in this source tree.  It
# looks fine for FTP, but likely not for the CDROM.
PERMIT_PACKAGE_CDROM=	No fee redistribution.
PERMIT_DISTFILES_CDROM=	No fee redistribution.
d18 1
d29 3
d54 3
a56 2
.for p in bzip2 gv ghostview dvips pdf2ps acroread convert tex latex ps2pdf \
	psselect psnup bzip
d59 3
@


1.37
log
@
Don't link against libpaper, even if it's installed.  Noticed by
Adriaan <misc.adriaan@@gmail.com>.  Help from espie@@ (disable it in
the Makefile instead of patching configure).

While here, strip quotes from COMMENT, add HOMEPAGE and fix MASTER_SITES.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/02/19 17:32:59 alek Exp $
d17 2
a18 2
PERMIT_PACKAGE_CDROM=	"No fee redistribution."
PERMIT_DISTFILES_CDROM=	"No fee redistribution."
@


1.36
log
@- Use "lpr" by default even if CUPS is installed and "lp" is available
- Bump PKGNAME

Problem spotted by henning@@, OK mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/01/19 14:20:17 mbalmer Exp $
d3 1
a3 1
COMMENT=	"format ascii files for printing on PostScript printers"
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d12 2
d23 1
a23 1
MASTER_SITES=	ftp://ftp.enst.fr/pub/unix/a2ps/
d51 1
@


1.35
log
@Adding a FLAVOR a4dj to enable the A4dj papersize.

from Ulrich Kahl <ulrich.kahl@@cityweb.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/12/24 09:14:42 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.34
log
@autodetect most programs as being absent, in order to get reproducible
default config files.
Install emacs stuff.

(some enterprising sould could write some script that would write a
`correct' configuration file based on installed program).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/12/24 05:30:25 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d29 1
a29 1
FLAVORS=	a4 letter letterdj
d35 2
@


1.33
log
@take control over SHARED_LIBS version.
fix a configure bug while I'm at it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/12/23 20:22:30 mbalmer Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d25 1
d46 6
a51 1
		ac_cv_prog_EMACS=no
@


1.32
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/02/11 19:44:38 alek Exp $
d10 1
d44 2
a45 1
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.31
log
@- Fix libintl/libiconv detection
- Don't include bundled libintl headers
- Don't link liba2ps with libintl/libiconv
- Bump PKGNAME

first part

looks good sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/12/25 20:58:34 alek Exp $
d9 1
@


1.30
log
@Add WANTLIB marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/08/10 09:26:13 xsa Exp $
d6 1
@


1.29
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/12/14 14:09:07 naddy Exp $
d16 1
@


1.28
log
@- Toby revokes maintainership.
- Use gettext port rather than included copy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/09/28 06:02:14 pvalchev Exp $
d19 1
a19 1
MODULES=	gettext
@


1.27
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/05/06 03:19:44 lebel Exp $
a7 3
NEED_VERSION=	1.402

MAINTAINER=	Tobias Weingartner <weingart@@openbsd.org>
d19 2
d37 4
a40 2
CONFIGURE_ARGS+=	--with-medium=$(PAPERSIZE) \
			${CONFIGURE_SHARED}
@


1.26
log
@print: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/10/22 16:16:29 espie Exp $
d23 1
@


1.25
log
@A few more MAINTAINERS
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.24 2000/07/04 01:33:56 krw Exp $
d8 1
a8 1
NEED_VERSION=	1.310
@


1.24
log
@Change PFRAG.shared ldconfig invocation(s) to
DYNLIBDIR() invocations.

Bump NEED_VERSION to 1.310 so DYNLIBDIR() works.

As requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/06/11 02:17:22 espie Exp $
d8 1
a8 1
MAINTAINER=	weingart@@OpenBSD.org
@


1.23
log
@Minor clean-up
- bump NEED_VERSION
- FLAVOR:L for user-friendlyness
- use PLIST
- add comment to PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/06/11 01:13:42 weingart Exp $
d6 1
a6 1
NEED_VERSION=	1.300
@


1.22
log
@Update a2ps port to use latest sources.  Update to
more recent ports infrastructure.  Update license
information.  Fake.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/04/22 12:12:07 turan Exp $
d6 1
a6 2
NEED_VERSION=	1.230
FAKE=Yes
d26 1
a26 1
.if ${FLAVOR} == "a4"
d28 1
a28 1
.elif ${FLAVOR} == "letterdj"
d30 1
a30 1
.elif ${FLAVOR} == "letter"
@


1.21
log
@flavor these ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/04/11 06:09:57 turan Exp $
d3 2
a4 4
BROKEN=		sources missing

DISTNAME=	a2ps-4.12g
PKGNAME=	a2ps
d6 2
a7 2
NEED_VERSION=	 1.230
FAKE=No
d11 5
a15 2
LICENSE_TYPE=		GPL
PERMIT_PACKAGE_CDROM=	Yes
a16 1
PERMIT_DISTFILES_CDROM=	Yes
d21 1
a21 17
# Note: You can get by without these
#
BUILD_DEPENDS=	gv::print/gv \
		dvips::print/teTeX/base \
		ps2pdf::print/ghostscript/gnu \
		psselect::print/psutils \
		convert::graphics/ImageMagick
RUN_DEPENDS=	gv::print/gv \
		dvips::print/teTeX/base \
		ps2pdf::print/ghostscript/gnu \
		psselect::print/psutils \
		convert::graphics/ImageMagick

IS_INTERACTIVE=		Yes
NO_PACKAGE=		interactive port
MANUAL_PACKAGE_BUILD=	PAPERSIZE has to be set to Letter or A4
GNU_CONFIGURE=	Yes
d24 1
d36 1
a36 5
PAPERSIZE?=
STRIP=
CONFIGURE_ARGS=		--with-medium=$(PAPERSIZE) \
			--enable-static \
			--sysconfdir=/etc \
a38 18
Letter::
	$(MAKE) PAPERSIZE=Letter

letter::
	$(MAKE) PAPERSIZE=Letter

Letterdj::
	$(MAKE) PAPERSIZE=Letterdj

letterdj::
	$(MAKE) PAPERSIZE=Letterdj

A4::
	$(MAKE) PAPERSIZE=A4

a4::
	$(MAKE) PAPERSIZE=A4

d43 4
a46 24
pre-configure:
.if empty(PAPERSIZE)
	@@echo
	@@echo "PAPERSIZE not specified."
	@@echo
	@@echo "Must specify PAPERSIZE as one of A4, Letter, or Letterdj, either"
	@@echo "using setenv, or via Makefile targets of the same name.  Note"
	@@echo "that each PAPERSIZE has a leading capital letter, and Letterdj"
	@@echo "allows a slightly larger margins for DeskJets."
	@@echo
	@@echo "Defaulting to PAPERSIZE=Letter."
	@@echo Letter > $(WRKDIR)/.media
.elif $(PAPERSIZE)!=A4 && $(PAPERSIZE)!=Letter && $(PAPERSIZE)!=Letterdj
	@@echo
	@@echo "PAPERSIZE incorrect value: $(PAPERSIZE)."
	@@echo
	@@echo "Must specify PAPERSIZE as one of A4, Letter, or Letterdj, either"
	@@echo "using setenv, or via Makefile targets of the same name.  Note"
	@@echo "that each PAPERSIZE has a leading capital letter, and Letterdj"
	@@echo "allows a slightly larger margins for DeskJets."
	@@false
.else
	echo $(PAPERSIZE) > $(WRKDIR)/.media
.endif
a48 5

.if exists($(WRKDIR)/.media)
PAPERSIZE=
PAPERSIZE!=	cat $(WRKDIR)/.media
.endif
@


1.21.2.1
log
@bring print as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/07/04 01:33:56 krw Exp $
d3 4
a6 2
DISTNAME=	a2ps-4.13b
WRKDIST=	${WRKDIR}/a2ps-4.13
d8 2
a9 1
NEED_VERSION=	1.310
d13 2
a14 5
# License info.  There is some questionable Sun and
# Adobe Copyrighted things in this source tree.  It
# looks fine for FTP, but likely not for the CDROM.
PERMIT_PACKAGE_CDROM=	"No fee redistribution."
PERMIT_DISTFILES_CDROM=	"No fee redistribution."
d16 1
d21 17
a37 1
CONFIGURE_STYLE=	gnu
a39 1
FLAVOR?=	letter
d42 1
a42 1
.if ${FLAVOR:L} == "a4"
d44 1
a44 1
.elif ${FLAVOR:L} == "letterdj"
d46 1
a46 1
.elif ${FLAVOR:L} == "letter"
d51 5
a55 1
CONFIGURE_ARGS+=	--with-medium=$(PAPERSIZE) \
d58 18
d80 24
a103 4
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/a2ps/etc
	${INSTALL_DATA} ${WRKSRC}/etc/a2ps.cfg ${PREFIX}/share/a2ps/etc
	${INSTALL_DATA} ${WRKSRC}/etc/a2ps-site.cfg ${PREFIX}/share/a2ps/etc
d106 5
@


1.20
log
@broken. sources moved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/04/09 17:37:49 espie Exp $
d39 11
@


1.19
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 3
a3 2
# $OpenBSD: Makefile,v 1.18 2000/03/24 23:28:29 espie Exp $
#
@


1.18
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/03/19 16:43:41 espie Exp $
d8 1
@


1.17
log
@Use new LIB_DEPENDS specs everywhere (sed takes care of . -> \.)
Turn new ghostscript on everywhere.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/03/05 18:30:40 espie Exp $
d7 1
a7 1
NEED_VERSION=	1.223
d21 10
a30 10
BUILD_DEPENDS=	gv:print/gv \
		dvips:print/teTeX/base \
		ps2pdf:print/ghostscript/gnu \
		psselect:print/psutils \
		convert:graphics/ImageMagick
RUN_DEPENDS=	gv:print/gv \
		dvips:print/teTeX/base \
		ps2pdf:print/ghostscript/gnu \
		psselect:print/psutils \
		convert:graphics/ImageMagick
@


1.16
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/02/15 05:05:04 turan Exp $
d23 1
a23 1
		ps2pdf:print/ghostscript5 \
d28 1
a28 1
		ps2pdf:print/ghostscript5 \
@


1.15
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/02/12 08:02:29 turan Exp $
d7 1
a7 2

NEED_VERSION=	1.73
d12 4
a15 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d21 10
a30 10
BUILD_DEPENDS=	gv:${PORTSDIR}/print/gv \
		dvips:${PORTSDIR}/print/teTeX/base \
		ps2pdf:${PORTSDIR}/print/ghostscript5 \
		psselect:${PORTSDIR}/print/psutils \
		convert:${PORTSDIR}/graphics/ImageMagick
RUN_DEPENDS=	gv:${PORTSDIR}/print/gv \
		dvips:${PORTSDIR}/print/teTeX/base \
		ps2pdf:${PORTSDIR}/print/ghostscript5 \
		psselect:${PORTSDIR}/print/psutils \
		convert:${PORTSDIR}/graphics/ImageMagick
d32 1
a32 1
IS_INTERACTIVE=		yes
d35 1
a35 1
GNU_CONFIGURE=	yes
@


1.14
log
@gpl licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/11/27 13:33:50 kevlo Exp $
d13 4
a16 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.13
log
@Mark it unbroken and update to version 4.12g. Change the MASTER_SITES.
Fix up PLISTs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/10/29 09:40:16 turan Exp $
d11 6
@


1.12
log
@these ports are interactive.  mark NO_PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/10/26 04:56:39 turan Exp $
d4 1
a4 3
BROKEN=		bad packing lists

DISTNAME=	a2ps-4.10.4
d12 1
a12 1
MASTER_SITES=	http://www-inf.enst.fr/~demaille/ftp/a2ps/
@


1.11
log
@These ports have bad packing lists.

Ports tree is now unlocked.  Read the new policy first.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/09/14 10:01:31 espie Exp $
d30 1
@


1.10
log
@teTeX has moved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/03/02 04:41:08 marc Exp $
d3 2
@


1.9
log
@fix earlier bogus changes to Makefile where a value that
was defined in bsd.port.mk was checked before bsd.port.mk was included;
this should make ports with optional shared libs build on the alpha,
again.  However, chages require the latest bsd.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/02/21 04:26:15 marc Exp $
d17 1
a17 1
		dvips:${PORTSDIR}/print/teTeX \
d22 1
a22 1
		dvips:${PORTSDIR}/print/teTeX \
@


1.8
log
@needs version 1.64 (or later) of bsd.port.mk
to build/install correctly; PLIST.noshared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/02/18 02:37:37 marc Exp $
d8 1
a8 1
NEED_VERSION=		1.64
d36 2
a37 6
			--sysconfdir=/etc
.if defined(NO_SHARED_LIBS)
CONFIGURE_ARGS+=	--disable-shared
.else
CONFIGURE_ARGS+=	--enable-shared
.endif
@


1.7
log
@use NO_SHARED_LIBS instead of test for alpha;
use PLIST.noshared instead of PLIST.alpha
@
text
@d1 1
a1 6
# New ports collection makefile for:    a2ps
# Version required:     4.10.4
# Date created:         31 January 1998
# Whom:                 Tobias Weingartner (weingart@@openbsd.org)
#
# $OpenBSD: Makefile,v 1.6 1998/09/30 03:27:07 angelos Exp $
d7 2
a8 1
MASTER_SITES=	http://www-inf.enst.fr/~demaille/ftp/a2ps/
d11 2
@


1.6
log
@Update to version 4.10.4
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.5 1998/08/10 22:01:56 marc Exp $
d39 1
a39 1
.if (${MACHINE_ARCH} == "alpha")
@


1.5
log
@to version 4.10.3; install config in /etc; update packing list
@
text
@d2 1
a2 1
# Version required:     4.9.9
d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 1998/06/18 22:55:45 angelos Exp $
d9 2
a10 1
DISTNAME=	a2ps-4.10.3
@


1.4
log
@Fix default papersize case.

Hey, you're all lazy slobs; we at USENIX have done more work than the
rest of you put together.
  This is a friendly message from our fearless project leader.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1998/06/10 20:18:00 weingart Exp $
d9 1
a9 2
PKGNAME=	a2ps-4.10.2
DISTNAME=	a2ps-4.10.2
a11 1
DISTFILES=	a2ps-4.10.2.tar.gz
d15 14
d31 1
a31 1
MAN1=		a2ps.1 ogonkify.1
d35 8
a42 2
CONFIGURE_ARGS=	--with-medium=$(PAPERSIZE) --disable-shared

@


1.3
log
@Update to get latest a2ps-4.10.2
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1998/04/28 02:17:11 angelos Exp $
d69 2
a71 1
	echo $(PAPERSIZE) > $(WRKDIR)/.media
@


1.2
log
@tempnam/tmpnam->mkstemp, and make default PAPERSIZE = Letter in
Makefile.

There's still a tempnam() in lib/jobs.c, but it's not clear how to
remove that.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/01/31 21:54:44 weingart Exp $
d9 2
a10 2
PKGNAME=	a2ps-4.9.9
DISTNAME=	a2ps-4.9.9
d13 1
a13 1
DISTFILES=	a2ps-4.9.9.tar.gz
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD$
d57 3
a59 1
	@@false
@


1.1.1.1
log
@Add a2ps-4.9.9 (pilfered from FreeBSD ports + updates).

@
text
@@
