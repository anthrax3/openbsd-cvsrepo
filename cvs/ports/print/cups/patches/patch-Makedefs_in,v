head	1.14;
access;
symbols
	OPENBSD_6_1:1.14.0.2
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.13.0.8
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.4
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.6
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.2
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.5.0.6
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.4
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.10
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.8
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.6
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	cups_20050116:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2016.09.19.09.16.51;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	5ZKBoypll2THXP84;

1.13
date	2014.11.15.10.22.23;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	20oo4Dj2S2v31rH3;

1.12
date	2013.10.27.08.50.17;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.09.25.08.39.26;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.19.18.20.09;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.08.04.14.37.04;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.05.17.10.11.23;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.02.16.22.12.08;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.09.08.10.33.12;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.04.07.13.55.30;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.03.31.16.20.02;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.04.27.08.25.39;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.01.10.43.38;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.16.12.36.50;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.16.12.36.50;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.14
log
@Update to cups-2.2.0.
@
text
@$OpenBSD: patch-Makedefs_in,v 1.13 2014/11/15 10:22:23 ajacoutot Exp $

BSD_INSTALL_PROGRAM is used to respect INSTALL_STRIP.

--- Makedefs.in.orig	Wed Sep 14 01:39:47 2016
+++ Makedefs.in	Sat Sep 17 15:26:03 2016
@@@@ -38,12 +38,12 @@@@ SHELL		=	/bin/sh
 # Installation programs...
 #
 
-INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -c -m 555 @@INSTALL_STRIP@@
+INSTALL_BIN	=	$(BSD_INSTALL_PROGRAM)
 INSTALL_COMPDATA =	$(INSTALL) -c -m 444 @@INSTALL_GZIP@@
 INSTALL_CONFIG	=	$(INSTALL) -c -m @@CUPS_CONFIG_FILE_PERM@@
 INSTALL_DATA	=	$(INSTALL) -c -m 444
 INSTALL_DIR	=	$(INSTALL) -d
-INSTALL_LIB	=	$(LIBTOOL) $(INSTALL) -c -m 555 @@INSTALL_STRIP@@
+INSTALL_LIB	=	$(BSD_INSTALL_PROGRAM)
 INSTALL_MAN	=	$(INSTALL) -c -m 444
 INSTALL_SCRIPT	=	$(INSTALL) -c -m 555
 
@@@@ -86,7 +86,7 @@@@ LIBGSSAPI	=	@@LIBGSSAPI@@
 LIBMALLOC	=	@@LIBMALLOC@@
 LIBMXML		=	@@LIBMXML@@
 LIBPAPER	=	@@LIBPAPER@@
-LIBUSB		=	@@LIBUSB@@
+LIBUSB		=	-L${LOCALBASE} @@LIBUSB@@
 LIBWRAP		=	@@LIBWRAP@@
 LIBZ		=	@@LIBZ@@
 
@@@@ -239,7 +239,7 @@@@ USBQUIRKS	=	@@USBQUIRKS@@
 # Rules...
 #
 
-.SILENT:
+#.SILENT:
 .SUFFIXES:	.1 .1.gz .1m .1m.gz .3 .3.gz .5 .5.gz .7 .7.gz .8 .8.gz .a .c .cxx .h .man .o .gz
 
 .c.o:
@


1.13
log
@Major update to cups-2.0.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.12 2013/10/27 08:50:17 ajacoutot Exp $
d5 3
a7 3
--- Makedefs.in.orig	Fri Mar 21 15:50:24 2014
+++ Makedefs.in	Fri Oct  3 15:35:39 2014
@@@@ -40,12 +40,12 @@@@ SHELL		=	/bin/sh
d22 1
a22 1
@@@@ -88,7 +88,7 @@@@ LIBGSSAPI	=	@@LIBGSSAPI@@
d31 1
a31 1
@@@@ -241,7 +241,7 @@@@ USBQUIRKS	=	@@USBQUIRKS@@
@


1.12
log
@Update to cups-1.7.0.
Please report any regression directly to me, thanks.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.11 2013/09/25 08:39:26 ajacoutot Exp $
d5 2
a6 2
--- Makedefs.in.orig	Wed Jul 17 17:21:18 2013
+++ Makedefs.in	Sun Oct 27 09:01:11 2013
d31 1
a31 1
@@@@ -238,7 +238,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
@


1.11
log
@Update to cups-1.6.4.
Move some common directories from -main -libs so that they get stripped
from the PLIST of dependant ports.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.10 2013/03/19 18:20:09 ajacoutot Exp $
d5 2
a6 2
--- Makedefs.in.orig	Tue Jul 23 14:31:34 2013
+++ Makedefs.in	Wed Sep 25 10:07:16 2013
d31 1
a31 1
@@@@ -236,7 +236,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
@


1.10
log
@Tweak, no pkg change.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.9 2012/08/04 14:37:04 ajacoutot Exp $
d5 2
a6 2
--- Makedefs.in.orig	Wed May 23 01:58:31 2012
+++ Makedefs.in	Tue Mar 19 19:10:01 2013
d31 1
a31 1
@@@@ -235,7 +235,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
@


1.9
log
@Major update to CUPS 1.6.1.
This package is now split between -main (the bloat) and -libs (i.e.
cups-libs; which only contains the base libraries which have no
external deps).
Most filters have moved to cups-filters, the split was needed because
cups depends on cups-filters which depends on cups

The nice side-effect is that this will simplify lots of things in tree.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.6 2011/09/08 10:33:12 ajacoutot Exp $
d6 1
a6 1
+++ Makedefs.in	Thu Jul 26 10:01:21 2012
d12 1
a12 1
+INSTALL_BIN	=	$(LIBTOOL) $(BSD_INSTALL_PROGRAM)
d18 1
a18 1
+INSTALL_LIB	=	$(LIBTOOL) $(BSD_INSTALL_PROGRAM)
@


1.8
log
@Update to cups-1.5.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.7 2012/02/16 22:12:08 ajacoutot Exp $
d5 3
a7 3
--- Makedefs.in.orig	Thu Mar  1 01:05:55 2012
+++ Makedefs.in	Wed May 16 08:18:38 2012
@@@@ -41,12 +41,12 @@@@ SHELL		=	/bin/sh
d13 1
a14 1
 INSTALL_COMPDATA =	$(INSTALL) -c -m 444 @@INSTALL_GZIP@@
d22 1
a22 8
@@@@ -85,15 +85,15 @@@@ LIBCUPSIMAGE	=	@@LIBCUPSIMAGE@@
 LIBCUPSMIME	=	@@LIBCUPSMIME@@
 LIBCUPSPPDC	=	@@LIBCUPSPPDC@@
 LIBCUPSSTATIC	=	@@LIBCUPSSTATIC@@
-LIBJPEG		=	@@LIBJPEG@@
-LIBLDAP		=	@@LIBLDAP@@
+LIBJPEG		=	-L${LOCALBASE}/lib @@LIBJPEG@@
+LIBLDAP		=	-L${LOCALBASE}/lib @@LIBLDAP@@
d24 2
a25 7
-LIBPAPER	=	@@LIBPAPER@@
-LIBPNG		=	@@LIBPNG@@
+LIBPAPER	=	-L${LOCALBASE}/lib @@LIBPAPER@@
+LIBPNG		=	-L${LOCALBASE}/lib @@LIBPNG@@
 LIBSLP		=	@@LIBSLP@@
 LIBGSSAPI	=	@@LIBGSSAPI@@
-LIBTIFF		=	@@LIBTIFF@@
d27 1
a27 2
+LIBTIFF		=	-L${LOCALBASE}/lib @@LIBTIFF@@
+LIBUSB		=	-L${LOCALBASE}/lib @@LIBUSB@@
d31 1
a31 1
@@@@ -274,7 +274,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
d37 1
a37 1
 .SUFFIXES:	.1 .1.gz .1m .1m.gz .3 .3.gz .5 .5.gz .7 .7.gz .8 .8.gz .a .c .cxx .h .man .o .32.o .64.o .gz
@


1.7
log
@Update to cups-1.5.2.
While here, create cups's printcap under /etc/cups/ because we are
running unpriviledged so we cannot touch /etc/printcap.
Tweak rc script accordingly.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.6 2011/09/08 10:33:12 ajacoutot Exp $
d5 3
a7 3
--- Makedefs.in.orig	Wed May  4 06:28:00 2011
+++ Makedefs.in	Mon Feb  6 11:27:07 2012
@@@@ -41,11 +41,11 @@@@ SHELL		=	/bin/sh
d14 1
d22 1
a22 1
@@@@ -84,15 +84,15 @@@@ LIBCUPSIMAGE	=	@@LIBCUPSIMAGE@@
d44 1
a44 1
@@@@ -273,7 +273,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
@


1.6
log
@Major update to cups-1.5.0.

Thanks to landry@@ for the bulk testing.
@
text
@d1 4
a4 1
$OpenBSD: patch-Makedefs_in,v 1.5 2010/04/07 13:55:30 ajacoutot Exp $
d6 2
a7 2
+++ Makedefs.in	Fri Sep  2 10:42:54 2011
@@@@ -41,13 +41,13 @@@@ SHELL		=	/bin/sh
d12 1
a12 1
+INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -c -m $(BINMODE) @@INSTALL_STRIP@@
d14 1
a14 2
-INSTALL_DATA	=	$(INSTALL) -c -m 444
+INSTALL_DATA	=	$(INSTALL) -c -m $(SHAREMODE)
d17 3
a19 5
-INSTALL_MAN	=	$(INSTALL) -c -m 444
-INSTALL_SCRIPT	=	$(INSTALL) -c -m 555
+INSTALL_LIB	=	$(LIBTOOL) $(INSTALL) -c -m $(BINMODE) @@INSTALL_STRIP@@
+INSTALL_MAN	=	$(INSTALL) -c -m $(SHAREMODE)
+INSTALL_SCRIPT	=	$(INSTALL) -c -m $(BINMODE)
a20 2
 #
 # Default user, group, and system groups for the scheduler...
@


1.5
log
@Disable dnssd support for now as it is not yet stable.
@
text
@d1 3
a3 3
$OpenBSD: patch-Makedefs_in,v 1.4 2010/03/31 16:20:02 ajacoutot Exp $
--- Makedefs.in.orig	Wed May 27 01:27:06 2009
+++ Makedefs.in	Wed Apr  7 15:28:43 2010
d23 1
a23 2
@@@@ -83,15 +83,15 @@@@ LIBCUPSDRIVER	=	@@LIBCUPSDRIVER@@
 LIBCUPSIMAGE	=	@@LIBCUPSIMAGE@@
d26 1
d45 1
a45 1
@@@@ -258,7 +258,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
@


1.4
log
@Major update to cups-1.4.3.
Changelog is to big to detail here, refer to HOMEPAGE for details.

I have been using 1.4.X for several months.
Versions 1.4.0 and 1.4.2 have been tested in bulks by jasper@@, thanks!

Please contact me directly if you see regressions.
@
text
@d1 1
a1 1
$OpenBSD: patch-Makedefs_in,v 1.3 2009/04/27 08:25:39 bernd Exp $
d3 1
a3 1
+++ Makedefs.in	Mon Aug 31 10:29:45 2009
d23 22
@


1.3
log
@Update to cups-1.3.10. With lots of help from ajacoutot@@.

There's an issue with the admin.cgi which will be fixed
in-tree.

ok ajacoutot@@, jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makedefs_in,v 1.2 2006/10/01 10:43:38 mbalmer Exp $
--- Makedefs.in.orig	Tue Jan 22 23:37:21 2008
+++ Makedefs.in	Tue Mar 17 16:56:19 2009
@@@@ -40,13 +40,13 @@@@ STRIP		=	@@STRIP@@
d8 5
a12 5
-INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -m 755
+INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -m $(BINMODE)
 INSTALL_CONFIG	=	$(INSTALL) -m @@CUPS_CONFIG_FILE_PERM@@
-INSTALL_DATA	=	$(INSTALL) -m 644
+INSTALL_DATA	=	$(INSTALL) -m $(SHAREMODE)
d14 6
a19 6
-INSTALL_LIB	=	$(LIBTOOL) $(INSTALL) -m 755
-INSTALL_MAN	=	$(INSTALL) -m 644
-INSTALL_SCRIPT	=	$(INSTALL) -m 755
+INSTALL_LIB	=	$(LIBTOOL) $(INSTALL) -m $(BINMODE)
+INSTALL_MAN	=	$(INSTALL) -m $(SHAREMODE)
+INSTALL_SCRIPT	=	$(INSTALL) -m $(BINMODE)
d23 1
a23 29
@@@@ -206,8 +206,8 @@@@ DATADIR		=	$(BUILDROOT)@@CUPS_DATADIR@@
 DOCDIR		=	$(BUILDROOT)@@CUPS_DOCROOT@@
 ICONDIR		=	@@ICONDIR@@
 INCLUDEDIR	=	$(BUILDROOT)$(includedir)
-INITDIR		=	@@INITDIR@@
-INITDDIR	=	@@INITDDIR@@
+INITDIR		=
+INITDDIR	=
 LIBDIR		=	$(BUILDROOT)$(libdir)
 LOCALEDIR	= 	$(BUILDROOT)@@CUPS_LOCALEDIR@@
 LOGDIR		= 	$(BUILDROOT)@@CUPS_LOGDIR@@
@@@@ -222,7 +222,7 @@@@ SBINDIR		=	$(BUILDROOT)@@sbindir@@
 SERVERBIN	= 	$(BUILDROOT)@@CUPS_SERVERBIN@@
 SERVERROOT	= 	$(BUILDROOT)@@CUPS_SERVERROOT@@
 STATEDIR	=	$(BUILDROOT)@@CUPS_STATEDIR@@
-XINETD		=	@@XINETD@@
+XINETD		=
 
 MAN1EXT		=	@@MAN1EXT@@
 MAN5EXT		=	@@MAN5EXT@@
@@@@ -234,14 +234,14 @@@@ PAMDIR		=	@@PAMDIR@@
 PAMFILE		=	@@PAMFILE@@
 
 DEFAULT_LAUNCHD_CONF =	@@DEFAULT_LAUNCHD_CONF@@
-DBUSDIR		=	@@DBUSDIR@@
+DBUSDIR		=
 
 
 #
d29 1
a29 1
 .SUFFIXES:	.1 .1.gz .1m .1m.gz .5 .5.gz .7 .7.gz .8 .8.gz .a .c .cxx .h .man .o .32.o .64.o .gz
@


1.2
log
@Update to CUPS 1.2.4, which has lots of improvements over the old version
we had, like better support for foreign languages and the usual plethora
of bugfixes.

tested on various architectures and with various applications that use CUPS
as their printing system.  I verified that all ports that are depending on
CUPS still build.
@
text
@d1 4
a4 4
$OpenBSD$
--- Makedefs.in.orig	Wed Sep 20 10:46:49 2006
+++ Makedefs.in	Wed Sep 20 10:50:10 2006
@@@@ -49,13 +49,13 @@@@ STRIP		=	@@STRIP@@
d23 29
a51 1
@@@@ -238,7 +238,7 @@@@ DBUSDIR		=	@@DBUSDIR@@
@


1.1
log
@Initial revision
@
text
@d1 4
a4 3
--- Makedefs.in.orig	Tue Jun 29 05:14:19 2004
+++ Makedefs.in	Sun Nov  7 15:19:29 2004
@@@@ -47,12 +47,12 @@@@ STRIP		=	@@STRIP@@
d8 3
a10 1
-INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -m 755 -s
a11 1
+INSTALL_BIN	=	$(LIBTOOL) $(INSTALL) -m $(BINMODE) -s
d22 2
a23 11
 # Default user and group for the scheduler...
@@@@ -85,7 +85,7 @@@@ LIBZ		=	@@LIBZ@@
 
 ARFLAGS		=	@@ARFLAGS@@
 BACKLIBS	=	@@BACKLIBS@@
-CFLAGS		=	$(RC_CFLAGS) $(SSLFLAGS) @@CPPFLAGS@@ @@CFLAGS@@ -I.. $(OPTIONS)
+CFLAGS		=	$(RC_CFLAGS) -I .. $(SSLFLAGS) @@CPPFLAGS@@ @@CFLAGS@@ $(OPTIONS)
 COMMONLIBS	=	@@COMMONLIBS@@
 CXXFLAGS	=	$(RC_CFLAGS) @@CPPFLAGS@@ @@CXXFLAGS@@ -I.. $(OPTIONS)
 CXXLIBS		=	@@CXXLIBS@@
@@@@ -166,7 +166,7 @@@@ PAMFILE		=	@@PAMFILE@@
d28 3
a30 2
+# .SILENT:
 .SUFFIXES:	.a .c .cxx .h .man .o .0 .1 .1m .3 .5 .8 .z
a31 1
 	echo Compiling $<...
@


1.1.1.1
log
@CUPS, the Common Unix Printing System.

A cross-platform printing solution for Unix environments,
based on the "Internet Printing Protocol, IPP".

ok alek@@
@
text
@@
