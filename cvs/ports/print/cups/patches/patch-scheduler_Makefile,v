head	1.15;
access;
symbols
	OPENBSD_6_2:1.15.0.4
	OPENBSD_6_2_BASE:1.15
	OPENBSD_6_1:1.15.0.2
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.14.0.4
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.14.0.2
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.11.0.6
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.2
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.10.0.4
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.7.0.4
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.6.0.6
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.4
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.4.0.4
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.3.0.10
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.8
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.6
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.4
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	cups_20050116:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.15
date	2016.09.19.09.16.51;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	5ZKBoypll2THXP84;

1.14
date	2015.12.05.07.36.20;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	76T6L25JNSDkPbJ5;

1.13
date	2015.12.02.12.37.37;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	H80T77MfTi7pF4uJ;

1.12
date	2015.09.01.16.23.51;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	fJT2d2idEfqHZo4P;

1.11
date	2014.11.15.10.22.23;	author ajacoutot;	state Exp;
branches;
next	1.10;
commitid	20oo4Dj2S2v31rH3;

1.10
date	2013.10.27.08.50.17;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2013.07.12.07.19.38;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.08.04.14.37.04;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.09.08.10.33.12;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.27.04.18.50;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.03.31.16.20.02;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.27.08.25.39;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2006.10.01.16.02.24;	author mbalmer;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.01.10.43.38;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.16.12.36.51;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.16.12.36.51;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Update to cups-2.2.0.
@
text
@$OpenBSD: patch-scheduler_Makefile,v 1.14 2015/12/05 07:36:20 ajacoutot Exp $
--- scheduler/Makefile.orig	Wed Sep 14 01:39:47 2016
+++ scheduler/Makefile	Sat Sep 17 15:26:03 2016
@@@@ -153,21 +153,6 @@@@ install-data:
 		echo Creating $(SERVERROOT)/ssl...; \
 		$(INSTALL_DIR) -m 700 -g $(CUPS_GROUP) $(SERVERROOT)/ssl; \
 	fi
-	if test "$(STATEDIR)" != "$(SERVERROOT)"; then \
-		echo Creating $(STATEDIR)...; \
-		$(INSTALL_DIR) -m 755 $(STATEDIR); \
-	fi
-	echo Creating $(STATEDIR)/certs...
-	$(INSTALL_DIR) -m 511 -o $(CUPS_USER) -g $(CUPS_PRIMARY_SYSTEM_GROUP) \
-		$(STATEDIR)/certs
-	echo Creating $(LOGDIR)...
-	$(INSTALL_DIR) -m 755 $(LOGDIR)
-	echo Creating $(REQUESTS)...
-	$(INSTALL_DIR) -m 710 -g $(CUPS_GROUP) $(REQUESTS)
-	echo Creating $(REQUESTS)/tmp...
-	$(INSTALL_DIR) -m 1770 -g $(CUPS_GROUP) $(REQUESTS)/tmp
-	echo Creating $(CACHEDIR)...
-	$(INSTALL_DIR) -m 770 -g $(CUPS_GROUP) $(CACHEDIR)
 	if test "x$(INITDIR)" != x; then \
 		echo Installing init scripts...; \
 		$(INSTALL_DIR) -m 755 $(BUILDROOT)$(INITDIR)/init.d; \
@@@@ -428,11 +413,9 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
 # libcupsmime.so.1
 #
 
-libcupsmime.so.1:	$(LIBOBJS)
+libcupsmime.so.${LIBcupsmime_VERSION}:	$(LIBOBJS)
 	echo Linking $@@...
 	$(DSO) $(ARCHFLAGS) $(DSOFLAGS) -o $@@ $(LIBOBJS) $(LIBS)
-	$(RM) `basename $@@ .1`
-	$(LN) $@@ `basename $@@ .1`
 
 
 #
@


1.14
log
@Update to cups-2.1.2.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.13 2015/12/02 12:37:37 ajacoutot Exp $
--- scheduler/Makefile.orig	Tue Feb 17 14:10:19 2015
+++ scheduler/Makefile	Sat Dec  5 08:29:28 2015
@@@@ -157,21 +157,6 @@@@ install-data:
d26 1
a26 1
@@@@ -450,11 +435,9 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
@


1.13
log
@Update to cups-2.1.1.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.12 2015/09/01 16:23:51 ajacoutot Exp $
--- scheduler/Makefile.orig	Mon Oct 19 20:49:28 2015
+++ scheduler/Makefile	Wed Dec  2 13:28:37 2015
@@@@ -155,21 +155,6 @@@@ install-data:
d26 1
a26 1
@@@@ -448,11 +433,9 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
@


1.12
log
@Update to cups-2.1.0.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.11 2014/11/15 10:22:23 ajacoutot Exp $
--- scheduler/Makefile.orig	Tue Feb 17 14:10:19 2015
+++ scheduler/Makefile	Tue Sep  1 18:13:41 2015
@@@@ -157,21 +157,6 @@@@ install-data:
d26 1
a26 1
@@@@ -450,11 +435,9 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
@


1.11
log
@Major update to cups-2.0.1.
@
text
@d1 3
a3 3
$OpenBSD: patch-scheduler_Makefile,v 1.10 2013/10/27 08:50:17 ajacoutot Exp $
--- scheduler/Makefile.orig	Tue Oct 21 13:55:01 2014
+++ scheduler/Makefile	Sat Nov 15 10:09:52 2014
d26 1
a26 1
@@@@ -444,11 +429,9 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
@


1.10
log
@Update to cups-1.7.0.
Please report any regression directly to me, thanks.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.9 2013/07/12 07:19:38 ajacoutot Exp $
--- scheduler/Makefile.orig	Wed May 29 13:51:34 2013
+++ scheduler/Makefile	Sun Oct 27 09:01:11 2013
@@@@ -158,21 +158,6 @@@@ install-data:
d22 1
a22 1
-	$(INSTALL_DIR) -m 775 -g $(CUPS_GROUP) $(CACHEDIR)
d26 2
a27 26
@@@@ -255,10 +240,6 @@@@ install-libs: $(INSTALLSTATIC)
 	echo Installing libraries in $(LIBDIR)...
 	$(INSTALL_DIR) -m 755 $(LIBDIR)
 	$(INSTALL_LIB) $(LIBCUPSMIME) $(LIBDIR)
-	if test $(LIBCUPSMIME) = "libcupsmime.so.1" -o $(LIBCUPSMIME) = "libcupsmime.sl.1"; then \
-		$(RM) $(LIBDIR)/`basename $(LIBCUPSMIME) .1`; \
-		$(LN) $(LIBCUPSMIME) $(LIBDIR)/`basename $(LIBCUPSMIME) .1`; \
-	fi
 	if test $(LIBCUPSMIME) = "libcupsmime.1.dylib"; then \
 		$(RM) $(LIBDIR)/libcupsmime.dylib; \
 		$(LN) $(LIBCUPSMIME) $(LIBDIR)/libcupsmime.dylib; \
@@@@ -308,7 +289,7 @@@@ uninstall:
 	$(RM) $(LIBDIR)/libcupsmime.sl
 	$(RM) $(LIBDIR)/libcupsmime.sl.1
 	$(RM) $(LIBDIR)/libcupsmime.so
-	$(RM) $(LIBDIR)/libcupsmime.so.1
+	$(RM) $(LIBDIR)/libcupsmime.so.${LIBcupsmime_VERSION}
 	-$(RMDIR) $(LIBDIR)
 	$(RM) $(INCLUDEDIR)/cups/mime.h
 	-$(RMDIR) $(INCLUDEDIR)/cups
@@@@ -443,14 +424,12 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
 
 
 #
-# libcupsmime.so.1, libcupsmime.sl.1
+# libcupsmime.so.${LIBcupsmime_VERSION}, libcupsmime.sl.1
d30 2
a31 2
-libcupsmime.so.1 libcupsmime.sl.1:	$(LIBOBJS)
+libcupsmime.so.${LIBcupsmime_VERSION} libcupsmime.sl.1:	$(LIBOBJS)
@


1.9
log
@Update to cups-1.6.3.
@
text
@d1 3
a3 3
$OpenBSD: patch-scheduler_Makefile,v 1.8 2012/08/04 14:37:04 ajacoutot Exp $
--- scheduler/Makefile.orig	Fri Jun  7 03:12:52 2013
+++ scheduler/Makefile	Fri Jul 12 07:35:41 2013
d26 1
a26 1
@@@@ -254,10 +239,6 @@@@ install-libs: $(INSTALLSTATIC)
d37 1
a37 1
@@@@ -306,7 +287,7 @@@@ uninstall:
d46 1
a46 1
@@@@ -441,14 +422,12 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
@


1.8
log
@Major update to CUPS 1.6.1.
This package is now split between -main (the bloat) and -libs (i.e.
cups-libs; which only contains the base libraries which have no
external deps).
Most filters have moved to cups-filters, the split was needed because
cups depends on cups-filters which depends on cups

The nice side-effect is that this will simplify lots of things in tree.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.7 2011/09/08 10:33:12 ajacoutot Exp $
--- scheduler/Makefile.orig	Mon May 21 19:40:22 2012
+++ scheduler/Makefile	Thu Jul 26 10:00:31 2012
@@@@ -150,21 +150,6 @@@@ install-data:
d26 1
a26 1
@@@@ -246,10 +231,6 @@@@ install-libs: $(INSTALLSTATIC)
d37 1
a37 1
@@@@ -298,7 +279,7 @@@@ uninstall:
d46 1
a46 1
@@@@ -433,14 +414,12 @@@@ cups-lpd:	cups-lpd.o ../cups/$(LIBCUPS)
@


1.7
log
@Major update to cups-1.5.0.

Thanks to landry@@ for the bulk testing.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.6 2010/06/27 04:18:50 ajacoutot Exp $
--- scheduler/Makefile.orig	Fri Sep  2 09:41:38 2011
+++ scheduler/Makefile	Fri Sep  2 09:40:27 2011
@@@@ -152,21 +152,6 @@@@ install-data:
d26 1
a26 1
@@@@ -253,10 +238,6 @@@@ install-libs: $(INSTALLSTATIC)
d37 1
a37 1
@@@@ -306,7 +287,7 @@@@ uninstall:
d46 1
a46 1
@@@@ -448,14 +429,12 @@@@ cups-polld:	cups-polld.o ../cups/$(LIBCUPS)
@


1.6
log
@Update to cups-1.4.4.
Fixes several security, scheduler, printing, and conformance issues.
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.5 2010/03/31 16:20:02 ajacoutot Exp $
--- scheduler/Makefile.orig	Fri Apr 23 20:56:34 2010
+++ scheduler/Makefile	Sun Jun 27 06:09:51 2010
@@@@ -150,21 +150,6 @@@@ install-data:
d23 4
a26 4
 
 
 #
@@@@ -213,10 +198,6 @@@@ install-libs: $(INSTALLSTATIC)
d37 1
a37 1
@@@@ -265,7 +246,7 @@@@ uninstall:
d46 1
a46 1
@@@@ -362,14 +343,12 @@@@ cups-polld:	cups-polld.o ../cups/$(LIBCUPS)
@


1.5
log
@Major update to cups-1.4.3.
Changelog is to big to detail here, refer to HOMEPAGE for details.

I have been using 1.4.X for several months.
Versions 1.4.0 and 1.4.2 have been tested in bulks by jasper@@, thanks!

Please contact me directly if you see regressions.
@
text
@d1 4
a4 4
$OpenBSD$
--- scheduler/Makefile.orig	Wed May 27 01:27:06 2009
+++ scheduler/Makefile	Sun Aug 30 16:47:04 2009
@@@@ -147,21 +147,6 @@@@ install-data:
d26 1
a26 1
@@@@ -210,10 +195,6 @@@@ install-libs: $(INSTALLSTATIC)
d37 1
a37 1
@@@@ -262,7 +243,7 @@@@ uninstall:
d46 1
a46 1
@@@@ -359,14 +340,12 @@@@ cups-polld:	cups-polld.o ../cups/$(LIBCUPS)
@


1.4
log
@Update to cups-1.3.10. With lots of help from ajacoutot@@.

There's an issue with the admin.cgi which will be fixed
in-tree.

ok ajacoutot@@, jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-scheduler_Makefile,v 1.3 2006/10/01 16:02:24 mbalmer Exp $
--- scheduler/Makefile.orig	Thu Aug 16 20:44:46 2007
+++ scheduler/Makefile	Tue Mar 17 16:35:21 2009
@@@@ -135,23 +135,23 @@@@ install:	all
d6 3
a8 2
 		$(INSTALL_DIR) -m 700 $(SERVERROOT)/ssl; \
 		chgrp $(CUPS_GROUP) $(SERVERROOT)/ssl || true; \
d11 4
a14 9
-		echo Creating $(STATEDIR)/certs...; \
-		$(INSTALL_DIR) -m 511 $(STATEDIR)/certs; \
-		chgrp $(CUPS_PRIMARY_SYSTEM_GROUP) $(STATEDIR)/certs || true; \
+		echo Creating $(DESTDIR)$(STATEDIR)...; \
+		$(INSTALL_DIR) -m 755 $(DESTDIR)$(STATEDIR); \
+		echo Creating $(DESTDIR)$(STATEDIR)/certs...; \
+		$(INSTALL_DIR) -m 511 $(DESTDIR)$(STATEDIR)/certs; \
+		chgrp $(CUPS_PRIMARY_SYSTEM_GROUP) $(DESTDIR)$(STATEDIR)/certs || true; \
 	fi
d18 1
a18 2
-	$(INSTALL_DIR) -m 710 $(REQUESTS)
-	-chgrp $(CUPS_GROUP) $(REQUESTS)
d20 1
a20 2
-	$(INSTALL_DIR) -m 1770 $(REQUESTS)/tmp
-	-chgrp $(CUPS_GROUP) $(REQUESTS)/tmp
d22 41
a62 16
-	$(INSTALL_DIR) -m 775 $(CACHEDIR)
-	-chgrp $(CUPS_GROUP) $(CACHEDIR)
+#	echo Creating $(LOGDIR)...
+#	$(INSTALL_DIR) -m 755 $(LOGDIR)
+#	echo Creating $(REQUESTS)...
+#	$(INSTALL_DIR) -m 710 $(REQUESTS)
+#	-chgrp $(CUPS_GROUP) $(REQUESTS)
+#	echo Creating $(REQUESTS)/tmp...
+#	$(INSTALL_DIR) -m 1770 $(REQUESTS)/tmp
+#	-chgrp $(CUPS_GROUP) $(REQUESTS)/tmp
+	echo Creating $(DESTDIR)$(CACHEDIR)...
+	$(INSTALL_DIR) -m 775 $(DESTDIR)$(CACHEDIR)
+	-chgrp $(CUPS_GROUP) $(DESTDIR)$(CACHEDIR)
 #	echo Creating $(CACHEDIR)/ppd...
 #	$(INSTALL_DIR) -m 755 $(CACHEDIR)/ppd
 #	-chgrp $(CUPS_GROUP) $(CACHEDIR)/ppd
@


1.3
log
@Make this port build with USE_SYSTRACE=Yes.  I forgot parts of a patch
to scheduler/Makefile, sorry, guys!
@
text
@d1 18
a18 12
$OpenBSD: patch-scheduler_Makefile,v 1.2 2006/10/01 10:43:38 mbalmer Exp $
--- scheduler/Makefile.orig	Mon Sep 11 20:30:09 2006
+++ scheduler/Makefile	Sun Oct  1 17:53:39 2006
@@@@ -134,22 +134,22 @@@@ install:	all
 	echo Creating $(SERVERROOT)/ssl...
 	$(INSTALL_DIR) -m 700 $(SERVERROOT)/ssl
 	-chgrp $(CUPS_GROUP) $(SERVERROOT)/ssl
-	echo Creating $(STATEDIR)...
-	$(INSTALL_DIR) -m 755 $(STATEDIR)
-	echo Creating $(STATEDIR)/certs...
-	$(INSTALL_DIR) -m 511 $(STATEDIR)/certs
-	-chgrp $(CUPS_PRIMARY_SYSTEM_GROUP) $(STATEDIR)/certs
a29 5
+	echo Creating $(DESTDIR)$(STATEDIR)...
+	$(INSTALL_DIR) -m 755 $(DESTDIR)$(STATEDIR)
+	echo Creating $(DESTDIR)$(STATEDIR)/certs...
+	$(INSTALL_DIR) -m 511 $(DESTDIR)$(STATEDIR)/certs
+	-chgrp $(CUPS_PRIMARY_SYSTEM_GROUP) $(DESTDIR)$(STATEDIR)/certs
@


1.2
log
@Update to CUPS 1.2.4, which has lots of improvements over the old version
we had, like better support for foreign languages and the usual plethora
of bugfixes.

tested on various architectures and with various applications that use CUPS
as their printing system.  I verified that all ports that are depending on
CUPS still build.
@
text
@d1 12
a12 7
$OpenBSD$
--- scheduler/Makefile.orig	Wed Aug 23 21:39:39 2006
+++ scheduler/Makefile	Tue Sep 26 20:33:59 2006
@@@@ -137,14 +137,14 @@@@ install:	all
 	echo Creating $(STATEDIR)/certs...
 	$(INSTALL_DIR) -m 511 $(STATEDIR)/certs
 	-chgrp $(CUPS_PRIMARY_SYSTEM_GROUP) $(STATEDIR)/certs
d21 8
d37 6
a42 3
 	echo Creating $(CACHEDIR)...
 	$(INSTALL_DIR) -m 775 $(CACHEDIR)
 	-chgrp $(CUPS_GROUP) $(CACHEDIR)
@


1.1
log
@Initial revision
@
text
@d1 10
a10 7
--- scheduler/Makefile.orig	Tue Jun 29 05:44:53 2004
+++ scheduler/Makefile	Sun Nov  7 15:19:29 2004
@@@@ -69,9 +69,9 @@@@ install:	all
 	$(INSTALL_DIR) -m 711 $(SERVERROOT)/certs
 	$(INSTALL_DIR) $(SERVERROOT)/interfaces
 	$(INSTALL_DIR) $(SERVERROOT)/ppd
-	$(INSTALL_DIR) $(LOGDIR)
d12 2
d15 4
a18 1
+#	$(INSTALL_DIR) $(LOGDIR)
d20 2
d23 4
a26 3
 
 
 #
@


1.1.1.1
log
@CUPS, the Common Unix Printing System.

A cross-platform printing solution for Unix environments,
based on the "Internet Printing Protocol, IPP".

ok alek@@
@
text
@@
