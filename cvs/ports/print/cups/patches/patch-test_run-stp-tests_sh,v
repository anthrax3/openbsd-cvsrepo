head	1.17;
access;
symbols
	OPENBSD_6_1:1.17.0.2
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.15.0.4
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.4
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.4
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.2
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.4
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	cups_20050116:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2016.10.05.18.28.17;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	yttQPt1Ny7PV8vcR;

1.16
date	2016.09.19.09.16.51;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	5ZKBoypll2THXP84;

1.15
date	2015.09.01.16.23.51;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	fJT2d2idEfqHZo4P;

1.14
date	2015.02.10.08.29.33;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	9fRjFjnMfPJHQiVu;

1.13
date	2014.11.15.10.22.23;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	20oo4Dj2S2v31rH3;

1.12
date	2014.01.08.18.13.56;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.10.27.08.50.17;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.19.08.49.14;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.08.04.14.37.04;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.09.08.10.33.12;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.01.11.12.13.59;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.03.31.16.20.02;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.27.08.25.39;	author bernd;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.04.19.50.00;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2007.03.17.18.28.02;	author deanna;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.01.10.43.38;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.16.12.36.51;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.16.12.36.51;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.17
log
@Update to cups-2.2.1.
@
text
@$OpenBSD: patch-test_run-stp-tests_sh,v 1.16 2016/09/19 09:16:51 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Mon Oct  3 21:55:40 2016
+++ test/run-stp-tests.sh	Wed Oct  5 19:46:11 2016
@@@@ -34,7 +34,7 @@@@ umask 022
 # Make the IPP test program...
 #
 
-make
+${MAKE_PROGRAM}
 
 #
 # Solaris has a non-POSIX grep in /bin...
@@@@ -596,7 +596,7 @@@@ fi
 
 export LD_LIBRARY_PATH
 
-LD_PRELOAD="$root/cups/libcups.so.2:$root/filter/libcupsimage.so.2:$root/cgi-bin/libcupscgi.so.1:$root/scheduler/libcupsmime.so.1:$root/ppdc/libcupsppdc.so.1"
+LD_PRELOAD="$root/cups/libcups.so.${LIBcups_VERSION}:$root/filter/libcupsimage.so.${LIBcupsimage_VERSION}:$root/cgi-bin/libcupscgi.so.${LIBcupscgi_VERSION}:$root/scheduler/libcupsmime.so.${LIBcupsmime_VERSION}:$root/ppdc/libcupsppdc.so.${LIBcupsppdc_VERSION}"
 if test `uname` = SunOS -a -r /usr/lib/libCrun.so.1; then
 	LD_PRELOAD="/usr/lib/libCrun.so.1:$LD_PRELOAD"
 fi
@


1.16
log
@Update to cups-2.2.0.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.15 2015/09/01 16:23:51 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Wed Sep 14 01:39:47 2016
+++ test/run-stp-tests.sh	Sat Sep 17 15:26:03 2016
d13 1
a13 1
@@@@ -597,7 +597,7 @@@@ fi
@


1.15
log
@Update to cups-2.1.0.
@
text
@d1 4
a4 4
$OpenBSD: patch-test_run-stp-tests_sh,v 1.14 2015/02/10 08:29:33 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Fri Aug 28 15:38:46 2015
+++ test/run-stp-tests.sh	Tue Sep  1 18:13:41 2015
@@@@ -36,7 +36,7 @@@@ umask 022
d13 1
a13 1
@@@@ -594,7 +594,7 @@@@ fi
@


1.14
log
@Update to cups-2.0.2.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.13 2014/11/15 10:22:23 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Fri Dec 19 17:56:15 2014
+++ test/run-stp-tests.sh	Tue Feb 10 09:04:12 2015
d13 1
a13 1
@@@@ -593,7 +593,7 @@@@ fi
@


1.13
log
@Major update to cups-2.0.1.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.12 2014/01/08 18:13:56 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Thu Sep  4 02:57:41 2014
+++ test/run-stp-tests.sh	Fri Oct  3 15:35:39 2014
d13 1
a13 1
@@@@ -568,7 +568,7 @@@@ fi
@


1.12
log
@Update to cups-1.7.1.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.11 2013/10/27 08:50:17 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Wed Nov  6 21:09:03 2013
+++ test/run-stp-tests.sh	Wed Jan  8 18:57:51 2014
d13 1
a13 1
@@@@ -556,7 +556,7 @@@@ fi
@


1.11
log
@Update to cups-1.7.0.
Please report any regression directly to me, thanks.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.10 2013/03/19 08:49:14 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Wed Jun  5 18:05:45 2013
+++ test/run-stp-tests.sh	Sun Oct 27 09:01:11 2013
d13 1
a13 1
@@@@ -497,7 +497,7 @@@@ fi
@


1.10
log
@Update to cups-1.6.2.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.9 2012/08/04 14:37:04 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Mon Nov 26 19:26:01 2012
+++ test/run-stp-tests.sh	Tue Mar 19 08:15:45 2013
d13 1
a13 1
@@@@ -486,7 +486,7 @@@@ fi
@


1.9
log
@Major update to CUPS 1.6.1.
This package is now split between -main (the bloat) and -libs (i.e.
cups-libs; which only contains the base libraries which have no
external deps).
Most filters have moved to cups-filters, the split was needed because
cups depends on cups-filters which depends on cups

The nice side-effect is that this will simplify lots of things in tree.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.8 2011/09/08 10:33:12 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Mon May 21 17:35:25 2012
+++ test/run-stp-tests.sh	Thu Jul 26 10:00:31 2012
d13 1
a13 1
@@@@ -478,7 +478,7 @@@@ fi
@


1.8
log
@Major update to cups-1.5.0.

Thanks to landry@@ for the bulk testing.
@
text
@d1 4
a4 4
$OpenBSD: patch-test_run-stp-tests_sh,v 1.7 2011/01/11 12:13:59 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Sat May  7 00:53:53 2011
+++ test/run-stp-tests.sh	Fri Sep  2 09:33:11 2011
@@@@ -21,7 +21,7 @@@@ argcount=$#
d13 1
a13 1
@@@@ -431,7 +431,7 @@@@ fi
d17 2
a18 2
-LD_PRELOAD="$root/cups/libcups.so.2:$root/filter/libcupsimage.so.2:$root/cgi-bin/libcupscgi.so.1:$root/scheduler/libcupsmime.so.1:$root/driver/libcupsdriver.so.1:$root/ppdc/libcupsppdc.so.1"
+LD_PRELOAD="$root/cups/libcups.so.${LIBcups_VERSION}:$root/filter/libcupsimage.so.${LIBcupsimage_VERSION}:$root/cgi-bin/libcupscgi.so.${LIBcupscgi_VERSION}:$root/scheduler/libcupsmime.so.${LIBcupsmime_VERSION}:$root/driver/libcupsdriver.so.${LIBcupsdriver_VERSION}:$root/ppdc/libcupsppdc.so.${LIBcupsppdc_VERSION}"
@


1.7
log
@Update to cups-1.4.6, this version fixes landscape printing, sharing,
and fax issues.

Also merge a patch from upstream to disable multi-part support as
several browsers (notably webkit based ones) do not support it
correctly, this should fix the web interface with these browsers. See
http://www.cups.org/str.php?L3455 for details.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.6 2010/03/31 16:20:02 ajacoutot Exp $
--- test/run-stp-tests.sh.orig	Thu Jan  6 23:21:05 2011
+++ test/run-stp-tests.sh	Tue Jan 11 12:37:38 2011
d13 1
a13 1
@@@@ -420,7 +420,7 @@@@ fi
@


1.6
log
@Major update to cups-1.4.3.
Changelog is to big to detail here, refer to HOMEPAGE for details.

I have been using 1.4.X for several months.
Versions 1.4.0 and 1.4.2 have been tested in bulks by jasper@@, thanks!

Please contact me directly if you see regressions.
@
text
@d1 3
a3 3
$OpenBSD: patch-test_run-stp-tests_sh,v 1.5 2009/04/27 08:25:39 bernd Exp $
--- test/run-stp-tests.sh.orig	Wed Dec  9 07:10:22 2009
+++ test/run-stp-tests.sh	Wed Mar 31 15:53:43 2010
d12 2
a13 2
 # Figure out the proper echo options...
@@@@ -410,7 +410,7 @@@@ fi
@


1.5
log
@Update to cups-1.3.10. With lots of help from ajacoutot@@.

There's an issue with the admin.cgi which will be fixed
in-tree.

ok ajacoutot@@, jasper@@
@
text
@d1 3
a3 8
$OpenBSD: patch-test_run-stp-tests_sh,v 1.4 2009/03/04 19:50:00 jasper Exp $

Second chunk of this patch:
Security fix for CVE-2008-5183.
Patch adapted from Red Hat's solution.

--- test/run-stp-tests.sh.orig	Wed Nov 19 20:50:56 2008
+++ test/run-stp-tests.sh	Sat Apr 18 00:50:57 2009
d13 1
a13 1
@@@@ -387,7 +387,7 @@@@ fi
d17 5
a21 5
-LD_PRELOAD="$root/cups/libcups.so.2:$root/filter/libcupsimage.so.2"
+LD_PRELOAD="$root/cups/libcups.so.$LIBcups_VERSION:$root/filter/libcupsimage.so.$LIBcupsimage_VERSION"
 export LD_PRELOAD
 
 if test "x$DYLD_LIBRARY_PATH" = x; then
@


1.4
log
@Security fix for CVE-2008-5183.
Patch adapted from Red Hat's solution.

ok ajacoutot@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-test_run-stp-tests_sh,v 1.3 2007/03/17 18:28:02 deanna Exp $
d7 3
a9 3
--- test/run-stp-tests.sh.orig	Wed Nov 15 21:37:45 2006
+++ test/run-stp-tests.sh	Fri Feb 27 11:25:28 2009
@@@@ -30,7 +30,7 @@@@ argcount=$#
d18 1
a18 9
@@@@ -294,6 +294,7 @@@@ FontPath /tmp/cups-$user/share/fonts
 DocumentRoot $root/doc
 RequestRoot /tmp/cups-$user/spool
 TempDir /tmp/cups-$user/spool/temp
+MaxSubscriptions 3
 MaxLogSize 0
 AccessLog /tmp/cups-$user/log/access_log
 ErrorLog /tmp/cups-$user/log/error_log
@@@@ -373,7 +374,7 @@@@ fi
@


1.3
log
@Fix regress by letting the test know the correct shared lib versions.

ok mbalmer
@
text
@d1 8
a8 3
$OpenBSD$
--- test/run-stp-tests.sh.orig	Wed Nov 15 15:37:45 2006
+++ test/run-stp-tests.sh	Fri Mar 16 16:50:33 2007
d18 9
a26 1
@@@@ -373,7 +373,7 @@@@ fi
@


1.2
log
@Update to CUPS 1.2.4, which has lots of improvements over the old version
we had, like better support for foreign languages and the usual plethora
of bugfixes.

tested on various architectures and with various applications that use CUPS
as their printing system.  I verified that all ports that are depending on
CUPS still build.
@
text
@d2 2
a3 2
--- test/run-stp-tests.sh.orig	Wed Sep 20 11:35:02 2006
+++ test/run-stp-tests.sh	Wed Sep 20 11:36:00 2006
d13 9
@


1.1
log
@Initial revision
@
text
@d1 4
a4 3
--- test/run-stp-tests.sh.orig	Tue Jun 29 01:31:34 2004
+++ test/run-stp-tests.sh	Sun Nov  7 15:19:29 2004
@@@@ -28,7 +28,7 @@@@
d12 1
a12 13
 # Greet the tester...
@@@@ -442,9 +442,9 @@@@ cat str-trailer.html >>$strfile
 htmlfile=`basename $strfile .shtml`.html
 pdffile=`basename $strfile .shtml`.pdf
 
-htmldoc --numbered --verbose --titleimage ../doc/images/cups-large.gif \
+htmldoc --datadir ${LOCALBASE}/share/htmldoc --numbered --verbose --titleimage ../doc/images/cups-large.gif \
 	-f $htmlfile $strfile
-htmldoc --numbered --verbose --titleimage ../doc/images/cups-large.gif \
+htmldoc --datadir ${LOCALBASE}/share/htmldoc --numbered --verbose --titleimage ../doc/images/cups-large.gif \
 	-f $pdffile $strfile
 
 echo ""
@


1.1.1.1
log
@CUPS, the Common Unix Printing System.

A cross-platform printing solution for Unix environments,
based on the "Internet Printing Protocol, IPP".

ok alek@@
@
text
@@
