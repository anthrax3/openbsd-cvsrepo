head	1.3;
access;
symbols
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.01.26.00.56.55;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	idkvogMsbMzjRp2N;

1.2
date	2013.03.19.08.49.14;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2012.08.23.16.25.48;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove kerberos policy from the default configuration file to prevent cups
from failing to start. Initial breakage reported by Anthony Campbell.
@
text
@$OpenBSD$

https://github.com/apple/cups/issues/4947

--- conf/cupsd.conf.in.orig	Thu Jan 26 01:51:26 2017
+++ conf/cupsd.conf.in	Thu Jan 26 01:51:49 2017
@@@@ -134,49 +134,3 @@@@ WebInterface @@CUPS_WEBIF@@
     Order deny,allow
   </Limit>
 </Policy>
-
-# Set the kerberized printer/job policies...
-<Policy kerberos>
-  # Job/subscription privacy...
-  JobPrivateAccess default
-  JobPrivateValues default
-  SubscriptionPrivateAccess default
-  SubscriptionPrivateValues default
-
-  # Job-related operations must be done by the owner or an administrator...
-  <Limit Create-Job Print-Job Print-URI Validate-Job>
-    AuthType Negotiate
-    Order deny,allow
-  </Limit>
-
-  <Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document>
-    AuthType Negotiate
-    Require user @@OWNER @@SYSTEM
-    Order deny,allow
-  </Limit>
-
-  # All administration operations require an administrator to authenticate...
-  <Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default>
-    AuthType Default
-    Require user @@SYSTEM
-    Order deny,allow
-  </Limit>
-
-  # All printer operations require a printer operator to authenticate...
-  <Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs>
-    AuthType Default
-    Require user @@CUPS_DEFAULT_PRINTOPERATOR_AUTH@@
-    Order deny,allow
-  </Limit>
-
-  # Only the owner or an administrator can cancel or authenticate a job...
-  <Limit Cancel-Job CUPS-Authenticate-Job>
-    AuthType Negotiate
-    Require user @@OWNER @@CUPS_DEFAULT_PRINTOPERATOR_AUTH@@
-    Order deny,allow
-  </Limit>
-
-  <Limit All>
-    Order deny,allow
-  </Limit>
-</Policy>
@


1.2
log
@Update to cups-1.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-conf_cupsd_conf_in,v 1.1 2012/08/23 16:25:48 ajacoutot Exp $
d3 1
a3 1
http://www.cups.org/str.php?L4157
d5 52
a56 11
--- conf/cupsd.conf.in.orig	Thu Dec  9 22:24:51 2010
+++ conf/cupsd.conf.in	Thu Aug 23 18:10:03 2012
@@@@ -19,8 +19,6 @@@@ Listen localhost:@@DEFAULT_IPP_PORT@@
 
 # Show shared printers on the local network.
 Browsing On
-BrowseOrder allow,deny
-BrowseAllow all
 BrowseLocalProtocols @@CUPS_BROWSE_LOCAL_PROTOCOLS@@
 
 # Default authentication type, when authentication is required...
@


1.1
log
@Don't use CONFIGURE_STYLE=dest, it fucks things up.
Bring a couple of patches from CUPS str.
Remove the lpthread patch.
@
text
@d1 1
a1 1
$OpenBSD$
@

