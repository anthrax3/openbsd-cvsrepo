head	1.8;
access;
symbols
	OPENBSD_5_2:1.7.0.4
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.2
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.4.0.4
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	cups_20050116:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2012.08.04.14.37.04;	author ajacoutot;	state dead;
branches;
next	1.7;

1.7
date	2011.09.08.10.33.12;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.12.07.09.00;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.03.31.16.20.02;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.27.08.25.39;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.07.13.58.07;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.01.10.43.38;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.16.12.36.51;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.16.12.36.51;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Major update to CUPS 1.6.1.
This package is now split between -main (the bloat) and -libs (i.e.
cups-libs; which only contains the base libraries which have no
external deps).
Most filters have moved to cups-filters, the split was needed because
cups depends on cups-filters which depends on cups

The nice side-effect is that this will simplify lots of things in tree.
@
text
@$OpenBSD: patch-systemv_lpadmin_c,v 1.7 2011/09/08 10:33:12 ajacoutot Exp $
--- systemv/lpadmin.c.orig	Fri May 20 05:49:49 2011
+++ systemv/lpadmin.c	Fri Sep  2 09:33:11 2011
@@@@ -1494,14 +1494,14 @@@@ set_printer_options(
 static int				/* O - 0 if name is no good, 1 if name is good */
 validate_name(const char *name)		/* I - Name to check */
 {
-  const char	*ptr;			/* Pointer into name */
+  const signed char	*ptr;			/* Pointer into name */
 
 
  /*
   * Scan the whole name...
   */
 
-  for (ptr = name; *ptr; ptr ++)
+  for (ptr = (const signed char *)name; *ptr; ptr ++)
     if (*ptr == '@@')
       break;
     else if ((*ptr >= 0 && *ptr <= ' ') || *ptr == 127 || *ptr == '/' ||
@@@@ -1512,7 +1512,7 @@@@ validate_name(const char *name)		/* I - Name to check 
   * All the characters are good; validate the length, too...
   */
 
-  return ((ptr - name) < 128);
+  return ((ptr - (const signed char *)name) < 128);
 }
 
 
@


1.7
log
@Major update to cups-1.5.0.

Thanks to landry@@ for the bulk testing.
@
text
@d1 1
a1 1
$OpenBSD: patch-systemv_lpadmin_c,v 1.6 2010/11/12 07:09:00 ajacoutot Exp $
@


1.6
log
@This release fixes several scheduler and printing bugs as well as a reported
security bug (which kili@@ already patched for in previous commmit).
@
text
@d1 4
a4 4
$OpenBSD: patch-systemv_lpadmin_c,v 1.5 2010/03/31 16:20:02 ajacoutot Exp $
--- systemv/lpadmin.c.orig	Fri Aug 13 03:34:04 2010
+++ systemv/lpadmin.c	Fri Nov 12 07:31:19 2010
@@@@ -1367,14 +1367,14 @@@@ set_printer_options(
d21 1
a21 1
@@@@ -1385,7 +1385,7 @@@@ validate_name(const char *name)		/* I - Name to check 
@


1.5
log
@Major update to cups-1.4.3.
Changelog is to big to detail here, refer to HOMEPAGE for details.

I have been using 1.4.X for several months.
Versions 1.4.0 and 1.4.2 have been tested in bulks by jasper@@, thanks!

Please contact me directly if you see regressions.
@
text
@d1 4
a4 4
$OpenBSD: patch-systemv_lpadmin_c,v 1.4 2009/04/27 08:25:39 bernd Exp $
--- systemv/lpadmin.c.orig	Tue Feb 17 00:57:08 2009
+++ systemv/lpadmin.c	Sun Aug 30 15:14:02 2009
@@@@ -1952,14 +1952,14 @@@@ set_printer_options(
d21 1
a21 1
@@@@ -1970,7 +1970,7 @@@@ validate_name(const char *name)		/* I - Name to check 
@


1.4
log
@Update to cups-1.3.10. With lots of help from ajacoutot@@.

There's an issue with the admin.cgi which will be fixed
in-tree.

ok ajacoutot@@, jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-systemv_lpadmin_c,v 1.3 2007/05/07 13:58:07 ajacoutot Exp $
--- systemv/lpadmin.c.orig	Sat Jul 12 00:48:49 2008
+++ systemv/lpadmin.c	Tue Mar 17 16:21:50 2009
@@@@ -1956,14 +1956,14 @@@@ set_printer_options(
d21 1
a21 1
@@@@ -1974,7 +1974,7 @@@@ validate_name(const char *name)		/* I - Name to check 
@


1.3
log
@- don't force optimisation nor debug
- regen patches while here
@
text
@d1 4
a4 4
$OpenBSD: patch-systemv_lpadmin_c,v 1.2 2006/10/01 10:43:38 mbalmer Exp $
--- systemv/lpadmin.c.orig	Tue Sep  5 22:45:47 2006
+++ systemv/lpadmin.c	Mon May  7 15:47:41 2007
@@@@ -1963,14 +1963,14 @@@@ set_printer_options(
d21 1
a21 1
@@@@ -1981,7 +1981,7 @@@@ validate_name(const char *name)		/* I - Name to check 
@


1.2
log
@Update to CUPS 1.2.4, which has lots of improvements over the old version
we had, like better support for foreign languages and the usual plethora
of bugfixes.

tested on various architectures and with various applications that use CUPS
as their printing system.  I verified that all ports that are depending on
CUPS still build.
@
text
@d1 3
a3 3
$OpenBSD$
--- systemv/lpadmin.c.orig	Wed Sep 20 11:33:18 2006
+++ systemv/lpadmin.c	Wed Sep 20 11:34:30 2006
d21 1
a21 1
@@@@ -1981,7 +1981,7 @@@@ validate_name(const char *name)		/* I - 
@


1.1
log
@Initial revision
@
text
@d2 5
a6 5
--- systemv/lpadmin.c.orig	Wed Feb 25 21:14:54 2004
+++ systemv/lpadmin.c	Sat Dec 25 14:57:33 2004
@@@@ -2027,14 +2027,14 @@@@ set_printer_options(http_t        *http,
 static int			/* O - 0 if name is no good, 1 if name is good */
 validate_name(const char *name)	/* I - Name to check */
d8 2
a9 2
-  const char	*ptr;		/* Pointer into name */
+  const signed char	*ptr;		/* Pointer into name */
d17 1
a17 1
+  for (ptr = (const signed char *) name; *ptr; ptr ++)
d20 2
a21 2
     else if ((*ptr >= 0 && *ptr <= ' ') || *ptr == 127 || *ptr == '/')
@@@@ -2044,7 +2044,7 @@@@ validate_name(const char *name)	/* I - N
d26 1
a26 1
+  return ((ptr - (const signed char *) name) < 128);
@


1.1.1.1
log
@CUPS, the Common Unix Printing System.

A cross-platform printing solution for Unix environments,
based on the "Internet Printing Protocol, IPP".

ok alek@@
@
text
@@
