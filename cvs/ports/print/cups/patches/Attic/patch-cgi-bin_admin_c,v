head	1.8;
access;
symbols
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.4
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.6.0.4
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	cups_20050116:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2012.02.16.22.12.08;	author ajacoutot;	state dead;
branches;
next	1.7;

1.7
date	2011.06.28.11.52.38;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.03.31.16.20.02;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.07.12.19.58.19;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.27.08.25.39;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2007.05.07.13.58.07;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.01.10.43.38;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.16.12.36.50;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.16.12.36.50;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Update to cups-1.5.2.
While here, create cups's printcap under /etc/cups/ because we are
running unpriviledged so we cannot touch /etc/printcap.
Tweak rc script accordingly.
@
text
@$OpenBSD: patch-cgi-bin_admin_c,v 1.7 2011/06/28 11:52:38 ajacoutot Exp $
--- cgi-bin/admin.c.orig	Fri Mar  4 20:28:38 2011
+++ cgi-bin/admin.c	Tue Jun 28 13:32:08 2011
@@@@ -858,7 +858,7 @@@@ do_am_printer(http_t *http,		/* I - HTTP connection */
 		*uriptr;		/* Pointer into URI */
   int		maxrate;		/* Maximum baud rate */
   char		baudrate[255];		/* Baud rate string */
-  const char	*name,			/* Pointer to class name */
+  const signed char	*name,			/* Pointer to class name */
 		*ptr;			/* Pointer to CGI variable */
   const char	*title;			/* Title of page */
   static int	baudrates[] =		/* Baud rates */
@


1.7
log
@Update to cups-1.4.7.
@
text
@d1 1
a1 1
$OpenBSD: patch-cgi-bin_admin_c,v 1.6 2010/03/31 16:20:02 ajacoutot Exp $
@


1.6
log
@Major update to cups-1.4.3.
Changelog is to big to detail here, refer to HOMEPAGE for details.

I have been using 1.4.X for several months.
Versions 1.4.0 and 1.4.2 have been tested in bulks by jasper@@, thanks!

Please contact me directly if you see regressions.
@
text
@d1 4
a4 4
$OpenBSD: patch-cgi-bin_admin_c,v 1.5 2009/07/12 19:58:19 ajacoutot Exp $
--- cgi-bin/admin.c.orig	Fri Jan 15 03:10:32 2010
+++ cgi-bin/admin.c	Wed Mar 31 15:53:42 2010
@@@@ -835,7 +835,7 @@@@ do_am_printer(http_t *http,		/* I - HTTP connection */
@


1.5
log
@- update to cups-1.3.11
kurt@@'s patches are now upstream
@
text
@d1 4
a4 13
$OpenBSD: patch-cgi-bin_admin_c,v 1.4 2009/04/27 08:25:39 bernd Exp $
--- cgi-bin/admin.c.orig	Thu Jun 18 23:42:45 2009
+++ cgi-bin/admin.c	Mon Jul  6 11:56:21 2009
@@@@ -414,7 +414,7 @@@@ do_am_class(http_t *http,		/* I - HTTP connection */
 		*response;		/* IPP response */
   ipp_attribute_t *attr;		/* member-uris attribute */
   char		uri[HTTP_MAX_URI];	/* Device or printer URI */
-  const char	*name,			/* Pointer to class name */
+  const signed char	*name,			/* Pointer to class name */
 		*ptr;			/* Pointer to CGI variable */
   const char	*title;			/* Title of page */
   static const char * const pattrs[] =	/* Requested printer attributes */
@@@@ -701,7 +701,7 @@@@ do_am_printer(http_t *http,		/* I - HTTP connection */
@


1.4
log
@Update to cups-1.3.10. With lots of help from ajacoutot@@.

There's an issue with the admin.cgi which will be fixed
in-tree.

ok ajacoutot@@, jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-cgi-bin_admin_c,v 1.3 2007/05/07 13:58:07 ajacoutot Exp $
--- cgi-bin/admin.c.orig	Fri Sep 26 17:30:29 2008
+++ cgi-bin/admin.c	Tue Mar 17 16:21:50 2009
d13 1
a13 1
@@@@ -695,7 +695,7 @@@@ do_am_printer(http_t *http,		/* I - HTTP connection */
@


1.3
log
@- don't force optimisation nor debug
- regen patches while here
@
text
@d1 4
a4 4
$OpenBSD: patch-cgi-bin_admin_c,v 1.2 2006/10/01 10:43:38 mbalmer Exp $
--- cgi-bin/admin.c.orig	Thu Aug 24 17:55:42 2006
+++ cgi-bin/admin.c	Mon May  7 15:47:41 2007
@@@@ -237,7 +237,7 @@@@ do_am_class(http_t *http,		/* I - HTTP connection */
d13 1
a13 1
@@@@ -517,7 +517,7 @@@@ do_am_printer(http_t *http,		/* I - HTTP connection */
@


1.2
log
@Update to CUPS 1.2.4, which has lots of improvements over the old version
we had, like better support for foreign languages and the usual plethora
of bugfixes.

tested on various architectures and with various applications that use CUPS
as their printing system.  I verified that all ports that are depending on
CUPS still build.
@
text
@d1 4
a4 4
$OpenBSD$
--- cgi-bin/admin.c.orig	Wed Sep 20 10:51:31 2006
+++ cgi-bin/admin.c	Wed Sep 20 10:52:38 2006
@@@@ -237,7 +237,7 @@@@ do_am_class(http_t *http,		/* I - HTTP c
d13 1
a13 1
@@@@ -517,7 +517,7 @@@@ do_am_printer(http_t *http,		/* I - HTTP
@


1.1
log
@Initial revision
@
text
@d2 4
a5 3
--- cgi-bin/admin.c.orig	Tue Jun 29 15:18:35 2004
+++ cgi-bin/admin.c	Sat Dec 25 15:24:50 2004
@@@@ -196,7 +196,7 @@@@ do_am_class(http_t      *http,		/* I - H
a6 1
   ipp_status_t	status;			/* Request status */
d11 4
a14 3
 
 
@@@@ -487,7 +487,7 @@@@ do_am_printer(http_t      *http,	/* I - 
a16 1
   char		make[255];		/* Make string */
d20 1
a21 1
 		{
@


1.1.1.1
log
@CUPS, the Common Unix Printing System.

A cross-platform printing solution for Unix environments,
based on the "Internet Printing Protocol, IPP".

ok alek@@
@
text
@@
