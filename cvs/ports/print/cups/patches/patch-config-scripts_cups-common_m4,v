head	1.17;
access;
symbols
	OPENBSD_6_0:1.15.0.4
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.14.0.6
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.2
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3;
locks; strict;
comment	@# @;


1.17
date	2017.01.19.03.08.52;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	4akQgZhUZSnpzbrW;

1.16
date	2016.09.19.09.16.51;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	5ZKBoypll2THXP84;

1.15
date	2015.09.01.16.23.51;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	fJT2d2idEfqHZo4P;

1.14
date	2015.02.10.08.29.33;	author ajacoutot;	state Exp;
branches;
next	1.13;
commitid	9fRjFjnMfPJHQiVu;

1.13
date	2014.11.15.10.22.23;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	20oo4Dj2S2v31rH3;

1.12
date	2013.10.23.05.41.18;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.10.22.19.59.18;	author jca;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.19.08.49.14;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.08.04.14.37.04;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.05.17.10.11.23;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.02.16.22.12.08;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.09.08.10.33.12;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.06.28.11.52.38;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.12.07.09.00;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.07.02.07.52.08;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.06.27.04.18.50;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.31.16.20.02;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.17
log
@Update to cups-2.2.2.
@
text
@$OpenBSD: patch-config-scripts_cups-common_m4,v 1.16 2016/09/19 09:16:51 ajacoutot Exp $

Our <sys/ucred.h> does not provide xucred.

--- config-scripts/cups-common.m4.orig	Tue Jan 17 20:27:22 2017
+++ config-scripts/cups-common.m4	Thu Jan 19 04:02:41 2017
@@@@ -128,7 +128,6 @@@@ AC_CHECK_HEADER(strings.h,AC_DEFINE(HAVE_STRINGS_H))
 AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
 AC_CHECK_HEADER(sys/ioctl.h,AC_DEFINE(HAVE_SYS_IOCTL_H))
 AC_CHECK_HEADER(sys/param.h,AC_DEFINE(HAVE_SYS_PARAM_H))
-AC_CHECK_HEADER(sys/ucred.h,AC_DEFINE(HAVE_SYS_UCRED_H))
 
 dnl Checks for iconv.h and iconv_open
 AC_CHECK_HEADER(iconv.h,
@


1.16
log
@Update to cups-2.2.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.15 2015/09/01 16:23:51 ajacoutot Exp $
d5 2
a6 2
--- config-scripts/cups-common.m4.orig	Wed Sep 14 01:39:47 2016
+++ config-scripts/cups-common.m4	Sat Sep 17 15:26:03 2016
a11 1
 AC_CHECK_HEADER(asl.h,AC_DEFINE(HAVE_ASL_H))
d14 1
@


1.15
log
@Update to cups-2.1.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.14 2015/02/10 08:29:33 ajacoutot Exp $
d5 3
a7 3
--- config-scripts/cups-common.m4.orig	Mon Aug 31 17:22:30 2015
+++ config-scripts/cups-common.m4	Tue Sep  1 18:15:27 2015
@@@@ -144,7 +144,6 @@@@ AC_CHECK_HEADER(strings.h,AC_DEFINE(HAVE_STRINGS_H))
@


1.14
log
@Update to cups-2.0.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.13 2014/11/15 10:22:23 ajacoutot Exp $
d5 3
a7 3
--- config-scripts/cups-common.m4.orig	Mon Feb  9 20:38:35 2015
+++ config-scripts/cups-common.m4	Tue Feb 10 09:04:12 2015
@@@@ -136,7 +136,6 @@@@ AC_CHECK_HEADER(strings.h,AC_DEFINE(HAVE_STRINGS_H))
d12 1
a14 1
 AC_CHECK_HEADER(iconv.h,
@


1.13
log
@Major update to cups-2.0.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.12 2013/10/23 05:41:18 ajacoutot Exp $
d5 2
a6 5
XXX push upstream
Use arc4random_stir only if present.

--- config-scripts/cups-common.m4.orig	Wed Oct  1 14:52:30 2014
+++ config-scripts/cups-common.m4	Fri Oct  3 15:38:02 2014
a14 9
@@@@ -173,7 +172,7 @@@@ else
 fi
 
 dnl Check for random number functions...
-AC_CHECK_FUNCS(random lrand48 arc4random)
+AC_CHECK_FUNCS(random lrand48 arc4random arc4random_stir)
 
 dnl Check for geteuid function.
 AC_CHECK_FUNCS(geteuid)
@


1.12
log
@Tweak comments, no pkg change.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.11 2013/10/22 19:59:18 jca Exp $
d8 4
a11 4
--- config-scripts/cups-common.m4.orig	Tue Sep 24 18:25:31 2013
+++ config-scripts/cups-common.m4	Tue Oct 22 06:40:54 2013
@@@@ -137,7 +137,6 @@@@ AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
 AC_CHECK_HEADER(usersec.h,AC_DEFINE(HAVE_USERSEC_H))
a14 1
 AC_CHECK_HEADER(scsi/sg.h,AC_DEFINE(HAVE_SCSI_SG_H))
d17 2
a18 1
@@@@ -175,7 +174,7 @@@@ else
@


1.11
log
@Fixup after arc4random_addrandom/arc4random_stir removal.
If we can detect arc4random but not mentioned functions, then we don't
need to use them.  ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.10 2013/03/19 08:49:14 ajacoutot Exp $
d3 4
a6 2
- Our <sys/ucred.h> does not provide xucred.
- check for add4random_stir, since OpenBSD doesn't provide it anymore.
@


1.10
log
@Update to cups-1.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.9 2012/08/04 14:37:04 ajacoutot Exp $
d3 2
a4 1
Our <sys/ucred.h> does not provide xucred.
d6 2
a7 2
--- config-scripts/cups-common.m4.orig	Mon Mar 18 18:23:09 2013
+++ config-scripts/cups-common.m4	Tue Mar 19 08:15:45 2013
d16 9
@


1.9
log
@Major update to CUPS 1.6.1.
This package is now split between -main (the bloat) and -libs (i.e.
cups-libs; which only contains the base libraries which have no
external deps).
Most filters have moved to cups-filters, the split was needed because
cups depends on cups-filters which depends on cups

The nice side-effect is that this will simplify lots of things in tree.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.6 2011/09/08 10:33:12 ajacoutot Exp $
d5 3
a7 3
--- config-scripts/cups-common.m4.orig	Wed Jul 25 22:49:11 2012
+++ config-scripts/cups-common.m4	Thu Jul 26 10:00:31 2012
@@@@ -136,7 +136,6 @@@@ AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
@


1.8
log
@Update to cups-1.5.3.
@
text
@d1 7
a7 4
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.7 2012/02/16 22:12:08 ajacoutot Exp $
--- config-scripts/cups-common.m4.orig	Tue May 15 16:08:06 2012
+++ config-scripts/cups-common.m4	Wed May 16 08:17:43 2012
@@@@ -135,7 +135,6 @@@@ AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
@


1.7
log
@Update to cups-1.5.2.
While here, create cups's printcap under /etc/cups/ because we are
running unpriviledged so we cannot touch /etc/printcap.
Tweak rc script accordingly.
@
text
@d1 4
a4 4
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.6 2011/09/08 10:33:12 ajacoutot Exp $
--- config-scripts/cups-common.m4.orig	Sun Feb  5 19:56:14 2012
+++ config-scripts/cups-common.m4	Mon Feb  6 11:14:32 2012
@@@@ -134,7 +134,6 @@@@ AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
@


1.6
log
@Major update to cups-1.5.0.

Thanks to landry@@ for the bulk testing.
@
text
@d1 4
a4 4
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.5 2011/06/28 11:52:38 ajacoutot Exp $
--- config-scripts/cups-common.m4.orig	Mon Jul 25 22:24:24 2011
+++ config-scripts/cups-common.m4	Fri Sep  2 09:33:11 2011
@@@@ -133,7 +133,6 @@@@ AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
@


1.5
log
@Update to cups-1.4.7.
@
text
@d1 3
a3 3
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.4 2010/11/12 07:09:00 ajacoutot Exp $
--- config-scripts/cups-common.m4.orig	Tue Jun 28 05:15:59 2011
+++ config-scripts/cups-common.m4	Tue Jun 28 13:32:08 2011
d11 1
a11 1
 dnl Checks for statfs and its many headers...
@


1.4
log
@This release fixes several scheduler and printing bugs as well as a reported
security bug (which kili@@ already patched for in previous commmit).
@
text
@d1 4
a4 7
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.3 2010/07/02 07:52:08 ajacoutot Exp $

STR #3447: dbus notifier no longer builds

--- config-scripts/cups-common.m4.orig	Thu Nov 11 21:11:32 2010
+++ config-scripts/cups-common.m4	Fri Nov 12 07:31:19 2010
@@@@ -130,7 +130,6 @@@@ AC_CHECK_HEADER(bstring.h,AC_DEFINE(HAVE_BSTRING_H))
a11 9
@@@@ -283,6 +282,8 @@@@ if test "x$enable_dbus" != xno; then
 				dbus_message_iter_init_append,
 				AC_DEFINE(HAVE_DBUS_MESSAGE_ITER_INIT_APPEND),,
 				`$PKGCONFIG --libs dbus-1`)
+			DBUS_NOTIFIER="dbus"
+			DBUS_NOTIFIERLIBS="`$PKGCONFIG --libs dbus-1`"
 		else
 			AC_MSG_RESULT(no)
 		fi
@


1.3
log
@Fix SO_PEERCRED fallout.

from Moritz Grimm.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.2 2010/06/27 04:18:50 ajacoutot Exp $
d5 2
a6 2
--- config-scripts/cups-common.m4.orig	Thu Jun 17 20:25:43 2010
+++ config-scripts/cups-common.m4	Fri Jul  2 09:19:02 2010
d14 2
a15 2
 dnl Checks for string functions.
@@@@ -276,6 +275,8 @@@@ if test "x$enable_dbus" != xno; then
@


1.2
log
@Update to cups-1.4.4.
Fixes several security, scheduler, printing, and conformance issues.
@
text
@d1 1
a1 1
$OpenBSD: patch-config-scripts_cups-common_m4,v 1.1 2010/03/31 16:20:02 ajacoutot Exp $
d6 10
a15 2
+++ config-scripts/cups-common.m4	Sun Jun 27 06:09:50 2010
@@@@ -276,6 +276,8 @@@@ if test "x$enable_dbus" != xno; then
@


1.1
log
@Major update to cups-1.4.3.
Changelog is to big to detail here, refer to HOMEPAGE for details.

I have been using 1.4.X for several months.
Versions 1.4.0 and 1.4.2 have been tested in bulks by jasper@@, thanks!

Please contact me directly if you see regressions.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- config-scripts/cups-common.m4.orig	Tue Mar 30 22:40:58 2010
+++ config-scripts/cups-common.m4	Wed Mar 31 15:53:42 2010
@@@@ -268,6 +268,8 @@@@ if test "x$enable_dbus" != xno; then
@

