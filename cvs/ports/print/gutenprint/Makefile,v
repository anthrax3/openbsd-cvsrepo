head	1.48;
access;
symbols
	OPENBSD_6_0:1.45.0.2
	OPENBSD_6_0_BASE:1.45
	OPENBSD_5_9:1.43.0.2
	OPENBSD_5_9_BASE:1.43
	OPENBSD_5_8:1.41.0.4
	OPENBSD_5_8_BASE:1.41
	OPENBSD_5_7:1.40.0.4
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.40.0.2
	OPENBSD_5_6_BASE:1.40
	OPENBSD_5_5:1.38.0.2
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.37.0.2
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.33.0.2
	OPENBSD_5_3_BASE:1.33
	OPENBSD_5_2:1.28.0.2
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.4
	OPENBSD_5_0:1.26.0.2
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.24.0.2
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.5.0.2
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	ajacoutot_20071001:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.48
date	2017.02.18.17.33.51;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	kjw4RQ4AAUYktD89;

1.47
date	2017.02.18.17.32.37;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	bw6Y0vDo3oixdVWL;

1.46
date	2017.01.14.17.15.51;	author ajacoutot;	state Exp;
branches;
next	1.45;
commitid	HaXJ8ESee1YTdqJD;

1.45
date	2016.07.08.16.53.23;	author sthen;	state Exp;
branches;
next	1.44;
commitid	w2WbktaBEugwOePt;

1.44
date	2016.03.11.20.28.30;	author naddy;	state Exp;
branches;
next	1.43;
commitid	UYLP8TE6V7RS2GhJ;

1.43
date	2016.01.16.08.52.46;	author ajacoutot;	state Exp;
branches;
next	1.42;
commitid	rprOjgUlnZnjyYGD;

1.42
date	2015.08.17.19.52.40;	author sthen;	state Exp;
branches;
next	1.41;
commitid	bdULBh9zZMZltgme;

1.41
date	2015.04.04.09.21.03;	author ajacoutot;	state Exp;
branches;
next	1.40;
commitid	kS3kwKZogsvzYmEY;

1.40
date	2014.05.21.06.57.42;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2014.04.21.20.49.30;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2013.12.12.14.53.11;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2013.06.17.19.28.37;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2013.03.11.11.37.53;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2013.01.05.12.53.09;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2012.10.19.09.26.10;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2012.10.13.08.24.52;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2012.09.01.21.44.49;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2012.08.04.14.42.04;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.06.13.16.04.56;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.02.21.22.19.32;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2011.05.04.14.55.02;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2011.04.15.18.40.47;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.20.09.48.39;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.10.24.21.32.39;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.18.21.25.08;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2010.08.24.16.33.53;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.08.21.21.43.02;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.07.26.20.23.28;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.03.21.10.00.36;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.12.10.14.12.01;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.12.10.11.04.35;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.27.11.11.04;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.08.10.06.34.08;	author kili;	state Exp;
branches;
next	1.12;

1.12
date	2009.03.31.15.11.25;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.03.23.17.17.33;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.03.12.18.13.54;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.02.09.11.25.12;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2008.12.20.21.15.56;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2008.09.11.19.24.23;	author martynas;	state Exp;
branches;
next	1.6;

1.6
date	2008.08.31.16.06.11;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.07.30.17.12.24;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2008.07.27.00.05.24;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.28.19.02.22;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2007.11.20.15.48.41;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.01.10.32.57;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.01.10.32.57;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.48
log
@Missed bump.
@
text
@# $OpenBSD: Makefile,v 1.47 2017/02/18 17:32:37 ajacoutot Exp $

COMMENT=		high quality print drivers for foomatic and CUPS

V=			5.2.12
DISTNAME=		gutenprint-${V}
REVISION=		0

MAJOR_V=		${V:C/^([0-9]+\.[0-9]+).*/\1/}
SUBST_VARS=		MAJOR_V

CATEGORIES=		print

EXTRACT_SUFX=		.tar.bz2

SHARED_LIBS +=  gutenprint           2.0      # 6.0

HOMEPAGE=		http://gimp-print.sourceforge.net/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += avahi-client avahi-common c cups cupsimage dbus-1 ffi
WANTLIB += gmp gnutls hogweed iconv idn2 intl m ncurses nettle
WANTLIB += p11-kit pthread readline tasn1 usb-1.0 z

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=gimp-print/}

BUILD_DEPENDS=		print/foomatic-db-engine

LIB_DEPENDS=		devel/libusb1 \
			print/cups,-libs

# foomatic-rip(1), foomatic-db(-engine)
RUN_DEPENDS +=		print/cups-filters

USE_GMAKE=		Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--enable-static \
			--enable-cups-ppds-at-top-level \
			--disable-translated-cups-ppds \
			--disable-libgutenprintui2 \
			--with-cups=${LOCALBASE} \
			--without-gimp2
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

.for i in DVIPS DB2PDF DVIPDF DB2PS DB2HTML DOXYGEN TEXI2HTML CONVERT
CONFIGURE_ENV+=		ac_cv_path_$i=""
.endfor

MAKE_FLAGS=		INTLLIBS='$$(LTLIBINTL)'
FAKE_FLAGS=		cups_conf_serverroot=${PREFIX}/share/examples/gutenprint

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc
	mv ${PREFIX}/share/gutenprint/doc \
		${PREFIX}/share/doc/gutenprint

.include <bsd.port.mk>
@


1.47
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2017/01/14 17:15:51 ajacoutot Exp $
d7 1
@


1.46
log
@Update to gutenprint-5.2.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/07/08 16:53:23 sthen Exp $
d25 1
a25 1
WANTLIB += gmp gnutls hogweed iconv idn intl m ncurses nettle
@


1.45
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2016/03/11 20:28:30 naddy Exp $
d5 1
a5 2
V=			5.2.11
REVISION=		0
d24 3
a26 3
WANTLIB += avahi-client avahi-common c cups cupsimage dbus-1
WANTLIB += ijs m ncurses pthread readline usb-1.0 z
WANTLIB += ffi gmp gnutls hogweed nettle p11-kit tasn1 idn
a29 2
MODULES=		devel/gettext

d33 1
a33 2
			print/cups,-libs \
			print/ijs
d42 5
a46 5
                        --enable-cups-ppds-at-top-level \
                        --disable-translated-cups-ppds \
                        --disable-libgutenprintui2 \
                        --with-cups=${LOCALBASE} \
                        --without-gimp2
a60 1
	rm ${PREFIX}/share/foomatic/kitload.log
@


1.44
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2016/01/16 08:52:46 ajacoutot Exp $
d6 1
d27 1
a27 1
WANTLIB += ffi gmp gnutls hogweed nettle p11-kit tasn1
@


1.43
log
@Update to gutenprint-5.2.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2015/08/17 19:52:40 sthen Exp $
d44 1
a44 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
                        --enable-static \
@


1.42
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/04/04 09:21:03 ajacoutot Exp $
d5 1
a5 1
V=			5.2.10
a6 1
REVISION=		1
d15 1
a15 1
SHARED_LIBS +=  gutenprint           2.0      # 5.0
@


1.41
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/05/21 06:57:42 ajacoutot Exp $
d7 1
a7 1
REVISION=		0
d25 3
a27 2
WANTLIB += avahi-client avahi-common c crypto cups cupsimage dbus-1
WANTLIB += ijs m ncurses pthread readline ssl usb-1.0 z
@


1.40
log
@Update to gutenprint-5.2.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/04/21 20:49:30 ajacoutot Exp $
d7 1
@


1.39
log
@Regen WANTLIB after kerberos support was removed from cups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/12/12 14:53:11 ajacoutot Exp $
d5 1
a5 1
V=			5.2.9
a6 1
REVISION=		5
d15 1
a15 1
SHARED_LIBS+=		gutenprint	1.0	# .2.3
d25 1
a25 1
WANTLIB += ijs m ncurses pthread readline ssl z
d33 2
a34 1
LIB_DEPENDS=		print/cups,-libs \
d51 1
a51 3
			LDFLAGS="-L${LOCALBASE}/lib" \
			LIBS="-liconv -lintl" \
			am_cv_prog_tar_ustar=plaintar
d57 1
@


1.38
log
@Only depend on print/cups-filters -- it is enough to bring all required
dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/06/20 06:54:37 ajacoutot Exp $
d7 1
a7 2

REVISION=		4
d25 2
a26 3
WANTLIB += asn1 c crypto cups cupsimage gssapi ijs krb5 m ncurses
WANTLIB += pthread readline ssl z avahi-client avahi-common dbus-1
WANTLIB += com_err heimbase roken wind
@


1.37
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/06/17 19:28:37 ajacoutot Exp $
d8 1
a8 1
REVISION=		3
d39 2
a40 5
# gutenprint with foomatic needs xml drivers information from foomatic-db
RUN_DEPENDS +=		print/foomatic-db

# share/foomatic/db/source/*/*.xml
RUN_DEPENDS +=		print/foomatic-db-engine
@


1.36
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/03/21 08:46:35 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
d28 1
a28 1
WANTLIB += com_err heimbase heimntlm hx509 roken wind
@


1.35
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/03/11 11:37:53 espie Exp $
d8 1
a8 1
REVISION=		1
d28 1
@


1.34
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/01/05 12:53:09 ajacoutot Exp $
a44 1
USE_LIBTOOL=		Yes
@


1.33
log
@Adapt dependencies after recent print/cups change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/10/19 09:26:10 ajacoutot Exp $
a24 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.32
log
@Merge -foomatic into -main. There was no reason to subpackage this since
it already dependended on the main package.
Enable support for the native CUPS driver which brings some enhancedm
functionnalities (head cleaning...).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/10/13 08:24:52 ajacoutot Exp $
d8 1
a8 1
REVISION=		0
d30 1
a30 1
WANTLIB += pthread readline ssl z
@


1.31
log
@Update to gutenprint-5.2.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/09/01 21:44:49 ajacoutot Exp $
d3 1
a3 2
COMMENT-main=		high quality print drivers
COMMENT-foomatic=	Foomatic data for gutenprint drivers
a4 3
# XXX On major update:
# update the gutenprint-ijs.X.X substitution in print/foomatic-db + bump
# update the example in print/foomatic-db-engine README + bump
d7 2
a8 2
PKGNAME-main=		${DISTNAME}
PKGNAME-foomatic=	foomatic-db-${DISTNAME}
d29 3
d34 1
a34 5
MULTI_PACKAGES=		-main -foomatic

MODULES=	devel/gettext

WANTLIB-main +=	c m ncurses readline ijs ${MODGETTEXT_WANTLIB}
d38 1
a38 1
LIB_DEPENDS-main=	${MODGETTEXT_LIB_DEPENDS} \
d41 2
a42 7
WANTLIB-foomatic += # empty
LIB_DEPENDS-foomatic=	# empty
RUN_DEPENDS-foomatic=	${BUILD_PKGPATH},-main
PKG_ARCH-foomatic=	*

# gutenprint needs xml drivers information from foomatic-db
RUN_DEPENDS-foomatic +=	print/foomatic-db
d45 1
a45 1
RUN_DEPENDS-foomatic +=	print/foomatic-db-engine
a48 1
USE_GROFF =		Yes
d51 7
a57 11
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--enable-static \
			--enable-test \
			--enable-testpattern \
			--enable-escputil \
			--disable-libgutenprintui2 \
			--with-foomatic \
			--with-foomatic3 \
			--with-ghostscript \
			--with-cups=no \
			--without-gimp2
d67 1
a67 1
FAKE_FLAGS=		docdir=${PREFIX}/share/doc/gutenprint
d69 5
a73 2
pre-configure:
	${SUBST_CMD} ${WRKSRC}/src/gutenprintui2/plist.c
@


1.30
log
@Adapt comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/08/04 14:42:04 ajacoutot Exp $
d9 1
a9 1
V=			5.2.8
a12 2

REVISION-foomatic=	0
@


1.29
log
@Depends on both foomatic-db and foomatic-db-engine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/06/13 16:04:56 ajacoutot Exp $
d6 3
a8 2
# XXX On major update, update the gutenprint-ijs.X.X substitution in the
# print/foomatic-db port and bump.
@


1.28
log
@Update to gutenprint-5.2.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/02/21 22:19:32 sthen Exp $
d13 2
d42 1
a42 1
BUILD_DEPENDS=		print/foomatic-db-engine>=4.0.3
d49 1
a49 3
RUN_DEPENDS-foomatic=	print/foomatic-db-engine \
			print/foomatic-filters \
			${BUILD_PKGPATH},-main
d51 6
@


1.27
log
@Remove patches casting NULL when used as a sentinel to a pointer.
These are no longer needed since unistd.h r1.63 et al.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/05/04 14:55:02 ajacoutot Exp $
d8 1
a8 2
V=			5.2.7
REVISION=		0
@


1.26
log
@Update to gutenprint-5.2.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/04/15 18:40:47 ajacoutot Exp $
d9 1
@


1.25
log
@Rework the way we handle dependencies in the print ports:
* depends on foomatic-filters when a driver installs:
  share/foomatic/db/source/.../*.ppd{,.gz}
* depends on foomatic-db-engine when a driver installs:
  share/foomatic/db/source/.../*.xml

foomatic-db-engine now depends on foomatic-db (which itself depends on
nothing anymore).

This will ensure all the needed packages are installed for complete
foomatic-* use.
Some packages install both pre-created ppd and xml files, so theorically
it wouldn't need to depend on foomatic-db-engine, but we still do it
because we may want to regen the ppd file.

It's the best compromise I could come up with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/20 09:48:39 espie Exp $
d8 1
a8 1
V=			5.2.6
a11 2

REVISION-foomatic=	0
@


1.24
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/06 16:07:00 espie Exp $
d13 2
d49 2
a50 1
RUN_DEPENDS-foomatic=	print/foomatic-db \
@


1.23
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/10/24 21:32:39 ajacoutot Exp $
d40 1
a40 1
BUILD_DEPENDS=		:foomatic-db-engine->=4.0.3:print/foomatic-db-engine
d43 1
a43 1
			::print/ijs
d47 2
a48 2
RUN_DEPENDS-foomatic=	::print/foomatic-db \
			::${BUILD_PKGPATH},-main
d53 1
a53 1
USE_GROFF =	Yes
@


1.22
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/18 21:25:08 espie Exp $
d38 1
a38 1
WANTLIB-main +=	c m ncurses readline ijs
@


1.21
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/08/24 16:33:53 ajacoutot Exp $
a50 1
USE_X11=		Yes
@


1.20
log
@Add a reminder comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/08/21 21:43:02 ajacoutot Exp $
d54 1
@


1.19
log
@Update to gutenprint-5.2.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/07/26 20:23:28 ajacoutot Exp $
d6 2
@


1.18
log
@Move to new depends.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/03/21 10:00:36 ajacoutot Exp $
d6 1
a6 1
V=			5.2.5
a9 2

REVISION-main=		0
@


1.17
log
@Update to gutenprint-5.2.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/12/10 14:12:01 ajacoutot Exp $
d11 2
d38 1
a38 1
WANTLIB-main +=	c m ncurses readline
d43 1
a43 1
			ijs::print/ijs
@


1.16
log
@Put binaries back into the -main subpackage. It makes more sense as the
foomatic db can be removed while keeping the gutenprint pkg installed
for printing. It only adds a dependency on print/ijs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/12/10 11:04:35 ajacoutot Exp $
d6 1
a6 1
V=			5.2.4
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p1
PKGNAME-foomatic=	foomatic-db-${DISTNAME}p1
@


1.15
log
@Remove the -gimp subpackage. It had a meaning when gimp did not provide
a sensible printing interface but this is not the case anymore. This
also allows to remove gutenprintui2 and gtk+2 dependency.

Rebuild -foomatic against the latest foomatic-db-engine.
The -foomatic package run_depends on foomatic-db. Move some files from
-main to -foomatic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/08/27 11:11:04 ajacoutot Exp $
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p0
PKGNAME-foomatic=	foomatic-db-${DISTNAME}p0
d36 1
a36 3
WANTLIB += c m
WANTLIB-main +=	${WANTLIB} ncurses readline
WANTLIB-foomatic += ${WANTLIB}
d40 1
a40 2
LIB_DEPENDS-foomatic=	${MODGETTEXT_LIB_DEPENDS} \
			gutenprint.>=1::${BUILD_PKGPATH},-main \
d42 6
a47 1
RUN_DEPENDS-foomatic=	::print/foomatic-db
@


1.14
log
@Small update to gutenprint-5.2.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/08/10 06:34:08 kili Exp $
a4 1
COMMENT-gimp=		Gimp print plug-in
d8 2
a9 3
PKGNAME-main=		${DISTNAME}
PKGNAME-foomatic=	foomatic-db-${DISTNAME}
PKGNAME-gimp=		gutenprint-gimp-${V}
a18 1
SHARED_LIBS+=		gutenprintui2	1.0	# .1.0
d32 14
a45 37
PSEUDO_FLAVORS=		no_foomatic no_gimp
FLAVOR?=
MULTI_PACKAGES=		-main

.if !${FLAVOR:L:Mno_foomatic}
MULTI_PACKAGES+=	-foomatic
CONFIGURE_ARGS+=	--with-foomatic3
BUILD_DEPENDS+=		::print/foomatic-db-engine
.else
CONFIGURE_ARGS+=	--without-foomatic
.endif

.if !${FLAVOR:L:Mno_gimp}
MULTI_PACKAGES+=	-gimp
CONFIGURE_ARGS+=	--with-gimp2-as-gutenprint \
			--with-gimp2
.else
CONFIGURE_ARGS+=	--without-gimp2
.endif

WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 c cairo expat fontconfig
WANTLIB += freetype gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0
WANTLIB += iconv intl m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread-stubs xcb z

WANTLIB-main=	${WANTLIB} ncurses readline
WANTLIB-foomatic=
WANTLIB-gimp=	${WANTLIB} gdk-x11-2.0 gdk_pixbuf-2.0 gthread-2.0 \
		gtk-x11-2.0 pthread

LIB_DEPENDS-main=	ijs::print/ijs \
			gdk-x11-2.0.>=802,gdk_pixbuf-2.0.>=802,gtk-x11-2.0.>=802::x11/gtk+2
LIB_DEPENDS-gimp=	gutenprint,gutenprintui2::${BUILD_PKGPATH} \
			gimp-2.0,gimpbase-2.0,gimpcolor-2.0,gimpconfig-2.0,gimpmath-2.0,gimpmodule-2.0,gimpui-2.0,gimpwidgets-2.0::graphics/gimp/stable
RUN_DEPENDS-main=	::print/ghostscript/gnu
RUN_DEPENDS-foomatic=	::${BUILD_PKGPATH}
a55 1
			--enable-libgutenprintui2 \
d57 1
d61 2
a62 1
			--with-cups=no
a70 2

PKG_ARCH-foomatic=	*
@


1.13
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/03/31 15:11:25 ajacoutot Exp $
d7 1
a7 1
V=			5.2.3
d9 3
a11 3
PKGNAME-main=		${DISTNAME}p1
PKGNAME-foomatic=	foomatic-db-${DISTNAME}p0
PKGNAME-gimp=		gutenprint-gimp-${V}p1
d90 1
@


1.12
log
@- fix the no_gimp PSEUDO_FLAVOR

from Tim van der Molen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/03/23 17:17:33 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p0
d11 1
a11 1
PKGNAME-gimp=		gutenprint-gimp-${V}p0
d59 1
a59 1
WANTLIB += pcre pixman-1 png z
@


1.11
log
@- major update to gutenprint 5.2.3 which is the latest stable version

If you're running with locally generated PPD files, you will need to
regen them with foomatic-ppdfile(1) so that the driver uses
gutenprint-ijs.5.2 and not gutenprint-ijs.5.0.

Tested on several printers without regression.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/03/12 18:13:54 sthen Exp $
d9 3
a11 3
PKGNAME-main=		${DISTNAME}
PKGNAME-foomatic=	foomatic-db-${DISTNAME}
PKGNAME-gimp=		gutenprint-gimp-${V}
d49 2
a50 1
CONFIGURE_ARGS+=	--with-gimp2-as-gutenprint
a86 2
			--with-gimp2 \
			--with-gimp2-as-gutenprint \
@


1.10
log
@sync WANTLIB/LIB_DEPENDS and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/02/09 11:25:12 ajacoutot Exp $
d7 1
a7 1
V=			5.0.1
d9 7
a15 3
PKGNAME-main=		${DISTNAME}p6
PKGNAME-foomatic=	foomatic-db-${DISTNAME}p1
PKGNAME-gimp=		gutenprint-gimp-${V}p3
d19 3
a21 2
SHARED_LIBS+=		gutenprint	0.0	# .2.0
SHARED_LIBS+=		gutenprintui2	0.0	# .1.0
d81 7
a87 3
			--disable-libgutenprintui \
			--without-gimp \
			--docdir=${PREFIX}/share/doc/gutenprint \
d93 3
a95 2
MAKE_ENV=		${CONFIGURE_ENV}
MAKE_FLAGS=		INTLLIBS="\$${LTLIBINTL}"
d98 5
@


1.9
log
@- move some files from -main to -foomatic where they belong; fix
packaging of flavored builds
- regen WANTLIB while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/12/20 21:15:56 ajacoutot Exp $
d11 1
a11 1
PKGNAME-gimp=		gutenprint-gimp-${V}p2
d49 5
a53 5
WANTLIB=		X11 Xau Xcomposite Xcursor Xdamage Xdmcp \
                        Xext Xfixes Xi Xinerama Xrandr Xrender \
                        atk-1.0 c cairo expat fontconfig freetype \
                        glitz iconv intl m pango-1.0 pangocairo-1.0 \
                        pangoft2-1.0 pcre pixman-1 png z
d55 1
a55 2
WANTLIB-main=		${WANTLIB} gio-2.0 glib-2.0 gmodule-2.0 \
			gobject-2.0 ncurses readline
d57 2
a58 3
WANTLIB-gimp=		${WANTLIB} \
			gdk_pixbuf-2.0 gobject-2.0 pthread gdk-x11-2.0 \
			glib-2.0 gmodule-2.0 gthread-2.0 gtk-x11-2.0 
@


1.8
log
@- take maintainership of these ports, jacob@@ is on audio now and not
printing anymore ;-)

"go ahead" jacob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/09/11 19:24:23 martynas Exp $
d9 2
a10 2
PKGNAME-main=		${DISTNAME}p5
PKGNAME-foomatic=	foomatic-db-${DISTNAME}p0
d22 1
a22 1
# GPL
d55 2
a56 1
WANTLIB-main=		${WANTLIB} ncurses readline
a62 1
			glib-2.0.>=1000,gmodule-2.0.>=1000,gobject-2.0.>=1000::devel/glib2 \
@


1.7
log
@- don't round to double-precision
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/08/31 16:06:11 ajacoutot Exp $
d9 3
a11 3
PKGNAME-main=		${DISTNAME}p4
PKGNAME-foomatic=	foomatic-db-${DISTNAME}
PKGNAME-gimp=		gutenprint-gimp-${V}p1
d20 1
a20 1
MAINTAINER=		Jacob Meuser <jakemsr@@openbsd.org>
@


1.6
log
@- don't tell users to install the -cups subpackage when it does not exist
anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/07/30 17:12:24 martynas Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p3
@


1.5
log
@don't try to use extended-precision isfinite.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/07/27 00:05:24 jakemsr Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p2
@


1.4
log
@
* kill the -cups subpackage, it's redundant and leads to a circular
dependency with ghostscript/cups.
* add @@bin markers while here

requested by and help from kili@@, ajacoutot@@ agrees with the idea
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/12/28 19:02:22 kili Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p1
@


1.3
log
@
Dependency changes after gimp update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/11/20 15:48:41 ajacoutot Exp $
a4 1
COMMENT-cups=		gutenprint CUPS driver
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p0
d11 1
a11 2
PKGNAME-cups=		gutenprint-cups-${V}p0
PKGNAME-gimp=		gutenprint-gimp-${V}p0
d30 1
a30 1
PSEUDO_FLAVORS=		no_foomatic no_cups no_gimp
a41 9
.if !${FLAVOR:L:Mno_cups}
MULTI_PACKAGES+=	-cups
CONFIGURE_ARGS+=	--with-cups=${LOCALBASE} \
			--enable-cups-ppds \
			--enable-cups-level3-ppds
.else
CONFIGURE_ARGS+=	--with-cups=no
.endif

d49 5
a53 1
WANTLIB=		c m z png iconv intl
d55 1
a55 5
WANTLIB-main=		${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage \
			Xdmcp Xext Xfixes \
			Xi Xinerama Xrandr Xrender atk-1.0 cairo expat \
			freetype fontconfig glitz pango-1.0 \
			pangocairo-1.0 pangoft2-1.0 ncurses readline pcre
d57 3
a59 8
WANTLIB-cups=		${WANTLIB} crypto jpeg pthread ssl tiff
WANTLIB-gimp=		${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage \
			Xdmcp Xext Xfixes \
			Xi Xinerama Xrandr Xrender atk-1.0 cairo expat \
			freetype fontconfig glitz pango-1.0 \
			pangocairo-1.0 pangoft2-1.0 gdk-x11-2.0 \
			gdk_pixbuf-2.0 glib-2.0 gmodule-2.0 \
			gobject-2.0 gthread-2.0 gtk-x11-2.0 pcre pthread
a65 2
LIB_DEPENDS-cups=	cups.>=3,cupsimage.>=2::print/cups

a67 2
RUN_DEPENDS-cups=	::${BUILD_PKGPATH} \
			:ghostscript-*-cups:print/ghostscript/gnu,cups
d80 2
a81 1
			--docdir=${PREFIX}/share/doc/gutenprint
@


1.2
log
@- make the -cups subpackage run on the cups FLAVOR of ghostscript since
it needs pstoraster

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/10/01 10:32:57 ajacoutot Exp $
d10 1
a10 1
PKGNAME-main=		${DISTNAME}
d13 1
a13 1
PKGNAME-gimp=		gutenprint-gimp-${V}
d62 2
a63 1
WANTLIB-main=		${WANTLIB} X11 Xau Xcursor Xdmcp Xext Xfixes \
d66 1
a66 1
			pangocairo-1.0 pangoft2-1.0 ncurses readline
d69 2
a70 1
WANTLIB-gimp=		${WANTLIB} X11 Xau Xcursor Xdmcp Xext Xfixes \
d75 1
a75 1
			gobject-2.0 gtk-x11-2.0
d81 1
a81 1
			gimp-2.0,gimpbase-2.0,gimpcolor-2.0,gimpmath-2.0,gimpmodule-2.0,gimpui-2.0,gimpwidgets-2.0::graphics/gimp/stable
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d12 1
a12 1
PKGNAME-cups=		gutenprint-cups-${V}
d84 2
a85 1
RUN_DEPENDS-cups=	::${BUILD_PKGPATH}
@


1.1.1.1
log
@Import gutenprint-5.0.1

Gutenprint, formerly known as gimp-print, is a project to provide high
quality drivers for Canon, Epson, Lexmark and PCL printers.
This package contains the driver libraries which are the basis of the
gutenprint project, and which can be used by other printing programs. It
may be used with most common UNIX print spooling systems, including
CUPS, lpr, LPRng, or others.

There are 3 subpackages:
* foomatic-db-gutenprint -> Foomatic data for gutenprint drivers
* gutenprint-cups -> gutenprint CUPS driver
* gutenprint-gimp -> Gimp print plug-in


Note: the direct CUPS drivers won't work as they need pstoraster which
will be included with the next ghostscript update; you will still be
able to print with CUPS using foomatic (which most of the time is the
recommended way anyway).
Hopefully, more people will test this now that it's in.

based on a port by jakemsr@@
ok jakemsr@@
@
text
@@
