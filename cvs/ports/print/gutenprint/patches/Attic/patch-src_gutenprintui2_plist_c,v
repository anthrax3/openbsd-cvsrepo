head	1.4;
access;
symbols
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.12
	OPENBSD_5_0:1.2.0.10
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.8
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.6
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.4
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.6
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.4
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	ajacoutot_20071001:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2012.10.19.09.26.10;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2012.02.21.22.19.32;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.23.17.17.33;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.01.10.32.57;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.01.10.32.57;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Merge -foomatic into -main. There was no reason to subpackage this since
it already dependended on the main package.
Enable support for the native CUPS driver which brings some enhancedm
functionnalities (head cleaning...).
@
text
@$OpenBSD: patch-src_gutenprintui2_plist_c,v 1.3 2012/02/21 22:19:32 sthen Exp $
--- src/gutenprintui2/plist.c.orig	Sun Mar 22 11:48:22 2009
+++ src/gutenprintui2/plist.c	Sun Mar 22 11:54:35 2009
@@@@ -89,14 +89,14 @@@@ typedef struct
  * See bug 742187 (huge delays with lpstat -d -p) for an explanation.
  */
 static const print_system_t default_printing_system =
-  { "SysV", N_("System V lp"), "lp -s", "-d", "-oraw", "/usr/bin/lp",
-    "/usr/bin/lpstat -v | awk '/^device for /i {sub(\":\", \"\", $3); print $3}'",
-  "-n" };
+  { "lpd", N_("Berkeley lpd (/usr/sbin/lpc)"), "lpr", "-P", "-l", "/usr/sbin/lpc",
+    "/usr/sbin/lpc status | awk '/^...*:/ {sub(\":.*\", \"\"); print}'",
+    "-#" };
 
 static print_system_t known_printing_systems[] =
 {
-  { "CUPS", N_("CUPS"), "lp -s", "-d", "-oraw", "/usr/sbin/cupsd",
-    "/usr/bin/lpstat -v | awk '/^device for /i {sub(\":\", \"\", $3); print $3}'",
+  { "CUPS", N_("CUPS"), "lp -s", "-d", "-oraw", "${LOCALBASE}/sbin/cupsd",
+    "${LOCALBASE}/bin/lpstat -v | awk '/^device for /i {sub(\":\", \"\", $3); print $3}'",
     "-n" },
   { "SysV", N_("System V lp"), "lp -s", "-d", "-oraw", "/usr/bin/lp",
     "/usr/bin/lpstat -v | awk '/^device for /i {sub(\":\", \"\", $3); print $3}'",
@


1.3
log
@Remove patches casting NULL when used as a sentinel to a pointer.
These are no longer needed since unistd.h r1.63 et al.  ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_gutenprintui2_plist_c,v 1.2 2009/03/23 17:17:33 ajacoutot Exp $
@


1.2
log
@- major update to gutenprint 5.2.3 which is the latest stable version

If you're running with locally generated PPD files, you will need to
regen them with foomatic-ppdfile(1) so that the driver uses
gutenprint-ijs.5.2 and not gutenprint-ijs.5.0.

Tested on several printers without regression.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_gutenprintui2_plist_c,v 1.1.1.1 2007/10/01 10:32:57 ajacoutot Exp $
a23 9
@@@@ -1661,7 +1661,7 @@@@ stpui_print(const stpui_plist_t *printer, stpui_image_
 			  locale = g_strdup(setlocale(LC_NUMERIC, NULL));
 			  setlocale(LC_NUMERIC, "C");
 #endif
-			  execl("/bin/sh", "/bin/sh", "-c", command, NULL);
+			  execl("/bin/sh", "/bin/sh", "-c", command, (char *)NULL);
 			  /* NOTREACHED */
 			  _exit (1);
 			}
@


1.1
log
@Initial revision
@
text
@d1 27
a27 7
$OpenBSD$
--- src/gutenprintui2/plist.c.orig	Sun Jun  3 17:20:09 2007
+++ src/gutenprintui2/plist.c	Mon Jun 18 23:32:40 2007
@@@@ -1613,7 +1613,7 @@@@ stpui_print(const stpui_plist_t *printer, stpui_image_
 			  close (pipefd[0]);
 			  close (pipefd[1]);
 			  close(syncfd[1]);
@


1.1.1.1
log
@Import gutenprint-5.0.1

Gutenprint, formerly known as gimp-print, is a project to provide high
quality drivers for Canon, Epson, Lexmark and PCL printers.
This package contains the driver libraries which are the basis of the
gutenprint project, and which can be used by other printing programs. It
may be used with most common UNIX print spooling systems, including
CUPS, lpr, LPRng, or others.

There are 3 subpackages:
* foomatic-db-gutenprint -> Foomatic data for gutenprint drivers
* gutenprint-cups -> gutenprint CUPS driver
* gutenprint-gimp -> Gimp print plug-in


Note: the direct CUPS drivers won't work as they need pstoraster which
will be included with the next ghostscript update; you will still be
able to print with CUPS using foomatic (which most of the time is the
recommended way anyway).
Hopefully, more people will test this now that it's in.

based on a port by jakemsr@@
ok jakemsr@@
@
text
@@
