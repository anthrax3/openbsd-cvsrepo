head	1.152;
access;
symbols
	OPENBSD_6_0:1.142.0.2
	OPENBSD_6_0_BASE:1.142
	OPENBSD_5_9:1.137.0.2
	OPENBSD_5_9_BASE:1.137
	OPENBSD_5_8:1.131.0.4
	OPENBSD_5_8_BASE:1.131
	OPENBSD_5_7:1.121.0.2
	OPENBSD_5_7_BASE:1.121
	OPENBSD_5_6:1.115.0.2
	OPENBSD_5_6_BASE:1.115
	OPENBSD_5_5:1.107.0.2
	OPENBSD_5_5_BASE:1.107
	OPENBSD_5_4:1.82.0.2
	OPENBSD_5_4_BASE:1.82
	OPENBSD_5_3:1.67.0.2
	OPENBSD_5_3_BASE:1.67
	OPENBSD_5_2:1.54.0.2
	OPENBSD_5_2_BASE:1.54
	OPENBSD_5_1_BASE:1.48
	OPENBSD_5_1:1.48.0.2
	OPENBSD_5_0:1.40.0.2
	OPENBSD_5_0_BASE:1.40
	OPENBSD_4_9:1.33.0.2
	OPENBSD_4_9_BASE:1.33
	OPENBSD_4_8:1.20.0.2
	OPENBSD_4_8_BASE:1.20
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	ajacoutot_20071102:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.152
date	2017.02.18.17.33.51;	author ajacoutot;	state Exp;
branches;
next	1.151;
commitid	kjw4RQ4AAUYktD89;

1.151
date	2017.02.18.17.32.37;	author ajacoutot;	state Exp;
branches;
next	1.150;
commitid	bw6Y0vDo3oixdVWL;

1.150
date	2016.11.26.09.48.11;	author ajacoutot;	state Exp;
branches;
next	1.149;
commitid	ErPLHyWRU8PgnUK2;

1.149
date	2016.11.14.15.29.24;	author dcoppa;	state Exp;
branches;
next	1.148;
commitid	lXCGyDDFpXa6rgb8;

1.148
date	2016.11.14.12.58.23;	author ajacoutot;	state Exp;
branches;
next	1.147;
commitid	5bFmglqKeJoUCCWw;

1.147
date	2016.10.27.08.35.26;	author ajacoutot;	state Exp;
branches;
next	1.146;
commitid	MWoQF9QTYwy5nC48;

1.146
date	2016.09.27.08.00.27;	author ajacoutot;	state Exp;
branches;
next	1.145;
commitid	bDWq6gksSJQojYjs;

1.145
date	2016.09.10.13.03.43;	author ajacoutot;	state Exp;
branches;
next	1.144;
commitid	4KcvAK91uGdTLejD;

1.144
date	2016.08.29.07.48.20;	author ajacoutot;	state Exp;
branches;
next	1.143;
commitid	mQCaOrkxwNN9asxc;

1.143
date	2016.07.30.14.20.24;	author ajacoutot;	state Exp;
branches;
next	1.142;
commitid	KnDANFs81DHRDOM0;

1.142
date	2016.05.05.08.25.31;	author ajacoutot;	state Exp;
branches;
next	1.141;
commitid	ubMtX6EiV5lbaZ4T;

1.141
date	2016.03.20.16.12.25;	author naddy;	state Exp;
branches;
next	1.140;
commitid	guiZq8cnNbVyyHzx;

1.140
date	2016.03.19.11.37.40;	author ajacoutot;	state Exp;
branches;
next	1.139;
commitid	YwL0bn8WoMZoxGJh;

1.139
date	2016.03.11.20.28.30;	author naddy;	state Exp;
branches;
next	1.138;
commitid	UYLP8TE6V7RS2GhJ;

1.138
date	2016.02.25.03.50.37;	author ajacoutot;	state Exp;
branches;
next	1.137;
commitid	lw9sQXvVXMJ9s4Jg;

1.137
date	2016.01.17.17.29.10;	author sthen;	state Exp;
branches;
next	1.136;
commitid	bS2FIbTCCkF3XjOq;

1.136
date	2016.01.05.13.24.05;	author ajacoutot;	state Exp;
branches;
next	1.135;
commitid	Ctw0S5S6DjJnuKb9;

1.135
date	2015.11.17.08.57.45;	author ajacoutot;	state Exp;
branches;
next	1.134;
commitid	tRS8kHY5YvNbAbpv;

1.134
date	2015.10.09.18.21.34;	author ajacoutot;	state Exp;
branches;
next	1.133;
commitid	JN3Itj1nxI85GGG0;

1.133
date	2015.09.16.06.25.39;	author ajacoutot;	state Exp;
branches;
next	1.132;
commitid	tRWw8ExG41FADfEf;

1.132
date	2015.08.21.14.50.24;	author jasper;	state Exp;
branches;
next	1.131;
commitid	WQOQHKnr0MzR3JoY;

1.131
date	2015.07.19.14.40.54;	author ajacoutot;	state Exp;
branches;
next	1.130;
commitid	1rcYZX9jEunFqQWu;

1.130
date	2015.07.16.04.55.46;	author ajacoutot;	state Exp;
branches;
next	1.129;
commitid	3zkdIFKDreycQdPL;

1.129
date	2015.06.11.06.25.07;	author ajacoutot;	state Exp;
branches;
next	1.128;
commitid	9Ncc6W0OtIaJz6Qe;

1.128
date	2015.06.06.13.23.44;	author ajacoutot;	state Exp;
branches;
next	1.127;
commitid	MwG5spZ1o7TILz0A;

1.127
date	2015.04.17.04.18.13;	author ajacoutot;	state Exp;
branches;
next	1.126;
commitid	bILtsWtTVnQjIsVx;

1.126
date	2015.04.04.09.21.03;	author ajacoutot;	state Exp;
branches;
next	1.125;
commitid	kS3kwKZogsvzYmEY;

1.125
date	2015.03.31.09.44.48;	author ajacoutot;	state Exp;
branches;
next	1.124;
commitid	Ea3rOcpyiLlaXbHa;

1.124
date	2015.03.26.12.14.15;	author sthen;	state Exp;
branches;
next	1.123;
commitid	qYDTmzXxLoW0kaEv;

1.123
date	2015.03.18.18.04.53;	author ajacoutot;	state Exp;
branches;
next	1.122;
commitid	b3KAuL8t1WNQ3Dtj;

1.122
date	2015.03.15.08.46.52;	author ajacoutot;	state Exp;
branches;
next	1.121;
commitid	D8HQhpiLYeYblY7S;

1.121
date	2015.02.22.14.46.43;	author sthen;	state Exp;
branches
	1.121.2.1;
next	1.120;
commitid	vKR3Xp5ptAZm1LKG;

1.120
date	2015.02.05.17.34.33;	author ajacoutot;	state Exp;
branches;
next	1.119;
commitid	yACkirWvCqnjFF6L;

1.119
date	2014.10.08.09.03.00;	author ajacoutot;	state Exp;
branches;
next	1.118;
commitid	fkLZs2SMIuF5DwKr;

1.118
date	2014.08.15.15.45.38;	author ajacoutot;	state Exp;
branches;
next	1.117;
commitid	RZUHJIlkOrW3Vz7f;

1.117
date	2014.08.14.07.06.00;	author ajacoutot;	state Exp;
branches;
next	1.116;
commitid	Ox5isqCVDwHCpoCU;

1.116
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.115;
commitid	jyyOLTDxRdjpw44n;

1.115
date	2014.06.17.08.51.18;	author ajacoutot;	state Exp;
branches;
next	1.114;
commitid	9oKordUSrKmruVZe;

1.114
date	2014.06.16.17.45.05;	author jca;	state Exp;
branches;
next	1.113;
commitid	sPPJToszRmJeEBoL;

1.113
date	2014.04.21.12.23.22;	author ajacoutot;	state Exp;
branches;
next	1.112;

1.112
date	2014.04.13.07.47.15;	author ajacoutot;	state Exp;
branches;
next	1.111;

1.111
date	2014.04.06.21.10.30;	author sthen;	state Exp;
branches;
next	1.110;

1.110
date	2014.04.01.14.52.10;	author ajacoutot;	state Exp;
branches;
next	1.109;

1.109
date	2014.03.13.22.37.27;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2014.03.09.22.14.54;	author ajacoutot;	state Exp;
branches;
next	1.107;

1.107
date	2014.01.23.15.35.51;	author ajacoutot;	state Exp;
branches;
next	1.106;

1.106
date	2014.01.23.11.43.30;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2014.01.18.15.12.30;	author ajacoutot;	state Exp;
branches;
next	1.104;

1.104
date	2014.01.14.08.39.40;	author ajacoutot;	state Exp;
branches;
next	1.103;

1.103
date	2013.12.12.14.53.43;	author ajacoutot;	state Exp;
branches;
next	1.102;

1.102
date	2013.11.14.14.58.51;	author ajacoutot;	state Exp;
branches;
next	1.101;

1.101
date	2013.10.15.14.20.58;	author ajacoutot;	state Exp;
branches;
next	1.100;

1.100
date	2013.09.22.19.00.42;	author ajacoutot;	state Exp;
branches;
next	1.99;

1.99
date	2013.09.13.16.43.19;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2013.09.10.13.26.50;	author ajacoutot;	state Exp;
branches;
next	1.97;

1.97
date	2013.08.26.14.55.45;	author ajacoutot;	state Exp;
branches;
next	1.96;

1.96
date	2013.08.22.15.11.52;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2013.08.22.10.49.24;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2013.08.22.10.26.26;	author ajacoutot;	state Exp;
branches;
next	1.93;

1.93
date	2013.08.21.14.58.36;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2013.08.21.14.51.40;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2013.08.21.14.15.25;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2013.08.21.13.43.12;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2013.08.21.13.36.11;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2013.08.21.13.24.46;	author ajacoutot;	state Exp;
branches;
next	1.87;

1.87
date	2013.08.21.13.20.12;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2013.08.11.09.54.36;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2013.08.11.09.54.17;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2013.08.09.17.44.50;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2013.08.06.19.13.37;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2013.07.12.08.07.05;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2013.06.17.19.28.37;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2013.05.21.16.46.43;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2013.05.13.08.34.09;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2013.05.11.11.15.53;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2013.05.11.11.10.56;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2013.04.15.10.11.01;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2013.04.03.09.41.31;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2013.03.30.13.03.45;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2013.03.17.13.04.30;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2013.03.11.23.04.32;	author fgsch;	state Exp;
branches;
next	1.69;

1.69
date	2013.03.11.11.37.53;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2013.03.08.06.51.46;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2013.01.26.19.38.00;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2013.01.26.14.50.17;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2013.01.26.12.25.54;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2013.01.20.10.43.00;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2013.01.20.08.44.16;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2013.01.20.07.32.08;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2013.01.05.12.53.09;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2013.01.04.18.21.54;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2012.12.10.16.00.11;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2012.10.12.21.56.07;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2012.09.11.10.52.16;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2012.08.05.06.46.10;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2012.08.04.14.55.37;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2012.06.30.04.22.11;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2012.06.27.10.53.00;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2012.06.26.11.17.54;	author sthen;	state Exp;
branches;
next	1.51;

1.51
date	2012.06.26.06.17.11;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2012.02.23.16.03.03;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2012.02.17.15.55.36;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2012.01.17.09.54.27;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2011.12.20.19.03.58;	author jasper;	state Exp;
branches;
next	1.46;

1.46
date	2011.11.13.13.54.05;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.11.03.12.05.40;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2011.10.09.07.42.29;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.09.16.11.13.41;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2011.09.08.10.34.25;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2011.08.30.08.55.55;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2011.07.09.00.30.28;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2011.06.16.10.16.43;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2011.06.12.16.00.03;	author rpointel;	state Exp;
branches;
next	1.37;

1.37
date	2011.06.07.15.47.59;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2011.04.17.07.19.44;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2011.04.15.18.40.47;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2011.03.02.06.59.03;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2011.01.16.23.02.53;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.12.20.11.41.43;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.25.11.24.16;	author dcoppa;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.20.09.48.39;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.06.19.07.42;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2010.11.05.10.29.48;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2010.11.05.08.21.22;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.04.17.07.10;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.10.31.07.43.44;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.09.08.07.13.16;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.09.07.19.36.34;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2010.08.30.22.13.08;	author fgsch;	state Exp;
branches;
next	1.20;

1.20
date	2010.07.07.16.42.25;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.05.30.06.29.07;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.04.07.10.07.26;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.03.26.08.00.03;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.03.24.06.31.13;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.03.21.11.07.43;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.01.10.18.09.29;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.01.10.16.43.18;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.12.22.15.54.32;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.08.20.08.07.48;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.08.07.12.20.22;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.07.13.08.14.28;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.06.23.18.05.17;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2009.06.16.11.45.28;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.25.13.39.40;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2009.02.11.15.28.11;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2009.02.02.10.47.11;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.06.05.19.10.43;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.03.15.10.18.29;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.11.02.15.48.55;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.11.02.15.48.55;	author ajacoutot;	state Exp;
branches;
next	;

1.121.2.1
date	2015.03.18.18.04.31;	author ajacoutot;	state Exp;
branches;
next	;
commitid	bIKGxXyCHeZ147n6;


desc
@@


1.152
log
@Missed bump.
@
text
@# $OpenBSD: Makefile,v 1.151 2017/02/18 17:32:37 ajacoutot Exp $

PORTROACH=		skipv:${V}_py2.5

COMMENT-main=		HP Linux Imaging and Printing
COMMENT-common=		HPLIP applications common files
COMMENT-hpaio=		HP sane(7) scanner backend
COMMENT-hpcups=		HP native CUPS driver
COMMENT-hpijs=		HP ghostscript driver (spooler independent)
COMMENT-gui=		HPLIP graphical tools

V=			3.16.11
DISTNAME=		hplip-${V}
SUBST_VARS=		V

PKGNAME-main=		${DISTNAME}
PKGNAME-common=		hplip-common-${V}
PKGNAME-hpaio=		hpaio-${V}
PKGNAME-hpcups=		hpcups-${V}
PKGNAME-hpijs=		hpijs-${V}
PKGNAME-gui=		hplip-gui-${V}
REVISION-common=	0
REVISION-gui=		0
REVISION-hpaio=		0
REVISION-hpcups=	0
REVISION-hpijs=		0
REVISION-main=		0

SHARED_LIBS +=  hpdiscovery          0.0      # 0.1
SHARED_LIBS +=  hpmud                2.0      # 0.6
SHARED_LIBS +=  hpipp                0.0      # 0.1
SHARED_LIBS +=  hpip                 2.0      # 0.1

CATEGORIES=		print

HOMEPAGE=		http://hplipopensource.com/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# GPLv2 - MIT (backend) - BSD (hpijs)
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=hplip/}

MULTI_PACKAGES= 	-main -common -hpaio -hpcups -hpijs -gui

MODULES=		lang/python

MODPY_RUNDEP=		No

cWANTLIB += crypto m pthread

### -main
WANTLIB-main += ${cWANTLIB}
WANTLIB-main += avahi-client avahi-common cups dbus-1 hpmud netsnmp
WANTLIB-main += ffi gmp gnutls hogweed nettle p11-kit tasn1 usb-1.0 z
WANTLIB-main += hpdiscovery hpipp idn2 iconv intl

LIB_DEPENDS-main=	print/cups,-libs \
			print/hplip,-common

RUN_DEPENDS-main=	${MODPY_RUN_DEPENDS} \
			devel/py-gobject \
			print/py-reportlab \
			x11/dbus-python \
			graphics/py-Pillow \
			print/hplip,-hpcups \
			print/hplip,-hpaio

# package is only useful if cups is installed
RUN_DEPENDS-main +=	print/cups

### -common
WANTLIB-common += ${cWANTLIB} netsnmp usb-1.0

LIB_DEPENDS-common= 	net/net-snmp \
			devel/libusb1

RUN_DEPENDS-common=	# empty

### -hpaio
WANTLIB-hpaio += ${cWANTLIB}
WANTLIB-hpaio += avahi-client avahi-common cups dbus-1 ffi gmp gnutls
WANTLIB-hpaio += hogweed hpip hpipp hpmud jpeg netsnmp nettle p11-kit
WANTLIB-hpaio += sane tasn1 tiff usb usb-1.0 z hpdiscovery
WANTLIB-hpaio += v4l1 v4l2 v4lconvert idn2 iconv intl

LIB_DEPENDS-hpaio=	print/hplip,-common \
			print/cups,-libs \
			graphics/sane-backends

RUN_DEPENDS-hpaio=	# empty

### -hpcups
WANTLIB-hpcups += ${cWANTLIB} z netsnmp hpdiscovery iconv intl
WANTLIB-hpcups += c jpeg stdc++ hpip cups cupsimage dbus-1 idn2
WANTLIB-hpcups += z usb-1.0 avahi-client avahi-common hpmud
WANTLIB-hpcups += ffi gmp gnutls hogweed nettle p11-kit tasn1

LIB_DEPENDS-hpcups=	graphics/jpeg \
			print/hplip,-common \
			print/cups,-libs \
			x11/dbus

RUN_DEPENDS-hpcups=	# empty

### -hpijs
WANTLIB-hpijs += ${cWANTLIB} hpip usb-1.0 hpdiscovery
WANTLIB-hpijs += c jpeg netsnmp stdc++ dbus-1 hpmud

LIB_DEPENDS-hpijs=	print/hplip,-common \
			graphics/jpeg \
			x11/dbus

# foomatic-rip(1), foomatic-db(-engine)
RUN_DEPENDS-hpijs +=	print/cups-filters

### -gui
WANTLIB-gui +=		# empty

RUN_DEPENDS-gui=	x11/py-qt4 \
			print/hplip,-main \
			devel/xdg-utils \
			devel/desktop-file-utils \
			sysutils/usbutils \
			devel/py-notify

# hp-toolbox, Actions, Scan
RUN_DEPENDS-gui +=	graphics/xsane

LIB_DEPENDS-gui=	# empty

FAKE_FLAGS=		hplip_confdir=${PREFIX}/share/examples/hplip/hp \
			hplip_statedir=${PREFIX}/share/examples/hplip/db \
			mimedir=${PREFIX}/share/examples/hplip/cups \
			hplip_systraydir=${PREFIX}/share/examples/hplip/xdg/autostart

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=		--with-hpppddir=${PREFIX}/share/foomatic/db/source/PPD/HP \
			--with-cupsbackenddir=${PREFIX}/libexec/cups/backend \
			--with-cupsfilterdir=${PREFIX}/libexec/cups/filter \
			--with-icondir=${PREFIX}/share/applications \
			--with-docdir=${PREFIX}/share/doc/hplip \
			--enable-hpijs-install \
			--enable-foomatic-ppd-install \
			--enable-foomatic-drv-install

pre-configure:
	find ${WRKSRC} -name \*.py | \
		xargs perl -pi -e 's,(/usr/bin/python|/usr/bin/env python),${MODPY_BIN},g'
	sed -i 's,/usr/bin/python,${MODPY_BIN},g' \
		${WRKSRC}/fax/filters/pstotiff
	${SUBST_CMD} \
		${WRKSRC}/Makefile.in \
		${WRKSRC}/prnt/cups.py \
		${WRKSRC}/prnt/filters/hpps \
		${WRKSRC}/prnt/hpcups/HPCupsFilter.cpp \
		${WRKSRC}/prnt/hpijs/hpcupsfax.cpp \
		${WRKSRC}/prnt/hpijs/hpijs.cpp \
		${WRKSRC}/prnt/hpijs/globals.cpp \
		${WRKSRC}/doc/troubleshooting.html \
		${WRKSRC}/check.py \
		${WRKSRC}/ui4/devmgr5.py \
		${WRKSRC}/fax/backend/hpfax.py \
		${WRKSRC}/base/codes.py \
		${WRKSRC}/base/g.py \
		${WRKSRC}/base/queues.py \
		${WRKSRC}/base/services.py \
		${WRKSRC}/base/utils.py \
		${WRKSRC}/common/utils.c \
		${WRKSRC}/prnt/cups.py \
		${WRKSRC}/installer/core_install.py \
		${WRKSRC}/doc/upgrading.html \
		${WRKSRC}/doc/uninstalling.html \
		${WRKSRC}/fax/coverpages.py \
		${WRKSRC}/fax/filters/pstotiff \
		${WRKSRC}/installer/dcheck.py \
		${WRKSRC}/installer/pluginhandler.py \
		${WRKSRC}/base/magic.py \
		${WRKSRC}/base/utils.py \
		${WRKSRC}/scan.py \
		${WRKSRC}/setup.py \
		${WRKSRC}/ui4/nodevicesdialog.py \
		${WRKSRC}/ui/devmgr4.py \
		${WRKSRC}/ui/nodevicesform.py \
		${WRKSRC}/logcapture.py

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/hplip/db
	${SUBST_DATA} ${FILESDIR}/hplip.state \
		${PREFIX}/share/examples/hplip/db/hplip.state
	${MODPY_BIN} ${MODPY_LIBDIR}/compileall.py \
		${PREFIX}/share/hplip
	rm -r ${WRKINST}/usr/{lib,share}
	rm -r ${WRKINST}/etc/udev
	rm -r ${WRKINST}/etc/sane.d
	mv ${PREFIX}/share/doc/hplip-${V} ${PREFIX}/share/doc/hplip/html
	rm ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/*.{a,la}
	rm ${PREFIX}/lib/sane/*.{a,la}

# handle old filters looking for foomatic-rip-hplip
	cd ${PREFIX}/libexec/cups/filter/ && \
		ln -s foomatic-rip foomatic-rip-hplip

.include <bsd.port.mk>
@


1.151
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2016/11/26 09:48:11 ajacoutot Exp $
d22 6
@


1.150
log
@Update to hplip-3.16.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2016/11/14 15:29:24 dcoppa Exp $
d51 1
a51 1
WANTLIB-main += hpdiscovery hpipp idn iconv intl
d80 1
a80 1
WANTLIB-hpaio += v4l1 v4l2 v4lconvert idn iconv intl
d90 1
a90 1
WANTLIB-hpcups += c jpeg stdc++ hpip cups cupsimage dbus-1 idn
@


1.149
log
@
Fix printing a test page from hp-setup

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2016/11/14 12:58:23 ajacoutot Exp $
d12 1
a12 1
V=			3.16.10
a21 3

REVISION-main=		0
REVISION-hpijs=		0
@


1.148
log
@Create a link from foomatic-rip to foomatic-rip-hplip; some old filters
still look for it.

reported by dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2016/10/27 08:35:26 ajacoutot Exp $
d23 1
@


1.147
log
@Update to hplip-3.16.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2016/09/27 08:00:27 ajacoutot Exp $
d23 2
d198 4
@


1.146
log
@Update to hplip-3.16.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2016/09/10 13:03:43 ajacoutot Exp $
d12 1
a12 1
V=			3.16.9
@


1.145
log
@First pass at pre-entively fixing ports that would break once guenther's header
pollution diff is in.

lang/squeak/vm does not build but it's due to the recent audio changes
games/xbattle: also fixes some conflicting implicit decl
print/hplip: also fixes some conflicting implicit decl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2016/08/29 07:48:20 ajacoutot Exp $
d12 1
a12 1
V=			3.16.8
a21 7

REVISION-main=		0
REVISION-common=	0
REVISION-hpaio=		0
REVISION-hpcups=	0
REVISION-hpijs=		0
REVISION-gui=		0
@


1.144
log
@Update to hplip-3.16.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2016/07/30 14:20:24 ajacoutot Exp $
d22 7
@


1.143
log
@Update to hplip-3.16.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2016/05/05 08:25:31 ajacoutot Exp $
d12 1
a12 1
V=			3.16.7
d185 1
@


1.142
log
@Update to hplip-3.16.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2016/03/20 16:12:25 naddy Exp $
d12 1
a12 1
V=			3.16.5
@


1.141
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2016/03/19 11:37:40 ajacoutot Exp $
d12 1
a12 1
V=			3.16.3
d41 1
a41 2
MODULES=		devel/gettext \
			lang/python
d48 1
a48 1
WANTLIB-main += ${WANTLIB} ${cWANTLIB}
d51 1
a51 1
WANTLIB-main += hpdiscovery hpipp idn
d53 1
a53 2
LIB_DEPENDS-main=	${LIB_DEPENDS} \
			print/cups,-libs \
a56 1
			${MODGETTEXT_RUN_DEPENDS} \
d73 1
a73 1
RUN_DEPENDS-common=	#empty
d76 1
a76 1
WANTLIB-hpaio += ${WANTLIB} ${cWANTLIB}
d80 1
a80 1
WANTLIB-hpaio += v4l1 v4l2 v4lconvert idn
d86 1
a86 1
RUN_DEPENDS-hpaio=	${MODGETTEXT_RUN_DEPENDS}
d89 1
a89 1
WANTLIB-hpcups += ${WANTLIB} ${cWANTLIB} z netsnmp hpdiscovery
d99 1
a99 1
RUN_DEPENDS-hpcups=	${MODGETTEXT_RUN_DEPENDS}
d113 1
a113 1
WANTLIB-gui +=		#empty
d125 1
a125 1
LIB_DEPENDS-gui=	#empty
@


1.140
log
@Update to hplip-3.16.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2016/03/11 20:28:30 naddy Exp $
a3 2

SHARED_ONLY=		Yes
@


1.139
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2016/02/25 03:50:37 ajacoutot Exp $
d14 1
a14 1
V=			3.16.2
d54 1
a54 1
WANTLIB-main += hpdiscovery hpipp
d85 1
a85 1
WANTLIB-hpaio += v4l1 v4l2 v4lconvert
d95 1
a95 1
WANTLIB-hpcups += c jpeg stdc++ hpip cups cupsimage dbus-1
@


1.138
log
@Update to hplip-3.16.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2016/01/17 17:29:10 sthen Exp $
d140 1
a140 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--with-hpppddir=${PREFIX}/share/foomatic/db/source/PPD/HP \
@


1.137
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2016/01/05 13:24:05 ajacoutot Exp $
d14 1
a14 1
V=			3.15.11
a23 3

REVISION-main=		0
REVISION-hpaio=		0
@


1.136
log
@print/py-reportlab/reportlab -> print/py-reportlab
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2015/11/17 08:57:45 ajacoutot Exp $
d26 1
d88 1
@


1.135
log
@Update to hplip-3.15.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2015/10/09 18:21:34 ajacoutot Exp $
d25 2
d65 1
a65 1
			print/py-reportlab/reportlab \
@


1.134
log
@Sync wantlib/depends to unbreak after recent sane-backends update.

reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2015/09/16 06:25:39 ajacoutot Exp $
d14 1
a14 1
V=			3.15.9
d25 1
a25 2
REVISION-hpaio=		0

d54 1
a54 1
WANTLIB-main += hpipp
d84 1
a84 1
WANTLIB-hpaio += sane tasn1 tiff usb usb-1.0 z
d93 1
a93 1
WANTLIB-hpcups += ${WANTLIB} ${cWANTLIB} z netsnmp
d106 1
a106 1
WANTLIB-hpijs += ${cWANTLIB} hpip usb-1.0
@


1.133
log
@Update to hplip-3.15.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2015/08/21 14:50:24 jasper Exp $
d25 2
d83 3
a85 3
WANTLIB-hpaio += avahi-client avahi-common cups dbus-1 hpip hpmud
WANTLIB-hpaio += jpeg netsnmp sane tiff usb usb-1.0 z hpipp
WANTLIB-hpaio += ffi gmp gnutls hogweed nettle p11-kit tasn1
d88 1
@


1.132
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2015/07/19 14:40:54 ajacoutot Exp $
d4 1
d14 1
a14 1
V=			3.15.7
@


1.131
log
@Add PORTROACH annotation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2015/07/16 04:55:46 ajacoutot Exp $
d149 1
a149 1
	perl -pi -e 's,/usr/bin/python,${MODPY_BIN},g' \
@


1.130
log
@Update to hplip-3.15.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2015/06/11 06:25:07 ajacoutot Exp $
d3 1
@


1.129
log
@Update to hplip-3.15.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2015/06/06 13:23:44 ajacoutot Exp $
d12 1
a12 1
V=			3.15.6
@


1.128
log
@Missing RUN_DEPENDS on devel/py-gobject.

reported by skinner at britvault dot co dot u
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2015/04/17 04:18:13 ajacoutot Exp $
d12 1
a12 1
V=			3.15.4
a22 2
REVISION-main=		0

d80 1
a80 1
WANTLIB-hpaio += jpeg netsnmp sane tiff usb usb-1.0 z
@


1.127
log
@Update to hplip-3.15.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2015/04/04 09:21:03 ajacoutot Exp $
d23 2
d61 1
@


1.126
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2015/03/31 09:44:48 ajacoutot Exp $
d12 1
a12 1
V=			3.15.2
d23 3
a25 9
REVISION-main=		4
REVISION-common=	2
REVISION-gui=		1
REVISION-hpaio=		1
REVISION-hpcups=	1
REVISION-hpijs=		1

SHARED_LIBS +=  hpmud		2.0 # 0.6
SHARED_LIBS +=  hpip		2.0 # 0.1
d51 1
@


1.125
log
@Move fontpath from /usr/local/lib/X11/fonts to /usr/local/share/fonts to match
XDG_DATA_DIR (where Desktop tools will look for by default).

discussed with sthen@@ and matthieu@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2015/03/26 12:14:15 sthen Exp $
d23 6
a28 6
REVISION-main=		3
REVISION-common=	1
REVISION-gui=		0
REVISION-hpaio=		0
REVISION-hpcups=	0
REVISION-hpijs=		0
@


1.124
log
@REVISION bumps for py-Pillow RDEP change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2015/03/18 18:04:53 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		2
@


1.123
log
@Missed bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2015/03/15 08:46:52 ajacoutot Exp $
d23 6
a28 2
REVISION-main=		1
REVISION-common=	0
@


1.122
log
@Fix a backwards memcpy and some debug output.

reported by Alessandro DE LAURENZIS
memmove patch by from dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2015/02/22 14:46:43 sthen Exp $
d23 1
a23 1
REVISION-main=		0
@


1.121
log
@Replace an overlapping memcpy with memmove, ok ajacoutot@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2015/02/05 17:34:33 ajacoutot Exp $
d24 1
@


1.121.2.1
log
@Unbreak runtime: fix backwards memcpy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2015/02/22 14:46:43 sthen Exp $
d23 1
a23 2
REVISION-main=		1
REVISION-common=	0
@


1.120
log
@Update to hplip-3.15.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2014/10/08 09:03:00 ajacoutot Exp $
d22 2
@


1.119
log
@Update to hplip-3.14.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2014/08/15 15:45:38 ajacoutot Exp $
d12 1
a12 1
V=			3.14.10
d49 1
a49 1
WANTLIB-main += ssl usb-1.0 z
d77 2
a78 1
WANTLIB-hpaio += jpeg netsnmp sane ssl tiff usb usb-1.0 z
d86 1
a86 1
WANTLIB-hpcups += ${WANTLIB} ${cWANTLIB} z ssl netsnmp
d88 2
a89 1
WANTLIB-hpcups += z ssl usb-1.0 avahi-client avahi-common hpmud
d147 1
a147 1
	perl -pi -e 's,/var/lib,/var/db,g' \
d149 2
a150 7
		${WRKSRC}/base/g.py \
		${WRKSRC}/check.py \
		${WRKSRC}/common/utils.h \
		${WRKSRC}/common/utils.c \
		${WRKSRC}/installer/core_install.py \
		${WRKSRC}/installer/pluginhandler.py
	${SUBST_CMD} ${WRKSRC}/prnt/cups.py \
@


1.118
log
@README tweaks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2014/08/14 07:06:00 ajacoutot Exp $
d12 1
a12 1
V=			3.14.6
a22 3
REVISION-main=		0
REVISION-common=	0

d190 1
a190 1
	rm -r ${WRKINST}/usr/lib
d192 1
@


1.117
log
@Bump after py-Pillow sub-packaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2014/08/10 09:58:06 espie Exp $
d24 1
@


1.116
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2014/06/17 08:51:18 ajacoutot Exp $
d22 2
@


1.115
log
@Update to hplip-3.14.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2014/06/16 17:45:05 jca Exp $
d186 1
a186 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/hplip.state \
@


1.114
log
@Fix dynamic loading of libhpmud (and libm).  Problem reported by
sebastia@@, who tested a similar diff by ajacoutot@@.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2014/04/21 12:23:22 ajacoutot Exp $
d12 1
a12 1
V=			3.14.4
a22 4
REVISION-main=		0
REVISION-hpaio=		1
REVISION-hpcups=	0

d164 1
d166 2
d182 2
a183 7
		${WRKSRC}/ui/nodevicesform.py
	# grep for load_library
	perl -pi -e 's/libhpmud\.so\.[0-9.]*/libhpmud.so/g;' \
		 -e 's/libm\.so\.[0-9.]*/libm.so/g;' \
	    ${WRKSRC}/scan/sane/marvell.c \
	    ${WRKSRC}/scan/sane/soap.c \
	    ${WRKSRC}/scan/sane/soapht.c
@


1.113
log
@Sync wantlib after kerberos removal from cups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2014/04/13 07:47:15 ajacoutot Exp $
d24 1
a24 1
REVISION-hpaio=		0
d184 6
@


1.112
log
@Update to hplip-3.14.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2014/04/06 21:10:30 sthen Exp $
d23 4
d52 2
a53 3
WANTLIB-main += asn1 avahi-client avahi-common com_err cups dbus-1
WANTLIB-main += gssapi heimbase hpmud krb5 netsnmp roken ssl usb-1.0
WANTLIB-main += wind z
d80 2
a81 3
WANTLIB-hpaio += asn1 avahi-client avahi-common com_err cups dbus-1
WANTLIB-hpaio += gssapi heimbase hpip hpmud jpeg krb5 netsnmp roken
WANTLIB-hpaio += sane ssl tiff usb usb-1.0 wind z
d89 1
a89 1
WANTLIB-hpcups += ${WANTLIB} ${cWANTLIB} z asn1 gssapi krb5 ssl
d91 1
a91 2
WANTLIB-hpcups += com_err heimbase roken wind usb-1.0
WANTLIB-hpcups += avahi-client avahi-common hpmud netsnmp
@


1.111
log
@switch py-Imaging to py-Pillow, plus some "s/import Image/from PIL import Image/" patches where necessary
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2014/04/01 14:52:10 ajacoutot Exp $
d12 1
a12 1
V=			3.14.3
a21 3

REVISION=		0
REVISION-main=		1
@


1.110
log
@Some PLISTs have brazillions of @@comment entries for .la files; sanitize
some of the ports a bit and rm at post-install time, it is way simpler to
maintain.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2014/03/13 22:37:27 ajacoutot Exp $
d24 1
d63 1
a63 1
			graphics/py-Imaging \
@


1.109
log
@Update to hplip-3.14.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2014/03/09 22:14:54 ajacoutot Exp $
d23 2
a126 1
LIBTOOL_FLAGS=		--tag=disable-static
a135 1
			--disable-static \
d194 2
a195 2
	rm ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/*.la
	rm ${PREFIX}/lib/sane/*.la
@


1.108
log
@Tweak README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2014/01/23 15:35:51 ajacoutot Exp $
d12 1
a12 1
V=			3.14.1
a21 3

REVISION-main=		2
REVISION-common=	0
@


1.107
log
@Drop useless patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2014/01/23 11:43:30 ajacoutot Exp $
d24 1
@


1.106
log
@Fix download_from_network() return statement.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2014/01/18 15:12:30 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		1
@


1.105
log
@Do not try to download anything from the internet; we don't support
firmware auto-instalation nor upgrading anyway.
Properly recognize OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2014/01/14 08:39:40 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		0
@


1.104
log
@Update to hplip-3.14.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2013/12/12 14:53:43 ajacoutot Exp $
d22 2
@


1.103
log
@foomatic-filters -> print/cups-filters
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2013/11/14 14:58:51 ajacoutot Exp $
d12 1
a12 1
V=			3.13.11
a21 3

REVISION-common=	0
REVISION-hpijs=		0
@


1.102
log
@Update to hplip-3.13.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2013/10/15 14:20:58 ajacoutot Exp $
d23 3
d110 2
a111 1
RUN_DEPENDS-hpijs= print/foomatic-filters #print/ghostscript/gnu
@


1.101
log
@Update to hplip-3.13.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2013/09/22 19:00:42 ajacoutot Exp $
d12 1
a12 1
V=			3.13.10
@


1.100
log
@Update to hplip-3.13.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2013/09/13 16:43:19 ajacoutot Exp $
d12 1
a12 1
V=			3.13.9
d48 1
a48 1
WANTLIB-main += asn1 avahi-client avahi-common c com_err cups dbus-1
d192 1
@


1.99
log
@Move some files away from -main to -hpcups so that when everything has been
configured we only need hpaio and hpcups to have full support for both
printing and scanning.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2013/09/10 13:26:50 ajacoutot Exp $
d12 1
a12 1
V=			3.13.8
a22 4
REVISION-main=		1
REVISION-common=	1
REVISION-hpcups=	1

d191 1
@


1.98
log
@Bump after dbus-python got renamed to py-dbus.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2013/08/26 14:55:45 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		0
d25 1
d93 2
a94 2
WANTLIB-hpcups += com_err heimbase roken wind
WANTLIB-hpcups += avahi-client avahi-common
@


1.97
log
@Fix hp-makeuri usage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2013/08/22 15:11:52 ajacoutot Exp $
d23 1
@


1.96
log
@Extend docs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2013/08/22 10:49:24 ajacoutot Exp $
d23 1
a23 1
REVISION-common=	0
@


1.95
log
@Update to hplip-3.13.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2013/08/22 10:26:26 ajacoutot Exp $
d22 2
@


1.94
log
@Make the GUI depend on xsane.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2013/08/21 14:58:36 ajacoutot Exp $
d12 1
a12 1
V=			3.13.7
a21 7

REVISION-main=		7
REVISION-common=	6
REVISION-hpaio=		1
REVISION-hpcups=	4
REVISION-hpijs=		3
REVISION-gui=		4
@


1.93
log
@Move things around, no change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/08/21 14:51:40 ajacoutot Exp $
d28 1
a28 1
REVISION-gui=		3
d125 4
@


1.92
log
@hplip,-libs -> hplip,-common which makes much more sense.
Some typo fixes from bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2013/08/21 14:15:25 ajacoutot Exp $
d6 1
d8 1
a9 2
COMMENT-hpcups=		HP native CUPS driver
COMMENT-common=		HPLIP applications common files
d17 1
d19 1
a20 2
PKGNAME-hpcups=		hpcups-${V}
PKGNAME-common=		hplip-common-${V}
d24 3
a27 2
REVISION-hpcups=	4
REVISION-common=	6
a28 1
REVISION-hpaio=		1
d44 1
a44 1
MULTI_PACKAGES= 	-main -hpaio -hpijs -hpcups -common -gui
d74 9
a82 1
### -hpio
a92 10
### -hpijs
WANTLIB-hpijs += ${cWANTLIB} hpip usb-1.0
WANTLIB-hpijs += c jpeg netsnmp stdc++ dbus-1 hpmud

LIB_DEPENDS-hpijs=	print/hplip,-common \
			graphics/jpeg \
			x11/dbus

RUN_DEPENDS-hpijs= print/foomatic-filters #print/ghostscript/gnu

d106 3
a108 2
### -common
WANTLIB-common += ${cWANTLIB} netsnmp usb-1.0
d110 3
a112 2
LIB_DEPENDS-common= 	net/net-snmp \
			devel/libusb1
d114 1
a114 1
RUN_DEPENDS-common=	#empty
@


1.91
log
@One README to rule them all.
Now all the info to setup printers and scanners is under the same place.

Input welcome, after all my frenglish isn't that good...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/08/21 13:43:12 ajacoutot Exp $
d5 1
a5 1
COMMENT-main=		HP Unix imaging and printing
d9 1
a9 1
COMMENT-libs=		HPLIP backend libraries
d20 1
a20 1
PKGNAME-libs=		hplip-libs-${V}
d23 6
a28 6
REVISION-main=		6
REVISION-hpijs=		2
REVISION-hpcups=	3
REVISION-libs=		4
REVISION-gui=		2
REVISION-hpaio=		0
d44 1
a44 1
MULTI_PACKAGES= 	-main -hpaio -hpijs -hpcups -libs -gui
d61 1
a61 1
			print/hplip,-libs
d80 1
a80 1
LIB_DEPENDS-hpaio=	print/hplip,-libs \
d89 1
a89 1
LIB_DEPENDS-hpijs=	print/hplip,-libs \
d102 1
a102 1
			print/hplip,-libs \
d108 2
a109 2
### -libs
WANTLIB-libs +=	${cWANTLIB} netsnmp usb-1.0
d111 1
a111 1
LIB_DEPENDS-libs= 	net/net-snmp \
d114 1
a114 1
RUN_DEPENDS-libs=	#empty
@


1.90
log
@Fix @@conflict marker.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/08/21 13:36:11 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		5
d25 2
a26 2
REVISION-hpcups=	2
REVISION-libs=		3
d28 1
@


1.89
log
@Point users to the pkg-readmes directory.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/08/21 13:24:46 ajacoutot Exp $
d26 1
a26 1
REVISION-libs=		2
@


1.88
log
@Re-indent to allow human beings to read this Makefile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/08/21 13:20:12 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		4
@


1.87
log
@Add a new hpaio subpackage and re-split this port from scratch.
It allows people with clue to install and use an HP printer/scanner
without the need to install half of the world.
More cleanup coming...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/08/11 09:54:36 ajacoutot Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
d5 23
a27 22
COMMENT-main=	HP Unix imaging and printing
COMMENT-hpaio=	HP sane(7) scanner backend
COMMENT-hpijs=	HP ghostscript driver (spooler independent)
COMMENT-hpcups=	HP native CUPS driver
COMMENT-libs=	HPLIP backend libraries
COMMENT-gui=	HPLIP graphical tools

V=		3.13.7
DISTNAME=	hplip-${V}

PKGNAME-main=	${DISTNAME}
PKGNAME-hpaio=	hpaio-${V}
PKGNAME-hpijs=	hpijs-${V}
PKGNAME-hpcups=	hpcups-${V}
PKGNAME-libs=	hplip-libs-${V}
PKGNAME-gui=	hplip-gui-${V}

REVISION-main=	4
REVISION-hpijs=	2
REVISION-hpcups=2
REVISION-libs=	2
REVISION-gui=	2
d32 1
a32 1
SUBST_VARS=	V
d34 1
a34 1
CATEGORIES=	print
d36 1
a36 3
HOMEPAGE=	http://hplipopensource.com/

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d41 1
a41 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=hplip/}
d43 1
a43 1
MULTI_PACKAGES=	-main -hpaio -hpijs -hpcups -libs -gui
d45 2
a46 2
MODULES=	devel/gettext \
		lang/python
d48 1
a48 1
MODPY_RUNDEP=	No
d50 1
a50 1
cWANTLIB = crypto m pthread
d52 1
d58 11
a68 10
LIB_DEPENDS-main=${LIB_DEPENDS} \
		print/cups,-libs \
		print/hplip,-libs
RUN_DEPENDS-main=${MODPY_RUN_DEPENDS} \
		${MODGETTEXT_RUN_DEPENDS} \
		print/py-reportlab/reportlab \
		x11/dbus-python \
		graphics/py-Imaging \
		print/hplip,-hpcups \
		print/hplip,-hpaio
d73 1
a77 3
LIB_DEPENDS-hpaio= print/hplip,-libs \
		graphics/sane-backends
RUN_DEPENDS-hpaio= ${MODGETTEXT_RUN_DEPENDS}
d79 6
d87 5
a91 3
LIB_DEPENDS-hpijs= print/hplip,-libs \
		graphics/jpeg \
		x11/dbus
d94 1
a98 6
LIB_DEPENDS-hpcups= \
		graphics/jpeg \
		print/hplip,-libs \
		print/cups,-libs \
		x11/dbus
RUN_DEPENDS-hpcups=${MODGETTEXT_RUN_DEPENDS}
d100 8
d109 36
a144 34
LIB_DEPENDS-libs= net/net-snmp \
		devel/libusb1
RUN_DEPENDS-libs= #empty

WANTLIB-gui +=	#empty
RUN_DEPENDS-gui= x11/py-qt4 \
		print/hplip,-main \
		devel/xdg-utils \
		devel/desktop-file-utils \
		sysutils/usbutils \
		devel/py-notify
LIB_DEPENDS-gui= #empty

LIBTOOL_FLAGS=	--tag=disable-static
FAKE_FLAGS=	hplip_confdir=${PREFIX}/share/examples/hplip/hp \
		hplip_statedir=${PREFIX}/share/examples/hplip/db \
		mimedir=${PREFIX}/share/examples/hplip/cups \
		policykit_dbus_etcdir=${PREFIX}/share/examples/hplip/dbus-1/system.d \
		policykit_dbus_sharedir=${PREFIX}/share/dbus-1/system-services \
		hplip_systraydir=${PREFIX}/share/examples/hplip/xdg/autostart

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-static \
		--with-hpppddir=${PREFIX}/share/foomatic/db/source/PPD/HP \
		--with-cupsbackenddir=${PREFIX}/libexec/cups/backend \
		--with-cupsfilterdir=${PREFIX}/libexec/cups/filter \
		--with-icondir=${PREFIX}/share/applications \
		--with-docdir=${PREFIX}/share/doc/hplip \
		--enable-hpijs-install \
		--enable-foomatic-ppd-install \
		--enable-foomatic-drv-install
@


1.86
log
@Not needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2013/08/11 09:54:17 ajacoutot Exp $
d6 2
a7 1
COMMENT-hpijs=	HP Inkjet ghostscript driver (spooler independent)
d16 1
d22 5
a26 5
REVISION-main=	1
REVISION-hpijs=	1
REVISION-hpcups=1
REVISION-libs=	1
REVISION-gui=	1
d44 1
a44 1
MULTI_PACKAGES=	-main -hpijs -hpcups -libs -gui
d54 3
a56 3
WANTLIB-main += asn1 c cups dbus-1 gssapi hpip hpmud jpeg krb5 netsnmp
WANTLIB-main += sane ssl tiff usb-1.0 z usb avahi-client avahi-common
WANTLIB-main += com_err heimbase roken wind
a58 1
		graphics/sane-backends \
a64 1
		devel/py-notify \
d66 2
a67 1
		print/hplip,-hpcups
d72 8
d85 1
a85 1
RUN_DEPENDS-hpijs= print/foomatic-filters
d101 1
a101 1
RUN_DEPENDS-libs= # empty
d103 1
a103 1
WANTLIB-gui +=	# empty
d108 3
a110 2
		sysutils/usbutils
LIB_DEPENDS-gui= # empty
d135 1
a135 5
	# We don't patch because it changes at every release
	perl -pi -e "s,^PACKAGE_NAME=.*,PACKAGE_NAME='HP Linux (& Unix) Imaging and Printing',;" \
		-e "s,^PACKAGE_STRING=.*,PACKAGE_STRING='HP Linux (& Unix) Imaging and Printing ${V}'," \
		${WRKSRC}/configure
	@@find ${WRKSRC} -name \*.py | \
d137 1
a137 1
	@@perl -pi -e 's,/usr/bin/python,${MODPY_BIN},g' \
d139 8
@


1.85
log
@* drop some configure args which are the default
* drop policykit support -- it is only needed for the automated binary
  plugin installation tool which only runs on Linux
* use regular foomatic-rip from foomatic-filters instead of the bundled
  foomatic-rip-hplip
* document how to manually install plugins
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2013/08/09 17:44:50 ajacoutot Exp $
a150 1
		${WRKSRC}/base/pkit.py \
@


1.84
log
@Remove -lpthread patching.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2013/08/06 19:13:37 ajacoutot Exp $
d20 5
a24 5
REVISION-main=	0
REVISION-hpijs=	0
REVISION-hpcups=0
REVISION-libs=	0
REVISION-gui=	0
d26 2
a27 2
SHARED_LIBS +=  hpmud		2.0 # .0.6
SHARED_LIBS +=  hpip		2.0 # .0.1
a55 2
BUILD_DEPENDS=	sysutils/polkit

d66 1
a66 5
		print/hplip,-hpcups \
		sysutils/polkit

# polkit(8) almost always needs to know the "active" session
RUN_DEPENDS-main +=	sysutils/consolekit
d107 2
a108 1
		policykit_dbus_sharedir=${PREFIX}/share/dbus-1/system-services
d111 2
a118 2
		--with-systraydir=${PREFIX}/share/examples/hplip/xdg/autostart \
		--with-drvdir=${PREFIX}/share/cups/drv/hp \
a119 5
		--disable-dependency-tracking \
		--disable-pp-build \
		--disable-qt3 \
		--enable-qt4 \
		--enable-doc-build \
a120 8
		--enable-hpcups-install \
		--enable-gui-build \
		--enable-network-build \
		--enable-scan-build \
		--enable-fax-build \
		--enable-dbus-build \
		--enable-policykit \
		--enable-foomatic-rip-hplip-install \
a122 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -pthread"
a128 1
	perl -pi -e 's,/usr/share/polkit-1,${LOCALBASE}/share/polkit-1,g' ${WRKSRC}/configure
a135 1
		${WRKSRC}/prnt/hpijs/foomatic-rip-hplip \
a151 1
		${WRKSRC}/prnt/hpijs/foomatic-rip-hplip \
d167 1
@


1.83
log
@Update to hplip 3.13.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2013/07/12 08:07:05 ajacoutot Exp $
d19 6
@


1.82
log
@Update to hplip-3.13.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/06/20 06:54:37 ajacoutot Exp $
d11 1
a11 1
V=		3.13.6
@


1.81
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/06/17 19:28:37 ajacoutot Exp $
d11 1
a11 1
V=		3.13.5
a19 3
REVISION-main=	1
REVISION-hpcups=1

d48 1
a48 1
WANTLIB-MAIN += com_err heimbase roken wind
@


1.80
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/05/21 16:46:43 ajacoutot Exp $
d20 2
a21 2
REVISION-main=	0
REVISION-hpcups=0
d51 1
a51 1
WANTLIB-MAIN += com_err heimbase heimntlm hx509 roken wind
d83 1
a83 1
WANTLIB-hpcups += com_err heimbase heimntlm hx509 roken wind
@


1.79
log
@Update to hplip-3.13.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/05/13 08:34:09 ajacoutot Exp $
d20 3
d51 1
d83 1
@


1.78
log
@Update to hplip-3.13.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/05/11 11:15:53 ajacoutot Exp $
d11 1
a11 1
V=		3.13.4
@


1.77
log
@Revert previous; -hpcups does not depend on -main as spotted by fgsch@@
grrrr....!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/04/15 10:11:01 ajacoutot Exp $
d11 1
a11 1
V=		3.13.3
a18 4

REVISION-main=	3
REVISION-libs=	1
REVISION-gui=	0
@


1.76
log
@Move the share/cups/drv/hp directory from -libs to -main since this is
only needed for cups; this should prevent a warning that the directory is
not empty when uninstalling cups/cups-filters.

prodded by fgsch@@
@
text
@d20 2
a21 2
REVISION-main=	2
REVISION-libs=	0
@


1.75
log
@Fix @@extraunexec.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2013/04/03 09:41:31 ajacoutot Exp $
d20 2
a21 1
REVISION-main=	1
@


1.74
log
@Needs lsusb.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2013/03/30 13:03:45 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	0
@


1.73
log
@Anything that uses polkit should really RUN_DEPENDS on consolekit;
otherwise we have no way to know the active session.

discussed/agreed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/03/21 08:46:35 ajacoutot Exp $
d21 1
d99 2
a100 1
		devel/desktop-file-utils
@


1.72
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/03/17 13:04:30 ajacoutot Exp $
d20 2
d65 3
@


1.71
log
@Update to hplip-3.13.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/03/11 23:04:32 fgsch Exp $
a95 1
USE_LIBTOOL=	Yes
@


1.70
log
@bump after py-Imaging change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/03/11 11:37:53 espie Exp $
d11 1
a11 1
V=		3.13.2
a18 2

REVISION-main =	0
@


1.69
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/03/08 06:51:46 ajacoutot Exp $
d19 2
@


1.68
log
@Update to hplip-3.13.2.

Some parts of the tools are still somewhat WIP; however, thanks to a
donation from linuxfund.org this has been successfully tested on a HP
OfficeJet 7500 e910, using STP discovery over WiFi with automatic PPD
generation. Scanning, printing, cartridge information... working.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2013/01/26 19:38:00 ajacoutot Exp $
a32 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.67
log
@Fix usage of IP_MULTICAST_LOOP; from fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2013/01/26 14:50:17 ajacoutot Exp $
d11 1
a11 1
V=		3.12.11
a19 6
REVISION-main=	6
REVISION-libs=	0
REVISION-gui=	2
REVISION-hpcups=1
REVISION-hpijs=	0

d158 1
d168 1
d183 1
@


1.66
log
@Simplfy the slp patch the same way as mdns.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2013/01/26 12:25:54 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	5
@


1.65
log
@Simplify mdns patch.
Use '_cups' instead of 'lp'.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2013/01/20 10:43:00 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	4
d22 1
a22 1
REVISION-gui=	1
@


1.64
log
@Fix path to polkit-1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2013/01/20 08:44:16 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	3
d22 1
a22 1
REVISION-gui=	0
@


1.63
log
@Install a /var/db/hp/hplip.state file to simulate we have the plugins
installed; these are Linux specific and proprietary so there is not
point in getting them.

idea from "gjones"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2013/01/20 07:32:08 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	2
@


1.62
log
@Make hp-check start to behave.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2013/01/05 12:53:09 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	1
d182 2
@


1.61
log
@Adapt dependencies after recent print/cups change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2013/01/04 18:21:54 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	0
a110 1
		policykit_dir=${PREFIX}/share/polkit-1/actions/ \
d147 1
@


1.60
log
@Move files where they belong.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/12/10 16:00:11 ajacoutot Exp $
d20 4
a23 1
REVISION-hpcups=0
d47 3
d56 1
a56 1
WANTLIB-main += sane ssl tiff usb-1.0 z usb
d65 1
d83 1
a83 1
WANTLIB-hpcups += ${cWANTLIB} z asn1 gssapi krb5 ssl
d85 1
d91 1
d96 1
a103 2

MODULES=	lang/python
@


1.59
log
@Update to hplip-3.12.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2012/10/12 21:56:07 ajacoutot Exp $
d19 3
@


1.58
log
@Update to hplip-3.12.10a.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2012/09/11 10:52:16 ajacoutot Exp $
d11 1
a11 1
V=		3.12.10a
d173 1
@


1.57
log
@Update to hplip-3.12.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2012/08/05 06:46:10 ajacoutot Exp $
d11 1
a11 1
V=		3.12.9
@


1.56
log
@I forgot to cvs add the patches in my commit yesterday; spotted by ian@@, thanks!
While here, regen WANTLIB/depends.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2012/08/04 14:55:37 ajacoutot Exp $
d11 1
a11 1
V=		3.12.6
a18 6

REVISION-main=	3
REVISION-gui=	0
REVISION-hpcups=2
REVISION-libs=	0
REVISION-hpijs=	0
@


1.55
log
@Properly set dependencies on cups or cups-libs according to the subpackage.
While here, tweak the README a bit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2012/06/30 04:22:11 ajacoutot Exp $
d22 1
a22 1
REVISION-hpcups=1
d79 1
a79 1
WANTLIB-hpcups += ${cWANTLIB} png tiff z asn1 gssapi krb5 ssl
d81 5
a85 2
LIB_DEPENDS-hpcups= print/hplip,-libs \
		print/cups,-libs
@


1.54
log
@Remove uneeded patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2012/06/27 10:53:00 sthen Exp $
a11 4
REVISION-main=	2
REVISION-gui=	0
REVISION-hpcups=0
REVISION-libs=	0
d20 6
d59 1
a59 1
		print/cups>=1.5.0 \
d69 3
d82 1
a82 1
		print/cups>=1.5.0
@


1.53
log
@subst /usr/bin/python -> MODPY_BIN on all the scripts, upstream changed some
of them from /usr/bin/env. OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2012/06/26 11:17:54 sthen Exp $
d12 1
a12 1
REVISION-main=	1
d14 2
@


1.52
log
@minor tweaks to hplip, ok ajacoutot@@

- use rc.d/httpd rather than apachectl
- MODPY_BIN in the new config_usb_printer.py
- comment tyops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/06/26 06:17:11 ajacoutot Exp $
d12 2
a13 1
REVISION-main=	0
d134 2
a135 2
		xargs perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},g'
	@@perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},g' \
@


1.51
log
@Update to hplip-3.12.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/02/23 16:03:03 ajacoutot Exp $
d12 1
@


1.50
log
@Update to hplip-3.12.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/02/17 15:55:36 ajacoutot Exp $
d11 1
a11 1
V=		3.12.2
d47 1
a47 1
WANTLIB-main += sane ssl tiff usb z usb-1.0
d64 1
a64 1
WANTLIB-hpijs += c jpeg netsnmp stdc++ usb dbus-1 hpmud
d75 1
a75 1
WANTLIB-libs +=	${cWANTLIB} netsnmp usb usb-1.0
d77 1
a77 1
		devel/libusb-compat
@


1.49
log
@Fix path to the ppd-o-matic script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/01/17 09:54:27 ajacoutot Exp $
d11 1
a11 1
V=		3.11.12
a18 2

REVISION-main=	0
@


1.48
log
@Update to hplip-3.11.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/12/20 19:03:58 jasper Exp $
d19 2
@


1.47
log
@- bump REVISION after several python modules had their flavor dropped.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/11/13 13:54:05 ajacoutot Exp $
d11 1
a11 1
V=		3.11.10
a19 4
REVISION-main=	2
REVISION-hpijs=	0
REVISION-libs=	0

d71 1
a71 1
WANTLIB-hpcups += c jpeg stdc++ hpip cups cupsimage
@


1.46
log
@Sync dependencies after move from libusb to libusb-compat and fix a
couple of fallouts. Note that these ports are only the ones that used to
have a direct dependency on devel/libusb so there may be some other
hidden ports that may break because of the switch. If that's the case,
no need to start ranting all over but instead tell me which one(s)
break. Thanks.

Note: sysutils/nut hasn't been fixed yet but will be today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/11/03 12:05:40 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=  ${DISTNAME}
d20 1
a20 1
REVISION-main=	1
@


1.45
log
@Tweak MESSAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/10/09 07:42:29 ajacoutot Exp $
d20 3
a22 1
REVISION-main=	0
d51 1
a51 1
WANTLIB-main += sane ssl tiff usb z
d67 1
a67 1
WANTLIB-hpijs += ${cWANTLIB} hpip
d79 1
a79 1
WANTLIB-libs +=	${cWANTLIB} netsnmp usb
d81 1
a81 1
		devel/libusb
@


1.44
log
@Update to hplip-3.11.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/09/16 11:13:41 espie Exp $
d19 2
@


1.43
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/09/08 10:34:25 ajacoutot Exp $
d11 1
a11 1
V=		3.11.7
a18 5

REVISION-main=	1
REVISION-libs =	0
REVISION-gui =	0
REVISION-hpcups=0
@


1.42
log
@Fix build fix cups >=1.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/08/30 08:55:55 ajacoutot Exp $
d20 3
a22 1
REVISION-main=	0
@


1.41
log
@Update to hplip-3.11.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/07/09 00:30:28 ajacoutot Exp $
d20 3
d56 1
a56 1
		print/cups \
d76 1
a76 1
		print/cups
@


1.40
log
@Update to hplip-3.11.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/06/16 10:16:43 ajacoutot Exp $
d11 1
a11 1
V=		3.11.5
@


1.39
log
@Regen all dependencies after sane-backend recent changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/06/12 16:00:03 rpointel Exp $
d11 1
a11 1
V=		3.11.3
a18 6

REVISION-main=	2
REVISION-hpijs=	0
REVISION-hpcups=0
REVISION-libs=	0
REVISION-gui=	2
@


1.38
log
@missed bump after python 27 switch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/06/07 15:47:59 ajacoutot Exp $
d20 5
a24 2
REVISION-main=	1
REVISION-gui=	1
d51 3
a53 3
WANTLIB-main += ${WANTLIB} ${cWANTLIB} sane cups hpip hpmud asn1 gssapi krb5 
WANTLIB-main += ssl avahi-client avahi-common c crypto dbus-1 exif gphoto2
WANTLIB-main += gphoto2_port jpeg ltdl netsnmp tiff usb z
d92 1
a92 2
MODULES=	devel/gettext \
		lang/python
@


1.37
log
@Clean the mess: shuffle dependencies and files...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/04/17 07:19:44 ajacoutot Exp $
d20 2
a21 2
REVISION-main=	0
REVISION-gui=	0
@


1.36
log
@Update to hplip-3.11.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/04/15 18:40:47 ajacoutot Exp $
d20 3
d64 1
a64 1
		devel/xdg-utils
d85 1
@


1.35
log
@Rework the way we handle dependencies in the print ports:
* depends on foomatic-filters when a driver installs:
  share/foomatic/db/source/.../*.ppd{,.gz}
* depends on foomatic-db-engine when a driver installs:
  share/foomatic/db/source/.../*.xml

foomatic-db-engine now depends on foomatic-db (which itself depends on
nothing anymore).

This will ensure all the needed packages are installed for complete
foomatic-* use.
Some packages install both pre-created ppd and xml files, so theorically
it wouldn't need to depend on foomatic-db-engine, but we still do it
because we may want to regen the ppd file.

It's the best compromise I could come up with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/03/02 06:59:03 ajacoutot Exp $
d11 1
a11 1
V=		3.11.1
a19 2
REVISION-hpijs=	0

d23 2
d127 4
@


1.34
log
@Update to hplip-3.11.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/01/16 23:02:53 ajacoutot Exp $
d20 2
d68 1
@


1.33
log
@Fix README after recent ugen(4) changes from jakemsr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/12/20 11:41:43 ajacoutot Exp $
d11 1
a11 1
V=		3.10.9
a19 4
REVISION-main=	5
REVISION-gui=	0
REVISION-hpijs=	0

d61 1
a61 1
WANTLIB-hpijs += ${cWANTLIB} asn1 gssapi krb5 ssl hpip
@


1.32
log
@Better README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/25 11:24:16 dcoppa Exp $
d20 1
a20 1
REVISION-main=	4
@


1.31
log
@Fix pstotiff.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/20 09:48:39 espie Exp $
d20 1
a20 1
REVISION-main=	3
@


1.30
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/06 19:07:42 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	2
d130 2
@


1.29
log
@Remove duplicate WANTLIB.

from Charles Smith
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/11/06 16:07:00 espie Exp $
d51 1
a51 1
BUILD_DEPENDS=	::sysutils/polkit
d54 3
a56 3
		::graphics/sane-backends \
		::print/cups \
		::print/hplip,-libs
d58 6
a63 6
		::print/py-reportlab/reportlab \
		::x11/dbus-python \
		::devel/py-notify \
		::graphics/py-Imaging \
		::print/hplip,-hpcups \
		::devel/xdg-utils
d67 3
a69 3
LIB_DEPENDS-hpijs= ::print/hplip,-libs \
		::graphics/jpeg \
		::x11/dbus
d73 2
a74 2
LIB_DEPENDS-hpcups= ::print/hplip,-libs \
		::print/cups
d77 2
a78 2
LIB_DEPENDS-libs= ::net/net-snmp \
		::devel/libusb
d81 3
a83 3
RUN_DEPENDS-gui= ::x11/py-qt4 \
		::print/hplip,-main \
		:desktop-file-utils-*:devel/desktop-file-utils
@


1.28
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/11/05 10:29:48 ajacoutot Exp $
d22 1
d65 3
a67 3
WANTLIB-hpijs += ${cWANTLIB} asn1 gssapi krb5 ssl asn1 gssapi krb5 ssl
WANTLIB-hpijs += c jpeg netsnmp stdc++ usb dbus-1
LIB_DEPENDS-hpijs= hpip,hpmud::print/hplip,-libs \
@


1.27
log
@Allow hp-setup to go a bit further... not complete yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/11/05 08:21:22 ajacoutot Exp $
d44 1
a44 1
WANTLIB += crypto m pthread
d46 2
a47 2
WANTLIB-main += ${WANTLIB} sane cups hpip hpmud asn1 gssapi krb5 ssl
WANTLIB-main += avahi-client avahi-common c crypto dbus-1 exif gphoto2
d64 1
a64 1
WANTLIB-hpijs += ${WANTLIB} asn1 gssapi krb5 ssl asn1 gssapi krb5 ssl
d70 1
a70 1
WANTLIB-hpcups += ${WANTLIB} png tiff z asn1 gssapi krb5 ssl
d75 1
a75 1
WANTLIB-libs +=	${WANTLIB} netsnmp usb
@


1.26
log
@Use xdg-open instead of trying to come up with a giant list of browser
names. Fix CUPS web interface URL.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/04 17:07:10 ajacoutot Exp $
d20 1
a20 1
REVISION-main=	1
@


1.25
log
@tyop in MESSAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/10/31 07:43:44 ajacoutot Exp $
d20 2
a21 1
REVISION-main=	0
d61 2
a62 1
		::print/hplip,-hpcups
@


1.24
log
@Update to hplip-3.10.9 and move to new REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/09/08 07:13:16 ajacoutot Exp $
d19 2
@


1.23
log
@Update to hplip-3.10.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/09/07 19:36:34 kili Exp $
d11 1
a11 1
V=		3.10.6
d43 1
a43 1
WANTLIB-main += ${WANTLIB}
d50 3
a52 3
		sane.>=1::graphics/sane-backends \
		cups.>=3::print/cups \
		hpip,hpmud::print/hplip,-libs
d60 2
a61 2
WANTLIB-hpijs += ${WANTLIB}
WANTLIB-hpijs += c jpeg netsnmp stdc++ usb
d63 2
a64 2
		jpeg.>=6.3::graphics/jpeg \
		dbus-1.>=7::x11/dbus
d66 8
a73 7
WANTLIB-hpcups += ${WANTLIB}
WANTLIB-hpcups += c jpeg stdc++
LIB_DEPENDS-hpcups= hpip::print/hplip,-libs \
		cups.>=3,cupsimage::print/cups

LIB_DEPENDS-libs= netsnmp.>=7::net/net-snmp \
		usb.>=9::devel/libusb
@


1.22
log
@Bring back PKGNAME-main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/08/30 22:13:08 fgsch Exp $
d11 1
a11 1
V=		3.10.5
a14 1
REVISION-main =	1
a15 1
REVISION-hpijs = 2
a18 1
REVISION-gui =	0
@


1.21
log
@Bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/07/07 16:42:25 ajacoutot Exp $
d14 1
@


1.20
log
@Enable polkit support.
Note that this is only a build_depends, if people don't use polkit, this
won't change anything, but it they do then the support files are there.

ok jasper@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/05/30 06:29:07 ajacoutot Exp $
d14 3
a16 2
PKGNAME-main=	${DISTNAME}p0
PKGNAME-hpijs=	hpijs-${V}p1
d20 1
@


1.19
log
@Update to hplip-3.10.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/04/07 10:07:26 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=	${DISTNAME}
PKGNAME-hpijs=	hpijs-${V}
d47 2
d87 4
a90 1
		mimedir=${PREFIX}/share/examples/hplip/cups
a103 1
		--disable-policykit \
d114 1
@


1.18
log
@Tweak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/03/26 08:00:03 ajacoutot Exp $
d11 1
a11 1
V=		3.10.2
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p2
d18 1
a18 1
PKGNAME-gui=	hplip-gui-${V}p0
@


1.17
log
@Move hp-check from -gui to -main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/03/24 06:31:13 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p1
@


1.16
log
@Add setup.py to the SUBST_CMD list.

from Greg Jones, thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/03/21 11:07:43 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p0
d18 1
a18 1
PKGNAME-gui=	hplip-gui-${V}
@


1.15
log
@Major update to hplip-3.10.2.
Take maintainership.
Tweak, flush and fix dependencies...

Add some example on how to use hplip.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/01/10 18:09:29 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}
d143 1
@


1.14
log
@* -main really needs -hpcups, -hpijs is useless in this case.
* reorder depends
* tweak MESSAGE and COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/01/10 16:43:18 ajacoutot Exp $
d11 1
a11 1
V=		3.9.8
d14 5
a18 5
PKGNAME-main=	${DISTNAME}p0
PKGNAME-hpijs=	hpijs-${V}p1
PKGNAME-hpcups=	hpcups-${V}p1
PKGNAME-libs=	hplip-libs-${V}p0
PKGNAME-gui=	hplip-gui-${V}p0
d20 2
a21 2
SHARED_LIBS +=  hpmud		1.0 # .0.6
SHARED_LIBS +=  hpip		1.0 # .0.1
d25 3
a27 1
HOMEPAGE=	http://hplipopensource.com/hplip-web/
d61 1
d65 2
a66 2
WANTLIB-hpcups += c dbus-1 jpeg netsnmp stdc++ usb
LIB_DEPENDS-hpcups= hpip,hpmud::print/hplip,-libs \
d84 2
a85 1
		hplip_statedir=${PREFIX}/share/examples/hplip/db
d120 1
a120 1
		${WRKSRC}/prnt/hpijs/hpcups.cpp \
d136 1
d146 4
@


1.13
log
@Try and be logical:
* no need to depend on foomatic-filters because hpcups uses its own cups
raster and hpijs uses the bundled foomatic-rip-hplip.
* move foomatic-rip-hplip into the -hplip subpackage because it is only
used there.

Bump and add conflict marker accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/12/22 15:54:32 ajacoutot Exp $
d6 1
a6 1
COMMENT-hpijs=	HP Inkjet driver for ghostscript
d14 3
a16 3
PKGNAME-main=	${DISTNAME}
PKGNAME-hpijs=	hpijs-${V}p0
PKGNAME-hpcups=	hpcups-${V}p0
d54 1
a54 1
		:hpijs-*|hpcups-*:print/hplip,-hpcups
d62 1
a62 1
WANTLIB-hpcups += c jpeg netsnmp stdc++ usb
a63 1
		dbus-1.>=7::x11/dbus \
@


1.12
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/08/20 08:07:48 ajacoutot Exp $
d15 3
a17 3
PKGNAME-hpijs=	hpijs-${V}
PKGNAME-hpcups=	hpcups-${V}
PKGNAME-libs=	hplip-libs-${V}
a59 1
RUN_DEPENDS-hpijs= ::print/foomatic-filters
a65 1
RUN_DEPENDS-hpcups= ::print/foomatic-filters
@


1.11
log
@Updated to hplip-3.9.8
Fix SHARED_LIBS.
sane-hpaio is a loadable module.
Move some PPD files from -hpijs to -hpcups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/08/07 12:20:22 ajacoutot Exp $
d18 1
a18 1
PKGNAME-gui=	hplip-gui-${V}
@


1.10
log
@hp-scan needs graphics/py-Imaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/07/13 08:14:28 ajacoutot Exp $
d11 1
a11 1
V=		3.9.6b
d14 1
a14 1
PKGNAME-main=	${DISTNAME}p0
d20 1
a20 1
SHARED_LIBS +=  hpmud		1.0 # .0.5
a21 4
SHARED_LIBS +=  sane-hpaio	0.0 # .1.0

SHARED_LIBS+=	hpmud		0.0	# .0.0
SHARED_LIBS+=	hpip		0.0	# .0.1
@


1.9
log
@Major update to hplip-3.9.6b.
Refer to the project homepage for the complete changelog.

This port now comes into 5 subpackages (ala Fedora):
- main: complete hplip functionnalities
- hpijs: deprecated hpijs printer driver
- hpcups: new-gen printer driver
- libs: libraries and helpers used by other subpackages
- gui: graphical tools (systray applet...)

It seems this version works a least as good as the previous one we had
in-tree. I could use some feedbacks for the fancier stuffs that hplip
provides (besides regular printing using hpcups and/or hpijs), like
printer communication, ink levels... because I have no hp equipment, but
at least, there was no regression reported.
(some features are Linux-only and are expected not to work)

Tested by several, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/06/23 18:05:17 jasper Exp $
d14 1
a14 1
PKGNAME-main=	${DISTNAME}
d57 1
@


1.8
log
@- update homepage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/06/16 11:45:28 sthen Exp $
d7 3
a9 1
COMMENT-docs=	html documentation for HPLIP
d11 1
a11 1
V=		2.7.12
d13 10
a22 3
PKGNAME-main=	${DISTNAME}p4
PKGNAME-hpijs=	hpijs-${V}p3
PKGNAME-docs=	hplip-docs-${V}p2
d39 1
a39 1
MULTI_PACKAGES=	-main -hpijs -docs
d43 1
a43 2
WANTLIB += avahi-client avahi-common c crypto dbus-1 exif gphoto2
WANTLIB += gphoto2_port jpeg ltdl m pthread tiff usb z
d45 3
a47 3
LIB_DEPENDS=	sane.>=1::graphics/sane-backends \
		netsnmp.>=7::net/net-snmp \
		cups.>=3::print/cups
d50 3
a52 1
		hpip,hpmud::${BASE_PKGPATH},-hpijs
d55 23
a77 1
		::x11/py-qt3 \
d79 1
d81 2
a82 7
WANTLIB-hpijs=	${WANTLIB} stdc++
RUN_DEPENDS-hpijs=::print/foomatic-filters

WANTLIB-docs=
LIB_DEPENDS-docs=
RUN_DEPENDS-docs=
PKG_ARCH-docs=	*
a83 1
MODULES=	devel/gettext lang/python
d86 2
d92 6
a97 3
		--with-hpppddir=${LOCALBASE}/share/foomatic/db/source/PPD/HP \
		--with-cupsbackenddir=${LOCALBASE}/libexec/cups/backend \
		--with-icondir=${LOCALBASE}/share/applications \
d101 6
d108 5
d114 1
a114 1
		--disable-foomatic-xml-install
d116 1
a116 5
		LDFLAGS="-L${LOCALBASE}/lib" \
		am_cv_pathless_PYTHON=python${MODPY_VERSION}

post-extract:
	@@find ${WRKSRC} -type d -name CVS -exec rm -rf {} \; 2> /dev/null
d121 11
a131 1
	${SUBST_CMD} ${WRKSRC}/prnt/hpijs/globals.cpp \
d133 1
a133 1
		${WRKSRC}/base/service.py \
d135 5
d141 6
a146 14
		${WRKSRC}/fax/backend/hpfax.py \
		${WRKSRC}/hpssd.py \
		${WRKSRC}/check.py \
		${WRKSRC}/doc/release_notes.html \
		${WRKSRC}/doc/tech_docs/man_pages/hpssd.html

post-install:
	@@ln -s ${TRUEPREFIX}/share/hplip/hpssd.py ${PREFIX}/sbin/hpssd
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/hplip
	${INSTALL_DATA} ${WRKSRC}/hplip.conf \
		${PREFIX}/share/examples/hplip
	${INSTALL_DATA_DIR} ${PREFIX}/share/hplip/data/images/distros
	${INSTALL_DATA} ${WRKSRC}/data/images/distros/*.png \
		${PREFIX}/share/hplip/data/images/distros
@


1.7
log
@regen WANTLIB and bump; avahi/gio-2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/03/25 13:39:40 jasper Exp $
d11 3
a13 3
PKGNAME-main=	${DISTNAME}p3
PKGNAME-hpijs=	hpijs-${V}p2
PKGNAME-docs=	hplip-docs-${V}p1
d20 1
a20 1
HOMEPAGE=	http://hplip.sourceforge.net/
@


1.6
log
@- more missing package name bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/02/11 15:28:11 naddy Exp $
d11 2
a12 2
PKGNAME-main=	${DISTNAME}p2
PKGNAME-hpijs=	hpijs-${V}p1
d34 2
a35 2
WANTLIB=	c crypto exif gphoto2 gphoto2_port jpeg ltdl m pthread \
		tiff usb z
@


1.5
log
@forgotten package bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/02/02 10:47:11 ajacoutot Exp $
d11 3
a13 3
PKGNAME-main=	${DISTNAME}p1
PKGNAME-hpijs=	hpijs-${V}p0
PKGNAME-docs=	hplip-docs-${V}p0
@


1.4
log
@- SECURITY: fix for Secunia SA31470 -- patches adapted from RedHat
(CVE-2008-2940 CVE-2008-2941)
prodded by jasper@@
- fix some hardcoded paths and regen PLIST while here

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/06/05 19:10:43 ajacoutot Exp $
d12 1
a12 1
PKGNAME-hpijs=	hpijs-${V}
@


1.3
log
@- link the hpaio module the same way as other sane backends loadable
modules ; this should allow scanimage(1) to work

issue reported by Stephan Andreas <alfons1991 at arcor dot de> on ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/03/15 10:18:29 ajacoutot Exp $
d11 1
a11 1
PKGNAME-main=	${DISTNAME}p0
d13 1
a13 1
PKGNAME-docs=	hplip-docs-${V}
d82 10
a91 4
	@@perl -pi -e 's,!!LOCALBASE!!,${LOCALBASE},g' \
		${WRKSRC}/installer/{core_install,dcheck}.py
	@@perl -pi -e 's,!!MODPY_BIN!!,${MODPY_BIN},g' \
		${WRKSRC}/base/service.py
@


1.2
log
@- update to version 2.7.12 (should be the latest 2.7.* release; we'll
see about updating to the 2.8.* version later)
- enable gui interface

Thanks to Predrag Punosevac <punosevac at math.arizona dot edu> for the
reminder
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/11/02 15:48:55 ajacoutot Exp $
d11 1
a11 1
PKGNAME-main=	${DISTNAME}
a16 1
SHARED_LIBS+=	sane-hpaio	0.0	# .1.0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 1
a9 1
V=		2.7.10
d23 1
a23 1
# GPL - MIT (backend) - BSD (hpijs)
d46 1
d70 1
a70 1
		--disable-gui-build \
d77 3
d85 2
d93 3
@


1.1.1.1
log
@Import hplip-2.7.10

This port contains 3 subpackages:

* hplip
HPLIP is an HP developed solution for printing, scanning, and faxing
with HP inkjet and laser based printers in Unix.
The HPLIP project provides printing support for 1,248 printer models,
including Deskjet, Officejet, Photosmart, PSC (Print Scan Copy),
Business Inkjet, LaserJet, Edgeline MFP, and LaserJet MFP.

* hpijs (supersed print/hpijs)
The Hewlett-Packard Co. Linux Inkjet Driver Project is an add-on to the
GNU Ghostscript application. This driver is based on the Hewlett Packard
Appliance APDK for deskjet printers.

* hplip-docs
Documentation for HPLIP in HTML format.


feedback from winiger@@, reviewed by bernd@@
"looks correct" jasper@@ , "works for me" sthen@@
@
text
@@
