head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.10
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.8
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2015.04.17.04.18.13;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	bILtsWtTVnQjIsVx;

1.4
date	2015.02.05.17.34.33;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	yACkirWvCqnjFF6L;

1.3
date	2014.06.17.08.51.18;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	9oKordUSrKmruVZe;

1.2
date	2013.05.21.16.46.43;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.08.06.51.46;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to hplip-3.15.4.
@
text
@$OpenBSD: patch-installer_pluginhandler_py,v 1.4 2015/02/05 17:34:33 ajacoutot Exp $
--- installer/pluginhandler.py.orig	Tue Apr 14 11:53:21 2015
+++ installer/pluginhandler.py	Fri Apr 17 05:53:22 2015
@@@@ -42,7 +42,7 @@@@ except ImportError:
         return sha.new(s).hexdigest()
 
 
-PLUGIN_STATE_FILE = '/var/lib/hp/hplip.state'
+PLUGIN_STATE_FILE = '/var/db/hp/hplip.state'
 PLUGIN_FALLBACK_LOCATION = 'http://hplipopensource.com/hplip-web/plugin/'
 
 
@@@@ -97,11 +97,11 @@@@ class PluginHandle(object):
             ARCH = 'x86_%d' % BITNESS
 
         if BITNESS == 64:
-            SANELIBDIR = '/usr/lib64/sane'
-            LIBDIR = '/usr/lib64'
+            SANELIBDIR = '${LOCALBASE}/lib/sane'
+            LIBDIR = '${LOCALBASE}/lib'
         else:
-            SANELIBDIR = '/usr/lib/sane'
-            LIBDIR = '/usr/lib'
+            SANELIBDIR = '${LOCALBASE}/lib/sane'
+            LIBDIR = '${LOCALBASE}/lib'
 
         copies = []
 
@@@@ -236,8 +236,8 @@@@ class PluginHandle(object):
     def __setPluginConfFile(self):
         home = sys_conf.get('dirs', 'home')
 
-        if os.path.exists('/etc/hp/plugin.conf'):
-            self.__plugin_conf_file = "file:///etc/hp/plugin.conf"
+        if os.path.exists('${SYSCONFDIR}/hp/plugin.conf'):
+            self.__plugin_conf_file = "file://${SYSCONFDIR}/hp/plugin.conf"
 
         elif os.path.exists(os.path.join(home, 'plugin.conf')):
             self.__plugin_conf_file = "file://" + os.path.join(home, 'plugin.conf')
@


1.4
log
@Update to hplip-3.15.2.
@
text
@d1 3
a3 3
$OpenBSD: patch-installer_pluginhandler_py,v 1.3 2014/06/17 08:51:18 ajacoutot Exp $
--- installer/pluginhandler.py.orig	Thu Jan 29 13:20:24 2015
+++ installer/pluginhandler.py	Thu Feb  5 16:44:37 2015
d13 1
a13 1
@@@@ -95,11 +95,11 @@@@ class PluginHandle(object):
d29 1
a29 1
@@@@ -234,8 +234,8 @@@@ class PluginHandle(object):
@


1.3
log
@Update to hplip-3.14.6.
@
text
@d1 13
a13 4
$OpenBSD: patch-installer_pluginhandler_py,v 1.2 2013/05/21 16:46:43 ajacoutot Exp $
--- installer/pluginhandler.py.orig	Tue Jun  3 08:31:24 2014
+++ installer/pluginhandler.py	Tue Jun 17 09:32:14 2014
@@@@ -100,11 +100,11 @@@@ class PluginHandle(object):
d29 1
a29 1
@@@@ -238,8 +238,8 @@@@ class PluginHandle(object):
@


1.2
log
@Update to hplip-3.13.5.
@
text
@d1 4
a4 4
$OpenBSD: patch-installer_pluginhandler_py,v 1.1 2013/03/08 06:51:46 ajacoutot Exp $
--- installer/pluginhandler.py.orig	Fri May 10 12:05:46 2013
+++ installer/pluginhandler.py	Tue May 21 18:38:19 2013
@@@@ -107,11 +107,11 @@@@ class PluginHandle(object):
d20 1
a20 1
@@@@ -261,8 +261,8 @@@@ class PluginHandle(object):
@


1.1
log
@Update to hplip-3.13.2.

Some parts of the tools are still somewhat WIP; however, thanks to a
donation from linuxfund.org this has been successfully tested on a HP
OfficeJet 7500 e910, using STP discovery over WiFi with automatic PPD
generation. Scanning, printing, cartridge information... working.
@
text
@d1 3
a3 3
$OpenBSD$
--- installer/pluginhandler.py.orig	Fri Feb 22 17:52:29 2013
+++ installer/pluginhandler.py	Fri Feb 22 17:54:29 2013
d20 1
a20 1
@@@@ -269,8 +269,8 @@@@ class PluginHandle(object):
@

