head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.10
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.8
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.4
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2015.02.05.17.34.33;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	yACkirWvCqnjFF6L;

1.3
date	2014.06.17.08.51.18;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	9oKordUSrKmruVZe;

1.2
date	2013.10.15.14.21.00;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.08.06.51.46;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to hplip-3.15.2.
@
text
@$OpenBSD: patch-common_utils_c,v 1.3 2014/06/17 08:51:18 ajacoutot Exp $

implicit declaration of function 'mkstemp'

--- common/utils.c.orig	Thu Jan 29 13:20:21 2015
+++ common/utils.c	Thu Feb  5 16:44:21 2015
@@@@ -1,5 +1,6 @@@@
 #include "utils.h"
 #include "string.h"
+#include <stdlib.h>
 #include <dlfcn.h>
 #include <sys/stat.h>
 #include <errno.h>
@@@@ -116,7 +117,7 @@@@ enum UTILS_PLUGIN_STATUS validate_plugin_version()
 
     if (get_key_value(HPLIP_PLUGIN_STATE,"[plugin]" , "version", plugin_version, sizeof(plugin_version)) != UTILS_CONF_OK )
     {
-        BUG("validate_plugin_version() Failed to get Plugin version from [%s]\n", "/var/lib/hp/hplip.state");
+        BUG("validate_plugin_version() Failed to get Plugin version from [%s]\n", "/var/db/hp/hplip.state");
         return UTILS_PLUGIN_STATUS_NOT_INSTALLED;
     }
 
@@@@ -254,7 +255,7 @@@@ int getHPLogLevel()
     char    *p;
     int iLogLevel = 0;
 
-    fp = fopen ("/etc/cups/cupsd.conf", "r");
+    fp = fopen ("${SYSCONFDIR}/cups/cupsd.conf", "r");
     if (fp == NULL)
         return 0;
     while (!feof (fp))
@


1.3
log
@Update to hplip-3.14.6.
@
text
@d1 1
a1 1
$OpenBSD: patch-common_utils_c,v 1.2 2013/10/15 14:21:00 ajacoutot Exp $
d5 2
a6 2
--- common/utils.c.orig	Tue Jun  3 08:33:06 2014
+++ common/utils.c	Tue Jun 17 09:38:56 2014
d14 10
a23 2
@@@@ -253,7 +254,7 @@@@ int getHPLogLevel()
     char    str[258];
d26 1
@


1.2
log
@Update to hplip-3.13.10.
@
text
@d1 1
a1 1
$OpenBSD: patch-common_utils_c,v 1.1 2013/03/08 06:51:46 ajacoutot Exp $
d5 2
a6 2
--- common/utils.c.orig	Fri Oct 11 11:40:05 2013
+++ common/utils.c	Tue Oct 15 15:42:07 2013
d14 9
@


1.1
log
@Update to hplip-3.13.2.

Some parts of the tools are still somewhat WIP; however, thanks to a
donation from linuxfund.org this has been successfully tested on a HP
OfficeJet 7500 e910, using STP discovery over WiFi with automatic PPD
generation. Scanning, printing, cartridge information... working.
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- common/utils.c.orig	Fri Feb 22 18:00:50 2013
+++ common/utils.c	Fri Feb 22 18:01:05 2013
a13 7
@@@@ -259,4 +260,4 @@@@ int createTempFile(char* szFileName, FILE** pFilePtr)
     }
 
     return iFD;
-}
\ No newline at end of file
+}
@

