head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.8
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.4
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.20
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.18
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.16
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.14
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.12
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2015.02.05.17.34.33;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	yACkirWvCqnjFF6L;

1.2
date	2009.07.13.08.14.28;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.02.10.47.11;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to hplip-3.15.2.
@
text
@$OpenBSD: patch-fax_backend_hpfax_py,v 1.2 2009/07/13 08:14:28 ajacoutot Exp $
--- fax/backend/hpfax.py.orig	Thu Jan 29 13:20:35 2015
+++ fax/backend/hpfax.py	Thu Feb  5 14:28:00 2015
@@@@ -49,7 +49,7 @@@@ PIPE_BUF = 4096
 
 job_id = 0
 pid = os.getpid()
-config_file = '/etc/hp/hplip.conf'
+config_file = '${SYSCONFDIR}/hp/hplip.conf'
 home_dir = ''
 
 
@@@@ -68,7 +68,7 @@@@ if os.path.exists(config_file):
         bug("Error setting home directory: home= under [dirs] not found.")
         sys.exit(1)
 else:
-    bug("Error setting home directory: /etc/hp/hplip.conf not found")
+    bug("Error setting home directory: ${SYSCONFDIR}/hp/hplip.conf not found")
     sys.exit(1)
 
 if not home_dir or not os.path.exists(home_dir):
@


1.2
log
@Major update to hplip-3.9.6b.
Refer to the project homepage for the complete changelog.

This port now comes into 5 subpackages (ala Fedora):
- main: complete hplip functionnalities
- hpijs: deprecated hpijs printer driver
- hpcups: new-gen printer driver
- libs: libraries and helpers used by other subpackages
- gui: graphical tools (systray applet...)

It seems this version works a least as good as the previous one we had
in-tree. I could use some feedbacks for the fancier stuffs that hplip
provides (besides regular printing using hpcups and/or hpijs), like
printer communication, ink levels... because I have no hp equipment, but
at least, there was no regression reported.
(some features are Linux-only and are expected not to work)

Tested by several, thanks!
@
text
@d1 4
a4 4
$OpenBSD$
--- fax/backend/hpfax.py.orig	Thu Jul  2 14:13:47 2009
+++ fax/backend/hpfax.py	Thu Jul  2 14:14:02 2009
@@@@ -46,7 +46,7 @@@@ PIPE_BUF = 4096
d13 1
a13 1
@@@@ -65,7 +65,7 @@@@ if os.path.exists(config_file):
@


1.1
log
@- SECURITY: fix for Secunia SA31470 -- patches adapted from RedHat
(CVE-2008-2940 CVE-2008-2941)
prodded by jasper@@
- fix some hardcoded paths and regen PLIST while here

ok jasper@@
@
text
@d2 3
a4 4
--- fax/backend/hpfax.py.orig	Mon Feb  2 10:51:15 2009
+++ fax/backend/hpfax.py	Mon Feb  2 10:51:28 2009
@@@@ -41,7 +41,7 @@@@ CUPS_BACKEND_STOP = 4 #  Job failed, stop queue
 CUPS_BACKEND_CANCEL = 5 # Job failed, cancel job
d6 1
d12 3
a14 3
 if os.path.exists(config_file):
@@@@ -54,7 +54,7 @@@@ if os.path.exists(config_file):
         syslog.syslog(syslog.LOG_CRIT, "hpfax[%d]: error: Error setting home directory: home= under [dirs] not found." % pid)
d17 2
a18 2
-    syslog.syslog(syslog.LOG_CRIT, "hpfax[%d]: error: Error setting home directory: /etc/hp/hplip.conf not found." % pid)
+    syslog.syslog(syslog.LOG_CRIT, "hpfax[%d]: error: Error setting home directory: ${SYSCONFDIR}/hp/hplip.conf not found." % pid)
@

