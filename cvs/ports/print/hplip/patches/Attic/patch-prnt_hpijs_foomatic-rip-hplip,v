head	1.3;
access;
symbols
	OPENBSD_5_4:1.2.0.16
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.14
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.12
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2013.08.11.09.54.17;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2009.08.20.08.07.48;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.07.13.08.14.28;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@* drop some configure args which are the default
* drop policykit support -- it is only needed for the automated binary
  plugin installation tool which only runs on Linux
* use regular foomatic-rip from foomatic-filters instead of the bundled
  foomatic-rip-hplip
* document how to manually install plugins
@
text
@$OpenBSD: patch-prnt_hpijs_foomatic-rip-hplip,v 1.2 2009/08/20 08:07:48 ajacoutot Exp $
--- prnt/hpijs/foomatic-rip-hplip.orig	Tue Aug  4 23:35:41 2009
+++ prnt/hpijs/foomatic-rip-hplip	Thu Aug 20 09:24:11 2009
@@@@ -44,19 +44,19 @@@@ my $ripversion='$Revision=3.0.2.131$';
 # possibly other stuff.	 The default path is often fine on Linux, but
 # may not be on other systems.
 #
-my $execpath = "/usr/bin:/usr/local/bin:/usr/bin:/bin";
+my $execpath = "/usr/bin:${LOCALBASE}/bin:/usr/bin:/bin";
 
 # CUPS raster drivers are searched here
-my $cupsfilterpath = "/usr/lib/cups/filter:/usr/local/lib/cups/filter:/usr/local/libexec/cups/filter:/opt/cups/filter:/usr/lib/cups/filter";
+my $cupsfilterpath = "/usr/lib/cups/filter:/usr/local/lib/cups/filter:${LOCALBASE}/libexec/cups/filter:/opt/cups/filter:/usr/lib/cups/filter";
 
 # Location of the configuration file "filter.conf", this file can be
 # used to change the settings of foomatic-rip without editing
 # foomatic-rip. itself. This variable must contain the full pathname 
 # of the directory which contains the configuration file, usually
-# "/etc/foomatic".
+# "${SYSCONFDIR}/foomatic".
 # Some versions of configure do not fully expand $sysconfdir
-my $prefix = "/usr";
-my $configpath = "/etc/foomatic";
+my $prefix = "${PREFIX}";
+my $configpath = "${SYSCONFDIR}/foomatic";
 
 # For the stuff below, the settings in the configuration file have priority.
 
@@@@ -66,7 +66,7 @@@@ my $accounting_prolog = "";
 
 # Enter here your personal command for converting non-postscript files
 # (especially text) to PostScript. If you leave it blank, at first the
-# line "textfilter: ..." from /etc/foomatic/filter.conf is read and
+# line "textfilter: ..." from ${SYSCONFDIR}/foomatic/filter.conf is read and
 # then the commands given on the list below are tried, beginning with
 # the first one.
 # You can set this to "a2ps", "enscript" or "mpage" to select one of the 
@@@@ -97,7 +97,7 @@@@ my $modern_shell = '';
 # Set debug to 1 to enable the debug logfile for this filter; it will
 # appear as defined by $logfile. It will contain status from this
 # filter, plus the renderer's stderr output. You can also add a line
-# "debug: 1" to your /etc/foomatic/filter.conf to get all your
+# "debug: 1" to your ${SYSCONFDIR}/foomatic/filter.conf to get all your
 # Foomatic filters into debug mode.
 #
 # WARNING: This logfile is a security hole; do not use in production.
@@@@ -761,7 +761,7 @@@@ my( $cups_jobid, $cups_user, $cups_jobtitle, $cups_cop
     $cups_filename );
 if ($spooler eq 'cups') {
 
-    # Use CUPS font path ("FontPath" in /etc/cups/cupsd.conf)
+    # Use CUPS font path ("FontPath" in ${SYSCONFDIR}/cups/cupsd.conf)
     if ($ENV{'CUPS_FONTPATH'}) {
 	$ENV{'GS_LIB'} = $ENV{'CUPS_FONTPATH'} .
 	    ($ENV{'GS_LIB'} ? ":$ENV{'GS_LIB'}" : "");
@@@@ -1038,8 +1038,8 @@@@ if (($spooler eq 'direct') || ($spooler eq 'cps') || (
 	    $ppdfile = "$configpath/direct/${printer}.ppd";
 	} elsif (-r "$configpath/${printer}.ppd") { # system dir
 	    $ppdfile = "$configpath/${printer}.ppd";
-	} elsif (-r "/etc/cups/ppd/${printer}.ppd") { # CUPS config dir
-	    $ppdfile = "/etc/cups/ppd/${printer}.ppd";
+	} elsif (-r "${SYSCONFDIR}/cups/ppd/${printer}.ppd") { # CUPS config dir
+	    $ppdfile = "${SYSCONFDIR}/cups/ppd/${printer}.ppd";
 	} elsif (-r "/usr/local/etc/cups/ppd/${printer}.ppd") {
 	    $ppdfile = "/usr/local/etc/cups/ppd/${printer}.ppd";
 	} elsif (-r "/usr/share/ppr/PPDFiles/${printer}.ppd") { # PPR PPDs
@


1.2
log
@Updated to hplip-3.9.8
Fix SHARED_LIBS.
sane-hpaio is a loadable module.
Move some PPD files from -hpijs to -hpcups.
@
text
@d1 1
a1 1
$OpenBSD: patch-prnt_hpijs_foomatic-rip-hplip,v 1.1 2009/07/13 08:14:28 ajacoutot Exp $
@


1.1
log
@Major update to hplip-3.9.6b.
Refer to the project homepage for the complete changelog.

This port now comes into 5 subpackages (ala Fedora):
- main: complete hplip functionnalities
- hpijs: deprecated hpijs printer driver
- hpcups: new-gen printer driver
- libs: libraries and helpers used by other subpackages
- gui: graphical tools (systray applet...)

It seems this version works a least as good as the previous one we had
in-tree. I could use some feedbacks for the fancier stuffs that hplip
provides (besides regular printing using hpcups and/or hpijs), like
printer communication, ink levels... because I have no hp equipment, but
at least, there was no regression reported.
(some features are Linux-only and are expected not to work)

Tested by several, thanks!
@
text
@d1 4
a4 4
$OpenBSD$
--- prnt/hpijs/foomatic-rip-hplip.orig	Thu Jun 25 21:04:19 2009
+++ prnt/hpijs/foomatic-rip-hplip	Mon Jul 13 10:01:05 2009
@@@@ -44,19 +44,19 @@@@
d29 1
a29 1
@@@@ -66,7 +66,7 @@@@
d38 1
a38 1
@@@@ -97,7 +97,7 @@@@
d47 1
a47 1
@@@@ -761,7 +761,7 @@@@
d56 1
a56 1
@@@@ -1038,8 +1038,8 @@@@
@

