head	1.122;
access;
symbols
	OPENBSD_6_1:1.120.0.2
	OPENBSD_6_1_BASE:1.120
	OPENBSD_6_0:1.108.0.2
	OPENBSD_6_0_BASE:1.108
	OPENBSD_5_9:1.102.0.2
	OPENBSD_5_9_BASE:1.102
	OPENBSD_5_8:1.95.0.4
	OPENBSD_5_8_BASE:1.95
	OPENBSD_5_7:1.91.0.2
	OPENBSD_5_7_BASE:1.91
	OPENBSD_5_6:1.83.0.2
	OPENBSD_5_6_BASE:1.83
	OPENBSD_5_5:1.81.0.2
	OPENBSD_5_5_BASE:1.81
	OPENBSD_5_4:1.76.0.2
	OPENBSD_5_4_BASE:1.76
	OPENBSD_5_3:1.71.0.2
	OPENBSD_5_3_BASE:1.71
	OPENBSD_5_2:1.63.0.2
	OPENBSD_5_2_BASE:1.63
	OPENBSD_5_1_BASE:1.58
	OPENBSD_5_1:1.58.0.2
	OPENBSD_5_0:1.53.0.2
	OPENBSD_5_0_BASE:1.53
	OPENBSD_4_9:1.44.0.2
	OPENBSD_4_9_BASE:1.44
	OPENBSD_4_8:1.31.0.2
	OPENBSD_4_8_BASE:1.31
	OPENBSD_4_7:1.30.0.2
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.24.0.2
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.20.0.2
	OPENBSD_4_4_BASE:1.20
	OPENBSD_4_3:1.15.0.2
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	alek_20060618:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.122
date	2017.05.13.17.40.26;	author espie;	state Exp;
branches;
next	1.121;
commitid	3mLn9XfSs8pJCxh2;

1.121
date	2017.04.10.11.46.33;	author sthen;	state Exp;
branches;
next	1.120;
commitid	HY6VNZxjJWzKQFDV;

1.120
date	2017.03.26.19.51.36;	author kili;	state Exp;
branches;
next	1.119;
commitid	fkWAiI3nbDrJQmQl;

1.119
date	2017.02.19.20.53.26;	author kili;	state Exp;
branches;
next	1.118;
commitid	fqMusYdO9wo90bVo;

1.118
date	2017.01.17.13.03.30;	author kili;	state Exp;
branches;
next	1.117;
commitid	lassWGM1qSAi4wZG;

1.117
date	2016.12.27.17.38.25;	author landry;	state Exp;
branches;
next	1.116;
commitid	QHWQFPEkHWgwX2ra;

1.116
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.115;
commitid	l6KSNN1DfB6ABkhu;

1.115
date	2016.12.25.13.54.34;	author zhuk;	state Exp;
branches;
next	1.114;
commitid	esFsF9M62F630rFy;

1.114
date	2016.12.17.15.31.57;	author zhuk;	state Exp;
branches;
next	1.113;
commitid	tnR3c33FE5BwTZ4F;

1.113
date	2016.12.17.01.20.10;	author kili;	state Exp;
branches;
next	1.112;
commitid	J58c5HqB3i2FsNI3;

1.112
date	2016.11.23.20.45.00;	author kili;	state Exp;
branches;
next	1.111;
commitid	pAphThepkkaNSeHh;

1.111
date	2016.10.14.07.39.52;	author kili;	state Exp;
branches;
next	1.110;
commitid	8t2mI5PkLg2hrOni;

1.110
date	2016.08.22.21.31.54;	author kili;	state Exp;
branches;
next	1.109;
commitid	D0XL87zFj2TvqpnM;

1.109
date	2016.08.01.18.35.40;	author kili;	state Exp;
branches;
next	1.108;
commitid	ju7t3HlTboIHX5Vt;

1.108
date	2016.07.09.15.37.46;	author kili;	state Exp;
branches;
next	1.107;
commitid	ROQ2BbrhWsZBz9vd;

1.107
date	2016.06.19.19.42.26;	author kili;	state Exp;
branches;
next	1.106;
commitid	vInbBhGV0anXFGtp;

1.106
date	2016.05.27.21.14.31;	author kili;	state Exp;
branches;
next	1.105;
commitid	fAiKWUUQREykHzqO;

1.105
date	2016.05.01.12.33.24;	author kili;	state Exp;
branches;
next	1.104;
commitid	DH8m0HwSv6Jc9cbK;

1.104
date	2016.03.23.20.09.34;	author kili;	state Exp;
branches;
next	1.103;
commitid	EDuk40uBjyYQAO5o;

1.103
date	2016.02.27.19.21.32;	author kili;	state Exp;
branches;
next	1.102;
commitid	nMv9L0Mt25Ev6c05;

1.102
date	2016.01.17.11.48.18;	author kili;	state Exp;
branches;
next	1.101;
commitid	JByBcSGxd986TWR1;

1.101
date	2015.12.18.22.40.56;	author kili;	state Exp;
branches;
next	1.100;
commitid	vtfCnVyPx9CENmdR;

1.100
date	2015.12.14.14.25.47;	author zhuk;	state Exp;
branches;
next	1.99;
commitid	47OaeH32cHzELJh0;

1.99
date	2015.11.20.07.47.44;	author kili;	state Exp;
branches;
next	1.98;
commitid	cKLS2zlGAOlOrXxQ;

1.98
date	2015.10.11.15.50.49;	author kili;	state Exp;
branches;
next	1.97;
commitid	1yCpUWXvf5LDexNz;

1.97
date	2015.09.13.21.46.41;	author kili;	state Exp;
branches;
next	1.96;
commitid	P14LYdlqJlyjW4rx;

1.96
date	2015.08.14.07.58.25;	author kili;	state Exp;
branches;
next	1.95;
commitid	5HQoKDKjcxOzd8zo;

1.95
date	2015.07.12.22.37.11;	author kili;	state Exp;
branches;
next	1.94;
commitid	yHqScY32f1sBpTFL;

1.94
date	2015.05.18.19.49.11;	author kili;	state Exp;
branches;
next	1.93;
commitid	Vw3HoJQY3Oz8dJiZ;

1.93
date	2015.03.30.21.43.29;	author kili;	state Exp;
branches;
next	1.92;
commitid	Rxa01rR76yTvZmHH;

1.92
date	2015.03.15.10.59.49;	author kili;	state Exp;
branches;
next	1.91;
commitid	2hdV14qrIpCcqBks;

1.91
date	2015.01.07.14.53.01;	author kili;	state Exp;
branches;
next	1.90;
commitid	6r7pPzBUhA881UDo;

1.90
date	2014.12.13.19.02.07;	author kili;	state Exp;
branches;
next	1.89;
commitid	8pt62VjNaJsc5bj5;

1.89
date	2014.12.10.20.51.49;	author zhuk;	state Exp;
branches;
next	1.88;
commitid	9klUKTO5PgLEeOuA;

1.88
date	2014.11.18.18.59.08;	author kili;	state Exp;
branches;
next	1.87;
commitid	mmjQI7Dolk7VgvWJ;

1.87
date	2014.10.01.21.44.48;	author ajacoutot;	state Exp;
branches;
next	1.86;
commitid	l29FqTA3XqZgh0uM;

1.86
date	2014.09.13.16.36.54;	author ajacoutot;	state Exp;
branches;
next	1.85;
commitid	N2TalFGi4jKRwS2u;

1.85
date	2014.08.25.19.19.42;	author ajacoutot;	state Exp;
branches;
next	1.84;
commitid	nTmw0rI1ls38n40G;

1.84
date	2014.08.10.07.56.40;	author ajacoutot;	state Exp;
branches;
next	1.83;
commitid	8OxcSxediNUnddc8;

1.83
date	2014.05.28.19.45.53;	author kili;	state Exp;
branches;
next	1.82;

1.82
date	2014.04.28.16.48.27;	author kili;	state Exp;
branches;
next	1.81;

1.81
date	2014.01.03.13.50.04;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2013.12.17.18.48.25;	author kili;	state Exp;
branches;
next	1.79;

1.79
date	2013.11.01.07.46.58;	author kili;	state Exp;
branches;
next	1.78;

1.78
date	2013.09.14.09.51.59;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2013.08.15.18.40.20;	author kili;	state Exp;
branches;
next	1.76;

1.76
date	2013.06.22.20.16.46;	author kili;	state Exp;
branches;
next	1.75;

1.75
date	2013.06.04.18.41.56;	author naddy;	state Exp;
branches;
next	1.74;

1.74
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2013.03.19.19.58.06;	author kili;	state Exp;
branches;
next	1.72;

1.72
date	2013.03.11.11.37.54;	author espie;	state Exp;
branches;
next	1.71;

1.71
date	2013.01.21.19.08.00;	author kili;	state Exp;
branches;
next	1.70;

1.70
date	2012.11.05.19.32.27;	author kili;	state Exp;
branches;
next	1.69;

1.69
date	2012.10.15.17.44.33;	author kili;	state Exp;
branches;
next	1.68;

1.68
date	2012.09.27.18.45.34;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2012.09.21.14.48.06;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2012.09.02.15.21.17;	author kili;	state Exp;
branches;
next	1.65;

1.65
date	2012.09.01.14.36.58;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2012.08.28.19.13.12;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2012.07.13.15.03.19;	author kili;	state Exp;
branches;
next	1.62;

1.62
date	2012.06.06.18.27.34;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2012.03.27.06.31.05;	author kili;	state Exp;
branches;
next	1.60;

1.60
date	2012.02.27.18.53.58;	author kili;	state Exp;
branches;
next	1.59;

1.59
date	2012.02.21.16.21.42;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2011.12.10.22.04.12;	author kili;	state Exp;
branches;
next	1.57;

1.57
date	2011.11.26.19.45.29;	author kili;	state Exp;
branches;
next	1.56;

1.56
date	2011.11.12.10.50.53;	author robert;	state Exp;
branches;
next	1.55;

1.55
date	2011.09.25.08.01.16;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2011.09.16.11.13.41;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2011.07.08.21.08.46;	author kili;	state Exp;
branches;
next	1.52;

1.52
date	2011.07.08.20.56.51;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2011.07.08.17.41.46;	author jasper;	state Exp;
branches;
next	1.50;

1.50
date	2011.07.07.15.30.49;	author kili;	state Exp;
branches;
next	1.49;

1.49
date	2011.06.17.19.20.25;	author kili;	state Exp;
branches;
next	1.48;

1.48
date	2011.06.04.19.03.19;	author kili;	state Exp;
branches;
next	1.47;

1.47
date	2011.06.02.17.09.32;	author kili;	state Exp;
branches;
next	1.46;

1.46
date	2011.03.20.20.52.01;	author kili;	state Exp;
branches;
next	1.45;

1.45
date	2011.03.03.21.25.38;	author stsp;	state Exp;
branches;
next	1.44;

1.44
date	2010.12.24.14.02.12;	author kili;	state Exp;
branches;
next	1.43;

1.43
date	2010.11.20.09.48.39;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2010.11.18.22.30.04;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2010.11.18.21.27.23;	author kili;	state Exp;
branches;
next	1.40;

1.40
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2010.11.06.10.18.38;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.11.05.13.47.46;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2010.11.05.10.06.44;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.11.05.00.05.15;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2010.10.24.21.32.39;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2010.10.12.07.00.04;	author kili;	state Exp;
branches;
next	1.33;

1.33
date	2010.10.09.08.05.30;	author kili;	state Exp;
branches;
next	1.32;

1.32
date	2010.08.23.10.24.41;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.05.08.17.09.48;	author kili;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2009.11.21.21.57.50;	author kili;	state Exp;
branches
	1.30.2.1;
next	1.29;

1.29
date	2009.10.26.19.23.45;	author kili;	state Exp;
branches;
next	1.28;

1.28
date	2009.10.15.20.43.40;	author kili;	state Exp;
branches;
next	1.27;

1.27
date	2009.10.13.16.20.34;	author kili;	state Exp;
branches;
next	1.26;

1.26
date	2009.10.13.10.19.37;	author kili;	state Exp;
branches;
next	1.25;

1.25
date	2009.08.10.06.34.09;	author kili;	state Exp;
branches;
next	1.24;

1.24
date	2009.05.26.13.05.46;	author ajacoutot;	state Exp;
branches
	1.24.2.1;
next	1.23;

1.23
date	2009.04.22.12.14.15;	author kili;	state Exp;
branches;
next	1.22;

1.22
date	2008.11.19.18.27.16;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2008.10.28.12.59.55;	author kili;	state Exp;
branches;
next	1.20;

1.20
date	2008.07.09.14.45.11;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2008.05.27.08.02.51;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2008.05.26.08.32.57;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2008.05.21.11.52.49;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2008.04.19.07.52.15;	author bernd;	state Exp;
branches;
next	1.15;

1.15
date	2008.01.21.22.52.43;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2008.01.04.17.48.37;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2007.12.07.19.55.58;	author kili;	state Exp;
branches;
next	1.12;

1.12
date	2007.07.31.22.22.01;	author kili;	state Exp;
branches;
next	1.11;

1.11
date	2007.03.26.07.36.46;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2007.03.24.13.21.26;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2007.03.23.17.49.03;	author kurt;	state Exp;
branches;
next	1.8;

1.8
date	2007.02.11.00.56.57;	author steven;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.16.09.35.11;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.21.10.10.01;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2006.10.30.08.28.26;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.10.29.11.03.26;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2006.09.18.11.59.59;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2006.06.18.13.09.44;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.06.18.13.09.44;	author alek;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2007.08.09.17.14.09;	author ajacoutot;	state Exp;
branches;
next	;

1.8.2.1
date	2007.08.02.09.47.32;	author ajacoutot;	state Exp;
branches;
next	;

1.24.2.1
date	2009.11.12.02.14.55;	author william;	state Exp;
branches;
next	1.24.2.2;

1.24.2.2
date	2009.11.23.00.53.23;	author william;	state Exp;
branches;
next	;

1.30.2.1
date	2010.10.17.21.31.19;	author jasper;	state Exp;
branches;
next	;

1.31.2.1
date	2010.10.17.21.32.35;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.122
log
@more WANT_CXX / LIBECXX
@
text
@# $OpenBSD: Makefile,v 1.121 2017/04/10 11:46:33 sthen Exp $

COMMENT-main=	PDF rendering library
COMMENT-qt4=	qt4 interface to PDF rendering library
COMMENT-qt5=	Qt5 interface to PDF rendering library
COMMENT-utils=	PDF conversion tools and utilities

V=		0.52.0
DISTNAME=	poppler-$V
CATEGORIES=	print
PKGNAME-main=	poppler-$V
PKGNAME-utils=	poppler-utils-$V
PKGNAME-qt4=	poppler-qt4-$V
PKGNAME-qt5=	poppler-qt5-$V

EXTRACT_SUFX=	.tar.xz

SHARED_LIBS +=	poppler              43.1     # 66.0
SHARED_LIBS +=	poppler-glib         16.0     # 16.0
SHARED_LIBS +=	poppler-qt4          20.1     # 15.0
SHARED_LIBS +=	poppler-qt5          3.1      # 10.0
SHARED_LIBS +=	poppler-cpp          8.0      # 3.0

HOMEPAGE=	http://poppler.freedesktop.org/

MAINTAINER=	Matthias Kilian <kili@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${HOMEPAGE}

PSEUDO_FLAVORS=no_qt4 no_qt5 bootstrap
# XXX not strictly a bootstrap loop, but on the critical path for libreoffice
FLAVOR?=no_qt4 no_qt5 bootstrap

NOT_FOR_ARCHS-qt4 = arm
NOT_FOR_ARCHS-qt5 = arm

MULTI_PACKAGES=-main -qt4 -qt5 -utils

.include <bsd.port.arch.mk>

cWANTLIB=	expat freetype fontconfig jpeg m pthread tiff z

.if ${BUILD_PACKAGES:M-qt4}
MODULES+=	x11/qt4
.else
CONFIGURE_ARGS+=	--disable-poppler-qt4
.endif

.if ${BUILD_PACKAGES:M-qt5}
MODULES+=	x11/qt5
.else
CONFIGURE_ARGS+=	--disable-poppler-qt5
.endif

BUILD_DEPENDS+= devel/gobject-introspection

RUN_DEPENDS-main= \
		print/poppler-data>=0.4.7

LIB_DEPENDS-main= \
		converters/libiconv \
		devel/gettext \
		devel/glib2 \
		graphics/cairo \
		graphics/lcms2 \
		graphics/openjp2 \
		graphics/png \
		graphics/tiff

LIB_DEPENDS-qt4=${MODQT4_LIB_DEPENDS} \
		print/poppler

LIB_DEPENDS-qt5=${MODQT5_LIB_DEPENDS} \
		print/poppler

LIB_DEPENDS-utils= print/poppler

WANTLIB-main=	${cWANTLIB} Xext ffi gio-2.0 glib-2.0 gmodule-2.0 \
		gobject-2.0 pixman-1 openjp2 X11 Xrender cairo pcre \
		png pthread-stubs xcb xcb-render lcms2 xcb-shm \
		iconv intl ${LIBCXX}

WANTLIB-qt4=    ${cWANTLIB} ${MODQT4_WANTLIB} ICE QtCore QtGui QtXml \
		SM X11 Xext Xi Xinerama Xrender ffi glib-2.0 \
		gobject-2.0 gthread-2.0 iconv intl lcms2 openjp2 \
		png poppler pcre pthread-stubs ${LIBCXX} xcb

WANTLIB-qt5=	${cWANTLIB} $(LIBECXX) \
		GL Qt5Core Qt5Gui Qt5Widgets Qt5Xml X11 X11-xcb \
		Xdamage Xext Xfixes Xxf86vm drm execinfo ffi glapi \
		glib-2.0 gobject-2.0 graphite2 gthread-2.0 harfbuzz \
		iconv icudata icui18n icuuc intl lcms2 openjp2 pcre \
		pcre16 png poppler pthread-stubs xcb xcb-dri2 xcb-glx

WANTLIB-utils=	X11 Xext Xrender c cairo fontconfig lcms2 m pixman-1 \
		png pthread-stubs ${LIBCXX} xcb xcb-render xcb-shm openjp2 \
		poppler z ${cWANTLIB}

CONFIGURE_STYLE=autoconf
AUTOCONF_VERSION=2.69
CONFIGURE_ARGS+=--enable-xpdf-headers \
		--enable-poppler-cpp \
		--enable-utils \
		--enable-zlib \
		--disable-gtk-test \
		--disable-libnss

CONFIGURE_ENV+= CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBJPEG_CFLAGS="-I${LOCALBASE}/include" \
		ac_cv_prog_MOCQT4=${MODQT4_MOC}

USE_GMAKE=	Yes

MAIN_CC=	/usr/bin/cc
MAIN_CXX=	/usr/bin/c++
.if "${USE_CCACHE:L}" == "yes"
MAIN_CC:=	ccache ${MAIN_CC}
MAIN_CXX:=	ccache ${MAIN_CXX}
.endif

post-configure:
	find ${WRKBUILD} -name Makefile \! -path '*/qt5/*' -print0 | xargs -0 \
		perl -pi -e     's,^CC = \S+,override CC = ${MAIN_CC},;' \
		         -e    's,^CPP = \S+,override CPP = ${MAIN_CC},;' \
		         -e    's,^CXX = \S+,override CXX = ${MAIN_CXX},;' \
		         -e 's,^CXXCPP = \S+,override CXXCPP = ${MAIN_CXX},;'

.include <bsd.port.mk>
@


1.121
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2017/03/26 19:51:36 kili Exp $
d91 1
a91 1
WANTLIB-qt5=	${cWANTLIB} estdc++ \
@


1.120
log
@Remove poppler-qt subpackage (qt3 support).

It's not used by anything, totally dead upstream
and just clutters the port.

ok aja@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2017/02/19 20:53:26 kili Exp $
d84 1
a84 1
		iconv intl stdc++
d89 1
a89 1
		png poppler pcre pthread-stubs stdc++ xcb
d99 1
a99 1
		png pthread-stubs stdc++ xcb xcb-render xcb-shm openjp2 \
@


1.119
log
@Update to poppler-0.52.0.

Minor bumps for poppler-qt{4,5} because of symbol additions,
even if they are considered 'private'.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2017/01/17 13:03:30 kili Exp $
a3 1
COMMENT-qt=	qt interface to PDF rendering library
a12 1
PKGNAME-qt=	poppler-qt-$V
d15 2
a16 1
OLDSHIT =	poppler-0.16.7
a19 1
SHARED_LIBS +=	poppler-qt           12.0     # 3.0
a23 2
DISTFILES = ${DISTNAME}.tar.xz ${OLDSHIT}.tar.gz

d33 1
a33 1
PSEUDO_FLAVORS=no_qt no_qt4 no_qt5 bootstrap
d35 1
a35 1
FLAVOR?=no_qt no_qt4 no_qt5 bootstrap
d40 1
a40 1
MULTI_PACKAGES=-main -qt -qt4 -qt5 -utils
a45 6
.if ${BUILD_PACKAGES:M-qt}
MODULES+=	x11/qt3
.else
CONFIGURE_ARGS+=	--disable-poppler-qt
.endif

a72 3
LIB_DEPENDS-qt=	${MODQT3_LIB_DEPENDS} \
		print/poppler

a85 6
WANTLIB-qt=	${cWANTLIB} ${MODQT3_WANTLIB} lcms2 openjp2 poppler png \
		pthread-stubs stdc++ \
		GL ICE SM X11 X11-xcb Xcursor Xdamage Xext Xfixes Xft \
		Xi Xinerama Xmu Xrandr Xrender Xt Xxf86vm drm glapi \
		lcms mng xcb xcb-dri2 xcb-glx

d97 1
a97 1
		
a113 1
		POPPLER_QT_LIBS="-L${LOCALBASE}/lib/qt3 -lqt-mt" \
a123 9

post-extract:
	cd ${WRKDIST} && \
	    for i in poppler-qt-uninstalled.pc.in poppler-qt.pc.cmake \
		poppler-qt.pc.in; do  \
			ln -sf ../${OLDSHIT}/$$i $$i; \
	    done; \
	    ln -sf ../../${OLDSHIT}/m4/qt.m4 m4/qt.m4
	cd ${WRKDIST} && cp -R ../${OLDSHIT}/qt qt
@


1.118
log
@Update to poppler-0.51.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2016/12/27 17:38:25 landry Exp $
d9 1
a9 1
V=		0.51.0
a17 5
REVISION-main=	0
REVISION-qt=	1
REVISION-qt4=	0
REVISION-qt5=	2
REVISION-utils=	0
d22 2
a23 2
SHARED_LIBS +=	poppler-qt4          20.0     # 15.0
SHARED_LIBS +=	poppler-qt5          3.0      # 10.0
@


1.117
log
@Missed REVISION-qt bump in r1.115, WANTLIB-qt changed... and PLIST_DB
complained loudly here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2016/12/25 14:34:39 zhuk Exp $
d9 1
a9 1
V=		0.50.0
d24 1
a24 1
SHARED_LIBS +=	poppler              43.0     # 66.0
d28 1
a28 1
SHARED_LIBS +=	poppler-qt5          2.0      # 9.0
@


1.116
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2016/12/25 13:54:34 zhuk Exp $
d19 1
a19 1
REVISION-qt=	0
@


1.115
log
@Tweak the poppler linking bits, making -lestdc++ come only to those
subpackages where it's really needed.

Relies on the recent libtool from base.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2016/12/17 15:31:57 zhuk Exp $
d21 1
a21 1
REVISION-qt5=	1
@


1.114
log
@poppler 0.50 picks up openjp2 by default, unlike previous versions, which
preferred openjpeg due to some bugs in openjp2.

Tweaking LIB_DEPENDS and WANTLIB entries. More stuff to come with Qt update.

Comitting now to avoid bulk builds breakage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2016/12/17 01:20:10 kili Exp $
d21 1
a21 1
REVISION-qt5=	0
d53 1
a53 1
cWANTLIB=	expat freetype fontconfig jpeg m pthread tiff z stdc++
d102 1
a102 1
		iconv intl
d104 5
a108 2
WANTLIB-qt=	${cWANTLIB} lcms2 openjp2 poppler png pthread-stubs \
		${MODQT3_WANTLIB}
d113 1
a113 1
		png poppler pcre pthread-stubs xcb
d115 1
a115 1
WANTLIB-qt5=	${cWANTLIB} ${MODQT5_WANTLIB} ${MODGCC4_CPPWANTLIB} \
d123 1
a123 1
		png pthread-stubs xcb xcb-render xcb-shm openjp2 \
d138 1
d161 4
a164 4
		perl -pi -e     's,^CC = \S+,CC = ${MAIN_CC},;' \
		         -e    's,^CPP = \S+,CPP = ${MAIN_CC},;' \
		         -e    's,^CXX = \S+,CXX = ${MAIN_CXX},;' \
		         -e 's,^CXXCPP = \S+,CXXCPP = ${MAIN_CXX},;'
@


1.113
log
@aja@@ wants a new poppler, so update to 0.50.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2016/11/23 20:45:00 kili Exp $
d18 5
d84 1
a84 1
		graphics/openjpeg \
d100 1
a100 1
		gobject-2.0 pixman-1 openjpeg X11 Xrender cairo pcre \
d104 1
a104 1
WANTLIB-qt=	${cWANTLIB} lcms2 openjpeg poppler png pthread-stubs \
d109 1
a109 1
		gobject-2.0 gthread-2.0 iconv intl lcms2 openjpeg \
d116 1
a116 1
		iconv icudata icui18n icuuc intl lcms2 openjpeg pcre \
d120 1
a120 1
		png pthread-stubs xcb xcb-render xcb-shm openjpeg \
@


1.112
log
@Update to poppler-0.49.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2016/10/14 07:39:52 kili Exp $
d9 1
a9 1
V=		0.49.0
d19 1
a19 1
SHARED_LIBS +=	poppler              42.0     # 65.0
d22 2
a23 2
SHARED_LIBS +=	poppler-qt4          19.0     # 14.0
SHARED_LIBS +=	poppler-qt5          1.0      # 8.0
@


1.111
log
@Update to poppler-0.48.0.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2016/08/22 21:31:54 kili Exp $
d9 1
a9 1
V=		0.48.0
d19 1
a19 1
SHARED_LIBS +=	poppler              41.0     # 64.0
@


1.110
log
@Update to poppler-0.47.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2016/08/01 18:35:40 kili Exp $
d9 1
a9 1
V=		0.47.0
d19 1
a19 1
SHARED_LIBS +=	poppler              40.0     # 63.0
@


1.109
log
@Update to poppler-0.46.0.

Simplify patch for configure.ac.

Non need to set ac_cv_prog_MOCQT5 or ac_cv_prog_MOCQT52 in
CONFIGURE_ENV (noticed by zhuk@@).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2016/07/09 15:37:46 kili Exp $
d9 1
a9 1
V=		0.46.0
@


1.108
log
@Disable pdfsig to get rid of the nss dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2016/06/19 19:42:26 kili Exp $
d9 1
a9 1
V=		0.45.0
d19 2
a20 4
REVISION=	0

SHARED_LIBS +=	poppler              39.0     # 62.0
SHARED_LIBS +=	poppler-glib         15.0     # 15.0
d22 3
a24 3
SHARED_LIBS +=	poppler-qt4          18.0     # 13.0
SHARED_LIBS +=	poppler-qt5          0.0      # 7.0
SHARED_LIBS +=	poppler-cpp          7.0      # 2.1
d130 1
a130 2
		ac_cv_prog_MOCQT4=${MODQT4_MOC} \
		ac_cv_prog_MOCQT5=${MODQT5_MOC}
@


1.107
log
@Update to poppler-0.45.0.

Major bump to poppler-cpp because
time_type detail::convert_date(const char *date)
had been removed.

Looks ok to aja@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2016/05/27 21:14:31 kili Exp $
d19 3
a21 1
SHARED_LIBS +=	poppler              38.0     # 62.0
d50 1
a50 2
cWANTLIB=	expat freetype fontconfig jpeg m pthread tiff z stdc++ \
		nspr4 nss3 nss3 plc4 plds4 smime3 
d83 1
a83 2
		graphics/tiff \
		security/nss
d86 1
a86 2
		print/poppler \
		security/nss
d89 1
a89 2
		print/poppler \
		security/nss
d92 1
a92 2
		print/poppler \
		security/nss
d94 1
a94 2
LIB_DEPENDS-utils= print/poppler \
		security/nss
d99 1
a99 1
		iconv intl nssutil3 plds4 softokn3 sqlite3 ssl3
d102 1
a102 1
		softokn3 ssl3 ${MODQT3_WANTLIB}
d107 1
a107 1
		png poppler pcre pthread-stubs xcb softokn3 ssl3
d114 1
a114 2
		pcre16 png poppler pthread-stubs xcb xcb-dri2 xcb-glx \
		softokn3 ssl3
d118 1
a118 1
		poppler z ${cWANTLIB} softokn3 ssl3
d126 2
a127 1
		--disable-gtk-test
@


1.106
log
@Update to popppler-0.44.0.

Tested on amd64 with my collection of poisoned pdfs.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2016/05/01 12:33:24 kili Exp $
d9 1
a9 1
V=		0.44.0
d19 1
a19 1
SHARED_LIBS +=	poppler              37.0     # 61.0
d24 1
a24 1
SHARED_LIBS +=	poppler-cpp          6.1      # 2.1
@


1.105
log
@Update to poppler-0.43.0.
Replace gettext module by normal dependencies.
Enable libnss (for pdfsig).

ok aja@@  (with a small correction to my initial diff)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2016/03/23 20:09:34 kili Exp $
d9 1
a9 1
V=		0.43.0
d19 1
a19 1
SHARED_LIBS +=	poppler              36.0     # 60.0
@


1.104
log
@Update to poppler-0.42.0.

Not including pdfsig(1) and related functionaliety in the
libraries for now, because it would pull in a couple of
additional dependencies (via security/nss). I'll send a
separate diff for this in a few days to let people judge
wether it's too much or not.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2016/02/27 19:21:32 kili Exp $
d9 1
a9 1
V=		0.42.0
d19 1
a19 1
SHARED_LIBS +=	poppler              35.0     # 58.0
d48 2
a49 1
cWANTLIB=	expat freetype fontconfig jpeg m pthread tiff z stdc++
a68 2
MODULES+=	devel/gettext

d71 1
a71 1
RUN_DEPENDS-main=${MODGETTEXT_RUN_DEPENDS} \
d74 3
a76 1
LIB_DEPENDS-main=${MODGETTEXT_LIB_DEPENDS} \
d82 2
a83 1
		graphics/tiff
d86 2
a87 1
		print/poppler
d90 2
a91 1
		print/poppler
d94 2
a95 1
		print/poppler
d97 2
a98 1
LIB_DEPENDS-utils= print/poppler
d103 2
a104 1
		${MODGETTEXT_WANTLIB}
d106 2
a107 1
		${MODQT3_WANTLIB}
d111 2
a112 1
		png poppler pcre pthread-stubs xcb
d118 2
a119 1
		pcre16 png poppler pthread-stubs xcb xcb-dri2 xcb-glx
d123 1
a123 1
		poppler z ${cWANTLIB}
d131 1
a131 2
		--disable-gtk-test \
		--disable-libnss
@


1.103
log
@Update to poppler-0.41.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2016/01/17 11:48:18 kili Exp $
d9 1
a9 1
V=		0.41.0
d19 1
a19 1
SHARED_LIBS +=	poppler              34.0     # 58.0
d105 6
a110 5
		GL Qt5Core Qt5Gui Qt5Widgets Qt5Xml X11 X11-xcb Xau \
		Xdamage Xdmcp Xext Xfixes Xxf86vm drm execinfo ffi glapi \
		glib-2.0 gobject-2.0 gthread-2.0 iconv icudata icui18n \
		icuuc intl lcms2 openjpeg pcre pcre16 png poppler \
		pthread-stubs xcb xcb-dri2 xcb-glx
d121 2
a122 1
		--disable-gtk-test
@


1.102
log
@Update to poppler-0.40.0.

Reminder and ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2015/12/18 22:40:56 kili Exp $
d9 1
a9 1
V=		0.40.0
@


1.101
log
@Update to poppler-0.39.0.

Major bump for libpoppler-glib because poppler_orientation_get_type() had
been removed.

ok diff-wise, aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2015/12/14 14:25:47 zhuk Exp $
d9 1
a9 1
V=		0.39.0
@


1.100
log
@Add Qt5 support for poppler.

Tested by kili@@ (maintainer) and sthen@@; also aja@@ tested and okayed
some support patches.

This doesn't fix all "libstdc++ overwrites libestdc++ at runtime" issues,
but at least allows for sthen@@ to proceed. Expect more some ugly tweak
proposals on ports@@ soon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2015/11/20 07:47:44 kili Exp $
d9 1
a9 1
V=		0.38.0
d19 2
a20 2
SHARED_LIBS +=	poppler              33.0     # 57.0
SHARED_LIBS +=	poppler-glib         14.0     # 15.0
@


1.99
log
@Update to poppler-0.38.0.

tests and ok, aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/10/11 15:50:49 kili Exp $
d6 1
d16 1
d23 1
d37 1
a37 1
PSEUDO_FLAVORS=no_qt no_qt4 bootstrap
d39 1
a39 1
FLAVOR?=no_qt no_qt4 bootstrap
d42 1
d44 1
a44 1
MULTI_PACKAGES=-main -qt -qt4 -utils
d62 3
a64 1
# until Qt5 is enabled
d66 1
d89 3
d104 6
d124 3
a126 1
		LIBJPEG_CFLAGS="-I${LOCALBASE}/include"
d130 7
d145 7
@


1.98
log
@Update to poppler-0.37.0.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/09/13 21:46:41 kili Exp $
d8 1
a8 1
V=		0.37.0
d17 1
a17 1
SHARED_LIBS +=	poppler              32.0     # 55.0
d20 1
a20 1
SHARED_LIBS +=	poppler-qt4          18.0     # 12.0
@


1.97
log
@Update to poppler-0.36.0.

Reminded by and ok aja@@ (as usual ;-))
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2015/08/14 07:58:25 kili Exp $
d8 1
a8 1
V=		0.36.0
d17 1
a17 1
SHARED_LIBS +=	poppler              31.0     # 55.0
d20 1
a20 1
SHARED_LIBS +=	poppler-qt4          17.0     # 12.0
@


1.96
log
@Update to poppler-0.35.0.
Reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2015/07/12 22:37:11 kili Exp $
d8 1
a8 1
V=		0.35.0
d17 1
a17 1
SHARED_LIBS +=	poppler              30.0     # 54.0
d20 1
a20 1
SHARED_LIBS +=	poppler-qt4          16.0     # 11.0
@


1.95
log
@Update to poppler-0.34.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2015/05/18 19:49:11 kili Exp $
d8 1
a8 1
V=		0.34.0
d17 5
a21 5
SHARED_LIBS +=  poppler              29.0     # 53.0
SHARED_LIBS +=  poppler-glib         14.0     # 15.0
SHARED_LIBS +=  poppler-qt           12.0     # 3.0
SHARED_LIBS +=  poppler-qt4          15.0     # 10.0
SHARED_LIBS +=  poppler-cpp          6.1      # 2.1
@


1.94
log
@Update to poppler-0.33.0.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2015/03/30 21:43:29 kili Exp $
d8 1
a8 1
V=		0.33.0
d17 1
a17 1
SHARED_LIBS +=  poppler              28.0     # 52.0
@


1.93
log
@Update to poppler-0.32.0.

Testing and ok, aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2015/03/15 10:59:49 kili Exp $
d8 1
a8 1
V=		0.32.0
d17 2
a18 2
SHARED_LIBS +=  poppler              27.0     # 51.0
SHARED_LIBS +=  poppler-glib         13.1     # 14.0
@


1.92
log
@Update to poppler-0.31.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2015/01/07 14:53:01 kili Exp $
d8 1
a8 1
V=		0.31.0
d17 1
a17 1
SHARED_LIBS +=  poppler              26.0     # 50.0
@


1.91
log
@Update to poppler-0.30.0.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/12/13 19:02:07 kili Exp $
d8 1
a8 1
V=		0.30.0
d17 1
a17 1
SHARED_LIBS +=  poppler              25.0     # 49.0
d20 1
a20 1
SHARED_LIBS +=  poppler-qt4          14.0     # 9.0
@


1.90
log
@Update to poppler-0.29.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/12/10 20:51:49 zhuk Exp $
d8 1
a8 1
V=		0.29.0
d17 1
a17 1
SHARED_LIBS +=  poppler              24.0     # 48.0
d21 1
a21 1
SHARED_LIBS +=  poppler-cpp          6.0      # 2.0
@


1.89
log
@Make sure Qt5 is not picked up.

The patch to add new -qt5 subpackage is being worked on, but won't hit CVS
until Qt5 is enabled in builds.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2014/11/18 18:59:08 kili Exp $
d8 1
a8 1
V=		0.28.1
d17 1
a17 1
SHARED_LIBS +=  poppler              23.0     # 47.0
@


1.88
log
@Update to poppler-0.28.1.

reminder by and ok, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2014/10/01 21:44:48 ajacoutot Exp $
d57 3
@


1.87
log
@Update to poppler-0.26.5.

ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/09/13 16:36:54 ajacoutot Exp $
d8 1
a8 1
V=		0.26.5
d17 1
a17 1
SHARED_LIBS +=  poppler              22.0     # 46.0
d20 1
a20 1
SHARED_LIBS +=  poppler-qt4          13.1     # 8.0
@


1.86
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2014/08/25 19:19:42 ajacoutot Exp $
d8 1
a8 1
V=		0.26.4
@


1.85
log
@Update to poppler-0.26.4.

ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/08/10 07:56:40 ajacoutot Exp $
d97 1
a97 2
CONFIGURE_ARGS+= --disable-gtk-doc \
		--enable-xpdf-headers \
a105 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.84
log
@Update to poppler-0.26.3.

input/ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/05/28 19:45:53 kili Exp $
d8 1
a8 1
V=		0.26.3
d63 1
a63 1
		print/poppler-data>=0.4.6p0
@


1.83
log
@Update to poppler-0.26.1.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/04/28 16:48:27 kili Exp $
d8 1
a8 1
V=		0.26.1
d17 5
a21 5
SHARED_LIBS +=	poppler              21.1     # 46.0
SHARED_LIBS +=	poppler-glib         13.1     # 14.0
SHARED_LIBS +=	poppler-qt           12.0     # 3.0
SHARED_LIBS +=	poppler-qt4          13.1     # 8.0
SHARED_LIBS +=	poppler-cpp          6.0      # 2.0
@


1.82
log
@Update to poppler-0.26.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2014/01/03 13:50:04 ajacoutot Exp $
d8 1
a8 1
V=		0.26.0
d17 1
a17 1
SHARED_LIBS +=	poppler              21.0     # 46.0
d87 4
a90 3
WANTLIB-qt4=	${cWANTLIB} ${MODQT4_WANTLIB} ICE QtGui QtXml SM X11 \
		Xext Xi Xinerama Xrender lcms2 openjpeg png poppler \
		pthread-stubs QtCore QtGui QtXml
@


1.81
log
@Bugfix update to poppler-0.24.5.

ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/12/17 18:48:25 kili Exp $
d8 1
a8 1
V=		0.24.5
d17 2
a18 2
SHARED_LIBS +=	poppler              20.0     # 44.0
SHARED_LIBS +=	poppler-glib         13.0     # 14.0
d20 2
a21 2
SHARED_LIBS +=	poppler-qt4          13.0     # 7.0
SHARED_LIBS +=	poppler-cpp          5.0      # 2.0
@


1.80
log
@Update to poppler-0.24.4.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/11/01 07:46:58 kili Exp $
d8 1
a8 1
V=		0.24.4
@


1.79
log
@Update to poppler-0.24.3.


ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/09/14 09:51:59 ajacoutot Exp $
d8 1
a8 1
V=		0.24.3
d17 1
a17 1
SHARED_LIBS +=	poppler              19.0     # 43.0
@


1.78
log
@Update to poppler-0.24.1.
RUN_DEPENDS on poppler-data.

ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/08/15 18:40:20 kili Exp $
d8 1
a8 1
V=		0.24.1
@


1.77
log
@Update to poppler-0.24.

ok ajacoutot@@ (and thanks for testing!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2013/06/22 20:16:46 kili Exp $
d8 1
a8 1
V=		0.24.0
d61 3
@


1.76
log
@Update to poppler-0.22.5.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/06/04 18:41:56 naddy Exp $
d8 1
a8 1
V=		0.22.5
d15 1
a15 1
OLDSHIT = poppler-0.16.7
d17 5
a21 5
SHARED_LIBS +=	poppler              18.0     # 37.0
SHARED_LIBS +=	poppler-glib         12.0     # 14.0
SHARED_LIBS +=	poppler-qt           11.0     # 3.0
SHARED_LIBS +=	poppler-qt4          12.0     # 6.0
SHARED_LIBS +=	poppler-cpp          4.0      # 2.0
d23 1
a23 1
DISTFILES = ${DISTNAME}${EXTRACT_SUFX} ${OLDSHIT}${EXTRACT_SUFX}
@


1.75
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2013/03/21 08:46:35 ajacoutot Exp $
d8 1
a8 1
V=		0.22.2
d17 1
a17 1
SHARED_LIBS +=	poppler              17.0     # 35.0
d76 1
a76 2
LIB_DEPENDS-utils=${MODGETTEXT_LIB_DEPENDS} \
		print/poppler
d78 12
a89 14
WANTLIB-main=	${cWANTLIB} Xext ffi \
		gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 \
		pixman-1 openjpeg \
		X11 Xau Xdmcp Xrender cairo pcre png \
		pthread-stubs xcb xcb-render lcms2 \
		xcb-shm ${MODGETTEXT_WANTLIB}
WANTLIB-qt=	${cWANTLIB} lcms2 openjpeg poppler png ${MODQT3_WANTLIB}
WANTLIB-qt4=	${cWANTLIB} ${MODQT4_WANTLIB} ICE QtGui QtXml SM X11 Xext Xi \
                Xinerama Xrender lcms2 openjpeg png poppler QtCore QtGui QtXml
WANTLIB-utils=	X11 Xau Xdmcp Xext Xrender \
		c cairo expat ffi fontconfig freetype glib-2.0 \
		gobject-2.0 gthread-2.0 jpeg lcms2 m pcre pixman-1 png \
		pthread pthread-stubs stdc++ tiff xcb xcb-render xcb-shm \
		openjpeg poppler z ${cWANTLIB} ${MODGETTEXT_WANTLIB}
@


1.74
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2013/03/19 19:58:06 kili Exp $
d103 1
a103 1
CONFIGURE_ENV+= CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
@


1.73
log
@Update to poppler-0.22.2.

ok aja@@, who also gave it a test with all the gnome stuff (thanks!)

Note that the possible regression in epdfview I mentioned in my mail
to ports@@ wasn't a regression (the same file didn't render correctly
in epdfview with poppler-0.22.0).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/03/11 11:37:54 espie Exp $
a112 1
USE_LIBTOOL=	Yes
@


1.72
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/01/21 19:08:00 kili Exp $
d8 1
a8 1
V=		0.22.0
d17 1
a17 1
SHARED_LIBS +=	poppler              16.0     # 34.0
@


1.71
log
@Update to poppler-0.22.0.

ok ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2012/11/05 19:32:27 kili Exp $
a29 1
PERMIT_PACKAGE_FTP=	Yes
a30 2
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
@


1.70
log
@Let configure properly detect jpeglib.h.

This affects quite some C++ classes, so all shared libs
get a major bump.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2012/10/15 17:44:33 kili Exp $
d8 1
a8 1
V=		0.20.5
a11 1
REVISION-main=	0
a12 1
REVISION-utils=	0
a13 1
REVISION-qt=	0
a14 1
REVISION-qt4=	0
d17 5
a21 5
SHARED_LIBS +=  poppler              15.0     # 28.0
SHARED_LIBS +=  poppler-glib         11.0     # 12.0
SHARED_LIBS +=  poppler-qt           10.0     # 3.0
SHARED_LIBS +=  poppler-qt4          11.0     # 4.0
SHARED_LIBS +=  poppler-cpp          3.0      # 2.0
d82 2
a83 2
WANTLIB-main=	${cWANTLIB} Xext Xfixes ffi \
		glib-2.0 gobject-2.0 gthread-2.0 \
d85 3
a87 3
		X11 Xau Xdamage Xdmcp Xrender cairo pcre png \
		pthread-stubs xcb xcb-render lcms2 GL Xxf86vm \
		drm xcb-shm ${MODGETTEXT_WANTLIB}
d91 2
a92 2
WANTLIB-utils=	GL X11 Xau Xdamage Xdmcp Xext Xfixes Xrender Xxf86vm \
		c cairo drm expat ffi fontconfig freetype glib-2.0 \
@


1.69
log
@Update to poppler-0.20.5.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2012/09/27 18:45:34 ajacoutot Exp $
d12 3
a14 1
PKGNAME-utils= poppler-utils-$V
d16 1
d18 1
d21 5
a25 5
SHARED_LIBS +=  poppler              14.0     # 28.0
SHARED_LIBS +=  poppler-glib         10.0     # 12.0
SHARED_LIBS +=  poppler-qt           9.0      # 3.0
SHARED_LIBS +=  poppler-qt4          10.0      # 4.0
SHARED_LIBS +=  poppler-cpp          2.0      # 2.0
d111 2
a112 1
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.68
log
@Update to poppler-0.20.4.

input from and ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/09/21 14:48:06 ajacoutot Exp $
d8 1
a8 1
V=		0.20.4
@


1.67
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2012/09/02 15:21:17 kili Exp $
d8 1
a8 1
V=		0.20.3
d17 6
a22 5
SHARED_LIBS +=	poppler              13.0
SHARED_LIBS +=  poppler-cpp          2.0
SHARED_LIBS +=	poppler-glib         10.0
SHARED_LIBS +=	poppler-qt           9.0
SHARED_LIBS +=	poppler-qt4          9.0
d47 1
a47 1
cWANTLIB=	expat freetype fontconfig jpeg m tiff z stdc++
d98 1
a98 1
AUTOCONF_VERSION=2.68
@


1.66
log
@Update to poppler-0.20.3.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/09/01 14:36:58 ajacoutot Exp $
d107 6
@


1.65
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2012/08/28 19:13:12 espie Exp $
d8 1
a8 1
V=		0.20.2
d17 1
a17 3
REVISION=	0

SHARED_LIBS +=	poppler              12.0
@


1.64
log
@switch default poppler flavor to no_qt,no_qt4,boostrap, as naddy@@ now
sees bulk builds with a critical path sequentially building qt4, poppler,
libreoffice...

passes a full bulk

agreed with kili@@, aja@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2012/07/13 15:03:19 kili Exp $
d16 2
@


1.63
log
@Update to poppler-0.20.2.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/06/06 18:27:34 ajacoutot Exp $
d36 3
a38 2
PSEUDO_FLAVORS=no_qt no_qt4
FLAVOR?=
@


1.62
log
@Create a poppler-utils subpackage which bundles the same utilities that
xpdf-utils used to ship. The reason is that these are still actively
maintained and expected to be based on poppler by external tools.
While here, remove gcc3 workaround and regen all dependencies.

input from and ok kili@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2012/03/27 06:31:05 kili Exp $
d8 1
a8 1
V=		0.18.4
d17 5
a21 9
REVISION-main=	0
REVISION-qt=	0
REVISION-qt4=	0

SHARED_LIBS +=	poppler              11.0
SHARED_LIBS +=  poppler-cpp          1.0
SHARED_LIBS +=	poppler-glib         9.0
SHARED_LIBS +=	poppler-qt           8.0
SHARED_LIBS +=	poppler-qt4          8.0
d66 1
a66 1
		graphics/lcms \
d84 1
a84 1
		pthread-stubs xcb xcb-render lcms GL Xxf86vm \
d86 1
a86 1
WANTLIB-qt=	${cWANTLIB} lcms openjpeg poppler png ${MODQT3_WANTLIB}
d88 1
a88 1
                Xinerama Xrender lcms openjpeg png poppler QtCore QtGui QtXml
d91 1
a91 1
		gobject-2.0 gthread-2.0 jpeg lcms m pcre pixman-1 png \
@


1.61
log
@Update to poppler-0.18.4.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2012/02/27 18:53:58 kili Exp $
d6 1
d12 3
a14 2
FULLPKGNAME-qt=	poppler-qt-$V
FULLPKGNAME-qt4=poppler-qt4-$V
d17 4
d45 1
a45 1
MULTI_PACKAGES=-main -qt -qt4
a48 1

a56 1

d63 1
a63 9
# XXX g-ir-scanner failure with gcc3
.if ${COMPILER_VERSION:L:Mgcc4*}
PKG_ARGS+= 	-DGCC4=1
BUILD_DEPENDS+=	devel/gobject-introspection
CONFIGURE_ARGS+=--enable-introspection
.else
PKG_ARGS+=	-DGCC4=0
CONFIGURE_ARGS+=--disable-introspection
.endif
d65 1
a65 1
MODULES+=	devel/gettext converters/libiconv
a67 1
		${MODLIBICONV_LIB_DEPENDS} \
a68 1
		devel/libffi \
d76 4
a79 4
		${MODLIBICONV_LIB_DEPENDS} \
		print/poppler \
		graphics/png \
		graphics/tiff
d81 1
a81 2
LIB_DEPENDS-qt4=x11/qt4 \
		${MODGETTEXT_LIB_DEPENDS} \
d84 1
a84 1
WANTLIB-main=	${cWANTLIB} Xext Xfixes c ffi \
d88 1
a88 1
		pthread pthread-stubs xcb xcb-render lcms GL Xxf86vm \
d90 8
a97 6
WANTLIB-qt=	${cWANTLIB} lcms openjpeg poppler png ${MODQT3_WANTLIB} \
		${MODLIBICONV_WANTLIB}
WANTLIB-qt4=	${cWANTLIB} ICE QtCore QtGui QtXml SM X11 Xext Xi \
                Xinerama Xrender lcms \
		openjpeg png poppler \
		QtCore QtGui QtXml
d101 2
a102 1
CONFIGURE_ARGS+= --enable-xpdf-headers \
@


1.60
log
@Get rid of the gtk+2 dependency.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/02/21 16:21:42 ajacoutot Exp $
d7 1
a7 1
V=		0.18.2
a10 1
REVISION-main=	0
@


1.59
log
@CONFIGURE_STYLE autoconf already appends gnu, so no need to explicitely
list it.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/12/10 22:04:12 kili Exp $
d11 1
d74 1
a74 1
		x11/gtk+2 \
d110 2
a111 1
		--enable-zlib
@


1.58
log
@Bugfix update to poppler-0.18.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/11/26 19:45:29 kili Exp $
d104 1
a104 1
CONFIGURE_STYLE=gnu autoconf
@


1.57
log
@Update to poppler-0.18.1.

poppler-qt3 parts done by espie@@ (basically, we still fetch
the old poppler-0.16.7 and patch the qt3 code of it).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/11/12 10:50:53 robert Exp $
d7 1
a7 1
V=		0.18.1
@


1.56
log
@enable poppler-cpp

ok kili@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2011/09/25 08:01:16 espie Exp $
d7 1
a7 1
V=		0.16.7
d13 1
d15 3
a17 7
REVISION-main=	2
REVISION-qt =	0
REVISION-qt4 =	1

SHARED_LIBS +=	poppler              10.0
SHARED_LIBS +=  poppler-cpp          0.0
SHARED_LIBS +=	poppler-glib         8.0
d19 2
a20 1
SHARED_LIBS +=	poppler-qt4          7.0
d44 1
a44 2
cWANTLIB=	expat freetype fontconfig jpeg m z stdc++

d52 1
d74 2
d78 3
a80 1
		textproc/libxml
d83 4
a86 1
		print/poppler
d91 5
a95 5
WANTLIB-main=	${cWANTLIB} Xcursor Xext Xfixes Xi Xinerama Xrandr c ffi gio-2.0 \
		glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 pango-1.0 xml2 \
		pangocairo-1.0 pangoft2-1.0 pixman-1 gdk_pixbuf-2.0 openjpeg \
		X11 Xau Xcomposite Xdamage Xdmcp Xrender cairo pcre png \
		pthread pthread-stubs xcb xcb-render gdk-x11-2.0 lcms GL Xxf86vm \
d97 1
a97 1
WANTLIB-qt=	${cWANTLIB} lcms openjpeg xml2 poppler png ${MODQT3_WANTLIB} \
d99 4
a102 4
WANTLIB-qt4=	${cWANTLIB} ICE QtCore QtGui QtXml SM X11 Xau Xdmcp Xext Xi \
                Xinerama Xrender ffi glib-2.0 gobject-2.0 gthread-2.0 lcms \
		openjpeg pcre png poppler pthread-stubs xcb xml2 \
		QtCore QtGui QtXml ${MODGETTEXT_WANTLIB}
d104 2
a105 1
CONFIGURE_STYLE=gnu
d116 9
@


1.55
log
@use new framework
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/09/16 11:13:41 espie Exp $
d14 1
a14 1
REVISION-main=	1
d16 1
a16 1
REVISION-qt4 =	0
d19 1
d86 1
a86 1
WANTLIB-main=	${cWANTLIB} Xcursor Xext Xfixes Xi Xinerama Xrandr c gio-2.0 \
d95 1
a95 1
                Xinerama Xrender glib-2.0 gobject-2.0 gthread-2.0 lcms \
d101 1
a101 1
		--disable-poppler-cpp \
d105 1
a105 1
CONFIGURE_ENV+= CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng" \
@


1.54
log
@normalize pkgpath
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.53 2011/07/08 21:08:46 kili Exp $
.include <bsd.own.mk>
d38 6
a43 1
MULTI_PACKAGES=-main
d48 1
a48 2
.if empty(FLAVOR:L:Mno_qt)
MULTI_PACKAGES+=-qt
d54 1
a54 6
NOT_FOR_ARCHS-qt4 = arm
.if empty(FLAVOR:L:Mno_qt4)
MULTI_PACKAGES+=-qt4
.endif

.if ${MULTI_PACKAGES:L:M-qt4} && ${MACHINE_ARCH} != "arm"
@


1.53
log
@Kill a space on the left side of my name.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2011/07/08 20:56:51 ajacoutot Exp $
d15 3
a17 1
REVISION-main=	0
@


1.52
log
@Add XXX.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2011/07/08 17:41:46 jasper Exp $
d24 1
a24 1
MAINTAINER=    Matthias Kilian <kili@@openbsd.org>
@


1.51
log
@sub-optimal workaround to enable introspection support. only on gcc4 arches
as there appear to be serious issues with gcc3.

as discussed with and ok aja@@ kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/07/07 15:30:49 kili Exp $
d60 1
@


1.50
log
@Update to poppler-0.16.7.

ok aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/06/17 19:20:25 kili Exp $
d15 2
d60 9
a98 1
		--disable-introspection \
@


1.49
log
@Update to poppler-0.16.6.

ok landry@@, who also threw this into a bulk build (thanks!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/06/04 19:03:19 kili Exp $
d8 1
a8 1
V=		0.16.6
@


1.48
log
@Update to poppler-0.16.5.

Gnome introspection disabled for now (doesn't compile with gcc-3).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/06/02 17:09:32 kili Exp $
d8 1
a8 1
V=		0.16.5
@


1.47
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/03/20 20:52:01 kili Exp $
d8 1
a8 1
V=		0.14.5
a11 1
REVISION-main=	2
d15 4
a18 4
SHARED_LIBS +=	poppler              9.0
SHARED_LIBS +=	poppler-glib         7.0
SHARED_LIBS +=	poppler-qt           7.0
SHARED_LIBS +=	poppler-qt4          6.0
d22 1
a22 1
MAINTAINER=	Matthias Kilian <kili@@openbsd.org>
d88 1
@


1.46
log
@Install some poppler utils (pdftoabw and pdftohtml, but not the
other tools that would conflict with xpdf-utils).

From Alexis Fouilhe, with some minor tweaks (missing bump, additions
to WANTLIB-main) from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/03/03 21:25:38 stsp Exp $
a89 1
		--disable-silent-rules \
@


1.45
log
@Apply upstream commit 37077aa475d2dee81f87daa05297b201eeb99c87.
Fixes a heap overflow and resulting crashes with some PDF documents.

This patch was devised during ports lock.
Upstream has since released poppler-0.16.3 which includes this fix.

ok sthen, "don't wait for me" kili
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/12/24 14:02:12 kili Exp $
d12 1
a12 1
REVISION-main=	1
d43 1
a43 1
MODULES+=	x11/qt3 converters/libiconv
d54 1
a54 1
MODULES+=	x11/qt4 converters/libiconv
d59 1
a59 1
MODULES+=	devel/gettext
d62 1
d74 1
a74 1
WANTLIB-main=	${cWANTLIB} Xcursor Xext Xfixes Xi Xinerama Xrandr gio-2.0 \
d78 1
a78 1
		pthread-stubs xcb xcb-render gdk-x11-2.0 lcms GL Xxf86vm \
d91 1
a91 1
		--disable-utils \
@


1.44
log
@Update to poppler-0.14.5.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/11/20 09:48:39 espie Exp $
d12 1
a12 1
REVISION-main=	0
@


1.43
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/11/18 22:30:04 sthen Exp $
d8 1
a8 1
V=		0.14.4
d16 1
a16 1
SHARED_LIBS +=	poppler              8.0
d93 2
a94 1
CONFIGURE_ENV+= LDFLAGS="-L${LOCALBASE}/lib"
a97 2

CFLAGS+=	-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng
@


1.42
log
@sync WANTLIB-main and bump; ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/11/18 21:27:23 kili Exp $
d62 4
a65 4
		::x11/gtk+2 \
		::graphics/lcms \
		::graphics/openjpeg \
		::textproc/libxml
d68 2
a69 2
		::print/poppler
LIB_DEPENDS-qt4=::x11/qt4 \
d71 1
a71 1
		::print/poppler
@


1.41
log
@Enable poppler-qt4 for powerpc (but not for arm) and clean up some mess.

- Remove arch specific FLAVOR settings for real.
- Don't set CXXFLAGS, it's not needed (and it confused qt3 and qt4).
- Don't pass CXXFLAGS and CFLAGS via CONFIGURE_ENV (not needed, either).

`reads good', landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/11/06 16:07:00 espie Exp $
d12 1
d77 2
a78 2
		pthread-stubs xcb xcb-render xcb-render-util gdk-x11-2.0 lcms \
		${MODGETTEXT_WANTLIB}
@


1.40
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/11/06 10:18:38 espie Exp $
d32 2
a33 1
QT4INC=
a34 1
PSEUDO_FLAVORS=no_qt no_qt4
a35 5
FLAVOR-arm=no_qt4
FLAVOR-powerpc=no_qt4
FLAVOR?=${FLAVOR-${MACHINE_ARCH}}

NOT_FOR_ARCHS-qt4 = arm powerpc
a38 1
CXXFLAGS+=	-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng
a42 1
CXXFLAGS+=	-I${MODQT4_INCDIR}
d47 1
d52 1
a52 1
.if ${MULTI_PACKAGES:L:M-qt4} && ${MACHINE_ARCH} != "arm" && ${MACHINE_ARCH} != "powerpc"
a53 1
CXXFLAGS+=	-I${MODQT3_INCDIR}
d92 1
a92 3
CONFIGURE_ENV+=	CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include ${QT4INC}" \
		CFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
d96 2
@


1.39
log
@convert libiconv to new wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/11/05 13:47:46 espie Exp $
d83 2
a84 1
		pthread-stubs xcb xcb-render xcb-render-util gdk-x11-2.0 lcms
d90 1
a90 1
		QtCore QtGui QtXml
@


1.38
log
@zap old lib depends for qt4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/11/05 10:06:44 espie Exp $
d84 2
a85 1
WANTLIB-qt=	${cWANTLIB} lcms openjpeg xml2 poppler png ${MODQT3_WANTLIB}
@


1.37
log
@convert qt3 to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/11/05 00:05:15 espie Exp $
d75 1
a75 1
LIB_DEPENDS-qt4=QtCore,QtGui,QtXml::x11/qt4 \
d87 2
a88 1
		openjpeg pcre png poppler pthread-stubs xcb xml2
@


1.36
log
@don't ever make PSEUDO_FLAVORS/MULTI_PACKAGES dependent on arch.
Just use NOT_FOR_ARCH-* to not build some stuff somewhere.
That way, dpb says happy.

okay kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/10/24 21:32:39 ajacoutot Exp $
d42 1
a42 1
WANTLIB=	expat freetype fontconfig jpeg m z stdc++
d79 1
a79 1
WANTLIB-main=	${WANTLIB} Xcursor Xext Xfixes Xi Xinerama Xrandr gio-2.0 \
d84 2
a85 2
WANTLIB-qt=	${WANTLIB} lcms openjpeg xml2 poppler png
WANTLIB-qt4=	${WANTLIB} ICE QtCore QtGui QtXml SM X11 Xau Xdmcp Xext Xi \
@


1.35
log
@Remove USE_X11.
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.34 2010/10/12 07:00:04 kili Exp $
d40 2
d56 3
@


1.34
log
@Tiny bugfix update to poppler 0.14.4.

While here, take maintainership.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/10/09 08:05:30 kili Exp $
a94 1
USE_X11=	Yes
@


1.33
log
@Update to poppler-0.14.3.

Major bumps on all shared libs.

Don't build the new poppler-cpp for now (still needs some tweaks).

Note: glitz omitted from WANTLIB on purpose -- according to landry@@ it
will disappear after the upcoming cairo update.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/08/23 10:24:41 ajacoutot Exp $
d7 1
a7 1
V=		0.14.3
d20 2
@


1.32
log
@Fix DEPENDS.
The converters/libiconv MODULE is only needed for the qt and qt4 FLAVORS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/05/08 17:09:48 kili Exp $
d7 1
a7 1
V=		0.12.4
d14 4
a17 8
REVISION-main=	0
REVISION-qt=	0
REVISION-qt4=	0

SHARED_LIBS +=	poppler              7.0
SHARED_LIBS +=	poppler-glib         6.0
SHARED_LIBS +=	poppler-qt           6.0
SHARED_LIBS +=	poppler-qt4          5.0
d37 4
a42 9

# the configure test for qt is highly bogus, so instead, we keep it disabled
# and override the correct variables so that it gets built anyways.

MAKE_FLAGS+=	POPPLER_QT_CXXFLAGS='-pthread -I${MODQT3_INCDIR}' \
		POPPLER_QT_LIBS='-pthread -L${MODQT3_LIBDIR} -lqt-mt' \
		qt_subdir=qt \
		qt_pc_file=poppler-qt.pc

d44 3
d48 1
a50 10
MAKE_FLAGS+=	POPPLER_QT4_CFLAGS='-pthread -I${X11BASE}/include -I${MODQT4_INCDIR}' \
		POPPLER_QT4_LIBS='-pthread -L${MODQT4_LIBDIR} -lQtCore -lQtGui -lQtXml' \
		qt4_subdir=qt4 \
		qt4_pc_file=poppler-qt4.pc \
		poppler_arthur=libpoppler-arthur.la \
		libpoppler_arthur_la_SOURCES="ArthurOutputDev.h ArthurOutputDev.cc" \
		am_libpoppler_arthur_la_OBJECTS=ArthurOutputDev.lo \
		arthur_includes='$$(POPPLER_QT4_CXXFLAGS)' \
		arthur_libs='$$(POPPLER_QT4_LIBS)'

d52 3
a54 1
QT4INC=		-I${MODQT4_INCDIR}
a56 2
WANTLIB=	expat freetype fontconfig jpeg m z stdc++

d68 1
a68 1
		${MODLIBICONV_LIB_DEPENDS} \
d74 1
a74 1
		X11 Xau Xcomposite Xdamage Xdmcp Xrender cairo glitz pcre png \
d76 4
a79 2
WANTLIB-qt=	${WANTLIB} lcms openjpeg xml2 poppler
WANTLIB-qt4=	${WANTLIB} lcms openjpeg xml2 poppler QtCore QtGui QtXml
d82 3
a84 3
CONFIGURE_ARGS= --enable-xpdf-headers \
		--disable-poppler-qt \
		--disable-poppler-qt4 \
d90 1
a90 2
		LDFLAGS="-L${LOCALBASE}/lib" \
		MOCQT4=${MODQT4_MOC}
@


1.31
log
@Update to poppler-0.12.4.

Use the converters/libiconv MODULE (prompted by ajacoutot).

ok ajacoutot@@, edd@@ (except for the patch hunk move bits, but I
really prefer a silent `make update-patches')
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/11/21 21:57:50 kili Exp $
d14 4
d52 1
a52 1
MODULES+=	x11/qt3 
d66 1
a66 1
MODULES+=	x11/qt4
d70 1
a70 1
WANTLIB=	expat freetype fontconfig jpeg m z
d72 1
a72 1
MODULES+=	converters/libiconv devel/gettext
d75 4
a78 4
		gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 \
		lcms::graphics/lcms \
		openjpeg::graphics/openjpeg \
		xml2::textproc/libxml
d81 1
a81 1
		poppler::print/poppler
d84 1
a84 1
		poppler::print/poppler
d87 2
a88 2
		glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pixman-1 \
d90 3
a92 3
		pthread-stubs xcb xcb-render xcb-render-util
WANTLIB-qt=	${WANTLIB} lcms openjpeg xml2
WANTLIB-qt4=	${WANTLIB} lcms openjpeg xml2
@


1.31.2.1
log
@- Security fix for CVE-2010-3702 and CVE-2010-3704.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/05/08 17:09:48 kili Exp $
a10 1
REVISION-main=	0
@


1.30
log
@Security fix (CVE-2009-3607) and bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/10/26 19:23:45 kili Exp $
d7 1
a7 1
V=		0.12.2
d68 1
a68 1
MODULES+=	devel/gettext
d73 1
d75 6
a80 2
LIB_DEPENDS-qt=	${MODQT3_LIB_DEPENDS} poppler::print/poppler
LIB_DEPENDS-qt4=QtCore,QtGui,QtXml::x11/qt4 poppler::print/poppler
d83 2
a84 2
		glib-2.0 gmodule-2.0 gobject-2.0 pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 \
d86 3
a88 3
		pthread-stubs xcb
WANTLIB-qt=	${WANTLIB} iconv lcms xml2
WANTLIB-qt4=	${WANTLIB} iconv lcms xml2
@


1.30.2.1
log
@- Security fix for CVE-2010-3702 and CVE-2010-3704.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/11/21 21:57:50 kili Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp0
@


1.29
log
@Update to poppler-0.12.1.

Contains the xpdf-3.02pl4 diffs and some additional bug fixes.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/10/15 20:43:40 kili Exp $
d7 1
a7 1
V=		0.12.1
d14 1
a14 1
SHARED_LIBS +=	poppler              6.0
@


1.28
log
@Merge security fixes from xpdf.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/10/13 16:20:34 kili Exp $
d7 1
a7 1
V=		0.12.0
d10 1
a10 1
PKGNAME-main=	poppler-$Vp0
@


1.27
log
@Remove stupid comments.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/10/13 10:19:37 kili Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$V
@


1.26
log
@Update to poppler-0.12.0.

Prodded and ok by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/08/10 06:34:09 kili Exp $
d14 4
a17 4
SHARED_LIBS +=	poppler              6.0      # mirdochegal
SHARED_LIBS +=	poppler-glib         6.0      # mirdochegal
SHARED_LIBS +=	poppler-qt           6.0      # mirdochegal
SHARED_LIBS +=	poppler-qt4          5.0      # mirdochegal
@


1.25
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/05/26 13:05:46 ajacoutot Exp $
d7 1
a7 1
V=		0.10.7
d10 1
a10 1
PKGNAME-main=	poppler-$Vp0
d14 4
a17 4
SHARED_LIBS +=	poppler              5.0      # .2.0
SHARED_LIBS +=	poppler-glib         5.0      # .4.0
SHARED_LIBS +=	poppler-qt           5.0      # .2.0
SHARED_LIBS +=	poppler-qt4          4.0      # .4.0
d33 3
a35 1
FLAVOR?=
d72 1
d82 2
a83 2
WANTLIB-qt=	${WANTLIB} iconv xml2
WANTLIB-qt4=	${WANTLIB} iconv xml2
@


1.24
log
@- bugfix update to poppler-0.10.7

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/04/22 12:14:15 kili Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$V
d77 2
a78 1
		X11 Xau Xcomposite Xdamage Xdmcp Xrender cairo glitz pcre png
@


1.24.2.1
log
@Apply xpdf security patches for:

CVE-2009-3603
CVE-2009-3604
CVE-2009-3606
CVE-2009-3608
CVE-2009-3609

from kili@@, thanks!

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/05/26 13:05:46 ajacoutot Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp0
@


1.24.2.2
log
@SECURITY FIX

Resolves CVE-2009-3607

from kili@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.1 2009/11/12 02:14:55 william Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp1
@


1.23
log
@
Security update to 0.10.6

Fixes CVE-2009-0799, CVE-2009-0800, CVE-2009-1179, CVE-2009-1180,
CVE-2009-1181, CVE-2009-1182, CVE-2009-1183, CVE-2009-1187,
CVE-2009-1188 and a couple of other bugs.

Detailed changelog at http://poppler.freedesktop.org/releases.html

Major bumps to all shared libs. I think that only libpoppler.so
needs a a bump, but bumps are cheap and don't hurt, and I may have
missed some changes when reading the diffs.

ok landry@@ (who tested it with epdfview)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/11/19 18:27:16 kili Exp $
d7 1
a7 1
V=		0.10.6
@


1.22
log
@
Add some missing files to PLIST-qt4 (noted by Edd Barrett) and fix
WANTLIB. All pkgnames bumped.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/10/28 12:59:55 kili Exp $
d7 1
a7 1
V=		0.10.0
d10 3
a12 3
PKGNAME-main=	poppler-$Vp0
FULLPKGNAME-qt=	poppler-qt-$Vp0
FULLPKGNAME-qt4=poppler-qt4-$Vp0
d14 4
a17 4
SHARED_LIBS +=	poppler              4.0      # .2.0
SHARED_LIBS +=	poppler-glib         4.0      # .2.0
SHARED_LIBS +=	poppler-qt           4.0      # .2.0
SHARED_LIBS +=	poppler-qt4          3.0      # .2.0
@


1.21
log
@
Update to 0.10.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/07/09 14:45:11 naddy Exp $
d10 3
a12 3
PKGNAME-main=	poppler-$V
FULLPKGNAME-qt=	poppler-qt-$V
FULLPKGNAME-qt4=poppler-qt4-$V
d64 1
a64 1
WANTLIB=	expat freetype fontconfig jpeg m pixman-1 z
d74 1
a74 1
WANTLIB-main=	${WANTLIB} Xcursor Xext Xfixes Xi Xinerama Xrandr \
d76 1
a76 1
		pangoft2-1.0 \
@


1.20
log
@SECURITY:
Fix memory management bug (CVE-2008-295).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/05/27 08:02:51 ajacoutot Exp $
d7 1
a7 1
V=		0.6.2
d10 8
a17 8
PKGNAME-main=	poppler-$Vp4
FULLPKGNAME-qt=	poppler-qt-$Vp0
FULLPKGNAME-qt4=poppler-qt4-$Vp1

SHARED_LIBS +=	poppler              3.0      # .2.0
SHARED_LIBS +=	poppler-glib         3.0      # .2.0
SHARED_LIBS +=	poppler-qt           3.0      # .2.0
SHARED_LIBS +=	poppler-qt4          2.0      # .2.0
d21 1
a21 1
# GPL
d64 1
a64 1
WANTLIB=	expat freetype fontconfig jpeg m z
d90 2
a91 1
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.19
log
@- remove dependency on devhelp for lighter non-gnome ports to avoid a
too big dependency chain

requested by steven@@
discussed with steven@@ espie@@ fgsch@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/05/26 08:32:57 ajacoutot Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp3
@


1.18
log
@- since devhelp files are provided, make it run_depends on devhelp so
that we can actually see them

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/05/21 11:52:49 jasper Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp2
a72 3

RUN_DEPENDS-main=${RUN_DEPENDS} \
		:devhelp-*:x11/gnome/devhelp
@


1.17
log
@able the DRM bits here too, like it was done for xpdf

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/04/19 07:52:15 bernd Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp1
d74 2
@


1.16
log
@Security fix for CVE-2008-1693. From Debian.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/01/21 22:52:43 espie Exp $
d10 1
a10 1
PKGNAME-main=	poppler-$Vp0
@


1.15
log
@fix qt4 plugin compilation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/01/04 17:48:37 espie Exp $
d10 3
a12 3
PKGNAME-main=	poppler-$V
FULLPKGNAME-qt=	poppler-qt-$V
FULLPKGNAME-qt4=poppler-qt4-$Vp0
@


1.14
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/12/07 19:55:58 kili Exp $
d12 1
a12 1
FULLPKGNAME-qt4=poppler-qt4-$V
d29 2
d56 1
d61 1
d89 1
a89 1
CONFIGURE_ENV+=	CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include" \
@


1.13
log
@
SECURITY: Update to poppler 0.6.2 (fixes CVE-2007-3387).

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/07/31 22:22:01 kili Exp $
a87 2

FAKE_FLAGS=	${MAKE_FLAGS} DESTDIR=${WRKINST}
@


1.12
log
@
SECURITY:

CVE-2006-0301 (fixed upstream in 0.4 but not merged into
0.5 before the "unstable" 0.5.9 got the xpdf 3.02 merge).

CVE-2007-0104 (fixed in CVS and in development version by merging
xpdf 3.02, but not in the "stable" version).

CVE-2007-3387 (from xpdf patch).

While here, remove quotes from COMMENT-* and fix WANTLIB-*.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/03/26 07:36:46 kili Exp $
d7 1
a7 1
V=		0.5.4
d10 8
a17 8
PKGNAME-main=	poppler-$Vp1
FULLPKGNAME-qt=	poppler-qt-$Vp1
FULLPKGNAME-qt4=poppler-qt4-$Vp0

SHARED_LIBS +=	poppler              2.0      # .1.0
SHARED_LIBS +=	poppler-glib         2.0      # .1.0
SHARED_LIBS +=	poppler-qt           2.0      # .1.0
SHARED_LIBS +=	poppler-qt4          0.0      # .1.0
d48 1
a48 1
MAKE_FLAGS+=	POPPLER_QT4_CXXFLAGS='-pthread -I${X11BASE}/include -I${MODQT4_INCDIR}' \
d60 1
a60 2
WANTLIB=	X11 Xau Xdmcp Xrender cairo expat freetype fontconfig \
		glitz m png z
d62 5
a69 1
MODULES+=	devel/gettext
a70 2
LIB_DEPENDS-main=${MODGETTEXT_LIB_DEPENDS} \
		gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 
d73 4
a76 1
		pangoft2-1.0 
d85 3
a87 1
CONFIGURE_ENV+=	CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include"
a93 8

# Force installation to avoid PLIST headaches.
.if ${FLAVOR:L:Mno_qt} && ${FLAVOR:L:Mno_qt4}
post-install:
	echo ${PREFIX}
	${INSTALL_DATA} ${WRKSRC}/qt/poppler-page-transition.h \
			${PREFIX}/include/poppler
.endif
@


1.11
log
@
Force the installation of poppler-page-transition.h even when
FLAVOR="no_qt no_qt4".

"sure", espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/03/24 13:21:26 espie Exp $
d3 3
a5 3
COMMENT-main=	"PDF rendering library"
COMMENT-qt=	"qt interface to PDF rendering library"
COMMENT-qt4=	"qt4 interface to PDF rendering library"
d10 3
a12 3
PKGNAME-main=	poppler-$Vp0
FULLPKGNAME-qt=	poppler-qt-$Vp0
FULLPKGNAME-qt4=poppler-qt4-$V
d60 1
a60 1
WANTLIB=	ICE SM X11 Xext Xrender cairo freetype fontconfig \
d70 3
a72 2
WANTLIB-main=	${WANTLIB} glib-2.0 gmodule-2.0 gobject-2.0 \
		pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.10
log
@let poppler build the qt4 plugin as well.
NOTE: this requires a current ports tree to build (mods to qt3.port.mk
and qt4.port.mk)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/03/23 17:49:03 kurt Exp $
d87 8
@


1.9
log
@- update to 0.5.4 (partial update from  Brad <brad at comstyle.com>)
- adjust link order so it can build while installed
w/input, testing and okay bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/02/11 00:56:57 steven Exp $
d5 1
d10 3
a12 2
PKGNAME-main=	poppler-$V
FULLPKGNAME-qt=	poppler-qt-$V
d17 1
d29 1
a29 1
PSEUDO_FLAVORS=no_qt
d39 2
a40 2
MAKE_FLAGS=	POPPLER_QT_CXXFLAGS='-pthread -I${MODQT_INCDIR}' \
		POPPLER_QT_LIBS='-pthread -L${MODQT_LIBDIR} -lqt-mt' \
d44 14
a57 1
MODULES+=	x11/qt3
d63 2
a64 1
LIB_DEPENDS-qt=	${MODQT_LIB_DEPENDS} poppler::print/poppler
d80 1
a80 1
CONFIGURE_ENV=	CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include"
@


1.8
log
@WANTLIB fixes, mostly needed by recent cairo update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/12/16 12:22:34 espie Exp $
d6 1
a6 1
V=		0.5.3
d9 2
a10 2
PKGNAME-main=	poppler-$Vp1
FULLPKGNAME-qt=	poppler-qt-$Vp1
d12 3
a14 3
SHARED_LIBS +=	poppler              1.0      # .1.0
SHARED_LIBS +=	poppler-glib         1.0      # .1.0
SHARED_LIBS +=	poppler-qt           0.0      # .1.0
d44 2
a45 1
WANTLIB=	freetype fontconfig jpeg z 
d53 2
a54 4
WANTLIB-main=	${WANTLIB} ICE SM Xrender png X11 m Xext glitz \
		gmodule-2.0 cairo \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		gobject-2.0 glib-2.0
d63 1
a63 2
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib" \
		CXXFLAGS="${CXXFLAGS} -I${LOCALBASE}/include"
@


1.8.2.1
log
@MFC (original commit kili@@):
- import patches from -current

CVE-2006-0301 (fixed upstream in 0.4 but not merged into 0.5 before the
"unstable" 0.5.9 got the xpdf 3.02 merge)

CVE-2007-0104 (fixed in CVS and in development version by merging xpdf
3.02, but not in the "stable" version)

CVE-2007-3387 (from xpdf patch)

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/02/11 00:56:57 steven Exp $
d9 2
a10 2
PKGNAME-main=	poppler-$Vp2
FULLPKGNAME-qt=	poppler-qt-$Vp2
@


1.7
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/12/16 09:35:11 steven Exp $
d9 1
a9 1
PKGNAME-main=	poppler-$Vp0
d52 1
a52 1
WANTLIB-main=	${WANTLIB} Xrender png X11 m Xext glitz \
@


1.6
log
@bump PKGNAME after plist change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/11/21 10:10:01 espie Exp $
a42 2

BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig
@


1.5
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/10/30 08:28:26 espie Exp $
d10 1
a10 1
FULLPKGNAME-qt=	poppler-qt-$Vp0
@


1.4
log
@fix dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/10/29 11:03:26 espie Exp $
d3 1
a3 1
COMMENT=	"PDF rendering library"
d9 2
a10 1
FULLPKGNAME-qt=	poppler-qt-$V
d27 1
a28 2
SUBPACKAGE?=	

a40 1
.  if !defined(PACKAGING) || defined(PACKAGING) && ${SUBPACKAGE} == "-qt"
a41 4
.  endif
.  if defined(PACKAGING) && ${SUBPACKAGE} == "-qt"
LIB_DEPENDS+=	poppler::print/poppler
.  endif
d44 14
a69 13
WANTLIB+=	freetype fontconfig jpeg z 

.if !defined(PACKAGING) || defined(PACKAGING) && ${SUBPACKAGE} == ""
MODULES+=	devel/gettext
LIB_DEPENDS+=	gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 
WANTLIB+=	Xrender png X11 m Xext glitz \
		gmodule-2.0 cairo \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		gobject-2.0 glib-2.0
.endif

BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig

@


1.3
log
@let poppler compile the qt wrapper stuff, as koffice needs it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/09/18 11:59:59 espie Exp $
d43 2
@


1.2
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/06/18 13:09:44 alek Exp $
d4 1
d6 2
a7 1
DISTNAME=	poppler-0.5.3
d9 5
a13 2
SHARED_LIBS=	poppler 1.0 \
		poppler-glib 1.0
d25 23
d54 1
d58 2
a59 3
MODULES=	devel/gettext
BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 
d61 5
a65 2
WANTLIB=	Xrender png z freetype X11 fontconfig m Xext glitz \
		gmodule-2.0 cairo jpeg \
d68 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d31 1
a31 1
LIB_DEPENDS=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0::x11/gtk+2 
d34 3
a36 3
		gmodule-2.0.0.0 cairo jpeg \
		pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0 \
		gobject-2.0.0.0 glib-2.0.0.0
@


1.1.1.1
log
@Import poppler 0.5.3

Poppler is a fork of the xpdf PDF viewer developed by Derek Noonburg
of Glyph and Cog, LLC.  It provides PDF rendering functionality as a
shared library, and uses modern components from Freedesktop.org such as
fontconfig and cairo to take advantage of modern UNIX desktops.
@
text
@@


1.1.1.1.2.1
log
@MFC (original commit kili@@):
- import patches from -current

CVE-2006-0301 (fixed upstream in 0.4 but not merged into 0.5 before the
"unstable" 0.5.9 got the xpdf 3.02 merge)

CVE-2007-0104 (fixed in CVS and in development version by merging xpdf
3.02, but not in the "stable" version)

CVE-2007-3387 (from xpdf patch)

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/06/18 13:09:44 alek Exp $
a5 1
PKGNAME=	${DISTNAME}p2
@

