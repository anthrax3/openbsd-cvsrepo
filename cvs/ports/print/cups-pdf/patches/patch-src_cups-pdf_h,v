head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.2
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.4.0.20
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.18
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.14
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.16
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.12
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.10
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.10
	OPENBSD_5_0:1.3.0.8
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.6
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.4
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.1.1.0.6
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.4
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	cups_pdf-20061003:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2017.07.22.20.41.10;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	GNzWYdLg107MI76F;

1.4
date	2012.04.11.17.29.50;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.09.08.14.02.46;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.29.12.10.15;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.03.14.21.42;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.03.14.21.42;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to cups-pdf-3.0.1.
@
text
@$OpenBSD: patch-src_cups-pdf_h,v 1.4 2012/04/11 17:29:50 ajacoutot Exp $
Index: src/cups-pdf.h
--- src/cups-pdf.h.orig
+++ src/cups-pdf.h
@@@@ -18,7 +18,7 @@@@
 /  they are reasonable for most systems.			     */
 
 /* location of the configuration file */
-#define CP_CONFIG_PATH "/etc/cups"
+#define CP_CONFIG_PATH "${SYSCONFDIR}/cups"
 
 
 /* --- DO NOT EDIT BELOW THIS LINE --- */
@@@@ -57,9 +57,9 @@@@ struct {
 } configData[] = {
   { "AnonDirName", SEC_CONF|SEC_PPD, { "/var/spool/cups-pdf/ANONYMOUS" } },
   { "AnonUser", SEC_CONF|SEC_PPD, { "nobody" } },
-  { "GhostScript", SEC_CONF|SEC_PPD, { "/usr/bin/gs" } },
+  { "GhostScript", SEC_CONF|SEC_PPD, { "${LOCALBASE}/bin/gs" } },
   { "GSCall", SEC_CONF|SEC_PPD, { "%s -q -dCompatibilityLevel=%s -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\"%s\" -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c .setpdfwrite -f %s" } },
-  { "Grp", SEC_CONF|SEC_PPD, { "lp" } },
+  { "Grp", SEC_CONF|SEC_PPD, { "_cups" } },
   { "GSTmp", SEC_CONF|SEC_PPD, { "TMPDIR=/var/tmp" } },
   { "Log", SEC_CONF|SEC_PPD, { "/var/log/cups" } },
   { "PDFVer", SEC_CONF|SEC_PPD|SEC_LPOPT, { "1.4" } },
@


1.4
log
@Update to cups-pdf-2.6.1.
Use proper SUBST_CMD to not hardcode paths.
By default, save PDFs in the user's HOME.
MESSAGE -> README
@
text
@d1 5
a5 4
$OpenBSD: patch-src_cups-pdf_h,v 1.3 2009/09/08 14:02:46 ajacoutot Exp $
--- src/cups-pdf.h.orig	Tue Oct  4 18:45:10 2011
+++ src/cups-pdf.h	Wed Apr 11 19:16:36 2012
@@@@ -19,7 +19,7 @@@@
d9 2
a10 2
-#define CPCONFIG "/etc/cups/cups-pdf.conf"
+#define CPCONFIG "${SYSCONFDIR}/cups/cups-pdf.conf"
d13 13
a25 13
 
@@@@ -69,9 +69,9 @@@@ static struct {
 static void _set_defaults() {
   snprintf(conf.anondirname,BUFSIZE,"%s","/var/spool/cups-pdf/ANONYMOUS");
   snprintf(conf.anonuser,BUFSIZE,"%s","nobody");
-  snprintf(conf.ghostscript,BUFSIZE,"/usr/bin/gs");
+  snprintf(conf.ghostscript,BUFSIZE,"${LOCALBASE}/bin/gs");
   snprintf(conf.gscall,BUFSIZE,"%s","%s -q -dCompatibilityLevel=%s -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\"%s\" -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c .setpdfwrite -f %s");
-  snprintf(conf.grp,BUFSIZE,"%s","lp");
+  snprintf(conf.grp,BUFSIZE,"%s","_cups");
   snprintf(conf.gstmp,BUFSIZE,"%s","TMPDIR=/var/tmp");
   snprintf(conf.log,BUFSIZE,"%s","/var/log/cups");
   snprintf(conf.pdfver,BUFSIZE,"%s","1.4");
@


1.3
log
@Update to cups-pdf-2.5.0.
Tweak MESSAGE accordingly.
@
text
@d1 13
a13 4
$OpenBSD: patch-src_cups-pdf_h,v 1.2 2008/04/29 12:10:15 bernd Exp $
--- src/cups-pdf.h.orig	Sun Jan 25 20:51:05 2009
+++ src/cups-pdf.h	Fri Sep  4 22:58:56 2009
@@@@ -68,9 +68,9 @@@@ static struct {
d18 1
a18 1
+  snprintf(conf.ghostscript,BUFSIZE,"/usr/local/bin/gs");
@


1.2
log
@Update to cups-pdf-2.4.7 and include the cups-pdf email dispatch script.

With help from ajacoutot@@.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cups-pdf_h,v 1.1.1.1 2006/10/03 14:21:42 mbalmer Exp $
--- src/cups-pdf.h.orig	Sun Mar 23 22:18:55 2008
+++ src/cups-pdf.h	Thu Apr 24 08:15:07 2008
@@@@ -67,9 +67,9 @@@@ static struct {
@


1.1
log
@Initial revision
@
text
@d1 5
a5 5
$OpenBSD$
--- src/cups-pdf.h.orig	Sun May 14 14:51:10 2006
+++ src/cups-pdf.h	Mon May 15 15:17:53 2006
@@@@ -67,9 +67,9 @@@@ struct {
 void _set_defaults() {
d10 1
a10 1
   snprintf(conf.gscall,BUFSIZE,"%s","%s -q -dCompatibilityLevel=%s -dNOPAUSE -dBATCH -dSAFER -sDEVICE=pdfwrite -sOutputFile=\"%s\" -dAutoRotatePages=/PageByPage -dAutoFilterColorImages=false -dColorImageFilter=/FlateEncode -dPDFSETTINGS=/prepress -c save pop -f %s");
d13 1
a13 1
   snprintf(conf.gstmp,BUFSIZE,"%s","/var/tmp");
@


1.1.1.1
log
@cups-pdf is a printing backend for print/cups that, instead of sending your
print output to a real printer, converts it to a PDF file and places it
in the filesystem.
@
text
@@
