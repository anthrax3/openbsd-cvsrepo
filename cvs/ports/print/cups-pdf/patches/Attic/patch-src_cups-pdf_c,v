head	1.5;
access;
symbols
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.4
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.6
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.4
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.6
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.4
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.1.1.0.6
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.4
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	cups_pdf-20061003:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2012.04.11.17.29.50;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2011.03.31.08.25.58;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2009.09.08.14.02.46;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.29.12.10.15;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.03.14.21.42;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.03.14.21.42;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to cups-pdf-2.6.1.
Use proper SUBST_CMD to not hardcode paths.
By default, save PDFs in the user's HOME.
MESSAGE -> README
@
text
@$OpenBSD: patch-src_cups-pdf_c,v 1.4 2011/03/31 08:25:58 jasper Exp $
--- src/cups-pdf.c.orig	Wed Mar 30 10:06:50 2011
+++ src/cups-pdf.c	Wed Mar 30 10:11:01 2011
@@@@ -518,7 +518,7 @@@@ static int preparespoolfile(FILE *fpsrc, char *spoolfi
   }
   else {
     if (conf.label) {
-      strcpy(buffer, title);
+      strlcpy(buffer, title, sizeof(buffer));
       if (conf.label == 2)
         snprintf(title, BUFSIZE, "%s-job_%i", buffer, job);
       else
@


1.4
log
@- update to 2.5.1
- fix homepage
- specify license version
- fix path to gs

from gleydson soares
@
text
@d1 1
a1 1
$OpenBSD: patch-src_cups-pdf_c,v 1.3 2009/09/08 14:02:46 ajacoutot Exp $
@


1.3
log
@Update to cups-pdf-2.5.0.
Tweak MESSAGE accordingly.
@
text
@d1 4
a4 19
$OpenBSD: patch-src_cups-pdf_c,v 1.2 2008/04/29 12:10:15 bernd Exp $
--- src/cups-pdf.c.orig	Fri Sep  4 22:57:29 2009
+++ src/cups-pdf.c	Fri Sep  4 22:58:42 2009
@@@@ -71,11 +71,11 @@@@ static void log_event(short type, char message[], char
     timestring[strlen(timestring)-1]='\0';
 
     if (type == CPERROR) 
-      sprintf(ctype, "ERROR");
+      snprintf(ctype, sizeof(ctype), "ERROR");
     else if (type == CPSTATUS)
-      sprintf(ctype, "STATUS");
+      snprintf(ctype, sizeof(ctype), "STATUS");
     else
-      sprintf(ctype, "DEBUG");
+      snprintf(ctype, sizeof(ctype), "DEBUG");
     if (detail != NULL)  {
       while (detail[strlen(detail)-1] == '\n') 
         detail[strlen(detail)-1]='\0';
@@@@ -507,7 +507,7 @@@@ static int preparespoolfile(FILE *fpsrc, char *spoolfi
d10 3
a12 3
       snprintf(title, BUFSIZE, "job_%i-%s", job, buffer);
     }
     log_event(CPDEBUG, "title successfully retrieved", title);
@


1.2
log
@Update to cups-pdf-2.4.7 and include the cups-pdf email dispatch script.

With help from ajacoutot@@.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_cups-pdf_c,v 1.1.1.1 2006/10/03 14:21:42 mbalmer Exp $
--- src/cups-pdf.c.orig	Sun Mar 23 22:47:57 2008
+++ src/cups-pdf.c	Tue Apr 29 11:52:33 2008
@@@@ -161,11 +161,11 @@@@ static void log_event(short type, char message[], char
d19 1
a19 1
@@@@ -593,7 +593,7 @@@@ static int preparespoolfile(FILE *fpsrc, char *spoolfi
a27 9
@@@@ -807,7 +807,7 @@@@ int main(int argc, char *argv[]) {
     log_event(CPDEBUG, "file mode set for user output", outfile);
     
     if (strlen(conf.postprocessing)) {
-      size=strlen(conf.postprocessing)+strlen(outfile)+strlen(passwd->pw_name)+strlen(argv[2])+3;
+      size=strlen(conf.postprocessing)+strlen(outfile)+strlen(passwd->pw_name)+strlen(argv[2])+4;
       ppcall=calloc(size, sizeof(char));
       if (ppcall == NULL) 
         log_event(CPERROR, "failed to allocate memory for postprocessing (non fatal)", NULL);
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- src/cups-pdf.c.orig	Sun May 14 14:51:17 2006
+++ src/cups-pdf.c	Mon May 15 17:16:40 2006
@@@@ -146,11 +146,11 @@@@ void log_event(char type, char message[4
d19 1
a19 1
@@@@ -568,7 +568,7 @@@@ int preparespoolfile(FILE *fpsrc, char *
d28 9
@


1.1.1.1
log
@cups-pdf is a printing backend for print/cups that, instead of sending your
print output to a real printer, converts it to a PDF file and places it
in the filesystem.
@
text
@@
