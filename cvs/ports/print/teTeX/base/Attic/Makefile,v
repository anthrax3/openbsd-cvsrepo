head	1.48;
access;
symbols
	OPENBSD_4_4:1.47.0.4
	OPENBSD_4_4_BASE:1.47
	OPENBSD_4_3:1.47.0.2
	OPENBSD_4_3_BASE:1.47
	OPENBSD_4_2:1.46.0.2
	OPENBSD_4_2_BASE:1.46
	OPENBSD_4_1:1.44.0.2
	OPENBSD_4_1_BASE:1.44
	OPENBSD_4_0:1.39.0.2
	OPENBSD_4_0_BASE:1.39
	OPENBSD_3_9:1.38.0.2
	OPENBSD_3_9_BASE:1.38
	OPENBSD_3_8:1.35.0.2
	OPENBSD_3_8_BASE:1.35
	OPENBSD_3_7:1.33.0.2
	OPENBSD_3_7_BASE:1.33
	OPENBSD_3_6:1.25.0.6
	OPENBSD_3_6_BASE:1.25
	OPENBSD_3_5:1.25.0.4
	OPENBSD_3_5_BASE:1.25
	OPENBSD_3_4:1.25.0.2
	OPENBSD_3_4_BASE:1.25
	OPENBSD_3_3:1.24.0.2
	OPENBSD_3_3_BASE:1.24
	OPENBSD_3_2:1.20.0.2
	OPENBSD_3_2_BASE:1.20
	OPENBSD_3_1:1.17.0.2
	OPENBSD_3_1_BASE:1.17
	OPENBSD_3_0:1.15.0.2
	OPENBSD_3_0_BASE:1.15
	OPENBSD_2_9_TRACKING_SWITCH:1.13
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.1.1.1.0.2
	OPENBSD_2_6_BASE:1.1.1.1
	teTeX-1_0_6:1.1.1.1
	teTeX:1.1.1;
locks; strict;
comment	@# @;


1.48
date	2008.12.22.15.54.38;	author sturm;	state dead;
branches;
next	1.47;

1.47
date	2007.09.15.21.36.45;	author merdely;	state Exp;
branches;
next	1.46;

1.46
date	2007.04.08.16.33.41;	author sturm;	state Exp;
branches;
next	1.45;

1.45
date	2007.04.01.21.37.49;	author steven;	state Exp;
branches;
next	1.44;

1.44
date	2006.12.13.18.19.02;	author steven;	state Exp;
branches;
next	1.43;

1.43
date	2006.12.12.23.14.13;	author bernd;	state Exp;
branches;
next	1.42;

1.42
date	2006.12.12.12.10.57;	author bernd;	state Exp;
branches;
next	1.41;

1.41
date	2006.11.23.19.31.34;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2006.09.17.22.02.47;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2006.08.03.23.28.11;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2005.12.07.21.04.31;	author bernd;	state Exp;
branches;
next	1.37;

1.37
date	2005.10.26.20.07.29;	author bernd;	state Exp;
branches;
next	1.36;

1.36
date	2005.10.23.18.48.38;	author sturm;	state Exp;
branches;
next	1.35;

1.35
date	2005.04.05.09.18.20;	author espie;	state Exp;
branches
	1.35.2.1;
next	1.34;

1.34
date	2005.03.22.20.48.10;	author sturm;	state Exp;
branches;
next	1.33;

1.33
date	2005.03.09.22.22.20;	author sturm;	state Exp;
branches
	1.33.2.1;
next	1.32;

1.32
date	2005.03.03.20.55.41;	author sturm;	state Exp;
branches;
next	1.31;

1.31
date	2005.02.21.21.36.07;	author sturm;	state Exp;
branches;
next	1.30;

1.30
date	2005.01.27.05.03.27;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2004.12.26.14.01.36;	author sturm;	state Exp;
branches;
next	1.28;

1.28
date	2004.12.25.23.14.29;	author sturm;	state Exp;
branches;
next	1.27;

1.27
date	2004.11.27.14.15.04;	author sturm;	state Exp;
branches;
next	1.26;

1.26
date	2004.10.13.18.09.03;	author sturm;	state Exp;
branches;
next	1.25;

1.25
date	2003.04.04.21.19.23;	author sturm;	state Exp;
branches
	1.25.4.1
	1.25.6.1;
next	1.24;

1.24
date	2003.02.19.12.14.45;	author sturm;	state Exp;
branches;
next	1.23;

1.23
date	2003.02.19.11.42.50;	author sturm;	state Exp;
branches;
next	1.22;

1.22
date	2003.02.18.16.04.49;	author sturm;	state Exp;
branches;
next	1.21;

1.21
date	2002.12.29.19.49.41;	author fgsch;	state Exp;
branches;
next	1.20;

1.20
date	2002.07.19.23.43.11;	author pvalchev;	state Exp;
branches;
next	1.19;

1.19
date	2002.06.09.05.37.07;	author wilfried;	state Exp;
branches;
next	1.18;

1.18
date	2002.05.14.11.49.22;	author fgsch;	state Exp;
branches;
next	1.17;

1.17
date	2002.04.05.22.07.00;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2001.11.15.14.42.07;	author todd;	state Exp;
branches;
next	1.15;

1.15
date	2001.10.06.13.01.23;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2001.09.28.06.02.14;	author pvalchev;	state Exp;
branches;
next	1.13;

1.13
date	2001.05.24.02.28.23;	author kevlo;	state Exp;
branches;
next	1.12;

1.12
date	2001.05.06.03.20.02;	author lebel;	state Exp;
branches;
next	1.11;

1.11
date	2001.05.05.21.42.41;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2001.03.22.22.06.41;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2000.10.09.00.21.14;	author avsm;	state Exp;
branches;
next	1.8;

1.8
date	2000.09.13.14.22.08;	author avsm;	state Exp;
branches;
next	1.7;

1.7
date	2000.06.25.22.23.39;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.24.23.28.31;	author espie;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2000.03.11.00.07.37;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.05.18.30.41;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2000.02.10.20.16.03;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	99.12.01.15.32.57;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	99.08.10.19.09.58;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.08.10.19.09.58;	author espie;	state Exp;
branches;
next	;

1.6.2.1
date	2000.09.15.05.13.17;	author marc;	state Exp;
branches;
next	;

1.25.4.1
date	2004.12.25.23.22.45;	author sturm;	state Exp;
branches;
next	1.25.4.2;

1.25.4.2
date	2005.01.30.08.48.37;	author sturm;	state Exp;
branches;
next	;

1.25.6.1
date	2004.12.25.23.25.38;	author sturm;	state Exp;
branches;
next	1.25.6.2;

1.25.6.2
date	2005.01.30.08.48.57;	author sturm;	state Exp;
branches;
next	;

1.33.2.1
date	2005.12.08.23.00.23;	author sturm;	state Exp;
branches;
next	;

1.35.2.1
date	2005.12.08.23.02.51;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.48
log
@unlinked from builds more than 14 month ago, time to say goodbye
@
text
@# $OpenBSD: Makefile,v 1.47 2007/09/15 21:36:45 merdely Exp $

COMMENT-main=	TeX distribution, executables
COMMENT-fmt=	format files

VERSION=	3.0
DISTNAME=	tetex-base-${VERSION}
PKGNAME-main=	teTeX_base-${VERSION}p9
FULLPKGNAME-fmt=teTeX_base-fmt-${VERSION}p0
CATEGORIES=	print

DISTFILES=	tetex-src-${VERSION}.tar.gz


BUILD_DEPENDS=		:teTeX_texmf->=3.0:print/teTeX/texmf

WANTLIB-main=		c m ncurses stdc++ z
LIB_DEPENDS-main=	png.>=3::graphics/png
RUN_DEPENDS-main=	:teTeX_base-fmt-${VERSION}:print/teTeX/base,-fmt \
			:texi2html->=1.56:textproc/texi2html

WANTLIB-fmt=
LIB_DEPENDS-fmt=
PREFIX-fmt=		/var
RUN_DEPENDS-fmt=	:teTeX_texmf->=3.0:print/teTeX/texmf

CONFIGURE_STYLE=gnu dest

MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/config \
		${WRKSRC}/libs/ncurses \
		${WRKSRC}/texk \
		${WRKSRC}/utils/texinfo

CONFIGURE_ARGS= --disable-multiplatform \
		--without-texinfo \
		--with-system-ncurses \
		--with-system-pnglib \
		--with-pnglib-libdir=${PREFIX}/lib \
		--with-pnglib-include=${PREFIX}/include/libpng \
		--with-system-zlib

FLAVORS=	no_x11
FLAVOR?= 
MULTI_PACKAGES=	-main -fmt

.if ${FLAVOR:L:Mno_x11}
CONFIGURE_ARGS+=--without-x
.  if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=	patch-* gcc-*
.  endif
.else
CONFIGURE_ARGS+=--with-system-t1lib \
		--with-t1lib-libdir=${PREFIX}/lib \
		--with-t1lib-include=${PREFIX}/include \
		--with-xdvi-x-toolkit=xaw
USE_X11=	Yes
USE_LIBTOOL=	Yes
LIBTOOL_FLAGS=	--tag=disable-shared
LIB_DEPENDS-main+=	t1.>=4::devel/t1lib
WANTLIB-main+=		ICE SM X11 Xau Xaw Xdmcp Xext Xmu Xp Xpm Xt
RUN_DEPENDS-main+=	:ghostscript-*:print/ghostscript/gnu
.endif


WRKDIST=	${WRKDIR}/${DISTNAME:S/base/src/}
TETEX_EXDIR=	${PREFIX}/share/examples/teTeX

# find texmf after fake
REGRESS_FLAGS=	DESTDIR="${WRKINST}"

post-configure:
	@@perl -pi -e "s,\@@sysconfdir\@@,${SYSCONFDIR}," \
		${WRKSRC}/texk/kpathsea/texmf.in-teTeX

# need the texmf part visible...
pre-fake:
	${INSTALL_DATA_DIR} ${TEXMF_DIR}
	${INSTALL_DATA_DIR} ${WRKINST}/var/texmf
	lndir ${TRUEPREFIX}/share/texmf-dist ${TEXMF_DIR}
	# mktexlsr is too smart for its own good
	rm ${TEXMF_DIR}/ls-R

post-install:
	@@cp ${PREFIX}/share/texmf/web2c/texmf.cnf \
		${PREFIX}/share/texmf/web2c/texmf.cnf.dist
	${INSTALL_DATA_DIR} ${TETEX_EXDIR}
	${INSTALL_DATA} files/tetex.cfg ${TETEX_EXDIR}/tetex.cfg
	${INSTALL_SCRIPT} files/tetex_setup.sh ${PREFIX}/bin/tetex_setup
	@@perl -i -pe "s#%%SYSCONFDIR%%#${SYSCONFDIR}#;" \
		-e "s#%%PREFIX%%#${TRUEPREFIX}#;" ${PREFIX}/bin/tetex_setup

# need the texmf part visible...
pre-regress: fake

.include <bsd.port.mk>
@


1.47
log
@Remove surrounding quotes in COMMENT/PERMIT_*/ERRORS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/04/08 16:33:41 sturm Exp $
@


1.46
log
@more WANTLIB fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/04/01 21:37:49 steven Exp $
d3 2
a4 2
COMMENT-main=	"TeX distribution, executables"
COMMENT-fmt=	"format files"
@


1.45
log
@USE_LIBTOOL, disable-shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2006/12/13 18:19:02 steven Exp $
d8 1
a8 1
PKGNAME-main=	teTeX_base-${VERSION}p8
d60 1
a60 1
WANTLIB-main+=		ICE SM X11 Xaw Xext Xmu Xp Xpm Xt
@


1.44
log
@read the no_x11 fragment

go ahead bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2006/12/12 23:14:13 bernd Exp $
d8 1
a8 1
PKGNAME-main=	teTeX_base-${VERSION}p7
d57 2
@


1.43
log
@Backout my last change. It was obviously wrong, sorry!

Spotted by steven@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/12/12 12:10:57 bernd Exp $
d8 1
a8 1
PKGNAME-main=	teTeX_base-${VERSION}p6
@


1.42
log
@Add missing @@pkgpath after conversio to new MULTI_PACKAGES.

Spotted by Antti Harri <iku at openbsd dot fi>, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/11/23 19:31:34 espie Exp $
d8 1
a8 1
PKGNAME-main=	teTeX_base-${VERSION}p5
@


1.41
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/09/17 22:02:47 espie Exp $
d8 1
a8 1
PKGNAME-main=	teTeX_base-${VERSION}p4
@


1.40
log
@zap ref to _internal-fake now that it works.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/08/03 23:28:11 espie Exp $
d3 1
a3 1
COMMENT=	"TeX distribution, executables"
d8 1
a8 1
PKGNAME=	teTeX_base-${VERSION}p3
a13 1
WANTLIB=	c m ncurses stdc++ z
d15 11
a25 2
BUILD_DEPENDS=	:teTeX_texmf->=3.0:print/teTeX/texmf
LIB_DEPENDS=	png.>=3::graphics/png
d44 1
a44 2
MULTI_PACKAGES=	-fmt
SUBPACKAGE?=
a55 1
LIB_DEPENDS+=	t1.>=4::devel/t1lib
d57 3
a59 4
WANTLIB+=	ICE SM X11 Xaw Xext Xmu Xp Xpm Xt
.  if defined(PACKAGING) && ${SUBPACKAGE} != "-fmt"
RUN_DEPENDS+=	:ghostscript-*:print/ghostscript/gnu
.  endif
a61 11
.if defined(PACKAGING)
.  if ${SUBPACKAGE} == "-fmt"
WANTLIB=
LIB_DEPENDS=
PREFIX=		/var
RUN_DEPENDS=	:teTeX_texmf->=3.0:print/teTeX/texmf
.  else
RUN_DEPENDS+=	:teTeX_base-fmt-${VERSION}:print/teTeX/base,-fmt \
		:texi2html->=1.56:textproc/texi2html
.  endif
.endif
@


1.39
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/12/07 21:04:31 bernd Exp $
d97 1
a97 1
pre-regress: _internal-fake
@


1.38
log
@Fix several security bugs in the xpdf parts of teTeX.

o iDefense advisories from 2005-12-05
o CAN-2005-3191, CAN-2005-3192, CAN-2005-3193

- JPX Stream Reader Heap Overflow Vulnerability
- DCTStream Baseline Heap Overflow Vulnerability
- DCTStream Progressive Heap Overflow
- StreamPredictor Heap Overflow Vulnerability

Patch provided by xpdf developers.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2005/10/26 20:07:29 bernd Exp $
d17 1
a17 1
LIB_DEPENDS=	png.3::graphics/png
d49 1
a49 1
LIB_DEPENDS+=	t1.4::devel/t1lib
@


1.37
log
@Move MULTI_PACKAGES and SUBPACKAGE so that they are defined before
we use them in a conditional. With this, print-package-signature
works again.

Reported by Andreas Bartelt <obsd at bartula.de>. Thank you.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/10/23 18:48:38 sturm Exp $
d8 1
a8 1
PKGNAME=	teTeX_base-${VERSION}p2
@


1.36
log
@fix dependencies/WANTLIB so that no_x11 really is no_x11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/04/05 09:18:20 espie Exp $
d36 3
a55 3

MULTI_PACKAGES=	-fmt
SUBPACKAGE?=
@


1.35
log
@fix some minor packaging issues:
- make sure the -fmt package name is always defined.
- fix RUN_DEPENDS for new bsd.port.mk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/03/22 20:48:10 sturm Exp $
d8 2
a9 2
PKGNAME=	teTeX_base-${VERSION}p1
FULLPKGNAME-fmt=teTeX_base-fmt-${VERSION}
a16 2
RUN_DEPENDS=	:teTeX_texmf->=3.0:print/teTeX/texmf \
		:texi2html->=1.56:textproc/texi2html
a41 1
WANTLIB+=	ICE SM X11 Xaw Xext Xmu Xp Xpm Xt
d47 3
d51 1
a51 1
USE_X11=	Yes
d59 2
d62 1
d64 2
a65 1
RUN_DEPENDS+=	:teTeX_base-fmt-${VERSION}:print/teTeX/base,-fmt
@


1.35.2.1
log
@MFC:
Fix several security bugs in the xpdf parts of teTeX.

o iDefense advisories from 2005-12-05
o CAN-2005-3191, CAN-2005-3192, CAN-2005-3193

- JPX Stream Reader Heap Overflow Vulnerability
- DCTStream Baseline Heap Overflow Vulnerability
- DCTStream Progressive Heap Overflow
- StreamPredictor Heap Overflow Vulnerability

Patch provided by xpdf developers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/04/05 09:18:20 espie Exp $
d8 1
a8 1
PKGNAME=	teTeX_base-${VERSION}p3
@


1.34
log
@the no_x11 FLAVOR does not compile on sparc64 due to a compiler bug
(at least that's what it looks like), work around this issue until
the problem is fixed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/03/09 22:22:20 sturm Exp $
d8 2
a9 2
PKGNAME=	teTeX_base-${VERSION}p0
PKGNAME-fmt=	teTeX_base-fmt-${VERSION}
a59 1
FULLPKGNAME-fmt=${PKGNAME-fmt}
d61 1
a61 1
RUN_DEPENDS+=	::print/teTeX/base,-fmt
@


1.33
log
@-fmt SUBPACKAGE is independent of FLAVORs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/03/03 20:55:41 sturm Exp $
d40 3
@


1.33.2.1
log
@MFC:
Fix several security bugs in the xpdf parts of teTeX.

o iDefense advisories from 2005-12-05
o CAN-2005-3191, CAN-2005-3192, CAN-2005-3193

- JPX Stream Reader Heap Overflow Vulnerability
- DCTStream Baseline Heap Overflow Vulnerability
- DCTStream Progressive Heap Overflow
- StreamPredictor Heap Overflow Vulnerability

Patch provided by xpdf developers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/03/09 22:22:20 sturm Exp $
d8 1
a8 1
PKGNAME=	teTeX_base-${VERSION}p3
@


1.32
log
@do not generate a few MB of format files at pkg_add, but instead put
them into a SUBPACKAGE, noticed by espie@@

fix a braino in patch-Makefile_in
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/02/21 21:36:07 sturm Exp $
d57 1
@


1.31
log
@update to tetex-3.0, see included ChangeLog for details
the texmf-doc SUBPACKAGE is not distributed via ftp due to size constraints
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/01/27 05:03:27 brad Exp $
d4 1
d8 2
a9 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}
d49 11
@


1.30
log
@SECURITY:
Fix a buffer overflow due to insufficient bounds checking while
processing a PDF file that provides malicious values in the /Encrypt
/Length tag.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/12/26 14:01:36 sturm Exp $
d5 1
a5 1
VERSION=	2.0.2
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p3
d12 4
a15 2
BUILD_DEPENDS=	:teTeX_texmf->=2.0:print/teTeX/texmf
RUN_DEPENDS=	:teTeX_texmf->=2.0:print/teTeX/texmf \
a21 1
		${WRKSRC}/libs/libwww/config \
d39 1
d42 2
a43 1
		--with-t1lib-include=${PREFIX}/include
d56 2
a57 2
	@@find ${WRKBUILD} -name Makefile -exec perl -i -pe \
	    's#^(texmf\s*\=\s*)${PREFIX}#$$1\$${${DESTDIRNAME}}${PREFIX}#' {} \;
d62 2
a63 1
	lndir ${TRUEPREFIX}/share/texmf ${TEXMF_DIR}
d68 1
a68 1
	@@mv ${PREFIX}/share/texmf/web2c/texmf.cnf \
d77 1
a77 1
pre-regress: fake
@


1.29
log
@teTeX_base now owns share/texmf-local in order to allow for clean
pkg deletes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/12/25 23:14:29 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p2
@


1.28
log
@SECURITY FIX

fix included xpdf, for details see
http://www.idefense.com/application/poi/display?id=172&type=vulnerabilities&flashstatus=false
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/11/27 14:15:04 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p1
@


1.27
log
@SECURITY FIX for CAN-2004-0888 (integer overflows in included xpdf)
bump PKGNAME

from freebsd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/10/13 18:09:03 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p0
@


1.26
log
@use @@sample instead of INSTALL/DEINSTALL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/04/04 21:19:23 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}
@


1.25
log
@update to tetex 2.0.2

- mainly bugfixes and some updates of styles and pdftex(1.10b)
- this version of the port includes a simplified setup so that
  metafont mode, papersize and dvips printcmd can be configured
  persistently in ${SYSCONFDIR}/tetex.cfg
- remove a4 FLAVOR, use tetex.cfg instead
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/02/19 12:14:45 sturm Exp $
d64 2
@


1.25.6.1
log
@pull in security fixes for included xpdf from -current
fixes CAN-2004-0888 and CAN-2004-1125
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/04/04 21:19:23 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p1
@


1.25.6.2
log
@MFC:

SECURITY:
Fix a buffer overflow due to insufficient bounds checking while
processing a PDF file that provides malicious values in the /Encrypt
/Length tag.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25.6.1 2004/12/25 23:25:38 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p2
@


1.25.4.1
log
@pull in security fixes for included xpdf from -current
fixes CAN-2004-0888 and CAN-2004-1125
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2003/04/04 21:19:23 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p1
@


1.25.4.2
log
@MFC:

SECURITY:
Fix a buffer overflow due to insufficient bounds checking while
processing a PDF file that provides malicious values in the /Encrypt
/Length tag.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25.4.1 2004/12/25 23:22:45 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p2
@


1.24
log
@Bump PKGNAME for real by moving PKGNAME from Makefile.inc to both
Makefiles.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2003/02/19 11:42:50 sturm Exp $
d5 1
a5 1
VERSION=	2.0.1
d7 1
a7 1
PKGNAME=	${DISTNAME:S/tetex-/teTeX_/}p0
d33 1
a33 1
FLAVORS=	a4 no_x11
a36 5
.	if ${FLAVOR:L:Ma4}
CONFIGURE_ARGS+=--enable-a4
.	else
CONFIGURE_ARGS+=--disable-a4
.	endif
d42 1
a43 7
.	if ${FLAVOR:L:Ma4}
CONFIGURE_ARGS+=--enable-a4
RUN_DEPENDS+=	:ghostscript-*:print/ghostscript/gnu,a4
.	else
CONFIGURE_ARGS+=--disable-a4
RUN_DEPENDS+=	:ghostscript-*:print/ghostscript/gnu
.	endif
d47 1
d62 7
@


1.23
log
@Move xdvi.cfg to PFRAG.no-no_x11, this fixes a packaging problem on sparc
when FLAVOR=no_x11 and there is no X11 installed. It's more logical this
way, too.

Bump PKGNAME.

Thanks to Bruno Rohee for reporting the problem!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2003/02/18 16:04:49 sturm Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
@


1.22
log
@update to teTeX 2.0.1

The long awaited update:
- lots of updates to current packages
- lots of bugfixes
- lots of new packages
- cleanup of licenses, it's all free now (GPL, LPPL, ...)

see ${PREFIX}/share/texmf/ChangeLog for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/07/19 23:43:11 pvalchev Exp $
d7 1
@


1.21
log
@yet more NEED_VERSION removal.
@
text
@d5 26
a30 16
PKGNAME=	teTeX_base-1.0.7
CATEGORIES=	print/teTeX
DIST_SUBDIR=	teTeX
MASTER_SITES=	${MASTER_SITE_TEX_CTAN:=systems/unix/teTeX/1.0/distrib/sources/}
#${MASTER_SITE_TEX_CTAN}/biblio/bibtex/8-bit/bt371src.zip

DISTFILES=	${TETEX_SRC} 
WRKDIST=	${WRKDIR}/teTeX-1.0

HOMEPAGE=	http://www.tug.org/tetex/
MAINTAINER=	Marc Espie <espie@@openbsd.org>, Anil Madhavapeddy <avsm@@openbsd.org>

PERMIT_DISTFILES_CDROM=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_FTP=	Yes
d32 1
a32 1
FLAVORS= no_x11
a33 18

TETEX_SRC=teTeX-src-1.0.7.tar.gz

RUN_DEPENDS=:teTeX_texmf-1.0.*:print/teTeX/texmf
RUN_DEPENDS+=:texi2html->=1.56:textproc/texi2html

BUILD_DEPENDS=:teTeX_texmf-1.0.*:print/teTeX/texmf
LIB_DEPENDS= png.2::graphics/png 

PNGDIR=${PREFIX}

CONFIGURE_STYLE=gnu
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/texk ${WRKSRC}/config ${WRKSRC}/libs/ncurses ${WRKSRC}/texinfo ${WRKSRC}
CONFIGURE_ARGS= --disable-multiplatform --without-texinfo \
	--with-system-ncurses --with-system-zlib --with-system-pnglib \
	--with-pnglib-libdir=${PNGDIR}/lib --with-pnglib-include=${PNGDIR}/include/libpng
CONFIGURE_ENV=YACC=yacc

d35 6
a40 1
CONFIGURE_ARGS+= --without-x11
d42 12
a53 2
LIB_DEPENDS+= Xaw3d.6.1::x11/Xaw3d
USE_X11= Yes
d56 5
a60 2
# TeTeX configure resists having --prefix=${DESTDIR}/usr/local, so do the
# change after the fact.
d62 2
a63 8
	cd ${WRKBUILD} && find . -name Makefile -print | PREFIX=${PREFIX} \
		xargs perl -pi.bak ${FILESDIR}/fix-Makefiles
.if ${MACHINE_ARCH} == "alpha"
	# work around internal compiler error in gcc 2.95.3
	perl -pi -e 's|(\$$\(CC\) \$$\(CFLAGS_NORMAL\) )(-c \$$\(srcdir\)/softscroll.c)|$$1-O0 $$2|;' ${WRKBUILD}/libs/ncurses/ncurses/Makefile
.endif
	cd ${WRKBUILD} && find . -name Makefile -print | \
		while read i; do touch -r $$i.bak $$i; done
d67 4
a70 5
	${INSTALL_DATA_DIR} ${PREFIX}/share/texmf
	lndir ${TRUEPREFIX}/share/texmf ${PREFIX}/share/texmf
	#	mktexlsr is too smart for its own good
	rm ${PREFIX}/share/texmf/ls-R
	cp ${TRUEPREFIX}/share/texmf/ls-R ${PREFIX}/share/texmf/ls-R
d72 2
a73 2
INSTALL_INFO=/usr/bin/install-info
SEPARATE_BUILD=concurrent
@


1.20
log
@new png header path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2002/06/09 05:37:07 wilfried Exp $
a6 1
NEED_VERSION=	1.528
@


1.19
log
@add specifier to RUN_DEPENDS and BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2002/05/14 11:49:22 fgsch Exp $
d40 1
a40 1
	--with-pnglib-libdir=${PNGDIR}/lib --with-pnglib-include=${PNGDIR}/include
@


1.18
log
@kill MASTER_SITE_SUBDIR and bump NEED_VERSIOn.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2002/04/05 22:07:00 naddy Exp $
d31 1
a31 1
BUILD_DEPENDS=::print/teTeX/texmf
@


1.17
log
@Add workaround for internal compiler error on alpha.
@
text
@d1 1
a1 3
# Whom:			Angelos D. Keromytis
#
# $OpenBSD: Makefile,v 1.16 2001/11/15 14:42:07 todd Exp $
d7 1
a7 1
NEED_VERSION=	1.402
d9 1
a9 1
MASTER_SITES=	${MASTER_SITE_TEX_CTAN}
a11 1
MASTER_SITE_SUBDIR=	systems/unix/teTeX/1.0/distrib/sources
@


1.16
log
@homepage update, ok espie@@
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.15 2001/10/06 13:01:23 espie Exp $
d58 4
@


1.15
log
@remove conflict: don't install tetex_base texi2html, since it's now
older than the texi2html port.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.14 2001/09/28 06:02:14 pvalchev Exp $
d18 1
a18 1
HOMEPAGE=	http://tug.cs.umb.edu/tetex/
@


1.14
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.13 2001/05/24 02:28:23 kevlo Exp $
d12 2
d31 4
a34 2
RUN_DEPENDS=${PREFIX}/share/texmf/ls-R:teTeX_texmf-1.0.*:print/teTeX/texmf
BUILD_DEPENDS=${PREFIX}/share/texmf/ls-R::print/teTeX/texmf
@


1.13
log
@Bump major rev in png dependeny entries after upgrade of png:
png.1 -> png.2
--
Ok'd by: brad@@
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.12 2001/05/06 03:20:02 lebel Exp $
d36 1
@


1.12
log
@print: integrate COMMENT, bump NEED_VERSION.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.11 2001/05/05 21:42:41 espie Exp $
d31 1
a31 1
LIB_DEPENDS= png.1::graphics/png 
@


1.11
log
@Hopefully, teTeX_base doesn't need updating each time teTeX_texmf does.
@
text
@d3 3
a5 1
# $OpenBSD: Makefile,v 1.10 2001/03/22 22:06:41 brad Exp $
d9 1
a9 1
NEED_VERSION= 	1.330
@


1.10
log
@- mkdir -> ${INSTALL_DATA_DIR}
- kill off FreeBSD-ism (NOPORTDOCS knob)
--
Patch from: Pete Fritchman <petef@@databits.net>
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.9 2000/10/09 00:21:14 avsm Exp $
d27 1
a27 1
RUN_DEPENDS=${PREFIX}/share/texmf/ls-R::print/teTeX/texmf
@


1.9
log
@add espie and my real names to MAINTAINER (comma separated)
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.8 2000/09/13 14:22:08 avsm Exp $
d56 1
a56 1
	mkdir -p ${PREFIX}/share/texmf
@


1.8
log
@- add a no_x11 flavour
- MAINTAINER is now both espie@@ and avsm@@
- use CONFIGURE_STYLE and remove deprecated GNU_CONFIGURE
- remove redundant FAKE=yes
- up the default limits for tex considerably.  This may be too
  much according to espie@@, but we will down them later
- bump NEED_VERSION 1.218 -> 1.330
- add HOMEPAGE

ok'ed by espie@@
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.7 2000/06/25 22:23:39 marc Exp $
d15 1
a15 1
MAINTAINER=	espie@@openbsd.org avsm@@openbsd.org
@


1.7
log
@png dependency fix; pointed out by jabley@@automagic.org
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.6 2000/03/24 23:28:31 espie Exp $
d7 1
a7 1
NEED_VERSION=	 1.230
d12 4
a15 1
WRKDIST=${WRKDIR}/teTeX-1.0
d22 3
a27 1

d29 1
a29 3

LIB_DEPENDS=png.1::graphics/png \
	Xaw3d.6.1::x11/Xaw3d
d33 2
a34 4
GNU_CONFIGURE=Yes
FAKE=	Yes

CONFIGURE_ARGS+=--disable-multiplatform --without-texinfo \
d36 1
a36 1
	--with-pnglib-libdir=${PNGDIR}/lib --with-pnglib-include=${PNGDIR}/include 
d39 7
d62 1
a62 1
INSTALL_INFO=	/usr/bin/install-info
@


1.6
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.5 2000/03/11 00:07:37 espie Exp $
d25 1
a25 1
LIB_DEPENDS=png.1.3::graphics/png \
@


1.6.2.1
log
@bring print as of cut-over date into 2.7 branch
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.7 2000/06/25 22:23:39 marc Exp $
d25 1
a25 1
LIB_DEPENDS=png.1::graphics/png \
@


1.5
log
@texmf 1.0.2
tetex 1.0.7

Fake, some heavy tweaking needed, but it works.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.4 2000/03/05 18:30:41 espie Exp $
d7 1
a7 1
NEED_VERSION=	1.226
d21 1
a21 1
RUN_DEPENDS=${PREFIX}/share/texmf/ls-R:print/teTeX/texmf
d23 1
a23 1
BUILD_DEPENDS=${PREFIX}/share/texmf/ls-R:print/teTeX/texmf
d25 2
a26 2
LIB_DEPENDS=png.1.3:graphics/png \
	Xaw3d.6.1:x11/Xaw3d
@


1.4
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.3 2000/02/10 20:16:03 espie Exp $
d5 1
a5 1
PKGNAME=	teTeX_base-1.0.6
d7 1
a7 1
NEED_VERSION=	1.223
d14 4
a17 1
TETEX_SRC=teTeX-src-1.0.6.tar.gz
d19 1
a19 1
RUN_DEPENDS=${PREFIX}/share/texmf/ls-R:${PORTSDIR}/print/teTeX/texmf
d21 3
a23 1
BUILD_DEPENDS=${PREFIX}/share/texmf/ls-R:${PORTSDIR}/print/teTeX/texmf
d30 4
a33 2
GNU_CONFIGURE=yes
CONFIGURE_ARGS=--disable-multiplatform --without-texinfo \
d37 16
@


1.3
log
@Distfile changed without any version change.
WRKDIST, deprecated variables.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.2 1999/12/01 15:32:57 espie Exp $
d7 1
d20 2
a21 2
LIB_DEPENDS=png.1.3:${PORTSDIR}/graphics/png \
	Xaw3d.6.1:${PORTSDIR}/x11/Xaw3d
@


1.2
log
@Full CATEGORY.
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.1.1.1 1999/08/10 19:09:58 espie Exp $
d11 1
a11 1
WRKSRC=${WRKDIR}/teTeX-1.0
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
# $OpenBSD: Makefile,v 1.3 1999/07/14 20:29:39 angelos Exp $
d6 1
a6 1
CATEGORIES=	print
@


1.1.1.1
log
@Port of teTeX 1.0.6, base archive.
(first try at removing the 2 level limitation of the ports tree)
@
text
@@
