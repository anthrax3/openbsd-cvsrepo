head	1.17;
access;
symbols
	OPENBSD_2_9:1.13.0.2
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	espie:1.1.1.1
	ALADDIN_6_0:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2001.07.03.15.41.08;	author espie;	state dead;
branches;
next	1.16;

1.16
date	2001.06.20.01.43.31;	author pvalchev;	state Exp;
branches;
next	1.15;

1.15
date	2001.05.24.02.28.12;	author kevlo;	state Exp;
branches;
next	1.14;

1.14
date	2001.05.05.21.05.10;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2001.04.13.17.01.03;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2001.04.13.16.44.26;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2001.04.13.16.35.29;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2001.01.11.00.21.14;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2000.10.22.13.26.51;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2000.10.16.17.50.14;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.06.25.22.40.14;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2000.05.31.13.01.09;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.30.21.09.55;	author espie;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2000.03.24.23.28.30;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.24.17.57.02;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.03.19.00.24.19;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.07.01.37.36;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.03.07.01.37.36;	author espie;	state Exp;
branches;
next	;

1.5.2.1
date	2000.09.15.05.13.08;	author marc;	state Exp;
branches;
next	;


desc
@@


1.17
log
@Say goodbye to aladdin ghostscript. It's now called afpl ghostscript,
and the port was only kept alive in expectance of a new gnu ghostscript
@
text
@# $OpenBSD: Makefile,v 1.16 2001/06/20 01:43:31 pvalchev Exp $

COMMENT="AFPL PostScript interpreter"

VERSION=	6.50
DISTNAME=	ghostscript-${VERSION}
CATEGORIES=	print lang
NEED_VERSION=	1.395

DIR=		aladdin/gs${VERSION:S/.//}
MASTER_SITES=	${GS_SITES}
MASTER_SITES1= ${PDF_SITES}

HOMEPAGE=	http://www.cs.wisc.edu/~ghost/

MASTER_SITE_SUBDIR=     ghostscript
DISTFILES=	${GS_SOURCES} ${GS_FONTS_STD} pdf_sec.ps:1

SUBST_VARS=		OSREV	VERSION
DIST_SUBDIR=	gs

# Aladdin license 
# License: COPY GPL BSD
# Aladdin ghostscript wants a fee for redistribution
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	Yes


MAINTAINER=	ports@@openbsd.org

JPEGDIR=graphics/jpeg
PNGDIR=graphics/png

BUILD_DEPENDS=	/nonexistent::${JPEGDIR}:patch \
		/nonexistent::${PNGDIR}:patch

LIB_DEPENDS=	png.2::${PNGDIR}

EXTRACT_ONLY=	${GS_SOURCES}

WRKDIST=	${WRKDIR}/gs${VERSION}
WRKSRC=		${WRKDIST}/src
WRKBUILD=	${WRKDIST}
BASE_FLAGS=	INSTALL_PROGRAM='${INSTALL_SCRIPT}' \
		INSTALL_DATA='${INSTALL_DATA}' \
		SHARE_LIBPNG=1 \
		SHARE_ZLIB=1 \
		CFLAGS_STANDARD='${CFLAGS}' \
		XLDFLAGS=-L${PREFIX}/lib \
		XINCLUDE=-I${X11BASE}/include \
		XLIBS='Xt SM ICE Xext X11' \
		XLIBDIRS=-L${X11BASE}/lib \
		GLOBJDIR=./objects \
		GLGENDIR=./objects \
		PSOBJDIR=./objects \
		PSGENDIR=./objects \
		STDLIBS='-lc_r -lm' 

PDFDIR=share/ghostscript/${VERSION}/lib

BASE_FLAGS+=	DEVICE_DEVS='\
$$(DD)x11.dev $$(DD)x11alpha.dev $$(DD)x11cmyk.dev $$(DD)x11cmyk2.dev \
$$(DD)x11cmyk4.dev $$(DD)x11cmyk8.dev $$(DD)x11gray2.dev \
$$(DD)x11gray4.dev $$(DD)x11mono.dev $$(DD)cljet5.dev $$(DD)deskjet.dev \
$$(DD)djet500.dev $$(DD)laserjet.dev $$(DD)ljet2p.dev $$(DD)ljet3.dev \
$$(DD)ljet3d.dev $$(DD)ljet4.dev $$(DD)ljetplus.dev $$(DD)lj5mono.dev \
$$(DD)lj5gray.dev $$(DD)lp2563.dev $$(DD)oce9050.dev $$(DD)faxg3.dev \
$$(DD)faxg32d.dev $$(DD)faxg4.dev $$(DD)tiffcrle.dev $$(DD)tiffg3.dev \
$$(DD)tiffg32d.dev $$(DD)tiffg4.dev $$(DD)epswrite.dev $$(DD)pdfwrite.dev \
$$(DD)pswrite.dev $$(DD)pxlmono.dev $$(DD)pxlcolor.dev $$(DD)bit.dev \
$$(DD)bitrgb.dev $$(DD)bitcmyk.dev $$(DD)bmpmono.dev $$(DD)bmp16.dev \
$$(DD)bmp256.dev $$(DD)bmp16m.dev $$(DD)cgmmono.dev $$(DD)cgm8.dev \
$$(DD)cgm24.dev $$(DD)jpeg.dev $$(DD)jpeggray.dev $$(DD)miff24.dev \
$$(DD)pcxmono.dev $$(DD)pcxgray.dev $$(DD)pcx16.dev $$(DD)pcx256.dev \
$$(DD)pcx24b.dev $$(DD)pcxcmyk.dev $$(DD)pbm.dev $$(DD)pbmraw.dev \
$$(DD)pgm.dev $$(DD)pgmraw.dev $$(DD)pgnm.dev $$(DD)pgnmraw.dev \
$$(DD)pnm.dev $$(DD)pnmraw.dev $$(DD)ppm.dev $$(DD)ppmraw.dev \
$$(DD)pkm.dev $$(DD)pkmraw.dev $$(DD)plan9bm.dev $$(DD)pngmono.dev \
$$(DD)pnggray.dev $$(DD)png16.dev $$(DD)png256.dev $$(DD)png16m.dev \
$$(DD)psmono.dev $$(DD)psgray.dev $$(DD)psrgb.dev $$(DD)tiff12nc.dev \
$$(DD)tiff24nc.dev $$(DD)tifflzw.dev $$(DD)tiffpack.dev $$(DD)ap3250.dev \
$$(DD)appledmp.dev $$(DD)bj10e.dev $$(DD)bj200.dev $$(DD)bjc600.dev \
$$(DD)bjc800.dev $$(DD)ccr.dev $$(DD)cdeskjet.dev $$(DD)cdjcolor.dev \
$$(DD)cdjmono.dev $$(DD)cdj500.dev $$(DD)cdj550.dev \
$$(DD)cp50.dev \
$$(DD)declj250.dev $$(DD)djet500c.dev $$(DD)dnj650c.dev $$(DD)epson.dev \
$$(DD)eps9mid.dev $$(DD)eps9high.dev $$(DD)epsonc.dev $$(DD)hl7x0.dev \
$$(DD)ibmpro.dev $$(DD)imagen.dev $$(DD)iwhi.dev $$(DD)iwlo.dev \
$$(DD)iwlq.dev $$(DD)jetp3852.dev \
$$(DD)lbp8.dev $$(DD)lips3.dev \
$$(DD)lj250.dev $$(DD)lj4dith.dev $$(DD)lp8000.dev \
$$(DD)lq850.dev $$(DD)m8510.dev $$(DD)necp6.dev $$(DD)oki182.dev \
$$(DD)okiibm.dev $$(DD)paintjet.dev $$(DD)pj.dev $$(DD)pjetxl.dev \
$$(DD)pjxl.dev $$(DD)pjxl300.dev $$(DD)r4081.dev $$(DD)sj48.dev \
$$(DD)st800.dev $$(DD)stcolor.dev $$(DD)t4693d2.dev $$(DD)t4693d4.dev \
$$(DD)t4693d8.dev $$(DD)tek4696.dev $$(DD)uniprint.dev \
$$(DD)dfaxhigh.dev $$(DD)dfaxlow.dev $$(DD)cif.dev $$(DD)inferno.dev \
$$(DD)mgrmono.dev $$(DD)mgrgray2.dev $$(DD)mgrgray4.dev $$(DD)mgrgray8.dev \
$$(DD)mgr4.dev $$(DD)mgr8.dev $$(DD)sgirgb.dev'


# $$(DD)la50.dev $$(DD)la70.dev $$(DD)la75.dev $$(DD)la75plus.dev 
# $$(DD)ln03.dev $$(DD)xes.dev 
MAKE_FLAGS=	${BASE_FLAGS} prefix=${PREFIX}


MAKE_FILE=	src/unixansi.mak

GS_SOURCES=	ghostscript-${VERSION}.tar.gz
#  Note: the following two are real files that have symlinks with
#  later version numbers pointing to them.  To avoid unnecessarily
#  downloading distfiles, do not change these when upgrading the port
#  unless the files really change.
GS_FONTS_STD=	ghostscript-fonts-std-6.0.tar.gz

# Additional driver HP 850, see http://www.erdw.ethz.ch/~bonk/hp850/hp850.html
HP850_DRV=	hp8xxs13.zip

# The pdf_sec.ps non-stub version has been moved to a separate package

FLAVORS=A4

FLAVOR?=
.if ${FLAVOR:U} == "A4"
CFLAGS+=	-DA4
.endif

FAKE_FLAGS=${BASE_FLAGS} prefix=${WRKINST}${PREFIX}

post-extract:
	ln -s `cd ${PORTSDIR} && cd ${JPEGDIR} && make show VARNAME=WRKDIST` ${WRKDIST}/jpeg
	ln -s `cd ${PORTSDIR} && cd ${PNGDIR} && make show VARNAME=WRKDIST` ${WRKDIST}/libpng

pre-build:
	mkdir -p ${WRKBUILD}/objects
	mkdir -p ${WRKBUILD}/bin

pre-install:
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/ghostscript 
	@@${INSTALL_PROGRAM_DIR} ${PREFIX}/bin 
	@@${INSTALL_MAN_DIR} ${PREFIX}/man/man1
	cd ${PREFIX}/share/ghostscript  && \
			tar xzf ${FULLDISTDIR}/${GS_FONTS_STD}

post-install:
	strip ${PREFIX}/bin/gs
	${INSTALL_DATA} ${FULLDISTDIR}/pdf_sec.ps ${PREFIX}/${PDFDIR}

.include <bsd.port.mk>
@


1.16
log
@Remove deprecated LICENSE_TYPE and set appropriate # comments
with its contents.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/05/24 02:28:12 kevlo Exp $
@


1.15
log
@Bump major rev in png dependeny entries after upgrade of png:
png.1 -> png.2
--
Ok'd by: brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/05/05 21:05:10 espie Exp $
d23 1
a23 1
LICENSE_TYPE=		COPY GPL BSD
@


1.14
log
@There was a confusion wrt `domestic crypto'.
Ghostscript's pdf_sec.ps add-on is not affected, so kill the encrypt
package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2001/04/13 17:01:03 espie Exp $
d39 1
a39 1
LIB_DEPENDS=	png.1::${PNGDIR}
@


1.13
log
@PDFDIR relative to PREFIX. Useful for PLIST.

Let ghostscript-encrypt grab its directory directly from aladdin or gnu
ghostscript.

Includes a perfectly sick hack to obtain PDFDIR from those directories:
we do need PORTSDIR at Makefile parsing time, and for that, we just hack
its value from the current Makefile, avoiding endless recursion with
a flag.

Note that this hack is clean though, and doesn't need extra knowledge from
the rest of the ports tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/04/13 16:44:26 espie Exp $
d12 1
d17 1
a17 1
DISTFILES=	${GS_SOURCES} ${GS_FONTS_STD} 
d149 1
@


1.12
log
@Forgot to bump NEED_VERSION.
Also, provide PDFDIForgot to bump NEED_VERSION.
Also, provide PDFDIRR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/04/13 16:35:29 espie Exp $
d60 1
a60 1
PDFDIR=${PREFIX}/share/ghostscript/${VERSION}/lib
@


1.11
log
@Update to AFPL ghostscript 6.50
- mktemp code was fixed
- hp850 drivers integrated
- rename patches.

I know that 7.0 is out, but 6.51 is going to be out in two weeks,
and be gnu ghostscript, hence this update.

Note that I haven't roamed through new drivers yet, I'm probably missing
some.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/01/11 00:21:14 naddy Exp $
d8 1
a8 1
NEED_VERSION=	1.241
d59 2
@


1.10
log
@fix CFLAGS; ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/10/22 13:26:51 espie Exp $
d3 4
a6 1
DISTNAME=	ghostscript-6.01
d10 1
a10 1
DIR=		aladdin/gs601
d13 1
a13 3
HOMEPAGE=	http://www.cs.wisc.edu/%7Eghost/

MASTER_SITES0=  http://www.erdw.ethz.ch/%7Ebonk/ftp/gs-driver-distrib/
d16 1
a16 2
DISTFILES=	${GS_SOURCES} ${GS_FONTS_STD} \
		${HP850_DRV}:0 
d18 1
a18 1
SUBST_VARS=		OSREV
d36 1
a36 2
		/nonexistent::${PNGDIR}:patch \
		unzip::archivers/unzip \
d41 4
a44 1
WRKDIST=	${WRKDIR}/gs6.01
d83 2
a84 2
$$(DD)cdjmono.dev $$(DD)cdj500.dev $$(DD)cdj550.dev $$(DD)cdj850.dev \
$$(DD)cdj670.dev $$(DD)cdj890.dev $$(DD)cdj1600.dev $$(DD)cp50.dev \
d108 1
a108 1
GS_SOURCES=	ghostscript-6.01.tar.gz
a131 1
	cd ${WRKDIST} && unzip -Lao ${FULLDISTDIR}/${HP850_DRV} -x devs.mak
d134 2
a135 2
	mkdir -p ${WRKSRC}/objects
	mkdir -p ${WRKSRC}/bin
a143 1
# install the readme and license file of the hp8xxx driver as well
a145 4
	${INSTALL_DATA} ${WRKSRC}/license.hp8 \
		${PREFIX}/share/ghostscript/6.01/doc
	${INSTALL_DATA} ${WRKSRC}/readme.hp8 \
		${PREFIX}/share/ghostscript/6.01/doc
@


1.9
log
@Use var substitution to yield a better installation message
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/10/16 17:50:14 espie Exp $
d47 1
a49 1
		XCFLAGS='${CFLAGS}' \
@


1.8
log
@Rewrite changes so that DEVICES is taken into account.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/06/25 22:40:14 brad Exp $
d18 1
@


1.7
log
@change dependency, png.1.6 -> png.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/05/31 13:01:09 espie Exp $
d57 43
a123 1
FAKE=Yes
a129 3

post-patch:
	@@echo "DEVICES_DEVS:=`cat ${FILESDIR}/devices`" >>${WRKSRC}/${MAKE_FILE}
@


1.6
log
@Missed by Federico
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/03/30 21:09:55 espie Exp $
d38 1
a38 1
LIB_DEPENDS=	png.1.6::${PNGDIR}
@


1.5
log
@Flavored ghostscript
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/03/24 23:28:30 espie Exp $
d38 1
a38 1
LIB_DEPENDS=	png.1.3::${PNGDIR}
@


1.5.2.1
log
@bring print as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/06/25 22:40:14 brad Exp $
d38 1
a38 1
LIB_DEPENDS=	png.1::${PNGDIR}
@


1.4
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/03/24 17:57:02 espie Exp $
d5 1
a5 1
NEED_VERSION=	 1.230
d74 4
a77 1
.if defined(A4) 
a78 1
PKGNAME=${DISTNAME}-A4
@


1.3
log
@Maintenance update (6.01, bug fixes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/03/19 00:24:19 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.218
d34 3
a36 3
BUILD_DEPENDS=	/nonexistent:${JPEGDIR}:patch \
		/nonexistent:${PNGDIR}:patch \
		unzip:archivers/unzip \
d38 1
a38 1
LIB_DEPENDS=	png.1.3:${PNGDIR}
@


1.2
log
@Don't depend on :extract, that's stupid.
Even if it doesn't make a difference now,
:patch ensures we won't miss jpeg/png changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/03/07 01:37:36 espie Exp $
d3 3
a5 2
DISTNAME=	ghostscript-6.0
CATEGORIES=	print
d7 1
a7 1
DIR=		aladdin/gs600
a27 1
NEED_VERSION=	1.218
d41 1
a41 1
WRKDIST=	${WRKDIR}/gs6.0
d62 1
a62 1
GS_SOURCES=	ghostscript-6.0.tar.gz
d105 1
a105 1
		${PREFIX}/share/ghostscript/6.0/doc
d107 1
a107 1
		${PREFIX}/share/ghostscript/6.0/doc
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d34 2
a35 2
BUILD_DEPENDS=	/nonexistent:${JPEGDIR}:extract \
		/nonexistent:${PNGDIR}:extract \
@


1.1.1.1
log
@Ghostscript 6.0 port
@
text
@@
