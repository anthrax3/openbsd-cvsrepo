head	1.7;
access;
symbols
	OPENBSD_6_1:1.7.0.18
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.7.0.16
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.12
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.7.0.14
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.10
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.8
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.6
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.4
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.6.0.20
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.18
	OPENBSD_5_0:1.6.0.16
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.14
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.12
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.6.0.10
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.6.0.8
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.6
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.5.0.4
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_2:1.1.0.6
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.4
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.2
	OPENBSD_3_0_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2012.08.22.06.24.17;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2007.11.19.20.06.56;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2006.10.19.13.12.37;	author kili;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.02.22.44.50;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.24.20.58.47;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2002.12.03.13.17.07;	author espie;	state dead;
branches;
next	1.1;

1.1
date	2001.09.06.18.10.24;	author espie;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to ghostscript-9.06.
This fixes a crash when using PDF printing with gtk-print.

ok kili@@ (maintainer)
@
text
@$OpenBSD: patch-lib_ps2epsi,v 1.6 2007/11/19 20:06:56 kili Exp $
--- lib/ps2epsi.orig	Wed Aug  8 10:01:36 2012
+++ lib/ps2epsi	Fri Aug 17 15:12:56 2012
@@@@ -10,20 +10,7 @@@@ fi
 GS_EXECUTABLE="$gs"
 
 # try to create a temporary file securely
-if test -z "$TMPDIR"; then
-	TMPDIR=/tmp
-fi
-if which mktemp >/dev/null 2>/dev/null; then
-	tmpfile="`mktemp $TMPDIR/ps2epsi.XXXXXX`"
-else
-	tmpdir=$TMPDIR/ps2epsi.$$
-	(umask 077 && mkdir "$tmpdir")
-	if test ! -d "$tmpdir"; then
-		echo "failed: could not create temporary file"
-		exit 1
-	fi
-	tmpfile="$tmpdir"/ps2epsi$$
-fi
+tmpfile=`mktemp -t ps2epsiXXXXXXXXXX` || exit 1
 trap "rm -rf \"$tmpfile\"" 0 1 2 3 7 13 15
 
 export outfile
@


1.6
log
@
Update to 8.60.
Add a cups flavor (for the pstoraster thingy).
Accept the truth and dake maintainership.

Tested by many.
ok simon@@
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_ps2epsi,v 1.5 2006/10/19 13:12:37 kili Exp $
--- lib/ps2epsi.orig	Thu Jul  5 21:04:29 2007
+++ lib/ps2epsi	Mon Sep  3 15:27:31 2007
@@@@ -11,20 +11,7 @@@@ fi
@


1.5
log
@
Update to 8.54.

Some help by steven@@ and espie@@.

"commit" espie@@
@
text
@d1 5
a5 5
$OpenBSD: patch-lib_ps2epsi,v 1.2 2006/01/02 22:43:10 sturm Exp $
--- lib/ps2epsi.orig	Fri Jan 27 22:58:27 2006
+++ lib/ps2epsi	Sat Sep 30 22:49:46 2006
@@@@ -6,13 +6,7 @@@@
 GS_EXECUTABLE=gs
d8 13
a20 5
-tmpdir=/tmp/ps2epsi.$$
-(umask 077 && mkdir $tmpdir)
-if ! test -d $tmpdir; then
-	echo "failed: could not create temporary file"
-	exit 1
a21 1
-tmpfile=$tmpdir/ps2epsi$$
d23 1
a25 9
 
@@@@ -64,7 +58,6 @@@@ awk 'F==1	{
 
 $GS_EXECUTABLE -q -dNOPAUSE -dSAFER -dDELAYSAFER -r72 -sDEVICE=bit -sOutputFile=/dev/null $tmpfile ps2epsi.ps $tmpfile <"${infile}" 1>&2
 rm -f $tmpfile
-rm -rf $tmpdir
 
 (
 cat << BEGINEPS
@


1.4
log
@SHARED_LIBS, bump PKGNAME due to plist changes
@
text
@d1 5
a5 6
$OpenBSD: patch-lib_ps2epsi,v 1.3 2004/10/24 20:58:47 brad Exp $
--- lib/ps2epsi.orig	Mon Apr 22 22:18:24 2002
+++ lib/ps2epsi	Mon Jan  2 22:14:16 2006
@@@@ -1,7 +1,7 @@@@
 #!/bin/sh
 # $Id: ps2epsi,v 1.7.2.1 2002/04/22 20:18:24 giles Exp $
d7 8
a14 1
-tmpfile=/tmp/ps2epsi$$
d19 8
@


1.3
log
@Fix insecure tempfile creation in pj-gs.sh, ps2epsi, pv.sh and sysvlp.sh.

http://marc.theaimsgroup.com/?l=bugtraq&m=109655739113230&w=2
@
text
@d1 3
a3 3
$OpenBSD$
--- lib/ps2epsi.orig	Mon Apr 22 16:18:24 2002
+++ lib/ps2epsi	Sun Oct 24 16:54:58 2004
@


1.2
log
@Update gnu ghostscript to 7.05, now that this is free.

Compared to AFPL ghostscript 7.00, main difference is some CJK support
(currently untested, needs keyed CJK fonts).
@
text
@d1 6
a6 5
$OpenBSD: patch-lib_ps2epsi,v 1.1 2001/09/06 18:10:24 espie Exp $
--- lib/ps2epsi.orig	Thu Sep  6 20:03:59 2001
+++ lib/ps2epsi	Thu Sep  6 20:04:05 2001
@@@@ -62,7 +62,7 @@@@ save countdictstack mark newpath /showpa
 BEGINEPS
d8 4
a11 4
 cat ${infile} |
-sed -e '/^%%BeginPreview:/,/^%%EndPreview[^!-~]*$/d' -e '/^%!PS-Adobe/d'\
+sed -e '/^%%BeginPreview:/,/^%%EndPreview[^!-~]*$/d' -e '/^%!PS-Adobe/d' \
 -e '/^%%[A-Za-z][A-Za-z]*[^!-~]*$/d' -e '/^%%[A-Za-z][A-Za-z]*: /d'
a12 1
 cat << ENDEPS
@


1.1
log
@Stupid typo... only GNU makes this possible, I guess.
@
text
@d1 1
a1 1
$OpenBSD$
@

