head	1.14;
access;
symbols
	OPENBSD_2_9:1.13.0.2
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.7.0.2
	OPENBSD_2_7_BASE:1.7
	gs_5_50:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2001.05.05.21.05.14;	author espie;	state dead;
branches;
next	1.13;

1.13
date	2001.04.14.14.48.50;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2001.04.13.17.01.04;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2001.04.02.14.51.10;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2001.03.22.22.06.40;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2000.10.22.15.43.15;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2000.05.17.00.24.51;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.04.03.01.54.06;	author espie;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2000.03.24.23.28.30;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.24.17.57.03;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2000.03.15.14.48.48;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.05.18.30.40;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.02.20.00.59.49;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.19.17.40.45;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.19.17.40.45;	author espie;	state Exp;
branches;
next	;

1.7.2.1
date	2000.09.15.05.13.09;	author marc;	state Exp;
branches;
next	;


desc
@@


1.14
log
@There was a confusion wrt `domestic crypto'.
Ghostscript's pdf_sec.ps add-on is not affected, so kill the encrypt
package.
@
text
@# $OpenBSD: Makefile,v 1.13 2001/04/14 14:48:50 espie Exp $

COMMENT=	"encrypted pdf add-on for ghostscript"
CATEGORIES=	print
NEED_VERSION=	1.363
MASTER_SITES=	http://www.ozemail.com.au/~geoffk/pdfencrypt/
HOMEPAGE=	http://www.ozemail.com.au/~geoffk/pdfencrypt/
DISTFILES=	pdf_sec.ps
DIST_SUBDIR=	gs
EXTRACT_ONLY=

# Crypto
PERMIT_PACKAGE_FTP=	Yes
PERMIT_PACKAGE_CDROM=	No
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	No

NO_BUILD=Yes

DISTNAME=	ghostscript-encrypt-0
FLAVORS=afpl aladdin gnu

FLAVOR?=gnu

GSDIR=print/ghostscript/${FLAVOR:L}

.if !defined(HACK)
PORTSDIR!=cd ${.CURDIR} && HACK=yes ${MAKE} show VARNAME=PORTSDIR
PDFDIR!=cd ${PORTSDIR} && cd ${GSDIR} && \
	{ unset FLAVOR; ${MAKE} show VARNAME=PDFDIR ; }
.endif

RUN_DEPENDS=${LOCALBASE}/${PDFDIR}::${GSDIR}

SUBST_VARS=	PDFDIR

pre-fake:
	${INSTALL_DATA_DIR} ${PREFIX}/${PDFDIR}

do-install:
	${INSTALL_DATA} ${FULLDISTDIR}/${DISTFILES} ${PREFIX}/${PDFDIR}
	
.include <bsd.port.mk>
@


1.13
log
@Add afpl.

Simplify encrypt flavor handling. Give it a more reasonable package name.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/04/13 17:01:04 espie Exp $
@


1.12
log
@PDFDIR relative to PREFIX. Useful for PLIST.

Let ghostscript-encrypt grab its directory directly from aladdin or gnu
ghostscript.

Includes a perfectly sick hack to obtain PDFDIR from those directories:
we do need PORTSDIR at Makefile parsing time, and for that, we just hack
its value from the current Makefile, avoiding endless recursion with
a flag.

Note that this hack is clean though, and doesn't need extra knowledge from
the rest of the ports tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/04/02 14:51:10 espie Exp $
d6 2
a7 2
MASTER_SITES=	http://www.ozemail.com.au/%7Egeoffk/pdfencrypt/
HOMEPAGE=	http://www.ozemail.com.au/%7Egeoffk/pdfencrypt/
d20 2
a21 6
DISTNAME=	ghostscript_encrypt-1.0
FLAVORS=aladdin gnu

.if defined(ALADDIN)
FLAVOR=aladdin
.endif
d25 1
a25 6
.if ${FLAVOR:L} == "aladdin"
GSDIR=print/ghostscript/aladdin
.else
GSDIR=print/ghostscript/gnu
.endif

@


1.11
log
@Give a version number to ghostscript_encrypt
Pull COMMENT in.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/03/22 22:06:40 brad Exp $
d30 1
a30 2
GSDIR=${PREFIX}/share/ghostscript/6.01/lib
RUN_DEPENDS=${GSDIR}::print/ghostscript/aladdin
d32 1
a32 3
# Gnu ghostscript, default
GSDIR=${PREFIX}/share/ghostscript/5.50
RUN_DEPENDS=${GSDIR}::print/ghostscript/gnu
d35 11
d47 1
a47 1
	${INSTALL_DATA_DIR} ${GSDIR}
d50 1
a50 1
	${INSTALL_DATA} ${FULLDISTDIR}/${DISTFILES} ${GSDIR}
@


1.10
log
@- mkdir -> ${INSTALL_DATA_DIR}
- kill off FreeBSD-ism (NOPORTDOCS knob)
--
Patch from: Pete Fritchman <petef@@databits.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/10/22 15:43:15 espie Exp $
d3 1
d5 1
a5 1
NEED_VERSION=	1.247
d12 1
a12 1
LICENSE_TYPE=	CRYPTO
d20 1
a20 1
DISTNAME=	ghostscript_encrypt
@


1.9
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/05/17 00:24:51 espie Exp $
d38 1
a38 1
	mkdir -p ${GSDIR}
@


1.8
log
@Remove work-around for pre-2.7 pkg_add.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/04/03 01:54:06 espie Exp $
a35 2

FAKE=	Yes
@


1.7
log
@Flavors for ghostscript_encrypt.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/03/24 23:28:30 espie Exp $
a42 2
	# needed to keep dumb pkg_create quiet
	touch ${GSDIR}/.gs-encrypt
@


1.7.2.1
log
@bring print as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/05/17 00:24:51 espie Exp $
d43 2
@


1.6
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/03/24 17:57:03 espie Exp $
d4 1
a4 1
NEED_VERSION=	 1.230
d19 3
d23 6
a28 1
DISTNAME=	aladdin-ghostscript-encrypt
a30 1
PLIST=${PKGDIR}/PLIST.aladdin
a32 1
DISTNAME=	ghostscript-encrypt
@


1.5
log
@Maintenance update (6.01, bug fixes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/03/15 14:48:48 espie Exp $
d4 1
a4 1
NEED_VERSION=	1.223
d22 1
a22 1
RUN_DEPENDS=${GSDIR}:print/ghostscript/aladdin
d28 1
a28 1
RUN_DEPENDS=${GSDIR}:print/ghostscript/gnu
@


1.4
log
@Work with Aladdin ghostscript.
Remove duplicate package/install using fake.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/03/05 18:30:40 espie Exp $
d21 1
a21 1
GSDIR=${PREFIX}/share/ghostscript/6.0/lib
@


1.3
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/02/20 00:59:49 espie Exp $
a19 1
# Todo
d21 1
a21 1
GSDIR=${PREFIX}/share/ghostscript/6.0
d23 1
d31 5
d37 1
a37 1
	# needed, since pkg_create is fucked up
a38 1
	mv ${GSDIR}/pdf_sec.ps ${GSDIR}/pdf_sec.stub
@


1.2
log
@Forgot about moving stuff around...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/02/19 17:40:45 espie Exp $
d4 1
d23 1
a23 1
RUN_DEPENDS=${GSDIR}:${PORTSDIR}/print/ghostscript/aladdin
d28 1
a28 1
RUN_DEPENDS=${GSDIR}:${PORTSDIR}/print/ghostscript/gnu
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a22 1
DISTNAME=	ghostscript-encrypt
d25 1
@


1.1.1.1
log
@New ghostscript port, living in a subdir.
Important changes:
- prodded by Nikolay Sturm to do the upgrade,
- Gnu-ghostscript is now 5.50, packaging changed slightly,
- most patches have been integrated,
- use MAKE_FLAGS to remove Makefile patches and gnu-make dependency,
- pull pdf_encrypt out from the main package so that gs can be distributed
on CD-Rom,
- simplify DEVICE_DEVS (get list from NetBSD), removed interactive script
for now, as it wasn't reliably upgraded,
- infrastructure allows for Aladdin ghostscript along-side.
@
text
@@
