head	1.2;
access;
symbols
	OPENBSD_4_0:1.1.0.8
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.6
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.4
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.2
	OPENBSD_3_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2006.10.20.15.34.27;	author steven;	state dead;
branches;
next	1.1;

1.1
date	2004.10.24.21.53.02;	author brad;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove afpl ghostscript, current code is licensed under gpl

ok sturm, pval
@
text
@$OpenBSD: patch-lib_pv_sh,v 1.1 2004/10/24 21:53:02 brad Exp $
--- lib/pv.sh.orig	Thu Feb 21 16:49:28 2002
+++ lib/pv.sh	Sun Oct 24 17:49:36 2004
@@@@ -29,9 +29,10 @@@@ TEMPDIR=.
 PAGE=$1
 shift
 FILE=$1
+TEMPFILE=`mktemp -t ${FILE}XXXXXXXXXX` || exit 1
 shift
-trap "rm -rf $TEMPDIR/$FILE.$$.pv" 0 1 2 15
+trap "rm -rf $TEMPFILE" 0 1 2 15
 #dvips -D$RESOLUTION -p $PAGE -n 1 $FILE $* -o $FILE.$$.pv
-dvips -p $PAGE -n 1 $FILE $* -o $FILE.$$.pv
-gs $FILE.$$.pv
+dvips -p $PAGE -n 1 $FILE $* -o $TEMPFILE
+gs $TEMPFILE
 exit 0
@


1.1
log
@Fix insecure tempfile creation in ps2epsi and pv.sh.

http://marc.theaimsgroup.com/?l=bugtraq&m=109655739113230&w=2
@
text
@d1 1
a1 1
$OpenBSD$
@

