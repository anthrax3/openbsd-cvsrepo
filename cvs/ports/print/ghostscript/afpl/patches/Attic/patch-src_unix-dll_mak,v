head	1.6;
access;
symbols
	OPENBSD_4_0:1.5.0.4
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.1.0.14
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.12
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.10
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.8
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.6
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2006.10.20.15.34.27;	author steven;	state dead;
branches;
next	1.5;

1.5
date	2006.01.02.22.43.10;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2005.01.25.17.19.33;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2004.05.23.18.54.01;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2004.05.23.18.51.59;	author sturm;	state dead;
branches;
next	1.1;

1.1
date	2001.04.14.16.54.04;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove afpl ghostscript, current code is licensed under gpl

ok sturm, pval
@
text
@$OpenBSD: patch-src_unix-dll_mak,v 1.5 2006/01/02 22:43:10 sturm Exp $
--- src/unix-dll.mak.orig	Fri Dec 12 23:08:05 2003
+++ src/unix-dll.mak	Mon Jan  2 22:00:12 2006
@@@@ -46,11 +46,11 @@@@ GSSOX=$(BINDIR)/$(SOBINRELDIR)/$(GSSOX_X
 
 # shared library
 GS_SONAME=lib$(GS).so
-GS_SONAME_MAJOR=$(GS_SONAME).$(GS_VERSION_MAJOR)
-GS_SONAME_MAJOR_MINOR= $(GS_SONAME).$(GS_VERSION_MAJOR).$(GS_VERSION_MINOR)
+GS_SONAME_MAJOR=$(GS_SONAME).$(LIBgs_VERSION:R)
+GS_SONAME_MAJOR_MINOR= $(GS_SONAME).$(LIBgs_VERSION)
 GS_SO=$(BINDIR)/$(GS_SONAME)
-GS_SO_MAJOR=$(GS_SO).$(GS_VERSION_MAJOR)
-GS_SO_MAJOR_MINOR=$(GS_SO_MAJOR).$(GS_VERSION_MINOR)
+GS_SO_MAJOR=$(GS_SO).$(LIBgs_VERSION:R)
+GS_SO_MAJOR_MINOR=$(GS_SO).$(LIBgs_VERSION)
 
 # Shared object is built by redefining GS_XE in a recursive make.
 
@@@@ -70,11 +70,11 @@@@ $(GSSOX_XE): $(GS_SO) $(GLSRC)dxmain.c
 	$(GLCC) -g `gtk-config --cflags` -o $(GSSOX_XE) $(GLSRC)dxmain.c -L$(BINDIR) -l$(GS) `gtk-config --libs`
 
 $(GSSOC_XE): $(GS_SO) $(GLSRC)dxmainc.c
-	$(GLCC) -g -o $(GSSOC_XE) $(GLSRC)dxmainc.c -L$(BINDIR) -l$(GS)
+	$(GLCC) -g -o $(GSSOC_XE) $(GLSRC)dxmainc.c -L$(BINDIR) -l$(GS) $(XLDFLAGS) $(XLIBDIRS) -lXt -lSM -lICE -lXext -lX11 -lpng
 
 # ------------------------- Recursive make targets ------------------------- #
 
-SODEFS=LDFLAGS='$(LDFLAGS) $(CFLAGS_SO) -shared -Wl,-soname=$(GS_SONAME_MAJOR)'\
+SODEFS=LDFLAGS='$(LDFLAGS) $(CFLAGS_SO) -shared'\
  GS_XE=$(BINDIR)/$(SOBINRELDIR)/$(GS_SONAME_MAJOR_MINOR)\
  STDIO_IMPLEMENTATION=c\
  DISPLAY_DEV=$(DD)$(SOOBJRELDIR)/display.dev\
@


1.5
log
@SHARED_LIBS
@
text
@d1 1
a1 1
$OpenBSD: patch-src_unix-dll_mak,v 1.4 2005/01/25 17:19:33 alek Exp $
@


1.4
log
@- Don't set soname for libs
- Use devel/gettext MODULE
- Add WANTLIB markers
- Bump PKGNAME

go ahead brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_unix-dll_mak,v 1.3 2004/05/23 18:54:01 sturm Exp $
d3 17
a19 1
+++ src/unix-dll.mak	Tue Jan 25 13:30:49 2005
@


1.3
log
@this shouldn't have been removed
@
text
@d1 4
a4 4
$OpenBSD$
--- src/unix-dll.mak.orig	2004-05-23 18:45:08.000000000 +0200
+++ src/unix-dll.mak	2004-05-23 18:56:50.000000000 +0200
@@@@ -70,7 +70,7 @@@@ $(GSSOX_XE): $(GS_SO) $(GLSRC)dxmain.c
d13 5
@


1.2
log
@revive this port by updating to afpl ghostscript 8.14

based on a diff from Michael Holcomb <redcat at aracnet.com>
@
text
@d1 9
a9 4
$OpenBSD: patch-src_unix-dll_mak,v 1.1 2001/04/14 16:54:04 espie Exp $
--- src/unix-dll.mak.orig	Sat Apr 14 17:33:35 2001
+++ src/unix-dll.mak	Sat Apr 14 17:34:28 2001
@@@@ -67,7 +67,7 @@@@ $(GSSO_XE): $(GS_SO) $(GLSRC)dxmain.c
a12 5
-SODEFS=LDFLAGS='$(LDFLAGS) -shared -Wl,-soname,$(GS_SONAME_MAJOR)'\
+SODEFS=LDFLAGS='$(LDFLAGS) $(CFLAGS_SO) -shared -Wl,-soname,$(GS_SONAME_MAJOR)'\
  GS_XE=$(BINDIR)/$(SOBINRELDIR)/$(GS_SONAME_MAJOR_MINOR)\
  STDIO_IMPLEMENTATION=c\
  DISPLAY_DEV=$(DD)$(SOOBJRELDIR)/display.dev\
@


1.1
log
@Add a gtk flavor that builds gsx with the new display device.

That device is ways faster than the traditional x11 device, especially
with anti-aliasing turned on. Unfortunately, it requires shared libraries
and does not interface with gv.

Note: I hope all devices are back in. Those of you looking for hp850 &
friends support, the driver has been integrated into the `uniprint' driver.
@
text
@d1 1
a1 1
$OpenBSD: update-patches,v 1.4 2001/03/31 22:54:41 espie Exp $
@

