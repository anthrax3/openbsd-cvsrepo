head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.09.30.09.03.24;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2010.11.17.10.47.02;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove deprecated and unmaintained apps. eds/evolution/contacts/online-accounts
work just as good

ok aja@@
@
text
@$OpenBSD: patch-src_dates_view_c,v 1.1 2010/11/17 10:47:02 jasper Exp $

Don't use deprecated and removed functions from libedataserver.
GNOME bz #631081.

--- src/dates_view.c.orig	Fri Jul 17 16:32:15 2009
+++ src/dates_view.c	Wed Nov 17 11:41:32 2010
@@@@ -4691,7 +4691,6 @@@@ dates_view_add_calendar (DatesView *view, ECal *ecal)
 	DatesViewPrivate *priv = DATES_VIEW_GET_PRIVATE (view);
 	DatesViewCalendar *cal;
 	ESource *source;
-	guint32 colour;
 /*	GError *error = NULL;*/
 	
 	g_return_if_fail (E_IS_CAL (ecal));
@@@@ -4721,12 +4720,11 @@@@ dates_view_add_calendar (DatesView *view, ECal *ecal)
 	cal->text_gc = gdk_gc_new (
 		GDK_DRAWABLE (priv->main->window));
 
-	if (e_source_get_color (source, &colour)) {
+    const gchar* spec = e_source_peek_color_spec (source);
+	if (spec) {
 		GdkColor gcolour, dgcolour, tgcolour;
-		gcolour.red = ((colour & 0xFF0000) >> 16) * 0x101;
-		gcolour.green = ((colour & 0xFF00) >> 8)  * 0x101;
-		gcolour.blue = (colour & 0xFF) * 0x101;
-
+		gdk_color_parse(spec, &gcolour);
+        
 		/* This is simplified sRGB -> LAB conversion; we do not need it
 		 * entirely precise, as we are only going to chose between
 		 * black or white text based on the L value.
@


1.1
log
@- add patches to make this work with newer libedataserver
- remove BROKEN
- new DEPENDS
@
text
@d1 1
a1 1
$OpenBSD$
@

