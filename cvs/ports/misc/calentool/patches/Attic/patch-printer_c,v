head	1.2;
access;
symbols
	OPENBSD_5_0:1.1.0.34
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.32
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.30
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.28
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.26
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.24
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.22
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.20
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.18
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.16
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.14
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.12
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.10
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.8
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.6
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.4
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.2
	OPENBSD_3_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2011.11.15.21.40.44;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2003.06.18.02.48.00;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove xview and ports using it; speaking of old unmaintained crufty toolkits..

prompted by naddy@@
ok sthen@@ wub@@
@
text
@$OpenBSD: patch-printer_c,v 1.1 2003/06/18 02:48:00 avsm Exp $
--- printer.c.orig	Wed Sep 30 03:38:24 1998
+++ printer.c	Wed Jun 18 03:41:50 2003
@@@@ -72,8 +72,8 @@@@ extern int print_trailer;
 int format = ZPixmap;
 char trailer[256];
 
-char rasfile[] = "/usr/tmp/calentool.xwd";
-char psfile[256] = "/usr/tmp/calentool.ps";
+char rasfile[] = "/var/tmp/calentool.xwd";
+char psfile[256] = "/var/tmp/calentool.ps";
 
 #ifdef __STDC__
 void print_one_day (int which, FILE *output, int gdrtn);
@@@@ -319,12 +319,12 @@@@ int which, dest;
 	int i, gd_rtn, target, ndays;
 	FILE *output, *popen();
 	int pclose();
-	char cmd[80], *name, *cuserid(), *mail_subj();
+	char cmd[80], *name, *getlogin(), *mail_subj();
 	struct tm Save;
 
 	fix_current_day();
 	sprintf(trailer, "File: '%s' printed for %s on %s",
-		apts_pathname, cuserid(NULL), clockstr);
+		apts_pathname, getlogin(), clockstr);
 	gd_rtn = get_day_appts();
 	if (which == PRI_DAY && !gd_rtn)
 		return;	/* nothing to show */
@@@@ -334,7 +334,7 @@@@ int which, dest;
 	if (dest == DST_MAIL) {
 		if (mailto != NULL) {
 			name = mailto;
-		} else if ((name = cuserid(NULL)) == NULL) {
+		} else if ((name = getlogin()) == NULL) {
 			err_rpt("nobody to mail to", FATAL);
 		}
 		sprintf(cmd, "%s -s \"Appointments for %s\" %s", MAILPROG, mail_subj(which), name);
@@@@ -510,7 +510,7 @@@@ int file_type;
 	lock_cursors();
 	working(TRUE);
 	sprintf(trailer, "File: '%s' printed for %s on %s",
-		apts_pathname, cuserid(NULL), clockstr);
+		apts_pathname, getlogin(), clockstr);
 #ifndef RASTER_ONLY
 	if (file_type == PR_POSTSCRIPT) {
 		if ((pfp = fopen(psfile, "w")) == NULL) {
@


1.1
log
@sync with update-patches
@
text
@d1 1
a1 1
$OpenBSD$
@

