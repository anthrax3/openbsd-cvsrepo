head	1.2;
access;
symbols
	OPENBSD_3_3:1.1.1.1.0.20
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.18
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.16
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.14
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.12
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.10
	OPENBSD_2_8_BASE:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.8
	OPENBSD_2_7_BASE:1.1.1.1
	OPENBSD_2_6:1.1.1.1.0.6
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.4
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	ian_1998-Sep-29:1.1.1.1
	ian:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2003.06.18.02.48.00;	author avsm;	state dead;
branches;
next	1.1;

1.1
date	98.09.30.16.27.53;	author ian;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.09.30.16.27.53;	author ian;	state Exp;
branches;
next	;


desc
@@


1.2
log
@sync with update-patches
@
text
@--- printer.c.orig	Tue Sep 29 22:38:24 1998
+++ printer.c	Wed Sep 30 11:36:47 1998
@@@@ -72,8 +72,8 @@@@
 int format = ZPixmap;
 char trailer[256];
 
-char rasfile[] = "/usr/tmp/calentool.xwd";
-char psfile[256] = "/usr/tmp/calentool.ps";
+char rasfile[] = "/var/tmp/calentool.xwd";
+char psfile[256] = "/var/tmp/calentool.ps";
 
 #ifdef __STDC__
 void print_one_day (int which, FILE *output, int gdrtn);
@@@@ -319,12 +319,12 @@@@
 	int i, gd_rtn, target, ndays;
 	FILE *output, *popen();
 	int pclose();
-	char cmd[80], *name, *cuserid(), *mail_subj();
+	char cmd[80], *name, *getlogin(), *mail_subj();
 	struct tm Save;
 
 	fix_current_day();
 	sprintf(trailer, "File: '%s' printed for %s on %s",
-		apts_pathname, cuserid(NULL), clockstr);
+		apts_pathname, getlogin(), clockstr);
 	gd_rtn = get_day_appts();
 	if (which == PRI_DAY && !gd_rtn)
 		return;	/* nothing to show */
@@@@ -334,7 +334,7 @@@@
 	if (dest == DST_MAIL) {
 		if (mailto != NULL) {
 			name = mailto;
-		} else if ((name = cuserid(NULL)) == NULL) {
+		} else if ((name = getlogin()) == NULL) {
 			err_rpt("nobody to mail to", FATAL);
 		}
 		sprintf(cmd, "%s -s \"Appointments for %s\" %s", MAILPROG, mail_subj(which), name);
@@@@ -510,7 +510,7 @@@@
 	lock_cursors();
 	working(TRUE);
 	sprintf(trailer, "File: '%s' printed for %s on %s",
-		apts_pathname, cuserid(NULL), clockstr);
+		apts_pathname, getlogin(), clockstr);
 #ifndef RASTER_ONLY
 	if (file_type == PR_POSTSCRIPT) {
 		if ((pfp = fopen(psfile, "w")) == NULL) {
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@calentool port
@
text
@@
