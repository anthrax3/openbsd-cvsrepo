head	1.12;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.7.0.2
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.6.0.4
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.5.0.6
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.4
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.4.0.6
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	sebastia_20111117:1.1.1.1
	sebastia:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2017.05.27.19.57.06;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	H08QxD8pqoInz6Rz;

1.11
date	2017.05.27.13.55.58;	author ajacoutot;	state Exp;
branches;
next	1.10;
commitid	SykG6k6P85X3Gc2i;

1.10
date	2017.05.07.23.57.16;	author espie;	state Exp;
branches;
next	1.9;
commitid	IszdCXs5hmPs0hF8;

1.9
date	2017.04.10.11.46.23;	author sthen;	state Exp;
branches;
next	1.8;
commitid	BLsh88fJB8thZTwY;

1.8
date	2017.03.04.16.36.00;	author jca;	state Exp;
branches;
next	1.7;
commitid	xpZrfTyBW7pup5YF;

1.7
date	2016.03.16.16.46.32;	author naddy;	state Exp;
branches;
next	1.6;
commitid	4Ekn8nPgVVHWLTwe;

1.6
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.5;
commitid	jyyOLTDxRdjpw44n;

1.5
date	2013.03.11.11.23.58;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2011.11.22.16.03.26;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.18.13.16.46;	author sebastia;	state Exp;
branches;
next	1.2;

1.2
date	2011.11.17.12.33.31;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.11.17.00.43.19;	author sebastia;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.11.17.00.43.19;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Bring rc_bg back.
@
text
@# $OpenBSD: Makefile,v 1.11 2017/05/27 13:55:58 ajacoutot Exp $

COMMENT-main =		model railroad control daemon
COMMENT-gui =		model railroad control daemon client

VERSION =		2.0
REV =			2585
DISTNAME =		Rocrail-2585
PKGNAME-main =		rocrail-${VERSION}.${REV}
PKGNAME-gui =		rocview-${VERSION}.${REV}
CATEGORIES =		misc x11

REVISION-main =		4
REVISION-gui =		3

HOMEPAGE =		http://www.rocrail.net/
MAINTAINER =		Sebastian Reitenbach <sebastia@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =		Yes

MASTER_SITES =		http://bugs.launchpad.net/rocrail/sunrise/2.0/+download/

MULTI_PACKAGES =	-main -gui
WANTLIB +=		c pthread
WANTLIB-gui += 		${WANTLIB} m ${LIBCXX}
WANTLIB-gui += 		wx_base wx_base_net wx_base_odbc wx_base_xml wx_gtk2_adv
WANTLIB-gui += 		wx_gtk2_aui wx_gtk2_core wx_gtk2_dbgrid wx_gtk2_html
WANTLIB-gui += 		wx_gtk2_qa wx_gtk2_richtext wx_gtk2_xrc
LIB_DEPENDS-gui +=	x11/wxWidgets
RUN_DEPENDS-gui +=	${PKGPATH},-main

USE_GMAKE =		Yes
CONFIGURE_STYLE =	none
MAKE_FILE =		makefile
MAKE_FLAGS =		PLATFORM=OPENBSD CC="${CC}" CPP="${CC}" LNK="${CC}"
ALL_TARGET =		fromtar
WRKDIST =		${WRKDIR}/Rocrail

THEMES1 =		Basic \
			DB \
			ILTIS \
			SBB-RHB \
			SpDrS60
THEMES2 =		Accessories \
			NL \
			NMBS-SNCB \
			Roads \
			SpDrS60/alt

post-extract:
	mkdir ${WRKDIST}/unxgen
	cd ${WRKDIST}/unxgen && tar zxf ${WRKDIST}/rocs/rocs-gen.tar.gz

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/rocrail
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/icons
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/symbols
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/symbols/control
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/svg/themes
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/images
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/stylesheets
	${INSTALL_PROGRAM} ${WRKBUILD}/unxbin/rocrail ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKBUILD}/unxbin/rocview ${PREFIX}/bin
	${INSTALL_DATA} ${WRKBUILD}/unxbin/*.so ${PREFIX}/lib/rocrail
	${INSTALL_DATA} ${WRKBUILD}/rocrail/rocraild.png ${PREFIX}/share/rocrail
	${INSTALL_DATA} ${WRKBUILD}/rocrail/package/rocrail.xpm ${PREFIX}/share/rocrail
	${INSTALL_DATA} ${WRKBUILD}/rocview/icons/* ${PREFIX}/share/rocrail/icons
.for i in ${THEMES1}
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/svg/themes/${i}
	${INSTALL_DATA} ${WRKBUILD}/rocview/svg/themes/${i}/properties.xml \
		${PREFIX}/share/rocrail/svg/themes/${i}/
	${INSTALL_DATA} ${WRKBUILD}/rocview/svg/themes/${i}/*.svg \
		${PREFIX}/share/rocrail/svg/themes/${i}/
.endfor
.for i in ${THEMES2}
	${INSTALL_DATA_DIR} ${PREFIX}/share/rocrail/svg/themes/${i} \
		${PREFIX}/share/rocrail/svg/themes/${i}
	${INSTALL_DATA} ${WRKBUILD}/rocview/svg/themes/${i}/*.svg \
		${PREFIX}/share/rocrail/svg/themes/${i}
.endfor
	${INSTALL_DATA} ${WRKBUILD}/rocrail/symbols/*.{png,gif,db,dbencryptable} ${PREFIX}/share/rocrail/symbols
	${INSTALL_DATA} ${WRKBUILD}/rocrail/symbols/control/* ${PREFIX}/share/rocrail/symbols/control
	${INSTALL_DATA} ${WRKBUILD}/stylesheets/* ${PREFIX}/share/rocrail/stylesheets
	${INSTALL_DATA} ${WRKBUILD}/rocrail/package/images/* ${PREFIX}/share/rocrail/images
	${SUBST_PROGRAM} ${FILESDIR}/rocview.sh ${PREFIX}/bin/rocview.sh

.include <bsd.port.mk>
@


1.11
log
@I forgot the bump commit...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2017/05/07 23:57:16 espie Exp $
d13 2
a14 2
REVISION-main =		3
REVISION-gui =		2
@


1.10
log
@make it build with clang, clean up a shitload of warnings and errors,
make it obey CFLAGS, extract the embedded source so we can patch it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2017/04/10 11:46:23 sthen Exp $
d13 2
a14 2
REVISION-main =		2
REVISION-gui =		1
@


1.9
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2017/03/04 16:36:00 jca Exp $
d13 2
a14 2
REVISION-main =		1
REVISION-gui =		0
d50 4
@


1.8
log
@Honour CC
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/03/16 16:46:32 naddy Exp $
d26 1
a26 1
WANTLIB-gui += 		${WANTLIB} m stdc++
@


1.7
log
@remove SHARED_ONLY from ports that don't use any MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/08/10 09:58:06 espie Exp $
d36 1
a36 1
MAKE_FLAGS =		PLATFORM=OPENBSD CPP=${CC} LNK=${CC}
@


1.6
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.5 2013/03/11 11:23:58 espie Exp $

SHARED_ONLY =		Yes
@


1.5
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/11/22 16:03:26 naddy Exp $
d85 1
a85 3
	${SUBST_CMD} -c -g ${BINGRP} -o ${BINOWN} \
		${FILESDIR}/rocview.sh ${PREFIX}/bin/rocview.sh
	chmod 755 ${PREFIX}/bin/rocview.sh
@


1.4
log
@really bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/11/18 13:16:46 sebastia Exp $
a22 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
@


1.3
log
@update rocview.sh to not clutter configuration and trace files all around
put rocview.sh in the -gui SUBPACKAGE where it belongs to

OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/11/17 12:33:31 ajacoutot Exp $
a9 1
REVISION =		0
d15 2
a16 1
REVISION-main =		0
@


1.2
log
@Remove 2 bogus files that shouldn't have been imported.
Couple of tweaks to PLIST and rc script.

ok sebastia@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/11/17 00:43:19 sebastia Exp $
d10 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d14 2
@


1.1.1.1
log
@import rocrail: model railroad control daemon and client

Rocrail can control a model train layout from one or more computers. You
can run trains directly from your computer, and you can have the
computer run trains automatically for you. You can even have some of the
trains on your layout running automatically while you control others by
hand.  Rocrail is two programs; the Rocrail Server and the Rocview
Client. These programs work with each other using Internet protocols,
and do not need to be on the same computer. You can use Rocrail from a
single computer connected directly to your layout, and you can also
control your layout from any computer on your home network, or over the
Internet. Rocrail also has a web interface, which will let you run the
layout from a web browser.

OK sthen@@

@
text
@@
