head	1.27;
access;
symbols
	OPENBSD_6_2:1.27.0.4
	OPENBSD_6_2_BASE:1.27
	OPENBSD_6_1:1.27.0.2
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.18.0.2
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.17.0.2
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.14.0.4
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	ajacoutot_20100906:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2017.01.03.18.54.48;	author shadchin;	state Exp;
branches;
next	1.26;
commitid	4wXCEmNOFtHPEQ29;

1.26
date	2016.05.21.10.49.24;	author sthen;	state Exp;
branches;
next	1.25;
commitid	C2H89vjr6CSG6I8c;

1.25
date	2015.08.24.10.01.10;	author sthen;	state Exp;
branches;
next	1.24;
commitid	2huNwQ3eew4irBXJ;

1.24
date	2015.03.27.08.41.06;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	bGtJfGn7cri3zP6L;

1.23
date	2015.01.24.17.50.42;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	numsnIFjkSiXlx8k;

1.22
date	2015.01.10.09.39.21;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	PKrBIPx6b3iqC8xF;

1.21
date	2014.09.12.06.24.01;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	pRJxVGIi4fdxE7Ez;

1.20
date	2014.09.01.15.11.11;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	Hp6HTBRufehj4rQk;

1.19
date	2014.08.29.22.07.38;	author ajacoutot;	state Exp;
branches;
next	1.18;
commitid	BhemNx7nAKaDnAN8;

1.18
date	2014.03.13.18.11.43;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.09.27.17.49.06;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2013.04.02.16.41.21;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2013.03.11.11.23.58;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2012.06.15.08.32.17;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.12.03.20.30.09;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.09.16.10.31.23;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.07.23.19.48.09;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.17.08.05.36;	author rpointel;	state Exp;
branches;
next	1.9;

1.9
date	2011.06.08.17.36.18;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2011.06.02.17.09.32;	author kili;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.18.21.11.16;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.05.18.21.06.28;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.03.02.06.41.33;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.19.07.23.12;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.03.07.12.40;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.09.06.06.22.08;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.06.06.21.19;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.09.06.06.21.19;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.27
log
@Add a MODPY_PYOEXTENSION variable.
Beginning with Python 3.5 .pyo files are no longer used and
have been replaced by a more flexible scheme that includes
the optimization level explicitly in .pyc name (See PEP-488).
@
text
@# $OpenBSD: Makefile,v 1.26 2016/05/21 10:49:24 sthen Exp $

COMMENT=		automatic color temperature adjustment

GH_PROJECT=		redshift
GH_ACCOUNT=		jonls
GH_TAGNAME=		v1.11
REVISION=		0

CATEGORIES=		misc graphics

HOMEPAGE=		http://jonls.dk/redshift/

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += X11 Xau Xdmcp Xext Xxf86vm c drm ffi gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 m pcre pthread pthread-stubs
WANTLIB += xcb xcb-randr xcb-render z

MODULES=		devel/gettext \
			lang/python \
			textproc/intltool

MODPY_VERSION=		${MODPY_DEFAULT_VERSION_3}
MODPY_ADJ_FILES=	src/redshift-gtk/redshift-gtk.in

LIB_DEPENDS=		devel/glib2

RUN_DEPENDS=		devel/desktop-file-utils \
			devel/py-gobject3${MODPY_FLAVOR} \
			devel/py-xdg${MODPY_FLAVOR} \
			geo/geoclue2 \
			x11/gtk+3,-guic

# pygobject GTK3 introspection (not provided by indirect dependencies)
RUN_DEPENDS +=		x11/gtk+3

USE_GMAKE=		Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--enable-gui \
			--disable-geoclue

AUTOCONF_VERSION=	2.69
AUTOMAKE_VERSION=	1.14
BUILD_DEPENDS +=	${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS} \
			devel/libtool

pre-configure:
	cd ${WRKSRC} && \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		./bootstrap

.include <bsd.port.mk>
@


1.26
log
@update to redshift-1.11, from Ryan Freeman, input from gsoares@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/08/24 10:01:10 sthen Exp $
d8 1
@


1.25
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/03/27 08:41:06 ajacoutot Exp $
a4 4
V=			1.10
DISTNAME=		redshift-${V}
REVISION=		2

d7 1
a7 1
DISTFILES=		v${V}${EXTRACT_SUFX}
@


1.24
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/01/24 17:50:42 ajacoutot Exp $
d7 1
a7 1
REVISION=		1
d22 1
a22 1
WANTLIB += xcb xcb-randr z
@


1.23
log
@Missing RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/01/10 09:39:21 ajacoutot Exp $
d7 1
a7 1
REVISION=		0
d37 1
a37 1
			x11/gtk+2,-guic
@


1.22
log
@Update to redshift-1.10.

based on a diff from scarlett at xavin dot net
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/09/12 06:24:01 ajacoutot Exp $
d7 1
d36 1
@


1.21
log
@Missing dependency.

breakage reported by stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/09/01 15:11:11 ajacoutot Exp $
d5 1
a5 1
V=			1.9.1
a6 1
REVISION=		0
d19 3
a21 2
WANTLIB += X11 Xxf86vm c dbus-1 dbus-glib-1 drm geoclue glib-2.0
WANTLIB += gobject-2.0 m pthread xcb xcb-randr xml2
d24 2
a25 1
			lang/python
d30 1
a30 1
LIB_DEPENDS=		geo/geoclue
d43 2
a44 1
CONFIGURE_ARGS=		--enable-gui
d49 2
a50 1
			${MODGNU_AUTOMAKE_DEPENDS}
d56 1
a56 1
		autoreconf -i
@


1.20
log
@Missing BUILD_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/08/29 22:07:38 ajacoutot Exp $
d7 1
d32 1
@


1.19
log
@Update to redshift-1.9.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/03/13 18:11:43 ajacoutot Exp $
d44 2
@


1.18
log
@Update to redshift-1.8.

initial submission from 'Fred'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/09/27 17:49:06 ajacoutot Exp $
d5 1
a5 1
V=			1.8
d7 4
a10 1
EXTRACT_SUFX=		.tar.bz2
d19 1
a19 1
WANTLIB += X11 Xxf86vm c dbus-1 dbus-glib-1 gconf-2 geoclue glib-2.0
a21 2
MASTER_SITES=		http://launchpad.net/redshift/trunk/${V:C/^([0-9]+\.[0-9]+).*/\1/}/+download/

d25 5
d31 1
a31 2
			x11/py-gtk2 \
			devel/py-xdg \
d34 2
a35 2
LIB_DEPENDS=		devel/gconf2 \
			geo/geoclue
d42 8
a49 1
MODPY_ADJ_FILES=	src/redshift-gtk/redshift-gtk
@


1.17
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/04/02 16:41:21 ajacoutot Exp $
d3 1
a3 1
COMMENT=	automatic color temperature adjustment
d5 3
a7 4
V=		1.7
DISTNAME=	redshift-${V}
REVISION=	5
EXTRACT_SUFX=	.tar.bz2
d9 1
a9 1
CATEGORIES=	misc
d11 1
a11 1
HOMEPAGE=	http://jonls.dk/redshift/
d17 1
a17 1
WANTLIB += gobject-2.0 gthread-2.0 m pthread xcb xcb-randr xml2
d19 1
a19 1
MASTER_SITES=	http://launchpad.net/redshift/trunk/${V:C/^([0-9]+\.[0-9]+).*/\1/}/+download/
d21 2
a22 18
RUN_DEPENDS=	devel/desktop-file-utils \
		x11/py-gtk2 \
		devel/py-xdg \
		x11/gtk+2,-guic
LIB_DEPENDS=	devel/gconf2 \
		geo/geoclue

MODULES=	devel/gettext \
		lang/python

USE_GMAKE=	Yes

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--enable-randr \
		--enable-vidmode \
		--enable-geoclue \
		--enable-gnome-clock \
		--enable-gui
d24 14
a37 1
MODPY_ADJ_FILES= src/gtk-redshift/gtk-redshift
@


1.16
log
@Remove the librsvg dependency from the gtk ports, _except_ when it's a
build or lib depends... i.e. just remove the RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/11 11:23:58 espie Exp $
d7 1
a7 1
REVISION=	4
@


1.15
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/06/15 08:32:17 ajacoutot Exp $
d7 1
a7 1
REVISION=	3
a30 4

# nothing in the dep chain provides librsvg, so explicitely depend on it
# so that the icon is correctly displayed
RUN_DEPENDS+=	x11/gnome/librsvg
@


1.14
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/12/03 20:30:09 ajacoutot Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.13
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/09/16 10:31:23 espie Exp $
d7 1
a7 1
REVISION=	2
@


1.12
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/07/23 19:48:09 kili Exp $
d7 1
a7 1
REVISION=	1
d27 2
a28 1
		devel/py-xdg
@


1.11
log
@Add geo/geoclue to LIB_DEPENDS instead of picking it up silently
if it's installed. Noticed by frantisek holop.

While here regenerate WANTLIB.

Add --enable-geoclue to CONFIGURE_ARGS (demanded by rpointel@@).

ok dcoppa@@ rpointel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/07/17 08:05:36 rpointel Exp $
d7 1
a7 1
REVISION=	0
@


1.10
log
@Update redshift to 1.7.
ok ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/06/08 17:36:18 jasper Exp $
d7 1
d20 2
a21 3
WANTLIB += X11 Xau Xdmcp Xext Xxf86vm c glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 m pthread pthread-stubs xcb xcb-randr ORBit-2
WANTLIB += gconf-2 gio-2.0
d28 2
a29 1
LIB_DEPENDS=	devel/gconf2
d43 1
@


1.9
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/06/02 17:09:32 kili Exp $
d5 1
a5 1
V=		1.6
a7 2

REVISION=	3
@


1.8
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/05/18 21:11:16 ajacoutot Exp $
d9 1
a9 1
REVISION=	2
@


1.7
log
@Grrr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/05/18 21:06:28 ajacoutot Exp $
d42 1
a42 2
CONFIGURE_ARGS=	--disable-silent-rules \
		--enable-randr \
@


1.6
log
@Nothing in the dep chain provides librsvg, so explicitely depend on it
so that the icon is correctly displayed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/03/02 06:41:33 ajacoutot Exp $
d9 1
a9 1
REVISION=	1
d37 1
a37 1
RUN_DEPENDS=	x11/gnome/librsvg
@


1.5
log
@Add missing RUN_DEPENDS on x11/py-gtk2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/19 07:23:12 espie Exp $
d9 1
a9 1
REVISION=	0
d34 4
@


1.4
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/11/03 07:12:40 ajacoutot Exp $
d9 2
d28 1
@


1.3
log
@Update to redshift-1.6.
Use MODPY_ADJ_FILES.

prodded by Remi Pointel on ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/09/06 06:22:08 ajacoutot Exp $
d25 3
a27 3
RUN_DEPENDS=	::devel/desktop-file-utils \
		::devel/py-xdg
LIB_DEPENDS=	::devel/gconf2
@


1.2
log
@Ooops tyop.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/09/06 06:21:19 ajacoutot Exp $
d5 2
a6 1
DISTNAME=	redshift-1.5
d21 1
a21 1
WANTLIB += dbus-1 gconf-2
d23 1
a23 1
MASTER_SITES=	http://launchpad.net/redshift/trunk/1.5/+download/
d41 1
a41 3
pre-configure:
	perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},' \
		${WRKSRC}/src/gtk-redshift/gtk-redshift
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
a25 1
		::py-xdg
@


1.1.1.1
log
@Import redshift-1.5

Redshift adjusts the color temperature of your screen according to your
surroundings. This may help your eyes hurt less if you are working in
front of the screen at night.
<...>


Input and ok sthen@@ kili@@
@
text
@@
