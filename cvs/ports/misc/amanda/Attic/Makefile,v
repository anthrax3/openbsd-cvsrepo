head	1.49;
access;
symbols
	OPENBSD_5_5:1.47.0.2
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.45.0.2
	OPENBSD_5_4_BASE:1.45
	OPENBSD_5_3:1.42.0.2
	OPENBSD_5_3_BASE:1.42
	OPENBSD_5_2:1.41.0.2
	OPENBSD_5_2_BASE:1.41
	OPENBSD_5_1_BASE:1.40
	OPENBSD_5_1:1.40.0.2
	OPENBSD_5_0:1.39.0.4
	OPENBSD_5_0_BASE:1.39
	OPENBSD_4_9:1.39.0.2
	OPENBSD_4_9_BASE:1.39
	OPENBSD_4_8:1.35.0.4
	OPENBSD_4_8_BASE:1.35
	OPENBSD_4_7:1.35.0.2
	OPENBSD_4_7_BASE:1.35
	OPENBSD_4_6:1.34.0.8
	OPENBSD_4_6_BASE:1.34
	OPENBSD_4_5:1.34.0.6
	OPENBSD_4_5_BASE:1.34
	OPENBSD_4_4:1.34.0.4
	OPENBSD_4_4_BASE:1.34
	OPENBSD_4_3:1.34.0.2
	OPENBSD_4_3_BASE:1.34
	OPENBSD_4_2:1.33.0.4
	OPENBSD_4_2_BASE:1.33
	OPENBSD_4_1:1.33.0.2
	OPENBSD_4_1_BASE:1.33
	OPENBSD_4_0:1.32.0.4
	OPENBSD_4_0_BASE:1.32
	OPENBSD_3_9:1.32.0.2
	OPENBSD_3_9_BASE:1.32
	OPENBSD_3_8:1.31.0.2
	OPENBSD_3_8_BASE:1.31
	OPENBSD_3_7:1.26.0.2
	OPENBSD_3_7_BASE:1.26
	OPENBSD_3_6:1.24.0.2
	OPENBSD_3_6_BASE:1.24
	OPENBSD_3_5:1.23.0.6
	OPENBSD_3_5_BASE:1.23
	OPENBSD_3_4:1.23.0.4
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.23.0.2
	OPENBSD_3_3_BASE:1.23
	OPENBSD_3_2:1.22.0.2
	OPENBSD_3_2_BASE:1.22
	OPENBSD_3_1:1.20.0.2
	OPENBSD_3_1_BASE:1.20
	OPENBSD_3_0:1.18.0.2
	OPENBSD_3_0_BASE:1.18
	OPENBSD_2_9_TRACKING_SWITCH:1.17
	OPENBSD_2_9:1.15.0.2
	OPENBSD_2_9_BASE:1.15
	OPENBSD_2_8:1.14.0.2
	OPENBSD_2_8_BASE:1.14
	OPENBSD_2_7:1.13.0.2
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	amanda2_3_0:1.1.1.1
	amanda:1.1.1;
locks; strict;
comment	@# @;


1.49
date	2014.07.11.17.02.56;	author ajacoutot;	state dead;
branches;
next	1.48;
commitid	HKumgKgP0iHnd1Zj;

1.48
date	2014.04.21.22.25.41;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2014.01.25.11.09.49;	author sthen;	state Exp;
branches;
next	1.46;

1.46
date	2013.12.22.10.38.18;	author landry;	state Exp;
branches;
next	1.45;

1.45
date	2013.04.27.15.44.21;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2013.03.21.08.46.33;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2013.03.11.11.23.56;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2012.04.28.10.52.08;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2011.09.19.10.14.04;	author nigel;	state Exp;
branches;
next	1.39;

1.39
date	2010.11.19.07.23.11;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.11.05.08.24.49;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2010.10.19.09.21.04;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2010.10.18.20.52.07;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2009.07.19.18.58.54;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2007.09.15.23.54.16;	author merdely;	state Exp;
branches;
next	1.33;

1.33
date	2006.11.21.22.19.01;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2005.11.25.09.08.01;	author sturm;	state Exp;
branches;
next	1.31;

1.31
date	2005.08.16.09.49.52;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2005.06.15.21.49.34;	author db;	state Exp;
branches;
next	1.29;

1.29
date	2005.05.31.09.09.30;	author db;	state Exp;
branches;
next	1.28;

1.28
date	2005.05.04.17.08.24;	author sturm;	state Exp;
branches;
next	1.27;

1.27
date	2005.04.06.00.19.10;	author pvalchev;	state Exp;
branches;
next	1.26;

1.26
date	2004.11.29.09.53.46;	author alek;	state Exp;
branches;
next	1.25;

1.25
date	2004.09.24.08.43.19;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2004.08.02.16.08.24;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2002.12.29.19.49.40;	author fgsch;	state Exp;
branches;
next	1.22;

1.22
date	2002.06.09.05.36.59;	author wilfried;	state Exp;
branches;
next	1.21;

1.21
date	2002.05.13.23.31.26;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2002.01.05.21.04.48;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2001.11.10.15.00.48;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2001.09.28.06.02.14;	author pvalchev;	state Exp;
branches;
next	1.17;

1.17
date	2001.05.12.16.41.08;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2001.05.06.02.29.37;	author lebel;	state Exp;
branches;
next	1.15;

1.15
date	2001.03.16.05.55.38;	author beck;	state Exp;
branches;
next	1.14;

1.14
date	2000.10.22.15.42.43;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.04.09.17.37.06;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.03.24.22.11.49;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.07.01.57.50;	author kevlo;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.03.11.25.05;	author turan;	state Exp;
branches;
next	1.9;

1.9
date	2000.03.01.10.08.07;	author turan;	state Exp;
branches;
next	1.8;

1.8
date	2000.02.15.05.04.47;	author turan;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.12.06.29.59;	author turan;	state Exp;
branches;
next	1.6;

1.6
date	99.06.22.17.01.17;	author niklas;	state Exp;
branches;
next	1.5;

1.5
date	99.03.11.22.48.16;	author niklas;	state Exp;
branches;
next	1.4;

1.4
date	99.02.21.04.26.15;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	99.01.27.00.22.35;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.01.16.11.29.25;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	97.12.09.06.23.36;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.09.06.23.36;	author joey;	state Exp;
branches;
next	;


desc
@@


1.49
log
@Remove, I doubt anyone can prove what we currently have actually works.

ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.48 2014/04/21 22:25:41 ajacoutot Exp $

BROKEN-alpha=	internal compiler error: in extract_insn, at recog.c:2077

# XXX -main contains the files from -client rather than depending it
COMMENT-main=	network-capable tape backup (client and tape server)
COMMENT-client=	network-capable tape backup (client only)
COMMENT-doc=	network-capable tape backup (documentation)

DISTVERSION=	2.4.5p1

# PKGVERSION=	${DISTVERSION}p1
# Minor patched releases are usually named with a "pX" suffix.
# These names can not be used with the OpenBSD ports framework.
PKGVERSION=   ${DISTVERSION:S/p/./}

DISTNAME=	amanda-${DISTVERSION}

PKGNAME-main=	amanda-${PKGVERSION}
PKGNAME-client=	amanda-client-${PKGVERSION}
PKGNAME-doc=	amanda-doc-${PKGVERSION}
REVISION-main=	5
REVISION-client=3

CATEGORIES=	misc

HOMEPAGE=	http://www.amanda.org/

MAINTAINER=	Olivier Cherrier <oc@@symacx.com>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=amanda/}

# AMANDA configure looks for gtar and smbclient so that it can hard-code
# the pathnames.
# Configure looks for gnuplot to see if it should build amplot.
BUILD_DEPENDS+= archivers/gtar \
		net/samba \
		math/gnuplot

# There is no need to set RUN_DEPENDS, because AMANDA will run fine
# without gtar, smbclient, and gnuplot.  They will only be required
# if the user creates a configuration that needs them, and then
# AMANDA will gracefully tell them what is required.

WANTLIB=		c m readline termcap
PKG_ARCH-doc=		*
WANTLIB-doc=
LIB_DEPENDS-doc=

MULTI_PACKAGES=	-main -client -doc

FLAVORS=	db gpg
FLAVOR?=

CONFIGURE_STYLE=		gnu
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/config

# Because AMANDA does not conform to shared library naming standards,
# and knowing that no software outside of AMANDA attempts to use the
# shared libraries, we disable the generation of shared libraries.
CONFIGURE_ARGS=	--disable-shared \
		--libexecdir=${PREFIX}/libexec/amanda \
		--with-configdir=${SYSCONFDIR}/amanda \
		--with-user=operator \
		--with-group=operator
USE_GROFF =	Yes

# Use this flavor to speed things up if you have large AMANDA
# databases.
.if ${FLAVOR:Mdb}
WANTLIB+=	lib/db4/db
LIB_DEPENDS+=	databases/db/v4
CONFIGURE_ARGS+= --with-db=db
CFLAGS+=	 -L${LOCALBASE}/lib
.endif

.if ${FLAVOR:Mgpg}
BUILD_DEPENDS+=  security/gnupg
CONFIGURE_ENV+=  GZIP=${LOCALBASE}/bin/gpgzip
.endif

LIBTOOL_FLAGS=	--tag=disable-shared

OLD_DOC_DIR=	${PREFIX}/share/amanda
DOC_DIR=	${PREFIX}/share/doc/amanda
EXAMPLE_DIR=	${PREFIX}/share/examples/amanda

post-install:
	chmod a+rX ${PREFIX}/sbin/amrecover
	@@cd ${WRKSRC}; \
	  ${INSTALL_DATA_DIR} ${DOC_DIR}; \
	  ${INSTALL_DATA} AUTHORS ${DOC_DIR}; \
	  ${INSTALL_DATA} NEWS ${DOC_DIR}; \
	  ${INSTALL_DATA} README ${DOC_DIR}; \
	  ${INSTALL_DATA} ChangeLog ${DOC_DIR}; \
	  mv ${OLD_DOC_DIR}/* ${DOC_DIR}; \
	  rmdir ${OLD_DOC_DIR}; \
	  ${INSTALL_DATA_DIR} ${EXAMPLE_DIR}; \
	  ${INSTALL_DATA} example/*.ps ${EXAMPLE_DIR}; \
	  ${INSTALL_DATA} example/disklist ${EXAMPLE_DIR}; \
	  cd example; \
	    for f in *.conf *.conf.chg-scsi; do \
	      sed -e 's,usr/adm,var,' \
		  -e 's,/usr/local/etc,${SYSCONFDIR},' $$f \
	      > ${EXAMPLE_DIR}/$$f; \
	    done
	@@sed -e 's,@@LOCALBASE@@,${LOCALBASE},' \
	  ${FILESDIR}/crontab.sample > ${EXAMPLE_DIR}/crontab.sample
	@@${INSTALL_DATA} /dev/null ${EXAMPLE_DIR}/amandates
	@@sed -e 's,@@LOCALBASE@@,${LOCALBASE},' \
	     -e 's,@@SYSCONFDIR@@,${SYSCONFDIR},' \
	     ${FILESDIR}/gpgzip > ${PREFIX}/bin/gpgzip;

.include <bsd.port.mk>
@


1.48
log
@No we do not support Kerberos 4 security.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/01/25 11:09:49 sthen Exp $
@


1.47
log
@don't install amrecover mode 550. it looks like upstream may have intended
it to be setuid but didn't actually make it so. add an XXX comment about
the file duplication between -main and -client.

note, this port is long overdue an update. it was blocked because of the
userland thread library, but now that we have rthreads it should be possible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/12/22 10:38:18 landry Exp $
d22 1
a22 1
REVISION-main=	4
@


1.46
log
@Mark as BROKEN-alpha, never built there.

protocol.c:983: error: unrecognizable insn:
(insn 303 302 304 25 (set (reg:DI 193)
        (plus:DI (reg/f:DI 65 virtual-stack-vars)
            (const_int -131212 [0xfffffffffffdff74]))) -1 (nil)
    (nil))
protocol.c:983: internal compiler error: in extract_insn, at recog.c:2077
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2013/04/27 15:44:21 ajacoutot Exp $
d5 1
d22 2
a23 2
REVISION-main=	3
REVISION-client=2
d49 1
a49 1
PKG_ARCH-doc=               *
d92 1
@


1.45
log
@Tweak MESSAGEs/READMEs now that inetd(8) is off by default.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.44 2013/03/21 08:46:33 ajacoutot Exp $
@


1.44
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/03/11 11:23:56 espie Exp $
d19 2
a20 2
REVISION-main=	2
REVISION-client=1
@


1.43
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/02/09 14:49:51 sthen Exp $
a81 1
USE_LIBTOOL=	Yes
@


1.42
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2012/04/28 10:52:08 ajacoutot Exp $
a29 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.41
log
@--localstatedir=/var is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/09/19 10:14:04 nigel Exp $
d73 1
a73 1
.if ${FLAVOR:L:Mdb}
d80 1
a80 1
.if ${FLAVOR:L:Mgpg}
@


1.40
log
@Update flavors

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/11/19 07:23:11 espie Exp $
a65 1
		--localstatedir=/var \
@


1.39
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/11/05 08:24:49 sthen Exp $
d19 2
a20 2
REVISION-main=	1
REVISION-client=0
d76 1
a76 1
LIB_DEPENDS+=	db->=4,<5:databases/db/v4
d82 1
a82 1
BUILD_DEPENDS+=  :gnupg-*:security/gnupg
@


1.38
log
@move to revision/new-style lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/10/19 09:21:04 sthen Exp $
d39 3
a41 3
BUILD_DEPENDS+= :gtar-*:archivers/gtar \
		:samba-*:net/samba \
		:gnuplot-*:math/gnuplot
d76 1
a76 1
LIB_DEPENDS+=	:db->=4,<5:databases/db/v4
@


1.37
log
@fix tabs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/10/18 20:52:07 espie Exp $
d16 2
a17 2
PKGNAME-main=	amanda-${PKGVERSION}p1
PKGNAME-client=	amanda-client-${PKGVERSION}p0
d19 2
d75 2
a76 1
LIB_DEPENDS+=    lib/db4/db.>=4:db->=4,<5:databases/db/v4
@


1.36
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/07/19 18:58:54 naddy Exp $
d68 1
a68 1
		USE_GROFF =	Yes
@


1.35
log
@fix the db4 dependency of the db flavor; ok maintainer Olivier Cherrier
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/09/15 23:54:16 merdely Exp $
d68 1
@


1.34
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/11/21 22:19:01 espie Exp $
d16 2
a17 2
PKGNAME-main=	amanda-${PKGVERSION}p0
PKGNAME-client=	amanda-client-${PKGVERSION}
d49 1
d72 1
a72 1
BUILD_DEPENDS+=  :db-4.*:databases/db/v4
@


1.33
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/11/25 09:08:01 sturm Exp $
d3 3
a5 3
COMMENT-main=	"network-capable tape backup (client and tape server)"
COMMENT-client=	"network-capable tape backup (client only)"
COMMENT-doc=	"network-capable tape backup (documentation)"
@


1.32
log
@update to amanda 2.4.5p1, from maintainer
USE_LIBTOOL and add annotations for non-regular ownership/mode
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/08/16 09:49:52 espie Exp $
d3 1
a3 1
COMMENT=	"network-capable tape backup (client and tape server)"
d16 1
a16 1
PKGNAME=	amanda-${PKGVERSION}
a30 1
WANTLIB=		c m readline termcap
d46 5
a50 2
MULTI_PACKAGES=	-client -doc
SUBPACKAGE?=
a82 5

.if defined(PACKAGING) && ${SUBPACKAGE} == "-doc"
PKG_ARCH=               *
WANTLIB=
.endif
@


1.31
log
@conflicts from the past: history since 3.7.

As noted on ports@@ recently, pkg_add -r relies on conflicts, and the
sheer existence of updates means we MUST take the past into account in
conflicts now.

Note the renaming of hugs98 to valid package names where versions are
concerned.

This commit shows clearly the renaming of the xfce4 plugin packages, the
ditching of eclipse flavors, the splitting of nessus into subpackages,
the splitting of various other software documentations, some packaging bugs
in kdeedu, and a lot of files moving around...

okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/06/15 21:49:34 db Exp $
d7 1
a7 1
DISTVERSION=	2.4.5
d9 1
a9 1
PKGVERSION=	${DISTVERSION}p1
d12 1
a12 1
# PKGVERSION=   ${DISTVERSION:S/p/./}
d78 3
@


1.30
log
@fix the path to the AMANDA binaries in the example crontab;
bump PKGVERSION

ok maintainer, sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/05/31 09:09:30 db Exp $
d9 1
a9 1
PKGVERSION=	${DISTVERSION}p0
@


1.29
log
@update to version 2.4.5; add db flavor for large AMANDA databases;
add gpg flavor for encrypted backups; move documentation to multipackage

ok sturm@@, maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/05/04 17:08:24 sturm Exp $
d9 1
a9 1
PKGVERSION=	${DISTVERSION}
@


1.28
log
@update to amanda 2.4.4p4

from new maintainer Olivier Cherrier <oc at symacx.com>
(old maintainer's email address is bouncing)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/04/06 00:19:10 pvalchev Exp $
d5 1
d7 1
a7 1
DISTVERSION=	2.4.4p4
d9 4
a12 3
# 2.4.4p4 is problematical as a package name, because we have been
# marking OpenBSD package revisions with a "pX" suffix.
PKGVERSION=	${DISTVERSION:S/p/./}
d18 1
d35 1
a35 1
# Amanda configure looks for gtar and smbclient so that it can hard-code
d42 1
a42 1
# There is no need to set RUN_DEPENDS, because Amanda will run fine
d45 1
a45 1
# Amanda will gracefully tell them what is required.
d47 1
a47 1
MULTI_PACKAGES=	-client
d50 3
d56 2
a57 2
# Because Amanda does not conform to shared library naming standards,
# and knowing that no software outside of Amanda attempts to use the
a58 1
# Use mmap instead of shm to work around broken uvm post 2.7.
a62 1
		--with-mmap \
d66 18
d106 2
a107 1
	@@${INSTALL_DATA} ${FILESDIR}/crontab.sample ${EXAMPLE_DIR}
d109 3
@


1.27
log
@tsk tsk... fix broken samba dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/11/29 09:53:46 alek Exp $
d6 1
a6 1
DISTVERSION=	2.4.2p2
d8 1
a8 1
# 2.4.2p2 is problematical as a package name, because we have been
d10 1
a10 1
PKGVERSION=	${DISTVERSION:S/p/./}p0
d21 1
a21 1
MAINTAINER=	Tom Schutter <t.schutter@@att.net>
d30 1
a30 2
MASTER_SITES=	ftp://ftp.amanda.org/pub/amanda/ \
		${MASTER_SITE_SOURCEFORGE:=amanda/}
d45 1
d47 1
a47 10
# 2.4.2 exposed a bug in BSD make.
# Please see http://www.egroups.com/message/amanda-hackers/2333 (and
# following thread).
#
# (Summary:  yes; appears to be a problem with FreeBSD make; see
# http://www.FreeBSD.org/cgi/query-pr.cgi?pr=23328 for that part.  A
# circumvention is to hack the Makefiles; another is to use gmake.)
USE_GMAKE=	Yes

CONFIGURE_STYLE=gnu
d69 4
a72 3
          ${INSTALL_DATA} AUTHORS ${DOC_DIR}; \
          ${INSTALL_DATA} NEWS ${DOC_DIR}; \
          ${INSTALL_DATA} README ${DOC_DIR}; \
@


1.26
log
@- Replace DEINSTALL* with UNMESSAGE*
- Add WANTLIB marker
- Bump PKGNAME

ok Tom Schutter (MAINTAINER), pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/09/24 08:43:19 espie Exp $
d37 1
a37 1
		:samba-*:net/samba/stable \
@


1.25
log
@kill INSTALL, don't do that much on DEINSTALL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2004/08/02 16:08:24 naddy Exp $
d10 1
a10 1
PKGVERSION=	${DISTVERSION:S/p/./}
d28 1
@


1.24
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/12/29 19:49:40 fgsch Exp $
d92 1
@


1.23
log
@yet more NEED_VERSION removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/06/09 05:36:59 wilfried Exp $
d56 1
a56 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/config
@


1.22
log
@add specifier to RUN_DEPENDS and BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/05/13 23:31:26 espie Exp $
a17 1
NEED_VERSION=	1.489
@


1.21
log
@More MASTER_SITES_SUBDIR out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/01/05 21:04:48 naddy Exp $
d36 3
a38 3
BUILD_DEPENDS+= ::archivers/gtar \
		::net/samba/stable \
		::math/gnuplot
@


1.20
log
@adjust samba dependency to match new location
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/11/10 15:00:48 espie Exp $
d31 1
a31 2
		${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR=	amanda
@


1.19
log
@Kill first component of BUILD_DEPENDS.

Fix sawfish comment while I'm at it.
`window manager for the X windows system'.
Like DUH ! It's going to be a window manager for my microwave oven ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/09/28 06:02:14 pvalchev Exp $
d38 1
a38 1
		::net/samba \
@


1.18
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/05/12 16:41:08 naddy Exp $
d18 1
a18 1
NEED_VERSION=	1.402
d37 3
a39 3
BUILD_DEPENDS+= gtar::archivers/gtar \
		smbclient::net/samba \
		gnuplot::math/gnuplot
@


1.17
log
@Update amanda to 2.4.2p2.  Overhaul port completely.
Submitted by Tom Schutter <t.schutter@@att.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/05/06 02:29:37 lebel Exp $
d58 1
@


1.16
log
@misc: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/03/16 05:55:38 beck Exp $
d3 13
a15 1
COMMENT=	"Advanced Maryland Automatic Network Disk Archiver"
a16 1
DISTNAME=	amanda-2.4.1p1
a18 1
FAKE=No
d20 1
d22 1
a22 1
MAINTAINER=	ports@@openbsd.org
d24 1
a24 1
LICENSE_TYPE=		BSD
d30 26
a55 1
MASTER_SITES=	ftp://ftp.cs.umd.edu/pub/amanda/
d59 6
a64 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
d66 2
a67 1
		--with-gnutar_list_dir=/var/db/amanda/gnutar-lists \
a68 1
		--with-mmap \
d71 2
d77 6
a83 1
	  ${INSTALL_DATA} docs/* ${EXAMPLE_DIR}; \
d85 8
a92 5
	  (cd example; \
	   for f in *.conf; do \
	     sed -e 's,usr/adm,var,' \
		 -e 's,/usr/local,,' $$f > ${EXAMPLE_DIR}/$$f; \
	   done)
@


1.15
log
@use mmap instead of shm to work around broken uvm post 2.7
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.14 2000/10/22 15:42:43 espie Exp $
d7 1
a7 1
NEED_VERSION=	1.305
@


1.14
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/04/09 17:37:06 espie Exp $
d25 1
@


1.13
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/03/24 22:11:49 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.64
d19 1
a19 1
GNU_CONFIGURE=	Yes
@


1.12
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/03/07 01:57:50 kevlo Exp $
d6 1
@


1.11
log
@Mark unbroken. Install architecture dependent data to ${PREFIX}/lib/amanda
and fix the INSTALL script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/03/03 11:25:05 turan Exp $
d5 1
a6 1
NEED_VERSION=	1.64
d11 4
a14 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d18 1
a18 1
GNU_CONFIGURE=	yes
a26 2
pre-install:
	@@${SH} ${PKGDIR}/INSTALL ${DISTNAME} PRE-INSTALL
d29 1
a29 1
	@@(cd ${WRKSRC}; \
d37 1
a37 3
	   done))
	@@PREFIX="${PREFIX}" EXAMPLE_DIR="${EXAMPLE_DIR}" \
	 ${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.10
log
@broken, installs files automatically in /etc
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.9 2000/03/01 10:08:07 turan Exp $

BROKEN=		installs files automatically in /etc
a20 1
		--sysconfdir=/etc \
@


1.9
log
@change maintainer to ports@@openbsd.org as requested
@
text
@d1 3
a3 2
# $OpenBSD: Makefile,v 1.8 2000/02/15 05:04:47 turan Exp $
#
@


1.8
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/02/12 06:29:59 turan Exp $
d9 1
a9 1
MAINTAINER=	marc@@OpenBSD.ORG
@


1.7
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/06/22 17:01:17 niklas Exp $
d12 4
a15 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.6
log
@Place the listdir under /var/db/amanda
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/03/11 22:48:16 niklas Exp $
d10 6
@


1.5
log
@Make compile on alpha
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/02/21 04:26:15 marc Exp $
d18 1
@


1.4
log
@needs version 1.64 (or later) of bsd.port.mk
to build/install correctly; PLIST.noshared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/01/27 00:22:35 marc Exp $
d15 2
a16 1
CONFIGURE_ARGS=	--sysconfdir=/etc \
@


1.3
log
@fix the remainder of long COMMENT files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1998/01/16 11:29:25 niklas Exp $
d6 2
@


1.2
log
@General beef-up.  Depend on gtar, fix paths, move config back to /etc etc.
@
text
@d1 1
a1 6
# OpenBSD makefile for:	amanda
# Version required:			2.3.0
# Date created:				9 Dec 1997
# Whom:					ejovi
#
# $OpenBSD: Makefile,v 1.1.1.1 1997/12/09 06:23:36 joey Exp $
d4 1
a4 1
DISTNAME=	amanda-2.3.0
a5 1
MASTER_SITES=	ftp://ftp.cs.umd.edu/pub/amanda/
d7 1
a7 1
MAINTAINER=	joey@@OpenBSD.ORG
d9 1
a9 1
BUILD_DEPENDS=	${PREFIX}/bin/gtar:${PORTSDIR}/archivers/gtar
d11 1
a11 3
PATCH_STRIP=	
MAN8=		amanda.8 amadmin.8 amcheck.8 amcleanup.8 amdump.8 \
		amflush.8 amlabel.8 amrestore.8  amtape.8
d13 8
a20 2
pre-configure:
	echo "${CFLAGS}" > /tmp/build-ports-misc-amanda-cflags
d23 11
a33 2
	mkdir -p ${PREFIX}/share/examples/amanda
	cp -R ${WRKSRC}/example/* ${PREFIX}/share/examples/amanda
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD$
d14 2
@


1.1.1.1
log
@
@
text
@@
