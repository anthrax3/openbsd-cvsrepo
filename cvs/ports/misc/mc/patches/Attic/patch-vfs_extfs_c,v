head	1.2;
access;
symbols
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2005.07.31.13.51.50;	author robert;	state dead;
branches;
next	1.1;

1.1
date	2005.02.17.21.59.11;	author robert;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.02.20.10.00.22;	author robert;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to version 4.6.1;

from Bernd Ahlers <b.ahlers@@ba-net.org>
@
text
@$OpenBSD: patch-vfs_extfs_c,v 1.1 2005/02/17 21:59:11 robert Exp $
--- vfs/extfs.c.orig	Thu Feb 17 22:31:24 2005
+++ vfs/extfs.c	Thu Feb 17 22:32:43 2005
@@@@ -1281,14 +1281,13 @@@@
 	    g_free (mc_extfsini);
 	    return 0;
 	}
-	if (*key == '#')
+	if (*key == '#' || *key == '\n')
 	    continue;
 
 	if ((c = strchr (key, '\n'))){
-	    *c = 0;
+	    *c-- = 0;
+	} else {	/* Last line without newline or strlen (key) > 255 */
 	    c = &key [strlen (key) - 1];
-	} else {
-	    c = key;
 	}
 	extfs_need_archive [extfs_no] = !(*c == ':');
 	if (*c == ':')
@


1.1
log
@SECURITY:
fix several vulnerabilites;
http://www.vuxml.org/openbsd/4ccf3184-812c-11d9-b5a5-080020fe8945.html

via/from Gentoo
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@SECURITY:
fix several vulnerabilites;
http://www.vuxml.org/openbsd/4ccf3184-812c-11d9-b5a5-080020fe8945.html

ok brad@@
@
text
@@

