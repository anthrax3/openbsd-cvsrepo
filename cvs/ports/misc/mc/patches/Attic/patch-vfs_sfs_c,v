head	1.2;
access;
symbols
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2005.07.31.13.51.50;	author robert;	state dead;
branches;
next	1.1;

1.1
date	2005.02.17.21.59.11;	author robert;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.02.20.10.00.22;	author robert;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to version 4.6.1;

from Bernd Ahlers <b.ahlers@@ba-net.org>
@
text
@$OpenBSD: patch-vfs_sfs_c,v 1.1 2005/02/17 21:59:11 robert Exp $
--- vfs/sfs.c.orig	Thu Feb 17 22:29:12 2005
+++ vfs/sfs.c	Thu Feb 17 22:31:11 2005
@@@@ -343,13 +343,14 @@@@
 	    }
 
 	if (!semi){
+invalid_line:
 	    fprintf (stderr, _("Warning: Invalid line in %s:\n%s\n"),
 		     "sfs.ini", key);
 	    continue;
 	}
 
 	c = semi + 1;
-	while ((*c != ' ') && (*c != '\t')) {
+	while (*c && (*c != ' ') && (*c != '\t')) {
 	    switch (*c) {
 	    case '1': flags |= F_1; break;
 	    case '2': flags |= F_2; break;
@@@@ -360,6 +361,8 @@@@
 	    }	    
 	    c++;
 	}
+	if (!*c)
+	    goto invalid_line;
 	c++;
 	*(semi+1) = 0;
 	if ((semi = strchr (c, '\n')))
@


1.1
log
@SECURITY:
fix several vulnerabilites;
http://www.vuxml.org/openbsd/4ccf3184-812c-11d9-b5a5-080020fe8945.html

via/from Gentoo
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@SECURITY:
fix several vulnerabilites;
http://www.vuxml.org/openbsd/4ccf3184-812c-11d9-b5a5-080020fe8945.html

ok brad@@
@
text
@@

