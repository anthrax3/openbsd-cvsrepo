head	1.3;
access;
symbols
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2005.07.31.13.51.50;	author robert;	state dead;
branches;
next	1.2;

1.2
date	2005.02.17.21.59.11;	author robert;	state Exp;
branches;
next	1.1;

1.1
date	2004.04.11.00.40.59;	author naddy;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2005.02.20.10.00.22;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to version 4.6.1;

from Bernd Ahlers <b.ahlers@@ba-net.org>
@
text
@$OpenBSD: patch-src_utilunix_c,v 1.2 2005/02/17 21:59:11 robert Exp $
--- src/utilunix.c.orig	Fri Nov 28 16:23:19 2003
+++ src/utilunix.c	Thu Feb 17 22:28:40 2005
@@@@ -234,9 +234,9 @@@@
 	signal (SIGCHLD, SIG_DFL);
 
 	if (flags & EXECUTE_AS_SHELL)
-	    execl (shell, shell, "-c", command, NULL);
+	    execl (shell, shell, "-c", command, (char *)NULL);
 	else
-	    execlp (shell, shell, command, NULL);
+	    execlp (shell, shell, command, (char *)NULL);
 
 	_exit (127);		/* Exec error */
     } else {
@@@@ -429,7 +429,7 @@@@
 	close (2);
 	dup (old_error);
 	close (old_error);
-	len = read (error_pipe[0], msg, MAX_PIPE_SIZE);
+	len = read (error_pipe[0], msg, MAX_PIPE_SIZE - 1);
 
 	if (len >= 0)
 	    msg[len] = 0;
@


1.2
log
@SECURITY:
fix several vulnerabilites;
http://www.vuxml.org/openbsd/4ccf3184-812c-11d9-b5a5-080020fe8945.html

via/from Gentoo
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Unbreak and update to mc-4.6.1-pre1 from new maintainer
Robert Nagy <thuglife@@bsd.hu>.
@
text
@d2 3
a4 3
--- src/utilunix.c.orig	2003-11-28 16:23:19.000000000 +0100
+++ src/utilunix.c	2004-04-11 02:36:03.000000000 +0200
@@@@ -234,9 +234,9 @@@@ int my_system (int flags, const char *sh
d16 9
@


1.1.2.1
log
@SECURITY:
fix several vulnerabilites;
http://www.vuxml.org/openbsd/4ccf3184-812c-11d9-b5a5-080020fe8945.html

ok brad@@
@
text
@d2 3
a4 3
--- src/utilunix.c.orig	Fri Nov 28 16:23:19 2003
+++ src/utilunix.c	Thu Feb 17 22:28:40 2005
@@@@ -234,9 +234,9 @@@@
a15 9
@@@@ -429,7 +429,7 @@@@
 	close (2);
 	dup (old_error);
 	close (old_error);
-	len = read (error_pipe[0], msg, MAX_PIPE_SIZE);
+	len = read (error_pipe[0], msg, MAX_PIPE_SIZE - 1);
 
 	if (len >= 0)
 	    msg[len] = 0;
@


