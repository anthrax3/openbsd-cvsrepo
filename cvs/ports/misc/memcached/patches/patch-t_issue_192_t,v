head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.14
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.12
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.10
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.6
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2014.07.15.18.17.06;	author giovanni;	state Exp;
branches;
next	1.1;
commitid	pqOLzhTqg9WpiJnT;

1.1
date	2014.01.05.13.32.43;	author jasper;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2014.01.05.13.34.49;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@
Long overdue update to 1.4.20 and take maintainership
ok sthen@@
@
text
@$OpenBSD: patch-t_issue_192_t,v 1.1 2014/01/05 13:32:43 jasper Exp $

Test case for CVE-2011-4971
https://github.com/memcached/memcached/commit/6695ccbc525c36d693aaa3e8337b36aa0c784424

--- t/issue_192.t.orig	Mon Apr 28 07:51:18 2014
+++ t/issue_192.t	Mon Jul 14 11:38:18 2014
@@@@ -2,6 +2,7 @@@@
 
 use strict;
 use Test::More tests => 2;
+use Test::MockSleep;
 use FindBin qw($Bin);
 use lib "$Bin/lib";
 use MemcachedTest;
@@@@ -15,6 +16,3 @@@@ print $sock "\x80\x12\x00\x01\x08\x00\x00\x00\xff\xff\
 
 sleep 0.5;
 ok($server->new_sock, "failed to open new socket");
-
-
-
@


1.1
log
@security fixes for CVE-2011-4971 and CVE-2013-0179

from donovan watteau
@
text
@d1 1
a1 1
$OpenBSD$
d6 17
a22 23
--- t/issue_192.t.orig	Thu Jan  2 16:48:36 2014
+++ t/issue_192.t	Thu Jan  2 16:48:36 2014
@@@@ -0,0 +1,20 @@@@
+#!/usr/bin/perl
+
+use strict;
+use Test::More tests => 2;
+use FindBin qw($Bin);
+use lib "$Bin/lib";
+use MemcachedTest;
+
+my $server = new_memcached();
+my $sock = $server->sock;
+
+ok($server->new_sock, "opened new socket");
+
+print $sock "\x80\x12\x00\x01\x08\x00\x00\x00\xff\xff\xff\xe8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\x01\x00\x00\x00\x00\x00\x00\x00\x00\x000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00";
+
+sleep 0.5;
+ok($server->new_sock, "failed to open new socket");
+
+
+
@


1.1.2.1
log
@security fixes for CVE-2011-4971 and CVE-2013-0179

from donovan watteau
@
text
@@

