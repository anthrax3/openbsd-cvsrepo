head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.76
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.74
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.72
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.68
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.70
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.66
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.64
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.62
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.60
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.58
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.56
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.54
	OPENBSD_5_0:1.2.0.52
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.50
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.48
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.46
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.44
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.42
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.40
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.38
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.36
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.34
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.32
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.30
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.28
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.26
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.24
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.22
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.20
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.18
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.16
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.14
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.12
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.10
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.8
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.6
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.4
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	buffer1_17:1.1.1.1
	buffer:1.1.1;
locks; strict;
comment	@# @;


1.2
date	99.03.11.20.19.30;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.12.17.23.11.45;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.12.17.23.11.45;	author joey;	state Exp;
branches;
next	;


desc
@@


1.2
log
@general clean-up; Christian Weisgerber <naddy@@unix-ag.uni-kl.de>
@
text
@Buffer reads from standard input reblocking to the given blocksize
and writes each block to standard output.

Internally, buffer is a pair of processes communicating via a large
circular queue held in shared memory. This means you *must* have a
kernel with

  options SYSVSHM

compiled in. The reader process only has to block when the queue
is full and the writer process when the queue is empty. Buffer is
designed to try and keep the writer side continuously busy so that
it can stream when writing to tape drives. When used to write tapes
with an intervening network, buffer can result in a considerable
increase in throughput.

- Christian "naddy" Weisgerber
  <naddy@@unix-ag.uni-kl.de>
@


1.1
log
@Initial revision
@
text
@d1 2
a2 3
This is a program designed to speed up writing tapes on remote tape
drives.  Requirements are shared memory and locks which normally
means that these are supported in your kernel.
d4 12
a15 3
[for FreeBSD, this means you MUST have a kernel with 
 options SYSVSHM
 compiled in - markm]
d17 2
a18 19
Buffer has been tested under OpenBSD SunOS 4.0.*, SunOS 4.1.*, Solarix,
HP-UX 7.0, and Gould UTX 2.1A (sv universe).

The program splits itself into two processes.  The first process reads
(and reblocks) from stdin into a shared memory buffer.  The second
writes from the shared memory buffer to stdout.  Doing it this way
means that the writing side effectly sits in a tight write loop and
doesn't have to wait for input.  Similarly for the input side.  It is
this waiting that slows down other reblocking processes, like dd.

I run an archive and need to write large chunks out to tape regularly
with an ethernet in the way.  Using 'buffer' in a command like:

	tar cvf - stuff | rsh somebox "buffer > /dev/rst8"

is a factor of 5 faster than the best alternative, gnu tar with its
remote tape option:

	tar cvf somebox:/dev/rst8 stuff
@


1.1.1.1
log
@
buffer 
@
text
@@
