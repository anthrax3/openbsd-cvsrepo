head	1.4;
access;
symbols
	OPENBSD_4_6:1.3.0.24
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.22
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.20
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.18
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.16
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.14
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.12
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.10
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.8
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.6
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2009.08.18.23.58.56;	author jolan;	state dead;
branches;
next	1.3;

1.3
date	2004.01.12.05.37.11;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2003.06.20.10.03.50;	author jolan;	state dead;
branches;
next	1.1;

1.1
date	2003.02.17.18.10.35;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to 0.98a16
@
text
@$OpenBSD: patch-src_xtools_c,v 1.3 2004/01/12 05:37:11 jolan Exp $
--- src/xtools.c.orig	2003-10-30 07:06:17.000000000 -0600
+++ src/xtools.c	2004-01-11 22:35:32.000000000 -0600
@@@@ -3635,7 +3635,7 @@@@ gchar *convert_for_gtk2_textwidget(gchar
 	return str;
 #else
 gchar *locstr;
-gint in, out;
+gsize in, out;
 
 	locstr = g_locale_from_utf8(str, strlen(str), &in, &out, NULL);
 	if (locstr) {
@@@@ -3655,16 +3655,20 @@@@ gchar *convert_for_gtk2_filename(gchar *
 	return str;
 #else
 gchar *locstr;
-gint in, out;
+gsize in, out;
 
 	/* ok, if your filesystem is already UTF8 we are not 
 	   allowed to change the filenames here. */
 	if (c_locale_is_utf8)
 		return str;
 
-	/* should be logical to use g_filename_from_utf8() here, but
-	   somehow this works not correctly on my testsystem */
+#ifdef BROKEN_GTK2_LOCALE
+	/* on my redhat 7.3 system it does only work that way, but
+	   on other systems the correct way is in the #else branch */ 
 	locstr = g_locale_from_utf8(str, strlen(str), &in, &out, NULL);
+#else
+	locstr = g_filename_from_utf8(str, strlen(str), &in, &out, NULL);
+#endif
 	if (locstr) {
 		strncpy(str, locstr, MAXLINE);
 	}
@


1.3
log
@switch to gtk+2 now that it works on sparc64, bump PKGNAME
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@upgrade to 0.98a14
@
text
@d1 9
a9 6
$OpenBSD: patch-src_xtools_c,v 1.1 2003/02/17 18:10:35 naddy Exp $
--- src/xtools.c.orig	Tue Dec 31 08:29:27 2002
+++ src/xtools.c	Wed Feb  5 18:06:51 2003
@@@@ -2559,6 +2559,7 @@@@ gint count;
 /* do change the group rights for nonroot mode */
 /* this seems only be required with /bin/sh being bash2 */
d11 8
a18 2
+#if 0
 void fix_guid() {
d20 13
a32 6
 	dodebug(3,"Current gid/egid = %d/%d\n", getgid(), getegid());
@@@@ -2570,7 +2571,7 @@@@ void fix_guid() {
 	setregid(getegid(), getgid());
 	dodebug(3,"Current gid/egid after setregid = %d/%d\n", getgid(), getegid());
 }
-
d34 3
a36 3
 
 /* check if a given group-id matches a groupname */
 
@


1.1
log
@Update to 0.98alpha13 for compatibility with cdrtools 2.0.
From: Jolan Luff <jolan@@cryptonomicon.org>
@
text
@d1 1
a1 1
$OpenBSD$
@

