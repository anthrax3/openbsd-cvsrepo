head	1.3;
access;
symbols
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.30
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.28
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.26
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.24
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.22
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.20
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.18
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.16
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.14
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.12
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.10
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.8
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.6
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2011.04.17.18.23.19;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2010.05.19.13.45.15;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.12.30.09.15.26;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- remove unnecessary NULL casts
@
text
@$OpenBSD: patch-lib_signature_c,v 1.2 2010/05/19 13:45:15 espie Exp $
--- lib/signature.c.orig	Wed Jun 14 14:34:31 2000
+++ lib/signature.c	Wed May 19 05:28:31 2010
@@@@ -253,11 +253,11 @@@@ static int makePGPSignature(const char *file, /*@@out@@*
 	    switch(pgpVer) {
 	    case PGP_2:
 		execlp(path, "pgp", "+batchmode=on", "+verbose=0", "+armor=off",
-		    name, "-sb", file, sigfile, NULL);
+		    name, "-sb", file, sigfile, (void *)NULL);
 		break;
 	    case PGP_5:
 		execlp(path,"pgps", "+batchmode=on", "+verbose=0", "+armor=off",
-		    name, "-b", file, "-o", sigfile, NULL);
+		    name, "-b", file, "-o", sigfile, (void *)NULL);
 		break;
 	    case PGP_UNKNOWN:
 	    case PGP_NOTDETECTED:
@@@@ -340,7 +340,7 @@@@ static int makeGPGSignature(const char *file, /*@@out@@*
 	execlp("gpg", "gpg",
 	       "--batch", "--no-verbose", "--no-armor", "--passphrase-fd", "3",
 	       "-u", name, "-sbo", sigfile, file,
-	       NULL);
+	       (void *)NULL);
 	rpmError(RPMERR_EXEC, _("Couldn't exec gpg"));
 	_exit(RPMERR_EXEC);
     }
@@@@ -536,14 +536,14 @@@@ static int verifyPGPSignature(const char *datafile, vo
 		   "+OutputInformationFD=1",
 		   /* Write "WARNING: ... is not trusted to... to stdout: */
 		   "+OutputWarningFD=1",
-		   sigfile, "-o", datafile, NULL);
+		   sigfile, "-o", datafile, (void *)NULL);
 	    /* Restore stderr so we can print the error message below. */
 	    dup2(save_stderr, 2);
 	    close(save_stderr);
 	}   break;
 	case PGP_2:
 	    execlp(path, "pgp", "+batchmode=on", "+verbose=0",
-		   sigfile, datafile, NULL);
+		   sigfile, datafile, (void *)NULL);
 	    break;
 	case PGP_UNKNOWN:
 	case PGP_NOTDETECTED:
@@@@ -622,7 +622,7 @@@@ static int verifyGPGSignature(const char *datafile, vo
 	execlp("gpg", "gpg",
 	       "--batch", "--no-verbose", 
 	       "--verify", sigfile, datafile,
-	       NULL);
+	       (void *)NULL);
 	fprintf(stderr, _("exec failed!\n"));
 	rpmError(RPMERR_EXEC, 
 		 _("Could not run gpg.  Use --nogpg to skip GPG checks."));
@@@@ -683,7 +683,7 @@@@ static int checkPassPhrase(const char *passPhrase, con
 	    execlp("gpg", "gpg",
 	           "--batch", "--no-verbose", "--passphrase-fd", "3",
 	           "-u", name, "-so", "-",
-	           NULL);
+	           (void *)NULL);
 	    rpmError(RPMERR_EXEC, _("Couldn't exec gpg"));
 	    _exit(RPMERR_EXEC);
 	}   /*@@notreached@@*/ break;
@@@@ -702,11 +702,11 @@@@ static int checkPassPhrase(const char *passPhrase, con
 		switch(pgpVer) {
 		case PGP_2:
 		    execlp(path, "pgp", "+batchmode=on", "+verbose=0",
-			name, "-sf", NULL);
+			name, "-sf", (void *)NULL);
 		    break;
 		case PGP_5:	/* XXX legacy */
 		    execlp(path,"pgps", "+batchmode=on", "+verbose=0",
-			name, "-f", NULL);
+			name, "-f", (void *)NULL);
 		    break;
 		case PGP_UNKNOWN:
 		case PGP_NOTDETECTED:
@


1.2
log
@preproc trick to avoid our getmntent when we define a static of the
same name.

Appeases gcc4
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_signature_c,v 1.1 2002/12/30 09:15:26 pvalchev Exp $
@


1.1
log
@final round:
cast NULL sentinel to void * so it is 64bit on alpha & sparc64, use
NULL instead of '0' where appropriate.
@
text
@d1 4
a4 4
$OpenBSD$
--- lib/signature.c.orig	Mon Dec 30 00:27:20 2002
+++ lib/signature.c	Mon Dec 30 00:28:17 2002
@@@@ -253,11 +253,11 @@@@ static int makePGPSignature(const char *
d18 1
a18 1
@@@@ -340,7 +340,7 @@@@ static int makeGPGSignature(const char *
d27 1
a27 1
@@@@ -536,14 +536,14 @@@@ static int verifyPGPSignature(const char
d44 1
a44 1
@@@@ -622,7 +622,7 @@@@ static int verifyGPGSignature(const char
d53 1
a53 1
@@@@ -683,7 +683,7 @@@@ static int checkPassPhrase(const char *p
d62 1
a62 1
@@@@ -702,11 +702,11 @@@@ static int checkPassPhrase(const char *p
@

