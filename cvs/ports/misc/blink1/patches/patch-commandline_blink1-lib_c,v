head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.6
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.12.23.10.53.54;	author bluhm;	state Exp;
branches;
next	;
commitid	mSNKIWDrDNYMhaAY;


desc
@@


1.1
log
@Update blink1 to 1.98.  Replace sprintf() and strcpy() with snprintf()
and strncpy() to avoid linker warnings.  Fix a bus error that occurs
when pulling the blink(1) device from the USB port while running
blink1-tool --blink.
OK jung@@
@
text
@$OpenBSD$
--- commandline/blink1-lib.c.orig	Wed Sep  9 03:06:56 2015
+++ commandline/blink1-lib.c	Wed Dec 23 00:00:26 2015
@@@@ -102,7 +102,7 @@@@ int blink1_getCacheIndexById( uint32_t i )
 {
     if( i > blink1_max_devices ) { // then i is a serial number not an array index
         char serialstr[serialstrmax];
-        sprintf( serialstr, "%X", i);  // convert to wchar_t* 
+        snprintf(serialstr, sizeof(serialstr), "%X", i); // convert to wchar_t*
         return blink1_getCacheIndexBySerial( serialstr );
     }
     return i;
@
