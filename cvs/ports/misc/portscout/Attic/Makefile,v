head	1.9;
access;
symbols
	jasper_20140209:1.1.1.1 jasper:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2014.09.05.14.39.08;	author jasper;	state dead;
branches;
next	1.8;
commitid	PqhPgHRNk79Bmrvw;

1.8
date	2014.09.04.18.38.04;	author jasper;	state Exp;
branches;
next	1.7;
commitid	w0dzWHdC3RYxsG4K;

1.7
date	2014.09.03.19.24.36;	author jasper;	state Exp;
branches;
next	1.6;
commitid	I3QwrldGmiST9y35;

1.6
date	2014.09.03.12.12.42;	author jasper;	state Exp;
branches;
next	1.5;
commitid	uJvT31dDQFcTWaWT;

1.5
date	2014.09.03.05.57.51;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	1xz0JJbkxOAe5Ghr;

1.4
date	2014.09.02.17.43.10;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	oXoan0EXaTcTVEX3;

1.3
date	2014.09.02.15.12.22;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	fMx9SaZYqzp9fQTI;

1.2
date	2014.09.02.15.04.59;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	W7VRoMLVKn81RSi9;

1.1
date	2014.09.02.12.31.47;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	9S8YJNLp4RdbFHk7;

1.1.1.1
date	2014.09.02.12.31.47;	author jasper;	state Exp;
branches;
next	;
commitid	9S8YJNLp4RdbFHk7;


desc
@@


1.9
log
@portscout is dead, long live portroach!
@
text
@# $OpenBSD: Makefile,v 1.8 2014/09/04 18:38:04 jasper Exp $

COMMENT=		ports tree version scanner

# git clone 702b8944 taken from https://github.com/jasperla/portscout/
DISTNAME=		portscout-0.8.1.4
CATEGORIES=		misc

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>

HOMEPAGE=		http://www.inerd.com/software/portscout/

# BSD
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		http://distfiles.nl/

MODULES=		perl

RUN_DEPENDS=		converters/p5-JSON \
			devel/p5-Try-Tiny \
			mail/p5-MIME-Lite \
			sysutils/p5-Proc-Queue \
			textproc/p5-XML-XPath \
			www/p5-HTML-Parser \
			www/p5-URI \
			www/p5-XML-Feed \
			www/p5-libwww

# database
RUN_DEPENDS +=		p5-DBD-SQLite-*|p5-DBD-Pg-*:databases/p5-DBD-SQLite

PKG_ARCH=		*
NO_BUILD=		Yes
NO_TEST=		Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/portscout.conf

do-install:
	${INSTALL_SCRIPT} ${WRKSRC}/portscout.pl ${PREFIX}/bin/portscout
	${INSTALL_DATA_DIR} ${PREFIX}/share/portscout/{sql,templates}/
	${INSTALL_DATA} ${WRKSRC}/templates/* \
		${PREFIX}/share/portscout/templates/
	${INSTALL_DATA} ${WRKSRC}/sql/* \
		${PREFIX}/share/portscout/sql/
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/portscout/
	${INSTALL_DATA} ${WRKSRC}/portscout.conf \
		${PREFIX}/share/examples/portscout/
	${INSTALL_DATA_DIR} ${PREFIX}/${P5SITE}/Portscout/
	cd ${WRKSRC}/Portscout/ && umask 022 && pax -rw . \
		${PREFIX}/${P5SITE}/Portscout/
	${INSTALL_DATA} ${WRKSRC}/Portscout.pm ${PREFIX}/${P5SITE}/
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/portscout/
.for f in README UPDATING docs/portscout-portconfig.txt
	${INSTALL_DATA} ${WRKSRC}/$f ${PREFIX}/share/doc/portscout/
.endfor
	/usr/bin/pod2man ${WRKSRC}/portscout.pod > ${PREFIX}/man/man1/portscout.1

.include <bsd.port.mk>
@


1.8
log
@add dedicated handlers for CPAN, Hackage and Rubygems to prevent pounding the master
sites and instead query the relevant APIs for the latest version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/09/03 19:24:36 jasper Exp $
@


1.7
log
@- unbreak the sourceforge scanner and add a scanner for ports with releases on github
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/09/03 12:12:42 jasper Exp $
d5 2
a6 2
# git clone 415049e taken from https://github.com/jasperla/portscout/
DISTNAME=		portscout-0.8.1.3
d20 2
a21 1
RUN_DEPENDS=		devel/p5-Try-Tiny \
d25 1
@


1.6
log
@sync with upstream git:
- prevent annoying warning with empty master sites
- enable reading PORTSCOUT variable on OpenBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/09/03 05:57:51 ajacoutot Exp $
d5 2
a6 2
# git clone cf5e2968 taken from https://github.com/jasperla/portscout/
DISTNAME=		portscout-0.8.1.2
d25 1
@


1.5
log
@Install missing reminder.mail template.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2014/09/02 17:43:10 ajacoutot Exp $
d5 2
a6 2
# git clone c17d10110f taken from https://github.com/jasperla/portscout/
DISTNAME=		portscout-0.8.1.1
a7 1
REVISION=		3
@


1.4
log
@Tweak default config.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/09/02 15:12:22 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
d41 1
a41 1
	${INSTALL_DATA} ${WRKSRC}/templates/*.html \
@


1.3
log
@Missing RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/09/02 15:04:59 ajacoutot Exp $
d8 1
a8 1
REVISION=		1
@


1.2
log
@Rename the utility to 'portscout' (instead of portscout.pl).
Install the sample file with mode 0640 since it can contain a DB password.
In the man page, rename the postgres user to match OpenBSD's.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/09/02 12:31:47 jasper Exp $
d8 1
a8 1
REVISION=		0
d27 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
d36 1
a36 1
	${INSTALL_SCRIPT} ${WRKSRC}/portscout.pl ${PREFIX}/bin/
@


1.1.1.1
log
@import portscout-0.8.1.1 (0.8.1 with OpenBSD support)

Portscout is a tool which looks for new versions of software in the
FreeBSD ports tree, and potentially other software repositories.

Various factors make this task a bit more difficult than it might
initially seem. In particular, the array of weird and wonderful
versioning schemes software vendors manage to come up with.

A list of results can be found here: http://portscout.jasper.la/

ok ajacoutot@@
@
text
@@
