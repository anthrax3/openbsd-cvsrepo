head	1.5;
access;
symbols
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.1.1.1.0.8
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.6
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	gene-1-1:1.1.1.1
	gene:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2000.09.01.19.37.52;	author brad;	state dead;
branches;
next	1.4;

1.4
date	2000.08.24.22.46.44;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.12.09.21.17.20;	author brad;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	99.11.30.22.59.19;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	97.11.18.02.42.11;	author gene;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.18.02.42.11;	author gene;	state Exp;
branches;
next	;

1.3.2.1
date	2000.09.16.20.13.42;	author marc;	state dead;
branches;
next	;


desc
@@


1.5
log
@upgrade to screen 3.9.8;
--
fixes a format string bug, possible root compromise

Pointed out by: markus@@, deraadt@@ and Gregor Longariva
<longariva@@informatik.uni-erlangen.de>
@
text
@--- doc/Makefile.in.orig	Wed Sep  1 18:50:32 1999
+++ doc/Makefile.in	Thu Aug 24 18:08:30 2000
@@@@ -3,13 +3,15 @@@@
 srcdir = @@srcdir@@
 VPATH = @@srcdir@@
 
+DESTDIR = 
+
 prefix = @@prefix@@
 mandir = @@mandir@@
 infodir = @@infodir@@
 
 INSTALL = @@INSTALL@@
 INSTALL_DATA = @@INSTALL_DATA@@
-MAKEINFO = makeinfo
+MAKEINFO = makeinfo --no-split
 TEXI2DVI = texi2dvi
 
 SHELL = /bin/sh
@@@@ -20,25 +22,23 @@@@
 	$(TEXI2DVI) $(srcdir)/screen.texinfo
 
 info screen.info: screen.texinfo
+	@@rm -f screen.info*
 	$(MAKEINFO) $(srcdir)/screen.texinfo -o screen.info
 
 install: installdirs
-	$(INSTALL_DATA) $(srcdir)/screen.1 $(mandir)/man1/screen.1
+	$(INSTALL_DATA) $(srcdir)/screen.1 $(DESTDIR)$(mandir)/man1/screen.1
 	-$(MAKE) screen.info
 	-if test -f screen.info; then d=.; else d=$(srcdir); fi; \
 	if test -f $$d/screen.info; then \
-	for f in $$d/screen.info*; do $(INSTALL_DATA) $$f $(infodir);done; \
-	if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \
-	  install-info --info-dir=$(infodir) $$d/screen.info; \
-	else true; fi; \
+	for f in $$d/screen.info*; do $(INSTALL_DATA) $$f $(DESTDIR)$(infodir);done; \
 	fi
 
 uninstall:
-	rm -f $(mandir)/man1/screen.1
-	rm -f $(infodir)/screen.info*
+	rm -f $(DESTDIR)$(mandir)/man1/screen.1
+	rm -f $(DESTDIR)$(infodir)/screen.info*
 
 installdirs:
-	$(srcdir)/../etc/mkinstalldirs $(mandir)/man1 $(infodir)
+	$(srcdir)/../etc/mkinstalldirs $(DESTDIR)$(mandir)/man1 $(DESTDIR)$(infodir)
 
 mostlyclean:
 	-rm -f *.cp *.cps *.fn *.fns *.ky *.kys *.pg *.tp *.vr
@


1.4
log
@side affect of using "CONFIGURE_STYLE= gnu dest" is that ETCSCREENRC is
hard coded to ${DESTDIR}/etc/screenrc in the resulting screen binary thus
the system wide /etc/screenrc does not work as expected.
--
Reported by: Luke Bakken <luke_bakken@@yahoo.com>
@
text
@@


1.3
log
@- change maintainer to me (brad@@openbsd.org)
- remove pre-configure target
- make screen's Makefile remove screen.info before re-creating it
- instead of removing CFLAGS from Makefile.in, replace its value with
  @@CFLAGS@@ so the autoconf script fills it in, same with LDFLAGS
@
text
@d2 10
a11 2
+++ doc/Makefile.in	Thu Dec  9 16:05:41 1999
@@@@ -9,7 +9,7 @@@@
d20 1
a20 1
@@@@ -20,6 +20,7 @@@@
d28 3
a30 1
@@@@ -28,9 +29,6 @@@@
d33 1
a33 1
 	for f in $$d/screen.info*; do $(INSTALL_DATA) $$f $(infodir);done; \
d37 1
d41 11
@


1.3.2.1
log
@
Bring -current version of screen into 2.7 branch to resolve security
issue reported on bugtraq and elsewhere.  Patches and testing courtesy
of <rguyom@@321.net>.   Thanks.
@
text
@@


1.2
log
@upgrade to screen 3.9.5; ok'd by turan@@
@
text
@d1 2
a2 2
--- doc/Makefile.in.orig	Tue Nov  9 21:25:24 1999
+++ doc/Makefile.in	Tue Nov  9 21:26:28 1999
d12 9
a20 1
@@@@ -28,9 +28,6 @@@@
@


1.1
log
@Initial revision
@
text
@d1 21
a21 32
*** doc/Makefile.in.orig	Tue Jun 24 01:05:43 1997
--- doc/Makefile.in	Mon Sep 15 23:56:34 1997
***************
*** 20,26 ****
  	$(TEXI2DVI) $(srcdir)/screen.texinfo
  
  info screen.info: screen.texinfo
! 	$(MAKEINFO) $(srcdir)/screen.texinfo -o screen.info
  
  install: installdirs
  	$(INSTALL_DATA) $(srcdir)/screen.1 $(mandir)/man1/screen.1
--- 20,27 ----
  	$(TEXI2DVI) $(srcdir)/screen.texinfo
  
  info screen.info: screen.texinfo
! 	rm -f ./screen.info*
! 	$(MAKEINFO) --no-split $(srcdir)/screen.texinfo -o screen.info
  
  install: installdirs
  	$(INSTALL_DATA) $(srcdir)/screen.1 $(mandir)/man1/screen.1
***************
*** 28,36 ****
  	-if test -f screen.info; then d=.; else d=$(srcdir); fi; \
  	if test -f $$d/screen.info; then \
  	for f in $$d/screen.info*; do $(INSTALL_DATA) $$f $(infodir);done; \
- 	if $(SHELL) -c 'install-info --version' >/dev/null 2>&1; then \
- 	  install-info --info-dir=$(infodir) $$d/screen.info; \
- 	else true; fi; \
  	fi
  
  uninstall:
--- 29,34 ----
@


1.1.1.1
log
@Import screen 3.7.4 with the ability to deal with an already-installed screenrc.
@
text
@@
