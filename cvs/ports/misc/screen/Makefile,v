head	1.68;
access;
symbols
	OPENBSD_6_2:1.68.0.8
	OPENBSD_6_2_BASE:1.68
	OPENBSD_6_1:1.68.0.6
	OPENBSD_6_1_BASE:1.68
	OPENBSD_6_0:1.68.0.4
	OPENBSD_6_0_BASE:1.68
	OPENBSD_5_9:1.68.0.2
	OPENBSD_5_9_BASE:1.68
	OPENBSD_5_8:1.67.0.4
	OPENBSD_5_8_BASE:1.67
	OPENBSD_5_7:1.66.0.6
	OPENBSD_5_7_BASE:1.66
	OPENBSD_5_6:1.66.0.4
	OPENBSD_5_6_BASE:1.66
	OPENBSD_5_5:1.66.0.2
	OPENBSD_5_5_BASE:1.66
	OPENBSD_5_4:1.65.0.2
	OPENBSD_5_4_BASE:1.65
	OPENBSD_5_3:1.64.0.2
	OPENBSD_5_3_BASE:1.64
	OPENBSD_5_2:1.62.0.2
	OPENBSD_5_2_BASE:1.62
	OPENBSD_5_1_BASE:1.61
	OPENBSD_5_1:1.61.0.6
	OPENBSD_5_0:1.61.0.4
	OPENBSD_5_0_BASE:1.61
	OPENBSD_4_9:1.61.0.2
	OPENBSD_4_9_BASE:1.61
	OPENBSD_4_8:1.59.0.8
	OPENBSD_4_8_BASE:1.59
	OPENBSD_4_7:1.59.0.6
	OPENBSD_4_7_BASE:1.59
	OPENBSD_4_6:1.59.0.4
	OPENBSD_4_6_BASE:1.59
	OPENBSD_4_5:1.59.0.2
	OPENBSD_4_5_BASE:1.59
	OPENBSD_4_4:1.58.0.4
	OPENBSD_4_4_BASE:1.58
	OPENBSD_4_3:1.58.0.2
	OPENBSD_4_3_BASE:1.58
	OPENBSD_4_2:1.57.0.4
	OPENBSD_4_2_BASE:1.57
	OPENBSD_4_1:1.57.0.2
	OPENBSD_4_1_BASE:1.57
	OPENBSD_4_0:1.55.0.8
	OPENBSD_4_0_BASE:1.55
	OPENBSD_3_9:1.55.0.6
	OPENBSD_3_9_BASE:1.55
	OPENBSD_3_8:1.55.0.4
	OPENBSD_3_8_BASE:1.55
	OPENBSD_3_7:1.55.0.2
	OPENBSD_3_7_BASE:1.55
	OPENBSD_3_6:1.53.0.2
	OPENBSD_3_6_BASE:1.53
	OPENBSD_3_5:1.52.0.2
	OPENBSD_3_5_BASE:1.52
	OPENBSD_3_4:1.44.0.2
	OPENBSD_3_4_BASE:1.44
	OPENBSD_3_3:1.43.0.4
	OPENBSD_3_3_BASE:1.43
	OPENBSD_3_2:1.43.0.2
	OPENBSD_3_2_BASE:1.43
	OPENBSD_3_1:1.40.0.2
	OPENBSD_3_1_BASE:1.40
	OPENBSD_3_0:1.37.0.2
	OPENBSD_3_0_BASE:1.37
	OPENBSD_2_9_TRACKING_SWITCH:1.35
	OPENBSD_2_9:1.33.0.2
	OPENBSD_2_9_BASE:1.33
	OPENBSD_2_8:1.32.0.2
	OPENBSD_2_8_BASE:1.32
	OPENBSD_2_7:1.19.0.2
	OPENBSD_2_7_BASE:1.19
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.9.0.2
	OPENBSD_2_5_BASE:1.9
	OPENBSD_2_4:1.4.0.4
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	gene-1-1:1.1.1.1
	gene:1.1.1;
locks; strict;
comment	@# @;


1.68
date	2015.09.01.12.05.19;	author jasper;	state Exp;
branches;
next	1.67;
commitid	bRvUglty6rVy0UXr;

1.67
date	2015.03.14.20.52.46;	author naddy;	state Exp;
branches
	1.67.4.1;
next	1.66;
commitid	jnrLBcPmz76yfcWI;

1.66
date	2013.11.09.23.19.03;	author naddy;	state Exp;
branches
	1.66.6.1;
next	1.65;

1.65
date	2013.03.11.11.23.58;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.63;

1.63
date	2013.02.05.14.51.16;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2012.02.20.22.20.51;	author sthen;	state Exp;
branches;
next	1.61;

1.61
date	2010.10.18.20.52.10;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2010.09.14.05.12.35;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2009.01.27.08.19.38;	author sthen;	state Exp;
branches;
next	1.58;

1.58
date	2007.09.01.20.11.21;	author kili;	state Exp;
branches;
next	1.57;

1.57
date	2006.10.31.18.01.01;	author naddy;	state Exp;
branches;
next	1.56;

1.56
date	2006.10.25.16.27.04;	author mbalmer;	state Exp;
branches;
next	1.55;

1.55
date	2005.01.27.02.09.52;	author naddy;	state Exp;
branches
	1.55.4.1
	1.55.6.1
	1.55.8.1;
next	1.54;

1.54
date	2004.12.22.11.50.29;	author alek;	state Exp;
branches;
next	1.53;

1.53
date	2004.06.24.04.07.53;	author brad;	state Exp;
branches;
next	1.52;

1.52
date	2004.01.17.05.34.28;	author brad;	state Exp;
branches;
next	1.51;

1.51
date	2003.12.04.23.27.07;	author margarida;	state Exp;
branches;
next	1.50;

1.50
date	2003.11.22.00.56.58;	author espie;	state Exp;
branches;
next	1.49;

1.49
date	2003.10.19.03.59.27;	author brad;	state Exp;
branches;
next	1.48;

1.48
date	2003.10.14.23.05.28;	author jolan;	state Exp;
branches;
next	1.47;

1.47
date	2003.10.10.01.27.38;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2003.09.27.02.00.58;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	2003.09.26.23.50.55;	author brad;	state Exp;
branches;
next	1.44;

1.44
date	2003.05.05.04.40.31;	author brad;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2002.09.25.02.06.33;	author brad;	state Exp;
branches
	1.43.4.1;
next	1.42;

1.42
date	2002.09.18.13.25.13;	author brad;	state Exp;
branches;
next	1.41;

1.41
date	2002.08.21.20.12.02;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2002.03.23.23.54.05;	author brad;	state Exp;
branches;
next	1.39;

1.39
date	2002.02.17.07.13.40;	author brad;	state Exp;
branches;
next	1.38;

1.38
date	2001.12.07.13.52.36;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	2001.09.06.03.49.55;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2001.09.04.14.56.27;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	2001.07.28.04.00.36;	author brad;	state Exp;
branches;
next	1.34;

1.34
date	2001.05.06.00.46.50;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2001.04.13.21.48.42;	author brad;	state Exp;
branches
	1.33.2.1;
next	1.32;

1.32
date	2000.09.24.07.04.10;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2000.09.06.00.28.05;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2000.09.01.20.58.11;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2000.09.01.19.37.52;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2000.08.25.04.17.44;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2000.08.25.03.30.01;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2000.08.24.22.46.43;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2000.08.23.17.55.20;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2000.08.04.18.25.24;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2000.07.04.19.33.08;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2000.06.23.18.59.39;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2000.06.18.01.37.39;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2000.05.18.00.06.42;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.03.24.22.11.50;	author espie;	state Exp;
branches
	1.19.2.1;
next	1.18;

1.18
date	2000.03.04.22.01.41;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2000.02.20.00.01.59;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2000.02.15.05.04.49;	author turan;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.12.08.02.25;	author turan;	state Exp;
branches;
next	1.14;

1.14
date	99.12.31.23.28.24;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	99.12.09.21.17.19;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	99.11.30.22.59.18;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.11.12.19.14.40;	author turan;	state Exp;
branches;
next	1.10;

1.10
date	99.09.08.01.16.27;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.04.09.03.15.18;	author marc;	state Exp;
branches;
next	1.8;

1.8
date	99.03.25.02.09.36;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	99.03.07.01.39.00;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.03.01.22.36.41;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	99.02.20.00.42.29;	author fgsch;	state Exp;
branches;
next	1.4;

1.4
date	98.04.14.20.34.21;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.02.11.04.24.20;	author flipk;	state Exp;
branches;
next	1.2;

1.2
date	97.11.19.01.07.50;	author joey;	state Exp;
branches;
next	1.1;

1.1
date	97.11.18.02.42.11;	author gene;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.18.02.42.11;	author gene;	state Exp;
branches;
next	;

1.19.2.1
date	2000.07.03.19.02.47;	author turan;	state Exp;
branches;
next	1.19.2.2;

1.19.2.2
date	2000.09.15.05.05.39;	author marc;	state Exp;
branches;
next	1.19.2.3;

1.19.2.3
date	2000.09.16.20.13.41;	author marc;	state Exp;
branches;
next	1.19.2.4;

1.19.2.4
date	2000.09.28.18.11.40;	author marc;	state Exp;
branches;
next	;

1.33.2.1
date	2001.09.06.04.31.59;	author brad;	state Exp;
branches;
next	;

1.43.4.1
date	2003.12.13.04.08.50;	author margarida;	state Exp;
branches;
next	;

1.44.2.1
date	2003.12.04.23.47.11;	author margarida;	state Exp;
branches;
next	;

1.55.4.1
date	2006.10.27.20.36.25;	author sturm;	state Exp;
branches;
next	;

1.55.6.1
date	2006.10.27.20.29.19;	author sturm;	state Exp;
branches;
next	;

1.55.8.1
date	2006.11.03.17.35.00;	author sturm;	state Exp;
branches;
next	;

1.66.6.1
date	2015.09.01.12.07.08;	author jasper;	state Exp;
branches;
next	;
commitid	lky2dtk5590tavn6;

1.67.4.1
date	2015.09.01.12.07.38;	author jasper;	state Exp;
branches;
next	;
commitid	yOgR1IKeawHeNA55;


desc
@@


1.68
log
@Fix stack overflow due to too deep recursion; from upstream
@
text
@# $OpenBSD: Makefile,v 1.67 2015/03/14 20:52:46 naddy Exp $
# Please adjust www/faq/faq15.html if updating.

COMMENT=	multi-screen window manager

VERSION=	4.0.3
DISTNAME=	screen-${VERSION}
REVISION=	6
CATEGORIES=	misc
MASTER_SITES=	${MASTER_SITE_GNU:=screen/}

HOMEPAGE=	https://www.gnu.org/software/screen/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

SUBST_VARS=	VERSION

CFLAGS+=	-Wall

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--with-sys-screenrc="${SYSCONFDIR}/screenrc"
USE_GROFF =	Yes

FLAVORS=	static shm
FLAVOR?=

.if ${FLAVOR} == "static"
CONFIGURE_ENV=	LDFLAGS="${STATIC}"
.else
WANTLIB=	c curses util
.endif
.if ${FLAVOR} == "shm"
PATCH_LIST=	patch-* shmpatch-*
.endif

ALL_TARGET=	screen screen.info

pre-build:
	@@perl -pi -e s#!!sysconfdir!!#${SYSCONFDIR}#g ${WRKSRC}/doc/screen.1

post-install:
	@@cd ${PREFIX}/bin && mv -f screen-${VERSION} screen
	@@chmod 755 ${PREFIX}/bin/screen
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/screen
	${INSTALL_DATA} ${WRKSRC}/etc/etcscreenrc \
		${PREFIX}/share/examples/screen/screenrc

.include <bsd.port.mk>
@


1.67
log
@switch from "-static" to "${STATIC}, i.e., build static PIE executables
on most archs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2013/11/09 23:19:03 naddy Exp $
d8 1
a8 1
REVISION=	5
@


1.67.4.1
log
@Fix stack overflow due to too deep recursion; from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2015/03/14 20:52:46 naddy Exp $
d8 1
a8 1
REVISION=	6
@


1.66
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2013/03/11 11:23:58 espie Exp $
d8 1
a8 1
REVISION=	4
d29 1
a29 1
CONFIGURE_ENV=	LDFLAGS="-static"
@


1.66.6.1
log
@Fix stack overflow due to too deep recursion; from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2013/11/09 23:19:03 naddy Exp $
d8 1
a8 1
REVISION=	5
@


1.65
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2013/02/09 14:49:51 sthen Exp $
d8 1
a8 1
REVISION=	3
d12 1
a12 1
HOMEPAGE=	http://www.gnu.org/software/screen/
@


1.64
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2013/02/05 14:51:16 sthen Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.63
log
@bump; make sure static binaries get updated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/02/20 22:20:51 sthen Exp $
d31 1
a31 1
.if ${FLAVOR:L} == "static"
d36 1
a36 1
.if ${FLAVOR:L} == "shm"
@


1.62
log
@use ${MASTER_SITE_GNU}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/10/18 20:52:10 espie Exp $
d8 1
a8 1
REVISION=	2
@


1.61
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/09/14 05:12:35 ajacoutot Exp $
d10 1
a10 1
MASTER_SITES=	ftp://ftp.uni-erlangen.de/pub/utilities/screen/
@


1.60
log
@Remove Brad from maintainer, per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/01/27 08:19:38 sthen Exp $
d26 1
@


1.59
log
@- this port is used as an example in the FAQ; add a reminder to
update the relevant page if the port is updated.

- more precise license marker.

No package change. ok Brad (maintainer) after a small adjustment
to my diff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2007/09/01 20:11:21 kili Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
a12 2

MAINTAINER=	Brad Smith <brad@@comstyle.com>
@


1.58
log
@
Change Brads email address for now, so people can reach him instead of
getting bounces or 550s. Bump pkgnames. While here, remove quotes from
comments.

prompted by espie@@
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.57 2006/10/31 18:01:01 naddy Exp $
d16 1
a16 1
# GPL
@


1.57
log
@Massage an unportable autoconf test so it won't erroneously fail on alpha;
fixes crashes on alpha down the road.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2006/10/25 16:27:04 mbalmer Exp $
d3 1
a3 1
COMMENT=	"multi-screen window manager"
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d13 1
a13 1
MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.56
log
@security:  update to screen 4.0.3, previous versions are vulnerable may
lead to a DoS.

ok brad, robert, steven
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2005/01/27 02:09:52 naddy Exp $
d7 1
@


1.55
log
@Now that @@info transparently picks up all .info-* files, don't go through
extra steps to rebuild with --no-split.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2004/12/22 11:50:29 alek Exp $
d5 1
a5 1
VERSION=	4.0.2
@


1.55.8.1
log
@MFC:
security:  update to screen 4.0.3, previous versions are vulnerable may
lead to a DoS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2005/01/27 02:09:52 naddy Exp $
d5 1
a5 1
VERSION=	4.0.3
@


1.55.4.1
log
@MFC:
security:  update to screen 4.0.3, previous versions are vulnerable may
lead to a DoS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2005/01/27 02:09:52 naddy Exp $
d5 1
a5 1
VERSION=	4.0.3
@


1.55.6.1
log
@MFC:
security:  update to screen 4.0.3, previous versions are vulnerable may
lead to a DoS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2005/01/27 02:09:52 naddy Exp $
d5 1
a5 1
VERSION=	4.0.3
@


1.54
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2004/06/24 04:07:53 brad Exp $
a39 3

post-extract:
	@@rm -f ${WRKSRC}/doc/screen.info*
@


1.53
log
@- remove -sample from screenrc example file, its pretty obvious when its in
  the examples dir
- cleaning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2004/01/17 05:34:28 brad Exp $
d32 2
@


1.52
log
@upgrade to screen 4.0.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2003/12/04 23:27:07 margarida Exp $
d50 1
a50 1
		${PREFIX}/share/examples/screen/screenrc-sample
@


1.51
log
@Reliability fix:
Buffer overflow in GNU screen allows privilege escalation for local users.
It also has some potential for attackers getting control of another user's
screen.  Transfer of approximately two gigabytes of data is required to
exploit this vulnerability.
Usually screen is installed either setgid-utmp or setuid-root but this DOES
NOT happen on OpenBSD, thus the reliability fix.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2003/11/22 00:56:58 espie Exp $
d5 1
a5 1
VERSION=	4.0.1
a6 1
PKGNAME=	${DISTNAME}p2
d21 2
@


1.50
log
@Add shm flavor, to use with brltty
ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2003/10/19 03:59:27 brad Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
@


1.49
log
@don't need to use rm here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2003/10/14 23:05:28 jolan Exp $
d26 1
a26 1
FLAVORS=	static
d31 3
@


1.48
log
@- add license comment above PERMIT_* lines
- add includes so openpty is not implicitly declared
- use (void*) NULL in execl to make sure it 64-bit where it needs to be

OK brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2003/10/10 01:27:38 brad Exp $
a41 1
	@@rm -f ${PREFIX}/bin/screen
@


1.47
log
@don't install a versioned binary, idea from John Kerbawy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2003/09/27 02:00:58 brad Exp $
d15 1
@


1.46
log
@upgrade to screen 4.0.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2003/09/26 23:50:55 brad Exp $
d7 1
d41 3
a43 1
	@@chmod 755 ${PREFIX}/bin/screen-${VERSION}
@


1.45
log
@upgrade to screen 4.0.0
--
From: Han Boetes <han at mijncomputer dot nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2003/05/05 04:40:31 brad Exp $
d5 1
a5 1
VERSION=	4.0.0
d37 1
a37 3
	@@mv -f ${WRKSRC}/doc/screen.1 ${WRKSRC}/doc/screen.1.new
	@@sed -e s#!!sysconfdir!!#${SYSCONFDIR}#g \
		${WRKSRC}/doc/screen.1.new > ${WRKSRC}/doc/screen.1
@


1.44
log
@upgrade to screen 3.9.15
--
From: Han Boetes <han at mijncomputer dot nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2002/09/25 02:06:33 brad Exp $
d5 1
a5 1
VERSION=	3.9.15
@


1.44.2.1
log
@Reliability fix MFC:
Buffer overflow in GNU screen allows privilege escalation for local users.
It also has some potential for attackers getting control of another user's
screen.  Transfer of approximately two gigabytes of data is required to
exploit this vulnerability.
Usually screen is installed either setgid-utmp or setuid-root but this DOES
NOT happen on OpenBSD, thus the reliability fix.

ok brad@@ pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2003/05/05 04:40:31 brad Exp $
a6 1
PKGNAME=	${DISTNAME}p1
@


1.43
log
@remove BROKEN tag for static FLAVOR on sparc64, I cannot remember
who reported this supposed breakage but it sure seems to work on both
3.1-stable and -current systems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2002/09/18 13:25:13 brad Exp $
d5 1
a5 1
VERSION=	3.9.13
@


1.43.4.1
log
@Reliability fix MFC:
Buffer overflow in GNU screen allows privilege escalation for local users.
It also has some potential for attackers getting control of another user's
screen.  Transfer of approximately two gigabytes of data is required to
exploit this vulnerability.
Usually screen is installed either setgid-utmp or setuid-root but this DOES
NOT happen on OpenBSD, thus the reliability fix.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2002/09/25 02:06:33 brad Exp $
a6 1
PKGNAME=	${DISTNAME}p1
@


1.42
log
@upgrade to screen 3.9.13
--
New version pointed out by: John Kerbawy <john@@maKintosh.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2002/08/21 20:12:02 brad Exp $
a27 3
. if ${MACHINE_ARCH} == "sparc64"
BROKEN=		"Static FLAVOR broken on ${MACHINE_ARCH}"
. endif
@


1.41
log
@ensure the screen man page has the proper path to the screenrc file.
--
Pointed out by: art@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2002/03/23 23:54:05 brad Exp $
d5 1
a5 1
VERSION=	3.9.11
@


1.40
log
@mark static FLAVOR broken for sparc64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2002/02/17 07:13:40 brad Exp $
a7 1
NEED_VERSION=	1.500
d38 5
@


1.39
log
@upgrade to screen 3.9.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2001/12/07 13:52:36 brad Exp $
d29 3
@


1.38
log
@- rename checksums file
- add static FLAVOR, requested by pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2001/09/06 03:49:55 brad Exp $
d5 1
a5 1
VERSION=	3.9.10
d33 3
@


1.37
log
@one less setuid binary.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2001/09/04 14:56:27 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.435
d24 7
@


1.36
log
@upgrade to screen 3.9.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2001/07/28 04:00:36 brad Exp $
d28 1
@


1.35
log
@upgrade to screen 3.9.9
- DESTDIR, "CFLAGS & LDFLAGS" patches integrated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2001/05/06 00:46:50 brad Exp $
d5 1
a5 1
VERSION=	3.9.9
d8 1
a8 1
NEED_VERSION=	1.413
@


1.34
log
@- don't need to install the sample screen screencap file anymore
- don't mention it durring INSTALL run either
--
Brought to my attention by: fries@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/04/13 21:48:42 brad Exp $
d5 1
a5 1
VERSION=	3.9.8
d8 1
a8 1
NEED_VERSION=	1.384
d30 1
a30 1
	 ${PREFIX}/share/examples/screen/screenrc-sample
@


1.33
log
@- integrate COMMENT
- bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2000/09/24 07:04:10 brad Exp $
a30 2
	${INSTALL_DATA} ${WRKSRC}/terminfo/screencap \
	 ${PREFIX}/share/examples/screen/screencap
@


1.33.2.1
log
@MFC: upgrade to screen 3.9.10 -- security fix.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/04/13 21:48:42 brad Exp $
d5 1
a5 1
VERSION=	3.9.10
d8 1
a8 1
NEED_VERSION=	1.406
a27 1
	@@chmod 755 ${PREFIX}/bin/screen-${VERSION}
d30 1
a30 1
		${PREFIX}/share/examples/screen/screenrc-sample
d32 1
a32 1
		${PREFIX}/share/examples/screen/screencap
@


1.32
log
@add name to MAINTAINER
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.31 2000/09/06 00:28:05 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.330
@


1.31
log
@- remove SYSCONFDIR from SUBST_VARS
- remove part of the patch that overrides the all target and just fill in
ALL_TARGET
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2000/09/01 20:58:11 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.324
d11 1
a11 1
MAINTAINER=	brad@@openbsd.org
@


1.30
log
@- add HOMEPAGE
- remove MASTER_SITES_GNU, these mirrors do not contain screen under the
usual gnu/ dir anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/09/01 19:37:52 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.322
d18 1
a18 1
SUBST_VARS=	SYSCONFDIR VERSION
d22 2
@


1.29
log
@upgrade to screen 3.9.8;
--
fixes a format string bug, possible root compromise

Pointed out by: markus@@, deraadt@@ and Gregor Longariva
<longariva@@informatik.uni-erlangen.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/08/25 04:17:44 brad Exp $
d7 3
a9 3
MASTER_SITES=	ftp://ftp.uni-erlangen.de/pub/utilities/screen/ \
		${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR= screen
@


1.28
log
@use just MASTER_SITE_GNU
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2000/08/25 03:30:01 brad Exp $
d3 1
a3 1
VERSION=	3.9.5
a4 1
PKGNAME=	screen-${VERSION}p1
d6 3
a8 2
NEED_VERSION=	1.320
MASTER_SITES=	${MASTER_SITE_GNU}
d21 1
@


1.27
log
@- substitute SYSCONFDIR into DEINSTALL/INSTALL
- fix 2 typos in patch-aa todo with DESTDIR usage
- ${SCREENRC} -> $CONFIG_FILE in INSTALL script
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/08/24 22:46:43 brad Exp $
d8 1
a8 2
MASTER_SITES=	ftp://ftp.uni-erlangen.de/pub/utilities/screen/ \
		${MASTER_SITE_GNU}
@


1.26
log
@side affect of using "CONFIGURE_STYLE= gnu dest" is that ETCSCREENRC is
hard coded to ${DESTDIR}/etc/screenrc in the resulting screen binary thus
the system wide /etc/screenrc does not work as expected.
--
Reported by: Luke Bakken <luke_bakken@@yahoo.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/08/23 17:55:20 brad Exp $
d19 1
a19 1
SUBST_VARS=	VERSION
@


1.25
log
@VERSION variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/08/04 18:25:24 brad Exp $
d21 1
a21 1
CONFIGURE_STYLE= gnu dest
a23 1
	@@cd ${PREFIX}/bin && ln -sf screen-${VERSION} screen
@


1.24
log
@- move config file from lib/screen to share/examples/screen
- ${FOO} -> $FOO in INSTALL/DEINSTALL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/07/04 19:33:08 brad Exp $
d3 3
a5 2
DISTNAME=	screen-3.9.5
PKGNAME=	screen-3.9.5p1
d7 1
a7 1
NEED_VERSION=	1.301
d19 2
d24 1
a24 1
	@@cd ${PREFIX}/bin && ln -sf screen-3.9.5 screen
@


1.23
log
@remove unnecessary rm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/06/23 18:59:39 brad Exp $
d22 5
a26 3
	${INSTALL_DATA_DIR} ${PREFIX}/lib/screen
	${INSTALL_DATA} ${WRKSRC}/etc/etcscreenrc ${PREFIX}/lib/screen/screenrc
	${INSTALL_DATA} ${WRKSRC}/terminfo/screencap ${PREFIX}/lib/screen
@


1.22
log
@- remove FAKE=Yes
- HAS_CONFIGURE -> CONFIGURE_STYLE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/06/18 01:37:39 espie Exp $
d21 1
a21 2
	@@rm -f ${PREFIX}/bin/screen
	@@cd ${PREFIX}/bin; ln -sf screen-3.9.5 screen
@


1.21
log
@Bump package name, as 2.7 shipped with a bad plist.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/05/18 00:06:42 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.234
d18 1
a18 4
FAKE=	Yes

HAS_CONFIGURE=	Yes
CONFIGURE_ARGS=	--prefix='$${DESTDIR}${PREFIX}' --sysconfdir='$${DESTDIR}/etc'
@


1.20
log
@- remove license type
- bump NEED_VERSION
- ensure that the screen symlink is created properly; problem reported by
Phil Pennock <pdp@@nl.demon.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/03/24 22:11:50 espie Exp $
d4 1
@


1.19
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/03/04 22:01:41 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.218
a11 1
LICENSE_TYPE=		GPL
d17 2
a20 1
FAKE=		Yes
d23 2
@


1.19.2.1
log
@2.7 errata, The screen package shipped with 2.7 does not install itself
properly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/06/23 18:59:39 brad Exp $
a3 1
PKGNAME=	screen-3.9.5p1
a22 2
	@@rm -f ${PREFIX}/bin/screen
	@@cd ${PREFIX}/bin; ln -sf screen-3.9.5 screen
@


1.19.2.2
log
@bring misc as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/08/04 18:25:24 brad Exp $
d6 1
a6 1
NEED_VERSION=	1.301
d13 1
d19 3
a21 1
CONFIGURE_STYLE= gnu dest
d24 5
a28 6
	@@cd ${PREFIX}/bin && ln -sf screen-3.9.5 screen
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/screen
	${INSTALL_DATA} ${WRKSRC}/etc/etcscreenrc \
	 ${PREFIX}/share/examples/screen/screenrc-sample
	${INSTALL_DATA} ${WRKSRC}/terminfo/screencap \
	 ${PREFIX}/share/examples/screen/screencap
@


1.19.2.3
log
@
Bring -current version of screen into 2.7 branch to resolve security
issue reported on bugtraq and elsewhere.  Patches and testing courtesy
of <rguyom@@321.net>.   Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19.2.2 2000/09/15 05:05:39 marc Exp $
d3 2
a4 2
VERSION=	3.9.8
DISTNAME=	screen-${VERSION}
d7 3
a9 3
MASTER_SITES=	ftp://ftp.uni-erlangen.de/pub/utilities/screen/

HOMEPAGE=	http://www.gnu.org/software/screen/
d18 1
a18 6
SUBST_VARS=	VERSION

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--with-sys-screenrc="${SYSCONFDIR}/screenrc"

ALL_TARGET=	screen screen.info
d21 1
@


1.19.2.4
log
@
style: use SYSCONFDIR in setting screenrc file location correctly
change from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19.2.3 2000/09/16 20:13:41 marc Exp $
d18 1
a18 1
SUBST_VARS=	SYSCONFDIR VERSION
@


1.18
log
@fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/02/20 00:01:59 brad Exp $
d5 1
a17 1
NEED_VERSION=	1.218
@


1.17
log
@{yes,YES} -> Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/02/15 05:04:49 turan Exp $
d17 4
a20 1
GNU_CONFIGURE=	Yes
a25 2
	@@install-info ${PREFIX}/info/screen.info ${PREFIX}/info/dir
	@@PKG_PREFIX="${PREFIX}" ${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.16
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/02/12 08:02:25 turan Exp $
d12 4
a15 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d17 1
a17 1
GNU_CONFIGURE=	yes
@


1.15
log
@gpl licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 1999/12/31 23:28:24 brad Exp $
d12 4
a15 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.14
log
@- include netinet/in.h before arpa/inet.h to avoid a couple of compiler
warnings in teln.c
- mkdir -> ${INSTALL_DATA_DIR}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/12/09 21:17:19 brad Exp $
d10 6
@


1.13
log
@- change maintainer to me (brad@@openbsd.org)
- remove pre-configure target
- make screen's Makefile remove screen.info before re-creating it
- instead of removing CFLAGS from Makefile.in, replace its value with
  @@CFLAGS@@ so the autoconf script fills it in, same with LDFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/11/30 22:59:18 brad Exp $
d14 1
a14 2
	@@mkdir -p ${PREFIX}/lib/screen
	@@install-info ${PREFIX}/info/screen.info ${PREFIX}/info/dir
d17 1
@


1.12
log
@upgrade to screen 3.9.5; ok'd by turan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/09/08 01:16:27 brad Exp $
d9 1
a9 1
MAINTAINER=	uk1o@@rz114s0-197.rz.uni-karlsruhe.de
a11 3

pre-configure:
	@@rm -f ${WRKSRC}/doc/screen.info*
@


1.11
log
@set maintainer to Hannah Schroeter <uk1o@@rz114s0-197.rz.uni-karlsruhe.de>
@
text
@d3 1
a3 1
DISTNAME=	screen-3.7.6
d9 1
a9 1
MAINTAINER=	Hannah Schroeter <uk1o@@rz114s0-197.rz.uni-karlsruhe.de>
d11 4
a14 6
# The autoconf.in files are too old to use the latest autoconf and
# without the latest autoconf we cant say "GNU_CONFIGURE" because
# configure doesn't know about sysconfdir.  So we do it this way
# instead
HAS_CONFIGURE=	yes
CONFIGURE_ARGS=	--prefix=${PREFIX}
d17 1
a17 4
	@@${MKDIR} ${PREFIX}/lib/screen
	@@if [ ! -f ${PREFIX}/info/dir ]; then \
	  ${SED} -ne '1,/Menu:/p' /usr/share/info/dir > ${PREFIX}/info/dir; \
	 fi
@


1.10
log
@- style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/04/09 03:15:18 marc Exp $
d9 1
a9 1
MAINTAINER=	ports@@openbsd.org
@


1.9
log
@o add install and deinstall scripts to handle /etc/screenrc
o call install script from makefile
o remove install/uninstall messages from packing list
THIS PORT IS NOW FROZEN
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.8 1999/03/25 02:09:36 marc Exp $
#
d3 1
a3 1
DISTNAME=       screen-3.7.6
d5 1
a5 4

MAINTAINER=	marc@@OpenBSD.ORG

MASTER_SITES=   ftp://ftp.uni-erlangen.de/pub/utilities/screen/ \
d9 2
a14 1
#
d19 1
d24 2
a25 3
	@@${MKDIR} ${PREFIX}/lib/screen
	@@${INSTALL_DATA} ${WRKSRC}/etc/etcscreenrc ${PREFIX}/lib/screen/screenrc
	@@${INSTALL_DATA} ${WRKSRC}/terminfo/screencap ${PREFIX}/lib/screen
@


1.8
log
@Fix configure step; remove non-functional SEPARATE_BUILD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/03/07 01:39:00 brad Exp $
d29 1
a29 10
	@@${ECHO} ""
	@@${ECHO} "*** The latest version of the screenrc and screencap files"
	@@${ECHO} "*** can be found ${PREFIX}/lib/screen"
	@@if [ -f /etc/screenrc ]; then \
	  ${ECHO} "*** Your /etc/screenrc has NOT been changed"; \
	 else \
	  cp ${PREFIX}/lib/screen/screenrc /etc; \
	  ${ECHO} "*** screenrc has been copied into /etc"; \
	 fi
	@@${ECHO} ""
@


1.7
log
@add MASTER_SITE_SUBDIR
@
text
@d1 1
a1 6
# OpenBSD makefile for:	screen
# Version required:     3.7.6
# Date created:         17 November 1997
# Whom:                 gene
#
# $OpenBSD: Makefile,v 1.6 1999/03/01 22:36:41 espie Exp $
d6 3
d13 7
a19 5
MAINTAINER=	gene@@OpenBSD.ORG

SEPARATE_BUILD=yes
GNU_CONFIGURE=	yes
MAN1=		screen.1
@


1.6
log
@Builds cleanly with SEPARATE_BUILD
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.5 1999/02/20 00:42:29 fgsch Exp $
d13 1
@


1.5
log
@Update to 3.7.6. work by bsmith@@bfmni.com.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 1998/04/14 20:34:21 marc Exp $
d16 1
@


1.4
log
@Fix packing list so a package can be created.
Install screenrc in /etc (but do not overright existing file).
Install latest screenrc and screencap in /usr/local/lib/screen for
reference (and so pkg_add knows where to get them from).
@
text
@d2 1
a2 1
# Version required:     3.7.4
d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1998/02/11 04:24:20 flipk Exp $
d9 1
a9 1
DISTNAME=       screen-3.7.4
@


1.3
log
@eep, at-sign where it shouldn't be
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1997/11/19 01:07:50 joey Exp $
d24 13
a36 6
	@@if [ -f ${PREFIX}/etc/screenrc ]; then \
	 echo "Copying ${PREFIX}/etc/screenrc to ${PREFIX}/etc/screenrc.old.";\
	 ${CP} ${PREFIX}/etc/screenrc ${PREFIX}/etc/screenrc.old; \
	fi
	@@echo "Installing ${PREFIX}/etc/screenrc."
	${CP} ${WRKSRC}/etc/etcscreenrc ${PREFIX}/etc/screenrc
@


1.2
log
@the first line of the Makefile should be `OpenBSD makefile for:` not `New ports...`
removed FreeBSD's $id. no need for it.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1997/11/18 02:42:11 gene Exp $
d25 1
a25 1
	 @@echo "Copying ${PREFIX}/etc/screenrc to ${PREFIX}/etc/screenrc.old.";\
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# New ports collection makefile for:	screen
d6 1
a6 2
# $OpenBSD$
# Id: Makefile,v 1.18 1997/09/15 20:09:01 ache Exp $
@


1.1.1.1
log
@Import screen 3.7.4 with the ability to deal with an already-installed screenrc.
@
text
@@
