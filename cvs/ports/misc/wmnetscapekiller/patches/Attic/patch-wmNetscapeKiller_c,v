head	1.2;
access;
symbols
	OPENBSD_4_0:1.1.1.1.0.24
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.22
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.20
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.18
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.16
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.14
	OPENBSD_3_5_BASE:1.1.1.1
	OPENBSD_3_4:1.1.1.1.0.12
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.10
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.8
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.6
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.4
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	naddy_20010112:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2006.10.18.21.48.11;	author wilfried;	state dead;
branches;
next	1.1;

1.1
date	2001.01.11.23.23.17;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.01.11.23.23.17;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@retire
@
text
@$OpenBSD: patch-wmNetscapeKiller_c,v 1.1 2001/01/11 23:23:17 naddy Exp $
--- wmNetscapeKiller.c.orig	Tue Aug  8 00:24:03 2000
+++ wmNetscapeKiller.c	Thu Jan 11 18:37:47 2001
@@@@ -64,15 +64,15 @@@@ void DoExpose() {
 // Getionnaire evenement bouton souris
 void DoButtonPress() {
    int retour ;
-   char* command;
-   sprintf(command,"killall -9 %s",prog_victim) ;
+   char command[1024];
+   snprintf(command,sizeof(command),"skill -9 %s",prog_victim) ;
     retour = system(command) ;
 //   retour = system("killall -12 netscape") ;
      if(retour!= -1 && retour != 127 && retour != 256 && restart == TRUE)
      {
         nXPM = KILLED_XPM ;
         DoExpose() ;
-	sprintf(command,"%s&",prog_victim) ;
+	snprintf(command,sizeof(command),"%s&",prog_victim) ;
 	system(command) ;
      }
    else
@@@@ -118,7 +118,7 @@@@ int main(int argc, char *argv[])
 	else
 	  {
 	     
-	     strncpy(prog_victim,argv[1],255) ;
+	     strlcpy(prog_victim,argv[1],sizeof(prog_victim)) ;
 	     if(argc == 3) // il faut etudier le deuxieme aussi
 	       {
 		  if(!strcmp(argv[2],"restart"))
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD: $
@


1.1.1.1
log
@Import wmNetscapeKiller 0.3.
Submitted by Peter Stromberg <home@@wilfried.net>.

This dock-app kills (and restarts) netscape when you click
on the icon! You can now specify which program to kill and
if you want to restart it or not.
@
text
@@
