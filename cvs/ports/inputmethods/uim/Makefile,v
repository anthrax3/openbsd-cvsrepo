head	1.56;
access;
symbols
	OPENBSD_6_1:1.53.0.4
	OPENBSD_6_1_BASE:1.53
	OPENBSD_6_0:1.53.0.2
	OPENBSD_6_0_BASE:1.53
	OPENBSD_5_9:1.51.0.2
	OPENBSD_5_9_BASE:1.51
	OPENBSD_5_8:1.49.0.4
	OPENBSD_5_8_BASE:1.49
	OPENBSD_5_7:1.48.0.2
	OPENBSD_5_7_BASE:1.48
	OPENBSD_5_6:1.47.0.4
	OPENBSD_5_6_BASE:1.47
	OPENBSD_5_5:1.47.0.2
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.42.0.2
	OPENBSD_5_4_BASE:1.42
	OPENBSD_5_3:1.38.0.6
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.38.0.4
	OPENBSD_5_2_BASE:1.38
	OPENBSD_5_1_BASE:1.38
	OPENBSD_5_1:1.38.0.2
	OPENBSD_5_0:1.34.0.2
	OPENBSD_5_0_BASE:1.34
	OPENBSD_4_9:1.32.0.2
	OPENBSD_4_9_BASE:1.32
	OPENBSD_4_8:1.22.0.2
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.21.0.2
	OPENBSD_4_7_BASE:1.21
	OPENBSD_4_6:1.18.0.2
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.17.0.2
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.13.0.2
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.6.0.2
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	jp:1.1.1.1
	uim:1.1.1;
locks; strict;
comment	@# @;


1.56
date	2017.07.23.09.26.28;	author espie;	state Exp;
branches;
next	1.55;
commitid	FZPR2Emws5uDqXzb;

1.55
date	2017.07.16.19.18.57;	author espie;	state Exp;
branches;
next	1.54;
commitid	tt0GhWK5c4uf9ILG;

1.54
date	2017.04.10.11.46.21;	author sthen;	state Exp;
branches;
next	1.53;
commitid	BLsh88fJB8thZTwY;

1.53
date	2016.03.19.22.48.27;	author naddy;	state Exp;
branches;
next	1.52;
commitid	SIHnGQ3XIdGCb86J;

1.52
date	2016.03.11.20.28.27;	author naddy;	state Exp;
branches;
next	1.51;
commitid	UYLP8TE6V7RS2GhJ;

1.51
date	2015.08.25.14.03.21;	author sthen;	state Exp;
branches;
next	1.50;
commitid	8u6wAbmxSoakT67t;

1.50
date	2015.08.25.00.30.41;	author bentley;	state Exp;
branches;
next	1.49;
commitid	OHUQ1wfY3DVe5szh;

1.49
date	2015.04.04.09.21.01;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	kS3kwKZogsvzYmEY;

1.48
date	2015.01.09.16.45.37;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	1QLIyaYCxsHJ3XMG;

1.47
date	2013.10.24.15.18.00;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2013.10.22.11.34.19;	author zhuk;	state Exp;
branches;
next	1.45;

1.45
date	2013.10.14.22.05.05;	author schwarze;	state Exp;
branches;
next	1.44;

1.44
date	2013.10.05.07.34.34;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2013.08.07.21.32.05;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2013.07.07.09.53.02;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2013.06.24.15.53.38;	author zhuk;	state Exp;
branches;
next	1.40;

1.40
date	2013.03.21.08.46.31;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2013.03.11.11.12.33;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2011.11.03.17.46.21;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2011.10.03.06.42.46;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2011.09.16.10.02.38;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2011.09.13.06.42.50;	author jasper;	state Exp;
branches;
next	1.34;

1.34
date	2011.06.06.15.10.40;	author jasper;	state Exp;
branches;
next	1.33;

1.33
date	2011.05.04.07.32.11;	author landry;	state Exp;
branches;
next	1.32;

1.32
date	2010.11.17.08.05.17;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.06.23.52.59;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.05.10.06.44;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2010.10.24.21.21.44;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2010.10.18.18.13.15;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.11.08.15.02;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2010.09.30.07.28.29;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.09.19.19.01.14;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2010.08.21.19.57.09;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.07.24.11.44.17;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.12.21.21.25.28;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.10.15.20.46.40;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2009.08.10.06.32.05;	author kili;	state Exp;
branches;
next	1.18;

1.18
date	2009.06.19.09.24.14;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2009.01.30.09.39.55;	author sturm;	state Exp;
branches;
next	1.16;

1.16
date	2009.01.21.10.50.12;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2008.10.28.13.59.13;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2008.10.14.02.16.46;	author kevlo;	state Exp;
branches;
next	1.13;

1.13
date	2008.07.27.21.44.59;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2008.06.29.20.44.52;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2008.06.07.09.58.40;	author bernd;	state Exp;
branches;
next	1.10;

1.10
date	2008.06.06.17.23.18;	author bernd;	state Exp;
branches;
next	1.9;

1.9
date	2008.01.04.17.48.35;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2007.12.18.15.56.16;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.16.11.14.46;	author simon;	state Exp;
branches;
next	1.6;

1.6
date	2007.05.14.13.20.12;	author msf;	state Exp;
branches;
next	1.5;

1.5
date	2007.04.08.14.58.04;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2007.02.03.17.05.24;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.21.00.47.28;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.19.09.35.16;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.18.23.57.22;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.18.23.57.22;	author espie;	state Exp;
branches;
next	;


desc
@@


1.56
log
@add pthread to COMPILER_LIBCXX.
white lie, but it allows clang and gcc to be more similar
bump accordingly.
@
text
@# $OpenBSD: Makefile,v 1.55 2017/07/16 19:18:57 espie Exp $

DPB_PROPERTIES=		tag:kde3

COMMENT-main=		multilingual input method library
COMMENT-gtk=		uim for GTK+2
COMMENT-gtk3=		uim for GTK+3
COMMENT-kde=		uim for KDE3
COMMENT-qt=		uim for QT3
COMMENT-qt4=		uim for QT4

CATEGORIES=		inputmethods japanese chinese

V=			1.8.6
DISTNAME=		uim-$V
PKGNAME-main=		uim-$V
PKGNAME-gtk=		uim-gtk-$V
PKGNAME-gtk3=		uim-gtk3-$V
PKGNAME-kde=		uim-kde-$V
PKGNAME-qt=		uim-qt-$V
PKGNAME-qt4=		uim-qt4-$V
REVISION-gtk=		1
REVISION-gtk3=		2
REVISION-kde=		1
REVISION-main=		2
REVISION-qt=		1
REVISION-qt4=		1

MASTER_SITES=		https://github.com/uim/uim/releases/download/uim-$V/
HOMEPAGE=		https://github.com/uim/uim

SHARED_LIBS +=	gcroots              0.0      # .1.0
SHARED_LIBS +=	uim-scm              0.0      # .0.0
SHARED_LIBS +=	uim                  1.0      # .6.0
SHARED_LIBS +=	uim-custom           0.0      # .2.0

# BSD
PERMIT_PACKAGE_CDROM=	Yes

cWANTLIB += X11 Xext Xrender fontconfig freetype m
cWANTLIB += ${MODGETTEXT_WANTLIB}

MULTI_PACKAGES=		-main -gtk -gtk3 -kde -qt -qt4

MODULES=		devel/gettext \
			textproc/intltool \
			x11/qt4 \
			x11/kde # last on purpose

USE_GMAKE=		Yes

RUN_DEPENDS-main=	${MODGETTEXT_RUN_DEPENDS} \
			devel/desktop-file-utils

WANTLIB-main += ${cWANTLIB}
WANTLIB-main += Xft anthy anthydic c curses expat pthread-stubs ${COMPILER_LIBCXX}
WANTLIB-main += util xcb z

LIB_DEPENDS-main=	${MODGETTEXT_LIB_DEPENDS} \
			inputmethods/anthy


WANTLIB-gtk += ${cWANTLIB}
WANTLIB-gtk += Xcomposite Xcursor Xdamage Xfixes Xi Xinerama Xrandr
WANTLIB-gtk += atk-1.0 c cairo expat ffi gcroots gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB-gtk += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 graphite2
WANTLIB-gtk += gthread-2.0 gtk-x11-2.0 harfbuzz pango-1.0 pangocairo-1.0
WANTLIB-gtk += pangoft2-1.0 pcre pixman-1 png pthread pthread-stubs
WANTLIB-gtk += uim uim-custom uim-scm xcb xcb-render xcb-shm z

LIB_DEPENDS-gtk=	inputmethods/uim \
			x11/gtk+2

WANTLIB-gtk3 += ${cWANTLIB}
WANTLIB-gtk3 += ICE SM Xcomposite Xcursor Xdamage Xfixes Xi Xinerama
WANTLIB-gtk3 += Xrandr atk-1.0 atk-bridge-2.0 atspi c cairo cairo-gobject
WANTLIB-gtk3 += dbus-1 expat ffi gcroots gdk-3 gdk_pixbuf-2.0 gio-2.0
WANTLIB-gtk3 += glib-2.0 gmodule-2.0 gobject-2.0 graphite2 gthread-2.0
WANTLIB-gtk3 += gtk-3 harfbuzz pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB-gtk3 += pcre pixman-1 png pthread pthread-stubs uim uim-custom
WANTLIB-gtk3 += uim-scm xcb xcb-render xcb-shm z epoxy

LIB_DEPENDS-gtk3=	inputmethods/uim \
			x11/gtk+3

WANTLIB-kde += ${cWANTLIB} ${KDE}/kdecore ${KDE}/kdeui
WANTLIB-kde += DCOP GL ICE SM X11-xcb Xau Xcursor Xdamage Xdmcp Xfixes
WANTLIB-kde += Xft Xi Xinerama Xmu Xrandr Xt Xxf86vm art_lgpl_2 drm
WANTLIB-kde += expat gcroots glapi idn jpeg kdefx lcms mng png pthread
WANTLIB-kde += pthread-stubs qt-mt ${COMPILER_LIBCXX} uim uim-scm util xcb xcb-dri2
WANTLIB-kde += xcb-glx z

LIB_DEPENDS-kde=	inputmethods/uim \
			x11/kde/libs3

WANTLIB-qt += ${cWANTLIB} ${MODQT3_WANTLIB}
WANTLIB-qt += GL ICE SM X11-xcb Xau Xcursor Xdamage Xdmcp Xfixes
WANTLIB-qt += Xft Xi Xinerama Xmu Xrandr Xt Xxf86vm c drm expat gcroots
WANTLIB-qt += glapi jpeg lcms mng png pthread pthread-stubs ${COMPILER_LIBCXX}
WANTLIB-qt += uim uim-custom uim-scm xcb xcb-dri2 xcb-glx z

LIB_DEPENDS-qt=		${MODQT3_LIB_DEPENDS} \
			${MODGETTEXT_LIB_DEPENDS} \
			inputmethods/uim

WANTLIB-qt4 += ${cWANTLIB} ${MODQT4_WANTLIB}
WANTLIB-qt4 += ICE QtGui SM Xi Xinerama c pthread ${COMPILER_LIBCXX} uim
WANTLIB-qt4 += uim-custom uim-scm

LIB_DEPENDS-qt4=	${MODQT4_LIB_DEPENDS} \
			${MODGETTEXT_LIB_DEPENDS} \
			inputmethods/uim

AUTOCONF_VERSION=	2.68
CONFIGURE_STYLE=	autoconf

CONFIGURE_ENV=		CPPFLAGS='-I${MODQT3_INCDIR} -I${LOCALBASE}/include -I${X11BASE}/include' \
			LDFLAGS='-L${MODQT3_LIBDIR} -L${LOCALBASE}/lib -L${X11BASE}/lib' \
			ac_cv_prog_HOST_MOC=${MODQT3_MOC} \
			ac_cv_prog_HOST_UIC=${MODQT3_MOC}

CONFIGURE_ARGS=		--with-qt \
			--with-qt-immodule \
			--with-qt4 \
			--with-qt4-immodule \
			--with-anthy-utf8

post-install:
	rm ${PREFIX}/lib/uim/plugin/*.{a,la}
	rm ${PREFIX}/lib/gtk-2.0/2.10.0/immodules/*.{a,la}
	rm ${PREFIX}/lib/gtk-3.0/3.0.0/immodules/*.{a,la}
	rm ${PREFIX}/lib/kde3/*.{a,la}

.include <bsd.port.mk>
@


1.55
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2017/04/10 11:46:21 sthen Exp $
d25 1
a25 1
REVISION-main=		1
@


1.54
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/03/19 22:48:27 naddy Exp $
d56 1
a56 1
WANTLIB-main += Xft anthy anthydic c curses expat pthread-stubs ${LIBCXX}
d90 1
a90 1
WANTLIB-kde += pthread-stubs qt-mt ${LIBCXX} uim uim-scm util xcb xcb-dri2
d99 1
a99 1
WANTLIB-qt += glapi jpeg lcms mng png pthread pthread-stubs ${LIBCXX}
d107 1
a107 1
WANTLIB-qt4 += ICE QtGui SM Xi Xinerama c pthread ${LIBCXX} uim
@


1.53
log
@drop SHARED_ONLY from KDE3 ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/03/11 20:28:27 naddy Exp $
d56 1
a56 1
WANTLIB-main += Xft anthy anthydic c curses expat pthread-stubs stdc++
d90 1
a90 1
WANTLIB-kde += pthread-stubs qt-mt stdc++ uim uim-scm util xcb xcb-dri2
d99 1
a99 1
WANTLIB-qt += glapi jpeg lcms mng png pthread pthread-stubs stdc++
d107 1
a107 1
WANTLIB-qt4 += ICE QtGui SM Xi Xinerama c pthread stdc++ uim
@


1.52
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/08/25 14:03:21 sthen Exp $
a2 1
SHARED_ONLY=		Yes
@


1.51
log
@wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/08/25 00:30:41 bentley Exp $
d123 1
a123 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--with-qt \
@


1.50
log
@Update homepage/master_sites after migration from Google Code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/04/04 09:21:01 ajacoutot Exp $
d24 1
a24 1
REVISION-gtk3=		1
d82 1
a82 1
WANTLIB-gtk3 += uim-scm xcb xcb-render xcb-shm z
@


1.49
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/01/09 16:45:37 ajacoutot Exp $
d23 6
a28 6
REVISION-gtk=		0
REVISION-gtk3=		0
REVISION-kde=		0
REVISION-main=		0
REVISION-qt=		0
REVISION-qt4=		0
d30 2
a31 2
MASTER_SITES=		https://uim.googlecode.com/files/
HOMEPAGE=		https://code.google.com/p/uim/
@


1.48
log
@Update to uim-1.8.6.
Add new gtk3 and qt4 subpackages.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2013/10/24 15:18:00 ajacoutot Exp $
d23 6
@


1.47
log
@No need for the libiconv NODULE when we already have the gettext one.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/10/22 11:34:19 zhuk Exp $
d3 2
a4 21
COMMENT-main=	multilingual input method library
COMMENT-gtk=	uim for GTK
COMMENT-qt=	uim for QT
COMMENT-kde=	uim for KDE

SHARED_ONLY=	Yes
CATEGORIES=	inputmethods japanese chinese

V=		1.5.3
DISTNAME=	uim-$V
MASTER_SITES=	https://uim.googlecode.com/files/
HOMEPAGE=	https://code.google.com/p/uim/
PKGNAME-main=	uim-$V
PKGNAME-gtk=	uim-gtk-$V
PKGNAME-qt=	uim-qt-$V
PKGNAME-kde=	uim-kde-$V

REVISION-main=	11
REVISION-gtk=	13
REVISION-qt=	7
REVISION-kde=	10
d6 20
a25 2
# BSD
PERMIT_PACKAGE_CDROM=	Yes
d32 2
a33 1
MULTI_PACKAGES=	-main -gtk -qt -kde
d35 2
a36 1
CONFIGURE_STYLE=	autoconf
d38 1
a38 4
MODULES=	devel/gettext \
		x11/qt3 \
		textproc/intltool
DPB_PROPERTIES =	tag:kde3
d40 4
a43 3
USE_GMAKE=	Yes
AUTOCONF_VERSION=	2.62
SUBST_VARS=	MODQT_PLUGINS
d45 1
a45 3
Wcommon =	X11 Xext c m xcb \
		Xrender fontconfig freetype expat z \
		${MODGETTEXT_WANTLIB}
d47 2
d50 3
a52 6
RUN_DEPENDS-main=${RUN_DEPENDS} \
		devel/desktop-file-utils
LIB_DEPENDS-main =	inputmethods/anthy \
			${MODGETTEXT_LIB_DEPENDS}
WANTLIB-main=	${Wcommon} curses \
		util Xft stdc++ anthy anthydic \
d54 2
a55 1
uim_LIB_DEPENDS=inputmethods/uim
a56 2
#common to -qt, -kde, and -gtk
Wx =	GL Xinerama Xrandr Xcursor Xdamage Xfixes Xi Xxf86vm drm
d58 7
a64 3
LIB_DEPENDS-qt=		${MODQT_LIB_DEPENDS} \
			${uim_LIB_DEPENDS} \
			${MODGETTEXT_LIB_DEPENDS}
d66 2
a67 4
#common to -qt and -kde
Wqt =		${Wcommon} ${Wx} ${MODQT_WANTLIB} \
		ICE SM Xft Xmu Xt jpeg lcms mng png \
		 stdc++ uim gcroots uim-scm
d69 18
a86 1
WANTLIB-qt =	${Wqt} uim-custom pthread
d88 10
a97 1
LIB_DEPENDS-kde	=	inputmethods/uim \
d99 1
a99 3
			x11/kde/libs3
WANTLIB-kde =	${Wqt} idn util art_lgpl_2 lib/kde3/DCOP \
		lib/kde3/kdecore>=7 lib/kde3/kdefx lib/kde3/kdeui
d101 3
d105 6
a110 2
LIB_DEPENDS-gtk =	${LIB_DEPENDS-main} ${uim_LIB_DEPENDS} \
			x11/gtk+2
d112 17
a128 19
WANTLIB-gtk=	${Wcommon} ${Wx} gio-2.0 glib-2.0 gmodule-2.0 pangoft2-1.0 \
		gobject-2.0 pango-1.0 atk-1.0 uim gcroots uim-scm \
		pangocairo-1.0 cairo png Xcomposite xcb-render xcb-shm \
		pcre pixman-1 gtk-x11-2.0 \
		gdk-x11-2.0 gdk_pixbuf-2.0 gthread-2.0 pthread anthy anthydic \
		uim-custom Xau Xdmcp ffi pthread-stubs stdc++

MAKE_FLAGS=	moduledir='${LOCALBASE}/lib/gtk-2.0/2.10.0/immodules' \
		UIM_QT_LDFLAGS='-pthread -L${X11BASE}/lib -L${MODQT_LIBDIR} -lqt-mt -lXext -lX11'

CONFIGURE_ENV=	CPPFLAGS='-I${LOCALBASE}/include -I${X11BASE}/include'
CONFIGURE_ENV+=	LDFLAGS='-L${MODQT_LIBDIR} -L${LOCALBASE}/lib -L${X11BASE}/lib'
CONFIGURE_ENV+=	QTDIR=${MODQT_QTDIR} QTPLUGINSDIR=${LOCALBASE}/${MODQT_PLUGINS}

CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--without-canna --with-anthy --without-prime  \
		--with-gtk2 --with-qt --with-qt-immodule \
		--enable-default-toolkit=gtk --without-m17nlib \
		--enable-pref --enable-dict
@


1.46
log
@Do a massive change on the placement of some KDE3 apps data:

  * share/apps => share/apps.kde3
  * share/doc/HTML => share/doc/HTML.kde3

This is a part of KDE3/4 deconflicting work.

Build tested in a bulk by landry@@, also sat over a week on ports@@.
Run-time tested with some KDE3 apps, including KMail, taxipilot, yakuake...

"do it" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2013/10/14 22:05:05 schwarze Exp $
d20 4
a23 4
REVISION-main=	10
REVISION-gtk=	12
REVISION-qt=	6
REVISION-kde=	9
d37 1
a37 2
MODULES=	converters/libiconv \
		devel/gettext \
d48 1
a48 1
		${MODGETTEXT_WANTLIB} ${MODLIBICONV_WANTLIB}
a53 1
			${MODLIBICONV_LIB_DEPENDS} \
a64 1
			${MODLIBICONV_LIB_DEPENDS} \
a74 1
			${MODLIBICONV_LIB_DEPENDS} \
@


1.45
log
@After src/usr.bin/mandoc/roff.c rev. 1.58, mandoc now longer throws ERRORs.
Formatting has been correct, anyway. Drop USE_GROFF, no PLIST change, no bump.
OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2013/10/05 07:34:34 espie Exp $
d20 1
a20 1
REVISION-main=	9
d23 1
a23 1
REVISION-kde=	8
@


1.44
log
@disentangle kde3 from kde4: all kde3 with the same name get an explict
PKGSPEC.  revision bumps follow.

Also, tag all kde3 ports, those that use the module and those that do not,
with explicit kde3 tags.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/08/07 21:32:05 naddy Exp $
a43 1
USE_GROFF =	Yes
@


1.43
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/07/07 09:53:02 ajacoutot Exp $
d23 1
a23 1
REVISION-kde=	7
d41 1
@


1.42
log
@Since its last update, gtk+2 gained an --update-cache option for
gtk-query-immodules-2.0 -- so use it as was done with gtk+3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/06/24 15:53:38 zhuk Exp $
d13 2
a14 2
MASTER_SITES=	http://uim.googlecode.com/files/
HOMEPAGE=	http://code.google.com/p/uim/
d20 4
a23 4
REVISION-main=	8
REVISION-gtk=	11
REVISION-qt=	5
REVISION-kde=	6
@


1.41
log
@Massive cleanup for KDE3. Main point is in changing WANTLIB from "foo" to
"lib/kde3/foo" where appropirate, but also many missing desktop goo items
added, some PFRAG.shared removed and so on.

input and okay landry@@ and ajacoutot@@, also okay espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/03/21 08:46:31 ajacoutot Exp $
d21 1
a21 1
REVISION-gtk=	10
@


1.40
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/03/11 11:12:33 espie Exp $
d23 1
a23 1
REVISION-kde=	5
d81 2
a82 1
WANTLIB-kde =	${Wqt} idn util art_lgpl_2 kdecore>=7 DCOP kdefx kdeui \
@


1.39
log
@PERMIT_* / REGRESS -> TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/11/03 17:46:21 jasper Exp $
a42 1
USE_LIBTOOL=	Yes
@


1.38
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/10/03 06:42:46 ajacoutot Exp $
a26 3
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.37
log
@Set DATADIRNAME in a consistent way now that glib-gettext.m4 has been
fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/09/16 10:02:38 espie Exp $
d20 4
a23 4
REVISION-main=	7
REVISION-gtk=	9
REVISION-qt=	4
REVISION-kde=	4
d51 1
a51 1
Wcommon =	X11 Xau Xdmcp Xext c m pthread-stubs xcb \
d96 1
a96 1
		uim-custom
@


1.36
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/09/13 06:42:50 jasper Exp $
d20 1
a20 1
REVISION-main=	6
d99 1
a99 2
		UIM_QT_LDFLAGS='-pthread -L${X11BASE}/lib -L${MODQT_LIBDIR} -lqt-mt -lXext -lX11' \
		itlocaledir=${TRUEPREFIX}/share/locale
@


1.35
log
@- drop the gnome subpackage, it's an old gnome-2 style applet which isn't supported anymore

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/06/06 15:10:40 jasper Exp $
d20 4
a23 4
REVISION-main=	5
REVISION-gtk=	8
REVISION-qt=	3
REVISION-kde=	3
@


1.34
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/05/04 07:32:11 landry Exp $
a6 1
COMMENT-gnome=	uim for GNOME
a18 1
PKGNAME-gnome=	uim-gnome-$V
d20 2
a21 2
REVISION-main=	4
REVISION-gtk=	7
a23 1
REVISION-gnome=	9
d36 1
a36 1
MULTI_PACKAGES=	-main -gtk -qt -kde -gnome
d66 1
a66 1
#common to -qt, -kde, -gtk and -gnome
d91 1
a91 2
#common to -gtk and -gnome
Wgtk =		${Wcommon} ${Wx} gio-2.0 glib-2.0 gmodule-2.0 pangoft2-1.0 \
d95 2
a96 14
		gdk-x11-2.0 gdk_pixbuf-2.0 gthread-2.0 pthread

WANTLIB-gtk=	${Wgtk} anthy anthydic uim-custom

LIB_DEPENDS-gnome =	inputmethods/uim \
			x11/gtk+2 \
			x11/gnome/panel

WANTLIB-gnome=	${Wgtk} ICE SM crypto gthread-2.0 pthread ssl \
		ORBit-2 ORBitCosNaming-2 art_lgpl_2 bonobo-2 \
		bonobo-activation gconf-2 gnome-2 gnomecanvas-2 \
		popt xml2 bonoboui-2 gnome-keyring gnomevfs-2 \
		dbus-1 dbus-glib-1 gailutil util panel-applet-2 \
		canberra gcrypt gpg-error ltdl ogg vorbis vorbisfile
@


1.33
log
@Try to bring some sanity to uim's WANTLIBs, put common stuff in Wx, Wgtk
and Wqt and reuse them in WANTLIB-gnome and WANTLIB-kde. Bump
corresponding PKGNAMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/11/17 08:05:17 espie Exp $
d26 1
a26 1
REVISION-gnome=	8
d110 1
a110 1
		popt xml2 bonoboui-2 gnome-keyring gnomeui-2 gnomevfs-2 \
@


1.32
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/06 23:52:59 espie Exp $
d23 4
a26 4
REVISION-gtk=	6
REVISION-qt=	2
REVISION-kde=	2
REVISION-gnome=	7
d55 1
d64 2
a65 2
WANTLIB-main=	${Wcommon} Xrender fontconfig freetype curses \
		util Xft expat z stdc++ anthy anthydic
d69 3
d76 7
a82 2
WANTLIB-qt =	${Wcommon} ${MODQT_WANTLIB} \
		pthread stdc++ uim uim-custom gcroots uim-scm
d88 1
a88 3
WANTLIB-kde =	${Wcommon} Xrender ICE SM idn jpeg png util z \
		art_lgpl_2 qt-mt stdc++ kdecore>=7 DCOP kdefx kdeui \
		uim gcroots uim-scm
d93 9
a101 7
WANTLIB-gtk =	${Wcommon} gio-2.0 glib-2.0 gmodule-2.0 pangoft2-1.0 \
		gobject-2.0 pango-1.0 atk-1.0 uim uim-custom gcroots uim-scm \
		pangocairo-1.0 cairo png z expat \
		Xcomposite Xcursor Xdamage Xfixes Xi Xinerama Xrandr \
		pcre pixman-1 Xrender fontconfig freetype gtk-x11-2.0 \
		gdk-x11-2.0 gdk_pixbuf-2.0 anthy anthydic gthread-2.0 pthread \
		xcb-render xcb-render-util
d106 2
a107 1
WANTLIB-gnome=	${WANTLIB-gtk} ICE SM crypto gthread-2.0 pthread ssl \
d111 2
a112 5
		Xcomposite Xcursor Xdamage Xfixes Xi Xinerama Xrandr \
		dbus-1 dbus-glib-1 gailutil pcre pixman-1 util \
		avahi-client avahi-common avahi-glib gtk-x11-2.0 \
		gdk-x11-2.0 gdk_pixbuf-2.0 panel-applet-2 \
		uim gcroots uim-scm
@


1.31
log
@new wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/06 16:07:00 espie Exp $
d59 2
a60 2
		:desktop-file-utils-*:devel/desktop-file-utils
LIB_DEPENDS-main =	::inputmethods/anthy \
d66 1
a66 1
uim_LIB_DEPENDS=::inputmethods/uim
d75 1
a75 1
LIB_DEPENDS-kde	=	::inputmethods/uim \
d78 1
a78 1
			::x11/kde/libs3
d80 1
a80 1
		art_lgpl_2 qt-mt stdc++ kdecore.>=7 DCOP kdefx kdeui \
d85 1
a85 1
			::x11/gtk+2
d94 3
a96 3
LIB_DEPENDS-gnome =	::inputmethods/uim \
			::x11/gtk+2 \
			::x11/gnome/panel
@


1.30
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/05 10:06:44 espie Exp $
d60 3
a62 3
LIB_DEPENDS-main=::inputmethods/anthy \
		${MODLIBICONV_LIB_DEPENDS} \
		${MODGETTEXT_LIB_DEPENDS}
d68 4
a71 4
LIB_DEPENDS-qt=	${MODQT_LIB_DEPENDS} \
		${uim_LIB_DEPENDS} \
		${MODLIBICONV_LIB_DEPENDS} \
		${MODGETTEXT_LIB_DEPENDS}
d75 4
a78 4
LIB_DEPENDS-kde=uim,gcroots,uim-scm::inputmethods/uim \
		${MODLIBICONV_LIB_DEPENDS} \
		${MODGETTEXT_LIB_DEPENDS} \
		kdecore.>=7,DCOP,kdefx,kdeui::x11/kde/libs3
d80 2
a81 1
		art_lgpl_2 qt-mt stdc++
d84 2
a85 2
LIB_DEPENDS-gtk=${LIB_DEPENDS-main} ${uim_LIB_DEPENDS} \
		::x11/gtk+2
d94 3
a96 3
LIB_DEPENDS-gnome=uim,gcroots,uim-scm::inputmethods/uim \
		::x11/gtk+2 \
		::x11/gnome/panel
d104 2
a105 1
		gdk-x11-2.0 gdk_pixbuf-2.0 panel-applet-2
@


1.29
log
@convert qt3 to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/10/24 21:21:44 ajacoutot Exp $
d54 3
a56 1
Wcommon =	X11 Xau Xdmcp Xext c m pthread-stubs xcb
a93 2
		${MODLIBICONV_LIB_DEPENDS} \
		${MODGETTEXT_LIB_DEPENDS} \
@


1.28
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/10/18 18:13:15 espie Exp $
d54 1
a54 1
WANTLIB=	X11 Xau Xdmcp Xext c m pthread-stubs xcb
d61 1
a61 1
WANTLIB-main=	${WANTLIB} Xrender fontconfig freetype curses \
d70 2
a71 1
WANTLIB-qt=	${WANTLIB} pthread stdc++ uim uim-custom gcroots uim-scm
d77 1
a77 1
WANTLIB-kde=	${WANTLIB} Xrender ICE SM idn jpeg png util z \
d83 1
a83 1
WANTLIB-gtk=	${WANTLIB} gio-2.0 glib-2.0 gmodule-2.0 pangoft2-1.0 \
@


1.27
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/10/11 08:15:02 jasper Exp $
a49 1
USE_X11=	Yes
@


1.26
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/09/30 07:28:29 ajacoutot Exp $
d51 1
@


1.25
log
@Missed that one too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/09/19 19:01:14 jasper Exp $
d23 1
a23 1
REVISION-gtk=	5
d26 1
a26 1
REVISION-gnome=	6
d84 1
a84 1
		pangocairo-1.0 cairo glitz png z expat \
@


1.24
log
@- fix an off by one in uim_x_kana_input_hack_init()

found by TAKAHASHI Tamotsu, confirmed/committed by upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/08/21 19:57:09 ajacoutot Exp $
d23 1
a23 1
REVISION-gtk=	4
@


1.23
log
@gtk-query-immodules-2.0 needs only to run at @@unexec-delete time, not
@@unexec.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/07/24 11:44:17 ajacoutot Exp $
d22 1
a22 1
REVISION-main=	3
@


1.22
log
@Move to new DEPENDS/WANTLIB/REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/12/21 21:25:28 ajacoutot Exp $
d23 1
a23 1
REVISION-gtk=	3
@


1.21
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/10/15 20:46:40 ajacoutot Exp $
d16 11
a26 5
PKGNAME-main=	uim-$Vp2
PKGNAME-gtk=	uim-gtk-$Vp2
PKGNAME-qt=	uim-qt-$Vp1
PKGNAME-kde=	uim-kde-$Vp1
PKGNAME-gnome=	uim-gnome-$Vp5
d58 1
a58 1
LIB_DEPENDS-main=anthy,anthydic::inputmethods/anthy \
d62 1
a62 1
		util Xft expat z stdc++
d64 1
a64 1
uim_LIB_DEPENDS=uim,uim-custom,gcroots,uim-scm::inputmethods/uim
d70 1
a70 1
WANTLIB-qt=	${WANTLIB} pthread stdc++
d77 1
a77 1
		art_lgpl_2 qt-mt
d81 1
a81 1
		gtk-x11-2.0,gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2
d83 1
a83 1
		gobject-2.0 pango-1.0 atk-1.0 \
d86 3
a88 1
		pcre pixman-1 Xrender fontconfig freetype
d93 2
a94 2
		gtk-x11-2.0,gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 \
		panel-applet-2::x11/gnome/panel
d101 2
a102 1
		avahi-client avahi-common avahi-glib
@


1.20
log
@Unbreak after the GNOME 2.28 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/08/10 06:32:05 kili Exp $
d16 1
a16 1
PKGNAME-main=	uim-$Vp1
@


1.19
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/06/19 09:24:14 sthen Exp $
d20 1
a20 1
PKGNAME-gnome=	uim-gnome-$Vp4
d89 1
a89 1
		bonobo-activation gconf-2 glade-2.0 gnome-2 gnomecanvas-2 \
@


1.18
log
@fix wantlib, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/01/30 09:39:55 sturm Exp $
d16 5
a20 5
PKGNAME-main=	uim-$Vp0
PKGNAME-gtk=	uim-gtk-$Vp1
PKGNAME-qt=	uim-qt-$Vp0
PKGNAME-kde=	uim-kde-$Vp0
PKGNAME-gnome=	uim-gnome-$Vp3
d48 1
a48 1
WANTLIB=	X11 Xau Xdmcp Xext c m
@


1.17
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/01/21 10:50:12 ajacoutot Exp $
d20 1
a20 1
PKGNAME-gnome=	uim-gnome-$Vp2
d92 2
a93 1
		dbus-1 dbus-glib-1 gailutil pcre pixman-1 util
@


1.16
log
@- regen WANTLIB after libgnome esound support removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/10/28 13:59:13 jasper Exp $
d17 1
a17 1
PKGNAME-gtk=	uim-gtk-$Vp0
d20 1
a20 1
PKGNAME-gnome=	uim-gnome-$Vp1
d76 1
a76 1
WANTLIB-gtk=	${WANTLIB} glib-2.0 gmodule-2.0 pangoft2-1.0 \
d87 1
a87 1
WANTLIB-gnome=	${WANTLIB-gtk} ICE SM crypto gthread-2.0 jpeg pthread ssl \
@


1.15
log
@- it's GNOME, not Gnome2 or gnome or any other variation

discussed with and agreed by ajacoutot@@ some time ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/10/14 02:16:46 kevlo Exp $
d20 1
a20 1
PKGNAME-gnome=	uim-gnome-$Vp0
d88 2
a89 2
		ORBit-2 ORBitCosNaming-2 art_lgpl_2 audiofile bonobo-2 \
		bonobo-activation esd gconf-2 glade-2.0 gnome-2 gnomecanvas-2 \
@


1.14
log
@update to 1.5.3

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/07/27 21:44:59 sthen Exp $
d4 4
a7 4
COMMENT-gtk=	uim for gtk
COMMENT-qt=	uim for qt
COMMENT-kde=	uim for kde
COMMENT-gnome=	uim for gnome
d16 5
a20 5
PKGNAME-main=	uim-$V
PKGNAME-gtk=	uim-gtk-$V
PKGNAME-qt=	uim-qt-$V
PKGNAME-kde=	uim-kde-$V
PKGNAME-gnome=	uim-gnome-$V
@


1.13
log
@- fix missed adjustment in qt3.port.mk to handle shared_lib bump;
this change requires bumping other ports which use it. pointed
out by naddy, thanks!

- add a comment in Makefile to warn others not to do the same.

ok naddy@@
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.12 2008/06/29 20:44:52 sthen Exp $
d12 1
a12 1
V=		1.4.1
d14 5
a18 5
MASTER_SITES=	http://uim.freedesktop.org/releases/uim/stable/
HOMEPAGE=	http://uim.freedesktop.org/wiki/
PKGNAME-main=	uim-$Vp0
PKGNAME-gtk=	uim-gtk-$Vp1
PKGNAME-qt=	uim-qt-$Vp1
d20 1
a20 1
PKGNAME-gnome=	uim-gnome-$Vp0
d28 3
a30 2
SHARED_LIBS +=	gcroots              0.0      # .0.0
SHARED_LIBS +=	uim                  1.0      # .5.0
d37 9
a45 7
MODULES=converters/libiconv devel/gettext x11/qt3

USE_GMAKE=Yes
USE_LIBTOOL=Yes
USE_X11=Yes
AUTOCONF_VERSION=	2.61
AUTOCONF_DIR=	${WRKDIST} ${WRKDIST}/sigscheme
d48 1
a48 2

WANTLIB=	Xrender X11 fontconfig freetype Xext c stdc++ m Xau Xdmcp
d55 2
a56 1
WANTLIB-main=	${WANTLIB} curses util Xft expat z
d58 1
a58 1
uim_LIB_DEPENDS=uim,uim-custom,gcroots::inputmethods/uim
d60 5
d66 3
a68 5
LIB_DEPENDS-qt=	${LIB_DEPENDS-main} ${MODQT_LIB_DEPENDS} ${uim_LIB_DEPENDS}
WANTLIB-qt=	${WANTLIB} pthread


LIB_DEPENDS-kde=${LIB_DEPENDS-qt} \
d70 2
a71 1
WANTLIB-kde=	${WANTLIB-qt} ICE SM idn jpeg png util z art_lgpl_2
d80 1
a80 1
		pcre pixman-1
d82 4
a85 3


LIB_DEPENDS-gnome=${LIB_DEPENDS-gtk} \
a93 2


a97 1
		
d102 3
a104 3
CONFIGURE_ARGS=	--without-canna --with-anthy --without-prime  \
		--with-gtk2 --without-gnome2 \
		--with-qt --with-qt-immodule \
d106 2
a107 2
		--enable-pref --enable-dict 
		
@


1.12
log
@sync WANTLIB following cairo update. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/06/07 09:58:40 bernd Exp $
d17 1
a17 1
PKGNAME-qt=	uim-qt-$Vp0
@


1.11
log
@Don't hardcode the qt3 plugins path in the configure.ac patch but
use a variable from CONFIGURE_ENV.

No bump needed, didn't build before.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/06/06 17:23:18 bernd Exp $
d16 1
a16 1
PKGNAME-gtk=	uim-gtk-$Vp0
d19 1
a19 1
PKGNAME-gnome=	uim-gnome-$V
d70 3
a72 1
		pangocairo-1.0 cairo glitz png z expat
d81 3
a83 1
		popt xml2 bonoboui-2 gnome-keyring gnomeui-2 gnomevfs-2
@


1.10
log
@Missing PKGNAME bumps because of changed MODQT_PLUGINS path.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/01/04 17:48:35 espie Exp $
d90 1
a90 1
CONFIGURE_ENV+=	QTDIR=${MODQT_QTDIR}
@


1.9
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/12/18 15:56:16 ajacoutot Exp $
d17 1
a17 1
PKGNAME-qt=	uim-qt-$V
@


1.8
log
@- add missing update-desktop-database goo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/16 11:14:46 simon Exp $
a87 1
FAKE_FLAGS=	${MAKE_FLAGS} DESTDIR=${WRKINST}
@


1.7
log
@remove surrounding quotes from COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/05/14 13:20:12 msf Exp $
d15 1
a15 1
PKGNAME-main=	uim-$V
d47 2
@


1.6
log
@unbreak uim-gtk after gtk+2 update

ok espie@@ mcbride@@
@
text
@d1 6
a6 6
# $OpenBSD: Makefile,v 1.5 2007/04/08 14:58:04 espie Exp $
COMMENT-main=	'multilingual input method library'
COMMENT-gtk=	'uim for gtk'
COMMENT-qt=	'uim for qt'
COMMENT-kde=	'uim for kde'
COMMENT-gnome=	'uim for gnome'
@


1.5
log
@update anthy and uim to a ways more recent version.
fix uim build issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/02/03 17:05:24 espie Exp $
d16 1
a16 1
PKGNAME-gtk=	uim-gtk-$V
d81 1
a81 1
MAKE_FLAGS=	moduledir='${LOCALBASE}/lib/gtk-2.0/2.4.0/immodules' \
@


1.4
log
@zap patch that's no longer needed with a working getpeereid.
IMPORTANT: will break uim very thoroughly if you're not running -current.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/21 00:47:28 espie Exp $
d5 2
d11 1
a11 1
V=		1.2.1
d13 1
a13 1
MASTER_SITES=	http://uim.freedesktop.org/releases/
d15 1
a15 1
PKGNAME-main=	uim-$Vp2
d18 2
d27 3
a29 2
SHARED_LIBS=		uim 0.0 \
			uim-custom 0.0
d31 1
a31 1
MULTI_PACKAGES=	-main -gtk -qt
d40 2
a41 1
AUTOCONF_VERSION=	2.59
d45 1
a45 1
WANTLIB=	Xrender X11 fontconfig freetype Xext c stdc++ m
d50 3
a53 1
WANTLIB-main=	${WANTLIB} curses util Xft
a54 1
uim_LIB_DEPENDS=uim,uim-custom::inputmethods/uim
d58 6
d65 1
a65 2
		gtk-x11-2.0,gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 \

d68 11
a78 1
		pangocairo-1.0 cairo util glitz png z
d82 3
a84 1
		UIM_QT_LDFLAGS='-pthread -L${X11BASE}/lib -L${MODQT_LIBDIR} -lqt-mt -lXext -lX11'
d92 1
a92 2
		--without-qt --without-qt-immodule --with-gtk2 \
		--without-gnome2 \
@


1.3
log
@switch to new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/10/19 09:35:16 espie Exp $
d13 1
a13 1
PKGNAME-main=	uim-$Vp1
@


1.2
log
@activate the qt part, now that it works.
Split stuff into subpackages, so that you don't need to have gtk if
you don't need it.
@
text
@d1 2
a2 2
# $OpenBSD$
COMMENT=	'multilingual input method library'
d13 1
a13 1
PKGNAME=	uim-$Vp0
d26 1
a26 1
MULTI_PACKAGES=	-gtk -qt
d29 2
a30 1
MODULES=converters/libiconv devel/gettext
d38 17
a54 13
SUBPACKAGE?=
.if !defined(PACKAGING) || (defined(PACKAGING) && ${SUBPACKAGE} == "-qt")
MODULES+= 	x11/qt3
WANTLIB+=	pthread
.endif

.if !defined(PACKAGING) || (defined(PACKAGING) && ${SUBPACKAGE} == "")
WANTLIB+=	curses util Xft
.endif

.if !defined(PACKAGING) || (defined(PACKAGING) && ${SUBPACKAGE} == "-gtk")
LIB_DEPENDS+=	gtk-x11-2.0,gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2
WANTLIB+=	glib-2.0 gmodule-2.0 pangoft2-1.0 \
a56 5
.endif

.if defined(PACKAGING) && ${SUBPACKAGE} != ""
LIB_DEPENDS+=	uim,uim-custom::inputmethods/uim
.endif
a57 1
LIB_DEPENDS+=	anthy,anthydic::inputmethods/anthy
a58 2
WANTLIB+=	Xrender X11 fontconfig freetype Xext c stdc++ m
		
@


1.1
log
@Initial revision
@
text
@d3 2
d6 1
d9 2
a10 1
DISTNAME=	uim-1.2.1
d13 3
d26 2
d35 18
d54 3
a56 2
LIB_DEPENDS=	gtk-x11-2.0,gdk-x11-2.0,gdk_pixbuf-2.0::x11/gtk+2 \
		anthy,anthydic::inputmethods/anthy
d58 3
a60 4
WANTLIB=	Xrender X11 fontconfig freetype Xext Xft c stdc++ m \
		glib-2.0 gmodule-2.0 pangoft2-1.0 \
		gobject-2.0 pango-1.0 atk-1.0 curses \
		pangocairo-1.0 cairo util glitz png z
d62 2
a63 1
MAKE_FLAGS=	moduledir='${LOCALBASE}/lib/gtk-2.0/2.4.0/immodules'
d67 2
a68 1
CONFIGURE_ENV+=	LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib'
d73 1
@


1.1.1.1
log
@universal input method. tested for japanese stuff with anthy.
works just fine with gtk+. not working with qt yet.
@
text
@@
