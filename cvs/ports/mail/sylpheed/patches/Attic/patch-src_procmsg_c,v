head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2004.05.31.12.54.32;	author couderc;	state dead;
branches;
next	1.1;

1.1
date	2004.04.12.13.02.35;	author couderc;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 0.9.11
@
text
@$OpenBSD: patch-src_procmsg_c,v 1.1 2004/04/12 13:02:35 couderc Exp $
--- src/procmsg.c.orig	2004-04-12 15:53:19.000000000 +0200
+++ src/procmsg.c	2004-04-12 15:55:34.000000000 +0200
@@@@ -127,8 +127,8 @@@@ GHashTable *procmsg_to_folder_hash_table
 static gint procmsg_read_cache_data_str(FILE *fp, gchar **str)
 {
 	gchar buf[BUFFSIZE];
-	gint ret = 0;
-	size_t len;
+	gint ret = 0,
+	     len;
 
 	if (fread(&len, sizeof(len), 1, fp) == 1) {
 		if (len < 0)
@@@@ -137,7 +137,7 @@@@ static gint procmsg_read_cache_data_str(
 			gchar *tmp = NULL;
 
 			while (len > 0) {
-				size_t size = MIN(len, BUFFSIZE - 1);
+				gint size = MIN(len, BUFFSIZE - 1);
 
 				if (fread(buf, size, 1, fp) != 1) {
 					ret = -1;
@


1.1
log
@Fix for imap on sparc64 (and probably other 64bits archs), from Andrey Smagin.
@
text
@d1 1
a1 1
$OpenBSD$
@

