head	1.2;
access;
symbols
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2012.06.18.16.03.00;	author pascal;	state dead;
branches;
next	1.1;

1.1
date	2012.01.26.07.24.08;	author bentley;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to nmh 1.5.
- no need for gmake
- enable TLS
- enable readline support in whatnow(1) using libedit
- add an upstream patch to fix MIME decoding on 64bit BE archs
- install the new "replyfilter" script as an aid when using repl(1) to reply to
  MIME messages, and add the appropriate RUN_DEPENDS (using lynx instead of w3m)

tested by myself, william@@, bentley@@

ok william@@ (maintainer) bentley@@ sthen@@
@
text
@$OpenBSD: patch-sbr_client_c,v 1.1 2012/01/26 07:24:08 bentley Exp $

Fix bug 35242
From http://savannah.nongnu.org/bugs/?35242


--- sbr/client.c.orig	Fri Dec  3 19:52:53 2010
+++ sbr/client.c	Tue Jan 10 22:57:51 2012
@@@@ -101,7 +101,7 @@@@ client (char *args, char *service, char *response, int
 
 	    if (connect(sd, ai->ai_addr, ai->ai_addrlen) == 0) {
 		freeaddrinfo(res);
-		client_freelist(ap);
+		client_freelist(arguments);
 		return sd;
 	    }
 
@@@@ -115,7 +115,7 @@@@ client (char *args, char *service, char *response, int
     	freeaddrinfo(res);
     }
 
-    client_freelist(ap);
+    client_freelist(arguments);
     strncpy (response, "no servers available", len_response);
     return NOTOK;
 }
@@@@ -128,8 +128,7 @@@@ client (char *args, char *service, char *response, int
 static void
 client_freelist(char **list)
 {
-    while (*list++ != NULL)
-	free(*list);
+    free(*list);
 }
 
 
@


1.1
log
@Update mail/nmh to 1.4.

ok william@@ (maintainer, also provided an extra patch)
@
text
@d1 1
a1 1
$OpenBSD$
@

