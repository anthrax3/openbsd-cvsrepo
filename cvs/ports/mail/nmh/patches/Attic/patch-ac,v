head	1.4;
access;
symbols
	OPENBSD_3_1:1.3.0.10
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.8
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.3.0.6
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.2.0.4
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-apr-29:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2002.09.30.00.29.02;	author pvalchev;	state dead;
branches;
next	1.3;

1.3
date	2000.03.08.05.11.47;	author kevlo;	state Exp;
branches;
next	1.2;

1.2
date	99.03.26.08.48.31;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.04.30.04.24.31;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.04.30.04.24.31;	author marc;	state Exp;
branches;
next	;


desc
@@


1.4
log
@cleanup
@
text
@--- sbr/m_tmpfil.c.orig	Thu Sep  9 22:22:41 1999
+++ sbr/m_tmpfil.c	Tue Feb 29 18:06:52 2000
@@@@ -14,15 +14,18 @@@@
     static char tmpfil[BUFSIZ];
 
     snprintf (tmpfil, sizeof(tmpfil), "/tmp/%sXXXXXX", template);
-/*
-  Mkstemp work postponed until later -Doug
 #ifdef HAVE_MKSTEMP
-    unlink(mkstemp(tmpfil));
+    {
+	int fd;
+
+	fd = mkstemp (tmpfil);
+	if (fd == -1)
+	    return 0;
+	close (fd);
+	unlink (tmpfil);
+    }
 #else
-*/
     unlink(mktemp(tmpfil));
-/*
 #endif
-*/
     return tmpfil;
 }
@


1.3
log
@- Upgrade to 1.0.3 and fix the security problem.
- Mark unbroken.
- Update the MASTER_SITES.
@
text
@@


1.2
log
@update to 1.0; Keith A Watson <kaw@@best.com>
@
text
@d1 3
a3 5
--- ./sbr/m_tmpfil.c.orig	Thu Jul  9 13:52:24 1998
+++ ./sbr/m_tmpfil.c	Sat Mar 20 17:09:20 1999
@@@@ -12,9 +12,14 @@@@
 m_tmpfil (char *template)
 {
a4 1
+    int fd;
d7 19
a25 7
-    unlink(mktemp(tmpfil));
+    fd = mkstemp (tmpfil);
+    if (fd == -1)
+	return 0;
+    close (fd);
+    unlink (tmpfil);
 
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- sbr/m_tmpfil.c.~1~	Mon May 19 22:19:12 1997
+++ sbr/m_tmpfil.c	Tue Apr 28 22:57:48 1998
@@@@ -12,9 +12,15 @@@@
d9 1
a9 1
-    sprintf(tmpfil, "/tmp/%sXXXXXX", template);
d11 5
a15 7
+    snprintf(tmpfil, BUFSIZ, "/tmp/%sXXXXXX", template);
+    fd = mkstemp( tmpfil );
+    if ( fd == -1 ) {
+        return 0;
+    }
+    close( fd );
+    unlink( tmpfil );
@


1.1.1.1
log
@Add New MH port
@
text
@@
