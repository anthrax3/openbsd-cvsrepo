head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.04.22.16.42.14;	author okan;	state Exp;
branches;
next	;
commitid	kaceXXQSjpLKbHAT;


desc
@@


1.1
log
@- Update to 2.1.21.
- gc configure patch since it hasn't been required since introducing
  --without-permcheck in configure, despite the comment in Makefile.
- Some of Defaults.py are now upstream defaults.

Remove FLAVORs:
- Rewrite src/common.c:check_caller() for the cgi/mail wrapper to now
  look at the defined group membership instead, _mailmanq (a new group).
  This allows the administrator to switch mail servers and web servers
  without requiring a FLAVOR for each combination; but rather, by simply
  adding the cgi/mail user to the _mailmanq group. This is a diversion
  from upstream, but will be proposed. At least sthen@@ and dlg@@ agree to
  go in this general direction.
@
text
@$OpenBSD$
--- src/common.h.orig	Sun Mar 20 13:48:18 2016
+++ src/common.h	Sun Mar 20 13:53:00 2016
@@@@ -27,6 +27,7 @@@@
 #include <errno.h>
 #include <sys/types.h>
 #include <grp.h>
+#include <pwd.h>
 #include <unistd.h>
 
 /* GETGROUPS_T gets set in the makefile by configure */
@@@@ -52,6 +53,7 @@@@ extern const char* logident;
 #define MAIL_ILLEGAL_COMMAND 6
 #define ADDALIAS_USAGE_ERROR 7
 #define GROUP_NAME_NOT_FOUND 8
+#define USER_NAME_NOT_FOUND 9
 
 
 /*
@
