head	1.10;
access;
symbols
	OPENBSD_6_0:1.10.0.20
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.16
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.18
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.14
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.10.0.12
	OPENBSD_5_6_BASE:1.10
	OPENBSD_5_5:1.10.0.10
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.8
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.10.0.6
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.10.0.4
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.8.0.4
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8;
locks; strict;
comment	@ * @;


1.10
date	2012.01.26.11.34.42;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.09.14.01.56.30;	author william;	state Exp;
branches;
next	1.8;

1.8
date	2011.01.05.16.05.54;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.13.16.13.04;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.12.11.12.57.37;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.12.11.09.59.25;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.11.08.48.24;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.11.09.21.46.50;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Fix the rc script.
@
text
@#!/bin/sh
#
# $OpenBSD: mailman.rc,v 1.9 2011/09/14 01:56:30 william Exp $

daemon="${TRUEPREFIX}/lib/mailman/bin/mailmanctl"
daemon_flags="-s start"

. /etc/rc.d/rc.subr

pexp="${MODPY_BIN} ${daemon}${daemon_flags:+ ${daemon_flags}}"
rc_reload=NO

rc_stop() {
	${daemon} stop
}

rc_cmd $1
@


1.9
log
@help the script match running processes

ok ajacoutot
@
text
@d3 1
a3 1
# $OpenBSD: mailman.rc,v 1.8 2011/01/05 16:05:54 ajacoutot Exp $
d6 1
a6 1
daemon_flags="-s -q"
a12 4
rc_start() {
	${rcexec} "${daemon} ${daemon_flags} start"
}

d14 1
a14 1
	${daemon} ${daemon_flags} stop
@


1.8
log
@Make use of rcexec.
While here, force postgresql to quit in rc_stop, ok pea@@
@
text
@d3 1
a3 1
# $OpenBSD: mailman.rc,v 1.7 2010/12/27 14:50:23 ajacoutot Exp $
d10 1
@


1.7
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d3 1
a3 1
# $OpenBSD: mailman.rc,v 1.6 2010/12/24 10:40:05 ajacoutot Exp $
d13 1
a13 2
	su -l -c ${daemon_class} -s ${daemon_shell} ${daemon_user} \
		-c "${daemon} ${daemon_flags} start"
@


1.6
log
@Cope with recent rc.subr changes.
@
text
@d3 1
a3 3
# $OpenBSD: mailman.rc,v 1.5 2010/12/13 16:13:04 ajacoutot Exp $

. /etc/rc.d/rc.subr
d8 1
a8 1
rc_conf
@


1.5
log
@Cope with recent rc.subr changes.
@
text
@d3 1
a3 1
# $OpenBSD: mailman.rc,v 1.4 2010/12/11 12:57:37 ajacoutot Exp $
d9 3
d15 2
a16 2
	su -l -c ${daemon_class:-daemon} -s ${daemon_shell:-/bin/sh} \
		${daemon_user:-root} -c "${daemon} ${daemon_flags} start"
@


1.4
log
@Move these to rc_reload=NO.
@
text
@d3 1
a3 1
# $OpenBSD: mailman.rc,v 1.3 2010/12/11 09:59:25 ajacoutot Exp $
d12 1
a12 1
	su -c ${daemon_class:-daemon} -s ${daemon_shell:-/bin/sh} \
@


1.3
log
@Cope again with rc.subr changes.
@
text
@d3 1
a3 1
# $OpenBSD: mailman.rc,v 1.2 2010/12/11 08:48:24 ajacoutot Exp $
d9 1
a17 4
}

rc_reload() {
	rc_err "$0: reload is not supported"
@


1.2
log
@Adapt to new rc_start and fix RCS Id.

ok robert@@
@
text
@d3 1
a3 1
# $OpenBSD$
d11 2
a12 2
	su -c ${_rcclass:-daemon} -s ${_rcshell:-/bin/sh} \
		${_rcuser:-root} -c "${daemon} ${daemon_flags} start"
@


1.1
log
@- switch to pkg-readmes
- add an rc script

looks ok to sthen@@
@
text
@d3 1
a3 1
# $OpenBSD
d11 2
a12 1
	${daemon} ${daemon_flags} start
@

