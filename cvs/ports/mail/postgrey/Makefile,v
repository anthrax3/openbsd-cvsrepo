head	1.21;
access;
symbols
	OPENBSD_6_1:1.21.0.8
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.21.0.6
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.21.0.2
	OPENBSD_5_9_BASE:1.21
	OPENBSD_5_8:1.21.0.4
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.19.0.4
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.19.0.2
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.17.0.6
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.17.0.4
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.13.0.8
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.6
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.13.0.4
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.2
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.8.0.6
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.8.0.4
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.8.0.2
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	jakob_20041210:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.21
date	2015.07.15.17.38.05;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	zJNe4hMhfSBB3w0D;

1.20
date	2014.08.19.13.54.56;	author giovanni;	state Exp;
branches;
next	1.19;
commitid	AYbj76hybRlav67V;

1.19
date	2013.11.12.22.24.57;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.23.53;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2011.05.06.08.40.06;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.19.07.23.09;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.18.19.59.20;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2008.11.06.14.50.54;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2008.08.22.21.57.49;	author jakob;	state Exp;
branches;
next	1.11;

1.11
date	2008.05.21.10.52.40;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2008.03.31.21.26.15;	author jakob;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.16.00.17.06;	author merdely;	state Exp;
branches;
next	1.8;

1.8
date	2006.07.31.08.16.28;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2006.06.18.08.28.56;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2005.12.04.20.10.02;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2005.10.03.08.02.13;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2005.03.10.07.51.17;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2005.01.24.20.00.30;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.24.19.59.54;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.10.09.37.31;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.10.09.37.31;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.21
log
@Better pexp.
@
text
@# $OpenBSD: Makefile,v 1.20 2014/08/19 13:54:56 giovanni Exp $

COMMENT=	postfix greylist daemon

DISTNAME=	postgrey-1.35
CATEGORIES=	mail
REVISION=	0

HOMEPAGE=	http://postgrey.schweikert.ch/

MASTER_SITES=	${HOMEPAGE}/pub/ \
		${HOMEPAGE}/pub/old/

MAINTAINER=     Jakob Schlyter <jakob@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

NO_BUILD=		Yes
NO_TEST=		Yes

BUILD_DEPENDS=		${RUN_DEPENDS}
RUN_DEPENDS=		devel/p5-Net-Server \
			devel/p5-IO-Multiplex \
			databases/p5-BerkeleyDB \
			net/p5-Net-DNS

do-install:
	perl -pi -e 's,/etc/postfix,${SYSCONFDIR}/postfix,g' ${WRKSRC}/postgrey
	${INSTALL_SCRIPT} ${WRKSRC}/postgrey ${PREFIX}/libexec
	${INSTALL_SCRIPT} ${WRKSRC}/contrib/postgreyreport ${PREFIX}/sbin
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/postgrey/
	${INSTALL_DATA} ${WRKSRC}/postgrey_whitelist_clients ${PREFIX}/share/examples/postgrey
	${INSTALL_DATA} ${WRKSRC}/postgrey_whitelist_recipients ${PREFIX}/share/examples/postgrey
	pod2man ${WRKSRC}/postgrey ${PREFIX}/man/man1/postgrey.1

.include <bsd.port.mk>
@


1.20
log
@
bugfix update to 1.35
maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/11/12 22:24:57 sthen Exp $
d7 1
@


1.19
log
@preemptively fix postgrey for taint changes in newer perl (since I just
happened to run across the diff when looking for something else).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:23:53 espie Exp $
d5 1
a5 2
DISTNAME=	postgrey-1.34
REVISION=	1
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/12/17 22:01:13 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.17
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/05/06 08:40:06 sthen Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d20 1
a20 1
NO_REGRESS=		Yes
@


1.16
log
@- update postgrey to 1.34
- add an rc script (reload works).

ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/19 07:23:09 espie Exp $
d6 1
@


1.15
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/18 19:59:20 espie Exp $
d5 1
a5 2
DISTNAME=	postgrey-1.32
REVISION =	0
d15 1
a15 1
# GPL
a20 1
USE_GROFF =		Yes
d31 1
@


1.14
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2008/11/06 14:50:54 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d22 1
a22 1
USE_GROFF =	Yes
d27 4
a30 4
RUN_DEPENDS=		::devel/p5-Net-Server \
			::devel/p5-IO-Multiplex \
			::databases/p5-BerkeleyDB \
			::net/p5-Net-DNS
@


1.13
log
@install the default whitelist configuration files.
ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/08/22 21:57:49 jakob Exp $
d22 1
@


1.12
log
@upgrade postgrey to v1.32; from David Hill
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/05/21 10:52:40 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
@


1.11
log
@- update HOMEPAGE and bump; the old one no longer has the distfile.
- remove unnecessary VERSION variable while there.

ok jakob
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/03/31 21:26:15 jakob Exp $
d5 2
a6 2
DISTNAME=	postgrey-1.31
PKGNAME=	${DISTNAME}p0
@


1.10
log
@upadate to postgrey v1.31; based on patch from Giovanni Bechis
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/16 00:17:06 merdely Exp $
d5 2
a6 3
VERSION=	1.31
DISTNAME=	postgrey-${VERSION}
PKGNAME=	postgrey-${VERSION}
d9 1
a9 1
HOMEPAGE=	http://isg.ee.ethz.ch/tools/postgrey/
@


1.9
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/07/31 08:16:28 jakob Exp $
d5 1
a5 1
VERSION=	1.27
d7 1
d10 1
a10 2
MASTER_SITES=	http://isg.ee.ethz.ch/tools/postgrey/pub/ \
		http://isg.ee.ethz.ch/tools/postgrey/pub/old/
d12 2
a13 1
HOMEPAGE=	http://isg.ee.ethz.ch/tools/postgrey/
d29 2
a30 1
			::databases/p5-BerkeleyDB
d34 4
@


1.8
log
@postgrey v1.27
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/06/18 08:28:56 jakob Exp $
d3 1
a3 1
COMMENT=	"postfix greylist daemon"
@


1.7
log
@update to postgrey version 1.24
- install manpage
- use _postgrey user be default
- move database directory to /var/db/postgrey
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/12/04 20:10:02 jakob Exp $
d5 1
a5 1
VERSION=	1.24
@


1.6
log
@update to v1.23
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/10/03 08:02:13 alek Exp $
d5 1
a5 1
VERSION=	1.23
d32 1
@


1.5
log
@NO_REGRESS

ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/03/10 07:51:17 jakob Exp $
d5 1
a5 1
VERSION=	1.18
@


1.4
log
@postgrey 1.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/01/24 20:00:30 jakob Exp $
d23 1
@


1.3
log
@postgrey v1.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/01/24 19:59:54 jakob Exp $
d5 1
a5 1
VERSION=	1.17
@


1.2
log
@look for dist in old/ as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/12/10 09:37:31 jakob Exp $
d5 1
a5 1
VERSION=	1.16
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2004/05/10 06:14:43 jakob Exp $
d9 2
a10 1
MASTER_SITES=	http://isg.ee.ethz.ch/tools/postgrey/pub/
@


1.1.1.1
log
@postfix greylist module
@
text
@@
