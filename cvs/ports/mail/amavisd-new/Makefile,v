head	1.44;
access;
symbols
	OPENBSD_6_1:1.44.0.2
	OPENBSD_6_1_BASE:1.44
	OPENBSD_6_0:1.43.0.2
	OPENBSD_6_0_BASE:1.43
	OPENBSD_5_9:1.40.0.2
	OPENBSD_5_9_BASE:1.40
	OPENBSD_5_8:1.40.0.4
	OPENBSD_5_8_BASE:1.40
	OPENBSD_5_7:1.39.0.2
	OPENBSD_5_7_BASE:1.39
	OPENBSD_5_6:1.36.0.2
	OPENBSD_5_6_BASE:1.36
	OPENBSD_5_5:1.33.0.2
	OPENBSD_5_5_BASE:1.33
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.29.0.2
	OPENBSD_5_3_BASE:1.29
	OPENBSD_5_2:1.28.0.2
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.23.0.2
	OPENBSD_5_0_BASE:1.23
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.6.0.4
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.2
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.3.0.4
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.4
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.2
	OPENBSD_3_6_BASE:1.1.1.1
	robert_20040423:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.44
date	2016.08.05.12.53.57;	author giovanni;	state Exp;
branches;
next	1.43;
commitid	NdHvjU8MfB105ZBk;

1.43
date	2016.07.01.13.19.29;	author giovanni;	state Exp;
branches
	1.43.2.1;
next	1.42;
commitid	5eRqXtBV7dars66j;

1.42
date	2016.05.12.15.16.00;	author giovanni;	state Exp;
branches;
next	1.41;
commitid	nnllFaMZirKZgEcH;

1.41
date	2016.03.02.14.30.50;	author sthen;	state Exp;
branches;
next	1.40;
commitid	1FLbCzDILbGcFUKi;

1.40
date	2015.07.15.19.26.44;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	IJgbXe6gBDrUwcve;

1.39
date	2014.12.17.00.15.24;	author bluhm;	state Exp;
branches;
next	1.38;
commitid	Du77f61rOxBKIaTp;

1.38
date	2014.12.09.15.21.13;	author sthen;	state Exp;
branches;
next	1.37;
commitid	sVsd8C0Vx3Xfz7F7;

1.37
date	2014.11.19.19.00.50;	author giovanni;	state Exp;
branches;
next	1.36;
commitid	RVdNOvUJ5hFPMc44;

1.36
date	2014.07.14.08.56.30;	author giovanni;	state Exp;
branches;
next	1.35;
commitid	NPc4au2eXmPpBxZm;

1.35
date	2014.07.14.08.53.25;	author giovanni;	state Exp;
branches;
next	1.34;
commitid	gUYYuNB6eJcioMNI;

1.34
date	2014.06.19.22.17.32;	author sthen;	state Exp;
branches;
next	1.33;
commitid	AwAJBMQ57fttUbVS;

1.33
date	2013.12.05.10.21.49;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2013.07.02.09.35.57;	author giovanni;	state Exp;
branches;
next	1.31;

1.31
date	2013.04.12.14.35.57;	author giovanni;	state Exp;
branches;
next	1.30;

1.30
date	2013.03.11.11.23.50;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2012.11.28.15.43.02;	author giovanni;	state Exp;
branches;
next	1.28;

1.28
date	2012.07.07.19.09.36;	author giovanni;	state Exp;
branches;
next	1.27;

1.27
date	2012.05.03.15.27.44;	author giovanni;	state Exp;
branches;
next	1.26;

1.26
date	2012.03.14.09.17.09;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2012.01.26.08.03.57;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2011.09.14.01.59.25;	author william;	state Exp;
branches;
next	1.23;

1.23
date	2011.07.20.14.46.20;	author giovanni;	state Exp;
branches;
next	1.22;

1.22
date	2011.05.24.16.04.16;	author giovanni;	state Exp;
branches;
next	1.21;

1.21
date	2011.05.11.12.57.47;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2011.04.13.12.51.00;	author giovanni;	state Exp;
branches;
next	1.19;

1.19
date	2011.03.17.16.49.27;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.23.18.15.18;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.23.18.11.45;	author giovanni;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.19.07.23.05;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.06.07.09.58.00;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.11.16.10.37.31;	author giovanni;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.13.13.29.18;	author giovanni;	state Exp;
branches;
next	1.10;

1.10
date	2009.04.28.09.01.56;	author giovanni;	state Exp;
branches;
next	1.9;

1.9
date	2009.01.27.17.59.05;	author giovanni;	state Exp;
branches;
next	1.8;

1.8
date	2008.09.29.18.53.38;	author simon;	state Exp;
branches;
next	1.7;

1.7
date	2008.09.23.21.39.21;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2008.01.04.02.53.52;	author okan;	state Exp;
branches;
next	1.5;

1.5
date	2007.11.27.13.53.19;	author okan;	state Exp;
branches;
next	1.4;

1.4
date	2007.09.16.00.17.04;	author merdely;	state Exp;
branches;
next	1.3;

1.3
date	2006.10.31.20.41.40;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.07.21.25.55;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2004.04.23.15.24.54;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.04.23.15.24.54;	author robert;	state Exp;
branches;
next	;

1.18.2.1
date	2011.04.28.03.45.20;	author william;	state Exp;
branches;
next	1.18.2.2;

1.18.2.2
date	2011.06.14.03.19.52;	author william;	state Exp;
branches;
next	;

1.43.2.1
date	2016.08.24.09.08.42;	author giovanni;	state Exp;
branches;
next	;
commitid	bTQ4RF2efmOpyD01;


desc
@@


1.44
log
@More DKIM fixes
@
text
@# $OpenBSD: Makefile,v 1.43 2016/07/01 13:19:29 giovanni Exp $

COMMENT-main=		interface between mailer MTA and content checkers
COMMENT-utils=		utilities to monitor amavisd-new server

V=			2.11.0
DISTNAME=		amavisd-new-${V}
REVISION=		1
PKGNAME-main=		${DISTNAME}
PKGNAME-utils=		amavisd-new-utils-${V}
CATEGORIES=		mail security

HOMEPAGE=		http://www.amavis.org/
MAINTAINER=		Giovanni Bechis <giovanni@@openbsd.org>

# BSD / GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${HOMEPAGE} \
			http://mirrors.catpipe.net/amavisd-new/ \
			http://mirror.mainloop.se/amavisd/ \
			http://mirror.cedratnet.com/amavisd-new/ \
			http://mirror.omroep.nl/amavisd-new/

EXTRACT_SUFX=		.tar.xz

RUN_DEPENDS=		archivers/arc \
			archivers/bzip2 \
			archivers/cabextract \
			archivers/lzop \
			archivers/p5-Archive-Zip>=1.14 \
			archivers/p7zip,-rar \
			archivers/ripole \
			archivers/unzip \
			archivers/zoo \
			rpm2cpio-*|rpm-*:converters/rpm2cpio \
			databases/p5-BerkeleyDB \
			devel/p5-Net-Server \
			devel/p5-IO-Multiplex \
			mail/p5-Mail-SpamAssassin \
			mail/p5-Mail-DKIM>=0.31 \
			mail/p5-MIME-tools \
			net/net-snmp \
			net/p5-IO-Socket-INET6 \
			net/p5-Net-LibIDN \
			security/clamav \
			sysutils/p5-Unix-Syslog

RUN_DEPENDS-utils=	devel/p5-ZMQ \
			devel/p5-ZMQ-LibZMQ3 \
			mail/amavisd-new

NO_BUILD=		Yes
NO_TEST=		Yes

PKG_ARCH=		*

MULTI_PACKAGES=		-main -utils

pre-configure:
	${SUBST_CMD} ${WRKSRC}/amavis-mc
	@@perl -pi -e 's,/var/amavis,/${VARBASE}/amavisd,g' ${WRKSRC}/amavisd-*
	@@perl -pi -e "s,= 'vscan',= '_vscan',g" ${WRKSRC}/amavisd-signer \
		${WRKSRC}/amavisd.conf ${WRKSRC}/amavisd.conf-default

do-install:
	cd ${WRKSRC}; ${INSTALL_SCRIPT} amavisd amavis-mc amavis-services \
		${PREFIX}/sbin/
	cd ${WRKSRC}; ${INSTALL_SCRIPT} amavisd-agent amavisd-nanny \
		amavisd-release amavisd-signer amavisd-snmp-subagent \
		amavisd-submit amavisd-status amavisd-snmp-subagent-zmq \
		p0f-analyzer.pl ${PREFIX}/bin/
	${INSTALL_DATA} ${WRKSRC}/JpegTester.pm \
			${PREFIX}/libdata/perl5/site_perl/JpegTester.pm
	${INSTALL_DATA} ${WRKSRC}/TinyRedis.pm \
			${PREFIX}/libdata/perl5/site_perl/TinyRedis.pm
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/amavisd-new
	cd ${WRKSRC}; ${INSTALL_DATA} AAAREADME.first INSTALL LDAP.schema \
		LDAP.ldif LICENSE MANIFEST README_FILES/README.* RELEASE_NOTES \
		${PREFIX}/share/doc/amavisd-new/
	${INSTALL_DATA_DIR} ${PREFIX}/share/snmp/mibs
	${INSTALL_DATA} ${WRKSRC}/AMAVIS-MIB.txt ${PREFIX}/share/snmp/mibs
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/amavisd-new
	cd ${WRKSRC}; ${INSTALL_DATA} amavisd*.conf amavisd.conf-default \
		${PREFIX}/share/examples/amavisd-new/

.include <bsd.port.mk>
@


1.43
log
@Unbreak DKIM signing after 2.11.0 upgrade
problem spotted by sthen@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2016/05/12 15:16:00 giovanni Exp $
d8 1
a8 1
REVISION=		0
@


1.43.2.1
log
@More DKIM fixes
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2016/07/01 13:19:29 giovanni Exp $
d8 1
a8 1
REVISION=		1
@


1.42
log
@Update to 2.11.0
A schema update is needed for MariaDB users
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2016/03/02 14:30:50 sthen Exp $
d8 1
@


1.41
log
@Patch amavisd-new to avoid using libmagic in favour of calling out to
file(1) from base, which is a modern sandboxed implementation. I've pushed
around 300K emails through this so far without problems. ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/07/15 19:26:44 ajacoutot Exp $
d6 1
a6 1
V=			2.10.1
a11 3
REVISION-main=		3
REVISION-utils=		2

d74 2
@


1.40
log
@Fix pexp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/12/17 00:15:24 bluhm Exp $
d12 1
a12 1
REVISION-main=		2
a44 1
			misc/p5-File-LibMagic \
@


1.39
log
@Do not depend on net/p5-IO-Socket-IP.  The module IO::Socket::IP
0.29 is included in Perl 5.20.1 and installed in base.  The port
will be removed soon.
OK giovanni@@ nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/12/09 15:21:13 sthen Exp $
a6 1
REVISION=		1
d11 3
@


1.38
log
@handle merge of net-snmp,-perl into -main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/11/19 19:00:50 giovanni Exp $
d7 1
a7 1
REVISION=		0
a45 1
			net/p5-IO-Socket-IP \
@


1.37
log
@Update to 2.10.1
split the package in -main and -utils
the utils package is needed for monitoring tools and to enable the new
zmq communication interface.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/07/14 08:56:30 giovanni Exp $
d7 1
d44 1
a44 1
			net/net-snmp,-perl \
@


1.36
log
@
License update,
no bump, previous commit was 1 minute ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/07/14 08:53:25 giovanni Exp $
d3 2
a4 1
COMMENT=		interface between mailer MTA and content checkers
d6 4
a9 1
DISTNAME=		amavisd-new-2.9.1
d24 2
d42 1
d46 1
d50 4
d59 2
d62 2
a63 1
	@@perl -pi -e 's,/var/amavis,/var/amavisd,g' ${WRKSRC}/amavisd-*
d68 2
a69 1
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd ${PREFIX}/sbin/amavisd
d72 2
a73 1
		amavisd-submit p0f-analyzer.pl ${PREFIX}/bin/
@


1.35
log
@
Update to amavisd-new 2.9.1
ok sthen@@

Bugs fixed:
- updated decoding of RAR archives to recognize a changed format in rar 5.x
- perl 5.20 compatibility fixes

New features:
- structured log/reporting to a Redis server in JSON format;
- IP address reputation (uses a Redis server);
- log format has slightly changed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/06/19 22:17:32 sthen Exp $
d11 1
a11 1
# GPLv2
@


1.34
log
@Add .gadget files to the commented-out "bad extension" lines in amavisd's
sample config, they can contain active content (including trojans) used by
windows sidebar. OK giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/12/05 10:21:49 sthen Exp $
d5 1
a5 2
DISTNAME=		amavisd-new-2.8.1
REVISION=		1
a28 1
			converters/p5-Convert-TNEF \
a29 1
			converters/p5-Convert-UUlib>=1.05 \
d37 1
@


1.33
log
@install the sample amavisd-custom.conf file, and re-arrange the do-install
Makefile target so that it's shorter/easier to read. ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/07/02 09:35:57 giovanni Exp $
d6 1
a6 1
REVISION=		0
@


1.32
log
@
bugfix update to 2.8.1
full ipv6 support and compatibility with Spamassassin 3.4.0 has been added
starting with this version Redis could be used as temporary storage for penpals
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/04/12 14:35:57 giovanni Exp $
d6 1
d56 3
a58 14
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd-agent \
			${PREFIX}/bin/amavisd-agent
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd-nanny \
			${PREFIX}/bin/amavisd-nanny
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd-release \
			${PREFIX}/bin/amavisd-release
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd-signer \
			${PREFIX}/bin/amavisd-signer
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd-snmp-subagent \
			${PREFIX}/bin/amavisd-snmp-subagent
	${INSTALL_SCRIPT} ${WRKSRC}/amavisd-submit \
			${PREFIX}/bin/amavisd-submit
	${INSTALL_SCRIPT} ${WRKSRC}/p0f-analyzer.pl \
			${PREFIX}/bin/p0f-analyzer.pl
d62 3
a64 2
	${INSTALL_DATA} ${WRKSRC}/AAAREADME.first \
			${PREFIX}/share/doc/amavisd-new
a66 8
	${INSTALL_DATA} ${WRKSRC}/INSTALL ${PREFIX}/share/doc/amavisd-new
	${INSTALL_DATA} ${WRKSRC}/LDAP.schema ${PREFIX}/share/doc/amavisd-new
	${INSTALL_DATA} ${WRKSRC}/LDAP.ldif ${PREFIX}/share/doc/amavisd-new
	${INSTALL_DATA} ${WRKSRC}/LICENSE ${PREFIX}/share/doc/amavisd-new
	${INSTALL_DATA} ${WRKSRC}/MANIFEST ${PREFIX}/share/doc/amavisd-new
	${INSTALL_DATA} ${WRKSRC}/README_FILES/README.* \
			${PREFIX}/share/doc/amavisd-new
	${INSTALL_DATA} ${WRKSRC}/RELEASE_NOTES ${PREFIX}/share/doc/amavisd-new
d68 2
a69 4
	${INSTALL_DATA} ${WRKSRC}/amavisd.conf \
			${PREFIX}/share/examples/amavisd-new/amavisd.conf
	${INSTALL_DATA} ${WRKSRC}/amavisd.conf-default \
			${PREFIX}/share/examples/amavisd-new/amavisd.conf-default
@


1.31
log
@
Add a dependency on net/p5-IO-Socket-IP, this module is preferred over IO::Socket::Inet
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/03/11 11:23:50 espie Exp $
d5 1
a5 2
DISTNAME=		amavisd-new-2.8.0
REVISION=		1
@


1.30
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/11/28 15:43:02 giovanni Exp $
d6 1
a6 1
REVISION=		0
d40 1
@


1.29
log
@
Add a run-dependency needed by amavisd-signer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/07/07 19:09:36 giovanni Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d44 1
a44 1
NO_REGRESS=		Yes
@


1.28
log
@
Update to 2.8.0
new monitoring utilities are not enabled yet.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/05/03 15:27:44 giovanni Exp $
d6 1
d38 1
@


1.27
log
@
Bugfix update to 2.7.1 and drop archivers/lha dependency
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/03/14 09:17:09 sthen Exp $
d5 1
a5 1
DISTNAME=		amavisd-new-2.7.1
@


1.26
log
@tweaks to amavisd-new sample file installation, ok giovanni@@

- install snmp mibs into /usr/local/share/snmb/mibs so net-snmp can find them
- install ldap schema to /etc/openldap/schemas (it doesn't matter if you aren't
running openldap on the same machine, this won't conflict, but it's convenient
if you do have it)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/01/26 08:03:57 ajacoutot Exp $
d5 1
a5 2
DISTNAME=		amavisd-new-2.7.0
REVISION=		2
a25 1
			archivers/lha \
@


1.25
log
@Put these users in the daemon class to be consistent with all the other
ones in ports.

discussed with and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/09/14 01:59:25 william Exp $
d6 1
a6 1
REVISION=		1
d77 2
a78 1
	${INSTALL_DATA} ${WRKSRC}/AMAVIS-MIB.txt ${PREFIX}/share/doc/amavisd-new
@


1.24
log
@help the script match running processes

ok ajacoutot giovanni (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/07/20 14:46:20 giovanni Exp $
d6 1
a6 1
REVISION=		0
@


1.23
log
@
Update to 2.7.0
Database schema has changed, you should read carefully release notes
and README.sql if you use MySQL or Postgres for storage or lookups.
Release notes available at http://www.amavis.org/release-notes.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/05/24 16:04:16 giovanni Exp $
d6 1
@


1.22
log
@
Bugfix update to 2.6.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/05/11 12:57:47 jasper Exp $
d5 1
a5 1
DISTNAME=		amavisd-new-2.6.6
d8 1
a8 1
HOMEPAGE=		http://www.ijs.si/software/amavisd/
d50 5
d63 2
d67 2
a89 2
	${INSTALL_DATA} ${WRKSRC}/amavisd.conf-sample \
			${PREFIX}/share/examples/amavisd-new/amavisd.conf-sample
@


1.21
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/04/13 12:51:00 giovanni Exp $
d5 1
a5 2
DISTNAME=		amavisd-new-2.6.5
REVISION=		0
@


1.20
log
@
Bugfix update to 2.6.5
Full changelog available at http://www.ijs.si/software/amavisd/release-notes.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/03/17 16:49:27 ajacoutot Exp $
d6 1
@


1.19
log
@Remove all redirections -- rc.subr(8) now takes care of it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/12/27 14:50:23 ajacoutot Exp $
d5 1
a5 2
DISTNAME=		amavisd-new-2.6.4
REVISION=		6
@


1.18
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/12/24 10:40:05 ajacoutot Exp $
d6 1
a6 1
REVISION=		5
@


1.18.2.1
log
@Bugfix update to amavisd-new-2.6.5

from giovanni@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/12/27 14:50:23 ajacoutot Exp $
d5 2
a6 1
DISTNAME=		amavisd-new-2.6.5
@


1.18.2.2
log
@bugfix update to 2.6.6; from giovanni@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.1 2011/04/28 03:45:20 william Exp $
d5 1
a5 1
DISTNAME=		amavisd-new-2.6.6
@


1.17
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/23 18:15:18 ajacoutot Exp $
d6 1
a6 1
REVISION=		4
@


1.16
log
@Use tab here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/23 18:11:45 giovanni Exp $
d6 1
a6 1
REVISION=		3
@


1.15
log
@
Add an rcscript
help and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/19 07:23:05 espie Exp $
d6 1
a6 1
REVISION=		2
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/06/07 09:58:00 ajacoutot Exp $
d6 1
a6 1
REVISION =		1
@


1.13
log
@We can use either rpm or rpm2cpio.

ok giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/11/16 10:37:31 giovanni Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
d24 21
a44 21
RUN_DEPENDS=		::archivers/arc \
			::archivers/bzip2 \
			::archivers/cabextract \
			::archivers/lha \
			::archivers/lzop \
			:p5-Archive-Zip->=1.14:archivers/p5-Archive-Zip \
			::archivers/p7zip,-rar \
			::archivers/ripole \
			::archivers/unzip \
			::archivers/zoo \
			::converters/p5-Convert-TNEF \
			:rpm2cpio-*|rpm-*:converters/rpm2cpio \
			:p5-Convert-UUlib->=1.05:converters/p5-Convert-UUlib \
			::databases/p5-BerkeleyDB \
			::devel/p5-Net-Server \
			::mail/p5-Mail-SpamAssassin \
			:p5-Mail-DKIM->=0.31:mail/p5-Mail-DKIM \
			::mail/p5-MIME-tools \
			::net/net-snmp,-perl \
			::security/clamav \
			::sysutils/p5-Unix-Syslog
@


1.12
log
@
Remove archivers/{freeze,unarj,unrar} from run-dependencies and use p7zip instead.
Users should tweak their config files before removing the old dependencies.

ok sthen@@, msf@@, aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/10/13 13:29:18 giovanni Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
d35 1
a35 1
			::converters/rpm2cpio \
@


1.11
log
@
Update to 2.6.4 and enable p7zip compression

This version provides a true SNMP agent and a MIB, facilitating monitoring the health
of a content filtering system, its performance and mail characteristics.
Full changelog available at http://www.ijs.si/software/amavisd/release-notes.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/04/28 09:01:56 giovanni Exp $
d6 1
a26 1
			::archivers/freeze \
d30 1
a30 1
			::archivers/p7zip \
a31 2
			::archivers/unarj \
			::archivers/unrar \
@


1.10
log
@
Update to 2.6.3
- security/clamav added as a run dependency
- regen patches
"Looks good ports-wise and builds ok" sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/01/27 17:59:05 giovanni Exp $
d5 1
a5 1
DISTNAME=		amavisd-new-2.6.3
d30 1
d44 1
d61 4
d70 1
@


1.9
log
@
Update to 2.6.2 and regen patches
ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/09/29 18:53:38 simon Exp $
d5 1
a5 1
DISTNAME=		amavisd-new-2.6.2
d43 1
@


1.8
log
@remove RUN_DEPENDS to modules now coming with our perl and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/09/23 21:39:21 kili Exp $
d5 1
a5 2
DISTNAME=		amavisd-new-2.6.1
PKGNAME=		${DISTNAME}p0
d9 1
a9 1
MAINTAINER=		Giovanni Bechis <g.bechis@@snb.it>
d11 1
a11 1
# GPL
d58 2
d65 1
@


1.7
log
@
Update to 2.6.1. From maintainer Giovanni Bechis <g.bechis@@snb.it>.

ok (portwise) simon@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/01/04 02:53:52 okan Exp $
d6 1
a29 1
			::archivers/p5-Archive-Tar \
a30 1
			::archivers/p5-Compress-Zlib \
@


1.6
log
@- maintenance update from MAINTAINER (Giovanni Bechis)
- VERSION/WKRDIST no longer needed

previous diff ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/11/27 13:53:19 okan Exp $
d5 1
a5 1
DISTNAME=		amavisd-new-2.5.3
d17 5
a21 1
MASTER_SITES=		${HOMEPAGE}
d40 1
d43 1
d54 6
@


1.5
log
@update to 2.5.2 from new MAINTAINER (Giovanni Bechis), plus a tweak or two by me

ok sturm@@ simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/09/16 00:17:04 merdely Exp $
d5 1
a5 2
VERSION=		2.5.2
DISTNAME=		amavisd-new-${VERSION}
a39 2

WRKDIST=		${WRKDIR}/amavisd-new-${VERSION}
@


1.4
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/10/31 20:41:40 pvalchev Exp $
d5 1
a5 2
VERSION=		2.3.2
PKGNAME=		${DISTNAME}p0
d10 1
a10 1
MAINTAINER=		Peter Hessler <spambox@@theapt.org>
d22 1
d29 1
d35 1
@


1.3
log
@fix so sa-update's rulesets get parsed and used under amavisd-new
from bsd@@openbsd.rutgers.edu, ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/08/07 21:25:55 sturm Exp $
d3 1
a3 1
COMMENT=		"interface between mailer MTA and content checkers"
@


1.2
log
@update to amavisd-new 2.3.2

from Sigfred Haversen <bsdlist at mumak.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/04/23 15:24:54 robert Exp $
d6 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 4
V=20030616
VPATCH=p9
DISTNAME=		amavisd-new-${V}-${VPATCH}
PKGNAME=		amavisd-new-${V}pl9
d26 1
a26 1
			::archivers/p5-Archive-Zip \
d33 1
a33 1
			::converters/p5-Convert-UUlib \
d39 1
a39 1
WRKDIST=		${WRKDIR}/amavisd-new-${V}
d42 3
d58 1
d60 5
a64 1
			${PREFIX}/share/doc/amavisd-new/amavisd.conf
@


1.1.1.1
log
@Import amavisd-new 20030616pl9; submitted by Peter Hessler <spambox@@theapt.org>.

amavisd-new is a high-performance interface between mailer (MTA) and
content checkers like SpamAssassin or virus scanners.
ok naddy@@
@
text
@@
