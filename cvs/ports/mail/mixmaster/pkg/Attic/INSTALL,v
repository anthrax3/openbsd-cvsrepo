head	1.6;
access;
symbols
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.1.1.0.4
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.2
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	lebel_2001-Jul-04:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2003.10.06.14.32.35;	author sturm;	state dead;
branches;
next	1.5;

1.5
date	2003.06.22.10.05.29;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2003.04.14.15.02.09;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2002.10.30.15.07.54;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.09.14.15.21.14;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.04.15.22.34;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.07.04.15.22.34;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.6
log
@forgot to remove these, sigh. reminded by peter palfrader
@
text
@#!/bin/sh

# $OpenBSD: INSTALL,v 1.5 2003/06/22 10:05:29 sturm Exp $
#
#      Mixmaster installation script, using many ideas from
#      Adam Shostack's Install-Mix.

# use a sane path and install prefix
PATH=/bin:/usr/bin:/sbin:/usr/sbin
PREFIX=${PKG_PREFIX:-/usr/local}
MIXMASTER_BIN=${PREFIX}/sbin/mixmaster
MIXDIR=${PREFIX}/share/examples/mixmaster
MIXDEST=${SYSCONFDIR}/mixmaster
MIXSPOOL=/var/spool/mixmaster

MM=_mixmaster
ID=505

# verify proper execution
#
if [ $# -ne 2 ]; then
    echo "usage: $0 distname { PRE-INSTALL | POST-INSTALL }" >&2
    exit 1
fi

# Function: set up mixmaster user account.
#
do_accts()
{
    groupinfo -e $MM
    if [ $? -eq 0 ]; then
        echo "===>  Using existing group '$MM'"
    else
        echo "===>  Creating group '$MM'"
        groupadd -g $ID $MM
    fi

    userinfo -e $MM
    if [ $? -eq 0 ]; then
        echo "===>  Using existing account '$MM'"
    else
        echo "===>  Creating user '$MM'"
        useradd \
            -g $MM\
            -c "Anonymous Remailer" \
            -m -d $MIXDEST \
            -s /sbin/nologin \
            -u $ID $MM
    fi
}

last_message() 
{

echo "| Installation of mixmaster client complete."
echo "|"
echo "| The binary is suid '$MM' and can only be executed by members of"
echo "| the group '$MM'. Add all users to that group, that are allowed"
echo "| sending anonymous mail via the mixmaster network."
echo "+---------------"
echo "| WARNING!"
echo "|"
echo "| This port has changed its user/group from 'mixmaster' to '_mixmaster'."
echo "| If you installed this port before, ensure all permissions are set"
echo "| correctly and then \"rmuser mixmaster\"."
echo "+---------------"
echo ""

exit 0
}

# install client config files
do_install()
{
echo ""
echo "+---------------"
if [ ! -d $MIXDEST ]
then
  install -d -o $MM -g $MM -m 0710 $MIXDEST
elif [ -f $MIXDEST/mix.cfg ]
then
  echo "| $MIXDEST/mix.cfg does already exist. It will not be updated"
  echo "| by this script. If this is not your intention, please deinstall"
  echo "| mixmaster, delete $MIXDEST and reinstall."
  echo "|"
  last_message
fi

if [ ! -d $MIXDEST ]
then
  echo "Cannot create $MIXDEST"
  exit 1
fi

cd $MIXDIR
for i in "mix.cfg mlist.txt pubring.mix *.blk"
do
  install -o $MM -g $MM -m 0640 $i $MIXDEST
done

if [ ! -d $MIXSPOOL ]
then
  install -d -o $MM -g $MM -m 0770 $MIXSPOOL
fi

last_message
}

# Verify/process the command
#
case $2 in
    PRE-INSTALL)
        do_accts
        exit 0
        ;;
    POST-INSTALL)
        : install config files, see below
        chown $MM:$MM $MIXMASTER_BIN
        chmod 4550 $MIXMASTER_BIN
        do_install
        exit 0
        ;;
    *)
        echo "usage: $0 distname { PRE-INSTALL | POST-INSTALL }" >&2
        exit 1
        ;;
esac
@


1.5
log
@new user/group naming schema

bumped PKGNAME except for xcept
@
text
@d3 1
a3 1
# $OpenBSD: INSTALL,v 1.4 2003/04/14 15:02:09 wilfried Exp $
@


1.4
log
@POSIX chown, ok espie@@
@
text
@d3 1
a3 1
# $OpenBSD: INSTALL,v 1.3 2002/10/30 15:07:54 naddy Exp $
d16 3
d30 1
a30 1
    groupinfo -e mixmaster
d32 1
a32 1
        echo "===>  Using existing group 'mixmaster'"
d34 2
a35 2
        echo "===>  Creating group 'mixmaster'"
        groupadd mixmaster
d38 1
a38 1
    userinfo -e mixmaster
d40 1
a40 1
        echo "===>  Using existing account 'mixmaster'"
d42 1
a42 1
        echo "===>  Creating user 'mixmaster'"
d44 1
a44 1
            -g mixmaster \
d48 1
a48 2
            -p \* \
            mixmaster
d57 2
a58 2
echo "| The binary is suid 'mixmaster' and can only be executed by members of"
echo "| the group 'mixmaster'. Add all users to that group, that are allowed"
d61 6
d79 1
a79 1
  install -d -o mixmaster -g mixmaster -m 0710 $MIXDEST
d82 3
a84 3
  echo "| $MIXDEST/mix.cfg does already exist. It will not be updated by this"
  echo "| script. If this is not your intention, please deinstall mixmaster,"
  echo "| delete $MIXDEST and reinstall."
d98 1
a98 1
  install -o mixmaster -g mixmaster -m 0640 $i $MIXDEST
d103 1
a103 1
  install -d -o mixmaster -g mixmaster -m 0770 $MIXSPOOL
d118 1
a118 1
        chown mixmaster:mixmaster $MIXMASTER_BIN
@


1.3
log
@Update to 2.9b40: mainly minor bugfixes.
From: Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
@
text
@d3 1
a3 1
# $OpenBSD: INSTALL,v 1.2 2002/09/14 15:21:14 naddy Exp $
d110 1
a110 1
        chown mixmaster.mixmaster $MIXMASTER_BIN
@


1.2
log
@Update to 2.9b37.
From: Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
@
text
@d3 1
a3 1
# $OpenBSD: INSTALL,v 1.1.1.1 2001/07/04 15:22:34 lebel Exp $
d88 1
a88 1
for i in "mix.cfg mlist.txt pubring.mix type2.list *.blk"
a96 2
ln -s $MIXSPOOL $MIXDEST/pool
chmod 0770 $MIXDEST/pool
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
# $OpenBSD$
d13 2
a14 1
MIXDEST=${SYSCONFDIR}
d43 1
a43 1
            -d $MIXDEST \
a52 1
echo "|"
a54 12
echo "| Consider updating the files"
echo "|"
echo "|   $MIXDEST/mix.list"
echo "|   $MIXDEST/type2.list"
echo "|   $MIXDEST/pubring.mix"
echo "|"
echo "| periodically with a script like"
echo "|"
echo "|   $MIXDIR/getlist"
echo "|"
echo "| or you might loose mail by using remailers, that are out of order now."
echo "|"
d67 2
d72 3
a74 6
  echo ""
  echo "+---------------"
else
  echo ""
  echo "+---------------"
  echo "| $MIXDEST does already exist. It will not be updated by this"
d77 1
d88 1
a88 1
for i in "mixmaster.conf type2.list pubring.mix mix.list urls"
d92 7
@


1.1.1.1
log
@initial import of mixmaster-2.0.4b45:
--
This software comes in a client only configuration! If you want
to setup a mixmaster server, read through the example files,
man page and keep in mind, that the server stores all it's files
in $MIXPATH (/etc/mixmaster by default).

The purpose of anonymous remailers (hereafter simply remailers) is
to provide protection against traffic analysis. Traffic analysis
is the study of who you are communicating with, when, and how often.
This reveals more than you might expect about your activities. It
will indicate who your friends and colleagues are (and they can be
told apart by looking at the times you contact them). What your
interests are, from which catalog companies you contact, and which
ftp and WWW sites you visit. Traffic analysis can even reveal
business secrets, e.g. your frequent contact with a rival could
give hints of an impending merger.

Remailers protect your e-mail from traffic analysis. The original
remailers did this by removing all headers, except the subject line,
from any message you sent to them and then forwarding them a
destination of your choice. The recipient of such a message would
not know who had sent it.

The addition of encryption to this scheme gave significant protection
from attackers who simply look a the primary improvement with the
type 2 remailer Mixmaster.

WWW: http://mixmaster.shinn.net

Submitted by Nikolay Sturm <nikolay.sturm@@desy.de>

@
text
@@
