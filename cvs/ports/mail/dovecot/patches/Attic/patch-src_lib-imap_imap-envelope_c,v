head	1.2;
access;
symbols
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.05.10.00.06.47;	author brad;	state dead;
branches;
next	1.1;

1.1
date	2003.09.23.06.34.32;	author jolan;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2004.05.28.20.46.46;	author brad;	state dead;
branches;
next	;


desc
@@


1.2
log
@upgrade to Dovecot 0.99.10.4
--
ok MAINTAINER
@
text
@$OpenBSD: patch-src_lib-imap_imap-envelope_c,v 1.1 2003/09/23 06:34:32 jolan Exp $
--- src/lib-imap/imap-envelope.c.orig	2003-06-24 18:12:56.000000000 -0500
+++ src/lib-imap/imap-envelope.c	2003-09-23 00:45:51.000000000 -0500
@@@@ -173,6 +173,14 @@@@ static void imap_write_address(string_t 
 void imap_envelope_write_part_data(struct message_part_envelope_data *data,
 				   string_t *str)
 {
+	static const char *empty_envelope =
+		"NIL NIL NIL NIL NIL NIL NIL NIL NIL NIL";
+
+	if (data == NULL) {
+		str_append(str, empty_envelope);
+		return;
+	}
+
 	str_append(str, NVL(data->date, "NIL"));
 	str_append_c(str, ' ');
 	str_append(str, NVL(data->subject, "NIL"));
@


1.1
log
@fix three crashing bugs, bump PKGNAME

- searching address fields can crash sometimes
- auth process crashes if user doesn't have home directory set
- sme BODY and BODYSTRUCTURE replies missed data for message/rfc822 MIME
  parts causing clients to break
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@MFC:
upgrade to Dovecot 0.99.10.5

Dovecot 0.99.10.{4,5} fix some possible mail box corruption issues.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_lib-imap_imap-envelope_c,v 1.1 2003/09/23 06:34:32 jolan Exp $
@


