head	1.24;
access;
symbols
	OPENBSD_4_9:1.22.0.4
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.22.0.2
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.21.0.2
	OPENBSD_4_7_BASE:1.21
	OPENBSD_4_6:1.18.0.2
	OPENBSD_4_6_BASE:1.18
	OPENBSD_4_5:1.16.0.2
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.5.0.4
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.1.0.4
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.2
	OPENBSD_3_4_BASE:1.1;
locks; strict;
comment	@# @;


1.24
date	2011.06.18.22.41.27;	author sthen;	state dead;
branches;
next	1.23;

1.23
date	2011.05.23.22.54.38;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2010.03.23.21.32.07;	author pea;	state Exp;
branches;
next	1.21;

1.21
date	2009.10.30.11.43.48;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2009.09.15.22.56.16;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2009.09.01.17.28.50;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2009.03.18.23.23.20;	author sthen;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2009.03.17.09.09.10;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2009.01.26.14.47.02;	author sthen;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2009.01.08.12.07.03;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2008.10.08.23.03.55;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2008.09.04.08.35.43;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2008.08.20.02.07.04;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2008.04.28.09.51.10;	author bernd;	state Exp;
branches;
next	1.10;

1.10
date	2007.01.15.08.12.40;	author jakob;	state dead;
branches;
next	1.9;

1.9
date	2006.01.16.21.32.59;	author brad;	state Exp;
branches
	1.9.2.1
	1.9.4.1;
next	1.8;

1.8
date	2005.11.11.14.53.27;	author bernd;	state Exp;
branches;
next	1.7;

1.7
date	2005.10.20.18.28.48;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2005.09.04.18.22.30;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2005.02.13.18.37.32;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2004.06.22.21.05.20;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2004.05.27.16.38.30;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2004.05.10.00.06.47;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.23.06.03.01;	author jolan;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2004.05.28.21.23.21;	author brad;	state Exp;
branches;
next	;

1.1.4.1
date	2004.05.28.20.46.46;	author brad;	state Exp;
branches;
next	;

1.9.2.1
date	2007.05.01.11.22.12;	author sturm;	state dead;
branches;
next	;

1.9.4.1
date	2007.05.01.11.49.49;	author sturm;	state dead;
branches;
next	;

1.16.2.1
date	2009.09.23.03.37.03;	author william;	state Exp;
branches;
next	;

1.18.2.1
date	2009.10.31.03.16.57;	author william;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Add a krb5-config script to avoid patching the autoconf input files. From Brad.
@
text
@$OpenBSD: patch-configure_in,v 1.23 2011/05/23 22:54:38 sthen Exp $
--- configure.in.orig	Sun Mar  6 23:34:52 2011
+++ configure.in	Tue Mar  8 13:54:49 2011
@@@@ -1873,112 +1873,16 @@@@ fi
 
 have_gssapi=no
 if test $want_gssapi != no; then
-	AC_CHECK_PROG(KRB5CONFIG, krb5-config, krb5-config, NO)
-	if test $KRB5CONFIG != NO; then
-		if ! $KRB5CONFIG --version gssapi 2>/dev/null > /dev/null; then
-		  # krb5-config doesn't support gssapi.
-		  KRB5_LIBS="`$KRB5CONFIG --libs`"
-		  KRB5_CFLAGS=`$KRB5CONFIG --cflags`
-		  AC_CHECK_LIB(gss, gss_acquire_cred, [
-		    # Solaris
-		    KRB5_LIBS="$KRB5_LIBS -lgss"
-		  ], [
-		    # failed
-		    KRB5_LIBS=
-		  ], $KRB5_LIBS)
-		else
-		  KRB5_LIBS=`$KRB5CONFIG --libs gssapi`
-		  KRB5_CFLAGS=`$KRB5CONFIG --cflags gssapi`
-		fi
-		if test "$KRB5_LIBS" != ""; then
-			AC_SUBST(KRB5_LIBS)
-			AC_SUBST(KRB5_CFLAGS)
-			
-			# Although krb5-config exists, all systems still don't
-			# have gssapi.h
-			old_CFLAGS=$CFLAGS
-			CFLAGS="$CFLAGS $KRB5_CFLAGS"
-			AC_CHECK_HEADER([gssapi/gssapi.h], [
-				AC_DEFINE(HAVE_GSSAPI_GSSAPI_H,, GSSAPI headers in gssapi/gssapi.h)
-				have_gssapi=yes
-			])
-			AC_CHECK_HEADER([gssapi.h], [
-				AC_DEFINE(HAVE_GSSAPI_H,, GSSAPI headers in gssapi.h)
-				have_gssapi=yes
-			])
-			if test $have_gssapi != no; then
-				if test $want_gssapi = plugin; then
-					have_gssapi=plugin
-				fi
-				AC_DEFINE(HAVE_GSSAPI,, Build with GSSAPI support)
-				AC_CHECK_HEADERS(gssapi/gssapi_ext.h gssapi_krb5.h gssapi/gssapi_krb5.h)
-				AC_CHECK_LIB(gss, __gss_userok, [
-					AC_DEFINE(HAVE___GSS_USEROK,,
-						Define if you have __gss_userok())
-					KRB5_LIBS="$KRB5_LIBS -lgss"
-				],, $KRB5_LIBS)
-
-				# MIT has a #define for Heimdal acceptor_identity, but it's way too
-				# difficult to test for it..
-				old_LIBS=$LIBS
-				LIBS="$LIBS $KRB5_LIBS"
-				AC_CHECK_FUNCS(gsskrb5_register_acceptor_identity krb5_gss_register_acceptor_identity)
-
-				# does the kerberos library support SPNEGO?
-				AC_CACHE_CHECK([whether GSSAPI supports SPNEGO],i_cv_gssapi_spnego,[
-				  AC_TRY_RUN([
-				    #ifdef HAVE_GSSAPI_H
-				    #  include <gssapi.h>
-				    #else
-				    #  include <gssapi/gssapi.h>
-				    #endif
-				    #include <krb5.h>
-				    #include <string.h>
-				    int main(void) {
-				      OM_uint32 minor_status;
-				      gss_OID_set mech_set;
-				      unsigned char spnego_oid[] = { 0x2b, 0x06, 0x01, 0x05, 0x05, 0x02 };
-				      unsigned int i;
-    
-				      gss_indicate_mechs(&minor_status, &mech_set);
-				      for (i = 0; i < mech_set->count; i++) {
-					if (mech_set->elements[i].length == 6 &&
-					    memcmp(mech_set->elements[i].elements,
-						   spnego_oid, 6) == 0)
-					      return 0;
-				      }
-				      return 1;
-				    }
-				  ], [
-				    i_cv_gssapi_spnego=yes
-				  ], [
-				    i_cv_gssapi_spnego=no
-				  ])
-				])
-				if test "$i_cv_gssapi_spnego" = "yes"; then
-				  AC_DEFINE(HAVE_GSSAPI_SPNEGO,, GSSAPI supports SPNEGO)
-				fi
-				LIBS=$old_LIBS
-
-				if test $want_gssapi != plugin; then
-				  AUTH_LIBS="$AUTH_LIBS $KRB5_LIBS"
-				  AUTH_CFLAGS="$AUTH_CFLAGS $KRB5_CFLAGS"
-				  AC_DEFINE(BUILTIN_GSSAPI,, GSSAPI support is built in)
-				else
-				  have_gssapi_plugin=yes
-				fi
-			else
-			  if test $want_gssapi != auto; then
-			    AC_ERROR([Can't build with GSSAPI support: gssapi.h not found])
-			  fi
-			fi
-			CFLAGS=$old_CFLAGS
-		fi
-	else
-	  if test $want_gssapi != auto; then
-	    AC_ERROR([Can't build with GSSAPI support: krb5-config not found])
-	  fi
-	fi
+	# no krb5-config on OpenBSD, bring in the necessary libs and includes
+	# manually
+	AC_CHECK_HEADER([kerberosV/gssapi.h], [
+		AC_DEFINE(HAVE_GSSAPI,, Build with GSSAPI support)
+		AC_DEFINE(HAVE_GSSAPI_H,, Build with GSSAPI support)
+		AC_DEFINE(HAVE_GSSKRB5_REGISTER_ACCEPTOR_IDENTITY,, Have the gsskrb5_register_acceptor_identity function)
+		AC_DEFINE(BUILTIN_GSSAPI,, GSSAPI support is built in)
+		have_gssapi=yes
+	])
+	AUTH_LIBS="$LIBS -lkrb5 -lgssapi -lcrypto"
 fi
 AM_CONDITIONAL(GSSAPI_PLUGIN, test "$have_gssapi_plugin" = "yes")
 
@


1.23
log
@Update dovecot to 2.0.13, joint work between pea@@, Brad and myself, ok pea@@

This is a major update and configuration changes are required -
see http://wiki2.dovecot.org/Upgrading/2.0 for more
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.22 2010/03/23 21:32:07 pea Exp $
@


1.22
log
@MAJOR update to Dovecot 1.2.11
The old cmusieve is removed in favor of the new sieve implementation.
Be very careful when upgrading.
Small howto here: http://openbsd.raveland.org/ports/dovecot/UPGRADE_HOWTO

With tweaks from brad (maintainer) and sthen@@: thanks
Lot of tests from Robert (robert at openbsd.pap.st), thanks !


ok brad (maintainer), sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.21 2009/10/30 11:43:48 sthen Exp $
--- configure.in.orig	Tue Nov 10 03:33:36 2009
+++ configure.in	Wed Nov 18 10:05:38 2009
@@@@ -1759,112 +1759,16 @@@@ fi
d8 3
a10 3
-	AC_CHECK_PROG(KRB5CONFIG, krb5-config, YES, NO)
-	if test $KRB5CONFIG = YES; then
-		if ! krb5-config --version gssapi 2>/dev/null > /dev/null; then
d12 2
a13 2
-		  KRB5_LIBS="`krb5-config --libs`"
-		  KRB5_CFLAGS=`krb5-config --cflags`
d22 2
a23 2
-		  KRB5_LIBS=`krb5-config --libs gssapi`
-		  KRB5_CFLAGS=`krb5-config --cflags gssapi`
@


1.21
log
@Add some patches from upstream. From Brad.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.20 2009/09/15 22:56:16 sthen Exp $
--- configure.in.orig	Sun Sep 13 22:12:28 2009
+++ configure.in	Thu Oct 29 23:10:27 2009
@@@@ -1812,74 +1812,16 @@@@ fi
d41 4
a44 1
-			if test $have_gssapi = yes; then
d58 35
d95 1
a95 1
-				if test x$want_gssapi_plugin != xyes; then
d103 1
a103 1
-			  if test $want_gssapi = yes; then
d110 1
a110 1
-	  if test $want_gssapi = yes; then
@


1.20
log
@- SECURITY update of dovecot-sieve (based on the Cyrus sieve library)
- bugfix update of dovecot

From Brad (maintainer).
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.19 2009/09/01 17:28:50 jasper Exp $
d3 2
a4 2
+++ configure.in	Mon Sep 14 17:49:22 2009
@@@@ -1812,74 +1813,16 @@@@ fi
@


1.19
log
@- let GSSAPI work again.

from remco@@d-compu.dyndns.org.
ok brad (MAINTAINER)
@
text
@d1 4
a4 12
$OpenBSD: patch-configure_in,v 1.18 2009/03/18 23:23:20 sthen Exp $
--- configure.in.orig	Mon Jul 27 07:26:55 2009
+++ configure.in	Tue Sep  1 12:18:46 2009
@@@@ -13,6 +13,7 @@@@ AC_PROG_CXX # lucene plugin needs this
 AC_HEADER_STDC
 AC_C_INLINE
 AC_PROG_LIBTOOL
+LIBS="${LIBS} -liconv"
 AM_ICONV
 
 AC_CHECK_HEADERS(strings.h stdint.h unistd.h dirent.h malloc.h inttypes.h \
@@@@ -1809,74 +1810,16 @@@@ fi
@


1.18
log
@maintenance update to 1.1.13, from Brad
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.16 2009/01/26 14:47:02 sthen Exp $
--- configure.in.orig	Wed Mar 18 17:31:49 2009
+++ configure.in	Wed Mar 18 18:09:40 2009
d12 1
a12 1
@@@@ -1809,74 +1810,15 @@@@ fi
d90 1
@


1.18.2.1
log
@MFC:

- SECURITY update of dovecot-sieve (based on the Cyrus sieve library)
- bugfix update of dovecot

reminded by pea@@, agree sthen@@, ok Brad
@
text
@d1 12
a12 4
$OpenBSD: patch-configure_in,v 1.20 2009/09/15 22:56:16 sthen Exp $
--- configure.in.orig	Sun Sep 13 22:12:28 2009
+++ configure.in	Mon Sep 14 17:49:22 2009
@@@@ -1812,74 +1813,16 @@@@ fi
a89 1
+		AC_DEFINE(BUILTIN_GSSAPI,, GSSAPI support is built in)
@


1.17
log
@maintenance update to Dovecot 1.1.12 plus a couple of post-release
patches from the upstream repo - from Brad (maintainer).
@
text
@d2 2
a3 2
--- configure.in.orig	Thu Mar 12 17:47:10 2009
+++ configure.in	Thu Mar 12 18:50:02 2009
@


1.16
log
@update to 1.1.9 and add a flavour add bdb dictionary support (allows
the expire plugin to work without a SQL database). From Brad (maintainer),
diff for bdb support from Michael Lechtermann.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.15 2009/01/08 12:07:03 sthen Exp $
--- configure.in.orig	Thu Jan 15 18:02:47 2009
+++ configure.in	Fri Jan 16 14:55:25 2009
d12 1
a12 1
@@@@ -1797,74 +1798,15 @@@@ fi
@


1.16.2.1
log
@MFC:

- SECURITY update of dovecot-sieve (based on the Cyrus sieve library)
- bugfix update of dovecot

originally from brad@@, -stable diff partly from sthen@@, thanks!

ok brad@@ (MAINTAINER)
@
text
@d1 12
a12 4
$OpenBSD: patch-configure_in,v 1.20 2009/09/15 22:56:16 sthen Exp $
--- configure.in.orig	Sun Sep 13 22:12:28 2009
+++ configure.in	Mon Sep 14 17:49:22 2009
@@@@ -1812,74 +1813,16 @@@@ fi
a89 1
+		AC_DEFINE(BUILTIN_GSSAPI,, GSSAPI support is built in)
@


1.15
log
@bugfix updates to 1.1.8 (Dovecot) and 1.1.6 (dovecot-sieve), from
Brad (maintainer).
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.14 2008/10/08 23:03:55 brad Exp $
--- configure.in.orig	Tue Jan  6 08:53:19 2009
+++ configure.in	Wed Jan  7 16:14:09 2009
d12 1
a12 1
@@@@ -1784,74 +1785,15 @@@@ fi
@


1.14
log
@Update to Dovecot 1.1.4.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.13 2008/09/04 08:35:43 brad Exp $
--- configure.in.orig	Sun Oct  5 13:04:09 2008
+++ configure.in	Mon Oct  6 19:17:28 2008
d12 1
a12 1
@@@@ -1764,74 +1765,15 @@@@ fi
@


1.13
log
@Update to Dovecot 1.1.3.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.12 2008/08/20 02:07:04 brad Exp $
--- configure.in.orig	Sat Aug 30 09:19:44 2008
+++ configure.in	Tue Sep  2 03:13:05 2008
d12 1
a12 1
@@@@ -1744,74 +1745,15 @@@@ fi
@


1.12
log
@Upgrade to Dovecot 1.1.2.

ok jakob@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.11 2008/04/28 09:51:10 bernd Exp $
--- configure.in.orig	Wed Jul 23 19:46:52 2008
+++ configure.in	Mon Jul 28 11:07:57 2008
d12 1
a12 1
@@@@ -1726,67 +1727,14 @@@@ fi
d58 7
d89 1
@


1.11
log
@cvs ate this patch.
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.in.orig	Sun Mar  9 11:45:25 2008
+++ configure.in	Fri Apr 25 12:32:06 2008
@@@@ -12,6 +12,7 @@@@ AC_PROG_CPP
d11 2
a12 2
 AC_CHECK_HEADERS(strings.h stdint.h unistd.h dirent.h \
@@@@ -1471,33 +1472,14 @@@@ fi
d15 1
a15 1
 if test $want_gssapi = yes; then
d18 18
a35 6
-		# we have a kludgy check here to check that we have
-		# version >= v1.3. Although this doesn't work right with
-		# non-MIT kerberos versioning..
-		if `krb5-config --version|grep -v '1\.2' > /dev/null`; then
-			AUTH_LIBS="$AUTH_LIBS `krb5-config --libs gssapi`"
-			AUTH_CFLAGS="$AUTH_CFLAGS `krb5-config --cflags gssapi`"
d40 1
a40 1
-			CFLAGS="$CFLAGS `krb5-config --cflags gssapi`"
d51 18
d72 4
d77 1
a77 1
+	# no krb5-config on OpenBSD, suck in the necessary libs and includes
d86 1
a87 1
 if test $want_sia = yes; then
@


1.10
log
@upgrade to dovecot 1.0.rc17; from brad@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.9 2006/01/16 21:32:59 brad Exp $
--- configure.in.orig	Sun Jan 15 14:47:43 2006
+++ configure.in	Sun Jan 15 17:09:45 2006
d12 42
@


1.9
log
@upgrade to Dovecot 1.0beta1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.6 2005/09/04 18:22:30 brad Exp $
@


1.9.4.1
log
@update to dovecot 1.0.0
many bug and some security fixes

from brad
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.9 2006/01/16 21:32:59 brad Exp $
@


1.9.2.1
log
@update to dovecot 1.0.0
many bug and some security fixes

from brad
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.9 2006/01/16 21:32:59 brad Exp $
@


1.8
log
@This is the real fix for the openldap problem. Sorry guys.

tested & ok alek@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.7 2005/10/20 18:28:48 brad Exp $
--- configure.in.orig	Thu Oct 20 11:12:19 2005
+++ configure.in	Fri Nov 11 14:17:19 2005
d7 1
a7 1
 AM_PROG_LIBTOOL
d11 1
a11 9
 AC_CHECK_HEADERS(strings.h stdint.h unistd.h dirent.h inttypes.h \
@@@@ -1193,6 +1194,7 @@@@ if test $want_bsdauth = yes; then
 fi
 
 if test $want_ldap = yes; then
+	LIBS="$LIBS -lsasl2"
 	AC_CHECK_LIB(ldap, ldap_init, [
 		AC_CHECK_HEADER(ldap.h, [
 			AC_CHECK_LIB(ldap, ldap_initialize, [
@


1.7
log
@upgrade to Dovecot 1.0alpha4
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.6 2005/09/04 18:22:30 brad Exp $
--- configure.in.orig	Thu Oct 20 05:12:19 2005
+++ configure.in	Thu Oct 20 14:00:00 2005
d12 8
@


1.6
log
@upgrade to Dovecot 1.0alpha1
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.in.orig	Sat Mar  5 15:02:47 2005
+++ configure.in	Sun Mar  6 16:46:00 2005
d11 1
a11 1
 AC_CHECK_HEADERS(strings.h stdint.h unistd.h dirent.h \
@


1.5
log
@- Fix libiconv detection
- Bump PKGNAME

ok brad@@
@
text
@d1 5
a5 4
$OpenBSD: patch-configure_in,v 1.4 2004/06/22 21:05:20 brad Exp $
--- configure.in.orig	Wed Jan 19 16:15:45 2005
+++ configure.in	Sun Feb 13 18:31:22 2005
@@@@ -12,6 +12,7 @@@@ AC_STDC_HEADERS
a6 1
 AC_ARG_PROGRAM
d11 1
a11 46
 AC_CHECK_HEADERS(string.h stdlib.h stdint.h unistd.h dirent.h)
@@@@ -681,6 +682,44 @@@@ AC_TRY_COMPILE([
 ], [
   AC_MSG_RESULT(no)
 ])
+
+dnl * If mmap() plays nicely with write()
+AC_MSG_CHECKING([whether we need to use MS_INVALIDATE with mmaps])
+AC_TRY_RUN([
+  #include <stdio.h>
+  #include <sys/types.h>
+  #include <sys/stat.h>
+  #include <unistd.h>
+  #include <fcntl.h>
+  #include <sys/mman.h>
+  int main() {
+    /* return 0 if we're signed */
+    int f = open("conftest.mmap", O_RDWR|O_CREAT|O_TRUNC);
+    void *mem;
+    if (f == -1) {
+      perror("open()");
+      return 1;
+    }
+    write(f, "1", 2);
+    mem = mmap(NULL, 2, PROT_READ|PROT_WRITE, MAP_SHARED, f, 0);
+    if (mem == MAP_FAILED) {
+      perror("mmap()");
+      return 1;
+    }
+    strcpy(mem, "2");
+    msync(mem, 2, MS_SYNC);
+    lseek(f, 0, SEEK_SET);
+    write(f, "3", 2);
+  
+    return strcmp(mem, "3") == 0 ? 0 : 1;
+  }
+], [
+  AC_MSG_RESULT(no)
+], [
+  AC_MSG_RESULT(yes)
+  AC_DEFINE(NEED_MS_INVALIDATE,, Define if your mmap() implementation requires use of MS_INVALIDATE to work with write())
+])
+
 
 dnl * Solaris compatible sendfilev()
 AC_CHECK_LIB(sendfile, sendfilev, [
@


1.4
log
@upgrade to Dovecot 0.99.10.6
- takeover as MAINTAINER
--
ok MAINTAINER
@
text
@d1 13
a13 4
$OpenBSD: patch-configure_in,v 1.3 2004/05/27 16:38:30 brad Exp $
--- configure.in.orig	2004-06-18 15:11:59.000000000 -0400
+++ configure.in	2004-06-22 16:36:27.000000000 -0400
@@@@ -682,6 +682,44 @@@@ AC_TRY_COMPILE([
d16 1
a16 1
 
d54 1
a54 1
+
a56 1
   LIBS="$LIBS -lsendfile"
@


1.3
log
@upgrade to Dovecot 0.99.10.5
--
ok MAINTAINER
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.2 2004/05/10 00:06:47 brad Exp $
--- configure.in.orig	2004-05-26 11:15:53.000000000 -0400
+++ configure.in	2004-05-27 01:24:16.000000000 -0400
@@@@ -665,6 +665,44 @@@@ AC_TRY_COMPILE([
@


1.2
log
@upgrade to Dovecot 0.99.10.4
--
ok MAINTAINER
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.1 2003/07/23 06:03:01 jolan Exp $
--- configure.in.orig	2003-11-24 14:54:08.000000000 -0500
+++ configure.in	2004-05-07 20:47:21.000000000 -0400
@@@@ -649,6 +649,44 @@@@ AC_TRY_COMPILE([
@


1.1
log
@incorporate megadiff from the author which allows mmaping of index data
on openbsd, related to pr/3291.  bump PKGNAME
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.in.orig	Thu Jun 26 11:12:43 2003
+++ configure.in	Tue Jul 15 15:16:36 2003
@@@@ -593,6 +593,44 @@@@ AC_TRY_COMPILE([
@


1.1.2.1
log
@MFC:
upgrade to Dovecot 0.99.10.5

Dovecot 0.99.10.{4,5} fix some possible mail box corruption issues.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.3 2004/05/27 16:38:30 brad Exp $
--- configure.in.orig	2004-05-26 11:15:53.000000000 -0400
+++ configure.in	2004-05-27 01:24:16.000000000 -0400
@@@@ -665,6 +665,44 @@@@ AC_TRY_COMPILE([
@


1.1.4.1
log
@MFC:
upgrade to Dovecot 0.99.10.5

Dovecot 0.99.10.{4,5} fix some possible mail box corruption issues.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.3 2004/05/27 16:38:30 brad Exp $
--- configure.in.orig	2004-05-26 11:15:53.000000000 -0400
+++ configure.in	2004-05-27 01:24:16.000000000 -0400
@@@@ -665,6 +665,44 @@@@ AC_TRY_COMPILE([
@


