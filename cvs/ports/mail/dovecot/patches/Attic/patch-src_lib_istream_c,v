head	1.2;
access;
symbols
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.03.17.09.09.10;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2009.02.08.14.54.21;	author sthen;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2009.09.23.03.37.03;	author william;	state dead;
branches;
next	;


desc
@@


1.2
log
@maintenance update to Dovecot 1.1.12 plus a couple of post-release
patches from the upstream repo - from Brad (maintainer).
@
text
@$OpenBSD: patch-src_lib_istream_c,v 1.1 2009/02/08 14:54:21 sthen Exp $
--- src/lib/istream.c.orig	Thu Feb  5 16:24:58 2009
+++ src/lib/istream.c	Thu Feb  5 16:25:44 2009
@@@@ -92,6 +92,10 @@@@ ssize_t i_stream_read(struct istream *stream)
 	case 0:
 		i_assert(!stream->blocking);
 		break;
+	default:
+		i_assert(ret > 0);
+		i_assert((size_t)ret <= _stream->pos - _stream->skip);
+		break;
 	}
 	return ret;
 }
@


1.1
log
@roll in fixes from upstream repo; from Brad.

- mail_index_lookup_first() didn't always find the result.
  This caused SELECT not to return UNSEEN number always.
- Maildir: Fix to earlier >26 keywords handling change.
- i_stream_read(): Added a few more asserts.
- istream-tee: Minor cleanups, assert and a potential fix.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@MFC:

- SECURITY update of dovecot-sieve (based on the Cyrus sieve library)
- bugfix update of dovecot

originally from brad@@, -stable diff partly from sthen@@, thanks!

ok brad@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_lib_istream_c,v 1.1 2009/02/08 14:54:21 sthen Exp $
@


