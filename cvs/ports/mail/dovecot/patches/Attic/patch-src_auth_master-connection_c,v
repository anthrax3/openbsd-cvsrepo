head	1.2;
access;
symbols
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.05.10.00.06.47;	author brad;	state dead;
branches;
next	1.1;

1.1
date	2003.09.23.06.34.32;	author jolan;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2004.05.28.20.46.46;	author brad;	state dead;
branches;
next	;


desc
@@


1.2
log
@upgrade to Dovecot 0.99.10.4
--
ok MAINTAINER
@
text
@$OpenBSD: patch-src_auth_master-connection_c,v 1.1 2003/09/23 06:34:32 jolan Exp $
--- src/auth/master-connection.c.orig	2003-05-26 10:27:13.000000000 -0500
+++ src/auth/master-connection.c	2003-09-23 00:45:29.000000000 -0500
@@@@ -55,7 +55,7 @@@@ fill_reply(const struct user_data *user,
 	reply.virtual_user_idx = reply_add(buf, user->virtual_user);
 	reply.mail_idx = reply_add(buf, user->mail);
 
-	p = strstr(user->home, "/./");
+	p = user->home != NULL ? strstr(user->home, "/./") : NULL;
 	if (p == NULL) {
 		reply.home_idx = reply_add(buf, user->home);
 		reply.chroot_idx = reply_add(buf, NULL);
@


1.1
log
@fix three crashing bugs, bump PKGNAME

- searching address fields can crash sometimes
- auth process crashes if user doesn't have home directory set
- sme BODY and BODYSTRUCTURE replies missed data for message/rfc822 MIME
  parts causing clients to break
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@MFC:
upgrade to Dovecot 0.99.10.5

Dovecot 0.99.10.{4,5} fix some possible mail box corruption issues.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_auth_master-connection_c,v 1.1 2003/09/23 06:34:32 jolan Exp $
@


