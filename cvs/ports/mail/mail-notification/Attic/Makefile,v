head	1.47;
access;
symbols
	OPENBSD_5_0:1.45.0.2
	OPENBSD_5_0_BASE:1.45
	OPENBSD_4_9:1.43.0.2
	OPENBSD_4_9_BASE:1.43
	OPENBSD_4_8:1.38.0.2
	OPENBSD_4_8_BASE:1.38
	OPENBSD_4_7:1.36.0.2
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.33.0.2
	OPENBSD_4_6_BASE:1.33
	OPENBSD_4_5:1.26.0.2
	OPENBSD_4_5_BASE:1.26
	OPENBSD_4_4:1.21.0.2
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.15.0.2
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.10.0.2
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	naddy_20041011:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.47
date	2011.08.30.12.25.31;	author ajacoutot;	state dead;
branches;
next	1.46;

1.46
date	2011.08.30.06.49.52;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.04.21.07.05.36;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2011.04.16.09.13.08;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2010.11.19.07.23.06;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2010.10.24.21.25.12;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2010.10.11.08.15.27;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2010.09.11.09.09.13;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2010.09.11.08.07.09;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2010.07.22.09.29.13;	author landry;	state Exp;
branches;
next	1.37;

1.37
date	2010.06.15.19.35.38;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2009.12.21.22.20.12;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2009.08.10.06.32.43;	author kili;	state Exp;
branches;
next	1.34;

1.34
date	2009.07.28.16.00.00;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2009.06.11.18.27.02;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2009.06.08.16.58.15;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2009.06.07.05.59.48;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2009.05.03.19.51.42;	author landry;	state Exp;
branches;
next	1.29;

1.29
date	2009.04.16.08.11.13;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2009.03.14.11.36.24;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2009.03.14.10.40.51;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2009.02.16.15.28.58;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2009.01.21.10.50.12;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2008.12.17.18.42.31;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2008.12.16.13.16.37;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2008.12.02.09.11.15;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2008.06.29.20.31.14;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2008.06.15.01.44.16;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2008.06.05.15.57.40;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2008.06.03.14.56.09;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2008.05.26.16.29.27;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2008.04.17.08.10.10;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2007.12.15.21.13.00;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2007.11.14.09.43.40;	author steven;	state Exp;
branches;
next	1.13;

1.13
date	2007.09.16.00.17.05;	author merdely;	state Exp;
branches;
next	1.12;

1.12
date	2007.05.20.13.24.09;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2007.05.20.13.22.31;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2007.01.04.20.19.54;	author steven;	state Exp;
branches;
next	1.9;

1.9
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2006.11.13.11.20.25;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2006.09.18.11.50.40;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2006.06.13.13.27.12;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2006.01.18.05.20.44;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.16.08.37.36;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2005.03.05.20.47.05;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.13.10.29.32;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2004.10.11.00.51.34;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.10.11.00.51.34;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.47
log
@Remove mail-notification. Dead upstream and cannot cope with recent
version of its dependencies, no need to keep it rotting our beautiful
growing tree.

landry@@ and jasper@@ didn't even pretend to shed a tear.
@
text
@# $OpenBSD: Makefile,v 1.46 2011/08/30 06:49:52 ajacoutot Exp $

BROKEN=			doesn't build with new gmime, upstream dead

COMMENT=		mail notification for freedesktop.org-compliant system trays

DISTNAME=		mail-notification-5.4
REVISION=		18

CATEGORIES=		mail

EXTRACT_SUFX=		.tar.bz2

HOMEPAGE=		http://www.nongnu.org/mailnotify/

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB += ICE ORBit-2 SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender art_lgpl_2 atk-1.0
WANTLIB += bonobo-2 bonobo-activation bonoboui-2 c cairo crypto
WANTLIB += dbus-1 dbus-glib-1 expat fontconfig freetype gailutil
WANTLIB += gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0
WANTLIB += gmodule-2.0 gnome-2 gnome-keyring gnomecanvas-2
WANTLIB += gnomevfs-2 gobject-2.0 gthread-2.0 gtk-x11-2.0 m pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pixman-1 png popt pthread
WANTLIB += pthread-stubs ssl xcb xcb-render xml2 canberra drm xcb-shm
WANTLIB += z gnomeui-2>=2400 notify sasl2 gmime-2.4 GL Xxf86vm

MASTER_SITES=	${MASTER_SITE_SAVANNAH:=mailnotify/}

MODULES=	devel/gettext \
		textproc/intltool \
		devel/gconf2

BUILD_DEPENDS=	textproc/rarian \
		x11/gob2 # needed for patch-src_mn-popup_gob
RUN_DEPENDS=	devel/desktop-file-utils \
		x11/gnome/yelp \
		notification-daemon-*|notification-daemon-xfce-*|xfce4-notifyd-*:sysutils/notification-daemon
LIB_DEPENDS=	x11/gnome/libgnomeui \
		devel/libnotify>=0.7.2 \
		security/cyrus-sasl2 \
		gmime->=2.4,<2.6:mail/gmime24

NO_REGRESS=		Yes
MODGCONF2_SCHEMAS_DIR=	mail-notification

do-configure:
	cd ${WRKSRC} && ./jb configure ${JB_FLAGS} \
		evolution=no hotmail=no yahoo=no \
		cc="${CC}" \
		cflags="${CFLAGS}" \
		cppflags="-I${LOCALBASE}/include" \
		ldflags="-L${LOCALBASE}/lib -liconv" \
		prefix="${PREFIX}" \
		data-owner=${SHAREOWN} \
		data-group=${SHAREGRP} \
		program-owner=${BINOWN} \
		program-group=${BINGRP} \
		library-owner=${BINOWN} \
		library-group=${BINGRP} \
		gconf-schemas-dir="${LOCALBASE}/${SCHEMAS_INSTDIR}/" \
		gconftool-2="/usr/bin/true" \
		destdir="${WRKINST}"

do-build:
	cd ${WRKBUILD} && ./jb build

do-install:
	cd ${WRKBUILD} && ./jb ${INSTALL_TARGET}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mail-notification
	mv ${PREFIX}${SYSCONFDIR}/xdg ${PREFIX}/share/examples/mail-notification
	rm -fr ${PREFIX}${SYSCONFDIR}

.include <bsd.port.mk>
@


1.46
log
@Mark broken for now, likely to move to the attic soon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/04/21 07:05:36 ajacoutot Exp $
@


1.45
log
@Fix build/run with new libnotify.

tested in a bulk by landry, thanks!
ok landry@@ jasper@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.44 2011/04/16 09:13:08 ajacoutot Exp $
@


1.44
log
@- remove casts now that NULL is a void *
- regen WANTLIB

gladly handed over to me by sthen@@ ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/11/19 07:23:06 espie Exp $
d6 1
a6 1
REVISION=		17
d37 2
a38 1
BUILD_DEPENDS=	textproc/rarian
d43 1
a43 1
		devel/libnotify \
@


1.43
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/10/24 21:25:12 ajacoutot Exp $
d6 1
a6 1
REVISION=		16
d28 2
a29 2
WANTLIB += pthread-stubs ssl xcb xcb-render xcb-render-util xml2
WANTLIB += z gnomeui-2>=2400 notify sasl2 gmime-2.4
@


1.42
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/10/11 08:15:27 jasper Exp $
d29 1
a29 1
WANTLIB += z gnomeui-2.>=2400 notify sasl2 gmime-2.4
d37 8
a44 8
BUILD_DEPENDS=	::textproc/rarian
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils \
		:yelp-*:x11/gnome/yelp \
		:notification-daemon-*|notification-daemon-xfce-*|xfce4-notifyd-*:sysutils/notification-daemon
LIB_DEPENDS=	::x11/gnome/libgnomeui \
		::devel/libnotify \
		::security/cyrus-sasl2 \
		:gmime->=2.4,<2.6:mail/gmime24
@


1.41
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/09/11 09:09:13 ajacoutot Exp $
a45 1
USE_X11=		Yes
@


1.40
log
@Explicitely set the gmime version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/09/11 08:07:09 ajacoutot Exp $
d6 1
a6 1
REVISION=		15
d25 1
a25 1
WANTLIB += glitz gmodule-2.0 gnome-2 gnome-keyring gnomecanvas-2
@


1.39
log
@Use GMime 2.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/07/22 09:29:13 landry Exp $
d6 1
a6 1
REVISION=		14
d44 1
a44 1
		:gmime->=2.4:mail/gmime24
@


1.38
log
@Remove -Wredundant-decls. While here tweak REVISION/LIB_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/06/15 19:35:38 jasper Exp $
d6 1
a6 1
REVISION=		13
d29 1
a29 1
WANTLIB += z gnomeui-2.>=2400 notify sasl2 gmime-2.0
d44 1
a44 1
		:gmime->=2.2,<2.4:mail/gmime
@


1.37
log
@- fix build with gcc4
- regen plist
- regen wantlib

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2009/12/21 22:20:12 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p12
d29 1
a29 1
WANTLIB += z
d41 4
a44 4
LIB_DEPENDS=	gnomeui-2.>=2400::x11/gnome/libgnomeui \
		notify::devel/libnotify \
		sasl2::security/cyrus-sasl2 \
		gmime-2.0:gmime->=2.2,<2.4:mail/gmime
@


1.36
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/08/10 06:32:43 kili Exp $
d4 1
d6 1
a6 2

PKGNAME=		${DISTNAME}p11
d20 10
a29 10
WANTLIB=	ICE ORBit-2 SM X11 Xau Xcomposite Xcursor Xdamage \
		Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender \
		art_lgpl_2 atk-1.0 bonobo-2 \
		bonobo-activation bonoboui-2 c cairo crypto dbus-1 \
		dbus-glib-1 expat fontconfig freetype gailutil \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 \
		glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring \
		gnomecanvas-2 gnomevfs-2 gobject-2.0 gthread-2.0 \
		gtk-x11-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pixman-1 png popt pthread pthread-stubs ssl xcb xml2 z
@


1.35
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/07/28 16:00:00 ajacoutot Exp $
d5 2
a6 1
PKGNAME=		${DISTNAME}p10
@


1.34
log
@Fix gmime pkgspec.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/06/11 18:27:02 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p9
d28 1
a28 1
		pixman-1 png popt pthread ssl xml2 z
@


1.33
log
@Bump after recent gconf2 MODULE change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2009/06/08 16:58:15 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p8
d43 1
a43 1
		gmime-2.0::mail/gmime
@


1.32
log
@Bump after recent gconf2 MODULE changes.

"yep, bumps are cheap" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/06/07 05:59:48 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p7
@


1.31
log
@Convert to using the new gconf2.port.mk module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/05/03 19:51:42 landry Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p6
@


1.30
log
@Add xfce4-notifyd as an alternative to other notification daemons in
RUN_DEPENDS, and bump PKGNAMEs.
prodded by ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/04/16 08:11:13 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p5
d24 1
a24 1
		gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 \
d33 2
a34 1
		textproc/intltool
d47 1
d63 1
a63 1
		gconf-schemas-dir="${LOCALBASE}/share/schemas/mail-notification" \
@


1.29
log
@- now that we have rarian, the 'scrollkeeper-update -> /bin/true' hack
is not needed as the legacy scrollkeeper-update provided by rarian does
not do anything anymore

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/03/14 11:36:24 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p4
d38 1
a38 1
		:notification-daemon-*|notification-daemon-xfce-*:sysutils/notification-daemon
@


1.28
log
@- nothing should have to run_depends on rarian anymore
- explicitely add build_depends on rarian where gnome-doc-utils is also a
build dependency as it does not itself run_depends on rarian anymore

This was the 2nd and hopefully last pass of rarian/scrollkeeper cleaning.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/03/14 10:40:51 ajacoutot Exp $
a61 1
		scrollkeeper-update="/usr/bin/true" \
@


1.27
log
@- first pass at cleaning rarian/scrollkeeper handling
remove rarian-sk-update from PLIST ; it is only a wrapper that does
noting: librarian takes care of everything now.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/02/16 15:28:58 sthen Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p3
a36 1
		::textproc/rarian \
@


1.26
log
@add MASTER_SITES_SAVANNAH and switch ports over to using it.
ok jasper, landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/01/21 10:50:12 ajacoutot Exp $
d5 2
a6 1
PKGNAME=		${DISTNAME}p2
@


1.25
log
@- regen WANTLIB after libgnome esound support removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/12/17 18:42:31 jasper Exp $
d29 1
a29 1
MASTER_SITES=	http://savannah.nongnu.org/download/mailnotify/
@


1.24
log
@- switch to rarian instead of scrollkeeper
- regen PLIST

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/12/16 13:16:37 jasper Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p1
d20 1
a20 1
		art_lgpl_2 atk-1.0 audiofile bonobo-2 \
d22 1
a22 1
		dbus-glib-1 esd expat fontconfig freetype gailutil \
@


1.23
log
@- get rid of a stray 'etc/' in PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/12/02 09:11:15 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d34 3
a36 3
BUILD_DEPENDS=	:scrollkeeper-*:textproc/scrollkeeper
RUN_DEPENDS=	:scrollkeeper-*:textproc/scrollkeeper \
		:desktop-file-utils-*:devel/desktop-file-utils \
@


1.22
log
@- unbreak after recent eel update by upgrading to mail-notification-5.4
(breakage noticed by naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/06/29 20:31:14 sthen Exp $
d5 1
d75 1
@


1.21
log
@WANTLIB+=pixman-1 and add LIB_DEPENDS pulled in by configure if present.
ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/06/15 01:44:16 sthen Exp $
d4 1
a4 2
DISTNAME=		mail-notification-4.0
PKGNAME=		${DISTNAME}p5
d7 2
d11 1
a11 1
# GPL
d17 10
a26 11
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcursor Xdmcp \
		Xcomposite Xdamage pcre \
		Xext Xfixes Xi Xinerama Xrandr Xrender art_lgpl_2 atk-1.0 \
		audiofile bonobo-2 bonobo-activation bonoboui-2 c cairo \
		crypto dbus-1 dbus-glib-1 esd expat fam fontconfig \
		freetype gailutil gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 \
		glade-2.0 glib-2.0 glitz gmodule-2.0 gnome-2 gnome-desktop-2 \
		gnome-keyring gnome-menu gnomecanvas-2 gnomeui-2 gnomevfs-2 \
		gobject-2.0 gthread-2.0 gtk-x11-2.0 jpeg m pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pixman-1 png popt pthread \
		rpcsvc ssl startup-notification-1 stdc++ util xml2 z
a34 1
		:gnome-icon-theme-*:x11/gnome/icon-theme \
d36 4
a39 3
		:yelp-*:x11/gnome/yelp
LIB_DEPENDS=	notify::devel/libnotify \
		eel-2::x11/gnome/eel \
d44 1
a44 1
USE_GMAKE=		Yes
d46 18
a63 4
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/mail-notification \
			--disable-schemas-install \
			--disable-evolution
d65 2
a66 2
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
d68 2
a69 2
post-patch:
	@@ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
d73 1
a73 1
	mv ${WRKINST}${SYSCONFDIR}/* ${PREFIX}/share/examples/mail-notification
a75 2

CONFIGURE_ARGS+=	--sysconfdir="${SYSCONFDIR}/gnome"
@


1.20
log
@tidy whitespace
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/06/05 15:57:40 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p4
d25 2
a26 2
		pangocairo-1.0 pangoft2-1.0 png popt pthread rpcsvc \
		ssl startup-notification-1 stdc++ util xml2 z
d39 3
a41 1
		eel-2::x11/gnome/eel
@


1.19
log
@- remove MAINTAINER as per his request
- bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/06/03 14:56:09 ajacoutot Exp $
d6 1
a6 1
CATEGORIES=		mail	
d9 1
a9 1
	
d12 3
a14 3
PERMIT_PACKAGE_FTP=	Yes 
PERMIT_DISTFILES_CDROM=	Yes 
PERMIT_DISTFILES_FTP=	Yes 
d28 1
a28 1
MASTER_SITES=		http://savannah.nongnu.org/download/mailnotify/
d30 2
a31 2
MODULES=		devel/gettext \
			textproc/intltool
d33 7
a39 7
BUILD_DEPENDS=         :scrollkeeper-*:textproc/scrollkeeper
RUN_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
			:gnome-icon-theme-*:x11/gnome/icon-theme \
			:desktop-file-utils-*:devel/desktop-file-utils \
			:yelp-*:x11/gnome/yelp
LIB_DEPENDS=		notify::devel/libnotify \
			eel-2::x11/gnome/eel
d52 1
a52 1
post-patch: 
@


1.18
log
@- use the in-tree intltool utilities (textproc/intltool MODULE) instead
of the ones bundled in sources
PLIST_DB seems happy with the change so no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/05/26 16:29:27 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p3
a9 2
MAINTAINER=		Thomas Delaet <thomas@@delaet.org>	

d15 1
@


1.17
log
@- make help available by adding MODGNOME_HELP_FILES / ::x11/gnome/yelp
to RUN_DEPENDS

"mkay" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/04/17 08:10:10 ajacoutot Exp $
d31 4
a34 3
MODULES=		devel/gettext 
BUILD_DEPENDS=         :scrollkeeper-*:textproc/scrollkeeper \
			:p5-XML-Parser-*:textproc/p5-XML-Parser
@


1.16
log
@- tweak the way the gtk-update-icon-cache goo is run

gtk-update-icon-cache is part of gtk+2: adding gtk+2 to run_depends just
to update the icon cache (which only gtk apps can use) is overkill to
say the least!
As from now, each time icons are installed under %D/share/icons, we try
to execute gtk-update-icon-cache and if it is not there, we just ignore
the error.
What it means is that if you have gtk+2 installed, then it'll run fine
and your apps will be able to use the cache. Otherwise, it will silently
fails which is fine since it means none of your apps would have been
able to take advantage of the cache anyway.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/12/15 21:13:00 ajacoutot Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p2
d36 2
a37 1
			:desktop-file-utils-*:devel/desktop-file-utils
@


1.15
log
@- add update-desktop-database and gtk-update-icon-cache goo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/11/14 09:43:40 steven Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p1
@


1.14
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/09/16 00:17:05 merdely Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d35 2
a36 1
			:gnome-icon-theme-*:x11/gnome/icon-theme
@


1.13
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/05/20 13:24:09 jasper Exp $
d5 1
d18 1
@


1.12
log
@remove stray '\'
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/05/20 13:22:31 jasper Exp $
d3 1
a3 1
COMMENT=		"mail notification for freedesktop.org-compliant system trays"
@


1.11
log
@unbreak by updating it mail-notification to 4.0
misses some functionality; will be added soon.

"looks okay" bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/01/04 20:19:54 steven Exp $
d43 1
a43 1
			--disable-evolution \
@


1.10
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/12/16 12:22:34 espie Exp $
d4 1
a4 2
DISTNAME=		mail-notification-1.0
PKGNAME=		${DISTNAME}p3
d16 10
d30 1
a30 1
BUILD_DEPENDS+=         :scrollkeeper-*:textproc/scrollkeeper \
d32 1
a32 1
RUN_DEPENDS+=		:scrollkeeper-*:textproc/scrollkeeper \
d34 3
a36 1
LIB_DEPENDS+=		eel-2::x11/gnome/eel
d39 1
d41 6
a46 19
CONFIGURE_ARGS+=        --sysconfdir="${CONFDIR}"
CONFIGURE_ARGS+=	--disable-schemas-install \
			--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/mail-notification \
			--disable-mime --disable-sasl --disable-gmail
CPPFLAGS+=		-I${LOCALBASE}/include
LDFLAGS+=		-L${LOCALBASE}/lib
CONFIGURE_ENV+=		CPPFLAGS="${CPPFLAGS}" LDFLAGS="${LDFLAGS}"

CONFDIR=		${SYSCONFDIR}/gnome
SUBST_VARS=		CONFDIR

WANTLIB=		pthread ICE c z xml2 X11 Xext Xrender cairo glitz png \
			SM popt fontconfig crypto freetype ssl m art_lgpl_2 \
			atk-1.0 bonobo-2 bonobo-activation bonoboui-2 \
			gconf-2 gdk-x11-2.0 ORBit-2 gailutil gnomeui-2 \
			gdk_pixbuf-2.0 glade-2.0 glib-2.0 \
			gmodule-2.0 gnome-2 gnomecanvas-2 gnomevfs-2 \
			gobject-2.0 gthread-2.0 gtk-x11-2.0 \
			pango-1.0 pangoft2-1.0 pangocairo-1.0
d53 1
a53 5
	${INSTALL_DATA} ${WRKINST}${SYSCONFDIR}/sound/events/mail-notification.soundlist \
			${PREFIX}/share/examples/mail-notification.soundlist
	${INSTALL_DATA_DIR} ${PREFIX}/share/schemas/mail-notification
	${INSTALL_DATA} ${WRKSRC}/data/mail-notification.schemas \
			${PREFIX}/share/schemas/mail-notification/
d56 2
@


1.9
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/11/13 11:20:25 steven Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p2
d40 1
a40 1
WANTLIB=		pthread ICE c z xml2 X11 cairo \
@


1.8
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/09/18 11:50:40 espie Exp $
d21 1
a21 2
BUILD_DEPENDS+=         :pkgconfig-*:devel/pkgconfig \
			:scrollkeeper-*:textproc/scrollkeeper \
@


1.7
log
@zap unneeded 0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/06/13 13:27:12 bernd Exp $
d27 1
@


1.6
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/01/18 05:20:44 steven Exp $
d42 6
a47 6
			atk-1.0.0.0 bonobo-2 bonobo-activation bonoboui-2 \
			gconf-2 gdk-x11-2.0.0.0 ORBit-2 gailutil gnomeui-2 \
			gdk_pixbuf-2.0.0.0 glade-2.0.0.0 glib-2.0.0.0 \
			gmodule-2.0.0.0 gnome-2 gnomecanvas-2 gnomevfs-2 \
			gobject-2.0.0.0 gthread-2.0.0.0 gtk-x11-2.0.0.0 \
			pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0
@


1.5
log
@fix WANTLIB after gtk+2 downgrade
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/11/16 08:37:36 wilfried Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p1
d40 1
a40 1
WANTLIB=		pthread ICE c z xml2 X11 Xext Xft Xrender \
d47 1
a47 2
			pango-1.0.0.0 pangoft2-1.0.0.0 pangox-1.0.0.0 \
			pangoxft-1.0.0.0
@


1.4
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/03/05 20:47:05 alek Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d40 4
a43 4
WANTLIB=		pthread ICE c z xml2 X11 \
			SM popt fontconfig crypto freetype ssl m \
			art_lgpl_2 atk-1.0.0.0 bonobo-2 bonobo-activation bonoboui-2 \
			cairo gconf-2 gdk-x11-2.0.0.0 ORBit-2 gailutil gnomeui-2 \
d47 2
a48 1
			pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0
@


1.3
log
@- Update to 1.0; contains fixes for two security issues
- Remove sasl and gmail FLAVORs

From Thomas Delaet <thomas@@delaet.org> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/11/13 10:29:32 sturm Exp $
d5 1
d40 2
a41 2
WANTLIB=		pthread Xrender ICE Xinerama c z xml2 X11 \
			SM Xext popt fontconfig crypto freetype ssl m Xft Xcursor \
d43 1
a43 1
			gconf-2 gdk-x11-2.0.0.0 ORBit-2 gailutil gnomeui-2 \
d47 1
a47 1
			pango-1.0.0.0 pangoft2-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
@


1.2
log
@/etc -> SYSCONFDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/10/11 00:51:34 naddy Exp $
d4 1
a4 1
DISTNAME=		mail-notification-0.6.2
d19 1
a19 1
MODULES=		gettext 
a25 1
USE_X11=		Yes
d30 2
a31 1
			--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/mail-notification
d39 8
a46 16
FLAVORS=		gmail sasl
FLAVOR?=

.if ${FLAVOR:L:Msasl}
CONFIGURE_ARGS+=	--enable-sasl
LIB_DEPENDS+=		sasl2::security/cyrus-sasl2
.else
CONFIGURE_ARGS+=	--disable-sasl
.endif

.if ${FLAVOR:L:Mgmail}
CONFIGURE_ARGS+=	--enable-gmail
LIB_DEPENDS+=		soup-2.2.0.0::devel/libsoup
.else
CONFIGURE_ARGS+=	--disable-gmail
.endif
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d61 1
a61 1
	${INSTALL_DATA} ${WRKINST}/etc/sound/events/mail-notification.soundlist \
@


1.1.1.1
log
@Import mail-notification 0.6.2.
Submitted by Thomas Delaet <thomas@@delaet.org>.

Mail Notification is a status icon (aka tray icon) that informs you
if you have new mail.  It works with system trays implementing the
freedesktop.org System Tray Specification.
@
text
@@
