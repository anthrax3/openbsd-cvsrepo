head	1.49;
access;
symbols
	OPENBSD_6_2:1.49.0.12
	OPENBSD_6_2_BASE:1.49
	OPENBSD_6_1:1.49.0.10
	OPENBSD_6_1_BASE:1.49
	OPENBSD_6_0:1.49.0.8
	OPENBSD_6_0_BASE:1.49
	OPENBSD_5_9:1.49.0.4
	OPENBSD_5_9_BASE:1.49
	OPENBSD_5_8:1.49.0.6
	OPENBSD_5_8_BASE:1.49
	OPENBSD_5_7:1.49.0.2
	OPENBSD_5_7_BASE:1.49
	OPENBSD_5_6:1.48.0.10
	OPENBSD_5_6_BASE:1.48
	OPENBSD_5_5:1.48.0.8
	OPENBSD_5_5_BASE:1.48
	OPENBSD_5_4:1.48.0.6
	OPENBSD_5_4_BASE:1.48
	OPENBSD_5_3:1.48.0.4
	OPENBSD_5_3_BASE:1.48
	OPENBSD_5_2:1.48.0.2
	OPENBSD_5_2_BASE:1.48
	OPENBSD_5_1_BASE:1.47
	OPENBSD_5_1:1.47.0.4
	OPENBSD_5_0:1.47.0.2
	OPENBSD_5_0_BASE:1.47
	OPENBSD_4_9:1.46.0.2
	OPENBSD_4_9_BASE:1.46
	OPENBSD_4_8:1.45.0.4
	OPENBSD_4_8_BASE:1.45
	OPENBSD_4_7:1.45.0.2
	OPENBSD_4_7_BASE:1.45
	OPENBSD_4_6:1.44.0.10
	OPENBSD_4_6_BASE:1.44
	OPENBSD_4_5:1.44.0.8
	OPENBSD_4_5_BASE:1.44
	OPENBSD_4_4:1.44.0.6
	OPENBSD_4_4_BASE:1.44
	OPENBSD_4_3:1.44.0.4
	OPENBSD_4_3_BASE:1.44
	OPENBSD_4_2:1.44.0.2
	OPENBSD_4_2_BASE:1.44
	OPENBSD_4_1:1.43.0.12
	OPENBSD_4_1_BASE:1.43
	OPENBSD_4_0:1.43.0.10
	OPENBSD_4_0_BASE:1.43
	OPENBSD_3_9:1.43.0.8
	OPENBSD_3_9_BASE:1.43
	OPENBSD_3_8:1.43.0.6
	OPENBSD_3_8_BASE:1.43
	OPENBSD_3_7:1.43.0.4
	OPENBSD_3_7_BASE:1.43
	OPENBSD_3_6:1.43.0.2
	OPENBSD_3_6_BASE:1.43
	OPENBSD_3_5:1.41.0.2
	OPENBSD_3_5_BASE:1.41
	OPENBSD_3_4:1.38.0.4
	OPENBSD_3_4_BASE:1.38
	OPENBSD_3_3:1.38.0.2
	OPENBSD_3_3_BASE:1.38
	OPENBSD_3_2:1.34.0.2
	OPENBSD_3_2_BASE:1.34
	OPENBSD_3_1:1.33.0.2
	OPENBSD_3_1_BASE:1.33
	OPENBSD_3_0:1.31.0.2
	OPENBSD_3_0_BASE:1.31
	OPENBSD_2_9_TRACKING_SWITCH:1.30
	OPENBSD_2_9:1.29.0.2
	OPENBSD_2_9_BASE:1.29
	OPENBSD_2_8:1.28.0.2
	OPENBSD_2_8_BASE:1.28
	OPENBSD_2_7:1.22.0.2
	OPENBSD_2_7_BASE:1.22
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	dugsong_1998-Dec-16:1.1.1.1
	dugsong:1.1.1;
locks; strict;
comment	@# @;


1.49
date	2014.11.17.15.26.53;	author giovanni;	state Exp;
branches;
next	1.48;
commitid	zaFyDup0K479P5wt;

1.48
date	2012.05.16.14.40.08;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2011.03.06.09.36.29;	author jakob;	state Exp;
branches;
next	1.46;

1.46
date	2010.08.31.06.03.32;	author jakob;	state Exp;
branches;
next	1.45;

1.45
date	2010.02.01.17.00.13;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2007.04.02.11.38.52;	author jakob;	state Exp;
branches;
next	1.43;

1.43
date	2004.06.10.21.22.41;	author jakob;	state Exp;
branches;
next	1.42;

1.42
date	2004.04.25.10.36.39;	author jakob;	state Exp;
branches;
next	1.41;

1.41
date	2004.02.16.08.54.13;	author jakob;	state Exp;
branches;
next	1.40;

1.40
date	2003.11.25.20.57.10;	author jakob;	state Exp;
branches;
next	1.39;

1.39
date	2003.11.24.21.10.07;	author jakob;	state Exp;
branches;
next	1.38;

1.38
date	2003.01.28.17.30.22;	author jakob;	state Exp;
branches;
next	1.37;

1.37
date	2003.01.28.17.29.09;	author jakob;	state Exp;
branches;
next	1.36;

1.36
date	2002.12.25.11.53.25;	author jakob;	state Exp;
branches;
next	1.35;

1.35
date	2002.10.28.14.35.20;	author jakob;	state Exp;
branches;
next	1.34;

1.34
date	2002.06.22.09.00.58;	author jakob;	state Exp;
branches;
next	1.33;

1.33
date	2002.01.25.08.12.33;	author jakob;	state Exp;
branches;
next	1.32;

1.32
date	2001.10.26.18.41.12;	author jakob;	state Exp;
branches;
next	1.31;

1.31
date	2001.09.28.23.39.57;	author jakob;	state Exp;
branches;
next	1.30;

1.30
date	2001.05.05.21.28.08;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2001.03.01.08.10.21;	author jakob;	state Exp;
branches;
next	1.28;

1.28
date	2000.09.25.21.02.29;	author jakob;	state Exp;
branches;
next	1.27;

1.27
date	2000.09.18.18.43.35;	author jakob;	state Exp;
branches;
next	1.26;

1.26
date	2000.08.15.17.01.22;	author jakob;	state Exp;
branches;
next	1.25;

1.25
date	2000.06.16.23.06.07;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2000.05.29.06.31.18;	author jakob;	state Exp;
branches;
next	1.23;

1.23
date	2000.05.16.16.58.19;	author jakob;	state Exp;
branches;
next	1.22;

1.22
date	2000.03.30.19.06.40;	author jakob;	state Exp;
branches
	1.22.2.1;
next	1.21;

1.21
date	2000.03.09.20.50.29;	author jakob;	state Exp;
branches;
next	1.20;

1.20
date	2000.03.06.06.03.45;	author turan;	state Exp;
branches;
next	1.19;

1.19
date	2000.03.05.23.00.30;	author jakob;	state Exp;
branches;
next	1.18;

1.18
date	2000.03.03.11.54.44;	author turan;	state Exp;
branches;
next	1.17;

1.17
date	2000.02.17.06.28.59;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2000.01.30.20.01.46;	author jakob;	state Exp;
branches;
next	1.15;

1.15
date	2000.01.29.16.10.33;	author jakob;	state Exp;
branches;
next	1.14;

1.14
date	2000.01.04.14.54.02;	author jakob;	state Exp;
branches;
next	1.13;

1.13
date	2000.01.03.14.34.22;	author jakob;	state Exp;
branches;
next	1.12;

1.12
date	2000.01.03.07.37.39;	author jakob;	state Exp;
branches;
next	1.11;

1.11
date	2000.01.02.12.20.03;	author jakob;	state Exp;
branches;
next	1.10;

1.10
date	99.12.12.19.01.53;	author jakob;	state Exp;
branches;
next	1.9;

1.9
date	99.12.05.15.01.04;	author jakob;	state Exp;
branches;
next	1.8;

1.8
date	99.10.07.20.59.15;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	99.09.26.20.35.59;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	99.06.13.16.15.57;	author dugsong;	state Exp;
branches;
next	1.5;

1.5
date	99.03.10.03.25.27;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	99.02.02.19.39.16;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	99.01.12.02.39.30;	author dugsong;	state Exp;
branches;
next	1.2;

1.2
date	98.12.16.22.00.51;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.12.16.18.30.46;	author dugsong;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.12.16.18.30.46;	author dugsong;	state Exp;
branches;
next	;

1.22.2.1
date	2000.09.15.05.02.03;	author marc;	state Exp;
branches;
next	;


desc
@@


1.49
log
@Link to the build all sasl2 flavors (ldap, mysql and pgsql)
ok sthen@@ brad@@
@
text
@# $OpenBSD: Makefile,v 1.48 2012/05/16 14:40:08 sthen Exp $

SUBDIR =
SUBDIR += stable
SUBDIR += stable,ldap
SUBDIR += stable,ldap,sasl2
SUBDIR += stable,mysql
SUBDIR += stable,mysql,sasl2
SUBDIR += stable,pgsql
SUBDIR += stable,pgsql,sasl2
SUBDIR += stable,sasl2

SUBDIR += snapshot
SUBDIR += snapshot,ldap
SUBDIR += snapshot,ldap,sasl2
SUBDIR += snapshot,mysql
SUBDIR += snapshot,mysql,sasl2
SUBDIR += snapshot,pgsql
SUBDIR += snapshot,pgsql,sasl2
SUBDIR += snapshot,sasl2

.include <bsd.port.subdir.mk>
@


1.48
log
@Roll sqlite support into the main package; there's no point having it
as an optional flavour now that sqlite is in base. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/03/06 09:36:29 jakob Exp $
d6 1
d8 1
d10 1
d15 1
d17 1
d19 1
@


1.47
log
@add global sqlite flavour
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/08/31 06:03:32 jakob Exp $
a8 1
SUBDIR += stable,sqlite
a14 1
SUBDIR += snapshot,sqlite
@


1.46
log
@add sqlite flavour; from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/02/01 17:00:13 espie Exp $
d9 1
@


1.45
log
@SUBDIR += is wrong: it means the makefile will pick up SUBDIR from env, thus
breaking cd /usr/ports && SUBDIR=some/path make something for
category makefiles. While there, also put spaces around += uniformously.
okay naddy@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/04/02 11:38:52 jakob Exp $
d15 1
@


1.44
log
@enable postgres flavour
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2004/06/10 21:22:41 jakob Exp $
d3 6
a8 5
SUBDIR+= stable
SUBDIR+= stable,ldap
SUBDIR+= stable,mysql
SUBDIR+= stable,pgsql
SUBDIR+= stable,sasl2
d10 5
a14 5
SUBDIR+= snapshot
SUBDIR+= snapshot,ldap
SUBDIR+= snapshot,mysql
SUBDIR+= snapshot,pgsql
SUBDIR+= snapshot,sasl2
@


1.43
log
@build snapshots
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2004/04/25 10:36:39 jakob Exp $
d6 1
d12 1
@


1.42
log
@move to postfix release 2.1 and snapshot 2.2

- enable SMTP over SSL/TLS by default
- enable IPv6 by default
- enable PRE by default
- keep sasl2/ldap/mysql/pgsql as flavours
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2004/02/16 08:54:13 jakob Exp $
d8 4
a11 4
#SUBDIR+= snapshot
#SUBDIR+= snapshot,ldap
#SUBDIR+= snapshot,mysql
#SUBDIR+= snapshot,sasl2
@


1.41
log
@clean up the flavour packaging mess
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2003/11/25 20:57:10 jakob Exp $
d4 3
a6 4
SUBDIR+= stable,tls
SUBDIR+= stable,tls,ldap
SUBDIR+= stable,tls,mysql
SUBDIR+= stable,tls,sasl2,pcre
d8 4
a11 5
SUBDIR+= snapshot
SUBDIR+= snapshot,tls
SUBDIR+= snapshot,tls,ldap
SUBDIR+= snapshot,tls,mysql
SUBDIR+= snapshot,tls,sasl2,pcre
@


1.40
log
@unbreak makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2003/11/24 21:10:07 jakob Exp $
a3 4
SUBDIR+= stable,ldap
SUBDIR+= stable,mysql
SUBDIR+= stable,pcre
SUBDIR+= stable,sasl2
d5 2
a6 1
SUBDIR+= stable,tls,sasl2
a9 5
SUBDIR+= snapshot,ldap
SUBDIR+= snapshot,mysql
SUBDIR+= snapshot,pgsql
SUBDIR+= snapshot,pcre
SUBDIR+= snapshot,sasl2
d11 3
@


1.39
log
@enable tls and pgsql snapshot version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2003/01/28 17:30:22 jakob Exp $
d15 1
a15 1
SUBDIR+- snapshot,pgsql
@


1.38
log
@more
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2003/01/28 17:29:09 jakob Exp $
d15 1
d18 1
@


1.37
log
@no more tls patches for snapshot releases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2002/12/25 11:53:25 jakob Exp $
d7 1
d10 1
@


1.36
log
@also build tls+sasl2 package by default. sync snapshot flavours
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2002/10/28 14:35:20 jakob Exp $
d14 1
a14 2
SUBDIR+= snapshot,tls
SUBDIR+= snapshot,tls,sasl2
@


1.35
log
@add snapshot,pcre
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/06/22 09:00:58 jakob Exp $
d8 2
d11 2
d14 1
@


1.34
log
@build snapshot and snapshot+tls+sasl2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2002/01/25 08:12:33 jakob Exp $
d9 1
@


1.33
log
@disable snapshot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2001/10/26 18:41:12 jakob Exp $
d8 2
a9 1
#SUBDIR+= snapshot
@


1.32
log
@also build tls flavour by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/09/28 23:39:57 jakob Exp $
d8 1
a8 1
SUBDIR+= snapshot
@


1.31
log
@build mysql flavour
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2001/05/05 21:28:08 espie Exp $
d7 1
@


1.30
log
@, -> : in flavor deps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2001/03/01 08:10:21 jakob Exp $
d5 1
@


1.29
log
@build ldap and pcre flavours of stable version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/09/25 21:02:29 jakob Exp $
d4 2
a5 2
SUBDIR+= stable:ldap
SUBDIR+= stable:pcre
@


1.28
log
@split port into stable and snapshot versions
@
text
@d1 1
a1 1
# $OpenBSD$
d4 2
@


1.27
log
@Update to Postfix 19991231 patch 09.
--
Postfix 19991231 patch 09 fixes a memory corruption problem, and
includes a long list of minor bugfixes and robustness improvements
that already featured in snapshot releases (or that will feature
in the next one).

  - When propagating an address extension to the right-hand side
    of a virtual or canonical mapping, the cleanup server could
    access memory that was no longer allocated and die with signal
    11. This would happen when the result address length was more
    than about 100 characters.  Credit to Adi Prasaja @@ satunet.com
    for coming up with a small reproducible demo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/08/15 17:01:22 jakob Exp $
d3 2
a4 7
DISTNAME=	postfix-19991231-pl09
CATEGORIES=	mail
NEED_VERSION=	1.310
MASTER_SITES=	ftp://ftp.merit.edu/postfix/official/ \
		ftp://ftp.sunet.se/pub/unix/mail/postfix/official/ \
		ftp://ftp.tau.ac.il/pub/unix/mail/postfix/official/ \
		ftp://ftp.cs.uu.nl/mirror/postfix/postfix-release/official/
d6 1
a6 31
HOMEPAGE=	http://www.postfix.org/

MAINTAINER=	jakob@@openbsd.org

PERMIT_PACKAGE_CDROM=	yes
PERMIT_PACKAGE_FTP=	yes
PERMIT_DISTFILES_CDROM=	yes
PERMIT_DISTFILES_FTP=	yes

MAKE_FLAGS=	CC="${CC}" DEBUG="" OPT="${CFLAGS}" \
		OPTS="CC=\"${CC}\" DEBUG=\"\" OPT=\"${CFLAGS}\""

ALL_TARGET=	default

do-install:
	${INSTALL_PROGRAM_DIR} ${PREFIX}/libexec/postfix
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/postfix
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/postfix
	${INSTALL_PROGRAM} ${WRKSRC}/bin/* ${PREFIX}/sbin
	${INSTALL_SCRIPT} ${FILESDIR}/postfix-enable ${PREFIX}/sbin
	${INSTALL_SCRIPT} ${FILESDIR}/postfix-disable ${PREFIX}/sbin
	${INSTALL_PROGRAM} ${WRKSRC}/libexec/* ${PREFIX}/libexec/postfix
	${INSTALL_DATA} ${WRKSRC}/conf/* ${PREFIX}/share/examples/postfix
	@@(cd ${WRKSRC}/man; \
	  for mandir in man[0-9]; do \
	     ${INSTALL_MAN} $$mandir/* ${PREFIX}/man/$$mandir; \
	  done)
	${INSTALL_DATA} ${WRKSRC}/html/*.html ${PREFIX}/share/doc/postfix
	${INSTALL_DATA} ${WRKSRC}/html/*.gif ${PREFIX}/share/doc/postfix

.include <bsd.port.mk>
@


1.26
log
@- move examples from lib/postfix to share/examples/postfix
- use user/group commands
- ${FOO} -> $FOO om INSTALL/DEINSTAL
- add HOMEPAGE

work by Brad and myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/06/16 23:06:07 espie Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl08
@


1.25
log
@Remove NO_CONFIGURE/NO_PATCH/NO_EXTRACT/NO_MTREE

Kill corresponding FAKE=Yes and switch to CONFIGURE_STYLE while I'm at it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/05/29 06:31:18 jakob Exp $
d4 2
a5 2
CATEGORIES=     mail
NEED_VERSION=	1.241
d11 2
a25 1
	${INSTALL_DATA_DIR} ${PREFIX}/lib/postfix
d28 1
d33 1
a33 1
	${INSTALL_DATA} ${WRKSRC}/conf/* ${PREFIX}/lib/postfix
d39 1
a39 1
	${INSTALL_DATA} ${WRKSRC}/html/*.gif  ${PREFIX}/share/doc/postfix
@


1.24
log
@Update to Postfix 19991231 Patchlevel 08. Info from the author:

This patch provides an emergency band-aid for the next wave of
MicroSoft email worms, fixes one bug, and makes external content
filtering a bit more robust.

  - Feature: specify "body_checks = regexp:/etc/postfix/body_checks"
    for an emergency content filter that looks at non-header lines
    one line at a time (including MIME headers inside the message
    body).  This feature uses the same syntax as the header_checks
    patterns.  Details in conf/sample-filter.cf.

    This feature is also available in Postfix snapshot 20000528.

  - Bugfix: the masquerade_exceptions feature was case sensitive.

  - Robustness: upon receipt of mail, Postfix maps MAILER-DAEMON@@myorigin
    sender address back into the magic null string, which prevents
    mail from looping after processing by an external content filter.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/05/16 16:58:19 jakob Exp $
a16 4

FAKE=		yes

NO_CONFIGURE=	yes
@


1.23
log
@Update to Postfix 19991231 patchlevel 07.

  - RFC 822 requires the presence of at least one destination
    message header. Postfix now generates a generic "To:
    undisclosed-recipients:;" message header when no destination
    header is present.  The header content is specified with the
    new undisclosed_recipients_header parameter.

  - Postfix now understands <(comment)> as SMTP MAIL FROM address,
    because some broken software needs it. Postfix rejects such
    illegal address forms with "strict_rfc821_envelopes = yes".

  - Configuration parameters for one mysql dictionary would become
    default settings for the next one. This patch was merged into
    the development Postfix version a while back but apparently
    that version was on a dead branch.  Update by Scott Cotton.

  - Some Postfix delivery agents would abort on addresses of the
    form `stuff@@.' which could unfortunately be generated locally.

  - With local delivery, Postfix could insert > or . into the middle
    of very long lines.

  - SMTP sessions could time out when the remote client attempted
    to deliver to a large number of rejected recipients.  The SMTP
    server now flushes unwritten output in-between tarpit delays,
    to avoid protocol timeouts in pipelined SMTP sessions.

  - Postfix would incorrectly reject domain names with adjacent `-'
    characters.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/03/30 19:06:40 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl07
@


1.22
log
@update to postfix-19991231-pl06
clean up makefile and fake installation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/03/09 20:50:29 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl06
@


1.22.2.1
log
@bring mail as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/06/16 23:06:07 espie Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl08
d17 4
@


1.21
log
@update to version 19991231 patch 05.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/03/06 06:03:45 turan Exp $
d3 1
a3 3
#BROKEN=		auto installs files in /etc

DISTNAME=	postfix-19991231-pl05
d5 1
d18 2
a26 3
pre-install:
	@@PKG_PREFIX="${PREFIX}" sh ${PKGDIR}/INSTALL ${DISTNAME} PRE-INSTALL

a30 1
	@@echo "-> Installing postfix commands in ${PREFIX}/sbin"
a33 1
	@@echo "-> Installing postfix daemons in ${PREFIX}/libexec/postfix"
a34 1
	@@echo "-> Installing postfix sample config files in ${PREFIX}/lib/postfix"
a35 1
	@@echo "-> Installing postfix man pages in ${PREFIX}/man"
a39 1
	@@echo "-> Installing postfix HTML documentation in ${PREFIX}/share/doc/postfix"
a41 6

post-install:
	@@PKG_PREFIX="${PREFIX}" sh ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL

post-deinstall:
	@@PKG_PREFIX="${PREFIX}" sh ${PKGDIR}/DEINSTALL ${DISTNAME} DEINSTALL
@


1.20
log
@mark unbroken until the installing in /etc issue is resolved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/03/05 23:00:30 jakob Exp $
d5 1
a5 1
DISTNAME=	postfix-19991231-pl04
@


1.19
log
@fix license info
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/03/03 11:54:44 turan Exp $
d3 1
a3 1
BROKEN=		auto installs files in /etc
@


1.18
log
@broken, installs files automatically in /etc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/02/17 06:28:59 brad Exp $
d13 5
@


1.17
log
@- cleanup
- make use of MAKE_FLAGS so this port respects CC and CFLAGS
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.16 2000/01/30 20:01:46 jakob Exp $
@


1.16
log
@19991231-pl04
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/01/29 16:10:33 jakob Exp $
a4 1

d14 3
d20 1
a20 1
	@@${SH} ${PKGDIR}/INSTALL ${DISTNAME} PRE-INSTALL
d23 3
d27 3
a29 3
	@@${INSTALL_PROGRAM} ${WRKSRC}/bin/* ${PREFIX}/sbin
	@@${INSTALL_SCRIPT} ${FILESDIR}/postfix-enable  ${PREFIX}/sbin
	@@${INSTALL_SCRIPT} ${FILESDIR}/postfix-disable ${PREFIX}/sbin
d31 1
a31 2
	@@${INSTALL_PROGRAM_DIR} ${PREFIX}/libexec/postfix
	@@${INSTALL_PROGRAM} ${WRKSRC}/libexec/* ${PREFIX}/libexec/postfix
d33 1
a33 2
	@@${INSTALL_DATA_DIR} ${PREFIX}/lib/postfix
	@@${INSTALL_DATA} ${WRKSRC}/conf/* ${PREFIX}/lib/postfix
d35 4
a38 4
	@@( cd ${WRKSRC}/man ; \
	  for mandir in man[0-9] ; do \
	     ${INSTALL_MAN} $$mandir/* ${PREFIX}/man/$$mandir ; \
	  done )
d40 2
a41 3
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/postfix
	@@${INSTALL_DATA} ${WRKSRC}/html/*.html ${PREFIX}/share/doc/postfix
	@@${INSTALL_DATA} ${WRKSRC}/html/*.gif  ${PREFIX}/share/doc/postfix
d44 1
a44 1
	@@${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
d47 1
a47 1
	@@${SH} ${PKGDIR}/DEINSTALL ${DISTNAME} DEINSTALL
@


1.15
log
@postfix-19991231-pl03
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/01/04 14:54:03 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl03
@


1.14
log
@postfix-19991231-pl02; fix case sensitivity bug in anti-relaying code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/01/03 14:34:22 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl02
@


1.13
log
@postfix-19991231-pl01
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/01/03 07:37:39 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231-pl01
@


1.12
log
@MAINTAINER changed to <jakob@@openbsd.org>. OK dugsong@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/01/02 12:20:03 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19991231
@


1.11
log
@postfix-19991231
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/12/12 19:01:53 jakob Exp $
d11 1
a11 1
MAINTAINER=	dugsong@@monkey.org
@


1.10
log
@Update to postfix-19990906-pl09. File missed by CVS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/12/05 15:01:04 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19990906-pl09
@


1.9
log
@Update to 19990906 Patch 08 - CVS forgot this one...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/10/07 20:59:15 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19990906-pl08
@


1.8
log
@Now non-interactive.
Better instructions for install/deinstall.
Cleanup.
ok espie@@.

(file missed by CVS in previous commit)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/09/26 20:35:59 jakob Exp $
d3 1
a3 1
DISTNAME=	postfix-19990906-pl05
@


1.7
log
@update to postfix-19990906-pl05
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/06/13 16:15:57 dugsong Exp $
a12 1
IS_INTERACTIVE=	yes
a20 1
	@@echo
d23 2
a24 1
	@@echo
a27 1
	@@echo
a30 1
	@@echo
a35 1
	@@echo
d38 2
a39 1
	@@${INSTALL_DATA} ${WRKSRC}/html/* ${PREFIX}/share/doc/postfix
@


1.6
log
@update to version 19990601
@
text
@d1 1
a1 9
# OpenBSD makefile for:	postfix
# Version required:	beta-19990122
# Date created:		1998-Dec-10
# Whom:			dugsong@@OpenBSD.ORG
#
# Relevant URLs:	http://www.postfix.org/
#			http://www.alphaworks.ibm.com/formula/securemailer/
#
# $OpenBSD: Makefile,v 1.5 1999/03/10 03:25:27 marc Exp $
d3 1
a3 1
DISTNAME=	postfix-19990601
a13 1

@


1.5
log
@note that a newer version of the code is available;
remove ftp.win.ne.jp from master sites -- it will not allow the port
to be fetched because it does not like the format of the "password"
sent by the ftp client
@
text
@d9 1
a9 1
# $OpenBSD: Makefile,v 1.4 1999/02/02 19:39:16 marc Exp $
d11 1
a11 1
DISTNAME=	postfix-beta-19990122
d14 4
a17 6
#BROKEN=	"newer version available"

MASTER_SITES=	ftp://ftp.merit.edu/postfix/ \
		ftp://ftp.sunet.se/pub/unix/mail/postfix/ \
		ftp://ftp.tau.ac.il/pub/unix/mail/postfix/ \
		ftp://ftp.cs.uu.nl/mirror/postfix/postfix-release/
d28 24
a51 1
	@@${SH} ${PKGDIR}/INSTALL with PRE-INSTALL
d54 1
a54 6
	@@${SH} ${PKGDIR}/INSTALL with POST-INSTALL

MAN1=	mailq.1 newaliases.1 postalias.1 postcat.1 postconf.1 postdrop.1 \
	postfix.1 postkick.1 postlock.1 postlog.1 postmap.1 sendmail.1

MAN5=	access.5 aliases.5 canonical.5 relocated.5 transport.5 virtual.5
d56 2
a57 2
MAN8=	bounce.8 cleanup.8 defer.8 local.8 master.8 pickup.8 pipe.8 qmgr.8 \
	showq.8 smtp.8 smtpd.8 trivial-rewrite.8
@


1.4
log
@update to beta-19990122; Dug Song <dugsong@@monkey.org>
@
text
@d9 1
a9 1
# $OpenBSD: Makefile,v 1.3 1999/01/12 02:39:30 dugsong Exp $
d12 1
d14 1
a14 1
CATEGORIES=     mail
d19 1
a19 2
		ftp://ftp.cs.uu.nl/mirror/postfix/postfix-release/ \
		ftp://ftp.win.ne.jp/pub/network/mail/postfix/
@


1.3
log
@upgrade to 19981230, add setgid maildrop support (jakob@@crt.se)
@
text
@d2 1
a2 1
# Version required:	beta-19981230
d9 1
a9 1
# $OpenBSD: Makefile,v 1.2 1998/12/16 22:00:51 marc Exp $
d11 1
a11 1
DISTNAME=	postfix-beta-19981230
@


1.2
log
@MIRROR_DISTFILE=no
@
text
@d2 1
a2 1
# Version required:	beta-19981211
d9 1
a9 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/12/16 18:30:46 dugsong Exp $
d11 1
a11 1
DISTNAME=	postfix-beta-19981211
d15 6
a22 5
NO_CDROM=	"LIC: redistribution not allowed"
MIRROR_DISTFILE=no

MASTER_SITES=	see_do-fetch_target

a28 15
do-fetch:
	@@if [ ! -f ${DISTDIR}/${DISTFILES} ]; then \
	   ${ECHO} "" ; \
	   ${ECHO} "  The source to this port may not be automatically fetched" ; \
	   ${ECHO} "  due to licensing restrictions. You MUST fetch the source" ; \
	   ${ECHO} "  manually after reading and agreeing to the license at:" ; \
	   ${ECHO} "" ; \
	   ${ECHO} "      http://www.alphaworks.ibm.com/formula/securemailer/" ; \
	   ${ECHO} "" ; \
	   ${ECHO} "  Once ${DISTFILES} has been downloaded,"; \
	   ${ECHO} "  move it to ${DISTDIR} and then restart this build." ; \
	   ${ECHO} "" ; \
	   exit 1 ; \
	fi

d35 2
a36 2
MAN1=	mailq.1 newaliases.1 postalias.1 postcat.1 postconf.1 postfix.1 \
	postkick.1 postlock.1 postlog.1 postmap.1 sendmail.1
@


1.1
log
@Initial revision
@
text
@d9 1
a9 1
# $OpenBSD$
d18 1
@


1.1.1.1
log
@add postfix port
@
text
@@
