head	1.2;
access;
symbols
	robert_20170913:1.1.1.1 robert:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.09.27.08.36.53;	author robert;	state Exp;
branches;
next	1.1;
commitid	dASHzDnrz6ttJl6T;

1.1
date	2017.09.13.10.38.42;	author robert;	state Exp;
branches
	1.1.1.1;
next	;
commitid	EUPcYe0im3Fq9qvW;

1.1.1.1
date	2017.09.13.10.38.42;	author robert;	state Exp;
branches;
next	;
commitid	EUPcYe0im3Fq9qvW;


desc
@@


1.2
log
@update to 8.4.90.394 and fix wantlib
@
text
@$OpenBSD$

Index: configure.ac
--- configure.ac.orig
+++ configure.ac
@@@@ -53,11 +53,13 @@@@ case "$host_os" in
 	openbsd*)
 		BUILDOS="openbsd"
 		ZCPPFLAGS="$ZCPPFLAGS -DOPENBSD"
+		TINFO_LIB=""
 		LN_TFSV="ln -fs"
 		;;
 	linux*)
 		BUILDOS="linux"
 		ZCPPFLAGS="$ZCPPFLAGS -DLINUX"
+		TINFO_LIB="-ltinfo"
 		LN_TFSV="ln -Tfsv"
 		;;
 esac
@@@@ -259,7 +261,7 @@@@ AC_DEFUN([LIBNCURSES_WITH_CONFIG],[
 		[
 			dnl just pick the lowest common denominator
 			NCURSES_FLAGS=""
-			NCURSES_LIBS="-lncurses -ltinfo"
+			NCURSES_LIBS="-lncurses ${TINFO_LIB}"
 		]
 	)
 	dnl We should be using ncurses.h - or is portability to non-ncurses
@@@@ -520,11 +522,11 @@@@ AC_SEARCH_LIBS([crypt_r], [crypt], [
 ])
 LIBS="$LIBS_system"
 AC_SEARCH_LIBS([clock_gettime], [rt], [
-	AS_IF([test "$LIBS" = "$LIBS_system"], [clock_LIBS=""], [clock_LIBS="-lrt"])
+	AS_IF([test "$LIBS" = "$LIBS_system"], [clock_LIBS=""], [clock_LIBS=""])
 ])
 LIBS="$LIBS_system"
 AC_SEARCH_LIBS([timer_create], [rt], [
-	AS_IF([test "$LIBS" = "$LIBS_system"], [timer_LIBS=""], [timer_LIBS="-lrt"])
+	AS_IF([test "$LIBS" = "$LIBS_system"], [timer_LIBS=""], [timer_LIBS=""])
 ])
 dnl AC_SEARCH_LIBS does not set any define in config.h, so check again
 AC_CHECK_FUNCS([timer_create])
@@@@ -704,6 +706,8 @@@@ ZCPPFLAGS="$ZCPPFLAGS $icu_uc_CFLAGS $icu_i18n_CFLAGS"
 # all libs for programs, because functions are in static common stuff
 PROG_LIBS="$UUID_LIBS $INTL_LIBS $ICONV_LIBS $GZ_LIBS"
 AC_SUBST(PROG_LIBS)
+
+AC_CHECK_FUNCS([arc4random_buf])
 
 # done testing C++ requirements
 AC_LANG_POP
@


1.1
log
@Initial revision
@
text
@d29 15
a43 10
@@@@ -515,7 +517,7 @@@@ AC_SUBST(ICONV_LIBS)
 LIBS=$LIBS_system
 
 AC_SEARCH_LIBS([crypt_r], [crypt], [CRYPT_LIBS="-lcrypt"; LIBS="$LIBS_system"])
-AC_SEARCH_LIBS([clock_gettime], [rt], [clock_LIBS="-lrt"; LIBS="$LIBS_system"])
+AC_SEARCH_LIBS([clock_gettime], [rt], [clock_LIBS=""; LIBS="$LIBS_system"])
 AC_SUBST([CRYPT_LIBS])
 AC_SUBST([clock_LIBS])
 PKG_CHECK_EXISTS([libssl],
@@@@ -690,6 +692,8 @@@@ ZCPPFLAGS="$ZCPPFLAGS $icu_uc_CFLAGS $icu_i18n_CFLAGS"
@


1.1.1.1
log
@import of kopano-{core,mapi,webapp}-8.3.5.1335

Kopano is a replacement of the deprecated Zarafa (ZCP) suite.

Joint work with pirofti@@

For upgrading please refer to the README.

ok ajacoutot@@
@
text
@@
