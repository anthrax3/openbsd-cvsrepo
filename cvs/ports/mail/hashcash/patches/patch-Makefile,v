head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.38
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.34
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.36
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.32
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.30
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.28
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.26
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.24
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.22
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.20
	OPENBSD_5_0:1.3.0.18
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.16
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.14
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.12
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.10
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	niallo_2005_06_16:1.1.1.1
	niallo:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2007.05.03.17.34.09;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2005.12.23.12.55.05;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2005.06.16.17.35.22;	author niallo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.06.16.17.35.22;	author niallo;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2006.03.27.18.55.13;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to 1.22 from Armin Wolfermann <aw@@osn.de>
@
text
@$OpenBSD: patch-Makefile,v 1.2 2005/12/23 12:55:05 steven Exp $
--- Makefile.orig	Sun Apr  9 00:13:42 2006
+++ Makefile	Wed May  2 01:49:48 2007
@@@@ -2,9 +2,9 @@@@ HC_VERS = 1.22
 CHANGEME1 = 1 # put PACKAGER = EBUILD|RPM etc here
 CHANGEME2 = 2
 CHANGEME3 = 3
-INSTALL_PATH = /usr/bin
-MAN_INSTALL_PATH = /usr/share/man/man1
-DOC_INSTALL_PATH = /usr/share/doc/hashcash-$(HC_VERS)
+INSTALL_PATH = ${PREFIX}/bin
+MAN_INSTALL_PATH = ${PREFIX}/man/man1
+DOC_INSTALL_PATH = ${PREFIX}/share/doc/hashcash
 MAKEDEPEND = makedepend
 MSLIB = mslib 
 # here you can choose the regexp style your system has
@@@@ -16,9 +16,9 @@@@ MSLIB = mslib 
 # 	REGEXP = 
 REGEXP=-DREGEXP_POSIX
 COPT_DEBUG = -g -DDEBUG
-COPT_GENERIC = -O3
+COPT_GENERIC =
 COPT_GNU = -O3 -funroll-loops
-COPT_X86 = -O3 -funroll-loops -march=pentium-mmx -mmmx \
+COPT_X86 = -funroll-loops -march=pentium-mmx -mmmx \
 	-D_REENTRANT -D_THREAD_SAFE -fPIC
 COPT_MINGW = -O3 -funroll-loops -march=pentium-mmx -mmmx \
         -D_REENTRANT -D_THREAD_SAFE
@@@@ -28,7 +28,7 @@@@ COPT_PPC_LINUX = -O3 -funroll-loops -fno-inline -mcpu=
 LIB=.a
 # request static link of -lcrypto only
 LIBCRYPTO=/usr/lib/libcrypto.a
-EXES = hashcash$(EXE) sha1$(EXE) sha1test$(EXE)
+EXES = hashcash$(EXE)
 INSTALL = install
 POD2MAN = pod2man
 POD2HTML = pod2html
@@@@ -109,7 +109,7 @@@@ debug-openssl:
 	$(MAKE) debug "CFLAGS=$(CFLAGS) -DOPENSSL" "LDFLAGS=$(LDFLAGS) $(LIBCRYPTO)"
 
 
-build:	hashcash$(EXE) sha1$(EXE)
+build:	hashcash$(EXE)
 
 build-dll:      hashcash-dll$(EXE) sha1$(EXE)
 
@@@@ -132,7 +132,8 @@@@ all:	$(EXES)
 
 libhashcash$(LIB):	$(LIBOBJS)
 	$(DELETE) $@@
-	$(AR) rcs $@@ $(LIBOBJS)
+	$(AR) cr $@@ $(LIBOBJS)
+	$(RANLIB) $@@
 
 hashcash.dll:   $(LIBOBJS)
 	$(CC) -shared -o hashcash.dll $(LIBOBJS) \
@@@@ -162,13 +163,11 @@@@ sha1-hashcash.html:	sha1-hashcash.pod
 sha1-hashcash.txt: sha1-hashcash.pod
 	$(POD2TEXT) $? > $@@
 
-install:	hashcash sha1 hashcash.1 sha1-hashcash.1
-	$(INSTALL) -d $(INSTALL_PATH)
-	$(INSTALL) hashcash sha1 $(INSTALL_PATH)
-	$(INSTALL) -d $(MAN_INSTALL_PATH)
-	$(INSTALL) -m 644 hashcash.1 sha1-hashcash.1 $(MAN_INSTALL_PATH)
-	$(INSTALL) -d $(DOC_INSTALL_PATH)
-	$(INSTALL) -m 644 README LICENSE CHANGELOG $(DOC_INSTALL_PATH)
+install:	hashcash hashcash.1
+	$(BSD_INSTALL_PROGRAM) hashcash $(INSTALL_PATH)
+	$(BSD_INSTALL_MAN) hashcash.1 $(MAN_INSTALL_PATH)
+	$(BSD_INSTALL_DATA_DIR) $(DOC_INSTALL_PATH)
+	$(BSD_INSTALL_DATA) README LICENSE CHANGELOG $(DOC_INSTALL_PATH)
 
 depend:
 	$(MAKEDEPEND) -- -Y *.c *.h
@


1.2
log
@update to hashcash 1.20

from Armin Wolfermann <aw at osn.de> (maintainer)
sync with update-plist while here
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.1.1.1 2005/06/16 17:35:22 niallo Exp $
--- Makefile.orig	Tue Dec 20 22:54:48 2005
+++ Makefile	Wed Dec 21 13:39:55 2005
@@@@ -2,9 +2,9 @@@@ HC_VERS = 1.20
d20 1
a20 1
 COPT_DEBUG = -g
d29 1
a29 1
@@@@ -28,7 +28,7 @@@@ COPT_PPC_LINUX = -O3 -funroll-loops -fno
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.orig	Wed Mar 30 12:27:47 2005
+++ Makefile	Sat Jun 11 11:03:15 2005
@@@@ -2,9 +2,9 @@@@ HC_VERS = 1.17
d17 31
a47 1
@@@@ -130,7 +130,8 @@@@ all:	$(EXES)
d57 2
a58 1
@@@@ -161,12 +162,10 @@@@ sha1-hashcash.txt: sha1-hashcash.pod
d61 1
a61 1
 install:	hashcash sha1 hashcash.1 sha1-hashcash.1
d68 3
a70 2
+	$(BSD_INSTALL_PROGRAM) hashcash sha1 $(INSTALL_PATH)
+	$(BSD_INSTALL_MAN) hashcash.1 sha1-hashcash.1 $(MAN_INSTALL_PATH)
@


1.1.1.1
log
@Import mail/hashcash

The hashcash tool allows you to create hashcash stamps to attach to
emails you send, and to verify hashcash stamps attached to emails you
receive. Email senders attach hashcash stamps with the X-Hashcash:
header. A hashcash stamp constitutes a proof-of-work which takes a
parameterizable amount of work to compute for the sender. The
recipient can verify received stamps efficiently.

From: Armin Wolfermann <aw@@osn.de>

ok alek@@
@
text
@@


1.1.1.1.2.1
log
@MFC:
SECURITY update to hashcash 1.21
fix potential heap overflow bug reported by Andreas Seltenreich

from Armin Wolfermann (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.2 2005/12/23 12:55:05 steven Exp $
--- Makefile.orig	Tue Dec 20 22:54:48 2005
+++ Makefile	Wed Dec 21 13:39:55 2005
@@@@ -2,9 +2,9 @@@@ HC_VERS = 1.20
d17 1
a17 31
@@@@ -16,9 +16,9 @@@@ MSLIB = mslib 
 # 	REGEXP = 
 REGEXP=-DREGEXP_POSIX
 COPT_DEBUG = -g
-COPT_GENERIC = -O3
+COPT_GENERIC =
 COPT_GNU = -O3 -funroll-loops
-COPT_X86 = -O3 -funroll-loops -march=pentium-mmx -mmmx \
+COPT_X86 = -funroll-loops -march=pentium-mmx -mmmx \
 	-D_REENTRANT -D_THREAD_SAFE -fPIC
 COPT_MINGW = -O3 -funroll-loops -march=pentium-mmx -mmmx \
         -D_REENTRANT -D_THREAD_SAFE
@@@@ -28,7 +28,7 @@@@ COPT_PPC_LINUX = -O3 -funroll-loops -fno
 LIB=.a
 # request static link of -lcrypto only
 LIBCRYPTO=/usr/lib/libcrypto.a
-EXES = hashcash$(EXE) sha1$(EXE) sha1test$(EXE)
+EXES = hashcash$(EXE)
 INSTALL = install
 POD2MAN = pod2man
 POD2HTML = pod2html
@@@@ -109,7 +109,7 @@@@ debug-openssl:
 	$(MAKE) debug "CFLAGS=$(CFLAGS) -DOPENSSL" "LDFLAGS=$(LDFLAGS) $(LIBCRYPTO)"
 
 
-build:	hashcash$(EXE) sha1$(EXE)
+build:	hashcash$(EXE)
 
 build-dll:      hashcash-dll$(EXE) sha1$(EXE)
 
@@@@ -132,7 +132,8 @@@@ all:	$(EXES)
d27 1
a27 2
@@@@ -162,13 +163,11 @@@@ sha1-hashcash.html:	sha1-hashcash.pod
 sha1-hashcash.txt: sha1-hashcash.pod
d30 1
a30 1
-install:	hashcash sha1 hashcash.1 sha1-hashcash.1
d37 2
a38 3
+install:	hashcash hashcash.1
+	$(BSD_INSTALL_PROGRAM) hashcash $(INSTALL_PATH)
+	$(BSD_INSTALL_MAN) hashcash.1 $(MAN_INSTALL_PATH)
@

