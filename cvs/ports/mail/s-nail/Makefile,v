head	1.18;
access;
symbols
	OPENBSD_6_2:1.18.0.4
	OPENBSD_6_2_BASE:1.18
	OPENBSD_6_1:1.18.0.2
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.12.0.6
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.2
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.4
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.11.0.2
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.9.0.2
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.8.0.2
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	william_20130328:1.1.1.1
	william:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.01.29.06.08.51;	author czarkoff;	state Exp;
branches;
next	1.17;
commitid	Uh9BgqgBFLAkNrbR;

1.17
date	2017.01.18.12.43.32;	author czarkoff;	state Exp;
branches;
next	1.16;
commitid	Nbxw5aI2LoV4MGXR;

1.16
date	2016.10.22.20.55.05;	author czarkoff;	state Exp;
branches;
next	1.15;
commitid	oZK2bq4ELrv0Zf43;

1.15
date	2016.10.20.10.49.23;	author czarkoff;	state Exp;
branches;
next	1.14;
commitid	CbsnJbw8pcc1y8r0;

1.14
date	2016.09.13.16.12.14;	author naddy;	state Exp;
branches;
next	1.13;
commitid	LsYahYRn03mp1yEc;

1.13
date	2016.08.14.07.09.26;	author czarkoff;	state Exp;
branches;
next	1.12;
commitid	9PevXRDqGt7paycd;

1.12
date	2015.07.14.16.42.43;	author jca;	state Exp;
branches;
next	1.11;
commitid	VVdaMNbIPwX2Y0IU;

1.11
date	2015.02.03.17.41.58;	author jca;	state Exp;
branches;
next	1.10;
commitid	lXgQcSP2aWLfKEKz;

1.10
date	2015.01.03.18.00.47;	author jca;	state Exp;
branches;
next	1.9;
commitid	oGz4rFlC6TjzdkmW;

1.9
date	2014.04.21.14.00.22;	author ajacoutot;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2013.11.08.01.31.34;	author william;	state Exp;
branches;
next	1.7;

1.7
date	2013.11.07.03.34.58;	author william;	state Exp;
branches;
next	1.6;

1.6
date	2013.06.25.02.44.16;	author william;	state Exp;
branches;
next	1.5;

1.5
date	2013.06.20.08.26.13;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2013.06.17.19.30.44;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2013.05.02.02.11.53;	author william;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.29.03.54.33;	author william;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.03.29.03.54.33;	author william;	state Exp;
branches;
next	;

1.9.2.1
date	2015.01.08.08.37.15;	author jasper;	state Exp;
branches;
next	;
commitid	IhZ8eRrSSvnQdEhR;


desc
@@


1.18
log
@Update to s-nail 14.8.16
@
text
@# $OpenBSD: Makefile,v 1.17 2017/01/18 12:43:32 czarkoff Exp $

COMMENT=		enhanced, MIME capable Berkeley Mail

DISTNAME=		s-nail-14.8.16
CATEGORIES=		mail
HOMEPAGE=		https://www.sdaoden.eu/code.html\#s-mailx

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c crypto iconv idn ssl

MASTER_SITES=		https://www.sdaoden.eu/downloads/
MAINTAINER=		Dmitrij D. Czarkoff <czarkoff@@openbsd.org>

MAKE_FILE=		makefile
MAKE_FLAGS=		CC="${CC}" \
			CFLAGS="${CFLAGS}" \
			C_INCLUDE_PATH="${LOCALBASE}/include" \
			LDFLAGS="${LDFLAGS}" \
			LD_LIBRARY_PATH="${LOCALBASE}/lib" \
			MANDIR="${PREFIX}/man" \
			SYSCONFDIR="${SYSCONFDIR}" \
			WANT_AUTOCC=0 \
			WANT_EDITLINE=0 \
			WANT_NCL=1 \
			WANT_DOTLOCK=0 \
			SID=

.if !empty(DEBUG)
MAKE_FLAGS+=		WANT_DEBUG=1
FAKE_FLAGS+=		WANT_DEBUG=1
.endif

MAKE_ENV=		VERBOSE=Yes

LIB_DEPENDS=		converters/libiconv \
			devel/libidn

INSTALL_TARGET=		packager-install

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/nail
	mv ${DESTDIR}${SYSCONFDIR}/nail.rc ${PREFIX}/share/examples/nail

.include <bsd.port.mk>
@


1.17
log
@Update to s-nail 14.8.15.

While at it, fix homepage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/10/22 20:55:05 czarkoff Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.8.15
@


1.16
log
@Update to s-nail-14.8.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2016/10/20 10:49:23 czarkoff Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.8.14
d7 1
a7 1
HOMEPAGE=		https://www.sdaoden.eu/code.html#s-mailx
@


1.15
log
@update to s-nail 14.8.12

While at it switch from libedit to s-nail's own line editing function to
avoid bugs with non-ASCII input in various places.  (Changing setlocale
call in main.c to use LC_CTYPE solves most of them, but some remain, eg.
saving attachments with non-ASCII names.)

With this commit I take maintainership from william@@

OK william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2016/09/13 16:12:14 naddy Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.8.12
@


1.14
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2016/08/14 07:09:26 czarkoff Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.8.9
d12 1
a12 1
WANTLIB += c crypto edit iconv idn ssl termcap
d15 1
a15 1
MAINTAINER=		William Yodlowsky <william@@openbsd.org>
d26 2
a27 2
			WANT_EDITLINE=1 \
			WANT_NCL=0 \
d30 5
@


1.13
log
@update to s-nail-14.8.9

OK william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/07/14 16:42:43 jca Exp $
d12 1
a12 1
WANTLIB += c crypto edit idn ssl termcap
a16 2
MODULES=		converters/libiconv

d33 2
a34 1
LIB_DEPENDS=		devel/libidn
@


1.12
log
@Update to s-nail-14.8.3

This update does not include the new "dotlock" program since there's no
way to make it work out of the box on OpenBSD.

Enable tests while here.

Feedback from Steffen Nurpmeso (upstream), ok william@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/02/03 17:41:58 jca Exp $
d5 1
a5 2
DISTNAME=		s-nail-14.8.3
DISTFILES=		${DISTNAME:S/./_/g}.tar.gz
d7 1
a7 1
HOMEPAGE=		http://sdaoden.users.sourceforge.net/code.html#s-nail
d14 1
a14 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=s-nail/}
d24 1
a24 1
			LD_LIBRARY_PATH=${LOCALBASE}/lib \
d29 4
a32 1
			WANT_PRIVSEP=0
d40 2
a41 3
	ln -sf ${TRUEPREFIX}/bin/s-nail ${PREFIX}/bin/nail
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/s-nail
	mv ${DESTDIR}${SYSCONFDIR}/s-nail.rc ${PREFIX}/share/examples/s-nail
@


1.11
log
@Bugfix update to s-nail-14.7.11

From "trondd" on ports@@.

"go for it" william@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/01/03 18:00:47 jca Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.7.11
d26 1
d28 3
a30 1
			WANT_EDITLINE=1
a35 1
NO_TEST=		Yes
@


1.10
log
@SECURITY update to s-nail-14.7.10.

Fixes for CVE-2004-2771 and CVE-2014-7844 ("shell command injection via
crafted email addresses").

Reminder and initial patch by "trondd" on ports@@.
Ack'd by william@@ (MAINTAINER) who returned EBUSY.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/04/21 14:00:22 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.7.10
@


1.9
log
@Sync wantlib for kerberos removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/11/08 01:31:34 william Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.4.5
a8 1
REVISION=		0
d13 1
a13 1
WANTLIB += c crypto idn ssl
d21 2
a22 1
MAKE_FLAGS=		CFLAGS="${CFLAGS}" \
d28 1
@


1.9.2.1
log
@SECURITY update to s-nail-14.7.10.

Fixes for CVE-2004-2771 and CVE-2014-7844 ("shell command injection via
crafted email addresses").
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/01/03 18:00:47 jca Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.7.10
d9 1
d14 1
a14 1
WANTLIB += c crypto edit idn ssl termcap
d22 1
a22 2
MAKE_FLAGS=		CC="${CC}" \
			CFLAGS="${CFLAGS}" \
a27 1
MAKE_ENV=		VERBOSE=Yes
@


1.8
log
@Update to 14.4.5, fixing the package build in the process
(14.4.4 disappeared upstream)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/11/07 03:34:58 william Exp $
d9 1
d14 1
a14 2
WANTLIB += asn1 c com_err crypto gssapi heimbase
WANTLIB += idn krb5 roken ssl wind
d27 1
a27 2
			WANT_EDITLINE=1 \
			WANT_GSSAPI=1
@


1.7
log
@Update to 14.4.4; bugfixes and requested by the author

Testing and ok jca@@
kerberos bits ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/06/25 02:44:16 william Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.4.4
@


1.6
log
@Upgrade to s-nail-14.3.2, which fixes a bunch of bugs.

see http://sourceforge.net/p/s-nail/code/ci/master/tree/NEWS for details.

ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/06/20 08:26:13 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.3.2
a8 1
REVISION=		2
d21 8
a28 4
MAKE_FLAGS=		CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
                        LDFLAGS="${LDFLAGS} -L${LOCALBASE}/lib" \
			SYSCONFDIR=${SYSCONFDIR} \
			CONFIG=CUSTOM
d32 1
@


1.5
log
@No need for pthread.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/06/20 06:54:37 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		s-nail-14.2.2
@


1.4
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/06/17 19:30:44 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
d15 1
a15 1
WANTLIB += idn krb5 pthread roken ssl wind
@


1.3
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/05/02 02:11:53 william Exp $
d9 1
a9 1
REVISION=		0
d14 1
a14 1
WANTLIB += asn1 c com_err crypto gssapi heimbase heimntlm hx509
@


1.2
log
@Bugfix update to s-nail 14.2.2

Thanks to jca -at- wxcvbn.org whose post inspired
sdaoden -at- gmail.com to roll a bugfix release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/03/29 03:54:33 william Exp $
d9 1
d13 3
a15 1
WANTLIB=		c crypto gssapi idn krb5 ssl
d20 1
a20 1
MODULES=		devel/gettext
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 2
a6 2
DISTNAME=		s-nail-14.2
DISTFILES=		${DISTNAME:S/./_/}.tar.gz
@


1.1.1.1
log
@Import s-nail-14.2.

S-nail is a fork of Heirloom mailx, formerly known as nail.  It is a mail user
agent derived from Berkeley Mail 8.1 and is intended to provide the
functionality of the POSIX.2 mailx command with additional support for MIME
messages, Maildir, POP3, IMAP, SMTP, threading, spam control, and other
features.

ok sthen@@
@
text
@@
