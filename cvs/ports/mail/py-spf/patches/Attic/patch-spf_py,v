head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.10.04.09.33.03;	author giovanni;	state dead;
branches;
next	1.1;

1.1
date	2012.11.12.09.32.55;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.2
log
@
Bugfix update to 2.0.8
ok benoit@@
@
text
@$OpenBSD: patch-spf_py,v 1.1 2012/11/12 09:32:55 giovanni Exp $
--- spf.py.orig	Mon Nov 12 10:23:41 2012
+++ spf.py	Mon Nov 12 10:24:10 2012
@@@@ -1129,7 +1129,7 @@@@ class query(object):
             try:
                 return [''.join(s.decode("ascii") for s in a)
                     for a in self.dns(domainname, 'TXT')]
-            except UnicodeEncodeError:
+            except UnicodeError:
                 raise PermError('Non-ascii character in SPF TXT record.')
         return []
     def dns_99(self, domainname):
@@@@ -1138,7 +1138,7 @@@@ class query(object):
             try:
                 return [''.join(s.decode("ascii") for s in a)
                     for a in self.dns(domainname, 'SPF')]
-            except UnicodeEncodeError:
+            except UnicodeError:
                 raise PermError('Non-ascii character in SPF record.')
         return []
 
@


1.1
log
@
A non-ascii spf record should not crash py-spf.
@
text
@d1 1
a1 1
$OpenBSD$
@

