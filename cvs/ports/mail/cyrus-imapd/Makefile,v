head	1.109;
access;
symbols
	OPENBSD_6_1:1.101.0.2
	OPENBSD_6_1_BASE:1.101
	OPENBSD_6_0:1.98.0.2
	OPENBSD_6_0_BASE:1.98
	OPENBSD_5_9:1.95.0.2
	OPENBSD_5_9_BASE:1.95
	OPENBSD_5_8:1.92.0.4
	OPENBSD_5_8_BASE:1.92
	OPENBSD_5_7:1.86.0.4
	OPENBSD_5_7_BASE:1.86
	OPENBSD_5_6:1.86.0.2
	OPENBSD_5_6_BASE:1.86
	OPENBSD_5_5:1.80.0.4
	OPENBSD_5_5_BASE:1.80
	OPENBSD_5_4:1.80.0.2
	OPENBSD_5_4_BASE:1.80
	OPENBSD_5_3:1.76.0.2
	OPENBSD_5_3_BASE:1.76
	OPENBSD_5_2:1.73.0.2
	OPENBSD_5_2_BASE:1.73
	OPENBSD_5_1_BASE:1.70
	OPENBSD_5_1:1.70.0.2
	OPENBSD_5_0:1.60.0.2
	OPENBSD_5_0_BASE:1.60
	OPENBSD_4_9:1.54.0.2
	OPENBSD_4_9_BASE:1.54
	OPENBSD_4_8:1.32.0.2
	OPENBSD_4_8_BASE:1.32
	OPENBSD_4_7:1.31.0.2
	OPENBSD_4_7_BASE:1.31
	OPENBSD_4_6:1.27.0.2
	OPENBSD_4_6_BASE:1.27
	OPENBSD_4_5:1.25.0.2
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.22.0.2
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.14.0.2
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.11.0.2
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	alek_20050327:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.109
date	2017.08.17.12.15.15;	author ajacoutot;	state Exp;
branches;
next	1.108;
commitid	x6bhjTggw54AVm6E;

1.108
date	2017.08.17.05.33.01;	author ajacoutot;	state Exp;
branches;
next	1.107;
commitid	7HaEYPBs8XNYLXUT;

1.107
date	2017.07.26.22.45.25;	author sthen;	state Exp;
branches;
next	1.106;
commitid	tD4MFrpYYDDL2UFT;

1.106
date	2017.07.16.19.18.59;	author espie;	state Exp;
branches;
next	1.105;
commitid	tt0GhWK5c4uf9ILG;

1.105
date	2017.06.22.08.54.16;	author ajacoutot;	state Exp;
branches;
next	1.104;
commitid	38A5LzF74zf2ktLi;

1.104
date	2017.05.28.15.48.36;	author ajacoutot;	state Exp;
branches;
next	1.103;
commitid	wCnnEghOnQEBT18z;

1.103
date	2017.05.28.15.46.11;	author ajacoutot;	state Exp;
branches;
next	1.102;
commitid	5tK0B3xUnJddvTII;

1.102
date	2017.05.09.07.33.33;	author ajacoutot;	state Exp;
branches;
next	1.101;
commitid	JopYbRTEH3rFBUag;

1.101
date	2017.02.06.20.28.32;	author sthen;	state Exp;
branches;
next	1.100;
commitid	o4jH3JaEdON0pzgr;

1.100
date	2016.10.18.07.20.17;	author ajacoutot;	state Exp;
branches;
next	1.99;
commitid	scyajOMYKtqQcJbJ;

1.99
date	2016.07.30.14.19.13;	author ajacoutot;	state Exp;
branches;
next	1.98;
commitid	z4CGzq8hxNs89te6;

1.98
date	2016.05.21.07.12.16;	author ajacoutot;	state Exp;
branches;
next	1.97;
commitid	dHrxijCfLN8Tzd5N;

1.97
date	2016.04.02.09.28.31;	author ajacoutot;	state Exp;
branches;
next	1.96;
commitid	Qk5snIgQThH3NYDG;

1.96
date	2016.03.16.21.19.38;	author naddy;	state Exp;
branches;
next	1.95;
commitid	eS3Ayl3CL8hkKETd;

1.95
date	2015.12.02.09.44.25;	author ajacoutot;	state Exp;
branches;
next	1.94;
commitid	QHQn5x2fXzxEV8ne;

1.94
date	2015.09.11.07.26.07;	author ajacoutot;	state Exp;
branches;
next	1.93;
commitid	gEX47zHppWtZc7cI;

1.93
date	2015.08.12.06.18.40;	author ajacoutot;	state Exp;
branches;
next	1.92;
commitid	GxiyMsv0eu2IRQcl;

1.92
date	2015.07.07.09.47.27;	author ajacoutot;	state Exp;
branches
	1.92.4.1;
next	1.91;
commitid	JlxiCjY5nJJLi3dE;

1.91
date	2015.05.22.06.05.43;	author ajacoutot;	state Exp;
branches;
next	1.90;
commitid	MthlFiipxBnP9pC8;

1.90
date	2015.05.16.15.19.00;	author kettenis;	state Exp;
branches;
next	1.89;
commitid	KLqbulCl2j9BmEg9;

1.89
date	2015.05.11.06.03.40;	author ajacoutot;	state Exp;
branches;
next	1.88;
commitid	hh8ss6B2U7ryzbVN;

1.88
date	2015.04.24.14.51.26;	author ajacoutot;	state Exp;
branches;
next	1.87;
commitid	SytOCTNGMCY1Q89B;

1.87
date	2015.03.15.08.51.07;	author ajacoutot;	state Exp;
branches;
next	1.86;
commitid	ahJfNkqGNue6WKpR;

1.86
date	2014.07.24.17.53.17;	author jturner;	state Exp;
branches
	1.86.4.1;
next	1.85;
commitid	pz8xu9T4DqQC1tqO;

1.85
date	2014.06.19.08.38.31;	author ajacoutot;	state Exp;
branches;
next	1.84;
commitid	S8b9kZQX3MnPerJu;

1.84
date	2014.06.16.15.08.43;	author ajacoutot;	state Exp;
branches;
next	1.83;
commitid	XwthEK5VENLD3Pxz;

1.83
date	2014.06.14.10.34.45;	author sthen;	state Exp;
branches;
next	1.82;
commitid	HiKZ10xJk2o55vyF;

1.82
date	2014.04.21.12.35.45;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2014.03.24.18.19.21;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2013.06.20.06.54.36;	author ajacoutot;	state Exp;
branches
	1.80.4.1;
next	1.79;

1.79
date	2013.06.17.19.30.43;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2013.03.21.09.46.02;	author sthen;	state Exp;
branches;
next	1.77;

1.77
date	2013.03.11.11.23.50;	author espie;	state Exp;
branches;
next	1.76;

1.76
date	2012.12.10.15.25.06;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2012.12.03.11.17.03;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2012.08.28.08.06.15;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2012.04.28.10.20.23;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2012.04.20.20.54.16;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2012.03.12.17.21.10;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2012.01.06.15.34.17;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2011.12.31.08.04.04;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.67;

1.67
date	2011.12.02.14.36.15;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2011.11.06.17.34.16;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2011.10.05.06.25.34;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2011.09.12.18.02.35;	author naddy;	state Exp;
branches;
next	1.62;

1.62
date	2011.09.09.06.46.39;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2011.09.02.08.24.28;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2011.07.22.05.58.40;	author ajacoutot;	state Exp;
branches
	1.60.2.1;
next	1.59;

1.59
date	2011.07.05.22.58.48;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2011.06.22.06.51.09;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2011.06.02.13.41.39;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2011.04.13.15.18.23;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2011.03.30.16.10.28;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2010.12.20.14.39.31;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2010.12.14.18.45.54;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2010.12.12.11.52.30;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2010.12.05.22.20.37;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2010.12.04.14.11.53;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2010.12.03.15.52.51;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2010.12.03.15.37.31;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2010.12.02.11.30.43;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2010.12.02.09.26.15;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2010.12.02.08.56.32;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2010.12.01.19.57.01;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2010.11.29.14.18.17;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2010.11.26.14.50.10;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2010.11.19.07.23.06;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.11.12.06.26.40;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.11.02.07.08.04;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2010.10.29.12.54.43;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.10.29.09.26.58;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2010.10.18.19.59.15;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2010.09.03.15.34.15;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.07.16.12.33.28;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2009.12.27.17.49.51;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2009.10.08.13.18.10;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2009.09.10.07.20.00;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2009.09.03.18.51.52;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2009.03.25.15.44.41;	author ajacoutot;	state Exp;
branches
	1.27.2.1;
next	1.26;

1.26
date	2009.03.16.13.28.57;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2008.10.21.08.36.25;	author ajacoutot;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2008.10.02.20.32.19;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2008.08.20.13.15.52;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2008.06.14.17.22.39;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2008.04.23.13.33.22;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2008.03.15.10.07.20;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2007.12.11.11.04.19;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2007.10.25.21.05.33;	author steven;	state Exp;
branches;
next	1.17;

1.17
date	2007.10.25.09.42.40;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2007.08.29.20.08.17;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2007.08.28.13.24.51;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2007.06.01.15.23.12;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.04.08.05.00;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2007.03.31.09.33.21;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2006.12.14.09.07.56;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2006.11.25.19.51.14;	author steven;	state Exp;
branches;
next	1.9;

1.9
date	2006.10.27.06.05.35;	author steven;	state Exp;
branches;
next	1.8;

1.8
date	2006.10.25.07.51.58;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2006.09.22.09.08.24;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2006.08.03.13.09.09;	author espie;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2006.04.15.08.15.01;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2006.04.08.20.46.20;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2006.03.31.16.48.05;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2006.02.08.19.31.13;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.27.18.01.50;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.27.18.01.50;	author alek;	state Exp;
branches;
next	;

1.6.2.1
date	2006.11.12.09.02.03;	author sturm;	state Exp;
branches;
next	;

1.25.2.1
date	2009.09.15.02.42.37;	author william;	state Exp;
branches;
next	;

1.27.2.1
date	2009.11.10.02.56.51;	author william;	state Exp;
branches;
next	;

1.54.2.1
date	2011.05.10.14.22.15;	author gsoares;	state Exp;
branches;
next	;

1.60.2.1
date	2011.09.14.18.35.12;	author gsoares;	state Exp;
branches;
next	1.60.2.2;

1.60.2.2
date	2011.10.05.14.54.20;	author gsoares;	state Exp;
branches;
next	1.60.2.3;

1.60.2.3
date	2012.01.06.16.23.31;	author ajacoutot;	state Exp;
branches;
next	;

1.80.4.1
date	2014.06.19.08.40.22;	author ajacoutot;	state Exp;
branches;
next	;
commitid	Ks23fp6zvQ2IFYKa;

1.86.4.1
date	2015.07.07.09.27.18;	author ajacoutot;	state Exp;
branches;
next	;
commitid	qs4uQR60aAkdEYDn;

1.92.4.1
date	2015.08.24.08.58.14;	author ajacoutot;	state Exp;
branches;
next	1.92.4.2;
commitid	lbrQ90kRXnE18jFK;

1.92.4.2
date	2015.12.02.09.57.48;	author ajacoutot;	state Exp;
branches;
next	;
commitid	sfVW7bpLkbGpHzBz;


desc
@@


1.109
log
@Update to cyrus-imapd-3.0.3.
@
text
@# $OpenBSD: Makefile,v 1.108 2017/08/17 05:33:01 ajacoutot Exp $

PORTROACH=		limitw:1,even

COMMENT=		Cyrus IMAP server

V=			3.0.3
DISTNAME=		cyrus-imapd-${V}

SHARED_LIBS +=	cyrus                     0.0 # 0.0
SHARED_LIBS +=	cyrus_imap                0.0 # 0.0
SHARED_LIBS +=	cyrus_min                 0.0 # 0.0
SHARED_LIBS +=	cyrus_sieve               0.0 # 0.0

CATEGORIES=		mail

HOMEPAGE=		http://www.cyrusimap.org/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# CMU - see COPYING file in package
PERMIT_PACKAGE_CDROM=	yes

WANTLIB += c com_err crypto icudata icuuc jansson m pcre pcreposix
WANTLIB += pthread sasl2 ssl ${COMPILER_LIBCXX} uuid z
WANTLIB += perl # uses perl ABI

MASTER_SITES=		http://cyrusimap.org/releases/ \
			ftp://ftp.cyrusimap.org/cyrus-imapd/ \
			ftp://ftp.cyrusimap.org/cyrus-imapd/OLD-VERSIONS/

USE_GMAKE=		Yes

BUILD_DEPENDS=		textproc/py-sphinx

LIB_DEPENDS=		devel/jansson \
			devel/pcre \
			security/cyrus-sasl2 \
			sysutils/e2fsprogs \
			textproc/icu4c

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib" \
			cyrus_cv_sse42=no
CONFIGURE_ARGS=		--bindir=${PREFIX}/cyrus/bin \
			--libexec=${PREFIX}/cyrus/libexec \
			--sbindir=${PREFIX}/cyrus/sbin \
			--with-sasl=${LOCALBASE} \
			--with-cyrus-group=_cyrus \
			--with-cyrus-user=_cyrus \
			--with-syslogfacility=MAIL \
			--disable-gssapi \
			--enable-autocreate \
			--enable-idled \
			--enable-murder \
			--enable-nntp

# XXX FLAVOR
CONFIGURE_ARGS +=	--without-snmp

# XXX notyet; FLAVOR
CONFIGURE_ARGS +=	--without-clamav \
			--disable-http

# --mandir is overriden by the ports infrastructure
FAKE_FLAGS=		mandir=${PREFIX}/cyrus/man

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/{doc,examples}/cyrus-imapd
	cp -R ${WRKSRC}/doc/[!examples]* ${PREFIX}/share/doc/cyrus-imapd
	cp -R ${WRKSRC}/doc/examples/* ${PREFIX}/share/examples/cyrus-imapd
	${INSTALL_DATA} ${WRKSRC}/COPYING ${PREFIX}/share/doc/cyrus-imapd
	cp -R ${WRKSRC}/tools ${PREFIX}/share/examples/cyrus-imapd/
	${INSTALL_DATA} ${FILESDIR}/imapd.conf \
		${PREFIX}/share/examples/cyrus-imapd/
	rm -r ${PREFIX}/libdata/perl5/${MACHINE_ARCH}-openbsd \
		${PREFIX}/share/doc/cyrus-imapd/text \
		${PREFIX}/share/examples/cyrus-imapd/tools/vzic
# cleanup
	rm -r ${PREFIX}/share/doc/cyrus-imapd/html/{_*,.buildinfo}
	find ${PREFIX}/share/{doc,examples}/cyrus-imapd -name '.gitignore' -or \
		-name '*.orig' -exec rm '{}' \+

.include <bsd.port.mk>
@


1.108
log
@Cyrus switched to an odd-even release cycle, set PORTROACH marker
accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2017/07/26 22:45:25 sthen Exp $
d7 1
a7 1
V=			3.0.2
a8 1
REVISION=		0
@


1.107
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.106 2017/07/16 19:18:59 espie Exp $
@


1.106
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2017/06/22 08:54:16 ajacoutot Exp $
d7 1
@


1.105
log
@Update to cyrus-imapd-3.0.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2017/05/28 15:48:36 ajacoutot Exp $
d23 1
a23 1
WANTLIB += pthread sasl2 ssl ${LIBCXX} uuid z
@


1.104
log
@Indent.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2017/05/28 15:46:11 ajacoutot Exp $
d5 1
a5 1
V=			3.0.1
@


1.103
log
@Major update to cyrus-imapd-3.0.1.
- cleanup and fix some ports specific stuff while here

Refer to upstream for changes and upgrade notes.
Note that altnamespace and unixhierarchysep are now on by default on, to match
the behaviour of most other IMAP servers in the world.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2017/05/09 07:33:33 ajacoutot Exp $
d3 1
a3 1
COMMENT=	Cyrus IMAP server
d5 2
a6 2
V=		3.0.1
DISTNAME=	cyrus-imapd-${V}
d13 1
a13 1
CATEGORIES=	mail
d15 1
a15 1
HOMEPAGE=	http://www.cyrusimap.org/
d17 1
a17 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d26 30
a55 30
MASTER_SITES=	http://cyrusimap.org/releases/ \
		ftp://ftp.cyrusimap.org/cyrus-imapd/ \
		ftp://ftp.cyrusimap.org/cyrus-imapd/OLD-VERSIONS/

USE_GMAKE=	Yes

BUILD_DEPENDS=	textproc/py-sphinx

LIB_DEPENDS=	devel/jansson \
		devel/pcre \
		security/cyrus-sasl2 \
		sysutils/e2fsprogs \
		textproc/icu4c

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		cyrus_cv_sse42=no
CONFIGURE_ARGS=	--bindir=${PREFIX}/cyrus/bin \
		--libexec=${PREFIX}/cyrus/libexec \
		--sbindir=${PREFIX}/cyrus/sbin \
		--with-sasl=${LOCALBASE} \
		--with-cyrus-group=_cyrus \
		--with-cyrus-user=_cyrus \
		--with-syslogfacility=MAIL \
		--disable-gssapi \
		--enable-autocreate \
		--enable-idled \
		--enable-murder \
		--enable-nntp
d58 1
a58 1
CONFIGURE_ARGS+=--without-snmp
d61 2
a62 2
CONFIGURE_ARGS+=--without-clamav \
		--disable-http
d65 1
a65 1
FAKE_FLAGS=	mandir=${PREFIX}/cyrus/man
@


1.102
log
@Update to cyrus-imapd-2.5.11.
@
text
@d1 1
a1 6
# $OpenBSD: Makefile,v 1.101 2017/02/06 20:28:32 sthen Exp $

# WARNING: mmap(2) is not fully POSIX on OpenBSD so cyrus needs to
# map_refresh on every lock which will incure a performance penalty
# under high load. See this bugreport for details:
#    http://bugzilla.cyrusimap.org/show_bug.cgi?id=3370
d5 1
a5 1
V=		2.5.11
d22 2
a23 2
WANTLIB += c com_err crypto db jansson m pcre pcreposix pthread sasl2
WANTLIB += ssl uuid z
d30 5
a34 2
LIB_DEPENDS=	databases/db/v4 \
		devel/jansson \
d37 2
a38 1
		sysutils/e2fsprogs
d42 5
a46 4
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	--with-cyrus-prefix=${PREFIX}/cyrus \
		--with-bdb-libdir=${LOCALBASE}/lib/db4 \
		--with-bdb-incdir=${LOCALBASE}/include/db4 \
d51 1
d64 2
a65 19
SENDMAILREF=	lib/imapoptions man/imapd.conf.5
SIEVEREF=	lib/imapoptions man/imapd.conf.5 \
		tools/masssievec tools/rehash tools/translatesieve \
		tools/upgradesieve doc/install-upgrade.html

pre-configure:
.for i in lib/imapoptions man/imapd.conf.5
	sed -i -e "s,/usr/cyrus,${PREFIX}/cyrus,g;" \
		-e "s,/usr/local/bin/gdb,/usr/bin/gdb,g" \
		${WRKSRC}/${i}
.endfor

.for i in ${SENDMAILREF}
	sed -i "s,/usr/lib/sendmail,/usr/sbin/sendmail,g" ${WRKSRC}/${i}
.endfor

.for i in ${SIEVEREF}
	sed -i "s,/usr/sieve,/var/sieve,g" ${WRKSRC}/${i}
.endfor
d68 3
a70 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/{doc,examples/cyrus-imapd}
	cp -R ${WRKSRC}/doc ${PREFIX}/share/doc/cyrus-imapd
a72 2
	${INSTALL_DATA} ${WRKSRC}/master/conf/*.conf \
		${PREFIX}/share/examples/cyrus-imapd/
d75 1
a75 2
	mv ${PREFIX}/man ${PREFIX}/cyrus/man
	rm -rf ${PREFIX}/libdata/perl5/${MACHINE_ARCH}-openbsd \
d77 5
a81 2
		${PREFIX}/share/examples/cyrus-imapd/tools/vzic \
		${PREFIX}/cyrus/man/[!man]*
@


1.101
log
@Add perl to WANTLIB, second batch. This used to be done automatically but
since SHARED_ONLY support was removed across the ports tree the perl module
no longer adds it, so it must be done manually for any perl ports that
provide perl shared-library modules (i.e. libdata/perl5/site_perl/$ARCH/*.so)
and you must not remove them from WANTLIB even if they show as "Extra".
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2016/10/18 07:20:17 ajacoutot Exp $
d10 1
a10 2
V=		2.5.10
REVISION=	0
@


1.100
log
@Update to cyrus-imapd-2.5.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2016/07/30 14:19:13 ajacoutot Exp $
d11 1
d30 1
@


1.99
log
@Update to cyrus-imapd-2.5.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2016/05/21 07:12:16 ajacoutot Exp $
d10 1
a10 1
V=		2.5.9
a38 2

NO_TEST=	Yes
@


1.98
log
@Update to cyrus-imapd-2.5.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2016/04/02 09:28:31 ajacoutot Exp $
d10 1
a10 1
V=		2.5.8
@


1.97
log
@Add an @@extra marker for mandoc.db.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2016/03/16 21:19:38 naddy Exp $
d10 1
a10 1
V=		2.5.7
a11 1
REVISION=	0
d64 1
a64 1
SENDMAILREF=	lib/imapoptions lib/imapopts.c man/imapd.conf.5
@


1.96
log
@remove SHARED_ONLY from ports that use only the gnu module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2015/12/02 09:44:25 ajacoutot Exp $
d12 1
@


1.95
log
@SECURITY update to cyrus-imapd-2.5.7.
CVE-2015-8077, CVE-2015-8078: protect against integer overflow in urlfetch
range checks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2015/09/11 07:26:07 ajacoutot Exp $
a6 2

SHARED_ONLY=	Yes
@


1.94
log
@Update to cyrus-imapd-2.5.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2015/08/12 06:18:40 ajacoutot Exp $
d12 1
a12 1
V=		2.5.6
d73 1
a73 1
	perl -pi -e "s,/usr/cyrus,${PREFIX}/cyrus,g;" \
d79 1
a79 1
	perl -pi -e "s,/usr/lib/sendmail,/usr/sbin/sendmail,g" ${WRKSRC}/${i}
d83 1
a83 1
	perl -pi -e "s,/usr/sieve,/var/sieve,g" ${WRKSRC}/${i}
@


1.93
log
@SECURITY update to cyrus-imapd-2.5.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2015/07/07 09:47:27 ajacoutot Exp $
d12 1
a12 1
V=		2.5.5
@


1.92
log
@SECURITY update to cyrus-imapd-2.5.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2015/05/22 06:05:43 ajacoutot Exp $
d12 1
a12 1
V=		2.5.4
@


1.92.4.1
log
@SECURITY: merge commits from version 2.5.5:
imapd: autocreate INBOX folder, not everything else
imapd: don't skip over specialuse handling when built with --enable-autocreate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2015/07/07 09:47:27 ajacoutot Exp $
a13 1
REVISION=	0
@


1.92.4.2
log
@CVE-2015-8077, CVE-2015-8078: protect against integer overflow in urlfetch
range checks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92.4.1 2015/08/24 08:58:14 ajacoutot Exp $
d14 1
a14 1
REVISION=	1
@


1.91
log
@Update to cyrus-imapd-2.5.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2015/05/16 15:19:00 kettenis Exp $
d12 1
a12 1
V=		2.5.3
@


1.90
log
@Drop --with-com_err such that we don't try to link the static libcom_err.a
that contains non-PIC code into a shared library.

ok (and help from) ajacoutot@@, gsoares@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2015/05/11 06:03:40 ajacoutot Exp $
d12 1
a12 1
V=		2.5.2
a13 1
REVISION=	0
@


1.89
log
@Update to cyrus-imapd-2.5.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2015/04/24 14:51:26 ajacoutot Exp $
d14 1
d30 1
a30 1
WANTLIB += c crypto db jansson m pcre pcreposix pthread sasl2
a50 1
		--with-com_err=${LOCALBASE} \
@


1.88
log
@Update to cyrus-imapd-2.5.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2015/03/15 08:51:07 ajacoutot Exp $
d12 1
a12 1
V=		2.5.1
@


1.87
log
@Update to cyrus-imapd-2.5.0.
http/caldav support is disabled for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/07/24 17:53:17 jturner Exp $
d12 1
a12 1
V=		2.5.0
d26 1
a26 1
# CMU - see COPYRIGHT file in package
d70 1
a70 1
		tools/upgradesieve doc/text/install-upgrade
d88 4
a91 5
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/cyrus-imapd
	${INSTALL_DATA} ${WRKSRC}/COPYRIGHT ${PREFIX}/share/doc/cyrus-imapd
	cd ${WRKSRC}/doc; tar cf - text | \
		tar xf - -C ${PREFIX}/share/doc/cyrus-imapd
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/cyrus-imapd
d96 1
a96 4
	cd ${WRKSRC}; tar cf - tools | \
		tar xf - -C ${PREFIX}/share/examples/cyrus-imapd
	${INSTALL_DATA_DIR} ${PREFIX}/cyrus/man
	mv ${PREFIX}/man/man* ${PREFIX}/cyrus/man/
d98 3
a100 2
		${PREFIX}/share/doc/cyrus-imapd/text/{.deps,.gitignore,.libs} \
		${PREFIX}/share/examples/cyrus-imapd/tools/vzic
@


1.86
log
@Install pop3d.8 as cyrus-pop3d.8 so it doesn't conflict with mail/pop3d.

ok sthen@@ zhuk@@ "It's fine for me" ajacoutot@@
@
text
@d1 6
a6 1
# $OpenBSD: Makefile,v 1.85 2014/06/19 08:38:31 ajacoutot Exp $
d12 1
a12 1
V=		2.4.17
d14 5
a18 1
REVISION=	8
d29 2
a30 1
WANTLIB += c crypto db pcre pcreposix pthread sasl2 ssl z
d37 1
d39 2
a40 1
		security/cyrus-sasl2
a43 2
PATCH_LIST=	patch-*

d47 1
a47 2
CONFIGURE_ARGS=	--with-service-path=${LOCALBASE}/libexec/cyrus-imapd \
		--with-bdb \
d50 2
d54 2
a55 2
		--with-sasl=${LOCALBASE} \
		--with-com_err \
d58 4
a61 18
		--enable-nntp \
		--without-zephyr \
		--without-snmp \
		--with-perl \
		--with-ldap=no \
		--with-mysql=no \
		--with-pgsql=no \
		--with-sqlite=no

FLAVORS=	drac
FLAVOR?=

.if ${FLAVOR:Mdrac}
BUILD_DEPENDS+=	mail/drac
PATCH_LIST+=	drac-patch-imap_Makefile_in
pre-patch:
	cd ${WRKSRC} && ${PATCH} -s -z .drac -p1 < contrib/drac_auth.patch
.endif
d63 5
a67 1
MAN8=		fetchnews idled master imapd deliver pop3d
d73 8
a80 3
	${SUBST_CMD} ${WRKSRC}/{lib/imapoptions,man/imapd.conf.5}
.for i in ${MAN8}
	perl -pi -e "s,${i}\(8\),cyrus-${i}\(8\),g" ${WRKSRC}/man/*.[0-9]
d82 1
d99 5
a103 4
.for i in ${MAN8}
	${INSTALL_MAN} ${PREFIX}/man/man8/${i}.8 ${PREFIX}/man/man8/cyrus-$i.8
	rm -f ${PREFIX}/man/man8/${i}.8
.endfor
@


1.86.4.1
log
@SECURITY update to cyrus-imapd-2.4.18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/07/24 17:53:17 jturner Exp $
d7 1
a7 1
V=		2.4.18
d9 1
a9 1
REVISION=	0
@


1.85
log
@One more time_t patch and merge with pkgsrc.

tested by "nl3dee", thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/06/16 15:08:43 ajacoutot Exp $
d9 1
a9 1
REVISION=	7
d66 1
a66 1
MAN8=		fetchnews idled master imapd deliver
@


1.84
log
@Fix sendmail delivery using cyrusv2.

reported by Takaaki Kobayashi
patch from guenther@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/06/14 10:34:45 sthen Exp $
d9 1
a9 1
REVISION=	6
@


1.83
log
@@@comment zero-byte perl .bs files in all packages which don't have p5-* PKGNAMEs
and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/04/21 12:35:45 ajacoutot Exp $
d9 1
a9 1
REVISION=	5
@


1.82
log
@Drop kerberos support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2014/03/24 18:19:21 ajacoutot Exp $
d9 1
a9 1
REVISION=	4
@


1.81
log
@Drop now unneeded CONFIGURE_ARGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/06/20 06:54:36 ajacoutot Exp $
d9 1
a9 1
REVISION=	3
d20 1
a20 2
WANTLIB += asn1 c com_err crypto lib/db4/db>=4 gssapi heimbase
WANTLIB += krb5 pcre pcreposix pthread roken sasl2 ssl wind z
d35 2
a36 3
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include $$(krb5-config --cflags)" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBS="$$(krb5-config --libs gssapi)"
@


1.80
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/06/17 19:30:43 ajacoutot Exp $
a49 1
		--without-libwrap \
@


1.80.4.1
log
@Fix crasher in mail delivery due to time_t expected to be 32-bits.
tested by "nl3dee", thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/06/20 06:54:36 ajacoutot Exp $
d9 1
a9 1
REVISION=	4
@


1.79
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/03/21 09:46:02 sthen Exp $
d9 1
a9 1
REVISION=	2
d20 1
a20 1
WANTLIB += asn1 c com_err crypto lib/db4/db>=4 gssapi heimbase heimntlm hx509
@


1.78
log
@@@comment perllocal.pod files, ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/03/11 11:23:50 espie Exp $
d9 1
a9 1
REVISION=	1
d20 3
a26 3
WANTLIB += asn1 c com_err crypto gssapi krb5 pcre pcreposix pthread
WANTLIB += sasl2 ssl z lib/db4/db>=4

d36 3
a38 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I/usr/include/kerberosV" \
		LDFLAGS="-L${LOCALBASE}/lib"
d46 1
a46 7
		--with-pidfile=/var/run/cyrus-master.pid \
		--with-syslogfacility=LOCAL6 \
		--with-openssl=/usr \
		--with-lock=fcntl \
		--with-com_err=/usr \
		--with-gss_impl=heimdal \
		--enable-gssapi=/usr \
a57 3

# XXX our kerberosV is too old; use bundled compile_et and libcom_err
CONFIGURE_ARGS += --with-com_err=yes
@


1.77
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2012/12/10 15:25:06 ajacoutot Exp $
d9 1
a9 1
REVISION=	0
@


1.76
log
@From upstream:
Bug #3757 - don't segfault on mailbox close with no user
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2012/12/03 11:17:03 ajacoutot Exp $
a18 3
PERMIT_PACKAGE_FTP=	yes
PERMIT_DISTFILES_CDROM=	yes
PERMIT_DISTFILES_FTP=	yes
d31 1
a31 1
NO_REGRESS=	Yes
@


1.75
log
@Update to cyrus-imapd-2.4.17.
Merge both subpackages into one -- it made sense when the port was not
SHARED_ONLY but it's been for a while now.
Use /nonexistent for the _cyrus user homedir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2012/08/28 08:06:15 ajacoutot Exp $
d9 1
@


1.74
log
@Remove bogus CONFIGURE_ENV.
Missing RCS Id in patch-configure.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2012/04/28 10:20:23 ajacoutot Exp $
d5 1
a5 2
COMMENT-main=	Cyrus IMAP server
COMMENT-perl=	perl utils for the Cyrus IMAP server
d7 1
a7 1
V=		2.4.16
a8 6
PKGNAME-main=	${DISTNAME}
FULLPKGNAME-perl=cyrus-imapd-perl-${V}
FULLPKGPATH-perl=mail/cyrus-imapd,-perl

REVISION-main=	1
REVISION-perl=	0
d26 2
a27 1
MULTI_PACKAGES=	-main -perl
d29 3
a31 10
WANTLIB +=	crypto ssl z sasl2 lib/db4/db>=4
WANTLIB-main += ${WANTLIB} asn1 c com_err gssapi krb5 pthread
WANTLIB-main += pcre pcreposix
WANTLIB-perl += ${WANTLIB}

LIB_DEPENDS=	security/cyrus-sasl2 \
		databases/db/v4
LIB_DEPENDS-main=${LIB_DEPENDS} \
		devel/pcre
RUN_DEPENDS-main=${RUN_DEPENDS}
d66 3
d87 1
a87 1
	@@perl -pi -e "s,${i}\(8\),cyrus-${i}\(8\),g" ${WRKSRC}/man/*.[0-9]
d90 1
a90 1
	@@perl -pi -e "s,/usr/sieve,/var/sieve,g" ${WRKSRC}/${i}
@


1.73
log
@Fix path to makedepend.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2012/04/20 20:54:16 ajacoutot Exp $
d14 2
a15 1
REVISION-main=	0
d52 1
a52 4
		LDFLAGS="-L${LOCALBASE}/lib" \
		ac_cv_lib_resolv_res_search=no \
		ac_cv_sys_long_file_names=yes \
		MAKEDEPEND="makedepend"
@


1.72
log
@Update to cyrus-imapd-2.4.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2012/03/12 17:21:10 ajacoutot Exp $
d14 2
d54 1
a54 1
		MAKEDEPEND=""
@


1.71
log
@Bugfix udate to cyrus-imapd-2.4.14.
More info at:
http://www.cyrusimap.org/mediawiki/index.php/Bugs_Resolved_in_2.4.14
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.70 2012/01/06 15:34:17 ajacoutot Exp $
d8 1
a8 1
V=		2.4.14
d30 2
d33 3
d43 2
d73 1
a78 6
# this is a needed hack; to update PLIST:
# make SHARED_ONLY=Yes plist
MULTI_PACKAGES=	-main ${NO_SHARED_LIBS:S/Yes//:S/No/-perl/}
CONFIGURE_ARGS+=--with${NO_SHARED_LIBS:S/Yes/out/:S/No//}-perl
USE_GROFF =	Yes

a87 6

WANTLIB-main +=	${WANTLIB} asn1 c com_err gssapi krb5 pthread
WANTLIB-main +=	pcre pcreposix
WANTLIB-perl +=	${WANTLIB}

NO_REGRESS=	Yes
@


1.70
log
@Workaround our broken mmap(); from cyrus developer Bron Gondwana.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/12/31 08:04:04 ajacoutot Exp $
d6 1
a6 1
V=		2.4.13
a10 2

REVISION-main=	0
@


1.69
log
@Update to cyrus-imapd-2.4.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/12/17 22:01:13 sthen Exp $
d11 2
@


1.68
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/12/02 14:36:15 espie Exp $
d6 1
a6 1
V=		2.4.12
a10 2

REVISION-main=	1
@


1.67
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/11/06 17:34:16 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	0
@


1.66
log
@Fix conflict with mail/archiveopteryx.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/10/05 06:25:34 ajacoutot Exp $
d80 1
a80 1
.if ${FLAVOR:L:Mdrac}
@


1.65
log
@SECURITY update to cyrus-imapd-2.4.12.
* fix for Secunia SA46093
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/09/16 10:31:21 espie Exp $
d12 2
d93 1
a93 1
MAN8=		fetchnews idled master imapd
d121 1
@


1.64
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/09/12 18:02:35 naddy Exp $
d6 1
a6 1
V=		2.4.11
a10 2
REVISION-main=	1
REVISION-perl=	1
@


1.63
log
@bump all (sub)packages that depend on db/v4; requested by and help from espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/09/09 06:46:39 ajacoutot Exp $
d11 2
a12 2
REVISION-main=	0
REVISION-perl=	0
@


1.62
log
@SECURITY: update to cyrus-imapd-2.4.11 to fix CVE-2011-3208.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/09/02 08:24:28 ajacoutot Exp $
d11 2
@


1.61
log
@Disable libwrap support, doesn't work properly and is from the past...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/07/22 05:58:40 ajacoutot Exp $
d6 1
a6 1
V=		2.4.10
a10 2

REVISION-main=	1
@


1.60
log
@Properly change directory before starting: use the same rc_start() as amd(8).

reminded by william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/07/05 22:58:48 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	0
a57 1
		--with-libwrap=/usr \
d63 1
d87 1
a87 1
WANTLIB-main +=	${WANTLIB} asn1 c com_err gssapi krb5 pthread wrap
@


1.60.2.1
log
@SECURITY fix to issue CVE-2011-3208
(buffer overflow in the nntpd daemon)

ok aja@@ sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/07/22 05:58:40 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	1
@


1.60.2.2
log
@SECURITY FIX: SA46093
(Cyrus IMAPd NTTP Authentication Bypass Vulnerability)
patch from upstream git

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60.2.1 2011/09/14 18:35:12 gsoares Exp $
d12 1
a12 1
REVISION-main=	2
@


1.60.2.3
log
@Merge from current:
* update to 2.14.3 which fixes lots of bugs
* bring 2 patches to prevent DB corruption as our mmap doesn't work with cyrus
* a couple of minor tweaks

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2012/01/06 15:34:17 ajacoutot Exp $
d6 1
a6 1
V=		2.4.13
d12 2
d58 1
a63 1
		--without-libwrap \
d80 1
a80 1
.if ${FLAVOR:Mdrac}
d87 1
a87 1
WANTLIB-main +=	${WANTLIB} asn1 c com_err gssapi krb5 pthread
d93 1
a93 1
MAN8=		fetchnews idled master imapd deliver
a120 1
	rm -f ${PREFIX}/man/man8/${i}.8
@


1.59
log
@Update to cyrus-imapd-2.4.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/06/22 06:51:09 ajacoutot Exp $
d11 2
@


1.58
log
@Update to cyrus-imapd-2.4.9.
More details at:
http://cyrusimap.org/mediawiki/index.php/Bugs_Resolved_in_2.4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/06/02 13:41:39 ajacoutot Exp $
d6 1
a6 1
V=		2.4.9
@


1.57
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/04/13 15:18:23 ajacoutot Exp $
d6 1
a6 1
V=		2.4.8
a10 2

REVISION-main=	0
@


1.56
log
@Update to cyrus-imapd-2.4.8.
See here for more info:
http://cyrusimap.org/mediawiki/index.php/Bugs_Resolved_in_2.4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2011/03/30 16:10:28 ajacoutot Exp $
d11 2
@


1.55
log
@Update to cyrus-imapd-2.4.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/12/27 14:50:23 ajacoutot Exp $
d6 1
a6 1
V=		2.4.7
@


1.54
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/12/24 10:40:06 ajacoutot Exp $
d6 1
a6 1
V=		2.4.6
a11 2
REVISION-main=	1

d24 2
a25 1
MASTER_SITES=	ftp://ftp.cyrusimap.org/cyrus-imapd/ \
@


1.54.2.1
log
@Security Fix CVE-2011-0411
Fixed bug #3423 - STARTTLS plaintext command injection vulnerability

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/12/27 14:50:23 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	2
@


1.53
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/12/20 14:39:31 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	0
@


1.52
log
@Update to cyrus-imapd-2.4.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/12/14 18:45:54 ajacoutot Exp $
d11 2
@


1.51
log
@It makes more sense to deal with the pidfile in pre, not post.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/12/12 11:52:30 ajacoutot Exp $
d6 1
a6 1
V=		2.4.5
a10 3

REVISION-main=	7
REVISION-perl=	1
@


1.50
log
@Unbreak.
Thanks to cyrus developer  Bron Gondwana for the huge help in debugging
the issue and for actually fixing it.

While here, move to pkg-readmes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/12/05 22:20:37 ajacoutot Exp $
d12 1
a12 1
REVISION-main=	6
@


1.49
log
@Add MASTER_SITES for old versions.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.48 2010/12/04 14:11:53 ajacoutot Exp $

BROKEN=		talk to ajacoutot@@ for details
d12 2
a13 2
REVISION-main=	5
REVISION-perl=	0
@


1.48
log
@When using the BerkeleyDB backend, we need a small hack in rc_pre.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/12/03 15:52:51 ajacoutot Exp $
d29 2
a30 1
MASTER_SITES=	ftp://ftp.cyrusimap.org/cyrus-imapd/
@


1.47
log
@Remove un-needed patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/12/03 15:37:31 ajacoutot Exp $
d14 1
a14 1
REVISION-main=	4
@


1.46
log
@Add missing @@sample dirs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/12/02 11:30:43 ajacoutot Exp $
d14 1
a14 1
REVISION-main=	3
@


1.45
log
@Fix path to gdb and don't hardcode /usr/...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/12/02 09:26:15 ajacoutot Exp $
d14 1
a14 1
REVISION-main=	2
@


1.44
log
@Mark this as BROKEN, temporarily, so that I have some time to figure out
what is going on and people don't update. It does work, but I'm
experiencing some strangeness which I'm looking into -- better safe than
sorry.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/12/02 08:56:32 ajacoutot Exp $
d14 1
a14 1
REVISION-main=	1
d100 1
@


1.43
log
@Remove some un-needed patches. Add some better defaults.
Properly bump this time.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.42 2010/12/01 19:57:01 ajacoutot Exp $
@


1.42
log
@Make rc_post quiet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/11/29 14:18:17 ajacoutot Exp $
d12 2
a13 1
REVISION=	0
@


1.41
log
@Bugfix update to cyrus-imapd-2.4.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/11/26 14:50:10 espie Exp $
d11 2
@


1.40
log
@since db/v4 has db->=4,<5 as default, no need to specify it explicitly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/11/19 07:23:06 espie Exp $
d6 1
a6 1
V=		2.4.4
a61 1
		--with-afs=no \
@


1.39
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/11/12 06:26:40 ajacoutot Exp $
d29 1
a29 1
		db->=4,<5:databases/db/v4
@


1.38
log
@Bugfix update to cyrus-imapd-2.4.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/11/02 07:08:04 ajacoutot Exp $
d26 1
a26 1
WANTLIB +=	crypto ssl z sasl2 lib/db4/db.>=4
d28 2
a29 2
LIB_DEPENDS=	::security/cyrus-sasl2 \
		:db->=4,<5:databases/db/v4
d31 1
a31 1
		::devel/pcre
d78 1
a78 1
BUILD_DEPENDS+=	::mail/drac
@


1.37
log
@Unbreak the drac FLAVOR, as spotted by naddy@@ then jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/10/29 12:54:43 ajacoutot Exp $
d6 1
a6 1
V=		2.4.2
a10 2

REVISION-main=	0
@


1.36
log
@Add RCS IDs to rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/10/29 09:26:58 ajacoutot Exp $
d81 3
a83 2
PATCH_LIST+=	${WRKSRC}/contrib/drac_auth.patch \
		drac-patch-imap_Makefile_in
@


1.35
log
@Update to cyrus-imapd-2.4.2 and add an rc script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/10/18 19:59:15 espie Exp $
d11 2
@


1.34
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/09/03 15:34:15 ajacoutot Exp $
d6 1
a6 1
V=		2.3.16
a8 1
REVISION-main=	1
d11 1
a11 1
REVISION-perl=	1
a57 1
		--enable-listext \
@


1.33
log
@New HOMEPAGE and MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/07/16 12:33:28 ajacoutot Exp $
d74 1
@


1.32
log
@Move to REVISION and new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/12/27 17:49:51 ajacoutot Exp $
d9 1
a9 1
REVISION-main=	0
d12 1
a12 1
REVISION-perl=	0
d15 1
a15 1
HOMEPAGE=	http://cyrusimap.web.cmu.edu
d25 1
a25 2
MASTER_SITES=	ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/ \
		ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/OLD-VERSIONS/imap/
@


1.31
log
@Bugfix update to cyrus-imapd-2.3.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/10/08 13:18:10 ajacoutot Exp $
d9 1
d12 1
d28 1
a28 1
WANTLIB=	crypto ssl z
d30 2
a31 2
LIB_DEPENDS=	sasl2.>=2::security/cyrus-sasl2 \
		lib/db4/db.>=4:db->=4,<5:databases/db/v4
d33 1
a33 1
		pcre.>=2,pcreposix.>=1::devel/pcre
d85 3
a87 2
WANTLIB-main=	${WANTLIB} asn1 c com_err gssapi krb5 pthread wrap
WANTLIB-perl=	${WANTLIB}
@


1.30
log
@typo.

from Stephan A. Rickauer, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/09/10 07:20:00 ajacoutot Exp $
d6 1
a6 1
V=		2.3.15
d8 1
a8 1
PKGNAME-main=	${DISTNAME}p0
@


1.29
log
@Update to cyrus-imapd-2.3.15

Fix the potential buffer overflow vulnerability described in CERT
VU#336053 (we already had an upstream patch for this in our 2.3.14 pkg).
This release also brings several non-critical bugfixes and feature
enhancements.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/09/03 18:51:52 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}
@


1.28
log
@SECURITY.
Fix overflow in action_string buffer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/03/25 15:44:41 ajacoutot Exp $
d6 1
a6 1
V=		2.3.14
d8 1
a8 1
PKGNAME-main=	${DISTNAME}p0
d26 1
a26 1
WANTLIB=	crypto ssl
d84 1
a84 1
WANTLIB-perl=	crypto ssl
@


1.27
log
@- update to bugfix release 2.3.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/03/16 13:28:57 espie Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}
@


1.27.2.1
log
@MFC security patch only:

Fix overflow in action_string buffer.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/03/25 15:44:41 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}p0
@


1.26
log
@fix deps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/10/21 08:36:25 ajacoutot Exp $
d6 1
a6 1
V=		2.3.13
d8 2
a9 2
PKGNAME-main=	${DISTNAME}p0
FULLPKGNAME-perl=cyrus-imapd-perl-${V}p0
@


1.25
log
@- update to cyrus-imapd 2.3.13
- only build_depends on mail/drac for the drac FLAVOR as the drac server
can be external
- rename drac patch
- tweak DESCR-perl and MESSAGE-main
- fix -perl packaging after perl upgrade to 5.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/10/02 20:32:19 sthen Exp $
d8 2
a9 2
PKGNAME-main=	${DISTNAME}
FULLPKGNAME-perl=cyrus-imapd-perl-${V}
d29 1
a29 1
		lib/db4/db.>=4:db-4.*:databases/db/v4
@


1.25.2.1
log
@MFC security patch only:

Fix overflow in action_string buffer.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/10/21 08:36:25 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}p0
@


1.24
log
@bump packages with Perl .so modules; the old ones don't work
with new perl and the package signature doesn't change, so we
have to do this ourselves to make pkg_add updates work.

ok simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/08/20 13:15:52 ajacoutot Exp $
d6 1
a6 1
V=		2.3.12
d8 2
a9 2
PKGNAME-main=	${DISTNAME}p1
FULLPKGNAME-perl=cyrus-imapd-perl-${V}p1
d12 1
d62 6
a67 1
		--without-snmp
a78 1
RUN_DEPENDS-main+=::mail/drac
d80 1
a80 1
		drac-patch-imap_Makefile.in
@


1.23
log
@- add lmtp_downcase_rcpt to the default imapd.conf file as it is a
commonly used option
- bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/06/14 17:22:39 ajacoutot Exp $
d9 1
a9 1
FULLPKGNAME-perl=cyrus-imapd-perl-${V}p0
@


1.22
log
@- drac FLAVOR should add to RUN_DEPENDS-main, not RUN_DEPENDS

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/04/23 13:33:22 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}p0
@


1.21
log
@- update to version 2.3.12
- fix depends for the drac FLAVOR in the process
- add a patch from cyrus bugzilla to allow imapd.conf to contain blank lines (!)

* Added statuscache.db to cache IMAP STATUS data
* Added option to unexpunge to restore messages by time interval
* Implemented incremental squat updates (see squatter.8)
* Fixed major bugs in reconstruct -k implementation
* Added code to promote transaction safety and to track the lock status of skiplist databases
* Allow long lines in imapd.conf to be split across multiple lines by using backslash as a continuation character.
* Fixed miscellaneous bugs and build issues
... and more
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/03/15 10:07:20 ajacoutot Exp $
d8 2
a9 2
PKGNAME-main=	${DISTNAME}
FULLPKGNAME-perl=cyrus-imapd-perl-${V}
d31 1
d73 1
a73 1
RUN_DEPENDS+=	::mail/drac
@


1.20
log
@- remove kerberos FLAVOR ('-with-auth' configure option was deprecated)
and add GSSAPI support by default
- add more configuration entries in the provided imapd.conf and
cyrus.conf sample files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/12/11 11:04:19 ajacoutot Exp $
d6 1
a6 1
V=		2.3.11
d8 1
a8 1
PKGNAME-main=	${DISTNAME}p0
d62 2
d71 2
a72 1
BUILD_DEPENDS=	::mail/drac
@


1.19
log
@- minor update to 2.3.11
(skiplist db bug fixes and robutness, some other small fixes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/10/25 21:05:33 steven Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}
d25 1
a25 1
WANTLIB=	crypto ssl 
d35 1
a35 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
d53 2
d65 1
a65 1
FLAVORS=	drac kerberos
d74 1
a74 12
.if ${FLAVOR:L:Mkerberos}
WANTLIB+=	com_err krb5 gssapi asn1
CONFIGURE_ENV+=	CPPFLAGS="-I/usr/include/kerberosV" \
CONFIGURE_ARGS+=--with-auth=krb5 \
		--enable-gssapi=/usr \
		--with-gss_impl=heimdal
.else
CONFIGURE_ARGS+=--with-auth=unix \
		--disable-gssapi
.endif

WANTLIB-main=	${WANTLIB} wrap c pthread
@


1.18
log
@db.=4 -> db.>=4  in preparation of db4 update

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/10/25 09:42:40 ajacoutot Exp $
d6 1
a6 1
V=		2.3.10
d8 2
a9 2
PKGNAME-main=	${DISTNAME}p0
FULLPKGNAME-perl=cyrus-imapd-perl-${V}p0
@


1.17
log
@- update to cyrus-imapd-2.3.10; notable changes:
 * fix alignment issues
 * new cyr_synclog utility for adding events to the replication log
 * added support for the PCRE library
 * miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/08/29 20:08:17 ajacoutot Exp $
d8 2
a9 2
PKGNAME-main=	${DISTNAME}
FULLPKGNAME-perl=cyrus-imapd-perl-${V}
d28 1
a28 1
		lib/db4/db.=4:db-4.*:databases/db/v4
@


1.16
log
@- update to 2.3.9
beware that plaintext authentication is now disabled by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/08/28 13:24:51 ajacoutot Exp $
d6 1
a6 1
V=		2.3.9
d29 2
@


1.15
log
@- override FULLPKGPATH-perl so that FLAVORS don't get registered (which
would cause the -perl subpackage to not package when PLIST_DB is set)

problem noticed by sturm@@ on bulk builds
inputs by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/06/01 15:23:12 ajacoutot Exp $
d6 1
a6 1
V=		2.3.8
d8 2
a9 2
PKGNAME-main=	${DISTNAME}p0
FULLPKGNAME-perl=cyrus-imapd-perl-${V}p0
d91 1
a91 1
pre-build:
d93 4
a96 1
	perl -pi -e "s,${i}\(8\),cyrus-${i}\(8\),g" ${WRKSRC}/man/*.[0-9]
a97 1
	cd ${WRKSRC} && perl -pi -e "s,/usr/sieve,/var/sieve,g" ${SIEVEREF}
@


1.14
log
@- zap a broken MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/05/04 08:05:00 ajacoutot Exp $
d3 2
a4 2
COMMENT-main=	"Cyrus IMAP server"
COMMENT-perl=	"perl utils for the Cyrus IMAP server"
d9 2
a10 1
FULLPKGNAME-perl=cyrus-imapd-perl-${V}
d16 1
a16 1
# see the COPYRIGHT file in package sources
@


1.13
log
@- better default cyrus.conf file
enable idled and disable sieve ; also disable pop3s and imaps as cyrus
would literally fill the logs if SSL is no configured (problem found by
Stuart Henderson <stu at spacehopper dot org>)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/03/31 09:33:21 ajacoutot Exp $
d22 1
a22 2
		ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/OLD-VERSIONS/imap/ \
		ftp://ftp.hanse.de/sites/transit/mirror/ftp.andrew.cmu.edu/pub/cyrus-mail/
@


1.12
log
@- update to cyrus-imapd-2.3.8
upgrade notes: http://cyrusimap.web.cmu.edu/imapd/install-upgrade.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/12/14 09:07:56 steven Exp $
d8 1
a8 1
PKGNAME-main=	${DISTNAME}
@


1.11
log
@use BASE_PKGPATH instead of homegrown variable, no bumps needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/11/25 19:51:14 steven Exp $
d6 1
a6 1
V=		2.2.13
d8 2
a9 2
PKGNAME-main=	${DISTNAME}p3
FULLPKGNAME-perl=cyrus-imapd-perl-${V}p0
a49 1
		--with-idle=idled \
d51 1
d82 1
@


1.10
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/10/27 06:05:35 steven Exp $
a81 3

MAINPATH=	mail/cyrus-imapd${FLAVOR_EXT:S/-/,/g}
SUBST_VARS=	MAINPATH
@


1.9
log
@bump ALL pkgnames after changing maintainer !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/10/25 07:51:58 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"Cyrus IMAP server"
d6 4
a9 3
DISTNAME=	cyrus-imapd-2.2.13
PKGNAME=	${DISTNAME}p2
FULLPKGNAME-perl=${DISTNAME:S/imapd/imapd-perl/}p0
d58 1
a58 2
MULTI_PACKAGES=	${NO_SHARED_LIBS:S/Yes//:S/No/-perl/}
SUBPACKAGE?=
d81 4
a84 3
.if defined(PACKAGING) && empty(SUBPACKAGE)
WANTLIB+=	wrap c pthread
.endif
@


1.8
log
@- do not remove mail spool and db on pkg_delete -c
- remove version variable
- update my email address

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/09/22 09:08:24 jasper Exp $
d8 1
a8 1
FULLPKGNAME-perl=${DISTNAME:S/imapd/imapd-perl/}
@


1.7
log
@Fix a segfault.
from maintainer Antoine Jacoutot <ajacoutot at lphp dot org>
ok alek
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/08/03 13:09:09 espie Exp $
d6 3
a8 4
V=		2.2.13
DISTNAME=	cyrus-imapd-${V}
PKGNAME=	${DISTNAME}p1
FULLPKGNAME-perl=cyrus-imapd-perl-${V}
d12 1
a12 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@lphp.org>
@


1.6
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/04/15 08:15:01 alek Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.6.2.1
log
@MFC:
fix a segfault
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/08/03 13:09:09 espie Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.5
log
@- Fix timezone handling in fetchnews
- Add NO_REGRESS
- Bump PKGNAME

From Antoine Jacoutot <ajacoutot@@lphp.org> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/04/08 20:46:20 sturm Exp $
d27 1
a27 1
LIB_DEPENDS=	sasl2.2::security/cyrus-sasl2 \
@


1.4
log
@update to cyrus-imapd 2.2.13

from maintainer Antoine Jacoutot <ajacoutot at lphp.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/03/31 16:48:05 sturm Exp $
d8 1
d85 2
@


1.3
log
@missing trailing slash in MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/02/08 19:31:13 sturm Exp $
d6 1
a6 1
V=		2.2.12
a7 1
PKGNAME=	${DISTNAME}p0
d10 1
a10 1
HOMEPAGE=	http://asg.web.cmu.edu/cyrus/imapd/
d35 1
d71 1
@


1.2
log
@fix build for kerberos FLAVOR
regen PLIST

from maintainer Antoine Jacoutot <ajacoutot at lphp.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/03/27 18:01:50 alek Exp $
d23 1
a23 1
		ftp://ftp.hanse.de/sites/transit/mirror/ftp.andrew.cmu.edu/pub/cyrus-mail
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
d35 1
@


1.1.1.1
log
@Import cyrus-imapd 2.2.12

The Cyrus IMAP server differs from other IMAP server implementations in
that it is generally intended to be run on sealed servers, where normal
users are not permitted to log in. The mailbox database is stored in
parts of the filesystem that are private to the Cyrus IMAP system. All
user access to mail is through the IMAP, POP3, or KPOP protocols.

From Antoine Jacoutot <ajacoutot@@lphp.org>

help & ok naddy@@, thanks!
@
text
@@
