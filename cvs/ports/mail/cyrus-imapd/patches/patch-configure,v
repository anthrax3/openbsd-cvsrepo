head	1.32;
access;
symbols
	OPENBSD_6_1:1.29.0.2
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.23.0.8
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.6
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.22.0.2
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.20.0.4
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.10.0.4
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.6.0.2
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.4
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	alek_20050327:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.32
date	2017.06.22.08.54.16;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	38A5LzF74zf2ktLi;

1.31
date	2017.05.28.15.46.11;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	5tK0B3xUnJddvTII;

1.30
date	2017.05.09.07.33.33;	author ajacoutot;	state Exp;
branches;
next	1.29;
commitid	JopYbRTEH3rFBUag;

1.29
date	2016.10.18.07.20.17;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	scyajOMYKtqQcJbJ;

1.28
date	2016.07.30.14.19.13;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	z4CGzq8hxNs89te6;

1.27
date	2016.05.21.07.12.16;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	dHrxijCfLN8Tzd5N;

1.26
date	2015.12.02.09.44.25;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	QHQn5x2fXzxEV8ne;

1.25
date	2015.04.24.14.51.26;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	SytOCTNGMCY1Q89B;

1.24
date	2015.03.15.08.51.07;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	ahJfNkqGNue6WKpR;

1.23
date	2013.06.17.19.30.43;	author ajacoutot;	state Exp;
branches
	1.23.8.1;
next	1.22;

1.22
date	2012.12.03.11.17.04;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.08.28.08.06.15;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.09.09.06.46.39;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.02.08.24.28;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.07.05.22.58.48;	author ajacoutot;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2011.06.22.06.51.10;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.03.30.16.10.28;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.12.20.14.39.31;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.12.02.08.56.32;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.29.14.18.17;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.12.06.26.40;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.29.09.26.58;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.12.27.17.49.51;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.09.10.07.20.01;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.25.15.44.41;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2008.10.21.08.36.25;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2008.04.23.13.33.22;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2007.10.25.09.42.40;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2007.08.29.20.08.17;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2007.03.31.09.33.21;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2006.04.08.20.46.20;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.27.18.01.50;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.27.18.01.50;	author alek;	state Exp;
branches;
next	;

1.18.2.1
date	2012.01.06.16.23.31;	author ajacoutot;	state Exp;
branches;
next	;

1.23.8.1
date	2015.07.07.09.27.19;	author ajacoutot;	state Exp;
branches;
next	;
commitid	qs4uQR60aAkdEYDn;


desc
@@


1.32
log
@Update to cyrus-imapd-3.0.2.
@
text
@$OpenBSD: patch-configure,v 1.31 2017/05/28 15:46:11 ajacoutot Exp $
Index: configure
--- configure.orig
+++ configure
@@@@ -25909,7 +25909,7 @@@@ elif test "${with_perl}" != "no"; then
 
 
     case "${target_os}" in
-        linux*|netbsd*|freebsd*|dragonfly*)
+        linux*|netbsd*|freebsd*|dragonfly*|openbsd*)
             { $as_echo "$as_me:${as_lineno-$LINENO}: checking for perl cccdlflags needed on \"${target_os}\"" >&5
 $as_echo_n "checking for perl cccdlflags needed on \"${target_os}\"... " >&6; }
             eval `${PERL} -V:cccdlflags`
@


1.31
log
@Major update to cyrus-imapd-3.0.1.
- cleanup and fix some ports specific stuff while here

Refer to upstream for changes and upgrade notes.
Note that altnamespace and unixhierarchysep are now on by default on, to match
the behaviour of most other IMAP servers in the world.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.30 2017/05/09 07:33:33 ajacoutot Exp $
d5 3
a7 3
@@@@ -25589,7 +25589,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
 elif test "${with_perl}" != "no"; then
     PERL="${with_perl}"
@


1.30
log
@Update to cyrus-imapd-2.5.11.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.29 2016/10/18 07:20:17 ajacoutot Exp $
d5 1
a5 21
@@@@ -13788,9 +13788,7 @@@@ CFLAGS=$save_CFLAGS
 fi
 
 if test "$ac_cv_fpic" = "yes"; then
-    FPIC_CFLAGS="-fPIC"
-else
-    FPIC_CFLAGS=""
+    CFLAGS="${CFLAGS} -fPIC"
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_fpic" >&5
 $as_echo "$ac_cv_fpic" >&6; }
@@@@ -15235,7 +15233,7 @@@@ fi
 
 
 
-  LIBS="${LIBS} ${BDB_LIBADD}"
+  LIBS="${BDB_LIBADD} ${LIBS}"
   CPPFLAGS="${BDB_INCADD} ${CPPFLAGS}"
 
 $as_echo "#define HAVE_BDB /**/" >>confdefs.h
@@@@ -20628,7 +20626,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.29
log
@Update to cyrus-imapd-2.5.10.
@
text
@d1 5
a5 4
$OpenBSD: patch-configure,v 1.28 2016/07/30 14:19:13 ajacoutot Exp $
--- configure.orig	Tue Oct 18 00:15:29 2016
+++ configure	Tue Oct 18 09:05:58 2016
@@@@ -13786,9 +13786,7 @@@@ CFLAGS=$save_CFLAGS
d16 1
a16 1
@@@@ -15233,7 +15231,7 @@@@ fi
d25 1
a25 1
@@@@ -20555,7 +20553,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.28
log
@Update to cyrus-imapd-2.5.9.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.27 2016/05/21 07:12:16 ajacoutot Exp $
--- configure.orig	Fri Jul 22 04:15:23 2016
+++ configure	Mon Jul 25 13:41:16 2016
@@@@ -13850,9 +13850,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -15297,7 +15295,7 @@@@ fi
d24 1
a24 1
@@@@ -20515,7 +20513,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.27
log
@Update to cyrus-imapd-2.5.8.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.26 2015/12/02 09:44:25 ajacoutot Exp $
--- configure.orig	Fri May 20 08:01:17 2016
+++ configure	Sat May 21 09:01:23 2016
d24 1
a24 1
@@@@ -20490,7 +20488,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.26
log
@SECURITY update to cyrus-imapd-2.5.7.
CVE-2015-8077, CVE-2015-8078: protect against integer overflow in urlfetch
range checks
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.25 2015/04/24 14:51:26 ajacoutot Exp $
--- configure.orig	Tue Dec  1 00:59:48 2015
+++ configure	Wed Dec  2 10:36:03 2015
@@@@ -13228,9 +13228,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -14675,7 +14673,7 @@@@ fi
d24 1
a24 1
@@@@ -19988,7 +19986,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.25
log
@Update to cyrus-imapd-2.5.1.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.24 2015/03/15 08:51:07 ajacoutot Exp $
--- configure.orig	Fri Apr 24 04:11:15 2015
+++ configure	Fri Apr 24 15:47:27 2015
@@@@ -13157,9 +13157,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -14604,7 +14602,7 @@@@ fi
d24 1
a24 1
@@@@ -19918,7 +19916,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.24
log
@Update to cyrus-imapd-2.5.0.
http/caldav support is disabled for now.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.23 2013/06/17 19:30:43 ajacoutot Exp $
--- configure.orig	Tue Mar  3 23:56:14 2015
+++ configure	Thu Mar 12 13:52:02 2015
@@@@ -13181,9 +13181,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -14628,7 +14626,7 @@@@ fi
d24 1
a24 1
@@@@ -19937,7 +19935,7 @@@@ $as_echo "$as_me: WARNING: Perl not found: Administrat
@


1.23
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.22 2012/12/03 11:17:04 ajacoutot Exp $
--- configure.orig	Sat Dec  1 20:59:51 2012
+++ configure	Mon Dec  3 10:59:56 2012
@@@@ -5061,9 +5061,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -6454,7 +6452,7 @@@@ fi
d23 3
a25 3
   CYRUSDB_OBJS="$CYRUSDB_OBJS cyrusdb_berkeley.o"
@@@@ -10516,7 +10514,7 @@@@ elif test "${with_perl}" != "no"; then
     PERL_SUBDIRS="imap"
@


1.23.8.1
log
@SECURITY update to cyrus-imapd-2.4.18.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.23 2013/06/17 19:30:43 ajacoutot Exp $
--- configure.orig	Mon Jul  6 05:49:04 2015
+++ configure	Tue Jul  7 11:12:13 2015
@@@@ -5084,9 +5084,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -6477,7 +6475,7 @@@@ fi
d24 1
a24 1
@@@@ -10540,7 +10538,7 @@@@ elif test "${with_perl}" != "no"; then
@


1.22
log
@Update to cyrus-imapd-2.4.17.
Merge both subpackages into one -- it made sense when the port was not
SHARED_ONLY but it's been for a while now.
Use /nonexistent for the _cyrus user homedir.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.21 2012/08/28 08:06:15 ajacoutot Exp $
a23 20
@@@@ -9645,7 +9643,7 @@@@ if ${ac_cv_lib_gssapi_gss_unwrap+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lgssapi ${GSSAPIBASE_LIBS} -lgssapi -lkrb5 -lasn1 -lroken ${LIB_CRYPT} ${LIB_DES} -lcom_err ${LIB_SOCKET} $LIBS"
+LIBS="-lgssapi ${GSSAPIBASE_LIBS} -lgssapi -lkrb5 -lasn1 -lcrypto ${LIB_CRYPT} ${LIB_DES} -lcom_err ${LIB_SOCKET} $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -9947,8 +9945,8 @@@@ fi
     GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_LIBS $gssapi_dir/libgssapi_krb5.a $gssapi_dir/libkrb5.a $gssapi_dir/libk5crypto.a $gssapi_dir/libcom_err.a ${K5SUPSTATIC}"
   elif test "$gss_impl" = "heimdal"; then
     CPPFLAGS="$CPPFLAGS -DKRB5_HEIMDAL"
-    GSSAPIBASE_LIBS="$GSSAPIBASE_LIBS -lgssapi -lkrb5 -lasn1 -lroken ${LIB_CRYPT} ${LIB_DES} -lcom_err"
-    GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_STATIC_LIBS $gssapi_dir/libgssapi.a $gssapi_dir/libkrb5.a $gssapi_dir/libasn1.a $gssapi_dir/libroken.a $gssapi_dir/libcom_err.a ${LIB_CRYPT}"
+    GSSAPIBASE_LIBS="$GSSAPIBASE_LIBS -lgssapi -lkrb5 -lasn1 ${LIB_CRYPT} ${LIB_DES} -lcom_err"
+    GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_STATIC_LIBS $gssapi_dir/libgssapi.a $gssapi_dir/libkrb5.a $gssapi_dir/libasn1.a $gssapi_dir/libcom_err.a ${LIB_CRYPT}"
   elif test "$gss_impl" = "cybersafe03"; then
 # Version of CyberSafe with two libraries
     CPPFLAGS="$CPPFLAGS -D$platform -I${gssapi}/appsec-sdk/include"
@


1.21
log
@Remove bogus CONFIGURE_ENV.
Missing RCS Id in patch-configure.
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Thu Sep  8 21:03:38 2011
+++ configure	Fri Sep  9 08:38:25 2011
@@@@ -5062,9 +5062,7 @@@@ CFLAGS=$save_CFLAGS
d15 1
a15 1
@@@@ -6455,7 +6453,7 @@@@ fi
d24 1
a24 1
@@@@ -9622,7 +9620,7 @@@@ if ${ac_cv_lib_gssapi_gss_unwrap+:} false; then :
d33 1
a33 1
@@@@ -9924,8 +9922,8 @@@@ fi
d44 1
a44 1
@@@@ -10493,7 +10491,7 @@@@ elif test "${with_perl}" != "no"; then
@


1.20
log
@SECURITY: update to cyrus-imapd-2.4.11 to fix CVE-2011-3208.
@
text
@d1 1
@


1.19
log
@Disable libwrap support, doesn't work properly and is from the past...
@
text
@d1 2
a2 2
--- configure.orig	Mon Jul  4 17:06:30 2011
+++ configure	Tue Jul  5 23:36:08 2011
d47 2
a48 2
-        linux*|netbsd*)
+        linux*|netbsd*|openbsd*)
@


1.18
log
@Update to cyrus-imapd-2.4.10.
@
text
@a51 9
@@@@ -10556,6 +10554,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 extern "C"
 #endif
 char request_init ();
+int allow_severity = 1;
+int deny_severity = 1;
 int
 main ()
 {
@


1.18.2.1
log
@Merge from current:
* update to 2.14.3 which fixes lots of bugs
* bring 2 patches to prevent DB corruption as our mmap doesn't work with cyrus
* a couple of minor tweaks

ok sthen@@
@
text
@d1 2
a2 2
--- configure.orig	Thu Sep  8 21:03:38 2011
+++ configure	Fri Sep  9 08:38:25 2011
d47 2
a48 2
-        linux*|netbsd*|freebsd*|dragonfly*)
+        linux*|netbsd*|freebsd*|dragonfly*|openbsd*)
d52 9
@


1.17
log
@Update to cyrus-imapd-2.4.9.
More details at:
http://cyrusimap.org/mediawiki/index.php/Bugs_Resolved_in_2.4.9
@
text
@d1 3
a3 3
--- configure.orig	Tue Jun 21 21:51:34 2011
+++ configure	Wed Jun 22 08:43:42 2011
@@@@ -5053,9 +5053,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -6446,7 +6444,7 @@@@ fi
d23 1
a23 1
@@@@ -9612,7 +9610,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d32 1
a32 1
@@@@ -9914,8 +9912,8 @@@@ fi
d43 1
a43 1
@@@@ -10483,7 +10481,7 @@@@ elif test "${with_perl}" != "no"; then
d52 1
a52 1
@@@@ -10546,6 +10544,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@


1.16
log
@Update to cyrus-imapd-2.4.7.
@
text
@d1 3
a3 3
--- configure.orig	Wed Mar 30 15:53:09 2011
+++ configure	Wed Mar 30 17:05:07 2011
@@@@ -5051,9 +5051,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -6444,7 +6442,7 @@@@ fi
d23 1
a23 1
@@@@ -9598,7 +9596,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d32 1
a32 1
@@@@ -9900,8 +9898,8 @@@@ fi
d43 1
a43 1
@@@@ -10469,7 +10467,7 @@@@ elif test "${with_perl}" != "no"; then
d52 1
a52 1
@@@@ -10532,6 +10530,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@


1.15
log
@Update to cyrus-imapd-2.4.6.
@
text
@d1 2
a2 2
--- configure.orig	Mon Dec 20 14:20:42 2010
+++ configure	Mon Dec 20 14:55:45 2010
d14 1
a14 1
@@@@ -6420,7 +6418,7 @@@@ fi
d23 1
a23 1
@@@@ -9574,7 +9572,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d32 1
a32 1
@@@@ -9876,8 +9874,8 @@@@ fi
d43 1
a43 1
@@@@ -10445,7 +10443,7 @@@@ elif test "${with_perl}" != "no"; then
d52 1
a52 1
@@@@ -10508,6 +10506,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@


1.14
log
@Remove some un-needed patches. Add some better defaults.
Properly bump this time.
@
text
@d1 3
a3 3
--- configure.orig	Mon Nov 29 14:29:23 2010
+++ configure	Thu Dec  2 09:20:29 2010
@@@@ -5052,9 +5052,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -6421,7 +6419,7 @@@@ fi
d23 1
a23 1
@@@@ -9575,7 +9573,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d32 1
a32 1
@@@@ -9877,8 +9875,8 @@@@ fi
d43 1
a43 1
@@@@ -10446,7 +10444,7 @@@@ elif test "${with_perl}" != "no"; then
d52 1
a52 1
@@@@ -10559,6 +10557,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@


1.13
log
@Bugfix update to cyrus-imapd-2.4.5.
@
text
@d2 1
a2 1
+++ configure	Mon Nov 29 14:56:36 2010
d43 9
@


1.12
log
@Bugfix update to cyrus-imapd-2.4.4.
@
text
@d1 3
a3 3
--- configure.orig	Thu Nov 11 23:19:25 2010
+++ configure	Fri Nov 12 07:12:58 2010
@@@@ -5051,9 +5051,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -6420,7 +6418,7 @@@@ fi
d23 1
a23 1
@@@@ -9540,7 +9538,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d32 1
a32 1
@@@@ -9842,8 +9840,8 @@@@ fi
d43 1
a43 1
@@@@ -10524,6 +10522,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@


1.11
log
@Update to cyrus-imapd-2.4.2 and add an rc script.
@
text
@d1 3
a3 3
--- configure.orig	Tue Oct 19 11:58:48 2010
+++ configure	Fri Oct 22 21:51:42 2010
@@@@ -5048,9 +5048,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -6403,7 +6401,7 @@@@ fi
d23 1
a23 1
@@@@ -9501,7 +9499,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d32 1
a32 1
@@@@ -9803,8 +9801,8 @@@@ fi
d43 1
a43 1
@@@@ -10485,6 +10483,8 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
@


1.10
log
@Bugfix update to cyrus-imapd-2.3.16.
@
text
@d1 3
a3 3
--- configure.orig	Mon Dec 21 14:17:55 2009
+++ configure	Sun Dec 27 18:36:30 2009
@@@@ -7319,9 +7319,7 @@@@ CFLAGS=$save_CFLAGS
d12 1
a12 1
 { $as_echo "$as_me:$LINENO: result: $ac_cv_fpic" >&5
d14 1
a14 1
@@@@ -10956,7 +10954,7 @@@@ $as_echo "$as_me: error: Berkeley DB 3.x or later was 
d23 1
a23 19
@@@@ -15128,7 +15126,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -18285,7 +18283,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -18376,7 +18374,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d29 4
a32 4
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -18852,8 +18850,8 @@@@ fi
d43 1
a43 10
@@@@ -19037,7 +19035,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -20403,6 +20401,8 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.9
log
@Update to cyrus-imapd-2.3.15

Fix the potential buffer overflow vulnerability described in CERT
VU#336053 (we already had an upstream patch for this in our 2.3.14 pkg).
This release also brings several non-critical bugfixes and feature
enhancements.
@
text
@d1 3
a3 3
--- configure.orig	Wed Sep  9 15:19:48 2009
+++ configure	Thu Sep 10 08:58:40 2009
@@@@ -7259,9 +7259,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -10896,7 +10894,7 @@@@ $as_echo "$as_me: error: Berkeley DB 3.x or later was 
d23 1
a23 1
@@@@ -14635,7 +14633,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d32 1
a32 1
@@@@ -17792,7 +17790,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d41 1
a41 1
@@@@ -17883,7 +17881,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d50 1
a50 1
@@@@ -18359,8 +18357,8 @@@@ fi
d61 1
a61 1
@@@@ -18544,7 +18542,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d70 1
a70 1
@@@@ -19898,6 +19896,8 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.8
log
@- update to bugfix release 2.3.14
@
text
@d1 3
a3 3
--- configure.orig	Wed Mar 25 12:37:47 2009
+++ configure	Wed Mar 25 16:14:39 2009
@@@@ -7256,9 +7256,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -10893,7 +10891,7 @@@@ $as_echo "$as_me: error: Berkeley DB 3.x or later was 
d23 1
a23 1
@@@@ -14632,7 +14630,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d32 1
a32 1
@@@@ -17143,7 +17141,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d41 1
a41 1
@@@@ -17234,7 +17232,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d50 1
a50 1
@@@@ -17710,8 +17708,8 @@@@ fi
d61 1
a61 1
@@@@ -17895,7 +17893,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d70 1
a70 1
@@@@ -19638,6 +19636,8 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.7
log
@- update to cyrus-imapd 2.3.13
- only build_depends on mail/drac for the drac FLAVOR as the drac server
can be external
- rename drac patch
- tweak DESCR-perl and MESSAGE-main
- fix -perl packaging after perl upgrade to 5.10
@
text
@d1 3
a3 3
--- configure.orig	Fri Oct 17 14:56:20 2008
+++ configure	Tue Oct 21 09:26:08 2008
@@@@ -7005,9 +7005,7 @@@@ CFLAGS=$save_CFLAGS
d12 3
a14 3
 { echo "$as_me:$LINENO: result: $ac_cv_fpic" >&5
 echo "${ECHO_T}$ac_cv_fpic" >&6; }
@@@@ -10480,7 +10478,7 @@@@ echo "$as_me: error: Berkeley DB 3.x or later was not 
d23 2
a24 2
@@@@ -14080,7 +14078,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
d32 2
a33 2
@@@@ -16516,7 +16514,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
d41 2
a42 2
@@@@ -16603,7 +16601,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
d50 1
a50 1
@@@@ -17055,8 +17053,8 @@@@ fi
d61 2
a62 2
@@@@ -17240,7 +17238,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
   echo $ECHO_N "(cached) $ECHO_C" >&6
d70 1
a70 1
@@@@ -18993,6 +18991,8 @@@@ cat >>conftest.$ac_ext <<_ACEOF
@


1.6
log
@- update to version 2.3.12
- fix depends for the drac FLAVOR in the process
- add a patch from cyrus bugzilla to allow imapd.conf to contain blank lines (!)

* Added statuscache.db to cache IMAP STATUS data
* Added option to unexpunge to restore messages by time interval
* Implemented incremental squat updates (see squatter.8)
* Fixed major bugs in reconstruct -k implementation
* Added code to promote transaction safety and to track the lock status of skiplist databases
* Allow long lines in imapd.conf to be split across multiple lines by using backslash as a continuation character.
* Fixed miscellaneous bugs and build issues
... and more
@
text
@d1 3
a3 3
--- configure.orig	Mon Apr 21 13:17:40 2008
+++ configure	Mon Apr 21 16:16:41 2008
@@@@ -5206,9 +5206,7 @@@@ CFLAGS=$save_CFLAGS
d12 3
a14 3
 echo "$as_me:$LINENO: result: $ac_cv_fpic" >&5
 echo "${ECHO_T}$ac_cv_fpic" >&6
@@@@ -8908,7 +8906,7 @@@@ echo "$as_me: error: Berkeley DB 3.x or later was not 
d23 1
a23 1
@@@@ -12270,7 +12268,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d32 1
a32 1
@@@@ -14831,7 +14829,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d41 1
a41 1
@@@@ -14921,7 +14919,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d50 1
a50 1
@@@@ -15391,8 +15389,8 @@@@ fi
d61 1
a61 1
@@@@ -15576,7 +15574,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d70 3
a72 3
@@@@ -17414,6 +17412,8 @@@@ extern "C"
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
@


1.5
log
@- update to cyrus-imapd-2.3.10; notable changes:
 * fix alignment issues
 * new cyr_synclog utility for adding events to the replication log
 * added support for the PCRE library
 * miscellaneous bug fixes
@
text
@d1 2
a2 2
--- configure.orig	Wed Oct 24 20:12:43 2007
+++ configure	Thu Oct 25 10:40:37 2007
d32 1
a32 1
@@@@ -14827,7 +14825,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d41 1
a41 1
@@@@ -14917,7 +14915,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d50 1
a50 1
@@@@ -15387,8 +15385,8 @@@@ fi
d61 1
a61 1
@@@@ -15572,7 +15570,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d70 1
a70 1
@@@@ -17410,6 +17408,8 @@@@ extern "C"
@


1.4
log
@- update to 2.3.9
beware that plaintext authentication is now disabled by default
@
text
@d1 2
a2 2
--- configure.orig	Wed Aug 15 19:23:15 2007
+++ configure	Tue Aug 28 15:37:04 2007
d14 1
a14 1
@@@@ -8907,7 +8905,7 @@@@ echo "$as_me: error: Berkeley DB 3.x or later was not 
d23 1
a23 1
@@@@ -12248,7 +12246,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d32 1
a32 1
@@@@ -14802,7 +14800,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d41 1
a41 1
@@@@ -14892,7 +14890,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d50 1
a50 1
@@@@ -15362,8 +15360,8 @@@@ fi
d61 1
a61 1
@@@@ -15547,7 +15545,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d70 1
a70 1
@@@@ -17385,6 +17383,8 @@@@ extern "C"
@


1.3
log
@- update to cyrus-imapd-2.3.8
upgrade notes: http://cyrusimap.web.cmu.edu/imapd/install-upgrade.html
@
text
@d1 2
a2 2
--- configure.orig	Wed Feb  7 19:47:27 2007
+++ configure	Fri Mar 23 15:08:09 2007
d14 1
a14 1
@@@@ -8905,7 +8903,7 @@@@ echo "$as_me: error: Berkeley DB 3.x or later was not 
d23 1
a23 1
@@@@ -12246,7 +12244,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d32 1
a32 1
@@@@ -14800,7 +14798,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d41 1
a41 1
@@@@ -14890,7 +14888,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+set}" = set; th
d50 1
a50 1
@@@@ -15360,8 +15358,8 @@@@ fi
d61 1
a61 1
@@@@ -15545,7 +15543,7 @@@@ if test "${ac_cv_lib_resolv_res_search+set}" = set; th
d70 1
a70 1
@@@@ -17383,6 +17381,8 @@@@ extern "C"
@


1.2
log
@update to cyrus-imapd 2.2.13

from maintainer Antoine Jacoutot <ajacoutot at lphp.org>
@
text
@d1 3
a3 4
$OpenBSD$
--- configure.orig	Sun Apr  2 14:49:05 2006
+++ configure	Sun Apr  2 14:54:33 2006
@@@@ -3486,9 +3486,7 @@@@ CFLAGS=$save_CFLAGS
d14 1
a14 1
@@@@ -7838,7 +7836,7 @@@@ echo "$as_me: error: Berkeley DB 3.x or 
d23 19
a41 1
@@@@ -13581,7 +13579,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+s
d50 2
a51 2
@@@@ -13981,8 +13979,8 @@@@ fi
     GSSAPIBASE_STATIC_LIBS="$GSSAPIBASE_LIBS $gssapi_dir/libgssapi_krb5.a $gssapi_dir/libkrb5.a $gssapi_dir/libk5crypto.a $gssapi_dir/libcom_err.a"
d61 10
a70 1
@@@@ -16004,6 +16002,8 @@@@ extern "C"
@


1.1
log
@Initial revision
@
text
@d1 4
a4 3
--- configure.orig	Tue Nov 23 19:55:47 2004
+++ configure	Sat Jan 22 13:12:28 2005
@@@@ -3286,10 +3286,9 @@@@ CFLAGS=$save_CFLAGS
a12 1
+
d15 1
a15 11
 
@@@@ -4489,7 +4488,7 @@@@ if test "${ac_cv_lib_resolv_res_search+s
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@@@ -6728,7 +6727,7 @@@@ echo "$as_me: error: Berkeley DB 3.x or 
d24 1
a24 1
@@@@ -9639,7 +9638,7 @@@@ if test "${ac_cv_lib_resolv_res_search+s
d28 2
a29 2
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
a30 1
 #line $LINENO "configure"
d32 2
a33 19
@@@@ -11814,7 +11813,7 @@@@ if test "${ac_cv_lib_resolv_res_search+s
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@@@ -11892,7 +11891,7 @@@@ if test "${ac_cv_lib_gssapi_gss_unwrap+s
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lgssapi $GSSAPIBASE_LIBS -lgssapi -lkrb5 -lasn1 -lroken ${LIB_CRYPT} ${LIB_DES} -lcom_err ${LIB_SOCKET} $LIBS"
+LIBS="-lgssapi $GSSAPIBASE_LIBS -lgssapi -lkrb5 -lasn1 -lcrypto ${LIB_CRYPT} ${LIB_DES} -lcom_err ${LIB_SOCKET} $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@@@ -12242,8 +12241,8 @@@@ fi
d44 1
a44 23
@@@@ -12435,7 +12434,7 @@@@ if test "${ac_cv_lib_resolv_res_search+s
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
+#LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 #line $LINENO "configure"
 /* confdefs.h.  */
@@@@ -12483,9 +12482,9 @@@@ LIBS=$ac_check_lib_save_LIBS
 fi
 echo "$as_me:$LINENO: result: $ac_cv_lib_resolv_res_search" >&5
 echo "${ECHO_T}$ac_cv_lib_resolv_res_search" >&6
-if test $ac_cv_lib_resolv_res_search = yes; then
-  GSSAPIBASE_LIBS="$GSSAPIBASE_LIBS -lresolv"
-fi
+#if test $ac_cv_lib_resolv_res_search = yes; then
+#  GSSAPIBASE_LIBS="$GSSAPIBASE_LIBS -lresolv"
+#fi
 
   SASL_MECHS="$SASL_MECHS libgssapiv2.la"
   SASL_STATIC_OBJS="$SASL_STATIC_OBJS ../plugins/gssapi.o"
@@@@ -13727,6 +13726,8 @@@@ extern "C"
@


1.1.1.1
log
@Import cyrus-imapd 2.2.12

The Cyrus IMAP server differs from other IMAP server implementations in
that it is generally intended to be run on sealed servers, where normal
users are not permitted to log in. The mailbox database is stored in
parts of the filesystem that are private to the Cyrus IMAP system. All
user access to mail is through the IMAP, POP3, or KPOP protocols.

From Antoine Jacoutot <ajacoutot@@lphp.org>

help & ok naddy@@, thanks!
@
text
@@
