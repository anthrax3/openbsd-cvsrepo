head	1.6;
access;
symbols
	OPENBSD_4_1:1.1.1.1.0.8
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.6
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	alek_20050327:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2017.05.28.15.46.11;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	5tK0B3xUnJddvTII;

1.5
date	2017.05.09.07.33.33;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	JopYbRTEH3rFBUag;

1.4
date	2010.12.02.08.56.32;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2010.10.29.09.26.58;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.03.31.09.33.21;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2005.03.27.18.01.50;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.27.18.01.50;	author alek;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Major update to cyrus-imapd-3.0.1.
- cleanup and fix some ports specific stuff while here

Refer to upstream for changes and upgrade notes.
Note that altnamespace and unixhierarchysep are now on by default on, to match
the behaviour of most other IMAP servers in the world.
@
text
@$OpenBSD: patch-imap_mbexamine_c,v 1.5 2017/05/09 07:33:33 ajacoutot Exp $

64 bit time_t

Index: imap/mbexamine.c
--- imap/mbexamine.c.orig
+++ imap/mbexamine.c
@@@@ -263,7 +263,7 @@@@ static int do_examine(struct findall_data *data, void 
     }
     printf("\n");
     printf("  Last POP3 Login: (%ld) %s", mailbox->i.pop3_last_login,
-           ctime((const long *) &mailbox->i.pop3_last_login));
+           ctime((const long long *) &mailbox->i.pop3_last_login));
     printf("  Highest Mod Sequence: " MODSEQ_FMT "\n",
            mailbox->i.highestmodseq);
 
@


1.5
log
@Update to cyrus-imapd-2.5.11.
@
text
@d1 1
a1 1
$OpenBSD$
d8 1
a8 1
@@@@ -264,7 +264,7 @@@@ static int do_examine(char *name,
d12 2
a13 2
-	   ctime((const long *) &mailbox->i.pop3_last_login));
+	   ctime((const long long *) &mailbox->i.pop3_last_login));
d15 1
a15 1
 	   mailbox->i.highestmodseq);
@


1.4
log
@Remove some un-needed patches. Add some better defaults.
Properly bump this time.
@
text
@d1 8
a8 14
$OpenBSD: patch-imap_mbexamine_c,v 1.3 2010/10/29 09:26:58 ajacoutot Exp $
--- imap/mbexamine.c.orig	Sat Oct 23 12:50:51 2010
+++ imap/mbexamine.c	Sat Oct 23 12:52:55 2010
@@@@ -263,7 +263,7 @@@@ int do_examine(char *name,
     printf("  Number of Messages: %u  Mailbox Size: " UQUOTA_T_FMT " bytes\n",
 	   mailbox->i.exists, mailbox->i.quota_mailbox_used);
     printf("  Last Append Date: (%lu) %s",
-	   mailbox->i.last_appenddate, ctime(&mailbox->i.last_appenddate));
+	   (long unsigned int)mailbox->i.last_appenddate, ctime(&mailbox->i.last_appenddate));
     printf("  UIDValidity: %u  Last UID: %u\n",
 	   mailbox->i.uidvalidity, mailbox->i.last_uid);
     printf("  Deleted: %u  Answered: %u  Flagged: %u\n",
@@@@ -283,7 +283,7 @@@@ int do_examine(char *name,
 	}
d11 3
a13 3
-    printf("  Last POP3 Login: (%ld) %s", mailbox->i.pop3_last_login,
+    printf("  Last POP3 Login: (%ld) %s", (long int)mailbox->i.pop3_last_login,
 	   ctime((const long *) &mailbox->i.pop3_last_login));
a15 2
@@@@ -308,10 +308,10 @@@@ int do_examine(char *name,
 	}
a16 11
 	printf("%06u> UID:%08u   INT_DATE:%lu SENTDATE:%lu SIZE:%-6u\n",
-	       msgno, record.uid, record.internaldate,
-	       record.sentdate, record.size);
+	       msgno, record.uid, (long unsigned int)record.internaldate,
+	       (long unsigned int)record.sentdate, record.size);
 	printf("      > HDRSIZE:%-6u LASTUPD :%lu SYSFLAGS:%08X",
-	       record.header_size, record.last_updated,
+	       record.header_size, (long unsigned int)record.last_updated,
 	       record.system_flags);
 	if (mailbox->i.minor_version >= 5)
 	    printf("   LINES:%-6u\n", record.content_lines);
@


1.3
log
@Update to cyrus-imapd-2.4.2 and add an rc script.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@- update to cyrus-imapd-2.3.8
upgrade notes: http://cyrusimap.web.cmu.edu/imapd/install-upgrade.html
@
text
@d1 23
a23 11
$OpenBSD: patch-imap_mbexamine_c,v 1.1 2005/03/27 18:01:50 alek Exp $
--- imap/mbexamine.c.orig	Mon Aug  9 20:45:33 2004
+++ imap/mbexamine.c	Sat Jan 22 01:10:52 2005
@@@@ -277,7 +277,7 @@@@ int do_examine(char *name,
     if (mailbox.minor_version >= 4)
 	printf("  POP3 New UIDL: %d\n", mailbox.pop3_new_uidl);
     printf("  Last POP3 Login: (%ld) %s", mailbox.pop3_last_login,
-	   ctime(&mailbox.pop3_last_login));
+	   ctime((time_t *)&mailbox.pop3_last_login));
 
     printf("\n Message Info:\n");
d25 11
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import cyrus-imapd 2.2.12

The Cyrus IMAP server differs from other IMAP server implementations in
that it is generally intended to be run on sealed servers, where normal
users are not permitted to log in. The mailbox database is stored in
parts of the filesystem that are private to the Cyrus IMAP system. All
user access to mail is through the IMAP, POP3, or KPOP protocols.

From Antoine Jacoutot <ajacoutot@@lphp.org>

help & ok naddy@@, thanks!
@
text
@@
