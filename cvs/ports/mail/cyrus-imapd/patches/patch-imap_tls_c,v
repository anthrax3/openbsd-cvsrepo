head	1.2;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2017.05.28.15.46.11;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	5tK0B3xUnJddvTII;

1.1
date	2016.07.30.14.19.13;	author ajacoutot;	state Exp;
branches;
next	;
commitid	z4CGzq8hxNs89te6;


desc
@@


1.2
log
@Major update to cyrus-imapd-3.0.1.
- cleanup and fix some ports specific stuff while here

Refer to upstream for changes and upgrade notes.
Note that altnamespace and unixhierarchysep are now on by default on, to match
the behaviour of most other IMAP servers in the world.
@
text
@$OpenBSD: patch-imap_tls_c,v 1.1 2016/07/30 14:19:13 ajacoutot Exp $
Index: imap/tls.c
--- imap/tls.c.orig
+++ imap/tls.c
@@@@ -227,7 +227,7 @@@@ static RSA *tmp_rsa_cb(SSL * s __attribute__((unused))
 }
 #endif
 
-#if OPENSSL_VERSION_NUMBER < 0x10100000L
+#if OPENSSL_VERSION_NUMBER < 0x10100000L || defined(LIBRESSL_VERSION_NUMBER)
 /* replacements for new 1.1 API accessors */
 /* XXX probably put these somewhere central */
 static int DH_set0_pqg(DH *dh, BIGNUM *p, BIGNUM *q, BIGNUM *g)
@


1.1
log
@Update to cyrus-imapd-2.5.9.
@
text
@d1 5
a5 4
$OpenBSD$
--- imap/tls.c.orig	Mon Jul 25 14:00:32 2016
+++ imap/tls.c	Mon Jul 25 14:02:00 2016
@@@@ -222,7 +222,7 @@@@ static RSA *tmp_rsa_cb(SSL * s __attribute__((unused))
@

