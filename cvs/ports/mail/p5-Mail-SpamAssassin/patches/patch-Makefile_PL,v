head	1.13;
access;
symbols
	OPENBSD_6_2:1.13.0.10
	OPENBSD_6_2_BASE:1.13
	OPENBSD_6_1:1.13.0.8
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.13.0.6
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.2
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.4
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.12.0.16
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.14
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.12
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.10
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.12.0.8
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.6
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.4
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.11.0.4
	OPENBSD_4_9_BASE:1.11
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.4
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.8.0.6
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.4
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.1.0.6
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.13
date	2015.04.30.14.41.53;	author sthen;	state Exp;
branches;
next	1.12;
commitid	kHKHyO0mSGhFhTYF;

1.12
date	2011.06.23.17.32.46;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.03.24.23.56.04;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2009.10.23.10.26.18;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2008.09.04.06.42.12;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2007.05.06.13.28.30;	author mbalmer;	state Exp;
branches;
next	1.7;

1.7
date	2007.02.15.19.57.48;	author mbalmer;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2006.10.27.10.12.44;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2006.06.06.17.33.41;	author steven;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2006.03.20.20.18.30;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2005.10.09.09.05.43;	author mbalmer;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2004.10.31.08.44.44;	author sturm;	state Exp;
branches
	1.2.4.1;
next	1.1;

1.1
date	2003.12.27.04.17.01;	author brad;	state Exp;
branches
	1.1.4.1;
next	;

1.1.4.1
date	2004.08.08.00.21.40;	author robert;	state Exp;
branches;
next	;

1.2.4.1
date	2006.06.08.18.41.20;	author sturm;	state Exp;
branches;
next	;

1.3.2.1
date	2006.06.08.20.23.36;	author sturm;	state Exp;
branches;
next	1.3.2.2;

1.3.2.2
date	2007.03.16.17.56.14;	author sturm;	state Exp;
branches;
next	;

1.5.2.1
date	2007.03.09.06.20.10;	author sturm;	state Exp;
branches;
next	1.5.2.2;

1.5.2.2
date	2007.07.06.13.13.11;	author sturm;	state Exp;
branches;
next	;

1.7.2.1
date	2007.07.06.13.13.31;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.13
log
@update to p5-Mail-SpamAssassin 3.4.1
http://svn.apache.org/repos/asf/spamassassin/branches/3.4/build/announcements/3.4.1.txt
@
text
@$OpenBSD: patch-Makefile_PL,v 1.12 2011/06/23 17:32:46 sthen Exp $
--- Makefile.PL.orig	Tue Apr 28 20:57:01 2015
+++ Makefile.PL	Thu Apr 30 14:25:54 2015
@@@@ -832,7 +832,7 @@@@ sub MY::install {
 
   foreach (@@code) {
     # Add our install targets as a dependency to all top-level install targets
-    s/^(install(?:_[a-z]+)?\s*::?\s*.*)$/$1 conf__install data__install/;
+    s/^(install(?:_[a-z]+)?\s*::?\s*.*)$/$1 data__install/;
   }
 
   clean_MY_globals($self);
@


1.12
log
@update SpamAssassin to 3.3.2, thanks Brad and pea@@ for testing. ok pea@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.11 2010/03/24 23:56:04 sthen Exp $
--- Makefile.PL.orig	Tue Jun  7 00:59:19 2011
+++ Makefile.PL	Wed Jun 22 14:54:40 2011
@@@@ -837,7 +837,7 @@@@ sub MY::install {
@


1.11
log
@update to 3.3.1; thanks pea@@ for testing and comments
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.10 2009/10/23 10:26:18 sthen Exp $
--- Makefile.PL.orig	Mon Jan 11 19:23:34 2010
+++ Makefile.PL	Tue Jan 12 19:43:13 2010
@@@@ -836,7 +836,7 @@@@ sub MY::install {
@


1.10
log
@- unbreak with perl 5.10.1 (don't rely on an internal MakeMaker api
which changed).

- take MAINTAINER.

looks ok to jasper.
@
text
@d1 4
a4 17
$OpenBSD: patch-Makefile_PL,v 1.9 2008/09/04 06:42:12 brad Exp $
--- Makefile.PL.orig	Tue Jun 10 10:21:07 2008
+++ Makefile.PL	Fri Oct 23 11:19:10 2009
@@@@ -139,7 +139,11 @@@@ my(
 
 # MakeMaker prior to 6.11 doesn't support DESTDIR which is needed for
 # packaging with builddir!=destdir. See bug 2388.
-$mm_knows_destdir    = $ExtUtils::MakeMaker::Recognized_Att_Keys{DESTDIR};
+# $mm_knows_destdir    = $ExtUtils::MakeMaker::Recognized_Att_Keys{DESTDIR};
+#
+# The above hack uses private MakeMaker API, and fails with Perl 5.10.1.
+# Hardcode it.
+$mm_knows_destdir    = 1;
 $mm_has_good_destdir = $mm_version >= 6.11;
 # Add DESTDIR hack only if it's requested (and necessary)
 $mm_needs_destdir    = $opt{'destdir'} && !$mm_has_good_destdir;
@@@@ -907,7 +911,7 @@@@ sub MY::install {
d10 1
d12 1
a12 2
     # Now do the DESTDIR hack, if necessary.
     next if !$mm_needs_destdir;
@


1.9
log
@Update to SpamAssassin 3.2.5; minor bug fix update.

ok mbalmer@@
@
text
@d1 17
a17 4
$OpenBSD: patch-Makefile_PL,v 1.8 2007/05/06 13:28:30 mbalmer Exp $
--- Makefile.PL.orig	Tue Jun 10 05:21:07 2008
+++ Makefile.PL	Thu Sep  4 01:06:56 2008
@@@@ -907,7 +907,7 @@@@ sub MY::install {
@


1.8
log
@Update to SpamAssassin 3.2.0

ok simon
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.7 2007/02/15 19:57:48 mbalmer Exp $
--- Makefile.PL.orig	Tue May  1 14:54:33 2007
+++ Makefile.PL	Sat May  5 14:48:06 2007
@@@@ -900,7 +900,7 @@@@ sub MY::install {
@


1.7
log
@3.1.8 is a major bug-fix release, including a potential DoS.  The major
highlights are:

- bug 5318: fix for CVE-2007-0451: possible DoS due to incredibly
  long URIs found in the message content.
- bug 5240: disable perl module usage in update channels unless
  --allowplugins is specified
- bug 5288: files with names starting/ending in whitespace weren't usable
- bug 5056: remove Text::Wrap related code due to upstream issues
- bug 5145: update spamassassin and sa-learn to better deal with STDIN
- bug 5140 and 5179: improvements and bug fixes related to DomainKeys
  and DKIM support
- several updates for Received header parsing
- several documentation updates and random taint-variable related issues

A more detailed change log can be read here:

  http://svn.apache.org/repos/asf/spamassassin/branches/3.1/Changes

ok nikolay
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.6 2006/10/27 10:12:44 ajacoutot Exp $
--- Makefile.PL.orig	Tue Feb 13 19:17:14 2007
+++ Makefile.PL	Thu Feb 15 08:24:53 2007
@@@@ -860,7 +860,7 @@@@ sub MY::install {
@


1.7.2.1
log
@MFC:
SECURITY update to 3.2.1
fixes a local user symlink-attack DoS vulnerability; more details at
http://spamassassin.apache.org/advisories/cve-2007-2873.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.7 2007/02/15 19:57:48 mbalmer Exp $
--- Makefile.PL.orig	Fri Jun  8 14:56:25 2007
+++ Makefile.PL	Fri Jul  6 14:50:44 2007
@@@@ -900,7 +900,7 @@@@ sub MY::install {
@


1.6
log
@- update to version 3.1.7 (by Andreas Vögele, with some cleanings)
- use /var/db/spamassassin as homedir for _spamdaemon user
- does _not_ remove /var/db/spamassassin when using `pkg_delete -c`

"go ahead" steven@@
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.PL.orig	Thu Oct 26 14:47:10 2006
+++ Makefile.PL	Thu Oct 26 14:47:26 2006
@@@@ -862,7 +862,7 @@@@ sub MY::install {
@


1.5
log
@update to SpamAssassin 3.1.3

ok maintainer Andreas Voegele
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.4 2006/03/20 20:18:30 steven Exp $
--- Makefile.PL.orig	Wed May 24 22:07:30 2006
+++ Makefile.PL	Fri May 26 08:21:11 2006
@@@@ -857,7 +857,7 @@@@ sub MY::install {
a12 14
@@@@ -1143,13 +1143,6 @@@@ qmail/qmail-spamc$(EXE_EXT): spamc/qmail
 #bin__install: $(INST_SCRIPT)/sa-filter
 #        # $(RM_F) $(B_SCRIPTDIR)/spamassassin
 #        # $(SYMLINK) $(INST_SCRIPT)/sa-filter $(B_SCRIPTDIR)/spamassassin
-
-conf__install:
-	-$(MKPATH) $(B_CONFDIR)
-	$(PERL) -MFile::Copy -e "copy(q{rules/local.cf}, q{$(B_CONFDIR)/local.cf}) unless -f q{$(B_CONFDIR)/local.cf}"
-	$(PERL) -MFile::Copy -e "copy(q{rules/init.pre}, q{$(B_CONFDIR)/init.pre}) unless -f q{$(B_CONFDIR)/init.pre}"
-	$(PERL) -MFile::Copy -e "copy(q{rules/v310.pre}, q{$(B_CONFDIR)/v310.pre}) unless -f q{$(B_CONFDIR)/v310.pre}"
-	$(PERL) -MFile::Copy -e "copy(q{rules/v312.pre}, q{$(B_CONFDIR)/v312.pre}) unless -f q{$(B_CONFDIR)/v312.pre}"
 
 data__install:
 	-$(MKPATH) $(B_DATADIR)
@


1.5.2.1
log
@MFC:
3.1.8 is a major bug-fix release, including a potential DoS.  The major
highlights are:

- bug 5318: fix for CVE-2007-0451: possible DoS due to incredibly
long URIs found in the message content.
- bug 5240: disable perl module usage in update channels unless
--allowplugins is specified
- bug 5288: files with names starting/ending in whitespace weren't usable
- bug 5056: remove Text::Wrap related code due to upstream issues
- bug 5145: update spamassassin and sa-learn to better deal with STDIN
- bug 5140 and 5179: improvements and bug fixes related to DomainKeys
and DKIM support
- several updates for Received header parsing
- several documentation updates and random taint-variable related issues

A more detailed change log can be read here:

http://svn.apache.org/repos/asf/spamassassin/branches/3.1/Changes
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.5 2006/06/06 17:33:41 steven Exp $
--- Makefile.PL.orig	Tue Feb 13 19:17:14 2007
+++ Makefile.PL	Thu Mar  8 21:17:39 2007
@@@@ -860,7 +860,7 @@@@ sub MY::install {
d13 14
@


1.5.2.2
log
@SECURITY update to 3.2.1
fixes a local user symlink-attack DoS vulnerability; more details at
http://spamassassin.apache.org/advisories/cve-2007-2873.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.5.2.1 2007/03/09 06:20:10 sturm Exp $
--- Makefile.PL.orig	Fri Jun  8 14:56:25 2007
+++ Makefile.PL	Fri Jul  6 14:50:41 2007
@@@@ -900,7 +900,7 @@@@ sub MY::install {
@


1.4
log
@maintenance update to 3.1.1

from: new maintainer Andreas Voegele (voegelas at gmx dot net)
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile_PL,v 1.3 2005/10/09 09:05:43 mbalmer Exp $
--- Makefile.PL.orig	Fri Mar 10 20:30:24 2006
+++ Makefile.PL	Sun Mar 19 11:59:51 2006
d13 1
a13 1
@@@@ -1143,12 +1143,6 @@@@ qmail/qmail-spamc$(EXE_EXT): spamc/qmail
d23 1
@


1.3
log
@Update to SpamAssassin 3.1.0.

Release notes available:
http://marc.theaimsgroup.com/?l=spamassassin-announce&m=112674318914008&w=2

From Ben Lovett <ben at tilderoot dot com>
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.2 2004/10/31 08:44:44 sturm Exp $
--- Makefile.PL.orig	Wed Oct  5 09:35:06 2005
+++ Makefile.PL	Wed Oct  5 09:35:33 2005
@@@@ -809,7 +809,7 @@@@ sub MY::install {
d13 1
a13 1
@@@@ -1085,12 +1085,6 @@@@ qmail/qmail-spamc$(EXE_EXT): spamc/qmail
@


1.3.2.1
log
@security update to p5-Mail-SpamAssassin 3.1.3

fixes CVE 2006-2447
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.3 2005/10/09 09:05:43 mbalmer Exp $
--- Makefile.PL.orig	Wed May 24 22:07:30 2006
+++ Makefile.PL	Thu Jun  8 19:04:43 2006
@@@@ -857,7 +857,7 @@@@ sub MY::install {
d13 1
a13 1
@@@@ -1143,13 +1143,6 @@@@ qmail/qmail-spamc$(EXE_EXT): spamc/qmail
a22 1
-	$(PERL) -MFile::Copy -e "copy(q{rules/v312.pre}, q{$(B_CONFDIR)/v312.pre}) unless -f q{$(B_CONFDIR)/v312.pre}"
@


1.3.2.2
log
@MFC:
3.1.8 is a major bug-fix release, including a potential DoS.  The major
highlights are:

- bug 5318: fix for CVE-2007-0451: possible DoS due to incredibly
long URIs found in the message content.
- bug 5240: disable perl module usage in update channels unless
--allowplugins is specified
- bug 5288: files with names starting/ending in whitespace weren't usable
- bug 5056: remove Text::Wrap related code due to upstream issues
- bug 5145: update spamassassin and sa-learn to better deal with STDIN
- bug 5140 and 5179: improvements and bug fixes related to DomainKeys
and DKIM support
- several updates for Received header parsing
- several documentation updates and random taint-variable related issues

A more detailed change log can be read here:

http://svn.apache.org/repos/asf/spamassassin/branches/3.1/Changes
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.3.2.1 2006/06/08 20:23:36 sturm Exp $
--- Makefile.PL.orig	Tue Feb 13 19:17:14 2007
+++ Makefile.PL	Fri Mar 16 18:33:56 2007
@@@@ -860,7 +860,7 @@@@ sub MY::install {
d13 14
@


1.2
log
@update to SpamAssassin 3.01

from maintainer Ben Lovett <ben at tilderoot.com>
@
text
@d1 4
a4 52
$OpenBSD: patch-Makefile_PL,v 1.1 2003/12/27 04:17:01 brad Exp $
--- Makefile.PL.orig	Fri Aug 27 09:37:35 2004
+++ Makefile.PL	Sun Oct  3 10:47:17 2004
@@@@ -356,15 +356,15 @@@@ else {
 }
 $makefile{'macro'}{'RUN_NET_TESTS'} = yesno($opt{'run_net_tests'});
 
-if (HAS_DBI) {
-  $opt{'run_awl_sql_tests'} = prompt(
-    "Run SQL-based Auto-whitelist tests during 'make test' (additional\n".
-    "information required) (y/n)", "n");
-  print "\n";
+# if (HAS_DBI) {
+#   $opt{'run_awl_sql_tests'} = prompt(
+#     "Run SQL-based Auto-whitelist tests during 'make test' (additional\n".
+#     "information required) (y/n)", "n");
+#   print "\n";
+# 
+#   $opt{'run_awl_sql_tests'} = bool($opt{'run_awl_sql_tests'});
+# }
 
-  $opt{'run_awl_sql_tests'} = bool($opt{'run_awl_sql_tests'});
-}
-
 if ($opt{'run_awl_sql_tests'}) {
   my $user_awl_dsn = prompt("SQL AWL DSN (user_awl_dsn): ", "dbi:mysql:spamassassin:localhost");
   my $user_awl_sql_username = prompt("SQL AWL DB username (user_awl_sql_username): ", "");
@@@@ -386,15 +386,15 @@@@ else {
   unlink("t/sql_based_whitelist.cf");
 }
 
-if (HAS_DBI) {
-  $opt{'run_bayes_sql_tests'} = prompt(
-    "Run Bayes SQL storage tests during 'make test' (additional\n".
-    "information required)? (y/n)", 'n');
-  print "\n";
+# if (HAS_DBI) {
+#   $opt{'run_bayes_sql_tests'} = prompt(
+#     "Run Bayes SQL storage tests during 'make test' (additional\n".
+#     "information required)? (y/n)", 'n');
+#   print "\n";
+# 
+#   $opt{'run_bayes_sql_tests'} = bool($opt{'run_bayes_sql_tests'});
+# }
 
-  $opt{'run_bayes_sql_tests'} = bool($opt{'run_bayes_sql_tests'});
-}
-
 if ($opt{'run_bayes_sql_tests'}) {
   my $bayes_sql_dsn = prompt("Bayes SQL DSN (bayes_sql_dsn): ", "dbi:mysql:spamassassin:localhost");
   my $bayes_sql_username = prompt("Bayes SQL DB username (bayes_sql_username): ", "");
@@@@ -855,7 +855,7 @@@@ sub MY::install {
d13 4
a16 5
@@@@ -1118,14 +1118,6 @@@@ qmail/qmail-spamc$(EXE_EXT): spamc/qmail
 	$(MKPATH) qmail
 	$(MAKE_SPAMC_OLD)
 	$(CHMOD) $(PERM_RWX) $@@
-
d20 3
a22 4
-	$(PERL) -MFile::Spec -MFile::Copy \
-	  -e "copy(q{rules/local.cf}, q{$(B_CONFDIR)/local.cf}) unless -f q{$(B_CONFDIR)/local.cf};"
-	$(PERL) -MFile::Spec -MFile::Copy \
-	  -e "copy(q{rules/init.pre}, q{$(B_CONFDIR)/init.pre}) unless -f q{$(B_CONFDIR)/init.pre};"
@


1.2.4.1
log
@security update to p5-Mail-SpamAssassin 3.0.6

fixes CVE 2006-2447
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_PL,v 1.2 2004/10/31 08:44:44 sturm Exp $
--- Makefile.PL.orig	Sat Oct 23 03:39:05 2004
+++ Makefile.PL	Thu Jun  8 18:54:03 2006
@@@@ -364,15 +364,15 @@@@ else {
d28 1
a28 1
@@@@ -394,15 +394,15 @@@@ else {
d52 1
a52 1
@@@@ -878,7 +878,7 @@@@ sub MY::install {
d61 1
a61 1
@@@@ -1141,14 +1141,6 @@@@ qmail/qmail-spamc$(EXE_EXT): spamc/qmail
@


1.1
log
@upgrade p5-Mail-SpamAssassin to 2.61
--
From: new MAINTAINER Ben Lovett <ben at tilderoot dot com>
@
text
@d1 52
a52 4
$OpenBSD$
--- Makefile.PL.orig	Thu Nov 13 11:55:46 2003
+++ Makefile.PL	Thu Nov 13 11:55:55 2003
@@@@ -760,7 +760,7 @@@@
d61 5
a65 4
@@@@ -962,11 +962,6 @@@@
 
 spamd/binaries.mk: spamd/configure
 	cd spamd; ./configure --prefix="$(I_PREFIX)" --sysconfdir="$(I_SYSCONFDIR)" --datadir="$(I_DATADIR)" --enable-ssl="$(ENABLE_SSL)"
d71 2
@


1.1.4.1
log
@SECURITY:
upgrade to 2.64
- prevents a denial of service attack open to certain
malformed messages;

ok brad@@
@
text
@@

