head	1.3;
access;
symbols
	OPENBSD_2_7:1.2.0.10
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.8
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.6
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.4
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	joey_1_1:1.1.1.1
	joey_1:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2000.06.05.00.04.02;	author espie;	state dead;
branches;
next	1.2;

1.2
date	98.04.10.20.49.17;	author provos;	state Exp;
branches
	1.2.10.1;
next	1.1;

1.1
date	97.11.15.00.04.38;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.15.00.04.38;	author deraadt;	state Exp;
branches;
next	;

1.2.10.1
date	2000.09.15.05.01.51;	author marc;	state dead;
branches;
next	;


desc
@@


1.3
log
@Fix pgpsendmail installation so that it no longer ka-blam! replaces
sendmail...
Need some work yet to be repaired and work elegantly with mailwrapper.
@
text
@*** Makefile.orig	Mon Oct 20 18:58:19 1997
--- Makefile	Thu Apr  9 23:30:29 1998
***************
*** 30,36 ****
  
  # Where do your manpages reside?
  #
! MANDIR = /usr/man
  
  
  # Various compilers: if you have problems compiling, you may comment out the
--- 30,36 ----
  
  # Where do your manpages reside?
  #
! MANDIR = /usr/local/man
  
  
  # Various compilers: if you have problems compiling, you may comment out the
***************
*** 112,119 ****
  	$(CC) -o match-email-addr match-email-addr.o $(LDFLAGS)
  
  
! install: dummy pgpsendmail pgpdaemon sendpgppass pgppipe pgpsign extract-addrs\
! 		match-email-addr install.man
  	./install pgpsendmail $(SENDMAIL)
  	./install pgpdaemon
  	./install sendpgppass
--- 112,119 ----
  	$(CC) -o match-email-addr match-email-addr.o $(LDFLAGS)
  
  
! all_install: dummy pgpsendmail pgpdaemon sendpgppass pgppipe pgpsign \
! 	extract-addrs match-email-addr install.man
  	./install pgpsendmail $(SENDMAIL)
  	./install pgpdaemon
  	./install sendpgppass
***************
*** 123,130 ****
  	./install match-email-addr
  
  install.man: clean
! 	cp -rp man/* $(MANDIR)
! 
  
  reminder:
  	@@echo ""
--- 123,129 ----
  	./install match-email-addr
  
  install.man: clean
! 	cp -r man/* $(MANDIR)
  
  reminder:
  	@@echo ""
@


1.2
log
@update to version 1.4.5.
@
text
@@


1.2.10.1
log
@bring mail as of cut-over date into 2.7 branch
@
text
@@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
*** Makefile.old	Sat Oct 15 23:06:26 1994
--- Makefile	Sat Jan 21 03:04:40 1995
d4 3
a6 1
*** 13,28 ****
d8 1
a8 8
  #SENDMAIL = '-DSENDMAIL="/usr/lib/sendmail"'
  
  DEFINES =
  
! CC = cc
! CFLAGS = $(DEFINES) -I. "-DVERSION=\"`cat version`\""
  
  LDFLAGS =
a9 1
  TARGETS =	blindness_assist pgpsendmail pgpdaemon sendpgppass pgppipe
d11 2
a12 1
! all:	$(TARGETS) clean
d14 1
a14 3
  BLINDNESS_ASSIST_OBJ =	blindness_assist.o
  
--- 13,29 ----
d16 1
a16 9
  #SENDMAIL = '-DSENDMAIL="/usr/lib/sendmail"'
  
+ PREFIX = /usr/local
+ 
  DEFINES =
  
! CFLAGS += $(DEFINES) -I. "-DVERSION=\"`cat version`\""
  
  LDFLAGS =
a17 5
  TARGETS =	blindness_assist pgpsendmail pgpdaemon sendpgppass pgppipe
  
! all:    $(TARGETS)
  
  BLINDNESS_ASSIST_OBJ =	blindness_assist.o
d19 1
d21 2
a22 16
*** 39,55 ****
  pgpsendmail.o:	pgpsendmail.c
  	$(CC) $(CFLAGS) $(SENDMAIL) -c pgpsendmail.c
  
  pgpsendmail:	$(PGPSENDMAIL_OBJ)
  	$(CC) -s -o pgpsendmail $(PGPSENDMAIL_OBJ) $(LDFLAGS)
  	@@-./blindness_assist
- 	-./install pgpsendmail
  
  
  PGPDAEMON_OBJ =	pgpdaemon.o spawn.o strings.o memory.o misc.o
  
  pgpdaemon:	$(PGPDAEMON_OBJ)
  	$(CC) -s -o pgpdaemon $(PGPDAEMON_OBJ) $(LDFLAGS)
- 	-./install pgpdaemon
  
a23 4
  SENDPGPPASS_OBJ =	sendpgppass.o conn_to_pgpd.o strings.o spawn.o \
--- 40,55 ----
  pgpsendmail.o:	pgpsendmail.c
  	$(CC) $(CFLAGS) $(SENDMAIL) -c pgpsendmail.c
d25 14
a38 13
+ 
  pgpsendmail:	$(PGPSENDMAIL_OBJ)
  	$(CC) -s -o pgpsendmail $(PGPSENDMAIL_OBJ) $(LDFLAGS)
  	@@-./blindness_assist
  
  
  PGPDAEMON_OBJ =	pgpdaemon.o spawn.o strings.o memory.o misc.o
  
  pgpdaemon:	$(PGPDAEMON_OBJ)
  	$(CC) -s -o pgpdaemon $(PGPDAEMON_OBJ) $(LDFLAGS)
  
  
  SENDPGPPASS_OBJ =	sendpgppass.o conn_to_pgpd.o strings.o spawn.o \
d40 2
a41 8
*** 57,72 ****
  
  sendpgppass:	$(SENDPGPPASS_OBJ)
  	$(CC) -s -o sendpgppass $(SENDPGPPASS_OBJ) $(LDFLAGS)
- 	-./install sendpgppass
  
  
  PGPPIPE_OBJ =	pgppipe.o conn_to_pgpd.o memory.o misc.o
d43 8
a50 3
  pgppipe:	$(PGPPIPE_OBJ)
  	$(CC) -s -o pgppipe $(PGPPIPE_OBJ) $(LDFLAGS)
- 	-./install pgppipe
d52 2
d55 2
a56 35
  clean:
  	rm -f *.BAK *.log *.sed .#* *~ *.bak */*.bak */tmp* .*defaults */*~
  	-chmod u+rw,go-w * 2> /dev/null
--- 57,80 ----
  
  sendpgppass:	$(SENDPGPPASS_OBJ)
  	$(CC) -s -o sendpgppass $(SENDPGPPASS_OBJ) $(LDFLAGS)
  
  
  PGPPIPE_OBJ =	pgppipe.o conn_to_pgpd.o memory.o misc.o
  
  pgppipe:	$(PGPPIPE_OBJ)
  	$(CC) -s -o pgppipe $(PGPPIPE_OBJ) $(LDFLAGS)
  
  
+ all_install:
+ 	/usr/bin/install $(COPY) -o $(BINOWN) -g $(BINGRP) -m $(BINMODE) pgpsendmail $(PREFIX)/lib
+ 	/usr/bin/install -c -o $(BINOWN) -g $(BINGRP) -m 644 doc/pgpsendmail.8 $(PREFIX)/man/man8
+ 	/usr/bin/install $(COPY) -o $(BINOWN) -g $(BINGRP) -m $(BINMODE) pgpdaemon $(PREFIX)/bin
+ 	/usr/bin/install -c -o $(BINOWN) -g $(BINGRP) -m 644 doc/pgpdaemon.8 $(PREFIX)/man/man8
+ 	/usr/bin/install $(COPY) -o $(BINOWN) -g $(BINGRP) -m $(BINMODE) pgppipe $(PREFIX)/bin
+ 	/usr/bin/install -c -o $(BINOWN) -g $(BINGRP) -m 644 doc/pgppipe.1 $(PREFIX)/man/man1
+ 	/usr/bin/install $(COPY) -o $(BINOWN) -g $(BINGRP) -m $(BINMODE) sendpgppass $(PREFIX)/bin
+ 	/usr/bin/install -c -o $(BINOWN) -g $(BINGRP) -m 644 doc/sendpgppass.1 $(PREFIX)/man/man1
+ 
  clean:
  	rm -f *.BAK *.log *.sed .#* *~ *.bak */*.bak */tmp* .*defaults */*~
  	-chmod u+rw,go-w * 2> /dev/null
***************
*** 88,90 ****
--- 96,99 ----
  memory.o:	pgpsendmail.h	karma.h
  pgppipe.o:	pgpsendmail.h	karma.h	version
  misc.o:		pgpsendmail.h	karma.h
+ blindness_assist.o: pgpsendmail.h
@


1.1.1.1
log
@initial ports subsystem from joey
@
text
@@
