head	1.3;
access;
symbols
	OPENBSD_2_7:1.2.0.8
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.6
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.0.2
	OPENBSD_2_3_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2000.06.05.00.04.03;	author espie;	state dead;
branches;
next	1.2;

1.2
date	98.04.28.03.31.32;	author angelos;	state Exp;
branches
	1.2.8.1;
next	1.1;

1.1
date	98.04.10.20.49.20;	author provos;	state Exp;
branches;
next	;

1.2.8.1
date	2000.09.15.05.01.52;	author marc;	state dead;
branches;
next	;


desc
@@


1.3
log
@Fix pgpsendmail installation so that it no longer ka-blam! replaces
sendmail...
Need some work yet to be repaired and work elegantly with mailwrapper.
@
text
@*** install.orig	Thu Oct  9 08:58:17 1997
--- install	Thu Apr  9 23:44:20 1998
***************
*** 1,5 ****
--- 1,7 ----
  #! /bin/csh -f
  
+ set USRBINPATH=/usr/local/bin
+ 
  if ("$#argv" < "1") then
      echo "Usage:	install binary"
      exit 1
***************
*** 29,39 ****
  	exit 0
      endif
      if ( ! -f $USRBINPATH/$binary ) then
! 	cp -p $binary $USRBINPATH
  	exit 0
      endif
      mv $USRBINPATH/$binary $USRBINPATH/${binary}.old
!     cp -p $binary $USRBINPATH
      if ("$status" != "0") then
  	mv $USRBINPATH/${binary}.old $USRBINPATH/$binary
  	exit 1
--- 31,43 ----
  	exit 0
      endif
      if ( ! -f $USRBINPATH/$binary ) then
! 	cp $binary $USRBINPATH
! 	chmod 755 $USRBINPATH/$binary
  	exit 0
      endif
      mv $USRBINPATH/$binary $USRBINPATH/${binary}.old
!     cp $binary $USRBINPATH
!     chmod 755 $USRBINPATH/$binary
      if ("$status" != "0") then
  	mv $USRBINPATH/${binary}.old $USRBINPATH/$binary
  	exit 1
***************
*** 73,80 ****
  	echo "You cannot over-write  ${sendmail_dir}/pgpsendmail"
  	exit 1
      endif
!     cp -p pgpsendmail ${sendmail_dir}/pgpsendmail.new
      mv -f ${sendmail_dir}/pgpsendmail.new ${sendmail_dir}/pgpsendmail
      echo "PGPsendmail installed as ${sendmail_dir}/pgpsendmail"
      if ("$mortal" == "TRUE") then
  	echo "PGPsendmail will expect the real sendmail is ${sendmail_dir}/sendmail"
--- 77,85 ----
  	echo "You cannot over-write  ${sendmail_dir}/pgpsendmail"
  	exit 1
      endif
!     cp pgpsendmail ${sendmail_dir}/pgpsendmail.new
      mv -f ${sendmail_dir}/pgpsendmail.new ${sendmail_dir}/pgpsendmail
+     chmod 555 ${sendmail_dir}/pgpsendmail
      echo "PGPsendmail installed as ${sendmail_dir}/pgpsendmail"
      if ("$mortal" == "TRUE") then
  	echo "PGPsendmail will expect the real sendmail is ${sendmail_dir}/sendmail"
***************
*** 90,104 ****
      if ("$?USRBINPATH" != "0") then
  	if (-w $USRBINPATH) then
  	    echo "Writing PGPsendmail as:  $USRBINPATH/pgpsendmail  instead"
! 	    cp -p pgpsendmail $USRBINPATH
  	    exit 0
  	endif
      endif
      echo "PGPsendmail not installed. Do it yourself."
      exit 2
  endif
! cp -p pgpsendmail ${sendmail_dir}
  cd ${sendmail_dir}
! mv sendmail sendmail.real
! ln -s pgpsendmail sendmail
  
--- 95,111 ----
      if ("$?USRBINPATH" != "0") then
  	if (-w $USRBINPATH) then
  	    echo "Writing PGPsendmail as:  $USRBINPATH/pgpsendmail  instead"
! 	    cp pgpsendmail $USRBINPATH
! 	    chmod 555 $USRBINPATH/pgpsendmail
  	    exit 0
  	endif
      endif
      echo "PGPsendmail not installed. Do it yourself."
      exit 2
  endif
! cp pgpsendmail ${sendmail_dir}
  cd ${sendmail_dir}
+ chmod 4555 pgpsendmail
!#mv sendmail sendmail.real
!#ln -s pgpsendmail sendmail
  
@


1.2
log
@Don't overwrite /usr/sbin/sendmail, since subsequent builds of the
source tree will overwrite that anyway.
@
text
@@


1.2.8.1
log
@bring mail as of cut-over date into 2.7 branch
@
text
@@


1.1
log
@update to version 1.4.5.
@
text
@d74 2
a75 2
  mv sendmail sendmail.real
  ln -s pgpsendmail sendmail
d92 2
a93 2
  mv sendmail sendmail.real
  ln -s pgpsendmail sendmail
@

