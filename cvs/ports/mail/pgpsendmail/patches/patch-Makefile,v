head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.36
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.32
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.34
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.30
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.28
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.26
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.24
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.22
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.20
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.18
	OPENBSD_5_0:1.2.0.16
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.14
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.12
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.10
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.8
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.6
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.0.32
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.30
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.28
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.26
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.24
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.22
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.20
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.18
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.16
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.14
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.12
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2008.01.24.18.31.24;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2000.06.05.00.04.02;	author espie;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Make pgpsendmail respect CC & CFLAGS (fixes build on alpha)
Don't hardcode /usr/local in patch-*

help and ok naddy@@
@
text
@$OpenBSD: patch-Makefile,v 1.1 2000/06/05 00:04:02 espie Exp $
--- Makefile.orig	Mon Oct 20 18:58:19 1997
+++ Makefile	Wed Jan 23 23:08:34 2008
@@@@ -30,7 +30,7 @@@@ DEFINES =
 
 # Where do your manpages reside?
 #
-MANDIR = /usr/man
+MANDIR = ${PREFIX}/man
 
 
 # Various compilers: if you have problems compiling, you may comment out the
@@@@ -38,7 +38,7 @@@@ MANDIR = /usr/man
 # please send me a patch
 
 # Generic ANSI compiler
-CC = cc
+CC ?= cc
 
 # HP/UX compiler
 #CC = cc -Aa -D_HPUX_SOURCE
@@@@ -48,12 +48,12 @@@@ CC = cc
 
 
 # Maybe you want debugging instead, or more optimisation?
-COPTIMISE = -O
+# COPTIMISE = -O
 
 ###############################################################################
 #			No user servicable parts below
 #
-CFLAGS = $(DEFINES) -Iinclude $(COPTIMISE) $(NO_PATH_H) $(PATH_SENDMAIL) \
+CFLAGS += $(DEFINES) -Iinclude $(COPTIMISE) $(NO_PATH_H) $(PATH_SENDMAIL) \
 	$(PATH_MAILDIR)
 
 LDFLAGS = -s $(COPTIMISE) -Llib -lpgpsendmail
@@@@ -112,8 +112,8 @@@@ match-email-addr:	match-email-addr.o lib/libpgpsendmai
 	$(CC) -o match-email-addr match-email-addr.o $(LDFLAGS)
 
 
-install: dummy pgpsendmail pgpdaemon sendpgppass pgppipe pgpsign extract-addrs\
-		match-email-addr install.man
+all_install: dummy pgpsendmail pgpdaemon sendpgppass pgppipe pgpsign \
+	extract-addrs match-email-addr install.man
 	./install pgpsendmail $(SENDMAIL)
 	./install pgpdaemon
 	./install sendpgppass
@@@@ -123,8 +123,7 @@@@ install: dummy pgpsendmail pgpdaemon sendpgppass pgppi
 	./install match-email-addr
 
 install.man: clean
-	cp -rp man/* $(MANDIR)
-
+	cp -r man/* $(MANDIR)
 
 reminder:
 	@@echo ""
@


1.1
log
@Fix pgpsendmail installation so that it no longer ka-blam! replaces
sendmail...
Need some work yet to be repaired and work elegantly with mailwrapper.
@
text
@d1 3
a3 3
$OpenBSD: update-patches,v 1.1 2000/04/19 11:16:27 espie Exp $
--- Makefile.orig	Tue Oct 21 00:58:19 1997
+++ Makefile	Mon Jun  5 01:29:48 2000
d9 1
a9 1
+MANDIR = /usr/local/man
d13 25
a37 1
@@@@ -112,8 +112,8 @@@@ match-email-addr:	match-email-addr.o lib
d48 1
a48 1
@@@@ -123,8 +123,7 @@@@ install: dummy pgpsendmail pgpdaemon sen
@

