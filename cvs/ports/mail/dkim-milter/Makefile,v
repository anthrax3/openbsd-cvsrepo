head	1.40;
access;
symbols
	OPENBSD_6_2:1.40.0.12
	OPENBSD_6_2_BASE:1.40
	OPENBSD_6_1:1.40.0.10
	OPENBSD_6_1_BASE:1.40
	OPENBSD_6_0:1.40.0.8
	OPENBSD_6_0_BASE:1.40
	OPENBSD_5_9:1.40.0.4
	OPENBSD_5_9_BASE:1.40
	OPENBSD_5_8:1.40.0.6
	OPENBSD_5_8_BASE:1.40
	OPENBSD_5_7:1.40.0.2
	OPENBSD_5_7_BASE:1.40
	OPENBSD_5_6:1.38.0.4
	OPENBSD_5_6_BASE:1.38
	OPENBSD_5_5:1.38.0.2
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.36.0.2
	OPENBSD_5_4_BASE:1.36
	OPENBSD_5_3:1.34.0.10
	OPENBSD_5_3_BASE:1.34
	OPENBSD_5_2:1.34.0.8
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.34
	OPENBSD_5_1:1.34.0.6
	OPENBSD_5_0:1.34.0.4
	OPENBSD_5_0_BASE:1.34
	OPENBSD_4_9:1.34.0.2
	OPENBSD_4_9_BASE:1.34
	OPENBSD_4_8:1.32.0.2
	OPENBSD_4_8_BASE:1.32
	OPENBSD_4_7:1.31.0.4
	OPENBSD_4_7_BASE:1.31
	OPENBSD_4_6:1.31.0.2
	OPENBSD_4_6_BASE:1.31
	OPENBSD_4_5:1.29.0.2
	OPENBSD_4_5_BASE:1.29
	OPENBSD_4_4:1.26.0.2
	OPENBSD_4_4_BASE:1.26
	OPENBSD_4_3:1.20.0.2
	OPENBSD_4_3_BASE:1.20
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.1.1.1.0.2
	OPENBSD_4_0_BASE:1.1.1.1
	jakob_20060731:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.40
date	2014.09.17.09.13.12;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	6B840kxHQJkj832j;

1.39
date	2014.09.17.07.52.42;	author jca;	state Exp;
branches;
next	1.38;
commitid	jO4L7hmRLOLvdXQI;

1.38
date	2014.01.15.00.20.42;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2013.10.23.16.33.20;	author jca;	state Exp;
branches;
next	1.36;

1.36
date	2013.03.11.11.23.50;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.08.06.42.09;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2010.11.19.07.23.06;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2010.10.18.19.59.15;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2010.04.15.14.58.24;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2009.06.01.12.15.57;	author jakob;	state Exp;
branches;
next	1.30;

1.30
date	2009.03.06.12.26.33;	author jakob;	state Exp;
branches;
next	1.29;

1.29
date	2009.01.23.06.43.07;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2008.09.03.14.33.06;	author jakob;	state Exp;
branches;
next	1.27;

1.27
date	2008.08.28.08.23.09;	author jakob;	state Exp;
branches;
next	1.26;

1.26
date	2008.07.27.10.25.00;	author jakob;	state Exp;
branches;
next	1.25;

1.25
date	2008.06.24.12.08.04;	author jakob;	state Exp;
branches;
next	1.24;

1.24
date	2008.04.28.20.17.42;	author jakob;	state Exp;
branches;
next	1.23;

1.23
date	2008.04.18.22.12.15;	author jakob;	state Exp;
branches;
next	1.22;

1.22
date	2008.04.15.10.54.53;	author jakob;	state Exp;
branches;
next	1.21;

1.21
date	2008.03.29.12.01.58;	author jakob;	state Exp;
branches;
next	1.20;

1.20
date	2008.02.16.09.26.37;	author jakob;	state Exp;
branches;
next	1.19;

1.19
date	2008.01.28.09.16.55;	author jakob;	state Exp;
branches;
next	1.18;

1.18
date	2008.01.24.15.27.55;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2008.01.03.07.54.45;	author jakob;	state Exp;
branches;
next	1.16;

1.16
date	2007.12.21.08.59.20;	author jakob;	state Exp;
branches;
next	1.15;

1.15
date	2007.12.17.10.59.37;	author jakob;	state Exp;
branches;
next	1.14;

1.14
date	2007.10.21.10.23.18;	author jakob;	state Exp;
branches;
next	1.13;

1.13
date	2007.10.08.07.15.46;	author jakob;	state Exp;
branches;
next	1.12;

1.12
date	2007.09.16.00.17.04;	author merdely;	state Exp;
branches;
next	1.11;

1.11
date	2007.09.08.08.46.33;	author jakob;	state Exp;
branches;
next	1.10;

1.10
date	2007.08.27.06.52.41;	author jakob;	state Exp;
branches;
next	1.9;

1.9
date	2007.08.05.18.51.40;	author jakob;	state Exp;
branches;
next	1.8;

1.8
date	2007.08.05.17.51.47;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2007.06.26.21.12.47;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2007.05.29.14.49.53;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2007.03.21.08.33.36;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.22.13.47.07;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2006.10.29.18.34.25;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.10.17.06.21.57;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2006.07.31.15.40.22;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.07.31.15.40.22;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.40
log
@Cope with recent sendmail subpackaging.
Fix ports that were not able to find the milter includes (since it's not
under /usr/includes anymore).
@
text
@# $OpenBSD: Makefile,v 1.39 2014/09/17 07:52:42 jca Exp $

COMMENT=	DKIM milter

DISTNAME=	dkim-milter-2.8.3
REVISION=	5
CATEGORIES=	mail
HOMEPAGE=	http://sourceforge.net/projects/dkim-milter/

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=dkim-milter/}

MAINTAINER=	Jakob Schlyter <jakob@@openbsd.org>

# sendmail open source license
PERMIT_PACKAGE_CDROM=		Patent
PERMIT_PACKAGE_FTP=		Yes

WANTLIB=	c crypto milter pthread ssl

LIB_DEPENDS=	mail/sendmail,-libmilter

EXAMPLESDIR=	share/examples/dkim-milter

post-configure:
	@@(echo "define(\`confCC', \`${CC}')"; \
	  echo "define(\`confOPTIMIZE', \`${CFLAGS}')"; \
	  echo "define(\`confNO_MAN_BUILD')"; \
	  echo "APPENDDEF(\`confINCDIRS', \`-I${LOCALBASE}/include')"; \
	  echo "APPENDDEF(\`confLIBDIRS', \`-L${LOCALBASE}/lib ')") \
		>${WRKSRC}/devtools/Site/site.config.m4

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/obj.*/dkim-filter/dkim-filter ${PREFIX}/libexec
	${INSTALL_PROGRAM} ${WRKSRC}/obj.*/dkim-filter/dkim-testkey ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/obj.*/dkim-filter/dkim-testssp ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/dkim-filter/dkim-genkey.sh ${PREFIX}/bin/dkim-genkey
	${INSTALL_MAN} ${WRKSRC}/dkim-filter/dkim-filter.conf.5 ${PREFIX}/man/man5
	${INSTALL_MAN} ${WRKSRC}/dkim-filter/dkim-filter.8 ${PREFIX}/man/man8
	${INSTALL_MAN} ${WRKSRC}/dkim-filter/dkim-testkey.8 ${PREFIX}/man/man8
	${INSTALL_MAN} ${WRKSRC}/dkim-filter/dkim-testssp.8 ${PREFIX}/man/man8
	${INSTALL_MAN} ${WRKSRC}/dkim-filter/dkim-genkey.8 ${PREFIX}/man/man8
	${INSTALL_DATA_DIR} ${PREFIX}/${EXAMPLESDIR}
	${INSTALL_DATA} ${WRKSRC}/dkim-filter/dkim-filter.conf.sample ${PREFIX}/${EXAMPLESDIR}

.include <bsd.port.mk>
@


1.39
log
@Cope with sendmail (and libmilter) moving to ports.
Input from sthen@@, ok ajacoutot@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/01/15 00:20:42 sthen Exp $
d6 1
a6 1
REVISION=	4
d20 1
a20 1
LIB_DEPENDS=	mail/sendmail
@


1.38
log
@add an rc script for dkim-milter and disable groff, from Remi Locherer,
tweak from me, whitespace nit from aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/10/23 16:33:20 jca Exp $
d6 1
a6 1
REVISION=	3
d20 2
d27 3
a29 1
	  echo "define(\`confNO_MAN_BUILD')") \
@


1.37
log
@Fix a segfault in the dkim-filter key parsing code.  Reported by David
Hill, thanks!  While here, fix a potential double free.
Maintainer timeout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/03/11 11:23:50 espie Exp $
d6 1
a6 1
REVISION =	2
a20 1
USE_GROFF =	Yes
d24 2
a25 1
	  echo "define(\`confOPTIMIZE', \`${CFLAGS}')") \
@


1.36
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/03/08 06:42:09 ajacoutot Exp $
d6 1
a6 1
REVISION =	1
@


1.35
log
@Move huge MESSAGE to a README.

ok jakob@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/11/19 07:23:06 espie Exp $
a16 2
PERMIT_DISTFILES_CDROM=		Patent
PERMIT_DISTFILES_FTP=		Yes
@


1.34
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/10/18 19:59:15 espie Exp $
d6 1
a6 1
REVISION =	0
@


1.33
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/04/15 14:58:24 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.32
log
@Stupid poor blank lines, stupid poor blank lines...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/06/01 12:15:57 jakob Exp $
d23 1
@


1.31
log
@upgrade to DKIM Milter 2.8.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/03/06 12:26:33 jakob Exp $
d6 1
@


1.30
log
@upgrade to DKIM Milter v2.8.2
also add missing manpage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/01/23 06:43:07 jasper Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.8.2
@


1.29
log
@- update dkim-milter to 2.8.1
* includes a SECURITY FIX for the DDoS in SA33581
- re-order WANTLIB

ok jakob@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/09/03 14:33:06 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.8.1
d33 1
@


1.28
log
@upgrade to 2.7.2; fixes memory leaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/08/28 08:23:09 jakob Exp $
d5 1
a5 2
DISTNAME=	dkim-milter-2.7.2
PKGNAME=	${DISTNAME}
d19 1
a19 1
WANTLIB=	c crypto pthread milter ssl
@


1.27
log
@upgrade to DKIM Milter v2.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/07/27 10:25:00 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.7.1
@


1.26
log
@DKIM Milter v2.7.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/06/24 12:08:04 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.7.0
@


1.25
log
@DKIM milter v2.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/04/28 20:17:42 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.6.0
@


1.24
log
@DKIM Milter v2.5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/04/18 22:12:15 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.5.5
@


1.23
log
@upgrade to v2.5.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/04/15 10:54:53 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.5.4
@


1.22
log
@update to v2.5.3; bugfix release, upgrade recommended
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/03/29 12:01:58 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.5.3
@


1.21
log
@upgrade to DKIM-milter v2.5.2. from the release notes:

"This is mostly a minor bugfix release.  One of the fixes, however, repairs
a variable scope problem that could cause false negatives during SSP
checks.  Thus, an upgrade is advised if you're running 2.5.0 or 2.5.1."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/02/16 09:26:37 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.5.2
@


1.20
log
@add support for RSA-SHA256; from Craig J Copi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/01/28 09:16:55 jakob Exp $
d5 2
a6 2
DISTNAME=	dkim-milter-2.4.4
PKGNAME=	${DISTNAME}p0
@


1.19
log
@DKIM milter v2.4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/01/24 15:27:55 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
@


1.18
log
@honor CC and CFLAGS; ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/01/03 07:54:45 jakob Exp $
d5 2
a6 2
DISTNAME=	dkim-milter-2.4.2
PKGNAME=	${DISTNAME}p0
@


1.17
log
@DKIM milter v2.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/12/21 08:59:20 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
d23 5
@


1.16
log
@update to dkim milter v2.4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/12/17 10:59:37 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.4.1
@


1.15
log
@update to v2.4.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/10/21 10:23:18 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.4.0
@


1.14
log
@dkim-milter version 2.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/10/08 07:15:46 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.3.2
d26 3
d30 3
a34 1
	${INSTALL_DATA} ${WRKSRC}/dkim-filter/gentxt.csh ${PREFIX}/${EXAMPLESDIR}
@


1.13
log
@DKIM Milter v2.3.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/09/16 00:17:04 merdely Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.3.0
@


1.12
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/09/08 08:46:33 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.2.1
@


1.11
log
@update to Sendmail DKIM Filter v2.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/08/27 06:52:41 jakob Exp $
d3 1
a3 1
COMMENT=	"DKIM milter"
@


1.10
log
@DKIM Milter v2.1.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/08/05 17:51:47 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-2.1.2
@


1.9
log
@revert previous commit; my bad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/06/26 21:12:47 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-1.2.0
@


1.8
log
@update to version 2.0.2
@
text
@d5 1
a5 1
DISTNAME=	dkim-milter-2.0.2
@


1.7
log
@update to dkim-milter v1.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/05/29 14:49:53 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-1.2.0
@


1.6
log
@DKIM milter v1.0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/03/21 08:33:36 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-1.0.0
@


1.5
log
@minor update to 0.6.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/11/22 13:47:07 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-0.6.1
@


1.4
log
@add missing MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/10/29 18:34:25 steven Exp $
d5 2
a6 2
DISTNAME=	dkim-milter-0.5.2
PKGNAME=	${DISTNAME}p1
@


1.3
log
@more WANTLIB fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/10/17 06:21:57 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d11 2
@


1.2
log
@version 0.5.2; minor fixes including a postfix compat fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/07/31 15:40:22 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
d18 1
a18 1
WANTLIB=	c pthread milter
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/07/31 12:35:07 jakob Exp $
d5 1
a5 1
DISTNAME=	dkim-milter-0.5.1
@


1.1.1.1
log
@The dkim-milter package is an open source implementation of the DKIM
sender authentication system proposed by the E-mail Signing Technology
Group (ESTG).  DKIM is an amalgamation of the DomainKeys (DK) proposal
by Yahoo!, Inc. and the Internet Identified Mail (IIM) proposal by
Cisco.
@
text
@@
