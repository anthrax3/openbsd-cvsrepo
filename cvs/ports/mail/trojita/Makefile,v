head	1.22;
access;
symbols
	OPENBSD_6_1:1.22.0.2
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.13.0.4
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.2
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.11.0.4
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	jturner_20130425:1.1.1.1
	jturner:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2016.12.28.21.29.53;	author zhuk;	state Exp;
branches;
next	1.21;
commitid	LMiw2W7IQrLviCty;

1.21
date	2016.12.28.18.34.05;	author landry;	state Exp;
branches;
next	1.20;
commitid	pw0ebVXeVyQ7to7q;

1.20
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.19;
commitid	l6KSNN1DfB6ABkhu;

1.19
date	2016.09.06.08.50.50;	author dcoppa;	state Exp;
branches;
next	1.18;
commitid	ZwzuuZ4inD3XOaEO;

1.18
date	2016.09.04.14.03.00;	author landry;	state Exp;
branches;
next	1.17;
commitid	5aD0m3JHiSNVG1ie;

1.17
date	2016.08.21.22.20.48;	author dcoppa;	state Exp;
branches;
next	1.16;
commitid	6dZdHXa9JN2YsIye;

1.16
date	2016.08.20.11.17.38;	author naddy;	state Exp;
branches;
next	1.15;
commitid	ZVNmdXlGN7yRP7Ly;

1.15
date	2016.08.19.10.15.24;	author sthen;	state Exp;
branches;
next	1.14;
commitid	jrsx3wUPRBDD2dUb;

1.14
date	2016.08.09.01.34.05;	author jturner;	state Exp;
branches;
next	1.13;
commitid	TEVPEYNtBx2rB0YF;

1.13
date	2016.01.24.02.35.36;	author jturner;	state Exp;
branches;
next	1.12;
commitid	g78ot8ghIl9GSuPV;

1.12
date	2015.09.14.07.26.02;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	gf9EG81zbbIPfulB;

1.11
date	2015.05.28.10.17.24;	author pascal;	state Exp;
branches;
next	1.10;
commitid	020U4lCPk8wUkCOz;

1.10
date	2015.03.27.08.41.04;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	bGtJfGn7cri3zP6L;

1.9
date	2015.03.14.20.53.36;	author jturner;	state Exp;
branches;
next	1.8;
commitid	UrkzG71U7yb2wwXr;

1.8
date	2014.11.07.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	QYJaNcIko4VHoTIl;

1.7
date	2014.03.21.01.11.52;	author jturner;	state Exp;
branches;
next	1.6;

1.6
date	2014.03.10.20.27.25;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2014.03.09.20.54.07;	author jturner;	state Exp;
branches;
next	1.4;

1.4
date	2013.10.08.22.13.30;	author jturner;	state Exp;
branches;
next	1.3;

1.3
date	2013.10.06.01.51.38;	author jturner;	state Exp;
branches;
next	1.2;

1.2
date	2013.05.08.02.03.11;	author jturner;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.25.22.58.42;	author jturner;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.25.22.58.42;	author jturner;	state Exp;
branches;
next	;


desc
@@


1.22
log
@The Qt5Svg is used by Trojita at runtime, although not via shared library.

So add it to RUN_DEPENDS as well. I've also shuffled dependency lines in
the port for readability.

Notified by Caspar Schutijser (MAINTAINER), thanks!
@
text
@# $OpenBSD: Makefile,v 1.21 2016/12/28 18:34:05 landry Exp $

COMMENT =		fast Qt IMAP e-mail client

DISTNAME =		trojita-0.7
REVISION =		1

SHARED_LIBS =		trojita_plugins	2.0 # 2.0

CATEGORIES =		mail x11

HOMEPAGE =		http://trojita.flaska.net/
MAINTAINER =		Caspar Schutijser <caspar@@schutijser.com>
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=trojita/}
EXTRACT_SUFX =		.tar.xz

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB +=		c m pthread z KF5Gpgmepp-pthread KF5QGpgme
WANTLIB +=		Qt5Core Qt5DBus Qt5Gui Qt5Network Qt5Sql Qt5WebKit
WANTLIB +=		Qt5WebKitWidgets Qt5Widgets qt5keychain gpg-error
WANTLIB +=		gpgme-pthread mimetic assuan

MODULES =		devel/cmake x11/qt5

BUILD_DEPENDS =		x11/qt5/qtsvg

RUN_DEPENDS =		devel/desktop-file-utils \
			x11/gtk+3,-guic \
			x11/qt5/qtsvg

LIB_DEPENDS =		mail/mimetic \
			security/qtkeychain,qt5 \
			x11/kde-applications/gpgmepp \
			x11/qt5/qtwebkit

CONFIGURE_ENV +=	QTDIR="${MODQT_LIBDIR}"
CONFIGURE_ARGS +=	-DWITH_RAGEL=OFF \
			-DGIT_EXECUTABLE=""

TEST_IS_INTERACTIVE =	X11

post-configure:
	ln -sf ${MODQT_LIBDIR}/bin/lconvert ${WRKDIR}/bin

do-test:
	cd ${WRKBUILD} && ${LOCALBASE}/bin/ctest --output-on-failure

.include <bsd.port.mk>
@


1.21
log
@Add qtsvg to BDEP, trojita doesnt link with it but cmake goo says its
REQUIRED...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/12/25 14:34:39 zhuk Exp $
d6 1
a6 1
REVISION =		0
d27 2
d30 3
a32 1
			x11/gtk+3,-guic
a36 1
BUILD_DEPENDS =		x11/qt5/qtsvg
@


1.20
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/09/06 08:50:50 dcoppa Exp $
d33 1
@


1.19
log
@
Remove USE_WXNEEDED, it's handled by cmake now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/09/04 14:03:00 landry Exp $
d6 1
d31 2
a32 1
			x11/kde-applications/gpgmepp
d39 3
@


1.18
log
@Update to trojita 0.7 and switch to qt5, from maintainer Caspar Schutijser.

Note that this is currently broken at runtime because it uses QtWebKit
which still has W^X violations, but runs fine when testing locally w/
USE_WXNEEDED. cmake hacks/fixes for QtWebKit fixes being looked by dcoppa@@..
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.17 2016/08/21 22:20:48 dcoppa Exp $

USE_WXNEEDED =		Yes # QtWebKit
@


1.17
log
@
Remove superfluous stuff, now that USE_WXNEEDED works with gcc 4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/08/20 11:17:38 naddy Exp $
d7 1
a7 2
DISTNAME =		trojita-0.6
REVISION =		1
d9 1
a9 1
SHARED_LIBS =		trojita_plugins	1.0 # 1.0
d16 1
a16 1
EXTRACT_SUFX =		.tar.bz2
d21 4
a24 2
WANTLIB += 		lib/qt4/QtDBus lib/qt4/QtGui lib/qt4/QtNetwork
WANTLIB +=		lib/qt4/QtSql lib/qt4/QtWebKit c m pthread z X11
d26 1
a26 4
MODULES =		devel/cmake gcc4 x11/qt4

MODGCC4_ARCHS =		*
MODGCC4_LANGS =		c++
d30 3
a35 2
			-DWITH_QT5=OFF \
			-DWITH_QTKEYCHAIN_PLUGIN=OFF \
@


1.16
log
@bump for maintainer change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2016/08/19 10:15:24 sthen Exp $
a2 2
# ld wrapper doesn't actually fix build, but setting USE_WXNEEDED for
# documentation purposes.  see CONFIGURE_ARGS.
d37 1
a37 2
			-DGIT_EXECUTABLE="" \
			-DCMAKE_EXE_LINKER_FLAGS="-Wl,-z,wxneeded"
@


1.15
log
@trojita requires W|X mappings (for QtWebKit), so link it with -z wxneeded (it
needs a cmake flag rather than USE_WXNEEDED's ld wrapper, but let's still
add USE_WXNEEDED to provide uniform annotation).

Original diff from Caspar Schutijser (who takes maintainer), tweaks by me
and dcoppa (who managed to avoid needing a patch). ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2016/08/09 01:34:05 jturner Exp $
d10 1
a10 1
REVISION =		0
@


1.14
log
@Remove myself as MAINTAINER. ok juanfra@@
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.13 2016/01/24 02:35:36 jturner Exp $
d12 2
a15 2
SHARED_LIBS =		trojita_plugins	1.0 # 1.0

d17 1
d39 2
a40 1
			-DGIT_EXECUTABLE=""
@


1.13
log
@Update trojita to 0.6.

Git shortlog available here: https://quickgit.kde.org/?p=trojita.git&a=shortlog&h=8c1206a93257143c056404aaec6ec69f06e1ef6c
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/09/14 07:26:02 ajacoutot Exp $
d6 1
a10 2

MAINTAINER =		James Turner <james@@calminferno.net>
@


1.12
log
@Don't pickup qtkeychain.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/05/28 10:17:24 pascal Exp $
d5 1
a5 2
DISTNAME =		trojita-0.5
REVISION =		1
d32 1
a32 2
CONFIGURE_ARGS +=	-DWITH_HARMATTAN=OFF \
			-DWITH_RAGEL=OFF \
@


1.11
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/03/27 08:41:04 ajacoutot Exp $
d36 1
@


1.10
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/03/14 20:53:36 jturner Exp $
d6 1
a6 1
REVISION =		0
@


1.9
log
@Update trojita to 0.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/11/07 10:40:05 ajacoutot Exp $
d6 1
d30 1
a30 1
			x11/gtk+2,-guic
@


1.8
log
@No need for default CMAKE_BUILD_TYPE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/03/21 01:11:52 jturner Exp $
d5 1
a5 1
DISTNAME =		trojita-0.4.1
d9 1
a9 1
SHARED_LIBS =		trojita_plugins	0.0 # 0.0
d20 2
a21 2
WANTLIB += 		lib/qt4/QtGui lib/qt4/QtNetwork lib/qt4/QtSql
WANTLIB +=		lib/qt4/QtWebKit c m pthread z X11
@


1.7
log
@Update trojita to 0.4.1

This update fixes CVE-2014-2567. More information here:
http://jkt.flaska.net/blog/Trojita_0_4_1__a_security_update_for_CVE_2014_2567.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/03/10 20:27:25 landry Exp $
d32 1
a32 2
CONFIGURE_ARGS +=	-DCMAKE_BUILD_TYPE=Release \
			-DWITH_HARMATTAN=OFF \
@


1.6
log
@Bump ports using gcc4 module.
(not: mozilla ports not bumped since they're going to be updated in a few)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/03/09 20:54:07 jturner Exp $
d5 1
a5 2
DISTNAME =		trojita-0.4
REVISION =		2
d21 1
a21 1
WANTLIB +=		lib/qt4/QtWebKit c m pthread z
@


1.5
log
@Update trojita to 0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/10/08 22:13:30 jturner Exp $
d6 2
@


1.4
log
@When both qt4 and qt3 are installed make sure lconvert, lrelease and
lupdate from qt4 are used. Found out the hard way during a bulk by
naddy@@. Bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/10/06 01:51:38 jturner Exp $
d5 1
a5 2
DISTNAME =		trojita-0.3.96
REVISION =		0
@


1.3
log
@Update trojita to 0.3.96 and switch to new cmake build system.

Thanks to Amit Kulkarni <amitkulz at gmail dot com> for testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/05/08 02:03:11 jturner Exp $
d6 1
@


1.2
log
@Update trojita to 0.3.93.

ok bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/04/25 22:58:42 jturner Exp $
d5 1
a5 1
DISTNAME =		trojita-0.3.93
d8 2
d19 4
a22 3
WANTLIB += 		ICE lib/qt4/QtGui lib/qt4/QtNetwork lib/qt4/QtSql
WANTLIB +=		lib/qt4/QtWebKit SM X11 Xext Xi Xinerama Xrender
WANTLIB += 		c fontconfig freetype m pthread stdc++
d24 2
a25 1
MODULES =		x11/qt4
d30 6
a35 1
FAKE_FLAGS =		INSTALL_ROOT=${WRKINST}
a36 1
TEST_FLAGS =		DISPLAY=:0
d39 2
a40 2
do-configure:
	cd ${WRKDIST} && qmake4 trojita.pro
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME =		trojita-0.3.92
d7 2
@


1.1.1.1
log
@Import ports/mail/trojita. ok bcallah@@ landry@@ sthen@@

Trojita is a fast Qt IMAP e-mail client. It offers on-demand message
list and body part loading, offline IMAP support, IMAP over SSH (in
addition to the usual SSL/TLS connections) and deals with HTML mail in a
safe and robust way.
@
text
@@
