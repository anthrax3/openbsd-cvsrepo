head	1.69;
access;
symbols
	OPENBSD_6_1:1.60.0.2
	OPENBSD_6_1_BASE:1.60
	OPENBSD_6_0:1.56.0.2
	OPENBSD_6_0_BASE:1.56
	OPENBSD_5_9:1.52.0.2
	OPENBSD_5_9_BASE:1.52
	OPENBSD_5_8:1.50.0.4
	OPENBSD_5_8_BASE:1.50
	OPENBSD_5_7:1.49.0.2
	OPENBSD_5_7_BASE:1.49
	OPENBSD_5_6:1.46.0.2
	OPENBSD_5_6_BASE:1.46
	OPENBSD_5_5:1.44.0.2
	OPENBSD_5_5_BASE:1.44
	OPENBSD_5_4:1.40.0.2
	OPENBSD_5_4_BASE:1.40
	OPENBSD_5_3:1.31.0.2
	OPENBSD_5_3_BASE:1.31
	OPENBSD_5_2:1.29.0.2
	OPENBSD_5_2_BASE:1.29
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.2
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.9.0.6
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.4
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.2
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.8.0.4
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	courier-authlib_20061103:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.69
date	2017.09.29.09.04.04;	author sthen;	state Exp;
branches;
next	1.68;
commitid	k183Ek2F3NStKU27;

1.68
date	2017.09.27.13.20.02;	author giovanni;	state Exp;
branches;
next	1.67;
commitid	zyTvd13DcDW7CCQy;

1.67
date	2017.09.26.16.14.07;	author giovanni;	state Exp;
branches;
next	1.66;
commitid	J6u3cN6N3NRUxd3Z;

1.66
date	2017.08.15.11.11.40;	author sthen;	state Exp;
branches;
next	1.65;
commitid	vmUiQQV4Jazzk0G7;

1.65
date	2017.08.09.20.36.40;	author giovanni;	state Exp;
branches;
next	1.64;
commitid	hxnv3dZ5VjOpgIDL;

1.64
date	2017.08.04.23.14.32;	author giovanni;	state Exp;
branches;
next	1.63;
commitid	O1XVo9ExaiSx64GU;

1.63
date	2017.07.26.22.45.25;	author sthen;	state Exp;
branches;
next	1.62;
commitid	tD4MFrpYYDDL2UFT;

1.62
date	2017.07.16.19.18.59;	author espie;	state Exp;
branches;
next	1.61;
commitid	tt0GhWK5c4uf9ILG;

1.61
date	2017.04.10.11.46.22;	author sthen;	state Exp;
branches;
next	1.60;
commitid	BLsh88fJB8thZTwY;

1.60
date	2017.02.09.14.43.04;	author giovanni;	state Exp;
branches;
next	1.59;
commitid	g9JGhWXcn6wv92NB;

1.59
date	2016.09.23.09.16.56;	author sthen;	state Exp;
branches;
next	1.58;
commitid	XLnI6AbHAmyVU5mO;

1.58
date	2016.09.06.12.10.05;	author sthen;	state Exp;
branches;
next	1.57;
commitid	raeJd2P1Nglaez0C;

1.57
date	2016.09.04.11.40.25;	author giovanni;	state Exp;
branches;
next	1.56;
commitid	373GnugpridGnMdk;

1.56
date	2016.05.27.16.18.28;	author giovanni;	state Exp;
branches;
next	1.55;
commitid	Pra5HitMy04xH7x8;

1.55
date	2016.03.23.12.12.26;	author naddy;	state Exp;
branches;
next	1.54;
commitid	V2ka4j3QNSuW3auN;

1.54
date	2016.03.18.21.37.51;	author giovanni;	state Exp;
branches;
next	1.53;
commitid	Bi0aqtAw26QnwTxY;

1.53
date	2016.03.11.19.59.15;	author naddy;	state Exp;
branches;
next	1.52;
commitid	pguKLBEFv33DrgKU;

1.52
date	2015.08.28.21.14.42;	author jca;	state Exp;
branches;
next	1.51;
commitid	8bGHQJSnhqSJEy7N;

1.51
date	2015.08.27.09.29.53;	author giovanni;	state Exp;
branches;
next	1.50;
commitid	NdSzgVGjeDTn1Yfu;

1.50
date	2015.07.15.21.14.06;	author ajacoutot;	state Exp;
branches;
next	1.49;
commitid	7H4KFOo5iCdAqWek;

1.49
date	2014.10.28.09.19.29;	author giovanni;	state Exp;
branches;
next	1.48;
commitid	04xfJD1Dr9uOQWXz;

1.48
date	2014.09.15.15.18.16;	author naddy;	state Exp;
branches;
next	1.47;
commitid	pTz23Y6NotogHC5i;

1.47
date	2014.09.13.18.09.21;	author brad;	state Exp;
branches;
next	1.46;
commitid	PpbRjVZdAmlrmi8q;

1.46
date	2014.04.21.16.27.20;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2014.04.11.09.35.04;	author giovanni;	state Exp;
branches;
next	1.44;

1.44
date	2014.01.25.13.12.12;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2013.08.23.08.24.23;	author zhuk;	state Exp;
branches;
next	1.42;

1.42
date	2013.08.23.08.08.33;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2013.08.23.07.58.38;	author zhuk;	state Exp;
branches;
next	1.40;

1.40
date	2013.06.20.08.26.13;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2013.06.20.06.54.36;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2013.06.17.19.28.36;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2013.06.12.20.36.33;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2013.05.25.00.33.09;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	2013.05.15.09.48.43;	author sebastia;	state Exp;
branches;
next	1.34;

1.34
date	2013.05.07.08.07.34;	author giovanni;	state Exp;
branches;
next	1.33;

1.33
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2013.03.11.11.23.50;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2012.12.23.12.25.31;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2012.10.18.08.04.01;	author giovanni;	state Exp;
branches;
next	1.29;

1.29
date	2012.04.28.10.52.08;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.02.21.22.19.31;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2011.11.18.13.16.06;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2011.11.18.13.14.56;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2011.06.29.12.25.14;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2011.06.10.13.45.56;	author gsoares;	state Exp;
branches;
next	1.22;

1.22
date	2011.03.20.13.06.23;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.03.17.16.49.27;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.12.16.17.52.12;	author giovanni;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.19.07.23.06;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.09.20.13.25;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.18.19.59.15;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.05.13.41.10;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2010.06.23.16.31.22;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2010.04.21.07.14.59;	author giovanni;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.28.14.18.04;	author giovanni;	state Exp;
branches;
next	1.10;

1.10
date	2009.09.15.17.37.21;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2008.05.15.14.16.41;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2007.07.27.09.49.17;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2007.07.18.11.47.12;	author aanriot;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.25.12.12.26;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.12.23.10.30.20;	author mbalmer;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.25.20.51.02;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.11.13.18.39;	author mbalmer;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.03.15.16.41;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2006.11.03.11.45.31;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.11.03.11.45.31;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.69
log
@needs libtool.m4
@
text
@# $OpenBSD: Makefile,v 1.68 2017/09/27 13:20:02 giovanni Exp $

COMMENT-main=		authentication library for courier
COMMENT-ldap=		ldap authentication module for courier-authLib
COMMENT-mysql=		mysql authentication module for courier-authLib
COMMENT-pgsql=		pgsql authentication module for courier-authLib
COMMENT-userdb=		userdb authentication module for courier-authLib

DISTNAME=		courier-authlib-0.68.0
REVISION=		2
PKGNAME-main=		${DISTNAME}
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}
PKGNAME-mysql=		${DISTNAME:S/lib-/lib-mysql-/}
PKGNAME-pgsql=		${DISTNAME:S/lib-/lib-pgsql-/}
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}

SHARED_LIBS +=  courierauth          1.0      # .0.0
SHARED_LIBS +=  courierauthsasl      1.0      # .0.0
SHARED_LIBS +=  courierauthsaslclient 0.0     # .0.0
SHARED_LIBS +=  courierauthcommon    1.0      # .0.0
SHARED_LIBS +=  authuserdb           0.0      # .0.0
SHARED_LIBS +=  authpwd              0.0      # .0.0
SHARED_LIBS +=  authpgsql            0.0      # .0.0
SHARED_LIBS +=  authldap             1.0      # .0.0
SHARED_LIBS +=  authmysql            0.0      # .0.0
SHARED_LIBS +=  authpipe             0.0      # .0.0
SHARED_LIBS +=  authsqlite           0.0      # .0.0

CATEGORIES=		mail security
HOMEPAGE=		http://www.courier-mta.org/authlib/

MAINTAINER=		Giovanni Bechis <giovanni@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=courier/}
EXTRACT_SUFX=		.tar.bz2

USE_GMAKE=		Yes
AUTOCONF_VERSION=	2.69
AUTOMAKE_VERSION=	1.15
# only libs/rfc822/configure.ac is patched
AUTOCONF_DIR=		${WRKSRC}/libs/rfc822
CONFIGURE_STYLE=	autoconf automake

CONFIGURE_ENV=		LIBS="-L${LOCALBASE}/lib" \
			LDFLAGS="-L${LOCALBASE}/lib" \
			CPPFLAGS="-I${LOCALBASE}/include" \
			ac_cv_lib_db_dbopen=no \
			ac_cv_lib_db_db_env_create=no

COURIERSTATE=		/var/run/courier-auth
EXAMPLE_DIR=		${PREFIX}/share/examples/courier-authlib
SUBST_VARS=		COURIERSTATE EXAMPLE_DIR

CONFIGURE_ARGS+=	--enable-static \
			--without-authpam \
			--without-authvchkpw \
			--without-authcustom \
			--with-authpwd \
			--with-authshadow \
			--with-mailuser=_courier \
			--with-mailgroup=_courier \
			--with-pkgconfdir=${SYSCONFDIR}/courier \
			--with-authdaemonvar=${COURIERSTATE} \
			--libdir=${PREFIX}/lib \
			--includedir=${PREFIX}/include \
			--enable-ltdl-install=no \
			--with-ltdl-lib=${LOCALBASE}/lib \
			--with-ltdl-include=${LOCALBASE}/include \
			--cache-file=${WRKDIR}/courier-authlib.cache

RUN_DEPENDS-main=	lang/expect
BUILD_DEPENDS=		devel/libtool \
			lang/expect \
			mail/courier-unicode>=2.0

DOCS=			COPYING COPYING.GPL INSTALL NEWS README

MODULES=		textproc/intltool

MULTI_PACKAGES=		-main -ldap -mysql -pgsql -userdb
PSEUDO_FLAVORS=		no_ldap no_mysql no_pgsql no_userdb
FLAVOR?=

WANTLIB-main=		c ltdl m pthread sqlite3 ${COMPILER_LIBCXX}

LIB_DEPENDS-main=	databases/sqlite3 \
			devel/libtool,-ltdl

# statically linked
WANTLIB-main+=		iconv idn intl
LIB_DEPENDS-main+=	devel/gettext \
			devel/libidn

WANTLIB-ldap=		crypto ssl courierauthcommon courierauth \
			m ldap-2.4 lber-2.4 sasl2 ${COMPILER_LIBCXX}
RUN_DEPENDS-ldap=
LIB_DEPENDS-ldap=	${BUILD_PKGPATH} \
			databases/openldap \
			security/cyrus-sasl2

WANTLIB-mysql=		crypto m ssl z courierauthcommon courierauth \
			mysqlclient pthread ${COMPILER_LIBCXX}
RUN_DEPENDS-mysql=
LIB_DEPENDS-mysql=	${BUILD_PKGPATH} \
			databases/mariadb

WANTLIB-pgsql=		m courierauthcommon courierauth pq crypto ssl \
			${COMPILER_LIBCXX}
RUN_DEPENDS-pgsql=
LIB_DEPENDS-pgsql=	${BUILD_PKGPATH} \
			databases/postgresql

WANTLIB-userdb=		c courierauthcommon courierauth \
			gdbm>=3 iconv intl
LIB_DEPENDS-userdb=	${BUILD_PKGPATH} \
			databases/gdbm

.include <bsd.port.arch.mk>

.if ${BUILD_PACKAGES:M-ldap}
CONFIGURE_ARGS+=	--with-authldap
DOCS+=			README.ldap
.else
CONFIGURE_ARGS+=	--without-authldap
.endif

.if ${BUILD_PACKAGES:M-mysql}
CONFIGURE_ARGS+=	--with-authmysql \
			--with-mysql-libs=${LOCALBASE}/lib/mysql \
			--with-mysql-includes=${LOCALBASE}/include/mysql
DOCS+=			README.authmysql.myownquery
.else
CONFIGURE_ARGS+=	--without-authmysql
.endif

.if ${BUILD_PACKAGES:M-pgsql}
CONFIGURE_ARGS+=	--with-authpgsql \
			--with-pgsql-libs=${LOCALBASE}/lib \
			--with-pgsql-includes=${LOCALBASE}/include/postgresql
.else
CONFIGURE_ARGS+=	--without-authpgsql
.endif

.if ${BUILD_PACKAGES:M-userdb}
CONFIGURE_ARGS+=	--with-makedatprog=${PREFIX}/libexec/courier-authlib/makedatprog \
			--with-authuserdb \
			--with-db=gdbm
.else
CONFIGURE_ARGS+=	--without-authuserdb \
			--without-makedatprog
.endif

post-install:
	mv ${PREFIX}/lib/courier-authlib/lib* ${PREFIX}/lib

	${INSTALL_SCRIPT} ${WRKSRC}/sysconftool \
	    ${PREFIX}/libexec/courier-authlib/sysconftool
	${INSTALL_SCRIPT} ${WRKSRC}/authmigrate \
	    ${PREFIX}/libexec/courier-authlib/authmigrate
	${INSTALL_DATA_DIR} ${EXAMPLE_DIR}
	@@mv ${WRKINST}${SYSCONFDIR}/courier/*.dist ${EXAMPLE_DIR}
	@@chown root:wheel ${EXAMPLE_DIR}/*
.if ${BUILD_PACKAGES:M-ldap}
	${INSTALL_DATA} ${WRKSRC}/authldap.schema ${EXAMPLE_DIR}
.endif
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/courier-authlib
.for i in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/${i} ${PREFIX}/share/doc/courier-authlib
.endfor
	chmod a+r ${PREFIX}/share/examples/courier-authlib/*.dist

.include <bsd.port.mk>
@


1.68
log
@missing automake build_depends
spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2017/09/26 16:14:07 giovanni Exp $
d75 2
a76 1
BUILD_DEPENDS=		lang/expect \
@


1.67
log
@Unbreak autoconf checks with clang by not using nested functions
with input from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2017/08/15 11:11:40 sthen Exp $
d42 1
d45 1
a45 1
CONFIGURE_STYLE=	autoconf
@


1.66
log
@Add missing devel/libidn dependency. List the statically linked libraries
in WANTLIB+LIB_DEPENDS with a warning comment, to encourage pkg_add to update
courier-authlib when there are changes to the libs. ok giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2017/08/09 20:36:40 giovanni Exp $
d10 1
a10 1
REVISION=		1
d41 4
a44 1
CONFIGURE_STYLE=	gnu
@


1.65
log
@drop gettext module
prodded and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2017/08/04 23:14:32 giovanni Exp $
d10 1
a10 1
REVISION=		0
d82 1
a82 1
WANTLIB-main=		c iconv intl ltdl m pthread sqlite3 ${COMPILER_LIBCXX}
a84 1
			devel/gettext \
d86 5
@


1.64
log
@Update to 0.68
ok portwise sthen@@ on a similar diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2017/07/26 22:45:25 sthen Exp $
d10 1
d76 1
a76 2
MODULES=		devel/gettext \
			textproc/intltool
d82 1
a82 1
WANTLIB-main=		c ltdl m pthread sqlite3 ${COMPILER_LIBCXX}
d85 1
d108 1
a108 1
			gdbm>=3 ${MODGETTEXT_WANTLIB}
a109 1
			${MODGETTEXT_LIB_DEPENDS} \
@


1.63
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2017/07/16 19:18:59 espie Exp $
d9 1
a9 1
DISTNAME=		courier-authlib-0.67.0
a14 5
REVISION-ldap=		0
REVISION-main=		0
REVISION-mysql=		0
REVISION-pgsql=		0
REVISION-userdb=	0
d71 1
a71 1
			mail/courier-unicode
d82 1
a82 1
WANTLIB-main=		c ltdl pthread sqlite3
d88 1
a88 1
			ldap-2.4 lber-2.4 sasl2
d100 2
a101 1
WANTLIB-pgsql=		m courierauthcommon courierauth pq crypto ssl
@


1.62
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2017/04/10 11:46:22 sthen Exp $
d15 5
@


1.61
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2017/02/09 14:43:04 giovanni Exp $
d95 1
a95 1
			mysqlclient pthread ${LIBCXX}
@


1.60
log
@bugfix update to 0.67.0
patch committed upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2016/09/23 09:16:56 sthen Exp $
d95 1
a95 1
			mysqlclient pthread stdc++
@


1.59
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2016/09/06 12:10:05 sthen Exp $
d9 1
a9 1
DISTNAME=		courier-authlib-0.66.4
a14 3
REVISION=		1
REVISION-userdb=	2
REVISION-main=		2
@


1.58
log
@fix REVISION-userdb in courier-authlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2016/09/04 11:40:25 giovanni Exp $
d17 1
d87 2
a88 1
LIB_DEPENDS-main=	devel/libtool,-ltdl
@


1.57
log
@unbreak userdbpw(8), spotted by Stanley Lieber, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2016/05/27 16:18:28 giovanni Exp $
d16 1
a16 1
REVISION-userdb=	0
@


1.56
log
@Use getpwnam_shadow(3) where needed
remove trailing whitespaces
ok on a similar diff sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2016/03/23 12:12:26 naddy Exp $
d16 1
@


1.55
log
@g/c PFRAG.shared; ok giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/03/18 21:37:51 giovanni Exp $
d15 1
a15 1
REVISION=		0
d105 2
a106 1
WANTLIB-userdb=		c courierauthcommon courierauth gdbm>=3 ${MODGETTEXT_WANTLIB}
@


1.54
log
@bugfix update to 0.66.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/03/11 19:59:15 naddy Exp $
d15 1
@


1.53
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2015/08/28 21:14:42 jca Exp $
d9 1
a9 1
DISTNAME=		courier-authlib-0.66.3
@


1.52
log
@Unbreak, courier-unicode is now required by the configure script.

This is only used by two tests, thus it is only a BUILD_DEPENDS, not
a LIB_DEPENDS.

ok giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/08/27 09:29:53 giovanni Exp $
a51 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
@


1.51
log
@Bugfix update to 0.66.3, a patch has been committed upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/07/15 21:14:06 ajacoutot Exp $
d71 2
a72 1
BUILD_DEPENDS=		lang/expect
@


1.50
log
@Fix pexp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/10/28 09:19:29 giovanni Exp $
d9 1
a9 4
DISTNAME=		courier-authlib-0.66.1
REVISION=		1
REVISION-main=		2
REVISION-mysql=		2
@


1.49
log
@unbreak after MySQL -> Mariadb switch and remove useless patches.
hints and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/09/15 15:18:16 naddy Exp $
d11 1
@


1.48
log
@missing bump after switch to MariaDB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2014/09/13 18:09:21 brad Exp $
d10 2
a17 3
REVISION=		0
REVISION-mysql=		1

d84 1
a84 1
WANTLIB-main=		c ltdl sqlite3
d95 2
a96 1
WANTLIB-mysql=		crypto m ssl z courierauthcommon courierauth mysqlclient
@


1.47
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/04/21 16:27:20 sthen Exp $
a9 1
REVISION=		0
d16 2
a17 1
REVISION-mysql=		0
@


1.46
log
@sync wantlib (kerberos)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/04/11 09:35:04 giovanni Exp $
d17 2
d99 1
a99 1
			databases/mysql
@


1.45
log
@
bugfix update to 0.66.1
remove an hidden dependency on db/v4 spotted by espie@@ and naddy@@, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/01/25 13:12:12 espie Exp $
d10 1
d87 2
a88 3
WANTLIB-ldap=		crypto ssl asn1 com_err gssapi krb5 \
			courierauthcommon courierauth ldap-2.4 lber-2.4 sasl2 \
			asn1 heimbase krb5 roken wind
d99 1
a99 2
WANTLIB-pgsql=		m courierauthcommon courierauth pq com_err crypto ssl \
			asn1 heimbase krb5 roken wind
@


1.44
log
@fix rights on sample files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/08/23 08:24:23 zhuk Exp $
d9 1
a9 6
DISTNAME=			courier-authlib-0.65.0
REVISION-main=		2
REVISION-mysql=		5
REVISION-ldap=		5
REVISION-pgsql=		5
REVISION-userdb=	0
d44 3
a46 1
			CPPFLAGS="-I${LOCALBASE}/include"
@


1.43
log
@Oops, RUN_DEPENDS were affected by devel/gettext, too. Make sure
nothing except -userdb depends on it (bump again).

Noticed by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/08/23 08:08:33 sthen Exp $
d10 4
a13 4
REVISION-main=		1
REVISION-mysql=		4
REVISION-ldap=		4
REVISION-pgsql=		4
d165 1
@


1.42
log
@Missing bumps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/08/23 07:58:38 zhuk Exp $
d11 3
a13 3
REVISION-mysql=		3
REVISION-ldap=		3
REVISION-pgsql=		3
d92 1
d98 1
d104 1
@


1.41
log
@Fix dependencies handling, add MODULES=devel/gettext.
Affects only -userdb package.

okay giovanni@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/06/20 08:26:13 ajacoutot Exp $
d11 3
a13 3
REVISION-mysql=		2
REVISION-ldap=		2
REVISION-pgsql=		2
@


1.40
log
@No need for pthread.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/06/20 06:54:36 ajacoutot Exp $
d14 1
d74 1
a74 1
BUILD_DEPENDS=		${RUN_DEPENDS-main}
d78 3
d105 1
a105 2
WANTLIB-userdb=		c courierauthcommon courierauth gdbm>=3 iconv intl
MODULES-userdb=		textproc/intltool
d107 1
@


1.39
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/06/17 19:28:36 ajacoutot Exp $
d12 2
a13 2
REVISION-ldap=		1
REVISION-pgsql=		1
d87 1
a87 1
			asn1 heimbase krb5 pthread roken wind
d97 1
a97 1
			asn1 heimbase krb5 pthread roken wind
@


1.38
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/06/12 20:36:33 brad Exp $
d10 4
a13 4
REVISION-main=		0
REVISION-mysql=		1
REVISION-ldap=		0
REVISION-pgsql=		0
d85 1
a85 1
WANTLIB-ldap=		crypto ssl asn1 com_err gssapi krb5 heimntlm \
d87 1
a87 1
			asn1 heimbase hx509 krb5 pthread roken wind
d97 1
a97 1
			asn1 heimbase hx509 krb5 pthread roken wind
@


1.37
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/05/25 00:33:09 brad Exp $
d12 2
d85 3
a87 2
WANTLIB-ldap=		crypto ssl asn1 com_err gssapi krb5 \
			courierauthcommon courierauth ldap-2.4 lber-2.4 sasl2
d96 2
a97 1
WANTLIB-pgsql=		m courierauthcommon courierauth pq com_err crypto ssl
@


1.36
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/05/15 09:48:43 sebastia Exp $
d11 1
a11 1
REVISION-mysql=		0
d91 1
a91 1
			databases/mariadb
@


1.35
log
@fix dependencies after expect update

OK giovanni@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/05/07 08:07:34 giovanni Exp $
d11 1
d91 1
a91 1
			databases/mysql
@


1.34
log
@
Update to 0.65
some bugs fixed and a new sqlite auth module has been added
ok william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/03/21 08:46:32 ajacoutot Exp $
d10 1
d69 1
a69 1
RUN_DEPENDS-main=	lang/expect,no_tk
@


1.33
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/03/11 11:23:50 espie Exp $
d9 1
a9 3
DISTNAME=			courier-authlib-0.64.0
REVISION-ldap=		0
REVISION-pgsql=		0
d26 1
d77 1
a77 1
WANTLIB-main=		c ltdl
d95 2
a96 1
WANTLIB-userdb=		c courierauthcommon courierauth gdbm>=3
@


1.32
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/12/23 12:25:31 sthen Exp $
a40 1
USE_LIBTOOL=		Yes
@


1.31
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/10/18 08:04:01 giovanni Exp $
a35 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.30
log
@
Bugfix update to 0.64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/04/28 10:52:08 ajacoutot Exp $
d10 2
d87 1
a87 1
			courierauthcommon courierauth ldap lber sasl2
d96 1
a96 1
WANTLIB-pgsql=		m courierauthcommon courierauth pq
@


1.29
log
@--localstatedir=/var is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/02/21 22:19:31 sthen Exp $
d9 1
a9 1
DISTNAME=		courier-authlib-0.63.0
a14 6

REVISION-main=		6
REVISION-ldap=		3
REVISION-mysql=		3
REVISION-pgsql=		3
REVISION-userdb=	3
@


1.28
log
@Remove patches casting NULL when used as a sentinel to a pointer.
These are no longer needed since unistd.h r1.63 et al.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/11/18 13:16:06 espie Exp $
a69 1
			--localstatedir=/var \
@


1.27
log
@typo and blanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/11/18 13:14:56 espie Exp $
d16 1
a16 1
REVISION-main=		5
@


1.26
log
@convert to new way
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/09/16 10:31:21 espie Exp $
d154 2
a155 2
.if !${BUILD_PACKAGES:M-ldap}
	    ${INSTALL_DATA} ${WRKSRC}/authldap.schema ${EXAMPLE_DIR}
d159 1
a159 1
	    ${INSTALL_DATA} ${WRKSRC}/${i} ${PREFIX}/share/doc/courier-authlib
@


1.25
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/06/29 12:25:14 jasper Exp $
d83 2
a84 1
MULTI_PACKAGES=		-main
a85 1
PSEUDO_FLAVORS=		no_ldap no_mysql no_pgsql no_userdb
d109 1
d111 1
a111 4
.if ${FLAVOR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-authldap
.else
MULTI_PACKAGES+=	-ldap
d114 2
d118 1
a118 4
.if ${FLAVOR:L:Mno_mysql}
CONFIGURE_ARGS+=	--without-authmysql
.else
MULTI_PACKAGES+=	-mysql
d123 2
d127 1
a127 4
.if ${FLAVOR:L:Mno_pgsql}
CONFIGURE_ARGS+=	--without-authpgsql
.else
MULTI_PACKAGES+=	-pgsql
d131 2
d135 1
a135 5
.if ${FLAVOR:L:Mno_userdb}
CONFIGURE_ARGS+=	--without-authuserdb \
			--without-makedatprog
.else
MULTI_PACKAGES+=	-userdb
d139 3
d154 1
a154 1
.	if !${FLAVOR:L:Mno_ldap}
d156 1
a156 1
.	endif
d158 1
a158 1
.	for i in ${DOCS}
d160 1
a160 1
.	endfor
@


1.24
log
@- fix build with newer libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/06/10 13:45:56 gsoares Exp $
d17 4
a20 4
REVISION-ldap=		2
REVISION-mysql=		2
REVISION-pgsql=		2
REVISION-userdb=	2
@


1.23
log
@use TRUEPREFIX instead of LOCALBASE here
bump REVISION

OK sthen@@ giovanni@@(MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/03/20 13:06:23 ajacoutot Exp $
d75 1
@


1.22
log
@Make use of rcexec in rc_start().

ok giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/03/17 16:49:27 ajacoutot Exp $
d17 4
a20 4
REVISION-ldap=		1
REVISION-mysql=		1
REVISION-pgsql=		1
REVISION-userdb=	1
@


1.21
log
@Remove all redirections -- rc.subr(8) now takes care of it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/12/27 14:50:23 ajacoutot Exp $
d16 1
a16 1
REVISION-main=		4
@


1.20
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/12/24 10:40:05 ajacoutot Exp $
d16 1
a16 1
REVISION-main=		3
@


1.19
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/12/16 17:52:12 giovanni Exp $
d16 1
a16 1
REVISION-main=		2
@


1.18
log
@
Add an rcscript
hints and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/19 07:23:06 espie Exp $
d16 5
a20 5
REVISION-main=		1
REVISION-ldap=		0
REVISION-mysql=		0
REVISION-pgsql=		0
REVISION-userdb=	0
@


1.17
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/09 20:13:25 espie Exp $
d16 1
a16 1
REVISION-main=		0
a48 1
USE_GROFF =		Yes
@


1.16
log
@WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/18 19:59:15 espie Exp $
d49 1
a49 1
USE_GROFF =	Yes
d78 1
a78 1
RUN_DEPENDS-main=	:expect-*:lang/expect,no_tk
d89 1
a89 1
LIB_DEPENDS-main=	::devel/libtool,-ltdl
d93 3
a95 3
LIB_DEPENDS-ldap=	::${BUILD_PKGPATH} \
			::databases/openldap \
			::security/cyrus-sasl2
d98 2
a99 2
LIB_DEPENDS-mysql=	::${BUILD_PKGPATH} \
			::databases/mysql
d102 2
a103 2
LIB_DEPENDS-pgsql=	::${BUILD_PKGPATH} \
			::databases/postgresql
d105 3
a107 3
WANTLIB-userdb=		c courierauthcommon courierauth gdbm.>=3
LIB_DEPENDS-userdb=	::${BUILD_PKGPATH} \
			::databases/gdbm
@


1.15
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/05 13:41:10 dcoppa Exp $
d87 1
a87 1
WANTLIB-main=		c
d89 1
a89 1
LIB_DEPENDS-main=	ltdl::devel/libtool,-ltdl
d91 17
a107 16
WANTLIB-ldap=		crypto ssl asn1 com_err gssapi krb5
LIB_DEPENDS-ldap=	courierauthcommon,courierauth::${BUILD_PKGPATH} \
			ldap,lber::databases/openldap \
			sasl2::security/cyrus-sasl2

WANTLIB-mysql=		crypto m ssl z
LIB_DEPENDS-mysql=	courierauthcommon,courierauth::${BUILD_PKGPATH} \
			mysqlclient::databases/mysql

WANTLIB-pgsql=		m
LIB_DEPENDS-pgsql=	courierauthcommon,courierauth::${BUILD_PKGPATH} \
			pq::databases/postgresql

WANTLIB-userdb=		c
LIB_DEPENDS-userdb=	courierauthcommon,courierauth::${BUILD_PKGPATH} \
			gdbm.>=3::databases/gdbm
@


1.14
log
@Zap "-static" from libtool linking flags for testbdb: it doesn't
break the testbdb binary and we can switch this port to our own
ports/infrastructure/bin/libtool

OK landry@@, giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/06/23 16:31:22 steven Exp $
d49 1
@


1.13
log
@use gnu libtool (needs ltdl)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/10/28 14:18:04 giovanni Exp $
d16 6
d48 1
a48 1
USE_LIBTOOL=		gnu
@


1.12
log
@
Update to courier-authlib 0.63.0
@
text
@d42 1
a42 1
USE_LIBTOOL=		Yes
@


1.11
log
@
Update to 0.62.4 and take maintainership.
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/09/15 17:37:21 jasper Exp $
d9 1
a9 1
DISTNAME=		courier-authlib-0.62.4
d16 1
a16 1
SHARED_LIBS +=  courierauth          0.0      # .0.0
d19 1
a19 1
SHARED_LIBS +=  courierauthcommon    0.0      # .0.0
d23 1
a23 1
SHARED_LIBS +=  authldap             0.0      # .0.0
@


1.10
log
@remove marc balmer as maintainer of all of his ports, to take away the
illusion marc still maintains them. as requested by himself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/05/15 14:16:41 naddy Exp $
d9 6
a14 6
DISTNAME=		courier-authlib-0.58
PKGNAME-main=		${DISTNAME}p4
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}p5
PKGNAME-mysql=		${DISTNAME:S/lib-/lib-mysql-/}p3
PKGNAME-pgsql=		${DISTNAME:S/lib-/lib-pgsql-/}p3
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}p4
d17 1
a17 1
SHARED_LIBS +=  courierauthsasl      0.0      # .0.0
d30 3
a32 1
# GPL
d68 1
d81 1
@


1.9
log
@bump subpackages because the description changed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/07/27 09:49:17 steven Exp $
d10 5
a14 5
PKGNAME-main=		${DISTNAME}p3
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}p4
PKGNAME-mysql=		${DISTNAME:S/lib-/lib-mysql-/}p2
PKGNAME-pgsql=		${DISTNAME:S/lib-/lib-pgsql-/}p2
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}p3
a28 1
MAINTAINER=		Marc Balmer <mbalmer@@openbsd.org>
@


1.8
log
@RUN_DEPENDS -> RUN_DEPENDS-main, and bump the subpackages

go ahead aanriot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/07/18 11:47:12 aanriot Exp $
d11 4
a14 4
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}p3
PKGNAME-mysql=		${DISTNAME:S/lib-/lib-mysql-/}p1
PKGNAME-pgsql=		${DISTNAME:S/lib-/lib-pgsql-/}p1
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}p2
@


1.7
log
@- authsystem.passwd needs "lang/expect" to work (i.e. with webmails
password changing), so add it as a {RUN,BUILD}_DEPENDS ;
- while there, remove quotes on the COMMENTs ;

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/06/25 12:12:26 espie Exp $
d11 4
a14 4
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}p2
PKGNAME-mysql=		${DISTNAME:S/lib-/lib-mysql-/}p0
PKGNAME-pgsql=		${DISTNAME:S/lib-/lib-pgsql-/}p0
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}p1
d69 2
a70 2
RUN_DEPENDS=		:expect-*:lang/expect,no_tk
BUILD_DEPENDS=		${RUN_DEPENDS}
@


1.6
log
@make sure ldap gets its prototypes.
allows packaging if already installed.

okay mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/12/23 10:30:20 mbalmer Exp $
d3 5
a7 5
COMMENT-main=		"authentication library for courier"
COMMENT-ldap=		"ldap authentication module for courier-authLib"
COMMENT-mysql=		"mysql authentication module for courier-authLib"
COMMENT-pgsql=		"pgsql authentication module for courier-authLib"
COMMENT-userdb=		"userdb authentication module for courier-authLib"
d10 1
a10 1
PKGNAME-main=		${DISTNAME}p2
d68 3
@


1.5
log
@Fix -makedatprog in the userdb subpackage and bump packagename.
main pkgname bumped because of a minor change in the PLIST.

From Genadijus Paleckis <rwx@@openbsd.lt>, thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/11/25 20:51:02 steven Exp $
d11 1
a11 1
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}p1
d142 1
@


1.4
log
@new MULTI_PACKAGES
new SHARED_LIBS format
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/11 13:18:39 mbalmer Exp $
d10 1
a10 1
PKGNAME-main=		${DISTNAME}p1
d14 1
a14 1
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}p0
d128 1
a128 1
CONFIGURE_ARGS+=	--with-makedatprog \
@


1.3
log
@Fix WANTLIB for -ldap subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/11/03 15:16:41 mbalmer Exp $
d3 1
a3 1
COMMENT=		"authentication library for courier"
d10 1
a10 1
PKGNAME=		${DISTNAME}p0
d16 10
a25 6
SHARED_LIBS=		authpipe		0.0 \
			authpwd			0.0 \
			courierauth		0.0 \
			courierauthcommon	0.0 \
			courierauthsasl		0.0 \
			courierauthsaslclient	0.0
d71 1
a71 2
MULTI_PACKAGES=
SUBPACKAGE?=
d75 20
a94 4
.if !defined(PACKAGING) || ${SUBPACKAGE} == ""
WANTLIB+=		c
LIB_DEPENDS+=		ltdl::devel/libtool,-ltdl
.endif
a98 1
SHARED_LIBS+=		authldap		0.0
a101 8
.  if !defined(PACKAGING) || ${SUBPACKAGE} == "-ldap"
WANTLIB+=		crypto ssl asn1 com_err gssapi krb5
LIB_DEPENDS+=		ldap,lber::databases/openldap \
			sasl2::security/cyrus-sasl2
.    if defined(PACKAGING)
LIB_DEPENDS+=		courierauthcommon,courierauth::mail/courier-authlib
.    endif
.  endif
a106 1
SHARED_LIBS+=		authmysql		0.0
a111 7
.  if !defined(PACKAGING) || ${SUBPACKAGE} == "-mysql"
WANTLIB+=		crypto m ssl z
LIB_DEPENDS+=		mysqlclient::databases/mysql
.    if defined(PACKAGING)
LIB_DEPENDS+=		courierauthcommon,courierauth::mail/courier-authlib
.    endif
.  endif
a116 1
SHARED_LIBS+=		authpgsql		0.0
a120 7
.  if !defined(PACKAGING) || ${SUBPACKAGE} == "-pgsql"
WANTLIB+=		m
LIB_DEPENDS+=		pq::databases/postgresql
.    if defined(PACKAGING)
LIB_DEPENDS+=		courierauthcommon,courierauth::mail/courier-authlib
.    endif
.  endif
a126 1
SHARED_LIBS+=		authuserdb		0.0
a130 7
.  if !defined(PACKAGING) || ${SUBPACKAGE} == "-userdb"
WANTLIB+=		c
LIB_DEPENDS+=		gdbm.>=3::databases/gdbm
.    if defined(PACKAGING)
LIB_DEPENDS+=		courierauthcommon,courierauth::mail/courier-authlib
.    endif
.  endif
@


1.2
log
@Fix user id.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/11/03 11:45:31 mbalmer Exp $
d11 1
a11 1
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}p0
d85 1
a85 1
WANTLIB+=		crypto ssl
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 5
a14 4
PKGNAME-ldap=		${DISTNAME:S/lib-/lib-ldap-/}
PKGNAME-mysql=		${DISTNAME:S/lib-/lib-mysql-/}
PKGNAME-pgsql=		${DISTNAME:S/lib-/lib-pgsql-/}
PKGNAME-userdb=		${DISTNAME:S/lib-/lib-userdb-/}
@


1.1.1.1
log
@Authentication libraries for courier.  New versions of maildrop, courier-imap
and friends use these for authentication purposes.
port made with help from bernd, thanks.
@
text
@@
