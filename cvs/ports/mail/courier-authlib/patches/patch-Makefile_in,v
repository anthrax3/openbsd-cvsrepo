head	1.7;
access;
symbols
	OPENBSD_6_2:1.7.0.4
	OPENBSD_6_2_BASE:1.7
	OPENBSD_6_1:1.7.0.2
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.5.0.4
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.6
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.12
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.10
	OPENBSD_5_0:1.1.0.8
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.6
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2017.02.10.09.40.01;	author giovanni;	state Exp;
branches;
next	1.6;
commitid	EsM4PEVAWQamzhvC;

1.6
date	2016.05.27.16.18.28;	author giovanni;	state Exp;
branches;
next	1.5;
commitid	Pra5HitMy04xH7x8;

1.5
date	2014.10.28.09.19.29;	author giovanni;	state Exp;
branches;
next	1.4;
commitid	04xfJD1Dr9uOQWXz;

1.4
date	2014.04.11.09.35.04;	author giovanni;	state Exp;
branches;
next	1.3;

1.3
date	2013.05.07.08.07.34;	author giovanni;	state Exp;
branches;
next	1.2;

1.2
date	2012.10.18.08.04.01;	author giovanni;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.28.14.18.05;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.7
log
@unbreak and regen patches
spotted by Nygel Tailor, thanks
@
text
@$OpenBSD: patch-Makefile_in,v 1.6 2016/05/27 16:18:28 giovanni Exp $
--- Makefile.in.orig	Sat Jan 28 04:00:36 2017
+++ Makefile.in	Fri Feb 10 10:26:23 2017
@@@@ -688,7 +688,7 @@@@ CLEANFILES = authldaprc.h authmysqlrc.h authsqliterc.h
 
 DISTCLEANFILES = dbobj.config README_authlib.html
 commonlibdep = libcourierauthcommon.la
-commonldflags = -module -rpath $(pkglibdir) -export-symbols-regex 'courier_auth.*_init' -avoid-version
+commonldflags = -module -rpath $(pkglibdir) -export-symbols-regex 'courier_auth.*_init'
 commonlibadd = libcourierauthcommon.la
 libcourierauthcommon_t = @@CRYPTLIBS@@
 libcourierauthcommon_la_SOURCES = \
@@@@ -706,7 +706,7 @@@@ libcourierauthcommon_la_SOURCES = \
 
 libcourierauthcommon_la_DEPENDENCIES = libcourierauth.la
 libcourierauthcommon_la_LIBADD = libcourierauth.la
-libcourierauthcommon_la_LDFLAGS = $(libcourierauthcommon_t:%=-Wl,%) -avoid-version
+libcourierauthcommon_la_LDFLAGS = $(libcourierauthcommon_t:%=-Wl,%)
 libcourierauth_la_SOURCES = authdaemon.c authdaemonlib.c preauthdaemon.c \
 	authmoduser2.c authmoduser3.c debug.c \
 	courierauthdebug.h \
@@@@ -715,7 +715,7 @@@@ libcourierauth_la_SOURCES = authdaemon.c authdaemonlib
 libcourierauth_la_LIBADD = libs/libhmac/libhmac.la libs/md5/libmd5.la libs/sha1/libsha1.la libs/numlib/libnumlib.la \
 	libs/random128/librandom128.la libs/rfc822/libencode.la
 
-libcourierauth_la_LDFLAGS = @@NETLIBS@@ -avoid-version
+libcourierauth_la_LDFLAGS = @@NETLIBS@@
 
 # The userdb module
 libauthuserdb_t = userdb/libuserdb.la @@dblibrary@@ @@LIBGDBM@@ @@LIBDB@@
@@@@ -817,7 +817,7 @@@@ libcourierauthsasl_la_SOURCES = \
 	authsaslfrombase64.c authsasltobase64.c
 
 libcourierauthsasl_la_LIBADD = libcourierauthcommon.la libcourierauth.la
-libcourierauthsasl_la_LDFLAGS = -export-symbols-regex '^auth_sasl|auth_sasl_ex|auth_sasl_extract_userid$$' -avoid-version
+libcourierauthsasl_la_LDFLAGS = -export-symbols-regex '^auth_sasl|auth_sasl_ex|auth_sasl_extract_userid$$'
 libcourierauthsaslclient_la_SOURCES = courierauthsaslclient.h \
 	authsaslclient.c authsaslclient.h authsaslclientcram.c \
 	authsaslclientcrammd5.c authsaslclientcramsha1.c \
@@@@ -826,7 +826,7 @@@@ libcourierauthsaslclient_la_SOURCES = courierauthsaslc
 	authsaslfrombase64.c authsasltobase64.c
 
 libcourierauthsaslclient_la_LIBADD = libcourierauth.la
-libcourierauthsaslclient_la_LDFLAGS = -export-symbols-regex '^auth_sasl_client$$' -avoid-version
+libcourierauthsaslclient_la_LDFLAGS = -export-symbols-regex '^auth_sasl_client$$'
 include_HEADERS = courier_auth_config.h courierauth.h courierauthsasl.h \
 	courierauthsaslclient.h courierauthdebug.h courierauthstaticlist.h
 
@@@@ -859,7 +859,7 @@@@ authdaemondprog_LDADD = $(LIBLTDL) libcourierauthcommo
 	libs/libhmac/libhmac.la libs/md5/libmd5.la libs/sha1/libsha1.la \
 	libs/rfc822/libencode.la libs/numlib/libnumlib.la
 
-authdaemondprog_LDFLAGS = -export-dynamic $(modules:%=-dlopen %) @@NETLIBS@@
+authdaemondprog_LDFLAGS = -export-dynamic $(modules:%=-dlopen %) -lpthread @@NETLIBS@@
 authdaemontest_SOURCES = authdaemontest.c
 authdaemontest_DEPENDENCIES = libcourierauthcommon.la
 authdaemontest_LDADD = libcourierauthcommon.la @@NETLIBS@@
@


1.6
log
@Use getpwnam_shadow(3) where needed
remove trailing whitespaces
ok on a similar diff sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.5 2014/10/28 09:19:29 giovanni Exp $
--- Makefile.in.orig	Sat Nov 14 22:45:09 2015
+++ Makefile.in	Thu May 12 17:25:53 2016
@@@@ -667,7 +667,7 @@@@ CLEANFILES = authldaprc.h authmysqlrc.h authsqliterc.h
d13 1
a13 1
@@@@ -684,7 +684,7 @@@@ libcourierauthcommon_la_SOURCES = \
d22 1
a22 1
@@@@ -693,7 +693,7 @@@@ libcourierauth_la_SOURCES = authdaemon.c authdaemonlib
d31 1
a31 1
@@@@ -794,7 +794,7 @@@@ libcourierauthsasl_la_SOURCES = \
d40 1
a40 1
@@@@ -803,7 +803,7 @@@@ libcourierauthsaslclient_la_SOURCES = courierauthsaslc
d49 1
a49 1
@@@@ -836,7 +836,7 @@@@ authdaemondprog_LDADD = $(LIBLTDL) libcourierauthcommo
@


1.5
log
@unbreak after MySQL -> Mariadb switch and remove useless patches.
hints and ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.4 2014/04/11 09:35:04 giovanni Exp $
--- Makefile.in.orig	Mon Nov 11 19:58:27 2013
+++ Makefile.in	Tue Oct 28 09:01:02 2014
@@@@ -654,7 +654,7 @@@@ CLEANFILES = authldaprc.h authmysqlrc.h authsqliterc.h
d13 1
a13 1
@@@@ -671,7 +671,7 @@@@ libcourierauthcommon_la_SOURCES = \
d22 1
a22 1
@@@@ -680,7 +680,7 @@@@ libcourierauth_la_SOURCES = authdaemon.c authdaemonlib
d31 1
a31 1
@@@@ -780,7 +780,7 @@@@ libcourierauthsasl_la_SOURCES = \
d40 1
a40 1
@@@@ -789,7 +789,7 @@@@ libcourierauthsaslclient_la_SOURCES = courierauthsaslc
d49 1
a49 1
@@@@ -822,7 +822,7 @@@@ authdaemondprog_LDADD = $(LIBLTDL) libcourierauthcommo
@


1.4
log
@
bugfix update to 0.66.1
remove an hidden dependency on db/v4 spotted by espie@@ and naddy@@, thanks
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.3 2013/05/07 08:07:34 giovanni Exp $
d3 1
a3 1
+++ Makefile.in	Sun Jan 12 17:31:43 2014
d49 9
@


1.3
log
@
Update to 0.65
some bugs fixed and a new sqlite auth module has been added
ok william@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.2 2012/10/18 08:04:01 giovanni Exp $
--- Makefile.in.orig	Sun Oct  7 01:58:44 2012
+++ Makefile.in	Mon Jan 14 15:45:03 2013
@@@@ -561,7 +561,7 @@@@ CLEANFILES = authldaprc.h authmysqlrc.h authsqliterc.h
d13 1
a13 1
@@@@ -578,7 +578,7 @@@@ libcourierauthcommon_la_SOURCES = \
d22 3
a24 3
@@@@ -587,7 +587,7 @@@@ libcourierauth_la_SOURCES = authdaemon.c authdaemonlib
 libcourierauth_la_LIBADD = libhmac/libhmac.la md5/libmd5.la sha1/libsha1.la numlib/libnumlib.la \
 	random128/librandom128.la rfc822/libencode.la
d31 1
a31 1
@@@@ -687,7 +687,7 @@@@ libcourierauthsasl_la_SOURCES = \
d34 3
a36 3
 libcourierauthsasl_la_LIBADD = libcourierauth.la
-libcourierauthsasl_la_LDFLAGS = -export-symbols-regex '^auth_sasl|auth_sasl_ex$$' -avoid-version
+libcourierauthsasl_la_LDFLAGS = -export-symbols-regex '^auth_sasl|auth_sasl_ex$$'
d40 1
a40 1
@@@@ -696,7 +696,7 @@@@ libcourierauthsaslclient_la_SOURCES = courierauthsaslc
a48 16
@@@@ -1954,7 +1954,6 @@@@ install-exec-hook:
 				$(DESTDIR)$(sbindir)/userdbpw ; \
 		$(INSTALL_SCRIPT) userdb-test-cram-md5.pl \
 				$(DESTDIR)$(sbindir)/userdb-test-cram-md5
-	for f in $(pkglib_LTLIBRARIES); do . ./$$f; rm -f $(DESTDIR)$(pkglibdir)/$$dlname.0 $(DESTDIR)$(pkglibdir)/$$dlname.0.0; ln -s $$dlname $(DESTDIR)$(pkglibdir)/$$dlname.0; done
 
 uninstall-hook: uninstall-authldaprc uninstall-authdaemonrc uninstall-authmysqlrc uninstall-authpgsqlrc uninstall-authsqliterc
 	rm -f $(DESTDIR)$(pkglibexecdir)/authdaemond
@@@@ -1965,7 +1964,6 @@@@ uninstall-hook: uninstall-authldaprc uninstall-authdae
 				$(DESTDIR)$(sbindir)/userdb \
 				$(DESTDIR)$(sbindir)/userdbpw \
 				$(DESTDIR)$(sbindir)/userdb-test-cram-md5
-	for f in $(pkglib_LTLIBRARIES); do . ./$$f; rm -f $(DESTDIR)$(pkglibdir)/$$dlname.0; done
 
 authlib.html: authlib.html.in
 	$(SHELL) ./config.status --file=authlib.html
@


1.2
log
@
Bugfix update to 0.64
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile_in,v 1.1 2009/10/28 14:18:05 giovanni Exp $
--- Makefile.in.orig	Sat Apr 28 15:21:54 2012
+++ Makefile.in	Fri Sep  7 14:34:02 2012
@@@@ -516,7 +516,7 @@@@ CLEANFILES = authldaprc.h authmysqlrc.h authdaemonrc.h
d13 1
a13 1
@@@@ -532,7 +532,7 @@@@ libcourierauthcommon_la_SOURCES = \
d22 1
a22 1
@@@@ -541,7 +541,7 @@@@ libcourierauth_la_SOURCES = authdaemon.c authdaemonlib
d31 1
a31 1
@@@@ -634,7 +634,7 @@@@ libcourierauthsasl_la_SOURCES = \
d40 1
a40 1
@@@@ -643,7 +643,7 @@@@ libcourierauthsaslclient_la_SOURCES = courierauthsaslc
d49 1
a49 1
@@@@ -1839,7 +1839,6 @@@@ install-exec-hook:
d55 1
a55 1
 uninstall-hook: uninstall-authldaprc uninstall-authdaemonrc uninstall-authmysqlrc uninstall-authpgsqlrc
d57 1
a57 1
@@@@ -1850,7 +1849,6 @@@@ uninstall-hook: uninstall-authldaprc uninstall-authdae
@


1.1
log
@
Update to 0.62.4 and take maintainership.
ok landry@@
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.in.orig	Sat Jun 27 18:09:13 2009
+++ Makefile.in	Wed Jul 15 13:21:59 2009
@@@@ -511,7 +511,7 @@@@ CLEANFILES = authldaprc.h authmysqlrc.h authdaemonrc.h
d13 1
a13 1
@@@@ -526,7 +526,7 @@@@ libcourierauthcommon_la_SOURCES = \
d22 1
a22 1
@@@@ -535,7 +535,7 @@@@ libcourierauth_la_SOURCES = authdaemon.c authdaemonlib
d31 1
a31 1
@@@@ -627,7 +627,7 @@@@ libcourierauthsasl_la_SOURCES = \
d40 1
a40 1
@@@@ -636,7 +636,7 @@@@ libcourierauthsaslclient_la_SOURCES = courierauthsaslc
d47 1
a47 1
 	courierauthsaslclient.h courierauthdebug.h
d49 1
a49 1
@@@@ -1828,7 +1828,6 @@@@ install-exec-hook:
d57 1
a57 1
@@@@ -1839,7 +1838,6 @@@@ uninstall-hook: uninstall-authldaprc uninstall-authdae
@

