head	1.111;
access;
symbols
	OPENBSD_6_1:1.109.0.2
	OPENBSD_6_1_BASE:1.109
	OPENBSD_6_0:1.107.0.2
	OPENBSD_6_0_BASE:1.107
	OPENBSD_5_9:1.104.0.2
	OPENBSD_5_9_BASE:1.104
	OPENBSD_5_8:1.101.0.4
	OPENBSD_5_8_BASE:1.101
	OPENBSD_5_7:1.95.0.2
	OPENBSD_5_7_BASE:1.95
	OPENBSD_5_6:1.94.0.2
	OPENBSD_5_6_BASE:1.94
	OPENBSD_5_5:1.92.0.2
	OPENBSD_5_5_BASE:1.92
	OPENBSD_5_4:1.89.0.2
	OPENBSD_5_4_BASE:1.89
	OPENBSD_5_3:1.85.0.2
	OPENBSD_5_3_BASE:1.85
	OPENBSD_5_2:1.84.0.2
	OPENBSD_5_2_BASE:1.84
	OPENBSD_5_1_BASE:1.79
	OPENBSD_5_1:1.79.0.2
	OPENBSD_5_0:1.75.0.2
	OPENBSD_5_0_BASE:1.75
	OPENBSD_4_9:1.68.0.2
	OPENBSD_4_9_BASE:1.68
	OPENBSD_4_8:1.60.0.2
	OPENBSD_4_8_BASE:1.60
	OPENBSD_4_7:1.57.0.2
	OPENBSD_4_7_BASE:1.57
	OPENBSD_4_6:1.54.0.10
	OPENBSD_4_6_BASE:1.54
	OPENBSD_4_5:1.54.0.8
	OPENBSD_4_5_BASE:1.54
	OPENBSD_4_4:1.54.0.6
	OPENBSD_4_4_BASE:1.54
	OPENBSD_4_3:1.54.0.4
	OPENBSD_4_3_BASE:1.54
	OPENBSD_4_2:1.54.0.2
	OPENBSD_4_2_BASE:1.54
	OPENBSD_4_1:1.51.0.2
	OPENBSD_4_1_BASE:1.51
	OPENBSD_4_0:1.49.0.2
	OPENBSD_4_0_BASE:1.49
	OPENBSD_3_9:1.46.0.2
	OPENBSD_3_9_BASE:1.46
	OPENBSD_3_8:1.45.0.4
	OPENBSD_3_8_BASE:1.45
	OPENBSD_3_7:1.45.0.2
	OPENBSD_3_7_BASE:1.45
	OPENBSD_3_6:1.41.0.2
	OPENBSD_3_6_BASE:1.41
	OPENBSD_3_5:1.37.0.2
	OPENBSD_3_5_BASE:1.37
	OPENBSD_3_4:1.35.0.2
	OPENBSD_3_4_BASE:1.35
	OPENBSD_3_3:1.33.0.2
	OPENBSD_3_3_BASE:1.33
	OPENBSD_3_2:1.30.0.2
	OPENBSD_3_2_BASE:1.30
	OPENBSD_3_1:1.25.0.2
	OPENBSD_3_1_BASE:1.25
	OPENBSD_3_0:1.22.0.2
	OPENBSD_3_0_BASE:1.22
	OPENBSD_2_9_TRACKING_SWITCH:1.19
	OPENBSD_2_9:1.13.0.2
	OPENBSD_2_9_BASE:1.13
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.2.0.2
	kevlo_2000-Jul-03:1.1.1.2
	kevlo:1.1.1
	courier-imap-0_35:1.1.1.1
	VENDOR:1.1.1;
locks; strict;
comment	@# @;


1.111
date	2017.08.04.23.15.45;	author giovanni;	state Exp;
branches;
next	1.110;
commitid	uhk0p1pE7GS9FA89;

1.110
date	2017.06.02.08.56.32;	author schwarze;	state Exp;
branches;
next	1.109;
commitid	AhsDVcSXbPx6AHfy;

1.109
date	2017.02.09.14.46.36;	author giovanni;	state Exp;
branches;
next	1.108;
commitid	7SQyZXzsi4Bfd9zA;

1.108
date	2016.09.02.09.10.25;	author giovanni;	state Exp;
branches;
next	1.107;
commitid	64TCZIcoaOcFb4ds;

1.107
date	2016.07.08.14.03.14;	author giovanni;	state Exp;
branches;
next	1.106;
commitid	5RL5ej7YOuLAEtmN;

1.106
date	2016.06.19.19.30.15;	author giovanni;	state Exp;
branches;
next	1.105;
commitid	pCs9ZXdLMEsChWoN;

1.105
date	2016.03.18.21.53.02;	author giovanni;	state Exp;
branches;
next	1.104;
commitid	9mfbLglkN1jnYMWa;

1.104
date	2016.01.25.14.35.46;	author giovanni;	state Exp;
branches;
next	1.103;
commitid	tnMzGTuVnYNwJaIN;

1.103
date	2016.01.05.10.51.37;	author giovanni;	state Exp;
branches;
next	1.102;
commitid	H1n6gsa6zP80nmh3;

1.102
date	2015.08.27.09.33.16;	author giovanni;	state Exp;
branches;
next	1.101;
commitid	FZBR7dDzhwKJ2Xds;

1.101
date	2015.07.21.14.44.13;	author ajacoutot;	state Exp;
branches;
next	1.100;
commitid	v3jnWd5lcCQtUkQ9;

1.100
date	2015.07.20.23.46.53;	author ajacoutot;	state Exp;
branches;
next	1.99;
commitid	Kojqwz1fjt0wJ0OJ;

1.99
date	2015.07.20.22.14.36;	author jca;	state Exp;
branches;
next	1.98;
commitid	Dysj9TCJKvG0GKTq;

1.98
date	2015.07.20.07.17.40;	author jca;	state Exp;
branches;
next	1.97;
commitid	SrWFRioIh3zpkBpz;

1.97
date	2015.07.15.21.14.06;	author ajacoutot;	state Exp;
branches;
next	1.96;
commitid	7H4KFOo5iCdAqWek;

1.96
date	2015.04.28.07.20.02;	author giovanni;	state Exp;
branches;
next	1.95;
commitid	zFDmor9pDTgy1RVX;

1.95
date	2014.08.27.06.58.00;	author ajacoutot;	state Exp;
branches;
next	1.94;
commitid	LV57HYD4QXzcqbWn;

1.94
date	2014.06.05.20.45.35;	author giovanni;	state Exp;
branches;
next	1.93;
commitid	hrxsminDRqVcUHZH;

1.93
date	2014.04.15.08.53.04;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2013.10.24.20.22.07;	author sthen;	state Exp;
branches;
next	1.91;

1.91
date	2013.10.24.15.18.00;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2013.10.17.09.44.30;	author landry;	state Exp;
branches;
next	1.89;

1.89
date	2013.07.18.08.51.32;	author giovanni;	state Exp;
branches;
next	1.88;

1.88
date	2013.05.07.08.12.09;	author giovanni;	state Exp;
branches;
next	1.87;

1.87
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2013.03.11.11.23.50;	author espie;	state Exp;
branches;
next	1.85;

1.85
date	2012.10.18.08.06.27;	author giovanni;	state Exp;
branches;
next	1.84;

1.84
date	2012.04.28.11.06.12;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2012.04.28.10.51.44;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2012.04.10.22.31.10;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2012.03.08.12.13.00;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2012.02.21.22.19.31;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2012.01.23.09.14.15;	author giovanni;	state Exp;
branches;
next	1.78;

1.78
date	2011.12.02.14.36.15;	author espie;	state Exp;
branches;
next	1.77;

1.77
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.76;

1.76
date	2011.08.22.07.57.25;	author giovanni;	state Exp;
branches;
next	1.75;

1.75
date	2011.06.09.13.30.42;	author ajacoutot;	state Exp;
branches
	1.75.2.1;
next	1.74;

1.74
date	2011.06.09.13.10.23;	author giovanni;	state Exp;
branches;
next	1.73;

1.73
date	2011.06.06.15.01.52;	author giovanni;	state Exp;
branches;
next	1.72;

1.72
date	2011.05.11.12.57.47;	author jasper;	state Exp;
branches;
next	1.71;

1.71
date	2011.05.09.09.30.26;	author giovanni;	state Exp;
branches;
next	1.70;

1.70
date	2011.03.20.13.06.23;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2011.03.17.16.49.27;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2010.12.16.17.55.10;	author giovanni;	state Exp;
branches;
next	1.65;

1.65
date	2010.11.19.07.23.06;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2010.10.18.19.59.15;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2010.10.05.13.41.52;	author dcoppa;	state Exp;
branches;
next	1.62;

1.62
date	2010.09.22.06.53.03;	author landry;	state Exp;
branches;
next	1.61;

1.61
date	2010.09.09.10.26.19;	author giovanni;	state Exp;
branches;
next	1.60;

1.60
date	2010.07.08.16.29.58;	author giovanni;	state Exp;
branches;
next	1.59;

1.59
date	2010.04.21.07.18.25;	author giovanni;	state Exp;
branches;
next	1.58;

1.58
date	2010.04.15.14.11.01;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2010.02.26.18.55.21;	author espie;	state Exp;
branches
	1.57.2.1;
next	1.56;

1.56
date	2009.10.28.14.20.19;	author giovanni;	state Exp;
branches;
next	1.55;

1.55
date	2009.09.15.17.37.21;	author jasper;	state Exp;
branches;
next	1.54;

1.54
date	2007.07.18.11.49.14;	author aanriot;	state Exp;
branches;
next	1.53;

1.53
date	2007.06.22.07.34.45;	author mbalmer;	state Exp;
branches;
next	1.52;

1.52
date	2007.05.26.10.35.51;	author steven;	state Exp;
branches;
next	1.51;

1.51
date	2006.11.25.20.20.07;	author steven;	state Exp;
branches;
next	1.50;

1.50
date	2006.11.03.16.19.56;	author mbalmer;	state Exp;
branches;
next	1.49;

1.49
date	2006.08.03.19.56.08;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2006.08.03.13.09.09;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2006.04.20.00.40.45;	author jolan;	state Exp;
branches;
next	1.46;

1.46
date	2005.09.16.09.51.27;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2005.02.10.23.44.03;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2005.01.02.11.55.10;	author alek;	state Exp;
branches;
next	1.43;

1.43
date	2004.12.06.22.50.20;	author mbalmer;	state Exp;
branches;
next	1.42;

1.42
date	2004.11.25.11.44.03;	author alek;	state Exp;
branches;
next	1.41;

1.41
date	2004.07.26.10.18.25;	author peter;	state Exp;
branches;
next	1.40;

1.40
date	2004.07.06.21.00.11;	author avsm;	state Exp;
branches;
next	1.39;

1.39
date	2004.07.01.12.19.35;	author avsm;	state Exp;
branches;
next	1.38;

1.38
date	2004.06.06.18.25.57;	author avsm;	state Exp;
branches;
next	1.37;

1.37
date	2004.02.16.17.14.52;	author avsm;	state Exp;
branches;
next	1.36;

1.36
date	2004.01.02.05.11.08;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	2003.05.23.21.57.51;	author avsm;	state Exp;
branches;
next	1.34;

1.34
date	2003.04.14.09.21.31;	author avsm;	state Exp;
branches;
next	1.33;

1.33
date	2003.02.27.00.08.16;	author avsm;	state Exp;
branches
	1.33.2.1;
next	1.32;

1.32
date	2003.02.17.16.14.34;	author avsm;	state Exp;
branches;
next	1.31;

1.31
date	2002.12.29.15.12.31;	author fgsch;	state Exp;
branches;
next	1.30;

1.30
date	2002.08.19.18.54.36;	author avsm;	state Exp;
branches
	1.30.2.1;
next	1.29;

1.29
date	2002.08.08.17.03.21;	author avsm;	state Exp;
branches;
next	1.28;

1.28
date	2002.07.08.21.24.50;	author avsm;	state Exp;
branches;
next	1.27;

1.27
date	2002.05.13.23.31.25;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2002.04.17.16.19.39;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2002.02.11.00.51.27;	author avsm;	state Exp;
branches;
next	1.24;

1.24
date	2001.11.11.13.48.16;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2001.10.24.12.22.45;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2001.10.06.22.55.48;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2001.09.30.23.15.57;	author avsm;	state Exp;
branches;
next	1.20;

1.20
date	2001.09.28.19.06.30;	author jakob;	state Exp;
branches;
next	1.19;

1.19
date	2001.07.18.10.59.01;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2001.06.18.21.19.22;	author avsm;	state Exp;
branches;
next	1.17;

1.17
date	2001.06.09.19.42.42;	author avsm;	state Exp;
branches;
next	1.16;

1.16
date	2001.06.03.05.32.16;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2001.05.10.22.29.04;	author avsm;	state Exp;
branches;
next	1.14;

1.14
date	2001.05.06.01.46.03;	author lebel;	state Exp;
branches;
next	1.13;

1.13
date	2001.03.22.03.10.48;	author avsm;	state Exp;
branches;
next	1.12;

1.12
date	2001.02.28.04.55.03;	author avsm;	state Exp;
branches;
next	1.11;

1.11
date	2001.02.21.19.04.56;	author avsm;	state Exp;
branches;
next	1.10;

1.10
date	2001.02.09.12.06.40;	author avsm;	state Exp;
branches;
next	1.9;

1.9
date	2001.02.02.00.22.48;	author avsm;	state Exp;
branches;
next	1.8;

1.8
date	2001.01.26.00.42.03;	author avsm;	state Exp;
branches;
next	1.7;

1.7
date	2001.01.15.23.37.18;	author avsm;	state Exp;
branches;
next	1.6;

1.6
date	2000.12.29.18.51.56;	author avsm;	state Exp;
branches;
next	1.5;

1.5
date	2000.11.22.11.42.31;	author avsm;	state Exp;
branches;
next	1.4;

1.4
date	2000.10.01.13.27.13;	author avsm;	state Exp;
branches;
next	1.3;

1.3
date	2000.09.10.20.38.10;	author avsm;	state Exp;
branches;
next	1.2;

1.2
date	2000.08.10.21.12.48;	author danh;	state Exp;
branches;
next	1.1;

1.1
date	2000.07.03.03.42.55;	author turan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.07.03.03.42.55;	author turan;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2000.07.03.08.11.24;	author kevlo;	state Exp;
branches;
next	;

1.30.2.1
date	2003.02.27.09.37.43;	author avsm;	state Exp;
branches;
next	;

1.33.2.1
date	2003.05.03.04.08.35;	author brad;	state Exp;
branches;
next	;

1.57.2.1
date	2010.05.27.03.44.43;	author william;	state Exp;
branches;
next	;

1.75.2.1
date	2011.08.22.08.48.28;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.111
log
@update to 4.18
ok portwise sthen@@ on a similar diff
@
text
@# $OpenBSD: Makefile,v 1.110 2017/06/02 08:56:32 schwarze Exp $

COMMENT-main=		imap server for maildir format mailboxes
COMMENT-pop3=		pop3 server for maildir format mailboxes

V=			4.18.0
DISTNAME=		courier-imap-${V}
PKGNAME-main=		${DISTNAME}
FULLPKGNAME-pop3=	courier-pop3-${V}
FULLPKGPATH-pop3=	mail/courier-imap,-pop3

CATEGORIES=		mail

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=courier/}
EXTRACT_SUFX=		.tar.bz2

HOMEPAGE=		http://www.courier-mta.org/imap/
MAINTAINER=		Giovanni Bechis <giovanni@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

COMPILER =		gcc

WANTLIB=		c courierauth courierauthcommon courierauthsasl gdbm
WANTLIB+=		idn m pcre ${COMPILER_LIBCXX}
WANTLIB-pop3=		c courierauth courierauthcommon courierauthsasl
WANTLIB-pop3+=		idn m pcre ${COMPILER_LIBCXX} ${MODGETTEXT_WANTLIB}

USE_GMAKE=		Yes
CONFIGURE_STYLE=	autoconf automake
AUTOCONF_VERSION=	2.69
AUTOMAKE_VERSION=	1.15

# AM_PROG_LIBTOOL, aclocal is run during build
BUILD_DEPENDS +=	devel/libtool

CONFIGURE_ENV=		LDFLAGS="-L${LOCALBASE}/lib" \
			CXXFLAGS="-I${LOCALBASE}/include" \
			CPPFLAGS="-I${LOCALBASE}/include" \
			OPENSSL=/usr/bin/openssl \
			ac_cv_lib_db_dbopen=no \
			ac_cv_lib_db_db_env_create=no

LIB_DEPENDS=		mail/courier-authlib \
			devel/libidn \
			devel/pcre

EXAMPLE_DIR=		${PREFIX}/share/examples/courier
SYSCONFDIR=		/etc/courier

CONFIGURE_ARGS=		--sbindir=${PREFIX}/sbin \
			--datadir=${PREFIX}/sbin \
			--prefix=${PREFIX} \
			--bindir=${PREFIX}/bin \
			--mandir=${PREFIX}/man \
			--enable-static \
			--disable-root-check \
			--with-dirsync \
			--enable-mimecharset=iso-8859-1 \
			--enable-unicode \
			--with-locking-method=fcntl \
			--with-mailuser=_courier \
			--with-piddir=${BASELOCALSTATEDIR}/run/courier \
			--with-makedatprog=${TRUEPREFIX}/libexec/makedat \
			--with-db=gdbm \
			--with-certsdir=/etc/ssl \
			--cache-file=${WRKDIR}/courier-imap.cache

DOCS=			AUTHORS INSTALL \
			NEWS libs/imap/ChangeLog \
			libs/imap/README libs/imap/README.proxy \
			libs/maildir/README.imapkeywords.html \
			libs/maildir/README.maildirfilter.html \
			libs/maildir/README.maildirquota.txt \
			libs/maildir/README.sharedfolders.txt \
			libs/tcpd/README.couriertls

FLAVORS=		no_trashquota imap_bugs
FLAVOR?=

.if ${FLAVOR:Mno_trashquota}
CONFIGURE_ARGS+=	--without-trashquota
.else
CONFIGURE_ARGS+=	--with-trashquota
.endif

.if ${FLAVOR:Mimap_bugs}
CONFIGURE_ARGS+=	--enable-workarounds-for-imap-client-bugs
.else
CONFIGURE_ARGS+=	--disable-workarounds-for-imap-client-bugs
.endif

MULTI_PACKAGES=		-main -pop3

LIB_DEPENDS-main=	${LIB_DEPENDS} \
			mail/courier-unicode>=2.0 \
			databases/gdbm
RUN_DEPENDS-pop3=	mail/courier-imap,-main

WANTLIB-main=		${WANTLIB} ssl crypto courier-unicode

MODULES=		devel/gettext

CNFFILES=		etc/courier/imapd-ssl.dist etc/courier/imapd.dist \
			etc/courier/pop3d-ssl.dist etc/courier/pop3d.dist \
			etc/courier/imapd.cnf etc/courier/pop3d.cnf \
			etc/courier/quotawarnmsg.example

# Regression tests need ulimit -p 256 and are not compatible
# with no_trashquota and imap_bugs flavors.
# If those flavors are not built you can do regress tests with
# ulimit -p 256
# make test NO_TEST=NO
NO_TEST=		Yes

post-extract:
	@@perl -pi -e 's,\@@datadir\@@\/imapd.rand,\/dev\/urandom,g' \
	    ${WRKSRC}/libs/imap/imapd.cnf.openssl.in
	@@perl -pi -e 's,\@@datadir\@@\/imapd.rand,\/dev\/urandom,g' \
	    ${WRKSRC}/libs/imap/pop3d.cnf.openssl.in

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/courier
	${INSTALL_DATA} ${WRKSRC}/libs/imap/README \
	    ${PREFIX}/share/doc/courier/README.imap.txt
.	for i in ${DOCS}
	     ${INSTALL_DATA} ${WRKSRC}/${i} ${PREFIX}/share/doc/courier
.	endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/courier
.	for i in ${CNFFILES}
	    mv ${WRKINST}/${i} ${EXAMPLE_DIR}
.	endfor
	@@rmdir ${WRKINST}/etc/courier/shared ${WRKINST}/etc/courier/shared.tmp

.include <bsd.port.mk>
@


1.110
log
@Drop USE_GROFF and bump.
Mandoc now handles DocBook lists implemented with \h.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2017/02/09 14:46:36 giovanni Exp $
d6 1
a6 1
V=			4.17.3
a10 1
REVISION=		0
d23 2
d26 1
a26 1
WANTLIB+=		idn pcre
d28 1
a28 1
WANTLIB-pop3+=		idn pcre ${MODGETTEXT_WANTLIB}
d97 1
a97 1
			mail/courier-unicode>=1.3 \
@


1.109
log
@bugfix update to 4.17.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2016/09/02 09:10:25 giovanni Exp $
d11 1
a29 1
USE_GROFF=		Yes
@


1.108
log
@bugfix update to 4.17.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2016/07/08 14:03:14 giovanni Exp $
d6 1
a6 1
V=			4.17.2
@


1.107
log
@Remove hidden dependency on devel/bison
spotted and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2016/06/19 19:30:15 giovanni Exp $
d6 1
a6 1
V=			4.17.1
a7 1
REVISION=		0
@


1.106
log
@Update to 4.17.1
patch committed upstream
support to TLS SNI added
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2016/03/18 21:53:02 giovanni Exp $
d8 1
@


1.105
log
@install makedat(1) under libexec to unbreak makeimapaccess(8) and
avoid the conflict with maildrop package
remove a wrong extraunexec while here
ok sthen@@ a while ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2016/01/25 14:35:46 giovanni Exp $
d6 1
a6 1
V=			4.16.2
a8 1
REVISION=		2
@


1.104
log
@makedat(1) is part of maildrop, fixes package conflicts with maildrop
spotted by naddy@@
ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2016/01/05 10:51:37 giovanni Exp $
d9 1
a9 1
REVISION=		1
@


1.103
log
@unbreak courier-imap startup with default config file
spotted by Theodore Wynnychenko, fix from sthen@@
thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2015/08/27 09:33:16 giovanni Exp $
d9 1
a9 1
REVISION=		0
@


1.102
log
@Bugfix update to 4.16.2
some patches committed upstream
remove @@samples that end up under /var/run, requested by ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2015/07/21 14:44:13 ajacoutot Exp $
d9 1
d65 1
a65 1
			--with-makedatprog \
@


1.101
log
@This also requires devel/libtool...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2015/07/20 23:46:53 ajacoutot Exp $
d6 1
a6 1
V=			4.16.0
a11 2
REVISION=		0

d32 1
a32 1
AUTOMAKE_VERSION=	1.14
a47 1
LOCALSTATEDIR=		${BASELOCALSTATEDIR}/run/courier
d63 1
a63 1
			--with-piddir=${LOCALSTATEDIR} \
d96 1
a96 1
			mail/courier-unicode \
d100 1
a100 1
WANTLIB-main=		${WANTLIB} ssl crypto unicode
@


1.100
log
@autoheader is implied when CONFIGURE_STYLE=automake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2015/07/20 22:14:36 jca Exp $
d35 3
@


1.99
log
@CONFIGURE_STYLE += automake, fixes build when automake-1.14 isn't installed

Problem spotted by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/07/20 07:17:40 jca Exp $
d32 1
a32 1
CONFIGURE_STYLE=	autoconf autoheader automake
@


1.98
log
@Cope with the upcoming SSLv3 removal.

ok sthen@@ giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/07/15 21:14:06 ajacoutot Exp $
d32 1
a32 1
CONFIGURE_STYLE=	autoconf autoheader
d34 1
@


1.97
log
@Fix pexp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2015/04/28 07:20:02 giovanni Exp $
d32 2
a33 1
CONFIGURE_STYLE=	gnu
@


1.96
log
@Update to 4.16.0
remove a couple of patches committed upstream
add 2 patches (committed upstream) to fix a use-after-free and to let
mkdhparams(8) work with LibreSSL
ok jca@@ on a similar diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2014/08/27 06:58:00 ajacoutot Exp $
d11 2
@


1.95
log
@Cope with openssl(1) move from /usr/sbin to /usr/bin

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/06/05 20:45:35 giovanni Exp $
d6 1
a6 1
V=			4.15
a10 1
REVISION-main=		0
a90 1
BUILD_DEPENDS=		devel/pcre
d92 1
d96 1
a96 1
WANTLIB-main=		${WANTLIB} ssl crypto
a119 2
	${INSTALL_DATA} ${WRKSRC}/libs/unicode/README \
	    ${PREFIX}/share/doc/courier/README.unicode.txt
@


1.94
log
@
Bugfix update to 4.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/04/15 08:53:04 ajacoutot Exp $
d11 1
d36 1
a36 1
			OPENSSL=/usr/sbin/openssl \
@


1.93
log
@No need to explicitely SUBST_VARS LOCALSTATEDIR anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/10/24 20:22:07 sthen Exp $
d6 1
a6 1
V=			4.13
a7 1
REVISION=		0
a11 3
REVISION-main=		0
REVISION-pop3=		0

d23 4
a26 2
WANTLIB=		c courierauth courierauthsasl gdbm idn
WANTLIB-pop3=		c courierauth courierauthsasl idn ${MODGETTEXT_WANTLIB}
d40 2
a41 1
			devel/libidn
d66 7
a72 7
			NEWS imap/ChangeLog \
			imap/README imap/README.proxy \
			maildir/README.imapkeywords.html \
			maildir/README.maildirfilter.html \
			maildir/README.maildirquota.txt \
			maildir/README.sharedfolders.txt \
			tcpd/README.couriertls
d114 1
a114 1
	    ${WRKSRC}/imap/imapd.cnf.openssl.in
d116 1
a116 1
	    ${WRKSRC}/imap/pop3d.cnf.openssl.in
d120 1
a120 1
	${INSTALL_DATA} ${WRKSRC}/unicode/README \
d122 1
a122 1
	${INSTALL_DATA} ${WRKSRC}/imap/README \
@


1.92
log
@no cookie for antoine! :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2013/10/24 15:18:00 ajacoutot Exp $
a45 1
SUBST_VARS=		LOCALSTATEDIR
@


1.91
log
@No need for the libiconv NODULE when we already have the gettext one.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/10/17 09:44:30 landry Exp $
d99 2
a100 1
			devel/gettext
@


1.90
log
@Add pcre to BDEP, configure checks for it and build fails later on if
dpb junks it.
from/with giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/07/18 08:51:32 giovanni Exp $
d13 3
a98 1
MODULES=		converters/libiconv \
@


1.89
log
@
Remove hidden dependency on db, spotted by sthen@@ and by naddy@@ a while ago
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/05/07 08:12:09 giovanni Exp $
d90 1
@


1.88
log
@
Bugfix update to 4.13
ok william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/03/21 08:46:32 ajacoutot Exp $
d8 1
d33 4
a36 1
			CPPFLAGS="-I${LOCALBASE}/include"
a62 2

CONFIGURE_ENV+=		OPENSSL=/usr/sbin/openssl
@


1.87
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/03/11 11:23:50 espie Exp $
d6 1
a6 1
V=			4.11.0
@


1.86
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2012/10/18 08:06:27 giovanni Exp $
a26 1
USE_LIBTOOL=		Yes
@


1.85
log
@
Bugfix update to 4.11.0, a patch has been committed upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2012/04/28 11:06:12 ajacoutot Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d106 2
a107 2
# make regress NO_REGRESS=NO
NO_REGRESS=		Yes
@


1.84
log
@Use LOCALSTATEDIR instead of local variables.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2012/04/28 10:51:44 ajacoutot Exp $
d6 1
a6 1
V=			4.10.0
a10 3

REVISION-main=		3
REVISION-pop3=		2
@


1.83
log
@Use LOCALSTATEDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2012/04/10 22:31:10 ajacoutot Exp $
d12 2
a13 2
REVISION-main=		2
REVISION-pop3=		1
d44 1
a44 1
COURIERSTATE=           /var/run/courier
d46 1
a46 1
SUBST_VARS=		COURIERSTATE
a48 2
LOCALSTATEDIR=		${COURIERSTATE}

d61 1
a61 1
			--with-piddir=${COURIERSTATE} \
@


1.82
log
@Fix default ssl certs path for the mk*cert tools so that it works out
of the box.
While here, fix REVISION to deal with multi packages.

ok giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2012/03/08 12:13:00 ajacoutot Exp $
d49 2
a52 1
			--localstatedir=${COURIERSTATE} \
@


1.81
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/02/21 22:19:31 sthen Exp $
a6 1
REVISION=		1
d12 3
d65 1
a65 1
			--with-certsdir=/etc/ssl/private \
@


1.80
log
@Remove patches casting NULL when used as a sentinel to a pointer.
These are no longer needed since unistd.h r1.63 et al.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/01/23 09:14:15 giovanni Exp $
d7 1
a7 1
REVISION=		0
a55 1
			--with-random=/dev/arandom \
d115 1
a115 1
	@@perl -pi -e 's,\@@datadir\@@\/imapd.rand,\/dev\/arandom,g' \
d117 1
a117 1
	@@perl -pi -e 's,\@@datadir\@@\/imapd.rand,\/dev\/arandom,g' \
@


1.79
log
@
Update to 4.10.0
ok william@@

Courier-imap has reset its epoch for the internal sequence number generator
for new mail folders.
Please read the UPGRADING section of the INSTALL notes for details.
http://fossies.org/unix/misc/courier-imap-4.10.0.tar.gz:a/courier-imap-4.10.0/INSTALL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/12/02 14:36:15 espie Exp $
d7 1
@


1.78
log
@bye bye FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/09/16 10:31:21 espie Exp $
d6 1
a6 1
V=			4.9.3
a10 3

REVISION-main=		2
REVISION-pop3=		1
@


1.77
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/08/22 07:57:25 giovanni Exp $
d83 1
a83 1
.if ${FLAVOR:L:Mno_trashquota}
d89 1
a89 1
.if ${FLAVOR:L:Mimap_bugs}
@


1.76
log
@
Fix rcscripts, spotted by Moritz Grimm, Thanks
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/06/09 13:30:42 ajacoutot Exp $
d12 2
a13 2
REVISION-main=		1
REVISION-pop3=		0
@


1.75
log
@Remove bogus @@sample.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/06/09 13:10:23 giovanni Exp $
d12 2
a13 1
REVISION-main=		0
@


1.75.2.1
log
@
Fix rcscripts, "-" should not be used.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/06/09 13:30:42 ajacoutot Exp $
d12 1
a12 2
REVISION-main=		1
REVISION-pop3=		0
@


1.74
log
@
Update to 4.9.3
Fixes some UTF-8 handling bugs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/06/06 15:01:52 giovanni Exp $
d11 2
@


1.73
log
@
Fix rc.d script ownerships.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/05/11 12:57:47 jasper Exp $
d6 1
a6 1
V=			4.9.1
a10 3

REVISION-main=		1
REVISION-pop3=		1
@


1.72
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/05/09 09:30:26 giovanni Exp $
d12 2
a13 2
REVISION-main=		0
REVISION-pop3=		0
@


1.71
log
@
Update to 4.9.1, utf-8 support completely rewritten and some bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/03/20 13:06:23 ajacoutot Exp $
d11 3
@


1.70
log
@Make use of rcexec in rc_start().

ok giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/03/17 16:49:27 ajacoutot Exp $
d6 1
a6 1
V=			4.8.0
a8 1
REVISION-main=		6
a9 1
REVISION-pop3=		6
d31 1
d63 1
@


1.69
log
@Remove all redirections -- rc.subr(8) now takes care of it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/12/27 14:50:23 ajacoutot Exp $
d9 1
a9 1
REVISION-main=		5
d11 1
a11 1
REVISION-pop3=		5
@


1.68
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/12/24 10:40:05 ajacoutot Exp $
d9 1
a9 1
REVISION-main=		4
d11 1
a11 1
REVISION-pop3=		4
@


1.67
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/12/16 17:55:10 giovanni Exp $
d9 1
a9 1
REVISION-main=		3
d11 1
a11 1
REVISION-pop3=		3
@


1.66
log
@
Add rcscripts to imap and pop3 servers
Help and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/11/19 07:23:06 espie Exp $
d9 1
a9 1
REVISION-main=		2
d11 1
a11 1
REVISION-pop3=		2
@


1.65
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/10/18 19:59:15 espie Exp $
d9 1
a9 1
REVISION-main=		1
d11 1
a11 1
REVISION-pop3=		1
d29 1
a32 1
USE_GROFF =		Yes
@


1.64
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/10/05 13:41:52 dcoppa Exp $
d32 1
a32 1
USE_GROFF =	Yes
d39 2
a40 2
LIB_DEPENDS=		::mail/courier-authlib \
			::devel/libidn
d95 2
a96 2
			::databases/gdbm
RUN_DEPENDS-pop3=	::mail/courier-imap,-main
@


1.63
log
@Zap "-static" from libtool linking flags for testbdb: it doesn't
break the testbdb binary and we can switch this port to our own
ports/infrastructure/bin/libtool

OK landry@@, giovanni@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/09/22 06:53:03 landry Exp $
d32 1
@


1.62
log
@Use gnu libtool here, db library is not found when using ports libtool.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/09/09 10:26:19 giovanni Exp $
d9 1
a9 1
REVISION-main=		0
d11 1
a11 1
REVISION-pop3=		0
d31 1
a31 2
#XXX db not found ?
USE_LIBTOOL=		gnu
@


1.61
log
@
courier-pop3 does not work without main package, spotted by Dave Anderson
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/07/08 16:29:58 giovanni Exp $
d31 2
a32 1
USE_LIBTOOL=		Yes
@


1.60
log
@
Update to 4.8.0 plus a patch from upstream to prevent a segfault
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/04/21 07:18:25 giovanni Exp $
d9 1
d11 1
d28 1
a28 1
WANTLIB=		c
d38 2
a39 2
LIB_DEPENDS=		courierauthsasl.>=0,courierauth.>=0::mail/courier-authlib \
			idn::devel/libidn
d94 3
a96 1
			gdbm.>=3::databases/gdbm
@


1.59
log
@
Update to 4.7.0
Fixes a libgamin hidden dependency and man pages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/04/15 14:11:01 ajacoutot Exp $
d6 1
a6 1
V=			4.7.0
d36 2
a37 1
LIB_DEPENDS=		courierauthsasl.>=0,courierauth.>=0::mail/courier-authlib
d94 2
@


1.58
log
@Consistency: remove the 1, 2 or even 3 empty blank lines.

sthen@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/02/26 18:55:21 espie Exp $
d6 1
a6 1
V=			4.6.0
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p0
FULLPKGNAME-pop3=	courier-pop3-${V}p0
@


1.57
log
@fix FULLPKGPATH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/10/28 14:20:19 giovanni Exp $
d8 1
a8 1
PKGNAME-main=		${DISTNAME}
@


1.57.2.1
log
@- Do not pick up libfam/gamin even if installed
- Fix manpages so they display properly

from giovanni@@ with a tweak by me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/02/26 18:55:21 espie Exp $
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p0
FULLPKGNAME-pop3=	courier-pop3-${V}p1
@


1.56
log
@
Update to 4.6.0 and take maintainership
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/09/15 17:37:21 jasper Exp $
d9 2
a10 1
FULLPKGNAME-pop3=	courier-pop3-${V}
@


1.55
log
@remove marc balmer as maintainer of all of his ports, to take away the
illusion marc still maintains them. as requested by himself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/07/18 11:49:14 aanriot Exp $
d6 1
a6 1
V=			4.1.1
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p3
FULLPKGNAME-pop3=	courier-pop3-${V}p1
d17 1
d19 1
a19 1
# GPL
d40 1
a40 1
SYSCONFDIR=/etc/courier
d98 7
d107 1
a107 1
	    ${WRKSRC}/imap/imapd.cnf.in
d109 1
a109 1
	    ${WRKSRC}/imap/pop3d.cnf.in
@


1.54
log
@- update paths in the instructions.
- mention in the instructions that /var/run/courier-auth/ also has to be
created.
- while there, remove quotes from the COMMENTs.

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/06/22 07:34:45 mbalmer Exp $
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p2
FULLPKGNAME-pop3=	courier-pop3-${V}p0
a16 1
MAINTAINER=		Marc Balmer <mbalmer@@openbsd.org>
@


1.53
log
@Correct directory permissions and bump package name.
Found by Marc Winiger <mw@@msys.ch>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/05/26 10:35:51 steven Exp $
d3 2
a4 2
COMMENT-main=		"imap server for maildir format mailboxes"
COMMENT-pop3=		"pop3 server for maildir format mailboxes"
d8 2
a9 2
PKGNAME-main=		${DISTNAME}p1
FULLPKGNAME-pop3=	courier-pop3-${V}
@


1.52
log
@remove unneeded BASE_PKGPATH definition
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2006/11/25 20:20:07 steven Exp $
d8 1
a8 1
PKGNAME-main=		${DISTNAME}p0
@


1.51
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2006/11/03 16:19:56 mbalmer Exp $
d39 1
a39 1
SUBST_VARS=		COURIERSTATE BASE_PKGPATH
@


1.50
log
@Update to courier-imap 4.1.1.  If you used courier-imap before, you should
now also use courier-authlib (which is new) as the authentication stuff
has been moved there.

This should make our courier system again faily complete, we have been
running this code for almost a year.
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=		"imap server for maildir format mailboxes"
d6 4
a9 2
DISTNAME=		courier-imap-4.1.1
FULLPKGNAME-pop3=	${DISTNAME:S/imap/pop3/}
d39 1
a39 1
SUBST_VARS=		COURIERSTATE
d58 1
d87 1
a87 6
MULTI_PACKAGES=		-pop3
SUBPACKAGE?=
.if $(SUBPACKAGE) !=	"-pop3"
LIB_DEPENDS+=		gdbm.>=3::databases/gdbm
CONFIGURE_ARGS+=	--with-db=gdbm
.endif
d89 3
a91 3
.if defined(PACKAGING) && $(SUBPACKAGE) != "-pop3"
WANTLIB+=               ssl crypto
.endif
@


1.49
log
@more new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2006/08/03 13:09:09 espie Exp $ 
d3 2
a4 13
COMMENT=	"imap server for maildir format mailboxes"
COMMENT-pop3=	"pop3 server for maildir format mailboxes"
COMMENT-ldap=	"ldap authentication module for courier-imap"
COMMENT-mysql=	"mysql authentication module for courier-imap"
COMMENT-pgsql=	"pgsql authentication module for courier-imap"

COURIERVER=	3.0.5
DISTNAME=	courier-imap-${COURIERVER}
FULLPKGNAME=	courier-imap-${COURIERVER}p4
FULLPKGNAME-pop3= courier-pop3-${COURIERVER}p1
FULLPKGNAME-ldap= courier-ldap-${COURIERVER}p1
FULLPKGNAME-mysql= courier-mysql-${COURIERVER}p1
FULLPKGNAME-pgsql= courier-pgsql-${COURIERVER}p1
d6 2
a7 1
CATEGORIES=	mail
d9 1
a9 2
MASTER_SITES=   ${MASTER_SITE_SOURCEFORGE:=courier/}
EXTRACT_SUFX=	.tar.bz2
d11 5
a15 1
HOMEPAGE=	http://www.inter7.com/courierimap/
d22 1
d25 45
a69 2
MULTI_PACKAGES=	-pop3
SUBPACKAGE?=
d72 4
a75 8
COURIERCONF=	${SYSCONFDIR}/courier-imap
COURIERSTATE=	/var/run/courier-imap
SUBST_VARS=	COURIERSTATE COURIERCONF COURIERVER
EXAMPLE_DIR= 	${PREFIX}/share/examples/courier-imap
USE_GMAKE=	Yes

.if $(SUBPACKAGE) != "-pop3"
LIB_DEPENDS=	gdbm.>=2::databases/gdbm
d78 2
a79 16
CONFIGURE_STYLE= gnu old
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib" \
		CXXFLAGS="${CFLAGS:C/ *$//} -I${LOCALBASE}/include" \
		CPPFLAGS="${CFLAGS:C/ *$//} -I${LOCALBASE}/include"
CONFIGURE_ARGS=	--disable-root-check --datadir=${PREFIX}/sbin \
		--with-userdb=${SYSCONFDIR}/userdb --with-authuserdb \
		--sysconfdir=${COURIERCONF} --with-authdaemon \
		--with-authdaemonvar=${COURIERSTATE} \
		--enable-workarounds-for-imap-client-bugs \
		--with-db=gdbm --with-authpwd \
		--localstatedir=${COURIERSTATE}

# mysql
PSEUDO_FLAVORS+=	no_mysql
.if ${FLAVOR:L:Mno_mysql}
CONFIGURE_ARGS+=	--without-authmysql
d81 1
a81 6
MULTI_PACKAGES+=	-mysql
CONFIGURE_ARGS+=	--with-authmysql \
			--with-mysql-libs=${LOCALBASE}/lib/mysql \
			--with-mysql-includes=${LOCALBASE}/include/mysql
MYSQL_DEPENDS+=		lib/mysql/mysqlclient.>=10::databases/mysql
MYSQL_WANTLIB=		crypto ssl m z 
d84 5
a88 8
# openldap
PSEUDO_FLAVORS+=	no_ldap
.if ${FLAVOR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-authldap
.else
MULTI_PACKAGES+=	-ldap
CONFIGURE_ARGS+=	--with-authldap
LDAP_DEPENDS+=		ldap.>=2,lber.>=2:openldap-client-2.*:databases/openldap
d91 2
a92 8
# postgresql
PSEUDO_FLAVORS+=	no_pgsql
.if !${FLAVOR:L:Mno_pgsql}
MULTI_PACKAGES+=	-pgsql
CONFIGURE_ARGS+=	--with-pgsql-libs=${LOCALBASE}/lib \
			--with-pgsql-includes=${LOCALBASE}/include/postgresql
PGSQL_DEPENDS+=		pq.>=2:postgresql-client-*:databases/postgresql
PGSQL_WANTLIB=		m
d95 10
a104 16
# pop3 has no dependencies
POP3_DEPENDS=

.if defined(PACKAGING)
.  if !empty(SUBPACKAGE)
LIB_DEPENDS+=		${${SUBPACKAGE:U:S/-//g}_DEPENDS}
WANTLIB+=		${${SUBPACKAGE:U:S/-//g}_WANTLIB}
RUN_DEPENDS=		:courier-imap-${COURIERVER}:mail/courier-imap
.  else
WANTLIB+=		ssl crypto
.  endif
.else
.for i in ${MULTI_PACKAGES}
LIB_DEPENDS+=           ${${i:U:S/-//g}_DEPENDS}
.endfor
.endif
d107 13
a119 20
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/courier-imap
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/courier-imap
.for i in pop3d-ssl imapd-ssl pop3d imapd
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/$i.dist ${EXAMPLE_DIR}/$i
.endfor
.for i in imapd.cnf pop3d.cnf quotawarnmsg.example
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/$i ${EXAMPLE_DIR}
.endfor
.for i in mysql ldap pgsql daemon
	-${INSTALL_DATA} ${WRKINST}${COURIERCONF}/auth${i}rc.dist \
			${EXAMPLE_DIR}/auth${i}rc
.endfor
.for i in authmysql.html authmysql.myownquery authpostgres.html ldap
	-${INSTALL_DATA} ${WRKSRC}/authlib/README.${i} \
			${PREFIX}/share/doc/courier-imap
.endfor
.for i in cram pwd userdb
	${INSTALL_PROGRAM} ${WRKBUILD}/authlib/auth${i} \
			${PREFIX}/libexec/authlib
.endfor
@


1.48
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2006/04/20 00:40:45 jolan Exp $ 
d42 1
a42 1
LIB_DEPENDS=	gdbm.2::databases/gdbm
d66 1
a66 1
MYSQL_DEPENDS+=		lib/mysql/mysqlclient.10::databases/mysql
d86 1
a86 1
PGSQL_DEPENDS+=		pq.2:postgresql-client-*:databases/postgresql
@


1.47
log
@[19:13] *loki* can you seriously remove me as the maintainer on courier-imap?
[19:18] ->*jolan* why don't you do it
[19:20] *loki* i dont want to commit to ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2005/09/16 09:51:27 espie Exp $ 
d77 1
a77 1
LDAP_DEPENDS+=		ldap.2,lber.2:openldap-client-2.*:databases/openldap
@


1.46
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2005/02/10 23:44:03 espie Exp $ 
a8 2
MAINTAINER=	David Gwynne <loki@@animata.net>

d11 5
a15 5
FULLPKGNAME=	courier-imap-${COURIERVER}p3
FULLPKGNAME-pop3= courier-pop3-${COURIERVER}p0
FULLPKGNAME-ldap= courier-ldap-${COURIERVER}p0
FULLPKGNAME-mysql= courier-mysql-${COURIERVER}p0
FULLPKGNAME-pgsql= courier-pgsql-${COURIERVER}p0
@


1.45
log
@zap extra spaces at end of CFLAGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/01/02 11:55:10 alek Exp $ 
d13 1
a13 1
FULLPKGNAME=	courier-imap-${COURIERVER}p2
@


1.44
log
@- Add WANTLIB marker
- Shuffle LIB_DEPENDS between SUBPACKAGES
- Bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2004/12/06 22:50:20 mbalmer Exp $ 
d49 2
a50 2
		CXXFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
		CPPFLAGS="${CFLAGS} -I${LOCALBASE}/include"
@


1.43
log
@Commented out man pages pw2userdb.8 and vchkpw2userdb.8 in pkg/PLIST for
which no executable is installed by this port but which conflicted with
the courier-utils subpackage of mail/maildrop (which installs the executables
and manual pages).

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2004/11/25 11:44:03 alek Exp $ 
d13 5
a17 5
FULLPKGNAME=	courier-imap-${COURIERVER}p1
FULLPKGNAME-pop3= courier-pop3-${COURIERVER}
FULLPKGNAME-ldap= courier-ldap-${COURIERVER}
FULLPKGNAME-mysql= courier-mysql-${COURIERVER}
FULLPKGNAME-pgsql= courier-pgsql-${COURIERVER}
d31 1
d43 1
d45 1
d69 1
d89 1
d95 4
a98 2
.if defined(PACKAGING) && !empty(SUBPACKAGE)
LIB_DEPENDS=            ${${SUBPACKAGE:U:S/-//g}_DEPENDS}
d100 3
@


1.42
log
@- We had courier-imap 1.3.5 in the ports tree three years ago.
  There is no need to tutor users how to upgrade from this version.
- Bump FULLPKGNAME (only courier-imap, not SUBPACKAGEs)

ok David Gwynne (MAINTAINER), naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2004/07/26 10:18:25 peter Exp $ 
d13 1
a13 1
FULLPKGNAME=	courier-imap-${COURIERVER}p0
@


1.41
log
@Update to use new postgresql-client dependency

Maintainer ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2004/07/06 21:00:11 avsm Exp $ 
d13 1
a13 1
FULLPKGNAME=	courier-imap-${COURIERVER}
@


1.40
log
@new maintainer, loki@@animata.net
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2004/07/01 12:19:35 avsm Exp $ 
d84 1
a84 1
PGSQL_DEPENDS+=		pq.2::databases/postgresql
@


1.39
log
@update to courier-imap-3.05, from David Gwynne <loki at animata.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2004/06/06 18:25:57 avsm Exp $ 
d8 2
@


1.38
log
@drop maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2004/02/16 17:14:52 avsm Exp $ 
d9 1
a9 1
COURIERVER=	1.7.2
d11 2
a12 2
FULLPKGNAME=	courier-imap-${COURIERVER}p0
FULLPKGNAME-pop3= courier-pop3-${COURIERVER}p0
d52 1
a52 2
		--localstatedir=${COURIERSTATE} \
		--without-ipv6
@


1.37
log
@an attempt to unlink(2) a directory returns EPERM, not EISDIR. fixes folder
deletion in courier.

from Marc Balmer <marc at msys.ch>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2004/01/02 05:11:08 brad Exp $ 
a21 1
MAINTAINER=	Anil Madhavapeddy <avsm@@openbsd.org>
@


1.36
log
@better LIB_DEPENDS entries for MySQL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2003/05/23 21:57:51 avsm Exp $ 
d11 2
a12 1
FULLPKGNAME-pop3= courier-pop3-${COURIERVER}
@


1.35
log
@update to courier-imap-1.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2003/04/14 09:21:31 avsm Exp $ 
d64 1
a64 1
MYSQL_DEPENDS+=		lib/mysql/mysqlclient.10:mysql-client-3.23.*:databases/mysql
@


1.34
log
@Update to courier-imap-1.7.1; this fixes an important assumption that
pids on openbsd can be recycled in intervals smaller than one second
(previous it assumed that they couldnt).  This prevents maildir
corruption on heavily loaded servers.

Also temporarily disable ipv6; it seems pretty broken right now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2003/02/27 00:08:16 avsm Exp $ 
d9 1
a9 1
COURIERVER=	1.7.1
@


1.33
log
@rename the subpackages to not look like flavors (we now have
courier-{ldap,mysql,pgsql}-1.7.0 , which unbreaks binary package
adding
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2003/02/17 16:14:34 avsm Exp $ 
d9 1
a9 1
COURIERVER=	1.7.0
d52 2
a53 1
		--localstatedir=${COURIERSTATE}
@


1.33.2.1
log
@MFC:
Update to courier-imap-1.7.1; this fixes an important assumption that
pids on openbsd can be recycled in intervals smaller than one second
(previous it assumed that they couldnt).  This prevents maildir
corruption on heavily loaded servers.

Also temporarily disable ipv6; it seems pretty broken right now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2003/04/14 09:21:31 avsm Exp $ 
d9 1
a9 1
COURIERVER=	1.7.1
d52 1
a52 2
		--localstatedir=${COURIERSTATE} \
		--without-ipv6
@


1.32
log
@update to courier-imap-1.7.0 and removed some PFRAGs which should have
disappeared a few updates ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2002/12/29 15:12:31 fgsch Exp $ 
d12 3
@


1.31
log
@and more.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2002/08/19 18:54:36 avsm Exp $ 
d9 1
a9 1
COURIERVER=	1.5.3
d16 1
d48 2
a49 1
		--with-db=gdbm --with-authpwd
@


1.30
log
@dont error out during the no_[mysql|pgsql|ldap] flavors due to missing
config files.

spotted by David Thiel <lx@@redundancy.redundancy.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2002/08/08 17:03:21 avsm Exp $ 
a13 1
NEED_VERSION=	1.503
@


1.30.2.1
log
@Fix the {ldap,mysql,pgsql} subpackage names to not look like flavors,
which means they can now all be installed together without conflicts.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2002/08/19 18:54:36 avsm Exp $ 
a11 3
FULLPKGNAME-ldap= courier-ldap-${COURIERVER}
FULLPKGNAME-mysql= courier-mysql-${COURIERVER}
FULLPKGNAME-pgsql= courier-pgsql-${COURIERVER}
@


1.29
log
@- update to courier-imap-1.5.3
- add pseudo_flavors for no_[ldap|mysql|pgsql] subpackages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/07/08 21:24:50 avsm Exp $ 
d103 1
a103 1
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/auth${i}rc.dist \
d107 1
a107 1
	${INSTALL_DATA} ${WRKSRC}/authlib/README.${i} \
@


1.28
log
@Upgrade to courier-imap-1.5.1

Eliminate the ldap and mysql flavors - now this package generates
subpackages for the pop3 server, and also mysql, ldap and pgsql
authentication modules.  Should make installing it from binary
packages significantly easier, and allow us to build less package
combinations.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/05/13 23:31:25 espie Exp $ 
d9 1
a9 1
COURIERVER=	1.5.1
d27 1
a27 1
MULTI_PACKAGES=	-pop3 -ldap -mysql -pgsql
d29 1
d51 5
d60 1
d63 5
d70 1
d73 3
d79 1
@


1.27
log
@More MASTER_SITES_SUBDIR out
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2002/04/17 16:19:39 naddy Exp $ 
d5 3
d9 1
a9 1
COURIERVER=	1.4.2
d27 1
a27 4
FLAVORS=	mysql ldap
FLAVOR?=

MULTI_PACKAGES=	-pop3
a29 1
SEPARATE_BUILD=	concurrent
d47 1
a47 5
		--with-db=gdbm

.if ${FLAVOR:L:Mmysql} && ${FLAVOR:L:Mldap}
ERRORS+= "Fatal: Conflicting flavor: You must choose either ldap or mysql."
.endif
d49 1
a49 1
.if ${FLAVOR:L:Mmysql}
d53 1
a53 4
LIB_DEPENDS+=		lib/mysql/mysqlclient.10:mysql-client-3.23.*:databases/mysql
.else
CONFIGURE_ARGS+=	--without-authmysql
.endif
d55 1
a55 1
.if ${FLAVOR:L:Mldap}
d57 9
a65 4
LIB_DEPENDS+=		ldap.2,lber.2:openldap-client-2.*:databases/openldap
.else
CONFIGURE_ARGS+=	--without-authldap
.endif
d68 6
a73 2
RUN_DEPENDS=	:courier-imap-${COURIERVER}:mail/courier-imap
LIB_DEPENDS=
d78 1
d85 12
a96 9
.if ${FLAVOR:L:Mmysql}
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/authmysqlrc.dist \
			${EXAMPLE_DIR}/authmysqlrc
.endif
.if ${FLAVOR:L:Mldap}
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/authldaprc.dist \
			${EXAMPLE_DIR}/authldaprc
.endif
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/authdaemonrc.dist ${EXAMPLE_DIR}/authdaemonrc
@


1.26
log
@fix subpackage dependencies; silence from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2002/02/11 00:51:27 avsm Exp $ 
d13 1
a13 2
MASTER_SITES=   ${MASTER_SITE_SOURCEFORGE}
MASTER_SITE_SUBDIR= courier
@


1.25
log
@Update to courier-imap-1.4.2

The mysql and ldap flavours need more testing!
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.24 2001/11/11 13:48:16 espie Exp $ 

MULTI_PACKAGES=	-pop3
d8 1
a8 1
PKGNAME-pop3=	courier-pop3-${COURIERVER}
d28 3
d71 5
a94 4

.if ${SUBPACKAGE} == "-pop3"
RUN_DEPENDS+=	${LOCALBASE}/bin/imapd:courier-imap-${COURIERVER}:mail/courier-imap
.endif
@


1.24
log
@Complete mysql depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/10/24 12:22:45 espie Exp $ 
d8 1
a8 1
COURIERVER=	1.3.11
d13 1
a13 1
NEED_VERSION=	1.474
@


1.23
log
@Complete lib dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/10/06 22:55:48 naddy Exp $ 
d58 1
a58 1
LIB_DEPENDS+=		mysqlclient.10:mysql-client-3.23.*:databases/mysql
@


1.22
log
@find mysql includes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/09/30 23:15:57 avsm Exp $ 
d13 1
a13 1
NEED_VERSION=	1.463
d65 1
a65 1
LIB_DEPENDS+=		ldap.2:openldap-client-2.*:databases/openldap
@


1.21
log
@- upgrade to courier-imap-1.3.11
- install authmysqlrc and authldaprc in the relevant flavors
- depend on gdbm now, and force usage of it (danh@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/09/28 19:06:30 jakob Exp $ 
d55 3
a57 1
CONFIGURE_ARGS+=	--with-authmysql --with-mysql-libs=${LOCALBASE}/lib/mysql
@


1.20
log
@depend on openldap-client
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/07/18 10:59:01 naddy Exp $ 
d8 1
a8 1
COURIERVER=	1.3.8.2
d13 1
a13 1
NEED_VERSION=	1.422
d37 2
d47 2
a48 1
		--enable-workarounds-for-imap-client-bugs 
d76 8
@


1.19
log
@- Make use of new bsd.port.mk feature and replace error reporting through
  .BEGIN with ERRORS.
- Sync NEED_VERSION accordingly.
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/06/18 21:19:22 avsm Exp $ 
d60 1
a60 1
LIB_DEPENDS+=		ldap.2::databases/openldap
@


1.18
log
@Update to courier-imap-1.3.8.2

This fixes the ipv6 issues with the previous version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/06/09 19:42:42 avsm Exp $ 
d13 1
a13 1
NEED_VERSION=	1.402
d48 1
a48 3
.BEGIN:
	@@echo "Conflicting flavors: You must choose either ldap or mysql."
	@@exit 1
@


1.17
log
@fix the mysql flavor

spotted by the ever-vigilant naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/06/03 05:32:16 brad Exp $ 
d8 1
a8 1
COURIERVER=	1.3.8.1
d45 1
a45 1
		--enable-workarounds-for-imap-client-bugs --without-ipv6
@


1.16
log
@update dependency entries for MySQL.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/05/10 22:29:04 avsm Exp $ 
d54 1
a54 1
CONFIGURE_ARGS+=	--with-authmysql
@


1.15
log
@Upgrade to courier-imap-1.3.8.1

- Split into subpackages: courier-pop3 and courier-imap
- pop3 FLAVOR no longer needed, so removed
- Disable ipv6, since if it detects ipv6, it will bind only to the ipv6
  socket and expect that to also accept ipv4 connections.  Author notified
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/05/06 01:46:03 lebel Exp $ 
d55 1
a55 1
LIB_DEPENDS+=		mysqlclient::databases/mysql
@


1.14
log
@mail: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.13 2001/03/22 03:10:48 avsm Exp $ 
d6 5
a11 1
DISTNAME=	courier-imap-1.3.5
d14 1
d27 1
a27 1
FLAVORS=	pop3 mysql ldap
d33 1
a33 1
SUBST_VARS=	COURIERSTATE COURIERCONF
d35 1
d45 1
a45 1
		--enable-workarounds-for-imap-client-bugs
d54 2
a55 2
CONFIGURE_ARGS+=       --with-authmysql
LIB_DEPENDS+=          mysqlclient::databases/mysql
d57 1
a57 1
CONFIGURE_ARGS+=       --without-authmysql
d61 2
a62 2
CONFIGURE_ARGS+=       --with-authldap
LIB_DEPENDS+=          ldap.2::databases/openldap
d64 1
a64 1
CONFIGURE_ARGS+=       --without-authldap
d72 1
a72 1
.for i in imapd.cnf pop3d.cnf quotawarnmsg.example authdaemonrc.dist
d75 1
d78 4
@


1.13
log
@Update to use the authdaemon framework, instead of directly accessing
the static authentication modules.

This allows us to add two new flavors: ldap and mysql, which communicate
via the authdaemon.

Note that this requires users to rehaul their configuration scripts;
the INSTALL script should detect this and print out a message.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.12 2001/02/28 04:55:03 avsm Exp $ 
d7 1
a7 1
NEED_VERSION=	1.351
@


1.12
log
@- update to courier-imap-1.3.5
- setup CONFIGURE_ENV more carefully
- /etc/userdb -> ${SYSCONFDIR}/userdb - this doesn't go in /etc/courier-imap
 since the userdb can be shared across several applications
- finally cave in, and activate the workarounds for bugs in IMAP clients.
This actually breaks RFC2060, but allows NS4/Mozilla/StarOffice brain-dead
clients to work with courier-imap.

--
Add support for the IMAP IDLE extensions
Block out clients that constantly send garbage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/02/21 19:04:56 avsm Exp $ 
d18 1
a18 1
FLAVORS=	pop3
d23 2
a24 1
SUBST_VARS=	COURIERCONF
d33 2
a34 2
		--without-authmysql --without-authldap \
		--sysconfdir=${COURIERCONF} \
d37 20
d60 1
a60 1
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/${i}.dist ${EXAMPLE_DIR}/${i}
d62 2
a63 2
.for i in imapd pop3d
	${INSTALL_DATA} ${WRKINST}${COURIERCONF}/${i}.cnf ${EXAMPLE_DIR}
@


1.11
log
@- update to courier-imap-1.3.4
- dont override the SYSCONFDIR variable to /etc/courier-imap anymore; use ${SYSCONFDIR}/courier-imap now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/02/09 12:06:40 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.3.4
d27 3
d31 1
a31 1
		--with-userdb=/etc/userdb --with-authuserdb \
d33 2
a34 1
		--sysconfdir=${COURIERCONF}
@


1.10
log
@- update to courier-imap-1.3.3
- explicity disable authmysql and authldap until they are spin off into
  separate FLAVORs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/02/02 00:22:48 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.3.3
a20 1
CONFIGURE_STYLE= gnu
d22 5
d29 2
a30 3
		--without-authmysql --without-authldap
SYSCONFDIR= 	/etc/courier-imap
EXAMPLE_DIR= 	${PREFIX}/share/examples/courier-imap
d35 1
a35 1
	${INSTALL_DATA} ${WRKINST}/${SYSCONFDIR}/${i}.dist ${EXAMPLE_DIR}/${i}
d38 1
a38 1
	${INSTALL_DATA} ${WRKINST}/${SYSCONFDIR}/${i}.cnf ${EXAMPLE_DIR}
@


1.9
log
@indent, minor corrections in DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/01/26 00:42:03 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.3.2
d24 2
a25 1
		--with-userdb=/etc/userdb --with-authuserdb
@


1.8
log
@- upgrade to courier-imap-1.3.2
- bump NEED_VERSION

This is a bugfix release:
o Fix big5/gb2312 conversion logic.
o Fix authldap connection failure recovery
o Update INSTALL to reflect new upgrade instructions.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/01/15 23:37:18 avsm Exp $ 
d21 1
d23 4
a26 4
CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--disable-root-check --datadir=${PREFIX}/sbin --with-userdb=/etc/userdb --with-authuserdb
SYSCONFDIR= /etc/courier-imap
EXAMPLE_DIR= ${PREFIX}/share/examples/courier-imap
@


1.7
log
@- upgrade to courier-imap-1.3.1

Contains bugfixes to most outstanding issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/12/29 18:51:56 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.3.1
d5 1
a5 1
NEED_VERSION=	1.346
@


1.6
log
@- upgrade to courier-imap-1.3.0

- regenerate patches and name them consistently.  Note that the
  configuration file format and names have changed with this release

- add an INSTALL shell fragment to detect old versions of the config
files and warn the user to regenerate them

- config files now live in /etc/courier-imap, as they are very
  generic names, and this avoid conflict with other imap daemons

Summary of changes:

This release fixes some bugs in the POP3 server, adds optional
support for gb2312 and big5 text search, and introduces a new
configuration file format.

The new configuration file format will allow future upgrades
to automatically preserve the existing system configuration data,
instead of installing a default set of configuration files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/11/22 11:42:31 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.3.0
@


1.5
log
@Upgrade to Courier-IMAP 1.2.3

This introduces a new 'pop3' flavour, since the package bundles a POP3
server that can read from maildirs and use the same authmodules also.

And a number of stability fixes, including leaking file descriptions,
maildir handling, and also compliance with the latest IETF IMAP drafts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/10/01 13:27:13 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.2.3
d5 1
a5 1
NEED_VERSION=	1.340
d24 2
a25 1
EXAMPLE_DIR=	${PREFIX}/share/examples/courier-imap
d29 5
a33 4
.for i in pop3d imapd
	${INSTALL_DATA} ${WRKBUILD}/$i-ssl.config ${EXAMPLE_DIR}
	${INSTALL_DATA} ${WRKBUILD}/$i.config ${EXAMPLE_DIR}
	${INSTALL_DATA} ${WRKBUILD}/$i.cnf ${EXAMPLE_DIR}
@


1.4
log
@- update to v1.1
  (notable changes: better locking, improved RC scripts, THREAD semantics
   updated to latest IETF draft, unicode support, bug fixes)
- bump NEED_VERSION, MAINTAINER real name added
- regenerate RC patch
- PLIST tweaked to not delete libexec/authlib, which is being
  used by other applications now (e.g. vmailmgr)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/09/10 20:38:10 avsm Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.1
d5 1
a5 1
NEED_VERSION=	1.336
d18 3
d23 2
a24 1
CONFIGURE_ARGS=	--disable-root-check --datadir=${PREFIX}/sbin
d28 5
a32 6
	${INSTALL_DATA} ${WRKBUILD}/imapd-ssl.config \
		${PREFIX}/share/examples/courier-imap
	${INSTALL_DATA} ${WRKBUILD}/imapd.config \
		${PREFIX}/share/examples/courier-imap
	${INSTALL_DATA} ${WRKBUILD}/imapd.cnf \
		${PREFIX}/share/examples/courier-imap
@


1.3
log
@- Update to v1.0
- Change the maintainer address
- Remove redundant Makefile.in patch and regenerate others
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/08/10 21:12:48 danh Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-1.0
d5 1
a5 1
NEED_VERSION=	1.326
d9 1
a9 1
MAINTAINER=	avsm@@openbsd.org
@


1.2
log
@update to version 0.99 from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.2 2000/07/03 08:11:24 kevlo Exp $ 
d3 1
a3 1
DISTNAME=	courier-imap-0.99
d5 1
a5 1
NEED_VERSION=	1.319
d9 1
a9 1
MAINTAINER=	anil@@recoil.org
d12 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$ 
d3 1
a3 2
DISTNAME=	courier-imap-0.35
NEED_VERSION=	1.273
d5 3
a7 1
MASTER_SITES=	ftp://download.sourceforge.net/pub/sourceforge/courier/
d10 1
d17 12
a28 6
FAKE=	Yes

SYSCONFDIR= /usr/local/share/courier-imap
GNU_CONFIGURE=	Yes

RUN_DEPENDS= stunnel::security/stunnel
@


1.1.1.1
log
@import 
IMAP server for Maildir format mailboxes

@
text
@@


1.1.1.2
log
@Initial import of courier-imap version 0.35.
courier-imap is an imap server for maildir format mailboxes.

Submitted by:	Anil Madhavapeddy <anil@@recoil.org>
@
text
@d4 1
a5 1
NEED_VERSION=	1.311
d15 1
a15 1
RUN_DEPENDS= 	stunnel::security/stunnel
d17 2
a18 2
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=	--sysconfdir=${PREFIX}/share/courier-imap
d20 1
a20 4
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/courier-imap
	${INSTALL_DATA} ${WRKSRC}/imapd-ssl.config ${PREFIX}/share/courier-imap
	${INSTALL_DATA} ${WRKSRC}/imapd.config ${PREFIX}/share/courier-imap
@

