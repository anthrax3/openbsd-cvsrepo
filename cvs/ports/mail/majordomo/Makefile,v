head	1.25;
access;
symbols
	OPENBSD_6_0:1.25.0.6
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.23.0.8
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.23.0.6
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.22.0.6
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.22.0.4
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.2
	OPENBSD_5_0:1.21.0.2
	OPENBSD_5_0_BASE:1.21
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.16.0.12
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.10
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.16.0.8
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.6
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.16.0.4
	OPENBSD_4_4_BASE:1.16
	OPENBSD_4_3:1.16.0.2
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.14.0.12
	OPENBSD_4_2_BASE:1.14
	OPENBSD_4_1:1.14.0.10
	OPENBSD_4_1_BASE:1.14
	OPENBSD_4_0:1.14.0.8
	OPENBSD_4_0_BASE:1.14
	OPENBSD_3_9:1.14.0.6
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.14.0.4
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.13.0.6
	OPENBSD_3_6_BASE:1.13
	OPENBSD_3_5:1.13.0.4
	OPENBSD_3_5_BASE:1.13
	OPENBSD_3_4:1.13.0.2
	OPENBSD_3_4_BASE:1.13
	OPENBSD_3_3:1.11.0.2
	OPENBSD_3_3_BASE:1.11
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.8.0.2
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	OPENBSD_2_9_TRACKING_SWITCH:1.6
	OPENBSD_2_9:1.5.0.2
	OPENBSD_2_9_BASE:1.5
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.2.0.2
	hartmeier:1.1.1.1
	majordomo:1.1.1;
locks; strict;
comment	@# @;


1.25
date	2015.06.18.06.57.21;	author bentley;	state Exp;
branches;
next	1.24;
commitid	WR9IqCbb37FOIrnJ;

1.24
date	2015.04.10.14.43.49;	author naddy;	state Exp;
branches;
next	1.23;
commitid	OXtLUDBA6ejW4Sin;

1.23
date	2013.03.11.11.23.51;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2012.01.26.08.03.57;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.05.11.12.57.48;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2011.02.02.20.15.48;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.19.07.23.07;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.18.21.50.39;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.19.59.16;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2008.01.12.19.15.37;	author okan;	state Exp;
branches;
next	1.15;

1.15
date	2007.09.16.00.17.05;	author merdely;	state Exp;
branches;
next	1.14;

1.14
date	2005.01.02.12.56.05;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2003.06.22.10.06.45;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2003.04.26.14.55.32;	author sturm;	state Exp;
branches;
next	1.11;

1.11
date	2003.02.06.20.47.48;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2002.10.27.17.21.39;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2002.04.25.07.41.07;	author dhartmei;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2002.03.21.21.09.17;	author espie;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2001.08.31.13.45.34;	author dhartmei;	state Exp;
branches;
next	1.6;

1.6
date	2001.05.06.01.46.20;	author lebel;	state Exp;
branches;
next	1.5;

1.5
date	2001.01.21.23.34.58;	author danh;	state Exp;
branches;
next	1.4;

1.4
date	2000.10.22.17.05.04;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2000.10.22.15.42.32;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.05.23.20.17.03;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2000.05.22.16.33.43;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.05.22.16.33.43;	author espie;	state Exp;
branches;
next	;

1.8.2.1
date	2003.02.07.01.46.16;	author brad;	state Exp;
branches;
next	;

1.9.2.1
date	2003.02.07.01.07.56;	author brad;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Replace dead ftp mirror with live http mirror.
@
text
@# $OpenBSD: Makefile,v 1.24 2015/04/10 14:43:49 naddy Exp $

COMMENT=	mailing list manager

V=		1.94.5
DISTNAME=	majordomo-$V
REVISION =	6
CATEGORIES=     mail

HOMEPAGE=	http://www.greatcircle.com/majordomo/

# I sent a mail to greatcircle.com asking for these permissions.
# Until I get an answer, I assume nothing. 
# Read http://www.greatcircle.com/majordomo/LICENSE
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_FTP=	No
WANTLIB=		c

MASTER_SITES=	http://www.greatcircle.com/majordomo/$V/ \
		ftp://ftp.sgi.com/other/majordomo/$V/
EXTRACT_SUFX=	.tgz

ALL_TARGET=	wrapper
MAKE_FLAGS+=	W_HOME=${PREFIX}/lib/majordomo \
		W_PATH=/bin:/usr/bin \
		W_MAJORDOMO_CFDIR=${SYSCONFDIR}/majordomo \
		W_MAJORDOMO_CF=majordomo.cf \
		POSIX=""

NO_TEST=	Yes

FAKE_TARGET=	install-scripts install-wrapper install-man
FAKE_FLAGS+=	W_HOME=${WRKINST}${PREFIX}/lib/majordomo \
		MAN=${WRKINST}${PREFIX}/man \
		PERL=/usr/bin/perl \
		W_USER=0 W_GROUP=0 \
		HOME_MODE=755 EXEC_MODE=755 FILE_MODE=644 \
		WRAPPER_OWNER=0 WRAPPER_GROUP=0 WRAPPER_MODE=644 \
		TMPDIR=${WRKDIST}

DOCDIR=${PREFIX}/share/doc/majordomo

post-install:
	@@${INSTALL_DATA} ${WRKSRC}/sample.cf ${PREFIX}/lib/majordomo
	@@${INSTALL_DATA_DIR} ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Changelog ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/FUTURE ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/INSTALL ${DOCDIR}	
	@@${INSTALL_DATA} ${WRKSRC}/LICENSE ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/NEWLIST ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/README ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/FAQ ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/README.sequencer	${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/list-owner-info ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/majordomo-faq.html ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/majordomo.lisa6.ps ${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/majordomo.ora ${DOCDIR}
	@@${INSTALL_DATA} ${FILESDIR}/post-install-notes	${DOCDIR}
	@@perl -pi -e "s,%%SYSCONFDIR%%,${SYSCONFDIR}," \
		${DOCDIR}/post-install-notes

.include <bsd.port.mk>
@


1.24
log
@Drop USE_GROFF: no or minor differences only.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/03/11 11:23:51 espie Exp $
d5 2
a6 1
DISTNAME=	majordomo-1.94.5
d20 2
a21 2
MASTER_SITES=	ftp://ftp.sgi.com/other/majordomo/1.94.5/ \
		ftp://ftp.greatcircle.com/pub/majordomo/1.94.5/
@


1.23
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/01/26 08:03:57 ajacoutot Exp $
a28 1
USE_GROFF =	Yes
@


1.22
log
@Put these users in the daemon class to be consistent with all the other
ones in ports.

discussed with and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/05/11 12:57:48 jasper Exp $
a15 1
PERMIT_DISTFILES_CDROM=	No
d31 1
a31 1
NO_REGRESS=	Yes
@


1.21
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/02/02 20:15:48 landry Exp $
d6 1
a6 1
REVISION =	5
@


1.20
log
@Grab patch from pkgsrc PR43974 to make majordomo work with perl 5.12.
(split doesn't return @@_ anymore)
Reported by Witek Handzlik on ports@@
While here, remove dhartmei@@ from MAINTAINER.
ok sthen@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/19 07:23:07 espie Exp $
d6 1
a6 1
REVISION =	4
@


1.19
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/18 21:50:39 sthen Exp $
d6 1
a6 1
REVISION =	3
a9 2

MAINTAINER=	Daniel Hartmeier <dhartmei@@openbsd.org>
@


1.18
log
@fix tabs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 19:59:16 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/01/12 19:15:37 okan Exp $
d32 1
a32 1
		USE_GROFF =	Yes
@


1.16
log
@proper proto fix for malloc() from mickey (and a pkg bump)

ok merdely
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/09/16 00:17:05 merdely Exp $
d32 1
@


1.15
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/01/02 12:56:05 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.14
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2003/06/22 10:06:45 sturm Exp $
d3 1
a3 1
COMMENT=	"mailing list manager"
@


1.13
log
@new user/group naming schema

dhartmei@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2003/04/26 14:55:32 sturm Exp $
d20 1
@


1.12
log
@don't hardcode /etc but use SYSCONFDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/02/06 20:47:48 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.11
log
@bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/10/27 17:21:39 naddy Exp $
d28 1
a28 1
		W_MAJORDOMO_CFDIR=/etc/majordomo \
d61 2
@


1.10
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/04/25 07:41:07 dhartmei Exp $
d6 1
@


1.9
log
@Distfile renamed (checksums identical), additional master site.
From naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/03/21 21:09:17 espie Exp $
a6 1
NEED_VERSION=	1.515
d30 2
@


1.9.2.1
log
@MFC:
Change default configuration options

  which_access open -> closed
  who_access open -> closed
  max_which_hits 0 -> 1

Those would allow a spammer to harvest all subscriber addresses
if not changed by the list admin. Reported on

http://online.securityfocus.com/archive/1/310113/2003-02-03/2003-02-09/0

Don't restrict the which arguments as the article suggests, though,
because with which_access list and max_which_hits 1, there's no
reason to destroy a useful command.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/02/06 20:47:48 brad Exp $
a5 1
PKGNAME=	${DISTNAME}p1
d7 1
a30 2

NO_REGRESS=	Yes
@


1.8
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/08/31 13:45:34 dhartmei Exp $
a7 1
MASTER_SITES=	ftp://ftp.greatcircle.com/pub/majordomo/1.94.5/
d11 1
a11 1
MAINTAINER=	Daniel Hartmeier <daniel@@benzedrine.cx>
d20 4
@


1.8.2.1
log
@MFC:
Change default configuration options

  which_access open -> closed
  who_access open -> closed
  max_which_hits 0 -> 1

Those would allow a spammer to harvest all subscriber addresses
if not changed by the list admin. Reported on

http://online.securityfocus.com/archive/1/310113/2003-02-03/2003-02-09/0

Don't restrict the which arguments as the article suggests, though,
because with which_access list and max_which_hits 1, there's no
reason to destroy a useful command.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/02/06 20:47:48 brad Exp $
d6 2
a7 2
PKGNAME=	${DISTNAME}p1
CATEGORIES=	mail
a27 2

NO_REGRESS=	Yes
@


1.7
log
@Email address change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/05/06 01:46:20 lebel Exp $
d7 1
a7 1
NEED_VERSION=	1.402
@


1.6
log
@mail: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/01/21 23:34:58 danh Exp $
d12 1
a12 1
MAINTAINER=	Daniel Hartmeier <daniel@@reichardt.ch>
@


1.5
log
@- updates from maintainer, Daniel Hartmeier <daniel@@reichardt.ch>.
- style changes to match other ports.
- shorten line length in DESCR.
- remove Majordomo reference from COMMENT.
- sort PLIST.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.4 2000/10/22 17:05:04 espie Exp $
d7 1
a7 1
NEED_VERSION=	1.351
@


1.4
log
@Hunting through the ports ml to find full names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/10/22 15:42:32 espie Exp $
d3 4
a6 3
DISTNAME=		majordomo-1.94.5
CATEGORIES=     	mail
NEED_VERSION=		1.282
d8 1
a8 1
HOMEPAGE=		http://www.greatcircle.com/majordomo/
d10 1
a10 1
MAINTAINER=		Daniel Hartmeier <daniel@@reichardt.ch>
d20 15
a34 1
MASTER_SITES=		ftp://ftp.greatcircle.com/pub/majordomo/1.94.5/
d36 1
a36 20
MAKE_FLAGS=		W_HOME=${PREFIX}/lib/majordomo
MAKE_FLAGS+=		W_PATH=/bin:/usr/bin
MAKE_FLAGS+=		W_MAJORDOMO_CFDIR=/etc/majordomo
MAKE_FLAGS+=		W_MAJORDOMO_CF=majordomo.cf
MAKE_FLAGS+=		POSIX=""
ALL_TARGET=		wrapper

FAKE_FLAGS=		W_HOME=${WRKINST}${PREFIX}/lib/majordomo
FAKE_FLAGS+=		MAN=${WRKINST}${PREFIX}/man
FAKE_FLAGS+=		PERL=/usr/bin/perl
FAKE_FLAGS+=		W_USER=0
FAKE_FLAGS+=		W_GROUP=0
FAKE_FLAGS+=		HOME_MODE=755
FAKE_FLAGS+=		EXEC_MODE=755
FAKE_FLAGS+=		FILE_MODE=644
FAKE_FLAGS+=		WRAPPER_OWNER=0
FAKE_FLAGS+=		WRAPPER_GROUP=0
FAKE_FLAGS+=		WRAPPER_MODE=644
FAKE_FLAGS+=		TMPDIR=${WRKDIST}
FAKE_TARGET=		install-scripts install-wrapper install-man
a37 1
DOCDIR=${PREFIX}/share/doc/majordomo
d39 15
a53 15
	@@${INSTALL_DATA} ${WRKSRC}/sample.cf			${PREFIX}/lib/majordomo
	@@${INSTALL_DATA_DIR}					${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Changelog			${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/FUTURE			${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/INSTALL			${DOCDIR}	
	@@${INSTALL_DATA} ${WRKSRC}/LICENSE			${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/NEWLIST			${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/README			${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/FAQ			${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/README.sequencer		${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/list-owner-info		${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/majordomo-faq.html	${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/majordomo.lisa6.ps	${DOCDIR}
	@@${INSTALL_DATA} ${WRKSRC}/Doc/majordomo.ora		${DOCDIR}
	@@${INSTALL_DATA} ${FILESDIR}/post-install-notes		${DOCDIR}
@


1.3
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/05/23 20:17:03 fgsch Exp $
d9 1
a9 1
MAINTAINER=		daniel@@reichardt.ch
@


1.2
log
@change the configuration file to /etc/majordomo/majordomo.cf and fix
several security problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/05/22 16:33:43 espie Exp $
a27 1
FAKE=			Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.0 2000/05/22 17:30:00 dhartmei Exp $
d23 2
a24 1
MAKE_FLAGS+=		W_MAJORDOMO_CF=/etc/mail/majordomo.cf
@


1.1.1.1
log
@Majordomo port, by Daniel Hartmeier.
@
text
@@
