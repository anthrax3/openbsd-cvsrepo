head	1.7;
access;
symbols
	OPENBSD_2_7:1.6.0.2
	OPENBSD_2_7_BASE:1.6
	OPENBSD_2_6:1.5.0.4
	OPENBSD_2_6_BASE:1.5
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2
	joey_1_1:1.1.1.1
	joey_1:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2000.09.15.10.06.36;	author brad;	state dead;
branches;
next	1.6;

1.6
date	99.10.27.12.18.59;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.03.30.18.26.31;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	99.01.20.05.10.56;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.08.03.04.11.52;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.01.21.22.43.21;	author tacho;	state Exp;
branches;
next	1.1;

1.1
date	97.11.15.00.04.33;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.15.00.04.33;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.7
log
@use better filenames for patches
@
text
@--- pine/mailcap.c.orig	Fri Oct 22 19:36:41 1999
+++ pine/mailcap.c	Fri Oct 22 19:42:53 1999
@@@@ -915,14 +915,18 @@@@
 		     * have to put those outside of the single quotes.
 		     * (The parm+1000 nonsense is to protect against
 		     * malicious mail trying to overlow our buffer.)
+		     *
+		     * TCH - Change 2/8/1999
+		     * Also quote the ` slash to prevent execution of arbirtrary code
 		     */
 		    for(p = parm; *p && p < parm+1000; p++){
-			if(*p == '\''){
+			if((*p == '\'')||(*p=='`')){
 			    *to++ = '\'';  /* closing quote */
 			    *to++ = '\\';
-			    *to++ = '\'';  /* below will be opening quote */
-			}
-			*to++ = *p;
+			    *to++ = *p;  /* quoted character */
+			    *to++ = '\'';  /* opening quote */
+			} else
+			    *to++ = *p;
 		    }
 
 		    fs_give((void **) &parm);
@


1.6
log
@upgrade to Pine 4.20
@
text
@@


1.5
log
@update to 4.10
@
text
@d1 3
a3 3
--- pine/mailcap.c.orig	Wed Nov 18 13:00:15 1998
+++ pine/mailcap.c	Mon Feb  8 09:17:46 1999
@@@@ -905,14 +905,18 @@@@
d7 3
a9 3
+				 *
+				 * TCH - Change 2/8/1999
+				 * Also quote the ` slash to prevent execution of arbirtrary code
d13 1
a13 1
+			if((*p == '\'')||(*p=='`')){ 
d19 1
a19 1
+					*to++ = *p; /* quoted character */
d22 1
a22 1
+				*to++ = *p;
a25 8
@@@@ -954,7 +958,7 @@@@
      */
     if(!used_tmp_file && tmp_file)
       sprintf(to, MC_ADD_TMP, tmp_file);
-
+		
     return(cpystr(tmp_20k_buf));
 } 
@


1.4
log
@update to 4.05
@
text
@d1 23
a23 5
--- doc/pine-ports.orig	Fri Sep 11 11:18:29 1998
+++ doc/pine-ports	Tue Jan 19 19:51:09 1999
@@@@ -81,6 +81,9 @@@@
     NeXT
 	nxt	NeXT 68030's and 68040's Mach 2.0
d25 9
a33 6
+    OpenBSD
+	bso	OpenBSD with shared-lib
+
     SCO
 	sc5	SCO Open Server 5.x
 	sco	SCO Unix
@


1.3
log
@update to pine/pico/pilot 4.02; imapd NOT compiled or installed
@
text
@d1 3
a3 4
diff -ur doc/pine-ports
--- doc/pine-ports	Thu Jul 16 11:18:17 1998
+++ doc/pine-ports	Sat Aug  1 21:54:10 1998
@@@@ -80,6 +80,9 @@@@
@


1.2
log
@no more shared libpico... not really needed... only static
@
text
@d1 13
a13 93
*** pico/makefile.bsf.orig	Fri Jun 14 00:15:20 1996
--- pico/makefile.bsf	Fri Jun 14 00:15:20 1996
***************
*** 0 ****
--- 1,88 ----
+ #
+ #   Michael Seibel
+ #   Networks and Distributed Computing
+ #   Computing and Communications
+ #   University of Washington
+ #   Administration Builiding, AG-44
+ #   Seattle, Washington, 98195, USA
+ #   Internet: mikes@@cac.washington.edu
+ #
+ #   Please address all bugs and comments to "pine-bugs@@cac.washington.edu"
+ #
+ #
+ #   Pine and Pico are registered trademarks of the University of Washington.
+ #   No commercial use of these trademarks may be made without prior written
+ #   permission of the University of Washington.
+ #
+ #   Pine, Pico, and Pilot software and its included text are Copyright
+ #   1989-1996 by the University of Washington.
+ #
+ #   The full text of our legal notices is contained in the file called
+ #   CPYRIGHT, included with this distribution.
+ #
+ 
+ #
+ # Makefile for the FreeBSD shared-lib version of the PINE composer library and 
+ # stand-alone editor pico.
+ #
+ 
+ #includes symbol info for debugging 
+ DASHO=		# -g
+ #for normal build
+ #DASHO=		-O
+ 
+ STDCFLAGS=	-DBSDI -DBSDI2 -DPOSIX -DJOB_CONTROL -DANSI -DMOUSE
+ CFLAGS+=		$(EXTRACFLAGS) $(DASHO) $(STDCFLAGS)
+ 
+ # switches for library building
+ LIBCMD=		ar
+ LIBARGS=	ru
+ RANLIB=		ranlib
+ 
+ LIBS=		$(EXTRALIBES) -ltermcap
+ 
+ OFILES=		attach.o ansi.o basic.o bind.o browse.o buffer.o \
+ 		composer.o display.o file.o fileio.o line.o osdep.o \
+ 		pico.o random.o region.o search.o spell.o tcap.o window.o word.o
+ 
+ # Lets be elite and not retype in the above
+ SOFILES=	${OFILES:.o=.so}
+ 
+ CFILES=		attach.c ansi.c basic.c bind.c browse.c buffer.c \
+ 		composer.c display.c file.c fileio.c line.c osdep.c \
+ 		pico.c random.c region.c search.c spell.c tcap.c window.c word.c
+ 
+ HFILES=		estruct.h edef.h efunc.h ebind.h pico.h osdep.h
+ 
+ 
+ #
+ # dependencies for the Unix versions of pico and libpico.a
+ #
+ all:		pico pilot
+ 
+ osdep.c:	os_unix.c
+ 		rm -f osdep.c
+ 		cp os_unix.c osdep.c
+ 
+ osdep.h:	os_unix.h
+ 		rm -f osdep.h
+ 		cp os_unix.h osdep.h
+ 
+ libpico.a:	osdep.c osdep.h $(OFILES)
+ 		$(LIBCMD) $(LIBARGS) libpico.a $(OFILES)
+ 		$(RANLIB) libpico.a
+ 
+ pico:		main.c libpico.a
+ 		$(CC) $(CFLAGS) main.c -L. -lpico $(LIBS) -o pico
+ 
+ pilot:		pilot.c libpico.a
+ 		$(CC) $(CFLAGS) pilot.c -L. -lpico $(LIBS) -o pilot
+ 
+ .c.o:		; $(CC) -c $(CFLAGS) $*.c
+ 
+ $(OFILES):	$(HFILES)
+ 
+ $(SOFILES):	$(HFILES)
+ 
+ clean:
+ 		rm -f *.a *.so.1.3 *.o *~ osdep.c osdep.h pico pilot
@


1.1
log
@Initial revision
@
text
@d5 1
a5 1
--- 1,95 ----
a61 2
+ # Need this for the shared library rule to work correctly
+ .SUFFIXES: .o .so
d80 1
a80 4
+ libpico.so.1.3:	osdep.c osdep.h $(SOFILES)
+ 		ld -Bshareable -x -o libpico.so.1.3 $(SOFILES)
+ 
+ pico:		main.c libpico.so.1.3
d83 1
a83 1
+ pilot:		pilot.c libpico.so.1.3
a85 2
+ .c.so:		; $(CC) -fpic -DPIC -c $(CFLAGS) ${@@:.so=.c} -o $@@
+ 
d93 1
a93 1
+ 		rm -f *.a *.so.1.3 *.o *.so *~ osdep.c osdep.h pico pilot
@


1.1.1.1
log
@initial ports subsystem from joey
@
text
@@
