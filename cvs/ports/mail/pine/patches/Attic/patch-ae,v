head	1.6;
access;
symbols
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	joey_1_1:1.1.1.1
	joey_1:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2000.09.15.10.06.37;	author brad;	state dead;
branches;
next	1.5;

1.5
date	99.12.01.03.20.04;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.10.27.12.19.00;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.03.30.18.26.31;	author jakob;	state dead;
branches;
next	1.2;

1.2
date	98.08.03.04.11.57;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.11.15.00.04.33;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.15.00.04.33;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.6
log
@use better filenames for patches
@
text
@--- imap/src/osdep/unix/env_unix.c.orig	Mon Nov  1 16:08:55 1999
+++ imap/src/osdep/unix/env_unix.c	Thu Nov 18 14:45:32 1999
@@@@ -839,7 +839,8 @@@@
 	    }
 	    close (pi[0]); close (pi[1]);
 	  }
-	  if (lockEaccesError) {/* punt silently if paranoid site */
+	  if (strncmp(base->lock,"/var/mail/",10) && lockEaccesError) {
+	  /* punt silently if paranoid site */
 	    sprintf (tmp,"Mailbox vulnerable - directory %.80s",hitch);
 	    if (s = strrchr (tmp,'/')) *s = '\0';
 	    strcat (tmp," must have 1777 protection");
@


1.5
log
@upgrade to Pine 4.21, fixes a security bug as posted on BugTraq
@
text
@@


1.4
log
@upgrade to Pine 4.20
@
text
@d1 3
a3 3
--- imap/src/osdep/unix/env_unix.c.orig	Sat Oct 23 01:12:43 1999
+++ imap/src/osdep/unix/env_unix.c	Sat Oct 23 01:14:55 1999
@@@@ -825,7 +825,8 @@@@
@


1.3
log
@update to 4.10
@
text
@d1 12
a12 92
diff -urN pico/makefile.bso pico/makefile.bso
--- pico/makefile.bso	Wed Dec 31 16:00:00 1969
+++ pico/makefile.bso	Sat Aug  1 21:57:52 1998
@@@@ -0,0 +1,88 @@@@
+# $Id: patch-ae,v 1.2 1998/08/03 04:11:57 marc Exp $
+#
+#   Pine and Pico are registered trademarks of the University of Washington.
+#   No commercial use of these trademarks may be made without prior written
+#   permission of the University of Washington.
+#
+#   Pine, Pico, and Pilot software and its included text are Copyright
+#   1989-1998 by the University of Washington.
+#
+#   The full text of our legal notices is contained in the file called
+#   CPYRIGHT, included with this distribution.
+#
+
+#
+# Makefile for OpenBSD shared-lib version of the PINE composer library and 
+# stand-alone editor pico.  Copied from Makefile.bsf and modified
+
+RM=          rm -f
+LN=          ln -s
+MAKE=        make
+OPTIMIZE=    # -O
+PROFILE=     # -pg
+DEBUG=       -DDEBUG # -g
+
+STDCFLAGS=	-DBSDI -DBSDI2 -DPOSIX -DJOB_CONTROL -DMOUSE
+CFLAGS+=        $(OPTIMIZE) $(PROFILE) $(DEBUG) $(EXTRACFLAGS) $(STDCFLAGS)
+
+# switches for library building
+LIBCMD=		ar
+LIBARGS=	ru
+RANLIB=		ranlib
+
+LIBS=		$(EXTRALIBES) -ltermcap
+
+OFILES=		attach.o basic.o bind.o browse.o buffer.o \
+		composer.o display.o file.o fileio.o line.o pico_os.o \
+		pico.o random.o region.o search.o \
+		window.o word.o
+
+SOFILES=	${OFILES:.o=.so}
+
+HFILES=		headers.h estruct.h edef.h efunc.h pico.h os.h
+
+# Need this for the shared library rule to work correctly
+.SUFFIXES: .o .so
+
+#
+# dependencies for the Unix versions of pico and libpico.a
+#
+all:		pico pilot
+pico pilot:	libpico.a
+
+pico:		main.o
+		$(CC) $(CFLAGS) main.o -L. -lpico $(LIBS) -o pico
+
+pilot:		pilot.o
+		$(CC) $(CFLAGS) pilot.o -L. -lpico $(LIBS) -o pilot
+
+.c.so:		; $(CC) -fpic -DPIC -c $(CFLAGS) ${@@:.so=.c} -o $@@
+
+.c.o:		; $(CC) -c $(CFLAGS) $*.c
+
+libpico.a:	$(OFILES)
+		$(LIBCMD) $(LIBARGS) libpico.a $(OFILES)
+		$(RANLIB) libpico.a
+
+libpico.so.1.3:	$(SOFILES)
+		ld -Bshareable -x -o libpico.so.1.3 $(SOFILES)
+
+clean:
+		rm -f *.a *.so.1.3 *.o *.so *~ pico_os.c os.h pico pilot
+		cd osdep; $(MAKE) clean; cd ..
+
+os.h:		osdep/os-bso.h
+		$(RM) os.h
+		$(LN) osdep/os-bso.h os.h
+
+pico_os.c:	osdep/os-bso.c
+		$(RM) pico_os.c
+		$(LN) osdep/os-bso.c pico_os.c
+
+$(SOFILES) $(OFILES) main.o pilot.o:	$(HFILES)
+pico.o:				ebind.h
+
+osdep/os-bso.c:	osdep/header osdep/unix osdep/read.sel osdep/raw.ios \
+		osdep/spell.unx osdep/term.cap \
+		osdep/os-bso.ic
+		cd osdep; $(MAKE) includer os-bso.c; cd ..
@


1.2
log
@update to pine/pico/pilot 4.02; imapd NOT compiled or installed
@
text
@d5 1
a5 1
+# $Id: makefile.bso,v 1.3 1998/06/29 22:22:40 hubert Exp $
@


1.1
log
@Initial revision
@
text
@d1 92
a92 149
*** pine/makefile.bsf.orig	Fri Jun 14 00:15:35 1996
--- pine/makefile.bsf	Fri Jun 14 00:15:35 1996
***************
*** 0 ****
--- 1,144 ----
+ #
+ #            T H E    P I N E    M A I L   S Y S T E M
+ #
+ #   Laurence Lundblade and Mike Seibel
+ #   Networks and Distributed Computing
+ #   Computing and Communications
+ #   University of Washington
+ #   Administration Building, AG-44
+ #   Seattle, Washington, 98195, USA
+ #   Internet: lgl@@CAC.Washington.EDU
+ #             mikes@@CAC.Washington.EDU
+ #
+ #   Please address all bugs and comments to "pine-bugs@@cac.washington.edu"
+ #
+ #
+ #   Pine and Pico are registered trademarks of the University of Washington.
+ #   No commercial use of these trademarks may be made without prior written
+ #   permission of the University of Washington.
+ #
+ #   Pine, Pico, and Pilot software and its included text are Copyright
+ #   1989-1996 by the University of Washington.
+ #
+ #   The full text of our legal notices is contained in the file called
+ #   CPYRIGHT, included with this distribution.
+ #
+ #
+ #   Pine is in part based on The Elm Mail System:
+ #    ***********************************************************************
+ #    *  The Elm Mail System  -  Revision: 2.13                             *
+ #    *                                                                     *
+ #    * 			Copyright (c) 1986, 1987 Dave Taylor               *
+ #    * 			Copyright (c) 1988, 1989 USENET Community Trust    *
+ #    ***********************************************************************
+ #
+ #
+ 
+ 
+ #
+ #     Make file for the Pine mail system for FreeBSD
+ #
+ #
+ #   Most commonly fiddled flags for compiler.
+ #   Uncomment the setttings desired here
+ #
+ RM=          rm -f
+ LN=          ln -s
+ MAKE=        make
+ #OPTIMIZE=    -O
+ PROFILE=     # -pg
+ DEBUG=       -DDEBUG #-g
+ 
+ IMAPDIR=     ../c-client
+ PICODIR=     ../pico
+ 
+ STDLIBES=    -ltermlib
+ #LOCLIBES=   $(PICODIR)/libpico.a $(IMAPDIR)/c-client.a
+ LOCLIBES=    -lpico $(IMAPDIR)/c-client.a
+ LOCLIBDIR=   -L$(PICODIR)
+ LIBES=       $(EXTRALIBES) $(LOCLIBDIR) $(LOCLIBES) $(STDLIBES)
+ 
+ STDCFLAGS=   -DBSDI -DSYSTYPE=\"BSF\" -DMOUSE
+ CFLAGS+=     $(OPTIMIZE) $(PROFILE) $(DEBUG) $(EXTRACFLAGS) $(STDCFLAGS)
+ 
+ obj=    addrbook.o adrbklib.o args.o context.o filter.o \
+ 	folder.o help.o helptext.o imap.o init.o mailcap.o mailcmd.o \
+ 	mailindx.o mailpart.o mailview.o newmail.o other.o pine.o \
+ 	reply.o screen.o send.o signals.o status.o strings.o ttyin.o \
+ 	ttyout.o os.o
+ 
+ cfiles= addrbook.c adrbklib.c args.c context.c filter.c \
+ 	folder.c help.c helptext.c imap.c init.c mailcap.c mailcmd.c \
+ 	mailindx.c mailpart.c mailview.c newmail.c other.c pine.c \
+ 	reply.c screen.c send.c signals.c status.c strings.c ttyin.c \
+ 	ttyout.c os.c
+ 
+ pine:  $(obj) $(LOCLIBES)
+ 	echo "char datestamp[]="\"`LC_TIME=C date`\"";" > date.c
+ 	echo "char hoststamp[]="\"`hostname`\"";" >> date.c
+ 	$(CC) $(LDFLAGS) $(CFLAGS) -o pine $(obj) date.c $(LIBES)
+ 
+ # this is not part of pine
+ pine-use:	pine-use.c
+ 	$(CC) -o pine-use pine-use.c
+ 
+ clean:
+ 	$(RM) *.o os.h os.c helptext.c helptext.h
+ 	cd osdep; make clean; cd ..
+ 
+ 
+ HEADERS= headers.h pine.h os.h helptext.h context.h \
+ 	  $(IMAPDIR)/mail.h $(IMAPDIR)/osdep.h
+ 
+ addrbook.o:	addrbook.c  $(HEADERS) adrbklib.h $(PICODIR)/pico.h
+ adrbklib.o: 	adrbklib.c  $(HEADERS) adrbklib.h
+ args.o:		args.c      $(HEADERS)
+ context.o:	context.c   $(HEADERS) $(IMAPDIR)/misc.h
+ filter.o:	filter.c    $(HEADERS) $(PICODIR)/pico.h
+ folder.o:	folder.c    $(HEADERS)
+ help.o:		help.c      $(HEADERS)
+ helptext.o:	helptext.c
+ imap.o:	        imap.c      $(HEADERS)
+ init.o:		init.c      $(HEADERS)
+ mailcap.o:	mailcap.c   $(HEADERS)
+ mailcmd.o:	mailcmd.c   $(HEADERS) $(PICODIR)/pico.h
+ mailindx.o:	mailindx.c  $(HEADERS)
+ mailpart.o:	mailpart.c  $(HEADERS)
+ mailview.o:	mailview.c  $(HEADERS)
+ newmail.o:	newmail.c   $(HEADERS)
+ os.o:		os.c 	    $(HEADERS)
+ other.o:	other.c     $(HEADERS) $(PICODIR)/pico.h
+ pine.o:		pine.c      $(HEADERS)
+ reply.o:	reply.c     $(HEADERS)
+ screen.o:	screen.c    $(HEADERS)
+ send.o:	        send.c      $(HEADERS) $(IMAPDIR)/smtp.h $(PICODIR)/pico.h
+ signals.o:	signals.c   $(HEADERS)
+ status.o:	status.c    $(HEADERS)
+ strings.o:	strings.c   $(HEADERS)
+ ttyin.o:	ttyin.c     $(HEADERS)
+ ttyout.o:	ttyout.c    $(HEADERS)
+ 
+ os.h:	osdep/os-bsf.h
+ 	$(RM) os.h
+ 	$(LN) osdep/os-bsf.h os.h
+ 
+ helptext.c:	pine.hlp
+ 		./cmplhelp.sh  < pine.hlp > helptext.c
+ 
+ helptext.h:	pine.hlp
+ 		./cmplhlp2.sh  < pine.hlp > helptext.h
+ 
+ os.c:	osdep/os-bsf.c
+ 	$(RM) os.c
+ 	$(LN) osdep/os-bsf.c os.c
+ 
+ osdep/os-bsf.c:	osdep/bld_path osdep/canacces osdep/canonicl \
+ 		osdep/chnge_pw osdep/coredump osdep/creatdir \
+ 		osdep/diskquot.non osdep/domnames osdep/err_desc.dos \
+ 		osdep/expnfldr osdep/fgetpos osdep/filesize osdep/fltrname \
+ 		osdep/fnexpand osdep/header osdep/hostname \
+ 		osdep/jobcntrl osdep/lstcmpnt osdep/mimedisp osdep/pipe \
+ 		osdep/print osdep/pw_stuff osdep/readfile osdep/debuging \
+ 		osdep/rename osdep/tempfile osdep/tempnam osdep/writ_dir \
+ 		osdep/sendmail osdep/execview osdep/os-bsf.ic
+ 	cd osdep; $(MAKE) includer os-bsf.c; cd ..
@


1.1.1.1
log
@initial ports subsystem from joey
@
text
@@
