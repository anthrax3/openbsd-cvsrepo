head	1.3;
access;
symbols
	OPENBSD_4_2:1.2.0.18
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.16
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.14
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.12
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.10
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.8
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2007.11.22.13.52.17;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2003.05.27.23.38.33;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2002.12.01.20.57.10;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- remove pine; it has been replaced by alpine
@
text
@$OpenBSD: patch-pico_osdep_spell_unx,v 1.2 2003/05/27 23:38:33 brad Exp $
--- pico/osdep/spell.unx.orig	Thu Dec 12 17:18:52 2002
+++ pico/osdep/spell.unx	Tue May 27 10:30:15 2003
@@@@ -84,6 +84,14 @@@@ spell(f, n)
     setimark(0, 1);
     emlwrite("Checking spelling...", NULL); 	/* greetings */
 
+    if((sp = (char *)getenv("SPELL")) == NULL)
+      sp = SPELLER;
+
+    /* This code only works with "spell", which doesn't exist, and
+       alt_speller is only set via command line -s argument. */
+    if (strstr(sp, "ispell") != NULL)
+      alt_speller = sp;
+
     if(alt_speller)
       return(alt_editor(1, 0));			/* f == 1 means fork speller */
 
@@@@ -91,9 +99,6 @@@@ spell(f, n)
 	emlwrite("Can't write temp file for spell checker", NULL);
 	return(-1);
     }
-
-    if((sp = (char *)getenv("SPELL")) == NULL)
-      sp = SPELLER;
 
     if(fexist(sp, "x", (off_t *)NULL) != FIOSUC){
         emlwrite("\007Spell-checking file \"%s\" not found", sp);
@


1.2
log
@sync with update-patches
@
text
@d1 1
a1 1
$OpenBSD: patch-pico_osdep_spell_unx,v 1.1 2002/12/01 20:57:10 jakob Exp $
@


1.1
log
@- update to pine v4.50
- split out pilot into separate package
- remove combined pine+pico package
- clean up patches
- remote c-client dependency, link statically
@
text
@d1 3
a3 3
$OpenBSD$
--- pico/osdep/spell.unx.orig	Wed Apr  3 22:10:57 2002
+++ pico/osdep/spell.unx	Sun Dec  1 15:17:46 2002
d27 2
a28 2
     sprintf(cb, "( %s ) < %s", sp, fn);		/* pre-use buffer! */
     if((p = P_open(cb)) == NULL){ 		/* read output from command */
@

