head	1.3;
access;
symbols
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2;
locks; strict;
comment	@# @;


1.3
date	2012.03.29.06.56.25;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2011.12.29.09.26.11;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.10.01.10.44.35;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to evolution-3.4.0.1.
@
text
@$OpenBSD: patch-calendar_gui_alarm-notify_alarm_c,v 1.2 2011/12/29 09:26:11 ajacoutot Exp $

On OpenBSD, time_t is an int.

--- calendar/gui/alarm-notify/alarm.c.orig	Thu Oct 20 12:38:02 2011
+++ calendar/gui/alarm-notify/alarm.c	Thu Dec 29 09:36:25 2011
@@@@ -101,7 +101,7 @@@@ alarm_ready_cb (gpointer data)
 		if (ar->trigger > now)
 			break;
 
-		debug (("Process alarm with trigger %lu", ar->trigger));
+		debug (("Process alarm with trigger %d", ar->trigger));
 		notify_id = ar;
 
 		ar_copy = *ar;
@@@@ -156,7 +156,7 @@@@ setup_timeout (void)
 	now = time (NULL);
 
 	/* Add the time out */
-	debug (("Setting timeout for %d.%2d (from now) %lu %lu",
+	debug (("Setting timeout for %d.%2d (from now) %d %d",
 		     diff / 60, diff % 60, ar->trigger, now));
 	debug ((" %s", ctime (&ar->trigger)));
 	debug ((" %s", ctime (&now)));
@


1.2
log
@Tweak patches to please our time_t
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_gui_alarm-notify_alarm_c,v 1.1 2011/10/01 10:44:35 ajacoutot Exp $
@


1.1
log
@Fix a warning.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 3
alarm.c:104: warning: format '%lu' expects type 'long unsigned int', but argument 2 has type 'time_t'
alarm.c:159: warning: format '%lu' expects type 'long unsigned int', but argument 4 has type 'time_t'
alarm.c:159: warning: format '%lu' expects type 'long unsigned int', but argument 5 has type 'time_t'
d5 2
a6 2
--- calendar/gui/alarm-notify/alarm.c.orig	Sat Oct  1 11:39:41 2011
+++ calendar/gui/alarm-notify/alarm.c	Sat Oct  1 11:42:31 2011
d12 1
a12 1
+		debug (("Process alarm with trigger %lu", (long unsigned int)ar->trigger));
d16 2
a17 1
@@@@ -157,7 +157,7 @@@@ setup_timeout (void)
d20 3
a22 3
 	debug (("Setting timeout for %d.%2d (from now) %lu %lu",
-		     diff / 60, diff % 60, ar->trigger, now));
+		     diff / 60, diff % 60, (long unsigned int)ar->trigger, (long unsigned int)now));
a24 1
 	timeout_id = g_timeout_add_seconds (diff, alarm_ready_cb, NULL);
@

