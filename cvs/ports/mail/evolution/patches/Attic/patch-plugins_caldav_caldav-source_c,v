head	1.3;
access;
symbols
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2010.04.22.16.30.02;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2009.10.13.22.07.04;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2009.08.20.07.52.01;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- major update evolution to 2.30.0.1
@
text
@$OpenBSD: patch-plugins_caldav_caldav-source_c,v 1.2 2009/10/13 22:07:04 jasper Exp $

Allow '@@' in username in CalDav.
See http://bugzilla.gnome.org/show_bug.cgi?id=503662

--- plugins/caldav/caldav-source.c.orig	Tue Oct 13 15:22:20 2009
+++ plugins/caldav/caldav-source.c	Tue Oct 13 15:23:28 2009
@@@@ -215,6 +215,7 @@@@ user_changed (GtkEntry *editable, ESource *source)
 		e_source_set_property (source, "auth", "1");
 	} else {
 		e_source_set_property (source, "auth", NULL);
+		euri->user = NULL;
 	}
 
 	e_source_set_property (source, "username", user);
@


1.2
log
@- update evolution to 2.28.0
* among the many, many changes are the pst-importer plugin

if there is any fallout, it'll be fixed soon
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_caldav_caldav-source_c,v 1.1 2009/08/20 07:52:01 ajacoutot Exp $
@


1.1
log
@Allow '@@' in username in CalDav.
See http://bugzilla.gnome.org/show_bug.cgi?id=503662

Issue reported by Stephan A. Rickauer
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 9
--- plugins/caldav/caldav-source.c.orig	Mon Sep 22 12:56:08 2008
+++ plugins/caldav/caldav-source.c	Thu Aug 20 09:43:10 2009
@@@@ -175,11 +175,12 @@@@ user_changed (GtkEntry *editable, ESource *source)
 	euri = e_uri_new (uri);
 	g_free (euri->user);
 
-	if (user != NULL) {
+	if (user != NULL && *user) {
 		euri->user = g_strdup (user);
d15 1
a15 1
 	e_source_set_property (source, "username", euri->user);
@

