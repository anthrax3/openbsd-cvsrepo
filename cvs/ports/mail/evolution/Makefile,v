head	1.275;
access;
symbols
	OPENBSD_6_1:1.274.0.2
	OPENBSD_6_1_BASE:1.274
	OPENBSD_6_0:1.264.0.2
	OPENBSD_6_0_BASE:1.264
	OPENBSD_5_9:1.257.0.2
	OPENBSD_5_9_BASE:1.257
	OPENBSD_5_8:1.250.0.4
	OPENBSD_5_8_BASE:1.250
	OPENBSD_5_7:1.239.0.2
	OPENBSD_5_7_BASE:1.239
	OPENBSD_5_6:1.232.0.2
	OPENBSD_5_6_BASE:1.232
	OPENBSD_5_5:1.217.0.2
	OPENBSD_5_5_BASE:1.217
	OPENBSD_5_4:1.200.0.2
	OPENBSD_5_4_BASE:1.200
	OPENBSD_5_3:1.188.0.2
	OPENBSD_5_3_BASE:1.188
	OPENBSD_5_2:1.166.0.2
	OPENBSD_5_2_BASE:1.166
	OPENBSD_5_1_BASE:1.154
	OPENBSD_5_1:1.154.0.2
	OPENBSD_5_0:1.125.0.2
	OPENBSD_5_0_BASE:1.125
	OPENBSD_4_9:1.118.0.2
	OPENBSD_4_9_BASE:1.118
	OPENBSD_4_8:1.106.0.2
	OPENBSD_4_8_BASE:1.106
	OPENBSD_4_7:1.95.0.2
	OPENBSD_4_7_BASE:1.95
	OPENBSD_4_6:1.82.0.2
	OPENBSD_4_6_BASE:1.82
	OPENBSD_4_5:1.60.0.2
	OPENBSD_4_5_BASE:1.60
	OPENBSD_4_4:1.44.0.2
	OPENBSD_4_4_BASE:1.44
	OPENBSD_4_3:1.36.0.2
	OPENBSD_4_3_BASE:1.36
	OPENBSD_4_2:1.34.0.2
	OPENBSD_4_2_BASE:1.34
	OPENBSD_4_1:1.30.0.2
	OPENBSD_4_1_BASE:1.30
	OPENBSD_4_0:1.28.0.2
	OPENBSD_4_0_BASE:1.28
	OPENBSD_3_9:1.25.0.2
	OPENBSD_3_9_BASE:1.25
	OPENBSD_3_8:1.20.0.2
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.17.0.2
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.11.0.2
	OPENBSD_3_4_BASE:1.11
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.6.0.2
	OPENBSD_3_2_BASE:1.6
	nino_20020531:1.1.1.1
	nino:1.1.1;
locks; strict;
comment	@# @;


1.275
date	2017.04.17.14.37.40;	author ajacoutot;	state Exp;
branches;
next	1.274;
commitid	SKGYDb0T7zz4bqFJ;

1.274
date	2017.03.13.15.28.18;	author ajacoutot;	state Exp;
branches;
next	1.273;
commitid	VKW5peqkCi9JA9gN;

1.273
date	2017.02.13.16.50.00;	author ajacoutot;	state Exp;
branches;
next	1.272;
commitid	7ZqX2t6hOtok5rGf;

1.272
date	2017.01.16.14.34.03;	author ajacoutot;	state Exp;
branches;
next	1.271;
commitid	Xm0NtPjGkoZZOV70;

1.271
date	2016.12.13.10.15.15;	author ajacoutot;	state Exp;
branches;
next	1.270;
commitid	XyrordsaY46C2Q37;

1.270
date	2016.11.07.10.38.45;	author ajacoutot;	state Exp;
branches;
next	1.269;
commitid	uVr6Z2cpwOVLcTbl;

1.269
date	2016.10.31.14.04.58;	author ajacoutot;	state Exp;
branches;
next	1.268;
commitid	3ooBf3ReeOdHSswV;

1.268
date	2016.10.31.12.15.40;	author ajacoutot;	state Exp;
branches;
next	1.267;
commitid	RhHAufOqTv0sTXzR;

1.267
date	2016.10.09.15.08.47;	author ajacoutot;	state Exp;
branches;
next	1.266;
commitid	F1qo5RIitJSKxijm;

1.266
date	2016.08.09.12.43.02;	author ajacoutot;	state Exp;
branches;
next	1.265;
commitid	dZHPCsnLXvH0t2lK;

1.265
date	2016.08.08.12.17.04;	author ajacoutot;	state Exp;
branches;
next	1.264;
commitid	s2nA7ZkR9Qw97OGO;

1.264
date	2016.07.11.09.17.29;	author ajacoutot;	state Exp;
branches;
next	1.263;
commitid	S4Ggp7MuzMNq2x82;

1.263
date	2016.06.06.12.59.32;	author ajacoutot;	state Exp;
branches;
next	1.262;
commitid	gOm4SG3OWbHQ7qc1;

1.262
date	2016.05.10.06.48.57;	author ajacoutot;	state Exp;
branches;
next	1.261;
commitid	PpEEH2rWpQZvVzxo;

1.261
date	2016.04.26.07.15.42;	author ajacoutot;	state Exp;
branches;
next	1.260;
commitid	0jvq7cRerCpW6ODP;

1.260
date	2016.03.18.23.12.18;	author naddy;	state Exp;
branches;
next	1.259;
commitid	KZAl4KEiw6a3Jixw;

1.259
date	2016.03.15.09.47.48;	author ajacoutot;	state Exp;
branches;
next	1.258;
commitid	n5ZZP2PoFBSeCy2z;

1.258
date	2016.02.27.08.58.07;	author ajacoutot;	state Exp;
branches;
next	1.257;
commitid	04Hyi5vmEHnodmBd;

1.257
date	2016.01.18.18.09.23;	author ajacoutot;	state Exp;
branches;
next	1.256;
commitid	yfmVJeJDUG3nb1DJ;

1.256
date	2015.12.14.14.11.05;	author ajacoutot;	state Exp;
branches;
next	1.255;
commitid	01ZJVWJJoEgjMLRD;

1.255
date	2015.11.26.09.57.34;	author sthen;	state Exp;
branches;
next	1.254;
commitid	02tBV7rM2h8pX09y;

1.254
date	2015.11.09.10.01.30;	author ajacoutot;	state Exp;
branches;
next	1.253;
commitid	lTzwqRFGHhsU050m;

1.253
date	2015.10.13.18.13.06;	author ajacoutot;	state Exp;
branches;
next	1.252;
commitid	YI0yFQC3MlsieM65;

1.252
date	2015.10.12.05.46.27;	author ajacoutot;	state Exp;
branches;
next	1.251;
commitid	lCbx2lFdKmrRRZAO;

1.251
date	2015.08.12.06.17.29;	author ajacoutot;	state Exp;
branches;
next	1.250;
commitid	IR2TQqJNTHYgu2X4;

1.250
date	2015.07.13.07.02.36;	author ajacoutot;	state Exp;
branches;
next	1.249;
commitid	2QnjJrqxBbzmBzqt;

1.249
date	2015.06.08.09.07.15;	author ajacoutot;	state Exp;
branches;
next	1.248;
commitid	nDbvcH4xupScphLV;

1.248
date	2015.05.22.12.17.23;	author ajacoutot;	state Exp;
branches;
next	1.247;
commitid	jHZUkiFAInGbqPJq;

1.247
date	2015.05.15.16.54.42;	author ajacoutot;	state Exp;
branches;
next	1.246;
commitid	3BISaIvwhcoPUwF7;

1.246
date	2015.05.11.07.42.55;	author ajacoutot;	state Exp;
branches;
next	1.245;
commitid	6eY4kOQKBLVl1WQ6;

1.245
date	2015.04.15.17.02.16;	author ajacoutot;	state Exp;
branches;
next	1.244;
commitid	svwuTU0sws6sCWlJ;

1.244
date	2015.04.13.07.56.06;	author ajacoutot;	state Exp;
branches;
next	1.243;
commitid	Z0jEDLNedcANfxuj;

1.243
date	2015.04.08.10.33.18;	author ajacoutot;	state Exp;
branches;
next	1.242;
commitid	N05ULE92CIWxx6cb;

1.242
date	2015.04.04.09.21.02;	author ajacoutot;	state Exp;
branches;
next	1.241;
commitid	kS3kwKZogsvzYmEY;

1.241
date	2015.04.03.17.07.29;	author ajacoutot;	state Exp;
branches;
next	1.240;
commitid	PN0NwKExFdyuJR9I;

1.240
date	2015.03.27.08.41.04;	author ajacoutot;	state Exp;
branches;
next	1.239;
commitid	bGtJfGn7cri3zP6L;

1.239
date	2015.02.09.10.42.40;	author ajacoutot;	state Exp;
branches;
next	1.238;
commitid	XUM1YZnPiEvQzhYw;

1.238
date	2015.01.12.13.09.49;	author ajacoutot;	state Exp;
branches;
next	1.237;
commitid	BZCW5D1yXUzMHhgO;

1.237
date	2014.12.08.09.18.07;	author ajacoutot;	state Exp;
branches;
next	1.236;
commitid	yUtWdR1XyIJz6RCs;

1.236
date	2014.11.13.17.26.44;	author ajacoutot;	state Exp;
branches;
next	1.235;
commitid	cLxfGLWf3y3rURAl;

1.235
date	2014.10.13.08.55.28;	author ajacoutot;	state Exp;
branches;
next	1.234;
commitid	AyWlkPB6lknfBZaQ;

1.234
date	2014.09.08.09.41.48;	author ajacoutot;	state Exp;
branches;
next	1.233;
commitid	7a2UW9Shghy1I2No;

1.233
date	2014.08.11.15.25.51;	author ajacoutot;	state Exp;
branches;
next	1.232;
commitid	TLduIFFjkRJAZdpR;

1.232
date	2014.07.14.08.48.43;	author ajacoutot;	state Exp;
branches;
next	1.231;
commitid	lVL4I9Bg9EhLBhwJ;

1.231
date	2014.06.09.09.12.09;	author ajacoutot;	state Exp;
branches;
next	1.230;
commitid	ihVGsQBv43Yb0nm7;

1.230
date	2014.05.27.10.03.19;	author ajacoutot;	state Exp;
branches;
next	1.229;

1.229
date	2014.05.12.13.40.35;	author ajacoutot;	state Exp;
branches;
next	1.228;

1.228
date	2014.04.21.14.30.24;	author ajacoutot;	state Exp;
branches;
next	1.227;

1.227
date	2014.04.13.16.14.19;	author ajacoutot;	state Exp;
branches;
next	1.226;

1.226
date	2014.04.11.10.00.17;	author ajacoutot;	state Exp;
branches;
next	1.225;

1.225
date	2014.04.10.11.27.53;	author ajacoutot;	state Exp;
branches;
next	1.224;

1.224
date	2014.04.08.15.23.15;	author ajacoutot;	state Exp;
branches;
next	1.223;

1.223
date	2014.04.02.09.36.11;	author jasper;	state Exp;
branches;
next	1.222;

1.222
date	2014.04.01.18.06.29;	author jasper;	state Exp;
branches;
next	1.221;

1.221
date	2014.04.01.17.03.13;	author jasper;	state Exp;
branches;
next	1.220;

1.220
date	2014.04.01.13.21.45;	author ajacoutot;	state Exp;
branches;
next	1.219;

1.219
date	2014.03.31.14.26.01;	author ajacoutot;	state Exp;
branches;
next	1.218;

1.218
date	2014.03.27.14.13.10;	author ajacoutot;	state Exp;
branches;
next	1.217;

1.217
date	2014.02.10.12.46.01;	author ajacoutot;	state Exp;
branches;
next	1.216;

1.216
date	2014.01.17.09.59.24;	author ajacoutot;	state Exp;
branches;
next	1.215;

1.215
date	2013.12.09.08.41.58;	author ajacoutot;	state Exp;
branches;
next	1.214;

1.214
date	2013.11.14.12.58.16;	author ajacoutot;	state Exp;
branches;
next	1.213;

1.213
date	2013.11.10.16.10.00;	author ajacoutot;	state Exp;
branches;
next	1.212;

1.212
date	2013.10.13.16.51.20;	author ajacoutot;	state Exp;
branches;
next	1.211;

1.211
date	2013.09.28.08.50.41;	author ajacoutot;	state Exp;
branches;
next	1.210;

1.210
date	2013.09.27.09.30.39;	author ajacoutot;	state Exp;
branches;
next	1.209;

1.209
date	2013.09.27.07.47.54;	author ajacoutot;	state Exp;
branches;
next	1.208;

1.208
date	2013.09.27.07.39.33;	author ajacoutot;	state Exp;
branches;
next	1.207;

1.207
date	2013.09.11.13.46.43;	author ajacoutot;	state Exp;
branches;
next	1.206;

1.206
date	2013.09.11.07.21.04;	author ajacoutot;	state Exp;
branches;
next	1.205;

1.205
date	2013.09.10.07.20.53;	author ajacoutot;	state Exp;
branches;
next	1.204;

1.204
date	2013.08.15.16.07.27;	author ajacoutot;	state Exp;
branches;
next	1.203;

1.203
date	2013.08.15.14.51.39;	author ajacoutot;	state Exp;
branches;
next	1.202;

1.202
date	2013.08.11.13.54.15;	author ajacoutot;	state Exp;
branches;
next	1.201;

1.201
date	2013.08.06.19.09.41;	author ajacoutot;	state Exp;
branches;
next	1.200;

1.200
date	2013.06.18.13.16.51;	author ajacoutot;	state Exp;
branches;
next	1.199;

1.199
date	2013.06.17.19.30.43;	author ajacoutot;	state Exp;
branches;
next	1.198;

1.198
date	2013.06.09.10.00.45;	author ajacoutot;	state Exp;
branches;
next	1.197;

1.197
date	2013.05.14.12.36.36;	author ajacoutot;	state Exp;
branches;
next	1.196;

1.196
date	2013.05.12.15.31.45;	author ajacoutot;	state Exp;
branches;
next	1.195;

1.195
date	2013.04.14.16.53.54;	author ajacoutot;	state Exp;
branches;
next	1.194;

1.194
date	2013.04.13.12.32.26;	author ajacoutot;	state Exp;
branches;
next	1.193;

1.193
date	2013.04.13.09.14.06;	author landry;	state Exp;
branches;
next	1.192;

1.192
date	2013.04.02.16.16.47;	author ajacoutot;	state Exp;
branches;
next	1.191;

1.191
date	2013.03.30.11.37.33;	author ajacoutot;	state Exp;
branches;
next	1.190;

1.190
date	2013.03.11.11.23.50;	author espie;	state Exp;
branches;
next	1.189;

1.189
date	2013.03.07.08.56.00;	author ajacoutot;	state Exp;
branches;
next	1.188;

1.188
date	2013.01.30.07.21.01;	author ajacoutot;	state Exp;
branches;
next	1.187;

1.187
date	2013.01.24.10.12.11;	author ajacoutot;	state Exp;
branches;
next	1.186;

1.186
date	2013.01.24.08.06.00;	author ajacoutot;	state Exp;
branches;
next	1.185;

1.185
date	2013.01.23.15.15.00;	author ajacoutot;	state Exp;
branches;
next	1.184;

1.184
date	2013.01.22.07.07.58;	author ajacoutot;	state Exp;
branches;
next	1.183;

1.183
date	2013.01.07.11.37.29;	author ajacoutot;	state Exp;
branches;
next	1.182;

1.182
date	2012.11.11.18.51.25;	author ajacoutot;	state Exp;
branches;
next	1.181;

1.181
date	2012.10.28.11.24.40;	author ajacoutot;	state Exp;
branches;
next	1.180;

1.180
date	2012.10.18.13.55.27;	author ajacoutot;	state Exp;
branches;
next	1.179;

1.179
date	2012.10.16.11.56.11;	author ajacoutot;	state Exp;
branches;
next	1.178;

1.178
date	2012.10.14.09.20.59;	author ajacoutot;	state Exp;
branches;
next	1.177;

1.177
date	2012.10.04.13.58.17;	author ajacoutot;	state Exp;
branches;
next	1.176;

1.176
date	2012.10.03.15.57.18;	author ajacoutot;	state Exp;
branches;
next	1.175;

1.175
date	2012.10.01.15.01.14;	author ajacoutot;	state Exp;
branches;
next	1.174;

1.174
date	2012.10.01.14.09.12;	author ajacoutot;	state Exp;
branches;
next	1.173;

1.173
date	2012.09.29.07.21.49;	author ajacoutot;	state Exp;
branches;
next	1.172;

1.172
date	2012.09.28.14.37.27;	author ajacoutot;	state Exp;
branches;
next	1.171;

1.171
date	2012.09.28.14.34.30;	author ajacoutot;	state Exp;
branches;
next	1.170;

1.170
date	2012.09.28.13.49.03;	author ajacoutot;	state Exp;
branches;
next	1.169;

1.169
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.168;

1.168
date	2012.08.28.15.27.49;	author ajacoutot;	state Exp;
branches;
next	1.167;

1.167
date	2012.08.13.09.16.42;	author jasper;	state Exp;
branches;
next	1.166;

1.166
date	2012.07.12.12.04.38;	author ajacoutot;	state Exp;
branches;
next	1.165;

1.165
date	2012.07.08.14.30.00;	author ajacoutot;	state Exp;
branches;
next	1.164;

1.164
date	2012.07.08.06.09.45;	author ajacoutot;	state Exp;
branches;
next	1.163;

1.163
date	2012.06.18.11.46.40;	author jasper;	state Exp;
branches;
next	1.162;

1.162
date	2012.06.15.08.32.16;	author ajacoutot;	state Exp;
branches;
next	1.161;

1.161
date	2012.05.14.09.58.59;	author ajacoutot;	state Exp;
branches;
next	1.160;

1.160
date	2012.04.23.06.59.23;	author jasper;	state Exp;
branches;
next	1.159;

1.159
date	2012.04.07.13.31.29;	author ajacoutot;	state Exp;
branches;
next	1.158;

1.158
date	2012.03.30.09.00.29;	author ajacoutot;	state Exp;
branches;
next	1.157;

1.157
date	2012.03.29.16.39.36;	author ajacoutot;	state Exp;
branches;
next	1.156;

1.156
date	2012.03.29.06.56.25;	author ajacoutot;	state Exp;
branches;
next	1.155;

1.155
date	2012.02.18.18.40.18;	author ajacoutot;	state Exp;
branches;
next	1.154;

1.154
date	2012.01.09.18.26.31;	author ajacoutot;	state Exp;
branches;
next	1.153;

1.153
date	2012.01.09.14.31.03;	author ajacoutot;	state Exp;
branches;
next	1.152;

1.152
date	2011.12.29.09.26.11;	author ajacoutot;	state Exp;
branches;
next	1.151;

1.151
date	2011.12.03.18.35.11;	author ajacoutot;	state Exp;
branches;
next	1.150;

1.150
date	2011.11.28.12.32.04;	author ajacoutot;	state Exp;
branches;
next	1.149;

1.149
date	2011.11.22.15.29.44;	author jasper;	state Exp;
branches;
next	1.148;

1.148
date	2011.11.15.17.12.49;	author ajacoutot;	state Exp;
branches;
next	1.147;

1.147
date	2011.11.14.14.59.53;	author ajacoutot;	state Exp;
branches;
next	1.146;

1.146
date	2011.11.14.13.52.39;	author jasper;	state Exp;
branches;
next	1.145;

1.145
date	2011.10.29.08.12.32;	author ajacoutot;	state Exp;
branches;
next	1.144;

1.144
date	2011.10.16.19.03.34;	author ajacoutot;	state Exp;
branches;
next	1.143;

1.143
date	2011.10.16.18.29.46;	author jasper;	state Exp;
branches;
next	1.142;

1.142
date	2011.10.03.16.33.53;	author ajacoutot;	state Exp;
branches;
next	1.141;

1.141
date	2011.10.01.10.44.35;	author ajacoutot;	state Exp;
branches;
next	1.140;

1.140
date	2011.09.28.09.54.16;	author jasper;	state Exp;
branches;
next	1.139;

1.139
date	2011.09.28.09.51.36;	author jasper;	state Exp;
branches;
next	1.138;

1.138
date	2011.09.26.17.05.04;	author ajacoutot;	state Exp;
branches;
next	1.137;

1.137
date	2011.09.26.13.30.53;	author ajacoutot;	state Exp;
branches;
next	1.136;

1.136
date	2011.09.26.09.24.08;	author ajacoutot;	state Exp;
branches;
next	1.135;

1.135
date	2011.09.25.08.04.45;	author ajacoutot;	state Exp;
branches;
next	1.134;

1.134
date	2011.09.22.10.30.43;	author ajacoutot;	state Exp;
branches;
next	1.133;

1.133
date	2011.09.21.13.27.59;	author jasper;	state Exp;
branches;
next	1.132;

1.132
date	2011.09.21.10.12.41;	author jasper;	state Exp;
branches;
next	1.131;

1.131
date	2011.09.20.21.04.25;	author jasper;	state Exp;
branches;
next	1.130;

1.130
date	2011.09.20.20.51.52;	author jasper;	state Exp;
branches;
next	1.129;

1.129
date	2011.09.19.07.39.05;	author ajacoutot;	state Exp;
branches;
next	1.128;

1.128
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.127;

1.127
date	2011.09.12.12.07.26;	author jasper;	state Exp;
branches;
next	1.126;

1.126
date	2011.09.12.07.26.19;	author ajacoutot;	state Exp;
branches;
next	1.125;

1.125
date	2011.07.03.17.14.23;	author ajacoutot;	state Exp;
branches;
next	1.124;

1.124
date	2011.04.22.07.39.37;	author ajacoutot;	state Exp;
branches;
next	1.123;

1.123
date	2011.04.21.07.05.36;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2011.04.16.05.50.25;	author ajacoutot;	state Exp;
branches;
next	1.121;

1.121
date	2011.04.13.06.47.42;	author ajacoutot;	state Exp;
branches;
next	1.120;

1.120
date	2011.03.29.11.49.39;	author ajacoutot;	state Exp;
branches;
next	1.119;

1.119
date	2011.03.07.19.36.17;	author ajacoutot;	state Exp;
branches;
next	1.118;

1.118
date	2011.01.12.08.05.11;	author pea;	state Exp;
branches;
next	1.117;

1.117
date	2011.01.07.10.31.16;	author pea;	state Exp;
branches;
next	1.116;

1.116
date	2010.11.19.07.23.06;	author espie;	state Exp;
branches;
next	1.115;

1.115
date	2010.11.16.08.55.49;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2010.10.24.11.44.37;	author ajacoutot;	state Exp;
branches;
next	1.113;

1.113
date	2010.10.23.16.30.01;	author ajacoutot;	state Exp;
branches;
next	1.112;

1.112
date	2010.10.23.13.01.26;	author ajacoutot;	state Exp;
branches;
next	1.111;

1.111
date	2010.10.18.13.48.51;	author jasper;	state Exp;
branches;
next	1.110;

1.110
date	2010.10.11.08.15.27;	author jasper;	state Exp;
branches;
next	1.109;

1.109
date	2010.09.30.08.01.26;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2010.09.29.17.15.55;	author ajacoutot;	state Exp;
branches;
next	1.107;

1.107
date	2010.08.22.10.29.40;	author ajacoutot;	state Exp;
branches;
next	1.106;

1.106
date	2010.06.21.05.17.04;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2010.06.15.10.51.38;	author ajacoutot;	state Exp;
branches;
next	1.104;

1.104
date	2010.06.09.11.43.22;	author espie;	state Exp;
branches;
next	1.103;

1.103
date	2010.05.02.14.05.58;	author ajacoutot;	state Exp;
branches;
next	1.102;

1.102
date	2010.05.01.10.53.17;	author ajacoutot;	state Exp;
branches;
next	1.101;

1.101
date	2010.04.27.15.07.50;	author ajacoutot;	state Exp;
branches;
next	1.100;

1.100
date	2010.04.26.19.52.25;	author ajacoutot;	state Exp;
branches;
next	1.99;

1.99
date	2010.04.25.08.33.00;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2010.04.22.16.30.02;	author jasper;	state Exp;
branches;
next	1.97;

1.97
date	2010.04.09.09.02.35;	author ajacoutot;	state Exp;
branches;
next	1.96;

1.96
date	2010.03.21.10.42.53;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2009.12.28.09.31.08;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2009.12.28.09.23.10;	author jasper;	state Exp;
branches;
next	1.93;

1.93
date	2009.12.21.22.20.12;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2009.12.14.16.19.12;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2009.11.17.23.31.13;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2009.11.14.16.33.16;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2009.11.11.14.23.05;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2009.10.19.20.31.23;	author jasper;	state Exp;
branches;
next	1.87;

1.87
date	2009.10.13.22.07.04;	author jasper;	state Exp;
branches;
next	1.86;

1.86
date	2009.08.26.15.38.18;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2009.08.25.20.11.45;	author naddy;	state Exp;
branches;
next	1.84;

1.84
date	2009.08.20.07.52.01;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2009.08.10.06.32.42;	author kili;	state Exp;
branches;
next	1.82;

1.82
date	2009.06.28.14.36.31;	author sthen;	state Exp;
branches;
next	1.81;

1.81
date	2009.06.21.14.41.21;	author kili;	state Exp;
branches;
next	1.80;

1.80
date	2009.06.17.19.51.25;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2009.06.15.06.27.10;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2009.06.11.18.27.02;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2009.06.10.13.31.56;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2009.06.08.16.58.15;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2009.06.08.09.41.01;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2009.06.07.05.59.47;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2009.06.01.05.50.43;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2009.04.16.08.11.13;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2009.04.06.10.09.06;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2009.03.31.15.21.49;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2009.03.31.11.18.17;	author jasper;	state Exp;
branches;
next	1.68;

1.68
date	2009.03.30.10.33.01;	author kevlo;	state Exp;
branches;
next	1.67;

1.67
date	2009.03.22.16.00.28;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2009.03.17.12.39.16;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2009.03.14.11.36.24;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2009.03.14.10.40.51;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2009.03.06.10.44.02;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2009.03.06.10.42.48;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2009.03.04.20.10.09;	author jasper;	state Exp;
branches;
next	1.60;

1.60
date	2009.02.15.17.33.52;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2009.02.04.15.43.32;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2009.02.03.15.54.24;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2009.01.31.08.32.35;	author jasper;	state Exp;
branches;
next	1.56;

1.56
date	2009.01.30.21.36.48;	author sturm;	state Exp;
branches;
next	1.55;

1.55
date	2009.01.20.23.15.39;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2009.01.12.16.13.42;	author jasper;	state Exp;
branches;
next	1.53;

1.53
date	2008.12.17.18.42.31;	author jasper;	state Exp;
branches;
next	1.52;

1.52
date	2008.12.01.01.32.40;	author kevlo;	state Exp;
branches;
next	1.51;

1.51
date	2008.11.29.10.04.57;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2008.11.28.14.11.35;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2008.11.24.19.32.29;	author jasper;	state Exp;
branches;
next	1.48;

1.48
date	2008.11.23.22.59.08;	author jasper;	state Exp;
branches;
next	1.47;

1.47
date	2008.11.23.11.37.06;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2008.11.21.17.28.07;	author jasper;	state Exp;
branches;
next	1.45;

1.45
date	2008.08.21.22.50.21;	author jasper;	state Exp;
branches;
next	1.44;

1.44
date	2008.07.08.11.16.44;	author jasper;	state Exp;
branches;
next	1.43;

1.43
date	2008.06.02.16.49.56;	author jasper;	state Exp;
branches;
next	1.42;

1.42
date	2008.05.30.08.23.49;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2008.05.26.16.29.27;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2008.05.11.12.29.53;	author jasper;	state Exp;
branches;
next	1.39;

1.39
date	2008.05.02.14.44.54;	author jasper;	state Exp;
branches;
next	1.38;

1.38
date	2008.05.01.10.25.50;	author bernd;	state Exp;
branches;
next	1.37;

1.37
date	2008.04.17.08.10.10;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2007.11.21.16.18.15;	author jasper;	state Exp;
branches;
next	1.35;

1.35
date	2007.10.28.20.56.46;	author jasper;	state Exp;
branches;
next	1.34;

1.34
date	2007.06.27.08.27.40;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2007.06.18.17.39.18;	author martin;	state Exp;
branches;
next	1.32;

1.32
date	2007.06.02.11.32.11;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2007.04.28.16.17.26;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2006.11.11.14.48.00;	author mbalmer;	state Exp;
branches;
next	1.29;

1.29
date	2006.09.18.11.50.40;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2006.08.03.19.56.08;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2006.08.03.13.09.09;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2006.06.13.13.27.12;	author bernd;	state Exp;
branches;
next	1.25;

1.25
date	2006.01.18.17.15.22;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2005.12.28.22.43.19;	author steven;	state Exp;
branches;
next	1.23;

1.23
date	2005.12.28.08.02.16;	author steven;	state Exp;
branches;
next	1.22;

1.22
date	2005.12.03.00.26.40;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2005.09.08.04.52.12;	author marcm;	state Exp;
branches;
next	1.20;

1.20
date	2005.08.13.18.19.32;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2005.07.27.14.06.31;	author xsa;	state Exp;
branches;
next	1.18;

1.18
date	2005.04.30.15.11.11;	author alek;	state Exp;
branches;
next	1.17;

1.17
date	2005.01.30.14.44.46;	author robert;	state Exp;
branches;
next	1.16;

1.16
date	2005.01.02.12.33.37;	author alek;	state Exp;
branches;
next	1.15;

1.15
date	2004.10.09.14.45.19;	author sturm;	state Exp;
branches;
next	1.14;

1.14
date	2004.08.10.09.14.48;	author xsa;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2004.07.05.22.09.52;	author jolan;	state Exp;
branches;
next	1.12;

1.12
date	2004.02.04.07.39.18;	author sturm;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2003.07.12.06.27.12;	author marcm;	state Exp;
branches;
next	1.10;

1.10
date	2003.05.25.22.10.22;	author marcm;	state Exp;
branches;
next	1.9;

1.9
date	2003.04.10.15.59.49;	author marcm;	state Exp;
branches;
next	1.8;

1.8
date	2003.01.03.21.53.07;	author marcm;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2002.10.18.20.53.01;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2002.09.26.08.07.10;	author marcm;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2002.09.22.15.37.35;	author marcm;	state Exp;
branches;
next	1.4;

1.4
date	2002.09.14.04.18.35;	author marcm;	state Exp;
branches;
next	1.3;

1.3
date	2002.06.21.10.18.07;	author nino;	state Exp;
branches;
next	1.2;

1.2
date	2002.06.03.18.11.17;	author nino;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.31.11.49.40;	author nino;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.05.31.11.49.40;	author nino;	state Exp;
branches;
next	;

1.6.2.1
date	2003.04.15.03.18.32;	author marcm;	state Exp;
branches;
next	;

1.8.2.1
date	2003.05.07.20.31.47;	author marcm;	state Exp;
branches;
next	;

1.12.2.1
date	2005.02.05.17.58.05;	author robert;	state Exp;
branches;
next	;

1.14.2.1
date	2005.02.05.17.56.42;	author robert;	state Exp;
branches;
next	;


desc
@@


1.275
log
@Update to evolution-3.24.1.
@
text
@# $OpenBSD: Makefile,v 1.274 2017/03/13 15:28:18 ajacoutot Exp $

COMMENT=		integrated email and PIM software for GNOME

GNOME_PROJECT=		evolution
GNOME_VERSION=		3.24.1

CATEGORIES=		mail

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>, \
			Antoine Jacoutot <ajacoutot@@openbsd.org>

SO_VERSION=		13.0 # 0.0
.for _lib in \
eabutil econtacteditor econtactlisteditor email-engine essmime \
evolution-addressbook-importers evolution-calendar-importers \
evolution-calendar evolution-mail-composer evolution-mail-formatter \
evolution-mail-importers evolution-mail evolution-shell evolution-smime \
evolution-util gnomecanvas
SHARED_LIBS +=		${_lib} ${SO_VERSION}	 
.endfor

# GPLv2+ - LGPLv2+ - OpenLDAP license - GFDL 1.1
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += atk-1.0 c cairo cairo-gobject camel-1.2 canberra canberra-gtk3
WANTLIB += cryptui ebook-1.2 ebook-contacts-1.2 ecal-1.2 edataserver-1.2
WANTLIB += edataserverui-1.2 enchant gailutil-3 gcr-base-3 gcr-ui-3
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gnome-autoar-0
WANTLIB += gnome-autoar-gtk-0 gnome-desktop-3 gobject-2.0 gtk-3
WANTLIB += gtkspell3-3 gweather-3 ical icalvcal intl ldap
WANTLIB += m notify nspr4 nss3 pango-1.0 pangocairo-1.0 pst pthread
WANTLIB += secret-1 smime3 soup-2.4 sqlite3 webkit2gtk-4.0 xml2

MODULES=		devel/cmake \
			devel/dconf \
			x11/gnome

BUILD_DEPENDS=		devel/bison \
			devel/gsettings-desktop-schemas

LIB_DEPENDS=		audio/libcanberra,-gtk3 \
			converters/libpst \
			databases/evolution-data-server \
			devel/libnotify \
			textproc/gtkspell3 \
			x11/gnome/autoar \
			x11/gnome/desktop \
			x11/gnome/libcryptui

RUN_DEPENDS=		devel/gsettings-desktop-schemas

# module-text-highlight.so
BUILD_DEPENDS +=	textproc/highlight
RUN_DEPENDS +=		textproc/highlight

MODGNOME_TOOLS=		desktop-file-utils gtk-update-icon-cache yelp

MODGNOME_CPPFLAGS=	-L${LOCALBASE}/include -I${X11BASE}/include
# without --as-needed, evolution takes ages to start
MODGNOME_LDFLAGS=	-L${LOCALBASE}/lib -L${X11BASE}/lib -Wl,--as-needed
CONFIGURE_ENV=		CPPFLAGS="${MODGNOME_CPPFLAGS}" LDFLAGS="${MODGNOME_LDFLAGS}"

CONFIGURE_ARGS=		-DWITH_BOGOFILTER="${LOCALBASE}/bin/bogofilter" \
			-DWITH_SA_LEARN="${LOCALBASE}/bin/sa-learn" \
			-DWITH_SPAMASSASSIN="${LOCALBASE}/bin/spamassassin" \
			-DWITH_OPENLDAP=${LOCALBASE} \
			-DVERSION_SUBSTRING=" (OpenBSD Ports)" \
			-DENABLE_SCHEMAS_COMPILE=OFF \
			-DSYSCONF_INSTALL_DIR=${SYSCONFDIR}

# needs libytnef
CONFIGURE_ARGS +=	-DENABLE_YTNEF=OFF

pre-configure:
	${SUBST_CMD} ${WRKSRC}/CMakeLists.txt

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/evolution
	mv ${WRKINST}/etc/xdg ${PREFIX}/share/examples/evolution/

.include <bsd.port.mk>
@


1.274
log
@Update to evolution-3.22.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.273 2017/02/13 16:50:00 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.6
d13 1
a13 1
SO_VERSION=		12.0 # 0.0
d19 1
a19 1
evolution-util gnomecanvas evolutiontestsettings
d31 1
a31 1
WANTLIB += gtkspell3-3 gweather-3 ical icalvcal intl ldap-2.4
d35 2
a36 1
MODULES=		devel/dconf \
d59 1
a59 1
MODGNOME_CPPFLAGS=	-I${X11BASE}/include
d61 2
a62 1
MODGNOME_LDFLAGS=	-L${X11BASE}/lib -Wl,--as-needed
d64 7
a70 1
YACC=			bison
d72 2
a73 17
CONFIGURE_STYLE=	gnu

CONFIGURE_ARGS=		--with-bogofilter=${LOCALBASE}/bin/bogofilter \
			--with-openldap="${LOCALBASE}" \
			--with-sa-learn=${LOCALBASE}/bin/sa-learn \
			--with-spamassassin=${LOCALBASE}/bin/spamassassin \
			--with-sub-version=" (OpenBSD Ports)"

FAKE_FLAGS=		autostartdir=${PREFIX}/share/examples/evolution/xdg/autostart

# REVERT 160006402248075b95c98e9e34d4538670ba7480 (Debian does the same):
REVERT_AVOID_VERSION=	addressbook/importers addressbook/util \
			addressbook/gui/contact-editor \
			addressbook/gui/contact-list-editor libemail-engine \
			smime/lib calendar/gui calendar/importers composer \
			em-format mail/importers mail shell smime/gui e-util \
			libgnomecanvas
d76 1
a76 3
.for i in ${REVERT_AVOID_VERSION}
	sed -i 's,-avoid-version,,' ${WRKSRC}/$i/Makefile.in
.endfor
d79 2
a80 1
	rm ${PREFIX}/lib/evolution/{modules,plugins,test-gio-modules,web-extensions/{,webkit-editor}}/*.{a,la}
@


1.273
log
@Update to evolution-3.22.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.272 2017/01/16 14:34:03 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.5
@


1.272
log
@Update to evolution-3.22.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.271 2016/12/13 10:15:15 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.4
@


1.271
log
@Update to evolution-3.22.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.270 2016/11/07 10:38:45 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.3
@


1.270
log
@Update to evolution-3.22.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.269 2016/10/31 14:04:58 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.2
@


1.269
log
@Tweaks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.268 2016/10/31 12:15:40 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		3.22.1
REVISION=		0
@


1.268
log
@Update to evolution-3.22.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.267 2016/10/09 15:08:47 ajacoutot Exp $
d7 1
d20 1
a20 1
evolution-util gnomecanvas edomutils evolutiontestsettings
d89 1
a89 1
	rm ${PREFIX}/lib/evolution/{modules,plugins,test-gio-modules,web-extensions}/*.{a,la}
@


1.267
log
@Add support for gnome-autoar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.266 2016/08/09 12:43:02 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		3.20.5
REVISION=		1
d13 1
a13 1
SO_VERSION=		11.0 # 0.0
d19 1
a19 1
evolution-util gnomecanvas
d33 1
a33 1
WANTLIB += secret-1 smime3 soup-2.4 sqlite3 webkitgtk-3.0 xml2
a45 1
			www/webkit,gtk3 \
d88 1
a88 1
	rm ${PREFIX}/lib/evolution/{modules,plugins}/*.{a,la}
@


1.266
log
@Link with --as-needed again; otherwise it takes 60 seconds or so to start
evolution.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.265 2016/08/08 12:17:04 ajacoutot Exp $
d7 1
a7 1
REVISION=		0
d30 5
a34 5
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gnome-desktop-3
WANTLIB += gobject-2.0 gtk-3 gtkspell3-3 gweather-3 ical icalvcal
WANTLIB += intl ldap-2.4 m notify nspr4 nss3 pango-1.0 pangocairo-1.0
WANTLIB += pst pthread secret-1 smime3 soup-2.4 sqlite3 webkitgtk-3.0
WANTLIB += xml2
d48 1
a72 3

# requires gnome-autoar
CONFIGURE_ARGS +=	--disable-autoar
@


1.265
log
@Update to evolution-3.20.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.264 2016/07/11 09:17:29 ajacoutot Exp $
d7 1
d27 8
a34 21
WANTLIB += EGL GL ICE SM X11 X11-xcb Xcomposite Xcursor Xdamage
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xt Xxf86vm atk-1.0
WANTLIB += atk-bridge-2.0 atspi c cairo cairo-gobject camel-1.2
WANTLIB += canberra canberra-gtk3 crypto cryptui db dbus-1 dbus-glib-1
WANTLIB += drm ebackend-1.2 ebook-1.2 ebook-contacts-1.2 ecal-1.2
WANTLIB += edata-book-1.2 edataserver-1.2 edataserverui-1.2 enchant
WANTLIB += epoxy expat ffi fontconfig freetype gailutil-3 gbm
WANTLIB += gck-1 gcr-base-3 gcr-ui-3 gcrypt gdk-3 gdk_pixbuf-2.0
WANTLIB += geocode-glib gio-2.0 glapi glib-2.0 gmodule-2.0 gnome-desktop-3
WANTLIB += gobject-2.0 gpg-error graphite2 gstapp-1.0 gstaudio-1.0
WANTLIB += gstbase-1.0 gstfft-1.0 gstpbutils-1.0 gstreamer-1.0
WANTLIB += gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-3 gtkspell3-3
WANTLIB += gweather-3 harfbuzz harfbuzz-icu ical icalss icalvcal
WANTLIB += iconv icudata icui18n icuuc intl javascriptcoregtk-3.0
WANTLIB += jpeg json-glib-1.0 lber-2.4 ldap-2.4 ltdl lzma m notify
WANTLIB += nspr4 nss3 nssutil3 ogg orc-0.4 p11-kit pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 plc4 plds4 png pst pthread
WANTLIB += pthread-stubs sasl2 secret-1 smime3 softokn3 soup-2.4
WANTLIB += sqlite3 ssl ssl3 stdc++ vorbis vorbisfile webkitgtk-3.0
WANTLIB += webp xcb xcb-dri2 xcb-glx xcb-render xcb-shape xcb-shm
WANTLIB += xcb-xfixes xml2 xslt z
d60 2
@


1.264
log
@Update to evolution-3.20.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.263 2016/06/06 12:59:32 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.20.4
@


1.263
log
@Update to evolution-3.20.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.262 2016/05/10 06:48:57 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.20.3
@


1.262
log
@Update to evolution-3.20.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.261 2016/04/26 07:15:42 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.20.2
@


1.261
log
@Update to evolution-3.20.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.260 2016/03/18 23:12:18 naddy Exp $
d6 1
a6 1
GNOME_VERSION=		3.20.1
@


1.260
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.259 2016/03/15 09:47:48 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.18.5.2
d13 1
a13 1
SO_VERSION=		10.0 # 0.0
d26 14
a39 13
WANTLIB += EGL GL ICE SM X11 Xcomposite Xcursor Xdamage Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xt atk-1.0 atk-bridge-2.0
WANTLIB += atspi c cairo cairo-gobject camel-1.2 canberra canberra-gtk3
WANTLIB += crypto cryptui db dbus-1 dbus-glib-1 ebackend-1.2 ebook-1.2
WANTLIB += ebook-contacts-1.2 ecal-1.2 edata-book-1.2 edataserver-1.2
WANTLIB += edataserverui-1.2 enchant epoxy expat ffi fontconfig
WANTLIB += freetype gailutil-3 gbm gck-1 gcr-base-3 gcr-ui-3 gcrypt
WANTLIB += gdk-3 gdk_pixbuf-2.0 geocode-glib gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gnome-desktop-3 gobject-2.0 gpg-error graphite2
WANTLIB += gstapp-1.0 gstaudio-1.0 gstbase-1.0 gstfft-1.0 gstpbutils-1.0
WANTLIB += gstreamer-1.0 gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-3
WANTLIB += gtkspell3-3 gweather-3 harfbuzz harfbuzz-icu ical icalss
WANTLIB += icalvcal icudata icui18n icuuc javascriptcoregtk-3.0
d45 2
a46 3
WANTLIB += webp xcb xcb-render xcb-shm xml2 xslt z
WANTLIB += X11-xcb Xxf86vm drm glapi xcb-dri2 xcb-glx xcb-shape
WANTLIB += xcb-xfixes
a48 1
			devel/gettext \
@


1.259
log
@Update to evolution-3.18.5.2.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.258 2016/02/27 08:58:07 ajacoutot Exp $

SHARED_ONLY=		Yes
@


1.258
log
@Update to evolution-3.18.5.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.257 2016/01/18 18:09:23 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.18.5.1
@


1.257
log
@Update to evolution-3.18.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.256 2015/12/14 14:11:05 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.18.4
@


1.256
log
@Update to evolution-3.18.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.255 2015/11/26 09:57:34 sthen Exp $
d8 1
a8 1
GNOME_VERSION=		3.18.3
@


1.255
log
@adjust the sub-version string for Evolution, whitespace is no longer
added automatically so it was a bit ugly.  ok ajacoutot jasper

before - X-Mailer: Evolution 3.18.2OpenBSD Ports
after  - X-Mailer: Evolution 3.18.2 (OpenBSD Ports)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.254 2015/11/09 10:01:30 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.18.2
REVISION=		0
d47 2
d101 1
a101 1
	perl -pi -e 's,-avoid-version,,' ${WRKSRC}/$i/Makefile.in
@


1.254
log
@Update to evolution-3.18.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.253 2015/10/13 18:13:06 ajacoutot Exp $
d9 1
d83 1
a83 1
			--with-sub-version="OpenBSD Ports"
@


1.253
log
@Update to evolution-3.18.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.252 2015/10/12 05:46:27 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.18.1
@


1.252
log
@Update to evolution-3.18.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.251 2015/08/12 06:17:29 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.18.0
@


1.251
log
@Update to evolution-3.16.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2015/07/13 07:02:36 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.16.5
d15 1
a15 1
SO_VERSION=		9.0 # 0.0
d31 16
a46 18
WANTLIB += crypto cryptui curl db dbus-1 dbus-glib-1 ebackend-1.2
WANTLIB += ebook-1.2 ebook-contacts-1.2 ecal-1.2 edata-book-1.2
WANTLIB += edataserver-1.2 edataserverui-1.2 enchant epoxy expat
WANTLIB += ffi fontconfig freetype gailutil-3 gbm gck-1 gcr-base-3
WANTLIB += gcr-ui-3 gcrypt gdata gdk-3 gdk_pixbuf-2.0 geocode-glib
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gnome-desktop-3 goa-1.0
WANTLIB += gobject-2.0 gpg-error graphite2 gstapp-1.0 gstaudio-1.0
WANTLIB += gstbase-1.0 gstfft-1.0 gstpbutils-1.0 gstreamer-1.0
WANTLIB += gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-3 gtkspell3-3
WANTLIB += gweather-3 harfbuzz harfbuzz-icu ical icalss icalvcal
WANTLIB += icudata icui18n icuuc idn javascriptcoregtk-3.0 jpeg
WANTLIB += json-glib-1.0 lber-2.4 ldap-2.4 ltdl lzma m notify
WANTLIB += nspr4 nss3 nssutil3 oauth ogg orc-0.4 p11-kit pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 plc4 plds4
WANTLIB += png pst pthread pthread-stubs sasl2 secret-1 smime3
WANTLIB += softokn3 soup-2.4 sqlite3 ssl ssl3 stdc++ vorbis vorbisfile
WANTLIB += webkitgtk-3.0 webp xcb xcb-render xcb-shm xml2 xslt
WANTLIB += z
@


1.250
log
@Update to evolution-3.16.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2015/06/08 09:07:15 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.16.4
@


1.249
log
@Update to evolution-3.16.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2015/05/22 12:17:23 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.16.3
@


1.248
log
@-Wl,--as-needed is not needed anymore with newer binutils.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2015/05/15 16:54:42 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.2.1
REVISION=		1
d28 21
a48 8
WANTLIB += atk-1.0 c cairo cairo-gobject camel-1.2 canberra canberra-gtk3
WANTLIB += cryptui ebackend-1.2 ebook-1.2 ebook-contacts-1.2 ecal-1.2
WANTLIB += edataserver-1.2 edataserverui-1.2 enchant gailutil-3
WANTLIB += gcr-base-3 gcr-ui-3 gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gnome-desktop-3 gobject-2.0 gtk-3 gtkspell3-3
WANTLIB += gweather-3 ical icalvcal ldap-2.4 m notify nspr4 nss3
WANTLIB += pango-1.0 pangocairo-1.0 pst pthread secret-1 smime3
WANTLIB += soup-2.4 webkitgtk-3.0 xml2
@


1.247
log
@Drop -avoid-version from libraries to make lib-depends-check a bit happier.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2015/05/11 07:42:55 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
a62 3

# without --as-needed, evolution takes ages to start
MODGNOME_LDFLAGS=	-L${X11BASE}/lib -Wl,--as-needed
@


1.246
log
@Update to evolution-3.16.2.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.245 2015/04/15 17:02:16 ajacoutot Exp $
d9 1
d16 10
d81 13
@


1.245
log
@Sync with committed patch upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2015/04/13 07:56:06 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.1
REVISION=		0
d36 1
a36 1
			databases/evolution-data-server>=${GNOME_VERSION} \
@


1.244
log
@Update to evolution-3.16.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.243 2015/04/08 10:33:18 ajacoutot Exp $
d9 1
@


1.243
log
@Fix tar(1) invocation (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2015/04/04 09:21:02 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.0
REVISION=		1
@


1.242
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2015/04/03 17:07:29 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.241
log
@Update to evolution-3.16.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2015/03/27 08:41:04 ajacoutot Exp $
d9 1
@


1.240
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2015/02/09 10:42:40 ajacoutot Exp $
d8 1
a8 9
GNOME_VERSION=		3.12.11
REVISION=		0

# NOTE: when EVO_VERSION changes, increment accordingly and bump:
# mail/evolution-ews
# mail/evolution-rss
# x11/gnome/tracker
EVO_VERSION=		${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
SUBST_VARS=		EVO_VERSION
d19 4
a22 4
WANTLIB += ebackend-1.2 ebook-1.2 ebook-contacts-1.2 ecal-1.2
WANTLIB += edataserver-1.2 gailutil-3 gcr-ui-3 gcr-base-3 gdata gdk-3
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gnome-desktop-3
WANTLIB += gobject-2.0 gtk-3 gtkhtml-4.0 gtkhtml-editor-4.0 gtkspell3-3
a38 1
			www/gtkhtml4 \
d40 2
a41 1
			x11/gnome/desktop
d49 1
a49 8
# module-bogofilter.so
BUILD_DEPENDS +=	mail/bogofilter
RUN_DEPENDS +=		mail/bogofilter

# module-spamassassin.so
BUILD_DEPENDS +=	mail/p5-Mail-SpamAssassin

MODGNOME_TOOLS += desktop-file-utils gtk-update-icon-cache yelp
d60 4
a63 1
CONFIGURE_ARGS=		--with-openldap="${LOCALBASE}" \
d66 3
d72 1
a72 2
	rm ${PREFIX}/lib/evolution/${EVO_VERSION}/{modules,plugins}/*.{a,la}
	find ${PREFIX}/share/evolution/${EVO_VERSION}/default -perm 444 -exec chmod 644 {} \;
@


1.239
log
@Update to evolution-3.12.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2015/01/12 13:09:49 ajacoutot Exp $
d9 1
@


1.238
log
@Update to evolution-3.12.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.237 2014/12/08 09:18:07 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.10
@


1.237
log
@Update to evolution-3.12.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.236 2014/11/13 17:26:44 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.9
@


1.236
log
@Update to evolution-3.12.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2014/10/13 08:55:28 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.8
@


1.235
log
@Update to evolution-3.12.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2014/09/08 09:41:48 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.7
@


1.234
log
@Update to evolution-3.12.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2014/08/11 15:25:51 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.6
d27 1
a27 1
WANTLIB += edataserver-1.2 gailutil-3 gcr-3 gcr-base-3 gdata gdk-3
@


1.233
log
@Update to evolution-3.12.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2014/07/14 08:48:43 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.5
a43 1
			databases/openldap \
a44 1
			security/nss \
@


1.232
log
@Update to evolution-3.12.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2014/06/09 09:12:09 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.4
@


1.231
log
@Update to evolution-3.12.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2014/05/27 10:03:19 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.12.3
@


1.230
log
@Bring some bugfixes from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2014/05/12 13:40:35 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.12.2
REVISION=		0
a20 13

MASTER_SITES0=		https://git.gnome.org/browse/evolution/patch/?id=
PATCH_DIST_STRIP=	-p1
IDS=			ca274218bd56637a55fbe4456c4090ba87da94f2 \
			a63089164f4d70cac6e07187583d0526f970b7c5 \
			02e30ea2f06ea4ed48f6f7ec5286b3a5c0ce4edc \
			ddadd86f960f37d0243f29e484a96fd1c4d3912c \
			8ad84cf9fb009af8de29864e6ff4018ab58f02a4 \
			9a7be72f6d00befd4985632b0a44d552e15eb39b \
			75d8f1e60130bb35a41c93812565835b3ab91cc2
.for i in ${IDS}
PATCHFILES +=		$i:0
.endfor
@


1.229
log
@Update to evolution-3.12.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2014/04/21 14:30:24 ajacoutot Exp $
d9 1
d23 14
a36 1
# # GPLv2+ - LGPLv2+ - OpenLDAP license - GFDL 1.1
@


1.228
log
@Bump after kerberos removal from e-d-s.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2014/04/13 16:14:19 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.12.1
REVISION=		0
@


1.227
log
@Update to evolution-3.12.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2014/04/11 10:00:17 ajacoutot Exp $
d9 1
@


1.226
log
@Bring a brazillion bugfixes from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2014/04/10 11:27:53 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.12.0
REVISION=		3
@


1.225
log
@Tweak comment, no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2014/04/08 15:23:15 ajacoutot Exp $
d9 1
a9 1
REVISION=		2
@


1.224
log
@Start unbreaking the evolution stack by merging relevant commits from
upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2014/04/02 09:36:11 jasper Exp $
d70 1
a70 1
# without --as-needed, evolution takes 20 minutes (yes, 20!) to start
@


1.223
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2014/04/01 18:06:29 jasper Exp $
d9 1
a9 1
REVISION=		1
@


1.222
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2014/04/01 17:03:13 jasper Exp $
d66 1
a66 1
MODGNOME_TOOLS += yelp  desktop-file-utils  gtk-update-icon-cache
@


1.221
log
@move more bits and bobs into MODGNOME_TOOLS to make it more clear which
tools are actually used.

This commit replaces
MODGNOME_DESKTOP_FILE with MODGNOME_TOOLS += desktop-file-utils
MODGNOME_MIME_FILE with MODGNOME_TOOLS += shared-mime-info
MODGNOME_ICON_CACHE with MODGNOME_TOOLS += gtk-update-icon-cache

(some prettyfication will follow shortly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2014/04/01 13:21:45 ajacoutot Exp $
d66 2
a67 3
MODGNOME_TOOLS= 	yelp
MODGNOME_TOOLS +=	desktop-file-utils
MODGNOME_TOOLS +=	gtk-update-icon-cache
@


1.220
log
@In x11/gnome ports we use disable-static inconsistently, usually to get
rid of static module archives; but since we end up manually removing the
libtool la files anyway, just don't bother setting up the tag.
part 2/2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2014/03/31 14:26:01 ajacoutot Exp $
d67 2
a68 2
MODGNOME_DESKTOP_FILE=	Yes
MODGNOME_ICON_CACHE=	Yes
@


1.219
log
@Explicit -rpath is not needed anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2014/03/27 14:13:10 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
a73 1
LIBTOOL_FLAGS=		--tag=disable-static
d78 1
a78 2
CONFIGURE_ARGS=		--disable-static \
			--with-openldap="${LOCALBASE}" \
d84 1
a84 1
	rm ${PREFIX}/lib/evolution/${EVO_VERSION}/{modules,plugins}/*.la
@


1.218
log
@Update to evolution-3.12.0.
Merge -main and -plugins -- dependencies between the 2 are not different
enough to justify subpackaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2014/02/10 12:46:01 ajacoutot Exp $
d9 1
d72 1
a72 2
MODGNOME_LDFLAGS=	-L${X11BASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${EVO_VERSION}:${TRUEPREFIX}/lib \
				-Wl,--as-needed
@


1.217
log
@Update to evolution-3.10.4.
(crash, mem leak... fixes)

ok jasper@@ sthen@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2014/01/17 09:59:24 ajacoutot Exp $
d5 1
a5 2
COMMENT-main=		integrated email and PIM software for GNOME
COMMENT-plugins=	additionnal plugins for evolution
d8 1
a8 4
GNOME_VERSION=		3.10.4

PKGNAME-main=		${DISTNAME}
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}
d25 8
a32 17
WANTLIB-main += ${WANTLIB}
WANTLIB-main += atk-1.0 c cairo cairo-gobject camel-1.2 canberra canberra-gtk3
WANTLIB-main += ebackend-1.2 ebook-1.2 ebook-contacts-1.2 ecal-1.2
WANTLIB-main += edataserver-1.2 gailutil-3 gdata gdk-3 gdk_pixbuf-2.0
WANTLIB-main += gio-2.0 glib-2.0 gmodule-2.0 gnome-desktop-3
WANTLIB-main += gobject-2.0 gstreamer-1.0 gtk-3 gtkhtml-4.0 gtkhtml-editor-4.0
WANTLIB-main += gweather-3 ical icalvcal ldap-2.4 m notify nspr4 nss3
WANTLIB-main += pango-1.0 pangocairo-1.0 plc4 pthread secret-1 smime3
WANTLIB-main += soup-2.4 soup-gnome-2.4 webkitgtk-3.0 xml2

WANTLIB-plugins += ${WANTLIB}
WANTLIB-plugins += camel-1.2 canberra ebook-1.2 ebook-contacts-1.2 ecal-1.2
WANTLIB-plugins += edataserver-1.2 gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB-plugins += gobject-2.0 gtk-3 gtkhtml-4.0 gtkhtml-editor-4.0 ical
WANTLIB-plugins += notify pst pthread xml2

MULTI_PACKAGES=		-main -plugins
d39 1
a39 2
			devel/gsettings-desktop-schemas \
			devel/iso-codes
d41 4
a44 1
LIB_DEPENDS=		databases/evolution-data-server>=${GNOME_VERSION} \
a45 5
			www/gtkhtml4

LIB_DEPENDS-main=	${LIB_DEPENDS} \
			audio/libcanberra,-gtk3 \
			databases/openldap \
d47 2
d52 1
a52 11
RUN_DEPENDS-main=	${RUN_DEPENDS} \
			devel/gsettings-desktop-schemas

LIB_DEPENDS-plugins=	${LIB_DEPENDS} \
			converters/libpst

RUN_DEPENDS-plugins=	${MODDCONF_RUN_DEPENDS}

# XXX should be a LIB_DEPENDS+WANTLIB but check-lib-depends(1) does not
# work with unversioned solibs (LOCALBASE/lib/evolution/*/*.so).
RUN_DEPENDS-plugins +=	mail/evolution,-main=${GNOME_VERSION}
d56 1
a56 1
RUN_DEPENDS-main +=	textproc/highlight
d60 1
a60 1
RUN_DEPENDS-main +=	mail/bogofilter
a63 1
RUN_DEPENDS-plugins +=	mail/p5-Mail-SpamAssassin
@


1.216
log
@krb5 support comes from e-d-s, so no need to patch anything to find the
Kerberos bits.
Remove old useless patch while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2013/12/09 08:41:58 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.10.3
a12 3

REVISION-main=		0
REVISION-plugins=	0
@


1.215
log
@Update to evolution-3.10.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2013/11/14 12:58:16 ajacoutot Exp $
d14 2
d96 1
a96 2
MODGNOME_CPPFLAGS=	-I${X11BASE}/include \
			$$(krb5-config --cflags)
d109 1
a109 2
			--with-sub-version="OpenBSD Ports" \
			--with-krb5
@


1.214
log
@Remove XXX.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2013/11/10 16:10:00 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.10.2
@


1.213
log
@Update to evolution-3.10.2.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.212 2013/10/13 16:51:20 ajacoutot Exp $

# XXX textproc/highlight
@


1.212
log
@Update to evolution-3.10.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2013/09/28 08:50:41 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.10.1
@


1.211
log
@Remove hardcoded HOMEPAGE and use the one from the x11/gnome MODULE
instead. It is just too hard to maintain a coherent list of still
reachable homepages for GNOME projects so use wiki.gnome.org which is
the entry point for *all* GNOME apps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2013/09/27 09:30:39 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.10.0
a15 2
REVISION-main=		0
REVISION-plugins=	0
@


1.210
log
@Update to evolution-3.10.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2013/09/27 07:47:54 ajacoutot Exp $
d16 3
a26 2

HOMEPAGE=		http://www.gnome.org/projects/evolution/
@


1.209
log
@Forgot in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2013/09/27 07:39:33 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.8.5
a15 3
REVISION-main=		5
REVISION-plugins=	0

d37 1
a37 1
WANTLIB-main += gio-2.0 glib-2.0 gmodule-2.0 gnome-desktop-3 goa-1.0
d86 8
d98 2
a99 2
			$$(krb5-config --cflags) \
			-DBOGOFILTER_BINARY="\\\"${LOCALBASE}/bin/bogofilter\\\""
a107 4

CONFIGURE_ENV=		BOGOFILTER=${LOCALBASE}/bin/bogofilter \
			SPAMASSASSIN=${LOCALBASE}/bin/spamassassin \
			SA_LEARN=${LOCALBASE}/bin/sa-learn
@


1.208
log
@Unmess variable names, and subst_vars.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2013/09/11 13:46:43 ajacoutot Exp $
d96 1
a96 1
MODGNOME_LDFLAGS=	-L${X11BASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib \
d116 2
a117 2
	rm ${PREFIX}/lib/evolution/${R}/{modules,plugins}/*.la
	find ${PREFIX}/share/evolution/${R}/default -perm 444 -exec chmod 644 {} \;
@


1.207
log
@Tweak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2013/09/11 07:21:04 ajacoutot Exp $
d16 2
a17 1
REVISION-main=		4
d19 1
a19 1
# NOTE: when R changes, increment EVO_VERSION accordingly and bump:
d23 2
a24 2
R=			${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
SUBST_VARS=		R
@


1.206
log
@I committed a slighly different 64bit time_t fix upstream after a chat
with evo developer, so merge it here as well.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2013/09/10 07:20:53 ajacoutot Exp $
d16 1
a16 1
REVISION-main=		3
@


1.205
log
@Fix for 64-bit time_t.

looked over by kettenis@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2013/08/15 16:07:27 ajacoutot Exp $
d16 1
a16 1
REVISION-main=		2
@


1.204
log
@Revert previous on these 3 ports.
kettenis@@ says there is more work involved since we are different from the
others... I have no time to take care of it properly so put back whatever
was there before which seemed to work fine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2013/08/15 14:51:39 ajacoutot Exp $
d16 1
a16 1
REVISION-main=		1
@


1.203
log
@Remove, we have 64-bit time_t.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2013/08/11 13:54:15 ajacoutot Exp $
a11 1
REVISION-main=		0
d15 2
@


1.202
log
@Update to evolution-3.8.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2013/08/06 19:09:41 ajacoutot Exp $
d12 1
@


1.201
log
@Update to evolution 3.8.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2013/06/18 13:16:51 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.8.4
@


1.200
log
@Fix Kerberos includes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2013/06/17 19:30:43 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.8.3
a14 3

REVISION-main=		0
REVISION-plugins=	0
@


1.199
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2013/06/09 10:00:45 ajacoutot Exp $
d92 3
a94 1
MODGNOME_CPPFLAGS=	-I${X11BASE}/include -DBOGOFILTER_BINARY="\\\"${LOCALBASE}/bin/bogofilter\\\""
@


1.198
log
@Update to evolution-3.8.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2013/05/14 12:36:36 ajacoutot Exp $
d16 3
d99 2
a100 3
AUTOCONF_VERSION=	2.69
AUTOMAKE_VERSION=	1.9
CONFIGURE_STYLE=	autoconf
d109 1
a109 2
			--with-krb5=/usr \
			--with-krb5-includes=/usr/include/kerberosV
@


1.197
log
@Fix: Bug #699980 - Calendar delete does not remove events from view
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2013/05/12 15:31:45 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.8.2
a15 2
REVISION-main=		0

d41 1
a41 1
WANTLIB-main += soup-2.4 soup-gnome-2.4 webkitgtk-3.0 xml2 krb5
@


1.196
log
@Update to evolution-3.8.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2013/04/14 16:53:54 ajacoutot Exp $
d16 2
d43 1
a43 1
WANTLIB-main += soup-2.4 soup-gnome-2.4 webkitgtk-3.0 xml2
@


1.195
log
@Update to evolution-3.8.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2013/04/13 12:32:26 ajacoutot Exp $
d11 1
a11 1
GNOME_VERSION=		3.8.1
@


1.194
log
@Update to evolution-3.8.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2013/04/13 09:14:06 landry Exp $
d11 1
a11 1
GNOME_VERSION=		3.8.0
@


1.193
log
@Tweak WANTLIB after webkit update (mostly s/gst*-0.10/gst*-1.0/ + removing
gstinterfaces-0.10) and bump some REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2013/04/02 16:16:47 ajacoutot Exp $
d3 1
a3 1
BROKEN=			needs webkit>=1.10.0
d11 1
a11 1
GNOME_VERSION=		3.6.4
a15 2
REVISION-main=		1

a32 5
WANTLIB += camel-1.2 canberra ebook-1.2 ecal-1.2
WANTLIB += edataserver-1.2 edataserverui-3.0 gdk-3 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gobject-2.0 gtk-3 gtkhtml-4.0
WANTLIB += gtkhtml-editor-4.0 ical notify pthread xml2

d34 8
a41 5
WANTLIB-main += atk-1.0 c cairo pango-1.0 pangocairo-1.0
WANTLIB-main += ICE SM cairo-gobject canberra-gtk3 ebackend-1.2
WANTLIB-main += gailutil-3 gdata gmodule-2.0 gnome-desktop-3 goa-1.0
WANTLIB-main += gweather-3 icalvcal ldap-2.4 m nspr4 nss3 plc4 smime3
WANTLIB-main += soup-2.4 gstreamer-1.0 soup-gnome-2.4 webkitgtk-3.0
d44 4
a47 1
WANTLIB-plugins += pst
a72 4
# gstreamer1(-plugins-base) is needed for the audio-inline plugin
BUILD_DEPENDS +=	multimedia/gstreamer1/core
RUN_DEPENDS-main +=	multimedia/gstreamer1/plugins-base

d76 2
d82 4
d100 4
a110 6

pre-configure:
	${SUBST_CMD} ${WRKSRC}/modules/spamassassin/evolution-spamassassin.c \
		${WRKSRC}/modules/bogofilter/evolution-bogofilter.c
	perl -pi -e 's,/usr/bin,${LOCALBASE}/bin,g' \
		${WRKSRC}/data/org.gnome.evolution.spamassassin.gschema.xml.in
@


1.192
log
@No need to explicitely depend on gnome-icon-theme anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2013/03/30 11:37:33 ajacoutot Exp $
d16 1
a16 1
REVISION-main=		0
d45 1
a45 1
WANTLIB-main += soup-2.4 gstreamer-0.10 soup-gnome-2.4 webkitgtk-3.0
@


1.191
log
@Mark broken for now; needs a newer webkit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2013/03/11 11:23:50 espie Exp $
d16 2
d58 1
a58 2
			devel/iso-codes \
			x11/gnome/icon-theme
d72 1
a72 2
			devel/gsettings-desktop-schemas \
			x11/gnome/icon-theme
@


1.190
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.189 2013/03/07 08:56:00 ajacoutot Exp $
@


1.189
log
@Update to evolution-3.6.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2013/01/30 07:21:01 ajacoutot Exp $
a29 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.188
log
@Merge upstream fixes for the followings nasty bugs:
#692777 - Crash on folder rename
#692009 - text/css always formatted as attachment
#692775 - Double-quoting message with HTML and text
#692783 - Crash on edit prompt cancel
#692781 - Abort on book failure during contact import
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2013/01/24 10:12:11 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.6.3
a12 3

REVISION-main=		3
REVISION-plugins=	0
@


1.187
log
@Fix path to spamc and spamd.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2013/01/24 08:06:00 ajacoutot Exp $
d14 2
a15 1
REVISION-main=		2
@


1.186
log
@Bug #680537 - Reply to individual message in digest generates empty body
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2013/01/23 15:15:00 ajacoutot Exp $
d14 1
a14 1
REVISION-main=		1
d113 2
@


1.185
log
@Bug #639698 - Crash in mail_shell_view_execute_search()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2013/01/22 07:07:58 ajacoutot Exp $
d14 1
a14 1
REVISION-main=		0
@


1.184
log
@Bugfix update to evolution-3.6.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2013/01/07 11:37:29 ajacoutot Exp $
d13 2
@


1.183
log
@Fix sub-version string.
While here, sort PLIST-plugins.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2012/11/11 18:51:25 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.6.2
a13 3
REVISION-main=		0
REVISION-plugins=	0

d56 1
a56 1
			devel/gsettings-desktop-schemas>=3.6.0 \
d62 1
a62 1
			www/gtkhtml4>=3.6.0
d69 1
a69 1
			x11/gnome/desktop>=3.6.0
d72 1
a72 1
			devel/gsettings-desktop-schemas>=3.6.0 \
@


1.182
log
@Bugfix update to evolution-3.6.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2012/10/28 11:24:40 ajacoutot Exp $
d14 3
d105 1
a105 1
			--with-sub-version=" OpenBSD/Ports" \
@


1.181
log
@Bring us closer to uptream and revert the revert... i.e. use unversioned
solibs.
While here, fix RUN_DEPENDS-main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2012/10/18 13:55:27 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.6.1
a13 3
REVISION-main=		2
REVISION-plugins=	2

a26 11

SO_VERSION=		8.0

.for _lib in \
gnomecanvas evolution-utils filter email-utils email-engine eutil \
evolution-a11y emiscwidgets etext etimezonedialog etable menus eshell \
essmime evolution-smime emformat eabutil evolution-addressbook-importers \
econtacteditor econtactlisteditor composer evolution-mail \
evolution-mail-importers evolution-calendar-importers evolution-calendar
SHARED_LIBS+=	${_lib}	${SO_VERSION}
.endfor
@


1.180
log
@time_t -> long
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2012/10/16 11:56:11 ajacoutot Exp $
d14 2
a15 2
REVISION-main=		1
REVISION-plugins=	1
d34 5
a38 6
composer eabutil econtacteditor econtactlisteditor email-engine \
email-utils emformat emiscwidgets eshell essmime etable etext \
etimezonedialog eutil evolution-a11y evolution-addressbook-importers \
evolution-calendar-importers evolution-calendar \
evolution-mail-importers evolution-mail \
evolution-smime filter gnomecanvas menus
a61 8
WANTLIB-plugins += lib/evolution/${R}/composer
WANTLIB-plugins += lib/evolution/${R}/email-engine
WANTLIB-plugins += lib/evolution/${R}/email-utils
WANTLIB-plugins += lib/evolution/${R}/emiscwidgets
WANTLIB-plugins += lib/evolution/${R}/eshell
WANTLIB-plugins += lib/evolution/${R}/eutil
WANTLIB-plugins += lib/evolution/${R}/evolution-calendar
WANTLIB-plugins += lib/evolution/${R}/evolution-mail
d91 1
a91 1
RUN_DEPENDS-main=	multimedia/gstreamer1/plugins-base
a93 1
			mail/evolution,-main=${GNOME_VERSION} \
d96 4
a121 31
# Revert 160006402248075b95c98e9e34d4538670ba7480
# (Add -avoid-version to LDFLAGS)
# https://bugzilla.gnome.org/show_bug.cgi?id=591436
# This is needed because OpenBSD cannot link to unversioned SOLIBS
# (evolution-rss needs to link to eutil, eshell, email-engine...).
REVERT_BZ591436=a11y/Makefile.in \
		addressbook/gui/contact-editor/Makefile.in \
		addressbook/gui/contact-list-editor/Makefile.in \
		addressbook/importers/Makefile.in \
		addressbook/util/Makefile.in \
		calendar/gui/Makefile.in \
		calendar/importers/Makefile.in \
		composer/Makefile.in \
		e-util/Makefile.in \
		em-format/Makefile.in \
		filter/Makefile.in \
		libemail-engine/Makefile.in \
		libemail-utils/Makefile.in \
		libgnomecanvas/Makefile.in \
		mail/Makefile.in \
		mail/importers/Makefile.in \
		shell/Makefile.in \
		smclient/Makefile.in \
		smime/gui/Makefile.in \
		smime/lib/Makefile.in \
		widgets/e-timezone-dialog/Makefile.in \
		widgets/menus/Makefile.in \
		widgets/misc/Makefile.in \
		widgets/table/Makefile.in \
		widgets/text/Makefile.in

a122 1
	for i in ${REVERT_BZ591436}; do perl -pi -e 's,-avoid-version,,g' ${WRKSRC}/$${i}; done
@


1.179
log
@Fix dependencies after e-d-s moved back to using libgnome-keyring.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2012/10/14 09:20:59 ajacoutot Exp $
d14 2
a15 2
REVISION-main=		0
REVISION-plugins=	0
@


1.178
log
@Bugfix update to evolution-3.6.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2012/10/04 13:58:17 ajacoutot Exp $
d13 3
@


1.177
log
@Merge a slightly modified version of this patch that I committed upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2012/10/03 15:57:18 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.6.0
a12 3

REVISION-main=		4
REVISION-plugins=	2
@


1.176
log
@Fix depends after e-d-s move to libsecret.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2012/10/01 15:01:14 ajacoutot Exp $
d14 1
a14 1
REVISION-main=		3
@


1.175
log
@Sync wantlib afer e-d-s migration to libsecret.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2012/10/01 14:09:12 ajacoutot Exp $
d14 2
a15 2
REVISION-main=		2
REVISION-plugins=	1
@


1.174
log
@I hate you make plist...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2012/09/29 07:21:49 ajacoutot Exp $
d14 1
a14 1
REVISION-main=		1
@


1.173
log
@Make this Makefile human-readable and fix dependencies while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2012/09/28 14:37:27 ajacoutot Exp $
d15 1
a15 1
REVISION-plugins=	0
@


1.172
log
@LIB_DEPENDS on www/webkit,gtk3 -- yelp (which brings webkit) is only a
RUN_DEPENDS, not BUILD_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2012/09/28 14:34:30 ajacoutot Exp $
d14 2
a15 1
REVISION-main=		0
d74 3
a76 3
MODULES=		devel/gettext \
			x11/gnome \
			devel/dconf
d79 1
a79 1
			x11/gnome/icon-theme \
d81 1
a81 1
			devel/gsettings-desktop-schemas>=3.6.0
d88 2
d91 2
a92 4
			x11/gnome/desktop>=3.6.0 \
			databases/openldap \
			audio/libcanberra,-gtk3 \
			www/webkit,gtk3
d95 2
a96 2
			x11/gnome/icon-theme \
			devel/gsettings-desktop-schemas>=3.6.0
d100 1
a100 1
RUN_DEPENDS-plugins=	multimedia/gstreamer1/plugins-base
a105 2
LIBTOOL_FLAGS=		--tag=disable-static

d109 4
d114 1
a115 1

a118 4
MODGNOME_CPPFLAGS=	-I${X11BASE}/include -DBOGOFILTER_BINARY="\\\"${LOCALBASE}/bin/bogofilter\\\""
# without --as-needed, evolution takes 20 minutes (yes, 20!) to start
MODGNOME_LDFLAGS=	-L${X11BASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib \
				-Wl,--as-needed
a132 9
.for _lib in \
composer eabutil econtacteditor econtactlisteditor email-engine \
email-utils emformat emiscwidgets eshell essmime etable etext \
etimezonedialog eutil evolution-a11y evolution-addressbook-importers \
evolution-calendar-importers evolution-calendar \
evolution-mail-importers evolution-mail \
evolution-smime filter gnomecanvas menus
SHARED_LIBS+=   ${_lib} ${SO_VERSION}
.endfor
@


1.171
log
@No more evolution-exchange.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2012/09/28 13:49:03 ajacoutot Exp $
d14 2
d90 2
a91 1
			audio/libcanberra,-gtk3
@


1.170
log
@Update to evolution-3.6.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2012/09/01 14:36:57 ajacoutot Exp $
a15 1
# mail/evolution-exchange
@


1.169
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2012/08/28 15:27:49 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.4.4
a13 3
REVISION-main=		1
REVISION-plugins=	1

d29 1
a29 1
SO_VERSION=		7.0
d32 6
a37 6
gnomecanvas evolution-utils filter email-utils email-engine eutil \
evolution-a11y emiscwidgets etext etimezonedialog etable menus eshell \
essmime evolution-smime emformat eabutil \
evolution-addressbook-importers econtacteditor econtactlisteditor \
composer evolution-mail evolution-mail-importers \
evolution-calendar-importers evolution-calendar evolution-mail-settings
d47 1
a47 1
WANTLIB += atk-1.0 c cairo camel-1.2 canberra ebook-1.2 ecal-1.2
d50 1
a50 2
WANTLIB += gtkhtml-editor-4.0 ical notify pango-1.0 pangocairo-1.0
WANTLIB += pthread xml2
d53 2
a54 1
WANTLIB-main += ICE SM cairo-gobject canberra-gtk3 dbus-glib-1 ebackend-1.2
d57 1
a57 2
WANTLIB-main += soup-2.4
#WANTLIB-main += lib/evolution/${R}/evolution-a11y
d60 1
a60 1
WANTLIB-plugins += gstreamer-0.10 pst
a61 1
WANTLIB-plugins += lib/evolution/${R}/eabutil
a63 1
WANTLIB-plugins += lib/evolution/${R}/emformat
a65 2
WANTLIB-plugins += lib/evolution/${R}/etable
WANTLIB-plugins += lib/evolution/${R}/etext
a68 3
WANTLIB-plugins += lib/evolution/${R}/filter
WANTLIB-plugins += lib/evolution/${R}/gnomecanvas
WANTLIB-plugins += lib/evolution/${R}/menus
a73 1
			devel/gconf2 \
a76 1
			misc/shared-mime-info \
d79 1
a79 1
			devel/gsettings-desktop-schemas
d82 2
a83 2
			devel/libnotify>=0.7.2 \
			www/gtkhtml4>=4.1.91
d87 1
a87 1
			x11/gnome/desktop \
d93 5
a97 1
			devel/gsettings-desktop-schemas
d101 1
a101 5
			converters/libpst>=0.6.54 \
			multimedia/gstreamer-0.10/core
# gstreamer-plugins-good is needed for the audio-inline plugin
RUN_DEPENDS-plugins=	${MODGCONF2_RUN_DEPENDS} \
			multimedia/gstreamer-0.10/plugins-good
a107 1
MODGCONF2_SCHEMAS_DIR=	evolution
a119 5
			--enable-plugins=all \
			--disable-nm \
			--disable-connman \
			--disable-mono \
			--disable-python \
d137 1
a137 1
evolution-mail-importers evolution-mail-settings evolution-mail \
a147 1
		capplet/settings/Makefile.in \
a174 3
# originally designed for MeeGo (https://bugzilla.gnome.org/show_bug.cgi?id=654525)
	rm ${PREFIX}/bin/evolution-settings
	rm ${PREFIX}/share/applications/evolution-settings.desktop
@


1.168
log
@Pass -Wl,--as-needed unconditionally. We need this otherwise evolution
will take 20 minutes to start (this is _not_ a joke).
If you see _any_ regression with this commit, please talk to me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2012/08/13 09:16:42 jasper Exp $
d14 2
a15 2
REVISION-main=		0
REVISION-plugins=	0
@


1.167
log
@- update to 3.4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2012/07/12 12:04:38 ajacoutot Exp $
d14 3
d50 5
a54 15
WANTLIB += GL ICE SM X11 Xau Xcomposite Xcursor
WANTLIB += Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender
WANTLIB += Xxf86vm asn1 atk-1.0 c cairo cairo-gobject camel-1.2
WANTLIB += canberra com_err crypto
WANTLIB += db dbus-1 drm ebackend-1.2 ebook-1.2 ecal-1.2
WANTLIB += edataserver-1.2 edataserverui-3.0 enchant
WANTLIB += expat fontconfig freetype gailutil-3
WANTLIB += gcrypt gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gnome-desktop-3 gnome-keyring gobject-2.0
WANTLIB += gpg-error gssapi gthread-2.0 gtk-3 gtkhtml-4.0 gtkhtml-editor-4.0
WANTLIB += ical icalss icalvcal krb5 ffi dbus-glib-1
WANTLIB += m notify nspr4 nss3 nssutil3 pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 plc4 plds4 png pthread
WANTLIB += pthread-stubs smime3 softokn3 soup-2.4 sqlite3 ssl3
WANTLIB += xcb xcb-render xcb-shm xml2 z stdc++
d57 5
a61 2
WANTLIB-main += canberra-gtk3 gdata gweather-3 ldap-2.4 ltdl ogg
WANTLIB-main += vorbis vorbisfile goa-1.0 soup-gnome-2.4
a74 1
WANTLIB-plugins += lib/evolution/${R}/evolution-a11y
a95 2
			security/nss \
			x11/gnome/desktop \
d99 2
d129 1
a190 5

# needed to prevent lazy bindings failures on pthreads(3) functions
post-configure:
	perl -pi -e 's|-Wl,--as-needed||g' \
		${WRKBUILD}/{shell,calendar/alarm-notify,plugins/backup-restore,capplet,capplet/settings}/Makefile
@


1.166
log
@Remove some useless configure args.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2012/07/08 14:30:00 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.4.3
a13 3
REVISION-main=		0
REVISION-plugins=	0

d99 1
a99 1
LIB_DEPENDS=		databases/evolution-data-server>=3.4.3 \
@


1.165
log
@Use autoconf 2.69.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2012/07/08 06:09:45 ajacoutot Exp $
a142 1
			--disable-sens \
a145 1
			--disable-contact-maps \
a149 3

# no gtkimageview release for gtk+3
CONFIGURE_ARGS+=	--disable-image-inline
@


1.164
log
@Remove unused configure args.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2012/06/18 11:46:40 jasper Exp $
d14 3
d133 1
a133 1
AUTOCONF_VERSION=	2.68
@


1.163
log
@- update to 3.4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2012/06/15 08:32:16 ajacoutot Exp $
a144 1
			--without-clutter \
@


1.162
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2012/05/14 09:58:59 ajacoutot Exp $
d9 1
a9 2
GNOME_VERSION=		3.4.2
REVISION-main=		0
d99 1
a99 1
LIB_DEPENDS=		databases/evolution-data-server>=3.2.2 \
@


1.161
log
@Bugfix update to evolution-3.4.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2012/04/23 06:59:23 jasper Exp $
d10 1
@


1.160
log
@- update to 3.4.1
* bugfixes and translation updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2012/04/07 13:31:29 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.4.1
@


1.159
log
@Sync comments.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2012/03/30 09:00:29 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.4.0.1
a12 2

REVISION-main=		1
@


1.158
log
@Don't ship evolution-settings, it was designed for MeeGo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2012/03/29 16:39:36 ajacoutot Exp $
a15 1
# Only get the first x.y which is needed in the PLIST.
@


1.157
log
@Remove -Wl,--as-needed from alarm-notify; it makes it crash with the
(in)famous lazy binding failed on pthread_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2012/03/29 06:56:25 ajacoutot Exp $
d14 1
a14 1
REVISION-main=		0
d68 1
a68 1
WANTLIB-main += vorbis vorbisfile goa-1.0
d214 1
@


1.156
log
@Update to evolution-3.4.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2012/02/18 18:40:18 ajacoutot Exp $
d14 2
d208 1
a208 1
		${WRKBUILD}/{shell,calendar/gui/alarm-notify,plugins/backup-restore,capplet,capplet/settings}/Makefile
@


1.155
log
@Extend+sync comment about VERSION sync.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2012/01/09 18:26:31 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.2.3
a13 2
REVISION-plugins=	0

d30 1
a30 1
SO_VERSION=		6.0
d33 6
a38 5
gnomecanvas eutil evolution-a11y filter emiscwidgets etext \
etimezonedialog etable menus eshell essmime evolution-smime emformat \
eabutil evolution-addressbook-importers econtacteditor \
econtactlisteditor composer evolution-mail evolution-mail-importers \
evolution-calendar evolution-mail-settings evolution-calendar-importers
d51 1
a51 1
WANTLIB += camel-provider-1.2 canberra com_err crypto
d72 2
d91 2
a92 1
			devel/gconf2
d100 1
a100 6
RUN_DEPENDS-main=	${RUN_DEPENDS} \
			x11/gnome/icon-theme \
			devel/gsettings-desktop-schemas
LIB_DEPENDS-main=	${LIB_DEPENDS} \
			databases/evolution-data-server>=3.2.2 \
			databases/openldap \
d104 4
a107 1
			www/gtkhtml4>=4.1.91 \
d110 4
d118 1
a118 1
# needed for the audio-inline plugin
d157 41
d199 1
@


1.154
log
@Add a patch from upstream to allow building with libpst->=0.6.54.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2012/01/09 14:31:03 ajacoutot Exp $
d17 1
a17 2
# NOTE: when major version changes, increment EVO_VERSION accordingly 
# and bump:
@


1.153
log
@Bugfix update to evolution-3.2.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2011/12/29 09:26:11 ajacoutot Exp $
d14 2
d113 1
a113 1
			converters/libpst \
@


1.152
log
@Tweak patches to please our time_t
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2011/12/03 18:35:11 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		3.2.2
a13 3
REVISION-main=		3
REVISION-plugins=	2

d70 1
a71 1
WANTLIB-plugins += lib/evolution/${R}/composer
@


1.151
log
@Adapt after gtk+2,-guic split.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2011/11/28 12:32:04 ajacoutot Exp $
d14 2
a15 2
REVISION-main=		2
REVISION-plugins=	1
@


1.150
log
@Move the pst importer plugin into -plugins where it belongs.
Set SHARED_ONLY and merge PLISTs accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2011/11/22 15:29:44 jasper Exp $
d14 1
a14 1
REVISION-main=		1
a100 1
			x11/hicolor-icon-theme \
a101 1
			${MODGNOME_RUN_DEPENDS_yelp} \
d124 1
@


1.149
log
@- tighten dependency on eds
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.148 2011/11/15 17:12:49 ajacoutot Exp $
d14 2
a15 2
REVISION-main=		0
REVISION-plugins=	0
d68 1
a68 1
WANTLIB-main += canberra-gtk3 gdata gweather-3 ldap-2.4 ltdl ogg pst
d72 1
a72 1
WANTLIB-plugins += gstreamer-0.10
a105 1
			converters/libpst \
d116 1
d122 2
d137 2
a138 1
CONFIGURE_ARGS=		--enable-plugins=all \
d166 1
@


1.148
log
@Mention evolution-ews in there, as reminded by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2011/11/14 14:59:53 ajacoutot Exp $
d12 1
d105 1
a105 1
			databases/evolution-data-server>=3.2.1 \
@


1.147
log
@Better evolution-plugins dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2011/11/14 13:52:39 jasper Exp $
d17 2
a19 1
# mail/evolution-exchange
@


1.146
log
@- bugfix update to 3.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2011/10/29 08:12:32 ajacoutot Exp $
d12 2
d112 1
a112 1
			mail/evolution,-main>=${GNOME_VERSION} \
@


1.145
log
@Sync dependencies after gconf2 lost its dependency to ORBit.
This should cover all fallout but there may be some dark corners which I
missed...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2011/10/16 19:03:34 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		3.2.1
a10 3

REVISION-main=		1
REVISION-plugins=	1
@


1.144
log
@Fix WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2011/10/16 18:29:46 jasper Exp $
d12 2
a13 2
REVISION-main=		0
REVISION-plugins=	0
d48 1
a48 1
WANTLIB += GL ICE ORBit-2 SM X11 Xau Xcomposite Xcursor
@


1.143
log
@- update to 3.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2011/10/03 16:33:53 ajacoutot Exp $
d12 3
d58 1
a58 1
WANTLIB += ical icalss icalvcal krb5 ffi kvm dbus-glib-1
@


1.142
log
@Fix path to the antispam utilities.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2011/10/01 10:44:35 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		3.2.0
a11 3
REVISION-main=		5
REVISION-plugins=	2

d101 1
a101 1
			databases/evolution-data-server>=3.2.0 \
@


1.141
log
@Fix a warning.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2011/09/28 09:54:16 jasper Exp $
d12 1
a12 1
REVISION-main=		4
d149 4
@


1.140
log
@tighten e-d-s dependency;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2011/09/28 09:51:36 jasper Exp $
d12 1
a12 1
REVISION-main=		3
@


1.139
log
@sync after recent gnome.port.mk CONFIGURE_ENV changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2011/09/26 17:05:04 ajacoutot Exp $
d12 1
a12 1
REVISION-main=		2
d104 1
a104 1
			databases/evolution-data-server>=3.1.91 \
@


1.138
log
@Enable gnome-online-accounts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2011/09/26 13:30:53 ajacoutot Exp $
d128 3
a130 5
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include \
				-DBOGOFILTER_BINARY="\\\"${LOCALBASE}/bin/bogofilter\\\""" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}lib \
				-Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib \
				-Wl,--as-needed"
@


1.137
log
@Missing BUILD+RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2011/09/26 09:24:08 ajacoutot Exp $
d12 2
a13 2
REVISION-main=		1
REVISION-plugins=	1
d58 1
a58 1
WANTLIB += ical icalss icalvcal krb5 ffi kvm
d66 1
a66 1
WANTLIB-main += vorbis vorbisfile
a135 1
			--disable-goa \
@


1.136
log
@Regen WANTLIB to unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2011/09/25 08:04:45 ajacoutot Exp $
d12 2
a13 2
REVISION-main=		0
REVISION-plugins=	0
d94 2
a95 1
			devel/iso-codes
d100 2
a101 1
			${MODGNOME_RUN_DEPENDS_yelp}
@


1.135
log
@Update to stable evolution-3.2.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2011/09/22 10:30:43 ajacoutot Exp $
d12 3
d48 1
a48 1
WANTLIB += GL ICE ORBit-2 SM X11 X11-xcb Xau Xcomposite Xcursor
d54 1
a54 1
WANTLIB += execinfo expat fontconfig freetype gailutil-3
d62 1
a62 2
WANTLIB += startup-notification-1 stdc++
WANTLIB += xcb xcb-aux xcb-render xcb-shm xml2 z
@


1.134
log
@Comment libtool files for modules and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2011/09/21 13:27:59 jasper Exp $
d7 1
a7 1
GNOME_VERSION=		3.1.92
a11 2
REVISION-main=		0

d18 1
a18 2
#R=			${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
R=			3.2 # XXX
d49 1
a49 1
WANTLIB += db dbus-1 dbus-glib-1 drm ebackend-1.2 ebook-1.2 ecal-1.2
d55 1
a55 1
WANTLIB += ical icalss icalvcal krb5
d59 1
a59 1
WANTLIB += startup-notification-1 stdc++ unique-3.0
a98 1
			devel/libunique3 \
d116 1
a116 1
MODGNOME_DESKTOP_FILE=		Yes
d130 1
a130 2
CONFIGURE_ARGS+=	--disable-gtk-doc \
			--enable-plugins=all \
d133 6
@


1.133
log
@- update to 3.1.92
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2011/09/21 10:12:41 jasper Exp $
d11 2
@


1.132
log
@adjust comment after evolution-plugin-rss rename
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2011/09/20 21:04:25 jasper Exp $
d7 1
a7 2
GNOME_VERSION=		3.0.3
REVISION =		0
d18 2
a19 1
R=			${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
d51 1
a51 1
WANTLIB += edataserver-1.2 edataserverui-3.0 egroupwise-1.2 enchant
d102 1
a102 1
			databases/evolution-data-server>=2.32.2 \
d107 1
a107 1
			www/gtkhtml4 \
d135 1
@


1.131
log
@CONFIGURE_SHARED is now implied by gnome.port.mk, so no need to make it explicit anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2011/09/20 20:51:52 jasper Exp $
d16 1
a16 1
# mail/evolution-plugin-rss
@


1.130
log
@switch to MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2011/09/19 07:39:05 ajacoutot Exp $
d132 1
a132 2
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--disable-gtk-doc \
@


1.129
log
@DESKTOP_FILES => MODGNOME_DESKTOP_FILE, like it should always have been.

discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2011/09/16 10:31:21 espie Exp $
d97 2
a98 1
			x11/gnome/icon-theme
d117 1
a117 1
MODGNOME_HELP_FILES=	Yes
@


1.128
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2011/09/12 12:07:26 jasper Exp $
d117 1
a117 1
DESKTOP_FILES=		Yes
@


1.127
log
@switch the rest of the ports using gnome.port.mk over to .tar.xz where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2011/09/12 07:26:19 ajacoutot Exp $
d8 1
@


1.126
log
@Start the GNOME3 merge armageddon... breakage expected.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/08/31 09:22:41 ajacoutot Exp $
a7 2

EXTRACT_SUFX=		.tar.xz
@


1.125
log
@Fix some warnings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2011/04/22 07:39:37 ajacoutot Exp $
d7 3
a9 1
GNOME_VERSION=		2.32.3
a13 2
REVISION-main=		0

d33 1
a33 1
art_lgpl gnomecanvas eutil evolution-a11y filter emiscwidgets etext \
d41 1
a41 1
# LGPLv2+
d47 37
a83 32
WANTLIB += ICE ORBit-2 SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender asn1
WANTLIB += atk-1.0 c cairo com_err crypto dbus-1 dbus-glib-1
WANTLIB += enchant execinfo expat fontconfig freetype
WANTLIB += gailutil gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gnome-keyring canberra
WANTLIB += gobject-2.0 gpg-error gssapi gthread-2.0 gtk-x11-2.0
WANTLIB += ical krb5 m nspr4 pango-1.0 camel-1.2 camel-provider-1.2
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 plc4 plds4
WANTLIB += png pthread pthread-stubs sqlite3 startup-notification-1
WANTLIB += stdc++ xcb xcb-atom xcb-aux xcb-event xcb-render
WANTLIB += xml2 z gtkhtml-3.14 gtkhtml-editor-3.14
WANTLIB += gdata soup-gnome-2.4 gdata ebook-1.2
WANTLIB += ecal-1.2 edataserver-1.2 edataserverui-1.2 unique-1.0
WANTLIB += gnome-desktop-2 nss3 smime3 ssl3 notify soup-2.4
WANTLIB += GL Xxf86vm db drm ebackend-1.2 egroupwise-1.2
WANTLIB += icalss icalvcal nssutil3 softokn3 xcb-shm

WANTLIB-main += ${WANTLIB} vorbisfile canberra-gtk
WANTLIB-main += gweather icalss icalvcal ogg db gtkimageview
WANTLIB-main += icalss icalvcal ldap-2.4 ltdl ogg pst softokn3
WANTLIB-main += ebackend-1.2 egroupwise-1.2 vorbis
WANTLIB-main += ltdl ogg vorbis vorbisfile

WANTLIB-plugins += ${WANTLIB} gstreamer-0.10
WANTLIB-plugins += lib/evolution/${R}/composer lib/evolution/${R}/emformat
WANTLIB-plugins += lib/evolution/${R}/eshell lib/evolution/${R}/evolution-calendar
WANTLIB-plugins += lib/evolution/${R}/evolution-mail lib/evolution/${R}/emiscwidgets
WANTLIB-plugins += lib/evolution/${R}/eutil lib/evolution/${R}/art_lgpl
WANTLIB-plugins += lib/evolution/${R}/etable lib/evolution/${R}/etext
WANTLIB-plugins += lib/evolution/${R}/evolution-a11y lib/evolution/${R}/menus
WANTLIB-plugins += lib/evolution/${R}/filter lib/evolution/${R}/gnomecanvas
d100 1
a100 1
			devel/libunique \
a104 2
			devel/libsoup \
			graphics/gtkimageview \
d107 2
a108 2
			www/gtkhtml3 \
			audio/libcanberra,-gtk
d111 2
a112 2
			multimedia/gstreamer-0.10/core \
			mail/evolution,-main>=${GNOME_VERSION}
d114 2
a115 1
RUN_DEPENDS-plugins=	multimedia/gstreamer-0.10/plugins-good
d123 9
a131 1
CONFIGURE_STYLE=	gnu
a133 2
			--enable-nss=yes \
			--enable-smime=yes \
d135 1
a135 1
			--disable-mono \
d139 4
a142 8
			--with-krb5-includes=/usr/include/kerberosV \
			--disable-nm \
			--disable-python
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib \
				-Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib \
				-Wl,--as-needed" \
			PTHREAD_LIB="-pthread"
a145 4
pre-configure:
	${SUBST_CMD} ${WRKSRC}/plugins/bogo-junk-plugin/bf-junk-filter.c \
		${WRKSRC}/plugins/sa-junk-plugin/em-junk-filter.c

d149 1
a149 1
		${WRKBUILD}/{shell,calendar/gui/alarm-notify,plugins/backup-restore}/Makefile
d153 2
@


1.124
log
@Bugfix update to evolution-2.32.3.
* fixes a couple of crashes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2011/04/21 07:05:36 ajacoutot Exp $
d11 2
@


1.123
log
@Fix build/run with new libnotify.

tested in a bulk by landry, thanks!
ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2011/04/16 05:50:25 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		2.32.2
a10 3

REVISION-main=		3
REVISION-plugins=	0
@


1.122
log
@Fix a couple of warnings.
Remove 2 unneeded patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2011/04/13 06:47:42 ajacoutot Exp $
d9 5
a13 1
REVISION-main=		2
a23 6
# -plugins depends on the exact version of -main, so whenever -main is
# bumped, -plugins needs a bump too
#PATCH_NUMBER=		p0
PKGNAME-main=		${DISTNAME}${PATCH_NUMBER}
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}${PATCH_NUMBER}

d54 1
a54 1
WANTLIB += gnutls gobject-2.0 gpg-error gssapi gthread-2.0 gtk-x11-2.0
d58 1
a58 1
WANTLIB += stdc++ tasn1 xcb xcb-atom xcb-aux xcb-event xcb-render
d60 1
a60 1
WANTLIB += gdata proxy soup-gnome-2.4 gdata ebook-1.2
d100 1
a100 1
			devel/libnotify \
d110 1
a110 1
			${PKGNAME-main}:mail/evolution,-main
@


1.121
log
@Cope with recent libcanberra subpackaging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2011/03/29 11:49:39 ajacoutot Exp $
d9 1
a9 1
REVISION-main=		1
@


1.120
log
@Add a note about bogofilter/p5-Mail-SpamAssassin.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2011/03/07 19:36:17 ajacoutot Exp $
d9 1
a9 1
REVISION-main=		0
d72 1
a72 1
WANTLIB-main += canberra-gtk ltdl ogg vorbis vorbisfile
d108 1
a108 1
			audio/libcanberra
@


1.119
log
@Update to evolution-2.32.2.
Unbreak with new gtk+2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2011/01/12 08:05:11 pea Exp $
d8 2
@


1.118
log
@Correctly fixes wantlib
spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2011/01/07 10:31:16 pea Exp $
d7 1
a7 2
GNOME_VERSION=		2.32.1
REVISION-main=		1
d98 1
a98 1
			databases/evolution-data-server \
@


1.117
log
@Fix wantlib after OpenLDAP upgrade

spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2010/11/19 07:23:06 espie Exp $
d8 1
a8 1
REVISION-main=		0
d69 1
a69 1
WANTLIB-main += icalss icalvcal ldap ltdl ogg pst softokn3
@


1.116
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2010/11/16 08:55:49 ajacoutot Exp $
d8 1
d69 1
a69 1
WANTLIB-main += icalss icalvcal ldap-2.3 ltdl ogg pst softokn3
@


1.115
log
@Bugfix update to evolution-2.32.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2010/10/24 11:44:37 ajacoutot Exp $
d87 4
a90 4
BUILD_DEPENDS=		::devel/bison \
			::misc/shared-mime-info \
			::x11/gnome/icon-theme \
			::devel/iso-codes
d93 2
a94 2
			::x11/hicolor-icon-theme \
			::x11/gnome/icon-theme
d96 11
a106 11
			::devel/libunique \
			::converters/libpst \
			::databases/evolution-data-server \
			::databases/openldap \
			::devel/libnotify \
			::devel/libsoup \
			::graphics/gtkimageview \
			::security/nss \
			::x11/gnome/desktop \
			::www/gtkhtml3 \
			::audio/libcanberra
d109 2
a110 2
			::multimedia/gstreamer-0.10/core \
			:${PKGNAME-main}:mail/evolution,-main
d112 1
a112 1
RUN_DEPENDS-plugins=	::multimedia/gstreamer-0.10/plugins-good
@


1.114
log
@Don't link all binaries with --as-needed to prevent lazy binding
failures on pthreads(3) functions.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2010/10/23 16:30:01 ajacoutot Exp $
d7 1
a7 3
GNOME_VERSION=		2.32.0
REVISION-main=		3
REVISION-plugins=	3
d63 2
a64 3
WANTLIB += GL Xxf86vm canberra-gtk db drm ebackend-1.2 egroupwise-1.2
WANTLIB += icalss icalvcal ltdl nssutil3 ogg softokn3 vorbis vorbisfile
WANTLIB += xcb-shm
d66 1
a66 1
WANTLIB-main += ${WANTLIB} vorbisfile canberra-gtk sasl2 ssl
d69 2
a70 1
WANTLIB-main += ebackend-1.2 egroupwise-1.2 vorbis lber-2.3
d76 1
a76 4
WANTLIB-plugins += lib/evolution/${R}/eutil
WANTLIB-plugins += lib/evolution/${R}/art_lgpl lib/evolution/${R}/econtacteditor
WANTLIB-plugins += lib/evolution/${R}/econtactlisteditor
WANTLIB-plugins += lib/evolution/${R}/essmime
d78 1
a78 4
WANTLIB-plugins += lib/evolution/${R}/etimezonedialog
WANTLIB-plugins += lib/evolution/${R}/evolution-a11y
WANTLIB-plugins += lib/evolution/${R}/evolution-calendar-importers
WANTLIB-plugins += lib/evolution/${R}/evolution-smime.
a79 1
WANTLIB-plugins += lib/evolution/${R}/menus lib/evolution/${R}/eabutil
@


1.113
log
@Remove ltasneededhack: use our own LIBTOOL and add -Wl,--as-needed to
LDFLAGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2010/10/23 13:01:26 ajacoutot Exp $
d8 2
a9 2
REVISION-main=		2
REVISION-plugins=	2
d153 5
@


1.112
log
@Fix SHARED_LIBS, regen WANTLIB and PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2010/10/18 13:48:51 jasper Exp $
d8 2
a9 2
REVISION-main=		1
REVISION-plugins=	1
d143 3
a145 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib" \
a148 9

# ltasneededhack in bsd.gnome.mk from FreeBSD ports
USE_LIBTOOL=	gnu
LIBTOOL=	${WRKDIR}/bin/libtool
post-patch:
	sed '/^archive_cmds=/s/-shared/-shared -Wl,--as-needed/ ; \
		/^archive_expsym_cmds=/s/-shared/-shared -Wl,--as-needed/' \
		${LOCALBASE}/bin/libtool > ${WRKDIR}/bin/libtool
	chmod +x ${WRKDIR}/bin/libtool
@


1.111
log
@- use_x11 comes from gnome.port.mk now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2010/10/11 08:15:27 jasper Exp $
d8 2
a9 2
REVISION-main=	0
REVISION-plugins=	0
d40 1
a40 2
evolution-calendar-importers evolution-calendar evolution-mail-settings \
evolution-calendar-importer
d53 1
a53 1
WANTLIB += eggdbus-1 enchant execinfo expat fontconfig freetype
d61 1
a61 1
WANTLIB += xcb-render-util xml2 z gtkhtml-3.14 gtkhtml-editor-3.14
d65 3
d69 1
a69 1
WANTLIB-main += ${WANTLIB} vorbisfile canberra-gtk
d71 2
a72 2
WANTLIB-main += icalss icalvcal ldap ltdl ogg pst softokn3
WANTLIB-main += ebackend-1.2 egroupwise-1.2 vorbis
d79 10
@


1.110
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2010/09/30 08:01:26 ajacoutot Exp $
a110 1
USE_X11=		Yes
@


1.109
log
@Update to evolution-2.32.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2010/09/29 17:15:55 ajacoutot Exp $
d8 2
d56 1
a56 1
WANTLIB += glib-2.0 glitz gmodule-2.0 gnome-keyring canberra
@


1.108
log
@Set USE_LIBTOOL to gnu as we are using a libtool hack here.
breakage spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2010/08/22 10:29:40 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		2.30.3
d33 7
a39 5
.for _lib in eutil econduit evolution-a11y etable etext emiscwidgets \
etimezonedialog menus eshell filter essmime evolution-smime eabutil \
evolution-addressbook-importers econtacteditor econtactlisteditor \
evolution-calendar-importers evolution-mail-importers emformat \
composer evolution-mail evolution-calendar evolution-mail-settings
d50 1
a50 1
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender art_lgpl_2 asn1
d54 1
a54 1
WANTLIB += glib-2.0 glitz gmodule-2.0 gnome-keyring gnomecanvas-2
d56 1
a56 1
WANTLIB += ical krb5 m nspr4 pango-1.0
d60 15
a74 10
WANTLIB += xcb-render-util xml2 z


WANTLIB-main  = ${WANTLIB}
WANTLIB-main += db gweather icalss icalvcal ogg

WANTLIB-plugins  = ${WANTLIB}
WANTLIB-plugins += camel-1.2 camel-provider-1.2 ebook-1.2 ecal-1.2 edataserver-1.2
WANTLIB-plugins += edataserverui-1.2 gnome-desktop-2 gtkhtml-3.14 gtkhtml-editor
WANTLIB-plugins += notify nss3 smime3 soup-2.4 ssl3
a86 3
LIB_DEPENDS=		canberra::audio/libcanberra \
			unique-1.0::devel/libunique

d91 11
a101 12
			pst::converters/libpst \
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,gdata-1.2,gdata-google-1.2:evolution-data-server->=2.30.2:databases/evolution-data-server \
			ldap.>=7::databases/openldap \
			notify.>=2::devel/libnotify \
			soup-2.4::devel/libsoup \
			gtkimageview::graphics/gtkimageview \
			nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss \
			gnome-desktop-2::x11/gnome/desktop \
			gtkhtml-3.14.>=1.0,gtkhtml-editor::www/gtkhtml3 \
			canberra-gtk::audio/libcanberra \
			vorbis,vorbisfile::audio/libvorbis \
			ltdl::devel/libtool,-ltdl
d104 2
a105 2
			gstreamer-0.10::multimedia/gstreamer-0.10/core \
			lib/evolution/${R}/composer.>=6,lib/evolution/${R}/emformat,lib/evolution/${R}/eshell,lib/evolution/${R}/evolution-calendar,lib/evolution/${R}/evolution-mail,lib/evolution/${R}/emiscwidgets,lib/evolution/${R}/eutil:${PKGNAME-main}:mail/evolution,-main
d118 1
a118 1
			--disable-pilot-conduits \
@


1.107
log
@Bugfix update to evolution-2.30.3.
Remove MESSAGE (will be put in a more generic place).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2010/06/21 05:17:04 ajacoutot Exp $
d133 1
@


1.106
log
@Bugfixe update to evolution-2.30.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2010/06/15 10:51:38 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		2.30.2
d33 2
a34 3
.for _lib in eutil econduit evolution-a11y evolution-calendar-a11y \
evolution-widgets-a11y evolution-addressbook-a11y etable etext emiscwidgets \
efilterbar etimezonedialog menus eshell filter essmime evolution-smime eabutil \
d36 2
a37 3
evolution-calendar-importers evolution-mail-importers evolution-cal-shared \
evolution-mail-shared emformat composer evolution-mail evolution-calendar \
evolution-mail-settings
@


1.105
log
@Remove evo_mail_notifier.png, it's unused and removed upstream.

Add 2 patches from upstream/GNOME bugzilla to prevent crashes:
    GNOME bug 618902 - Crash when viewing/closing messages quickly
    GNOME bug 612082 - Crash in em_format_snoop_type
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2010/06/09 11:43:22 espie Exp $
d7 1
a7 1
GNOME_VERSION=		2.30.1.2
d20 1
a20 1
PATCH_NUMBER=		p3
d90 1
a90 1
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,gdata-1.2,gdata-google-1.2::databases/evolution-data-server \
@


1.104
log
@comment out bogus symlinks for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2010/05/02 14:05:58 ajacoutot Exp $
d20 1
a20 1
PATCH_NUMBER=		p2
@


1.103
log
@Remove non existent directory from rpath.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2010/05/01 10:53:17 ajacoutot Exp $
d20 1
a20 1
PATCH_NUMBER=		p1
@


1.102
log
@Remove unused patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2010/04/27 15:07:50 ajacoutot Exp $
d20 1
a20 1
PATCH_NUMBER=		p0
d32 1
a32 2
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
d129 1
a129 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}/components:${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib" \
@


1.101
log
@"brown paper bag release" update to evolution-2.30.1.2.
* add missing icons
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2010/04/26 19:52:25 ajacoutot Exp $
d20 1
a20 1
#PATCH_NUMBER=		p0
@


1.100
log
@Update the (in)famous evolution to version 2.30.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2010/04/25 08:33:00 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		2.30.1.1
@


1.99
log
@Don't install modules static files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2010/04/22 16:30:02 jasper Exp $
d7 1
a7 1
GNOME_VERSION=		2.30.0.1
d20 1
a20 1
PATCH_NUMBER=		p0
d105 1
a105 1
			lib/evolution/${R}/emiscwidgets,lib/evolution/${R}/eutil:${PKGNAME-main}:mail/evolution,-main
d132 2
@


1.98
log
@- major update evolution to 2.30.0.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2010/04/09 09:02:35 ajacoutot Exp $
d20 1
a20 1
#PATCH_NUMBER=		p0
@


1.97
log
@Mention tracker also needs EVO_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/03/21 10:42:53 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		2.28.3.1
d31 1
a31 1
SO_VERSION=		5.0
d39 2
a40 1
evolution-mail-shared
d50 12
a61 13
WANTLIB += ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite
WANTLIB += Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr
WANTLIB += Xrender art_lgpl_2 asn1 atk-1.0 avahi-client avahi-common
WANTLIB += avahi-glib bonobo-2 bonobo-activation bonoboui-2 c
WANTLIB += cairo com_err crypto dbus-1 dbus-glib-1 enchant execinfo
WANTLIB += expat fontconfig freetype gailutil gcrypt gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0 glitz gmodule-2.0
WANTLIB += gnome-2 gnome-keyring gnomecanvas-2 gnomevfs-2 gnutls
WANTLIB += gobject-2.0 gpg-error gssapi gthread-2.0 gtk-x11-2.0
WANTLIB += ical krb5 m nspr4 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 plc4 plds4 png popt pthread pthread-stubs
WANTLIB += sqlite3 ssl startup-notification-1 stdc++ tasn1 util
WANTLIB += xcb xcb-atom xcb-aux xcb-event xml2 z
a62 2
WANTLIB-main= ${WANTLIB}
WANTLIB-main += db icalss icalvcal
d64 4
a67 1
WANTLIB-plugins= ${WANTLIB}
d69 2
a70 2
WANTLIB-plugins += edataserverui-1.2 gnome-desktop-2 gnomeui-2 gtkhtml-3.14 
WANTLIB-plugins += gtkhtml-editor nss3 smime3 softokn3 soup-2.4 ssl3
d83 3
d91 1
a91 1
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,gdata-1.2,gdata-google-1.2,exchange-storage-1.2.>=3::databases/evolution-data-server \
d95 1
d98 4
a101 2
			gnomeui-2::x11/gnome/libgnomeui \
			gtkhtml-3.14.>=1.0,gtkhtml-editor::www/gtkhtml3
d105 1
a105 1
			lib/evolution/${R}/emiscwidgets,lib/evolution/${R}/eutil,lib/evolution/${R}/evolution-mail-shared:${PKGNAME-main}:mail/evolution,-main
a120 2
			--enable-default-binary \
			--enable-exchange \
d130 2
a131 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}/components:${TRUEPREFIX}/lib/evolution/${R}:${TRUEPREFIX}/lib"
a133 1
# (+patch-plugins_exchange-operations_Makefile_in)
a143 3
	# XXX see patch-plugins_exchange-operations_Makefile_in
	ln -sf ../../addressbook/gui/component/.libs/libevolution-addressbook.so \
		 ${WRKBUILD}/plugins/exchange-operations/libevolution-addressbook.so
a146 5
	# XXX there is a circular linking dependency with some plugins
	# https://bugzilla.gnome.org/show_bug.cgi?id=599336
	mv ${PREFIX}/bin/evolution ${PREFIX}/bin/evolution.bin
	${SUBST_CMD} -c ${FILESDIR}/evolution.sh ${WRKBUILD}/evolution.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/evolution.sh ${PREFIX}/bin/evolution
@


1.96
log
@Update to evolution-2.28.3.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2009/12/28 09:31:08 ajacoutot Exp $
d14 1
@


1.95
log
@Add a PATCH_NUMBER var so that -main and -plugins are always in sync now.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2009/12/28 09:23:10 jasper Exp $
d7 1
a7 1
GNOME_VERSION=		2.28.2
d19 1
a19 1
PATCH_NUMBER=		p0
@


1.94
log
@- when -main is bumped, bump -plugins too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2009/12/21 22:20:12 ajacoutot Exp $
d19 3
a21 2
PKGNAME-main=		${DISTNAME}p0
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p0
@


1.93
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2009/12/14 16:19:12 ajacoutot Exp $
d20 1
a20 1
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}
@


1.92
log
@Update to evolution-2.28.2.
*Lots* of bug fixes, sea changelog for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2009/11/17 23:31:13 ajacoutot Exp $
d19 1
a19 1
PKGNAME-main=		${DISTNAME}
@


1.91
log
@Tweak comment, no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2009/11/14 16:33:16 ajacoutot Exp $
d7 1
a7 1
GNOME_VERSION=		2.28.1
d19 2
a20 2
PKGNAME-main=		${DISTNAME}p1
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p1
@


1.90
log
@Fix and enable exchange operations plugin, needed by upcoming
evolution-exchange.
Rework a bit the nasty hack from previous commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2009/11/11 14:23:05 ajacoutot Exp $
d12 2
a13 2
# mail/evolution-plugin-rss/Makefile
# evolution-exchange
@


1.89
log
@There is a circular linking dependency with some evolution plugins.
Upstream is aware of it and should fix everything for evolution 2.30.

In the meantime, add a (nasty) hack so that we don't end up with
undefined symbols.
Reorder Makefile while here and tweak dependencies.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2009/10/19 20:31:23 jasper Exp $
d11 3
a13 1
# in mail/evolution-plugin-rss/Makefile (and bump).
d19 2
a20 2
PKGNAME-main=		${DISTNAME}p0
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p0
d137 3
d145 1
a145 2
	mv ${PREFIX}/bin/evolution \
		${PREFIX}/libexec/evolution/${R}/evolution
@


1.88
log
@- update evolution to 2.28.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2009/10/13 22:07:04 jasper Exp $
d6 4
d12 2
a13 2
GNOME_PROJECT=		evolution
GNOME_VERSION=		2.28.1
d17 2
a18 2
PKGNAME-main=		${DISTNAME}
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}
d83 1
a83 1
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,gdata-1.2,gdata-google-1.2:evolution-data-server->=2.24.3:databases/evolution-data-server \
d123 1
a123 5
# Only get the first x.y which is needed in the PLIST.
R=			${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
SUBST_VARS=		R

# XXX ltasneededhack in bsd.gnome.mk from FreeBSD ports
a131 1

d138 6
@


1.87
log
@- update evolution to 2.28.0
* among the many, many changes are the pst-importer plugin

if there is any fallout, it'll be fixed soon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2009/08/26 15:38:18 ajacoutot Exp $
d9 1
a9 1
GNOME_VERSION=		2.28.0
@


1.86
log
@This was the second time I got trapped by the fact that -plugins depends
on the exact version of -main.
Add a reminder so I don't forget next time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2009/08/25 20:11:45 naddy Exp $
d9 1
a9 1
GNOME_VERSION=		2.24.5
d13 2
a14 2
PKGNAME-main=		${DISTNAME}p18
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p12
d23 1
a23 1
SO_VERSION=		4.0
d30 2
a31 1
evolution-calendar-importers evolution-mail-importers
d41 21
a61 21
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite \
		Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr \
		Xrender art_lgpl_2 asn1 atk-1.0 bonobo-2 \
		bonobo-activation bonoboui-2 cairo com_err crypto \
		db dbus-1 dbus-glib-1 enchant expat fontconfig freetype \
		gailutil gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 \
		glade-2.0 glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring \
		gnomecanvas-2 gnomeui-2 gnomevfs-2 gnutls gobject-2.0 \
		gpg-error gssapi gthread-2.0 gtk-x11-2.0 krb5 m nspr4 \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1 \
		plc4 plds4 png popt sqlite3 ssl ssl3 stdc++ tasn1 \
		util xml2 z avahi-client avahi-common avahi-glib \
		c pthread pthread-stubs xcb

WANTLIB-main=	${WANTLIB} sasl2

WANTLIB-plugins= ${WANTLIB} \
		camel-1.2 camel-provider-1.2 ebackend-1.2 ebook-1.2 \
		ecal-1.2 edataserver-1.2 edataserverui-1.2 gdata-1.2 \
		gdata-google-1.2 gtkhtml-3.14 gtkhtml-editor notify \
		nss3 smime3 softokn3 soup-2.4
d78 3
a80 2
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,exchange-storage-1.2,gdata-1.2,gdata-google-1.2:evolution-data-server->=2.24.3:databases/evolution-data-server \
			lber.>=7,ldap.>=7::databases/openldap \
d84 2
d90 1
a90 1
			lib/evolution/${R}/eabutil.>=4,lib/evolution/${R}/econtacteditor,lib/evolution/${R}/econtactlisteditor,lib/evolution/${R}/efilterbar,lib/evolution/${R}/emiscwidgets,lib/evolution/${R}/eshell,lib/evolution/${R}/essmime,lib/evolution/${R}/etable,lib/evolution/${R}/etext,lib/evolution/${R}/eutil,lib/evolution/${R}/evolution-a11y,lib/evolution/${R}/evolution-mail-importers,lib/evolution/${R}/evolution-widgets-a11y,lib/evolution/${R}/filter,lib/evolution/${R}/menus,lib/evolution/${R}/evolution-smime:${PKGNAME-main}:mail/evolution,-main
d113 3
a115 1
			--with-krb5-includes=/usr/include/kerberosV
@


1.85
log
@bump -plugins after -main change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2009/08/20 07:52:01 ajacoutot Exp $
d11 2
@


1.84
log
@Allow '@@' in username in CalDav.
See http://bugzilla.gnome.org/show_bug.cgi?id=503662

Issue reported by Stephan A. Rickauer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2009/08/10 06:32:42 kili Exp $
d12 1
a12 1
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p11
@


1.83
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2009/06/28 14:36:31 sthen Exp $
d11 1
a11 1
PKGNAME-main=		${DISTNAME}p17
@


1.82
log
@sync WANTLIB/LIB_DEPENDS and bump; ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2009/06/21 14:41:21 kili Exp $
d11 2
a12 2
PKGNAME-main=		${DISTNAME}p16
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p10
d50 1
a50 1
		c pthread
@


1.81
log
@
-plugins depends on the exact version of -main, so it needs a bump, too.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2009/06/17 19:51:25 ajacoutot Exp $
d11 2
a12 2
PKGNAME-main=		${DISTNAME}p15
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p9
d49 2
a50 1
		util xml2 z avahi-client avahi-common avahi-glib
d52 1
a52 1
WANTLIB-main=	${WANTLIB} c pthread sasl2
d75 1
a75 1
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,exchange-storage-1.2,gdata-1.2,gdata-google-1.2:evolution-data-server->=2.24.3:databases/evolution-data-server \
@


1.80
log
@Disable exchange plugin for now. It does not work and induces some other
issues in evolution.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2009/06/15 06:27:10 ajacoutot Exp $
d12 1
a12 1
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p8
@


1.79
log
@Implement ltasneededhack from FreeBSD ports.
As advertised, it is a hack (that abuses -Wl,--as-needed for plugins)
but it speeds up evolution startup by a factor or 9 (yes...).

While here, re-enable the org.gnome.mail.account plugin which became
usable in the process and s/LOCALBASE/TRUEPREFIX.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2009/06/11 18:27:02 ajacoutot Exp $
d11 1
a11 1
PKGNAME-main=		${DISTNAME}p14
@


1.78
log
@Bump after recent gconf2 MODULE change.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.77 2009/06/10 13:31:56 ajacoutot Exp $

# XXX TODO: the mail-account-disable plugin is not loaded by default:
# it makes right-clicking on a folder very long (the first time)
d11 2
a12 2
PKGNAME-main=		${DISTNAME}p13
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p7
d108 1
a108 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}/components:${TRUEPREFIX}/lib/evolution/${R}:${LOCALBASE}/lib"
d113 10
@


1.77
log
@Install schemas from both subpackages into the same directory
(${SCHEMAS_INSTDIR}). Granted this take one or two more seconds to
install the -plugins subpackage but it allows us to use the generic
gconf-2 goo in PLIST-plugins.

While here, regen wantlib and lib_depends.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2009/06/08 16:58:15 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p12
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p6
@


1.76
log
@Bump after recent gconf2 MODULE changes.

"yep, bumps are cheap" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2009/06/08 09:41:01 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p11
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p5
d44 1
a44 1
		bonobo-activation bonoboui-2 c cairo com_err crypto \
d51 2
a52 2
		plc4 plds4 png popt pthread sqlite3 ssl ssl3 stdc++ tasn1 \
		util xml2 z
d54 1
a54 1
WANTLIB-main=		${WANTLIB} sasl2
d76 2
a77 2
LIB_DEPENDS-main=	${MODGETTEXT_LIB_DEPENDS} \
			camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,exchange-storage-1.2,gdata-1.2,gdata-google-1.2:evolution-data-server->=2.24.3:databases/evolution-data-server \
d84 1
a84 1
LIB_DEPENDS-plugins=	${MODGETTEXT_LIB_DEPENDS} \
d86 1
a86 1
			lib/evolution/${R}/eabutil.>=4,lib/evolution/${R}/econtacteditor,lib/evolution/${R}/econtactlisteditor,lib/evolution/${R}/efilterbar,lib/evolution/${R}/emiscwidgets,lib/evolution/${R}/eshell,lib/evolution/${R}/essmime,lib/evolution/${R}/etable,lib/evolution/${R}/etext,lib/evolution/${R}/eutil,lib/evolution/${R}/evolution-a11y,lib/evolution/${R}/evolution-mail-importers,lib/evolution/${R}/evolution-widgets-a11y,lib/evolution/${R}/filter,lib/evolution/${R}/menus:${PKGNAME-main}:mail/evolution,-main
a116 6
SCHEMAS-plugins= 	apps-evolution-attachment-reminder \
			apps-evolution-mail-notification \
			apps-evolution-mail-prompts-checkdefault \
			apps-evolution-template-placeholders \
			apps_evolution_email_custom_header

a122 4
	${INSTALL_DATA_DIR} ${PREFIX}/${SCHEMAS_INSTDIR}-plugins/
	for i in ${SCHEMAS-plugins} ; do \
		mv ${PREFIX}/${SCHEMAS_INSTDIR}/$$i.schemas \
		${PREFIX}/${SCHEMAS_INSTDIR}-plugins/ ; done
@


1.75
log
@- schemas files for the -plugins subpackage are not installed in the
regular SCHEMAS_INSTDIR

reported by kevlo@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2009/06/07 05:59:47 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p10
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p4
@


1.74
log
@Convert to using the new gconf2.port.mk module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2009/06/01 05:50:43 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p9
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p3
d129 1
a129 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/schemas/evolution-plugins/
d131 2
a132 2
		mv ${PREFIX}/share/schemas/evolution/$$i.schemas \
		${PREFIX}/share/schemas/evolution-plugins/ ; done
@


1.73
log
@Tweak LDFLAGS to unbreak ppc build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2009/04/16 08:11:13 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p8
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p2
d46 1
a46 1
		gailutil gconf-2 gcrypt gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 \
d65 2
a66 1
			x11/gnome
d93 1
a98 1
			--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/evolution \
@


1.72
log
@- now that we have rarian, the 'scrollkeeper-update -> /bin/true' hack
is not needed as the legacy scrollkeeper-update provided by rarian does
not do anything anymore

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2009/04/06 10:09:06 ajacoutot Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p7
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p1
d110 1
a110 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${TRUEPREFIX}/lib/evolution/${R}/components:${TRUEPREFIX}/lib/evolution/${R}:${LOCALBASE}/lib -Z"
@


1.71
log
@- cope with recent gnome.port.mk / MODGNOME_HELP_FILES changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2009/03/31 15:21:49 ajacoutot Exp $
a120 3

post-patch:
	@@ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
@


1.70
log
@- s/LOCALBASE/TRUEPREFIX where it makes sense
- fix typo in rpath line
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2009/03/31 11:18:17 jasper Exp $
a67 2
			::textproc/rarian \
			::x11/gnome/doc-utils \
@


1.69
log
@- when -main was bumped, -plugins was forgotten
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2009/03/30 10:33:01 kevlo Exp $
d14 2
a15 2
PKGNAME-main=		${DISTNAME}p6
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}p0
d112 1
a112 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${LOCALBASE}/lib/evolution/${R}/components:${LOCALBASE}/lib/evolution/${R}${LOCALBASE}/lib -Z"
@


1.68
log
@- fix rpath changes from ajacoutot@@
- bump PKGNAME

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2009/03/22 16:00:28 ajacoutot Exp $
d15 1
a15 1
PKGNAME-plugins=	evolution-plugins-${GNOME_VERSION}
@


1.67
log
@Big spring cleanup:

* split in 2 packages:
  -main ===> evolution+base plugins
  -plugins ===> plugins part of the "standard" bundle
This makes more sense than previous tweak and preserves ressources.

* disable the mail-account-disable plugin by default (you can still
enable it from the plugins preferences) ; there is something not
quite right about it that makes right-clicking on a folder very
slow ; it's beeing investigated but for now, evolution is slow
enough...

* fix some hardcoded paths in the antispam plugins

* import 2 patches from pkgsrc and FreeBSD which fixes some obvious
issues

* evolution needs gnome-icon-theme to build

* remove the rpath related stuff from LDFLAGS which prevented
building on macppc ; the plugins link with '-rpath $(plugindir)' so
it should not be needed anymore
please CONTACT ME if you see any regression (in which case bernd@@ can
spank me for free)

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2009/03/17 12:39:16 ajacoutot Exp $
d14 1
a14 1
PKGNAME-main=		${DISTNAME}p5
d112 1
a112 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.66
log
@- while we install all plugins, only enable the base ones so that users can
choose exactly what extra plugin(s) they want to activate

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2009/03/14 11:36:24 ajacoutot Exp $
d3 5
a7 1
COMMENT=		integrated email and PIM software for GNOME
a12 1
PKGNAME=		${DISTNAME}p3
d14 4
a17 1
CATEGORIES=    		mail
d51 12
a62 2
		plc4 plds4 png popt pthread sasl2 sqlite3 ssl ssl3 stdc++ \
		tasn1 util xml2 z
d70 1
a70 2
			::misc/shared-mime-info
RUN_DEPENDS=		::x11/hicolor-icon-theme \
d72 7
a78 2
			::multimedia/gstreamer-0.10/plugins-good # audio-inline plugin
LIB_DEPENDS=		camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,exchange-storage-1.2,gdata-1.2,gdata-google-1.2:evolution-data-server->=2.24.3:databases/evolution-data-server \
d83 7
a89 2
			gtkhtml-3.14.>=1.0,gtkhtml-editor::www/gtkhtml3 \
			gstreamer-0.10::multimedia/gstreamer-0.10/core
d94 1
d96 1
d112 1
a112 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${LOCALBASE}/lib/evolution/${R}/components:${LOCALBASE}/lib/evolution/${R}:${LOCALBASE}/lib -Z"
d118 6
d127 4
d133 4
@


1.65
log
@- nothing should have to run_depends on rarian anymore
- explicitely add build_depends on rarian where gnome-doc-utils is also a
build dependency as it does not itself run_depends on rarian anymore

This was the 2nd and hopefully last pass of rarian/scrollkeeper cleaning.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2009/03/14 10:40:51 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p2
@


1.64
log
@- first pass at cleaning rarian/scrollkeeper handling
remove rarian-sk-update from PLIST ; it is only a wrapper that does
noting: librarian takes care of everything now.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2009/03/06 10:44:02 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
d55 1
a55 2
RUN_DEPENDS=		::textproc/rarian \
			::x11/hicolor-icon-theme \
@


1.63
log
@- forgot to ahem... bump!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2009/03/06 10:42:48 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
@


1.62
log
@- install "all" plugins (complete stable plugins bundle)

ok jasper@@ on a previous diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2009/03/04 20:10:09 jasper Exp $
d9 1
@


1.61
log
@- update evolution to 2.24.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2009/02/15 17:33:52 ajacoutot Exp $
d56 2
a57 1
			::x11/gnome/icon-theme
d63 2
a64 1
			gtkhtml-3.14.>=1.0,gtkhtml-editor::www/gtkhtml3
d78 1
a78 1
			--enable-plugins=base \
@


1.60
log
@- add the 2 hobbits as MAINTAINER

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/02/04 15:43:32 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		2.24.4
PKGNAME=		${DISTNAME}p2
@


1.59
log
@- add a MESSAGE to help user unbreak icon display when running evolution
outside of a full blown desktop environment

idea from and discussed with sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/02/03 15:54:24 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
d14 3
@


1.58
log
@- modify the timezone patch; from NetBSD
fixes the timezone selection GUI

"commit it" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/01/31 08:32:35 jasper Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d53 2
a54 1
			::x11/hicolor-icon-theme
@


1.57
log
@- bugfix update evolution to 2.24.4
- explicitly depend on latest e-d-s (for CAMEL_STORE_IS_MIGRATING)
- resolve an XXX

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/01/30 21:36:48 sturm Exp $
d9 1
@


1.56
log
@fix WANTLIB, last of the libsoup fallout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/01/20 23:15:39 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		2.24.3
PKGNAME=		${DISTNAME}p1
d51 1
a51 2
RUN_DEPENDS=		::devel/desktop-file-utils \
			::textproc/rarian \
d53 1
a53 1
LIB_DEPENDS=		camel-1.2,camel-provider-1.2,ebackend-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,exchange-storage-1.2,gdata-1.2,gdata-google-1.2::databases/evolution-data-server \
d81 2
a82 3
# XXX
#R=			${GNOME_VERSION:R}
R=			2.24
@


1.55
log
@- regen WANTLIB after libgnome esound support removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/01/12 16:13:42 jasper Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d37 1
a37 1
		gailutil gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 \
d39 5
a43 4
		gnomecanvas-2 gnomeui-2 gnomevfs-2 gobject-2.0 gssapi \
		gthread-2.0 gtk-x11-2.0 krb5 m nspr4 pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pcre pixman-1 plc4 plds4 \
		png popt pthread sasl2 sqlite3 ssl ssl3 stdc++ util xml2 z
@


1.54
log
@- update evolution to 2.24.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2008/12/17 18:42:31 jasper Exp $
d9 2
d34 1
a34 1
		Xrender art_lgpl_2 asn1 atk-1.0 audiofile bonobo-2 \
d36 1
a36 1
		db dbus-1 dbus-glib-1 enchant esd expat fontconfig freetype \
d40 1
a40 1
		gthread-2.0 gtk-x11-2.0 jpeg krb5 m nspr4 pango-1.0 \
@


1.53
log
@- switch to rarian instead of scrollkeeper
- regen PLIST

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2008/12/01 01:32:40 kevlo Exp $
d6 1
a6 1
# under mail/evolution-plugin-rss/Makefile (and bump)
d8 1
a8 2
GNOME_VERSION=		2.24.2
PKGNAME=		${DISTNAME}p2
@


1.52
log
@add missing misc/shared-mime-info dependency

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2008/11/29 10:04:57 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
d47 1
a47 1
			::textproc/scrollkeeper \
d51 1
a51 1
			::textproc/scrollkeeper \
@


1.51
log
@- the GNOME control-center2 is not needed to run evolution

"sounds reasonable" to jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2008/11/28 14:11:35 ajacoutot Exp $
d48 2
a49 1
			::x11/gnome/doc-utils
@


1.50
log
@- evolution does not use gnome-spell for spell checking anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/11/24 19:32:29 jasper Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
a50 1
			::x11/gnome/controlcenter2 \
@


1.49
log
@- update evolution to 2.24.2

"just commit it" ajacoutot@@

ps: evolution works fine actually, so it's completely "unbroken" now ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/11/23 22:59:08 jasper Exp $
d9 1
a49 1
			::textproc/gnome-spell \
@


1.48
log
@- remove XXX'd MASTER_SITES now gnome.port.mk can finally take care of that properly

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/11/23 11:37:06 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		2.24.1.1
@


1.47
log
@- add a small reminder comment
no pkg change, no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2008/11/21 17:28:07 jasper Exp $
a28 3

# XXX: To be fixed
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/evolution/2.24/}
@


1.46
log
@- update evolution to 2.24.1.1 (somewhat unbreaks it)
- fix license version
- explicitly disable mono

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2008/08/21 22:50:21 jasper Exp $
d5 2
@


1.45
log
@- update evolution to 2.22.3.1
- add gnome-spell to run depends (from ajacoutot@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2008/07/08 11:16:44 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		2.22.3.1
d11 1
a11 1
SO_VERSION=		3.0
d22 1
a22 1
# GPLv2
d29 1
a29 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/evolution/2.22/}
d35 1
a35 1
		db dbus-1 dbus-glib-1 esd expat fontconfig freetype \
d41 1
a41 1
		png popt pthread sasl2 ssl util xml2 z
d54 1
a54 1
LIB_DEPENDS=		camel-1.2,camel-provider-1.2,ebook-1.2,ecal-1.2,edataserver-1.2,edataserverui-1.2,egroupwise-1.2,exchange-storage-1.2::databases/evolution-data-server \
d59 1
a59 1
			gtkhtml-3.14.>=1.0::www/gtkhtml3
a68 3
			--disable-gtk-doc \
			--disable-hal \
			--enable-ipv6 \
d74 2
a75 1
			--with-openldap=${LOCALBASE} \
d78 1
a78 2
			--with-krb5-includes=/usr/include/kerberosV \
			--with-cairo-calendar
d84 1
a84 1
R=			2.22
@


1.44
log
@- update evolution to 2.22.3, which includes fixes for CVE-2008-1108
and CVE-2008-1109
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2008/06/02 16:49:56 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		2.22.3
d12 2
d28 3
d50 1
d85 3
a87 1
R=			${GNOME_VERSION:R}
@


1.43
log
@- update evolution to 2.22.2
* some 300 bugs were fixed
* better spam filtering
* easier on system resources
* lots of code cleanups/fixes
- fix license marker

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2008/05/30 08:23:49 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.22.2
@


1.42
log
@- remove warning about building this port when a previous version is
already installed
- link with pthread, not lpthread
- fix WANTLIB
- regen PLIST

"please commit it" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2008/05/26 16:29:27 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.12.1
PKGNAME=		${DISTNAME}p5
d11 1
a11 1
SO_VERSION=		2.0
d20 1
a20 1
# GPL
d31 6
a36 6
		gailutil gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 glade-2.0 \
		glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring gnomecanvas-2 \
		gnomeui-2 gnomevfs-2 gobject-2.0 gssapi gthread-2.0 \
		gtk-x11-2.0 jpeg krb5 m nspr4 pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pcre pixman-1 plc4 plds4 png popt pthread sasl2 \
		soup-2.2 ssl util xml2 z
d48 1
a48 2
LIB_DEPENDS=		camel-1.2,camel-provider-1.2.>=4.1,ebook-1.2.>=4.1,ecal-1.2.>=2.1,edataserver-1.2.>=4.0,edataserverui-1.2.>=5.1,exchange-storage-1.2.>=3.0::databases/evolution-data-server \
			gtkhtml-3.14.>=1.0::www/gtkhtml3 \
d50 2
d53 1
a53 1
			notify.>=2::devel/libnotify
@


1.41
log
@- make help available by adding MODGNOME_HELP_FILES / ::x11/gnome/yelp
to RUN_DEPENDS

"mkay" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/05/11 12:29:53 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
d36 1
a36 1
		pangoft2-1.0 pcre plc4 plds4 png popt pthread sasl2 \
a83 17

pre-configure:
	@@if pkg dependencies check evolution-\*; then \
		if pkg dependencies check ${DISTNAME}; then \
			:; \
		else \
			echo 1>&2 "+-------------------"; \
			echo 1>&2 "| Error: you must remove your existing evolution installation"; \
			echo 1>&2 "| before compiling this version.  To fully remove run"; \
			echo 1>&2 "| these commands as user root"; \
			echo 1>&2 "|"; \
			echo 1>&2 "|	  pkg_delete -f `pkg_info -e 'evolution-*'`"; \
			echo 1>&2 "|"; \
			echo 1>&2 "+-------------------"; \
			exit 1; \
		fi; \
	fi
@


1.40
log
@- fix WANTLIB after libsoup downgrade
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/05/02 14:44:54 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
d56 1
@


1.39
log
@- fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/05/01 10:25:50 bernd Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
d37 1
a37 1
		soup-2.4 ssl util xml2 z
@


1.38
log
@Unbreak the second half of evolution by linking the plugins with an
additional -rpath. (With help from kurt@@, thanks!)

This fixes the plugin loading and some weird issues with disabled buttons
and other stuff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/04/17 08:10:10 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
d37 1
a37 1
		soup-2.2 ssl util xml2 z
@


1.37
log
@- tweak the way the gtk-update-icon-cache goo is run

gtk-update-icon-cache is part of gtk+2: adding gtk+2 to run_depends just
to update the icon cache (which only gtk apps can use) is overkill to
say the least!
As from now, each time icons are installed under %D/share/icons, we try
to execute gtk-update-icon-cache and if it is not there, we just ignore
the error.
What it means is that if you have gtk+2 installed, then it'll run fine
and your apps will be able to use the cache. Otherwise, it will silently
fails which is fine since it means none of your apps would have been
able to take advantage of the cache anyway.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2007/11/21 16:18:15 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d76 1
a76 1
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${LOCALBASE}/lib/evolution/${R}:${LOCALBASE}/lib -Z"
@


1.36
log
@- update evolution to 2.12.1
- explicitly disable some stuff
- enable base plugins

"no objections here" martynas@@

note, there is are some issues left, but this will be fixed shortly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2007/10/28 20:56:46 jasper Exp $
d7 1
@


1.35
log
@convert to use gnome.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/06/27 08:27:40 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.10.1
PKGNAME=		${DISTNAME}p1
d11 6
a16 6
SO_VERSION=		1.0
.for _lib in eabutil econduit econtacteditor econtactlisteditor efilterbar \
emiscwidgets eshell essmime etable etext etimezonedialog eutil evolution-a11y \
evolution-addressbook-a11y evolution-addressbook-importers \
evolution-calendar-a11y evolution-calendar-importers evolution-mail-importers \
evolution-smime evolution-widgets-a11y filter menus
d25 12
a36 10
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcursor Xdmcp \
		Xext Xfixes Xi Xinerama Xrandr Xrender art_lgpl_2 asn1 \
		atk-1.0 audiofile bonobo-2 bonobo-activation bonoboui-2 \
		c cairo com_err crypto dbus-1 dbus-glib-1 esd expat \
		fontconfig freetype gailutil gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 \
		glade-2.0 glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring \
		gnomecanvas-2 gnomeprint-2-2 gnomeui-2 \
		gnomevfs-2 gobject-2.0 gssapi gthread-2.0 gtk-x11-2.0 \
		jpeg krb5 m nspr4 pango-1.0 pangocairo-1.0 pangoft2-1.0 plc4 \
		plds4 png popt pthread sasl2 soup-2.2 ssl util xml2 z
d41 9
a49 8
BUILD_DEPENDS=		:bison-*:devel/bison \
			:scrollkeeper-*:textproc/scrollkeeper \
			:gnome-doc-utils-*:x11/gnome/doc-utils
RUN_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
			:hicolor-icon-theme-*:x11/hicolor-icon-theme \
			:control-center2-*:x11/gnome/controlcenter2:
LIB_DEPENDS=		camel-1.2,camel-provider-1.2.>=4.1,ebook-1.2.>=4.1,ecal-1.2.>=2.1,edataserver-1.2.>=4.0,edataserverui-1.2.>=5.1,egroupwise-1.2.>=5.0,exchange-storage-1.2.>=3.0::databases/evolution-data-server \
			gtkhtml-3.14.>=0.0::www/gtkhtml3 \
a50 2
			gstreamer-0.8.>=5.0:gstreamer-0.8.*:devel/gstreamer \
			gnomeprintui-2-2::x11/gnome/libgnomeprintui \
d60 3
d67 2
a68 2
			--disable-pilot-conduits \
			--disable-gtk-doc \
d72 2
a73 2
			--with-krb5-includes=/usr/include/kerberosV

@


1.34
log
@- give it a chance to compile under powerpc (fix iconv configure check
the same way we did we evolution-data-server)
- remove quotes around COMMENT
- clean up PLIST
- add libnotify to LIB_DEPENDS
- update patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/06/18 17:39:18 martin Exp $
d5 4
a8 4
R=			2.10
DISTNAME=		evolution-${R}.1
PKGNAME=		${DISTNAME}p0
CATEGORIES=    		mail x11/gnome
d37 2
a38 4
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/evolution/${R}/}
EXTRACT_SUFX=           .tar.bz2

MODULES=		devel/gettext
d42 1
a42 2
			:gnome-doc-utils-*:x11/gnome/doc-utils: \
			:p5-XML-Parser-*:textproc/p5-XML-Parser
a43 1
			:desktop-file-utils-*:devel/desktop-file-utils \
d55 1
a55 2
USE_GMAKE=		Yes
USE_LIBTOOL=		Yes
d74 2
a75 1
SUBST_VARS=		${R}
@


1.33
log
@missing build dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/06/02 11:32:11 jasper Exp $
d3 1
a3 1
COMMENT=		"integrated email and PIM software for GNOME"
d7 1
d55 2
a56 1
			nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
@


1.32
log
@- update evolution to 2.10.1
- use ssl by default

still some little issues left, but basic operation works.

with a lot of help from kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/04/28 16:17:26 espie Exp $
d43 1
@


1.31
log
@Make sure to grab gstreamer-0.8 and not gstreamer-0.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2006/11/11 14:48:00 mbalmer Exp $
d5 2
a6 4
PARENT_VERS=		2.2
VERSION=		${PARENT_VERS}.3
DISTNAME=		evolution-${VERSION}
PKGNAME=		${DISTNAME}p4
d11 8
a18 19
SHARED_LIBS=		eabutil				0.0	\
			econduit			0.0	\
			econtacteditor			0.0	\
			econtactlisteditor		0.0	\
			efilterbar			0.0	\
			emiscwidgets			0.0	\
			eshell				0.0	\
			essmime				0.0	\
			etimezonedialog			0.0	\
			evolution-smime			0.0	\
			eutil				0.0	\
			evolution-a11y			0.0	\
			evolution-addressbook-a11y	0.0	\
			evolution-calendar-a11y		0.0	\
			evolution-importer		0.0	\
			evolution-mail-importers	0.0	\
			evolution-widgets-a11y		0.0	\
			filter				0.0	\
			menus				0.0
d25 10
a34 12
WANTLIB=		ICE SM X11 Xext Xrender \
			c crypto fontconfig freetype pthread m ssl z \
			ORBit-2 ORBitCosNaming-2 art_lgpl_2.>=5 atk-1.0 \
			audiofile bonobo-2 bonobo-activation.>=4.0 bonoboui-2 \
			esd.>=2 gailutil.>=17 gconf-2 glade-2.0 \
			glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0 \
			pango-1.0 pangoft2-1.0 pangocairo-1.0 \
			gdk-x11-2.0 gdk_pixbuf-2.0 gtk-x11-2.0 \
			gnome-2 gnome-keyring gnomecanvas-2 gnomeui-2 gnomevfs-2 \
			gnomeprint-2-2 gnomeprintui-2-2 cairo glitz png \
			jpeg popt sasl2 soup-2.2.>=7.0 xml2 \
			asn1 com_err gssapi krb5
d36 1
a36 1
MASTER_SITES=		${MASTER_SITE_GNOME:S@@$@@sources/evolution/${PARENT_VERS}/@@}
a40 1
# XXX: Needs gal2-2.4.2, gtkhtml3-3.6.1, eds-1.2.2
d44 6
a49 4
RUN_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper
LIB_DEPENDS=		camel-1.2,camel-provider-1.2.>=4.1,ebook-1.2.>=4.1,ecal-1.2.>=2.1,edataserver-1.2.>=4.0,edataserverui-1.2.>=5.1,egroupwise-1.2.>=5.0::databases/evolution-data-server \
			gal-2.4,gal-a11y-2.4::devel/gal2 \
			gtkhtml-3.6.>=18.2::www/gtkhtml3 \
d51 3
a53 1
			gstreamer-0.8.>=5.0:gstreamer-0.8.*:devel/gstreamer
d60 12
a71 9
CONFIGURE_ARGS+=	--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/evolution
CONFIGURE_ARGS+=	--enable-ipv6
CONFIGURE_ARGS+=	--disable-pilot-conduits
CONFIGURE_ARGS+=	--disable-gtk-doc
CONFIGURE_ARGS+=        --enable-default-binary
CONFIGURE_ARGS+=	--with-openldap=${LOCALBASE}
CONFIGURE_ARGS+=	--with-sub-version=" OpenBSD/Ports"
CONFIGURE_ARGS+=	--with-krb5=/usr
CONFIGURE_ARGS+=	--with-krb5-includes=/usr/include/kerberosV
d74 1
a74 2
			LDFLAGS="-L${LOCALBASE}/lib -Wl,-rpath,${LOCALBASE}/lib/evolution/${PARENT_VERS}:${LOCALBASE}/lib -Z"
SUBST_VARS=		PARENT_VERS
d76 1
a76 14
FLAVORS=		ssl
FLAVOR?=

.if ${FLAVOR:L:Mssl}
BUILD_DEPENDS=		::www/mozilla,-devel
CONFIGURE_ARGS+=	--with-nspr-libs=${LOCALBASE}/mozilla/lib
CONFIGURE_ARGS+=	--with-nspr-includes=${LOCALBASE}/mozilla/include/nspr
CONFIGURE_ARGS+=	--with-nss-libs=${LOCALBASE}/mozilla/lib
CONFIGURE_ARGS+=	--with-nss-includes=${LOCALBASE}/mozilla/include/nss
CONFIGURE_ARGS+=	--enable-nss=static
CONFIGURE_ARGS+=	--enable-smime=yes
.else
CONFIGURE_ARGS+=	--disable-nss
.endif
d99 1
a99 1
	find ${PREFIX}/share/evolution/${PARENT_VERS}/default -perm 444 -exec chmod 644 {} \;
@


1.30
log
@Add missing WANTLIB parts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/09/18 11:50:40 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p3
d65 1
a65 1
			gstreamer-0.8.>=5.0::devel/gstreamer
@


1.29
log
@zap unneeded 0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/08/03 19:56:08 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p2
d48 2
a49 1
			jpeg popt sasl2 soup-2.2.>=7.0 xml2
@


1.28
log
@more new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/08/03 13:09:09 espie Exp $
d40 1
a40 1
			ORBit-2 ORBitCosNaming-2 art_lgpl_2.>=5 atk-1.0.0.0 \
d42 4
a45 4
			esd.>=2 gailutil.>=17 gconf-2 glade-2.0.0.0 \
			glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 gthread-2.0.0.0 \
			pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0 \
			gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 gtk-x11-2.0.0.0 \
d60 2
a61 2
LIB_DEPENDS=		camel-1.2.0.0,camel-provider-1.2.>=4.1,ebook-1.2.>=4.1,ecal-1.2.>=2.1,edataserver-1.2.>=4.0,edataserverui-1.2.>=5.1,egroupwise-1.2.>=5.0::databases/evolution-data-server \
			gal-2.4.0.0,gal-a11y-2.4.0.0::devel/gal2 \
@


1.27
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/06/13 13:27:12 bernd Exp $
d40 2
a41 2
			ORBit-2 ORBitCosNaming-2 art_lgpl_2.5 atk-1.0.0.0 \
			audiofile bonobo-2 bonobo-activation.4.0 bonoboui-2 \
@


1.26
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/01/18 17:15:22 steven Exp $
d42 1
a42 1
			esd.2 gailutil.17 gconf-2 glade-2.0.0.0 \
d48 1
a48 1
			jpeg popt sasl2 soup-2.2.7.0 xml2
d60 1
a60 1
LIB_DEPENDS=		camel-1.2.0.0,camel-provider-1.2.4.1,ebook-1.2.4.1,ecal-1.2.2.1,edataserver-1.2.4.0,edataserverui-1.2.5.1,egroupwise-1.2.5.0::databases/evolution-data-server \
d62 3
a64 3
			gtkhtml-3.6.18.2::www/gtkhtml3 \
			lber.7,ldap.7::databases/openldap \
			gstreamer-0.8.5.0::devel/gstreamer
@


1.25
log
@add missing libraries to WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/12/28 22:43:19 steven Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
a32 27
MODGNU_SHARED_LIBS=	eabutil				''	\
			econduit			''	\
			econtacteditor			''	\
			econtactlisteditor		''	\
			efilterbar			''	\
			emiscwidgets			''	\
			eshell				''	\
			essmime				''	\
			etimezonedialog			''	\
			evolution-smime			''	\
			eutil				''	\
			evolution-a11y			''	\
			evolution-addressbook-a11y	''	\
			evolution-calendar-a11y		''	\
			evolution-importer		''	\
			evolution-mail-importers	''	\
			evolution-widgets-a11y		''	\
			filter				''	\
			menus				''

ALIASLIBS=	smime a11y addressbook-a11y calendar-a11y	\
		importer mail-importers widgets-a11y

.for _name in ${ALIASLIBS}
LIBevolution-${_name}_ALIAS=		evolution_${_name:S/-/_/}
.endfor

d38 1
a38 1
WANTLIB=		ICE SM X11 Xext Xft Xrender \
d44 1
a44 1
			pango-1.0.0.0 pangoft2-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0 \
d47 1
a47 1
			gnomeprint-2-2 gnomeprintui-2-2 \
@


1.24
log
@PLIST changed, bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/12/28 08:02:16 steven Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
d65 1
a65 1
WANTLIB=		ICE SM X11 Xft Xrender \
d75 1
a75 1
			jpeg popt soup-2.2.7.0 xml2
@


1.23
log
@- SHARED_LIBS
- remove no longer existing gtk2 flavor from mozilla in BUILD_DEPENDS
- sync with update-plist

ok marcm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/12/03 00:26:40 brad Exp $
d8 1
@


1.22
log
@Evolution is actually useable with -current.

Thanks to kurt@@ for testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/09/08 04:52:12 marcm Exp $
d12 47
d115 1
a115 1
BUILD_DEPENDS=		::www/mozilla,gtk2,-devel
@


1.21
log
@Update to 2.2.3, the latest in the 2.2 tree.

BROKEN!! Committed here so that others may have something to work with.
Also, replaces Evo 1 which was unsupported and well out-of-date.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.20 2005/08/13 18:19:32 espie Exp $

BROKEN=			"unstable, has issues loading it's various modules"
@


1.20
log
@missing dirs in PLIST
okay pvalchev@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2005/07/27 14:06:31 xsa Exp $
a5 1
COMMENT-devguide=	"Evolution Developer's Guide"
d7 2
a8 2
V=			1.2
VERSION=		${V}.4
d10 1
a10 3
PKGNAME=		${DISTNAME}p0
FULLPKGNAME-devguide=	evolution-devguide-${VERSION}p1
CATEGORIES=    		mail x11
a13 2
MAINTAINER=		Marc Matteo <marcm@@openbsd.org>

d19 11
a29 5
WANTLIB=	ICE IIOP ORBit ORBitCosNaming ORBitutil SM X11 Xext Xi \
		art_lgpl asn1 audiofile c com_err crypto esd freetype gal \
		gconf-1 gconf-gtk-1 gdk gdk_imlib gdk_pixbuf glib gmodule \
		gnome gnomeprint gnomesupport gnomeui gnomevfs gssapi gthread \
		gtk jpeg krb5 m oaf png popt pthread ssl tiff ungif wrap xml z
d31 2
a32 5
MASTER_SITES=		${MASTER_SITE_GNOME:S@@$@@sources/evolution/${V}/@@}
MASTER_SITES0=		ftp://ftp.sleepycat.com/releases/

DISTFILES=		${DISTNAME}.tar.gz \
			db-3.1.17.tar.gz:0
d36 1
d38 8
a45 13
			:scrollkeeper->=0.3.12:textproc/scrollkeeper \
			:pkgconfig-*:devel/pkgconfig
RUN_DEPENDS=		:scrollkeeper->=0.3.12:textproc/scrollkeeper
LIB_DEPENDS=		bonobo.2,bonobo-print.2,bonobox.2::x11/gnome/bonobo \
			bonobo_conf::x11/gnome/bonobo-conf \
			glade.5,glade-gnome.5::devel/libglade,gnome \
			gnomecanvaspixbuf.1::graphics/gdk-pixbuf,-gnome \
			gtkhtml-1.1.3.2::www/gtkhtml \
			soup.5::devel/soup

DB3_WRKDIST=		${WRKDIR}/db-3.1.17
DB3_WRKBUILD=		${DB3_WRKDIST}/build_unix
DB3_CONFIGURE_SCRIPT=	../dist/configure
d49 1
d51 3
a53 7
CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--with-db3-includes=${DB3_WRKBUILD}
CONFIGURE_ARGS+=	--with-db3-libs=${DB3_WRKBUILD}
CONFIGURE_ARGS+=	--with-krb5=/usr
#CONFIGURE_ARGS+=	--enable-ipv6
CONFIGURE_ARGS+=	--enable-openssl
d56 6
d63 2
a64 1
			LDFLAGS="-L${LOCALBASE}/lib"
d66 1
a66 1
FLAVORS=		ldap
d69 8
a76 6
.if ${FLAVOR:L:Mldap}
LIB_DEPENDS+=		ldap.2,lber.2::databases/openldap

CONFIGURE_ARGS+=	--with-openldap=${LOCALBASE}
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
CONFIGURE_ARGS+=	--with-static-ldap=yes
d78 1
a78 15
CONFIGURE_ARGS+=	--with-static-ldap=no
.endif
.endif

MULTI_PACKAGES=		-devguide
SUBPACKAGE?=

.if defined(PACKAGING)
.  if ${SUBPACKAGE} == "-devguide"
RUN_DEPENDS=
LIB_DEPENDS=
PKG_ARCH=		*
WANTLIB=
MODULES=
.  endif
a81 1
	@@cd ${DB3_WRKDIST} && patch -s < ${PATCHDIR}/db3-patch-dist_configure
d90 2
a91 2
			echo 1>&2 "| Error: you must remove the existing evolution installation"; \
			echo 1>&2 "| before compiling this version. To fully remove run"; \
a99 2
	@@cd ${DB3_WRKBUILD} && ./${DB3_CONFIGURE_SCRIPT} ${DB3_CONFIGURE_ARGS}
	@@cd ${DB3_WRKBUILD} && exec ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} -f ${MAKEFILE} ${ALL_TARGET}
d102 1
a102 2
	find ${PREFIX}/share/evolution/default_user -perm 444 -exec chmod 644 {} \;
	chmod u-s ${PREFIX}/sbin/camel-lock-helper
@


1.19
log
@New HOMEPAGE; Nuno Morgadinho <nuno at openbsd-pt.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/04/30 15:11:11 alek Exp $
d10 1
a10 1
FULLPKGNAME-devguide=	evolution-devguide-${VERSION}p0
@


1.18
log
@Update MASTER_SITES0

From Alec Berryman <alec@@thened.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/01/30 14:44:46 robert Exp $
d13 1
a13 1
HOMEPAGE=		http://www.ximian.com/products/ximian_evolution/
@


1.17
log
@SECURITY:
fix an arbitrary code execution vulnerability; bump PKGNAME
http://www.vuxml.org/openbsd/84dd64b0-72cc-11d9-a56c-00065bd5b0b6.html

ok marcm@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/01/02 12:33:37 alek Exp $
d29 1
a29 1
MASTER_SITES0=		${HOMEPAGE}/update/snapshot/
@


1.16
log
@- Add WANTLIB marker
- Better deps for -devguide
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/10/09 14:45:19 sturm Exp $
d9 1
@


1.15
log
@add pkgconfig to BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/08/10 09:14:48 xsa Exp $
d9 1
a9 1
FULLPKGNAME-devguide=	evolution-devguide-${VERSION}
d21 5
d87 2
@


1.14
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/07/05 22:09:52 jolan Exp $
d31 2
a32 1
			:scrollkeeper->=0.3.12:textproc/scrollkeeper
@


1.14.2.1
log
@SECURITY:
fix an arbitrary code execution vulnerability; bump PKGNAME
http://www.vuxml.org/openbsd/84dd64b0-72cc-11d9-a56c-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/08/10 09:14:48 xsa Exp $
a8 1
PKGNAME=		${DISTNAME}p0
@


1.13
log
@fix on NO_SHARED_ARCHS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/02/04 07:39:18 sturm Exp $
d28 1
a28 1
MODULES=		gettext
@


1.12
log
@mark some subpackages arch independent

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/07/12 06:27:12 marcm Exp $
d66 1
a66 1
.if defined(NO_SHARED_LIBS)
@


1.12.2.1
log
@SECURITY:
fix an arbitrary code execution vulnerability; bump PKGNAME
http://www.vuxml.org/openbsd/84dd64b0-72cc-11d9-a56c-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/02/04 07:39:18 sturm Exp $
a8 1
PKGNAME=		${DISTNAME}p0
@


1.11
log
@Don't try to use the custom scrollkeeper catalog anymore.  It's gone :).

Update *_DEPENDS version accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/05/25 22:10:22 marcm Exp $
d80 1
@


1.10
log
@Sync with new Kerberos reality.  Also, the switch to i386/ELF made
NEWDYNLIBDIR needed again :(.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/04/10 15:59:49 marcm Exp $
d31 2
a32 2
			:scrollkeeper->=0.3.11:textproc/scrollkeeper
RUN_DEPENDS=		:scrollkeeper->=0.3.11:textproc/scrollkeeper
@


1.9
log
@In addition to updating Evolution to 1.2.4, this modifies the pthread
detection scheme in configure to properly handle our -pthread and includes
db-3.1.17 directly into the port, removing the version constraint on the
db port.

This also addresses the CORE security advisory ID CORE-20030304-01.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/01/03 21:53:07 marcm Exp $
a51 1
CONFIGURE_ARGS+=	--with-krb4=/usr
@


1.8
log
@Update to 1.2.1.

The 1.2 series includes a host of new features including IPv6 support and
SSL support via OpenSSL instead of mucking about with Mozilla libraries.

For a complete list of the new features, the 1.2 series release notes are
here:
http://developer.ximian.com/projects/evolution/release_notes/1.2.html

while the 1.2.1 release notes are here:
http://developer.ximian.com/projects/evolution/release_notes/1.2.1.html

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/09/26 08:07:10 marcm Exp $
d7 1
a7 1
VERSION=		${V}.1
d23 4
a30 1
			:db-3.1.17:databases/db \
d40 4
d49 2
a50 1
CONFIGURE_ARGS+=	--with-db3=${LOCALBASE}
d53 1
a53 1
CONFIGURE_ARGS+=	--enable-ipv6
d84 4
d104 2
a105 3

post-patch:
	@@ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
@


1.8.2.1
log
@Update to 1.2.3.  Addresses CORE security advisory CORE-20030304-01

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/01/03 21:53:07 marcm Exp $
d7 1
a7 1
VERSION=		${V}.3
d45 1
a45 1
#CONFIGURE_ARGS+=	--enable-ipv6
@


1.7
log
@Our tar now handles the GNU @@LongLink extension.
@
text
@d6 2
a7 1
VERSION=		1.0.8
d22 1
a22 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/evolution/1.0/}
d28 2
a29 3
			:scrollkeeper->=0.1.4:textproc/scrollkeeper
RUN_DEPENDS=		:db-3.1.17:databases/db \
			:scrollkeeper->=0.1.4:textproc/scrollkeeper
d34 2
a35 1
			gtkhtml.21::www/gtkhtml
d41 8
a48 7
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--with-db3=${LOCALBASE} \
			--with-krb5=/usr \
			--with-krb4=/usr \
			--disable-pilot-conduits \
			--disable-gtk-doc \
			--disable-nntp
d78 13
a90 9
		echo 1>&2 "+-------------------"; \
		echo 1>&2 "| Error: you must remove the existing evolution installation"; \
		echo 1>&2 "| before compiling this version. To fully remove run"; \
		echo 1>&2 "| these commands as user root"; \
		echo 1>&2 "|"; \
		echo 1>&2 "|	  pkg_delete -f `pkg_info -e 'evolution-*'`"; \
		echo 1>&2 "|"; \
		echo 1>&2 "+-------------------"; \
		exit 1; \
@


1.6
log
@Remove the setuid bit from camel-lock-helper, and add a MESSAGE saying so.

Removing the setuid bit will break Evolution's ability to read email only
from the system mail spool.  If you need that functionality the MESSAGE
file tells you how to put the setuid bit back.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/09/14 04:18:35 marcm Exp $
d25 1
a25 2
BUILD_DEPENDS=		:gtar-*:archivers/gtar \
			:bison-*:devel/bison \
a37 1
TAR=			gtar
@


1.6.2.1
log
@Security update: addresses CORE security advisory CORE-20030304-01

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/09/26 08:07:10 marcm Exp $
d8 1
a8 2
PKGNAME=		${DISTNAME}p1
FULLPKGNAME-devguide=	evolution-devguide-${VERSION}p1
@


1.5
log
@Update MASTER_SITES

ok nino@@
@
text
@d94 1
@


1.4
log
@* Updated 1.0.7 -> 1.0.8:
        - fixed a number of addressbook and calendar issues
        - updated some translations

* Updated the MASTER_SITES since Evolution is now in the Gnome tree.

* Standardized the CONFIGURE_ARGS.

* The developer's guide made a comeback so a subpackage was created for it.

* Removed the unneeded patch-default_user_Makefile_am patch.

* Patched the OMF file for scrollkeeper 0.3 and implemented better handling of scrollkeeper in general.

* Regenerated some of the remaining patches.

* Removed the remaining Norwegan (?) help files, since they caused problems with scrollkeeper anyway.

* Made the port complain if there's an existing Evolution installation due to numerious library conflicts.

* Updated my email address.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/06/21 10:18:07 nino Exp $
d21 1
a21 1
MASTER_SITES=		${MASTER_SITE_GNOME:=stable/sources/evolution/}
@


1.3
log
@Update to 1.0.7.

From maintainer Marc Matteo <marcm@@lectroid.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/06/03 18:11:17 nino Exp $
d4 1
d6 3
a8 1
DISTNAME=		evolution-1.0.7
a9 1
NEED_VERSION=		1.531
d13 1
a13 1
MAINTAINER=		Marc Matteo <marcm@@lectroid.net>
d21 1
a21 8
MASTER_SITES=		ftp://ftp.ximian.com/pub/source/evolution/ \
			ftp://ftp.song.fi/mirrors/ftp.ximian.com/pub/source/evolution/ \
			ftp://rpmfind.net/linux/ximian/source/evolution/ \
			ftp://planetmirror.com/pub/ximian/pub/ximian/source/evolution/ \
			ftp://ftp.chg.ru/pub/X11/ximian/source/evolution/ \
			ftp://tux.cprm.net/pub/ximian/source/evolution/ \
			ftp://www.linux.org.ar/pub/ximian/source/evolution/ \
			ftp://mirror.pa.msu.edu/ximian/source/evolution/
d46 1
a46 1
			--enable-pilot-conduits=no \
d48 1
a48 1
			--enable-nntp=no
d65 26
@


1.2
log
@Additional MASTER_SITES.

From maintainer Marc Matteo <marcm@@lectroid.net>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/05/31 11:49:40 nino Exp $
d5 1
a5 1
DISTNAME=		evolution-1.0.5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d20 7
a26 1
			ftp://ftp.song.fi/mirrors/ftp.ximian.com/pub/source/evolution/
@


1.1.1.1
log
@Import Evolution 1.0.5. From pkg/DESCR:

Ximian Evolution(TM) is the premier personal and workgroup information
management solution for UNIX.  The software seamlessly integrates
email, calendaring, meeting scheduling, contact management and
online task lists into one powerful, fast, and easy to use application.
Ximian Evolution also delivers a comprehensive set of features that
help you keep your work organized and your projects on track.
Automatic email indexing keeps your information at your fingertips.
The unique Ximian vFolders(TM) are virtual folders you use to create
and save powerful contextual views of your email messages.
[...]

Submitted by Marc Matteo <marcm@@lectroid.net>.
@
text
@@
