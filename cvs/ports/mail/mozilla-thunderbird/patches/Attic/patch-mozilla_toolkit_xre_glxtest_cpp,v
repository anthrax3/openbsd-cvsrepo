head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2011.09.21.14.34.27;	author nigel;	state dead;
branches;
next	1.1;

1.1
date	2011.08.23.20.19.33;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Backport from upstream

https://bugzilla.mozilla.org/show_bug.cgi?id=681026
https://hg.mozilla.org/mozilla-central/rev/bb708067dd57

enigmail v.1.3 updated to v.1.3.2

ok landry@@ (maintainer)
@
text
@$OpenBSD: patch-mozilla_toolkit_xre_glxtest_cpp,v 1.1 2011/08/23 20:19:33 landry Exp $
https://bugzilla.mozilla.org/show_bug.cgi?id=681026
--- mozilla/toolkit/xre/glxtest.cpp.orig	Fri Aug 12 16:16:45 2011
+++ mozilla/toolkit/xre/glxtest.cpp	Mon Aug 22 22:12:40 2011
@@@@ -51,6 +51,8 @@@@
 // which runs the glxtest() static function. This creates a X connection, a GLX context, calls glGetString, and writes that
 // to the 'write' end of the pipe.
 
+#include <sys/types.h>
+#include <sys/wait.h>
 #include <cstdio>
 #include <cstdlib>
 #include <unistd.h>
@@@@ -224,6 +226,7 @@@@ static void glxtest()
 void fire_glxtest_process()
 {
   int pfd[2];
+  int status;
   if (pipe(pfd) == -1) {
       perror("pipe");
       exit(EXIT_FAILURE);
@@@@ -244,4 +247,5 @@@@ void fire_glxtest_process()
   close(pfd[1]);
   mozilla::widget::glxtest_pipe = pfd[0];
   mozilla::widget::glxtest_pid = pid;
+  waitpid(pid, &status, 0);
 }
@


1.1
log
@Update to thunderbird 6.0/lightning 1.0b5/enigmail 1.3.
See https://www.mozilla.org/en-US/thunderbird/6.0/releasenotes/
- remove patches merged upstream
- Add a missing patch from firefox for plugin path
- Add a hack to fix ui hangs with enigmail, better solution worked on in
  #681026
testing, feedback & enigmail update from nigel@@, thanks!
@
text
@d1 1
a1 1
$OpenBSD$
@

