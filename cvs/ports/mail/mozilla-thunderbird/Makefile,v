head	1.252;
access;
symbols
	OPENBSD_6_1:1.239.0.2
	OPENBSD_6_1_BASE:1.239
	OPENBSD_6_0:1.224.0.2
	OPENBSD_6_0_BASE:1.224
	OPENBSD_5_9:1.217.0.2
	OPENBSD_5_9_BASE:1.217
	OPENBSD_5_8:1.207.0.4
	OPENBSD_5_8_BASE:1.207
	OPENBSD_5_7:1.199.0.2
	OPENBSD_5_7_BASE:1.199
	OPENBSD_5_6:1.193.0.2
	OPENBSD_5_6_BASE:1.193
	OPENBSD_5_5:1.186.0.2
	OPENBSD_5_5_BASE:1.186
	OPENBSD_5_4:1.174.0.2
	OPENBSD_5_4_BASE:1.174
	OPENBSD_5_3:1.166.0.2
	OPENBSD_5_3_BASE:1.166
	OPENBSD_5_2:1.152.0.2
	OPENBSD_5_2_BASE:1.152
	OPENBSD_5_1_BASE:1.142
	OPENBSD_5_1:1.142.0.2
	OPENBSD_5_0:1.132.0.2
	OPENBSD_5_0_BASE:1.132
	OPENBSD_4_9:1.117.0.2
	OPENBSD_4_9_BASE:1.117
	OPENBSD_4_8:1.98.0.2
	OPENBSD_4_8_BASE:1.98
	OPENBSD_4_7:1.88.0.2
	OPENBSD_4_7_BASE:1.88
	OPENBSD_4_6:1.82.0.2
	OPENBSD_4_6_BASE:1.82
	OPENBSD_4_5:1.78.0.2
	OPENBSD_4_5_BASE:1.78
	OPENBSD_4_4:1.72.0.2
	OPENBSD_4_4_BASE:1.72
	OPENBSD_4_3:1.68.0.2
	OPENBSD_4_3_BASE:1.68
	OPENBSD_4_2:1.59.0.2
	OPENBSD_4_2_BASE:1.59
	OPENBSD_4_1:1.52.0.2
	OPENBSD_4_1_BASE:1.52
	OPENBSD_4_0:1.40.0.2
	OPENBSD_4_0_BASE:1.40
	OPENBSD_3_9:1.37.0.2
	OPENBSD_3_9_BASE:1.37
	OPENBSD_3_8:1.23.0.2
	OPENBSD_3_8_BASE:1.23
	OPENBSD_3_7:1.18.0.2
	OPENBSD_3_7_BASE:1.18
	OPENBSD_3_6:1.11.0.2
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	wilfried_20040118:1.1.1.1
	wilfried:1.1.1;
locks; strict;
comment	@# @;


1.252
date	2017.08.08.10.21.28;	author landry;	state Exp;
branches;
next	1.251;
commitid	qMwD9p3LFb8iTII3;

1.251
date	2017.07.26.22.45.26;	author sthen;	state Exp;
branches;
next	1.250;
commitid	tD4MFrpYYDDL2UFT;

1.250
date	2017.07.16.19.18.59;	author espie;	state Exp;
branches;
next	1.249;
commitid	tt0GhWK5c4uf9ILG;

1.249
date	2017.06.25.07.44.45;	author landry;	state Exp;
branches;
next	1.248;
commitid	7oOKeQTf5uNNDyJl;

1.248
date	2017.06.18.20.24.47;	author landry;	state Exp;
branches;
next	1.247;
commitid	GKJmkvD0wINRQMvw;

1.247
date	2017.06.14.05.23.10;	author landry;	state Exp;
branches;
next	1.246;
commitid	8bpW5n0PzKqVOaCl;

1.246
date	2017.05.31.08.08.16;	author espie;	state Exp;
branches;
next	1.245;
commitid	ij92FtFXiSiT1ani;

1.245
date	2017.05.23.20.56.06;	author espie;	state Exp;
branches;
next	1.244;
commitid	hFFxl2sD5xjLxPWJ;

1.244
date	2017.05.16.17.55.05;	author landry;	state Exp;
branches;
next	1.243;
commitid	hkFgOdGnoxSk5FI6;

1.243
date	2017.04.30.17.27.19;	author landry;	state Exp;
branches;
next	1.242;
commitid	g7XWxX76twuL1NOd;

1.242
date	2017.04.20.06.19.08;	author landry;	state Exp;
branches;
next	1.241;
commitid	0mT6qIp4xWKRrUrD;

1.241
date	2017.04.12.18.12.33;	author landry;	state Exp;
branches;
next	1.240;
commitid	obesxEciJRtUmDBz;

1.240
date	2017.04.05.09.46.18;	author landry;	state Exp;
branches;
next	1.239;
commitid	o8T4heoNFjbPlTcC;

1.239
date	2017.03.23.07.33.24;	author landry;	state Exp;
branches;
next	1.238;
commitid	RwHJ8mHWJxsp3hVE;

1.238
date	2017.03.07.15.40.00;	author landry;	state Exp;
branches;
next	1.237;
commitid	oqbKaT57dfCtnshw;

1.237
date	2017.02.18.16.22.54;	author landry;	state Exp;
branches;
next	1.236;
commitid	zwUjsBRx9XMscqD4;

1.236
date	2017.02.08.13.26.47;	author landry;	state Exp;
branches;
next	1.235;
commitid	zqMu11IJoGnP1DBf;

1.235
date	2017.02.05.19.50.51;	author landry;	state Exp;
branches;
next	1.234;
commitid	nQ40LJJsSfbfsQ1l;

1.234
date	2017.01.26.08.42.00;	author landry;	state Exp;
branches;
next	1.233;
commitid	0NSzBdfobAC4eUvE;

1.233
date	2017.01.24.21.27.28;	author landry;	state Exp;
branches;
next	1.232;
commitid	Z4lmQdBuNlbTAYET;

1.232
date	2017.01.06.22.14.07;	author landry;	state Exp;
branches;
next	1.231;
commitid	LnVcDutHO0Uavf7e;

1.231
date	2016.12.29.07.30.27;	author landry;	state Exp;
branches;
next	1.230;
commitid	6IPrdCvdxCSvQIAD;

1.230
date	2016.11.30.21.41.32;	author landry;	state Exp;
branches;
next	1.229;
commitid	adA6K2BzfUok3UqN;

1.229
date	2016.11.21.09.48.52;	author landry;	state Exp;
branches;
next	1.228;
commitid	XPnGdISWFMLiO3MC;

1.228
date	2016.10.03.13.40.40;	author landry;	state Exp;
branches;
next	1.227;
commitid	BCro2wOL0pgIeli6;

1.227
date	2016.09.23.09.16.56;	author sthen;	state Exp;
branches;
next	1.226;
commitid	XLnI6AbHAmyVU5mO;

1.226
date	2016.08.30.15.05.52;	author landry;	state Exp;
branches;
next	1.225;
commitid	O7vv3sVf1vl8Igdb;

1.225
date	2016.08.09.07.03.26;	author dcoppa;	state Exp;
branches;
next	1.224;
commitid	OEdB8D4Wdt9sgp40;

1.224
date	2016.07.03.17.34.02;	author landry;	state Exp;
branches;
next	1.223;
commitid	tSR2IgiIbmpK7Itq;

1.223
date	2016.05.31.18.50.41;	author landry;	state Exp;
branches;
next	1.222;
commitid	kb4RWMn59XpS5EYB;

1.222
date	2016.05.13.18.13.28;	author landry;	state Exp;
branches;
next	1.221;
commitid	uXhcLGK3ZbZrTGiR;

1.221
date	2016.04.27.14.18.52;	author landry;	state Exp;
branches;
next	1.220;
commitid	JA1268drc58te6De;

1.220
date	2016.03.25.07.47.04;	author landry;	state Exp;
branches;
next	1.219;
commitid	lUHsylTbXkCtv5K4;

1.219
date	2016.03.14.20.40.24;	author landry;	state Exp;
branches;
next	1.218;
commitid	zljsNlGGW6rwX2qj;

1.218
date	2016.03.05.16.04.06;	author pascal;	state Exp;
branches;
next	1.217;
commitid	EJSWd5DpdfEFGBlM;

1.217
date	2016.02.13.08.27.32;	author landry;	state Exp;
branches;
next	1.216;
commitid	Fz8iUBrS135qDJMD;

1.216
date	2016.02.13.08.26.46;	author landry;	state Exp;
branches;
next	1.215;
commitid	o08yx9zsWkzSz3nR;

1.215
date	2016.01.27.18.04.42;	author landry;	state Exp;
branches;
next	1.214;
commitid	ZhzqJxMDCswGemcm;

1.214
date	2016.01.08.14.31.41;	author landry;	state Exp;
branches;
next	1.213;
commitid	qXhLpZ9APifPsLT5;

1.213
date	2015.12.23.17.42.39;	author landry;	state Exp;
branches;
next	1.212;
commitid	Tg8jDkLww1esgBdy;

1.212
date	2015.11.26.07.21.01;	author landry;	state Exp;
branches;
next	1.211;
commitid	0vK34imaUwRLzLrl;

1.211
date	2015.11.04.07.32.37;	author landry;	state Exp;
branches;
next	1.210;
commitid	InVsz1Q8NulkQetq;

1.210
date	2015.09.30.11.51.25;	author landry;	state Exp;
branches;
next	1.209;
commitid	wiwZOEeWvUALaooW;

1.209
date	2015.09.24.20.19.15;	author landry;	state Exp;
branches;
next	1.208;
commitid	fjsa9Sueg0Tme4H0;

1.208
date	2015.08.23.19.31.06;	author landry;	state Exp;
branches;
next	1.207;
commitid	1NLKWMzKKREc4D9e;

1.207
date	2015.07.25.06.51.50;	author landry;	state Exp;
branches;
next	1.206;
commitid	gkNQ76c5g8qCN7Sf;

1.206
date	2015.07.22.05.28.37;	author landry;	state Exp;
branches;
next	1.205;
commitid	GNLZ6RYTjZb8lv3c;

1.205
date	2015.07.05.20.18.06;	author landry;	state Exp;
branches;
next	1.204;
commitid	kn9BcWVt83FWb3H2;

1.204
date	2015.06.04.10.11.57;	author sthen;	state Exp;
branches;
next	1.203;
commitid	UOiLcbMrb2nzfJ87;

1.203
date	2015.05.28.10.17.24;	author pascal;	state Exp;
branches;
next	1.202;
commitid	020U4lCPk8wUkCOz;

1.202
date	2015.05.16.07.29.12;	author landry;	state Exp;
branches;
next	1.201;
commitid	lPDw40Z2bEwcPPU4;

1.201
date	2015.04.02.18.21.25;	author landry;	state Exp;
branches;
next	1.200;
commitid	dlsDtQ7X9RjodxZk;

1.200
date	2015.03.16.20.02.16;	author landry;	state Exp;
branches;
next	1.199;
commitid	c98qPnqCV1yCjMva;

1.199
date	2015.01.14.17.37.41;	author landry;	state Exp;
branches;
next	1.198;
commitid	8SMLWxjarlNJ1qfp;

1.198
date	2014.12.04.17.55.53;	author landry;	state Exp;
branches;
next	1.197;
commitid	QdEJEG8fXtRCK6sH;

1.197
date	2014.10.17.07.21.59;	author landry;	state Exp;
branches;
next	1.196;
commitid	TTgNtWSlZwTbX8sV;

1.196
date	2014.09.10.20.39.21;	author landry;	state Exp;
branches;
next	1.195;
commitid	kGQHLO6KHpyedlee;

1.195
date	2014.09.02.16.34.57;	author landry;	state Exp;
branches;
next	1.194;
commitid	t0l87Bg7arCYTT41;

1.194
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.193;
commitid	jyyOLTDxRdjpw44n;

1.193
date	2014.07.25.17.26.18;	author landry;	state Exp;
branches;
next	1.192;
commitid	2DjICDwSiebEmUag;

1.192
date	2014.07.24.18.32.04;	author landry;	state Exp;
branches;
next	1.191;
commitid	CJtNVYZkfy1blu8n;

1.191
date	2014.07.24.18.24.03;	author landry;	state Exp;
branches;
next	1.190;
commitid	SSkn6cHOPriUcXVg;

1.190
date	2014.06.14.12.53.30;	author landry;	state Exp;
branches;
next	1.189;
commitid	iPDCywu3TaozAuVN;

1.189
date	2014.04.29.21.34.09;	author landry;	state Exp;
branches;
next	1.188;

1.188
date	2014.03.24.21.23.28;	author landry;	state Exp;
branches;
next	1.187;

1.187
date	2014.03.10.20.31.06;	author landry;	state Exp;
branches;
next	1.186;

1.186
date	2014.02.05.08.01.37;	author landry;	state Exp;
branches;
next	1.185;

1.185
date	2014.01.11.08.35.15;	author landry;	state Exp;
branches;
next	1.184;

1.184
date	2013.12.26.20.00.33;	author landry;	state Exp;
branches;
next	1.183;

1.183
date	2013.12.12.19.55.32;	author landry;	state Exp;
branches;
next	1.182;

1.182
date	2013.11.20.13.27.59;	author landry;	state Exp;
branches;
next	1.181;

1.181
date	2013.10.31.08.06.34;	author landry;	state Exp;
branches;
next	1.180;

1.180
date	2013.10.13.08.13.21;	author landry;	state Exp;
branches;
next	1.179;

1.179
date	2013.09.30.20.10.24;	author landry;	state Exp;
branches;
next	1.178;

1.178
date	2013.09.25.23.34.00;	author sthen;	state Exp;
branches;
next	1.177;

1.177
date	2013.09.25.16.53.52;	author sthen;	state Exp;
branches;
next	1.176;

1.176
date	2013.09.19.13.37.50;	author landry;	state Exp;
branches;
next	1.175;

1.175
date	2013.08.08.07.08.47;	author landry;	state Exp;
branches;
next	1.174;

1.174
date	2013.06.26.19.19.52;	author landry;	state Exp;
branches;
next	1.173;

1.173
date	2013.06.20.06.54.38;	author ajacoutot;	state Exp;
branches;
next	1.172;

1.172
date	2013.06.17.19.29.05;	author ajacoutot;	state Exp;
branches;
next	1.171;

1.171
date	2013.05.30.14.28.52;	author landry;	state Exp;
branches;
next	1.170;

1.170
date	2013.04.06.14.50.04;	author landry;	state Exp;
branches;
next	1.169;

1.169
date	2013.03.12.10.49.30;	author landry;	state Exp;
branches;
next	1.168;

1.168
date	2013.03.11.11.23.51;	author espie;	state Exp;
branches;
next	1.167;

1.167
date	2013.03.03.17.41.16;	author landry;	state Exp;
branches;
next	1.166;

1.166
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.165;

1.165
date	2013.01.11.23.06.36;	author landry;	state Exp;
branches;
next	1.164;

1.164
date	2012.12.04.21.13.32;	author landry;	state Exp;
branches;
next	1.163;

1.163
date	2012.11.24.10.32.41;	author landry;	state Exp;
branches;
next	1.162;

1.162
date	2012.11.12.20.45.32;	author landry;	state Exp;
branches;
next	1.161;

1.161
date	2012.10.29.14.53.36;	author landry;	state Exp;
branches;
next	1.160;

1.160
date	2012.10.11.18.39.32;	author landry;	state Exp;
branches;
next	1.159;

1.159
date	2012.10.10.21.08.03;	author landry;	state Exp;
branches;
next	1.158;

1.158
date	2012.09.22.10.30.17;	author landry;	state Exp;
branches;
next	1.157;

1.157
date	2012.09.21.13.21.44;	author ajacoutot;	state Exp;
branches;
next	1.156;

1.156
date	2012.09.10.15.46.29;	author landry;	state Exp;
branches;
next	1.155;

1.155
date	2012.09.10.08.47.02;	author landry;	state Exp;
branches;
next	1.154;

1.154
date	2012.09.01.14.22.45;	author landry;	state Exp;
branches;
next	1.153;

1.153
date	2012.08.07.09.07.04;	author landry;	state Exp;
branches;
next	1.152;

1.152
date	2012.06.17.07.46.23;	author landry;	state Exp;
branches;
next	1.151;

1.151
date	2012.06.16.10.20.13;	author landry;	state Exp;
branches;
next	1.150;

1.150
date	2012.06.11.15.33.26;	author landry;	state Exp;
branches;
next	1.149;

1.149
date	2012.04.30.15.32.06;	author landry;	state Exp;
branches;
next	1.148;

1.148
date	2012.04.24.06.10.16;	author espie;	state Exp;
branches;
next	1.147;

1.147
date	2012.03.30.08.38.56;	author nigel;	state Exp;
branches;
next	1.146;

1.146
date	2012.03.29.05.52.07;	author landry;	state Exp;
branches;
next	1.145;

1.145
date	2012.03.16.21.35.25;	author landry;	state Exp;
branches;
next	1.144;

1.144
date	2012.03.08.12.13.01;	author ajacoutot;	state Exp;
branches;
next	1.143;

1.143
date	2012.02.20.20.17.49;	author landry;	state Exp;
branches;
next	1.142;

1.142
date	2012.01.11.01.10.24;	author nigel;	state Exp;
branches;
next	1.141;

1.141
date	2011.12.15.23.08.50;	author nigel;	state Exp;
branches;
next	1.140;

1.140
date	2011.12.08.02.25.59;	author nigel;	state Exp;
branches;
next	1.139;

1.139
date	2011.10.28.12.31.41;	author robert;	state Exp;
branches;
next	1.138;

1.138
date	2011.10.03.21.07.05;	author landry;	state Exp;
branches;
next	1.137;

1.137
date	2011.09.21.14.34.27;	author nigel;	state Exp;
branches;
next	1.136;

1.136
date	2011.09.16.10.31.21;	author espie;	state Exp;
branches;
next	1.135;

1.135
date	2011.09.06.19.42.53;	author landry;	state Exp;
branches;
next	1.134;

1.134
date	2011.08.24.06.19.51;	author landry;	state Exp;
branches;
next	1.133;

1.133
date	2011.08.23.20.19.33;	author landry;	state Exp;
branches;
next	1.132;

1.132
date	2011.07.28.20.30.30;	author landry;	state Exp;
branches;
next	1.131;

1.131
date	2011.07.28.08.12.50;	author landry;	state Exp;
branches;
next	1.130;

1.130
date	2011.07.24.07.10.12;	author landry;	state Exp;
branches;
next	1.129;

1.129
date	2011.07.11.11.45.30;	author landry;	state Exp;
branches;
next	1.128;

1.128
date	2011.07.08.11.07.32;	author landry;	state Exp;
branches;
next	1.127;

1.127
date	2011.06.22.12.03.30;	author landry;	state Exp;
branches;
next	1.126;

1.126
date	2011.06.22.12.01.54;	author landry;	state Exp;
branches;
next	1.125;

1.125
date	2011.06.15.16.16.10;	author sthen;	state Exp;
branches;
next	1.124;

1.124
date	2011.06.08.17.50.10;	author jasper;	state Exp;
branches;
next	1.123;

1.123
date	2011.06.02.13.41.39;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2011.04.29.08.01.26;	author landry;	state Exp;
branches;
next	1.121;

1.121
date	2011.03.22.13.18.26;	author landry;	state Exp;
branches;
next	1.120;

1.120
date	2011.03.21.08.45.37;	author landry;	state Exp;
branches;
next	1.119;

1.119
date	2011.03.10.14.34.17;	author dcoppa;	state Exp;
branches;
next	1.118;

1.118
date	2011.03.02.14.44.19;	author landry;	state Exp;
branches;
next	1.117;

1.117
date	2011.01.28.21.38.12;	author landry;	state Exp;
branches;
next	1.116;

1.116
date	2011.01.18.12.37.44;	author landry;	state Exp;
branches;
next	1.115;

1.115
date	2011.01.16.16.56.02;	author landry;	state Exp;
branches;
next	1.114;

1.114
date	2011.01.14.22.53.42;	author landry;	state Exp;
branches;
next	1.113;

1.113
date	2011.01.05.08.22.30;	author dcoppa;	state Exp;
branches;
next	1.112;

1.112
date	2010.12.10.08.43.43;	author landry;	state Exp;
branches;
next	1.111;

1.111
date	2010.12.01.15.00.12;	author dcoppa;	state Exp;
branches;
next	1.110;

1.110
date	2010.11.19.07.23.07;	author espie;	state Exp;
branches;
next	1.109;

1.109
date	2010.11.11.09.30.36;	author jasper;	state Exp;
branches;
next	1.108;

1.108
date	2010.10.28.12.03.02;	author landry;	state Exp;
branches;
next	1.107;

1.107
date	2010.10.27.12.54.34;	author landry;	state Exp;
branches;
next	1.106;

1.106
date	2010.10.24.21.25.12;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2010.10.22.19.19.56;	author landry;	state Exp;
branches;
next	1.104;

1.104
date	2010.10.18.07.15.56;	author landry;	state Exp;
branches;
next	1.103;

1.103
date	2010.10.15.07.16.19;	author landry;	state Exp;
branches;
next	1.102;

1.102
date	2010.10.11.08.15.27;	author jasper;	state Exp;
branches;
next	1.101;

1.101
date	2010.09.19.19.20.49;	author landry;	state Exp;
branches;
next	1.100;

1.100
date	2010.09.08.14.24.36;	author landry;	state Exp;
branches;
next	1.99;

1.99
date	2010.08.30.21.56.48;	author jasper;	state Exp;
branches;
next	1.98;

1.98
date	2010.07.27.17.01.16;	author landry;	state Exp;
branches;
next	1.97;

1.97
date	2010.07.22.21.45.38;	author landry;	state Exp;
branches;
next	1.96;

1.96
date	2010.07.09.16.55.59;	author landry;	state Exp;
branches;
next	1.95;

1.95
date	2010.07.01.20.32.08;	author jasper;	state Exp;
branches;
next	1.94;

1.94
date	2010.06.23.17.10.48;	author landry;	state Exp;
branches;
next	1.93;

1.93
date	2010.06.16.19.07.23;	author landry;	state Exp;
branches;
next	1.92;

1.92
date	2010.04.27.20.57.55;	author landry;	state Exp;
branches;
next	1.91;

1.91
date	2010.04.03.09.26.45;	author landry;	state Exp;
branches;
next	1.90;

1.90
date	2010.03.23.18.16.01;	author espie;	state Exp;
branches;
next	1.89;

1.89
date	2010.03.21.10.35.03;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2009.12.21.22.20.12;	author ajacoutot;	state Exp;
branches;
next	1.87;

1.87
date	2009.11.18.08.43.39;	author landry;	state Exp;
branches;
next	1.86;

1.86
date	2009.11.17.23.08.12;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2009.08.21.16.40.42;	author martynas;	state Exp;
branches;
next	1.84;

1.84
date	2009.08.10.06.32.43;	author kili;	state Exp;
branches;
next	1.83;

1.83
date	2009.07.15.20.06.41;	author martynas;	state Exp;
branches;
next	1.82;

1.82
date	2009.06.23.17.05.00;	author martynas;	state Exp;
branches;
next	1.81;

1.81
date	2009.05.09.22.47.08;	author martynas;	state Exp;
branches;
next	1.80;

1.80
date	2009.03.19.21.59.32;	author martynas;	state Exp;
branches;
next	1.79;

1.79
date	2009.03.09.21.32.22;	author sthen;	state Exp;
branches;
next	1.78;

1.78
date	2009.01.09.15.54.31;	author martynas;	state Exp;
branches
	1.78.2.1;
next	1.77;

1.77
date	2009.01.09.15.44.50;	author martynas;	state Exp;
branches;
next	1.76;

1.76
date	2008.12.19.11.42.35;	author martynas;	state Exp;
branches;
next	1.75;

1.75
date	2008.09.26.19.29.19;	author martynas;	state Exp;
branches;
next	1.74;

1.74
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2008.08.23.22.07.03;	author martynas;	state Exp;
branches;
next	1.72;

1.72
date	2008.07.25.17.41.06;	author martynas;	state Exp;
branches;
next	1.71;

1.71
date	2008.07.24.10.10.33;	author martynas;	state Exp;
branches;
next	1.70;

1.70
date	2008.07.21.19.19.06;	author martynas;	state Exp;
branches;
next	1.69;

1.69
date	2008.05.06.20.35.48;	author martynas;	state Exp;
branches;
next	1.68;

1.68
date	2008.02.29.21.49.48;	author bernd;	state Exp;
branches;
next	1.67;

1.67
date	2008.02.12.23.19.37;	author sthen;	state Exp;
branches;
next	1.66;

1.66
date	2008.02.04.19.52.25;	author jasper;	state Exp;
branches;
next	1.65;

1.65
date	2008.01.23.16.46.48;	author martynas;	state Exp;
branches;
next	1.64;

1.64
date	2007.11.16.21.32.10;	author martynas;	state Exp;
branches;
next	1.63;

1.63
date	2007.11.14.09.43.40;	author steven;	state Exp;
branches;
next	1.62;

1.62
date	2007.10.02.19.09.44;	author jasper;	state Exp;
branches;
next	1.61;

1.61
date	2007.09.16.00.17.05;	author merdely;	state Exp;
branches;
next	1.60;

1.60
date	2007.09.05.14.58.39;	author fgsch;	state Exp;
branches;
next	1.59;

1.59
date	2007.08.05.15.42.24;	author martynas;	state Exp;
branches;
next	1.58;

1.58
date	2007.07.26.17.49.15;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2007.06.22.18.51.30;	author martynas;	state Exp;
branches;
next	1.56;

1.56
date	2007.06.13.12.06.59;	author martynas;	state Exp;
branches;
next	1.55;

1.55
date	2007.04.30.22.40.31;	author martynas;	state Exp;
branches;
next	1.54;

1.54
date	2007.04.06.14.48.57;	author martynas;	state Exp;
branches;
next	1.53;

1.53
date	2007.03.19.22.02.38;	author martynas;	state Exp;
branches;
next	1.52;

1.52
date	2007.02.22.00.40.59;	author naddy;	state Exp;
branches
	1.52.2.1;
next	1.51;

1.51
date	2007.01.04.20.19.54;	author steven;	state Exp;
branches;
next	1.50;

1.50
date	2006.12.21.21.52.12;	author kurt;	state Exp;
branches;
next	1.49;

1.49
date	2006.12.21.08.39.01;	author steven;	state Exp;
branches;
next	1.48;

1.48
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2006.11.30.21.08.34;	author kurt;	state Exp;
branches;
next	1.46;

1.46
date	2006.11.17.19.20.19;	author kurt;	state Exp;
branches;
next	1.45;

1.45
date	2006.11.10.14.16.41;	author wilfried;	state Exp;
branches;
next	1.44;

1.44
date	2006.10.01.22.23.47;	author brad;	state Exp;
branches;
next	1.43;

1.43
date	2006.09.20.08.35.31;	author steven;	state Exp;
branches;
next	1.42;

1.42
date	2006.09.18.15.18.36;	author steven;	state Exp;
branches;
next	1.41;

1.41
date	2006.09.18.11.50.40;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2006.07.02.15.54.54;	author steven;	state Exp;
branches
	1.40.2.1;
next	1.39;

1.39
date	2006.06.13.13.27.12;	author bernd;	state Exp;
branches;
next	1.38;

1.38
date	2006.05.02.07.25.20;	author wilfried;	state Exp;
branches;
next	1.37;

1.37
date	2006.02.12.19.31.36;	author david;	state Exp;
branches
	1.37.2.1;
next	1.36;

1.36
date	2006.02.10.20.10.57;	author ian;	state Exp;
branches;
next	1.35;

1.35
date	2006.02.09.08.34.07;	author steven;	state Exp;
branches;
next	1.34;

1.34
date	2006.01.23.12.34.06;	author wilfried;	state Exp;
branches;
next	1.33;

1.33
date	2006.01.14.00.07.30;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2006.01.01.16.03.53;	author sturm;	state Exp;
branches;
next	1.31;

1.31
date	2005.11.17.15.53.51;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2005.11.15.09.21.51;	author wilfried;	state Exp;
branches;
next	1.29;

1.29
date	2005.11.14.12.51.57;	author wilfried;	state Exp;
branches;
next	1.28;

1.28
date	2005.10.25.21.08.40;	author wilfried;	state Exp;
branches;
next	1.27;

1.27
date	2005.10.21.08.47.14;	author aanriot;	state Exp;
branches;
next	1.26;

1.26
date	2005.10.14.04.00.37;	author kurt;	state Exp;
branches;
next	1.25;

1.25
date	2005.10.13.04.32.41;	author bernd;	state Exp;
branches;
next	1.24;

1.24
date	2005.09.09.16.22.28;	author wilfried;	state Exp;
branches;
next	1.23;

1.23
date	2005.07.23.13.56.34;	author wilfried;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2005.04.16.19.22.13;	author kurt;	state Exp;
branches;
next	1.21;

1.21
date	2005.04.09.08.11.18;	author wilfried;	state Exp;
branches;
next	1.20;

1.20
date	2005.04.01.19.24.07;	author kurt;	state Exp;
branches;
next	1.19;

1.19
date	2005.03.26.19.04.59;	author wilfried;	state Exp;
branches;
next	1.18;

1.18
date	2005.01.13.15.52.07;	author wilfried;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2005.01.10.14.39.22;	author wilfried;	state Exp;
branches;
next	1.16;

1.16
date	2005.01.10.10.17.08;	author wilfried;	state Exp;
branches;
next	1.15;

1.15
date	2005.01.04.21.27.27;	author wilfried;	state Exp;
branches;
next	1.14;

1.14
date	2005.01.04.20.59.16;	author wilfried;	state Exp;
branches;
next	1.13;

1.13
date	2004.12.27.21.21.38;	author wilfried;	state Exp;
branches;
next	1.12;

1.12
date	2004.12.08.21.54.48;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2004.08.02.16.08.23;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2004.05.06.14.39.49;	author wilfried;	state Exp;
branches;
next	1.9;

1.9
date	2004.04.09.09.52.09;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2004.03.03.08.20.55;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2004.03.02.08.34.11;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2004.02.29.20.51.32;	author wilfried;	state Exp;
branches;
next	1.5;

1.5
date	2004.02.25.02.35.16;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2004.02.23.17.58.56;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.15.19.41.58;	author wilfried;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.19.14.36.49;	author wilfried;	state Exp;
branches;
next	1.1;

1.1
date	2004.01.18.11.47.42;	author wilfried;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.01.18.11.47.42;	author wilfried;	state Exp;
branches;
next	;

1.18.2.1
date	2005.11.13.12.37.13;	author sturm;	state Exp;
branches;
next	1.18.2.2;

1.18.2.2
date	2006.05.04.19.55.36;	author sturm;	state Exp;
branches;
next	;

1.23.2.1
date	2005.11.13.12.24.44;	author robert;	state Exp;
branches;
next	1.23.2.2;

1.23.2.2
date	2006.05.04.18.39.55;	author sturm;	state Exp;
branches;
next	;

1.37.2.1
date	2006.05.05.05.40.16;	author sturm;	state Exp;
branches;
next	1.37.2.2;

1.37.2.2
date	2006.07.03.22.28.54;	author sturm;	state Exp;
branches;
next	1.37.2.3;

1.37.2.3
date	2006.09.20.20.48.48;	author sturm;	state Exp;
branches;
next	1.37.2.4;

1.37.2.4
date	2006.11.11.00.25.06;	author sturm;	state Exp;
branches;
next	1.37.2.5;

1.37.2.5
date	2006.12.23.20.54.43;	author sturm;	state Exp;
branches;
next	1.37.2.6;

1.37.2.6
date	2007.03.22.22.08.10;	author sturm;	state Exp;
branches;
next	;

1.40.2.1
date	2006.11.01.11.53.30;	author sturm;	state Exp;
branches;
next	1.40.2.2;

1.40.2.2
date	2006.11.10.20.43.39;	author sturm;	state Exp;
branches;
next	1.40.2.3;

1.40.2.3
date	2006.12.24.06.12.43;	author sturm;	state Exp;
branches;
next	1.40.2.4;

1.40.2.4
date	2007.03.23.07.36.18;	author sturm;	state Exp;
branches;
next	1.40.2.5;

1.40.2.5
date	2007.06.26.21.26.44;	author sturm;	state Exp;
branches;
next	;

1.52.2.1
date	2007.05.01.16.20.21;	author sturm;	state Exp;
branches;
next	1.52.2.2;

1.52.2.2
date	2007.06.26.21.26.32;	author sturm;	state Exp;
branches;
next	;

1.78.2.1
date	2009.06.13.01.23.32;	author william;	state Exp;
branches;
next	;


desc
@@


1.252
log
@Bump REVISION-main after mozilla.port.mk changes. 52.3.0 is around the corner...
@
text
@# $OpenBSD: Makefile,v 1.251 2017/07/26 22:45:26 sthen Exp $

COMMENT-main =		Mozilla e-mail, rss and usenet client
COMMENT-lightning =	Mozilla Thunderbird calendar extension

# Don't forget to bump mail/thunderbird-i18n after updates.

MOZILLA_VERSION =	52.2.1
MOZILLA_BRANCH =	release
MOZILLA_PROJECT =	thunderbird
MOZILLA_CODENAME =	mail
EXTRACT_SUFX =		.tar.xz

MULTI_PACKAGES =	-main -lightning
PKGNAME-main =		${PKGNAME}
PKGNAME-lightning =	lightning-5.4.2.1
EPOCH-lightning =	0
REVISION-lightning =	0
REVISION-main =		1

HOMEPAGE =	http://www.mozilla.org/thunderbird/

SO_VERSION =	32.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.

MOZILLA_LIBS = ldap60 ldif60 lgpllibs mozgtk mozsqlite3 prldap60 xul

CATEGORIES=	mail news

# MPL
PERMIT_PACKAGE_CDROM=	Yes

MODULES =	www/mozilla devel/gettext lang/python
MODPY_RUNDEP =	No

COMPILER =	clang
MODCLANG_ARCHS =	amd64 i386

MOZILLA_USE_BUNDLED_LIBEVENT =	Yes
# firefox >= 46 defaults to gtk+3
MOZILLA_USE_GTK3 = Yes
# use bundled sqlite which has SQLITE_ENABLE_FTS3_TOKENIZER (#1252937)
MOZILLA_USE_BUNDLED_SQLITE =	Yes

NO_TEST =	Yes

CONFIGURE_STYLE =	simple
CONFIGURE_ARGS +=	--prefix=${PREFIX}

# SQLITE_CFLAGS is set from pkgconfig, but it's not used for all files that need it, e.g.
# mailnews/build/nsMailModule.cpp pulls in mailnews/extensions/fts3/src/nsFts3Tokenizer.h
# and .../fts3/src/fts3_tokenizer.h which fails to find sqlite3.h.
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include"

LIB_DEPENDS-lightning = STEM->=${MOZILLA_VERSION:S/b/beta/}:${BUILD_PKGPATH},-main
WANTLIB-lightning =	lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/xul \
			c m $(COMPILER_LIBCXX) nspr4 plc4 plds4 pthread

WANTLIB += X11-xcb pixman-1 pthread-stubs xcb xcb-shm

# build lightning xpi
CONFIGURE_ARGS +=	--enable-calendar

# to be able to link when building with clang on i386
.if ${MACHINE_ARCH} == "i386"
CONFIGURE_ARGS +=       --disable-debug-symbols
.endif

# bug 857628
CONFIGURE_ARGS +=	--enable-pie

ALL_TARGET =	default

GNU_ARCH =	${MACHINE_ARCH:S/amd64/x86_64/}
# guid for gdata-provider comes from em:id in install.rdf
GUIDS =	gdata-provider {a62ef8ec-5fdc-40c2-873c-223b8a6925cc} #\
#	lightning {e2fda1a4-762b-4020-b5ad-a41df1933103}

EXTDIR =	${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/extensions/

CONFIGURE_ENV+=MOZCONFIG=${WRKSRC}/mozilla/.mozconfig
# MOZCONFIG is mandatory now even if empty ?
post-patch:
	touch ${WRKSRC}/mozilla/.mozconfig

post-install:
.for xpi guid in ${GUIDS}
	cp ${WRKBUILD}/dist/xpi-stage/${xpi}*.xpi ${EXTDIR}/${guid}.xpi
.endfor

	mv ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution/extensions/{e2fda1a4-762b-4020-b5ad-a41df1933103} \
		${EXTDIR}
	rmdir ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution/extensions/
	# install prefs
	${SUBST_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/defaults/pref/all-openbsd.js
	# install distribution.ini file
	${INSTALL_DATA_DIR} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution
	echo "[Global]\nid=OpenBSD\nversion=${OSREV}\nabout=Packaged by ${MAINTAINER}\n" > \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/distribution/distribution.ini
	# install desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/ ; \
	${SUBST_DATA} ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
		${PREFIX}/share/applications/${MOZILLA_PROJECT}.desktop ; \
	# install icon for desktop file
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps/
	${INSTALL_DATA} ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/chrome/icons/default/default256.png \
		${PREFIX}/share/pixmaps/${MOZILLA_PROJECT}.png

	# remove useless empty dirs ?
	rm -Rf ${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/modules/

.include <bsd.port.mk>
@


1.251
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2017/07/16 19:18:59 espie Exp $
d19 1
a19 1
REVISION-main =		0
@


1.250
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2017/06/25 07:44:45 landry Exp $
d18 2
@


1.249
log
@Bugfix update to thunderbird 52.2.1.

Fixes issues with gmail, see
https://www.mozilla.org/en-US/thunderbird/52.2.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2017/06/18 20:24:47 landry Exp $
d56 1
a56 1
			c m $(LIBECXX) nspr4 plc4 plds4 pthread
@


1.248
log
@Update to thunderbird 52.2.0.

See https://www.mozilla.org/en-US/thunderbird/52.2.0/releasenotes/
Fixes https://www.mozilla.org/en-US/security/advisories/mfsa2017-17/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2017/06/14 05:23:10 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	52.2.0
d16 1
a16 1
PKGNAME-lightning =	lightning-5.4.2
@


1.247
log
@Bump REVISIONs for mozilla.port.mk changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2017/05/31 08:08:16 espie Exp $
d8 1
a8 1
MOZILLA_VERSION =	52.1.1
d16 1
a16 1
PKGNAME-lightning =	lightning-5.4.1.1
a17 1
REVISION-main = 0
@


1.246
log
@switch everything to new COMPILER idiom, even stuff that won't build with clang
yet, but at least that part is done.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.245 2017/05/23 20:56:06 espie Exp $
d18 1
@


1.245
log
@WANT_CXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2017/05/16 17:55:05 landry Exp $
d35 1
a35 1
WANT_CXX =		base clang
@


1.244
log
@Bugfix update to thunderbird 52.1.1.

See https://www.mozilla.org/en-US/thunderbird/52.1.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.243 2017/04/30 17:27:19 landry Exp $
d35 1
a35 1
MODULES +=		lang/clang
a36 1
MODCLANG_LANGS =	c c++
d56 1
a56 1
			c m estdc++ nspr4 plc4 plds4 pthread
@


1.243
log
@Update to thunderbird 52.1.0.

See https://www.mozilla.org/en-US/thunderbird/52.1.0/releasenotes/

Build against bundled sqlite, as Gloda (the global indexing database
behind the search field, not the 'quick filter' search bar) relies on
SQLITE_ENABLE_FTS3_TOKENIZER (see #1252937) - and it might not be a good
idea to enable this option in the systemwide sqlite install.  Might be
revisited once #1270882 is fixed.

Gloda not working issue reported & fix tested by mpi@@
ok mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2017/04/20 06:19:08 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	52.1.0
d16 1
a16 2
PKGNAME-lightning =	lightning-5.4.1
REVISION-lightning =	0
@


1.242
log
@Update to thunderbird 52.0.1/lightning 5.4.1

See https://www.mozilla.org/en-US/thunderbird/52.0.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2017/04/12 18:12:33 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	52.0.1
d17 1
d26 1
a26 1
MOZILLA_LIBS = ldap60 ldif60 lgpllibs mozgtk prldap60 xul
d43 2
@


1.241
log
@Fix WANTLIB and bump REVISION for all ports depending on hunspell.

While here enforce dependency on hunspell 1.6 in mozilla.port.mk, as
it's a requirement for 53.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2017/04/05 09:46:18 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	52.0
a12 1
REVISION-main =		0
d16 1
a16 1
PKGNAME-lightning =	lightning-5.4
d95 4
@


1.240
log
@Update to thunderbird 52.0/lightning 5.4.

See https://www.mozilla.org/en-US/thunderbird/52.0/releasenotes/

Note that it now defaults to use Gtk+3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2017/03/23 07:33:24 landry Exp $
d13 1
@


1.239
log
@Apply the same patch as in firefox-52 to pre-allocate only 128Mb at js
engine startup, otherwise tb doesnt start with default 768Mb datasize
limit (but starts fine with ulimit -d 1200000) sigh.
reported by semarie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2017/03/07 15:40:00 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.8.0
a12 1
REVISION =	0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.8
d21 1
a21 1
SO_VERSION =	31.0
d25 1
a25 1
MOZILLA_LIBS = ldap60 ldif60 lgpllibs prldap60 xul calbasecomps
d35 1
a35 4
# necessary glue to build with the correct compiler after fx 17
MODULES +=		gcc4 lang/clang
MODGCC4_ARCHS =		powerpc sparc64 alpha
MODGCC4_LANGS =		c c++
d40 2
d45 2
a46 1
CONFIGURE_STYLE =	gnu
d55 3
a57 1
			c m stdc++ nspr4 plc4 plds4 pthread
a60 4
# relies on pulseaudio for sound and broken at runtime
CONFIGURE_ARGS +=	--disable-webrtc

CONFIGURE_ARGS +=	--disable-gstreamer
d63 1
a63 1
.if ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "powerpc"
d88 1
a88 2
	# lightning cant be used packed as a zip because it contains a binary component
	# (libcalbasecomps.so) that the system wouldnt be able to load...
@


1.238
log
@Update to mozilla-thunderbird 45.8.0.

See https://www.mozilla.org/en-US/thunderbird/45.8.0/releasenotes/

Note that 52.0 is around the corner, and hopefully will make 6.1 so that
we ship with a supported branch for its lifetime.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.237 2017/02/18 16:22:54 landry Exp $
d13 1
@


1.237
log
@Consolidate textproc/icu4c common dependency into mozilla.port.mk, and
allow to build against bundled icu4c by setting MOZILLA_USE_BUNDLED_ICU.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.236 2017/02/08 13:26:47 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.7.1
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.7.1
@


1.236
log
@Bugfix update to thunderbird 45.7.1.

See https://www.mozilla.org/en-US/thunderbird/45.7.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2017/02/05 19:50:51 landry Exp $
a67 5

# bug #1064665
LIB_DEPENDS +=	textproc/icu4c
CONFIGURE_ARGS += --with-system-icu
WANTLIB += icudata icui18n icuuc
@


1.235
log
@Build against system ICU, and pass --enable-pie to CONFIGURE_ARGS -
syncs with seamonkey and firefox.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2017/01/26 08:42:00 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.7.0
a12 1
REVISION-main=	0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.7.0
@


1.234
log
@Update to thunderbird 45.7.0.

See https://www.mozilla.org/en-US/thunderbird/45.7.0/releasenotes/

Remove patch-mozilla_netwerk_protocol_http_Http2Session_cpp as it was
merged in the 45esr branch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2017/01/24 21:27:28 landry Exp $
d13 1
d69 8
@


1.233
log
@Bump REVISION for ports that depend on nss and/or nspr via mozilla.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2017/01/06 22:14:07 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.6.0
a12 1
REVISION-main =		1
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.6.0
@


1.232
log
@Fix NS_ERROR_NET_INADEQUATE_SECURITY error messages on
wikipedia|google|cnn|various sites (http/2?) broken by the nss 3.28
update, my bad - totally forgot about this when updating.

Backport https://hg.mozilla.org/mozilla-central/rev/361ac226da2a

See https://bugzilla.mozilla.org/show_bug.cgi?id=1290037 &
https://bugzilla.mozilla.org/show_bug.cgi?id=1323209

Reported by Solene Rapenne and others, fix tested by danj@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2016/12/29 07:30:27 landry Exp $
d13 1
a13 1
REVISION-main =		0
@


1.231
log
@Bugfix update to thunderbird 45.6.0.

See https://www.mozilla.org/en-US/thunderbird/45.6.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2016/11/30 21:41:32 landry Exp $
d13 1
@


1.230
log
@Security update to thunderbird 45.5.1.

See https://www.mozilla.org/en-US/thunderbird/45.5.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2016/11/21 09:48:52 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.5.1
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.5.1
@


1.229
log
@Bugfix update to thunderbird 45.5.0/lightning 4.7.5.0

See https://www.mozilla.org/en-US/thunderbird/45.5.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2016/10/03 13:40:40 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.5.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.5.0
@


1.228
log
@Bugfix update to tb 45.4.0.

See https://www.mozilla.org/en-US/thunderbird/45.4.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2016/09/23 09:16:56 sthen Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.4.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.4.0
@


1.227
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2016/08/30 15:05:52 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.3.0
d16 1
a16 2
PKGNAME-lightning =	lightning-4.7.3.0
REVISION =		0
@


1.226
log
@Update to thunderbird 45.3.0 / lightning 4.7.3.0

- See https://www.mozilla.org/en-US/thunderbird/45.3.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2016/08/09 07:03:26 dcoppa Exp $
d17 1
d48 5
@


1.225
log
@
Enable nonWritableJitCode to fix mmap W^X violations

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2016/07/03 17:34:02 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.2.0
d16 1
a16 2
REVISION-main =		0
PKGNAME-lightning =	lightning-4.7.2.0
@


1.224
log
@Bugfix update to thunderbird 45.2.0/lightning 4.7.2.0

- See https://www.mozilla.org/en-US/thunderbird/45.2.0/releasenotes/
- Fixes MFSA 2016-49
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2016/05/31 18:50:41 landry Exp $
d16 1
@


1.223
log
@Bugfix update to thunderbird 45.1.1 / lightning 4.7.1.1.

See https://www.mozilla.org/en-US/thunderbird/45.1.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2016/05/13 18:13:28 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.1.1
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.1.1
@


1.222
log
@Bugfix update to thunderbird 45.1.0 / lightning 4.7.1

- See https://www.mozilla.org/en-US/thunderbird/45.1.0/releasenotes/
- Fixes MFSA 2016-39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2016/04/27 14:18:52 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.1.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7.1
@


1.221
log
@Major update to thunderbird 45.0 / lightning 4.7.

- See https://www.mozilla.org/en-US/thunderbird/45.0/releasenotes/
- Fixes MFSA 2016-16->20, 23, 24, 27, 34->37
- Disable gstreamer support as in other geckos
- ship gdata-provider as an xpi file
- Add back patches to fix the build on i386

Been using the betas in the past 6 months without issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2016/03/25 07:47:04 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	45.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.7
@


1.220
log
@Bugfix update to thunderbird 38.7.1.

See https://www.mozilla.org/en-US/thunderbird/38.7.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2016/03/14 20:40:24 landry Exp $
d8 2
a9 2
MOZILLA_VERSION =	38.7.1
MOZILLA_BRANCH =	esr38
d12 1
a12 1
BROKEN-sparc64 =	xpcshell SIGBUS during fake
d16 1
a16 1
PKGNAME-lightning =	lightning-4.0.7.1
d21 1
a21 1
SO_VERSION =	30.0
d25 1
a25 6
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 xul calbasecomps

#.if ${FLAVOR:L:Mdebug}
#MOZILLA_LIBS +=	addrbook bayesflt fts3tok mailview mime mimeemitter msgbase \
#	msgcompose msgdb msgimap msglocal msgmdn msgnews vcard msgbaseutil
#.endif
d42 2
d46 1
a46 3
MODGNU_CONFIG_GUESS_DIRS +=	${WRKSRC}/ldap/sdks/c-sdk/config/autoconf

CONFIGURE_STYLE =	autoconf no-autoheader
a49 1
			lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/mozalloc \
d57 1
a57 2
CONFIGURE_ARGS +=	--enable-gstreamer=1.0
BUILD_DEPENDS +=	multimedia/gstreamer1/plugins-base
a65 2
MOZILLA_AUTOCONF_DIRS =		ldap/sdks/c-sdk mozilla mozilla/js/src

d80 1
a80 1
	${UNZIP} -oq ${WRKBUILD}/dist/xpi-stage/${xpi}*.xpi -d ${EXTDIR}/${guid}
d82 2
@


1.219
log
@Update to thunderbird 38.7.0 / lightning 4.0.7.

- see https://www.mozilla.org/en-US/thunderbird/38.7.0/releasenotes/

Heads up! This port will switch to the 45 branch in the coming weeks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2016/03/05 16:04:06 pascal Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.7.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.0.7
@


1.218
log
@Bump REVISION for lang/clang MODULE changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2016/02/13 08:27:32 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.6.0
a12 1
REVISION-main =	0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.0.6
a17 1
REVISION-lightning =	0
@


1.217
log
@Grr. Remove damn REVISION-main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2016/02/13 08:26:46 landry Exp $
d13 1
d19 1
@


1.216
log
@Security update to thunderbird 38.6.0/lightning 4.0.6.

See https://www.mozilla.org/en-US/thunderbird/38.6.0/releasenotes/
Fixes MFSA2016-14.
ok sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2016/01/27 18:04:42 landry Exp $
a12 1
REVISION-main =	0
@


1.215
log
@Bump REVISION after sqlite dependency change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2016/01/08 14:31:41 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.5.1
d17 1
a17 1
PKGNAME-lightning =	lightning-4.0.5.1
@


1.214
log
@Update to thunderbird 38.5.1/lightning 4.0.5.1.

See https://www.mozilla.org/en-US/thunderbird/38.5.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2015/12/23 17:42:39 landry Exp $
d13 1
@


1.213
log
@Update to thunderbird 38.5.0 / lightning 4.0.5.

See https://www.mozilla.org/en-US/thunderbird/38.5.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2015/11/26 07:21:01 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.5.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.0.5
@


1.212
log
@Update to thunderbird 38.4.0 / lightning 4.0.4.

See https://www.mozilla.org/en-US/thunderbird/38.4.0/releasenotes/ (not
there yet)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2015/11/04 07:32:37 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.4.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.0.4
@


1.211
log
@Bump REVISION-main for nss/nspr dependency change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2015/09/30 11:51:25 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.3.0
d16 1
a16 2
REVISION-main =		0
PKGNAME-lightning =	lightning-4.0.3
@


1.210
log
@Update to thunderbird 38.3.0/lightning 4.0.3.

- See https://www.mozilla.org/en-US/thunderbird/38.3.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2015/09/24 20:19:15 landry Exp $
d16 1
@


1.209
log
@Bump after moz.port.mk change. Tb & Sm will be updated in the coming days anyway...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2015/08/23 19:31:06 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.2.0
d16 1
a16 2
PKGNAME-lightning =	lightning-4.0.2
REVISION-main =		0
@


1.208
log
@Bugfix update to thunderbird 38.2.0 / lightning 4.0.2.

- See https://www.mozilla.org/en-US/thunderbird/38.2.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2015/07/25 06:51:50 landry Exp $
d17 1
@


1.207
log
@Face reality, mark as BROKEN-sparc64. xpcshell SIGBUSes during fake, and
nobody cares. No point in wasting hours during bulk builds....
If you want a graphical browser on sparc64, try netsurf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2015/07/22 05:28:37 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.1.0
d16 1
a16 1
PKGNAME-lightning =	lightning-4.0.1
@


1.206
log
@Update to thunderbird 38.1.0 / lightning 4.0.1.

- See https://www.mozilla.org/en-US/thunderbird/38.1.0/releasenotes/
- Fixes MFSA 2015-59, 63, 66, 67, 70 & 71
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2015/07/05 20:18:06 landry Exp $
d12 1
@


1.205
log
@Major update to thunderbird 38.0.1/lightning 4.0.

- See https://www.mozilla.org/en-US/thunderbird/38.0.1/releasenotes/
- Fixes MFSA 2015-59,63,66,67,70,71
- We keep lightning optional by moving it out of the distributions/ dir,
  this way we ensure updates are done from the port (no xpi are provided
upstream for openbsd anyway, so updates wouldnt work)
- Switch i386 to build with clang
- Remove libvpx hack & patches
- Remove useless patches

Been using the betas since a while without major issue, this will ensure
it gets proper testing/dogfooding - since my call for testing on ports@@
lead to .. not much feedback. Note that the first bugfix 38.1.0 release
is already around the corner.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2015/06/04 10:11:57 sthen Exp $
d8 1
a8 1
MOZILLA_VERSION =	38.0.1
d15 1
a15 1
PKGNAME-lightning =	lightning-4.0
@


1.204
log
@gcc4.9 fix for Thunderbird, from
https://hg.mozilla.org/mozilla-central/rev/1f10a8067853 /
https://bugzilla.mozilla.org/show_bug.cgi?id=999496 via brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2015/05/28 10:17:24 pascal Exp $
d8 2
a9 2
MOZILLA_VERSION =	31.7.0
MOZILLA_BRANCH =	esr31
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.7
a16 2
REVISION-lightning =	1
REVISION-main =		1
d20 1
a20 1
SO_VERSION =	29.0
d41 1
a41 1
MODGCC4_ARCHS =		powerpc sparc64 alpha i386
d43 1
a43 1
MODCLANG_ARCHS =	amd64
a45 5
# fix for 982693, apply only on clang archs
.if ${MACHINE_ARCH:Mamd64}
MAKE_ENV += VPXHACK="-fno-integrated-as"
.endif
# Regression tests are too hard to adapt to run here
d76 2
a77 2
GUIDS =	gdata-provider {a62ef8ec-5fdc-40c2-873c-223b8a6925cc} \
	lightning {e2fda1a4-762b-4020-b5ad-a41df1933103}
d88 1
a88 1
	${UNZIP} -oq ${WRKBUILD}/mozilla/dist/xpi-stage/${xpi}*.xpi -d ${EXTDIR}/${guid}
d90 3
@


1.203
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2015/05/16 07:29:12 landry Exp $
d17 2
a18 2
REVISION-lightning =	0
REVISION-main =		0
@


1.202
log
@Update to thunderbird 31.7.0 / lightning 3.3.7.

- See https://www.mozilla.org/en-US/thunderbird/31.7.0/releasenotes/
- Fixes MFSA 2015-46, 47, 48, 51, 54 & 57

Note that thunderbird 38 (based on gecko 38) will be released in some days.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2015/04/02 18:21:25 landry Exp $
d17 2
@


1.201
log
@Update to thunderbird 31.6.0 / lightning 3.3.6

- See https://www.mozilla.org/en-US/thunderbird/31.6.0/releasenotes/
- Fixes MFSA 2015-30, 31, 33, 37 & 40
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2015/03/16 20:02:16 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.6.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.6
@


1.200
log
@Update to thunderbird 31.5.0 / lightning 3.3.5.

- See https://www.mozilla.org/en-US/thunderbird/31.5.0/releasenotes/
- Fixes MFSA 2015-11, 12, 16, 19 & 24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2015/01/14 17:37:41 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.5.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.5
@


1.199
log
@Update to thunderbird 31.4.0 / lightning 3.3.4

- See https://www.mozilla.org/en-US/thunderbird/31.4.0/releasenotes/
- Fixes MFSA 2015-01, 03 & 04
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2014/12/04 17:55:53 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.4.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.4
@


1.198
log
@Update to thunderbird 31.3.0 / lightning 3.3.3.

- See https://www.mozilla.org/en-US/thunderbird/31.3.0/releasenotes/
- Fixes MFSA-2014-83,85,87->90
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2014/10/17 07:21:59 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.3.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.3
@


1.197
log
@Bugfix update to thunderbird 31.2.0 / lightning-3.3.2

- See https://www.mozilla.org/en-US/thunderbird/31.2.0/releasenotes/
- Fixes MFSA 2014-74,75,76,77,79,81.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2014/09/10 20:39:21 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.2.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.2
d86 1
d89 1
a89 1
	touch ${WRKSRC}/.mozconfig
@


1.196
log
@Bugfix update to thunderbird 31.1.1.

See https://www.mozilla.org/en-US/thunderbird/31.1.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2014/09/02 16:34:57 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.1.1
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.1.1
a18 2

#MASTER_SITES=	ftp://ftp.mozilla.org/pub/mozilla.org/${MOZILLA_PROJECT}/nightly/${MOZILLA_VERSION}-candidates/build1/source/
@


1.195
log
@Update to thunderbird 31.1.0/lightning 3.3.1.

See https://www.mozilla.org/en-US/thunderbird/31.1.0/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2014/08/10 09:58:06 espie Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.1.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3.1
@


1.194
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2014/07/25 17:26:18 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	31.0
d15 1
a15 1
PKGNAME-lightning =	lightning-3.3
a16 1
REVISION-main =		0
@


1.193
log
@Pass --enable-gstreamer=1.0 and add gstreamer1/plugins-base to BDEP, so
that TB is in sync with firefox. Fixes espie's build issue where
configure would choke on missing gst-plugins-base. Bump REVISION-main to
be on the safe side.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2014/07/24 18:32:04 landry Exp $
d98 1
a98 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/all-openbsd.js \
d102 1
a102 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${MOZILLA_PROJECT}.desktop \
@


1.192
log
@And bump SO_VERSION here too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2014/07/24 18:24:03 landry Exp $
d17 1
d69 3
@


1.191
log
@Update to thunderbird 31.0/lightning 3.3.

- See https://www.mozilla.org/en-US/thunderbird/31.0/releasenotes/
- Fixes MFSA 2014-56->66 (except 60)
- Move i386 to build with gcc to be in sync with other mozillas
- Remove patch-mozilla_content_media_gstreamer_GStreamerLoader_cpp,
  merged (#927898)
- Remove patch-mozilla_ipc_chromium_src_base_debug_util_posix_cc,
  merged(#927810)
- Remove patch-mozilla_ipc_chromium_src_base_dir_reader_bsd_h, merged
  (#909005)
- Remove patch-mozilla_js_src_ctypes_libffi_configure and
  patch-mozilla_js_src_ctypes_libffi_src_x86_freebsd_S, merged (#928381)
- Add patch-mozilla_media_libvpx_Makefile_in for libvpx hack on
  amd64/clang (#982693)
- Add patch-mozilla_gfx_skia_moz_build &
  patch-mozilla_gfx_skia_trunk_src_opts_SkBitmapProcState_opts_SSSE3_cpp
to fix build on i386 (#1028827)

Tested at least with 28.0b1, 30.0b1, 31.0b1 and 31.0b2 during this cycle..
and even starts on sparc64!

ok sthen@@ jasper@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2014/06/14 12:53:30 landry Exp $
d22 1
a22 1
SO_VERSION =	28.0
@


1.190
log
@Bugfix update to thunderbird 24.6.0.

- See https://www.mozilla.org/en-US/thunderbird/24.6.0/releasenotes/
- Fixes MFSA 2014-48,49 & 52.

Note that the next release will be 31.0, in line with ESR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2014/04/29 21:34:09 landry Exp $
d8 2
a9 2
MOZILLA_VERSION =	24.6.0
MOZILLA_BRANCH =	esr24
d15 1
a15 2
PKGNAME-lightning =	lightning-2.6.5
REVISION-lightning =	1
d43 1
a43 1
MODGCC4_ARCHS =		powerpc sparc64 alpha
d45 1
a45 1
MODCLANG_ARCHS =	i386 amd64
d48 4
d66 2
d78 1
d84 5
@


1.189
log
@Update to thunderbird 24.5.0.

- See http://www.mozilla.org/en-US/thunderbird/24.5.0/releasenotes/
- Fixes MFSA-2014-34,35,37,38,42,43,44 & 46
- set spellchecker.dictionary_path to ${LOCALBASE}/share/mozilla-dicts/
  so that systemwide dictionaries are used by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2014/03/24 21:23:28 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	24.5.0
d16 1
a16 1
REVISION-lightning =	0
@


1.188
log
@Update to thunderbird 24.4.0.

- See http://www.mozilla.org/en-US/thunderbird/24.4.0/releasenotes/
- Fixes MFSA-2014-15->17,26->32
- Remove enigmail subpackage, build goo & patches, will be
  superseded by mail/enigmail,-main
- add an all-openbsd.js file to customize default preferences and
  install it in defaults/pref/. Use it to set
extensions.autoDisableScopes to 3, so that extensions installed in
${LOCALBASE}/lib/mozilla/extensions/${APPID} are enabled by default.
- remove patch-mailnews_base_search_src_nsMsgSearchTerm_cpp, merged in
  #885538
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2014/03/10 20:31:06 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	24.4.0
d16 1
d83 2
a84 2
	${INSTALL_DATA} ${FILESDIR}/all-openbsd.js \
		${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/defaults/pref/
@


1.187
log
@Bump REVISION-main for gcc4 module change (sigh, that one was already
up2date..)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2014/02/05 08:01:37 landry Exp $
a4 1
COMMENT-enigmail =	Mozilla Thunderbird GnuPG extension
d8 1
a8 1
MOZILLA_VERSION =	24.3.0
d13 1
a13 1
MULTI_PACKAGES =	-main -lightning -enigmail
d15 1
a15 3
PKGNAME-lightning =	lightning-2.6beta3
ENIG_V =		1.5.2
PKGNAME-enigmail =	enigmail-${ENIG_V}
a16 4
EPOCH-enigmail =	0
REVISION-main =		0
REVISION-lightning =	5
REVISION-enigmail =	5
a20 4
MASTER_SITES0 =	http://www.mozilla-enigmail.org/download/source/
DISTFILES +=	${MOZILLA_PROJECT}-${MOZILLA_VERSION}.source.tar.bz2 \
		enigmail-${ENIG_V}.tar.gz:0
EXTRACT_CASES =	enigmail-*.tar.gz) ${GZIP_CMD} -dc ${FULLDISTDIR}/$$archive | tar -C comm-${MOZILLA_BRANCH}/mailnews/extensions/ -xf -;;
d26 2
a27 2
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 xul calbasecomps \
	subprocess-${XPCOM_ABI}-gcc3
a59 4
RUN_DEPENDS-enigmail =	security/gnupg
LIB_DEPENDS-enigmail =
WANTLIB-enigmail =

a71 21
ENIGMAIL_DIR =	mailnews/extensions/enigmail

post-build:
	# build enigmail
	cd ${WRKSRC}/${ENIGMAIL_DIR} && ./makemake -o ${WRKBUILD} -r
	cd ${WRKBUILD}/${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	cd ${WRKBUILD}/${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} xpi

# needed for the naming of the enigmail lib
.if ${MACHINE_ARCH:Mi386}
XPCOM_ABI =	x86
.elif ${MACHINE_ARCH:Mamd64}
XPCOM_ABI =	x86_64
.elif ${MACHINE_ARCH:Mpowerpc}
XPCOM_ABI =	ppc
.elif ${MACHINE_ARCH:Msparc64}
XPCOM_ABI =	sparc
.endif
SUBST_VARS += XPCOM_ABI

GNU_ARCH =	${MACHINE_ARCH:S/amd64/x86_64/}
d74 1
a74 2
	lightning {e2fda1a4-762b-4020-b5ad-a41df1933103} \
	../bin/enigmail-${ENIG_V}-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
d81 3
@


1.186
log
@Bugfix update to thunderbird{,-i18n} 24.3.0.

- See https://www.mozilla.org/en-US/thunderbird/24.3.0/releasenotes/
- Fixes MFSA 2014-01, 02, 04, 08, 09, 12 & 13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2014/01/11 08:35:15 landry Exp $
d21 1
@


1.185
log
@Backport fix from bug #885538 to fix a build failure with clang 3.4 -
using an empty string instead of a null pointer only does a warning
with clang 3.3.

From brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2013/12/26 20:00:33 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	24.2.0
d21 2
a22 3
REVISION-main =		1
REVISION-lightning =	4
REVISION-enigmail =	4
@


1.184
log
@Set StartupNotify=true in desktop files for nicer startup integration.
From ajacoutot@@, thx
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2013/12/12 19:55:32 landry Exp $
d21 1
a21 1
REVISION-main =		0
@


1.183
log
@Update to thunderbird 24.2.0.

- See https://www.mozilla.org/en-US/thunderbird/24.2.0/releasenotes/
- Fixes MFSA 2013-104, 108, 109, 111, 113 -> 117
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2013/11/20 13:27:59 landry Exp $
d21 1
@


1.182
log
@Bugfix update to thunderbird{,-i18n} 24.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2013/10/31 08:06:34 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	24.1.1
d21 2
a22 2
REVISION-lightning =	3
REVISION-enigmail =	3
@


1.181
log
@Bugfix update to thunderbird{,-i18n} 24.1.0.
(yeah, dont ask about the numbering scheme...)

- See http://www.mozilla.org/en-US/thunderbird/24.1.0/releasenotes/
- Fixes MFSA 2013-93 -> 102 (99 didnt affect tb)
- add gstreamer patch from #927898
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2013/10/13 08:13:21 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	24.1.0
d21 2
a22 2
REVISION-lightning =	2
REVISION-enigmail =	2
@


1.180
log
@Bugfix update to thunderbird{,-i18n} 24.0.1.

See http://www.mozilla.org/en-US/thunderbird/24.0.1/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2013/09/30 20:10:24 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	24.0.1
d21 2
a22 2
REVISION-lightning =	1
REVISION-enigmail =	1
@


1.179
log
@Allow this to package the enigmail subpackage on sparc64 by defining XPCOM_ABI.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2013/09/25 23:34:00 sthen Exp $
d9 1
a9 2
MOZILLA_VERSION =	24.0
REVISION =		0
d21 2
@


1.178
log
@unbreak
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2013/09/25 16:53:52 sthen Exp $
d100 2
@


1.177
log
@these are currently BROKEN (sysctl changes), mark them as such to save time
in builds, jasper@@ agrees
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.176 2013/09/19 13:37:50 landry Exp $

BROKEN = sysctl changes
d10 1
@


1.176
log
@Update to thunderbird 24.0/lightning 2.6b3/enigmail 1.5.2.

- see https://www.mozilla.org/en-US/thunderbird/24.0/releasenotes/
- remove BROKEN-sparc64, it even works \o/
- switch to build with clang on i386/amd64 and gcc4.6 on ppc/sparc64/alpha
- dont link with systemwide jpeg anymore, needs libjpeg-turbo
- remove patch-gfx_thebes_gfxPlatform_cpp, was merged upstream in
  #722975 (and we dont build with system cairo anyway now)
- remove useless patch-parser_html_Makefile_in, maybe it made sense in
  the gcc 3 / ffx 3.6 days but those are over...
- remove patch-ldap_sdks_c-sdk_configure_in, merged in #720373
- remove patch-mozilla_ipc_chromium_src_base_atomicops_h, not needed anymore
- add patch-mozilla_ipc_chromium_src_base_dir_reader_bsd_h, should be
  needed now as on ffx/sm.
- remove libsydney audio patches \o/ - now uses cubeb with native sndio backend.
- shuffle enigmail patches for 1.5.2 as was done in seamonkey
- remove patch-mozilla_toolkit_system_gnome_nsGIOService_cpp (#805202)
- remove patch-mozilla_toolkit_xre_nsXREDirProvider_cpp and
patch-mozilla_xpcom_io_nsAppFileLocationProvider_cpp, merged upstream  (#803955)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.175 2013/08/08 07:08:47 landry Exp $
@


1.175
log
@Bugfix update to thunderbird 17.0.8.

- nothing to see in the release notes, move along..
- fixes MFSA 2013-63,66,68,69,71,72,73 & 75.

NOTE THAT THE NEXT UPDATE WILL BE TO THUNDERBIRD 24. If you use TB,
you're highly encouraged to try the upcoming betas (will be posted to
ports@@) to make sure there are no regressions in your
workflow/setup/extensions set....
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2013/06/26 19:19:52 landry Exp $
a5 1
BROKEN-sparc64 =	https://bugzilla.mozilla.org/show_bug.cgi?id=577056
d9 2
a10 2
MOZILLA_VERSION =	17.0.8
MOZILLA_BRANCH =	esr17
d16 2
a17 2
PKGNAME-lightning =	lightning-1.9beta1
ENIG_V =		1.5.1
a20 2
REVISION-lightning =	8
REVISION-enigmail =	6
d30 1
a30 1
SO_VERSION =	27.0
d34 3
a36 3
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 xpcom xul calbasecomps \
	enigmime-${XPCOM_ABI}-gcc3 subprocess-${XPCOM_ABI}-gcc3
#.if ${FLAVOR:Mdebug}
d49 7
a61 3
# to remove in 18
CONFIGURE_ARGS +=	--with-system-jpeg=${LOCALBASE}
WANTLIB +=	jpeg
d64 1
a64 2
WANTLIB-lightning =	lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/xpcom \
			lib/${MOZILLA_PROJECT}-${MOZILLA_VER}/xul \
d69 2
a70 2
LIB_DEPENDS-enigmail =	${LIB_DEPENDS-lightning}
WANTLIB-enigmail =	${WANTLIB-lightning}
d75 5
a89 1
	cd ${WRKBUILD}/mozilla/dist/bin/chrome/enigmail && zip -r ../enigmail.jar .
d106 1
a106 2
	calendar-timezones calendar-timezones@@mozilla.org \
	../bin/enigmail-1.5-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
d111 1
a111 1
	${UNZIP} -oq ${WRKBUILD}/mozilla/dist/xpi-stage/${xpi}.xpi -d ${EXTDIR}/${guid}
d121 3
@


1.174
log
@Bugfix update to thunderbird 17.0.7.

- Fixes MFSA 2013-49,50,51,53,54,55,56 & 59
- rework tb-i18n's MESSAGE to be more in line with reality
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2013/06/20 06:54:38 ajacoutot Exp $
d10 1
a10 1
MOZILLA_VERSION =	17.0.7
d22 2
a23 2
REVISION-lightning =	7
REVISION-enigmail =	5
@


1.173
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2013/06/17 19:29:05 ajacoutot Exp $
d10 1
a10 1
MOZILLA_VERSION =	17.0.6
d22 2
a23 3
REVISION-main =		1
REVISION-lightning =	6
REVISION-enigmail =	4
@


1.172
log
@Unbreak Mozilla ports after the Heimdal update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2013/05/30 14:28:52 landry Exp $
d22 3
a24 3
REVISION-main =		0
REVISION-lightning =	5
REVISION-enigmail =	3
@


1.171
log
@Bugfix update to thunderbird 17.0.6.

- See https://www.mozilla.org/en-US/thunderbird/17.0.6/releasenotes/
- Fixes MFSA 2013-{41,42,44,46,47,48}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2013/04/06 14:50:04 landry Exp $
d22 3
a24 2
REVISION-lightning =	4
REVISION-enigmail =	2
@


1.170
log
@Bugfix update to thunderbird 17.0.5.

- See https://www.mozilla.org/en-US/thunderbird/17.0.5/releasenotes/
- Fixes MFSA 2013-30,31,32,34,35,36,38,40
- backport libffi i386 fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2013/03/12 10:49:30 landry Exp $
d10 1
a10 1
MOZILLA_VERSION =	17.0.5
d22 2
a23 2
REVISION-lightning =	3
REVISION-enigmail =	1
@


1.169
log
@Security update to thunderbird 17.0.4.

Fixes MFSA-2013-29 / CVE-2013-0787 / bug #848644 (vupen @@ pwn2own)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2013/03/11 11:23:51 espie Exp $
d10 1
a10 1
MOZILLA_VERSION =	17.0.4
d22 4
a25 2
REVISION-lightning =	2
REVISION-enigmail =	0
@


1.168
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2013/03/03 17:41:16 landry Exp $
d10 1
a10 1
MOZILLA_VERSION =	17.0.3
d22 2
a23 1
REVISION-lightning =	1
@


1.167
log
@Bugfix update to thunderbird 17.0.3 / enigmail 1.5.1.

- Fixes MFSA 2013-21,24,25,26,27 & 28
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2013/02/09 14:49:51 sthen Exp $
a44 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d50 1
a50 1
NO_REGRESS =	Yes
@


1.166
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2013/01/11 23:06:36 landry Exp $
d10 2
a11 2
MOZILLA_VERSION =	17.0.2
MOZILLA_BRANCH =	release
d18 1
a18 1
ENIG_V =		1.5.0
d22 1
a22 1
REVISION-lightning =	0
@


1.165
log
@Update to thunderbird 17.0.2/enigmail 1.5.0.

Next major release will be tb 24, in synch with fx 24 - we track the
stable/bugfix releases (which are not ESR. Not sure this is very
clear..) Users interested in testing the beta releases (tracking fx
betas) can grab them from my git tree.

- Fixes MFSA 2013-01 -> 20
- remove enigmail genxpi patch, and to a SUBST_VARS dance with an
  XPCOM_ABI variable for the consistent naming of the new internal
libsuprocess ipc lib.
- add an enigmail patch to link with -shared, and remove a -Woption not
  recognized by our gcc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2012/12/04 21:13:32 landry Exp $
d36 1
a36 1
#.if ${FLAVOR:L:Mdebug}
@


1.164
log
@Bump REVISION-main after the moz.port.mk changes, tb wont see a 17.0.1
for this cycle. Readd the --with-system-jpeg locally (to remove in 18),
and remove all the configure_env/args/build_depends stuff that moved to
moz.port.mk.
Shrinks Makefile by 18 lines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2012/11/24 10:32:41 landry Exp $
d10 1
a10 1
MOZILLA_VERSION =	17.0
d18 1
a18 1
ENIG_V =		1.4.6
d22 1
a22 1
REVISION-main =		0
d34 2
a35 2
MOZILLA_LIBS = ldap60 ldif60 mozalloc mozgnome prldap60 xpcom xul calbasecomps enigmime ipc

d87 10
@


1.163
log
@Update to thunderbird 17.0/enigmail 1.4.6/lightning 1.9b1.

- see http://www.mozilla.org/en-US/thunderbird/17.0/releasenotes/ for details
- tidy up WANTLIB/CONFIGURE_ARGS
- enable the gio/libnotify interaction. If libnotify is found at
  runtime, a popup will show incoming messages notification.
- install an icon in pixmaps/ for the desktop file, like in ffx
- remove patch-mozilla_browser_app_profile_firefox_js, this is spar^Wthunderbird!
- for the other patches removed/added, same comments as for ffx apply
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2012/11/12 20:45:32 landry Exp $
a8 1
# Don't forget to update productivity/sunbird if patches changes.
d22 1
d58 3
a60 18
CONFIGURE_ARGS +=	--enable-official-branding
CONFIGURE_ARGS +=	--with-system-libevent=/usr/
CONFIGURE_ARGS +=	--with-system-bz2=${LOCALBASE}
WANTLIB +=	event

# bug #736961
SEPARATE_BUILD =	Yes

# XXX needed since 10.0b4, relocation overflow otherwise...
# replaces -g by -Os
.if ${MACHINE_ARCH} == "powerpc"
CONFIGURE_ENV +=	MOZ_DEBUG_FLAGS="-Os"
.endif

# needed for webm
.if ${MACHINE_ARCH:Mi386} || ${MACHINE_ARCH:Mamd64}
BUILD_DEPENDS +=	devel/yasm
.endif
a66 1
BUILD_DEPENDS +=	archivers/unzip #to unzip xpi
d73 1
a73 3
CONFIGURE_ARGS +=	--enable-calendar \
			--enable-gio \
			--disable-gconf
d107 1
a107 1
		${PREFIX}/share/pixmaps/thunderbird.png
@


1.162
log
@Bump all ports depending on nspr to account for the devel/nspr,-main ->
devel/nspr pkgpath change. While here, make sure mozilla ports depend on
the latest and greatest via mozilla.port.mk.
Tested in a bulk build..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2012/10/29 14:53:36 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	16.0.2
d18 2
a19 2
PKGNAME-lightning =	lightning-1.8beta1
ENIG_V =		1.4.5
a21 2
REVISION-lightning =	1
REVISION-main =		0
a22 1
REVISION-enigmail =	1
d30 1
a30 1
SO_VERSION =	26.0
d34 1
a34 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc prldap60 xpcom xul calbasecomps enigmime ipc
d60 1
a60 1
CONFIGURE_ARGS +=	--with-system-zlib=/usr/ --with-system-bz2=${LOCALBASE}
a64 2
# XXX solved in firefox by patch-config-autoconf_mk_in ?
CONFIGURE_ENV +=	CPPFLAGS=-I${X11BASE}/include
d72 5
a76 2
LIB_DEPENDS-main =	${LIB_DEPENDS}
WANTLIB-main =		${WANTLIB}
d78 4
a81 4
WANTLIB-lightning =	lib/thunderbird-${MOZILLA_VER}/xpcom \
			lib/thunderbird-${MOZILLA_VER}/xul \
			lib/thunderbird-${MOZILLA_VER}/mozalloc \
			c m stdc++ nspr4 plc4 plds4
d90 1
a90 1
			--enable-official-branding \
d116 1
a116 1
	unzip -q ${WRKBUILD}/mozilla/dist/xpi-stage/${xpi}.xpi -d ${EXTDIR}/${guid}
d122 4
a125 3

	# cleanup useless dirs from #717616
	rm -Rf ${PREFIX}/lib/thunderbird-${MOZILLA_VERSION:C/b.//}/js{sub,}loader
@


1.161
log
@SECURITY update to thunderbird 16.0.2.

Fixes MFSA 2012-90.
http://www.mozilla.org/security/announce/2012/mfsa2012-90.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2012/10/11 18:39:32 landry Exp $
d23 1
@


1.160
log
@SECURITY update to tb 16.0.1.

Less prone to the fx 16.0 issue since it's less a web browser, but in
doubt; release early, release often!
seamonkey 2.13.1 will follow soon..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2012/10/10 21:08:03 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	16.0.1
d22 1
a22 1
REVISION-lightning =	0
d24 1
a24 1
REVISION-enigmail =	0
@


1.159
log
@Update to thunderbird 16.0/enigmail 1.4.5/lightning 1.8b1.

- see https://www.mozilla.org/en/thunderbird/16.0/releasenotes/ for details
- remove patch-mozilla_build_unix_mozilla_in, useless since bin/thunderbird
is not a script anymore since a while
- remove patch-mozilla_build_unix_run-mozilla_sh, thunderbird can be
directly debugged in gdb now. update README accordingly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2012/09/22 10:30:17 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	16.0
d22 1
d24 1
@


1.158
log
@Remove useless dependency on deprecated pangox.

- remove useless patch to gfx/thebes/Makefile.in adding -lpangox-1.0 to
EXTRA_DSO_LDOPTS, this was maybe useful before ffx 3.0, but mozilla
stopped using pangox between 2.0 and 3.0. See for the last traces of
pangox.h use : https://bugzilla.mozilla.org/show_bug.cgi?id=528941. See
also bugs #323671/#338446
- backport the patch from #528941 to remove useless pangox.h inclusion
from www/firefox35.
- remove the RUN_DEPENDS on pangox-compat
- bump all corresponding REVISIONS
- while here, make sure all moz ports depend on latest nspr 4.9.2 since
  it'll be a requirement for upcoming gecko 16 releases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2012/09/21 13:21:44 ajacoutot Exp $
d11 1
a11 1
MOZILLA_VERSION =	15.0.1
d18 2
a19 3
REVISION-main =		1
PKGNAME-lightning =	lightning-1.7beta1
ENIG_V =		1.4.4
a21 1
REVISION-lightning =	0
a22 1
REVISION-enigmail =	0
d30 1
a30 1
SO_VERSION =	25.0
a94 1
MOZILLA_SUBST_FILES +=		config/autoconf.mk.in
@


1.157
log
@Fix after pangox removal from devel/pango.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2012/09/10 15:46:29 landry Exp $
d18 1
a18 1
REVISION-main =		0
a75 3

# EXTRA_DSO_LDOPTS += -lpangox-1.0
RUN_DEPENDS-main +=	devel/pangox-compat
@


1.156
log
@lightning is so lighting i tyoped'.
spotted by jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2012/09/10 08:47:02 landry Exp $
d18 1
d76 3
@


1.155
log
@Bugfix update to thunderbird 15.0.1.

Fixes bugs #780908, #787046 & #787833 among other mozilla-specific fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2012/09/01 14:22:45 landry Exp $
d22 1
a22 1
REVISION-lighting =	0
@


1.154
log
@Update to thunderbird 15.0/lightning 1.7b1/enigmail 1.4.4.

- see http://www.mozilla.org/en-US/thunderbird/15.0/releasenotes/
- garbage collect nsSound.cpp, the original one uses libcanberra
properly and thus sndio.
- remove patch from #750620, merged upstream (mfbt/double-conversion)
- remove patches from #691898, merged upstream (yarr jit ppc)
- remove useless crashreporter patch, we don't have breakpad
- garbage collect sunbird.desktop since it's unlikely sunbird will ever
build from tb again..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2012/08/07 09:07:04 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	15.0
d22 1
d24 1
@


1.153
log
@Update to thunderbird 14.0/enigmail 1.4.3/lightning 1.6b1.

- see http://www.mozilla.org/en-US/thunderbird/14.0/releasenotes/
- remove the -rpath hack, not needed since matthew's ld.so fix from
  12/06
- backport cset from #750620 to fix ppc (and other exotic archs) build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2012/06/17 07:46:23 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	14.0
d18 2
a19 2
PKGNAME-lightning =	lightning-1.6beta1
ENIG_V =		1.4.3
@


1.152
log
@Bump lightning and enigmail REVISIONs as PLIST changed.. reminded by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2012/06/16 10:20:13 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	13.0.1
d18 2
a19 2
PKGNAME-lightning =	lightning-1.5beta1
ENIG_V =		1.4.2
a21 1
REVISION-lightning =	0
a22 1
REVISION-enigmail =	0
@


1.151
log
@Bugfix update to thunderbird 13.0.1.
See http://www.mozilla.org/en-US/thunderbird/13.0.1/releasenotes/

(note: seamonkey 2.10.1 is pending upstream release)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2012/06/11 15:33:26 landry Exp $
d22 1
d24 1
@


1.150
log
@Update to thunderbird 13.0.

See https://www.mozilla.org/en-US/thunderbird/13.0/releasenotes/ for details
- update enigmail to 1.4.2, lightning to 1.5b1
- adapt Makefile to cope with SEPARATE_BUILD
- add a rpath hack in config/rules.mk, temporary workaround for #668869
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2012/04/30 15:32:06 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	13.0
@


1.149
log
@Update to thunderbird 12.0.1/Lightning 1.4b1/enigmail 1.5pre

See http://www.mozilla.org/en-US/thunderbird/12.0/releasenotes/

Same comments as for firefox 12, only to mention that .0.1 is a bugfix
release to fix POP issues introduced in 12.0. Tested by nigel@@ (thanks!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2012/04/24 06:10:16 espie Exp $
d11 1
a11 1
MOZILLA_VERSION =	12.0.1
d18 3
a20 3
PKGNAME-lightning =	lightning-1.4beta1
ENIG_V =		1.4.1
PKGNAME-enigmail =	enigmail-1.5pre
d22 1
d30 1
a30 1
SO_VERSION =	24.0
d63 2
d97 1
a97 1
ENIGMAIL_DIR =	${WRKSRC}/mailnews/extensions/enigmail
d101 4
a104 4
	cd ${ENIGMAIL_DIR} && ./makemake -r
	cd ${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	cd ${MOB}/chrome/enigmail && zip -r ../enigmail.jar .
	cd ${ENIGMAIL_DIR} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} xpi
d116 1
a116 1
	unzip -q ${MOB}/../xpi-stage/${xpi}.xpi -d ${EXTDIR}/${guid}
d122 3
@


1.148
log
@sqlite bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2012/03/30 08:38:56 nigel Exp $
d11 1
a11 1
MOZILLA_VERSION =	11.0.1
d18 3
a20 5
REVISION-main =		0
PKGNAME-lightning =	lightning-1.3beta1
REVISION-lightning =	0
ENIG_V =		1.4
PKGNAME-enigmail =	enigmail-${ENIG_V}
a21 1
REVISION-enigmail =	0
d29 1
a29 1
SO_VERSION =	23.0
d108 1
a108 1
	../bin/enigmail-1.4-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
@


1.147
log
@Bump enigmail and lightning after thunderbird version change

Ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2012/03/29 05:52:07 landry Exp $
d18 1
@


1.146
log
@Update to thunderbird 11.0.1.

Fixes:
Bug 735940 - if filter target folder is moved, all subsequent filters
got their targets set to this folder
Bug 733731 - hang when switching folders on IMAP server
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2012/03/16 21:35:25 landry Exp $
d19 1
d23 1
@


1.145
log
@Update to thunderbird 11.0. (and enigmail 1.4/lightning 1.3b1)
- Fixes MFSA 2012-12->19
- see http://www.mozilla.org/en-US/thunderbird/11.0/releasenotes/ (but
  there's much more!)
- complete patchset for #691898, still fixes build on ppc (and hopefully
commited in firefox 14...)
- add patchset from #706955, workarounds #669050 (xpcshell hangs during
make install and chokes on CSPUtils.csm, threads related..)
- remove obsolete/commited patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2012/03/08 12:13:01 ajacoutot Exp $
d11 1
a11 1
MOZILLA_VERSION =	11.0
@


1.144
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2012/02/20 20:17:49 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	10.0.2
d18 2
a19 4
REVISION-main =		0
PKGNAME-lightning =	lightning-1.2beta1
REVISION-lightning =	0
ENIG_V =		1.3.5
a20 1
REVISION-enigmail =	0
d29 1
a29 1
SO_VERSION =	22.0
@


1.143
log
@Update to thunderbird-10.0.2.

Same comments as for firefox, plus:
- rename js/src/jscompartment.cpp patch
- remove patch-configure.in, not needed since 'gnome' component is
  disabled via configure args.
- add patch-mail_installer_Makefile_in to not install the sdk
  headers/idl files
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2012/01/11 01:10:24 nigel Exp $
d18 1
d20 1
d23 1
@


1.142
log
@Update thunderbird to 9.0.1

Changes from mpi@@ for macppc

Ok landry@@, stsp@@, mpi@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2011/12/15 23:08:50 nigel Exp $
d11 1
a11 1
MOZILLA_VERSION =	9.0.1
d18 2
a19 3
PKGNAME-lightning =	lightning-1.0beta9
ENIG_V =		1.3.4
REVISION-enigmail =	0
d29 1
a29 1
SO_VERSION =	21.0
d31 1
a31 3
# components dir to avoid pkg_add -r issues. Whenever PKGNAME gets
# bumped and/or SO_VERSION changes, remember to update enigmail's
# SO_VERSION and LIB_DEPENDS to match.
d65 6
a113 2
	# fix maxVersion
#	perl -pi -e 's|<em:maxVersion>5.*</em:maxVersion>|<em:maxVersion>${MOZILLA_VERSION}</em:maxVersion>|' ${EXTDIR}/${guid}/install.rdf
@


1.141
log
@always build without gconf

Ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2011/12/08 02:25:59 nigel Exp $
d11 1
a11 1
MOZILLA_VERSION =	8.0
d18 1
a18 2
REVISION-main =		0
PKGNAME-lightning =	lightning-1.0beta8
d20 1
d30 1
a30 1
SO_VERSION =	20.0
d71 3
a73 3
WANTLIB-lightning =	lib/thunderbird-${MOZILLA_VERSION:C/b.//}/xpcom \
			lib/thunderbird-${MOZILLA_VERSION:C/b.//}/xul \
			lib/thunderbird-${MOZILLA_VERSION:C/b.//}/mozalloc \
d107 1
a107 1
EXTDIR =	${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION:C/b.//}/extensions/
@


1.140
log
@Update thunderbird v7.0.1 to v8.0, enigmail v1.3.4, lightning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2011/10/28 12:31:41 robert Exp $
d18 1
d83 2
a84 1
			--enable-official-branding
@


1.139
log
@unbreak after nspr change and enable vswprintf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2011/10/03 21:07:05 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	7.0.1
d18 3
a20 5
PKGNAME-lightning =	lightning-1.0beta6
PKGNAME-enigmail =	enigmail-1.3.2
REVISION-main =		0
REVISION-lightning = 	0
REVISION-enigmail =	1
d26 1
a26 1
		enigmail-1.3.2.tar.gz:0
d29 1
a29 1
SO_VERSION =	19.0
@


1.138
log
@Update to thunderbird 7.0.1/lightning 1.0beta6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2011/09/21 14:34:27 nigel Exp $
d20 3
a22 1
REVISION-enigmail =	0
@


1.137
log
@Backport from upstream

https://bugzilla.mozilla.org/show_bug.cgi?id=681026
https://hg.mozilla.org/mozilla-central/rev/bb708067dd57

enigmail v.1.3 updated to v.1.3.2

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2011/09/16 10:31:21 espie Exp $
d11 1
a11 1
MOZILLA_VERSION =	6.0.2
d18 1
a18 1
PKGNAME-lightning =	lightning-1.0beta5
d20 1
a20 2
REVISION-main =		1
REVISION-lightning =	0
d23 1
d69 4
a72 4
LIB_DEPENDS-lightning = STEM->=${MOZILLA_VERSION}:${BUILD_PKGPATH},-main
WANTLIB-lightning =	lib/thunderbird-${MOZILLA_VERSION}/xpcom \
			lib/thunderbird-${MOZILLA_VERSION}/xul \
			lib/thunderbird-${MOZILLA_VERSION}/mozalloc \
d105 1
a105 1
EXTDIR =	${PREFIX}/lib/${MOZILLA_PROJECT}-${MOZILLA_VERSION}/extensions/
d110 1
a110 1
	perl -pi -e 's|<em:maxVersion>5.*</em:maxVersion>|<em:maxVersion>${MOZILLA_VERSION}</em:maxVersion>|' ${EXTDIR}/${guid}/install.rdf
@


1.136
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2011/09/06 19:42:53 landry Exp $
d19 2
a20 3
PKGNAME-enigmail =	enigmail-1.3
REVISION-main =		0
REVISION-enigmail =	0
d26 1
a26 1
		enigmail-1.3.tar.gz:0
d103 1
a103 1
	../bin/enigmail-1.2-openbsd-${GNU_ARCH} {847b3a00-7ab1-11d4-8f02-006008948af5}
@


1.135
log
@Securty update to thunderbird 6.0.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2011/08/24 06:19:51 landry Exp $
d20 1
@


1.134
log
@s/_MOZ_PROJECT_SHORT/MOZILLA_PROJECT/ when installing desktop file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2011/08/23 20:19:33 landry Exp $
d11 1
a11 1
MOZILLA_VERSION =	6.0
d20 2
@


1.133
log
@Update to thunderbird 6.0/lightning 1.0b5/enigmail 1.3.
See https://www.mozilla.org/en-US/thunderbird/6.0/releasenotes/
- remove patches merged upstream
- Add a missing patch from firefox for plugin path
- Add a hack to fix ui hangs with enigmail, better solution worked on in
  #681026
testing, feedback & enigmail update from nigel@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2011/07/28 20:30:30 landry Exp $
d103 1
a103 1
EXTDIR =	${PREFIX}/lib/${_MOZ_PROJECT_SHORT}-${MOZILLA_VERSION}/extensions/
d112 2
a113 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/${_MOZ_PROJECT_SHORT}.desktop \
		${PREFIX}/share/applications/${_MOZ_PROJECT_SHORT}.desktop ; \
@


1.132
log
@Merge enigmail/thunderbird port into thunderbird port so that enigmail
is built during thunderbird build, and packaged as a subpackage of
thunderbird, instead of building thunderbird twice...
add @@conflict/@@pkgpath markers to allow seamless updates from previous
enigmail packages.
Tested by nigel@@, ok naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2011/07/28 08:12:50 landry Exp $
d11 2
a12 2
MOZILLA_VERSION =	5.0
MOZILLA_BRANCH =	miramar
d18 2
a19 4
REVISION-main =		0
PKGNAME-lightning =	lightning-1.0beta4
PKGNAME-enigmail =	enigmail-1.2
REVISION-enigmail =	0
d24 1
a24 1
		enigmail-1.2.tar.gz:0
d27 1
a27 2
# need to be in synch with SO_VERSION in mail/enigmail/thunderbird
SO_VERSION =	18.0
d107 2
@


1.131
log
@Security fix for CVE-2011-2691 backported from png 1.4.8, from naddy@@.

See https://bugzilla.mozilla.org/show_bug.cgi?id=669863 for details.

firefox35, firefox36 and sunbird use png 1.2.35 and will need other fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2011/07/24 07:10:12 landry Exp $
d5 1
d16 1
a16 1
MULTI_PACKAGES =	-main -lightning
d20 2
d24 5
d36 1
a36 1
MOZILLA_LIBS = ldap60 ldif60 mozalloc prldap60 xpcom xul calbasecomps
d77 4
d90 10
d103 3
a105 1
	calendar-timezones calendar-timezones@@mozilla.org
@


1.130
log
@Update to thunderbird 5.0, based on Gecko 5. See for details :
http://www.mozilla.org/en-US/thunderbird/5.0/releasenotes/
- sync ipc patches from firefox
- install under lib/thunderbird-5.0 instead of using the handmade
  install target
- remove a bunch of pointless patches
Been running with it since a while, tested by a few on ports@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2011/07/11 11:45:30 landry Exp $
d17 1
@


1.129
log
@Grr, forgot to bump REVISION-lightning in previous commit, spotted by
naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2011/07/08 11:07:32 landry Exp $
d5 1
d10 2
a11 2
MOZILLA_VERSION =	3.1.11
MOZILLA_BRANCH =	1.9.2
d17 1
a17 2
REVISION-main =		0
PKGNAME-lightning =	lightning-1.0beta2
a18 1
REVISION-lightning =	20
d21 1
a21 1
SO_VERSION =	17.1
d27 6
a32 18
MOZILLA_LIBS =	accessibility appcomps auth autoconfig caps chardet chrome commandlines \
	calbasecomps composer cookie docshell embedcomponents fileview \
	gkgfxthebes gklayout gkplugin htmlpars i18n imgicon imglib2 import \
	intlapp jar50 jsctypes jsd mailcomps mork mozfind mozldap msgsmime necko \
	nsappshell permissions pipboot pipnss pippki pref rdf remoteservice \
	satchel spellchecker storagecomps system-pref tkautocomplete \
	toolkitcomps txmgr uconv ucvmath universalchardet unixproxy webbrwsr \
	widget_gtk2 windowds xpautocomplete xpconnect xpinstall zipwriter \
	gfxpsshar gkgfx gtkxtbin ldap60 ldif60 mozjs prldap60 ssldap60 \
	thebes xpcom xpcom_core xul nullplugin unixprintplugin

FLAVOR ?=
.if ${FLAVOR:L:Mdebug}
MOZILLA_LIBS +=	addrbook bayesflt fts3tok mailview mime mimeemitter msgbase \
	msgcompose msgdb msgimap msglocal msgmdn msgnews vcard msgbaseutil
.else
MOZILLA_LIBS+=	mail
.endif
d48 1
a48 1
MODGNU_CONFIG_GUESS_DIRS +=	${WRKSRC}/directory/sdks/c-sdk/config/autoconf
d51 7
d61 5
a65 2
LIB_DEPENDS-lightning = ${BUILD_PKGPATH},-main
WANTLIB-lightning =	thunderbird/mozjs thunderbird/xpcom c m stdc++ nspr4 plc4 plds4
d74 1
a74 4
MOZILLA_DATADIRS =	chrome components defaults dictionaries extensions \
			greprefs isp modules plugins res

MOZILLA_AUTOCONF_DIRS =		directory/sdks/c-sdk mozilla mozilla/js/src
d78 4
a81 2
GDATADIR =	${MOZ}/extensions/{a62ef8ec-5fdc-40c2-873c-223b8a6925cc}

d83 7
a89 1
	unzip -q ${MOB}/../xpi-stage/gdata-provider.xpi -d ${GDATADIR}
@


1.128
log
@Rename mozilla-{firefox,thunderbird} packages to {firefox,thunderbird}.
Apparently required by many at c2k11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2011/06/22 12:03:30 landry Exp $
d19 1
a19 1
REVISION-lightning =	19
@


1.127
log
@doh, forgot to remove REVISION-main...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2011/06/22 12:01:54 landry Exp $
d11 1
a11 1
MOZILLA_PROJECT =	mozilla-thunderbird
d16 1
d68 1
a68 1
WANTLIB-lightning =	mozilla-thunderbird/mozjs mozilla-thunderbird/xpcom c m stdc++ nspr4 plc4 plds4
@


1.126
log
@Update to mozilla-thunderbird 3.1.11.
See http://www.mozillamessaging.com/en-US/thunderbird/3.1.11/releasenotes/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2011/06/15 16:16:10 sthen Exp $
a15 1
REVISION-main =		2
@


1.125
log
@the Mozilla ports don't need Python at runtime, so set MODPY_RUNDEP=No.
(Firefox was already set this way). ok/reminder about sunbird landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2011/06/08 17:50:10 jasper Exp $
d9 1
a9 1
MOZILLA_VERSION =	3.1.10
d19 1
a19 1
REVISION-lightning =	18
@


1.124
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2011/06/02 13:41:39 ajacoutot Exp $
d16 1
a16 1
REVISION-main =		1
d19 1
a19 1
REVISION-lightning =	17
d56 1
@


1.123
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2011/04/29 08:01:26 landry Exp $
d16 1
a16 1
REVISION-main =		0
d19 1
a19 1
REVISION-lightning =	16
@


1.122
log
@Update to mozilla-thunderbird 3.1.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2011/03/22 13:18:26 landry Exp $
d16 1
@


1.121
log
@Remove the .if for system sqlite, now every port using mozilla MODULE
uses it. Bump dependency to 3.7.5 to ensure it has unlock_notify for
ffx4, and bump all corresponding REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2011/03/21 08:45:37 landry Exp $
d9 1
a9 1
MOZILLA_VERSION =	3.1.8
a15 1
REVISION-main =		1
d18 1
a18 1
REVISION-lightning =	15
@


1.120
log
@Add reminder comments for sunbird & xulrunner.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2011/03/10 14:34:17 dcoppa Exp $
d16 1
a16 1
REVISION-main =		0
d19 1
a19 1
REVISION-lightning =	14
@


1.119
log
@Adopt a patch that fixes a bug causing animated gifs to flicker
when using cairo 1.10.x and make mozilla-firefox and mozilla-thunderbird
build against systemwide cairo as it was with cairo 1.8.x.
Patch backported from FF4 branch by Rafal Muzylo <galtgendo@@o2.pl>

https://bugzilla.mozilla.org/show_bug.cgi?id=597174
http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/net-libs/xulrunner/files/fix-animated-gifs.patch

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2011/03/02 14:44:19 landry Exp $
d7 1
@


1.118
log
@Update to mozilla-thunderbird 3.1.8. Fixes MFSA-2011-01,08,09
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2011/01/28 21:38:12 landry Exp $
d15 1
@


1.117
log
@Fix an unaligned access on sparc64 leading to random crashes when
mozilla tries to read a malformed ICC profile on random image content
found on the web.
backport of http://hg.mozilla.org/mozilla-central/rev/e8207773d54d
ref: https://bugzilla.mozilla.org/show_bug.cgi?id=629057
issue reported and fix found by naddy@@
ok naddy@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2011/01/18 12:37:44 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.1.7
a14 1
REVISION-main =		3
d17 1
a17 1
REVISION-lightning =	13
d58 1
a58 1
MODGNU_CONFIG_GUESS_DIRS +=	${WRKSRC}/directory/c-sdk/config/autoconf
d77 1
a77 1
MOZILLA_AUTOCONF_DIRS =		directory/c-sdk mozilla mozilla/js/src
@


1.116
log
@mozilla.port.mk makes all mozilla ports use the sydney_audio_sndio.c
file from www/mozilla-firefox, so remove old instances of that file that
weren't updated with last commits (and were unused anyway)
While here bump all REVISIONs after LIB_DEPENDS change.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2011/01/16 16:56:02 landry Exp $
d15 1
a15 1
REVISION-main =		2
@


1.115
log
@Forgot to bump REVISION-lightning. All mozilla and no play makes jack a
dull boy.
Spotted by naddy@@, thanks...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2011/01/14 22:53:42 landry Exp $
d15 1
a15 1
REVISION-main =		1
d18 1
a18 1
REVISION-lightning =	12
@


1.114
log
@Build against system sqlite now that it builds with FTS3 enabled, and
add the same PRAGMA secure_delete patch as done in firefox.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2011/01/05 08:22:30 dcoppa Exp $
d18 1
a18 1
REVISION-lightning =	11
@


1.113
log
@Apply the cups fix to the rest of Mozilla apps (mozilla-thunderbird,
sunbird, firefox35, seamonkey).

Ok & tested by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2010/12/10 08:43:43 landry Exp $
d15 1
a15 1
REVISION-main =		0
d21 1
a21 1
SO_VERSION =	17.0
d35 1
a35 1
	gfxpsshar gkgfx gtkxtbin ldap60 ldif60 mozjs prldap60 sqlite3 ssldap60 \
d63 2
a64 4
#http://groups.google.com/group/mozilla.support.thunderbird/browse_thread/thread/c2b667c871db035a?pli=1
#system sqlite must be built with FTS3 enabled
#		--enable-system-sqlite

@


1.112
log
@Bugfix update to mozilla-thunderbird 3.1.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2010/12/01 15:00:12 dcoppa Exp $
d15 1
d18 1
a18 1
REVISION-lightning =	10
@


1.111
log
@Fix Kerberos/GSSAPI authentication within mozilla ports.
OpenBSD does not have gssapi_krb5. So, to avoid undefined symbol
errors, link libxul with "-lkrb5 -lcrypto".

OK phessler@@, landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2010/11/19 07:23:07 espie Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.1.6
a14 1
REVISION-main =		1
d17 1
a17 1
REVISION-lightning =	9
@


1.110
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2010/11/11 09:30:36 jasper Exp $
d15 1
a15 1
REVISION-main =		0
d18 1
a18 1
REVISION-lightning =	8
@


1.109
log
@- switch to pkg-readmes

ok landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2010/10/28 12:03:02 landry Exp $
d67 1
a67 1
LIB_DEPENDS-lightning = ::${BUILD_PKGPATH},-main
d69 1
a69 1
BUILD_DEPENDS +=	::archivers/unzip #to unzip xpi
@


1.108
log
@Security update to mozilla-thunderbird 3.1.6.
Fixes MFSA2010-73/CVE-2010-3765/bz #607222
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2010/10/27 12:54:34 landry Exp $
d15 1
@


1.107
log
@Do the PFRAG dance to produce a working debug-flavoured tb package.
Mozilla likes to build different libs when debug is enabled...
patch run-mozilla.sh so that it finds our gdb by default, and amend
README.OpenBSD to teach user how to properly debug tb.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2010/10/24 21:25:12 ajacoutot Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.1.5
d17 1
a17 2
REVISION-lightning =	7
REVISION-main =		0
@


1.106
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2010/10/22 19:19:56 landry Exp $
d17 2
a18 1
REVISION-lightning =	6
d25 1
a25 1
# and sunbird SO_VERSION and LIB_DEPENDS to match.
d30 1
a30 1
	intlapp jar50 jsctypes jsd mail mailcomps mork mozfind mozldap msgsmime necko \
d37 8
@


1.105
log
@Update to mozilla-thunderbird 3.1.5. Bump lightning REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2010/10/18 07:15:56 landry Exp $
a46 1
USE_X11 =	Yes
@


1.104
log
@Fix WANTLIB again after cairo's last commit where X11-xcb went away.
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2010/10/15 07:16:19 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.1.4
d17 1
a17 2
REVISION-main=		2
REVISION-lightning =	5
@


1.103
log
@Switch all mozilla-based ports to using the bundled cairo, mozilla doesn't
like the systemwide cairo since 1.10.x update (crashes,gifs not displaying
properly), and there's few hope it will be fixed in 1.9.2.x branch.
Fix WANTLIB while here and bump REVISIONs.
Reported by dcoppa@@, also found in upstream bz #597174 and various linux
vendors bugzillas (red hat #628331, mdv #60738, gentoo #337813).
devel/xulrunner will follow in a few..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2010/10/11 08:15:27 jasper Exp $
d17 2
a18 2
REVISION-main=		1
REVISION-lightning =	4
@


1.102
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2010/09/19 19:20:49 landry Exp $
d17 2
a18 2
REVISION-main=		0
REVISION-lightning =	3
@


1.101
log
@Bugfix update to mozilla-thunderbird 3.1.4. Bump lightning REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2010/09/08 14:24:36 landry Exp $
d17 2
a18 1
REVISION-lightning =	2
@


1.100
log
@Update to mozilla-thunderbird 3.1.3, fixes MFSA 2010-49->63
http://www.mozilla.org/security/known-vulnerabilities/thunderbird31.html#thunderbird3.1.3

tested by pea@@ and myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2010/08/30 21:56:48 jasper Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.1.3
d17 1
a17 1
REVISION-lightning =	1
@


1.99
log
@bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2010/07/27 17:01:16 landry Exp $
d8 1
a8 1
MOZILLA_VERSION =	3.1.1
a15 1
REVISION-main =		0
d17 1
a17 1
REVISION-lightning =	0
d19 1
a19 2
# need to be in synch with SO_VERSION in www/seamonkey
# for productivity/sunbird,-lighting and mail/enigmail to work ine
a76 3

pre-patch:
	rm ${WRKSRC}/mozilla/toolkit/mozapps/extensions/test/unit/*.orig
@


1.98
log
@Update to thunderbird 3.1.1, tested by a few people on ports@@ (and myself...)
Merge patches for 1.9.2 mozilla branch from firefox 3.6.x port.
While here, build lightning as a subpackage using --enable-calendar.
Add @@pkgpath/@@conflict markers for seamless upgrades.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2010/07/22 21:45:38 landry Exp $
d16 1
d18 1
@


1.97
log
@Security/Reliability update to thunderbird 3.0.6, fixes
MFSA-2010-34,39,40,41,42,46 and 47.
http://www.mozilla.org/security/known-vulnerabilities/thunderbird30.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/07/09 16:55:59 landry Exp $
d3 2
a4 1
COMMENT =	Mozilla e-mail, rss and usenet client
d8 2
a9 2
MOZILLA_VERSION =	3.0.6
MOZILLA_BRANCH =		1.9.1
d13 5
d20 1
a20 1
SO_VERSION =	16.0
d27 1
a27 1
	composer cookie docshell embedcomponents fileview \
d29 1
a29 1
	intlapp jar50 jsd mail mailcomps mork mozfind mozldap msgsmime necko \
a53 1
CONFIGURE_ARGS +=	--enable-official-branding
d59 8
d72 11
a82 1
MOZILLA_AUTOCONF_DIRS =	directory/c-sdk mozilla mozilla/js/src
@


1.96
log
@Switch mail/mozilla-thunderbird to www/mozilla MODULE. removes ~90 lines
of Makefile, which now entirely fits on my 70-lines height terms. Yay!
While here switch PLIST to use MOZILLA_PROJECT, and remove a leftover
patch from ffx35 that slipped in.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2010/07/01 20:32:08 jasper Exp $
d7 1
a7 1
MOZILLA_VERSION =	3.0.5
a10 2

PKGNAME =	${MOZILLA_PROJECT}-${MOZILLA_VERSION}p0
@


1.95
log
@- add a reminder for landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2010/06/23 17:10:48 landry Exp $
d3 1
a3 2
SHARED_ONLY=	Yes
ONLY_FOR_ARCHS=	alpha amd64 arm i386 powerpc sparc sparc64
d5 1
a5 1
COMMENT=	e-mail, rss and usenet client based on Mozilla codebase
d7 4
a10 1
# Don't forget to bump mail/thunderbird-i18n after updates.
d12 1
a12 3
VER=		3.0.5
DISTNAME=	comm-1.9.1
PKGNAME=	mozilla-thunderbird-${VER}
d16 1
a16 1
SO_VERSION=	16.0
d22 1
a22 1
.for _lib in accessibility appcomps auth autoconfig caps chardet chrome commandlines \
a31 2
SHARED_LIBS+=	${_lib} ${SO_VERSION}
.endfor
a34 2
HOMEPAGE=	http://www.mozilla.org/projects/thunderbird/

d41 1
a41 17
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xt atk-1.0 c cairo expat
WANTLIB += fontconfig freetype gio-2.0 glib-2.0 glitz gmodule-2.0
WANTLIB += gobject-2.0 gthread-2.0 jpeg m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pixman-1 png pthread pthread-stubs
WANTLIB += xcb sndio stdc++ z xcb-render xcb-render-util

MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/thunderbird/releases/${VER}/source/
DISTFILES=	thunderbird-${VER}.source.tar.bz2

MODULES=	devel/gettext lang/python
RUN_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
		:zip->=2.3:archivers/zip
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		nspr4.>=21,plc4.>=21,plds4.>=21:nspr->=4.8:devel/nspr \
		nss3.>=25,smime3.>=25,softokn3.>=25,ssl3.>=25:nss->=3.12.6:security/nss
d43 3
a45 1
VMEM_WARNING=	Yes
d47 1
a47 4
USE_X11=	Yes
USE_GMAKE=	Yes
# Regression tests are too hard to adapt to run here
NO_REGRESS=	Yes
d49 2
a50 28
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/mozilla/build/autoconf \
				${WRKSRC}/mozilla/js/src/build/autoconf \
				${WRKSRC}/directory/c-sdk/config/autoconf

AUTOCONF_VERSION= 2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS=	--with-system-jpeg=${LOCALBASE}	\
		--with-system-zlib=/usr/lib	\
		--with-system-nspr		\
		--with-system-nss		\
		--with-pthreads			\
		--disable-optimize		\
		--disable-debug			\
		--disable-tests			\
		--disable-pedantic		\
		--disable-installer		\
		--disable-updater		\
		--disable-gnomeui		\
		--disable-gnomevfs		\
		--disable-dbus			\
		--enable-default-toolkit=cairo-gtk2	\
		--enable-xinerama		\
		--enable-svg			\
		--enable-svg-renderer=cairo	\
		--enable-system-cairo		\
		--enable-canvas			\
		--enable-official-branding	\
		--enable-application=mail
d54 3
a56 1
#		--enable-system-sqlite		\
d58 2
a59 1
ALL_TARGET=	default
d61 1
a61 49
MAKE_ENV=	MOZ_CO_PROJECT=mail \
		LD_LIBRARY_PATH="${WRKSRC}/mozilla/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
CONFIGURE_ENV=	${MAKE_ENV} \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		MOZ_ENABLE_COREXFONTS=1 \
		topsrcdir=${WRKSRC}

MOB=		${WRKSRC}/mozilla/dist/bin
MOZ=		${PREFIX}/mozilla-thunderbird

DATADIRS=	chrome components defaults dictionaries extensions \
		greprefs isp modules plugins res

post-extract:
	cp -f ${FILESDIR}/sydney_audio_sndio.c \
		${WRKSRC}/mozilla/media/libsydneyaudio/src/
	cp -f ${FILESDIR}/nsSound.cpp ${WRKSRC}/mozilla/widget/src/gtk2/

pre-configure:
	cd ${WRKSRC}/directory/c-sdk && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	cd ${WRKSRC}/mozilla && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	cd ${WRKSRC}/mozilla/js/src && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	${SUBST_CMD} ${WRKSRC}/mozilla/xpcom/io/nsAppFileLocationProvider.cpp \
		${WRKSRC}/mozilla/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/mozilla/extensions/spellcheck/hunspell/src/mozHunspell.cpp \
		${WRKSRC}/mozilla/build/unix/mozilla.in \
		${WRKSRC}/mozilla/toolkit/xre/nsXREDirProvider.cpp

do-install:
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \;
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
	${INSTALL_DATA} ${MOB}/*.ini ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/thunderbird ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/regxpcom \
		${MOB}/thunderbird-bin \
		${MOB}/mozilla-xremote-client ${MOZ}
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/README.OpenBSD \
		${MOZ}/README.OpenBSD
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/thunderbird.desktop \
		${PREFIX}/share/applications/thunderbird.desktop
@


1.94
log
@Update to thunderbird 3.0.5. Bump SO_VERSION, switch to use -o/-g
options to ${SUBST_CMD} while here.
Tested by phessler & myself on amd64, by pea@@ & Nicolas Legrand on ppc,
still builds & runs on sparc64.
ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2010/06/16 19:07:23 landry Exp $
d7 2
@


1.93
log
@Remove all patches applying to local copy of nss/nspr, as we now use the
systemwide ones (which have all those patches). Don't call autoconf in
nsprpub/ while here, and bump PKGNAME to be on the safe side.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2010/04/27 20:57:55 landry Exp $
d8 1
a8 1
VER=		3.0.4
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d14 1
a14 1
SO_VERSION=	15.0
d21 1
a21 1
	composer cookie dbusservice docshell embedcomponents fileview \
d48 1
a48 1
WANTLIB += xcb sndio stdc++ z
d147 1
a147 1
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
d150 1
a150 1
	${SUBST_CMD} -c ${FILESDIR}/thunderbird.desktop \
a151 3
	chown ${SHAREOWN}:${SHAREGRP} \
		${PREFIX}/share/applications/thunderbird.desktop \
		${MOZ}/README.OpenBSD
@


1.92
log
@Harmonize default search paths for systemwide thunderbird extensions
and plugins to ${LOCALBASE}/lib/mozilla/{plugins,extensions}. Doesn't
affect existing applications/installed plugins as laucher script still
adds lib/mozilla-plugins to MOZ_PLUGIN_PATH, and so far no package
installs systemwide mozilla extensions. In the long term, will permit to
un-subpackage lightning & enigmail for seamonkey & thunderbird.
idea from ajacoutot@@, diff liked by ajacoutot@@ & sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2010/04/03 09:26:45 landry Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
a69 1
				${WRKSRC}/mozilla/nsprpub/build/autoconf \
a127 1
	cd ${WRKSRC}/mozilla/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
@


1.91
log
@Major update to mozilla-thunderbird 3.0.4. See for details:
http://www.mozillamessaging.com/en-US/thunderbird/3.0.4/releasenotes/
Backing up your profile before upgrading is recommended..
Update largely based on www/firefox35 port, tested on
i386/amd64/sparc64/powerpc by myself and alpha by naddy@@.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2010/03/23 18:16:01 espie Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
d130 2
a131 1
	${SUBST_CMD} ${WRKSRC}/mozilla/js/src/xpconnect/shell/Makefile.in \
@


1.90
log
@ports that work are better...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2010/03/21 10:35:03 ajacoutot Exp $
d6 1
a6 1
COMMENT=	redesign of Mozilla's mail component
d8 7
a14 4
VER=		2.0.0.23
DISTNAME=	mozilla
PKGNAME=	mozilla-thunderbird-${VER}p2
SO_VERSION=	14.0
d20 10
a29 10
.for _lib in accessibility appcomps auth autoconfig caps chrome commandlines \
	composer docshell editor embedcomponents fileview gfx_gtk gfxps \
	gfxpsshar gkgfx gklayout gtkembedmoz gtkxtbin htmlpars i18n imglib2 \
	import jar50 jsd ldap50 mail mailcomps mork mozfind mozjs mozldap \
	msgsmime myspell necko necko2 nsappshell pipboot \
	pipnss pippki pref prldap50 rdf remoteservice \
	spellchecker sqlite3 storagecomps system-pref toolkitcomps \
	transformiix txmgr uconv universalchardet wallet walletviewers \
	webbrwsr websrvcs widget_gtk2 xmlextras xpcom xpcom_compat \
	xpcom_compat_c xpcom_core xpconnect xpinstall xpistub
d44 1
a44 1
WANTLIB += Xft Xi Xinerama Xrandr Xrender Xt atk-1.0 c cairo expat
d47 2
a48 2
WANTLIB += pangoft2-1.0 pangox-1.0 pixman-1 png pthread pthread-stubs
WANTLIB += xcb stdc++ z
d51 1
a51 1
DISTFILES=	thunderbird-${VER}-source.tar.bz2
d53 1
a53 1
MODULES=	devel/gettext
d59 1
a59 1
		nss3.>=23,smime3.>=23,softokn3.>=23,ssl3.>=23:nss->=3.12.3:security/nss
d68 3
a70 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf \
a75 1
		--with-system-png=${LOCALBASE}	\
a79 1
		--enable-xft			\
a80 1
		--enable-default-toolkit=gtk2	\
d88 2
d98 6
d105 1
a105 1
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
d114 1
a114 1
MOB=		${WRKSRC}/dist/bin
d118 1
a118 1
		greprefs icons init.d isp res
d121 3
a123 1
	@@cp -f ${FILESDIR}/nsSound.cpp ${WRKSRC}/widget/src/gtk2/
d126 8
a133 6
	@@cd ${WRKSRC}/directory/c-sdk && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/mail/app/mozilla.in
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp
d136 1
a136 1
	@@cd ${MOB} && \
d141 3
a143 5
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} \
		${WRKSRC}/LICENSE ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/thunderbird \
		${MOB}/thunderbird-config ${PREFIX}/bin/
	ln -f ${PREFIX}/bin/thunderbird ${PREFIX}/bin/mozilla-thunderbird
d148 2
a149 4
	ln -f ${MOZ}/thunderbird-bin ${MOZ}/mozilla-thunderbird-bin
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		-e 's,!!LOCALBASE!!,${LOCALBASE},g' \
		< ${FILESDIR}/README.OpenBSD > ${MOZ}/README.OpenBSD
d151 5
a155 3
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		< ${FILESDIR}/thunderbird.desktop > \
			${PREFIX}/share/applications/thunderbird.desktop
@


1.89
log
@s/LOCALBASE/PREFIX/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2009/12/21 22:20:12 ajacoutot Exp $
d138 1
a138 1
		-e 's,!!LOCALBASE!!,${LOCALBASE},g'
@


1.88
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2009/11/18 08:43:39 landry Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d138 1
@


1.87
log
@Update comment : productivity/sunbird SHARED_LIBS also needs to be bumped
if SHARED_LIBS changes here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2009/11/17 23:08:12 ajacoutot Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.86
log
@Thunderbird bundles its own libnss3, so use same workaround as for
security/nss:
SHA1_Update conflicts with openssl which may be dynamically loaded
at runtime via libcups or libgssapi so causing a crash due to using
the wrong binding.  So rename here to avoid conflict.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2009/08/21 16:40:42 martynas Exp $
d15 1
a15 1
# SO_VERSION and LIB_DEPENDS to match.
@


1.85
log
@security update to mozilla-thunderbird-2.0.0.23.
MFSA 2009-42  Compromise of SSL-protected communication
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2009/08/10 06:32:43 kili Exp $
d10 2
a11 2
PKGNAME=	mozilla-thunderbird-${VER}
SO_VERSION=	13.0
@


1.84
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2009/07/15 20:06:41 martynas Exp $
d8 1
a8 1
VER=		2.0.0.22
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d23 4
a26 4
	spellchecker storagecomps system-pref toolkitcomps transformiix \
	txmgr uconv universalchardet wallet walletviewers webbrwsr websrvcs \
	widget_gtk2 xmlextras xpcom xpcom_compat xpcom_compat_c xpcom_core \
	xpconnect xpinstall xpistub
d55 2
a56 2
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr \
		nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
@


1.83
log
@provide packages with isp subdir;  so that rss and movemail accounts
could be created;  junk filter could handle headers from spamassassin.
from Andreas Vogele.  reminded by landry@@.  ok giovanni@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2009/06/23 17:05:00 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d44 2
a45 2
WANTLIB += pangoft2-1.0 pangox-1.0 pixman-1 png pthread stdc++
WANTLIB += z
@


1.82
log
@http://www.mozilla.org/security/known-vulnerabilities/thunderbird20.html#thunderbird2.0.0.22
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2009/05/09 22:47:08 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
d108 1
a108 1
		greprefs icons init.d res
@


1.81
log
@adapt sndio backend;  used for mail notifications, and plugins.
get rid of esound.  Henrikas Judickas helped me with testing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2009/03/19 21:59:32 martynas Exp $
d8 1
a8 1
VER=		2.0.0.21
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.80
log
@security update to mozilla-thunderbird-2.0.0.21.  MFSA 2009-10,
MFSA 2009-09, MFSA 2009-07, MFSA 2009-01.
http://www.mozilla.org/security/known-vulnerabilities/thunderbird20.html#thunderbird2.0.0.21
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2009/03/09 21:32:22 sthen Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
d51 1
a51 2
RUN_DEPENDS=	:esound-*:audio/esound \
		:desktop-file-utils-*:devel/desktop-file-utils
d109 3
@


1.79
log
@fix WANTLIB and bump packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2009/01/09 15:54:31 martynas Exp $
d8 1
a8 1
VER=		2.0.0.19
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
@


1.78
log
@- do not run with a predictable directory as root:  firefox,
thunderbird, seamonkey, xulrunner
- add comment for xulrunner why -devel needs to be bumped
suggested and ok naddy@@;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2009/01/09 15:44:50 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d39 7
a45 5
WANTLIB=        X11 Xau Xcursor Xdmcp Xext Xfixes Xcomposite Xdamage \
                Xft Xi Xinerama Xrandr Xrender Xt atk-1.0 c cairo \
                expat fontconfig freetype glib-2.0 gthread-2.0 glitz \
		gmodule-2.0 gobject-2.0 jpeg m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pangox-1.0 pixman-1 png pthread stdc++ z
@


1.78.2.1
log
@MFC:
security update to mozilla-thunderbird-2.0.0.21.  MFSA 2009-10,
MFSA 2009-09, MFSA 2009-07, MFSA 2009-01.
http://www.mozilla.org/security/known-vulnerabilities/thunderbird20.html#thunderbird2.0.0.21

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2009/03/19 21:59:32 martynas Exp $
d8 1
a8 1
VER=		2.0.0.21
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
d39 5
a43 7

WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xft Xi Xinerama Xrandr Xrender Xt atk-1.0 c cairo expat
WANTLIB += fontconfig freetype gio-2.0 glib-2.0 glitz gmodule-2.0
WANTLIB += gobject-2.0 gthread-2.0 jpeg m pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pangox-1.0 pixman-1 png pthread stdc++
WANTLIB += z
@


1.77
log
@security update to mozilla-thunderbird-2.0.0.19.  MFSA 2008-68;
MFSA 2008-67; MFSA 2008-66; MFSA 2008-65; MFSA 2008-64; MFSA 2008-61;
MFSA 2008-60.
http://www.mozilla.org/security/known-vulnerabilities/thunderbird20.html
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2008/12/19 11:42:35 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.76
log
@security update to 2.0.0.18.  MFSA 2008-59; MFSA 2008-58; MFSA
2008-56; MFSA 2008-55; MFSA 2008-52; MFSA 2008-50; MFSA 2008-48.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2008/09/26 19:29:19 martynas Exp $
d8 1
a8 1
VER=		2.0.0.18
@


1.75
log
@security update to mozilla-thunderbird-2.0.0.17.  MFSA 2008-46,
MFSA 2008-44, MFSA 2008-43, MFSA 2008-42, MFSA 2008-41, MFSA 2008-38,
MFSA 2008-37
http://www.mozilla.org/security/known-vulnerabilities/thunderbird20.html#thunderbird2.0.0.17
ok naddy@@.  looks good to kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2008/09/18 13:37:41 ajacoutot Exp $
d8 1
a8 1
VER=		2.0.0.17
@


1.74
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2008/08/23 22:07:03 martynas Exp $
d8 1
a8 1
VER=		2.0.0.16
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
@


1.73
log
@adapt from mozilla-firefox: use system libm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2008/07/25 17:41:06 martynas Exp $
a62 1
SUBST_VARS=	LOCALBASE
@


1.72
log
@document the new MOZ_PLUGIN_PATH behavior, bump pkgnames
pointed out, and looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2008/07/24 10:10:33 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.71
log
@security update to mozilla-thunderbird-2.0.0.16.  MFSA 2008-34;
MFSA 2008-33; MFSA 2008-31; MFSA 2008-29; MFSA 2008-26; MFSA 2008-25;
MFSA 2008-24; MFSA 2008-21.
see http://www.mozilla.org/security/known-vulnerabilities/thunderbird20.html#thunderbird2.0.0.16
"just be bold and commit it" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2008/07/21 19:19:06 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.70
log
@adapt for other mozilla projects claudio's diff of firefox to honor
MOZ_PLUGIN_PATH.  bump pkgnames
sure claudio@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2008/05/06 20:35:48 martynas Exp $
d8 1
a8 1
VER=		2.0.0.14
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d43 1
a43 1
		pangoft2-1.0 pangox-1.0 png pthread stdc++ z
d113 1
@


1.69
log
@security update to mozilla-thunderbird-2.0.0.14.  MFSA 2008-15; MFSA 2008-14.
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird2.0.0.14
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2008/02/29 21:49:48 bernd Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.68
log
@Security update to mozilla-thunderbird-2.0.0.12 to fix multiple
vulnerabilities.

More information:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird$

Tested by many. Thank you!

ok ian@@, martynas@@, kurt@@, pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2008/02/12 23:19:37 sthen Exp $
d8 1
a8 1
VER=		2.0.0.12
@


1.67
log
@Thunderbird runs^W ambles on arm when it knows what ABI to use.
Probably no change to !arm (and it was not previously built on arm),
but bump to be sure. Adapted from martynas' diff for xulrunner.

ok martynas
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2008/02/04 19:52:25 jasper Exp $
d8 1
a8 1
VER=		2.0.0.9
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p2
@


1.66
log
@- install a .desktop file, so that a thunderbird entry will appear in menus
  like gnome's.

ok ajacoutot@@ kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2008/01/23 16:46:48 martynas Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	alpha amd64 i386 powerpc sparc sparc64
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
@


1.65
log
@remove @@cwd;  improvements, testing and ok kurt@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2007/11/16 21:32:10 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d49 2
a50 1
RUN_DEPENDS=	:esound-*:audio/esound
d135 4
@


1.64
log
@security update to mozilla-thunderbird-2.0.0.9:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird2.0.0.9
ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2007/11/14 09:43:40 steven Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.63
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2007/10/02 19:09:44 jasper Exp $
d8 1
a8 1
VER=		2.0.0.6
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d39 5
a43 5
WANTLIB=        X11 Xau Xcursor Xdmcp Xext Xfixes Xft Xi Xinerama \
                Xrandr Xrender Xt atk-1.0 c cairo expat fontconfig \
                freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 \
                jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
                pangox-1.0 png pthread stdc++ z Xcomposite Xdamage
a107 3

post-extract:
	@@cp ${FILESDIR}/xptc* ${WRKSRC}/xpcom/reflect/xptcall/src/md/unix/
@


1.62
log
@we prefer the idiom of MODULES=devel/gettext over MODULES=gettext

"looks good" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2007/09/16 00:17:05 merdely Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d43 1
a43 1
                pangox-1.0 png pthread stdc++ z
@


1.61
log
@Remove surrounding quotes in COMMENT*/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2007/09/05 14:58:39 fgsch Exp $
d48 1
a48 1
MODULES=	gettext
@


1.60
log
@Talk about thunderbird, not firefox. Bump package. ok kurt@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2007/08/05 15:42:24 martynas Exp $
d6 1
a6 1
COMMENT=	"redesign of Mozilla's mail component"
@


1.59
log
@security update to 2.0.0.6, fixes MFSA 2007-27 and MFSA 2007-26
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird2.0.0.6
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2007/07/26 17:49:15 naddy Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.58
log
@SECURITY update to 2.0.0.5.
Fixes a rash of security vulnerabilities and bugs.  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2007/06/22 18:51:30 martynas Exp $
d8 1
a8 1
VER=		2.0.0.5
@


1.57
log
@security update to 2.0.0.4 plus some minor things, like consistify
COMMENT w/ firefox, move MESSAGE/part of DESCR to README.OpenBSD,
wantlib for xenocara
http://www.mozilla.org/projects/security/known-vulnerabilities.html#firefox2.0.0.4
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2007/06/13 12:06:59 martynas Exp $
d8 1
a8 1
VER=		2.0.0.4
@


1.56
log
@soft fd to 128, as has been done for firefox; researched, help and
ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2007/04/30 22:40:31 martynas Exp $
d6 1
a6 1
COMMENT=	"redesign of the integrated Mozilla App-Suite mail component"
d8 1
a8 1
VER=		2.0.0.0
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d34 1
a34 1
# mozilla public license
d39 5
a43 5
WANTLIB=	X11 Xau Xdmcp Xft Xrender Xinerama Xt c expat \
		fontconfig freetype m pthread z \
		atk-1.0 cairo glib-2.0 gmodule-2.0 gobject-2.0 glitz \
		jpeg pango-1.0 pangoft2-1.0 pangocairo-1.0 pangox-1.0 \
		png stdc++
d90 2
a91 4
		--enable-official-branding

#  from mail/config/mozconfig
CONFIGURE_ARGS+=--enable-application=mail
d122 1
a122 2
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \;
	@@cd ${MOB} && \
d125 2
a126 2
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
	${INSTALL_DATA} ${WRKSRC}/LICENSE ${MOZ}
d135 2
@


1.55
log
@major update to mozilla-thunderbird-2.0.0.0. also:
- use official branding;
- external nss;
- don't force optimizations;
- make it work with misc/mozilla-dicts;
tested by many, including ajacoutot@@, ian@@, matthieu@@, Mike Erdely, Niko
Itajarvi, Simon Kuhnle
input/ok kurt@@, wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/04/06 14:48:57 martynas Exp $
d10 1
a10 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.54
log
@consistent MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/03/19 22:02:38 martynas Exp $
d8 1
a8 1
VER=		1.5.0.10
d11 1
a11 1
SO_VERSION=	12.1
d18 9
a26 9
	composer docshell editor embedcomponents fileview freebl3 gfx_gtk \
	gfxps gfxpsshar gkgfx gklayout gtkembedmoz gtkxtbin htmlpars i18n \
	imglib2 import jar50 jsd ldap50 mail mailcomps mork mozfind mozjs \
	mozldap msgsmime myspell necko necko2 nsappshell nss3 nssckbi pipboot \
	pipnss pippki pref prldap50 rdf remoteservice smime3 \
	softokn3 spellchecker ssl3 system-pref toolkitcomps txmgr uconv \
	universalchardet wallet walletviewers webbrwsr websrvcs widget_gtk2 \
	xmlextras xpcom xpcom_compat xpcom_compat_c xpcom_core xpconnect \
	xpinstall xpistub
d39 2
a40 1
WANTLIB=	X11 Xext Xft Xrender Xinerama Xt c fontconfig freetype m pthread z \
d42 2
a43 1
		jpeg pango-1.0 pangoft2-1.0 pangocairo-1.0 png stdc++
d53 2
a54 1
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
d62 1
a62 1
SUBST_VARS=	LOCALBASE SO_VERSION
d73 1
d76 1
a76 1
		--enable-optimize=-Os		\
d89 2
a90 1
		--enable-canvas
d99 1
a99 2
		SO_VERSION="${SO_VERSION}" \
		NSPR_LIB_DIR="${LOCALBASE}/lib"
d101 3
a103 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
d108 3
d122 7
a128 9
.for dir in chrome components defaults extensions greprefs res
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
	@@cd ${MOB} && ${TAR} -chf - *.so.??.? | \
		${TAR} -xf - -C ${MOZ}
	@@chmod 444 ${MOZ}/*.so.??.? ${MOZ}/components/*.so.??.? ${MOZ}/components/*.js
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
d130 2
a131 3

	${INSTALL_DATA} ${WRKSRC}/mail/app/mozicon16.xpm ${WRKSRC}/mail/app/mozicon50.xpm ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/thunderbird ${MOB}/thunderbird-config ${PREFIX}/bin/
d134 3
a136 1
	${INSTALL_PROGRAM} ${MOB}/regxpcom ${MOB}/thunderbird-bin ${MOB}/mozilla-xremote-client ${MOZ}
@


1.53
log
@Security update to mozilla-thunderbird 1.5.0.10.
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.10
ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/02/22 00:40:59 naddy Exp $
d43 1
a43 2
MASTER_SITES=	http://ftp.eu.mozilla.org/pub/mozilla.org/thunderbird/releases/${VER}/source/ \
		http://ftp.mozilla.org/pub/mozilla.org/thunderbird/releases/${VER}/source/
@


1.52
log
@LP64 fix for XUL templates builder; from Martynas Venckus
ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2007/01/04 20:19:54 steven Exp $
d3 1
d8 1
a8 1
VER=		1.5.0.9
d10 2
a11 2
PKGNAME=	mozilla-thunderbird-${VER}p1
SO_VERSION=	12.0
d18 4
a21 4
	composer docshell editor embedcomponents fileview gfx_gtk gfxps \
	gfxpsshar gkgfx gklayout gtkembedmoz gtkxtbin htmlpars i18n imglib2 \
	import jar50 jsd ldap50 mail mailcomps mork mozfind mozjs mozldap \
	msgsmime myspell necko necko2 nsappshell nss3 nssckbi pipboot \
d95 2
a96 1
		SO_VERSION="${SO_VERSION}"
@


1.52.2.1
log
@MFC:
Security update to mozilla-thunderbird 1.5.0.10.
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2007/02/22 00:40:59 naddy Exp $
a2 1
SHARED_ONLY=	Yes
d7 1
a7 1
VER=		1.5.0.10
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}
SO_VERSION=	12.1
d17 4
a20 4
	composer docshell editor embedcomponents fileview freebl3 gfx_gtk \
	gfxps gfxpsshar gkgfx gklayout gtkembedmoz gtkxtbin htmlpars i18n \
	imglib2 import jar50 jsd ldap50 mail mailcomps mork mozfind mozjs \
	mozldap msgsmime myspell necko necko2 nsappshell nss3 nssckbi pipboot \
d42 2
a43 1
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/thunderbird/releases/${VER}/source/
d94 1
a94 2
		SO_VERSION="${SO_VERSION}" \
		NSPR_LIB_DIR="${LOCALBASE}/lib"
@


1.52.2.2
log
@security update to thunderbird 1.5.0.12
set soft fd to 128
backport an nss fix for a deadlock seen w/ enigmail
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52.2.1 2007/05/01 16:20:21 sturm Exp $
d8 1
a8 1
VER=		1.5.0.12
@


1.51
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2006/12/21 21:52:12 kurt Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.50
log
@add comment to remind committers to keep enigmail in sync. okay steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2006/12/21 08:39:01 steven Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
d39 1
a39 1
		atk-1.0 cairo glib-2.0 gmodule-2.0 gobject-2.0 \
@


1.49
log
@SECURITY update to thunderbird 1.5.0.9

for details, see
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Thunderbird

from Martynas Venckus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2006/12/16 12:22:34 espie Exp $
d12 4
a15 1
# components dir to avoid pkg_add -r issues.
d96 1
a96 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
@


1.48
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2006/11/30 21:08:34 kurt Exp $
d7 1
a7 1
VER=		1.5.0.8
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p1
SO_VERSION=	11.0
@


1.47
log
@- require nspr with PR_GetLibraryName fix
- bump major due to previous nspr removal
- remove some leftover nspr pre-configure steps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2006/11/17 19:20:19 kurt Exp $
d46 1
a46 2
		:zip->=2.3:archivers/zip \
		:pkgconfig-*:devel/pkgconfig
@


1.46
log
@use devel/nspr instead of internal nspr. now using libc strtod and __dtoa
via devel/nspr. okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2006/11/10 14:16:41 wilfried Exp $
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p0
SO_VERSION=	10.0
d49 1
a49 1
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.3p2:devel/nspr
a102 1
	@@cd ${WRKSRC}/nsprpub && ${SETENV} ${AUTOCONF_ENV} ${AUTOCONF}
a106 1
		${WRKSRC}/nsprpub/pr/include/md/_openbsd.h \
@


1.45
log
@SECURITY update to 1.5.0.8

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2006/10/01 22:23:47 brad Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
d17 2
a18 2
	msgsmime myspell necko necko2 nsappshell nspr4 nss3 nssckbi pipboot \
	pipnss pippki plc4 plds4 pref prldap50 rdf remoteservice smime3 \
d37 1
a37 2
		jpeg pango-1.0 pangoft2-1.0 pangocairo-1.0 png
WANTLIB+=	stdc++
d48 2
a49 1
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
a59 1
				${WRKSRC}/nsprpub/build/autoconf \
d67 1
a68 1
		--without-system-nspr		\
@


1.44
log
@stop using the gcc3 module on the alpha architecture.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2006/09/20 08:35:31 steven Exp $
d7 1
a7 1
VER=		1.5.0.7
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p1
SO_VERSION=	9.0
d118 1
a118 1
	@@cd ${MOB} && ${TAR} -chf - *.so.?.? | \
d120 2
a121 1
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
@


1.43
log
@SECURITY update to thunderbird 1.5.0.7

fixes several vulnerabilities, for details see:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2006/09/18 15:18:36 steven Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
a37 1
.if empty(MACHINE_ARCH:Malpha)
a38 1
.endif
d44 1
a44 3
MODULES=	gcc3 gettext
MODGCC3_ARCHES=	alpha
MODGCC3_LANGS=	C++
@


1.42
log
@fix version so it shows in the "about" dialog.

problem noticed by matthieu
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/09/18 11:50:40 espie Exp $
d7 1
a7 1
VER=		1.5.0.4
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p0
SO_VERSION=	8.0
@


1.41
log
@zap unneeded 0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/07/02 15:54:54 steven Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.40
log
@SECURITY update to thunderbird 1.5.0.4

more info:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/06/13 13:27:12 bernd Exp $
d36 2
a37 2
		atk-1.0.0.0 cairo glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
		jpeg pango-1.0.0.0 pangoft2-1.0.0.0 pangocairo-1.0.0.0 png
d53 1
a53 1
LIB_DEPENDS=	gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2
@


1.40.2.1
log
@MFC:
SECURITY update to thunderbird 1.5.0.7

fixes several vulnerabilities, for details see:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/07/02 15:54:54 steven Exp $
d7 1
a7 1
VER=		1.5.0.7
d10 1
a10 1
SO_VERSION=	9.0
@


1.40.2.2
log
@MFC:
SECURITY update to 1.5.0.8

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40.2.1 2006/11/01 11:53:30 sturm Exp $
d7 1
a7 1
VER=		1.5.0.8
d10 1
a10 1
SO_VERSION=	10.0
d122 1
a122 1
	@@cd ${MOB} && ${TAR} -chf - *.so.??.? | \
d124 1
a124 2
	@@chmod 444 ${MOZ}/*.so.??.? ${MOZ}/components/*.so.??.? ${MOZ}/components/*.js
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
@


1.40.2.3
log
@MFC:
SECURITY update to thunderbird 1.5.0.9

for details, see
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Thunderbird
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40.2.2 2006/11/10 20:43:39 sturm Exp $
d7 1
a7 1
VER=		1.5.0.9
d10 1
a10 1
SO_VERSION=	12.0
@


1.40.2.4
log
@MFC:
Security update to mozilla-thunderbird 1.5.0.10.
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40.2.3 2006/12/24 06:12:43 sturm Exp $
d7 1
a7 1
VER=		1.5.0.10
d10 1
a10 1
SO_VERSION=	12.1
d14 6
a19 6
	composer docshell editor embedcomponents fileview freebl3 gfx_gtk \
	gfxps gfxpsshar gkgfx gklayout gtkembedmoz gtkxtbin htmlpars i18n \
	imglib2 import jar50 jsd ldap50 mail mailcomps mork mozfind mozjs \
	mozldap msgsmime myspell necko necko2 nsappshell nspr4 nss3 nssckbi \
	pipboot pipnss pippki plc4 plds4 pref prldap50 rdf remoteservice \
	smime3 softokn3 spellchecker ssl3 system-pref toolkitcomps txmgr uconv \
@


1.40.2.5
log
@security update to thunderbird 1.5.0.12
set soft fd to 128
backport an nss fix for a deadlock seen w/ enigmail
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40.2.4 2007/03/23 07:36:18 sturm Exp $
d7 1
a7 1
VER=		1.5.0.12
@


1.39
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/05/02 07:25:20 wilfried Exp $
d7 1
a7 1
VER=		1.5.0.2
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p0
SO_VERSION=	7.0
@


1.38
log
@update to 1.5.0.2

fixes multiple critical vulnerabilities
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/02/12 19:31:36 david Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
d37 1
a37 2
		jpeg pango-1.0.0.0 pangoft2-1.0.0.0 pangox-1.0.0.0 \
		pangoxft-1.0.0.0 png
@


1.37
log
@remove "the the" and replace /usr/local with PREFIX in MESSAGE; bump PKGNAME
ok wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/02/10 20:10:57 ian Exp $
d7 1
a7 1
VER=		1.5
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p2
SO_VERSION=	6.0
@


1.37.2.1
log
@MFC:
update to 1.5.0.2

fixes multiple critical vulnerabilities
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/02/12 19:31:36 david Exp $
d7 1
a7 1
VER=		1.5.0.2
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}
SO_VERSION=	7.0
@


1.37.2.2
log
@MFC:
SECURITY update to thunderbird 1.5.0.4

more info:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37.2.1 2006/05/05 05:40:16 sturm Exp $
d7 1
a7 1
VER=		1.5.0.4
d10 1
a10 1
SO_VERSION=	8.0
@


1.37.2.3
log
@MFC:
SECURITY update to thunderbird 1.5.0.7

fixes several vulnerabilities, for details see:
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37.2.2 2006/07/03 22:28:54 sturm Exp $
d7 1
a7 1
VER=		1.5.0.7
d10 1
a10 1
SO_VERSION=	9.0
@


1.37.2.4
log
@MFC:
SECURITY update to 1.5.0.8

see http://www.mozilla.org/projects/security/known-vulnerabilities.html
for details
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37.2.3 2006/09/20 20:48:48 sturm Exp $
d7 1
a7 1
VER=		1.5.0.8
d10 1
a10 1
SO_VERSION=	10.0
d123 1
a123 1
	@@cd ${MOB} && ${TAR} -chf - *.so.??.? | \
d125 1
a125 2
	@@chmod 444 ${MOZ}/*.so.??.? ${MOZ}/components/*.so.??.? ${MOZ}/components/*.js
	chown -R ${SHAREOWN}:${SHAREGRP} ${MOZ}
@


1.37.2.5
log
@MFC:
SECURITY update to thunderbird 1.5.0.9

for details, see
http://www.mozilla.org/projects/security/known-vulnerabilities.html#Thunderbird
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37.2.4 2006/11/11 00:25:06 sturm Exp $
d7 1
a7 1
VER=		1.5.0.9
d10 1
a10 1
SO_VERSION=	12.0
@


1.37.2.6
log
@MFC:
Security update to mozilla-thunderbird 1.5.0.10.
http://www.mozilla.org/projects/security/known-vulnerabilities.html#thunderbird1.5.0.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37.2.5 2006/12/23 20:54:43 sturm Exp $
d7 1
a7 1
VER=		1.5.0.10
d10 1
a10 1
SO_VERSION=	12.1
d14 6
a19 6
	composer docshell editor embedcomponents fileview freebl3 gfx_gtk \
	gfxps gfxpsshar gkgfx gklayout gtkembedmoz gtkxtbin htmlpars i18n \
	imglib2 import jar50 jsd ldap50 mail mailcomps mork mozfind mozjs \
	mozldap msgsmime myspell necko necko2 nsappshell nspr4 nss3 nssckbi \
	pipboot pipnss pippki plc4 plds4 pref prldap50 rdf remoteservice \
	smime3 softokn3 spellchecker ssl3 system-pref toolkitcomps txmgr uconv \
@


1.36
log
@To make Thunderbird open links using Firefox...; bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/02/09 08:34:07 steven Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p1
@


1.35
log
@fix WANTLIB.  ok wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/01/23 12:34:06 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.34
log
@update thunderbird to 1.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/01/14 00:07:30 espie Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
d35 1
a35 1
WANTLIB=	X11 Xft Xrender Xinerama Xt c fontconfig freetype m pthread z \
@


1.33
log
@more C++ libs bumps. Done thru mail, plus lizards.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2006/01/01 16:03:53 sturm Exp $
d7 1
a7 1
VER=		1.0.7
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p3
SO_VERSION=	5.0
d13 10
a22 9
.for _lib in accessibility appcomps caps chrome composer docshell editor \
	embedcomponents fileview gfx_gtk gfxps gfxxprint gkgfx gklayout \
	gtkembedmoz gtkxtbin htmlpars i18n imglib2 import jar50 jsd ldap50 \
	mail mailcomps mork mozfind mozjs mozldap msgsmime myspell necko \
	necko2 nsappshell nspr4 nss3 nssckbi pipboot pipnss pippki plc4 plds4 \
	pref prldap50 rdf smime3 softokn3 spellchecker ssl3 txmgr uconv wallet \
	walletviewers webbrwsr websrvcs widget_gtk2 xlibrgb xmlextras xpcom \
	xpcom_compat xpcom_compat_c xpconnect xpinstall xpistub \
	xremote_client xremoteservice
d35 4
a38 4
WANTLIB=		X11 Xext Xft Xp Xrender Xt c cairo fontconfig freetype \
			m pthread z atk-1.0.0.0 glib-2.0.0.0 \
			gmodule-2.0.0.0 gobject-2.0.0.0 jpeg pango-1.0.0.0 \
			pangoft2-1.0.0.0 pangocairo-1.0.0.0 png
d40 1
a40 1
WANTLIB+=		stdc++
d47 1
a47 1
MODULES=	gcc3 devel/gettext
d81 9
a89 1
		--disable-installer
d92 1
a92 13
CONFIGURE_ARGS+=--enable-crypto			\
		--disable-mathml		\
		--disable-activex		\
		--disable-activex-scripting	\
		--disable-tests			\
		--disable-oji			\
		--disable-plugins		\
		--disable-necko-disk-cache	\
		--enable-single-profile		\
		--disable-profilesharing	\
		--enable-extensions=wallet,spellcheck,xmlextras,webservices \
		--enable-necko-protocols=http,file,jar,viewsource,res,data \
		--enable-image-decoders=default,-xbm
d94 1
a94 6
CONFIGURE_ENV=	MOZ_THUNDERBIRD=1 \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
MAKE_ENV=	MOZ_THUNDERBIRD=1 \
d99 2
a103 1
MAGIC=		{972ce4c6-7e08-4474-a285-3208198ce6fd}
d118 1
a118 1
.for dir in chrome components defaults greprefs res
d127 1
d129 2
a130 3
	${INSTALL_SCRIPT} ${MOB}/thunderbird ${PREFIX}/bin/mozilla-thunderbird
	ln -f ${PREFIX}/bin/mozilla-thunderbird ${PREFIX}/bin/thunderbird
	${INSTALL_SCRIPT} ${MOB}/thunderbird-config ${PREFIX}/bin/
d132 1
a132 1
	${INSTALL_PROGRAM} ${MOB}/regchrome ${MOB}/regxpcom ${MOB}/thunderbird-bin ${MOB}/mozilla-xremote-client ${MOZ}
a133 6

	${INSTALL_DATA_DIR} ${MOZ}/extensions
	${INSTALL_DATA} ${FILESDIR}/Extensions.rdf ${MOZ}/extensions/
	${INSTALL_DATA_DIR} ${MOZ}/extensions/${MAGIC}
	${INSTALL_DATA} ${MOZ}/defaults/profile/extensions/installed-extensions.txt ${MOZ}/extensions/installed-extensions-processed.txt
	${INSTALL_DATA} ${MOZ}/defaults/profile/extensions/${MAGIC}/install.rdf ${MOZ}/extensions/${MAGIC}/
@


1.32
log
@SHARED_LIBS, keeping the same SO_VERSION for all libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/11/17 15:53:51 naddy Exp $
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p2
SO_VERSION=	4.0
@


1.31
log
@get WANTLIB right after actually building the package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/11/15 09:21:51 wilfried Exp $
d13 11
@


1.30
log
@fix packages-specs brain fart from yesterday and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/11/14 12:51:57 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d26 1
a26 1
			pangoft2-1.0.0.0 pangocairo-1.0.0.0
@


1.29
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/10/25 21:08:40 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d38 2
a39 2
RUN_DEPENDS=	::audio/esound
BUILD_DEPENDS=	::devel/libIDL \
d41 1
a41 1
		::devel/pkgconfig
@


1.28
log
@Update to 1.0.7

Don't try to build the gnomevfs and libgnome plugins to avoid an
hidden dependency on gnome
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/10/21 08:47:14 aanriot Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
d23 1
a23 1
WANTLIB=		X11 Xext Xft Xp Xrender Xt c fontconfig freetype \
d26 1
a26 1
			pangox-1.0.0.0 pangoxft-1.0.0.0 png
d38 2
a39 2
RUN_DEPENDS=	:esound-*:audio/esound
BUILD_DEPENDS=	:libIDL-*:devel/libIDL \
d41 1
a41 1
		:pkgconfig-*:devel/pkgconfig
@


1.27
log
@Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.

discussed with naddy@@ and wilfried@@;
patches from and "go ahead, commit" naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/10/14 04:00:37 kurt Exp $
d7 1
a7 1
VER=		1.0.6
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}p3
SO_VERSION=	3.0
@


1.26
log
@remove 'don't close dlopened objects' type ld.so work-arounds
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/10/13 04:32:41 bernd Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p2
@


1.25
log
@If we start a second firefox, don't show the profile chooser but open a
new browser window instead. (The same for thunderbird and mozilla.)

Idea from Marc Winiger <mw at msys.ch>, thanks!

suggestions, tests & ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/09/09 16:22:28 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p1
@


1.24
log
@switch from gtk1 to gtk2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/07/23 13:56:34 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.23
log
@update to 1.0.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/04/16 19:22:13 kurt Exp $
d9 2
a10 2
PKGNAME=	mozilla-thunderbird-${VER}
SO_VERSION=	2.0
d23 5
a27 3
WANTLIB=		X11 Xext Xft Xi Xp Xrender Xt c fontconfig freetype \
			m pthread z
.  if empty(MACHINE_ARCH:Malpha)
d29 1
a29 1
.  endif
d32 1
a32 1
		http://ftp.mozilla.org/pub/thunderbird/releases/${VER}/source/
d39 1
a39 1
BUILD_DEPENDS=	:ORBit-*:devel/ORBit \
d42 1
a42 4
LIB_DEPENDS=	gtk.1,gdk.1::x11/gtk+ \
		glib.1,gmodule.1::devel/glib \
		jpeg.62::graphics/jpeg \
		png.3::graphics/png
d65 1
@


1.23.2.1
log
@Update to 1.0.7

Don't try to build the gnomevfs and libgnome plugins to avoid an
hidden dependency on gnome;

Mozilla.org bug 210658:
Fix hanging with non-standard HTML elements parsererror, sourcetext.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/07/23 13:56:34 wilfried Exp $
d7 1
a7 1
VER=		1.0.7
d10 1
a10 1
SO_VERSION=	3.0
@


1.23.2.2
log
@update to mozilla-thunderbird 1.0.8

several security fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23.2.1 2005/11/13 12:24:44 robert Exp $
d7 1
a7 1
VER=		1.0.8
d10 1
a10 1
SO_VERSION=	5.0
@


1.22
log
@- make build OFFICAL (enables automatic profile upgrades)
- mention deleting Extensions.rds in MESSAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/04/09 08:11:18 wilfried Exp $
d7 1
a7 1
VER=		1.0.2
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p2
@


1.21
log
@- bump major shlib version
- fix CUPS printing: fix partial so version and don't dlclose lib.
- remove partial so version on freetype
- move INSTALL/DEINSTALL code to PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/04/01 19:24:07 kurt Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d88 2
d93 2
@


1.20
log
@- dont unload dependent libs (avoid dlclose bug)
- fix lp64 bug
- fix alpha wantlib
- adjust depends for esound & ORBit
- use MODULE devel/gettext

okay wilfried@@ and reviewed by alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/03/26 19:04:59 wilfried Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha i386 sparc sparc64 amd64 powerpc
d9 4
a12 1
PKGNAME=	mozilla-thunderbird-${VER}p0
d51 1
a51 1
SUBST_VARS=	LOCALBASE
d87 2
a88 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
d90 2
a91 1
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin"
d105 3
d115 1
a115 1
	@@cd ${MOB} && ${TAR} -chf - *.so.1.0 | \
d117 1
a117 1
	@@chmod 444 ${MOZ}/*.so.1.0 ${MOZ}/components/*.so.1.0 ${MOZ}/components/*.js
d122 2
a123 1
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOB}/thunderbird-config ${MOZ}
@


1.19
log
@update thunderbird to 1.0.2
use same extensions handling as firefox
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/01/13 15:52:07 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
d21 4
a24 1
			iconv intl m pthread stdc++ z
d30 1
a30 1
MODULES=	gcc3
d33 3
a35 1
BUILD_DEPENDS=	:zip->=2.3:archivers/zip \
a38 1
		IDL.4::devel/ORBit \
d40 1
a40 2
		png.3::graphics/png \
		esd.2::audio/esound
@


1.18
log
@fix system png include path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2005/01/10 14:39:22 wilfried Exp $
d7 1
a7 1
VER=		1.0
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p1
d87 1
d112 1
a112 1
	${INSTALL_PROGRAM} ${MOB}/regchrome ${MOB}/regxpcom ${MOB}/thunderbird-bin ${MOZ}
d114 6
@


1.18.2.1
log
@update to thunderbird 1.0.7, several bugfixes included
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/01/13 15:52:07 wilfried Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha amd64 i386 powerpc sparc sparc64 
d7 1
a7 1
VER=		1.0.7
d9 1
a9 4
PKGNAME=	mozilla-thunderbird-${VER}
SO_VERSION=	4.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
d21 1
a21 4
			m pthread z
.if empty(MACHINE_ARCH:Malpha)
WANTLIB+=		stdc++
.endif
d27 1
a27 1
MODULES=	gcc3 devel/gettext
d30 1
a30 3
RUN_DEPENDS=	:esound-*:audio/esound
BUILD_DEPENDS=	:ORBit-*:devel/ORBit \
		:zip->=2.3:archivers/zip \
d34 1
d36 2
a37 1
		png.3::graphics/png
d45 1
a45 1
SUBST_VARS=	LOCALBASE SO_VERSION
d81 1
a81 4
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
d83 1
a83 4
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
a86 1
MAGIC=		{972ce4c6-7e08-4474-a285-3208198ce6fd}
a95 3
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/nsprpub/pr/include/md/_openbsd.h \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp
d103 1
a103 1
	@@cd ${MOB} && ${TAR} -chf - *.so.?.? | \
d105 1
a105 1
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
d110 2
a111 3
	${INSTALL_SCRIPT} ${MOB}/thunderbird-config ${PREFIX}/bin
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/regchrome ${MOB}/regxpcom ${MOB}/thunderbird-bin ${MOB}/mozilla-xremote-client ${MOZ}
a112 6

	${INSTALL_DATA_DIR} ${MOZ}/extensions
	${INSTALL_DATA} ${FILESDIR}/Extensions.rdf ${MOZ}/extensions/
	${INSTALL_DATA_DIR} ${MOZ}/extensions/${MAGIC}
	${INSTALL_DATA} ${MOZ}/defaults/profile/extensions/installed-extensions.txt ${MOZ}/extensions/installed-extensions-processed.txt
	${INSTALL_DATA} ${MOZ}/defaults/profile/extensions/${MAGIC}/install.rdf ${MOZ}/extensions/${MAGIC}/
@


1.18.2.2
log
@update to mozilla-thunderbird 1.0.8

several security fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.1 2005/11/13 12:37:13 sturm Exp $
d7 1
a7 1
VER=		1.0.8
d10 1
a10 1
SO_VERSION=	5.0
@


1.17
log
@bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/01/10 10:17:08 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}p0
@


1.16
log
@always use own nspr
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/01/04 21:27:27 wilfried Exp $
d9 1
a9 1
PKGNAME=	mozilla-thunderbird-${VER}
@


1.15
log
@let's make some noise, using esound
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/01/04 20:59:16 wilfried Exp $
d57 1
@


1.14
log
@fix SUBST_VARS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/12/27 21:21:38 wilfried Exp $
d36 2
a37 1
		png.3::graphics/png
@


1.13
log
@update to thunderbird-1.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/12/08 21:54:48 naddy Exp $
d44 1
@


1.12
log
@Do not disable ProPolice, we have reports of success for most platforms.
ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/08/02 16:08:23 naddy Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha i386 sparc sparc64 amd64
d7 1
a7 1
VER=		0.5
d20 2
d23 3
a25 3
MASTER_SITES=	http://ftp.eu.mozilla.org/pub/mozilla.org/thunderbird/releases/${VER}/ \
		http://ftp.mozilla.org/pub/thunderbird/releases/${VER}/
DISTFILES=	thunderbird-${VER}-source.tar.gz
a30 1
		:bzip2-*:archivers/bzip2 \
d62 3
a64 3
# 
CONFIGURE_ARGS+=--disable-mathml		\
		--disable-installer		\
d67 1
d69 1
d71 1
d73 1
a73 1
		--enable-extensions=wallet,spellcheck,xmlextras \
d75 1
a75 3
		--enable-image-decoders=png,gif,jpeg,bmp \
		--enable-crypto			\
		--disable-ldap
d82 1
a82 1
MOB=		${WRKSRC}/dist
a84 6
do-extract:
	@@PATH=${PORTPATH}; set -e; cd ${WRKDIR}; \
	${GZIP_CMD} -dc ${FULLDISTDIR}/${DISTFILES} | tar xf - ; \
	${BZIP2} -dc ${WRKDIR}/mozilla-thunderbird/archives/thunderbird-${VER}-source.tar.bz2 | tar xf -; \
	rm -rf ${WRKDIR}/mozilla-thunderbird

d90 1
d95 1
a95 1
.for dir in chrome components defaults res
d97 1
a97 1
	@@cd ${MOB}/bin && ${TAR} -chf - ${dir} | \
d100 1
a100 1
	@@cd ${MOB}/bin && ${TAR} -chf - *.so.1.0 | \
d105 5
a109 4
	${INSTALL_SCRIPT} ${MOB}/bin/thunderbird ${PREFIX}/bin/mozilla-thunderbird
	ln ${PREFIX}/bin/mozilla-thunderbird ${PREFIX}/bin/thunderbird
	${INSTALL_SCRIPT} ${MOB}/bin/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/bin/regchrome ${MOB}/bin/regxpcom ${MOB}/bin/thunderbird-bin ${MOZ}
@


1.11
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/05/06 14:39:49 wilfried Exp $
a73 6

# There is no problem with the propolice-enabled gcc3 on amd64 and sparc64,
# but it is reported to still be broken on others.
.if ${MACHINE_ARCH} != "amd64" && ${MACHINE_ARCH} != "sparc64"
CFLAGS+=	-fno-stack-protector
.endif
@


1.10
log
@use no-autoheader and explicitly set autoconf version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/04/09 09:52:09 espie Exp $
d43 4
@


1.9
log
@sprinkle no-autoheader for the coming change to autoconf CONFIGURE_STYLE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/03/03 08:20:55 pvalchev Exp $
d44 1
@


1.8
log
@enable propolice on sparc64 here too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/03/02 08:34:11 pvalchev Exp $
d44 1
a44 1
CONFIGURE_STYLE= autoconf
@


1.7
log
@amd64 support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/02/29 20:51:32 wilfried Exp $
d70 1
a70 1
# There is no problem with the propolice-enabled gcc3 on amd64,
d72 1
a72 1
.if ${MACHINE_ARCH} != "amd64"
@


1.6
log
@new distfile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/02/25 02:35:16 naddy Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha i386 sparc sparc64
d70 3
d74 2
@


1.5
log
@The sparc64 compiler is gcc3 now; don't require the gcc3 module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/02/23 17:58:56 wilfried Exp $
d23 1
a23 1
DISTFILES=	thunderbird-${VER}-source.tar.bz2
d29 1
d79 6
a85 6
	# Hopefully an distfile without dos-text files will come soon
	cd ${WRKSRC} && find . -type f -print0 | xargs -0 perl -pi -e 's/\r\n/\n/'
	# Permissions are really screwy also
	cd ${WRKSRC} && find . -type f -a ! -name \*.pl -print0 | xargs -0 chmod a-x,a+r
	cd ${WRKSRC} && find . -type d -print0 | xargs -0 chmod 777 

d103 1
@


1.4
log
@forgot to remove graphics/libmng dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/02/15 19:41:58 wilfried Exp $
d26 1
a26 1
MODGCC3_ARCHES=	alpha sparc64
@


1.3
log
@update to mozilla-thunderbird 0.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/01/19 14:36:49 wilfried Exp $
d34 1
a34 2
		png.3::graphics/png \
		mng.1::graphics/libmng
a44 1
		--with-system-mng=${LOCALBASE}	\
@


1.2
log
@don't use xft if no xft fonts is available
stops moz from crashing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/01/18 11:47:42 wilfried Exp $
d7 1
a7 1
VER=		0.4
d21 3
a23 2
MASTER_SITES=	http://ftp.mozilla.org/pub/thunderbird/releases/${VER}/
DISTFILES=	thunderbird-source-${VER}.tar.bz2
d26 1
a26 1
MODGCC3_ARCHES=	alpha sparc64 powerpc
d45 1
a45 2
CONFIGURE_ARGS=					\
		--with-system-jpeg=${LOCALBASE}	\
d51 8
a58 2
		--enable-optimize=-O2		\
		--disable-mathml		\
a68 3
		--disable-pedantic		\
		--disable-debug			\
		--disable-tests			\
d81 6
d95 1
a95 1
.for dir in chrome components defaults icons plugins res
d102 1
a107 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.40 2003/07/16 19:31:25 naddy Exp $
d82 1
a82 1
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g' \
@


1.1.1.1
log
@import of mozilla-thunderbird-0.4

redesign of the integrated Mozilla App-Suite mail component
@
text
@@
