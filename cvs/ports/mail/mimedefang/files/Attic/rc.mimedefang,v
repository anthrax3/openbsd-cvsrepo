head	1.6;
access;
symbols
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.1.1.0.4
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	alek_20061019:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2010.12.07.02.56.19;	author okan;	state dead;
branches;
next	1.5;

1.5
date	2009.12.12.15.38.07;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.29.14.36.12;	author okan;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.21.23.28.14;	author okan;	state Exp;
branches;
next	1.2;

1.2
date	2007.11.02.22.40.03;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.19.01.06.22;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.19.01.06.22;	author alek;	state Exp;
branches;
next	;


desc
@@


1.6
log
@- update to 2.71
- switch to pkg-readmes
- add rc scripts

pointers with README's and ok jasper@@
@
text
@# $OpenBSD: rc.mimedefang,v 1.5 2009/12/12 15:38:07 ajacoutot Exp $

mimedefang=${TRUEPREFIX}/bin/mimedefang
multiplexor=${TRUEPREFIX}/bin/mimedefang-multiplexor

if [ -x $mimedefang -a -x $multiplexor ]; then
	MAX_SLAVES=16
	MIN_SLAVES=2
	BUSY_TIMEOUT=720
	IDLE_TIMEOUT=300
	WAIT_START=10
	MX_QUEUE_SIZE=10
	MX_QUEUE_TIMEOUT=30

	install -d -o _mdefang /var/run/mdefang

	echo -n " mimedefang-multiplexor"
	$multiplexor -U _mdefang -l \
		-x $MAX_SLAVES -m $MIN_SLAVES -b $BUSY_TIMEOUT \
		-i $IDLE_TIMEOUT -w $WAIT_START -q $MX_QUEUE_SIZE \
		-Q $MX_QUEUE_TIMEOUT \
		-p /var/run/mdefang/multiplexor.pid \
		-s /var/run/mdefang/multiplexor.socket

	echo -n " mimedefang"
	$mimedefang -U _mdefang -r -s -t \
		-p /var/run/mdefang/mimedefang.socket \
		-m /var/run/mdefang/multiplexor.socket

	sleep 3 # for socket creation
fi
@


1.5
log
@s/LOCALBASE/TRUEPREFIX

ok okan@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: rc.mimedefang,v 1.4 2008/10/29 14:36:12 okan Exp $
@


1.4
log
@swap pid for socket (-p) in sample rc script and bump

ok sthen
@
text
@d1 1
a1 1
# $OpenBSD: rc.mimedefang,v 1.3 2008/10/21 23:28:14 okan Exp $
d3 2
a4 2
mimedefang=${LOCALBASE}/bin/mimedefang
multiplexor=${LOCALBASE}/bin/mimedefang-multiplexor
@


1.3
log
@- update to 2.65
- use SUBST_CMD
- fix sample startup rc.mimedefang

ok merdely
@
text
@d1 1
a1 1
# $OpenBSD: rc.mimedefang,v 1.2 2007/11/02 22:40:03 sthen Exp $
d27 1
a27 1
		-p /var/run/mdefang/mimedefang.pid \
@


1.2
log
@update to 2.63

ok steven
@
text
@d1 1
a1 1
# $OpenBSD: rc.mimedefang,v 1.1.1.1 2006/10/19 01:06:22 alek Exp $
d3 2
a4 2
mimedefang=%LOCALBASE%/bin/mimedefang
multiplexor=%LOCALBASE%/bin/mimedefang-multiplexor
d27 1
a27 1
		-p /var/run/mdefang/mimedefang.socket \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 2
a4 11
mimedefang=/usr/local/bin/mimedefang                                                                                                        
multiplexor=/usr/local/bin/mimedefang-multiplexor                                                                                           
                                                                                                                                            
if [ -x $mimedefang -a -x $multiplexor ]; then                                                                                              
	MAX_SLAVES=16                                                                                                                           
	MIN_SLAVES=2                                                                                                                            
	BUSY_TIMEOUT=720                                                                                                                        
	IDLE_TIMEOUT=300                                                                                                                        
	WAIT_START=10                                                                                                                           
	MX_QUEUE_SIZE=10                                                                                                                        
	MX_QUEUE_TIMEOUT=30                                                                                                                     
d6 8
a13 1
	echo -n " mimedefang-multiplexor"                                                                                                       
d15 3
d19 3
a21 2
		-x $MAX_SLAVES -m $MIN_SLAVES -b $BUSY_TIMEOUT -i $IDLE_TIMEOUT \
		-w $WAIT_START -q $MX_QUEUE_SIZE -Q $MX_QUEUE_TIMEOUT \
d23 1
a23 1
		-s /var/run/mdefang/multiplexor.socket                                                                                              
a25 1

d28 1
a28 1
		-m /var/run/mdefang/multiplexor.socket                                                                                              
d30 1
a30 1
	sleep 3 # for socket creation                                                                                                           
@


1.1.1.1
log
@Import mimedefang 2.57

MIMEDefang is a framework for filtering e-mail. It uses Sendmail's
"Milter" API, some C glue code, and some Perl code to let you write
high-performance mail filters in Perl.

Joint work with dlg@@
@
text
@@
