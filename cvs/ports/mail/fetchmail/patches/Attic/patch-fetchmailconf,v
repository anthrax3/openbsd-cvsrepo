head	1.2;
access;
symbols
	OPENBSD_3_8:1.1.0.6
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_6:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2006.01.31.14.30.35;	author bernd;	state dead;
branches;
next	1.1;

1.1
date	2005.10.27.21.58.51;	author bernd;	state Exp;
branches
	1.1.2.1
	1.1.4.1
	1.1.6.1;
next	;

1.1.2.1
date	2005.10.30.07.14.00;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2005.10.30.07.23.47;	author sturm;	state Exp;
branches;
next	1.1.4.2;

1.1.4.2
date	2006.02.01.20.59.34;	author sturm;	state dead;
branches;
next	;

1.1.6.1
date	2005.11.01.11.33.50;	author sturm;	state Exp;
branches;
next	1.1.6.2;

1.1.6.2
date	2006.02.01.21.00.20;	author sturm;	state dead;
branches;
next	;


desc
@@


1.2
log
@Update to fetchmail-6.3.2.

This update includes security fixes for CVE-2005-2335, CVE-2005-4348
and CVE-2006-0321.

Take over maintainership. (With permission from old MAINTAINER fgsch@@.)

Tested by Sigfred Håversen and aanriot@@.

ok aanriot@@, brad@@
@
text
@$OpenBSD: patch-fetchmailconf,v 1.1 2005/10/27 21:58:51 bernd Exp $
--- fetchmailconf.orig	Thu Oct 27 14:42:59 2005
+++ fetchmailconf	Thu Oct 27 14:57:33 2005
@@@@ -858,14 +858,13 @@@@ class ConfigurationEdit(Frame, MyWidget)
 	    # Pre-1.5.2 compatibility...
 	    except os.error:
 		pass
-	    fm = open(self.outfile, 'w')
+	    fd = os.open(self.outfile, os.O_CREAT|os.O_WRONLY, 0600)
+	    fm = os.fdopen(fd, 'w')
 	if fm:
 	    fm.write("# Configuration created %s by fetchmailconf\n" % time.ctime(time.time()))
 	    fm.write(`self.configuration`)
 	    if self.outfile:
 		fm.close()
-	    if fm != sys.stdout:
-		os.chmod(self.outfile, 0600)
 	    self.destruct()
 
 #
@


1.1
log
@Fix the latest security issue in fetchmailconf.
http://fetchmail.berlios.de/fetchmail-SA-2005-02.txt
"passwords are written to a world-readable file"

nicer fetchmailconf diff & ok fgsch@@ (thanks!)
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.6.1
log
@MFC:
Fix the latest security issue in fetchmailconf.
http://fetchmail.berlios.de/fetchmail-SA-2005-02.txt
"passwords are written to a world-readable file"

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-fetchmailconf,v 1.1 2005/10/27 21:58:51 bernd Exp $
@


1.1.6.2
log
@update to fetchmail 6.2.5.5, fixing CVE-2005-3088 and CVE-2005-4348

from bernd@@
@
text
@d1 1
a1 1
$OpenBSD: patch-fetchmailconf,v 1.1.6.1 2005/11/01 11:33:50 sturm Exp $
@


1.1.4.1
log
@MFC:
Fix the latest security issue in fetchmailconf.
http://fetchmail.berlios.de/fetchmail-SA-2005-02.txt
"passwords are written to a world-readable file"

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-fetchmailconf,v 1.1 2005/10/27 21:58:51 bernd Exp $
@


1.1.4.2
log
@update to fetchmail 6.2.5.5, fixing CVE-2005-3088 and CVE-2005-4348

from bernd@@
@
text
@d1 1
a1 1
$OpenBSD: patch-fetchmailconf,v 1.1.4.1 2005/10/30 07:23:47 sturm Exp $
@


1.1.2.1
log
@MFC:
Fix the latest security issue in fetchmailconf.
http://fetchmail.berlios.de/fetchmail-SA-2005-02.txt
"passwords are written to a world-readable file"

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-fetchmailconf,v 1.1 2005/10/27 21:58:51 bernd Exp $
@

