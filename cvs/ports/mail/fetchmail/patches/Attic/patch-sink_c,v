head	1.2;
access;
symbols
	OPENBSD_4_4:1.1.0.8
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.6
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_0:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2009.02.17.12.08.44;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2007.08.31.14.20.46;	author rui;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2007.09.04.06.11.20;	author ajacoutot;	state Exp;
branches;
next	;

1.1.4.1
date	2007.09.04.06.11.47;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update fetchmail to 6.3.9

ok sthen@@
@
text
@$OpenBSD: patch-sink_c,v 1.1 2007/08/31 14:20:46 rui Exp $
--- sink.c.orig	Fri Aug 31 14:24:34 2007
+++ sink.c	Fri Aug 31 14:25:15 2007
@@@@ -262,7 +262,7 @@@@ static int send_bouncemail(struct query *ctl, struct m
     const char *md1 = "MAILER-DAEMON", *md2 = "MAILER-DAEMON@@";
 
     /* don't bounce in reply to undeliverable bounces */
-    if (!msg->return_path[0] ||
+    if (!msg || !msg->return_path[0] || 
 	strcmp(msg->return_path, "<>") == 0 ||
 	strcasecmp(msg->return_path, md1) == 0 ||
 	strncasecmp(msg->return_path, md2, strlen(md2)) == 0)
@


1.1
log
@SECURITY: roll in a distribution patch which fixes CVE-2007-4565
Reference: http://securitytracker.com/alerts/2007/Aug/1018627.html

ok bernd@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.4.1
log
@MFC (original commit rui@@):
roll in a distribution patch which fixes CVE-2007-4565
Reference: http://securitytracker.com/alerts/2007/Aug/1018627.html

ok sturm@@
@
text
@d2 3
a4 3
--- sink.c.orig	Mon Sep  3 11:53:48 2007
+++ sink.c	Mon Sep  3 11:54:12 2007
@@@@ -262,7 +262,7 @@@@ static int send_bouncemail(struct query 
d9 1
a9 1
+    if (!msg || !msg->return_path[0] ||
@


1.1.2.1
log
@MFC (original commit rui@@):
roll in a distribution patch which fixes CVE-2007-4565
Reference: http://securitytracker.com/alerts/2007/Aug/1018627.html

ok sturm@@
@
text
@d2 3
a4 3
--- sink.c.orig	Mon Sep  3 11:52:33 2007
+++ sink.c	Mon Sep  3 11:53:15 2007
@@@@ -262,7 +262,7 @@@@ static int send_bouncemail(struct query 
d9 1
a9 1
+    if (!msg || !msg->return_path[0] ||
@

