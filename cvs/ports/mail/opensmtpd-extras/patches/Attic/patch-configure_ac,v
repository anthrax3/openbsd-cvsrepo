head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2016.01.07.22.50.19;	author jung;	state dead;
branches;
next	1.1;
commitid	AHli24yUDpSGlWOj;

1.1
date	2015.11.30.19.47.32;	author jung;	state Exp;
branches;
next	;
commitid	2obkkzOlaPjo1qV0;


desc
@@


1.2
log
@update to latest snapshot 201601072302

ok giovanni gilles (on a slightly different earlier version)
@
text
@$OpenBSD: patch-configure_ac,v 1.1 2015/11/30 19:47:32 jung Exp $

already submitted as pull-request to upstream

--- configure.ac.orig	Mon Nov 23 01:07:54 2015
+++ configure.ac	Thu Nov 26 15:15:27 2015
@@@@ -1411,6 +1411,14 @@@@ AC_ARG_WITH([python],
 		fi
 	]
 )
+AC_ARG_WITH([python-type],
+	[  --with-python-type=PATH  Specify the type of python used ],
+	[
+		if test "x$withval" != "xno" ; then
+			python_type="${withval}"
+		fi
+	]
+)
 
 AC_ARG_WITH([perl],
 	[  --with-perl=PATH      Specify prefix of perl installation ],
@@@@ -1446,16 +1454,19 @@@@ PYTHON_CPPFLAGS=
 PYTHON_LDFLAGS=
 if test x"${need_python}" = x"yes"; then
    PYTHON_CONFIG=
+   if test x"${python_type}" = x""; then
+	python_type="python"
+   fi
    for path in /usr/local/bin /usr/bin; do
-	if test -f ${path}/python-config; then
-		PYTHON_CONFIG=${path}/python-config
+	if test -f ${path}/${python_type}-config; then
+		PYTHON_CONFIG=${path}/${python_type}-config
 		break
 	fi
    done
 
    # if python provided --with-python, override
    if test x"${with_python}" != x""; then
-      PYTHON_CONFIG="${python_prefix}/bin/python-config"
+      PYTHON_CONFIG="${python_prefix}/bin/${python_type}-config"
    fi
 
    if ! test -f $PYTHON_CONFIG; then
@


1.1
log
@overdue update of opensmtpd-extras to most recent snapshot
build system changed to autoconf/automake

remove PREFIX=/usr workaround after smtpd was adjusted to look into
/usr/local/libexec as well, thanks gilles

this also brings table-sqlite, table-passwd, and table-ldap up-to-date,
which will be removed from base soon

with help and input from giovanni, landry, sthen, and aja

ok giovanni (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
@

