head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.34
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.36
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.32
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.30
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.28
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.26
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.24
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.22
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.20
	OPENBSD_5_0:1.2.0.18
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.16
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.14
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.30
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.28
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.26
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.24
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.22
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.20
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.18
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.16
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.14
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.12
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2016.03.16.22.16.25;	author sthen;	state dead;
branches;
next	1.2;
commitid	a8ZRasVEPTQh0b53;

1.2
date	2007.05.24.08.35.13;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2000.06.04.23.08.35;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove restrictively-licensed and crusty faces/xfaces ports now that the
remaining users have been flensed. Originally suggested by mmcc, and removes
another thing from naddy's errno list.
@
text
@--- x11.c.orig	Tue Nov 19 05:00:50 1991
+++ x11.c	Thu May 24 10:23:45 2007
@@@@ -18,24 +18,11 @@@@
  
 #include <stdio.h>
 #include <ctype.h>
-#if ( !defined(mips) && !defined(TOPIX) ) || defined(ultrix)
+
 #include <sys/types.h>
 #include <sys/time.h>
 #include <sys/param.h>
-#else
-#ifdef SYSTYPE_BSD43
-#include <sys/types.h>
-#include <sys/time.h>
-#else
-#ifndef TOPIX
-#include <bsd/sys/types.h>
-#include <bsd/sys/time.h>
-#include <sys/param.h>
-#else
-#include <sys/bsd_time.h>
-#endif /*TOPIX*/
-#endif /*SYSTYPE_BSD43*/
-#endif /*( !defined(mips) && !defined(TOPIX) ) || defined(ultrix)*/
+
 #include "faces.h"
 #include "extern.h"
 
@@@@ -58,7 +45,6 @@@@
 
 #define  F_ICON              0         /* Icon index to frame array. */
 #define  F_WINDOW            1         /* Window index to frame array. */
-#define  FACES_BORDER_WIDTH  2
 #define  FRAME_MASK          (ButtonPressMask  | ExposureMask | \
                               ButtonMotionMask | KeyPressMask)
 #define  ICON_MASK            ExposureMask
@@@@ -364,11 +350,13 @@@@ char *argv[] ;
   init_font() ;
   gc_mask = GCFont | GCForeground | GCBackground | GCGraphicsExposures ;
   gc_val.font = sfont->fid ;
-  gc_val.foreground = foregnd ;
-  gc_val.background = backgnd ;
+  gc_val.foreground = BlackPixel(dpy, screen) ;
+  gc_val.background = WhitePixel(dpy, screen) ;
   gc_val.graphics_exposures = False ;
   gc = XCreateGC(dpy, root, gc_mask, &gc_val) ;
 
+  gc_val.foreground = foregnd ;
+  gc_val.background = backgnd ;
   tilegc = XCreateGC(dpy, root, gc_mask, &gc_val) ;
   if (depth == 1) XSetFillStyle(dpy, tilegc, FillOpaqueStippled) ;
   else            XSetFillStyle(dpy, tilegc, FillTiled) ;
@@@@ -459,7 +447,11 @@@@ load_resources()
 
   home = getenv("HOME") ;
   XrmInitialize() ;
+#ifdef __FreeBSD__
+  STRCPY(name, "/usr/X11R6/lib/X11/app-defaults/Faces") ;
+#else
   STRCPY(name, "/usr/lib/X11/app-defaults/Faces") ;
+#endif
  
 /* Get applications defaults file, if any. */
  
@@@@ -576,14 +568,14 @@@@ char *argv[] ;
   winattrs.event_mask = FRAME_MASK ;
 
   frame[F_WINDOW] = XCreateWindow(dpy, root, size.x, size.y,
-                        size.width, size.height, FACES_BORDER_WIDTH,
+                        size.width, size.height, border_width,
                         CopyFromParent, InputOutput, CopyFromParent,
                         CWBackPixel | CWBorderPixel | CWEventMask, &winattrs) ;
 
   winattrs.event_mask = ICON_MASK ;
 
   frame[F_ICON] = XCreateWindow(dpy, root,
-                        ix, iy, imagewidth, imageheight, FACES_BORDER_WIDTH,
+                        ix, iy, imagewidth, imageheight, border_width,
                         CopyFromParent, InputOutput, CopyFromParent, 
                         CWBackPixel | CWBorderPixel | CWEventMask, &winattrs) ;
 
@@@@ -856,6 +848,7 @@@@ char *str ;
   XFillRectangle(dpy, pr[(int) dtype], gc, x, y-9,
                  (unsigned int) textwidth+2, 13) ;
   XSetFunction(dpy, gc, GXxor) ;
+  XSetForeground(dpy, gc, WhitePixel(dpy, screen));
   XDrawImageString(dpy, pr[(int) dtype], gc, x, y, str, len) ;
   XSetFunction(dpy, gc, GXcopy) ;
 }
@


1.2
log
@really fix build on mips64...
some #if defined(mips) were trying to include non-existing headers
@
text
@@


1.1
log
@Fake, fix PLIST, repackage patches.
@
text
@a0 1
$OpenBSD: update-patches,v 1.1 2000/04/19 11:16:27 espie Exp $
d2 29
a30 2
+++ x11.c	Mon Jun  5 00:48:26 2000
@@@@ -58,7 +58,6 @@@@
d38 1
a38 1
@@@@ -364,11 +363,13 @@@@ char *argv[] ;
d54 1
a54 1
@@@@ -459,7 +460,11 @@@@ load_resources()
d66 1
a66 1
@@@@ -576,14 +581,14 @@@@ char *argv[] ;
d83 1
a83 1
@@@@ -856,6 +861,7 @@@@ char *str ;
@

