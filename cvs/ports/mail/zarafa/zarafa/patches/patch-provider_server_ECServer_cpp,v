head	1.32;
access;
symbols
	OPENBSD_6_0:1.32.0.2
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.30.0.2
	OPENBSD_5_9_BASE:1.30
	OPENBSD_5_8:1.29.0.4
	OPENBSD_5_8_BASE:1.29
	OPENBSD_5_7:1.28.0.2
	OPENBSD_5_7_BASE:1.28
	OPENBSD_5_6:1.27.0.2
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.26.0.4
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.25.0.2
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.14.0.2
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.1.1.1.0.4
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20090216:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.32
date	2016.04.20.18.38.41;	author robert;	state Exp;
branches;
next	1.31;
commitid	KBMzdBVp21qnBq3j;

1.31
date	2016.04.01.18.08.10;	author robert;	state Exp;
branches;
next	1.30;
commitid	YBIXgHFu7xINW8BP;

1.30
date	2015.11.02.11.06.34;	author robert;	state Exp;
branches;
next	1.29;
commitid	19wAgXlT9RhqpZjX;

1.29
date	2015.04.05.22.25.08;	author robert;	state Exp;
branches;
next	1.28;
commitid	j25w8UqbNvnTFexL;

1.28
date	2014.09.02.11.09.38;	author robert;	state Exp;
branches;
next	1.27;
commitid	BtGLGhiodpDgnVXA;

1.27
date	2014.04.07.13.46.06;	author robert;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.31.13.01.20;	author robert;	state Exp;
branches;
next	1.25;

1.25
date	2013.01.27.13.06.20;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2012.10.28.21.51.09;	author robert;	state Exp;
branches;
next	1.23;

1.23
date	2012.08.30.14.28.22;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.05.05.16.56.17;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.03.15.17.04.31;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.02.27.19.01.34;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2012.02.16.22.18.36;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.17.15.14.37;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.29.17.12.11;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.08.16.15.01.17;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.06.10.15.55.00;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.05.19.17.18.19;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.04.04.08.01.04;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.29.18.00.03;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2011.03.03.13.16.05;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.12.11.08.20.21;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.08.31.17.57.21;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.30.02.46.48;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.03.21.11.15.20;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.10.20.22.34.26;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.08.20.13.33.06;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.31.09.55.56;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.32
log
@update to 7.2.3
@
text
@$OpenBSD: patch-provider_server_ECServer_cpp,v 1.31 2016/04/01 18:08:10 robert Exp $
--- provider/server/ECServer.cpp.orig	Wed Apr 20 13:13:54 2016
+++ provider/server/ECServer.cpp	Wed Apr 20 19:54:13 2016
@@@@ -76,6 +76,10 @@@@
 
 #include "TmpPath.h"
 
+#ifdef __OpenBSD__
+#include <sys/resource.h>
+#endif
+
 #ifdef _DEBUG
 #define new DEBUG_NEW
 #undef THIS_FILE
@@@@ -967,10 +971,10 @@@@ int running_server(char *szName, const char *szConfig,
 		{ "thread_stacksize",			"512" },
 		{ "allow_local_users",			"yes", CONFIGSETTING_RELOADABLE },			// allow any user connect through the unix socket
 		{ "local_admin_users",			"root", CONFIGSETTING_RELOADABLE },			// this local user is admin
-		{ "run_as_user",			"zarafa" }, // drop root privileges, and run as this user/group
-		{ "run_as_group",			"zarafa" },
+		{ "run_as_user",			"_zarafa" }, // drop root privileges, and run as this user/group
+		{ "run_as_group",			"_zarafa" },
 		{ "pid_file",					"/var/run/zarafad/server.pid" },
-		{ "running_path",			"/var/lib/zarafa" },
+		{ "running_path",			"/var/empty" },
 		{ "coredump_enabled",			"yes" },
 
 		{ "license_path",			"/etc/zarafa/license", CONFIGSETTING_UNUSED },
@@@@ -1021,7 +1025,7 @@@@ int running_server(char *szName, const char *szConfig,
 #ifdef WIN32
 		{ "attachment_path",			"Zarafa Data" },
 #else
-		{ "attachment_path",			"/var/lib/zarafa/attachments" },
+		{ "attachment_path",			"/var/db/zarafa/attachments" },
 #endif
 		{ "attachment_compression",		"6" },
 
@@@@ -1113,7 +1117,7 @@@@ int running_server(char *szName, const char *szConfig,
 		{ "client_update_enabled",	"no" },
 		{ "client_update_log_level", "1", CONFIGSETTING_RELOADABLE },
 #ifdef LINUX
-		{ "client_update_path",		"/var/lib/zarafa/client", CONFIGSETTING_RELOADABLE },
+		{ "client_update_path",		"/var/db/zarafa/client", CONFIGSETTING_RELOADABLE },
 		{ "client_update_log_path",	"/var/log/zarafa/autoupdate", CONFIGSETTING_RELOADABLE },
 #else
 		{ "client_update_path",		"c:\\client_update_path", CONFIGSETTING_RELOADABLE },
@@@@ -1154,10 +1158,14 @@@@ int running_server(char *szName, const char *szConfig,
 	};
 
 #ifdef LINUX
+#if defined(__linux__)
 	char buffer[256];
 	confstr(_CS_GNU_LIBPTHREAD_VERSION, buffer, sizeof(buffer));
 	if (strncmp(buffer, "linuxthreads", strlen("linuxthreads")) == 0)
 		m_bNPTL = false;
+#elif defined(__OpenBSD__)
+	m_bNPTL = true;
+#endif
 #endif
 
 	// Init random generator
@


1.31
log
@update to 7.2.2
@
text
@d1 4
a4 4
$OpenBSD$
--- provider/server/ECServer.cpp.orig	Wed Mar 23 12:14:33 2016
+++ provider/server/ECServer.cpp	Fri Apr  1 11:32:16 2016
@@@@ -102,6 +102,10 @@@@
d15 1
a15 1
@@@@ -994,10 +998,10 @@@@ int running_server(char *szName, const char *szConfig,
d29 1
a29 1
@@@@ -1040,7 +1044,7 @@@@ int running_server(char *szName, const char *szConfig,
d38 1
a38 1
@@@@ -1132,7 +1136,7 @@@@ int running_server(char *szName, const char *szConfig,
d47 1
a47 1
@@@@ -1173,10 +1177,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.30
log
@update to 7.2.1
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.29 2015/04/05 22:25:08 robert Exp $
--- provider/server/ECServer.cpp.orig	Wed Aug  5 17:30:48 2015
+++ provider/server/ECServer.cpp	Thu Aug 20 12:36:50 2015
@@@@ -89,6 +89,10 @@@@
d15 18
a32 4
@@@@ -904,7 +908,7 @@@@ int running_server(char *szName, const char *szConfig,
 		{ "mysql_config_file",			"/etc/zarafa/my.cnf" },
 #endif
 		{ "attachment_storage",			"database" },
d35 1
d38 1
a38 3
 		// Log options
@@@@ -978,7 +982,7 @@@@ int running_server(char *szName, const char *szConfig,
 
d41 1
d45 3
a47 4
 		{ "index_services_enabled", "", CONFIGSETTING_UNUSED },
 		{ "index_services_path",    "", CONFIGSETTING_UNUSED },
@@@@ -1010,10 +1014,14 @@@@ int running_server(char *szName, const char *szConfig,
 		{ NULL, NULL },
d50 1
d59 1
a61 1
 	rand_init();
@


1.29
log
@update to 7.2.0
@
text
@d1 6
a6 6
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.28 2014/09/02 11:09:38 robert Exp $
--- provider/server/ECServer.cpp.orig	Thu Mar  5 16:54:03 2015
+++ provider/server/ECServer.cpp	Fri Apr  3 23:11:10 2015
@@@@ -85,6 +85,10 @@@@
 #include "unicode/uclean.h"
 #endif
d15 1
a15 1
@@@@ -930,7 +934,7 @@@@ int running_server(char *szName, const char *szConfig,
d24 1
a24 1
@@@@ -1003,7 +1007,7 @@@@ int running_server(char *szName, const char *szConfig,
d33 1
a33 1
@@@@ -1033,10 +1037,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.28
log
@update to 7.1.11
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.27 2014/04/07 13:46:06 robert Exp $
--- provider/server/ECServer.cpp.orig	Sun Aug 24 12:27:09 2014
+++ provider/server/ECServer.cpp	Mon Sep  1 18:00:46 2014
@@@@ -90,6 +90,10 @@@@
d15 1
a15 1
@@@@ -933,7 +937,7 @@@@ int running_server(char *szName, const char *szConfig,
d24 1
a24 1
@@@@ -1006,7 +1010,7 @@@@ int running_server(char *szName, const char *szConfig,
d33 1
a33 1
@@@@ -1036,10 +1040,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.27
log
@update to 7.1.9
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.26 2013/03/31 13:01:20 robert Exp $
--- provider/server/ECServer.cpp.orig	Thu Jan 30 13:41:34 2014
+++ provider/server/ECServer.cpp	Mon Feb  3 11:25:37 2014
d15 1
a15 1
@@@@ -935,7 +939,7 @@@@ int running_server(char *szName, const char *szConfig,
d24 1
a24 1
@@@@ -1008,7 +1012,7 @@@@ int running_server(char *szName, const char *szConfig,
d33 1
a33 1
@@@@ -1037,10 +1041,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.26
log
@update to 7.1.4
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.25 2013/01/27 13:06:20 robert Exp $
--- provider/server/ECServer.cpp.orig	Thu Feb 28 17:13:17 2013
+++ provider/server/ECServer.cpp	Sun Mar 31 14:29:44 2013
d15 1
a15 1
@@@@ -938,7 +942,7 @@@@ int running_server(char *szName, const char *szConfig,
d24 1
a24 1
@@@@ -1011,7 +1015,7 @@@@ int running_server(char *szName, const char *szConfig,
d33 1
a33 1
@@@@ -1040,10 +1044,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.25
log
@update to 7.1.3
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.24 2012/10/28 21:51:09 robert Exp $
--- provider/server/ECServer.cpp.orig	Wed Jan 23 13:42:31 2013
+++ provider/server/ECServer.cpp	Sun Jan 27 12:59:53 2013
d15 1
a15 1
@@@@ -911,7 +915,7 @@@@ int running_server(char *szName, const char *szConfig,
d24 1
a24 1
@@@@ -984,7 +988,7 @@@@ int running_server(char *szName, const char *szConfig,
d33 1
a33 1
@@@@ -1013,10 +1017,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.24
log
@update to Zarafa 7.1.1
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.23 2012/08/30 14:28:22 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Thu Oct 18 19:06:57 2012
+++ provider/server/ECServer.cpp	Sun Oct 28 21:08:55 2012
@@@@ -87,6 +87,10 @@@@
d15 1
a15 1
@@@@ -897,7 +901,7 @@@@ int running_server(char *szName, const char *szConfig,
d24 1
a24 1
@@@@ -970,7 +974,7 @@@@ int running_server(char *szName, const char *szConfig,
d33 1
a33 1
@@@@ -999,10 +1003,14 @@@@ int running_server(char *szName, const char *szConfig,
@


1.23
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@d1 3
a3 3
$OpenBSD$
--- provider/server/ECServer.cpp.orig	Mon Aug 27 09:41:44 2012
+++ provider/server/ECServer.cpp	Mon Aug 27 09:42:43 2012
d15 1
a15 1
@@@@ -897,7 +901,7 @@@@ int running_server(char *szName, const char *szConfig)
d24 1
a24 1
@@@@ -970,7 +974,7 @@@@ int running_server(char *szName, const char *szConfig)
d33 1
a33 1
@@@@ -999,10 +1003,14 @@@@ int running_server(char *szName, const char *szConfig)
@


1.22
log
@Update zarafa to 7.0.7.
Detailed changelog at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.21 2012/03/15 17:04:31 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Thu May  3 16:37:11 2012
+++ provider/server/ECServer.cpp	Sat May  5 17:39:39 2012
@@@@ -86,6 +86,10 @@@@
d15 1
a15 1
@@@@ -830,7 +834,7 @@@@ int running_server(char *szName, const char *szConfig)
d19 2
a20 2
-		{ "attachment_path",			"/var/lib/zarafa" },
+		{ "attachment_path",			"/var/db/zarafa" },
d24 1
a24 1
@@@@ -902,7 +906,7 @@@@ int running_server(char *szName, const char *szConfig)
d31 3
a33 3
         { "index_services_enabled", "no", CONFIGSETTING_RELOADABLE }, 
         { "index_services_path",    "file:///var/run/zarafa-indexer", CONFIGSETTING_RELOADABLE },        
@@@@ -925,10 +929,14 @@@@ int running_server(char *szName, const char *szConfig)
@


1.21
log
@Update to zarafa-7.0.6.
More details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.20 2012/02/27 19:01:34 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Tue Mar 13 16:43:37 2012
+++ provider/server/ECServer.cpp	Thu Mar 15 16:42:28 2012
d15 1
a15 1
@@@@ -828,7 +832,7 @@@@ int running_server(char *szName, const char *szConfig)
d24 1
a24 1
@@@@ -900,7 +904,7 @@@@ int running_server(char *szName, const char *szConfig)
d33 1
a33 1
@@@@ -923,10 +927,14 @@@@ int running_server(char *szName, const char *szConfig)
@


1.20
log
@Make this work with rthreads.
Fix store creation.
Add a comment for the procmail sample in the README.
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.19 2012/02/16 22:18:36 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Wed Feb  1 22:09:33 2012
+++ provider/server/ECServer.cpp	Thu Feb  2 12:28:17 2012
d15 1
a15 1
@@@@ -797,7 +801,7 @@@@ int running_server(char *szName, const char *szConfig)
d24 1
a24 1
@@@@ -869,7 +873,7 @@@@ int running_server(char *szName, const char *szConfig)
d33 1
a33 1
@@@@ -891,10 +895,14 @@@@ int running_server(char *szName, const char *szConfig)
@


1.19
log
@Update to zarafa 7.0.5.
Detailed changelog:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.18 2011/12/22 17:10:04 ajacoutot Exp $
d43 1
a43 1
+	m_bNPTL = false;
@


1.18
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.17 2011/11/17 15:14:37 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Thu Dec 22 01:02:36 2011
+++ provider/server/ECServer.cpp	Thu Dec 22 12:16:04 2011
d15 1
a15 1
@@@@ -722,7 +726,7 @@@@ int running_server(char *szName, const char *szConfig)
d24 1
a24 1
@@@@ -794,7 +798,7 @@@@ int running_server(char *szName, const char *szConfig)
d33 1
a33 1
@@@@ -816,10 +820,14 @@@@ int running_server(char *szName, const char *szConfig)
@


1.17
log
@Update to zarafa-7.0.3.
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.16 2011/09/29 17:12:11 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Thu Nov 17 03:03:23 2011
+++ provider/server/ECServer.cpp	Thu Nov 17 15:02:57 2011
d24 1
a24 2
@@@@ -793,7 +797,7 @@@@ int running_server(char *szName, const char *szConfig)
 		{ "cache_sortkey_size",		"0", CONFIGSETTING_UNUSED }, // Option not support, only for backward compatibility of all configurations under the 6.20
d27 1
d30 1
d33 1
a33 2
 		{ "index_services_search_timeout", "10", CONFIGSETTING_RELOADABLE },
@@@@ -814,10 +818,14 @@@@ int running_server(char *szName, const char *szConfig)
@


1.16
log
@Update to zarafa-7.0.2.
Details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.15 2011/08/16 15:01:17 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Mon Sep 26 15:56:10 2011
+++ provider/server/ECServer.cpp	Thu Sep 29 16:53:37 2011
d15 1
a15 1
@@@@ -676,7 +680,7 @@@@ int running_server(char *szName, const char *szConfig)
d24 1
a24 1
@@@@ -747,7 +751,7 @@@@ int running_server(char *szName, const char *szConfig)
d33 15
@


1.15
log
@Update to zarafa 7.0.1.
See http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
for details.
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.14 2011/06/10 15:55:00 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Tue Aug  2 15:02:47 2011
+++ provider/server/ECServer.cpp	Sun Aug 14 04:45:52 2011
d15 1
a15 1
@@@@ -676,7 +680,7 @@@@ int running_server(char *szName, char *szConfig)
d24 1
a24 1
@@@@ -747,7 +751,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.14
log
@Update to zarafa-7.0.0 (rc2).
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.13 2011/06/02 12:46:37 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Fri Jun 10 03:37:39 2011
+++ provider/server/ECServer.cpp	Fri Jun 10 13:33:17 2011
d15 1
a15 1
@@@@ -675,7 +679,7 @@@@ int running_server(char *szName, char *szConfig)
d24 1
a24 1
@@@@ -746,7 +750,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.13
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.12 2011/05/19 17:18:19 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Wed Apr 20 19:51:48 2011
+++ provider/server/ECServer.cpp	Sun May 29 07:13:40 2011
d15 1
a15 1
@@@@ -677,7 +681,7 @@@@ int running_server(char *szName, char *szConfig)
d24 1
a24 1
@@@@ -748,7 +752,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.12
log
@Bugfix update to zarafa-6.40.8.
More details at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 6
a6 6
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.11 2011/04/04 08:01:04 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Thu May 19 17:01:37 2011
+++ provider/server/ECServer.cpp	Thu May 19 18:30:37 2011
@@@@ -82,6 +82,10 @@@@
 #include <libintl.h>
 #include <map>
d15 1
a15 1
@@@@ -757,7 +761,7 @@@@ int running_server(char *szName, char *szConfig)
d24 1
a24 1
@@@@ -828,7 +832,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.11
log
@Add clucene support (i.e. enable zarafa-indexer). Note that the
zarafa-indexer is not used by default.
Tweak patches accordingly.
Use RLIMIT_DATA instead of RLIMIT_AS which we don't have.

Fix default client_update_path.
Remove a couple of patch entries that are not needed anymore.

Rewrite zarafa.rc and make it a wrapper script that calls the provided
rc.d(8) scripts. This is much more simple, makes much more sense and
allow for proper debugging as discussed with robert@@.
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.10 2011/03/29 18:00:03 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Tue Mar 29 00:04:09 2011
+++ provider/server/ECServer.cpp	Sun Apr  3 19:35:40 2011
d15 1
a15 1
@@@@ -747,7 +751,7 @@@@ int running_server(char *szName, char *szConfig)
d24 1
a24 1
@@@@ -818,7 +822,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.10
log
@Update to zarafa-6.40.7.
Changelog available at
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.9 2011/03/03 13:16:05 ajacoutot Exp $
d3 1
a3 1
+++ provider/server/ECServer.cpp	Tue Mar 29 17:48:35 2011
d24 9
@


1.9
log
@Update to zarafa-6.40.5.
Complete changelog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt

Several documentation and configuration tweaks.
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.8 2010/12/11 08:20:21 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Mon Jan 24 16:55:05 2011
+++ provider/server/ECServer.cpp	Tue Jan 25 12:56:18 2011
d15 1
a15 1
@@@@ -727,7 +731,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.8
log
@Update to version 6.40.4.
Changelog available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.7 2010/08/31 17:57:21 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Thu Dec  2 14:45:40 2010
+++ provider/server/ECServer.cpp	Fri Dec  3 18:09:33 2010
d15 1
a15 1
@@@@ -726,7 +730,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.7
log
@Update to zarafa-6.40.2.
Complete changelog available at:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.6 2010/06/30 02:46:48 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Mon Aug 30 13:01:46 2010
+++ provider/server/ECServer.cpp	Tue Aug 31 15:14:05 2010
d15 1
a15 1
@@@@ -722,7 +726,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.6
log
@*MAJOR* version update to zarafa-6.40.0.
Read the complete changelog here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

Upgrade documentation is available at:
http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade

zarafa-libical has been removed, current version from ports works fine
for zarafa needs.

php5-mapi has been merged into zarafa-webaccess.
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.5 2010/03/21 11:15:20 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Mon May 31 19:28:59 2010
+++ provider/server/ECServer.cpp	Mon Jun 14 09:16:44 2010
d15 1
a15 1
@@@@ -651,7 +655,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.5
log
@Major update to zarafa-6.30.12.
Lots and lots of bugfixes...
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.4 2009/10/20 22:34:26 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Tue Jan 26 17:34:51 2010
+++ provider/server/ECServer.cpp	Wed Feb  3 08:53:19 2010
@@@@ -81,6 +81,10 @@@@
d15 1
a15 1
@@@@ -627,7 +631,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.4
log
@Update to zarafa-6.30.3.
ChangeLog available here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

(6.30.4 is out, but one thing at a time since this is a big enough update)
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.3 2009/08/20 13:33:06 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Fri Oct  9 22:34:39 2009
+++ provider/server/ECServer.cpp	Tue Oct 20 23:41:37 2009
@@@@ -79,6 +79,10 @@@@
d15 1
a15 1
@@@@ -625,7 +629,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.3
log
@Update to zarafa-6.30.1.

ChangeLog:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.2 2009/07/31 09:55:56 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Wed Aug 12 15:03:19 2009
+++ provider/server/ECServer.cpp	Thu Aug 20 14:51:20 2009
@@@@ -67,6 +67,10 @@@@
d15 1
a15 1
@@@@ -613,7 +617,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.2
log
@Major update to zarafa-6.30.0.
Full ChangeLog available at
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
Now comes with caldav support.

ok jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-provider_server_ECServer_cpp,v 1.1.1.1 2009/02/16 09:44:37 ajacoutot Exp $
--- provider/server/ECServer.cpp.orig	Wed Jul 22 16:21:20 2009
+++ provider/server/ECServer.cpp	Wed Jul 22 16:22:03 2009
d15 1
a15 1
@@@@ -605,7 +609,7 @@@@ int running_server(char *szName, char *szConfig)
@


1.1
log
@Initial revision
@
text
@d1 4
a4 5
$OpenBSD$
--- provider/server/ECServer.cpp.orig	Thu Dec 11 22:35:42 2008
+++ provider/server/ECServer.cpp	Tue Dec 30 12:13:38 2008
@@@@ -66,6 +66,10 @@@@
 #include "ECSoapServerConnection.h"
d6 1
d15 2
a16 2
@@@@ -447,7 +451,7 @@@@ int running_server(char *szName, char *szConfig)
 		{ "mysql_config_file",		"/etc/zarafa/my.cnf" },
d18 4
a21 3
 		{ "attachment_storage",		"database" },
-		{ "attachment_path",		"/var/lib/zarafa" },
+		{ "attachment_path",		"/var/db/zarafa" },
a23 1
 		{ "log_method",				"file" },
@


1.1.1.1
log
@Import zarafa-6.20.1 (+php5-mapi-6.20.1)

-main
Zarafa is a full-featured e-mail and groupware solution, focused
towards clients using the MAPI standard.  As an MS Exchange replacement,
the Zarafa suite provides the following features:
 * Integration with existing Unix mailserver
 * Native mobile phone support
 * MS Outlook "Look & Feel" webaccess
 * Stable MS Outlook sharing (100% MAPI)

This package provides the Open Source version of Zarafa.

-php
Messaging Application Programming Interface (MAPI) is a messaging
architecture and a Component Object Model based API for Microsoft
Windows. MAPI allows client programs to become (e-mail)
messaging-enabled, -aware, or -based by calling MAPI subsystem routines
that interface with certain messaging servers. While MAPI is designed to
be independent of the protocol, it is usually used with MAPI/RPC, the
proprietary protocol that Microsoft Outlook uses to communicate with
Microsoft Exchange.

These functions allow you to access a MAPI compliant email server.

"just do it" robert@@, ok jasper@@
@
text
@@
