head	1.4;
access;
symbols
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.16
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.14
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.12
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.10
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.8
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.6
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2016.04.01.18.08.10;	author robert;	state dead;
branches;
next	1.3;
commitid	YBIXgHFu7xINW8BP;

1.3
date	2015.11.02.11.06.34;	author robert;	state Exp;
branches;
next	1.2;
commitid	19wAgXlT9RhqpZjX;

1.2
date	2015.04.05.22.25.08;	author robert;	state Exp;
branches;
next	1.1;
commitid	j25w8UqbNvnTFexL;

1.1
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to 7.2.2
@
text
@$OpenBSD: patch-common_charset_traits_h,v 1.3 2015/11/02 11:06:34 robert Exp $
--- common/charset/traits.h.orig	Thu Aug 20 12:49:17 2015
+++ common/charset/traits.h	Thu Aug 20 12:49:32 2015
@@@@ -102,31 +102,31 @@@@ class iconv_charset<const char *> _final { (public)
 	}
 };
 
-template <size_t _N>
-class iconv_charset<char[_N]> _final {
+template <size_t _ZCPN>
+class iconv_charset<char[_ZCPN]> _final {
 public:
 	static const char *name() {
 		return CHARSET_CHAR;	// Current locale
 	}
-	static const char *rawptr(const char (&from) [_N]) {
+	static const char *rawptr(const char (&from) [_ZCPN]) {
 		return from;
 	}
-	static size_t rawsize(const char (&) [_N]) {
-		return _N - 1;
+	static size_t rawsize(const char (&) [_ZCPN]) {
+		return _ZCPN - 1;
 	}
 };
 
-template <size_t _N>
-class iconv_charset<const char[_N]> _final {
+template <size_t _ZCPN>
+class iconv_charset<const char[_ZCPN]> _final {
 public:
 	static const char *name() {
 		return CHARSET_CHAR;	// Current locale
 	}
-	static const char *rawptr(const char (&from) [_N]) {
+	static const char *rawptr(const char (&from) [_ZCPN]) {
 		return from;
 	}
-	static size_t rawsize(const char (&) [_N]) {
-		return _N - 1;
+	static size_t rawsize(const char (&) [_ZCPN]) {
+		return _ZCPN - 1;
 	}
 };
 
@@@@ -174,31 +174,31 @@@@ class iconv_charset<const wchar_t *> _final { (public)
 	}
 };
 
-template <size_t _N>
-class iconv_charset<wchar_t[_N]> _final {
+template <size_t _ZCPN>
+class iconv_charset<wchar_t[_ZCPN]> _final {
 public:
 	static const char *name() {
 		return CHARSET_WCHAR;	// Current locale
 	}
-	static const char *rawptr(const wchar_t (&from) [_N]) {
+	static const char *rawptr(const wchar_t (&from) [_ZCPN]) {
 		return reinterpret_cast<const char*>(from);
 	}
-	static size_t rawsize(const wchar_t (&) [_N]) {
-		return (_N - 1) * sizeof(wchar_t);
+	static size_t rawsize(const wchar_t (&) [_ZCPN]) {
+		return (_ZCPN - 1) * sizeof(wchar_t);
 	}
 };
 
-template <size_t _N>
-class iconv_charset<const wchar_t[_N]> _final {
+template <size_t _ZCPN>
+class iconv_charset<const wchar_t[_ZCPN]> _final {
 public:
 	static const char *name() {
 		return CHARSET_WCHAR;	// Current locale
 	}
-	static const char *rawptr(const wchar_t (&from) [_N]) {
+	static const char *rawptr(const wchar_t (&from) [_ZCPN]) {
 		return reinterpret_cast<const char*>(from);
 	}
-	static size_t rawsize(const wchar_t (&) [_N]) {
-		return (_N - 1) * sizeof(wchar_t);
+	static size_t rawsize(const wchar_t (&) [_ZCPN]) {
+		return (_ZCPN - 1) * sizeof(wchar_t);
 	}
 };
 
@


1.3
log
@update to 7.2.1
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@update to 7.2.0
@
text
@d1 4
a4 7
$OpenBSD: patch-common_charset_traits_h,v 1.1 2011/06/02 12:46:37 ajacoutot Exp $

On OpenBSD, _N is defined in ctype.h

--- common/charset/traits.h.orig	Thu Mar  5 16:54:04 2015
+++ common/charset/traits.h	Fri Apr  3 23:11:10 2015
@@@@ -102,31 +102,31 @@@@ class iconv_charset<const char*> { (public)
d9 1
a9 1
-class iconv_charset<char [_N]> {
d11 1
a11 1
+class iconv_charset<char [_ZCPN]> {
d28 1
a28 1
-class iconv_charset<const char [_N]> {
d30 1
a30 1
+class iconv_charset<const char [_ZCPN]> {
d46 1
a46 1
@@@@ -174,31 +174,31 @@@@ class iconv_charset<const wchar_t*> { (public)
d51 1
a51 1
-class iconv_charset<wchar_t [_N]> {
d53 1
a53 1
+class iconv_charset<wchar_t [_ZCPN]> {
d70 1
a70 1
-class iconv_charset<const wchar_t [_N]> {
d72 1
a72 1
+class iconv_charset<const wchar_t [_ZCPN]> {
@


1.1
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- common/charset/traits.h.orig	Wed Apr 20 19:51:45 2011
+++ common/charset/traits.h	Sun May 29 15:28:04 2011
@@@@ -107,31 +107,31 @@@@ class iconv_charset<const char*> { (public)
d49 1
a49 1
@@@@ -179,31 +179,31 @@@@ class iconv_charset<const wchar_t*> { (public)
@

