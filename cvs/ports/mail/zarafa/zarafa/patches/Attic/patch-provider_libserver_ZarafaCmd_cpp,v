head	1.28;
access;
symbols
	OPENBSD_5_3:1.26.0.2
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20090216:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2013.06.17.20.54.06;	author ajacoutot;	state dead;
branches;
next	1.27;

1.27
date	2013.03.31.13.01.19;	author robert;	state Exp;
branches;
next	1.26;

1.26
date	2013.01.27.13.06.20;	author robert;	state Exp;
branches;
next	1.25;

1.25
date	2012.10.28.21.51.08;	author robert;	state Exp;
branches;
next	1.24;

1.24
date	2012.08.30.14.28.22;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2012.05.05.16.56.17;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.02.16.22.18.36;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.11.17.15.14.37;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.29.17.12.11;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.11.08.44.44;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.03.03.13.16.05;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.27.18.26.17;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.06.30.02.46.48;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.03.21.11.15.20;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.11.18.13.55.39;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.20.22.34.26;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.09.11.16.33.52;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.08.20.13.33.06;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.08.06.10.02.21;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.07.31.09.55.56;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.06.09.18.22.37;	author ajacoutot;	state dead;
branches;
next	1.5;

1.5
date	2009.04.28.10.59.51;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.03.17.30.40;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.19.09.33.52;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.05.08.01.26;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.16.09.44.38;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.16.09.44.38;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.28
log
@We have CLOCK_THREAD_CPUTIME_ID now.
@
text
@$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.27 2013/03/31 13:01:19 robert Exp $

OpenBSD does not have CLOCK_THREAD_CPUTIME_ID.

--- provider/libserver/ZarafaCmd.cpp.orig	Thu Feb 28 17:13:17 2013
+++ provider/libserver/ZarafaCmd.cpp	Sun Mar 31 14:29:44 2013
@@@@ -546,10 +546,10 @@@@ int ns__logon(struct soap *soap, char *user, char *pas
     ECLicenseClient *lpLicenseClient = NULL;
     unsigned int ulLicenseResponse;
     unsigned char *lpLicenseResponse = NULL;
-	struct timespec startTimes = {0}, endTimes = {0};
+	struct tms	startTimes, endTimes;
 	double          dblStart = GetTimeOfDay();
 
-	clock_gettime(CLOCK_THREAD_CPUTIME_ID, &startTimes);
+	times(&startTimes);
 
     LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020llu: S logon", sessionID);
 
@@@@ -646,9 +646,9 @@@@ exit:
 
 	lpsResponse->er = er;
 
-	clock_gettime(CLOCK_THREAD_CPUTIME_ID, &endTimes);
+	times(&endTimes);
 
-	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020llu: E logon 0x%08x %f %f", sessionID, er, timespec2dbl(endTimes) - timespec2dbl(startTimes), GetTimeOfDay() - dblStart);
+	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020llu: E logon 0x%08x %f %f", sessionID, er, (double)(endTimes.tms_utime - startTimes.tms_utime) / CLOCKS_PER_SEC, GetTimeOfDay() - dblStart);
 
 	return SOAP_OK;
 }
@@@@ -666,10 +666,10 @@@@ int ns__ssoLogon(struct soap *soap, ULONG64 ulSessionI
 	xsd__base64Binary *lpOutput = NULL;
 	char*			lpszEnabled = NULL;
 	ECLicenseClient*lpLicenseClient = NULL;
-	struct timespec startTimes = {0}, endTimes = {0};
+	struct tms	startTimes, endTimes;
 	double          dblStart = GetTimeOfDay();
 
-	clock_gettime(CLOCK_THREAD_CPUTIME_ID, &startTimes);
+	times(&startTimes);
 
     LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": S ssoLogon", ulSessionId);
 
@@@@ -817,9 +817,9 @@@@ exit:
 nosso:
 	lpsResponse->er = er;
 
-	clock_gettime(CLOCK_THREAD_CPUTIME_ID, &endTimes);
+	times(&endTimes);
 
-	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": E ssoLogon 0x%08x %f %f", ulSessionId, er, timespec2dbl(endTimes) - timespec2dbl(startTimes), GetTimeOfDay() - dblStart);
+	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": E ssoLogon 0x%08x %f %f", ulSessionId, er, (double)(endTimes.tms_utime - startTimes.tms_utime) / CLOCKS_PER_SEC, GetTimeOfDay() - dblStart);
 
 	return SOAP_OK;
 }
@@@@ -831,10 +831,10 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
 {
 	ECRESULT	er = erSuccess;
 	ECSession 	*lpecSession = NULL;
-	struct timespec startTimes = {0}, endTimes = {0};
+	struct tms	startTimes, endTimes;
 	double          dblStart = GetTimeOfDay();
 
-	clock_gettime(CLOCK_THREAD_CPUTIME_ID, &startTimes);
+	times(&startTimes);
 
     LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": S logoff", ulSessionId);
 
@@@@ -856,20 +856,20 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
 exit:
     *result = er;
 
-	clock_gettime(CLOCK_THREAD_CPUTIME_ID, &endTimes);
-	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": E logoff 0x%08x %f %f", ulSessionId, 0, timespec2dbl(endTimes) - timespec2dbl(startTimes), GetTimeOfDay() - dblStart);
+	times(&endTimes);
+	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": E logoff 0x%08x %f %f", ulSessionId, 0, (double)(endTimes.tms_utime - startTimes.tms_utime) / CLOCKS_PER_SEC, GetTimeOfDay() - dblStart);
 
     return SOAP_OK;
 }
 
 #define SOAP_ENTRY_FUNCTION_HEADER(resultvar, fname) \
     ECRESULT		er = erSuccess; \
-    struct timespec	startTimes = {0}, endTimes = {0};	\
+    struct tms		startTimes, endTimes; \
     double			dblStart = GetTimeOfDay(); \
     ECSession		*lpecSession = NULL; \
     unsigned int 	*lpResultVar = &resultvar; \
 	char            *szFname = #fname; \
-    clock_gettime(CLOCK_THREAD_CPUTIME_ID, &startTimes); \
+    times(&startTimes); \
 	LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": S %s", ulSessionId, szFname); \
 	er = g_lpSessionManager->ValidateSession(soap, ulSessionId, &lpecSession, true);\
 	const bool bSupportUnicode = (er == erSuccess ? (lpecSession->GetCapabilities() & ZARAFA_CAP_UNICODE) != 0 : false); \
@@@@ -883,9 +883,9 @@@@ exit:
 #define SOAP_ENTRY_FUNCTION_FOOTER \
 __soapentry_exit: \
     *lpResultVar = er; \
-    clock_gettime(CLOCK_THREAD_CPUTIME_ID, &endTimes); \
+    times(&endTimes); \
     if(lpecSession) { \
-		LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": E %s 0x%08x %f %f", ulSessionId, szFname, er, timespec2dbl(endTimes) - timespec2dbl(startTimes), GetTimeOfDay() - dblStart); \
+		LOG_SOAP_DEBUG(g_lpSessionManager->GetLogger(), "%020"PRIu64": E %s 0x%08x %f %f", ulSessionId, szFname, er, (double)(endTimes.tms_stime - startTimes.tms_stime) / CLOCKS_PER_SEC, GetTimeOfDay() - dblStart); \
 		lpecSession->UpdateBusyState(pthread_self(), SESSION_STATE_SENDING); \
         lpecSession->Unlock(); \
     } \
@


1.27
log
@update to 7.1.4
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.26 2013/01/27 13:06:20 robert Exp $
@


1.26
log
@update to 7.1.3
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Sun Jan 20 17:29:55 2013
+++ provider/libserver/ZarafaCmd.cpp	Sun Jan 20 17:34:41 2013
@@@@ -542,10 +542,10 @@@@ int ns__logon(struct soap *soap, char *user, char *pas
d20 1
a20 1
@@@@ -642,9 +642,9 @@@@ exit:
d32 1
a32 1
@@@@ -662,10 +662,10 @@@@ int ns__ssoLogon(struct soap *soap, ULONG64 ulSessionI
d45 1
a45 1
@@@@ -813,9 +813,9 @@@@ exit:
d57 1
a57 1
@@@@ -827,10 +827,10 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
d70 1
a70 1
@@@@ -852,20 +852,20 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
d95 1
a95 1
@@@@ -879,9 +879,9 @@@@ exit:
@


1.25
log
@update to Zarafa 7.1.1
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.24 2012/08/30 14:28:22 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Thu Oct 18 19:06:58 2012
+++ provider/libserver/ZarafaCmd.cpp	Sun Oct 28 21:08:55 2012
@@@@ -546,10 +546,10 @@@@ int ns__logon(struct soap *soap, char *user, char *pas
d20 1
a20 1
@@@@ -646,9 +646,9 @@@@ exit:
d32 1
a32 1
@@@@ -666,10 +666,10 @@@@ int ns__ssoLogon(struct soap *soap, ULONG64 ulSessionI
d45 1
a45 1
@@@@ -817,9 +817,9 @@@@ exit:
d57 1
a57 1
@@@@ -831,10 +831,10 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
d70 1
a70 1
@@@@ -856,20 +856,20 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
d95 1
a95 1
@@@@ -881,12 +881,12 @@@@ exit:
a101 3
-    	lpecSession->AddClocks( timespec2dbl(endTimes) - timespec2dbl(startTimes), \
-    	                        0, \
-							    GetTimeOfDay() - dblStart); \
d103 2
a104 5
+    	lpecSession->AddClocks( (double)(endTimes.tms_utime - startTimes.tms_utime) / CLOCKS_PER_SEC, \
+							    (double)(endTimes.tms_stime - startTimes.tms_stime) / CLOCKS_PER_SEC, \
+ 							    GetTimeOfDay() - dblStart); \
+	g_lpSessionManager->GetLogger()->Log(EC_LOGLEVEL_DEBUG, "%llu: E %s %f %f", ulSessionId, szFname, (double)(endTimes.tms_utime - startTimes.tms_utime) / CLOCKS_PER_SEC, GetTimeOfDay() - dblStart); \
 		lpecSession->RemoveBusyState(pthread_self()); \
@


1.24
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Wed Aug  8 17:14:58 2012
+++ provider/libserver/ZarafaCmd.cpp	Wed Aug 29 14:18:22 2012
@@@@ -545,10 +545,10 @@@@ int ns__logon(struct soap *soap, char *user, char *pas
d20 1
a20 1
@@@@ -645,9 +645,9 @@@@ exit:
d32 1
a32 1
@@@@ -665,10 +665,10 @@@@ int ns__ssoLogon(struct soap *soap, ULONG64 ulSessionI
d45 1
a45 1
@@@@ -816,9 +816,9 @@@@ exit:
d57 1
a57 1
@@@@ -830,10 +830,10 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
d70 1
a70 1
@@@@ -855,20 +855,20 @@@@ int ns__logoff(struct soap *soap, ULONG64 ulSessionId,
d95 1
a95 1
@@@@ -880,12 +880,12 @@@@ exit:
@


1.23
log
@Update zarafa to 7.0.7.
Detailed changelog at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.22 2012/02/16 22:18:36 ajacoutot Exp $
d5 76
a80 3
--- provider/libserver/ZarafaCmd.cpp.orig	Thu May  3 16:37:13 2012
+++ provider/libserver/ZarafaCmd.cpp	Sat May  5 18:28:41 2012
@@@@ -799,12 +799,12 @@@@ double GetTimeOfDay();
d89 1
a89 1
     char 			*szFname = #fname; \
d92 1
a92 2
 	SOAP_CALLBACK(soap, pthread_self(), (std::string) "[" + PrettyIP(soap->ip) + "] " + #fname); \
 	g_lpSessionManager->GetLogger()->Log(EC_LOGLEVEL_DEBUG, "%llu: S %s", ulSessionId, szFname); \
d94 2
a95 1
@@@@ -816,12 +816,12 @@@@ double GetTimeOfDay();
d105 1
a105 1
-	g_lpSessionManager->GetLogger()->Log(EC_LOGLEVEL_DEBUG, "%llu: E %s %f %f", ulSessionId, szFname, timespec2dbl(endTimes) - timespec2dbl(startTimes), GetTimeOfDay() - dblStart); \
d110 1
a110 1
 	lpecSession->RemoveBusyState(pthread_self()); \
@


1.22
log
@Update to zarafa 7.0.5.
Detailed changelog:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.21 2011/12/22 17:10:04 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Wed Feb  1 22:09:34 2012
+++ provider/libserver/ZarafaCmd.cpp	Thu Feb  2 12:28:17 2012
@@@@ -798,11 +798,11 @@@@ double GetTimeOfDay();
d16 1
d20 1
d22 1
a22 2
 	const bool UNUSED_VAR bSupportUnicode = (er == erSuccess ? (lpecSession->GetCapabilities() & ZARAFA_CAP_UNICODE) != 0 : false); \
@@@@ -813,11 +813,11 @@@@ double GetTimeOfDay();
d32 1
d36 1
@


1.21
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.20 2011/11/17 15:14:37 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Thu Dec 22 01:02:36 2011
+++ provider/libserver/ZarafaCmd.cpp	Thu Dec 22 12:14:20 2011
@@@@ -796,11 +796,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -811,11 +811,11 @@@@ double GetTimeOfDay();
@


1.20
log
@Update to zarafa-7.0.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.19 2011/09/29 17:12:11 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Thu Nov 17 03:03:24 2011
+++ provider/libserver/ZarafaCmd.cpp	Thu Nov 17 13:59:31 2011
@@@@ -739,11 +739,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -754,11 +754,11 @@@@ double GetTimeOfDay();
@


1.19
log
@Update to zarafa-7.0.2.
Details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.18 2011/06/02 12:46:37 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Mon Sep 26 15:56:11 2011
+++ provider/libserver/ZarafaCmd.cpp	Thu Sep 29 16:53:37 2011
@@@@ -738,11 +738,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -753,11 +753,11 @@@@ double GetTimeOfDay();
@


1.18
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.17 2011/03/11 08:44:44 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Wed Apr 20 19:51:49 2011
+++ provider/libserver/ZarafaCmd.cpp	Mon May  2 12:47:53 2011
@@@@ -731,11 +731,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -746,11 +746,11 @@@@ double GetTimeOfDay();
@


1.17
log
@SECURITY update to zarafa-6.40.6.
As usual, changelog is available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.16 2011/03/03 13:16:05 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Sun Feb 27 23:06:14 2011
+++ provider/libserver/ZarafaCmd.cpp	Thu Mar 10 17:22:03 2011
@@@@ -680,11 +680,11 @@@@ double GetTimeOfDay();
d18 4
a21 4
     if(soap->user && ((SOAPINFO *)soap->user)->lpCallBack) { \
         ((SOAPINFO *)soap->user)->lpCallBack(pthread_self(), (std::string) "[" + PrettyIP(soap->ip) + "] " + #fname, ((SOAPINFO*)soap->user)->ulCallBackParam); \
     } \
@@@@ -695,11 +695,11 @@@@ double GetTimeOfDay();
@


1.16
log
@Update to zarafa-6.40.5.
Complete changelog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt

Several documentation and configuration tweaks.
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.15 2010/10/27 18:26:17 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Mon Jan 24 16:55:05 2011
+++ provider/libserver/ZarafaCmd.cpp	Tue Jan 25 12:56:18 2011
@@@@ -681,11 +681,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -696,11 +696,11 @@@@ double GetTimeOfDay();
@


1.15
log
@Update to zarafa-6.40.3.
ChangeLog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.14 2010/06/30 02:46:48 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Wed Oct 20 16:16:25 2010
+++ provider/libserver/ZarafaCmd.cpp	Wed Oct 27 19:18:53 2010
@@@@ -680,11 +680,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -695,11 +695,11 @@@@ double GetTimeOfDay();
@


1.14
log
@*MAJOR* version update to zarafa-6.40.0.
Read the complete changelog here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

Upgrade documentation is available at:
http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade

zarafa-libical has been removed, current version from ports works fine
for zarafa needs.

php5-mapi has been merged into zarafa-webaccess.
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.13 2010/03/21 11:15:20 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Mon May 31 19:28:59 2010
+++ provider/libserver/ZarafaCmd.cpp	Mon Jun 14 09:16:44 2010
@@@@ -668,11 +668,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -683,11 +683,11 @@@@ double GetTimeOfDay();
@


1.13
log
@Major update to zarafa-6.30.12.
Lots and lots of bugfixes...
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.12 2009/11/18 13:55:39 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Tue Jan 26 17:34:52 2010
+++ provider/libserver/ZarafaCmd.cpp	Wed Feb  3 08:53:19 2010
@@@@ -710,11 +710,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -726,11 +726,11 @@@@ double GetTimeOfDay();
@


1.12
log
@Bugfix update to zarafa-6.30.5.
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.11 2009/10/20 22:34:26 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Thu Nov 12 23:55:03 2009
+++ provider/libserver/ZarafaCmd.cpp	Wed Nov 18 09:16:54 2009
@@@@ -708,11 +708,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -724,11 +724,11 @@@@ double GetTimeOfDay();
@


1.11
log
@Update to zarafa-6.30.3.
ChangeLog available here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

(6.30.4 is out, but one thing at a time since this is a big enough update)
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.10 2009/09/11 16:33:52 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Fri Oct  9 22:34:40 2009
+++ provider/libserver/ZarafaCmd.cpp	Tue Oct 20 23:41:37 2009
@@@@ -710,11 +710,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -726,11 +726,11 @@@@ double GetTimeOfDay();
@


1.10
log
@Update to zarafa-6.30.2.
ChangeLog available at:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.9 2009/08/20 13:33:06 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Tue Sep  1 02:54:08 2009
+++ provider/libserver/ZarafaCmd.cpp	Fri Sep 11 13:22:36 2009
@@@@ -695,11 +695,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -711,11 +711,11 @@@@ double GetTimeOfDay();
@


1.9
log
@Update to zarafa-6.30.1.

ChangeLog:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.8 2009/08/06 10:02:21 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Wed Aug 12 15:03:19 2009
+++ provider/libserver/ZarafaCmd.cpp	Thu Aug 20 14:51:20 2009
@@@@ -688,11 +688,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -704,11 +704,11 @@@@ double GetTimeOfDay();
@


1.8
log
@Unbreak.
noticed by naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.7 2009/07/31 09:55:56 ajacoutot Exp $
d5 3
a7 3
--- provider/libserver/ZarafaCmd.cpp.orig	Mon Jul 20 23:52:30 2009
+++ provider/libserver/ZarafaCmd.cpp	Thu Jul 30 14:32:35 2009
@@@@ -682,11 +682,11 @@@@ double GetTimeOfDay();
d21 1
a21 1
@@@@ -698,11 +698,11 @@@@ double GetTimeOfDay();
d26 2
a27 1
-    if(lpecSession) { \
a30 2
+    times(&endTimes); \
+    if(lpecSession) { \
@


1.7
log
@Major update to zarafa-6.30.0.
Full ChangeLog available at
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
Now comes with caldav support.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d31 1
a31 1
+    if(lpecSession) \
@


1.6
log
@Update to version 2.20.6
@
text
@d1 37
a37 12
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.5 2009/04/28 10:59:51 ajacoutot Exp $
--- provider/libserver/ZarafaCmd.cpp.orig	Wed Apr 22 16:41:31 2009
+++ provider/libserver/ZarafaCmd.cpp	Tue Apr 28 12:31:24 2009
@@@@ -9134,7 +9134,7 @@@@ SOAP_ENTRY_START1(getLicenseCapa, lpsResponse->er, str
     lpsResponse->sCapabilities.__size = lstCapabilities.size();
     lpsResponse->sCapabilities.__ptr = s_alloc<char *>(soap, lstCapabilities.size());
     
-    for(int i=0; i<lstCapabilities.size(); i++) {
+    for(unsigned int i=0; i<lstCapabilities.size(); i++) {
         lpsResponse->sCapabilities.__ptr[i] = s_strcpy(soap, lstCapabilities[i].c_str());
     }
 exit:
@


1.5
log
@- update to zarafa-6.20.5
* Performance improvements.
* HTML mail fixes.
@
text
@d1 1
a1 1
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.4 2009/04/03 17:30:40 ajacoutot Exp $
@


1.4
log
@- bugfix update to zarafa-6.20.4
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.3 2009/03/19 09:33:52 ajacoutot Exp $
--- provider/libserver/ZarafaCmd.cpp.orig	Thu Mar 26 15:03:00 2009
+++ provider/libserver/ZarafaCmd.cpp	Fri Apr  3 19:36:34 2009
@@@@ -9089,7 +9089,7 @@@@ SOAP_ENTRY_START1(getLicenseCapa, lpsResponse->er, str
@


1.3
log
@- bugfix update to zarafa-6.20.3
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.2 2009/03/05 08:01:26 ajacoutot Exp $
--- provider/libserver/ZarafaCmd.cpp.orig	Tue Mar  3 21:22:16 2009
+++ provider/libserver/ZarafaCmd.cpp	Thu Mar 19 09:57:59 2009
@@@@ -9088,7 +9088,7 @@@@ SOAP_ENTRY_START1(getLicenseCapa, lpsResponse->er, str
@


1.2
log
@- bugfix update to zarafa-6.20.2
- don't hardcode /var/www, use PREFIX-php
- add missing build_depends on net/curl (spotted by form@@, thanks!)
@
text
@d1 4
a4 4
$OpenBSD: patch-provider_libserver_ZarafaCmd_cpp,v 1.1.1.1 2009/02/16 09:44:38 ajacoutot Exp $
--- provider/libserver/ZarafaCmd.cpp.orig	Fri Feb 13 17:12:40 2009
+++ provider/libserver/ZarafaCmd.cpp	Fri Feb 27 06:36:47 2009
@@@@ -9086,7 +9086,7 @@@@ SOAP_ENTRY_START1(getLicenseCapa, lpsResponse->er, str
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- provider/libserver/ZarafaCmd.cpp.orig	Fri Jan  9 16:29:11 2009
+++ provider/libserver/ZarafaCmd.cpp	Fri Jan  9 16:29:40 2009
@@@@ -9080,7 +9080,7 @@@@ SOAP_ENTRY_START1(getLicenseCapa, lpsResponse->er, str
@


1.1.1.1
log
@Import zarafa-6.20.1 (+php5-mapi-6.20.1)

-main
Zarafa is a full-featured e-mail and groupware solution, focused
towards clients using the MAPI standard.  As an MS Exchange replacement,
the Zarafa suite provides the following features:
 * Integration with existing Unix mailserver
 * Native mobile phone support
 * MS Outlook "Look & Feel" webaccess
 * Stable MS Outlook sharing (100% MAPI)

This package provides the Open Source version of Zarafa.

-php
Messaging Application Programming Interface (MAPI) is a messaging
architecture and a Component Object Model based API for Microsoft
Windows. MAPI allows client programs to become (e-mail)
messaging-enabled, -aware, or -based by calling MAPI subsystem routines
that interface with certain messaging servers. While MAPI is designed to
be independent of the protocol, it is usually used with MAPI/RPC, the
proprietary protocol that Microsoft Outlook uses to communicate with
Microsoft Exchange.

These functions allow you to access a MAPI compliant email server.

"just do it" robert@@, ok jasper@@
@
text
@@
