head	1.9;
access;
symbols
	OPENBSD_5_8:1.8.0.4
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.7.0.4
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.6.0.10
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.8
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.6
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.4
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2015.11.02.11.06.34;	author robert;	state dead;
branches;
next	1.8;
commitid	19wAgXlT9RhqpZjX;

1.8
date	2015.04.05.22.25.08;	author robert;	state Exp;
branches;
next	1.7;
commitid	j25w8UqbNvnTFexL;

1.7
date	2014.04.07.13.46.06;	author robert;	state Exp;
branches;
next	1.6;

1.6
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.09.29.17.12.11;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.08.16.15.01.17;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.05.19.17.18.18;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.03.11.08.44.44;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.06.30.02.46.48;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.9
log
@update to 7.2.1
@
text
@$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.8 2015/04/05 22:25:08 robert Exp $

On OpenBSD, _P and _U are defined in ctype.h.

--- common/mapi_ptr/mapi_object_ptr.h.orig	Thu Mar  5 16:54:04 2015
+++ common/mapi_ptr/mapi_object_ptr.h	Fri Apr  3 23:11:10 2015
@@@@ -129,13 +129,13 @@@@ class mapi_object_ptr (public)
 		std::swap(m_lpObject, other.m_lpObject);
 	}
 	
-	template<typename _U>
-	HRESULT QueryInterface(_U &refResult) {
+	template<typename _ZCPU>
+	HRESULT QueryInterface(_ZCPU &refResult) {
 		HRESULT		hr = MAPI_E_NOT_INITIALIZED;
-		typename _U::pointer	lpNewObject = NULL;
+		typename _ZCPU::pointer	lpNewObject = NULL;
 		
 		if (m_lpObject) {
-			hr = m_lpObject->QueryInterface(_U::iid, (void**)&lpNewObject);
+			hr = m_lpObject->QueryInterface(_ZCPU::iid, (void**)&lpNewObject);
 			if (hr == hrSuccess)
 				refResult.reset(lpNewObject, false);
 
@@@@ -157,7 +157,7 @@@@ class mapi_object_ptr (public)
 				if (HrGetOneProp(m_lpObject, PR_EC_OBJECT, &ptrPropValue) != hrSuccess)
 					goto exit;	// hr is still MAPI_E_INTERFACE_NOT_SUPPORTED
 
-				hr = ((IECUnknown*)ptrPropValue->Value.lpszA)->QueryInterface(_U::iid, (void**)&lpNewObject);
+				hr = ((IECUnknown*)ptrPropValue->Value.lpszA)->QueryInterface(_ZCPU::iid, (void**)&lpNewObject);
 				if (hr == hrSuccess)
 					refResult.reset(lpNewObject, false);
 			}
@@@@ -183,9 +183,9 @@@@ class mapi_object_ptr (public)
 		return m_lpObject;
 	}
 
-	template<typename _P>
-	_P as() {
-		_P ptrTmp;
+	template<typename _ZCPP>
+	_ZCPP as() {
+		_ZCPP ptrTmp;
 		QueryInterface(ptrTmp);
 		return ptrTmp;
 	}
@


1.8
log
@update to 7.2.0
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.7 2014/04/07 13:46:06 robert Exp $
@


1.7
log
@update to 7.1.9
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.6 2011/12/22 17:10:04 ajacoutot Exp $
d5 3
a7 3
--- common/mapi_ptr/mapi_object_ptr.h.orig	Thu Jan 30 13:41:33 2014
+++ common/mapi_ptr/mapi_object_ptr.h	Mon Feb  3 11:25:37 2014
@@@@ -134,13 +134,13 @@@@ class mapi_object_ptr (public)
d25 1
a25 1
@@@@ -162,7 +162,7 @@@@ class mapi_object_ptr (public)
d34 1
a34 1
@@@@ -188,9 +188,9 @@@@ class mapi_object_ptr (public)
@


1.6
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.5 2011/09/29 17:12:11 ajacoutot Exp $
d5 3
a7 3
--- common/mapi_ptr/mapi_object_ptr.h.orig	Thu Dec 22 01:02:34 2011
+++ common/mapi_ptr/mapi_object_ptr.h	Thu Dec 22 12:14:19 2011
@@@@ -142,13 +142,13 @@@@ class mapi_object_ptr (public)
d23 1
a23 1
 				refResult = lpNewObject;
d25 1
a25 1
@@@@ -170,7 +170,7 @@@@ class mapi_object_ptr (public)
d32 1
a32 1
 					refResult = lpNewObject;
d34 1
a34 1
@@@@ -196,9 +196,9 @@@@ class mapi_object_ptr (public)
@


1.5
log
@Update to zarafa-7.0.2.
Details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.4 2011/08/16 15:01:17 ajacoutot Exp $
d5 3
a7 3
--- common/mapi_ptr/mapi_object_ptr.h.orig	Mon Sep 26 15:56:08 2011
+++ common/mapi_ptr/mapi_object_ptr.h	Thu Sep 29 16:53:37 2011
@@@@ -146,13 +146,13 @@@@ class mapi_object_ptr (public)
d25 1
a25 1
@@@@ -174,7 +174,7 @@@@ class mapi_object_ptr (public)
d34 1
a34 1
@@@@ -204,9 +204,9 @@@@ class mapi_object_ptr (public)
@


1.4
log
@Update to zarafa 7.0.1.
See http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
for details.
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.3 2011/05/19 17:18:18 ajacoutot Exp $
d5 2
a6 2
--- common/mapi_ptr/mapi_object_ptr.h.orig	Tue Aug  2 15:02:45 2011
+++ common/mapi_ptr/mapi_object_ptr.h	Sun Aug 14 04:45:51 2011
d34 2
a35 2
@@@@ -200,9 +200,9 @@@@ class mapi_object_ptr (public)
 		return m_lpObject == NULL;
@


1.3
log
@Bugfix update to zarafa-6.40.8.
More details at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.2 2011/03/11 08:44:44 ajacoutot Exp $
d5 3
a7 3
--- common/mapi_ptr/mapi_object_ptr.h.orig	Thu May 19 17:01:33 2011
+++ common/mapi_ptr/mapi_object_ptr.h	Thu May 19 18:30:36 2011
@@@@ -170,13 +170,13 @@@@ class mapi_object_ptr (public)
d25 1
a25 1
@@@@ -198,7 +198,7 @@@@ class mapi_object_ptr (public)
d34 1
a34 1
@@@@ -229,9 +229,9 @@@@ class mapi_object_ptr (public)
@


1.2
log
@SECURITY update to zarafa-6.40.6.
As usual, changelog is available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-common_mapi_ptr_mapi_object_ptr_h,v 1.1 2010/06/30 02:46:48 ajacoutot Exp $
d5 3
a7 3
--- common/mapi_ptr/mapi_object_ptr.h.orig	Sun Feb 27 23:06:10 2011
+++ common/mapi_ptr/mapi_object_ptr.h	Thu Mar 10 18:28:02 2011
@@@@ -169,13 +169,13 @@@@ class mapi_object_ptr (public)
d25 1
a25 1
@@@@ -197,7 +197,7 @@@@ class mapi_object_ptr (public)
d34 1
a34 1
@@@@ -228,9 +228,9 @@@@ class mapi_object_ptr (public)
@


1.1
log
@*MAJOR* version update to zarafa-6.40.0.
Read the complete changelog here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

Upgrade documentation is available at:
http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade

zarafa-libical has been removed, current version from ports works fine
for zarafa needs.

php5-mapi has been merged into zarafa-webaccess.
@
text
@d1 23
a23 6
$OpenBSD$
--- common/mapi_ptr/mapi_object_ptr.h.orig	Mon Jun 28 23:35:15 2010
+++ common/mapi_ptr/mapi_object_ptr.h	Mon Jun 28 23:35:26 2010
@@@@ -56,6 +56,11 @@@@
 #include "ECTags.h"
 #include "mapi_memory_ptr.h"
d25 22
a46 8
+// _P is defined in ctype.h
+#ifdef __OpenBSD__
+#undef _P
+#endif
+
 // http://tinyurl.com/ydb363n
 template<typename BaseT, typename DerivedT>
 class Conversion 
@

