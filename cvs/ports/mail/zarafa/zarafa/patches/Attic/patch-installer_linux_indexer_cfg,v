head	1.5;
access;
symbols
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2012.08.30.14.28.22;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.17.15.14.37;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.04.08.01.04;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@$OpenBSD: patch-installer_linux_indexer_cfg,v 1.4 2011/12/22 17:10:04 ajacoutot Exp $
--- installer/linux/indexer.cfg.orig	Wed Dec 21 20:17:06 2011
+++ installer/linux/indexer.cfg	Thu Dec 22 12:14:19 2011
@@@@ -2,19 +2,19 @@@@
 # INDEXER SERVICE SETTINGS
 
 # Location of the index files
-index_path          =   /var/lib/zarafa/index/
+index_path          =   /var/db/zarafa/index/
 
 # run as specific user
-run_as_user         =
+run_as_user         = _zarafa
 
 # run as specific group
-run_as_group        =
+run_as_group        = _zarafa
 
 # control pid file
 pid_file            =   /var/run/zarafa-indexer.pid
 
 # run server in this path (when not using the -F switch)
-running_path        =   /
+running_path        =   /var/empty
 
 # Force remove lockfiles on startup. Leaves possibly corrupt indexes on disk.
 # See log for info of removed locks.
@@@@ -32,7 +32,7 @@@@ limit_results		=	0
 server_socket   =   file:///var/run/zarafa
 
 # Login to the Zarafa server using this SSL Key
-sslkey_file         = /etc/zarafa/ssl/indexer.pem
+sslkey_file         = ${SYSCONFDIR}/zarafa/ssl/indexer.pem
 
 # The password of the SSL Key
 sslkey_pass         = replace-with-server-cert-password
@@@@ -46,10 +46,10 @@@@ sslkey_pass         = replace-with-server-cert-passwor
 server_bind_name   =   file:///var/run/zarafa-indexer
 
 # File with RSA key for SSL, used then server_bind_name uses https
-ssl_private_key_file= /etc/zarafa/indexer/privkey.pem
+ssl_private_key_file= ${SYSCONFDIR}/zarafa/indexer/privkey.pem
 
 # File with certificate for SSL, used then server_bind_name uses https
-ssl_certificate_file= /etc/zarafa/indexer/cert.pem
+ssl_certificate_file= ${SYSCONFDIR}/zarafa/indexer/cert.pem
 
 ##############################################################
 # LOG SETTINGS
@@@@ -106,7 +106,7 @@@@ index_attachments	= no
 index_attachment_max_size = 5120
 
 # Scripts to attachment to text parser
-index_attachment_parser = /etc/zarafa/indexerscripts/attachments_parser
+index_attachment_parser = ${SYSCONFDIR}/zarafa/indexerscripts/attachments_parser
 
 # Maximum amount of memory which a parser may use in bytes (set to 0 for unlimited)
 # If this maximum is exceeded the parser will be killed
@


1.4
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-installer_linux_indexer_cfg,v 1.3 2011/11/17 15:14:37 ajacoutot Exp $
@


1.3
log
@Update to zarafa-7.0.3.
@
text
@d1 3
a3 3
$OpenBSD: patch-installer_linux_indexer_cfg,v 1.2 2011/06/02 12:46:37 ajacoutot Exp $
--- installer/linux/indexer.cfg.orig	Wed Nov 16 23:01:36 2011
+++ installer/linux/indexer.cfg	Thu Nov 17 13:59:31 2011
d50 1
a50 1
@@@@ -106,7 +106,7 @@@@ index_attachments	= yes
@


1.2
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-installer_linux_indexer_cfg,v 1.1 2011/04/04 08:01:04 ajacoutot Exp $
--- installer/linux/indexer.cfg.orig	Wed Apr 20 16:39:10 2011
+++ installer/linux/indexer.cfg	Wed Jun  1 07:12:54 2011
d28 1
a28 1
@@@@ -29,7 +29,7 @@@@ cleanup_lockfiles	=	no
d37 1
a37 1
@@@@ -43,10 +43,10 @@@@ sslkey_pass         = replace-with-server-cert-passwor
d50 1
a50 1
@@@@ -103,7 +103,7 @@@@ index_attachments	= yes
@


1.1
log
@Add clucene support (i.e. enable zarafa-indexer). Note that the
zarafa-indexer is not used by default.
Tweak patches accordingly.
Use RLIMIT_DATA instead of RLIMIT_AS which we don't have.

Fix default client_update_path.
Remove a couple of patch entries that are not needed anymore.

Rewrite zarafa.rc and make it a wrapper script that calls the provided
rc.d(8) scripts. This is much more simple, makes much more sense and
allow for proper debugging as discussed with robert@@.
@
text
@d1 4
a4 4
$OpenBSD$
--- installer/linux/indexer.cfg.orig	Sun Apr  3 09:12:52 2011
+++ installer/linux/indexer.cfg	Sun Apr  3 09:15:54 2011
@@@@ -2,13 +2,13 @@@@
d21 7
d50 1
a50 1
@@@@ -107,7 +107,7 @@@@ index_attachments	= yes
@

