head	1.35;
access;
symbols
	OPENBSD_5_8:1.34.0.4
	OPENBSD_5_8_BASE:1.34
	OPENBSD_5_7:1.33.0.2
	OPENBSD_5_7_BASE:1.33
	OPENBSD_5_6:1.31.0.2
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.29.0.2
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.28.0.2
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.25.0.2
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.2.0.2
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20090216:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.35
date	2015.11.02.11.06.34;	author robert;	state dead;
branches;
next	1.34;
commitid	19wAgXlT9RhqpZjX;

1.34
date	2015.04.05.22.25.08;	author robert;	state Exp;
branches;
next	1.33;
commitid	j25w8UqbNvnTFexL;

1.33
date	2014.11.06.17.11.01;	author sthen;	state Exp;
branches;
next	1.32;
commitid	BEEhAAhq0qgUie6P;

1.32
date	2014.09.02.11.09.38;	author robert;	state Exp;
branches;
next	1.31;
commitid	BtGLGhiodpDgnVXA;

1.31
date	2014.07.03.06.14.40;	author robert;	state Exp;
branches;
next	1.30;
commitid	JoccqcNB1M1J0kmz;

1.30
date	2014.04.07.13.46.06;	author robert;	state Exp;
branches;
next	1.29;

1.29
date	2013.11.01.11.20.20;	author robert;	state Exp;
branches;
next	1.28;

1.28
date	2013.06.21.22.42.13;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2013.06.18.11.58.17;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.31.13.01.19;	author robert;	state Exp;
branches;
next	1.25;

1.25
date	2012.08.30.14.28.22;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2012.08.19.15.50.25;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2012.07.09.15.27.30;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2012.05.05.16.56.17;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.03.15.17.04.31;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.02.16.22.18.36;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2012.01.12.14.17.23;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.17.15.14.37;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.08.16.15.01.17;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.06.10.15.55.00;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.05.19.17.18.18;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.04.04.08.01.04;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.03.11.08.44.44;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.03.13.16.05;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.08.31.17.57.21;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.22.10.13.27;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.06.30.02.46.48;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.01.09.14.03.25;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.21.09.59.54;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.10.20.22.34.26;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.07.31.09.55.56;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.03.17.30.40;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.35
log
@update to 7.2.1
@
text
@$OpenBSD: patch-configure,v 1.34 2015/04/05 22:25:08 robert Exp $
--- configure.orig	Thu Mar  5 16:52:48 2015
+++ configure	Fri Apr  3 23:11:10 2015
@@@@ -16770,11 +16770,6 @@@@ esac
 # disable write-strings: too much complains about "" being 'cast' to char* (since const char* is not in the declarations) on g++-4.2 and higher
 ZCPPFLAGS="$ZCPPFLAGS $BUILDOS -DHAVE_CONFIG_H"
 ZCXXFLAGS="$ZCXXFLAGS -g -rdynamic -Wall -Wno-write-strings"
-if ! test "$want_release" = "yes"; then
-# when using -pedantic, -Wno-long-long is required
-# only add -pedantic in non-release mode, since a header in php5 contains a , too much in an enum, which triggers a compile error.
-  ZCXXFLAGS="$ZCXXFLAGS -pedantic -Wno-long-long"
-fi
 
 # programs that use files >2gb need 64bit file support
 LFS_CFLAGS=`getconf LFS_CFLAGS`
@@@@ -18986,68 +18981,6 @@@@ rm -f core conftest.err conftest.$ac_objext \
 
 LIBS=$LIBS_system
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for crypt" >&5
-$as_echo_n "checking for crypt... " >&6; }
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
- int main() {
-  char crypt();  crypt();
-}
-_ACEOF
-if ac_fn_cxx_try_link "$LINENO"; then :
-   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-else
-   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-	  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for crypt in -lcrypt" >&5
-$as_echo_n "checking for crypt in -lcrypt... " >&6; }
-if ${ac_cv_lib_crypt_crypt+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lcrypt  $LIBS"
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char crypt ();
-int
-main ()
-{
-return crypt ();
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_cxx_try_link "$LINENO"; then :
-  ac_cv_lib_crypt_crypt=yes
-else
-  ac_cv_lib_crypt_crypt=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_crypt_crypt" >&5
-$as_echo "$ac_cv_lib_crypt_crypt" >&6; }
-if test "x$ac_cv_lib_crypt_crypt" = xyes; then :
-  CRYPT_LIBS="-lcrypt"
-else
-  as_fn_error $? "required library libcrypt missing or unusable" "$LINENO" 5
-fi
-
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$LIBS_system
-
-
 # Only specific links with uuid and dl, clients only with crypto and ssl for ssl connections
 SSL_LIBS=
 # TODO: version of ssl check??
@@@@ -19058,7 +18991,7 @@@@ if ${ac_cv_lib_ssl_SSL_accept+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lssl  $LIBS"
+LIBS="-lssl -lcrypto $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@


1.34
log
@update to 7.2.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.33 2014/11/06 17:11:01 sthen Exp $
@


1.33
log
@don't use -pedantic during build, php 5.5 has a trailing , in an enum
which doesn't work with our gcc version
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.32 2014/09/02 11:09:38 robert Exp $
--- configure.orig	Sun Aug 24 03:53:42 2014
+++ configure	Wed Oct 29 08:29:56 2014
@@@@ -16750,11 +16750,6 @@@@ esac
d16 1
a16 1
@@@@ -19764,68 +19759,6 @@@@ rm -f core conftest.err conftest.$ac_objext \
d85 1
a85 1
@@@@ -19836,7 +19769,7 @@@@ if ${ac_cv_lib_ssl_SSL_accept+:} false; then :
@


1.32
log
@update to 7.1.11
@
text
@d1 16
a16 4
$OpenBSD$
--- configure.orig	Mon Sep  1 18:01:58 2014
+++ configure	Mon Sep  1 18:02:31 2014
@@@@ -19764,68 +19764,6 @@@@ rm -f core conftest.err conftest.$ac_objext \
d85 1
a85 1
@@@@ -19836,7 +19774,7 @@@@ if ${ac_cv_lib_ssl_SSL_accept+:} false; then :
@


1.31
log
@update to 7.1.10
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.30 2014/04/07 13:46:06 robert Exp $
--- configure.orig	Fri May 23 15:04:01 2014
+++ configure	Wed Jul  2 17:28:25 2014
@@@@ -19062,68 +19062,6 @@@@ rm -f core conftest.err conftest.$ac_objext \
d24 1
a24 1
-if test "${ac_cv_lib_crypt_crypt+set}" = set; then :
d58 1
a58 1
-if test "x$ac_cv_lib_crypt_crypt" = x""yes; then :
d73 1
a73 1
@@@@ -19134,7 +19072,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then 
@


1.30
log
@update to 7.1.9
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.29 2013/11/01 11:20:20 robert Exp $
--- configure.orig	Thu Jan 30 12:44:44 2014
+++ configure	Mon Feb  3 11:25:37 2014
@@@@ -18850,68 +18850,6 @@@@ rm -f core conftest.err conftest.$ac_objext \
d73 1
a73 1
@@@@ -18922,7 +18860,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then 
@


1.29
log
@update to 7.1.7
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Wed Oct 30 14:36:25 2013
+++ configure	Wed Oct 30 14:38:09 2013
@@@@ -18812,68 +18812,6 @@@@ rm -f core conftest.err conftest.$ac_objext \
d73 1
a73 1
@@@@ -18884,7 +18822,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then 
@


1.28
log
@sync WANTLIB and remove patches to handle e2fsprogs/libuuid changes.
add a patch to pick up com_err.h from base rather than the wrong one from
e2fsprogs. ok aja

Thus concludes the e2fsprogs commit rampage - Merry meet, merry part,
and merry meet again.
@
text
@d1 4
a4 10
$OpenBSD: patch-configure,v 1.27 2013/06/18 11:58:17 ajacoutot Exp $

Our crypt(3) is in libc.

Use uuid from sysutils/e2fsprogs instead of devel/uuid
(ECKrbAuth.cpp:61 et/com_err.h).

--- configure.orig	Thu Feb 28 16:13:46 2013
+++ configure	Tue Jun 18 13:09:00 2013
@@@@ -18780,74 +18780,12 @@@@ rm -f core conftest.err conftest.$ac_objext \
d59 1
a59 6
   cat >>confdefs.h <<_ACEOF
 #define HAVE_LIBCRYPT 1
 _ACEOF
 
-  LIBS="-lcrypt $LIBS"
 
d63 1
a63 1
 
a66 1
-CRYPT_LIBS=$LIBS
d73 1
a73 1
@@@@ -18858,7 +18796,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then 
@


1.27
log
@Use libuuid from e2fsprogs instead of ossp-uuid since that is where zarafa
looks for the header.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.26 2013/03/31 13:01:19 robert Exp $
a92 48
 
@@@@ -19154,13 +19092,13 @@@@ if test "x$ac_cv_func_uuid_create" = x""yes; then :
 _ACEOF
  UUID_LIBS=""
 else
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uuid_create in -luuid" >&5
-$as_echo_n "checking for uuid_create in -luuid... " >&6; }
+    { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uuid_create in -le2fs-uuid" >&5
+$as_echo_n "checking for uuid_create in -le2fs-uuid... " >&6; }
 if test "${ac_cv_lib_uuid_uuid_create+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-luuid  $LIBS"
+LIBS="-le2fs-uuid  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -19191,17 +19129,17 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_uuid_uuid_create" >&5
 $as_echo "$ac_cv_lib_uuid_uuid_create" >&6; }
 if test "x$ac_cv_lib_uuid_uuid_create" = x""yes; then :
-  UUID_LIBS="-luuid"
+  UUID_LIBS="-le2fs-uuid"
     $as_echo "#define HAVE_UUID_CREATE 1" >>confdefs.h
 
 else
-      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uuid_generate in -luuid" >&5
-$as_echo_n "checking for uuid_generate in -luuid... " >&6; }
+      { $as_echo "$as_me:${as_lineno-$LINENO}: checking for uuid_generate in -le2fs-uuid" >&5
+$as_echo_n "checking for uuid_generate in -le2fs-uuid... " >&6; }
 if test "${ac_cv_lib_uuid_uuid_generate+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-luuid  $LIBS"
+LIBS="-le2fs-uuid  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -19232,7 +19170,7 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_uuid_uuid_generate" >&5
 $as_echo "$ac_cv_lib_uuid_uuid_generate" >&6; }
 if test "x$ac_cv_lib_uuid_uuid_generate" = x""yes; then :
-  UUID_LIBS="-luuid"
+  UUID_LIBS="-le2fs-uuid"
 else
         as_fn_error $? "required library libuuid missing or unusable" "$LINENO" 5
@


1.26
log
@update to 7.1.4
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.25 2012/08/30 14:28:22 ajacoutot Exp $
d5 3
d9 1
a9 19
+++ configure	Sun Mar 31 14:29:43 2013
@@@@ -17302,7 +17302,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -17335,7 +17335,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
 if test "x$ac_cv_lib_intl_strftime" = x""yes; then :
   $as_echo "#define HAVE_STRFTIME 1" >>confdefs.h
 
-LIBS="-lintl $LIBS"
+LIBS="-lintl -liconv $LIBS"
 fi
 
 fi
d94 31
a124 1
@@@@ -19365,7 +19303,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then :
d128 2
a129 2
-LIBS="-lintl  $LIBS"
+LIBS="-lintl -liconv $LIBS"
d132 9
@


1.25
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- configure.orig	Wed Aug  8 16:35:42 2012
+++ configure	Wed Aug 29 10:06:28 2012
@@@@ -17292,7 +17292,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then :
d16 1
a16 1
@@@@ -17325,7 +17325,7 @@@@ $as_echo "$ac_cv_lib_intl_strftime" >&6; }
d25 1
a25 1
@@@@ -18713,74 +18713,12 @@@@ rm -f core conftest.err conftest.$ac_objext \
d100 1
a100 1
@@@@ -18791,7 +18729,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then 
d109 1
a109 1
@@@@ -19298,7 +19236,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then :
@


1.24
log
@Remove -lpthread patch.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.23 2012/07/09 15:27:30 ajacoutot Exp $
d3 1
a3 1
OpenBSD does NOT require -lcrypt, DES encryption is part of the standard libc.
d5 4
a8 4
--- configure.orig	Thu May  3 11:28:37 2012
+++ configure	Sat May  5 17:39:39 2012
@@@@ -24574,7 +24574,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d13 6
a18 6
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -24634,7 +24634,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
 #define HAVE_STRFTIME 1
 _ACEOF
d25 22
a46 8
@@@@ -27761,84 +27761,10 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
 	 { echo "$as_me:$LINENO: result: no" >&5
 echo "${ECHO_T}no" >&6; }
 
-{ echo "$as_me:$LINENO: checking for crypt in -lcrypt" >&5
-echo $ECHO_N "checking for crypt in -lcrypt... $ECHO_C" >&6; }
-if test "${ac_cv_lib_crypt_crypt+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
d50 1
a50 5
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
d68 1
a68 18
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_cxx_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
d71 4
a74 9
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_crypt_crypt=no
 fi
-
+        
 rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
       conftest$ac_exeext conftest.$ac_ext
d77 7
a83 7
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_crypt_crypt" >&5
-echo "${ECHO_T}$ac_cv_lib_crypt_crypt" >&6; }
-if test $ac_cv_lib_crypt_crypt = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBCRYPT 1
-_ACEOF
-
d85 1
a85 1
-
d87 3
a89 3
-  { { echo "$as_me:$LINENO: error: required library libcrypt missing or unusable" >&5
-echo "$as_me: error: required library libcrypt missing or unusable" >&2;}
-   { (exit 1); exit 1; }; }
d91 4
a95 1
-fi
d97 5
a101 7
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
 CRYPT_LIBS=$LIBS
 LIBS=$LIBS_system
 
@@@@ -27853,7 +27779,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d106 5
a110 5
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -29078,7 +29004,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
d115 3
a117 12
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -29134,7 +29060,7 @@@@ fi
 { echo "$as_me:$LINENO: result: $ac_cv_lib_intl_gettext" >&5
 echo "${ECHO_T}$ac_cv_lib_intl_gettext" >&6; }
 if test $ac_cv_lib_intl_gettext = yes; then
-  INTL_LIBS="-lintl"
+  INTL_LIBS="-lintl -liconv"
 else
       { { echo "$as_me:$LINENO: error: required library libintl missing or unusable" >&5
 echo "$as_me: error: required library libintl missing or unusable" >&2;}
@


1.23
log
@Make zarafa use the system libvmime.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.22 2012/05/05 16:56:17 ajacoutot Exp $
a6 17
@@@@ -21942,13 +21942,13 @@@@ fi
 
 # Everything uses pthread
 # check lib, but do not set in link list, but use -pthread instead (gnu c/c++ only?)
-{ echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6; }
+{ echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6; }
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@


1.22
log
@Update zarafa to 7.0.7.
Detailed changelog at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.21 2012/03/15 17:04:31 ajacoutot Exp $
a41 9
@@@@ -26150,7 +26150,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
 _ACEOF
 
 		VMIME_CFLAGS=-I$VMIME_PREFIX
-	VMIME_LIBS="$VMIME_LIBS -lvmime"
+	VMIME_LIBS="$VMIME_LIBS -lvmime-zarafa"
 
 else
 
@


1.21
log
@Update to zarafa-7.0.6.
More details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.20 2012/02/16 22:18:36 ajacoutot Exp $
d5 3
a7 3
--- configure.orig	Tue Mar 13 11:28:08 2012
+++ configure	Thu Mar 15 16:42:28 2012
@@@@ -21937,13 +21937,13 @@@@ fi
d24 1
a24 1
@@@@ -24473,7 +24473,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d33 1
a33 1
@@@@ -24533,7 +24533,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
d42 1
a42 1
@@@@ -26049,7 +26049,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d51 1
a51 1
@@@@ -27660,84 +27660,10 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
d137 1
a137 1
@@@@ -27752,7 +27678,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d146 1
a146 1
@@@@ -28977,7 +28903,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d155 1
a155 1
@@@@ -29033,7 +28959,7 @@@@ fi
@


1.20
log
@Update to zarafa 7.0.5.
Detailed changelog:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.19 2012/01/12 14:17:23 ajacoutot Exp $
d5 3
a7 3
--- configure.orig	Wed Feb  1 15:48:54 2012
+++ configure	Thu Feb  2 12:28:17 2012
@@@@ -21938,13 +21938,13 @@@@ fi
d24 1
a24 1
@@@@ -24474,7 +24474,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d33 1
a33 1
@@@@ -24534,7 +24534,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
d42 1
a42 1
@@@@ -26050,7 +26050,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d51 1
a51 1
@@@@ -27661,84 +27661,10 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
d137 1
a137 1
@@@@ -27753,7 +27679,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d146 1
a146 1
@@@@ -28929,7 +28855,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d155 1
a155 1
@@@@ -28985,7 +28911,7 @@@@ fi
@


1.19
log
@OpenBSD does not require -lcrypt, DES encryption is part of the standard
libc.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.18 2011/12/22 17:10:04 ajacoutot Exp $
d5 3
a7 3
--- configure.orig	Wed Dec 21 20:17:32 2011
+++ configure	Thu Jan 12 14:51:50 2012
@@@@ -21934,13 +21934,13 @@@@ fi
d24 1
a24 1
@@@@ -24459,7 +24459,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d33 1
a33 1
@@@@ -24519,7 +24519,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
d42 1
a42 1
@@@@ -26035,7 +26035,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d51 1
a51 1
@@@@ -27552,84 +27552,10 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
d137 1
a137 1
@@@@ -27644,7 +27570,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d146 1
a146 1
@@@@ -28820,7 +28746,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d155 1
a155 1
@@@@ -28876,7 +28802,7 @@@@ fi
@


1.18
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 4
a4 1
$OpenBSD: patch-configure,v 1.17 2011/11/17 15:14:37 ajacoutot Exp $
d6 1
a6 1
+++ configure	Thu Dec 22 12:14:19 2011
d51 1
a51 1
@@@@ -27552,13 +27552,13 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
d57 4
a60 6
+{ echo "$as_me:$LINENO: checking for crypt in -lcrypto" >&5
+echo $ECHO_N "checking for crypt in -lcrypto... $ECHO_C" >&6; }
 if test "${ac_cv_lib_crypt_crypt+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
d62 60
a121 8
+LIBS="-lcrypto  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
@@@@ -27618,7 +27618,7 @@@@ if test $ac_cv_lib_crypt_crypt = yes; then
 #define HAVE_LIBCRYPT 1
 _ACEOF
 
d123 13
a135 1
+  LIBS="-lcrypto $LIBS"
d137 1
a137 3
 else
   { { echo "$as_me:$LINENO: error: required library libcrypt missing or unusable" >&5
@@@@ -27644,7 +27644,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d146 1
a146 1
@@@@ -28820,7 +28820,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d155 1
a155 1
@@@@ -28876,7 +28876,7 @@@@ fi
@


1.17
log
@Update to zarafa-7.0.3.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.16 2011/08/16 15:01:17 ajacoutot Exp $
--- configure.orig	Wed Nov 16 23:02:01 2011
+++ configure	Thu Nov 17 13:59:31 2011
a20 9
@@@@ -22059,7 +22059,7 @@@@ else
   with_distro=rhel
 fi
 
-if test "$with_distro" != "rhel" -a "$with_distro" != "suse" -a "$with_distro" != "sles" -a "$with_distro" != "cbs4"; then
+if test "$with_distro" != "rhel" -a "$with_distro" != "suse" -a "$with_distro" != "sles" -a "$with_distro" != "cbs4" -a "$with_distro" != "openbsd"; then
    { echo "$as_me:$LINENO: result: unknown distro, using rhel instead" >&5
 echo "${ECHO_T}unknown distro, using rhel instead" >&6; }
    with_distro=rhel
@


1.16
log
@Update to zarafa 7.0.1.
See http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
for details.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.15 2011/06/10 15:55:00 ajacoutot Exp $
--- configure.orig	Tue Aug  2 11:47:36 2011
+++ configure	Sun Aug 14 04:45:51 2011
d83 1
a83 1
@@@@ -27712,7 +27712,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d92 1
a92 1
@@@@ -28819,7 +28819,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d101 1
a101 1
@@@@ -28875,7 +28875,7 @@@@ fi
@


1.15
log
@Update to zarafa-7.0.0 (rc2).
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.14 2011/06/02 12:46:37 ajacoutot Exp $
--- configure.orig	Thu Jun  9 22:21:21 2011
+++ configure	Fri Jun 10 13:34:10 2011
@@@@ -21920,13 +21920,13 @@@@ fi
d21 1
a21 1
@@@@ -22045,7 +22045,7 @@@@ else
d30 1
a30 1
@@@@ -24445,7 +24445,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d39 1
a39 1
@@@@ -24505,7 +24505,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
d48 1
a48 1
@@@@ -26019,7 +26019,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 1
a57 1
@@@@ -27536,13 +27536,13 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
d74 1
a74 1
@@@@ -27602,7 +27602,7 @@@@ if test $ac_cv_lib_crypt_crypt = yes; then
d83 1
a83 1
@@@@ -27696,7 +27696,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d92 1
a92 1
@@@@ -28803,7 +28803,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d101 1
a101 1
@@@@ -28859,7 +28859,7 @@@@ fi
@


1.14
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.13 2011/05/19 17:18:18 ajacoutot Exp $
--- configure.orig	Wed Apr 20 16:39:39 2011
+++ configure	Sun May 29 09:27:20 2011
@@@@ -21919,13 +21919,13 @@@@ fi
d21 1
a21 1
@@@@ -22044,7 +22044,7 @@@@ else
d25 4
a28 4
-if test "$with_distro" != "rhel" -a "$with_distro" != "suse" -a "$with_distro" != "sles"; then
+if test "$with_distro" != "rhel" -a "$with_distro" != "suse" -a "$with_distro" != "sles" -a "$with_distro" != "openbsd"; then
    { echo "$as_me:$LINENO: result: invalid distro, using rhel instead" >&5
 echo "${ECHO_T}invalid distro, using rhel instead" >&6; }
d30 1
a30 1
@@@@ -24444,7 +24444,7 @@@@ if test "${ac_cv_lib_intl_strftime+set}" = set; then
d39 1
a39 1
@@@@ -24504,7 +24504,7 @@@@ if test $ac_cv_lib_intl_strftime = yes; then
d48 1
a48 1
@@@@ -26018,7 +26018,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 1
a57 1
@@@@ -27535,13 +27535,13 @@@@ sed 's/^/| /' conftest.$ac_ext >&5
d74 1
a74 1
@@@@ -27601,7 +27601,7 @@@@ if test $ac_cv_lib_crypt_crypt = yes; then
d83 1
a83 1
@@@@ -27695,7 +27695,7 @@@@ if test "${ac_cv_lib_ssl_SSL_accept+set}" = set; then
d92 1
a92 1
@@@@ -28802,7 +28802,7 @@@@ if test "${ac_cv_lib_intl_gettext+set}" = set; then
d101 1
a101 1
@@@@ -28858,7 +28858,7 @@@@ fi
@


1.13
log
@Bugfix update to zarafa-6.40.8.
More details at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 4
a4 6
$OpenBSD: patch-configure,v 1.12 2011/04/04 08:01:04 ajacoutot Exp $
--- configure.orig	Thu May 19 12:23:58 2011
+++ configure	Thu May 19 18:30:36 2011
@@@@ -21807,12 +21807,7 @@@@ else
   want_release=no
 fi
d6 16
a21 10
-if test "$want_release" = "yes"; then
-    CXXFLAGS="$CXXFLAGS -O2 -fno-strict-aliasing"
-else
-# -fPIC must be present on x86_64 when -O2 isn't used
     CXXFLAGS="$CXXFLAGS -fPIC"
-fi
 
 # Check whether --enable-tcmalloc was given.
 if test "${enable_tcmalloc+set}" = set; then
@@@@ -21840,7 +21835,7 @@@@ else
d29 3
d33 16
a48 23
@@@@ -22180,21 +22175,6 @@@@ echo "$as_me: error: Cannot execute $PHP_CONFIG" >&2;}
   PHP_LDFLAGS=`$PHP_CONFIG --ldflags`
   PHP_EXTENSION_DIR=`$PHP_CONFIG --extension-dir`
   PHP_VERSION=`$PHP_CONFIG --version`
-  # watch escaping for brackets
-  PHP_SYSCONF_DIR=`$PHP_CONFIG --configure-options | sed -e 's_.*with-config-file-scan-dir=\([^ ]\+\).*_\1_'`
-  if test ${PHP_SYSCONF_DIR:0:1} != "/"; then
-	# find path in existing paths
-	if test -d "/etc/php.d"; then
-		PHP_SYSCONF_DIR="/etc/php.d"
-	elif test -d "/etc/php5/conf.d"; then
-		PHP_SYSCONF_DIR="/etc/php5/conf.d"
-	else
-		# this happens on old distributions
-	    { echo "$as_me:$LINENO: result: Cannot find php sysconf path, forcing /usr/share/doc/zarafa" >&5
-echo "${ECHO_T}Cannot find php sysconf path, forcing /usr/share/doc/zarafa" >&6; }
-		PHP_SYSCONF_DIR="/usr/share/doc/zarafa"
-	fi
-  fi
 
   if test -z "$PHP_EXTENSION_DIR"; then
     { { echo "$as_me:$LINENO: error: Cannot find php-config. Please use --with-php-config=PATH" >&5
@@@@ -22720,7 +22700,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d52 2
a53 2
-	VMIME_LIBS="-lvmime"
+	VMIME_LIBS="${ZAFARA_LDFLAGS} -lvmime-zarafa"
d57 9
a65 9
@@@@ -26092,13 +26072,13 @@@@ LIBS=$libs_keep
 libs_keep=$LIBS
 # check lib, but do not set in link list
 
-{ echo "$as_me:$LINENO: checking for pthread_create in -lpthread" >&5
-echo $ECHO_N "checking for pthread_create in -lpthread... $ECHO_C" >&6; }
+{ echo "$as_me:$LINENO: checking for pthread_create in -pthread" >&5
+echo $ECHO_N "checking for pthread_create in -pthread... $ECHO_C" >&6; }
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then
d69 2
a70 2
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
d74 2
a75 2
@@@@ -26158,7 +26138,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
 #define HAVE_LIBPTHREAD 1
d78 2
a79 2
-  LIBS="-lpthread $LIBS"
+  LIBS="-pthread $LIBS"
d82 28
a109 1
   { { echo "$as_me:$LINENO: error: required library libpthread missing or unusable" >&5
@


1.12
log
@Add clucene support (i.e. enable zarafa-indexer). Note that the
zarafa-indexer is not used by default.
Tweak patches accordingly.
Use RLIMIT_DATA instead of RLIMIT_AS which we don't have.

Fix default client_update_path.
Remove a couple of patch entries that are not needed anymore.

Rewrite zarafa.rc and make it a wrapper script that calls the provided
rc.d(8) scripts. This is much more simple, makes much more sense and
allow for proper debugging as discussed with robert@@.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.11 2011/03/11 08:44:44 ajacoutot Exp $
--- configure.orig	Mon Mar 28 20:32:47 2011
+++ configure	Sun Apr  3 09:11:19 2011
@@@@ -21801,12 +21801,7 @@@@ else
d17 1
a17 1
@@@@ -21834,7 +21829,7 @@@@ else
d26 1
a26 1
@@@@ -22174,21 +22169,6 @@@@ echo "$as_me: error: Cannot execute $PHP_CONFIG" >&2;}
d48 1
a48 1
@@@@ -22714,7 +22694,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 1
a57 1
@@@@ -25116,13 +25096,13 @@@@ LIBS=$libs_keep
d74 1
a74 1
@@@@ -25182,7 +25162,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.11
log
@SECURITY update to zarafa-6.40.6.
As usual, changelog is available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.10 2011/03/03 13:16:05 ajacoutot Exp $
--- configure.orig	Sun Feb 27 19:34:30 2011
+++ configure	Thu Mar 10 17:22:03 2011
d57 1
a57 13
@@@@ -23124,8 +23104,10 @@@@ fi
 
 done
 
+# XXX force removing clucene support
+WITH_CLUCENE_TRUE='#'
+WITH_CLUCENE_FALSE=
 
-
 CFLAGS=$cflags_keep
 
 # Check for CLucene availability
@@@@ -25116,13 +25098,13 @@@@ LIBS=$libs_keep
d74 1
a74 1
@@@@ -25182,7 +25164,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.10
log
@Update to zarafa-6.40.5.
Complete changelog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt

Several documentation and configuration tweaks.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2010/08/31 17:57:21 ajacoutot Exp $
--- configure.orig	Mon Jan 24 13:06:11 2011
+++ configure	Tue Jan 25 12:56:17 2011
@@@@ -21794,12 +21794,7 @@@@ else
d17 1
a17 1
@@@@ -21827,7 +21822,7 @@@@ else
d26 1
a26 1
@@@@ -22167,21 +22162,6 @@@@ echo "$as_me: error: Cannot execute $PHP_CONFIG" >&2;}
d48 1
a48 1
@@@@ -22707,7 +22687,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 1
a57 1
@@@@ -23117,8 +23097,10 @@@@ fi
d69 1
a69 1
@@@@ -24489,13 +24471,13 @@@@ LIBS=$libs_keep
d86 1
a86 1
@@@@ -24555,7 +24537,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.9
log
@Update to zarafa-6.40.2.
Complete changelog available at:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.8 2010/08/22 10:13:27 ajacoutot Exp $
--- configure.orig	Mon Aug 30 09:31:47 2010
+++ configure	Tue Aug 31 15:14:03 2010
@@@@ -21780,12 +21780,7 @@@@ else
d17 1
a17 1
@@@@ -21813,7 +21808,7 @@@@ else
d26 1
a26 1
@@@@ -22153,21 +22148,6 @@@@ echo "$as_me: error: Cannot execute $PHP_CONFIG" >&2;}
d48 1
a48 1
@@@@ -22693,7 +22673,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 1
a57 1
@@@@ -23103,8 +23083,10 @@@@ fi
d69 1
a69 1
@@@@ -24475,13 +24457,13 @@@@ LIBS=$libs_keep
d86 1
a86 1
@@@@ -24541,7 +24523,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.8
log
@Update zarafa to version 6.40.1.
See http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
for details.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.7 2010/06/30 02:46:48 ajacoutot Exp $
--- configure.orig	Tue Aug  3 11:42:48 2010
+++ configure	Sun Aug 22 10:22:53 2010
d69 1
a69 1
@@@@ -24476,13 +24458,13 @@@@ LIBS=$libs_keep
d86 1
a86 1
@@@@ -24542,7 +24524,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.7
log
@*MAJOR* version update to zarafa-6.40.0.
Read the complete changelog here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

Upgrade documentation is available at:
http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade

zarafa-libical has been removed, current version from ports works fine
for zarafa needs.

php5-mapi has been merged into zarafa-webaccess.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2010/01/09 14:03:25 ajacoutot Exp $
--- configure.orig	Mon May 31 16:37:57 2010
+++ configure	Tue Jun 29 03:42:19 2010
@@@@ -21781,12 +21781,7 @@@@ else
d17 1
a17 1
@@@@ -21814,7 +21809,7 @@@@ else
d26 1
a26 1
@@@@ -22154,21 +22149,6 @@@@ echo "$as_me: error: Cannot execute $PHP_CONFIG" >&2;}
d48 1
a48 1
@@@@ -22694,7 +22674,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 3
a59 3
@@@@ -23369,8 +23349,10 @@@@ else
   WITH_CLUCENE_FALSE=
 fi
d67 3
a69 3
 CXXFLAGS=$cxxflags_keep
 ac_ext=c
@@@@ -24399,13 +24381,13 @@@@ LIBS=$libs_keep
d86 1
a86 1
@@@@ -24465,7 +24447,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.6
log
@Bugfix update to zarafa-6.30.7.
Changelog:
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2009/10/21 09:59:54 ajacoutot Exp $
--- configure.orig	Wed Jan  6 04:28:18 2010
+++ configure	Sat Jan  9 14:10:30 2010
@@@@ -21647,12 +21647,7 @@@@ else
d17 32
a48 1
@@@@ -22494,7 +22489,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d57 2
a58 8
@@@@ -22897,7 +22892,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
   ICAL_CFLAGS=-I$ICAL_PREFIX
-	ICAL_LIBS="-lical -licalss"
+	ICAL_LIBS="${ZAFARA_LDFLAGS} -lical-zarafa -licalss-zarafa"
 else
   WITH_ICAL=no
d60 10
a69 1
@@@@ -23766,13 +23761,13 @@@@ LIBS=$libs_keep
d86 1
a86 1
@@@@ -23832,7 +23827,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.5
log
@Bugfix update to zarafa-6.30.4.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.4 2009/10/20 22:34:26 ajacoutot Exp $
--- configure.orig	Fri Oct 16 20:39:15 2009
+++ configure	Wed Oct 21 11:32:04 2009
d26 1
a26 1
@@@@ -22778,7 +22773,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d35 1
a35 1
@@@@ -23647,13 +23642,13 @@@@ LIBS=$libs_keep
d52 1
a52 1
@@@@ -23713,7 +23708,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.4
log
@Update to zarafa-6.30.3.
ChangeLog available here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

(6.30.4 is out, but one thing at a time since this is a big enough update)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2009/07/31 09:55:56 ajacoutot Exp $
--- configure.orig	Fri Oct  9 22:08:24 2009
+++ configure	Tue Oct 20 23:41:36 2009
@@@@ -21643,12 +21643,7 @@@@ else
d15 3
a17 3
 # Check whether --enable-oss was given.
 if test "${enable_oss+set}" = set; then
@@@@ -22482,7 +22477,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d26 1
a26 1
@@@@ -22766,7 +22761,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d35 1
a35 1
@@@@ -23541,13 +23536,13 @@@@ LIBS=$libs_keep
d52 1
a52 1
@@@@ -23607,7 +23602,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.3
log
@Major update to zarafa-6.30.0.
Full ChangeLog available at
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
Now comes with caldav support.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2009/04/03 17:30:40 ajacoutot Exp $
--- configure.orig	Mon Jul 20 23:26:17 2009
+++ configure	Wed Jul 22 16:37:09 2009
@@@@ -21635,12 +21635,7 @@@@ else
d17 1
a17 1
@@@@ -22474,7 +22469,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d26 1
a26 1
@@@@ -22757,7 +22752,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d35 1
a35 1
@@@@ -23532,13 +23527,13 @@@@ LIBS=$libs_keep
d52 1
a52 1
@@@@ -23598,7 +23593,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.2
log
@- bugfix update to zarafa-6.20.4
@
text
@d1 5
a5 4
$OpenBSD: patch-configure,v 1.1.1.1 2009/02/16 09:44:37 ajacoutot Exp $
--- configure.orig	Thu Mar 26 14:35:40 2009
+++ configure	Fri Apr  3 19:36:33 2009
@@@@ -21636,7 +21636,7 @@@@ else
d8 1
a8 1
 if test "$want_release" = "yes"; then
d10 4
a13 2
+    CXXFLAGS="$CXXFLAGS -fno-strict-aliasing"
 fi
d16 2
a17 14
@@@@ -22188,9 +22188,9 @@@@ GSOAP_LIBS="-lz"
 
 # check user given vmime location
 
-# Check whether --with-vime-prefix was given.
-if test "${with_vime_prefix+set}" = set; then
-  withval=$with_vime_prefix; VMIME_PREFIX=${withval}
+# Check whether --with-vmime-prefix was given.
+if test "${with_vmime_prefix+set}" = set; then
+  withval=$with_vmime_prefix; VMIME_PREFIX=${withval}
 else
   VMIME_PREFIX=
 fi
@@@@ -22471,7 +22471,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d20 1
a20 1
 		VMIME_CFLAGS=$VMIME_PREFIX
d26 1
a26 1
@@@@ -22755,7 +22755,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d29 3
a31 3
   ICAL_CFLAGS=$ICAL_PREFIX
-    ICAL_LIBS="-lical -licalss -licalvcal"
+    ICAL_LIBS="${ZAFARA_LDFLAGS} -lical-zarafa -licalss-zarafa -licalvcal-zarafa"
d33 3
a35 3
   { { echo "$as_me:$LINENO: error: libical headers are not found" >&5
 echo "$as_me: error: libical headers are not found" >&2;}
@@@@ -23531,13 +23531,13 @@@@ LIBS=$libs_keep
d52 1
a52 1
@@@@ -23597,7 +23597,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Mon Jan 12 20:22:46 2009
+++ configure	Wed Jan 28 23:17:58 2009
@@@@ -20997,7 +20997,7 @@@@ else
d13 1
a13 1
@@@@ -21549,9 +21549,9 @@@@ GSOAP_LIBS="-lz"
d26 1
a26 1
@@@@ -21832,7 +21832,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d35 1
a35 1
@@@@ -22116,7 +22116,7 @@@@ if test `eval echo '${'$as_ac_Header'}'` = yes; then
d44 1
a44 1
@@@@ -22892,13 +22892,13 @@@@ LIBS=$libs_keep
d61 1
a61 1
@@@@ -22958,7 +22958,7 @@@@ if test $ac_cv_lib_pthread_pthread_create = yes; then
@


1.1.1.1
log
@Import zarafa-6.20.1 (+php5-mapi-6.20.1)

-main
Zarafa is a full-featured e-mail and groupware solution, focused
towards clients using the MAPI standard.  As an MS Exchange replacement,
the Zarafa suite provides the following features:
 * Integration with existing Unix mailserver
 * Native mobile phone support
 * MS Outlook "Look & Feel" webaccess
 * Stable MS Outlook sharing (100% MAPI)

This package provides the Open Source version of Zarafa.

-php
Messaging Application Programming Interface (MAPI) is a messaging
architecture and a Component Object Model based API for Microsoft
Windows. MAPI allows client programs to become (e-mail)
messaging-enabled, -aware, or -based by calling MAPI subsystem routines
that interface with certain messaging servers. While MAPI is designed to
be independent of the protocol, it is usually used with MAPI/RPC, the
proprietary protocol that Microsoft Outlook uses to communicate with
Microsoft Exchange.

These functions allow you to access a MAPI compliant email server.

"just do it" robert@@, ok jasper@@
@
text
@@
