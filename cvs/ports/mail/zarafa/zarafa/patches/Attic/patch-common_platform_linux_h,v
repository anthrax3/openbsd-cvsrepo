head	1.18;
access;
symbols
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.14.0.2
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.13.0.6
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.13.0.4
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.12.0.4
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.1.1.0.4
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20090216:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2016.04.01.18.08.10;	author robert;	state dead;
branches;
next	1.17;
commitid	YBIXgHFu7xINW8BP;

1.17
date	2015.11.02.11.06.34;	author robert;	state Exp;
branches;
next	1.16;
commitid	19wAgXlT9RhqpZjX;

1.16
date	2015.04.05.22.25.08;	author robert;	state Exp;
branches;
next	1.15;
commitid	j25w8UqbNvnTFexL;

1.15
date	2014.09.02.11.09.38;	author robert;	state Exp;
branches;
next	1.14;
commitid	BtGLGhiodpDgnVXA;

1.14
date	2014.04.07.13.46.06;	author robert;	state Exp;
branches;
next	1.13;

1.13
date	2012.08.30.14.28.22;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.03.13.16.05;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.12.11.08.20.21;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.17.08.34.06;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.06.30.02.46.48;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.06.06.20.10.21;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.04.22.10.06.18;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.03.21.11.15.20;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.10.20.22.34.26;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.31.09.55.56;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.18
log
@update to 7.2.2
@
text
@$OpenBSD: patch-common_platform_linux_h,v 1.17 2015/11/02 11:06:34 robert Exp $
--- common/platform.linux.h.orig	Wed Aug  5 17:30:48 2015
+++ common/platform.linux.h	Thu Aug 20 12:36:50 2015
@@@@ -57,7 +57,14 @@@@
 #include <dlfcn.h>
 #include <cstddef>
 #include <libgen.h>
+#if defined(__OpenBSD__)
+#include <sys/param.h>
+#ifndef MAX_PATH
+  #define MAX_PATH PATH_MAX
+#endif
+#else
 #include <byteswap.h>
+#endif
 #include <endian.h>
 #include <cerrno>
 #include <clocale>
@@@@ -97,6 +104,8 @@@@
 #define _snprintf snprintf
 #ifdef HAVE_VSNPRINTF_L
 #define _vsnprintf_l vsnprintf_l
+#elif defined __OpenBSD__
+#define _vsnprintf_l vsnprintf
 #else
 inline int _vsnprintf_l(char *str, size_t size, const char *format, locale_t locale, va_list ap) {
 	locale_t prev = uselocale(locale);
@@@@ -685,7 +694,11 @@@@ time_t GetProcessTime();
 
 #ifndef ntohll
 	#if __BYTE_ORDER == __LITTLE_ENDIAN
+#ifndef __OpenBSD__
 		#define ntohll(x) __bswap_64(x)
+#else
+		#define ntohll(x) __swap64(x)
+#endif // __OpenBSD__
 	#else
 		#define ntohll(x) (x)
 	#endif
@@@@ -693,14 +706,18 @@@@ time_t GetProcessTime();
 
 #ifndef htonll
 	#if __BYTE_ORDER == __LITTLE_ENDIAN
+#ifndef __OpenBSD__
 		#define htonll(x) __bswap_64(x)
+#else
+		#define htonll(x) __swap64(x)
+#endif // __OpenBSD__
 	#else
 		#define htonll(x) (x)
 	#endif
 #endif
 
 #define OutputDebugStringA(dstr) fprintf(stderr,"%s",dstr)
-#define GetCurrentThreadId() (int)pthread_self()
+#define GetCurrentThreadId() (intptr_t)pthread_self()
 #define GetTickCount() 0L
 
 #define TICKS_PER_SEC (sysconf(_SC_CLK_TCK))
@


1.17
log
@update to 7.2.1
@
text
@d1 1
a1 1
$OpenBSD: patch-common_platform_linux_h,v 1.16 2015/04/05 22:25:08 robert Exp $
@


1.16
log
@update to 7.2.0
@
text
@d1 4
a4 4
$OpenBSD: patch-common_platform_linux_h,v 1.15 2014/09/02 11:09:38 robert Exp $
--- common/platform.linux.h.orig	Thu Mar  5 16:54:04 2015
+++ common/platform.linux.h	Fri Apr  3 23:11:10 2015
@@@@ -58,7 +58,14 @@@@
d6 1
a6 1
 #include <stddef.h>
d17 3
a19 3
 #include <errno.h>
 #include <locale.h>
@@@@ -94,6 +101,8 @@@@
d28 1
a28 1
@@@@ -680,7 +689,11 @@@@ time_t GetProcessTime();
d40 1
a40 1
@@@@ -688,14 +701,18 @@@@ time_t GetProcessTime();
@


1.15
log
@update to 7.1.11
@
text
@d1 4
a4 4
$OpenBSD: patch-common_platform_linux_h,v 1.14 2014/04/07 13:46:06 robert Exp $
--- common/platform.linux.h.orig	Sun Aug 24 12:27:07 2014
+++ common/platform.linux.h	Mon Sep  1 20:54:38 2014
@@@@ -63,7 +63,14 @@@@
d19 1
a19 1
@@@@ -99,6 +106,8 @@@@
d28 1
a28 1
@@@@ -683,7 +692,11 @@@@ time_t GetProcessTime();
d40 1
a40 1
@@@@ -691,14 +704,18 @@@@ time_t GetProcessTime();
@


1.14
log
@update to 7.1.9
@
text
@d1 4
a4 4
$OpenBSD: patch-common_platform_linux_h,v 1.13 2012/08/30 14:28:22 ajacoutot Exp $
--- common/platform.linux.h.orig	Thu Jan 30 13:41:33 2014
+++ common/platform.linux.h	Mon Feb  3 11:25:37 2014
@@@@ -63,8 +63,16 @@@@
a8 1
+#include <sys/endian.h>
d15 1
a16 1
+#endif
d19 1
a19 2
 
@@@@ -99,6 +107,8 @@@@
d28 1
a28 1
@@@@ -683,7 +693,11 @@@@ time_t GetProcessTime();
d40 1
a40 1
@@@@ -691,14 +705,18 @@@@ time_t GetProcessTime();
@


1.13
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.12 2011/12/22 17:10:04 ajacoutot Exp $
--- common/platform.linux.h.orig	Wed Aug  8 17:14:57 2012
+++ common/platform.linux.h	Wed Aug 29 10:16:58 2012
d30 1
a30 1
@@@@ -676,7 +686,11 @@@@ time_t GetProcessTime();
d42 1
a42 1
@@@@ -684,14 +698,18 @@@@ time_t GetProcessTime();
@


1.12
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.11 2011/06/02 12:46:37 ajacoutot Exp $
--- common/platform.linux.h.orig	Thu Dec 22 01:02:34 2011
+++ common/platform.linux.h	Thu Dec 22 12:14:19 2011
d19 1
d21 10
a30 2
 #include <string>
@@@@ -663,7 +671,11 @@@@ time_t GetProcessTime();
d42 1
a42 1
@@@@ -671,14 +683,18 @@@@ time_t GetProcessTime();
@


1.11
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.10 2011/03/03 13:16:05 ajacoutot Exp $
--- common/platform.linux.h.orig	Wed Apr 20 19:51:45 2011
+++ common/platform.linux.h	Thu Jun  2 10:41:55 2011
d21 1
a21 1
@@@@ -662,7 +670,11 @@@@ time_t GetProcessTime();
d33 1
a33 1
@@@@ -670,14 +682,18 @@@@ time_t GetProcessTime();
@


1.10
log
@Update to zarafa-6.40.5.
Complete changelog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt

Several documentation and configuration tweaks.
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.9 2010/12/11 08:20:21 ajacoutot Exp $
--- common/platform.linux.h.orig	Mon Jan 24 16:55:03 2011
+++ common/platform.linux.h	Tue Jan 25 12:56:17 2011
d47 1
a47 1
 #define OutputDebugString(dstr) fprintf(stderr,"%s",dstr)
d49 1
a49 1
+#define GetCurrentThreadId() (long)pthread_self()
@


1.9
log
@Update to version 6.40.4.
Changelog available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.8 2010/11/17 08:34:06 ajacoutot Exp $
--- common/platform.linux.h.orig	Thu Dec  2 14:45:38 2010
+++ common/platform.linux.h	Fri Dec  3 18:09:32 2010
d21 1
a21 1
@@@@ -661,7 +669,11 @@@@ time_t GetProcessTime();
d33 1
a33 1
@@@@ -669,14 +681,18 @@@@ time_t GetProcessTime();
@


1.8
log
@Use default FD_SETSIZE.
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.7 2010/06/30 02:46:48 ajacoutot Exp $
--- common/platform.linux.h.orig	Wed Oct 20 16:16:23 2010
+++ common/platform.linux.h	Tue Nov 16 19:15:54 2010
d21 1
a21 1
@@@@ -659,7 +667,11 @@@@ time_t GetProcessTime();
d33 1
a33 1
@@@@ -667,14 +679,18 @@@@ time_t GetProcessTime();
@


1.7
log
@*MAJOR* version update to zarafa-6.40.0.
Read the complete changelog here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

Upgrade documentation is available at:
http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade

zarafa-libical has been removed, current version from ports works fine
for zarafa needs.

php5-mapi has been merged into zarafa-webaccess.
@
text
@d1 4
a4 4
$OpenBSD: patch-common_platform_linux_h,v 1.6 2010/06/06 20:10:21 espie Exp $
--- common/platform.linux.h.orig	Mon May 31 19:28:57 2010
+++ common/platform.linux.h	Tue Jun 15 16:26:32 2010
@@@@ -63,8 +63,15 @@@@
d10 1
d12 1
a12 1
+  #define MAX_PATH 1024
d21 1
a21 1
@@@@ -659,7 +666,11 @@@@ time_t GetProcessTime();
d33 1
a33 1
@@@@ -667,14 +678,18 @@@@ time_t GetProcessTime();
@


1.6
log
@fix on LP64 + gcc4
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.5 2010/04/22 10:06:18 ajacoutot Exp $
--- common/platform.linux.h.orig	Tue Apr 27 21:07:02 2010
+++ common/platform.linux.h	Sun Jun  6 21:25:25 2010
d19 25
a43 2
 #ifdef HAVE_UNISTD_H
@@@@ -669,7 +676,7 @@@@ time_t GetProcessTime();
@


1.5
log
@Update to zarafa-6.30.13.
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.4 2010/03/21 11:15:20 ajacoutot Exp $
--- common/platform.linux.h.orig	Wed Apr 14 13:39:51 2010
+++ common/platform.linux.h	Thu Apr 22 10:57:22 2010
d20 9
@


1.4
log
@Major update to zarafa-6.30.12.
Lots and lots of bugfixes...
@
text
@d1 3
a3 3
$OpenBSD: patch-common_platform_linux_h,v 1.3 2009/10/20 22:34:26 ajacoutot Exp $
--- common/platform.linux.h.orig	Tue Jan 26 17:34:49 2010
+++ common/platform.linux.h	Wed Feb  3 08:53:18 2010
d17 1
a19 1
   #include <unistd.h>
@


1.3
log
@Update to zarafa-6.30.3.
ChangeLog available here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

(6.30.4 is out, but one thing at a time since this is a big enough update)
@
text
@d1 4
a4 4
$OpenBSD: patch-common_platform_linux_h,v 1.2 2009/07/31 09:55:56 ajacoutot Exp $
--- common/platform.linux.h.orig	Fri Oct  9 22:34:37 2009
+++ common/platform.linux.h	Tue Oct 20 23:41:36 2009
@@@@ -61,8 +61,15 @@@@
@


1.2
log
@Major update to zarafa-6.30.0.
Full ChangeLog available at
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
Now comes with caldav support.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-common_platform_linux_h,v 1.1.1.1 2009/02/16 09:44:37 ajacoutot Exp $
--- common/platform.linux.h.orig	Wed Jul 22 15:45:35 2009
+++ common/platform.linux.h	Wed Jul 22 15:46:15 2009
@@@@ -49,8 +49,15 @@@@
@


1.1
log
@Initial revision
@
text
@d1 4
a4 5
$OpenBSD$
--- common/platform.linux.h.orig	Wed Dec 24 20:17:57 2008
+++ common/platform.linux.h	Fri Jan  9 15:09:32 2009
@@@@ -48,8 +48,15 @@@@
 #include <ctype.h>		/* 64bit int definition */
d7 1
@


1.1.1.1
log
@Import zarafa-6.20.1 (+php5-mapi-6.20.1)

-main
Zarafa is a full-featured e-mail and groupware solution, focused
towards clients using the MAPI standard.  As an MS Exchange replacement,
the Zarafa suite provides the following features:
 * Integration with existing Unix mailserver
 * Native mobile phone support
 * MS Outlook "Look & Feel" webaccess
 * Stable MS Outlook sharing (100% MAPI)

This package provides the Open Source version of Zarafa.

-php
Messaging Application Programming Interface (MAPI) is a messaging
architecture and a Component Object Model based API for Microsoft
Windows. MAPI allows client programs to become (e-mail)
messaging-enabled, -aware, or -based by calling MAPI subsystem routines
that interface with certain messaging servers. While MAPI is designed to
be independent of the protocol, it is usually used with MAPI/RPC, the
proprietary protocol that Microsoft Outlook uses to communicate with
Microsoft Exchange.

These functions allow you to access a MAPI compliant email server.

"just do it" robert@@, ok jasper@@
@
text
@@
