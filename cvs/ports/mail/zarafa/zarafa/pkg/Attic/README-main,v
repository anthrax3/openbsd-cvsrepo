head	1.26;
access;
symbols
	OPENBSD_6_1:1.25.0.2
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.24.0.4
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.24.0.2
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.23.0.6
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.22.0.8
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.22.0.6
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.22.0.4
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.22.0.2
	OPENBSD_5_3_BASE:1.22
	OPENBSD_5_2:1.20.0.2
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.12.0.2
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@# @;


1.26
date	2017.09.13.10.43.58;	author robert;	state dead;
branches;
next	1.25;
commitid	kFv2rkf5deA8Z0kS;

1.25
date	2016.08.12.08.09.05;	author robert;	state Exp;
branches;
next	1.24;
commitid	h1dsiXvKWTmkvlUk;

1.24
date	2015.11.02.11.06.34;	author robert;	state Exp;
branches;
next	1.23;
commitid	19wAgXlT9RhqpZjX;

1.23
date	2015.01.31.10.01.54;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	Z0IOI8H8M05YuTwa;

1.22
date	2012.08.30.14.28.22;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.08.24.08.29.27;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.06.18.10.37.28;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2012.06.02.06.18.06;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2012.04.24.15.20.52;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2012.04.24.15.10.32;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2012.02.27.19.01.34;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.11.06.47.52;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.09.13.59.23;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.07.14.09.45.13;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.07.14.08.54.32;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.02.22.33.35;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.06.04.06.59.00;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.06.02.13.41.39;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.04.22.07.29.44;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.03.21.09.27.18;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.03.11.08.44.44;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.03.13.16.05;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.01.15.23.53.35;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.11.06.08.46.05;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.26
log
@remove zarafa as it has been replaced with kopano
@
text
@$OpenBSD: README-main,v 1.25 2016/08/12 08:09:05 robert Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

*** Upgrading users: refer to zarafa documentation on the web to check
*** if any particular step is required after upgrading to a new version.

6.40 -> 7.0 upgrade
===================

See http://doc.zarafa.com/trunk/Release_Notes/en-US/html/_upgrading_to_zcp_7_0.html

The zarafa7-upgrade script is available at:
    ${TRUEPREFIX}/share/doc/zarafa/zarafa7-upgrade
Note that this script requires the py-mysql package.

Post-install/update instructions for Zarafa
===========================================

By default the server is configured to accept SOAP connections on port
236. If you wish to connect Outlook clients on port 80, please setup
your web server to proxy HTTP requests with URI=/zarafa to
http://localhost:236.

It is advised to tune the MySQL installation according to:
    http://doc.zarafa.com/trunk/Administrator_Manual/en-US/html/_memory_usage_setup.html
    http://zarafa.com/wiki/index.php/MySQL_tuning
(especially for max_allowed_packet)

Before Starting zarafa-server for the first time
------------------------------------------------
A MySQL datatabase access needs to be configured in
    ${SYSCONFDIR}/zarafa/server.cfg

After zarafa-server was started for the first time
--------------------------------------------------
Creating the public store.
    # ${TRUEPREFIX}/sbin/zarafa-admin -s

Adding an admin user -- see zarafa-admin(1).
    # ${TRUEPREFIX}/sbin/zarafa-admin -c zadmin -p secret \
        -e zarafa.admin@@domain.tld -f "John Doe" -a 2

Mail delivery agent configuration
=================================

See the following URL for other MTA integration:
    http://www.zarafa.com/wiki/index.php?title=MTA_integration&oldid=2487

Alternatively add the following .forward file under the user(s) home
directory that will use Zarafa:
"|${TRUEPREFIX}/sbin/zarafa-dagent <username>"

You can automate this step by copying
    ${TRUEPREFIX}/share/examples/zarafa/createuser.dotforward
to
    ${SYSCONFDIR}/zarafa/userscripts/createuser.d/
The .forward will be automatically generated when a new user is added to
Zarafa.

Zarafa webaccess
================

Zarafa Webaccess is obsolete and has been removed. Please
use zarafa-webapp.

Documentation and help
======================

Each zarafa-* command has its corresponding manpage.

Some documentation is also available at:
    http://www.zarafa.com/wiki/index.php/Main_Page
    http://doc.zarafa.com/trunk/Administrator_Manual/en-US/html/
@


1.25
log
@update to 7.2.4.29
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.24 2015/11/02 11:06:34 robert Exp $
@


1.24
log
@update to 7.2.1
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.23 2015/01/31 10:01:54 ajacoutot Exp $
d8 1
a8 1
*** if any particular step is required after upgrading to a new version. 
d55 1
a55 1
 
d66 2
a67 29
Zarafa webaccess is installed under
    ${INSTDIR}

Configuration is done in the file
    ${INSTDIR}/config.php

With Apache, AllowOverride settings are required on the ${INSTDIR}
directory. You can configure this as follows:
    # ln -sf ${PREFIX-web}/conf/modules.sample/zarafa.conf /var/www/conf/modules

If you want to debug the webaccess, copy the following file
   ${INSTDIR}/debug.php.disabled
to
   ${INSTDIR}/debug.php
The debugging output will then be available under:
   ${INSTDIR}/debug.txt

The Zarafa webaccess will be accessible from
    http://<hostname>/webaccess/

HTTP server locale
------------------
LANG needs to be set to an UTF-8 compliant locale on the Web server.
When using httpd(8), create a login(1) class under /etc/login.conf(5)
called after the Apache rc.d(8) script, i.e. "httpd":

httpd:\
	:setenv=LANG=en_US.UTF-8:\
	:tc=daemon:
@


1.23
log
@Dropping sendmail(8) @@sample files is not enough; documentation needed to
be amended.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.22 2012/08/30 14:28:22 ajacoutot Exp $
d40 1
a40 1
    # ${TRUEPREFIX}/bin/zarafa-admin -s
d43 1
a43 1
    # ${TRUEPREFIX}/bin/zarafa-admin -c zadmin -p secret \
d54 1
a54 1
"|${TRUEPREFIX}/bin/zarafa-dagent <username>"
@


1.22
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.21 2012/08/24 08:29:27 ajacoutot Exp $
d12 1
d21 1
d48 1
a48 2
The easiest way to use zarafa-dagent system-wide under a stock OpenBSD
sendmail(8) installation is to use procmail(1).
d50 1
a50 18
    http://www.zarafa.com/faq/mta/mta

Anyway, here are the 3 ways of integrating Zarafa with sendmail(8).

* Using procmail.

First, install the procmail package and configure ${SYSCONFDIR}/procmailrc
the following way:

# optional: deliver mail tagged as SPAM into the Junk mail folder
:0w
* ^X-Spam-Status: Yes
| ${TRUEPREFIX}/bin/zarafa-dagent -j $LOGNAME
EXITCODE=$?

:0w
| ${TRUEPREFIX}/bin/zarafa-dagent $LOGNAME
EXITCODE=$?
d52 2
a53 16
Next, you need to add the following line to your sendmail.mc file then
restart sendmail(8):
    FEATURE(`local_procmail')dnl

* Configuring sendmail to use the zarafa-dagent directly.

To enable the Zarafa dagent delivery from localhost, add the following
lines to your sendmail.mc and restart sendmail(8):
    FEATURE(`local_zarafa')dnl
To enable the Zarafa dagent for all other deliveries, add the following:
    MAILER(`zarafa')dnl

* Using a .forward file.

Add the following .forward file under the user(s) home directory that
will use Zarafa:
d55 1
a55 1

d65 1
d98 1
d101 1
a101 1
Some documentation is also available on the Internet:
a102 1
    http://www.zarafa.com/content/documentation
@


1.21
log
@No need to LD_PRELOAD libpthread anymore now that Apache is linked with
pthreads(3).

discussed with sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.20 2012/06/18 10:37:28 ajacoutot Exp $
a123 8

Clients (Outlook) auto-update
=============================

When using the auto-update feature for Microsoft Outlook (TM) clients,
it is advised to clean-up old update logs by running the following
script from cron(8) once per day:
    ${TRUEPREFIX}/share/examples/zarafa/zarafa-client-update
@


1.20
log
@Use MODPHP_DO_SAMPLE.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.19 2012/06/02 06:18:06 ajacoutot Exp $
d115 5
a119 9
The PHP mapi module and OpenBSD Apache
--------------------------------------
When using the OpenBSD Apache server, the runtime loader will need to
pre-load the pthread shared library. While the php binary is linked with
-pthread, httpd is not and the PHP mapi module needs the
pthread_mutex_init(3) function. LANG will also need to be set to an
UTF-8 compliant locale.
To do so, create a login(1) class under /etc/login.conf(5) called after
the Apache rc.d(8) script, i.e. "httpd":
d122 1
a122 2
	:setenv=LANG=en_US.UTF-8\
	,LD_PRELOAD=/usr/lib/libpthread.so:\
@


1.19
log
@Tweak README to allow easier copy/paste.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.18 2012/04/24 15:20:52 ajacoutot Exp $
a110 5

You need to enable the PHP mapi module by creating a symbolic link from
${SYSCONFDIR}/php-${MODPHP_VERSION}.sample/${MODULE_NAME}.ini to ${SYSCONFDIR}/php-${MODPHP_VERSION}/${MODULE_NAME}.ini:

    # ln -fs ${SYSCONFDIR}/php-${MODPHP_VERSION}.sample/${MODULE_NAME}.ini ${SYSCONFDIR}/php-${MODPHP_VERSION}/${MODULE_NAME}.ini
@


1.18
log
@Typos.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.17 2012/04/24 15:10:32 ajacoutot Exp $
d103 1
a103 2
    # ln -s ${PREFIX-web}/conf/modules.sample/zarafa.conf \
        /var/www/conf/modules
d115 1
a115 2
    # ln -fs ${SYSCONFDIR}/php-${MODPHP_VERSION}.sample/${MODULE_NAME}.ini \
        ${SYSCONFDIR}/php-${MODPHP_VERSION}/${MODULE_NAME}.ini
@


1.17
log
@Config tweak.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.16 2012/02/27 19:01:34 ajacoutot Exp $
d118 3
@


1.16
log
@Make this work with rthreads.
Fix store creation.
Add a comment for the procmail sample in the README.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.15 2011/12/22 17:10:04 ajacoutot Exp $
d98 2
a99 2
You need to edit the config.php file installed under
${INSTDIR} for regular web client access.
@


1.15
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.14 2011/09/11 06:47:52 ajacoutot Exp $
d58 1
@


1.14
log
@Tweak procmail example to deal with junk.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.13 2011/09/09 13:59:23 ajacoutot Exp $
d132 8
@


1.13
log
@Fix mapi.ini path in UNMESSAGE and tweak README.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.12 2011/07/14 09:45:13 ajacoutot Exp $
d57 7
a63 2
 
:0 w
@


1.12
log
@Fix documentation after the move to lang/php.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.11 2011/07/14 08:54:32 ajacoutot Exp $
d108 1
a108 2
${SYSCONFDIR}/php-${MODPHP_VERSION}.sample/${MODULE_NAME}.ini to
${SYSCONFDIR}/php-${MODPHP_VERSION}/${MODULE_NAME}.ini:
@


1.11
log
@Use login.conf(5) to set env vars instead of putting stuffs in rc.local.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.10 2011/07/02 22:33:35 sthen Exp $
d108 2
a109 2
${PREFIX-web}/conf/php5.sample/${MODULE_NAME}.ini to
${PREFIX-web}/conf/php5/${MODULE_NAME}.ini:
d111 2
a112 2
    # ln -fs ${PREFIX-web}/conf/php5.sample/${MODULE_NAME}.ini \
        ${PREFIX-web}/conf/php5/${MODULE_NAME}.ini
@


1.10
log
@fix URL in readme, ok aja@@
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.9 2011/06/04 06:59:00 ajacoutot Exp $
d118 10
a127 9
-pthread, httpd is not and the PHP mapi module needs
the pthread_mutex_init(3) function.
To do so, we need to start httpd with LD_PRELOAD set in /etc/rc.local
(do not set httpd_flags in rc.conf(8)).
e.g:

rm -f /var/www/logs/{ssl_mutex,httpd.lock,accept.lock}.*
echo 'starting httpd'
LANG=en_US.UTF-8 LD_PRELOAD=/usr/lib/libpthread.so /usr/sbin/httpd -DSSL
@


1.9
log
@Fix/add paths to online documentation.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.8 2011/06/02 13:41:39 ajacoutot Exp $
d49 1
a49 1
    http://www.zarafa.com/?q=en/faq/61
@


1.8
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.7 2011/06/02 12:46:37 ajacoutot Exp $
d26 1
d31 1
a31 1
================================================
d36 1
a36 1
==================================================
d115 1
a115 1
======================================
d135 1
a135 1
    http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html
@


1.7
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.6 2011/04/22 07:29:44 ajacoutot Exp $
d3 3
a5 2
Running zarafa on OpenBSD
=========================
d11 1
a11 2
-------------------

a17 1

d19 1
a19 2
-------------------------------------------

a28 1

d30 2
a31 3
------------------------------------------------

* a MySQL datatabase access needs to be configured in
a33 1

d35 2
a36 3
--------------------------------------------------

* Creating the public store.
d39 1
a39 1
* Adding an admin user -- see zarafa-admin(1).
a42 1

d44 1
a44 2
---------------------------------

a85 1

d87 1
a87 2
----------------

a112 1

d114 1
a114 2
--------------------------------------

a126 1

d128 1
a128 2
----------------------

@


1.6
log
@Small tweak.
@
text
@d1 4
a4 1
$OpenBSD: README-main,v 1.5 2011/03/21 09:27:18 ajacoutot Exp $
d8 10
a17 1
    http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade
d20 1
a20 1
===========================================
d137 1
a137 1
LD_PRELOAD=/usr/lib/libpthread.so /usr/sbin/httpd -DSSL
@


1.5
log
@This step is not needed.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.4 2011/03/11 08:44:44 ajacoutot Exp $
d124 1
a124 1
echo -n ' httpd'
@


1.4
log
@SECURITY update to zarafa-6.40.6.
As usual, changelog is available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.3 2011/03/03 13:16:05 ajacoutot Exp $
a87 4

You should point the followings to the DocumentRoot of your web-server:
    # ln -s ../zarafa-webaccess ${PREFIX-web}/htdocs/webaccess
(make sure you use a relative symlink since Apache is chrooted)
@


1.3
log
@Update to zarafa-6.40.5.
Complete changelog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt

Several documentation and configuration tweaks.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.2 2011/01/15 23:53:35 ajacoutot Exp $
d108 2
a109 2
You can enable the PHP mapi module by creating a symbolic
link from ${PREFIX-web}/conf/php5.sample/${MODULE_NAME}.ini to
@


1.2
log
@Install a zarafa.conf file for apache.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.1 2010/11/06 08:46:05 ajacoutot Exp $
d34 2
a35 1
    # ${TRUEPREFIX}/bin/zarafa-admin -c zadmin -p secret -e zarafa.admin@@domain.tld -f "John Doe" -a 2
d99 1
a99 1
      ${PREFIX-web}/conf/modules
d113 1
a113 1
      ${PREFIX-web}/conf/php5/${MODULE_NAME}.ini
@


1.1
log
@Move to pkg-readmes.
@
text
@d1 1
a1 1
$OpenBSD: README.OpenBSD,v 1.15 2010/10/28 14:46:56 ajacoutot Exp $
d89 1
a89 1
   # ln -s ../zarafa-webaccess ${PREFIX-web}/htdocs/webaccess
d95 4
a98 8
With Apache, this directory (or the webaccess symlink, if used) should
be granted these permissions:
    AllowOverride Options

e.g.
<Directory ${PREFIX-web}/htdocs/webaccess>
	AllowOverride Options
</Directory>
d111 2
a112 2
ln -fs ${PREFIX-web}/conf/php5.sample/${MODULE_NAME}.ini \
    ${PREFIX-web}/conf/php5/${MODULE_NAME}.ini
@

