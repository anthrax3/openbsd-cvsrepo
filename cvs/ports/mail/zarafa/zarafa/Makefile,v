head	1.202;
access;
symbols
	OPENBSD_6_0:1.198.0.2
	OPENBSD_6_0_BASE:1.198
	OPENBSD_5_9:1.195.0.2
	OPENBSD_5_9_BASE:1.195
	OPENBSD_5_8:1.184.0.4
	OPENBSD_5_8_BASE:1.184
	OPENBSD_5_7:1.181.0.2
	OPENBSD_5_7_BASE:1.181
	OPENBSD_5_6:1.166.0.2
	OPENBSD_5_6_BASE:1.166
	OPENBSD_5_5:1.159.0.2
	OPENBSD_5_5_BASE:1.159
	OPENBSD_5_4:1.157.0.2
	OPENBSD_5_4_BASE:1.157
	OPENBSD_5_3:1.145.0.2
	OPENBSD_5_3_BASE:1.145
	OPENBSD_5_2:1.132.0.2
	OPENBSD_5_2_BASE:1.132
	OPENBSD_5_1_BASE:1.114
	OPENBSD_5_1:1.114.0.2
	OPENBSD_5_0:1.97.0.2
	OPENBSD_5_0_BASE:1.97
	OPENBSD_4_9:1.64.0.2
	OPENBSD_4_9_BASE:1.64
	OPENBSD_4_8:1.42.0.2
	OPENBSD_4_8_BASE:1.42
	OPENBSD_4_7:1.32.0.2
	OPENBSD_4_7_BASE:1.32
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.1.1.1.0.2
	OPENBSD_4_5_BASE:1.1.1.1
	ajacoutot_20090216:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.202
date	2017.02.18.17.33.51;	author ajacoutot;	state Exp;
branches;
next	1.201;
commitid	kjw4RQ4AAUYktD89;

1.201
date	2017.02.18.17.32.37;	author ajacoutot;	state Exp;
branches;
next	1.200;
commitid	bw6Y0vDo3oixdVWL;

1.200
date	2016.09.04.14.52.38;	author robert;	state Exp;
branches;
next	1.199;
commitid	052GCoZR7Wemq90I;

1.199
date	2016.08.12.08.09.05;	author robert;	state Exp;
branches;
next	1.198;
commitid	h1dsiXvKWTmkvlUk;

1.198
date	2016.04.01.18.30.48;	author robert;	state Exp;
branches;
next	1.197;
commitid	Lfk9PGp0OwIP5wel;

1.197
date	2016.04.01.18.08.10;	author robert;	state Exp;
branches;
next	1.196;
commitid	YBIXgHFu7xINW8BP;

1.196
date	2016.03.11.20.28.27;	author naddy;	state Exp;
branches;
next	1.195;
commitid	UYLP8TE6V7RS2GhJ;

1.195
date	2016.02.01.21.55.39;	author sthen;	state Exp;
branches;
next	1.194;
commitid	2J5vYXDnKDkPvPP4;

1.194
date	2016.01.02.16.16.00;	author robert;	state Exp;
branches;
next	1.193;
commitid	dRA3Y9EswgTqN3vx;

1.193
date	2016.01.02.15.29.12;	author robert;	state Exp;
branches;
next	1.192;
commitid	krAaHpU6FZq7wmOY;

1.192
date	2016.01.02.13.57.12;	author robert;	state Exp;
branches;
next	1.191;
commitid	ctm5qtmR0fBHTZsd;

1.191
date	2015.12.30.10.01.26;	author ajacoutot;	state Exp;
branches;
next	1.190;
commitid	70nO8w9Ckt7hbcu6;

1.190
date	2015.11.29.15.50.20;	author ajacoutot;	state Exp;
branches;
next	1.189;
commitid	R4zDyQEPMusoKaj3;

1.189
date	2015.11.08.07.52.53;	author ajacoutot;	state Exp;
branches;
next	1.188;
commitid	iojg8ymWC5EjahqP;

1.188
date	2015.11.02.11.06.34;	author robert;	state Exp;
branches;
next	1.187;
commitid	19wAgXlT9RhqpZjX;

1.187
date	2015.09.28.19.05.24;	author robert;	state Exp;
branches;
next	1.186;
commitid	0yNaOJnmdxPQsDK2;

1.186
date	2015.09.22.07.06.07;	author jasper;	state Exp;
branches;
next	1.185;
commitid	57Cmmftja6OQznb8;

1.185
date	2015.08.21.19.17.11;	author sthen;	state Exp;
branches;
next	1.184;
commitid	8EJcWdVX4S7jN0H9;

1.184
date	2015.06.05.06.00.21;	author robert;	state Exp;
branches
	1.184.4.1;
next	1.183;
commitid	PS9YXjRm9KQkIZjT;

1.183
date	2015.04.06.09.01.45;	author robert;	state Exp;
branches;
next	1.182;
commitid	GqIsCsMMlkE84i91;

1.182
date	2015.04.05.22.25.08;	author robert;	state Exp;
branches;
next	1.181;
commitid	j25w8UqbNvnTFexL;

1.181
date	2015.02.20.14.44.42;	author robert;	state Exp;
branches
	1.181.2.1;
next	1.180;
commitid	zzDhq4ncH2gfrS8T;

1.180
date	2015.02.17.22.08.36;	author sthen;	state Exp;
branches;
next	1.179;
commitid	xaIHtCntkggL7CxN;

1.179
date	2015.02.16.22.57.09;	author naddy;	state Exp;
branches;
next	1.178;
commitid	0dx3c9ckf7dE4tx1;

1.178
date	2015.01.31.10.01.54;	author ajacoutot;	state Exp;
branches;
next	1.177;
commitid	Z0IOI8H8M05YuTwa;

1.177
date	2015.01.30.20.38.40;	author zhuk;	state Exp;
branches;
next	1.176;
commitid	Jkmxqu9xuxnwUyQJ;

1.176
date	2015.01.22.13.15.23;	author sthen;	state Exp;
branches;
next	1.175;
commitid	gVuvjqRX0Dybzkiz;

1.175
date	2014.12.09.17.13.50;	author robert;	state Exp;
branches;
next	1.174;
commitid	oQUmyxrCEcAUVid4;

1.174
date	2014.12.08.10.57.08;	author ajacoutot;	state Exp;
branches;
next	1.173;
commitid	pz71RdO0gxd0iylf;

1.173
date	2014.11.06.17.13.39;	author sthen;	state Exp;
branches;
next	1.172;
commitid	ig1O4RkSPXzTZYwZ;

1.172
date	2014.10.13.11.02.33;	author robert;	state Exp;
branches;
next	1.171;
commitid	ePVR8t4izr4AjllQ;

1.171
date	2014.09.18.16.12.39;	author robert;	state Exp;
branches;
next	1.170;
commitid	bZH7ZR65j0w39ZPz;

1.170
date	2014.09.15.15.40.13;	author robert;	state Exp;
branches;
next	1.169;
commitid	WxuFh1V4vsCI5Dfq;

1.169
date	2014.09.13.18.09.21;	author brad;	state Exp;
branches;
next	1.168;
commitid	PpbRjVZdAmlrmi8q;

1.168
date	2014.09.04.20.30.45;	author robert;	state Exp;
branches;
next	1.167;
commitid	KXp2m2D6M5cPYXQN;

1.167
date	2014.09.02.11.09.38;	author robert;	state Exp;
branches;
next	1.166;
commitid	BtGLGhiodpDgnVXA;

1.166
date	2014.07.03.06.14.40;	author robert;	state Exp;
branches
	1.166.2.1;
next	1.165;
commitid	JoccqcNB1M1J0kmz;

1.165
date	2014.05.30.13.20.13;	author sthen;	state Exp;
branches;
next	1.164;

1.164
date	2014.04.21.18.43.10;	author ajacoutot;	state Exp;
branches;
next	1.163;

1.163
date	2014.04.07.13.46.06;	author robert;	state Exp;
branches;
next	1.162;

1.162
date	2014.03.23.18.33.04;	author ajacoutot;	state Exp;
branches;
next	1.161;

1.161
date	2014.03.23.18.17.34;	author kili;	state Exp;
branches;
next	1.160;

1.160
date	2014.03.18.09.26.16;	author ajacoutot;	state Exp;
branches;
next	1.159;

1.159
date	2013.11.01.11.20.19;	author robert;	state Exp;
branches
	1.159.2.1;
next	1.158;

1.158
date	2013.08.12.04.11.20;	author robert;	state Exp;
branches;
next	1.157;

1.157
date	2013.07.05.09.34.35;	author jasper;	state Exp;
branches;
next	1.156;

1.156
date	2013.06.26.17.28.57;	author naddy;	state Exp;
branches;
next	1.155;

1.155
date	2013.06.21.22.42.13;	author sthen;	state Exp;
branches;
next	1.154;

1.154
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.153;

1.153
date	2013.06.18.11.58.17;	author ajacoutot;	state Exp;
branches;
next	1.152;

1.152
date	2013.06.17.20.54.06;	author ajacoutot;	state Exp;
branches;
next	1.151;

1.151
date	2013.06.17.19.30.44;	author ajacoutot;	state Exp;
branches;
next	1.150;

1.150
date	2013.06.12.20.36.33;	author brad;	state Exp;
branches;
next	1.149;

1.149
date	2013.05.25.00.33.10;	author brad;	state Exp;
branches;
next	1.148;

1.148
date	2013.05.03.18.43.26;	author sthen;	state Exp;
branches;
next	1.147;

1.147
date	2013.03.31.13.01.19;	author robert;	state Exp;
branches;
next	1.146;

1.146
date	2013.03.21.08.46.32;	author ajacoutot;	state Exp;
branches;
next	1.145;

1.145
date	2013.02.13.08.02.37;	author robert;	state Exp;
branches;
next	1.144;

1.144
date	2013.02.04.07.14.20;	author ajacoutot;	state Exp;
branches;
next	1.143;

1.143
date	2012.11.20.13.11.34;	author robert;	state Exp;
branches;
next	1.142;

1.142
date	2012.10.28.21.51.08;	author robert;	state Exp;
branches;
next	1.141;

1.141
date	2012.10.15.20.09.26;	author robert;	state Exp;
branches;
next	1.140;

1.140
date	2012.10.08.10.20.32;	author robert;	state Exp;
branches;
next	1.139;

1.139
date	2012.09.05.08.07.24;	author ajacoutot;	state Exp;
branches;
next	1.138;

1.138
date	2012.08.30.18.42.26;	author ajacoutot;	state Exp;
branches;
next	1.137;

1.137
date	2012.08.30.14.28.22;	author ajacoutot;	state Exp;
branches;
next	1.136;

1.136
date	2012.08.25.10.17.27;	author ajacoutot;	state Exp;
branches;
next	1.135;

1.135
date	2012.08.24.08.29.27;	author ajacoutot;	state Exp;
branches;
next	1.134;

1.134
date	2012.08.19.15.50.25;	author ajacoutot;	state Exp;
branches;
next	1.133;

1.133
date	2012.08.06.17.48.35;	author ajacoutot;	state Exp;
branches;
next	1.132;

1.132
date	2012.07.09.15.27.30;	author ajacoutot;	state Exp;
branches;
next	1.131;

1.131
date	2012.07.06.16.25.56;	author ajacoutot;	state Exp;
branches;
next	1.130;

1.130
date	2012.07.04.13.00.46;	author ajacoutot;	state Exp;
branches;
next	1.129;

1.129
date	2012.06.20.13.45.36;	author ajacoutot;	state Exp;
branches;
next	1.128;

1.128
date	2012.06.19.10.25.05;	author ajacoutot;	state Exp;
branches;
next	1.127;

1.127
date	2012.06.18.10.37.28;	author ajacoutot;	state Exp;
branches;
next	1.126;

1.126
date	2012.06.14.07.34.25;	author ajacoutot;	state Exp;
branches;
next	1.125;

1.125
date	2012.06.02.06.18.06;	author ajacoutot;	state Exp;
branches;
next	1.124;

1.124
date	2012.05.22.07.51.08;	author ajacoutot;	state Exp;
branches;
next	1.123;

1.123
date	2012.05.05.16.56.17;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2012.04.28.10.52.08;	author ajacoutot;	state Exp;
branches;
next	1.121;

1.121
date	2012.04.26.11.28.09;	author ajacoutot;	state Exp;
branches;
next	1.120;

1.120
date	2012.04.24.15.20.52;	author ajacoutot;	state Exp;
branches;
next	1.119;

1.119
date	2012.04.24.15.10.32;	author ajacoutot;	state Exp;
branches;
next	1.118;

1.118
date	2012.04.22.13.44.09;	author ajacoutot;	state Exp;
branches;
next	1.117;

1.117
date	2012.03.15.17.04.31;	author ajacoutot;	state Exp;
branches;
next	1.116;

1.116
date	2012.02.27.19.01.34;	author ajacoutot;	state Exp;
branches;
next	1.115;

1.115
date	2012.02.16.22.18.36;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2012.01.12.14.17.23;	author ajacoutot;	state Exp;
branches;
next	1.113;

1.113
date	2012.01.05.11.08.44;	author ajacoutot;	state Exp;
branches;
next	1.112;

1.112
date	2011.12.22.17.10.04;	author ajacoutot;	state Exp;
branches;
next	1.111;

1.111
date	2011.11.23.13.23.33;	author ajacoutot;	state Exp;
branches;
next	1.110;

1.110
date	2011.11.17.15.14.37;	author ajacoutot;	state Exp;
branches;
next	1.109;

1.109
date	2011.11.16.15.56.37;	author robert;	state Exp;
branches;
next	1.108;

1.108
date	2011.10.18.07.00.10;	author ajacoutot;	state Exp;
branches;
next	1.107;

1.107
date	2011.09.30.05.33.33;	author ajacoutot;	state Exp;
branches;
next	1.106;

1.106
date	2011.09.29.17.38.43;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2011.09.29.17.12.11;	author ajacoutot;	state Exp;
branches;
next	1.104;

1.104
date	2011.09.16.10.31.22;	author espie;	state Exp;
branches;
next	1.103;

1.103
date	2011.09.11.06.47.52;	author ajacoutot;	state Exp;
branches;
next	1.102;

1.102
date	2011.09.09.14.31.40;	author ajacoutot;	state Exp;
branches;
next	1.101;

1.101
date	2011.09.09.13.59.23;	author ajacoutot;	state Exp;
branches;
next	1.100;

1.100
date	2011.09.06.09.07.53;	author ajacoutot;	state Exp;
branches;
next	1.99;

1.99
date	2011.09.01.15.39.53;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2011.08.16.15.01.17;	author ajacoutot;	state Exp;
branches;
next	1.97;

1.97
date	2011.07.14.09.45.13;	author ajacoutot;	state Exp;
branches;
next	1.96;

1.96
date	2011.07.14.08.54.32;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2011.07.08.21.45.05;	author robert;	state Exp;
branches;
next	1.94;

1.94
date	2011.07.08.02.14.59;	author ajacoutot;	state Exp;
branches;
next	1.93;

1.93
date	2011.07.02.22.33.35;	author sthen;	state Exp;
branches;
next	1.92;

1.92
date	2011.07.01.23.23.02;	author robert;	state Exp;
branches;
next	1.91;

1.91
date	2011.06.27.14.31.36;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2011.06.27.06.23.39;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2011.06.10.15.55.00;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2011.06.08.17.50.10;	author jasper;	state Exp;
branches;
next	1.87;

1.87
date	2011.06.06.07.47.05;	author rpointel;	state Exp;
branches;
next	1.86;

1.86
date	2011.06.04.06.59.00;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2011.06.03.15.52.12;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2011.06.03.10.30.19;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2011.06.03.08.26.57;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2011.06.02.13.41.39;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2011.06.02.12.46.37;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2011.05.19.17.18.18;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2011.04.22.07.29.44;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2011.04.14.15.55.19;	author jasper;	state Exp;
branches;
next	1.77;

1.77
date	2011.04.04.14.42.51;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2011.04.04.08.01.04;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2011.04.02.21.10.42;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2011.04.02.16.36.45;	author robert;	state Exp;
branches;
next	1.73;

1.73
date	2011.04.02.15.09.52;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2011.03.29.18.00.03;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2011.03.24.06.43.44;	author landry;	state Exp;
branches;
next	1.70;

1.70
date	2011.03.21.15.47.05;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2011.03.21.09.27.18;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2011.03.11.09.09.01;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2011.03.11.08.44.44;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2011.03.08.13.37.11;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2011.03.03.13.16.05;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.01.15.23.53.35;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2011.01.15.22.37.28;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2011.01.12.08.07.29;	author pea;	state Exp;
branches;
next	1.61;

1.61
date	2011.01.11.12.17.26;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2011.01.07.10.36.35;	author pea;	state Exp;
branches;
next	1.59;

1.59
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2010.12.24.09.07.38;	author jasper;	state Exp;
branches;
next	1.56;

1.56
date	2010.12.11.08.20.21;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2010.11.19.07.23.10;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2010.11.17.14.00.04;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.17.08.34.06;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2010.11.06.08.46.05;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2010.11.03.11.57.16;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2010.10.29.12.54.44;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2010.10.28.20.46.02;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2010.10.28.14.46.56;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2010.10.27.18.26.16;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2010.10.18.19.59.20;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2010.08.31.17.57.21;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2010.08.22.10.13.26;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2010.07.13.07.31.00;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2010.07.09.17.30.16;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2010.07.06.06.38.32;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2010.06.30.06.28.25;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2010.06.30.02.46.48;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.06.03.14.01.57;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2010.05.21.13.34.43;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.04.28.15.22.17;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2010.04.22.10.06.18;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2010.03.21.11.15.20;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.01.12.15.59.34;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.01.09.14.03.25;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2009.12.16.18.39.11;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2009.11.21.12.09.29;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2009.11.18.13.55.39;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2009.11.12.16.44.59;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2009.11.12.13.20.44;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2009.10.21.09.59.54;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2009.10.20.22.34.26;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2009.10.07.17.05.08;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.09.27.18.07.40;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.09.27.14.00.50;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.09.27.13.57.30;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2009.09.24.19.37.51;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.09.18.14.21.45;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2009.09.18.13.49.55;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.09.11.16.33.52;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.08.27.20.02.04;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.20.13.33.06;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.07.31.09.55.56;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.06.19.12.47.59;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.06.10.09.46.00;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.06.09.18.22.37;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.05.19.15.21.47;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.05.18.21.13.29;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.28.10.59.51;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.27.08.43.04;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.04.22.11.43.53;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.03.17.30.40;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.19.09.33.52;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.05.08.01.26;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.02.16.09.44.37;	author ajacoutot;	state Exp;
branches;
next	;

1.159.2.1
date	2014.12.09.17.28.01;	author robert;	state Exp;
branches;
next	;
commitid	yYqZS10XxNndFjb3;

1.166.2.1
date	2014.12.09.17.27.46;	author robert;	state Exp;
branches;
next	;
commitid	Du8xktjIMB8wxPcl;

1.181.2.1
date	2015.09.22.07.24.31;	author jasper;	state Exp;
branches;
next	;
commitid	VnwdPBTnWoQ0yiWl;

1.184.4.1
date	2015.09.22.07.06.54;	author jasper;	state Exp;
branches;
next	;
commitid	2wVieDmQx1PMV0Zl;


desc
@@


1.202
log
@Missed bump.
@
text
@# $OpenBSD: Makefile,v 1.201 2017/02/18 17:32:37 ajacoutot Exp $

COMMENT-main=	MS Exchange groupware suite replacement
COMMENT-mapi=	zarafa MAPI extensions for PHP

PKGNAME=	zarafa-${V}
PKGNAME-main=	zarafa-${V}
PKGNAME-mapi=	zarafa-mapi-${V}
REVISION-main=	1
REVISION-mapi=	0

CATEGORIES=	mail www productivity

EXTRACT_SUFX =	.tar.xz

SHARED_LIBS +=  freebusy             2.0 # .0.0
SHARED_LIBS +=  mapi                 2.0 # .0.0
SHARED_LIBS +=  zarafasync           2.0 # .0.0
SHARED_LIBS +=  zarafacontacts       0.0 # .0.0
SHARED_LIBS +=  icalmapi             2.0 # .1.0
SHARED_LIBS +=  inetmapi             2.0 # .1.0
SHARED_LIBS +=  zarafa-archiver-core 0.0 # 0.0
SHARED_LIBS +=  zarafa-archiver      0.0 # 0.0
SHARED_LIBS +=  zarafa_server        0.0 # 0.0
SHARED_LIBS +=  zarafa_soapclient    0.0 # 0.0
SHARED_LIBS +=  zarafa_soapserver    0.0 # 0.0
SHARED_LIBS +=  zcp_common_mapi      0.0 # 0.0
SHARED_LIBS +=  zcp_common_service   0.0 # 0.0
SHARED_LIBS +=  zcp_common_ssl       0.0 # 0.0
SHARED_LIBS +=  zcp_common_util      0.0 # 0.0
SHARED_LIBS +=  zcp_pyconv           0.0 # 0.0
SHARED_LIBS +=  zcp_pydirector       0.0 # 0.0

MULTI_PACKAGES=	-main -mapi

MODULES=	devel/gettext \
		lang/python \
		lang/php

MODPHP_DO_SAMPLE=mapi
MESSAGE-main=	# empty
UNMESSAGE-main=	# empty

BUILD_DEPENDS=\
		devel/swig \
		textproc/xmlto \
		sysutils/coreutils

# libcurl is searched by configure but unused
BUILD_DEPENDS += net/curl

WANTLIB += ${MODGETTEXT_WANTLIB}
WANTLIB += m pthread z vmime execinfo icudata icui18n icuuc
WANTLIB += boost_filesystem-mt boost_system-mt lzma idn2 crypto

WANTLIB-main += ${WANTLIB} ${MODPY_WANTLIB}
WANTLIB-main += c ical icalss lber-2.4
WANTLIB-main += mysqlclient ncurses sasl2 ssl util xml2
WANTLIB-main += ldap_r-2.4 gsoapssl++
WANTLIB-main += ffi gmp gnutls hogweed nettle p11-kit stdc++ tasn1

RUN_DEPENDS-main=${MODGETTEXT_RUN_DEPENDS} \
		${MODPY_RUN_DEPENDS} \
		databases/xapian-bindings,-python \
		devel/libmagic \
		lang/python/2.7,-bsddb \
		textproc/catdoc
LIB_DEPENDS-main= ${MODGETTEXT_LIB_DEPENDS} \
		databases/mariadb \
		databases/openldap \
		devel/boost \
		devel/gsoap \
		devel/libexecinfo \
		devel/libvmime>=0.9.2p1 \
		textproc/icu4c \
		textproc/libical \
		textproc/libxml

WANTLIB-mapi += ${WANTLIB}
WANTLIB-mapi += freebusy ical icalmapi icalss inetmapi mapi
WANTLIB-mapi += xml2
WANTLIB-mapi += ffi gmp gnutls hogweed nettle p11-kit stdc++ tasn1
WANTLIB-mapi += zcp_common_mapi zcp_common_util

LIB_DEPENDS-mapi= ${BASE_PKGPATH}>=${V}
RUN_DEPENDS-mapi= ${MODPHP_RUN_DEPENDS} \
		 ${MODGETTEXT_RUN_DEPENDS}

USE_GMAKE=	Yes

LIBTOOL_FLAGS=	--tag=disable-static

MODPY_ADJ_FILES=tools/python-scripts/optimize-imap.py \
		tools/python-scripts/update-resource-recipients \
		installer/linux/zarafa7-upgrade \
		ECtools/utils/zarafa-mailbox-permissions \
		ECtools/utils/zarafa-set-oof

CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.69

CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include \
			-I${LOCALBASE}/include/zarafa" \
		LDFLAGS="-L${LOCALBASE}/lib -lexecinfo \
			-L${LOCALBASE}/lib/zarafa" \
		ZAFARA_LDFLAGS="-L${LOCALBASE}/lib/zarafa" \
		PHP_SYSCONF_DIR="${SYSCONFDIR}/php-${MODPHP_VERSION}" \
		ac_cv_lib_pam_pam_start=no
CONFIGURE_ARGS=	--disable-static \
		--with-gsoap-prefix=${LOCALBASE} \
		--with-mapi-configdir=${SYSCONFDIR}/mapi \
		--with-userscript-prefix=${SYSCONFDIR}/zarafa/userscripts \
		--with-quotatemplate-prefix=${SYSCONFDIR}/zarafa/quotamail \
		--with-searchscripts-prefix=${SYSCONFDIR}/zarafa/searchscripts \
		--with-mapi-timezonedir=${LOCALBASE}/share/zarafa/timezones \
		--enable-release \
		--enable-oss \
		--enable-unicode \
		--enable-python \
		--enable-icu \
		--with-distro=openbsd \
		--with-vmime-prefix=${LOCALBASE}/include \
		--with-ical-prefix=${LOCALBASE}/include \
		--with-clucene-lib-prefix=${LOCALBASE}/lib \
		--with-clucene-include-prefix=${LOCALBASE}/include \
		--with-python=${MODPY_BIN} \
		--with-php-config=${MODPHP_PHP_CONFIG}

# force build with clucene >= 2.x
CONFIGURE_ENV +=ac_cv_lib_clucene__ZN6lucene5index11IndexReader4openEPKc=yes
MAKE_FLAGS +=	CLUCENE_CFLAGS="$$(pkg-config --cflags libclucene-core)" \
		CLUCENE_LIBS="$$(pkg-config --libs libclucene-core)"

FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples \
		USERSCRIPTDIR=${PREFIX}/share/examples/zarafa/userscripts \
		QUOTATEMPLATEDIR=${PREFIX}/share/examples/zarafa/quotamail \
		SEARCHSCRIPTSDIR=${PREFIX}/share/examples/zarafa/searchscripts \
		MAPICONFIGDIR=${PREFIX}/share/examples/zarafa/mapi

SUB_SCRIPTS=	createcompany.d/00createpublic groups_common.sh \
		createuser.d/00createstore companies_common.sh \
		users_common.sh

WRKDIST=	${WRKDIR}/zcp-${V}.${BUILD}/

post-patch:
	ln -sf ${MODPY_BIN} ${WRKDIR}/bin/python
	ln -sf ${LOCALBASE}/bin/gcp ${WRKDIR}/bin/cp
	ln -sf ${LOCALBASE}/bin/gmv ${WRKDIR}/bin/mv

pre-configure:
	cd ${WRKSRC}/installer/linux && \
		for i in *.cfg ldap.m4 createuser.dotforward ; do \
			${SUBST_CMD} $$i; \
			perl -pi -e 's/\r\n/\n/;' $$i; done
	for i in ${SUB_SCRIPTS}; do \
		${SUBST_CMD} ${WRKSRC}/installer/userscripts/$$i; done
	${SUBST_CMD} ${WRKSRC}/php-ext/Makefile.in \
		${WRKSRC}/spooler/{DAgent,Spooler}.cpp \
		${WRKSRC}/tools/python-scripts/zarafa-cachestat.py
	perl -pi -e 's,/usr/share/zarafa,${PREFIX}/share/examples/zarafa,g;' \
		-e 's,/etc/zarafa,${SYSCONFDIR}/zarafa,g;' \
		-e 's,/usr/bin,${PREFIX}/bin,g;' \
		-e 's,/var/lib/zarafa,/var/db/zarafa,g;' \
		-e 's,ssl-certificate.sh,ssl-certificates.sh,g' \
		${WRKSRC}/doc/manual.xml
	perl -pi -e 's,/bin/bash,/bin/sh,g' \
		${WRKSRC}/installer/searchscripts/{attachments_parser,zmktemp}

post-install:
	${INSTALL_DATA_DIR} ${WRKINST}${INSTDIR}
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/php-${MODPHP_VERSION}

	${SUBST_CMD} -m 0644 -c ${FILESDIR}/zarafa.m4 ${PREFIX}/share/examples/zarafa/zarafa.m4
	${SUBST_CMD} -m 0644 -c ${FILESDIR}/local_zarafa.m4 ${PREFIX}/share/examples/zarafa/local_zarafa.m4

	# move files where we want them to be
	mv ${PREFIX}/share/doc/zarafa-gateway/* \
		${PREFIX}/share/doc/zarafa
	mv ${PREFIX}/share/doc/zarafa/example-config/* \
		${PREFIX}/share/examples/zarafa
	mv ${PREFIX}/share/doc/zarafa/zarafa.schema \
		${PREFIX}/share/examples/zarafa
	mv ${PREFIX}/share/examples/zarafa.ini \
		${PREFIX}/share/examples/zarafa
	mv ${PREFIX}/share/examples/zarafa/zarafa.ini \
		${PREFIX}/share/examples/php-${MODPHP_VERSION}/${MODPHP_DO_SAMPLE}.ini
	rm ${PREFIX}/share/examples/cron.daily/zarafa-client-update
	rm ${PREFIX}/share/examples/zarafa/unix.cfg
	rm ${PREFIX}/share/doc/zarafa/ssl-certificates.sh
	rmdir ${PREFIX}/share/doc/{zarafa/example-config,zarafa-gateway}
	rm -rf ${PREFIX}/share/examples/{cron.daily,init.d,logrotate.d,sysconfig,zarafa/zarafa-gateway,zarafa/license}
	perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},g' \
		${PREFIX}/sbin/zarafa-search \
		${PREFIX}/sbin/zarafa-search-xapian-compact.py \
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages/zarafa_search/__init__.py \
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages/zarafa_search/plaintext.py \
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages/zarafa/daemon/version/version_info.py

	${MODPY_BIN} ${MODPY_LIBDIR}/compileall.py \
		${PREFIX}/share/zarafa-dagent/python \
		${PREFIX}/share/zarafa-spooler/python \
		${PREFIX}/lib/python${MODPY_VERSION}/site-packages

	chown -R ${SHAREOWN}:${SHAREGRP} ${WRKINST}${INSTDIR}
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/doc/zarafa
	chown ${BINOWN}:${BINGRP} ${PREFIX}/share/examples/zarafa/zarafa.m4 \
		${PREFIX}/share/examples/zarafa/local_zarafa.m4
	chmod ${SHAREMODE} ${PREFIX}/share/examples/zarafa/zarafa.m4 \
		${PREFIX}/share/examples/zarafa/local_zarafa.m4

.include <bsd.port.mk>
@


1.201
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2016/09/04 14:52:38 robert Exp $
d9 2
a10 1
REVISION-main=	0
@


1.200
log
@fix shebang in zarafa-cachestat.py and use SUBST_CMD for /usr/local
as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2016/08/12 08:09:05 robert Exp $
d53 1
a53 1
WANTLIB += boost_filesystem-mt boost_system-mt lzma idn crypto
@


1.199
log
@update to 7.2.4.29
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2016/04/01 18:30:48 robert Exp $
d9 1
d158 2
a159 1
		${WRKSRC}/spooler/{DAgent,Spooler}.cpp
@


1.198
log
@fix subst
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2016/04/01 18:08:10 robert Exp $
d4 1
a4 1
COMMENT-web=	zarafa webaccess frontend and MAPI extensions for PHP
d8 1
a8 1
PKGNAME-web=	zarafa-webaccess-${V}
d32 1
a32 1
MULTI_PACKAGES=	-main -web
d77 5
a81 5
WANTLIB-web += ${WANTLIB}
WANTLIB-web += freebusy ical icalmapi icalss inetmapi mapi
WANTLIB-web += xml2
WANTLIB-web += ffi gmp gnutls hogweed nettle p11-kit stdc++ tasn1
WANTLIB-web += zcp_common_mapi zcp_common_util
d83 2
a84 2
LIB_DEPENDS-web= ${BASE_PKGPATH}>=${V}
RUN_DEPENDS-web= ${MODPHP_RUN_DEPENDS} \
a96 7
WEBROOT=	${VARBASE}/www

PREFIX-web=	${WEBROOT}
INSTDIR=	${PREFIX-web}/zarafa-webaccess

SUBST_VARS=	INSTDIR PREFIX-web

a144 2
	mv ${WRKSRC}/php-webclient-ajax/client/layout/img/login.jpg \
		${WRKSRC}/php-webclient-ajax/client/layout/img/login.jpg.dist
d151 1
a151 1
		for i in *.cfg createuser.dotforward ; do \
d169 1
a169 19
	${INSTALL_DATA_DIR} ${WRKINST}/${PREFIX-web}/include \
		${PREFIX}/share/examples/php-${MODPHP_VERSION}

	${SUBST_CMD} ${WRKBUILD}/php-webclient-ajax/config.php.dist
	find ${WRKBUILD}/php-webclient-ajax -name \*.orig -or -name \*.bak \
		-or -name \*.beforesubst | xargs rm
	cd ${WRKBUILD}/php-webclient-ajax && tar cf - ./ | \
		tar -xf - -C ${WRKINST}${INSTDIR}
	mv ${WRKINST}${INSTDIR}/debug.php \
		${WRKINST}${INSTDIR}/debug.php.disabled
	${INSTALL_DATA} /dev/null ${WRKINST}${INSTDIR}/debug.txt
	${SUBST_CMD} -m 0644 -c ${FILESDIR}/zarafa.conf \
		${WRKINST}/${INSTDIR}/zarafa.conf.dist
	find ${PREFIX}/share/php -type f \
		-exec perl -pi -e 's,\?php\?,\?php,' {} \;
	for i in ${WRKINST}${INSTDIR}/server/language/* ; do \
		msgfmt -f -v -o $$i/LC_MESSAGES/zarafa_webaccess.mo $$i/LC_MESSAGES/zarafa_webaccess.po ; \
		rm $$i/LC_MESSAGES/zarafa_webaccess.po ; \
	done
a184 1
	mv ${PREFIX}/share/php ${WRKINST}${PREFIX-web}/include/php
@


1.197
log
@update to 7.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2016/03/11 20:28:27 naddy Exp $
d85 1
a85 1
		${MODGETTEXT_RUN_DEPENDS}
d94 2
a95 2
		ECtools/zarafa-utils/zarafa-mailbox-permissions \
		ECtools/zarafa-utils/zarafa-set-oof
@


1.196
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2016/02/01 21:55:39 sthen Exp $
a8 1
REVISION=	5
d12 2
d29 2
d52 1
a52 1
WANTLIB += boost_filesystem-mt boost_system-mt lzma
d55 1
a55 1
WANTLIB-main += c crypto ical icalss lber-2.4
d149 1
a149 1
WRKDIST=	${WRKDIR}/zarafa-${V}/
d156 1
a217 21

	# part of zarafa-licensed, Zarafa Enterprise / Hosted editions
	# (i.e. commercial edition, linux bin only)
	cd ${PREFIX} && rm \
		man/man8/zarafa-licensed.8 \
		man/man5/zarafa-licensed.cfg.5 \
		man/man8/zarafa-restore.8 \
		man/man8/zarafa-backup.8 \
		man/man8/zarafa-msr-verify.8 \
		man/man8/zarafa-report.8 \
		man/man8/za-aclsync.8 \
		man/man8/zarafa-msr.8 \
		man/man5/zarafa-ldapms.cfg.5 \
		man/man5/zarafa-msr.cfg.5 \
		man/man5/zarafa-backup.cfg.5
	rmdir ${WRKINST}/var/lib/zarafa/{dagent,spooler}/plugins
	rmdir ${WRKINST}/var/lib/zarafa/{dagent,spooler}
	rmdir ${WRKINST}/var/lib/zarafa/report
	rmdir ${WRKINST}/var/lib/zarafa/
	rmdir ${WRKINST}/var/lib/

@


1.195
log
@Bump pecl-* and a couple of other ports which have now lost their
MESSAGE/UNMESSAGE. Add @@extra lines in place of UNMESSAGE. Docs about
activating these have been rolled into the general PHP pkg-readmes file.
OK/feedback aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2016/01/02 16:16:00 robert Exp $
d111 1
a111 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-static \
@


1.194
log
@just use arc4random_buf() instead of getentropy(); idea from kettenis@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2016/01/02 15:29:12 robert Exp $
d9 1
a9 2

REVISION=	4
@


1.193
log
@fix len argument of getentropy()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2016/01/02 13:57:12 robert Exp $
d10 1
a10 1
REVISION=	3
@


1.192
log
@use getentropy(2) instead of directly opening /dev/urandom;
this unbreaks zarafa-webapp running with chroot'd php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2015/12/30 10:01:26 ajacoutot Exp $
d10 1
a10 1
REVISION=	2
@


1.191
log
@@@sample /var/www/conf/modules.sample/

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2015/11/29 15:50:20 ajacoutot Exp $
d10 1
a10 2
REVISION-main=	1
REVISION-web=	1
@


1.190
log
@daemon_timeout is not passed to the child scripts either.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2015/11/08 07:52:53 ajacoutot Exp $
d11 1
a11 1
REVISION-web=	0
@


1.189
log
@Unbreak fake after recent pkg_subst changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2015/11/02 11:06:34 robert Exp $
d10 1
a10 1
REVISION-main=	0
@


1.188
log
@update to 7.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2015/06/05 06:00:21 robert Exp $
d10 3
d188 1
a188 1
	${SUBST_CMD} -c ${FILESDIR}/zarafa.conf \
d197 2
a198 2
	${SUBST_CMD} -c ${FILESDIR}/zarafa.m4 ${PREFIX}/share/examples/zarafa/zarafa.m4
	${SUBST_CMD} -c ${FILESDIR}/local_zarafa.m4 ${PREFIX}/share/examples/zarafa/local_zarafa.m4
@


1.187
log
@remove zarafa_search because it works differently than before and an rc
script is not needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2015/09/22 07:06:07 jasper Exp $
a8 2
REVISION-web=	1
REVISION-main=	3
d12 15
a26 15
SHARED_LIBS +=  common_util          2.0      # .0.0
SHARED_LIBS +=  common_mapi          2.0      # .0.0
SHARED_LIBS +=  common_ssl           2.0      # .0.0
SHARED_LIBS +=  common_service       2.0      # .0.0
SHARED_LIBS +=  freebusy             2.0      # .0.0
SHARED_LIBS +=  mapi                 2.0      # .0.0
SHARED_LIBS +=  zarafasync           2.0      # .0.0
SHARED_LIBS +=  zarafaclient         2.0      # .0.0
SHARED_LIBS +=  zarafacontacts       0.0      # .0.0
SHARED_LIBS +=  icalmapi             2.0      # .1.0
SHARED_LIBS +=  inetmapi             2.0      # .1.0
SHARED_LIBS +=  archiver             1.0      # .0.0
SHARED_LIBS +=  archiver-core        0.0      # .0.0
SHARED_LIBS +=  mapicalendar         0.0      # .0.0
SHARED_LIBS +=  mapitimezone         0.0      # .0.0
d47 1
a47 1
WANTLIB += m pthread stdc++ z vmime execinfo icudata icui18n icuuc
a48 1
WANTLIB += ffi gmp gnutls hogweed nettle p11-kit tasn1
d54 1
d59 1
d74 4
a77 2
WANTLIB-web += common_util freebusy ical icalmapi icalss inetmapi mapi
WANTLIB-web += common_mapi xml2
d100 3
a102 1
CONFIGURE_STYLE= gnu
d218 1
a218 1
		man/man1/zarafa-licensed.1 \
d220 6
a225 6
		man/man1/zarafa-restore.1 \
		man/man1/zarafa-backup.1 \
		man/man1/zarafa-msr-verify.1 \
		man/man1/zarafa-report.1 \
		man/man1/za-aclsync.1 \
		man/man1/zarafa-msr.1 \
d236 2
a237 2
		${PREFIX}/bin/zarafa-search \
		${PREFIX}/bin/zarafa-search-xapian-compact.py \
a240 1

@


1.186
log
@Security fix for CVE-2015-6566,
Potential local privilege escalation in zarafa-autorespond

ok robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2015/08/21 19:17:11 sthen Exp $
d10 1
a10 1
REVISION-main=	2
@


1.185
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2015/06/05 06:00:21 robert Exp $
d10 1
a10 1
REVISION-main=	1
@


1.184
log
@bump revision due to the change of the default php version to 5.6
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2015/04/06 09:01:45 robert Exp $
d9 2
a10 3
REVISION-web=	0

REVISION-main=	0
d51 1
@


1.184.4.1
log
@Security fix for CVE-2015-6566,
Potential local privilege escalation in zarafa-autorespond

ok robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2015/06/05 06:00:21 robert Exp $
d11 1
a11 1
REVISION-main=	1
@


1.183
log
@only allow one thread to work for the spooler to avoid zombie processes
after sending out emails
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2015/04/05 22:25:08 robert Exp $
d9 1
@


1.182
log
@update to 7.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2015/02/20 14:44:42 robert Exp $
d9 2
@


1.181
log
@fix path to zarafa-autorespond
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2015/02/17 22:08:36 sthen Exp $
a9 3
REVISION-main=	11
REVISION-web=	3

d38 2
a39 1
BUILD_DEPENDS=	devel/swig \
d48 1
a48 1
WANTLIB += boost_filesystem-mt boost_system-mt uuid
d52 2
a53 2
WANTLIB-main += mysqlclient ncurses sasl2 ssl util xml2 kyotocabinet
WANTLIB-main += ldap_r-2.4 clucene-core clucene-shared
d57 2
a60 1
		databases/kyotocabinet \
d64 1
a66 2
		sysutils/e2fsprogs>=1.42.7 \
		textproc/clucene>=2.3.3.4 \
d106 1
d228 8
@


1.181.2.1
log
@Security fix for CVE-2015-6566,
Potential local privilege escalation in zarafa-autorespond

ok robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2015/02/20 14:44:42 robert Exp $
d10 1
a10 1
REVISION-main=	12
@


1.180
log
@Adjust the "meta" rc-scripts (these are used in ports with multiple daemons
which should all be started/stopped together), previously "restart" would
restart each sub-daemon in turn, but actually it should stop all daemons
and only then start them again. Additionally, as suggested by ajacoutot,
stop the procedure and return an error if stopping one of the rc scripts
failed.  ok ajacoutot@@ rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2015/02/16 22:57:09 naddy Exp $
d10 1
a10 1
REVISION-main=	10
@


1.179
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2015/01/31 10:01:54 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	9
@


1.178
log
@Dropping sendmail(8) @@sample files is not enough; documentation needed to
be amended.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2015/01/30 20:38:40 zhuk Exp $
a81 1
USE_GROFF =	Yes
@


1.177
log
@Remove @@sample lines from zarafa that don't work without Sendmail in base.
Original report from Roman Yakovlev.

okay robert@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2015/01/22 13:15:23 sthen Exp $
d10 1
a11 1
REVISION-main=	8
@


1.176
log
@missing bump when catdoc subpackaging was altered
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2014/12/09 17:13:50 robert Exp $
d11 1
a11 1
REVISION-main=	7
@


1.175
log
@do not ship senddocument.php because it allows unauthorized upload of files

https://bugzilla.redhat.com/show_bug.cgi?id=1139442
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2014/12/08 10:57:08 ajacoutot Exp $
d11 1
a11 1
REVISION-main=	6
@


1.174
log
@Make all meta rc.d scripts consistent.
While here, unbreak when options are passed (e.g. /etc/rc.d/foobar -df start)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2014/11/06 17:13:39 sthen Exp $
d10 1
a10 1
REVISION-web=	2
@


1.173
log
@bump REVISION for php version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2014/10/13 11:02:33 robert Exp $
d11 1
a11 1
REVISION-main=	5
@


1.172
log
@update to the latest and fixed distfile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2014/09/18 16:12:39 robert Exp $
d10 2
a11 2
REVISION=	1
REVISION-main=	4
@


1.171
log
@rollback to a known to be working tarball until upstream fixes this
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2014/09/15 15:40:13 robert Exp $
d10 2
a11 2
REVISION=	0
REVISION-main=	3
@


1.170
log
@fix distfile checksum
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2014/09/13 18:09:21 brad Exp $
d10 2
a11 1
REVISION-main=	2
@


1.169
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2014/09/04 20:30:45 robert Exp $
d10 1
a10 1
REVISION-main=	1
@


1.168
log
@unbreak build: use uuid_create() from the base system
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2014/09/02 11:09:38 robert Exp $
d10 1
a10 1
REVISION-main=	0
d61 1
a61 1
		databases/mysql \
@


1.167
log
@update to 7.1.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2014/07/03 06:14:40 robert Exp $
d9 2
@


1.166
log
@update to 7.1.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2014/05/30 13:20:13 sthen Exp $
a221 1
	rmdir ${PREFIX}/share/examples/zarafa/report-ca
@


1.166.2.1
log
@do not ship senddocument.php because it allows unauthorized upload of files

https://bugzilla.redhat.com/show_bug.cgi?id=1139442; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2014/07/03 06:14:40 robert Exp $
a8 2

REVISION-web=	0
@


1.165
log
@bump ports which may have been installed when /var/www/modules.sample didn't
exist, to force an update to make sure that their config samples get installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2014/04/21 18:43:10 ajacoutot Exp $
a8 3

REVISION-main=	1
REVISION-web=	1
@


1.164
log
@Sync for kerberos removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2014/04/07 13:46:06 robert Exp $
d10 2
a11 2
REVISION-main=	0
REVISION-web=	0
@


1.163
log
@update to 7.1.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2013/11/01 11:20:19 robert Exp $
d10 3
d53 3
a55 4
WANTLIB-main += asn1 c com_err crypto gssapi ical icalss krb5 lber-2.4
WANTLIB-main += mysqlclient ncursesw sasl2 ssl util xml2 kyotocabinet
WANTLIB-main += heimbase ldap_r-2.4 roken wind
WANTLIB-main += clucene-core clucene-shared
d75 1
a75 1
WANTLIB-web += common_mapi
@


1.162
log
@Fix wrong revert in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2014/03/23 18:17:34 kili Exp $
a9 2
REVISION-main=	2

d25 2
d39 2
a40 1
		textproc/xmlto
d111 1
d146 1
@


1.161
log
@Revert librt changes.

Prodded by espie@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2014/03/18 09:26:16 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	1
@


1.160
log
@Fix zarafa_server_LDADD and drop librt chunk.

ok robert@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2013/11/01 11:20:19 robert Exp $
d10 1
a10 1
REVISION-main=	0
@


1.159
log
@update to 7.1.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2013/08/12 04:11:20 robert Exp $
d9 2
@


1.159.2.1
log
@do not ship senddocument.php because it allows unauthorized upload of files

https://bugzilla.redhat.com/show_bug.cgi?id=1139442; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2013/11/01 11:20:19 robert Exp $
a8 2

REVISION-web=	0
@


1.158
log
@bump REVISION due to the php update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2013/07/05 09:34:35 jasper Exp $
a8 3

REVISION-main=	7
REVISION-web=	3
@


1.157
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2013/06/26 17:28:57 naddy Exp $
d10 2
a11 2
REVISION-main=	6
REVISION-web=	2
@


1.156
log
@bump -web after e2fsprogs/libuuid changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2013/06/21 22:42:13 sthen Exp $
d90 1
a90 1
WEBROOT=	/var/www
@


1.155
log
@sync WANTLIB and remove patches to handle e2fsprogs/libuuid changes.
add a patch to pick up com_err.h from base rather than the wrong one from
e2fsprogs. ok aja

Thus concludes the e2fsprogs commit rampage - Merry meet, merry part,
and merry meet again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2013/06/20 06:54:37 ajacoutot Exp $
d11 1
a11 1
REVISION-web=	1
@


1.154
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2013/06/18 11:58:17 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	5
d47 1
a47 1
WANTLIB += boost_filesystem-mt boost_system-mt e2fs-uuid
d65 1
a65 1
		sysutils/e2fsprogs \
@


1.153
log
@Use libuuid from e2fsprogs instead of ossp-uuid since that is where zarafa
looks for the header.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2013/06/17 20:54:06 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	4
REVISION-web=	0
d52 1
a52 1
WANTLIB-main += heimbase heimntlm hx509 ldap_r-2.4 roken wind
@


1.152
log
@We have CLOCK_THREAD_CPUTIME_ID now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2013/06/17 19:30:44 ajacoutot Exp $
a7 1
REVISION-main=	3
d10 3
d46 2
a47 2
WANTLIB += m pthread stdc++ z vmime execinfo icudata icui18n icuuc uuid
WANTLIB += boost_filesystem-mt boost_system-mt
d51 1
a51 1
WANTLIB-main += mysqlclient ncursesw sasl2 ssl util uuid xml2 kyotocabinet
d65 1
a65 1
		devel/uuid \
@


1.151
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2013/06/12 20:36:33 brad Exp $
d8 1
a8 1
REVISION-main=	2
@


1.150
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2013/05/25 00:33:10 brad Exp $
d48 1
a48 1
WANTLIB-main += asn1 c com_err crypto gssapi ical icalss krb5 lber-2.4 ldap-2.4
d50 1
a120 3

# XXX in-tree heimdal does not provide krb5_free_unparsed_name()
CONFIGURE_ARGS+= --with-krb5-config=/usr/bin/true
@


1.149
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2013/05/03 18:43:26 sthen Exp $
d8 1
a8 1
REVISION-main=	1
d57 1
a57 1
		databases/mariadb \
@


1.148
log
@extra sanity checking, ensure that the rc.d scripts run by the meta script
are executable, I needed it for the bacula script which runs daemons split
between two packages, ajacoutot suggested applying to other similar scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2013/03/31 13:01:19 robert Exp $
d8 1
a8 1
REVISION-main=	0
d57 1
a57 1
		databases/mysql \
@


1.147
log
@update to 7.1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2013/03/21 08:46:32 ajacoutot Exp $
d8 1
@


1.146
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2013/02/13 08:02:37 robert Exp $
a8 1
REVISION-main=	1
@


1.145
log
@add devel/swig as a build dependency and regenerate the swig code

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2013/02/04 07:14:20 ajacoutot Exp $
a75 1
USE_LIBTOOL=	yes
@


1.144
log
@${SYSCONFDIR}/ssl -> /etc/ssl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2012/11/20 13:11:34 robert Exp $
d9 1
a9 1
REVISION-main=	0
d37 2
a38 1
BUILD_DEPENDS=	textproc/xmlto
a104 1
		--disable-swig \
@


1.143
log
@explicitly disable swig because we do not need to regenerate the code during
build time; this should also fix the bulk builds in case dpb removes swig
noted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2012/10/28 21:51:08 robert Exp $
d9 1
@


1.142
log
@update to Zarafa 7.1.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2012/10/15 20:09:26 robert Exp $
d103 1
@


1.141
log
@zarafa had it's distfile rerolled without a version bump
so update the sums and bump pkg
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2012/10/08 10:20:32 robert Exp $
a8 2

REVISION=	3
@


1.140
log
@taking maintainership from Antoine
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2012/09/05 08:07:24 ajacoutot Exp $
d10 1
a10 1
REVISION=	2
@


1.139
log
@Byte compile all PY modules.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2012/08/30 18:42:26 ajacoutot Exp $
d10 1
a10 2
REVISION-main=	1
REVISION-web=	0
@


1.138
log
@Use clucene-core 2.x.
Use our own libtool.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2012/08/30 14:28:22 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
d229 5
@


1.137
log
@Major update to zarafa-7.1.0.
Complete ChangeLog available at:
http://download.zarafa.com/community/final/7.1/final-changelog-7.1.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2012/08/25 10:17:27 ajacoutot Exp $
d10 3
d39 4
a42 4
BUILD_DEPENDS=	textproc/xmlto \
		net/curl \
		devel/boost \
		textproc/clucene
d45 2
a46 2
WANTLIB += m pthread stdc++ z vmime
WANTLIB += execinfo icudata icui18n icuuc uuid
d49 3
a51 3
WANTLIB-main += asn1 boost_filesystem-mt boost_system-mt c com_err
WANTLIB-main += crypto gssapi ical icalss krb5 lber ldap mysqlclient
WANTLIB-main += ncursesw sasl2 ssl util uuid xml2 kyotocabinet
a56 1
		textproc/libxml \
d60 1
a60 1
		devel/uuid \
d63 3
d67 1
a67 2
		textproc/icu4c \
		devel/boost
d70 2
a71 2
WANTLIB-web += boost_filesystem-mt boost_system-mt common_mapi common_util
WANTLIB-web += freebusy ical icalmapi icalss inetmapi mapi
d77 1
a77 8
# XXX  ../../common/.libs/libcommon_mapi.so.1.0: undefined reference to
# `MAPILogonEx', `zarafa_dcgettext_wide' (and more)
# see patch-provider_server_Makefile_in
#     patch-ECtools_zarafa-cfgchecker_Makefile_in
#     patch-ECtools_zarafa-cfgchecker_Makefile_in
USE_LIBTOOL=	gnu
LIBTOOL_FLAGS=	--tag=disable-static

d81 2
d125 5
@


1.136
log
@Simplify how the order of the _pkg_scripts entries get reversed on stop.
(same diff as for netatalk and samba from rpe)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2012/08/24 08:29:27 ajacoutot Exp $
a9 3
REVISION-main=	7
REVISION-web=	2

d12 13
a24 11
SHARED_LIBS +=  mapi                 2.0      # 0.0
SHARED_LIBS +=  zarafaclient         2.0      # 0.0
SHARED_LIBS +=  icalmapi             2.0      # 1.0
SHARED_LIBS +=  inetmapi             2.0      # 1.0
SHARED_LIBS +=  archiver             1.0      # 0.0
SHARED_LIBS +=  common_util          2.0      # 1.0
SHARED_LIBS +=  common_mapi          2.0      # 1.0
SHARED_LIBS +=  common_ssl           2.0      # 1.0
SHARED_LIBS +=  freebusy             2.0      # 1.0
SHARED_LIBS +=  zarafasync           2.0      # 1.0
SHARED_LIBS +=  zarafacontacts       0.0      # 0.0
d48 1
a48 1
WANTLIB-main += ncursesw sasl2 ssl util uuid xml2
d55 1
d69 1
a69 1
LIB_DEPENDS-web= ${BASE_PKGPATH}>=7.0.0
d85 4
a88 1
		installer/linux/zarafa7-upgrade
a106 1
		--disable-perl \
d110 1
a110 1
		--enable-dependency-tracking \
d115 1
d130 1
a130 1
		INDEXERSCRIPTSDIR=${PREFIX}/share/examples/zarafa/indexerscripts \
d152 1
a152 2
		${WRKSRC}/spooler/DAgent.cpp \
		${WRKSRC}/installer/linux/zarafa-client-update.cron
d160 1
a160 1
		${WRKSRC}/installer/indexerscripts/{attachments_parser,zmktemp}
d199 1
a199 2
	mv ${PREFIX}/share/examples/cron.daily/zarafa-client-update \
		${PREFIX}/share/examples/zarafa/
d216 1
d220 2
@


1.135
log
@No need to LD_PRELOAD libpthread anymore now that Apache is linked with
pthreads(3).

discussed with sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2012/08/19 15:50:25 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	6
@


1.134
log
@Remove -lpthread patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2012/08/06 17:48:35 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	5
@


1.133
log
@Fix depends after recent libvmime change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2012/07/09 15:27:30 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	4
REVISION-web=	1
@


1.132
log
@Make zarafa use the system libvmime.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2012/07/06 16:25:56 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	3
REVISION-web=	0
d43 2
a44 1
WANTLIB += m pthread stdc++ z gmp gnutls hogweed nettle p11-kit tasn1
d48 2
a49 3
WANTLIB-main += crypto execinfo gssapi ical icalss icudata icui18n
WANTLIB-main += icuuc krb5 lber ldap mysqlclient ncursesw
WANTLIB-main += sasl2 ssl util uuid vmime xml2
d60 1
a60 1
		devel/libvmime>=0.9.2p0 \
d67 1
a67 2
WANTLIB-web += execinfo freebusy ical icalmapi icalss icudata icui18n
WANTLIB-web += icuuc inetmapi mapi uuid vmime
@


1.131
log
@Set the default process_model to thread instead of fork.

prodded by robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2012/07/04 13:00:46 ajacoutot Exp $
d10 2
a11 1
REVISION-main=	2
d42 2
a43 1
WANTLIB += m pthread stdc++ z ${MODGETTEXT_WANTLIB}
d49 1
a49 1
WANTLIB-main += sasl2 ssl util uuid vmime-zarafa xml2
d60 1
a60 1
		mail/zarafa/libvmime>=0.9.2p2v0 \
d68 1
a68 1
WANTLIB-web += icuuc inetmapi mapi uuid vmime-zarafa
d115 1
a115 1
		--with-vmime-prefix=${LOCALBASE}/include/zarafa \
@


1.130
log
@Add comment that daemon_flags, daemon_user and daemon_class are not passed
to the child scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2012/06/20 13:45:36 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	1
@


1.129
log
@Set MESSAGE-main and UNMESSAGE-main to an empty value.
Needs a current version of bsd.port.mk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2012/06/19 10:25:05 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
@


1.128
log
@Update to zarafa-7.0.8.
Detailed changelog at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2012/06/18 10:37:28 ajacoutot Exp $
d10 2
d33 2
a34 2
MESSAGE-main=	/dev/null
UNMESSAGE-main=	/dev/null
@


1.127
log
@Use MODPHP_DO_SAMPLE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2012/06/14 07:34:25 ajacoutot Exp $
a9 3
REVISION-main=	2
REVISION-web=	1

d56 1
a56 1
		mail/zarafa/libvmime>=0.9.2p1v0 \
@


1.126
log
@Remove uneeded @@sample.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2012/06/02 06:18:06 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	1
REVISION-web=	0
d33 4
a90 1
MODULE_NAME=	mapi
d92 1
a92 1
SUBST_VARS=	^MODULE_NAME INSTDIR PREFIX-web
d195 1
a195 1
		${PREFIX}/share/examples/php-${MODPHP_VERSION}/${MODULE_NAME}.ini
@


1.125
log
@Tweak README to allow easier copy/paste.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2012/05/22 07:51:08 ajacoutot Exp $
d11 1
@


1.124
log
@ldap.propmap.cfg is needed when using the ldap plugin.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2012/05/05 16:56:17 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
@


1.123
log
@Update zarafa to 7.0.7.
Detailed changelog at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2012/04/28 10:52:08 ajacoutot Exp $
d9 2
@


1.122
log
@--localstatedir=/var is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2012/04/26 11:28:09 ajacoutot Exp $
a9 3
REVISION-main=	3
REVISION-web=	0

d40 1
a40 1
WANTLIB-main += icuuc krb5 lber ldap mysqlclient ncurses
d52 1
a52 1
		mail/zarafa/libvmime>=0.9.2p0v0 \
d172 2
a173 2
		msgfmt -f -v -o $$i/LC_MESSAGES/zarafa.mo $$i/LC_MESSAGES/zarafa.po ; \
		rm $$i/LC_MESSAGES/zarafa.po ; \
@


1.121
log
@Fix localstatedir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2012/04/24 15:20:52 ajacoutot Exp $
a100 1
		--localstatedir=/var \
@


1.120
log
@Typos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2012/04/24 15:10:32 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	2
d101 1
d216 3
a218 4
	rmdir ${PREFIX}/var/lib/zarafa/report
	rmdir ${PREFIX}/var/lib/zarafa/
	rmdir ${PREFIX}/var/lib/
	rmdir ${PREFIX}/var/
@


1.119
log
@Config tweak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2012/04/22 13:44:09 ajacoutot Exp $
d10 2
a11 1
REVISION-main=	1
@


1.118
log
@/etc/rc.d -> RCDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2012/03/15 17:04:31 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
@


1.117
log
@Update to zarafa-7.0.6.
More details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2012/02/27 19:01:34 ajacoutot Exp $
d9 2
@


1.116
log
@Make this work with rthreads.
Fix store creation.
Add a comment for the procmail sample in the README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2012/02/16 22:18:36 ajacoutot Exp $
a9 3
REVISION-main=	0
REVISION-web=	0

d52 1
a52 1
		mail/zarafa/libvmime>=0.9.2v0 \
d198 2
a199 1
	# part of zarafa-licensed (i.e. commercial edition, linux bin only)
d205 1
@


1.115
log
@Update to zarafa 7.0.5.
Detailed changelog:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2012/01/12 14:17:23 ajacoutot Exp $
d9 3
@


1.114
log
@OpenBSD does not require -lcrypt, DES encryption is part of the standard
libc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2012/01/05 11:08:44 ajacoutot Exp $
a9 3
REVISION-main=	1
REVISION-web=	0

d22 1
d52 1
a52 1
		mail/zarafa/libvmime \
d99 1
d121 2
a122 1
		INDEXERSCRIPTSDIR=${PREFIX}/share/examples/zarafa/indexerscripts
@


1.113
log
@Use thread as the process model to prevent the gateway from hanging.

from robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2011/12/22 17:10:04 ajacoutot Exp $
d10 2
a11 1
REVISION-main=	0
@


1.112
log
@Update to zarafa-7.0.4.
Details changelog available at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2011/11/23 13:23:33 ajacoutot Exp $
d9 2
@


1.111
log
@HOMEPAGE changed, from Sergey Bronnikov.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2011/11/17 15:14:37 ajacoutot Exp $
a9 3
REVISION-main=	0
REVISION-web=	0

d140 2
a141 1
		${WRKSRC}/spooler/DAgent.cpp
d188 2
d193 1
a193 1
	rm -rf ${PREFIX}/share/examples/{init.d,logrotate.d,zarafa/zarafa-gateway,zarafa/license}
@


1.110
log
@Update to zarafa-7.0.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2011/10/18 07:00:10 ajacoutot Exp $
d9 3
@


1.109
log
@switch php to version 5.3 by default
@
text
@a9 3
REVISION-main=	1
REVISION-web=	2

d42 3
d51 1
a51 1
		mail/zarafa/libvmime>=0.9.2 \
@


1.108
log
@We have wcsftime(3) now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2011/09/30 05:33:33 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	0
REVISION-web=	1
@


1.107
log
@Evil typo spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2011/09/29 17:38:43 ajacoutot Exp $
d10 1
@


1.106
log
@Add an @@extra-unexec marker.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2011/09/29 17:12:11 ajacoutot Exp $
d10 1
a10 1
REVISION-web=	0
@


1.105
log
@Update to zarafa-7.0.2.
Details at:
http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2011/09/16 10:31:22 espie Exp $
d9 2
@


1.104
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2011/09/11 06:47:52 ajacoutot Exp $
a9 3
REVISION-main=	4
REVISION-web=	2

d198 7
a204 2
		man/man5/zarafa-msr.cfg.5
	rmdir ${PREFIX}/share/examples/zarafa/{report,report-ca}
@


1.103
log
@Tweak procmail example to deal with junk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2011/09/09 14:31:40 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	3
REVISION-web=	1
@


1.102
log
@Do not enable debug by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2011/09/09 13:59:23 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	2
@


1.101
log
@Fix mapi.ini path in UNMESSAGE and tweak README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2011/09/06 09:07:53 ajacoutot Exp $
d11 1
a11 1
REVISION-web=	0
d160 1
a160 1
	${INSTALL_DATA} ${WRKINST}${INSTDIR}/debug.php \
@


1.100
log
@Keep the disabled_features value to its default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2011/09/01 15:39:53 ajacoutot Exp $
d10 2
a11 1
REVISION-main=	1
@


1.99
log
@Install the scripts in executable mode.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2011/08/16 15:01:17 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
@


1.98
log
@Update to zarafa 7.0.1.
See http://download.zarafa.com/community/final/7.0/final-changelog-7.0.txt
for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2011/07/14 09:45:13 ajacoutot Exp $
d9 2
@


1.97
log
@Fix documentation after the move to lang/php.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2011/07/14 08:54:32 ajacoutot Exp $
a8 3

REVISION-main=	15
REVISION-web=	4
@


1.96
log
@Use login.conf(5) to set env vars instead of putting stuffs in rc.local.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2011/07/08 21:45:05 robert Exp $
d10 1
a10 1
REVISION-main=	14
@


1.95
log
@switch to lang/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2011/07/08 02:14:59 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	13
@


1.94
log
@rc_scripts -> pkg_scripts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2011/07/02 22:33:35 sthen Exp $
d10 2
a11 2
REVISION-main=	12
REVISION-web=	3
d29 2
a30 1
		lang/python
d32 1
a32 2
BUILD_DEPENDS=	www/php5/core \
		textproc/xmlto \
d62 1
a62 1
RUN_DEPENDS-web= www/php5/core \
d93 1
a93 1
		PHP_SYSCONF_DIR="${PREFIX-web}/conf/php5" \
d110 2
a111 1
		--with-python=${MODPY_BIN}
d152 2
a153 1
	${INSTALL_DATA_DIR} ${WRKINST}/${PREFIX-web}/{include,conf/php5.sample}
d162 1
a162 1
	${INSTALL_DATA} /dev/null ${WRKINST}${INSTDIR}/debug.txt 
d185 1
a185 1
		${WRKINST}/${PREFIX-web}/conf/php5.sample/${MODULE_NAME}.ini.dist
@


1.93
log
@fix URL in readme, ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2011/07/01 23:23:02 robert Exp $
d10 1
a10 1
REVISION-main=	11
@


1.92
log
@Do not ignore SIGCHLD when shutting down the spooler to avoid
having zombie processes around after shutting down.
Remove the XXX hack from the rc script, because that's not needed anymore.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2011/06/27 14:31:36 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	10
@


1.91
log
@Update to zarafa-7.0.0, stable release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2011/06/27 06:23:39 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	9
@


1.90
log
@Force kill the spooler until we understand what's going on...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2011/06/10 15:55:00 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	8
REVISION-web=	2
@


1.89
log
@Update to zarafa-7.0.0 (rc2).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2011/06/08 17:50:10 jasper Exp $
d10 1
a10 1
REVISION-main=	7
@


1.88
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2011/06/06 07:47:05 rpointel Exp $
d10 2
a11 2
REVISION-main=	6
REVISION-web=	1
d196 4
a199 1
		man/man1/zarafa-report.1
@


1.87
log
@Replace python2.6 by ${MODPY_WANTLIB}, bump revision.
ok ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2011/06/04 06:59:00 ajacoutot Exp $
d10 2
a11 2
REVISION-main=	5
REVISION-web=	0
@


1.86
log
@Fix/add paths to online documentation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2011/06/03 15:52:12 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	4
d39 1
a39 1
WANTLIB-main += ${WANTLIB}
d42 1
a42 1
WANTLIB-main += icuuc krb5 lber ldap mysqlclient ncurses python2.6
@


1.85
log
@Missing defines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2011/06/03 10:30:19 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	3
@


1.84
log
@Install the autorespond configuration (@@sample).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2011/06/03 08:26:57 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	2
@


1.83
log
@Remove/simplify some patches: instead of patching all around to install
in the correct paths, do a mv/rm dance in the port Makefile. This
greatly simplifies the port maintainance.
Remove config and man pages for binaries that aren't shipped (part of
the linux-only zarafa-licensed).
While here, regen WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2011/06/02 13:41:39 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	1
@


1.82
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2011/06/02 12:46:37 ajacoutot Exp $
d10 2
a11 1
REVISION-main=	0
d37 1
a37 1
WANTLIB += m stdc++ z ${MODGETTEXT_WANTLIB}
d42 1
a42 1
WANTLIB-main += icuuc krb5 lber ldap mysqlclient ncurses pthread python2.6
d129 1
a139 3
	perl -pi -e 's,!!MODPY_BIN!!,${MODPY_BIN},' \
		${WRKSRC}/installer/linux/Makefile.in \
		${WRKSRC}/swig/python/Makefile.in
d150 5
a154 2
	${SUBST_CMD} ${WRKSRC}/php-webclient-ajax/config.php.dist
	find ${WRKSRC}/php-webclient-ajax -name \*.orig -or -name \*.bak \
d156 1
a156 2
	${INSTALL_DATA_DIR} ${WRKINST}${INSTDIR}
	cd ${WRKSRC}/php-webclient-ajax && tar cf - ./ | \
d163 2
a168 1
	chown -R ${SHAREOWN}:${SHAREGRP} ${WRKINST}${INSTDIR}
d172 28
d201 1
a201 1
	chown -R ${BINOWN}:${BINGRP} ${PREFIX}/share/examples/zarafa/zarafa.m4 \
a204 7
	${INSTALL_DATA_DIR} ${WRKINST}/${PREFIX-web}/conf/php5.sample
	${INSTALL_DATA} ${WRKSRC}/php-ext/zarafa.ini \
		${WRKINST}/${PREFIX-web}/conf/php5.sample/${MODULE_NAME}.ini.dist
	mv ${PREFIX}/share/doc/zarafa/zarafa.schema \
		${PREFIX}/share/examples/zarafa/
	find ${WRKINST}${PREFIX-web}/include/php -type f \
		-exec perl -pi -e 's,\?php\?,\?php,' {} \;
@


1.81
log
@MAJOR update to zarafa-7.0.0 (RC1).
Committing now because this version performs _much_ better than what we
currently have in tree (see HOMEPAGE for details).

Quick&dirty upgrade steps (but you should follow the README):
------------------------------------------------------------------------
# /etc/rc.d/zarafa stop
===> Make sure _all_ zarafa processes are stopped and BACKUP YOUR DB!
# pkg_add -u zarafa zarafa-webaccess zarafa-libvmime
===> merge configuration (compare /usr/local/share/examples/zarara/*.cfg
with their counterparts under /etc/zarafa/.
# /usr/local/bin/zarafa-server
===> this will only do sanity checks but not start the server
# pkg_add py-mysql
# python2.6 /usr/local/share/doc/zarafa/zarafa7-upgrade
# /etc/rc.d/zarafa start
------------------------------------------------------------------------

tested by robert@@ and myself
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/05/19 17:18:18 ajacoutot Exp $
d9 2
@


1.80
log
@Bugfix update to zarafa-6.40.8.
More details at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/04/22 07:29:44 ajacoutot Exp $
d12 10
a21 10
SHARED_LIBS +=  common_util          1.0      # 1.0
SHARED_LIBS +=  common_mapi          1.0      # 1.0
SHARED_LIBS +=  common_ssl           1.0      # 1.0
SHARED_LIBS +=  freebusy             1.0      # 1.0
SHARED_LIBS +=  zarafasync           1.0      # 1.0
SHARED_LIBS +=  mapi                 1.0      # unknown
SHARED_LIBS +=  zarafaclient         1.0      # unknown
SHARED_LIBS +=  icalmapi             1.0      # 1.0
SHARED_LIBS +=  inetmapi             1.0      # 1.0
SHARED_LIBS +=  archiver             0.0      # unknown
d25 2
a26 1
MODULES=	devel/gettext
d34 7
a40 4
WANTLIB-main =	${MODGETTEXT_WANTLIB}
WANTLIB-main += asn1 c com_err crypto gssapi krb5 m ncurses pthread ssl
WANTLIB-main += sasl2 stdc++ z xml2 mysqlclient uuid execinfo
WANTLIB-main += vmime-zarafa ical icalss lber-2.4 ldap-2.4
d48 20
a67 12
		mail/zarafa/libvmime>=0.7.1p9 \
		textproc/libical

WANTLIB-web += ${MODGETTEXT_WANTLIB}
WANTLIB-web += execinfo ical icalss uuid vmime-zarafa common_mapi
WANTLIB-web += common_util freebusy icalmapi inetmapi mapi m stdc++ z

LIB_DEPENDS-web= ${MODGETTEXT_LIB_DEPENDS} \
		mail/zarafa/zarafa,-main
RUN_DEPENDS-web= www/php5/core

USE_LIBTOOL=	Yes
d73 3
d90 2
a91 1
		PHP_SYSCONF_DIR="${PREFIX-web}/conf/php5"
d100 2
d106 2
a107 1
		--with-clucene-include-prefix=${LOCALBASE}/include
d136 3
@


1.79
log
@Small tweak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/04/14 15:55:19 jasper Exp $
a8 3

REVISION-main=	4
REVISION-web=	1
@


1.78
log
@don't use ``rm -f'' for remove unneeded files.
this will remember us, when not needed anymore this treatment.

from gleydson soares
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/04/04 14:42:51 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	3
@


1.77
log
@Rework some patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/04/04 08:01:04 ajacoutot Exp $
d132 1
a132 1
		-or -name \*.beforesubst | xargs rm -f
@


1.76
log
@Add clucene support (i.e. enable zarafa-indexer). Note that the
zarafa-indexer is not used by default.
Tweak patches accordingly.
Use RLIMIT_DATA instead of RLIMIT_AS which we don't have.

Fix default client_update_path.
Remove a couple of patch entries that are not needed anymore.

Rewrite zarafa.rc and make it a wrapper script that calls the provided
rc.d(8) scripts. This is much more simple, makes much more sense and
allow for proper debugging as discussed with robert@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/04/02 21:10:42 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	2
@


1.75
log
@Use REVISION-subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2011/04/02 16:36:45 robert Exp $
d10 1
a10 1
REVISION-main=	1
d33 2
a34 1
		devel/boost
d89 3
a91 1
		--with-ical-prefix=${LOCALBASE}/include/
d98 2
a99 1
		QUOTATEMPLATEDIR=${PREFIX}/share/examples/zarafa/quotamail
d126 2
@


1.74
log
@make sure that we don't try to use NPTL code because if we do, all of the
zarafa-spooler processes will end up as zombies and we won't be able
to send emails.
this commit also removed the upper limit of 1 thread and from now on
we use the default value which is 5.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/04/02 15:09:52 ajacoutot Exp $
d10 2
a11 1
REVISION=	1
@


1.73
log
@Don't install ssl-certificates.sh, it doesn't work without external ssl
configuration by default and requires CA.sh.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/03/29 18:00:03 ajacoutot Exp $
d10 1
a10 1
REVISION=	0
@


1.72
log
@Update to zarafa-6.40.7.
Changelog available at
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/03/24 06:43:44 landry Exp $
d9 2
@


1.71
log
@bumpski REVISION-web
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/03/21 15:47:05 ajacoutot Exp $
a8 3

REVISION-main=	1
REVISION-web=	0
@


1.70
log
@This is not needed either.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/03/21 09:27:18 ajacoutot Exp $
d11 1
@


1.69
log
@This step is not needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/03/11 09:09:01 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
@


1.68
log
@Missing build_depends.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/03/11 08:44:44 ajacoutot Exp $
d9 2
@


1.67
log
@SECURITY update to zarafa-6.40.6.
As usual, changelog is available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/03/08 13:37:11 ajacoutot Exp $
d29 2
a30 1
		net/curl
@


1.66
log
@Wait for 10s for mysql to be available before bailing out.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/03/03 13:16:05 ajacoutot Exp $
a9 2
REVISION-main=	0

d12 10
a21 9
SHARED_LIBS +=  common_util	1.0 # .1.0
SHARED_LIBS +=  common_mapi	1.0 # .1.0
SHARED_LIBS +=  common_ssl	1.0 # .1.0
SHARED_LIBS +=  freebusy	1.0 # .1.0
SHARED_LIBS +=  mapi		1.0 # .0.0
SHARED_LIBS +=  zarafaclient	1.0 # .1.0
SHARED_LIBS +=  icalmapi	1.0 # .1.0
SHARED_LIBS +=  inetmapi	1.0 # .1.0
SHARED_LIBS +=  zarafasync	1.0 # .1.0
d33 2
a34 2
WANTLIB-main += sasl2 stdc++ z xml2 mysqlclient lber-2.4 ldap-2.4 uuid execinfo
WANTLIB-main += vmime-zarafa ical icalss
d42 1
a42 1
		mail/zarafa/libvmime>=0.7.1p8 \
d97 1
a97 1
WRKDIST=	${WRKDIR}/${DISTNAME}/src
@


1.65
log
@Update to zarafa-6.40.5.
Complete changelog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt

Several documentation and configuration tweaks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/01/15 23:53:35 ajacoutot Exp $
d9 2
@


1.64
log
@Install a zarafa.conf file for apache.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/01/15 22:37:28 ajacoutot Exp $
a9 3
REVISION-main=	5
REVISION-web=	1

d41 1
a41 1
		mail/zarafa/libvmime>=0.7.1p7 \
@


1.63
log
@Install .mo gettext binary message catalog files instead of the .po
descrition files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/01/12 08:07:29 pea Exp $
d10 2
a11 2
REVISION-main=	4
REVISION-web=	0
d131 2
@


1.62
log
@Correctly fixes wantlib
spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/01/11 12:17:26 ajacoutot Exp $
d11 1
d131 4
@


1.61
log
@Fix MASTER_SITES, spotted by pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/01/07 10:36:35 pea Exp $
d10 1
a10 1
REVISION-main=	3
d34 1
a34 1
WANTLIB-main += sasl2 stdc++ z xml2 mysqlclient lber ldap uuid execinfo
@


1.60
log
@Fix wantlib after OpenLDAP upgrade

spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/12/27 14:50:23 ajacoutot Exp $
a12 2

MASTER_SITES=	http://www.bsdfrog.org/OpenBSD/distfiles/zarafa/
@


1.59
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/12/24 10:40:06 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	2
d36 1
a36 1
WANTLIB-main += sasl2 stdc++ z xml2 mysqlclient lber-2.3 ldap-2.3 uuid execinfo
@


1.58
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/12/24 09:07:38 jasper Exp $
d10 1
a10 1
REVISION-main=	1
@


1.57
log
@- bump after uuid rename, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/12/11 08:20:21 ajacoutot Exp $
d10 1
a10 1
REVISION-main=	0
@


1.56
log
@Update to version 6.40.4.
Changelog available at:
http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/11/19 07:23:10 espie Exp $
d9 2
@


1.55
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/11/17 14:00:04 ajacoutot Exp $
d6 1
a9 2
REVISION-main=	6

d43 1
a43 1
		mail/zarafa/libvmime>=0.7.1p6 \
d98 1
a98 4
WRKDIST=	${WRKDIR}/zarafa-${V}

post-extract:
	${GZIP_CMD} -dc ${WRKDIR}/${DISTNAME}/zcp-${V}.tar.gz | ${TAR} xf - -C ${WRKDIR}
@


1.54
log
@Fix restarting all daemons, there is no such thing as rc_restart.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/17 08:34:06 ajacoutot Exp $
d29 3
a31 3
BUILD_DEPENDS=	::www/php5/core \
		::textproc/xmlto \
		::net/curl
d39 7
a45 7
		::textproc/libxml \
		::databases/mysql \
		::databases/openldap \
		::devel/uuid \
		::devel/libexecinfo \
		:zarafa-libvmime->=0.7.1p6:mail/zarafa/libvmime \
		::textproc/libical
d52 2
a53 2
		::mail/zarafa/zarafa,-main
RUN_DEPENDS-web= ::www/php5/core
@


1.53
log
@Use default FD_SETSIZE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/06 16:07:00 espie Exp $
d9 1
a9 1
REVISION-main=	5
@


1.52
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/11/06 08:46:05 ajacoutot Exp $
d9 1
a9 1
REVISION-main=	4
@


1.51
log
@Move to pkg-readmes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/11/03 11:57:16 ajacoutot Exp $
d33 1
d47 1
@


1.50
log
@Fix rc scripts name.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/10/29 12:54:44 ajacoutot Exp $
d9 1
a9 1
REVISION-main=	3
a133 1
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD ${PREFIX}/share/doc/zarafa/README.OpenBSD
@


1.49
log
@Add RCS IDs to rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/10/28 20:46:02 ajacoutot Exp $
d9 1
a9 1
REVISION-main=	2
@


1.48
log
@After discussion with robert and ingo, we are renaming the rc scripts from
dash to underscore so that we are consitent with the foo_bar_flags
variable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2010/10/28 14:46:56 ajacoutot Exp $
d9 1
a9 1
REVISION-main=	1
@


1.47
log
@Add zarafa daemons rc scripts.
Discussed with and ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2010/10/27 18:26:16 ajacoutot Exp $
d9 1
a9 1
REVISION-main=	0
@


1.46
log
@Update to zarafa-6.40.3.
ChangeLog available at:
    http://download.zarafa.com/community/final/6.40/changelog-6.40.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2010/10/18 19:59:20 espie Exp $
d8 2
@


1.45
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2010/08/31 17:57:21 ajacoutot Exp $
d6 1
a6 4
V=		6.40.2
DISTNAME=	zarafa-${V}

PKGNAME-main=	${DISTNAME}
d32 1
a32 1
WANTLIB-main += sasl2 stdc++ z xml2 mysqlclient lber ldap uuid execinfo
d41 1
a41 1
		:zarafa-libvmime->=0.7.1p3:mail/zarafa/libvmime \
d94 5
@


1.44
log
@Update to zarafa-6.40.2.
Complete changelog available at:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2010/08/22 10:13:26 ajacoutot Exp $
d58 1
@


1.43
log
@Update zarafa to version 6.40.1.
See http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/07/13 07:31:00 ajacoutot Exp $
d6 1
a6 1
V=		6.40.1
d87 1
a87 1
CONFIGURE_ARGS+= --with-krb5=/usr/bin/true
@


1.42
log
@Fix Apache documentation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/07/09 17:30:16 ajacoutot Exp $
d6 1
a6 1
V=		6.40.0
d9 2
a10 2
PKGNAME-main=	${DISTNAME}p2
PKGNAME-web=	zarafa-webaccess-${V}p1
d34 4
a37 2
WANTLIB-main=	asn1 c com_err crypto gssapi krb5 m ncurses pthread \
		sasl2 ssl stdc++ z
d39 10
a48 7
		xml2.>=10::textproc/libxml \
		mysqlclient.>=19::databases/mysql \
		lber.>=9,ldap::databases/openldap \
		uuid.>=13::devel/uuid \
		execinfo::devel/libexecinfo \
		vmime-zarafa:zarafa-libvmime->=0.7.1p3:mail/zarafa/libvmime \
		ical.>=1,icalss::textproc/libical
a49 1
WANTLIB-web=	execinfo ical icalss uuid vmime-zarafa
d51 1
a51 1
		common_mapi,common_util,freebusy,icalmapi,inetmapi,mapi::mail/zarafa/zarafa,-main
@


1.41
log
@And bump... *sigh*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/07/06 06:38:32 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
@


1.40
log
@SO_PEERCRED fallout.

spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/06/30 06:28:25 ajacoutot Exp $
d9 2
a10 2
PKGNAME-main=	${DISTNAME}p0
PKGNAME-web=	zarafa-webaccess-${V}p0
@


1.39
log
@Remove stupid "dot.beforesubst" file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/06/30 02:46:48 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.38
log
@*MAJOR* version update to zarafa-6.40.0.
Read the complete changelog here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

Upgrade documentation is available at:
http://doc.zarafa.com/6.40/Administrator_Manual/en-US/html-single/index.html#_performing_the_upgrade

zarafa-libical has been removed, current version from ports works fine
for zarafa needs.

php5-mapi has been merged into zarafa-webaccess.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/06/03 14:01:57 ajacoutot Exp $
d10 1
a10 1
PKGNAME-web=	zarafa-webaccess-${V}
d115 2
a116 1
	find ${WRKSRC}/php-webclient-ajax -name \*.orig -or -name \*.bak | xargs rm -f
a123 1
	find ${PREFIX} -name \*.beforesubst -exec rm {} \;
@


1.37
log
@Fix typo in local_zarafa.m4.
Add more documentation to README.OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/05/21 13:34:43 ajacoutot Exp $
d4 1
a4 1
COMMENT-php=	MAPI extensions for php5
d6 1
a6 1
V=		6.30.14
d9 2
a10 2
PKGNAME-main=	${DISTNAME}p1
PKGNAME-php=	php5-mapi-${V}
d16 9
a24 8
SHARED_LIBS +=  common_util	0.0 # .1.0
SHARED_LIBS +=  common_mapi	0.0 # .1.0
SHARED_LIBS +=  common_ssl	0.0 # .1.0
SHARED_LIBS +=  freebusy	0.0 # .1.0
SHARED_LIBS +=  mapi		0.0 # .0.0
SHARED_LIBS +=  zarafaclient	0.0 # .1.0
SHARED_LIBS +=  icalmapi	0.0 # .1.0
SHARED_LIBS +=  inetmapi	0.1 # .1.0
d26 1
a26 1
MULTI_PACKAGES=	-main -php
d43 1
a43 1
		ical-zarafa.>=2,icalss-zarafa.>=2::mail/zarafa/libical
d45 2
a46 3
WANTLIB-php=	execinfo ical-zarafa icalss-zarafa \
		uuid vmime-zarafa
LIB_DEPENDS-php= ${MODGETTEXT_LIB_DEPENDS} \
d48 1
a48 1
RUN_DEPENDS-php= ::www/php5/core
d55 4
a58 1
PREFIX-php=	/var/www
d60 2
a61 1
SUBST_VARS=	^MODULE_NAME PREFIX-php
d68 2
a69 1
		ZAFARA_LDFLAGS="-L${LOCALBASE}/lib/zarafa"
a70 1
		--enable-dependency-tracking \
d72 1
d75 1
d78 1
a78 1
		--disable-perl \
d82 4
a85 1
FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples/zarafa/report-ca \
d93 3
a95 3
CONF_FILES=	dagent.cfg gateway.cfg ical.cfg ldap.active-directory.cfg \
		ldap.openldap.cfg monitor.cfg server.cfg spooler.cfg \
		unix.cfg
d114 11
a124 2
	for i in ${CONF_FILES}; do mv ${PREFIX}/share/doc/zarafa/$${i} \
		${PREFIX}/share/examples/zarafa/; done
d133 3
a135 3
	${INSTALL_DATA_DIR} ${DESTDIR}/${PREFIX-php}/conf/php5.sample
	echo "; Enable Zarafa mapi extension module\nextension=mapi.so" \
		> ${WRKINST}/${PREFIX-php}/conf/php5.sample/${MODULE_NAME}.ini
d138 1
a138 1
	find ${WRKINST}${PREFIX-php}/include/php/mapi/ -type f \
@


1.36
log
@We have strnlen(3) now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/04/28 15:22:17 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.35
log
@Bugfix update to zarafa-6.30.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/04/22 10:06:18 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.34
log
@Update to zarafa-6.30.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/03/21 11:15:20 ajacoutot Exp $
d6 1
a6 1
V=		6.30.13
@


1.33
log
@Major update to zarafa-6.30.12.
Lots and lots of bugfixes...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/01/12 15:59:34 ajacoutot Exp $
d6 1
a6 1
V=		6.30.12
@


1.32
log
@Minor update to version 6.30.8.
Fix a bug with email attachments.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/01/09 14:03:25 ajacoutot Exp $
d6 1
a6 1
V=		6.30.8
@


1.31
log
@Bugfix update to zarafa-6.30.7.
Changelog:
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/12/16 18:39:11 ajacoutot Exp $
d6 1
a6 1
V=		6.30.7
@


1.30
log
@Upgrade to zarafa-6.30.6.
Lots of bug fixes, changelog available at:
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2009/11/21 12:09:29 ajacoutot Exp $
d6 1
a6 1
V=		6.30.6
d81 2
a82 2
		createuser.d/00createstore deleteuser.d/99deletestore \
		companies_common.sh users_common.sh
@


1.29
log
@Tweak startup sequence.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/11/18 13:55:39 ajacoutot Exp $
d6 1
a6 1
V=		6.30.5
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.28
log
@Bugfix update to zarafa-6.30.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/11/12 16:44:59 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.27
log
@Put mail attachments in the filesystem rather than the DB by default for
new setups.

People wanting to migrate from DB to fs can use the
db-convert-attachments-to-files script in the doc directory and use the
'--ignore-attachment-storage-conflict' argument to zarafa-server.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/11/12 13:20:44 ajacoutot Exp $
d6 1
a6 1
V=		6.30.4
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
d23 1
a23 1
SHARED_LIBS +=  inetmapi	0.0 # .1.0
d42 1
a42 1
		ical-zarafa.>=1,icalss-zarafa.>=1::mail/zarafa/libical
@


1.26
log
@Stricter permissions on db and log directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/10/21 09:59:54 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.25
log
@Bugfix update to zarafa-6.30.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/10/20 22:34:26 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.24
log
@Update to zarafa-6.30.3.
ChangeLog available here:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt

(6.30.4 is out, but one thing at a time since this is a big enough update)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/10/07 17:05:08 ajacoutot Exp $
d6 1
a6 1
V=		6.30.3
@


1.23
log
@Some tweak to the README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/09/27 18:07:40 ajacoutot Exp $
d6 1
a6 1
V=		6.30.2
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p5
d41 1
a41 1
		vmime-zarafa:zarafa-libvmime->=0.7.1p2:mail/zarafa/libvmime \
d84 4
d105 2
@


1.22
log
@Better OpenLdap defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/09/27 14:00:50 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p4
@


1.21
log
@Ooops, forgot this part in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/09/27 13:57:30 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p3
@


1.20
log
@Fix path to autoresponder.
Don't use bash for autoresponder script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/09/24 19:37:51 ajacoutot Exp $
d91 2
a92 1
	${SUBST_CMD} ${WRKSRC}/php-ext/Makefile.in
@


1.19
log
@Rewording.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/09/18 14:21:45 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p2
@


1.18
log
@Err... s/PREFIX/TRUEPREFIX/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/09/18 13:49:55 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
@


1.17
log
@Add sendmail m4 files so that we do not need procmail.
Tweak doc accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/09/11 16:33:52 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.16
log
@Update to zarafa-6.30.2.
ChangeLog available at:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/08/27 20:02:04 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
d101 2
d104 4
@


1.15
log
@Protect ldap configuration files as they may contain a binddn password.
Also re-add a line in README.OpenBSD that I removed by mistake in a
previous commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/08/20 13:33:06 ajacoutot Exp $
d6 1
a6 1
V=		6.30.1
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
d41 1
a41 1
		vmime-zarafa::mail/zarafa/libvmime \
@


1.14
log
@Update to zarafa-6.30.1.

ChangeLog:
http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/07/31 09:55:56 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.13
log
@Major update to zarafa-6.30.0.
Full ChangeLog available at
    http://download.zarafa.com/zarafa/release/docs/changelog.en.txt
Now comes with caldav support.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/06/19 12:47:59 ajacoutot Exp $
d6 1
a6 1
V=		6.30.0
@


1.12
log
@missed bump!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/06/10 09:46:00 ajacoutot Exp $
d6 1
a6 1
V=		6.20.6
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
d33 2
a34 2
WANTLIB-main=	asn1 c com_err crypto gssapi krb5 m pthread sasl2 ssl \
		stdc++ z
d36 1
d42 1
a42 1
		ical-zarafa,icalss-zarafa,icalvcal-zarafa::mail/zarafa/libical
d44 1
a44 1
WANTLIB-php=	execinfo ical-zarafa icalss-zarafa icalvcal-zarafa \
d74 1
a74 1
		--with-ical-prefix=${LOCALBASE}/include/zarafa
@


1.11
log
@Until the actual bug is found, add a workaround to prevent the pop/imap
gateway from hanging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/06/09 18:22:37 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.10
log
@Update to version 2.20.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/05/19 15:21:47 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.9
log
@- fix _zarafa uid/gid
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/05/18 21:13:29 ajacoutot Exp $
d6 1
a6 1
V=		6.20.5
d9 2
a10 2
PKGNAME-main=	${DISTNAME}p0
PKGNAME-php=	php5-mapi-${V}p0
@


1.8
log
@- small hack to fix some php parsing errors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/04/28 10:59:51 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.7
log
@- update to zarafa-6.20.5
* Performance improvements.
* HTML mail fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/04/27 08:43:04 ajacoutot Exp $
d10 1
a10 1
PKGNAME-php=	php5-mapi-${V}
d106 2
@


1.6
log
@- tweak rc.shutdown example
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/04/22 11:43:53 ajacoutot Exp $
d6 1
a6 1
V=		6.20.4
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p1
@


1.5
log
@- make sure mysqld is running before starting zarafa-server

ok bernd@@ (untested)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/04/03 17:30:40 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}p0
@


1.4
log
@- bugfix update to zarafa-6.20.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/03/19 09:33:52 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=	${DISTNAME}
@


1.3
log
@- bugfix update to zarafa-6.20.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/03/05 08:01:26 ajacoutot Exp $
d6 1
a6 1
V=		6.20.3
@


1.2
log
@- bugfix update to zarafa-6.20.2
- don't hardcode /var/www, use PREFIX-php
- add missing build_depends on net/curl (spotted by form@@, thanks!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/02/16 09:44:37 ajacoutot Exp $
d6 1
a6 1
V=		6.20.2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
V=		6.20.1
d30 2
a31 1
		::textproc/xmlto
d90 1
d101 1
a101 1
	${INSTALL_DATA_DIR} ${DESTDIR}/var/www/conf/php5.sample
d103 1
a103 1
		> ${WRKINST}/var/www/conf/php5.sample/${MODULE_NAME}.ini
@


1.1.1.1
log
@Import zarafa-6.20.1 (+php5-mapi-6.20.1)

-main
Zarafa is a full-featured e-mail and groupware solution, focused
towards clients using the MAPI standard.  As an MS Exchange replacement,
the Zarafa suite provides the following features:
 * Integration with existing Unix mailserver
 * Native mobile phone support
 * MS Outlook "Look & Feel" webaccess
 * Stable MS Outlook sharing (100% MAPI)

This package provides the Open Source version of Zarafa.

-php
Messaging Application Programming Interface (MAPI) is a messaging
architecture and a Component Object Model based API for Microsoft
Windows. MAPI allows client programs to become (e-mail)
messaging-enabled, -aware, or -based by calling MAPI subsystem routines
that interface with certain messaging servers. While MAPI is designed to
be independent of the protocol, it is usually used with MAPI/RPC, the
proprietary protocol that Microsoft Outlook uses to communicate with
Microsoft Exchange.

These functions allow you to access a MAPI compliant email server.

"just do it" robert@@, ok jasper@@
@
text
@@
