head	1.14;
access;
symbols
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	martynas-20080722:1.1.1.1
	martynas:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2010.04.03.09.48.25;	author landry;	state dead;
branches;
next	1.13;

1.13
date	2009.12.27.15.51.47;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2009.11.17.23.08.35;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.09.18.21.42.53;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2009.09.10.21.46.10;	author martynas;	state Exp;
branches;
next	1.9;

1.9
date	2009.06.24.09.51.49;	author martynas;	state Exp;
branches;
next	1.8;

1.8
date	2009.04.19.16.49.19;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2009.03.19.22.04.25;	author martynas;	state Exp;
branches;
next	1.6;

1.6
date	2009.01.08.20.13.30;	author martynas;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2008.12.18.21.06.38;	author martynas;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.13.17.36.53;	author martynas;	state Exp;
branches;
next	1.3;

1.3
date	2008.09.26.19.33.25;	author martynas;	state Exp;
branches;
next	1.2;

1.2
date	2008.09.24.19.56.11;	author martynas;	state Exp;
branches;
next	1.1;

1.1
date	2008.07.22.19.42.11;	author martynas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.07.22.19.42.11;	author martynas;	state Exp;
branches;
next	;

1.6.2.1
date	2009.06.17.00.56.09;	author william;	state Exp;
branches;
next	;


desc
@@


1.14
log
@drop enigmail-seamonkey separate port, superseded by mail/enigmail,-seamonkey.
@
text
@# $OpenBSD: Makefile,v 1.13 2009/12/27 15:51:47 steven Exp $

SHARED_ONLY=	Yes

COMMENT=	GnuPG extension for SeaMonkey

VER=		0.96.0
DISTNAME=	enigmail-${VER}
PKGNAME=	enigmail-seamonkey-${VER}p1

CATEGORIES=	mail security

SHARED_LIBS=	enigmime	11.0

HOMEPAGE=	http://enigmail.mozdev.org/

# mozilla public license or GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	http://www.mozilla-enigmail.org/download/source/

SEAMONKEY_DIR=	www/seamonkey
BUILD_DEPENDS=	::${SEAMONKEY_DIR}:configure \
		::archivers/unzip
RUN_DEPENDS=	::security/gnupg

LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey->=1.1.18p0:${SEAMONKEY_DIR}
WANTLIB=	c m nspr4 plc4 plds4

USE_X11=	Yes
USE_GMAKE=	Yes
NO_REGRESS=	Yes

MOZBASE=	${WRKDIR}/${SEAMONKEY_DIR}/mozilla
MOZBIN=		${MOZBASE}/dist/bin
WRKDIST=	${WRKDIR}/enigmail
WRKSRC=		${MOZBASE}/mailnews/extensions/enigmail

GNU_ARCH=	${MACHINE_ARCH:S/amd64/x86_64/}
ENIGMAIL_XPI=	${DISTNAME}-${OPSYS:L}-${GNU_ARCH}.xpi

# unzip ${ENIGMAIL_XPI} and inspect install.rdf for GUID
GUID=		{847b3a00-7ab1-11d4-8f02-006008948af5}
GLOBALDIR=	${PREFIX}/seamonkey

post-extract:
	@@perl -pi -e 's|(genxpi.*) (\$$\(TARGET_XPCOM_ABI\))|\1 "\2"|g' \
		${WRKDIST}/Makefile.in
	@@perl -pi -e 's|[-_]?\$${xpcomAbi}||g' ${WRKDIST}/genxpi
	@@mv ${WRKDIST} ${MOZBASE}/mailnews/extensions

do-build:
	@@cd ${MOZBASE} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} export
	@@cd ${MOZBASE}/modules/libreg && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	@@cd ${MOZBASE}/xpcom/string && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	@@cd ${MOZBASE}/xpcom && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	@@cd ${MOZBASE}/xpcom/obsolete && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	@@cd ${WRKSRC} && ./makemake -r
	@@cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM}
	@@cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} xpi

do-install:
	${INSTALL_DATA_DIR} ${GLOBALDIR}
	unzip -q ${MOZBIN}/${ENIGMAIL_XPI} -d ${GLOBALDIR}
	mv ${GLOBALDIR}/platform/OpenBSD*/components/libenigmime.so.* \
		${GLOBALDIR}/components/
	rm ${GLOBALDIR}/{chrome.manifest,install.rdf}
	${INSTALL_SCRIPT} ${FILESDIR}/regchrome ${GLOBALDIR}/chrome/

.include <bsd.port.mk>
@


1.13
log
@loosen dependency on thunderbird/seamonkey (>= instead of exact pkg version)

ajacoutot@@ agrees

problem noticed by Mikolaj Kucharski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/09/18 21:42:53 martynas Exp $
@


1.12
log
@Bump SHARED_LIBS and LIB_DEPENDS after mozilla-thunderbird+seamonkey
commits.

prodded by sthen@@
@
text
@d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p0
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.18p0:${SEAMONKEY_DIR}
@


1.11
log
@http://enigmail.mozdev.org/download/changelog.php#enig0.96.0
* A total of 81(!) bugs were fixed in this release.
* Improvements to the main user interface for decrypting messages.
* Use gpg groups as target for email addresses and rules.
* Option to automatically attach signing key to sent messages.
* Allow to send encrypted messages to newsgroups.
* New displaying of keys in the Enigmail key manager.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/09/10 21:46:10 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}
d13 1
a13 1
SHARED_LIBS=	enigmime	10.0
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.18:${SEAMONKEY_DIR}
@


1.10
log
@update for seamonkey-1.1.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/06/24 09:51:49 martynas Exp $
d7 1
a7 1
VER=		0.95.7
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p6
d50 3
@


1.9
log
@update enigmail-seamonkey for seamonkey-1.1.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/04/19 16:49:19 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p5
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.17:${SEAMONKEY_DIR}
@


1.8
log
@sync with seamonkey-1.1.16.  prompted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/03/19 22:04:25 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p4
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.16:${SEAMONKEY_DIR}
@


1.7
log
@update for seamonkey-1.1.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/01/08 20:13:30 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p3
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.15:${SEAMONKEY_DIR}
@


1.6
log
@enigmail-seamonkey needs to re-register seamonkey's components
database after installation and removal
problem reported by chefren (chefren at pi dot net)
also, do not run registration with a predictable directory name as
root;  suggested by naddy@@
looks good to kurt@@.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/12/18 21:06:38 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p2
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.14:${SEAMONKEY_DIR}
@


1.6.2.1
log
@MFC:
sync with seamonkey-1.1.16.  prompted by naddy@@
ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/01/08 20:13:30 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p3
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.16:${SEAMONKEY_DIR}
@


1.5
log
@update for seamonkey-1.1.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/11/13 17:36:53 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p1
@


1.4
log
@update for seamonkey-1.1.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/09/26 19:33:25 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p0
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.13:${SEAMONKEY_DIR}
@


1.3
log
@- bug-fix update to enigmail-seamonkey-0.95.7
http://enigmail.mozdev.org/download/changelog.php#enig0.95.7
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/09/24 19:56:11 martynas Exp $
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.12:${SEAMONKEY_DIR}
@


1.2
log
@update for seamonkey-1.1.12.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/07/22 19:42:11 martynas Exp $
d7 1
a7 1
VER=		0.95.6
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 1
a9 1
PKGNAME=	enigmail-seamonkey-${VER}
d30 1
a30 1
LIB_DEPENDS=	seamonkey/xpcom,seamonkey/xpcom_compat,seamonkey/xpcom_core:seamonkey-1.1.11:${SEAMONKEY_DIR}
@


1.1.1.1
log
@import enigmail-seamonkey-0.95.6

Enigmail is an extension to the mail client of Mozilla/Netscape and
Mozilla Thunderbird which allows users to access the authentication
and encryption features provided by GnuPG.

This port is similar to enigmail, but is built for seamonkey.
Importing new port, instead of adding quirks to existing port, was
a much simplier solution this time.

regxpcom is an awk script, that takes care of maintaining
installed-chromes.txt.
go ahead, and a tweak from bernd@@.  kurt@@ agrees.
@
text
@@
