head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.16
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.12
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.14
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.10
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.8
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.6
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.4
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.6
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.4
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@ * @;


1.6
date	2012.08.26.20.35.22;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2011.07.06.17.11.03;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.03.20.09.19.25;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.09.18.51.48;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.12.31.06.50.46;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.12.30.17.51.25;	author landry;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Use rm -f instead of checking for /var/spool/lock/sympa existence.

From rpe, ok ajacoutot@@
@
text
@#!/bin/sh
#
# $OpenBSD: sympa.rc,v 1.5 2011/07/06 17:11:03 ajacoutot Exp $

daemon="${TRUEPREFIX}/sbin/sympa"

. /etc/rc.d/rc.subr

rc_reload=NO

rc_start() {
	rm -f /var/spool/lock/sympa
	${rcexec} "${daemon} start"
}

rc_stop() {
	${daemon} stop
}

rc_check() {
	${daemon} status
}

rc_cmd $1
@


1.5
log
@Remove the lock file on rc_start() if it's there (can happen after an
unclean shutdown).

issue found and fix tested by Jean-Gerard Pailloncy
@
text
@d3 1
a3 1
# $OpenBSD: sympa.rc,v 1.4 2011/03/20 09:19:25 ajacoutot Exp $
d12 1
a12 2
	[ -f /var/spool/lock/sympa ] && \
		rm /var/spool/lock/sympa
@


1.4
log
@Make use of rcexec in rc_start.

ok landry@@ (maintainer)
@
text
@d3 1
a3 1
# $OpenBSD: sympa.rc,v 1.3 2011/03/09 18:51:48 ajacoutot Exp $
d12 2
@


1.3
log
@Remove now uneeded redirection.
@
text
@d3 1
a3 1
# $OpenBSD: sympa.rc,v 1.2 2010/12/31 06:50:46 ajacoutot Exp $
d12 1
a12 1
	${daemon} start
@


1.2
log
@Don't hide errors in rc script.
@
text
@d3 1
a3 1
# $OpenBSD: sympa.rc,v 1.1 2010/12/30 17:51:25 landry Exp $
d12 1
a12 1
	${daemon} start >/dev/null
d16 1
a16 1
	${daemon} stop >/dev/null
d20 1
a20 1
	${daemon} status >/dev/null
@


1.1
log
@Update to Sympa 6.1.3.
- switch config dir to /var/sympa/etc as sympa daemon/fcgi might want to
  write templates there
- switch to use spawn-fcgi, this way sympa web admin works fine in
  chrooted httpd
- provide a httpd.conf fragment to ease sympa integration
- switch to rc scripts (with help from aja@@)
- improve README

With help and feedback from J.G Pailloncy, ok ajacoutot@@
@
text
@d3 1
a3 1
# $OpenBSD$
d12 1
a12 1
	${daemon} start >/dev/null 2>&1
d16 1
a16 1
	${daemon} stop >/dev/null 2>&1
d20 1
a20 1
	${daemon} status >/dev/null 2>&1
@

