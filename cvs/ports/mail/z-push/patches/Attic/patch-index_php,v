head	1.6;
access;
symbols
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.3.0.10
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.2.0.6
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.08.13.15.05.57;	author robert;	state dead;
branches;
next	1.5;
commitid	WcWrGcqHGbjuLFhV;

1.5
date	2015.10.15.18.42.08;	author robert;	state Exp;
branches;
next	1.4;
commitid	Twc9Q4BVYiVHhb0J;

1.4
date	2015.09.07.18.56.59;	author robert;	state Exp;
branches;
next	1.3;
commitid	QR9LRFJZtVb6pQ3Q;

1.3
date	2013.11.01.14.02.50;	author robert;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.24.18.47.20;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.02.15.42.18;	author robert;	state Exp;
branches;
next	;


desc
@@


1.6
log
@remove obsolete patches
@
text
@$OpenBSD: patch-index_php,v 1.5 2015/10/15 18:42:08 robert Exp $
--- index.php.orig	Wed Sep 30 19:10:44 2015
+++ index.php	Thu Oct 15 20:41:21 2015
@@@@ -130,6 +130,22 @@@@ if (!defined('ZPUSH_CONFIG')) define('ZPUSH_CONFIG', '
 include_once(ZPUSH_CONFIG);
 include_once('version.php');
 
+// Define apache_request_headers() in case we are using nginx or lighttpd
+// as a webserver and not apache.
+if (!function_exists("apache_request_headers")) {
+	function apache_request_headers() {
+		$headers = array();
+		foreach ($_SERVER as $key => $value) {
+			if (substr($key, 0, 5) != 'HTTP_') {
+				continue;
+			}
+			$headername = strtr(ucwords(strtolower(strtr(substr($key, 5), '_', ' '))), ' ', '-');
+			$headers[$headername] = $value;
+		}
+
+		return $headers;
+	}
+}
 
     // Attempt to set maximum execution time
     ini_set('max_execution_time', SCRIPT_TIMEOUT);
@@@@ -299,4 +315,4 @@@@ include_once('version.php');
 
     // end gracefully
     ZLog::WriteEnd();
-?>
\ No newline at end of file
+?>
@


1.5
log
@update to 2.2.4
@
text
@d1 1
a1 1
$OpenBSD: patch-index_php,v 1.4 2015/09/07 18:56:59 robert Exp $
@


1.4
log
@update to 2.2.3
@
text
@d1 5
a5 5
$OpenBSD: patch-index_php,v 1.3 2013/11/01 14:02:50 robert Exp $
--- index.php.orig	Thu Sep  3 01:04:22 2015
+++ index.php	Mon Sep  7 20:54:16 2015
@@@@ -123,6 +123,22 @@@@ include_once('lib/request/requestprocessor.php');
 include_once('config.php');
d27 1
a27 1
@@@@ -292,4 +308,4 @@@@ include_once('version.php');
d30 1
a30 1
     ZLog::Write(LOGLEVEL_DEBUG, '-------- End');
@


1.3
log
@update to 2.1.0
@
text
@d1 4
a4 4
$OpenBSD: patch-index_php,v 1.2 2012/06/24 18:47:20 ajacoutot Exp $
--- index.php.orig	Tue Sep 17 16:16:20 2013
+++ index.php	Fri Nov  1 12:02:35 2013
@@@@ -122,6 +122,22 @@@@ include_once('lib/request/requestprocessor.php');
@


1.2
log
@Update to z-push-2.0.
@
text
@d1 4
a4 4
$OpenBSD: patch-index_php,v 1.1 2011/04/02 15:42:18 robert Exp $
--- index.php.orig	Thu Jun  7 23:29:14 2012
+++ index.php	Thu Jun 21 18:17:51 2012
@@@@ -111,6 +111,22 @@@@ include_once('lib/request/requestprocessor.php');
d27 1
a27 1
@@@@ -277,4 +293,4 @@@@ include_once('version.php');
@


1.1
log
@Define the apache_request_headers() function in php in case we are
using nginx or lighttpd as a webserver and not apache.

ok ajacoutot@@ (maintainer)
@
text
@d1 6
a6 6
$OpenBSD$
--- index.php.orig	Sat Apr  2 15:43:08 2011
+++ index.php	Sat Apr  2 15:42:44 2011
@@@@ -53,6 +53,23 @@@@ include_once("debug.php");
 include_once("compat.php");
 include_once("version.php");
d24 10
a33 4
+
 // Attempt to set maximum execution time
 ini_set('max_execution_time', SCRIPT_TIMEOUT);
 set_time_limit(SCRIPT_TIMEOUT);
@

