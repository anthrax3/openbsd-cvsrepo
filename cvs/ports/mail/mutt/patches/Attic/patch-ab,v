head	1.4;
access;
symbols
	turan_1998-Nov-18:1.1.1.1 turan:1.1.1;
locks; strict;
comment	@# @;


1.4
date	99.01.13.21.36.12;	author turan;	state dead;
branches;
next	1.3;

1.3
date	99.01.12.05.08.00;	author turan;	state Exp;
branches;
next	1.2;

1.2
date	99.01.04.06.33.49;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.11.19.03.16.34;	author turan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.11.19.03.16.34;	author turan;	state Exp;
branches;
next	;


desc
@@


1.4
log
@oops.  stupid me.
@
text
@--- rfc1524.c.orig	Sat Dec 12 03:07:15 1998
+++ rfc1524.c	Mon Jan 11 22:08:58 1999
@@@@ -436,7 +436,7 @@@@
   if (s[0] == '\0')
   {
     snprintf (s, l, "%s/muttXXXXXX", buf);
-    mktemp (s);
+    if (mkstemp (s) == -1) mutt_error("Can not open temporary file\n");
   }
   else
   {
@@@@ -447,7 +447,7 @@@@
     if ((period = strrchr (tmp, '.')) != NULL)
       *period = 0;
     snprintf (s, l, "%s/%s.XXXXXX", buf, tmp);
-    mktemp (s);
+    if (mkstemp (s) == -1) mutt_error("Can not open temporary file\n");
     if (period != NULL)
     {
       *period = '.';
@


1.3
log
@update to 0.95.1i plus fix securty hole in rfc1524.c
@
text
@@


1.2
log
@update to 0.95; Kenneth R Westerback <krw@@tcn.net>
@
text
@d1 20
a20 22
--- Makefile.in.orig	Sat Jan  2 20:05:12 1999
+++ Makefile.in	Sat Jan  2 20:08:59 1999
@@@@ -651,17 +651,8 @@@@
 
 install-data-local:
 	$(srcdir)/mkinstalldirs $(DESTDIR)$(sharedir)
-	$(srcdir)/mkinstalldirs $(DESTDIR)$(sysconfdir)
-	-if [ -f $(DESTDIR)$(sharedir)/Muttrc ] ; then \
-		mv $(DESTDIR)$(sharedir)/Muttrc $(DESTDIR)$(sysconfdir) ; \
-	elif [ -f $(DESTDIR)$(sharedir)/../Muttrc ] ; then \
-	 	mv $(DESTDIR)$(sharedir)/../Muttrc $(DESTDIR)$(sysconfdir) ; \
-	elif [ ! -f $(DESTDIR)$(sysconfdir)/Muttrc ] ; then \
-		$(INSTALL) -m 644 $(srcdir)/Muttrc $(DESTDIR)$(sysconfdir) ; \
-	fi
-	-if [ ! -f $(DESTDIR)$(sysconfdir)/mime.types ]; then \
-		$(INSTALL) -m 644 $(srcdir)/mime.types $(DESTDIR)$(sysconfdir); \
-	fi
+	$(INSTALL_DATA) $(srcdir)/Muttrc $(DESTDIR)$(sharedir)/Muttrc.sample
+	$(INSTALL_DATA) $(srcdir)/mime.types $(DESTDIR)$(sharedir)/mime.types.sample
 
 # Don't make this one ChangeLog - it's intended to be
 # used manually.
@


1.1
log
@Initial revision
@
text
@d1 22
a22 26
--- rfc1524.c.orig	Mon Jun  8 05:16:03 1998
+++ rfc1524.c	Sat Oct 10 03:25:02 1998
@@@@ -431,7 +431,11 @@@@
   if (s[0] == '\0')
   {
     sprintf (s, "%s/muttXXXXXX", buf);
+#ifdef HAVE_MKSTEMP
+    mkstemp (s);
+#elif
     mktemp (s);
+#endif
   }
   else
   {
@@@@ -442,7 +446,11 @@@@
     if ((period = strrchr (tmp, '.')) != NULL)
       *period = 0;
     sprintf (s, "%s/%s.XXXXXX", buf, tmp);
+#ifdef HAVE_MKSTEMP
+    mkstemp (s);
+#elif
     mktemp (s);
+#endif
     if (period != NULL)
     {
       *period = '.';
@


1.1.1.1
log
@added mutt port
@
text
@@
