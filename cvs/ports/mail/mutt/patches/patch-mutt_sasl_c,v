head	1.5;
access;
symbols
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2016.10.18.11.33.26;	author sthen;	state Exp;
branches;
next	1.4;
commitid	jZIEWgBO4K7EnWHl;

1.4
date	2016.09.19.22.33.53;	author sthen;	state Exp;
branches;
next	1.3;
commitid	zkBIdv4etTN0V3s6;

1.3
date	2016.09.01.17.33.40;	author sthen;	state Exp;
branches;
next	1.2;
commitid	etfUybT7vLthsUnN;

1.2
date	2016.04.04.14.55.36;	author sthen;	state Exp;
branches;
next	1.1;
commitid	9bCANb6niAcVaqs3;

1.1
date	2016.01.17.14.13.41;	author sthen;	state Exp;
branches;
next	;
commitid	JVilYppYElFFxV8m;


desc
@@


1.5
log
@update the main mutt port to 1.7.1, removing flavours:

sidebar - now in the main release (if you use this and your old configuration
doesn't work, review /usr/local/share/examples/mutt/sample.muttrc-sidebar)

compressed folders - use mail/neomutt if you want this
@
text
@$OpenBSD: patch-mutt_sasl_c,v 1.4 2016/09/19 22:33:53 sthen Exp $

Pledge

--- mutt_sasl.c.orig	Sat Oct  8 20:30:21 2016
+++ mutt_sasl.c	Tue Oct 18 12:20:17 2016
@@@@ -86,7 +86,6 @@@@ static sasl_callback_t mutt_sasl_callbacks[5];
 
 static sasl_secret_t *secret_ptr = NULL;
 
-static int mutt_sasl_start (void);
 
 /* callbacks */
 static int mutt_sasl_cb_log (void* context, int priority, const char* message);
@


1.4
log
@backout to mutt-1.6.2 again.

people who reported crashes: please get backtraces.
@
text
@d1 1
a1 1
$OpenBSD: patch-mutt_sasl_c,v 1.2 2016/04/04 14:55:36 sthen Exp $
d5 3
a7 3
--- mutt_sasl.c.orig	Sun Jan 17 05:18:59 2016
+++ mutt_sasl.c	Sun Jan 17 05:19:37 2016
@@@@ -84,7 +84,6 @@@@ static int getnameinfo_err(int ret)
d9 1
a9 1
 static sasl_callback_t mutt_sasl_callbacks[5];
@


1.3
log
@Switch the mutt port to using the 20160827 NeoMutt sources based on 1.7.0.
Most of the flavours are now integrated in the main package.
@
text
@d5 3
a7 3
--- mutt_sasl.c.orig	Fri Aug 26 23:53:14 2016
+++ mutt_sasl.c	Thu Sep  1 18:11:34 2016
@@@@ -86,7 +86,6 @@@@ static sasl_callback_t mutt_sasl_callbacks[5];
d9 1
a9 1
 static sasl_secret_t *secret_ptr = NULL;
@


1.2
log
@update to mutt-1.6.0
@
text
@d1 1
a1 1
$OpenBSD: patch-mutt_sasl_c,v 1.1 2016/01/17 14:13:41 sthen Exp $
d5 3
a7 3
--- mutt_sasl.c.orig	Sun Jan 17 05:18:59 2016
+++ mutt_sasl.c	Sun Jan 17 05:19:37 2016
@@@@ -84,7 +84,6 @@@@ static int getnameinfo_err(int ret)
d9 1
a9 1
 static sasl_callback_t mutt_sasl_callbacks[5];
@


1.1
log
@Add an initial pledge to mutt, from tb@@. Tested so far with slang/normal,
gpgme/normal, sasl/normal, headercache on/off, and with imap/mbox/maildir.

As you'd expect with a program like this that has many configuration
options, including at runtime, the pledge is rather wide. But even so,
a wide pledge still prevents many system calls, and restricts use of
others.

Committing early to make it easier for people to test. Please do so,
especially if you have an unusual configuration. If you run into problems,
please obtain a ktrace and report back to tb@@ and myself with a description,
the last page or so of kdump output, and preferably a backtrace. Thanks!
@
text
@d1 4
a4 1
$OpenBSD$
@

