head	1.2;
access;
symbols
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.05.13.14.27.53;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2013.08.23.16.40.30;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove old version of mutt, which is missing fixes made to the 1.5
"snapshot" branch 9 years ago (in fact the 1.4 branch has really only
received a couple of security fixes since 2002).

No naysayers, and positive feedback about the removal from ajacoutot and brad.
@
text
@$OpenBSD: patch-hcachever_sh_in,v 1.1 2013/08/23 16:40:30 sthen Exp $

Header cache files are sanity-checked so that changes in data types ought to
invalidate the cache, however this doesn't use base types for everything i.e.
it uses "time_t" not the underlying type. Patch to add some extra text to
the hash which ensures that old cache files are invalidated.

--- hcachever.sh.in.orig	Fri Aug 23 17:31:05 2013
+++ hcachever.sh.in	Fri Aug 23 17:31:19 2013
@@@@ -62,6 +62,7 @@@@ DEST="$1"
 TMPD="$DEST.tmp"
 
 TEXT="$BASEVERSION"
+TEXT="$TEXT /* 64-bit time_t */"
 
 echo "/* base version: $BASEVERSION" > $TMPD
 while read line
@


1.1
log
@Mutt has sanity checks for header cache structs, but doesn't use base types
when it calculates its hash. Give it some extra text so it knows that time_t
has changed so it can correctly invalidate old header caches.
@
text
@d1 1
a1 1
$OpenBSD$
@

