head	1.6;
access;
symbols
	OPENBSD_5_5:1.5.0.20
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.18
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.16
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.14
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.12
	OPENBSD_5_0:1.5.0.10
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.8
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.6
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.4
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.4.0.4
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_3_9:1.1.0.4
	OPENBSD_3_8:1.1.0.2;
locks; strict;
comment	@# @;


1.6
date	2014.05.13.14.27.53;	author sthen;	state dead;
branches;
next	1.5;

1.5
date	2009.06.16.09.37.19;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2008.05.21.13.46.19;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.06.15.01.56;	author okan;	state Exp;
branches;
next	1.2;

1.2
date	2006.08.02.14.30.09;	author bernd;	state dead;
branches;
next	1.1;

1.1
date	2006.06.21.08.16.45;	author bernd;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2006.06.24.17.15.31;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2006.06.24.17.16.11;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Remove old version of mutt, which is missing fixes made to the 1.5
"snapshot" branch 9 years ago (in fact the 1.4 branch has really only
received a couple of security fixes since 2002).

No naysayers, and positive feedback about the removal from ajacoutot and brad.
@
text
@$OpenBSD: patch-imap_browse_c,v 1.5 2009/06/16 09:37:19 sthen Exp $
--- imap/browse.c.orig	Tue Jan 20 04:36:13 2009
+++ imap/browse.c	Mon Jun 15 21:06:09 2009
@@@@ -322,7 +322,9 @@@@ int imap_mailbox_rename(const char* mailbox)
   }
 
   snprintf(buf, sizeof (buf), _("Rename mailbox %s to: "), mx.mbox);
-  
+
+  strfcpy (newname, NONULL (mx.mbox), sizeof (newname));
+
  if (mutt_get_field (buf, newname, sizeof (newname), M_FILE) < 0)
     goto fail;
 
@


1.5
log
@- bug-fix and SECURITY update to 1.5.20; fixes CVE-2009-1390 (X.509
Certificate Chain Security Bypass vulnerability).

- added a couple of post-1.5.20 patches from upstream for regressions

- cleanup the port's handling of sample config files

testing by Simon Kuhnle, Edd Barrett, testing and ok landry@@.
@
text
@d1 1
a1 1
$OpenBSD: patch-imap_browse_c,v 1.4 2008/05/21 13:46:19 sthen Exp $
@


1.4
log
@update to 1.5.18, tested by many.  ok merdely
@
text
@d1 4
a4 4
$OpenBSD: patch-imap_browse_c,v 1.3 2008/02/06 15:01:56 okan Exp $
--- imap/browse.c.orig	Sat May 17 19:52:24 2008
+++ imap/browse.c	Sat May 17 22:34:14 2008
@@@@ -318,7 +318,9 @@@@ int imap_mailbox_rename(const char* mailbox)
@


1.3
log
@fix "garbled characters" issue in imap rename, as reported by marco@@

"get it in" sthen@@, ok merdely@@
@
text
@d1 4
a4 4
$OpenBSD$
--- imap/browse.c.orig	Mon May 28 19:19:39 2007
+++ imap/browse.c	Tue Feb  5 17:42:51 2008
@@@@ -313,7 +313,9 @@@@ int imap_mailbox_rename(const char* mailbox)
@


1.2
log
@Update to mutt-1.5.12 snapshot.

tested by many
@
text
@d1 14
a14 33
$OpenBSD: patch-imap_browse_c,v 1.1 2006/06/21 08:16:45 bernd Exp $

From mutt CVS:
Fix browse_get_namespace() which could overflow ns[LONG_STRING].
(Possible remote vulnerability)

--- imap/browse.c.orig	Tue Jun 20 15:40:30 2006
+++ imap/browse.c	Tue Jun 20 15:42:34 2006
@@@@ -512,7 +512,7 @@@@ static int browse_get_namespace (IMAP_DA
 	    if (*s == '\"')
 	    {
 	      s++;
-	      while (*s && *s != '\"') 
+	      while (*s && *s != '\"' && n < sizeof (ns) - 1) 
 	      {
 		if (*s == '\\')
 		  s++;
@@@@ -523,12 +523,14 @@@@ static int browse_get_namespace (IMAP_DA
 		s++;
 	    }
 	    else
-	      while (*s && !ISSPACE (*s)) 
+	      while (*s && !ISSPACE (*s) && n < sizeof (ns) - 1)
 	      {
 		ns[n++] = *s;
 		s++;
 	      }
 	    ns[n] = '\0';
+	    if (n == sizeof (ns) - 1)
+	      dprint (1, (debugfile, "browse_get_namespace: too long: [%s]\n", ns));
 	    /* delim? */
 	    s = imap_next_word (s);
 	    /* delimiter is meaningless if namespace is "". Why does
@


1.1
log
@Fix a buffer overflow in the IMAP code.

Diff from mutt CVS via TAKAHASHI Tamotsu, thanks!

ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.4.1
log
@MFC:
Fix a buffer overflow in the IMAP code.

Diff from mutt CVS via TAKAHASHI Tamotsu, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-imap_browse_c,v 1.1 2006/06/21 08:16:45 bernd Exp $
@


1.1.2.1
log
@MFC:
Fix a buffer overflow in the IMAP code.

Diff from mutt CVS via TAKAHASHI Tamotsu, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-imap_browse_c,v 1.1 2006/06/21 08:16:45 bernd Exp $
@

