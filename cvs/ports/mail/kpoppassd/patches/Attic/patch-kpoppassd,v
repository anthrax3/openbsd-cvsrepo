head	1.3;
access;
symbols
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.32
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.30
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.28
	OPENBSD_5_0:1.1.1.1.0.26
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.24
	OPENBSD_4_9_BASE:1.1.1.1
	OPENBSD_4_8:1.1.1.1.0.22
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.20
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.18
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.16
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.14
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.12
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.10
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.8
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.6
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	alek_20050611:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2014.04.21.11.47.08;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2013.06.17.19.28.36;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2005.06.11.09.46.08;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.06.11.09.46.08;	author alek;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Start removing kerberos-only ports.

ok sthen@@
@
text
@$OpenBSD: patch-kpoppassd,v 1.2 2013/06/17 19:28:36 ajacoutot Exp $

Undefined NOPASSWD since a user can exist in Kerberos without a
corresponding UNIX account in /etc/passwd.

--- kpoppassd.c.orig	Tue Apr 29 04:12:05 2003
+++ kpoppassd.c	Sat Jun 15 18:44:17 2013
@@@@ -40,7 +40,7 @@@@
  */
  
 /** !!! IMPORTANT !!! Look these over and adjust for your system. **/
-#define VERSION "0.4"
+#define VERSION "0.5"
 #define BAD_PASS_DELAY 3	/* delay in seconds after bad 'Old password' */
 #define MAX_LEN_USERNAME "16"	/* maximum length of username */
 #define MAX_PARSELEN_PASS "126"	/* maximum length for sscanf */
@@@@ -48,7 +48,7 @@@@
 #define MIN_LEN_PASS 6
 #define BUFSIZE 128
 #define SALT_SIZE 2
-#define NOPASSWD                /* If this is defined then it will check
+/*#define NOPASSWD*/                /* If this is defined then it will check
 				   if the user exists in /etc/passwd! */
 
 #include <sys/types.h>
@@@@ -232,6 +232,7 @@@@ int main (int argc, char *argv[])
       exit(1);
     }
 
+#if defined(__OpenBSD__) /* login.conf(5) takes care of this on OpenBSD */
   /* Check for trusted system compliance. */
   for ( i = 0; i < length; i++ )
     {
@@@@ -245,6 +246,7 @@@@ int main (int argc, char *argv[])
       WriteToClient("500 New password must contain at least two alpha characters and one nonalpha character.");
       exit(1);
     }
+#endif
 
   if (ret = krb5_change_password(context, &creds, newpass,
 				 &result_code, &result_code_string,
@


1.2
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
$OpenBSD: patch-kpoppassd,v 1.1.1.1 2005/06/11 09:46:08 alek Exp $
@


1.1
log
@Initial revision
@
text
@d1 5
a5 1
$OpenBSD$
d7 1
a7 1
+++ kpoppassd.c	Wed Jun  8 00:34:39 2005
d26 2
a27 1
@@@@ -233,7 +233,7 @@@@ int main (int argc, char *argv[])
d30 1
d32 1
a32 6
-  for ( i = 0; i < length; i++ )
+  /* for ( i = 0; i < length; i++ )
     {
       if ( isalpha(newpass[i]) )
 	num_alpha++;
@@@@ -244,7 +244,7 @@@@ int main (int argc, char *argv[])
d34 1
d37 2
a38 2
-    }
+    } */
@


1.1.1.1
log
@Import kpoppassd 0.5 (this time with correct name -- kpoppassd without w)

kpoppassd is a kerberos password changing daemon that behaves like
poppassd. It allows a user to change his/her password remotely without
having to login. This is particularly useful for webmail systems that
use imap (i.e. horde/imp). The daemon works exactly like the original
poppassd. The only difference being that this poppassd changes a user's
Kerberos 5 password.

From Antoine Jacoutot <ajacoutot@@lphp.org>
@
text
@@
