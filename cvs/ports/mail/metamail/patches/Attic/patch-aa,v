head	1.3;
access;
symbols
	OPENBSD_3_0:1.2.0.14
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.12
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.10
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.8
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.6
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	joey_1_1:1.1.1.1
	joey_1:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2002.02.20.21.18.02;	author pvalchev;	state dead;
branches;
next	1.2;

1.2
date	98.07.26.06.29.00;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.11.15.00.04.34;	author deraadt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.15.00.04.34;	author deraadt;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- getc() returns an int, not a char
- Rename patches with update-patches while here
@
text
@--- Makefile.orig	Wed Jan 26 09:32:33 1994
+++ Makefile	Sat Jul 25 22:42:41 1998
@@@@ -38,7 +38,7 @@@@
 
 STATICFLAG=FOOBAR${HOST_ARCH}
 
-CFLAGS = -g -I.  ${$(STATICFLAG)} 
+CFLAGS += -I.  ${$(STATICFLAG)}
 # The following is better if you want to make sure you run with SYSV defined
 # CFLAGS = -g -I.  ${$(STATICFLAG)}  -DSYSV
 # Also, for SGI Irix, compile in K&R mode
@@@@ -49,9 +49,9 @@@@
 # LDLIBS variable.
 #
 # For Sun and BSD systems, the following should work...
-LDLIBS =
+# LDLIBS =
 # On BSD 4.4 systems, you will need the following
-# LDLIBS = -lcompat
+LDLIBS = -s -lcompat
 # On SGI machines, we need -lsun for getpw...(), and -lc_s saves some space.
 # LDLIBS = -lsun -lc_s
 # ISC SysVr3.2.2 has a shared C library and requires libinet.a to resolve
@@@@ -72,10 +72,10 @@@@
 #	install -s -c $(LOCALBINDIR) $$file
 #
 #INSTALL = cp
-INSTALL = install -c -s
+INSTALL = install -c
 
 # Root of installation tree
-INSTROOT = /usr/local
+INSTROOT = ${PREFIX}
 #
 # This is where binaries should be copied
 LOCALBINDIR = ${INSTROOT}/bin
@@@@ -91,14 +91,14 @@@@
 FONTSUFFIX=pcf
 
 # This is where the mailcap file should be put
-MAILCAPDIR = ${INSTROOT}/etc
+MAILCAPDIR = ${INSTROOT}/lib/metamail
 
 # This helps with the "for" constructs below on some platforms:
 SHELL=/bin/sh
 
-install: basics
+install: install-all
 
-basics::
+all basics::
 	(cd metamail ; $(MAKE)  CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"  LDLIBS="${LDLIBS}")
 	-${RM} bin/metamail
 	(cd bin; ${LN} ../metamail/metamail metamail)
@@@@ -117,7 +117,7 @@@@
 	(cd bin; ${LN} ../richmail/richtext richtext)
 	-${RM} bin/richtoatk
 	(cd bin; ${LN} ../richmail/richtoatk richtoatk)
-	(cd fonts ; $(MAKE)  CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"   LDLIBS="${LDLIBS}" FONTSUFFIX="${FONTSUFFIX}")
+	(cd fonts ; $(MAKE) PREFIX=${PREFIX} CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"   LDLIBS="${LDLIBS}" FONTSUFFIX="${FONTSUFFIX}")
 	-${RM} bin/shownonascii
 	(cd bin; ${LN} ../fonts/shownonascii shownonascii)
 	-${RM} bin/mailto-hebrew
@@@@ -145,10 +145,12 @@@@
 	    echo "installing man page $$target";\
 	    ${CP} $$file $$target; 		\
 	done)
+	@@mkdir -p $(MAILCAPDIR)
 	@@echo "Renaming old mailcap file to $(MAILCAPDIR)/mailcap.old
-	-mv $(MAILCAPDIR)/mailcap $(MAILCAPDIR)/mailcap.old
+	@@-mv $(MAILCAPDIR)/mailcap $(MAILCAPDIR)/mailcap.old
 	@@echo "installing file $(MAILCAPDIR)/mailcap"
 	${CP} mailcap $(MAILCAPDIR)
+	(cd fonts ; $(MAKE) PREFIX=${PREFIX} CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"   LDLIBS="${LDLIBS}" FONTSUFFIX="${FONTSUFFIX}" install)
 
 uninstall-all:
 	@@(cd bin; 				\
@


1.2
log
@don't install originals of patched scripts;
install mailcap in /etc (unless there is
already a copy there; sample mailcap installed
in /usr/local/lib/metamail; clean up PLIST
for proper package installation
@
text
@@


1.1
log
@Initial revision
@
text
@d1 77
a77 111
*** Makefile.orig	Wed Jan 26 20:32:33 1994
--- Makefile	Mon Nov 20 01:31:41 1995
***************
*** 38,44 ****
  
  STATICFLAG=FOOBAR${HOST_ARCH}
  
! CFLAGS = -g -I.  ${$(STATICFLAG)} 
  # The following is better if you want to make sure you run with SYSV defined
  # CFLAGS = -g -I.  ${$(STATICFLAG)}  -DSYSV
  # Also, for SGI Irix, compile in K&R mode
--- 38,44 ----
  
  STATICFLAG=FOOBAR${HOST_ARCH}
  
! CFLAGS += -I.  ${$(STATICFLAG)}
  # The following is better if you want to make sure you run with SYSV defined
  # CFLAGS = -g -I.  ${$(STATICFLAG)}  -DSYSV
  # Also, for SGI Irix, compile in K&R mode
***************
*** 49,57 ****
  # LDLIBS variable.
  #
  # For Sun and BSD systems, the following should work...
! LDLIBS =
  # On BSD 4.4 systems, you will need the following
! # LDLIBS = -lcompat
  # On SGI machines, we need -lsun for getpw...(), and -lc_s saves some space.
  # LDLIBS = -lsun -lc_s
  # ISC SysVr3.2.2 has a shared C library and requires libinet.a to resolve
--- 49,57 ----
  # LDLIBS variable.
  #
  # For Sun and BSD systems, the following should work...
! # LDLIBS =
  # On BSD 4.4 systems, you will need the following
! LDLIBS = -s -lcompat
  # On SGI machines, we need -lsun for getpw...(), and -lc_s saves some space.
  # LDLIBS = -lsun -lc_s
  # ISC SysVr3.2.2 has a shared C library and requires libinet.a to resolve
***************
*** 72,81 ****
  #	install -s -c $(LOCALBINDIR) $$file
  #
  #INSTALL = cp
! INSTALL = install -c -s
  
  # Root of installation tree
! INSTROOT = /usr/local
  #
  # This is where binaries should be copied
  LOCALBINDIR = ${INSTROOT}/bin
--- 72,81 ----
  #	install -s -c $(LOCALBINDIR) $$file
  #
  #INSTALL = cp
! INSTALL = install -c
  
  # Root of installation tree
! INSTROOT = ${PREFIX}
  #
  # This is where binaries should be copied
  LOCALBINDIR = ${INSTROOT}/bin
***************
*** 96,104 ****
  # This helps with the "for" constructs below on some platforms:
  SHELL=/bin/sh
  
! install: basics
  
! basics::
  	(cd metamail ; $(MAKE)  CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"  LDLIBS="${LDLIBS}")
  	-${RM} bin/metamail
  	(cd bin; ${LN} ../metamail/metamail metamail)
--- 96,104 ----
  # This helps with the "for" constructs below on some platforms:
  SHELL=/bin/sh
  
! install: install-all
  
! all basics::
  	(cd metamail ; $(MAKE)  CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"  LDLIBS="${LDLIBS}")
  	-${RM} bin/metamail
  	(cd bin; ${LN} ../metamail/metamail metamail)
***************
*** 117,123 ****
  	(cd bin; ${LN} ../richmail/richtext richtext)
  	-${RM} bin/richtoatk
  	(cd bin; ${LN} ../richmail/richtoatk richtoatk)
! 	(cd fonts ; $(MAKE)  CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"   LDLIBS="${LDLIBS}" FONTSUFFIX="${FONTSUFFIX}")
  	-${RM} bin/shownonascii
  	(cd bin; ${LN} ../fonts/shownonascii shownonascii)
  	-${RM} bin/mailto-hebrew
--- 117,123 ----
  	(cd bin; ${LN} ../richmail/richtext richtext)
  	-${RM} bin/richtoatk
  	(cd bin; ${LN} ../richmail/richtoatk richtoatk)
! 	(cd fonts ; $(MAKE) PREFIX=${PREFIX} CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"   LDLIBS="${LDLIBS}" FONTSUFFIX="${FONTSUFFIX}")
  	-${RM} bin/shownonascii
  	(cd bin; ${LN} ../fonts/shownonascii shownonascii)
  	-${RM} bin/mailto-hebrew
***************
*** 149,154 ****
--- 149,155 ----
  	-mv $(MAILCAPDIR)/mailcap $(MAILCAPDIR)/mailcap.old
  	@@echo "installing file $(MAILCAPDIR)/mailcap"
  	${CP} mailcap $(MAILCAPDIR)
+ 	(cd fonts ; $(MAKE) PREFIX=${PREFIX} CONFIGDIR=../${CONFIGDIR}  CFLAGS="${CFLAGS}" CC="${CC}"   LDLIBS="${LDLIBS}" FONTSUFFIX="${FONTSUFFIX}" install)
  
  uninstall-all:
  	@@(cd bin; 				\
@


1.1.1.1
log
@initial ports subsystem from joey
@
text
@@
