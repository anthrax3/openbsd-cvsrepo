head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.6
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.4
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.10.20.19.36.46;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	ewDSzKsUKAyjXKJV;

1.1
date	2013.10.17.09.08.07;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@smmsp -> _smmsp

from Geoff Steckel with a few tweaks
@
text
@$OpenBSD: patch-imap_src_mlock_mlock_c,v 1.1 2013/10/17 09:08:07 ajacoutot Exp $
--- imap/src/mlock/mlock.c.orig	Sat Oct  2 10:37:57 2010
+++ imap/src/mlock/mlock.c	Sun Sep 23 11:28:30 2012
@@@@ -69,11 +69,11 @@@@ int main (int argc,char *argv[])
   char *s,*dir,*file,*lock,*hitch,tmp[1024];
   size_t dlen,len;
   struct stat sb,fsb;
-  struct group *grp = getgrnam ("mail");
+  struct group *grp = getgrnam ("_smmsp");
 				/* get syslog */
   openlog (argv[0],LOG_PID,LOG_MAIL);
   if (!grp || (grp->gr_gid != getegid ()))
-    return die ("not setgid mail",EX_USAGE);
+    return die ("not setgid _smmsp",EX_USAGE);
   if (argc != 3) return die ("invalid arguments",EX_USAGE);
   for (s = argv[1]; *s; s++)
     if (!isdigit (*s)) return die ("invalid fd",EX_USAGE);
@


1.1
log
@Update to alpine-2.11.
New upstream, re-alpine is dead...
@
text
@d1 1
a1 1
$OpenBSD: patch-imap_src_mlock_mlock_c,v 1.1.1.1 2012/09/27 15:09:53 ajacoutot Exp $
d9 1
a9 1
+  struct group *grp = getgrnam ("smmsp");
d14 1
a14 1
+    return die ("not setgid smmsp",EX_USAGE);
@

