head	1.6;
access;
symbols
	OPENBSD_5_7:1.5.0.12
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.10
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.8
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.6
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.4
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.4
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.14
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.12
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	simon_20070902:1.1.1.1
	simon:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2015.06.18.13.19.38;	author ajacoutot;	state dead;
branches;
next	1.5;
commitid	PMxPcgAhyY6VIHL4;

1.5
date	2012.07.10.15.22.45;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2011.07.09.12.53.52;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.07.23.40.38;	author simon;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.05.15.09.19;	author simon;	state Exp;
branches;
next	1.1;

1.1
date	2007.09.02.18.35.22;	author simon;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.09.02.18.35.22;	author simon;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to imapfilter-2.6.
@
text
@$OpenBSD: patch-configure,v 1.5 2012/07/10 15:22:45 jasper Exp $
--- configure.orig	Sun Mar  6 13:46:56 2011
+++ configure	Sun Jul  8 20:59:51 2012
@@@@ -13,10 +13,10 @@@@ crammd5="yes"
 incdirs="-I/usr/local/include"
 libdirs="-L/usr/local/lib"
 
-mycflags="$CFLAGS -Wall -O"
+mycflags="$CFLAGS -Wall -I${MODLUA_INCL_DIR}"
 myldflags="$LDFLAGS"
 
-libs="-lm -llua -lpcre"
+libs="-lm ${MODLUA_LIB} -lpcre"
 libssl="-lssl"
 libcrypto="-lcrypto"
 
@


1.5
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.4 2011/07/09 12:53:52 dcoppa Exp $
@


1.4
log
@Update to imapfilter-2.2.3

ok simon@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2008/02/07 23:40:38 simon Exp $
--- configure.orig	Tue Jul  5 15:48:00 2011
+++ configure	Tue Jul  5 15:48:25 2011
@@@@ -13,7 +13,7 @@@@ crammd5="yes"
d9 1
a9 1
+mycflags="$CFLAGS -Wall"
d12 5
a16 1
 libs="-lm -llua -lpcre"
@


1.3
log
@maintenance update to version 2.0.9 and fix build on alpha

alpha fix from merdely@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.2 2007/10/05 15:09:19 simon Exp $
--- configure.orig	Sun Oct  7 05:07:19 2007
+++ configure	Wed Jan 23 08:55:13 2008
d8 3
a10 3
-mycflags="-Wall -O"
+mycflags="-Wall"
 myldflags=""
a12 9
@@@@ -153,7 +153,7 @@@@ MYLDFLAGS = $myldflags
 
 DEFS = $defs
 
-CFLAGS = \$(MYCFLAGS) \$(DEFS) \$(INCDIRS)
+CFLAGS += \$(MYCFLAGS) \$(DEFS) \$(INCDIRS)
 LDFLAGS = \$(MYLDFLAGS) \$(LIBDIRS)
 
 LIBS = $libs
@


1.2
log
@update to version 2.0.5

ok ajacoutot@@
@
text
@d1 12
a12 3
$OpenBSD$
--- configure.orig	Fri Sep 28 14:47:19 2007
+++ configure	Fri Sep 28 14:47:28 2007
@


1.1
log
@Initial revision
@
text
@d2 3
a4 3
--- configure.orig	Sat Jun 30 22:38:47 2007
+++ configure	Fri Aug 31 14:47:10 2007
@@@@ -2,10 +2,11 @@@@
d6 1
a6 1
 # Default values
d8 3
a10 162
-destdir="/usr/local"
-bindir="$destdir/bin"
-sharedir="$destdir/share/imapfilter"
-mandir="$destdir/man"
+destdir=""
+prefix="/usr/local"
+bindir="$prefix/bin"
+sharedir="$prefix/share/imapfilter"
+mandir="$prefix/man"
 
 ssltls="yes"
 crammd5="yes"
@@@@ -13,7 +14,7 @@@@ crammd5="yes"
 incdirs="-I/usr/local/include"
 libdirs="-L/usr/local/lib"
 
-mycflags="-Wall -O"
+mycflags="${CFLAGS}"
 myldflags=""
 
 libs="-lm -llua -lpcre"
@@@@ -27,15 +28,18 @@@@ bin="imapfilter"
 
 # Get options and arguments
 
-while getopts "d:b:s:m:o:h" opt
+while getopts "d:p:b:s:m:o:h" opt
 do
   case $opt in
   d)
     destdir=$OPTARG
-    bindir=$destdir/bin
-    sharedir=$destdir/share/imapfilter
-    mandir=$destdir/man
     ;;
+  p)
+    prefix=$OPTARG
+    bindir=$prefix/bin
+    sharedir=$prefix/share/imapfilter
+    mandir=$prefix/man
+    ;;
   b)
     bindir=$OPTARG
     ;;
@@@@ -63,12 +67,13 @@@@ do
   h | *)
     cat << EOF
 Usage:
-  configure [-h] [-d destdir] [-b bindir] [-s sharedir] [-m mandir]
+  configure [-h] [-d destdir] [-p prefix] [-b bindir] [-s sharedir] [-m mandir]
             [-o option=argument]
 
 Description:
   -h			This brief usage and description message.
-  -d destdir		Installation path for program's files [$destdir]
+  -d destdir		Installation base for all files [$destdir]
+  -p prefix		Installation path for program's files [$prefix]
   -b bindir		Installation path for binaries [$bindir]
   -s sharedir		Installation path for libraries [$sharedir]
   -m mandir		Installation path for manual pages [$mandir]
@@@@ -89,6 +94,7 @@@@ done
 
 cat << EOF
 Destination directory:					$destdir
+Base directory:						$prefix
 Binaries directory:					$bindir
 Architecture independent libraries:			$sharedir
 Manual pages directory:					$mandir
@@@@ -141,6 +147,7 @@@@ mv -f Makefile Makefile~
 
 cat > Makefile << EOF
 DESTDIR = $destdir
+PREFIX = $prefix
 BINDIR = $bindir
 SHAREDIR = $sharedir
 MANDIR = $mandir
@@@@ -191,47 +198,47 @@@@ auth.o cert.o imap.o imapfilter.o log.o request.o resp
 imapfilter.o: version.h
 
 install: \$(BIN)
-	if test ! -d \$(BINDIR); then mkdir -p \$(BINDIR); fi
-	cp -f \$(BIN) \$(BINDIR) && chmod 0755 \$(BINDIR)/\$(BIN)
-	if test ! -d \$(SHAREDIR); then mkdir -p \$(SHAREDIR); fi
-	cp -f \$(COMMON_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(COMMON_LUA)
-	cp -f \$(SET_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(SET_LUA)
-	cp -f \$(REGEX_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(REGEX_LUA)
-	cp -f \$(ACCOUNT_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(ACCOUNT_LUA)
-	cp -f \$(MAILBOX_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(MAILBOX_LUA)
-	cp -f \$(MESSAGE_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(MESSAGE_LUA)
-	cp -f \$(OPTIONS_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(OPTIONS_LUA)
-	cp -f \$(AUXILIARY_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(AUXILIARY_LUA)
-	cp -f \$(DEPRECATED_LUA) \$(SHAREDIR) && \\
-		chmod 0644 \$(SHAREDIR)/\$(DEPRECATED_LUA)
-	if test ! -d \$(MANDIR)/man1; then mkdir -p \$(MANDIR)/man1; fi
-	cp -f \$(MAN_BIN) \$(MANDIR)/man1 && \\
-		chmod 0644 \$(MANDIR)/man1/\$(MAN_BIN)
-	if test ! -d \$(MANDIR)/man5; then mkdir -p \$(MANDIR)/man5; fi
-	cp -f \$(MAN_CONFIG) \$(MANDIR)/man5 && \\
-		chmod 0644 \$(MANDIR)/man5/\$(MAN_CONFIG)
+	if test ! -d \$(DESTDIR)\$(BINDIR); then mkdir -p \$(DESTDIR)\$(BINDIR); fi
+	cp -f \$(BIN) \$(DESTDIR)\$(BINDIR) && chmod 0755 \$(DESTDIR)\$(BINDIR)/\$(BIN)
+	if test ! -d \$(DESTDIR)\$(SHAREDIR); then mkdir -p \$(DESTDIR)\$(SHAREDIR); fi
+	cp -f \$(COMMON_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(COMMON_LUA)
+	cp -f \$(SET_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(SET_LUA)
+	cp -f \$(REGEX_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(REGEX_LUA)
+	cp -f \$(ACCOUNT_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(ACCOUNT_LUA)
+	cp -f \$(MAILBOX_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(MAILBOX_LUA)
+	cp -f \$(MESSAGE_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(MESSAGE_LUA)
+	cp -f \$(OPTIONS_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(OPTIONS_LUA)
+	cp -f \$(AUXILIARY_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(AUXILIARY_LUA)
+	cp -f \$(DEPRECATED_LUA) \$(DESTDIR)\$(SHAREDIR) && \\
+		chmod 0644 \$(DESTDIR)\$(SHAREDIR)/\$(DEPRECATED_LUA)
+	if test ! -d \$(DESTDIR)\$(MANDIR)/man1; then mkdir -p \$(DESTDIR)\$(MANDIR)/man1; fi
+	cp -f \$(MAN_BIN) \$(DESTDIR)\$(MANDIR)/man1 && \\
+		chmod 0644 \$(DESTDIR)\$(MANDIR)/man1/\$(MAN_BIN)
+	if test ! -d \$(DESTDIR)\$(MANDIR)/man5; then mkdir -p \$(DESTDIR)\$(MANDIR)/man5; fi
+	cp -f \$(MAN_CONFIG) \$(DESTDIR)\$(MANDIR)/man5 && \\
+		chmod 0644 \$(DESTDIR)\$(MANDIR)/man5/\$(MAN_CONFIG)
 
 deinstall:
-	rm -f \$(BINDIR)/\$(BIN) \\
-		\$(SHAREDIR)/\$(COMMON_LUA) \\
-		\$(SHAREDIR)/\$(SET_LUA) \\
-		\$(SHAREDIR)/\$(REGEX_LUA) \\
-		\$(SHAREDIR)/\$(ACCOUNT_LUA) \\
-		\$(SHAREDIR)/\$(MAILBOX_LUA) \\
-		\$(SHAREDIR)/\$(MESSAGE_LUA) \\
-		\$(SHAREDIR)/\$(OPTIONS_LUA) \\
-		\$(SHAREDIR)/\$(AUXILIARY_LUA) \\
-		\$(SHAREDIR)/\$(DEPRECATED_LUA) \\
-		\$(MANDIR)/man1/\$(MAN_BIN) \\
-		\$(MANDIR)/man5/\$(MAN_CONFIG)
+	rm -f \$(DESTDIR)\$(BINDIR)/\$(BIN) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(COMMON_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(SET_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(REGEX_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(ACCOUNT_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(MAILBOX_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(MESSAGE_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(OPTIONS_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(AUXILIARY_LUA) \\
+		\$(DESTDIR)\$(SHAREDIR)/\$(DEPRECATED_LUA) \\
+		\$(DESTDIR)\$(MANDIR)/man1/\$(MAN_BIN) \\
+		\$(DESTDIR)\$(MANDIR)/man5/\$(MAN_CONFIG)
 
 uninstall: deinstall
d12 1
@


1.1.1.1
log
@import imapfilter

IMAPFilter is a mail filtering utility.  It connects to remote mail
servers using the Internet Message Access Protocol (IMAP), sends
searching queries to the server and processes mailboxes based on the
results.  It can be used to delete, copy, move, flag, etc. messages
residing in mailboxes at the same or different mail servers.  The 4rev1
and 4 versions of the IMAP protocol are supported.

IMAPFilter uses the Lua programming language as a configuration and
extension language.

feedback & ok kili@@
@
text
@@
