head	1.39;
access;
symbols
	OPENBSD_6_1:1.39.0.2
	OPENBSD_6_1_BASE:1.39
	OPENBSD_6_0:1.38.0.4
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.38.0.2
	OPENBSD_5_9_BASE:1.38
	OPENBSD_5_8:1.34.0.4
	OPENBSD_5_8_BASE:1.34
	OPENBSD_5_7:1.33.0.2
	OPENBSD_5_7_BASE:1.33
	OPENBSD_5_6:1.30.0.2
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.25.0.2
	OPENBSD_5_5_BASE:1.25
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.10.0.2
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	ajacoutot_20111112:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.39
date	2016.11.12.10.32.28;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	YJApAOxcdhgCZYTT;

1.38
date	2015.12.06.08.29.35;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	GoLwf2jrcVlXZbbh;

1.37
date	2015.11.08.18.12.56;	author ajacoutot;	state Exp;
branches;
next	1.36;
commitid	VtPJoGvoCD5VHhKZ;

1.36
date	2015.10.24.09.18.13;	author ajacoutot;	state Exp;
branches;
next	1.35;
commitid	bVbBbScpUnHNNm9z;

1.35
date	2015.10.24.08.46.25;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	8IZP6TDQ674tFJkN;

1.34
date	2015.04.04.09.36.38;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	Dga8Cwfbantp8VkD;

1.33
date	2014.09.21.13.02.54;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	FbQCRLSplhOud06R;

1.32
date	2014.09.18.14.42.20;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	HLbAFJlM61GQBGTT;

1.31
date	2014.08.30.13.29.36;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	6lEFgeezEbm5Yql2;

1.30
date	2014.07.12.13.41.47;	author ajacoutot;	state Exp;
branches;
next	1.29;
commitid	CC2Szyf2ZEuFbbEs;

1.29
date	2014.07.10.13.09.06;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	Xpirey71VpT09196;

1.28
date	2014.04.01.18.02.58;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2014.03.30.16.50.44;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2014.03.25.16.54.25;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2014.01.08.10.37.25;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2014.01.08.10.09.29;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2013.12.26.14.48.30;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2013.09.27.16.30.03;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2013.09.06.14.58.19;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2013.09.03.05.32.27;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.23.15.10.58;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.04.19.18.26.33;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.04.14.08.35.45;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2013.01.06.10.41.14;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.11.22.17.20.52;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2012.11.14.09.31.21;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2012.10.16.15.49.24;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2012.10.16.15.46.49;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2012.10.10.08.42.18;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2012.07.12.11.58.15;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.07.11.14.43.43;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.07.08.14.43.59;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.07.08.13.33.21;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2012.07.08.08.51.05;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2012.02.23.09.22.06;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.01.02.16.07.40;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.01.01.09.02.47;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.12.29.12.29.15;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.11.12.16.40.47;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.11.12.16.40.47;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.39
log
@Extend GDM configuration and add a note that changing the GDM kbd layout is
not possible due to the lack of systemd-localed support.
@
text
@$OpenBSD: README-main,v 1.38 2015/12/06 08:29:35 ajacoutot Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

(see "Cheat sheet" at the end of this file for a quick setup)

The GNOME desktop is composed of 2 meta-packages:
    * gnome, for a standard GNOME installation
    * gnome-extras, for a full GNOME installation

The "gnome" package is focused on generic usage to give the user the
choice to install his favorite applications for daily usage (i.e. PIM,
WWW browser, office and development applications have been left out on
purpose).

Starting GNOME
==============

DBus
----
Before running gnome-session(1), a system-wide D-Bus daemon needs to be
running ("messagebus" must be added to "pkg_scripts" in rc.conf.local(8)).

GDM
---
Session management requires the use of GDM as login manager, otherwise
some key features like screen locking, session tracking... will not work
properly. To do so, "gdm" must be added at the end of "pkg_scripts" in
rc.conf.local(8) (and "xdm_flags" commented or removed).

GDM greeter language and character set is configured in:
    ${SYSCONFDIR}/gdm/locale.conf
Note that the variables set in this file will be inherited by the user session.
They can be unset/overriden in the user's .profile file.

It is *not* possible to change the GDM greeter keyboard input layout due to the
lack of systemd-localed support on OpenBSD.

Alternative (non-GDM) GNOME startup
-----------------------------------
*** NOT RECOMMENDED ***
To start GNOME without GDM, the following line needs to be added:
    exec ${LOCALBASE}/bin/ck-launch-session ${TRUEPREFIX}/bin/gnome-session
to ~/.xinitrc when using startx(1) (console login)
to ~/.xsession when using xdm(1) (xdm(1) or similar login)

mDNS/DNS-SD support
===================
The avahi-daemon(8) daemon provides Zeroconf support (aka. Bonjour /
Rendezvous) in GNOME. Several applications can optionally benefit from
it (e.g. the "Network" shortcut in nautilus(1)) while some others
will not work at all without it (e.g. seahorse-sharing(1)).

To make use of it, rc.conf.local(8) needs to contain the following line:
    multicast=YES
and "avahi_daemon" must be added to "pkg_scripts" _after_ "messagebus".

LibreOffice integration
=======================
The gnome-documents manager and sushi previewer do not support Office type
documents by defaults (e.g. docx, .odt, .ods) but rely on unoconv to display
them. If such support is needed, `doas pkg_add unoconv` will take care of it.

Cheat sheet
===========
# rcctl disable xdm
# rcctl enable multicast messagebus avahi_daemon gdm
# reboot
@


1.38
log
@multicast_{host,router} -> multicast
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.37 2015/11/08 18:12:56 ajacoutot Exp $
d35 5
@


1.37
log
@Add a note about unoconv.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.36 2015/10/24 09:18:13 ajacoutot Exp $
d52 1
a52 1
    multicast_host=YES
d64 1
a64 1
# rcctl enable multicast_host messagebus avahi_daemon gdm
@


1.36
log
@Consistency: rcctl enable is the most used idiom within the ports tree.
Also since we can pass it several daemons now, simplify enabling:
- before
rcctl enable foo
rcctl enable bar
rcctl enable bla
- after
rcctl enable foo bar bla
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.35 2015/10/24 08:46:25 ajacoutot Exp $
d54 6
@


1.35
log
@The GNOME Welcome Tour is triggered by gnome-initial-setup now; so no need
to configure anything.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.34 2015/04/04 09:36:38 ajacoutot Exp $
d57 2
a58 2
# rcctl set xdm status off
# for i in multicast_host messagebus avahi_daemon gdm; do rcctl set $i status on; done
@


1.34
log
@dbus_daemon -> messagebus
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.33 2014/09/21 13:02:54 ajacoutot Exp $
a54 6
GNOME Welcome Tour
==================
To run the GNOME Welcome Tour when a user logs in for the first time,
the file ~/.config/run-welcome-tour must exist and contain "yes". Either
create it manually or add it to skel (see user(8)) before creating users.

d57 2
a58 4
$ echo "yes" > ~/.config/run-welcome-tour
# rcctl disable xdm
# rcctl enable multicast_host
# for i in messagebus avahi_daemon gdm; do rcctl enable $i; done
@


1.33
log
@Re-depend on x11/gnome/initial-setup and add a note about how to run the
welcome tour if wanted.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.32 2014/09/18 14:42:20 ajacoutot Exp $
d24 1
a24 1
running ("dbus_daemon" must be added to "pkg_scripts" in rc.conf.local(8)).
d53 1
a53 1
and "avahi_daemon" must be added to "pkg_scripts" _after_ "dbus_daemon".
d66 1
a66 1
# for i in dbus_daemon avahi_daemon gdm; do rcctl enable $i; done
@


1.32
log
@Disable xdm(1).
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.31 2014/08/30 13:29:36 ajacoutot Exp $
d55 6
d63 1
@


1.31
log
@Use rcctl(8) in the cheat sheet section.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.30 2014/07/12 13:41:47 ajacoutot Exp $
d57 1
@


1.30
log
@pkg_scripts is not a variable anymore.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.29 2014/07/10 13:09:06 ajacoutot Exp $
d57 2
a58 2
# echo 'multicast_host=YES' >>/etc/rc.conf.local
# echo 'pkg_scripts=dbus_daemon avahi_daemon gdm' >>/etc/rc.conf.local
@


1.29
log
@rc.conf.local is in man(1) section 8, at least for now.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.28 2014/04/01 18:02:58 ajacoutot Exp $
d24 1
a24 2
running ("dbus_daemon" needs to be added to the "pkg_scripts" variable
in rc.conf.local(8)).
d53 1
a53 2
and "avahi_daemon" needs to be added to the "pkg_scripts" variable
_after_ "dbus_daemon".
d58 1
a58 1
# echo 'pkg_scripts="${pkg_scripts} dbus_daemon avahi_daemon gdm"' >>/etc/rc.conf.local
@


1.28
log
@gnome-extra -> gnome-extras
There was a reason to do this in the past but now this just bothers me.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.27 2014/03/30 16:50:44 ajacoutot Exp $
d52 1
a52 1
To make use of it, rc.conf.local(5) needs to contain the following line:
@


1.27
log
@Some README rewordings.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.26 2014/03/25 16:54:25 ajacoutot Exp $
d11 1
a11 1
    * gnome-extra, for a full GNOME installation
@


1.26
log
@Tweak the part about GDM.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.25 2014/01/08 10:37:25 ajacoutot Exp $
d30 1
a30 1
some key features like screen locking, session ending... will not work
d34 1
a34 1
Changing the GDM greeter language is done in:
a36 1
*** NOT RECOMMENDED ***
d39 1
@


1.25
log
@Tweaks.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.24 2014/01/08 10:09:29 ajacoutot Exp $
d29 4
a32 4
It is _strongly_ advised to use GDM as the login manager otherwise some
key features like screen locking will not work properly. To do so, "gdm"
must be added at the end of "pkg_scripts" in rc.conf.local(8) (and
"xdm_flags" commented or removed).
@


1.24
log
@Make it clear running GNOME without GDM is not recommended.
Add a small note about how to change the greeter default language.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.23 2013/12/26 14:48:30 ajacoutot Exp $
a35 1
See locale(1) for a list of supported locales (`locale -a`).
@


1.23
log
@Remove the part about OpenGL and drm(4) -- GDM will take care of it
automatically soon.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.22 2013/09/27 16:30:03 ajacoutot Exp $
d34 8
a41 2
Alternatively, to start GNOME without GDM (not recommended), the
following line needs to be added:
d43 2
a44 2
in ~/.xinitrc when using startx(1) (console login)
in ~/.xsession when using xdm(1) (xdm(1) or similar login)
@


1.22
log
@Install bijiben, gnome-maps, gnome-music and gnome-online-miners by
default.
Remove gnote from -extra.
Add commented www/epiphany.
Small README tweak.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.21 2013/09/06 14:58:19 ajacoutot Exp $
a17 16
OpenGL and drm(4)
=================
GNOME requires a 3D accelerated display. By default, the drm(4) devices
are only accessible by "root" and members of the "wheel" group. Both GDM
(when used to login) and users need access to /dev/drmX which can be
done by running the following command as root (note that there may be
some security implications in doing this):
    chmod 0666 /dev/drm0

In case the machine has multiple video cards, it may be necessary to do
the same with /dev/drm{1,2,3}.

Another solution would be to create a new group (e.g. "video"), change
the group ownership of /dev/drmX accordingly and put the users and
"_gdm" into that group.

d54 2
a55 3
# echo 'chmod 0666 /dev/drm*' >> /etc/rc.local
# echo 'multicast_host=YES' >> /etc/rc.conf.local
# echo 'pkg_scripts="${pkg_scripts} dbus_daemon avahi_daemon gdm"' >> /etc/rc.conf.local
@


1.21
log
@Tweak the drm part.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.20 2013/09/03 05:32:27 ajacoutot Exp $
d15 2
a16 1
office and development type packages have been left out on purpose).
@


1.20
log
@Documentation tweak.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.19 2013/06/23 15:10:58 ajacoutot Exp $
d30 1
a30 1
the group ownership of /dev/drm0 accordingly and put the users and
d69 1
a69 1
# echo 'chmod 0666 /dev/drm0' >> /etc/rc.local
@


1.19
log
@It seems bumping kern.shminfo.shmall is not needed anymore; any regression,
please let me know.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.18 2013/04/19 18:26:33 ajacoutot Exp $
d19 3
a21 3
GNOME requires a 3D accelerated display. By default, the drm(4) device
is only accessible by "root" and members of the "wheel" group. Both GDM
(when used to login) and users need access to /dev/drm0 which can be
d25 3
@


1.18
log
@Make it clearer GDM is needed.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.17 2013/04/14 08:35:45 ajacoutot Exp $
a29 9
Default limits
=============
The default shared memory limits on OpenBSD are too low for the Cogl 3D
graphics API to function properly so kern.shminfo.shmall must be raised:
    sysctl kern.shminfo.shmall=32768

To make it permanent, add the following line to /etc/sysctl.conf(5):
kern.shminfo.shmall=32768

a66 1
# echo 'kern.shminfo.shmall=32768' >> /etc/sysctl.conf
@


1.17
log
@Better "Cheat sheet".
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.16 2013/01/06 10:41:14 ajacoutot Exp $
d51 1
a51 1
features like screen locking will not work properly. To do so, "gdm"
@


1.16
log
@Default limits on OpenBSD are way too low; document that kern.shminfo.shmall
must be bumped.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.15 2012/11/22 17:20:52 ajacoutot Exp $
d75 1
a75 1
# chmod 0666 /dev/drm0
d79 1
@


1.15
log
@Better cheat sheet.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.14 2012/11/14 09:31:21 ajacoutot Exp $
d30 9
d76 1
@


1.14
log
@Talk about /dev/drm0 perms.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.13 2012/10/16 15:49:24 ajacoutot Exp $
d66 3
a68 4
* crw-rw-rw-  1 root  wheel   88,   0 Nov 10 12:43 /dev/drm0
* /etc/rc.conf.local
    multicast_host=YES
    pkg_scripts="${pkg_scripts} dbus_daemon avahi_daemon gdm"
@


1.13
log
@Missed chunk.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.12 2012/10/16 15:46:49 ajacoutot Exp $
d17 13
d66 1
@


1.12
log
@You really should use GDM as well if you use GNOME.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.11 2012/10/10 08:42:18 ajacoutot Exp $
d30 2
a31 1
must be added at the end of "pkg_scripts" in rc.conf.local(8).
@


1.11
log
@Accessibility is available by default now.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.10 2012/07/12 11:58:15 ajacoutot Exp $
d19 3
d26 8
a33 1
Then the following line needs to be added:
d36 1
a36 1
in ~/.xsession when using xdm(1) (X Display Manager login)
d53 2
a54 4
	multicast_host=YES
	pkg_scripts="${pkg_scripts} dbus_daemon avahi_daemon"
* ~.xinitrc | ~.xsession
	exec ${LOCALBASE}/bin/ck-launch-session ${TRUEPREFIX}/bin/gnome-session
@


1.10
log
@Tweak the accessibility section.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.9 2012/07/11 14:43:43 ajacoutot Exp $
d14 2
a15 3
choice to install his favorite applications for daily usage (i.e.
accessibility, development, PIM and office type packages have been left
out on purpose).
a38 12

A note about accessibility
==========================
Dependency on a11y packages is never enforced so to activate a specific
assistive technology that is not included by default, you need to
explicitely install the corresponding package(s):
    * mousetweaks - mouse accessibility enhancements
    * orca - assistive technology for visually impaired

Note that "caribou", the input assistive technology (i.e. virtual
keyboard) is installed automatically with gnome-shell and therefore with
this "gnome" package.
@


1.9
log
@Extend the README for "wondering" users.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.8 2012/07/08 14:43:59 ajacoutot Exp $
d43 3
a45 3
Dependency on a11y packages is never enforced so to activate an
assistive technology you need to explicitely install the corresponding
packages:
@


1.8
log
@Tweak description.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.7 2012/07/08 13:33:21 ajacoutot Exp $
d7 2
d12 5
a16 2
These are focused on standard usage (i.e. accessibility, development
and office type packages are left out on purpose).
d51 9
a59 1
this "gnome" meta-package.
@


1.7
log
@Mention caribou as part of gnome-shell.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.6 2012/07/08 08:51:05 ajacoutot Exp $
d8 1
a8 1
    * gnome, for a base GNOME installation
d10 2
a11 2
They are focused on standard usage (i.e. accessibility, development, and
office type packages are left out on purpose).
@


1.6
log
@Fancy up the Desktop.
discussed with jasper@@
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.5 2012/02/23 09:22:06 ajacoutot Exp $
a40 1
    * caribou - input assistive technology (i.e. virtual keyboard)
d43 4
@


1.5
log
@gnome-extras can refer to some old GNOME2 components, so rename -extras
to -extra.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.4 2012/01/02 16:07:40 ajacoutot Exp $
d41 1
@


1.4
log
@gnome-session(1) takes care of setting proper limits now.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.3 2012/01/01 09:02:47 ajacoutot Exp $
d9 1
a9 1
    * gnome-extras, for a full GNOME installation
@


1.3
log
@Tweak README after recent monitoring changes.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.2 2011/12/29 12:29:15 ajacoutot Exp $
a22 12

Default limits
==============
GNOME can be hungry on file descriptors due to kqueue(2) based file
monitoring, usage of the webkit toolkit... While not mandatory, it is
advised to bump the "openfiles" limit up to 512.
More info is available in the README of the glib2 package under
    ${LOCALBASE}/share/doc/pkg-readmes

An alternative solution to using login.conf(5) and users class is to add
the following line before gnome-session(1) is called:
    ulimit -Sn 512
@


1.2
log
@Let's face reality and advise uses to bump their soft nofiles limits;
128 is just not coping anymore.
@
text
@d1 1
a1 1
$OpenBSD: README-main,v 1.1.1.1 2011/11/12 16:40:47 ajacoutot Exp $
d26 8
a33 4
GNOME can be hungry on file descriptors usage because of the kqueue(2)
based file monitoring. While not mandatory, it is advised to bump
"nofiles" up to 512. To do so, the following line needs to be added
before gnome-session(1) is called:
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d23 8
@


1.1.1.1
log
@Import gnome-3.2.1.

The GNOME desktop is composed of 2 meta-packages:
    * gnome, for a base GNOME installation
    * gnome-extras, for a full GNOME installation

ok jasper@@ robert@@
@
text
@@
