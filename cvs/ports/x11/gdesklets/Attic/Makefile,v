head	1.31;
access;
symbols
	OPENBSD_5_3:1.28.0.4
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.28.0.2
	OPENBSD_5_2_BASE:1.28
	OPENBSD_5_1_BASE:1.27
	OPENBSD_5_1:1.27.0.2
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.22.0.2
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.16.0.2
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	bernd_2008-feb-19:1.1.1.1
	bernd:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2013.03.27.08.48.24;	author ajacoutot;	state dead;
branches;
next	1.30;

1.30
date	2013.03.21.08.48.56;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.11.11.46.09;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2012.06.15.08.30.18;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2011.12.03.23.20.53;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2011.09.16.12.29.13;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2011.08.18.19.45.49;	author naddy;	state Exp;
branches;
next	1.24;

1.24
date	2011.06.08.17.37.07;	author rpointel;	state Exp;
branches;
next	1.23;

1.23
date	2011.04.20.15.25.47;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.22.08.36.56;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.11.15.18.30.38;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.19.08.13.56;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.11.08.19.58;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2010.09.28.08.51.20;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2010.08.30.21.47.46;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2010.07.30.11.29.44;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.07.30.06.58.58;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.12.21.20.46.01;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.10.13.20.50.53;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.08.11.08.42.07;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.04.26.11.01.05;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.03.14.11.36.25;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.03.14.10.40.52;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.01.31.13.01.26;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2008.12.21.10.36.30;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2008.12.19.10.04.16;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.11.18.13.42.55;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2008.04.17.10.25.31;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.19.16.14.18;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.19.14.21.25;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2008.02.19.08.46.52;	author bernd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.02.19.08.46.52;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.31
log
@Remove gdesklets; it depends on *very* outdated and unmaintained
GNOME 2 libs which are about to be removed.

Jasper sent a mail on ports a long time ago that this port was about to
be removed and no one seemed to be sad about it...

ok jasper@@
@
text
@# $OpenBSD: Makefile,v 1.30 2013/03/21 08:48:56 ajacoutot Exp $

SHARED_ONLY=		Yes

COMMENT=		mini programs for your desktop

V=			0.36.3
DISTNAME=		gdesklets-${V}
REVISION=		3

EXTRACT_SUFX=		.tar.bz2

CATEGORIES=		x11

HOMEPAGE=		http://gdesklets.de/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${HOMEPAGE}files/

MODULES=		devel/gettext \
			lang/python \
			textproc/intltool

WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender atk-1.0 cairo croco-0.6 \
		expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 rsvg-2 \
		gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 \
		gtk-x11-2.0 kvm m pango-1.0 pangocairo-1.0 ffi gtop-2.0 \
		pangoft2-1.0 pcre pixman-1 png xml2 z pthread-stubs xcb \
		gthread-2.0 xcb-render GL Xxf86vm drm xcb-shm

LIB_DEPENDS=		devel/libgtop2 \
			x11/gnome/librsvg

BUILD_DEPENDS=		${RUN_DEPENDS} \
			${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS} \
			devel/libtool

RUN_DEPENDS=		devel/desktop-file-utils \
			misc/shared-mime-info \
			x11/gnome/py-gnome \
			x11/gtk+2,-guic

USE_GMAKE=		Yes
LIBTOOL_FLAGS=		--tag=disable-static

AUTOCONF_VERSION=	2.62
AUTOMAKE_VERSION=	1.9

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--disable-static

MODPY_ADJ_FILES=contrib/gdesklets-migration-tool \
		ctrlinfo \
		gdesklets \
		gdesklets-daemon \
		gdesklets-logview \
		gdesklets-shell \
		test-control.py

FAKE_FLAGS=	autostartdir=${PREFIX}/share/examples/gdesklets/xdg/autostart/

pre-configure:
	cd ${WRKSRC} && ${SETENV} AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} autoreconf -s -i

post-install:
	${MODPY_BIN} ${MODPY_LIBDIR}/compileall.py ${PREFIX}/lib/gdesklets

.include <bsd.port.mk>
@


1.30
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/11 11:46:09 espie Exp $
@


1.29
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/06/15 08:30:18 ajacoutot Exp $
a47 1
USE_LIBTOOL=		Yes
@


1.28
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/12/03 23:20:53 ajacoutot Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.27
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/09/16 12:29:13 espie Exp $
d9 1
a9 1
REVISION=		2
@


1.26
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/08/18 19:45:49 naddy Exp $
d9 1
a9 1
REVISION=		1
d47 2
a48 1
			x11/gnome/py-gnome
@


1.25
log
@autoreconf calls libtoolize, so require devel/libtool at build time
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/06/08 17:37:07 rpointel Exp $
d9 1
a9 1
REVISION=		0
@


1.24
log
@bump after default python version switch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/04/20 15:25:47 ajacoutot Exp $
d42 2
a43 1
			${MODGNU_AUTOMAKE_DEPENDS}
@


1.23
log
@Update to gdesklets-0.36.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/22 08:36:56 espie Exp $
d9 1
@


1.22
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/11/15 18:30:38 ajacoutot Exp $
d7 1
a7 1
V=			0.36.1
d9 2
a10 1
REVISION=		9
d14 1
a14 1
HOMEPAGE=		http://www.gdesklets.de/
a23 2
WRKDIST=		${WRKDIR}/gDesklets-${V}

d40 3
a42 1
			textproc/rarian
d50 3
a52 1
USE_GROFF =		Yes
d60 16
a75 5
post-extract:
.for _prog in ctrlinfo gdesklets gdesklets-daemon gdesklets-logview \
	      gdesklets-migration-tool gdesklets-shell test-control.py
	@@perl -pi -e "s|/usr/bin/env python|${MODPY_BIN}|g" ${WRKSRC}/${_prog}
.endfor
@


1.21
log
@Unbreak usage with python 2.6.
(patch from Fedora)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/19 08:13:56 espie Exp $
d37 2
a38 2
LIB_DEPENDS=		::devel/libgtop2 \
			::x11/gnome/librsvg
d41 4
a44 4
			::textproc/rarian
RUN_DEPENDS=		::devel/desktop-file-utils \
			::misc/shared-mime-info \
			::x11/gnome/py-gnome
d49 1
a49 1
USE_GROFF =	Yes
@


1.20
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/11 08:19:58 jasper Exp $
d9 1
a9 1
REVISION=		8
d35 1
a35 1
		gthread-2.0 xcb-render xcb-render-util
@


1.19
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/09/28 08:51:20 landry Exp $
d49 1
@


1.18
log
@Fix WANTLIB after librsvg update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/08/30 21:47:46 sthen Exp $
d9 1
a9 1
REVISION=		7
d32 1
a32 1
		gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 \
@


1.17
log
@bumps for python
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/07/30 11:29:44 ajacoutot Exp $
d9 1
a9 1
REVISION=		6
d30 1
a30 1
		Xi Xinerama Xrandr Xrender atk-1.0 bz2 cairo croco-0.6 \
d32 1
a32 1
		gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 gsf-1 \
d34 2
a35 1
		pangoft2-1.0 pcre pixman-1 png xml2 z pthread-stubs xcb
@


1.16
log
@New style DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/07/30 06:58:58 ajacoutot Exp $
d9 1
a9 1
REVISION=		5
@


1.15
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/12/21 20:46:01 ajacoutot Exp $
d31 1
a31 1
		expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 \
d33 1
a33 1
		gtk-x11-2.0 kvm m pango-1.0 pangocairo-1.0 ffi \
d36 2
a37 2
LIB_DEPENDS=		gtop-2.0::devel/libgtop2 \
			rsvg-2::x11/gnome/librsvg
@


1.14
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/10/13 20:50:53 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p5
@


1.13
log
@Regen WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/08/11 08:42:07 ajacoutot Exp $
d9 2
a10 1
PKGNAME=		${DISTNAME}p4
@


1.12
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/04/26 11:01:05 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p3
d32 1
a32 1
		gtk-x11-2.0 kvm m pango-1.0 pangocairo-1.0 \
@


1.11
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/03/14 11:36:25 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p2
d33 1
a33 1
		pangoft2-1.0 pcre pixman-1 png xml2 z
@


1.10
log
@- nothing should have to run_depends on rarian anymore
- explicitely add build_depends on rarian where gnome-doc-utils is also a
build dependency as it does not itself run_depends on rarian anymore

This was the 2nd and hopefully last pass of rarian/scrollkeeper cleaning.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/03/14 10:40:52 ajacoutot Exp $
d50 1
a50 2
			LDFLAGS="-L${LOCALBASE}/lib" \
			PYTHON="${MODPY_BIN}"
@


1.9
log
@- first pass at cleaning rarian/scrollkeeper handling
remove rarian-sk-update from PLIST ; it is only a wrapper that does
noting: librarian takes care of everything now.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/01/31 13:01:26 jasper Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
d38 2
a39 1
BUILD_DEPENDS=		${RUN_DEPENDS}
d42 1
a42 2
			::x11/gnome/py-gnome \
			::textproc/rarian
@


1.8
log
@- make the trayer icon work in gnome-panel

"great!" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/12/21 10:36:30 ajacoutot Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
@


1.7
log
@- update to gdesklets-0.36.1
several sample desklets are now installed by default

ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/12/19 10:04:16 ajacoutot Exp $
d9 1
@


1.6
log
@- scrollkeeper -> rarian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/11/18 13:42:55 landry Exp $
d7 2
a8 2
DISTNAME=		gDesklets-0.35.4
PKGNAME=		${DISTNAME:L}p4
a19 1
EXTRACT_SUFX=		.tar.bz2
d21 1
a21 1
MODULES=		devel/gettext lang/python textproc/intltool
d23 10
a32 10
WANTLIB=		ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xcomposite \
			Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr \
			Xrender art_lgpl_2 atk-1.0 audiofile bonobo-2 \
			bonobo-activation bonoboui-2 bz2 cairo croco-0.6 \
			crypto dbus-1 dbus-glib-1 esd expat fontconfig \
			freetype gailutil gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 \
			gio-2.0 glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring \
			gnomecanvas-2 gnomevfs-2 gobject-2.0 gsf-1 gthread-2.0 \
			gtk-x11-2.0 jpeg kvm m pango-1.0 pangocairo-1.0 \
			pangoft2-1.0 pcre pixman-1 png popt ssl util xml2 z
d34 1
a34 2
LIB_DEPENDS=		gnomeui-2::x11/gnome/libgnomeui \
			gtop-2.0::devel/libgtop2 \
d45 1
d51 2
@


1.5
log
@Fix after no_gnome FLAVOR removal in x11/gnome/librsvg.
While here fix WANTLIB and bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/04/17 10:25:31 ajacoutot Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME:L}p3
d42 2
a43 1
			::x11/gnome/py-gnome
@


1.4
log
@- gtk-update-icon-cache consistency; I missed those in previous commit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/02/19 16:14:18 ajacoutot Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME:L}p2
d30 1
a30 1
			glib-2.0 glitz gmodule-2.0 gnome-2 gnome-keyring \
d33 1
a33 1
			pangoft2-1.0 pcre png popt ssl util xml2 z
d37 1
a37 1
			rsvg-2:librsvg-*-!no_gnome:x11/gnome/librsvg
@


1.3
log
@- gtk-update-icon-cache goo

"go ahead" bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/02/19 14:21:25 bernd Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME:L}p1
@


1.2
log
@Add missing depends. Noticed by viq. Thank you!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/02/19 08:46:52 bernd Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME:L}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
PKGNAME=		${DISTNAME:L}
d41 2
a42 1
			::misc/shared-mime-info
@


1.1.1.1
log
@Initial import of gdesklets-0.35.4.

gDesklets is a system for bringing mini programs (desklets), such as
weather forecasts, news tickers, system information displays, or music
player controls, onto your desktop, where they are sitting there in a
symbiotic relationship of eye candy and usefulness. The possibilities
are really endless and they are always there to serve you whenever you
need them, just one key-press away. The system is not restricted to
one desktop environment, but currently works on most of the modern
Unix desktops (including GNOME, KDE, Xfce).

Lots of help and okay jasper@@. Thanks!
@
text
@@
