head	1.147;
access;
symbols
	OPENBSD_6_1:1.147.0.2
	OPENBSD_6_1_BASE:1.147
	OPENBSD_6_0:1.142.0.2
	OPENBSD_6_0_BASE:1.142
	OPENBSD_5_9:1.137.0.2
	OPENBSD_5_9_BASE:1.137
	OPENBSD_5_8:1.132.0.4
	OPENBSD_5_8_BASE:1.132
	OPENBSD_5_7:1.129.0.4
	OPENBSD_5_7_BASE:1.129
	OPENBSD_5_6:1.129.0.2
	OPENBSD_5_6_BASE:1.129
	OPENBSD_5_5:1.127.0.2
	OPENBSD_5_5_BASE:1.127
	OPENBSD_5_4:1.118.0.2
	OPENBSD_5_4_BASE:1.118
	OPENBSD_5_3:1.115.0.2
	OPENBSD_5_3_BASE:1.115
	OPENBSD_5_2:1.108.0.2
	OPENBSD_5_2_BASE:1.108
	OPENBSD_5_1_BASE:1.106
	OPENBSD_5_1:1.106.0.2
	OPENBSD_5_0:1.103.0.2
	OPENBSD_5_0_BASE:1.103
	OPENBSD_4_9:1.101.0.2
	OPENBSD_4_9_BASE:1.101
	OPENBSD_4_8:1.99.0.2
	OPENBSD_4_8_BASE:1.99
	OPENBSD_4_7:1.94.0.2
	OPENBSD_4_7_BASE:1.94
	OPENBSD_4_6:1.89.0.2
	OPENBSD_4_6_BASE:1.89
	OPENBSD_4_5:1.87.0.2
	OPENBSD_4_5_BASE:1.87
	OPENBSD_4_4:1.85.0.2
	OPENBSD_4_4_BASE:1.85
	OPENBSD_4_3:1.83.0.2
	OPENBSD_4_3_BASE:1.83
	OPENBSD_4_2:1.75.0.2
	OPENBSD_4_2_BASE:1.75
	OPENBSD_4_1:1.71.0.2
	OPENBSD_4_1_BASE:1.71
	OPENBSD_4_0:1.63.0.2
	OPENBSD_4_0_BASE:1.63
	OPENBSD_3_9:1.58.0.2
	OPENBSD_3_9_BASE:1.58
	OPENBSD_3_8:1.44.0.2
	OPENBSD_3_8_BASE:1.44
	OPENBSD_3_7:1.38.0.2
	OPENBSD_3_7_BASE:1.38
	OPENBSD_3_6:1.30.0.2
	OPENBSD_3_6_BASE:1.30
	OPENBSD_3_5:1.28.0.2
	OPENBSD_3_5_BASE:1.28
	OPENBSD_3_4:1.23.0.2
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.18.0.2
	OPENBSD_3_3_BASE:1.18
	OPENBSD_3_2:1.10.0.2
	OPENBSD_3_2_BASE:1.10
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	espie:1.1.1.1
	kde:1.1.1;
locks; strict;
comment	@# @;


1.147
date	2017.02.19.14.43.49;	author ajacoutot;	state Exp;
branches;
next	1.146;
commitid	jyPxpI44E8W5VufM;

1.146
date	2017.02.18.17.33.52;	author ajacoutot;	state Exp;
branches;
next	1.145;
commitid	kjw4RQ4AAUYktD89;

1.145
date	2017.02.18.17.32.38;	author ajacoutot;	state Exp;
branches;
next	1.144;
commitid	bw6Y0vDo3oixdVWL;

1.144
date	2017.01.11.13.32.11;	author zhuk;	state Exp;
branches;
next	1.143;
commitid	shnhV8kBGFphyT2B;

1.143
date	2016.11.10.12.50.35;	author jca;	state Exp;
branches;
next	1.142;
commitid	jzmCXrxq9W9tH1PC;

1.142
date	2016.07.17.21.00.16;	author zhuk;	state Exp;
branches;
next	1.141;
commitid	QpxAo8621KSOScVs;

1.141
date	2016.07.09.09.09.09;	author sthen;	state Exp;
branches;
next	1.140;
commitid	6UTy3AiMgjyDIiRL;

1.140
date	2016.04.24.00.35.10;	author jca;	state Exp;
branches;
next	1.139;
commitid	cx4xi7GTyHhiNG1D;

1.139
date	2016.04.22.11.49.43;	author jca;	state Exp;
branches;
next	1.138;
commitid	wXkAvyVyXZhqIto4;

1.138
date	2016.04.12.17.43.31;	author jca;	state Exp;
branches;
next	1.137;
commitid	iREnKMY54jJNswWo;

1.137
date	2016.01.18.23.42.53;	author sthen;	state Exp;
branches
	1.137.2.1;
next	1.136;
commitid	QUUYcsrv4JTppg1O;

1.136
date	2016.01.17.17.29.11;	author sthen;	state Exp;
branches;
next	1.135;
commitid	bS2FIbTCCkF3XjOq;

1.135
date	2016.01.06.09.48.59;	author jasper;	state Exp;
branches;
next	1.134;
commitid	Kyt8BrXD9TWgTUcI;

1.134
date	2015.08.29.15.39.55;	author zhuk;	state Exp;
branches;
next	1.133;
commitid	HcvxF77qHELZCWpF;

1.133
date	2015.08.25.11.04.39;	author jca;	state Exp;
branches;
next	1.132;
commitid	jWHBCzKs5xKamlhw;

1.132
date	2015.07.07.14.49.50;	author ajacoutot;	state Exp;
branches;
next	1.131;
commitid	p4HYSoWsXZeZu0Id;

1.131
date	2015.04.04.09.21.08;	author ajacoutot;	state Exp;
branches;
next	1.130;
commitid	kS3kwKZogsvzYmEY;

1.130
date	2015.03.27.08.16.18;	author ajacoutot;	state Exp;
branches;
next	1.129;
commitid	BUhOiEl2FUSRKwq7;

1.129
date	2014.04.29.22.09.43;	author zhuk;	state Exp;
branches;
next	1.128;

1.128
date	2014.04.21.20.43.51;	author sthen;	state Exp;
branches;
next	1.127;

1.127
date	2014.01.11.13.07.59;	author zhuk;	state Exp;
branches;
next	1.126;

1.126
date	2014.01.11.12.15.24;	author zhuk;	state Exp;
branches;
next	1.125;

1.125
date	2014.01.10.08.06.11;	author zhuk;	state Exp;
branches;
next	1.124;

1.124
date	2013.12.22.19.24.34;	author zhuk;	state Exp;
branches;
next	1.123;

1.123
date	2013.11.27.21.42.00;	author kili;	state Exp;
branches;
next	1.122;

1.122
date	2013.11.24.19.56.30;	author zhuk;	state Exp;
branches;
next	1.121;

1.121
date	2013.10.31.21.12.12;	author sthen;	state Exp;
branches;
next	1.120;

1.120
date	2013.10.22.11.33.58;	author zhuk;	state Exp;
branches;
next	1.119;

1.119
date	2013.10.05.07.34.38;	author espie;	state Exp;
branches;
next	1.118;

1.118
date	2013.07.08.14.03.29;	author zhuk;	state Exp;
branches;
next	1.117;

1.117
date	2013.06.20.06.54.38;	author ajacoutot;	state Exp;
branches;
next	1.116;

1.116
date	2013.06.17.19.28.37;	author ajacoutot;	state Exp;
branches;
next	1.115;

1.115
date	2013.01.23.21.10.37;	author zhuk;	state Exp;
branches;
next	1.114;

1.114
date	2013.01.14.12.35.19;	author zhuk;	state Exp;
branches;
next	1.113;

1.113
date	2013.01.12.11.21.10;	author ajacoutot;	state Exp;
branches;
next	1.112;

1.112
date	2012.12.17.18.42.13;	author naddy;	state Exp;
branches;
next	1.111;

1.111
date	2012.11.24.09.08.09;	author sthen;	state Exp;
branches;
next	1.110;

1.110
date	2012.09.23.08.08.49;	author matthieu;	state Exp;
branches;
next	1.109;

1.109
date	2012.09.01.14.37.00;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2012.06.28.18.52.18;	author jasper;	state Exp;
branches;
next	1.107;

1.107
date	2012.06.15.08.30.23;	author ajacoutot;	state Exp;
branches;
next	1.106;

1.106
date	2011.12.03.23.37.39;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2011.11.13.13.54.05;	author ajacoutot;	state Exp;
branches;
next	1.104;

1.104
date	2011.09.16.12.29.15;	author espie;	state Exp;
branches;
next	1.103;

1.103
date	2011.07.06.14.51.19;	author dcoppa;	state Exp;
branches;
next	1.102;

1.102
date	2011.03.21.00.58.19;	author ian;	state Exp;
branches;
next	1.101;

1.101
date	2010.11.22.08.37.02;	author espie;	state Exp;
branches;
next	1.100;

1.100
date	2010.11.07.19.50.10;	author jasper;	state Exp;
branches;
next	1.99;

1.99
date	2010.07.12.20.44.02;	author kili;	state Exp;
branches;
next	1.98;

1.98
date	2010.07.10.12.44.30;	author espie;	state Exp;
branches;
next	1.97;

1.97
date	2010.07.08.21.28.49;	author espie;	state Exp;
branches;
next	1.96;

1.96
date	2010.05.15.08.48.01;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2010.05.13.07.01.00;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2010.01.17.08.58.38;	author espie;	state Exp;
branches
	1.94.2.1;
next	1.93;

1.93
date	2009.12.21.20.46.01;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2009.11.14.16.41.57;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2009.08.27.19.44.38;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2009.08.11.08.40.40;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2009.06.29.15.05.02;	author naddy;	state Exp;
branches;
next	1.88;

1.88
date	2009.03.10.18.31.41;	author espie;	state Exp;
branches;
next	1.87;

1.87
date	2009.01.29.22.28.58;	author jakemsr;	state Exp;
branches;
next	1.86;

1.86
date	2008.08.26.16.52.28;	author espie;	state Exp;
branches;
next	1.85;

1.85
date	2008.07.25.20.28.03;	author kili;	state Exp;
branches;
next	1.84;

1.84
date	2008.03.25.17.34.14;	author espie;	state Exp;
branches;
next	1.83;

1.83
date	2008.01.04.17.48.38;	author espie;	state Exp;
branches;
next	1.82;

1.82
date	2007.12.18.16.00.12;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2007.12.15.23.47.40;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2007.10.24.21.52.16;	author espie;	state Exp;
branches;
next	1.79;

1.79
date	2007.10.06.22.46.04;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2007.10.04.19.00.17;	author jasper;	state Exp;
branches;
next	1.77;

1.77
date	2007.09.15.20.04.21;	author merdely;	state Exp;
branches;
next	1.76;

1.76
date	2007.08.25.08.03.02;	author espie;	state Exp;
branches;
next	1.75;

1.75
date	2007.07.02.06.07.03;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2007.05.25.09.49.54;	author espie;	state Exp;
branches;
next	1.73;

1.73
date	2007.05.09.11.31.43;	author bernd;	state Exp;
branches;
next	1.72;

1.72
date	2007.03.18.21.36.14;	author espie;	state Exp;
branches;
next	1.71;

1.71
date	2007.01.28.13.18.50;	author espie;	state Exp;
branches
	1.71.2.1;
next	1.70;

1.70
date	2006.12.16.12.22.36;	author espie;	state Exp;
branches;
next	1.69;

1.69
date	2006.11.21.08.27.42;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2006.11.20.08.07.40;	author steven;	state Exp;
branches;
next	1.67;

1.67
date	2006.11.11.16.24.41;	author mbalmer;	state Exp;
branches;
next	1.66;

1.66
date	2006.10.28.11.52.13;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2006.10.12.23.12.18;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2006.09.18.12.19.40;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2006.08.03.10.53.36;	author espie;	state Exp;
branches
	1.63.2.1;
next	1.62;

1.62
date	2006.06.15.12.10.30;	author bernd;	state Exp;
branches;
next	1.61;

1.61
date	2006.06.03.12.47.30;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2006.05.14.17.19.23;	author brad;	state Exp;
branches;
next	1.59;

1.59
date	2006.04.01.10.49.19;	author espie;	state Exp;
branches;
next	1.58;

1.58
date	2006.02.18.14.28.48;	author espie;	state Exp;
branches
	1.58.2.1;
next	1.57;

1.57
date	2006.02.18.13.29.36;	author espie;	state Exp;
branches;
next	1.56;

1.56
date	2006.02.18.13.07.02;	author espie;	state Exp;
branches;
next	1.55;

1.55
date	2006.02.18.12.06.50;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2006.02.07.10.26.42;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2006.02.03.12.23.15;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2006.01.13.22.49.55;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2006.01.03.14.49.23;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2005.12.17.11.27.44;	author espie;	state Exp;
branches;
next	1.49;

1.49
date	2005.11.29.14.00.12;	author espie;	state Exp;
branches;
next	1.48;

1.48
date	2005.11.11.11.33.01;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2005.11.03.15.56.57;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2005.10.24.10.56.03;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2005.10.17.11.28.24;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2005.08.16.09.49.53;	author espie;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2005.07.28.08.47.40;	author espie;	state Exp;
branches;
next	1.42;

1.42
date	2005.06.02.14.01.25;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2005.04.03.20.20.52;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2005.03.30.19.25.23;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2005.03.29.21.18.35;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2005.02.27.08.15.40;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	2005.02.07.11.30.05;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2005.01.31.16.58.22;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2004.12.27.22.32.23;	author sturm;	state Exp;
branches;
next	1.34;

1.34
date	2004.12.16.07.25.25;	author alek;	state Exp;
branches;
next	1.33;

1.33
date	2004.12.12.11.33.24;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2004.10.19.00.25.25;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2004.09.18.09.36.43;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2004.07.24.12.47.14;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2004.04.13.04.22.37;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2004.03.07.21.08.43;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2004.02.07.01.46.23;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2004.02.01.22.49.23;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2004.02.01.14.59.22;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2003.12.07.20.19.13;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2003.07.30.12.59.22;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2003.06.12.19.16.15;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2003.04.12.15.37.01;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2003.04.09.23.53.02;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2003.04.05.14.53.38;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2003.01.27.19.22.49;	author espie;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2003.01.10.14.56.27;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2003.01.09.23.48.48;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2003.01.09.17.44.58;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2003.01.07.15.36.35;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2002.12.23.14.22.32;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2002.12.02.16.27.21;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2002.10.28.21.44.32;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2002.09.01.08.25.25;	author espie;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2002.07.16.12.20.42;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2002.05.28.17.18.46;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2002.05.23.14.37.21;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2002.04.10.01.24.39;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2002.04.04.12.13.02;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2002.04.04.09.31.01;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.02.17.06.23;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2002.03.23.15.20.58;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.03.23.15.04.03;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.03.23.15.04.03;	author espie;	state Exp;
branches;
next	;

1.10.2.1
date	2002.12.26.22.28.18;	author pvalchev;	state Exp;
branches;
next	1.10.2.2;

1.10.2.2
date	2003.04.10.18.59.40;	author brad;	state Exp;
branches;
next	;

1.18.2.1
date	2003.05.02.18.49.29;	author naddy;	state Exp;
branches;
next	;

1.44.2.1
date	2006.06.17.20.53.53;	author sturm;	state Exp;
branches;
next	;

1.58.2.1
date	2006.06.17.15.19.15;	author sturm;	state Exp;
branches;
next	;

1.63.2.1
date	2007.09.01.17.51.39;	author ajacoutot;	state Exp;
branches;
next	;

1.71.2.1
date	2007.09.01.17.48.54;	author ajacoutot;	state Exp;
branches;
next	1.71.2.2;

1.71.2.2
date	2007.10.05.12.40.02;	author ajacoutot;	state Exp;
branches;
next	;

1.94.2.1
date	2010.08.03.02.44.33;	author william;	state Exp;
branches;
next	;

1.137.2.1
date	2016.04.17.17.14.18;	author jca;	state Exp;
branches;
next	;
commitid	bWmgz8NYIokOpkfQ;


desc
@@


1.147
log
@First shot at fixing the idn -> idn2 failure after gnutls dependency change.
List provided by naddy@@, thanks!
@
text
@# $OpenBSD: Makefile,v 1.146 2017/02/18 17:33:52 ajacoutot Exp $

COMMENT-main =		K Desktop Environment, basic applications
COMMENT-samba =		K Desktop Environment, samba support
COMMENT-en_US =		K Desktop Environment, en_US locale data
COMMENT-locale =	K Desktop Environment, locale data files
CATEGORIES =		x11 x11/kde
VERSION =		3.5.10
DISTNAME =		kdebase-${VERSION}
PKGNAME-main =		${DISTNAME}
PKGNAME-samba =		kdesamba-${VERSION}
PKGNAME-en_US =		kde3-locale-en_US-${VERSION}
PKGNAME-locale =	kde3-locale-${VERSION}
PKG_ARCH-en_US =	*
PKG_ARCH-locale =	*
REVISION-main =		45
REVISION-samba =	23
REVISION-en_US =	4
REVISION-locale =	3

MODKDE_VERSION =	3.5.8

SHARED_LIBS +=	konq                 7.0      # .6.0
SHARED_LIBS +=	kateutils            1.0      # .0.0
SHARED_LIBS +=	kateinterfaces       1.0      # .0.0
SHARED_LIBS +=	khotkeys_shared      2.0      # .1.0
SHARED_LIBS +=	ksplashthemes        1.0      # .0.0
SHARED_LIBS +=	ksgrd                4.0      # .3.0
SHARED_LIBS +=	kdecorations         2.0      # .1.0
SHARED_LIBS +=	konqsidebarplugin    4.0      # .3.0
SHARED_LIBS +=	kickermain           2.0      # .1.0
SHARED_LIBS +=	taskmanager          2.0      # .1.0
SHARED_LIBS +=	taskbar              4.0      # .3.0
SHARED_LIBS +=	kasbar               2.0      # .1.0
SHARED_LIBS +=	kfontinst            1.0      # .0.0

MULTI_PACKAGES =	-main -samba -en_US -locale

MODULES =		x11/kde devel/gettext

BUILD_DEPENDS =		devel/imake

RUN_DEPENDS-en_US =
RUN_DEPENDS-locale =
RUN_DEPENDS-main =	${RUN_DEPENDS} \
			kde3-locale-en_US-*|kde4-locale-en_US-*:${BUILD_PKGPATH},-en_US \
			kde3-locale-*|kde4-locale-*:${BUILD_PKGPATH},-locale \
			devel/desktop-file-utils \
			x11/gtk+3,-guic \
			x11/kde-shared-data

# ${FILESDIR}/kdesurc
RUN_DEPENDS-main +=	security/sudo

LIB_DEPENDS =		openldap-client->=2,<3:databases/openldap \
			security/cyrus-sasl2
LIB_DEPENDS-en_US =
LIB_DEPENDS-locale =
LIB_DEPENDS-main =	${LIB_DEPENDS} \
			x11/kde/libs3 \
			devel/libidn2 \
			devel/libusb-compat \
			devel/glib2
LIB_DEPENDS-samba =	${LIB_DEPENDS} \
			x11/kde/libs3 \
			net/samba,-main

WANTLIB =  crypto expat m pthread pthread-stubs ssl stdc++ util z
WANTLIB += ICE SM X11 Xext Xfixes Xrender Xt freetype fontconfig xcb
WANTLIB += ${KDE}/DCOP ${KDE}/kdecore>=6 ${KDE}/kdefx ${KDE}/kdesu
WANTLIB += ${KDE}/kdeui ${KDE}/kio ${KDE}/kwalletclient
WANTLIB += art_lgpl_2 fam idn2 lber-2.4 ldap-2.4 png sasl2

WANTLIB-main =  ${WANTLIB} c sndio IexMath
WANTLIB-main += GL GLU Half Iex IlmImf IlmThread Imath Xau Xcomposite
WANTLIB-main += Xcursor Xdamage Xdmcp Xfixes Xft Xi Xinerama Xmu
WANTLIB-main += Xrandr Xss Xtst Xxf86misc Xxf86vm X11-xcb drm
WANTLIB-main += glapi xcb-dri2 xcb-glx xkbfile
WANTLIB-main += ${KDE}/artsflow ${KDE}/artsflow_idl ${KDE}/artskde
WANTLIB-main += ${KDE}/kabc ${KDE}/katepartinterfaces ${KDE}/kdefakes
WANTLIB-main += ${KDE}/kdeprint ${KDE}/kdeprint_management
WANTLIB-main += ${KDE}/kdnssd ${KDE}/khtml ${KDE}/kjs
WANTLIB-main += ${KDE}/kmedia2_idl ${KDE}/kmid ${KDE}/knewstuff
WANTLIB-main += ${KDE}/kparts ${KDE}/kresources ${KDE}/kscreensaver
WANTLIB-main += ${KDE}/soundserver_idl ${KDE}/ktexteditor ${KDE}/kutils
WANTLIB-main += ${KDE}/vcard
WANTLIB-main += FLAC audiofile avahi-client avahi-common dbus-1 dns_sd
WANTLIB-main += glib-2.0 gmodule-2.0 gthread-2.0 jpeg lcms mad mcop mng
WANTLIB-main += ogg pcre pcreposix qtmcop usb usb-1.0 vorbis vorbisenc
WANTLIB-main += vorbisfile

WANTLIB-samba =  ${WANTLIB}
WANTLIB-samba += execinfo ndr ndr-standard replace samba-hostconfig
WANTLIB-samba += samba-util smbclient smbconf talloc tdb tevent
WANTLIB-samba += tevent-util samba-errors util-setid
WANTLIB-samba += X11-xcb Xdamage Xxf86vm dcerpc-binding drm
WANTLIB-samba += ffi glapi gmp gnutls hogweed
WANTLIB-samba += ldb ndr-krb5pac ndr-nbt nettle p11-kit samba-credentials
WANTLIB-samba += samdb tasn1 wbclient xcb-dri2 xcb-glx
WANTLIB-samba += lib/samba/asn1-samba4 lib/samba/gssapi-samba4
WANTLIB-samba += lib/samba/hcrypto-samba4 lib/samba/heimbase-samba4
WANTLIB-samba += lib/samba/hx509-samba4 lib/samba/krb5-samba4
WANTLIB-samba += lib/samba/roken-samba4 lib/samba/wind-samba4

WANTLIB-en_US =
WANTLIB-locale =

CONFIGURE_ENV +=	CPPFLAGS="`pkg-config --cflags smbclient`"

SEPARATE_BUILD =	flavored
SUBST_VARS =		PREFIX

post-extract:
	cp ${FILESDIR}/checkpass_bsd.c ${WRKSRC}/kcheckpass

post-install:
	${INSTALL_DATA} ${FILESDIR}/kdesurc ${PREFIX}/${MODKDE_CONFIG_SUBDIR}
	${INSTALL_DATA_DIR} ${PREFIX}/${MODKDE_HTML_SUBDIR}/en/common
	rm -R ${PREFIX}/share/desktop-directories
	find ${PREFIX}/share/icons -name 'knetattach*' | xargs rm

.include <bsd.port.mk>
@


1.146
log
@Missed bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2017/02/18 17:32:38 ajacoutot Exp $
d18 1
a18 1
REVISION-en_US =	3
d61 1
@


1.145
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2017/01/11 13:32:11 zhuk Exp $
d16 4
a19 4
REVISION-main =		44
REVISION-samba =	22
REVISION-en_US =	2
REVISION-locale =	2
@


1.144
log
@Pass NULL instead of forcing "passwd" in auth_userokay(3). The latter
won't run interactive auth styles anyway, and focing "passwd" breaks for
users willing to use other styles without fallback to "passwd".

Same as the patch already went in for KDE4 sent by Daniele Mazzocchio.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2016/11/10 12:50:35 jca Exp $
d71 1
a71 1
WANTLIB += art_lgpl_2 fam idn lber-2.4 ldap-2.4 png sasl2
@


1.143
log
@Unbreak after the tevent-unix-util removal.

Spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2016/07/17 21:00:16 zhuk Exp $
d16 1
a16 1
REVISION-main =		43
@


1.142
log
@Move KDE3's KDM and kcheckpass to BSD authentication.

This effectively unbreaks KDE3 after recent changes in getpw* land,
same way as it was done for KDE4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2016/07/09 09:09:09 sthen Exp $
d17 1
a17 1
REVISION-samba =	21
d94 1
a94 1
WANTLIB-samba += tevent-util samba-errors tevent-unix-util util-setid
@


1.141
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2016/04/24 00:35:10 jca Exp $
d16 1
a16 1
REVISION-main =		42
d111 3
@


1.140
log
@net/samba doesn't bring libcom_err anymore; spotted by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2016/04/22 11:49:43 jca Exp $
d17 1
a17 1
REVISION-samba =	20
d94 1
a94 1
WANTLIB-samba += tevent-util
d96 1
a96 1
WANTLIB-samba += ffi gcrypt glapi gmp gnutls gpg-error hogweed
@


1.139
log
@Sync WANTLIB after net/samba update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2016/04/12 17:43:31 jca Exp $
d17 1
a17 1
REVISION-samba =	19
d95 1
a95 1
WANTLIB-samba += X11-xcb Xdamage Xxf86vm com_err dcerpc-binding drm
@


1.138
log
@Strip unavailable samba libs from WANTLIB; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2016/01/18 23:42:53 sthen Exp $
d17 1
a17 1
REVISION-samba =	18
d96 1
a96 1
WANTLIB-samba += ffi gcrypt gensec glapi gmp gnutls gpg-error hogweed
@


1.137
log
@typo; Iexmath->IexMath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2016/01/17 17:29:11 sthen Exp $
d17 1
a17 1
REVISION-samba =	17
d92 3
a94 3
WANTLIB-samba += execinfo ndr ndr-standard nss_wrapper replace samba-hostconfig
WANTLIB-samba += samba-util smbclient smbconf socket_wrapper talloc tdb tevent
WANTLIB-samba += tevent-util uid_wrapper util_setid
d97 1
a97 1
WANTLIB-samba += ldb ndr-krb5pac ndr-nbt nettle ntdb p11-kit samba-credentials
@


1.137.2.1
log
@Sync with recent net/samba update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2016/01/18 23:42:53 sthen Exp $
d17 1
a17 1
REVISION-samba =	18
d92 3
a94 3
WANTLIB-samba += execinfo ndr ndr-standard replace samba-hostconfig
WANTLIB-samba += samba-util smbclient smbconf talloc tdb tevent
WANTLIB-samba += tevent-util util-setid
d97 1
a97 1
WANTLIB-samba += ldb ndr-krb5pac ndr-nbt nettle p11-kit samba-credentials
@


1.136
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2016/01/06 09:48:59 jasper Exp $
d73 1
a73 1
WANTLIB-main =  ${WANTLIB} c sndio Iexmath
@


1.135
log
@hookup missing README; ok zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2015/08/29 15:39:55 zhuk Exp $
d16 2
a17 2
REVISION-main =		41
REVISION-samba =	16
d65 1
a65 1
			net/samba
d73 1
a73 1
WANTLIB-main =  ${WANTLIB} c sndio
d95 8
@


1.134
log
@Follow SSLv3 removal: the SSLv2_client_method() was already changed to
SSLv3_client_method() some time ago; tweak it to SSLv23_client_method()
now, as it probably should be done already.

Reminded by jca@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2015/08/25 11:04:39 jca Exp $
d16 1
a16 1
REVISION-main =		40
@


1.133
log
@Move samba4 to samba, and tweak the ports tree to use it.

ok ajacoutot@@

Upcoming commits will add additional tweaks.

Many thanks to Vadim Zhukov (who did most of the work), Ian McWilliam
(co-maintainer), Stuart Henderson who provided lots of support and
feedback, Antoine Jacoutot who patiently dealt with my broken diffs,
and more generally all the people involved.  Most of the recent work was
done during p2k15 and c2k15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2015/07/07 14:49:50 ajacoutot Exp $
d16 1
a16 1
REVISION-main =		39
@


1.132
log
@Our default super-user-command defaults to sudo, so depend on it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2015/04/04 09:21:08 ajacoutot Exp $
d17 1
a17 1
REVISION-samba =	15
d65 1
a65 1
			net/samba>=3
d91 4
a94 2
WANTLIB-samba =  ${WANTLIB} execinfo
WANTLIB-samba += lib/samba/smbclient talloc tdb lib/samba/wbclient
d98 2
@


1.131
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2015/03/27 08:16:18 ajacoutot Exp $
d16 1
a16 1
REVISION-main =		38
d51 3
@


1.130
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2014/04/29 22:09:43 zhuk Exp $
d16 4
a19 4
REVISION-main =		37
REVISION-samba =	14
REVISION-en_US =	1
REVISION-locale =	1
@


1.129
log
@Fix LIB_DEPENDS; unify WANTLIB with other KDE ports while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2014/04/21 20:43:51 sthen Exp $
d16 4
a19 4
REVISION-main =		36
REVISION-samba =	13
REVISION-en_US =	0
REVISION-locale =	0
d49 1
a49 1
			x11/gtk+2,-guic \
@


1.128
log
@sync wantlib; kerb
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2014/01/11 13:07:59 zhuk Exp $
d16 2
a17 2
REVISION-main =		35
REVISION-samba =	12
d52 2
a57 2
			openldap-client->=2,<3:databases/openldap \
			security/cyrus-sasl2 \
d64 23
a86 21
WANTLIB = ICE SM X11 Xext Xrender art_lgpl_2 idn \
	lib/kde3/DCOP lib/kde3/kdecore>=6 lib/kde3/kdefx lib/kde3/kdesu \
	lib/kde3/kdeui lib/kde3/kio lib/kde3/kwalletclient m png \
	stdc++ util xcb z fam pthread-stubs

WANTLIB-main = ${WANTLIB}
WANTLIB-main += FLAC GL GLU Half Iex IlmImf IlmThread Imath X11-xcb
WANTLIB-main += Xau Xcomposite Xcursor Xdamage Xdmcp Xfixes Xft Xi
WANTLIB-main += Xinerama Xmu Xrandr Xss Xt Xtst Xxf86misc Xxf86vm audiofile
WANTLIB-main += avahi-client avahi-common c crypto dbus-1 dns_sd drm
WANTLIB-main += expat fontconfig freetype glapi glib-2.0 gmodule-2.0
WANTLIB-main += gthread-2.0 jpeg lber-2.4 lcms ldap-2.4 mad mcop mng
WANTLIB-main += ogg pcre pcreposix pthread qtmcop sasl2 sndio soundserver_idl
WANTLIB-main += ssl usb usb-1.0 vcard vorbis vorbisenc vorbisfile xcb-dri2
WANTLIB-main += xcb-glx xkbfile
WANTLIB-main += lib/kde3/artsflow lib/kde3/artsflow_idl lib/kde3/artskde
WANTLIB-main += lib/kde3/kabc lib/kde3/katepartinterfaces lib/kde3/kdefakes
WANTLIB-main += lib/kde3/kdeprint lib/kde3/kdeprint_management lib/kde3/kdnssd
WANTLIB-main += lib/kde3/khtml lib/kde3/kjs lib/kde3/kmedia2_idl lib/kde3/kmid
WANTLIB-main += lib/kde3/knewstuff lib/kde3/kparts lib/kde3/kresources
WANTLIB-main += lib/kde3/kscreensaver lib/kde3/ktexteditor lib/kde3/kutils
d88 2
a89 2
WANTLIB-samba = ${WANTLIB} execinfo lib/samba/smbclient pthread talloc tdb \
	lib/samba/wbclient Xfixes Xt expat fontconfig freetype
@


1.127
log
@Do not hardcode /usr/local in README, noted by ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2014/01/11 12:15:24 zhuk Exp $
d3 1
a3 1
COMMENT-main = 		K Desktop Environment, basic applications
d16 1
a16 1
REVISION-main =		34
d41 1
a41 1
BUILD_DEPENDS = 	devel/imake
d69 16
a84 14
WANTLIB-main = ${WANTLIB} GL GLU Half Iex IlmImf IlmThread Imath Xcomposite \
	Xcursor Xdamage Xdamage Xfixes Xfixes Xft Xi Xinerama Xmu Xrandr Xss \
	Xt Xtst Xxf86misc Xxf86vm Xxf86vm asn1 audiofile c com_err crypto drm \
	drm expat fontconfig freetype glib-2.0 gmodule-2.0 gssapi gthread-2.0 \
	krb5 lib/kde3/artsflow lib/kde3/artsflow_idl lber-2.4 lcms ldap-2.4 usb-1.0 \
	lib/kde3/artskde lib/kde3/kabc lib/kde3/katepartinterfaces \
	lib/kde3/kdefakes lib/kde3/kdeprint lib/kde3/kdeprint_management \
	lib/kde3/kdnssd lib/kde3/khtml lib/kde3/kjs lib/kde3/kmedia2_idl \
	lib/kde3/kmid lib/kde3/knewstuff lib/kde3/kparts lib/kde3/kresources \
	lib/kde3/kscreensaver lib/kde3/ktexteditor lib/kde3/kutils mad mcop \
	mng ogg pcre pcreposix pthread qtmcop sasl2 sndio soundserver_idl ssl \
	usb vcard vorbis vorbisenc vorbisfile xkbfile Xau Xdmcp jpeg \
	FLAC avahi-client avahi-common dbus-1 dns_sd heimbase \
	roken wind
@


1.126
log
@Small tweaks:
  * zap extra whitespace in DESCR-*;
  * move part of DESCR-main to README-main;
  * remove stuff belonging to kde-shared-data (missed in previous commit).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2014/01/10 08:06:11 zhuk Exp $
d16 1
a16 1
REVISION-main =		33
d91 1
@


1.125
log
@Make kdebase-3.x use recently imported kde-shared-data.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2013/12/22 19:24:34 zhuk Exp $
d16 2
a17 2
REVISION-main =		32
REVISION-samba =	11
d85 1
a85 1
	wbclient Xfixes Xt expat fontconfig freetype
d95 2
@


1.124
log
@Next KDE deconflicting step: rename share/config/ to share/config.kde3/ and
share/config.kcfg/ to share/config.kcfg.kde3/. Tested on i386, including
run-time tests (not for all apps, though).

After this commit, there are only two conflicting files in kdelibs 3.x and
4.x packages left - to be solved soon.

spurring from espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2013/11/27 21:42:00 kili Exp $
d16 1
a16 1
REVISION-main =		31
d49 2
a50 1
			x11/gtk+2,-guic
@


1.123
log
@Bump the @@conflict markers in -en_US and -locale to kdebase-<3.5.10p30.

ok zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2013/11/24 19:56:30 zhuk Exp $
d16 2
a17 2
REVISION-main =		30
REVISION-samba =	10
d92 1
a92 1
	${INSTALL_DATA} ${FILESDIR}/kdesurc ${PREFIX}/share/config
@


1.122
log
@Split some locale-specific files out of kdelibs, kdebase and kde-runtime
into some sort of interchangeable subpackages. The idea is that each version
of KDE being installed picks up it's own version of locale-specific package
by default, and KDE4's one doesn't update to KDE3's one automatically, but
can replace it on explicit pkg_add call.

Most of the Makefiles are bumps needed after splitting x11/kde4/libs.

This is a part of KDE3/4 deconflicting work.

hardly tested by landry@@ in a bulk build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2013/10/31 21:12:12 sthen Exp $
d18 2
@


1.121
log
@bump REVISION for any ports using route messages. regen some distinfos and
remove unnecessary USE_GROFFs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2013/10/22 11:33:58 zhuk Exp $
d5 2
d12 7
d20 1
d35 1
a35 1
MULTI_PACKAGES =	-main -samba
d37 1
a37 1
MODULES =	x11/kde devel/gettext
d39 21
a59 1
BUILD_DEPENDS = devel/imake
a60 1
LIB_DEPENDS =	x11/kde/libs3
a65 15
RUN_DEPENDS-main =${RUN_DEPENDS} \
		devel/desktop-file-utils \
		x11/gtk+2,-guic

LIB_DEPENDS-main = ${LIB_DEPENDS} \
		openldap-client->=2,<3:databases/openldap \
		security/cyrus-sasl2 \
		devel/libusb-compat \
		devel/glib2

LIB_DEPENDS-samba = ${LIB_DEPENDS} \
		net/samba>=3


REVISION-main =		29
a80 1
REVISION-samba =	10
d83 3
@


1.120
log
@Do a massive change on the placement of some KDE3 apps data:

  * share/apps => share/apps.kde3
  * share/doc/HTML => share/doc/HTML.kde3

This is a part of KDE3/4 deconflicting work.

Build tested in a bulk by landry@@, also sat over a week on ports@@.
Run-time tested with some KDE3 apps, including KMail, taxipilot, yakuake...

"do it" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2013/10/05 07:34:38 espie Exp $
d51 1
a51 1
REVISION-main =		28
@


1.119
log
@disentangle kde3 from kde4: all kde3 with the same name get an explict
PKGSPEC.  revision bumps follow.

Also, tag all kde3 ports, those that use the module and those that do not,
with explicit kde3 tags.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2013/07/08 14:03:29 zhuk Exp $
d51 1
a51 1
REVISION-main =		26
d67 1
a67 1
REVISION-samba =	8
a71 10
EXTRA_CONFIG =	xdg/menus/kde-settings.menu \
		xdg/menus/kde-information.menu \
		xdg/menus/kde-screensavers.menu \
		xdg/menus/applications-merged/kde-essential.menu \
		ksysguarddrc


SAMPLECONFDIR = ${PREFIX}/share/apps/kde-conf-sample

SUBST_VARS = EXTRA_CONFIG SAMPLECONFDIR
d75 1
a75 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/HTML/en/common

FAKE_FLAGS =	sysconfdir=${SAMPLECONFDIR}
@


1.118
log
@Replace ${post_install_libs} in Makefile.inc with MODKDE_LIB_LINKS
(see analog in kde4.port.mk). Some stuff outside x11/kde will need this
functionality, too, as it was merged into KDE4 SC.

okay espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2013/06/20 06:54:38 ajacoutot Exp $
d51 1
a51 1
REVISION-main =		25
d67 1
a67 1
REVISION-samba =	7
@


1.117
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2013/06/17 19:28:37 ajacoutot Exp $
a85 1
	@@${post_install_libs}
@


1.116
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2013/01/23 21:10:37 zhuk Exp $
d51 1
a51 1
REVISION-main =		24
d64 2
a65 2
	FLAC avahi-client avahi-common dbus-1 dns_sd heimbase heimntlm \
	hx509 roken wind
d67 1
a67 1
REVISION-samba =	6
@


1.115
log
@Move KDE 3 headers from ${PREFIX}/include to ${PREFIX}/include/kde.
Updates to dependant ports to follow.

Tested in a bulk, input and okay by landry@@
Reviewed by aja@@ too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2013/01/14 12:35:19 zhuk Exp $
d32 1
a32 1
WANTLIB = ICE SM X11 Xext Xrender art_lgpl_2 idn jpeg \
d35 1
a35 1
	stdc++ util xcb z
d51 1
a51 1
REVISION-main =		23
d63 3
a65 1
	usb vcard vorbis vorbisenc vorbisfile xkbfile Xau Xdmcp
d67 1
a67 1
REVISION-samba =	5
@


1.114
log
@Unbreak FLAVORs for KDE 3.

ok by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2013/01/12 11:21:10 ajacoutot Exp $
d51 1
a51 1
REVISION-main =		22
@


1.113
log
@Fix crystalsvg icon path in @@unexec-delete
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2012/12/17 18:42:13 naddy Exp $
a25 1
FLAVORS =		debug
@


1.112
log
@fix the detection of openpty(), which in turn will be used by kio_fish
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2012/11/24 09:08:09 sthen Exp $
d52 1
a52 1
REVISION-main =		21
@


1.111
log
@fix following cyrus-sasl update; sasl.h now requires size_t
ok aja@@ nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2012/09/23 08:08:49 matthieu Exp $
d52 1
a52 1
REVISION-main =		20
@


1.110
log
@add BUILD_DEPENDS on devel/imake. ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2012/09/01 14:37:00 ajacoutot Exp $
d52 1
a52 1
REVISION-main =		19
@


1.109
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2012/06/28 18:52:18 jasper Exp $
d29 2
@


1.108
log
@Allow building against OpenSSL without SSLv2 support.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2012/06/15 08:30:23 ajacoutot Exp $
d50 1
a50 1
REVISION-main =		18
d64 1
a64 1
REVISION-samba =	4
@


1.107
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2011/12/03 23:37:39 ajacoutot Exp $
d50 1
a50 1
REVISION-main =		17
@


1.106
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2011/11/13 13:54:05 ajacoutot Exp $
d50 1
a50 1
REVISION-main =		16
@


1.105
log
@Sync dependencies after move from libusb to libusb-compat and fix a
couple of fallouts. Note that these ports are only the ones that used to
have a direct dependency on devel/libusb so there may be some other
hidden ports that may break because of the switch. If that's the case,
no need to start ranting all over but instead tell me which one(s)
break. Thanks.

Note: sysutils/nut hasn't been fixed yet but will be today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2011/09/16 12:29:15 espie Exp $
d37 2
a38 1
		devel/desktop-file-utils
d50 1
a50 1
REVISION-main =		15
@


1.104
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2011/07/06 14:51:19 dcoppa Exp $
a3 1
COMMENT-plugins =	Konqueror nsplugins, essentially native JDK
d31 1
a31 1
WANTLIB = ICE SM X11 Xau Xdmcp Xext Xrender art_lgpl_2 fam idn jpeg \
d33 1
a33 1
	lib/kde3/kdeui lib/kde3/kio lib/kde3/kwalletclient m png pthread-stubs \
d42 1
a42 1
		devel/libusb \
d49 1
a49 1
REVISION-main =		14
d54 1
a54 1
	krb5 lber ldap lib/kde3/artsflow lib/kde3/artsflow_idl \
d61 1
a61 1
	usb vcard vorbis vorbisenc vorbisfile xkbfile
d63 1
a63 1
REVISION-samba =	3
d65 1
a65 1
	wbclient
@


1.103
log
@Adapt to new OpenBSD kinfo_proc API.

ok jasper@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2011/03/21 00:58:19 ian Exp $
d50 1
a50 1
REVISION-main =		13
d64 1
a64 1
REVISION-samba =	2
@


1.102
log
@Add an rc.d script for kdm, bump revision. ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2010/11/07 19:50:10 jasper Exp $
d50 1
a50 1
REVISION-main =		12
@


1.101
log
@new depends
@
text
@d50 1
a50 1
REVISION-main =		11
@


1.100
log
@- ${LOCALBASE}/lib/pkgconfig and ${X11BASE}/lib/pkgconfig are default search
directories for pkg-config(1) nowadays. so remove these quirks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2010/07/12 20:44:02 kili Exp $
d31 1
a31 1
LIB_DEPENDS =	::x11/kde/libs3
d33 1
a33 1
	lib/kde3/DCOP lib/kde3/kdecore.>=6 lib/kde3/kdefx lib/kde3/kdesu \
d38 1
a38 1
		:desktop-file-utils-*:devel/desktop-file-utils
d41 4
a44 5
		::x11/kde/libs3 \
		:openldap-client->=2,<3:databases/openldap \
		::security/cyrus-sasl2 \
		::devel/libusb \
		::devel/glib2
d47 1
a47 1
		:samba->=3:net/samba
@


1.99
log
@Fix WANTLIB-main (stripping version numbers from lber and ldap).

I'm not removing extra libraries reported by port-lib-depends-check
for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2010/07/10 12:44:30 espie Exp $
a75 2

CONFIGURE_ENV += PKG_CONFIG_PATH=${X11BASE}/lib/pkgconfig
@


1.98
log
@use REVISION instead of hardcoding p-numbers.

Note the way REVISION and WANTLIB are defined.
This is (more or less) the Makefile portion that lib-depends-check is supposed
to handle eventually...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2010/07/08 21:28:49 espie Exp $
d51 1
a51 1
REVISION-main =		10
d56 1
a56 1
	krb5 lber-2.3 lcms ldap-2.3 lib/kde3/artsflow lib/kde3/artsflow_idl \
@


1.97
log
@clean-up AND small changes:
- copy libs over to lib/kde3 (to prepare coexistence with kde4, eventually)
- move lib depends over to WANTLIB
- update WANTLIB for recent changes
- create links to avoid pkg_create protests over non existing links
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/05/15 08:48:01 ajacoutot Exp $
d9 2
a10 2
PKGNAME-main =		${DISTNAME}p10
PKGNAME-samba =		kdesamba-${VERSION}p2
d46 6
d65 1
a65 3

LIB_DEPENDS-samba = ${LIB_DEPENDS} \
		:samba->=3:net/samba
@


1.96
log
@Add missing gtk-update-icon-cache goos.

ok landry@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2010/05/13 07:01:00 ajacoutot Exp $
d9 3
a11 3
PKGNAME-main =		${DISTNAME}p9
PKGNAME-samba =		kdesamba-${VERSION}p1
MODKDE_VERSION ?=	3.5.8
d31 5
a35 3
LIB_DEPENDS =	kdecore.>=6,DCOP,kio,kdeui,kdefx,kdesu,kwalletclient::x11/kde/libs3
WANTLIB =	ICE Xrender SM util X11 m z png jpeg art_lgpl_2 Xext idn \
		pthread-stubs xcb fam rpcsvc stdc++ Xdmcp Xau 
d39 1
d41 17
a57 14
		kabc,katepartinterfaces,kdefakes,kdnssd,kdeprint,kdeprint_management,khtml,kjs,knewstuff,kmid,kparts,kresources,kscreensaver,ktexteditor,kutils,vcard,artskde::x11/kde/libs3 \
		lber,ldap.>=2:openldap-client->=2,<3:databases/openldap \
		sasl2::security/cyrus-sasl2 \
		usb::devel/libusb \
		glib-2.0,gmodule-2.0,gthread-2.0::devel/glib2
WANTLIB-main =	${WANTLIB} \
		Xcursor Xrandr Xss Xt Xtst Xxf86misc \
		artsflow artsflow_idl audiofile c crypto \
		freetype kmedia2_idl mad mcop ogg \
		pcre pcreposix qtmcop soundserver_idl sndio ssl \
		vorbis vorbisenc vorbisfile xkbfile GLU \
		Xinerama Xft Xfixes fontconfig GL Xcomposite Xdamage \
		Half Imath IlmImf IlmThread Iex asn1 com_err gssapi krb5 \
		expat pthread 
d61 3
a63 1
		lib/samba/smbclient:samba->=3:net/samba
d81 2
@


1.95
log
@SECURITY: CVE-2010-0436, see:
    http://www.kde.org/info/security/advisory-20100413-1.txt

diff from FreeBSD via brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2010/01/17 08:58:38 espie Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p8
@


1.94
log
@grumble. fix build after KERN_PROC hiding
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2009/12/21 20:46:01 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p7
@


1.94.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2010-0436

ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2010/01/17 08:58:38 espie Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p8
@


1.93
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2009/11/14 16:41:57 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p6
@


1.92
log
@Set XDG_MENU_PREFIX.

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2009/08/27 19:44:38 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p5
@


1.91
log
@Use the gettext module.

ok landry@@ on an earlier diff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2009/08/11 08:40:40 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p4
@


1.90
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2009/06/29 15:05:02 naddy Exp $
d9 2
a10 2
PKGNAME-main =		${DISTNAME}p3
PKGNAME-samba =		kdesamba-${VERSION}p0
d29 2
d32 2
a33 2
WANTLIB =	ICE Xrender SM util X11 m z png jpeg art_lgpl_2 Xext idn iconv \
		pthread-stubs xcb fam rpcsvc intl stdc++ Xdmcp Xau 
@


1.89
log
@register kdm configuration files for cleanup; ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2009/03/10 18:31:41 espie Exp $
d9 2
a10 2
PKGNAME-main =		${DISTNAME}p2
PKGNAME-samba =		kdesamba-${VERSION}
d30 2
a31 1
WANTLIB =	ICE Xrender SM util X11 m z png jpeg art_lgpl_2 Xext idn iconv fam rpcsvc intl stdc++ Xdmcp Xau 
@


1.88
log
@fix dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2009/01/29 22:28:58 jakemsr Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p1
@


1.87
log
@* add sndio backend for artsd
* use audio(4) instead of ossaudio(3) in kdemultimedia3 as much as
  possible
* sync WANTLIB in dependant ports

testing/prodding from todd@@.  briefly discussed with naddy@@, ajacoutot@@
and jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2008/08/26 16:52:28 espie Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}p0
d36 1
a36 1
		lber,ldap.>=2:openldap-client-2.*:databases/openldap \
@


1.86
log
@start updating to kde 3.5.10

style issues, regen with new make plist.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2008/07/25 20:28:03 kili Exp $
d9 1
a9 1
PKGNAME-main =		${DISTNAME}
d42 3
a44 3
		artsflow artsflow_idl audiofile c crypto esd \
		freetype kmedia2_idl mad mcop ogg ossaudio \
		pcre pcreposix qtmcop soundserver_idl ssl \
@


1.85
log
@
Bring back @@exec genkdmconf.

"Looks good" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2008/03/25 17:34:14 espie Exp $
d3 9
a11 9
COMMENT-main= 		K Desktop Environment, basic applications
COMMENT-plugins=	Konqueror nsplugins, essentially native JDK
COMMENT-samba=		K Desktop Environment, samba support
CATEGORIES=		x11 x11/kde
VERSION=		3.5.9
DISTNAME=		kdebase-${VERSION}
PKGNAME-main=		${DISTNAME}p0
PKGNAME-samba=		kdesamba-${VERSION}
MODKDE_VERSION?=	3.5.8
d26 2
a27 2
MULTI_PACKAGES=		-main -samba
FLAVORS=		debug
d29 2
a30 2
LIB_DEPENDS=	kdecore.>=6,DCOP,kio,kdeui,kdefx,kdesu,kwalletclient::x11/kde/libs3
WANTLIB=	ICE Xrender SM util X11 m z png jpeg art_lgpl_2 Xext idn iconv fam rpcsvc intl stdc++ Xdmcp Xau 
d32 1
a32 1
RUN_DEPENDS-main=${RUN_DEPENDS} \
d34 1
a34 1
LIB_DEPENDS-main= ${LIB_DEPENDS} \
d40 1
a40 1
WANTLIB-main=	${WANTLIB} \
d47 1
a47 1
		Half Imath IlmImf Iex asn1 com_err gssapi krb5 \
d51 1
a51 1
LIB_DEPENDS-samba= ${LIB_DEPENDS} \
d54 2
a55 2
SEPARATE_BUILD=	flavored
EXTRA_CONFIG=	xdg/menus/kde-settings.menu \
d62 1
a62 1
CONFIGURE_ENV+= PKG_CONFIG_PATH=${X11BASE}/lib/pkgconfig
d64 1
a64 1
SAMPLECONFDIR=${PREFIX}/share/apps/kde-conf-sample
d66 1
a66 1
SUBST_VARS=EXTRA_CONFIG SAMPLECONFDIR
d71 1
a71 1
FAKE_FLAGS=	sysconfdir=${SAMPLECONFDIR}
@


1.84
log
@3.5.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2008/01/04 17:48:38 espie Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
a68 2
	rm -rf ${PREFIX}/share/config/kdm
	${INSTALL_PROGRAM} ${WRKBUILD}/kdm/kfrontend/genkdmconf ${PREFIX}/libexec
@


1.83
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2007/12/18 16:00:12 ajacoutot Exp $
d7 1
a7 1
VERSION=		3.5.8
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p1
d30 1
a30 1
WANTLIB=	ICE Xrender SM pthread util X11 m z png jpeg art_lgpl_2 Xext idn iconv fam rpcsvc intl stdc++ Xdmcp Xau 
d48 1
a48 1
		expat
@


1.82
log
@- make sure RUN_DEPENDS-main inherits RUN_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2007/12/15 23:47:40 ajacoutot Exp $
d73 1
a73 1
FAKE_FLAGS=${MAKE_FLAGS} DESTDIR=${WRKINST} sysconfdir=${SAMPLECONFDIR}
@


1.81
log
@- add update-desktop-database goo

"looks ok" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2007/10/24 21:52:16 espie Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p0
d32 2
a33 1
RUN_DEPENDS-main=:desktop-file-utils-*:devel/desktop-file-utils
@


1.80
log
@update to 3.5.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2007/10/06 22:46:04 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
d32 1
@


1.79
log
@- use sudo instead of su to gain superuser privileges (one can still edit
$PREFIX/share/config/kdesurc to change this behavior back)
- fix WANTLIB

Thanks to espie@@ for writing the sudo support ;)

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2007/10/04 19:00:17 jasper Exp $
d7 1
a7 1
VERSION=		3.5.7
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p3
d11 1
a11 1
MODKDE_VERSION?=	3.5.7
d30 1
a30 1
WANTLIB=	ICE Xrender SM pthread util X11 m z png jpeg art_lgpl_2 Xext idn iconv fam rpcsvc stdc++ Xdmcp Xau 
d41 1
a41 1
		freetype intl kmedia2_idl mad mcop ogg ossaudio \
d43 1
a43 1
		vorbis vorbisenc vorbisfile xkbfile GLU fontenc \
@


1.78
log
@SECURITY FIX for KDM, "which would allow a normal user to login
as another user or even root without properly supplying
login credentials."

http://www.kde.org/info/security/advisory-20070919-1.txt

Tested by ian@@ and Johan M:son Lindman
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2007/09/15 20:04:21 merdely Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p2
d69 1
@


1.77
log
@Remove surrounding quotes in COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2007/08/25 08:03:02 espie Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p1
@


1.76
log
@CVE-2007-4224
CVE-2007-3820
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2007/07/02 06:07:03 ajacoutot Exp $
d3 3
a5 3
COMMENT-main= 		"K Desktop Environment, basic applications"
COMMENT-plugins=	"Konqueror nsplugins, essentially native JDK"
COMMENT-samba=		"K Desktop Environment, samba support"
@


1.75
log
@- add a workaround so that new Desktop "link to" files get created with
644 mode (instead of 444) and can be configurable out-of-the-box

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2007/05/25 09:49:54 espie Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p0
@


1.74
log
@update a large subset of kde 3 to 3.5.7.
Simplify the infrastructure a bit, and let it compile with libfam, now...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2007/05/09 11:31:43 bernd Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
@


1.73
log
@Don't depend on the qt3 'mt' FLAVOR. This FLAVOR doesn't do anything
and will be removed shortly. Bump PKGNAMEs.

Discussed with and ok espie@@.
Bulk build testing by steven@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2007/03/18 21:36:14 espie Exp $
d7 1
a7 1
VERSION=		3.5.6
d9 3
a11 3
PKGNAME-main=		${DISTNAME}p1
PKGNAME-samba=		kdesamba-${VERSION}p0
MODKDE_VERSION?=	3.5.3
d30 1
a30 1
WANTLIB=	ICE Xrender SM pthread util X11 m z png jpeg art_lgpl_2 Xext idn iconv
d42 1
a42 1
		pcre pcreposix qtmcop soundserver_idl ssl stdc++ \
d45 2
a46 1
		Half Imath IlmImf Iex Xdmcp Xau asn1 com_err gssapi krb5
a70 3
USE_LIBTOOL=Yes
USE_X11=	Yes
LIBTOOL_FLAGS=--tag=disable-static
@


1.72
log
@put kdesud into its own group
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2007/01/28 13:18:50 espie Exp $
d9 2
a10 2
PKGNAME-main=		${DISTNAME}p0
PKGNAME-samba=		kdesamba-${VERSION}
@


1.71
log
@kde 3.5.6 update, missing bindings and l10n.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2006/12/16 12:22:36 espie Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
@


1.71.2.1
log
@- backport security fixes
CVE-2007-4224
CVE-2007-3820

input and ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2007/01/28 13:18:50 espie Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p2
@


1.71.2.2
log
@MFC (original commit jasper@@):
SECURITY FIX for KDM, "which would allow a normal user to login
as another user or even root without properly supplying
login credentials."
http://www.kde.org/info/security/advisory-20070919-1.txt

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71.2.1 2007/09/01 17:48:54 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p3
@


1.70
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2006/11/21 08:27:42 espie Exp $
d7 1
a7 1
VERSION=		3.5.5
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p1
a24 4
SHARED_LIBS +=	kateinterfaces       1.0      # .0.0
SHARED_LIBS +=	taskmanager          2.0      # .1.0
SHARED_LIBS +=	taskbar              4.0      # .3.0
SHARED_LIBS +=	kasbar               2.0      # .1.0
@


1.69
log
@switch to new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2006/11/20 08:07:40 steven Exp $
a31 2

BUILD_DEPENDS=	::devel/pkgconfig
@


1.68
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2006/11/11 16:24:41 mbalmer Exp $
d3 1
a3 1
COMMENT= 		"K Desktop Environment, basic applications"
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d30 1
a30 2
MULTI_PACKAGES=		-samba
SUBPACKAGE?=
d33 1
a33 1
BUILD_DEPENDS+=::devel/pkgconfig
d35 2
a36 1
WANTLIB+=ICE Xrender SM pthread util X11 m z png jpeg art_lgpl_2 Xext idn iconv
d38 8
a45 10
USE_X11=	Yes

.if !defined(PACKAGING) || ${SUBPACKAGE:L} == ""
LIB_DEPENDS+= kdecore.>=6,kabc,katepartinterfaces,kdefakes,kdefx,kdnssd,kdeprint,kdeprint_management,kdesu,kdeui,khtml,kio,kjs,knewstuff,kmid,kparts,kresources,kscreensaver,ktexteditor,kutils,kwalletclient,DCOP,vcard,artskde::x11/kde/libs3 \
	lber,ldap.>=2:openldap-client-2.*:databases/openldap \
	sasl2::security/cyrus-sasl2 \
	usb::devel/libusb
LIB_DEPENDS+= \
	glib-2.0,gmodule-2.0,gthread-2.0::devel/glib2
WANTLIB+=	Xcursor Xrandr Xss Xt Xtst Xxf86misc \
a52 1
.endif
d54 2
a55 4
.if !defined(PACKAGING) || ${SUBPACKAGE:L} == "-samba"
LIB_DEPENDS+=	lib/samba/smbclient:samba->=3:net/samba
LIB_DEPENDS+=	DCOP,kdecore.>=6,kio,kdeui,kdefx,kdesu,kwalletclient::x11/kde/libs3
.endif
d77 1
@


1.67
log
@Add missing WANTLIB pieces from an openldap change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2006/10/28 11:52:13 espie Exp $
d37 2
@


1.66
log
@new format for SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2006/10/12 23:12:18 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}
d51 1
a51 1
		Half Imath IlmImf Iex Xdmcp Xau
@


1.65
log
@Update to 3.5.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2006/09/18 12:19:40 espie Exp $
d12 17
a28 13
SHARED_LIBS=		kasbar			2.0 \
			kateinterfaces		1.0 \
			kateutils		1.0 \
			kdecorations		2.0 \
			kfontinst		1.0 \
			khotkeys_shared		2.0 \
			kickermain		2.0 \
			konq			7.0 \
			konqsidebarplugin	4.0 \
			ksgrd			4.0 \
			ksplashthemes		1.0 \
			taskbar			4.0 \
			taskmanager		2.0
@


1.64
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2006/08/03 10:53:36 espie Exp $
d7 1
a7 1
VERSION=		3.5.4
@


1.63
log
@update to 3.5.4 first part.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2006/06/15 12:10:30 bernd Exp $
d40 1
a40 1
	glib-2.0.0.0,gmodule-2.0.0.0,gthread-2.0.0.0::devel/glib2
@


1.63.2.1
log
@- backport security fixes
CVE-2007-4224
CVE-2007-3820

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2006/08/03 10:53:36 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
@


1.62
log
@Security fix for kdm. Fixes a symlink attack vulnerability. (CVE-2006-2449)

Detailed information:
http://www.kde.org/info/security/advisory-20060614-1.txt

"go ahead" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2006/06/03 12:47:30 espie Exp $
d7 1
a7 1
VERSION=		3.5.3
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d35 2
a36 2
LIB_DEPENDS+= kdecore.6,kabc,katepartinterfaces,kdefakes,kdefx,kdnssd,kdeprint,kdeprint_management,kdesu,kdeui,khtml,kio,kjs,knewstuff,kmid,kparts,kresources,kscreensaver,ktexteditor,kutils,kwalletclient,DCOP,vcard,artskde::x11/kde/libs3 \
	lber,ldap.2:openldap-client-2.*:databases/openldap \
d53 1
a53 1
LIB_DEPENDS+=	DCOP,kdecore.6,kio,kdeui,kdefx,kdesu,kwalletclient::x11/kde/libs3
@


1.61
log
@minor update to 3.5.3, integrate libidn support (some more changes to come
to WANTLIB in packages dependent on KDE).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2006/05/14 17:19:23 brad Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}
@


1.60
log
@bump PKGNAME after DESCR modification.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2006/04/01 10:49:19 espie Exp $
d7 1
a7 1
VERSION=		3.5.2
d10 2
a11 2
PKGNAME-samba=		kdesamba-${VERSION}p1
MODKDE_VERSION?=	3.5.2
d32 1
a32 1
WANTLIB+=ICE Xrender SM pthread util X11 m z png jpeg art_lgpl_2 Xext 
d43 1
a43 1
		freetype iconv intl kmedia2_idl mad mcop ogg ossaudio \
@


1.59
log
@update to 3.5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2006/02/18 14:28:48 espie Exp $
d10 1
a10 1
PKGNAME-samba=		kdesamba-${VERSION}
@


1.58
log
@prevent kinfocenter from crashing with sound issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2006/02/18 13:29:36 espie Exp $
d7 1
a7 1
VERSION=		3.5.1
d9 1
a9 1
PKGNAME=		${DISTNAME}p4
d11 1
a11 1
MODKDE_VERSION?=	3.5
a76 3

#CONFIGURE_ARGS+=--without-motif
#CONFIGURE_ARGS+=--without-samba
@


1.58.2.1
log
@MFC:
Security fix for kdm. Fixes a symlink attack vulnerability. (CVE-2006-2449)

Detailed information:
http://www.kde.org/info/security/advisory-20060614-1.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2006/02/18 14:28:48 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p5
@


1.57
log
@synch ksysguardd commands with what ksysguard now expects.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2006/02/18 13:07:02 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p3
@


1.56
log
@better processList: do not filter out init (so tree view works), use
one single sysctl to get the whole list (ouch performance), mark a few
more processes as known...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2006/02/18 12:06:50 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p2
@


1.55
log
@show (sudo) if kdesu is using sudo.
better processlist, using KERN_PROC2, and full command line.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2006/02/07 10:26:42 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p1
@


1.54
log
@basic support for processes in ksysguard, taken from FreeBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2006/02/03 12:23:15 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
@


1.53
log
@Update to 3.5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2006/01/13 22:49:55 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}
@


1.52
log
@bump SHARED_LIBS for kde (all C++, no brainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2006/01/03 14:49:23 espie Exp $
d7 1
a7 1
VERSION=		3.5.0
d9 2
a10 2
PKGNAME=		${DISTNAME}p1
PKGNAME-samba=		kdesamba-${VERSION}p0
d47 1
a47 1
		Half Imath IlmImf Iex
@


1.51
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2005/12/17 11:27:44 espie Exp $
d9 1
a9 1
PKGNAME=		${DISTNAME}p0
d12 13
a24 13
SHARED_LIBS=		kasbar			1.0 \
			kateinterfaces		0.0 \
			kateutils		0.0 \
			kdecorations		1.0 \
			kfontinst		0.0 \
			khotkeys_shared		1.0 \
			kickermain		1.0 \
			konq			6.0 \
			konqsidebarplugin	3.0 \
			ksgrd			3.0 \
			ksplashthemes		0.0 \
			taskbar			3.0 \
			taskmanager		1.0
@


1.50
log
@start using fixed system libtool.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2005/11/29 14:00:12 espie Exp $
d12 13
d74 1
a74 1
FAKE_FLAGS=DESTDIR=${WRKINST} sysconfdir=${SAMPLECONFDIR}
@


1.49
log
@KDE 3.5.0, the beginning...

(samba/cups subpackages to fix library issues)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2005/11/11 11:33:01 espie Exp $
d9 2
a10 2
PKGNAME=		${DISTNAME}
PKGNAME-samba=		kdesamba-${VERSION}
d62 2
@


1.48
log
@ldap wants to link with sasl2 now, so make it happy.

tsk, tsk, bernd@@ & mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2005/11/03 15:56:57 espie Exp $
d5 1
d7 1
a7 1
VERSION=		3.4.3
d9 3
a11 2
PKGNAME=		${DISTNAME}p2
MODKDE_VERSION?=	3.4
d13 2
d16 7
a22 1
LIB_DEPENDS= kdecore.6,kabc,katepartinterfaces,kdefakes,kdefx,kdnssd,kdeprint,kdeprint_management,kdesu,kdeui,khtml,kio,kjs,knewstuff,kmid,kmdi2,kparts,kresources,kscreensaver,kscript,ktexteditor,kutils,kwalletclient,DCOP,vcard,artskde::x11/kde/libs3 \
d26 9
d36 6
a41 1
BUILD_DEPENDS+=::devel/pkgconfig
a49 7
LIB_DEPENDS+= \
	glib-2.0.0.0,gmodule-2.0.0.0,gthread-2.0.0.0::devel/glib2

.if !defined(PACKAGING)
LIB_DEPENDS+=	lib/samba/smbclient:samba->=3:net/samba
.endif

d64 1
a64 8

WANTLIB=	ICE SM X11 Xcursor Xext Xrandr Xrender Xss Xt Xtst Xxf86misc \
		art_lgpl_2 artsflow artsflow_idl audiofile c crypto esd \
		freetype iconv intl jpeg kmedia2_idl m mad mcop ogg ossaudio \
		pcre pcreposix png pthread qtmcop soundserver_idl ssl stdc++ \
		util vorbis vorbisenc vorbisfile xkbfile z GLU fontenc \
		Xinerama Xft Xfixes fontconfig GL Xcomposite Xdamage \
		Half Imath IlmImf Iex
@


1.47
log
@samba support.
We do this as a build-depends. If people install samba, then smb://
works, otherwise it does not.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2005/10/24 10:56:03 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
@


1.46
log
@fix syntax error in externaltool.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2005/10/17 11:28:24 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
d29 3
d33 2
a34 2
CONFIGURE_ENV+=ac_cv_header_libsmbclient=no \
	PKG_CONFIG_PATH=${X11BASE}/lib/pkgconfig
@


1.45
log
@Minor update to kde 3.4.3, mostly zap qt 3.3.5 patches that have been
integrated, recognize theora in multimedia.
i18n3 to come...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/08/16 09:49:53 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}
@


1.44
log
@conflicts from the past: history since 3.7.

As noted on ports@@ recently, pkg_add -r relies on conflicts, and the
sheer existence of updates means we MUST take the past into account in
conflicts now.

Note the renaming of hugs98 to valid package names where versions are
concerned.

This commit shows clearly the renaming of the xfce4 plugin packages, the
ditching of eclipse flavors, the splitting of nessus into subpackages,
the splitting of various other software documentations, some packaging bugs
in kdeedu, and a lot of files moving around...

okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2005/07/28 08:47:40 espie Exp $
d6 1
a6 1
VERSION=		3.4.2
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
@


1.44.2.1
log
@MFC:
Security fix for kdm. Fixes a symlink attack vulnerability. (CVE-2006-2449)

Detailed information:
http://www.kde.org/info/security/advisory-20060614-1.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2005/08/16 09:49:53 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
@


1.43
log
@KDE 3.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2005/06/02 14:01:25 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}
@


1.42
log
@update to 3.4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2005/04/03 20:20:52 espie Exp $
d6 1
a6 1
VERSION=		3.4.1
@


1.41
log
@help pkg-config find its own...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2005/03/30 19:25:23 espie Exp $
d6 1
a6 1
VERSION=		3.4.0
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
@


1.40
log
@dependencies, dependencies...
don't rely on samba3 yet, need to check it.
use sasl2 and usb where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2005/03/29 21:18:35 espie Exp $
d30 2
a31 1
CONFIGURE_ENV+=ac_cv_header_libsmbclient=no
@


1.39
log
@most of kde 3.4, will finish getting fixed in tree... ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2005/02/27 08:15:40 brad Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}
d12 4
a15 3
LIB_DEPENDS= kdecore.6,kabc,katepartinterfaces,kdefakes,kdefx,kdeprint,kdeprint_management,kdesasl,kdesu,kdeui,khtml,kio,kjs,kmdi,kmid,kparts,kresources,kscreensaver,kscript,ktexteditor,kutils,kwalletclient,DCOP,vcard,artskde::x11/kde/libs3 \
	lber,ldap.2:openldap-client-2.*:databases/openldap

d17 1
d26 2
a27 2
#MULTI_PACKAGES=-plugins
FULLPKGNAME-plugins=kdensplugins-${VERSION}
a28 5
SUBPACKAGE?=
.if !defined(PACKAGING) || ${SUBPACKAGE} == "-plugins"
LIB_DEPENDS+= Xm::x11/openmotif \
	glib-2.0.0.0,gmodule-2.0.0.0,gthread-2.0.0.0::devel/glib2
.endif
d30 1
d42 1
a42 1
CONFIGURE_ARGS+=--without-motif
d48 3
a50 1
		util vorbis vorbisenc vorbisfile xkbfile z
@


1.38
log
@post-3.3.2-kdebase-htmlframes2.patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2005/02/07 11:30:05 espie Exp $
d6 1
a6 1
VERSION=		3.3.2
d8 2
a9 2
PKGNAME=		${DISTNAME}p3
MODKDE_VERSION?=	3.3.0
@


1.37
log
@explicitly set LIBRESOLV to nothing, so that we don't link with a dummy
lib (throws libtool since we don't have a shared version).
zap -g I used to debug.
better directories in network.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/01/31 16:58:22 espie Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p2
@


1.36
log
@allow kdesu to start up even with no env SESSION_MANAGER.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2004/12/27 22:32:23 sturm Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p1
a43 1
CFLAGS+=	-g
@


1.35
log
@fix fontdir handling
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2004/12/16 07:25:25 alek Exp $
d8 1
a8 1
PKGNAME=		${DISTNAME}p0
d44 1
@


1.34
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2004/12/12 11:33:24 espie Exp $
d8 1
@


1.33
log
@3.3.2 is out, rejoice.
minor update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/10/19 00:25:25 espie Exp $
d44 6
@


1.32
log
@minor update to 3.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/09/18 09:36:43 espie Exp $
d6 1
a6 1
VERSION=		3.3.1
@


1.31
log
@update to kde 3.3.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/07/24 12:47:14 espie Exp $
d6 1
a6 1
VERSION=		3.3.0
@


1.30
log
@basic update to kde 3.2.3.
A few files to remove/add yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/04/13 04:22:37 brad Exp $
d6 1
a6 1
VERSION=		3.2.3
d8 1
a8 1
MODKDE_VERSION?=	3.2.3
@


1.29
log
@better COMMENTs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/03/07 21:08:43 espie Exp $
d6 1
a6 1
VERSION=		3.2.1
d8 1
a8 1
MODKDE_VERSION?=	3.2
@


1.28
log
@update to kde 3.2.1, as agreed with pvalchev@@.
The distfiles should be publically available shortly.
this fixes a few nits: build accessibility, move cvscheck to avoid conflicts.

i18n files missing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/02/07 01:46:23 espie Exp $
d3 2
a4 2
COMMENT= 		"X11 toolkit, basic applications"
COMMENT-plugins=	"nsplugins, essentially native jdk"
@


1.27
log
@start updating to 3.2.0, the actual release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/02/01 22:49:23 espie Exp $
d6 1
a6 1
VERSION=		3.2.0
@


1.26
log
@fix dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/02/01 14:59:22 espie Exp $
d6 1
a6 1
VERSION=		3.1.95
d32 1
d42 1
@


1.25
log
@basic import of kde 3.1.95, still missing a few parts.

TODO:
- compile the missing packages.
- redo konsole fixes for our ttys.
- figure out why kuickshow is broken.
- make sure we get all dependencies.
- repair kscd.
- find out why nsplugins does not like the native jdk.
- figure out how to get kvim to work.
- change filenames or adjust check-lib-depends to cope.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/12/07 20:19:13 espie Exp $
d11 3
a13 2
LIB_DEPENDS= kdecore.4,DCOP,artskde,kabc,katepartinterfaces,kdefakes,kdefx,kdeprint,kdeprint_management,kdesasl,kdesu,kdeui,khtml,kio,kmid,kparts,kscreensaver,kscript,kspell,ktexteditor,kutils,vcard::x11/kde/libs3 \
		ldap.2,lber:openldap-client-2.*:databases/openldap \
@


1.24
log
@update to 3.1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2003/07/30 12:59:22 espie Exp $
d4 1
d6 1
a6 1
VERSION=		3.1.4
d8 1
d14 1
d16 18
a37 1
	${INSTALL_DATA} ${WRKINST}${SYSCONFDIR}/ksysguarddrc ${PREFIX}/share/config/ksysguarddrc.sample
d39 1
@


1.23
log
@Update to kde 3.1.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2003/06/12 19:16:15 espie Exp $
d5 1
a5 1
VERSION=		3.1.3
@


1.22
log
@Update to kde 3.1.2 (requires recent autoconf).
Fix some build issues, mainly in kdebindings and kdemultimedia.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2003/04/12 15:37:01 espie Exp $
d5 1
a5 1
VERSION=		3.1.2
d8 1
@


1.21
log
@security update: invoke ghostscript with safe flags, to disable
pdf/postscript possible holes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2003/04/09 23:53:02 espie Exp $
d5 1
a5 1
VERSION=		3.1.1a
@


1.20
log
@oops, somehow I forgot to disable the netscape plugins in a commit.
Reported by lots of people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/04/05 14:53:38 espie Exp $
d5 1
a5 1
VERSION=		3.1.1
@


1.19
log
@Update most of kde to 3.1.1.
Needs rebuild to check against XFree 4.3.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/01/27 19:22:49 espie Exp $
d17 2
@


1.18
log
@kdebase 3.1:
- use kcontrol/nics/nic.cpp from kde-current to access getifaddrs...
IPv4 masks are not printed properly yet.
- konsole fixes for utmp
- ksysguardd mostly working. Should unify with Net/FreeBSD
- clock and timezone fixes mostly from Flinn Mueller.
- uses kxkb_pic lib, thanks to Matthieu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/01/10 14:56:27 brad Exp $
d5 1
a5 1
VERSION=		3.1
@


1.18.2.1
log
@Fix security issue mentioned in this advisory
http://www.kde.org/info/security/advisory-20030409-1.txt
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/01/27 19:22:49 espie Exp $
a6 1
PKGNAME=		${DISTNAME}p0
@


1.17
log
@SYSCONFDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2003/01/09 23:48:48 espie Exp $
d5 1
a5 1
VERSION=		3.0.5a
d8 1
a8 1
LIB_DEPENDS= kdecore.4,DCOP,artskde,kabc,katepartinterfaces,kdefakes,kdefx,kdeprint,kdeprint_management,kdesasl,kdesu,kdeui,khtml,kio,kjava,kmid,kparts,kscreensaver,kscript,kspell,ktexteditor,vcard::x11/kde/libs3 \
a9 2
		vorbis,vorbisenc::audio/libvorbis \
		cdda_paranoia,cdda_interface::audio/cdparanoia
a10 1
BUILD_DEPENDS=	::audio/lame
@


1.16
log
@thinko
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2003/01/09 17:44:58 espie Exp $
d19 1
a19 1
	${INSTALL_DATA} ${WRKINST}/etc/ksysguarddrc ${PREFIX}/share/config/ksysguarddrc.sample
@


1.15
log
@install ksysguarddrc sample file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2003/01/07 15:36:35 espie Exp $
d19 1
a19 1
	${INSTALL_DATA} ${PREFIX}/etc/ksysguarddrc ${PREFIX}/share/config/ksysguarddrc.sample
@


1.14
log
@Add missing SEPARATE_BUILDs, turn them into flavored
Trim old commented cruft
Add debug flavor, and --disable-dependency-tracking if !debug
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/12/23 14:22:32 espie Exp $
d19 1
@


1.13
log
@Security update: 3.0.5a. Fixes numerous vulnerabilities.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/12/02 16:27:21 espie Exp $
d14 1
a14 1
SEPARATE_BUILD=	simple
@


1.12
log
@Update to 3.0.5
i18n not checked yet...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/10/28 21:44:32 espie Exp $
d5 1
a5 1
VERSION=		3.0.5
@


1.11
log
@3.0.4 update, most of it.
i18n packlists to check yet...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/09/01 08:25:25 espie Exp $
d5 1
a5 1
VERSION=		3.0.4
@


1.10
log
@kde 3.0.3, incorporated kssl changes...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/07/16 12:20:42 espie Exp $
d5 1
a5 1
VERSION=		3.0.3
@


1.10.2.1
log
@MFC:
Security update: 3.0.5a. Fixes numerous vulnerabilities.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/12/23 14:22:32 espie Exp $
d5 1
a5 1
VERSION=		3.0.5a
@


1.10.2.2
log
@Fix security issue mentioned in this advisory

http://www.kde.org/info/security/advisory-20030409-1.txt

as well as applying the other security related fixes from KDE 3.0.5b.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10.2.1 2002/12/26 22:28:18 pvalchev Exp $
a6 1
PKGNAME=		${DISTNAME}p1
@


1.9
log
@Update to 3.0.2, somewhat lately.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/05/28 17:18:46 espie Exp $
d5 1
a5 1
VERSION=		3.0.2
@


1.8
log
@seems that kde is happy with SEPARATE_BUILD.
I should have checked this ages ago.
Will switch the other dirs after I've checked that they're okay too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/05/23 14:37:21 espie Exp $
d5 1
a5 2
NEED_VERSION=		1.504
VERSION=		3.0.1
@


1.7
log
@Update to kde 3.0.1.
Mostly remove integrated patches, and adapt a few plists.
There may be minor pieces yet to do...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/04/10 01:24:39 espie Exp $
d15 1
d19 1
a19 1
	${INSTALL_PROGRAM} ${WRKSRC}/kdm/kfrontend/genkdmconf ${PREFIX}/libexec
@


1.6
log
@Use a common Makefile.inc to remove lots of common parts in all kde dirs.
Remove lame stuff in base3, since run-time auto-detection is working now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/04/04 12:13:02 espie Exp $
d6 1
a6 1
VERSION=		3.0
@


1.5
log
@Real 3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/04/04 09:31:01 espie Exp $
a7 12
DIST_SUBDIR=		kde

HOMEPAGE=		http://www.kde.org
MASTER_SITES=	${MASTER_SITE_KDE}
MASTER_SITE_SUBDIR=	stable/${VERSION}/src
EXTRACT_SUFX=		.tar.bz2

# Parts of kde want shared libraries to work, as some symbols are
# duplicated over the place.
NOT_FOR_ARCHS=${NO_SHARED_ARCHS}

MODULES=qt3
a15 51
CONFIGURE_STYLE=	autoconf
AUTOCONF_NEW=		Yes
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/admin
CONFIGURE_ARGS=		${MODQT_CONFIGURE_ARGS}
CONFIGURE_ARGS+=	--with-extra-libs=${LOCALBASE}/lib
CONFIGURE_ARGS+=	--with-extra-includes=${LOCALBASE}/include
CONFIGURE_ARGS+=	--with-xdmdir=/var/X11/kdm
CONFIGURE_ARGS+=	--disable-mt
CONFIGURE_ARGS+=	--disable-threading
CONFIGURE_ARGS+=	--disable-debug
CONFIGURE_ARGS+=	--enable-final
#CONFIGURE_ARGS+=	--enable-debug
CONFIGURE_ARGS+=	--without-motif
#CONFIGURE_ARGS+=--enable-static --enable-debug --disable-shared

PATCH_LIST=${PORTSDIR}/x11/kde/arts3/patches/p-* patch-*

# Not yet, too much time to compile
#CONFIGURE_ARGS+=	--enable-static
CONFIGURE_ARGS+= 	${CONFIGURE_SHARED}

USE_GMAKE=		Yes
CONFIGURE_ENV=		RUN_KAPPFINDER=no KDEDIR=${LOCALBASE}
CONFIGURE_ENV+=		ac_aux_files=''
MAKE_ENV=		${CONFIGURE_ENV}
PORTHOME=${WRKDIR}

LAMEDIR=${WRKDIR}/lamestub

post-patch:
	mkdir -p ${LAMEDIR}
	cp ${FILESDIR}/lame.c ${LAMEDIR}

pre-build:
	cd ${LAMEDIR} && ${CC} -I${LOCALBASE}/include -o libmp3lame.so.0.0 -shared -fpic -O2 lame.c


# Ensure qt will always be at the front
MAKE_FLAGS=CXXLD='--tag CXX ${CXX} -L${MODQT_LIBDIR}'
MAKE_FLAGS+=LAMEDIR='${LAMEDIR}'
FAKE_FLAGS=DESTDIR=${WRKINST} TAR=tar

# GPL
# Note that lame is not a problem, since kdebase is packaged with a
# stub lame library which does nothing, and can be overriden with a
# live one later.
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes

a18 1
	${INSTALL_DATA} ${LAMEDIR}/libmp3lame.so.0.0 ${PREFIX}/lib
@


1.4
log
@kde3, real thing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/04/02 17:06:23 espie Exp $
d12 1
a12 1
MASTER_SITE_SUBDIR=	stable/kde-${VERSION}/src
@


1.3
log
@found a mirror that carries RC3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/03/23 15:20:58 espie Exp $
d6 1
a6 1
VERSION=		3.0rc3
d11 2
a12 3
#MASTER_SITES=	${MASTER_SITE_KDE}
MASTER_SITES= http://gd.tuwien.ac.at/pub/kde/%SUBDIR%/
MASTER_SITE_SUBDIR=	unstable/kde-${VERSION}/src
d40 1
a40 1
#CONFIGURE_ARGS+=	--without-motif
@


1.2
log
@meinproc tries to write into $HOME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/03/23 15:04:03 espie Exp $
a3 1
COMMENT-plugins=	"X11 toolkit, netscape plugins"
a7 1
PKGNAME-plugins=	kdebase-ns-${VERSION}
d12 1
a12 1
MASTER_SITES=ftp://ftp.kde.org/pub/kde/%SUBDIR%/
a19 1
#MULTI_PACKAGES=-plugins
a20 6

SUBPACKAGE?=
.if !defined(PACKAGING) || ${SUBPACKAGE} == "-plugins"
USE_MOTIF=	any
.endif

@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2002/03/02 23:59:52 espie Exp $
d63 1
@


1.1.1.1
log
@kde3, release candidate 3
@
text
@@
