head	1.6;
access;
symbols
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.2.0.4
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2006.10.12.23.12.18;	author espie;	state dead;
branches;
next	1.5;

1.5
date	2006.06.03.12.47.30;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2006.02.18.12.06.50;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2004.09.18.09.36.43;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.02.01.14.59.22;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2003.01.07.00.19.34;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to 3.5.5
@
text
@$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.5 2006/06/03 12:47:30 espie Exp $
--- kdesu/kdesu/sudlg.cpp.orig	Mon May 22 20:13:07 2006
+++ kdesu/kdesu/sudlg.cpp	Sun May 28 23:12:07 2006
@@@@ -12,10 +12,11 @@@@
 #include "sudlg.h"
 
 
-KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep,const QString& icon, bool withIgnoreButton)
+KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep,const QString& icon, bool useSudo, bool withIgnoreButton)
      : KPasswordDialog(Password, enableKeep, (withIgnoreButton ? User1:NoDefault), icon)
 {
     m_User = auth_user;
+    m_Sudo = useSudo;
     setCaption(i18n("Run as %1").arg(user));
 
     QString prompt;
@@@@ -34,6 +35,8 @@@@ KDEsuDialog::KDEsuDialog(QCString user, 
 	prompt = i18n("The action you requested needs additional privileges. "
 		"Please enter the password for \"%1\" below or click "
 		"Ignore to continue with your current privileges.").arg(m_User);
+    if (m_Sudo)
+	prompt += " (sudo)";
     setPrompt(prompt);
 
     if( withIgnoreButton )
@@@@ -49,6 +52,7 @@@@ bool KDEsuDialog::checkPassword(const ch
 {
     SuProcess proc;
     proc.setUser(m_User);
+    proc.setUseSudo(m_Sudo);
     int status = proc.checkInstall(password);
     switch (status)
     {
@


1.5
log
@minor update to 3.5.3, integrate libidn support (some more changes to come
to WANTLIB in packages dependent on KDE).
@
text
@d1 1
a1 1
$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.4 2006/02/18 12:06:50 espie Exp $
@


1.4
log
@show (sudo) if kdesu is using sudo.
better processlist, using KERN_PROC2, and full command line.
@
text
@d1 3
a3 3
$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.3 2004/09/18 09:36:43 espie Exp $
--- kdesu/kdesu/sudlg.cpp.orig	Sat Sep 10 10:26:14 2005
+++ kdesu/kdesu/sudlg.cpp	Fri Feb 17 12:22:58 2006
d8 3
a10 3
-KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, const QString& icon)
+KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, const QString& icon, bool useSudo)
     : KPasswordDialog(Password, enableKeep, User1, icon)
d17 1
a17 1
@@@@ -27,6 +28,8 @@@@ KDEsuDialog::KDEsuDialog(QCString user, 
d25 2
a26 2
     setButtonText(User1, i18n("&Ignore"));
@@@@ -41,6 +44,7 @@@@ bool KDEsuDialog::checkPassword(const ch
@


1.3
log
@update to kde 3.3.0.
@
text
@d1 3
a3 3
$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.2 2004/02/01 14:59:22 espie Exp $
--- kdesu/kdesu/sudlg.cpp.orig	Sat May 22 22:26:47 2004
+++ kdesu/kdesu/sudlg.cpp	Mon Sep  6 11:44:30 2004
d17 10
a26 1
@@@@ -41,6 +42,7 @@@@ bool KDEsuDialog::checkPassword(const ch
@


1.2
log
@basic import of kde 3.1.95, still missing a few parts.

TODO:
- compile the missing packages.
- redo konsole fixes for our ttys.
- figure out why kuickshow is broken.
- make sure we get all dependencies.
- repair kscd.
- find out why nsplugins does not like the native jdk.
- figure out how to get kvim to work.
- change filenames or adjust check-lib-depends to cope.
@
text
@d1 4
a4 4
$OpenBSD: patch-kdesu_kdesu_sudlg_cpp,v 1.1 2003/01/07 00:19:34 espie Exp $
--- kdesu/kdesu/sudlg.cpp.orig	2003-04-11 14:27:59.000000000 +0200
+++ kdesu/kdesu/sudlg.cpp	2004-01-21 01:23:41.000000000 +0100
@@@@ -14,10 +14,12 @@@@
d8 3
a10 4
-KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep)
+KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep, 
+    bool useSudo)
     : KPasswordDialog(Password, enableKeep, User1)
d17 1
a17 1
@@@@ -43,6 +45,7 @@@@ bool KDEsuDialog::checkPassword(const ch
@


1.1
log
@Full support for sudo in kcontrol
@
text
@d1 3
a3 3
$OpenBSD$
--- kdesu/kdesu/sudlg.cpp.orig	Tue Jan  7 01:11:18 2003
+++ kdesu/kdesu/sudlg.cpp	Tue Jan  7 01:13:21 2003
d9 1
a9 1
+KDEsuDialog::KDEsuDialog(QCString user, QCString auth_user, bool enableKeep,
d11 1
a11 1
     : KPasswordDialog(Password, "", enableKeep, User1)
@

