head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.07.17.21.00.16;	author zhuk;	state Exp;
branches;
next	;
commitid	QpxAo8621KSOScVs;


desc
@@


1.1
log
@Move KDE3's KDM and kcheckpass to BSD authentication.

This effectively unbreaks KDE3 after recent changes in getpw* land,
same way as it was done for KDE4.
@
text
@$OpenBSD$
Add BSD authentication support.
--- kcheckpass/kcheckpass.h.orig	Mon Oct 10 19:03:40 2005
+++ kcheckpass/kcheckpass.h	Sun Jul 17 14:40:22 2016
@@@@ -67,7 +67,8 @@@@
 #endif
 
 /* Make sure there is only one! */
-#if defined(HAVE_PAM)
+#if defined(USE_BSDAUTH)
+#elif defined(HAVE_PAM)
 # undef HAVE_OSF_C2_PASSWD
 # undef HAVE_SHADOW
 #elif defined(HAVE_OSF_C2_PASSWD)
@
