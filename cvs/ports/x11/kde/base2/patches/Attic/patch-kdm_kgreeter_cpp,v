head	1.3;
access;
symbols
	OPENBSD_2_8:1.1.1.1.0.2
	OPENBSD_2_8_BASE:1.1.1.1
	espie:1.1.1.1
	kde:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2001.03.12.16.18.34;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2000.12.17.11.28.00;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.10.09.22.38.34;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.10.09.22.38.34;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to kde 2.1
@
text
@--- kdm/kgreeter.cpp.orig	Tue Oct 10 22:48:40 2000
+++ kdm/kgreeter.cpp	Sun Dec 17 03:41:16 2000
@@@@ -77,9 +77,11 @@@@ extern "C" {
 #if defined(HAVE_LOGIN_CAP_H) && !defined(__NetBSD__)
 	#define USE_LOGIN_CAP 1
 	#include <login_cap.h>
-#ifdef __bsdi__
+#if defined(__bsdi__)
 	// This only works / is needed on BSDi
 	struct login_cap_t *lc;
+#elif defined(__OpenBSD__)
+	login_cap_t *lc;
 #else
 	struct login_cap *lc;
 #endif
@@@@ -523,7 +525,7 @@@@ KGreeter::restrict()
 #endif
 
 #ifdef USE_LOGIN_CAP
-#ifdef __bsdi__
+#if defined(__bsdi__) || defined(__OpenBSD__)
      lc = login_getclass(pwd->pw_class);
 #else
      lc = login_getpwclass(pwd);
@@@@ -551,10 +553,12 @@@@ KGreeter::restrict_time()
      // don't deny a root log in
      if (!pwd->pw_uid) return false;
 
+#if !defined(__OpenBSD__)
      if(!auth_timeok(lc, time(NULL))) {
          KMessageBox::sorry(this, i18n("Logins not available right now."));
          return true;
      }
+#endif
 #endif
      return false;
 }
@


1.2
log
@Basic bump to kde 2.01, more pending.
@
text
@@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
--- kdm/kgreeter.cpp.orig	Thu Sep 28 13:09:20 2000
+++ kdm/kgreeter.cpp	Thu Sep 28 13:52:18 2000
d16 1
a16 1
@@@@ -524,7 +526,7 @@@@ KGreeter::restrict()
d25 1
a25 1
@@@@ -552,10 +554,12 @@@@ KGreeter::restrict_time()
@


1.1.1.1
log
@initial import of kde2 basic packages, work in progress
@
text
@@
