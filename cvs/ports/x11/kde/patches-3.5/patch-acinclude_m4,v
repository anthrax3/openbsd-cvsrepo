head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.42
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.40
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.36
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.38
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.34
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.32
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.30
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.28
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.26
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.24
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.22
	OPENBSD_5_0:1.4.0.20
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.18
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.16
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.14
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.12
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.10
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.8
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.6
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.4
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2006.11.05.13.02.30;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.10.12.23.12.19;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.11.29.14.00.13;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.18.12.21.07;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@SHARED_LIBS reformat
@
text
@$OpenBSD: patch-acinclude_m4,v 1.3 2006/10/12 23:12:19 espie Exp $
--- acinclude.m4.orig	Tue Sep  6 19:30:06 2005
+++ acinclude.m4	Tue Oct 17 10:34:00 2006
@@@@ -6561,6 +6561,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
     lt_cv_sys_max_cmd_len=8192;
     ;;
 
+  netbsd* | freebsd* | openbsd* | darwin* )
+    # This has been around since 386BSD, at least.  Likely further.
+    if test -x /sbin/sysctl; then
+      lt_cv_sys_max_cmd_len=`/sbin/sysctl -n kern.argmax`
+    elif test -x /usr/sbin/sysctl; then
+      lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
+    else
+      lt_cv_sys_max_cmd_len=65536 # usable default for *BSD
+    fi
+    # And add a safety zone
+    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
+    ;;
+
  *)
     # If test is not a shell built-in, we'll probably end up computing a
     # maximum length that is only half of the actual maximum length, but
@@@@ -8101,13 +8114,7 @@@@ nto-qnx*)
   ;;
 
 openbsd*)
-  lt_cv_file_magic_cmd=/usr/bin/file
-  lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
-  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
-    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB shared object'
-  else
-    lt_cv_deplibs_check_method='file_magic OpenBSD.* shared library'
-  fi
+  lt_cv_deplibs_check_method=pass_all
   ;;
 
 osf3* | osf4* | osf5*)
@@@@ -9081,6 +9088,22 @@@@ case $host_os in
     # Workaround some broken pre-1.5 toolchains
     output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep conftest.$objext | $SED -e "s:-lgcc -lc -lgcc::"'
     ;;
+  openbsd2*)
+      # C++ shared libraries are fairly broken
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+  openbsd*)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+      if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+       _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file,$export_symbols -o $lib'
+       _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+       _LT_AC_TAGVAR(whole_archive_flag_spec, $1)="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
+      fi
+      output_verbose_link_cmd='echo'
+      ;;
   osf3*)
     case $cc_basename in
       KCC)
@@@@ -11409,6 +11432,7 @@@@ EOF
       _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
       if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
 	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $compiler_flags $libobjs $deplibs'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-retain-symbols-file,$export_symbols'
 	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
 	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
       else
@


1.3
log
@Update to 3.5.5
@
text
@d1 4
a4 4
$OpenBSD: patch-acinclude_m4,v 1.2 2005/11/29 14:00:13 espie Exp $
--- acinclude.m4.orig	Sun Sep 17 10:44:19 2006
+++ acinclude.m4	Sat Sep 23 12:51:36 2006
@@@@ -6643,6 +6643,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d24 1
a24 1
@@@@ -8183,13 +8196,7 @@@@ nto-qnx*)
d39 1
a39 1
@@@@ -9163,6 +9170,22 @@@@ case $host_os in
d62 1
a62 1
@@@@ -11491,6 +11514,7 @@@@ EOF
@


1.2
log
@KDE 3.5.0, the beginning...

(samba/cups subpackages to fix library issues)
@
text
@d1 4
a4 4
$OpenBSD: patch-acinclude_m4,v 1.1 2005/09/18 12:21:07 espie Exp $
--- acinclude.m4.orig	Mon Nov 21 10:06:52 2005
+++ acinclude.m4	Mon Nov 21 12:00:07 2005
@@@@ -6590,6 +6590,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d24 1
a24 1
@@@@ -8130,13 +8143,7 @@@@ nto-qnx*)
d39 1
a39 1
@@@@ -9110,6 +9117,22 @@@@ case $host_os in
d62 1
a62 1
@@@@ -11438,6 +11461,7 @@@@ EOF
@


1.1
log
@now that kde 3.5 is almost out, prepare infrastructure
@
text
@d1 4
a4 4
$OpenBSD$
--- acinclude.m4.orig	Sat Sep 10 21:33:23 2005
+++ acinclude.m4	Sun Sep 18 14:09:00 2005
@@@@ -6561,6 +6561,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d24 1
a24 1
@@@@ -8101,13 +8114,7 @@@@ nto-qnx*)
d39 1
a39 1
@@@@ -9081,6 +9088,22 @@@@ case $host_os in
d62 1
a62 1
@@@@ -11409,6 +11432,7 @@@@ EOF
@

