head	1.48;
access;
symbols
	OPENBSD_6_0:1.48.0.2
	OPENBSD_6_0_BASE:1.48
	OPENBSD_5_9:1.46.0.2
	OPENBSD_5_9_BASE:1.46
	OPENBSD_5_8:1.46.0.4
	OPENBSD_5_8_BASE:1.46
	OPENBSD_5_7:1.44.0.6
	OPENBSD_5_7_BASE:1.44
	OPENBSD_5_6:1.44.0.4
	OPENBSD_5_6_BASE:1.44
	OPENBSD_5_5:1.44.0.2
	OPENBSD_5_5_BASE:1.44
	OPENBSD_5_4:1.43.0.2
	OPENBSD_5_4_BASE:1.43
	OPENBSD_5_3:1.41.0.2
	OPENBSD_5_3_BASE:1.41
	OPENBSD_5_2:1.40.0.10
	OPENBSD_5_2_BASE:1.40
	OPENBSD_5_1_BASE:1.40
	OPENBSD_5_1:1.40.0.8
	OPENBSD_5_0:1.40.0.6
	OPENBSD_5_0_BASE:1.40
	OPENBSD_4_9:1.40.0.4
	OPENBSD_4_9_BASE:1.40
	OPENBSD_4_8:1.40.0.2
	OPENBSD_4_8_BASE:1.40
	OPENBSD_4_7:1.39.0.10
	OPENBSD_4_7_BASE:1.39
	OPENBSD_4_6:1.39.0.8
	OPENBSD_4_6_BASE:1.39
	OPENBSD_4_5:1.39.0.6
	OPENBSD_4_5_BASE:1.39
	OPENBSD_4_4:1.39.0.4
	OPENBSD_4_4_BASE:1.39
	OPENBSD_4_3:1.39.0.2
	OPENBSD_4_3_BASE:1.39
	OPENBSD_4_2:1.37.0.2
	OPENBSD_4_2_BASE:1.37
	OPENBSD_4_1:1.36.0.4
	OPENBSD_4_1_BASE:1.36
	OPENBSD_4_0:1.36.0.2
	OPENBSD_4_0_BASE:1.36
	OPENBSD_3_9:1.34.0.2
	OPENBSD_3_9_BASE:1.34
	OPENBSD_3_8:1.32.0.2
	OPENBSD_3_8_BASE:1.32
	OPENBSD_3_7:1.31.0.2
	OPENBSD_3_7_BASE:1.31
	OPENBSD_3_6:1.29.0.2
	OPENBSD_3_6_BASE:1.29
	OPENBSD_3_5:1.27.0.2
	OPENBSD_3_5_BASE:1.27
	OPENBSD_3_4:1.25.0.2
	OPENBSD_3_4_BASE:1.25
	OPENBSD_3_3:1.22.0.2
	OPENBSD_3_3_BASE:1.22
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2;
locks; strict;
comment	@# @;


1.48
date	2016.03.16.21.40.56;	author naddy;	state Exp;
branches;
next	1.47;
commitid	3k2ZqR8Y9jEk5rwO;

1.47
date	2016.03.12.20.18.26;	author naddy;	state Exp;
branches;
next	1.46;
commitid	pJB5tG5odsayFewY;

1.46
date	2015.07.17.01.17.30;	author zhuk;	state Exp;
branches;
next	1.45;
commitid	9xU9v1L1aPq845MN;

1.45
date	2015.07.17.01.14.13;	author zhuk;	state Exp;
branches;
next	1.44;
commitid	V39CY556y7SqRFWI;

1.44
date	2013.10.22.11.33.55;	author zhuk;	state Exp;
branches;
next	1.43;

1.43
date	2013.07.08.14.03.29;	author zhuk;	state Exp;
branches;
next	1.42;

1.42
date	2013.03.11.11.46.13;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2013.01.11.15.16.21;	author zhuk;	state Exp;
branches;
next	1.40;

1.40
date	2010.07.08.21.28.48;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2008.01.04.17.48.38;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2007.10.24.21.52.16;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2007.05.14.14.06.43;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2006.06.03.12.47.30;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2006.04.01.10.49.17;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2005.11.29.15.40.47;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2005.09.18.12.21.07;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2005.03.29.21.18.34;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2005.01.26.10.56.11;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2004.09.18.09.30.06;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2004.08.03.11.37.52;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2004.07.24.12.47.13;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2004.02.07.10.59.43;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2004.02.01.22.59.49;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2003.06.16.17.29.44;	author sturm;	state Exp;
branches;
next	1.24;

1.24
date	2003.06.15.07.21.49;	author pvalchev;	state Exp;
branches;
next	1.23;

1.23
date	2003.06.12.19.16.15;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2003.02.23.14.09.21;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2003.02.16.14.31.19;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2003.02.08.12.56.23;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2003.01.27.19.08.34;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2003.01.07.15.36.35;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2003.01.06.16.34.18;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2003.01.06.00.28.14;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2002.12.30.19.35.51;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2002.12.30.19.31.29;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2002.12.29.19.25.33;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2002.12.29.17.47.01;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2002.12.29.16.40.03;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2002.12.02.16.27.21;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2002.11.20.11.45.12;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2002.10.29.01.50.02;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2002.08.07.16.53.58;	author brad;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2002.07.19.20.29.18;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2002.05.15.18.17.59;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2002.04.19.00.13.56;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.15.06.39.41;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2002.04.10.08.45.45;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.10.01.24.38;	author espie;	state Exp;
branches;
next	;

1.7.2.1
date	2002.12.26.22.28.17;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.48
log
@remove SHARED_ONLY here, it is still provided by the x11/kde module
@
text
@# $OpenBSD: Makefile.inc,v 1.47 2016/03/12 20:18:26 naddy Exp $
DIST_SUBDIR ?=	kde
HOMEPAGE ?=	http://www.kde.org

MASTER_SITES ?=	${MASTER_SITE_KDE:S@@$@@Attic/${VERSION}/src/@@}
EXTRACT_SUFX ?=	.tar.bz2

MODKDE_VERSION ?=	3.1
MODULES ?=		x11/kde

MODGNU_CONFIG_GUESS_DIR	?=	${MODKDE_CONFIG_GUESS_DIRS}

CONFIGURE_STYLE ?=	autoconf
.if defined(MODKDE_VERSION)
.  if ${MODKDE_VERSION} == "3.5.7"
AUTOCONF_VERSION ?=	2.60
.  endif
.  if ${MODKDE_VERSION} == "3.5.8"
AUTOCONF_VERSION ?=	2.61
.  endif
.endif
AUTOCONF_VERSION ?=	2.57
CONFIGURE_ARGS +=	${MODKDE_CONFIGURE_ARGS}
USE_GMAKE ?=		Yes

PORTHOME ?=		${WRKDIR}
SAMPLECONFDIR =		${TRUEPREFIX}/share/apps.kde3/kde-conf-sample

CONFIGURE_ENV +=	${MODKDE_CONFIGURE_ENV}
MAKE_ENV =		${CONFIGURE_ENV}

MAKE_FLAGS +=		${MODKDE_MAKE_FLAGS}
FAKE_FLAGS ?=		TAR=tar 
FAKE_FLAGS +=		sysconfdir=${SAMPLECONFDIR}

# GPL
PERMIT_DISTFILES_FTP ?=		Yes
PERMIT_PACKAGE_CDROM ?=		Yes
PERMIT_PACKAGE_FTP ?=		Yes

MODKDE_LIB_LINKS =		Yes
@


1.47
log
@get rid of NO_SHARED_ARCHS and PROPERTIES:Mno_shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.46 2015/07/17 01:17:30 zhuk Exp $
a7 3
# Parts of kde want shared libraries to work, as some symbols are
# duplicated over the place.
SHARED_ONLY =		Yes
@


1.46
log
@MASTER_SITES0 isn't used, so zap this line.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.45 2015/07/17 01:14:13 zhuk Exp $
a9 1
NOT_FOR_ARCHS ?=	${NO_SHARED_ARCHS}
@


1.45
log
@KDE 3 distfiles were moved.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.44 2013/10/22 11:33:55 zhuk Exp $
a6 1
MASTER_SITES0 =	${MASTER_SITE_KDE:=security_patches/}
@


1.44
log
@Do a massive change on the placement of some KDE3 apps data:

  * share/apps => share/apps.kde3
  * share/doc/HTML => share/doc/HTML.kde3

This is a part of KDE3/4 deconflicting work.

Build tested in a bulk by landry@@, also sat over a week on ports@@.
Run-time tested with some KDE3 apps, including KMail, taxipilot, yakuake...

"do it" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.43 2013/07/08 14:03:29 zhuk Exp $
d5 1
a5 1
MASTER_SITES ?=	${MASTER_SITE_KDE:S@@$@@stable/${VERSION}/src/@@}
@


1.43
log
@Replace ${post_install_libs} in Makefile.inc with MODKDE_LIB_LINKS
(see analog in kde4.port.mk). Some stuff outside x11/kde will need this
functionality, too, as it was merged into KDE4 SC.

okay espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.42 2013/03/11 11:46:13 espie Exp $
d32 1
d39 2
@


1.42
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.41 2013/01/11 15:16:21 zhuk Exp $
d43 1
a43 11
# let's do a sweet little dance for kde4's libs
post_install_libs = mkdir -p ${PREFIX}/lib/kde3; cd ${PREFIX}/lib/kde3
.for l v in ${SHARED_LIBS}
post_install_libs += ;test -e ../lib$l.so.$v && ln -sf ../lib$l.so.$v lib$l.so.$v
.endfor
.if !target(post-install)
post-install:
. if defined(SHARED_LIBS) && !empty(SHARED_LIBS)
	@@${post_install_libs}
. endif
.endif
@


1.41
log
@Do not create ${PREFIX}/lib/kde3 unless really needed.
Fixes, e.g., update-plist for x11/kde/kdoc3.

"can go in as well" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.40 2010/07/08 21:28:48 espie Exp $
a38 1
PERMIT_DISTFILES_CDROM ?=	Yes
@


1.40
log
@clean-up AND small changes:
- copy libs over to lib/kde3 (to prepare coexistence with kde4, eventually)
- move lib depends over to WANTLIB
- update WANTLIB for recent changes
- create links to avoid pkg_create protests over non existing links
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.39 2008/01/04 17:48:38 espie Exp $
d51 1
d53 1
@


1.39
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 7
a7 18
# $OpenBSD: Makefile.inc,v 1.38 2007/10/24 21:52:16 espie Exp $
DIST_SUBDIR?=	kde
HOMEPAGE?=	http://www.kde.org
.if defined(VERSION) && ${VERSION} == "3.1.95"
MASTER_SITES?=	${MASTER_SITE_KDE:S@@$@@unstable/${VERSION}/src/@@}
.elif defined(VERSION) && ${VERSION} == "3.2.0"
MASTER_SITES?=	${MASTER_SITE_KDE:S@@$@@stable/3.2/src/@@}
.elif defined(VERSION) && ${VERSION} == "3.3.0"
MASTER_SITES?=	${MASTER_SITE_KDE:S@@$@@stable/3.3/src/@@}
.elif defined(VERSION) && ${VERSION} == "3.4.0"
MASTER_SITES?=	${MASTER_SITE_KDE:S@@$@@stable/3.4/src/@@}
.elif defined(VERSION) && ${VERSION} == "3.5.0"
MASTER_SITES?=	${MASTER_SITE_KDE:S@@$@@stable/3.5/src/@@}
.else
MASTER_SITES?=	${MASTER_SITE_KDE:S@@$@@stable/${VERSION}/src/@@}
.endif
EXTRACT_SUFX?=	.tar.bz2
MASTER_SITES0=	${MASTER_SITE_KDE:=security_patches/}
d11 4
a14 4
NOT_FOR_ARCHS?=	${NO_SHARED_ARCHS}
SHARED_ONLY=Yes
MODKDE_VERSION?=	3.1
MODULES?=	x11/kde
d16 1
a16 1
MODGNU_CONFIG_GUESS_DIRS?=	${MODKDE_CONFIG_GUESS_DIRS}
d18 1
a18 1
CONFIGURE_STYLE?=	autoconf
d20 2
a21 5
.  if (${MODKDE_VERSION} == "3.2.3" || ${MODKDE_VERSION} == "3.3.0" || ${MODKDE_VERSION} == "3.4" || ${MODKDE_VERSION} == "3.5" || ${MODKDE_VERSION} == "3.5.2" || ${MODKDE_VERSION} == "3.5.3")
AUTOCONF_VERSION?=	2.59
.  endif
.  if (${MODKDE_VERSION} == "3.5.7")
AUTOCONF_VERSION?=	2.60
d23 2
a24 2
.  if (${MODKDE_VERSION} == "3.5.8")
AUTOCONF_VERSION?=	2.61
d27 3
a29 3
AUTOCONF_VERSION?=	2.57
CONFIGURE_ARGS+=	${MODKDE_CONFIGURE_ARGS}
USE_GMAKE?=		Yes
d31 1
a31 1
PORTHOME?=${WRKDIR}
d33 2
a34 2
CONFIGURE_ENV+=		${MODKDE_CONFIGURE_ENV}
MAKE_ENV=		${CONFIGURE_ENV}
d36 2
a37 2
MAKE_FLAGS+=		${MODKDE_MAKE_FLAGS}
FAKE_FLAGS?=		TAR=tar 
d39 14
a52 4
PERMIT_DISTFILES_CDROM?=	Yes
PERMIT_DISTFILES_FTP?=		Yes
PERMIT_PACKAGE_CDROM?=		Yes
PERMIT_PACKAGE_FTP?=		Yes
@


1.38
log
@update to 3.5.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.37 2007/05/14 14:06:43 espie Exp $
d51 1
a51 1
FAKE_FLAGS?=	TAR=tar DESTDIR=${WRKINST}
@


1.37
log
@some tweaks in preparation of kde 3.5.7:
- the infrastructure now uses autoconf 2.60.
- don't bother to patch libtool, we have USE_LIBTOOL across the board.
- set LIBTOOL_FLAGS to ignore static libraries by default. We will no
longer bother building arts with static libs, since arts is going to
die with kde4, and nothing hardly ever uses it now (in fact, the 3.5.7
release of arts includes no new code, only infrastructure changes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.36 2006/06/03 12:47:30 espie Exp $
d36 3
@


1.36
log
@minor update to 3.5.3, integrate libidn support (some more changes to come
to WANTLIB in packages dependent on KDE).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.35 2006/04/01 10:49:17 espie Exp $
d30 2
a31 1
.if defined(MODKDE_VERSION) && (${MODKDE_VERSION} == "3.2.3" || ${MODKDE_VERSION} == "3.3.0" || ${MODKDE_VERSION} == "3.4" || ${MODKDE_VERSION} == "3.5" || ${MODKDE_VERSION} == "3.5.2" || ${MODKDE_VERSION} == "3.5.3")
d33 4
@


1.35
log
@update to 3.5.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.34 2005/11/29 15:40:47 naddy Exp $
d30 1
a30 1
.if defined(MODKDE_VERSION) && (${MODKDE_VERSION} == "3.2.3" || ${MODKDE_VERSION} == "3.3.0" || ${MODKDE_VERSION} == "3.4" || ${MODKDE_VERSION} == "3.5" || ${MODKDE_VERSION} == "3.5.2")
@


1.34
log
@fix master site directory for 3.5.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.33 2005/09/18 12:21:07 espie Exp $
d30 1
a30 1
.if defined(MODKDE_VERSION) && (${MODKDE_VERSION} == "3.2.3" || ${MODKDE_VERSION} == "3.3.0" || ${MODKDE_VERSION} == "3.4" || ${MODKDE_VERSION} == "3.5")
@


1.33
log
@now that kde 3.5 is almost out, prepare infrastructure
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.32 2005/03/29 21:18:34 espie Exp $
d12 2
@


1.32
log
@most of kde 3.4, will finish getting fixed in tree... ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.31 2005/01/26 10:56:11 espie Exp $
d28 1
a28 1
.if defined(MODKDE_VERSION) && (${MODKDE_VERSION} == "3.2.3" || ${MODKDE_VERSION} == "3.3.0" || ${MODKDE_VERSION} == "3.4")
@


1.31
log
@recent versions of kde and propolice seem to agree now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.30 2004/09/18 09:30:06 espie Exp $
d10 2
d28 1
a28 1
.if defined(MODKDE_VERSION) && (${MODKDE_VERSION} == "3.2.3" || ${MODKDE_VERSION} == "3.3.0")
@


1.30
log
@supports 3.3.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.29 2004/08/03 11:37:52 espie Exp $
d14 1
a44 2
CFLAGS+=-fno-stack-protector
CXXFLAGS+=-fno-stack-protector
@


1.29
log
@switch to new-style module
Acknowledge that we don't know how to deal with non shared archs yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.28 2004/07/24 12:47:13 espie Exp $
d8 2
d18 1
d25 1
a25 1
.if defined(MODKDE_VERSION) && ${MODKDE_VERSION} == "3.2.3"
@


1.28
log
@basic update to kde 3.2.3.
A few files to remove/add yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.27 2004/02/07 10:59:43 espie Exp $
d17 1
a17 1
MODULES?=	kde
@


1.27
log
@3.2.0 -> 3.2, grrrrr.
Noticed by Robert Nagy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.26 2004/02/01 22:59:49 espie Exp $
d22 3
@


1.26
log
@grab correct site.
Noticed by Robert Nagy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.25 2003/06/16 17:29:44 sturm Exp $
d6 2
@


1.25
log
@remove sparc64 workaround for missing -fno-stack-protector in gcc3,
this flag was just added to gcc3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.24 2003/06/15 07:21:49 pvalchev Exp $
d4 3
d8 1
@


1.24
log
@dirty hack to enable KDE to build on sparc64 (David's been using this to
build snaps for a while, so it might as well go in)

XXX this should be properly fixed by either adding propolice to our
gcc3 port, or adding an empty -fno-stack-protector flag, or fixing the
PP bugs and getting this flag removed altogether from here, or....)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.23 2003/06/12 19:16:15 espie Exp $
a31 1
.if ${MACHINE_ARCH} != "sparc64" # XXX -fno-stack-protector in gcc3 instead
a33 1
.endif
@


1.23
log
@Update to kde 3.1.2 (requires recent autoconf).
Fix some build issues, mainly in kdebindings and kdemultimedia.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.22 2003/02/23 14:09:21 espie Exp $
d32 1
d35 1
@


1.22
log
@fix kdoc build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.21 2003/02/16 14:31:19 espie Exp $
d16 1
a16 1
AUTOCONF_VERSION=	2.52
@


1.21
log
@stop patching inexistent admin dir
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.20 2003/02/08 12:56:23 espie Exp $
d11 1
a11 1
MODULES=	kde
d16 1
a16 1
AUTOCONF_NEW=		Yes
@


1.20
log
@reuse kde module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.19 2003/01/27 19:08:34 espie Exp $
d10 1
a10 1
MODKDE_VERSION=	3.1
@


1.19
log
@activate xinerama support, after all, we have the libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.18 2003/01/07 15:36:35 espie Exp $
d10 4
a13 9
MODULES?=	qt3
PATCH_LIST?=	${PORTSDIR}/x11/kde/arts3/patches/p-* patch-*
KDE=lib/kde3

MODGNU_CONFIG_GUESS_DIRS?=	${WRKSRC} ${WRKSRC}/admin
.if !defined(NO_DEBUG)
FLAVORS+=	debug
.endif
FLAVOR?=
d17 1
a17 17
CONFIGURE_ARGS+=	${MODQT_CONFIGURE_ARGS}
CONFIGURE_ARGS+=	--with-extra-libs="${LOCALBASE}/lib"
CONFIGURE_ARGS+=	--with-extra-includes="${LOCALBASE}/include/libpng:${LOCALBASE}/include"
CONFIGURE_ARGS+=	--with-xdmdir=/var/X11/kdm
CONFIGURE_ARGS+=	--enable-mitshm
CONFIGURE_ARGS+=	--with-xinerama
.if ${FLAVOR:L:Mdebug}
CONFIGURE_ARGS+=	--enable-debug=yes
.else
CONFIGURE_ARGS+=	--disable-debug
CONFIGURE_ARGS+=	--disable-dependency-tracking
.endif
CONFIGURE_ARGS+=	--enable-final
.if !${CONFIGURE_ARGS:M--with-motif}
CONFIGURE_ARGS+=	--without-motif
.endif
CONFIGURE_ARGS+= 	${CONFIGURE_SHARED}
d22 1
a22 2
CONFIGURE_ENV+=		UIC_PATH="${MODQT_UIC}" UIC="${MODQT_UIC}"
CONFIGURE_ENV+=		RUN_KAPPFINDER=no KDEDIR=${LOCALBASE}
a23 2
MODQT_OVERRIDE_UIC=No
MODQT_MT=Yes
d25 1
a25 2
SUBST_VARS+=	KDE
MAKE_FLAGS+=CXXLD='--tag CXX ${CXX} -L${MODQT_LIBDIR}'
@


1.18
log
@Add missing SEPARATE_BUILDs, turn them into flavored
Trim old commented cruft
Add debug flavor, and --disable-dependency-tracking if !debug
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.17 2003/01/06 16:34:18 espie Exp $
d27 1
@


1.17
log
@switch to qt-mt.
disable -fstack-protector for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.16 2003/01/06 00:28:14 naddy Exp $
d15 4
d27 3
a29 1
#CONFIGURE_ARGS+=	--enable-debug=full
d31 2
@


1.16
log
@All qt3 dependents require gcc3 on sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.15 2002/12/30 19:35:51 espie Exp $
a20 2
CONFIGURE_ARGS+=	--disable-threading
CONFIGURE_ARGS+=	--disable-mt
d48 2
a49 1
#COPTS+=-fno-stack-protector
@


1.15
log
@uncommit accidentally committed code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.14 2002/12/30 19:31:29 espie Exp $
d10 1
a10 3
MODULES?=	gcc3 qt3
MODGCC3_ARCHES?=sparc64
MODGCC3_LANGS?=	c++
@


1.14
log
@belt and suspenders...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.13 2002/12/29 19:25:33 espie Exp $
d23 2
a24 2
#CONFIGURE_ARGS+=	--disable-threading
#CONFIGURE_ARGS+=	--disable-mt
@


1.13
log
@Fix uic override mechanism, using latest qt module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.12 2002/12/29 17:47:01 espie Exp $
d23 2
a24 2
CONFIGURE_ARGS+=	--disable-threading
CONFIGURE_ARGS+=	--disable-mt
d27 1
a27 1
#CONFIGURE_ARGS+=	--enable-debug
d38 1
a38 1
CONFIGURE_ENV+=		UIC_PATH="${MODQT_UIC}"
d42 1
@


1.12
log
@oops, missing space
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.11 2002/12/29 16:40:03 espie Exp $
d38 1
a38 1
CONFIGURE_ENV+=		UIC_PATH="${LOCALBASE}/bin/uic3 -L ${LOCALBASE}/${KDE}/plugins"
d41 1
d51 1
@


1.11
log
@Some components need kde widgets. Fix uic path so it can find them
(this is necessary with kde 3.1rc*, and harmless with kde 3.0.x ?)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.10 2002/12/02 16:27:21 espie Exp $
d38 1
a38 1
CONFIGURE_ENV+=		UIC_PATH="${LOCALBASE}/bin/uic3 -L${LOCALBASE}/${KDE}/plugins"
@


1.10
log
@Update to 3.0.5
i18n not checked yet...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.9 2002/11/20 11:45:12 naddy Exp $
d38 1
a38 1
CONFIGURE_ENV+=		UIC_PATH=${LOCALBASE}/bin/uic3
@


1.9
log
@KDE requires gcc3 on sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.8 2002/10/29 01:50:02 brad Exp $
d38 1
@


1.8
log
@remove unnecessary KDE2 stuff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.7 2002/08/07 16:53:58 brad Exp $
d10 3
a12 1
MODULES?=	qt3
@


1.7
log
@simplify addition of png header path.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.6 2002/07/19 20:29:18 brad Exp $
a9 5
.if ${VERSION:M2*}
MODULES?=	qt2
PATCH_LIST?=	${PORTSDIR}/x11/kde/libs2/patches/p-* patch-*
KDE=lib/kde2
.elif ${VERSION:M3*}
a12 1
.endif
@


1.7.2.1
log
@MFC:
Security update: 3.0.5a. Fixes numerous vulnerabilities.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.10 2002/12/02 16:27:21 espie Exp $
d10 5
d18 1
a41 1
CONFIGURE_ENV+=		UIC_PATH=${LOCALBASE}/bin/uic3
@


1.6
log
@png header path change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.5 2002/05/15 18:17:59 espie Exp $
d25 2
a26 2
CONFIGURE_ARGS+=	--with-extra-libs=${LOCALBASE}/lib
CONFIGURE_ARGS+=	--with-extra-includes=${LOCALBASE}/include
d42 1
a42 1
CONFIGURE_ENV+=		RUN_KAPPFINDER=no KDEDIR=${LOCALBASE} CPPFLAGS="-I${LOCALBASE}/include/libpng"
@


1.5
log
@kill MASTER_SITE_SUBDIR there too
@
text
@d1 1
a1 2
# $OpenBSD: Makefile.inc,v 1.4 2002/04/19 00:13:56 espie Exp $
NEED_VERSION+=	1.504
d42 1
a42 1
CONFIGURE_ENV+=		RUN_KAPPFINDER=no KDEDIR=${LOCALBASE}
@


1.4
log
@sane again memory usage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.3 2002/04/15 06:39:41 espie Exp $
d5 1
a5 2
MASTER_SITES?=	${MASTER_SITE_KDE}
MASTER_SITE_SUBDIR?=	stable/${VERSION}/src
d32 1
@


1.3
log
@Add a `KDE' var to point to the plugin directory.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.2 2002/04/10 08:45:45 espie Exp $
a16 2
# our linker is insane, at least on some arches
VMEM_WARNING?=Yes
@


1.2
log
@Fix DIST_SUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.inc,v 1.1 2002/04/10 01:24:38 espie Exp $
d15 1
d21 1
d48 1
@


1.1
log
@Use a common Makefile.inc to remove lots of common parts in all kde dirs.
Remove lame stuff in base3, since run-time auto-detection is working now.
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
DIST_SUBDIR=	kde
@

