head	1.1;
access;
symbols
	OPENBSD_3_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2003.01.07.00.12.40;	author brad;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.01.07.00.12.40;	author brad;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file patch-kio_passdlg_cpp was initially added on branch OPENBSD_3_1.
@
text
@@


1.1.2.1
log
@- add patches from auditing effort for KDE 2.2
- bump PKGNAME's

http://www.kde.org/info/security/advisory-20021220-1.txt
@
text
@a0 20
$OpenBSD$
--- kio/passdlg.cpp.orig	Sat May 26 19:00:31 2001
+++ kio/passdlg.cpp	Sun Jan  5 16:07:24 2003
@@@@ -279,8 +279,15 @@@@ int PasswordDialog::getNameAndPassword( 
     if ( ret == Accepted )
     {
         user = dlg->username();
+        if ( user.isNull() )
+          user = "";
+
         pass = dlg->password();
-        if ( keep ) { (*keep) = dlg->keepPassword(); }
+        if ( pass.isNull() )
+          pass = "";
+
+        if ( keep )
+          (*keep) = dlg->keepPassword();
     }
     delete dlg;
     return ret;
@

