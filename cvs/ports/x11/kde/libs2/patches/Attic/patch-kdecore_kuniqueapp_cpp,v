head	1.3;
access;
symbols
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2002.09.11.17.43.43;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2002.04.08.17.59.57;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.03.30.01.44.28;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@ditch the files.
@
text
@$OpenBSD: patch-kdecore_kuniqueapp_cpp,v 1.2 2002/04/08 17:59:57 espie Exp $
--- kdecore/kuniqueapp.cpp.orig	Mon Apr  8 19:49:32 2002
+++ kdecore/kuniqueapp.cpp	Mon Apr  8 19:51:31 2002
@@@@ -153,7 +153,7 @@@@ KUniqueApplication::start()
            if (QCString(getenv("DISPLAY")).isEmpty())
            {
               kdError() << "KUniqueApplication: Can't determine DISPLAY. Aborting." << endl;
-              result = -1; // Error
+              result = 1; // Error
               ::write(fd[1], &result, 1);
               ::exit(255);
            }
@@@@ -164,7 +164,7 @@@@ KUniqueApplication::start()
            if (regName.isEmpty())
            {
               kdError() << "KUniqueApplication: Can't setup DCOP communication." << endl;
-              result = -1;
+              result = 2;
               delete dc;	// Clean up DCOP commmunication
               ::write(fd[1], &result, 1);
               ::exit(255);
@@@@ -241,7 +241,7 @@@@ KUniqueApplication::start()
      ::close(fd[0]);
 
      if (result != 0)
-        ::exit(result); // Error occured in child.
+        ::exit(255); // Error occured in child.
 
      dc = new DCOPClient();
      if (!dc->attach())
@


1.2
log
@fix pval's brain-damaged patch.
@
text
@d1 1
a1 1
$OpenBSD: patch-kdecore_kuniqueapp_cpp,v 1.1 2002/03/30 01:44:28 pvalchev Exp $
@


1.1
log
@char fixes
@
text
@d1 30
a30 12
$OpenBSD$
--- kdecore/kuniqueapp.cpp.orig	Fri Mar 29 18:36:40 2002
+++ kdecore/kuniqueapp.cpp	Fri Mar 29 18:36:11 2002
@@@@ -130,7 +130,7 @@@@ KUniqueApplication::start()
   }
   DCOPClient *dc;
   int fd[2];
-  char result;
+  int result;
   if (0 > pipe(fd))
   {
      kdError() << "KUniqueApplication: pipe() failed!" << endl;
@

