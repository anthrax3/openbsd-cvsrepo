head	1.7;
access;
symbols
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.1.1.1.0.2
	OPENBSD_3_1_BASE:1.1.1.1
	espie:1.1.1.1
	kde:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2003.02.08.12.56.50;	author espie;	state dead;
branches;
next	1.6;

1.6
date	2003.01.27.19.10.47;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2003.01.05.16.58.57;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2002.12.23.14.22.32;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.23.14.37.21;	author espie;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2002.04.21.13.48.11;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2002.03.23.14.57.58;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.03.23.14.57.58;	author espie;	state Exp;
branches;
next	;

1.3.2.1
date	2002.12.26.22.28.17;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.7
log
@moved to kde module
@
text
@$OpenBSD: p-aclocal_m4,v 1.6 2003/01/27 19:10:47 espie Exp $
--- aclocal.m4.orig	Fri Jan 24 15:15:51 2003
+++ aclocal.m4	Mon Jan 27 17:17:21 2003
@@@@ -6075,8 +6075,8 @@@@ nto-qnx)
 
 openbsd*)
   version_type=sunos
-  need_lib_prefix=no
-  need_version=no
+  need_lib_prefix=yes
+  need_version=yes
   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
   finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
   shlibpath_var=LD_LIBRARY_PATH
@@@@ -6749,6 +6749,7 @@@@ openbsd*)
   else
     lt_cv_deplibs_check_method='file_magic OpenBSD.* shared library'
   fi
+  lt_cv_deplibs_check_method=pass_all
   ;;
 
 osf3* | osf4* | osf5*)
@@@@ -7502,6 +7503,16 @@@@ case $host_os in
   netbsd*)
     # NetBSD uses g++ - do we need to do anything?
     ;;
+  openbsd*)
+    _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+    _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+    _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R$libdir'
+    _LT_AC_TAGVAR(remove_libsearchpath, $1)='yes'
+    _LT_AC_TAGVAR(remove_lgcc, $1)='yes'
+    ;;
   osf3*)
     case $cc_basename in
       KCC)
@@@@ -7816,15 +7827,24 @@@@ if AC_TRY_EVAL(ac_compile); then
 	   else
 	     _LT_AC_TAGVAR(compiler_lib_search_path, $1)="${_LT_AC_TAGVAR(compiler_lib_search_path, $1)} ${prev}${p}"
 	   fi
+	   if test "x$_LT_AC_TAGVAR(remove_libsearchpath, $1)" = "xyes"; then
+	     _LT_AC_TAGVAR(compiler_lib_search_path, $1)=""
+	   fi
 	   ;;
 	 # The "-l" case would never come before the object being
 	 # linked, so don't bother handling this case.
 	 esac
        else
+         add="${prev}$p"
+	 if test "x$_LT_AC_TAGVAR(remove_lgcc, $1)" = "xyes"; then
+	   case "$add" in
+	     -lgcc ) add="" ;;
+	   esac
+	 fi
 	 if test -z "$_LT_AC_TAGVAR(postdeps, $1)"; then
-	   _LT_AC_TAGVAR(postdeps, $1)="${prev}${p}"
+	   _LT_AC_TAGVAR(postdeps, $1)="$add"
 	 else
-	   _LT_AC_TAGVAR(postdeps, $1)="${_LT_AC_TAGVAR(postdeps, $1)} ${prev}${p}"
+	   _LT_AC_TAGVAR(postdeps, $1)="${_LT_AC_TAGVAR(postdeps, $1)} ${add}"
 	 fi
        fi
        ;;
@@@@ -9614,22 +9634,9 @@@@ EOF
       _LT_AC_TAGVAR(hardcode_direct, $1)=yes
       _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
 
-      if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
-	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
-	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
-	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
-      else
-       case $host_os in
-	 openbsd[[01]].* | openbsd2.[[0-7]] | openbsd2.[[0-7]].*)
-	   _LT_AC_TAGVAR(archive_cmds, $1)='$LD -Bshareable -o $lib $libobjs $deplibs $linker_flags'
-	   _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='-R$libdir'
-	   ;;
-	 *)
-	   _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
-	   _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
-	   ;;
-       esac
-      fi
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-R$libdir'
       ;;
 
     os2*)
@@@@ -9638,6 +9645,7 @@@@ EOF
       _LT_AC_TAGVAR(allow_undefined_flag, $1)=unsupported
       _LT_AC_TAGVAR(archive_cmds, $1)='$echo "LIBRARY $libname INITINSTANCE" > $output_objdir/$libname.def~$echo "DESCRIPTION \"$libname\"" >> $output_objdir/$libname.def~$echo DATA >> $output_objdir/$libname.def~$echo " SINGLE NONSHARED" >> $output_objdir/$libname.def~$echo EXPORTS >> $output_objdir/$libname.def~emxexp $libobjs >> $output_objdir/$libname.def~$CC -Zdll -Zcrtdll -o $lib $libobjs $deplibs $compiler_flags $output_objdir/$libname.def'
       _LT_AC_TAGVAR(old_archive_From_new_cmds, $1)='emximp -o $output_objdir/$libname.a $output_objdir/$libname.def'
+    _LT_AC_TAGVAR(remove_lgcc, $1)='yes'
       ;;
 
     osf3*)
@


1.6
log
@Update to arts-1.1
@
text
@d1 1
a1 1
$OpenBSD: p-aclocal_m4,v 1.5 2003/01/05 16:58:57 espie Exp $
@


1.5
log
@oops, pthread patch may be needed by the whole of kde.
@
text
@d1 3
a3 3
$OpenBSD: p-aclocal_m4,v 1.4 2002/12/23 14:22:32 espie Exp $
--- aclocal.m4.orig	Tue Dec 17 15:02:21 2002
+++ aclocal.m4	Sun Jan  5 16:41:22 2003
@


1.4
log
@Security update: 3.0.5a. Fixes numerous vulnerabilities.
@
text
@d1 4
a4 4
$OpenBSD: p-aclocal_m4,v 1.3 2002/05/23 14:37:21 espie Exp $
--- aclocal.m4.orig	Sat Dec 21 08:07:21 2002
+++ aclocal.m4	Sun Dec 22 13:52:17 2002
@@@@ -6173,8 +6173,8 @@@@ nto-qnx)
d15 1
a15 1
@@@@ -6847,6 +6847,7 @@@@ openbsd*)
d23 1
a23 1
@@@@ -7600,6 +7601,16 @@@@ case $host_os in
d40 1
a40 1
@@@@ -7914,15 +7925,24 @@@@ if AC_TRY_EVAL(ac_compile); then
d67 1
a67 1
@@@@ -9712,22 +9732,9 @@@@ EOF
d93 1
a93 1
@@@@ -9736,6 +9743,7 @@@@ EOF
@


1.3
log
@Update to kde 3.0.1.
Mostly remove integrated patches, and adapt a few plists.
There may be minor pieces yet to do...
@
text
@d1 4
a4 4
$OpenBSD: p-aclocal_m4,v 1.2 2002/04/21 13:48:11 espie Exp $
--- aclocal.m4.orig	Tue May 14 02:33:09 2002
+++ aclocal.m4	Thu May 16 18:36:21 2002
@@@@ -6075,8 +6075,8 @@@@ nto-qnx)
d15 1
a15 1
@@@@ -6749,6 +6749,7 @@@@ openbsd*)
d23 1
a23 1
@@@@ -7502,6 +7503,16 @@@@ case $host_os in
d40 1
a40 1
@@@@ -7816,15 +7827,24 @@@@ if AC_TRY_EVAL(ac_compile); then
d67 1
a67 1
@@@@ -9614,22 +9634,9 @@@@ EOF
d93 1
a93 1
@@@@ -9638,6 +9645,7 @@@@ EOF
@


1.3.2.1
log
@MFC:
Security update: 3.0.5a. Fixes numerous vulnerabilities.
@
text
@d1 4
a4 4
$OpenBSD: p-aclocal_m4,v 1.4 2002/12/23 14:22:32 espie Exp $
--- aclocal.m4.orig	Sat Dec 21 08:07:21 2002
+++ aclocal.m4	Sun Dec 22 13:52:17 2002
@@@@ -6173,8 +6173,8 @@@@ nto-qnx)
d15 1
a15 1
@@@@ -6847,6 +6847,7 @@@@ openbsd*)
d23 1
a23 1
@@@@ -7600,6 +7601,16 @@@@ case $host_os in
d40 1
a40 1
@@@@ -7914,15 +7925,24 @@@@ if AC_TRY_EVAL(ac_compile); then
d67 1
a67 1
@@@@ -9712,22 +9732,9 @@@@ EOF
d93 1
a93 1
@@@@ -9736,6 +9743,7 @@@@ EOF
@


1.2
log
@Use $compiler_flags in linking line since we call gcc, thus stripping -Wl
does not always work (broke kdeaddons on noatun plugins that use
sdl-config --libs -> -rpath, that gcc doesn't grok)
@
text
@d1 3
a3 3
$OpenBSD: p-aclocal_m4,v 1.1.1.1 2002/03/23 14:57:58 espie Exp $
--- aclocal.m4.orig	Tue Mar 19 01:31:41 2002
+++ aclocal.m4	Wed Mar 20 02:31:41 2002
d23 1
a23 1
@@@@ -7514,6 +7515,16 @@@@ case $host_os in
d40 1
a40 1
@@@@ -7828,15 +7839,24 @@@@ if AC_TRY_EVAL(ac_compile); then
d67 1
a67 1
@@@@ -9637,22 +9657,9 @@@@ EOF
d93 1
a93 1
@@@@ -9661,6 +9668,7 @@@@ EOF
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d31 1
a31 1
+    _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $linker_flags'
@


1.1.1.1
log
@kde3, release candidate 3.
@
text
@@
