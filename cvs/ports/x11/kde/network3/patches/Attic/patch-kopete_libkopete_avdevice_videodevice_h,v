head	1.4;
access;
symbols
	OPENBSD_5_9:1.3.0.28
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.30
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.26
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.24
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.22
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.20
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.18
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.16
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.14
	OPENBSD_5_0:1.3.0.12
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.10
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.8
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.4
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2016.04.29.21.10.23;	author zhuk;	state dead;
branches;
next	1.3;
commitid	u9TvebbKy1wgQMr9;

1.3
date	2008.09.07.23.00.17;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2006.06.03.12.47.31;	author espie;	state dead;
branches;
next	1.1;

1.1
date	2006.04.29.01.02.24;	author brad;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Remove KDE3 applications that have well-working KDE4+ counterparts.
@
text
@$OpenBSD: patch-kopete_libkopete_avdevice_videodevice_h,v 1.3 2008/09/07 23:00:17 brad Exp $
--- kopete/libkopete/avdevice/videodevice.h.orig	Sun Jun 22 02:46:34 2008
+++ kopete/libkopete/avdevice/videodevice.h	Sun Jun 22 04:05:39 2008
@@@@ -33,7 +33,7 @@@@
 #include <unistd.h>
 #include <signal.h>
 
-#if defined(__linux__) && defined(ENABLE_AV)
+#if defined(ENABLE_AV) && defined(__linux__)
 
 #include <asm/types.h>
 #undef __STRICT_ANSI__
@@@@ -61,6 +61,18 @@@@
 
 #endif // __linux__
 
+#if defined(ENABLE_AV) && defined(__OpenBSD__)
+
+#include <stdint.h>
+
+#define __s64 int64_t
+#define __s32 int32_t
+#define __u64 uint64_t
+#define __u32 uint32_t
+
+#include <sys/videoio.h>
+#endif // __OpenBSD__
+
 #include <qstring.h>
 #include <qfile.h>
 #include <qimage.h>
@@@@ -80,9 +92,11 @@@@ namespace AV {
 typedef enum
 {
 	VIDEODEV_DRIVER_NONE
-#if defined( __linux__) && defined(ENABLE_AV)
+#if defined(ENABLE_AV) && (defined(__linux__) || defined(__OpenBSD__))
+#ifdef __linux__
         ,
 	VIDEODEV_DRIVER_V4L
+#endif
 #ifdef V4L2_CAP_VIDEO_CAPTURE
         ,
 	VIDEODEV_DRIVER_V4L2
@@@@ -276,7 +290,7 @@@@ class VideoDevice{ (public)
 	int descriptor;
 
 //protected:
-#if defined(__linux__) && defined(ENABLE_AV)
+#if defined(ENABLE_AV) && (defined(__linux__) || defined(__OpenBSD__))
 #ifdef V4L2_CAP_VIDEO_CAPTURE
 	struct v4l2_capability V4L2_capabilities;
 	struct v4l2_cropcap cropcap;
@@@@ -289,8 +303,10 @@@@ class VideoDevice{ (public)
 void enumerateMenu (void);
 
 #endif
+#ifdef __linux__
 	struct video_capability V4L_capabilities;
 	struct video_buffer V4L_videobuffer;
+#endif
 #endif	
 	QValueVector<Kopete::AV::VideoInput> m_input;
 	QValueVector<Kopete::AV::VideoControl> m_control;
@


1.3
log
@Enable the V4L2 support in Kopete. Tested with MSN webcam support.

ok robert@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@minor update to 3.5.3, integrate libidn support (some more changes to come
to WANTLIB in packages dependent on KDE).
@
text
@d1 13
a13 12
$OpenBSD: patch-kopete_libkopete_avdevice_videodevice_h,v 1.1 2006/04/29 01:02:24 brad Exp $
--- kopete/libkopete/avdevice/videodevice.h.orig	Fri Mar 17 05:12:32 2006
+++ kopete/libkopete/avdevice/videodevice.h	Fri Apr 28 15:51:55 2006
@@@@ -48,6 +48,10 @@@@
 #include <linux/fs.h>
 #include <linux/kernel.h>
 #include <linux/videodev.h>
+#define VIDEO_MODE_PAL_Nc  3
+#define VIDEO_MODE_PAL_M   4
+#define VIDEO_MODE_PAL_N   5
+#define VIDEO_MODE_NTSC_JP 6
 #define __STRICT_ANSI__
a15 1
@@@@ -102,6 +106,50 @@@@ typedef enum
d17 16
d35 12
a46 83
+	STANDARD_NONE		= 0,
+	STANDARD_PAL_B		= (1 << 0),
+	STANDARD_PAL_B1		= (1 << 1),
+	STANDARD_PAL_G		= (1 << 2),
+	STANDARD_PAL_H		= (1 << 3),
+	STANDARD_PAL_I		= (1 << 4),
+	STANDARD_PAL_D		= (1 << 5),
+	STANDARD_PAL_D1		= (1 << 6),
+	STANDARD_PAL_K		= (1 << 7),
+	STANDARD_PAL_M		= (1 << 8),
+	STANDARD_PAL_N		= (1 << 9),
+	STANDARD_PAL_Nc		= (1 << 10),
+	STANDARD_PAL_60		= (1 << 11),
+// STANDARD_PAL_60 is a hybrid standard with 525 lines, 60 Hz refresh rate, and PAL color modulation with a 4.43 MHz color subcarrier. Some PAL video recorders can play back NTSC tapes in this mode for display on a 50/60 Hz agnostic PAL TV.
+	STANDARD_NTSC_M		= (1 << 12),
+	STANDARD_NTSC_M_JP	= (1 << 13),
+	STANDARD_NTSC_443	= (1 << 14),
+// STANDARD_NTSC_443 is a hybrid standard with 525 lines, 60 Hz refresh rate, and NTSC color modulation with a 4.43 MHz color subcarrier.
+	STANDARD_SECAM_B	= (1 << 16),
+	STANDARD_SECAM_D	= (1 << 17),
+	STANDARD_SECAM_G	= (1 << 18),
+	STANDARD_SECAM_H	= (1 << 19),
+	STANDARD_SECAM_K	= (1 << 20),
+	STANDARD_SECAM_K1	= (1 << 21),
+	STANDARD_SECAM_L	= (1 << 22),
+	STANDARD_SECAM_LC	= (1 << 23),
+// ATSC/HDTV
+	STANDARD_ATSC_8_VSB	= (1 << 24),
+	STANDARD_ATSC_16_VSB	= (1 << 25),
+
+	STANDARD_PAL_BG		= ( STANDARD_PAL_B   | STANDARD_PAL_B1   | STANDARD_PAL_G  ),
+	STANDARD_PAL_DK		= ( STANDARD_PAL_D   | STANDARD_PAL_D1   | STANDARD_PAL_K  ),
+	STANDARD_PAL		= ( STANDARD_PAL_BG  | STANDARD_PAL_DK   | STANDARD_PAL_H    | STANDARD_PAL_I  ),
+	STANDARD_NTSC		= ( STANDARD_NTSC_M  | STANDARD_NTSC_M_JP ),
+	STANDARD_SECAM_DK       = ( STANDARD_SECAM_D | STANDARD_SECAM_K  | STANDARD_SECAM_K1 ),
+	STANDARD_SECAM		= ( STANDARD_SECAM_B | STANDARD_SECAM_G  | STANDARD_SECAM_H  | STANDARD_SECAM_DK | STANDARD_SECAM_L),
+	STANDARD_525_60		= ( STANDARD_PAL_M   | STANDARD_PAL_60   | STANDARD_NTSC     | STANDARD_NTSC_443),
+	STANDARD_625_50		= ( STANDARD_PAL     | STANDARD_PAL_N    | STANDARD_PAL_Nc   | STANDARD_SECAM),
+	STANDARD_ALL		= ( STANDARD_525_60  | STANDARD_625_50)
+} signal_standard;
+
+
+typedef enum
+{
 	IO_METHOD_NONE,
 	IO_METHOD_READ,
 	IO_METHOD_MMAP,
@@@@ -140,12 +188,19 @@@@ public:
 	int minHeight();
 	int maxHeight();
 	int setSize( int newwidth, int newheight);
+
 	pixel_format setPixelFormat(pixel_format newformat);
 	int pixelFormatCode(pixel_format pixelformat);
 	pixel_format pixelFormatForPalette( int palette );
 	int pixelFormatDepth(pixel_format pixelformat);
 	QString pixelFormatName(pixel_format pixelformat);
 	QString pixelFormatName(int pixelformat);
+
+	__u64 signalStandardCode(signal_standard standard);
+	QString signalStandardName(signal_standard standard);
+	QString signalStandardName(int standard);
+	int detectSignalStandards();
+
 	int currentInput();
 	int selectInput(int input);
 	int setInputParameters();
@@@@ -166,12 +221,16 @@@@ public:
 	float setWhiteness(float whiteness);
 	float getHue();
 	float setHue(float Hue);
+
 	bool getAutoBrightnessContrast();
 	bool setAutoBrightnessContrast(bool brightnesscontrast);
 	bool getAutoColorCorrection();
 	bool setAutoColorCorrection(bool colorcorrection);
 	bool getImageAsMirror();
 	bool setImageAsMirror(bool imageasmirror);
+
+	bool getDisableMMap();
+	bool setDisableMMap(bool disablemmap);
 	bool getWorkaroundBrokenDriver();
 	bool setWorkaroundBrokenDriver(bool workaroundbrokendriver);
d48 5
a52 1
@@@@ -197,6 +256,7 @@@@ public:
d54 3
a56 3
 	struct v4l2_crop crop;
 	struct v4l2_format fmt;
+//	struct v4l2_input m_input;
d58 1
d61 4
a64 8
@@@@ -206,6 +266,7 @@@@ public:
 protected:
 	int currentwidth, minwidth, maxwidth, currentheight, minheight, maxheight;
 
+	bool m_disablemmap;
 	bool m_workaroundbrokendriver;
 
 	QValueVector<rawbuffer> m_rawbuffers;
@


1.1
log
@Backport for the 120117 fix and some other bugs.

http://bugs.kde.org/show_bug.cgi?id=120117

From KDE SVN.
@
text
@d1 1
a1 1
$OpenBSD$
@

