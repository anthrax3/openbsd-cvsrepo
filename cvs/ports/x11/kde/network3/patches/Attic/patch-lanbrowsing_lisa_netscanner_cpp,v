head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2002.12.02.16.27.21;	author espie;	state dead;
branches;
next	1.1;

1.1
date	2002.11.29.14.18.16;	author brad;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 3.0.5
i18n not checked yet...
@
text
@$OpenBSD: patch-lanbrowsing_lisa_netscanner_cpp,v 1.1 2002/11/29 14:18:16 brad Exp $
--- lanbrowsing/lisa/netscanner.cpp.orig	Sat Feb  2 17:27:59 2002
+++ lanbrowsing/lisa/netscanner.cpp	Sun Nov 24 04:26:40 2002
@@@@ -36,6 +36,10 @@@@
 #include <netinet/ip.h>
 #include <netinet/ip_icmp.h>
 
+#ifndef INADDR_NONE
+#define INADDR_NONE -1
+#endif
+
 #define mgetDebug() getDebug()<<procId
 
 struct ICMPEchoRequest
@@@@ -133,7 +137,7 @@@@ void NetScanner::configure(Config& confi
       {
          if ((m_strictMode) && (hostsAdded>=STRICTMODEMAXHOSTS))
             break;
-         memcpy(&server_addr, hp->h_addr, hp->h_length);
+         memcpy(&server_addr, hp->h_addr, sizeof(server_addr));
          char *ip=inet_ntoa(server_addr);
          mgetDebug()<<"NetScanner::configure(): looking up "<<nextName<<" gives -"<<ip<<"-"<<std::endl;
          ipRangeStr=ipRangeStr+ip+';';
@@@@ -377,6 +381,9 @@@@ void NetScanner::nmblookupScan(SimpleLis
          };
       };
    } while (!done);
+
+   // Warning: The return value of plcose may be incorrect due to the
+   // SIGCHLD handler that is installed. Ignore it!
    pclose(nmblookupFile);
 
    delete [] tmpBuf;
@


1.1
log
@Fix 3 vulnerabilites.

The resLISa daemon contains a buffer overflow vulnerability which
potentially enables any local user to obtain access to a raw socket
if 'reslisa' is installed SUID root.  This vulnerability was
discovered by the iDEFENSE security team and Texonet.

The lisa daemon contains a buffer overflow vulnerability which
potentially enables any local user, as well any any remote attacker
on the LAN who is able to gain control of the LISa port (7741 by
default), to obtain root privileges.

In addition, a remote attacker potentially may be able to gain
access to a victim's account by using an "lan://" URL in an HTML
page or via another KDE application.  These vulnerabilities were
discovered by Olaf Kirch at SuSE Linux AG.

http://www.kde.org/info/security/advisory-20021111-2.txt
@
text
@d1 1
a1 1
$OpenBSD$
@

