head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.14
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.12
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.8
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.10
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.6
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.4
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.36
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.34
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.32
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.30
	OPENBSD_5_0:1.5.0.28
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.26
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.24
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.22
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.20
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.18
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.16
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.14
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.12
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.5.0.10
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.5.0.8
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.5.0.6
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.5.0.4
	OPENBSD_3_8_BASE:1.5
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2013.10.22.11.34.10;	author zhuk;	state Exp;
branches;
next	1.5;

1.5
date	2004.12.12.11.33.25;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2004.10.19.00.25.29;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2004.09.18.09.46.37;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.14.18.00.22;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2004.07.24.12.47.15;	author espie;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Do a massive change on the placement of some KDE3 apps data:

  * share/apps => share/apps.kde3
  * share/doc/HTML => share/doc/HTML.kde3

This is a part of KDE3/4 deconflicting work.

Build tested in a bulk by landry@@, also sat over a week on ports@@.
Run-time tested with some KDE3 apps, including KMail, taxipilot, yakuake...

"do it" landry@@
@
text
@$OpenBSD: patch-acinclude_m4,v 1.5 2004/12/12 11:33:25 espie Exp $
--- acinclude.m4.orig	Mon Mar 28 22:15:15 2005
+++ acinclude.m4	Wed Oct  9 18:21:36 2013
@@@@ -580,11 +580,11 @@@@ AC_DEFUN([KDE_SUBST_PROGRAMS],
         if test -n "$MEINPROC" && test ! "$MEINPROC" = "compiled"; then  
  	    kde_sharedirs="/usr/share/kde /usr/local/share /usr/share /opt/kde3/share /opt/kde/share $prefix/share"
             test -n "$KDEDIR" && kde_sharedirs="$KDEDIR/share $kde_sharedirs"
-            AC_FIND_FILE(apps/ksgmltools2/customization/kde-chunk.xsl, $kde_sharedirs, KDE_XSL_STYLESHEET)
+            AC_FIND_FILE(apps.kde3/ksgmltools2/customization/kde-chunk.xsl, $kde_sharedirs, KDE_XSL_STYLESHEET)
 	    if test "$KDE_XSL_STYLESHEET" = "NO"; then
 		KDE_XSL_STYLESHEET=""
 	    else
-                KDE_XSL_STYLESHEET="$KDE_XSL_STYLESHEET/apps/ksgmltools2/customization/kde-chunk.xsl"
+                KDE_XSL_STYLESHEET="$KDE_XSL_STYLESHEET/apps.kde3/ksgmltools2/customization/kde-chunk.xsl"
 	    fi
         fi
 
@@@@ -6025,6 +6025,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [dnl
     lt_cv_sys_max_cmd_len=8192;
     ;;
 
+  netbsd* | freebsd* | openbsd* | darwin* )
+    # This has been around since 386BSD, at least.  Likely further.
+    if test -x /sbin/sysctl; then
+      lt_cv_sys_max_cmd_len=`/sbin/sysctl -n kern.argmax`
+    elif test -x /usr/sbin/sysctl; then
+      lt_cv_sys_max_cmd_len=`/usr/sbin/sysctl -n kern.argmax`
+    else
+      lt_cv_sys_max_cmd_len=65536 # usable default for *BSD
+    fi
+    # And add a safety zone
+    lt_cv_sys_max_cmd_len=`expr $lt_cv_sys_max_cmd_len \/ 4`
+    ;;
+
  *)
     # If test is not a shell built-in, we'll probably end up computing a
     # maximum length that is only half of the actual maximum length, but
@@@@ -7561,13 +7574,7 @@@@ nto-qnx*)
   ;;
 
 openbsd*)
-  lt_cv_file_magic_cmd=/usr/bin/file
-  lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
-  if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
-    lt_cv_deplibs_check_method='file_magic ELF [[0-9]][[0-9]]*-bit [[LM]]SB shared object'
-  else
-    lt_cv_deplibs_check_method='file_magic OpenBSD.* shared library'
-  fi
+  lt_cv_deplibs_check_method=pass_all
   ;;
 
 osf3* | osf4* | osf5*)
@@@@ -8519,6 +8526,22 @@@@ case $host_os in
     # Workaround some broken pre-1.5 toolchains
     output_verbose_link_cmd='$CC -shared $CFLAGS -v conftest.$objext 2>&1 | grep conftest.$objext | $SED -e "s:-lgcc -lc -lgcc::"'
     ;;
+  openbsd2*)
+      # C++ shared libraries are fairly broken
+      _LT_AC_TAGVAR(ld_shlibs, $1)=no
+      ;;
+  openbsd*)
+      _LT_AC_TAGVAR(hardcode_direct, $1)=yes
+      _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
+      _LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags -o $lib'
+      _LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
+      if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+       _LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag $predep_objects $libobjs $deplibs $postdep_objects $compiler_flags ${wl}-retain-symbols-file,$export_symbols -o $lib'
+       _LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
+       _LT_AC_TAGVAR(whole_archive_flag_spec, $1)="$wlarc"'--whole-archive$convenience '"$wlarc"'--no-whole-archive'
+      fi
+      output_verbose_link_cmd='echo'
+      ;;
   osf3*)
     case $cc_basename in
       KCC)
@@@@ -10836,6 +10859,7 @@@@ EOF
       _LT_AC_TAGVAR(hardcode_shlibpath_var, $1)=no
       if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
 	_LT_AC_TAGVAR(archive_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags'
+	_LT_AC_TAGVAR(archive_expsym_cmds, $1)='$CC -shared $pic_flag -o $lib $libobjs $deplibs $compiler_flags ${wl}-retain-symbols-file,$export_symbols'
 	_LT_AC_TAGVAR(hardcode_libdir_flag_spec, $1)='${wl}-rpath,$libdir'
 	_LT_AC_TAGVAR(export_dynamic_flag_spec, $1)='${wl}-E'
       else
@


1.5
log
@3.3.2 is out, rejoice.
minor update.
@
text
@d1 18
a18 4
$OpenBSD: patch-acinclude_m4,v 1.4 2004/10/19 00:25:29 espie Exp $
--- acinclude.m4.orig	Tue Nov 30 15:40:08 2004
+++ acinclude.m4	Mon Dec  6 11:54:55 2004
@@@@ -6208,6 +6208,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d38 1
a38 1
@@@@ -7748,13 +7761,7 @@@@ nto-qnx*)
d53 1
a53 1
@@@@ -8706,6 +8713,22 @@@@ case $host_os in
d76 1
a76 1
@@@@ -11023,6 +11046,7 @@@@ EOF
@


1.4
log
@minor update to 3.3.1
@
text
@d1 4
a4 4
$OpenBSD: patch-acinclude_m4,v 1.3 2004/09/18 09:46:37 espie Exp $
--- acinclude.m4.orig	Fri Oct  8 15:52:10 2004
+++ acinclude.m4	Wed Oct 13 08:16:40 2004
@@@@ -6173,6 +6173,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d24 1
a24 1
@@@@ -7713,13 +7726,7 @@@@ nto-qnx*)
d39 1
a39 1
@@@@ -8671,6 +8678,22 @@@@ case $host_os in
d62 1
a62 1
@@@@ -10988,6 +11011,7 @@@@ EOF
@


1.3
log
@removed patches, better synched global patches.
@
text
@d1 4
a4 4
$OpenBSD: patch-acinclude_m4,v 1.2 2004/08/14 18:00:22 brad Exp $
--- acinclude.m4.orig	Sat Aug 14 01:39:40 2004
+++ acinclude.m4	Mon Sep  6 01:08:05 2004
@@@@ -6168,6 +6168,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d24 1
a24 1
@@@@ -7708,13 +7721,7 @@@@ nto-qnx*)
d39 1
a39 1
@@@@ -8666,6 +8673,22 @@@@ case $host_os in
d62 1
a62 1
@@@@ -10983,6 +11006,7 @@@@ EOF
@


1.2
log
@sync libtool patches to fix amd64 C++ linking issues among other things.

ok naddy@@
@
text
@d1 4
a4 4
$OpenBSD: patch-acinclude_m4,v 1.1 2004/07/24 12:47:15 espie Exp $
--- acinclude.m4.orig	Sun May 30 12:24:10 2004
+++ acinclude.m4	Thu Aug 12 16:57:18 2004
@@@@ -6073,6 +6073,19 @@@@ AC_CACHE_VAL([lt_cv_sys_max_cmd_len], [d
d24 1
a24 1
@@@@ -7609,13 +7622,7 @@@@ nto-qnx*)
d39 1
a39 1
@@@@ -8567,6 +8574,22 @@@@ case $host_os in
d62 1
a62 1
@@@@ -10884,6 +10907,7 @@@@ EOF
@


1.1
log
@basic update to kde 3.2.3.
A few files to remove/add yet.
@
text
@d1 26
a26 4
$OpenBSD$
--- acinclude.m4.orig	Sun May 30 18:53:46 2004
+++ acinclude.m4	Mon Jul 19 17:00:13 2004
@@@@ -7618,11 +7618,7 @@@@ nto-qnx*)
d28 2
a29 2
   lt_cv_file_magic_cmd=/usr/bin/file
   lt_cv_file_magic_test_file=`echo /usr/lib/libc.so.*`
d39 31
@

