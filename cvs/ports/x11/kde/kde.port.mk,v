head	1.44;
access;
symbols
	OPENBSD_6_0:1.44.0.2
	OPENBSD_6_0_BASE:1.44
	OPENBSD_5_9:1.43.0.8
	OPENBSD_5_9_BASE:1.43
	OPENBSD_5_8:1.43.0.10
	OPENBSD_5_8_BASE:1.43
	OPENBSD_5_7:1.43.0.6
	OPENBSD_5_7_BASE:1.43
	OPENBSD_5_6:1.43.0.4
	OPENBSD_5_6_BASE:1.43
	OPENBSD_5_5:1.43.0.2
	OPENBSD_5_5_BASE:1.43
	OPENBSD_5_4:1.40.0.2
	OPENBSD_5_4_BASE:1.40
	OPENBSD_5_3:1.38.0.2
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.35.0.8
	OPENBSD_5_2_BASE:1.35
	OPENBSD_5_1_BASE:1.35
	OPENBSD_5_1:1.35.0.6
	OPENBSD_5_0:1.35.0.4
	OPENBSD_5_0_BASE:1.35
	OPENBSD_4_9:1.35.0.2
	OPENBSD_4_9_BASE:1.35
	OPENBSD_4_8:1.32.0.2
	OPENBSD_4_8_BASE:1.32
	OPENBSD_4_7:1.30.0.6
	OPENBSD_4_7_BASE:1.30
	OPENBSD_4_6:1.30.0.4
	OPENBSD_4_6_BASE:1.30
	OPENBSD_4_5:1.30.0.2
	OPENBSD_4_5_BASE:1.30
	OPENBSD_4_4:1.29.0.2
	OPENBSD_4_4_BASE:1.29
	OPENBSD_4_3:1.28.0.2
	OPENBSD_4_3_BASE:1.28
	OPENBSD_4_2:1.26.0.2
	OPENBSD_4_2_BASE:1.26
	OPENBSD_4_1:1.22.0.4
	OPENBSD_4_1_BASE:1.22
	OPENBSD_4_0:1.22.0.2
	OPENBSD_4_0_BASE:1.22
	OPENBSD_3_9:1.19.0.2
	OPENBSD_3_9_BASE:1.19
	OPENBSD_3_8:1.16.0.2
	OPENBSD_3_8_BASE:1.16
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.12.0.2
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3;
locks; strict;
comment	@# @;


1.44
date	2016.03.19.22.48.28;	author naddy;	state Exp;
branches;
next	1.43;
commitid	SIHnGQ3XIdGCb86J;

1.43
date	2013.12.24.10.38.48;	author zhuk;	state Exp;
branches;
next	1.42;

1.42
date	2013.10.22.11.33.55;	author zhuk;	state Exp;
branches;
next	1.41;

1.41
date	2013.10.05.07.34.37;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2013.07.08.14.03.29;	author zhuk;	state Exp;
branches;
next	1.39;

1.39
date	2013.03.21.08.48.56;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2013.01.23.21.10.37;	author zhuk;	state Exp;
branches;
next	1.36;

1.36
date	2013.01.13.19.35.41;	author zhuk;	state Exp;
branches;
next	1.35;

1.35
date	2010.11.22.08.37.01;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2010.11.06.19.38.54;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2010.10.24.21.15.33;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.07.08.21.28.48;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.07.06.22.52.07;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2008.11.28.19.36.14;	author steven;	state Exp;
branches;
next	1.29;

1.29
date	2008.05.15.21.16.30;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2007.12.11.07.55.05;	author jakemsr;	state Exp;
branches;
next	1.27;

1.27
date	2007.10.24.21.52.16;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2007.05.25.09.49.53;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2007.05.14.14.06.43;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2007.05.09.11.31.43;	author bernd;	state Exp;
branches;
next	1.23;

1.23
date	2007.04.26.07.39.09;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2006.08.01.16.20.46;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2006.06.03.12.47.30;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2006.04.01.10.49.17;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2006.02.16.13.48.27;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2005.11.03.15.56.57;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2005.09.18.12.21.07;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2005.04.09.10.48.31;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2005.03.29.21.18.34;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.02.07.11.30.04;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2004.09.18.09.30.06;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2004.08.03.11.39.37;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2004.08.03.11.37.52;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2004.07.24.12.47.13;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2004.05.10.10.12.29;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2004.04.10.12.58.56;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2004.02.23.18.12.34;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2004.02.01.14.55.03;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.22.20.25.33;	author marcm;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.17.04.49.28;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2003.02.28.15.08.21;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2003.02.25.00.19.43;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2003.02.08.12.37.50;	author espie;	state Exp;
branches;
next	;


desc
@@


1.44
log
@drop SHARED_ONLY from KDE3 ports
@
text
@# $OpenBSD: kde.port.mk,v 1.43 2013/12/24 10:38:48 zhuk Exp $

MODKDE_VERSION ?=
MODULES +=	x11/qt3
MODQT_OVERRIDE_UIC ?=No

MODKDE_NODEBUG ?=No

.if !${MODKDE_NODEBUG:L} == "yes"
FLAVORS +=	debug
.endif
FLAVOR ?=

MODKDE_CONFIGURE_ARGS =${MODQT_CONFIGURE_ARGS}
MODKDE_CONFIGURE_ARGS +=	--with-extra-libs="${LOCALBASE}/lib/kde3:${LOCALBASE}/lib/db4:${LOCALBASE}/lib/samba:${LOCALBASE}/lib"
MODKDE_CONFIGURE_ARGS +=	--with-extra-includes="${LOCALBASE}/include/avahi-compat-libdns_sd:${LOCALBASE}/include/db4:${LOCALBASE}/include/libpng:${LOCALBASE}/include"
MODKDE_CONFIGURE_ARGS +=	--includedir=${PREFIX}/include/kde
MODKDE_CONFIGURE_ARGS +=	--with-xdmdir=/var/X11/kdm
MODKDE_CONFIGURE_ARGS +=	--enable-mitshm
MODKDE_CONFIGURE_ARGS +=	--with-xinerama
.if ${FLAVOR:Mdebug}
MODKDE_CONFIGURE_ARGS +=	--enable-debug=yes
.else
MODKDE_CONFIGURE_ARGS +=	--disable-debug
MODKDE_CONFIGURE_ARGS +=	--disable-dependency-tracking
.endif
MODKDE_CONFIGURE_ARGS +=	--enable-final

MODKDE_CONFIG_GUESS_DIRS =	${WRKSRC} ${WRKSRC}/admin

MODKDE_CONFIGURE_ENV =		UIC_PATH="${MODQT_UIC}" UIC="${MODQT_UIC}"
MODKDE_CONFIGURE_ENV +=		RUN_KAPPFINDER=no KDEDIR=${LOCALBASE}
MODKDE_CONFIGURE_ENV +=		PTHREAD_LIBS=-pthread
MODKDE_CONFIGURE_ENV +=		kde_confdir='\$${datadir}/config.kde3'
MODKDE_CONFIGURE_ENV +=		kde_datadir='\$${datadir}/apps.kde3'
MODKDE_CONFIGURE_ENV +=		kde_htmldir='\$${datadir}/doc/HTML.kde3'
MODKDE_CONFIGURE_ENV +=		kde_kcfgdir='\$${datadir}/config.kcfg.kde3'
MODKDE_MAKE_FLAGS =		CXXLD='--tag CXX ${CXX} -L${MODQT_LIBDIR}'
MODKDE_MAKE_FLAGS +=		LIBRESOLV=

MODKDE_post-patch =	find ${WRKDIST} -name Makefile.am -exec touch {}.in \;

MODKDE_CONFIG_SUBDIR =	share/config.kde3
MODKDE_DATA_SUBDIR =	share/apps.kde3
MODKDE_HTML_SUBDIR =	share/doc/HTML.kde3

KDE =		lib/kde3
SUBST_VARS +=	KDE

SUP_PATCH_LIST ?=
.if ${MODKDE_VERSION} == "3.1"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.1/patch-* patch-* ${SUP_PATCH_LIST}
.elif ${MODKDE_VERSION} == "3.2"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.2/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.20
.elif ${MODKDE_VERSION} == "3.2.3"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.2.3/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.20
.elif ${MODKDE_VERSION} == "3.3.0"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.2.3/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.33
.elif ${MODKDE_VERSION} == "3.4"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.4/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.33
.elif ${MODKDE_VERSION} == "3.5"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.5/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.33
.elif ${MODKDE_VERSION} == "3.5.2"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.5.2/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.33
.elif ${MODKDE_VERSION} == "3.5.3"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.5.3/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.33
.elif ${MODKDE_VERSION} == "3.5.7" || ${MODKDE_VERSION} == "3.5.8"
PATCH_LIST =	${PORTSDIR}/x11/kde/patches-3.5.7/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF ?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
WANTLIB +=	lib/qt3/qt-mt>=3.33
LIBTOOL_FLAGS =	--tag=disable-static
.endif

# Create soft links for shared libraries in ${PREFIX}/lib to ${KDE}.
# Used to avoid clashing with KDE4+.
MODKDE_LIB_LINKS ?=    No

.if ${MODKDE_LIB_LINKS:L} != "no" && defined(SHARED_LIBS) && !empty(SHARED_LIBS)
MODKDE_post-install = mkdir -p ${PREFIX}/${KDE}; cd ${PREFIX}/${KDE}
. for l v in ${SHARED_LIBS}
MODKDE_post-install += ; test -e ../lib$l.so.$v && \
	ln -sf ../lib$l.so.$v lib$l.so.$v
. endfor
.endif

KDE3_ONLY ?= Yes
.if ${KDE3_ONLY:L} == "yes"
DPB_PROPERTIES += tag:kde3
.endif

MODKDE_FIXUP_DATADIR ?=	No
.if ${MODKDE_FIXUP_DATADIR:L} == "yes"
MODKDE_post-patch = find ${WRKSRC} -name Makefile.in -or -name Makefile.am | \
	xargs perl -pi.datadir \
	  -e 's!^datadir\s*=\s*\$$\(kde_datadir\)(.*)$$!datadir = ${PREFIX}/${MODKDE_DATA_SUBDIR}$$1!;' \
	  -e 's!^datadir\s*=\s*\$$\(kde_htmldir\)(.*)$$!datadir = ${PREFIX}/${MODKDE_HTML_SUBDIR}$$1!;'
.endif
@


1.43
log
@Enforcing defaults to *.kde3 dirs when building, too.
@
text
@d1 1
a1 3
# $OpenBSD: kde.port.mk,v 1.42 2013/10/22 11:33:55 zhuk Exp $

SHARED_ONLY ?=	Yes
@


1.42
log
@Do a massive change on the placement of some KDE3 apps data:

  * share/apps => share/apps.kde3
  * share/doc/HTML => share/doc/HTML.kde3

This is a part of KDE3/4 deconflicting work.

Build tested in a bulk by landry@@, also sat over a week on ports@@.
Run-time tested with some KDE3 apps, including KMail, taxipilot, yakuake...

"do it" landry@@
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.41 2013/10/05 07:34:37 espie Exp $
d36 1
d39 1
d45 1
@


1.41
log
@disentangle kde3 from kde4: all kde3 with the same name get an explict
PKGSPEC.  revision bumps follow.

Also, tag all kde3 ports, those that use the module and those that do not,
with explicit kde3 tags.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.40 2013/07/08 14:03:29 zhuk Exp $
d36 2
d43 3
d102 8
@


1.40
log
@Replace ${post_install_libs} in Makefile.inc with MODKDE_LIB_LINKS
(see analog in kde4.port.mk). Some stuff outside x11/kde will need this
functionality, too, as it was merged into KDE4 SC.

okay espie@@
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.39 2013/03/21 08:48:56 ajacoutot Exp $
d92 5
@


1.39
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.38 2013/02/09 14:49:53 sthen Exp $
d41 1
a41 1
KDE=lib/kde3
d80 12
@


1.38
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.37 2013/01/23 21:10:37 zhuk Exp $
a78 1
USE_LIBTOOL ?=	Yes
@


1.37
log
@Move KDE 3 headers from ${PREFIX}/include to ${PREFIX}/include/kde.
Updates to dependant ports to follow.

Tested in a bulk, input and okay by landry@@
Reviewed by aja@@ too
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.36 2013/01/13 19:35:41 zhuk Exp $
d23 1
a23 1
.if ${FLAVOR:L:Mdebug}
@


1.36
log
@Enable Avahi support in KDE 3. Tested in a bulk build by landry@@.
okay by espie@@ and ajacoutot@@.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.35 2010/11/22 08:37:01 espie Exp $
d19 1
@


1.35
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.34 2010/11/06 19:38:54 espie Exp $
d18 1
a18 1
MODKDE_CONFIGURE_ARGS +=	--with-extra-includes="${LOCALBASE}/include/db4:${LOCALBASE}/include/libpng:${LOCALBASE}/include"
@


1.34
log
@kde -> wantlib
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.33 2010/10/24 21:15:33 ajacoutot Exp $
d49 1
a49 1
WANTLIB +=	lib/qt3/qt-mt.>=3.20
d53 1
a53 1
WANTLIB +=	lib/qt3/qt-mt.>=3.20
d57 1
a57 1
WANTLIB +=	lib/qt3/qt-mt.>=3.33
d61 1
a61 1
WANTLIB +=	lib/qt3/qt-mt.>=3.33
d65 1
a65 1
WANTLIB +=	lib/qt3/qt-mt.>=3.33
d69 1
a69 1
WANTLIB +=	lib/qt3/qt-mt.>=3.33
d73 1
a73 1
WANTLIB +=	lib/qt3/qt-mt.>=3.33
d77 1
a77 1
WANTLIB +=	lib/qt3/qt-mt.>=3.33
@


1.33
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.32 2010/07/08 21:28:48 espie Exp $
d49 1
a49 1
LIB_DEPENDS += lib/qt3/qt-mt.>=3.20::x11/qt3
d53 1
a53 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.20::x11/qt3
d57 1
a57 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.33::x11/qt3
d61 1
a61 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.33::x11/qt3
d65 1
a65 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.33::x11/qt3
d69 1
a69 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.33::x11/qt3
d73 1
a73 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.33::x11/qt3
d77 1
a77 1
LIB_DEPENDS +=	lib/qt3/qt-mt.>=3.33::x11/qt3
@


1.32
log
@clean-up AND small changes:
- copy libs over to lib/kde3 (to prepare coexistence with kde4, eventually)
- move lib depends over to WANTLIB
- update WANTLIB for recent changes
- create links to avoid pkg_create protests over non existing links
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.31 2010/07/06 22:52:07 espie Exp $
a78 1
USE_X11 =	Yes
@


1.31
log
@remove old stuff, and ws
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.30 2008/11/28 19:36:14 steven Exp $
d17 1
a17 1
MODKDE_CONFIGURE_ARGS +=	--with-extra-libs="${LOCALBASE}/lib/db4:${LOCALBASE}/lib/samba:${LOCALBASE}/lib"
@


1.30
log
@don't override USE_LIBTOOL

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.28 2007/12/11 07:55:05 jakemsr Exp $
d3 1
a3 1
SHARED_ONLY?=	Yes
d5 3
a7 4
MODKDE_VERSION?=
MODULES+=	x11/qt3
MODQT_OVERRIDE_UIC?=No
MODQT_MT?=Yes
d9 1
a9 1
MODKDE_NODEBUG?=No
d12 1
a12 1
FLAVORS+=	debug
d14 1
a14 1
FLAVOR?=
d16 6
a21 6
MODKDE_CONFIGURE_ARGS=${MODQT_CONFIGURE_ARGS}
MODKDE_CONFIGURE_ARGS+=	--with-extra-libs="${LOCALBASE}/lib/db4:${LOCALBASE}/lib/samba:${LOCALBASE}/lib"
MODKDE_CONFIGURE_ARGS+=	--with-extra-includes="${LOCALBASE}/include/db4:${LOCALBASE}/include/libpng:${LOCALBASE}/include"
MODKDE_CONFIGURE_ARGS+=	--with-xdmdir=/var/X11/kdm
MODKDE_CONFIGURE_ARGS+=	--enable-mitshm
MODKDE_CONFIGURE_ARGS+=	--with-xinerama
d23 1
a23 1
MODKDE_CONFIGURE_ARGS+=	--enable-debug=yes
d25 2
a26 2
MODKDE_CONFIGURE_ARGS+=	--disable-debug
MODKDE_CONFIGURE_ARGS+=	--disable-dependency-tracking
d28 1
a28 1
MODKDE_CONFIGURE_ARGS+=	--enable-final
d30 1
a30 1
MODKDE_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/admin
d32 7
a38 16
MODKDE_CONFIGURE_ENV=		UIC_PATH="${MODQT_UIC}" UIC="${MODQT_UIC}"
MODKDE_CONFIGURE_ENV+=		RUN_KAPPFINDER=no KDEDIR=${LOCALBASE}
MODKDE_CONFIGURE_ENV+=		PTHREAD_LIBS=-pthread
MODKDE_MAKE_FLAGS=		CXXLD='--tag CXX ${CXX} -L${MODQT_LIBDIR}'
MODKDE_MAKE_FLAGS+=		LIBRESOLV=

MODKDE_post-patch=	find ${WRKDIST} -name Makefile.am -exec touch {}.in \;

MODKDE_LIBTOOL?=No
.if ${MODKDE_LIBTOOL:L} == "yes"
LIBTOOL?=${LOCALBASE}/bin/kdelibtool
BUILD_DEPENDS+=		::x11/kde/libs3
CONFIGURE_ENV+=		LIBTOOL="${LIBTOOL} ${LIBTOOL_FLAGS}"
MAKE_ENV+=			LIBTOOL="${LIBTOOL} ${LIBTOOL_FLAGS}"
MAKE_FLAGS+=		LIBTOOL="${LIBTOOL} ${LIBTOOL_FLAGS}"
.endif
d41 1
a41 1
SUBST_VARS+=	KDE
d43 1
a43 1
SUP_PATCH_LIST?=
d45 1
a45 1
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.1/patch-* patch-* ${SUP_PATCH_LIST}
d47 3
a49 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.2/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.20::x11/qt3
d51 3
a53 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.2.3/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.20::x11/qt3
d55 3
a57 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.2.3/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3
d59 3
a61 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.4/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3
d63 3
a65 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.5/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3
d67 3
a69 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.5.2/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3
d71 3
a73 3
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.5.3/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3
d75 6
a80 8
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.5.7/patch-* patch-* ${SUP_PATCH_LIST}
AUTOCONF?=	/bin/sh ${WRKDIST}/admin/cvs.sh configure
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3
USE_LIBTOOL?=	Yes
USE_X11=	Yes
LIBTOOL_FLAGS=--tag=disable-static
.elif ${MODKDE_VERSION} == "2.2.2"
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-2.2.2/patch-* patch-* ${SUP_PATCH_LIST}
@


1.29
log
@fix name for post-patch hook; ok espie@@
@
text
@d88 1
a88 1
USE_LIBTOOL=	Yes
@


1.28
log
@
use -pthread instead of -lpthread for pthreads linkage

fix some WANTLIB/LIB_DEPENDS in akode and amarok while here

bulk build tested by steven@@, "go ahead" espie@@ a while ago
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.27 2007/10/24 21:52:16 espie Exp $
d39 1
a39 1
MODX11/KDE_post-patch=	find ${WRKDIST} -name Makefile.am -exec touch {}.in \;
@


1.27
log
@update to 3.5.8
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.26 2007/05/25 09:49:53 espie Exp $
d35 1
@


1.26
log
@update a large subset of kde 3 to 3.5.7.
Simplify the infrastructure a bit, and let it compile with libfam, now...
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.25 2007/05/14 14:06:43 espie Exp $
d83 1
a83 1
.elif ${MODKDE_VERSION} == "3.5.7"
@


1.25
log
@some tweaks in preparation of kde 3.5.7:
- the infrastructure now uses autoconf 2.60.
- don't bother to patch libtool, we have USE_LIBTOOL across the board.
- set LIBTOOL_FLAGS to ignore static libraries by default. We will no
longer bother building arts with static libs, since arts is going to
die with kde4, and nothing hardly ever uses it now (in fact, the 3.5.7
release of arts includes no new code, only infrastructure changes)
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.24 2007/05/09 11:31:43 bernd Exp $
a20 1
MODKDE_CONFIGURE_ARGS+=	--disable-libfam
d88 1
@


1.24
log
@Don't depend on the qt3 'mt' FLAVOR. This FLAVOR doesn't do anything
and will be removed shortly. Bump PKGNAMEs.

Discussed with and ok espie@@.
Bulk build testing by steven@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.23 2007/04/26 07:39:09 espie Exp $
d84 6
@


1.23
log
@disable newly imported fam support for now, until we've had
time for proper tests.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.22 2006/08/01 16:20:46 espie Exp $
d59 1
a59 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.20::x11/qt3,mt
d63 1
a63 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.20::x11/qt3,mt
d67 1
a67 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3,mt
d71 1
a71 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3,mt
d75 1
a75 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3,mt
d79 1
a79 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3,mt
d83 1
a83 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3.33::x11/qt3,mt
@


1.22
log
@new specs
missed audio files, and chinese.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.21 2006/06/03 12:47:30 espie Exp $
d5 1
d21 1
a52 1
MODKDE_VERSION?=
@


1.21
log
@minor update to 3.5.3, integrate libidn support (some more changes to come
to WANTLIB in packages dependent on KDE).
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.20 2006/04/01 10:49:17 espie Exp $
d58 1
a58 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.20::x11/qt3,mt
d62 1
a62 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.20::x11/qt3,mt
d66 1
a66 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.33::x11/qt3,mt
d70 1
a70 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.33::x11/qt3,mt
d74 1
a74 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.33::x11/qt3,mt
d78 1
a78 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.33::x11/qt3,mt
d82 1
a82 1
LIB_DEPENDS+=lib/qt3/qt-mt.3.33::x11/qt3,mt
@


1.20
log
@update to 3.5.2
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.19 2006/02/16 13:48:27 espie Exp $
d77 4
@


1.19
log
@This is needed for addons...
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.18 2005/11/03 15:56:57 espie Exp $
d73 4
@


1.18
log
@samba support.
We do this as a build-depends. If people install samba, then smb://
works, otherwise it does not.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.17 2005/09/18 12:21:07 espie Exp $
d17 2
a18 2
MODKDE_CONFIGURE_ARGS+=	--with-extra-libs="${LOCALBASE}/lib/samba:${LOCALBASE}/lib"
MODKDE_CONFIGURE_ARGS+=	--with-extra-includes="${LOCALBASE}/include/libpng:${LOCALBASE}/include"
@


1.17
log
@now that kde 3.5 is almost out, prepare infrastructure
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.16 2005/04/09 10:48:31 espie Exp $
d17 1
a17 1
MODKDE_CONFIGURE_ARGS+=	--with-extra-libs="${LOCALBASE}/lib"
@


1.16
log
@more kde interdependencies handling. Checked through a full build.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.15 2005/03/29 21:18:34 espie Exp $
d69 4
@


1.15
log
@most of kde 3.4, will finish getting fixed in tree... ;-)
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.14 2005/02/07 11:30:04 espie Exp $
d36 2
@


1.14
log
@explicitly set LIBRESOLV to nothing, so that we don't link with a dummy
lib (throws libtool since we don't have a shared version).
zap -g I used to debug.
better directories in network.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.13 2004/09/18 09:30:06 espie Exp $
d37 9
d63 4
@


1.13
log
@supports 3.3.0
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.12 2004/08/03 11:39:37 espie Exp $
d35 1
@


1.12
log
@arts is special.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.11 2004/08/03 11:37:52 espie Exp $
d51 4
@


1.11
log
@switch to new-style module
Acknowledge that we don't know how to deal with non shared archs yet.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.10 2004/07/24 12:47:13 espie Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
@


1.10
log
@basic update to kde 3.2.3.
A few files to remove/add yet.
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.9 2004/05/10 10:12:29 brad Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${NO_SHARED_ARCHS}
d5 1
a5 1
MODULES+=	qt3
@


1.9
log
@need shared libs
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.8 2004/04/10 12:58:56 sturm Exp $
d45 4
@


1.8
log
@allow for additional MD patch files by introducing SUP_PATCH_LIST
@
text
@d1 4
a4 1
# $OpenBSD: kde.port.mk,v 1.7 2004/02/23 18:12:34 espie Exp $
@


1.7
log
@V3.2, at least, uses a wrapper that fixes a few bugs in autoconf invocations...
BLECH!
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.6 2004/02/01 14:55:03 espie Exp $
d37 1
d39 1
a39 1
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.1/patch-* patch-*
d41 1
a41 1
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.2/patch-* patch-*
d45 1
a45 1
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-2.2.2/patch-* patch-*
@


1.6
log
@support for kde 3.2
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.5 2003/05/22 20:25:33 marcm Exp $
d41 1
@


1.5
log
@Unbreak KDE builds.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.4 2003/05/17 04:49:28 brad Exp $
d39 3
@


1.4
log
@= -> ?=
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.3 2003/02/28 15:08:21 brad Exp $
d38 1
a38 1
PATCH_LIST?=	${PORTSDIR}/x11/kde/patches-3.1/patch-* patch-*
d40 1
a40 1
PATCH_LIST?=	${PORTSDIR}/x11/kde/patches-2.2.2/patch-* patch-*
@


1.3
log
@MODKDENO_DEBUG -> MODKDE_NODEBUG, the two users of this were already using
the later variable name.

espie@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.2 2003/02/25 00:19:43 espie Exp $
d38 1
a38 1
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-3.1/patch-* patch-*
d40 1
a40 1
PATCH_LIST=	${PORTSDIR}/x11/kde/patches-2.2.2/patch-* patch-*
@


1.2
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: kde.port.mk,v 1.1 2003/02/08 12:37:50 espie Exp $
d6 3
a8 1
.if !defined(MODKDENO_DEBUG)
@


1.1
log
@start moving to a proper kde module. Don't put too many things in there yet.
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
a25 1
MODKE_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/admin
d37 2
@

