head	1.1;
access;
symbols
	OPENBSD_3_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2003.01.07.00.12.40;	author brad;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.01.07.00.12.40;	author brad;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file patch-kfaxview_kfax_multipage_cpp was initially added on branch OPENBSD_3_1.
@
text
@@


1.1.2.1
log
@- add patches from auditing effort for KDE 2.2
- bump PKGNAME's

http://www.kde.org/info/security/advisory-20021220-1.txt
@
text
@a0 15
$OpenBSD$
--- kfaxview/kfax_multipage.cpp.orig	Thu Mar 29 14:23:42 2001
+++ kfaxview/kfax_multipage.cpp	Sun Jan  5 21:26:04 2003
@@@@ -138,9 +138,8 @@@@ bool KFaxMultiPage::openTIFF(TIFF *tif)
 	{
 	  QString fname = KGlobal::dirs()->saveLocation("data", "kfax/faxes");
 	  fname += "/faxXXXXXX";
-	  char buffer[256];
-	  strcpy(buffer, fname.local8Bit());
-	  int fd=mkstemp(buffer);
+	  QCString buffer = QFile::encodeName(fname);
+	  int fd=mkstemp(buffer.data());
 	  TIFF *tif2 = TIFFFdOpen(fd, buffer, "w");
 	  if (!tif2)
 	    {
@

