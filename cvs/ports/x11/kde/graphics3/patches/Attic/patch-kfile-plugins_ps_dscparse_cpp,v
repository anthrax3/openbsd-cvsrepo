head	1.1;
access;
symbols
	OPENBSD_3_2:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2003.04.10.18.59.40;	author brad;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.04.10.18.59.40;	author brad;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file patch-kfile-plugins_ps_dscparse_cpp was initially added on branch OPENBSD_3_2.
@
text
@@


1.1.2.1
log
@Fix security issue mentioned in this advisory

http://www.kde.org/info/security/advisory-20030409-1.txt

as well as applying the other security related fixes from KDE 3.0.5b.
@
text
@a0 12
$OpenBSD$
--- kfile-plugins/ps/dscparse.cpp.orig	Sun Feb 17 12:38:24 2002
+++ kfile-plugins/ps/dscparse.cpp	Thu Apr 10 02:05:05 2003
@@@@ -2313,7 +2313,7 @@@@ dsc_private int
 dsc_check_match_prompt(CDSC *dsc, const char *str, int count)
 {
     if (count != 0) {
-	char buf[MAXSTR+MAXSTR];
+	char buf[MAXSTR+MAXSTR] = "";
 	if (dsc->line_length < (unsigned int)(sizeof(buf)/2-1))  {
 	    strncpy(buf, dsc->line, dsc->line_length);
 	    buf[dsc->line_length] = '\0';
@

