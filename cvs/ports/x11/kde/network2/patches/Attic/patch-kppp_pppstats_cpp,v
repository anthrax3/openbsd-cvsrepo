head	1.1;
access;
symbols
	OPENBSD_3_1:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2003.01.07.00.12.40;	author brad;	state dead;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2003.01.07.00.12.40;	author brad;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file patch-kppp_pppstats_cpp was initially added on branch OPENBSD_3_1.
@
text
@@


1.1.2.1
log
@- add patches from auditing effort for KDE 2.2
- bump PKGNAME's

http://www.kde.org/info/security/advisory-20021220-1.txt
@
text
@a0 21
$OpenBSD$
--- kppp/pppstats.cpp.orig	Thu Apr  5 19:39:53 2001
+++ kppp/pppstats.cpp	Sun Jan  5 21:33:22 2003
@@@@ -162,6 +162,7 @@@@ bool PPPStats::ifIsUp() {
     }
 
     strncpy(ifr.ifr_name, unitName, sizeof(ifr.ifr_name));
+    ifr.ifr_name[sizeof(ifr.ifr_name)-1] = '\0';
 
     if(ioctl(s, SIOCGIFFLAGS, (caddr_t) &ifr) < 0) {
         if (errno)
@@@@ -206,7 +207,8 @@@@ bool PPPStats::initStats() {
   packetsoutunc = 0;
   ioStatus = BytesNone;
 
-  strcpy(ifr.ifr_name, unitName);
+  strncpy(ifr.ifr_name, unitName, sizeof(ifr.ifr_name));
+  ifr.ifr_name[sizeof(ifr.ifr_name)-1] = '\0';
 
   if (ioctl(s, SIOCGIFADDR, &ifr) < 0) {
   }
@

