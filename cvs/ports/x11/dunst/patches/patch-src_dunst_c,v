head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.08.31.20.57.00;	author sthen;	state Exp;
branches;
next	;
commitid	NtkBfXIPsQ9F93LJ;


desc
@@


1.1
log
@update to dunst-1.2.0, from maintainer Timo Myyr√§
@
text
@$OpenBSD$

Index: src/dunst.c
--- src/dunst.c.orig
+++ src/dunst.c
@@@@ -14,6 +14,9 @@@@
 #include <stdlib.h>
 #include <time.h>
 
+#include <err.h>
+#include <unistd.h>
+
 #include "dbus.h"
 #include "menu.h"
 #include "notification.h"
@@@@ -325,6 +328,9 @@@@ int dunst_main(int argc, char *argv[])
         int owner_id = initdbus();
 
         x_setup();
+	
+        if (pledge("stdio rpath proc exec", NULL) == -1)
+                err(1, "pledge");
 
         if (settings.startup_notification) {
                 notification *n = notification_create();
@
