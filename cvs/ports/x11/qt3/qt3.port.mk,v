head	1.16;
access;
symbols
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.14.0.20
	OPENBSD_5_9_BASE:1.14
	OPENBSD_5_8:1.14.0.22
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.14.0.18
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.16
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.14
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.12
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.14.0.10
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.8
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.6
	OPENBSD_5_0:1.14.0.4
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.12.0.8
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.12.0.6
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.12.0.4
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.12.0.2
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.9.0.4
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.16
date	2016.12.26.07.45.29;	author zhuk;	state Exp;
branches;
next	1.15;
commitid	5EEzWEBpQECJfMdy;

1.15
date	2016.05.18.19.12.22;	author jca;	state Exp;
branches;
next	1.14;
commitid	tRQAatnRIOmxWAoA;

1.14
date	2010.11.22.08.37.04;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.05.10.06.44;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2008.09.03.21.58.17;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2008.07.27.21.44.59;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2008.06.02.17.54.35;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2007.03.28.23.18.09;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2007.03.23.16.28.52;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2006.11.20.20.41.00;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2006.10.24.22.39.36;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.08.01.10.50.19;	author espie;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2006.01.13.19.18.50;	author espie;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2006.01.02.16.59.37;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.10.30.09.12.35;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.08.03.09.18.39;	author espie;	state Exp;
branches;
next	;

1.4.2.1
date	2006.10.29.17.50.15;	author sturm;	state Exp;
branches;
next	;

1.5.2.1
date	2006.11.01.12.25.47;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.16
log
@Pure style tweaking of qt3.port.mk, putting it in line with its colleagues.
@
text
@# $OpenBSD: qt3.port.mk,v 1.15 2016/05/18 19:12:22 jca Exp $

# This fragment defines MODQT_* variables to make it easier to substitute
# qt1/qt2/qt3 in a port.
MODQT_OVERRIDE_UIC ?=	Yes
MODQT3_OVERRIDE_UIC ?=	${MODQT_OVERRIDE_UIC}

MODQT3_LIBDIR =	${LOCALBASE}/lib/qt3
MODQT_LIBDIR ?= ${MODQT3_LIBDIR}
MODQT3_INCDIR =	${LOCALBASE}/include/X11/qt3
MODQT_INCDIR ?= ${MODQT3_INCDIR}

MODQT3_CONFIGURE_ARGS =	--with-qt-includes=${MODQT3_INCDIR} \
			--with-qt-libraries=${MODQT3_LIBDIR}
MODQT_CONFIGURE_ARGS ?=	${MODQT3_CONFIGURE_ARGS}
_MODQT3_SETUP =	MOC=${MODQT3_MOC} \
		MODQT_INCDIR=${MODQT3_INCDIR} \
		MODQT_LIBDIR=${MODQT3_LIBDIR}

.if ${MODQT3_OVERRIDE_UIC:L} == "yes"
_MODQT3_SETUP +=UIC=${MODQT3_UIC}
.endif

# may be needed to find plugins
MODQT3_MOC =	${LOCALBASE}/bin/moc3-mt
MODQT_MOC ?=	${MODQT3_MOC}
MODQT3_UIC =	${LOCALBASE}/bin/uic3-mt
MODQT_UIC ?=	${MODQT3_UIC}
MODQT3_QMAKE =	${LOCALBASE}/bin/qmake-mt
MODQT_QMAKE ?=	${MODQT3_QMAKE}
MODQT3_QTDIR =	${LOCALBASE}/lib/qt3
MODQT_QTDIR ?=	${MODQT3_QTDIR}
MODQT3_LRELEASE = ${LOCALBASE}/bin/lrelease-mt
MODQT_LRELEASE ?= ${MODQT3_LRELEASE}
MODQT3_PLUGINS =lib/qt3/plugins-33
MODQT_PLUGINS ?=${MODQT3_PLUGINS}

MODQT3_LIB_DEPENDS =	x11/qt3
MODQT_LIB_DEPENDS ?=	${MODQT3_LIB_DEPENDS}
LIB_DEPENDS +=		${MODQT3_LIB_DEPENDS}

MODQT3_WANTLIB =	lib/qt3/qt-mt>=3
MODQT_WANTLIB ?=	${MODQT3_WANTLIB}
WANTLIB +=		${MODQT3_WANTLIB}

CONFIGURE_ENV +=${_MODQT3_SETUP}
MAKE_ENV +=	${_MODQT3_SETUP}
MAKE_FLAGS +=	${_MODQT3_SETUP}
@


1.15
log
@Add an abstraction for the lrelease Qt tool

ok sthen@@ zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.14 2010/11/22 08:37:04 espie Exp $
d5 2
a6 3

MODQT_OVERRIDE_UIC ?= Yes
MODQT3_OVERRIDE_UIC ?= ${MODQT_OVERRIDE_UIC}
d12 1
d15 1
a15 1
MODQT_CONFIGURE_ARGS ?= ${MODQT3_CONFIGURE_ARGS}
d19 1
d21 1
a21 1
_MODQT3_SETUP +=	UIC=${MODQT3_UIC}
a22 8
_MODQT_SETUP ?= ${MODQT3_SETUP}

MODQT3_LIB_DEPENDS = x11/qt3
MODQT_LIB_DEPENDS ?= ${MODQT3_LIB_DEPENDS}
MODQT3_WANTLIB = lib/qt3/qt-mt>=3
MODQT_WANTLIB ?= ${MODQT3_WANTLIB}
LIB_DEPENDS +=	${MODQT3_LIB_DEPENDS}
WANTLIB += ${MODQT3_WANTLIB}
d29 2
d38 11
a48 3
CONFIGURE_ENV += ${_MODQT3_SETUP}
MAKE_ENV +=   ${_MODQT3_SETUP}
MAKE_FLAGS += ${_MODQT3_SETUP}
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.13 2010/11/05 10:06:44 espie Exp $
d38 2
@


1.13
log
@convert qt3 to new style
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.12 2008/09/03 21:58:17 brad Exp $
d24 1
a24 1
MODQT3_LIB_DEPENDS = ::x11/qt3
d26 1
a26 1
MODQT3_WANTLIB = lib/qt3/qt-mt.>=3
@


1.12
log
@Remove forgotten MODGCC bits for sparc64. sparc64 has been using gcc3
for 4 1/2 years now.
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.11 2008/07/27 21:44:59 sthen Exp $
d20 1
a20 1
_MODQT3_SETUP +=UIC=${MODQT3_UIC}
d24 1
a24 1
MODQT3_LIB_DEPENDS = lib/qt3/qt-mt.>=3::x11/qt3
d26 2
d29 1
@


1.11
log
@- fix missed adjustment in qt3.port.mk to handle shared_lib bump;
this change requires bumping other ports which use it. pointed
out by naddy, thanks!

- add a comment in Makefile to warn others not to do the same.

ok naddy@@
@
text
@d1 1
a1 5
# $OpenBSD: qt3.port.mk,v 1.10 2008/06/02 17:54:35 naddy Exp $

MODULES+=	gcc3
MODGCC3_ARCHES+=sparc64
MODGCC3_LANGS+=	c++
@


1.10
log
@sync plugin directory with qt library bump
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.9 2007/03/28 23:18:09 espie Exp $
d39 1
a39 1
MODQT3_PLUGINS =lib/qt3/plugins-32
@


1.9
log
@fuck, forgot that one. noticed by naddy.
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.8 2007/03/23 16:28:52 espie Exp $
d39 1
a39 1
MODQT3_PLUGINS =lib/qt3/plugins-31
@


1.8
log
@tweak the modules so they also define MODQTn_* values along the usual
MODQT_* values.

This makes it possible to include both qt3 and qt4, as long as one is
very careful in choosing the right variables, without any change for the
existing qt3-only, qt4-only ports.

We don't bother with qt and qt2 as they are mostly end-of-life.
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.7 2006/11/20 20:41:00 espie Exp $
d39 1
a39 1
MODQT3_PLUGINS =lib/qt3/plugins-30
@


1.7
log
@switch to new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.6 2006/10/24 22:39:36 espie Exp $
d7 1
a7 1
# This fragment uses MODQT_* variables to make it easier to substitute
d9 16
a24 11
MODQT_LIBDIR=	${LOCALBASE}/lib/qt3
MODQT_INCDIR=	${LOCALBASE}/include/X11/qt3
MODQT_OVERRIDE_UIC?=Yes
MODQT_MT?=Yes
MODQT_CONFIGURE_ARGS=	--with-qt-includes=${MODQT_INCDIR} \
			--with-qt-libraries=${MODQT_LIBDIR}
_MODQT_SETUP=	MOC=${MODQT_MOC} \
		MODQT_INCDIR=${MODQT_INCDIR} \
		MODQT_LIBDIR=${MODQT_LIBDIR}
.if ${MODQT_OVERRIDE_UIC:L} == "yes"
_MODQT_SETUP+=	UIC=${MODQT_UIC}
d26 1
d28 3
a30 2
MODQT_LIB_DEPENDS=lib/qt3/qt-mt.>=3::x11/qt3
LIB_DEPENDS+=	${MODQT_LIB_DEPENDS}
d33 12
a44 12
MODQT_MOC=	${LOCALBASE}/bin/moc3-mt
MODQT_UIC=	${LOCALBASE}/bin/uic3-mt
MODQT_QTDIR=	${LOCALBASE}/lib/qt3
MODQT_PLUGINS=	lib/qt3/plugins-30

.if ${MODQT_MT:L} != "yes"
ERRORS+="Fatal: support QTMT only"
.endif

CONFIGURE_ENV+=	${_MODQT_SETUP}
MAKE_ENV+=	${_MODQT_SETUP}
MAKE_FLAGS+=	${_MODQT_SETUP}
@


1.6
log
@Add the security patches from qt 3.3.7

we'll update to qt 3.3.7 after the immodule patch has been merged, which
should hopefully happen in the middle of november....
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.5 2006/08/01 10:50:19 espie Exp $
d23 1
a23 1
LIB_DEPENDS+=lib/qt3/qt-mt.>=3::x11/qt3
@


1.5
log
@convert a few libspecs to new style.

Note: no package bump, those are only BUILD dependencies,
the pkg_create code will create the correct wantlib specs.
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.4 2006/01/13 19:18:50 espie Exp $
d22 1
d24 1
@


1.5.2.1
log
@MFC:
Add the security patches from qt 3.3.7
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.5 2006/08/01 10:50:19 espie Exp $
a21 1
MODQT_LIB_DEPENDS=lib/qt3/qt-mt.>=3::x11/qt3
a22 1

@


1.4
log
@bunp all qt shared libs at the same time.
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.3 2006/01/02 16:59:37 espie Exp $
d22 1
a22 1
LIB_DEPENDS+=lib/qt3/qt-mt.3::x11/qt3
@


1.4.2.1
log
@MFC:
Add the security patches from qt 3.3.7
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.4 2006/01/13 19:18:50 espie Exp $
a21 1
MODQT_LIB_DEPENDS=lib/qt3/qt-mt.>=3::x11/qt3
a22 1

@


1.3
log
@versioned pluginsdir in qt3.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.2 2004/10/30 09:12:35 espie Exp $
d27 1
a27 1
MODQT_PLUGINS=	lib/qt3/plugins-3
@


1.2
log
@Reorganize stuff.
- stop supporting !mt, since it has worked for a long time.
- mt becomes a pseudo_flavor for compat purposes.
- merge base back into the main module.
- link mt names to not mt names.
- finish recreating a full QTDIR structure for compatibility as well.
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.1 2004/08/03 09:18:39 espie Exp $
d27 1
@


1.1
log
@Prepare for MODULES=x11/qt*
@
text
@d1 1
a1 1
# $OpenBSD: qt3.port.mk,v 1.6 2003/01/06 06:22:53 espie Exp $
d12 1
a12 1
MODQT_MT?=No
d22 1
a22 3
.if ${MODQT_MT:L} == "yes"
LIB_DEPENDS+=lib/qt3/qt-mt.3::x11/qt3,mt
# includes are now handled by a subpackage
d26 4
a29 4
.else
LIB_DEPENDS+=lib/qt3/qt.3::x11/qt3
MODQT_MOC=	${LOCALBASE}/bin/moc3
MODQT_UIC=	${LOCALBASE}/bin/uic3
@

