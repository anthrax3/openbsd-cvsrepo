head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.03.18.18.18.09;	author jca;	state Exp;
branches;
next	;
commitid	espYt4AN2kbjuo3X;


desc
@@


1.1
log
@Fix crash due to improper NULL guard passed to variadic functions.

Problem reported and fix confirmed by Sol√®ne Rappene.
@
text
@$OpenBSD$
--- src/xmisc.c.orig	Sun Mar 19 12:40:26 2000
+++ src/xmisc.c	Fri Mar 18 13:33:20 2016
@@@@ -204,7 +204,7 @@@@ init_xlocale(void)
     return;
   }
 
-  if (XGetIMValues(xim, XNQueryInputStyle, &xim_styles, 0) || !xim_styles) {
+  if (XGetIMValues(xim, XNQueryInputStyle, &xim_styles, (void *)NULL) || !xim_styles) {
     XCloseIM(xim);
 #ifdef DEBUG_IC
     fprintf(stderr, "Input method doesn't support any style.\n");
@@@@ -258,7 +258,7 @@@@ init_xlocale(void)
   }
 
   InputContext = XCreateIC(xim, XNInputStyle, input_style,
-    XNClientWindow, win, XNFocusWindow, win, 0);
+    XNClientWindow, win, XNFocusWindow, win, (void *)NULL);
 
   if (!InputContext) {
     XCloseIM(xim);
@
