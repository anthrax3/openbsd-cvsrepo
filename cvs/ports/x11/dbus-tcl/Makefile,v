head	1.9;
access;
symbols
	OPENBSD_6_0:1.9.0.2
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.3.0.8
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	stu_20120808:1.1.1.1
	stu:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2016.07.01.11.57.40;	author sthen;	state Exp;
branches;
next	1.8;
commitid	b7ZCfoauyhVPE7xG;

1.8
date	2016.03.18.23.12.20;	author naddy;	state Exp;
branches;
next	1.7;
commitid	KZAl4KEiw6a3Jixw;

1.7
date	2016.03.11.20.28.33;	author naddy;	state Exp;
branches;
next	1.6;
commitid	UYLP8TE6V7RS2GhJ;

1.6
date	2015.07.13.00.56.55;	author stu;	state Exp;
branches;
next	1.5;
commitid	uLRiOvzEeJmdWJHK;

1.5
date	2015.04.04.09.21.05;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	kS3kwKZogsvzYmEY;

1.4
date	2015.03.16.18.07.58;	author naddy;	state Exp;
branches;
next	1.3;
commitid	IJdm3Zowcdkcxp5X;

1.3
date	2013.03.11.11.46.08;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.26.17.04.49;	author stu;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.08.11.45.03;	author stu;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.08.08.11.45.03;	author stu;	state Exp;
branches;
next	;


desc
@@


1.9
log
@LD_PRELOAD=libpthread no longer needed
@
text
@# $OpenBSD: Makefile,v 1.8 2016/03/18 23:12:20 naddy Exp $

COMMENT =	dbus bindings for Tcl

V =		2.1
REVISION =	0
DISTNAME =	dbus-tcl-${V}
CATEGORIES =	x11
HOMEPAGE =	http://dbus-tcl.sourceforge.net/
MAINTAINER =	Stuart Cassoff <stwo@@users.sourceforge.net>

# ISC
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =	dbus-1
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=dbus-tcl/}
DISTFILES =	dbus-tcl{dbus}-${V}.tar.gz
MODULES =	lang/tcl
BUILD_DEPENDS =	${MODTCL_BUILD_DEPENDS} devel/tcllib
LIB_DEPENDS =	x11/dbus
RUN_DEPENDS =	${MODTCL_RUN_DEPENDS}

FAKE_FLAGS =	INSTALL_PROGRAM='$${INSTALL_DATA}' \
		PACKAGE_NAME=dbus-tcl \
		PACKAGE_TARNAME=dbus-tcl \
		pkglibdir='$$(libdir)/tcl/$$(PACKAGE_NAME)'

SEPARATE_BUILD =Yes
CONFIGURE_STYLE=gnu

CONFIGURE_ARGS+=--with-tcl=${MODTCL_LIBDIR} \
		--mandir='$${prefix}/man' \
		--enable-threads

TEST_IS_INTERACTIVE = X11
WRKDIST =	${WRKDIR}/dbus-${V}
TEST_TARGET =	test

pre-configure:
	@@${MODTCL_TCLSH_ADJ} ${WRKSRC}/demos/{dbusmon,qdbus}.tcl

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/dbus-tcl
	${INSTALL_SCRIPT} ${WRKSRC}/demos/{dbusmon,qdbus}.tcl \
		${PREFIX}/share/examples/dbus-tcl

.include <bsd.port.mk>
@


1.8
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/03/11 20:28:33 naddy Exp $
d6 1
a27 1
TEST_FLAGS =	LD_PRELOAD=/usr/lib/libpthread.so
@


1.7
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.6 2015/07/13 00:56:55 stu Exp $

SHARED_ONLY =	Yes
@


1.6
log
@Update to 2.1.
Install examples.
Man page is ok without groff.
Stop treating a loadable lib as a linkable lib.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/04/04 09:21:05 ajacoutot Exp $
d33 1
a33 2
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
		--with-tcl=${MODTCL_LIBDIR} \
@


1.5
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.4 2015/03/16 18:07:58 naddy Exp $
d7 2
a8 3
DISTNAME =	dbus-tcl1.1
PKGNAME =	dbus-tcl-1.1
SHARED_LIBS =	dbus-tcl11 0.0
a11 1
REVISION =	1
d16 1
a16 1
WANTLIB =	c dbus-1 pthread
d18 1
d23 6
a28 1
FAKE_FLAGS =	INSTALL_PROGRAM="${INSTALL_DATA}"
a30 1
USE_GROFF =	Yes
d35 2
a36 4
		--libdir=${MODTCL_TCLDIR} \
		--mandir=${PREFIX}/man \
		--enable-threads \
		SHLIB_VERSION=${LIBdbus-tcl11_VERSION}
d39 10
a48 1
TEST_TARGET = test
@


1.4
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/03/11 11:46:08 espie Exp $
d11 1
a11 1
REVISION =	0
@


1.3
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/08/26 17:04:49 stu Exp $
d11 1
@


1.2
log
@Update to 1.1.

Ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/08/08 11:45:03 stu Exp $
a13 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d22 1
a22 1
REGRESS_FLAGS =	LD_PRELOAD=/usr/lib/libpthread.so
d34 2
a35 2
REGRESS_IS_INTERACTIVE = X11
REGRESS_TARGET = test
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 3
a7 3
DISTNAME =	dbus-tcl1.0
PKGNAME =	dbus-tcl-1.0
SHARED_LIBS =	dbus-tcl10 0.0
d18 1
d35 1
a35 1
		SHLIB_VERSION=${LIBdbus-tcl10_VERSION}
@


1.1.1.1
log
@Import dbus-tcl 1.0.

Dbus bindings for Tcl.

Ok landry@@
@
text
@@
