head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.11.07.13.32.35;	author ajacoutot;	state dead;
branches;
next	1.1;
commitid	euWPyF1iEU5Z61wa;

1.1
date	2013.09.18.17.36.42;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Unbreak and update to remmina-1.1.1.

ok jasper@@ (maintainer)
@
text
@$OpenBSD: patch-remmina_src_remmina_protocol_widget_c,v 1.1 2013/09/18 17:36:42 ajacoutot Exp $

https://github.com/FreeRDP/Remmina/commit/bed49ad62d78718c0876c000a97c68cc87f12c7c

--- remmina/src/remmina_protocol_widget.c.orig	Fri Feb 10 19:54:23 2012
+++ remmina/src/remmina_protocol_widget.c	Fri Sep 13 10:56:52 2013
@@@@ -267,13 +267,7 @@@@ gboolean remmina_protocol_widget_close_connection(Remm
 		gp->priv->chat_window = NULL;
 	}
 
-#ifdef HAVE_LIBSSH
-	if (gp->priv->ssh_tunnel)
-	{
-		remmina_ssh_tunnel_free(gp->priv->ssh_tunnel);
-		gp->priv->ssh_tunnel = NULL;
-	}
-#endif
+	gboolean retval;
 
 	if (!gp->priv->plugin || !gp->priv->plugin->close_connection)
 	{
@@@@ -281,7 +275,17 @@@@ gboolean remmina_protocol_widget_close_connection(Remm
 		return FALSE;
 	}
 
-	return gp->priv->plugin->close_connection(gp);
+	retval = gp->priv->plugin->close_connection(gp);
+
+	#ifdef HAVE_LIBSSH
+	if (gp->priv->ssh_tunnel)
+	{
+		remmina_ssh_tunnel_free(gp->priv->ssh_tunnel);
+		gp->priv->ssh_tunnel = NULL;
+	}
+	#endif
+
+	return retval;
 }
 
 static gboolean remmina_protocol_widget_emit_signal_timeout(gpointer user_data)
@


1.1
log
@I totally forgot to commit this days ago...
@
text
@d1 1
a1 1
$OpenBSD$
@

