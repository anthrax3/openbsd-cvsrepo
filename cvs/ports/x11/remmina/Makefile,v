head	1.23;
access;
symbols
	OPENBSD_6_1:1.21.0.2
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.19.0.2
	OPENBSD_6_0_BASE:1.19
	OPENBSD_5_9:1.18.0.2
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.4
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	jasper_20110420:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2017.09.06.07.21.37;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	TwHW4fioQZR4Xxxi;

1.22
date	2017.04.17.07.31.50;	author jasper;	state Exp;
branches;
next	1.21;
commitid	t3kp1ee4SO3JyLnN;

1.21
date	2016.11.11.11.52.35;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	eSlL8wKmMaWbwHOv;

1.20
date	2016.08.28.10.21.48;	author jca;	state Exp;
branches;
next	1.19;
commitid	wjyuAgPqeNjdaOL6;

1.19
date	2016.03.18.23.12.22;	author naddy;	state Exp;
branches;
next	1.18;
commitid	KZAl4KEiw6a3Jixw;

1.18
date	2015.11.07.13.32.35;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	euWPyF1iEU5Z61wa;

1.17
date	2015.11.07.05.59.51;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	7UqUsfLbY6CPDpxZ;

1.16
date	2015.03.27.08.16.23;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	BUhOiEl2FUSRKwq7;

1.15
date	2015.02.07.11.23.43;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	MnH4KE2WXab9vpz5;

1.14
date	2014.10.06.07.27.05;	author jasper;	state Exp;
branches;
next	1.13;
commitid	Ui139zsQA3ozYgok;

1.13
date	2014.09.15.07.17.50;	author jasper;	state Exp;
branches;
next	1.12;
commitid	iSazeamvuawkTGbl;

1.12
date	2013.09.18.17.36.42;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.09.13.08.22.48;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.04.28.08.18.55;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.11.11.46.15;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2012.12.08.13.17.41;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.08.15.07.02.44;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2012.06.25.14.24.34;	author mpi;	state Exp;
branches;
next	1.5;

1.5
date	2012.06.15.08.30.24;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.05.22.08.46.16;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.05.22.08.02.36;	author mpi;	state Exp;
branches;
next	1.2;

1.2
date	2012.02.24.13.48.26;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.04.20.15.07.36;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.04.20.15.07.36;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Fix DEPENDS after the removal of net/avahi,-mono.
@
text
@# $OpenBSD: Makefile,v 1.22 2017/04/17 07:31:50 jasper Exp $

COMMENT=		GTK+3 remote desktop client

V=			1.1.2
DISTNAME=		remmina-${V}
REVISION=		0

GH_TAGNAME=		v${V}
GH_PROJECT=		Remmina
GH_ACCOUNT=		FreeRDP

CATEGORIES=		x11 net

HOMEPAGE=		https://freerdp.github.io/Remmina/index.html

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ICE SM X11 Xext atk-1.0 avahi-client avahi-common avahi-ui-gtk3
WANTLIB += c cairo freerdp freerdp-client gcrypt gdk-3 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gnome-keyring gobject-2.0
WANTLIB += gthread-2.0 gtk-3 intl pango-1.0 pthread ssh ssh_threads
WANTLIB += telepathy-glib vncclient vte-2.91 xkbfile

MODULES=		devel/cmake

BUILD_DEPENDS=		devel/gettext-tools

LIB_DEPENDS=		devel/gettext \
			devel/vte3 \
			net/avahi,-gtk3 \
			net/libvncserver \
			security/libssh \
			x11/freerdp \
			net/telepathy/telepathy-glib \
			x11/gnome/libgnome-keyring

RUN_DEPENDS=		devel/desktop-file-utils \
			x11/gtk+3,-guic

.if ${MACHINE_ARCH} == "amd64"
CONFIGURE_ARGS=		-DWITH_SSE2=ON
.else
CONFIGURE_ARGS=		-DWITH_SSE2=OFF
.endif

CFLAGS +=		-I${X11BASE}/include -I${LOCALBASE}/include

# Only used by Ubuntu's Unity.
CONFIGURE_ARGS+=	-DWITH_APPINDICATOR=OFF

.include <bsd.port.mk>
@


1.22
log
@update to remmina-1.1.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/11/11 11:52:35 ajacoutot Exp $
d7 1
d34 1
a34 1
			net/avahi,-gtk3,no_mono \
@


1.21
log
@net/avahi,no_qt3,no_qt4 does not exist anymore.

spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/08/28 10:21:48 jca Exp $
d5 1
a5 1
V=			1.1.1
a6 1
REVISION=		1
@


1.20
log
@Drop the gettext module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/03/18 23:12:22 naddy Exp $
d7 1
a7 1
REVISION=		0
d34 1
a34 1
			net/avahi,-gtk3,no_mono,no_qt3,no_qt4 \
@


1.19
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/11/07 13:32:35 ajacoutot Exp $
d7 1
d25 1
a25 1
WANTLIB += gthread-2.0 gtk-3 pango-1.0 pthread ssh ssh_threads
d28 1
a28 2
MODULES=		devel/cmake \
			devel/gettext
d30 4
a33 1
LIB_DEPENDS=		devel/vte3 \
@


1.18
log
@Unbreak and update to remmina-1.1.1.

ok jasper@@ (maintainer)
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.16 2015/03/27 08:16:23 ajacoutot Exp $

SHARED_ONLY=		Yes
@


1.17
log
@Temporarily marke BROKEN after the freerdp update.
Fix is in the work...
@
text
@d3 1
a3 16
BROKEN=			needs an update

### from upstream, removed at next update
# +patch-remmina_src_remmina_protocol_widget_c
DIST_SUBDIR=		remmina
MASTER_SITES0=		https://github.com/FreeRDP/Remmina/commit/
PATCH_DIST_STRIP=	-p1
COMMIT_ID=		569d9bb7 f7d1038b 503a008e 13f20367 3ebdd6e7 \
			97c2af8c 84327f81 c1ef3a16 6ee20289 b2277827 \
			1901a1e9 1901a1e9 fe1b698e 348e01d2 1560d633
.for i in ${COMMIT_ID}
PATCHFILES +=		$i.patch:0
.endfor
###

SHARED_ONLY?=		Yes
d7 2
a8 4
V=			1.0.0
DISTNAME=		Remmina-${V}
PKGNAME=		${DISTNAME:L}
WRKDIST=		${WRKDIR}/FreeRDP-Remmina-356c033
d10 3
a12 1
REVISION=		10
d16 1
a16 1
HOMEPAGE=		http://remmina.sourceforge.net/
d23 5
a27 7
WANTLIB += ICE SM X11 Xext atk-1.0 c cairo freerdp-channels freerdp-codec
WANTLIB += freerdp-core freerdp-gdi freerdp-kbd freerdp-rail gcrypt
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gnome-keyring
WANTLIB += gnutls gobject-2.0 gthread-2.0 gtk-3 jpeg pango-1.0
WANTLIB += pthread ssh telepathy-glib vte-2.91 xkbfile z

MASTER_SITES=		https://github.com/downloads/FreeRDP/Remmina/
d30 1
a30 4
			devel/gettext \
			textproc/intltool

BUILD_DEPENDS=		net/avahi,-gtk3,no_mono,no_qt3,no_qt4
d33 2
d36 1
a36 2
			security/gnutls \
			x11/freerdp>=1.0 \
d43 6
a49 3

# -lgnutls
CONFIGURE_ARGS =+	-DCMAKE_SHARED_LINKER_FLAGS:STRING="-L${LOCALBASE}/lib"
@


1.16
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.15 2015/02/07 11:23:43 ajacoutot Exp $
@


1.15
log
@Fix crash when using ssh (from upstream).
reported by rpointel@@
ok jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/10/06 07:27:05 jasper Exp $
d25 1
a25 1
REVISION=		9
d58 1
a58 1
			x11/gtk+2,-guic
@


1.14
log
@port to new vte-2.91 API
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/09/15 07:17:50 jasper Exp $
d25 1
a25 1
REVISION=		8
@


1.13
log
@fix lie in COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/09/18 17:36:42 ajacoutot Exp $
d25 1
a25 1
REVISION=		7
d40 1
a40 1
WANTLIB += pthread ssh telepathy-glib vte2_90 xkbfile z
@


1.12
log
@I totally forgot to commit this days ago...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/09/13 08:22:48 ajacoutot Exp $
d18 1
a18 1
COMMENT=		GTK+2 remote desktop client
d25 1
a25 1
REVISION=		6
@


1.11
log
@Properly link to GnuTLS so that it builds reliably in bulks _and_ fix
crypto in VNC.

spotted by naddy@@
patch from Fedora
ok jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/04/28 08:18:55 ajacoutot Exp $
d3 3
a5 1
# from upstream, removed at next update
d8 7
a14 2
PATCHFILES=		569d9bb702d06c061dfbbf3c590d57ea83a04369.diff:0 \
			f7d1038ba358a295fb46c681db5c47e4ead97306.diff:0
d25 1
a25 1
REVISION=		5
d36 1
a36 1
WANTLIB += X11 atk-1.0 c cairo freerdp-channels freerdp-codec
d42 1
a42 1
MASTER_SITES=		https://github.com/FreeRDP/Remmina/downloads/
@


1.10
log
@No need for gtar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/11 11:46:15 espie Exp $
d18 1
a18 1
REVISION=		4
d29 6
a40 7
# XXX no iconv?
WANTLIB += X11 atk-1.0 c cairo freerdp-channels freerdp-codec
WANTLIB += freerdp-core freerdp-gdi freerdp-kbd freerdp-rail gcrypt
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gnome-keyring
WANTLIB += gobject-2.0 gthread-2.0 gtk-3 jpeg pango-1.0 pthread
WANTLIB += pthread-stubs ssh telepathy-glib vte2_90 xkbfile z

d45 1
d55 4
a58 1
# Only useed by Ubuntu's Unity.
@


1.9
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/12/08 13:17:41 ajacoutot Exp $
a51 4

# pax_global_header
TAR=			${LOCALBASE}/bin/gtar
BUILD_DEPENDS	+=	archivers/gtar
@


1.8
log
@Remove uneeded patches now that we support Unix 98 PTY.
Add the include dirs to CFLAGS instead of patching all the CMakeLists.txt
files.

ok jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/08/15 07:02:44 ajacoutot Exp $
a27 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.7
log
@Tighten avahi dependency.

ok jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/06/25 14:24:34 mpi Exp $
d18 1
a18 1
REVISION=		3
d39 5
a43 5
WANTLIB += atk-1.0 cairo gdk-3 glib-2.0 gtk-3 pango-1.0
WANTLIB += X11 c gcrypt gdk_pixbuf-2.0 gio-2.0 gmodule-2.0 gnome-keyring
WANTLIB += gobject-2.0 gthread-2.0 pthread vte2_90 jpeg z telepathy-glib
WANTLIB += util xkbfile ssh freerdp-kbd freerdp-rail
WANTLIB += freerdp-channels freerdp-codec freerdp-core freerdp-gdi
d60 1
a60 1
CFLAGS +=		-pthread
a63 10

pre-configure:
	${SUBST_CMD} \
		${WRKSRC}/remmina-plugins/nx/CMakeLists.txt \
		${WRKSRC}/remmina-plugins/rdp/CMakeLists.txt \
		${WRKSRC}/remmina-plugins/telepathy/CMakeLists.txt \
		${WRKSRC}/remmina-plugins/vnc/CMakeLists.txt \
		${WRKSRC}/remmina-plugins/vnc/libvncserver/CMakeLists.txt \
		${WRKSRC}/remmina-plugins/xdmcp/CMakeLists.txt \
		${WRKSRC}/remmina/CMakeLists.txt
@


1.6
log
@Revert the commit that breaks remmina+ssh with OpenBSD servers and add
the URLs to the bugtracker.

ok ajacoutot@@, jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/06/15 08:30:24 ajacoutot Exp $
d45 1
a45 1
BUILD_DEPENDS=		net/avahi,-gtk3
@


1.5
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/05/22 08:46:16 ajacoutot Exp $
d18 1
a18 1
REVISION=		2
@


1.4
log
@Merge -rdp into -main.
Discussed with jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/05/22 08:02:36 mpi Exp $
d18 1
a18 1
REVISION=		1
@


1.3
log
@Make use of openpty(3) to allocate a pseudo-tty, allowing us to enable the
NX and ssh/sftp plugins. Please note that there are still some issues with
these plugins but they should not be tty related.

ok ajacoutot@@, jasper@@ (maintainer) and openpty diff looked at by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/02/24 13:48:26 ajacoutot Exp $
d11 1
a11 2
COMMENT-main=		GTK+2 remote desktop client
COMMENT-rdp=		GTK+2 remote desktop client, RDP plugin
d15 1
d18 1
a18 4
PKGNAME-main=		${DISTNAME:L}
PKGNAME-rdp=		remmina-plugins-rdp-${V}

REVISION-main=		0
a31 1

d38 6
a43 12
MULTI_PACKAGES=		-main -rdp

cWANTLIB += atk-1.0 cairo gdk-3 glib-2.0 gtk-3 pango-1.0

WANTLIB-main += ${cWANTLIB} intl # XXX no iconv?
WANTLIB-main += X11 c gcrypt gdk_pixbuf-2.0 gio-2.0 gmodule-2.0 gnome-keyring
WANTLIB-main += gobject-2.0 gthread-2.0 pthread vte2_90 jpeg z telepathy-glib
WANTLIB-main += util xkbfile ssh 

WANTLIB-rdp += ${cWANTLIB}
WANTLIB-rdp += freerdp-channels freerdp-codec freerdp-core freerdp-gdi
WANTLIB-rdp += freerdp-kbd freerdp-rail
d47 1
a47 1
LIB_DEPENDS-main=	devel/vte3 \
d49 1
d53 1
a53 1
RUN_DEPENDS-main=	devel/desktop-file-utils \
a54 4

RUN_DEPENDS-rdp=	${BASE_PKGPATH},-main
LIB_DEPENDS-rdp=	x11/gtk+3 \
			x11/freerdp>=1.0
@


1.2
log
@Update to remmina-1.0.0.

remmina-plugins has been merged into the main tarball:
* merge former plugins,-main and plugins,-telepathy into -main
* keep remmina-plugins-rdp as a separate package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/12/03 23:20:53 ajacoutot Exp $
d21 2
d49 1
d58 1
a77 3
# This needs the grantpt(3) and alike functions.
CONFIGURE_ARGS+=	-DWITH_LIBSSH=OFF

d80 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 84
a86 5
     SUBDIR =
     SUBDIR += core
     SUBDIR += plugins
     
.include <bsd.port.subdir.mk>
@


1.1.1.1
log
@import remmina (core + plugins)

Remmina is a remote desktop client written in GTK+, aiming to be useful for
system administrators and travellers, who need to work with lots of remote
computers in front of either large monitors or tiny netbooks. Remmina supports
multiple network protocols in an integrated and consistant user interface.
Various protocols are supported whose functionality can be added by adding the
corresponding remmina-plugins package.

Right now VNC, RDP, XDMCP and Telepathy are supported.

feedback/ok aja@@
@
text
@@
