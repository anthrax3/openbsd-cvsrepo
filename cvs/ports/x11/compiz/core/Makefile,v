head	1.29;
access;
symbols
	OPENBSD_6_0:1.29.0.6
	OPENBSD_6_0_BASE:1.29
	OPENBSD_5_9:1.29.0.2
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.29.0.4
	OPENBSD_5_8_BASE:1.29
	OPENBSD_5_7:1.27.0.4
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.27.0.2
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.26.0.2
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.24.0.2
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.21.0.2
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.18.0.2
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.2
	OPENBSD_5_0:1.14.0.2
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.4.0.2
	OPENBSD_4_7_BASE:1.4
	fgsch_20090901:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.29
date	2015.04.21.18.51.26;	author sthen;	state Exp;
branches;
next	1.28;
commitid	ptMCPiyuhL0JiHRZ;

1.28
date	2015.04.04.09.21.04;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	kS3kwKZogsvzYmEY;

1.27
date	2014.04.14.19.52.44;	author matthieu;	state Exp;
branches;
next	1.26;

1.26
date	2013.11.26.11.59.32;	author fgsch;	state Exp;
branches;
next	1.25;

1.25
date	2013.09.27.17.49.10;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.05.31.15.34.57;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2013.03.21.08.48.55;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.11.11.46.08;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2013.02.06.14.23.06;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2013.02.04.10.33.33;	author brett;	state Exp;
branches;
next	1.19;

1.19
date	2012.12.23.12.25.31;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.02.21.22.19.32;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.10.29.08.12.32;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.10.14.07.15.08;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.09.16.12.29.12;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2011.06.02.13.41.42;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.05.14.21.29.03;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.22.08.36.55;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.12.14.22.13;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.24.21.15.31;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.11.08.19.58;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2010.09.01.19.52.53;	author fgsch;	state Exp;
branches;
next	1.7;

1.7
date	2010.07.30.12.03.08;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.07.30.06.58.57;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.04.27.21.01.51;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2009.09.28.15.14.30;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2009.09.01.09.49.01;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.09.01.02.14.52;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2009.09.01.01.49.14;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.09.01.01.49.14;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.29
log
@add some simple missing lzma WANTLIBs (crept in via libxml)
@
text
@# $OpenBSD: Makefile,v 1.28 2015/04/04 09:21:04 ajacoutot Exp $

COMMENT =	OpenGL window and compositing manager

V =		0.8.8
DISTNAME =	compiz-${V}
REVISION =	2

SHARED_LIBS =	decoration	1.0

# MIT, GPL and LGPL
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += GL GLU ICE SM X11 X11-xcb XRes Xau Xcomposite Xcursor Xdamage
WANTLIB += Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0
WANTLIB += c cairo croco-0.6 dbus-1 dbus-glib-1 drm expat ffi fontconfig
WANTLIB += freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glapi glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 graphite2 gthread-2.0 gtk-x11-2.0
WANTLIB += harfbuzz lzma m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
WANTLIB += pixman-1 png pthread pthread-stubs rsvg-2
WANTLIB += startup-notification-1 stdc++ wnck-1 xcb xcb-dri2 xcb-glx
WANTLIB += xcb-render xcb-shm xcb-util xml2 xslt z

MASTER_SITES =	http://releases.compiz.org/${V}/

MODULES =	devel/gconf2 \
		devel/gettext \
		textproc/intltool

MODGCONF2_SCHEMAS_DIR =	compiz

LIB_DEPENDS =	devel/startup-notification \
		devel/libwnck \
		textproc/libxml \
		textproc/libxslt \
		x11/gnome/librsvg \
		x11/gtk+2

USE_GMAKE =	Yes

LIBTOOL_FLAGS =	--tag=disable-static

CONFIGURE_STYLE	= gnu
CONFIGURE_ARGS = --disable-static \
		 --disable-fuse \
		 --disable-inotify \
		 --disable-metacity \
		 --disable-gnome \
		 --disable-gnome-keybindings \
		 --disable-kde \
		 --disable-kde4 \
		 --disable-kconfig
CONFIGURE_ENV =	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

post-install:
	@@rm -f ${PREFIX}/lib/compiz/*.la

.include <bsd.port.mk>
@


1.28
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/04/14 19:52:44 matthieu Exp $
d7 1
a7 1
REVISION =	1
d14 9
a22 9
WANTLIB +=	GL GLU ICE SM X11 X11-xcb XRes Xau Xcomposite Xcursor \
		Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender \
		Xxf86vm atk-1.0 c cairo croco-0.6 dbus-1 dbus-glib-1 \
		drm expat ffi fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 \
		gio-2.0 glapi glib-2.0 gmodule-2.0 gobject-2.0 graphite2 \
		gthread-2.0 gtk-x11-2.0 harfbuzz m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pcre pixman-1 png pthread pthread-stubs \
		rsvg-2 startup-notification-1 stdc++ wnck-1 xcb xcb-util \
		xcb-dri2 xcb-glx xcb-render xcb-shm xml2 xslt z
@


1.27
log
@WANTLIB updates and patches for new xcb-util libs. tested by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/11/26 11:59:32 fgsch Exp $
d7 1
a7 1
REVISION =	0
@


1.26
log
@long overdue update to compiz 0.8.8
ajacoutot@@ ok a while back
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/09/27 17:49:10 ajacoutot Exp $
d7 1
d21 1
a21 1
		rsvg-2 startup-notification-1 stdc++ wnck-1 xcb xcb-aux \
@


1.25
log
@Bump after devel/gconf2,-main is gone.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.24 2013/05/31 15:34:57 ajacoutot Exp $

SHARED_ONLY =	Yes
d5 1
a5 1
V =		0.8.2
a6 5
REVISION=	17

SHARED_LIBS =	decoration	0.0

CATEGORIES =	x11
d8 1
a8 1
HOMEPAGE =	http://www.compiz.org/
d13 9
a21 9
WANTLIB += GL GLU ICE SM X11 X11-xcb XRes Xau Xcomposite
WANTLIB += Xcursor Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr
WANTLIB += Xrender Xxf86vm atk-1.0 c cairo dbus-1 dbus-glib-1
WANTLIB += drm expat ffi fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB += gtk-x11-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread pthread-stubs startup-notification-1
WANTLIB += wnck-1 xcb xcb-aux xcb-render xcb-shm xml2 xslt z
WANTLIB += harfbuzz stdc++
d35 1
d40 1
a40 1
LIBTOOL_FLAGS=	--tag=disable-static
d43 2
a44 2
CONFIGURE_ARGS = ${CONFIGURE_SHARED} \
		 --disable-static \
a45 2
		 --disable-fuse \
		 --disable-librsvg \
d54 3
@


1.24
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/03/21 08:48:55 ajacoutot Exp $
d9 1
a9 1
REVISION=	16
@


1.23
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/11 11:46:08 espie Exp $
d9 1
a9 1
REVISION=	15
d28 1
a28 1
WANTLIB += harfbuzz icudata icule icuuc stdc++
@


1.22
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/02/06 14:23:06 ajacoutot Exp $
a44 1
USE_LIBTOOL =	Yes
@


1.21
log
@Quiet gconftool-2:
gconf_ping() will try to shutdown gconfd, but since installing pkg is
done as root, there is not gconfd nor dbus that can be started when
DISPLAY isn't set and an annoying warning is issued.

discussed with espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/02/04 10:33:33 brett Exp $
a18 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.20
log
@Updated compiz website/master site addresses. ok Stuart Henderson and David Coppa.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/12/23 12:25:31 sthen Exp $
d9 1
a9 1
REVISION=	14
@


1.19
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/02/21 22:19:32 sthen Exp $
d9 1
a9 1
REVISION=	13
d15 1
a15 1
HOMEPAGE =	http://www.compiz-fusion.org/
d33 1
a33 1
MASTER_SITES =	http://releases.compiz-fusion.org/${V}/
@


1.18
log
@Remove patches casting NULL when used as a sentinel to a pointer.
These are no longer needed since unistd.h r1.63 et al.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/10/29 08:12:32 ajacoutot Exp $
d9 1
a9 1
REVISION=	12
d31 1
@


1.17
log
@Sync dependencies after gconf2 lost its dependency to ORBit.
This should cover all fallout but there may be some dark corners which I
missed...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/10/14 07:15:08 ajacoutot Exp $
d9 1
a9 1
REVISION=	11
@


1.16
log
@Regen WANTLIB to unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/09/16 12:29:12 espie Exp $
d9 1
a9 1
REVISION=	10
d23 1
a23 1
WANTLIB += GL GLU ICE ORBit-2 SM X11 X11-xcb XRes Xau Xcomposite
@


1.15
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/06/02 13:41:42 ajacoutot Exp $
d9 1
a9 1
REVISION=	9
d18 9
a26 9
PERMIT_PACKAGE_CDROM = Yes
PERMIT_PACKAGE_FTP =   Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP = Yes

WANTLIB += GL GLU ICE ORBit-2 SM X11 XRes Xau Xcomposite Xcursor xslt
WANTLIB += Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender xml2
WANTLIB += Xxf86vm atk-1.0 c cairo dbus-1 dbus-glib-1 drm execinfo png
WANTLIB += expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 wnck-1
d29 2
a30 2
WANTLIB += pcre pixman-1 pthread pthread-stubs xcb xcb-atom xcb-aux
WANTLIB += xcb-event xcb-render xcb-render-util z startup-notification-1
d40 1
a40 2
LIB_DEPENDS =	graphics/png \
		devel/startup-notification \
@


1.14
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/05/14 21:29:03 ajacoutot Exp $
d9 1
a9 1
REVISION=	8
@


1.13
log
@deve/gconf2 is about to loose its dependency on x11/gtk+2 so explicitely
register x11/gtk+2 for ports depending on gconf2 that don't have another
dependency that would bring it.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/22 08:36:55 espie Exp $
d9 1
a9 1
REVISION=	7
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/12 14:22:13 jasper Exp $
d9 1
a9 1
REVISION=	6
d44 2
a45 1
		textproc/libxslt
@


1.11
log
@- switch to pkg-readmes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/10/24 21:15:31 ajacoutot Exp $
d40 5
a44 5
LIB_DEPENDS =	::graphics/png \
		::devel/startup-notification \
		::devel/libwnck \
		::textproc/libxml \
		::textproc/libxslt
@


1.10
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/10/11 08:19:58 jasper Exp $
d9 1
a9 1
REVISION=	5
a64 5

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/compiz
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD \
	  ${PREFIX}/share/doc/compiz
@


1.9
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/09/01 19:52:53 fgsch Exp $
a45 1
USE_X11 =	Yes
@


1.8
log
@Fix typo in plist for now while I work on an update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/07/30 12:03:08 ajacoutot Exp $
d9 1
a9 1
REVISION=	4
d27 1
a27 1
WANTLIB += gio-2.0 glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0
@


1.7
log
@Move to new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/07/30 06:58:57 ajacoutot Exp $
d9 1
a9 1
REVISION=	3
@


1.6
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/04/27 21:01:51 jasper Exp $
d23 4
a26 4
WANTLIB += GL GLU ICE ORBit-2 SM X11 XRes Xau Xcomposite Xcursor
WANTLIB += Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender
WANTLIB += Xxf86vm atk-1.0 c cairo dbus-1 dbus-glib-1 drm execinfo
WANTLIB += expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
d30 1
a30 1
WANTLIB += xcb-event xcb-render xcb-render-util z
d40 5
a44 5
LIB_DEPENDS =	png::graphics/png \
		startup-notification-1::devel/startup-notification \
		wnck-1::devel/libwnck \
		xml2::textproc/libxml \
		xslt::textproc/libxslt
@


1.5
log
@- fix build with latest gtk2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/09/28 15:14:30 jasper Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p3
@


1.4
log
@- unbreak on empty box
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/09/01 09:49:01 ajacoutot Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p2
d23 8
a30 8
WANTLIB =	GL GLU ICE ORBit-2 SM X11 XRes Xau Xcomposite Xcursor \
		Xdamage Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender \
		atk-1.0 c cairo dbus-1 dbus-glib-1 execinfo expat fontconfig \
		freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 \
		glitz gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0 \
		m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pcre pixman-1 pthread pthread-stubs xcb xcb-atom xcb-aux \
		xcb-event z
@


1.3
log
@Use devel/gettext MODULE.
Merge PFRAG.shared into PLIST as this is a SHARED_ONLY port.

"sure" fgsch@@

While here, tweak configure args, libtool flags accordingly and don't
install plugins 'la' files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/09/01 02:14:52 fgsch Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p1
d35 2
a36 1
		devel/gettext
@


1.2
log
@fix wantlib.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/09/01 01:49:14 fgsch Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p0
d28 1
a28 1
		iconv intl m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
d34 3
a36 1
MODULES =	devel/gconf2
d49 2
d52 3
a54 1
CONFIGURE_ARGS = --disable-inotify \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 1
d25 1
a25 1
		atk-1.0 c cairo dbus-1 dbus-glib-1 expat fontconfig \
d29 2
a30 1
		pcre pixman-1 pthread z                               
@


1.1.1.1
log
@import compiz core so others can play with it.
with some help from ian@@. structure agreed by laundry@@. 
@
text
@@
