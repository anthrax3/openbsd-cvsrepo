head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2013.10.15.09.28.47;	author dcoppa;	state dead;
branches;
next	1.1;

1.1
date	2013.10.07.14.28.52;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to awesome-3.5.2, codename "The Fox".
@
text
@$OpenBSD: patch-screen_h,v 1.1 2013/10/07 14:28:52 dcoppa Exp $

commit 0bdaed2704c3b6315366f6c1f3d098cf707febe6
Author: Uli Schlachter <psychon@@znc.in>
Date:   Fri Oct 4 15:24:09 2013 +0200

screen: Fix screen equality comparison (FS#1151)

We did some black magic which broke and was replaced with more black magic. This
now broke using screen objects as table indexes:

$ echo 'local l, s = {}, screen[1] ; l[s] = 42 ; return l[s]' | awesome-client
double 42
$ echo 'local l, s = {}, screen[1] ; l[s] = 42 ; return l[screen[1]]' | awesome-client
<no output>

Fix this by using just a single lua userdata for representing a screen object.

It would be even better if screens were allocated with lua, but that doesn't
really provide any benefits right now and would be more complicated...

Signed-off-by: Uli Schlachter <psychon@@znc.in>

--- screen.h.orig	Mon Apr  1 13:44:46 2013
+++ screen.h	Mon Oct  7 15:36:23 2013
@@@@ -36,6 +36,8 @@@@ struct a_screen
     signal_array_t signals;
     /** The screen outputs informations */
     screen_output_array_t outputs;
+    /** The lua userdata representing this screen */
+    void *userdata;
 };
 ARRAY_FUNCS(screen_t, screen, DO_NOTHING)
 
@


1.1
log
@Bunch of bugfixes from upstream:

Fix possible deadlock during startup
awful.client.tiled: Ignore fullscreen clients
awful.screen.focus: Don't move mouse to (0, 0) first
naughty: Verify image parameters coming from dbus
wibox.layout.fixed: Fix fill space
Revert "client: add a limit to the loop"
client: Ignore transient_for causing loops
screen: Fix screen equality comparison
@
text
@d1 1
a1 1
$OpenBSD$
@

