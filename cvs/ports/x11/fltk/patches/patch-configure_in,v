head	1.15;
access;
symbols
	OPENBSD_6_1:1.15.0.8
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.15.0.6
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.14.0.8
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.6
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.12.0.8
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.6
	OPENBSD_5_0:1.12.0.4
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.11.0.14
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.12
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.11.0.10
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.11.0.8
	OPENBSD_4_5_BASE:1.11
	OPENBSD_4_4:1.11.0.6
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.11.0.4
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.2
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.8.0.8
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.6
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.8.0.4
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.6.0.2
	OPENBSD_3_3_BASE:1.6
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.15
date	2015.06.28.13.33.07;	author bcallah;	state Exp;
branches;
next	1.14;
commitid	dBYWNDxqJGegy6Ew;

1.14
date	2013.03.22.22.50.25;	author bcallah;	state Exp;
branches;
next	1.13;

1.13
date	2012.08.04.18.07.03;	author pascal;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.22.12.47.45;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2007.04.01.17.48.42;	author martynas;	state Exp;
branches;
next	1.10;

1.10
date	2006.10.19.09.41.32;	author wilfried;	state Exp;
branches;
next	1.9;

1.9
date	2005.12.25.20.23.18;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2003.12.26.14.18.30;	author wilfried;	state Exp;
branches;
next	1.7;

1.7
date	2003.04.02.12.58.43;	author wilfried;	state Exp;
branches;
next	1.6;

1.6
date	2002.12.16.16.58.12;	author wilfried;	state Exp;
branches;
next	1.5;

1.5
date	2002.11.04.16.59.05;	author wilfried;	state Exp;
branches;
next	1.4;

1.4
date	2002.09.30.06.44.17;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2002.08.10.19.57.20;	author wilfried;	state dead;
branches;
next	1.2;

1.2
date	2001.06.07.02.28.25;	author matt;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.15.03.14.15;	author matt;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Update FLTK to 1.3.3 -- this is a major change despite the small version
increment.
ok aja@@
@
text
@$OpenBSD: patch-configure_in,v 1.14 2013/03/22 22:50:25 bcallah Exp $
--- configure.in.orig	Sat Jun 27 16:35:27 2015
+++ configure.in	Sat Jun 27 16:37:50 2015
@@@@ -58,7 +58,7 @@@@ dnl FLTK library versions...
 FL_MAJOR_VERSION=1
 FL_MINOR_VERSION=3
 FL_PATCH_VERSION=3
-FL_API_VERSION=${FL_MAJOR_VERSION}.${FL_MINOR_VERSION}
+FL_API_VERSION=${LIBfltk_VERSION}
 
 AC_SUBST(FL_MAJOR_VERSION)
 AC_SUBST(FL_MINOR_VERSION)
@@@@ -910,7 +910,7 @@@@ case $host_os_gui in
 	    AC_MSG_WARN(Ignoring libraries \"$X_PRE_LIBS\" requested by configure.)
 	fi
 
-	LIBS="$LIBS -lX11 $X_EXTRA_LIBS"
+	LIBS="$LIBS -lX11 -lXdmcp -lXau $X_EXTRA_LIBS"
 	CFLAGS="$CFLAGS $X_CFLAGS"
 	CXXFLAGS="$CXXFLAGS $X_CFLAGS"
 	LDFLAGS="$X_LIBS $LDFLAGS"
@@@@ -1165,7 +1165,7 @@@@ if test -n "$GCC"; then
         if test "x$with_optim" != x; then
 	    OPTIM="$with_optim $OPTIM"
 	else
-            OPTIM="-Os $OPTIM"
+            : # OPTIM="-Os $OPTIM"
 	fi
     fi
 
@


1.14
log
@Update x11/fltk to 1.3.2
Take MAINTAINER.
ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.13 2012/08/04 18:07:03 pascal Exp $
--- configure.in.orig	Fri Mar 22 17:39:21 2013
+++ configure.in	Fri Mar 22 17:41:32 2013
@@@@ -39,7 +39,7 @@@@ dnl FLTK library versions...
d7 1
a7 1
 FL_PATCH_VERSION=1
d13 1
a13 1
@@@@ -914,7 +914,7 @@@@ case $uname_GUI in
d22 1
a22 1
@@@@ -1138,7 +1138,7 @@@@ if test -n "$GCC"; then
@


1.13
log
@Update to latest version 1.3.0, remove USE_GROFF, give more accurate license,
use SUBST_CMD instead of perl and fix the version reported by fltk-config.

ok landry@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.12 2010/09/22 12:47:45 ajacoutot Exp $
--- configure.in.orig	Sun Mar  6 17:54:58 2011
+++ configure.in	Fri May 25 01:07:10 2012
@@@@ -48,7 +48,7 @@@@ dnl FLTK library versions...
d7 1
a7 1
 FL_PATCH_VERSION=0
d13 1
a13 10
@@@@ -789,7 +789,7 @@@@ if test "x$enable_threads" != xno -a x$check_pthread =
 
     if test x$ac_cv_header_pthread_h = xyes; then
 	dnl Check various threading options for the platforms we support
-	for flag in -lpthreads -lpthread -pthread; do
+	for flag in -pthread; do
             AC_MSG_CHECKING([for pthread_create using $flag])
 	    SAVELIBS="$LIBS"
 	    LIBS="$flag $LIBS"
@@@@ -923,7 +923,7 @@@@ case $uname_GUI in
d22 1
a22 1
@@@@ -1147,7 +1147,7 @@@@ if test -n "$GCC"; then
@


1.12
log
@Enble threads support, needed for an upcoming aqsis upgrade.
Use correct AUTOCONF_VERSION and regen PLIST.

ok sthen@@
@
text
@d1 9
a9 14
$OpenBSD: patch-configure_in,v 1.11 2007/04/01 17:48:42 martynas Exp $
--- configure.in.orig	Sun Jan 15 19:36:16 2006
+++ configure.in	Tue Sep 21 07:55:56 2010
@@@@ -34,9 +34,9 @@@@ dnl Required file in package...
 AC_INIT(src/Fl.cxx)
 
 dnl FLTK library versions...
-FL_MAJOR_VERSION=1
-FL_MINOR_VERSION=1
-FL_PATCH_VERSION=7
+#FL_MAJOR_VERSION=1
+#FL_MINOR_VERSION=1
+#FL_PATCH_VERSION=7
 FL_API_VERSION=${FL_MAJOR_VERSION}.${FL_MINOR_VERSION}
d12 2
a13 20
@@@@ -530,13 +530,6 @@@@ dnl Check for pthreads for multi-threaded apps...
 have_pthread=no
 
 if test "x$enable_threads" = xyes; then
-    AC_CHECK_HEADER(pthread.h, AC_DEFINE(HAVE_PTHREAD_H))
-    AC_CHECK_LIB(pthread, pthread_create)
-
-    if test "x$ac_cv_lib_pthread_pthread_create" = xyes -a x$ac_cv_header_pthread_h = xyes; then
-        have_pthread=yes
-    else
-        dnl *BSD uses -pthread option...
         AC_MSG_CHECKING([for pthread_create using -pthread])
 	SAVELIBS="$LIBS"
 	LIBS="-pthread $LIBS"
@@@@ -546,7 +539,6 @@@@ if test "x$enable_threads" = xyes; then
             have_pthread=yes,
 	    LIBS="$SAVELIBS")
         AC_MSG_RESULT([$have_pthread])
-    fi
 fi
d15 8
a22 2
 dnl Define OS-specific stuff...
@@@@ -647,7 +639,7 @@@@ case $uname in
d26 2
a27 2
-	LIBS="$LIBS -lXext -lX11 $X_EXTRA_LIBS"
+	LIBS="$LIBS -lXext -lX11 -lXdmcp -lXau $X_EXTRA_LIBS"
d31 1
a31 1
@@@@ -844,7 +836,7 @@@@ if test -n "$GCC"; then
@


1.11
log
@link to Xdmcp and Xau
ok wilfried@@, naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.10 2006/10/19 09:41:32 wilfried Exp $
--- configure.in.orig	Sun Jan 15 20:36:16 2006
+++ configure.in	Sun Apr  1 18:28:51 2007
d17 23
a39 1
@@@@ -647,7 +647,7 @@@@ case $uname in
d48 1
a48 1
@@@@ -844,7 +844,7 @@@@ if test -n "$GCC"; then
@


1.10
log
@update to 1.1.7
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.9 2005/12/25 20:23:18 naddy Exp $
--- configure.in.orig	Sun Jan 15 19:36:16 2006
+++ configure.in	Thu Oct 19 10:43:04 2006
d17 9
@


1.9
log
@SHARED_LIBS
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.8 2003/12/26 14:18:30 wilfried Exp $
--- configure.in.orig	2003-08-06 00:40:45.000000000 +0200
+++ configure.in	2003-12-26 14:53:25.000000000 +0100
@@@@ -32,9 +32,9 @@@@ dnl Required file in package...
d10 1
a10 1
-FL_PATCH_VERSION=4
d13 1
a13 2
+#FL_PATCH_VERSION=4
 FL_RELEASE_VERSION=
d16 2
a17 10
@@@@ -668,7 +668,7 @@@@ if test -n "$GCC"; then
 	    ;;
     esac
 
-    CXX="$CC"
+    : # CXX="$CC"
 
     # Show all standard warnings + unused variables when compiling...
     OPTIM="-Wall -Wunused $OPTIM"
@@@@ -695,7 +695,7 @@@@ if test -n "$GCC"; then
d21 2
a22 2
-            OPTIM="-O2 $OPTIM"
+            : # OPTIM="-O2 $OPTIM"
@


1.8
log
@update fltk to 1.1.4
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.7 2003/04/02 12:58:43 wilfried Exp $
d11 3
a13 3
+FL_MAJOR_VERSION=4
+FL_MINOR_VERSION=0
+FL_PATCH_VERSION=0
@


1.7
log
@update to fltk-1.1.3
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.6 2002/12/16 16:58:12 wilfried Exp $
--- configure.in.orig	Thu Jan 30 22:38:18 2003
+++ configure.in	Wed Apr  2 14:36:56 2003
d10 2
a11 2
-FL_PATCH_VERSION=3
+FL_MAJOR_VERSION=3
d17 1
a17 1
@@@@ -664,7 +664,7 @@@@ if test -n "$GCC"; then
d26 1
a26 1
@@@@ -691,7 +691,7 @@@@ if test -n "$GCC"; then
@


1.6
log
@update to fltk-1.1.2
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.5 2002/11/04 16:59:05 wilfried Exp $
--- configure.in.orig	Thu Nov 14 14:57:39 2002
+++ configure.in	Mon Dec 16 16:51:49 2002
d9 4
a12 3
+FL_MAJOR_VERSION=2
 FL_MINOR_VERSION=1
-FL_PATCH_VERSION=2
@


1.5
log
@update to fltk-1.1.1
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.4 2002/09/30 06:44:17 wilfried Exp $
--- configure.in.orig	Wed Oct 23 17:18:57 2002
+++ configure.in	Mon Nov  4 17:26:16 2002
a8 2
-FL_MINOR_VERSION=1
-FL_PATCH_VERSION=1
d10 2
a11 1
+FL_MINOR_VERSION=0
d16 1
a16 1
@@@@ -632,7 +632,7 @@@@ if test -n "$GCC"; then
d25 1
a25 1
@@@@ -659,7 +659,7 @@@@ if test -n "$GCC"; then
@


1.4
log
@Don't use cc to compile C++ files, respect CXX and CXXFLAGS
requested by and ok naddy@@
@
text
@d1 17
a17 4
$OpenBSD$
--- configure.in.orig	Mon Aug 12 21:42:54 2002
+++ configure.in	Sat Sep 28 10:39:45 2002
@@@@ -612,7 +612,7 @@@@ if test -n "$GCC"; then
d26 1
a26 1
@@@@ -639,7 +639,7 @@@@ if test -n "$GCC"; then
@


1.3
log
@update to fltk-1.1.0rc5 and take maintainership
@
text
@d1 6
a6 14
$OpenBSD: patch-configure_in,v 1.2 2001/06/07 02:28:25 matt Exp $
--- configure.in.orig	Mon May  7 10:34:22 2001
+++ configure.in	Wed Jun  6 22:14:02 2001
@@@@ -80,7 +80,7 @@@@ if eval "test x$enable_shared = xyes"; t
 	  ;;
       FreeBSD* | NetBSD* | OpenBSD*)
           DSONAME="libfltk.so.1"
-	  DSOCOMMAND="\$(CXX) -Wl,-soname,\$@@ -shared \$(OPTIM) -o"
+	  DSOCOMMAND="\$(CXX) -Wl,-soname,\$@@ -fPIC -shared \$(OPTIM) -o"
 	  ;;
       AIX*)
           PICFLAG=0
@@@@ -178,10 +178,10 @@@@ dnl Check for OpenGL unless disabled...
 GLLIB=
d8 11
a18 14
 if test x$enable_gl != xno; then
+    SAVE_ac_cpp=$ac_cpp
+    ac_cpp="$ac_cpp -I$x_includes"
     AC_CHECK_HEADER(GL/gl.h,
-	AC_CHECK_LIB(GL, glXMakeCurrent, AC_DEFINE(HAVE_GL) GLLIB="-lGL", \
-	    AC_CHECK_LIB(MesaGL,glXMakeCurrent, AC_DEFINE(HAVE_GL) GLLIB=" -lMesaGL",,\
-		-lX11 -lXext $X_EXTRA_LIBS -lm), \
+	AC_CHECK_LIB(GLU, gluCylinder, AC_DEFINE(HAVE_GL) GLLIB="-lGL", \
 	    -lX11 -lXext $X_EXTRA_LIBS -lm)
     )
     AC_CHECK_HEADER(GL/glu.h,
@@@@ -189,19 +189,20 @@@@ if test x$enable_gl != xno; then
 	if test x$ac_cv_lib_GL_glXMakeCurrent = xyes; then
 	    GLLIB="-lGLU $GLLIB"
d20 1
a20 17
-	if test x$ac_cv_lib_MesaGL_glXMakeCurrent = xyes; then
-	    GLLIB="-lMesaGLU $GLLIB"
-	fi
     )
+    ac_cpp=$SAVE_ac_cpp
 fi
 
 AC_SUBST(GLLIB)
 
 dnl Check for the Xdbe extension...
+SAVE_ac_cpp=$ac_cpp
+ac_cpp="$ac_cpp -I$x_includes"
 AC_CHECK_HEADER(X11/extensions/Xdbe.h, \
     if test "$uname" != "SunOS"; then
         AC_DEFINE(HAVE_XDBE)
     fi)
+ac_cpp=$SAVE_ac_cpp
a21 23
 dnl Check for overlay visuals...
 AC_CACHE_CHECK("for X overlay visuals", ac_cv_have_overlay,
@@@@ -263,20 +264,6 @@@@ if test -n "$GXX"; then
     # Use gcc instead of c++ or g++, since we don't need the C++
     # library to depend on...
     CXX="$CC"
-    CFLAGS="-Wall $CFLAGS"
-    CXXFLAGS="-Wall $CXXFLAGS"
-    if test -z "$DEBUGFLAG"; then
-    	#
-	# Note: Can't use -fomit-frame-pointer - prevents tools like
-	#       libsafe from working!
-        #
-	#       Don't use -fforce-mem, -fforce-addr, or -fcaller-saves.
-	#       They all seem to make either no difference or enlarge
-	#       the code by a few hundred bytes.
-        #
-        CFLAGS="-O2 $CFLAGS"
-        CXXFLAGS="-O2 $CXXFLAGS"
-    fi
     if test $PICFLAG = 1; then
     	CFLAGS="-fPIC $CFLAGS"
     	CXXFLAGS="-fPIC $CXXFLAGS"
@


1.2
log
@- 1.0.11
- fold in glut flavor, don't need it anymore
- use autoconf
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@- add glut flavor, which requires libGLU (and will not build if
  libGLU is not present)
- fix X11/extensions/Xdbe.h check
- respect CFLAGS
- create shared libraries
- don't build tests
thx espie@@, naddy@@ for heads-up and pointers
@
text
@d1 4
a4 4
$OpenBSD: update-patches,v 1.4 2001/03/31 22:54:41 espie Exp $
--- configure.in.orig	Wed Dec  6 16:09:59 2000
+++ configure.in	Sat Apr 14 21:58:21 2001
@@@@ -79,7 +79,7 @@@@ if eval "test x$enable_shared = xyes"; t
d11 26
a36 5
       *)
           echo "Warning: shared libraries may not be supported.  Trying -shared"
@@@@ -146,18 +146,24 @@@@ LIBS="$LIBS$X_LIBS"
 CFLAGS="$CFLAGS$X_CFLAGS"
 CXXFLAGS="$CXXFLAGS$X_CFLAGS"
a37 9
-dnl My test to see if OpenGL is on this machine:
 GLLIB=
-AC_CHECK_LIB(GL, glXMakeCurrent, AC_DEFINE(HAVE_GL) GLLIB=" -lGLU -lGL", \
-    AC_CHECK_LIB(MesaGL,glXMakeCurrent, AC_DEFINE(HAVE_GL) GLLIB=" -lMesaGLU -lMesaGL",,\
-	-lX11 -lXext $X_EXTRA_LIBS -lm), \
+AC_ARG_ENABLE(glut, [  --enable-glut           build the GLUT compatibility layer [default=no]],[
+if eval "test x$enable_glut = xyes"; then
+AC_CHECK_LIB(GLU, gluCylinder, AC_DEFINE(HAVE_GL) GLLIB=" -lGLU -lGL", \
     -lX11 -lXext $X_EXTRA_LIBS -lm)
a38 4
+if eval "test x\"$GLLIB\" = x"; then
+    AC_MSG_ERROR([--enable-glut was specified but GLU could not be found])
+fi
+fi])
d40 1
d49 1
d51 4
a54 5
     if xprop -root 2>/dev/null | grep -c "SERVER_OVERLAY_VISUALS" >/dev/null; then
@@@@ -175,17 +181,6 @@@@ MAKEDEPEND="\$(CXX) -M"
 dnl add warnings to compiler switches:
 dnl do this last so messing with switches does not break tests
 if test -n "$GXX"; then
d58 2
a59 1
-    	# Note: Can't use -fomit-frame-pointer - prevents tools like
d61 5
a65 3
-	# WAS: I removed the -fforce-mem, -fforce-addr, -fcaller-saves
-	#      They all seemed to make either no difference or enlarged
-	#      the code by a few hundred bytes.
@

