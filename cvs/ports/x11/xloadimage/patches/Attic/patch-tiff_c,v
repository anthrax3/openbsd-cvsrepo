head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.12.12.13.22.41;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2012.04.14.15.13.30;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@maintenance update to 4.1, Debian patch level 22
@
text
@$OpenBSD: patch-tiff_c,v 1.1 2012/04/14 15:13:30 naddy Exp $
--- tiff.c.orig	Fri Apr 13 15:18:04 2012
+++ tiff.c	Fri Apr 13 15:19:54 2012
@@@@ -34,14 +34,14 @@@@ static TIFF *is_tiff(fullname, name, info)
      struct tiff_info *info;
 {
   ZFILE *zf;
-  TIFFHeader th;
+  TIFFHeaderClassic th;
   TIFF *tiff;
 
   zf = zopen(fullname);
 
   /* read TIFF header and see if it looks right
    */
-  if ((zread(zf, (byte *)&th, sizeof(TIFFHeader)) == sizeof(TIFFHeader)) &&
+  if ((zread(zf, (byte *)&th, sizeof(TIFFHeaderClassic)) == sizeof(TIFFHeaderClassic)) &&
       ((th.tiff_magic == TIFF_BIGENDIAN) ||
        (th.tiff_magic == TIFF_LITTLEENDIAN))) {
 
@


1.1
log
@fixes for tiff 4.0 API changes; from FreeBSD
@
text
@d1 1
a1 1
$OpenBSD$
@

