head	1.5;
access;
symbols
	OPENBSD_5_6:1.4.0.2
	OPENBSD_5_6_BASE:1.4;
locks; strict;
comment	@# @;


1.5
date	2014.10.04.15.03.08;	author jasper;	state dead;
branches;
next	1.4;
commitid	15kCVsNBkJAGM5EV;

1.4
date	2014.04.15.13.10.42;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2014.04.15.08.48.50;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2014.03.28.13.30.18;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2014.03.28.12.33.10;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to gnome-common-3.14.0
@
text
@$OpenBSD: patch-macros2_gnome-autogen_sh,v 1.4 2014/04/15 13:10:42 ajacoutot Exp $

From f5bd3785edfbebef04089fc52f804249d88b89de Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@gnome.org>
Date: Tue, 15 Apr 2014 10:27:49 +0200
Subject: make program_VERSION a local variable

--- macros2/gnome-autogen.sh.orig	Mon Mar 24 13:16:46 2014
+++ macros2/gnome-autogen.sh	Tue Apr 15 10:36:49 2014
@@@@ -80,6 +80,7 @@@@ version_check() {
     vc_min_version=$4
     vc_source=$5
     vc_status=1
+    local ${vc_variable}_VERSION
 
     vc_checkprog=`eval echo "\\$$vc_variable"`
     if [ -n "$vc_checkprog" ]; then
@


1.4
log
@Pushed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-macros2_gnome-autogen_sh,v 1.3 2014/04/15 08:48:50 ajacoutot Exp $
@


1.3
log
@Do not override autofoo_VERSION.
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=728243
@


1.2
log
@Turns out gnome-common is too clever for our stupid autotools ports...
Just symlink aclocal and friends.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-macros2_gnome-autogen_sh,v 1.1 2014/03/28 12:33:10 jasper Exp $
d3 1
a3 2
Revert, as it leads to:
/usr/local/bin/aclocal[35]: /usr/local/bin/aclocal-1.14.1: not found
d5 7
a11 22
From b6f099488526288ad0ab1b2061304441df0b2466 Mon Sep 17 00:00:00 2001
From: Ryan Lortie <desrt@@desrt.ca>
Date: Thu, 13 Mar 2014 13:57:29 +0000
Subject: gnome-autogen: require automake 1.11.2

--- macros2/gnome-autogen.sh.orig	Fri Mar 28 13:30:43 2014
+++ macros2/gnome-autogen.sh	Fri Mar 28 13:30:57 2014
@@@@ -6,7 +6,6 @@@@ test "$PKG_NAME" || PKG_NAME=Package
 test "$srcdir" || srcdir=.
 
 # default version requirements ...
-test "$REQUIRED_AUTOMAKE_VERSION" || REQUIRED_AUTOMAKE_VERSION=1.11.2
 test "$REQUIRED_AUTORECONF_VERSION" || REQUIRED_AUTORECONF_VERSION=2.53
 test "$REQUIRED_GLIB_GETTEXT_VERSION" || REQUIRED_GLIB_GETTEXT_VERSION=2.2.0
 test "$REQUIRED_INTLTOOL_VERSION" || REQUIRED_INTLTOOL_VERSION=0.25
@@@@ -251,9 +250,6 @@@@ want_pkg_config=false
 want_gtk_doc=false
 want_gnome_doc_utils=false
 want_maintainer_mode=false
-
-version_check automake AUTOMAKE automake $REQUIRED_AUTOMAKE_VERSION \
-    "http://ftp.gnu.org/pub/gnu/automake/automake-$REQUIRED_AUTOMAKE_VERSION.tar.xz"
d13 2
a14 2
 version_check autoreconf AUTORECONF autoreconf $REQUIRED_AUTORECONF_VERSION \
     "http://ftp.gnu.org/pub/gnu/autoconf/autoconf-$REQUIRED_AUTORECONF_VERSION.tar.xz"
@


1.1
log
@revert a commit that results in finding the wrong aclocal.
to be investigated later, but it unbreaks libgtop2 for now.
@
text
@d1 1
a1 1
$OpenBSD$
@

