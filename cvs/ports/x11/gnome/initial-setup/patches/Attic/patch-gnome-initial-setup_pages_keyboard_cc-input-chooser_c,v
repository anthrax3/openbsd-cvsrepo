head	1.3;
access;
symbols
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.10.06.10.16.42;	author ajacoutot;	state dead;
branches;
next	1.2;
commitid	jn1QsVCk7J4wX4dU;

1.2
date	2014.08.15.09.28.17;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	t7QuOmWshH3glTu3;

1.1
date	2014.04.07.10.30.32;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to gnome-initial-setup-3.14.0.
@
text
@$OpenBSD: patch-gnome-initial-setup_pages_keyboard_cc-input-chooser_c,v 1.2 2014/08/15 09:28:17 ajacoutot Exp $

gnome-initial-setup in free(): error: bogus pointer

--- gnome-initial-setup/pages/keyboard/cc-input-chooser.c.orig	Mon Mar 10 05:47:29 2014
+++ gnome-initial-setup/pages/keyboard/cc-input-chooser.c	Fri Aug 15 11:14:48 2014
@@@@ -363,7 +363,8 @@@@ get_locale_infos (CcInputChooser *chooser)
 {
         CcInputChooserPrivate *priv = cc_input_chooser_get_instance_private (chooser);
 	const gchar *type, *id;
-	gchar *lang, *country;
+	gchar *lang = NULL;
+	gchar *country = NULL;
 	GList *list;
 
 	if (gnome_get_input_source_from_locale (priv->locale, &type, &id)) { 
@@@@ -574,7 +575,8 @@@@ get_ibus_locale_infos (CcInputChooser *chooser)
 	GHashTableIter iter;
 	const gchar *engine_id;
 	IBusEngineDesc *engine;
-	gchar *lang, *country;
+	gchar *lang = NULL;
+	gchar *country = NULL;
 
 	if (!priv->ibus_engines)
 		return;
@


1.2
log
@Enable heimdal since it's a hard dependency for the users panel.
@
text
@d1 1
a1 1
$OpenBSD: patch-gnome-initial-setup_pages_keyboard_cc-input-chooser_c,v 1.1 2014/04/07 10:30:32 ajacoutot Exp $
@


1.1
log
@Prevent initial-setup from crashing all over -- not for public consumption
yet.
@
text
@d1 1
a1 1
$OpenBSD$
d6 8
a13 3
+++ gnome-initial-setup/pages/keyboard/cc-input-chooser.c	Mon Apr  7 12:20:04 2014
@@@@ -366,6 +366,8 @@@@ get_locale_infos (CcInputChooser *chooser)
 	gchar *lang, *country;
a15 2
+	lang = country = NULL;
+
d17 2
a18 3
 		if (g_str_equal (type, INPUT_SOURCE_TYPE_XKB))
 			add_row_to_list (chooser, type, id);
@@@@ -575,6 +577,8 @@@@ get_ibus_locale_infos (CcInputChooser *chooser)
d21 3
a23 3
 	gchar *lang, *country;
+
+	lang = country = NULL;
@

