head	1.38;
access;
symbols
	OPENBSD_5_2:1.36.0.2
	OPENBSD_5_2_BASE:1.36
	OPENBSD_5_1_BASE:1.33
	OPENBSD_5_1:1.33.0.2
	OPENBSD_5_0:1.22.0.2
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.5.0.2
	OPENBSD_4_6_BASE:1.5
	ajacoutot_20090315:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.38
date	2012.10.05.16.14.57;	author ajacoutot;	state dead;
branches;
next	1.37;

1.37
date	2012.09.29.10.10.45;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2012.06.15.08.30.19;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2012.04.10.08.27.16;	author jasper;	state Exp;
branches;
next	1.34;

1.34
date	2012.03.29.07.06.02;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2011.12.03.22.17.15;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2011.11.04.09.56.29;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2011.09.28.09.47.46;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2011.09.26.14.34.52;	author jasper;	state Exp;
branches;
next	1.29;

1.29
date	2011.09.23.08.49.41;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2011.09.20.21.10.00;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2011.09.20.20.52.46;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2011.09.19.07.44.58;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2011.09.16.12.29.13;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2011.09.14.05.52.04;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.12.12.04.16;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2011.07.29.18.04.52;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.07.29.06.25.48;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.04.05.16.37.59;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.23.06.00.31;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.22.08.36.57;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.29.09.20.06;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.18.13.18.14;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.18.12.26.04;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2010.10.11.08.19.19;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.09.10.07.16.05;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.09.08.08.18.57;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.25.08.15.32;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.12.26.16.25.45;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.12.21.18.03.18;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.11.10.08.09.37;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.10.22.13.18.23;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2009.08.11.08.39.38;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.28.10.54.04;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.06.10.05.21;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2009.03.18.11.28.37;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.15.21.55.12;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.03.15.11.50.10;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.03.15.11.50.10;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.38
log
@Remove gnome2 oldie.

ok jasper@@
@
text
@# $OpenBSD: Makefile,v 1.37 2012/09/29 10:10:45 ajacoutot Exp $

SHARED_ONLY=	Yes

COMMENT=	advanced general purpose calculator

GNOME_PROJECT=	genius
GNOME_VERSION=	1.0.15
REVISION=	2

HOMEPAGE=	http://www.jirka.org/genius.html

CATEGORIES=	math

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB += xcb-render X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender atk-1.0
WANTLIB += c cairo expat fontconfig GL Xxf86vm drm xcb-shm
WANTLIB += freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB += gtk-x11-2.0 m ncurses pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread readline pthread-stubs xcb
WANTLIB += termcap xml2 z ffi stdc++ util
WANTLIB += gtksourceview-2.0 gmp mpfr vte

MODULES=	devel/gettext \
		x11/gnome

RUN_DEPENDS +=	misc/shared-mime-info
# needs to run ps2epsi for EPS output
RUN_DEPENDS +=	print/ghostscript/gnu
LIB_DEPENDS=	x11/gtksourceview \
		devel/gmp \
		devel/mpfr \
		devel/vte

MODGNOME_TOOLS= 	yelp
MODGNOME_DESKTOP_FILE=	Yes
MODGNOME_ICON_CACHE=	Yes

MODGNOME_LDFLAGS=	-L${X11BASE}/lib -lgmp
CONFIGURE_ARGS=	--disable-update-mimedb \
		--disable-extra-gcc-optimization

post-install:
	rm ${PREFIX}/lib/genius/*.{a,la}

.include <bsd.port.mk>
@


1.37
log
@make plist has been broken long enough that I don't want to deal with it
anymore; instead of using @@comment markers in PLIST, use a post-install
target to remove what we don't want.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/06/15 08:30:19 ajacoutot Exp $
@


1.36
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/04/10 08:27:16 jasper Exp $
d9 1
a9 1
REVISION=	1
d49 3
@


1.35
log
@whitespace cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/03/29 07:06:02 ajacoutot Exp $
d9 1
a9 1
REVISION=	0
@


1.34
log
@Update to genius-1.0.15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/12/03 22:17:15 ajacoutot Exp $
d9 1
@


1.33
log
@Use MODGNOME_ICON_CACHE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/11/04 09:56:29 jasper Exp $
d8 1
a8 2
GNOME_VERSION=	1.0.14
REVISION=	5
d27 1
a27 1
WANTLIB += termcap xml2 z ffi stdc++
@


1.32
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/09/28 09:47:46 jasper Exp $
d9 1
a9 1
REVISION=	4
d42 1
a42 1
MODGNOME_TOOLS= yelp
d44 1
@


1.31
log
@sync after recent gnome.port.mk CONFIGURE_ENV changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/09/26 14:34:52 jasper Exp $
d9 1
a9 1
REVISION=	3
d28 1
a28 1
WANTLIB += termcap xml2 z
@


1.30
log
@adjust dependencies after vte(3) changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/09/23 08:49:41 ajacoutot Exp $
d45 1
a45 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -lgmp"
@


1.29
log
@Fix dependencies and bump after recent vte switch to FLAVORS and gtk+3
support by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/09/20 21:10:00 jasper Exp $
d9 1
a9 1
REVISION=	2
d40 1
a40 1
		devel/vte,gtk2
@


1.28
log
@CONFIGURE_SHARED is now implied by gnome.port.mk, so no need to make it explicit anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/09/20 20:52:46 jasper Exp $
d9 1
a9 1
REVISION=	1
d40 1
a40 1
		devel/vte
@


1.27
log
@- switch to MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/09/19 07:44:58 ajacoutot Exp $
d47 1
a47 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-update-mimedb \
@


1.26
log
@DESKTOP_FILES => MODGNOME_DESKTOP_FILE, like it should always have been.

discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/09/16 12:29:13 espie Exp $
d42 1
a42 1
MODGNOME_HELP_FILES= Yes
@


1.25
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/09/14 05:52:04 ajacoutot Exp $
d43 1
a43 1
DESKTOP_FILES=	Yes
@


1.24
log
@Remove gratuitous patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/09/12 12:04:16 jasper Exp $
d9 1
a9 1
REVISION=	0
@


1.23
log
@
switch to using .tar.xz by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/07/29 18:04:52 ajacoutot Exp $
d9 1
@


1.22
log
@Update to genius-1.0.14, fixes a crasher.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/07/29 06:25:48 ajacoutot Exp $
a8 2

EXTRACT_SUFX=	.tar.xz
@


1.21
log
@Bugfix update to genius-1.0.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/04/05 16:37:59 ajacoutot Exp $
d8 3
a10 1
GNOME_VERSION=	1.0.13
@


1.20
log
@--disable-scrollkeeper is not needed when rarian is in the dependency
chain (scrollkeer is a compatility wrapper that does nothing).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/23 06:00:31 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=	1.0.12
@


1.19
log
@Bugfix update to genius-1.0.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/11/22 08:36:57 espie Exp $
a46 1
		--disable-scrollkeeper \
@


1.18
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/29 09:20:06 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=	1.0.11
REVISION=	1
d33 3
a35 1
RUN_DEPENDS=	misc/shared-mime-info>=0.21
@


1.17
log
@jasper@@ gave me a hint that this may actually work now, and it does, so
remove BROKEN and regen WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/18 13:18:14 jasper Exp $
d34 5
a38 5
RUN_DEPENDS=	:shared-mime-info->=0.21:misc/shared-mime-info
LIB_DEPENDS=	::x11/gtksourceview \
		::devel/gmp \
		::devel/mpfr \
		::devel/vte
@


1.16
log
@- remove USE_X11=Yes where needed (can't we fully get rid of it?)
and set USE_X11=No where needed

agreed by aja@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.15 2010/10/18 12:26:04 jasper Exp $

BROKEN=		console is never spawned - pthreads(3) bug?
d9 1
a9 1
REVISION=	0
d23 1
a23 1
WANTLIB += c cairo expat fontconfig xcb-render-util
@


1.15
log
@- set SHARED_ONLY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/10/11 08:19:19 jasper Exp $
a43 1
USE_X11=	Yes
@


1.14
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/09/10 07:16:05 ajacoutot Exp $
d4 2
@


1.13
log
@Minor update to genius-1.0.11. Still broken.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/09/08 08:18:57 ajacoutot Exp $
d9 1
d25 1
a25 1
WANTLIB += glib-2.0 glitz gmodule-2.0 gobject-2.0 gthread-2.0
@


1.12
log
@Update to genius-1.0.10.
Still broken but another step towards gnomevfs2 removal...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/07/25 08:15:32 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=	1.0.10
@


1.11
log
@Switch to new DEPENDS/WANTLIB/REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/12/26 16:25:45 ajacoutot Exp $
d8 1
a8 3
GNOME_VERSION=	1.0.9

REVISION=	0
d20 1
a20 1
WANTLIB += ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp
d22 2
a23 2
WANTLIB += c cairo crypto dbus-1 dbus-glib-1 expat fontconfig
WANTLIB += freetype gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
d27 2
a28 2
WANTLIB += ssl termcap util xml2 z avahi-client avahi-common avahi-glib
WANTLIB += gtksourceview-2.0 gnomevfs-2 gmp mpfr vte
a34 1
		::x11/gnome/vfs2 \
@


1.10
log
@Update to genius-1.0.9.
Been broken for a while, so mark it as such until it is fixed (iirc some
pthreads(3) bug).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/12/21 18:03:18 ajacoutot Exp $
d10 2
d30 1
d36 5
a40 5
LIB_DEPENDS=	gtksourceview-2.0.>=2::x11/gtksourceview \
		gnomevfs-2.>=2400::x11/gnome/vfs2 \
		gmp.>=7::devel/gmp \
		mpfr::devel/mpfr \
		vte.>=12::devel/vte
@


1.9
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos and remove
@@unexec for theme ports.

prodded by espie@@ after me whining at the ports system ;)
discussed with espie@@ sthen@@ landry@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.8 2009/11/10 08:09:37 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=	1.0.8
PKGNAME=	${DISTNAME}p0
@


1.8
log
@Bugfix update to genius-1.0.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/10/22 13:18:23 ajacoutot Exp $
d7 1
@


1.7
log
@Update to genius-1.0.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/08/11 08:39:38 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=	1.0.7
@


1.6
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/06/28 10:54:04 sthen Exp $
d6 1
a6 2
GNOME_VERSION=	1.0.6
PKGNAME=	${DISTNAME}p2
@


1.5
log
@sync WANTLIB, bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/04/06 10:05:21 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
d25 1
a25 1
WANTLIB += pcre pixman-1 png pthread readline
@


1.4
log
@Rework the way we handle build_depends with the gnome MODULE when
MODGNOME_HELP_FILES is set to yes.

* add a build_depends on gnome-doc-utils if MODGNOME_HELP_FILES is set
to yes
* add rarian as a run_depends for gnome-doc-utils (will help with older
ports that will never be updated from using deprecated scrollkeeper)
* remove build+run_depends on gnome-doc-utils and rarian for ports that
have MODGNOME_HELP_FILES as they are now implied.
* bump where needed

This should help in having all required build dependencies for
gnome-related ports and it greatly simplifies things.

"thanks for cleaning this mess" and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/03/18 11:28:37 ajacoutot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d19 2
a20 2
WANTLIB += ICE ORBit-2 SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xft Xi Xinerama Xrandr Xrender atk-1.0
d25 2
a26 2
WANTLIB += pangox-1.0 pangoxft-1.0 pcre pixman-1 png pthread readline
WANTLIB += ssl termcap util xml2 z
@


1.3
log
@- one entry in the menu in enough
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/03/15 21:55:12 ajacoutot Exp $
a30 1
BUILD_DEPENDS=	::textproc/rarian
@


1.2
log
@- add to math CATEGORIES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/03/15 11:50:10 ajacoutot Exp $
d7 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 2
@


1.1.1.1
log
@Import genius-1.0.6

Genius is a general purpose calculator program similiar in some aspects 
to BC, Matlab, Maple or Mathematica.  It is useful both as a simple
calculator and as a research or educational tool.  The syntax is very
intuitive and is designed to mimic how mathematics is usually written.
GEL is the name of its extention language, it stands for Genius
Extension Language.
@
text
@@
