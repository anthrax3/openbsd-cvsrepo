head	1.256;
access;
symbols
	OPENBSD_6_1:1.251.0.2
	OPENBSD_6_1_BASE:1.251
	OPENBSD_6_0:1.248.0.2
	OPENBSD_6_0_BASE:1.248
	OPENBSD_5_9:1.244.0.2
	OPENBSD_5_9_BASE:1.244
	OPENBSD_5_8:1.233.0.4
	OPENBSD_5_8_BASE:1.233
	OPENBSD_5_7:1.216.0.2
	OPENBSD_5_7_BASE:1.216
	OPENBSD_5_6:1.211.0.2
	OPENBSD_5_6_BASE:1.211
	OPENBSD_5_5:1.189.0.2
	OPENBSD_5_5_BASE:1.189
	OPENBSD_5_4:1.168.0.2
	OPENBSD_5_4_BASE:1.168
	OPENBSD_5_3:1.146.0.2
	OPENBSD_5_3_BASE:1.146
	OPENBSD_5_2:1.121.0.2
	OPENBSD_5_2_BASE:1.121
	OPENBSD_5_1_BASE:1.119
	OPENBSD_5_1:1.119.0.2
	OPENBSD_5_0:1.102.0.2
	OPENBSD_5_0_BASE:1.102
	OPENBSD_4_9:1.98.0.2
	OPENBSD_4_9_BASE:1.98
	OPENBSD_4_8:1.77.0.2
	OPENBSD_4_8_BASE:1.77
	OPENBSD_4_7:1.68.0.2
	OPENBSD_4_7_BASE:1.68
	OPENBSD_4_6:1.63.0.2
	OPENBSD_4_6_BASE:1.63
	OPENBSD_4_5:1.51.0.2
	OPENBSD_4_5_BASE:1.51
	OPENBSD_4_4:1.29.0.2
	OPENBSD_4_4_BASE:1.29
	OPENBSD_4_3:1.24.0.2
	OPENBSD_4_3_BASE:1.24
	OPENBSD_4_2:1.19.0.2
	OPENBSD_4_2_BASE:1.19
	OPENBSD_4_1:1.15.0.2
	OPENBSD_4_1_BASE:1.15
	OPENBSD_4_0:1.13.0.2
	OPENBSD_4_0_BASE:1.13
	OPENBSD_3_9:1.12.0.2
	OPENBSD_3_9_BASE:1.12
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.7.0.2
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	marcm_2003-oct-08:1.1.1.1
	marcm:1.1.1;
locks; strict;
comment	@# @;


1.256
date	2017.04.22.11.16.26;	author ajacoutot;	state Exp;
branches;
next	1.255;
commitid	CpHKddxDDSf1tXO1;

1.255
date	2017.04.17.13.17.07;	author ajacoutot;	state Exp;
branches;
next	1.254;
commitid	jKsCTviiCSXwN30M;

1.254
date	2017.04.16.12.43.20;	author ajacoutot;	state Exp;
branches;
next	1.253;
commitid	63W5LV3b3zfwkOvg;

1.253
date	2017.04.13.07.38.44;	author ajacoutot;	state Exp;
branches;
next	1.252;
commitid	lvCz8KVE6EBCyLTt;

1.252
date	2017.04.09.14.37.44;	author ajacoutot;	state Exp;
branches;
next	1.251;
commitid	LPkTrUKNM40DCbT7;

1.251
date	2017.03.11.00.22.27;	author ajacoutot;	state Exp;
branches;
next	1.250;
commitid	wTOKIz3zLsuh6oyz;

1.250
date	2017.03.03.13.01.26;	author ajacoutot;	state Exp;
branches;
next	1.249;
commitid	yUSOqvnIs3zvjqyw;

1.249
date	2016.10.31.16.15.46;	author ajacoutot;	state Exp;
branches;
next	1.248;
commitid	NJnOZaVXR2tBRWDk;

1.248
date	2016.04.26.08.59.48;	author ajacoutot;	state Exp;
branches;
next	1.247;
commitid	XzwGOr3TJMZMwIW8;

1.247
date	2016.04.26.08.25.04;	author ajacoutot;	state Exp;
branches;
next	1.246;
commitid	U2wyfq8sPYBn4Lxu;

1.246
date	2016.04.15.14.11.09;	author ajacoutot;	state Exp;
branches;
next	1.245;
commitid	Mbx3T92O3F2i3yTU;

1.245
date	2016.03.18.23.12.20;	author naddy;	state Exp;
branches;
next	1.244;
commitid	KZAl4KEiw6a3Jixw;

1.244
date	2016.01.23.13.55.30;	author ajacoutot;	state Exp;
branches;
next	1.243;
commitid	UGiaqHYHv3Hz16OG;

1.243
date	2015.12.21.10.17.32;	author ajacoutot;	state Exp;
branches;
next	1.242;
commitid	mtNXgqH8qNXf2w4k;

1.242
date	2015.12.21.09.32.01;	author ajacoutot;	state Exp;
branches;
next	1.241;
commitid	89yBmxf8zl7f4edS;

1.241
date	2015.12.20.09.38.14;	author ajacoutot;	state Exp;
branches;
next	1.240;
commitid	SUL8g4c0gjEg4ZTf;

1.240
date	2015.12.19.14.13.45;	author ajacoutot;	state Exp;
branches;
next	1.239;
commitid	jNmUMRLbxGUrj246;

1.239
date	2015.11.17.17.48.40;	author ajacoutot;	state Exp;
branches;
next	1.238;
commitid	DLgevWL5LU1VuGWp;

1.238
date	2015.10.18.13.25.54;	author ajacoutot;	state Exp;
branches;
next	1.237;
commitid	hskL6TnJZ8GALNPe;

1.237
date	2015.09.18.20.30.07;	author ajacoutot;	state Exp;
branches;
next	1.236;
commitid	2LWggoIZKSMFZmLi;

1.236
date	2015.09.18.13.38.45;	author ajacoutot;	state Exp;
branches;
next	1.235;
commitid	MvwiF4ldCPegnE0r;

1.235
date	2015.08.27.06.48.30;	author ajacoutot;	state Exp;
branches;
next	1.234;
commitid	fg1RtdQjUrtjJJWq;

1.234
date	2015.08.15.11.46.16;	author ajacoutot;	state Exp;
branches;
next	1.233;
commitid	71eL4MfRPnRliaew;

1.233
date	2015.07.18.22.29.56;	author ajacoutot;	state Exp;
branches
	1.233.4.1;
next	1.232;
commitid	XyOP5eJxW8KTLfgy;

1.232
date	2015.07.16.01.51.25;	author ajacoutot;	state Exp;
branches;
next	1.231;
commitid	imUaFke3zCg92r6G;

1.231
date	2015.07.02.14.29.52;	author ajacoutot;	state Exp;
branches;
next	1.230;
commitid	TCtLNzu3vTvKc18C;

1.230
date	2015.06.11.11.56.15;	author ajacoutot;	state Exp;
branches;
next	1.229;
commitid	NqCUDgdGV2daWnaK;

1.229
date	2015.05.08.09.08.44;	author espie;	state Exp;
branches;
next	1.228;
commitid	8WaxsMNN6opOzn9t;

1.228
date	2015.04.16.14.55.22;	author ajacoutot;	state Exp;
branches;
next	1.227;
commitid	YSrFb9yoMY11sj9i;

1.227
date	2015.04.15.14.47.00;	author ajacoutot;	state Exp;
branches;
next	1.226;
commitid	uB9GbJGvyj7ylinZ;

1.226
date	2015.04.15.09.40.53;	author ajacoutot;	state Exp;
branches;
next	1.225;
commitid	dfR1rb9OtImYnGFF;

1.225
date	2015.04.15.07.25.46;	author ajacoutot;	state Exp;
branches;
next	1.224;
commitid	75fdV4pvfzeme5bP;

1.224
date	2015.04.10.20.43.51;	author ajacoutot;	state Exp;
branches;
next	1.223;
commitid	EGaVr3af0a3lQ0L8;

1.223
date	2015.04.04.17.38.17;	author ajacoutot;	state Exp;
branches;
next	1.222;
commitid	ntgg7BbUFSGBBeVf;

1.222
date	2015.04.04.09.21.06;	author ajacoutot;	state Exp;
branches;
next	1.221;
commitid	kS3kwKZogsvzYmEY;

1.221
date	2015.04.03.18.39.06;	author ajacoutot;	state Exp;
branches;
next	1.220;
commitid	yAn0NWAFkDqbBMqK;

1.220
date	2015.03.30.16.12.02;	author ajacoutot;	state Exp;
branches;
next	1.219;
commitid	p4Tvuj1ZNoF2kydn;

1.219
date	2015.03.30.12.29.09;	author ajacoutot;	state Exp;
branches;
next	1.218;
commitid	tCHAs4VGPj91Q2Z4;

1.218
date	2015.03.27.08.16.16;	author ajacoutot;	state Exp;
branches;
next	1.217;
commitid	BUhOiEl2FUSRKwq7;

1.217
date	2015.03.15.08.31.49;	author ajacoutot;	state Exp;
branches;
next	1.216;
commitid	utdl88qfBqj36FKE;

1.216
date	2014.11.01.15.27.52;	author ajacoutot;	state Exp;
branches;
next	1.215;
commitid	KqIpDQ8sxRkLYt8W;

1.215
date	2014.10.14.12.57.15;	author ajacoutot;	state Exp;
branches;
next	1.214;
commitid	pXte4qKu1xYIARIb;

1.214
date	2014.10.06.08.31.27;	author ajacoutot;	state Exp;
branches;
next	1.213;
commitid	dkWmnfPWgMKeMwId;

1.213
date	2014.09.04.05.31.34;	author ajacoutot;	state Exp;
branches;
next	1.212;
commitid	MVHPIQm4BlXBB7EF;

1.212
date	2014.08.11.14.02.08;	author ajacoutot;	state Exp;
branches;
next	1.211;
commitid	qzb3VQ0jXnk8ks4Z;

1.211
date	2014.05.16.16.48.58;	author ajacoutot;	state Exp;
branches;
next	1.210;

1.210
date	2014.04.25.14.37.19;	author ajacoutot;	state Exp;
branches;
next	1.209;

1.209
date	2014.04.15.13.15.19;	author ajacoutot;	state Exp;
branches;
next	1.208;

1.208
date	2014.04.14.07.54.51;	author ajacoutot;	state Exp;
branches;
next	1.207;

1.207
date	2014.04.07.16.05.52;	author ajacoutot;	state Exp;
branches;
next	1.206;

1.206
date	2014.04.07.10.19.25;	author ajacoutot;	state Exp;
branches;
next	1.205;

1.205
date	2014.04.06.10.51.23;	author ajacoutot;	state Exp;
branches;
next	1.204;

1.204
date	2014.04.02.09.36.13;	author jasper;	state Exp;
branches;
next	1.203;

1.203
date	2014.04.01.18.06.31;	author jasper;	state Exp;
branches;
next	1.202;

1.202
date	2014.04.01.17.03.14;	author jasper;	state Exp;
branches;
next	1.201;

1.201
date	2014.04.01.15.31.46;	author jasper;	state Exp;
branches;
next	1.200;

1.200
date	2014.04.01.13.21.14;	author ajacoutot;	state Exp;
branches;
next	1.199;

1.199
date	2014.04.01.07.40.45;	author ajacoutot;	state Exp;
branches;
next	1.198;

1.198
date	2014.03.30.14.48.23;	author ajacoutot;	state Exp;
branches;
next	1.197;

1.197
date	2014.03.29.15.34.38;	author ajacoutot;	state Exp;
branches;
next	1.196;

1.196
date	2014.03.29.14.46.26;	author ajacoutot;	state Exp;
branches;
next	1.195;

1.195
date	2014.03.28.08.23.42;	author ajacoutot;	state Exp;
branches;
next	1.194;

1.194
date	2014.03.28.07.59.59;	author ajacoutot;	state Exp;
branches;
next	1.193;

1.193
date	2014.03.27.19.19.17;	author ajacoutot;	state Exp;
branches;
next	1.192;

1.192
date	2014.03.24.18.19.21;	author ajacoutot;	state Exp;
branches;
next	1.191;

1.191
date	2014.03.16.09.12.24;	author ajacoutot;	state Exp;
branches;
next	1.190;

1.190
date	2014.03.09.21.56.20;	author ajacoutot;	state Exp;
branches;
next	1.189;

1.189
date	2014.01.30.16.58.58;	author ajacoutot;	state Exp;
branches;
next	1.188;

1.188
date	2014.01.30.11.00.49;	author ajacoutot;	state Exp;
branches;
next	1.187;

1.187
date	2014.01.29.14.00.04;	author ajacoutot;	state Exp;
branches;
next	1.186;

1.186
date	2014.01.21.17.39.30;	author ajacoutot;	state Exp;
branches;
next	1.185;

1.185
date	2014.01.08.14.07.48;	author ajacoutot;	state Exp;
branches;
next	1.184;

1.184
date	2014.01.08.10.37.25;	author ajacoutot;	state Exp;
branches;
next	1.183;

1.183
date	2014.01.08.10.08.53;	author ajacoutot;	state Exp;
branches;
next	1.182;

1.182
date	2014.01.08.09.42.14;	author ajacoutot;	state Exp;
branches;
next	1.181;

1.181
date	2013.12.26.15.38.29;	author ajacoutot;	state Exp;
branches;
next	1.180;

1.180
date	2013.12.01.17.54.13;	author ajacoutot;	state Exp;
branches;
next	1.179;

1.179
date	2013.11.13.09.30.53;	author ajacoutot;	state Exp;
branches;
next	1.178;

1.178
date	2013.11.12.08.16.52;	author ajacoutot;	state Exp;
branches;
next	1.177;

1.177
date	2013.10.29.11.08.24;	author ajacoutot;	state Exp;
branches;
next	1.176;

1.176
date	2013.10.26.09.12.20;	author ajacoutot;	state Exp;
branches;
next	1.175;

1.175
date	2013.10.26.09.08.08;	author ajacoutot;	state Exp;
branches;
next	1.174;

1.174
date	2013.10.16.15.05.53;	author ajacoutot;	state Exp;
branches;
next	1.173;

1.173
date	2013.09.28.16.22.40;	author ajacoutot;	state Exp;
branches;
next	1.172;

1.172
date	2013.09.28.15.51.19;	author ajacoutot;	state Exp;
branches;
next	1.171;

1.171
date	2013.09.28.08.51.17;	author ajacoutot;	state Exp;
branches;
next	1.170;

1.170
date	2013.09.27.10.16.55;	author ajacoutot;	state Exp;
branches;
next	1.169;

1.169
date	2013.08.06.19.07.56;	author ajacoutot;	state Exp;
branches;
next	1.168;

1.168
date	2013.06.17.13.22.50;	author ajacoutot;	state Exp;
branches;
next	1.167;

1.167
date	2013.06.15.11.53.41;	author ajacoutot;	state Exp;
branches;
next	1.166;

1.166
date	2013.06.14.18.18.38;	author ajacoutot;	state Exp;
branches;
next	1.165;

1.165
date	2013.06.01.13.45.49;	author ajacoutot;	state Exp;
branches;
next	1.164;

1.164
date	2013.05.31.15.35.03;	author ajacoutot;	state Exp;
branches;
next	1.163;

1.163
date	2013.05.30.19.40.59;	author ajacoutot;	state Exp;
branches;
next	1.162;

1.162
date	2013.05.22.16.32.36;	author ajacoutot;	state Exp;
branches;
next	1.161;

1.161
date	2013.05.22.10.12.05;	author ajacoutot;	state Exp;
branches;
next	1.160;

1.160
date	2013.05.22.10.08.37;	author ajacoutot;	state Exp;
branches;
next	1.159;

1.159
date	2013.05.19.09.46.02;	author ajacoutot;	state Exp;
branches;
next	1.158;

1.158
date	2013.05.18.17.28.55;	author ajacoutot;	state Exp;
branches;
next	1.157;

1.157
date	2013.05.17.14.55.57;	author ajacoutot;	state Exp;
branches;
next	1.156;

1.156
date	2013.04.19.15.00.27;	author ajacoutot;	state Exp;
branches;
next	1.155;

1.155
date	2013.04.17.13.41.04;	author ajacoutot;	state Exp;
branches;
next	1.154;

1.154
date	2013.04.16.13.17.01;	author ajacoutot;	state Exp;
branches;
next	1.153;

1.153
date	2013.04.16.06.17.13;	author ajacoutot;	state Exp;
branches;
next	1.152;

1.152
date	2013.04.03.15.45.47;	author ajacoutot;	state Exp;
branches;
next	1.151;

1.151
date	2013.04.02.14.08.43;	author ajacoutot;	state Exp;
branches;
next	1.150;

1.150
date	2013.03.31.12.44.29;	author ajacoutot;	state Exp;
branches;
next	1.149;

1.149
date	2013.03.30.11.43.39;	author ajacoutot;	state Exp;
branches;
next	1.148;

1.148
date	2013.03.30.09.52.17;	author ajacoutot;	state Exp;
branches;
next	1.147;

1.147
date	2013.03.11.11.46.10;	author espie;	state Exp;
branches;
next	1.146;

1.146
date	2013.01.24.10.41.25;	author ajacoutot;	state Exp;
branches;
next	1.145;

1.145
date	2013.01.11.10.11.57;	author ajacoutot;	state Exp;
branches;
next	1.144;

1.144
date	2013.01.08.16.53.53;	author ajacoutot;	state Exp;
branches;
next	1.143;

1.143
date	2012.11.27.16.29.34;	author ajacoutot;	state Exp;
branches;
next	1.142;

1.142
date	2012.11.26.15.22.22;	author ajacoutot;	state Exp;
branches;
next	1.141;

1.141
date	2012.11.14.17.28.35;	author ajacoutot;	state Exp;
branches;
next	1.140;

1.140
date	2012.10.26.07.34.22;	author ajacoutot;	state Exp;
branches;
next	1.139;

1.139
date	2012.10.16.16.38.13;	author ajacoutot;	state Exp;
branches;
next	1.138;

1.138
date	2012.10.16.15.53.30;	author ajacoutot;	state Exp;
branches;
next	1.137;

1.137
date	2012.10.16.07.02.58;	author ajacoutot;	state Exp;
branches;
next	1.136;

1.136
date	2012.10.10.12.34.35;	author ajacoutot;	state Exp;
branches;
next	1.135;

1.135
date	2012.10.10.09.09.06;	author ajacoutot;	state Exp;
branches;
next	1.134;

1.134
date	2012.10.10.08.47.14;	author ajacoutot;	state Exp;
branches;
next	1.133;

1.133
date	2012.10.09.13.18.00;	author ajacoutot;	state Exp;
branches;
next	1.132;

1.132
date	2012.10.08.21.47.04;	author ajacoutot;	state Exp;
branches;
next	1.131;

1.131
date	2012.10.08.10.05.16;	author ajacoutot;	state Exp;
branches;
next	1.130;

1.130
date	2012.10.03.16.20.09;	author ajacoutot;	state Exp;
branches;
next	1.129;

1.129
date	2012.09.29.19.28.15;	author ajacoutot;	state Exp;
branches;
next	1.128;

1.128
date	2012.09.13.08.38.12;	author ajacoutot;	state Exp;
branches;
next	1.127;

1.127
date	2012.09.12.12.23.42;	author ajacoutot;	state Exp;
branches;
next	1.126;

1.126
date	2012.09.12.11.37.47;	author ajacoutot;	state Exp;
branches;
next	1.125;

1.125
date	2012.09.12.08.54.52;	author ajacoutot;	state Exp;
branches;
next	1.124;

1.124
date	2012.09.10.23.03.24;	author espie;	state Exp;
branches;
next	1.123;

1.123
date	2012.09.10.13.19.03;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2012.09.01.14.36.59;	author ajacoutot;	state Exp;
branches;
next	1.121;

1.121
date	2012.06.15.08.30.19;	author ajacoutot;	state Exp;
branches;
next	1.120;

1.120
date	2012.04.28.10.52.09;	author ajacoutot;	state Exp;
branches;
next	1.119;

1.119
date	2012.01.19.14.14.13;	author ajacoutot;	state Exp;
branches;
next	1.118;

1.118
date	2011.12.27.14.15.06;	author ajacoutot;	state Exp;
branches;
next	1.117;

1.117
date	2011.12.03.22.17.15;	author ajacoutot;	state Exp;
branches;
next	1.116;

1.116
date	2011.11.22.15.03.23;	author jasper;	state Exp;
branches;
next	1.115;

1.115
date	2011.10.29.08.25.17;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2011.10.20.07.23.28;	author ajacoutot;	state Exp;
branches;
next	1.113;

1.113
date	2011.10.19.14.25.46;	author ajacoutot;	state Exp;
branches;
next	1.112;

1.112
date	2011.10.19.08.13.04;	author ajacoutot;	state Exp;
branches;
next	1.111;

1.111
date	2011.10.16.19.23.34;	author ajacoutot;	state Exp;
branches;
next	1.110;

1.110
date	2011.10.07.14.04.18;	author ajacoutot;	state Exp;
branches;
next	1.109;

1.109
date	2011.09.28.09.47.46;	author jasper;	state Exp;
branches;
next	1.108;

1.108
date	2011.09.20.21.10.00;	author jasper;	state Exp;
branches;
next	1.107;

1.107
date	2011.09.20.20.52.46;	author jasper;	state Exp;
branches;
next	1.106;

1.106
date	2011.09.16.12.29.13;	author espie;	state Exp;
branches;
next	1.105;

1.105
date	2011.09.12.15.50.04;	author jasper;	state Exp;
branches;
next	1.104;

1.104
date	2011.09.12.12.04.16;	author jasper;	state Exp;
branches;
next	1.103;

1.103
date	2011.09.12.07.39.20;	author ajacoutot;	state Exp;
branches;
next	1.102;

1.102
date	2011.07.02.22.56.03;	author ajacoutot;	state Exp;
branches;
next	1.101;

1.101
date	2011.05.01.16.23.18;	author ajacoutot;	state Exp;
branches;
next	1.100;

1.100
date	2011.04.16.21.28.35;	author jasper;	state Exp;
branches;
next	1.99;

1.99
date	2011.03.09.18.51.49;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2011.01.05.16.05.54;	author ajacoutot;	state Exp;
branches;
next	1.97;

1.97
date	2010.12.27.14.50.24;	author ajacoutot;	state Exp;
branches;
next	1.96;

1.96
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2010.12.13.16.13.04;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2010.12.11.12.57.37;	author ajacoutot;	state Exp;
branches;
next	1.93;

1.93
date	2010.12.11.09.59.25;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2010.12.11.07.40.21;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2010.11.29.14.17.33;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2010.11.25.15.27.30;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2010.11.22.08.36.57;	author espie;	state Exp;
branches;
next	1.88;

1.88
date	2010.11.08.19.28.32;	author ajacoutot;	state Exp;
branches;
next	1.87;

1.87
date	2010.10.29.12.54.44;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2010.10.28.12.15.13;	author steven;	state Exp;
branches;
next	1.85;

1.85
date	2010.10.28.11.01.18;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2010.10.19.08.13.57;	author espie;	state Exp;
branches;
next	1.83;

1.83
date	2010.10.18.13.18.14;	author jasper;	state Exp;
branches;
next	1.82;

1.82
date	2010.10.18.12.24.34;	author jasper;	state Exp;
branches;
next	1.81;

1.81
date	2010.10.11.08.19.19;	author jasper;	state Exp;
branches;
next	1.80;

1.80
date	2010.09.28.12.24.29;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2010.09.22.05.21.36;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2010.08.21.19.08.17;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2010.07.25.08.15.32;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2010.07.13.20.37.03;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2010.07.07.16.37.05;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2010.06.12.14.57.50;	author steven;	state Exp;
branches;
next	1.73;

1.73
date	2010.06.04.07.45.56;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2010.04.25.08.48.31;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2010.04.24.16.50.20;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2010.04.17.05.41.02;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2010.04.11.16.39.05;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2009.12.21.18.03.18;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2009.10.14.08.20.19;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2009.10.13.23.22.45;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2009.08.11.08.39.38;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2009.07.12.20.32.02;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2009.06.15.16.09.14;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2009.06.10.20.47.42;	author kili;	state Exp;
branches;
next	1.61;

1.61
date	2009.05.22.08.46.22;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2009.04.27.08.09.27;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2009.04.16.08.11.13;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2009.04.06.10.05.21;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2009.03.26.17.15.46;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2009.03.23.22.25.28;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2009.03.23.18.39.48;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2009.03.19.08.26.42;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2009.03.14.11.36.25;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2009.03.14.10.40.53;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2009.02.15.16.05.13;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2009.02.11.15.47.50;	author jasper;	state Exp;
branches;
next	1.49;

1.49
date	2009.02.11.15.33.51;	author jasper;	state Exp;
branches;
next	1.48;

1.48
date	2009.02.04.18.50.02;	author ajacoutot;	state Exp;
branches;
next	1.47;

1.47
date	2009.02.02.15.00.14;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2009.01.31.12.09.49;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2009.01.28.16.39.01;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2009.01.13.18.08.20;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2009.01.01.12.01.19;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2008.12.31.17.10.53;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2008.12.20.22.37.25;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2008.12.19.08.37.37;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2008.12.18.19.38.26;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2008.12.18.12.06.09;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2008.12.17.18.45.36;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2008.12.12.12.59.28;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2008.11.25.18.27.39;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2008.11.24.09.10.11;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2008.11.21.17.43.02;	author jasper;	state Exp;
branches;
next	1.32;

1.32
date	2008.11.18.14.26.02;	author landry;	state Exp;
branches;
next	1.31;

1.31
date	2008.10.14.12.15.36;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2008.09.28.10.10.30;	author sturm;	state Exp;
branches;
next	1.29;

1.29
date	2008.06.02.17.58.23;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2008.05.26.16.29.27;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2008.05.09.10.51.44;	author bernd;	state Exp;
branches;
next	1.26;

1.26
date	2008.04.23.11.30.58;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2008.04.16.20.31.24;	author jasper;	state Exp;
branches;
next	1.24;

1.24
date	2008.02.05.14.09.47;	author landry;	state Exp;
branches;
next	1.23;

1.23
date	2008.02.04.17.55.18;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2007.12.15.18.04.04;	author martynas;	state Exp;
branches;
next	1.21;

1.21
date	2007.11.27.20.26.13;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2007.09.19.20.59.55;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2007.07.08.09.25.18;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2007.07.05.22.50.10;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2007.06.26.21.08.29;	author martynas;	state Exp;
branches;
next	1.16;

1.16
date	2007.05.18.17.20.39;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2006.12.16.12.22.35;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2006.09.18.12.19.40;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2006.06.13.13.36.44;	author bernd;	state Exp;
branches;
next	1.12;

1.12
date	2006.01.19.13.35.47;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2005.11.14.23.03.45;	author wilfried;	state Exp;
branches;
next	1.10;

1.10
date	2005.11.14.22.37.46;	author wilfried;	state Exp;
branches;
next	1.9;

1.9
date	2005.09.04.23.37.30;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2005.05.26.03.39.31;	author marcm;	state Exp;
branches;
next	1.7;

1.7
date	2004.12.15.13.57.56;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2004.12.10.20.36.43;	author marcm;	state Exp;
branches;
next	1.5;

1.5
date	2004.09.15.04.15.25;	author marcm;	state Exp;
branches;
next	1.4;

1.4
date	2004.06.24.23.58.34;	author marcm;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.30.13.36.51;	author marcm;	state Exp;
branches;
next	1.2;

1.2
date	2003.12.01.04.13.06;	author marcm;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.08.15.57.01;	author marcm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.10.08.15.57.01;	author marcm;	state Exp;
branches;
next	;

1.233.4.1
date	2015.11.17.17.48.04;	author ajacoutot;	state Exp;
branches;
next	;
commitid	ItfEwzpjPOBbTg3T;


desc
@@


1.256
log
@Re-add the gdm-autologin pam file.
Prodded by sthen@@; I never though autologin actually worked :-)
@
text
@# $OpenBSD: Makefile,v 1.255 2017/04/17 13:17:07 ajacoutot Exp $

COMMENT=		GNOME display manager

GNOME_PROJECT=		gdm
GNOME_VERSION=		3.24.1
REVISION=		0

DISTFILES=		${DISTNAME}${EXTRACT_SUFX} puflogh1000X248.gif:0
EXTRACT_ONLY=		${DISTNAME}${EXTRACT_SUFX}
MASTER_SITES0=		http://www.openbsd.org/art/puffy/

SHARED_LIBS +=  gdm                  0.0      # 1.0

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ICE SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB += Xfixes Xi Xinerama Xrandr Xrender accountsservice atk-1.0
WANTLIB += atk-bridge-2.0 atspi c cairo cairo-gobject canberra
WANTLIB += canberra-gtk3 dbus-1 epoxy expat ffi fontconfig freetype
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += graphite2 gthread-2.0 gtk-3 harfbuzz iconv intl ltdl
WANTLIB += m ogg pam pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
WANTLIB += pixman-1 png pthread pthread-stubs util vorbis vorbisfile
WANTLIB += xcb xcb-render xcb-shm z

MODULES=		x11/gnome \
			devel/dconf

BUILD_DEPENDS=		devel/check \
			devel/iso-codes

RUN_DEPENDS=		devel/iso-codes

# 'dconf compile'
BUILD_DEPENDS +=	devel/dconf

# cyclic dependency, see pkg/DESCR
# bring _all_ runtime dependencies (including consolekit2 and zenity)
#RUN_DEPENDS +=		x11/gnome/session

# cyclic dependency
# gnome-initial-setup is an opt-in handled in meta/gnome
#RUN_DEPENDS +=		x11/gnome/initial-setup

# caribou-autostart.desktop
RUN_DEPENDS +=		x11/gnome/caribou

# orca-autostart.desktop
RUN_DEPENDS +=		x11/gnome/orca

LIB_DEPENDS=		audio/libcanberra,-gtk3 \
			security/openpam \
			sysutils/accountsservice

MODGNOME_TOOLS += gobject-introspection gtk-update-icon-cache yelp
MODGNOME_CPPFLAGS=	-I${X11BASE}/include -DHAS_SA_LEN
MODGNOME_LDFLAGS=	-L${X11BASE}/lib

CONFIGURE_STYLE=	gnu

CONFIGURE_ARGS=		--mandir=${PREFIX}/man \
			--disable-systemd-journal \
			--without-systemd \
			--without-plymouth \
			--with-lang-file=${SYSCONFDIR}/gdm/locale.conf \
			--with-at-spi-registryd-directory=${LOCALBASE}/libexec \
			--with-custom-conf=${SYSCONFDIR}/gdm/custom.conf \
			--with-console-kit \
			--with-dbus-sys=${SYSCONFDIR}/dbus-1/system.d \
			--with-log-dir=/var/log/gdm \
			--with-working-directory=/var/db/gdm \
			--with-sysconfsubdir=gdm \
			--with-pid-file=/var/run/gdm.pid \
			--with-dmconfdir="${LOCALBASE}/share/xsessions" \
			--with-screenshot-dir=/var/run/gdm/greeter \
			--with-user=_gdm \
			--with-group=_gdm \
			--with-xauth-dir=/var/run/gdm \
			--with-initial-vt=05

AUTOCONF_VERSION=	2.69
AUTOMAKE_VERSION=	1.15
BUILD_DEPENDS +=	${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS} \
			devel/libtool

pre-configure:
	sed -i -e 's,root:root,root:wheel,g' \
		-e 's,root:gdm,root:676,g' \
		-e 's,gdm:gdm,676:676,g' ${WRKSRC}/data/Makefile.am
	sed -i -e 's,/usr/local,${LOCALBASE},g' \
		-e 's,/bin/bash,/bin/ksh,g' \
		${WRKSRC}/daemon/gdm-session-worker.c
	cd ${WRKSRC} && \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		autoreconf -i

post-install:
	${INSTALL_DATA} ${DISTDIR}/${DIST_SUBDIR}/puflogh1000X248.gif \
		${PREFIX}/share/pixmaps/
	rm -rf ${WRKINST}/var/run/gdm
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm/{etc/pam.d,var/db}
	${INSTALL_DATA} ${FILESDIR}/gdm-* \
		${PREFIX}/share/examples/gdm/etc/pam.d
	${SUBST_CMD} -m 0644 -c -o ${SHAREOWN} -g ${SHAREGRP} \
		${FILESDIR}/10_org.gnome.login-screen.gschema.override \
		${PREFIX}/share/glib-2.0/schemas/10_org.gnome.login-screen.gschema.override
	mv ${WRKINST}/etc/gdm ${PREFIX}/share/examples/gdm/etc
	mv ${WRKINST}/etc/dbus-1 ${PREFIX}/share/examples/gdm/etc
	mv ${WRKINST}/var/db/gdm ${PREFIX}/share/examples/gdm/var/db
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm/var/db/gdm/.pulse
	${INSTALL_DATA} ${FILESDIR}/client.conf \
		${PREFIX}/share/examples/gdm/var/db/gdm/.pulse
	${INSTALL_DATA} ${FILESDIR}/locale.conf \
		${PREFIX}/share/examples/gdm/etc/gdm/locale.conf
	${SUBST_CMD} -m 0555 -c -o ${BINOWN} -g ${BINGRP} \
		${FILESDIR}/Xsession \
		${PREFIX}/share/examples/gdm/etc/gdm/Xsession

.include <bsd.port.mk>
@


1.255
log
@Update to gdm-3.24.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.254 2017/04/16 12:43:20 ajacoutot Exp $
d7 1
@


1.254
log
@xdm -> xenodm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.253 2017/04/13 07:38:44 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		3.22.3
REVISION=		0
@


1.253
log
@Stop setting CONFIGURE_STYLE in Makefile.inc but explicitely add it to ports
that need it; in the future more and more ports will move to meson build anyway.
I first though I'd set CONFIGURE_STYLE in gnome.port.mk but it's too fragile
(MODULES list must be sorted very carefully).
Less magic is good.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.252 2017/04/09 14:37:44 ajacoutot Exp $
d7 1
@


1.252
log
@CONFIGURE_STYLE=gnu is the default around here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.251 2017/03/11 00:22:27 ajacoutot Exp $
d59 2
@


1.251
log
@Update to gdm-3.22.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2017/03/03 13:01:26 ajacoutot Exp $
a58 2

CONFIGURE_STYLE=	gnu
@


1.250
log
@Update to gdm-3.22.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2016/10/31 16:15:46 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.2
@


1.249
log
@Update to gdm-3.22.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2016/04/26 08:59:48 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		3.22.1
@


1.248
log
@Sync PAM files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2016/04/26 08:25:04 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		3.20.1
REVISION=		0
@


1.247
log
@Update to gdm-3.20.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2016/04/15 14:11:09 ajacoutot Exp $
d7 1
@


1.246
log
@Update to gdm-3.18.3.
Drop the gettext module while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.245 2016/03/18 23:12:20 naddy Exp $
d6 1
a6 1
GNOME_VERSION=		3.18.3
@


1.245
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2016/01/23 13:55:30 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		3.18.2
REVISION=		4
d22 4
a25 4
WANTLIB += graphite2 gthread-2.0 gtk-3 harfbuzz ltdl m ogg pam
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs util vorbis vorbisfile xcb
WANTLIB += xcb-render xcb-shm z
d27 1
a27 2
MODULES=		devel/gettext \
			x11/gnome \
@


1.244
log
@Provide our own Xsession to run base system ssh-agent.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.243 2015/12/21 10:17:32 ajacoutot Exp $

SHARED_ONLY=		Yes
@


1.243
log
@Override _rc_wait(); these scripts are a bit hackish because they need
/usr/libexec/getty to be started but it is started later in the boot
process.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2015/12/21 09:32:01 ajacoutot Exp $
d9 1
a9 1
REVISION=		3
a67 1
			--enable-gdm-xsession \
d122 3
a124 1
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/examples/gdm/*
@


1.242
log
@Revert, this breaks rc_stop() for these daemons.
I'm working on a better fix.

spotted by dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2015/12/20 09:38:14 ajacoutot Exp $
d9 1
a9 1
REVISION=		2
@


1.241
log
@Move pexp where it belongs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2015/12/19 14:13:45 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.240
log
@Cope with new rc.subr behavior so that we don't end hanging in _rc_wait
start.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2015/11/17 17:48:40 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.239
log
@SECURITY update to gdm-3.18.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2015/10/18 13:25:54 ajacoutot Exp $
d9 1
@


1.238
log
@Update to gdm-3.18.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.237 2015/09/18 20:30:07 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.18.0
@


1.237
log
@Updatet o gdm-3.16.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.236 2015/09/18 13:38:45 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.16.4
d63 1
a63 2
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.69
d65 3
a67 1
CONFIGURE_ARGS=		--disable-systemd-journal \
a68 1
			--mandir=${PREFIX}/man \
d86 6
d95 1
a95 1
		-e 's,gdm:gdm,676:676,g' ${WRKSRC}/data/Makefile.in
d99 4
@


1.236
log
@Update to gdm-3.16.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2015/08/27 06:48:30 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.16.3
@


1.235
log
@Fix DBus @@sample files after recent dbus port update.
The dbus package does not install /etc/dbus-1/system.d/ anymore, so it
needs to be properly @@sample'd.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2015/08/15 11:46:16 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.2
REVISION=		1
@


1.234
log
@Tweak comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2015/07/18 22:29:56 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.233
log
@Move to sed -i.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2015/07/16 01:51:25 ajacoutot Exp $
d43 1
a43 1
# bring _all_ runtime dependencies (including consolekit and zenity)
@


1.233.4.1
log
@SECURITY fix for CVE-2015-7496 - lock screen bypass when holding escape key
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2015/07/18 22:29:56 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.232
log
@Tweak pkill invocation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2015/07/02 14:29:52 ajacoutot Exp $
d88 2
a89 2
	perl -pi -e 's,root:root,root:wheel,g;' \
		-e 's,root:gdm,root:676,g;' \
d91 1
a91 1
	perl -pi -e 's,/usr/local,${LOCALBASE},g;' \
@


1.231
log
@Update to gdm-3.16.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2015/06/11 11:56:15 ajacoutot Exp $
d9 1
@


1.230
log
@Start ${daemon} in the background to prevent '/etc/rc.d/gdm start' from
never ending.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2015/05/08 09:08:44 espie Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.1.1
REVISION=		0
@


1.229
log
@don't depend on modes in the ports tree being what we want installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2015/04/16 14:55:22 ajacoutot Exp $
d9 1
@


1.228
log
@Update to gdm-3.16.1.1.
- Fix double free introduced in 3.16.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2015/04/15 14:47:00 ajacoutot Exp $
d101 1
a101 1
	${SUBST_CMD} -c -o ${SHAREOWN} -g ${SHAREGRP} \
@


1.227
log
@Enhance fade in look.
req. by stsp@@ during p2k15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2015/04/15 09:40:53 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.1
REVISION=		1
@


1.226
log
@Bump after libepoxy moved from ports to xenocara.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2015/04/15 07:25:46 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.225
log
@Update to gdm-3.16.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2015/04/10 20:43:51 ajacoutot Exp $
d9 1
@


1.224
log
@Ensure X11 display device is propagated to launch environment so that
ConsoleKit works (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2015/04/04 17:38:17 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.16.0.1
REVISION=		1
@


1.223
log
@Drop redundant.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2015/04/04 09:21:06 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.222
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2015/04/03 18:39:06 ajacoutot Exp $
a83 1
			--with-console-kit \
@


1.221
log
@Update to gdm-3.16.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2015/03/30 16:12:02 ajacoutot Exp $
d9 1
@


1.220
log
@Update to gdm-3.14.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2015/03/30 12:29:09 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.14.2
d69 1
d73 1
@


1.219
log
@Let there be art.

jasper@@ loves it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2015/03/27 08:16:16 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.14.1
REVISION=		3
@


1.218
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2015/03/15 08:31:49 ajacoutot Exp $
d9 5
a13 1
REVISION=		2
d23 1
a23 1
WANTLIB += canberra-gtk3 dbus-1 expat ffi fontconfig freetype
d95 2
d101 3
a103 2
	${INSTALL_DATA} ${FILESDIR}/10_org.gnome.login-screen.gschema.override \
		${PREFIX}/share/glib-2.0/schemas
@


1.217
log
@launch-environment: Propagate XCURSOR_PATH and XDG_CONFIG_DIRS (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2014/11/01 15:27:52 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.216
log
@When I tell you to stop, you stop!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2014/10/14 12:57:15 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.215
log
@Update to gdm-3.14.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2014/10/06 08:31:27 ajacoutot Exp $
d9 1
@


1.214
log
@Update to gdm-3.14.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2014/09/04 05:31:34 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.14.0
@


1.213
log
@Fix @@extra files list.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2014/08/11 14:02:08 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.12.2
REVISION=		1
@


1.212
log
@Drop XXX, we are past 5.6 now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2014/05/16 16:48:58 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.211
log
@Update to gdm-3.12.2.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.210 2014/04/25 14:37:19 ajacoutot Exp $

# XXX remove from PLIST when OPENBSD_5_6 is branched:
# @@unexec rm -f ${SYSCONFDIR}/dconf/db/gdm
d9 1
@


1.210
log
@Since we are missing an XDG_RUNTIME_DIR implementation, make sure we clean
the locked files in the .cache/gnome-shell/ directory so that we are not
left in 'locked' mode (i.e. black screen).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2014/04/15 13:15:19 ajacoutot Exp $
d11 1
a11 2
GNOME_VERSION=		3.12.1
REVISION=		0
@


1.209
log
@Update to gdm-3.12.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2014/04/14 07:54:51 ajacoutot Exp $
d12 1
@


1.208
log
@Extend rc_stop() to kill all gdm initiated processes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2014/04/07 16:05:52 ajacoutot Exp $
d11 1
a11 2
GNOME_VERSION=		3.12.0
REVISION=		9
@


1.207
log
@Revert previous and merge patch from upstream now that it's been fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2014/04/07 10:19:25 ajacoutot Exp $
d12 1
a12 1
REVISION=		8
@


1.206
log
@gnome-initial-setup -> _gnome-initial-setup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2014/04/06 10:51:23 ajacoutot Exp $
d12 1
a12 1
REVISION=		7
@


1.205
log
@Finally unbreak GDM runtime -- it is fully working now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2014/04/02 09:36:13 jasper Exp $
d12 1
a12 1
REVISION=		6
@


1.204
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2014/04/01 18:06:31 jasper Exp $
d12 1
a12 1
REVISION=		5
@


1.203
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2014/04/01 17:03:14 jasper Exp $
d59 1
a59 1
MODGNOME_TOOLS += gobject-introspection yelp  gtk-update-icon-cache
@


1.202
log
@move more bits and bobs into MODGNOME_TOOLS to make it more clear which
tools are actually used.

This commit replaces
MODGNOME_DESKTOP_FILE with MODGNOME_TOOLS += desktop-file-utils
MODGNOME_MIME_FILE with MODGNOME_TOOLS += shared-mime-info
MODGNOME_ICON_CACHE with MODGNOME_TOOLS += gtk-update-icon-cache

(some prettyfication will follow shortly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2014/04/01 15:31:46 jasper Exp $
d59 1
a59 2
MODGNOME_TOOLS= 	gobject-introspection yelp
MODGNOME_TOOLS +=	gtk-update-icon-cache
@


1.201
log
@start to make MODGNOME_TOOLS resemble the name of the tools actually used.
rename 'gi' to 'gobject-introspection'.

discussed with aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2014/04/01 13:21:14 ajacoutot Exp $
d60 1
a60 1
MODGNOME_ICON_CACHE=	Yes
@


1.200
log
@In x11/gnome ports we use disable-static inconsistently, usually to get
rid of static module archives; but since we end up manually removing the
libtool la files anyway, just don't bother setting up the tag.
part 1/2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2014/04/01 07:40:45 ajacoutot Exp $
d59 1
a59 1
MODGNOME_TOOLS= 	gi yelp
@


1.199
log
@Explicitely disable udev, gudev, systemd and systemd-journal so we know
where they are used.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2014/03/30 14:48:23 ajacoutot Exp $
d12 1
a12 1
REVISION=		4
a58 2
LIBTOOL_FLAGS=		--tag=disable-static

d67 1
a67 2
CONFIGURE_ARGS=		--disable-static \
			--disable-systemd-journal \
@


1.198
log
@Re-apply the -noreset X switch from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2014/03/29 15:34:38 ajacoutot Exp $
d70 2
@


1.197
log
@Make sure we remove /etc/dconf/db/gdm since dconf handling had changed in
gdm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2014/03/29 14:46:26 ajacoutot Exp $
d12 1
a12 1
REVISION=		3
@


1.196
log
@Tweak patch; still fucked though.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2014/03/28 08:23:42 ajacoutot Exp $
d3 2
a4 1
# XXX configuring GDM from gnome-cc does not work
d12 1
a12 1
REVISION=		2
@


1.195
log
@Properly cleanup /var/db/gdm/.pulse/ when using 'pkg_delete -c'.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2014/03/28 07:59:59 ajacoutot Exp $
d11 1
a11 1
REVISION=		1
@


1.194
log
@Missing build+run dependency on devel/iso-codes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2014/03/27 19:19:17 ajacoutot Exp $
d11 1
a11 1
REVISION=		0
@


1.193
log
@Update to gdm-3.12.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2014/03/24 18:19:21 ajacoutot Exp $
d11 1
d32 4
a35 1
BUILD_DEPENDS=		devel/check
@


1.192
log
@Drop now unneeded CONFIGURE_ARGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2014/03/16 09:12:24 ajacoutot Exp $
d10 1
a10 2
GNOME_VERSION=		3.10.0.1
REVISION=		15
d33 3
d40 1
d44 3
a98 1
	mv ${WRKINST}/etc/dconf ${PREFIX}/share/examples/gdm/etc
@


1.191
log
@Bump after recent gnome.port.mk changes; these do not require to
RUN_DEPENDS on yelp.

Note that this change will drop a big pile of dependencies from the pkg
and it is possible that some dependencies will be missing from the
dependency chain; if that is the case, it means that the pkg dependencies
were wrong in the first place and would have required fixing anyway.

Any fallout, please let me know.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2014/03/09 21:56:20 ajacoutot Exp $
d74 1
a74 2
			--with-initial-vt=05 \
			--without-tcp-wrappers
@


1.190
log
@Patches committed upstream.
Make gdm_login() / gdm_logout() static.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2014/01/30 16:58:58 ajacoutot Exp $
d11 1
a11 1
REVISION=		14
@


1.189
log
@Sync rc_start() between these 3 daemons since they do the same.
Keeping the sleep 2 in kdm.rc -- not sure why this is needed, zhuk@@ probably
knows.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2014/01/30 11:00:49 ajacoutot Exp $
d11 1
a11 1
REVISION=		13
@


1.188
log
@authdir was dropped 5 months ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2014/01/29 14:00:04 ajacoutot Exp $
d11 1
a11 1
REVISION=		12
@


1.187
log
@Only loop for getty during boot, not when the system is already running.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2014/01/21 17:39:30 ajacoutot Exp $
d11 1
a11 1
REVISION=		11
@


1.186
log
@Fix utmp usage, login(3) cannot work without a tty.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2014/01/08 14:07:48 ajacoutot Exp $
d11 1
a11 1
REVISION=		10
@


1.185
log
@LC_CTYPE is needed by the time/date applet.
Do not start an ssh-agent(1) if we are running gnome-session since gnome
keyring already provides SSH agent functionnality.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2014/01/08 10:37:25 ajacoutot Exp $
d11 1
a11 1
REVISION=		9
d54 3
@


1.184
log
@Tweaks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2014/01/08 10:08:53 ajacoutot Exp $
d11 1
a11 1
REVISION=		8
@


1.183
log
@setlocale(3) does not handle LANG so use LC_MESSAGES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2014/01/08 09:42:14 ajacoutot Exp $
d11 1
a11 1
REVISION=		7
@


1.182
log
@i18n -> locale.conf to match upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2013/12/26 15:38:29 ajacoutot Exp $
d11 1
a11 1
REVISION=		6
@


1.181
log
@Do the proper chown(1) $USER, root or _gdm dance according to the situation.

prodded by kettenis@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2013/12/01 17:54:13 ajacoutot Exp $
d11 1
a11 1
REVISION=		5
d57 1
a57 1
			--with-lang-file=${SYSCONFDIR}/gdm/i18n \
d96 2
a97 2
	${INSTALL_DATA} ${FILESDIR}/i18n \
		${PREFIX}/share/examples/gdm/etc/gdm/i18n
@


1.180
log
@rc_pre() not needed anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2013/11/13 09:30:53 ajacoutot Exp $
d11 1
a11 1
REVISION=		4
@


1.179
log
@No need for expr (rpe@@).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2013/11/12 08:16:52 ajacoutot Exp $
d11 1
a11 1
REVISION=		3
@


1.178
log
@Use g_credentials_get_unix_pid() instead of home baked function (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2013/10/29 11:08:24 ajacoutot Exp $
d11 1
a11 1
REVISION=		2
@


1.177
log
@Do not blindly sleep but instead wait to ttys initialization before
starting.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2013/10/26 09:12:20 ajacoutot Exp $
d11 1
a11 1
REVISION=		1
@


1.176
log
@Add comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2013/10/26 09:08:08 ajacoutot Exp $
d11 1
a11 1
REVISION=		0
@


1.175
log
@Fix the gnome-initial-setup username; noticed by rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2013/10/16 15:05:53 ajacoutot Exp $
d37 3
@


1.174
log
@Update to gdm-3.10.0.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2013/09/28 16:22:40 ajacoutot Exp $
d11 1
@


1.173
log
@Make starting less of a hack.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2013/09/28 15:51:19 ajacoutot Exp $
d10 1
a10 2
GNOME_VERSION=		3.10.0
REVISION=		2
@


1.172
log
@Make stop/restart work.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2013/09/28 08:51:17 ajacoutot Exp $
d11 1
a11 1
REVISION=		1
@


1.171
log
@Remove hardcoded HOMEPAGE and use the one from the x11/gnome MODULE
instead. It is just too hard to maintain a coherent list of still
reachable homepages for GNOME projects so use wiki.gnome.org which is
the entry point for *all* GNOME apps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2013/09/27 10:16:55 ajacoutot Exp $
d11 1
a11 1
REVISION=		0
@


1.170
log
@Update to gdm-3.10.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2013/08/06 19:07:56 ajacoutot Exp $
d11 1
a13 2

HOMEPAGE=		http://projects.gnome.org/gdm/
@


1.169
log
@Update to gdm 3.8.4.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.168 2013/06/17 13:22:50 ajacoutot Exp $
d10 3
a12 1
GNOME_VERSION=		3.8.4
a15 3
SHARED_LIBS +=  gdm                       0.0 # 1.0
SHARED_LIBS +=  gdmsimplegreeter          0.0 # 1.0

d22 6
a27 7
WANTLIB += canberra-gtk3 dbus-1 dbus-glib-1 expat ffi fontconfig
WANTLIB += freetype gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 graphite2 gthread-2.0 gtk-3 harfbuzz ltdl
WANTLIB += m nspr4 nss3 nssutil3 ogg pam pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 plc4 plds4 png pthread pthread-stubs
WANTLIB += smime3 softokn3 sqlite3 ssl3 upower-glib util vorbis
WANTLIB += vorbisfile xcb xcb-render xcb-shm z
a42 1
			security/nss \
d44 1
a44 2
			sysutils/accountsservice \
			sysutils/upower
a80 1
	rm ${PREFIX}/lib/gdm/simple-greeter/extensions/*.la
@


1.168
log
@Update to gdm-3.8.3.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2013/06/15 11:53:41 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.8.3.1
@


1.167
log
@NSS and UPower are not needed anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2013/06/14 18:18:38 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.8.3
REVISION=		0
d13 1
d21 7
a27 6
WANTLIB += canberra-gtk3 dbus-1 expat ffi fontconfig freetype
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += graphite2 gthread-2.0 gtk-3 harfbuzz ltdl m ogg pam
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs util vorbis vorbisfile xcb
WANTLIB += xcb-render xcb-shm z
d43 1
d45 2
a46 1
			sysutils/accountsservice
a54 3
AUTOCONF_VERSION=	2.69
CONFIGURE_STYLE=	autoconf

d83 1
@


1.166
log
@Update to gdm-3.8.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2013/06/01 13:45:49 ajacoutot Exp $
d9 1
a33 3
# XXX configure checks for it, but unused
BUILD_DEPENDS +=	security/nss

d51 3
@


1.165
log
@Drop comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2013/05/31 15:35:03 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.8.1.1
REVISION=		6
a12 1
SHARED_LIBS +=  gdmsimplegreeter          0.0 # 1.0
d20 6
a25 8
WANTLIB += canberra-gtk3 dbus-1 dbus-glib-1 expat ffi fontconfig
WANTLIB += freetype gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 graphite2 gthread-2.0 gtk-3 harfbuzz
WANTLIB += ltdl m nspr4 nss3 nssutil3 ogg pam pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 plc4 plds4
WANTLIB += png pthread pthread-stubs smime3 softokn3 sqlite3 ssl3
WANTLIB += upower-glib util vorbis vorbisfile xcb xcb-render xcb-shm
WANTLIB += z
d33 3
a43 1
			security/nss \
d45 1
a45 2
			sysutils/accountsservice \
			sysutils/upower
d77 2
a78 1
	perl -pi -e 's,/usr/local,${LOCALBASE},g' \
a81 1
	rm ${PREFIX}/lib/gdm/simple-greeter/extensions/*.la
@


1.164
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2013/05/30 19:40:59 ajacoutot Exp $
a94 1
	# see patch-src_daemon_main_c in audio/pulseaudio
@


1.163
log
@Something in our thread system makes pulseaudio dead-lock; disable pulse
completely on GDM so that it is properly started when a user logs in.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2013/05/22 16:32:36 ajacoutot Exp $
d9 1
a9 1
REVISION=		5
d24 2
a25 2
WANTLIB += gobject-2.0 graphite2 gthread-2.0 gtk-3 harfbuzz icudata
WANTLIB += icule icuuc ltdl m nspr4 nss3 nssutil3 ogg pam pango-1.0
@


1.162
log
@Remove pulse config; upcoming change to pulseaudio will make it irrelevant.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2013/05/22 10:12:05 ajacoutot Exp $
d9 1
a9 1
REVISION=		4
d95 4
@


1.161
log
@Tweak comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2013/05/22 10:08:37 ajacoutot Exp $
d9 1
a9 1
REVISION=		3
a94 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm/var/db/gdm/.pulse
	${INSTALL_DATA} ${FILESDIR}/default.pa \
		${PREFIX}/share/examples/gdm/var/db/gdm/.pulse
@


1.160
log
@Add pulseaudio configuration for the _gdm user; this allows pulseaudio to
properly die when a user login and start its own.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2013/05/19 09:46:02 ajacoutot Exp $
d38 1
a38 1
# bring _all_ runtime dependencies (including sysutils/consolekit and zenity)
@


1.159
log
@Fix and simplify substitutions.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2013/05/18 17:28:55 ajacoutot Exp $
d9 1
a9 1
REVISION=		2
d95 3
@


1.158
log
@Add devel/check to BUILD_DEPENDS since it gets picked up for tests.
Remove uneeded patches and chunks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2013/05/17 14:55:57 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
a76 2
	${SUBST_CMD} ${WRKSRC}/Makefile.in \
		${WRKSRC}/data/{Init.in,PreSession.in,Xsession.in,gdm.schemas}
a81 8
	perl -pi -e 's,/bin/true,/usr/bin/true,g' \
		${WRKSRC}/data/applications/mime-dummy-handler.desktop \
		${WRKSRC}/configure \
		${WRKSRC}/data/00-upstream-settings
.for i in gdm-simple-greeter gnome-session-check-accelerated gnome-settings-daemon
	perl -pi -e 's,/usr/libexec,${PREFIX},g' \
		${WRKSRC}/data/applications/gdm-simple-greeter.desktop.in
.endfor
@


1.157
log
@Fix a crash on logout (from upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2013/04/19 15:00:27 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
d34 2
@


1.156
log
@Remove unused configure switch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2013/04/17 13:41:04 ajacoutot Exp $
d9 1
@


1.155
log
@Update to gdm-3.8.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2013/04/16 13:17:01 ajacoutot Exp $
a65 1
			--with-incomplete-locales \
@


1.154
log
@goi -> gi (gnome MODULE change).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2013/04/16 06:17:13 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.8.1
@


1.153
log
@Update to gdm-3.8.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2013/04/03 15:45:47 ajacoutot Exp $
d49 1
a49 1
MODGNOME_TOOLS= 	goi yelp
@


1.152
log
@Make the rc script a little bit less horrible.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2013/04/02 14:08:43 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.8.0
REVISION=		3
@


1.151
log
@Switch the icon-theme-symbolic dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2013/03/31 12:44:29 ajacoutot Exp $
d9 1
a9 1
REVISION=		2
@


1.150
log
@Put the rcscript at the end of the PLIST; otherwise the @@exec fails because
of @@cwd change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2013/03/30 11:43:39 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
a37 3

# power icon
RUN_DEPENDS +=		x11/gnome/icon-theme-symbolic
@


1.149
log
@Forgot to add this patch in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2013/03/30 09:52:17 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.148
log
@Update to gdm-3.8.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2013/03/11 11:46:10 espie Exp $
d9 1
@


1.147
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2013/01/24 10:41:25 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.6.2
REVISION=		4
d18 4
a21 4
WANTLIB += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xxf86vm accountsservice
WANTLIB += atk-1.0 c cairo cairo-gobject canberra canberra-gtk3
WANTLIB += dbus-1 dbus-glib-1 drm execinfo expat ffi fontconfig
d23 6
a28 6
WANTLIB += gobject-2.0 gthread-2.0 gtk-3 ltdl m nspr4 nss3 nssutil3
WANTLIB += ogg pam pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
WANTLIB += pixman-1 plc4 plds4 png pthread pthread-stubs smime3
WANTLIB += softokn3 sqlite3 ssl3 stdc++ upower-glib util vorbis
WANTLIB += vorbisfile xcb xcb-render xcb-shm z icuuc
WANTLIB += ICE SM atk-bridge-2.0 atspi harfbuzz icudata icule
a44 1
			devel/libexecinfo \
d75 1
a75 3
			--without-systemd \
			--without-tcp-wrappers \
			--disable-console-helper
@


1.146
log
@Explicitely depend on x11/gnome/icon-theme-symbolic for the power button.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2013/01/11 10:11:57 ajacoutot Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.145
log
@Properly rename the gschema.override file and remove a bogus entry from it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2013/01/08 16:53:53 ajacoutot Exp $
d9 1
a9 1
REVISION=		3
d41 3
@


1.144
log
@All pulseaudio files are under ~/.config/pulse now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2012/11/27 16:29:34 ajacoutot Exp $
d9 1
a9 1
REVISION=		2
d104 1
a104 1
	${INSTALL_DATA} ${FILESDIR}/org.gnome.login-screen.gschema.override \
@


1.143
log
@Don't use setuid() but setusercontext() with LOGIN_SETALL to setup the
complete user environment and limits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2012/11/26 15:22:22 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.142
log
@Fix PATH.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2012/11/14 17:28:35 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.141
log
@Update to gdm-3.6.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2012/10/26 07:34:22 ajacoutot Exp $
d9 1
@


1.140
log
@Missing @@exec-delete.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2012/10/16 16:38:13 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.6.1
REVISION=		2
@


1.139
log
@Add an rc_post to fix rc_stop and rc_restart.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2012/10/16 15:53:30 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.138
log
@Create DBus sockets with proper permissions so that the greeter can access
them (from upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2012/10/16 07:02:58 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
@


1.137
log
@Bugfix update to gdm-3.6.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2012/10/10 12:34:35 ajacoutot Exp $
d9 1
@


1.136
log
@Remove some uneeded | old patches.
Add a schemas override.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2012/10/10 08:47:14 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.6.0
REVISION=		1
@


1.135
log
@Fix cyclic dep.
@
text
@d9 1
a9 1
REVISION=		0
d104 2
@


1.134
log
@Remove BROKEN. Note that this is not fully functionnal yet because our
socket code fails with dbus now; but we need the introspection libs, so
enable it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2012/10/09 13:18:00 ajacoutot Exp $
d9 1
d38 1
d40 1
a40 1
RUN_DEPENDS +=		x11/gnome/session
@


1.133
log
@Bring it yet more fixes...
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.132 2012/10/08 21:47:04 ajacoutot Exp $

BROKEN=			needs pam(3)
d38 4
a41 1
RUN_DEPENDS=		x11/gnome/session
d46 1
a48 2
# XXX 
#LIB_DEPENDS +=		security/openpam
@


1.132
log
@Several fixes toward a working configuration.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2012/10/08 10:05:16 ajacoutot Exp $
d74 1
@


1.131
log
@We need the introspection libs for gnome-shell.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2012/10/03 16:20:09 ajacoutot Exp $
d89 1
a89 2
		${WRKSRC}/data/00-upstream-settings \
		${WRKSRC}/data/session-setup.entries
@


1.130
log
@Extend comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2012/09/29 19:28:15 ajacoutot Exp $
d52 1
a52 1
MODGNOME_TOOLS= 	yelp
@


1.129
log
@Update to gdm-3.6.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2012/09/13 08:38:12 ajacoutot Exp $
d39 1
a39 1
# bring _all_ runtime dependencies (including sysutils/consolekit)
@


1.128
log
@Start GDM is a better way so that it doesn't leave hanging processes.
Default LANG to "C".
Remove one XXX.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2012/09/12 12:23:42 ajacoutot Exp $
d10 1
a10 1
GNOME_VERSION=		3.4.1
d14 1
a14 1
SHARED_LIBS +=  gdmgreeter                0.0 # 1.0
d32 2
a33 1
WANTLIB += vorbisfile xcb xcb-render xcb-shm xkbfile xklavier xml2 z
d46 1
a46 2
			sysutils/upower \
			x11/gnome/libxklavier 
a97 1
	rm -r ${WRKINST}/etc/pam.d
@


1.127
log
@Remove uneeded substitution and regen PLIST.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.126 2012/09/12 11:37:47 ajacoutot Exp $

# XXX --with-lang-file=${SYSCONFDIR}/sysconfig/i18n
d59 1
d107 2
@


1.126
log
@gdm is now fully functionnal with pam.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2012/09/12 08:54:52 ajacoutot Exp $
d80 1
a80 1
	${SUBST_CMD} ${WRKSRC}/Makefile.in ${WRKSRC}/data/Makefile.in \
@


1.125
log
@Bring GDM in a working state (still broken because it requires PAM for
now).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2012/09/10 23:03:24 espie Exp $
d5 1
a5 1
BROKEN=			needs PAM(7)
d34 1
a34 2
WANTLIB += vorbisfile wrap xcb xcb-render xcb-shm xkbfile xklavier
WANTLIB += xml2 z
d50 1
a50 1
#LIB_DEPENDS +=		security/openpam 
a78 3
# XXX IPv6-only FLAVOR?
CONFIGURE_ARGS +=	--disable-ipv6

d99 1
a99 1
	rm -r ${WRKINST}/etc/pam.d/gdm-{fingerprint,smartcard}
d101 3
a103 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm/{etc,var/db}
a106 1
	mv ${WRKINST}/etc/pam.d ${PREFIX}/share/examples/gdm/etc
@


1.124
log
@fix sqlports

do not commit linked parts of the tree that reference stuff that's not
there !
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.123 2012/09/10 13:19:03 ajacoutot Exp $
d37 3
a39 1
BUILD_DEPENDS=		x11/gnome/zenity
d41 2
a42 5
#XXX
#RUN_DEPENDS=		audio/sox \
#			x11/hicolor-icon-theme \
#			x11/gnome/zenity \
#			sysutils/consolekit
d51 1
a51 1
#			security/pam 
d53 1
a53 3
MODULES=		devel/gettext \
			x11/gnome \
			devel/dconf
a56 1

d60 2
a61 1
CONFIGURE_ARGS=		--mandir=${PREFIX}/man \
d63 1
a63 1
			--with-custom-conf=${SYSCONFDIR}/X11/gdm/custom.conf \
d67 1
a67 2
			--with-xevie=no \
			--with-sysconfsubdir=X11/gdm \
a73 4
			--with-tcp-wrappers \
			--with-x \
			--with-xinerama \
			--with-xdmcp \
a75 1
			--with-screenshot-dir=/var/run/gdm/greeter \
d77 1
a77 1
			--enable-authentication-scheme=crypt \
a79 3
# --with-lang-file=${SYSCONFDIR}/sysconfig/i18n
# XXX --enable-authentication-scheme=bsdauth

d81 1
a81 1
CONFIGURE_ARGS+=	--disable-ipv6
d84 1
a84 1
	${SUBST_CMD} ${WRKSRC}/Makefile.in \
d102 9
a110 7
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm/db
	mv ${WRKINST}/etc/dbus-1 ${PREFIX}/share/examples/gdm
	mv ${WRKINST}/etc/X11/ ${PREFIX}/share/examples/gdm/
	mv ${WRKINST}/etc/dconf ${PREFIX}/share/examples/gdm/
	mv ${WRKINST}/var/db/gdm ${PREFIX}/share/examples/gdm/db
# XXX
	rm -rf ${WRKINST}/etc/pam.d ${WRKINST}/var/run/gdm
@


1.123
log
@Ugly update to gdm-3.4.1; still totally broken but needed by robert@@ for
his openpam port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2012/09/01 14:36:59 ajacoutot Exp $
a45 1
			security/pam \
d48 3
a50 1
			x11/gnome/libxklavier
@


1.122
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2012/06/15 08:30:19 ajacoutot Exp $
d10 1
a10 3
GNOME_VERSION=		3.2.1.1

REVISION=		3
d26 1
a26 1
WANTLIB += crypto dbus-1 dbus-glib-1 drm execinfo expat ffi fontconfig
d29 1
a29 1
WANTLIB += ogg pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
d44 4
d49 1
a49 4
			sysutils/accountsservice \
			x11/gnome/libxklavier \
			devel/libexecinfo \
			security/nss
a51 1
			devel/gconf2 \
a54 2
MODGCONF2_SCHEMAS_DIR=	gdm

a66 1
			--with-selinux=no \
a67 1
			--with-libaudit=no \
d82 1
a109 5
pre-fake:
	# cf. gconftool-2 below
	${INSTALL_DATA_DIR} ${WRKINST}/var/db/gdm/.gconf.mandatory
	touch ${WRKINST}/var/db/gdm/.gconf.mandatory/%gconf-tree.xml

a110 9
	# PATH is modified by the gconf2 MODULE, so give the full path
	# to the real gconftool-2 binary.
	${LOCALBASE}/bin/gconftool-2 --direct \
		--config-source=xml:merged:${WRKINST}/var/db/gdm/.gconf.mandatory \
		--recursive-unset /
	${LOCALBASE}/bin/gconftool-2 --direct \
		--config-source=xml:merged:${WRKINST}/var/db/gdm/.gconf.mandatory \
		--load ${WRKSRC}/data/session-setup.entries
	# clean up the mess
@


1.121
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2012/04/28 10:52:09 ajacoutot Exp $
d12 1
a12 1
REVISION=		2
@


1.120
log
@--localstatedir=/var is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2012/01/19 14:14:13 ajacoutot Exp $
d12 1
a12 1
REVISION=		1
@


1.119
log
@dpb still tries to resolve gdm's dependencies even if it is marked as
BROKEN (???) -- so remove libdpam from here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2011/12/27 14:15:06 ajacoutot Exp $
d65 1
a65 2
CONFIGURE_ARGS=		--localstatedir=/var \
			--mandir=${PREFIX}/man \
@


1.118
log
@One more thing to remove.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2011/12/03 22:17:15 ajacoutot Exp $
d3 1
a3 1
BROKEN=			greeter doesn't start; port to bsd_auth(3)
d31 1
a31 1
WANTLIB += ogg pam pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre
a47 1
			security/libdpam \
d136 1
@


1.117
log
@Use MODGNOME_ICON_CACHE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2011/11/22 15:03:23 jasper Exp $
d12 1
a12 1
REVISION=		0
@


1.116
log
@USE_LIBTOOL is already set by gnome.port.mk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2011/10/29 08:25:17 ajacoutot Exp $
d12 2
d61 1
@


1.115
log
@Sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2011/10/20 07:23:28 ajacoutot Exp $
a57 1
USE_LIBTOOL=		Yes
@


1.114
log
@Update to gdm-3.2.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2011/10/19 14:25:46 ajacoutot Exp $
d23 2
a24 2
WANTLIB += GL ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xxf86vm accountsservice
d31 3
a33 2
WANTLIB += softokn3 sqlite3 ssl3 upower-glib util vorbis vorbisfile
WANTLIB += wrap xcb xcb-render xcb-shm xkbfile xklavier xml2 z
@


1.113
log
@Set proper mode on files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2011/10/19 08:13:04 ajacoutot Exp $
d10 1
a10 2
GNOME_VERSION=		3.2.1
REVISION=		0
a107 1
		${WRKSRC}/data/upstream-settings \
@


1.112
log
@Update to gdm-3.2.1.
Some stuffs were fixed but it's still BROKEN for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2011/10/16 19:23:34 ajacoutot Exp $
d11 1
@


1.111
log
@WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2011/10/07 14:04:18 ajacoutot Exp $
d10 1
a10 2
GNOME_VERSION=		3.2.0
REVISION=		0
d28 5
a32 6
WANTLIB += gobject-2.0 gthread-2.0 gtk-3 ltdl m nspr4 nss3
WANTLIB += nssutil3 ogg pam pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 plc4 plds4 png pthread pthread-stubs
WANTLIB += smime3 softokn3 sqlite3 ssl3 upower-glib util vorbis
WANTLIB += vorbisfile wrap xcb xcb-render xcb-shm xkbfile xklavier
WANTLIB += xml2 z
d105 5
a109 1
		${WRKSRC}/data/applications/mime-dummy-handler.desktop
@


1.110
log
@Update to gdm-3.2.0; still BROKEN.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2011/09/28 09:47:46 jasper Exp $
d11 1
d29 1
a29 1
WANTLIB += gobject-2.0 gthread-2.0 gtk-3 kvm ltdl m nspr4 nss3
@


1.109
log
@sync after recent gnome.port.mk CONFIGURE_ENV changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2011/09/20 21:10:00 jasper Exp $
d5 2
d10 1
a10 2
GNOME_VERSION=		3.0.4
REVISION=	0
d14 3
d26 1
a26 1
WANTLIB += crypto dbus-1 dbus-glib-1 drm execinfo expat fontconfig
d28 6
a33 4
WANTLIB += gobject-2.0 gthread-2.0 gtk-3 ltdl m ogg pam pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png pthread
WANTLIB += pthread-stubs upower-glib util vorbis vorbisfile wrap
WANTLIB += xcb xcb-render xcb-shm xkbfile xklavier xml2 z
d37 1
a37 3
# SYSCONFDIR/dconf/{db,profile}/gdm
RUN_DEPENDS=		devel/dconf

d40 3
a42 2
#			x11/gnome/zenity
#::sysutils/consolekit
d48 2
a49 1
			devel/libexecinfo
d53 2
a54 1
			x11/gnome
d106 1
a106 3
		${WRKSRC}/data/{mime-dummy-handler.desktop,session-setup.entries}
	perl -pi -e 's,X-GNOME-Bugzilla-ExtraInfoScript.*\n,,g' \
		${WRKSRC}/data/greeter-autostart/gnome-power-manager.desktop.in
d109 1
a109 1
		${WRKSRC}/data/greeter-autostart/$i.desktop.in
d132 1
a132 2
	rm -rf ${PREFIX}/var/{,log,cache,run}/gdm \
		${PREFIX}/etc
@


1.108
log
@CONFIGURE_SHARED is now implied by gnome.port.mk, so no need to make it explicit anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2011/09/20 20:52:46 jasper Exp $
d54 2
a55 2
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include -DHAS_SA_LEN" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
@


1.107
log
@- switch to MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2011/09/16 12:29:13 espie Exp $
d57 1
a57 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--localstatedir=/var \
@


1.106
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2011/09/12 15:50:04 jasper Exp $
d52 1
a52 1
MODGNOME_HELP_FILES=	Yes
@


1.105
log
@fix extract_sufx, spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2011/09/12 12:04:16 jasper Exp $
d9 1
@


1.104
log
@
switch to using .tar.xz by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2011/09/12 07:39:20 ajacoutot Exp $
a16 2

EXTRACT_SUFX=		.tar.bz2
@


1.103
log
@Update to gdm-3.0.4 but mark BROKEN for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/06/12 14:57:50 steven Exp $
a9 2
EXTRACT_SUFX=		.tar.xz

d17 2
@


1.102
log
@Move the rcscript at the end of the PLIST so that %D gets properly
expended to /usr/local instead of /etc/rc.d.
That is needed because @@rcscript performs an implicit @@cwd to ${RCDIR}
as noticed by Mikolaj Kucharski (thanks!).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2011/05/01 16:23:18 ajacoutot Exp $
d3 1
a3 1
SHARED_ONLY=		Yes
d8 1
a8 1
GNOME_VERSION=		2.20.11
d10 1
a10 1
REVISION=		22
d20 9
a28 8
WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender art_lgpl_2 atk-1.0 c
WANTLIB += cairo croco-0.6 dmx expat fontconfig freetype gailutil
WANTLIB += gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0
WANTLIB += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs util wrap xcb xcb-render rsvg-2
WANTLIB += xml2 z gnomecanvas-2 GL Xxf86vm drm xcb-shm
d31 14
a44 6
RUN_DEPENDS=		audio/sox \
			x11/hicolor-icon-theme \
			x11/gnome/zenity \
			security/gksu-polkit
LIB_DEPENDS=		x11/gnome/librsvg \
			x11/gnome/libgnomecanvas
d47 1
d50 3
a52 3
# has 2 different libraries with same name
USE_LIBTOOL=		gnu
USE_GROFF =		Yes
d55 4
a58 2
CONFIGURE_STYLE=	gnu old
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
d61 8
a68 3
			--sysconfdir=${SYSCONFDIR} \
			--without-xevie \
			--without-libaudit \
a69 1
			--with-dmconfdir=${LOCALBASE}/share/xsessions \
d71 5
d77 2
d80 4
a83 1
			--enable-secureremote \
d86 1
a88 10
# gdm 2.20.X releases only work with old ConsoleKit versions so instead
# we patch Xsession to start ck-launch-session with the session.
RUN_DEPENDS+=		sysutils/consolekit
CONFIGURE_ARGS+=	--without-console-kit

# -pthread is needed to resolve some undefined symbols
# (pthread_mutex_trylock in libgthread for gdmflexiserver, gdmXnest...)
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib -pthread"

a91 2
FAKE_FLAGS=		gdmconfdir=${PREFIX}/share/examples/gdm

d93 39
a131 3
	${SUBST_CMD} \
		${WRKSRC}/config/{Init.in,PostSession.in,PreSession.in,Xsession.in,XKeepsCrashing} \
		${WRKSRC}/gui/gdmsetup.desktop.in.in
@


1.101
log
@Add an rc_check because checking on gdm-binary is not enough: at reboot
or shutdown time, we may be left with a hanging gdm-binary process (that
is because X is killed before the rc script has a chance to run).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2011/04/16 21:28:35 jasper Exp $
d10 1
a10 1
REVISION=		21
@


1.100
log
@- remove unnecessary NULL casts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2011/03/09 18:51:49 ajacoutot Exp $
d10 1
a10 1
REVISION=		20
@


1.99
log
@Remove now uneeded redirection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2011/01/05 16:05:54 ajacoutot Exp $
d10 1
a10 1
REVISION=		19
@


1.98
log
@Make use of rcexec.
While here, force postgresql to quit in rc_stop, ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2010/12/27 14:50:24 ajacoutot Exp $
d10 1
a10 1
REVISION=		18
@


1.97
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/12/24 10:40:06 ajacoutot Exp $
d10 1
a10 1
REVISION=		17
@


1.96
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2010/12/13 16:13:04 ajacoutot Exp $
d10 1
a10 1
REVISION=		16
@


1.95
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2010/12/11 12:57:37 ajacoutot Exp $
d10 1
a10 1
REVISION=		15
@


1.94
log
@Move these to rc_reload=NO.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2010/12/11 09:59:25 ajacoutot Exp $
d10 1
a10 1
REVISION=		14
@


1.93
log
@Cope again with rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2010/12/11 07:40:21 ajacoutot Exp $
d10 1
a10 1
REVISION=		13
@


1.92
log
@Adapt after recent rc.subr changes.
You will need a very current su(1) and /etc/rc.subr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2010/11/29 14:17:33 ajacoutot Exp $
d10 1
a10 1
REVISION=		12
@


1.91
log
@Don't install useless libtool files and static libs under the modules/ dir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2010/11/25 15:27:30 ajacoutot Exp $
d10 1
a10 1
REVISION=		11
@


1.90
log
@rc reload is not supported.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2010/11/22 08:36:57 espie Exp $
d10 1
a10 1
REVISION=		10
@


1.89
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2010/11/08 19:28:32 ajacoutot Exp $
d10 1
a10 1
REVISION=		9
@


1.88
log
@Make the Xephyr window default to 800x600.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2010/10/29 12:54:44 ajacoutot Exp $
d29 7
a35 7
BUILD_DEPENDS=		::x11/gnome/zenity
RUN_DEPENDS=		:sox-*:audio/sox \
			:hicolor-icon-theme-*:x11/hicolor-icon-theme \
			::x11/gnome/zenity \
			::security/gksu-polkit
LIB_DEPENDS=		::x11/gnome/librsvg \
			::x11/gnome/libgnomecanvas
d42 1
a42 1
USE_GROFF =	Yes
d64 1
a64 1
RUN_DEPENDS+=		::sysutils/consolekit
@


1.87
log
@Add RCS IDs to rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2010/10/28 12:15:13 steven Exp $
d10 1
a10 1
REVISION=		8
@


1.86
log
@add comment indicating reason for gnu libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2010/10/18 13:18:14 jasper Exp $
d10 1
a10 1
REVISION=		7
@


1.85
log
@Add an rc script for gdm.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2010/10/19 08:13:57 espie Exp $
d40 1
@


1.84
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2010/10/18 13:18:14 jasper Exp $
d10 1
a10 1
REVISION=		6
d27 1
a27 1
WANTLIB += xcb-render-util xml2 z gnomecanvas-2
@


1.83
log
@- remove USE_X11=Yes where needed (can't we fully get rid of it?)
and set USE_X11=No where needed

agreed by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2010/10/18 12:24:34 jasper Exp $
d41 1
@


1.82
log
@- set SHARED_ONLY=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2010/10/11 08:19:19 jasper Exp $
a39 1
USE_X11=		Yes
@


1.81
log
@- fix WANTLIB after cairo update.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.80 2010/09/28 12:24:29 ajacoutot Exp $
d10 1
a10 1
REVISION=		5
@


1.80
log
@Regen WANTLIB after librsvg update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2010/09/22 05:21:36 ajacoutot Exp $
d8 1
a8 1
REVISION=		4
d22 1
a22 1
WANTLIB += glitz gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0
@


1.79
log
@Use gksu-polkit instead of ktsuss to run gdmsetup.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2010/08/21 19:08:17 ajacoutot Exp $
d8 1
a8 1
REVISION=		3
d19 1
a19 1
WANTLIB += Xi Xinerama Xrandr Xrender art_lgpl_2 atk-1.0 bz2 c
d22 1
a22 1
WANTLIB += glitz gmodule-2.0 gobject-2.0 gsf-1 gthread-2.0 gtk-x11-2.0
@


1.78
log
@Better startup sequence for ssh-agent, seahorse-agent and
ck-launch-session.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/07/25 08:15:32 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
d31 1
a31 1
			::sysutils/ktsuss
@


1.77
log
@Switch to new DEPENDS/WANTLIB/REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/07/13 20:37:03 ajacoutot Exp $
d8 1
a8 1
REVISION=		1
@


1.76
log
@Use REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/07/07 16:37:05 ajacoutot Exp $
d7 2
a8 1
REVISION=		0
d24 2
a25 2
WANTLIB += png pthread pthread-stubs util wrap xcb xcb-render
WANTLIB += xcb-render-util xml2 z
d32 2
a33 2
LIB_DEPENDS=		rsvg-2::x11/gnome/librsvg \
			gnomecanvas-2.>=2002::x11/gnome/libgnomecanvas
@


1.75
log
@Enable console-kit support.
While here, clean up this port and fix the default dm directory.

ok jasper@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/06/12 14:57:50 steven Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
@


1.74
log
@use gnu libtool here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2010/04/25 08:48:31 ajacoutot Exp $
d7 1
d21 4
a24 4
WANTLIB += glitz gmodule-2.0 gobject-2.0 gsf-1 gtk-x11-2.0 m pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png pthread
WANTLIB += pthread-stubs util wrap xcb xml2 z
WANTLIB += gthread-2.0 xcb-render xcb-render-util
a42 2
			--with-xevie=no \
			--sysconfdir="${SYSCONFDIR}/X11" \
d45 17
a61 5
			--enable-secureremote=yes \
			--enable-console-helper=no \
			--disable-scrollkeeper \
			--with-console-kit=no \
			--with-libaudit=no
d69 1
a69 1
CONFIGURE_ARGS+=	--enable-ipv6=no
d71 1
a71 2
FAKE_FLAGS=		sysconfdir=${PREFIX}/share/examples \
			dmconfdir=${PREFIX}/share/examples/dm
@


1.73
log
@Update to gdm-2.20.11.
* includes a security fix that we already patched for > 14 months ago
@
text
@d37 1
@


1.72
log
@Don't source Xresources from xdm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2010/04/24 16:50:20 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.20.10
PKGNAME=		${DISTNAME}p13
@


1.71
log
@First part in wasting my youth updating wantlib...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2010/04/17 05:41:02 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p12
@


1.70
log
@Increase GdmXserverTimeout to give a change to GDM to start on low-end
configurations.

idea from Casey Allen Shobe on ports@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/04/11 16:39:05 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p11
d24 1
@


1.69
log
@Remove old and useless comments.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2009/12/21 18:03:18 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p10
@


1.68
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos and remove
@@unexec for theme ports.

prodded by espie@@ after me whining at the ports system ;)
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2009/10/14 08:20:19 ajacoutot Exp $
d41 1
a49 2
# not enabled in X.org
CONFIGURE_ARGS+=	--with-xevie=no
@


1.67
log
@Use ktsuss to get admin rights for gdmsetup.
Tweak DESCR and regen PLIST while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2009/10/13 23:22:45 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p9
@


1.66
log
@Rework dependencies.
Remove gnome.desktop, we use the one provided by gnome-session.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2009/08/11 08:39:38 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p8
d28 2
a29 1
			::x11/gnome/zenity
d65 2
a66 1
		${WRKSRC}/config/{Init.in,PostSession.in,PreSession.in,Xsession.in,XKeepsCrashing}
@


1.65
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2009/07/12 20:32:02 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p7
d17 7
a23 8
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender art_lgpl_2 atk-1.0 bz2 c \
		cairo croco-0.6 dmx expat fontconfig freetype gailutil \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0 \
		glitz gmodule-2.0 gnomecanvas-2 gobject-2.0 gsf-1 \
		gtk-x11-2.0 m pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		pcre pixman-1 png pthread util wrap xml2 z pthread-stubs \
		xcb
d29 2
a30 1
LIB_DEPENDS=		rsvg-2::x11/gnome/librsvg
@


1.64
log
@- better homepage

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2009/06/15 16:09:14 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p6
d23 2
a24 1
		pcre pixman-1 png pthread util wrap xml2 z
@


1.63
log
@When a user password has expired:
* prevent the user from login in!
* popup a warning message

While here, fix paths to true(1) and false(1).

joint work with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2009/06/10 20:47:42 kili Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p5
d9 1
a9 1
HOMEPAGE=		http://www.gnome.org/projects/gdm/
@


1.62
log
@
WANTLIB += pthread and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2009/05/22 08:46:22 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
@


1.61
log
@- no need for gnome-audio here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2009/04/27 08:09:27 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
d23 1
a23 1
		pcre pixman-1 png util wrap xml2 z
@


1.60
log
@- give a better chance for kbd to be initialized before starting GDM;
spotted by giovanni@@

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/04/16 08:11:13 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
a26 1
			:gnome-audio-*:x11/gnome/audio \
@


1.59
log
@- now that we have rarian, the 'scrollkeeper-update -> /bin/true' hack
is not needed as the legacy scrollkeeper-update provided by rarian does
not do anything anymore

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/04/06 10:05:21 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
@


1.58
log
@Rework the way we handle build_depends with the gnome MODULE when
MODGNOME_HELP_FILES is set to yes.

* add a build_depends on gnome-doc-utils if MODGNOME_HELP_FILES is set
to yes
* add rarian as a run_depends for gnome-doc-utils (will help with older
ports that will never be updated from using deprecated scrollkeeper)
* remove build+run_depends on gnome-doc-utils and rarian for ports that
have MODGNOME_HELP_FILES as they are now implied.
* bump where needed

This should help in having all required build dependencies for
gnome-related ports and it greatly simplifies things.

"thanks for cleaning this mess" and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/03/26 17:15:46 ajacoutot Exp $
a60 2
post-patch:
	ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
@


1.57
log
@- put -pthread back which was mistakely removed in r1.42 by yours truly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/03/23 22:25:28 sthen Exp $
d25 1
a25 3
BUILD_DEPENDS=		:gnome-doc-utils->=0.3.2:x11/gnome/doc-utils \
			:rarian-*:textproc/rarian \
			::x11/gnome/zenity
@


1.56
log
@PKGNAME works better when it's not self-referencing
"make it more pretty" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/03/23 18:39:48 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d53 2
d56 1
a56 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.55
log
@- more unneeded goos spotted by Mikolaj Kucharski
- remove an XXX from gdm while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/03/19 08:26:42 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${PKGNAME}p0
@


1.54
log
@- update to gdm-2.20.10
lots of small bug fixes
some translations updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2009/03/14 11:36:25 ajacoutot Exp $
d7 1
a37 1
DESKTOP_FILES=		Yes
d50 1
a50 1
# XXX X Window System Error ('BadLenght...')
@


1.53
log
@- nothing should have to run_depends on rarian anymore
- explicitely add build_depends on rarian where gnome-doc-utils is also a
build dependency as it does not itself run_depends on rarian anymore

This was the 2nd and hopefully last pass of rarian/scrollkeeper cleaning.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/03/14 10:40:53 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.20.9
PKGNAME=		${DISTNAME}p7
d22 1
a22 1
		pcre pixman-1 png pthread util wrap xml2 z
@


1.52
log
@- first pass at cleaning rarian/scrollkeeper handling
remove rarian-sk-update from PLIST ; it is only a wrapper that does
noting: librarian takes care of everything now.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2009/02/15 16:05:13 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p6
d26 1
a28 1
			:rarian-*:textproc/rarian \
@


1.51
log
@- make sure user password does not end-up in /var/log/messages!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/02/11 15:47:50 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p5
@


1.50
log
@- bah...missing '>' :(
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2009/02/11 15:33:51 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
@


1.49
log
@- add another tadpole as maintainer of this hobbit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2009/02/04 18:50:02 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
@


1.48
log
@- no need for a specific localstatedir, use default

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/02/02 15:00:14 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
@


1.47
log
@- bump package now that we have Xephyr(1)
it will be picked up and .desktop file will change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/01/31 12:09:49 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
@


1.46
log
@- sanitize default commands

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/01/28 16:39:01 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
@


1.45
log
@- update to gdm-2.20.9
this does not really concerns us as all fixed bugs are solaris related, but
well at least we're running with the latest "old" GDM version ;)

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/01/13 18:08:20 ajacoutot Exp $
d7 1
@


1.44
log
@- explicitely disable Xevie(3) support for now
there is a nasty bug somewhere that makes the app crash with the
(in)famous "X Windows System Error..." which disables accessibility in
GNOME

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2009/01/01 12:01:19 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.20.8
PKGNAME=		${DISTNAME}p8
@


1.43
log
@- use xdm Xresources file instead of non-existent one
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2008/12/31 17:10:53 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p7
a48 1
			--with-xevie=yes \
d51 2
@


1.42
log
@- -pthread is not needed in LDFLAGS anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2008/12/20 22:37:25 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p6
@


1.41
log
@- gdmflexiserver, gdmXnest... need -pthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/12/19 08:37:37 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p5
a52 2
# -pthread is needed to resolve some undefined symbols
# (pthread_mutex_trylock in libgthreadfor gdmflexiserver, gdmXnest...
d54 1
a54 1
			LDFLAGS="-L${LOCALBASE}/lib -pthread"
@


1.40
log
@- no/yes configure mixup
- safe bump, although plist_db didn't complain
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/12/18 19:38:26 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
d17 5
a21 6
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
		Xfixes Xi Xinerama Xrandr Xrender art_lgpl_2 atk-1.0 \
		bz2 c cairo croco-0.6 dmx \
		expat fontconfig freetype gailutil gdk-x11-2.0 \
		gdk_pixbuf-2.0 gio-2.0 glade-2.0 glib-2.0 glitz gmodule-2.0 \
		gnomecanvas-2 gobject-2.0 gsf-1 \
d23 1
a23 1
		pcre pixman-1 png util wrap xml2 z
d52 3
a54 1
			
d56 1
a56 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.39
log
@- rewrite some parts of the GDM Xsession in a saner way
- don't try to start ssh-agent when the default OpenBSD Xsession or
gnome-session are used because those already start it
- explicitely set some configure switchs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/12/18 12:06:09 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
d50 1
a51 1
			--with-xevie=no \
@


1.38
log
@- add ${LOCALBASE}/bin to default PATH for GDM scripts; needed to find
some executables
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/12/17 18:45:36 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
d50 3
a52 1
			--with-console-kit=no
@


1.37
log
@- switch to rarian instead of scrollkeeper
- drop dependency of scrollkeeper/rarian in BUILD_DEPENDS, as doc-utils
  already pulls it in
- regen PLIST

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2008/12/12 12:59:28 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
d62 4
@


1.36
log
@- remove bogus post-install target
- install /etc/X11/gdm/... scripts as executable; it's been wrong for ever
since those scripts never got a change to actually run!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2008/11/25 18:27:39 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d26 1
a26 2
BUILD_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
			:gnome-doc-utils->=0.3.2:x11/gnome/doc-utils \
d29 1
a29 1
			:scrollkeeper-*:textproc/scrollkeeper \
@


1.35
log
@- update gdm to version 2.20.8
- enable libwrap support
- explicitely disable policykit and console-helper

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2008/11/24 09:10:11 ajacoutot Exp $
d7 1
a62 6

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm; \
	find ${PREFIX}/share/examples/gdm -type d -exec chmod 555 {} \;
	find ${PREFIX}/share/examples/gdm ! -type d -exec chmod 444 {} \;
	chmod 644 ${PREFIX}/share/examples/gdm/custom.conf
@


1.34
log
@- user switching does not work under OpenBSD... at least not in a secure
and default setup, so @@comment the desktop entry

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2008/11/21 17:43:02 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		2.20.7
PKGNAME=		${DISTNAME}p0
d16 1
a16 1
WANTLIB=	ORBit-2 X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
d18 2
a19 2
		bz2 c cairo croco-0.6 crypto dbus-1 dbus-glib-1 dmx \
		expat fontconfig freetype gailutil gconf-2 gdk-x11-2.0 \
d21 1
a21 1
		gnomecanvas-2 gnomevfs-2 gobject-2.0 gsf-1 gthread-2.0 \
d23 1
a23 1
		pcre pixman-1 png pthread ssl util xml2 z
d47 5
a51 1
			--enable-secureremote=yes
@


1.33
log
@- update gdm to 2.20.7
* note there is a 2.24.x version of gdm, but newer versions require
policykit and all that kind of scary dbus shitz

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2008/11/18 14:26:02 landry Exp $
d7 1
@


1.32
log
@Remove no_gnome FLAVOR here too.
That should be ok for today... other svg-related fallouts are known.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2008/10/14 12:15:36 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.20.2
PKGNAME=		${DISTNAME}p9
@


1.31
log
@- fix man page installation PATH
- add support for secure remote connection (gdm-ssh-session)
- use FAKE_FLAGS instead of post-install tweaks
- regen PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2008/09/28 10:10:30 sturm Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p8
d34 1
a34 1
LIB_DEPENDS=		rsvg-2.>=18.1:librsvg->=2.18.1-!no_gnome:x11/gnome/librsvg
@


1.30
log
@unbreak build
fix WANTLIB
bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/06/02 17:58:23 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p7
d11 1
a11 1
# LGPL
d27 2
a28 1
			:gnome-doc-utils->=0.3.2:x11/gnome/doc-utils
d32 2
a33 1
			:hicolor-icon-theme-*:x11/hicolor-icon-theme
d42 1
d46 3
a48 1
			--localstatedir=/var
d52 5
a61 2
	mv ${WRKINST}/${SYSCONFDIR}/X11/gdm ${PREFIX}/share/examples/; \
	rmdir ${WRKINST}/${SYSCONFDIR}/X11/dm
@


1.29
log
@sync WANTLIB, bump package version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/05/26 16:29:27 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p6
d21 1
a21 1
		gdk_pixbuf-2.0 glade-2.0 glib-2.0 glitz gmodule-2.0 \
@


1.28
log
@- make help available by adding MODGNOME_HELP_FILES / ::x11/gnome/yelp
to RUN_DEPENDS

"mkay" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/05/09 10:51:44 bernd Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p5
d24 1
a24 1
		pcre png pthread ssl util xml2 z
@


1.27
log
@Better configure patch to avoid problems if the xserver set isn't
installed on the build machine.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/04/23 11:30:58 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
d39 1
@


1.26
log
@- fix two typos that may've broken suspend and shotdown
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/04/16 20:31:24 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
@


1.25
log
@- Add missing goo, preventing some icons to not show up after a clean install
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/02/05 14:09:47 landry Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
@


1.24
log
@Fix LIB_DEPENDS, gdm can't be installed if librsvg,-no_gnome is installed,
dependency tree is broken. Force dependency on !-no_gnome.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/02/04 17:55:18 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
@


1.23
log
@let's face it....add myself as maintainer

requested by and ok ajacoutot@@, ok fkr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/12/15 18:04:04 martynas Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d32 1
a32 1
LIB_DEPENDS=		rsvg-2.>=18.1::x11/gnome/librsvg
@


1.22
log
@update to gdm-2.20.2;  ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/11/27 20:26:13 jasper Exp $
d7 1
@


1.21
log
@- update gdm to 2.20.1
- make the *beep* sounds work
- install the Xsession script with the executable bit, so gdm won't
  try to start gnome in failsafe mode. as reported by several users.

tested by fkr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2007/09/19 20:59:55 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		2.20.1
@


1.20
log
@SECURITY update to 2.18.4, fixes CVE-2007-3381
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/07/08 09:25:18 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.18.4
d15 9
a23 7
WANTLIB=	ORBit-2 X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama \
		Xrandr Xrender art_lgpl_2 atk-1.0 bz2 c cairo croco-0.6 \
		crypto dbus-1 dbus-glib-1 dmx expat fontconfig freetype \
		gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 glade-2.0 glib-2.0 \
		glitz gmodule-2.0 gnomecanvas-2 gnomevfs-2 gobject-2.0 \
		gsf-1 gthread-2.0 gtk-x11-2.0 m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 png popt pthread ssl util xml2 z
d27 3
a29 1
RUN_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
d46 1
a46 1
	@@ln -s /usr/bin/true ${WRKDIR}/bin/scrollkeeper-update
d49 1
a49 1
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gdm; \
@


1.19
log
@- this needs gnome-doc-utils to build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/07/05 22:50:10 jasper Exp $
d6 1
a6 1
GNOME_VERSION=		2.18.2
@


1.18
log
@convert these gnome ports to use the new x11/gnome module.

this module is now mature enough to be used in new ports too.

feedback and ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/06/26 21:08:29 martynas Exp $
d23 2
a24 1
BUILD_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper
@


1.17
log
@update to gdm-2.18.2; ok jasper@@ (long ago, actually)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2007/05/18 17:20:39 jasper Exp $
d3 1
a3 1
COMMENT=		"GNOME display manager"
d5 2
a6 2
DISTNAME=		gdm-2.18.2
CATEGORIES=		x11/gnome
d23 2
a24 7
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/gdm/2.18/}
EXTRACT_SUFX=		.tar.bz2

BUILD_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
			:p5-XML-Parser-*:textproc/p5-XML-Parser
RUN_DEPENDS=		:desktop-file-utils-*:devel/desktop-file-utils \
			:scrollkeeper-*:textproc/scrollkeeper \
d28 2
a29 1
MODULES=		devel/gettext
d32 1
a32 2
USE_GMAKE=		Yes
USE_LIBTOOL=		Yes
@


1.16
log
@update gdm to 2.18.1

lots of help, and ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/12/16 12:22:35 espie Exp $
d5 1
a5 1
DISTNAME=		gdm-2.18.1
@


1.15
log
@say goodbye to GNU land.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.14 2006/09/18 12:19:40 espie Exp $

d5 1
a5 2
DISTNAME=		gdm-2.6.0.9
PKGNAME=		${DISTNAME}p3
d8 1
a8 1
HOMEPAGE=		http://www.jirka.org/gdm.html
d15 7
a21 9
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xi Xdmcp Xext \
		Xinerama Xrender art_lgpl_2 atk-1.0 audiofile bonobo-2 \
		bonobo-activation bonoboui-2 bz2 c crypto esd fontconfig \
		freetype gconf-2 gdk-x11-2.0 gdk_pixbuf-2.0 \
		glade-2.0 glib-2.0 gmodule-2.0 gnome-2 \
		gnome-keyring gnomecanvas-2 gnomevfs-2 gobject-2.0 gsf-1 \
		gthread-2.0 gtk-x11-2.0 jpeg m \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		popt pthread ssl util xml2 z cairo glitz png
d23 1
a23 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/gdm/2.6/}
d28 2
a29 1
RUN_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
d31 1
a31 2
LIB_DEPENDS=		gnomeui-2::x11/gnome/libgnomeui \
			rsvg-2::x11/gnome/librsvg
a34 1
CONFDIR=		${SYSCONFDIR}/X11
d39 3
a41 3
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--sysconfdir="${CONFDIR}"
CONFIGURE_ARGS+=	--localstatedir=/var
a43 1
SUBST_VARS=		CONFDIR
d50 5
a54 1
	cp -Rp ${WRKINST}/${CONFDIR}/* ${PREFIX}/share/examples/gdm/
@


1.14
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/06/13 13:36:44 bernd Exp $
d30 1
a30 2
BUILD_DEPENDS=		:pkgconfig-*:devel/pkgconfig \
			:scrollkeeper-*:textproc/scrollkeeper \
@


1.13
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/01/19 13:35:47 steven Exp $
d18 1
a18 1
		Xinerama Xrender art_lgpl_2 atk-1.0.0.0 audiofile bonobo-2 \
d20 5
a24 5
		freetype gconf-2 gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 \
		glade-2.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 gnome-2 \
		gnome-keyring gnomecanvas-2 gnomevfs-2 gobject-2.0.0.0 gsf-1 \
		gthread-2.0.0.0 gtk-x11-2.0.0.0 jpeg m \
		pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0 \
@


1.12
log
@- fix WANTLIB after gtk+2 downgrade
- MODULES=devel/gettext where appropriate
- sync PLISTs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/11/14 23:03:45 wilfried Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
d17 1
a17 1
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xau Xi Xdmcp Xext Xft \
d24 2
a25 2
		pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0 pangoft2-1.0.0.0 \
		popt pthread ssl util xml2 z
@


1.11
log
@packages-specs doesn't default to *, I suck
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/11/14 22:37:46 wilfried Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
d17 1
a17 1
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xi Xext \
d19 1
a19 1
		bonobo-activation bonoboui-2 bz2 c cairo crypto esd fontconfig \
d21 1
a21 1
		glade-2.0.0.0 glib-2.0.0.0 glitz gmodule-2.0.0.0 gnome-2 \
d23 3
a25 3
		gthread-2.0.0.0 gtk-x11-2.0.0.0 iconv intl jpeg m \
		pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0 \
		png popt pthread ssl util xml2 z
d37 2
@


1.10
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/09/04 23:37:30 espie Exp $
d30 5
a34 5
BUILD_DEPENDS=		::devel/pkgconfig \
			::textproc/scrollkeeper \
			::textproc/p5-XML-Parser
RUN_DEPENDS=		::textproc/scrollkeeper \
			::x11/hicolor-icon-theme
@


1.9
log
@zap @@exec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/05/26 03:39:31 marcm Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d17 1
a17 1
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xi Xext Xft \
d19 1
a19 1
		bonobo-activation bonoboui-2 bz2 c crypto esd fontconfig \
d21 1
a21 1
		glade-2.0.0.0 glib-2.0.0.0 gmodule-2.0.0.0 gnome-2 \
d24 2
a25 2
		pango-1.0.0.0 pangoft2-1.0.0.0 pangox-1.0.0.0 \
		pangoxft-1.0.0.0 popt pthread ssl util xml2 z
d30 5
a34 5
BUILD_DEPENDS=		:pkgconfig-*:devel/pkgconfig \
			:scrollkeeper-*:textproc/scrollkeeper \
			:p5-XML-Parser-*:textproc/p5-XML-Parser
RUN_DEPENDS=		:scrollkeeper-*:textproc/scrollkeeper \
			:hicolor-icon-theme-*:x11/hicolor-icon-theme
@


1.8
log
@Gnome 2.10.0/2.10.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/12/15 13:57:56 alek Exp $
d7 1
@


1.7
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/12/10 20:36:43 marcm Exp $
d6 1
a6 1
DISTNAME=		gdm-2.6.0.6
a10 2
MAINTAINER=		Marc Matteo <marcm@@openbsd.org>

d16 1
a16 1
WANTLIB=	ICE ORBit-2 ORBitCosNaming-2 SM X11 Xcursor Xext Xft \
d40 1
@


1.6
log
@Update to Gnome 2.8 (.1).

Work done primarily by Francois Briere, thanks Francois.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/09/15 04:15:25 marcm Exp $
d18 9
@


1.5
log
@Update to 2.6.0.4.  Yes, a 0.0.0.1 update that brings regeneration of
almost all the diffs.  Hmmm.

Also new plist goodness and ridding of the install scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/06/24 23:58:34 marcm Exp $
d6 1
a6 1
DISTNAME=		gdm-2.6.0.4
@


1.4
log
@Update to 2.6.0.3 in sync with Gnome 2.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/01/30 13:36:51 marcm Exp $
d6 1
a6 1
DISTNAME=		gdm-2.6.0.3
@


1.3
log
@Update to 2.4.4.7.  First a bugfile release then a release to handle
that stupid intltool madness.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/12/01 04:13:06 marcm Exp $
d6 1
a6 1
DISTNAME=		gdm-2.4.4.7
d19 1
a19 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/gdm/2.4/}
d23 1
a23 1
			:scrollkeeper->=0.3.12:textproc/scrollkeeper \
d25 2
a26 1
RUN_DEPENDS=		:scrollkeeper->=0.3.12:textproc/scrollkeeper
@


1.2
log
@Gnome 2.4.1.

Sync versions with the Gnome 2.4.1 release.  Mostly bugfixes, too numerous
to list :).

This also addresses systrace issues and some config file issues from
sturm@@, and wireless applet support from djm@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/10/08 15:57:01 marcm Exp $
d6 1
a6 1
DISTNAME=		gdm-2.4.4.5
d23 2
a24 1
			:scrollkeeper->=0.3.12:textproc/scrollkeeper
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/01/31 18:52:44 todd Exp $
d6 1
a6 1
DISTNAME=		gdm-2.4.4.3
@


1.1.1.1
log
@GDM is the Gnome Display Manager.
@
text
@@
