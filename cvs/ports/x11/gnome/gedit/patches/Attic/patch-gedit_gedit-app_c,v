head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2014.04.15.07.12.38;	author jasper;	state dead;
branches;
next	1.4;

1.4
date	2014.04.01.07.01.46;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2014.03.28.08.47.44;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.30.13.04.21;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2013.03.30.12.07.28;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to gedit-3.12.1
@
text
@$OpenBSD: patch-gedit_gedit-app_c,v 1.4 2014/04/01 07:01:46 jasper Exp $

From 36907e0bf6226182cf4f361663ad7dc4a6b2cd15 Mon Sep 17 00:00:00 2001
From: Paolo Borelli <pborelli@@gnome.org>
Date: Sun, 30 Mar 2014 00:07:59 +0100
Subject: Unref all the menu models at shutdown

From fa9263f9fb7a32c73f7635936fdf9ff589e1b43d Mon Sep 17 00:00:00 2001
From: Kalev Lember <kalevlember@@gmail.com>
Date: Tue, 18 Mar 2014 12:49:03 +0000
Subject: Plug memory leaks with css loading

--- gedit/gedit-app.c.orig	Fri Mar 21 20:51:39 2014
+++ gedit/gedit-app.c	Tue Apr  1 08:41:44 2014
@@@@ -182,6 +182,8 @@@@ gedit_app_dispose (GObject *object)
 	g_clear_object (&app->priv->engine);
 
 	g_clear_object (&app->priv->window_menu);
+	g_clear_object (&app->priv->notebook_menu);
+	g_clear_object (&app->priv->tab_width_menu);
 
 	G_OBJECT_CLASS (gedit_app_parent_class)->dispose (object);
 }
@@@@ -554,12 +556,14 @@@@ gedit_app_startup (GApplication *application)
 		gtk_style_context_add_provider_for_screen (gdk_screen_get_default (),
 		                                           GTK_STYLE_PROVIDER (provider),
 		                                           GTK_STYLE_PROVIDER_PRIORITY_APPLICATION);
+		g_object_unref (provider);
 	}
 	else
 	{
 		g_warning ("Could not load css provider: %s", error->message);
 		g_error_free (error);
 	}
+	g_object_unref (css_file);
 
 	/*
 	 * We use the default gtksourceview style scheme manager so that plugins
@


1.4
log
@plug a bunch of leaks in gedit like hans brinker would have
@
text
@d1 1
a1 1
$OpenBSD: patch-gedit_gedit-app_c,v 1.3 2014/03/28 08:47:44 jasper Exp $
@


1.3
log
@apply some fixes from upstream (mem leak and move plugin manager to ui file)
@
text
@d1 6
a6 1
$OpenBSD$
d14 11
a24 2
+++ gedit/gedit-app.c	Fri Mar 28 09:41:17 2014
@@@@ -554,12 +554,14 @@@@ gedit_app_startup (GApplication *application)
@


1.2
log
@- update to gedit-3.8.0
* disable python support for now, untill we can use python3 here.
@
text
@d1 1
a1 1
$OpenBSD: patch-gedit_gedit-app_c,v 1.1 2013/03/30 12:07:28 ajacoutot Exp $
d3 4
a6 4
From 2dd7cf29f92c22f12eccb42626abe3a1522053f4 Mon Sep 17 00:00:00 2001
From: SÃ©bastien Wilmet <swilmet@@gnome.org>
Date: Sun, 10 Feb 2013 17:05:10 +0000
Subject: Include the main header of gsv: gtksourceview/gtksource.h
d8 14
a21 3
--- gedit/gedit-app.c.orig	Sat Nov  3 11:48:18 2012
+++ gedit/gedit-app.c	Sat Mar 30 12:41:53 2013
@@@@ -37,7 +37,7 @@@@
d23 2
a24 7
 #include <glib/gi18n.h>
 #include <libpeas/peas-extension-set.h>
-#include <gtksourceview/gtksourcestyleschememanager.h>
+#include <gtksourceview/gtksource.h>
 
 #include "gedit-app.h"
 #include "gedit-commands.h"
@


1.1
log
@Unbreak with new gtksourceview.
@
text
@d1 1
a1 1
$OpenBSD$
@

