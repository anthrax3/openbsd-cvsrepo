head	1.115;
access;
symbols
	OPENBSD_6_1:1.113.0.2
	OPENBSD_6_1_BASE:1.113
	OPENBSD_6_0:1.112.0.2
	OPENBSD_6_0_BASE:1.112
	OPENBSD_5_9:1.108.0.2
	OPENBSD_5_9_BASE:1.108
	OPENBSD_5_8:1.105.0.4
	OPENBSD_5_8_BASE:1.105
	OPENBSD_5_7:1.97.0.2
	OPENBSD_5_7_BASE:1.97
	OPENBSD_5_6:1.95.0.2
	OPENBSD_5_6_BASE:1.95
	OPENBSD_5_5:1.87.0.2
	OPENBSD_5_5_BASE:1.87
	OPENBSD_5_4:1.81.0.2
	OPENBSD_5_4_BASE:1.81
	OPENBSD_5_3:1.68.0.2
	OPENBSD_5_3_BASE:1.68
	OPENBSD_5_2:1.64.0.2
	OPENBSD_5_2_BASE:1.64
	OPENBSD_5_1_BASE:1.60
	OPENBSD_5_1:1.60.0.2
	OPENBSD_5_0:1.41.0.2
	OPENBSD_5_0_BASE:1.41
	OPENBSD_4_9:1.30.0.2
	OPENBSD_4_9_BASE:1.30
	OPENBSD_4_8:1.21.0.2
	OPENBSD_4_8_BASE:1.21
	OPENBSD_4_7:1.15.0.2
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.10.0.2
	OPENBSD_4_5_BASE:1.10
	jasper_20080821:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.115
date	2017.04.13.07.08.14;	author jasper;	state Exp;
branches;
next	1.114;
commitid	A7bXhtHuJY8cA1L8;

1.114
date	2017.04.10.11.46.36;	author sthen;	state Exp;
branches;
next	1.113;
commitid	HY6VNZxjJWzKQFDV;

1.113
date	2016.10.29.07.48.53;	author jasper;	state Exp;
branches;
next	1.112;
commitid	jODQ8R4aVU2a5SYj;

1.112
date	2016.04.28.14.29.50;	author ajacoutot;	state Exp;
branches;
next	1.111;
commitid	WB9XlxLvQ0eZemre;

1.111
date	2016.04.27.10.12.41;	author jasper;	state Exp;
branches;
next	1.110;
commitid	mJL4gdlGY1XFAD4n;

1.110
date	2016.04.20.06.22.34;	author jasper;	state Exp;
branches;
next	1.109;
commitid	SwJsmWvrQga0e6T4;

1.109
date	2016.03.20.16.12.26;	author naddy;	state Exp;
branches;
next	1.108;
commitid	guiZq8cnNbVyyHzx;

1.108
date	2016.01.05.17.18.19;	author ajacoutot;	state Exp;
branches;
next	1.107;
commitid	Xfn7qQK1aTmNEkrL;

1.107
date	2016.01.04.19.11.00;	author ajacoutot;	state Exp;
branches;
next	1.106;
commitid	cgys5eNHfYVlzhB9;

1.106
date	2015.09.19.12.46.29;	author jasper;	state Exp;
branches;
next	1.105;
commitid	zv4Z5I1xjEzmidAh;

1.105
date	2015.07.18.22.29.56;	author ajacoutot;	state Exp;
branches;
next	1.104;
commitid	XyOP5eJxW8KTLfgy;

1.104
date	2015.06.13.13.16.23;	author ajacoutot;	state Exp;
branches;
next	1.103;
commitid	dTmo0vBFsz9sRByD;

1.103
date	2015.06.13.08.35.18;	author ajacoutot;	state Exp;
branches;
next	1.102;
commitid	xMTz3ff5wnOINcta;

1.102
date	2015.06.13.08.31.46;	author ajacoutot;	state Exp;
branches;
next	1.101;
commitid	2MMYjhFMGqzfK7sx;

1.101
date	2015.06.13.08.30.55;	author ajacoutot;	state Exp;
branches;
next	1.100;
commitid	u6LYSSB5gDL6hm6X;

1.100
date	2015.05.29.07.47.48;	author ajacoutot;	state Exp;
branches;
next	1.99;
commitid	ZgxwvUAccnOOCPeL;

1.99
date	2015.04.04.09.21.06;	author ajacoutot;	state Exp;
branches;
next	1.98;
commitid	kS3kwKZogsvzYmEY;

1.98
date	2015.03.27.08.16.17;	author ajacoutot;	state Exp;
branches;
next	1.97;
commitid	BUhOiEl2FUSRKwq7;

1.97
date	2014.12.27.15.57.41;	author rpe;	state Exp;
branches;
next	1.96;
commitid	a3LthmajKOWOfYI4;

1.96
date	2014.09.13.18.09.22;	author brad;	state Exp;
branches;
next	1.95;
commitid	PpbRjVZdAmlrmi8q;

1.95
date	2014.04.21.13.24.30;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2014.04.02.09.36.13;	author jasper;	state Exp;
branches;
next	1.93;

1.93
date	2014.04.01.18.06.31;	author jasper;	state Exp;
branches;
next	1.92;

1.92
date	2014.04.01.17.03.15;	author jasper;	state Exp;
branches;
next	1.91;

1.91
date	2014.04.01.15.31.47;	author jasper;	state Exp;
branches;
next	1.90;

1.90
date	2014.04.01.13.21.46;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2014.03.28.09.55.14;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2014.03.09.22.18.08;	author ajacoutot;	state Exp;
branches;
next	1.87;

1.87
date	2013.12.24.08.18.46;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2013.11.17.17.54.09;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2013.11.16.15.22.16;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2013.10.26.08.02.57;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2013.10.16.10.26.20;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2013.09.27.07.06.18;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2013.07.19.11.59.53;	author jasper;	state Exp;
branches;
next	1.80;

1.80
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2013.06.18.16.47.56;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2013.06.17.19.28.37;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2013.06.12.20.36.34;	author brad;	state Exp;
branches;
next	1.76;

1.76
date	2013.05.31.15.35.06;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2013.05.25.00.33.10;	author brad;	state Exp;
branches;
next	1.74;

1.74
date	2013.04.16.13.17.01;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2013.03.29.17.31.41;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2013.03.28.20.03.29;	author jasper;	state Exp;
branches;
next	1.71;

1.71
date	2013.03.28.19.34.29;	author jasper;	state Exp;
branches;
next	1.70;

1.70
date	2013.03.16.21.56.37;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2013.03.11.11.46.11;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2013.02.09.14.49.53;	author sthen;	state Exp;
branches;
next	1.67;

1.67
date	2012.10.01.12.49.19;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2012.09.21.13.23.06;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2012.09.01.14.36.59;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2012.06.15.08.30.20;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2012.04.25.06.23.16;	author espie;	state Exp;
branches;
next	1.62;

1.62
date	2012.04.23.17.15.19;	author espie;	state Exp;
branches;
next	1.61;

1.61
date	2012.02.18.18.40.18;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2012.01.31.07.58.19;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2012.01.25.14.40.36;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2012.01.25.13.26.05;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2012.01.25.11.30.41;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2011.12.05.12.32.34;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2011.12.03.22.17.16;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2011.11.21.07.38.23;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2011.11.07.07.53.28;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2011.10.26.22.31.27;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2011.10.11.05.10.25;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2011.09.29.13.35.41;	author jasper;	state Exp;
branches;
next	1.49;

1.49
date	2011.09.28.09.47.47;	author jasper;	state Exp;
branches;
next	1.48;

1.48
date	2011.09.20.21.10.00;	author jasper;	state Exp;
branches;
next	1.47;

1.47
date	2011.09.20.20.52.46;	author jasper;	state Exp;
branches;
next	1.46;

1.46
date	2011.09.19.07.44.58;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.09.16.12.29.14;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2011.09.12.15.31.15;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.09.12.12.04.17;	author jasper;	state Exp;
branches;
next	1.42;

1.42
date	2011.09.05.14.28.55;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2011.07.29.20.42.26;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2011.07.26.15.36.26;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2011.07.12.15.32.16;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2011.06.10.20.01.02;	author naddy;	state Exp;
branches;
next	1.37;

1.37
date	2011.06.02.15.54.10;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2011.06.02.07.16.32;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2011.05.05.15.51.03;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2011.04.20.16.43.34;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2011.04.07.09.28.54;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2011.04.07.08.55.25;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2011.03.07.19.30.33;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2011.01.11.10.59.25;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.27.17.13.42;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2010.11.26.14.50.10;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2010.11.18.16.44.33;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.19.08.13.57;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2010.10.11.08.19.20;	author jasper;	state Exp;
branches;
next	1.24;

1.24
date	2010.09.30.13.10.09;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2010.09.27.12.12.41;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.08.27.10.50.51;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2010.07.25.08.18.32;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.07.25.08.15.32;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.07.18.18.27.13;	author kili;	state Exp;
branches;
next	1.18;

1.18
date	2010.07.13.20.39.03;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.06.14.05.45.32;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.03.21.09.54.50;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.10.20.10.41.42;	author kili;	state Exp;
branches;
next	1.14;

1.14
date	2009.10.15.00.27.18;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2009.10.14.23.30.43;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2009.08.01.14.14.24;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2009.03.23.07.31.09;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2009.02.11.15.47.50;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2009.02.11.15.33.52;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2009.02.11.15.20.19;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2009.02.05.09.50.31;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2009.01.31.22.13.37;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.23.18.13.25;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.29.12.53.51;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.22.23.53.47;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.21.18.35.31;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2008.08.21.10.27.24;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.08.21.10.27.24;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.115
log
@sync for VALA_API_VERSION
@
text
@# $OpenBSD: Makefile,v 1.114 2017/04/10 11:46:36 sthen Exp $

COMMENT-main=		GNOME Data Access library
COMMENT-ldap=		LDAP backend for libgda
COMMENT-mysql=		MySQL backend for libgda
COMMENT-pgsql=		PostgreSQL backend for libgda
COMMENT-ui=		GTK+ extension and tools for libgda

GNOME_PROJECT=		libgda
GNOME_VERSION=		5.2.4

GDA_MAJOR=		5.0
SUBST_VARS=		GDA_MAJOR

PKGNAME-main=		${DISTNAME}
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}
PKGNAME-ui=		libgda-ui-${GNOME_VERSION}

REVISION-main=		7
REVISION-ldap=		1
REVISION-mysql=		1
REVISION-pgsql=		1
REVISION-ui=		3

EPOCH-main=		2
EPOCH-ldap=		0
EPOCH-mysql=		0
EPOCH-pgsql=		0

CATEGORIES=		databases

SHARED_LIBS +=  gda-5.0              1.0      # 5.1
SHARED_LIBS +=  gdadata-5.0          0.0      # unknown
SHARED_LIBS +=  gda-report-5.0       1.0      # 5.1
SHARED_LIBS +=  gda-xslt-5.0         1.0      # 5.1
SHARED_LIBS +=  gda-ui-5.0           1.0      # 5.1

HOMEPAGE=		http://www.gnome-db.org/

# library: LGPLv2
# tools: GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += m pcre z gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 lzma
WANTLIB += gthread-2.0 xml2 gcrypt secret-1 gpg-error ffi pthread
WANTLIB += iconv intl

# /libgda-5.1.2_writes_to_HOME/.cache/g-ir-scanner
PORTHOME=		${WRKDIST}

MODULES=		lang/python \
			x11/gnome

MODGNOME_LDFLAGS=	-lm
MODGNOME_TOOLS=		desktop-file-utils gobject-introspection \
			gtk-update-icon-cache vala yelp

MODPY_BUILDDEP=		No
MODPY_RUNDEP=		No
MODPY_ADJ_FILES=	libgda-report/RML/trml2html/trml2html.py \
			libgda-report/RML/trml2pdf/trml2pdf.py

LIBTOOL_FLAGS=		--tag=disable-static

BUILD_DEPENDS=		databases/db/v4 \
			devel/iso-codes

TEST_DEPENDS=		devel/check

CONFIGURE_ARGS=		--enable-system-sqlite \
			--enable-gdaui-gi \
			--enable-gdaui-vala \
			--enable-vala-extensions \
			--with-bdb-includedir-name=include/db4 \
			--without-firebird \
			--without-oracle \
			--without-mdb \
			--without-java \
			--without-graphviz \
			--with-ui \
			--with-ldap \
			--with-mysql="${LOCALBASE}" \
			--with-postgres="${LOCALBASE}"

# XXX sync with API_V in lang/vala
CONFIGURE_ENV +=	VALA_API_VERSION=0.36

FAKE_FLAGS=		configdir="${PREFIX}/share/examples/libgda"

MULTI_PACKAGES=		-main -ui -mysql -pgsql -ldap

### -main
WANTLIB-main += ${WANTLIB}
WANTLIB-main += c gcrypt gpg-error ncurses sqlite3 gee-0.8
WANTLIB-main += readline soup-2.4 crypto gdk_pixbuf-2.0 png xslt

RUN_DEPENDS-main=	${MODPY_RUN_DEPENDS}
LIB_DEPENDS-main=	devel/libgee \
			devel/libsoup \
			textproc/libxslt \
			graphics/gdk-pixbuf2 \
			x11/gnome/libsecret

### -ui
WANTLIB-ui += ${WANTLIB}
WANTLIB-ui += X11 Xcomposite Xcursor Xdamage Xext Xfixes graphite2
WANTLIB-ui += Xi Xinerama Xrandr Xrender atk-1.0 c cairo
WANTLIB-ui += cairo-gobject expat fontconfig freetype gda-${GDA_MAJOR}
WANTLIB-ui += gdk-3 gdk_pixbuf-2.0 goocanvas-2.0 gtk-3 gtksourceview-3.0
WANTLIB-ui += pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png
WANTLIB-ui += pthread-stubs xcb xcb-render xcb-shm epoxy
WANTLIB-ui += ICE SM atk-bridge-2.0 atspi harfbuzz dbus-1

LIB_DEPENDS-ui=		graphics/goocanvas2 \
			x11/dbus \
			x11/gnome/libgda \
			x11/gtksourceview3
RUN_DEPENDS-ui=		${RUN_DEPENDS} \
			devel/iso-codes

### -mysql
WANTLIB-mysql += ${WANTLIB}
WANTLIB-mysql += crypto gda-${GDA_MAJOR} mysqlclient ssl ${LIBCXX}

RUN_DEPENDS-mysql=	# empty
LIB_DEPENDS-mysql=	x11/gnome/libgda \
			databases/mariadb

### pgsql
WANTLIB-pgsql += ${WANTLIB}
WANTLIB-pgsql += gda-${GDA_MAJOR} pq crypto ssl

RUN_DEPENDS-pgsql=	# empty
LIB_DEPENDS-pgsql=	x11/gnome/libgda \
			databases/postgresql

### -ldap
WANTLIB-ldap += ${WANTLIB}
WANTLIB-ldap += crypto gda-${GDA_MAJOR} lber-2.4 ldap-2.4 sasl2 ssl

RUN_DEPENDS-ldap=	# empty
LIB_DEPENDS-ldap=	x11/gnome/libgda \
			databases/openldap

# XXX sync with LIBdb_VERSION in databases/db/v4
# (find a proper way to push upstream)
AUTOCONF_VERSION=	2.69
CONFIGURE_STYLE=	autoconf no-autoheader
post-patch:
	sed -i 's,bdb_libext="\$$linklibext",bdb_libext=".so.5.0",' ${WRKSRC}/m4/bdb.m4

post-install:
	rm ${PREFIX}/lib/libgda-${GDA_MAJOR}/{plugins,providers}/*.la

.include <bsd.port.mk>
@


1.114
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2016/10/29 07:48:53 jasper Exp $
d21 1
a21 1
REVISION-main=		6
d25 1
a25 1
REVISION-ui=		2
d88 1
a88 1
CONFIGURE_ENV +=	VALA_API_VERSION=0.34
@


1.113
log
@handle vala 0.34
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2016/04/28 14:29:50 ajacoutot Exp $
d125 1
a125 1
WANTLIB-mysql += crypto gda-${GDA_MAJOR} mysqlclient ssl stdc++
@


1.112
log
@Fix dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2016/04/27 10:12:41 jasper Exp $
d21 1
a21 1
REVISION-main=		5
d25 1
a25 1
REVISION-ui=		1
d88 1
a88 1
CONFIGURE_ENV +=	VALA_API_VERSION=0.32
@


1.111
log
@drop gettext module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2016/04/20 06:22:34 jasper Exp $
d21 5
a25 5
REVISION-main=		4
REVISION-ldap=		0
REVISION-mysql=		0
REVISION-pgsql=		0
REVISION-ui=		0
d100 1
a100 2
LIB_DEPENDS-main=	devel/gettext \
			devel/libgee \
d116 1
a116 2
LIB_DEPENDS-ui=		devel/gettext \
			graphics/goocanvas2 \
d127 2
a128 2
LIB_DEPENDS-mysql=	devel/gettext \
			x11/gnome/libgda \
d135 2
a136 2
LIB_DEPENDS-pgsql=	devel/gettext \
			x11/gnome/libgda \
d143 2
a144 2
LIB_DEPENDS-ldap=	devel/gettext \
			x11/gnome/libgda \
@


1.110
log
@unbreak after vala update to 0.32.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2016/03/20 16:12:26 naddy Exp $
d21 5
a25 1
REVISION-main=		3
d48 1
d53 1
a53 2
MODULES=		devel/gettext \
			lang/python \
d99 2
a100 3
RUN_DEPENDS-main=	${MODGETTEXT_RUN_DEPENDS} \
			${MODPY_RUN_DEPENDS}
LIB_DEPENDS-main=	${MODGETTEXT_LIB_DEPENDS} \
d117 1
a117 1
LIB_DEPENDS-ui=		${MODGETTEXT_LIB_DEPENDS} \
d129 1
a129 1
LIB_DEPENDS-mysql=	${MODGETTEXT_LIB_DEPENDS} \
a132 2
RUN_DEPENDS-mysql=	${MODGETTEXT_RUN_DEPENDS}

d137 1
a137 1
LIB_DEPENDS-pgsql=	${MODGETTEXT_LIB_DEPENDS} \
a140 2
RUN_DEPENDS-pgsql=	${MODGETTEXT_RUN_DEPENDS}

d145 1
a145 1
LIB_DEPENDS-ldap=	${MODGETTEXT_LIB_DEPENDS} \
a147 2

RUN_DEPENDS-ldap=	${MODGETTEXT_RUN_DEPENDS}
@


1.109
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2016/01/05 17:18:19 ajacoutot Exp $
d21 1
a21 1
REVISION-main=		2
d84 1
a84 1
CONFIGURE_ENV +=	VALA_API_VERSION=0.30
@


1.108
log
@Only -main needs python.

reported by nigel@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.107 2016/01/04 19:11:00 ajacoutot Exp $

SHARED_ONLY=		Yes
@


1.107
log
@Needs python for trml2html.py and trml2pdf.py.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2015/09/19 12:46:29 jasper Exp $
d23 1
a23 1
REVISION-main=		1
d59 1
d97 2
a98 1
RUN_DEPENDS-main=	${MODGETTEXT_RUN_DEPENDS}
@


1.106
log
@handle vala 0.30.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2015/07/18 22:29:56 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		0
d51 1
d57 4
@


1.105
log
@Move to sed -i.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2015/06/13 13:16:23 ajacoutot Exp $
d23 2
d80 1
a80 1
CONFIGURE_ENV +=	VALA_API_VERSION=0.28
@


1.104
log
@Update to libgda-5.2.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2015/06/13 08:35:18 ajacoutot Exp $
d150 1
a150 1
	perl -pi -e 's,bdb_libext="\$$linklibext",bdb_libext=".so.5.0",' ${WRKSRC}/m4/bdb.m4
@


1.103
log
@Add XXX: variables need to be in sync.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2015/06/13 08:31:46 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.2.3
@


1.102
log
@Remove commented lines.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2015/06/13 08:30:55 ajacoutot Exp $
d77 1
a77 1
# XXX sync with API_V:R in lang/vala
@


1.101
log
@Update to libgda-5.2.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2015/05/29 07:47:48 ajacoutot Exp $
a75 4

#CONFIGURE_ENV=		LIBCRYPTO_CFLAGS="-I/usr/include/openssl" \
#			LIBCRYPTO_LIBS="-lcrypto" \
#			MYSQL_CONFIG="${LOCALBASE}/bin/mysql_config"
@


1.100
log
@include/ssl -> include/openssl
Regen WANTLIB while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2015/04/04 09:21:06 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.2.2
a22 6
REVISION-main=		5
REVISION-ldap=		4
REVISION-mysql=		4
REVISION-pgsql=		5
REVISION-ui=		4

d30 5
a34 4
SHARED_LIBS +=  gda-5.0                   1.0 # 5.1
SHARED_LIBS +=  gda-report-5.0            1.0 # 5.1
SHARED_LIBS +=  gda-ui-5.0                1.0 # 5.1
SHARED_LIBS +=  gda-xslt-5.0              1.0 # 5.1
a44 3
MODULES=		devel/gettext \
			x11/gnome

d48 2
a49 4
# no no_ldap PSEUDO_FLAVOR because we need the headers in -main
# since some are referenced by other headers
PSEUDO_FLAVORS=		no_mysql no_pgsql no_ui
FLAVOR?=
d51 3
a53 1
MULTI_PACKAGES=		-main
d55 1
a55 3
LIB_DEPENDS=		devel/glib2 \
			textproc/libxml \
			x11/gnome/libsecret
d60 1
a60 3
TEST_DEPENDS=	devel/check

MODGNOME_TOOLS += desktop-file-utils gobject-introspection gtk-update-icon-cache yelp
d70 10
a79 6
			--without-java
# XXX: Re-enable when libgda can handle vala 0.20.0
# and add 'vala' back to MODGNOME_TOOLS; LIB_DEPENDS on libgee
CONFIGURE_ARGS+=	--disable-vala-extensions \
			--disable-gdaui-vala \
			--disable-vala
d81 2
a82 4
MODGNOME_LDFLAGS=	-lm
CONFIGURE_ENV=		LIBCRYPTO_CFLAGS="-I/usr/include/openssl" \
			LIBCRYPTO_LIBS="-lcrypto" \
			MYSQL_CONFIG="${LOCALBASE}/bin/mysql_config"
d86 5
a90 1
WANTLIB-main += ${WANTLIB} c gcrypt gpg-error ncurses sqlite3
d94 2
a95 1
LIB_DEPENDS-main=	${LIB_DEPENDS} \
d98 2
a99 1
			graphics/gdk-pixbuf2
d101 1
a101 7
.if ${FLAVOR:Mno_ui}
CONFIGURE_ARGS+=	--without-ui
.else
MULTI_PACKAGES+=	-ui
CONFIGURE_ARGS+=	--with-ui
# XXX graphviz depends on deprecated libgnomeui
CONFIGURE_ARGS+=	--with-graphviz=no
d110 2
a111 1
LIB_DEPENDS-ui=		${LIB_DEPENDS} \
a117 1
.endif
d119 5
a123 8
.if ${FLAVOR:Mno_mysql}
CONFIGURE_ARGS+=	--without-mysql
.else
RUN_DEPENDS-mysql=	${MODGETTEXT_RUN_DEPENDS}
MULTI_PACKAGES+=	-mysql
WANTLIB-mysql=		${WANTLIB} crypto ssl gda-${GDA_MAJOR} \
			mysqlclient stdc++
LIB_DEPENDS-mysql=	${LIB_DEPENDS} \
a125 2
CONFIGURE_ARGS+=	--with-mysql="${LOCALBASE}"
.endif
d127 7
a133 7
.if ${FLAVOR:Mno_pgsql}
CONFIGURE_ARGS+=	--without-postgres
.else
RUN_DEPENDS-pgsql=	${MODGETTEXT_RUN_DEPENDS}
MULTI_PACKAGES+=	-pgsql
WANTLIB-pgsql=		${WANTLIB} gda-${GDA_MAJOR} pq crypto ssl
LIB_DEPENDS-pgsql=	${LIB_DEPENDS} \
a135 2
CONFIGURE_ARGS+=	--with-postgres="${LOCALBASE}"
.endif
d137 7
a143 6
# ldap (no PSEUDO_FLAVORS, see above)
RUN_DEPENDS-ldap=	${MODGETTEXT_RUN_DEPENDS}
MULTI_PACKAGES+=	-ldap
WANTLIB-ldap=		${WANTLIB} crypto gda-${GDA_MAJOR} lber-2.4 \
			ldap-2.4 sasl2 ssl
LIB_DEPENDS-ldap=	${LIB_DEPENDS} \
d146 2
a147 1
CONFIGURE_ARGS+=	--with-ldap
d157 1
a157 1
	rm ${PREFIX}/lib/libgda-${GDA_MAJOR}/{plugins,providers}/*.{a,la}
@


1.99
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/03/27 08:16:17 ajacoutot Exp $
d23 5
a27 5
REVISION-main=		4
REVISION-ldap=		3
REVISION-mysql=		3
REVISION-pgsql=		4
REVISION-ui=		3
d47 1
a47 1
WANTLIB += m pcre z gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
d90 1
a90 1
CONFIGURE_ENV=		LIBCRYPTO_CFLAGS="-I/usr/include/ssl" \
d118 1
a118 1
WANTLIB-ui += pthread-stubs xcb xcb-render xcb-shm
d135 1
a135 1
			mysqlclient
@


1.98
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2014/12/27 15:57:41 rpe Exp $
d23 5
a27 5
REVISION-main=		3
REVISION-ldap=		2
REVISION-mysql=		2
REVISION-pgsql=		3
REVISION-ui=		2
@


1.97
log
@Fix typo in description.

OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2014/09/13 18:09:22 brad Exp $
d23 5
a27 5
REVISION-main=		2
REVISION-ldap=		1
REVISION-mysql=		1
REVISION-pgsql=		2
REVISION-ui=		1
@


1.96
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2014/04/21 13:24:30 ajacoutot Exp $
d8 1
a8 1
COMMENT-pgsql=		PostreSQL backend for libgda
d26 1
a26 1
REVISION-pgsql=		1
@


1.95
log
@Sync wantlib after kerberos removal from openldap and postgresql.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/04/02 09:36:13 jasper Exp $
d25 1
a25 1
REVISION-mysql=		0
d138 1
a138 1
			databases/mysql
@


1.94
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/04/01 18:06:31 jasper Exp $
d24 1
a24 1
REVISION-ldap=		0
d26 1
a26 1
REVISION-pgsql=		0
d147 1
a147 2
WANTLIB-pgsql=		${WANTLIB} gda-${GDA_MAJOR} pq com_err crypto ssl \
			asn1 heimbase krb5 roken wind
d157 2
a158 3
WANTLIB-ldap=		${WANTLIB} crypto gda-${GDA_MAJOR} gssapi krb5 lber-2.4 \
			ldap-2.4 sasl2 ssl asn1 com_err heimbase \
			roken wind
@


1.93
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2014/04/01 17:03:15 jasper Exp $
d72 1
a72 1
MODGNOME_TOOLS += 	gobject-introspection yelp   desktop-file-utils  gtk-update-icon-cache
@


1.92
log
@move more bits and bobs into MODGNOME_TOOLS to make it more clear which
tools are actually used.

This commit replaces
MODGNOME_DESKTOP_FILE with MODGNOME_TOOLS += desktop-file-utils
MODGNOME_MIME_FILE with MODGNOME_TOOLS += shared-mime-info
MODGNOME_ICON_CACHE with MODGNOME_TOOLS += gtk-update-icon-cache

(some prettyfication will follow shortly)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2014/04/01 15:31:47 jasper Exp $
a52 3
MODGNOME_TOOLS +=	desktop-file-utils
MODGNOME_TOOLS +=	gtk-update-icon-cache

d72 1
a72 1
MODGNOME_TOOLS= 	gobject-introspection yelp
@


1.91
log
@start to make MODGNOME_TOOLS resemble the name of the tools actually used.
rename 'gi' to 'gobject-introspection'.

discussed with aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/04/01 13:21:46 ajacoutot Exp $
d53 2
a54 2
MODGNOME_DESKTOP_FILE=	Yes
MODGNOME_ICON_CACHE=	Yes
@


1.90
log
@In x11/gnome ports we use disable-static inconsistently, usually to get
rid of static module archives; but since we end up manually removing the
libtool la files anyway, just don't bother setting up the tag.
part 2/2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/03/28 09:55:14 ajacoutot Exp $
d75 1
a75 1
MODGNOME_TOOLS= 	gi yelp
@


1.89
log
@devel/iso-codes is needed for -ui not for -main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2014/03/09 22:18:08 ajacoutot Exp $
d23 5
a27 2
REVISION-main=		1
REVISION-ui=		0
d77 1
a77 3
LIBTOOL_FLAGS=		--tag=disable-static
CONFIGURE_ARGS+=	--disable-static \
			--enable-system-sqlite \
d177 1
a177 1
	rm ${PREFIX}/lib/libgda-${GDA_MAJOR}/{plugins,providers}/*.la
@


1.88
log
@Better libdb detection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/12/24 08:18:46 ajacoutot Exp $
d23 2
a24 1
REVISION-main=		0
d101 1
a101 2
RUN_DEPENDS-main=	${MODGETTEXT_RUN_DEPENDS} \
			devel/iso-codes
d127 2
@


1.87
log
@Update to libgda-5.2.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/11/17 17:54:09 ajacoutot Exp $
d23 2
a75 1
			--enable-gda-gi \
d79 1
a79 1
			--with-bdb="${LOCALBASE}" \
a89 1
MODGNOME_CPPFLAGS=	-I${LOCALBASE}/include/db4/
d166 6
a171 5
# XXX sync LIBdb_VERSION with databases/db/v4
LIBdb_VERSION=	5.0
SUBST_VARS+=	LIBdb_VERSION
pre-configure:
	${SUBST_CMD} ${WRKSRC}/configure
@


1.86
log
@Update to libgda-5.2.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2013/11/16 15:22:16 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.2.1
@


1.85
log
@Update to libgda-5.2.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2013/10/26 08:02:57 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.2.0
@


1.84
log
@Fix dependencies and bump after the recent libsoup -gnome => -main merge.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2013/10/16 10:26:20 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.1.2
a21 6

REVISION-main=		5
REVISION-mysql=		2
REVISION-ui=		3
REVISION-ldap=		1
REVISION-pgsql=		1
@


1.83
log
@Get rid of MODGNOME_RUN_DEPENDS_yelp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2013/09/27 07:06:18 ajacoutot Exp $
d23 1
a23 1
REVISION-main=		4
@


1.82
log
@Renmove outdated comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/07/19 11:59:53 jasper Exp $
d23 1
a23 1
REVISION-main=		3
d25 1
a25 1
REVISION-ui=		2
a106 1
			${MODGNOME_RUN_DEPENDS_yelp} \
@


1.81
log
@remove a glade file from the -main PLIST, it's already in -ui (where it belongs)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/06/20 06:54:37 ajacoutot Exp $
a13 2
# NOTE: when GDA_MAJOR changes, increment GDA_MAJOR accordingly and bump:
# x11/gnome/libgdamm
d15 1
a54 2

SUBST_VARS=		GDA_MAJOR
@


1.80
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/06/18 16:47:56 ajacoutot Exp $
d24 1
a24 1
REVISION-main=		2
@


1.79
log
@Set PORTHOME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/06/17 19:28:37 ajacoutot Exp $
d24 5
a28 5
REVISION-main=		1
REVISION-mysql=		1
REVISION-ui=		1
REVISION-ldap=		0
REVISION-pgsql=		0
d158 1
a158 1
			asn1 heimbase hx509 krb5 roken wind
d169 1
a169 1
			ldap-2.4 sasl2 ssl asn1 com_err heimbase heimntlm hx509 \
@


1.78
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/06/12 20:36:34 brad Exp $
d58 3
@


1.77
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2013/05/31 15:35:06 ajacoutot Exp $
d27 2
d154 2
a155 1
WANTLIB-pgsql=		${WANTLIB} gda-${GDA_MAJOR} pq com_err crypto ssl
d166 2
a167 1
			ldap-2.4 sasl2 ssl asn1 com_err
@


1.76
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/05/25 00:33:10 brad Exp $
d25 1
a25 1
REVISION-mysql=		0
d143 1
a143 1
			databases/mariadb
@


1.75
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2013/04/16 13:17:01 ajacoutot Exp $
d26 1
a26 1
REVISION-ui=		0
d125 2
a126 2
WANTLIB-ui += pthread-stubs xcb xcb-render xcb-shm icuuc
WANTLIB-ui += ICE SM atk-bridge-2.0 atspi harfbuzz icudata icule dbus-1
@


1.74
log
@goi -> gi (gnome MODULE change).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2013/03/29 17:31:41 ajacoutot Exp $
d25 1
d143 1
a143 1
			databases/mysql
@


1.73
log
@Fix dependencies after vala got disabled.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/03/28 20:03:29 jasper Exp $
d72 1
a72 1
MODGNOME_TOOLS= 	goi yelp
@


1.72
log
@libgdatadatadata^Wlibgdadata should've been removed in the previous commit.

spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/03/28 19:34:29 jasper Exp $
d24 1
a24 1
REVISION-main=		0
d87 1
a87 1
# and add 'vala' back to MODGNOME_TOOLS
d100 1
a100 1
WANTLIB-main += ${WANTLIB} c gcrypt gpg-error ncurses gee-0.8
a106 1
			devel/libgee \
@


1.71
log
@- disable vala for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/03/16 21:56:37 ajacoutot Exp $
a37 1
SHARED_LIBS +=  gdadata-5.0               0.0 # 0.0
@


1.70
log
@Update to libgda-5.1.2.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.69 2013/03/11 11:46:11 espie Exp $

# XXX add vala to MODGNOME_TOOLS on update
d24 3
d73 1
a73 1
MODGNOME_TOOLS= 	goi vala yelp
d87 6
@


1.69
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/02/09 14:49:53 sthen Exp $
d14 1
a14 1
GNOME_VERSION=		5.1.1
a25 6
REVISION-main=		0
REVISION-ldap=		0
REVISION-mysql=		0
REVISION-pgsql=		0
REVISION-ui=		0

d37 1
d67 2
a68 1
BUILD_DEPENDS=		databases/db/v4
d72 1
a72 1
MODGNOME_TOOLS= 	goi yelp
a74 1
USE_GROFF =		Yes
d77 4
d85 1
a85 1
			--with-java=no
d94 1
a94 1
WANTLIB-main += ${WANTLIB} c gcrypt gpg-error ncurses
d98 2
a99 1
			${MODGNOME_RUN_DEPENDS_yelp}
d101 1
d114 3
a116 3
WANTLIB-ui += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB-ui += Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0 c cairo
WANTLIB-ui += cairo-gobject drm expat fontconfig freetype gda-${GDA_MAJOR}
d119 1
a119 1
WANTLIB-ui += pthread-stubs xcb xcb-render xcb-shm stdc++ icuuc
d170 1
a170 1
	rm ${PREFIX}/lib/libgda-${GDA_MAJOR}/providers/*.la
@


1.68
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/10/01 12:49:19 ajacoutot Exp $
a48 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d74 1
a74 1
REGRESS_DEPENDS=	devel/check
@


1.67
log
@Sync dependencies after the move from libgnome-keyring to libsecret.

prodded by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2012/09/21 13:23:06 ajacoutot Exp $
d108 1
a108 1
.if ${FLAVOR:L:Mno_ui}
d130 1
a130 1
.if ${FLAVOR:L:Mno_mysql}
d143 1
a143 1
.if ${FLAVOR:L:Mno_pgsql}
@


1.66
log
@Update to libgda-5.1.1.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/09/01 14:36:59 ajacoutot Exp $
d26 6
d54 1
a54 2
WANTLIB += gthread-2.0 xml2 dbus-1 gcrypt gnome-keyring
WANTLIB += gpg-error ffi pthread
d72 2
a73 1
			textproc/libxml
d106 1
a106 3
			x11/gnome/libgnome-keyring \
			graphics/gdk-pixbuf2 \
			x11/dbus
d122 1
a122 1
WANTLIB-ui += ICE SM atk-bridge-2.0 atspi harfbuzz icudata icule
d124 2
d127 1
a127 2
			x11/gtksourceview3 \
			graphics/goocanvas2
d160 2
a161 1
LIB_DEPENDS-ldap=	x11/gnome/libgda \
@


1.65
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.64 2012/06/15 08:30:20 ajacoutot Exp $
d14 1
a14 1
GNOME_VERSION=		5.0.3
d18 1
a18 1
GDA_MAJOR=		${GNOME_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}
a25 6
REVISION-main =		1
REVISION-ui=		4
REVISION-ldap =		1
REVISION-mysql =	1
REVISION-pgsql =	1

d33 4
a36 4
SHARED_LIBS +=  gda-5.0                   0.0 # 5.0
SHARED_LIBS +=  gda-report-5.0            0.0 # 5.0
SHARED_LIBS +=  gda-ui-5.0                0.0 # 5.0
SHARED_LIBS +=  gda-xslt-5.0              0.0 # 5.0
d49 1
a49 1
WANTLIB += gpg-error ffi
a72 2
# XXX check if still necessary when updating to >5.0.3:
# vala should be added but this tarball misses a few needed files
d92 1
a92 1
WANTLIB-main += ${WANTLIB} c gcrypt gpg-error ncurses pthread
d114 1
a114 1
WANTLIB-ui += cairo-gobject drm expat fontconfig freetype gda-5.0
d117 2
a118 1
WANTLIB-ui += pthread pthread-stubs xcb xcb-render xcb-shm stdc++
d164 3
@


1.64
log
@Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2012/04/25 06:23:16 espie Exp $
d24 5
a28 2
REVISION =		0
REVISION-ui=		3
@


1.63
log
@fix broken lookup of sqlite includes, okay aja.
bump REVISIONs just to be sure, since we were building stuff in a very
weird and possibly bad way.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/04/23 17:15:19 espie Exp $
d25 1
a25 1
REVISION-ui=		2
@


1.62
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2012/02/18 18:40:18 ajacoutot Exp $
d24 2
a25 1
REVISION-ui=		1
@


1.61
log
@Extend+sync comment about VERSION sync.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2012/01/31 07:58:19 ajacoutot Exp $
d69 1
a69 2
BUILD_DEPENDS=		databases/db/v4 \
			databases/sqlite3
@


1.60
log
@Remove conflicting file from -ui... grr @@ make plist.

reported by naddy@@
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/01/25 14:40:36 ajacoutot Exp $
d14 3
a16 3
# NOTE: when major version changes, increment GDA_MAJOR accordingly and
# bump "x11/gnome/libgdamm"
GDA_MAJOR=		5.0
@


1.59
log
@Missing files, thanks to sten@@ update plist script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2012/01/25 13:26:05 ajacoutot Exp $
d24 1
a24 1
REVISION-ui=		0
@


1.58
log
@Update to libgda-5.0.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2012/01/25 11:30:41 ajacoutot Exp $
d23 2
@


1.57
log
@Properly find and load libdb.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/12/05 12:32:34 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.0.2
a23 3
REVISION-main=		1
REVISION-ui=		0

d72 3
a74 1
MODGNOME_TOOLS= 	goi yelp vala
@


1.56
log
@I bumped the wrong subpackage... spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2011/12/03 22:17:16 ajacoutot Exp $
d24 1
a24 1
REVISION-main=		0
d159 6
@


1.55
log
@Use MODGNOME_ICON_CACHE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/11/21 07:38:23 ajacoutot Exp $
d25 1
@


1.54
log
@Bugfix update to libgda-5.0.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2011/11/07 07:53:28 ajacoutot Exp $
d24 2
d54 2
a55 1
MODGNOME_DESKTOP_FILE=		Yes
@


1.53
log
@Update to libgda-5.0.1.
Enable vala bindings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2011/10/26 22:31:27 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		5.0.1
@


1.52
log
@Finally update to libgda-5.0.0 stable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2011/10/11 05:10:25 espie Exp $
d12 1
a12 1
GNOME_VERSION=		5.0.0
d71 1
a71 1
MODGNOME_TOOLS= 	goi yelp
@


1.51
log
@REALLY bump the subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2011/09/29 13:35:41 jasper Exp $
d12 1
a12 1
GNOME_VERSION=		4.99.4
a23 4
REVISION =		0
REVISION-main = 	2
REVISION-ui =		1

d47 1
a47 1
WANTLIB += gpg-error
d115 1
a115 1
WANTLIB-ui += pthread pthread-stubs xcb xcb-render xcb-shm
@


1.50
log
@- fix GI typelib file location
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/09/28 09:47:47 jasper Exp $
d26 1
a26 1
REVISION-ui =		0
@


1.49
log
@sync after recent gnome.port.mk CONFIGURE_ENV changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/09/20 21:10:00 jasper Exp $
d25 2
a26 1
REVISION-main = 	1
@


1.48
log
@CONFIGURE_SHARED is now implied by gnome.port.mk, so no need to make it explicit anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/09/20 20:52:46 jasper Exp $
d85 3
a87 3
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/db4/" \
			LDFLAGS="-L${LOCALBASE}/lib -lm" \
			LIBCRYPTO_CFLAGS="-I/usr/include/ssl" \
@


1.47
log
@- switch to MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/09/19 07:44:58 ajacoutot Exp $
d78 1
a78 2
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--disable-static \
@


1.46
log
@DESKTOP_FILES => MODGNOME_DESKTOP_FILE, like it should always have been.

discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/09/16 12:29:14 espie Exp $
d25 1
a54 1
MODGNOME_HELP_FILES=	Yes
d70 1
a70 2
			databases/sqlite3 \
			devel/gobject-introspection
d74 2
a79 2
			--disable-gtk-doc \
			--enable-introspection \
d97 2
a98 1
RUN_DEPENDS-main=	${MODGETTEXT_RUN_DEPENDS}
@


1.45
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/09/12 15:31:15 ajacoutot Exp $
d55 1
a55 1
DESKTOP_FILES=		Yes
@


1.44
log
@Update to libgda-4.99.4.
Remove useless mdb support.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/09/12 12:04:17 jasper Exp $
d23 2
@


1.43
log
@
switch to using .tar.xz by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/09/05 14:28:55 ajacoutot Exp $
a6 1
COMMENT-mdb=		MS Access MDB backend for libgda
d12 1
a12 1
GNOME_VERSION=		4.2.9
d16 1
a16 1
GDA_MAJOR=		4.0
a19 1
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}
a25 1
EPOCH-mdb=		0
d31 4
a34 4
SHARED_LIBS +=  gda-4.0               1.0        # 5.0
SHARED_LIBS +=  gda-report-4.0        1.0        # 5.0
SHARED_LIBS +=  gda-xslt-4.0          1.0	 # 5.0
SHARED_LIBS +=  gda-ui-4.0            0.0        # 5.0
a44 2
EXTRACT_SUFX=		.tar.bz2

d59 1
a59 1
PSEUDO_FLAVORS=		no_mdb no_mysql no_pgsql no_ui
d83 1
d94 1
a94 1
WANTLIB-main += readline soup-2.4 xslt crypto gdk_pixbuf-2.0
d109 9
a117 9
WANTLIB-ui += ${WANTLIB} c gcrypt gpg-error pthread gda-${GDA_MAJOR}
WANTLIB-ui += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB-ui += Xi Xinerama Xrandr Xrender atk-1.0 cairo dbus-1 dbus-glib-1
WANTLIB-ui += expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB-ui += gtk-x11-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB-ui += pixman-1 png pthread-stubs xcb xcb-render
WANTLIB-ui += gnome-keyring goocanvas graph gtksourceview-2.0
WANTLIB-ui += gvc ltdl pathplan unique-1.0 cdt gpg-error unique-1.0
WANTLIB-ui += GL Xxf86vm drm xcb-shm
d120 2
a121 17
			math/graphviz \
			x11/gtksourceview \
			graphics/goocanvas \
			devel/libunique
.endif


.if ${FLAVOR:L:Mno_mdb}
CONFIGURE_ARGS+=	--without-mdb
.else
RUN_DEPENDS-mdb=	${MODGETTEXT_RUN_DEPENDS}
MULTI_PACKAGES+=	-mdb
WANTLIB-mdb=		${WANTLIB} gda-${GDA_MAJOR} mdb
LIB_DEPENDS-mdb=	${LIB_DEPENDS} \
			x11/gnome/libgda \
			databases/mdbtools/snapshot
CONFIGURE_ARGS+=	--with-mdb="${LOCALBASE}"
d152 1
a152 1
WANTLIB-ldap=		${WANTLIB} crypto gda-4.0 gssapi krb5 lber-2.4 \
@


1.42
log
@Bugfix update to libgda-4.2.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/07/29 20:42:26 jasper Exp $
d47 2
@


1.41
log
@- fix some more fallout from the recent @@comment changes

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/07/26 15:36:26 ajacoutot Exp $
d13 1
a13 1
GNOME_VERSION=		4.2.8
a25 4
REVISION-main=		1
REVISION-ui=		2
REVISION-pgsql=		0

d95 1
a95 1
WANTLIB-main += ${WANTLIB} c gcrypt gpg-error ncurses pthread png
d170 1
a170 1
			ldap-2.4 sasl2 ssl
@


1.40
log
@Don't install libtool files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/07/12 15:32:16 ajacoutot Exp $
d27 1
a27 1
REVISION-ui=		1
@


1.39
log
@Fix CONFIGURE_ARGS for the no_pgsql PSEUDO_FLAVOR.
Remove the no_ldap PSEUDO_FLAVOR because we need the headers installed
in -main since they are referenced by other headers.
Move some files from -main to -ui so that we can actually build this
will all no_* FLAVORS set.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/06/10 20:01:02 naddy Exp $
d27 2
a28 1
REVISION-ui=		0
@


1.38
log
@re-add EPOCH-ldap; EPOCH can never go backwards and we already were
there two years ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/06/02 15:54:10 ajacoutot Exp $
d26 2
a27 1
REVISION-main=		0
d63 3
a65 1
PSEUDO_FLAVORS=		no_ldap no_mdb no_mysql no_pgsql no_ui
d158 1
a158 1
CONFIGURE_ARGS+=	--without-postgresql
d169 1
a169 3
.if ${FLAVOR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-ldap
.else
a176 1
.endif
@


1.37
log
@Unbreak build of dependent ports by moving includes from -ldap to -main.

breakage reported by Nigel Taylor.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/06/02 07:16:32 ajacoutot Exp $
a26 1
REVISION-ldap=		0
d29 1
@


1.36
log
@Bugfix update to libgda-4.2.8.
Enable the new (read-only for now) LDAP backend.

prodded by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/05/05 15:51:03 ajacoutot Exp $
d25 3
@


1.35
log
@Bugfix update to libgda-4.2.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/04/20 16:43:34 ajacoutot Exp $
d6 1
a6 1
COMMENT-ui=		GTK+ extension and tools for libgda
d10 1
d13 1
a13 1
GNOME_VERSION=		4.2.7
d20 6
a26 2
PKGNAME-ui=		libgda-ui-${GNOME_VERSION}
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}
a27 1
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}
a28 1
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}
d48 2
a49 2
WANTLIB += gthread-2.0 xml2 dbus-1 gcrypt
WANTLIB += gnome-keyring gpg-error
d59 1
a59 1
PSEUDO_FLAVORS=		no_ui no_mdb no_mysql no_pgsql
d79 1
d163 11
a173 1
CONFIGURE_ARGS+=	--enable-system-sqlite
@


1.34
log
@Update to libgda-4.2.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/04/07 09:28:54 ajacoutot Exp $
d12 1
a12 1
GNOME_VERSION=		4.2.6
@


1.33
log
@Put the Gdaui files into the -ui subpackage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/04/07 08:55:25 jasper Exp $
d12 1
a12 1
GNOME_VERSION=		4.2.5
a27 3
REVISION-main=		0
REVISION-ui=		0

d78 2
a79 1
			--without-oracle
d89 1
a89 1
WANTLIB-main += readline tasn1 soup-2.4 gnutls xslt crypto gdk_pixbuf-2.0
@


1.32
log
@Add introspection support (needed for on-going GNOME 3 work).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/03/07 19:30:33 ajacoutot Exp $
d27 3
@


1.31
log
@Maintenance update to libgda-4.2.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/01/11 10:59:25 ajacoutot Exp $
d19 1
a19 1
EPOCH-main=		1
d65 2
a66 1
			databases/sqlite3
d75 1
a75 1
			--disable-introspection \
@


1.30
log
@Bugfix update to libgda-4.2.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/27 17:13:42 jasper Exp $
d12 1
a12 1
GNOME_VERSION=		4.2.3
d94 2
a95 1
			graphics/gdk-pixbuf2
@


1.29
log
@- update libgda to 4.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/11/26 14:50:10 espie Exp $
d12 1
a12 1
GNOME_VERSION=		4.2.2
a17 6
#REVISION-main=		0
#REVISION-ui=		0
#REVISION-mdb=		0
#REVISION-mysql= 	0
#REVISION-pgsql= 	0

d86 2
a87 2
WANTLIB-main += ${WANTLIB} c gcrypt gpg-error ncurses pthread
WANTLIB-main += readline tasn1 soup-2.4 gnutls xslt crypto
d93 2
a94 1
			x11/gnome/libgnome-keyring
@


1.28
log
@since db/v4 has db->=4,<5 as default, no need to specify it explicitly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/11/18 16:44:33 jasper Exp $
d12 1
a12 1
GNOME_VERSION=		4.2.1
@


1.27
log
@- update libgda to 4.2.1
- remove the empty subpacakges for ldap and odbc now that upstream
  decided not to rework them, but just removed the code instead.
- add @@pkgpath markers accordingly
- new DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/10/19 08:13:57 espie Exp $
d70 1
a70 1
BUILD_DEPENDS=		db->=4,<5:databases/db/v4 \
@


1.26
log
@USE_GROFF=Yes
@
text
@d1 1
a1 7
# $OpenBSD: Makefile,v 1.25 2010/10/11 08:19:20 jasper Exp $

#
# XXX:
# The -ldap and -odbc packages are empty. This is because upstream
# is rewriting them. When they get back, updates will be easier
# with keeping the subpackages for now.
a6 1
COMMENT-ldap=		LDAP backend for libgda
a9 1
COMMENT-odbc=		ODBC backend for libgda
d12 1
a12 1
GNOME_VERSION=		4.2.0
d18 5
a22 7
REVISION-main=		0
REVISION-ui=		1
REVISION-ldap=		0
REVISION-mdb=		0
REVISION-mysql= 	0
REVISION-pgsql= 	0
REVISION-odbc=		0
a26 2
#PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}
#EPOCH-ldap=		0
a32 2
#PKGNAME-odbc=		libgda-odbc-${GNOME_VERSION}
#EPOCH-odbc=		0
a61 1
#PSEUDO_FLAVORS=	no_ui no_ldap no_mdb no_mysql no_odbc no_pgsql
d67 2
a68 2
LIB_DEPENDS=		::devel/glib2 \
			::textproc/libxml
d70 2
a71 2
BUILD_DEPENDS=		:db->=4,<5:databases/db/v4 \
			::databases/sqlite3
d73 1
a73 1
REGRESS_DEPENDS=	::devel/check
d76 1
a76 1
USE_GROFF =	Yes
d83 1
a83 4
			--without-ibmdb2 \
			--without-oracle \
			--without-sybase \
			--without-xbase
d85 4
a88 1
			LDFLAGS="-L${LOCALBASE}/lib -lm"
d93 1
a93 1
WANTLIB-main += readline tasn1 soup-2.4 gnutls xslt
d97 3
a99 3
			::devel/libsoup \
			::textproc/libxslt \
			::x11/gnome/libgnome-keyring
d111 1
a111 1
WANTLIB-ui += pixman-1 png pthread-stubs xcb xcb-render xcb-render-util
d114 1
d116 5
a120 5
			::x11/gnome/libgda \
			::math/graphviz \
			::x11/gtksourceview \
			::graphics/goocanvas \
			::devel/libunique
a123 12
#.if ${FLAVOR:L:Mno_ldap}
CONFIGURE_ARGS+=	--without-ldap
#.else
#MULTI_PACKAGES+=	-ldap
#WANTLIB-ldap=		${WANTLIB} asn1 com_err crypto gssapi krb5 sasl2 ssl gda-3.0 ,gdasql-3.0
#WANTLIB-ldap=		lber ldap
#LIB_DEPENDS-ldap=	${LIB_DEPENDS} \
#			::x11/gnome/libgda \
#			::databases/openldap
#CONFIGURE_ARGS+=	--with-ldap="${LOCALBASE}"
#.endif

d131 2
a132 2
			::x11/gnome/libgda \
			::databases/mdbtools/snapshot
d144 2
a145 2
			::x11/gnome/libgda \
			::databases/mysql
d156 2
a157 2
			::x11/gnome/libgda \
			::databases/postgresql
d161 1
a161 15
#.if ${FLAVOR:L:Mno_odbc}
CONFIGURE_ARGS+=	--without-odbc
#.else
#RUN_DEPENDS-odbc=	${MODGETTEXT_RUN_DEPENDS}
#MULTI_PACKAGES+=	-odbc
#WANTLIB-odbc=		iodbc gda-3.0 gdasql-3.0
#LIB_DEPENDS-odbc=	${LIB_DEPENDS} \
#			::databases/iodbc \
#			::x11/gnome/libgda
#CONFIGURE_ARGS+=	--with-odbc="${LOCALBASE}"
#.endif

# abuses freetds API
CONFIGURE_ARGS+=	--without-tds \
			--enable-system-sqlite
@


1.25
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/09/30 13:10:09 jasper Exp $
d91 1
@


1.24
log
@- fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/09/27 12:12:41 ajacoutot Exp $
d27 1
a27 1
REVISION-ui=		0
d124 1
a124 1
WANTLIB-ui += glitz gtk-x11-2.0 pango-1.0 pangocairo-1.0 pangoft2-1.0
@


1.23
log
@Major update to libgda-4.2.0.
Add a new libgda-ui subpackage: GTK+ extension and tools for libgda
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/08/27 10:50:51 ajacoutot Exp $
d26 8
d65 1
a65 1
WANTLIB += gthread-2.0 xml2 dbus-1 dbus-glib-1 eggdbus-1 gcrypt
d126 1
a126 1
WANTLIB-ui += eggdbus-1 gnome-keyring goocanvas graph gtksourceview-2.0
@


1.22
log
@Update to libgda-4.0.11.
Despites jasper@@'s best efforts, no I will not move this to plan9
CATEGORIES!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/07/25 08:18:32 ajacoutot Exp $
d12 1
d20 1
a20 1
GNOME_VERSION=		4.0.11
d28 1
d42 4
a45 3
SHARED_LIBS +=  gda-4.0               0.0        # .4.0
SHARED_LIBS +=  gda-report-4.0        0.0        # .4.0
SHARED_LIBS +=  gda-xslt-4.0             0.0     # .4.0
d56 3
a58 5
WANTLIB=		m pcre z gio-2.0 glib-2.0 gmodule-2.0 \
			gobject-2.0 gthread-2.0 xml2

WANTLIB-main=		${WANTLIB} c gcrypt gpg-error ncurses pthread
WANTLIB-main+=		readline tasn1 soup-2.4 db sqlite3 gnutls xslt
d63 3
d68 2
a69 2
#PSEUDO_FLAVORS=	no_ldap no_mdb no_mysql no_odbc no_pgsql
PSEUDO_FLAVORS=		no_mdb no_mysql no_pgsql
a73 7
LIB_DEPENDS-main=	${LIB_DEPENDS} \
			::devel/libsoup \
			:db->=4,<5:databases/db/v4 \
			::databases/sqlite3 \
			::security/gnutls \
			::textproc/libxslt

d77 3
d86 1
d98 31
d133 2
a134 1
#WANTLIB-ldap=		${WANTLIB} asn1 com_err crypto gssapi krb5 sasl2 ssl
d136 2
a137 2
#			gda-3.0,gdasql-3.0::x11/gnome/libgda \
#			lber.>=9,ldap::databases/openldap
d144 1
d146 1
a146 1
WANTLIB-mdb=		${WANTLIB} sqlite3 gda-${GDA_MAJOR} mdb
d156 1
d158 1
a158 1
WANTLIB-mysql=		${WANTLIB} crypto sqlite3 ssl gda-${GDA_MAJOR} \
d169 1
d171 1
a171 1
WANTLIB-pgsql=		${WANTLIB} sqlite3 gda-${GDA_MAJOR} pq
d181 1
d183 1
a183 1
#WANTLIB-odbc=
d185 2
a186 2
#			iodbc::databases/iodbc \
#			gda-3.0,gdasql-3.0::x11/gnome/libgda
@


1.21
log
@Add a reminder comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/07/25 08:15:32 ajacoutot Exp $
d19 1
a19 1
GNOME_VERSION=		4.0.9
a36 5

REVISION-main=		0
REVISION-mdb=		0
REVISION-mysql=		0
REVISION-pgsql=		0
@


1.20
log
@Switch to new DEPENDS/WANTLIB/REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/07/18 18:27:13 kili Exp $
d21 4
a43 2

GDA_MAJOR=		4.0
@


1.19
log
@Zap the `v0' from PKGNAME-main to get rid of the `v0v0'.
Bump EPOCH (else updates won't work).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/07/13 20:39:03 ajacoutot Exp $
d34 5
d56 2
a57 1
WANTLIB=		m pcre z
d60 1
a60 1
WANTLIB-main+=		readline tasn1
d74 5
a78 5
			soup-2.4::devel/libsoup \
			db:db->=4,<5:databases/db/v4 \
			sqlite3::databases/sqlite3 \
			gnutls::security/gnutls \
			xslt::textproc/libxslt
d80 2
a81 2
LIB_DEPENDS=		gio-2.0,glib-2.0,gmodule-2.0,gobject-2.0,gthread-2.0::devel/glib2 \
			xml2.>=10::textproc/libxml
d115 1
a115 1
WANTLIB-mdb=		${WANTLIB} sqlite3
d117 2
a118 2
			gda-${GDA_MAJOR}::x11/gnome/libgda \
			mdb.>=1::databases/mdbtools/snapshot
d126 2
a127 1
WANTLIB-mysql=		${WANTLIB} crypto sqlite3 ssl
d129 2
a130 2
			gda-${GDA_MAJOR}::x11/gnome/libgda \
			mysqlclient::databases/mysql
d138 1
a138 1
WANTLIB-pgsql=		${WANTLIB} sqlite3
d140 2
a141 2
			gda-${GDA_MAJOR}::x11/gnome/libgda \
			pq::databases/postgresql
@


1.18
log
@Use EPOCH.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/06/14 05:45:32 ajacoutot Exp $
d21 2
a22 2
PKGNAME-main=		${DISTNAME}v0
EPOCH-main=		0
@


1.17
log
@Bugfix update to libgda-4.0.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/03/21 09:54:50 ajacoutot Exp $
d22 11
a32 5
#PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}v0
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}v0
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}v0
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}v0
#PKGNAME-odbc=		libgda-odbc-${GNOME_VERSION}v0
@


1.16
log
@Update to libgda-4.0.8.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/10/20 10:41:42 kili Exp $
d19 1
a19 1
GNOME_VERSION=		4.0.8
@


1.15
log
@Updates stop to work if you remove v* markers. Bring them back.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/10/15 00:27:18 ajacoutot Exp $
d19 1
a19 1
GNOME_VERSION=		4.0.5
@


1.14
log
@Fix dependency specs.
Don't build empty subpackages.
... will have to spank the kid again...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/10/14 23:30:43 jasper Exp $
d21 6
a26 6
PKGNAME-main=		${DISTNAME}p0
#PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p0
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p0
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p0
#PKGNAME-odbc=		libgda-odbc-${GNOME_VERSION}
@


1.13
log
@- update libgda to 4.0.5
* the ldap and odbc backends are being rewritten and weren't
enabled in this release. although they will be in the future again, so
don't remove the subpackages just yet

discussed with aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/08/01 14:14:24 sthen Exp $
d21 1
a21 1
PKGNAME-main=		${DISTNAME}
d23 3
a25 3
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}
d55 2
a56 1
PSEUDO_FLAVORS=		no_ldap no_mdb no_mysql no_pgsql
d88 1
a88 1
.if ${FLAVOR:L:Mno_ldap}
d90 2
a91 2
.else
MULTI_PACKAGES+=	-ldap
d96 2
a97 2
CONFIGURE_ARGS+=	--with-ldap="${LOCALBASE}"
.endif
d105 1
a105 1
			gda-3.0,gdasql-3.0::x11/gnome/libgda \
d116 1
a116 1
			gda-3.0,gdasql-3.0::x11/gnome/libgda \
d127 1
a127 1
			gda-3.0,gdasql-3.0::x11/gnome/libgda \
d132 1
a132 1
.if ${FLAVOR:L:Mno_odbc}
d134 2
a135 2
.else
MULTI_PACKAGES+=	-odbc
d140 2
a141 2
CONFIGURE_ARGS+=	--with-odbc="${LOCALBASE}"
.endif
@


1.12
log
@- remove -tds flavour which used internal FreeTDS api
- add -odbc flavour
@
text
@d1 7
a7 1
# $OpenBSD: Makefile,v 1.11 2009/03/23 07:31:09 jasper Exp $
d19 1
a19 1
GNOME_VERSION=		3.0.4
d21 6
a26 6
PKGNAME-main=		${DISTNAME}p2v0
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}p1v0
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p1v0
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p1v0
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p1v0
PKGNAME-odbc=		libgda-odbc-${GNOME_VERSION}
d30 1
a30 1
GDA_MAJOR=		3.0
d32 3
a34 3
SHARED_LIBS +=	gdasql-3.0           2.0      # .3.0
SHARED_LIBS +=	gda-3.0              2.0      # .3.0
SHARED_LIBS +=	gda-report-3.0       2.0      # .3.0
d45 1
a45 1
WANTLIB=	m pcre rpcsvc stdc++ z
d47 2
a48 1
WANTLIB-main=	${WANTLIB} c pthread
d61 1
d63 3
a65 1
			sqlite3::databases/sqlite3
d67 1
a67 2
LIB_DEPENDS=		fam::sysutils/fam \
			glib-2.0,gmodule-2.0,gobject-2.0,gthread-2.0::devel/glib2 \
d91 4
a94 4
WANTLIB-ldap=		${WANTLIB} asn1 com_err crypto gssapi krb5 sasl2 ssl
LIB_DEPENDS-ldap=	${LIB_DEPENDS} \
			gda-3.0,gdasql-3.0::x11/gnome/libgda \
			lber.>=9,ldap::databases/openldap
d102 1
a102 1
WANTLIB-mdb=		${WANTLIB}
d105 1
a105 1
			mdb.>=1,mdbsql::databases/mdbtools/snapshot
d113 1
a113 1
WANTLIB-mysql=		${WANTLIB} crypto ssl
d124 1
a124 1
WANTLIB-pgsql=		${WANTLIB}
d135 4
a138 4
WANTLIB-odbc=		${WANTLIB}
LIB_DEPENDS-odbc=	${LIB_DEPENDS} \
			iodbc::databases/iodbc \
			gda-3.0,gdasql-3.0::x11/gnome/libgda
d143 2
a144 1
CONFIGURE_ARGS+=	--without-tds
@


1.11
log
@- fix pkgspec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/02/11 15:47:50 jasper Exp $
d10 1
a10 1
COMMENT-tds=		FreeTDS backend for libgda
d20 1
a20 1
PKGNAME-tds=		libgda-tds-${GNOME_VERSION}p1v0
d48 1
a48 1
PSEUDO_FLAVORS=		no_ldap no_mdb no_mysql no_pgsql no_tds
a69 1
			--without-odbc \
d122 2
a123 2
.if ${FLAVOR:L:Mno_tds}
CONFIGURE_ARGS+=	--without-tds
d125 6
a130 6
MULTI_PACKAGES+=	-tds
WANTLIB-tds=		${WANTLIB}
LIB_DEPENDS-tds=	${LIB_DEPENDS} \
			gda-3.0,gdasql-3.0::x11/gnome/libgda \
			tds::databases/freetds
CONFIGURE_ARGS+=	--with-tds="${LOCALBASE}" 
d132 3
@


1.10
log
@- bah...missing '>' :(
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/02/11 15:33:52 jasper Exp $
d15 1
a15 1
PKGNAME-main=		${DISTNAME}p1v0
d54 1
a54 1
			db:db-4.*:databases/db/v4 \
@


1.9
log
@- add another tadpole as maintainer of this hobbit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/02/11 15:20:19 ajacoutot Exp $
d15 6
a20 6
PKGNAME-main=		${DISTNAME}p0v0
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}p0v0
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p0v0
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p0v0
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p0v0
PKGNAME-tds=		libgda-tds-${GNOME_VERSION}p0v0
@


1.8
log
@- use a stable version as the gnomedb API will change in the next major and
we do not want to use an in-between release
- fix a LIB_DEPENDS while here
- remove an XXX

"go for it!" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/02/05 09:50:31 jasper Exp $
d15 6
a20 6
PKGNAME-main=		${DISTNAME}v0
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}v0
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}v0
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}v0
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}v0
PKGNAME-tds=		libgda-tds-${GNOME_VERSION}v0
@


1.7
log
@- plug memory leak; from upstream svn rev. 3157.
- remove XXX that was resolved recently
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/01/31 22:13:37 jasper Exp $
d13 1
a13 1
GNOME_VERSION=		3.1.5
d15 6
a20 6
PKGNAME-main=		${DISTNAME}p4
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}p3
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p3
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p3
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p3
PKGNAME-tds=		libgda-tds-${GNOME_VERSION}p1
d26 3
a28 4
SHARED_LIBS +=	gdasql-3.0           1.0      # .3.0
SHARED_LIBS +=	gda-3.0              1.0      # .3.0
SHARED_LIBS +=	gda-report-3.0       1.0      # .3.0
SHARED_LIBS +=  gda-xslt-3.0         0.0      # .0.0
d39 1
a39 3
WANTLIB=	crypto m rpcsvc ssl stdc++ util z ORBit-2 dbus-1 \
		dbus-glib-1 fam gconf-2 glib-2.0 gmodule-2.0 \
		gobject-2.0 gpg-error gthread-2.0 pcre xml2
d41 1
a41 1
WANTLIB-main=	${WANTLIB} c curses pthread readline
a53 1
			xslt::textproc/libxslt \
d55 1
a55 1
			sqlite3::databases/sqlite
d57 3
a59 2
LIB_DEPENDS=		gcrypt::security/libgcrypt \
			gnomevfs-2::x11/gnome/vfs2
a78 3
# XXX configuration checks for freetds fail in mysterious ways
CONFIGURE_ARGS+=	--without-tds

d83 1
a83 1
WANTLIB-ldap=		${WANTLIB} asn1 com_err db gssapi krb5 sasl2 sqlite3
d94 1
a94 1
WANTLIB-mdb=		${WANTLIB} db sqlite3
d97 1
a97 1
			mdb.>=1::databases/mdbtools/snapshot
d105 1
a105 1
WANTLIB-mysql=		${WANTLIB} db sqlite3
d116 1
a116 1
WANTLIB-pgsql=		${WANTLIB} db sqlite3
d127 4
a130 4
WANTLIB-tds=		${WANTLIB} db sqlite3
LIB_DEPENDS-tds=        ${LIB_DEPENDS} \
                        gda-3.0,gdasql-3.0::x11/gnome/libgda \
                        tds::databases/freetds
@


1.6
log
@- use sqlite3 from ports, instead of the one shipped with libgda
- remove configure option that doesn't do anything
- regen PLIST

hint from simon@@ some time ago about private functions of sqlite3
feedback and ok ajacoutot@@
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.5 2009/01/23 18:13:25 jasper Exp $

# XXX: use system sqlite3
d15 1
a15 1
PKGNAME-main=		${DISTNAME}p3
@


1.5
log
@- do the correct db4-dance in LIB_DEPENDS

spotted by naddy@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/11/29 12:53:51 jasper Exp $
d17 6
a22 6
PKGNAME-main=		${DISTNAME}p2
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}p2
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p2
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p2
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p2
PKGNAME-tds=		libgda-tds-${GNOME_VERSION}p0
d60 2
a61 1
			db:db-4.*:databases/db/v4
a74 1
			--without-mSQL \
d91 1
a91 1
WANTLIB-ldap=		${WANTLIB} asn1 com_err db gssapi krb5 sasl2
d102 1
a102 1
WANTLIB-mdb=		${WANTLIB} db
d113 1
a113 1
WANTLIB-mysql=		${WANTLIB} db
d124 1
a124 1
WANTLIB-pgsql=		${WANTLIB} db
d135 1
a135 1
WANTLIB-tds=		${WANTLIB} db
@


1.4
log
@- add a -tds subpackage
- fix the postgresql configure option
- set SHARED_ONLY

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/11/22 23:53:47 ajacoutot Exp $
d17 6
a22 6
PKGNAME-main=		${DISTNAME}p1
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}p1
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p1
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p1
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p1
PKGNAME-tds=		libgda-tds-${GNOME_VERSION}
d60 1
a60 1
			db.>=5::databases/db/v4
@


1.3
log
@- when db4 is installed it will be picked whatever option we set, so
merge -db4 subpackage into -main (which makes sense anyway)
- fix WANTLIB and regen PLIST for all subpackages

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/11/21 18:35:31 jasper Exp $
d5 2
d12 1
d17 6
a22 5
PKGNAME-main=		${DISTNAME}p0
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}p0
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}p0
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}p0
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}p0
d53 1
a53 1
PSEUDO_FLAVORS=		no_ldap no_mdb no_mysql no_pgsql
d67 1
d69 1
d128 12
a139 1
CONFIGURE_ARGS+=	--with-postgresql="${LOCALBASE}"
@


1.2
log
@- update libgda to 3.1.5
- specify license version

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/08/21 10:27:24 jasper Exp $
a5 1
COMMENT-db4=		BerkeleyDB backend for libgda
d14 5
a18 6
PKGNAME-main=		${DISTNAME}
PKGNAME-db4=		libgda-db4-${GNOME_VERSION}
PKGNAME-ldap=		libgda-ldap-${GNOME_VERSION}
PKGNAME-mdb=		libgda-mdb-${GNOME_VERSION}
PKGNAME-mysql=		libgda-mysql-${GNOME_VERSION}
PKGNAME-pgsql=		libgda-pgsql-${GNOME_VERSION}
a28 1

d38 5
a42 3
WANTLIB=		crypto m pcre rpcsvc ssl stdc++ util z
WANTLIB-main=		${WANTLIB} curses c pthread gpg-error \
			readline xml2
d49 1
a49 1
PSEUDO_FLAVORS=		no_db4 no_ldap no_mdb no_mysql no_pgsql
d54 3
a56 1
LIB_DEPENDS-main=	xslt::textproc/libxslt
d65 1
a80 11
.if ${FLAVOR:L:Mno_db4}
CONFIGURE_ARGS+=	--without-bdb
.else
MULTI_PACKAGES+=	-db4
WANTLIB-db4=		${WANTLIB}
LIB_DEPENDS-db4=	${LIB_DEPENDS} \
			gda-3.0,gdasql-3.0::x11/gnome/libgda \
			db::databases/db/v4
CONFIGURE_ARGS+=	--with-bdb="${LOCALBASE}"
.endif

d85 1
a85 1
WANTLIB-ldap=		${WANTLIB} asn1 com_err crypto gssapi krb5 sasl2 ssl
d96 1
a96 1
WANTLIB-mdb=		${WANTLIB}
d99 1
a99 1
			mdb.>=1,mdbsql::databases/mdbtools/snapshot
d107 1
a107 1
WANTLIB-mysql=		${WANTLIB} crypto ssl
d118 1
a118 1
WANTLIB-pgsql=		${WANTLIB}
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
# $OpenBSD$
d13 1
a13 1
GNOME_VERSION=		3.0.4
d24 6
a29 1
GDA_MAJOR=		${GNOME_VERSION:R}
a30 3
SHARED_LIBS +=	gdasql-3.0           0.0      # .3.0
SHARED_LIBS +=	gda-3.0              0.0      # .3.0
SHARED_LIBS +=	gda-report-3.0       0.0      # .3.0
d34 1
a34 1
# library: LGPL
d41 3
a43 2
WANTLIB=		m pcre rpcsvc stdc++ z
WANTLIB-main=		${WANTLIB} c pthread
d55 4
a58 3
LIB_DEPENDS=		glib-2.0,gmodule-2.0,gobject-2.0,gthread-2.0::devel/glib2 \
			xml2::textproc/libxml \
			fam::sysutils/fam
d71 1
a71 1
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
@


1.1.1.1
log
@import libgda 3.0.4

GNOME Data Access (GDA) is an attempt to provide uniform access to
different kinds of data sources (databases, information servers, mail
spools, etc).  It is a complete architecture that provides all you need
to access your data.  It is defined by a set of CORBA interfaces as
generic as possible (but very powerful at the same time) so that any
kind of data source can be accessed through them.

most work done by ajacoutot@@, based on an initial port by me.
@
text
@@
