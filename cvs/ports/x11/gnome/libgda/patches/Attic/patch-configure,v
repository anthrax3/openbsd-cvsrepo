head	1.30;
access;
symbols
	OPENBSD_5_5:1.29.0.2
	OPENBSD_5_5_BASE:1.29
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.26.0.2
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.25.0.4
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.6.0.4
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.2
	OPENBSD_4_5_BASE:1.6
	jasper_20080821:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2014.03.09.22.18.08;	author ajacoutot;	state dead;
branches;
next	1.29;

1.29
date	2013.12.24.08.18.46;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2013.11.16.15.22.16;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.16.21.56.37;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2012.09.21.13.23.06;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2012.01.25.13.26.05;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2012.01.25.11.30.41;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2011.11.21.07.38.23;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2011.10.26.22.31.27;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.09.29.13.35.41;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2011.09.12.15.31.15;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.05.14.28.55;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.06.02.07.16.32;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.04.20.16.43.34;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.04.07.08.55.25;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2011.03.07.19.30.33;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.01.11.10.59.25;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.27.17.13.42;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.18.16.44.33;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2010.09.27.12.12.41;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2010.06.14.05.45.32;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.03.21.09.54.50;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.10.14.23.30.43;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2009.08.01.14.14.24;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.02.11.15.20.19;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.31.22.13.37;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.29.12.53.51;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.21.18.35.31;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2008.09.10.19.37.29;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2008.08.21.10.27.25;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.08.21.10.27.25;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.30
log
@Better libdb detection.
@
text
@$OpenBSD: patch-configure,v 1.29 2013/12/24 08:18:46 ajacoutot Exp $

Our libdb does not follow upstream naming (libdb.so.XX versus
libdb-5.0.so).

--- configure.orig	Mon Dec 23 13:40:08 2013
+++ configure	Tue Dec 24 09:08:12 2013
@@@@ -22050,9 +22050,9 @@@@ $as_echo_n "checking for Berkeley DB files in $d... " 
 		        db_libfile="$d/$bdb_loclibdir/libdb$sversion$bdb_libext"
         	        try_headers="db.h db$version/db.h db$sversion/db.h"
 		    else
-		        db_libfilename="libdb-$version$bdb_libext"
-        	        db_lib="-ldb-$version"
-		        db_libfile="$d/$bdb_loclibdir/libdb-$version$bdb_libext"
+		        db_libfilename="libdb$bdb_libext.${LIBdb_VERSION}"
+        	        db_lib="-ldb"
+		        db_libfile="$d/$bdb_loclibdir/libdb$bdb_libext.${LIBdb_VERSION}"
         	        try_headers="db.h db$version/db.h db$sversion/db.h"
     		    fi
 		fi
@


1.29
log
@Update to libgda-5.2.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.28 2013/11/16 15:22:16 ajacoutot Exp $
@


1.28
log
@Update to libgda-5.2.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.27 2013/03/16 21:56:37 ajacoutot Exp $
d6 3
a8 3
--- configure.orig	Mon Nov 11 18:41:12 2013
+++ configure	Sat Nov 16 15:24:40 2013
@@@@ -22047,9 +22047,9 @@@@ $as_echo_n "checking for Berkeley DB files in $d... " 
@


1.27
log
@Update to libgda-5.1.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.26 2012/09/21 13:23:06 ajacoutot Exp $
d6 3
a8 3
--- configure.orig	Fri Jan 25 08:57:56 2013
+++ configure	Sat Mar 16 21:15:00 2013
@@@@ -21803,9 +21803,9 @@@@ $as_echo_n "checking for Berkeley DB files in $d... " 
@


1.26
log
@Update to libgda-5.1.1.
ok jasper@@
@
text
@d1 1
a1 3
$OpenBSD: patch-configure,v 1.25 2012/01/25 13:26:05 ajacoutot Exp $

Don't do bash pattern substitutions.
d6 3
a8 15
--- configure.orig	Sat Aug 25 19:18:47 2012
+++ configure	Fri Sep 21 08:57:38 2012
@@@@ -20378,9 +20378,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
             INTROSPECTION_COMPILER=`$PKG_CONFIG --variable=g_ir_compiler gobject-introspection-1.0`
             INTROSPECTION_GENERATE=`$PKG_CONFIG --variable=g_ir_generate gobject-introspection-1.0`
             INTROSPECTION_GIRDIR=`$PKG_CONFIG --variable=girdir gobject-introspection-1.0`
-            INTROSPECTION_GIRDIR=${INTROSPECTION_GIRDIR/$datadir/\$(datadir)}
+            INTROSPECTION_GIRDIR=`echo ${INTROSPECTION_GIRDIR} | sed -e 's,$datadir,\$\(datadir\),g'`
             INTROSPECTION_TYPELIBDIR="$($PKG_CONFIG --variable=typelibdir gobject-introspection-1.0)"
-            INTROSPECTION_TYPELIBDIR=${INTROSPECTION_TYPELIBDIR/$libdir/\$(libdir)}
+            INTROSPECTION_TYPELIBDIR=`echo ${INTROSPECTION_TYPELIBDIR} | sed -e 's,$libdir,\$\($libdir\),g'`
             INTROSPECTION_CFLAGS=`$PKG_CONFIG --cflags gobject-introspection-1.0`
             INTROSPECTION_LIBS=`$PKG_CONFIG --libs gobject-introspection-1.0`
             INTROSPECTION_MAKEFILE=$introspection_makefile
@@@@ -21454,9 +21454,9 @@@@ $as_echo_n "checking for Berkeley DB files in $d... " 
@


1.25
log
@Update to libgda-5.0.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.24 2012/01/25 11:30:41 ajacoutot Exp $
d8 3
a10 3
--- configure.orig	Tue Jan 24 19:06:55 2012
+++ configure	Wed Jan 25 12:34:57 2012
@@@@ -20171,9 +20171,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -21061,9 +21061,9 @@@@ $as_echo_n "checking for Berkeley DB files in $d... " 
@


1.24
log
@Properly find and load libdb.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.23 2011/11/21 07:38:23 ajacoutot Exp $
d8 3
a10 3
--- configure.orig	Sun Nov 20 15:26:59 2011
+++ configure	Wed Jan 25 12:09:40 2012
@@@@ -20173,9 +20173,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -21023,9 +21023,9 @@@@ $as_echo_n "checking for Berkeley DB files in $d... " 
@


1.23
log
@Bugfix update to libgda-5.0.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.22 2011/10/26 22:31:27 ajacoutot Exp $
d3 1
a3 1
- Don't do bash pattern substitutions.
d5 2
a6 2
- Stupid configure is stupid, just work around the mess by setting
  the values we know are correct.
d9 1
a9 1
+++ configure	Mon Nov 21 08:00:00 2011
d22 13
a34 14
@@@@ -21100,6 +21100,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
     	    bdb_found=yes
 	fi
     fi
+
+# XXX
+bdb_found=yes
+BDB_CFLAGS=-I${bdbdir}/include/db4
+BDB_LIBS="-L${bdbdir}/lib -ldb"
+BDB_LIB="-ldb"
+BDB_DIR="$bdbdir"
 
      if test "$bdb_found" = "yes"; then
   BDB_TRUE=
@


1.22
log
@Finally update to libgda-5.0.0 stable.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.21 2011/09/29 13:35:41 jasper Exp $
d8 3
a10 3
--- configure.orig	Wed Oct 26 20:46:12 2011
+++ configure	Wed Oct 26 23:33:08 2011
@@@@ -20216,9 +20216,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -21146,6 +21146,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.21
log
@- fix GI typelib file location
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.20 2011/09/12 15:31:15 ajacoutot Exp $
d8 3
a10 3
--- configure.orig	Fri Sep  2 21:25:44 2011
+++ configure	Mon Sep 12 14:46:13 2011
@@@@ -19535,9 +19535,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -20242,6 +20242,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.20
log
@Update to libgda-4.99.4.
Remove useless mdb support.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.19 2011/09/05 14:28:55 ajacoutot Exp $
d18 1
a18 1
+            INTROSPECTION_TYPELIBDIR=`echo ${INTROSPECTION_GIRDIR} | sed -e 's,$libdir,\$\($libdir\),g'`
@


1.19
log
@Bugfix update to libgda-4.2.9.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.18 2011/06/02 07:16:32 ajacoutot Exp $
d8 3
a10 3
--- configure.orig	Fri Sep  2 21:53:51 2011
+++ configure	Mon Sep  5 15:37:50 2011
@@@@ -19652,9 +19652,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -20359,6 +20359,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.18
log
@Bugfix update to libgda-4.2.8.
Enable the new (read-only for now) LDAP backend.

prodded by jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.17 2011/04/20 16:43:34 ajacoutot Exp $
d8 3
a10 3
--- configure.orig	Wed Jun  1 18:48:28 2011
+++ configure	Thu Jun  2 07:34:03 2011
@@@@ -19640,9 +19640,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -20347,6 +20347,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.17
log
@Update to libgda-4.2.6.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.16 2011/04/07 08:55:25 jasper Exp $
d8 3
a10 3
--- configure.orig	Wed Apr 20 16:54:33 2011
+++ configure	Wed Apr 20 18:11:32 2011
@@@@ -19617,9 +19617,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -20308,6 +20308,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.16
log
@Add introspection support (needed for on-going GNOME 3 work).
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.15 2011/03/07 19:30:33 ajacoutot Exp $
d8 3
a10 3
--- configure.orig	Wed Feb 23 20:26:12 2011
+++ configure	Thu Apr  7 10:46:29 2011
@@@@ -19605,9 +19605,9 @@@@ $as_echo_n "checking if gobject-introspection is corre
d22 1
a22 1
@@@@ -20231,6 +20231,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.15
log
@Maintenance update to libgda-4.2.5.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.14 2011/01/11 10:59:25 ajacoutot Exp $
d3 4
a6 2
Stupid configure is stupid, just work around the mess by setting
the values we know are correct.
d9 15
a23 2
+++ configure	Wed Feb 23 21:30:28 2011
@@@@ -20232,6 +20232,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
d26 1
a26 1
 
d33 1
a33 1
+
a35 1
   BDB_FALSE='#'
@


1.14
log
@Bugfix update to libgda-4.2.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.13 2010/11/27 17:13:42 jasper Exp $
d6 3
a8 3
--- configure.orig	Sun Jan  9 18:51:10 2011
+++ configure	Tue Jan 11 11:10:26 2011
@@@@ -20221,6 +20221,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.13
log
@- update libgda to 4.2.2
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.12 2010/11/18 16:44:33 jasper Exp $
d6 3
a8 3
--- configure.orig	Sat Nov 27 14:39:13 2010
+++ configure	Sat Nov 27 17:45:11 2010
@@@@ -20114,6 +20114,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.12
log
@- update libgda to 4.2.1
- remove the empty subpacakges for ldap and odbc now that upstream
  decided not to rework them, but just removed the code instead.
- add @@pkgpath markers accordingly
- new DEPENDS
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 3
--- configure.orig	Thu Nov 18 17:08:08 2010
+++ configure	Thu Nov 18 17:11:23 2010
@@@@ -20110,6 +20110,13 @@@@ $as_echo "$as_me: BDB backend not used" >&6;}
@


1.11
log
@Major update to libgda-4.2.0.
Add a new libgda-ui subpackage: GTK+ extension and tools for libgda
@
text
@d1 10
a10 4
$OpenBSD: patch-configure,v 1.10 2010/06/14 05:45:32 ajacoutot Exp $
--- configure.orig	Sun Sep 26 20:52:21 2010
+++ configure	Mon Sep 27 08:38:09 2010
@@@@ -19953,7 +19953,6 @@@@ fi
d12 10
a21 33
 
 case $host_cpu in
-x86_64* | sparc64* | s390x* | ppc64* | powerpc64* ) lib="lib64";;
 *) lib="lib";;
 esac
 
@@@@ -20010,7 +20009,6 @@@@ $as_echo "#define HAVE_BDB 1" >>confdefs.h
 				BDB_LIBS="-L${bdbdir}/bin -ldb51"
 				break
 			fi
-
 			if test $platform_win32 = no -a -f $d/include/db.h -a -f $d/$lib/libdb$linklibext
 			then
 				{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found Berkeley DB in $d" >&5
@@@@ -20024,8 +20022,7 @@@@ $as_echo "#define HAVE_BDB 1" >>confdefs.h
 				BDB_LIBS="-L${bdbdir}/${lib} -ldb"
 				break
 			fi
-			if test $platform_win32 = no -a -f $d/include/db.h -a -f $d/lib/libdb$linklibext
-			then
+			if [ $platform_win32 == "no" ]; then
 				{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found Berkeley DB in $d" >&5
 $as_echo "found Berkeley DB in $d" >&6; }
 
@@@@ -20156,7 +20153,7 @@@@ then
 $as_echo_n "checking for ODBC files... " >&6; }
 	for d in $dir /usr /usr/local
 	do
-		if test -f $d/$lib/libodbc$linklibext -a -f $d/include/sql.h
+		if test -f $d/$lib/libodbc$linklibext* -a -f $d/include/sql.h
 		then
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found ODBC in $d" >&5
 $as_echo "found ODBC in $d" >&6; }
@


1.10
log
@Bugfix update to libgda-4.0.9.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2010/03/21 09:54:50 ajacoutot Exp $
--- configure.orig	Fri Jun 11 22:41:05 2010
+++ configure	Mon Jun 14 07:25:19 2010
@@@@ -18887,7 +18887,6 @@@@ fi
d12 2
a13 2
@@@@ -18944,7 +18943,6 @@@@ $as_echo "#define HAVE_BDB 1" >>confdefs.h
 				BDB_LIBS="-L${bdbdir}/bin -ldb47"
d20 1
a20 1
@@@@ -18958,8 +18956,7 @@@@ $as_echo "#define HAVE_BDB 1" >>confdefs.h
d30 1
a30 1
@@@@ -19019,7 +19016,7 @@@@ then
@


1.9
log
@Update to libgda-4.0.8.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.8 2009/10/14 23:30:43 jasper Exp $
--- configure.orig	Sat Mar  6 13:53:35 2010
+++ configure	Sat Mar  6 19:19:34 2010
@@@@ -18869,7 +18869,6 @@@@ fi
d12 1
a12 1
@@@@ -18926,7 +18925,6 @@@@ $as_echo "#define HAVE_BDB 1" >>confdefs.h
d20 1
a20 1
@@@@ -18940,8 +18938,7 @@@@ $as_echo "#define HAVE_BDB 1" >>confdefs.h
d30 1
a30 1
@@@@ -19001,7 +18998,7 @@@@ then
@


1.8
log
@- update libgda to 4.0.5
* the ldap and odbc backends are being rewritten and weren't
enabled in this release. although they will be in the future again, so
don't remove the subpackages just yet

discussed with aja@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2009/08/01 14:14:24 sthen Exp $
--- configure.orig	Sat Oct 10 14:24:25 2009
+++ configure	Thu Oct 15 00:04:43 2009
@@@@ -21701,7 +21701,6 @@@@ fi
d12 1
a12 1
@@@@ -21891,7 +21890,6 @@@@ _ACEOF
d19 2
a20 2
 				{ $as_echo "$as_me:$LINENO: result: found Berkeley DB in $d" >&5
@@@@ -21907,8 +21905,7 @@@@ _ACEOF
d27 1
a27 1
 				{ $as_echo "$as_me:$LINENO: result: found Berkeley DB in $d" >&5
d30 1
a30 1
@@@@ -21972,7 +21970,7 @@@@ then
d37 1
a37 1
 			{ $as_echo "$as_me:$LINENO: result: found ODBC in $d" >&5
@


1.7
log
@- remove -tds flavour which used internal FreeTDS api
- add -odbc flavour
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2009/02/11 15:20:19 ajacoutot Exp $
--- configure.orig	Thu Apr 10 11:38:54 2008
+++ configure	Fri Jul 31 12:07:03 2009
@@@@ -23474,7 +23474,6 @@@@ fi
d8 1
a8 1
-x86_64* | sparc64*) lib="lib64";;
d12 24
a35 6
@@@@ -23716,7 +23715,7 @@@@ echo "${ECHO_T}found ODBC in $d" >&6; }
 			odbcdir=$d
 			break
 		fi
-		if test -f $d/$lib/libiodbc$libext -a -f $d/include/sql.h
+		if test -f $d/$lib/libiodbc$libext* -a -f $d/include/sql.h
d37 2
a38 11
 			{ echo "$as_me:$LINENO: result: found iODBC in $d" >&5
 echo "${ECHO_T}found iODBC in $d" >&6; }
@@@@ -24970,7 +24969,7 @@@@ then
         microvers=`sqlite3 -version | cut -d '.' -f 3`
         { echo "$as_me:$LINENO: checking for sqlite version" >&5
 echo $ECHO_N "checking for sqlite version... $ECHO_C" >&6; }
-        if test $microvers -lt 100
+        if test $microvers -lt 10
         then
                 { echo "$as_me:$LINENO: result: Version $realvers of SQLite does not implement required pragmas" >&5
 echo "${ECHO_T}Version $realvers of SQLite does not implement required pragmas" >&6; }
@


1.6
log
@- use a stable version as the gnomedb API will change in the next major and
we do not want to use an in-between release
- fix a LIB_DEPENDS while here
- remove an XXX

"go for it!" jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.5 2009/01/31 22:13:37 jasper Exp $
--- configure.orig	Thu Apr 10 12:38:54 2008
+++ configure	Tue Feb 10 16:34:10 2009
d12 6
a17 6
@@@@ -24123,7 +24122,7 @@@@ then
 echo $ECHO_N "checking for freetds files... $ECHO_C" >&6; }
 	for d in $dir /usr/local/freetds /usr /opt/freetds /opt/packages/freetds /opt/freetds-0.50
 	do
-		if test -f "$d/include/tds.h" -a -e "$d/$lib/libtds$libext" -a -f "$d/include/tdsver.h"
+		if [ -f "$d/include/tds.h" ] && [ -f "$d/include/tdsver.h" ]
d19 2
a20 11
 			{ echo "$as_me:$LINENO: result: found freetds in $d" >&5
 echo "${ECHO_T}found freetds in $d" >&6; }
@@@@ -24146,7 +24145,7 @@@@ echo "$as_me: WARNING: tds backend not used" >&2;}
 	else
 		{ echo "$as_me:$LINENO: checking for freetds version" >&5
 echo $ECHO_N "checking for freetds version... $ECHO_C" >&6; }
-		freetdsvercheck="`grep \"^#define \(VERSION_NO \|TDS_VERSION_NO \)\" $freetds_incdir/tdsver.h|sed 's|^.*".*v\(.*\)"|\1|'`"
+		freetdsvercheck="`grep "#define TDS_VERSION_NO" $freetds_incdir/tdsver.h|sed 's|^.*".*v\(.*\)"|\1|'`"
 		if test "x$freetdsvercheck" = "x"
 		then
 			{ echo "$as_me:$LINENO: WARNING: freetds version check failed - backend not used" >&5
@


1.5
log
@- use sqlite3 from ports, instead of the one shipped with libgda
- remove configure option that doesn't do anything
- regen PLIST

hint from simon@@ some time ago about private functions of sqlite3
feedback and ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.4 2008/11/29 12:53:51 jasper Exp $
--- configure.orig	Tue Jul 22 16:00:07 2008
+++ configure	Sat Jan 31 22:26:54 2009
@@@@ -19951,7 +19951,7 @@@@ fi
d8 1
a8 2
-x86_64* | sparc64* | s390x* | ppc64* | powerpc64* ) lib="lib64";;
+s390x* | ppc64* | powerpc64* ) lib="lib64";;
d12 2
a13 2
@@@@ -20611,7 +20611,7 @@@@ then
 $as_echo_n "checking for freetds files... " >&6; }
d19 3
a21 3
 			{ $as_echo "$as_me:$LINENO: result: found freetds in $d" >&5
 $as_echo "found freetds in $d" >&6; }
@@@@ -20634,7 +20634,7 @@@@ $as_echo "$as_me: WARNING: tds backend not used" >&2;}
d23 2
a24 2
 		{ $as_echo "$as_me:$LINENO: checking for freetds version" >&5
 $as_echo_n "checking for freetds version... " >&6; }
d29 10
a38 67
 			{ $as_echo "$as_me:$LINENO: WARNING: freetds version check failed - backend not used" >&5
@@@@ -21560,9 +21560,9 @@@@ fi
 $as_echo "Installed SQLite was not compiled with the SQLITE_ENABLE_COLUMN_METADATA, using embedded SQLite" >&6; }
                 	have_sqlite=no
         	else
-			{ $as_echo "$as_me:$LINENO: checking for sqlite3CreateFunc in -lsqlite3" >&5
-$as_echo_n "checking for sqlite3CreateFunc in -lsqlite3... " >&6; }
-if test "${ac_cv_lib_sqlite3_sqlite3CreateFunc+set}" = set; then
+			{ $as_echo "$as_me:$LINENO: checking for sqlite3_create_function in -lsqlite3" >&5
+$as_echo_n "checking for sqlite3_create_function in -lsqlite3... " >&6; }
+if test "${ac_cv_lib_sqlite3_sqlite3_create_function+set}" = set; then
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@@@ -21580,11 +21580,11 @@@@ cat >>conftest.$ac_ext <<_ACEOF
 #ifdef __cplusplus
 extern "C"
 #endif
-char sqlite3CreateFunc ();
+char sqlite3_create_function ();
 int
 main ()
 {
-return sqlite3CreateFunc ();
+return sqlite3_create_function ();
   ;
   return 0;
 }
@@@@ -21610,12 +21610,12 @@@@ $as_echo "$ac_try_echo") >&5
 	 test "$cross_compiling" = yes ||
 	 $as_test_x conftest$ac_exeext
        }; then
-  ac_cv_lib_sqlite3_sqlite3CreateFunc=yes
+  ac_cv_lib_sqlite3_sqlite3_create_function=yes
 else
   $as_echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-	ac_cv_lib_sqlite3_sqlite3CreateFunc=no
+	ac_cv_lib_sqlite3_sqlite3_create_function=no
 fi
 
 rm -rf conftest.dSYM
@@@@ -21623,9 +21623,9 @@@@ rm -f core conftest.err conftest.$ac_objext conftest_i
       conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_sqlite3_sqlite3CreateFunc" >&5
-$as_echo "$ac_cv_lib_sqlite3_sqlite3CreateFunc" >&6; }
-if test $ac_cv_lib_sqlite3_sqlite3CreateFunc = yes; then
+{ $as_echo "$as_me:$LINENO: result: $ac_cv_lib_sqlite3_sqlite3_create_function" >&5
+$as_echo "$ac_cv_lib_sqlite3_sqlite3_create_function" >&6; }
+if test $ac_cv_lib_sqlite3_sqlite3_create_function = yes; then
   sqlite3_api=1
 else
   sqlite3_api=0
@@@@ -21633,8 +21633,8 @@@@ fi
 
 			if test $sqlite3_api = 0
 			then
-				{ $as_echo "$as_me:$LINENO: result: Could not find the sqlite3CreateFunc symbol in installed SQLite library, using embedded SQLite" >&5
-$as_echo "Could not find the sqlite3CreateFunc symbol in installed SQLite library, using embedded SQLite" >&6; }
+				{ $as_echo "$as_me:$LINENO: result: Could not find the sqlite3_create_function symbol in installed SQLite library, using embedded SQLite" >&5
+$as_echo "Could not find the sqlite3_create_function symbol in installed SQLite library, using embedded SQLite" >&6; }
                 		have_sqlite=no
 			else
                 		{ $as_echo "$as_me:$LINENO: result: Using this version of SQLite" >&5
@


1.4
log
@- add a -tds subpackage
- fix the postgresql configure option
- set SHARED_ONLY

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.3 2008/11/21 18:35:31 jasper Exp $
d3 1
a3 1
+++ configure	Thu Nov 27 19:53:55 2008
d31 66
@


1.3
log
@- update libgda to 3.1.5
- specify license version

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.2 2008/09/10 19:37:29 naddy Exp $
d3 1
a3 1
+++ configure	Tue Nov 18 12:53:57 2008
d13 18
a30 18
@@@@ -21412,6 +21412,8 @@@@ else
 fi
 
 else
+if false;
+then # no sqlite
 	SQLITE_MODULES="sqlite3 >= 3.3"
 
 pkg_failed=no
@@@@ -21648,6 +21650,8 @@@@ $as_echo "Using this version of SQLite" >&6; }
         	fi
 	fi
 
+fi # no sqlite
+have_sqlite=no
 
 if test x"$have_sqlite" = "xyes"; then
   HAVE_SQLITE_TRUE=
@


1.2
log
@unbreak MDB detection on amd64 and sparc64; ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1.1.1 2008/08/21 10:27:25 jasper Exp $
--- configure.orig	Thu Apr 10 12:38:54 2008
+++ configure	Wed Sep 10 19:07:32 2008
@@@@ -23474,7 +23474,6 @@@@ fi
d8 2
a9 1
-x86_64* | sparc64*) lib="lib64";;
d13 1
a13 1
@@@@ -24896,96 +24895,7 @@@@ else
d16 4
d21 6
a26 90
-SQLITE_MODULES="sqlite3 >= 3.3"
-
-pkg_failed=no
-{ echo "$as_me:$LINENO: checking for SQLITE" >&5
-echo $ECHO_N "checking for SQLITE... $ECHO_C" >&6; }
-
-if test -n "$SQLITE_CFLAGS"; then
-    pkg_cv_SQLITE_CFLAGS="$SQLITE_CFLAGS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"\$SQLITE_MODULES\"") >&5
-  ($PKG_CONFIG --exists --print-errors "$SQLITE_MODULES") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
-  pkg_cv_SQLITE_CFLAGS=`$PKG_CONFIG --cflags "$SQLITE_MODULES" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
- else
-    pkg_failed=untried
-fi
-if test -n "$SQLITE_LIBS"; then
-    pkg_cv_SQLITE_LIBS="$SQLITE_LIBS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
-    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"\$SQLITE_MODULES\"") >&5
-  ($PKG_CONFIG --exists --print-errors "$SQLITE_MODULES") 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; then
-  pkg_cv_SQLITE_LIBS=`$PKG_CONFIG --libs "$SQLITE_MODULES" 2>/dev/null`
-else
-  pkg_failed=yes
-fi
- else
-    pkg_failed=untried
-fi
-
-
-
-if test $pkg_failed = yes; then
-
-if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
-        _pkg_short_errors_supported=yes
-else
-        _pkg_short_errors_supported=no
-fi
-        if test $_pkg_short_errors_supported = yes; then
-	        SQLITE_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "$SQLITE_MODULES" 2>&1`
-        else
-	        SQLITE_PKG_ERRORS=`$PKG_CONFIG --print-errors "$SQLITE_MODULES" 2>&1`
-        fi
-	# Put the nasty error message in config.log where it belongs
-	echo "$SQLITE_PKG_ERRORS" >&5
-
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
-                have_sqlite=no
-elif test $pkg_failed = untried; then
-	have_sqlite=no
-else
-	SQLITE_CFLAGS=$pkg_cv_SQLITE_CFLAGS
-	SQLITE_LIBS=$pkg_cv_SQLITE_LIBS
-        { echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
-	have_sqlite=yes
-fi
-if test x"$have_sqlite" = "xyes"
-then
-        realvers=`sqlite3 -version`
-        microvers=`sqlite3 -version | cut -d '.' -f 3`
-        { echo "$as_me:$LINENO: checking for sqlite version" >&5
-echo $ECHO_N "checking for sqlite version... $ECHO_C" >&6; }
-        if test $microvers -lt 100
-        then
-                { echo "$as_me:$LINENO: result: Version $realvers of SQLite does not implement required pragmas" >&5
-echo "${ECHO_T}Version $realvers of SQLite does not implement required pragmas" >&6; }
-                have_sqlite=no
-        else
-                { echo "$as_me:$LINENO: result: Version $realvers" >&5
-echo "${ECHO_T}Version $realvers" >&6; }
-                SQLITE_CFLAGS="$SQLITE_CFLAGS -DHAVE_SQLITE"
-
-
-                SQLITE_VERS=$realvers
-
-        fi
-fi
-
@


1.1
log
@Initial revision
@
text
@d1 12
a12 4
$OpenBSD$
--- configure.orig	Thu Jul 10 15:03:18 2008
+++ configure	Thu Jul 10 15:06:22 2008
@@@@ -24896,96 +24896,7 @@@@ else
@


1.1.1.1
log
@import libgda 3.0.4

GNOME Data Access (GDA) is an attempt to provide uniform access to
different kinds of data sources (databases, information servers, mail
spools, etc).  It is a complete architecture that provides all you need
to access your data.  It is defined by a set of CORBA interfaces as
generic as possible (but very powerful at the same time) so that any
kind of data source can be accessed through them.

most work done by ajacoutot@@, based on an initial port by me.
@
text
@@
