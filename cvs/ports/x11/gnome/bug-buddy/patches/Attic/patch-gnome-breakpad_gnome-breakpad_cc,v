head	1.2;
access;
symbols
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2010.09.30.07.31.06;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2010.04.10.10.17.25;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to bug-buddy-2.32.0.

ok jasper@@
@
text
@$OpenBSD: patch-gnome-breakpad_gnome-breakpad_cc,v 1.1 2010/04/10 10:17:25 ajacoutot Exp $
--- gnome-breakpad/gnome-breakpad.cc.orig	Sat Apr 10 12:12:11 2010
+++ gnome-breakpad/gnome-breakpad.cc	Sat Apr 10 12:13:45 2010
@@@@ -429,8 +429,12 @@@@ check_if_gdb ()
 			_exit (1);
 		_exit(0);
 	}
-	
+
+#if !defined(__FreeBSD__) && !defined(__OpenBSD__)
 	mypath = g_file_read_link ("/proc/self/exe", NULL);
+#else
+	mypath = g_file_read_link ("/proc/curproc/file", NULL);
+#endif
 	if (mypath)
 		has_debug_symbols = elf_has_debug_symbols (mypath);
 
@


1.1
log
@Give elf_has_debug_symbols a change to work. Not ideal but better than
what we had. From FreeBSD.
@
text
@d1 1
a1 1
$OpenBSD$
@

