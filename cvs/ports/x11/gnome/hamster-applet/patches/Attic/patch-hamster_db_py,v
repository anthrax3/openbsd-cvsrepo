head	1.2;
access;
symbols
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2010.04.24.11.08.21;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2009.10.13.23.36.16;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Major update to hamster-applet-2.30.0.1.
Initial work from jasper@@
@
text
@$OpenBSD: patch-hamster_db_py,v 1.1 2009/10/13 23:36:16 jasper Exp $
--- hamster/db.py.orig	Wed Oct 14 01:01:58 2009
+++ hamster/db.py	Wed Oct 14 01:03:20 2009
@@@@ -76,6 +76,13 @@@@ class Storage(storage.Storage):
                 print 'Error:could not change mode on %s!' % (db_file)
         self.__setup.im_func.complete = True
         self.run_fixtures()
+
+	# In case we created the file read-only, change the mode.
+	if exists(HAMSTER_DB):
+	    try:
+	    	os.chmod(HAMSTER_DB, 0664)
+	    except Exception , msg:	
+	        print 'Error:could not change mode on %s!' % (HAMSTER_DB)
     __setup.complete = False
 
     def __get_category_list(self):
@


1.1
log
@- update hamster-applet to 2.28.0
@
text
@d1 1
a1 1
$OpenBSD$
@

