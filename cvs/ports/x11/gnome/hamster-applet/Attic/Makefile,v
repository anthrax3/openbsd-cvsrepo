head	1.37;
access;
symbols
	OPENBSD_5_0:1.36.0.2
	OPENBSD_5_0_BASE:1.36
	OPENBSD_4_9:1.34.0.2
	OPENBSD_4_9_BASE:1.34
	OPENBSD_4_8:1.22.0.2
	OPENBSD_4_8_BASE:1.22
	OPENBSD_4_7:1.18.0.2
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	jasper_20082511:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.37
date	2011.09.12.07.56.47;	author ajacoutot;	state dead;
branches;
next	1.36;

1.36
date	2011.06.08.17.41.57;	author rpointel;	state Exp;
branches;
next	1.35;

1.35
date	2011.05.14.21.29.04;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2011.01.09.20.21.43;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2010.11.22.08.36.57;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2010.11.17.15.30.47;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.16.15.19.01;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.15.09.33.53;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.15.09.09.24;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2010.11.09.19.49.03;	author landry;	state Exp;
branches;
next	1.27;

1.27
date	2010.10.23.11.10.18;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2010.10.18.13.18.14;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2010.10.11.08.19.19;	author jasper;	state Exp;
branches;
next	1.24;

1.24
date	2010.09.30.12.16.35;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2010.08.30.21.53.59;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2010.07.21.18.42.35;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2010.06.22.18.02.26;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.04.26.17.49.39;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2010.04.24.11.08.21;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.12.21.18.03.18;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2009.12.15.09.39.49;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.10.20.11.22.00;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2009.10.14.12.08.23;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.10.13.23.36.16;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2009.08.11.08.39.38;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.06.11.18.38.16;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2009.06.08.17.59.15;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.06.07.10.01.47;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.04.26.11.01.05;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.28.15.54.42;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2009.02.11.15.47.50;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2009.02.11.15.33.51;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2009.01.12.13.17.37;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.08.15.26.52;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2009.01.02.13.07.37;	author djm;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.28.15.34.26;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.11.24.23.15.54;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.11.24.23.15.54;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.37
log
@Remove gnome2 oldies and some other stuffs that never worked quite well.
Better start on a cleaner base.
@
text
@# $OpenBSD: Makefile,v 1.36 2011/06/08 17:41:57 rpointel Exp $

COMMENT=		time tracker applet for GNOME
BROKEN-sparc64=		waf stalls during build

GNOME_PROJECT=		hamster-applet
GNOME_VERSION=		2.32.0
REVISION=		4

CATEGORIES=		productivity

HOMEPAGE=		http://live.gnome.org/ProjectHamster

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB += X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender atk-1.0 cairo expat ffi
WANTLIB += fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glib-2.0 gmodule-2.0 gobject-2.0 gtk-x11-2.0
WANTLIB += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread-stubs xcb z gthread-2.0 xcb-render
WANTLIB += xcb-render-util

MODULES=		devel/gconf2 \
			devel/gettext \
			devel/waf \
			lang/python \
			x11/gnome

MODGCONF2_SCHEMAS_DIR=	hamster-applet
MODGCONF2_LIBDEP=	No

LIB_DEPENDS=		x11/gtk+2

# controlcenter2 is needed for custom keybindings
BUILD_DEPENDS=		${RUN_DEPENDS}
RUN_DEPENDS=		x11/gnome/controlcenter2 \
			x11/gnome/py-gnome-desktop \
			devel/py-xdg \
			databases/py-sqlite2 \
			x11/dbus-python

CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

pre-configure:
	${SUBST_CMD} ${WRKSRC}/src/hamster-applet \
		${WRKSRC}/src/hamster-time-tracker \
		${WRKSRC}/src/hamster-cli \
		${WRKSRC}/src/hamster-service

# Thank you for switching to waf, now you can cleanup our mess!
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/${SCHEMAS_INSTDIR}/
	@@mv ${PREFIX}/etc/gconf/schemas/* ${PREFIX}/${SCHEMAS_INSTDIR}/
	@@rm -fr ${PREFIX}/etc/gconf/schemas/

.include <bsd.port.mk>

# Need to override the defaults set by the gconf module
CONFIGURE_ARGS=
@


1.36
log
@bump after default python version switch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/05/14 21:29:04 ajacoutot Exp $
@


1.35
log
@deve/gconf2 is about to loose its dependency on x11/gtk+2 so explicitely
register x11/gtk+2 for ports depending on gconf2 that don't have another
dependency that would bring it.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/01/09 20:21:43 ajacoutot Exp $
d8 1
a8 1
REVISION=		3
@


1.34
log
@Unbreak: fts3 module is now enabled in our sqlite.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/11/22 08:36:57 espie Exp $
d8 1
a8 1
REVISION=		2
d36 2
@


1.33
log
@new depends
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.32 2010/11/17 15:30:47 ajacoutot Exp $

BROKEN=			needs sqlite fts3 module which is not buildable on NO_SHARED_ARCHES
@


1.32
log
@Mark BROKEN for now.
It needs the sqlite fts3 module which is not buildable on the vax...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/16 15:19:01 ajacoutot Exp $
d41 5
a45 5
RUN_DEPENDS=		::x11/gnome/controlcenter2 \
			::x11/gnome/py-gnome-desktop \
			::devel/py-xdg \
			::databases/py-sqlite2 \
			::x11/dbus-python
@


1.31
log
@Add missing run_depends.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.30 2010/11/15 09:33:53 ajacoutot Exp $
@


1.30
log
@Tighten up build depends, no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/15 09:09:24 ajacoutot Exp $
d8 1
a8 1
REVISION=		1
d42 1
@


1.29
log
@Add missing RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/11/09 19:49:03 landry Exp $
d38 1
a38 2
BUILD_DEPENDS=		${RUN_DEPENDS} \
			:waf->=1.5.18:devel/waf
@


1.28
log
@Mark as BROKEN on sparc64, agreed by jasper@@. Build stalls
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/10/23 11:10:18 jasper Exp $
d8 1
a8 1
REVISION=		0
d42 2
a43 1
			::devel/py-xdg
@


1.27
log
@- dont set CONFIGURE_STYLE to gnu when we're using the waf module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/10/18 13:18:14 jasper Exp $
d4 1
@


1.26
log
@- remove USE_X11=Yes where needed (can't we fully get rid of it?)
and set USE_X11=No where needed

agreed by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/10/11 08:19:19 jasper Exp $
d60 1
a60 2
# Need to override the defaults set by the gconf and gnome module
CONFIGURE_STYLE=
@


1.25
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/09/30 12:16:35 jasper Exp $
a32 1
USE_X11=		Yes
@


1.24
log
@- update hamster-applet to 2.32.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/08/30 21:53:59 sthen Exp $
d7 1
d22 1
a22 1
WANTLIB += glib-2.0 glitz gmodule-2.0 gobject-2.0 gtk-x11-2.0
@


1.23
log
@python bumps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/07/21 18:42:35 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.30.2
REVISION=		1
d26 3
a28 1
MODULES=		devel/gettext \
d30 1
a30 2
			x11/gnome \
			devel/gconf2
d37 2
a38 1
BUILD_DEPENDS=		${RUN_DEPENDS}
a42 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
d47 10
a56 3
	${SUBST_CMD} ${WRKSRC}/src/hamster-applet.py \
		${WRKSRC}/src/gnome-time-tracker \
		${WRKSRC}/src/hamster-standalone
d59 4
@


1.22
log
@Add missing dependency on py-xdg.

from Juha Erkkila
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/06/22 18:02:26 ajacoutot Exp $
d7 1
a7 1
REVISION=		0
@


1.21
log
@Bugfix update to hamster-applet-2.30.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/04/26 17:49:39 ajacoutot Exp $
d7 1
d39 2
a40 1
			::x11/gnome/py-gnome-desktop
@


1.20
log
@Minor update to hamster-applet-2.30.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/04/24 11:08:21 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.30.1
@


1.19
log
@Major update to hamster-applet-2.30.0.1.
Initial work from jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/12/21 18:03:18 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.30.0.1
@


1.18
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos and remove
@@unexec for theme ports.

prodded by espie@@ after me whining at the ports system ;)
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/12/15 09:39:49 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.28.2
PKGNAME=		${DISTNAME}p0
d23 2
a24 1
WANTLIB += png pthread-stubs xcb z
d43 1
d45 3
a47 1
	${SUBST_CMD} ${WRKSRC}/hamster/hamster-applet.py
@


1.17
log
@Maintenance update to hamster-applet-2.28.2.
* several bug fixes and translation updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/10/20 11:22:00 ajacoutot Exp $
d7 1
@


1.16
log
@Bugfix update to hamster-applet-2.28.1.
* avoid getting activities from the future
* translations updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/10/14 12:08:23 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.28.1
@


1.15
log
@Use my giant axe for fix a crasher.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/10/13 23:36:16 jasper Exp $
d6 1
a6 2
GNOME_VERSION=		2.28.0
PKGNAME=		${DISTNAME}p0
@


1.14
log
@- update hamster-applet to 2.28.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/08/11 08:39:38 ajacoutot Exp $
d7 2
@


1.13
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/06/11 18:38:16 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.24.3
PKGNAME=		${DISTNAME}p6
d17 6
a22 6
WANTLIB=	X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes \
		Xi Xinerama Xrandr Xrender atk-1.0 cairo expat fontconfig \
		freetype gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 \
		glitz gmodule-2.0 gobject-2.0 gtk-x11-2.0 m pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png z \
		pthread-stubs xcb
@


1.12
log
@Bump after recent gconf2 MODULE change.
gconf2 MODULE was tricky to get right for *all* ports. I think I finally
got it, if you see any fallout, please contact me asap.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/06/08 17:59:15 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p5
d22 2
a23 1
		pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png z
@


1.11
log
@Bump after recent gconf2 MODULE changes.

"yep, bumps are cheap" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/06/07 10:01:47 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p4
@


1.10
log
@Convert to using the new gconf2.port.mk module.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/04/26 11:01:05 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p3
@


1.9
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/03/28 15:54:42 naddy Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
d26 2
a27 1
			x11/gnome
d30 2
d38 1
a38 3
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--disable-schemas-install \
			--with-gconf-schema-file-dir=${LOCALBASE}/share/schemas/hamster-applet
@


1.8
log
@bump for python dependency change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/02/11 15:47:50 jasper Exp $
d39 1
a39 2
			LDFLAGS="-L${LOCALBASE}/lib" \
			PYTHON="${MODPY_BIN}"
@


1.7
log
@- bah...missing '>' :(
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/02/11 15:33:51 jasper Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
@


1.6
log
@- add another tadpole as maintainer of this hobbit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/01/12 13:17:37 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
@


1.5
log
@- small update to hamster-applet-2.24.3 (updated translations)
- add --disable-schemas-install to configure args to stop the systrace
spamming
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/01/08 15:26:52 jasper Exp $
d7 1
@


1.4
log
@- bump PKGNAME after control-center2's package name change

discussed with and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/01/02 13:07:37 djm Exp $
d6 1
a6 2
GNOME_VERSION=		2.24.2
PKGNAME=		${DISTNAME}p1
d35 1
@


1.3
log
@remove dependencies on removed python subpackages; prodded by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/11/28 15:34:26 ajacoutot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
@


1.2
log
@- add small comment about the run_depends
no pkg change, no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/11/24 23:15:54 jasper Exp $
d7 1
d32 1
a32 2
RUN_DEPENDS=		:python-sqlite-${MODPY_VERSION}*:lang/python/${MODPY_VERSION},-sqlite \
			::x11/gnome/controlcenter2 \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d29 1
@


1.1.1.1
log
@import hamster-applet 2.24.2

Project Hamster is time tracking for masses. It helps you to keep track
on how much time you have spent during the day on activities you have
set up. At the beginning you define some activities you do, like
"hacking GNOME", "listening to Humppa", "hurling beer", "pretend to be
hacking" and so on, and, whenever you change from doing one task to
other, you change your current activity in Hamster. After a while you
can see some statistics of how many hours you have spent on what. Some
nice reports and graphical statistics will help you keep time tracking
fun.

ok ajacoutot@@
@
text
@@
