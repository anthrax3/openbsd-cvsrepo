head	1.4;
access;
symbols
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2010.09.30.07.47.13;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2010.05.03.08.49.08;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.20.18.20.15;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.22.22.40.36;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update zenity to 2.32.0
- remove unneeded patches as it's part of upstream releases now

ok aja@@
@
text
@$OpenBSD: patch-src_option_c,v 1.3 2010/05/03 08:49:08 jasper Exp $

Implement --no-cancel
ETA was GNOME 2.30, see:
    http://bugzilla-attachments.gnome.org/attachment.cgi?id=152711

--- src/option.c.orig	Sun Mar 28 22:55:43 2010
+++ src/option.c	Tue Apr 20 20:10:02 2010
@@@@ -86,6 +86,7 @@@@ static int      zenity_progress_percentage;
 static gboolean zenity_progress_pulsate;
 static gboolean zenity_progress_auto_close;
 static gboolean zenity_progress_auto_kill;
+static gboolean zenity_progress_no_cancel;
 
 /* Question Dialog Options */
 static gboolean zenity_question_active;
@@@@ -607,6 +608,16 @@@@ static GOptionEntry progress_options[] = {
     N_("Kill parent process if cancel button is pressed"),
     NULL
   },
+  {
+   "no-cancel",
+   '\0',
+   0,
+   G_OPTION_ARG_NONE,
+   &zenity_progress_no_cancel,
+   /* xgettext: no-c-format */
+   N_("Hide cancel button"),
+   NULL
+  },
   { 
     NULL 
   }
@@@@ -1050,7 +1061,7 @@@@ zenity_progress_pre_callback (GOptionContext *context,
   zenity_progress_pulsate = FALSE;
   zenity_progress_auto_close = FALSE;
   zenity_progress_auto_kill = FALSE;
-
+  zenity_progress_no_cancel = FALSE;
   return TRUE;
 }
 
@@@@ -1370,6 +1381,7 @@@@ zenity_progress_post_callback (GOptionContext *context
     results->progress_data->autoclose = zenity_progress_auto_close;
     results->progress_data->autokill = zenity_progress_auto_kill;
     results->progress_data->percentage = zenity_progress_percentage;
+    results->progress_data->no_cancel = zenity_progress_no_cancel;
   } else {
     if (zenity_progress_pulsate)
       zenity_option_error (zenity_option_get_name (progress_options, &zenity_progress_pulsate),
@@@@ -1386,6 +1398,9 @@@@ zenity_progress_post_callback (GOptionContext *context
     if (zenity_progress_auto_kill)
       zenity_option_error (zenity_option_get_name (progress_options, &zenity_progress_auto_kill),
                            ERROR_SUPPORT);
+    if (zenity_progress_no_cancel)
+      zenity_option_error (zenity_option_get_name (progress_options, &zenity_progress_no_cancel),
+			   ERROR_SUPPORT);
   }
     
   return TRUE;
@


1.3
log
@- fix comment in patch files
@
text
@d1 1
a1 1
$OpenBSD: patch-src_option_c,v 1.2 2010/04/20 18:20:15 jasper Exp $
@


1.2
log
@- update zenity to 2.30.0
* the --nocancel stuff still hasn't been integrated into this release..
@
text
@d1 1
a1 1
$OpenBSD: patch-src_option_c,v 1.1 2010/03/22 22:40:36 ajacoutot Exp $
d3 1
a3 1
Implement --nocancel
@


1.1
log
@Implement --nocancel
(http://bugzilla-attachments.gnome.org/attachment.cgi?id=152711)
@
text
@d1 1
a1 1
$OpenBSD$
d4 1
a4 1
ETA GNOME 2.30, see:
d7 3
a9 3
--- src/option.c.orig	Mon Sep 21 16:11:11 2009
+++ src/option.c	Mon Feb  8 15:29:25 2010
@@@@ -85,6 +85,7 @@@@ static int      zenity_progress_percentage;
d17 1
a17 1
@@@@ -597,6 +598,16 @@@@ static GOptionEntry progress_options[] = {
d34 1
a34 1
@@@@ -1039,7 +1050,7 @@@@ zenity_progress_pre_callback (GOptionContext *context,
d43 1
a43 1
@@@@ -1354,6 +1365,7 @@@@ zenity_progress_post_callback (GOptionContext *context
d51 1
a51 1
@@@@ -1370,6 +1382,9 @@@@ zenity_progress_post_callback (GOptionContext *context
@

