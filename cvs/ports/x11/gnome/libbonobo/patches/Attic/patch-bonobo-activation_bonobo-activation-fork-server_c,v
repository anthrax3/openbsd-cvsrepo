head	1.4;
access;
symbols
	OPENBSD_4_1:1.3.0.6
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2007.04.27.22.20.41;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2005.11.13.06.29.04;	author marcm;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.24.21.44.14;	author marcm;	state Exp;
branches;
next	1.1;

1.1
date	2003.10.07.05.48.54;	author marcm;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update libbonobo 2.18.0

ok martynas@@
@
text
@--- bonobo-activation/bonobo-activation-fork-server.c.orig	Wed Jul 20 00:02:15 2005
+++ bonobo-activation/bonobo-activation-fork-server.c	Sun Sep 11 20:22:42 2005
@@@@ -359,10 +359,18 @@@@ bonobo_activation_server_by_forking (
                 g_source_destroy (source);
                 g_source_unref (source);
                 
+                g_io_channel_shutdown (ai.ioc, FALSE, NULL);
                 g_io_channel_unref (ai.ioc);
                 
                 if (use_new_loop)
                         g_main_context_unref (context);
+
+                close (iopipes[1]);
+
+                g_strfreev(newenv);
+
+                if (fd_arg != 0)
+                        g_free ((char *) cmd[fd_arg]);
 
 		return CORBA_OBJECT_NIL;
 	}
@


1.3
log
@Monster Gnome update primarily for the new GTK+2 WANTLIBS.

Also includes several Gnome 2.6.2 updates.  Version numbers bumped
accordingly.
@
text
@@


1.2
log
@Update for Gnome 2.10... yet the version is still 2.8... go figure.
@
text
@d1 11
a11 8
$OpenBSD: patch-bonobo-activation_bonobo-activation-fork-server_c,v 1.1 2003/10/07 05:48:54 marcm Exp $
--- bonobo-activation/bonobo-activation-fork-server.c.orig	Wed Aug 11 03:26:02 2004
+++ bonobo-activation/bonobo-activation-fork-server.c	Mon Apr  4 22:04:47 2005
@@@@ -380,6 +380,8 @@@@ bonobo_activation_server_by_forking (
 	} else if ((childpid = fork ())) {
 		_exit (0);	/* de-zombifier process, just exit */
 	} else {
+		sigprocmask (SIG_SETMASK, &omask, NULL);
d13 6
a18 2
 		setenv_activation_environment (environment);
                 sigprocmask (SIG_SETMASK, &omask, NULL);
d20 2
@


1.1
log
@Update to Gnome 2.4.0.
Release notes available at: http://www.gnome.org/start/2.4/notes/

Please note that x11/gnome/bonobo-activation is now part of libbonobo
@
text
@d1 3
a3 3
$OpenBSD$
--- bonobo-activation/bonobo-activation-fork-server.c.orig	2003-09-09 13:12:20.000000000 -0700
+++ bonobo-activation/bonobo-activation-fork-server.c	2003-09-09 13:13:06.000000000 -0700
d11 1
a12 1
 		if (od_iorstr != NULL) {
@

