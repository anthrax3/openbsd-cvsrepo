head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2017.05.27.15.51.36;	author jasper;	state Exp;
branches;
next	1.1;
commitid	qoLMSxTYgkRmJDtP;

1.1
date	2017.05.27.15.08.43;	author jasper;	state Exp;
branches;
next	;
commitid	m3z3WNGVG3MCa2jh;


desc
@@


1.2
log
@sync with what's been submitted upstream and add BZ urls
@
text
@$OpenBSD: patch-src_gr-recipe-formatter_c,v 1.1 2017/05/27 15:08:43 jasper Exp $

No _NL_MEASUREMENT_MEASUREMENT? Then you'll get metric units!
https://bugzilla.gnome.org/show_bug.cgi?id=783153

Index: src/gr-recipe-formatter.c
--- src/gr-recipe-formatter.c.orig
+++ src/gr-recipe-formatter.c
@@@@ -48,12 +48,14 @@@@ get_temperature_unit (void)
         GSettings *settings = gr_settings_get ();
         unit =  g_settings_get_enum (settings, "temperature-unit");
         if (unit == GR_TEMPERATURE_UNIT_LOCALE) {
+#ifdef _NL_MEASUREMENT_MEASUREMENT
                 const gchar *fmt;
 
                 fmt = nl_langinfo (_NL_MEASUREMENT_MEASUREMENT);
                 if (fmt && *fmt == 2)
                         unit = GR_TEMPERATURE_UNIT_FAHRENHEIT;
                 else
+#endif
                         unit = GR_TEMPERATURE_UNIT_CELSIUS;
         }
 
@


1.1
log
@update to gnome-recipes-1.4.4
@
text
@d1 1
a1 1
$OpenBSD$
d4 1
d9 1
a9 1
@@@@ -48,15 +48,18 @@@@ get_temperature_unit (void)
d15 1
a15 1
-
d20 1
a21 3
+#else
+	unit = GR_TEMPERATURE_UNIT_CELSIUS;
+#endif
a22 4
-
+	
         return unit;
 }
@

