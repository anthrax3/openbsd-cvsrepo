head	1.10;
access;
symbols
	OPENBSD_5_2:1.7.0.2
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.10
date	2014.04.11.14.47.25;	author ajacoutot;	state dead;
branches;
next	1.9;

1.9
date	2014.04.01.16.48.39;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.09.27.13.03.01;	author ajacoutot;	state dead;
branches;
next	1.7;

1.7
date	2012.07.13.15.23.59;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2012.07.12.11.35.36;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.10.10.15.19;	author mpi;	state Exp;
branches;
next	1.4;

1.4
date	2012.03.29.06.34.16;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2012.01.18.16.32.34;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.26.14.32.35;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.15.07.21.13;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Update to gvfs-1.20.1.
@
text
@$OpenBSD: patch-configure_ac,v 1.9 2014/04/01 16:48:39 ajacoutot Exp $

From a77cdbac08ca1ff17aeba2323a610a61101387db Mon Sep 17 00:00:00 2001
From: Ondrej Holy <oholy@@redhat.com>
Date: Thu, 20 Mar 2014 16:44:44 +0100
Subject: common: use nl_langinfo constants conditionally

--- configure.ac.orig	Fri Mar 21 15:55:51 2014
+++ configure.ac	Tue Apr  1 18:40:53 2014
@@@@ -735,6 +735,16 @@@@ if test "x$enable_afp" != "xno"; then
 fi
 AM_CONDITIONAL(USE_AFP, test "x$enable_afp" != "xno")
 
+dnl ***************************************
+dnl *** Check for nl_langinfo constants ***
+dnl ***************************************
+AC_CHECK_DECL(_NL_ADDRESS_LANG_TERM,
+              AC_DEFINE(HAVE_NL_ADDRESS_LANG_TERM, 1, Define to 1 if _NL_ADDRESS_LANG_TERM is declared),,
+              [#include <langinfo.h>])
+AC_CHECK_DECL(_NL_ADDRESS_COUNTRY_AB3,
+              AC_DEFINE(HAVE_NL_ADDRESS_COUNTRY_AB3, 1, Define to 1 if _NL_ADDRESS_COUNTRY_AB3 is declared),,
+              [#include <langinfo.h>])
+
 dnl Install bash-completion file?
 AC_ARG_ENABLE([bash-completion],
 	      AS_HELP_STRING([--disable-bash-completion],
@


1.9
log
@Use nl_langinfo constants conditionally (upstream).
@
text
@d1 1
a1 1
$OpenBSD$
@


1.8
log
@Update to gvfs-1.14.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.7 2012/07/13 15:23:59 ajacoutot Exp $
d3 4
a6 4
From 2fec402d6523e4cf416d754f69d012dc67a58a2e Mon Sep 17 00:00:00 2001
From: Martin Pieuchot <mpi@@openbsd.org>
Date: Fri, 13 Jul 2012 14:51:39 +0000
Subject: daemon: Support allocating PTYs through openpty on BSD
d8 3
a10 12
--- configure.ac.orig	Mon Apr  9 16:58:43 2012
+++ configure.ac	Mon Apr  9 16:58:49 2012
@@@@ -108,8 +108,12 @@@@ AC_CHECK_FUNCS(getpt posix_openpt grantpt unlockpt pts
 # Pull in the right libraries for various functions which might not be
 # bundled into an exploded libc.
 AC_CHECK_FUNC(socketpair,[have_socketpair=1],AC_CHECK_LIB(socket,socketpair,[have_socketpair=1; LIBS="$LIBS -lsocket"]))
+AC_CHECK_FUNC(openpty,[have_openpty=1],AC_CHECK_LIB(util,openpty,[have_openpty=1; LIBS="$LIBS -lutil"]))
 if test x$have_socketpair = x1 ; then
 	AC_DEFINE(HAVE_SOCKETPAIR,1,[Define if you have the socketpair function.])
+fi
+if test x$have_openpty = x1 ; then
+	AC_DEFINE(HAVE_OPENPTY,1,[Define if you have the openpty function.])
d12 1
d14 13
a26 1
 AC_SEARCH_LIBS(login_tty, util, [AC_DEFINE([HAVE_LOGIN_TTY],[],[Whether login_tty is available])])
@


1.7
log
@Committed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.6 2012/07/12 11:35:36 ajacoutot Exp $
@


1.6
log
@Link to BZ.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.5 2012/07/10 10:15:19 mpi Exp $
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=679790
@


1.5
log
@Make use of openpty(3) to allocate a pseudo-tty required for the ssh
authentication. This allow to mount sftp shares using passwords with
any application relying on gvfs. With a lot of help from nicm@@.

Packages already bumped but I failed again with cvs add.

Ok ajacoutot@@, jasper@@
@
text
@d1 4
a4 1
$OpenBSD$
@


1.4
log
@Update to gvfs-1.11.5.
@
text
@d1 14
a14 12
$OpenBSD: patch-configure_ac,v 1.3 2012/01/18 16:32:34 ajacoutot Exp $

From ac597c44a52a5fc4c3e20ee75e7d82f691722feb Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Wed, 18 Jan 2012 16:19:34 +0000
Subject: build: Check for util.h to prevent implicit declaration

--- configure.ac.orig	Mon Sep 26 15:19:25 2011
+++ configure.ac	Mon Sep 26 15:43:35 2011
@@@@ -100,7 +100,7 @@@@ dnl ****************************
 dnl *** Checks for pty stuff ***
 dnl ****************************
d16 1
a16 5
-AC_CHECK_HEADERS(sys/un.h stropts.h termios.h utmp.h sys/uio.h sys/param.h)
+AC_CHECK_HEADERS(sys/un.h stropts.h termios.h util.h utmp.h sys/uio.h sys/param.h)
 
 # Check for PTY handling functions.
 AC_CHECK_FUNCS(getpt posix_openpt grantpt unlockpt ptsname ptsname_r)
@


1.3
log
@Sync patch with upstream commit; no pkg change.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.2 2011/09/26 14:32:35 ajacoutot Exp $
@


1.2
log
@Update to gvfs-1.10.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.1 2011/06/15 07:21:13 ajacoutot Exp $
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=652623
@


1.1
log
@Fix implicit declaration.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- configure.ac.orig	Wed Jun 15 08:59:42 2011
+++ configure.ac	Wed Jun 15 08:59:58 2011
@@@@ -99,7 +99,7 @@@@ dnl ****************************
@

