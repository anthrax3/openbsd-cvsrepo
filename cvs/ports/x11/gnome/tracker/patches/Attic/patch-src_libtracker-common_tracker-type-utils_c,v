head	1.5;
access;
symbols
	OPENBSD_5_3:1.3.0.6
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_4_7:1.1.1.1.0.4
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.2
	OPENBSD_4_6_BASE:1.1.1.1
	jasper_20090421:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2013.05.01.12.40.18;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2013.04.10.14.13.53;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.18.08.36.56;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.21.10.41.37;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2009.04.21.21.34.46;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.04.21.21.34.46;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to (meta-)tracker-0.16.1.
@
text
@$OpenBSD: patch-src_libtracker-common_tracker-type-utils_c,v 1.4 2013/04/10 14:13:53 ajacoutot Exp $

From 3443706bbe0c1c2e465336c59f87cec90929ff1e Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@gnome.org>
Date: Wed, 10 Apr 2013 07:16:54 +0000
Subject: OpenBSD needs _XOPEN_SOURCE_EXTENDED for strptime/strcasecmp

--- src/libtracker-common/tracker-type-utils.c.orig	Wed Apr 10 08:40:12 2013
+++ src/libtracker-common/tracker-type-utils.c	Wed Apr 10 08:40:47 2013
@@@@ -21,6 +21,7 @@@@
 #include "config.h"
 
 #define _XOPEN_SOURCE
+#define _XOPEN_SOURCE_EXTENDED 1	/* strcasecmp is XPG4v2 */
 #include <time.h>
 
 #include <strings.h>
@


1.4
log
@Rework all kvm(3) patches to a state closer to being commitable upstream.
Fix a few implicit declarations.
Remove patch-src_libtracker-miner_tracker-password-provider_c which is not
needed anymore.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_libtracker-common_tracker-type-utils_c,v 1.3 2011/09/18 08:36:56 ajacoutot Exp $
@


1.3
log
@Unbreak this port: major update to meta-tracker-0.12.1.
Introducing 3 subpackages:
-main (tracker itself)
-evolution (mail indexing)
-nautilus (tag editing from within nautilus)
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 1
tracker-type-utils.c:107: warning: implicit declaration of function 'strcasecmp'
d8 3
a10 4
--- src/libtracker-common/tracker-type-utils.c.orig	Sat Sep 17 17:43:51 2011
+++ src/libtracker-common/tracker-type-utils.c	Sat Sep 17 17:43:58 2011
@@@@ -20,7 +20,6 @@@@
 
d13 2
a14 1
-#define _XOPEN_SOURCE
@


1.2
log
@Update tracker to version 0.6.96.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_libtracker-common_tracker-type-utils_c,v 1.1 2009/04/21 21:34:46 jasper Exp $
d3 1
a3 2
tracker-type-utils.c: In function `tracker_string_to_date':
tracker-type-utils.c:539: error: invalid operands to binary -
d5 3
a7 3
--- src/libtracker-common/tracker-type-utils.c.orig	Wed Apr  8 00:04:00 2009
+++ src/libtracker-common/tracker-type-utils.c	Wed Apr 15 17:16:37 2009
@@@@ -21,7 +21,10 @@@@
d11 1
a11 4
+#if !defined(__OpenBSD__)
 #define _XOPEN_SOURCE
+#endif
+#include <sys/types.h>
a14 16
@@@@ -528,11 +531,15 @@@@ tracker_string_to_date (const gchar *date_string)
 		tm.tm_sec = strtoul (date_string, (gchar**) &date_string, 10);
 	}
 
+#if !(defined(__FreeBSD__) || defined(__OpenBSD__))
 	/* mktime() always assumes that "tm" is in locale time but we
 	 * want to keep control on time, so we go to UTC
 	 */
 	t  = mktime (&tm);
 	t -= timezone;
+#else
+	t = timegm (&tm);
+#endif
 
 	if (*date_string == '+' ||
 	    *date_string == '-') {
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import tracker 0.6.93

Tracker is a powerful desktop-neutral first class object database,
tag/metadata database, search tool and indexer.

Tracker is also extremely fast and super efficient with your systems
memory when compared with some other competing frameworks and is by far
the fastest and most memory efficient Nautilus search and Deskbar
backends currently availble.

It consists of a common object database that allows entities to have an
almost infinte number of properties, metadata (both embedded/harvested
as well as user definable), a comprehensive database of keywords/tags
and links to other entities.

NB: most patches have already been committed upstream by now.

based on initial work by bernd@@
feedback and ok ajacoutot@@

@
text
@@
