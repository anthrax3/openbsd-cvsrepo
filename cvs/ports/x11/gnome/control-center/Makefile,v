head	1.24;
access;
symbols
	OPENBSD_6_1:1.23.0.2
	OPENBSD_6_1_BASE:1.23
	OPENBSD_6_0:1.17.0.2
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.8.0.4
	OPENBSD_5_8_BASE:1.8;
locks; strict;
comment	@# @;


1.24
date	2017.04.10.11.46.35;	author sthen;	state Exp;
branches;
next	1.23;
commitid	HY6VNZxjJWzKQFDV;

1.23
date	2017.03.15.08.21.51;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	Zuepzm5sZf7DxYHp;

1.22
date	2017.02.19.14.43.49;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	jyPxpI44E8W5VufM;

1.21
date	2017.01.20.13.43.47;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	38OgWpHDBnHEjePk;

1.20
date	2016.12.17.15.00.22;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	PZobHkEVH6t8r7Eq;

1.19
date	2016.11.01.07.12.56;	author ajacoutot;	state Exp;
branches;
next	1.18;
commitid	Yvucz9OK4t1tjUig;

1.18
date	2016.10.12.08.18.06;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	h1LrWJlKFAqh1xoY;

1.17
date	2016.04.25.16.46.37;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	FDpPduf49GQ6x05z;

1.16
date	2016.03.18.23.12.20;	author naddy;	state Exp;
branches;
next	1.15;
commitid	KZAl4KEiw6a3Jixw;

1.15
date	2016.01.17.17.29.11;	author sthen;	state Exp;
branches;
next	1.14;
commitid	bS2FIbTCCkF3XjOq;

1.14
date	2015.12.11.14.08.07;	author jasper;	state Exp;
branches;
next	1.13;
commitid	7T6jGN9VofDnyZ0c;

1.13
date	2015.11.10.13.57.18;	author ajacoutot;	state Exp;
branches;
next	1.12;
commitid	WS7JMGJlu6E0FyEV;

1.12
date	2015.10.18.13.23.56;	author ajacoutot;	state Exp;
branches;
next	1.11;
commitid	64yWK6V2McUthIkn;

1.11
date	2015.08.18.09.55.47;	author ajacoutot;	state Exp;
branches;
next	1.10;
commitid	6nQXkBlwBwczTdMS;

1.10
date	2015.08.17.10.39.36;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	gbOv1AO34SmGWsvX;

1.9
date	2015.08.15.11.13.42;	author ajacoutot;	state Exp;
branches;
next	1.8;
commitid	AXPeqyjAAuMdtb7k;

1.8
date	2015.07.22.18.27.48;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	QRioGuLBGYUjX1bo;

1.7
date	2015.05.12.15.41.40;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	csVahDuKqB0rq2ha;

1.6
date	2015.04.15.15.28.28;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	ePSggGkWKoffnVbP;

1.5
date	2015.04.15.09.40.53;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	dfR1rb9OtImYnGFF;

1.4
date	2015.04.08.06.46.56;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	ih6fGy2ofx6pFDJB;

1.3
date	2015.04.04.09.21.05;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	kS3kwKZogsvzYmEY;

1.2
date	2015.04.03.18.16.52;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	d6yzyrGauxc6gmqZ;

1.1
date	2015.04.03.11.45.46;	author ajacoutot;	state Exp;
branches;
next	;
commitid	OF1FUg33manwmeG3;


desc
@@


1.24
log
@use LIBCXX
@
text
@# $OpenBSD: Makefile,v 1.23 2017/03/15 08:21:51 ajacoutot Exp $

# XXX change proxy settings without network-manager?

COMMENT=		GNOME control center

GNOME_PROJECT=		gnome-control-center
GNOME_VERSION=		3.22.2

CATEGORIES=		x11

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += FLAC ICE SM X11 X11-xcb Xau Xcomposite Xcursor Xdamage
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xtst Xxf86vm
WANTLIB += accountsservice atk-1.0 atk-bridge-2.0 atspi avahi-common
WANTLIB += c cairo cairo-gobject canberra canberra-gtk3 colord
WANTLIB += colord-gtk colordprivate crack crypto cups unistring
WANTLIB += dbus-1 dbus-glib-1 drm epoxy execinfo expat ffi fontconfig
WANTLIB += freetype gbm gcrypt gdbm gdk-3 gdk_pixbuf-2.0 gio-2.0
WANTLIB += glapi glib-2.0 gmodule-2.0 gmp gnome-desktop-3 goa-1.0
WANTLIB += goa-backend-1.0 gobject-2.0 gpg-error graphite2 grilo-0.3
WANTLIB += gstaudio-1.0 gstbase-1.0 gstreamer-1.0 gsttag-1.0 gstvideo-1.0
WANTLIB += gthread-2.0 gtk-3 gtop-2.0 harfbuzz hogweed ibus-1.0
WANTLIB += iconv icudata icuuc idn2 intl javascriptcoregtk-4.0
WANTLIB += json-glib-1.0 kvm lber-2.4 lcms2 ltdl lzma m
WANTLIB += nettle ogg orc-0.4 p11-kit pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png polkit-gobject-1
WANTLIB += pthread-stubs pulse pulse-mainloop-glib pwquality rest-0.7
WANTLIB += sasl2 secret-1 smbclient sndfile soup-2.4 soup-gnome-2.4
WANTLIB += sqlite3 ssl ${LIBCXX} tasn1 telepathy-glib upower-glib
WANTLIB += vorbis vorbisenc vorbisfile webkit2gtk-4.0 xcb xcb-dri2
WANTLIB += xcb-glx xcb-render xcb-shm xcb-xfixes xml2 z
WANTLIB += heimdal/lib/heimsqlite

MODULES=		security/heimdal \
			x11/gnome

LIB_DEPENDS=		audio/pulseaudio \
			audio/libcanberra,-gtk3 \
			devel/libgtop2 \
			graphics/colord-gtk \
			net/samba \
			print/cups,-libs \
			security/libpwquality \
			sysutils/accountsservice \
			sysutils/upower \
			x11/gnome/desktop \
			x11/gnome/grilo \
			x11/gnome/online-accounts

BUILD_DEPENDS=		x11/gnome/settings-daemon \
			devel/iso-codes \
			devel/gsettings-desktop-schemas

RUN_DEPENDS=		x11/gnome/settings-daemon \
			devel/iso-codes \
			devel/gsettings-desktop-schemas

# NOTE that a11y dependencies (e.g. mousetweaks, caribou...) are not
# enforced on purpose.

# polkit(8) almost always needs to know the "active" session
RUN_DEPENDS +=	sysutils/consolekit

# needed for gnome-color-panel
RUN_DEPENDS +=		x11/gnome/color-manager

# needed for gnome-power-panel+gnome-screen-panel
RUN_DEPENDS +=		x11/gnome/power-manager

# needed for gnome-printers-panel
RUN_DEPENDS +=		print/cups-pk-helper

# gkbd-keyboard-display
RUN_DEPENDS +=		x11/gnome/libgnomekbd

# calls grl_registry_load...plugin
RUN_DEPENDS +=		x11/gnome/grilo-plugins

# needed for gnome-region-panel; optional and would create a cyclic dep:
# gnome-session -> gnome-shell -> gnome-control-center -> gnome-session
#RUN_DEPENDS +=		x11/gnome/session

MODGNOME_TOOLS += desktop-file-utils docbook gtk-update-icon-cache yelp
MODGNOME_CPPFLAGS=	-I${X11BASE}/include
MODGNOME_LDFLAGS=	-L${X11BASE}/lib

FAKE_FLAGS=		sysconfdir=${PREFIX}/share/examples/gnome-control-center

# XXX
# http://permalink.gmane.org/gmane.comp.gnome.desktop/51950
# https://bugzilla.gnome.org/show_bug.cgi?id=770758#c3
# https://bugzilla.gnome.org/show_bug.cgi?id=766329
# https://bugzilla.gnome.org/show_bug.cgi?id=772736 (systemd --user
post-install:
	rm ${PREFIX}/share/applications/gnome-sharing-panel.desktop

.include <bsd.port.mk>
@


1.23
log
@Update to gnome-control-center-3.22.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2017/02/19 14:43:49 ajacoutot Exp $
d32 1
a32 1
WANTLIB += sqlite3 ssl stdc++ tasn1 telepathy-glib upower-glib
@


1.22
log
@First shot at fixing the idn -> idn2 failure after gnutls dependency change.
List provided by naddy@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2017/01/20 13:43:47 ajacoutot Exp $
d8 1
a8 2
GNOME_VERSION=		3.22.1
REVISION=		2
@


1.21
log
@Regen WANTLIB to unbreak after pulseaudio lost its dependency on json-c.

reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/12/17 15:00:22 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
d27 1
a27 1
WANTLIB += iconv icudata icuuc idn intl javascriptcoregtk-4.0
@


1.20
log
@Sync WANTLIB after heimdal update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/11/01 07:12:56 ajacoutot Exp $
d9 1
a9 1
REVISION=		0
d20 1
a20 1
WANTLIB += colord-gtk colordprivate crack crypto cups
d28 1
a28 1
WANTLIB += json-c json-glib-1.0 kvm lber-2.4 lcms2 ltdl lzma m
@


1.19
log
@Update to gnome-control-center-3.22.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/10/12 08:18:06 ajacoutot Exp $
d9 1
d16 1
a16 1
WANTLIB += FLAC GL ICE SM X11 X11-xcb Xau Xcomposite Xcursor Xdamage
d20 1
a20 1
WANTLIB += colord-gtk colordprivate com_err crack crypto cups
d30 1
a30 1
WANTLIB += pangoft2-1.0 pcre pixman-1 png polkit-gobject-1 pthread
@


1.18
log
@Update to gnome-control-center-3.20.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/04/25 16:46:37 ajacoutot Exp $
d8 1
a8 1
GNOME_VERSION=		3.20.2
d50 1
a50 1
			x11/gnome/grilo>=0.3.0 \
d91 8
@


1.17
log
@Update to gnome-control-center-3.20.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/03/18 23:12:20 naddy Exp $
d8 1
a8 1
GNOME_VERSION=		3.20.1
d34 1
a34 2
WANTLIB += xcb-glx xcb-render xcb-shape xcb-shm xcb-xfixes xml2
WANTLIB += z
@


1.16
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2016/01/17 17:29:11 sthen Exp $
d8 1
a8 2
GNOME_VERSION=		3.18.2
REVISION=		1
d16 20
a35 18
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xtst accountsservice
WANTLIB += atk-1.0 atk-bridge-2.0 atspi avahi-common c cairo cairo-gobject
WANTLIB += canberra canberra-gtk3 colord colord-gtk colordprivate
WANTLIB += com_err crack crypto cups dbus-1 dbus-glib-1 epoxy
WANTLIB += execinfo expat ffi fontconfig freetype gcrypt gdbm
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gmp
WANTLIB += gnome-desktop-3 goa-1.0 goa-backend-1.0 gobject-2.0
WANTLIB += gpg-error graphite2 grilo-0.2 gstaudio-1.0 gstbase-1.0
WANTLIB += gstreamer-1.0 gsttag-1.0 gstvideo-1.0 gthread-2.0 gtk-3
WANTLIB += gtop-2.0 harfbuzz hogweed ibus-1.0 icudata icuuc javascriptcoregtk-4.0
WANTLIB += json-c json-glib-1.0 kvm lcms2 ltdl lzma m nettle ogg
WANTLIB += orc-0.4 p11-kit pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png polkit-gobject-1 pthread pthread-stubs
WANTLIB += pulse pulse-mainloop-glib pwquality rest-0.7 secret-1
WANTLIB += smbclient sndfile soup-2.4 soup-gnome-2.4 sqlite3 stdc++
WANTLIB += tasn1 telepathy-glib upower-glib vorbis vorbisenc vorbisfile
WANTLIB += webkit2gtk-4.0 xcb xcb-render xcb-shm xml2 z lber-2.4 sasl2 ssl
WANTLIB += Xxf86vm drm gbm glapi xcb-dri2 xcb-glx xcb-shape xcb-xfixes
d38 1
a38 2
MODULES=		devel/gettext \
			security/heimdal \
d51 1
a51 1
			x11/gnome/grilo \
@


1.15
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/12/11 14:08:07 jasper Exp $
a3 2

SHARED_ONLY=		Yes
@


1.14
log
@force a rebuild after libgtop update; needed at least to get system-monitor to
report data back again
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/11/10 13:57:18 ajacoutot Exp $
d11 1
a11 1
REVISION=		0
d36 1
@


1.13
log
@Update to gnome-control-center-3.18.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/10/18 13:23:56 ajacoutot Exp $
d11 1
@


1.12
log
@Update to gnome-control-center-3.18.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/08/18 09:55:47 ajacoutot Exp $
d10 1
a10 1
GNOME_VERSION=		3.18.1
@


1.11
log
@Sync with upstream (Support for new "Pyongyang Time").
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/08/17 10:39:36 ajacoutot Exp $
d10 1
a10 2
GNOME_VERSION=		3.16.3
REVISION=		2
d34 1
a34 1
WANTLIB += webkit2gtk-4.0 xcb xcb-render xcb-shm xml2 z
a91 5

# XXX remove at the next major release
# https://git.gnome.org/browse/gnome-control-center/commit/?id=cc600a918b2a6c34ae81cf85ef7b49a8e3f02ee6
post-extract:
	cp ${FILESDIR}/*.png ${WRKSRC}/panels/datetime/data/
@


1.10
log
@Unbreak after recent North Korea timezone change.
breakage reported by G anymede, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/08/15 11:13:42 ajacoutot Exp $
d11 1
a11 1
REVISION=		1
d93 5
@


1.9
log
@Bump after the consolekit->consolekit2 renaming.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.8 2015/07/22 18:27:48 ajacoutot Exp $

# XXX remove hostnames-test.txt hack in pre-configure when updating to 3.12.0
# https://git.gnome.org/browse/gnome-control-center/commit/?id=4736b03ed9e2ae9214117454f70811dbacd78739
d11 1
a11 1
REVISION=		0
@


1.8
log
@Update to gnome-control-center-3.16.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/05/12 15:41:40 ajacoutot Exp $
d14 1
@


1.7
log
@Update to gnome-control-center-3.16.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/04/15 15:28:28 ajacoutot Exp $
d13 1
a13 1
GNOME_VERSION=		3.16.2
@


1.6
log
@Update to gnome-control-center-3.16.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/04/15 09:40:53 ajacoutot Exp $
d13 1
a13 1
GNOME_VERSION=		3.16.1
@


1.5
log
@Bump after libepoxy moved from ports to xenocara.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/04/08 06:46:56 ajacoutot Exp $
d13 1
a13 2
GNOME_VERSION=		3.16.0
REVISION=		3
@


1.4
log
@Regen WANTLIB to unbreak.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/04/04 09:21:05 ajacoutot Exp $
d14 1
a14 1
REVISION=		2
@


1.3
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/04/03 18:16:52 ajacoutot Exp $
d14 1
a14 1
REVISION=		1
d21 9
a29 10
WANTLIB += EGL FLAC GL ICE SM X11 X11-xcb Xau Xcomposite Xcursor
WANTLIB += Xdamage Xext Xfixes Xi Xinerama Xrandr Xrender Xt Xtst
WANTLIB += accountsservice atk-1.0 atk-bridge-2.0 atspi avahi-common
WANTLIB += c cairo cairo-gobject canberra canberra-gtk3 colord
WANTLIB += colord-gtk colordprivate com_err crack crypto cups
WANTLIB += dbus-1 dbus-glib-1 enchant epoxy execinfo expat ffi
WANTLIB += fontconfig freetype gbm gcrypt gdbm gdk-3 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gmp gnome-desktop-3 goa-1.0
WANTLIB += goa-backend-1.0 gobject-2.0 gpg-error graphite2 grilo-0.2
WANTLIB += gstapp-1.0 gstaudio-1.0 gstbase-1.0 gstfft-1.0 gstpbutils-1.0
d31 8
a38 9
WANTLIB += gtop-2.0 harfbuzz harfbuzz-icu hogweed ibus-1.0 icudata
WANTLIB += icui18n icuuc javascriptcoregtk-3.0 jpeg json-c json-glib-1.0
WANTLIB += kvm lcms2 ltdl lzma m nettle ogg orc-0.4 p11-kit pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png polkit-gobject-1
WANTLIB += pthread pthread-stubs pulse pulse-mainloop-glib pwquality
WANTLIB += rest-0.7 secret-1 smbclient sndfile soup-2.4 soup-gnome-2.4
WANTLIB += sqlite3 stdc++ tasn1 telepathy-glib upower-glib vorbis
WANTLIB += vorbisenc vorbisfile webkitgtk-3.0 webp xcb xcb-render
WANTLIB += xcb-shm xml2 xslt z
@


1.2
log
@Missing @@pkgpath.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2015/04/03 11:45:46 ajacoutot Exp $
d14 1
a14 1
REVISION=		0
@


1.1
log
@controlcenter -> control-center to match the package name.

discussed with jasper@@
not bumping the 2 dependent ports because they are part of the GNOME 3.16
update in progress.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2015/04/03 11:42:41 ajacoutot Exp $
d14 1
@

