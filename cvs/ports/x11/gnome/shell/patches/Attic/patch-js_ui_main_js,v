head	1.4;
access;
symbols
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	jasper_20120807:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2012.09.30.14.45.23;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2012.08.29.11.56.27;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2012.07.08.15.39.11;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.07.08.14.53.14;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.07.08.14.53.14;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update to gnome-shell-3.6.0
@
text
@$OpenBSD: patch-js_ui_main_js,v 1.3 2012/08/29 11:56:27 jasper Exp $

Make Network Manager support optional.
https://bugzilla.gnome.org/show_bug.cgi?id=679871

--- js/ui/main.js.orig	Mon Apr 16 18:41:48 2012
+++ js/ui/main.js	Sat Jul 14 11:56:05 2012
@@@@ -12,6 +12,7 @@@@ const St = imports.gi.St;
 
 const AutomountManager = imports.ui.automountManager;
 const AutorunManager = imports.ui.autorunManager;
+const Config = imports.misc.config;
 const CtrlAltTab = imports.ui.ctrlAltTab;
 const EndSessionDialog = imports.ui.endSessionDialog;
 const PolkitAuthenticationAgent = imports.ui.polkitAuthenticationAgent;
@@@@ -26,7 +27,6 @@@@ const PlaceDisplay = imports.ui.placeDisplay;
 const RunDialog = imports.ui.runDialog;
 const Layout = imports.ui.layout;
 const LookingGlass = imports.ui.lookingGlass;
-const NetworkAgent = imports.ui.networkAgent;
 const NotificationDaemon = imports.ui.notificationDaemon;
 const WindowAttentionHandler = imports.ui.windowAttentionHandler;
 const Scripting = imports.ui.scripting;
@@@@ -38,6 +38,9 @@@@ const XdndHandler = imports.ui.xdndHandler;
 const StatusIconDispatcher = imports.ui.statusIconDispatcher;
 const Util = imports.misc.util;
 
+if (Config.HAVE_NETWORK_MANAGER)
+        const NetworkAgent = imports.ui.networkAgent;
+
 const OVERRIDES_SCHEMA = 'org.gnome.shell.overrides';
 const DEFAULT_BACKGROUND_COLOR = new Clutter.Color();
 DEFAULT_BACKGROUND_COLOR.from_pixel(0x2266bbff);
@@@@ -85,7 +88,9 @@@@ function _createUserSession() {
     telepathyClient = new TelepathyClient.Client();
     automountManager = new AutomountManager.AutomountManager();
     autorunManager = new AutorunManager.AutorunManager();
-    networkAgent = new NetworkAgent.NetworkAgent();
+
+    if (Config.HAVE_NETWORK_MANAGER)
+	    networkAgent = new NetworkAgent.NetworkAgent();
 }
 
 function _createGDMSession() {
@


1.3
log
@Make NetworkManager support optional; this is a cleaner approach than
what we previously had in tree.

ok aja@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Activate the browser plugin to be able to install gnome-shell extensions.
Comment the libtool modules la files.
Missing update-desktop-database goo.
Explicitely disable systemd.
Don't RUN_DEPENDS on evolution, it's technically not required.
Add a comment in the patches that they need to be pushed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-js_ui_main_js,v 1.1.1.1 2012/07/08 14:53:14 jasper Exp $
d3 2
a4 2
Remove network-related functionality, as this requires NetworkManager.
(XXX make a patch committable upstream)
d6 11
a16 3
--- js/ui/main.js.orig	Sun Jul  8 15:24:59 2012
+++ js/ui/main.js	Sun Jul  8 15:25:24 2012
@@@@ -26,7 +26,6 @@@@ const PlaceDisplay = imports.ui.placeDisplay;
d24 11
a34 1
@@@@ -85,7 +84,6 @@@@ function _createUserSession() {
d39 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d4 1
@


1.1.1.1
log
@*finally* import gnome-shell, the last component that was missing for gnome-3.

The GNOME Shell redefines user interactions with the GNOME desktop. In
particular, it offers new paradigms for launching applications,
accessing documents, and organizing open windows in GNOME. Later, it
will introduce a new applets eco-system and offer new solutions for
other desktop features, such as notifications and contacts management.
The GNOME Shell is intended to replace functions handled by the GNOME
Panel and by the window manager in previous versions of GNOME. The GNOME
Shell has rich visual effects enabled by new graphical technologies.

still has a few rough edges, but this will be dealt with in-tree.

ok aja@@
@
text
@@
