head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2011.09.27.07.39.07;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2011.09.12.07.28.55;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to yelp-3.2.0.
@
text
@$OpenBSD: patch-libyelp_yelp-uri_c,v 1.1 2011/09/12 07:28:55 jasper Exp $

From e6e1bfec226fd91decd4ef972637589f38dc5e4d Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Tue, 14 Jun 2011 22:08:27 +0000
Subject: Don't use stdout as a variable name.

--- libyelp/yelp-uri.c.orig	Wed May 11 12:47:43 2011
+++ libyelp/yelp-uri.c	Wed May 11 12:48:16 2011
@@@@ -876,7 +876,7 @@@@ static gchar*
 find_man_path (gchar* name, gchar* section)
 {
     gchar* argv[] = { "man", "-w", NULL, NULL, NULL };
-    gchar *stdout = NULL;
+    gchar *ystdout = NULL;
     gint status;
     gchar **lines;
     GError *error = NULL;
@@@@ -893,21 +893,21 @@@@ find_man_path (gchar* name, gchar* section)
     if (!g_spawn_sync (NULL, argv, NULL,
                        G_SPAWN_SEARCH_PATH | G_SPAWN_STDERR_TO_DEV_NULL,
                        NULL, NULL,
-                       &stdout, NULL, &status, &error)) {
+                       &ystdout, NULL, &status, &error)) {
         g_warning ("Couldn't find path for %s(%s). Error: %s",
                    name, section, error->message);
         g_error_free (error);
     }
 
     if (status == 0) {
-        lines = g_strsplit (stdout, "\n", 2);
-        g_free (stdout);
-        stdout = g_strdup (lines[0]);
+        lines = g_strsplit (ystdout, "\n", 2);
+        g_free (ystdout);
+        ystdout = g_strdup (lines[0]);
 
         g_strfreev (lines);
-        return stdout;
+        return ystdout;
     } else {
-        g_free (stdout);
+        g_free (ystdout);
         return NULL;
     }
 }
@


1.1
log
@Moar GNOME3 merge
@
text
@d1 1
a1 1
$OpenBSD: patch-libyelp_yelp-uri_c,v 1.3 2011/06/15 05:10:34 ajacoutot Exp $
@

