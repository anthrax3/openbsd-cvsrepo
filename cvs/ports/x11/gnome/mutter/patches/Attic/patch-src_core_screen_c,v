head	1.9;
access;
symbols
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2016.04.26.07.42.08;	author jasper;	state dead;
branches;
next	1.8;
commitid	W5801jPjIsMHo96G;

1.8
date	2016.03.19.11.26.13;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	5usYiMDbplqpB6n4;

1.7
date	2015.10.24.14.07.00;	author jasper;	state Exp;
branches;
next	1.6;
commitid	xhs70XkmxeRFGwFI;

1.6
date	2015.04.03.16.47.17;	author jasper;	state Exp;
branches;
next	1.5;
commitid	wYfBy6Xs8W16SXAM;

1.5
date	2014.12.22.09.23.29;	author jasper;	state Exp;
branches;
next	1.4;
commitid	TqHMkAGTbHaTtKnN;

1.4
date	2014.10.08.09.47.35;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	dBUmBMXTGUpjbyta;

1.3
date	2014.10.05.19.52.32;	author jasper;	state Exp;
branches;
next	1.2;
commitid	uBxYdSJxLVnrAUhO;

1.2
date	2014.03.27.19.04.40;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2014.02.18.11.02.11;	author stsp;	state Exp;
branches;
next	;


desc
@@


1.9
log
@update to mutter-3.20.1
@
text
@$OpenBSD: patch-src_core_screen_c,v 1.8 2016/03/19 11:26:13 ajacoutot Exp $

From 70f20c90bd627be842b40396cf0c898b357f2dd0 Mon Sep 17 00:00:00 2001
From: Rui Matos <tiagomatos@@gmail.com>
Date: Mon, 7 Mar 2016 17:24:13 +0100
Subject: Handle meta_screen_get_monitor_for_point() returning NULL


- Use new Startup Notification API.

--- src/core/screen.c.orig	Sat Mar 19 12:16:22 2016
+++ src/core/screen.c	Sat Mar 19 12:16:35 2016
@@@@ -1267,7 +1267,8 @@@@ root_cursor_prepare_at (MetaCursorSprite *cursor_sprit
   monitor = meta_screen_get_monitor_for_point (screen, x, y);
 
   /* Reload the cursor texture if the scale has changed. */
-  meta_cursor_sprite_set_theme_scale (cursor_sprite, monitor->scale);
+  if (monitor)
+    meta_cursor_sprite_set_theme_scale (cursor_sprite, monitor->scale);
 }
 
 static void
@@@@ -2627,7 +2628,8 @@@@ collect_timed_out_foreach (void *element,
 {
   CollectTimedOutData *ctod = data;
   SnStartupSequence *sequence = element;
-  long tv_sec, tv_usec;
+  time_t tv_sec;
+  suseconds_t tv_usec;
   double elapsed;
 
   sn_startup_sequence_get_last_active_time (sequence, &tv_sec, &tv_usec);
@


1.8
log
@Fix mouse cursor disappearing (upstream).
https://bugzilla.gnome.org/show_bug.cgi?id=763159

prodded by mpi@@
cvs: ----------------------------------------------------------------------
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_screen_c,v 1.7 2015/10/24 14:07:00 jasper Exp $
@


1.7
log
@update to mutter-3.18.1
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_screen_c,v 1.6 2015/04/03 16:47:17 jasper Exp $
d3 4
a6 1
Use new Startup Notification API.
d8 16
a23 3
--- src/core/screen.c.orig	Thu Oct 15 18:50:36 2015
+++ src/core/screen.c	Sat Oct 24 14:54:46 2015
@@@@ -2627,7 +2627,8 @@@@ collect_timed_out_foreach (void *element,
@


1.6
log
@update to mutter-3.16.0
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_screen_c,v 1.5 2014/12/22 09:23:29 jasper Exp $
d5 3
a7 3
--- src/core/screen.c.orig	Mon Mar 23 18:47:23 2015
+++ src/core/screen.c	Fri Apr  3 14:53:50 2015
@@@@ -2571,7 +2571,8 @@@@ collect_timed_out_foreach (void *element,
@


1.5
log
@update to mutter-3.14.3
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_screen_c,v 1.4 2014/10/08 09:47:35 ajacoutot Exp $
d5 3
a7 3
--- src/core/screen.c.orig	Fri Dec 19 11:57:58 2014
+++ src/core/screen.c	Mon Dec 22 09:59:26 2014
@@@@ -2580,7 +2580,8 @@@@ collect_timed_out_foreach (void *element,
@


1.4
log
@Fix stacking of the guard window (upstream); this should fix disappearing
cursor.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_core_screen_c,v 1.3 2014/10/05 19:52:32 jasper Exp $
d5 3
a7 3
--- src/core/screen.c.orig	Mon Sep 22 19:57:01 2014
+++ src/core/screen.c	Sun Oct  5 20:22:03 2014
@@@@ -2590,7 +2590,8 @@@@ collect_timed_out_foreach (void *element,
@


1.3
log
@update to mutter-3.14.0
@
text
@d1 4
a4 1
$OpenBSD: patch-src_core_screen_c,v 1.2 2014/03/27 19:04:40 jasper Exp $
@


1.2
log
@update to mutter-3.12.0
@
text
@d1 4
a4 4
$OpenBSD: patch-src_core_screen_c,v 1.1 2014/02/18 11:02:11 stsp Exp $
--- src/core/screen.c.orig	Thu Mar 13 12:55:59 2014
+++ src/core/screen.c	Thu Mar 27 17:11:55 2014
@@@@ -2777,7 +2777,8 @@@@ collect_timed_out_foreach (void *element,
d12 1
a12 1
   
@


1.1
log
@In mutter, fix size mismatch on 32bit architectures due to time_t-related
API/ABI patch in devel/startup-notification. A pointer to time_t vs pointer
to long problem. Same bug as recently fixed in XFCE's xfwm.
ok sthen aja jasper
@
text
@d1 4
a4 4
$OpenBSD$
--- src/core/screen.c.orig	Mon Feb 17 19:48:27 2014
+++ src/core/screen.c	Mon Feb 17 19:49:08 2014
@@@@ -3038,7 +3038,8 @@@@ collect_timed_out_foreach (void *element,
@

