head	1.3;
access;
symbols
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2012.04.07.11.07.54;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2012.03.29.07.23.22;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.01.02.13.22.21;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Restore shutdown capability.
Remove undeeded patches.
@
text
@$OpenBSD: patch-tools_gnome-session-check-accelerated-helper_c,v 1.2 2012/03/29 07:23:22 ajacoutot Exp $

XXX remove when we have gnome-shell.

--- tools/gnome-session-check-accelerated-helper.c.orig	Mon Dec 19 10:47:00 2011
+++ tools/gnome-session-check-accelerated-helper.c	Wed Mar 28 16:23:14 2012
@@@@ -407,6 +407,10 @@@@ main (int argc, char **argv)
                         _print_error ("Invalid value for gnome.fallback passed in kernel command line.");
         }
 
+#ifdef __OpenBSD__
+	_print_error ("Running on OpenBSD, forcing fallback mode.");
+	goto out;
+#endif
         display = XOpenDisplay (NULL);
         if (!display) {
                 _print_error ("No X display.");
@


1.2
log
@Update to gnome-session-3.4.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_gnome-session-check-accelerated-helper_c,v 1.1 2012/01/02 13:22:21 ajacoutot Exp $
@


1.1
log
@Make gnome-session-check-accelerated-helper always return 1.
This prevents gnome-session from trying to start gnome-shell (which we
still do not have) when prerequisites for it are there.

This should fix issues seen by several where gnome-session would just
fail to start by trying to run gnome-shell.
@
text
@d1 1
a1 1
$OpenBSD$
d5 5
a9 5
--- tools/gnome-session-check-accelerated-helper.c.orig	Mon Jan  2 14:19:34 2012
+++ tools/gnome-session-check-accelerated-helper.c	Mon Jan  2 14:19:17 2012
@@@@ -260,6 +260,10 @@@@ main (int argc, char **argv)
         Display *display = NULL;
         int      ret = 1;
@

