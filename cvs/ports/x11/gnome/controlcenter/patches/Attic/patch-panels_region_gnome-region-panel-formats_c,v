head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2011.10.17.15.33.28;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2011.10.03.13.49.32;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.10.03.13.21.29;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.10.02.13.31.33;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.09.27.12.15.23;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to gnome-control-center-3.2.1.
@
text
@$OpenBSD: patch-panels_region_gnome-region-panel-formats_c,v 1.4 2011/10/03 13:49:32 ajacoutot Exp $

From 8a0c2e1b27171968974c51ee449b5d6119eb271a Mon Sep 17 00:00:00 2001
From: Bastien Nocera <hadess@@hadess.net>
Date: Mon, 03 Oct 2011 13:32:23 +0000
Subject: region: Align the example dates

From 7b8b773cf33c638af3ccd3ec365c5f84487afa88 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Mon, 03 Oct 2011 13:15:15 +0000
Subject: region: Fix build on systems without LC_MEASUREMENT

--- panels/region/gnome-region-panel-formats.c.orig	Tue Aug 23 10:23:42 2011
+++ panels/region/gnome-region-panel-formats.c	Mon Oct  3 15:36:20 2011
@@@@ -38,6 +38,7 @@@@ display_date (GtkLabel *label, GDateTime *dt, const gc
 	gchar *s;
 
 	s = g_date_time_format (dt, format);
+	s = g_strstrip (s);
 	gtk_label_set_text (label, s);
 	g_free (s);
 }
@@@@ -132,6 +133,7 @@@@ update_examples_cb (GtkTreeSelection *selection, gpoin
 	g_free (locale);
 
 	/* Display measurement */
+#ifdef LC_MEASUREMENT
 	locale = g_strdup (setlocale (LC_MEASUREMENT, NULL));
 	setlocale (LC_MEASUREMENT, active_id);
 
@@@@ -143,6 +145,7 @@@@ update_examples_cb (GtkTreeSelection *selection, gpoin
 
 	setlocale (LC_MEASUREMENT, locale);
 	g_free (locale);
+#endif
         g_free (active_id);
 }
 
@


1.4
log
@Align the example dates in the display panel, from upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-panels_region_gnome-region-panel-formats_c,v 1.3 2011/10/03 13:21:29 ajacoutot Exp $
@


1.3
log
@Fix url to upstream BZ which has changed.
@
text
@d1 1
a1 1
$OpenBSD: patch-panels_region_gnome-region-panel-formats_c,v 1.2 2011/10/02 13:31:33 ajacoutot Exp $
d3 9
a11 1
https://bugzilla.gnome.org/show_bug.cgi?id=660787
d14 10
a23 2
+++ panels/region/gnome-region-panel-formats.c	Sun Oct  2 15:13:45 2011
@@@@ -132,6 +132,7 @@@@ update_examples_cb (GtkTreeSelection *selection, gpoin
d31 1
a31 1
@@@@ -143,6 +144,7 @@@@ update_examples_cb (GtkTreeSelection *selection, gpoin
@


1.2
log
@Better LC_* patches.
@
text
@d1 1
a1 1
$OpenBSD: patch-panels_region_gnome-region-panel-formats_c,v 1.1 2011/09/27 12:15:23 ajacoutot Exp $
d3 1
a3 1
https://bugzilla.gnome.org/show_bug.cgi?id=660692
@


1.1
log
@Update to gnome-control-center-3.2.0.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
Fix build if some locale defines are missing.
d6 1
a6 1
+++ panels/region/gnome-region-panel-formats.c	Tue Sep 27 11:59:53 2011
d15 1
a15 6
@@@@ -139,10 +140,13 @@@@ update_examples_cb (GtkTreeSelection *selection, gpoin
 	if (fmt && *fmt == 2)
 		gtk_label_set_text (GTK_LABEL (gtk_builder_get_object (builder, "measurement_format")), _("Imperial"));
 	else
+#endif
 		gtk_label_set_text (GTK_LABEL (gtk_builder_get_object (builder, "measurement_format")), _("Metric"));
a16 1
+#ifdef LC_MEASUREMENT
@

