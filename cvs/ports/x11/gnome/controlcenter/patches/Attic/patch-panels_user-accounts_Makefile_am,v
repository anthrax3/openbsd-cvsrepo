head	1.6;
access;
symbols
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2014.08.15.09.27.28;	author ajacoutot;	state dead;
branches;
next	1.5;
commitid	alNq7rhYD9oVmsnj;

1.5
date	2014.04.24.13.19.39;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.06.18.07.11.27;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2013.03.29.18.18.43;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.09.28.09.34.33;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.06.18.11.30.50;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Enable heimdal since it's a hard dependency for the users panel.
@
text
@$OpenBSD: patch-panels_user-accounts_Makefile_am,v 1.5 2014/04/24 13:19:39 ajacoutot Exp $

https://bugzilla.gnome.org/show_bug.cgi?id=728879

XXX -lcrypt: cook a better fix + push upstream

--- panels/user-accounts/Makefile.am.orig	Tue Oct  1 13:52:46 2013
+++ panels/user-accounts/Makefile.am	Thu Apr 24 13:37:12 2014
@@@@ -51,18 +51,21 @@@@ libuser_accounts_la_SOURCES =		\
 	um-editable-combo.c		\
 	um-user-panel.h 		\
 	um-user-panel.c			\
-	um-realm-manager.c		\
-	um-realm-manager.h		\
 	um-history-dialog.h		\
 	um-history-dialog.c		\
 	$(BUILT_SOURCES)
 
+if BUILD_KERBEROS
+libuser_accounts_la_SOURCES +=		\
+	um-realm-manager.c		\
+	um-realm-manager.h
+endif
+
 libuser_accounts_la_LIBADD = 		\
 	$(PANEL_LIBS)			\
 	$(USER_ACCOUNTS_PANEL_LIBS)	\
 	$(builddir)/../common/liblanguage.la	\
 	-lpwquality			\
-	-lcrypt				\
 	-lm
 
 if BUILD_CHEESE
@@@@ -88,13 +91,17 @@@@ frob_account_dialog_SOURCES = \
 	frob-account-dialog.c \
 	um-account-dialog.h \
 	um-account-dialog.c \
-	um-realm-manager.c \
-	um-realm-manager.h \
 	um-utils.h \
 	um-utils.c \
 	pw-utils.h \
 	pw-utils.c \
 	$(BUILT_SOURCES)
+
+if BUILD_KERBEROS
+frob_account_dialog_SOURCES += \
+	um-realm-manager.c \
+	um-realm-manager.h
+endif
 
 frob_account_dialog_LDADD = \
 	$(libuser_accounts_la_LIBADD)
@


1.5
log
@Make it possible to build the user-account panel without kerberos.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.4
log
@Enable user account panel.
@
text
@d1 1
a1 1
$OpenBSD: patch-panels_user-accounts_Makefile_am,v 1.3 2013/03/29 18:18:43 ajacoutot Exp $
d3 1
a3 1
On OpenBSD, crypt() is part of libc.
d5 22
a26 3
--- panels/user-accounts/Makefile.am.orig	Fri Mar 15 12:59:32 2013
+++ panels/user-accounts/Makefile.am	Fri Mar 29 18:14:56 2013
@@@@ -62,7 +62,6 @@@@ libuser_accounts_la_LIBADD = 		\
d34 20
@


1.3
log
@Update to gnome-control-center-3.8.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-panels_user-accounts_Makefile_am,v 1.2 2012/09/28 09:34:33 ajacoutot Exp $
@


1.2
log
@Update to gnome-control-center-3.6.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-panels_user-accounts_Makefile_am,v 1.1 2012/06/18 11:30:50 ajacoutot Exp $
d5 3
a7 12
--- panels/user-accounts/Makefile.am.orig	Mon Sep 24 17:39:34 2012
+++ panels/user-accounts/Makefile.am	Fri Sep 28 10:32:43 2012
@@@@ -10,7 +10,7 @@@@ ccpanels_LTLIBRARIES = libuser-accounts.la
 AM_CPPFLAGS =						\
 	-DDATADIR=\""$(datadir)"\"			\
 	-DUIDIR=\""$(pkgdatadir)/ui/user-accounts"\"	\
-	-DLIBLOCALEDIR=\""$(prefix)/lib/locale"\"       \
+	-DLIBLOCALEDIR=\""/usr/share/locale"\" 		\
 	-DGNOMELOCALEDIR=\""$(datadir)/locale"\"        \
 	-DUM_PIXMAP_DIR=\""$(pkgdatadir)/pixmaps"\"	\
 	-DHAVE_LIBPWQUALITY				\
@@@@ -67,7 +67,6 @@@@ libuser_accounts_la_LIBADD = 		\
d9 1
a9 1
 	$(top_builddir)/panels/common/liblanguage.la \
@


1.1
log
@Unbreak, reported by espie@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- panels/user-accounts/Makefile.am.orig	Mon Jun 18 13:05:02 2012
+++ panels/user-accounts/Makefile.am	Mon Jun 18 13:05:29 2012
d15 2
a16 3
 	-I$(srcdir)/../common/				\
@@@@ -56,7 +56,6 @@@@ libuser_accounts_la_LIBADD = 		\
 	$(PANEL_LIBS)			\
d19 1
@

