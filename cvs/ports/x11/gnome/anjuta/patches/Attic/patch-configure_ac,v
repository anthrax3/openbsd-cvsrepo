head	1.17;
access;
symbols
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2;
locks; strict;
comment	@# @;


1.17
date	2014.10.06.07.27.33;	author jasper;	state dead;
branches;
next	1.16;
commitid	ZVogi8jb0PA9mPSd;

1.16
date	2014.10.01.08.53.49;	author jasper;	state Exp;
branches;
next	1.15;
commitid	pCvg0d9fwlVlE8IU;

1.15
date	2014.03.27.15.04.17;	author jasper;	state dead;
branches;
next	1.14;

1.14
date	2014.03.25.09.00.47;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2014.03.09.21.44.09;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.10.10.09.55.24;	author stsp;	state Exp;
branches;
next	1.11;

1.11
date	2013.05.21.06.59.15;	author jasper;	state dead;
branches;
next	1.10;

1.10
date	2013.05.14.07.23.43;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.30.10.48.34;	author jasper;	state dead;
branches;
next	1.8;

1.8
date	2012.10.21.15.22.05;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2012.09.28.18.56.55;	author jasper;	state dead;
branches;
next	1.6;

1.6
date	2012.08.29.14.11.55;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2012.03.29.07.22.04;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2012.02.26.15.06.56;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.11.21.15.21.33;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.18.19.26.52;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2011.09.13.08.37.47;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.17
log
@- update to anjuta-3.14.0
@
text
@$OpenBSD: patch-configure_ac,v 1.16 2014/10/01 08:53:49 jasper Exp $

Recognize vala 0.26

--- configure.ac.orig	Tue Sep 30 01:33:22 2014
+++ configure.ac	Tue Sep 30 01:33:37 2014
@@@@ -318,7 +318,7 @@@@ if test "$user_disabled_vala" = 1; then
 else
         AC_MSG_RESULT(no)
 	AC_MSG_CHECKING(if libvala is available)
-	m4_foreach([VERSION], [[0.18], [0.20], [0.22], [0.24]],
+	m4_foreach([VERSION], [[0.18], [0.20], [0.22], [0.24], [0.26]],
 		[PKG_CHECK_EXISTS([ libvala-VERSION ],
 			 [ valaver="-VERSION" ])
 			 ])
@


1.16
log
@unbreak after recent vala update
@
text
@d1 1
a1 1
$OpenBSD$
@


1.15
log
@update to anjuta-3.12.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.14 2014/03/25 09:00:47 jasper Exp $
d3 1
a3 4
From 5574b7c841d81bc9be6b5695a487babdfb94d789 Mon Sep 17 00:00:00 2001
From: Stefan Sperling <stsp@@tigris.org>
Date: Thu, 10 Oct 2013 20:31:54 +0000
Subject: bgo #709752 - Don't require neon library for Subversion 1.8
d5 3
a7 16
From f456efa285f4c7f97c89c60d5b006354b8b06466 Mon Sep 17 00:00:00 2001
From: Dominique Leuenberger <dimstar@@opensuse.org>
Date: Tue, 28 Jan 2014 20:38:55 +0000
Subject: Support Vala 0.24

--- configure.ac.orig	Tue Nov 12 22:17:07 2013
+++ configure.ac	Mon Mar 24 21:29:56 2014
@@@@ -58,6 +58,7 @@@@ GI_REQUIRED=0.9.5
 
 dnl Subversion plugin
 NEON_REQUIRED=0.28.2
+SERF_REQUIRED=1.2.0
 SVN_MAJOR=1
 SVN_MINOR=5
 SVN_PATCH=0
@@@@ -317,7 +318,7 @@@@ if test "$user_disabled_vala" = 1; then
d11 2
a12 2
-	m4_foreach([VERSION], [[0.18], [0.20], [0.22]],
+	m4_foreach([VERSION], [[0.18], [0.20], [0.22], [0.24]],
a15 79
@@@@ -653,6 +654,7 @@@@ fi
 dnl ******************************************************************
 dnl Check for extra libs required by subversion.
 dnl FIXME: This should actually be done by subversion and not by us.
+dnl        See http://subversion.tigris.org/issues/show_bug.cgi?id=4435
 dnl ******************************************************************
 
 AC_ARG_ENABLE(plugin-subversion,
@@@@ -662,6 +664,20 @@@@ AC_ARG_ENABLE(plugin-subversion,
     fi ],
   [ user_disabled_subversion=0 ] )
 
+AC_ARG_ENABLE(neon,
+	AS_HELP_STRING([--disable-neon],[Disable neon support in Subversion plugin]),
+	[ if test "$enableval" = "no"; then
+		user_disabled_neon=1
+	  fi ],
+	[ user_disabled_neon=0 ])
+
+AC_ARG_ENABLE(serf,
+	AS_HELP_STRING([--disable-serf],[Disable serf support in Subversion plugin]),
+	[ if test "$enableval" = "no"; then
+		user_disabled_serf=1
+	  fi ],
+	[ user_disabled_serf=0 ])
+
 AC_MSG_CHECKING(if subversion support is disabled)
 if test "$user_disabled_subversion" = 1; then
 	AC_MSG_RESULT(yes)
@@@@ -692,15 +708,26 @@@@ if test -n "$SVN_INCLUDE" ; then
 		SVN_INCLUDE=""
 	fi
 
-	dnl -----------------------------------------
-	dnl NEON. Required by subversion (devel)
-	dnl------------------------------------------
-	have_neon=no
-	PKG_CHECK_MODULES(NEON,                            \
-                neon, have_neon=yes, have_neon=no)
-        if test x"$have_neon" = "xno"; then
-		SVN_INCLUDE=""
+	dnl ----------------------------------------------------------
+	dnl NEON/SERF. Required by subversion (devel) for HTTP support
+	dnl-----------------------------------------------------------
+	# Subversion <= 1.7 relies on neon (recommended) or serf.
+	# Subversion 1.8 dropped neon support and uses serf to talk
+	# to HTTP servers.
+	#
+	# Subversion can be built without HTTP client support so neon and
+	# serf aren't hard requirements. But if present on the system
+	# it is reasonable to assume that Subversion is linked to them.
+	if test "$user_disabled_neon" = 0; then
+		have_neon=no
+		PKG_CHECK_MODULES(NEON,                            \
+			neon, have_neon=yes, have_neon=no)
 	fi
+	if test "$user_disabled_serf" = 0; then
+		have_serf=no
+		PKG_CHECK_MODULES(SERF,                            \
+			serf-1, have_serf=yes, have_serf=no)
+	fi
 
 	dnl Make sure our SVN version is high enough
 	dnl Eww, eww, eww, this is dirty
@@@@ -730,11 +757,11 @@@@ dnl ------------------------------------------
 if test -n "$SVN_INCLUDE" ; then
 	SVN_INCLUDE="-I$SVN_INCLUDE"
 	if test x != "x$SVN_LIB" ; then
-	    SVN_LIB="-L$SVN_LIB $APR_LIBS $APR_UTILS_LIBS $NEON_LIBS -lsvn_client-1 -lsvn_subr-1"
+	    SVN_LIB="-L$SVN_LIB $APR_LIBS $APR_UTILS_LIBS $NEON_LIBS $SERF_LIBS -lsvn_client-1 -lsvn_subr-1"
 	else
-	    SVN_LIB="$APR_LIBS $APR_UTILS_LIBS $NEON_LIBS -lsvn_client-1 -lsvn_subr-1"
+	    SVN_LIB="$APR_LIBS $APR_UTILS_LIBS $NEON_LIBS $SERF_LIBS -lsvn_client-1 -lsvn_subr-1"
 	fi
-	SVN_CFLAGS="$APR_CFLAGS $APR_UTILS_CFLAGS $NEON_CFLAGS"
+	SVN_CFLAGS="$APR_CFLAGS $APR_UTILS_CFLAGS $NEON_CFLAGS $SERF_CFLAGS"
 fi
 
 AM_CONDITIONAL(BUILD_SVN, [test -n "$SVN_INCLUDE"])
@


1.14
log
@fix for vala-0.24
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.13 2014/03/09 21:44:09 ajacoutot Exp $
@


1.13
log
@Drop patches and use substs instead.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.12 2013/10/10 09:55:24 stsp Exp $
d8 7
a14 2
--- configure.ac.orig	Mon Sep 16 03:23:08 2013
+++ configure.ac	Wed Oct  9 18:48:40 2013
d23 9
@


1.12
log
@Allow Anjuta to compile with Subversion 1.8. Patch submitted upstream.
ok ajacoutot jasper
@
text
@d1 7
a7 2
$OpenBSD$
https://bugzilla.gnome.org/show_bug.cgi?id=709752
@


1.11
log
@update to anjuta-3.8.3
@
text
@d1 82
a82 25
$OpenBSD: patch-configure_ac,v 1.10 2013/05/14 07:23:43 jasper Exp $

From 8d179e29235fba369b41552043d60292e540f432 Mon Sep 17 00:00:00 2001
From: SÃ©bastien Granjoux <seb.sfo@@free.fr>
Date: Sun, 12 May 2013 08:46:23 +0000
Subject: bgo #698158: anjuta-3.8.1 fails to build with vala-0.20

--- configure.ac.orig	Tue May 14 09:09:42 2013
+++ configure.ac	Tue May 14 09:10:11 2013
@@@@ -285,10 +285,10 @@@@ if test "$user_disabled_vala" = 1; then
 else
         AC_MSG_RESULT(no)
 	AC_MSG_CHECKING(if libvala is available)
-	PKG_CHECK_EXISTS([ libvala-0.18 ],
-			 [ valaver="-0.18" ],
-			 [ PKG_CHECK_EXISTS([ libvala-0.16 ],
-					    [ valaver="-0.16" ],
+	PKG_CHECK_EXISTS([ libvala-0.20 ],
+			 [ valaver="-0.20" ],
+			 [ PKG_CHECK_EXISTS([ libvala-0.18 ],
+					    [ valaver="-0.18" ],
 					    [ valaver="" ])
 			 ])
 	if test "x$valaver" != "x"; then
@@@@ -299,7 +299,7 @@@@ else
d84 2
a85 4
 		AC_MSG_RESULT(no)
 		enable_vala="no"
-		VALA_REQUIRED=0.16.0
+		VALA_REQUIRED=0.18.0
d87 2
a88 1
 	AC_SUBST(LIBVALA)
d90 2
@


1.10
log
@update to anjuta-3.8.2
* add a patch from upstream git to re-enable vala support
@
text
@d1 1
a1 1
$OpenBSD$
@


1.9
log
@- update to anjuta-3.8.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.8 2012/10/21 15:22:05 jasper Exp $
d3 4
a6 4
From ed542779a5d35c3cdef3567a9c1aaaf8cfa23b19 Mon Sep 17 00:00:00 2001
From: Sébastien Granjoux <seb.sfo@@free.fr>
Date: Sat, 13 Oct 2012 20:35:09 +0000
Subject: build: bgo#684758 - anjuta-3.5.91 fails to configure due to ac_ct_CXX check
d8 26
a33 15
--- configure.ac.orig	Sun Oct 21 17:18:52 2012
+++ configure.ac	Sun Oct 21 17:19:54 2012
@@@@ -80,10 +80,8 @@@@ fi
 AC_LANG([C])
 AC_LANG([C++])
 AC_PROG_CXX
-if test "x$ac_ct_CXX" = "x"
-then
-  AC_MSG_ERROR([C++ Compiler required to compile Anjuta])
-fi
+AC_LINK_IFELSE([AC_LANG_PROGRAM([], [])],,
+   AC_MSG_ERROR([C++ Compiler required to compile Anjuta]))
 AM_PROG_CC_C_O
 
 GNOME_COMPILE_WARNINGS([maximum])
@


1.8
log
@- remove XXX from Makefile and apply patch provided by upstream
@
text
@d1 1
a1 1
$OpenBSD$
@


1.7
log
@- update to anjuta-3.6.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.6 2012/08/29 14:11:55 jasper Exp $
d3 4
a6 4
From 63d60f62495a94d7743c0328315a91abb3703f31 Mon Sep 17 00:00:00 2001
From: Ryan Lortie <desrt@@desrt.ca>
Date: Fri, 22 Jun 2012 05:27:21 +0000
Subject: vala language support: update to Vala 0.18
d8 13
a20 5
--- configure.ac.orig	Wed Aug 29 08:49:55 2012
+++ configure.ac	Wed Aug 29 08:50:51 2012
@@@@ -52,9 +52,6 @@@@ LIBDEVHELP_REQUIRED=3.0.0
 dnl Glade
 GLADEUI_REQUIRED=3.11.0
d22 1
a22 29
-dnl Vala
-VALA14_REQUIRED=0.13.3
-
 dnl Introspection
 GI_REQUIRED=0.9.5
 
@@@@ -263,10 +260,10 @@@@ if test "$user_disabled_vala" = 1; then
 else
         AC_MSG_RESULT(no)
 	AC_MSG_CHECKING(if libvala is available)
-	PKG_CHECK_EXISTS([ libvala-0.16 ],
-			 [ valaver="-0.16" ],
-			 [ PKG_CHECK_EXISTS([ libvala-0.14 >= $VALA14_REQUIRED ],
-					    [ valaver="-0.14" ],
+	PKG_CHECK_EXISTS([ libvala-0.18 ],
+			 [ valaver="-0.18" ],
+			 [ PKG_CHECK_EXISTS([ libvala-0.16 ],
+					    [ valaver="-0.16" ],
 					    [ valaver="" ])
 			 ])
 	if test "x$valaver" != "x"; then
@@@@ -277,7 +274,6 @@@@ else
 	else
 		AC_MSG_RESULT(no)
 		enable_vala="no"
-		VALA_REQUIRED=$VALA14_REQUIRED
 	fi
 	AC_SUBST(LIBVALA)
 fi
@


1.6
log
@add patches from upstream to unbreak with new vala.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.5
log
@Update to anjuta-3.4.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.4 2012/02/26 15:06:56 ajacoutot Exp $
d3 4
a6 1
Fix build with vala>=0.15
d8 33
a40 20
--- configure.ac.orig	Fri Nov 18 21:43:15 2011
+++ configure.ac	Sun Feb 26 10:31:29 2012
@@@@ -80,10 +80,7 @@@@ AC_PROG_LEX
 if test "$LEX" != "flex"; then
 	AC_MSG_ERROR(flex is required)
 fi
-AC_PROG_YACC
-if test "$YACC" != "bison -y"; then
-	AC_MSG_ERROR(bison is required)
-fi
+YACC="bison -y"
 AC_LANG([C])
 AC_LANG([C++])
 AC_PROG_CXX
@@@@ -263,12 +260,12 @@@@ else
 	AC_MSG_RESULT(no)
 	enable_vala="yes"
 	PKG_CHECK_MODULES(VALA,
-		[libvala-0.14 >= $VALA_REQUIRED],LIBVALA="libvala-0.14")
+		[libvala-0.16 >= $VALA_REQUIRED],LIBVALA="libvala-0.16")
a42 7
 
 if test x$enable_vala = xyes; then
-	AC_PATH_PROGS(VALAC, [valac-0.14 valac], valac)
+	AC_PATH_PROGS(VALAC, [valac-0.16 valac], valac)
 	AC_SUBST(VALAC)
 fi
 
@


1.4
log
@Fix build with vala>=0.15.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.3 2011/11/21 15:21:33 ajacoutot Exp $
@


1.3
log
@Build the symbol-db plugin using a patch from FreeBSD.

missing functionnality reported by John Tate.
@
text
@d1 6
a6 3
$OpenBSD: patch-configure_ac,v 1.2 2011/09/18 19:26:52 jasper Exp $
--- configure.ac.orig	Sun Sep 18 15:14:26 2011
+++ configure.ac	Sun Sep 18 17:44:15 2011
d19 15
@


1.2
log
@- bugfix update to 3.1.92
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.1 2011/09/13 08:37:47 jasper Exp $
a15 12
@@@@ -294,10 +291,7 @@@@ fi
 
 AM_CONDITIONAL(HAVE_PYTHON, [test x$have_python = xyes])
 
-PKG_CHECK_MODULES([PLUGIN_SYMBOL_DB],
-     [libgda-5.0 >= $GDA5_REQUIRED],,
-     [PKG_CHECK_MODULES([PLUGIN_SYMBOL_DB],
-         [libgda-4.0 >= $GDA4_REQUIRED])])
+PKG_CHECK_MODULES([PLUGIN_SYMBOL_DB], [])
 
 dnl Disable packagekit support
 dnl -----------------------------------
@


1.1
log
@libgda is needed by the symbol-db plugin, which we don't build on OpenBSD.
though GDA_CFLAGS is used in various Makefile's. So instead of changing
dozens of files, we just drop the LIB_DEPENDS and keep the BUILD_DEPENDS.
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.ac.orig	Mon Sep  5 14:29:14 2011
+++ configure.ac	Tue Sep 13 10:24:13 2011
@@@@ -79,10 +79,7 @@@@ AC_PROG_LEX
d16 1
a16 1
@@@@ -285,10 +282,7 @@@@ fi
d26 2
a27 2
 dnl Setup Anjuta Library flags
 dnl --------------------------
@

