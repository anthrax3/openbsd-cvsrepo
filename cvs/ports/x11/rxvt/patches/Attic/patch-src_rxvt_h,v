head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2017.06.07.01.26.07;	author danj;	state dead;
branches;
next	1.1;
commitid	R36tq9YYNbj8cuZX;

1.1
date	2017.04.23.18.34.24;	author espie;	state Exp;
branches;
next	;
commitid	8P346aH8AaNdLBmY;


desc
@@


1.2
log
@Upstream is dead and code has security issues (CVE-2017-7483 for instance)
Users can easily switch to rxvt-unicode

ok tb@@ fcambus@@
@
text
@$OpenBSD: patch-src_rxvt_h,v 1.1 2017/04/23 18:34:24 espie Exp $
--- src/rxvt.h.orig	Sun Apr 23 20:30:12 2017
+++ src/rxvt.h	Sun Apr 23 20:30:59 2017
@@@@ -1092,6 +1092,7 @@@@ struct rxvt_hidden {
     unsigned char   kbuf[KBUFSZ];
 };
 
+#ifndef __clang__
 #ifndef __attribute__
 # ifdef __GNUC__
 #  if (__GNUC__ == 2 && __GNUC_MINOR__ < 5) || (__GNUC__ < 2)
@@@@ -1099,6 +1100,7 @@@@ struct rxvt_hidden {
 #  endif
 # endif
 # define __attribute__(x)
+#endif
 #endif
 
 /*
@


1.1
log
@clang supports __attribute__ but it's not a macro, so rxvt compatibility glue
ends up disabling it, thus breaking __only_inline very thoroughly
@
text
@d1 1
a1 1
$OpenBSD$
@

