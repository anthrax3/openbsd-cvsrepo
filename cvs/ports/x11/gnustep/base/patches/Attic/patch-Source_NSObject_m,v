head	1.11;
access;
symbols
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.7.0.2
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.4
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	ajacoutot_20070528:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2011.07.19.06.29.09;	author sebastia;	state dead;
branches;
next	1.10;

1.10
date	2011.05.24.13.58.28;	author sebastia;	state Exp;
branches;
next	1.9;

1.9
date	2011.04.18.11.54.49;	author sebastia;	state Exp;
branches;
next	1.8;

1.8
date	2011.01.10.18.23.33;	author sebastia;	state Exp;
branches;
next	1.7;

1.7
date	2010.08.01.12.52.42;	author sebastia;	state Exp;
branches;
next	1.6;

1.6
date	2010.05.23.10.32.48;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.05.16.08.06.33;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.12.16.43.47;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.12.23.15.25.31;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.06.23.10.59.37;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.05.29.03.01.35;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.05.29.03.01.35;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.11
log
@update gnustep-base to 1.22.1.
getting rid of two patches that made it into upstream.
Add a patch that disables the generation of backtraces, when trying to
handle exceptions, which caused hangs and 100% CPU hogging.
This makes many GNUstep applications happy, hopefully finding a better
way soon.

OK landry@@
@
text
@$OpenBSD: patch-Source_NSObject_m,v 1.10 2011/05/24 13:58:28 sebastia Exp $

fix building with clang, not needed yet, but to not forget about it

--- Source/NSObject.m.orig	Thu Apr 14 14:36:06 2011
+++ Source/NSObject.m	Mon May 23 12:57:03 2011
@@@@ -955,7 +955,7 @@@@ objc_create_block_classes_as_subclasses_of(Class super
       finalize_sel = @@selector(finalize);
       finalize_imp = class_getMethodImplementation(self, finalize_sel);
 
-#if (defined(__FreeBSD__) || defined(__OpenBSD__)) && defined(__i386__)
+#if defined(__FreeBSD__) && defined(__i386__)
       // Manipulate the FPU to add the exception mask. (Fixes SIGFPE
       // problems on *BSD)
       // Note this only works on x86
@


1.10
log
@Fix lookup of Application bundles when apps are started with full path, bump and regen patches.

OK jasper@@, landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_NSObject_m,v 1.9 2011/04/18 11:54:49 sebastia Exp $
@


1.9
log
@update gnustep-base to 1.22.0, major bump needed

OK landry@@, ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_NSObject_m,v 1.8 2011/01/10 18:23:33 sebastia Exp $
d5 4
a8 3
--- Source/NSObject.m.orig	Sun Apr  3 10:53:10 2011
+++ Source/NSObject.m	Mon Apr  4 17:16:24 2011
@@@@ -945,7 +947,7 @@@@ objc_create_block_classes_as_subclasses_of(Class super
a9 1
 #endif
@


1.8
log
@Update to gnustep-base-1.20.2.
While there, restructure a patch to be able to clean-up the Makefile a bit.
Fix build on mips64, thought, its not enabled there yet.

OK jasper@@, landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_NSObject_m,v 1.7 2010/08/01 12:52:42 sebastia Exp $
d3 1
a3 1
fix building on mips64
d5 4
a8 5
--- Source/NSObject.m.orig	Thu Jun 10 12:13:51 2010
+++ Source/NSObject.m	Thu Dec 30 15:06:13 2010
@@@@ -57,9 +57,11 @@@@
 #ifdef	HAVE_SYS_SIGNAL_H
 #include	<sys/signal.h>
a9 21
-#ifdef __FreeBSD__
+#if __GNUC__ >= 4
+#if defined(__FreeBSD__)
 #include <fenv.h>
 #endif
+#endif // __GNUC__
 
 #import "GSPrivate.h"
 
@@@@ -318,7 +320,9 @@@@ GSAtomicIncrement(gsatomic_t X)
   int tmp;
 
   __asm__ __volatile__ (
+#if !defined(__mips64__)
     "   .set  mips2  \n"
+#endif
     "0: ll    %0, %1 \n"
     "   addiu %0, 1  \n"
     "   sc    %0, %1 \n"
@@@@ -333,7 +337,9 @@@@ GSAtomicDecrement(gsatomic_t X)
   int tmp;
d11 5
a15 7
   __asm__ __volatile__ (
+#if !defined(__mips64__)
     "   .set  mips2  \n"
+#endif
     "0: ll    %0, %1 \n"
     "   addiu %0, -1 \n"
     "   sc    %0, %1 \n"
@


1.7
log
@update to latest release, contains minor bugfixes and some timezone updates.

OK ajacoutot@@
@
text
@d1 4
a4 1
$OpenBSD: patch-Source_NSObject_m,v 1.6 2010/05/23 10:32:48 espie Exp $
d6 1
a6 1
+++ Source/NSObject.m	Sun Aug  1 12:38:13 2010
d20 20
@


1.6
log
@okay, even with gcc4, we don't have fenv.h. Kill bogus patch
@
text
@d1 3
a3 3
$OpenBSD: patch-Source_NSObject_m,v 1.5 2010/05/16 08:06:33 ajacoutot Exp $
--- Source/NSObject.m.orig	Mon Apr 26 23:32:22 2010
+++ Source/NSObject.m	Fri May 21 19:55:59 2010
a16 16
@@@@ -1016,12 +1018,14 @@@@ objc_create_block_classes_as_subclasses_of(Class super
       finalize_imp = get_imp(self, finalize_sel);
 #endif
 
-#if defined(__FreeBSD__) && defined(__i386__)
+#if __GNUC__ >= 4
+#if defined(__FreeBSD__)
       // Manipulate the FPU to add the exception mask. (Fixes SIGFPE
       // problems on *BSD)
       // Note this only works on x86
       fedisableexcept(FE_INVALID);
 #endif
+#endif // __GNUC__
 
 #ifdef HAVE_LOCALE_H
       GSSetLocaleC(LC_ALL, "");		// Set up locale from environment.
@


1.5
log
@Unbreak this port.
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_NSObject_m,v 1.4 2010/05/12 16:43:47 jasper Exp $
d3 1
a3 1
+++ Source/NSObject.m	Sun May 16 09:56:15 2010
d10 1
a10 1
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
d23 1
a23 1
+#if defined(__FreeBSD__) || defined(__OpenBSD__) && defined(__i386__)
@


1.4
log
@- update gnustep-base to 1.20.0
* fixes security issues in gdomapwhich could lead to an integer overflow and
information disclosure (CVE-2010-1457 and CVE-2010-1620)

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-Source_NSObject_m,v 1.3 2008/12/23 15:25:31 ajacoutot Exp $
d3 15
a17 2
+++ Source/NSObject.m	Wed May 12 10:00:44 2010
@@@@ -1016,7 +1016,7 @@@@ objc_create_block_classes_as_subclasses_of(Class super
d22 1
d27 6
@


1.3
log
@- GNUstep-Base 1.18.0
* Improved lookup of versioned library resources
* Keyed archiving improvements for various classes
* Exception and thread handling improvements
* Portability improvements
@
text
@d1 5
a5 5
$OpenBSD: patch-Source_NSObject_m,v 1.2 2008/06/23 10:59:37 ajacoutot Exp $
--- Source/NSObject.m.orig	Fri Dec 19 10:06:14 2008
+++ Source/NSObject.m	Tue Dec 23 14:00:22 2008
@@@@ -1127,7 +1127,7 @@@@ GSDescriptionForClassMethod(pcl self, SEL aSel)
 #endif
@


1.2
log
@- update to gnustep-base-1.16.1
- use devel/gettext MODULE
@
text
@d1 4
a4 4
$OpenBSD: patch-Source_NSObject_m,v 1.1.1.1 2007/05/29 03:01:35 ajacoutot Exp $
--- Source/NSObject.m.orig	Thu Jun 12 12:44:00 2008
+++ Source/NSObject.m	Mon Jun 23 11:26:24 2008
@@@@ -1125,7 +1125,7 @@@@ GSDescriptionForClassMethod(pcl self, SEL aSel)
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Source/NSObject.m.orig	Mon May 28 17:25:27 2007
+++ Source/NSObject.m	Mon May 28 17:26:02 2007
@@@@ -1092,7 +1092,7 @@@@ GSDescriptionForClassMethod(pcl self, SEL aSel)
@


1.1.1.1
log
@Import gnustep-base-1.14.0

The GNUstep Base Library is a library of general-purpose, non-graphical
Objective C objects.  For example, it includes classes for strings,
object collections, byte streams, typed coders, invocations,
notifications, notification dispatchers, moments in time, network ports,
remote object messaging support (distributed objects), and event loops.
It provides functionality that aims to implement the non-graphical
portion of the OpenStep standard (the Foundation library).
@
text
@@
