head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.10.17.09.30.37;	author sebastia;	state dead;
branches;
next	1.1;

1.1
date	2013.05.18.15.35.24;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update gnustep-base to 1.24.5

Added NSInvocationOperation class
OSX version compatibility macro improvements
various other bugfixes

requires a full library bump
@
text
@$OpenBSD: patch-Source_NSCalendar_m,v 1.1 2013/05/18 15:35:24 sebastia Exp $

fix NSCalendar on amd64, from upstream

--- Source/NSCalendar.m.orig	Sat May 18 17:23:25 2013
+++ Source/NSCalendar.m	Sat May 18 17:23:34 2013
@@@@ -79,8 +79,8 @@@@ typedef struct {
   NSString      *localeID;
   NSTimeZone    *tz; 
   void          *cal;
-  int32_t       firstWeekday;
-  int32_t       minimumDaysInFirstWeek;
+  NSInteger     firstWeekday;
+  NSInteger     minimumDaysInFirstWeek;
 } Calendar; 
 #define my ((Calendar*)_NSCalendarInternal)
 #define aac ((Calendar*)(autoupdatingCalendar->_NSCalendarInternal))
@@@@ -133,7 +133,7 @@@@ typedef struct {
   else
     {
       ucal_setAttribute(my->cal, UCAL_FIRST_DAY_OF_WEEK,
-        my->firstWeekday);
+        (int32_t)my->firstWeekday);
     }
 
   if (NSNotFound == my->minimumDaysInFirstWeek)
@@@@ -144,7 +144,7 @@@@ typedef struct {
   else
     {
       ucal_setAttribute(my->cal, UCAL_MINIMAL_DAYS_IN_FIRST_WEEK,
-        my->minimumDaysInFirstWeek);
+        (int32_t)my->minimumDaysInFirstWeek);
     }
 
 #endif
@@@@ -531,7 +531,7 @@@@ static NSRecursiveLock *classLock = nil;
 
 - (void) setFirstWeekday: (NSUInteger)weekday
 {
-  my->firstWeekday = (int32_t)weekday;
+  my->firstWeekday = weekday;
 #if GS_USE_ICU == 1
   ucal_setAttribute (my->cal, UCAL_FIRST_DAY_OF_WEEK, my->firstWeekday);
 #endif
@


1.1
log
@NSCalendar fix on amd64, from upstream
@
text
@d1 1
a1 1
$OpenBSD$
@

