head	1.28;
access;
symbols
	OPENBSD_6_0:1.28.0.2
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.2
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.16.0.6
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.4
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.7.0.8
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.6
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.4
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	ajacoutot_20070528:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2016.06.03.11.43.41;	author sebastia;	state Exp;
branches;
next	1.27;
commitid	1cYa9WMdVVNETCjp;

1.27
date	2016.03.19.23.50.53;	author naddy;	state Exp;
branches;
next	1.26;
commitid	xNiJqpnP8xlixpy4;

1.26
date	2015.10.26.11.53.14;	author sebastia;	state Exp;
branches;
next	1.25;
commitid	8SlQsiN4RMOVHG0B;

1.25
date	2015.10.15.08.26.18;	author bentley;	state Exp;
branches;
next	1.24;
commitid	KagdvOdVkZ6bSBxW;

1.24
date	2014.11.21.18.21.21;	author sebastia;	state Exp;
branches;
next	1.23;
commitid	JgRcMcc8jVuhOKjw;

1.23
date	2014.07.17.17.35.50;	author sebastia;	state Exp;
branches;
next	1.22;
commitid	2A00F76YmYU8oLzC;

1.22
date	2014.05.22.09.48.56;	author sebastia;	state Exp;
branches;
next	1.21;

1.21
date	2014.01.09.17.24.16;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2013.10.21.10.29.57;	author sebastia;	state Exp;
branches;
next	1.19;

1.19
date	2013.10.19.13.24.55;	author sebastia;	state Exp;
branches;
next	1.18;

1.18
date	2013.04.25.16.14.27;	author sebastia;	state Exp;
branches;
next	1.17;

1.17
date	2012.08.22.07.15.51;	author sebastia;	state Exp;
branches;
next	1.16;

1.16
date	2011.07.19.06.19.49;	author sebastia;	state Exp;
branches;
next	1.15;

1.15
date	2011.05.05.22.56.16;	author sebastia;	state Exp;
branches;
next	1.14;

1.14
date	2011.04.18.11.57.51;	author sebastia;	state Exp;
branches;
next	1.13;

1.13
date	2010.12.22.09.20.00;	author sebastia;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.24.07.14.44;	author sebastia;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.22.08.36.59;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.06.10.03.31;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.26.12.39.10;	author sebastia;	state Exp;
branches;
next	1.8;

1.8
date	2010.10.15.10.37.51;	author sebastia;	state Exp;
branches;
next	1.7;

1.7
date	2008.11.14.10.34.15;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2008.10.03.07.21.56;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2007.12.10.16.18.22;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2007.08.26.21.49.07;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2007.07.21.17.30.10;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2007.06.01.00.27.19;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2007.05.29.02.59.11;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.05.29.02.59.11;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.28
log
@cleanup after gnustep-make update to 2.6.8
@
text
@# $OpenBSD: gnustep.port.mk,v 1.27 2016/03/19 23:50:53 naddy Exp $

# until tested on others
ONLY_FOR_ARCHS ?=	alpha i386 amd64 macppc

CATEGORIES +=	x11/gnustep

USE_GMAKE ?=	Yes
MAKE_FILE ?=	GNUmakefile

MODULES +=			lang/clang
BUILD_DEPENDS +=		x11/gnustep/make
MODGNUSTEP_RUN_DEPENDS +=	x11/gnustep/make

MODCLANG_ARCHS =		amd64 i386
MODCLANG_LANGS =		c++

.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
CONFIGURE_ENV +=	CC="clang" CXX="clang++" CPP="clang -E"
CONFIGURE_ENV +=	OPTFLAG="${CFLAGS}"
# Not yet GS_WITH_ARC
#MAKE_FLAGS +=		GS_WITH_ARC=1
MAKE_FLAGS +=		CC="clang" CXX="clang++" CPP="clang -E"
MAKE_FLAGS +=		OPTFLAG="${CFLAGS}"
.else
MAKE_FLAGS +=  		CC="${CC}" CPP="${CC} -E" OPTFLAG="${CFLAGS}"
.endif

MAKE_ENV +=	GNUSTEP_MAKEFILES=`gnustep-config --variable=GNUSTEP_MAKEFILES`
MAKE_ENV +=	INSTALL_AS_USER=${BINOWN}
MAKE_ENV +=	INSTALL_AS_GROUP=${BINGRP}
MAKE_ENV +=     GNUSTEP_CONFIG_FILE=${PORTSDIR}/x11/gnustep/GNUstep.conf

MODGNUSTEP_IS_FRAMEWORK ?=	No
MODGNUSTEP_NEEDS_C ?=		Yes

.if ${MODGNUSTEP_IS_FRAMEWORK:L} == yes
BUILD_DEPENDS +=		x11/gnustep/base
MODGNUSTEP_RUN_DEPENDS +=	x11/gnustep/base
MODGNUSTEP_NEEDS_BASE ?=	No
MODGNUSTEP_NEEDS_GUI ?=		No
MODGNUSTEP_NEEDS_BACK ?=	No
.else
MODGNUSTEP_NEEDS_BASE ?=	Yes
MODGNUSTEP_NEEDS_GUI ?=		Yes
MODGNUSTEP_NEEDS_BACK ?=	Yes
.endif

.if ${MODGNUSTEP_NEEDS_GUI:L} == yes
MODGNUSTEP_WANTLIB +=		gnustep-base gnustep-gui
MODGNUSTEP_LIB_DEPENDS +=	x11/gnustep/gui
.  if ${MODGNUSTEP_NEEDS_C:L} == yes
MODGNUSTEP_WANTLIB +=		c
.  endif
.  if ${MODGNUSTEP_NEEDS_BACK:L} == yes
MODGNUSTEP_RUN_DEPENDS +=	x11/gnustep/back
.  endif
.endif
.if ${MODGNUSTEP_NEEDS_BASE:L} == yes
MODGNUSTEP_WANTLIB +=		objc2 m
MODGNUSTEP_WANTLIB +=		gnustep-base pthread
MODGNUSTEP_LIB_DEPENDS +=	x11/gnustep/base
.endif

WANTLIB += ${MODGNUSTEP_WANTLIB}
LIB_DEPENDS += ${MODGNUSTEP_LIB_DEPENDS}
RUN_DEPENDS += ${MODGNUSTEP_RUN_DEPENDS}

MAKE_ENV +=	messages=yes

.ifdef DEBUG
CONFIGURE_ARGS +=       --enable-debug --disable-strip
MAKE_ENV +=	debug=yes strip=no
.else
CONFIGURE_ARGS +=       --disable-debug --enable-strip
MAKE_ENV +=	debug=no strip=yes
.endif

MASTER_SITE_GNUSTEP = http://ftp.gnustep.org/pub/gnustep/
@


1.27
log
@remove SHARED_ONLY from GNUstep ports, unused
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.26 2015/10/26 11:53:14 sebastia Exp $
a19 1
CONFIGURE_ENV +=	OBJCFLAGS=-fobjc-runtime=gnustep-1.7
d21 2
a23 1
MAKE_FLAGS +=		OBJCFLAGS=-fobjc-runtime=gnustep-1.7
@


1.26
log
@Add OBJCFLAGS=-fgnustep-runtime to gnustep.port.mk CONFIGURE_ENV
and MAKE_FLAGS for clang build platforms, and bump all ports for that.
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.25 2015/10/15 08:26:18 bentley Exp $
a4 2

SHARED_ONLY =	Yes
@


1.25
log
@Use http mirror.

ok sebastia@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.24 2014/11/21 18:21:21 sebastia Exp $
d22 1
d25 1
@


1.24
log
@adapt/simplify gnustep.port.mk after gnustep-base update, bump REVISION
of all dependencies
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.23 2014/07/17 17:35:50 sebastia Exp $
d79 1
a79 1
MASTER_SITE_GNUSTEP = ftp://ftp.gnustep.org/pub/gnustep/
@


1.23
log
@enable x11/gnustep on alpha, and with it, everything depending on it,
outside that part of the tree, most notably www/sogo.

Mark dbuskit as BROKEN-alpha, gcc struggles with it, needs to be analyzed
separately.

Sure ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.22 2014/05/22 09:48:56 sebastia Exp $
a34 1
MODGNUSTEP_NEEDS_LIBICONV ?=	Yes
a43 4
.  if ${MODGNUSTEP_NEEDS_LIBICONV:L} == yes
MODULES +=			converters/libiconv
MODGNUSTEP_WANTLIB +=		${MODLIBICONV_WANTLIB}
.  endif
d60 1
a60 2
MODGNUSTEP_WANTLIB +=		objc2 avahi-client avahi-common ffi gcrypt gmp
MODGNUSTEP_WANTLIB +=		gnutls icudata icui18n icuuc xml2 xslt z m
@


1.22
log
@overhaul gnustep.port.mk with regard to fix WANTLIBS and LIB_DEPENDS of
dependent ports, so that port-lib-depends-check is happy with all of them.
Also make portcheck happy too.

feedback and OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.21 2014/01/09 17:24:16 brad Exp $
d4 1
a4 1
ONLY_FOR_ARCHS ?=	i386 amd64 macppc
@


1.21
log
@Remove the explicit -integrated-as command line parameter as the integrated
assembler is already enabled by default with LLVM.

ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.20 2013/10/21 10:29:57 sebastia Exp $
d14 2
a15 2
BUILD_DEPENDS +=		x11/gnustep/make>=2.6.0
MODGNUSTEP_RUN_DEPENDS +=	x11/gnustep/make>=2.6.0
d34 15
d52 1
d54 2
a55 2
.if ${MODGNUSTEP_NEEDS_GUI:L} == yes 
MODGNUSTEP_WANTLIB +=		objc2 gnustep-base gnustep-gui
d57 3
d65 3
@


1.20
log
@allow overriding ONLY_FOR_ARCHS, since some newer stuff may only be
buildable with clang
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.19 2013/10/19 13:24:55 sebastia Exp $
d22 1
a22 1
CONFIGURE_ENV +=	OPTFLAG="${CFLAGS}" CFLAGS="${CFLAGS} -integrated-as"
@


1.19
log
@build gnustep related packages on amd64 and i386 with clang,
macppc still stays on using gcc due to too many problems there.
On amd64 and i386 now use the non-fragile-abi.

Now that allows on amd64 and i386 to use newer objective-c 2.0
features.
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.18 2013/04/25 16:14:27 sebastia Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	i386 amd64 macppc
@


1.18
log
@update to gnustep-base 1.24.1
Getting rid of patch to make SYSTRACE happy, switch to use a GNUstep.conf
file in the x11/gnustep directory instead, more closely following what
the framework provides
API changes required a major library bump

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.17 2012/08/22 07:15:51 sebastia Exp $
d13 1
d17 11
a27 1
MAKE_FLAGS +=	CC="${CC}" CPP="${CC} -E" OPTFLAG="${CFLAGS}"
@


1.17
log
@Since we now have libobjc2, tweak gnustep-make to build/link against it.
gnustep-base doesn't need to install the compatibility layer anymore,
which requires a major lib bump.
Bump revision of all dependent packages, and remove double REVISION
in webservices

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.16 2011/07/19 06:19:49 sebastia Exp $
d21 1
a21 1
MAKE_ENV +=	GS_DEFAULTS_LOCKDIR=${WRKDIR}
@


1.16
log
@Allow all dependent ports to build with(out) debugging symbols, depending on
a defined DEBUG in /etc/mk.conf

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.15 2011/05/05 22:56:16 sebastia Exp $
d28 1
a28 1
MODGNUSTEP_WANTLIB +=		objc gnustep-base gnustep-gui
@


1.15
log
@Enable gnustep on macppc. Thanks to Joel Carnat for testing www/sogo and some of the applications.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.14 2011/04/18 11:57:51 sebastia Exp $
d45 1
d48 2
a49 1
MAKE_ENV +=	debug=no
@


1.14
log
@make new gnustep-make to build and run depends

OK landry@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.13 2010/12/22 09:20:00 sebastia Exp $
d4 1
a4 1
ONLY_FOR_ARCHS =	i386 amd64
@


1.13
log
@Switch naming of binary files in GNUstep bundles, to conform more with upstream.
Reorder WANTLIB in gnustep.port.mk, now do not include WANTLIB when only depending on gnustep-base.
Update/bump all gnustep ports that install bundles.

kind of a agree, landry@@, OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.12 2010/11/24 07:14:44 sebastia Exp $
d13 2
a14 2
BUILD_DEPENDS +=		x11/gnustep/make>=2.4.0p5
MODGNUSTEP_RUN_DEPENDS +=	x11/gnustep/make
@


1.12
log
@Require the updated gnustep-make as BUILD_DEPENDS for the gnustep ports.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.11 2010/11/22 08:36:59 espie Exp $
d13 1
a13 1
BUILD_DEPENDS +=		x11/gnustep/make>=2.4.0p4
d28 1
a28 1
MODGNUSTEP_WANTLIB +=		gnustep-gui
a34 1
MODGNUSTEP_WANTLIB +=		objc gnustep-base
@


1.11
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.10 2010/11/06 10:03:31 espie Exp $
d13 1
a13 1
BUILD_DEPENDS +=		x11/gnustep/make
@


1.10
log
@add the missing pieces to handle MULTI_PACKAGES port: LIB/RUN/WANT should
always go thru an indirection, so that a multi-packages port can turn them
on/off piecewise (required for libiconv cleanup of sope).

style nits: makefiles with lots of ?= +=   do *REQUIRE* spaces.
also indent tests, and do the :L dance to have cleaner stuff.
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.9 2010/10/26 12:39:10 sebastia Exp $
d13 2
a14 2
BUILD_DEPENDS +=		:gnustep-make-*:x11/gnustep/make
MODGNUSTEP_RUN_DEPENDS +=	:gnustep-make-*:x11/gnustep/make
d29 1
a29 1
MODGNUSTEP_LIB_DEPENDS +=	::x11/gnustep/gui
d31 1
a31 1
MODGNUSTEP_RUN_DEPENDS +=	::x11/gnustep/back
d36 1
a36 1
MODGNUSTEP_LIB_DEPENDS +=	::x11/gnustep/base
@


1.9
log
@* Update the gnustep.port.mk file, to have some standard WANTLIBS and LIB/RUN depends added for the GUI based apps.
* Bump package versions for ports depending on gnustep-back.
* Fix PLIST for gnumail, after library bump.
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.8 2010/10/15 10:37:51 sebastia Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	i386 amd64
d6 1
a6 1
SHARED_ONLY=	Yes
d8 1
a8 1
CATEGORIES+=	x11/gnustep
d10 2
a11 2
USE_GMAKE?=	Yes
MAKE_FILE?=	GNUmakefile
d13 2
a14 2
BUILD_DEPENDS+=	:gnustep-make-*:x11/gnustep/make
RUN_DEPENDS+=	:gnustep-make-*:x11/gnustep/make
d16 1
a16 1
MAKE_FLAGS+=	CC="${CC}" CPP="${CC} -E" OPTFLAG="${CFLAGS}"
d18 4
a21 4
MAKE_ENV+=	GNUSTEP_MAKEFILES=`gnustep-config --variable=GNUSTEP_MAKEFILES`
MAKE_ENV+=	INSTALL_AS_USER=${BINOWN}
MAKE_ENV+=	INSTALL_AS_GROUP=${BINGRP}
MAKE_ENV+=	GS_DEFAULTS_LOCKDIR=${WRKDIR}
d23 10
a32 8
MODGNUSTEP_NEEDS_BASE?=	Yes
MODGNUSTEP_NEEDS_GUI?=	Yes
MODGNUSTEP_NEEDS_BACK?=	Yes
.if ${MODGNUSTEP_NEEDS_GUI} == Yes 
WANTLIB+=	gnustep-gui
LIB_DEPENDS+=	::x11/gnustep/gui
.if ${MODGNUSTEP_NEEDS_BACK} == Yes
RUN_DEPENDS+=	::x11/gnustep/back
d34 3
a36 4
.endif
.if ${MODGNUSTEP_NEEDS_BASE} == Yes
WANTLIB+=	objc gnustep-base
LIB_DEPENDS+=	::x11/gnustep/base
d39 5
a43 1
MAKE_ENV+=	messages=yes
d46 1
a46 1
MAKE_ENV+=	debug=yes strip=no
d48 1
a48 1
MAKE_ENV+=	debug=no
d51 1
a51 1
MASTER_SITE_GNUSTEP= ftp://ftp.gnustep.org/pub/gnustep/
@


1.8
log
@Bye Bye NO_SYSTRACE for the x11/gnustep MODULE based ports.
patching gnustep-base to add usage of an environment variable
to allow set a pointer where the lockfiles of plmerge should go while building the port.

OK, ajacoutot@@, jasper@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.7 2008/11/14 10:34:15 ajacoutot Exp $
d22 15
@


1.7
log
@- add some debugging flags when DEBUG is defined; idea from a patch by
Sebastian Reitenbach
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.6 2008/10/03 07:21:56 ajacoutot Exp $
a5 3
# plmerge needs to create a lock directory under the user's homedir
NO_SYSTRACE=	Yes

d21 1
@


1.6
log
@- introduce MASTER_SITE_GNUSTEP
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.5 2007/12/10 16:18:22 ajacoutot Exp $
d26 4
d31 1
@


1.5
log
@- set NO_SYSTRACE for now as plmerge needs to create a lock directory
under the user's homedir

This is a temporary workaround until I can come up with a better
solution (it's not as easy as it may look).
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.4 2007/08/26 21:49:07 ajacoutot Exp $
d27 2
@


1.4
log
@- add amd64 to supported archs after several success reports
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.3 2007/07/21 17:30:10 ajacoutot Exp $
d5 3
@


1.3
log
@- do some cleaning before we can hopefully enable this (still waiting
for threaded libobjc to go in) ; re-order Makefile.inc and
gnustep.port.mk, set only for i386 until we get more test results, set
USE_X11 where it's due...
@
text
@d1 1
a1 1
# $OpenBSD: gnustep.port.mk,v 1.2 2007/06/01 00:27:19 ajacoutot Exp $
d4 1
a4 1
ONLY_FOR_ARCHS=	i386
@


1.2
log
@- don't use RUN_DEPENDS+=${BUILD_DEPENDS} so people stop bugging me and
start testing instead
@
text
@d1 4
a4 1
# $OpenBSD: gnustep.port.mk,v 1.1.1.1 2007/05/29 02:59:11 ajacoutot Exp $
d8 4
a11 2
USE_X11=	Yes
USE_GMAKE=	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 1
a9 1
RUN_DEPENDS+=	${BUILD_DEPENDS}
@


1.1.1.1
log
@Start importing some pieces of the GNUstep framework.
GNUstep is a cross-platform, object-oriented framework for desktop
application development. Based on the OpenStep specification originally
created by NeXT (now Apple), GNUstep enables developers to rapidly build
sophisticated software by employing a large library of reusable software
components.

Not connected to the build yet as this is a work in progress and there
might be some glitches.
Now that it's in CVS, hopefully more people will test this.

ok robert@@
@
text
@@
