head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2014.01.03.18.55.36;	author sebastia;	state dead;
branches;
next	1.1;

1.1
date	2013.10.21.08.49.09;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 0.24.0

Require newer base release as its moved the
-replaceObject:withObject: of NSKeyedUnarchiver there.
Support for newer releases of the gif library.
NSTabView is now flipped.
Theme improvements and changes to image mapping.
Many bugfixes.
@
text
@$OpenBSD: patch-Source_NSBitmapImageRep_m,v 1.1 2013/10/21 08:49:09 sebastia Exp $

Fix 16Bit png images, from upstream

--- Source/NSBitmapImageRep.m.orig	Fri Feb 22 16:39:29 2013
+++ Source/NSBitmapImageRep.m	Mon Oct 21 10:41:06 2013
@@@@ -834,8 +834,8 @@@@ _set_bit_value(unsigned char *base, long msb_off, int 
   all = ((1<<bit_width)-1) << shift;
 
   if (byte1 != byte2)
-    base[byte1] = (value >> 8) | (base[byte1] ^ (all >> 8));
-  base[byte2] = (value & 255) | (base[byte2] ^ (all & 255));
+    base[byte1] = (value >> 8) | (base[byte1] & ~(all >> 8));
+  base[byte2] = (value & 255) | (base[byte2] & ~(all & 255));
 }
 
 /**
@


1.1
log
@fix handling of 16Bit png images, fix from upstrem, problem
I reported a few days ago when I was fiddling with Camera
@
text
@d1 1
a1 1
$OpenBSD$
@

