head	1.28;
access;
symbols
	OPENBSD_6_1:1.28.0.2
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.26.0.2
	OPENBSD_5_9_BASE:1.26
	OPENBSD_5_8:1.19.0.6
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.19.0.2
	OPENBSD_5_7_BASE:1.19
	OPENBSD_5_6:1.17.0.2
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.15.0.2
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.2
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.11.0.2
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	giovanni-20101026:1.1.1.1
	giovanni:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2017.02.01.11.43.23;	author sthen;	state Exp;
branches;
next	1.27;
commitid	OG1cmnE0fau88Ps4;

1.27
date	2016.03.18.23.12.20;	author naddy;	state Exp;
branches;
next	1.26;
commitid	KZAl4KEiw6a3Jixw;

1.26
date	2016.02.21.15.47.30;	author jsg;	state Exp;
branches;
next	1.25;
commitid	N1nUcykuLe34Z53R;

1.25
date	2015.12.13.01.48.51;	author juanfra;	state Exp;
branches;
next	1.24;
commitid	3TjRQef77YfdVnsn;

1.24
date	2015.12.10.08.43.29;	author landry;	state Exp;
branches;
next	1.23;
commitid	eOO2VvLXfJyWxbpz;

1.23
date	2015.11.21.10.04.31;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	K9i2l7sEQgdn8U1p;

1.22
date	2015.11.20.19.48.34;	author jca;	state Exp;
branches;
next	1.21;
commitid	OfbLoKAhShh7nvGx;

1.21
date	2015.11.07.07.28.18;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	yYXytOS3VvICO1FQ;

1.20
date	2015.11.07.05.55.08;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	7UbzdDlpoUEfr2c7;

1.19
date	2015.02.08.04.55.00;	author jsing;	state Exp;
branches;
next	1.18;
commitid	5LlNeYhyRigbgt8B;

1.18
date	2015.02.04.20.51.39;	author sthen;	state Exp;
branches;
next	1.17;
commitid	wa5QFgJISq7y01TG;

1.17
date	2014.07.10.13.25.46;	author giovanni;	state Exp;
branches;
next	1.16;
commitid	aKaxpsbfHeRre7R9;

1.16
date	2014.04.23.22.10.50;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2013.12.02.16.25.08;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2013.11.04.14.42.36;	author merdely;	state Exp;
branches;
next	1.13;

1.13
date	2013.03.11.11.46.09;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2012.08.04.14.47.00;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2012.04.04.00.52.21;	author merdely;	state Exp;
branches;
next	1.10;

1.10
date	2012.03.24.18.53.27;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2012.02.24.09.41.43;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2011.12.14.23.38.20;	author fgsch;	state Exp;
branches;
next	1.7;

1.7
date	2011.07.11.14.04.42;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2011.06.29.12.45.02;	author sebastia;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.03.16.46.18;	author giovanni;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.22.08.36.56;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.26.14.15.31;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.26.13.05.46;	author giovanni;	state Exp;
branches;
next	1.1;

1.1
date	2010.10.26.12.56.57;	author giovanni;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.10.26.12.56.57;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.28
log
@Switch xfreerdp from comparing handshake_func against tls->ssl->method
members to using SSL_in_(connect|accept)_init to fix following visibility
changes in libressl. While there, switch from TLSv1.0-only TLSv1_client_method
to SSLv23_client_method allowing newer TLS versions. Diff from jsing.
@
text
@# $OpenBSD: Makefile,v 1.27 2016/03/18 23:12:20 naddy Exp $

BROKEN-arm =		unrecognized option -mfpu=neon
# Also:  __sync_fetch_and_add_4 __sync_add_and_fetch_4 __sync_sub_and_fetch_4
BROKEN-hppa =		undefined reference to __sync_val_compare_and_swap_4

COMMENT =		open source client for Windows Terminal Server
DISTNAME =		freerdp-1.2.0beta1
CATEGORIES =		x11 net
REVISION =		1

GH_ACCOUNT =		FreeRDP
GH_PROJECT =		FreeRDP
GH_COMMIT =		f5ff6e1bd819a347aa532c1ef1a9cf0c67387507

SHARED_LIBS +=  freerdp-client            0.0 # 1.2
SHARED_LIBS +=  freerdp                   0.0 # 1.2
SHARED_LIBS +=  winpr                     0.0 # 1.1
SHARED_LIBS +=  xfreerdp-client           0.0 # 1.2

HOMEPAGE =		http://www.freerdp.com/

# Apache 2.0
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += X11 Xcursor Xext Xfixes Xi Xinerama Xrender Xv avcodec
WANTLIB += avutil c crypto cups execinfo m pthread ssl xkbfile
WANTLIB += z

MODULES =		devel/cmake

CFLAGS +=		-I${X11BASE}/include -I${LOCALBASE}/include

BUILD_DEPENDS =		security/pcsc-lite \
			textproc/xmlto

LIB_DEPENDS =		devel/libexecinfo \
			print/cups,-libs \
			graphics/ffmpeg

CONFIGURE_ARGS +=	-DWITH_ALSA=OFF \
			-DWITH_CUPS=ON \
			-DWITH_DIRECTFB=OFF \
			-DWITH_GSTREAMER_0_10=OFF \
			-DWITH_GSTREAMER_1_0=OFF \
			-DWITH_OPENSLES=OFF \
			-DWITH_PCSC=ON \
			-DWITH_PULSE=OFF

# XXX does not build
CONFIGURE_ARGS +=	-DCHANNEL_DRIVE=OFF

# -msse3 requires a newer gcc
CONFIGURE_ARGS +=	-DWITH_SSE2=OFF

NO_TEST =		Yes

pre-configure:
	sed -i "s,/usr/local,${LOCALBASE},g" ${WRKSRC}/CMakeLists.txt

.if ${MACHINE_ARCH} == "sparc64"
CONFIGURE_ARGS +=	-DWITH_NEON=OFF
.endif

.include <bsd.port.mk>
@


1.27
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/02/21 15:47:30 jsg Exp $
d5 1
a5 1
BROKEN-hppa =		undefined reference to `__sync_val_compare_and_swap_4'
d10 1
a10 1
REVISION =		0
@


1.26
log
@Mark as broken on arm.  Error: unrecognized option -mfpu=neon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/12/13 01:48:51 juanfra Exp $
a5 2

SHARED_ONLY =		Yes
@


1.25
log
@Unbreak freerdp on sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/12/10 08:43:29 landry Exp $
d3 1
@


1.24
log
@BROKEN-sparc64 =       cc1: error: unrecognized command line option "-mfpu=neon" "-mfloat-abi=softfp"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/11/21 10:04:31 ajacoutot Exp $
a4 1
BROKEN-sparc64 =	cc1: error: unrecognized command line option "-mfpu=neon" "-mfloat-abi=softfp"
d61 4
@


1.23
log
@Fix loading of plugins to restore clipboard sharing, printer, ...

issue reported by giovanni@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/11/07 07:28:18 ajacoutot Exp $
d5 1
@


1.22
log
@BROKEN-hppa: undefined reference to __sync_val_compare_and_swap_4
@
text
@d11 1
d27 3
a29 2
WANTLIB += X11 Xcursor Xext Xfixes Xi Xinerama Xrender Xv c crypto
WANTLIB += execinfo m pthread ssl xkbfile z
d35 1
a35 3
BUILD_DEPENDS =		graphics/ffmpeg \
			print/cups,-libs \
			security/pcsc-lite \
d38 3
a40 1
LIB_DEPENDS =		devel/libexecinfo
d49 4
a52 2
			-DWITH_PULSE=OFF \
			-DWITH_WAYLAND=OFF \
@


1.21
log
@Add small comment.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.20 2015/11/07 05:55:08 ajacoutot Exp $
@


1.20
log
@Major update to freerdp-1.2.0beta1.
Needed for an upcoming x11/gnome/vinagre update.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/02/08 04:55:00 jsing Exp $
d46 3
a48 1
			-DWITH_SSE2=OFF
@


1.19
log
@Switch freerdp back to libressl.

Disable the SSL 3.0/TLS 1.0 CBC vulnerability workaround since this breaks
NLA - the remote host will return a TLS alert 50, terminating the session.
This flag used to be part of SSL_OP_ALL, however was removed in r1.36 of
lib/libssl/src/ssl/ssl.h.

Issue reported by and fix tested by sthen@@

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/02/04 20:51:39 sthen Exp $
a4 1
V =			1.0.2
d6 1
a6 4
DISTNAME =		freerdp-$V
REVISION =		3
DISTFILES =		${DISTNAME}{$V}.tar.gz
WRKDIST =		${WRKDIR}/FreeRDP-$V
d9 8
a16 8
SHARED_LIBS +=  freerdp-cache             0.0 # 1.0
SHARED_LIBS +=  freerdp-channels          0.0 # 1.0
SHARED_LIBS +=  freerdp-codec             0.0 # 1.0
SHARED_LIBS +=  freerdp-core              0.0 # 1.0
SHARED_LIBS +=  freerdp-gdi               0.0 # 1.0
SHARED_LIBS +=  freerdp-kbd               0.0 # 1.0
SHARED_LIBS +=  freerdp-rail              0.0 # 1.0
SHARED_LIBS +=  freerdp-utils             0.0 # 1.0
a19 2
MAINTAINER =		Michael Erdely <merdely@@openbsd.org>

d23 2
a24 2
WANTLIB += X11 Xcursor Xext Xinerama Xv avcodec avutil c crypto cups pcsclite
WANTLIB += pthread ssl xkbfile z
d26 1
a26 2
MASTER_SITES =		https://github.com/FreeRDP/FreeRDP/archive/ \
			http://spacehopper.org/mirrors/
d28 1
a28 1
MODULES =		devel/cmake
d30 3
a32 1
BUILD_DEPENDS =		textproc/docbook \
d35 12
a46 3
LIB_DEPENDS =		graphics/ffmpeg \
			print/cups,-libs \
			security/pcsc-lite
d48 1
a48 2
CONFIGURE_ARGS +=	-DWITH_ALSA=Off \
			-DWITH_PCSC=On
d50 2
a51 3
post-patch:
	perl -pi -e 's,/usr/local,${LOCALBASE},g; s,/usr/X11R6,${X11BASE},g;' \
	    ${WRKSRC}/CMakeLists.txt
@


1.18
log
@Build FreeRDP against OpenSSL instead of LibreSSL, unbreaking connections
to servers which require NLA.  ok rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/07/10 13:25:46 giovanni Exp $
d8 1
a8 1
REVISION =		2
d29 2
a30 2
WANTLIB += X11 Xcursor Xext Xinerama Xv avcodec avutil c lib/eopenssl/crypto
WANTLIB += pcsclite pthread lib/eopenssl/ssl xkbfile z cups
a41 1
			security/openssl \
a45 3

CFLAGS +=		-I${LOCALBASE}/include/eopenssl 
CONFIGURE_ENV =		LDFLAGS="-L${LOCALBASE}/lib/eopenssl -Wl,-rpath,${LOCALBASE}/lib/eopenssl"
@


1.17
log
@
Do not segfault while doing remote printing
rdp printng support has been rewritten in 1.1beta
and this bug has been fixed as well
ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/04/23 22:10:50 brad Exp $
d8 1
a8 1
REVISION =		1
d29 2
a30 2
WANTLIB += X11 Xcursor Xext Xinerama Xv avcodec avutil c crypto
WANTLIB += pcsclite pthread ssl xkbfile z cups
d42 1
d48 3
a53 1

@


1.16
log
@Update freerdp for newer FFmpeg API.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/12/02 16:25:08 espie Exp $
d8 1
a8 1
REVISION =		0
@


1.15
log
@remove redundancies with new filename{url}sufx scheme
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/11/04 14:42:36 merdely Exp $
d8 1
@


1.14
log
@Update to 1.0.2.
The following issues have been resolved:

629 - Password is shown when typed with parameter --from-stdin
698 - --from-stdin always prompts for password, even when it is piped in
793 - Fix for segfaults caused by wrong command line specified
799 - colors are wrong
806 - 1.0.2-rc1 problem with xfreerdp reparenting into X window
843 - stable-1.0 core dump with --authonly
(http://sourceforge.net/mailarchive/message.php?msg_id=30299739)

Also enabled smartcard support.  Diff by Sergey Bronnikov.

Help with weird distfile name from sthen@@.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/03/11 11:46:09 espie Exp $
d8 1
a8 1
DISTFILES =		${DISTNAME}.tar.gz{$V.tar.gz}
@


1.13
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/08/04 14:47:00 ajacoutot Exp $
d5 1
d7 3
a9 1
DISTNAME =		freerdp-1.0.1
a10 1
REVISION =		0
d29 1
a29 1
WANTLIB += pthread ssl xkbfile z cups
d31 1
a31 1
MASTER_SITES =		https://github.com/downloads/FreeRDP/FreeRDP/ \
d40 2
a41 1
			print/cups,-libs
d43 2
a44 1
CONFIGURE_ARGS +=	-DWITH_ALSA=Off
@


1.12
log
@Remove the no_cups FLAVOR and always depend on cups,-libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/04/04 00:52:21 merdely Exp $
a24 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.11
log
@Change license marker to Apache 2.0.

Pointed out by Ross Richardson.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/03/24 18:53:27 sthen Exp $
d8 1
a28 3
FLAVORS =	no_cups
FLAVOR ?=

d30 1
a30 1
WANTLIB += pthread ssl xkbfile z
d35 1
a35 2
MODULES =		converters/libiconv \
			devel/cmake
d40 2
a41 1
LIB_DEPENDS =		graphics/ffmpeg
a43 7

.if ${FLAVOR:Mno_cups}
CONFIGURE_ARGS +=	-DWITH_CUPS=Off
.else
LIB_DEPENDS +=		print/cups
WANTLIB +=		cups
.endif
@


1.10
log
@Update to freerdp 1.0.1; various improvements, notably with certificate
handling. Add a no_cups flavour while there. ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/02/24 09:41:43 sthen Exp $
d22 1
a22 1
# GPLv2+
@


1.9
log
@update to freerdp 1.00; works against win2k8 servers
OK merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/12/14 23:38:20 fgsch Exp $
d6 1
a6 2
DISTNAME =		freerdp-1.0.0
WRKDIST =		${WRKDIR}/FreeRDP-FreeRDP-cd43ba1
d28 3
d32 1
a32 2
WANTLIB += cups gsm m mp3lame ogg orc-0.4 pthread schroedinger-1.0
WANTLIB += speex ssl theoradec theoraenc vorbis vorbisenc vpx x264 xkbfile z
d34 2
a35 1
MASTER_SITES =		https://github.com/downloads/FreeRDP/FreeRDP/
d40 2
a41 1
BUILD_DEPENDS =		textproc/xmlto
d43 1
a43 2
LIB_DEPENDS =		print/cups \
			graphics/ffmpeg
d46 7
@


1.8
log
@MSG_NOSIGNAL is supported now. kill unneeded patch.
maintainer (merdely@@) ok.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.7 2011/07/11 14:04:42 jasper Exp $
d6 2
a7 2
DISTNAME =		freerdp-0.8.2
REVISION =		1
a8 1
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=freerdp/}
d10 8
a17 4
SHARED_LIBS +=		freerdp			1.0 # 0.0
SHARED_LIBS +=		freerdpchanman		0.0 # 0.0
SHARED_LIBS +=		freerdpkbd		0.0 # 0.0
SHARED_LIBS +=		freerdpgdi		0.0 # 0.0
d19 1
a19 1
HOMEPAGE =		http://freerdp.sourceforge.net/
d29 15
a43 1
MODULES =		converters/libiconv
d45 3
a47 9
LIB_DEPENDS =		print/cups
WANTLIB +=		X11 Xau Xcursor Xdmcp Xfixes Xrender asn1 c crypto
WANTLIB +=		gssapi krb5 m pthread pthread-stubs ssl xcb z cups

CONFIGURE_STYLE = 	gnu
CONFIGURE_ENV +=	CFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L/usr/lib -L${LOCALBASE}/lib"
CONFIGURE_ARGS +=	--with-x=${X11BASE} \
			--with-sound=no
a48 1
USE_LIBTOOL =		Yes
@


1.7
log
@no need to keep using the gcc3 module on sparc

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/06/29 12:45:02 sebastia Exp $
d5 1
a5 1
REVISION =		0
@


1.6
log
@use gcc3 on sparc

OK sthen@@ already some days ago, MAINTAINER timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/12/03 16:46:18 giovanni Exp $
d5 1
d24 1
a24 2
MODULES =		converters/libiconv gcc3
MODGCC3_ARCHES =	sparc
@


1.5
log
@
Update to 0.8.2
ok merdeley@@ (Maintainer) on a similar diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/22 08:36:56 espie Exp $
d23 2
a24 1
MODULES =		converters/libiconv
@


1.4
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/26 14:15:31 ajacoutot Exp $
d4 1
a4 1
DISTNAME =		freerdp-0.8.1
d8 1
a8 3
REVISION =		0

SHARED_LIBS +=		freerdp			0.0 # 0.0
@


1.3
log
@We do *not* link with -lpthread.
See pthreads(3) for info.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/26 13:05:46 giovanni Exp $
d27 1
a27 1
LIB_DEPENDS =		::print/cups
@


1.2
log
@
Fix dependencies, no bump because it has just been imported.
committing on behalf of merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/10/26 12:56:57 giovanni Exp $
d7 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
a25 1
LIB_DEPENDS =		cups::print/cups
d27 1
a27 1
WANTLIB +=		gssapi krb5 m pthread pthread-stubs ssl xcb z
@


1.1.1.1
log
@
Import freerdp, an open source client for Windows Terminal Server
Initial port by merdely@@, updates and tweaks by me.
ok merdely@@

freerdp is a fork of the rdesktop project and is an open source client
for Windows NT and 2000 Terminal Server, capable of natively speaking
the Remote Desktop Protocol (RDP) in order to present the user's Windows
desktop.
@
text
@@
