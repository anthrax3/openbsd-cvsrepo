head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.20
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.18
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.16
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.12
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.14
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.10
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.8
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.42
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.40
	OPENBSD_5_0:1.1.0.38
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.36
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.34
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.32
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.30
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.28
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.26
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.24
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.22
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.20
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.18
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.16
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.14
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.12
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.10
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.8
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.6
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@ * @;


1.2
date	2012.09.17.10.25.49;	author matthieu;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.05.07.21.52;	author kevlo;	state Exp;
branches;
next	;


desc
@@


1.2
log
@regen patches.
@
text
@--- session.c.orig	Tue Dec 11 16:38:52 2001
+++ session.c	Sun Sep  2 18:59:56 2012
@@@@ -892,6 +892,7 @@@@ int *occupation; /* <== [ Matthew McNeill Feb 1997 ] =
     return found;
 }
 
+#ifndef __OpenBSD__
 /*===[ Unique Filename Generator ]===========================================*/
 
 static char *
@@@@ -922,6 +923,7 @@@@ char *prefix;
 #endif
 }
 
+#endif /* ! __OpenBSD__ */
 /*===[ SAVE WINDOW INFORMATION ]=============================================*/
 
 #ifndef PATH_MAX
@@@@ -951,6 +953,10 @@@@ SmPointer clientData;
     char discardCommand[PATH_MAX + 4];
     int numVals, i;
     char yes = 1;
+#ifdef __OpenBSD__
+    int tmphandle;
+    char tmpprefix[256];
+#endif
     static int first_time = 1;
 
     if (first_time)
@@@@ -1003,12 +1009,20 @@@@ SmPointer clientData;
      *        no longer the same since the new format supports
      *        virtaul workspaces.
      *========================================================*/
+#ifdef __OpenBSD__
+    strncpy(tmpprefix, path, 256);
+    strncat(tmpprefix, "/.ctwmXXXXXX", (sizeof(path) - 12));
+    if ((tmphandle = mkstemp(tmpprefix)) == -1)
+      goto bad;
+    if ((configFile = fdopen(tmphandle, "wb")) == NULL)
+      goto bad;
+#else
     if ((filename = unique_filename (path, ".ctwm")) == NULL)
 	goto bad;
 
     if (!(configFile = fopen (filename, "wb"))) /* wb = write bytes ? */
 	goto bad;
-
+#endif /* __OpenBSD__ */
     if (!write_ushort (configFile, SAVEFILE_VERSION))
 	goto bad;
 
@


1.1
log
@- upgrade to version 3.6

>From ChangeLog:
- Fix the way menu entries are selected with the keyboard.
- New keyword : DontSave, Takes a window list as argument.
- Sloppy Focus added with keyword "SloppyFocus" in configuration file.
- The keyword "ClickToFocus" has been correctly implemented.
- New function : f.fittocontent. Can be used only with window boxes.
- New keyword : WindowGeometries.
@
text
@d1 3
a3 3
--- session.c.orig	Tue Dec 11 15:38:52 2001
+++ session.c	Fri Jul  5 14:36:25 2002
@@@@ -892,6 +892,7 @@@@
d11 1
a11 1
@@@@ -922,6 +923,7 @@@@
d19 1
a19 1
@@@@ -951,6 +953,10 @@@@
d30 1
a30 1
@@@@ -1003,12 +1009,20 @@@@
@

