head	1.6;
access;
symbols
	OPENBSD_6_1:1.5.0.8
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.6
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.1.1.1.0.2
	OPENBSD_5_5_BASE:1.1.1.1
	zhuk_20140110:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2017.07.27.11.27.20;	author sthen;	state Exp;
branches;
next	1.5;
commitid	2PWOEeTpioKO3x8c;

1.5
date	2015.05.28.10.17.25;	author pascal;	state Exp;
branches;
next	1.4;
commitid	020U4lCPk8wUkCOz;

1.4
date	2015.03.27.08.16.18;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	BUhOiEl2FUSRKwq7;

1.3
date	2014.07.11.17.37.55;	author zhuk;	state Exp;
branches;
next	1.2;
commitid	eeDSwUlrmwwQKCEc;

1.2
date	2014.07.10.08.23.34;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	j44PK2EYbLDIhPJh;

1.1
date	2014.01.10.08.03.29;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2014.01.10.08.03.29;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.6
log
@explicitly unset WANTLIB for kde-shared-data, it's just icons etc.
LIB_DEPENDS was already explicitly unset.
bump.
@
text
@# $OpenBSD: Makefile,v 1.5 2015/05/28 10:17:25 pascal Exp $

COMMENT =	common run-time components for KDE3 and KDE4
CATEGORIES =	x11 x11/kde3
PKGNAME =	kde-shared-data-${MODKDE4_VERSION}
PKG_ARCH =	*
REVISION =	2

MODULES =		x11/kde4
MODKDE4_USE =
MODKDE4_NO_QT =		Yes
MODKDE4_FIX_GETTEXT =	No

PERMIT_PACKAGE_CDROM =	Yes

KDE3_VERSION =		3.5.10

DISTFILES =		kdebase-${KDE3_VERSION}.tar.bz2 \
			kde-runtime-${MODKDE4_VERSION}.tar.xz:0

DIST_SUBDIR =		kde
MASTER_SITES =		${MASTER_SITE_KDE:=stable/${KDE3_VERSION}/src/}
MASTER_SITES0 =		${MASTER_SITE_KDE:=stable/${MODKDE4_VERSION}/src/}

BUILD_DEPENDS =
WANTLIB =
LIB_DEPENDS =
RUN_DEPENDS =		x11/gtk+3,-guic

CONFIGURE_STYLE =	none
NO_BUILD =		Yes

DESKDIRS =	${PREFIX}/share/desktop-directories
ICONDIRS =	${PREFIX}/share/icons/hicolor/

ICON_APPS =	knetattach
ICON_DIMS =	16 22 32 48 64 128

# minimize time spent on extracting by providing patterns
do-extract:
	cd ${WRKDIR}; ${LOCALBASE}/bin/bzcat \
	    ${FULLDISTDIR}/${DISTFILES:C/:[0-9]$//:M*.bz2} | \
		pax -r '*/kde*.directory'
	cd ${WRKDIR}; ${LOCALBASE}/bin/xzcat \
	    ${FULLDISTDIR}/${DISTFILES:C/:[0-9]$//:M*.xz} | \
		pax -r '*/kde*.directory' '*/hi*.png' '*/hisc*.svgz'

do-install:
# desktop directory descriptions, ordering matters
	${INSTALL_DATA_DIR} ${DESKDIRS}
	cd ${WRKSRC}/kdebase-${KDE3_VERSION}/applnk; \
		${INSTALL_DATA} kde*.directory ${DESKDIRS}
	cd ${WRKSRC}/kde-runtime-${MODKDE4_VERSION}/menu/desktop; \
		${INSTALL_DATA} kde*.directory ${DESKDIRS}

# PNG icons
.for _dim in ${ICON_DIMS}
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/${_dim}x${_dim}/apps
. for _app in ${ICON_APPS}
	cd ${WRKSRC}/kde-runtime-${MODKDE4_VERSION}; \
	! test -e ${_app}/hi${_dim}-app-${_app}.png || \
	    ${INSTALL_DATA} ${_app}/hi${_dim}-app-${_app}.png \
	        ${PREFIX}/share/icons/hicolor/${_dim}x${_dim}/apps
. endfor
.endfor

# scalable icons
	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/scalable/apps
.for _app in ${ICON_APPS}
	cd ${WRKSRC}/kde-runtime-${MODKDE4_VERSION}; \
	! test -e ${_app}/hisc-app-${_app}.svgz || \
	    ${INSTALL_DATA} ${_app}/hisc-app-${_app}.svgz \
	        ${PREFIX}/share/icons/hicolor/scalable/apps
.endfor

.include <bsd.port.mk>
@


1.5
log
@gcc4 bumps, reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/03/27 08:16:18 ajacoutot Exp $
d7 1
a7 1
REVISION =	1
d26 1
@


1.4
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2014/07/11 17:37:55 zhuk Exp $
d7 1
a7 1
REVISION =	0
@


1.3
log
@Put back simplified version, to help blind dpb(1). Doesn't affect package.

Reported and fix tested by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2014/07/10 08:23:34 zhuk Exp $
d7 1
d27 1
a27 1
RUN_DEPENDS =		x11/gtk+2,-guic
@


1.2
log
@Update this together with KDE, too.

Noticed by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/01/10 08:03:29 zhuk Exp $
a14 3
# first one should be the ${MODKDE4_VERSION}
MODKDE4_VERSION =	4.13.2
ALL_KDE4_VERSIONS =	${MODKDE4_VERSION}
a19 7
_i =	0
.for _v in ${ALL_KDE4_VERSIONS}
SUPDISTFILES +=		kde-runtime-${_v}.tar.xz:${_i}
MASTER_SITES${_i} =	${MASTER_SITE_KDE:=stable/${_v}/src/}
_i !=	echo $$((${_i} + 1))
.endfor

d22 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d15 3
d19 1
d23 7
a31 1
MASTER_SITES0 =		${MASTER_SITE_KDE:=stable/${MODKDE4_VERSION}/src/}
@


1.1.1.1
log
@This package installs common non-compiled run-time components used by
both KDE 3 and KDE 4. This allows to run KDE 3 & 4 apps simultaneously.

Helps to deconflict kdebase-3.x and kde-runtime-4.x. Could probably evolve
in future by extracting more stuff.

input and okay landry@@
@
text
@@
