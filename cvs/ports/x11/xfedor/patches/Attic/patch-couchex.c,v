head	1.2;
access;
symbols
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@ * @;


1.2
date	2001.06.12.07.28.23;	author kevlo;	state dead;
branches;
next	1.1;

1.1
date	2000.04.15.11.12.29;	author turan;	state Exp;
branches;
next	;


desc
@@


1.2
log
@upgrade to version 5.0.1
@
text
@*** couchex.c.orig	Thu May 26 21:59:03 1994
--- couchex.c	Tue Sep  3 02:09:18 1996
***************
*** 366,377 ****
  {
  	XEvent rep ;
  	static int ZoneCour = 0 ;
! 	int i, keysym ;
  	char s[1] ;
  
  	do {
  	   XNextEvent(Dpl,&rep) ;
!            if (rep.type == KeyPress) XLookupString(&rep,s,1,&keysym,NULL);
  	} while ( ((rep.type != Expose) || (rep.xexpose.count != 0)) &&
  		  ((rep.type != KeyPress) || (IsModifierKey(keysym))) &&
  		  (rep.type != ButtonPress) &&
--- 366,378 ----
  {
  	XEvent rep ;
  	static int ZoneCour = 0 ;
! 	int i ;
! 	KeySym keysym ;
  	char s[1] ;
  
  	do {
  	   XNextEvent(Dpl,&rep) ;
! 	   if (rep.type == KeyPress) XLookupString(&rep.xkey,s,1,&keysym,NULL);
  	} while ( ((rep.type != Expose) || (rep.xexpose.count != 0)) &&
  		  ((rep.type != KeyPress) || (IsModifierKey(keysym))) &&
  		  (rep.type != ButtonPress) &&
***************
*** 788,798 ****
          int wd ;
  { 
          int px, py ;
! 	long bidon ;
  	XWindowAttributes watt ;
  
  	XGetWindowAttributes(Dpl,wd,&watt);
! 	XQueryPointer(Dpl,root,&bidon,&bidon,&px,&py,&bidon,&bidon,&bidon);
  	
  	if ((px + watt.width/2) > DisplayWidth(Dpl,screen))
  	  px = DisplayWidth(Dpl,screen) - watt.width/2 ;
--- 789,801 ----
          int wd ;
  { 
          int px, py ;
! 	Window bidon ;
! 	int fake;
! 	unsigned int mfake;
  	XWindowAttributes watt ;
  
  	XGetWindowAttributes(Dpl,wd,&watt);
! 	XQueryPointer(Dpl,root,&bidon,&bidon,&px,&py,&fake,&fake,&mfake);
  	
  	if ((px + watt.width/2) > DisplayWidth(Dpl,screen))
  	  px = DisplayWidth(Dpl,screen) - watt.width/2 ;
@


1.1
log
@fix broken port.  reorder patches.
@
text
@@

