head	1.48;
access;
symbols
	OPENBSD_6_1:1.41.0.2
	OPENBSD_6_1_BASE:1.41
	OPENBSD_6_0:1.39.0.2
	OPENBSD_6_0_BASE:1.39
	OPENBSD_5_9:1.37.0.2
	OPENBSD_5_9_BASE:1.37
	OPENBSD_5_8:1.32.0.4
	OPENBSD_5_8_BASE:1.32
	OPENBSD_5_7:1.31.0.4
	OPENBSD_5_7_BASE:1.31
	OPENBSD_5_6:1.31.0.2
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.28.0.2
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.21.0.2
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.20.0.4
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.19.0.2
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	landry_20071025:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.48
date	2017.07.26.22.45.34;	author sthen;	state Exp;
branches;
next	1.47;
commitid	tD4MFrpYYDDL2UFT;

1.47
date	2017.07.21.23.06.08;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	eWh2VzOsySSFKva8;

1.46
date	2017.07.16.19.19.05;	author espie;	state Exp;
branches;
next	1.45;
commitid	tt0GhWK5c4uf9ILG;

1.45
date	2017.05.27.13.55.59;	author ajacoutot;	state Exp;
branches;
next	1.44;
commitid	SykG6k6P85X3Gc2i;

1.44
date	2017.05.03.11.25.12;	author jca;	state Exp;
branches;
next	1.43;
commitid	KmM13N347ZxWtG3R;

1.43
date	2017.04.16.09.19.02;	author jasper;	state Exp;
branches;
next	1.42;
commitid	HjYgOK2N1jW1kZbo;

1.42
date	2017.04.10.11.46.36;	author sthen;	state Exp;
branches;
next	1.41;
commitid	HY6VNZxjJWzKQFDV;

1.41
date	2016.10.14.09.33.12;	author landry;	state Exp;
branches;
next	1.40;
commitid	3SueauEcewCNghkE;

1.40
date	2016.09.07.10.01.56;	author jasper;	state Exp;
branches;
next	1.39;
commitid	eCxjQ091tKiZkiNN;

1.39
date	2016.03.18.23.12.22;	author naddy;	state Exp;
branches;
next	1.38;
commitid	KZAl4KEiw6a3Jixw;

1.38
date	2016.03.09.18.21.03;	author jasper;	state Exp;
branches;
next	1.37;
commitid	BKEaZegUswU5TAyu;

1.37
date	2015.12.21.10.17.32;	author ajacoutot;	state Exp;
branches;
next	1.36;
commitid	mtNXgqH8qNXf2w4k;

1.36
date	2015.12.21.09.32.00;	author ajacoutot;	state Exp;
branches;
next	1.35;
commitid	89yBmxf8zl7f4edS;

1.35
date	2015.12.20.09.38.14;	author ajacoutot;	state Exp;
branches;
next	1.34;
commitid	SUL8g4c0gjEg4ZTf;

1.34
date	2015.12.19.14.13.45;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	jNmUMRLbxGUrj246;

1.33
date	2015.08.15.11.13.41;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	AXPeqyjAAuMdtb7k;

1.32
date	2015.04.04.09.21.08;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	kS3kwKZogsvzYmEY;

1.31
date	2014.07.09.16.49.35;	author jasper;	state Exp;
branches;
next	1.30;
commitid	DrFfqEFlhFyZpgej;

1.30
date	2014.03.26.07.26.04;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2014.03.19.13.53.29;	author jasper;	state Exp;
branches;
next	1.28;

1.28
date	2014.01.30.16.58.58;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2014.01.30.14.25.35;	author zhuk;	state Exp;
branches;
next	1.26;

1.26
date	2014.01.13.20.00.50;	author landry;	state Exp;
branches;
next	1.25;

1.25
date	2013.10.31.09.03.33;	author dcoppa;	state Exp;
branches;
next	1.24;

1.24
date	2013.09.25.07.12.54;	author rpointel;	state Exp;
branches;
next	1.23;

1.23
date	2013.04.18.12.00.45;	author gonzalo;	state Exp;
branches;
next	1.22;

1.22
date	2013.03.11.11.46.15;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2012.09.02.09.22.59;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2011.06.02.13.41.42;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2011.03.24.22.01.08;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2011.03.09.18.51.49;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.01.17.14.57.38;	author landry;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.22.08.37.04;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.11.09.27.14;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.24.21.15.34;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.10.19.08.13.59;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.08.24.11.37.50;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2010.07.30.08.02.59;	author ajacoutot;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2010.07.30.06.59.00;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.07.10.10.46.52;	author armani;	state Exp;
branches;
next	1.7;

1.7
date	2009.11.05.19.05.12;	author landry;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2009.09.04.20.24.25;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2008.11.05.13.36.41;	author pea;	state Exp;
branches
	1.5.2.1
	1.5.4.1;
next	1.4;

1.4
date	2008.01.04.17.48.38;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2007.12.30.10.46.49;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.25.09.30.13;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.24.23.32.00;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.24.23.32.00;	author landry;	state Exp;
branches;
next	;

1.5.2.1
date	2009.09.16.02.12.39;	author william;	state Exp;
branches;
next	;

1.5.4.1
date	2009.10.25.03.48.47;	author william;	state Exp;
branches;
next	;

1.7.2.1
date	2010.08.24.11.43.16;	author jasper;	state Exp;
branches;
next	;

1.10.2.1
date	2010.08.24.11.43.29;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.48
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.47 2017/07/21 23:06:08 ajacoutot Exp $

COMMENT=	simple login manager

DISTNAME=	slim-1.3.6
REVISION=	18

SHARED_LIBS=	slim	0.0 # 1.3

CATEGORIES=	x11
MAINTAINER =	Landry Breuil <landry@@openbsd.org>
HOMEPAGE=	https://github.com/iwamatsu/slim

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=slim.berlios/}

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MODULES =	devel/cmake
LIB_DEPENDS=	graphics/jpeg \
		sysutils/consolekit \
		x11/dbus \
		graphics/png

WANTLIB += X11 Xft Xmu Xrandr Xrender c ck-connector dbus-1
WANTLIB += fontconfig freetype jpeg m png pthread ${COMPILER_LIBCXX} z

CONFIGURE_ARGS= -DUSE_CONSOLEKIT:Bool=Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/slim.1 ${WRKSRC}/slim.conf

.include <bsd.port.mk>
@


1.47
log
@Renove workaround that now breaks runtime.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2017/07/16 19:19:05 espie Exp $
d6 1
a6 1
REVISION=	17
@


1.46
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2017/05/27 13:55:59 ajacoutot Exp $
d6 1
a6 1
REVISION=	16
@


1.45
log
@I forgot the bump commit...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2017/05/03 11:25:12 jca Exp $
d26 1
a26 1
WANTLIB += fontconfig freetype jpeg m png pthread ${LIBCXX} z
@


1.44
log
@Fix pointer < 0 check, fixes build with clang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2017/04/16 09:19:02 jasper Exp $
d6 1
a6 1
REVISION=	15
@


1.43
log
@xdm -> xenodm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2017/04/10 11:46:36 sthen Exp $
d6 1
a6 1
REVISION=	14
@


1.42
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2016/10/14 09:33:12 landry Exp $
d6 1
a6 1
REVISION=	13
@


1.41
log
@berlios.de died ages ago, move HOMEPAGE to a github mirror. Note that
upstream is more or less dead, sadly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2016/09/07 10:01:56 jasper Exp $
d26 1
a26 1
WANTLIB += fontconfig freetype jpeg m png pthread stdc++ z
@


1.40
log
@remove paragraph regarding zaurus
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2016/03/18 23:12:22 naddy Exp $
d6 1
a6 1
REVISION=	12
d12 1
a12 1
HOMEPAGE=	http://slim.berlios.de/
@


1.39
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/03/09 18:21:03 jasper Exp $
d6 1
a6 1
REVISION=	11
@


1.38
log
@don't bother mentioning vax here anymore
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.37 2015/12/21 10:17:32 ajacoutot Exp $

SHARED_ONLY=	Yes
@


1.37
log
@Override _rc_wait(); these scripts are a bit hackish because they need
/usr/libexec/getty to be started but it is started later in the boot
process.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/12/21 09:32:00 ajacoutot Exp $
d8 1
a8 1
REVISION=	10
@


1.36
log
@Revert, this breaks rc_stop() for these daemons.
I'm working on a better fix.

spotted by dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/12/20 09:38:14 ajacoutot Exp $
d8 1
a8 1
REVISION=	9
@


1.35
log
@Move pexp where it belongs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/12/19 14:13:45 ajacoutot Exp $
d8 1
a8 1
REVISION=	8
@


1.34
log
@Cope with new rc.subr behavior so that we don't end hanging in _rc_wait
start.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/08/15 11:13:41 ajacoutot Exp $
d8 1
a8 1
REVISION=	7
@


1.33
log
@Bump after the consolekit->consolekit2 renaming.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/04/04 09:21:08 ajacoutot Exp $
d8 1
a8 1
REVISION=	6
@


1.32
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/07/09 16:49:35 jasper Exp $
d8 1
a8 1
REVISION=	5
@


1.31
log
@- remove unreachable homepages on berlios and add a working one where applicable
- move master sites to the berliosbot created sourceforge projects
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/03/26 07:26:04 dcoppa Exp $
d8 1
a8 1
REVISION=	4
@


1.30
log
@Ops. Bump (to be on the safe side)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/03/19 13:53:29 jasper Exp $
d16 1
a16 1
MASTER_SITES=	${MASTER_SITE_BERLIOS:=slim/}
@


1.29
log
@more assorted m68k related cleanups
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/01/30 16:58:58 ajacoutot Exp $
d8 1
a8 1
REVISION=	3
@


1.28
log
@Sync rc_start() between these 3 daemons since they do the same.
Keeping the sleep 2 in kdm.rc -- not sure why this is needed, zhuk@@ probably
knows.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/01/30 14:25:35 zhuk Exp $
d8 1
a8 1
REVISION=	2
@


1.27
log
@Do in the x11/slim the same dance as in GDM/KDM: on boot, wait in
background for getty process to appear.

Tested by me on i386, okay landry@@ (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/01/13 20:00:50 landry Exp $
d8 1
a8 1
REVISION=	1
@


1.26
log
@Use sessionstart_cmd & sessionstop_cmd to transfer the ownership of
/dev/drm0 to the user logging in, and transfer it back to root upon logout.
If you have customized your /etc/slim.conf file, make sure to merge this
change.

Discussed with & hints by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/10/31 09:03:33 dcoppa Exp $
d8 1
a8 1
REVISION=	0
@


1.25
log
@Update to slim-1.3.6

ok rpe@@, jung@@, landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/09/25 07:12:54 rpointel Exp $
d8 1
@


1.24
log
@remove the MESSAGE file which was added 2 years ago, bump revision.
yaya landry@@.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.23 2013/04/18 12:00:45 gonzalo Exp $
d7 3
a9 2
DISTNAME=	slim-1.3.5
REVISION=	0
d26 2
a27 2
WANTLIB += X11 Xft Xmu Xrender c ck-connector dbus-1 fontconfig
WANTLIB += freetype jpeg m png pthread stdc++ z
d29 1
a29 1
CONFIGURE_ARGS= -DUSE_CONSOLEKIT="yes"
@


1.23
log
@Update for Slim to 1.3.5:

 * Support UTF8 string.
 * And fix some bugs.

Ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/11 11:46:15 espie Exp $
d6 1
@


1.22
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/09/02 09:22:59 landry Exp $
d5 1
a5 1
DISTNAME=	slim-1.3.4
d22 2
a23 2
WANTLIB=	X11 Xft Xmu Xrender fontconfig c m stdc++ z freetype jpeg png
WANTLIB +=	pthread dbus-1 ck-connector
@


1.21
log
@Update to slim 1.3.4.

- switch to cmake.
- add missing setusercontext() call in switchuser.cpp, now the ulimits
  are properly applied when logging in.
- add support for bsd_auth(3) through auth_userokay(3). Now allows to
  login via login_ldap/login_yubikey/etc...
- add support for consolekit, no need to do ck-launch-session in
  .xinitrc anymore.
- make consolekit support at runtime optional, ie don't badly bail out
  if systemwide dbus daemon is not running. Being discussed with
upstream.
parts based on a diff from 'johnw', ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/12/17 22:01:13 sthen Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.20
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/06/02 13:41:42 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	slim-1.3.2
REVISION=	5
d8 1
d13 1
a13 1
# GPL
d19 1
a19 3
USE_GMAKE=	Yes
USE_GROFF =	Yes
NO_REGRESS=	Yes
d21 2
d26 1
d28 1
a28 4
MAKE_FILE=	Makefile.openbsd
MAKE_FLAGS+=	CFGDIR=${SYSCONFDIR}
FAKE_FLAGS+=	PREFIX=${PREFIX} \
		CFGDIR=${PREFIX}/share/examples/slim
@


1.19
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/03/24 22:01:08 landry Exp $
d6 1
a6 1
REVISION=	4
@


1.18
log
@Drop MAINTAINER on various ports i don't use.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/03/09 18:51:49 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
@


1.17
log
@Remove now uneeded redirection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/01/17 14:57:38 landry Exp $
d6 1
a6 1
REVISION=	2
a10 1
MAINTAINER=	Landry Breuil <gaston@@gcu.info>
@


1.16
log
@Add an rc script for slim.
ok ajacoutot@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/22 08:37:04 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.15
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/11 09:27:14 jasper Exp $
d6 1
a6 1
REVISION=	0
@


1.14
log
@- switch to pkg-readmes

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/10/24 21:15:34 ajacoutot Exp $
d23 2
a24 2
LIB_DEPENDS=	::graphics/jpeg \
		::graphics/png
@


1.13
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/10/19 08:13:59 espie Exp $
d6 1
a34 7

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/slim
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/doc/slim/README.OpenBSD
	chown ${SHAREOWN}:${SHAREGRP} \
		${PREFIX}/share/doc/slim/README.OpenBSD
@


1.12
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/08/24 11:37:50 landry Exp $
a18 1
USE_X11=	Yes
@


1.11
log
@Update to slim 1.3.2, fixes a security issue (removes . from
default_path, sometimes inherited by some window managers)
ref: http://secunia.com/advisories/41005
Removes patches merged upstream. Amend MESSAGE to teach users
who modified slim.conf how to fix it there.
Prompted by and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/30 08:02:59 ajacoutot Exp $
d21 1
@


1.10
log
@Move move to new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/07/30 06:59:00 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	slim-1.3.1
REVISION=	3
d20 1
@


1.10.2.1
log
@Security fix for slim, from upstream svn:

SA41005, SLiM Insecure Default "default_path" Configuration Weakness

If you have modified /etc/slim.conf, make sure to remove './' from
the default_path configuration directive.

ok landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/30 08:02:59 ajacoutot Exp $
d6 1
a6 1
REVISION=	4
@


1.9
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/07/10 10:46:52 armani Exp $
d6 1
a6 1
REVISION=	2
d22 2
a23 2
LIB_DEPENDS=	jpeg::graphics/jpeg \
		png::graphics/png
d25 1
a25 1
WANTLIB=	X11 Xft Xmu Xrender fontconfig c m stdc++ z freetype
@


1.8
log
@Add a fix from Freebsd :

 x11/slim, does not setlogin(). Some software use getlogin()
 to decide the user name, so when user is using slim as the
 login manager, those software would get wrong results, and
 some programs refuse to start

(Seen with opencvs some times ago, reminded by a discution
with zinovik and theo and setlogin hint from guenter)

ok maintainer & dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/11/05 19:05:12 landry Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.7
log
@Fix a nasty race condition/crash reported by 'goebbels@@wp.pl' : when an
X session finishes, slim goes to restart X, but if the machine is being
halted, slim gets a SIGTERM, and the signal handler tries to kill the X
server without checking if is has been restarted yet. Boom.
While here, fix xauth path.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/09/04 20:24:25 landry Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.7.2.1
log
@Security fix for slim, from upstream svn:

SA41005, SLiM Insecure Default "default_path" Configuration Weakness

If you have modified /etc/slim.conf, make sure to remove './' from
the default_path configuration directive.

ok landry@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/11/05 19:05:12 landry Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.6
log
@Add a bunch of patches to fix CVE-2009-1756, also reported in debian bz
#529306 & FreeBSD PR134801 :
The security issue is caused by slim generating the X authority file
by passing the X authority cookie via the command line to "xauth".
This can be exploited to disclose the X authority cookie by consulting
the process list and e.g. gain access the user's display.
While here, use slightly better random seeding for cookie generation.

Patches adapted from the ones provided to debian/FreeBSD by Eygene Ryabinkin <rea@@codelabs.ru>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/11/05 13:36:41 pea Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.5
log
@Upgrade to 1.3.1
Initial diff by me with tweaks by landry@@ and ajacoutot@@

OK landry@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/01/04 17:48:38 espie Exp $
d6 1
@


1.5.4.1
log
@MFC:

SECURITY FIX

Resolves CVE-2009-1756
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/09/04 20:24:25 landry Exp $
a5 1
PKGNAME=	${DISTNAME}p0
@


1.5.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2009-1756

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/09/04 20:24:25 landry Exp $
a5 1
PKGNAME=	${DISTNAME}p0
@


1.4
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/12/30 10:46:49 landry Exp $
d5 1
a5 2
DISTNAME=	slim-1.3.0
PKGNAME=	${DISTNAME}p1
d32 1
a32 3
	perl -pi -e 's!/usr/!${PREFIX}/!' ${WRKSRC}/slim.1
	perl -pi -e 's!%%X11BASE%%!${X11BASE}!' ${WRKSRC}/slim.conf
	perl -pi -e 's!%%LOCALBASE%%!${LOCALBASE}!' ${WRKSRC}/slim.conf
d36 4
a39 4
	@@sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' \
		-e 's,!!SYSCONFDIR!!,${SYSCONFDIR},g' \
		< ${FILESDIR}/README.OpenBSD \
		> ${PREFIX}/share/doc/slim/README.OpenBSD
@


1.3
log
@Provide saner defaults for slim.conf, use sh -l instead of sh - to make it
read $HOME/.profile. Reported by Rodolfo Gouveia, thanks !

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/10/25 09:30:13 landry Exp $
d30 1
a30 2
		CFGDIR=${PREFIX}/share/examples/slim \
		DESTDIR=${WRKINST}
@


1.2
log
@Don't use MULTI_PACKAGES when it's not needed, requested by espie@@.
With tweaks from steven@@ and espie@@, ok ajacoutot@@ espie@@.
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d3 1
a3 2
COMMENT-main=	simple login manager
COMMENT-themes=	slim themes bundle
a4 1
VTHEME=		1.2.3
d6 1
a6 7
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} \
		slim-${VTHEME}-themepack1a${EXTRACT_SUFX}

EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX}

PKGNAME-main=	${DISTNAME}
PKGNAME-themes=	slim-themes-${VTHEME}
a19 5
MULTI_PACKAGES=	-main -themes

LIB_DEPENDS-themes=
PKG_ARCH-themes=	*

d25 1
a25 1
WANTLIB-main=	X11 Xft Xmu Xrender fontconfig c m stdc++ z freetype
a38 2
	@@tar xzf ${FULLDISTDIR}/slim-${VTHEME}-themepack1a${EXTRACT_SUFX} \
		-C ${PREFIX}/share/slim/themes
@


1.1.1.1
log
@Import slim, a lightweight graphical login manager.
Additional themes availables in -themes subpackage.

Testing and feedback from kili@@ and ajacoutot@@, ok ajacoutot@@ and jasper@@
@
text
@@
