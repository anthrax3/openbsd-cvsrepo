head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.2
	OPENBSD_6_2_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.05.22.10.22.25;	author espie;	state Exp;
branches;
next	;
commitid	vsammZPigjjbsBDR;


desc
@@


1.1
log
@let it build with base clang.
there's an horrible work-around because we have use_locale stubs only
in C++ mode...
@
text
@$OpenBSD$
Use qt4 atomics there, they're portable (taken from FreeBSD)

Index: modules/gui/qt4/dialogs/messages.hpp
--- modules/gui/qt4/dialogs/messages.hpp.orig
+++ modules/gui/qt4/dialogs/messages.hpp
@@@@ -30,6 +30,7 @@@@
 #include <stdarg.h>
 #include <vlc_atomic.h>
 #include <QMutex>
+#include <QAtomicInt>
 
 class QTabWidget;
 class QPushButton;
@@@@ -55,7 +56,7 @@@@ class MessagesDialog : public QVLCFrame, public Single
     void sinkMessage( const MsgEvent * );
     bool matchFilter( const QString& );
 
-    atomic_uint verbosity;
+    QAtomicInt verbosity;
     static void MsgCallback( void *, int, const vlc_log_t *, const char *,
                              va_list );
 
@
