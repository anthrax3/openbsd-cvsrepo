head	1.2;
access;
symbols
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.04.11.17.58.42;	author brad;	state dead;
branches;
next	1.1;

1.1
date	2013.02.06.13.07.05;	author brad;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to VLC 2.0.6.

ok sthen@@
@
text
@$OpenBSD: patch-modules_demux_mkv_Ebml_parser_hpp,v 1.1 2013/02/06 13:07:05 brad Exp $

Fix MKV behaviour with unknown or new EBML elements.

--- modules/demux/mkv/Ebml_parser.hpp.orig	Thu Dec  8 13:00:26 2011
+++ modules/demux/mkv/Ebml_parser.hpp	Tue Feb  5 07:55:42 2013
@@@@ -39,7 +39,7 @@@@ class EbmlParser
     void Up( void );
     void Down( void );
     void Reset( demux_t *p_demux );
-    EbmlElement *Get( void );
+    EbmlElement *Get( int n_call = 0 );
     void        Keep( void );
     EbmlElement *UnGet( uint64 i_block_pos, uint64 i_cluster_pos );
 
@@@@ -49,16 +49,17 @@@@ class EbmlParser
     bool IsTopPresent( EbmlElement * ) const;
 
   private:
+    demux_t     *p_demux;
     EbmlStream  *m_es;
-    int         mi_level;
+    int          mi_level;
     EbmlElement *m_el[10];
     int64_t      mi_remain_size[10];
 
     EbmlElement *m_got;
 
-    int         mi_user_level;
-    bool        mb_keep;
-    bool        mb_dummy;
+    int          mi_user_level;
+    bool         mb_keep;
+    bool         mb_dummy;
 };
 
 /* This class works around a bug in KaxBlockVirtual implementation */
@


1.1
log
@Two fixes from upstream..

- Fix crash with broken ASF files (SA-1302).
- Fix MKV behaviour with unknown or new EBML elements.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@

