head	1.7;
access;
symbols
	OPENBSD_5_0:1.6.0.6
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.4
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.6
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.6
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.4
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_0:1.3.0.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2011.11.16.13.33.15;	author phessler;	state dead;
branches;
next	1.6;

1.6
date	2010.05.05.08.43.35;	author edd;	state Exp;
branches;
next	1.5;

1.5
date	2008.09.15.22.14.23;	author jakemsr;	state Exp;
branches;
next	1.4;

1.4
date	2008.04.04.00.53.01;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2007.06.05.01.53.04;	author jolan;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2007.04.08.17.34.20;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.23.13.31.31;	author jolan;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2007.06.26.19.19.33;	author sturm;	state Exp;
branches;
next	;

1.3.2.1
date	2007.06.26.19.26.04;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to VLC 1.1.12

Most of the bits from Brad, a minor runtime fix by me.

Tested on amd64, i386, macppc

OK dhill@@, rpointel@@, sthen@@, jasper@@
@
text
@$OpenBSD: patch-modules_codec_faad_c,v 1.6 2010/05/05 08:43:35 edd Exp $
--- modules/codec/faad.c.orig	Tue Oct 20 16:30:34 2009
+++ modules/codec/faad.c	Sat Nov 28 16:25:46 2009
@@@@ -149,7 +149,7 @@@@ static int Open( vlc_object_t *p_this )
     if( p_dec->fmt_in.i_extra > 0 )
     {
         /* We have a decoder config so init the handle */
-        unsigned long i_rate;
+        unsigned int i_rate;
         unsigned char i_channels;
 
         if( faacDecInit2( p_sys->hfaad, p_dec->fmt_in.p_extra,
@@@@ -257,7 +257,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
     if( p_dec->fmt_out.audio.i_rate == 0 && p_dec->fmt_in.i_extra > 0 )
     {
         /* We have a decoder config so init the handle */
-        unsigned long i_rate;
+        unsigned int i_rate;
         unsigned char i_channels;
 
         if( faacDecInit2( p_sys->hfaad, p_dec->fmt_in.p_extra,
@@@@ -276,7 +276,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
 
     if( p_dec->fmt_out.audio.i_rate == 0 && p_sys->i_buffer )
     {
-        unsigned long i_rate;
+        unsigned int i_rate;
         unsigned char i_channels;
 
         /* Init faad with the first frame */
@@@@ -379,7 +379,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
             const char *psz_ext = (frame.sbr && frame.ps) ? "SBR+PS" :
                                     frame.sbr ? "SBR" : "PS";
 
-            msg_Dbg( p_dec, "AAC %s (channels: %u, samplerate: %lu)",
+            msg_Dbg( p_dec, "AAC %s (channels: %u, samplerate: %u)",
                     psz_ext, frame.channels, frame.samplerate );
 
             if( !p_dec->p_description )
@


1.6
log
@Update to vlc-1.0.6 from maintainer Brad Smith.
OK dcoppa@@, sthen@@.
@
text
@d1 1
a1 1
$OpenBSD: patch-modules_codec_faad_c,v 1.5 2008/09/15 22:14:23 jakemsr Exp $
@


1.5
log
@
- simpler faad related patching
- bump PKGNAME

ok brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- modules/codec/faad.c.orig	Tue Jul  8 13:59:23 2008
+++ modules/codec/faad.c	Sat Sep  6 15:16:11 2008
@@@@ -150,7 +150,7 @@@@ static int Open( vlc_object_t *p_this )
d13 1
a13 1
@@@@ -253,7 +253,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
d22 1
a22 1
@@@@ -268,7 +268,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
d31 1
a31 1
@@@@ -368,7 +368,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
d39 1
a39 1
             if( asprintf( &psz_cat, _("Stream %d"), p_dec->fmt_in.i_id ) != -1 )
@


1.4
log
@security/bugfix update

from the release notes:

VLC media player 0.8.6e and earlier versions suffer from security
vulnerabilities in the Subtitle demuxer, Real RTSP demuxer, MP4
demuxer and Cinepak codec.

from brad@@
@
text
@d1 10
a10 18
$OpenBSD: patch-modules_codec_faad_c,v 1.3 2007/06/05 01:53:04 jolan Exp $
--- modules/codec/faad.c.orig	Mon Mar 31 15:15:33 2008
+++ modules/codec/faad.c	Thu Apr  3 03:35:55 2008
@@@@ -359,6 +359,9 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
         p_dec->fmt_out.audio.i_rate = frame.samplerate;
         p_dec->fmt_out.audio.i_channels = frame.channels;
 
+#if 0
+XXX: faad needs to be updated to 2.5?
+
         /* Adjust stream info when dealing with SBR/PS */
         if( (p_sys->b_sbr != frame.sbr || p_sys->b_ps != frame.ps) &&
             p_dec->p_parent->i_object_type == VLC_OBJECT_INPUT )
@@@@ -383,6 +386,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
             }
             p_sys->b_sbr = frame.sbr; p_sys->b_ps = frame.ps;
         }
+#endif
d12 28
a39 2
         /* Convert frame.channel_position to our own channel values */
         p_dec->fmt_out.audio.i_physical_channels = 0;
@


1.3
log
@update to 0.8.6b, from brad
@
text
@d1 4
a4 4
$OpenBSD: patch-modules_codec_faad_c,v 1.2 2007/04/08 17:34:20 ajacoutot Exp $
--- modules/codec/faad.c.orig	Tue Apr 17 17:45:11 2007
+++ modules/codec/faad.c	Fri May 11 23:50:40 2007
@@@@ -315,6 +315,9 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
d14 3
a16 3
@@@@ -336,6 +339,7 @@@@ static aout_buffer_t *DecodeBlock( decoder_t *p_dec, b
           free( psz_cat );
           p_sys->b_sbr = frame.sbr; p_sys->b_ps = frame.ps;
@


1.3.2.1
log
@MFC:
- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA
plugins
@
text
@d1 4
a4 4
$OpenBSD: patch-modules_codec_faad_c,v 1.3 2007/06/05 01:53:04 jolan Exp $
--- modules/codec/faad.c.orig	Sat Jun 16 16:25:12 2007
+++ modules/codec/faad.c	Tue Jun 26 20:54:43 2007
@@@@ -315,6 +315,9 @@@@ static aout_buffer_t *DecodeBlock( decod
d14 1
a14 1
@@@@ -336,6 +339,7 @@@@ static aout_buffer_t *DecodeBlock( decod
@


1.2
log
@- enable x264 support
- add missing xenocara LIBS
- regen patches while here

"go for it" naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-modules_codec_faad_c,v 1.1 2006/12/23 13:31:31 jolan Exp $
--- modules/codec/faad.c.orig	Sat Dec  9 02:12:20 2006
+++ modules/codec/faad.c	Sun Apr  8 10:45:29 2007
d21 1
a21 1
         for( i = 0; i < frame.channels; i++ )
@


1.1
log
@update to 0.8.6
@
text
@d1 4
a4 4
$OpenBSD$
--- modules/codec/faad.c.orig	Fri Dec  8 19:12:20 2006
+++ modules/codec/faad.c	Sat Dec 23 03:55:01 2006
@@@@ -315,6 +315,9 @@@@ static aout_buffer_t *DecodeBlock( decod
d14 1
a14 1
@@@@ -336,6 +339,7 @@@@ static aout_buffer_t *DecodeBlock( decod
@


1.1.2.1
log
@MFC:
- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA
plugins
@
text
@d1 3
a3 3
$OpenBSD: patch-modules_codec_faad_c,v 1.1 2006/12/23 13:31:31 jolan Exp $
--- modules/codec/faad.c.orig	Sat Jun 16 16:25:12 2007
+++ modules/codec/faad.c	Tue Jun 26 20:59:18 2007
d21 1
a21 1
         p_dec->fmt_out.audio.i_physical_channels = 0;
@


