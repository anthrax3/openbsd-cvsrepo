head	1.33;
access;
symbols
	OPENBSD_6_1:1.32.0.4
	OPENBSD_6_1_BASE:1.32
	OPENBSD_6_0:1.32.0.2
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.30.0.4
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.30.0.2
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.28.0.2
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.25.0.2
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.19.0.2
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.14.0.8
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.6
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.14.0.4
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.2
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.11.0.2
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.2
	OPENBSD_3_7_BASE:1.1;
locks; strict;
comment	@# @;


1.33
date	2017.05.27.08.40.14;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	mLnSwmmPhe9po981;

1.32
date	2016.03.03.12.01.17;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	STj3Focr376bi7rt;

1.31
date	2015.05.24.07.16.31;	author ajacoutot;	state Exp;
branches;
next	1.30;
commitid	ppIzpTyUJwYSsnNW;

1.30
date	2014.04.28.17.35.35;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2014.04.12.20.41.26;	author brad;	state Exp;
branches;
next	1.28;

1.28
date	2013.11.07.00.30.07;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2013.04.11.17.58.42;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.09.09.32.03;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2012.10.22.20.18.44;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2012.08.26.07.16.54;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2012.07.06.12.51.11;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2012.05.28.18.44.26;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.04.23.13.47.08;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2011.11.16.13.33.15;	author phessler;	state Exp;
branches;
next	1.19;

1.19
date	2011.07.01.11.10.53;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.09.17.12.15.20;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.06.17.07.42.16;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2010.05.09.00.16.26;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.05.05.08.43.35;	author edd;	state Exp;
branches;
next	1.14;

1.14
date	2008.07.15.16.19.15;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2008.07.09.02.17.12;	author jakemsr;	state Exp;
branches;
next	1.12;

1.12
date	2008.06.09.22.55.43;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2008.03.02.02.27.04;	author jakemsr;	state Exp;
branches;
next	1.10;

1.10
date	2007.12.11.11.07.54;	author jakemsr;	state Exp;
branches;
next	1.9;

1.9
date	2007.06.18.23.14.20;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2007.06.05.01.53.04;	author jolan;	state Exp;
branches;
next	1.7;

1.7
date	2007.04.08.17.34.20;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.23.13.31.31;	author jolan;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2006.11.03.15.15.07;	author jolan;	state Exp;
branches;
next	1.4;

1.4
date	2006.03.20.05.53.18;	author jakemsr;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2005.12.22.03.45.36;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2005.07.31.19.07.11;	author jolan;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.20.03.28.27;	author naddy;	state Exp;
branches;
next	;

1.4.2.1
date	2007.06.26.19.26.04;	author sturm;	state Exp;
branches;
next	;

1.6.2.1
date	2007.06.26.19.19.33;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.33
log
@SECURITY update to vlc-2.2.6.

from Brad (maintainer) and a few tweaks by myself
@
text
@$OpenBSD: patch-configure_ac,v 1.32 2016/03/03 12:01:17 ajacoutot Exp $
Index: configure.ac
--- configure.ac.orig
+++ configure.ac
@@@@ -134,8 +134,6 @@@@ case "${host_os}" in
     ;;
   openbsd*)
     SYS=openbsd
-    CPPFLAGS="${CPPFLAGS} -I/usr/local/include -I/usr/X11R6/include"
-    LDFLAGS="${LDFLAGS} -L/usr/local/lib -L/usr/X11R6/lib/"
     ;;
   netbsd*)
     SYS=netbsd
@@@@ -952,35 +950,6 @@@@ AC_ARG_ENABLE(optimizations,
 dnl Check for various optimization flags
 AS_IF([test "${enable_optimizations}" != "no"], [
 
-  dnl -O4 and -O3 only in production builds
-  AS_IF([test "${enable_debug}" = "no"], [
-    VLC_SAVE_FLAGS
-    CFLAGS="${CFLAGS} -O4"
-    CXXFLAGS="${CXXFLAGS} -O4"
-    OBJCFLAGS="${OBJCFLAGS} -O4"
-    AC_CACHE_CHECK([if $CC accepts -O4], [ac_cv_c_o4], [
-      AC_COMPILE_IFELSE([AC_LANG_PROGRAM()], [
-        ac_cv_c_o4=yes
-      ], [
-        ac_cv_c_o4=no
-      ])
-    ])
-    AS_IF([test "${ac_cv_c_o4}" = "no"], [
-      VLC_RESTORE_FLAGS
-      CFLAGS="${CFLAGS} -O3"
-      CXXFLAGS="${CXXFLAGS} -O3"
-      OBJCFLAGS="${OBJCFLAGS} -O3"
-      AC_CACHE_CHECK([if $CC accepts -O3],  [ac_cv_c_o3], [
-        AC_COMPILE_IFELSE([AC_LANG_PROGRAM()], [
-          ac_cv_c_o3=yes
-        ], [
-          ac_cv_c_o3=no
-        ])
-      ])
-      AS_IF([test "${ac_cv_c_o3}" = "no"], [VLC_RESTORE_FLAGS])
-    ])
-  ])
-
   dnl Check for fast maths
   RDC_PROG_CC_FFLAGS([no-math-errno unsafe-math-optimizations no-rounding-math no-signaling-nans cx-limited-range])
   AC_LANG_PUSH(C++)
@@@@ -1605,7 +1574,7 @@@@ AS_IF([test "${enable_live555}" != "no" -a -n "${CXX}"
     ], [
       AS_IF([test "${SYS}" != "os2"], [
         LIVE555_PREFIX=${LIVE555_PREFIX-"/usr"}
-        CPPFLAGS_live555="-I${LIVE555_PREFIX}/include/liveMedia -I${LIVE555_PREFIX}/include/groupsock -I${LIVE555_PREFIX}/include/BasicUsageEnvironment -I${LIVE555_PREFIX}/include/UsageEnvironment"
+        CPPFLAGS_live555="-I${LIVE555_PREFIX}/live/liveMedia/include -I${LIVE555_PREFIX}/live/groupsock/include -I${LIVE555_PREFIX}/live/BasicUsageEnvironment/include -I${LIVE555_PREFIX}/live/UsageEnvironment/include"
       ], [
         LIVE555_PREFIX=${LIVE555_PREFIX-"/usr/lib/live"}
         CPPFLAGS_live555="-I${LIVE555_PREFIX}/liveMedia/include -I${LIVE555_PREFIX}/groupsock/include -I${LIVE555_PREFIX}/BasicUsageEnvironment/include -I${LIVE555_PREFIX}/UsageEnvironment/include"
@@@@ -3730,47 +3699,18 @@@@ AC_ARG_ENABLE(qt, [
   ])
 ])
 AS_IF([test "${enable_qt}" != "no"], [
-  PKG_CHECK_MODULES([QT], [Qt5Core >= 5.1.0 Qt5Widgets Qt5Gui], [
-      PKG_CHECK_MODULES([QTX11], [Qt5X11Extras], [
-          VLC_ADD_LIBS([qt4],[${QTX11_LIBS}])
-          VLC_ADD_CXXFLAGS([qt4],[${QTX11_CFLAGS} -DQT5_HAS_X11])
-          PKG_CHECK_MODULES([XI], [xi], [
-            VLC_ADD_LIBS([qt4], [${XI_LIBS}])
-            VLC_ADD_CXXFLAGS([qt4], [${XI_CFLAGS} -DHAVE_XI])
-          ], [
-            PKG_CHECK_EXISTS([Qt5Gui >= 5.5], [
-              AC_MSG_ERROR([${XI_PKG_ERRORS}.])
-            ], [
-              AC_MSG_WARN([${XI_PKG_ERRORS}.])
-            ])
-          ])
-      ],[
-          AC_MSG_WARN([Not building Qt Interface with X11 helpers.])
-      ])
-
-      PKG_CHECK_EXISTS([Qt5Core >= 5.5.0 Qt5Core < 5.6.0], [
-        AC_MSG_ERROR(["You cannot build VLC with Qt-5.5.0. You need to backport I78ef29975181ee22429c9bd4b11d96d9e68b7a9c"])
-      ])
-
-      QT_PATH="$(eval $PKG_CONFIG --variable=exec_prefix Qt5Core)"
-      QT_HOST_PATH="$(eval $PKG_CONFIG --variable=host_bins Qt5Core)"
-      AC_PATH_PROGS(MOC, [moc-qt5 moc], moc, ["${QT_HOST_PATH}" "${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
-      AC_PATH_PROGS(RCC, [rcc-qt5 rcc], rcc, ["${QT_HOST_PATH}" "${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
-      AC_PATH_PROGS(UIC, [uic-qt5 uic], uic, ["${QT_HOST_PATH}" "${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
-    ], [
-      PKG_CHECK_MODULES([QT], [QtCore QtGui >= 4.6.0],, [
-        AS_IF([test -n "${enable_qt}"],[
-          AC_MSG_ERROR([${QT_PKG_ERRORS}.])
-        ],[
-          AC_MSG_WARN([${QT_PKG_ERRORS}.])
-        ])
-        enable_qt="no"
-      ])
-      QT_PATH="$(eval $PKG_CONFIG --variable=exec_prefix QtCore)"
-      AC_PATH_PROGS(MOC, [moc-qt4 moc], moc, ["${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
-      AC_PATH_PROG(RCC, rcc, rcc, [${QT_PATH}/bin ${CONTRIB_DIR}/bin])
-      AC_PATH_PROGS(UIC, [uic-qt4 uic], uic, ["${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
+  PKG_CHECK_MODULES([QT], [QtCore QtGui >= 4.6.0],, [
+    AS_IF([test -n "${enable_qt}"],[
+      AC_MSG_ERROR([${QT_PKG_ERRORS}.])
+    ],[
+      AC_MSG_WARN([${QT_PKG_ERRORS}.])
     ])
+    enable_qt="no"
+  ])
+  QT_PATH="$(eval $PKG_CONFIG --variable=exec_prefix QtCore)"
+  AC_PATH_PROGS(MOC, [moc-qt4 moc], moc, ["${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
+  AC_PATH_PROG(RCC, rcc, rcc, [${QT_PATH}/bin ${CONTRIB_DIR}/bin])
+  AC_PATH_PROGS(UIC, [uic-qt4 uic], uic, ["${QT_PATH}/bin" "${CONTRIB_DIR}/bin"])
 ])
 AS_IF([test "${enable_qt}" != "no"], [
   VLC_ADD_PLUGIN([qt4])
@


1.32
log
@Update to vlc-2.2.2.

from Brad (maintainer)
@
text
@d1 4
a4 3
$OpenBSD: patch-configure_ac,v 1.31 2015/05/24 07:16:31 ajacoutot Exp $
--- configure.ac.orig	Mon Jan 18 16:29:29 2016
+++ configure.ac	Wed Mar  2 19:49:15 2016
d14 1
a14 1
@@@@ -949,35 +947,6 @@@@ AC_ARG_ENABLE(optimizations,
d47 4
a50 4
   dnl Check for -ffast-math
   VLC_SAVE_FLAGS
   CFLAGS="${CFLAGS} -ffast-math"
@@@@ -1611,7 +1580,7 @@@@ AS_IF([test "${enable_live555}" != "no" -a -n "${CXX}"
d59 1
a59 1
@@@@ -3736,47 +3705,18 @@@@ AC_ARG_ENABLE(qt, [
@


1.31
log
@Update to vlc-2.2.1.

from brad (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.30 2014/04/28 17:35:35 brad Exp $
--- configure.ac.orig	Mon Apr 13 03:57:54 2015
+++ configure.ac	Wed May 20 20:59:34 2015
d58 1
a58 1
@@@@ -3709,32 +3678,18 @@@@ AC_ARG_ENABLE(qt, [
d66 10
d79 5
@


1.30
log
@Update VLC's avcodec plugin to use the avcodec_decode_audio4() API for decoding
audio.

ok ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.29 2014/04/12 20:41:26 brad Exp $
--- configure.ac.orig	Fri Feb 21 10:27:16 2014
+++ configure.ac	Thu Apr 24 21:18:27 2014
@@@@ -122,10 +122,6 @@@@ case "${host_os}" in
d8 2
a9 4
-    CPPFLAGS_save="${CPPFLAGS_save} -I/usr/local/include -I/usr/X11R6/include"
-    CPPFLAGS="${CPPFLAGS_save}"
-    LDFLAGS_save="${LDFLAGS_save} -L/usr/local/lib -L/usr/X11R6/lib/"
-    LDFLAGS="${LDFLAGS_save}"
d13 2
a14 1
@@@@ -961,33 +957,6 @@@@ dnl Check for various optimization flags
a16 1
   C_O=""
d18 5
a22 1
-  AS_IF([test "{enable_debug}" = "no"], [
a23 1
-      CFLAGS="${CFLAGS_save} -O4"
d30 5
a34 3
-    AS_IF([test "${ac_cv_c_o4}" != "no"], [
-      C_O="-O4"
-    ], [
a35 1
-        CFLAGS="${CFLAGS_save} -O3"
d42 1
a42 3
-      AS_IF([test "${ac_cv_c_o3}" != "no"], [
-        C_O="-O3"
-      ])
d46 13
a58 11
   VLC_RESTORE_FLAGS
   CFLAGS="${CFLAGS} ${C_O}"
   CXXFLAGS="${CXXFLAGS} ${C_O}"
@@@@ -1733,7 +1702,7 @@@@ AS_IF([test "${enable_live555}" != "no" -a -n "${CXX}"
   AC_LANG_PUSH(C++)
   CPPFLAGS_save="${CPPFLAGS}"
   AS_IF([test -z "${CONTRIB_DIR}"], [
-    CPPFLAGS_live555="-I/usr/include/liveMedia -I/usr/include/groupsock -I/usr/include/BasicUsageEnvironment -I/usr/include/UsageEnvironment"
+    CPPFLAGS_live555="-I${LOCALBASE}/live/liveMedia/include -I${LOCALBASE}/live/groupsock/include -I${LOCALBASE}/live/BasicUsageEnvironment/include -I${LOCALBASE}/live/UsageEnvironment/include"
   ], [
     CPPFLAGS_live555="-I${CONTRIB_DIR}/include/liveMedia -I${CONTRIB_DIR}/include/groupsock -I${CONTRIB_DIR}/include/BasicUsageEnvironment -I${CONTRIB_DIR}/include/UsageEnvironment"
a59 22
@@@@ -2412,16 +2381,13 @@@@ dnl
 AC_ARG_ENABLE(avcodec,
 [  --enable-avcodec        libavcodec codec (default enabled)])
 AS_IF([test "${enable_avcodec}" != "no"], [
-  PKG_CHECK_MODULES(AVCODEC,[libavcodec >= 52.25.0 libavutil], [
-    PKG_CHECK_EXISTS([libavcodec < 55],, [
-      AC_MSG_ERROR([libavcodec versions 55 and later are not supported yet.])
-    ])
+  PKG_CHECK_MODULES(AVCODEC,[libavcodec >= 53.34.0 libavutil >= 51.22.0], [
+    dnl PKG_CHECK_EXISTS([libavcodec < 56],, [
+    dnl   AC_MSG_ERROR([libavcodec versions 56 and later are not supported yet.])
+    dnl ])
     VLC_SAVE_FLAGS
     CPPFLAGS="${CPPFLAGS} ${AVCODEC_CFLAGS}"
     CFLAGS="${CFLAGS} ${AVCODEC_CFLAGS}"
-    LIBS="${LIBS} ${AVCODEC_LIBS}"
-    AC_CHECK_LIB(avutil, av_sample_fmt_is_planar,
-        AC_DEFINE([HAVE_AVUTIL_PLANAR], [1], [Define if libav* use planar audio formats]))
     AC_CHECK_HEADERS(libavcodec/avcodec.h)
     AC_CHECK_HEADERS(libavutil/avutil.h)
     VLC_ADD_PLUGIN([avcodec])
@@@@ -2536,12 +2502,13 @@@@ AC_ARG_ENABLE(avformat,
d61 38
a98 14
 if test "${enable_avformat}" != "no"
 then
-  PKG_CHECK_MODULES(AVFORMAT,[libavformat > 52.30.0 libavcodec libavutil],
+  PKG_CHECK_MODULES(AVFORMAT,[libavformat > 53.21.0 libavcodec libavutil],
     [
       VLC_SAVE_FLAGS
       CPPFLAGS="${CPPFLAGS} ${AVFORMAT_CFLAGS}"
       CFLAGS="${CFLAGS} ${AVFORMAT_CFLAGS}"
       AC_CHECK_HEADERS(libavformat/avformat.h libavformat/avio.h)
+      AC_CHECK_HEADERS(libavcodec/avcodec.h)
       AC_CHECK_HEADERS(libavutil/avutil.h)
       AS_IF([test "$enable_merge_ffmpeg" = "no"], [
         VLC_ADD_PLUGIN([avformat access_avio])
@@@@ -3516,6 +3483,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
d100 2
a101 23
 AC_SUBST(OSS_LIBS)
 AM_CONDITIONAL([HAVE_OSS], [test "${have_oss}" = "yes"])
+
+dnl
+dnl  OpenBSD sndio module
+dnl
+AC_ARG_ENABLE([sndio],
+  [AS_HELP_STRING([--disable-sndio],
+    [support the OpenBSD sndio (default auto)])],, [
+  AS_IF([test "$SYS" = "opensd"], [
+    enable_sndio="yes"
+  ])
+])
+have_sndio="no"
+AS_IF([test "$enable_sndio" != "no"], [
+  AC_CHECK_HEADER([sndio.h], [
+    have_sndio="yes"
+  ])
+])
+AM_CONDITIONAL([HAVE_SNDIO], [test "${have_sndio}" = "yes"])
 
 dnl
 dnl  Portaudio module
@


1.29
log
@Pull some bits from 2.1 to deal with newer FFmpeg API.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.28 2013/11/07 00:30:07 brad Exp $
d3 1
a3 1
+++ configure.ac	Thu Apr 10 22:21:58 2014
d58 1
a58 1
@@@@ -2412,10 +2381,10 @@@@ dnl
d73 7
a79 1
@@@@ -2536,12 +2505,13 @@@@ AC_ARG_ENABLE(avformat,
d94 1
a94 1
@@@@ -3516,6 +3486,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.28
log
@Update to VLC 2.0.9.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.27 2013/04/11 17:58:42 brad Exp $
--- configure.ac.orig	Mon Oct 14 12:46:55 2013
+++ configure.ac	Sat Oct 26 21:43:55 2013
d58 31
a88 1
@@@@ -3516,6 +3485,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.27
log
@Update to VLC 2.0.6.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.26 2013/03/09 09:32:03 brad Exp $
--- configure.ac.orig	Sun Apr  7 14:42:04 2013
+++ configure.ac	Mon Apr  8 12:00:21 2013
d15 1
a15 1
@@@@ -964,33 +960,6 @@@@ dnl Check for various optimization flags
d49 1
a49 1
@@@@ -1736,7 +1705,7 @@@@ AS_IF([test "${enable_live555}" != "no" -a -n "${CXX}"
d58 1
a58 1
@@@@ -3519,6 +3488,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.26
log
@Sync up the FFmpeg backend with upstream to bring in some
bug fixes.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.25 2012/10/22 20:18:44 brad Exp $
--- configure.ac.orig	Mon Oct 22 05:03:51 2012
+++ configure.ac	Fri Mar  8 19:45:35 2013
d58 1
a58 47
@@@@ -2415,23 +2384,28 @@@@ dnl
 AC_ARG_ENABLE(avcodec,
 [  --enable-avcodec        libavcodec codec (default enabled)])
 AS_IF([test "${enable_avcodec}" != "no"], [
-  PKG_CHECK_MODULES(AVCODEC,[libavcodec >= 52.25.0 libavutil],
-    [
-      VLC_SAVE_FLAGS
-      CPPFLAGS="${CPPFLAGS} ${AVCODEC_CFLAGS}"
-      CFLAGS="${CFLAGS} ${AVCODEC_CFLAGS}"
-      AC_CHECK_HEADERS(libavcodec/avcodec.h)
-      AC_CHECK_HEADERS(libavutil/avutil.h)
-      VLC_ADD_PLUGIN([avcodec])
-      VLC_ADD_LIBS([avcodec],[$AVCODEC_LIBS])
-      AS_IF([test "${ac_cv_ld_bsymbolic}" != "no"], [
-        VLC_ADD_LIBS([avcodec],[-Wl,-Bsymbolic])
-      ])
-      VLC_ADD_CFLAGS([avcodec],[$AVCODEC_CFLAGS])
-      VLC_RESTORE_FLAGS
-      have_avcodec="yes"
-    ],[
-      AC_MSG_ERROR([${AVCODEC_PKG_ERRORS}. Pass --disable-avcodec to ignore this error.])
+  PKG_CHECK_MODULES(AVCODEC,[libavcodec >= 52.25.0 libavutil], [
+    PKG_CHECK_EXISTS([libavcodec < 55],, [
+      AC_MSG_ERROR([libavcodec versions 55 and later are not supported yet.])
+    ])
+    VLC_SAVE_FLAGS
+    CPPFLAGS="${CPPFLAGS} ${AVCODEC_CFLAGS}"
+    CFLAGS="${CFLAGS} ${AVCODEC_CFLAGS}"
+    LIBS="${LIBS} ${AVCODEC_LIBS}"
+    AC_CHECK_LIB(avutil, av_sample_fmt_is_planar,
+        AC_DEFINE([HAVE_AVUTIL_PLANAR], [1], [Define if libav* use planar audio formats]))
+    AC_CHECK_HEADERS(libavcodec/avcodec.h)
+    AC_CHECK_HEADERS(libavutil/avutil.h)
+    VLC_ADD_PLUGIN([avcodec])
+    VLC_ADD_LIBS([avcodec],[$AVCODEC_LIBS])
+    AS_IF([test "${ac_cv_ld_bsymbolic}" != "no"], [
+      VLC_ADD_LIBS([avcodec],[-Wl,-Bsymbolic])
+    ])
+    VLC_ADD_CFLAGS([avcodec],[$AVCODEC_CFLAGS])
+    VLC_RESTORE_FLAGS
+    have_avcodec="yes"
+  ],[
+    AC_MSG_ERROR([${AVCODEC_PKG_ERRORS}. Pass --disable-avcodec to ignore this error.])
   ])
 ], [
   have_avcodec="no"
@@@@ -3514,6 +3488,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.25
log
@Update to VLC 2.0.4.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.24 2012/08/26 07:16:54 ajacoutot Exp $
--- configure.ac.orig	Sun Sep 30 11:02:22 2012
+++ configure.ac	Fri Oct 19 01:24:07 2012
d58 47
a104 1
@@@@ -3514,6 +3483,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.24
log
@Remove -pthread patching.

from Brad (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.23 2012/07/06 12:51:11 sthen Exp $
--- configure.ac.orig	Tue Jul  3 18:55:34 2012
+++ configure.ac	Thu Aug 16 14:24:29 2012
d58 1
a58 1
@@@@ -3509,6 +3478,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.23
log
@update to VLC 2.0.2, from Brad.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.22 2012/05/28 18:44:26 ajacoutot Exp $
--- configure.ac.orig	Mon Jun 25 10:46:34 2012
+++ configure.ac	Sat Jun 30 22:40:47 2012
d15 1
a15 22
@@@@ -688,6 +684,20 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
   dnl Check for pthreads - borrowed from XMMS
   THREAD_LIB=error
   if test "${THREAD_LIB}" = "error"; then
+    AC_MSG_CHECKING(for pthread_create in -pthread)
+    save_LDFLAGS="${LDFLAGS}"
+    LDFLAGS="${LDFLAGS} -pthread"
+    AC_LINK_IFELSE(
+      [AC_LANG_PROGRAM(
+        [[#include <pthread.h>
+        pthread_t thr;]],
+        [pthread_create(&thr, NULL, NULL, NULL);])],
+      [THREAD_LIB="-pthread"
+       AC_MSG_RESULT(yes)],
+       [AC_MSG_RESULT(no)])
+    LDFLAGS="${save_LDFLAGS}"
+fi
+  if test "${THREAD_LIB}" = "error"; then
     AC_CHECK_LIB(pthread,main,THREAD_LIB="-lpthread")
   fi
   if test "${THREAD_LIB}" = "error"; then
@@@@ -964,33 +974,6 @@@@ dnl Check for various optimization flags
d49 1
a49 1
@@@@ -1736,7 +1719,7 @@@@ AS_IF([test "${enable_live555}" != "no" -a -n "${CXX}"
d58 1
a58 1
@@@@ -3509,6 +3492,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.22
log
@Finally unbreak and enable RTP/RTSP support \o/

from Brad (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.21 2012/04/23 13:47:08 ajacoutot Exp $
--- configure.ac.orig	Thu Mar  8 07:18:41 2012
+++ configure.ac	Sun May 20 22:42:19 2012
d15 1
a15 1
@@@@ -687,6 +683,20 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
d36 1
a36 1
@@@@ -963,33 +973,6 @@@@ dnl Check for various optimization flags
d70 1
a70 1
@@@@ -1735,7 +1718,7 @@@@ AS_IF([test "${enable_live555}" != "no" -a -n "${CXX}"
d79 1
a79 1
@@@@ -3511,6 +3494,24 @@@@ AS_IF([test "$enable_oss" != "no"], [
@


1.21
log
@Major update to vlc-2.0.1.
More details at http://www.videolan.org/vlc/releases/2.0.1.html

tested on i386, amd64, sparc64
from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.20 2011/11/16 13:33:15 phessler Exp $
d3 1
a3 1
+++ configure.ac	Fri Mar 30 19:07:47 2012
d70 9
@


1.20
log
@Update to VLC 1.1.12

Most of the bits from Brad, a minor runtime fix by me.

Tested on amd64, i386, macppc

OK dhill@@, rpointel@@, sthen@@, jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.19 2011/07/01 11:10:53 sthen Exp $
--- configure.ac.orig	Thu Oct  6 14:02:25 2011
+++ configure.ac	Sun Nov 13 15:25:53 2011
@@@@ -184,20 +184,14 @@@@ case "${host_os}" in
d6 6
a11 18
   *bsd*)
     SYS="${host_os}"
-    CFLAGS_save="${CFLAGS_save} -pthread"; CFLAGS="${CFLAGS_save}"
     case "${host_os}" in
       freebsd*)
+        CFLAGS_save="${CFLAGS_save} -pthread"; CFLAGS="${CFLAGS_save}"
         CPPFLAGS_save="${CPPFLAGS_save} -I/usr/local/include"
         CPPFLAGS="${CPPFLAGS_save}"
         LDFLAGS_save="${LDFLAGS_save} -L/usr/local/lib"
         LDFLAGS="${LDFLAGS_save}"
         ;;
-      openbsd*)
-        CPPFLAGS_save="${CPPFLAGS_save} -I/usr/local/include -I/usr/X11R6/include"
-        CPPFLAGS="${CPPFLAGS_save}"
-        LDFLAGS_save="${LDFLAGS_save} -L/usr/local/lib -L/usr/X11R6/lib/"
-        LDFLAGS="${LDFLAGS_save}"
-        ;;
     esac
d13 18
a30 17
   darwin*)
@@@@ -785,6 +779,20 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
 dnl Check for pthreads - borrowed from XMMS
 THREAD_LIB=error
 if test "${THREAD_LIB}" = "error"; then
+  AC_MSG_CHECKING(for pthread_create in -pthread)
+  save_LDFLAGS="${LDFLAGS}"
+  LDFLAGS="${LDFLAGS} -pthread"
+  AC_LINK_IFELSE(
+    [AC_LANG_PROGRAM(
+      [[#include <pthread.h>
+      pthread_t thr;]],
+      [pthread_create(&thr, NULL, NULL, NULL);])],
+    [THREAD_LIB="-pthread"
+     AC_MSG_RESULT(yes)],
+     [AC_MSG_RESULT(no)])
+  LDFLAGS="${save_LDFLAGS}"
d32 6
a37 7
+if test "${THREAD_LIB}" = "error"; then
   AC_CHECK_LIB(pthread,main,THREAD_LIB="-lpthread")
 fi
 if test "${THREAD_LIB}" = "error"; then
@@@@ -1001,65 +1009,6 @@@@ CFLAGS="${CFLAGS_save}"
 RDC_PROG_CC_WFLAGS([all extra sign-compare undef pointer-arith bad-function-cast write-strings missing-prototypes volatile-register-var error-implicit-function-declaration])
 RDC_PROG_CC_FLAGS([-pipe])
d39 27
a65 18
-dnl Check for various optimization flags
-AC_CACHE_CHECK([if \$CC accepts -Os],
-    [ac_cv_c_os],
-    [CFLAGS="${CFLAGS_save} -Os"
-     AC_TRY_COMPILE([],,ac_cv_c_os=yes, ac_cv_c_os=no)])
-if test "${ac_cv_c_os}" != "no"; then
-    CFLAGS_OPTIM_SIZE="${CFLAGS_OPTIM_SIZE} -Os"
-else
-    AC_CACHE_CHECK([if \$CC accepts -O],
-        [ac_cv_c_o],
-        [CFLAGS="${CFLAGS_save} -O"
-         AC_TRY_COMPILE([],,ac_cv_c_o=yes, ac_cv_c_o=no)])
-    if test "${ac_cv_c_o}" != "no"; then
-        if test "${ac_cv_c_o3}" = "no"; then
-            CFLAGS_OPTIM_SIZE="${CFLAGS_OPTIM_SIZE} -O"
-        fi
-    fi
-fi
d67 28
a94 58
-AC_CACHE_CHECK([if \$CC accepts -O4],
-    [ac_cv_c_o4],
-    [CFLAGS="${CFLAGS_save} -O4"
-     AC_TRY_COMPILE([],,ac_cv_c_o4=yes, ac_cv_c_o4=no)])
-if test "${ac_cv_c_o4}" != "no" -a "x${enable_debug}" = "xno"; then
-    CFLAGS_OPTIM_SPEED="${CFLAGS_OPTIM_SPEED} -O4"
-else
-    AC_CACHE_CHECK([if \$CC accepts -O3],
-        [ac_cv_c_o3],
-        [CFLAGS="${CFLAGS_save} -O3"
-         AC_TRY_COMPILE([],,ac_cv_c_o3=yes, ac_cv_c_o3=no)])
-    if test "${ac_cv_c_o3}" != "no" -a "x${enable_debug}" = "xno"; then
-        CFLAGS_OPTIM_SPEED="${CFLAGS_OPTIM_SPEED} -O3"
-    else
-        AC_CACHE_CHECK([if \$CC accepts -O2],
-            [ac_cv_c_o2],
-            [CFLAGS="${CFLAGS_save} -O2"
-             AC_TRY_COMPILE([],,ac_cv_c_o2=yes, ac_cv_c_o2=no)])
-        if test "${ac_cv_c_o2}" != "no"; then
-            CFLAGS_OPTIM_SPEED="${CFLAGS_OPTIM_SPEED} -O2"
-        else
-            AC_CACHE_CHECK([if \$CC accepts -O],
-                [ac_cv_c_o],
-                [CFLAGS="${CFLAGS_save} -O"
-                 AC_TRY_COMPILE([],,ac_cv_c_o=yes, ac_cv_c_o=no)])
-            if test "${ac_cv_c_o}" != "no"; then
-                CFLAGS_OPTIM_SPEED="${CFLAGS_OPTIM_SPEED} -O"
-            fi
-        fi
-    fi
-fi
-
-AC_CACHE_CHECK([if \$CC accepts -O0],
-    [ac_cv_c_o0],
-    [CFLAGS="${CFLAGS_save} -O0"
-     AC_TRY_COMPILE([],,ac_cv_c_o0=yes, ac_cv_c_o0=no)])
-if test "${ac_cv_c_o0}" != "no"; then
-    CFLAGS_NOOPTIM="${CFLAGS_NOOPTIM} -O0"
-fi
-
 dnl Check for -ffast-math
 AC_CACHE_CHECK([if \$CC accepts -ffast-math],
     [ac_cv_c_fast_math],
@@@@ -3074,11 +3023,11 @@@@ AC_ARG_ENABLE(png,
   [  --enable-png            PNG support (default enabled)])
 if test "${enable_png}" != "no"; then
 AC_CHECK_HEADERS(png.h, [
-  LDFLAGS="${LDFLAGS_save} -lz"
+  LDFLAGS="${LDFLAGS_save} -lm -lz"
   AC_CHECK_LIB(png, png_set_rows, [
-    VLC_ADD_LIBS([png],[-lpng -lz])
+    VLC_ADD_LIBS([png],[-lpng -lm -lz])
     VLC_ADD_PLUGIN([png osdmenu osd_parser])],
-    [],[-lz])
+    [],[-lm -lz])
     LDFLAGS="${LDFLAGS_save}"
   ])
 fi
@


1.19
log
@replace -pthread patch with a proper one, clean up -pthread flag handling.
from Brad, ok dcoppa@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.18 2010/09/17 12:15:20 sthen Exp $
--- configure.ac.orig	Sun Apr 18 09:03:54 2010
+++ configure.ac	Thu Jun 30 20:32:15 2011
@@@@ -193,9 +193,9 @@@@ case "${host_os}" in
d15 12
a26 1
@@@@ -826,6 +826,20 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
d47 3
a49 21
@@@@ -872,13 +886,17 @@@@ AC_EGREP_HEADER(strncasecmp,strings.h,[
 
 dnl Check for headers
 AC_CHECK_HEADERS(getopt.h strings.h locale.h xlocale.h)
-AC_CHECK_HEADERS(fcntl.h sys/types.h sys/time.h sys/times.h sys/ioctl.h sys/stat.h sys/mount.h)
+AC_CHECK_HEADERS(fcntl.h sys/types.h sys/time.h sys/times.h sys/ioctl.h sys/stat.h)
 AC_CHECK_HEADERS([arpa/inet.h netinet/in.h netinet/udplite.h sys/eventfd.h])
 AC_CHECK_HEADERS([net/if.h], [], [],
   [
     #include <sys/types.h>
     #include <sys/socket.h>
   ])
+AC_CHECK_HEADERS([sys/mount.h], [], [],
+  [
+    #include <sys/param.h>
+  ])
 if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"; then
 AC_CHECK_HEADERS(machine/param.h sys/shm.h)
 AC_CHECK_HEADERS([linux/version.h linux/dccp.h])
@@@@ -2525,7 +2543,7 @@@@ then
   fi
d51 63
a113 7
   CPPFLAGS="${CPPFLAGS_save} ${CPPFLAGS_v4l2}"
-  AC_CHECK_HEADERS(linux/videodev2.h, [
+  AC_CHECK_HEADERS(linux/videodev2.h sys/videoio.h, [
     VLC_ADD_PLUGIN([v4l2])
   ],[])
   CPPFLAGS="${CPPFLAGS_save}"
@@@@ -3753,14 +3771,14 @@@@ AC_ARG_ENABLE(png,
d122 1
a122 4
     VLC_ADD_PLUGIN([png])
     VLC_ADD_PLUGIN([osdmenu])
     VLC_ADD_PLUGIN([osd_parser])
     AC_DEFINE(HAVE_LIBPNG, 1, [Define if you have the PNG library: libpng])],
a127 9
@@@@ -5746,7 +5764,7 @@@@ then
     PLUGINS_BINDINGS="${PLUGINS_BINDINGS} mozilla"
     VLC_ADD_CPPFLAGS([mozilla],[-DXPCOM_GLUE -DHAVE_CPP_MODERN_SPECIALIZE_TEMPLATE_SYNTAX -I${real_mozilla_sdk} -I${real_mozilla_sdk}/include -I${real_mozilla_sdk}/embedstring/include -I${real_mozilla_sdk}/xpcom/include -I${real_mozilla_sdk}/nspr/include -I${real_mozilla_sdk}/string/include -I${real_mozilla_sdk}/plugin/include -I${real_mozilla_sdk}/java/include])
     if ${need_xpcom_libs}; then
-       VLC_ADD_LIBS([mozilla],[-L${real_mozilla_sdk}/embedstring/bin -L${real_mozilla_sdk}/xpcom/bin -L${real_mozilla_sdk}/nspr/bin -L${real_mozilla_sdk}/string/bin -L${real_mozilla_sdk}/lib -lnspr4 -lplds4 -lplc4 -lxpcomglue])
+       VLC_ADD_LIBS([mozilla],[-L${real_mozilla_sdk}/embedstring/bin -L${real_mozilla_sdk}/xpcom/bin -L${real_mozilla_sdk}/nspr/bin -L${real_mozilla_sdk}/string/bin -L${real_mozilla_sdk}/lib -lnspr4 -lplds4 -lplc4 ${LOCALBASE}/xulrunner1.9/libxpcomglue.a -L${X11BASE}/lib -lXt -lX11 -lSM -lICE -lXpm])
       if test "${SYS}" = "mingw32"; then
         dnl latest gecko sdk does not have embedstring
         if test -d "${real_mozilla_sdk}/embedstring/bin"
@


1.18
log
@sundry cleanups;

from Brad (maintainer):
- Fix sys/mount.h detection so VCD/libcdio support can be enabled.
- bump AUTOCONF_VERSION to 2.64.
- some Makefile cleaning up.

from me, ok Brad:
- garbage-collect share/locale dir
- collect REVISIONs together
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.17 2010/06/17 07:42:16 dcoppa Exp $
d3 13
a15 2
+++ configure.ac	Fri Jul 30 22:43:56 2010
@@@@ -826,6 +826,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
d19 12
a30 1
+  AC_CHECK_LIB(pthread,main,THREAD_LIB="-pthread")
d36 1
a36 1
@@@@ -872,13 +875,17 @@@@ AC_EGREP_HEADER(strncasecmp,strings.h,[
d55 1
a55 1
@@@@ -2525,7 +2532,7 @@@@ then
d64 1
a64 1
@@@@ -3753,14 +3760,14 @@@@ AC_ARG_ENABLE(png,
d82 1
a82 1
@@@@ -5746,7 +5753,7 @@@@ then
@


1.17
log
@Disable inhibit and screensaver plugins since they cause problems
when the dbus daemon is running

Fix Help->About->Thanks dialog

Unbreak after xulrunner update (patches adapted from archlinux)

OK ajacoutot@@, landry@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.16 2010/05/09 00:16:26 sthen Exp $
--- configure.ac.orig	Sun Apr 18 15:03:54 2010
+++ configure.ac	Sun Jun 13 11:21:06 2010
d14 20
a33 1
@@@@ -2525,7 +2528,7 @@@@ then
d38 1
a38 1
+  AC_CHECK_HEADERS([linux/videodev2.h sys/videoio.h sys/videodev2.h], [
d42 1
a42 1
@@@@ -3753,14 +3756,14 @@@@ AC_ARG_ENABLE(png,
d60 1
a60 1
@@@@ -5746,7 +5749,7 @@@@ then
@


1.16
log
@Build v4l2 support, which can work with uvideo(4). From Brad.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.15 2010/05/05 08:43:35 edd Exp $
--- configure.ac.orig	Sun Apr 18 09:03:54 2010
+++ configure.ac	Wed May  5 18:37:05 2010
d41 9
@


1.15
log
@Update to vlc-1.0.6 from maintainer Brad Smith.
OK dcoppa@@, sthen@@.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.14 2008/07/15 16:19:15 brad Exp $
--- configure.ac.orig	Sun Jan 24 16:26:15 2010
+++ configure.ac	Sun Jan 31 22:17:13 2010
d14 9
@


1.14
log
@upgrade to VLC 0.8.6i; bug fixes and integrates the previous
security fix.

ok jakemsr@@
@
text
@d1 4
a4 22
$OpenBSD: patch-configure_ac,v 1.13 2008/07/09 02:17:12 jakemsr Exp $
--- configure.ac.orig	Tue Jul  8 16:59:22 2008
+++ configure.ac	Sun Jul 13 03:40:00 2008
@@@@ -199,7 +199,7 @@@@ case "${target_os}" in
     VLC_ADD_CFLAGS([libvlc],[-x objective-c])
     VLC_ADD_CFLAGS([vlc],[-x objective-c])
     ;;
-  *mingw32* | *cygwin* | *wince* | *mingwce* | *pe*)
+  *mingw32* | *cygwin* | *wince* | *mingwce*)
     AC_CHECK_TOOL(WINDRES, windres, :)
 
     case "${target_os}" in
@@@@ -215,7 +215,7 @@@@ case "${target_os}" in
              #endif],
             SYS=mingw32, SYS=cygwin)
         ;;
-      *wince* | *mingwce* | *pe*)
+      *wince* | *mingwce*)
         SYS=mingwce
         ;;
     esac
@@@@ -657,6 +657,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
d14 1
a14 27
@@@@ -2703,7 +2706,7 @@@@ dnl Look for a ffmpeg-config (we are on debian )
  else
 
 dnl Trying with pkg-config
-   PKG_CHECK_MODULES(FFMPEG,[libavcodec, libavformat],
+   PKG_CHECK_MODULES(FFMPEG,[libavcodec, libavformat, libpostproc],
     [
      CPPFLAGS="${CPPFLAGS} ${FFMPEG_CFLAGS}"
      CFLAGS="${CFLAGS} ${FFMPEG_CFLAGS}"
@@@@ -2769,16 +2772,6 @@@@ dnl Trying with pkg-config
  fi 
 fi
 
-dnl Check if we have (required) img_resample() in libavcodec
-if test "${enable_ffmpeg}" != "no"
-then
-     CFLAGS="${CFLAGS} ${CFLAGS_ffmpeg}"
-     LDFLAGS="${LDFLAGS} ${LDFLAGS_ffmpeg}"
-     AC_CHECK_LIB(avcodec, img_resample, ,
-       [AC_MSG_ERROR([Your FFmpeg library doesn't have the needed img_resample() function. You should rebuild it with software scaler disabled])], -lavutil)
-     VLC_RESTORE_FLAGS
-fi
-
 dnl Clean out environment
 LIBS="${LIBS_save}"
 
@@@@ -3381,13 +3374,13 @@@@ AC_ARG_ENABLE(png,
d19 1
a19 1
+  LDFLAGS="${LDFLAGS_save} -lz -lm"
d21 5
a25 4
-    VLC_ADD_LDFLAGS([png],[-lpng -lz])
+    VLC_ADD_LDFLAGS([png],[-lpng -lz -lm])
     VLC_ADD_PLUGINS([png])
     VLC_ADD_PLUGINS([osdmenu])
d28 2
a29 2
+    [],[-lz -lm])
   LDFLAGS="${LDFLAGS_save}"
@


1.13
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* remove bogus @@bin marker in PLIST (wxvlc is a symlink)
* bump PKGNAME-main
* img_convert()/img_resample() based filters disabled due to FFmpeg
  changes

feedback/ok brad@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.12 2008/06/09 22:55:43 sthen Exp $
--- configure.ac.orig	Mon Jun  2 13:35:52 2008
+++ configure.ac	Sun Jun 22 14:11:16 2008
a38 1
      VLC_SAVE_FLAGS
d40 2
a41 1
@@@@ -2770,16 +2773,6 @@@@ dnl Trying with pkg-config
a47 1
-     VLC_SAVE_FLAGS
d54 3
d58 1
a58 3
 dnl
 dnl  ffmpegaltivec plugin
@@@@ -3380,13 +3373,13 @@@@ AC_ARG_ENABLE(png,
@


1.12
log
@SECURITY update vlc to 0.8.6h

- fixes *many* null pointer deref, error handling failures, leaks,
use-after-free and double-free found by Coverity

- fixes some MPEG2 TS audio packet loss

- numerous security fixes in 0.8.6g

- fixes some memory leaks

Also: mark altivec FLAVOR as broken; ajacoutot reports that the
altivec-enabled binary fails to start.

ok ajacoutot
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.11 2008/03/02 02:27:04 jakemsr Exp $
--- configure.ac.orig	Mon Jun  2 14:35:52 2008
+++ configure.ac	Sat Jun  7 20:57:23 2008
d41 18
a58 1
@@@@ -3380,13 +3383,13 @@@@ AC_ARG_ENABLE(png,
@


1.11
log
@update to vlc-0.8.6e

This is a bugfix release. VLC media player 0.8.6d and earlier versions
suffer from security vulnerabilities in the Web interface, Subtitle
demuxer, Real RTSP demuxer, SDL_image library and MP4 demuxer.

See http://www.videolan.org/security/sa0801.php and
http://www.videolan.org/security/sa0802.php for more details.

from brad, OK naddy
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.10 2007/12/11 11:07:54 jakemsr Exp $
--- configure.ac.orig	Sun Feb 24 14:01:55 2008
+++ configure.ac	Thu Feb 28 11:22:52 2008
d32 1
a32 1
@@@@ -2694,7 +2697,7 @@@@ dnl Look for a ffmpeg-config (we are on debian )
d39 3
a41 3
      AC_CHECK_HEADERS(ffmpeg/avcodec.h, [], [AC_MSG_ERROR([Missing header file ffmpeg/avcodec.h.])] )
      AC_CHECK_HEADERS(ffmpeg/avformat.h)
@@@@ -3356,13 +3359,13 @@@@ AC_ARG_ENABLE(png,
@


1.10
log
@maintainence update to 0.8.6d

from brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.9 2007/06/18 23:14:20 ajacoutot Exp $
--- configure.ac.orig	Tue Nov 27 08:11:35 2007
+++ configure.ac	Sat Dec  1 22:31:03 2007
@@@@ -198,7 +198,7 @@@@ case "${target_os}" in
d13 1
a13 1
@@@@ -214,7 +214,7 @@@@ case "${target_os}" in
d22 1
a22 1
@@@@ -656,6 +656,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
d32 1
a32 1
@@@@ -2693,7 +2696,7 @@@@ dnl Look for a ffmpeg-config (we are on debian )
d41 1
a41 1
@@@@ -3355,13 +3358,13 @@@@ AC_ARG_ENABLE(png,
d52 1
a52 1
     AC_DEFINE(HAVE_LIBPNG, [], [Define if you have the PNG library: libpng])],
@


1.9
log
@- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA plugins
- remove bogus PLIST entry

from brad
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.8 2007/06/05 01:53:04 jolan Exp $
--- configure.ac.orig	Sat Jun 16 10:25:19 2007
+++ configure.ac	Mon Jun 18 17:34:39 2007
@@@@ -210,7 +210,7 @@@@ case "${target_os}" in
d13 1
a13 1
@@@@ -226,7 +226,7 @@@@ case "${target_os}" in
d22 1
a22 1
@@@@ -664,6 +664,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}" != "mingwce"
d32 1
a32 1
@@@@ -2695,7 +2698,7 @@@@ dnl Look for a ffmpeg-config (we are on debian )
d41 1
a41 1
@@@@ -3357,13 +3360,13 @@@@ AC_ARG_ENABLE(png,
@


1.8
log
@update to 0.8.6b, from brad
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.7 2007/04/08 17:34:20 ajacoutot Exp $
--- configure.ac.orig	Tue Apr 17 17:45:31 2007
+++ configure.ac	Fri May 11 23:51:38 2007
d32 1
a32 1
@@@@ -2675,7 +2678,7 @@@@ dnl Look for a ffmpeg-config (we are on debian )
d41 1
a41 1
@@@@ -3337,13 +3340,13 @@@@ AC_ARG_ENABLE(png,
@


1.7
log
@- enable x264 support
- add missing xenocara LIBS
- regen patches while here

"go for it" naddy@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.6 2006/12/23 13:31:31 jolan Exp $
--- configure.ac.orig	Sat Dec  9 02:32:53 2006
+++ configure.ac	Sun Apr  8 10:45:42 2007
d41 1
a41 1
@@@@ -3332,13 +3335,13 @@@@ AC_ARG_ENABLE(png,
@


1.6
log
@update to 0.8.6
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.5 2006/11/03 15:15:07 jolan Exp $
--- configure.ac.orig	Fri Dec  8 19:32:53 2006
+++ configure.ac	Sat Dec 23 05:28:10 2006
d22 1
a22 1
@@@@ -664,6 +664,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}
d32 1
a32 1
@@@@ -2675,7 +2678,7 @@@@ dnl Look for a ffmpeg-config (we are on 
@


1.6.2.1
log
@MFC:
- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA
plugins
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.6 2006/12/23 13:31:31 jolan Exp $
--- configure.ac.orig	Sat Jun 16 16:25:19 2007
+++ configure.ac	Tue Jun 26 20:59:29 2007
d32 1
a32 1
@@@@ -2695,7 +2698,7 @@@@ dnl Look for a ffmpeg-config (we are on 
d41 1
a41 1
@@@@ -3357,13 +3360,13 @@@@ AC_ARG_ENABLE(png,
@


1.5
log
@update to 0.8.5
@
text
@d1 22
a22 4
$OpenBSD: patch-configure_ac,v 1.4 2006/03/20 05:53:18 jakemsr Exp $
--- configure.ac.orig	Sat May  6 10:52:25 2006
+++ configure.ac	Fri Oct 20 14:32:54 2006
@@@@ -648,6 +648,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}
d32 1
a32 1
@@@@ -2589,7 +2592,7 @@@@ dnl Look for a ffmpeg-config (we are on 
d39 1
a39 1
      AC_CHECK_HEADERS(ffmpeg/avcodec.h)
d41 1
a41 1
@@@@ -3236,13 +3239,13 @@@@ AC_ARG_ENABLE(png,
@


1.4
log
@- accomodate for libavcodec changes
- bump PKGNAME

OK brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.3 2005/12/22 03:45:36 jolan Exp $
--- configure.ac.orig	Sun Dec 11 13:36:29 2005
+++ configure.ac	Sat Feb  4 22:01:44 2006
@@@@ -565,6 +565,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}
d14 2
a15 2
@@@@ -2213,7 +2216,7 @@@@ dnl Those options have to be here becaus
 	fi])
d22 2
a23 2
      AC_CHECK_HEADERS(postproc/postprocess.h)
@@@@ -2853,13 +2856,13 @@@@ AC_ARG_ENABLE(png,
@


1.4.2.1
log
@MFC:
- SECURITY update to 0.8.6c (and various bugfixes, memory leaks)
VideoLAN-SA-0702: format string injection in Vorbis, Theora, SAP and CDDA
plugins
@
text
@d1 4
a4 22
$OpenBSD: patch-configure_ac,v 1.9 2007/06/18 23:14:20 ajacoutot Exp $
--- configure.ac.orig	Sat Jun 16 16:25:19 2007
+++ configure.ac	Tue Jun 26 20:54:53 2007
@@@@ -210,7 +210,7 @@@@ case "${target_os}" in
     VLC_ADD_CFLAGS([libvlc],[-x objective-c])
     VLC_ADD_CFLAGS([vlc],[-x objective-c])
     ;;
-  *mingw32* | *cygwin* | *wince* | *mingwce* | *pe*)
+  *mingw32* | *cygwin* | *wince* | *mingwce*)
     AC_CHECK_TOOL(WINDRES, windres, :)
 
     case "${target_os}" in
@@@@ -226,7 +226,7 @@@@ case "${target_os}" in
              #endif],
             SYS=mingw32, SYS=cygwin)
         ;;
-      *wince* | *mingwce* | *pe*)
+      *wince* | *mingwce*)
         SYS=mingwce
         ;;
     esac
@@@@ -664,6 +664,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}
d14 2
a15 2
@@@@ -2695,7 +2698,7 @@@@ dnl Look for a ffmpeg-config (we are on 
  else
d21 3
a23 3
      AC_CHECK_HEADERS(ffmpeg/avcodec.h, [], [AC_MSG_ERROR([Missing header file ffmpeg/avcodec.h.])] )
      AC_CHECK_HEADERS(ffmpeg/avformat.h)
@@@@ -3357,13 +3360,13 @@@@ AC_ARG_ENABLE(png,
@


1.3
log
@update to 0.8.4a
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_ac,v 1.2 2005/07/31 19:07:11 jolan Exp $
--- configure.ac.orig	Sun Dec 11 15:36:29 2005
+++ configure.ac	Tue Dec 13 20:24:38 2005
d14 26
@


1.2
log
@update to 0.8.2

main diff from jsg@@ with some tweaks from me
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.1 2005/02/20 03:28:27 naddy Exp $
--- configure.ac.orig	Sat Jun 25 23:43:16 2005
+++ configure.ac	Sun Jul 10 11:29:35 2005
@@@@ -543,6 +543,9 @@@@ if test "${SYS}" != "mingw32" -a "${SYS}
@


1.1
log
@* Fix build after removal of inter-library dependencies from ffmpeg.
* Use -pthread instead of -lpthread in configure.
* Fix a few pointer to int casts.

From: Jacob Meuser <jakemsr@@jakemsr.com>
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.ac.orig	Mon Feb 14 17:17:36 2005
+++ configure.ac	Mon Feb 14 17:17:53 2005
@@@@ -526,6 +526,9 @@@@ if test "${SYS}" != "mingw32"; then
@

