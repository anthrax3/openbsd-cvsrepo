head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.8
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.6
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2015.12.22.06.46.54;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	peJnOG67nOjChy7m;

1.4
date	2013.04.11.17.58.42;	author brad;	state dead;
branches;
next	1.3;

1.3
date	2013.01.03.03.07.29;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2011.11.16.13.33.15;	author phessler;	state dead;
branches;
next	1.1;

1.1
date	2010.05.05.08.43.35;	author edd;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Only use __builtin_parity on x86; should unbreak alpha, powerpc, sparc64.

from Brad (maintainer)
@
text
@$OpenBSD$
--- include/vlc_common.h.orig	Mon Dec 21 20:46:19 2015
+++ include/vlc_common.h	Mon Dec 21 20:51:06 2015
@@@@ -561,7 +561,7 @@@@ static inline unsigned popcount (unsigned x)
 VLC_USED
 static inline unsigned parity (unsigned x)
 {
-#if VLC_GCC_VERSION(3,4)
+#if VLC_GCC_VERSION(3,4) && (defined(__amd64__) || defined(__i386__))
     return __builtin_parity (x);
 #else
     for (unsigned i = 4 * sizeof (x); i > 0; i /= 2)
@


1.4
log
@Update to VLC 2.0.6.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-include_vlc_common_h,v 1.3 2013/01/03 03:07:29 brad Exp $
--- include/vlc_common.h.orig	Mon Dec 31 21:37:48 2012
+++ include/vlc_common.h	Mon Dec 31 21:39:40 2012
@@@@ -659,7 +659,7 @@@@ static inline uint16_t bswap16 (uint16_t x)
d6 1
a6 1
 static inline uint32_t bswap32 (uint32_t x)
d8 3
a10 3
-#if VLC_GCC_VERSION(4,3)
+#if VLC_GCC_VERSION(4,3) || defined(__clang__)
     return __builtin_bswap32 (x);
d12 1
a12 10
     return ((x & 0x000000FF) << 24)
@@@@ -673,7 +673,7 @@@@ static inline uint32_t bswap32 (uint32_t x)
 VLC_USED
 static inline uint64_t bswap64 (uint64_t x)
 {
-#if VLC_GCC_VERSION(4,3)
+#if VLC_GCC_VERSION(4,3) || defined(__clang__)
     return __builtin_bswap64 (x);
 #elif !defined (__cplusplus)
     return ((x & 0x00000000000000FF) << 56)
@


1.3
log
@Switch back to using LLVM on i386.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Update to VLC 1.1.12

Most of the bits from Brad, a minor runtime fix by me.

Tested on amd64, i386, macppc

OK dhill@@, rpointel@@, sthen@@, jasper@@
@
text
@d1 10
a10 13
$OpenBSD: patch-include_vlc_common_h,v 1.1 2010/05/05 08:43:35 edd Exp $
--- include/vlc_common.h.orig	Fri Apr 30 15:50:36 2010
+++ include/vlc_common.h	Fri Apr 30 15:52:16 2010
@@@@ -79,7 +79,11 @@@@
 #   else
 #     define LIBVLC_FORMAT(x,y) __attribute__ ((format(printf,x,y)))
 #   endif
-#   define LIBVLC_USED __attribute__ ((warn_unused_result))
+#   if __GNUC__ > 3 || (__GNUC__ == 3 && (__GNUC_MINOR__ >= 4))
+#     define LIBVLC_USED __attribute__ ((warn_unused_result))
+#   else
+#     define LIBVLC_USED
+#   endif
d12 10
a21 2
 #   define LIBVLC_FORMAT(x,y)
 #   define LIBVLC_USED
@


1.1
log
@Update to vlc-1.0.6 from maintainer Brad Smith.
OK dcoppa@@, sthen@@.
@
text
@d1 1
a1 1
$OpenBSD$
@

