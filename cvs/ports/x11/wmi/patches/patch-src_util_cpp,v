head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.8
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.2
date	2015.03.21.19.47.36;	author jca;	state Exp;
branches;
next	1.1;
commitid	9rnYYfdlhwk2h631;

1.1
date	2015.03.21.19.43.35;	author jca;	state Exp;
branches;
next	;
commitid	krtU8s3C8mSwc2EX;


desc
@@


1.2
log
@Add comments to new patches.
@
text
@$OpenBSD: patch-src_util_cpp,v 1.1 2015/03/21 19:43:35 jca Exp $

find_first_of returns npos, which is a size_t.

--- src/util.cpp.orig	Mon Sep 27 20:22:51 2004
+++ src/util.cpp	Tue Feb 24 02:28:48 2015
@@@@ -10,6 +10,7 @@@@ extern "C" {
 
 #include <sstream>
 #include <iostream>
+#include <cstddef>
 
 #include "util.h"
 
@@@@ -59,7 +60,7 @@@@ string Util::truncate(string str, char c) {
 
 string Util::canonicalDir(string path) {
     string dir = canonicalPath(path);
-    unsigned int pos = 0;
+    size_t pos = 0;
 
     pos = dir.find_last_of('/');
     if (pos != string::npos) {
@@@@ -123,7 +124,7 @@@@ string Util::encodeEscapes(string str) {
 string Util::lastToken(string str, char delim) {
 
     string result = "";
-    unsigned int pos = str.find_last_of(delim);
+    size_t pos = str.find_last_of(delim);
 
     if (pos != string::npos) {
         result = str.substr(pos + 1, str.length() - pos);
@@@@ -381,7 +382,7 @@@@ string Util::shortenString(string str, unsigned int n)
 
 set<string> Util::stringSplit(string s, string delimiter){
     set<string> res;
-    unsigned int pos = 0;
+    size_t pos = 0;
     while (pos != string::npos){
         pos = s.find_first_of(delimiter);
         res.insert(s.substr(0, pos));
@


1.1
log
@Unbreak wmi and cleanup the port while here.

- fix buffer overrun
- fix infinite loop on LP64 archs
- update MASTER_SITES
- remove HOMEPAGE, the project is abandoned
- remove unresponsive MAINTAINER
- sync WANTLIB
@
text
@d1 4
a4 1
$OpenBSD$
@

