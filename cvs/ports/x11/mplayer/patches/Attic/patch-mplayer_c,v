head	1.12;
access;
symbols
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_6:1.8.0.8
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.2
	OPENBSD_3_7_BASE:1.1;
locks; strict;
comment	@# @;


1.12
date	2011.07.10.13.31.55;	author jasper;	state dead;
branches;
next	1.11;

1.11
date	2011.03.29.20.04.41;	author edd;	state Exp;
branches;
next	1.10;

1.10
date	2010.11.08.21.25.44;	author edd;	state Exp;
branches;
next	1.9;

1.9
date	2009.10.11.13.36.23;	author edd;	state dead;
branches;
next	1.8;

1.8
date	2008.02.08.17.32.42;	author jakemsr;	state Exp;
branches;
next	1.7;

1.7
date	2007.04.19.08.37.09;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2007.04.13.23.13.21;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2007.04.08.17.33.39;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2006.07.19.21.40.47;	author robert;	state Exp;
branches;
next	1.3;

1.3
date	2005.09.04.23.51.52;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.09.12.24.38;	author biorn;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.09.16.07.29;	author biorn;	state Exp;
branches;
next	;


desc
@@


1.12
log
@- remove unneeded NULL casts

from brad
maintainer timed-out
@
text
@$OpenBSD: patch-mplayer_c,v 1.11 2011/03/29 20:04:41 edd Exp $
--- mplayer.c.orig	Thu Mar  3 12:35:16 2011
+++ mplayer.c	Thu Mar  3 13:23:39 2011
@@@@ -815,7 +815,7 @@@@ static void exit_sighandler(int x){
           char spid[20];
           snprintf(spid, sizeof(spid), "%i", getppid());
           getch2_disable(); // allow terminal to work properly with gdb
-          if (execlp("gdb", "gdb", prog_path, spid, "-ex", "bt", NULL) == -1)
+          if (execlp("gdb", "gdb", prog_path, spid, "-ex", "bt", (char *) NULL) == -1)
             mp_msg(MSGT_CPLAYER, MSGL_ERR, "Couldn't start gdb\n");
         } else if (gdb_pid < 0)
           mp_msg(MSGT_CPLAYER, MSGL_ERR, "Couldn't fork\n");
@


1.11
log
@Update mplayer to a newer snapshot, this time with dynamic linking of ffmpeg!
With help from and OK landry@@, jakemsr@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mplayer_c,v 1.10 2010/11/08 21:25:44 edd Exp $
@


1.10
log
@Update to mplayer-20101024. Noteworthy improvements include vpx
(webm) support and alpha support. This work is a joint effort from
myself, naddy@@ and jakemsr@@. Cheers.

OK jakemsr@@
@
text
@d1 4
a4 4
$OpenBSD$
--- mplayer.c.orig	Sun Oct 24 11:13:11 2010
+++ mplayer.c	Sun Oct 24 11:13:29 2010
@@@@ -852,7 +852,7 @@@@ static void exit_sighandler(int x){
@


1.9
log
@New version of mplayer based upon a snapshot (20090708).
  * fixes some flv playback
  * removed ggi output - broken i386/sparc64.
  * removed gui (deprecated) - use gnome-mplayer instead.
  * removed win32 codecs - opensource codecs are good quality.

OK, naddy@@, sthen@@
@
text
@d1 9
a9 9
$OpenBSD: patch-mplayer_c,v 1.8 2008/02/08 17:32:42 jakemsr Exp $
--- mplayer.c.orig	Sun Oct  7 12:49:33 2007
+++ mplayer.c	Sun Dec 16 21:06:56 2007
@@@@ -774,7 +774,7 @@@@ static void exit_sighandler(int x){
         gdb_pid = fork();
         mp_msg(MSGT_CPLAYER, MSGL_INFO, "Forked...\n");
         if (gdb_pid == 0) { // We are the child
-          if (execlp("gdb", "gdb", prog_path, spid, NULL) == -1)
+          if (execlp("gdb", "gdb", prog_path, spid, (char *)NULL) == -1)
d11 1
a11 1
         } else if (gdb_pid < 0) 
@


1.8
log
@
maintenence update to mplayer-1.0rc2

ok biorn@@ (MAINTAINER), ajacoutot@@, brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mplayer_c,v 1.7 2007/04/19 08:37:09 ajacoutot Exp $
@


1.7
log
@- add live555 support
- regen patches while here

from brad
ok robert@@
@
text
@d1 4
a4 4
$OpenBSD: patch-mplayer_c,v 1.6 2007/04/13 23:13:21 robert Exp $
--- mplayer.c.orig	Sun Jun 11 20:35:47 2006
+++ mplayer.c	Thu Apr 19 09:41:04 2007
@@@@ -614,7 +614,7 @@@@ static void exit_sighandler(int x){
a12 32
@@@@ -4527,7 +4527,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && dvd_nav_still)
 	{
 #ifdef USE_SUB
 	if (sh_video) {
-		mp_msg(MSGT_GLOBAL,MSGL_INFO, "ANS_SUB_VISIBILITY=%d\n", sub_visibility);
+		mp_msg(MSGT_GLOBAL,MSGL_INFO, "ANS_SUB_VISIBILITY=%d\n", (long)sub_visibility);
 	}
 #endif
 	} break;
@@@@ -4548,11 +4548,11 @@@@ if (stream->type==STREAMTYPE_DVDNAV && dvd_nav_still)
 
 	case MP_CMD_GET_VO_FULLSCREEN : {
 	if(video_out && vo_config_count)
-		mp_msg(MSGT_GLOBAL,MSGL_INFO, "ANS_VO_FULLSCREEN=%d\n", vo_fs);
+		mp_msg(MSGT_GLOBAL,MSGL_INFO, "ANS_VO_FULLSCREEN=%d\n", (long)vo_fs);
 	} break;
     
     case MP_CMD_GET_PERCENT_POS : {
-	mp_msg(MSGT_GLOBAL,MSGL_INFO, "ANS_PERCENT_POSITION=%d\n", demuxer_get_percent_pos(demuxer));
+	mp_msg(MSGT_GLOBAL,MSGL_INFO, "ANS_PERCENT_POSITION=%d\n", (long)demuxer_get_percent_pos(demuxer));
     } break;
     case MP_CMD_GET_TIME_POS : {
       float pos = 0;
@@@@ -4570,7 +4570,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && dvd_nav_still)
     case MP_CMD_RUN : {
 #ifndef __MINGW32__
         if(!fork()) {
-          execl("/bin/sh","sh","-c",cmd->args[0].v.s,NULL);
+          execl("/bin/sh","sh","-c",cmd->args[0].v.s,(char *)NULL);
           exit(0);
         }
 #endif
@


1.6
log
@- Fix heap overflow in DMO loader. (CVE-2007-1246)
- regen patches while here

pulled from MPlayer SVN by Brad <brad@@comstyle.com>
@
text
@d1 1
a1 1
$OpenBSD: patch-mplayer_c,v 1.5 2007/04/08 17:33:39 ajacoutot Exp $
d3 1
a3 1
+++ mplayer.c	Sat Apr 14 00:35:29 2007
d13 1
a13 1
@@@@ -4527,7 +4527,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
d22 1
a22 1
@@@@ -4548,11 +4548,11 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
d36 1
a36 1
@@@@ -4570,7 +4570,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
@


1.5
log
@- add support for x264
- regen patches while here

"go for it" naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mplayer_c,v 1.4 2006/07/19 21:40:47 robert Exp $
d3 1
a3 1
+++ mplayer.c	Sun Apr  8 10:17:02 2007
d13 1
a13 1
@@@@ -4527,7 +4527,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && dvd_nav_still)
d22 1
a22 1
@@@@ -4548,11 +4548,11 @@@@ if (stream->type==STREAMTYPE_DVDNAV && dvd_nav_still)
d36 1
a36 1
@@@@ -4570,7 +4570,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && dvd_nav_still)
@


1.4
log
@update to versio 1.0pre8; include the speex and mpcdec codecs by default;
this version of mplayer now uses gtk2;

ok biorn@@ and tested by many
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ mplayer.c	Thu Jul  6 00:08:12 2006
d13 1
a13 1
@@@@ -4527,7 +4527,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
d22 1
a22 1
@@@@ -4548,11 +4548,11 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
d36 1
a36 1
@@@@ -4570,7 +4570,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
@


1.3
log
@fix a few more obvious coredumps and bad dereferences.
@
text
@d1 4
a4 12
$OpenBSD: patch-mplayer_c,v 1.2 2005/05/09 12:24:38 biorn Exp $
--- mplayer.c.orig	Fri Apr 15 14:14:24 2005
+++ mplayer.c	Sat Sep  3 14:36:01 2005
@@@@ -184,6 +184,7 @@@@ static int max_framesize=0;
 #include "libmpcodecs/dec_video.h"
 #include "libmpcodecs/mp_image.h"
 #include "libmpcodecs/vf.h"
+#include "libmpcodecs/vd.h"
 
 extern void vf_list_plugins();
 
@@@@ -584,7 +585,7 @@@@ static void exit_sighandler(int x){
d13 1
a13 17
@@@@ -986,13 +987,13 @@@@ static void log_sub(){
     if (!f) return;
     fprintf(f, "----------------------------------------------------------\n");
     if (subdata->sub_uses_time) {
-	fprintf(f, "N: %s S: %02d:%02d:%02d.%02d E: %02d:%02d:%02d.%02d\n", filename, 
+	fprintf(f, "N: %s S: %02lu:%02lu:%02lu.%02lu E: %02lu:%02lu:%02lu.%02lu\n", filename, 
 		vo_sub_last->start/360000, (vo_sub_last->start/6000)%60,
 		(vo_sub_last->start/100)%60, vo_sub_last->start%100,
 		vo_sub_last->end/360000, (vo_sub_last->end/6000)%60,
 		(vo_sub_last->end/100)%60, vo_sub_last->end%100);
     } else {
-	fprintf(f, "N: %s S: %d E: %d\n", filename, vo_sub_last->start, vo_sub_last->end);
+	fprintf(f, "N: %s S: %lu E: %lu\n", filename, vo_sub_last->start, vo_sub_last->end);
     }
     for (i = 0; i < vo_sub_last->lines; i++) {
 	fprintf(f, "%s\n", vo_sub_last->text[i]);
@@@@ -3368,7 +3369,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
d17 2
a18 2
-		mp_msg(MSGT_GLOBAL,MSGL_INFO,MSGTR_AnsSubVisibility, sub_visibility);
+		mp_msg(MSGT_GLOBAL,MSGL_INFO,MSGTR_AnsSubVisibility, (long)sub_visibility);
d22 1
a22 1
@@@@ -3488,11 +3489,11 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
d26 2
a27 2
-		mp_msg(MSGT_GLOBAL,MSGL_INFO,MSGTR_AnsVoFullscreen, vo_fs);
+		mp_msg(MSGT_GLOBAL,MSGL_INFO,MSGTR_AnsVoFullscreen, (long)vo_fs);
d31 2
a32 2
-	mp_msg(MSGT_GLOBAL,MSGL_INFO,MSGTR_AnsPercentPos, demuxer_get_percent_pos(demuxer));
+	mp_msg(MSGT_GLOBAL,MSGL_INFO,MSGTR_AnsPercentPos, (long)demuxer_get_percent_pos(demuxer));
d34 3
a36 3
     case MP_CMD_SWITCH_AUDIO :
         demuxer_switch_audio(demuxer);
@@@@ -3500,7 +3501,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
@


1.2
log
@Update to 1.0pre7
Don't depend on ogg/vorbis as it's built in now
Put fontconfig and freetype in WANTLIB and BUILD_DEPEND on pkgconfig if
 FLAVOR is not no_x11.
@
text
@d1 1
a1 1
$OpenBSD: patch-mplayer_c,v 1.1 2005/03/09 16:07:29 biorn Exp $
d3 10
a12 2
+++ mplayer.c	Wed Apr 20 06:35:55 2005
@@@@ -584,7 +584,7 @@@@ static void exit_sighandler(int x){
d21 40
a60 1
@@@@ -3500,7 +3500,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
@


1.1
log
@
Finally take it to 1.0pre6a

Prodded by espi@@, ok sturm@@
@
text
@d1 4
a4 4
$OpenBSD$
--- mplayer.c.orig	Tue Dec 21 13:25:58 2004
+++ mplayer.c	Wed Mar  9 16:41:20 2005
@@@@ -574,7 +574,7 @@@@ static void exit_sighandler(int x){
d13 1
a13 10
@@@@ -998,7 +998,7 @@@@ int gui_no_filename=0;
   mp_msg(MSGT_CPLAYER,MSGL_INFO, "MPlayer " VERSION " (C) 2000-2004 MPlayer Team\n");
   /* Test for cpu capabilities (and corresponding OS support) for optimizing */
   GetCpuCaps(&gCpuCaps);
-#ifdef ARCH_X86
+#if defined (ARCH_X86) || defined (ARCH_X86_64)
   mp_msg(MSGT_CPLAYER,MSGL_INFO,"CPUflags:  MMX: %d MMX2: %d 3DNow: %d 3DNow2: %d SSE: %d SSE2: %d\n",
       gCpuCaps.hasMMX,gCpuCaps.hasMMX2,
       gCpuCaps.has3DNow, gCpuCaps.has3DNowExt,
@@@@ -3454,7 +3454,7 @@@@ if (stream->type==STREAMTYPE_DVDNAV && d
@

