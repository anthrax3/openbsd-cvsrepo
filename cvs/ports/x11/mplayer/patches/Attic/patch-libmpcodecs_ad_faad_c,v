head	1.7;
access;
symbols
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.0.4
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2011.06.27.23.29.20;	author edd;	state dead;
branches;
next	1.6;

1.6
date	2011.03.29.20.04.41;	author edd;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.08.21.25.44;	author edd;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.26.21.29.56;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2009.10.11.13.36.23;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2008.09.15.22.13.02;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2008.02.08.17.32.41;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Remove FAAC linkage due to license conflicts.
Remove a patch for FAAD which is already disabled.

From brad with a note in README from myself.

OK sthen@@
@
text
@$OpenBSD: patch-libmpcodecs_ad_faad_c,v 1.6 2011/03/29 20:04:41 edd Exp $
--- libmpcodecs/ad_faad.c.orig	Sat Jan  1 14:27:41 2011
+++ libmpcodecs/ad_faad.c	Mon Jan 31 14:18:31 2011
@@@@ -79,7 +79,7 @@@@ static int aac_probe(unsigned char *buffer, int len)
 
 static int init(sh_audio_t *sh)
 {
-  unsigned long faac_samplerate;
+  unsigned int faac_samplerate;
   unsigned char faac_channels;
   int faac_init, pos = 0;
   faac_hdec = faacDecOpen();
@@@@ -171,7 +171,7 @@@@ static int init(sh_audio_t *sh)
     return 0;
   } else {
     mp_msg(MSGT_DECAUDIO,MSGL_V,"FAAD: Decoder init done (%dBytes)!\n", sh->a_in_buffer_len); // XXX: remove or move to debug!
-    mp_msg(MSGT_DECAUDIO,MSGL_V,"FAAD: Negotiated samplerate: %ldHz  channels: %d\n", faac_samplerate, faac_channels);
+    mp_msg(MSGT_DECAUDIO,MSGL_V,"FAAD: Negotiated samplerate: %dHz  channels: %d\n", faac_samplerate, faac_channels);
     // 8 channels is aac channel order #7.
     sh->channels = faac_channels == 7 ? 8 : faac_channels;
     if (audio_output_channels <= 2) sh->channels = faac_channels > 1 ? 2 : 1;
@@@@ -301,7 +301,7 @@@@ static int decode_audio(sh_audio_t *sh,unsigned char *
     } else {
       /* XXX: samples already multiplied by channels! */
       mp_msg(MSGT_DECAUDIO,MSGL_DBG2,"FAAD: Successfully decoded frame (%ld Bytes)!\n",
-      sh->samplesize*faac_finfo.samples);
+      (long)sh->samplesize*faac_finfo.samples);
 
       if (sh->channels >= 5)
         reorder_channel_copy_nch(faac_sample_buffer,
@


1.6
log
@Update mplayer to a newer snapshot, this time with dynamic linking of ffmpeg!
With help from and OK landry@@, jakemsr@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libmpcodecs_ad_faad_c,v 1.5 2010/11/08 21:25:44 edd Exp $
@


1.5
log
@Update to mplayer-20101024. Noteworthy improvements include vpx
(webm) support and alpha support. This work is a joint effort from
myself, naddy@@ and jakemsr@@. Cheers.

OK jakemsr@@
@
text
@d1 4
a4 4
$OpenBSD: patch-libmpcodecs_ad_faad_c,v 1.4 2010/05/26 21:29:56 jakemsr Exp $
--- libmpcodecs/ad_faad.c.orig	Wed Sep  8 18:38:52 2010
+++ libmpcodecs/ad_faad.c	Sun Oct 24 10:39:37 2010
@@@@ -84,7 +84,7 @@@@ static int aac_probe(unsigned char *buffer, int len)
d13 1
a13 1
@@@@ -197,7 +197,7 @@@@ static int init(sh_audio_t *sh)
d22 1
a22 1
@@@@ -327,7 +327,7 @@@@ static int decode_audio(sh_audio_t *sh,unsigned char *
@


1.4
log
@update to mplayer-export-snapshot-20100308

locally:
* fix audio when using bsdbt848 video driver (problems noted by simon@@)
* allow 24-bit audio output formats in the sndio backend (from ratchov@@)

mostly from edd@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-libmpcodecs_ad_faad_c,v 1.3 2009/10/11 13:36:23 edd Exp $
--- libmpcodecs/ad_faad.c.orig	Wed Feb 17 21:36:00 2010
+++ libmpcodecs/ad_faad.c	Mon Mar  8 14:37:50 2010
@@@@ -83,7 +83,7 @@@@ static int aac_probe(unsigned char *buffer, int len)
d13 1
a13 1
@@@@ -164,7 +164,7 @@@@ static int init(sh_audio_t *sh)
d22 1
a22 1
@@@@ -293,7 +293,7 @@@@ static int decode_audio(sh_audio_t *sh,unsigned char *
@


1.3
log
@New version of mplayer based upon a snapshot (20090708).
  * fixes some flv playback
  * removed ggi output - broken i386/sparc64.
  * removed gui (deprecated) - use gnome-mplayer instead.
  * removed win32 codecs - opensource codecs are good quality.

OK, naddy@@, sthen@@
@
text
@d1 3
a3 3
$OpenBSD$
--- libmpcodecs/ad_faad.c.orig	Thu Jul 30 12:37:54 2009
+++ libmpcodecs/ad_faad.c	Thu Jul 30 12:42:42 2009
d13 1
a13 1
@@@@ -166,7 +166,7 @@@@ static int init(sh_audio_t *sh)
d19 2
a20 1
     sh->channels = faac_channels;
d22 1
a22 2
     sh->samplerate = faac_samplerate;
@@@@ -294,7 +294,7 @@@@ static int decode_audio(sh_audio_t *sh,unsigned char *
@


1.2
log
@
- simpler faad related patching
- in MESSAGE, end sentence with a period
- bump PKGNAME

ok brad@@
@
text
@d1 5
a5 5
$OpenBSD: patch-libmpcodecs_ad_faad_c,v 1.1 2008/02/08 17:32:41 jakemsr Exp $
--- libmpcodecs/ad_faad.c.orig	Sun Oct  7 12:49:25 2007
+++ libmpcodecs/ad_faad.c	Wed Jul 16 01:50:40 2008
@@@@ -66,7 +66,7 @@@@ static int aac_probe(unsigned char *buffer, int len)
 	
d13 1
a13 1
@@@@ -148,7 +148,7 @@@@ static int init(sh_audio_t *sh)
d22 1
a22 1
@@@@ -276,7 +276,7 @@@@ static int decode_audio(sh_audio_t *sh,unsigned char *
d28 3
a30 3
       memcpy(buf+len,faac_sample_buffer, sh->samplesize*faac_finfo.samples);
       last_dec_len = sh->samplesize*faac_finfo.samples;
       len += last_dec_len;
@


1.1
log
@
maintenence update to mplayer-1.0rc2

ok biorn@@ (MAINTAINER), ajacoutot@@, brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- libmpcodecs/ad_faad.c.orig	Mon Dec 17 19:39:01 2007
+++ libmpcodecs/ad_faad.c	Mon Dec 17 19:42:41 2007
@@@@ -66,8 +66,8 @@@@ static int aac_probe(unsigned char *buffer, int len)
d9 2
a10 3
-  unsigned char faac_channels;
+  uint32_t faac_samplerate;
+  uint8_t faac_channels;
a12 1
 
@

