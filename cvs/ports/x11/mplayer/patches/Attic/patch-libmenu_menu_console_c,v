head	1.4;
access;
symbols
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2011.07.10.13.31.55;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2010.11.08.21.25.44;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2003.11.02.23.30.27;	author brad;	state dead;
branches
	1.2.2.1;
next	1.1;

1.1
date	2003.03.02.21.22.22;	author pvalchev;	state Exp;
branches
	1.1.4.1;
next	;

1.1.4.1
date	2004.07.06.22.26.17;	author robert;	state Exp;
branches;
next	;

1.2.2.1
date	2004.07.04.12.15.58;	author robert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- remove unneeded NULL casts

from brad
maintainer timed-out
@
text
@$OpenBSD: patch-libmenu_menu_console_c,v 1.3 2010/11/08 21:25:44 edd Exp $
--- libmenu/menu_console.c.orig	Sun Oct 24 11:11:55 2010
+++ libmenu/menu_console.c	Sun Oct 24 11:12:56 2010
@@@@ -321,7 +321,7 @@@@ static int run_shell_cmd(menu_t* menu, char* cmd) {
     dup2(in[0],0);
     dup2(out[1],1);
     dup2(err[1],2);
-    execl("/bin/sh","sh","-c",cmd,(void*)NULL);
+    execl("/bin/sh","sh","-c",cmd,(char *) NULL);
     fprintf(errf,"exec failed : %s\n",strerror(errno));
     exit(1);
   }
@


1.3
log
@Update to mplayer-20101024. Noteworthy improvements include vpx
(webm) support and alpha support. This work is a joint effort from
myself, naddy@@ and jakemsr@@. Cheers.

OK jakemsr@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@upgrade to mplayer 1.0pre2

based on diff from MAINTAINER
@
text
@d1 4
a4 4
$OpenBSD: patch-libmenu_menu_console_c,v 1.1 2003/03/02 21:22:22 pvalchev Exp $
--- libmenu/menu_console.c.orig	Sun Mar  2 12:27:10 2003
+++ libmenu/menu_console.c	Sun Mar  2 12:27:22 2003
@@@@ -301,7 +301,7 @@@@ static int run_shell_cmd(menu_t* menu, c
d8 2
a9 2
-    execl("/bin/sh","sh","-c",cmd,NULL);
+    execl("/bin/sh","sh","-c",cmd,(void *)NULL);
@


1.2.2.1
log
@SECURITY:

Fix several vulnerabilities in MPlayer's GUI.
http://www.mplayerhq.hu/homepage/design7/news.html

ok brad@@
@
text
@d1 11
a11 5
$OpenBSD$
--- libmenu/menu_console.c.orig	Sat Sep 13 20:02:20 2003
+++ libmenu/menu_console.c	Sat Jul  3 05:30:36 2004
@@@@ -150,8 +150,10 @@@@
     return;
a12 10
   priv->lines[ll] = realloc(priv->lines[ll],strlen(priv->lines[ll]) + strlen(l) + 1);
-  strcat(priv->lines[ll],l);
-  
+  if ( priv->lines[ll] != NULL )
+  {
+    strcat(priv->lines[ll],l);
+  }
 }
 
 static void draw(menu_t* menu, mp_image_t* mpi) {
@


1.1
log
@cast NULL sentinel to void * to make sure it's 64-bit on 64-bit architectures
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.4.1
log
@SECURITY:

Fix several vulnerabilities in MPlayer's GUI.
http://www.mplayerhq.hu/homepage/design7/news.html

ok brad@@
@
text
@d2 3
a4 17
--- libmenu/menu_console.c.orig	Wed Nov 27 17:12:02 2002
+++ libmenu/menu_console.c	Sun Jul  4 14:31:31 2004
@@@@ -148,8 +148,11 @@@@
     return;
   }
   priv->lines[ll] = realloc(priv->lines[ll],strlen(priv->lines[ll]) + strlen(l) + 1);
-  strcat(priv->lines[ll],l);
-  
+
+  if ( priv->lines[ll] != NULL )
+  {
+      strcat(priv->lines[ll],l);
+  }
 }
 
 static void draw(menu_t* menu, mp_image_t* mpi) {
@@@@ -301,7 +304,7 @@@@
@


