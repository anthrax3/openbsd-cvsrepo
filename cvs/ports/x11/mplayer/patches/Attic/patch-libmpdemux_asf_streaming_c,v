head	1.1;
access;
symbols
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_4:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2003.11.08.00.23.06;	author margarida;	state dead;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2003.11.08.00.23.06;	author margarida;	state Exp;
branches;
next	;

1.1.4.1
date	2003.11.08.00.27.58;	author margarida;	state Exp;
branches;
next	;


desc
@@


1.1
log
@file patch-libmpdemux_asf_streaming_c was initially added on branch OPENBSD_3_4.
@
text
@@


1.1.4.1
log
@SECURITY fix:

A remotely exploitable buffer overflow vulnerability was found in MPlayer.
A malicious host can craft a harmful ASX header, and trick MPlayer into
executing arbitrary code upon parsing that header.
http://www.mplayerhq.hu/homepage/design6/news.html#vuln01
Bump package name.
@
text
@a0 17
$OpenBSD$
--- libmpdemux/asf_streaming.c.orig	Mon Jan  6 16:42:20 2003
+++ libmpdemux/asf_streaming.c	Fri Nov  7 01:26:38 2003
@@@@ -495,11 +495,11 @@@@ asf_http_request(streaming_ctrl_t *strea
 			return NULL;
 		}
 		http_set_uri( http_hdr, server_url->url );
-		sprintf( str, "Host: %s:%d", server_url->hostname, server_url->port );
+		sprintf( str, "Host: %.220s:%d", server_url->hostname, server_url->port );
 		url_free( server_url );
 	} else {
 		http_set_uri( http_hdr, url->file );
-		sprintf( str, "Host: %s:%d", url->hostname, url->port );
+		sprintf( str, "Host: %.220s:%d", url->hostname, url->port );
 	}
 	
 	http_set_field( http_hdr, str );
@


1.1.2.1
log
@SECURITY fix:

A remotely exploitable buffer overflow vulnerability was found in MPlayer.
A malicious host can craft a harmful ASX header, and trick MPlayer into
executing arbitrary code upon parsing that header.
http://www.mplayerhq.hu/homepage/design6/news.html#vuln01
Bump package name.

ok pvalchev@@, Bjorn Sandell (maintainer)
@
text
@a0 17
$OpenBSD$
--- libmpdemux/asf_streaming.c.orig	2003-11-06 17:01:54.000000000 -0500
+++ libmpdemux/asf_streaming.c	2003-11-06 17:05:00.000000000 -0500
@@@@ -495,11 +495,11 @@@@ asf_http_request(streaming_ctrl_t *strea
 			return NULL;
 		}
 		http_set_uri( http_hdr, server_url->url );
-		sprintf( str, "Host: %s:%d", server_url->hostname, server_url->port );
+		sprintf( str, "Host: %.220s:%d", server_url->hostname, server_url->port );
 		url_free( server_url );
 	} else {
 		http_set_uri( http_hdr, url->file );
-		sprintf( str, "Host: %s:%d", url->hostname, url->port );
+		sprintf( str, "Host: %.220s:%d", url->hostname, url->port );
 	}
 	
 	http_set_field( http_hdr, str );
@

