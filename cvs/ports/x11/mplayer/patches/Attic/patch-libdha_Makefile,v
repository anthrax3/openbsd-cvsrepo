head	1.14;
access;
symbols
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.10.0.4
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.10.0.2
	OPENBSD_3_3_BASE:1.10
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	biorn_20020508:1.1.1.1
	pvalchev:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2004.06.22.08.13.11;	author brad;	state dead;
branches;
next	1.13;

1.13
date	2004.05.01.18.43.43;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2003.12.16.17.17.33;	author biorn;	state Exp;
branches;
next	1.11;

1.11
date	2003.09.25.20.59.01;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2003.01.03.23.06.36;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2002.10.28.17.56.08;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2002.10.14.09.50.48;	author pvalchev;	state Exp;
branches;
next	1.7;

1.7
date	2002.08.18.11.26.48;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2002.06.27.22.03.49;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2002.05.15.22.27.01;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2002.05.14.03.05.31;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.12.08.16.24;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.09.20.22.53;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.09.05.19.10;	author pvalchev;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.05.09.05.19.10;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.14
log
@- disable the Vidix support
- instead of passing --target for powerpc just make the configure
script recognize macppc as another name for a powerpc system

ok MAINTAINER
@
text
@$OpenBSD: patch-libdha_Makefile,v 1.13 2004/05/01 18:43:43 sturm Exp $
--- libdha/Makefile.orig	2003-10-22 22:17:23.000000000 +0200
+++ libdha/Makefile	2004-05-01 19:19:39.000000000 +0200
@@@@ -53,8 +53,6 @@@@ ifeq ($(TARGET_MINGW32),yes)
 else
 	#$(CC) -shared $(SONAME_FLAGS) -o $(LIBNAME) $(OBJS) $(LIBS)
 	$(CC) -shared -Wl,-soname -Wl,$(LIBNAME) -o $(LIBNAME) $(OBJS) $(LIBS)
-	ln -sf $(LIBNAME) $(SHORTNAME)
-	ln -sf $(LIBNAME) $(VSHORTNAME)
 endif
 
 all:    $(LIBNAME) $(SHORTNAME)
@@@@ -80,10 +78,7 @@@@ depend: pci_names.c
 install:
 	mkdir -p $(prefix)/lib
 	install -m 755 -s -p $(LIBNAME) $(prefix)/lib/$(LIBNAME)
-	rm -f $(prefix)/lib/libdha.so
-	ln -sf $(LIBNAME) $(prefix)/lib/$(SHORTNAME)
 ifeq ($(TARGET_OS),OpenBSD)
-	ldconfig -R
 else
 	ldconfig
 endif
@


1.13
log
@don't run ldconfig when faking, noticed by systrace

ok maintainer biorn@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libdha_Makefile,v 1.12 2003/12/16 17:17:33 biorn Exp $
@


1.12
log
@Update to 1.0pre3
Ok espie@@ pvalchev@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libdha_Makefile,v 1.11 2003/09/25 20:59:01 sturm Exp $
d3 1
a3 1
+++ libdha/Makefile	2003-12-09 06:42:01.000000000 +0100
d13 1
a13 1
@@@@ -80,8 +78,6 @@@@ depend: pci_names.c
d20 1
a20 1
 	ldconfig -R
d22 2
@


1.11
log
@SECURITY UPDATE to 0.92

fixes a remotely exploitable buffer overflow in ASX headers that could
be used to make mplayer run arbitrary code

from maintainer Bjoern Sandell
@
text
@d1 5
a5 11
$OpenBSD: patch-libdha_Makefile,v 1.10 2003/01/03 23:06:36 brad Exp $
--- libdha/Makefile.orig	2003-06-02 00:30:36.000000000 +0200
+++ libdha/Makefile	2003-08-24 10:47:19.000000000 +0200
@@@@ -40,15 +40,13 @@@@ endif
 # .PHONY: all clean
 
 .c.o: pci_names.c
-	$(CC) -c $(CFLAGS) -o $@@ $<
+	PATH=/bin:/usr/bin $(CC) -c $(CFLAGS) -o $@@ $<
 
 $(LIBNAME):     $(OBJS)
d10 1
d12 2
a13 6
-all:    $(LIBNAME) $(SHORTNAME)
+all:    $(LIBNAME)
 
 pci_names.c:
 	$(AWK) -f pci_db2c.awk oth/pci.db
@@@@ -71,8 +69,6 @@@@ depend: pci_names.c
@


1.10
log
@upgrade to mplayer 0.90rc2
- with PLIST changes from me
--
From: MAINTAINER
@
text
@d1 4
a4 4
$OpenBSD: patch-libdha_Makefile,v 1.9 2002/10/28 17:56:08 espie Exp $
--- libdha/Makefile.orig	Sat Dec 21 12:49:52 2002
+++ libdha/Makefile	Sat Dec 28 21:23:01 2002
@@@@ -38,15 +38,13 @@@@ endif
d22 1
a22 1
@@@@ -69,8 +67,6 @@@@ depend: pci_names.c
@


1.9
log
@0.90pre9, update from Bjorn Sandell, and fix mplayer-fontmaker shadows.
@
text
@d1 4
a4 4
$OpenBSD: patch-libdha_Makefile,v 1.8 2002/10/14 09:50:48 pvalchev Exp $
--- libdha/Makefile.orig	Mon Oct 21 16:23:19 2002
+++ libdha/Makefile	Fri Oct 25 00:21:12 2002
@@@@ -33,15 +33,13 @@@@ endif
d7 1
a7 1
 .c.o:
d18 1
a18 1
+all:    $(LIBNAME) 
d22 1
a22 1
@@@@ -64,8 +62,6 @@@@ depend:
@


1.8
log
@Update to mplayer-0.90pre8; from biorn@@dce.chalmers.se
@
text
@d1 4
a4 4
$OpenBSD: patch-libdha_Makefile,v 1.7 2002/08/18 11:26:48 espie Exp $
--- libdha/Makefile.orig	Fri Aug 23 01:29:40 2002
+++ libdha/Makefile	Thu Sep  5 17:31:36 2002
@@@@ -27,13 +27,12 @@@@ endif
d12 1
d15 1
d18 1
a18 1
+all:    $(LIBNAME)
d22 1
a22 1
@@@@ -56,8 +55,6 @@@@ depend:
@


1.7
log
@Update to 0.90pre6, mostly from maintainer.
@
text
@d1 4
a4 19
$OpenBSD: patch-libdha_Makefile,v 1.6 2002/06/27 22:03:49 espie Exp $
--- libdha/Makefile.orig	Wed Jul  3 20:59:47 2002
+++ libdha/Makefile	Tue Aug  6 22:51:05 2002
@@@@ -7,9 +7,13 @@@@ VERSION = 0.1
 ifeq ($(TARGET_OS),CYGWIN)
 SHORTNAME = libdha.dll
 else
+ifeq ($(TARGET_OS),OpenBSD)
+SHORTNAME = libdha.so.0.1
+else
 SHORTNAME = libdha.so
 endif
-LIBNAME = libdha-$(VERSION).so
+endif
+LIBNAME = $(SHORTNAME)
 
 SRCS=libdha.c mtrr.c pci.c pci_names.c
 OBJS=$(SRCS:.c=.o)
@@@@ -27,13 +31,12 @@@@ endif
d12 1
a12 1
 	$(CC) -shared -o $(LIBNAME) $(OBJS) $(LIBS)
d20 1
a20 1
@@@@ -56,8 +59,8 @@@@ depend:
a25 2
+#	rm -f $(prefix)/lib/libdha.so
+#	ln -sf $(LIBNAME) $(prefix)/lib/$(SHORTNAME)
@


1.6
log
@Update to 0.90pre5
Most work by Biorn, some testing by pval and me.
@
text
@d1 3
a3 3
$OpenBSD: patch-libdha_Makefile,v 1.5 2002/05/15 22:27:01 pvalchev Exp $
--- libdha/Makefile.orig	Sat Jun  1 00:41:01 2002
+++ libdha/Makefile	Wed Jun 12 16:09:48 2002
d19 1
a19 11
@@@@ -17,21 +21,22 @@@@ OBJS=$(SRCS:.c=.o)
 CFLAGS  = $(OPTFLAGS) -fPIC -I. -I.. -Wall -W
 LIBS = 
 ifeq ($(TARGET_OS),OpenBSD)
+ifeq ($(TARGET_ARCH_X86),yes)
 LIBS += -li386
 endif
+endif
 
 .SUFFIXES: .c .o
 
d35 1
a35 1
@@@@ -54,8 +59,8 @@@@ depend:
@


1.5
log
@MPlayer-0.90pre4; from Björn Sandell <biorn@@dce.chalmers.se>
@
text
@d1 3
a3 3
$OpenBSD$
--- libdha/Makefile.orig	Sun May 12 04:18:50 2002
+++ libdha/Makefile	Wed May 15 00:45:06 2002
d44 2
a45 2
 	gzip -d -c oth/pci.db.gz >pci.db
@@@@ -55,8 +60,8 @@@@ depend:
@


1.4
log
@-li386 needed on x86 for win32 flavor; from biorn@@dce.chalmers.se
@
text
@d1 4
a4 4
$OpenBSD: patch-libdha_Makefile,v 1.3 2002/05/12 08:16:24 pvalchev Exp $
--- libdha/Makefile.orig	Sat Feb  2 13:14:56 2002
+++ libdha/Makefile	Mon May 13 19:29:51 2002
@@@@ -7,27 +7,36 @@@@ VERSION = 0.1
d19 1
a19 1
 
d21 2
a22 2
+LIBS = 
+ifeq ($(TARGET_OS),OpenBSD)
d24 2
a25 2
+LIBS += -li386
+endif
d37 1
a37 1
-	$(CC) -shared -o $(LIBNAME) $(OBJS)
a38 1
+	$(CC) -shared -o $(LIBNAME) $(OBJS) $(LIBS)
d45 2
a46 1
@@@@ -52,10 +61,12 @@@@ install:
d49 3
a51 2
 	rm -f $(prefix)/lib/libdha.so
-	ln -sf $(LIBNAME) $(prefix)/lib/libdha.so
d53 3
a55 10
+ifeq ($(TARGET_OS),OpenBSD)
+	ldconfig -R
+else
 	ldconfig
-
-#
+endif #
 # include dependency files if they exist
 #
 ifneq ($(wildcard .depend),)
@


1.3
log
@First cut at macppc support.  (Some things may not work yet)
@
text
@d1 3
a3 3
$OpenBSD: patch-libdha_Makefile,v 1.2 2002/05/09 20:22:53 pvalchev Exp $
--- libdha/Makefile.orig	Sat Feb  2 05:14:56 2002
+++ libdha/Makefile	Sun May 12 01:38:39 2002
d23 1
a23 1
+ifeq ($(TARGET_ARCH),i386)
@


1.2
log
@fix libdha generation; pointed out by wilfried
@
text
@d1 1
a1 1
$OpenBSD: patch-libdha_Makefile,v 1.1.1.1 2002/05/09 05:19:10 pvalchev Exp $
d3 2
a4 2
+++ libdha/Makefile	Thu May  9 14:16:45 2002
@@@@ -7,27 +7,34 @@@@ VERSION = 0.1
d23 1
d26 1
d46 1
a46 1
@@@@ -52,10 +59,12 @@@@ install:
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ libdha/Makefile	Wed May  8 19:34:06 2002
d49 1
a49 1
+	ln -sf $(LIBNAME) $(prefix)/lib/$(SHORTNAME)
@


1.1.1.1
log
@Import of mplayer-0.90pre3 - Movie Player

MPlayer is a movie player for LINUX (runs on many other Unices, and
non-x86 CPUs, see the documentation). It plays most MPEG, VOB, AVI,
VIVO, ASF/WMV, QT/MOV, FLI, NuppelVideo, yuv4mpeg, FILM, RoQ, and some
RealMedia files, supported by many native, XAnim, and Win32 DLL codecs.
You can watch VideoCD, SVCD, DVD, 3ivx, FLI, and even DivX movies too
(and you don't need the avifile library at all!).

Submitted by Björn Sandell <biorn@@dce.chalmers.se>, work also done by me

Withstanding issues: see how to deal with optimization detection at build
time so that binary packages can be created; check make it work on
platforms other than i386, etc. things can be done in-tree.
@
text
@@
