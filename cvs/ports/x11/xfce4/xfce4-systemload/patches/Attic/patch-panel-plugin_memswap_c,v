head	1.5;
access;
symbols
	OPENBSD_5_6:1.3.0.28
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.26
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.24
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.22
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.20
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.18
	OPENBSD_5_0:1.3.0.16
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.14
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.12
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.10
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.8
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.4
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.1.1.0.8
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.6
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	jolan_2005-may-11:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2014.11.21.09.11.22;	author landry;	state dead;
branches;
next	1.4;
commitid	8jt6EPAc5bQzoA1I;

1.4
date	2014.09.17.14.48.30;	author espie;	state Exp;
branches;
next	1.3;
commitid	YChCOYJYleaaxzZc;

1.3
date	2008.02.26.17.33.10;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.08.22.12.18;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.12.04.38.51;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.12.04.38.51;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Bugfix/translation update to xfce4-systemload 1.1.2.

Removed merged patches.
@
text
@$OpenBSD: patch-panel-plugin_memswap_c,v 1.4 2014/09/17 14:48:30 espie Exp $
--- panel-plugin/memswap.c.orig	Wed Apr 18 13:01:19 2012
+++ panel-plugin/memswap.c	Wed Sep 17 03:12:44 2014
@@@@ -289,20 +289,11 @@@@ gint read_memswap(gulong *mem, gulong *swap, gulong *M
 
 #define ARRLEN(X) (sizeof(X)/sizeof(X[0]))
     {
-        static int mib[2];
-        /* 64-bit datatype */
-        if(sizeof(size_t) == 8) {
-            mib[0] = CTL_HW;
-            mib[1] = HW_PHYSMEM64;
-        }
-        /* assume 32-bit datatype */
-        else {
-            mib[0] = CTL_HW;
-            mib[1] = HW_PHYSMEM;
-        }
-        len = sizeof(MTotal);
-        sysctl(mib, ARRLEN(mib), &MTotal, &len, NULL, 0);
-        MTotal >>= 10;
+        static int mib[] = { CTL_HW, HW_PHYSMEM64 };
+        int64_t x;
+        len = sizeof(x);
+        sysctl(mib, ARRLEN(mib), &x, &len, NULL, 0);
+        MTotal = x >> 10;
     }
 
     {
@


1.4
log
@dkstat
@
text
@d1 1
a1 1
$OpenBSD: patch-panel-plugin_memswap_c,v 1.3 2008/02/26 17:33:10 landry Exp $
@


1.3
log
@Fix the patch to correctly use HW_PHYSMEM64, patch from naddy@@.
Bump PKGNAME.

ok naddy@@
@
text
@d1 4
a4 4
$OpenBSD: patch-panel-plugin_memswap_c,v 1.2 2007/05/08 22:12:18 steven Exp $
--- panel-plugin/memswap.c.orig	Wed Jan 17 19:01:09 2007
+++ panel-plugin/memswap.c	Tue Feb 26 09:52:49 2008
@@@@ -405,20 +405,11 @@@@ gint read_memswap(gulong *mem, gulong *swap, gulong *M
@


1.2
log
@update to 0.4.2

from Landry Breuil <gaston at gcu.info>
@
text
@d1 1
a1 1
$OpenBSD: patch-panel-plugin_memswap_c,v 1.1.1.1 2005/05/12 04:38:51 jolan Exp $
d3 9
a11 5
+++ panel-plugin/memswap.c	Fri Apr  6 22:48:24 2007
@@@@ -288,7 +288,7 @@@@ gint read_memswap(gulong *mem, gulong *swap, gulong *M
         /* 64-bit datatype */
         if(sizeof(size_t) == 8) {
             mib[0] = CTL_HW;
d13 15
a27 7
+            mib[1] = HW_PHYSMEM;
         }
         /* assume 32-bit datatype */
         else {
@@@@ -391,7 +391,7 @@@@ gint read_memswap(gulong *mem, gulong *swap, gulong *M
 #include <unistd.h>
 #include <uvm/uvm_param.h>
d29 1
a29 14
-static size_t MTotal = 0;
+static int MTotal = 0;
 static size_t MFree = 0;
 static size_t MUsed = 0;
 static size_t STotal = 0;
@@@@ -409,7 +409,7 @@@@ gint read_memswap(gulong *mem, gulong *swap, gulong *M
         /* 64-bit datatype */
         if(sizeof(size_t) == 8) {
             mib[0] = CTL_HW;
-            mib[1] = HW_PHYSMEM64;
+            mib[1] = HW_PHYSMEM;
         }
         /* assume 32-bit datatype */
         else {
@


1.1
log
@Initial revision
@
text
@d1 13
a13 4
$OpenBSD: patch-panel-plugin_memswap_c,v 1.1 2003/12/16 20:51:37 jolan Exp $
--- panel-plugin/memswap.c.orig	2003-11-13 12:52:01.000000000 -0600
+++ panel-plugin/memswap.c	2003-12-16 14:34:16.000000000 -0600
@@@@ -381,7 +381,7 @@@@ gint read_memswap(gulong *mem, gulong *s
d22 9
@


1.1.1.1
log
@xfce 4.2.1
@
text
@@
