head	1.2;
access;
symbols
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.10.19.19.55.54;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2009.05.11.20.49.44;	author landry;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to xfce4-panel 4.6.2, bugfix release, backported patches integrated.
See http://foo-projects.org/pipermail/xfce/2009-October/026052.html.
@
text
@$OpenBSD: patch-plugins_launcher_launcher-exec_c,v 1.1 2009/05/11 20:49:44 landry Exp $
--- plugins/launcher/launcher-exec.c.orig	Sat Apr 18 16:40:09 2009
+++ plugins/launcher/launcher-exec.c	Mon May 11 22:13:33 2009
@@@@ -264,6 +264,9 @@@@ launcher_exec_parse_argv (LauncherEntry   *entry,
     GSList       *li;
     gchar       **argv = NULL;
 
+    if (entry->terminal)
+        g_string_append (command_line, "exo-open --launch TerminalEmulator ");
+
     /* build the full command */
     for (p = entry->exec; *p != '\0'; ++p)
     {
@@@@ -378,24 +381,7 @@@@ launcher_exec_parse_argv (LauncherEntry   *entry,
     DBG ("Execute: %s", command_line->str);
 
     /* create the argv */
-    if (G_LIKELY (command_line->str != NULL))
-    {
-        if (entry->terminal == FALSE)
-        {
-            /* use glib to parge the argv */
-            g_shell_parse_argv (command_line->str, NULL, &argv, error);
-        }
-        else
-        {
-            /* we parse our own argv here so exo-open will handle all attributes without problems */
-            argv = g_new (gchar *, 5);
-            argv[0] = g_strdup ("exo-open");
-            argv[1] = g_strdup ("--launch");
-            argv[2] = g_strdup ("TerminalEmulator");
-            argv[3] = g_strdup (command_line->str);
-            argv[4] = NULL;
-        }
-    }
+    g_shell_parse_argv (command_line->str, NULL, &argv, error);
 
     /* cleanup */
     g_string_free (command_line, TRUE);
@


1.1
log
@Bring in some patches from upstream svn to fix
http://bugzilla.xfce.org/show_bug.cgi?id=5301 and
http://bugzilla.xfce.org/show_bug.cgi?id=5222.
Bump PKGNAMEs.
@
text
@d1 1
a1 1
$OpenBSD$
@

