head	1.29;
access;
symbols
	OPENBSD_6_1:1.27.0.2
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.23.0.4
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.22.0.4
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.18.0.2
	OPENBSD_5_7_BASE:1.18
	OPENBSD_5_6:1.17.0.2
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.16.0.4
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.14.0.2
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.11.0.2
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	landry_20110118:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.29
date	2017.07.17.14.03.52;	author landry;	state Exp;
branches;
next	1.28;
commitid	yBgVK8Hv1koS615Z;

1.28
date	2017.06.10.07.29.40;	author landry;	state Exp;
branches;
next	1.27;
commitid	2wgqkg5CMZWnOHBN;

1.27
date	2016.12.17.16.27.38;	author zhuk;	state Exp;
branches;
next	1.26;
commitid	qcFTVFV5lScw2Edr;

1.26
date	2016.11.04.11.35.21;	author sthen;	state Exp;
branches;
next	1.25;
commitid	Gg5LRcnQlqj5M3F7;

1.25
date	2016.11.03.16.20.40;	author landry;	state Exp;
branches;
next	1.24;
commitid	8YFYIVZQoWyaJ4kp;

1.24
date	2016.11.03.10.37.45;	author landry;	state Exp;
branches;
next	1.23;
commitid	9GgAYZLdcTWqFQaU;

1.23
date	2015.10.30.12.59.18;	author sthen;	state Exp;
branches;
next	1.22;
commitid	vVZOehVa6DiEPxJL;

1.22
date	2015.04.28.06.35.41;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	y2YlGuxvtYQ676kZ;

1.21
date	2015.04.21.18.51.26;	author sthen;	state Exp;
branches;
next	1.20;
commitid	ptMCPiyuhL0JiHRZ;

1.20
date	2015.04.04.09.21.09;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	kS3kwKZogsvzYmEY;

1.19
date	2015.03.16.20.27.06;	author landry;	state Exp;
branches;
next	1.18;
commitid	Ir6OJwe5pFGPxizA;

1.18
date	2014.09.13.16.36.54;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	N2TalFGi4jKRwS2u;

1.17
date	2014.07.18.12.10.18;	author ajacoutot;	state Exp;
branches;
next	1.16;
commitid	bSqTNF4fEIN0yvyA;

1.16
date	2013.05.31.19.21.48;	author landry;	state Exp;
branches;
next	1.15;

1.15
date	2013.03.11.11.46.18;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2013.01.13.17.55.29;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2013.01.02.18.29.09;	author landry;	state Exp;
branches;
next	1.12;

1.12
date	2013.01.02.17.12.22;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2012.07.13.15.06.55;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2012.04.30.12.50.14;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2011.12.26.18.40.14;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2011.10.14.11.37.24;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2011.09.21.10.10.46;	author landry;	state Exp;
branches;
next	1.6;

1.6
date	2011.09.16.12.29.18;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2011.06.24.11.17.05;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2011.04.18.23.37.07;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.03.29.23.22.17;	author jakemsr;	state Exp;
branches;
next	1.2;

1.2
date	2011.01.18.21.34.58;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.01.18.20.05.38;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.01.18.20.05.38;	author landry;	state Exp;
branches;
next	;


desc
@@


1.29
log
@Update to tumbler 0.2.0.

Migrated from dbus-glib to GDbus.

https://mail.xfce.org/pipermail/xfce-announce/2017-July/000541.html
@
text
@# $OpenBSD: Makefile,v 1.28 2017/06/10 07:29:40 landry Exp $

COMMENT=	D-Bus thumbnailing service

XFCE_VERSION=	0.2.0
XFCE_GOODIE=	tumbler

SHARED_LIBS+=	tumbler-1 0.0

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += X11 Xext Xrender avcodec avformat avutil bz2 c cairo
WANTLIB += crypto curl expat ffi ffmpegthumbnailer
WANTLIB += fontconfig freetype gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 gsf-1 gthread-2.0 jpeg
WANTLIB += lcms2 lzma m nghttp2 ogg openjp2 pcre pixman-1 png poppler
WANTLIB += poppler-glib pthread pthread-stubs ssl swscale tiff
WANTLIB += vorbis xcb xcb-render xcb-shm xml2 z iconv intl

MODULES=	x11/xfce4
MODXFCE_PURGE_LA =	lib/tumbler-1/plugins lib/tumbler-1/plugins/cache

CONFIGURE_ARGS =	--disable-raw-thumbnailer \
			--disable-gstreamer-thumbnailer

# correctly find bindtextdomain
CONFIGURE_ENV +=	LIBS='-liconv'
FAKE_FLAGS =	confdir=${PREFIX}/share/examples/tumbler

LIB_DEPENDS +=	devel/libgsf \
		net/curl \
		print/poppler \
		graphics/png \
		graphics/jpeg \
		graphics/ffmpegthumbnailer \
		graphics/gdk-pixbuf2

.include <bsd.port.mk>
@


1.28
log
@Bugfix update to tumbler 0.1.32
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/12/17 16:27:38 zhuk Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.32
d13 2
a14 2
WANTLIB += X11 Xext Xrender avcodec avformat avutil bz2 c cairo crypto
WANTLIB += curl dbus-1 dbus-glib-1 expat ffi ffmpegthumbnailer
d31 1
a31 2
LIB_DEPENDS +=	x11/dbus-glib \
		devel/libgsf \
@


1.27
log
@Unbreak after poppler switch from openjpeg to openjp2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/11/04 11:35:21 sthen Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.31
a6 1
REVISION=	6
@


1.26
log
@sync WANTLIB (and in one case, add gettext to LIB_DEPENDS) in dependent ports
now that internationalised domain name support has been removed from net/curl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/11/03 16:20:40 landry Exp $
d7 1
a7 1
REVISION=	5
d18 1
a18 1
WANTLIB += lcms2 lzma m nghttp2 ogg openjpeg pcre pixman-1 png poppler
@


1.25
log
@Bump REVISION, because i'm stupid.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/11/03 10:37:45 landry Exp $
d7 1
a7 1
REVISION=	4
d14 2
a15 2
WANTLIB += X11 Xext Xrender avcodec avformat avutil bz2 c cairo
WANTLIB += crypto curl dbus-1 dbus-glib-1 expat ffi ffmpegthumbnailer
d17 1
a17 1
WANTLIB += gmodule-2.0 gobject-2.0 gsf-1 gthread-2.0 idn jpeg
@


1.24
log
@Drop gettext MODULE.

Fix some WANTLIB while here, and bump REVISION accordingly when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/10/30 12:59:18 sthen Exp $
d7 1
a7 1
REVISION=	3
@


1.23
log
@sync WANTLIB (curl+nghttp2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/04/28 06:35:41 ajacoutot Exp $
d20 1
a20 1
WANTLIB += vorbis xcb xcb-render xcb-shm xml2 z
@


1.22
log
@Regen WANTLIB to unbreak with new FFmpeg.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/04/21 18:51:26 sthen Exp $
d7 1
a7 1
REVISION=	2
d18 1
a18 1
WANTLIB += lcms2 lzma m ogg openjpeg pcre pixman-1 png poppler
@


1.21
log
@add some simple missing lzma WANTLIBs (crept in via libxml)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/04/04 09:21:09 ajacoutot Exp $
d7 1
a7 1
REVISION=	1
d14 2
a15 2
WANTLIB += X11 Xext Xrender avcodec avformat avutil bz2 c cairo crypto
WANTLIB += curl dbus-1 dbus-glib-1 expat ffi ffmpegthumbnailer
d17 4
a20 4
WANTLIB += gmodule-2.0 gobject-2.0 gsf-1 gthread-2.0 idn jpeg lcms2 lzma
WANTLIB += m ogg openjpeg orc-0.4 pcre pixman-1 png poppler poppler-glib
WANTLIB += pthread pthread-stubs ssl swscale theoradec tiff vorbis xcb
WANTLIB += xcb-render xcb-shm xml2 z
@


1.20
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/03/16 20:27:06 landry Exp $
d7 1
a7 1
REVISION=	0
d14 8
a39 11

WANTLIB += X11 Xext Xrender c cairo dbus-1 dbus-glib-1
WANTLIB += expat fontconfig freetype gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 jpeg lcms2 m openjpeg
WANTLIB += pcre pixman-1 png poppler poppler-glib
WANTLIB += pthread pthread-stubs xcb xcb-render xcb-shm
WANTLIB += xml2 z ffi bz2 tiff gsf-1
WANTLIB += avcodec avformat avutil ffmpegthumbnailer
WANTLIB += ogg orc-0.4 swscale
WANTLIB += crypto curl idn ssl theoradec vorbis
@


1.19
log
@Update to tumbler 0.1.31
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/09/13 16:36:54 ajacoutot Exp $
d7 1
@


1.18
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/07/18 12:10:18 ajacoutot Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.29
@


1.17
log
@Unbreak: explicitely --disable-gtk-doc in case gtk-doc is around configure time.

spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/05/31 19:21:48 landry Exp $
d16 1
a16 2
CONFIGURE_ARGS =	--disable-gtk-doc \
			--disable-raw-thumbnailer \
a17 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.16
log
@Bugfix update to tumbler 0.1.29
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/11 11:46:18 espie Exp $
d16 2
a17 1
CONFIGURE_ARGS =	--disable-raw-thumbnailer \
d19 7
@


1.15
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/01/13 17:55:29 landry Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.27
d31 2
a32 3
WANTLIB += GL X11 Xau Xdamage Xdmcp Xext Xfixes
WANTLIB += Xrender Xxf86vm c cairo dbus-1 dbus-glib-1
WANTLIB += drm expat fontconfig freetype gdk_pixbuf-2.0
d37 1
a37 1
WANTLIB += xml2 z ffi bz2 stdc++ tiff gsf-1
d40 1
a40 1
WANTLIB += crypto curl idn ssl
@


1.14
log
@Update to tumbler 0.1.27.

Now provides a movie cover tumbnailer disabled by default; see
http://docs.xfce.org/xfce/thunar/tumbler for how to enable it via the
new config file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/01/02 18:29:09 landry Exp $
a10 2
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
a11 1
PERMIT_PACKAGE_FTP=	Yes
@


1.13
log
@Update to tumbler 0.1.26.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/01/02 17:12:22 landry Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.26
d23 1
d27 1
d44 1
@


1.12
log
@Winter cleanup of the Xfce ports:

- use LIBTOOL_FLAGS=--tag=disable-static to avoid building useless
  static libs.
- add a MODXFCE_PURGE_LA variable holding the list of dirs to purge from
  libtool archive useless files.
- add a MODXFCE4_post-install hook in xfce4.port.mk to purge the la files.
  This requires  bsd.port.mk r1.1201.
- remove --disable-linker-opts now that --as-needed seems to work fine
- fix WANTLIB (mostly adding harfbuzz icudata icule icuuc in lots of
  places)
- update PLISTs: remove @@comment'ed static/la files, redundant dirs

ok sthen@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/07/13 15:06:55 kili Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.25
a6 1
REVISION=	1
@


1.11
log
@Adjust WANTLIB for poppler-0.20.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/04/30 12:50:14 landry Exp $
d7 1
a7 1
REVISION=	0
d18 1
d20 1
a20 2
CONFIGURE_ARGS =	--disable-linker-opts \
			--disable-raw-thumbnailer \
d41 2
a42 3
WANTLIB += avcodec avformat avutil ffmpegthumbnailer gsm mp3lame
WANTLIB += ogg orc-0.4 schroedinger-1.0 speex swscale theoradec
WANTLIB += theoraenc vorbis vorbisenc vpx x264
@


1.10
log
@Update to tumbler 0.1.25.

Disable buggy gstreamer thumbnailer in favor of ffmpeg thumbnailer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/12/26 18:40:14 landry Exp $
d7 1
d37 1
a37 1
WANTLIB += gthread-2.0 jpeg lcms m openjpeg
@


1.9
log
@Update to tumbler 0.1.23.
Adds an odf thumbnailer, fix depends/wantlib accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/10/14 11:37:24 jasper Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.23
d19 2
a20 1
			--disable-ffmpeg-thumbnailer
d29 1
a29 1
		multimedia/gstreamer-0.10/core \
d35 1
a35 1
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gstreamer-0.10
d40 3
@


1.8
log
@Regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/09/21 10:10:46 landry Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.22
a6 1
REVISION =      0
d24 1
d29 1
a29 2
		graphics/gdk-pixbuf2 \
		x11/gtk+2
d31 3
a33 3
WANTLIB += GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext Xfixes
WANTLIB += Xi Xinerama Xrandr Xrender Xxf86vm c cairo dbus-1 dbus-glib-1
WANTLIB += drm expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
d35 2
a36 2
WANTLIB += gthread-2.0 jpeg lcms m openjpeg pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pcre pixman-1 png poppler poppler-glib
d38 1
a38 1
WANTLIB += xml2 z ffi
@


1.7
log
@Update to tumbler 0.1.22.
Switch to the new gstreamer thumbnailer in place of ffmpegthumbnailer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/09/16 12:29:18 espie Exp $
d7 1
d38 2
a39 2
WANTLIB += pthread pthread-stubs stdc++ xcb xcb-render xcb-shm
WANTLIB += xml2 z
@


1.6
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/06/24 11:17:05 sthen Exp $
d5 1
a5 1
XFCE_VERSION=	0.1.6
a7 2
REVISION=	4

d18 2
a19 1
CONFIGURE_ARGS =	--disable-linker-opts
d27 1
a27 1
		graphics/ffmpegthumbnailer \
d32 7
a38 9
WANTLIB += Xi Xinerama Xrandr Xrender Xxf86vm avcodec avformat
WANTLIB += avutil bz2 c cairo dbus-1 dbus-glib-1 drm expat
WANTLIB += ffmpegthumbnailer fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0 gsm gthread-2.0
WANTLIB += jpeg lcms m mp3lame ogg openjpeg orc-0.4 pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre pixman-1 png poppler
WANTLIB += poppler-glib pthread pthread-stubs schroedinger-1.0
WANTLIB += speex swscale theoradec theoraenc vorbis vorbisenc
WANTLIB += vpx x264 xcb xcb-render xcb-shm xml2 z
@


1.5
log
@Chase ffmpeg dep changes. Mostly from Brad ok dcoppa@@, plus opencv from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2011/04/18 23:37:07 sthen Exp $
d8 1
a8 1
REVISION=	3
@


1.4
log
@sync WANTLIB (re: ffmpeg update), from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/03/29 23:22:17 jakemsr Exp $
d8 1
a8 1
REVISION=	2
d34 1
a34 1
WANTLIB += avutil bz2 c cairo dbus-1 dbus-glib-1 drm expat faac
@


1.3
log
@more ports that need faad removed from WANTLIB after ffmpeg update,
as noted on ports@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/01/18 21:34:58 ajacoutot Exp $
d8 1
a8 1
REVISION=	1
a31 2
WANTLIB += c dbus-1 dbus-glib-1 freetype gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 jpeg m pcre z png pthread gdk_pixbuf-2.0
d33 9
a41 7
WANTLIB += Xi Xinerama Xrandr Xrender Xxf86vm cairo drm expat
WANTLIB += fontconfig gdk-x11-2.0 lcms openjpeg pango-1.0 pangocairo-1.0
WANTLIB += pangoft2-1.0 pixman-1 poppler poppler-glib pthread-stubs
WANTLIB += xcb xcb-render xcb-shm xml2
WANTLIB += avcodec avformat avutil bz2 faac ffmpegthumbnailer
WANTLIB += gsm mp3lame ogg orc-0.4 schroedinger-1.0 speex swscale
WANTLIB += theora vorbis vorbisenc x264
@


1.2
log
@@@comment libtool files for modules.
Add missing gio-querymodules goo in exo.

ok landry@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/01/18 20:05:38 landry Exp $
d8 1
a8 1
REVISION=	0
d39 1
a39 1
WANTLIB += avcodec avformat avutil bz2 faac faad ffmpegthumbnailer
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/08/11 08:38:41 ajacoutot Exp $
d7 2
@


1.1.1.1
log
@Import tumbler 0.1.6

Tumbler is a D-Bus service for applications to request thumbnails for
various URI schemes and MIME types. It is an implementation of the
thumbnail management D-Bus specification described on
http://live.gnome.org/ThumbnailerSpec written in an object-oriented
fashion using GLib and GObject.

thunar can make use of it but it's not required by it (as is
hunar-thumbnailers package..)
@
text
@@
