head	1.2;
access;
symbols
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2007.05.14.17.54.35;	author steven;	state dead;
branches;
next	1.1;

1.1
date	2006.05.29.07.58.51;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 0.6.0

patch similar to the one from maintainer

help and ok kurt@@
@
text
@$OpenBSD: patch-panel-plugin_scrollbox_c,v 1.1 2006/05/29 07:58:51 jolan Exp $
--- panel-plugin/scrollbox.c.orig	Mon Feb 28 09:25:19 2005
+++ panel-plugin/scrollbox.c	Mon May 29 02:54:43 2006
@@@@ -17,7 +17,7 @@@@ enum {
 void free_label(struct label *lbl)
 {
         if (lbl->pixmap)
-                g_free(lbl->pixmap);
+                g_object_unref(lbl->pixmap);
         if (lbl->msg)
                 g_free(lbl->msg);
 }
@@@@ -305,7 +305,7 @@@@ gtk_scrollbox_finalize(GObject *gobject)
                 {
                         struct label *lbl = (struct label*)g_ptr_array_index(self->labels, i); 
 
-                        g_free(lbl->pixmap);
+                        g_object_unref(lbl->pixmap);
                         g_free(lbl->msg);
                 }
                 g_ptr_array_free(self->labels, TRUE);
@@@@ -337,7 +337,7 @@@@ void redraw_labels (GtkWidget *widget, G
                 newpixmap = make_pixmap(self, lbl->msg);
 
                 if (lbl->pixmap)
-                        g_free(lbl->pixmap);
+                        g_object_unref(lbl->pixmap);
 
                 lbl->pixmap = newpixmap;
         }
@


1.1
log
@fix crash that occurs with glib2.10
@
text
@d1 1
a1 1
$OpenBSD$
@

