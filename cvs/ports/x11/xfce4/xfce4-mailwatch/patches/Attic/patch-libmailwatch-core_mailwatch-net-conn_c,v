head	1.2;
access;
symbols
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.12.28.12.15.40;	author landry;	state dead;
branches;
next	1.1;

1.1
date	2012.07.09.08.59.34;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@After 5 years of inactivity and bitrot.. update to xfce4-mailwatch 1.2.0!

Brings it up-to-date with today's Xfce coding standards, tested working
fine with gmail & an imap/ssl accounts.

See http://mail.xfce.org/pipermail/xfce-announce/2013-October/000287.html
And http://goodies.xfce.org/projects/panel-plugins/xfce4-mailwatch-plugin
@
text
@$OpenBSD: patch-libmailwatch-core_mailwatch-net-conn_c,v 1.1 2012/07/09 08:59:34 ajacoutot Exp $

The gnutls_transport_set_lowat function has been removed in gnutls>=3
(the lowat feature is always disabled now).

--- libmailwatch-core/mailwatch-net-conn.c.orig	Mon Jul  9 10:43:36 2012
+++ libmailwatch-core/mailwatch-net-conn.c	Mon Jul  9 10:44:40 2012
@@@@ -621,8 +621,10 @@@@ xfce_mailwatch_net_conn_make_secure(XfceMailwatchNetCo
                            net_conn->gt_creds);
     gnutls_transport_set_ptr(net_conn->gt_session,
                              (gnutls_transport_ptr_t)net_conn->fd);
+#if GNUTLS_VERSION_NUMBER < 0x020c00
     if(fcntl(net_conn->fd, F_GETFL) & O_NONBLOCK)
         gnutls_transport_set_lowat(net_conn->gt_session, 0);
+#endif
     
     if(!xfce_mailwatch_net_conn_tls_handshake(net_conn, error)) {
 #if 0
@


1.1
log
@Unbreak with gnutls>=3
@
text
@d1 1
a1 1
$OpenBSD$
@

