head	1.25;
access;
symbols
	OPENBSD_6_0:1.23.0.6
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.21.0.4
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.2
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.20.0.4
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.18.0.2
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3;
locks; strict;
comment	@# @;


1.25
date	2016.11.03.10.37.44;	author landry;	state Exp;
branches;
next	1.24;
commitid	9GgAYZLdcTWqFQaU;

1.24
date	2016.08.30.13.44.33;	author landry;	state Exp;
branches;
next	1.23;
commitid	z3MoqaeNH5gRfFne;

1.23
date	2015.03.27.08.16.24;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	BUhOiEl2FUSRKwq7;

1.22
date	2015.03.16.20.19.05;	author landry;	state Exp;
branches;
next	1.21;
commitid	WKI6WVKAFyQYxKqO;

1.21
date	2014.03.25.09.02.07;	author landry;	state Exp;
branches;
next	1.20;

1.20
date	2013.05.31.19.14.11;	author landry;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.21.08.48.57;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.01.02.17.12.21;	author landry;	state Exp;
branches;
next	1.17;

1.17
date	2012.04.30.12.42.07;	author landry;	state Exp;
branches;
next	1.16;

1.16
date	2011.12.03.18.33.03;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.09.19.07.53.15;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.19.07.44.59;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.02.17.35.47;	author kili;	state Exp;
branches;
next	1.12;

1.12
date	2011.01.18.19.48.30;	author landry;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.22.08.37.05;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.04.17.11.43;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.27.12.58.42;	author landry;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.05.15.19.41;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2009.08.11.19.51.42;	author landry;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.28.19.37.29;	author landry;	state Exp;
branches;
next	1.5;

1.5
date	2009.03.08.17.03.13;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2008.11.06.15.34.46;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2008.07.07.12.06.04;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2008.06.14.17.21.35;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2008.06.14.16.15.16;	author landry;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Drop gettext MODULE.

Fix some WANTLIB while here, and bump REVISION accordingly when needed.
@
text
@# $OpenBSD: xfce4.port.mk,v 1.24 2016/08/30 13:44:33 landry Exp $

# Module for Xfce related ports, divided into five categories:
# core, goodie, artwork, thunar plugins, panel plugins.

XFCE_DESKTOP_VERSION=	4.12.0
CATEGORIES+=	x11/xfce4

USE_GMAKE?=	Yes
EXTRACT_SUFX?=	.tar.bz2

# needed for all ports but *-themes
.if !defined(XFCE_NO_SRC)
LIBTOOL_FLAGS?=	--tag=disable-static

MODULES+=	textproc/intltool
.endif

# if version is not defined, it's the DE version
.if !defined(XFCE_VERSION)
XFCE_VERSION=	${XFCE_DESKTOP_VERSION}
.endif

XFCE_BRANCH=	${XFCE_VERSION:C/^([0-9]+\.[0-9]+).*/\1/}

# Set to 'yes' if there are .desktop files under share/applications/.
.if defined(MODXFCE_DESKTOP_FILE) && ${MODXFCE_DESKTOP_FILE:L} == "yes"
MODXFCE_RUN_DEPENDS+=	devel/desktop-file-utils
.endif

# Set to 'yes' if there are icon files under share/icons/.
.if defined(MODXFCE_ICON_CACHE) && ${MODXFCE_ICON_CACHE:L} == "yes"
MODXFCE_RUN_DEPENDS+=  x11/gtk+3,-guic
.endif

.if defined(XFCE_PLUGIN)
HOMEPAGE?=	http://goodies.xfce.org/projects/panel-plugins/xfce4-${XFCE_PLUGIN}-plugin

MASTER_SITES?=	http://archive.xfce.org/src/panel-plugins/xfce4-${XFCE_PLUGIN}-plugin/${XFCE_BRANCH}/
MASTER_SITES_GIT?=	http://git.xfce.org/panel-plugins/xfce4-${XFCE_PLUGIN}-plugin/snapshot/
DISTNAME?=	xfce4-${XFCE_PLUGIN}-plugin-${XFCE_VERSION}
DISTNAME_GIT?=	xfce4-${XFCE_PLUGIN}-plugin-${XFCE_COMMIT}
PKGNAME?=	xfce4-${XFCE_PLUGIN}-${XFCE_VERSION}

MODXFCE_LIB_DEPENDS=	x11/xfce4/xfce4-panel
MODXFCE_WANTLIB?=	xfce4panel-1.0
MODXFCE_PURGE_LA?=	lib/xfce4/panel/plugins lib/xfce4/panel-plugins
.elif defined(XFCE_GOODIE)
HOMEPAGE?=	http://goodies.xfce.org/projects/applications/${XFCE_GOODIE}

MASTER_SITES?=	http://archive.xfce.org/src/apps/${XFCE_GOODIE:L}/${XFCE_BRANCH}/
MASTER_SITES_GIT?=	http://git.xfce.org/apps/${XFCE_GOODIE:L}/snapshot/
DISTNAME?=	${XFCE_GOODIE}-${XFCE_VERSION}
DISTNAME_GIT?=	${XFCE_GOODIE}-${XFCE_COMMIT}
PKGNAME?=	${XFCE_GOODIE}-${XFCE_VERSION}
.elif defined(XFCE_ARTWORK)
HOMEPAGE?=	http://www.xfce.org/projects/

MASTER_SITES?=	http://archive.xfce.org/src/art/${XFCE_ARTWORK}/${XFCE_BRANCH}/
DISTNAME?=	${XFCE_ARTWORK}-${XFCE_VERSION}
.elif defined(THUNAR_PLUGIN)
HOMEPAGE?=	http://goodies.xfce.org/projects/thunar-plugins/${THUNAR_PLUGIN}

MASTER_SITES?=	http://archive.xfce.org/src/thunar-plugins/${THUNAR_PLUGIN}/${XFCE_BRANCH}/
DISTNAME?=	${THUNAR_PLUGIN}-${XFCE_VERSION}
PKGNAME?=	${DISTNAME:S/-plugin//}
MODXFCE_PURGE_LA ?=	lib/thunarx-2
.elif defined(XFCE_PROJECT)
HOMEPAGE?=	http://www.xfce.org/projects/${XFCE_PROJECT}

MASTER_SITES?=	http://archive.xfce.org/src/xfce/${XFCE_PROJECT:L}/${XFCE_BRANCH}/
MASTER_SITES_GIT?=	http://git.xfce.org/xfce/${XFCE_PROJECT:L}/snapshot/
DISTNAME?=	${XFCE_PROJECT}-${XFCE_VERSION}
DISTNAME_GIT?=	${XFCE_PROJECT}-${XFCE_COMMIT}
PKGNAME?=	${XFCE_PROJECT}-${XFCE_VERSION}
.endif

.if defined(XFCE_COMMIT)
DISTNAME =	${DISTNAME_GIT}
MASTER_SITES =	${MASTER_SITES_GIT}
CONFIGURE_ARGS +=	--enable-maintainer-mode --enable-debug
AUTOMAKE_VERSION =	1.12
AUTOCONF_VERSION =	2.65
pre-configure:
	cd ${WRKSRC} && env NOCONFIGURE=yes \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		./autogen.sh
.endif

# remove useless .la file
MODXFCE_PURGE_LA ?=
.if !empty(MODXFCE_PURGE_LA)
MODXFCE4_post-install = for f in ${MODXFCE_PURGE_LA} ; do \
		rm -f ${PREFIX}/$${f}/*.la ; done
.endif

LIB_DEPENDS+=	${MODXFCE_LIB_DEPENDS}
WANTLIB+=	${MODXFCE_WANTLIB}
RUN_DEPENDS+=	${MODXFCE_RUN_DEPENDS}
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.24
log
@Only set MODXFCE_WANTLIB if not already set - allows better support
of Gtk3 plugins.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.23 2015/03/27 08:16:24 ajacoutot Exp $
d16 1
a16 1
MODULES+=	devel/gettext textproc/intltool
@


1.23
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.22 2015/03/16 20:19:05 landry Exp $
d46 1
a46 1
MODXFCE_WANTLIB=	xfce4panel-1.0
@


1.22
log
@Bump XFCE_DESKTOP_VERSION to 4.12.0.

Add plumbing to allow building from git snapshots by defining XFCE_COMMIT.
git.xfce.org's cgit instance produces tarballs with constant checksums..
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.21 2014/03/25 09:02:07 landry Exp $
d33 1
a33 1
MODXFCE_RUN_DEPENDS+=  x11/gtk+2,-guic
@


1.21
log
@Use DISTNAME?= to allow ports using xfce4 MODULE to override it.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.20 2013/05/31 19:14:11 landry Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.10.1
d40 1
d42 2
a43 1
PKGNAME?=	${DISTNAME:S/-plugin//}
d52 1
d54 2
d72 1
d74 14
@


1.20
log
@Bump XFCE_DESKTOP_VERSION to 4.10.1 since some bugfix releases were made.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.19 2013/03/21 08:48:57 ajacoutot Exp $
d50 1
a50 1
DISTNAME=	${XFCE_GOODIE}-${XFCE_VERSION}
d55 1
a55 1
DISTNAME=	${XFCE_ARTWORK}-${XFCE_VERSION}
d67 1
a67 1
DISTNAME=	${XFCE_PROJECT}-${XFCE_VERSION}
@


1.19
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.18 2013/01/02 17:12:21 landry Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.10.0
@


1.18
log
@Winter cleanup of the Xfce ports:

- use LIBTOOL_FLAGS=--tag=disable-static to avoid building useless
  static libs.
- add a MODXFCE_PURGE_LA variable holding the list of dirs to purge from
  libtool archive useless files.
- add a MODXFCE4_post-install hook in xfce4.port.mk to purge the la files.
  This requires  bsd.port.mk r1.1201.
- remove --disable-linker-opts now that --as-needed seems to work fine
- fix WANTLIB (mostly adding harfbuzz icudata icule icuuc in lots of
  places)
- update PLISTs: remove @@comment'ed static/la files, redundant dirs

ok sthen@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.17 2012/04/30 12:42:07 landry Exp $
a13 1
USE_LIBTOOL?=	Yes
@


1.17
log
@Bump XFCE_DESKTOP_VERSION to 4.10.0, in preparation for the whole
update. Set SHARED_ONLY defaulting to Yes, so that i can fold all
PFRAG.shared in the corresponding PLISTs.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.16 2011/12/03 18:33:03 ajacoutot Exp $
d15 2
d46 1
d63 1
d69 7
@


1.16
log
@Add MODXFCE_ICON_CACHE for gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.15 2011/09/19 07:53:15 ajacoutot Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.8.0
@


1.15
log
@MODGNOME_DESKTOP_FILE => MODXFCE_DESKTOP_FILE

discussed with and ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.14 2011/09/19 07:44:59 ajacoutot Exp $
d25 1
a25 1
# Set to 'yes' if there are .desktop files in share/applications/.
d28 5
@


1.14
log
@DESKTOP_FILES => MODGNOME_DESKTOP_FILE, like it should always have been.

discussed with and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.13 2011/06/02 17:35:47 kili Exp $
d26 1
a26 1
.if defined(MODGNOME_DESKTOP_FILE) && ${MODGNOME_DESKTOP_FILE:L} == "yes"
@


1.13
log
@Doh, can zap --disable-silent-rules here, too.
My grep skills suffer today.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.12 2011/01/18 19:48:30 landry Exp $
d26 1
a26 1
.if defined(DESKTOP_FILES) && ${DESKTOP_FILES:L} == "yes"
@


1.12
log
@Bump XFCE_DESKTOP_VERSION to 4.8.0 in preparation for the update of the
whole gang. add --disable-silent-rules to CONFIGURE_ARGS while here.

The whole stuff looks good to ajacoutot@@, discussed with espie@@, i've
been running the betas/pre and fixing bugs upstream since a while, so it
can make 4.9.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.10 2010/10/04 17:11:43 landry Exp $
a20 6
.endif

.if defined(CONFIGURE_STYLE)
. if ${CONFIGURE_STYLE:L:Mgnu} || ${CONFIGURE_STYLE:L:Mautoconf}
CONFIGURE_ARGS +=	--disable-silent-rules
. endif
@


1.11
log
@new depends
@
text
@d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.6.2
d23 6
d44 1
a44 1
MODXFCE_WANTLIB=	xfce4panel
@


1.10
log
@Tweak comment. DESKTOP_FILES=yes should be used only if .desktop files
are under share/applications. Prodded by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.9 2010/07/27 12:58:42 landry Exp $
d27 1
a27 1
MODXFCE_RUN_DEPENDS+=	:desktop-file-utils-*:devel/desktop-file-utils
d37 1
a37 1
MODXFCE_LIB_DEPENDS=	::x11/xfce4/xfce4-panel
@


1.9
log
@Convert to new LIB_DEPENDS/WANTLIB semantics, fix WANTLIB while here.
Bump all REVISION as i changed my e-mail address.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.8 2010/06/05 15:19:41 landry Exp $
d25 1
a25 1
# Set to 'yes' if there are .desktop files in the package list.
@


1.8
log
@Moving to Xfce 4.6.2....
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.7 2009/08/11 19:51:42 landry Exp $
d37 2
a38 1
MODXFCE_LIB_DEPENDS=	xfce4panel.>=2::x11/xfce4/xfce4-panel
d63 1
@


1.7
log
@When switching to git for development, upstream adopted a new archive
layout for distfiles at http://archive.xfce.org/src/.
Adapt xfce4.port.mk to new paths for MASTER_SITES.
Now xfce4-related ports are divided in 5 categories : core, goodies,
artwork, panel plugins and thunar plugins.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.6 2009/04/28 19:37:29 landry Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.6.1
@


1.6
log
@Bump for Xfce 4.6.1 update (which is ok ajacoutot@@, no objections steven@@)
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.5 2009/03/08 17:03:13 landry Exp $
d3 2
a4 2
# Module for Xfce related ports, divided into three categories:
# core, goodies, plugins.
d23 2
d33 1
a33 1
MASTER_SITES?=	http://goodies.xfce.org/releases/xfce4-${XFCE_PLUGIN}-plugin/
d41 1
a41 1
MASTER_SITES?=	http://goodies.xfce.org/releases/${XFCE_GOODIE}/
d43 11
d57 1
a57 1
MASTER_SITES?=	http://www.xfce.org/archive/xfce-${XFCE_DESKTOP_VERSION}/src/
@


1.5
log
@Bump to Xfce 4.6.0 here in preparation of the whole update.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.4 2008/11/06 15:34:46 landry Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.6.0
@


1.4
log
@Maintenance update to Xfce 4.4.3, bugfix and translation release.
See http://www.xfce.org/documentation/changelogs/4.4.3.

Fixes some bugs which surfaced on amd64 since Glib update, some patches
are now integrated upstream.
While here, update PLISTs and use pkg_subst -c in xfce4-session/Makefile.

diff reads ok to ajacoutot@@, go ahead jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.3 2008/07/07 12:06:04 landry Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.4.3
@


1.3
log
@Some fixes to x11/xfce4 module : DIST_SUBDIR, CONFIGURE_STYLE and USE_X11
are already defined in Makefile.inc, and putting them in the module was a
bad idea.
While here, remove temporarly myself as MAINTAINER, this info will also end
up in Makefile.inc when all ports are converted to use the module, like
it's done for gnome.
Also, conditionally define DISTNAME for XFCE_PLUGIN case, it's needed by
verve-plugin.

Requested by, discussed with and ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.2 2008/06/14 17:21:35 landry Exp $
d6 1
a6 1
XFCE_DESKTOP_VERSION=	4.4.2
@


1.2
log
@Oops, no cookie for me. Doesn't impact already converted ports though.
@
text
@d1 1
a1 1
# $OpenBSD: xfce4.port.mk,v 1.1 2008/06/14 16:15:16 landry Exp $
a7 1
DIST_SUBDIR=	xfce4
a8 2
MAINTAINER?=	Landry Breuil <gaston@@gcu.info>
USE_X11?=	Yes
d32 1
a32 1
DISTNAME=	xfce4-${XFCE_PLUGIN}-plugin-${XFCE_VERSION}
a49 1
CONFIGURE_STYLE?=gnu
@


1.1
log
@Add a x11/xfce4 module, ideas largely borrowed from x11/gnome module.
This will greatly help when updating to the upcoming 4.6. Also shrinks a lot
port Makefiles, which will be soon converted to use it.
This will also deprecate Makefile.inc.

feedback ajacoutot@@ steven@@, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD$
d40 1
a40 1
HOMEPAGE=?	http://goodies.xfce.org/projects/applications/${XFCE_GOODIE}
d45 1
a45 1
HOMEPAGE=?	http://www.xfce.org/projects/${XFCE_PROJECT}
@

