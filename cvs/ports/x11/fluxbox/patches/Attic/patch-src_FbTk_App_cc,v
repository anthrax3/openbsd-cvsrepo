head	1.2;
access;
symbols
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2013.01.11.08.11.26;	author dcoppa;	state dead;
branches;
next	1.1;

1.1
date	2011.12.29.16.15.53;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to fluxbox-1.3.3.

Tested on sparc64.
Tested by bcallah@@ on amd64 and loongson.

OK bcallah@@
@
text
@$OpenBSD: patch-src_FbTk_App_cc,v 1.1 2011/12/29 16:15:53 dcoppa Exp $

Make startup failure easier to diagnose
(upstream git commit afa870802ba4296a4ce8c2b9185250f8da1124ca)

--- src/FbTk/App.cc.orig	Sat Oct 29 15:46:15 2011
+++ src/FbTk/App.cc	Thu Dec 29 16:41:30 2011
@@@@ -60,8 +60,13 @@@@ App::App(const char *displayname):m_done(false), m_dis
     if (displayname != 0 && displayname[0] == '\0')
         displayname = 0;
     m_display = XOpenDisplay(displayname);
-    if (!m_display)
-        throw std::string("Couldn't connect to XServer");
+    if (!m_display) {
+        if (displayname) {
+            throw std::string("Couldn't connect to XServer") + displayname;
+        } else {
+            throw std::string("Couldn't connect to XServer passing null display");
+        }
+    }
 
     FbStringUtil::init();
 }
@


1.1
log
@Some fixes here and there, from upstream git.
@
text
@d1 1
a1 1
$OpenBSD$
@

