head	1.3;
access;
symbols
	OPENBSD_4_2:1.2.0.24
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.22
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.20
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.18
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.16
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.14
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.12
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.10
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.8
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.6
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.4
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2;
locks; strict;
comment	@ * @;


1.3
date	2007.11.18.12.55.58;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2002.03.07.20.00.19;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.12.08.31.48;	author brad;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- update eterm to 0.9.4
- rename/regen some patches
@
text
@--- src/utmp.c.orig	Wed Sep 29 18:16:31 1999
+++ src/utmp.c	Thu Mar  7 20:46:30 2002
@@@@ -68,7 +68,7 @@@@ static const char cvs_ident[] = "$Id: ut
 #ifdef HAVE_LASTLOG_H
 # include <lastlog.h>
 #endif
-#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__bsdi__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__bsdi__)
 # include <ttyent.h>
 #endif
 
@@@@ -273,7 +273,7 @@@@ cleanutent(void)
 #else /* USE_SYSV_UTMP */
 /* BSD utmp support */
 
-#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__bsdi__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__bsdi__)
 
 /* used to hold the line we are using */
 static char ut_line[32];
@@@@ -321,7 +321,7 @@@@ b_login(struct utmp *ut)
   }
 }
 
-#else /* __FreeBSD__ || NetBSD || BSDI */
+#else /* __FreeBSD__ || __NetBSD__ || __OpenBSD__ || __bsdi__ */
 static int utmp_pos = 0;	/* position of utmp-stamp */
 
 /*----------------------------------------------------------------------*
@@@@ -379,7 +379,7 @@@@ write_utmp(struct utmp *putmp)
   return rval;
 }
 
-#endif /* __FreeBSD__ || NetBSD || BSDI */
+#endif
 
 /*
  * make a utmp entry
@@@@ -402,7 +402,7 @@@@ makeutent(const char *pty, const char *h
     return;
   }
 
-#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__bsdi__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__bsdi__)
   strncpy(ut_line, pty, 31);
 
   strncpy(utmp.ut_line, pty, UT_LINESIZE);
@@@@ -411,7 +411,7 @@@@ makeutent(const char *pty, const char *h
   utmp.ut_time = time(NULL);
 
   b_login(&utmp);
-#else /* __FreeBSD__ || NetBSD || BSDI */
+#else /* __FreeBSD__ || __NetBSD__ || __OpenBSD__ || __bsdi__ */
   strncpy(utmp.ut_line, ut_id, sizeof(utmp.ut_line));
   strncpy(utmp.ut_name, pwent->pw_name, sizeof(utmp.ut_name));
   strncpy(utmp.ut_host, hostname, sizeof(utmp.ut_host));
@@@@ -428,10 +428,10 @@@@ makeutent(const char *pty, const char *h
 void
 cleanutent(void)
 {
-#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__bsdi__)
+#if defined(__FreeBSD__) || defined(__NetBSD__) || defined(__OpenBSD__) || defined(__bsdi__)
   logout(ut_line);
   logwtmp(ut_line, "", "");
-#else /* __FreeBSD__ */
+#else /* __FreeBSD__ || __NetBSD__ || __OpenBSD__ || __bsdi__ */
   FILE *fd;
 
   privileges(INVOKE);
@@@@ -445,7 +445,7 @@@@ cleanutent(void)
     fclose(fd);
   }
   privileges(REVERT);
-#endif /* __FreeBSD__ || NetBSD || BSDI */
+#endif 
 }
 
 #endif /* USE_SYSV_UTMP */
@


1.2
log
@rebuild patches using diff -u -p.

Comment out $HOME writing in themes/Makefile.in
@
text
@@


1.1
log
@- fix utmp handling
- tmpnam() -> mkstemp()
--
From: Cameron Lerch <opcode@@skylab.2y.net>
@
text
@d1 3
a3 3
--- src/utmp.c.orig	Wed Sep 29 09:16:31 1999
+++ src/utmp.c		Fri Aug 11 11:38:27 2000
@@@@ -68,7 +68,7 @@@@
d12 1
a12 1
@@@@ -273,7 +273,7 @@@@
d21 1
a21 1
@@@@ -321,7 +321,7 @@@@
d30 1
a30 1
@@@@ -379,7 +379,7 @@@@
d39 1
a39 1
@@@@ -402,7 +402,7 @@@@
d48 1
a48 1
@@@@ -411,7 +411,7 @@@@
d57 1
a57 1
@@@@ -428,10 +428,10 @@@@
d70 1
a70 1
@@@@ -445,7 +445,7 @@@@
@

