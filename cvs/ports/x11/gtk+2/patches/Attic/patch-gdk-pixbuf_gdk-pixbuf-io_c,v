head	1.12;
access;
symbols
	OPENBSD_4_8:1.11.0.4
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.10.0.2
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.7.0.6
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.4
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.2.0.4
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.12
date	2010.09.30.07.18.15;	author ajacoutot;	state dead;
branches;
next	1.11;

1.11
date	2009.10.04.18.17.57;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.04.21.13.01.18;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2008.12.20.19.37.19;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2008.11.18.12.36.49;	author landry;	state Exp;
branches;
next	1.7;

1.7
date	2007.04.23.16.29.05;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2006.05.22.01.49.07;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2006.01.07.07.10.19;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.13.06.23.58;	author marcm;	state Exp;
branches;
next	1.3;

1.3
date	2005.05.24.21.29.11;	author marcm;	state Exp;
branches;
next	1.2;

1.2
date	2004.06.22.03.15.03;	author marcm;	state Exp;
branches;
next	1.1;

1.1
date	2003.12.08.06.08.43;	author marcm;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Major update to gtk+2-2.22.0.
Take maintainership.
gdk-pixbuf is now a separate library.

ok jasper@@
@
text
@$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.11 2009/10/04 18:17:57 ajacoutot Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Sat Sep 12 04:58:36 2009
+++ gdk-pixbuf/gdk-pixbuf-io.c	Tue Sep 29 06:59:19 2009
@@@@ -305,7 +305,7 @@@@ gdk_pixbuf_get_module_file (void)
   gchar *result = g_strdup (g_getenv ("GDK_PIXBUF_MODULE_FILE"));
 
   if (!result)
-	  result = g_build_filename (GTK_SYSCONFDIR, "gtk-2.0", "gdk-pixbuf.loaders", NULL);
+	  result = g_build_filename ("/var/db", "gtk-2.0", "gdk-pixbuf.loaders", NULL);
 
   return result;
 }
@


1.11
log
@Update to version 2.18.1.

committing early so that we can work with the latest at upcoming p2k9.
any fallout, please let me know directly.
ok landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.10 2009/04/21 13:01:18 ajacoutot Exp $
@


1.10
log
@- remove workaround now that our default thread stack size has been
increased
@
text
@d1 4
a4 4
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.9 2008/12/20 19:37:19 ajacoutot Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Mon Nov 24 07:35:45 2008
+++ gdk-pixbuf/gdk-pixbuf-io.c	Sat Dec 20 17:32:11 2008
@@@@ -298,7 +298,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.9
log
@- work around an issue in gdk-pixbuf-io.c by lowering the default buffer
size so that we don't end up in memory access errors

This should fix several GTK apps crashes (eog and mail-notification come
to mind but there are others).

ok jasper@@
@
text
@d1 1
a1 5
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.8 2008/11/18 12:36:49 landry Exp $

Lower LOAD_BUFFER_SIZE so that we don't run into memory access issues.
See GNOME bugzilla #561938.

a3 9
@@@@ -49,7 +49,7 @@@@
 #endif
 
 #define SNIFF_BUFFER_SIZE 4096
-#define LOAD_BUFFER_SIZE 65536
+#define LOAD_BUFFER_SIZE 4096
 
 #ifndef GDK_PIXBUF_USE_GIO_MIME 
 static gint 
@


1.8
log
@Major update to Gtk+ 2.14.4, which now includes x11/gnome/gail.

Tested in several bulk builds by many, thanks!
Note that this temporarely breaks gtk2mm (and all -mm) ports, due to a
pending update to gtk2mm which needs fixing in libstdc++. This is being
worked on, as other known breakages. Report any fallout to ports@@.

Discussed at length with espie@@ naddy@@ bernd@@ steven@@ ajacoutot@@ jasper@@
ok ajacoutot@@ jasper@@
@
text
@d1 16
a16 3
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.7 2007/04/23 16:29:05 jasper Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Fri Sep 19 16:35:27 2008
+++ gdk-pixbuf/gdk-pixbuf-io.c	Sun Oct 19 20:04:31 2008
@


1.7
log
@update gtk+2 to 2.10.10

based on diffs by alek@@

ok'd by several, "go ahead" steven@@
tested by many, thanks!

(diff to unbreak libgnomeui will follow shortly)
@
text
@d1 4
a4 4
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.6 2006/05/22 01:49:07 brad Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Mon Mar 12 14:57:01 2007
+++ gdk-pixbuf/gdk-pixbuf-io.c	Fri Apr 20 19:19:51 2007
@@@@ -277,7 +277,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.6
log
@Update to GTK+ 2.8.17.
@
text
@d1 4
a4 4
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.5 2006/01/07 07:10:19 pvalchev Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Mon Oct  3 11:11:49 2005
+++ gdk-pixbuf/gdk-pixbuf-io.c	Sat May 13 16:52:41 2006
@@@@ -276,7 +276,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.5
log
@Go back to version 2.6.10 due to breakage related to cairo
@
text
@d1 4
a4 4
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.3 2005/05/24 21:29:11 marcm Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Sun Dec  5 04:43:47 2004
+++ gdk-pixbuf/gdk-pixbuf-io.c	Wed Mar 30 21:27:26 2005
@@@@ -258,7 +258,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.4
log
@Update to GTK+ 2.8.6

2.8 series release notes here:
http://mail.gnome.org/archives/gnome-announce-list/2005-August/msg00054.html

NOTE: GTK+ now uses the Cairo vector graphic library as well as depending
on a version of Pango with it as well.  This will at a minimum require
chanes to the WANTLIBS of depending ports.
@
text
@d2 3
a4 3
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Fri Jul 22 08:34:32 2005
+++ gdk-pixbuf/gdk-pixbuf-io.c	Tue Aug 23 22:16:42 2005
@@@@ -276,7 +276,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.3
log
@Update to GTK+ 2.6.7, the next release in the GTK cycle.
@
text
@d1 4
a4 4
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.2 2004/06/22 03:15:03 marcm Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	Sun Dec  5 04:43:47 2004
+++ gdk-pixbuf/gdk-pixbuf-io.c	Wed Mar 30 21:27:26 2005
@@@@ -258,7 +258,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.2
log
@Update to gtk+ 2.4.3 and friends.

Note: this will cause breakage in ports that set the various
*_DISABLE_DEPRECATED defines for gtk.  These weill be addressed
shortly.

ok pvalchev@@
@
text
@d1 4
a4 4
$OpenBSD: patch-gdk-pixbuf_gdk-pixbuf-io_c,v 1.1 2003/12/08 06:08:43 marcm Exp $
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	2004-03-15 06:28:45.000000000 -0800
+++ gdk-pixbuf/gdk-pixbuf-io.c	2004-03-30 22:55:18.000000000 -0800
@@@@ -229,7 +229,7 @@@@ gdk_pixbuf_get_module_file (void)
@


1.1
log
@I've been handling the gdk-pixbuf.loaders and gtk.immodules files all
wrong.  These are generated files that should be updated automagically by
ports whenever GDK loaders or GTK immodules respectivly are added.

As such, these files shouldn't live under /etc but under /var/db... and
they should be generated on package install instead of through funky
sed magic in the Makefile.

So now they are. :)

Oh and regen the PLIST, since, we're hacking the crap out of it anyway.
@
text
@d1 4
a4 4
$OpenBSD$
--- gdk-pixbuf/gdk-pixbuf-io.c.orig	2003-12-07 10:40:38.000000000 -0800
+++ gdk-pixbuf/gdk-pixbuf-io.c	2003-12-07 10:43:24.000000000 -0800
@@@@ -224,7 +224,7 @@@@ gdk_pixbuf_get_module_file (void)
@

