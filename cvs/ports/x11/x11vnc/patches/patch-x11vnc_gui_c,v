head	1.5;
access;
symbols
	OPENBSD_6_2:1.5.0.30
	OPENBSD_6_2_BASE:1.5
	OPENBSD_6_1:1.5.0.28
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.26
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.22
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.24
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.5.0.20
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.18
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.5.0.16
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.5.0.14
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.5.0.12
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.10
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.8
	OPENBSD_5_0:1.5.0.6
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.4
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.4.0.4
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3;
locks; strict;
comment	@# @;


1.5
date	2010.04.02.00.42.25;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.06.23.21.11.17;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.02.15.12.02.14;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2009.02.15.10.01.43;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.02.15.09.47.48;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to 0.9.9
@
text
@$OpenBSD: patch-x11vnc_gui_c,v 1.4 2009/06/23 21:11:17 sthen Exp $
--- x11vnc/gui.c.orig	Mon Dec 21 04:58:10 2009
+++ x11vnc/gui.c	Wed Dec 23 22:02:45 2009
@@@@ -263,9 +263,8 @@@@ static void sigusr1 (int sig) {
 
 /* Most of the following mess is for wish on Solaris: */
 
-static char *extra_path = ":/usr/local/bin:/usr/bin/X11:/usr/sfw/bin"
-	    ":/usr/X11R6/bin:/usr/openwin/bin:/usr/dt/bin:/opt/sfw/bin";
-static char *wishes[] = {"wish8.4", "wish", "wish8.3", "wish8.5", "wish8.6", "wish8.7", "wishx", "wish8.0", NULL};
+static char *extra_path = ":${PREFIX}/bin:${LOCALBASE}/bin:${X11BASE}/bin";
+static char *wishes[] = {"wish${MODTK_VERSION}", NULL};
 
 static void run_gui(char *gui_xdisplay, int connect_to_x11vnc, int start_x11vnc,
     int simple_gui, pid_t parent, char *gui_opts) {
@


1.4
log
@update x11vnc to 0.9.5
@
text
@d1 6
a6 6
$OpenBSD: patch-x11vnc_gui_c,v 1.3 2009/02/15 12:02:14 sthen Exp $
--- x11vnc/gui.c.orig	Sun Mar 15 22:04:58 2009
+++ x11vnc/gui.c	Tue Jun 23 21:59:21 2009
@@@@ -261,9 +261,8 @@@@ static void sigusr1 (int sig) {
 	if (0) sig = 0;
 }
d9 2
a10 2
-	    ":/usr/X11R6/bin:/usr/openwin/bin:/usr/dt/bin";
-static char *wishes[] = {"wish8.4", "wish", "wish8.3", "wish8.5", "wish8.0", NULL};
d12 1
a12 1
+static char *wishes[] = {"wish${MODTK_VERSION}", "wish8.5", "wish8.4", "wish", NULL};
@


1.3
log
@the path in gui.c is used to find both wish (installed by tk which is a
different port, so, LOCALBASE), _and_ x11vnc (installed by the current port,
so PREFIX). fixit accordingly, for correctness and to cater for whoever
might like the pain of installing different ports with different prefixes.

discussed with/ok ajacoutot
@
text
@d1 4
a4 4
$OpenBSD: patch-x11vnc_gui_c,v 1.2 2009/02/15 10:01:43 sthen Exp $
--- x11vnc/gui.c.orig	Tue Dec  9 03:41:01 2008
+++ x11vnc/gui.c	Sun Feb 15 09:55:50 2009
@@@@ -229,9 +229,8 @@@@ static void sigusr1 (int sig) {
@


1.2
log
@fix hardcoded paths in gui.c; prompted by ajacoutot. bump package.
@
text
@d1 1
a1 1
$OpenBSD: patch-x11vnc_gui_c,v 1.1 2009/02/15 09:47:48 sthen Exp $
d11 1
a11 1
+static char *extra_path = ":${PREFIX}/bin:${X11BASE}/bin";
@


1.1
log
@- add dependency on Tk for the gui; diff from Mikolaj Kucharski,
reworked to use MODULES=x11/tk (suggested by steven@@) and Makefile
cleanup by Stuart Cassoff, thanks to both

- take MAINTAINER, previous maintainer didn't respond to my past emails
@
text
@d1 6
a6 4
$OpenBSD$
--- x11vnc/gui.c.orig	Mon Dec  8 22:41:01 2008
+++ x11vnc/gui.c	Sun Feb 15 02:07:06 2009
@@@@ -231,7 +231,7 @@@@ static void sigusr1 (int sig) {
d8 2
a9 2
 static char *extra_path = ":/usr/local/bin:/usr/bin/X11:/usr/sfw/bin"
 	    ":/usr/X11R6/bin:/usr/openwin/bin:/usr/dt/bin";
d11 1
@

