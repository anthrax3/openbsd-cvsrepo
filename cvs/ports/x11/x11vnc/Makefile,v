head	1.41;
access;
symbols
	OPENBSD_6_1:1.41.0.4
	OPENBSD_6_1_BASE:1.41
	OPENBSD_6_0:1.41.0.2
	OPENBSD_6_0_BASE:1.41
	OPENBSD_5_9:1.39.0.4
	OPENBSD_5_9_BASE:1.39
	OPENBSD_5_8:1.39.0.6
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.39.0.2
	OPENBSD_5_7_BASE:1.39
	OPENBSD_5_6:1.38.0.6
	OPENBSD_5_6_BASE:1.38
	OPENBSD_5_5:1.38.0.4
	OPENBSD_5_5_BASE:1.38
	OPENBSD_5_4:1.38.0.2
	OPENBSD_5_4_BASE:1.38
	OPENBSD_5_3:1.37.0.2
	OPENBSD_5_3_BASE:1.37
	OPENBSD_5_2:1.36.0.4
	OPENBSD_5_2_BASE:1.36
	OPENBSD_5_1_BASE:1.36
	OPENBSD_5_1:1.36.0.2
	OPENBSD_5_0:1.33.0.2
	OPENBSD_5_0_BASE:1.33
	OPENBSD_4_9:1.31.0.2
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.13.0.2
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.12.0.2
	OPENBSD_4_6_BASE:1.12
	OPENBSD_4_5:1.8.0.2
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.1.1.0.12
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.10
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.8
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.6
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	sturm_20041202:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.41
date	2016.03.11.20.28.33;	author naddy;	state Exp;
branches;
next	1.40;
commitid	UYLP8TE6V7RS2GhJ;

1.40
date	2016.03.08.12.04.17;	author sthen;	state Exp;
branches;
next	1.39;
commitid	aBLTFfOds7zEfJOJ;

1.39
date	2014.09.09.11.10.50;	author naddy;	state Exp;
branches;
next	1.38;
commitid	0KDco3J7fszxQXrU;

1.38
date	2013.03.11.11.46.17;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2012.12.17.19.02.48;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2011.09.19.21.33.42;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2011.09.16.12.29.17;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2011.09.15.20.27.29;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2011.03.17.16.48.47;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2011.03.09.18.51.49;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2011.01.19.21.37.43;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2011.01.17.10.10.29;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2011.01.05.16.05.54;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2010.12.27.14.50.24;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2010.12.13.16.13.04;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2010.12.11.12.57.37;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.22.08.37.05;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.09.10.52.22;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2010.10.24.21.15.35;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.19.08.14.00;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2010.09.15.08.21.09;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2010.09.03.15.58.12;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.08.22.16.56.34;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.07.31.09.35.29;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.07.30.08.03.00;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.04.02.00.42.25;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.03.30.19.57.28;	author jcs;	state Exp;
branches;
next	1.13;

1.13
date	2009.12.21.20.46.03;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2009.06.23.21.11.17;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2009.06.03.20.27.56;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.03.11.21.40.42;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2009.03.07.12.43.45;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.02.15.12.02.14;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.02.15.10.01.43;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.02.15.09.47.48;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.02.02.23.27.48;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.16.02.46.22;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.10.28.01.44.01;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2007.09.15.20.04.26;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.02.21.21.23;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.02.21.21.23;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.41
log
@garbage collect CONFIGURE_SHARED
@
text
@# $OpenBSD: Makefile,v 1.40 2016/03/08 12:04:17 sthen Exp $

COMMENT =		VNC server for real X displays

DISTNAME =		x11vnc-0.9.13
REVISION =		4

CATEGORIES =		x11
HOMEPAGE =		http://www.karlrunge.com/x11vnc/

MAINTAINER =		Stuart Henderson <sthen@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += X11 Xdamage Xext Xfixes Xinerama Xrandr Xtst c crypto
WANTLIB += pthread ssl z jpeg avahi-client avahi-common

USE_GROFF =	Yes

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=libvncserver/}
MODULES =		x11/tk
RUN_DEPENDS =		devel/desktop-file-utils \
			${MODTK_RUN_DEPENDS}
LIB_DEPENDS =		graphics/jpeg \
			net/avahi

AUTOCONF_VERSION =	2.59
CONFIGURE_STYLE =	autoconf
CONFIGURE_ARGS +=	--with-x \
			--with-avahi
CONFIGURE_ENV +=	CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

REORDER_DEPENDENCIES =	${FILESDIR}/automake.dep

pre-configure:
	${SUBST_CMD} ${WRKSRC}/x11vnc/gui.c

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/x11vnc
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/x11vnc

.include <bsd.port.mk>
@


1.40
log
@mark conflict in plist
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/09/09 11:10:50 naddy Exp $
d30 1
a30 2
CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--with-x \
@


1.39
log
@regcomp now supports \<word\>; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/03/11 11:46:17 espie Exp $
d6 1
a6 1
REVISION =		3
@


1.38
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/12/17 19:02:48 naddy Exp $
d6 1
a6 1
REVISION =		2
@


1.37
log
@Use posix_openpt() to open pty.
Drop obsolete pthread patch while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/09/19 21:33:42 ajacoutot Exp $
a14 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.36
log
@When using xdm(1), x11vnc is started before the display manager in which
case we don't know the auth file. Use the '-auth guess' option to enable
the x11vnc heuristic to find the correct file.
While here, remove -display :0 which is the default.

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/09/16 12:29:17 espie Exp $
d6 1
a6 1
REVISION =		1
d31 2
a32 1
CONFIGURE_STYLE =	gnu
d38 2
@


1.35
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/09/15 20:27:29 sthen Exp $
d6 1
a6 1
REVISION =		0
@


1.34
log
@update to x11vnc 0.9.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/03/17 16:48:47 ajacoutot Exp $
d6 1
@


1.33
log
@This can use rc_bg now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/03/09 18:51:49 ajacoutot Exp $
d5 1
a5 3
DISTNAME =		x11vnc-0.9.12

REVISION =		9
@


1.32
log
@Remove now uneeded redirection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/01/19 21:37:43 sthen Exp $
d7 1
a7 1
REVISION =		8
@


1.31
log
@Disable use of xrecord for now; it triggers X server crashes reported by
ajacoutot@@ and repeated by myself on some systems (it seems to be display
adapter-dependent).  https://bugs.freedesktop.org/show_bug.cgi?id=30032
appears to be relevant.  ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/01/17 10:10:29 sthen Exp $
d7 1
a7 1
REVISION =		7
@


1.30
log
@two x11vnc portability fixes from Mikolaj Kucharski (thanks for
your patience and gentle reminders :)

- replace GNU grep syntax for end-of-word with something that works
with /usr/bin/grep

- fix path to su(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/01/05 16:05:54 ajacoutot Exp $
d7 1
a7 1
REVISION =		6
@


1.29
log
@Make use of rcexec.
While here, force postgresql to quit in rc_stop, ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/12/27 14:50:24 ajacoutot Exp $
d7 1
a7 1
REVISION =		5
@


1.28
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/12/24 10:40:06 ajacoutot Exp $
d7 1
a7 1
REVISION =		4
@


1.27
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/12/13 16:13:04 ajacoutot Exp $
d7 1
a7 1
REVISION =		3
@


1.26
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/12/11 12:57:37 ajacoutot Exp $
d7 1
a7 1
REVISION =		2
@


1.25
log
@Move these to rc_reload=NO.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/22 08:37:05 espie Exp $
d7 1
a7 1
REVISION =		1
@


1.24
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/09 10:52:22 ajacoutot Exp $
d7 1
a7 1
REVISION =		0
@


1.23
log
@Add rc script.

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/10/24 21:15:35 ajacoutot Exp $
d27 1
a27 1
RUN_DEPENDS =		::devel/desktop-file-utils \
d29 2
a30 2
LIB_DEPENDS =		::graphics/jpeg \
			::net/avahi
@


1.22
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/19 08:14:00 espie Exp $
d6 2
@


1.21
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/09/15 08:21:09 sthen Exp $
a20 1
USE_X11 =		Yes
@


1.20
log
@update x11vnc to 0.9.12, rolling in many of the patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/09/03 15:58:12 sthen Exp $
d22 1
@


1.19
log
@Fix build with new libX11 Xdefs.h (who'd have thought that other
software might use "pointer" as a variable name...). From upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/08/22 16:56:34 sthen Exp $
d5 1
a5 2
DISTNAME =		x11vnc-0.9.11
REVISION=		0
@


1.18
log
@update x11vnc to 0.9.11, ok with ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/07/31 09:35:29 ajacoutot Exp $
d6 1
@


1.17
log
@Update to x11vnc-0.9.10 which fixes several regressions with the latest X
server.

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/07/30 08:03:00 ajacoutot Exp $
d5 1
a5 2
DISTNAME =		x11vnc-0.9.10
REVISION =		0
@


1.16
log
@Move move to new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/04/02 00:42:25 sthen Exp $
d5 1
a5 1
DISTNAME =		x11vnc-0.9.9
@


1.15
log
@update to 0.9.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/03/30 19:57:28 jcs Exp $
d6 1
d20 1
a20 1
WANTLIB += pthread ssl z
d28 2
a29 2
LIB_DEPENDS =		jpeg::graphics/jpeg \
			avahi-client,avahi-common::net/avahi
@


1.14
log
@in the (lengthy) help output, display the path where our xdm is
configured to write authfiles to help the user find them

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/12/21 20:46:03 ajacoutot Exp $
d5 1
a5 2
DISTNAME =		x11vnc-0.9.7
PKGNAME =		${DISTNAME}p1
@


1.13
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/06/23 21:11:17 sthen Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME}p0
@


1.12
log
@update x11vnc to 0.9.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/06/03 20:27:56 ajacoutot Exp $
d6 2
@


1.11
log
@- add avahi support as agreed with sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/03/11 21:40:42 sthen Exp $
d5 1
a5 2
DISTNAME =		x11vnc-0.9.6
PKGNAME =		${DISTNAME}p6
@


1.10
log
@bump following tk dep changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/03/07 12:43:45 sthen Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME}p5
d21 2
d27 2
a28 1
LIB_DEPENDS =		jpeg::graphics/jpeg
d32 2
a33 1
			--with-x --without-avahi
@


1.9
log
@fix typo (CONFIURE_SHARED -> CONFIGURE_SHARED) and bump; Benoit Lecocq
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/02/15 12:02:14 sthen Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME}p4
@


1.8
log
@the path in gui.c is used to find both wish (installed by tk which is a
different port, so, LOCALBASE), _and_ x11vnc (installed by the current port,
so PREFIX). fixit accordingly, for correctness and to cater for whoever
might like the pain of installing different ports with different prefixes.

discussed with/ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/02/15 10:01:43 sthen Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME}p3
d28 1
a28 1
CONFIGURE_ARGS +=	${CONFIURE_SHARED} \
@


1.7
log
@fix hardcoded paths in gui.c; prompted by ajacoutot. bump package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/02/15 09:47:48 sthen Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME}p2
@


1.6
log
@- add dependency on Tk for the gui; diff from Mikolaj Kucharski,
reworked to use MODULES=x11/tk (suggested by steven@@) and Makefile
cleanup by Stuart Cassoff, thanks to both

- take MAINTAINER, previous maintainer didn't respond to my past emails
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/02/02 23:27:48 ajacoutot Exp $
d6 1
a6 1
PKGNAME =		${DISTNAME}p1
@


1.5
log
@- add jpeg compression support
- explicitely disable avahi, as requested by sthen@@

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/01/16 02:46:22 sthen Exp $
d3 1
a3 1
COMMENT=	VNC server for real X displays
d5 4
a8 3
DISTNAME=	x11vnc-0.9.6
PKGNAME=	${DISTNAME}p0
CATEGORIES=     x11
d10 1
a10 1
HOMEPAGE=	http://www.karlrunge.com/x11vnc/
d12 20
a31 1
MAINTAINER=	Craig Barraclough <craigba@@creative.com.au>
d33 2
a34 21
# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB=	X11 Xext Xinerama Xtst c pthread z
WANTLIB+=	Xdamage Xfixes Xrandr crypto ssl

RUN_DEPENDS=	::devel/desktop-file-utils
LIB_DEPENDS=	jpeg::graphics/jpeg

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=libvncserver/}

USE_X11=	Yes

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS+=--with-x \
		--without-avahi
@


1.4
log
@update to 0.9.6; maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/10/28 01:44:01 sthen Exp $
d6 1
d23 1
d30 4
a33 1
CONFIGURE_ARGS+=--with-x
@


1.3
log
@Update to 0.9.5, based on ports@@ submission from bsd at openbsd.rutgers.edu
after maintainer timeout. Drop several patches that are now included in the
source; keep -pthread patch; install the manpage and the modified Java
vncviewer applet; regen plist.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/09/15 20:04:26 merdely Exp $
d5 1
a5 1
DISTNAME=	x11vnc-0.9.5
d12 1
a12 1
# GPL
d20 2
@


1.2
log
@Remove surrounding quotes in COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/12/02 21:21:23 sturm Exp $
d5 1
a5 2
VERSION=	0.6.2
DISTNAME=	x11vnc-${VERSION}
d19 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=	"VNC server for real X displays"
@


1.1.1.1
log
@Initial import of x11vnc 0.6.2

x11vnc allows one to remotely view and interact with real X displays (i.e. a
display corresponding to a physical monitor, keyboard, and mouse) with any
VNC viewer. In this way it plays the role for Unix/X11 that WinVNC plays for
Windows.

from Craig Barraclough <craigba at creative.com.au>
@
text
@@
