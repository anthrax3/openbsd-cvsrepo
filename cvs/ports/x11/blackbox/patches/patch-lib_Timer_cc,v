head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.12
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.8
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2013.09.01.12.49.11;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.1
log
@blackbox patches from patrick keshishian,

- improvement in handling of UTF-8 window titles, see
http://marc.info/?l=openbsd-ports&m=137339931231574&w=2

- 64-bit time_t fix

- avoid "deprecated conversion from string constant to 'char*'" warnings

also sync wantlib and drop USE_GROFF while there.
@
text
@$OpenBSD$

64bit time_t fix.

--- lib/Timer.cc.orig	Fri Mar 18 01:07:09 2005
+++ lib/Timer.cc	Sat Aug 17 22:43:13 2013
@@@@ -28,8 +28,7 @@@@
 
 
 bt::timeval::timeval(const ::timeval &t)
-  : tv_sec(t.tv_sec), tv_usec(t.tv_usec)
-{ }
+{ tv_sec = t.tv_sec; tv_usec = t.tv_usec; }
 
 
 bool bt::timeval::operator<(const timeval &tv)
@@@@ -105,7 +104,7 @@@@ void bt::Timer::adjustStartTime(const timeval &offset)
 { _start += offset; }
 
 
-void bt::Timer::setTimeout(long t) {
+void bt::Timer::setTimeout(time_t t) {
   _timeout.tv_sec = t / 1000;
   _timeout.tv_usec = t % 1000;
   _timeout.tv_usec *= 1000;
@
