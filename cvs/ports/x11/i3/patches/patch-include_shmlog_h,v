head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.07.11.15.49.58;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	dpkYaZL7eWFGPiTd;

1.2
date	2013.08.13.10.01.55;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2013.06.02.11.24.06;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.3
log
@
Update to i3-4.8 plus fixes.

Initial diff by Theo Buehler <theo AT math DOT ethz DOT ch>
@
text
@$OpenBSD: patch-include_shmlog_h,v 1.2 2013/08/13 10:01:55 dcoppa Exp $

OpenBSD lacks pthread_condattr_setpshared()

--- include/shmlog.h.orig	Sun Jun 15 19:12:43 2014
+++ include/shmlog.h	Thu Jul  3 21:06:32 2014
@@@@ -11,7 +11,9 @@@@
 #pragma once
 
 #include <stdint.h>
+#if !defined(__OpenBSD__)
 #include <pthread.h>
+#endif
 
 /* Default shmlog size if not set by user. */
 extern const int default_shmlog_size;
@@@@ -37,8 +39,10 @@@@ typedef struct i3_shmlog_header {
      * and don’t matter — clients use an equality check (==). */
     uint32_t wrap_count;
 
+#if !defined(__OpenBSD__)
     /* pthread condvar which will be broadcasted whenever there is a new
      * message in the log. i3-dump-log uses this to implement -f (follow, like
      * tail -f) in an efficient way. */
     pthread_cond_t condvar;
+#endif
 } i3_shmlog_header;
@


1.2
log
@Update to i3-4.6

ok tobiasu@@, abieber@@
@
text
@d1 1
a1 1
$OpenBSD: patch-include_shmlog_h,v 1.1 2013/06/02 11:24:06 dcoppa Exp $
d5 4
a8 4
--- include/shmlog.h.orig	Wed Aug  7 20:50:24 2013
+++ include/shmlog.h	Mon Aug 12 15:19:02 2013
@@@@ -12,7 +12,9 @@@@
 #define I3_I3_SHMLOG_H
d17 1
a17 1
@@@@ -38,10 +40,12 @@@@ typedef struct i3_shmlog_header {
a27 2
 
 #endif
@


1.1
log
@Enable SHM logging, now that we have shm_open() and friends.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- include/shmlog.h.orig	Sun Jun  2 11:09:38 2013
+++ include/shmlog.h	Sun Jun  2 11:11:22 2013
d15 3
a17 3
 /*
  * Header of the shmlog file. Used by i3/src/log.c and i3/i3-dump-log/main.c.
@@@@ -35,10 +37,12 @@@@ typedef struct i3_shmlog_header {
@

