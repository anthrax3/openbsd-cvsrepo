head	1.11;
access;
symbols
	OPENBSD_6_0:1.11.0.2
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.8.0.4
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.2
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.7.0.2
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2;
locks; strict;
comment	@# @;


1.11
date	2016.03.09.09.25.51;	author dcoppa;	state Exp;
branches;
next	1.10;
commitid	5e0lb25PYzcoURwg;

1.10
date	2015.10.04.08.48.12;	author dcoppa;	state Exp;
branches;
next	1.9;
commitid	VRvZAaOZt8xtMVjt;

1.9
date	2015.03.17.15.39.48;	author dcoppa;	state Exp;
branches;
next	1.8;
commitid	WQl7M1uD6B2NjHh4;

1.8
date	2014.07.11.15.49.58;	author dcoppa;	state Exp;
branches;
next	1.7;
commitid	dpkYaZL7eWFGPiTd;

1.7
date	2014.01.24.10.08.38;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2014.01.22.13.48.38;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2014.01.15.08.17.17;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2013.06.02.11.24.06;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2013.05.16.18.42.30;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2012.12.13.12.10.13;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2012.09.21.17.16.14;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.11
log
@
Update to i3-4.12
Added halex@@'s window hints fix
Fixed trailing whitespace in pkg/DESCR (spotted by Josh Grosse)

Tested by tb@@ and Josh Grosse
OK tb@@
@
text
@$OpenBSD: patch-src_i3_mk,v 1.10 2015/10/04 08:48:12 dcoppa Exp $

OpenBSD lacks pthread_condattr_setpshared(), so no need to link
with libpthread here.

--- src/i3.mk.orig	Wed Sep 30 08:55:10 2015
+++ src/i3.mk	Sun Oct  4 10:06:37 2015
@@@@ -6,7 +6,11 @@@@ i3_SOURCES           := $(filter-out $(i3_SOURCES_GENE
 i3_HEADERS_CMDPARSER := $(wildcard include/GENERATED_*.h)
 i3_HEADERS           := $(filter-out $(i3_HEADERS_CMDPARSER),$(wildcard include/*.h))
 i3_CFLAGS             = $(XKB_COMMON_CFLAGS) $(XKB_COMMON_X11_CFLAGS) $(XCB_CFLAGS) $(XCB_KBD_CFLAGS) $(XCB_WM_CFLAGS) $(XCB_CURSOR_CFLAGS) $(PANGO_CFLAGS) $(YAJL_CFLAGS) $(LIBEV_CFLAGS) $(PCRE_CFLAGS) $(LIBSN_CFLAGS)
+ifneq ($(UNAME),OpenBSD)
 i3_LIBS               = $(XKB_COMMON_LIBS) $(XKB_COMMON_X11_LIBS) $(XCB_LIBS) $(XCB_XKB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(XCB_CURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm -lpthread
+else
+i3_LIBS               = $(XKB_COMMON_LIBS) $(XKB_COMMON_X11_LIBS) $(XCB_LIBS) $(XCB_XKB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(XCB_CURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm
+endif
 
 # When using clang, we use pre-compiled headers to speed up the build. With
 # gcc, this actually makes the build slower.
@@@@ -79,20 +83,17 @@@@ install-i3: i3
 	$(INSTALL) -d -m 0755 $(DESTDIR)$(EXEC_PREFIX)/include/i3
 	$(INSTALL) -d -m 0755 $(DESTDIR)$(PREFIX)/share/xsessions
 	$(INSTALL) -d -m 0755 $(DESTDIR)$(PREFIX)/share/applications
-	$(INSTALL) -m 0755 i3 $(DESTDIR)$(EXEC_PREFIX)/bin/
+	$(INSTALL_PROGRAM) i3 $(DESTDIR)$(EXEC_PREFIX)/bin/
 	$(LN) -sf i3 $(DESTDIR)$(EXEC_PREFIX)/bin/i3-with-shmlog
-	$(INSTALL) -m 0755 i3-migrate-config-to-v4 $(DESTDIR)$(EXEC_PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-sensible-editor $(DESTDIR)$(EXEC_PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-sensible-pager $(DESTDIR)$(EXEC_PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-sensible-terminal $(DESTDIR)$(EXEC_PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-save-tree $(DESTDIR)$(EXEC_PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-dmenu-desktop $(DESTDIR)$(EXEC_PREFIX)/bin/
-	test -e $(DESTDIR)$(SYSCONFDIR)/i3/config || $(INSTALL) -m 0644 i3.config $(DESTDIR)$(SYSCONFDIR)/i3/config
-	test -e $(DESTDIR)$(SYSCONFDIR)/i3/config.keycodes || $(INSTALL) -m 0644 i3.config.keycodes $(DESTDIR)$(SYSCONFDIR)/i3/config.keycodes
-	$(INSTALL) -m 0644 i3.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3.desktop
-	$(INSTALL) -m 0644 i3-with-shmlog.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3-with-shmlog.desktop
-	$(INSTALL) -m 0644 i3.applications.desktop $(DESTDIR)$(PREFIX)/share/applications/i3.desktop
-	$(INSTALL) -m 0644 include/i3/ipc.h $(DESTDIR)$(EXEC_PREFIX)/include/i3/
+	$(INSTALL_SCRIPT) i3-migrate-config-to-v4 $(DESTDIR)$(EXEC_PREFIX)/bin/
+	$(INSTALL_SCRIPT) i3-save-tree $(DESTDIR)$(EXEC_PREFIX)/bin/
+	$(INSTALL_SCRIPT) i3-dmenu-desktop $(DESTDIR)$(EXEC_PREFIX)/bin/
+	$(INSTALL_DATA) i3.config $(DESTDIR)$(SYSCONFDIR)/i3/config
+	$(INSTALL_DATA) i3.config.keycodes $(DESTDIR)$(SYSCONFDIR)/i3/config.keycodes
+	$(INSTALL_DATA) i3.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3.desktop
+	$(INSTALL_DATA) i3-with-shmlog.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3-with-shmlog.desktop
+	$(INSTALL_DATA) i3.applications.desktop $(DESTDIR)$(PREFIX)/share/applications/i3.desktop
+	$(INSTALL_DATA) include/i3/ipc.h $(DESTDIR)$(EXEC_PREFIX)/include/i3/
 
 clean-i3:
 	echo "[i3] Clean"
@


1.10
log
@
Update to i3-4.11
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.9 2015/03/17 15:39:48 dcoppa Exp $
d11 1
a11 1
 i3_CFLAGS             = $(XKB_COMMON_CFLAGS) $(XKB_COMMON_X11_CFLAGS) $(XCB_CFLAGS) $(XCB_KBD_CFLAGS) $(XCB_WM_CFLAGS) $(XCURSOR_CFLAGS) $(PANGO_CFLAGS) $(YAJL_CFLAGS) $(LIBEV_CFLAGS) $(PCRE_CFLAGS) $(LIBSN_CFLAGS)
d13 1
a13 1
 i3_LIBS               = $(XKB_COMMON_LIBS) $(XKB_COMMON_X11_LIBS) $(XCB_LIBS) $(XCB_XKB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(XCURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm -lpthread
d15 1
a15 1
+i3_LIBS               = $(XKB_COMMON_LIBS) $(XKB_COMMON_X11_LIBS) $(XCB_LIBS) $(XCB_XKB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(XCURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm
@


1.9
log
@
Update to i3-4.9.1

new dependency on x11/xkbcommon
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.8 2014/07/11 15:49:58 dcoppa Exp $
d6 2
a7 2
--- src/i3.mk.orig	Sun Jun 15 19:12:43 2014 
+++ src/i3.mk		Wed Jul  2 19:18:24 2014 
d11 1
a11 1
 i3_CFLAGS             = $(XKB_COMMON_CFLAGS) $(XCB_CFLAGS) $(XCB_KBD_CFLAGS) $(XCB_WM_CFLAGS) $(XCURSOR_CFLAGS) $(PANGO_CFLAGS) $(YAJL_CFLAGS) $(LIBEV_CFLAGS) $(PCRE_CFLAGS) $(LIBSN_CFLAGS)
d13 1
a13 1
 i3_LIBS               = $(XKB_COMMON_LIBS) $(XCB_LIBS) $(XCB_XKB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(XCURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm -lpthread
d15 1
a15 1
+i3_LIBS               = $(XKB_COMMON_LIBS) $(XCB_LIBS) $(XCB_XKB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(XCURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm
d20 2
a21 2
@@@@ -75,20 +79,17 @@@@ install-i3: i3
 	$(INSTALL) -d -m 0755 $(DESTDIR)$(PREFIX)/include/i3
d24 9
a32 9
-	$(INSTALL) -m 0755 i3 $(DESTDIR)$(PREFIX)/bin/
+	$(INSTALL_PROGRAM) i3 $(DESTDIR)$(PREFIX)/bin/
 	$(LN) -sf i3 $(DESTDIR)$(PREFIX)/bin/i3-with-shmlog
-	$(INSTALL) -m 0755 i3-migrate-config-to-v4 $(DESTDIR)$(PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-sensible-editor $(DESTDIR)$(PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-sensible-pager $(DESTDIR)$(PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-sensible-terminal $(DESTDIR)$(PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-save-tree $(DESTDIR)$(PREFIX)/bin/
-	$(INSTALL) -m 0755 i3-dmenu-desktop $(DESTDIR)$(PREFIX)/bin/
d38 4
a41 4
-	$(INSTALL) -m 0644 include/i3/ipc.h $(DESTDIR)$(PREFIX)/include/i3/
+	$(INSTALL_SCRIPT) i3-migrate-config-to-v4 $(DESTDIR)$(PREFIX)/bin/
+	$(INSTALL_SCRIPT) i3-save-tree $(DESTDIR)$(PREFIX)/bin/
+	$(INSTALL_SCRIPT) i3-dmenu-desktop $(DESTDIR)$(PREFIX)/bin/
d47 1
a47 1
+	$(INSTALL_DATA) include/i3/ipc.h $(DESTDIR)$(PREFIX)/include/i3/
@


1.8
log
@
Update to i3-4.8 plus fixes.

Initial diff by Theo Buehler <theo AT math DOT ethz DOT ch>
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.7 2014/01/24 10:08:38 dcoppa Exp $
d11 1
a11 1
 i3_CFLAGS             = $(XCB_CFLAGS) $(XCB_KBD_CFLAGS) $(XCB_WM_CFLAGS) $(X11_CFLAGS) $(XCURSOR_CFLAGS) $(PANGO_CFLAGS) $(YAJL_CFLAGS) $(LIBEV_CFLAGS) $(PCRE_CFLAGS) $(LIBSN_CFLAGS)
d13 1
a13 1
 i3_LIBS               = $(XCB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(X11_LIBS) $(XCURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm -lpthread
d15 1
a15 1
+i3_LIBS               = $(XCB_LIBS) $(XCB_KBD_LIBS) $(XCB_WM_LIBS) $(X11_LIBS) $(XCURSOR_LIBS) $(PANGO_LIBS) $(YAJL_LIBS) $(LIBEV_LIBS) $(PCRE_LIBS) $(LIBSN_LIBS) -lm
@


1.7
log
@
Update to i3-4.7.2
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.6 2014/01/22 13:48:38 dcoppa Exp $
d6 2
a7 2
--- src/i3.mk.orig	Tue Jan 21 19:21:08 2014
+++ src/i3.mk	Wed Jan 22 13:25:02 2014
d20 1
a20 1
@@@@ -73,19 +77,16 @@@@ install-i3: i3
d25 1
a25 1
+	${INSTALL_PROGRAM} i3 $(DESTDIR)$(PREFIX)/bin/
d31 1
d39 9
a47 8
+	${INSTALL_SCRIPT} i3-migrate-config-to-v4 $(DESTDIR)$(PREFIX)/bin/
+	${INSTALL_SCRIPT} i3-dmenu-desktop $(DESTDIR)$(PREFIX)/bin/
+	${INSTALL_DATA} i3.config $(DESTDIR)$(SYSCONFDIR)/i3/config
+	${INSTALL_DATA} i3.config.keycodes $(DESTDIR)$(SYSCONFDIR)/i3/config.keycodes
+	${INSTALL_DATA} i3.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3.desktop
+	${INSTALL_DATA} i3-with-shmlog.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3-with-shmlog.desktop
+	${INSTALL_DATA} i3.applications.desktop $(DESTDIR)$(PREFIX)/share/applications/i3.desktop
+	${INSTALL_DATA} include/i3/ipc.h $(DESTDIR)$(PREFIX)/include/i3/
@


1.6
log
@Bugfix update to i3-4.7.1
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.5 2014/01/15 08:17:17 dcoppa Exp $
d35 1
a35 1
-	$(INSTALL) -m 0644 i3-with-shmlog.xsession.desktop $(DESTDIR)$(PREFIX)/share/xsessions/i3.desktop
@


1.5
log
@
Add a clarifying comment
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.4 2013/06/02 11:24:06 dcoppa Exp $
d6 2
a7 2
--- src/i3.mk.orig	Mon Mar 18 22:43:36 2013
+++ src/i3.mk	Sun Jun  2 11:13:24 2013
d20 1
a20 1
@@@@ -73,17 +77,14 @@@@ install-i3: i3
d25 2
d35 1
a37 1
+	${INSTALL_PROGRAM} i3 $(DESTDIR)$(PREFIX)/bin/
d43 1
@


1.4
log
@Enable SHM logging, now that we have shm_open() and friends.

ok jasper@@
@
text
@d1 5
a5 1
$OpenBSD: patch-src_i3_mk,v 1.3 2013/05/16 18:42:30 dcoppa Exp $
@


1.3
log
@Update to i3-4.5.1

ok jasper@@, abieber@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_i3_mk,v 1.2 2012/12/13 12:10:13 dcoppa Exp $
d3 14
a16 2
+++ src/i3.mk	Mon May 13 08:27:23 2013
@@@@ -73,17 +73,14 @@@@ install-i3: i3
@


1.2
log
@Update to i3-4.4
@
text
@d1 4
a4 4
$OpenBSD: patch-src_i3_mk,v 1.1 2012/09/21 17:16:14 dcoppa Exp $
--- src/i3.mk.orig	Thu Dec 13 10:15:15 2012
+++ src/i3.mk	Thu Dec 13 10:19:39 2012
@@@@ -82,17 +82,14 @@@@ install-i3: i3
@


1.1
log
@Update to i3-4.3

OK jasper@@
@
text
@d1 4
a4 4
$OpenBSD$
--- src/i3.mk.orig	Fri Sep 21 11:56:21 2012
+++ src/i3.mk	Fri Sep 21 11:59:56 2012
@@@@ -69,16 +69,13 @@@@ install-i3: i3
d13 1
d21 1
@

