head	1.7;
access;
symbols
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.1.1.1.0.4
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.2
	jeremy_2011-Nov-15:1.1.1.1
	jeremy:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2013.07.05.14.56.38;	author zhuk;	state dead;
branches;
next	1.6;

1.6
date	2013.06.22.14.51.21;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.21.08.48.57;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.11.46.15;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2013.02.02.10.05.43;	author zhuk;	state Exp;
branches;
next	1.2;

1.2
date	2012.10.01.21.23.36;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2011.11.15.16.27.44;	author jeremy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.11.15.16.27.44;	author jeremy;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Remove x11/ruby-qt4, superseded by x11/kde4/ruby-qt now.

okay The Ruby Man AKA jeremy@@
@
text
@# $OpenBSD: Makefile,v 1.6 2013/06/22 14:51:21 dcoppa Exp $

# /usr/bin/ld: CMakeFiles/smokeqtcore.dir/x_4.cpp.o(.gnu.linkonce.t._ZN13__smokeqtcore9x_QBuffer4x_25EPN5Smoke9StackItemE+0x54): cannot reach 00000d7d___dynamic_cast+0, recompile with -ffunction-sections
#/usr/bin/ld: CMakeFiles/smokeqtcore.dir/x_4.cpp.o(.gnu.linkonce.t._ZN13__smokeqtcore9x_QBuffer4x_25EPN5Smoke9StackItemE+0x54): cannot handle R_PARISC_PCREL17F for __dynamic_cast
BROKEN-hppa =	relocation error

SHARED_ONLY =		Yes

COMMENT =		ruby bindings for Qt4

V =			2.1.0
DISTNAME =		qt4-qtruby-${V}
PKGNAME =		qt4-${V}
REVISION =		0
CATEGORIES =		x11

SHARED_LIBS +=  cppparser                 0.0 # 3.0
SHARED_LIBS +=  qtruby4shared             0.0 # 2.0
SHARED_LIBS +=  smokebase                 0.0 # 3.0
SHARED_LIBS +=  smokeqtcore               0.0 # 3.0
SHARED_LIBS +=  smokeqtdbus               0.0 # 3.0
SHARED_LIBS +=  smokeqtgui                0.0 # 3.0
SHARED_LIBS +=  smokeqtmultimedia         0.0 # 3.0
SHARED_LIBS +=  smokeqtnetwork            0.0 # 3.0
SHARED_LIBS +=  smokeqtopengl             0.0 # 3.0
SHARED_LIBS +=  smokeqtscript             0.0 # 3.0
SHARED_LIBS +=  smokeqtsql                0.0 # 3.0
SHARED_LIBS +=  smokeqtsvg                0.0 # 3.0
SHARED_LIBS +=  smokeqttest               0.0 # 3.0
SHARED_LIBS +=  smokeqtuitools            0.0 # 3.0
SHARED_LIBS +=  smokeqtwebkit             0.0 # 3.0
SHARED_LIBS +=  smokeqtxml                0.0 # 3.0
SHARED_LIBS +=  smokeqtxmlpatterns        0.0 # 3.0

HOMEPAGE =		http://techbase.kde.org/Development/Languages/Ruby

# GPLv2/LGPLv2.1
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		http://files.rubyforge.vm.bytemark.co.uk/korundum/

MODULES =		x11/qt4 lang/ruby devel/cmake

WANTLIB += QtDBus QtGui QtMultimedia QtNetwork QtOpenGL QtScript
WANTLIB += QtSql QtSvg QtTest QtWebKit QtXml QtXmlPatterns c m
WANTLIB += ruby19 stdc++

BUILD_DEPENDS =		devel/automoc
LIB_DEPENDS =		x11/qt4

# ruby 1.8 not supported as it requires LD_PRELOAD hacks for pthreads
MODRUBY_HANDLE_FLAVORS = Yes	
FLAVORS =		ruby19
FLAVOR =		ruby19

CONFIGURE_ENV =		CXXFLAGS="-I${X11BASE}/include/" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib/"

CONFIGURE_ARGS =	-DCMAKE_INSTALL_PREFIX=${LOCALBASE} \
			-DRUBY_EXECUTABLE=${RUBY} \
			-DENABLE_SMOKE=on \
			-DENABLE_QTRUBY=on \
			-DENABLE_SMOKEKDE=off \
			-DENABLE_QYOTO=off \
			-DENABLE_KORUNDUM=off \
			-DENABLE_PYKDE4=off \
			-DENABLE_KROSSRUBY=off \
			-DENABLE_KROSSPYTHON=off \
			-DENABLE_KROSSJAVA=off \
			-DENABLE_KROSSFALCON=off

MAKE_FLAGS =		VERBOSE=1

pre-configure:
	${SUBST_CMD} ${WRKSRC}/cmake/modules/FindRUBY.cmake

post-install:
	mv ${PREFIX}/bin/rbqt{,4}api
	mv ${PREFIX}/include/smoke{,qt4}.h
	rm ${PREFIX}/lib/ruby/site_ruby/${MODRUBY_LIBREV}/Qt.rb

.include <bsd.port.mk>
@


1.6
log
@Unbreak ninja builds + other misc fixes.

OK espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/21 08:48:57 ajacoutot Exp $
@


1.5
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:46:15 espie Exp $
d14 1
d17 1
d46 1
a46 1
WANTLIB += pthread ruby19 stdc++
a49 1

@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/02/02 10:05:43 zhuk Exp $
a48 1
USE_LIBTOOL =		Yes
@


1.3
log
@Switch ports depending on automoc to devel/automoc. No bumps needed as
this is purely build-time change, and not going to resulting packages in
any way. Discovered it was sitting in my tree for a few months already...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/10/01 21:23:36 landry Exp $
a36 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.2
log
@Mark as BROKEN-hppa, triggers a relocation error when linking, and
trying -ffunction-sections as the error message advises doesnt yield
much success..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/11/15 16:27:44 jeremy Exp $
d49 1
a49 1
BUILD_DEPENDS =		x11/kde4/automoc
@


1.1
log
@Initial revision
@
text
@d1 5
a5 1
# $OpenBSD$
@


1.1.1.1
log
@Import ruby-qt4, a ruby binding to the Qt4 library.

OK phessler@@
@
text
@@
