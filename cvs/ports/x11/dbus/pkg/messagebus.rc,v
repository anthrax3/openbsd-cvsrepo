head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.2
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.1.0.8
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.6
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@ * @;


1.2
date	2017.04.22.13.43.21;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	Obqvqlta0q6jFX3r;

1.1
date	2015.04.04.09.18.54;	author ajacoutot;	state Exp;
branches;
next	;
commitid	ASfg8cnNcfyvsjWM;


desc
@@


1.2
log
@Stop patching for /var/lib/dbus -> /var/db/dbus; nowadays, most apps look
into /etc/machine-id *before* looking into /var/lib/dbus/machine-id and for
the few that don't patch them to look directly there.

Thanks sthen@@ for the source ports seach.
@
text
@#!/bin/sh
#
# $OpenBSD: messagebus.rc,v 1.1 2015/04/04 09:18:54 ajacoutot Exp $

daemon="${TRUEPREFIX}/bin/dbus-daemon --system"

. /etc/rc.d/rc.subr

rc_pre() {
	rm -f /var/run/dbus/pid
	install -d -o _dbus -g _dbus /var/run/dbus
}

rc_cmd $1
@


1.1
log
@Subpackage dbus into -main and -suid (which contains the
dbus-daemon-launch-helper setuid helper binary).
Applications installing files under /usr/local/share/dbus-1/system-services/
*must* now RUN_DEPENDS on x11/dbus,-suid.
This was requested by reyk@@ some time ago.

While here, rename the rc scrip to "messagebus" which is what upstream
recommends.
discussed with landry@@ and jasper@@

Bump and dependency changes coming in a few...
@
text
@d3 1
a3 1
# $OpenBSD: dbus_daemon.rc,v 1.12 2013/08/10 15:47:06 ajacoutot Exp $
a9 2
	[ ! -h /var/db/dbus/machine-id ] && \
		ln -sf ${SYSCONFDIR}/machine-id /var/db/dbus/machine-id
@

