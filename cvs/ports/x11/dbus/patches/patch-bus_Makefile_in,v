head	1.28;
access;
symbols
	OPENBSD_6_1:1.28.0.4
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.28.0.2
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.18.0.2
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.28
date	2016.03.08.08.36.28;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	lZaDpVDov5OkKjwA;

1.27
date	2015.10.27.15.22.28;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	7K8nJL07PgyVBiux;

1.26
date	2015.08.27.06.46.46;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	GN27yyASOEVOa5We;

1.25
date	2015.07.22.18.09.17;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	EHRCANmaDI8YtcH0;

1.24
date	2015.05.15.06.50.05;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	Cv8roClrj29jQoTP;

1.23
date	2014.09.17.05.49.15;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	wd01ekpidxm29t3U;

1.22
date	2014.04.14.18.43.24;	author ajacoutot;	state Exp;
branches
	1.22.2.1;
next	1.21;

1.21
date	2014.01.24.10.43.16;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2013.10.09.11.10.47;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.06.13.13.08.53;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2012.10.11.07.25.20;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2012.07.05.07.19.48;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2012.03.31.17.56.44;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2011.09.29.06.57.36;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.09.09.00.25;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2011.06.15.16.26.07;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.06.03.16.51.23;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.03.07.19.20.28;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2010.12.21.14.59.49;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.12.21.05.57.42;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.12.16.07.13.58;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.12.13.10.41.22;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.04.20.14.54.21;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.10.14.30.47;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.28.14.16.19;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.12.09.14.12.08;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2008.10.12.22.08.04;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2008.03.23.10.53.55;	author ajacoutot;	state Exp;
branches;
next	;

1.22.2.1
date	2014.09.17.06.05.41;	author ajacoutot;	state Exp;
branches;
next	;
commitid	hdVt85C2kJKF843B;


desc
@@


1.28
log
@Update to dbus-1.10.8.
@
text
@$OpenBSD: patch-bus_Makefile_in,v 1.27 2015/10/27 15:22:28 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Mar  7 17:07:34 2016
+++ bus/Makefile.in	Tue Mar  8 09:30:17 2016
@@@@ -1689,13 +1689,6 @@@@ install-data-hook:
 @@DBUS_ENABLE_USER_SESSION_TRUE@@	ln -fs ../dbus.socket $(DESTDIR)$(systemduserunitdir)/sockets.target.wants/dbus.socket
 
 @@DBUS_UNIX_TRUE@@install-exec-hook:
-@@DBUS_UNIX_TRUE@@	if test `id -u` -eq 0; then \
-@@DBUS_UNIX_TRUE@@		chown root:$(DBUS_USER) $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper$(EXEEXT); \
-@@DBUS_UNIX_TRUE@@		chmod 4750 $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper$(EXEEXT); \
-@@DBUS_UNIX_TRUE@@	else \
-@@DBUS_UNIX_TRUE@@		echo "Not installing $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper binary setuid!"; \
-@@DBUS_UNIX_TRUE@@		echo "You'll need to manually set permissions to root:$(DBUS_USER) and permissions 4750"; \
-@@DBUS_UNIX_TRUE@@	fi
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
@


1.27
log
@Update to dbus-1.10.2.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.26 2015/08/27 06:46:46 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Oct 26 13:54:47 2015
+++ bus/Makefile.in	Tue Oct 27 16:03:53 2015
@@@@ -1688,13 +1688,6 @@@@ install-data-hook:
@


1.26
log
@Update to dbus-1.10.0.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.25 2015/07/22 18:09:17 ajacoutot Exp $
--- bus/Makefile.in.orig	Tue Aug 25 17:52:09 2015
+++ bus/Makefile.in	Wed Aug 26 10:50:04 2015
@@@@ -1686,13 +1686,6 @@@@ install-data-hook:
@


1.25
log
@Update to dbus-1.8.20.
@
text
@d1 5
a5 5
$OpenBSD: patch-bus_Makefile_in,v 1.24 2015/05/15 06:50:05 ajacoutot Exp $
--- bus/Makefile.in.orig	Tue Jul 21 18:32:30 2015
+++ bus/Makefile.in	Wed Jul 22 20:05:09 2015
@@@@ -1538,13 +1538,6 @@@@ install-data-hook:
 @@HAVE_SYSTEMD_TRUE@@	ln -fs ../dbus.service $(DESTDIR)$(systemdsystemunitdir)/multi-user.target.wants/dbus.service
@


1.24
log
@Update to dbus-1.8.18.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.23 2014/09/17 05:49:15 ajacoutot Exp $
--- bus/Makefile.in.orig	Thu May 14 14:38:35 2015
+++ bus/Makefile.in	Fri May 15 08:36:32 2015
@@@@ -1526,13 +1526,6 @@@@ install-data-hook:
@


1.23
log
@SECURITY update to dbus-1.8.8.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.22 2014/04/14 18:43:24 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Sep 15 13:43:14 2014
+++ bus/Makefile.in	Wed Sep 17 07:40:27 2014
@@@@ -1525,13 +1525,6 @@@@ install-data-hook:
@


1.22
log
@Rewrite _dbus_command_for_pid() to that we don't use libkvm.

glanced over by miod@@
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.21 2014/01/24 10:43:16 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Jan 20 15:10:29 2014
+++ bus/Makefile.in	Fri Jan 24 11:34:40 2014
@@@@ -1526,13 +1526,6 @@@@ install-data-hook:
@


1.22.2.1
log
@SECURITY update to dbus-1.8.8.
Fixes: CVE-2014-3635 CVE-2014-3636 CVE-2014-3637 CVE-2014-3638 CVE-2014-3639
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.22 2014/04/14 18:43:24 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Sep 15 13:43:14 2014
+++ bus/Makefile.in	Wed Sep 17 07:58:26 2014
@@@@ -1525,13 +1525,6 @@@@ install-data-hook:
@


1.21
log
@Update to dbus-1.8.0.

bulk testing by landry@@
runtime testing by myself
@
text
@d1 1
a1 4
$OpenBSD: patch-bus_Makefile_in,v 1.20 2013/10/09 11:10:47 ajacoutot Exp $

XXX -lkvm push upstream (cf. patch-dbus_dbus-sysdeps-util-unix_c)

a3 9
@@@@ -400,7 +400,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
 LAUNCHCTL = @@LAUNCHCTL@@
 LAUNCHD_AGENT_DIR = @@LAUNCHD_AGENT_DIR@@
 LD = @@LD@@
-LDFLAGS = @@LDFLAGS@@
+LDFLAGS = @@LDFLAGS@@ -lkvm
 LIBDBUS_LIBS = @@LIBDBUS_LIBS@@
 LIBOBJS = @@LIBOBJS@@
 LIBS = @@LIBS@@
@


1.20
log
@Update to dbus-1.6.16.
@
text
@d1 1
a1 1
$OpenBSD: patch-bus_Makefile_in,v 1.19 2013/06/13 13:08:53 ajacoutot Exp $
d5 3
a7 3
--- bus/Makefile.in.orig	Tue Oct  8 14:26:27 2013
+++ bus/Makefile.in	Wed Oct  9 12:43:49 2013
@@@@ -428,7 +428,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
d16 1
a16 9
@@@@ -1575,7 +1575,6 @@@@ clean-local:
 	/bin/rm *.bb *.bbg *.da *.gcov || true
 
 install-data-hook:
-	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/run/dbus
 	$(mkinstalldirs) $(DESTDIR)$(configdir)/system.d
 	$(mkinstalldirs) $(DESTDIR)$(configdir)/session.d
 	$(mkinstalldirs) $(DESTDIR)$(datadir)/dbus-1/services
@@@@ -1592,13 +1591,6 @@@@ install-data-hook:
@


1.19
log
@SECURITY update to DBus 1.6.12:
CVE-2013-2168: fix misuse of va_list that could be used as a denial of
service for system services.
@
text
@d1 1
a1 1
$OpenBSD: patch-bus_Makefile_in,v 1.18 2012/10/11 07:25:20 ajacoutot Exp $
d5 3
a7 3
--- bus/Makefile.in.orig	Wed Jun 12 15:02:41 2013
+++ bus/Makefile.in	Thu Jun 13 15:03:02 2013
@@@@ -383,7 +383,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
d16 1
a16 1
@@@@ -1532,7 +1532,6 @@@@ clean-local:
d24 1
a24 1
@@@@ -1549,13 +1548,6 @@@@ install-data-hook:
@


1.18
log
@Implement _dbus_command_for_pid which is really useful for debugging.
@
text
@d1 1
a1 1
$OpenBSD: patch-bus_Makefile_in,v 1.17 2012/07/05 07:19:48 ajacoutot Exp $
d5 3
a7 3
--- bus/Makefile.in.orig	Fri Sep 28 21:45:15 2012
+++ bus/Makefile.in	Thu Oct 11 09:02:45 2012
@@@@ -375,7 +375,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
d16 1
a16 1
@@@@ -1510,7 +1510,6 @@@@ clean-local:
d24 1
a24 1
@@@@ -1527,13 +1526,6 @@@@ install-data-hook:
@


1.17
log
@Update to dbus-1.6.2.
Committing now so that any fallout can be fixed during g2k12.
@
text
@d1 15
a15 3
$OpenBSD: patch-bus_Makefile_in,v 1.16 2012/03/31 17:56:44 ajacoutot Exp $
--- bus/Makefile.in.orig	Wed Jun 27 18:49:58 2012
+++ bus/Makefile.in	Thu Jul  5 07:47:00 2012
@


1.16
log
@Update to dbus-1.4.20.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.15 2011/09/29 06:57:36 ajacoutot Exp $
--- bus/Makefile.in.orig	Tue Mar 27 14:01:12 2012
+++ bus/Makefile.in	Sat Mar 31 10:32:00 2012
@@@@ -2344,7 +2344,6 @@@@ clean-local:
d12 1
a12 1
@@@@ -2361,13 +2360,6 @@@@ install-data-hook:
@


1.15
log
@Bugfix update to dbus-1.4.16.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.14 2011/09/09 09:00:25 ajacoutot Exp $
--- bus/Makefile.in.orig	Wed Sep 21 16:27:55 2011
+++ bus/Makefile.in	Thu Sep 29 08:49:44 2011
@@@@ -2494,7 +2494,6 @@@@ clean-local:
d12 1
a12 1
@@@@ -2511,13 +2510,6 @@@@ install-data-hook:
@


1.14
log
@Bugfix update to dbus-1.4.14.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.13 2011/06/15 16:26:07 ajacoutot Exp $
--- bus/Makefile.in.orig	Fri Jul 29 15:05:28 2011
+++ bus/Makefile.in	Fri Sep  9 10:51:12 2011
@@@@ -2485,7 +2485,6 @@@@ clean-local:
d12 1
a12 1
@@@@ -2502,13 +2501,6 @@@@ install-data-hook:
@


1.13
log
@Bugfix update to dbus-1.4.12.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.12 2011/06/03 16:51:23 ajacoutot Exp $
--- bus/Makefile.in.orig	Fri Jun 10 22:57:24 2011
+++ bus/Makefile.in	Wed Jun 15 18:17:02 2011
@@@@ -2579,7 +2579,6 @@@@ clean-local:
d12 1
a12 1
@@@@ -2596,13 +2595,6 @@@@ install-data-hook:
@


1.12
log
@Bugfix update to dbus-1.4.10.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.11 2011/03/07 19:20:28 ajacoutot Exp $
--- bus/Makefile.in.orig	Wed Jun  1 16:09:28 2011
+++ bus/Makefile.in	Fri Jun  3 18:08:22 2011
@@@@ -2576,7 +2576,6 @@@@ clean-local:
d12 2
a13 2
@@@@ -2591,13 +2590,6 @@@@ install-data-hook:
 @@HAVE_SYSTEMD_TRUE@@	$(LN_S) ../dbus.service $(DESTDIR)$(systemdsystemunitdir)/multi-user.target.wants/dbus.service
@


1.11
log
@Update to dbus-1.4.6.
@
text
@d1 5
a5 5
$OpenBSD: patch-bus_Makefile_in,v 1.10 2010/12/21 14:59:49 ajacoutot Exp $
--- bus/Makefile.in.orig	Thu Feb 17 21:06:58 2011
+++ bus/Makefile.in	Fri Mar  4 21:59:30 2011
@@@@ -2535,7 +2535,6 @@@@ uninstall-hook:
 	rm -f $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper$(EXEEXT)
d12 4
a15 4
@@@@ -2548,13 +2547,6 @@@@ install-data-hook:
 @@DBUS_UNIX_TRUE@@	$(mkinstalldirs) $(DESTDIR)$(libexecdir)/dbus-1
 @@DBUS_UNIX_TRUE@@	if test -f dbus-daemon-launch-helper$(EXEEXT) ; then \
 @@DBUS_UNIX_TRUE@@	$(LIBTOOL) --mode=install $(INSTALL_PROGRAM) dbus-daemon-launch-helper$(EXEEXT) $(DESTDIR)$(libexecdir); \
d22 4
a25 4
-@@DBUS_UNIX_TRUE@@	fi \
 @@DBUS_UNIX_TRUE@@	fi
 # Install dbus.socket as default implementation of a D-Bus stack
 @@HAVE_SYSTEMD_TRUE@@	$(mkinstalldirs) $(DESTDIR)$(systemdsystemunitdir)/dbus.target.wants
@


1.10
log
@Bugfix update to dbus-1.4.1.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.9 2010/12/21 05:57:42 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Dec 20 22:39:49 2010
+++ bus/Makefile.in	Tue Dec 21 15:09:50 2010
@@@@ -2534,7 +2534,6 @@@@ uninstall-hook:
d12 1
a12 1
@@@@ -2547,13 +2546,6 @@@@ install-data-hook:
@


1.9
log
@Update to dbus-1.4.0... second try.
Previously missed regression is fixed.
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.7 2010/12/13 10:41:22 ajacoutot Exp $
--- bus/Makefile.in.orig	Mon Sep  6 14:52:22 2010
+++ bus/Makefile.in	Mon Dec 13 10:39:09 2010
@@@@ -2563,7 +2563,6 @@@@ uninstall-hook:
d12 1
a12 1
@@@@ -2576,13 +2575,6 @@@@ install-data-hook:
@


1.8
log
@There seems to be an annoying runtime regression with session bus after
the last update which I failed to see in my tests.
While this is being worked on, let's revert for now so that people don't
run into it. Other parts of the D-DBus gang update are fine (glib and
python). Also keep the recent rc script tweak.

Sorry about that...
@
text
@d1 7
a7 7
$OpenBSD: patch-bus_Makefile_in,v 1.6 2010/04/20 14:54:21 ajacoutot Exp $
--- bus/Makefile.in.orig	Tue Mar 23 20:11:23 2010
+++ bus/Makefile.in	Tue Apr 20 16:38:21 2010
@@@@ -1438,20 +1438,12 @@@@ install-data-hook:
 		chmod 755 $(DESTDIR)$(DBUS_DAEMONDIR); \
 	fi
 	$(INSTALL_PROGRAM) dbus-daemon $(DESTDIR)$(DBUS_DAEMONDIR)
d12 14
a25 13
 	$(mkinstalldirs) $(DESTDIR)$(datadir)/dbus-1/system-services
 	$(mkinstalldirs) $(DESTDIR)$(libexecdir)/dbus-1
 	$(INSTALL_PROGRAM) dbus-daemon-launch-helper $(DESTDIR)$(libexecdir)
-	if test `id -u` -eq 0; then \
-		chown root:$(DBUS_USER) $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper; \
-		chmod 4750 $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper; \
-	else \
-		echo "Not installing $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper binary setuid!"; \
-		echo "You'll need to manually set permissions to root:$(DBUS_USER) and permissions 4750"; \
-	fi
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
@


1.7
log
@Update to dbus-1.4.0.
@
text
@d2 6
a7 6
--- bus/Makefile.in.orig	Mon Sep  6 14:52:22 2010
+++ bus/Makefile.in	Mon Dec 13 10:39:09 2010
@@@@ -2563,7 +2563,6 @@@@ uninstall-hook:
 	rm -f $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper$(EXEEXT)
 
 install-data-hook:
d12 13
a24 14
@@@@ -2576,13 +2575,6 @@@@ install-data-hook:
 @@DBUS_UNIX_TRUE@@	$(mkinstalldirs) $(DESTDIR)$(libexecdir)/dbus-1
 @@DBUS_UNIX_TRUE@@	if test -f dbus-daemon-launch-helper$(EXEEXT) ; then \
 @@DBUS_UNIX_TRUE@@	$(LIBTOOL) --mode=install $(INSTALL_PROGRAM) dbus-daemon-launch-helper$(EXEEXT) $(DESTDIR)$(libexecdir); \
-@@DBUS_UNIX_TRUE@@	if test `id -u` -eq 0; then \
-@@DBUS_UNIX_TRUE@@		chown root:$(DBUS_USER) $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper$(EXEEXT); \
-@@DBUS_UNIX_TRUE@@		chmod 4750 $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper$(EXEEXT); \
-@@DBUS_UNIX_TRUE@@	else \
-@@DBUS_UNIX_TRUE@@		echo "Not installing $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper binary setuid!"; \
-@@DBUS_UNIX_TRUE@@		echo "You'll need to manually set permissions to root:$(DBUS_USER) and permissions 4750"; \
-@@DBUS_UNIX_TRUE@@	fi \
 @@DBUS_UNIX_TRUE@@	fi
 # Install dbus.socket as default implementation of a D-Bus stack
 @@HAVE_SYSTEMD_TRUE@@	$(mkinstalldirs) $(DESTDIR)$(systemdsystemunitdir)/dbus.target.wants
@


1.6
log
@Maintainance update to dbus-1.2.24.
@
text
@d1 7
a7 7
$OpenBSD: patch-bus_Makefile_in,v 1.5 2009/10/10 14:30:47 ajacoutot Exp $
--- bus/Makefile.in.orig	Tue Mar 23 20:11:23 2010
+++ bus/Makefile.in	Tue Apr 20 16:38:21 2010
@@@@ -1438,20 +1438,12 @@@@ install-data-hook:
 		chmod 755 $(DESTDIR)$(DBUS_DAEMONDIR); \
 	fi
 	$(INSTALL_PROGRAM) dbus-daemon $(DESTDIR)$(DBUS_DAEMONDIR)
d12 14
a25 13
 	$(mkinstalldirs) $(DESTDIR)$(datadir)/dbus-1/system-services
 	$(mkinstalldirs) $(DESTDIR)$(libexecdir)/dbus-1
 	$(INSTALL_PROGRAM) dbus-daemon-launch-helper $(DESTDIR)$(libexecdir)
-	if test `id -u` -eq 0; then \
-		chown root:$(DBUS_USER) $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper; \
-		chmod 4750 $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper; \
-	else \
-		echo "Not installing $(DESTDIR)$(libexecdir)/dbus-daemon-launch-helper binary setuid!"; \
-		echo "You'll need to manually set permissions to root:$(DBUS_USER) and permissions 4750"; \
-	fi
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
@


1.5
log
@Update to dbus-1.2.16.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.4 2009/01/28 14:16:19 jasper Exp $
--- bus/Makefile.in.orig	Tue Jul 14 21:43:06 2009
+++ bus/Makefile.in	Sat Oct 10 14:49:00 2009
@@@@ -1380,20 +1380,12 @@@@ install-data-hook:
@


1.4
log
@- maintenance update dbus to 1.2.12

from Brad, ok ajacoutot@@
@
text
@d1 11
a11 4
$OpenBSD: patch-bus_Makefile_in,v 1.3 2008/12/09 14:12:08 jasper Exp $
--- bus/Makefile.in.orig	Tue Jan  6 19:30:41 2009
+++ bus/Makefile.in	Tue Jan 27 03:38:09 2009
@@@@ -1296,13 +1296,6 @@@@ install-data-hook:
d22 1
a24 1
 .NOEXPORT:
@


1.3
log
@- SECURITY UPDATE for dbus to 1.2.6

fixes CVE-2008-4311
The default policy for both sent and received messages was
effectively *allow*, and not deny as stated.

"looks good" todd@@
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.2 2008/10/12 22:08:04 brad Exp $
--- bus/Makefile.in.orig	Fri Dec  5 17:53:44 2008
+++ bus/Makefile.in	Tue Dec  9 13:23:40 2008
@@@@ -1301,13 +1301,6 @@@@ install-data-hook:
@


1.2
log
@Update to DBus 1.2.4.

Also a security update for a remote application DoS.. CVE-2008-3834.

ok jasper@@ ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-bus_Makefile_in,v 1.1 2008/03/23 10:53:55 ajacoutot Exp $
--- bus/Makefile.in.orig	Wed Oct  1 18:50:44 2008
+++ bus/Makefile.in	Wed Oct  1 18:51:42 2008
@@@@ -1298,13 +1298,6 @@@@ install-data-hook:
@


1.1
log
@- s/etc/$SYSCONFDIR
- simpler rc.local example; remove UNMESSAGE
- remove /var/run @@sample from PLIST as this gets removed at reboot
- don't try to install dir outside of $PREFIX

ok jasper@@ landry@@ bernd@@
@
text
@d1 14
a14 10
$OpenBSD$
--- bus/Makefile.in.orig	Thu Mar 20 16:59:20 2008
+++ bus/Makefile.in	Thu Mar 20 16:59:50 2008
@@@@ -858,7 +858,6 @@@@ install-data-hook:
 		chmod 755 $(DESTDIR)$(DBUS_DAEMONDIR); \
 	fi
 	$(INSTALL_PROGRAM) dbus-daemon $(DESTDIR)$(DBUS_DAEMONDIR)
-	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/run/dbus
 	$(mkinstalldirs) $(DESTDIR)$(configdir)/system.d
 	$(mkinstalldirs) $(DESTDIR)$(datadir)/dbus-1/services
d16 2
@

