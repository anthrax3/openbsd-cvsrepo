head	1.1;
access;
symbols
	OPENBSD_5_5:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2014.07.08.16.23.18;	author ajacoutot;	state dead;
branches
	1.1.2.1;
next	;
commitid	hxOtApKz6smzmg99;

1.1.2.1
date	2014.07.08.16.23.18;	author ajacoutot;	state Exp;
branches;
next	1.1.2.2;
commitid	hxOtApKz6smzmg99;

1.1.2.2
date	2014.09.17.06.30.07;	author ajacoutot;	state dead;
branches;
next	;
commitid	B2PRWz08dAGRG6j6;


desc
@@


1.1
log
@file patch-dbus_dbus-message_c was initially added on branch OPENBSD_5_5.
@
text
@@


1.1.2.1
log
@Merge security fixes for:
CVE-2014-3532
CVE-2014-3533
@
text
@a0 18
$OpenBSD$

From 07f4c12efe3b9bd45d109bc5fbaf6d9dbf69d78e Mon Sep 17 00:00:00 2001
From: Simon McVittie <simon.mcvittie@@collabora.co.uk>
Date: Wed, 11 Jun 2014 11:24:20 +0000
Subject: If loader contains two messages with fds, don't corrupt the second

--- dbus/dbus-message.c.orig	Tue Jan  7 12:32:37 2014
+++ dbus/dbus-message.c	Tue Jul  8 18:18:03 2014
@@@@ -4204,7 +4204,7 @@@@ load_message (DBusMessageLoader *loader,
 
       message->n_unix_fds_allocated = message->n_unix_fds = n_unix_fds;
       loader->n_unix_fds -= n_unix_fds;
-      memmove(loader->unix_fds + n_unix_fds, loader->unix_fds, loader->n_unix_fds);
+      memmove (loader->unix_fds, loader->unix_fds + n_unix_fds, loader->n_unix_fds * sizeof (loader->unix_fds[0]));
     }
   else
     message->unix_fds = NULL;
@


1.1.2.2
log
@SECURITY fix for:
CVE-2014-3635 CVE-2014-3636 CVE-2014-3637 CVE-2014-3638 CVE-2014-3639
@
text
@d1 1
a1 1
$OpenBSD: patch-dbus_dbus-message_c,v 1.1.2.1 2014/07/08 16:23:18 ajacoutot Exp $
@


