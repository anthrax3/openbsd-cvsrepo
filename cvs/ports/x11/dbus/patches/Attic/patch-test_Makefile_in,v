head	1.12;
access;
symbols
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	xorg:1.1.1.1
	espie:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2014.04.14.18.43.24;	author ajacoutot;	state dead;
branches;
next	1.11;

1.11
date	2014.01.24.10.43.16;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.10.09.11.10.49;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2013.06.13.13.08.53;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.10.11.07.25.20;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.07.05.07.19.48;	author ajacoutot;	state dead;
branches;
next	1.6;

1.6
date	2012.04.26.09.25.40;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2012.04.04.06.19.01;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.03.31.18.14.39;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.03.31.17.56.44;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.07.10.40.19;	author alek;	state dead;
branches;
next	1.1;

1.1
date	2006.09.19.18.10.14;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.09.19.18.10.14;	author espie;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Rewrite _dbus_command_for_pid() to that we don't use libkvm.

glanced over by miod@@
@
text
@$OpenBSD: patch-test_Makefile_in,v 1.11 2014/01/24 10:43:16 ajacoutot Exp $

XXX -lkvm push upstream (cf. patch-dbus_dbus-sysdeps-util-unix_c)

--- test/Makefile.in.orig	Mon Jan 20 15:10:30 2014
+++ test/Makefile.in	Wed Jan 22 12:00:09 2014
@@@@ -656,7 +656,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
 LAUNCHCTL = @@LAUNCHCTL@@
 LAUNCHD_AGENT_DIR = @@LAUNCHD_AGENT_DIR@@
 LD = @@LD@@
-LDFLAGS = @@LDFLAGS@@
+LDFLAGS = @@LDFLAGS@@ -lkvm
 LIBDBUS_LIBS = @@LIBDBUS_LIBS@@
 LIBOBJS = @@LIBOBJS@@
 LIBS = @@LIBS@@
@


1.11
log
@Update to dbus-1.8.0.

bulk testing by landry@@
runtime testing by myself
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.10 2013/10/09 11:10:49 ajacoutot Exp $
@


1.10
log
@Update to dbus-1.6.16.
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.9 2013/06/13 13:08:53 ajacoutot Exp $
d5 3
a7 3
--- test/Makefile.in.orig	Tue Oct  8 14:26:27 2013
+++ test/Makefile.in	Wed Oct  9 12:43:49 2013
@@@@ -624,7 +624,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
@


1.9
log
@SECURITY update to DBus 1.6.12:
CVE-2013-2168: fix misuse of va_list that could be used as a denial of
service for system services.
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.8 2012/10/11 07:25:20 ajacoutot Exp $
d5 3
a7 3
--- test/Makefile.in.orig	Wed Jun 12 15:02:41 2013
+++ test/Makefile.in	Thu Jun 13 15:03:02 2013
@@@@ -376,7 +376,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
@


1.8
log
@Implement _dbus_command_for_pid which is really useful for debugging.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- test/Makefile.in.orig	Thu Oct 11 09:02:53 2012
+++ test/Makefile.in	Thu Oct 11 09:03:02 2012
@@@@ -359,7 +359,7 @@@@ INSTALL_STRIP_PROGRAM = @@INSTALL_STRIP_PROGRAM@@
@


1.7
log
@Update to dbus-1.6.2.
Committing now so that any fallout can be fixed during g2k12.
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.6 2012/04/26 09:25:40 ajacoutot Exp $
d3 1
a3 4
From 069c96ccde7d480f0d7d74bfc19163938ef4a3d5 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot openbsd org>
Date: Wed, 25 Apr 2012 18:04:07 +0000
Subject: use cp and mkdir -p instead of install within source tree
d5 11
a15 37
--- test/Makefile.in.orig	Tue Mar 27 14:01:13 2012
+++ test/Makefile.in	Wed Apr  4 08:02:08 2012
@@@@ -1418,14 +1418,14 @@@@ installcheck-local:
 @@DBUS_ENABLE_INSTALLED_TESTS_TRUE@@		$(testexec_PROGRAMS)
 
 all-local:
-	$(AM_V_at)$(INSTALL) -d data/valid-config-files/session.d
+	$(AM_V_at)$(MKDIR_P) data/valid-config-files/session.d
 	$(AM_V_at)set -e && \
 	if test $(srcdir) = . || test $(srcdir) -ef .; then \
 		echo '-- No need to copy test data as srcdir = builddir'; \
 	else \
 		for F in $(static_data); do \
-			$(INSTALL) -d $${F%/*}; \
-			$(INSTALL_DATA) $(srcdir)/$$F $$F; \
+			$(MKDIR_P) $${F%/*}; \
+			cp $(srcdir)/$$F $$F; \
 		done; \
 	fi
 
@@@@ -1437,12 +1437,12 @@@@ clean-local:
 	fi
 
 data/valid-config-files/session.conf: $(top_builddir)/bus/session.conf
-	$(AM_V_at)$(INSTALL) -d data/valid-config-files
-	$(AM_V_GEN)$(INSTALL_DATA) $< $@@
+	$(AM_V_at)$(MKDIR_P) data/valid-config-files
+	$(AM_V_GEN)cp $< $@@
 
 data/valid-config-files/system.conf: $(top_builddir)/bus/system.conf
-	$(AM_V_at)$(INSTALL) -d data/valid-config-files
-	$(AM_V_GEN)$(INSTALL_DATA) $< $@@
+	$(AM_V_at)$(MKDIR_P) data/valid-config-files
+	$(AM_V_GEN)cp $< $@@
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
@


1.6
log
@Sync patch wirh upstream, USE_GMAKE.
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.5 2012/04/04 06:19:01 ajacoutot Exp $
@


1.5
log
@Make this build with regular make.
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.4 2012/03/31 18:14:39 ajacoutot Exp $
d3 4
a6 3
https://bugs.freedesktop.org/show_bug.cgi?id=48127

https://bugs.freedesktop.org/show_bug.cgi?id=48277
d15 1
a15 1
+	$(AM_V_at)$(mkinstalldirs) -d data/valid-config-files/session.d
d23 2
a24 2
+			$(mkinstalldirs) $${F%/*}; \
+			$(install_sh_DATA) $(srcdir)/$$F $$F; \
d34 2
a35 2
+	$(AM_V_at)$(mkinstalldirs) data/valid-config-files
+	$(AM_V_GEN)$(install_sh_DATA) $(top_builddir)/bus/session.conf $@@
d40 2
a41 2
+	$(AM_V_at)$(mkinstalldirs) data/valid-config-files
+	$(AM_V_GEN)$(install_sh_DATA) $(top_builddir)/bus/system.conf $@@
@


1.4
log
@I forgot to mention the BZ URL in previous; no pkg change.
@
text
@d1 1
a1 1
$OpenBSD: patch-test_Makefile_in,v 1.3 2012/03/31 17:56:44 ajacoutot Exp $
d5 4
a8 2
--- test/Makefile.in.orig	Sat Mar 31 18:55:08 2012
+++ test/Makefile.in	Sat Mar 31 18:58:02 2012
d34 1
a34 1
+	$(AM_V_GEN)$(install_sh_DATA) $< $@@
d40 1
a40 1
+	$(AM_V_GEN)$(install_sh_DATA) $< $@@
@


1.3
log
@Update to dbus-1.4.20.
@
text
@d1 4
a4 1
$OpenBSD$
@


1.2
log
@Update to 0.94 and make it work.

Sessionwide dbus tested with gaim; systemwide bus untested but at least it
starts up without dumping core.
@
text
@d1 5
a5 6
$OpenBSD: patch-test_Makefile_in,v 1.1 2006/09/19 18:10:14 espie Exp $
--- test/Makefile.in.orig	Mon Aug 21 20:20:12 2006
+++ test/Makefile.in	Mon Aug 21 20:20:22 2006
@@@@ -365,7 +365,7 @@@@ TESTDIRS = \
 	data/equiv-config-files/entities	\
 	data/equiv-config-files/entities/basic.d
d7 14
a20 3
-FIND_TESTS = find -name "*.message" -o -name "*.message-raw" -o -name "*.auth-script" -o -name "*.sha1" -o -name "*.txt" -o -name "*.conf" -o -name "*.service"
+FIND_TESTS = find . -name "*.message" -o -name "*.message-raw" -o -name "*.auth-script" -o -name "*.sha1" -o -name "*.txt" -o -name "*.conf" -o -name "*.service"
 all: all-recursive
d22 17
a38 1
 .SUFFIXES:
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@D-Bus IPC, will be used by KDE4
@
text
@@
