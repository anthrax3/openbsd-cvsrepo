head	1.3;
access;
symbols
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2007.07.30.16.59.54;	author steven;	state dead;
branches;
next	1.2;

1.2
date	2006.01.08.20.56.08;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2006.01.08.17.20.11;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove obsolete tcl and tk 8.0

ok naddy@@
@
text
@$OpenBSD: patch-unix_configure,v 1.2 2006/01/08 20:56:08 naddy Exp $
--- unix/configure.orig	Tue Mar  9 07:53:50 1999
+++ unix/configure	Sun Jan  8 21:51:05 2006
@@@@ -880,8 +880,8 @@@@ fi
 if test ! -d $TCL_BIN_DIR; then
     { echo "configure: error: Tcl directory $TCL_BIN_DIR doesn't exist" 1>&2; exit 1; }
 fi
-if test ! -f $TCL_BIN_DIR/Makefile; then
-    { echo "configure: error: There's no Makefile in $TCL_BIN_DIR;  perhaps you didn't specify the Tcl *build* directory (not the toplevel Tcl directory) or you forgot to configure Tcl?" 1>&2; exit 1; }
+if test ! -f $TCL_BIN_DIR/tclConfig.sh; then
+    { echo "configure: error: There's no tclConfig.sh in $TCL_BIN_DIR;  perhaps you didn't specify the Tcl *build* directory (not the toplevel Tcl directory) or you forgot to configure Tcl?" 1>&2; exit 1; }
 fi
 
 #--------------------------------------------------------------------
@@@@ -922,6 +922,8 @@@@ CFLAGS_DEBUG=$TCL_CFLAGS_DEBUG
 CFLAGS_OPTIMIZE=$TCL_CFLAGS_OPTIMIZE
 EXTRA_CFLAGS=$TCL_EXTRA_CFLAGS
 
+TCL_SRC_DIR=${prefix}/include/tcl${TCL_VERSION}
+
 LIB_RUNTIME_DIR='${LIB_RUNTIME_DIR}'
 
 # If Tcl and Tk are installed in different places, adjust the library
@@@@ -2387,14 +2389,13 @@@@ fi
 if test "$ok" = "yes" -a "${SHLIB_SUFFIX}" != ""; then
     TK_SHARED_BUILD=1
     TK_SHLIB_CFLAGS="${SHLIB_CFLAGS}"
-    TK_LIB_FILE=libtk${TCL_SHARED_LIB_SUFFIX}
+    TK_LIB_FILE="libtk`echo ${VERSION} | tr -d .`${DBGX}.so.${LIBtk80_VERSION}"
     MAKE_LIB="\${SHLIB_LD} -o \${TK_LIB_FILE} \${OBJS} \$(TK_LD_SEARCH_FLAGS) ${SHLIB_LD_LIBS}"
-    RANLIB=":"
 else
     TK_SHARED_BUILD=0
     TK_SHLIB_CFLAGS=""
     TK_LIB_FILE=libtk${TCL_UNSHARED_LIB_SUFFIX}
-    MAKE_LIB="ar cr \${TK_LIB_FILE} \${OBJS}"
+    MAKE_LIB="ar cr \${TK_LIB_FILE} \${OBJS}; \${RANLIB} \${TK_LIB_FILE}"
 fi
 
 DBGX='${TK_DBGX}'
@@@@ -2600,6 +2601,7 @@@@ s%@@TCL_BIN_DIR@@%$TCL_BIN_DIR%g
 s%@@TCL_BUILD_LIB_SPEC@@%$TCL_BUILD_LIB_SPEC%g
 s%@@TCL_DBGX@@%$TCL_DBGX%g
 s%@@TCL_LIB_FLAG@@%$TCL_LIB_FLAG%g
+s%@@TCL_LIB_SPEC@@%$TCL_LIB_SPEC%g
 s%@@TCL_SRC_DIR@@%$TCL_SRC_DIR%g
 s%@@TCL_VERSION@@%$TCL_VERSION%g
 s%@@TK_BUILD_LIB_SPEC@@%$TK_BUILD_LIB_SPEC%g
@


1.2
log
@SHARED_LIBS
@
text
@d1 1
a1 1
$OpenBSD: patch-unix_configure,v 1.1 2006/01/08 17:20:11 naddy Exp $
@


1.1
log
@regen patches; welcome in the 21st century!
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ unix/configure	Sun Jan  8 18:09:42 2006
d24 3
a26 1
@@@@ -2389,12 +2391,11 @@@@ if test "$ok" = "yes" -a "${SHLIB_SUFFIX
d28 2
a29 1
     TK_LIB_FILE=libtk${TCL_SHARED_LIB_SUFFIX}
@

