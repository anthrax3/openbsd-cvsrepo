head	1.4;
access;
symbols
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.2.0.18
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.16
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.14
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.12
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.10
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.8
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.6
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.4
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.2
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.1.1.1.0.2
	OPENBSD_2_7_BASE:1.1.1.1
	kevlo_2000-Mar-27:1.1.1.1
	kevlo:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2006.01.08.17.20.11;	author naddy;	state dead;
branches;
next	1.3;

1.3
date	2004.12.05.11.39.06;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2000.07.19.03.27.04;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.27.02.25.16;	author kevlo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.03.27.02.25.16;	author kevlo;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2000.09.15.05.25.28;	author marc;	state Exp;
branches;
next	;


desc
@@


1.4
log
@regen patches; welcome in the 21st century!
@
text
@--- Makefile.in.orig	Tue Mar  9 01:53:50 1999
+++ Makefile.in	Tue Jul 18 05:26:36 2000
@@@@ -112,7 +112,7 @@@@
 
 # Libraries to use when linking.  This definition is determined by the
 # configure script.
-LIBS = @@TCL_BUILD_LIB_SPEC@@ @@LIBS@@ $(X11_LIB_SWITCHES) @@DL_LIBS@@ @@MATH_LIBS@@ -lc
+LIBS = @@TCL_LIB_SPEC@@ @@LIBS@@ $(X11_LIB_SWITCHES) @@DL_LIBS@@ @@MATH_LIBS@@ -lc
 
 # To turn off the security checks that disallow incoming sends when
 # the X server appears to be insecure, reverse the comments on the
@@@@ -302,14 +302,18 @@@@
 
 DEMOPROGS = browse hello ixset rmt rolodex square tcolor timer widget
 
-all: wish
+all: ${TK_LIB_FILE} libtk80.a wish
 
 # The following target is configured by autoconf to generate either
 # a shared library or non-shared library for Tk.
 ${TK_LIB_FILE}: ${OBJS}
 	rm -f ${TK_LIB_FILE}
 	@@MAKE_LIB@@
-	$(RANLIB) ${TK_LIB_FILE}
+
+libtk80.a: ${OBJS}
+	rm -f libtk80.a
+	ar cr libtk80.a ${OBJS}
+	$(RANLIB) libtk80.a
 
 # Make target which outputs the list of the .o contained in the Tk lib
 # usefull to build a single big shared library containing Tcl/Tk and other
@@@@ -365,7 +369,7 @@@@
 # some ranlibs write to current directory, and this might not always be
 # possible (e.g. if installing as root).
 
-install-binaries: $(TK_LIB_FILE) wish
+install-binaries: $(TK_LIB_FILE) libtk80.a wish
 	@@for i in $(LIB_INSTALL_DIR) $(BIN_INSTALL_DIR) ; \
 	    do \
 	    if [ ! -d $$i ] ; then \
@@@@ -377,15 +381,19 @@@@
 	    done;
 	@@echo "Installing $(TK_LIB_FILE)"
 	@@$(INSTALL_DATA) $(TK_LIB_FILE) $(LIB_INSTALL_DIR)/$(TK_LIB_FILE)
-	@@(cd $(LIB_INSTALL_DIR); $(RANLIB) $(TK_LIB_FILE))
 	@@chmod 555 $(LIB_INSTALL_DIR)/$(TK_LIB_FILE)
+	@@echo "Installing libtk80.a"
+	@@$(INSTALL_DATA) libtk80.a $(LIB_INSTALL_DIR)/libtk80.a
+	@@chmod 555 $(LIB_INSTALL_DIR)/libtk80.a
 	@@echo "Installing wish"
 	@@$(INSTALL_PROGRAM) wish $(BIN_INSTALL_DIR)/wish$(VERSION)
 	@@echo "Installing tkConfig.sh"
-	@@$(INSTALL_DATA) tkConfig.sh $(LIB_INSTALL_DIR)/tkConfig.sh
+	@@mkdir -p $(LIB_INSTALL_DIR)/tk$(VERSION)
+	@@$(INSTALL_DATA) tkConfig.sh $(LIB_INSTALL_DIR)/tk$(VERSION)/tkConfig.sh
 
 install-libraries:
 	@@for i in $(INSTALL_ROOT)$(prefix)/lib $(INCLUDE_INSTALL_DIR) \
+		$(INSTALL_ROOT)$(GENERIC_INCLUDE_INSTALL_DIR) $(INSTALL_ROOT)$(UNIX_INCLUDE_INSTALL_DIR) \
 		$(SCRIPT_INSTALL_DIR) $(SCRIPT_INSTALL_DIR)/images; \
 	    do \
 	    if [ ! -d $$i ] ; then \
@@@@ -395,8 +403,18 @@@@
 		else true; \
 		fi; \
 	    done;
-	@@echo "Installing tk.h"
-	@@$(INSTALL_DATA) $(GENERIC_DIR)/tk.h $(INCLUDE_INSTALL_DIR)/tk.h
+	@@echo "Installing headers"
+	@@for i in $(GENERIC_DIR)/*.h ; \
+	    do \
+	    echo "Installing $$i"; \
+	    $(INSTALL_DATA) $$i $(INSTALL_ROOT)$(GENERIC_INCLUDE_INSTALL_DIR); \
+	    done;
+	@@for i in $(UNIX_DIR)/*.h ; \
+	    do \
+	    echo "Installing $$i"; \
+	    $(INSTALL_DATA) $$i $(INSTALL_ROOT)$(UNIX_INCLUDE_INSTALL_DIR); \
+	    done;
+	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tk.h $(INCLUDE_INSTALL_DIR)/tk.h
 	for i in $(SRC_DIR)/library/*.tcl $(SRC_DIR)/library/tclIndex $(SRC_DIR)/library/prolog.ps $(UNIX_DIR)/tkAppInit.c; \
 	    do \
 	    echo "Installing $$i"; \
@


1.3
log
@Under unclear circumstances parts of tk are recompiled in fake stage.
In this case using PREFIX in a Makefile to find installed files is
obviously wrong. In 8.3 and 8.4 this part of the patch is not necessary
at all, so just remove it. In 8.0 use TCL_LIB_SPEC, as is used in 8.3
and 8.4.

problem noted by Rod.. Whitworth <listen at witworx.com>
@
text
@@


1.2
log
@- add HOMEPAGE
- remove license type
- GNU_CONFIGURE -> CONFIGURE_STYLE
- partially revert patch and make use of FAKE_FLAGS
- use new framework for PLISTs
- add @@comment with RCS id to PLISTs
@
text
@d8 1
a8 1
+LIBS = -L${PREFIX}/lib -ltcl80 @@LIBS@@ $(X11_LIB_SWITCHES) @@DL_LIBS@@ @@MATH_LIBS@@ -lc
@


1.1
log
@Initial revision
@
text
@d1 3
a3 24
--- Makefile.in.orig	Tue Mar  9 07:53:50 1999
+++ Makefile.in	Tue Mar 21 21:55:29 2000
@@@@ -56,7 +56,10 @@@@
 BIN_DIR =		$(exec_prefix)/bin
 
 # Directory in which to install the include file tk.h:
-INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/include
+BASE_INSTALL_DIR =	$(prefix)/include/tk$(VERSION)
+INCLUDE_INSTALL_DIR =	$(INSTALL_ROOT)$(BASE_INSTALL_DIR)
+GENERIC_INCLUDE_INSTALL_DIR = $(BASE_INSTALL_DIR)/generic
+UNIX_INCLUDE_INSTALL_DIR = $(BASE_INSTALL_DIR)/unix
 
 # Top-level directory for manual entries:
 MAN_INSTALL_DIR =	$(INSTALL_ROOT)$(prefix)/man
@@@@ -97,7 +100,7 @@@@
 #CFLAGS = 		$(CFLAGS_DEBUG)
 #CFLAGS = 		$(CFLAGS_OPTIMIZE)
 #CFLAGS = 		$(CFLAGS_DEBUG) $(CFLAGS_OPTIMIZE)
-CFLAGS = 		$(@@CFLAGS_DEFAULT@@)
+#CFLAGS = 		$(@@CFLAGS_DEFAULT@@)
 
 # A "-I" switch that can be used when compiling to make all of the
 # X11 include files accessible (the configure script will try to
@@@@ -112,7 +115,7 @@@@
d12 1
a12 10
@@@@ -148,7 +151,7 @@@@
 # "install" around;  better to use the install-sh script that comes
 # with the distribution, which is slower but guaranteed to work.
 
-INSTALL = @@srcdir@@/install-sh -c
+INSTALL = install -c
 INSTALL_PROGRAM =	${INSTALL}
 INSTALL_DATA =		${INSTALL} -m 644
 
@@@@ -302,14 +305,18 @@@@
d33 1
a33 1
@@@@ -365,7 +372,7 @@@@
d42 1
a42 1
@@@@ -377,15 +384,19 @@@@
d64 1
a64 1
@@@@ -395,8 +406,18 @@@@
@


1.1.1.1
log
@Initial import of tk.
@
text
@@


1.1.1.1.2.1
log
@bring x11 as of cut-over date into 2.7 branch
@
text
@d1 24
a24 3
--- Makefile.in.orig	Tue Mar  9 01:53:50 1999
+++ Makefile.in	Tue Jul 18 05:26:36 2000
@@@@ -112,7 +112,7 @@@@
d33 10
a42 1
@@@@ -302,14 +302,18 @@@@
d63 1
a63 1
@@@@ -365,7 +369,7 @@@@
d72 1
a72 1
@@@@ -377,15 +381,19 @@@@
d94 1
a94 1
@@@@ -395,8 +403,18 @@@@
@

