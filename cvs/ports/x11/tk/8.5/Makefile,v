head	1.44;
access;
symbols
	OPENBSD_6_2:1.44.0.2
	OPENBSD_6_2_BASE:1.44
	OPENBSD_6_1:1.42.0.4
	OPENBSD_6_1_BASE:1.42
	OPENBSD_6_0:1.42.0.2
	OPENBSD_6_0_BASE:1.42
	OPENBSD_5_9:1.39.0.2
	OPENBSD_5_9_BASE:1.39
	OPENBSD_5_8:1.39.0.4
	OPENBSD_5_8_BASE:1.39
	OPENBSD_5_7:1.36.0.2
	OPENBSD_5_7_BASE:1.36
	OPENBSD_5_6:1.35.0.4
	OPENBSD_5_6_BASE:1.35
	OPENBSD_5_5:1.35.0.2
	OPENBSD_5_5_BASE:1.35
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.28.0.2
	OPENBSD_5_3_BASE:1.28
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.2
	OPENBSD_5_0:1.22.0.2
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.21.0.2
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	deanna_20080425:1.1.1.1
	deanna:1.1.1;
locks; strict;
comment	@# @;


1.44
date	2017.06.04.23.21.02;	author schwarze;	state Exp;
branches;
next	1.43;
commitid	DdVrOo38uL2WAHF7;

1.43
date	2017.05.12.21.44.44;	author stu;	state Exp;
branches;
next	1.42;
commitid	0aZiaeQDjMXbR2v6;

1.42
date	2016.06.29.16.14.45;	author espie;	state Exp;
branches;
next	1.41;
commitid	c1yQMbJbfo0CFBcL;

1.41
date	2016.03.15.21.13.32;	author naddy;	state Exp;
branches;
next	1.40;
commitid	ip6F83eeYgRkUET3;

1.40
date	2016.03.11.20.28.33;	author naddy;	state Exp;
branches;
next	1.39;
commitid	UYLP8TE6V7RS2GhJ;

1.39
date	2015.06.06.14.19.23;	author stu;	state Exp;
branches;
next	1.38;
commitid	wCqeH2grD5LN77cx;

1.38
date	2015.06.06.12.13.03;	author ajacoutot;	state Exp;
branches;
next	1.37;
commitid	Iutnfu6D7PJqNzSp;

1.37
date	2015.06.05.20.35.53;	author stu;	state Exp;
branches;
next	1.36;
commitid	jXl1psWaBg1kot3k;

1.36
date	2014.09.22.16.55.11;	author stu;	state Exp;
branches;
next	1.35;
commitid	w0MQbpVLTmb4an6m;

1.35
date	2013.11.05.04.50.38;	author stu;	state Exp;
branches;
next	1.34;

1.34
date	2013.10.21.19.14.55;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2013.09.20.10.10.04;	author stu;	state Exp;
branches;
next	1.32;

1.32
date	2013.07.06.11.06.36;	author stu;	state Exp;
branches;
next	1.31;

1.31
date	2013.06.28.06.13.04;	author stu;	state Exp;
branches;
next	1.30;

1.30
date	2013.04.28.13.01.34;	author sebastia;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.11.11.46.16;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2013.02.09.14.49.54;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2012.11.19.15.10.48;	author stu;	state Exp;
branches;
next	1.26;

1.26
date	2012.08.26.16.57.58;	author stu;	state Exp;
branches;
next	1.25;

1.25
date	2012.03.29.13.39.01;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2011.11.21.18.31.02;	author stu;	state Exp;
branches;
next	1.23;

1.23
date	2011.10.17.15.19.22;	author stu;	state Exp;
branches;
next	1.22;

1.22
date	2011.04.17.18.13.10;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2011.01.09.14.47.43;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2011.01.05.16.18.09;	author stu;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.27.11.54.53;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.22.08.37.04;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.06.23.49.20;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.24.21.15.34;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.19.08.13.59;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.07.30.06.59.00;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2010.06.07.18.13.43;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2009.11.21.02.50.23;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2009.09.06.10.46.26;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.08.11.08.42.09;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.04.24.21.13.13;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.17.00.24.28;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2008.12.26.23.36.27;	author steven;	state Exp;
branches;
next	1.6;

1.6
date	2008.10.21.21.34.41;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.01.19.48.46;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2008.05.02.13.17.16;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.04.27.13.50.44;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2008.04.25.19.34.21;	author deanna;	state Exp;
branches;
next	1.1;

1.1
date	2008.04.25.14.17.25;	author deanna;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.04.25.14.17.25;	author deanna;	state Exp;
branches;
next	;


desc
@@


1.44
log
@mandoc groks .mc now; drop USE_GROFF and bump
@
text
@# $OpenBSD: Makefile,v 1.43 2017/05/12 21:44:44 stu Exp $

COMMENT =		graphical toolkit for Tcl

P =			19
DISTNAME =		tk8.5.${P}
PKGNAME =		tk-8.5.${P}
REVISION =		0
SHARED_LIBS =		tk85 0.${P}
CATEGORIES =		x11 x11/tk
HOMEPAGE =		http://www.tcl.tk/
MAINTAINER =		Stuart Cassoff <stwo@@users.sourceforge.net>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		X11 Xext Xft Xss c fontconfig m tcl85

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=tcl/}
DISTFILES =		${DISTNAME}-src.tar.gz

LIB_DEPENDS =		tcl-8.5.${P}:lang/tcl/8.5

MAKE_FLAGS =		TK_LIBRARY='$$(prefix)/lib/tcl/tk$$(VERSION)' \
			TCL_GENERIC_DIR='${LOCALBASE}/include/tcl8.5' \
			TCL_PLATFORM_DIR='$$(TCL_GENERIC_DIR)'

FAKE_FLAGS =		INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
			INSTALL_LIBRARY="${INSTALL_DATA}" \
			INSTALL_DATA="${INSTALL_DATA}" \
			INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
			CONFIG_INSTALL_DIR='$$(SCRIPT_INSTALL_DIR)' \
			DEMO_INSTALL_DIR="${WRKINST}${TRUEPREFIX}/share/examples/tk8.5" \
			TK_PKG_DIR='tcl/tk$$(VERSION)'

TEST_FLAGS =		HOME=${TESTHOME} TESTFLAGS="${TESTFLAGS}"
SEPARATE_BUILD =	Yes
CONFIGURE_STYLE =	gnu old

CONFIGURE_ARGS +=	--includedir="${PREFIX}/include/tk8.5" \
			--mandir="${PREFIX}/lib/tcl/tk8.5/man" \
			--sysconfdir="${SYSCONFDIR}" \
			--enable-man-symlinks \
			--disable-rpath \
			--with-tcl="${LOCALBASE}/lib/tcl/tcl8.5" \
			EXTRA_INSTALL="install-private-headers" \
			EXTRA_INSTALL_BINARIES='@@echo "Installing libtk85.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtk85.a $$(LIB_INSTALL_DIR)/libtk85.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtk85.a)' \
			SHLIB_VERSION="${LIBtk85_VERSION}"

ALL_TARGET =		all libtk85.a

TEST_IS_INTERACTIVE =	X11
WRKSRC =		${WRKDIST}/unix
TEST_TARGET =		test

TESTHOME =		${WRKDIR}/testhome
# Use TESTFLAGS to control the Tk tests
TESTFLAGS =

pre-test:
	mkdir -p ${TESTHOME}

post-install:
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/lib/tcl/tk8.5/man
	ln -s libtk85.a ${PREFIX}/lib/libtk85_pic.a
	ln -s libtkstub85.a ${PREFIX}/lib/libtkstub85_pic.a

.include <bsd.port.mk>
@


1.43
log
@Update to 8.5.19.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2016/06/29 16:14:45 espie Exp $
d8 1
a37 1
USE_GROFF =		Yes
@


1.42
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2016/03/15 21:13:32 naddy Exp $
d5 1
a5 1
P =			18
d8 1
a8 2
REVISION =		1
SHARED_LIBS =		tk85 0.14
@


1.41
log
@get rid of NO_SHARED_LIBS and PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2016/03/11 20:28:33 naddy Exp $
d8 1
a8 1
REVISION =		0
@


1.40
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/06/06 14:19:23 stu Exp $
d8 1
d48 3
a52 3
.include <bsd.port.arch.mk>

.if ${NO_SHARED_LIBS:L} == "no"
a53 4
CONFIGURE_ARGS +=	EXTRA_INSTALL_BINARIES='@@echo "Installing libtk85.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtk85.a $$(LIB_INSTALL_DIR)/libtk85.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtk85.a)'
.endif
a67 1
.if ${NO_SHARED_LIBS:L} == "no"
a69 1
.endif
@


1.39
log
@Return to 8.5.18.
Update distinfo.
Port was based on an RC a few days prior to release.
Insignificant difference between RC and released version.
Apologies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/06/06 12:13:03 ajacoutot Exp $
d40 1
a40 2
CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--includedir="${PREFIX}/include/tk8.5" \
@


1.38
log
@Revert tcl and tk update (8.5.18).
tcl distinfo is wrong and prevents half the tree to build.

prodded by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/09/22 16:55:11 stu Exp $
d5 4
a8 3
DISTNAME =		tk8.5.16
PKGNAME =		tk-8.5.16
SHARED_LIBS =		tk85 0.13
d21 1
a21 1
LIB_DEPENDS =		tcl-8.5.16:lang/tcl/8.5
d23 3
a25 3
MAKE_FLAGS +=		TK_LIBRARY='$$(prefix)/lib/tcl/tk$$(VERSION)' \
			TCL_GENERIC_DIR='$$(GENERIC_DIR)' \
			TCL_PLATFORM_DIR='$$(GENERIC_DIR)'
a47 1
			EXTRA_CC_SWITCHES="-I${LOCALBASE}/include/tcl8.5" \
@


1.37
log
@Update to 8.5.18.

Better setting of Tcl include dir.
Improved lib/package/module path config/runtime.
Port improvements for less diff churn on future port updates.
@
text
@d5 3
a7 4
P =			18
DISTNAME =		tk8.5.${P}
PKGNAME =		tk-8.5.${P}
SHARED_LIBS =		tk85 0.14
d20 1
a20 1
LIB_DEPENDS =		tcl-8.5.${P}:lang/tcl/8.5
d22 3
a24 3
MAKE_FLAGS =		TK_LIBRARY='$$(prefix)/lib/tcl/tk$$(VERSION)' \
			TCL_GENERIC_DIR='${LOCALBASE}/include/tcl8.5' \
			TCL_PLATFORM_DIR='$$(TCL_GENERIC_DIR)'
d47 1
@


1.36
log
@Update to 8.5.16. Drop threaded FLAVOR.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/11/05 04:50:38 stu Exp $
d5 4
a8 3
DISTNAME =		tk8.5.16
PKGNAME =		tk-8.5.16
SHARED_LIBS =		tk85 0.13
d21 1
a21 1
LIB_DEPENDS =		tcl-8.5.16:lang/tcl/8.5
d23 3
a25 3
MAKE_FLAGS +=		TK_LIBRARY='$$(prefix)/lib/tcl/tk$$(VERSION)' \
			TCL_GENERIC_DIR='$$(GENERIC_DIR)' \
			TCL_PLATFORM_DIR='$$(GENERIC_DIR)'
a47 1
			EXTRA_CC_SWITCHES="-I${LOCALBASE}/include/tcl8.5" \
@


1.35
log
@Unbreak man page rendering. Thanks to schwarze@@ for roff help.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/10/21 19:14:55 naddy Exp $
d5 3
a7 4
DISTNAME =		tk8.5.15
PKGNAME =		tk-8.5.15
REVISION =		1
SHARED_LIBS =		tk85 0.12
d15 1
a15 1
WANTLIB =		X11 Xext Xft Xss c m tcl85
d20 2
a48 11

FLAVORS =		threaded
FLAVOR ?=

.if ${FLAVOR:Mthreaded}
CONFIGURE_ARGS +=	--enable-threads
WANTLIB +=		pthread
LIB_DEPENDS +=		tcl->=8.5.15,<8.5.16-threaded:lang/tcl/8.5,threaded
.else
LIB_DEPENDS +=		tcl->=8.5.15,<8.5.16-!threaded:lang/tcl/8.5
.endif
@


1.34
log
@remove local changes to generate cat man pages and instead just
install the source man pages; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/09/20 10:10:04 stu Exp $
d7 1
a7 1
REVISION =		0
@


1.33
log
@Update to 8.5.15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/07/06 11:06:36 stu Exp $
d7 1
a29 3
			MAN1_INSTALL_DIR='$$(MAN_INSTALL_DIR)/cat1' \
			MAN3_INSTALL_DIR='$$(MAN_INSTALL_DIR)/cat3' \
			MANN_INSTALL_DIR='$$(MAN_INSTALL_DIR)/catn' \
@


1.32
log
@M88k is elf now.
Skip unneeded elf check in configure.
Whitespace tweaks.
Fix packing lists for shared libs.

Thanks to miod@@ for original patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/06/28 06:13:04 stu Exp $
d5 3
a7 4
DISTNAME =		tk8.5.14
PKGNAME =		tk-8.5.14
REVISION =		0
SHARED_LIBS =		tk85 0.11
d57 1
a57 1
LIB_DEPENDS +=		tcl->=8.5.14,<8.5.15-threaded:lang/tcl/8.5,threaded
d59 1
a59 1
LIB_DEPENDS +=		tcl->=8.5.14,<8.5.15-!threaded:lang/tcl/8.5
a68 1
CONFIGURE_ARGS +=	tcl_cv_ld_elf=yes
@


1.31
log
@Update to 8.5.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/04/28 13:01:34 sebastia Exp $
d7 1
d70 1
d73 1
a73 1
TEST_IS_INTERACTIVE = X11
d75 1
a75 1
TEST_TARGET =	test
@


1.30
log
@move pkgIndex.tcl from PLIST to PFRAG.shared
since its not created on static archs
REVISION bump

OK stu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/11 11:46:16 espie Exp $
d5 3
a7 4
DISTNAME =		tk8.5.13
PKGNAME =		tk-8.5.13
REVISION =		0
SHARED_LIBS =		tk85 0.10
d57 1
a57 1
LIB_DEPENDS +=		tcl->=8.5.13,<8.5.14-threaded:lang/tcl/8.5,threaded
d59 1
a59 1
LIB_DEPENDS +=		tcl->=8.5.13,<8.5.14-!threaded:lang/tcl/8.5
@


1.29
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/02/09 14:49:54 sthen Exp $
d7 1
@


1.28
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/11/19 15:10:48 stu Exp $
a13 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d35 1
a35 1
REGRESS_FLAGS =		HOME=${TESTHOME} TESTFLAGS="${TESTFLAGS}"
d71 1
a71 1
REGRESS_IS_INTERACTIVE = X11
d73 1
a73 1
REGRESS_TARGET =	test
d79 1
a79 1
pre-regress:
@


1.27
log
@Update to 8.5.13.

Ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/08/26 16:57:58 stu Exp $
d57 1
a57 1
.if ${FLAVOR:L:Mthreaded}
@


1.26
log
@Update to 8.5.12.

Ok sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/03/29 13:39:01 sthen Exp $
d5 3
a7 3
DISTNAME =		tk8.5.12
PKGNAME =		tk-8.5.12
SHARED_LIBS =		tk85 0.9
d60 1
a60 1
LIB_DEPENDS +=		tcl->=8.5.12,<8.5.13-threaded:lang/tcl/8.5,threaded
d62 1
a62 1
LIB_DEPENDS +=		tcl->=8.5.12,<8.5.13-!threaded:lang/tcl/8.5
@


1.25
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/11/21 18:31:02 stu Exp $
d5 3
a7 3
DISTNAME =		tk8.5.11
PKGNAME =		tk-8.5.11
SHARED_LIBS =		tk85 0.8
d38 1
a38 1
REGRESS_FLAGS =		HOME=${TESTHOME}
d60 1
a60 1
LIB_DEPENDS +=		tcl->=8.5.11,<8.5.12-threaded:lang/tcl/8.5,threaded
d62 1
a62 1
LIB_DEPENDS +=		tcl->=8.5.11,<8.5.12-!threaded:lang/tcl/8.5
d79 2
@


1.24
log
@Update to tk-8.5.11, use bsd.port.arch.mk.

Ok sebastia@@, sthen@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/10/17 15:19:22 stu Exp $
d39 1
a39 1
SEPARATE_BUILD =	concurrent
@


1.23
log
@Update to 8.5.10, remove patches for changes that have gone upstream,
move man dir to Tk's lib dir, properly preprocess man pages.

ok sebastiap@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/04/17 18:13:10 jasper Exp $
d5 3
a7 3
DISTNAME =		tk8.5.10
PKGNAME =		tk-8.5.10
SHARED_LIBS =		tk85 0.7
a53 9
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
ALL_TARGET =		all libtk85.a
CONFIGURE_ARGS +=	EXTRA_INSTALL_BINARIES='@@echo "Installing libtk85.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtk85.a $$(LIB_INSTALL_DIR)/libtk85.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtk85.a)'
.endif

REGRESS_IS_INTERACTIVE = x11

d60 1
a60 1
LIB_DEPENDS +=		tcl->=8.5.10,<8.5.11-threaded:lang/tcl/8.5,threaded
d62 10
a71 1
LIB_DEPENDS +=		tcl->=8.5.10,<8.5.11-!threaded:lang/tcl/8.5
d74 1
d85 1
a85 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
@


1.22
log
@- remove unnecessary NULL casts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/01/09 14:47:43 espie Exp $
d5 3
a7 4
DISTNAME =		tk8.5.9
PKGNAME =		tk-8.5.9
SHARED_LIBS =		tk85 0.6
REVISION =		1
d18 1
a18 2
WANTLIB += X11 Xau Xdmcp Xext Xft Xrender Xss c expat fontconfig
WANTLIB += freetype m tcl85 z
d23 3
a25 1
MAKE_FLAGS +=		TK_LIBRARY='$$(prefix)/lib/tcl/tk$$(VERSION)'
d31 4
a34 1
			CONFIG_INSTALL_DIR="${WRKINST}${TRUEPREFIX}/lib/tcl/tk8.5" \
d41 1
a41 1
CONFIGURE_STYLE =	autoconf no-autoheader old
d45 1
a45 1
			--mandir="${PREFIX}/man/tk8.5" \
a53 2
AUTOCONF_VERSION =	2.59

a54 1
WANTLIB +=		pthread-stubs xcb
d69 1
a69 1
LIB_DEPENDS +=		tcl->=8.5.9,<8.5.10-threaded:lang/tcl/8.5,threaded
d71 1
a71 1
LIB_DEPENDS +=		tcl->=8.5.9,<8.5.10-!threaded:lang/tcl/8.5
d83 1
a83 1
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/man/tk8.5
@


1.21
log
@not sure this is enough, but fix the LIB_DEPENDS mess to mean something
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/01/05 16:18:09 stu Exp $
d8 1
a8 1
REVISION =		0
d19 2
a20 2
WANTLIB =		X11 Xau Xdmcp Xext Xft Xrender Xss c expat fontconfig freetype m z \
			tcl85
@


1.20
log
@Upgrade to 8.5.9. Update to newer Tcl layout,
consolidate include files into one dir,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/27 11:54:53 espie Exp $
d8 1
a24 2
LIB_DEPENDS =		lang/tcl/8.5>=8.5.9,<8.5.10${FLAVOR:S/^/-/}

d69 3
@


1.19
log
@minor bumps after pkg_create fix: generate catN entry when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/11/22 08:37:04 espie Exp $
d5 3
a7 4
DISTNAME =		tk8.5.8
PKGNAME =		tk-8.5.8
REVISION=		1
SHARED_LIBS =		tk85 0.5
d18 2
a19 1
WANTLIB =		X11 Xau Xdmcp Xext Xft Xrender Xss c expat fontconfig freetype m z
d24 3
a26 5
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
WANTLIB +=		pthread-stubs xcb
MAKE_FLAGS +=		TK_BUILD_EXP_FILE="libtk85.a" \
			TK_EXP_FILE="libtk85.a"
.endif
d32 3
a34 2
			CONFIG_INSTALL_DIR="${WRKINST}${TRUEPREFIX}/lib/tk8.5" \
			DEMO_INSTALL_DIR="${WRKINST}${TRUEPREFIX}/share/examples/tk8.5"
d37 3
a40 3
SEPARATE_BUILD =	concurrent
USE_GROFF =	Yes
CONFIGURE_STYLE =	gnu old
d43 1
a43 1
			--mandir="${PREFIX}/lib/tk8.5/man" \
d47 6
a52 1
			--with-tcl="${LOCALBASE}/lib/tcl8.5"
d54 7
a60 1
CONFIGURE_ENV +=	SHLIB_VERSION="${LIBtk85_VERSION}"
a69 3
LIB_DEPENDS =		tcl->=8.5.8p0,<8.5.9-${FLAVOR}:lang/tcl/8.5
.else
LIB_DEPENDS =		tcl->=8.5.8p0,<8.5.9:lang/tcl/8.5
a70 1
WANTLIB +=		tcl85
d78 1
a78 1
	@@mkdir -p ${TESTHOME}
d81 1
@


1.18
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/06 23:49:20 espie Exp $
d7 1
a7 1
REVISION=		0
@


1.17
log
@convert LIB_DEPENDS in x11 ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/24 21:15:34 ajacoutot Exp $
d60 1
a60 1
LIB_DEPENDS =		:tcl->=8.5.8p0,<8.5.9-${FLAVOR}:lang/tcl/8.5
d62 1
a62 1
LIB_DEPENDS =		:tcl->=8.5.8p0,<8.5.9:lang/tcl/8.5
@


1.16
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/19 08:13:59 espie Exp $
d60 1
a60 1
LIB_DEPENDS =		tcl85:tcl->=8.5.8p0,<8.5.9-${FLAVOR}:lang/tcl/8.5
d62 1
a62 1
LIB_DEPENDS =		tcl85:tcl->=8.5.8p0,<8.5.9:lang/tcl/8.5
d64 1
@


1.15
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/07/30 06:59:00 ajacoutot Exp $
a39 1
USE_X11 =		Yes
@


1.14
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/06/07 18:13:43 jasper Exp $
d41 1
@


1.13
log
@- make 64-bit arches a tad happier too

from sebastian reitenbach
ok stuart cassoff (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/11/21 02:50:23 sthen Exp $
d6 2
a7 1
PKGNAME =		tk-8.5.8p0
@


1.12
log
@Update to 8.5.8, from maintainer Stuart Cassoff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/09/06 10:46:26 ajacoutot Exp $
d6 1
a6 1
PKGNAME =		tk-8.5.8
d18 1
a18 2
WANTLIB =		X11 Xau Xdmcp Xext Xft Xrender Xss c expat fontconfig freetype m z \
			pthread-stubs xcb
d24 1
d59 1
a59 1
LIB_DEPENDS =		tcl85:tcl->=8.5.8,<8.5.9-${FLAVOR}:lang/tcl/8.5
d61 1
a61 1
LIB_DEPENDS =		tcl85:tcl->=8.5.8,<8.5.9:lang/tcl/8.5
@


1.11
log
@Make use of REGRESS_IS_INTERACTIVE=x11

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/08/11 08:42:09 ajacoutot Exp $
d5 3
a7 4
V =			8.5.7
DISTNAME =		tk${V}
PKGNAME =		tk-${V}p0
SHARED_LIBS =		tk85 0.4
d59 1
a59 1
LIB_DEPENDS =		tcl85:tcl->=$V,<8.5.8-${FLAVOR}:lang/tcl/8.5
d61 1
a61 1
LIB_DEPENDS =		tcl85:tcl->=$V,<8.5.8:lang/tcl/8.5
@


1.10
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/04/24 21:13:13 sthen Exp $
d37 1
a37 3
REGRESS_FLAGS =		HOME=${TESTHOME} \
			DISPLAY=${DISPLAY} \
			XAUTHORITY=${XAUTHORITY}
d52 1
a52 2
# This regression test wants an X11 display
REGRESS_IS_INTERACTIVE =Yes
a70 5
.for t in DISPLAY XAUTHORITY
.  if !defined($t)
	@@echo "$t needs to be set to run regress"; exit 1
.  endif
.endfor
@


1.9
log
@update to Tcl/Tk 8.5.7, from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/03/17 00:24:28 sthen Exp $
d7 1
a7 1
PKGNAME =		tk-${V}
d19 2
a20 1
WANTLIB =		X11 Xau Xdmcp Xext Xft Xrender Xss c expat fontconfig freetype m z
@


1.8
log
@- install additional headers needed by forthcoming ports.
- tighten LIB_DEPENDS (required threaded Tcl with threaded Tk).
from maintainer Stuart Cassoff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/12/26 23:36:27 steven Exp $
d5 1
a5 1
V =			8.5.6
d7 2
a8 4
PKGNAME =		tk-${V}p0

SHARED_LIBS =		tk85 0.3

a9 1

a10 1

d42 1
a42 3

AUTOCONF_VERSION =	2.59
CONFIGURE_STYLE =	autoconf no-autoheader old
d51 1
a51 2
CONFIGURE_ENV +=	SHLIB_VERSION="${LIBtk85_VERSION}" \
			CFLAGS=""
d62 1
a62 1
LIB_DEPENDS =		tcl85:tcl->=$V,<8.5.7-${FLAVOR}:lang/tcl/8.5
d64 1
a64 1
LIB_DEPENDS =		tcl85:tcl->=$V,<8.5.7:lang/tcl/8.5
@


1.7
log
@update to 8.5.6

from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/10/21 21:34:41 steven Exp $
d7 1
a7 1
PKGNAME =		tk-${V}
a27 2
LIB_DEPENDS =           tcl85:tcl-${V}:lang/tcl/8.5

d69 3
@


1.6
log
@bugfix update to 8.5.5

from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/01 19:48:46 steven Exp $
d5 1
a5 1
V =			8.5.5
d9 1
a9 1
SHARED_LIBS =		tk85 0.2
@


1.5
log
@update to 8.5.4 and various port cleanups

from maintainer Stuart Cassoff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/04/27 13:50:44 sthen Exp $
d5 1
a5 1
V =			8.5.4
d9 1
a9 1
SHARED_LIBS =		tk85 0.1
@


1.4
log
@fix LIB_DEPENDS; this caused a problem installing Tk 8.4 when
Tcl 8.5 was already installed.  ok steven@@
@
text
@d3 1
a3 1
COMMENT=	graphical toolkit for Tcl
d5 3
a7 1
VERSION=	8.5.2
d9 1
a9 40
DISTNAME=	tk${VERSION}
PKGNAME=	tk-${VERSION}p2
SHARED_LIBS=	tk85 0.0
CATEGORIES=	x11 x11/tk
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=tcl/}
DISTFILES=	tk${VERSION}-src.tar.gz
WANTLIB=	X11 Xau Xdmcp Xext Xft Xrender Xss c expat fontconfig freetype m z

MAINTAINER=	Stuart Cassoff <stwo@@users.sourceforge.net>
HOMEPAGE=	http://www.tcl.tk/

# BSD 
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

LIB_DEPENDS=    tcl85:tcl-8.5.*:lang/tcl/8.5

FLAVORS=	threaded
FLAVOR?=

WRKSRC=		${WRKDIST}/unix

USE_X11=	Yes
SEPARATE_BUILD=	concurrent
AUTOCONF_VERSION= 2.59
CONFIGURE_STYLE= autoconf no-autoheader old
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--with-tcl="${LOCALBASE}/lib/tcl8.5" \
		--includedir="${LOCALBASE}/include/tk8.5" \
		--mandir="${LOCALBASE}/lib/tk8.5/man" \
		--sysconfdir="${SYSCONFDIR}"

CONFIGURE_ENV+=	LIBtk85_VERSION="${LIBtk85_VERSION}"
CONFIGURE_ENV+= CFLAGS=""

FAKE_FLAGS=	INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
		INSTALL_LIBRARY="${INSTALL_DATA}" \
		INSTALL_DATA="${INSTALL_DATA}"
d11 56
a66 1
FAKE_FLAGS+=INSTALL_PROGRAM="${INSTALL_PROGRAM}"
d69 2
a70 2
CONFIGURE_ARGS+=--enable-threads
WANTLIB+=pthread
d73 4
a76 6
# This regression test wants an X11 display
REGRESS_IS_INTERACTIVE=	Yes
REGRESS_TARGET=	test
REGRESS_FLAGS=	HOME=${TESTHOME}
REGRESS_FLAGS+=	DISPLAY=${DISPLAY} XAUTHORITY=${XAUTHORITY}
TESTHOME=${WRKDIR}/testhome
d87 2
d90 1
@


1.3
log
@Change tclConfig.sh to set TCL_SRC_DIR as the directory holding
the installed headers, rather than the port build directory.

Remove configure.in patch ; obsoleted by a similar change to
tclConfig.sh in lang/tcl/8.5

From Stuart Cassoff (maintainer), ok deanna
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/04/25 19:34:21 deanna Exp $
d8 1
a8 1
PKGNAME=	tk-${VERSION}p1
d24 1
a24 1
LIB_DEPENDS=    tcl85:tcl->=8.5:lang/tcl/8.5
@


1.2
log
@Fix Stuart's email address.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/04/25 14:17:25 deanna Exp $
d8 1
a8 1
PKGNAME=	tk-${VERSION}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/01/31 17:06:39 espie Exp $
d8 1
a8 1
PKGNAME=	tk-${VERSION}
d15 1
a15 1
MAINTAINER=	Stuart Cassoff <aa72aa60@@sympatico.ca>
@


1.1.1.1
log
@import tk 8.5

Highlights of Tk 8.5

    * New modern theming engine: New and complementary widgets
      that make use of platform-specific theming on Mac OS X and
      Windows to better fit in with those environments, and
      feature an improved look and feel under X11.
    * New widgets: Part of the themed widget set, Tk now has
      core notebook, combobox, treeview and progressbar widgets.
    * text widget: Smooth scrolling, widget peering, and
      improved procedures for counting and replacing text.
    * Font rendering: Now uses anti-aliased text under X11, and
      a more modern text engine (ATSUI) on Mac OS X.
    * Additional improvements: Window transparency, new
      fullscreen option for windows, enhancements to specific
      widgets and window layout, and more.

from Stuart Cassoff (MAINTAINER)

ok steven@@

@
text
@@
