head	1.31;
access;
symbols
	OPENBSD_5_4:1.30.0.2
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.27.0.4
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.27.0.2
	OPENBSD_5_2_BASE:1.27
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.4
	OPENBSD_5_0:1.26.0.2
	OPENBSD_5_0_BASE:1.26
	OPENBSD_4_9:1.25.0.2
	OPENBSD_4_9_BASE:1.25
	OPENBSD_4_8:1.19.0.2
	OPENBSD_4_8_BASE:1.19
	OPENBSD_4_7:1.18.0.2
	OPENBSD_4_7_BASE:1.18
	OPENBSD_4_6:1.16.0.4
	OPENBSD_4_6_BASE:1.16
	OPENBSD_4_5:1.16.0.2
	OPENBSD_4_5_BASE:1.16
	OPENBSD_4_4:1.15.0.2
	OPENBSD_4_4_BASE:1.15
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.13.0.4
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.13.0.2
	OPENBSD_4_1_BASE:1.13
	OPENBSD_4_0:1.11.0.4
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.2
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.9.0.4
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.9.0.2
	OPENBSD_3_7_BASE:1.9
	OPENBSD_3_6:1.8.0.2
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.4.0.2
	OPENBSD_3_5_BASE:1.4
	jose_2003-nov-19:1.1.1.1
	jose:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2013.09.24.20.05.05;	author stu;	state dead;
branches;
next	1.30;

1.30
date	2013.07.06.11.06.17;	author stu;	state Exp;
branches;
next	1.29;

1.29
date	2013.06.28.06.12.14;	author stu;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.11.11.46.16;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2012.03.29.13.39.01;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2011.04.17.18.13.10;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2011.01.05.16.21.06;	author stu;	state Exp;
branches;
next	1.24;

1.24
date	2010.11.27.11.54.53;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.22.08.37.04;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.06.23.49.20;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.10.24.21.15.34;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.19.08.13.59;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.07.30.06.59.00;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.09.06.10.46.26;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2009.08.11.08.42.09;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2009.01.16.00.02.32;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2008.05.02.13.17.16;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2007.09.15.20.04.25;	author merdely;	state Exp;
branches;
next	1.13;

1.13
date	2007.01.31.17.06.39;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2006.10.18.14.27.43;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2006.01.08.20.56.08;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2005.11.03.18.28.56;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2004.12.19.17.27.01;	author alek;	state Exp;
branches;
next	1.8;

1.8
date	2004.08.07.06.16.38;	author kevlo;	state Exp;
branches;
next	1.7;

1.7
date	2004.07.04.05.37.09;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2004.05.07.15.28.32;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2004.04.09.21.47.19;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2004.03.04.17.49.26;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2003.12.17.04.57.21;	author jose;	state Exp;
branches;
next	1.2;

1.2
date	2003.12.01.05.48.01;	author jose;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.19.15.45.58;	author jose;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.11.19.15.45.58;	author jose;	state Exp;
branches;
next	;


desc
@@


1.31
log
@Bye bye 8.4.
@
text
@# $OpenBSD: Makefile,v 1.30 2013/07/06 11:06:17 stu Exp $

COMMENT =		graphical toolkit for Tcl

DISTNAME =		tk8.4.20
PKGNAME =		tk-8.4.20
REVISION =		0
SHARED_LIBS =		tk84 2.0
CATEGORIES =		x11 x11/tk
HOMEPAGE =		http://www.tcl.tk/
MAINTAINER =		Stuart Cassoff <stwo@@users.sourceforge.net>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		X11 c m tcl84

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=tcl/}
DISTFILES =		${DISTNAME}-src.tar.gz
LIB_DEPENDS =		tcl-8.4.20:lang/tcl/8.4

MAKE_FLAGS +=		TK_LIBRARY='$$(prefix)/lib/tcl/tk$$(VERSION)'

FAKE_FLAGS =		INSTALL_DATA_DIR="${INSTALL_DATA_DIR}" \
			INSTALL_LIBRARY="${INSTALL_DATA}" \
			INSTALL_DATA="${INSTALL_DATA}" \
			INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
			CONFIG_INSTALL_DIR='$$(SCRIPT_INSTALL_DIR)' \
			TK_PKG_DIR='tcl/tk$$(VERSION)'

TEST_FLAGS =		HOME=${TESTHOME}
SEPARATE_BUILD =	Yes
USE_GROFF =		Yes
CONFIGURE_STYLE =	autoconf no-autoheader old

CONFIGURE_ARGS +=	${CONFIGURE_SHARED} \
			--includedir="${LOCALBASE}/include/tk8.4" \
			--mandir="${PREFIX}/lib/tcl/tk8.4/man" \
			--sysconfdir="${SYSCONFDIR}" \
			--enable-man-symlinks \
			--disable-rpath \
			--with-tcl="${LOCALBASE}/lib/tcl/tcl8.4"

CONFIGURE_ENV +=	SHLIB_VERSION="${LIBtk84_VERSION}" \
			EXTRA_INSTALL="install-private-headers" \
			EXTRA_CC_SWITCHES="-I${LOCALBASE}/include/tcl8.4"

AUTOCONF_VERSION =	2.13

.include <bsd.port.arch.mk>

.if ${NO_SHARED_LIBS:L} == "no"
ALL_TARGET =		all libtk84.a
CONFIGURE_ENV +=	EXTRA_INSTALL_BINARIES='@@echo "Installing libtk84.a to $$(LIB_INSTALL_DIR)/" \
			&& $$(INSTALL_DATA) libtk84.a $$(LIB_INSTALL_DIR)/libtk84.a \
			&& (cd $$(LIB_INSTALL_DIR) ; $$(RANLIB) libtk84.a)'
CONFIGURE_ENV +=	tcl_cv_ld_elf=yes
.endif

TEST_IS_INTERACTIVE =	x11
WRKSRC =		${WRKDIST}/unix
TEST_TARGET =		test

TESTHOME =		${WRKDIR}/testhome

pre-test:
	@@mkdir -p ${TESTHOME}

post-install:
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/lib/tcl/tk8.4/man
.if ${NO_SHARED_LIBS:L} == "no"
	ln -s libtk84.a ${PREFIX}/lib/libtk84_pic.a
	ln -s libtkstub84.a ${PREFIX}/lib/libtkstub84_pic.a
.endif

.include <bsd.port.mk>
@


1.30
log
@M88k is elf now.
Skip unneeded elf check in configure.
Whitespace tweaks.
Fix packing lists for shared libs.

Thanks to miod@@ for original patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/06/28 06:12:14 stu Exp $
@


1.29
log
@Update to 8.4.20.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/11 11:46:16 espie Exp $
d7 1
d50 3
a52 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
d57 1
d60 1
a60 1
TEST_IS_INTERACTIVE = x11
d62 1
a62 1
TEST_TARGET =	test
d71 1
a71 1
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
@


1.28
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/03/29 13:39:01 sthen Exp $
d5 3
a7 4
DISTNAME =		tk8.4.19
PKGNAME =		tk-8.4.19
REVISION =		3
SHARED_LIBS =		tk84 1.1
d19 1
a19 1
LIB_DEPENDS =		tcl-8.4.19:lang/tcl/8.4
d27 1
d37 1
a37 1
			--mandir="${LOCALBASE}/man/tk8.4" \
d40 1
d66 1
a66 1
	${INSTALL_DATA} ${WRKDIST}/license.terms ${PREFIX}/man/tk8.4
@


1.27
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/04/17 18:13:10 jasper Exp $
a14 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d30 1
a30 1
REGRESS_FLAGS =		HOME=${TESTHOME}
d55 1
a55 1
REGRESS_IS_INTERACTIVE = x11
d57 1
a57 1
REGRESS_TARGET =	test
d61 1
a61 1
pre-regress:
@


1.26
log
@- remove unnecessary NULL casts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/01/05 16:21:06 stu Exp $
d34 1
a34 1
SEPARATE_BUILD =	concurrent
@


1.25
log
@Update to newer Tcl layout,
consolidate include files into one dir,
improved building wrt threads/compiler flags, etc.

ok landry@@, sebastiap@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/11/27 11:54:53 espie Exp $
d7 1
a7 1
REVISION =		2
@


1.24
log
@minor bumps after pkg_create fix: generate catN entry when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/22 08:37:04 espie Exp $
d5 3
a7 5
V =			8.4.19
DISTNAME =		tk${V}
PKGNAME =		tk-${V}
REVISION=		1

a8 1

a9 1

a10 1

d19 1
a19 1
WANTLIB =		X11 c m pthread-stubs xcb
d23 1
d25 1
a25 7
LIB_DEPENDS =           tcl-${V}:lang/tcl/8.4
WANTLIB +=		tcl84

.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
MAKE_FLAGS +=		TK_BUILD_EXP_FILE="libtk84.a" \
			TK_EXP_FILE="libtk84.a"
.endif
d30 2
a31 1
			INSTALL_PROGRAM="${INSTALL_PROGRAM}"
a33 1

d36 1
a37 2
AUTOCONF_VERSION =	2.13
CONFIGURE_STYLE =	autoconf no-autoheader old
d40 1
a40 1
			--mandir="${LOCALBASE}/lib/tk8.4/man" \
d43 1
a43 1
			--with-tcl="${LOCALBASE}/lib/tcl8.4"
d46 11
a56 1
			CFLAGS=""
a58 1

d68 1
@


1.23
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/06 23:49:20 espie Exp $
d8 1
a8 1
REVISION=		0
@


1.22
log
@convert LIB_DEPENDS in x11 ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/10/24 21:15:34 ajacoutot Exp $
d29 1
a29 1
LIB_DEPENDS =           :tcl-${V}:lang/tcl/8.4
d45 1
a45 1
USE_GROFF =	Yes
@


1.21
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/19 08:13:59 espie Exp $
d29 2
a30 1
LIB_DEPENDS =           tcl84:tcl-${V}:lang/tcl/8.4
@


1.20
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/07/30 06:59:00 ajacoutot Exp $
a43 1
USE_X11 =		Yes
@


1.19
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/09/06 10:46:26 ajacoutot Exp $
d45 1
@


1.18
log
@Make use of REGRESS_IS_INTERACTIVE=x11

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2009/08/11 08:42:09 ajacoutot Exp $
d7 2
a8 1
PKGNAME =		tk-${V}p0
@


1.17
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2009/01/16 00:02:32 sthen Exp $
d40 1
a40 3
REGRESS_FLAGS =		HOME=${TESTHOME} \
			DISPLAY=${DISPLAY} \
			XAUTHORITY=${XAUTHORITY}
d57 1
a57 2
# This regression test wants an X11 display
REGRESS_IS_INTERACTIVE =Yes
a64 5
.for t in DISPLAY XAUTHORITY
.  if !defined($t)
	@@echo "$t needs to be set to run regress"; exit 1
.  endif
.endfor
@


1.16
log
@update to 8.4.19, from new maintainer Stuart Cassoff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/05/02 13:17:16 sthen Exp $
d7 1
a7 1
PKGNAME =		tk-${V}
d23 1
a23 1
WANTLIB =		X11 c m
@


1.15
log
@fix LIB_DEPENDS; this caused a problem installing Tk 8.4 when
Tcl 8.5 was already installed.  ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/09/15 20:04:25 merdely Exp $
d3 1
a3 1
COMMENT=	graphical toolkit for Tcl
d5 53
a57 1
VERSION=	8.4.7
a58 39
DISTNAME=	tk${VERSION}-src
PKGNAME=	tk-${VERSION}p2
SHARED_LIBS=	tk84 1.0
CATEGORIES=	x11 x11/tk
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=tcl/}

HOMEPAGE=	http://www.tcl.tk/

# BSD 
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		X11 c m

LIB_DEPENDS=    tcl84:tcl-8.4.*:lang/tcl/8.4

MAKE_FLAGS=	CFLAGS="${CFLAGS}"
FAKE_FLAGS=	INSTALL="install -c" INSTALL_ROOT="${WRKINST}" \
		BASE_INCLUDE_DIR='$$(prefix)/include/tk$$(VERSION)' \
		INCLUDE_INSTALL_DIR='$$(INSTALL_ROOT)$$(BASE_INCLUDE_DIR)' \
		GENERIC_INCLUDE_INSTALL_DIR='$$(BASE_INCLUDE_DIR)/generic' \
		UNIX_INCLUDE_INSTALL_DIR='$$(BASE_INCLUDE_DIR)/unix' \
		MAN_INSTALL_DIR='$${INSTALL_ROOT}$$(TK_LIBRARY)/man'

SEPARATE_BUILD=	simple
USE_X11=	Yes
AUTOCONF_VERSION=2.13
CONFIGURE_STYLE=autoconf no-autoheader
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--with-tcl="${LOCALBASE}/lib/tcl8.4"
CONFIGURE_ENV=  PORTSDIR="${PORTSDIR}" \
		LIBtk84_VERSION="${LIBtk84_VERSION}"

WRKDIST=	${WRKDIR}/tk${VERSION}/unix

REGRESS_TARGET=test
REGRESS_DEPENDS=::lang/tcl/8.4:regress
REGRESS_FLAGS=TCL_BIN_DIR=`cd ${PORTSDIR}/lang/tcl/8.4 && ${MAKE} show=WRKBUILD`
d60 14
a73 2
REGRESS_FLAGS+=DISPLAY=${DISPLAY} XAUTHORITY=${XAUTHORITY}
REGRESS_IS_INTERACTIVE=Yes
d76 2
a77 1
	@@strip ${PREFIX}/bin/wish8.4
d79 1
@


1.14
log
@Remove surrounding quotes in COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/01/31 17:06:39 espie Exp $
d8 1
a8 1
PKGNAME=	tk-${VERSION}p1
d22 1
a22 1
LIB_DEPENDS=    tcl84:tcl->=8.4:lang/tcl/8.4
@


1.13
log
@provide tkstub84_pic.a to help with libtool...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/10/18 14:27:43 naddy Exp $
d3 1
a3 1
COMMENT=	"graphical toolkit for Tcl"
@


1.12
log
@unconditionally use -fPIC; sync patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/01/08 20:56:08 naddy Exp $
d8 1
a8 1
PKGNAME=	tk-${VERSION}p0
d52 1
@


1.11
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/11/03 18:28:56 naddy Exp $
d8 1
a8 1
PKGNAME=	tk-${VERSION}
@


1.10
log
@Always explicitly set the AUTOCONF_VERSION to use.  In some cases
the default was not appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/12/19 17:27:01 alek Exp $
d9 1
d32 1
a32 1
SEPARATE_BUILD=	concurrent
d35 5
a39 4
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS+= ${CONFIGURE_SHARED}
CONFIGURE_ARGS+= --with-tcl="${LOCALBASE}/lib/tcl8.4"
CONFIGURE_ENV=  PORTSDIR="${PORTSDIR}"
@


1.9
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/08/07 06:16:38 kevlo Exp $
d33 1
@


1.8
log
@update to tk 8.4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/07/04 05:37:09 brad Exp $
d19 1
@


1.7
log
@no more --enable-static
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/05/07 15:28:32 naddy Exp $
d5 1
a5 1
VERSION=	8.4.6
@


1.6
log
@Remove maintainer by his request.  Thanks, Jose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/04/09 21:47:19 naddy Exp $
d34 1
a34 1
CONFIGURE_ARGS+= --enable-static --with-tcl="${LOCALBASE}/lib/tcl8.4"
@


1.5
log
@maintenance update to Tcl/Tk 8.4.6; from Jose Nazario <jose@@monkey.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/03/04 17:49:26 espie Exp $
a12 2

MAINTAINER=	Jose Nazario <jose@@crimelabs.net>
@


1.4
log
@explicitly tag no-autoheader some ports for which re-running it after autoconf
is a problem.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2003/12/17 04:57:21 jose Exp $
d5 1
a5 1
VERSION=	8.4.5
@


1.3
log
@
update to 8.4.5
update book title, ISBN in DESCR
update master site to sourceforge

ok brad@@, naddy@@, sturm@@, thank you for testing on various archs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/12/01 05:48:01 jose Exp $
d34 1
a34 1
CONFIGURE_STYLE= autoconf
@


1.2
log
@
some things noticed by Stuart Cassoff <stwo@@telus.net>:
- fix HOMEPAGE ...
- PLIST exec/unexec about manpages
- flesh out DESCR some
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/11/19 15:45:58 jose Exp $
d5 1
a5 1
VERSION=	8.4.4
d10 1
a10 1
MASTER_SITES=	${MASTER_SITE_TCLTK:=tcl8_4/}
d16 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/11/29 09:48:52 kevlo Exp $
d12 1
a12 1
HOMEPAGE=	http://dev.scriptics.com/software/tcltk/
@


1.1.1.1
log
@
i've had this sitting in my tree for about a month but i haven't been
sitting still long enough to import it right.

import of tcl/tk 8.4.4. tested by many, feedback from kevlo, mattheui,
many others ... thank you, ok'd by naddy@@
@
text
@@
