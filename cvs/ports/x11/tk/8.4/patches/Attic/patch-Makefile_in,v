head	1.5;
access;
symbols
	OPENBSD_4_4:1.4.0.16
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.14
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.12
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.10
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.8
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.6
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	jose_2003-nov-19:1.1.1.1
	jose:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2009.01.16.00.02.32;	author sthen;	state dead;
branches;
next	1.4;

1.4
date	2004.12.05.11.39.06;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2004.07.03.21.05.52;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2004.05.20.21.25.46;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2003.11.19.15.45.58;	author jose;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.11.19.15.45.58;	author jose;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to 8.4.19, from new maintainer Stuart Cassoff.
@
text
@$OpenBSD: patch-Makefile_in,v 1.4 2004/12/05 11:39:06 sturm Exp $
--- Makefile.in.orig	Mon Mar  1 18:04:48 2004
+++ Makefile.in	Sat Jul  3 13:45:56 2004
@@@@ -390,7 +390,7 @@@@ DEMOPROGS = browse hello ixset rmt rolod
 
 all: binaries libraries doc
 
-binaries: ${LIB_FILE} ${STUB_LIB_FILE} wish
+binaries: ${LIB_FILE} ${STUB_LIB_FILE} libtk84.a wish
 
 libraries:
 
@@@@ -410,6 +410,11 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
 	rm -f $@@
 	@@MAKE_STUB_LIB@@
 
+libtk84.a: ${OBJS}
+	rm -f libtk84.a
+	ar cr libtk84.a ${OBJS}
+	$(RANLIB) libtk84.a
+
 # Make target which outputs the list of the .o contained in the Tk lib
 # usefull to build a single big shared library containing Tcl/Tk and other
 # extensions.  used for the Tcl Plugin.  -- dl
@@@@ -533,10 +538,14 @@@@ install-binaries: $(TK_LIB_FILE) $(TK_ST
 	@@echo "Installing $(LIB_FILE) to $(LIB_INSTALL_DIR)/"
 	@@@@INSTALL_LIB@@
 	@@chmod 555 $(LIB_INSTALL_DIR)/$(LIB_FILE)
+	@@echo "Installing libtk84.a"
+	@@$(INSTALL_DATA) libtk84.a $(LIB_INSTALL_DIR)/libtk84.a
+	@@chmod 555 $(LIB_INSTALL_DIR)/libtk84.a
 	@@echo "Installing wish as $(BIN_INSTALL_DIR)/wish$(VERSION)"
 	@@$(INSTALL_PROGRAM) wish $(BIN_INSTALL_DIR)/wish$(VERSION)
 	@@echo "Installing tkConfig.sh to $(LIB_INSTALL_DIR)/"
-	@@$(INSTALL_DATA) tkConfig.sh $(LIB_INSTALL_DIR)/tkConfig.sh
+	@@mkdir -p $(LIB_INSTALL_DIR)/tk$(VERSION)
+	@@$(INSTALL_DATA) tkConfig.sh $(LIB_INSTALL_DIR)/tk$(VERSION)/tkConfig.sh
 	@@if test "$(TK_BUILD_EXP_FILE)" != ""; then \
 	    echo "Installing $(TK_EXP_FILE) to $(LIB_INSTALL_DIR)/"; \
 	    $(INSTALL_DATA) $(TK_BUILD_EXP_FILE) \
@@@@ -549,6 +558,7 @@@@ install-binaries: $(TK_LIB_FILE) $(TK_ST
 
 install-libraries:
 	@@for i in $(INCLUDE_INSTALL_DIR) \
+		$(INSTALL_ROOT)$(GENERIC_INCLUDE_INSTALL_DIR) $(INSTALL_ROOT)$(UNIX_INCLUDE_INSTALL_DIR) \
 		$(SCRIPT_INSTALL_DIR) $(SCRIPT_INSTALL_DIR)/images \
 		$(SCRIPT_INSTALL_DIR)/msgs; \
 	    do \
@@@@ -563,11 +573,19 @@@@ install-libraries:
 	    chmod +x $(UNIX_DIR)/install-sh; \
 	    fi
 	@@echo "Installing header files";
-	@@for i in $(GENERIC_DIR)/tk.h $(GENERIC_DIR)/tkDecls.h \
-		$(GENERIC_DIR)/tkPlatDecls.h ; \
+	@@for i in $(GENERIC_DIR)/*.h ; \
 	    do \
-	    $(INSTALL_DATA) $$i $(INCLUDE_INSTALL_DIR); \
+	    echo "Installing $$i"; \
+	    $(INSTALL_DATA) $$i $(INSTALL_ROOT)$(GENERIC_INCLUDE_INSTALL_DIR); \
+	    done
+	@@for i in $(UNIX_DIR)/*.h ; \
+	    do \
+	    $(INSTALL_DATA) $$i $(INSTALL_ROOT)$(UNIX_INCLUDE_INSTALL_DIR); \
 	    done;
+	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tk.h $(INCLUDE_INSTALL_DIR)/tk.h
+	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tkDecls.h $(INCLUDE_INSTALL_DIR)/tkDecls.h
+	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tkPlatDecls.h $(INCLUDE_INSTALL_DIR)/tkPlatDecls.h
+	@@ln -sf $(GENERIC_INCLUDE_INSTALL_DIR)/tkIntXlibDecls.h $(INCLUDE_INSTALL_DIR)/tkIntXlibDecls.h
 	@@echo "Installing library files to $(SCRIPT_INSTALL_DIR)";
 	@@for i in $(SRC_DIR)/library/*.tcl $(GENERIC_DIR)/prolog.ps \
 	        $(SRC_DIR)/library/tclIndex $(UNIX_DIR)/tkAppInit.c; \
@


1.4
log
@Under unclear circumstances parts of tk are recompiled in fake stage.
In this case using PREFIX in a Makefile to find installed files is
obviously wrong. In 8.3 and 8.4 this part of the patch is not necessary
at all, so just remove it. In 8.0 use TCL_LIB_SPEC, as is used in 8.3
and 8.4.

problem noted by Rod.. Whitworth <listen at witworx.com>
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.3 2004/07/03 21:05:52 jolan Exp $
@


1.3
log
@hppa has shared libs now
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_in,v 1.2 2004/05/20 21:25:46 miod Exp $
a3 9
@@@@ -227,7 +227,7 @@@@ TCL_STUB_FLAGS		= @@TCL_STUB_FLAGS@@
 # Libraries to use when linking.  This definition is determined by the
 # configure script.
 LIBS = @@LIBS@@ $(X11_LIB_SWITCHES) @@DL_LIBS@@ @@MATH_LIBS@@
-WISH_LIBS = $(TCL_LIB_SPEC) @@LIBS@@ $(X11_LIB_SWITCHES) @@DL_LIBS@@ @@MATH_LIBS@@
+WISH_LIBS = -L${PREFIX}/lib -ltcl84 @@LIBS@@ $(X11_LIB_SWITCHES) @@DL_LIBS@@ @@MATH_LIBS@@
 
 # The symbol below provides support for dynamic loading and shared
 # libraries.  See configure.in for a description of what it means.
@


1.2
log
@Correctly configure tcl and tk 8.4 on architectures which lack shared
libraries, though hppa might need more work.

prodded by jolan@@; ok jolan@@ pval@@
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile_in,v 1.1.1.1 2003/11/19 15:45:58 jose Exp $
--- Makefile.in.orig	2004-03-02 00:04:48.000000000 +0000
+++ Makefile.in	2004-05-17 10:34:16.000000000 +0000
d65 2
a66 1
+	    do \
d71 1
a71 2
 	    do \
-	    $(INSTALL_DATA) $$i $(INCLUDE_INSTALL_DIR); \
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD: patch-Makefile_in,v 1.2 2002/12/02 08:01:17 kevlo Exp $
--- Makefile.in.orig	Mon Jul 21 18:29:44 2003
+++ Makefile.in	Tue Aug 19 22:45:54 2003
d13 1
a13 1
@@@@ -389,7 +389,7 @@@@ DEMOPROGS = browse hello ixset rmt rolod
d22 1
a22 1
@@@@ -409,6 +409,11 @@@@ ${STUB_LIB_FILE}: ${STUB_LIB_OBJS}
d34 1
a34 1
@@@@ -532,10 +537,14 @@@@ install-binaries: $(TK_LIB_FILE) $(TK_ST
d50 1
a50 1
@@@@ -548,6 +557,7 @@@@ install-binaries: $(TK_LIB_FILE) $(TK_ST
d58 1
a58 1
@@@@ -562,11 +572,19 @@@@ install-libraries:
d65 1
a65 2
 	    do \
-	    $(INSTALL_DATA) $$i $(INCLUDE_INSTALL_DIR); \
d70 2
a71 1
+	    do \
@


1.1.1.1
log
@
i've had this sitting in my tree for about a month but i haven't been
sitting still long enough to import it right.

import of tcl/tk 8.4.4. tested by many, feedback from kevlo, mattheui,
many others ... thank you, ok'd by naddy@@
@
text
@@
