head	1.5;
access;
symbols
	OPENBSD_2_9:1.4.0.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.1.1.1.0.2
	OPENBSD_2_7_BASE:1.1.1.1
	kevlo_2000-Mar-27:1.1.1.1
	kevlo:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2001.05.12.09.07.25;	author kevlo;	state dead;
branches;
next	1.4;

1.4
date	2000.11.02.23.38.15;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2000.07.19.05.01.45;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2000.05.24.02.10.14;	author kevlo;	state Exp;
branches;
next	1.1;

1.1
date	2000.03.27.02.25.17;	author kevlo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.03.27.02.25.17;	author kevlo;	state Exp;
branches
	1.1.1.1.2.1;
next	;

1.1.1.1.2.1
date	2000.09.15.05.25.30;	author marc;	state Exp;
branches;
next	;


desc
@@


1.5
log
@upgrade to version 8.3.3
@
text
@--- configure.orig	Tue Aug  8 14:19:32 2000
+++ configure	Thu Nov  2 10:42:54 2000
@@@@ -1868,13 +1868,23 @@@@
 if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   
-		# NetBSD/SPARC needs -fPIC, -fpic will not do.
-		SHLIB_CFLAGS="-fPIC"
-		SHLIB_LD="ld -Bshareable -x"
+		# OpenBSD/SPARC needs -fPIC, -fpic will not do.
+		case `machine` in
+		sparc)
+		    SHLIB_CFLAGS="-fPIC";;
+		 *)
+		    SHLIB_CFLAGS="-fpic";;
+		esac
+		SHLIB_LD="${CC} -shared ${SHLIB_CFLAGS}"
 		SHLIB_LD_LIBS=""
 		SHLIB_SUFFIX=".so"
 		DL_OBJS="tclLoadDl.o"
-		DL_LIBS=""
+		case `machine` in
+		powerpc)
+			DL_LIBS="-ldl";;
+		*)
+			DL_LIBS="";;
+		esac
 		LDFLAGS=""
 		LD_SEARCH_FLAGS=""
 		echo $ac_n "checking for ELF""... $ac_c" 1>&6
@@@@ -1896,7 +1906,7 @@@@
 else
   rm -rf conftest*
   echo "$ac_t""no" 1>&6
-		    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.0'
+		    SHARED_LIB_SUFFIX='${TCL_TRIM_DOTS}\$\{DBGX\}.so.1.3'
 		
 fi
 rm -f conftest*
@@@@ -2382,6 +2392,7 @@@@
 	echo "$ac_t""no" 1>&6
     fi
 
+TCL_SRC_DIR=${prefix}/include/tcl${TCL_VERSION}
 
 LIB_RUNTIME_DIR='${LIB_RUNTIME_DIR}'
 
@@@@ -4089,14 +4100,13 @@@@
     TK_SHLIB_CFLAGS="${SHLIB_CFLAGS}"
     TK_LIB_FILE=libtk${TK_SHARED_LIB_SUFFIX}
     MAKE_LIB="\${SHLIB_LD} -o \${TK_LIB_FILE} \${OBJS} \$(TK_LD_SEARCH_FLAGS) ${TCL_STUB_LIB_SPEC} \${LIBS}"
-    RANLIB=":"
 
 #    TCL_STUB_FLAGS="-DUSE_TCL_STUBS"
     TCL_STUB_FLAGS=""
 else
     TK_SHLIB_CFLAGS=""
     TK_LIB_FILE=libtk${TK_UNSHARED_LIB_SUFFIX}
-    MAKE_LIB="ar cr \${TK_LIB_FILE} \${OBJS}"
+    MAKE_LIB="ar cr \${TK_LIB_FILE} \${OBJS}; \${RANLIB} \${TK_LIB_FILE}"
 
     TCL_STUB_FLAGS=""
 fi
@@@@ -4139,7 +4149,7 @@@@
 # Replace ${VERSION} with contents of ${TK_VERSION}
 eval "STUB_LIB_FILE=libtkstub${TK_UNSHARED_LIB_SUFFIX}"
 
-MAKE_STUB_LIB="ar cr \${STUB_LIB_FILE} \${STUB_LIB_OBJS}"
+MAKE_STUB_LIB="ar cr \${STUB_LIB_FILE} \${STUB_LIB_OBJS}; \${RANLIB} \${STUB_LIB_FILE}"
 
 TK_STUB_LIB_FILE=${STUB_LIB_FILE}
 
@


1.4
log
@Fix ppc build. From Dale.
@
text
@@


1.3
log
@fix mistake in this patch to the autoconf script, the original values for
SHLIB_CFLAGS and SHLIB_LD were being used because they were not removed.
@
text
@d1 3
a3 3
--- configure.orig	Wed Apr 26 16:59:20 2000
+++ configure	Wed Jul 19 00:59:46 2000
@@@@ -1868,9 +1868,14 @@@@
d17 1
a17 1
+		SHLIB_LD="ld -Bshareable -Bforcearchive -x"
d21 11
a31 1
@@@@ -1896,7 +1901,7 @@@@
d40 1
a40 1
@@@@ -2382,6 +2387,7 @@@@
d48 1
a48 1
@@@@ -4089,14 +4095,13 @@@@
d64 1
a64 1
@@@@ -4139,7 +4144,7 @@@@
@


1.2
log
@Upgrade to version 8.3.1
@
text
@d1 3
a3 3
--- configure.orig	Wed May 24 01:27:59 2000
+++ configure	Wed May 24 01:31:42 2000
@@@@ -1868,7 +1868,14 @@@@
d8 3
a10 1
+		# OpenBSD needs -fPIC, -fpic will not do.
a17 2
 		SHLIB_CFLAGS="-fPIC"
 		SHLIB_LD="ld -Bshareable -x"
d19 3
a21 1
@@@@ -1896,7 +1903,7 @@@@
d30 1
a30 1
@@@@ -2382,6 +2389,7 @@@@
d38 1
a38 1
@@@@ -4089,14 +4097,13 @@@@
d54 1
a54 1
@@@@ -4139,7 +4146,7 @@@@
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- configure.orig	Wed Mar 22 21:48:51 2000
+++ configure	Wed Mar 22 21:53:56 2000
@@@@ -1794,9 +1794,14 @@@@
a7 2
-		SHLIB_CFLAGS="-fPIC"
-		SHLIB_LD="ld -Bshareable -x"
d12 1
a12 1
+                *)
d14 1
a14 1
+                esac
d16 2
d19 1
a19 3
 		SHLIB_SUFFIX=".so"
 		DL_OBJS="tclLoadDl.o"
@@@@ -1822,7 +1827,7 @@@@
d28 1
a28 1
@@@@ -2303,6 +2308,7 @@@@
d36 1
a36 1
@@@@ -4010,14 +4016,13 @@@@
d52 1
a52 1
@@@@ -4060,7 +4065,7 @@@@
@


1.1.1.1
log
@Initial import of tk.
@
text
@@


1.1.1.1.2.1
log
@bring x11 as of cut-over date into 2.7 branch
@
text
@d1 3
a3 3
--- configure.orig	Wed Apr 26 16:59:20 2000
+++ configure	Wed Jul 19 00:59:46 2000
@@@@ -1868,9 +1868,14 @@@@
d10 1
a10 1
+		# OpenBSD/SPARC needs -fPIC, -fpic will not do.
d14 1
a14 1
+		 *)
d16 1
a16 1
+		esac
d21 1
a21 1
@@@@ -1896,7 +1901,7 @@@@
d30 1
a30 1
@@@@ -2382,6 +2387,7 @@@@
d38 1
a38 1
@@@@ -4089,14 +4095,13 @@@@
d54 1
a54 1
@@@@ -4139,7 +4144,7 @@@@
@

