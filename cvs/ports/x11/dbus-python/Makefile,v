head	1.36;
access;
symbols
	OPENBSD_6_1:1.36.0.2
	OPENBSD_6_1_BASE:1.36
	OPENBSD_6_0:1.35.0.2
	OPENBSD_6_0_BASE:1.35
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.32.0.4
	OPENBSD_5_8_BASE:1.32
	OPENBSD_5_7:1.31.0.4
	OPENBSD_5_7_BASE:1.31
	OPENBSD_5_6:1.31.0.2
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.30.0.2
	OPENBSD_5_5_BASE:1.30
	OPENBSD_5_4:1.26.0.2
	OPENBSD_5_4_BASE:1.26
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.22.0.2
	OPENBSD_5_2_BASE:1.22
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.2
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.16.0.2
	OPENBSD_4_9_BASE:1.16
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.9.0.4
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.2
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.7.0.2
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.1.1.0.2
	OPENBSD_4_1_BASE:1.1.1.1
	dbus-python_20070206:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.36
date	2017.01.03.18.54.48;	author shadchin;	state Exp;
branches;
next	1.35;
commitid	4wXCEmNOFtHPEQ29;

1.35
date	2016.03.11.20.28.33;	author naddy;	state Exp;
branches;
next	1.34;
commitid	UYLP8TE6V7RS2GhJ;

1.34
date	2016.03.08.08.56.57;	author ajacoutot;	state Exp;
branches;
next	1.33;
commitid	AlmzZnjO9RSupPUF;

1.33
date	2016.03.01.09.11.27;	author ajacoutot;	state Exp;
branches;
next	1.32;
commitid	Ax8yju3Hazju5CMG;

1.32
date	2015.04.04.09.21.05;	author ajacoutot;	state Exp;
branches;
next	1.31;
commitid	kS3kwKZogsvzYmEY;

1.31
date	2014.06.03.11.37.56;	author rpointel;	state Exp;
branches;
next	1.30;
commitid	mhCvjOjZfYKCMljb;

1.30
date	2013.09.17.10.07.51;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2013.09.11.14.38.44;	author nigel;	state Exp;
branches;
next	1.28;

1.28
date	2013.09.10.16.57.11;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2013.09.10.13.25.41;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2013.07.12.06.15.29;	author ajacoutot;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.21.08.48.55;	author ajacoutot;	state Exp;
branches;
next	1.24;

1.24
date	2013.03.11.11.46.08;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2012.12.23.13.25.11;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2012.07.05.07.21.14;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2012.03.31.08.45.09;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2012.02.21.22.36.43;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2011.09.16.12.29.12;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2011.06.08.17.36.12;	author rpointel;	state Exp;
branches;
next	1.17;

1.17
date	2011.06.03.16.56.35;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2010.12.13.10.42.00;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.22.08.36.55;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.09.06.16.20.26;	author fgsch;	state Exp;
branches;
next	1.13;

1.13
date	2010.08.30.21.47.46;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.30.11.29.44;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.30.06.58.57;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2010.07.02.18.01.53;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.04.26.11.01.05;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2009.03.11.19.10.47;	author bernd;	state Exp;
branches;
next	1.7;

1.7
date	2009.01.03.21.27.25;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2008.10.27.13.59.21;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2008.02.01.21.38.27;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2007.10.08.08.22.43;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.08.29.16.31.00;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2007.04.30.09.24.43;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2007.02.07.00.59.02;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.02.07.00.59.02;	author todd;	state Exp;
branches;
next	;


desc
@@


1.36
log
@Add a MODPY_PYOEXTENSION variable.
Beginning with Python 3.5 .pyo files are no longer used and
have been replaced by a more flexible scheme that includes
the optimization level explicitly in .pyc name (See PEP-488).
@
text
@# $OpenBSD: Makefile,v 1.35 2016/03/11 20:28:33 naddy Exp $

PORTROACH=		limitw:2,even

COMMENT-main =		dbus bindings for Python
COMMENT-common =	common files for py-dbus

V =			1.2.4
DISTNAME =		dbus-python-${V}

PKGNAME-main =		py-dbus-${V}
REVISION-main =		0
FULLPKGNAME-common =	py-dbus-common-${V}
FULLPKGPATH-common =	x11/dbus-python,-common

CATEGORIES =		x11

HOMEPAGE =		http://dbus.freedesktop.org/

MAINTAINER =		Antoine Jacoutot <ajacoutot@@openbsd.org>

# ISC-like
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB-main += ${WANTLIB}
WANTLIB-main += dbus-1 dbus-glib-1 ffi gio-2.0 glib-2.0 gmodule-2.0
WANTLIB-main += gobject-2.0 pcre pthread z

WANTLIB-common +=	#empty

MASTER_SITES =		${HOMEPAGE}releases/dbus-python/

MULTI_PACKAGES =	-main -common

MODULES =		lang/python \
			devel/gettext

FLAVORS =		python3
FLAVOR ?=

USE_GMAKE=		Yes

.if ${FLAVOR:Mpython3}
FULLPKGNAME-main=	${PKGNAME-main:S/^py-/py3-/}
FULLPKGPATH-main=	x11/dbus-python,-main${MODPY_FLAVOR}
.endif

LIB_DEPENDS-main =	${LIB_DEPENDS} \
			x11/dbus-glib

RUN_DEPENDS-main =	${RUN_DEPENDS} \
			x11/dbus-python,-common

LIB_DEPENDS-common =	#empty
RUN_DEPENDS-common =	#empty

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS =	--disable-html-docs

TEST_FLAGS =		LDFLAGS="-L${LOCALBASE}/lib"
TEST_DEPENDS =		devel/py-gobject3${MODPY_FLAVOR}

pre-configure:
	sed -i "s,/bin/bash,/bin/sh,g" \
		${WRKSRC}/test/{TestSuitePythonService.service.in,run-test.sh}

post-install:
	rm ${PREFIX}/lib/python${MODPY_VERSION}/site-packages/*.{a,la}

.include <bsd.port.mk>
@


1.35
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/03/08 08:56:57 ajacoutot Exp $
d12 1
@


1.34
log
@Update to py-dbus-1.2.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/03/01 09:11:27 ajacoutot Exp $
d57 1
a57 2
CONFIGURE_ARGS =	${CONFIGURE_SHARED} \
			--disable-html-docs
@


1.33
log
@Update to py-dbus-1.2.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/04/04 09:21:05 ajacoutot Exp $
d8 1
a8 1
V =			1.2.2
@


1.32
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.31 2014/06/03 11:37:56 rpointel Exp $
d8 1
a8 1
V =			1.2.0
a14 3
REVISION-main =		3
REVISION-common =	1

d40 2
d62 4
@


1.31
log
@changed python3 default version so bump revision.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/09/17 10:07:51 sthen Exp $
d13 2
a14 2
REVISION-main =		2
REVISION-common =	0
@


1.30
log
@add an @@pkgpath line to fix updates, ok aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/09/11 14:38:44 nigel Exp $
d13 1
a13 1
REVISION-main =		1
@


1.29
log
@Correct typo
Ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/09/10 16:57:11 ajacoutot Exp $
d14 1
@


1.28
log
@Make this readable by a human being.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/09/10 13:25:41 ajacoutot Exp $
d42 1
a42 1
FULLPKGPATH-main=	x11/dbus-pythom,-main${MODPY_FLAVOR}
@


1.27
log
@Add a python3 FLAVOR.
Rename from dbus-python to py-dbus (and py3-dbus).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/07/12 06:15:29 ajacoutot Exp $
d3 2
a4 2
COMMENT-main =	dbus bindings for Python
COMMENT-common =common files for py-dbus
d6 2
a7 2
V =		1.2.0
DISTNAME =	dbus-python-${V}
d13 1
a13 1
REVISION-main =	1
d15 1
a15 1
CATEGORIES =	x11
d17 1
a17 1
HOMEPAGE =	http://dbus.freedesktop.org/
d19 1
a19 1
MAINTAINER =	Antoine Jacoutot <ajacoutot@@openbsd.org>
d28 1
a28 1
WANTLIB-common += #empty
d30 1
a30 1
MASTER_SITES =	${HOMEPAGE}releases/dbus-python/
d34 2
a35 2
MODULES =	lang/python \
		devel/gettext
d37 1
a37 1
FLAVORS =	python3
d41 2
a42 2
FULLPKGNAME-main=${PKGNAME-main:S/^py-/py3-/}
FULLPKGPATH-main=x11/dbus-pythom,-main${MODPY_FLAVOR}
d54 3
a56 3
CONFIGURE_STYLE = gnu
CONFIGURE_ARGS = ${CONFIGURE_SHARED} \
		 --disable-html-docs
d58 2
a59 2
TEST_FLAGS =	LDFLAGS="-L${LOCALBASE}/lib"
TEST_DEPENDS =	devel/py-gobject3${MODPY_FLAVOR}
@


1.26
log
@Update to dbus-python-1.2.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/03/21 08:48:55 ajacoutot Exp $
d3 2
a4 1
COMMENT =	dbus bindings for Python
d6 8
a13 1
DISTNAME =	dbus-python-1.2.0
d24 5
a28 2
WANTLIB += dbus-1 dbus-glib-1 ffi gio-2.0 glib-2.0 gmodule-2.0
WANTLIB += gobject-2.0 pcre pthread z
d32 2
d37 13
a49 1
LIB_DEPENDS =	x11/dbus-glib
d51 2
d59 1
@


1.25
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/03/11 11:46:08 espie Exp $
d5 1
a5 2
DISTNAME =	dbus-python-1.1.1
REVISION =	0
d16 2
a17 2
WANTLIB += dbus-1 dbus-glib-1 ffi gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 pcre pthread z
d24 1
a24 1
LIB_DEPENDS =	x11/dbus-glib>=0.94v0
d32 3
@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/12/23 13:25:11 sthen Exp $
a26 1
USE_LIBTOOL =	Yes
@


1.23
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/07/05 07:21:14 ajacoutot Exp $
a15 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM = Yes
PERMIT_DISTFILES_FTP =	Yes
d33 1
a33 1
REGRESS_FLAGS =	LDFLAGS="-L${LOCALBASE}/lib"
@


1.22
log
@Update to dbus-python-1.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/03/31 08:45:09 ajacoutot Exp $
d6 1
d21 1
a21 1
WANTLIB += gthread-2.0 pcre z
@


1.21
log
@Update to dbus-python-1.0.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/02/21 22:36:43 sthen Exp $
d5 1
a5 1
DISTNAME =	dbus-python-1.0.0
@


1.20
log
@sync WANTLIBs and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/09/16 12:29:12 espie Exp $
d5 1
a5 2
DISTNAME =	dbus-python-0.84.0
REVISION =	2
d34 2
@


1.19
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/06/08 17:36:12 rpointel Exp $
d6 1
a6 1
REVISION =	1
d20 1
a20 1
WANTLIB += dbus-1 dbus-glib-1 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
@


1.18
log
@bump after default python version switch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/06/03 16:56:35 ajacoutot Exp $
d6 1
a6 1
REVISION =	0
@


1.17
log
@Bugfix update to dbus-python-0.84.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/12/13 10:42:00 ajacoutot Exp $
d6 1
@


1.16
log
@Update to dbus-python-0.83.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/22 08:36:55 espie Exp $
d5 1
a5 1
DISTNAME =	dbus-python-0.83.2
d19 2
a20 1
WANTLIB =	glib-2.0 gobject-2.0 gthread-2.0 pcre dbus-1 dbus-glib-1
d27 1
a27 2
LIB_DEPENDS =	x11/dbus \
		x11/dbus-glib
@


1.15
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/09/06 16:20:26 fgsch Exp $
d5 1
a5 1
DISTNAME =	dbus-python-0.83.1
@


1.14
log
@update to dbus-python 0.83.1 and enable regression.
maintainer (ajacoutot@@) ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/08/30 21:47:46 sthen Exp $
d26 2
a27 2
LIB_DEPENDS =	::x11/dbus \
		::x11/dbus-glib
@


1.13
log
@bumps for python
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/07/30 11:29:44 ajacoutot Exp $
d3 1
a3 1
COMMENT=	dbus bindings for Python
d5 1
a5 2
DISTNAME=	dbus-python-0.83.0
REVISION=	4
d7 1
a7 2
CATEGORIES=	x11
MASTER_SITES=	${HOMEPAGE}releases/dbus-python/
d9 1
a9 1
HOMEPAGE=	http://dbus.freedesktop.org/
d11 1
a11 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d14 4
a17 4
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
d19 1
a19 1
WANTLIB+=	glib-2.0 gobject-2.0 pcre dbus-1 dbus-glib-1
d21 3
a23 1
MODULES=	lang/python \
d26 1
a26 1
LIB_DEPENDS+=	::x11/dbus \
d29 1
a29 5
USE_LIBTOOL=	Yes

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-html-docs
d31 3
a33 1
NO_REGRESS=	Yes
@


1.12
log
@New style DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/07/30 06:58:57 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
@


1.11
log
@First pass at new REVISION/DEPENDS... not finished yet.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/02 18:01:53 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
d21 1
a21 1
WANTLIB+=	glib-2.0 gobject-2.0 pcre
d26 2
a27 2
LIB_DEPENDS+=	dbus-1.>=5::x11/dbus \
		dbus-glib-1::x11/dbus-glib
@


1.10
log
@Take maintainer.

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/04/26 11:01:05 ajacoutot Exp $
d6 2
a7 1
PKGNAME=	${DISTNAME}p2
@


1.9
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/03/11 19:10:47 bernd Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d11 2
@


1.8
log
@bump because of python dep change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/01/03 21:27:25 kili Exp $
a30 1
CONFIGURE_ENV+=	PYTHON=${MODPY_BIN}
@


1.7
log
@
MODPY_EXPAT_DEPENDS doesn't exist any longer.

While here, update PLISTs, some WANTLIBs, some license
markers and use MODPY_EGG_VERSION where it may help to
keep future PLIST diffs smaller.

help, nitpicking and ok jasper@@, ok wcmaier@@

note that print/py-reportlab/reportlab needs some more
love.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/10/27 13:59:21 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.6
log
@- update to dbus-python-0.83.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/02/01 21:38:27 steven Exp $
d6 1
d12 1
a12 1
# GPL
a22 1
RUN_DEPENDS+=	${MODPY_EXPAT_DEPENDS}
@


1.5
log
@fix WANTLIB
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.4 2007/10/08 08:22:43 steven Exp $

SHARED_ONLY=	Yes
d5 1
a5 2
DISTNAME=	dbus-python-0.82.2
PKGNAME=	${DISTNAME}p1
d17 1
a17 1
WANTLIB+=	glib-2.0 gobject-2.0 iconv intl pcre
d19 2
a20 1
MODULES=	lang/python
d27 1
d29 2
a30 1
CONFIGURE_ARGS=	--disable-html-docs
@


1.4
log
@bump PKGNAME after python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/08/29 16:31:00 jasper Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
d19 2
a20 1
WANTLIB+=	glib-2.0 gobject-2.0 iconv intl
@


1.3
log
@update dbus-python to 0.82.2

from Lars Hansson
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/04/30 09:24:43 bernd Exp $
d8 1
@


1.2
log
@Disable building of html docs if doc-utils is installed to avoid a
build error.

From alek@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/02/07 00:59:02 todd Exp $
d5 1
a5 1
COMMENT=	"dbus bindings for Python"
d7 1
a7 1
DISTNAME=	dbus-python-0.80.1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d28 1
@


1.1.1.1
log
@dbus bindings for Python, version 0.80.1
from brad@@
@
text
@@
