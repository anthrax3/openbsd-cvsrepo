head	1.6;
access;
symbols
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.6
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.8
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.1.1.0.6
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.4
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	jasper_20110405:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2016.09.01.11.11.09;	author pascal;	state Exp;
branches;
next	1.5;
commitid	9bAsy5Qs9tUmX9v5;

1.5
date	2016.06.25.11.10.23;	author pascal;	state Exp;
branches;
next	1.4;
commitid	0AmFqZBbLuNvGawf;

1.4
date	2015.09.10.18.38.53;	author pascal;	state Exp;
branches;
next	1.3;
commitid	XXI78h72qzJ6KiHO;

1.3
date	2015.01.22.13.28.25;	author kirby;	state Exp;
branches;
next	1.2;
commitid	HofNHkb3vyousVXQ;

1.2
date	2012.11.22.11.52.52;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2011.05.04.09.41.50;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.05.04.09.41.50;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to irrlicht 1.8.4.
@
text
@$OpenBSD: patch-source_Irrlicht_Makefile,v 1.5 2016/06/25 11:10:23 pascal Exp $
--- source/Irrlicht/Makefile.orig	Thu Sep  1 11:06:31 2016
+++ source/Irrlicht/Makefile	Thu Sep  1 11:07:07 2016
@@@@ -2,7 +2,7 @@@@ VERSION_MAJOR = 1
 VERSION_MINOR = 8
 VERSION_RELEASE = 4
 # Irrlicht Engine 1.8.4
-# Makefile for Linux
+# Makefile for OpenBSD
 #
 # To use, just run:
 #
@@@@ -46,18 +46,17 @@@@ IRRSWRENDEROBJ = CSoftwareDriver.o CSoftwareTexture.o 
 IRRIOOBJ = CFileList.o CFileSystem.o CLimitReadFile.o CMemoryFile.o CReadFile.o CWriteFile.o CXMLReader.o CXMLWriter.o CWADReader.o CZipReader.o CPakReader.o CNPKReader.o CTarReader.o CMountPointReader.o irrXML.o CAttributes.o lzma/LzmaDec.o
 IRROTHEROBJ = CIrrDeviceSDL.o CIrrDeviceLinux.o CIrrDeviceConsole.o CIrrDeviceStub.o CIrrDeviceWin32.o CIrrDeviceFB.o CLogger.o COSOperator.o Irrlicht.o os.o
 IRRGUIOBJ = CGUIButton.o CGUICheckBox.o CGUIComboBox.o CGUIContextMenu.o CGUIEditBox.o CGUIEnvironment.o CGUIFileOpenDialog.o CGUIFont.o CGUIImage.o CGUIInOutFader.o CGUIListBox.o CGUIMenu.o CGUIMeshViewer.o CGUIMessageBox.o CGUIModalScreen.o CGUIScrollBar.o CGUISpinBox.o CGUISkin.o CGUIStaticText.o CGUITabControl.o CGUITable.o CGUIToolBar.o CGUIWindow.o CGUIColorSelectDialog.o CDefaultGUIElementFactory.o CGUISpriteBank.o CGUIImageList.o CGUITreeView.o
-ZLIBOBJ = zlib/adler32.o zlib/compress.o zlib/crc32.o zlib/deflate.o zlib/inffast.o zlib/inflate.o zlib/inftrees.o zlib/trees.o zlib/uncompr.o zlib/zutil.o
-JPEGLIBOBJ = jpeglib/jcapimin.o jpeglib/jcapistd.o jpeglib/jccoefct.o jpeglib/jccolor.o jpeglib/jcdctmgr.o jpeglib/jchuff.o jpeglib/jcinit.o jpeglib/jcmainct.o jpeglib/jcmarker.o jpeglib/jcmaster.o jpeglib/jcomapi.o jpeglib/jcparam.o jpeglib/jcprepct.o jpeglib/jcsample.o jpeglib/jctrans.o jpeglib/jdapimin.o jpeglib/jdapistd.o jpeglib/jdatadst.o jpeglib/jdatasrc.o jpeglib/jdcoefct.o jpeglib/jdcolor.o jpeglib/jddctmgr.o jpeglib/jdhuff.o jpeglib/jdinput.o jpeglib/jdmainct.o jpeglib/jdmarker.o jpeglib/jdmaster.o jpeglib/jdmerge.o jpeglib/jdpostct.o jpeglib/jdsample.o jpeglib/jdtrans.o jpeglib/jerror.o jpeglib/jfdctflt.o jpeglib/jfdctfst.o jpeglib/jfdctint.o jpeglib/jidctflt.o jpeglib/jidctfst.o jpeglib/jidctint.o jpeglib/jmemmgr.o jpeglib/jmemnobs.o jpeglib/jquant1.o jpeglib/jquant2.o jpeglib/jutils.o jpeglib/jcarith.o jpeglib/jdarith.o jpeglib/jaricom.o
-LIBPNGOBJ = libpng/png.o libpng/pngerror.o libpng/pngget.o libpng/pngmem.o libpng/pngpread.o libpng/pngread.o libpng/pngrio.o libpng/pngrtran.o libpng/pngrutil.o libpng/pngset.o libpng/pngtrans.o libpng/pngwio.o libpng/pngwrite.o libpng/pngwtran.o libpng/pngwutil.o
+#ZLIBOBJ = zlib/adler32.o zlib/compress.o zlib/crc32.o zlib/deflate.o zlib/inffast.o zlib/inflate.o zlib/inftrees.o zlib/trees.o zlib/uncompr.o zlib/zutil.o
+#JPEGLIBOBJ = jpeglib/jcapimin.o jpeglib/jcapistd.o jpeglib/jccoefct.o jpeglib/jccolor.o jpeglib/jcdctmgr.o jpeglib/jchuff.o jpeglib/jcinit.o jpeglib/jcmainct.o jpeglib/jcmarker.o jpeglib/jcmaster.o jpeglib/jcomapi.o jpeglib/jcparam.o jpeglib/jcprepct.o jpeglib/jcsample.o jpeglib/jctrans.o jpeglib/jdapimin.o jpeglib/jdapistd.o jpeglib/jdatadst.o jpeglib/jdatasrc.o jpeglib/jdcoefct.o jpeglib/jdcolor.o jpeglib/jddctmgr.o jpeglib/jdhuff.o jpeglib/jdinput.o jpeglib/jdmainct.o jpeglib/jdmarker.o jpeglib/jdmaster.o jpeglib/jdmerge.o jpeglib/jdpostct.o jpeglib/jdsample.o jpeglib/jdtrans.o jpeglib/jerror.o jpeglib/jfdctflt.o jpeglib/jfdctfst.o jpeglib/jfdctint.o jpeglib/jidctflt.o jpeglib/jidctfst.o jpeglib/jidctint.o jpeglib/jmemmgr.o jpeglib/jmemnobs.o jpeglib/jquant1.o jpeglib/jquant2.o jpeglib/jutils.o jpeglib/jcarith.o jpeglib/jdarith.o jpeglib/jaricom.o
+#LIBPNGOBJ = libpng/png.o libpng/pngerror.o libpng/pngget.o libpng/pngmem.o libpng/pngpread.o libpng/pngread.o libpng/pngrio.o libpng/pngrtran.o libpng/pngrutil.o libpng/pngset.o libpng/pngtrans.o libpng/pngwio.o libpng/pngwrite.o libpng/pngwtran.o libpng/pngwutil.o
 LIBAESGM = aesGladman/aescrypt.o aesGladman/aeskey.o aesGladman/aestab.o aesGladman/fileenc.o aesGladman/hmac.o aesGladman/prng.o aesGladman/pwd2key.o aesGladman/sha1.o aesGladman/sha2.o
-BZIP2OBJ = bzip2/blocksort.o bzip2/huffman.o bzip2/crctable.o bzip2/randtable.o bzip2/bzcompress.o bzip2/decompress.o bzip2/bzlib.o
+#BZIP2OBJ = bzip2/blocksort.o bzip2/huffman.o bzip2/crctable.o bzip2/randtable.o bzip2/bzcompress.o bzip2/decompress.o bzip2/bzlib.o
 
 # Next variable is for additional scene nodes etc. of customized Irrlicht versions
 EXTRAOBJ =
 LINKOBJ = $(IRRMESHOBJ) $(IRROBJ) $(IRRPARTICLEOBJ) $(IRRANIMOBJ) \
 	$(IRRVIDEOOBJ) $(IRRSWRENDEROBJ) $(IRRIOOBJ) $(IRROTHEROBJ) \
-	$(IRRGUIOBJ) $(ZLIBOBJ) $(JPEGLIBOBJ) $(LIBPNGOBJ) $(LIBAESGM) \
-	$(BZIP2OBJ) $(EXTRAOBJ)
+	$(IRRGUIOBJ) $(LIBAESGM) $(EXTRAOBJ)
 
 ###############
 #Compiler flags
@@@@ -67,12 +66,12 @@@@ CXXFLAGS += -Wall -pipe -fno-exceptions -fno-rtti -fst
 ifndef NDEBUG
 CXXFLAGS += -g -D_DEBUG
 else
-CXXFLAGS += -fexpensive-optimizations -O3
+CXXFLAGS += -fexpensive-optimizations
 endif
 ifdef PROFILE
 CXXFLAGS += -pg
 endif
-CFLAGS := -O3 -fexpensive-optimizations -DPNG_THREAD_UNSAFE_OK -DPNG_NO_MMX_CODE -DPNG_NO_MNG_FEATURES
+CFLAGS := -fexpensive-optimizations -DPNG_THREAD_UNSAFE_OK -DPNG_NO_MMX_CODE -DPNG_NO_MNG_FEATURES
 
 sharedlib sharedlib_osx: CXXFLAGS += -fPIC
 sharedlib sharedlib_osx: CFLAGS += -fPIC
@@@@ -82,14 +81,14 @@@@ ifeq ($(HOSTTYPE), x86_64)
 LIBSELECT=64
 endif
 
-#Linux specific options
-staticlib sharedlib install: SYSTEM = Linux
+#OpenBSD specific options
+staticlib sharedlib install: SYSTEM = OpenBSD
 STATIC_LIB = libIrrlicht.a
 LIB_PATH = ../../lib/$(SYSTEM)
-INSTALL_DIR = /usr/local/lib
+INSTALL_DIR = $(PREFIX)/lib
 sharedlib install: SHARED_LIB = libIrrlicht.so
-sharedlib: LDFLAGS += -L/usr/X11R6/lib$(LIBSELECT) -lGL -lXxf86vm
-staticlib sharedlib: CXXINCS += -I/usr/X11R6/include
+sharedlib: LDFLAGS += -L/usr/lib -L/usr/X11R6/lib$(LIBSELECT) -L$(LOCALBASE)/lib -lbz2 -lGL -lXxf86vm -lpng -ljpeg -lz
+staticlib sharedlib: CXXINCS += -I/usr/X11R6/include -I$(LOCALBASE)/include
 
 #OSX specific options
 staticlib_osx sharedlib_osx install_osx: SYSTEM = MacOSX
@@@@ -112,16 +111,16 @@@@ sharedlib_win32 staticlib_win32: CPPFLAGS += -DIRR_COM
 staticlib_win32: CPPFLAGS += -D_IRR_STATIC_LIB_
 
 VERSION = $(VERSION_MAJOR).$(VERSION_MINOR).$(VERSION_RELEASE)
-SHARED_FULLNAME = $(SHARED_LIB).$(VERSION)
+SHARED_FULLNAME = $(SHARED_LIB).$(SO_VERSION)
 SONAME = $(SHARED_LIB).$(VERSION_MAJOR).$(VERSION_MINOR)
 
 ####################
-# All target, builds Irrlicht as static lib (libIrrlicht.a) and copies it into lib/Linux
+# All target, builds Irrlicht as static lib (libIrrlicht.a) and copies it into lib/OpenBSD
 all linux: staticlib
 
-# Builds Irrlicht as shared lib (libIrrlicht.so.versionNumber) and copies it into lib/Linux
+# Builds Irrlicht as shared lib (libIrrlicht.so.versionNumber) and copies it into lib/OpenBSD
 sharedlib: $(LINKOBJ)
-	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -shared -Wl,-soname,$(SONAME) -o $(SHARED_FULLNAME) $^ $(LDFLAGS)
+	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -shared -o $(SHARED_FULLNAME) $^ $(LDFLAGS)
 	mkdir -p $(LIB_PATH)
 	cp $(SHARED_FULLNAME) $(LIB_PATH)
 
@@@@ -129,7 +128,7 @@@@ sharedlib: $(LINKOBJ)
 $(STATIC_LIB): $(LINKOBJ)
 	$(AR) rs $@@ $^
 
-# Copies static lib into lib/Linux
+# Copies static lib into lib/OpenBSD
 staticlib staticlib_osx: $(STATIC_LIB)
 	mkdir -p $(LIB_PATH)
 	cp $^ $(LIB_PATH)
@@@@ -179,8 +178,8 @@@@ endif
 
 help:
 	@@echo "Available targets for Irrlicht"
-	@@echo " sharedlib: Build shared library Irrlicht.so for Linux"
-	@@echo " staticlib: Build static library Irrlicht.a for Linux"
+	@@echo " sharedlib: Build shared library Irrlicht.so for OpenBSD"
+	@@echo " staticlib: Build static library Irrlicht.a for OpenBSD"
 	@@echo " install: Copy shared library to /usr/local/lib"
 	@@echo ""
 	@@echo " sharedlib_win32: Build shared library Irrlicht.dll for Windows"
@


1.5
log
@Minor update to 1.8.3, from David CARLIER.
@
text
@d1 3
a3 3
$OpenBSD: patch-source_Irrlicht_Makefile,v 1.4 2015/09/10 18:38:53 pascal Exp $
--- source/Irrlicht/Makefile.orig	Sat Jun 18 17:43:40 2016
+++ source/Irrlicht/Makefile	Sat Jun 18 18:14:52 2016
d6 2
a7 2
 VERSION_RELEASE = 3
 # Irrlicht Engine 1.8.3
@


1.4
log
@Update to irrlicht 1.8.2.  works with all dependent ports.
@
text
@d1 3
a3 3
$OpenBSD: patch-source_Irrlicht_Makefile,v 1.3 2015/01/22 13:28:25 kirby Exp $
--- source/Irrlicht/Makefile.orig	Thu Sep 10 19:08:46 2015
+++ source/Irrlicht/Makefile	Thu Sep 10 19:09:40 2015
d6 2
a7 2
 VERSION_RELEASE = 2
 # Irrlicht Engine 1.8.2
d48 1
a48 1
+CFLAGS += -fexpensive-optimizations -DPNG_THREAD_UNSAFE_OK -DPNG_NO_MMX_CODE -DPNG_NO_MNG_FEATURES
@


1.3
log
@bugfix update to irrlicht-1.8.1
ok pascal@@ (maintainer) and benoit@@ who sent similar diff previously.
@
text
@d1 3
a3 3
$OpenBSD: patch-source_Irrlicht_Makefile,v 1.2 2012/11/22 11:52:52 pascal Exp $
--- source/Irrlicht/Makefile.orig	Fri Nov  9 00:27:40 2012
+++ source/Irrlicht/Makefile	Fri Nov  9 00:41:54 2012
d6 2
a7 2
 VERSION_RELEASE = 1
 # Irrlicht Engine 1.8.1
@


1.2
log
@Update to irrlicht 1.8.
@
text
@d1 1
a1 1
$OpenBSD: patch-source_Irrlicht_Makefile,v 1.1.1.1 2011/05/04 09:41:50 jasper Exp $
d6 2
a7 2
 VERSION_RELEASE = 0
 # Irrlicht Engine 1.8.0
@


1.1
log
@Initial revision
@
text
@d1 7
a7 7
$OpenBSD$
--- source/Irrlicht/Makefile.orig	Wed Mar  2 13:56:55 2011
+++ source/Irrlicht/Makefile	Wed Mar  2 13:58:54 2011
@@@@ -3,7 +3,7 @@@@ VERSION_MINOR = 7
 VERSION_RELEASE = 2
 VERSION = $(VERSION_MAJOR).$(VERSION_MINOR).$(VERSION_RELEASE)
 # Irrlicht Engine 1.7.2
d13 2
a14 2
@@@@ -39,18 +39,17 @@@@ IRRSWRENDEROBJ = CSoftwareDriver.o CSoftwareTexture.o 
 IRRIOOBJ = CFileList.o CFileSystem.o CLimitReadFile.o CMemoryFile.o CReadFile.o CWriteFile.o CXMLReader.o CXMLWriter.o CZipReader.o CPakReader.o CNPKReader.o CTarReader.o CMountPointReader.o irrXML.o CAttributes.o lzma/LzmaDec.o
d37 1
a37 1
@@@@ -60,12 +59,12 @@@@ CXXFLAGS += -Wall -pipe -fno-exceptions -fno-rtti -fst
d52 1
a52 1
@@@@ -75,15 +74,15 @@@@ ifeq ($(HOSTTYPE), x86_64)
a64 1
 staticlib sharedlib: LDFLAGS += --no-export-all-symbols --add-stdcall-alias
d72 1
a72 1
@@@@ -103,20 +102,20 @@@@ sharedlib_win32 staticlib_win32: CPPFLAGS += -DIRR_COM
d75 5
a81 1
-all linux: staticlib
d83 1
a83 1
+all linux: staticlib sharedlib
d88 2
a89 2
-	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -shared -Wl,-soname,$(SHARED_LIB).$(VERSION_MAJOR).$(VERSION_MINOR) -o $(SHARED_LIB).$(VERSION) $^ $(LDFLAGS)
+	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -shared -o $(SHARED_LIB).$(SO_VERSION) $^ $(LDFLAGS)
d91 1
a91 2
-	cp $(SHARED_LIB).$(VERSION) $(LIB_PATH)
+	cp $(SHARED_LIB).$(SO_VERSION) $(LIB_PATH)
d93 1
a93 1
 # Builds Irrlicht as static lib (libIrrlicht.a)
d102 1
a102 1
@@@@ -165,8 +164,8 @@@@ endif
@


1.1.1.1
log
@import irrlicht 1.7.2

The Irrlicht Engine is an open source high performance realtime 3D
engine written and usable in C++ and also available for .NET
languages. It is completely cross-platform, using D3D, OpenGL and
its own software renderer, and has all of the state-of-the-art
features which can be found in commercial 3d engines.

from Pascal Stumpf
with feedback from kili@@
ok phessler@@
@
text
@@
