head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2012.12.24.13.11.03;	author stsp;	state dead;
branches;
next	1.1;

1.1
date	2012.11.10.15.06.03;	author stsp;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update e17 ports to the final 0.17.0 release.
Major bump for all shared libs for safety (requested by sthen and landry).
ok sthen landry
@
text
@$OpenBSD: patch-src_bin_e_start_main_c,v 1.1 2012/11/10 15:06:03 stsp Exp $
- avoid Linux-specific ptrace(2) usage which doesn't compile
- instead actually launch enlightenment via execv()
--- src/bin/e_start_main.c.orig	Sat Nov  3 22:20:25 2012
+++ src/bin/e_start_main.c	Thu Nov  8 02:55:31 2012
@@@@ -18,7 +18,9 @@@@
 
 #include <Eina.h>
 
+#ifdef __linux__
 static Eina_Bool tainted = EINA_FALSE;
+#endif
 
 static void env_set(const char *var, const char *val);
 EAPI int    prefix_determine(char *argv0);
@@@@ -226,7 +228,9 @@@@ main(int argc, char **argv)
    char valgrind_path[PATH_MAX] = "";
    const char *valgrind_log = NULL;
    Eina_Bool really_know = EINA_FALSE;
+#ifdef __linux__
    Eina_Bool restart = EINA_TRUE;
+#endif
 
    eina_init();
 
@@@@ -376,11 +380,12 @@@@ main(int argc, char **argv)
    args[i++] = buf;
    copy_args(args + i, argv + 1, argc - 1);
    args[i + argc - 1] = NULL;
-   /* execv(args[0], args); */
+   execv(args[0], args);
 
    /* not run at the moment !! */
 
 
+#ifdef __linux__
    /* Now looping until */
    while (restart)
      {
@@@@ -497,6 +502,7 @@@@ main(int argc, char **argv)
           }
           
      }
+#endif /* __linux__ */
 
    return -1;
 }
@


1.1
log
@Upgrade e17 to 0.17.0 alpha. Mostly works, see here for a list of known issues:
  http://marc.info/?l=openbsd-ports&m=135255696617191&w=2
ok landry armani
@
text
@d1 1
a1 1
$OpenBSD$
@

