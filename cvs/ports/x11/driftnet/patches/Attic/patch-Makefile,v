head	1.3;
access;
symbols
	OPENBSD_5_3:1.2.0.12
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.10
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.8
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.1.1.0.12
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.10
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.8
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.6
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.4
	OPENBSD_4_3_BASE:1.1.1.1
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	claudio_20070430:1.1.1.1
	claudio:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2013.06.24.16.48.43;	author sebastia;	state dead;
branches;
next	1.2;

1.2
date	2010.03.20.16.52.08;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2007.04.30.13.38.50;	author claudio;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.04.30.13.38.50;	author claudio;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update driftnet to 1.0 from a ubuntu repository:

most notably new features:
 * support PNG images
 * support IPv6
 * support reading pcap files

feedback and OK sthen@@, rfreeman@@
tested by rfreeman@@ on i386, sthen@@ on macppc, and myself on amd64 and i386
MAINTAINER, claudio@@ also fine with the update
@
text
@$OpenBSD: patch-Makefile,v 1.2 2010/03/20 16:52:08 jasper Exp $
--- Makefile.orig	Tue Jul  9 21:26:41 2002
+++ Makefile	Fri Jan 29 16:15:17 2010
@@@@ -16,23 +16,23 @@@@
 #CC = gcc
 
 # Basic compiler, linker flags; should not need any changes.
-CFLAGS += -g -Wall
-LDFLAGS += -g
+#CFLAGS += -g -Wall
+#LDFLAGS += -g
 
 # You might need these if libpcap is installed somewhere random.
-CFLAGS += -I/usr/include/pcap
+CFLAGS += -I/usr/local/include
 #LDFLAGS += -L/path/to/libpcap.so
 
 # Required on Linux to get BSDish definitions of the TCP/IP structs.
-CFLAGS += -D_BSD_SOURCE
+#CFLAGS += -D_BSD_SOURCE
 
 # We always need the pcap and pthread libraries.
-LDLIBS += -lpcap -lpthread
+LDLIBS += -lpcap -pthread
 
 # Optional C compiler and linker flags. Typical driftnet builds have support
 # for displaying captured images in an X window, and need the following flags:
-CFLAGS  += `gtk-config --cflags`
-LDLIBS  += -ljpeg -lungif `gtk-config --libs`
+CFLAGS  += `pkg-config --cflags gtk+-2.0`
+LDLIBS  += -ljpeg -lungif `pkg-config --libs gtk+-2.0`
 
 # Alternatively, you can build a version of driftnet which can only be used
 # in `adjunct' mode as the back end for some other image-processing program. To
@@@@ -72,23 +72,17 @@@@ BINS = driftnet
 
 OBJS = $(SRCS:.c=.o)
 
-default: driftnet driftnet.1
+all: driftnet driftnet.1
 
-driftnet:   depend $(OBJS)
+driftnet:   $(OBJS)
 	$(CC) -o driftnet $(OBJS) $(LDFLAGS) $(LDLIBS)
 
 driftnet.1: driftnet.1.in Makefile
 	( echo '.\" DO NOT EDIT THIS FILE-- edit driftnet.1.in instead' ; sed s/@@@@@@VERSION@@@@@@/$(VERSION)/ ) < driftnet.1.in > driftnet.1
 
-endianness: endian
-	./endian > endianness
+%.o:    %.c Makefile
+	$(CC) $(CFLAGS) -c -o $@@ $<
 
-endian: endian.c
-	$(CC) $(CFLAGS) -o endian endian.c
-
-%.o:    %.c Makefile endianness
-	$(CC) $(CFLAGS) `cat endianness` -c -o $@@ $<
-
 clean:  nodepend
 	rm -f *~ *.bak *.o core $(BINS) TAGS driftnet.1 endian endianness
 
@@@@ -102,13 +96,19 @@@@ tarball: nodepend $(SRCS) $(HDRS) $(TXTS)
 	rm -rf driftnet-$(VERSION)
 	mv driftnet-$(VERSION).tar.gz ..
 	
-depend: endianness
-	makedepend -- $(CFLAGS) `cat endianness` -- $(SRCS)
+depend:
+	makedepend -- $(CFLAGS) -- $(SRCS)
 	touch depend
 	rm -f Makefile.bak
 
 nodepend:
 	makedepend -- --
 	rm -f depend Makefile.bak
+
+install:
+	${INSTALL} ${INSTALL_COPY} ${INSTALL_STRIP} -o ${BINOWN} -g ${BINGRP} \
+	    -m ${BINMODE} driftnet ${PREFIX}/bin/driftnet
+	${INSTALL} ${INSTALL_COPY} -o ${MANOWN} -g ${MANGRP} -m ${MANMODE} \
+	    driftnet.1 ${PREFIX}/man/man1/driftnet.1
 
 # DO NOT DELETE
@


1.2
log
@- switch to gtk2
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.1.1.1 2007/04/30 13:38:50 claudio Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
+++ Makefile	Tue Apr 24 15:05:24 2007
@@@@ -16,18 +16,18 @@@@
d28 8
a35 1
@@@@ -72,7 +72,7 @@@@ BINS = driftnet
d42 2
a43 1
 driftnet:   depend $(OBJS)
d45 1
a45 1
@@@@ -80,15 +80,9 @@@@ driftnet:   depend $(OBJS)
@


1.1.1.1
log
@driftnet is a clone of EtherPEG. It sniffs the network for images and
displays them. Fun to use at conferences and airports with open WLAN.
Use at own risk.

With help and OK jasper@@
@
text
@@
