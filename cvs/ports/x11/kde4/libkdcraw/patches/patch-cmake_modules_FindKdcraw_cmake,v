head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.12
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.8
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2013.12.08.19.13.32;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Move on to KDE 4.11.4.

In this release, four "fat" packages were split:

  * kdeadmin
  * kdenetwork
  * kdesdk
  * kdetoys

To make updates reliable, we provide corresponding meta-packages now.

Many new patches in x11/kde4 correspond to the linking problems detected.
Those are planned to integrate upstream but probably we'll have to keep
some of them until KDE 5.

For information about major KDE 4.11 features, look at the official site:
http://www.kde.org/announcements/4.11/

Kopete Jingle support is disabled for now, until googletalk-call gets
cured from permanent coredumping.

This update involved a lot of help and patience for my mistakes from
many people, including ajacoutot@@, espie@@, naddy@@... but most of the
times this was landry@@ who definitely deserves personal "thank you"!
@
text
@$OpenBSD$
Allow to find libkdcraw without pkg-config.
--- cmake/modules/FindKdcraw.cmake.orig	Tue Aug  6 20:24:55 2013
+++ cmake/modules/FindKdcraw.cmake	Wed Aug  7 01:18:23 2013
@@@@ -77,44 +77,34 @@@@ else (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARIES AND KDCR
       # in the find_path() and find_library() calls
       include(FindPkgConfig)
 
-      pkg_check_modules(PC_KDCRAW libkdcraw)
+      pkg_check_modules(PC_KDCRAW libkdcraw>=0.2.0)
 
       if (PC_KDCRAW_FOUND)
-        # make sure the version is >= 0.2.0
-        # TODO: WHY?
-        if (PC_KDCRAW_VERSION VERSION_LESS 0.2.0)
-          message(STATUS "Found libkdcraw release < 0.2.0, too old")
-          set(KDCRAW_VERSION_GOOD_FOUND FALSE)
-          set(KDCRAW_FOUND FALSE)
-        else (PC_KDCRAW_VERSION VERSION_LESS 0.2.0)
-          set(KDCRAW_VERSION "${PC_KDCRAW_VERSION}")
-          if (NOT Kdcraw_FIND_QUIETLY)
-            message(STATUS "Found libkdcraw release ${KDCRAW_VERSION}")
-          endif (NOT Kdcraw_FIND_QUIETLY)
-          set(KDCRAW_VERSION_GOOD_FOUND TRUE)
-        endif (PC_KDCRAW_VERSION VERSION_LESS 0.2.0)
-      else (PC_KDCRAW_FOUND)
-        set(KDCRAW_VERSION_GOOD_FOUND FALSE)
+        set(KDCRAW_VERSION "${PC_KDCRAW_VERSION}")
+        if (NOT Kdcraw_FIND_QUIETLY)
+          message(STATUS "Found libkdcraw release ${KDCRAW_VERSION}")
+        endif (NOT Kdcraw_FIND_QUIETLY)
       endif (PC_KDCRAW_FOUND)
-    else (NOT WIN32)
-      # TODO: Why do we just assume the version is good?
-      set(KDCRAW_VERSION_GOOD_FOUND TRUE)
     endif (NOT WIN32)
 
-    if (KDCRAW_VERSION_GOOD_FOUND)
-      set(KDCRAW_DEFINITIONS "${PC_KDCRAW_CFLAGS_OTHER}")
+    find_path(KDCRAW_INCLUDE_DIR libkdcraw/version.h HINTS ${PC_KDCRAW_INCLUDE_DIRS})
+    find_library(KDCRAW_LIBRARY NAMES kdcraw HINTS ${PC_KDCRAW_LIBRARY_DIRS})
 
-      find_path(KDCRAW_INCLUDE_DIR libkdcraw/version.h ${PC_KDCRAW_INCLUDE_DIRS})
+    if (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARY)
+      if (PC_KDCRAW_FOUND)
+        set(KDCRAW_DEFINITIONS "${PC_KDCRAW_CFLAGS_OTHER}")
+      endif (PC_KDCRAW_FOUND)
+
       set(kdcraw_version_h_filename "${KDCRAW_INCLUDE_DIR}/libkdcraw/version.h")
 
-      find_library(KDCRAW_LIBRARIES NAMES kdcraw HINTS ${PC_KDCRAW_LIBRARY_DIRS})
+      set(KDCRAW_LIBRARIES ${KDCRAW_LIBRARY})
 
       if (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARIES)
         set(KDCRAW_FOUND TRUE)
       else (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARIES)
         set(KDCRAW_FOUND FALSE)
       endif (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARIES)
-    endif (KDCRAW_VERSION_GOOD_FOUND)
+    endif (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARY)
 
     if (KDCRAW_FOUND)
       if (NOT Kdcraw_FIND_QUIETLY)
@@@@ -145,7 +135,7 @@@@ else (KDCRAW_INCLUDE_DIR AND KDCRAW_LIBRARIES AND KDCR
   endif (KDCRAW_FOUND)
 
   if (KDCRAW_FOUND)
-    mark_as_advanced(KDCRAW_INCLUDE_DIR KDCRAW_LIBRARIES KDCRAW_DEFINITIONS KDCRAW_VERSION KDCRAW_FOUND)
+    mark_as_advanced(KDCRAW_INCLUDE_DIR KDCRAW_LIBRARY KDCRAW_DEFINITIONS KDCRAW_VERSION KDCRAW_FOUND)
   else (KDCRAW_FOUND)
     # The library was not found, reset all related variables.
     unset(KDCRAW_INCLUDE_DIR)
@
