head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.12
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2014.07.09.20.03.24;	author zhuk;	state Exp;
branches;
next	1.2;
commitid	VIGhneE7m6586cHK;

1.2
date	2013.06.06.08.36.47;	author zhuk;	state Exp;
branches;
next	1.1;

1.1
date	2013.05.14.09.16.26;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.3
log
@"small update" (c) tedu@@

Here KDE 4.13.2 comes. Big release changelogs could be read here:

  http://www.kde.org/announcements/4.12/
  http://www.kde.org/announcements/4.13/

Critical things you should be aware of:

  1. Nepomuk is gone, it's superseeded by Baloo. Nepomuk libraries
     are still here, though, but they do rely on Baloo internally.

  2. kdnssd was renamed to zeroconf-ioslave;

  3. kwallet was renamed to kwalletmanager;

  4. Akonadi cache will be rebuilt; this could result in change
     of PIM folder indexes, which in turn could mess up your
     mail filters - beware.

  5. ... a lot of other little problems that always happen during
     update.

Things could be broken for a day or two in subtle ways - don't
hesistate on reporting them!
@
text
@$OpenBSD: patch-cmake_FindSpeechd_cmake,v 1.2 2013/06/06 08:36:47 zhuk Exp $
Allow to find speechd both when it require "speech-dispatcher/" prefix in
include lines, and when it doesn't. Also, switch to CMake convention for
naming configuration variables.

NB: keep synced with the same patch in jovie.
--- cmake/FindSpeechd.cmake.orig	Thu Jan  2 23:33:57 2014
+++ cmake/FindSpeechd.cmake	Tue Mar  4 12:31:05 2014
@@@@ -1,17 +1,40 @@@@
 # find speech-dispatcher library and header if available
 # Copyright (c) 2009, Jeremy Whiting <jeremy@@scitools.com>
 # Copyright (c) 2011, Raphael Kubo da Costa <kubito@@gmail.com>
-# This module defines
-#  SPEECHD_INCLUDE_DIR, where to find libspeechd.h
-#  SPEECHD_LIBRARIES, the libraries needed to link against speechd
-#  SPEECHD_FOUND, If false, speechd was not found
 #
+# This module defines:
+#  SPEECHD_INCLUDE_DIRS	     Directories with speechd header files.
+#  SPEECHD_LIBRARIES         The libraries needed to link against speechd.
+#  SPEECHD_FOUND             If false, speechd was not found.
+#  SPEECHD_USES_INC_PREFIX   True if speechd wants <speechd-dispatcher/foo.h>
+#                            scheme, and false if plain <foo.h> should be used.
+#
 # Redistribution and use is allowed according to the terms of the BSD license.
 # For details see the accompanying COPYING-CMAKE-SCRIPTS file.
 
-find_path(SPEECHD_INCLUDE_DIR libspeechd.h PATH_SUFFIXES speech-dispatcher)
+# Some versions of speech-dispatcher force <speech-dispatcher/foo.h> scheme,
+# and some force <foo.h> scheme. This hack allows us to support both.
 
-find_library(SPEECHD_LIBRARIES NAMES speechd)
+include(CheckIncludeFiles)
+include(CMakePushCheckState)
 
+find_path(SPEECHD_INCLUDE_DIR speech-dispatcher/libspeechd.h)
+if(SPEECHD_INCLUDE_DIR)
+  cmake_push_check_state()
+  set(CMAKE_REQUIRED_INCLUDES ${CMAKE_REQUIRED_INCLUDES} ${SPEECHD_INCLUDE_DIR})
+  check_include_files("speech-dispatcher/libspeechd.h" SPEECHD_USES_INC_PREFIX)
+  if(SPEECHD_USES_INC_PREFIX)
+    add_definitions(-DSPEECHD_USES_INC_PREFIX)
+  else(SPEECHD_USES_INC_PREFIX)
+    set(SPEECHD_INCLUDE_DIR "${SPEECHD_INCLUDE_DIR}/speech-dispatcher")
+  endif(SPEECHD_USES_INC_PREFIX)
+  cmake_pop_check_state()
+endif(SPEECHD_INCLUDE_DIR)
+
+find_library(SPEECHD_LIBRARY NAMES speechd)
+
+set(SPEECHD_INCLUDE_DIRS ${SPEECHD_INCLUDE_DIR})
+set(SPEECHD_LIBRARIES ${SPEECHD_LIBRARY})
+
 include(FindPackageHandleStandardArgs)
-find_package_handle_standard_args(Speechd REQUIRED_VARS SPEECHD_INCLUDE_DIR SPEECHD_LIBRARIES)
+find_package_handle_standard_args(Speechd REQUIRED_VARS SPEECHD_INCLUDE_DIRS SPEECHD_LIBRARIES)
@


1.2
log
@Bugfix update to KDE 4.10.4. Tested with upcoming CMake 2.8.11.
@
text
@d1 24
a24 5
$OpenBSD: patch-cmake_FindSpeechd_cmake,v 1.1 2013/05/14 09:16:26 zhuk Exp $
speech-dispatcher uses <speech-dispatcher/foo.h> form, use same here.
--- cmake/FindSpeechd.cmake.orig	Wed May  8 22:20:20 2013
+++ cmake/FindSpeechd.cmake	Wed May  8 22:23:04 2013
@@@@ -9,7 +9,7 @@@@
d29 2
a30 1
+find_path(SPEECHD_INCLUDE_DIR speech-dispatcher/libspeechd.h)
d32 3
a34 1
 find_library(SPEECHD_LIBRARIES NAMES speechd)
d36 21
@


1.1
log
@Bugfix update KDE4 to 4.10.3 version, including some tweaks:

  * Bump all SHARED_LIBS to 50.0, to avoid future clashes with KDE3
    libraries (based on input from espie@@);
  * Enable support for Telepathy in kdenetwork (see recently committed
    net/telepathy/telepathy-qt);
  * Fix build of analitza when GNU readline is installed (thanks kirby@@
    for pointing to GNU readline issue in general).
@
text
@d1 1
a1 1
$OpenBSD$
d9 1
a9 1
-find_path(SPEECHD_INCLUDE_DIR libspeechd.h)
@

