head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.2
	OPENBSD_6_2_BASE:1.2;
locks; strict;
comment	@# @;


1.2
date	2017.08.06.20.04.16;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	0jYRmsoXiaDCCp80;

1.1
date	2017.07.28.09.34.56;	author espie;	state Exp;
branches;
next	;
commitid	1mKiQ5nv0mSzFPbI;


desc
@@


1.2
log
@It looks like I didn't commit some patches for Cantor.

Noticed by naddy@@ (and, probably, sthen@@)

Things worked somehow until yesterday(?), I don't ever want to know, how.
@
text
@$OpenBSD: patch-cmake_FindLibSpectre_cmake,v 1.1 2017/07/28 09:34:56 espie Exp $

Index: cmake/FindLibSpectre.cmake
--- cmake/FindLibSpectre.cmake.orig
+++ cmake/FindLibSpectre.cmake
@@@@ -15,7 +15,7 @@@@
 if(LIBSPECTRE_INCLUDE_DIR AND LIBSPECTRE_LIBRARY)
 
   # in cache already
-  set(LIBSPECTRE_INTERNAL_FOUND TRUE)
+  set(LIBSPECTRE_FOUND TRUE)
 
 else(LIBSPECTRE_INCLUDE_DIR AND LIBSPECTRE_LIBRARY)
 
@@@@ -33,19 +33,19 @@@@ if(NOT WIN32)
      # query pkg-config asking for a libspectre >= LIBSPECTRE_MINIMUM_VERSION
      EXEC_PROGRAM(${PKGCONFIG_EXECUTABLE} ARGS --atleast-version=${LIBSPECTRE_MINIMUM_VERSION} libspectre RETURN_VALUE _return_VALUE OUTPUT_VARIABLE _pkgconfigDevNull )
      if(_return_VALUE STREQUAL "0")
-        set(LIBSPECTRE_INTERNAL_FOUND TRUE)
+        set(LIBSPECTRE_FOUND TRUE)
      endif(_return_VALUE STREQUAL "0")
    endif(_SpectreLinkFlags)
 else(NOT WIN32)
     # do not use pkg-config on windows
     find_library(_SpectreLinkFlags NAMES libspectre spectre PATHS ${CMAKE_LIBRARY_PATH})
     
-    find_path(LIBSPECTRE_INCLUDE_DIR spectre.h PATH_SUFFIXES libspectre )
+    find_path(LIBSPECTRE_INCLUDE_DIR libspectre/spectre.h )
     
-    set(LIBSPECTRE_INTERNAL_FOUND TRUE)
+    set(LIBSPECTRE_FOUND TRUE)
 endif(NOT WIN32)
 
-if (LIBSPECTRE_INTERNAL_FOUND)
+if (LIBSPECTRE_FOUND)
   set(LIBSPECTRE_LIBRARY ${_SpectreLinkFlags})
 
   # the cflags for libspectre can contain more than one include path
@@@@ -55,10 +55,10 @@@@ if (LIBSPECTRE_INTERNAL_FOUND)
     set(LIBSPECTRE_INCLUDE_DIR ${LIBSPECTRE_INCLUDE_DIR} ${_includedir})
   endforeach(_includedir)
 
-endif (LIBSPECTRE_INTERNAL_FOUND)
+endif (LIBSPECTRE_FOUND)
 
 include(FindPackageHandleStandardArgs)
-find_package_handle_standard_args(LibSpectre DEFAULT_MSG LIBSPECTRE_LIBRARY LIBSPECTRE_INTERNAL_FOUND)
+find_package_handle_standard_args(LibSpectre DEFAULT_MSG LIBSPECTRE_LIBRARY LIBSPECTRE_FOUND)
 
 # ensure that they are cached
 set(LIBSPECTRE_INCLUDE_DIR ${LIBSPECTRE_INCLUDE_DIR} CACHE INTERNAL "The libspectre include path")
@


1.1
log
@partial fix for cantor. the cmakefile is a lie
@
text
@d1 1
a1 1
$OpenBSD$
d15 1
a15 1
@@@@ -33,7 +33,7 @@@@ if(NOT WIN32)
d24 2
a25 1
@@@@ -42,10 +42,10 @@@@ else(NOT WIN32)
d27 2
a28 1
     find_path(LIBSPECTRE_INCLUDE_DIR spectre.h PATH_SUFFIXES libspectre )
d39 6
a44 2
@@@@ -58,7 +58,7 @@@@ if (LIBSPECTRE_INTERNAL_FOUND)
 endif (LIBSPECTRE_INTERNAL_FOUND)
@

