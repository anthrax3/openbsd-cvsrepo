head	1.4;
access;
symbols
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2013.12.08.19.13.32;	author zhuk;	state dead;
branches;
next	1.3;

1.3
date	2013.07.05.21.50.52;	author zhuk;	state Exp;
branches;
next	1.2;

1.2
date	2013.07.04.00.46.31;	author zhuk;	state Exp;
branches;
next	1.1;

1.1
date	2013.07.02.19.00.32;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Move on to KDE 4.11.4.

In this release, four "fat" packages were split:

  * kdeadmin
  * kdenetwork
  * kdesdk
  * kdetoys

To make updates reliable, we provide corresponding meta-packages now.

Many new patches in x11/kde4 correspond to the linking problems detected.
Those are planned to integrate upstream but probably we'll have to keep
some of them until KDE 5.

For information about major KDE 4.11 features, look at the official site:
http://www.kde.org/announcements/4.11/

Kopete Jingle support is disabled for now, until googletalk-call gets
cured from permanent coredumping.

This update involved a lot of help and patience for my mistakes from
many people, including ajacoutot@@, espie@@, naddy@@... but most of the
times this was landry@@ who definitely deserves personal "thank you"!
@
text
@$OpenBSD: patch-cmake_modules_PythonMacros_cmake,v 1.3 2013/07/05 21:50:52 zhuk Exp $
Unbreak build of Python-based KDE apps (with Ninja).
Upstream review: https://git.reviewboard.kde.org/r/111371/
--- cmake/modules/PythonMacros.cmake.orig	Fri Jun 28 21:03:40 2013
+++ cmake/modules/PythonMacros.cmake	Sat Jul  6 01:38:22 2013
@@@@ -20,8 +20,6 @@@@ macro(PYTHON_INSTALL SOURCE_FILE DESTINATION_DIR)
 
   find_file(_python_compile_py PythonCompile.py PATHS ${CMAKE_MODULE_PATH})
 
-  add_custom_target(compile_python_files ALL)
-
   # Install the source file.
   install(FILES ${SOURCE_FILE} DESTINATION ${DESTINATION_DIR})
 
@@@@ -54,17 +52,21 @@@@ macro(PYTHON_INSTALL SOURCE_FILE DESTINATION_DIR)
     # Setting because it will be displayed later, in compile_python_files
     set(_message "Byte-compiling ${_bin_py} to ${_bin_pyc}")
 
+    string(REPLACE "/" "_" _rule_name "${_basepath}/${_bin_pyc}")
+    add_custom_target("${_rule_name}" ALL)
+    message("TARGET: ${_rule_name}:  ${_bin_py} => ${_bin_pyc}")
+
     get_filename_component(_abs_bin_py ${_bin_py} ABSOLUTE)
     if(_abs_bin_py STREQUAL _absfilename)    # Don't copy the file onto itself.
       add_custom_command(
-        TARGET compile_python_files
+        TARGET "${_rule_name}"
         COMMAND "${CMAKE_COMMAND}" -E echo "${_message}"
         COMMAND "${PYTHON_EXECUTABLE}" "${_python_compile_py}" "${_bin_py}"
         DEPENDS "${_absfilename}"
       )
     else()
       add_custom_command(
-        TARGET compile_python_files
+        TARGET "${_rule_name}"
         COMMAND "${CMAKE_COMMAND}" -E echo "${_message}"
         COMMAND "${CMAKE_COMMAND}" -E copy "${_absfilename}" "${_bin_py}"
         COMMAND "${PYTHON_EXECUTABLE}" "${_python_compile_py}" "${_bin_py}"
@


1.3
log
@Sync with what was committed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-cmake_modules_PythonMacros_cmake,v 1.2 2013/07/04 00:46:31 zhuk Exp $
@


1.2
log
@Update to KDE 4.10.5. Some highlights:
  * @@conflict markers relative to KDE3 packages added, to be used soon.
  * Migration to Ruby 1.9 for corresponding ports. Also added @@pkgpath to
    x11/ruby-qt4 in x11/kde4/ruby-qt, because they are really the same
    (except that x11/ruby-qt4 contains also smokegen and smokeqt stuff).
  * kde-base-artwork and kde-wallpapers leaved at 4.10.4 because they:
    1) did not change; 2) are heavy enough.
@
text
@d1 5
a5 4
$OpenBSD$
Unbreak build with Ninja.
--- cmake/modules/PythonMacros.cmake.orig	Fri Jun 28 18:54:56 2013
+++ cmake/modules/PythonMacros.cmake	Fri Jun 28 18:58:54 2013
d15 1
a15 2
@@@@ -53,18 +51,19 @@@@ macro(PYTHON_INSTALL SOURCE_FILE DESTINATION_DIR)
 
a17 1
+    add_custom_target(${_bin_pyc} ALL)
d19 4
d27 1
a27 1
+        TARGET "${_bin_pyc}"
d35 1
a35 1
+        TARGET "${_bin_pyc}"
@


1.1
log
@Unbreak build of PyKDE and its dependencies with Ninja.  Patch sent upstream.
@
text
@d2 3
a4 4
Unbreak build of PyKDE and its dependencies with Ninja.
KDE review: https://git.reviewboard.kde.org/r/111371/
--- cmake/modules/PythonMacros.cmake.orig	Tue May 28 22:33:13 2013
+++ cmake/modules/PythonMacros.cmake	Tue Jul  2 22:45:21 2013
d14 2
a15 1
@@@@ -54,17 +52,20 @@@@ macro(PYTHON_INSTALL SOURCE_FILE DESTINATION_DIR)
d18 1
a19 3
+    string(REPLACE "/" "_" _rule_name "${_basepath}/${_bin_pyc}")
+    add_custom_target("${_rule_name}" ALL)
+
d24 1
a24 1
+        TARGET "${_rule_name}"
d32 1
a32 1
+        TARGET "${_rule_name}"
@

