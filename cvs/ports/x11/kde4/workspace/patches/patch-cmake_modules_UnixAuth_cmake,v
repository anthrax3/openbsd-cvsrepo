head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.16
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.14
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.12
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.8
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.10
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.6
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	zhuk_20130424:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2014.01.28.14.49.26;	author zhuk;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.24.19.17.42;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.24.19.17.42;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Fix problems with starting KDE session from startkde4, after discussion
on ports@@openbsd.org. Big hint received from Remco, thanks!

KDM still have some issues, mostly related to migration paths. To be fixed
soon.

Added/updated description for some patches while there.
@
text
@$OpenBSD: patch-cmake_modules_UnixAuth_cmake,v 1.1.1.1 2013/04/24 19:17:42 zhuk Exp $
Add support for BSD auth.
--- cmake/modules/UnixAuth.cmake.orig	Thu Jan 19 00:08:40 2012
+++ cmake/modules/UnixAuth.cmake	Mon Feb  6 14:09:47 2012
@@@@ -35,21 +35,27 @@@@ check_library_exists(crypt crypt "" HAVE_CRYPT)
 if (HAVE_CRYPT)
     set(CRYPT_LIBRARIES crypt)
     check_include_files(crypt.h HAVE_CRYPT_H)
+else (HAVE_CRYPT)
+    check_function_exists(crypt found_crypt)
+    if (found_crypt)
+    	set(HAVE_CRYPT 1)
+    endif (found_crypt)
 endif (HAVE_CRYPT)
 
-if (PAM_FOUND)
-
-    set(HAVE_PAM 1)
-    set(UNIXAUTH_LIBRARIES ${PAM_LIBRARIES})
-    set(UNIXAUTH_INCLUDE_DIRS ${PAM_INCLUDE_DIR})
-
-else (PAM_FOUND)
-
-    if (HAVE_GETSPNAM)
-        set(UNIXAUTH_LIBRARIES ${SHADOW_LIBRARIES})
-    endif (HAVE_GETSPNAM)
-    if (NOT HAVE_PW_ENCRYPT)
-        set(UNIXAUTH_LIBRARIES ${UNIXAUTH_LIBRARIES} ${CRYPT_LIBRARIES})
-    endif (NOT HAVE_PW_ENCRYPT)
-
-endif (PAM_FOUND)
+check_function_exists(auth_userokay found_auth_userokay)
+if (found_auth_userokay)
+    set(HAVE_BSDAUTH 1)
+else (found_auth_userokay)
+    if (PAM_FOUND)
+        set(HAVE_PAM 1)
+        set(UNIXAUTH_LIBRARIES ${PAM_LIBRARIES})
+        set(UNIXAUTH_INCLUDE_DIRS ${PAM_INCLUDE_DIR})
+    else (PAM_FOUND)
+        if (HAVE_GETSPNAM)
+            set(UNIXAUTH_LIBRARIES ${SHADOW_LIBRARIES})
+        endif (HAVE_GETSPNAM)
+        if (NOT HAVE_PW_ENCRYPT)
+            set(UNIXAUTH_LIBRARIES ${UNIXAUTH_LIBRARIES} ${CRYPT_LIBRARIES})
+        endif (NOT HAVE_PW_ENCRYPT)
+    endif (PAM_FOUND)
+endif (found_auth_userokay)
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
$OpenBSD: patch-cmake_modules_UnixAuth_cmake,v 1.1 2010/06/23 13:11:34 espie Exp $
@


1.1.1.1
log
@Provides the interface and basic tools for the KDE workspace.
This package contains desktop manager, Plasma panels and other
KDE 4 bells and whistles.
@
text
@@
