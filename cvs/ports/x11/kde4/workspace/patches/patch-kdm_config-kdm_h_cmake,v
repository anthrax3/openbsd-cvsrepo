head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.6
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.07.16.10.38.50;	author zhuk;	state Exp;
branches;
next	;
commitid	xscLvzvQPEvCiClI;


desc
@@


1.1
log
@Finish & actually enable BSD authentication support in KDE4.
This overcomes tweaking getpw* calls: KDM and kcheckpass code did it wrong
on OpenBSD anyway (for example, compared the whole pw_passwd with "*",
instead of checking first character only). And we support other types
of password-based authentication as a bonus now (hello, login_-ldap!).

Also, we now create directory for persistent data of KDM by default,
and it's /var/kdm (previously KDM tried to access /var/lib/kdm).
The persistent data means "the name of the previous user" etc.
Previously features like "remember last user logged in" didn't work.

KDE3 bits to follow a bit later.

generic approvement from sthen@@
@
text
@$OpenBSD$
Add BSD authentication support.
--- kdm/config-kdm.h.cmake.orig	Tue Jul 12 22:59:33 2016
+++ kdm/config-kdm.h.cmake	Tue Jul 12 23:19:02 2016
@@@@ -60,6 +60,9 @@@@
 /* Define the system's entropy device */
 #cmakedefine DEV_RANDOM ${DEV_RANDOM}
 
+/* Define if the system uses a BSD-style auth */
+#cmakedefine HAVE_BSDAUTH 1
+
 /* Define if the system uses a BSD-style init */
 #cmakedefine BSD_INIT 1
 
@
