head	1.3;
access;
symbols
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.1.1.0.2
	OPENBSD_5_5_BASE:1.1.1.1
	zhuk_20131208:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2014.11.03.13.23.52;	author zhuk;	state dead;
branches;
next	1.2;
commitid	PkTNh1PwbRj7gaT8;

1.2
date	2014.07.09.20.03.27;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	VIGhneE7m6586cHK;

1.1
date	2013.12.08.18.39.44;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.12.08.18.39.44;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Zap patches that aren't needed until Jingle support is ready and that need
adjusting. Forgot to remove them at the commit time, noticed by naddy@@.

Just verified that build goes fine on amd64.
@
text
@$OpenBSD: patch-protocols_jabber_googletalk_libjingle_CMakeLists_txt,v 1.2 2014/07/09 20:03:27 zhuk Exp $
Rework oRTP library detection, make libjingle compile and work on OpenBSD.
--- protocols/jabber/googletalk/libjingle/CMakeLists.txt.orig	Thu Jun  5 11:25:17 2014
+++ protocols/jabber/googletalk/libjingle/CMakeLists.txt	Thu Jul  3 12:26:35 2014
@@@@ -1,5 +1,7 @@@@
 # Copyright (c) 2009-2013 Pali Roh√°r <pali.rohar@@gmail.com>
 
+include(CheckCXXCompilerFlag)
+
 ########### next target ###############
 
 add_definitions (
@@@@ -36,9 +38,17 @@@@ if ( CMAKE_BUILD_TYPE STREQUAL "Debug" )
 	add_definitions ( -D_DEBUG )
 endif ( CMAKE_BUILD_TYPE STREQUAL "Debug" )
 
+add_definitions (-DOPENBSD -DBSD)
+
 set ( CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wno-undef -Wno-unused-parameter" )
-set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-undef -Wno-unused-parameter -Wno-non-virtual-dtor -Wno-delete-non-virtual-dtor -std=gnu++98" )
+set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-undef -Wno-unused-parameter -Wno-non-virtual-dtor -Wno-delete-non-virtual-dtor" )
+set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-undef -Wno-unused-parameter -Wno-non-virtual-dtor -std=gnu++98" )
 
+check_cxx_compiler_flag(-Wno-delete-non-virtual-dtor W_NO_DELETE_NON_VIRTUAL_DTOR_SUPPORTED)
+if ( W_NO_DELETE_NON_VIRTUAL_DTOR_SUPPORTED )
+       set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-delete-non-virtual-dtor" )
+endif ()
+
 ########### next target ###############
 
 include_directories (
@@@@ -46,7 +56,7 @@@@ include_directories (
 	${CMAKE_CURRENT_SOURCE_DIR}/talk/third_party/libudev
 	${EXPAT_INCLUDE_DIR}
 	${MEDIASTREAMER_INCLUDE_DIR}
-	${LIBORTP_INCLUDE_DIR}
+	${LIBORTP_INCLUDE_DIRS}
 	${SRTP_INCLUDE_DIR}
 	${JSONCPP_INCLUDE_DIR}
 	${ALSA_INCLUDES}
@@@@ -67,10 +77,6 @@@@ set ( call_SRCS
 	talk/base/libdbusglibsymboltable.cc
 	talk/session/phone/libudevsymboltable.cc
 	talk/session/phone/linuxdevicemanager.cc
-	talk/session/phone/v4llookup.cc
-	talk/sound/alsasoundsystem.cc
-	talk/sound/alsasymboltable.cc
-	talk/sound/linuxsoundsystem.cc
 	talk/sound/pulseaudiosoundsystem.cc
 	talk/sound/pulseaudiosymboltable.cc
 	talk/base/unixfilesystem.cc
@@@@ -216,6 +222,7 @@@@ set ( call_SRCS
 	talk/session/phone/videocapturer.cc
 	talk/session/phone/videocommon.cc
 	talk/session/phone/videoframe.cc
+	talk/sound/linuxsoundsystem.cc
 	talk/sound/nullsoundsystem.cc
 	talk/sound/nullsoundsystemfactory.cc
 	talk/sound/platformsoundsystem.cc
@


1.2
log
@"small update" (c) tedu@@

Here KDE 4.13.2 comes. Big release changelogs could be read here:

  http://www.kde.org/announcements/4.12/
  http://www.kde.org/announcements/4.13/

Critical things you should be aware of:

  1. Nepomuk is gone, it's superseeded by Baloo. Nepomuk libraries
     are still here, though, but they do rely on Baloo internally.

  2. kdnssd was renamed to zeroconf-ioslave;

  3. kwallet was renamed to kwalletmanager;

  4. Akonadi cache will be rebuilt; this could result in change
     of PIM folder indexes, which in turn could mess up your
     mail filters - beware.

  5. ... a lot of other little problems that always happen during
     update.

Things could be broken for a day or two in subtle ways - don't
hesistate on reporting them!
@
text
@d1 1
a1 1
$OpenBSD: patch-protocols_jabber_googletalk_libjingle_CMakeLists_txt,v 1.1.1.1 2013/12/08 18:39:44 zhuk Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 2
a4 2
--- protocols/jabber/googletalk/libjingle/CMakeLists.txt.orig	Wed Aug 28 21:16:17 2013
+++ protocols/jabber/googletalk/libjingle/CMakeLists.txt	Thu Dec  5 19:18:50 2013
d13 3
a15 3
@@@@ -28,9 +30,16 @@@@ if ( NOT WIN32 )
 	endif ( NOT APPLE )
 endif ( NOT WIN32 )
d20 3
a22 2
-set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-undef -Wno-unused-parameter -Wno-non-virtual-dtor -Wno-delete-non-virtual-dtor" )
+set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-undef -Wno-unused-parameter -Wno-non-virtual-dtor" )
d26 1
a26 1
+	set ( CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -Wno-delete-non-virtual-dtor" )
d32 1
a32 1
@@@@ -38,7 +47,7 @@@@ include_directories (
d40 2
a41 2
 )
@@@@ -52,10 +61,6 @@@@ set ( call_SRCS
d52 1
a52 1
@@@@ -201,6 +206,7 @@@@ set ( call_SRCS
a59 44
@@@@ -248,23 +254,40 @@@@ set ( call_SRCS
 	talk/examples/login/xmppsocket.cc
 )
 
+find_package( LibV4L2 )
+if ( LIBV4L2_FOUND )
+	set( call_SRCS ${call_SRCS}
+		talk/session/phone/v4llookup.cc
+	)
+endif ()
+
+find_package( ALSA )
+if ( ALSA_FOUND )
+	set ( call_SRCS ${call_SRCS}
+		talk/sound/alsasoundsystem.cc
+		talk/sound/alsasymboltable.cc
+	)
+endif ()
+
 set ( call_LIBS
 	${SRTP_LIBRARY}
 	${JSONCPP_LIBRARY}
 	${EXPAT_LIBRARY}
 	${MEDIASTREAMER_LIBRARIES}
-	${LIBORTP_LIBRARY}
+	${LIBORTP_LIBRARIES}
 	${CMAKE_DL_LIBS}
 )
 
 if ( NOT WIN32 )
 	#timeutils calls CLOCK_MONOLITHIC stuff, so we need the rt library
-	FIND_LIBRARY(RT_LIBRARY NAMES rt)
 	set ( call_LIBS ${call_LIBS}
 		${SSL_LIBRARY}
 		${CRYPTO_LIBRARY}
-		${RT_LIBRARY}
 	)
+	FIND_LIBRARY(RT_LIBRARY NAMES rt)
+	if ( RT_LIBRARY )
+		set ( call_LIBS ${call_LIBS} ${RT_LIBRARY} )
+	endif ()
 endif ( NOT WIN32 )
 
 add_executable ( call ${call_SRCS} )
@


1.1.1.1
log
@Kopete is an instant messenger supporting AIM, Bonjour, Gadu-Gadu,
GroupWise, ICQ, Jabber (XMPP, Google Talk, Facebook, ...), Meanwhile,
QQ, Skype, Windows Live Messenger, WinPopup, Yahoo and more. It is
designed to be a flexible and extensible multi-protocol system
suitable for personal and enterprise use.

The goal of Kopete is to provide users with a single easy-to-use
way to access all of their instant messaging systems. The interface
puts people first, and is integrated with the system address book
to let you access your contacts from other KDE applications. Instant
messaging can be intrusive, but Kopete's notification system can
be tuned so that only important contacts interrupt you.

Kopete also features tools to enhance your instant messaging
experience, such as message encryption, archiving, and many other
fun and useful effects.

This is ex-kdenetwork member. Importing as a part of KDE 4.11.4 update.
This port won't work until update is finished, thus not hooking it up.
@
text
@@
