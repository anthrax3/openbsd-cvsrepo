head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2000.06.20.13.08.22;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2000.06.18.00.04.08;	author espie;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to #139, upstream bugfixes; ok espie@@
@
text
@$OpenBSD: patch-main_c,v 1.1 2000/06/18 00:04:08 espie Exp $
--- main.c.orig	Sat Jun 10 21:17:09 2000
+++ main.c	Sun Jun 18 01:49:46 2000
@@@@ -1302,7 +1302,7 @@@@ main (int argc, char *argv[])
 	Widget form_top, menu_top;
 	register TScreen *screen;
 	int mode;
-	char *app_name = "XTerm";
+	char *class_name = "XTerm";  /* DO NOT CHANGE */
 
 	/* Do these first, since we may not be able to open the display */
 	ProgramName = argv[0];
@@@@ -1312,11 +1312,13 @@@@ main (int argc, char *argv[])
 			Version();
 		if (abbrev(argv[1], "-help"))
 			Help();
+#if 0 /* This is _wrong_: -name is read by X toolkit already! */
 		for (n = 1; n < argc - 1; n++) {
 			if (abbrev(argv[n], "-name")) {
-				app_name = argv[n+1];
+				class_name = argv[n+1];
 			}
 		}
+#endif
 	}
 
 	/* This dumps core on HP-UX 9.05 with X11R5 */
@@@@ -1625,7 +1627,7 @@@@ main (int argc, char *argv[])
 #endif
 
 	    XtSetErrorHandler(xt_error);
-	    toplevel = XtAppInitialize (&app_con, app_name,
+	    toplevel = XtAppInitialize (&app_con, class_name,
 					optionDescList,
 					XtNumber(optionDescList),
 					&argc, argv, fallback_resources,
@


1.1
log
@There is a bug in versions 137 and 138 of xterm: the -name option sets
the application class for X11 resources and not just the application
name (as specified by the man page and as usual for Xt applications).
This breaks many resource files.

(patch and explanation by David.Madore@@ens.fr)
Ok'd naddy@@
@
text
@d1 1
a1 1
$OpenBSD: update-patches,v 1.3 2000/06/09 17:08:37 espie Exp $
@

