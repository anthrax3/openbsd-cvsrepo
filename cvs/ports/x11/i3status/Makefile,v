head	1.47;
access;
symbols
	OPENBSD_6_1:1.44.0.2
	OPENBSD_6_1_BASE:1.44
	OPENBSD_6_0:1.38.0.4
	OPENBSD_6_0_BASE:1.38
	OPENBSD_5_9:1.38.0.2
	OPENBSD_5_9_BASE:1.38
	OPENBSD_5_8:1.36.0.4
	OPENBSD_5_8_BASE:1.36
	OPENBSD_5_7:1.32.0.4
	OPENBSD_5_7_BASE:1.32
	OPENBSD_5_6:1.32.0.2
	OPENBSD_5_6_BASE:1.32
	OPENBSD_5_5:1.31.0.2
	OPENBSD_5_5_BASE:1.31
	OPENBSD_5_4:1.30.0.2
	OPENBSD_5_4_BASE:1.30
	OPENBSD_5_3:1.26.0.2
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.5.0.2
	OPENBSD_5_2_BASE:1.5
	jasper_20120205:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.47
date	2017.08.14.22.32.17;	author jcs;	state Exp;
branches;
next	1.46;
commitid	BgAGdhapGoyA5YI6;

1.46
date	2017.07.27.09.09.16;	author tb;	state Exp;
branches;
next	1.45;
commitid	JohD6O7zk4yLy9fq;

1.45
date	2017.07.08.07.02.58;	author jasper;	state Exp;
branches;
next	1.44;
commitid	D89krntv10bCYkSL;

1.44
date	2017.02.07.18.22.28;	author jasper;	state Exp;
branches;
next	1.43;
commitid	e89UYhX4AROg38mw;

1.43
date	2017.02.02.08.00.43;	author tb;	state Exp;
branches;
next	1.42;
commitid	sKB3E2ikuTmqWLy0;

1.42
date	2017.01.31.18.47.56;	author jasper;	state Exp;
branches;
next	1.41;
commitid	q8gxw00n9FkLwJE4;

1.41
date	2017.01.29.15.12.42;	author jasper;	state Exp;
branches;
next	1.40;
commitid	EcvcDgTHpTpgl4IM;

1.40
date	2016.09.10.13.03.44;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	4KcvAK91uGdTLejD;

1.39
date	2016.08.16.09.10.36;	author sthen;	state Exp;
branches;
next	1.38;
commitid	JkZMGiDg2zqEa6YS;

1.38
date	2016.01.04.22.31.17;	author jasper;	state Exp;
branches;
next	1.37;
commitid	Vlzxck3cu5dH5A2T;

1.37
date	2015.09.11.14.58.49;	author sthen;	state Exp;
branches;
next	1.36;
commitid	R3M61eOtRWMvr7dF;

1.36
date	2015.07.30.08.11.53;	author robert;	state Exp;
branches;
next	1.35;
commitid	EGlrKHYY5qHd1brv;

1.35
date	2015.04.04.08.55.32;	author jasper;	state Exp;
branches;
next	1.34;
commitid	vDIQpFWud2Q55TdO;

1.34
date	2015.04.02.14.36.42;	author jasper;	state Exp;
branches;
next	1.33;
commitid	mG8RNuPV94DJOaze;

1.33
date	2015.04.02.14.27.20;	author jasper;	state Exp;
branches;
next	1.32;
commitid	weIlTm9rYce6oSIk;

1.32
date	2014.03.09.20.03.43;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2014.01.30.13.19.40;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2013.06.19.09.15.07;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.11.11.46.13;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.08.10.23.13;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.04.11.34.51;	author jasper;	state Exp;
branches;
next	1.26;

1.26
date	2012.10.25.14.21.54;	author jasper;	state Exp;
branches;
next	1.25;

1.25
date	2012.10.12.07.57.26;	author dcoppa;	state Exp;
branches;
next	1.24;

1.24
date	2012.10.09.17.12.31;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2012.10.09.16.02.07;	author jasper;	state Exp;
branches;
next	1.22;

1.22
date	2012.10.09.13.19.48;	author jasper;	state Exp;
branches;
next	1.21;

1.21
date	2012.10.09.11.32.45;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2012.10.09.11.29.23;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2012.10.09.09.32.26;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2012.10.09.09.08.12;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2012.10.08.18.07.06;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2012.10.08.14.45.10;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2012.10.08.11.49.30;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2012.10.08.11.26.48;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2012.10.08.11.12.53;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2012.10.08.10.33.39;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2012.10.08.10.20.50;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2012.10.08.10.07.41;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2012.10.04.08.41.01;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2012.10.04.06.15.38;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2012.10.02.20.33.29;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.27.11.06.31;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2012.07.07.09.43.54;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.05.14.07.54.23;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2012.05.04.07.46.23;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2012.05.03.20.27.26;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2012.05.02.07.37.10;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.05.02.07.37.10;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.47
log
@for battery status, use sysctl to walk sensors and find power usage.
continue using APM for other battery info so it works on older
machines but newer ones will be able to see "%consumption".

ok jasper
@
text
@# $OpenBSD: Makefile,v 1.46 2017/07/27 09:09:16 tb Exp $

ONLY_FOR_ARCHS=		${APM_ARCHS}

COMMENT=		generate a statusbar for use with i3/xmobar/dzen2

DISTNAME=		i3status-2.11
REVISION=		5
CATEGORIES=		x11 sysutils

HOMEPAGE=		http://i3wm.org/i3status/

MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${HOMEPAGE}
EXTRACT_SUFX=		.tar.bz2

WANTLIB += c confuse m pthread yajl

USE_GMAKE=		Yes

BUILD_DEPENDS=		textproc/asciidoc>=8.6.8
LIB_DEPENDS=		devel/libconfuse \
			devel/libyajl

NO_TEST=		Yes

# XXX: Optimizing results in seg. faults on at least amd64.
CFLAGS+=		-O0

MAKE_ENV+=		V=1 SYSCONFDIR=${PREFIX}/share/examples/i3status/

pre-configure:
	${SUBST_CMD} ${WRKSRC}/Makefile

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/i3status ${PREFIX}/bin/
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/i3status
	${INSTALL_DATA} ${WRKSRC}/i3status.conf \
		${PREFIX}/share/examples/i3status/
	${INSTALL_MAN} ${WRKSRC}/man/i3status.1 ${PREFIX}/man/man1/

.include <bsd.port.mk>
@


1.46
log
@Bump after recent ABI break in struct ieee80211_nodereq so that the signal
strength of WiFi networks is printed again instead of a dull '?'.

ok jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2017/07/08 07:02:58 jasper Exp $
d8 1
a8 1
REVISION=		4
@


1.45
log
@*** empty log message ***
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2017/02/07 18:22:28 jasper Exp $
d8 1
a8 1
REVISION=		3
@


1.44
log
@plug an fd leak, reported by rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2017/02/02 08:00:43 tb Exp $
d8 1
a8 1
REVISION=		2
@


1.43
log
@Suppress printing :00 seconds of remaining battery lifetime, as apm(4)'s
estimate only has a granularity of minutes.

ok jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2017/01/31 18:47:56 jasper Exp $
d8 1
a8 1
REVISION=		1
@


1.42
log
@implement support for finding the first wireless/ethernet device.
one can now use the '_first_' identifier on OpenBSD too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2017/01/29 15:12:42 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.41
log
@update to i3status-2.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2016/09/10 13:03:44 ajacoutot Exp $
d8 1
@


1.40
log
@First pass at pre-entively fixing ports that would break once guenther's header
pollution diff is in.

lang/squeak/vm does not build but it's due to the recent audio changes
games/xbattle: also fixes some conflicting implicit decl
print/hplip: also fixes some conflicting implicit decl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2016/08/16 09:10:36 sthen Exp $
d7 1
a7 2
DISTNAME=		i3status-2.10
REVISION=		1
@


1.39
log
@bump REVISION for ieee80211_nodereq change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/01/04 22:31:17 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.38
log
@- update to i3status-2.10

tested by many, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2015/09/11 14:58:49 sthen Exp $
d8 1
@


1.37
log
@bump; ifmedia64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/07/30 08:11:53 robert Exp $
d7 1
a7 2
DISTNAME=		i3status-2.9
REVISION=		3
d20 1
a20 1
WANTLIB += c confuse yajl
@


1.36
log
@move away from ossaudio and get the information from the mixer(4) directly
in order to get proper volume and mute information when there is no hardware
button for volume/mute available

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/04/04 08:55:32 jasper Exp $
d8 1
a8 1
REVISION=		2
@


1.35
log
@Use the maximum rssi, not the scaled percentage for the signal level.

original issue reported by jcs@@, improved fix from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/04/02 14:36:42 jasper Exp $
d8 1
a8 1
REVISION=		1
d21 1
a21 1
WANTLIB += c confuse ossaudio yajl
@


1.34
log
@simplify patch a bit using _first_ instead of hardcoding device names
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/04/02 14:27:20 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.33
log
@- update to i3status 2.9
http://permalink.gmane.org/gmane.comp.window-managers.i3.announce/11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/03/09 20:03:43 jasper Exp $
d8 1
@


1.32
log
@For the %percentage display of batteries, drop the leading '0' for values < 10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/01/30 13:19:40 jasper Exp $
d7 1
a7 2
DISTNAME=		i3status-2.8
REVISION=		0
@


1.31
log
@update to i3status-2.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/06/19 09:15:07 dcoppa Exp $
d8 1
@


1.30
log
@Amend pkg/MESSAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/11 11:46:13 espie Exp $
d7 1
a7 2
DISTNAME=		i3status-2.7
REVISION=		0
d33 1
a33 1
MAKE_ENV+=		SYSCONFDIR=${PREFIX}/share/examples/i3status/
@


1.29
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/08 10:23:13 jasper Exp $
d8 1
@


1.28
log
@- update to i3status-2.7
* all functional patches have been committed upstream.

tested by and ok rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/03/04 11:34:51 jasper Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d28 1
a28 1
NO_REGRESS=		Yes
@


1.27
log
@no need for any quirkyness for a2x.py since the recent asciidoc update

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/10/25 14:21:54 jasper Exp $
d7 1
a7 2
DISTNAME=		i3status-2.6
REVISION=		17
@


1.26
log
@make it clear the cap_net_admin stuff is for linux only
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/10/12 07:57:26 dcoppa Exp $
d28 1
a28 1
BUILD_DEPENDS=		textproc/asciidoc
d37 1
a37 2
MAKE_ENV+=		A2X=a2x.py \
			SYSCONFDIR=${PREFIX}/share/examples/i3status/
@


1.25
log
@In the configuration file, remove comments from the wireless stanza,
since wireless monitoring now works fine.
While here, add a message about how to deal with the configuration
of i3status.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/10/09 17:12:31 jasper Exp $
d8 1
a8 1
REVISION=		16
@


1.24
log
@- Temperature sensors can now set a 'max_threshold' value to color the
  output red if exceeded.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/10/09 16:02:07 jasper Exp $
d8 1
a8 1
REVISION=		15
@


1.23
log
@make it possible to get temperature readings from devices other than acpitz.
use the 'path' option in your configuration's cpu_temperature block to e.g. cpu0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/10/09 13:19:48 jasper Exp $
d8 1
a8 1
REVISION=		14
@


1.22
log
@- change the default (and since the API is still limiting us here, only)
device from which we read temperature values from, from cpu(4) to acpitz(4).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/10/09 11:32:45 jasper Exp $
d8 1
a8 1
REVISION=		13
@


1.21
log
@- honor color_good too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/10/09 11:29:23 jasper Exp $
d8 1
a8 1
REVISION=		12
@


1.20
log
@- handle down wireless interfaces just like ethernet interfaces (e.g. colors!)
  (added bonus of this approach is that you still get nwid and signal strength
  info of the interface, for example when it's part of a trunk device.)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/10/09 09:32:26 jasper Exp $
d8 1
a8 1
REVISION=		11
@


1.19
log
@s/quality/signal/ found the hard way by rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/10/09 09:08:12 jasper Exp $
d8 1
a8 1
REVISION=		10
@


1.18
log
@- use %speed in the default config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/10/08 18:07:06 jasper Exp $
d8 1
a8 1
REVISION=		9
@


1.17
log
@- implement getting the nwid and signal strength.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/10/08 14:45:10 jasper Exp $
d8 1
a8 1
REVISION=		8
@


1.16
log
@- implement the ethernet media description (%speed flag)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/10/08 11:49:30 jasper Exp $
d8 1
a8 1
REVISION=		7
@


1.15
log
@- give an example for the cpu_temperature.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/10/08 11:26:48 jasper Exp $
d8 1
a8 1
REVISION=		6
@


1.14
log
@minor cleanup
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/10/08 11:12:53 jasper Exp $
d8 1
a8 1
REVISION=		5
@


1.13
log
@- implement colors too for threshold_type=time in the battery block.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/10/08 10:33:39 jasper Exp $
d8 1
a8 1
REVISION=		4
@


1.12
log
@- use colors to indicate battery status (currently only implemented for "threshold_type=percentage")
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/10/08 10:20:50 jasper Exp $
d8 1
a8 1
REVISION=		3
@


1.11
log
@- fix the display of remaining minutes when we're discharging.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/10/08 10:07:41 jasper Exp $
d8 1
a8 1
REVISION=		2
@


1.10
log
@fix the battery status printing in %status
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/10/04 08:41:01 jasper Exp $
d8 1
a8 1
REVISION=		1
@


1.9
log
@sync with upstream patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/10/04 06:15:38 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.8
log
@- update to i3status 2.6

tested by dcoppa@@ also
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/10/02 20:33:29 jasper Exp $
d8 1
@


1.7
log
@fix: non-i3bar formats always used color_bad


from upstream git
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/09/27 11:06:31 dcoppa Exp $
d7 1
a7 2
DISTNAME=		i3status-2.5.1
REVISION=		2
@


1.6
log
@Set output_format to "i3bar", to have colours by default.

ok jasper@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/07/07 09:43:54 jasper Exp $
d8 1
a8 1
REVISION=		1
@


1.5
log
@Avoid division by zero when calculating CPU usage.

from upstream git
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/05/14 07:54:23 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.4
log
@- update to 2.5.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/05/04 07:46:23 jasper Exp $
d8 1
@


1.3
log
@- tweak manpage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/05/03 20:27:26 jasper Exp $
d7 1
a7 2
DISTNAME=		i3status-2.5
REVISION=		0
@


1.2
log
@- update to 2.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/05/02 07:37:10 jasper Exp $
d8 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 2
# git snapshot as of 2011-04-08
DISTNAME=		i3status-2.4.0.1
d10 1
a10 1
HOMEPAGE=		http://i3wm.org/i3status
d20 2
a21 1
MASTER_SITES=		http://distfiles.nl/
@


1.1.1.1
log
@import i3status 2.4.1 (git clone as of a few days ago, along with a load of
patches for OpenBSD support, which have all been committed upstream already)

i3status is a small program (about 1500 SLOC) for generating a status
bar for dzen2, xmobar or similar programs. It is designed to be very
efficient by issuing a very small number of system calls, as one
generally wants to update such a status line every second. This ensures
that even under high load, your status bar is updated correctly. Also,
it saves a bit of energy by not hogging your CPU as much as spawning the
corresponding amount of shell commands would.

ok dcoppa@@
@
text
@@
