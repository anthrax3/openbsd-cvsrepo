head	1.8;
access;
symbols
	OPENBSD_6_2:1.8.0.4
	OPENBSD_6_2_BASE:1.8
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.6.0.8
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.4
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.6
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.1.1.0.12
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.10
	OPENBSD_4_7_BASE:1.1.1.1
	OPENBSD_4_6:1.1.1.1.0.8
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.6
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.4
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	merdely_20070906:1.1.1.1
	merdely:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2016.11.07.10.51.36;	author sthen;	state Exp;
branches;
next	1.7;
commitid	bXhLeQYbQdffqUSF;

1.7
date	2016.08.12.02.44.36;	author jcs;	state Exp;
branches;
next	1.6;
commitid	OvdCb3liZXymSJqW;

1.6
date	2014.10.23.07.26.55;	author jasper;	state Exp;
branches;
next	1.5;
commitid	MSLWX4UEV48NsJfC;

1.5
date	2014.07.09.14.34.54;	author robert;	state Exp;
branches;
next	1.4;
commitid	uPfnWX7ztUQGs0vf;

1.4
date	2013.03.11.11.46.09;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.16.12.29.13;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.11.22.08.36.56;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2007.09.06.19.46.01;	author merdely;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.09.06.19.46.01;	author merdely;	state Exp;
branches;
next	;


desc
@@


1.8
log
@sync WANTLIB (readding idn to some where I was overzealous, plus some lzma/pthread)
@
text
@# $OpenBSD: Makefile,v 1.7 2016/08/12 02:44:36 jcs Exp $

COMMENT-main=	general purpose messaging, notification and menu program
COMMENT-gadgets=gadgets and scripts for dzen2

GH_COMMIT=		488ab66019f475e35e067646621827c18a879ba1
GH_ACCOUNT=		robm
GH_PROJECT=		dzen
V=			0.9.5
REVISION=		2

DISTNAME=		dzen2-$V
PKGNAME-main=		${DISTNAME}
PKGNAME-gadgets=	dzen2-gadgets-$V

CATEGORIES=		x11

HOMEPAGE=		https://github.com/robm/dzen
MAINTAINER=		Dmitri Alenichev <mitya@@rockers.su>

MULTI_PACKAGES=		-main -gadgets

# MIT/X
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		X11 c Xinerama Xpm

RUN_DEPENDS-gadgets=	x11/dzen2

FLAVORS=		xft
FLAVOR?=

.if ${FLAVOR:Mxft}
WANTLIB+=		Xft
XFT_CFLAGS=		-DDZEN_XFT `pkg-config --cflags xft`
XFT_LDFLAGS=		`pkg-config --libs xft`
.endif

MAKE_FLAGS=		CC=${CC} \
			CFLAGS="${CFLAGS} -I${X11BASE}/include \
				-DVERSION=\\\"$V\\\" -DDZEN_XINERAMA \
				-DDZEN_XPM ${XFT_CFLAGS}" \
			LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib -lX11 \
				-lXinerama -lXpm ${XFT_LDFLAGS}" \
			X11LIB=${X11BASE}/lib

GADGETS=		dbar gdbar gcpubar textwidth

NO_TEST=		Yes

post-patch:
	@@perl -pi -e 's,\@@DZEN\@@,${LOCALBASE}/bin/dzen2,' \
		${WRKSRC}/gadgets/kittscanner.sh

post-build:
	@@cd ${WRKBUILD}/gadgets && exec ${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} -f ${MAKE_FILE}

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/dzen2
	${INSTALL_DATA} ${WRKSRC}/bitmaps/* ${PREFIX}/share/pixmaps
	cd ${WRKSRC} && ${INSTALL_DATA} CREDITS LICENSE README \
		README.dzen gadgets/README.kittscanner ${PREFIX}/share/doc/dzen2
	cd ${WRKSRC}/gadgets && ${INSTALL_SCRIPT} kittscanner.sh noisyalert.sh \
		${PREFIX}/bin
.for G in ${GADGETS}
	${INSTALL_PROGRAM} ${WRKSRC}/gadgets/${G} ${PREFIX}/bin
	${INSTALL_DATA} ${WRKSRC}/gadgets/README.${G} ${PREFIX}/share/doc/dzen2
.endfor

.include <bsd.port.mk>
@


1.7
log
@add an xft flavor to dzen2

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/10/23 07:26:55 jasper Exp $
d6 3
d10 2
d15 1
a15 1
REVISION=		1
a24 2
WANTLIB-main=		X11 c Xinerama Xpm
WANTLIB-gadgets=	X11 c
d26 1
a26 3
GH_COMMIT=		488ab66019f475e35e067646621827c18a879ba1
GH_ACCOUNT=		robm
GH_PROJECT=		dzen
d34 1
a34 1
WANTLIB-main+=		Xft
@


1.6
log
@switch to working maintainer email; ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/07/09 14:34:54 robert Exp $
d10 1
a10 1
REVISION=		0
d29 9
d41 3
a43 1
				-DDZEN_XPM" \
@


1.5
log
@update to 0.9.5 using the github repository which includes many fixes
including continuous segmentation faults
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:46:09 espie Exp $
d10 1
d14 1
a14 1
MAINTAINER=		Dmitri Alenitchev <dma@@dma.org.ru>
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/09/16 12:29:13 espie Exp $
d6 1
a6 1
V=			0.8.5
a10 1
REVISION-gadgets =	0
d12 1
a12 1
HOMEPAGE=		http://gotmor.googlepages.com/dzen
d22 3
a24 1
MASTER_SITES=		http://gotmor.googlepages.com/
@


1.3
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/11/22 08:36:56 espie Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d35 1
a35 1
NO_REGRESS=		Yes
@


1.2
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/09/06 19:46:01 merdely Exp $
d11 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d27 1
a27 1
RUN_DEPENDS-gadgets=	:dzen2-*:x11/dzen2
@


1.1.1.1
log
@Dzen is a general purpose messaging, notification and menu program
for X11. It was desigend to be scriptable in any language and
integrate well with window managers like dwm, wmii and xmonad though
it will work with any windowmanger.

From Dmitri Alenitchev <dma () dma dot org dot ru> (MAINTAINER) with
tweaks and help from kili@@ and simon@@.

ok kili@@, simon@@
@
text
@@
