head	1.17;
access;
symbols
	OPENBSD_6_1:1.16.0.2
	OPENBSD_6_1_BASE:1.16
	OPENBSD_6_0:1.15.0.2
	OPENBSD_6_0_BASE:1.15
	OPENBSD_5_9:1.13.0.2
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.10.0.4
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3;
locks; strict;
comment	@# @;


1.17
date	2017.08.23.15.20.14;	author dcoppa;	state Exp;
branches;
next	1.16;
commitid	gPRM0zs4Q7ZB5yV6;

1.16
date	2016.08.17.15.10.24;	author dcoppa;	state Exp;
branches;
next	1.15;
commitid	TBnX9Z9MvDJ7KuHn;

1.15
date	2016.05.10.10.09.52;	author dcoppa;	state Exp;
branches;
next	1.14;
commitid	q8mu7RsOLXVIC1me;

1.14
date	2016.04.21.11.42.29;	author dcoppa;	state Exp;
branches;
next	1.13;
commitid	ZRGJ0prh7kInKVmC;

1.13
date	2015.12.23.09.19.57;	author dcoppa;	state Exp;
branches;
next	1.12;
commitid	BeASrkquSZntAQWm;

1.12
date	2015.11.04.13.49.34;	author dcoppa;	state Exp;
branches;
next	1.11;
commitid	ooYRKoniqwH027vC;

1.11
date	2015.09.01.07.45.47;	author dcoppa;	state Exp;
branches;
next	1.10;
commitid	Pf0atR2AvJ2DuHFR;

1.10
date	2015.05.18.06.06.49;	author dcoppa;	state Exp;
branches;
next	1.9;
commitid	88CqB87YsnXdZFOy;

1.9
date	2015.03.19.10.54.50;	author dcoppa;	state Exp;
branches;
next	1.8;
commitid	PYAu7WL5hJdNLWYa;

1.8
date	2015.02.19.09.33.45;	author dcoppa;	state Exp;
branches;
next	1.7;
commitid	myRjJmb5KPJVdH0O;

1.7
date	2015.01.08.09.21.38;	author dcoppa;	state Exp;
branches;
next	1.6;
commitid	rVkEIKlRG7B3ApxO;

1.6
date	2014.09.29.14.33.44;	author dcoppa;	state Exp;
branches;
next	1.5;
commitid	4sqNgbhvjKUsWfw6;

1.5
date	2014.05.27.10.30.13;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2014.03.28.10.19.22;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2014.01.24.10.24.52;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2014.01.11.21.15.26;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2013.09.30.09.46.08;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.17
log
@
Update to mlterm-3.8.2
@
text
@$OpenBSD: patch-configure_in,v 1.16 2016/08/17 15:10:24 dcoppa Exp $

setuid root/setgid utmp are handled by PLIST

Do not enable VTE support if libvte is around

Index: configure.in
--- configure.in.orig
+++ configure.in
@@@@ -652,15 +652,6 @@@@ else
 				OT_LAYOUT_OBJ=hb.o
 			fi
 		fi
-
-		if test "$have_hb" != "yes"; then
-			AC_CHECK_PROG(libotf_config,libotf-config,yes)
-			if test "$libotf_config" = "yes" ; then
-				OT_LAYOUT_CFLAGS="`libotf-config --cflags` -DUSE_OT_LAYOUT"
-				OT_LAYOUT_LIBS="`libotf-config --libs`"
-				OT_LAYOUT_OBJ=otf.o
-			fi
-		fi
 	fi
 
 	if test "$have_hb" = "yes" ; then
@@@@ -807,44 +798,14 @@@@ AC_ARG_ENABLE(pty_helper,
 	pty_helper=$enable_pty_helper)
 if test "$utmp" = "yes" -a "$pty_helper" != "yes" ; then
 	UTMP_CFLAGS="-DUSE_UTMP"
-	has_utmp=`grep utmp /etc/group 2>/dev/null`
-	if test "$has_utmp" ; then
-		INSTALL_OPT="-m 2755 -g utmp"
-	else
-		INSTALL_OPT="-m 4755 -o root"
-	fi
-else
-	INSTALL_OPT="-m 755"
 fi
 
-if test "$gui" = "fb" ; then
-	INSTALL_OPT="-m 4755 -o root"
-fi
+INSTALL_OPT="-m 0555 -s"
 
 AC_SUBST(UTMP_CFLAGS)
 AC_SUBST(INSTALL_OPT)
 
-if test "${have_gtk}" = "yes" ; then
-	if test "${gtk_version}" = "3.0" ; then
-		PKG_CHECK_MODULES(VTE, vte-2.91, have_vte=yes, have_vte=no)
-		if test "$have_vte" = "yes" ; then
-			VTE_ABI=2.91
-		else
-			PKG_CHECK_MODULES(VTE, vte-2.90, have_vte=yes, have_vte=no)
-			if test "$have_vte" = "yes"; then
-				VTE_ABI=2.90
-			fi
-		fi
-	else
-		PKG_CHECK_MODULES(VTE, vte, have_vte=yes, have_vte=no)
-	fi
-	if test "$have_vte" = "yes" ; then
-		OUTPUT_FILES="gtk/Makefile ${OUTPUT_FILES}"
-		AC_SUBST(VTE_ABI)
-	fi
-else
-	have_vte=no
-fi
+have_vte=no
 
 tools="mlclient,mlconfig,mlcc,mlterm-menu,mlimgloader,registobmp,mlfc"
 AC_ARG_WITH(tools,
@


1.16
log
@
Update to mlterm-3.7.2
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.15 2016/05/10 10:09:52 dcoppa Exp $
d7 4
a10 3
--- configure.in.orig	Sun Aug 14 10:21:06 2016
+++ configure.in	Wed Aug 17 17:01:02 2016
@@@@ -628,15 +628,6 @@@@ else
d26 1
a26 1
@@@@ -773,44 +764,14 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.15
log
@
Update to mlterm-3.7.1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.14 2016/04/21 11:42:29 dcoppa Exp $
d7 3
a9 3
--- configure.in.orig	Sun May  8 08:47:04 2016
+++ configure.in	Tue May 10 11:44:54 2016
@@@@ -612,15 +612,6 @@@@ else
d25 1
a25 1
@@@@ -757,44 +748,14 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.14
log
@
Update to mlterm-3.7.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.13 2015/12/23 09:19:57 dcoppa Exp $
d7 2
a8 2
--- configure.in.orig	Sun Mar 13 11:57:40 2016
+++ configure.in	Thu Apr 21 13:06:02 2016
d24 2
a25 2
 	if test "$have_hb" = "yes" -a "$gui" != "quartz" -a "$PKG_CONFIG" != ""; then
@@@@ -741,44 +732,14 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.13
log
@
Update to mlterm-3.6.1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.12 2015/11/04 13:49:34 dcoppa Exp $
d7 19
a25 3
--- configure.in.orig	Tue Dec 15 13:25:01 2015
+++ configure.in	Wed Dec 23 09:19:54 2015
@@@@ -675,44 +675,14 @@@@ AC_ARG_ENABLE(pty_helper,
d70 1
a70 1
 tools="mlclient,mlconfig,mlcc,mlterm-menu,mlimgloader,registobmp"
@


1.12
log
@
Update to mlterm-3.6.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.11 2015/09/01 07:45:47 dcoppa Exp $
d7 3
a9 3
--- configure.in.orig	Sat Oct 24 18:18:15 2015
+++ configure.in	Wed Nov  4 13:42:59 2015
@@@@ -668,44 +668,14 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.11
log
@
Bugfixing update to mlterm-3.5.1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.10 2015/05/18 06:06:49 dcoppa Exp $
d7 3
a9 3
--- configure.in.orig	Sun Aug 30 02:03:13 2015
+++ configure.in	Tue Sep  1 09:37:52 2015
@@@@ -661,44 +661,14 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.10
log
@
We have 'nm -D' now, so remove my hack using 'objdump -T'
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.9 2015/03/19 10:54:50 dcoppa Exp $
d7 3
a9 3
--- configure.in.orig	Sat Mar 14 05:47:32 2015
+++ configure.in	Mon May 18 07:35:37 2015
@@@@ -661,46 +661,14 @@@@ AC_ARG_ENABLE(pty_helper,
d35 1
a35 1
-			LIBVTE_SUFFIX=-2.91
d38 3
a40 1
-			LIBVTE_SUFFIX=2_90
a41 1
-		AC_SUBST(LIBVTE_SUFFIX)
d47 1
a47 4
-		# "tr ..." is hack for cygwin.
-		# (removing \r which is output by win32 native pkg-config.)
-		VTE_CFLAGS="`echo $VTE_CFLAGS | tr -d '\r'`"
-		AC_SUBST(VTE_CFLAGS)
@


1.9
log
@
Update to mlterm-3.4.5
@
text
@d1 1
a1 3
$OpenBSD: patch-configure_in,v 1.8 2015/02/19 09:33:45 dcoppa Exp $

OpenBSD lacks 'nm -D'
d7 2
a8 11
--- configure.in.orig	Fri Mar 13 23:47:32 2015
+++ configure.in	Thu Mar 19 05:42:50 2015
@@@@ -318,7 +318,7 @@@@ AC_SUBST(IMAGELIB_LIBS)
 for ml_cv_lib_path in /lib /usr/lib /lib/* `echo $LIBRARY_PATH | tr ":" " "` ; do
 	libm_files=`ls $ml_cv_lib_path/libm\\.so* $ml_cv_lib_path/libm\\.sl* 2> /dev/null`
 	for libm_file in $libm_files ; do
-		if test -z "$ml_cv_libm_dir" -a -n "`$NM -D $libm_file | $GREP pow`" ; then
+		if test -z "$ml_cv_libm_dir" -a -n "`$OBJDUMP -T $libm_file | $GREP \ pow$`" ; then
 			ml_cv_libm_dir=`dirname $libm_file`
 		fi
 	done
@


1.8
log
@
Bugfixing update to mlterm-3.4.3
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.7 2015/01/08 09:21:38 dcoppa Exp $
d9 3
a11 3
--- configure.in.orig	Tue Feb 10 10:00:47 2015
+++ configure.in	Thu Feb 19 03:16:12 2015
@@@@ -313,7 +313,7 @@@@ AC_SUBST(IMAGELIB_LIBS)
d20 1
a20 1
@@@@ -656,39 +656,12 @@@@ AC_ARG_ENABLE(pty_helper,
d41 1
a41 1
-
d44 7
a50 2
-		PKG_CHECK_MODULES(VTE, vte-2.90, have_vte=yes, have_vte=no)
-		LIBVTE_SUFFIX=2_90
d62 2
d65 1
@


1.7
log
@
Update to mlterm-3.4.2
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.6 2014/09/29 14:33:44 dcoppa Exp $
d9 2
a10 2
--- configure.in.orig	Tue Jan  6 07:16:26 2015
+++ configure.in	Thu Jan  8 02:04:52 2015
d20 1
a20 1
@@@@ -641,39 +641,12 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.6
log
@
Update to mlterm-3.3.8
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.5 2014/05/27 10:30:13 dcoppa Exp $
d9 3
a11 3
--- configure.in.orig	Sat Aug 16 03:06:03 2014
+++ configure.in	Mon Sep 29 16:02:47 2014
@@@@ -309,7 +309,7 @@@@ AC_SUBST(IMAGELIB_LIBS)
d20 1
a20 1
@@@@ -629,39 +629,12 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.5
log
@
Update to mlterm-3.3.6
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.4 2014/03/28 10:19:22 dcoppa Exp $
d9 2
a10 2
--- configure.in.orig	Sun May 25 07:42:27 2014
+++ configure.in	Tue May 27 12:06:14 2014
d20 1
a20 1
@@@@ -621,39 +621,12 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.4
log
@
Update to mlterm-3.3.4
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.3 2014/01/24 10:24:52 dcoppa Exp $
d9 3
a11 3
--- configure.in.orig	Sat Mar 22 23:06:41 2014
+++ configure.in	Fri Mar 28 10:05:45 2014
@@@@ -313,7 +313,7 @@@@ AC_SUBST(IMAGELIB_LIBS)
d20 1
a20 1
@@@@ -625,39 +625,12 @@@@ AC_ARG_ENABLE(pty_helper,
@


1.3
log
@
Do not enable VTE support if libvte is around
Bump rev to be safe
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.2 2014/01/11 21:15:26 dcoppa Exp $
d9 2
a10 2
--- configure.in.orig	Sat Dec 21 18:11:51 2013
+++ configure.in	Fri Jan 24 08:17:54 2014
d59 1
a59 1
 tools="mlclient,mlconfig,mlcc,mlterm-menu,mlimgloader"
@


1.2
log
@Update to mlterm-3.3.2 + aoyama@@'s patch to add support for
OpenBSD/luna88k 8bpp framebuffer
(https://bitbucket.org/arakiken/mlterm/commits/2b4b80e883a654bc1b5ad7756843e28750ee6f37)
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.1 2013/09/30 09:46:08 dcoppa Exp $
d7 2
d10 1
a10 1
+++ configure.in	Sat Jan 11 20:02:26 2014
d20 1
a20 1
@@@@ -625,19 +625,9 @@@@ AC_ARG_ENABLE(pty_helper,
d41 20
@


1.1
log
@Update to mlterm-3.2.2

maintainer's M.I.A.
@
text
@d1 1
a1 1
$OpenBSD$
d7 3
a9 3
--- configure.in.orig	Mon Aug  5 14:48:58 2013
+++ configure.in	Wed Sep 25 10:20:52 2013
@@@@ -307,7 +307,7 @@@@ AC_SUBST(IMAGELIB_LIBS)
d18 1
a18 1
@@@@ -609,19 +609,9 @@@@ AC_ARG_ENABLE(pty_helper,
@

