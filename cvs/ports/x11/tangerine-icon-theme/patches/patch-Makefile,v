head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2;
locks; strict;
comment	@# @;


1.2
date	2015.07.19.21.44.08;	author jasper;	state Exp;
branches;
next	1.1;
commitid	8pPFGQ9p45ZMEZqc;

1.1
date	2015.04.30.12.48.49;	author ajacoutot;	state Exp;
branches;
next	;
commitid	1V2wFZvPdHSXmTNc;


desc
@@


1.2
log
@use install -D and drop ginstall dependency where applicable
@
text
@$OpenBSD: patch-Makefile,v 1.1 2015/04/30 12:48:49 ajacoutot Exp $
--- Makefile.orig	Mon Aug 31 23:37:28 2009
+++ Makefile	Sat Jul 18 14:08:36 2015
@@@@ -4,7 +4,7 @@@@ build: index.theme
 
 # intltool merging
 index.theme:
-	for f in `find -name *.icon.in -o -name *.theme.in`; do \
+	for f in `gfind -name *.icon.in -o -name *.theme.in`; do \
 	    intltool-merge -d -u po $$f $${f%.in}; \
 	done
 	cd po; intltool-update -p --verbose -g $(GETTEXT_DOMAIN)
@@@@ -14,22 +14,22 @@@@ clean:
 	rm -f po/*.pot index.theme
 
 install: index.theme
-	find [0-9]* scalable \( -name '*.png' -o -name '*.svg' -o -name '*.icon' \) -exec \
-	    install -D -m 644 '{}' $$DESTDIR/usr/share/icons/Tangerine/'{}' \;
+	gfind [0-9]* scalable \( -name '*.png' -o -name '*.svg' -o -name '*.icon' \) -exec \
+	    install -D -m 644 '{}' $$DESTDIR${PREFIX}/share/icons/Tangerine/'{}' \;
 
 	# run icon-naming-utils
-	for d in $$DESTDIR/usr/share/icons/Tangerine/*; do \
-	    (cd $$d; for c in *; do /usr/lib/icon-naming-utils/icon-name-mapping -c $$c; done); \
+	for d in $$DESTDIR${PREFIX}/share/icons/Tangerine/*; do \
+	    (cd $$d; for c in *; do ${LOCALBASE}/libexec/icon-name-mapping -c $$c; done); \
 	done
 
 	# install mo files
 	for f in po/*.po; do \
-	    D=$$DESTDIR/usr/share/locale/`basename $$f .po`/LC_MESSAGES/; \
+	    D=$$DESTDIR${PREFIX}/share/locale/`basename $$f .po`/LC_MESSAGES/; \
 	    install -d -m 755 $$D; \
 	    msgfmt -o $$D/$(GETTEXT_DOMAIN).mo $$f; \
 	done
 
 	# install index
-	install -D -m 644 index.theme $$DESTDIR/usr/share/icons/Tangerine/index.theme
+	install -D -m 644 index.theme $$DESTDIR${PREFIX}/share/icons/Tangerine/index.theme
 
 .PHONY: build i18n clean install
@


1.1
log
@Update to tangerine-icon-theme-0.27.
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.orig	Tue Sep  1 07:37:28 2009
+++ Makefile	Thu Apr 30 14:43:02 2015
d20 1
a20 1
+	    ginstall -D -m 644 '{}' $$DESTDIR${PREFIX}/share/icons/Tangerine/'{}' \;
a31 1
-	    install -d -m 755 $$D; \
d33 1
a33 1
+	    ginstall -d -m 755 $$D; \
d39 1
a39 1
+	ginstall -D -m 644 index.theme $$DESTDIR${PREFIX}/share/icons/Tangerine/index.theme
@

