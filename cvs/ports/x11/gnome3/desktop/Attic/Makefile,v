head	1.5;
access;
symbols
	jasper_20111305:1.1.1.1 jasper:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2011.05.17.14.03.46;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2011.05.16.12.57.00;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2011.05.13.21.23.58;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.13.10.21.33;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.05.13.08.52.11;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.05.13.08.52.11;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Shuffle things around so that the gnome3 directory is usable like
mystuff. README coming soon so anyone can start having 'fun' with gnome3
ports.
Also this will allow proper dependencies to be set from the start
instead of breaking half of the tree when GNOME3 is enabled.

discussed with an ok jasper@@
@
text
@# $OpenBSD: Makefile,v 1.4 2011/05/16 12:57:00 jasper Exp $

SHARED_ONLY=		Yes

COMMENT=		components for the GNOME desktop

GNOME_PROJECT=		gnome-desktop
GNOME_VERSION=		3.0.1

REVISION=		2

SHARED_LIBS +=  gnome-desktop-3      0.0      # 0.9

CATEGORIES=		x11

# LGPLv2/GFDLv1.1/GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

WANTLIB += GL ICE SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xrandr Xrender Xxf86vm atk-1.0
WANTLIB += cairo cairo-gobject drm execinfo expat fontconfig freetype
WANTLIB += gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB += gthread-2.0 gtk-3 m pango-1.0 pangocairo-1.0 pangoft2-1.0
WANTLIB += pcre pixman-1 png pthread-stubs startup-notification-1
WANTLIB += xcb xcb-atom xcb-aux xcb-event xcb-render xcb-shm z

MODULES=		devel/gettext \
			x11/gnome

BUILD_DEPENDS=		devel/gobject-introspection \
			devel/gsettings-desktop-schemas
RUN_DEPENDS=		devel/gsettings-desktop-schemas
LIB_DEPENDS=		devel/startup-notification \
			x11/gtk+3

MODGNOME_HELP_FILES=	Yes
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--with-gnome-distributor="OpenBSD Ports" \
			--disable-gtk-doc \
			--enable-introspection
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

# stop systrace spam by avoiding xsltproc to access net
pre-configure:
	find ${WRKSRC}/desktop-docs/ -name Makefile.in \
		-exec perl -pi -e 's,xsltproc,xsltproc --nonet,g' {} \;

.include <bsd.port.mk>
@


1.4
log
@add missing dep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/05/13 21:23:58 ajacoutot Exp $
@


1.3
log
@Bump after recent gnome MODULE change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/05/13 10:21:33 ajacoutot Exp $
d10 1
a10 1
REVISION=		1
d33 3
a35 1
BUILD_DEPENDS=		devel/gobject-introspection
@


1.2
log
@DESKTOP_FILES and goo is not needed anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/05/13 08:52:11 jasper Exp $
d10 1
a10 1
REVISION=		0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/05/08 17:45:48 jasper Exp $
d10 2
a37 1
DESKTOP_FILES=		Yes
@


1.1.1.1
log
@import gnome-desktop 3.0.1

gnome-desktop contains the libgnome-desktop library as well as some
desktop-wide documents.

ok aja@@

@
text
@@
