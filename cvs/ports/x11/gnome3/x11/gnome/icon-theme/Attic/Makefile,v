head	1.5;
access;
symbols
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4;
locks; strict;
comment	@# @;


1.5
date	2011.09.12.07.31.38;	author jasper;	state dead;
branches;
next	1.4;

1.4
date	2011.05.19.14.43.16;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.05.19.07.50.37;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.17.14.11.30;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.05.17.14.03.47;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Remove what I've merged.
@
text
@# $OpenBSD: Makefile,v 1.4 2011/05/19 14:43:16 ajacoutot Exp $

COMMENT=	base icon theme for GNOME

GNOME_PROJECT=	gnome-icon-theme
GNOME_VERSION=	3.0.0
REVISION=	2

CATEGORIES=	x11

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES=	x11/gnome

BUILD_DEPENDS=	x11/icon-naming-utils>=0.8.90

# Rational: except for QT/KDE ports, gtk+2 should already be in the
# dependency chain for ports installing share/icons/ files (i.e. no need
# to explicitely add it) and if we have svg icons without their png
# counterpart and librsvg is not part of the dependency chain then we
# explicitely add it.
# gnome-icon-theme is the inherited theme for most icon themes so we
# make sure we have gtk-update-icon-cache and can display svg icons.
RUN_DEPENDS +=	x11/gtk+2 \
		x11/gnome/librsvg

PKG_ARCH=	*

USE_LIBTOOL=	No
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	--enable-icon-mapping \
		--disable-nls

EXAMPLEDIR=	${PREFIX}/share/examples/${GNOME_PROJECT}

FAKE_FLAGS=	pkgconfigdir=${PREFIX}/lib/pkgconfig

# no need to build_depends on gtk+2|gtk+3, we run gtk-update-icon-cache
# at pkg_add time if it is available
post-extract:
	ln -sf /usr/bin/true ${WRKDIR}/bin/gtk-update-icon-cache

post-install:
# Unbreak gtk+2 applications that use gnome-icon-theme, when 
# executed outside of a Desktop Environment
	${INSTALL_DATA_DIR} ${EXAMPLEDIR}/gtk-2.0
	@@echo 'gtk-icon-theme-name = "gnome"' > \
		${EXAMPLEDIR}/gtk-2.0/gtkrc

.include <bsd.port.mk>
@


1.4
log
@We want to use @@unexec here and not @@unexec-delete.
The reason is that if a theme is removed after updating to a new version,
then we are left over with a useless cache file because we are using
pkg_add -u and not pkg_delete.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2011/05/19 07:50:37 ajacoutot Exp $
@


1.3
log
@Add gtk+2 and librsvg to RUN_DEPENDS.

Rational: except for QT/KDE ports, gtk+2 should already be in the
dependency chain for ports installing share/icons/ files (i.e. no need
to explicitely add it) and if we have svg icons without their png
counterpart and librsvg is not part of the dependency chain then we
explicitely add it.
gnome-icon-theme is the inherited theme for most icon themes so we
make sure we have gtk-update-icon-cache and can display svg icons.

landry@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2011/05/17 14:11:30 ajacoutot Exp $
d7 1
a7 1
REVISION=	1
@


1.2
log
@Bump all after removing and x11/gnome/Makefile.inc change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2011/05/17 14:03:47 ajacoutot Exp $
d7 1
a7 1
REVISION=	0
d20 10
@


1.1
log
@Shuffle things around so that the gnome3 directory is usable like
mystuff. README coming soon so anyone can start having 'fun' with gnome3
ports.
Also this will allow proper dependencies to be set from the start
instead of breaking half of the tree when GNOME3 is enabled.

discussed with an ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/05/13 08:41:57 ajacoutot Exp $
d7 1
@

