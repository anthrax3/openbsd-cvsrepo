head	1.3;
access;
symbols
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2011.09.12.07.31.39;	author jasper;	state dead;
branches;
next	1.2;

1.2
date	2011.07.26.07.04.27;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.16.12.50.49;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove what I've merged.
@
text
@$OpenBSD: patch-src_nautilus-application_c,v 1.2 2011/07/26 07:04:27 ajacoutot Exp $

From 3caf41765453c3c4cf9a73aae87b185d099598f9 Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Mon, 20 Jun 2011 16:34:47 +0000
Subject: Turn nautilus_window_close() into a virtual method.

--- src/nautilus-application.c.orig	Tue May 24 20:46:25 2011
+++ src/nautilus-application.c	Tue Jul 26 08:55:15 2011
@@@@ -562,14 +562,6 @@@@ nautilus_application_close_all_windows (NautilusApplic
 	GList *l;
 	
 	list_copy = g_list_copy (gtk_application_get_windows (GTK_APPLICATION (self)));
-	/* First hide all window to get the feeling of quick response */
-	for (l = list_copy; l != NULL; l = l->next) {
-		NautilusWindow *window;
-		
-		window = NAUTILUS_WINDOW (l->data);
-		gtk_widget_hide (GTK_WIDGET (window));
-	}
-
 	for (l = list_copy; l != NULL; l = l->next) {
 		NautilusWindow *window;
 		
@


1.2
log
@Turn nautilus_window_close() into a virtual method.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@When clicking on "Close All Windows", make sure we don't actually close the
Desktop window.
@
text
@d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=652724
d8 11
a18 6
--- src/nautilus-application.c.orig	Thu Jun 16 14:31:06 2011
+++ src/nautilus-application.c	Thu Jun 16 14:31:20 2011
@@@@ -567,14 +567,16 @@@@ nautilus_application_close_all_windows (NautilusApplic
 		NautilusWindow *window;
 		
 		window = NAUTILUS_WINDOW (l->data);
d20 2
a21 4
+		if (!NAUTILUS_IS_DESKTOP_WINDOW (window))
+			gtk_widget_hide (GTK_WIDGET (window));
 	}
 
a24 7
 		window = NAUTILUS_WINDOW (l->data);
-		nautilus_window_close (window);
+		if (!NAUTILUS_IS_DESKTOP_WINDOW (window))
+			nautilus_window_close (window);
 	}
 	g_list_free (list_copy);
 }
@

