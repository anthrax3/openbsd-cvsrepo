head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.3.0.18
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.14
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.16
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.12
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.10
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.8
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.6
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.4
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2017.03.03.14.02.15;	author espie;	state Exp;
branches;
next	1.3;
commitid	lXJHI3L9Ww4Vh1x0;

1.3
date	2012.06.14.09.38.35;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.28.14.55.47;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.05.23.10.36.49;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@unhardcode gcc/g++
@
text
@$OpenBSD: patch-mkspecs_openbsd-g++4_qmake_conf,v 1.3 2012/06/14 09:38:35 espie Exp $
--- mkspecs/openbsd-g++4/qmake.conf.orig	Fri Mar  3 10:40:02 2017
+++ mkspecs/openbsd-g++4/qmake.conf	Fri Mar  3 12:20:59 2017
@@@@ -8,23 +8,24 @@@@ TEMPLATE		= app
 CONFIG			+= qt warn_on release link_prl gdb_dwarf_index
 QT			+= core gui
 
-QMAKE_CC		= gcc
+QMAKE_OPENBSD_SHLIBS    = 1
+QMAKE_CC		= cc
 QMAKE_LEX		= flex
 QMAKE_LEXFLAGS		=
 QMAKE_YACC		= yacc
 QMAKE_YACCFLAGS		= -d
-QMAKE_CFLAGS		= -pipe
+QMAKE_CFLAGS		= -pipe -O2 -fno-wrapv $(COPTS)
 QMAKE_CFLAGS_DEPS	= -M
 QMAKE_CFLAGS_WARN_ON	= -Wall -W
 QMAKE_CFLAGS_WARN_OFF	= -w
-QMAKE_CFLAGS_RELEASE	= -O2
+QMAKE_CFLAGS_RELEASE	= -O2 -fno-wrapv $(COPTS)
 QMAKE_CFLAGS_DEBUG	= -g
 QMAKE_CFLAGS_SHLIB	= -fPIC
 QMAKE_CFLAGS_STATIC_LIB	= $$QMAKE_CFLAGS_SHLIB
 QMAKE_CFLAGS_YACC	= -Wno-unused -Wno-parentheses
 QMAKE_CFLAGS_THREAD	= -pthread
 
-QMAKE_CXX		= g++
+QMAKE_CXX		= c++
 QMAKE_CXXFLAGS		= $$QMAKE_CFLAGS
 QMAKE_CXXFLAGS_DEPS	= $$QMAKE_CFLAGS_DEPS
 QMAKE_CXXFLAGS_WARN_ON	= $$QMAKE_CFLAGS_WARN_ON
@@@@ -36,19 +37,19 @@@@ QMAKE_CXXFLAGS_STATIC_LIB = $$QMAKE_CFLAGS_STATIC_LIB
 QMAKE_CXXFLAGS_YACC	= $$QMAKE_CFLAGS_YACC
 QMAKE_CXXFLAGS_THREAD	= $$QMAKE_CFLAGS_THREAD
 
-QMAKE_INCDIR		= /usr/local/include
-QMAKE_LIBDIR		= /usr/local/lib
-QMAKE_INCDIR_X11	= /usr/X11R6/include
-QMAKE_LIBDIR_X11	= /usr/X11R6/lib
+QMAKE_INCDIR		= $(LOCALBASE)/include
+QMAKE_LIBDIR		= $(LOCALBASE)/lib
+QMAKE_INCDIR_X11	= $(X11BASE)/include
+QMAKE_LIBDIR_X11	= $(X11BASE)/lib
 QMAKE_INCDIR_QT		= $$[QT_INSTALL_HEADERS]
 QMAKE_LIBDIR_QT		= $$[QT_INSTALL_LIBS]
 QMAKE_INCDIR_OPENGL	= /usr/X11R6/include
 QMAKE_LIBDIR_OPENGL	= /usr/X11R6/lib
 
-QMAKE_LINK		= g++
-QMAKE_LINK_SHLIB	= g++
-QMAKE_LINK_C		= gcc
-QMAKE_LINK_C_SHLIB	= gcc
+QMAKE_LINK		= c++
+QMAKE_LINK_SHLIB	= c++
+QMAKE_LINK_C		= cc
+QMAKE_LINK_C_SHLIB	= cc
 QMAKE_LINK_SHLIB_CMD	= $$QMAKE_LINK_SHLIB $(LFLAGS) \
 	$$QMAKE_CFLAGS_SHLIB $$QMAKE_LFLAGS \
 	-o $(TARGETD) $(OBJECTS) $(OBJMOC) $(LIBS)
@@@@ -57,7 +58,7 @@@@ QMAKE_LFLAGS_RELEASE	=
 QMAKE_LFLAGS_DEBUG	=
 QMAKE_LFLAGS_SHLIB	= -shared
 QMAKE_LFLAGS_PLUGIN	= $$QMAKE_LFLAGS_SHLIB
-QMAKE_LFLAGS_SONAME	= -Wl,-soname,
+QMAKE_LFLAGS_SONAME	= 
 QMAKE_LFLAGS_THREAD	= -pthread
 QMAKE_LFLAGS_NOUNDEF	= -Wl,-no_unresolved
 
@


1.3
log
@update to 4.8.2
- since we no longer have GCC3_ARCHES, simplify, no way it's gonna compile
on a GCC2_ARCH anyways (size matters)
- so, we have only SHARED_ONLY arches, remove those frags as well.
- fold back qt4-sqlite since sqlite is part of core now.
@
text
@d1 4
a4 4
$OpenBSD: patch-mkspecs_openbsd-g++4_qmake_conf,v 1.2 2010/10/28 14:55:47 espie Exp $
--- mkspecs/openbsd-g++4/qmake.conf.orig	Thu Dec 15 20:09:13 2011
+++ mkspecs/openbsd-g++4/qmake.conf	Thu Dec 15 20:09:13 2011
@@@@ -8,16 +8,17 @@@@ TEMPLATE		= app
d8 1
d10 1
a10 1
 QMAKE_CC		= gcc
d25 9
a33 1
@@@@ -36,10 +37,10 @@@@ QMAKE_CXXFLAGS_STATIC_LIB = $$QMAKE_CFLAGS_STATIC_LIB
d48 13
@


1.2
log
@qt 4.7.0
@
text
@d1 3
a3 3
$OpenBSD: patch-mkspecs_openbsd-g++4_qmake_conf,v 1.1 2010/05/23 10:36:49 espie Exp $
--- mkspecs/openbsd-g++4/qmake.conf.orig	Sun Oct 24 12:32:06 2010
+++ mkspecs/openbsd-g++4/qmake.conf	Sun Oct 24 12:32:06 2010
d5 1
a5 1
 CONFIG			+= qt warn_on release link_prl
@


1.1
log
@misc fixes
- for gcc4, insist on -fno-wrapv, since it breaks things.
- use atomic builtins as they are available (on i386 at least)
- remove a few reasons why gmake is required (but not all)
- pass MAKE_JOBS to configure step.
@
text
@d1 4
a4 4
$OpenBSD$
--- mkspecs/openbsd-g++4/qmake.conf.orig	Mon May 17 22:05:26 2010
+++ mkspecs/openbsd-g++4/qmake.conf	Mon May 17 22:11:01 2010
@@@@ -7,16 +7,17 @@@@ TEMPLATE		= app
d24 1
a24 1
@@@@ -35,10 +36,10 @@@@ QMAKE_CXXFLAGS_STATIC_LIB = $$QMAKE_CFLAGS_STATIC_LIB
d39 1
a39 1
@@@@ -56,7 +57,7 @@@@ QMAKE_LFLAGS_RELEASE	=
@

