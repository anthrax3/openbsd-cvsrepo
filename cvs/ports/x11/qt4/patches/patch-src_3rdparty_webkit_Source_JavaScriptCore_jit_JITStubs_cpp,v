head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.10
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.8
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.6
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.05.13.14.03.07;	author kettenis;	state Exp;
branches;
next	;
commitid	59ZxaOuEtI4xccDu;


desc
@@


1.1
log
@On amd64 we need to make sure function calls in inline assembly code go
through the PLT, so do on OpenBSD what Linux and FreeBSD are already doing.

Fixes build with binutils 2.17 and fixes a potential runtime issue with
binutils 2.15.

ok espie@@
@
text
@$OpenBSD$
--- src/3rdparty/webkit/Source/JavaScriptCore/jit/JITStubs.cpp.orig	Thu Apr 10 20:37:11 2014
+++ src/3rdparty/webkit/Source/JavaScriptCore/jit/JITStubs.cpp	Wed May 13 11:03:44 2015
@@@@ -79,7 +79,7 @@@@ namespace JSC {
 #define THUMB_FUNC_PARAM(name)
 #endif
 
-#if (OS(LINUX) || OS(FREEBSD)) && CPU(X86_64)
+#if (OS(LINUX) || OS(FREEBSD) || OS(OPENBSD)) && CPU(X86_64)
 #define SYMBOL_STRING_RELOCATION(name) #name "@@plt"
 #elif OS(DARWIN) || (CPU(X86_64) && COMPILER(MINGW) && !GCC_VERSION_AT_LEAST(4, 5, 0))
 #define SYMBOL_STRING_RELOCATION(name) "_" #name
@
