head	1.3;
access;
symbols
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2007.05.22.09.09.32;	author espie;	state dead;
branches;
next	1.2;

1.2
date	2007.03.17.17.58.17;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2007.02.25.17.31.04;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to 4.3.0rc1.
@
text
@$OpenBSD: patch-src_corelib_io_qfsfileengine_cpp,v 1.2 2007/03/17 17:58:17 espie Exp $
--- src/corelib/io/qfsfileengine.cpp.orig	Wed Feb 21 10:58:42 2007
+++ src/corelib/io/qfsfileengine.cpp	Sat Mar 17 10:47:27 2007
@@@@ -481,7 +481,7 @@@@ qint64 QFSFileEngine::read(char *data, qint64 len)
                         int readByte = 0;
                         do {
                             readByte = fgetc(d->fh);
-                        } while (readByte == -1 && errno == EINTR);
+                        } while (readByte == -1 && !feof(d->fh) && errno == EINTR);
                         if (readByte != -1) {
                             *data = uchar(readByte);
                             readBytes += 1;
@


1.2
log
@update to 4.2.3
@
text
@d1 1
a1 1
$OpenBSD: patch-src_corelib_io_qfsfileengine_cpp,v 1.1 2007/02/25 17:31:04 espie Exp $
@


1.1
log
@prevent QTextStreams from hanging on pipes EOF, as noticed in kdelibs4.

reintroduce a debug flavor, now that qt is `sane'. Fix main pkgname,
and add sha256 checksum.
@
text
@d1 4
a4 4
$OpenBSD$
--- src/corelib/io/qfsfileengine.cpp.orig	Sun Feb 25 18:04:25 2007
+++ src/corelib/io/qfsfileengine.cpp	Sun Feb 25 18:04:45 2007
@@@@ -484,7 +484,7 @@@@ qint64 QFSFileEngine::read(char *data, q
@

