head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2012.10.11.01.18.09;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2012.08.04.15.07.25;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@When dlopen()ing shared libraries for optional dependencies, Qt4 wants to
load a specific version of the library to avoid ABI breakages, however it uses
upstream shared lib versions which don't match those in our ports. This has
already been patched where it tries to open gtk+2/cups by removing the version
check. See ports@@ thread "UPDATE: kdiff3-0.9.97" where this was discussed with
fgsch, dcoppa, espie and myself, upshot is this isn't totally clean but isn't
really worse than what we had before and it fixes use of icu4c from Qt4.
This diff from fgsch, testing/ok by me, ok espie.
@
text
@$OpenBSD: patch-src_gui_painting_qcups_cpp,v 1.1 2012/08/04 15:07:25 ajacoutot Exp $

libcups.so.2 -> libcups.so

--- src/gui/painting/qcups.cpp.orig	Sun Jul 29 12:16:17 2012
+++ src/gui/painting/qcups.cpp	Sun Jul 29 12:16:36 2012
@@@@ -87,7 +87,7 @@@@ static CupsPrintFile _cupsPrintFile = 0;
 
 static void resolveCups()
 {
-    QLibrary cupsLib(QLatin1String("cups"), 2);
+    QLibrary cupsLib(QLatin1String("cups"));
     if(cupsLib.load()) {
         _cupsGetDests = (CupsGetDests) cupsLib.resolve("cupsGetDests");
         _cupsFreeDests = (CupsFreeDests) cupsLib.resolve("cupsFreeDests");
@


1.1
log
@Handle cups >= 1.6
@
text
@d1 1
a1 1
$OpenBSD$
@

