head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.2
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.1.0.28
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.26
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.22
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.24
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.20
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.18
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.16
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.14
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.12
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.10
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.8
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2017.05.05.22.11.08;	author naddy;	state Exp;
branches;
next	1.1;
commitid	ETADPaRfpB77tmjM;

1.1
date	2010.05.23.11.29.45;	author espie;	state Exp;
branches;
next	;


desc
@@


1.2
log
@fix missing return types, declarations, includes, etc. for clang
@
text
@$OpenBSD: patch-parse_c,v 1.1 2010/05/23 11:29:45 espie Exp $
Index: parse.c
--- parse.c.orig
+++ parse.c
@@@@ -41,6 +41,7 @@@@
 #include <errno.h>
 #include <X11/Xos.h>
 #include <X11/Xmu/CharSet.h>
+#include <X11/Xmu/SysUtil.h>
 #include "twm.h"
 #include "screen.h"
 #include "menus.h"
@@@@ -81,6 +82,7 @@@@ static char **stringListSource, *currentString;
 static int ParseUsePPosition();
 static int ParseState();
 static FILE *start_m4();
+static char *m4_defs(Display *, char *);
 int m4_pid;
 
 /* If you're using flex (and lex on 386 bsd boxes, which *is* flex, really)
@@@@ -95,6 +97,7 @@@@ extern char *InitFile;
 
 int ConstrainedMoveTime = 400;		/* milliseconds, event times */
 
+static void def_netmask();
 static int twmFileInput(), twmStringListInput(), twmMenuInput();
 void twmUnput();
 int (*twmInputFunc)();
@@@@ -1420,6 +1423,7 @@@@ switch(keyword)
 /*
  * put_pixel_on_root() Save a pixel value in twm root window color property.
  */
+static void
 put_pixel_on_root(pixel)                                 
     Pixel pixel;                                         
 {                                                        
@@@@ -1563,7 +1567,7 @@@@ static int ParseState (s)
 }
 
 
-do_squeeze_entry (list, name, type, justify, num, denom)
+void do_squeeze_entry (list, name, type, justify, num, denom)
     name_list **list;			/* squeeze or dont-squeeze list */
     char *name;				/* window name */
     short type;				/* match type */
@@@@ -1598,7 +1602,7 @@@@ do_squeeze_entry (list, name, type, justify, num, deno
 
 	if (!sinfo) {
 	    twmrc_error_prefix();
-	    fprintf (stderr, "unable to allocate %d bytes for squeeze info\n",
+	    fprintf (stderr, "unable to allocate %zu bytes for squeeze info\n",
 		     sizeof(SqueezeInfo));
 	    return;
 	}
@@@@ -1627,7 +1631,6 @@@@ FILE *fraw;
 	if (fres == 0) {
 		extern Display *dpy;
 		extern char *display_name;
-		static char *m4_defs();
 		char *tmp_file;
 
 		/* Child */
@@@@ -1703,7 +1706,7 @@@@ char *name, *def;
 
 	cp = malloc(3 + strlen(def));
 	if (cp == NULL) {
-		fprintf(stderr, "Can't get %d bytes for arg parm\n", 3 + strlen(def));
+		fprintf(stderr, "Can't get %zu bytes for arg parm\n", 3 + strlen(def));
 		exit(27);
 	}
 
@@@@ -1952,7 +1955,7 @@@@ err:
 #endif
 }
 
-def_netmask(tmpf)
+static void def_netmask(tmpf)
 FILE *tmpf;
 {
 	int mask;
@


1.1
log
@fix build
@
text
@d1 13
a13 4
$OpenBSD$
--- parse.c.orig	Sun May 23 13:26:33 2010
+++ parse.c	Sun May 23 13:27:06 2010
@@@@ -81,6 +81,7 @@@@ static char **stringListSource, *currentString;
d21 35
a55 1
@@@@ -1627,7 +1628,6 @@@@ FILE *fraw;
d63 18
@

