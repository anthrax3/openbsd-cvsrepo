head	1.50;
access;
symbols
	OPENBSD_6_1:1.50.0.2
	OPENBSD_6_1_BASE:1.50
	OPENBSD_6_0:1.49.0.4
	OPENBSD_6_0_BASE:1.49
	OPENBSD_5_9:1.49.0.2
	OPENBSD_5_9_BASE:1.49
	OPENBSD_5_8:1.44.0.6
	OPENBSD_5_8_BASE:1.44
	OPENBSD_5_7:1.44.0.2
	OPENBSD_5_7_BASE:1.44
	OPENBSD_5_6:1.42.0.6
	OPENBSD_5_6_BASE:1.42
	OPENBSD_5_5:1.42.0.4
	OPENBSD_5_5_BASE:1.42
	OPENBSD_5_4:1.42.0.2
	OPENBSD_5_4_BASE:1.42
	OPENBSD_5_3:1.39.0.2
	OPENBSD_5_3_BASE:1.39
	OPENBSD_5_2:1.34.0.2
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.33
	OPENBSD_5_1:1.33.0.2
	OPENBSD_5_0:1.28.0.2
	OPENBSD_5_0_BASE:1.28
	OPENBSD_4_9:1.24.0.2
	OPENBSD_4_9_BASE:1.24
	OPENBSD_4_8:1.17.0.2
	OPENBSD_4_8_BASE:1.17
	OPENBSD_4_7:1.9.0.6
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.4
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.8.0.2
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	kili_20070902:1.1.1.1
	kili:1.1.1;
locks; strict;
comment	@# @;


1.50
date	2016.09.12.17.51.07;	author naddy;	state Exp;
branches;
next	1.49;
commitid	unrzt8OtHTH3JdtT;

1.49
date	2016.01.20.16.27.42;	author kili;	state Exp;
branches;
next	1.48;
commitid	Cz05EVDpfHr2ywOu;

1.48
date	2015.12.20.11.37.45;	author kili;	state Exp;
branches;
next	1.47;
commitid	0xoLgZbwVQ5Wkqqs;

1.47
date	2015.09.21.21.13.23;	author kili;	state Exp;
branches;
next	1.46;
commitid	7eiCrb21JkkJdSN7;

1.46
date	2015.08.25.14.03.21;	author sthen;	state Exp;
branches;
next	1.45;
commitid	8u6wAbmxSoakT67t;

1.45
date	2015.08.21.19.17.10;	author sthen;	state Exp;
branches;
next	1.44;
commitid	8EJcWdVX4S7jN0H9;

1.44
date	2015.02.16.22.57.14;	author naddy;	state Exp;
branches;
next	1.43;
commitid	0dx3c9ckf7dE4tx1;

1.43
date	2014.11.24.16.15.55;	author kili;	state Exp;
branches;
next	1.42;
commitid	YNQR94A7j7p0uTnF;

1.42
date	2013.07.18.22.03.58;	author kili;	state Exp;
branches;
next	1.41;

1.41
date	2013.06.17.10.07.40;	author dcoppa;	state Exp;
branches;
next	1.40;

1.40
date	2013.03.11.11.46.19;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2013.01.24.09.44.18;	author dcoppa;	state Exp;
branches;
next	1.38;

1.38
date	2013.01.20.18.07.11;	author kili;	state Exp;
branches;
next	1.37;

1.37
date	2012.10.28.23.31.50;	author kili;	state Exp;
branches;
next	1.36;

1.36
date	2012.10.24.19.07.57;	author kili;	state Exp;
branches;
next	1.35;

1.35
date	2012.10.11.14.23.50;	author dcoppa;	state Exp;
branches;
next	1.34;

1.34
date	2012.06.19.20.40.10;	author dcoppa;	state Exp;
branches;
next	1.33;

1.33
date	2012.01.12.11.11.58;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2011.12.27.21.30.26;	author kili;	state Exp;
branches;
next	1.31;

1.31
date	2011.12.27.21.29.18;	author kili;	state Exp;
branches;
next	1.30;

1.30
date	2011.09.16.12.29.18;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2011.08.21.17.32.28;	author kili;	state Exp;
branches;
next	1.28;

1.28
date	2011.06.30.21.41.06;	author kili;	state Exp;
branches;
next	1.27;

1.27
date	2011.04.23.14.32.51;	author kili;	state Exp;
branches;
next	1.26;

1.26
date	2011.04.11.14.58.20;	author kili;	state Exp;
branches;
next	1.25;

1.25
date	2011.04.04.22.40.55;	author kili;	state Exp;
branches;
next	1.24;

1.24
date	2010.12.04.11.53.57;	author kili;	state Exp;
branches;
next	1.23;

1.23
date	2010.11.22.08.37.06;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.06.10.18.39;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.11.03.22.19.02;	author kili;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.28.13.55.21;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2010.10.24.21.15.36;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.19.08.14.01;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.07.17.13.49.21;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2010.06.30.15.41.02;	author kili;	state Exp;
branches;
next	1.15;

1.15
date	2010.06.15.17.59.24;	author kili;	state Exp;
branches;
next	1.14;

1.14
date	2010.06.06.10.06.45;	author kili;	state Exp;
branches;
next	1.13;

1.13
date	2010.05.19.15.58.23;	author kili;	state Exp;
branches;
next	1.12;

1.12
date	2010.05.16.14.12.20;	author kili;	state Exp;
branches;
next	1.11;

1.11
date	2010.05.06.20.05.24;	author kili;	state Exp;
branches;
next	1.10;

1.10
date	2010.04.22.22.00.45;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2008.09.19.21.14.13;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2008.04.16.21.00.56;	author kili;	state Exp;
branches;
next	1.7;

1.7
date	2008.02.03.18.17.51;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2008.01.18.21.51.13;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2007.11.19.19.59.40;	author kili;	state Exp;
branches;
next	1.4;

1.4
date	2007.11.18.20.13.31;	author kili;	state Exp;
branches;
next	1.3;

1.3
date	2007.10.01.20.46.30;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2007.09.15.20.04.28;	author merdely;	state Exp;
branches;
next	1.1;

1.1
date	2007.09.01.22.18.41;	author kili;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.09.01.22.18.41;	author kili;	state Exp;
branches;
next	;


desc
@@


1.50
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.49 2016/01/20 16:27:42 kili Exp $

COMMENT-main =		tiling window manager
COMMENT-lib =		libraries for runtime configuration

DISTNAME =		xmonad-0.11.1
PKGNAME-main =		${DISTNAME}
PKGNAME-lib =		${DISTNAME:S,-,-lib-,}
REVISION-lib =		1
CATEGORIES =		x11
HOMEPAGE =		http://www.xmonad.org/

MULTI_PACKAGES =		-main -lib

# BSD3
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB-main =		X11 Xext Xinerama Xrandr Xss c m iconv \
			pthread util
WANTLIB-lib =

MODULES =		lang/ghc
MODGHC_BUILD =		cabal hackage haddock register nort

MODGHC_PACKAGE_KEY =	69emmTIdOBCCVIsKs9lHOh

# Required because of the nort tag in MODGHC_BUILD
SUBST_VARS +=		MODGHC_PACKAGE_KEY

BUILD_DEPENDS =		${RUN_DEPENDS-lib}
RUN_DEPENDS-lib =	devel/hs-extensible-exceptions \
			devel/hs-mtl \
			devel/hs-syb \
			devel/hs-utf8-string>=0.3,<1.1 \
			x11/hs-X11>=1.5,<1.7
LIB_DEPENDS-main =	converters/libiconv

# MODGHC_BUILD contains 'nort', an explicity dependency is needed for
# the -lib subpackage (plus the tweaks to MODGHC_SETUP_CONF_ARGS below).
RUN_DEPENDS-lib +=		lang/ghc=${MODGHC_VER}

post-install:
	@@${INSTALL_MAN} ${WRKSRC}/man/xmonad.1 ${PREFIX}/man/man1
	@@${INSTALL_DATA} ${WRKSRC}/CONFIG ${PREFIX}/share/doc/hs-${DISTNAME}
	@@${INSTALL_DATA} ${WRKSRC}/man/xmonad.hs ${PREFIX}/share/doc/hs-${DISTNAME}/xmonad.hs
	@@# Don't know why, but it installs the xmonad.hs into that directory:
	@@rm -rf ${PREFIX}/share/${DISTNAME}

# Needs to be built with different configuration.
NO_TEST =	Yes

.include <bsd.port.mk>

# Override the 'nort' settings from ghc.port.mk, to get the correct
# flags and directories for the -lib subpackage.
MODGHC_SETUP_CONF_ARGS +=	--enable-library-profiling
MODGHC_SETUP_CONF_ARGS +=	--docdir=\$$datadir/doc/hs-\$$pkgid
MODGHC_SETUP_CONF_ARGS +=	--libsubdir=ghc/\$$pkgid
@


1.49
log
@Bump after ghc changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/12/20 11:37:45 kili Exp $
d18 1
a18 1
WANTLIB-main =		${WANTLIB} X11 Xext Xinerama Xrandr Xss c m \
d22 1
a22 1
MODULES =		lang/ghc converters/libiconv
d36 1
a36 1
LIB_DEPENDS-main =	${LIB_DEPENDS}
@


1.48
log
@Adjust MODGHC_PACKAGE_KEY.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/09/21 21:13:23 kili Exp $
d9 1
a9 1
REVISION-lib =		0
@


1.47
log
@Update to xmonad-0.11.1.

Please have a look at patches/patch-xmonad_cabal and
think about the usability of hackage.haskell.org.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/08/25 14:03:21 sthen Exp $
d9 1
d25 1
a25 1
MODGHC_PACKAGE_KEY =	JSzH3sHpnqI0a3aHB5qhOR
@


1.46
log
@wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/08/21 19:17:10 sthen Exp $
d6 1
a6 1
DISTNAME =		xmonad-0.11
a8 2
REVISION-main =		3
REVISION-lib =		2
d24 5
d33 1
a33 1
			devel/hs-utf8-string>=0.3,<0.4 \
@


1.45
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/02/16 22:57:14 naddy Exp $
d9 1
a9 1
REVISION-main =		2
d19 1
a19 1
WANTLIB-main =		${WANTLIB} X11 Xext Xinerama Xrandr  c m \
@


1.44
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/11/24 16:15:55 kili Exp $
d9 1
a9 1
REVISION =		1
d19 1
a19 1
WANTLIB-main =		${WANTLIB} X11 Xext Xinerama Xrandr c m \
@


1.43
log
@Fix dependencies and plist. Move MODGHC_SETUP_CONF_ARGS below
the .include <bsd.port.mk> (yes, that's an ugly hack), and let
the comment for the override make at least a bit of sense.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/07/18 22:03:58 kili Exp $
a36 2

USE_GROFF =		Yes
@


1.42
log
@Fix dependencies and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/06/17 10:07:40 dcoppa Exp $
d10 1
a10 1
REVISION-lib =		1
d30 1
d34 2
a35 7
# Instead of adding `nort' to MODGHC_BUILD for -main, explicitely set
# MODGHC_SETUP_CONF_ARGS and add lang/ghc to RUN_DEPENDS-lib.
# Otherwise, we may end up in xmonad configured with `nort', which
# causes xmonad-lib to be installed in the wrong place.
MODGHC_SETUP_CONF_ARGS +=	--docdir=\$$datadir/doc/hs-\$$pkgid
MODGHC_SETUP_CONF_ARGS +=	--libsubdir=ghc/\$$pkgid
MODGHC_SETUP_CONF_ARGS +=	--enable-library-profiling
d51 6
@


1.41
log
@Some X11-related haskell updates:

X11-1.6.0 -> X11-1.6.1.1
xmonad-contrib-0.11 -> xmonad-contrib-0.11.1
xmobar-0.16 -> xmobar-0.18

Maintainer (Jona Joachim) timeout, ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/03/11 11:46:19 espie Exp $
d9 2
a10 2
REVISION =		0
REVISION-lib =		0
d27 2
a28 1
RUN_DEPENDS-lib =	devel/hs-mtl \
d30 1
a30 1
			x11/hs-X11>=1.5.0.0
@


1.40
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/01/24 09:44:18 dcoppa Exp $
d9 2
@


1.39
log
@Update xmonad and hs-xmonad-contrib to 0.11
Bump x11/bluetile accordingly

OK kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/01/20 18:07:11 kili Exp $
a15 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d49 1
a49 1
NO_REGRESS =	Yes
@


1.38
log
@Regenerate plist for profiling libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/10/28 23:31:50 kili Exp $
d6 1
a6 1
DISTNAME =		xmonad-0.10
a8 2
REVISION-main =		1
REVISION-lib =		3
d49 1
a49 1
	@@rm -rf ${PREFIX}/share/hs-${DISTNAME}
@


1.37
log
@Move the @@exec and @@unexec lines running the {,un}register.sh scripts
and the line with the unregister.sh script down to the bottom of
the plist. Silences all the blurb about ".../*.haddock doesn't exist
or isn't a file."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/10/24 19:07:57 kili Exp $
d10 1
a10 1
REVISION-lib =		2
d41 1
@


1.36
log
@Re-enable haddock documentation for xmonad-lib.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/10/11 14:23:50 dcoppa Exp $
d10 1
a10 1
REVISION-lib =		1
@


1.35
log
@Fix fallout of haskell ports, now that devel/gmp is no more a
dependency for ghc - x11 category
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/06/19 20:40:10 dcoppa Exp $
d10 1
a10 1
REVISION-lib =		0
d27 1
a27 3
# No documentation for now (haddock thinks that module `xmonad-0.9.2:Main'
# is defined in multiple files).
MODGHC_BUILD =		cabal hackage register nort
@


1.34
log
@Bump after hs-X11/hs-X11-xft updates

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/01/12 11:11:58 dcoppa Exp $
d9 1
a9 1
REVISION-main =		0
d22 2
a23 1
WANTLIB-main =		${WANTLIB} X11 Xext Xinerama c gmp m pthread util
d35 1
a35 2
LIB_DEPENDS-main =	${LIB_DEPENDS} \
			devel/gmp
@


1.33
log
@Update to xmonad-0.10

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/12/27 21:30:26 kili Exp $
d9 2
@


1.32
log
@Bump to enforce updates.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/12/27 21:29:18 kili Exp $
d6 1
a6 1
DISTNAME =		xmonad-0.9.2
a7 1
REVISION-main =		5
a8 1
REVISION-lib =		4
@


1.31
log
@Bump to enforce updates.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/09/16 12:29:18 espie Exp $
d8 1
a8 1
REVISION-main =		4
@


1.30
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/08/21 17:32:28 kili Exp $
d8 1
a8 1
REVISION-main =		3
@


1.29
log
@Use dmenu_run instead of the old `dmenu_path | dmenu` way, which doesn't
work any longer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/06/30 21:41:06 kili Exp $
d10 1
a10 1
REVISION-lib =		3
@


1.28
log
@Bump after ghc udpate, and ensure that Setup.lhs is always called
with the correct parameters.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/04/23 14:32:51 kili Exp $
d8 1
a8 1
REVISION-main =		2
d10 1
a10 1
REVISION-lib =		2
@


1.27
log
@Depend on and use mtl-2 from devel/hs-mtl.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/04/11 14:58:20 kili Exp $
d8 1
a8 1
REVISION-main =		1
d10 1
a10 1
REVISION-lib =		1
d28 1
a28 5
MODGHC_BUILD =		cabal hackage register

.if defined (SUBPACKAGE) && ${SUBPACKAGE:M-main}
MODGHC_BUILD +=		nort
.endif
d36 8
@


1.26
log
@Add hs-syb dependency and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/04/04 22:40:55 kili Exp $
d8 1
a8 1
REVISION-main =		0
d10 1
a10 1
REVISION-lib =		0
d35 2
a36 1
RUN_DEPENDS-lib =	devel/hs-syb \
@


1.25
log
@Update to xmonad-0.9.2.

No haddock documentation for now (sorry). I hope this will
be fixed after the updates of ghc and haddock.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/12/04 11:53:57 kili Exp $
d8 1
d10 1
d35 2
a36 1
RUN_DEPENDS-lib =	x11/hs-X11>=1.5.0.0
@


1.24
log
@Add a hint to xmonad-lib and hs-xmonad-contrib (initially suggested
by David Cantrell). Also turn {LIB,RUN}_DEPENDS-lib into
RUN_DEPENDS-lib/BUILD_DEPENDS (Haskell libs are still static).

ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/11/22 08:37:06 espie Exp $
d6 1
a6 1
DISTNAME =		xmonad-0.9.1
a8 2
REVISION-main =		4
REVISION-lib =		7
d24 3
a26 1
MODGHC_BUILD =		cabal hackage haddock register
@


1.23
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/06 10:18:39 espie Exp $
d9 2
a10 2
REVISION-main =		3
REVISION-lib =		6
d32 2
a33 3
BUILD_DEPENDS =		x11/hs-X11>=1.5.0.0
LIB_DEPENDS-lib =	x11/hs-X11>=1.5.0.0
RUN_DEPENDS-lib =	${LIB_DEPENDS-lib}
@


1.22
log
@convert libiconv to new wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/11/03 22:19:02 kili Exp $
d32 2
a33 2
BUILD_DEPENDS =		:hs-X11->=1.5.0.0:x11/hs-X11
LIB_DEPENDS-lib =	:hs-X11->=1.5.0.0:x11/hs-X11
d36 1
a36 1
			::devel/gmp
d38 1
a38 1
USE_GROFF =	Yes
@


1.21
log
@bumpski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/28 13:55:21 jasper Exp $
d22 2
a23 1
WANTLIB-main =		X11 Xext Xinerama c gmp m pthread util
@


1.20
log
@- regen plist after recent ghc.port.mk change
- adjust @@exec/@@unexec accordingly

from kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/10/24 21:15:36 ajacoutot Exp $
d10 1
a10 1
REVISION-lib =		5
@


1.19
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/19 08:14:01 espie Exp $
d9 2
a10 2
REVISION-main =		2
REVISION-lib =		4
a39 1
	@@${INSTALL_MAN_DIR} ${PREFIX}/man/man1
d41 4
a44 2
	@@${INSTALL_DATA} ${WRKSRC}/CONFIG ${PREFIX}/share/doc/${DISTNAME}
	@@${INSTALL_DATA} ${WRKSRC}/man/xmonad.hs ${PREFIX}/share/doc/${DISTNAME}
@


1.18
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/07/17 13:49:21 kili Exp $
a36 1
USE_X11 =		Yes
@


1.17
log
@Add LIB_DEPENDS to RUN_DEPENDS (for the -lib subpackage).
Switch to REVISION and now WANTLIB/LIB_DEPENDS style.
Bump (only -lib).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/06/30 15:41:02 kili Exp $
d38 1
@


1.16
log
@WANTLIB += pthread and bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/06/15 17:59:24 kili Exp $
d7 4
a10 2
PKGNAME-main =		${DISTNAME}p2
PKGNAME-lib =		${DISTNAME:S,-,-lib-,}p3
d22 1
a22 1
WANTLIB-main =		X11 Xext Xinerama c m pthread util
d33 1
d35 1
a35 1
			gmp::devel/gmp
@


1.15
log
@Add gmp and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/06/06 10:06:45 kili Exp $
d7 1
a7 1
PKGNAME-main =		${DISTNAME}p1
d20 1
a20 1
WANTLIB-main =		X11 Xext Xinerama c m util
@


1.14
log
@Bump after the stupid ABI changes in GHC.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/05/19 15:58:23 kili Exp $
d7 2
a8 2
PKGNAME-main =		${DISTNAME}p0
PKGNAME-lib =		${DISTNAME:S,-,-lib-,}p2
d31 2
@


1.13
log
@Silent register.sh/unregister.sh after the change to Cabal in ghc.
Run unregister.sh with `--force'.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/05/16 14:12:20 kili Exp $
d8 1
a8 1
PKGNAME-lib =		${DISTNAME:S,-,-lib-,}p1
@


1.12
log
@Install documentation for -lib subpackage.

Note: if you have hs-xmonad-contrib installed, you'll see an error
message from ghc-pkg (called from unregister.sh) when you update
xmonad-lib. That's harmless in this case, and I'll improve the
register/unregister stuff in ghc soon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/05/06 20:05:24 kili Exp $
d8 1
a8 1
PKGNAME-lib =		${DISTNAME:S,-,-lib-,}p0
@


1.11
log
@Adjust WANTLIB and bump PKGNAME after the ghc change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/04/22 22:00:45 kili Exp $
d8 1
a8 1
PKGNAME-lib =		${DISTNAME:S,-,-lib-,}
d23 1
a23 1
MODGHC_BUILD =		cabal hackage register
d37 2
a38 3
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/xmonad
	@@${INSTALL_DATA} ${WRKSRC}/CONFIG ${PREFIX}/share/doc/xmonad
	@@${INSTALL_DATA} ${WRKSRC}/man/xmonad.hs ${PREFIX}/share/doc/xmonad
@


1.10
log
@Update to xmonad-0.9.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/09/19 21:14:13 kili Exp $
d7 1
a7 1
PKGNAME-main =		${DISTNAME}
d20 1
a20 1
WANTLIB-main =		X11 Xext Xinerama c m pthread util
@


1.9
log
@
Drop maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/04/16 21:00:56 kili Exp $
d3 2
a4 2
COMMENT-main=		tiling window manager
COMMENT-lib=		libraries for runtime configuration
d6 5
a10 6
V=			0.7
DISTNAME=		xmonad-$V
PKGNAME-main=		xmonad-${V}p0
PKGNAME-lib=		xmonad-lib-${V}p0
CATEGORIES=		x11
HOMEPAGE=		http://www.xmonad.org/
d12 1
a12 1
MULTI_PACKAGES=		-main -lib
d14 5
a18 5
# BSD
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d20 1
a20 1
MASTER_SITES=		http://hackage.haskell.org/packages/archive/xmonad/$V/
d22 2
a23 3
WANTLIB-main=		X11 Xext Xinerama c m

MODULES=		lang/ghc
d26 1
a26 1
MODGHC_RUNTIME=	No
d29 6
a34 30
BUILD_DEPENDS=		:hs-x11-extras->=0.4:x11/hs-x11-extras
LIB_DEPENDS=		gmp::devel/gmp
LIB_DEPENDS-lib=
RUN_DEPENDS-lib=	:hs-x11-extras->=0.4:x11/hs-x11-extras

SETUP_CONF_ARGS=	configure -g --prefix=${PREFIX}
SETUP_CONF_ENV=		HOME=${PORTHOME} PATH=${PATH}
SETUP_PROG=		${WRKSRC}/Setup
SUBST_VARS=		V

USE_X11=		Yes

do-configure:
	@@cd ${WRKSRC} && ghc --make -o ${SETUP_PROG} Setup.lhs
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
		${SETUP_PROG} ${SETUP_CONF_ARGS}

do-build:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} build
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} register --gen-script
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} unregister --gen-script
	perl -pi -e 's!/share/${DISTNAME}/doc/html!/share/doc/${DISTNAME}!' \
		${WRKBUILD}/register.sh

do-install:
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
		${SETUP_PROG} copy --destdir=${DESTDIR}
d41 2
a42 8
post-install:
.for f in register.sh unregister.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/$f ${PREFIX}/lib/${DISTNAME}
.endfor

do-regress:
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
		${SETUP_PROG} test
@


1.8
log
@
Update to 0.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/02/03 18:17:51 kili Exp $
d8 2
a9 2
PKGNAME-main=		xmonad-$V
PKGNAME-lib=		xmonad-lib-$V
a11 2

MAINTAINER=		Matthias Kilian <kili@@openbsd.org>
@


1.7
log
@
Update to 0.6. Thanks to Simon Kuhnle and Jona Joachim for testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2008/01/18 21:51:13 kili Exp $
d6 1
a6 1
V=			0.6
@


1.6
log
@
Update to 0.5, and split up into subpackages -main and -lib.

Thanks to Simon Kuhnle for testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/11/19 19:59:40 kili Exp $
d6 1
a6 1
V=			0.5
@


1.5
log
@
no need to run_depend on the ghc runtime nor hs-x11-extras, since all
ghc-related libs are static only.
also, explicitly add a pkgspec (with version) for hs-x11-extras, else
the build may fail if hs-x11-extras-0.3 is still installed.

noticed and tested by Simon Kuhnle. thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/11/18 20:13:31 kili Exp $
d3 2
a4 1
COMMENT=		tiling window manager
d6 1
a6 1
V=			0.4
d8 2
a9 1
PKGNAME=		${DISTNAME}p0
d15 2
d25 1
a25 1
WANTLIB=		X11 Xext Xinerama c m
d28 5
a32 1
MODGHC_RUNTIME=		No
d35 2
d51 1
a51 1
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
d53 6
d65 8
@


1.4
log
@
Update to 0.4. From Dmitri Alenitchev.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/10/01 20:46:30 kili Exp $
d7 1
d21 1
a21 1
WANTLIB=		X11 Xext Xinerama c gmp m
d24 3
a26 1
LIB_DEPENDS=		::x11/hs-x11-extras
@


1.3
log
@
Update to 0.3.
Note to xmonad junkies: this doesn't include XMonadContrib and related
stuff; there's a lot of activity on the xmonad list, so adding knobs to
the port *now* may be a bad idea.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/09/15 20:04:28 merdely Exp $
d5 1
a5 1
V=			0.3
@


1.2
log
@Remove surrounding quotes in COMMENT/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/09/01 22:18:41 kili Exp $
d5 2
a6 1
DISTNAME=		xmonad-0.2
d18 1
a18 1
MASTER_SITES=		http://hackage.haskell.org/packages/archive/xmonad/0.2/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
COMMENT=		"tiling window manager"
@


1.1.1.1
log
@
Xmonad is a tiling window manager for X. Windows are arranged
automatically to tile the screen without gaps or overlap, maximising
screen use. All features of the window manager are accessible from
the keyboard: a mouse is strictly optional. Xmonad is written and
extensible in Haskell. Custom layout algorithms, and other extensions,
may be written by the user in config files. Layouts are applied
dynamically, and different layouts may be used on each workspace.
Xinerama is fully supported, allowing windows to be tiled on several
screens. A guiding principle of the design is predictability: users
should know in advance precisely the window arrangement that will
result from any action, leading to a simpler user interface.

@
text
@@
