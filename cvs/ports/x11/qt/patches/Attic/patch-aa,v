head	1.13;
access;
symbols
	OPENBSD_2_7:1.12.0.2
	OPENBSD_2_7_BASE:1.12
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.5.0.2
	OPENBSD_2_5_BASE:1.5
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	qt-1_31:1.1.1.1
	qt:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2000.06.30.07.01.34;	author brad;	state dead;
branches;
next	1.12;

1.12
date	2000.03.08.08.52.36;	author brad;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2000.03.08.01.27.53;	author kevlo;	state Exp;
branches;
next	1.10;

1.10
date	99.12.20.01.15.21;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.06.07.15.58.49;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.05.28.18.10.21;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.05.27.20.13.05;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.05.16.04.50.25;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.03.07.02.25.55;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	98.11.27.10.51.59;	author form;	state dead;
branches;
next	1.3;

1.3
date	98.07.22.12.49.47;	author form;	state Exp;
branches;
next	1.2;

1.2
date	98.07.15.05.51.28;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.01.24.21.31.53;	author don;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.01.24.21.31.53;	author don;	state Exp;
branches;
next	;

1.12.2.1
date	2000.09.15.05.25.20;	author marc;	state dead;
branches;
next	;


desc
@@


1.13
log
@- don't try to be smart with examples and tutorial, moving those files
  around doesn't work, as there are cross-dependencies.
- move LOCALBASE/X11BASE setting to post-patch, as this allows having
  complete, independent Makefiles for examples/tutorial.
- use better filenames for patches and include patches to setup the debug
  Qt config files.
@
text
@--- configs/openbsd-g++-shared.orig	Fri Feb 26 12:02:08 1999
+++ configs/openbsd-g++-shared	Tue Mar  7 21:03:15 2000
@@@@ -1,35 +1,35 @@@@
 # Compiling
-SYSCONF_CXX		= g++
+SYSCONF_CXX		= $(SYS_CXX)
 
 # Compiling with support libraries
-SYSCONF_CXXFLAGS_X11	= -I/usr/X11R6/include
+SYSCONF_CXXFLAGS_X11	= -I$(X11BASE)/include
 SYSCONF_CXXFLAGS_QT	= -I$(QTDIR)/include
-SYSCONF_CXXFLAGS_OPENGL	= -I/usr/X11R6/include
+SYSCONF_CXXFLAGS_OPENGL	= -I$(LOCALBASE)/include
 
 # Compiline YACC output
 SYSCONF_CXXFLAGS_YACC     = -Wno-unused -Wno-parentheses
 
 # Linking with support libraries
 # X11
-SYSCONF_LFLAGS_X11	= -L/usr/X11R6/lib
+SYSCONF_LFLAGS_X11	= -L$(X11BASE)/lib
 SYSCONF_LIBS_X11	= -lX11 -lXext
 # Qt, Qt+OpenGL
 SYSCONF_LFLAGS_QT	= -L$(QTDIR)/lib
 SYSCONF_LIBS_QT		= -lqt
 SYSCONF_LIBS_QT_OPENGL	= -lqgl
 # OpenGL
-SYSCONF_LFLAGS_OPENGL	= -L/usr/X11R6/lib
+SYSCONF_LFLAGS_OPENGL	= -L$(LOCALBASE)/lib
 SYSCONF_LIBS_OPENGL	= -lMesaGL -lMesaGLU -lXmu -lXext -lm
 # Yacc
 SYSCONF_LIBS_YACC	= 
 
 # Linking applications
-SYSCONF_LINK		= g++
+SYSCONF_LINK		= $(SYS_CXX)
 SYSCONF_LFLAGS		= 
 SYSCONF_LIBS		= 
 
 # Link flags shared objects
-SYSCONF_LFLAGS_SHOBJ	= -Bshareable
+SYSCONF_LFLAGS_SHOBJ	= -Bshareable -Bforcearchive
 
 # Meta-object compiler
 SYSCONF_MOC		= $(QTDIR)/bin/moc
@@@@ -41,7 +41,7 @@@@
 #
 SYSCONF_LINK_SHLIB	= ld
 SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
-SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) -Bshareable $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) `lorder /usr/lib/c++rt0.o $(OBJECTS) $(OBJMOC) | tsort` $(LIBS)
+SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) -Bshareable -Bforcearchive $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) $(OBJECTS) $(OBJMOC) $(LIBS)
 
 # Linking static libraries
 #   - Build the $(TARGET) library, eg. lib$(TARGET).a
@@@@ -53,11 +53,11 @@@@
 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) ; \
 				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
 # Compiling application source
-SYSCONF_CXXFLAGS	= -O2 -fno-strength-reduce
+SYSCONF_CXXFLAGS	= $(SYS_CXXFLAGS) -fno-strength-reduce
 # Compiling library source
-SYSCONF_CXXFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CXXFLAGS_LIB	= $(SYS_CXXFLAGS) -fno-strength-reduce -fPIC
 # Compiling shared-object source
-SYSCONF_CXXFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CXXFLAGS_SHOBJ	= $(SYS_CXXFLAGS) -fno-strength-reduce -fPIC
 # Default link type (stati linking is still be used where required)
 SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_SHARED)
 SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_SHARED)
@


1.12
log
@better patches, uses $(LOCALBASE) to try and link in Mesa if someone trys to compile qgl separately
@
text
@@


1.12.2.1
log
@bring x11 as of cut-over date into 2.7 branch
@
text
@@


1.11
log
@Upgrade to version 1.45.
@
text
@d1 2
a2 2
--- configs/openbsd-g++-shared.orig	Fri Feb 26 17:02:08 1999
+++ configs/openbsd-g++-shared	Tue Mar  7 18:02:02 2000
d13 1
a13 1
+SYSCONF_CXXFLAGS_OPENGL	= -I$(X11BASE)/include
d29 1
a29 1
+SYSCONF_LFLAGS_OPENGL	= -L$(X11BASE)/lib
d46 1
a46 2
@@@@ -40,9 +40,9 @@@@
 #   - Usually needs to incorporate $(VER_MAJ) and $(VER_MIN)
d49 1
a49 1
-SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
d51 2
a52 4
-
+SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.1.45
+SYSCONF_LINK_LIB_SHARED         = $(SYSCONF_LINK_SHLIB) -Bshareable -Bforcearchive $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) $(OBJECTS) $(OBJMOC) $(LIBS)
+ 
a54 1
 #   - Place target in $(DESTDIR) - which has a trailing /
@


1.10
log
@- cleanup Makefile
- use -Bforacrchive when linking shared lib
- stop patching static build config with shared lib options
@
text
@d1 2
a2 2
--- configs/openbsd-g++-shared.orig	Fri Feb 26 12:02:08 1999
+++ configs/openbsd-g++-shared	Sun Dec 19 15:58:51 1999
d46 2
a47 1
@@@@ -41,7 +41,7 @@@@
d50 1
a50 1
 SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
d52 4
a55 2
+SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) -Bshareable -Bforcearchive $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) $(OBJECTS) $(OBJMOC) $(LIBS)
 
d58 1
@


1.9
log
@use EGCS to compile this port
@
text
@d2 2
a3 2
+++ configs/openbsd-g++-shared	Mon Jun  7 09:27:57 1999
@@@@ -1,30 +1,30 @@@@
d40 6
d51 1
a51 1
+SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) -Bshareable $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) $(OBJECTS) $(OBJMOC) $(LIBS)
@


1.8
log
@- fixup patches
- remove BROKEN tag, Qt now compiles and works on SPARC
@
text
@d2 1
a2 1
+++ configs/openbsd-g++-shared	Fri May 28 12:25:19 1999
d6 1
a6 1
+SYSCONF_CXX		= $(CX)
d36 1
a36 1
+SYSCONF_LINK		= $(CX)
d54 1
a54 1
+SYSCONF_CXXFLAGS	= $(CXFLAGS) -fno-strength-reduce
d57 1
a57 1
+SYSCONF_CXXFLAGS_LIB	= $(CXFLAGS) -fno-strength-reduce -fPIC
d60 1
a60 1
+SYSCONF_CXXFLAGS_SHOBJ	= $(CXFLAGS) -fno-strength-reduce -fPIC
@


1.7
log
@- upgrade to Qt 1.44
- add patch to work around Internal Compiler errors on SPARC
@
text
@d1 2
a2 2
--- configs/openbsd-g++-shared.orig	Thu May 27 13:06:43 1999
+++ configs/openbsd-g++-shared	Thu May 27 13:17:04 1999
d40 9
@


1.6
log
@make Qt use the CXXFLAGS
@
text
@d1 2
a2 2
--- configs/openbsd-g++-shared.orig	Tue Nov 17 09:19:09 1998
+++ configs/openbsd-g++-shared	Fri May 14 22:20:43 1999
d5 2
a6 2
-SYSCONF_CC		= g++
+SYSCONF_CC		= $(CXX)
d9 5
a13 5
-SYSCONF_CFLAGS_X11	= -I/usr/X11R6/include
+SYSCONF_CFLAGS_X11	= -I$(X11BASE)/include
 SYSCONF_CFLAGS_QT	= -I$(QTDIR)/include
-SYSCONF_CFLAGS_OPENGL	= -I/usr/X11R6/include
+SYSCONF_CFLAGS_OPENGL	= -I$(X11BASE)/include
d16 1
a16 1
 SYSCONF_CFLAGS_YACC     = -Wno-unused -Wno-parentheses
d36 1
a36 1
+SYSCONF_LINK		= $(CXX)
d41 1
a41 1
 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC); \
d44 2
a45 2
-SYSCONF_CFLAGS		= -O2 -fno-strength-reduce
+SYSCONF_CFLAGS		= $(CXXFLAGS) -fno-strength-reduce
d47 2
a48 2
-SYSCONF_CFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CFLAGS_LIB	= $(CXXFLAGS) -fno-strength-reduce -fPIC
d50 2
a51 2
-SYSCONF_CFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CFLAGS_SHOBJ	= $(CXXFLAGS) -fno-strength-reduce -fPIC
@


1.5
log
@upgrade to Qt 1.42
@
text
@d1 2
a2 2
--- configs/openbsd-g++-shared.orig	Wed Mar  3 23:05:57 1999
+++ configs/openbsd-g++-shared	Wed Mar  3 23:08:56 1999
d40 15
@


1.4
log
@Oops. We do not need patches for 1.41...
@
text
@d1 39
a39 51
*** configs/openbsd-g++-shared.orig	Wed Jul 22 16:58:40 1998
--- configs/openbsd-g++-shared	Wed Jul 22 17:04:20 1998
***************
*** 39,45 ****
  #
  SYSCONF_LINK_SHLIB	= ld
  SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
! SYSCONF_LINK_LIB_SHARED	= $(LINK) $(LFLAGS) -o $(TARGETD) `lorder /usr/lib/c++rt0.o $(OBJECTS) $(OBJMOC) | tsort` $(LIBS)
  
  # Linking static libraries
  #   - Build the $(TARGET) library, eg. lib$(TARGET).a
--- 39,52 ----
  #
  SYSCONF_LINK_SHLIB	= ld
  SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
! SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) $(SYSCONF_LFLAGS_SHOBJ) \
! 	$(LFLAGS) -o $(SYSCONF_LINK_TARGET_SHARED) \
! 	`lorder /usr/lib/c++rt0.o $(OBJECTS) $(OBJMOC) | tsort` $(LIBS); \
! 	mv $(SYSCONF_LINK_TARGET_SHARED) $(DESTDIR); \
! 	cd $(DESTDIR); \
! 	rm -f lib$(TARGET).so lib$(TARGET).so.$(VER_MAJ); \
! 	ln -sf $(SYSCONF_LINK_TARGET_SHARED) lib$(TARGET).so; \
! 	ln -sf $(SYSCONF_LINK_TARGET_SHARED) lib$(TARGET).so.$(VER_MAJ)
  
  # Linking static libraries
  #   - Build the $(TARGET) library, eg. lib$(TARGET).a
***************
*** 51,61 ****
  				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) \
  				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
  # Compiling application source
! SYSCONF_CFLAGS		= -O2 -fno-strength-reduce
  # Compiling library source
! SYSCONF_CFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
  # Compiling shared-object source
! SYSCONF_CFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
  # Default link type (stati linking is still be used where required)
  SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_SHARED)
  SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_SHARED)
--- 58,68 ----
  				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) \
  				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
  # Compiling application source
! SYSCONF_CFLAGS		= -O2 -pipe -fno-strength-reduce
  # Compiling library source
! SYSCONF_CFLAGS_LIB	= -O2 -pipe -fno-strength-reduce -fPIC
  # Compiling shared-object source
! SYSCONF_CFLAGS_SHOBJ	= -O2 -pipe -fno-strength-reduce -fPIC
  # Default link type (stati linking is still be used where required)
  SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_SHARED)
  SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_SHARED)
@


1.3
log
@update to 1.40
@
text
@@


1.2
log
@update to version 1.33; broken on sparc due to g++ bug (reported)
@
text
@d1 51
a51 42
--- Makefile.~1~	Mon Mar 16 14:52:24 1998
+++ Makefile	Tue Jul 14 16:32:59 1998
@@@@ -66,6 +66,8 @@@@
 	@@echo " " linux-gcc-static
 	@@echo " " netbsd-gcc-shared
 	@@echo " " netbsd-gcc-static
+	@@echo " " openbsd-gcc-shared
+	@@echo " " openbsd-gcc-static
 	@@echo " " osf1-cxx-shared
 	@@echo " " osf1-cxx-static
 	@@echo " " osf1-gcc-shared
@@@@ -356,6 +358,30 @@@@
 	 YACCCFLAGS="-Wno-unused -Wno-parentheses" \
 	 LFLAGS="-lqt -L/usr/X11R6/lib -lX11" \
 	 SHELL="/bin/sh" PLATFORM=netbsd-gcc-static ./propagate
+	@@touch variables
+	@@echo
+	@@echo Qt is now configured for building.  Just run "make" to build it.
+	@@echo
+
+openbsd-gcc-shared: Makefile
+	 CC="gcc" \
+	 CFLAGS="-O2 -fno-strength-reduce -Wall -W -I/usr/X11R6/include" \
+	 LIBCFLAGS="-fPIC" \
+	 YACCCFLAGS="-Wno-unused -Wno-parentheses" \
+	 LFLAGS="-lqt -L/usr/X11R6/lib" \
+	 SHELL="/bin/sh" PLATFORM=openbsd-gcc-shared ./propagate
+	@@touch variables
+	@@echo
+	@@echo Qt is now configured for building.  Just run "make" to build it.
+	@@echo
+
+openbsd-gcc-static: Makefile
+	 CC="gcc" \
+	 CFLAGS="-O2 -fno-strength-reduce -Wall -W -I/usr/X11R6/include" \
+	 LIBCFLAGS="" \
+	 YACCCFLAGS="-Wno-unused -Wno-parentheses" \
+	 LFLAGS="-lqt -L/usr/X11R6/lib -lX11" \
+	 SHELL="/bin/sh" PLATFORM=openbsd-gcc-static ./propagate
 	@@touch variables
 	@@echo
 	@@echo Qt is now configured for building.  Just run "make" to build it.
@


1.1
log
@Initial revision
@
text
@d1 42
a42 23
*** src/tools/qglobal.h.orig	Sat Jan 10 13:13:45 1998
--- src/tools/qglobal.h	Sat Jan 10 13:14:37 1998
***************
*** 43,48 ****
--- 43,49 ----
  //   LINUX	- Linux
  //   FREEBSD	- FreeBSD
  //   NETBSD	- NetBSD
+ //   OPENBSD	- OpenBSD
  //   IRIX	- SGI Irix
  //   OSF	- OSF Unix
  //   BSDI	- BSDI Unix
***************
*** 79,84 ****
--- 80,87 ----
  #define _OS_FREEBSD_
  #elif defined(__NetBSD__)
  #define _OS_NETBSD_
+ #elif defined(__OpenBSD__)
+ #define _OS_OPENBSD_
  #elif defined(sgi) || defined(__sgi)
  #define _OS_IRIX_
  #elif defined(__osf__)
@


1.1.1.1
log
@Initial import.
@
text
@@
