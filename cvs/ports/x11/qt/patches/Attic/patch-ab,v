head	1.13;
access;
symbols
	OPENBSD_2_7:1.11.0.2
	OPENBSD_2_7_BASE:1.11
	OPENBSD_2_6:1.8.0.2
	OPENBSD_2_6_BASE:1.8
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2;
locks; strict;
comment	@# @;


1.13
date	2000.06.30.07.01.35;	author brad;	state dead;
branches;
next	1.12;

1.12
date	2000.05.22.10.48.56;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.08.08.52.36;	author brad;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	2000.03.08.01.27.53;	author kevlo;	state Exp;
branches;
next	1.9;

1.9
date	99.12.20.01.15.21;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.06.07.15.58.49;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.05.28.18.10.21;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.05.27.20.13.05;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.05.16.04.50.25;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.03.07.02.25.55;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	98.11.27.10.51.59;	author form;	state dead;
branches;
next	1.2;

1.2
date	98.07.22.12.49.48;	author form;	state Exp;
branches;
next	1.1;

1.1
date	98.07.15.05.51.29;	author marc;	state Exp;
branches;
next	;

1.11.2.1
date	2000.09.15.05.25.20;	author marc;	state dead;
branches;
next	;


desc
@@


1.13
log
@- don't try to be smart with examples and tutorial, moving those files
  around doesn't work, as there are cross-dependencies.
- move LOCALBASE/X11BASE setting to post-patch, as this allows having
  complete, independent Makefiles for examples/tutorial.
- use better filenames for patches and include patches to setup the debug
  Qt config files.
@
text
@--- configs/openbsd-g++-static.orig	Fri Feb 26 12:02:08 1999
+++ configs/openbsd-g++-static	Tue Mar  7 21:04:50 2000
@@@@ -1,30 +1,30 @@@@
 # Compiling
-SYSCONF_CXX		= g++
+SYSCONF_CXX		= $(SYS_CXX)
 
 # Compiling with support libraries
-SYSCONF_CXXFLAGS_X11	= -I/usr/X11R6/include
+SYSCONF_CXXFLAGS_X11	= -I$(X11BASE)/include -I$(LOCALBASE)/include
 SYSCONF_CXXFLAGS_QT	= -I$(QTDIR)/include
-SYSCONF_CXXFLAGS_OPENGL	= -I/usr/X11R6/include
+SYSCONF_CXXFLAGS_OPENGL	= -I$(LOCALBASE)/include
 
 # Compiline YACC output
 SYSCONF_CXXFLAGS_YACC     = -Wno-unused -Wno-parentheses
 
 # Linking with support libraries
 # X11
-SYSCONF_LFLAGS_X11	= -L/usr/X11R6/lib
+SYSCONF_LFLAGS_X11	= -L$(X11BASE)/lib
 SYSCONF_LIBS_X11	= -lX11 -lXext
 # Qt, Qt+OpenGL
 SYSCONF_LFLAGS_QT	= -L$(QTDIR)/lib
 SYSCONF_LIBS_QT		= -lqt
 SYSCONF_LIBS_QT_OPENGL	= -lqgl
 # OpenGL
-SYSCONF_LFLAGS_OPENGL	= -L/usr/X11R6/lib
+SYSCONF_LFLAGS_OPENGL	= -L$(LOCALBASE)/lib
 SYSCONF_LIBS_OPENGL	= -lMesaGL -lMesaGLU -lXmu -lXext -lm
 # Yacc
 SYSCONF_LIBS_YACC	= 
 
 # Linking applications
-SYSCONF_LINK		= g++
+SYSCONF_LINK		= $(SYS_CXX)
 SYSCONF_LFLAGS		= 
 SYSCONF_LIBS		= 
 
@@@@ -53,10 +53,10 @@@@
 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) ; \
 				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
 # Compiling application source
-SYSCONF_CXXFLAGS	= -O2 -fno-strength-reduce
+SYSCONF_CXXFLAGS	= $(SYS_CXXFLAGS) -fno-strength-reduce
 # Compiling library source
-SYSCONF_CXXFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CXXFLAGS_LIB	= $(SYS_CXXFLAGS) -fno-strength-reduce -fPIC
 # Compiling shared-object source
-SYSCONF_CXXFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CXXFLAGS_SHOBJ	= $(SYS_CXXFLAGS) -fno-strength-reduce -fPIC
 SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_STATIC)
 SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_STATIC)
@


1.12
log
@Fix PLIST.noshared by removing it :)
Add qimgio support (other graphics formats).
This adds a build time dependency, but no runtime dependency,
as users have to explicitly link against libqimgio, as of qt 1.xx
@
text
@@


1.11
log
@better patches, uses $(LOCALBASE) to try and link in Mesa if someone trys to compile qgl separately
@
text
@d10 1
a10 1
+SYSCONF_CXXFLAGS_X11	= -I$(X11BASE)/include
@


1.11.2.1
log
@bring x11 as of cut-over date into 2.7 branch
@
text
@@


1.10
log
@Upgrade to version 1.45.
@
text
@d1 2
a2 2
--- configs/openbsd-g++-static.orig	Fri Feb 26 17:02:08 1999
+++ configs/openbsd-g++-static	Tue Mar  7 18:05:35 2000
d13 1
a13 1
+SYSCONF_CXXFLAGS_OPENGL	= -I$(X11BASE)/include
d29 1
a29 1
+SYSCONF_LFLAGS_OPENGL	= -L$(X11BASE)/lib
@


1.9
log
@- cleanup Makefile
- use -Bforacrchive when linking shared lib
- stop patching static build config with shared lib options
@
text
@d1 2
a2 2
--- configs/openbsd-g++-static.orig	Fri Feb 26 12:02:08 1999
+++ configs/openbsd-g++-static	Sun Dec 19 16:02:01 1999
@


1.8
log
@use EGCS to compile this port
@
text
@d2 1
a2 1
+++ configs/openbsd-g++-static	Mon Jun  7 09:28:27 1999
a39 9
@@@@ -41,7 +41,7 @@@@
 #
 SYSCONF_LINK_SHLIB	= ld
 SYSCONF_LINK_TARGET_SHARED	= lib$(TARGET).so.$(VER_MAJ).$(VER_MIN)
-SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) -Bshareable $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) `lorder /usr/lib/c++rt0.o $(OBJECTS) $(OBJMOC) | tsort` $(LIBS)
+SYSCONF_LINK_LIB_SHARED	= $(SYSCONF_LINK_SHLIB) -Bshareable $(LFLAGS) -o $(DESTDIR)$(SYSCONF_LINK_TARGET_SHARED) $(OBJECTS) $(OBJMOC) $(LIBS)
 
 # Linking static libraries
 #   - Build the $(TARGET) library, eg. lib$(TARGET).a
@


1.7
log
@- fixup patches
- remove BROKEN tag, Qt now compiles and works on SPARC
@
text
@d2 1
a2 1
+++ configs/openbsd-g++-static	Fri May 28 12:25:37 1999
d6 1
a6 1
+SYSCONF_CXX		= $(CX)
d36 1
a36 1
+SYSCONF_LINK		= $(CX)
d54 1
a54 1
+SYSCONF_CXXFLAGS	= $(CXFLAGS) -fno-strength-reduce
d57 1
a57 1
+SYSCONF_CXXFLAGS_LIB	= $(CXFLAGS) -fno-strength-reduce -fPIC
d60 1
a60 1
+SYSCONF_CXXFLAGS_SHOBJ	= $(CXFLAGS) -fno-strength-reduce -fPIC
@


1.6
log
@- upgrade to Qt 1.44
- add patch to work around Internal Compiler errors on SPARC
@
text
@d1 2
a2 2
--- configs/openbsd-g++-static.orig	Thu May 27 13:14:38 1999
+++ configs/openbsd-g++-static	Thu May 27 13:16:02 1999
d40 9
@


1.5
log
@make Qt use the CXXFLAGS
@
text
@d1 2
a2 2
--- configs/openbsd-g++-static.orig	Tue Nov 17 09:19:08 1998
+++ configs/openbsd-g++-static	Fri May 14 22:21:26 1999
d5 2
a6 2
-SYSCONF_CC		= g++
+SYSCONF_CC		= $(CXX)
d9 5
a13 5
-SYSCONF_CFLAGS_X11	= -I/usr/X11R6/include
+SYSCONF_CFLAGS_X11	= -I$(X11BASE)/include
 SYSCONF_CFLAGS_QT	= -I$(QTDIR)/include
-SYSCONF_CFLAGS_OPENGL	= -I/usr/X11R6/include
+SYSCONF_CFLAGS_OPENGL	= -I$(X11BASE)/include
d16 1
a16 1
 SYSCONF_CFLAGS_YACC     = -Wno-unused -Wno-parentheses
d36 1
a36 1
+SYSCONF_LINK		= $(CXX)
d41 1
a41 1
 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC); \
d44 2
a45 2
-SYSCONF_CFLAGS		= -O2 -fno-strength-reduce
+SYSCONF_CFLAGS		= $(CXXFLAGS) -fno-strength-reduce
d47 2
a48 2
-SYSCONF_CFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CFLAGS_LIB	= $(CXXFLAGS) -fno-strength-reduce -fPIC
d50 2
a51 2
-SYSCONF_CFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
+SYSCONF_CFLAGS_SHOBJ	= $(CXXFLAGS) -fno-strength-reduce -fPIC
@


1.4
log
@upgrade to Qt 1.42
@
text
@d1 2
a2 2
--- configs/openbsd-g++-static.orig	Wed Mar  3 23:10:09 1999
+++ configs/openbsd-g++-static	Wed Mar  3 23:10:56 1999
d40 14
@


1.3
log
@Oops. We do not need patches for 1.41...
@
text
@d1 39
a39 31
*** configs/openbsd-g++-static.orig	Fri Jul 10 02:24:41 1998
--- configs/openbsd-g++-static	Wed Jul 22 17:54:44 1998
***************
*** 48,60 ****
  SYSCONF_AR		= ar q
  SYSCONF_LINK_TARGET_STATIC = lib$(TARGET).a
  SYSCONF_LINK_LIB_STATIC	= rm -f $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC);  \
! 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC) \
  				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
  # Compiling application source
! SYSCONF_CFLAGS		= -O2 -fno-strength-reduce
  # Compiling library source
! SYSCONF_CFLAGS_LIB	= -O2 -fno-strength-reduce -fPIC
  # Compiling shared-object source
! SYSCONF_CFLAGS_SHOBJ	= -O2 -fno-strength-reduce -fPIC
  SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_STATIC)
  SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_STATIC)
--- 48,60 ----
  SYSCONF_AR		= ar q
  SYSCONF_LINK_TARGET_STATIC = lib$(TARGET).a
  SYSCONF_LINK_LIB_STATIC	= rm -f $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC);  \
! 				 $(SYSCONF_AR) $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC) $(OBJECTS) $(OBJMOC); \
  				 ranlib $(DESTDIR)$(SYSCONF_LINK_TARGET_STATIC)
  # Compiling application source
! SYSCONF_CFLAGS		= -O2 -pipe -fno-strength-reduce
  # Compiling library source
! SYSCONF_CFLAGS_LIB	= -O2 -pipe -fno-strength-reduce -fPIC
  # Compiling shared-object source
! SYSCONF_CFLAGS_SHOBJ	= -O2 -pipe -fno-strength-reduce -fPIC
  SYSCONF_LINK_LIB	= $(SYSCONF_LINK_LIB_STATIC)
  SYSCONF_LINK_TARGET	= $(SYSCONF_LINK_TARGET_STATIC)
@


1.2
log
@update to 1.40
@
text
@@


1.1
log
@update to version 1.33; broken on sparc due to g++ bug (reported)
@
text
@d1 31
a31 55
--- src/Makefile.orig	Mon Mar 16 14:52:25 1998
+++ src/Makefile	Tue Jul 14 20:47:19 1998
@@@@ -1,11 +1,17 @@@@
-
-####### This section will soon be automatically generated.  At the moment
-#######    it is for building with gcc.
-
+####### This section was automatically generated from
+#######    /openbsd/ports/x11/qt/work/qt-1.33/Makefile for building on
+#######    openbsd-gcc-shared on Tue Jul 14 19:45:35 PDT 1998
+
+INCDIR = /openbsd/ports/x11/qt/work/qt-1.33/include
+CFLAGS = -O2 -fno-strength-reduce -Wall -W -I/usr/X11R6/include
+LIBCFLAGS = -fPIC
+YACCCFLAGS = -Wno-unused -Wno-parentheses
+LFLAGS = -L/openbsd/ports/x11/qt/work/qt-1.33/lib -lqt -L/usr/X11R6/lib
 CC = gcc
+MOC = /openbsd/ports/x11/qt/work/qt-1.33/bin/moc
+SHELL =	/bin/sh
 
-####### End of not-yet-automatically generated section
-
+####### End of automatically generated section
 #
 # $Source: /local/lib/cvs/qt/util/scripts/makemake,v $
 #
@@@@ -65,7 +71,7 @@@@
 
 VERSION=1.33
 
-all: unconfigured # will be changed by ../Makefile
+all: link-openbsd-gcc-shared
 
 tools kernel widgets dialogs: FORCE
 	cd $@@; $(MAKE)
@@@@ -249,6 +255,19 @@@@
 	ar q libqt.a $(OBJECTS) $(METAOBJ)
 	ranlib libqt.a
 	mv libqt.a ../lib
+
+link-openbsd-gcc-shared: link-openbsd-gcc-static
+	-rm -f ../lib/libqt.so.$(VERSION)
+	ld -Bshareable \
+		-o libqt.so.$(VERSION) \
+		`lorder /usr/lib/c++rt0.o $(OBJECTS) $(METAOBJ) | tsort` \
+		-L/usr/X11R6/lib -lX11
+	mv libqt.so.$(VERSION) ../lib
+
+link-openbsd-gcc-static: tools kernel widgets dialogs
+	ar q libqt.a $(OBJECTS) $(METAOBJ)
+	mv libqt.a ../lib
+	ranlib ../lib/libqt.a
 
 link-osf1-cxx-shared: tools kernel widgets dialogs
 	-rm -f ../lib/libqt.so.$(VERSION)
@

