head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.18
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.14
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.12
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.10
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.8
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.6
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.2.0.12
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.10
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.8
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.6
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	landry_20080612:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.01.06.09.49.43;	author jasper;	state Exp;
branches;
next	1.4;
commitid	yQsIUJxCGcmwGWTp;

1.4
date	2011.09.23.07.24.04;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.22.14.04.08;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2009.02.01.13.38.19;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2008.06.13.05.33.52;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.06.13.05.33.52;	author landry;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to xdotool-3.20150503.1
@
text
@$OpenBSD: patch-Makefile,v 1.4 2011/09/23 07:24:04 dcoppa Exp $
--- Makefile.orig	Mon May  4 04:54:46 2015
+++ Makefile	Tue Jan  5 21:25:42 2016
@@@@ -11,30 +11,29 @@@@ DINSTALLLIB=$(DESTDIR)$(INSTALLLIB)
 DINSTALLMAN=$(DESTDIR)$(INSTALLMAN)
 DINSTALLINCLUDE=$(DESTDIR)$(INSTALLINCLUDE)
 
-MAJOR=$(shell sh version.sh --major)
+MAJOR?=$(shell sh version.sh --major)
+MINOR?=$(shell sh version.sh --revision)
 VERSION=$(shell sh version.sh)
+LIBVER?=$(MAJOR).$(MINOR)
 
 WARNFLAGS+=-pedantic -Wall -W -Wundef \
            -Wendif-labels -Wshadow -Wpointer-arith -Wbad-function-cast \
            -Wcast-align -Wwrite-strings -Wstrict-prototypes \
            -Wmissing-prototypes -Wnested-externs -Winline \
            -Wdisabled-optimization -Wno-missing-field-initializers
-LIBSUFFIX=$(shell sh platform.sh libsuffix)
-VERLIBSUFFIX=$(shell sh platform.sh libsuffix $(MAJOR))
+LIBSUFFIX=$(shell sh platform.sh libsuffix $(LIBVER))
 DYNLIBFLAG=$(shell sh platform.sh dynlibflag)
-LIBNAMEFLAG=$(shell sh platform.sh libnameflag $(MAJOR) $(INSTALLLIB))
 
 CFLAGS?=-pipe -O2 $(WARNFLAGS)
-CFLAGS+=-g # TODO(sissel): Comment before release
 CFLAGS+=$(CPPFLAGS)
 
-DEFAULT_LIBS=-L/usr/X11R6/lib -L/usr/local/lib -lX11 -lXtst -lXinerama
-DEFAULT_INC=-I/usr/X11R6/include -I/usr/local/include
+DEFAULT_LIBS=-L${X11BASE}/lib -L${PREFIX}/lib -lX11 -lXtst -lXinerama
+DEFAULT_INC=-I${X11BASE}/include -I${PREFIX}/include
 
 XDOTOOL_LIBS=$(shell pkg-config --libs x11 2> /dev/null || echo "$(DEFAULT_LIBS)")  $(shell sh platform.sh extralibs)
 LIBXDO_LIBS=$(shell pkg-config --libs xtst xinerama xkbcommon 2> /dev/null || echo "$(DEFAULT_LIBS)")
-INC=$(shell pkg-config --cflags x11 xtst xinerama 2> /dev/null || echo "$(DEFAULT_INC)")
-CFLAGS+=-std=c99 $(INC)
+INC=$(shell pkg-config --cflags x11 xtst xinerama xkbcommon 2> /dev/null || echo "$(DEFAULT_INC)")
+CFLAGS+=-std=c99 $(WARNFLAGS) $(INC)
 
 CMDOBJS= cmd_click.o cmd_mousemove.o cmd_mousemove_relative.o cmd_mousedown.o \
          cmd_mouseup.o cmd_getmouselocation.o cmd_type.o cmd_key.o \
@@@@ -52,7 +51,7 @@@@ CMDOBJS= cmd_click.o cmd_mousemove.o cmd_mousemove_rel
          cmd_sleep.o cmd_get_display_geometry.o
 
 .PHONY: all
-all: xdotool.1 libxdo.$(LIBSUFFIX) libxdo.$(VERLIBSUFFIX) xdotool
+all: xdotool.1 libxdo.$(LIBSUFFIX) xdotool
 
 .PHONY: static
 static: xdotool.static
@@@@ -84,23 +83,22 @@@@ post-install:
 .PHONY: installprog
 installprog: xdotool
 	install -d $(DINSTALLBIN)
-	install -m 755 xdotool $(DINSTALLBIN)/
+	${INSTALL_PROGRAM} xdotool $(DINSTALLBIN)/
 
 .PHONY: installlib
 installlib: libxdo.$(LIBSUFFIX)
 	install -d $(DINSTALLLIB)
-	install libxdo.$(LIBSUFFIX) $(DINSTALLLIB)/libxdo.$(VERLIBSUFFIX)
-	ln -sf libxdo.$(VERLIBSUFFIX) $(DINSTALLLIB)/libxdo.$(LIBSUFFIX)
+	${INSTALL_DATA} libxdo.$(LIBSUFFIX) $(DINSTALLLIB)/
 
 .PHONY: installheader
 installheader: xdo.h
 	install -d $(DINSTALLINCLUDE)
-	install xdo.h $(DINSTALLINCLUDE)/xdo.h
+	${INSTALL_DATA} xdo.h $(DINSTALLINCLUDE)/xdo.h
 
 .PHONY: installman
 installman: xdotool.1
 	install -d $(DINSTALLMAN)/man1
-	install -m 644 xdotool.1 $(DINSTALLMAN)/man1/
+	${INSTALL_MAN} xdotool.1 $(DINSTALLMAN)/man1/
 
 .PHONY: deinstall
 deinstall: uninstall
@@@@ -131,7 +129,7 @@@@ xdo.c: xdo.h
 xdotool.c: xdo.h
 
 libxdo.$(LIBSUFFIX): xdo.o xdo_search.o
-	$(CC) $(LDFLAGS) $(DYNLIBFLAG) $(LIBNAMEFLAG) xdo.o xdo_search.o -o $@@ $(LIBXDO_LIBS)
+	$(CC) $(LDFLAGS) $(DYNLIBFLAG) xdo.o xdo_search.o -o $@@ $(LIBXDO_LIBS)
 
 libxdo.a: xdo.o xdo_search.o
 	ar qv $@@ xdo.o xdo_search.o
@@@@ -172,7 +170,7 @@@@ package-deb: test-package-build create-package-deb
 
 .PHONY: test
 test: WITH_SHELL=/bin/bash
-test: xdotool libxdo.$(VERLIBSUFFIX)
+test: xdotool libxdo.$(LIBSUFFIX)
 	echo $(WITH_SHELL)
 	if [ "$(WITH_SHELL)" = "/bin/sh" ] ; then \
 		echo "Shell '$(WITH_SHELL)' fails on some Linux distros because it could"; \
@


1.4
log
@Fix minor nit (no bump required).

Add a comment explaining why the regress tests are disabled, as
requested by naddy@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.3 2011/09/22 14:04:08 dcoppa Exp $
--- Makefile.orig	Mon May 30 09:29:58 2011
+++ Makefile	Fri Sep 23 09:18:31 2011
@@@@ -11,29 +11,28 @@@@ DINSTALLLIB=$(DESTDIR)$(INSTALLLIB)
d14 1
a14 2
-WARNFLAGS+=-pedantic -Wall -W -Wundef \
+WARNFLAGS+=-pedantic -W -Wundef \
d18 1
a18 1
-           -Wdisabled-optimization -Wno-missing-field-initializers
a20 1
+           -Wdisabled-optimization
d24 2
a25 3
 LIBS=$(shell sh platform.sh extralibs)
  
-CFLAGS?=-pipe -O2 $(WARNFLAGS)
d27 1
a27 1
+CFLAGS?=-pipe -O2 -Wall
d31 2
a32 2
+DEFAULT_LIBS=-L{X11BASE}/lib -lX11 -lXtst -lXinerama
+DEFAULT_INC=-I${X11BASE}/include
d34 3
a36 2
 LIBS+=$(shell pkg-config --libs x11 xtst xinerama 2> /dev/null || echo "$(DEFAULT_LIBS)")
 INC=$(shell pkg-config --cflags x11 xtst xinerama 2> /dev/null || echo "$(DEFAULT_INC)")
d38 1
d43 1
a43 1
@@@@ -51,7 +50,7 @@@@ CMDOBJS= cmd_click.o cmd_mousemove.o cmd_mousemove_rel
d52 1
a52 1
@@@@ -83,23 +82,22 @@@@ post-install:
d80 1
a80 15
@@@@ -109,12 +107,11 @@@@ uninstall: 
 	rm -f $(DINSTALLBIN)/xdotool
 	rm -f $(DINSTALLMAN)/xdotool.1
 	rm -f $(DINSTALLLIB)/libxdo.$(LIBSUFFIX)
-	rm -f $(DINSTALLLIB)/libxdo.$(VERLIBSUFFIX)
 
 .PHONY: clean
 clean:
 	rm -f *.o xdotool xdotool.static xdotool.1 xdotool.html \
-	      libxdo.$(LIBSUFFIX) libxdo.$(VERLIBSUFFIX) libxdo.a || true
+	      libxdo.$(LIBSUFFIX) libxdo.a || true
 
 xdo.o: xdo.c xdo_version.h
 	$(CC) $(CFLAGS) -fPIC -c xdo.c
@@@@ -130,14 +127,11 @@@@ xdo.c: xdo.h
d84 2
a85 2
-	$(CC) $(LDFLAGS) $(DYNLIBFLAG) $(LIBNAMEFLAG) xdo.o xdo_search.o -o $@@ $(LIBS)
+	$(CC) $(LDFLAGS) $(DYNLIBFLAG) xdo.o xdo_search.o -o $@@ $(LIBS)
d89 1
a89 9
 
-libxdo.$(VERLIBSUFFIX): libxdo.$(LIBSUFFIX)
-	ln -s $< $@@
-
 # xdotool the binary requires libX11 now for XSelectInput and friends.
 # This requirement will go away once more things are refactored into
 # libxdo.
@@@@ -165,7 +159,7 @@@@ package: test-package-build create-package create-pack
 package-deb: test-package-build create-package-deb
d92 1
d95 3
a97 3
 	$(MAKE) -C t
 
 xdo_version.h:
@


1.3
log
@Update to xdotool-2.20110530.1

OK landry@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile,v 1.2 2009/02/01 13:38:19 landry Exp $
d3 1
a3 1
+++ Makefile	Thu Sep 22 13:19:11 2011
d12 1
a12 1
+LIBVER=$(MAJOR).$(MINOR)
@


1.2
log
@Update to xdotool-20090126.
Most of patch-Makefile was integrated upstream.
Regen PLIST to add @@bin marker.
@
text
@d1 15
a15 4
$OpenBSD: patch-Makefile,v 1.1.1.1 2008/06/13 05:33:52 landry Exp $
--- Makefile.orig	Mon Jan 26 11:54:16 2009
+++ Makefile	Sun Feb  1 14:32:51 2009
@@@@ -6,9 +6,9 @@@@ WARNFLAGS+=-pedantic -Wall -W -Wundef \
d20 2
d23 90
d114 4
a117 2
-CFLAGS=-pipe -std=c99 $(WARNFLAGS)
+CFLAGS+=-pipe -std=c99 $(WARNFLAGS)
d119 1
a119 2
 DEFAULT_LIBS=-L/usr/X11R6/lib -L/usr/local/lib -lX11 -lXtst
 DEFAULT_INC=-I/usr/X11R6/include -I/usr/local/include
@


1.1
log
@Initial revision
@
text
@d1 4
a4 13
$OpenBSD$
--- Makefile.orig	Sun Jun  1 23:58:53 2008
+++ Makefile	Thu Jun 12 23:16:56 2008
@@@@ -1,14 +1,14 @@@@
-PREFIX=/usr/local
-INSTALLBIN=/usr/local/bin
-INSTALLMAN=/usr/local/man
+PREFIX?=/usr/local
+INSTALLBIN=${PREFIX}/bin
+INSTALLMAN=${PREFIX}/man
 
-WARNFLAGS+=-pedantic -Wall -W -Wno-missing-field-initializers -Wundef \
+WARNFLAGS+=-pedantic -Wall -W -Wundef \
d8 2
a9 1
            -Wdisabled-optimization
a15 20
@@@@ -40,16 +40,16 @@@@ clean:
 	rm -f *.o xdotool xdotool.1 || true
 
 xdo.o: xdo.c
-	gcc $(CFLAGS) -c xdo.c
+	$(CC) $(CFLAGS) -c xdo.c
 
 xdotool.o: xdotool.c
-	gcc $(CFLAGS) -c xdotool.c
+	$(CC) $(CFLAGS) -c xdotool.c
 
 xdo.c: xdo.h
 xdotool.c: xdo.h
 
 xdotool: xdotool.o xdo.o
-	gcc $(CFLAGS) $(LDFLAGS) xdotool.o xdo.o -o $@@
+	$(CC) $(CFLAGS) $(LDFLAGS) xdotool.o xdo.o -o $@@
 
 xdotool.1: xdotool.pod
 	pod2man -c "" -r "" xdotool.pod > $@@
@


1.1.1.1
log
@Import xdotool, a nice little tool permitting to fake X mouse and keyboard
events, manipulate windows and desktops, search through existing windows..

ok ajacoutot@@
@
text
@@
