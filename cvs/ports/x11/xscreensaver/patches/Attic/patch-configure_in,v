head	1.4;
access;
symbols
	OPENBSD_3_7:1.3.0.4
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.2.0.6
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2005.06.03.05.38.32;	author marcm;	state dead;
branches;
next	1.3;

1.3
date	2004.06.24.16.23.37;	author marcm;	state Exp;
branches;
next	1.2;

1.2
date	2003.02.18.19.10.33;	author marcm;	state Exp;
branches;
next	1.1;

1.1
date	2002.08.27.02.46.17;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to 4.21, it works better with Gnome 2.10.  Also default to gtk2 and
remove gtk1 support entirely as it makes the port a lot simpler :).
@
text
@$OpenBSD: patch-configure_in,v 1.3 2004/06/24 16:23:37 marcm Exp $
--- configure.in.orig	Tue May 11 19:43:13 2004
+++ configure.in	Thu Jun 24 10:10:10 2004
@@@@ -2046,6 +2046,10 @@@@ AC_ARG_WITH(gtk,
 [  --with-gtk              Use the Gtk toolkit for the user interface.],
   [with_gtk="$withval"; with_gtk_req="$withval"],[with_gtk=yes])
 
+AC_ARG_WITH(gtk2,
+[  --with-gtk2             Use the Gtk2 toolkit for the user interface.],
+  [with_gtk2="$withval"; with_gtk_req2="$withval"],[with_gtk2=no])
+
 # if --with-gtk=/directory/ was specified, remember that directory so that
 # we can also look for the `gtk-config' program in that directory.
 case "$with_gtk" in
@@@@ -2127,7 +2131,12 @@@@ if test "$with_gtk" = yes; then
     gtk_path="$foo:$gtk_path"
   fi
 
-  AC_PATH_PROGS(pkg_config, pkg-config,, $gtk_path)
+  # Nifty hack: if we don't specify gtk2 we don't want it.  If gtk2 isn't asked
+  # for specifically, we don't use pkgconfig; therefore we don't pick up gtk2
+  # as gtk2 only uses pkgconfig.
+  if test "$with_gtk2" = yes; then
+    AC_PATH_PROGS(pkg_config, pkg-config,, $gtk_path)
+  fi
 
   if test -n "$pkg_config" ; then
     #
@@@@ -2179,7 +2188,10 @@@@ if test "$with_gtk" = yes; then
       fi
     fi
 
-    if test "$have_gtk" = no; then
+    # Nifty hack #2: If we did specify gtk2, don't give us gtk1.  We shouldn't
+    # even be here anymore unless $with_gtk2 == yes, so the gtk1 stuff below
+    # will never get run.
+    if test "$have_gtk" = no -a "$with_gtk2" = no; then
       #
       # we don't have GTK 2.  Let's look for GTK 1.
       #
@@@@ -2330,7 +2342,7 @@@@ if test "$with_gtk" = yes; then
 
   fi   # end of {gnome,gtk}-config based tests
 
-  if test "$have_gtk" = yes -a "$have_gtk2" = no; then
+  if test "$have_gnome" = yes -a "$have_gtk2" = no; then
     # check for this function that was not in libcapplet 1.2.
     # (only needed in Gnome/Gtk 1.x, not Gnome/Gtk 2.x)
     AC_CHECK_X_LIB(capplet, capplet_widget_changes_are_immediate,
@@@@ -2345,7 +2357,7 @@@@ if test "$with_gtk" = yes; then
       if test "$have_gtk2" = yes; then
         GNOME_DATADIR=`$pkg_config --variable=prefix gtk+-2.0`
       else
-        GNOME_DATADIR=`$pkg_config --variable=prefix gtk+`
+        GNOME_DATADIR=`$gtk_config --prefix`
       fi
     else
       GNOME_DATADIR=`$gtk_config --prefix`
@@@@ -2743,7 +2755,7 @@@@ if test "$with_gl" = yes; then
     # link -lpthread after the Mesa libs (be they named -lGL or -lMesaGL.)
     #
     if test "$ac_have_mesa_gl" = yes; then
-      AC_CHECK_LIB(pthread, pthread_create, [GL_LIBS="-lpthread"], [],)
+      AC_CHECK_LIB(pthread, pthread_create, [GL_LIBS="-pthread"], [],)
     fi
 
 
@@@@ -3195,6 +3207,7 @@@@ if test "$with_gdk_pixbuf" = yes; then
   if test "$have_gdk_pixbuf" = yes; then
     INCLUDES="$INCLUDES $ac_gdk_pixbuf_config_cflags"
     XPM_LIBS="$ac_gdk_pixbuf_config_libs"
+    GTK_LIBS="$GTK_LIBS  $ac_gdk_pixbuf_config_libs"
     AC_DEFINE(HAVE_GDK_PIXBUF)
   else
     have_gdk_pixbuf2=no
@@@@ -3610,7 +3623,7 @@@@ fi
 # config files get installed.
 #
 if test -z "$HACK_CONF_DIR" ; then
-  if test -n "$GNOME_DATADIR" ; then
+  if test "x$with_gnome" == "xyes"; then
     HACK_CONF_DIR='${GNOME_DATADIR}/control-center/screensavers'
   else
     HACK_CONF_DIR='${prefix}/lib/xscreensaver/config'
@@@@ -3634,7 +3647,7 @@@@ elif test "$have_gtk" = yes; then
     if test "$have_gtk2" = yes; then
       GLADE_DATADIR=`$pkg_config --variable=prefix gtk+-2.0`
     else
-      GLADE_DATADIR=`$pkg_config --variable=prefix gtk+`
+      GLADE_DATADIR=`$gtk_config --prefix`
     fi
   else
     GLADE_DATADIR=`$gtk_config --prefix`
@@@@ -3655,7 +3668,7 @@@@ elif test "$have_gtk" = yes; then
     if test "$have_gtk2" = yes; then
       PO_DATADIR=`$pkg_config --variable=prefix gtk+-2.0`
     else
-      PO_DATADIR=`$pkg_config --variable=prefix gtk+`
+      PO_DATADIR=`$gtk_config --prefix`
     fi
   else
     PO_DATADIR=`$gtk_config --prefix`
@


1.3
log
@Update to 4.16.  More screensaver hacks... same autoconf hacks.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.2 2003/02/18 19:10:33 marcm Exp $
@


1.2
log
@Update to 4.06, mostly a bug fix release.

Add support for a gtk2 flavor.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.1 2002/08/27 02:46:17 lebel Exp $
--- configure.in.orig	Wed Oct 23 05:24:25 2002
+++ configure.in	Mon Jan 20 20:14:39 2003
@@@@ -1821,6 +1821,10 @@@@ AC_ARG_WITH(gtk,
d15 1
a15 1
@@@@ -1902,7 +1906,12 @@@@ if test "$with_gtk" = yes; then
d29 1
a29 1
@@@@ -1952,7 +1961,10 @@@@ if test "$with_gtk" = yes; then
d41 1
a41 1
@@@@ -2098,7 +2110,7 @@@@ if test "$with_gtk" = yes; then
d50 1
a50 1
@@@@ -2113,7 +2125,7 @@@@ if test "$with_gtk" = yes; then
d59 1
a59 1
@@@@ -2511,7 +2523,7 @@@@ if test "$with_gl" = yes; then
d68 9
a76 1
@@@@ -3326,7 +3338,7 @@@@ fi
d85 1
a85 1
@@@@ -3350,7 +3362,7 @@@@ elif test "$have_gtk" = yes; then
d94 1
a94 1
@@@@ -3371,7 +3383,7 @@@@ elif test "$have_gtk" = yes; then
@


1.1
log
@xscreensaver will "autodetect" gtk+1 or gtk+2 libs.  This patch forces
the use of gtk+1 libs even when gtk+2 libs are present.  A FLAVOR for
gtk+2 is pending, and eventually gtk+2 will replace gtk+ as the preferred
toolkit for xscreensaver.

Bump package version.  Marc Matteo <marcm@@lectroid.net> is taking over
maintainership.
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.in.orig	Tue Jun 11 02:02:00 2002
+++ configure.in	Tue Aug 20 20:34:13 2002
@@@@ -1823,6 +1823,10 @@@@ AC_ARG_WITH(gtk,
d15 1
a15 1
@@@@ -1904,7 +1908,12 @@@@ if test "$with_gtk" = yes; then
d29 1
a29 1
@@@@ -1953,7 +1962,10 @@@@ if test "$with_gtk" = yes; then
d41 54
@

