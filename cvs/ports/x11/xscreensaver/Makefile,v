head	1.93;
access;
symbols
	OPENBSD_6_2:1.93.0.2
	OPENBSD_6_2_BASE:1.93
	OPENBSD_6_1:1.90.0.2
	OPENBSD_6_1_BASE:1.90
	OPENBSD_6_0:1.89.0.2
	OPENBSD_6_0_BASE:1.89
	OPENBSD_5_9:1.86.0.2
	OPENBSD_5_9_BASE:1.86
	OPENBSD_5_8:1.85.0.4
	OPENBSD_5_8_BASE:1.85
	OPENBSD_5_7:1.84.0.2
	OPENBSD_5_7_BASE:1.84
	OPENBSD_5_6:1.82.0.2
	OPENBSD_5_6_BASE:1.82
	OPENBSD_5_5:1.80.0.2
	OPENBSD_5_5_BASE:1.80
	OPENBSD_5_4:1.78.0.2
	OPENBSD_5_4_BASE:1.78
	OPENBSD_5_3:1.76.0.2
	OPENBSD_5_3_BASE:1.76
	OPENBSD_5_2:1.73.0.4
	OPENBSD_5_2_BASE:1.73
	OPENBSD_5_1_BASE:1.73
	OPENBSD_5_1:1.73.0.2
	OPENBSD_5_0:1.70.0.4
	OPENBSD_5_0_BASE:1.70
	OPENBSD_4_9:1.70.0.2
	OPENBSD_4_9_BASE:1.70
	OPENBSD_4_8:1.62.0.2
	OPENBSD_4_8_BASE:1.62
	OPENBSD_4_7:1.59.0.2
	OPENBSD_4_7_BASE:1.59
	OPENBSD_4_6:1.54.0.4
	OPENBSD_4_6_BASE:1.54
	OPENBSD_4_5:1.54.0.2
	OPENBSD_4_5_BASE:1.54
	OPENBSD_4_4:1.47.0.2
	OPENBSD_4_4_BASE:1.47
	OPENBSD_4_3:1.46.0.2
	OPENBSD_4_3_BASE:1.46
	OPENBSD_4_2:1.43.0.2
	OPENBSD_4_2_BASE:1.43
	OPENBSD_4_1:1.41.0.2
	OPENBSD_4_1_BASE:1.41
	OPENBSD_4_0:1.34.0.2
	OPENBSD_4_0_BASE:1.34
	OPENBSD_3_9:1.33.0.2
	OPENBSD_3_9_BASE:1.33
	OPENBSD_3_8:1.29.0.2
	OPENBSD_3_8_BASE:1.29
	OPENBSD_3_7:1.28.0.2
	OPENBSD_3_7_BASE:1.28
	OPENBSD_3_6:1.25.0.2
	OPENBSD_3_6_BASE:1.25
	OPENBSD_3_5:1.22.0.2
	OPENBSD_3_5_BASE:1.22
	OPENBSD_3_4:1.18.0.4
	OPENBSD_3_4_BASE:1.18
	OPENBSD_3_3:1.18.0.2
	OPENBSD_3_3_BASE:1.18
	OPENBSD_3_2:1.17.0.2
	OPENBSD_3_2_BASE:1.17
	OPENBSD_3_1:1.13.0.2
	OPENBSD_3_1_BASE:1.13
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	lebel_2001-Jun-20:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.93
date	2017.07.14.11.36.43;	author ajacoutot;	state Exp;
branches;
next	1.92;
commitid	hSUamErVmGMsUFaN;

1.92
date	2017.07.07.10.10.17;	author sthen;	state Exp;
branches;
next	1.91;
commitid	QnzAfhUNldMfjwAD;

1.91
date	2017.05.08.22.23.35;	author schwarze;	state Exp;
branches;
next	1.90;
commitid	B91AVGPsIiMRfveh;

1.90
date	2016.11.01.13.56.30;	author sthen;	state Exp;
branches;
next	1.89;
commitid	O2gphI2mpyoyVfm2;

1.89
date	2016.07.09.11.47.56;	author sthen;	state Exp;
branches;
next	1.88;
commitid	FBiNAImfXJ61x456;

1.88
date	2016.05.27.12.48.16;	author sthen;	state Exp;
branches;
next	1.87;
commitid	Z15vdeIO6zqEqi1o;

1.87
date	2016.05.12.11.36.48;	author sthen;	state Exp;
branches;
next	1.86;
commitid	4scoMPT7HfnwFy7M;

1.86
date	2015.10.31.22.58.16;	author ajacoutot;	state Exp;
branches;
next	1.85;
commitid	ZJyBkifCpTKHz6zb;

1.85
date	2015.07.25.22.34.46;	author ajacoutot;	state Exp;
branches;
next	1.84;
commitid	MQV2yT69YYhSabUf;

1.84
date	2014.10.27.20.55.50;	author landry;	state Exp;
branches;
next	1.83;
commitid	HTfcs3yInElv0x24;

1.83
date	2014.10.08.12.21.55;	author dcoppa;	state Exp;
branches;
next	1.82;
commitid	o414TtsvRgqalSat;

1.82
date	2014.07.21.20.11.37;	author zhuk;	state Exp;
branches;
next	1.81;
commitid	lbV6HbgkVcwJ40Wv;

1.81
date	2014.07.10.07.40.35;	author ajacoutot;	state Exp;
branches;
next	1.80;
commitid	LjfvubYamrtD5vFX;

1.80
date	2013.11.15.15.37.57;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2013.08.06.19.12.32;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2013.06.01.19.57.34;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2013.03.11.11.46.19;	author espie;	state Exp;
branches;
next	1.76;

1.76
date	2013.01.18.15.30.34;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2012.09.02.10.04.22;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2012.09.02.09.36.55;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2012.01.08.15.36.26;	author dcoppa;	state Exp;
branches;
next	1.72;

1.72
date	2011.10.12.06.55.56;	author espie;	state Exp;
branches;
next	1.71;

1.71
date	2011.09.15.08.31.16;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2011.01.14.18.58.37;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2010.12.06.17.37.59;	author jasper;	state Exp;
branches;
next	1.68;

1.68
date	2010.11.22.08.37.06;	author espie;	state Exp;
branches;
next	1.67;

1.67
date	2010.10.24.21.15.36;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2010.10.19.08.14.01;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2010.10.11.08.19.59;	author jasper;	state Exp;
branches;
next	1.64;

1.64
date	2010.10.01.07.15.43;	author landry;	state Exp;
branches;
next	1.63;

1.63
date	2010.09.30.07.46.43;	author landry;	state Exp;
branches;
next	1.62;

1.62
date	2010.07.30.22.25.32;	author naddy;	state Exp;
branches;
next	1.61;

1.61
date	2010.07.16.09.58.09;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2010.04.15.09.16.07;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2009.12.21.20.46.03;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2009.11.28.10.49.49;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2009.08.20.07.03.15;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2009.08.12.17.30.12;	author kili;	state Exp;
branches;
next	1.55;

1.55
date	2009.08.11.08.42.09;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2008.12.28.18.41.20;	author ajacoutot;	state Exp;
branches
	1.54.4.1;
next	1.53;

1.53
date	2008.12.28.15.45.31;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2008.11.29.11.29.07;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2008.11.04.15.28.41;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2008.11.03.23.18.41;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2008.10.27.19.49.39;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2008.08.20.13.30.55;	author jasper;	state Exp;
branches;
next	1.47;

1.47
date	2008.03.17.18.59.39;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2007.12.16.14.09.25;	author jasper;	state Exp;
branches;
next	1.45;

1.45
date	2007.12.15.22.37.37;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2007.11.08.18.10.17;	author jasper;	state Exp;
branches;
next	1.43;

1.43
date	2007.07.18.11.26.30;	author jasper;	state Exp;
branches;
next	1.42;

1.42
date	2007.05.18.19.11.37;	author martynas;	state Exp;
branches;
next	1.41;

1.41
date	2007.01.16.10.11.53;	author bernd;	state Exp;
branches;
next	1.40;

1.40
date	2007.01.04.20.19.55;	author steven;	state Exp;
branches;
next	1.39;

1.39
date	2006.12.16.12.22.37;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2006.11.09.08.27.51;	author dim;	state Exp;
branches;
next	1.37;

1.37
date	2006.11.03.22.44.02;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2006.09.18.12.23.06;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2006.09.18.10.52.10;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2006.06.13.13.41.20;	author bernd;	state Exp;
branches;
next	1.33;

1.33
date	2006.01.20.21.10.24;	author steven;	state Exp;
branches;
next	1.32;

1.32
date	2005.11.15.09.21.52;	author wilfried;	state Exp;
branches;
next	1.31;

1.31
date	2005.11.14.14.41.49;	author wilfried;	state Exp;
branches;
next	1.30;

1.30
date	2005.09.04.19.53.33;	author aanriot;	state Exp;
branches;
next	1.29;

1.29
date	2005.06.03.05.38.32;	author marcm;	state Exp;
branches;
next	1.28;

1.28
date	2004.12.18.15.03.34;	author alek;	state Exp;
branches;
next	1.27;

1.27
date	2004.12.17.15.03.18;	author alek;	state Exp;
branches;
next	1.26;

1.26
date	2004.10.05.14.15.22;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2004.08.10.11.16.44;	author xsa;	state Exp;
branches;
next	1.24;

1.24
date	2004.06.24.16.23.37;	author marcm;	state Exp;
branches;
next	1.23;

1.23
date	2004.04.02.19.07.05;	author sturm;	state Exp;
branches;
next	1.22;

1.22
date	2004.03.12.18.03.17;	author pvalchev;	state Exp;
branches;
next	1.21;

1.21
date	2004.03.04.17.49.26;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2004.03.02.07.57.21;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2003.10.08.17.13.19;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2003.02.18.19.10.33;	author marcm;	state Exp;
branches;
next	1.17;

1.17
date	2002.09.19.06.42.00;	author marcm;	state Exp;
branches;
next	1.16;

1.16
date	2002.09.14.22.41.03;	author marcm;	state Exp;
branches;
next	1.15;

1.15
date	2002.08.27.02.46.17;	author lebel;	state Exp;
branches;
next	1.14;

1.14
date	2002.06.26.02.36.03;	author lebel;	state Exp;
branches;
next	1.13;

1.13
date	2002.03.27.02.53.59;	author lebel;	state Exp;
branches;
next	1.12;

1.12
date	2002.03.27.01.28.27;	author lebel;	state Exp;
branches;
next	1.11;

1.11
date	2002.03.26.21.51.41;	author lebel;	state Exp;
branches;
next	1.10;

1.10
date	2002.03.23.01.38.29;	author lebel;	state Exp;
branches;
next	1.9;

1.9
date	2002.01.26.23.59.49;	author lebel;	state Exp;
branches;
next	1.8;

1.8
date	2002.01.09.21.14.44;	author lebel;	state Exp;
branches;
next	1.7;

1.7
date	2001.11.21.19.35.44;	author lebel;	state Exp;
branches;
next	1.6;

1.6
date	2001.11.01.21.18.36;	author wilfried;	state Exp;
branches;
next	1.5;

1.5
date	2001.10.29.02.23.30;	author lebel;	state Exp;
branches;
next	1.4;

1.4
date	2001.10.24.14.16.13;	author lebel;	state Exp;
branches;
next	1.3;

1.3
date	2001.10.17.15.57.22;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.07.18.10.59.01;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.20.19.16.45;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.06.20.19.16.45;	author lebel;	state Exp;
branches;
next	;

1.54.4.1
date	2009.11.12.02.29.27;	author william;	state Exp;
branches;
next	;


desc
@@


1.93
log
@Stop creating dot.desktop files; iirc it was needed during the GNOME 2
ages but is now useless and conflicts with mate-screensaver.

conflict reported by espie@@
@
text
@# $OpenBSD: Makefile,v 1.92 2017/07/07 10:10:17 sthen Exp $

COMMENT=		screen saver and locker for the X Window System

DISTNAME=		xscreensaver-5.37
REVISION=		0

CATEGORIES=		x11

HOMEPAGE=		http://www.jwz.org/xscreensaver/

# After updating this port, remember to make update-plist in
# x11/kde/artwork3 and x11/kde4/artwork, too.

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += GL GLU ICE SM X11 Xcomposite Xcursor Xdamage Xext Xfixes
WANTLIB += Xft Xi Xinerama Xmu Xpm Xrandr Xrender Xt Xxf86misc
WANTLIB += Xxf86vm atk-1.0 c cairo fontconfig freetype gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gdk_pixbuf_xlib-2.0 gio-2.0 glade-2.0
WANTLIB += gle glib-2.0 gmodule-2.0 gobject-2.0 gtk-x11-2.0 intl
WANTLIB += jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0 pthread
WANTLIB += util xml2 z

MASTER_SITES=		${HOMEPAGE}

MODULES=		textproc/intltool

RUN_DEPENDS=		devel/desktop-file-utils

LIB_DEPENDS=		devel/libglade2 \
			graphics/gdk-pixbuf2 \
			graphics/gle

# ${FILESDIR}/migrate-xscreensaver-config.sh needs xsltproc
BUILD_DEPENDS +=	textproc/libxslt

# see pre-configure
BUILD_DEPENDS +=	devel/xdg-utils
RUN_DEPENDS +=		devel/xdg-utils

USE_GMAKE=		Yes
NO_TEST=		Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--with-hackdir="${PREFIX}/libexec/xscreensaver" \
			--with-x-app-defaults="${PREFIX}/lib/X11/app-defaults" \
			--without-pam
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

FAKE_FLAGS=		install_prefix=${WRKINST}

pre-configure:
	perl -pi -e 's,gnome-open,xdg-open,g' ${WRKSRC}/configure

post-install:
# remove conflicts (misc/deco, games/circuit)
.for i in deco circuit
	mv ${PREFIX}/man/man6/$i.6 ${PREFIX}/man/man6/xscreensaver-$i.6
.endfor

.include <bsd.port.mk>
@


1.92
log
@update to xscreensaver-5.37
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2017/05/08 22:23:35 schwarze Exp $
d6 1
a62 11

# create dot.desktop files from xscreensaver xml files for use
# by freedesktop compliant screensavers
	cp ${FILESDIR}/migrate-xscreensaver-config.sh ${WRKSRC}/hacks/config
	cp ${FILESDIR}/xscreensaver-config.xsl ${WRKSRC}/hacks/config
	cd ${WRKSRC}/hacks/config && \
		for i in ${WRKSRC}/hacks/config/*.xml; do \
			/bin/sh migrate-xscreensaver-config.sh $${i} ; done
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/screensavers/
	${INSTALL_DATA} ${WRKSRC}/hacks/config/*.desktop \
		${PREFIX}/share/applications/screensavers/
@


1.91
log
@No relevant formatting differences, mandoc even looks better in a
number of respects, so drop USE_GROFF.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2016/11/01 13:56:30 sthen Exp $
d5 1
a5 2
DISTNAME=		xscreensaver-5.36
REVISION=		0
@


1.90
log
@update to xscreensaver-5.36
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2016/07/09 11:47:56 sthen Exp $
d6 1
a43 1
USE_GROFF=		Yes
@


1.89
log
@deconflict one of xscreensaver's manpages with games/circuit, and fix typo
with the previous deconflict renaming.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2016/05/27 12:48:16 sthen Exp $
d5 1
a5 2
DISTNAME=		xscreensaver-5.35
REVISION=		0
@


1.88
log
@update to xscreensaver-5.35
no plist change in x11/kde/artwork3 and x11/kde4/artwork
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2016/05/12 11:36:48 sthen Exp $
d6 1
d60 4
a63 2
# remove conflict on misc/deco
	mv ${PREFIX}/man/man6/deco.6 ${PREFIX}/man/man6/xscrensaver-deco.6
@


1.87
log
@use getpwnam_shadow to unbreak, from Gregor Best
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2015/10/31 22:58:16 ajacoutot Exp $
d5 1
a5 2
DISTNAME=		xscreensaver-5.34
REVISION=		0
d12 1
a12 1
# x11/kde/artwork and x11/kde4/artwork, too.
d21 3
a23 3
WANTLIB += gle glib-2.0 gmodule-2.0 gobject-2.0 gtk-x11-2.0 jpeg
WANTLIB += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pthread util
WANTLIB += xml2 z
d27 1
a27 2
MODULES=		devel/gettext \
			textproc/intltool
@


1.86
log
@Update to xscreensaver-5.34.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2015/07/25 22:34:46 ajacoutot Exp $
d6 1
@


1.85
log
@Update to xscreensaver-5.33.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/10/27 20:55:50 landry Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.33
@


1.84
log
@Dont hardcode gnome-terminal to display the manpage, fallback to xterm.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/10/08 12:21:55 dcoppa Exp $
d5 1
a5 2
DISTNAME=		xscreensaver-5.30
REVISION=		0
d18 6
a23 5
WANTLIB += Xi Xinerama Xmu Xpm Xrandr Xrender Xt Xxf86misc Xxf86vm
WANTLIB += atk-1.0 c cairo fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB += gdk_pixbuf_xlib-2.0 gio-2.0 glade-2.0 gle glib-2.0
WANTLIB += gmodule-2.0 gobject-2.0 gtk-x11-2.0 jpeg m pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pthread util xml2 z
@


1.83
log
@
Update to xscreensaver-5.30

OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/07/21 20:11:37 zhuk Exp $
d6 1
@


1.82
log
@Add a note about updating KDE artwork packages on xscreensaver update.

okay sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2014/07/10 07:40:35 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.29
@


1.81
log
@Update to xscreensaver-5.29.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/11/15 15:37:57 sthen Exp $
d10 3
@


1.80
log
@update xscreensaver, ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/08/06 19:12:32 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.23
d48 1
a48 2
			CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib -liconv -lintl"
d50 1
a50 5
# Create desktop files from xscreensaver xml files for use by
# freedesktop compliant screensavers.
post-extract:
	cp ${FILESDIR}/migrate-xscreensaver-config.sh ${WRKSRC}/hacks/config
	cp ${FILESDIR}/xscreensaver-config.xsl ${WRKSRC}/hacks/config
d56 7
a62 9
# remove conflict on games/circuit, misc/deco
	for i in circuit deco ; do \
		mv ${PREFIX}/man/man6/$${i}.6 ${PREFIX}/man/man6/x$${i}.6 ; \
		mv ${PREFIX}/libexec/xscreensaver/$${i} \
			${PREFIX}/libexec/xscreensaver/x$${i} && \
		mv ${PREFIX}/share/xscreensaver/config/$${i}.xml \
			${PREFIX}/share/xscreensaver/config/x$${i}.xml && \
		mv ${WRKSRC}/hacks/config/$${i}.xml \
			${WRKSRC}/hacks/config/x$${i}.xml ; done
@


1.79
log
@Update to xscreensaver 5.22.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/06/01 19:57:34 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.22
@


1.78
log
@Update to xscreensaver-5.21.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/03/11 11:46:19 espie Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.21
@


1.77
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2013/01/18 15:30:34 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.20
d16 4
a19 6
WANTLIB += atk-1.0 c cairo expat fontconfig freetype gdk-x11-2.0
WANTLIB += gdk_pixbuf-2.0 gdk_pixbuf_xlib-2.0 gio-2.0 glade-2.0
WANTLIB += gle glib-2.0 gmodule-2.0 gobject-2.0 gtk-x11-2.0 jpeg
WANTLIB += m pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png
WANTLIB += pthread pthread-stubs util xcb xcb-render xcb-shm xml2
WANTLIB += z
@


1.76
log
@Update to xscreensaver-5.20.
- explicitely disable PAM
- merge -data into -main; it makes no sense to split them anymore
- re-add popsquares as it doesn't conflict with gnome-screensaver anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2012/09/02 10:04:22 ajacoutot Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d43 1
a43 1
NO_REGRESS=		Yes
@


1.75
log
@Update to xscreensaver-5.19.

from Azwaw OUSADOU with some tweaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2012/09/02 09:36:55 ajacoutot Exp $
d3 1
a3 2
COMMENT-main=		screen saver and locker for the X Window System
COMMENT-data=		graphical demos (savers) for screensavers
d5 1
a5 4
V=			5.19
DISTNAME=		xscreensaver-${V}
PKGNAME-main=		${DISTNAME}
PKGNAME-data=		xscreensaver-data-${V}
d17 8
a24 15
MULTI_PACKAGES=	-main -data

WANTLIB=	GL GLU ICE SM X11 Xext Xmu Xpm Xt Xxf86vm c glib-2.0 \
		gmodule-2.0 gobject-2.0 m pthread

WANTLIB-main=	${WANTLIB} Xcomposite Xcursor Xdamage Xfixes \
		Xi Xinerama Xrandr Xrender Xxf86misc atk-1.0 cairo \
		expat fontconfig freetype gdk-x11-2.0 gdk_pixbuf-2.0 \
		gdk_pixbuf_xlib-2.0 gio-2.0 gtk-x11-2.0 jpeg \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png \
		pthread-stubs xcb xml2 z xcb-render glade-2.0 \
		xcb-shm

WANTLIB-data=	${WANTLIB} jpeg util gdk_pixbuf-2.0 gdk_pixbuf_xlib-2.0 \
		gle
d31 1
a31 8
# note that we don't need desktop-file-utils for the -data subpackage
# because the desktop files it installs are under a subdirectory of
# ${LOCALBASE}/share/applications/
RUN_DEPENDS-main=	devel/desktop-file-utils \
			x11/xscreensaver,-data

LIB_DEPENDS-main=	${MODGETTEXT_LIB_DEPENDS} \
			devel/libglade2
d33 1
a33 1
LIB_DEPENDS-data=	${MODGETTEXT_LIB_DEPENDS} \
d42 1
a42 1
RUN_DEPENDS-main +=	devel/xdg-utils
d50 2
a51 1
			--with-x-app-defaults="${PREFIX}/lib/X11/app-defaults"
d56 2
a77 2
# conflict with x11/gnome/screensaver and is not needed by xscreensaver per se
	rm ${WRKSRC}/hacks/config/popsquares.desktop
@


1.74
log
@Remove the -gle subpackage now that gle has a proper license.

based on an original diff from Azwaw OUSADOU
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2012/01/08 15:36:26 dcoppa Exp $
d6 1
a6 1
V=			5.15
a10 3
REVISION-main=		0
REVISION-data=		0

a41 3
# ${FILESDIR}/migrate-xscreensaver-config.sh needs xsltproc
BUILD_DEPENDS=		textproc/libxslt

d55 7
d76 3
@


1.73
log
@Update to xscreensaver-5.15.

Ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/10/12 06:55:56 espie Exp $
a4 1
COMMENT-gle=		OpenGL Extrusion library support for screensaver-data
d10 3
a12 1
PKGNAME-gle=		xscreensaver-gle-${V}
d24 1
a24 1
MULTI_PACKAGES=	-main -data -gle
d27 1
a27 1
		gmodule-2.0 gobject-2.0 m pthread gthread-2.0
d29 1
a29 1
WANTLIB-main=	${WANTLIB} Xau Xcomposite Xcursor Xdamage Xdmcp Xfixes \
d35 1
a35 1
		drm xcb-shm
d38 1
a38 1
		png z
d58 2
a59 1
			graphics/gdk-pixbuf2
d62 1
a62 1
USE_GROFF =		Yes
d66 1
a66 1
CONFIGURE_ARGS+=	--with-hackdir="${PREFIX}/libexec/xscreensaver" \
d68 1
a68 1
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include" \
a70 18

# License issues with graphics/gle necessitate this
PSEUDO_FLAVORS=		no_gle
FLAVOR?=		no_gle

.include <bsd.port.arch.mk>

LIB_DEPENDS-gle=	${MODGETTEXT_LIB_DEPENDS} \
			graphics/gle \
			x11/gtk+2
RUN_DEPENDS-gle=	${BUILD_PKGPATH},-data
WANTLIB-gle=		${WANTLIB} gle gdk_pixbuf-2.0 gdk_pixbuf_xlib-2.0

.if ${BUILD_PACKAGES:M-gle}
CONFIGURE_ARGS+=	--with-gle
.else
CONFIGURE_ARGS+=	--without-gle
.endif
@


1.72
log
@use bsd.port.arch.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/09/15 08:31:16 ajacoutot Exp $
d7 1
a7 1
V=			5.12
a11 3

REVISION-main=		0
REVISION-data=		0
@


1.71
log
@This patch is not needed anymore after the move to GNOME 3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/01/14 18:58:37 ajacoutot Exp $
d26 1
a26 1
MULTI_PACKAGES=	-main -data
d77 2
a78 2
.if !${FLAVOR:L:Mno_gle}
MULTI_PACKAGES+=	-gle
d82 1
a82 1
RUN_DEPENDS-gle=	x11/xscreensaver,-data
d84 2
@


1.70
log
@Remove extrusion from -data, it belongs in -gle only.

reported by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/12/06 17:37:59 jasper Exp $
d13 1
@


1.69
log
@- update xscreensaver to 5.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/11/22 08:37:06 espie Exp $
d12 2
@


1.68
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/10/24 21:15:36 ajacoutot Exp $
d7 1
a7 1
V=			5.11
a9 1
REVISION-main=		1
a10 1
REVISION-data=		3
a11 1
REVISION-gle=		1
d33 2
a34 2
		pthread-stubs xcb xml2 z xcb-render xcb-render-util \
		glade-2.0
d36 2
a37 1
WANTLIB-data=	${WANTLIB} jpeg util gdk_pixbuf-2.0 gdk_pixbuf_xlib-2.0
d68 1
a68 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.67
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/10/19 08:14:01 espie Exp $
d47 1
a47 1
BUILD_DEPENDS=		::textproc/libxslt
d52 2
a53 2
RUN_DEPENDS-main=	:desktop-file-utils-*:devel/desktop-file-utils \
			::x11/xscreensaver,-data
d56 1
a56 1
			::devel/libglade2
d59 1
a59 1
			::graphics/gdk-pixbuf2
d62 1
a62 1
USE_GROFF =	Yes
d79 3
a81 3
			::graphics/gle \
			::x11/gtk+2
RUN_DEPENDS-gle=	:xscreensaver-data-*:x11/xscreensaver,-data
@


1.66
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/10/11 08:19:59 jasper Exp $
a60 1
USE_X11=		Yes
@


1.65
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/10/01 07:15:43 landry Exp $
d63 1
@


1.64
log
@Change LIB_DEPENDS-data for graphics/gdk-pixbuf2 instead of x11/gtk+2,
bump REVISION-data. Will make ports depending on -data happier.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/09/30 07:46:43 landry Exp $
d10 1
a10 1
REVISION-main=		0
d34 1
a34 1
		gdk_pixbuf_xlib-2.0 gio-2.0 glitz gtk-x11-2.0 jpeg \
@


1.63
log
@Bump -data & -gle after gtk+2/gdk-pixbuf split
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/07/30 22:25:32 naddy Exp $
d12 1
a12 1
REVISION-data=		2
d59 1
a59 1
			::x11/gtk+2
@


1.62
log
@remove duplicate files from -data that are covered by -gle; ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/07/16 09:58:09 ajacoutot Exp $
d12 1
a12 1
REVISION-data=		1
d14 1
a14 1
REVISION-gle=		0
@


1.61
log
@Remove myself from MAINTAINER.
Use REVISION and new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/04/15 09:16:07 ajacoutot Exp $
d12 1
a12 1
REVISION-data=		0
@


1.60
log
@Bugfix update to xscreensaver-5.11.
 * New versions of photopile, strange.
 * Fixed flicker in pipes, cubestorm, and noof.
 * Minor fixes to circuit, polyhedra, tangram, gears, pinion, substrate, xanalogtv.
 * Fixed some leaks in xanalogtv and apple2.
 * Better seeding of the RNG.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/12/21 20:46:03 ajacoutot Exp $
d10 1
d12 1
d14 1
a19 2
MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

d29 1
a29 1
		gmodule-2.0 gobject-2.0 m pthread
d36 2
a37 1
		pthread-stubs xcb xml2 z xcb-render xcb-render-util
d39 1
a39 1
WANTLIB-data=	${WANTLIB} jpeg util
d56 1
a56 1
			glade-2.0::devel/libglade2
d59 1
a59 1
			gdk_pixbuf-2.0,gdk_pixbuf_xlib-2.0::x11/gtk+2
d79 2
a80 2
			gle.>=3::graphics/gle \
			gdk_pixbuf-2.0,gdk_pixbuf_xlib-2.0::x11/gtk+2
d82 1
a82 1
WANTLIB-gle=		${WANTLIB}
@


1.59
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.

prodded by espie@@
discussed with espie@@ sthen@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/11/28 10:49:49 ajacoutot Exp $
d7 1
a7 1
V=			5.10
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p0
d35 1
a35 1
		pthread-stubs xcb xml2 z
@


1.58
log
@Update to xscreensaver-5.10.

* Retired hypercube and hyperball, which are redundant with polytopes.
* New hack, rubikblocks.
* Fixed another potential RANDR crash.
* molecule now correctly displays PDB 3.2 files.
* Updates to mirrorblob, glhanoi, and sonar.
* Rewritten version of klein hack.
* New hack, surfaces, incorporating objects from old klein hack, plus new ones.
* Merged juggle and juggler3d hacks.
* Fixed intermittent failure in xscreensaver-command.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/08/20 07:03:15 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
@


1.57
log
@SECURITY
Fix local screen lock bypass vulnerability.
Debian bug #539699, from by David Fries.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/08/12 17:30:12 kili Exp $
d7 1
a7 1
V=			5.08
d9 3
a11 3
PKGNAME-main=		${DISTNAME}p1
PKGNAME-data=		xscreensaver-data-${V}p0
PKGNAME-gle=		xscreensaver-gle-${V}p1
@


1.56
log
@Move pthread-stubs and xcb to WANTLIB-main. Bump -data and -gle.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/08/11 08:42:09 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p0
@


1.55
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2008/12/28 18:41:20 ajacoutot Exp $
d10 2
a11 2
PKGNAME-data=		xscreensaver-data-${V}
PKGNAME-gle=		xscreensaver-gle-${V}p0
d28 1
a28 1
		gmodule-2.0 gobject-2.0 m pthread pthread-stubs xcb
d34 2
a35 1
		pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png xml2 z
@


1.54
log
@- update to xscreensaver-5.08
* new hack: photopile
* updates sonar, jigsaw, maze, m6502, hypnowheel, timetunnel, munch, and
  webcollage
* EXIF rotation support and RANDR fixes
* some old screen savers have been retired
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2008/12/28 15:45:31 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}
d11 1
a11 1
PKGNAME-gle=		xscreensaver-gle-${V}
d28 1
a28 1
		gmodule-2.0 gobject-2.0 m pthread
@


1.54.4.1
log
@MFC:

SECURITY FIX

Fix local screen lock bypass vulnerability.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2008/12/28 18:41:20 ajacoutot Exp $
d9 3
a11 3
PKGNAME-main=		${DISTNAME}p1
PKGNAME-data=		xscreensaver-data-${V}p0
PKGNAME-gle=		xscreensaver-gle-${V}p1
@


1.53
log
@- remove the unfinished bsd_auth support for now ; I got late on this and
I'd rather finish/modify it outside of the tree when I have more time.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2008/11/29 11:29:07 ajacoutot Exp $
d7 1
a7 1
V=			5.07
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p4
@


1.52
log
@- split xscreensaver into 3 subpackages:
* -main for the main xscreensaver binaries
* -data for the savers than can be shared by other screensavers (like
the soon-to-be-imported gnome-screensaver)
* -gle which is a migration of the no-no_gle FLAVOR
- create .desktop files from xscreensaver xml files for use by
freedesktop compliant screensavers (scripts from gnome-screensaver)
- take maintainership
- resolve old conflict with games/circuit

inputs from jasper@@, naddy@@ and sthen@@
ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2008/11/04 15:28:41 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		${DISTNAME}p3
a85 1
	cp ${FILESDIR}/passwd-bsd_auth.c ${WRKSRC}/driver/
@


1.51
log
@- return result in a more sensible way
- add first goo to be able to unlock screen as root without needing
setuid (wip: does not work yet)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2008/11/03 23:18:41 ajacoutot Exp $
d3 9
a11 1
COMMENT=		screen saver and locker for the X Window System
a12 2
DISTNAME=		xscreensaver-5.07
PKGNAME=		${DISTNAME}p2
d17 2
d25 12
a36 7
WANTLIB=	GL GLU ICE SM X11 Xau Xcomposite Xcursor Xdamage Xdmcp \
		Xext Xfixes Xi Xinerama Xmu Xpm Xrandr Xrender Xt \
		Xxf86misc Xxf86vm atk-1.0 c cairo expat fontconfig \
		freetype gdk-x11-2.0 gdk_pixbuf-2.0 \
		gdk_pixbuf_xlib-2.0 glib-2.0 glitz gmodule-2.0 \
		gobject-2.0 gtk-x11-2.0 jpeg m pango-1.0 \
		pangocairo-1.0 pangoft2-1.0 pixman-1 png pthread util xml2 z
d43 14
a56 2
RUN_DEPENDS=		:desktop-file-utils-*:devel/desktop-file-utils
LIB_DEPENDS=		glade-2.0::devel/libglade2
d70 1
a70 1
FLAVORS=		no_gle
d74 6
a79 1
LIB_DEPENDS+=		gle.>=3::graphics/gle
d87 2
d91 17
a107 6
# rename deco to xdeco, so it doesn't conflict with misc/deco
	mv ${PREFIX}/man/man6/deco.6 ${PREFIX}/man/man6/xdeco.6
	mv ${PREFIX}/libexec/xscreensaver/deco \
		${PREFIX}/libexec/xscreensaver/xdeco
	mv ${PREFIX}/share/xscreensaver/config/deco.xml \
		${PREFIX}/share/xscreensaver/config/xdeco.xml
@


1.50
log
@- remove calls to (un)block_sigchld as they induce some issues; I will
rework this better in the incoming days
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/10/27 19:49:39 ajacoutot Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
@


1.49
log
@- implement  bsd_auth(3) authentication ; benefits:
* no need to run xscreensaver setuid root anymore
* you can use whatever passwd backend you configured in login.conf(5)
  (kerberos, ldap...) to unlock the screen and not just local passwd

Sent upstream.

feedback from millert@@
"get it in" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/08/20 13:30:55 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
@


1.48
log
@- update xscreensaver to 5.07
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/03/17 18:59:39 ajacoutot Exp $
d6 1
d54 3
@


1.47
log
@- minor update to xscreensaver-5.05
- reorder dependencies

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/12/16 14:09:25 jasper Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.05
d22 1
a22 1
		pangocairo-1.0 pangoft2-1.0 png pthread util xml2 z
@


1.46
log
@- update xscreensaver to 5.04

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/12/15 22:37:37 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		xscreensaver-5.04
d17 6
a22 4
		Xext Xfixes Xi Xinerama Xmu Xpm Xrandr Xrender Xt Xxf86misc \
		Xxf86vm atk-1.0 c cairo expat fontconfig freetype glib-2.0 \
		glitz gmodule-2.0 gobject-2.0 jpeg m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 png pthread util z
d26 2
a27 1
MODULES=		devel/gettext
d30 1
a30 3
LIB_DEPENDS=		gdk-x11-2.0,gdk_pixbuf-2.0,gdk_pixbuf_xlib-2.0,gtk-x11-2.0::x11/gtk+2 \
			glade-2.0::devel/libglade2 \
			xml2.>=6::textproc/libxml
@


1.45
log
@- add update-desktop-database goo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/11/08 18:10:17 jasper Exp $
d5 1
a5 2
DISTNAME=		xscreensaver-5.03
PKGNAME=		${DISTNAME}p1
d55 2
a56 2
	@@mv ${PREFIX}/man/man6/deco.6 ${PREFIX}/man/man6/xdeco.6
	@@mv ${PREFIX}/libexec/xscreensaver/deco \
d58 1
a58 1
	@@mv ${PREFIX}/share/xscreensaver/config/deco.xml \
@


1.44
log
@fix wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/07/18 11:26:30 jasper Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
d27 1
@


1.43
log
@- update xscreensaver to 5.03
- fix WANTLIB
- add $OpenBSD$ to patch-configure and patch-hacks_deco_c
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/05/18 19:11:37 martynas Exp $
d6 1
d17 3
a19 3
WANTLIB=	GL GLU ICE SM X11 Xau Xcursor Xdmcp Xext Xfixes Xi \
		Xinerama Xmu Xpm Xrandr Xrender Xt Xxf86misc Xxf86vm \
		atk-1.0 c cairo expat fontconfig freetype glib-2.0 \
@


1.42
log
@update to 5.02; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/01/16 10:11:53 bernd Exp $
d3 1
a3 1
COMMENT=		"screen saver and locker for the X Window System"
d5 1
a5 1
DISTNAME=		xscreensaver-5.02
d16 5
a20 5
WANTLIB=		GL GLU ICE SM X11 Xext Xinerama Xmu Xrandr Xrender \
			Xt Xxf86misc Xxf86vm c jpeg m pthread util z \
			atk-1.0 fontconfig freetype Xpm pangocairo-1.0 \
			glib-2.0 gmodule-2.0 gobject-2.0 glitz png \
			pango-1.0 pangoft2-1.0 cairo
d37 3
a39 3
CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include"
CONFIGURE_ENV+=		CFLAGS="${CFLAGS} -I${LOCALBASE}/include"
CONFIGURE_ENV+=		LDFLAGS="-L${LOCALBASE}/lib"
d54 1
a54 1
	@@mv ${PREFIX}/man/man6/deco.6  ${PREFIX}/man/man6/xdeco.6
@


1.41
log
@circuit and xscreensaver both install a circuit.6 manpage.
Add @@conflict markers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/01/04 20:19:55 steven Exp $
d5 1
a5 2
DISTNAME=		xscreensaver-5.01
PKGNAME=		${DISTNAME}p2
@


1.40
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/12/16 12:22:37 espie Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p1
@


1.39
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/11/09 08:27:51 dim Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
d20 1
a20 1
			glib-2.0 gmodule-2.0 gobject-2.0 \
@


1.38
log
@Add missed `extrusion' hack when building with empty FLAVOR, and add
required @@mode annotation.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/11/03 22:44:02 jasper Exp $
a26 1
BUILD_DEPENDS=		:pkgconfig-*:devel/pkgconfig
@


1.37
log
@update xscreensaver to 5.01

ok kili mbalmer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/09/18 12:23:06 espie Exp $
d6 2
a7 1
CATEGORIES=     	x11
@


1.36
log
@zap .0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/09/18 10:52:10 espie Exp $
d5 1
a5 3
VERSION=		4.22
DISTNAME=		xscreensaver-${VERSION}
PKGNAME=		${DISTNAME}p3
d22 1
a22 1
MASTER_SITES=		http://www.jwz.org/xscreensaver/
d37 1
a37 1
			--mandir=${PREFIX}/man
d55 1
a55 1
	@@mv ${PREFIX}/man/man1/deco.1  ${PREFIX}/man/man1/xdeco.1
@


1.35
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/06/13 13:41:20 bernd Exp $
d20 3
a22 3
			atk-1.0.0.0 fontconfig freetype Xpm pangocairo-1.0.0.0 \
			glib-2.0.0.0 gmodule-2.0.0.0 gobject-2.0.0.0 \
			pango-1.0.0.0 pangoft2-1.0.0.0 cairo
d29 2
a30 2
LIB_DEPENDS=		gdk-x11-2.0.0.0,gdk_pixbuf-2.0.0.0,gdk_pixbuf_xlib-2.0.0.0,gtk-x11-2.0.0.0::x11/gtk+2 \
			glade-2.0.0.0::devel/libglade2 \
@


1.34
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2006/01/20 21:10:24 steven Exp $
d31 1
a31 1
			xml2.6::textproc/libxml
d49 1
a49 1
LIB_DEPENDS+=		gle.3::graphics/gle
@


1.33
log
@WANTLIB/gtk+2, sync PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/11/15 09:21:52 wilfried Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p2
d19 2
a20 2
			Xt Xft Xxf86misc Xxf86vm c jpeg m pthread util z \
			atk-1.0.0.0 fontconfig freetype Xpm pangox-1.0.0.0 \
d22 1
a22 1
			pango-1.0.0.0 pangoxft-1.0.0.0 pangoft2-1.0.0.0
@


1.32
log
@fix packages-specs brain fart from yesterday and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/11/14 14:41:49 wilfried Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p1
d19 2
a20 2
			Xt Xxf86misc Xxf86vm c jpeg m pthread util z \
			atk-1.0.0.0 cairo fontconfig freetype Xpm \
d22 1
a22 1
			pango-1.0.0.0 pangocairo-1.0.0.0 pangoft2-1.0.0.0
@


1.31
log
@fix wantlib + bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/09/04 19:53:33 aanriot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
d28 1
a28 1
BUILD_DEPENDS=		::devel/pkgconfig
@


1.30
log
@update to 4.22.

ok marcm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/06/03 05:38:32 marcm Exp $
d7 1
d20 3
a22 4
			Xft atk-1.0.0.0 fontconfig freetype Xpm \
			gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 glib-2.0.0.0 \
			gmodule-2.0.0.0 gobject-2.0.0.0 gtk-x11-2.0.0.0 \
			pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
d28 2
a29 2
BUILD_DEPENDS=		:pkgconfig-*:devel/pkgconfig
LIB_DEPENDS=		gdk_pixbuf_xlib-2.0.0.0::x11/gtk+2 \
@


1.29
log
@Update to 4.21, it works better with Gnome 2.10.  Also default to gtk2 and
remove gtk1 support entirely as it makes the port a lot simpler :).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/12/18 15:03:34 alek Exp $
d5 1
a5 1
VERSION=		4.21
d38 2
a39 1
CONFIGURE_ARGS+=	--with-hackdir="${PREFIX}/libexec/xscreensaver"
@


1.28
log
@Fix WANTLIB marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/12/17 15:03:18 alek Exp $
d5 1
a5 1
VERSION=		4.16
a10 2
MAINTAINER=		Marc Matteo <marcm@@openbsd.org>

d16 7
a22 2
WANTLIB=		GL GLU ICE SM X11 Xext Xinerama Xmu Xrandr Xrender Xss \
			Xt Xxf86misc Xxf86vm c jpeg m pthread util z
d28 4
a31 3
LIB_DEPENDS+=		xml2.6::textproc/libxml

MAKE_ENV+=		${CONFIGURE_ENV}
d37 1
a37 3
CONFIGURE_STYLE=	autoconf no-autoheader
AUTOCONF_VERSION=	2.57
AUTOCONF=		autoconf -I${LOCALBASE}/share/aclocal
a38 6
CONFIGURE_ARGS+=	--with-gl
CONFIGURE_ARGS+=	--with-xpm
CONFIGURE_ARGS+=	--without-gnome
CONFIGURE_ARGS+=	--with-zippy=/usr/games/fortune
CONFIGURE_ARGS+=	--without-kerberos
CONFIGURE_ARGS+=	--with-xml
d43 2
a44 1
FLAVORS=		no_gle gtk2
a53 15
.if ${FLAVOR:L:Mgtk2}
BUILD_DEPENDS+=		:pkgconfig-*:devel/pkgconfig
LIB_DEPENDS+=		gdk_pixbuf_xlib-2.0.0.0::x11/gtk+2 \
			glade-2.0.0.0::devel/libglade2
CONFIGURE_ARGS+=	--with-gtk2
WANTLIB+=		Xcursor Xft atk-1.0.0.0 fontconfig freetype \
			gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 glib-2.0.0.0 \
			gmodule-2.0.0.0 gobject-2.0.0.0 gtk-x11-2.0.0.0 \
			pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0
.else
CONFIGURE_ARGS+=	--with-pixbuf=${LOCALBASE}
LIB_DEPENDS+=		gdk_pixbuf.2,gdk_pixbuf_xlib.2::graphics/gdk-pixbuf,no_gnome
WANTLIB+=		tiff png Xi gdk glib gmodule gtk
.endif

d59 2
a60 6
	@@mv ${PREFIX}/lib/xscreensaver/config/deco.xml \
		${PREFIX}/lib/xscreensaver/config/xdeco.xml
# Need a pretty icon for the controlcenter
#	@@${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
#	@@${INSTALL_DATA} ${PREFIX}/share/xscreensaver/xscreensaver.xpm \
#		${PREFIX}/share/pixmaps/
@


1.27
log
@Add WANLIB markers, part one
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/10/05 14:15:22 naddy Exp $
d18 2
a19 5
WANTLIB=	GL GLU ICE SM X11 Xcursor Xext Xft Xinerama Xmu Xrandr Xrender \
		Xss Xt Xxf86misc Xxf86vm atk-1.0.0.0 c fontconfig freetype \
		gdk-x11-2.0.0.0 gdk_pixbuf-2.0.0.0 glib-2.0.0.0 \
		gmodule-2.0.0.0 gobject-2.0.0.0 gtk-x11-2.0.0.0 jpeg m \
		pango-1.0.0.0 pangox-1.0.0.0 pangoxft-1.0.0.0 pthread util z 
d62 4
d69 1
@


1.26
log
@don't rely on inter-library dependency; maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/08/10 11:16:44 xsa Exp $
d18 5
@


1.25
log
@
more new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2004/06/24 16:23:37 marcm Exp $
d33 1
@


1.24
log
@Update to 4.16.  More screensaver hacks... same autoconf hacks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2004/04/02 19:07:05 sturm Exp $
d21 1
a21 1
MODULES=		gettext
@


1.23
log
@explicitly depend on pkgconfig, needed to find gtk+2 and friends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/03/12 18:03:17 pvalchev Exp $
d5 1
a5 1
VERSION=		4.06
d32 1
a32 1
AUTOCONF_VERSION=	2.54
d60 2
a61 1
LIB_DEPENDS+=		gdk_pixbuf.2,gdk_pixbuf_xlib.2::graphics/gdk-pixbuf
d72 3
a74 3
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	@@${INSTALL_DATA} ${PREFIX}/share/xscreensaver/xscreensaver.xpm \
		${PREFIX}/share/pixmaps/
@


1.22
log
@make no_gle flavour default, since graphics/gle does not allow re-distribution
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2004/03/04 17:49:26 espie Exp $
d55 1
@


1.21
log
@explicitly tag no-autoheader some ports for which re-running it after autoconf
is a problem.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2004/03/02 07:57:21 brad Exp $
d45 1
a45 1
FLAVOR?=		
@


1.20
log
@AUTOCONF_NEW -> AUTOCONF_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/10/08 17:13:19 sturm Exp $
d31 1
a31 1
CONFIGURE_STYLE=	autoconf
@


1.19
log
@first bunch of license cleanup, some discussions about interpretation
during the release with pval@@

other categories will follow once they are finished
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/02/18 19:10:33 marcm Exp $
d32 1
a32 1
AUTOCONF_NEW=		Yes
@


1.18
log
@Update to 4.06, mostly a bug fix release.

Add support for a gtk2 flavor.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/06/26 02:36:03 lebel Exp $
d13 1
@


1.17
log
@Update my email address and kill off NEED_VERSION on my remaining ports.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/09/14 22:41:03 marcm Exp $
d5 1
a5 1
VERSION=		4.05
a6 1
PKGNAME=		xscreensaver-${VERSION}p1
d22 1
a22 2
LIB_DEPENDS+=		xml2.6::textproc/libxml \
			gdk_pixbuf.2,gdk_pixbuf_xlib.2::graphics/gdk-pixbuf
d41 1
a41 1
CONFIGURE_ENV+=		LDFLAGS="-L${LOCALBASE}/lib -pthread"
d43 1
a43 1
FLAVORS=		no_gle
d53 8
d68 4
@


1.16
log
@Add overlooked gdk_pixbuf LIB_DEPENDS.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/08/27 02:46:17 lebel Exp $
d12 1
a12 1
MAINTAINER=		Marc Matteo <marcm@@lectroid.net>
@


1.15
log
@xscreensaver will "autodetect" gtk+1 or gtk+2 libs.  This patch forces
the use of gtk+1 libs even when gtk+2 libs are present.  A FLAVOR for
gtk+2 is pending, and eventually gtk+2 will replace gtk+ as the preferred
toolkit for xscreensaver.

Bump package version.  Marc Matteo <marcm@@lectroid.net> is taking over
maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/06/26 02:36:03 lebel Exp $
d23 2
a24 1
LIB_DEPENDS+=		xml2.6::textproc/libxml
@


1.14
log
@update x11/xscreensaver to 4.05
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/03/27 02:53:59 lebel Exp $
d7 1
a8 1
NEED_VERSION=		1.487
d12 1
a12 1
MAINTAINER=		David Lebel <lebel@@openbsd.org>
d21 3
a23 3
# depends on XML (it needs both of them!)
LIB_DEPENDS+=		xml2.6::textproc/libxml xml.9::textproc/libxml1
CONFIGURE_ARGS+=	--with-xml
d25 1
a25 3
# gdk pixbuf
LIB_DEPENDS+=		gdk_pixbuf.2,gdk_pixbuf_xlib.2::graphics/gdk-pixbuf
CONFIGURE_ARGS+=	--with-pixbuf
a26 1
NO_REGRESS=		Yes
d29 4
a32 1
CONFIGURE_STYLE=	gnu
d39 4
a52 5

CONFIGURE_ENV+=		CPPFLAGS="-I${LOCALBASE}/include"
CONFIGURE_ENV+=		CFLAGS="${CFLAGS} -I${LOCALBASE}/include"
CONFIGURE_ENV+=		LDFLAGS="-L${LOCALBASE}/lib -pthread"
MAKE_ENV+=		${CONFIGURE_ENV}
@


1.13
log
@cleanup even more the dependencies. thanks to naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/03/27 01:28:27 lebel Exp $
d5 1
a5 1
VERSION=		4.02
d31 1
@


1.12
log
@- do a better job for deco and rename everything from deco to xdeco.
- re-arrange the dependencies and make sure everything is accounted for.
- remove the depreciated motif FLAVOR and default to gtk.
brad@@ found issues with deco and agreed with the rest of the modifications.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/03/26 21:51:41 lebel Exp $
d21 8
d43 1
a43 1
LIB_DEPENDS=		gle.3::graphics/gle
a47 15

LIB_DEPENDS+=		jpeg.62::graphics/jpeg
CONFIGURE_ARGS+=	--with-jpeg

# depends on XML (it needs both of them!)
LIB_DEPENDS+=		xml2.6::textproc/libxml xml.9::textproc/libxml1
CONFIGURE_ARGS+=	--with-xml

# gtk
CONFIGURE_ARGS+=	--with-gtk --without-motif
LIB_DEPENDS+=		gtk.1.2,gdk::x11/gtk+

# gdk pixbuf
LIB_DEPENDS+=		gdk_pixbuf.2,gdk_pixbuf_xlib.2::graphics/gdk-pixbuf
CONFIGURE_ARGS+=	--with-pixbuf
@


1.11
log
@fix conflict with misc/deco by renaming deco.1 to xdeco.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/03/23 01:38:29 lebel Exp $
d31 2
a32 2
FLAVORS=		gtk motif no_gle
FLAVOR?=		gtk
d41 8
a48 1
.if ${FLAVOR:L:Mgtk} && !${FLAVOR:L:Mmotif}
d50 5
a54 11
LIB_DEPENDS+=		gtk.1.2,gdk::x11/gtk+ xml.9::textproc/libxml1
CONFIGURE_ENV=CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/gnome-xml"
CONFIGURE_ENV+=CFLAGS="${CFLAGS} -I${LOCALBASE}/include -I${LOCALBASE}/include/gnome-xml"
.elif ${FLAVOR:L:Mmotif} && !${FLAVOR:L:Mgtk}
CONFIGURE_ENV+= 	MOTIFHOME=${X11BASE}
CONFIGURE_ARGS+=	--with-motif --without-gtk
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include"
USE_MOTIF=		any
.else
ERRORS+=		"Fatal: Please choose either the gtk or motif flavor"
.endif
d56 2
d62 6
a67 2
# rename this man page so it doesn't conflict with misc/deco
	@@mv ${PREFIX}/man/man1/deco.1 ${PREFIX}/man/man1/xdeco.1
@


1.10
log
@update x11/xscreensaver to 4.02
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/01/26 23:59:49 lebel Exp $
d57 4
@


1.9
log
@update xscreensaver to 4.00.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/01/09 21:14:44 lebel Exp $
d5 1
a5 1
VERSION=		4.00
@


1.8
log
@add new FLAVOR 'no_gle' to build xscreensaver without GLE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2001/11/21 19:35:44 lebel Exp $
d5 1
a5 1
VERSION=		3.34
d24 1
a24 1
CONFIGURE_ARGS+=	--enable-subdir="${PREFIX}/libexec/xscreensaver"
a29 2
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib -pthread"
d43 3
a45 1
LIB_DEPENDS+=		gtk.1.2,gdk::x11/gtk+
d49 1
d54 3
@


1.7
log
@update x11/xscreensaver to 3.34
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/11/01 21:18:36 wilfried Exp $
a13 2
LIB_DEPENDS=		gle.3::graphics/gle

a24 1
CONFIGURE_ARGS+=	--with-gle
d33 1
a33 1
FLAVORS=		gtk motif
d36 8
a43 1
.if ${FLAVOR:L} == "gtk"
d46 1
a46 1
.elif ${FLAVOR:L} == "motif"
@


1.6
log
@revert gtk module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/10/29 02:23:30 lebel Exp $
d5 1
a5 1
VERSION=		3.33
@


1.5
log
@use gtk module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/10/24 14:16:13 lebel Exp $
d41 1
a41 1
MODULES+=		gtk
@


1.4
log
@NO_REGRESS=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/10/17 15:57:22 espie Exp $
d8 1
a8 1
NEED_VERSION=		1.474
d41 1
a41 1
LIB_DEPENDS+=		gtk.1.2,gdk::x11/gtk+
@


1.3
log
@Avoid gnome.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/07/18 10:59:01 naddy Exp $
d23 1
@


1.2
log
@- Make use of new bsd.port.mk feature and replace error reporting through
  .BEGIN with ERRORS.
- Sync NEED_VERSION accordingly.
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/06/20 19:16:45 lebel Exp $
d8 1
a8 1
NEED_VERSION=		1.422
d29 1
d40 1
a40 1
LIB_DEPENDS+=		gtk.1.2::x11/gtk+
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d8 1
a8 1
NEED_VERSION=		1.402
d45 1
a45 3
.BEGIN:
	@@echo "Please choose either the gtk or motif flavor"
	@@exit 1
@


1.1.1.1
log
@The xscreensaver program waits until the keyboard and mouse have
been idle for a period, and then runs a graphics demo chosen at
random. It turns off as soon as there is any mouse or keyboard
activity. It can also lock the screen (immediately, after a longer
idle period, or on demand.) xscreensaver consists of two parts:
xscreensaver itself, the (the ``driver'' or ``daemon''), which
detects idleness and does locking; and the many graphics demos that
are launched by xscreensaver.
 
Any X program that can draw on the root window can be used with
xscreensaver, regardless of how that program is written, or what
language it is written in, or what libraries it uses. The xscreensaver
daemon takes care of detecting when the user is idle, locking, and
checking passwords and all the other book-keeping; all the other
programs need to do is draw.
 
The benefit that xscreensaver has over the combination of the xlock
and xautolock programs is the ease with which new graphics hacks
can be installed.  You don't need to recompile (or even re-run) the
xscreensaver program to add a new display mode, you just change a
config file.
 
WWW: http://www.jwz.org/xscreensaver/

@
text
@@
