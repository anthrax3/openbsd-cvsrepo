head	1.57;
access;
symbols
	OPENBSD_6_1:1.54.0.2
	OPENBSD_6_1_BASE:1.54
	OPENBSD_6_0:1.53.0.2
	OPENBSD_6_0_BASE:1.53
	OPENBSD_5_9:1.51.0.2
	OPENBSD_5_9_BASE:1.51
	OPENBSD_5_8:1.50.0.6
	OPENBSD_5_8_BASE:1.50
	OPENBSD_5_7:1.50.0.2
	OPENBSD_5_7_BASE:1.50
	OPENBSD_5_6:1.49.0.2
	OPENBSD_5_6_BASE:1.49
	OPENBSD_5_5:1.47.0.4
	OPENBSD_5_5_BASE:1.47
	OPENBSD_5_4:1.47.0.2
	OPENBSD_5_4_BASE:1.47
	OPENBSD_5_3:1.44.0.2
	OPENBSD_5_3_BASE:1.44
	OPENBSD_5_2:1.43.0.4
	OPENBSD_5_2_BASE:1.43
	OPENBSD_5_1_BASE:1.43
	OPENBSD_5_1:1.43.0.2
	OPENBSD_5_0:1.41.0.4
	OPENBSD_5_0_BASE:1.41
	OPENBSD_4_9:1.41.0.2
	OPENBSD_4_9_BASE:1.41
	OPENBSD_4_8:1.34.0.2
	OPENBSD_4_8_BASE:1.34
	OPENBSD_4_7:1.25.0.2
	OPENBSD_4_7_BASE:1.25
	OPENBSD_4_6:1.23.0.2
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.18.0.2
	OPENBSD_4_5_BASE:1.18
	OPENBSD_4_4:1.17.0.2
	OPENBSD_4_4_BASE:1.17
	OPENBSD_4_3:1.15.0.2
	OPENBSD_4_3_BASE:1.15
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.11.0.2
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	steven-20060512:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.57
date	2017.07.23.09.26.28;	author espie;	state Exp;
branches;
next	1.56;
commitid	FZPR2Emws5uDqXzb;

1.56
date	2017.07.16.19.19.00;	author espie;	state Exp;
branches;
next	1.55;
commitid	tt0GhWK5c4uf9ILG;

1.55
date	2017.04.10.11.46.23;	author sthen;	state Exp;
branches;
next	1.54;
commitid	BLsh88fJB8thZTwY;

1.54
date	2016.09.12.11.45.57;	author naddy;	state Exp;
branches;
next	1.53;
commitid	Cnalk1Ujct5ZDcli;

1.53
date	2016.03.18.23.12.18;	author naddy;	state Exp;
branches;
next	1.52;
commitid	KZAl4KEiw6a3Jixw;

1.52
date	2016.03.01.12.24.54;	author kirby;	state Exp;
branches;
next	1.51;
commitid	7Kojxmk8LOhLiS7Z;

1.51
date	2015.09.18.19.03.24;	author jasper;	state Exp;
branches;
next	1.50;
commitid	YyVK5sMIa6isqGxr;

1.50
date	2015.02.16.22.57.10;	author naddy;	state Exp;
branches;
next	1.49;
commitid	0dx3c9ckf7dE4tx1;

1.49
date	2014.03.22.10.26.38;	author jasper;	state Exp;
branches;
next	1.48;

1.48
date	2014.03.17.23.21.43;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2013.06.24.19.35.18;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2013.03.21.08.46.33;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2013.03.11.11.23.56;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.11.03.20.28.09;	author jasper;	state Exp;
branches;
next	1.42;

1.42
date	2011.09.16.10.31.22;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2010.11.19.07.23.11;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2010.11.08.08.45.56;	author landry;	state Exp;
branches;
next	1.39;

1.39
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.10.24.21.25.51;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.10.24.15.29.35;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2010.10.23.15.09.57;	author steven;	state Exp;
branches;
next	1.35;

1.35
date	2010.10.18.20.52.07;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2010.07.24.18.30.46;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2010.07.22.18.52.35;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2010.07.18.18.49.01;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2010.07.18.10.50.12;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2010.06.15.20.47.38;	author steven;	state Exp;
branches;
next	1.29;

1.29
date	2010.05.28.14.48.34;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2010.05.23.09.34.41;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2010.04.22.16.12.42;	author dcoppa;	state Exp;
branches;
next	1.26;

1.26
date	2010.04.15.20.41.42;	author dcoppa;	state Exp;
branches;
next	1.25;

1.25
date	2009.10.12.23.11.08;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2009.08.10.06.32.43;	author kili;	state Exp;
branches;
next	1.23;

1.23
date	2009.06.28.16.17.27;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2009.06.22.17.00.24;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2009.04.09.05.17.53;	author steven;	state Exp;
branches;
next	1.20;

1.20
date	2009.04.05.16.21.55;	author steven;	state Exp;
branches;
next	1.19;

1.19
date	2009.03.16.20.08.48;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2009.02.09.20.48.23;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2008.07.30.19.47.09;	author martynas;	state Exp;
branches;
next	1.16;

1.16
date	2008.07.04.16.35.26;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2008.02.22.22.32.07;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2007.09.15.18.44.37;	author steven;	state Exp;
branches;
next	1.13;

1.13
date	2007.07.28.14.08.08;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2007.04.01.19.43.56;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2007.02.14.11.51.07;	author steven;	state Exp;
branches;
next	1.10;

1.10
date	2007.01.11.07.56.06;	author steven;	state Exp;
branches;
next	1.9;

1.9
date	2007.01.11.07.53.24;	author steven;	state Exp;
branches;
next	1.8;

1.8
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2006.11.21.11.13.09;	author steven;	state Exp;
branches;
next	1.6;

1.6
date	2006.08.16.05.23.49;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2006.08.03.20.04.52;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2006.07.28.06.29.34;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.06.06.13.36.28;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.05.12.13.52.17;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2006.05.12.13.35.38;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.05.12.13.35.38;	author steven;	state Exp;
branches;
next	;


desc
@@


1.57
log
@add pthread to COMPILER_LIBCXX.
white lie, but it allows clang and gcc to be more similar
bump accordingly.
@
text
@# $OpenBSD: Makefile,v 1.56 2017/07/16 19:19:00 espie Exp $

COMMENT-main =	advanced 2D and 3D scientific plotting library
COMMENT-c++ =	C++ interface to plplot
COMMENT-f77 =	Fortran 77 interface to plplot

VERSION =	5.8.0
DISTNAME =	plplot-${VERSION}
SHARED_LIBS =	csirocsa	3.0	\
		plplotcxxd	12.0	\
		plplotd		13.0	\
		plplotf77cd	11.0	\
		plplotf77d	11.0

PKGNAME-main =	${DISTNAME}
PKGNAME-c++ =	plplot-c++-${VERSION}
PKGNAME-f77 =	plplot-f77-${VERSION}
REVISION-main =	9
REVISION-c++ =	10
REVISION-f77 =	12

CATEGORIES =	math graphics

HOMEPAGE =	http://plplot.sourceforge.net/

MAINTAINER =	Steven Mestdagh <steven@@openbsd.org>

# LGPL
PERMIT_PACKAGE_CDROM =		Yes

MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=plplot/}

MODULES =	devel/gettext \
		fortran

MODFORTRAN_COMPILER = g77

BUILD_DEPENDS =	print/ghostscript/gnu-fonts \
		${MODFORTRAN_BUILD_DEPENDS}

myRUN_DEPENDS =	print/ghostscript/gnu-fonts

MODULES +=	devel/cmake

# Until such time as the cmake ninja generator supports fortran
USE_NINJA =		No

CONFIGURE_ARGS =	-D ENABLE_java=OFF \
			-D ENABLE_f77=ON \
			-D ENABLE_f95=OFF \
			-D ENABLE_itcl=OFF \
			-D ENABLE_pdl=OFF \
			-D ENABLE_python=OFF \
			-D PLD_gcw=OFF \
			-D ENABLE_tcl=OFF \
			-D ENABLE_tk=OFF \
			-D ENABLE_wxwidgets=OFF \
			-D ENABLE_gnome2=OFF \
			-D ENABLE_octave=OFF \
			-D PLD_wxwidgets=OFF

DOCSRC =		${WRKSRC}/doc/docbook/src

MULTI_PACKAGES =	-main -c++ -f77

myWANTLIB += ICE SM X11 Xext cairo fontconfig freetype gd glib-2.0
myWANTLIB += gobject-2.0 jpeg m pango-1.0 pangocairo-1.0 pangoft2-1.0
myWANTLIB += png z ${MODGETTEXT_WANTLIB}

WANTLIB-main =	${myWANTLIB} c pthread
WANTLIB-c++ =	${myWANTLIB} csirocsa plplotd ${COMPILER_LIBCXX}
WANTLIB-f77 +=	${myWANTLIB} csirocsa plplotd ${MODFORTRAN_WANTLIB}

myLIB_DEPENDS =	devel/glib2 \
		devel/pango \
		graphics/cairo \
		graphics/gd \
		${MODGETTEXT_LIB_DEPENDS}

LIB_DEPENDS-main =	${myLIB_DEPENDS}
LIB_DEPENDS-c++ =	math/plplot,-main \
			${myLIB_DEPENDS}
LIB_DEPENDS-f77 =	math/plplot,-main \
			${myLIB_DEPENDS} \
			${MODFORTRAN_LIB_DEPENDS}

RUN_DEPENDS-main =	${myRUN_DEPENDS}
RUN_DEPENDS-c++ =
RUN_DEPENDS-f77 =

pre-configure:
	@@sed -i 's/3plplot/3/g' ${DOCSRC}/*.3plplot
	@@cd ${DOCSRC} && for m in *.3plplot; do mv $$m $${m%\.3plplot}.3; done

post-install:
	${INSTALL_MAN} ${DOCSRC}/*.3 ${PREFIX}/man/man3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/plplot/html
	${INSTALL_DATA} ${DOCSRC}/*.html ${PREFIX}/share/doc/plplot/html

.include <bsd.port.mk>
@


1.56
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2017/04/10 11:46:23 sthen Exp $
d19 1
a19 1
REVISION-c++ =	9
@


1.55
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/09/12 11:45:57 naddy Exp $
d71 1
a71 1
WANTLIB-c++ =	${myWANTLIB} csirocsa plplotd ${LIBCXX}
@


1.54
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/03/18 23:12:18 naddy Exp $
d71 1
a71 1
WANTLIB-c++ =	${myWANTLIB} csirocsa plplotd stdc++
@


1.53
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/03/01 12:24:54 kirby Exp $
d87 1
a87 1
RUN_DEPENDS-main =	${MODLIBICONV_RUN_DEPENDS} ${myRUN_DEPENDS}
@


1.52
log
@ - remove bogus CONFIGURE_STYLE. it's already set via MODULES
 - remove unneeded FLAVOR ?=
OK steven@@, maintainer
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.51 2015/09/18 19:03:24 jasper Exp $

SHARED_ONLY =	Yes
@


1.51
log
@sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/02/16 22:57:10 naddy Exp $
a46 2
CONFIGURE_STYLE =	cmake

a64 2

FLAVOR ?=
@


1.50
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2014/03/22 10:26:38 jasper Exp $
d98 1
a98 1
	@@perl -pi -e 's/3plplot/3/g' ${DOCSRC}/*.3plplot
@


1.49
log
@missing bumps after gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2014/03/17 23:21:43 sthen Exp $
a39 1
USE_GROFF =	Yes
@


1.48
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2013/06/24 19:35:18 espie Exp $
d20 3
a22 3
REVISION-main =	8
REVISION-c++ =	8
REVISION-f77 =	11
@


1.47
log
@prepare for upcoming ninja switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/03/21 08:46:33 ajacoutot Exp $
d73 3
a75 6
myWANTLIB =	GL ICE SM X11 Xext \
		Xrender cairo expat fontconfig \
		freetype gd glib-2.0 gmodule-2.0 gobject-2.0 \
		gthread-2.0 jpeg m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread-stubs xcb \
		xcb-render xcb-shm z ${MODGETTEXT_WANTLIB}
@


1.46
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2013/03/11 11:23:56 espie Exp $
d49 3
@


1.45
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2012/09/01 14:36:57 ajacoutot Exp $
a39 1
USE_LIBTOOL =	Yes
@


1.44
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/11/03 20:28:09 jasper Exp $
a31 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
@


1.43
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/09/16 10:31:22 espie Exp $
d20 3
a22 3
REVISION-main =	7
REVISION-c++ =	7
REVISION-f77 =	10
@


1.42
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/11/19 07:23:11 espie Exp $
d20 3
a22 3
REVISION-main =	6
REVISION-c++ =	6
REVISION-f77 =	9
d74 2
a75 2
myWANTLIB =	GL ICE SM X11 Xau Xdamage Xdmcp Xext Xfixes \
		Xrender Xxf86vm cairo drm expat fontconfig \
@


1.41
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/11/08 08:45:56 landry Exp $
d20 3
a22 3
REVISION-main =	5
REVISION-c++ =	5
REVISION-f77 =	8
@


1.40
log
@Bump all REVISIONS.. libcsirocsa major was (accidentally?) bumped in
last commit, and PLISTDB complained out loud.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/11/06 16:07:00 espie Exp $
d45 1
a45 1
BUILD_DEPENDS =	::print/ghostscript/gnu-fonts \
d48 1
a48 1
myRUN_DEPENDS =	::print/ghostscript/gnu-fonts
d85 4
a88 4
myLIB_DEPENDS =	::devel/glib2 \
		::devel/pango \
		::graphics/cairo \
		::graphics/gd \
d92 1
a92 1
LIB_DEPENDS-c++ =	::math/plplot,-main \
d94 1
a94 1
LIB_DEPENDS-f77 =	::math/plplot,-main \
@


1.39
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/10/24 21:25:51 ajacoutot Exp $
d20 3
a22 3
REVISION-main =	4
REVISION-c++ =	4
REVISION-f77 =	7
@


1.38
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/10/24 15:29:35 sthen Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
d5 1
a5 1
COMMENT-main=	advanced 2D and 3D scientific plotting library
d7 1
a7 1
COMMENT-f77=	Fortran 77 interface to plplot
d9 3
a11 3
VERSION=	5.8.0
DISTNAME=	plplot-${VERSION}
SHARED_LIBS=	csirocsa	2.0	\
d17 1
a17 1
PKGNAME-main=	${DISTNAME}
d19 2
a20 2
PKGNAME-f77=	plplot-f77-${VERSION}
REVISION-main=	4
d22 1
a22 1
REVISION-f77=	7
d24 1
a24 1
CATEGORIES=	math graphics
d26 1
a26 1
HOMEPAGE=	http://plplot.sourceforge.net/
d28 1
a28 1
MAINTAINER=	Steven Mestdagh <steven@@openbsd.org>
d31 4
a34 4
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d36 1
a36 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=plplot/}
d38 1
a38 1
MODULES=	devel/gettext \
d43 1
a43 1
USE_LIBTOOL=	Yes
d45 1
a45 1
BUILD_DEPENDS=	::print/ghostscript/gnu-fonts \
d48 1
a48 1
myRUN_DEPENDS=	::print/ghostscript/gnu-fonts
d50 1
a50 1
MODULES+=	devel/cmake
d52 1
a52 1
CONFIGURE_STYLE=cmake
d54 13
a66 13
CONFIGURE_ARGS=	-D ENABLE_java=OFF \
		-D ENABLE_f77=ON \
		-D ENABLE_f95=OFF \
		-D ENABLE_itcl=OFF \
		-D ENABLE_pdl=OFF \
		-D ENABLE_python=OFF \
		-D PLD_gcw=OFF \
		-D ENABLE_tcl=OFF \
		-D ENABLE_tk=OFF \
		-D ENABLE_wxwidgets=OFF \
		-D ENABLE_gnome2=OFF \
		-D ENABLE_octave=OFF \
		-D PLD_wxwidgets=OFF
d68 1
a68 1
DOCSRC=		${WRKSRC}/doc/docbook/src
d70 1
a70 1
FLAVOR?=
d72 1
a72 1
MULTI_PACKAGES=	-main -c++ -f77
d74 1
a74 1
myWANTLIB=	GL ICE SM X11 Xau Xdamage Xdmcp Xext Xfixes \
d79 1
a79 1
		xcb-render xcb-shm z
d81 1
a81 1
WANTLIB-main=	${myWANTLIB} c pthread
d83 1
a83 1
WANTLIB-f77+=	${myWANTLIB} csirocsa plplotd ${MODFORTRAN_WANTLIB}
d85 1
a85 1
myLIB_DEPENDS=	::devel/glib2 \
d91 1
a91 1
LIB_DEPENDS-main=	${myLIB_DEPENDS}
d94 1
a94 1
LIB_DEPENDS-f77=	::math/plplot,-main \
d98 1
a98 1
RUN_DEPENDS-main=	${MODLIBICONV_RUN_DEPENDS} ${myRUN_DEPENDS}
d100 1
a100 1
RUN_DEPENDS-f77=
@


1.37
log
@Fix LIB_DEPENDS (remove bogus dep on glitz), from Brad. ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/10/23 15:09:57 steven Exp $
a42 1
USE_X11=	Yes
@


1.36
log
@replace MODFORTRAN_WANTG77 with MODFORTRAN_COMPILER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/07/24 18:30:46 naddy Exp $
d20 3
a22 3
REVISION-main=	3
REVISION-c++ =	3
REVISION-f77=	6
d75 6
a80 5
myWANTLIB=	ICE SM X11 Xau Xdmcp Xext Xrender cairo expat \
		fontconfig freetype gd glib-2.0 glitz gmodule-2.0 \
		gobject-2.0 gthread-2.0 jpeg m pango-1.0 pangocairo-1.0 \
		pangoft2-1.0 pixman-1 png pthread-stubs xcb xcb-render \
		xcb-render-util z
a89 1
		::graphics/glitz \
@


1.35
log
@USE_GROFF=Yes
@
text
@d41 1
a41 1
MODFORTRAN_WANTG77 = Yes
@


1.34
log
@remove unused variables
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/07/22 18:52:35 dcoppa Exp $
d45 1
@


1.33
log
@Remove bogus tcl/tk bits, since tcl/tk bindings have been disabled.

Switch to new-style LIB_DEPENDS/WANTLIB and general LIB_DEPENDS/WANTLIB
cleanup.

OK steven@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/07/18 18:49:01 naddy Exp $
a66 4

GCC_ARCH=       ${MACHINE_ARCH}-unknown-openbsd${OSREV}
GNU_ARCH=       ${GCC_ARCH:S/amd64/x86_64/}
SUBST_VARS+=	GNU_ARCH
@


1.32
log
@Remove redundant variables OPSYS and OPSYS_VER.
OPSYS was always "OpenBSD", the ports tree doesn't cover other
operating systems.
OPSYS_VER was the same as OSREV.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/07/18 10:50:12 steven Exp $
d15 1
a15 3
		plplotf77d	11.0	\
		plplottcltkd	12.0	\
		tclmatrixd	12.0
d20 3
a22 3
REVISION-main=	2
REVISION-c++ =	2
REVISION-f77=	5
d45 1
a45 3
BUILD_DEPENDS=	${MODTCL_BUILD_DEPENDS} \
		::graphics/gd \
		::print/ghostscript/gnu-fonts \
d78 15
a92 11
myWANTLIB=	m z freetype Xau Xdmcp Xrender X11 Xext SM ICE expat \
		fontconfig pixman-1 png pthread-stubs xcb

WANTLIB-main=		${myWANTLIB} c
WANTLIB-c++ =		${myWANTLIB}
WANTLIB-f77+=		${myWANTLIB} ${MODFORTRAN_WANTLIB}

myLIB_DEPENDS=	glib-2.0,gmodule-2.0,gobject-2.0::devel/glib2 \
		pango-1.0,pangocairo-1.0,pangoft2-1.0::devel/pango \
		cairo::graphics/cairo \
		glitz::graphics/glitz \
d96 1
a96 1
LIB_DEPENDS-c++ =	plplotd,csirocsa::math/plplot,-main \
d98 1
a98 1
LIB_DEPENDS-f77=	plplotd,csirocsa::math/plplot,-main \
a106 1
	@@perl -pi -e 's,tclsh,${MODTCL_BIN},' ${WRKSRC}/scripts/mktclIndex
@


1.31
log
@REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/06/15 20:47:38 steven Exp $
d72 1
a72 1
GCC_ARCH=       ${MACHINE_ARCH}-unknown-openbsd${OPSYS_VER}
@


1.30
log
@disable build of fortran 95 bindings for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/05/23 09:34:41 espie Exp $
d19 6
a24 3
PKGNAME-main=	${DISTNAME}p2
PKGNAME-c++ =	plplot-c++-${VERSION}p2
PKGNAME-f77=	plplot-f77-${VERSION}p5
@


1.29
log
@fix typo in depends and bump again
@
text
@d56 2
@


1.28
log
@use MODFORTRAN to get an f77 compiler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/04/22 16:12:42 dcoppa Exp $
d21 1
a21 1
PKGNAME-f77=	plplot-f77-${VERSION}p4
d95 1
a95 1
			${MODFORTRAN_LIBS_DEPENDS}
@


1.27
log
@update-plist and bump because of my latest cmake diff.

OK ajacoutot@@, landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/04/15 20:41:42 dcoppa Exp $
d21 1
a21 1
PKGNAME-f77=	plplot-f77-${VERSION}p3
d37 4
a40 1
MODULES=	devel/gettext
d46 3
a48 1
		::print/ghostscript/gnu-fonts
d82 1
a82 1
WANTLIB-f77+=		${myWANTLIB} g2c
d94 2
a95 1
			${myLIB_DEPENDS}
@


1.26
log
@update-plist and bump because of cmake diff.

OK landry@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/10/12 23:11:08 steven Exp $
d21 1
a21 1
PKGNAME-f77=	plplot-f77-${VERSION}p2
@


1.25
log
@remove the bindings that are not being built anyway
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/08/10 06:32:43 kili Exp $
d19 3
a21 3
PKGNAME-main=	${DISTNAME}p1
PKGNAME-c++ =	plplot-c++-${VERSION}p1
PKGNAME-f77=	plplot-f77-${VERSION}p1
@


1.24
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/06/28 16:17:27 sthen Exp $
a7 2
COMMENT-octave=	Octave bindings for plplot
COMMENT-tcl=	Tcl bindings for plplot
a21 2
PKGNAME-octave=	plplot-octave-${VERSION}p1
PKGNAME-tcl=	plplot-tcl-${VERSION}p0
a37 2
#MODULES+=	lang/tcl
#MODTCL_VERSION=	8.4
a67 1
PSEUDO_FLAVORS=	no_octave
a70 7
# -tcl

#.if ${FLAVOR:Mno_octave}
#CONFIGURE_ARGS+= -D ENABLE_octave=OFF
#.else
#MULTI_PACKAGES+=-octave
#.endif
a77 2
#WANTLIB-octave+=	${myWANTLIB} g2c ncurses readline blas lapack fftw3
#WANTLIB-tcl+=		${myWANTLIB} X11 Xau Xdmcp c
a84 2
#		ltdl::devel/libtool,-ltdl

a89 6
#LIB_DEPENDS-octave=	plplotd,csirocsa::math/plplot,-main \
#			cruft,octave,octinterp::math/octave \
#			${myLIB_DEPENDS}
#LIB_DEPENDS-tcl=	plplotd,csirocsa::math/plplot,-main \
#			${MODTCL_LIB_DEPENDS} \
#			${myLIB_DEPENDS}
a93 2
RUN_DEPENDS-octave=
RUN_DEPENDS-tcl=
@


1.23
log
@- don't pull in gnomeprintui if installed at build time; avoids broken
packages.

- move f77 and c++ support libs to the correct sub-packages.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/06/22 17:00:24 naddy Exp $
d21 5
a25 5
PKGNAME-main=	${DISTNAME}p0
PKGNAME-c++ =	plplot-c++-${VERSION}p0
PKGNAME-f77=	plplot-f77-${VERSION}p0
PKGNAME-octave=	plplot-octave-${VERSION}p0
PKGNAME-tcl=	plplot-tcl-${VERSION}
d87 1
a87 1
		fontconfig pixman-1 png
@


1.22
log
@bump PKGNAME for PLIST changes 4.5 -> 4.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/04/09 05:17:53 steven Exp $
d21 3
a23 3
PKGNAME-main=	${DISTNAME}
PKGNAME-c++ =	plplot-c++-${VERSION}
PKGNAME-f77=	plplot-f77-${VERSION}
d60 1
d89 1
a89 1
WANTLIB-main=		${myWANTLIB} c g2c
d91 1
a91 1
WANTLIB-f77+=		${myWANTLIB}
@


1.21
log
@unbreak build when wxwidgets is installed.

noticed and tested by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/04/05 16:21:55 steven Exp $
d24 1
a24 1
PKGNAME-octave=	plplot-octave-${VERSION}
@


1.20
log
@update to 5.8.0

this uses cmake now; needs some more tweaking.
a few subpackages are disabled for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/02/09 20:48:23 naddy Exp $
d63 3
a65 1
		-D ENABLE_octave=OFF
@


1.19
log
@convert to tcl.port.mk, fixing deps
@
text
@d11 1
a11 1
VERSION=	5.6.1
d13 13
a25 13
SHARED_LIBS=	csirocsa	1.0	\
		plplotcxxd	11.0	\
		plplotd		12.0	\
		plplotf77cd	10.0	\
		plplotf77d	10.0	\
		plplottcltkd	11.0	\
		tclmatrixd	11.0

PKGNAME-main=	${DISTNAME}p2
PKGNAME-c++ =	plplot-c++-${VERSION}p1
PKGNAME-f77=	plplot-f77-${VERSION}p1
PKGNAME-octave=	plplot-octave-${VERSION}p7
PKGNAME-tcl=	plplot-tcl-${VERSION}p3
a38 2
myWANTLIB=	m z freetype

d41 3
a43 2
MODULES=	lang/tcl converters/libiconv
MODTCL_VERSION=	8.4
a50 1
myLIB_DEPENDS=	ltdl::devel/libtool,-ltdl
d52 12
a63 37
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-gcw \
		--disable-java \
		--disable-itcl \
		--disable-linuxvga \
		--disable-pdl \
		--disable-python \
		--disable-tk \
		--disable-tkwin \
		--disable-wxwidgets \
		--with-ltdlsystem \
		--with-gd-incdir=${LOCALBASE}/include \
		--with-gd-libdir=${LOCALBASE}/lib \
		--with-freetype2-incdir=${X11BASE}/include/freetype2 \
		--with-freetype2-libdir=${X11BASE}/lib \
		--with-freetype-font-dir=${LOCALBASE}/share/ghostscript/fonts \
		--with-freetype-sans-font=n019003l.pfb \
		--with-freetype-sans-bold-font=n019004l.pfb \
		--with-freetype-sans-oblique-font=n019023l.pfb \
		--with-freetype-sans-bold-oblique-font=n019024l.pfb \
		--with-freetype-serif-font=n021003l.pfb \
		--with-freetype-serif-bold-font=n021004l.pfb \
		--with-freetype-serif-italic-font=n021023l.pfb \
		--with-freetype-serif-bold-italic-font=n021024l.pfb \
		--with-freetype-mono-font=n022003l.pfb \
		--with-freetype-mono-bold-font=n022004l.pfb \
		--with-freetype-mono-oblique-font=n022023l.pfb \
		--with-freetype-mono-bold-oblique-font=n022024l.pfb \
		--with-freetype-symbol-font=s050000l.pfb

CONFIGURE_ENV=	F77=${FC} \
		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib" \
		TCLINCDIR="${MODTCL_INCDIR}" \
		TCLLIBDIR="${MODTCL_LIBDIR}" \
		TCLLIBSTR="-ltcl${MODTCL_VERSION:S/.//}"
d74 8
a81 1
MULTI_PACKAGES=	-main -c++ -f77 -tcl
d83 2
a84 5
.if ${FLAVOR:Mno_octave}
CONFIGURE_ARGS+=--disable-octave
.else
MULTI_PACKAGES+=-octave
.endif
d86 1
a86 1
WANTLIB-main=		${myWANTLIB} X11 Xau Xdmcp expat c fontconfig z png jpeg
d88 13
a100 7
WANTLIB-f77+=		${myWANTLIB} g2c
WANTLIB-octave+=	${myWANTLIB} g2c ncurses readline blas lapack fftw3
WANTLIB-tcl+=		${myWANTLIB} X11 Xau Xdmcp c

LIB_DEPENDS-main=	${MODLIBICONV_LIB_DEPENDS} \
			${myLIB_DEPENDS} \
			gd.>=20::graphics/gd
d105 6
a110 6
LIB_DEPENDS-octave=	plplotd,csirocsa::math/plplot,-main \
			cruft,octave,octinterp::math/octave \
			${myLIB_DEPENDS}
LIB_DEPENDS-tcl=	plplotd,csirocsa::math/plplot,-main \
			${MODTCL_LIB_DEPENDS} \
			${myLIB_DEPENDS}
@


1.18
log
@bump PKGNAME for PLIST changes 4.4 -> 4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/07/30 19:47:09 martynas Exp $
d25 1
a25 1
PKGNAME-tcl=	plplot-tcl-${VERSION}p2
d43 2
a44 2
TCL_VERSION=	8.4
TCLLIB=		tcl${TCL_VERSION:S/.//}
d48 1
a48 1
BUILD_DEPENDS=	:tcl-${TCL_VERSION}.*:lang/tcl/${TCL_VERSION} \
d88 3
a90 3
		TCLINCDIR="${LOCALBASE}/include/tcl${TCL_VERSION}" \
		TCLLIBDIR="${LOCALBASE}/lib" \
		TCLLIBSTR="-l${TCLLIB}"
a108 2
MODULES=		converters/libiconv

d126 1
a126 1
			${TCLLIB}:tcl-${TCL_VERSION}.*:lang/tcl/${TCL_VERSION} \
d136 1
a136 1
	@@perl -pi -e 's,tclsh,tclsh${TCL_VERSION},' ${WRKSRC}/scripts/mktclIndex
@


1.17
log
@last round of library bumps due to libc/libm changes.  from sthen@@
double-checked & ok naddy@@, go for it pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/07/04 16:35:26 naddy Exp $
d24 1
a24 1
PKGNAME-octave=	plplot-octave-${VERSION}p6
@


1.16
log
@bump PKGNAME for PLIST changes 4.3 -> 4.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/02/22 22:32:07 naddy Exp $
d13 1
a13 1
SHARED_LIBS=	csirocsa	0.1	\
d15 1
a15 1
		plplotd		11.0	\
d21 1
a21 1
PKGNAME-main=	${DISTNAME}p1
@


1.15
log
@bump PKGNAME for PLIST changes 4.2 -> 4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/09/15 18:44:37 steven Exp $
d24 1
a24 1
PKGNAME-octave=	plplot-octave-${VERSION}p5
@


1.14
log
@remove quotes from COMMENT/PERMIT*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/07/28 14:08:08 naddy Exp $
d24 1
a24 1
PKGNAME-octave=	plplot-octave-${VERSION}p4
@


1.13
log
@bump package name due to OSREV increment
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/04/01 19:43:56 steven Exp $
d5 5
a9 5
COMMENT-main=	"advanced 2D and 3D scientific plotting library"
COMMENT-c++ =	"C++ interface to plplot"
COMMENT-f77=	"Fortran 77 interface to plplot"
COMMENT-octave=	"Octave bindings for plplot"
COMMENT-tcl=	"Tcl bindings for plplot"
@


1.12
log
@add -lz for freetype, prompted by naddy@@
adjust all WANTLIBs while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/02/14 11:51:07 steven Exp $
d24 1
a24 1
PKGNAME-octave=	plplot-octave-${VERSION}p3
@


1.11
log
@bump PKGNAME due to PLIST changes after 4.0 -> 4.1

"feel free to bump whatever is needed" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/01/11 07:56:06 steven Exp $
d21 5
a25 5
PKGNAME-main=	${DISTNAME}p0
PKGNAME-c++ =	plplot-c++-${VERSION}p0
PKGNAME-f77=	plplot-f77-${VERSION}p0
PKGNAME-octave=	plplot-octave-${VERSION}p2
PKGNAME-tcl=	plplot-tcl-${VERSION}p1
d39 1
a39 1
myWANTLIB=	m freetype
d111 1
a111 1
WANTLIB-main=		${myWANTLIB} X11 c fontconfig z png jpeg
d115 1
a115 1
WANTLIB-tcl+=		${myWANTLIB} X11 c
@


1.10
log
@oops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/01/11 07:53:24 steven Exp $
d24 1
a24 1
PKGNAME-octave=	plplot-octave-${VERSION}p1
@


1.9
log
@add a no_octave pseudo flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/12/16 12:22:34 espie Exp $
a48 1
		::math/octave \
@


1.8
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/11/21 11:13:09 steven Exp $
d99 10
a108 1
MULTI_PACKAGES=	-main -c++ -f77 -octave -tcl
@


1.7
log
@new MULTI_PACKAGES

looks correct bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/08/16 05:23:49 steven Exp $
d51 1
a51 2
		::print/ghostscript/gnu-fonts \
		::devel/pkgconfig
@


1.6
log
@make tcl dependency more explicit.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/08/03 20:04:52 espie Exp $
d5 1
a5 1
COMMENT=	"advanced 2D and 3D scientific plotting library"
d21 5
a25 4
PKGNAME-c++ =	plplot-c++-${VERSION}
PKGNAME-f77=	plplot-f77-${VERSION}
PKGNAME-octave=	plplot-octave-${VERSION}p0
PKGNAME-tcl=	plplot-tcl-${VERSION}p0
d39 1
a39 1
WANTLIB=	m freetype
d53 2
a54 2
RUN_DEPENDS=	::print/ghostscript/gnu-fonts
LIB_DEPENDS=	ltdl::devel/libtool,-ltdl
d100 1
a100 2
MULTI_PACKAGES=	-c++ -f77 -octave -tcl
SUBPACKAGE?=
a101 2
.if defined(PACKAGING)
.  if empty(SUBPACKAGE)
d103 26
a128 15
WANTLIB+=		X11 c fontconfig z png jpeg
LIB_DEPENDS+=		gd.>=20::graphics/gd
.  else
LIB_DEPENDS+=		plplotd,csirocsa::math/plplot
.    if ${SUBPACKAGE} == "-f77"
WANTLIB+=		g2c
.    elif ${SUBPACKAGE} == "-octave"
WANTLIB+=		g2c ncurses readline blas lapack fftw3
LIB_DEPENDS+=		cruft,octave,octinterp::math/octave
.    elif ${SUBPACKAGE} == "-tcl"
WANTLIB+=		X11 c
LIB_DEPENDS+=		${TCLLIB}:tcl-${TCL_VERSION}.*:lang/tcl/${TCL_VERSION}
.    endif
.  endif
.endif
@


1.5
log
@more new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/07/28 06:29:34 steven Exp $
d24 1
a24 1
PKGNAME-tcl=	plplot-tcl-${VERSION}
d47 1
a47 1
BUILD_DEPENDS=	::lang/tcl/${TCL_VERSION} \
d116 1
a116 1
LIB_DEPENDS+=		${TCLLIB}::lang/tcl/${TCL_VERSION}
@


1.4
log
@bump PKGNAME due to PLIST changes after 3.9 -> 4.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/06/06 13:36:28 steven Exp $
d106 1
a106 1
LIB_DEPENDS+=		gd.20::graphics/gd
@


1.3
log
@maintenance update to plplot 5.6.1

ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/05/12 13:52:17 steven Exp $
d23 1
a23 1
PKGNAME-octave=	plplot-octave-${VERSION}
@


1.2
log
@set USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/05/12 13:35:38 steven Exp $
d11 1
a11 1
VERSION=	5.6.0
d26 1
a26 1
CATEGORIES=	math
d50 2
a51 1
		::print/ghostscript/gnu-fonts
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d45 1
@


1.1.1.1
log
@import plplot 5.6.0

PLplot is a library of functions that are useful for making scientific
plots. PLplot can be used from within compiled languages such as C, C++,
Fortran and Java, and interactively from interpreted languages such as
Octave, Python, Perl and Tcl.

The PLplot library can be used to create standard x-y plots, semilog
plots, log-log plots, contour plots, 3D surface plots, mesh plots,
bar charts and pie charts. Multiple graphs (of the same or different
sizes) may be placed on a single page with multiple lines in each
graph.

some initial work by Matthias Kilian.
thanks to the people who tested this.
@
text
@@
