head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.16
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.14
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.12
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.8
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.10
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.10
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.8
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2014.02.06.17.32.27;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.22.09.55.01;	author edd;	state Exp;
branches;
next	1.1;

1.1
date	2010.08.09.08.55.43;	author espie;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to graphviz-2.36.0.

Addresses some CVEs:
http://www.debian.org/security/2014/dsa-2843

Thanks to Sebastian Trahm for pointing these out.

OK jasper@@
@
text
@$OpenBSD$

Add pthread linkage or '@@exec dot -c' will fail with "file not found"
when trying to dlopen(). Not because the file is missing, but because
there is a linker error. Sigh, obvious isn't it?

--- cmd/dot/Makefile.in.orig2	Sun Feb  2 23:23:31 2014
+++ cmd/dot/Makefile.in	Sun Feb  2 23:24:22 2014
@@@@ -615,7 +615,8 @@@@ dot_SOURCES = dot.c no_builtins.c
 dot_CPPFLAGS = $(AM_CPPFLAGS) -DDEMAND_LOADING=1
 dot_LDADD = \
 	$(top_builddir)/lib/gvc/libgvc.la \
-	$(top_builddir)/lib/cgraph/libcgraph.la
+	$(top_builddir)/lib/cgraph/libcgraph.la \
+	-pthread
 
 dot_static_SOURCES = dot.c dot_builtins.c
 dot_static_CPPFLAGS = $(AM_CPPFLAGS) -DDEMAND_LOADING=0
@


1.2
log
@Clean up and Update to graphviz-2.28.0.

Taking MAINTAINER (discussed with espie on icb).

OK ajacoutot@@, sebastia@@

At some point in the future, the language bindings should be
multi-packaged, but that is another story.
@
text
@d1 1
a1 1
$OpenBSD: patch-cmd_dot_Makefile_in,v 1.1 2010/08/09 08:55:43 espie Exp $
d7 3
a9 5
--- cmd/dot/Makefile.in.orig2	Sat May  7 04:27:39 2011
+++ cmd/dot/Makefile.in	Mon Jun 18 12:39:40 2012
@@@@ -570,7 +570,7 @@@@ man_MANS = dot.1 osage.1 patchwork.1
 pdf_DATA = dot.1.pdf osage.1.pdf patchwork.1.pdf
 dot_SOURCES = dot.c no_builtins.c
d11 6
a16 2
-dot_LDADD = $(top_builddir)/lib/gvc/libgvc.la
+dot_LDADD = $(top_builddir)/lib/gvc/libgvc.la -pthread
a18 1
 dot_static_LDADD =  \
@


1.1
log
@fix dot, regen other patches.
patch from edd@@, committed by me since we're running out of time.
sorry edd for not checking this earlier.
@
text
@d1 17
a17 16
$OpenBSD$
--- cmd/dot/Makefile.in.orig2	Mon Aug  9 10:42:30 2010
+++ cmd/dot/Makefile.in	Mon Aug  9 10:42:46 2010
@@@@ -519,10 +519,10 @@@@ clean-binPROGRAMS:
 	done
 dot$(EXEEXT): $(dot_OBJECTS) $(dot_DEPENDENCIES) 
 	@@rm -f dot$(EXEEXT)
-	$(LINK) $(dot_LDFLAGS) $(dot_OBJECTS) $(dot_LDADD) $(LIBS)
+	$(LINK) $(dot_LDFLAGS) $(dot_OBJECTS) $(dot_LDADD) $(LIBS) -pthread
 dot_static$(EXEEXT): $(dot_static_OBJECTS) $(dot_static_DEPENDENCIES) 
 	@@rm -f dot_static$(EXEEXT)
-	$(LINK) $(dot_static_LDFLAGS) $(dot_static_OBJECTS) $(dot_static_LDADD) $(LIBS)
+	$(LINK) $(dot_static_LDFLAGS) $(dot_static_OBJECTS) $(dot_static_LDADD) $(LIBS) -pthread
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
@

