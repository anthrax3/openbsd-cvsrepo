head	1.68;
access;
symbols
	OPENBSD_6_1:1.66.0.2
	OPENBSD_6_1_BASE:1.66
	OPENBSD_6_0:1.65.0.2
	OPENBSD_6_0_BASE:1.65
	OPENBSD_5_9:1.62.0.2
	OPENBSD_5_9_BASE:1.62
	OPENBSD_5_8:1.60.0.4
	OPENBSD_5_8_BASE:1.60
	OPENBSD_5_7:1.58.0.2
	OPENBSD_5_7_BASE:1.58
	OPENBSD_5_6:1.57.0.2
	OPENBSD_5_6_BASE:1.57
	OPENBSD_5_5:1.55.0.2
	OPENBSD_5_5_BASE:1.55
	OPENBSD_5_4:1.52.0.2
	OPENBSD_5_4_BASE:1.52
	OPENBSD_5_3:1.49.0.2
	OPENBSD_5_3_BASE:1.49
	OPENBSD_5_2:1.46.0.4
	OPENBSD_5_2_BASE:1.46
	OPENBSD_5_1_BASE:1.46
	OPENBSD_5_1:1.46.0.2
	OPENBSD_5_0:1.44.0.2
	OPENBSD_5_0_BASE:1.44
	OPENBSD_4_9:1.43.0.2
	OPENBSD_4_9_BASE:1.43
	OPENBSD_4_8:1.35.0.2
	OPENBSD_4_8_BASE:1.35
	OPENBSD_4_7:1.33.0.2
	OPENBSD_4_7_BASE:1.33
	OPENBSD_4_6:1.32.0.2
	OPENBSD_4_6_BASE:1.32
	OPENBSD_4_5:1.30.0.2
	OPENBSD_4_5_BASE:1.30
	OPENBSD_4_4:1.29.0.2
	OPENBSD_4_4_BASE:1.29
	OPENBSD_4_3:1.27.0.2
	OPENBSD_4_3_BASE:1.27
	OPENBSD_4_2:1.23.0.2
	OPENBSD_4_2_BASE:1.23
	OPENBSD_4_1:1.21.0.2
	OPENBSD_4_1_BASE:1.21
	OPENBSD_4_0:1.18.0.2
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.17.0.2
	OPENBSD_3_9_BASE:1.17
	OPENBSD_3_8:1.15.0.4
	OPENBSD_3_8_BASE:1.15
	OPENBSD_3_7:1.15.0.2
	OPENBSD_3_7_BASE:1.15
	OPENBSD_3_6:1.11.0.2
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.10.0.2
	OPENBSD_3_5_BASE:1.10
	OPENBSD_3_4:1.8.0.4
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.4
	espie:1.1.1.1
	graphviz:1.1.1;
locks; strict;
comment	@# @;


1.68
date	2017.05.15.19.56.03;	author rsadowski;	state Exp;
branches;
next	1.67;
commitid	9o62ZeM7dBsDrb2c;

1.67
date	2017.04.10.11.46.22;	author sthen;	state Exp;
branches;
next	1.66;
commitid	BLsh88fJB8thZTwY;

1.66
date	2016.12.17.16.05.45;	author zhuk;	state Exp;
branches;
next	1.65;
commitid	tz8qEBpGskPZEbXP;

1.65
date	2016.07.01.14.25.17;	author sthen;	state Exp;
branches;
next	1.64;
commitid	3ICwsFGYk1VbGUJw;

1.64
date	2016.04.04.22.57.45;	author naddy;	state Exp;
branches;
next	1.63;
commitid	FILF1LJRoZlYu0JV;

1.63
date	2016.03.11.20.28.27;	author naddy;	state Exp;
branches;
next	1.62;
commitid	UYLP8TE6V7RS2GhJ;

1.62
date	2016.01.14.20.56.59;	author jasper;	state Exp;
branches;
next	1.61;
commitid	Bb4z5CAsXhCnr48V;

1.61
date	2015.08.21.16.06.06;	author jasper;	state Exp;
branches;
next	1.60;
commitid	M10PxFRmDgzAo0ic;

1.60
date	2015.06.10.21.42.26;	author sthen;	state Exp;
branches;
next	1.59;
commitid	KAX1WKnTNUH3EZBA;

1.59
date	2015.05.08.09.08.44;	author espie;	state Exp;
branches;
next	1.58;
commitid	8WaxsMNN6opOzn9t;

1.58
date	2014.09.28.13.44.48;	author ajacoutot;	state Exp;
branches
	1.58.2.1;
next	1.57;
commitid	kIpGGD5a9tC9oczc;

1.57
date	2014.04.28.22.03.11;	author sthen;	state Exp;
branches;
next	1.56;

1.56
date	2014.03.17.23.21.43;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2014.02.06.17.32.27;	author edd;	state Exp;
branches;
next	1.54;

1.54
date	2014.01.07.10.01.47;	author sthen;	state Exp;
branches;
next	1.53;

1.53
date	2013.10.13.21.41.44;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2013.05.06.18.50.47;	author zhuk;	state Exp;
branches
	1.52.2.1;
next	1.51;

1.51
date	2013.03.21.08.46.33;	author ajacoutot;	state Exp;
branches;
next	1.50;

1.50
date	2013.03.11.11.23.54;	author espie;	state Exp;
branches;
next	1.49;

1.49
date	2012.08.31.19.50.01;	author edd;	state Exp;
branches;
next	1.48;

1.48
date	2012.08.22.22.15.49;	author edd;	state Exp;
branches;
next	1.47;

1.47
date	2012.08.22.09.55.01;	author edd;	state Exp;
branches;
next	1.46;

1.46
date	2011.11.03.20.28.09;	author jasper;	state Exp;
branches;
next	1.45;

1.45
date	2011.09.16.10.31.22;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2011.05.11.07.45.52;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.01.05.19.37.11;	author landry;	state Exp;
branches;
next	1.42;

1.42
date	2010.11.22.09.28.34;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2010.11.19.07.23.10;	author espie;	state Exp;
branches;
next	1.40;

1.40
date	2010.10.24.21.25.50;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2010.10.18.20.52.05;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2010.10.11.08.15.37;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2010.09.30.19.27.40;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2010.09.30.07.21.19;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.08.09.08.55.43;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2010.07.18.10.30.41;	author steven;	state Exp;
branches;
next	1.33;

1.33
date	2009.08.10.06.32.43;	author kili;	state Exp;
branches;
next	1.32;

1.32
date	2009.06.10.20.27.09;	author kili;	state Exp;
branches;
next	1.31;

1.31
date	2009.03.15.09.25.04;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2009.01.20.23.15.39;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2008.06.29.20.44.52;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2008.05.31.23.04.38;	author jasper;	state Exp;
branches;
next	1.27;

1.27
date	2008.01.04.17.48.36;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2007.11.14.19.27.35;	author merdely;	state Exp;
branches;
next	1.25;

1.25
date	2007.11.14.09.43.40;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2007.09.15.18.44.36;	author steven;	state Exp;
branches;
next	1.23;

1.23
date	2007.05.29.11.22.30;	author kili;	state Exp;
branches;
next	1.22;

1.22
date	2007.05.04.11.33.14;	author bernd;	state Exp;
branches;
next	1.21;

1.21
date	2007.02.21.16.37.34;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2007.02.20.11.47.07;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2006.11.13.12.53.08;	author steven;	state Exp;
branches;
next	1.18;

1.18
date	2006.08.03.20.04.51;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2006.01.06.18.58.31;	author steven;	state Exp;
branches;
next	1.16;

1.16
date	2005.12.26.16.11.29;	author steven;	state Exp;
branches;
next	1.15;

1.15
date	2005.03.14.15.27.13;	author alek;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.27.07.16.44;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2004.12.21.11.36.43;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2004.11.27.12.10.43;	author sturm;	state Exp;
branches;
next	1.11;

1.11
date	2004.08.17.19.33.09;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2004.03.04.01.48.02;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.27.23.31.16;	author jose;	state Exp;
branches;
next	1.8;

1.8
date	2003.02.15.14.35.39;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2002.07.18.15.15.05;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2002.03.25.00.13.44;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2001.11.10.15.00.48;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2001.07.29.12.19.49;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2001.06.11.00.32.53;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.09.23.36.34;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.09.20.38.01;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.06.09.20.38.01;	author espie;	state Exp;
branches;
next	;

1.52.2.1
date	2014.02.17.15.37.10;	author jasper;	state Exp;
branches;
next	;

1.58.2.1
date	2015.08.21.16.07.12;	author jasper;	state Exp;
branches;
next	;
commitid	FUVHrY5BzMTw6Gzn;


desc
@@


1.68
log
@Bump REVISION and adjust WANTLIB after gd update

ok sthen@@, "looks okay" @@landry
@
text
@# $OpenBSD: Makefile,v 1.67 2017/04/10 11:46:22 sthen Exp $

COMMENT-main=	graph drawing software

DISTNAME=	graphviz-2.36.0
REVISION=	8
PKGNAME-main=	${DISTNAME}
CATEGORIES=	math devel graphics

# there is only one multi-package due to legacy, but maybe more
# will appear in the form of language bindings.
MULTI_PACKAGES=	-main

# to let update-patches work in a simpler way
PATCHORIG=	.orig2

MASTER_SITES=	${HOMEPAGE}pub/graphviz/ARCHIVE/

SHARED_LIBS += gvplugin_core		1.0 # 6.0
SHARED_LIBS += gvplugin_gd		1.0 # 6.0
SHARED_LIBS += gvplugin_pango		1.0 # 6.0
SHARED_LIBS += gvplugin_dot_layout	1.0 # 6.0
SHARED_LIBS += gvplugin_neato_layout	1.0 # 6.0
SHARED_LIBS += gvplugin_xlib		1.0 # 6.0
SHARED_LIBS += gvplugin_gtk		1.0 # 6.0
SHARED_LIBS += gvplugin_rsvg		0.0 # 6.0
SHARED_LIBS += gvplugin_gdk		0.0 # 6.0
SHARED_LIBS += gvplugin_poppler		0.0 # 6.0

SHARED_LIBS += cdt			1.0 # 5.0
SHARED_LIBS += pathplan			2.0 # 4.0
SHARED_LIBS += gvc			1.0 # 6.0
SHARED_LIBS += cgraph			0.0 # 6.0
SHARED_LIBS += gvpr			0.0 # 2.0
SHARED_LIBS += xdot			0.0 # 4.0
SHARED_LIBS += gdtclft			3.0 # unknown
SHARED_LIBS += tcldot			3.0 # unknown
SHARED_LIBS += tcldot_builtin		3.0 # unknown
SHARED_LIBS += tclplan			3.0 # unknown
SHARED_LIBS += tkspline			3.0 # unknown

HOMEPAGE=	http://www.graphviz.org/

MAINTAINER =	Edd Barrett <edd@@openbsd.org>

# Eclipse Public License v1.0
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ICE SM X11 Xau Xaw Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xft Xi Xinerama Xmu Xpm Xrandr Xrender
WANTLIB += Xss Xt atk-1.0 c cairo croco-0.6 expat ffi fontconfig
WANTLIB += freetype gd gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gmp gobject-2.0 graphite2 gthread-2.0 gtk-x11-2.0
WANTLIB += guile harfbuzz jpeg lcms2 ltdl lzma m openjp2 pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre perl pixman-1 png
WANTLIB += poppler poppler-glib pthread pthread-stubs rsvg-2 ${LIBCXX}
WANTLIB += tiff tk85 util webp xcb xcb-render xcb-shm xml2 z

MODULES=	devel/gettext \
		x11/tk \
		perl
LIB_DEPENDS =	graphics/jpeg \
		graphics/png \
		devel/libtool,-ltdl \
		graphics/gd>=2.0.34 \
		x11/gtk+2 \
		www/libcroco \
		x11/gnome/librsvg \
		graphics/graphite2 \
		devel/harfbuzz \
		print/poppler \
		lang/guile \
		${MODTK_LIB_DEPENDS}
BUILD_DEPENDS=	devel/swig
TEST_DEPENDS =	${FULLPKGNAME}:math/graphviz

USE_GMAKE =	Yes
USE_GROFF =	Yes
CONFIGURE_STYLE=gnu
# Note: --with-tclsh is misspelled "--with-tcl" in configure's help output
CONFIGURE_ARGS=	--enable-tcl=yes \
		--enable-perl \
		--enable-guile \
		--with-tclsh=${MODTCL_BIN} \
		--with-wish=${MODTK_BIN} \
		--disable-lua \
		--disable-io \
		--disable-java \
		--disable-ocaml \
		--disable-php \
		--disable-python \
		--disable-ruby \
		--disable-rpath \
		--disable-sharp \
		--disable-r \
		--disable-gts \
		--without-ghostscript \
		--without-devil \
		--without-lasi \
		--without-qt \
		--without-glut \
		--with-gd

CONFIGURE_ENV=	CPPFLAGS="-I${X11BASE}/include -I${LOCALBASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
		TCLCONFIG=${MODTCL_CONFIG} \
		TKCONFIG=${MODTK_CONFIG}

DOCBASE=	${PREFIX}/share/doc/graphviz
EXBASE=		${PREFIX}/share/examples/graphviz

MAKE_FLAGS=	TCL_STUB_LIB_SPEC='-L${LOCALBASE}/lib -ltclstub85_pic' \
		TK_STUB_LIB_SPEC='-L${LOCALBASE}/lib -ltkstub85_pic'

CFLAGS +=	-DLT_DEBUG_LOADERS

FAKE_FLAGS=	htmldir="${DOCBASE}/html" \
		pdfdir="${DOCBASE}/pdf" \
		txtdir="${DOCBASE}" \
		demodir="${EXBASE}/demo" \
		directeddir="${EXBASE}/graphs/directed" \
		leftydir="${EXBASE}/lefty" \
		pathplanexampledir="${EXBASE}/demo/pathplan_data" \
		undirecteddir="${EXBASE}/graphs/undirected" \
		pkgtcldir="${MODTCL_TCLDIR}/graphviz"

post-build:
.for CMD in dotty lneato
	echo "#! /bin/ksh" >${WRKBUILD}/cmd/${CMD}/${CMD}
	echo ': $${LEFTYPATH:=$(LOCALBASE)/share/examples/graphviz/lefty}' >>${WRKBUILD}/cmd/${CMD}/${CMD}
	echo 'export LEFTYPATH' >>${WRKBUILD}/cmd/${CMD}/${CMD}
	cat ${WRKBUILD}/cmd/${CMD}/${CMD}.ksh >>${WRKBUILD}/cmd/${CMD}/${CMD}
.endfor

post-install:
# install pre-generated config6 to avoid @@exec/@@unexec-delete
	${SUBST_CMD} -m 0644 -c ${FILESDIR}/config6 ${PREFIX}/lib/graphviz/config6
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/lib/graphviz/config6
# Once upon a time, graphviz used to install the symlink:
# ${PREFIX}/lib/tcl${MODTCL_VERSION}/graphviz -> ${PREFIX}/lib/tcl/graphviz
# Now it installs a copy of the dir, however, 'pkg_add -u' can't update a
# symlink to a dir, so we manually hack back the old symlink.
	rm -Rf ${PREFIX}/lib/tcl${MODTCL_VERSION}/graphviz
	ln -s ${TRUEPREFIX}/lib/tcl/graphviz \
		${PREFIX}/lib/tcl${MODTCL_VERSION}/graphviz

# Local tests for OpenBSD
# Can't run built in tests, as requires ksh93 (some specific arguments
# to the typeset builtin). Currently, there is no port.
TEST_TMP=${WRKDIR}/test_tmp
do-test:
	mkdir -p ${TEST_TMP}
	cd ${FILESDIR}/tests && for i in *-test.* run_tests.sh; do \
		${SUBST_CMD} -m 0644 -c $${i} ${TEST_TMP}/$${i}; \
	done
	cd ${TEST_TMP} && /bin/sh ./run_tests.sh

# NOTE: When updating this port:
#  * Check we have commented .la and .a corresponding to unversioned .so files
#    in the packing list.
#  * Run 'dot -c' manually and subsitute all hardcoded library versions to
#    ${LIB_libname_VERSION}. Put the file in files/config6

.include <bsd.port.mk>
@


1.67
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2016/12/17 16:05:45 zhuk Exp $
d6 1
a6 1
REVISION=	7
d57 1
a57 1
WANTLIB += tiff tk85 util vpx xcb xcb-render xcb-shm xml2 z
@


1.66
log
@Unbreak after poppler switch to openjp2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2016/07/01 14:25:17 sthen Exp $
d56 1
a56 1
WANTLIB += poppler poppler-glib pthread pthread-stubs rsvg-2 stdc++
@


1.65
log
@gc LD_PRELOAD parts no longer needed, ok edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2016/04/04 22:57:45 naddy Exp $
d6 1
a6 1
REVISION=	6
d54 1
a54 1
WANTLIB += guile harfbuzz jpeg lcms2 ltdl lzma m openjpeg pango-1.0
@


1.64
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2016/03/11 20:28:27 naddy Exp $
d6 1
a6 1
REVISION=	5
d154 1
a154 1
		${SUBST_CMD} -c $${i} ${TEST_TMP}/$${i}; \
@


1.63
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2016/01/14 20:56:59 jasper Exp $
d6 1
a6 1
REVISION=	4
@


1.62
log
@properly disable 'R' support by disabling 'r'

ok edd@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2015/08/21 16:06:06 jasper Exp $
d81 1
a81 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--enable-tcl=yes \
@


1.61
log
@Security fix for CVE-2014-9157, graphviz: format string vulnerability in yyerror()

ok edd@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2015/06/10 21:42:26 sthen Exp $
d96 1
a96 1
		--disable-R \
@


1.60
log
@sync wantlib, mostly lzma (from xml2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2015/05/08 09:08:44 espie Exp $
d6 1
a6 1
REVISION=	3
@


1.59
log
@don't depend on modes in the ports tree being what we want installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2014/09/28 13:44:48 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
d54 1
a54 1
WANTLIB += guile harfbuzz jpeg lcms2 ltdl m openjpeg pango-1.0
@


1.58
log
@Make sure not to pick up guile2 if present.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2014/04/28 22:03:11 sthen Exp $
d138 1
a138 1
	${SUBST_CMD} -c ${FILESDIR}/config6 ${PREFIX}/lib/graphviz/config6
@


1.58.2.1
log
@Security fix for CVE-2014-9157, graphviz: format string vulnerability in yyerror()

ok edd@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2014/09/28 13:44:48 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
@


1.57
log
@remove unguarded "#define AI_ADDRCONFIG 0"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2014/03/17 23:21:43 sthen Exp $
d6 1
a6 1
REVISION=	1
d72 1
d74 1
a74 3
RUN_DEPENDS=	lang/guile
BUILD_DEPENDS=	devel/swig \
		lang/guile
@


1.56
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2014/02/06 17:32:27 edd Exp $
d6 1
a6 1
REVISION=	0
@


1.55
log
@Update to graphviz-2.36.0.

Addresses some CVEs:
http://www.debian.org/security/2014/dsa-2843

Thanks to Sebastian Trahm for pointing these out.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2014/01/07 10:01:47 sthen Exp $
d6 1
d49 10
a76 10

WANTLIB += ICE SM X11 Xau Xaw Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xft Xi Xinerama Xmu Xpm Xrandr Xrender
WANTLIB += Xss Xt atk-1.0 c cairo croco-0.6 expat ffi fontconfig
WANTLIB += freetype gd gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gmodule-2.0 gmp gobject-2.0 graphite2 gthread-2.0 gtk-x11-2.0
WANTLIB += guile harfbuzz jpeg lcms2 ltdl m openjpeg pango-1.0
WANTLIB += pangocairo-1.0 pangoft2-1.0 pcre perl pixman-1 png
WANTLIB += poppler poppler-glib pthread pthread-stubs rsvg-2 stdc++
WANTLIB += tiff tk85 util xcb xcb-render xcb-shm xml2 z
@


1.54
log
@fix license marker, this version of graphviz is under EPL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/10/13 21:41:44 naddy Exp $
d5 1
a5 1
DISTNAME=	graphviz-2.28.0
a24 1
SHARED_LIBS += gvplugin_gdk_pixbuf	0.0 # 6.0
d26 2
a29 1
SHARED_LIBS += graph			2.0 # 5.0
d35 5
a39 5
SHARED_LIBS += gdtclft			2.0 # unknown
SHARED_LIBS += tcldot			2.0 # unknown
SHARED_LIBS += tcldot_builtin		2.0 # unknown
SHARED_LIBS += tclplan			2.0 # unknown
SHARED_LIBS += tkspline			2.0 # unknown
d51 1
a51 1
LIB_DEPENDS=	graphics/jpeg \
d58 4
a61 1
		${_MODTK_SPEC}:x11/tk/${MODTK_VERSION}
d65 1
a65 1
TEST_DEPENDS=math/graphviz
d67 3
a69 3
WANTLIB += GL ICE SM X11 Xau Xaw Xcomposite Xcursor Xdamage Xdmcp
WANTLIB += Xext Xfixes Xi Xinerama Xmu Xpm Xrandr Xrender Xt Xxf86vm
WANTLIB += atk-1.0 c cairo croco-0.6 drm expat ffi fontconfig
d71 5
a75 4
WANTLIB += gmodule-2.0 gobject-2.0 gthread-2.0 gtk-x11-2.0 jpeg
WANTLIB += ltdl m pango-1.0 pangocairo-1.0 pangoft2-1.0 pcre pixman-1
WANTLIB += png pthread pthread-stubs rsvg-2 stdc++ xcb xcb-render
WANTLIB += xcb-shm xml2 z ${MODTK_LIB} Xft Xss perl util
d137 1
a137 1
	@@# install pre-generated config6 to avoid @@exec/@@unexec-delete
d140 7
@


1.53
log
@make very sure we pick up the intended Tcl/Tk version, otherwise Tk
detection will fail in configure
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/05/06 18:50:47 zhuk Exp $
d45 1
a45 1
# Common public licence
@


1.52
log
@No need for pre-configure here: file being patched does not go to binary
package, and is not called as executable script but as
"$(TCLSH) gv_doc_writer.tcl" instead.

okay edd@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2013/03/21 08:46:33 ajacoutot Exp $
d76 1
d81 2
a82 1
		--with-tcl=${MODTCL_BIN} \
@


1.52.2.1
log
@Security fix for CVE-2014-0978, CVE-2014-1236

ok edd@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/05/06 18:50:47 zhuk Exp $
a6 1
REVISION-main=	0
@


1.51
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2013/03/11 11:23:54 espie Exp $
a120 3

pre-configure:
	${MODTCL_TCLSH_ADJ} ${WRKDIST}/tclpkg/gv/gv_doc_writer.tcl
@


1.50
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/08/31 19:50:01 edd Exp $
a72 1
USE_LIBTOOL=	Yes
@


1.49
log
@Automate graphviz regression tests.

OK (and some input from) ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/08/22 22:15:49 edd Exp $
a45 3
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
d62 1
a62 1
REGRESS_DEPENDS=math/graphviz
d143 1
a143 1
do-regress:
@


1.48
log
@Missing lang/guile LIB_DEPENDS.

Noticed by nigel@@, OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2012/08/22 09:55:01 edd Exp $
d65 2
d141 11
@


1.47
log
@Clean up and Update to graphviz-2.28.0.

Taking MAINTAINER (discussed with espie on icb).

OK ajacoutot@@, sebastia@@

At some point in the future, the language bindings should be
multi-packaged, but that is another story.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/11/03 20:28:09 jasper Exp $
d63 2
a64 2
BUILD_DEPENDS=	devel/swig

@


1.46
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/09/16 10:31:22 espie Exp $
d5 1
a5 1
DISTNAME=	graphviz-2.12
a6 1
REVISION-main=	16
d8 3
d18 22
a39 34
SHARED_LIBS +=	gvplugin_core        0.0      # .3.0
SHARED_LIBS +=	gvplugin_gd          0.0      # .3.0
SHARED_LIBS +=	gvplugin_pango       0.0      # .3.0
SHARED_LIBS +=	gvplugin_dot_layout  0.0      # .3.0
SHARED_LIBS +=	gvplugin_neato_layout 0.0      # .3.0
SHARED_LIBS +=	gvplugin_xlib        0.0      # .3.0
SHARED_LIBS +=	gvplugin_gtk         0.0      # .3.0
SHARED_LIBS +=	gvplugin_dot_layout  0.0      # .3.0
SHARED_LIBS +=	gvplugin_neato_layout 0.0      # .3.0

SHARED_LIBS +=	cdt                  0.0      # .3.0
SHARED_LIBS +=	graph                1.0      # .3.0
SHARED_LIBS +=	agraph               0.1      # .3.0
SHARED_LIBS +=	pathplan             1.0      # .3.0
SHARED_LIBS +=	gvc                  0.0      # .3.0
SHARED_LIBS +=	gvc_builtins         0.0      # .3.0
SHARED_LIBS +=	expr                 0.0      # .3.0
SHARED_LIBS +=	gdtclft              1.0      # .0.0
SHARED_LIBS +=	tcldot               1.0      # .0.0
SHARED_LIBS +=	tcldot_builtin       1.0      # .0.0
SHARED_LIBS +=	tclplan              1.0      # .0.0
SHARED_LIBS +=	tkspline             1.0      # .0.0
SHARED_LIBS +=	gv_guile             0.0      # .0.0
SHARED_LIBS +=	gv_perl              0.0      # .0.0
SHARED_LIBS +=	gv_tcl               0.0      # .0.0
SHARED_LIBS +=	graph                1.0      # .3.0
SHARED_LIBS +=	agraph               0.1      # .3.0
SHARED_LIBS +=	gvc                  0.0      # .3.0
SHARED_LIBS +=	gvc_builtins         0.0      # .3.0
SHARED_LIBS +=	tcldot               1.0      # .0.0
SHARED_LIBS +=	tclplan              1.0      # .0.0
SHARED_LIBS +=	gv_guile             0.0      # .0.0
SHARED_LIBS +=	gv_perl              0.0      # .0.0
SHARED_LIBS +=	gv_tcl               0.0      # .0.0
d43 1
a43 1
MAINTAINER=	Marc Espie <espie@@openbsd.org>
d51 3
a53 7
WANTLIB=	ICE SM X11 Xau Xaw Xcomposite Xcursor Xdamage Xdmcp \
		Xext Xfixes Xi Xinerama Xmu Xpm Xrandr Xrender Xt \
		c dbus-1 dbus-glib-1 expat fontconfig freetype m pcre \
		pthread-stubs util xcb z jpeg tk84 gd ffi \
		png ltdl pthread stdc++ xcb-render GL Xxf86vm drm xcb-shm

MODULES=	devel/gettext
d57 16
a72 24
		tk->=8.4,<8.5:x11/tk/8.4 \
		graphics/gd>=2.0.34

# cairo stuff
LIB_DEPENDS+= 	x11/gtk+2

WANTLIB+=	cairo>=5 pango-1.0 pangocairo-1.0 pangoft2-1.0 \
		gmodule-2.0 glib-2.0 gobject-2.0 pixman-1 gdk_pixbuf-2.0 \
		gdk-x11-2.0 gtk-x11-2.0

# gnome stuff
LIB_DEPENDS+=	x11/gnome/libgnomeui

WANTLIB+=	atk-1.0 crypto gthread-2.0 ssl gio-2.0 \
		ORBit-2 ORBitCosNaming-2 art_lgpl_2 bonobo-2 \
		bonobo-activation bonoboui-2 gconf-2 gnome-2 \
		gnome-keyring gnomecanvas-2 gnomevfs-2 popt xml2 gailutil \
		gnomeui-2 canberra gcrypt gpg-error vorbis vorbisfile ogg

RUN_DEPENDS=	tk->=8.4,<8.5:x11/tk/8.4 \
		tcl->=8.4.7p5,<8.5:lang/tcl/8.4 \
		lang/guile
BUILD_DEPENDS=	${RUN_DEPENDS} \
		devel/swig
d75 1
a76 1
AUTOCONF_VERSION=2.59
d79 4
a87 1
		--disable-perl \
d91 8
d103 2
a104 3
		TCLCONFIG=${LOCALBASE}/lib/tcl/tcl8.4/tclConfig.sh \
		TKCONFIG=${LOCALBASE}/lib/tcl/tk8.4/tkConfig.sh \
		PKG_CONFIG=/usr/bin/pkg-config
d109 4
a112 2
MAKE_FLAGS=	TCL_STUB_LIB_SPEC='-L${LOCALBASE}/lib -ltclstub84_pic' \
		TK_STUB_LIB_SPEC='-L${LOCALBASE}/lib -ltkstub84_pic'
d122 4
d136 9
a144 4
	cd ${PREFIX}/share/examples/graphviz/demo && \
	    perl -pi -e 's/^exec tclsh/exec tclsh8.4/' entities gcat
	cd ${PREFIX}/share/examples/graphviz/demo && \
	    perl -pi -e 's/^exec wish/exec wish8.4/' doted pathplan spline
@


1.45
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/05/11 07:45:52 ajacoutot Exp $
d7 1
a7 1
REVISION-main=	15
d64 2
a65 2
		pthread-stubs util xcb z jpeg tk84 gd \
		png ltdl pthread stdc++ xcb-render xcb-render-util
@


1.44
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/01/05 19:37:11 landry Exp $
d7 1
a7 1
REVISION-main=	14
@


1.43
log
@Pass TKCONFIG/TCLCONFIG in CONFIGURE_ENV so that it's correctly picked
after tcl/tk.port.mk changes. Update PLIST while here (adds a bunch of
@@bin markers)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2010/11/22 09:28:34 espie Exp $
d7 1
a7 1
REVISION-main=	13
@


1.42
log
@missed some
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2010/11/19 07:23:10 espie Exp $
d7 1
a7 1
REVISION-main=	12
d114 2
@


1.41
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/10/24 21:25:50 ajacoutot Exp $
d82 1
a82 1
LIB_DEPENDS+=	::x11/gnome/libgnomeui
@


1.40
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/10/18 20:52:05 espie Exp $
d68 5
a72 5
LIB_DEPENDS=	::graphics/jpeg \
		::graphics/png \
		::devel/libtool,-ltdl \
		:tk->=8.4,<8.5:x11/tk/8.4 \
		:gd->=2.0.34:graphics/gd
d75 1
a75 1
LIB_DEPENDS+= 	::x11/gtk+2
d77 1
a77 1
WANTLIB+=	cairo.>=5 pango-1.0 pangocairo-1.0 pangoft2-1.0 \
d90 3
a92 3
RUN_DEPENDS=	:tk->=8.4,<8.5:x11/tk/8.4 \
		:tcl->=8.4.7p5,<8.5:lang/tcl/8.4 \
		::lang/guile
d94 1
a94 1
		::devel/swig
@


1.39
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/10/11 08:15:37 jasper Exp $
a95 1
USE_X11=	Yes
@


1.38
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/09/30 19:27:40 jasper Exp $
d98 1
@


1.37
log
@- fix DEPENDS/WANTLIB spotted by landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/08/09 08:55:43 espie Exp $
d7 1
a7 1
REVISION-main=	11
d77 1
a77 1
WANTLIB+=	cairo.>=5 glitz pango-1.0 pangocairo-1.0 pangoft2-1.0 \
@


1.36
log
@Fix DEPENDS after gtk+2 and gdk-pixbuf split.

ok jasper@@
@
text
@d7 1
a7 1
REVISION-main=	10
a62 1
		avahi-client avahi-common avahi-glib \
d64 2
a65 1
		pthread-stubs util xcb z
d68 5
a72 5
LIB_DEPENDS=	jpeg.>=62::graphics/jpeg \
		png.>=2::graphics/png \
		ltdl::devel/libtool,-ltdl \
		tk84:tk->=8.4,<8.5:x11/tk/8.4 \
		gd.>=20.34:gd->=2.0.34:graphics/gd
d75 1
a75 1
LIB_DEPENDS+= 	gdk-x11-2.0,gtk-x11-2.0::x11/gtk+2
d78 2
a79 1
		gmodule-2.0 glib-2.0 gobject-2.0 pixman-1 gdk_pixbuf-2.0
d82 1
a82 1
LIB_DEPENDS+=	gnomeui-2::x11/gnome/libgnomeui
d87 2
a88 1
		gnome-keyring gnomecanvas-2 gnomevfs-2 popt xml2 gailutil
@


1.35
log
@fix dot, regen other patches.
patch from edd@@, committed by me since we're running out of time.
sorry edd for not checking this earlier.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/07/18 10:30:41 steven Exp $
d7 1
a7 1
REVISION-main=	9
d75 1
a75 1
LIB_DEPENDS+= 	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2
d78 1
a78 1
		gmodule-2.0 glib-2.0 gobject-2.0 pixman-1
@


1.34
log
@REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2009/06/10 20:27:09 kili Exp $
d7 1
a7 1
REVISION-main=	8
@


1.33
log
@WANTLIB changes after xcb addition and bump.
@
text
@d6 2
a7 1
PKGNAME-main=	${DISTNAME}p8
@


1.32
log
@
WANTLIB changes due to avahi dependency. Bump affected PKGNAMEs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/03/15 09:25:04 espie Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p7
d64 1
a64 1
		util z
@


1.31
log
@more depends fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/01/20 23:15:39 ajacoutot Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p6
d62 1
@


1.30
log
@- regen WANTLIB after libgnome esound support removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/06/29 20:44:52 sthen Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p5
d69 1
a69 1
		tk84::x11/tk/8.4 \
d86 2
a87 2
RUN_DEPENDS=	:tk-8.4.*:x11/tk/8.4 \
		:tcl->=8.4.7p5:lang/tcl/8.4 \
@


1.29
log
@sync WANTLIB following cairo update. ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/05/31 23:04:38 jasper Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p4
d81 3
a83 3
WANTLIB+=	atk-1.0 crypto gthread-2.0 ssl \
		ORBit-2 ORBitCosNaming-2 art_lgpl_2 audiofile bonobo-2 \
		bonobo-activation bonoboui-2 esd gconf-2 gnome-2 \
@


1.28
log
@- gettext already pulls in libiconv, so no need to do it twice

from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/01/04 17:48:36 espie Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p3
d76 1
a76 1
		gmodule-2.0 glib-2.0 gobject-2.0
d84 1
a84 1
		gnome-keyring gnomecanvas-2 gnomevfs-2 popt xml2
@


1.27
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2007/11/14 19:27:35 merdely Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p2
d65 1
a65 1
MODULES=	converters/libiconv devel/gettext
@


1.26
log
@Fix WANTLIB

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/11/14 09:43:40 steven Exp $
a125 1
		${MAKE_FLAGS}
@


1.25
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/09/15 18:44:36 steven Exp $
d60 4
a63 3
WANTLIB=	ICE SM X11 Xaw Xext Xmu Xpm Xrender Xrandr Xt c dbus-1 \
		Xau Xcomposite Xcursor Xdamage Xdmcp Xfixes Xi Xinerama
		dbus-glib-1 expat fontconfig freetype m pcre util z
@


1.24
log
@remove quotes from COMMENT/PERMIT*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/05/29 11:22:30 kili Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p1
d59 4
a62 2
WANTLIB=		ICE SM X11 Xaw Xext Xmu Xpm Xrender Xt c dbus-1 \
			dbus-glib-1 expat fontconfig freetype m util z
@


1.23
log
@
Don't use RUN_DEPENDS=${BUILD_DEPENDS}.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/05/04 11:33:14 bernd Exp $
d3 1
a3 1
COMMENT-main=	"graph drawing software"
@


1.22
log
@Use xenocara expat and fix WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/02/21 16:37:34 espie Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}p0
d83 1
a83 1
BUILD_DEPENDS=	:tk-8.4.*:x11/tk/8.4 \
a84 1
		::devel/swig \
d86 2
a87 1
RUN_DEPENDS=	${BUILD_DEPENDS}
@


1.21
log
@build depends do not recurse.
noticed by steve andre.
no package change -> no bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2007/02/20 11:47:07 espie Exp $
d6 1
a6 1
PKGNAME-main=	${DISTNAME}
d59 2
a60 2
WANTLIB=		ICE SM X11 Xaw Xext Xmu Xpm Xt c fontconfig freetype \
			m z Xrender
d63 1
a63 2
LIB_DEPENDS=	expat::textproc/expat \
		jpeg.>=62::graphics/jpeg \
@


1.20
log
@finally update to graphviz 2.12
initial port, most things appear to work after fixes to handle new gd,
to get plugins to work, and to fix xlib output).

Set up as a MULTI_PACKAGES so that we can sort further components into
distinct parts later.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/11/13 12:53:08 steven Exp $
d86 2
a87 1
		::devel/swig
@


1.19
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/08/03 20:04:51 espie Exp $
d3 1
a3 1
COMMENT=	"graph drawing software"
d5 2
a6 2
DISTNAME=	graphviz-1.16
PKGNAME=	${DISTNAME}p2
d8 1
d10 39
a48 19
SHARED_LIBS=	agraph		0.0 \
		cdt		0.0 \
		circogen	0.0 \
		common		0.0 \
		dotgen		0.0 \
		dotneato	0.0 \
		expr		0.0 \
		fdpgen		0.0 \
		gdtclft		0.0 \
		graph		0.0 \
		gvgd		0.0 \
		gvrender	0.0 \
		neatogen	0.0 \
		pack		0.0 \
		pathplan	0.0 \
		tcldot		0.0 \
		tclplan		0.0 \
		tkspline	0.0 \
		twopigen	0.0
d54 3
a56 3
PERMIT_DISTFILES_FTP=	No
PERMIT_DISTFILES_CDROM=	No
# As long as the licence is shown, everything is fine
d59 2
a60 3
WANTLIB=		ICE SM X11 Xaw Xext Xmu Xpm Xt c fontconfig freetype m z

MASTER_SITES=	${HOMEPAGE}pub/graphviz/ARCHIVE/
d62 2
a63 2
MODULES=	converters/libiconv
LIB_DEPENDS=	expat.>=4::textproc/expat \
d65 22
a86 2
		png.>=2::graphics/png
BUILD_DEPENDS=	:tk-8.4.*:x11/tk/8.4
d91 1
d94 14
a107 4
		--enable-static \
		--with-mylibgd
CONFIGURE_ENV=	CPPFLAGS="-I${X11BASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib"
d112 3
d122 2
a123 1
		undirecteddir="${EXBASE}/graphs/undirected"
d125 7
a131 12
SUBST_VARS=	PKGNAME

.include <bsd.own.mk>

ACCEPT_GRAPHVIZ_LICENSE?=No
post-extract:
.if ${ACCEPT_GRAPHVIZ_LICENSE:L} == "no"
	@@echo "You must read ${WRKDIST}/COPYING first"
	@@echo "To accept the license, restart the build with"
	@@echo "ACCEPT_GRAPHVIZ_LICENSE=Yes"
	@@exit 1
.endif
d134 4
a137 3
.for _n _e in ${SHARED_LIBS}
	@@cd ${PREFIX}/lib && ln -s graphviz/lib${_n}.so.${_e} .
.endfor
@


1.18
log
@more new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/01/06 18:58:31 steven Exp $
d49 1
@


1.17
log
@remove MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/12/26 16:11:29 steven Exp $
d43 3
a45 3
LIB_DEPENDS=	expat.4::textproc/expat \
		jpeg.62::graphics/jpeg \
		png.2::graphics/png
@


1.16
log
@SHARED_LIBS and USE_LIBTOOL
"go ahead" espie@@
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.15 2005/03/14 15:27:13 alek Exp $

a27 19
MODGNU_SHARED_LIBS=	agraph		'' \
			cdt		'' \
			circogen	'' \
			common		'' \
			dotgen		'' \
			dotneato	'' \
			expr		'' \
			fdpgen		'' \
			gdtclft		'' \
			graph		'' \
			gvgd		'' \
			gvrender	'' \
			neatogen	'' \
			pack		'' \
			pathplan	'' \
			tcldot		'' \
			tclplan		'' \
			tkspline	'' \
			twopigen	''
@


1.15
log
@- Better *DEPENDS for x11/tk/8.4
- Fix MODULE as only converters/libiconv is needed
- Put LOCALBASE/lib before X11BASE/lib so correct version of libexpat will
  be used
- Bump PKGNAME

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/12/27 07:16:44 alek Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
d10 39
d69 1
d103 3
a105 1
	@@cd ${PREFIX}/lib && ln -s graphviz/lib*.so.0.0 .
@


1.14
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/12/21 11:36:43 espie Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
d23 1
a23 1
MODULES=	gettext
d26 3
a28 2
                png.2::graphics/png \
		tk84.1:tk-8.4.*:x11/tk/8.4
d35 1
a35 1
		LDFLAGS="-L${X11BASE}/lib"
@


1.13
log
@fix tk depend
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/11/27 12:10:43 sturm Exp $
d19 1
@


1.12
log
@update to graphviz 1.16

maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/08/17 19:33:09 espie Exp $
d7 1
d26 1
a26 1
		tk84.1::x11/tk/8.4
@


1.11
log
@fixes for recent libtool changes. Blasted libtool is harder to fool...
okay naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/03/04 01:48:02 naddy Exp $
d3 4
d9 2
a10 4
COMMENT='graph drawing software'
PKGNAME=graphviz-1.7.6
DISTFILES=gviz176.tgz
DISTNAME=gv1.7.6
a12 3
HOMEPAGE=http://www.research.att.com/sw/tools/graphviz/
MASTER_SITES=${HOMEPAGE}dist/

d19 8
d28 19
a46 12
USE_LIBTOOL=yes
CONFIGURE_ENV=TCLCONFIG=${LOCALBASE}/lib/tcl8.4/tclConfig.sh \
	TKCONFIG=${LOCALBASE}/lib/tk8.4/tkConfig.sh \
	LIBS=-lz \
	LDFLAGS=-L${LOCALBASE}/lib \
	CPPFLAGS='-I${LOCALBASE}/include -I${LOCALBASE}/include/tcl8.4 -I${LOCALBASE}/include/tk8.4 -I${X11BASE}/include'

CONFIGURE_ARGS=	--with-freetypeincludedir=${X11BASE}/include/freetype2 \
		--with-pngincludedir=${LOCALBASE}/include/libpng
CONFIGURE_SCRIPT=autogen.sh
CONFIGURE_ENV+=AUTOCONF_VERSION=${AUTOCONF_VERSION}
USE_GMAKE=	Yes
a56 2
.else
	@@cat ${LOCALBASE}/share/aclocal/libtool.m4 >>${WRKSRC}/aclocal.m4
a58 10
LIB_DEPENDS=	tcl84.::lang/tcl/8.4 \
		tk84.::x11/tk/8.4 \
		jpeg.62::graphics/jpeg \
		png.2::graphics/png

AUTOCONF_VERSION=	2.59
BUILD_DEPENDS=	::devel/autoconf/${AUTOCONF_VERSION} \
		::devel/metaauto \
		::devel/automake

d60 1
a60 4
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/graphviz
	${INSTALL_DATA} ${WRKDIST}/{COPYING,MINTERMS.txt,FAQ.txt} ${PREFIX}/share/doc/graphviz

SUBST_VARS=PKGNAME
@


1.10
log
@fix include path for freetype and remove old autotools kludge
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/12/27 23:31:16 jose Exp $
d37 1
a38 1
post-extract:
d43 2
d52 1
a52 1
AUTOCONF_VERSION=	2.13
@


1.9
log
@
update to tcl/tk 8.4
add patch to make tcl libs work (didn't work before, either)
ok naddy@@ brad@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/02/15 14:35:39 espie Exp $
d26 1
a26 1
	CPPFLAGS='-I${LOCALBASE}/include -I${LOCALBASE}/include/tcl8.4 -I${LOCALBASE}/include/tk8.4'
a53 3

pre-configure:
	@@rm ${WRKDIR}/bin/automake ${WRKDIR}/bin/aclocal
@


1.8
log
@fix autoconf stuff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/07/18 15:15:05 brad Exp $
d22 2
a23 2
CONFIGURE_ENV=TCLCONFIG=${LOCALBASE}/lib/tcl8.3/tclConfig.sh \
	TKCONFIG=${LOCALBASE}/lib/tk8.3/tkConfig.sh \
d26 1
a26 1
	CPPFLAGS='-I${LOCALBASE}/include -I${LOCALBASE}/include/tcl8.3 -I${LOCALBASE}/include/tk8.3'
d45 2
a46 2
LIB_DEPENDS=	tcl83.::lang/tcl/8.3 \
		tk83.::x11/tk/8.3 \
@


1.7
log
@png header path change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/03/25 00:13:44 naddy Exp $
d31 1
d50 3
a52 1
BUILD_DEPENDS=	::devel/autoconf \
@


1.6
log
@we need to run automake but can't use CONFIGURE_STYLE=automake here
ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/11/10 15:00:48 espie Exp $
a3 1
NEED_VERSION=	1.489
d28 2
a29 1
CONFIGURE_ARGS=--with-freetypeincludedir=${X11BASE}/include/freetype2
@


1.5
log
@Kill first component of BUILD_DEPENDS.

Fix sawfish comment while I'm at it.
`window manager for the X windows system'.
Like DUH ! It's going to be a window manager for my microwave oven ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/07/29 12:19:49 espie Exp $
d51 3
@


1.4
log
@get licence from bsd.own.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/06/11 00:32:53 brad Exp $
d4 1
a4 1
NEED_VERSION=	1.406
d49 2
a50 2
BUILD_DEPENDS=	autoconf::devel/autoconf \
		automake::devel/automake
@


1.3
log
@fill in library rev #'s for jpeg and png dependency entries.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/06/09 23:36:34 espie Exp $
d33 2
a35 1

@


1.2
log
@Bad cat. Thx Peter.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/06/09 20:38:01 espie Exp $
d45 2
a46 2
		jpeg.::graphics/jpeg \
		png.::graphics/png
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
CATEGORIES=	math devel graphic
@


1.1.1.1
log
@graph placement and visualisation package. Developed by AT&T.
@
text
@@
