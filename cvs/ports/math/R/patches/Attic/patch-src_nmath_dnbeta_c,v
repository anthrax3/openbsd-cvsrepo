head	1.2;
access;
symbols
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.09.10.20.50.31;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2008.07.26.14.59.45;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@don't round to double-precision anymore, since libc got extended-precision
functions now.  ok sthen@@
@
text
@$OpenBSD: patch-src_nmath_dnbeta_c,v 1.1 2008/07/26 14:59:45 martynas Exp $
--- src/nmath/dnbeta.c.orig	Wed Sep  5 01:13:30 2007
+++ src/nmath/dnbeta.c	Sat Jul 26 13:56:45 2008
@@@@ -79,7 +79,7 @@@@ double dnbeta(double x, double a, double b, double lam
 	return dbeta(x, a, b, give_log);
 
     term = dbeta(x, a, b, /* log = */ FALSE);
-    if(!R_FINITE(term)) /* in particular, if term = +Inf */
+    if(!R_FINITE((double)term)) /* in particular, if term = +Inf */
 	return R_D_val(term);
     lambda2 = 0.5 * lambda;
     weight = exp(- lambda2);
@


1.1
log
@we don't yet have extended-precision version of isfinite, this is
what will be added post-release
for now __isinf will do, relying on the ieee 754 fact that long
infinity assigned to double infinity will be infinity
XXX: remove post-release
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@

