head	1.5;
access;
symbols
	OPENBSD_4_8:1.4.0.12
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.10
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.8
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.6
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4;
locks; strict;
comment	@# @;


1.5
date	2010.10.24.19.28.50;	author steven;	state dead;
branches;
next	1.4;

1.4
date	2007.09.07.15.55.25;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2007.04.20.19.11.51;	author martynas;	state dead;
branches;
next	1.2;

1.2
date	2007.03.27.20.12.59;	author martynas;	state Exp;
branches;
next	1.1;

1.1
date	2007.03.24.14.14.50;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to 4.0
switch to cmake

from Alexandr Shadchin
@
text
@$OpenBSD: patch-libs_libFreeMat_Print_cpp,v 1.4 2007/09/07 15:55:25 steven Exp $
--- libs/libFreeMat/Print.cpp.orig	Fri Sep  7 11:09:49 2007
+++ libs/libFreeMat/Print.cpp	Fri Sep  7 11:10:16 2007
@@@@ -180,13 +180,13 @@@@ void ComputeScaleFactor(const T* array, int count, Arr
   }
   if (!finiteElementFound) return;
   if (max_amplitude >= 100)
-    format.scalefact = pow(10.0,floor(log10(max_amplitude)));
+    format.scalefact = pow(10.0,floor(log10((double)max_amplitude)));
   else if (max_amplitude <= -100)
-    format.scalefact = pow(10.0,floor(log10(-max_amplitude)));
+    format.scalefact = pow(10.0,floor(log10((double)-max_amplitude)));
   else if ((max_amplitude <= .1) && (max_amplitude>0))
-    format.scalefact = pow(10.0,floor(log10(max_amplitude)));
+    format.scalefact = pow(10.0,floor(log10((double)max_amplitude)));
   else if ((max_amplitude >= -.1) && (max_amplitude<0))
-    format.scalefact = pow(10.0,floor(log10(-max_amplitude)));
+    format.scalefact = pow(10.0,floor(log10((double)-max_amplitude)));
   else
     format.scalefact = 1.0;
 }
@


1.4
log
@update to freemat 3.4

looks ok to martynas@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@update to 3.1, which includes our all patches (and introduces some new
ones);

3.1 is a bugfix release, but also includes new threading api, perl-style
regular expressions, and the regression test suite (use run_tests).

ok steven@@
@
text
@d1 20
a20 18
$OpenBSD: patch-libs_libFreeMat_Print_cpp,v 1.2 2007/03/27 20:12:59 martynas Exp $
--- libs/libFreeMat/Print.cpp.orig	Tue Jan  2 00:31:44 2007
+++ libs/libFreeMat/Print.cpp	Tue Mar 27 18:03:27 2007
@@@@ -27,7 +27,7 @@@@ int GetNominalWidthInteger(const T*array, int count) {
   int maxdigit = 0;
   for (int i=0;i<count;i++) {
     memset(buffer,0,MSGBUFLEN);
-    sprintf(buffer,"%lld",array[i]);
+    sprintf(buffer,"%lld",(int64)array[i]);
     int j = maxdigit;
     while (buffer[j] && j>=maxdigit)
       j++;
@@@@ -39,7 +39,7 @@@@ int GetNominalWidthInteger(const T*array, int count) {
 template <class T>
 void PrintIntegers(const T*array, int count, int width) {
   for (int i=0;i<count;i++)
-    printf("%*lld\n",width,array[i]);
+    printf("%*lld\n",width,(int64)array[i]);
a21 17
   
 template <class T>
@@@@ -417,12 +417,12 @@@@ void PrintSheet(ArrayFormat format, Interpreter*io, in
   // the terminal width
   int colsPerPage;
   if (aclass != FM_STRING)
-    colsPerPage = (int) floor((termWidth-1)/((float) format.width + 3));
+    colsPerPage = (int) floor((termWidth-1)/((double) format.width + 3));
   else
     colsPerPage = termWidth;
   colsPerPage = (colsPerPage < 1) ? 1 : colsPerPage;
   int pageCount;
-  pageCount = (int) ceil(columns/((float)colsPerPage));
+  pageCount = (int) ceil(columns/((double)colsPerPage));
   for (int k=0;k<pageCount;k++) {
     int colsInThisPage;
     colsInThisPage = columns - colsPerPage*k;
@


1.2
log
@- fix ceil for amd64;
- fix (hidden) measuring bug on non-64bit;
- fix crashes in save and copy operations;
"go ahead" steven@@
@
text
@d1 1
a1 1
$OpenBSD: patch-libs_libFreeMat_Print_cpp,v 1.1 2007/03/24 14:14:50 martynas Exp $
@


1.1
log
@update to freemat 3.0
you need at least 9 days old current system for it (correct
_POSIX_THREAD_ATTR_STACKSIZE define for qt4).
all the patches already got committed upstream.
"please commit!" steven@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 20
a22 2
+++ libs/libFreeMat/Print.cpp	Sat Mar 24 15:46:48 2007
@@@@ -417,7 +417,7 @@@@ void PrintSheet(ArrayFormat format, Interpreter*io, in
d31 6
@

