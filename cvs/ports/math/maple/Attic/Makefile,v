head	1.33;
access;
symbols
	OPENBSD_5_5:1.32.0.4
	OPENBSD_5_5_BASE:1.32
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.31.0.6
	OPENBSD_5_3_BASE:1.31
	OPENBSD_5_2:1.31.0.4
	OPENBSD_5_2_BASE:1.31
	OPENBSD_5_1_BASE:1.31
	OPENBSD_5_1:1.31.0.2
	OPENBSD_5_0:1.30.0.4
	OPENBSD_5_0_BASE:1.30
	OPENBSD_4_9:1.30.0.2
	OPENBSD_4_9_BASE:1.30
	OPENBSD_4_8:1.27.0.2
	OPENBSD_4_8_BASE:1.27
	OPENBSD_4_7:1.26.0.4
	OPENBSD_4_7_BASE:1.26
	OPENBSD_4_6:1.26.0.2
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.25.0.6
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.25.0.4
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.25.0.2
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.24.0.4
	OPENBSD_4_2_BASE:1.24
	OPENBSD_4_1:1.24.0.2
	OPENBSD_4_1_BASE:1.24
	OPENBSD_4_0:1.23.0.4
	OPENBSD_4_0_BASE:1.23
	OPENBSD_3_9:1.23.0.2
	OPENBSD_3_9_BASE:1.23
	OPENBSD_3_8:1.22.0.12
	OPENBSD_3_8_BASE:1.22
	OPENBSD_3_7:1.22.0.10
	OPENBSD_3_7_BASE:1.22
	OPENBSD_3_6:1.22.0.8
	OPENBSD_3_6_BASE:1.22
	OPENBSD_3_5:1.22.0.6
	OPENBSD_3_5_BASE:1.22
	OPENBSD_3_4:1.22.0.4
	OPENBSD_3_4_BASE:1.22
	OPENBSD_3_3:1.22.0.2
	OPENBSD_3_3_BASE:1.22
	OPENBSD_3_2:1.21.0.2
	OPENBSD_3_2_BASE:1.21
	OPENBSD_3_1:1.20.0.2
	OPENBSD_3_1_BASE:1.20
	OPENBSD_3_0:1.19.0.2
	OPENBSD_3_0_BASE:1.19
	OPENBSD_2_9_TRACKING_SWITCH:1.18
	OPENBSD_2_9:1.15.0.2
	OPENBSD_2_9_BASE:1.15
	OPENBSD_2_8:1.14.0.2
	OPENBSD_2_8_BASE:1.14
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	espie:1.1.1.1
	Waterloo:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2014.03.23.18.50.39;	author naddy;	state dead;
branches;
next	1.32;

1.32
date	2013.03.11.11.23.55;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2011.10.21.21.40.49;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.27.11.54.53;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.22.09.28.34;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2010.10.18.20.52.06;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2010.07.18.10.50.12;	author steven;	state Exp;
branches;
next	1.26;

1.26
date	2009.04.13.12.27.38;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2007.09.15.18.44.36;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2006.10.19.09.56.17;	author sturm;	state Exp;
branches;
next	1.23;

1.23
date	2005.10.01.14.39.52;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2002.12.29.19.43.50;	author fgsch;	state Exp;
branches;
next	1.21;

1.21
date	2002.06.09.05.36.53;	author wilfried;	state Exp;
branches;
next	1.20;

1.20
date	2001.11.13.22.13.23;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2001.09.16.17.02.02;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2001.07.30.13.15.24;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2001.07.30.13.12.10;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2001.05.06.01.58.53;	author lebel;	state Exp;
branches;
next	1.15;

1.15
date	2001.02.16.14.51.16;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2000.10.29.17.29.31;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.10.24.16.28.04;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.10.22.15.28.18;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.10.10.00.40.50;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.06.16.23.06.08;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.01.17.47.42;	author espie;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2000.03.13.18.43.33;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.02.13.19.13.22;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2000.02.11.01.10.06;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.02.10.09.38.03;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	99.10.29.10.57.16;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	99.09.22.10.18.26;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	99.06.18.15.32.16;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	99.05.22.00.24.58;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.05.22.00.24.58;	author espie;	state Exp;
branches;
next	;

1.9.2.1
date	2000.09.15.05.03.04;	author marc;	state Exp;
branches;
next	;


desc
@@


1.33
log
@remove Maple, ancient Linux/i386 version of commerical software; ok espie@@
@
text
@# $OpenBSD: Makefile,v 1.32 2013/03/11 11:23:55 espie Exp $
# Original from: Marc Espie
# XXX This port installs in a somewhat unusual way.

.include <bsd.own.mk>

COMMENT=	algebraic and symbolic computations; commercial

# where the basic distribution unpacks
MAPLE_DIR?=${PREFIX}/maple
TRUEMAPLE_DIR?=${TRUEPREFIX}/maple

DISTNAME=	maple-5.5
REVISION=	2
CATEGORIES=     math

RUN_DEPENDS=	emulators/redhat/libc5

# if someone wants to buy the sparc version and check it, be my guest...

ONLY_FOR_ARCHS=	i386


FETCH_MANUALLY = "Mount the maple cdrom somewhere and make copy MAPLE_CDROM=mnt_point"
PERMIT_DISTFILES_FTP=	Commercial
PERMIT_PACKAGE_FTP=	Commercial
PERMIT_PACKAGE_CDROM=	Commercial

MAINTAINER=	Marc Espie <espie@@openbsd.org>

WRKDIST=	${WRKDIR}
USE_GROFF =	Yes

# we only use the CD-Rom files for markers
DIST_SUBDIR=maple5.5
DISTFILES= readme install \
install_base/base.tar install_base/bin.tar install_base/license.tar \
install_bins/bin_ibm_intel_linux.tar

# and so, we don't extract anything by ourselves
# better than NO_EXTRACT, as this builds WRKDIR correctly for us.
EXTRACT_ONLY=

COPY_CMD=cp -f

post-extract:
	ln -sf ${FILESDIR}/resolv_display.c ${WRKSRC}
	echo "all: resolv_display" >${WRKSRC}/Makefile

ALL_TARGET=resolv_display

copy:
	@@mkdir -p ${FULLDISTDIR}
	@@cd ${MAPLE_CDROM}; \
	for file in ${DISTFILES}; do\
		[ -f ${FULLDISTDIR}/$$file ] || \
		if [ -f $$file ]; \
		then\
			mkdir -p ${FULLDISTDIR}/`dirname $$file`;\
			${COPY_CMD} ${MAPLE_CDROM}/$$file ${FULLDISTDIR}/$$file;\
		else\
			echo "File $$file not found. Is your cdrom mounted as ${MAPLE_CDROM} ?";\
		fi\
	done

MAPLE_SCRIPTS=maple march mint updtsrc xmaple

do-install:
	@@mkdir -p ${MAPLE_DIR} || echo "${MAPLE_DIR} already exists"
	@@cd ${MAPLE_DIR} && yes | ${FULLDISTDIR}/install
	@@echo "But this installation script does it for you"
	@@for file in ${MAPLE_SCRIPTS}; do\
		sed -e 's,/usr/local/maple,${TRUEMAPLE_DIR},' ${MAPLE_DIR}/bin/$$file >${WRKDIST}/$$file; \
		cp ${WRKDIST}/$$file ${MAPLE_DIR}/bin; \
		ln -sf ${TRUEMAPLE_DIR}/bin/$$file ${PREFIX}/bin; \
	done
	@@for file in ${MAPLE_DIR}/man/man1/*; do \
		ln -s ${TRUEMAPLE_DIR}/man/man1/`basename $$file` ${PREFIX}/man/man1; \
	done
	@@cd ${MAPLE_DIR} && cat ${PATCHDIR}/install-*| patch -s && \
		rm ${MAPLE_DIR}/bin/*.orig
	@@${INSTALL_PROGRAM} ${WRKBUILD}/resolv_display ${MAPLE_DIR}/bin
	cd ${PREFIX} && find . -user 292 -print|xargs -r chown ${SHAREOWN}:${SHAREGRP}
	cd ${PREFIX} && find . -user 400 -print|xargs -r chown ${BINOWN}:${BINGRP}

.include <bsd.port.mk>
@


1.32
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/10/21 21:40:49 espie Exp $
@


1.31
log
@byebye pre-fetch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/27 11:54:53 espie Exp $
a24 1
PERMIT_DISTFILES_CDROM=	Commercial
@


1.30
log
@minor bumps after pkg_create fix: generate catN entry when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/22 09:28:34 espie Exp $
a33 4

# verify that it makes sense to install maple here
pre-fetch:
	@@echo "You must have LINUX_COMPAT in your kernel for this port"
@


1.29
log
@missed some
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/10/18 20:52:06 espie Exp $
d14 1
a14 1
REVISION=	1
@


1.28
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/07/18 10:50:12 steven Exp $
d17 1
a17 1
RUN_DEPENDS=	:redhat_libc5-*:emulators/redhat/libc5
@


1.27
log
@REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/09/15 18:44:36 steven Exp $
d33 1
@


1.26
log
@nothing special, let it be FETCH_MANUALLY
@
text
@d14 1
a14 1
PKGNAME=	${DISTNAME}p1
@


1.25
log
@remove quotes from COMMENT/PERMIT*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/10/19 09:56:17 sturm Exp $
a8 5
# Directory where the maple CDROM was mounted
.if !defined(MAPLE_CDROM)
IGNORE="Commercial port, mount the maple cdrom and build with make MAPLE_CDROM=mount_point"
.endif

d24 1
d40 1
a40 1
DISTFILES=readme install \
a47 4
COPY_MAPLE_DISTFILES?=No
.if ${COPY_MAPLE_DISTFILES:L} == "no"
COPY_CMD=ln -sf
.else
a48 1
.endif
d56 1
a56 1
do-fetch:
@


1.24
log
@switch to fedora_base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/10/01 14:39:52 espie Exp $
d7 1
a7 1
COMMENT=	"algebraic and symbolic computations; commercial"
@


1.23
log
@make this work again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/12/29 19:43:50 fgsch Exp $
d19 1
a19 1
PKGNAME=	${DISTNAME}p0
d22 1
a22 2
RUN_DEPENDS=	:redhat_base->=8.0:emulators/redhat/base \
		:redhat_libc5-*:emulators/redhat/libc5
@


1.22
log
@byebye NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/06/09 05:36:53 wilfried Exp $
d19 1
d22 2
a23 1
RUN_DEPENDS=	:redhat_base-*:emulators/redhat/base
d97 2
@


1.21
log
@add specifier to RUN_DEPENDS and BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/11/13 22:13:23 espie Exp $
a19 1
NEED_VERSION=	1.496
@


1.20
log
@Kill remaining RUN_DEPENDS/BUILD_DEPENDS first parters.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/09/16 17:02:02 naddy Exp $
d22 1
a22 1
RUN_DEPENDS=	::emulators/redhat/base
@


1.19
log
@fix dependency: emulators/redhat_base -> emulators/redhat/base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/07/30 13:15:24 espie Exp $
d20 1
a20 1
NEED_VERSION=	1.402
d22 1
a22 1
RUN_DEPENDS=	/emul/linux/usr/i486-linux-libc5/lib/libc.so.5::emulators/redhat/base
@


1.18
log
@...and include bsd.own.mk at top, so that I get my /etc/mk.conf read.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/07/30 13:12:10 espie Exp $
d22 1
a22 1
RUN_DEPENDS=	/emul/linux/usr/i486-linux-libc5/lib/libc.so.5::emulators/redhat_base
@


1.17
log
@Option to copy maple distfiles instead of linking files, since I always
get hosed with the CDRom at the office when reinstalling all ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/05/06 01:58:53 lebel Exp $
d4 2
@


1.16
log
@math: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/02/16 14:51:16 espie Exp $
d50 7
d71 1
a71 1
			ln -sf ${MAPLE_CDROM}/$$file ${FULLDISTDIR}/$$file;\
@


1.15
log
@switch over to redhat_base
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/10/29 17:29:31 espie Exp $
d5 2
d18 1
a18 1
NEED_VERSION=	1.223
@


1.14
log
@Add missing run dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/10/24 16:28:04 espie Exp $
d18 1
a18 1
RUN_DEPENDS=	/emul/linux/lib/libc.so.5::emulators/linux_lib
@


1.13
log
@Oops, again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/10/22 15:28:18 espie Exp $
d17 2
@


1.12
log
@Repair
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/10/10 00:40:50 espie Exp $
d54 1
a54 1
	@@cd ${CDROM}; \
d60 1
a60 1
			ln -sf ${CDROM}/$$file ${FULLDISTDIR}/$$file;\
d62 1
a62 1
			echo "File $$file not found. Is your cdrom mounted as ${CDROM} ?";\
@


1.11
log
@Fix my address. Dust off details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/06/16 23:06:08 espie Exp $
d80 1
a80 1
	@@cd ${MAPLE_DIR} && cat ${PATCHDIR}/patch-*| patch -s && \
@


1.10
log
@Remove NO_CONFIGURE/NO_PATCH/NO_EXTRACT/NO_MTREE

Kill corresponding FAKE=Yes and switch to CONFIGURE_STYLE while I'm at it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/04/01 17:47:42 espie Exp $
d22 1
a22 1
LICENSE_TYPE=COMM
d28 1
a28 1
MAINTAINER=	espie@@cvs.openbsd.org
@


1.9
log
@Set IGNORE unless MAPLE_CDROM is mounted, deals with package builders
problems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/03/13 18:43:33 espie Exp $
a30 2
NO_PATCH=	Yes
NO_CONFIGURE=	Yes
a67 1
FAKE=	Yes
@


1.9.2.1
log
@bring math as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/06/16 23:06:08 espie Exp $
d31 2
d70 1
@


1.8
log
@Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/02/13 19:13:22 espie Exp $
d6 3
a8 1
CDROM?=/cdrom
@


1.7
log
@LICENSE_TYPE=COMM
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/02/11 01:10:06 espie Exp $
a6 1
NEED_VERSION=1.191
d10 1
d14 1
d21 4
a24 3
# This should imply the following
NO_CDROM=	"Commercial"
MIRROR_DISTFILE=no
a30 1
NO_PACKAGE=	Yes
d68 1
d74 1
a74 1
		sed -e 's,/usr/local/maple,${MAPLE_DIR},' ${MAPLE_DIR}/bin/$$file >${WRKDIST}/$$file; \
d76 1
a76 1
		ln -sf ${MAPLE_DIR}/bin/$$file ${PREFIX}/bin; \
d79 1
a79 1
		ln -s $$file ${PREFIX}/man/man1; \
@


1.6
log
@Kill a large set of deprecated variables.
Thoroughly unsubtle, most mkdir -p should probably be INSTALL* at
*install stage, and echo/ECHO_MSG is somewhat unsorted.

It's quite possible I missed a few automated changes...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/02/10 09:38:03 espie Exp $
d18 3
@


1.5
log
@Remove NO_WRKSUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/10/29 10:57:16 espie Exp $
d58 1
a58 1
			${ECHO} "File $$file not found. Is your cdrom mounted as ${CDROM} ?";\
d65 1
a65 1
	@@mkdir -p ${MAPLE_DIR} || ${ECHO} "${MAPLE_DIR} already exists"
@


1.4
log
@Typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/09/22 10:18:26 espie Exp $
d7 1
a7 1
NEED_VERSION=1.116
d12 2
a13 2
DISTNAME=		maple-5.5
CATEGORIES=     	math
d18 2
a19 2
NO_CDROM=		"Commercial"
MIRROR_DISTFILE=	no
d21 1
a21 1
MAINTAINER=		espie@@cvs.openbsd.org
d23 4
a26 4
NO_WRKSUBDIR=  yes
NO_PATCH=		yes
NO_CONFIGURE=	yes
NO_PACKAGE=		yes
d30 1
a30 1
	@@${ECHO} "You must have LINUX_COMPAT in your kernel for this port"
d65 1
a65 1
	@@mkdir ${MAPLE_DIR} || ${ECHO} "${MAPLE_DIR} already exists"
d67 1
a67 1
	@@${ECHO} "But this installation script does it for you"
d69 2
a70 2
		sed -e 's,/usr/local/maple,${MAPLE_DIR},' ${MAPLE_DIR}/bin/$$file >${WRKDIR}/$$file; \
		cp ${WRKDIR}/$$file ${MAPLE_DIR}/bin; \
@


1.3
log
@Use FULLDISTDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1999/06/18 15:32:16 espie Exp $
d13 1
a13 1
CATEGORIES=     	maths
@


1.2
log
@Patch maple script to resolve DISPLAY manually.

Work-around for a maple-linux/linux emulation bug that was diagnosed
by Remi Card on FreeBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 1999/05/22 00:24:58 espie Exp $
d7 1
d49 1
a49 1
	@@mkdir -p ${_DISTDIR}
d52 1
a52 1
		[ -f ${_DISTDIR}/$$file ] || \
d55 2
a56 2
			mkdir -p ${_DISTDIR}/`dirname $$file`;\
			ln -sf ${CDROM}/$$file ${_DISTDIR}/$$file;\
d66 1
a66 1
	@@cd ${MAPLE_DIR} && yes | ${_DISTDIR}/install
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d22 1
a24 1
NO_BUILD=		yes
d41 6
d75 1
a75 1
	@@cd ${MAPLE_DIR} && patch -s <${PATCHDIR}/patch-aa && \
d77 1
@


1.1.1.1
log
@Commercial mathematical package from the University of Waterloo.
Ported to show that the linux version works under OpenBSD.
One serious port for a change :)
@
text
@@
