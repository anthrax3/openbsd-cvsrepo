head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.16
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.14
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.12
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.8
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.10
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.6
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.4
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3;
locks; strict;
comment	@# @;


1.3
date	2013.10.11.08.39.26;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.07.26.19.19.23;	author pvalchev;	state dead;
branches;
next	1.1;

1.1
date	2001.07.13.06.04.17;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@the makefile does some crazy thing with libraries. Sometimes the timestamps
don't quite match, and all hell breaks loose.

MAKE DARN SURE it gets its file by forcing them down the problematic target.
Yep, sometimes ar will replace the same files twice. Which is always better
than 0.

this has long been an annoyance. Why do every single math guy still write
makefiles by hand that look like fortran77 code ?

(also fix an error in popen by speaking the right standardese)
@
text
@$OpenBSD$
--- yorick/Makefile.orig	Sun Jul 12 06:16:14 2009
+++ yorick/Makefile	Fri Oct 11 10:34:59 2013
@@@@ -52,12 +52,14 @@@@ EXTRA_LIBS=$(ALT_LIBS)
 # hack combines gist, matrix, and fft libs into a single libyor.a
 # (this does not get inter-directory dependencies absolutely correct)
 BUILTIN_PKGS=../gist/libgist.a ../regexp/libyor ../matrix/libyor ../fft/libyor
-libyor: $(BUILTIN_PKGS)
+libyor: $(BUILTIN_PKGS) $(OBJS) ywrap.o
 	@@rm -f $(PKG_LIB)
 	cp ../gist/libgist.a $(PKG_LIB)
 	cd ../regexp; $(MAKE) "COPT=$(COPT)" oinsert
 	cd ../matrix; $(MAKE) "COPT=$(COPT)" oinsert
 	cd ../fft; $(MAKE) "COPT=$(COPT)" oinsert
+	$(AR) $(ARFLAGS) ${PKG_LIB} $(OBJS) ywrap.o
+	$(RANLIB) ${PKG_LIB}
 	touch $@@
 ../gist/libgist.a:
 	@@cd ../gist; $(MAKE) "COPT=$(COPT)" libgist.a
@


1.2
log
@Update to yorick-1.5.02 (thanks heko@@iki.fi)
@
text
@d1 19
a19 12
$OpenBSD: patch-yorick_Makefile,v 1.1 2001/07/13 06:04:17 pvalchev Exp $
--- yorick/Makefile.orig	Fri May 11 13:29:29 2001
+++ yorick/Makefile	Thu Jul 12 23:00:41 2001
@@@@ -28,7 +28,7 @@@@ OBJS = task.o yorick.o yinput.o parse.o 
 
 CLEAN_CRUFT=main.c ycode.c codger yorick pkg-*
 PKG_MAKE=CODGER=../yorick/codger YORINCL=-I../yorick PLAYINCL=-I../play \
-  C_OPTIMIZE=$(COPTIONS) libyor
+  C_OPTIMIZE="$(COPTIONS)" libyor
 PKG_NUKE=MAKE_TEMPLATE=../Make.cfg yorclean
 PKG_CLEAN=ZAP_DOTI= $(PKG_NUKE)
 
@


1.1
log
@fix CFLAGS passing, thanks naddy
@
text
@d1 1
a1 1
$OpenBSD$
@

