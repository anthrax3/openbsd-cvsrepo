head	1.26;
access;
symbols
	OPENBSD_5_7:1.25.0.2
	OPENBSD_5_7_BASE:1.25
	OPENBSD_5_6:1.22.0.6
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.22.0.4
	OPENBSD_5_5_BASE:1.22
	OPENBSD_5_4:1.22.0.2
	OPENBSD_5_4_BASE:1.22
	OPENBSD_5_3:1.21.0.2
	OPENBSD_5_3_BASE:1.21
	OPENBSD_5_2:1.20.0.4
	OPENBSD_5_2_BASE:1.20
	OPENBSD_5_1_BASE:1.20
	OPENBSD_5_1:1.20.0.2
	OPENBSD_5_0:1.19.0.4
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.14.0.2
	OPENBSD_4_8_BASE:1.14
	OPENBSD_4_7:1.9.0.2
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.7.0.8
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.6
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	steven-20061021:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2015.07.20.23.12.55;	author ajacoutot;	state dead;
branches;
next	1.25;
commitid	VNpl24Iy21Y5yZWD;

1.25
date	2014.12.14.20.56.07;	author brad;	state Exp;
branches;
next	1.24;
commitid	OunC6I2qN9D911F1;

1.24
date	2014.11.18.08.09.07;	author pirofti;	state Exp;
branches;
next	1.23;
commitid	GPJG8Lo28NMLKxsL;

1.23
date	2014.11.11.13.27.10;	author pirofti;	state Exp;
branches;
next	1.22;
commitid	rxL7OG5tKwvxmoIp;

1.22
date	2013.03.11.11.23.54;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2012.09.01.12.02.27;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2011.11.18.11.16.24;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.22.09.28.34;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.27.18.25.08;	author steven;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.26.17.55.25;	author pirofti;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.23.17.01.26;	author steven;	state Exp;
branches;
next	1.15;

1.15
date	2010.10.23.15.09.57;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2010.07.18.10.30.41;	author steven;	state Exp;
branches;
next	1.13;

1.13
date	2010.06.12.18.13.25;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2010.05.23.11.55.52;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.05.22.22.01.54;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.05.07.22.30.15;	author pirofti;	state Exp;
branches;
next	1.9;

1.9
date	2010.02.23.20.12.43;	author jasper;	state Exp;
branches;
next	1.8;

1.8
date	2009.08.05.20.40.46;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2008.01.04.17.48.36;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2007.09.15.18.44.36;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.07.11.09.10;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2007.03.24.12.44.19;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.12.02.15.02.07;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.03.08.29.00;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.21.16.58.00;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.10.21.16.58.00;	author steven;	state Exp;
branches;
next	;


desc
@@


1.26
log
@Remove, there are superseded by math/suitesparse.

req. by and ok pirofti@@
@
text
@# $OpenBSD: Makefile,v 1.25 2014/12/14 20:56:07 brad Exp $

COMMENT=	order a sparse matrix prior to Cholesky factorization

VERSION=	2.4.0
REVISION=	1
DISTNAME=	AMD-${VERSION}
PKGNAME=	${DISTNAME:L}

SHARED_LIBS=	amd	1.0 \
		amdf77	1.0

CATEGORIES=	math

HOMEPAGE=	http://www.cise.ufl.edu/research/sparse/amd/

MAINTAINER =	Paul Irofti <pirofti@@openbsd.org>

# LGPL
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	suitesparseconfig

MASTER_SITES=	${HOMEPAGE}/
WRKDIST=	${WRKDIR}/AMD
WRKSRC=		${WRKDIST}/Source
MODULES=	fortran
MODFORTRAN_COMPILER = g77

LIB_DEPENDS =	math/SuiteSparse_config
BUILD_DEPENDS=	${MODFORTRAN_BUILD_DEPENDS}
RUN_DEPENDS=	math/SuiteSparse_config

NO_TEST =	Yes

MAKE_FILE=	${FILESDIR}/Makefile
MAKE_ENV=	SHLIB_MAJOR=${LIBamd_VERSION:R} \
		SHLIB_MINOR=${LIBamd_VERSION:E}
MAKE_FLAGS=	CSRC="${CSRC}"
MAKE_ENV_F77=	SHLIB_MAJOR=${LIBamdf77_VERSION:R} \
		SHLIB_MINOR=${LIBamdf77_VERSION:E} \
		PATH=${PORTPATH} \
		FC=${FC}
FAKE_FLAGS=	LIBDIR=${LOCALBASE}/lib DEBUGLIBS=no
CFLAGS+=	-I${WRKDIST}/Include -I${LOCALBASE}/include

CSRC=	aat 1 2 dump postorder post_tree defaults order control info \
	valid preprocess

pre-configure:
	@@echo "#define DINT 1"  > ${WRKSRC}/di.c
	@@echo "#define DLONG 1" > ${WRKSRC}/dl.c
.for s in ${CSRC}
	@@cd ${WRKSRC} && cat di.c amd_${s}.c > amd_i_${s}.c
	@@cd ${WRKSRC} && cat dl.c amd_${s}.c > amd_l_${s}.c
.endfor

post-build:
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV_F77} ${MAKE_PROGRAM} \
		${MAKE_FLAGS} -f ${FILESDIR}/Makefile.f77 ${ALL_TARGET}

post-install:
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV_F77} ${MAKE_PROGRAM} \
		${ALL_FAKE_FLAGS} -f ${FILESDIR}/Makefile.f77 ${INSTALL_TARGET}
	${INSTALL_DATA_DIR} ${PREFIX}/include/amd
	${INSTALL_DATA} ${WRKDIST}/Include/amd.h ${PREFIX}/include/amd

.include <bsd.port.mk>
@


1.25
log
@add missing WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/11/18 08:09:07 pirofti Exp $
@


1.24
log
@AMD must use the suitesparse_config library.

AMD starts using the new suitesparse_config library so that it stops
exporting bogus symbols for it's allocators.

This is part 2/3 for fixing the freemat regression.

First found by and discussed with sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/11/11 13:27:10 pirofti Exp $
d6 1
a6 1
REVISION =	0
d21 2
@


1.23
log
@Update amd to 2.4.0.

Start using the new SuiteSparse_config package.
While at it take maintainership.

Okay and comments from benoit@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/03/11 11:23:54 espie Exp $
d6 1
d27 3
a29 2
BUILD_DEPENDS=	${MODFORTRAN_BUILD_DEPENDS} \
		math/SuiteSparse_config
d31 2
@


1.22
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/09/01 12:02:27 naddy Exp $
d5 1
a5 1
VERSION=	2.2.1
d8 3
a10 3
REVISION=	2
SHARED_LIBS=	amd	0.0 \
		amdf77	0.0
d16 2
d27 2
a28 2
		math/ufconfig
RUN_DEPENDS=	math/ufconfig
@


1.21
log
@bsd.lib.mk does not build _pic.a libraries any longer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/11/18 11:16:24 espie Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.20
log
@shrink, this lives in bsd.port.mk itself now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/22 09:28:34 espie Exp $
d8 1
a8 1
REVISION =	1
@


1.19
log
@missed some
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/27 18:25:08 steven Exp $
a43 7

# See bsd.lib.mk:162
.if ${MACHINE_ARCH:Mmips64*}
PKG_ARGS+=	-Dno_mips64=0
.else
PKG_ARGS+=	-Dno_mips64=1
.endif
@


1.18
log
@add run-depend on ufconfig package, then UFconfig.h is always around so that
dependent ports can pick this port up correctly during configure

ok pirofti@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/26 17:55:25 pirofti Exp $
d28 2
a29 2
		::math/ufconfig
RUN_DEPENDS=	::math/ufconfig
@


1.17
log
@Make amd use the ufconfig package. `Looks good' steven@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/10/23 17:01:26 steven Exp $
d8 1
a8 1
REVISION =	0
d29 1
a29 1

@


1.16
log
@bump to 2.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/10/23 15:09:57 steven Exp $
d7 2
a8 1
PKGNAME=	amd-${VERSION}
a22 2
MASTER_SITES0=	${HOMEPAGE}../UFconfig/
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} UFconfig-3.0.0.tar.gz:0
d27 2
a28 1
BUILD_DEPENDS=	${MODFORTRAN_BUILD_DEPENDS}
d40 1
a40 1
CFLAGS+=	-I${WRKDIST}/Include -I${WRKDIR}/UFconfig
a68 1
	${INSTALL_DATA} ${WRKDIR}/UFconfig/UFconfig.h ${PREFIX}/include/amd
@


1.15
log
@replace MODFORTRAN_WANTG77 with MODFORTRAN_COMPILER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/06/12 18:13:25 steven Exp $
d5 1
a5 1
VERSION=	2.2.0
a7 1
REVISION=	2
@


1.14
log
@REVISION
@
text
@d28 1
a28 1
MODFORTRAN_WANTG77= Yes
@


1.13
log
@pass FC via the environment; will ease use of gfortran later
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/05/22 22:01:54 espie Exp $
d7 2
a8 1
PKGNAME=	amd-${VERSION}p2
@


1.12
log
@module fortran
@
text
@d37 2
a38 1
		PATH=${PORTPATH}
@


1.11
log
@help getting to f77 if it moves out of /usr/bin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/05/07 22:30:15 pirofti Exp $
d26 4
@


1.10
log
@Unbreak amd, missing UFconfig.h. Okay jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/02/23 20:12:43 jasper Exp $
d32 2
a33 1
		SHLIB_MINOR=${LIBamdf77_VERSION:E}
@


1.9
log
@- fix build on mips64(el)

ok sthen@@

ports is unlocked for a while only for those who have been informed.
if I DID NOT MAIL YOU, DO NOT COMMIT!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/08/05 20:40:46 steven Exp $
d7 1
a7 1
PKGNAME=	amd-${VERSION}p1
d63 1
@


1.8
log
@drop maintainership for this stuff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/01/04 17:48:36 espie Exp $
d7 1
a7 1
PKGNAME=	amd-${VERSION}p0
d38 7
@


1.7
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/09/15 18:44:36 steven Exp $
d7 1
a7 1
PKGNAME=	amd-${VERSION}
a13 2

MAINTAINER=	Steven Mestdagh <steven@@openbsd.org>
@


1.6
log
@remove quotes from COMMENT/PERMIT*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/07 11:09:10 steven Exp $
d35 1
a35 1
FAKE_FLAGS=	${DESTDIRNAME}=${WRKINST} LIBDIR=${LOCALBASE}/lib DEBUGLIBS=no
d55 1
a55 1
		${FAKE_FLAGS} -f ${FILESDIR}/Makefile.f77 ${INSTALL_TARGET}
@


1.5
log
@update to 2.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/03/24 12:44:19 steven Exp $
d3 1
a3 1
COMMENT=	"order a sparse matrix prior to Cholesky factorization"
@


1.4
log
@update to amd 2.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/12/02 15:02:07 steven Exp $
d5 1
a5 1
VERSION=	2.0.4
d25 1
a25 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} UFconfig-2.4.0.tar.gz:0
@


1.3
log
@minor update to 2.0.3.  distfiles are versioned now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/11/03 08:29:00 steven Exp $
d5 1
a5 1
VERSION=	2.0.3
d25 1
a25 1
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} UFconfig-2.3.0.tar.gz:0
@


1.2
log
@do not reference PKGNAME in other vars
pointed out by naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/10/21 16:58:00 steven Exp $
d5 3
a7 3
VERSION=	2.0
DISTNAME=	AMD
PKGNAME=	${DISTNAME:L}-${VERSION}
d23 4
a26 4
MASTER_SITES=	${HOMEPAGE}/current/
MASTER_SITES0=	${HOMEPAGE}../UFconfig/current/
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} UFconfig.tar.gz:0
DIST_SUBDIR=	${DISTNAME:L}-${VERSION}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
d7 1
a7 1
PKGNAME=	${DISTNAME:L}-2.0
d26 1
a26 1
DIST_SUBDIR=	${PKGNAME}
@


1.1.1.1
log
@import AMD-2.0

AMD is a set of routines for ordering a sparse matrix prior to Cholesky
factorization (or for LU factorization with diagonal pivoting). There
are versions in both C and Fortran. A MATLAB interface is provided.
Note that this software has nothing to do with AMD the company.
@
text
@@
