head	1.2;
access;
symbols
	OPENBSD_3_8:1.1.0.6
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2005.11.02.18.20.58;	author alek;	state dead;
branches;
next	1.1;

1.1
date	2004.06.07.14.43.39;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 2.1.71

From new maintainer Steven Mestdagh <steven.mestdagh@@esat.kuleuven.be>
@
text
@$OpenBSD: patch-liboctave_oct-term_cc,v 1.1 2004/06/07 14:43:39 naddy Exp $
--- liboctave/oct-term.cc.orig	1996-03-03 02:16:15.000000000 +0100
+++ liboctave/oct-term.cc	2004-06-06 20:57:32.000000000 +0200
@@@@ -26,6 +26,10 @@@@ Software Foundation, 59 Temple Place - S
 
 #include "oct-term.h"
 
+#if defined (USE_READLINE)
+extern "C" int rl_get_screen_size(int *, int *);
+#endif
+
 // For now, use the variables from readline.  It already handles
 // SIGWINCH, so these values have a good chance of being correct even
 // if the window changes size (they will be wrong if, for example, the
@@@@ -36,7 +40,8 @@@@ int
 terminal_columns (void)
 {
 #if defined (USE_READLINE)
-  extern int screenwidth;
+  int screenheight, screenwidth;
+  rl_get_screen_size(&screenheight, &screenwidth);
   return screenwidth > 0 ? screenwidth : 80;
 #else
   // XXX FIXME XXX
@@@@ -48,7 +53,8 @@@@ int
 terminal_rows (void)
 {
 #if defined (USE_READLINE)
-  extern int screenheight;
+  int screenheight, screenwidth;
+  rl_get_screen_size(&screenheight, &screenwidth);
   return screenheight > 0 ? screenheight : 24;
 #else
   // XXX FIXME XXX
@


1.1
log
@* use the published libreadline interface to get the screen size (fixes build)
* sync patches
@
text
@d1 1
a1 1
$OpenBSD$
@

