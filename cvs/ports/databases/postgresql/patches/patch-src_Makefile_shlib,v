head	1.10;
access;
symbols
	OPENBSD_6_0:1.10.0.8
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.10.0.4
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.10.0.6
	OPENBSD_5_8_BASE:1.10
	OPENBSD_5_7:1.10.0.2
	OPENBSD_5_7_BASE:1.10
	OPENBSD_5_6:1.9.0.4
	OPENBSD_5_6_BASE:1.9
	OPENBSD_5_5:1.9.0.2
	OPENBSD_5_5_BASE:1.9
	OPENBSD_5_4:1.8.0.4
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.7.0.12
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.7
	OPENBSD_5_1:1.7.0.10
	OPENBSD_5_0:1.7.0.8
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.7.0.6
	OPENBSD_4_9_BASE:1.7
	OPENBSD_4_8:1.7.0.4
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.6.0.14
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.6.0.12
	OPENBSD_4_5_BASE:1.6
	OPENBSD_4_4:1.6.0.10
	OPENBSD_4_4_BASE:1.6
	OPENBSD_4_3:1.6.0.8
	OPENBSD_4_3_BASE:1.6
	OPENBSD_4_2:1.6.0.6
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.5.0.2
	OPENBSD_3_9_BASE:1.5
	OPENBSD_3_8:1.4.0.4
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_5:1.2.0.6
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.1.0.8
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.6
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.4
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.2
	OPENBSD_2_9_BASE:1.1;
locks; strict;
comment	@# @;


1.10
date	2015.01.08.15.01.11;	author pea;	state Exp;
branches;
next	1.9;
commitid	yFcByahJB4ZZYrD6;

1.9
date	2013.10.15.02.18.17;	author jeremy;	state Exp;
branches;
next	1.8;

1.8
date	2012.09.24.19.57.02;	author pea;	state Exp;
branches;
next	1.7;

1.7
date	2009.07.21.19.43.45;	author pea;	state Exp;
branches
	1.7.12.1;
next	1.6;

1.6
date	2006.05.24.11.18.29;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2006.01.07.11.11.17;	author mbalmer;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2005.01.02.00.23.28;	author alek;	state Exp;
branches
	1.4.2.1
	1.4.4.1;
next	1.3;

1.3
date	2004.07.26.10.10.46;	author peter;	state dead;
branches;
next	1.2;

1.2
date	2002.12.17.16.38.54;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.04.23.21.58.44;	author espie;	state Exp;
branches;
next	;

1.4.2.1
date	2006.02.07.21.08.28;	author sturm;	state Exp;
branches;
next	;

1.4.4.1
date	2006.05.24.17.50.13;	author sturm;	state Exp;
branches;
next	;

1.5.2.1
date	2006.05.24.22.29.59;	author sturm;	state Exp;
branches;
next	;

1.7.12.1
date	2012.09.26.06.49.13;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Update to 9.4.0

Tested in a bulk build by landry@@

help and ok jeremy@@, sthen@@
@
text
@$OpenBSD: patch-src_Makefile_shlib,v 1.9 2013/10/15 02:18:17 jeremy Exp $
--- src/Makefile.shlib.orig	Sun May 11 14:16:48 2014
+++ src/Makefile.shlib	Thu May 15 21:52:50 2014
@@@@ -140,7 +140,7 @@@@ ifeq ($(PORTNAME), openbsd)
   ifdef ELF_SYSTEM
     LINK.shared		= $(COMPILER) -shared
     ifdef soname
-      LINK.shared	+= -Wl,-x,-soname,$(soname)
+      LINK.shared	+= -Wl,-x
     endif
     SHLIB_LINK		+= -lc
   else
@


1.9
log
@Major update to 9.3.0.  As usual, a dump/restore is required.

Add plpython subpackage. Move some contrib module .so files to the
contrib subpackage.

OK pea@@ (MAINTAINER), bulk testing by landry@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.8 2012/09/24 19:57:02 pea Exp $
--- src/Makefile.shlib.orig	Mon May  6 13:57:06 2013
+++ src/Makefile.shlib	Thu May 16 15:08:07 2013
@@@@ -146,7 +146,7 @@@@ ifeq ($(PORTNAME), openbsd)
@


1.8
log
@Major update to PostgreSQL 9.2.1.
As usual a dump/restore is required.

ok jasper@@ jeremy@@ landry@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.7 2009/07/21 19:43:45 pea Exp $
--- src/Makefile.shlib.orig	Fri May 11 00:35:09 2012
+++ src/Makefile.shlib	Tue May 15 10:23:01 2012
@@@@ -149,7 +149,7 @@@@ ifeq ($(PORTNAME), openbsd)
@


1.7
log
@Upgrade PostgreSQL to the latest version 8.4.0.
Initial diff (for rc and beta) from simon@@

ok mbalmer@@, simon@@
commitski jasper@@

BE CAREFULL: it's a major upgrade !
You MUST dump/restore all your data for this upgrade.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.6 2006/05/24 11:18:29 bernd Exp $
--- src/Makefile.shlib.orig	Mon Jan  5 10:27:19 2009
+++ src/Makefile.shlib	Sun May 31 11:58:20 2009
@@@@ -154,7 +154,7 @@@@ ifeq ($(PORTNAME), openbsd)
@


1.7.12.1
log
@Update to postgresql-9.1.6, which fixes critical data corruption issues.
For more information please refer to http://www.postgresql.org/about/news/1416/

ok pea@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.7 2009/07/21 19:43:45 pea Exp $
--- src/Makefile.shlib.orig	Wed Sep 19 23:50:31 2012
+++ src/Makefile.shlib	Tue Sep 25 22:25:59 2012
@@@@ -149,7 +149,7 @@@@ ifeq ($(PORTNAME), openbsd)
@


1.6
log
@Security update to postgresql-8.1.4.

Fixes SQL-injection attacks. (CVE-2006-2313, CVE-2006-2314)

For detailed information please see:

http://developer.postgresql.org/docs/postgres/release-8-1-4.html
http://secunia.com/advisories/20231/

ok mbalmer@@ (MAINTAINER)
@
text
@d1 4
a4 6
$OpenBSD: patch-src_Makefile_shlib,v 1.5 2006/01/07 11:11:17 mbalmer Exp $
--- src/Makefile.shlib.orig	Sat Dec  3 21:16:39 2005
+++ src/Makefile.shlib	Wed May 24 11:01:21 2006
@@@@ -119,7 +119,7 @@@@ endif
 
 ifeq ($(PORTNAME), openbsd)
d6 5
a10 2
-    LINK.shared		= $(COMPILER) -shared -Wl,-x,-soname,$(soname)
+    LINK.shared		= $(COMPILER) -shared -Wl,-x
a12 1
     LINK.shared		= $(LD) -x -Bshareable -Bforcearchive
@


1.5
log
@SHARED_LIBS

ok bernd
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.4 2005/01/02 00:23:28 alek Exp $
--- src/Makefile.shlib.orig	Fri Oct 28 19:32:22 2005
+++ src/Makefile.shlib	Wed Dec 28 12:38:13 2005
@@@@ -116,7 +116,7 @@@@ endif
@


1.5.2.1
log
@MFC:
Security update to postgresql-8.1.4.

Fixes SQL-injection attacks. (CVE-2006-2313, CVE-2006-2314)

For detailed information please see:

http://developer.postgresql.org/docs/postgres/release-8-1-4.html
http://secunia.com/advisories/20231/
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.5 2006/01/07 11:11:17 mbalmer Exp $
--- src/Makefile.shlib.orig	Sat Dec  3 21:16:39 2005
+++ src/Makefile.shlib	Wed May 24 19:11:36 2006
@@@@ -119,7 +119,7 @@@@ endif
@


1.4
log
@- Fix libpq soname
- Rework WANTLIB as this port has SUBPACKAGES
- Replace RUN_DEPENDS with LIB_DEPENDS
- Add PKG_ARCH
- Bump PKGNAME

ok sturm@@, Brandon Palmer (MAINTAINER)
@
text
@d1 5
a5 4
$OpenBSD$
--- src/Makefile.shlib.orig	Mon Dec 27 22:53:54 2004
+++ src/Makefile.shlib	Mon Dec 27 22:54:19 2004
@@@@ -88,7 +88,7 @@@@ endif
a6 1
   shlib			:= lib$(NAME)$(DLSUFFIX).$(SO_MAJOR_VERSION).$(SO_MINOR_VERSION)
@


1.4.4.1
log
@Security update to postgresql-8.0.8

Fixes SQL-injection attacks. (CVE-2006-2313, CVE-2006-2314)
@
text
@d1 4
a4 5
$OpenBSD: patch-src_Makefile_shlib,v 1.4 2005/01/02 00:23:28 alek Exp $
--- src/Makefile.shlib.orig	Sat Dec  3 21:16:50 2005
+++ src/Makefile.shlib	Wed May 24 18:46:29 2006
@@@@ -119,7 +119,7 @@@@ endif
 
d6 1
@


1.4.2.1
log
@update to porstgresql 7.4.11, fixing several bugs and security issues
CVE-2005-{0977,0227,0244,0245,0246,0247,1409,1410}
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_shlib,v 1.4 2005/01/02 00:23:28 alek Exp $
--- src/Makefile.shlib.orig	Sat Dec  3 21:17:00 2005
+++ src/Makefile.shlib	Tue Feb  7 20:26:37 2006
@@@@ -94,7 +94,7 @@@@ endif
@


1.3
log
@Update to PostgreSQL 7.4.3

Changes in the package layout means that there is now a -client and
-server subpackage, and users no longer need to decide which, as
the -server depends on the -client, just like the sane cases in
mysql and openldap.

Other changes include:

* Removal of the tcl FLAVOR until someone with more tcl/tk knowledge
can make it work correctly.

* The INSTALL-server script now created a _postgresql user and group
if they don't already exist, and also a default database in
/var/postgresql if that directory also doesn't exist.

* The port is marked for NO_SHARED_ARCHS as the -server subpackage
needs shared lib support to build.

* The port will build with spinlocks disabled on hppa until someone
can check and test this problem more closely.

Built and checked on i386, sparc64, amd64, macppc (waiting for regress
test feedback).

Dependent packages will be updated after this commit, shortly.
@
text
@d1 4
a4 5
$OpenBSD: patch-src_Makefile_shlib,v 1.2 2002/12/17 16:38:54 naddy Exp $
--- src/Makefile.shlib.orig	Thu Sep  5 18:28:46 2002
+++ src/Makefile.shlib	Sun Oct  6 16:39:21 2002
@@@@ -87,12 +87,7 @@@@ endif
 
d7 1
a7 1
-  ifdef ELF_SYSTEM
d9 4
a12 8
-    SHLIB_LINK		+= -lc
-  else
-    LINK.shared		= $(LD) -x -Bshareable -Bforcearchive
-  endif
+  LINK.shared		= $(COMPILER) -shared
 endif
 
 ifeq ($(PORTNAME), bsdi)
@


1.2
log
@Update to 7.3.
From: Peter Galbavy <peter.galbavy@@knowtion.net>
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_shlib,v 1.1 2001/04/23 21:58:44 espie Exp $
@


1.1
log
@Patches to fix dynamic libraries, especially on ppc which understands
only major/minor.

Add DYNLIBDIR where needed.

Some style issues.

From peter@@, brad@@ and peter_e@@gmx.net
@
text
@d1 5
a5 5
$OpenBSD: update-patches,v 1.4 2001/03/31 22:54:41 espie Exp $
--- src/Makefile.shlib.orig	Sun Apr  1 15:17:30 2001
+++ src/Makefile.shlib	Sun Apr 22 14:50:24 2001
@@@@ -118,12 +118,7 @@@@ endif

d16 1
a16 1

@

