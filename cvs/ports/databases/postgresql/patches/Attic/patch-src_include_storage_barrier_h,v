head	1.2;
access;
symbols
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.11.03.09.35.31;	author pea;	state dead;
branches;
next	1.1;
commitid	woApIedweCzGyUIz;

1.1
date	2015.01.16.23.24.15;	author landry;	state Exp;
branches
	1.1.2.1
	1.1.6.1;
next	;
commitid	odkoX8jTKvDY2gxZ;

1.1.2.1
date	2015.11.03.09.29.15;	author pea;	state dead;
branches;
next	;
commitid	pBJe2qbmjtP2PjXC;

1.1.6.1
date	2015.11.03.16.49.08;	author pea;	state dead;
branches;
next	;
commitid	MwjJTmWdfHNBWhRl;


desc
@@


1.2
log
@Security update to 9.4.5
@
text
@$OpenBSD: patch-src_include_storage_barrier_h,v 1.1 2015/01/16 23:24:15 landry Exp $

fix build on alpha

--- src/include/storage/barrier.h.orig	Fri Jan 16 13:08:20 2015
+++ src/include/storage/barrier.h	Fri Jan 16 13:24:05 2015
@@@@ -117,7 +117,7 @@@@ extern slock_t dummy_spinlock;
  * read barrier to cover that case.  We might need to add that later.
  */
 #define pg_memory_barrier()		__asm__ __volatile__ ("mb" : : : "memory")
-#define pg_read_barrier()		__asm__ __volatile__ ("rmb" : : : "memory")
+#define pg_read_barrier()		__asm__ __volatile__ ("mb" : : : "memory")
 #define pg_write_barrier()		__asm__ __volatile__ ("wmb" : : : "memory")
 #elif defined(__hppa) || defined(__hppa__)		/* HP PA-RISC */
 
@


1.1
log
@Unbreak on alpha by using the correct memory barrier instruction, courtesy of miod@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.6.1
log
@Security update to 9.4.5
"go ahead" sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_include_storage_barrier_h,v 1.1 2015/01/16 23:24:15 landry Exp $
@


1.1.2.1
log
@Security update to 9.4.5
@
text
@d1 1
a1 1
$OpenBSD: patch-src_include_storage_barrier_h,v 1.1 2015/01/16 23:24:15 landry Exp $
@

