head	1.3;
access;
symbols
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_5:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2005.05.26.19.09.18;	author mbalmer;	state dead;
branches;
next	1.2;

1.2
date	2005.04.30.10.00.04;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.05.15.11.58;	author sturm;	state Exp;
branches
	1.1.2.1
	1.1.4.1
	1.1.6.1;
next	;

1.1.2.1
date	2005.02.05.21.54.44;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2005.02.05.21.55.23;	author sturm;	state Exp;
branches;
next	;

1.1.6.1
date	2006.02.07.21.08.28;	author sturm;	state dead;
branches;
next	;


desc
@@


1.3
log
@Remove unused patch file.

Spotted by naddy@@
@
text
@@


1.2
log
@Update to PostgreSQL 8.0.2 and take maintainerhsip with the old maintainers
consent.

ok nikolay@@, todd@@
@
text
@@


1.1
log
@SECURITY fix

This patch fixes a problem where low privileged users can invoke the
LOAD extension to load arbitrary libraries into the postgres process
space.

ok peter.galbavy at knowtion.net
@
text
@a0 12
$OpenBSD$
--- src/backend/tcop/utility.c.orig	Sat Feb  5 13:02:05 2005
+++ src/backend/tcop/utility.c	Sat Feb  5 13:03:10 2005
@@@@ -814,6 +814,8 @@@@ ProcessUtility(Node *parsetree,
 			{
 				LoadStmt   *stmt = (LoadStmt *) parsetree;
 
+				if (!superuser())
+					elog(ERROR, "permission denied");
 				closeAllVfds(); /* probably not necessary... */
 				load_file(stmt->filename);
 			}
@


1.1.6.1
log
@update to porstgresql 7.4.11, fixing several bugs and security issues
CVE-2005-{0977,0227,0244,0245,0246,0247,1409,1410}
@
text
@d1 1
a1 1
$OpenBSD: patch-src_backend_tcop_utility_c,v 1.1 2005/02/05 15:11:58 sturm Exp $
@


1.1.4.1
log
@MFC:

SECURITY fix

This patch fixes a problem where low privileged users can invoke the
LOAD extension to load arbitrary libraries into the postgres process
space.

ok brad@@
@
text
@@


1.1.2.1
log
@MFC:

SECURITY fix

This patch fixes a problem where low privileged users can invoke the
LOAD extension to load arbitrary libraries into the postgres process
space.

ok brad@@
@
text
@@

