head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	98.03.11.02.06.45;	author marc;	state dead;
branches;
next	1.1;

1.1
date	97.11.20.20.34.09;	author mickey;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to version 6.3 and make it install in standard locations
@
text
@--- interfaces/libpgtcl/Makefile.orig	Mon Sep 29 23:02:46 1997
+++ interfaces/libpgtcl/Makefile	Sun Oct  5 02:12:00 1997
@@@@ -39,6 +39,14 @@@@
   endif
 endif
 
+ifeq ($(PORTNAME), BSD44_derived)
+  CFLAGS += $(CFLAGS_SL)
+  shlib := libpgtcl.so.1.0
+  install-shlib-dep := install-shlib
+  LDFLAGS_SL = -x -Bshareable -Bforcearchive 
+  LDFLAGS += -L $(SRCDIR)/interfaces/libpq -lpq
+endif
+
 ifeq ($(PORTNAME), i386_solaris)
   CFLAGS+= -fPIC
 endif
@@@@ -56,10 +64,10 @@@@
 endif
 	$(RANLIB) libpgtcl.a
 
-libpgtcl.so.1: $(OBJS)
-	$(CC) $(LDFLAGS) -shared $(OBJS) -o libpgtcl.so.1
+libpgtcl.so.1.0: $(OBJS)
+	$(CC) $(LDFLAGS) -shared $(OBJS) -o libpgtcl.so.1.0
 	rm -f libpgtcl.so
-	ln -s libpgtcl.so.1 libpgtcl.so
+	ln -s libpgtcl.so.1.0 libpgtcl.so
 
 .PHONY: beforeinstall-headers install-headers
 .PHONY: install install-libpgtcl
@@@@ -75,11 +83,11 @@@@
 install-libpgtcl: libpgtcl.a
 	$(INSTALL) $(INSTL_LIB_OPTS) libpgtcl.a $(DESTDIR)$(LIBDIR)/libpgtcl.a
 
-install-shlib: libpgtcl.so.1
-	$(INSTALL) $(INSTL_LIB_OPTS) libpgtcl.so.1 \
-		$(DESTDIR)$(LIBDIR)/libpgtcl.so.1
+install-shlib: libpgtcl.so.1.0
+	$(INSTALL) $(INSTL_LIB_OPTS) libpgtcl.so.1.0 \
+		$(DESTDIR)$(LIBDIR)/libpgtcl.so.1.0
 	rm -f $(DESTDIR)$(LIBDIR)/libpgtcl.so
-	ln -s libpgtcl.so.1 $(DESTDIR)$(LIBDIR)/libpgtcl.so
+	ln -s libpgtcl.so.1.0 $(DESTDIR)$(LIBDIR)/libpgtcl.so
 
 .PHONY: clean
 clean: 
@


1.1
log
@posgresql port (from freebsd)
most of major bugs cleaned, some of the smaller ones.
openbsd profile sent to the patches mailist.
@
text
@@

