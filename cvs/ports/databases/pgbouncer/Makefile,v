head	1.22;
access;
symbols
	OPENBSD_6_0:1.22.0.4
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.21.0.4
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.20.0.4
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.20.0.2
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.19.0.4
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.18.0.2
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.17.0.2
	OPENBSD_5_2_BASE:1.17
	OPENBSD_5_1_BASE:1.15
	OPENBSD_5_1:1.15.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3
	pea_20100708:1.1.1.1
	pea:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2015.09.11.12.39.27;	author pea;	state Exp;
branches;
next	1.21;
commitid	rzFdymI0Vpxqxxbe;

1.21
date	2015.06.01.09.51.42;	author pea;	state Exp;
branches;
next	1.20;
commitid	Hp3OUI1dUPgJmddE;

1.20
date	2014.05.27.12.32.19;	author pea;	state Exp;
branches
	1.20.4.1;
next	1.19;

1.19
date	2013.03.11.02.52.07;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2012.10.16.13.21.12;	author pea;	state Exp;
branches;
next	1.17;

1.17
date	2012.06.18.11.38.48;	author pea;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2012.04.22.11.41.55;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2012.01.17.13.57.24;	author pea;	state Exp;
branches;
next	1.14;

1.14
date	2011.12.17.22.01.12;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.07.01.08.37.21;	author pea;	state Exp;
branches;
next	1.12;

1.12
date	2011.06.02.13.41.37;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.05.11.06.26.03;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.14.09.17.26;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.01.13.16.31.45;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.01.04.14.54.28;	author pea;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.23.18.14.19;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.15.00.22.53;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.08.08.53.05;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.18.17.06.08;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.07.09.11.50.38;	author pea;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.08.16.23.54;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.07.08.16.18.06;	author pea;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.07.08.16.18.06;	author pea;	state Exp;
branches;
next	;

1.17.2.1
date	2012.11.05.08.03.53;	author jasper;	state Exp;
branches;
next	;

1.20.4.1
date	2015.06.01.09.53.03;	author pea;	state Exp;
branches;
next	;
commitid	vf70470n0pnpMZfo;


desc
@@


1.22
log
@Update to 1.6.1
ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.21 2015/06/01 09:51:42 pea Exp $

COMMENT = 	lightweight connection pooler for PostgreSQL

V = 		1.6.1
DISTNAME = 	pgbouncer-${V}

CATEGORIES = 	databases

HOMEPAGE = 	http://wiki.postgresql.org/wiki/PgBouncer

MAINTAINER = 	Pierre-Emmanuel Andre <pea@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM = 	Yes

WANTLIB = 	c event

MASTER_SITES = 	https://pgbouncer.github.io/downloads/files/${V}/

BUILD_DEPENDS =	devel/libeventextra

CONFIGURE_STYLE = 	gnu
#Disable the detection of asciidoc since docs are already included
CONFIGURE_ENV =         ASCIIDOC=' '
CONFIGURE_ARGS = 	--with-libevent=${LOCALBASE} --without-cares
MAKE_FLAGS+=		V=1

USE_GMAKE = 		Yes
USE_GROFF =		Yes

# The actual regress tests are (cd ${WRKSRC}/test; ./test.sh)
# They want to create full postgres install and also play with 
# firewall (iptables)
NO_TEST = 		Yes

.include <bsd.port.mk>
@


1.21
log
@Update to 1.5.5 (fix CVE-2015-4054 / remote crash)

ok ajacoutot@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/05/27 12:32:19 pea Exp $
d5 2
a6 1
DISTNAME = 	pgbouncer-1.5.5
d19 1
a19 1
MASTER_SITES = 	https://pgbouncer.github.io/downloads/
d26 1
a26 1
CONFIGURE_ARGS = 	--with-libevent=${LOCALBASE}
@


1.20
log
@Update to 1.5.4

ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/11 02:52:07 espie Exp $
d5 1
a5 1
DISTNAME = 	pgbouncer-1.5.4
d18 1
a18 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/3393/
@


1.20.4.1
log
@Update to 1.5.5 (fix CVE-2015-4054 / remote crash)

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/05/27 12:32:19 pea Exp $
d5 1
a5 1
DISTNAME = 	pgbouncer-1.5.5
@


1.19
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/10/16 13:21:12 pea Exp $
d5 1
a5 1
DISTNAME = 	pgbouncer-1.5.3
d18 1
a18 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/3369/
@


1.18
log
@Update to 1.5.3.
Contains a critical fix if you're using autodbs.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/06/18 11:38:48 pea Exp $
a13 1
PERMIT_PACKAGE_FTP = 	Yes
a14 2
PERMIT_DISTFILES_FTP = 	Yes
PERMIT_DISTFILES_CDROM =Yes
d34 1
a34 1
NO_REGRESS = 		Yes
@


1.17
log
@Bugfix update to 1.5.2

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/04/22 11:41:55 ajacoutot Exp $
d5 1
a5 1
DISTNAME = 	pgbouncer-1.5.2
d21 1
a21 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/3293/
@


1.17.2.1
log
@Security fix for CVE-2012-4575,
pgbouncer: DoS (pooler server shutdown) by adding database with large name

ok pea@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/06/18 11:38:48 pea Exp $
a5 1
REVISION =	0
@


1.16
log
@Use RCDIR instead of /etc/rc.d when refering to packages rc scripts.

discussed with espie and sthen
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/01/17 13:57:24 pea Exp $
d5 1
a5 2
DISTNAME = 	pgbouncer-1.5
REVISION =	0
d21 1
a21 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/3197/
@


1.15
log
@Update to 1.5

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/12/17 22:01:12 sthen Exp $
d6 1
@


1.14
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/07/01 08:37:21 pea Exp $
d5 1
a5 2
DISTNAME = 	pgbouncer-1.4.2
REVISION =	0
d19 1
a19 1
WANTLIB = 	c event pthread
d21 1
a21 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/3085/
@


1.13
log
@Update to 1.4.2
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/06/02 13:41:37 ajacoutot Exp $
d6 1
@


1.12
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/05/11 06:26:03 ajacoutot Exp $
d5 1
a5 2
DISTNAME = 	pgbouncer-1.3.4
REVISION =	3
d19 1
a19 1
WANTLIB = 	c event
d21 1
a21 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/2797/
@


1.11
log
@Forgot in previous... (not my day)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/03/14 09:17:26 sthen Exp $
d6 1
a6 1
REVISION =	2
@


1.10
log
@fix various typos, from Anthony J. Bentley with a few tweaks by myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/01/13 16:31:45 ajacoutot Exp $
d6 1
a6 1
REVISION =	1
@


1.9
log
@Use '-q' as advised in the man page so that we don't polute the output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/01/04 14:54:28 pea Exp $
d6 1
a6 1
REVISION =	0
@


1.8
log
@+ update to 1.3.4
+ add a rc script

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/23 18:14:19 jasper Exp $
d6 1
@


1.7
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/15 00:22:53 espie Exp $
d5 1
a5 2
DISTNAME = 	pgbouncer-1.3.3	
REVISION =	3
d21 1
a21 1
MASTER_SITES = 	http://pgfoundry.org/frs/download.php/2677/
@


1.6
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/08 08:53:05 jasper Exp $
d6 1
a6 1
REVISION =	2
@


1.5
log
@- switch to pkg-readmes
- disable silent builds

ok pea@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/10/18 17:06:08 espie Exp $
d24 1
a24 1
BUILD_DEPENDS =	::devel/libeventextra
d33 1
a33 1
USE_GROFF =	Yes
@


1.4
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/07/09 11:50:38 pea Exp $
d6 1
a6 1
PKGNAME =	${DISTNAME}p1
d30 1
a38 6

post-install:
	${SUBST_CMD} -c ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/doc/pgbouncer/README.OpenBSD
	chown ${SHAREOWN}:${SHAREGRP} \
		${PREFIX}/share/doc/pgbouncer/README.OpenBSD
@


1.3
log
@Disable the detection of asciidoc
spotted/suggested fix by landry@@

ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/07/08 16:23:54 ajacoutot Exp $
d32 1
@


1.2
log
@Remove trailing blank lines from DESCR.
Don't hardcode /etc, use SYSCONFDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/07/08 16:18:06 pea Exp $
d6 1
a6 1
PKGNAME =	${DISTNAME}p0
d27 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@Import pgbouncer.
PgBouncer is a lightweight connection pooler for PostgreSQL.

With tweaks from jasper@@
ok jasper@@

@
text
@@
