head	1.51;
access;
symbols
	OPENBSD_5_1_BASE:1.50
	OPENBSD_5_1:1.50.0.2
	OPENBSD_5_0:1.43.0.2
	OPENBSD_5_0_BASE:1.43
	OPENBSD_4_9:1.40.0.2
	OPENBSD_4_9_BASE:1.40
	OPENBSD_4_8:1.36.0.4
	OPENBSD_4_8_BASE:1.36
	OPENBSD_4_7:1.36.0.2
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.34.0.2
	OPENBSD_4_6_BASE:1.34
	OPENBSD_4_5:1.32.0.6
	OPENBSD_4_5_BASE:1.32
	OPENBSD_4_4:1.32.0.4
	OPENBSD_4_4_BASE:1.32
	OPENBSD_4_3:1.32.0.2
	OPENBSD_4_3_BASE:1.32
	OPENBSD_4_2:1.26.0.4
	OPENBSD_4_2_BASE:1.26
	OPENBSD_4_1:1.26.0.2
	OPENBSD_4_1_BASE:1.26
	OPENBSD_4_0:1.24.0.2
	OPENBSD_4_0_BASE:1.24
	OPENBSD_3_9:1.22.0.2
	OPENBSD_3_9_BASE:1.22
	OPENBSD_3_8:1.20.0.2
	OPENBSD_3_8_BASE:1.20
	OPENBSD_3_7:1.19.0.2
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.10.0.2
	OPENBSD_3_4_BASE:1.10
	OPENBSD_3_3:1.9.0.2
	OPENBSD_3_3_BASE:1.9
	OPENBSD_3_2:1.7.0.2
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.5.0.2
	OPENBSD_3_1_BASE:1.5
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	shell_2001-Aug-22:1.1.1.1
	shell:1.1.1;
locks; strict;
comment	@# @;


1.51
date	2012.06.21.15.39.19;	author ajacoutot;	state dead;
branches;
next	1.50;

1.50
date	2011.12.20.19.07.07;	author jasper;	state Exp;
branches;
next	1.49;

1.49
date	2011.12.20.07.02.19;	author fgsch;	state Exp;
branches;
next	1.48;

1.48
date	2011.11.18.00.35.08;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	2011.10.21.16.23.45;	author espie;	state Exp;
branches;
next	1.46;

1.46
date	2011.09.23.20.00.24;	author espie;	state Exp;
branches;
next	1.45;

1.45
date	2011.09.23.19.01.24;	author espie;	state Exp;
branches;
next	1.44;

1.44
date	2011.09.16.08.48.04;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2011.06.12.09.36.56;	author rpointel;	state Exp;
branches;
next	1.42;

1.42
date	2011.06.10.05.47.01;	author rpointel;	state Exp;
branches;
next	1.41;

1.41
date	2011.06.08.17.33.59;	author jasper;	state Exp;
branches;
next	1.40;

1.40
date	2010.11.15.00.22.53;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2010.09.03.12.34.55;	author sthen;	state Exp;
branches;
next	1.38;

1.38
date	2010.09.02.22.11.49;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2010.08.30.20.59.41;	author fgsch;	state Exp;
branches;
next	1.36;

1.36
date	2010.02.26.19.10.38;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2009.07.20.19.44.48;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2009.04.26.11.01.04;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2009.03.14.13.12.51;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2008.01.20.17.45.26;	author winiger;	state Exp;
branches;
next	1.31;

1.31
date	2008.01.20.10.41.09;	author winiger;	state Exp;
branches;
next	1.30;

1.30
date	2008.01.14.13.24.16;	author winiger;	state Exp;
branches;
next	1.29;

1.29
date	2008.01.11.09.09.22;	author winiger;	state Exp;
branches;
next	1.28;

1.28
date	2007.10.08.08.22.39;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2007.09.15.20.34.02;	author simon;	state Exp;
branches;
next	1.26;

1.26
date	2006.11.26.10.24.36;	author steven;	state Exp;
branches;
next	1.25;

1.25
date	2006.11.16.22.39.02;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2006.06.03.09.29.42;	author alek;	state Exp;
branches;
next	1.23;

1.23
date	2006.03.19.16.45.27;	author alek;	state Exp;
branches;
next	1.22;

1.22
date	2006.01.28.11.18.52;	author alek;	state Exp;
branches;
next	1.21;

1.21
date	2005.09.16.09.51.26;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2005.05.16.22.02.52;	author alek;	state Exp;
branches;
next	1.19;

1.19
date	2005.02.27.11.38.49;	author alek;	state Exp;
branches;
next	1.18;

1.18
date	2005.02.27.11.30.06;	author alek;	state Exp;
branches;
next	1.17;

1.17
date	2004.11.22.16.59.29;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2004.10.25.16.02.30;	author alek;	state Exp;
branches;
next	1.15;

1.15
date	2004.10.24.20.44.35;	author alek;	state Exp;
branches;
next	1.14;

1.14
date	2004.08.11.20.53.40;	author sturm;	state Exp;
branches;
next	1.13;

1.13
date	2004.07.26.10.21.12;	author peter;	state Exp;
branches;
next	1.12;

1.12
date	2004.02.23.05.06.40;	author ish;	state Exp;
branches;
next	1.11;

1.11
date	2004.02.18.20.05.11;	author xsa;	state Exp;
branches;
next	1.10;

1.10
date	2003.06.21.08.15.52;	author pvalchev;	state Exp;
branches;
next	1.9;

1.9
date	2003.02.10.14.59.41;	author lebel;	state Exp;
branches;
next	1.8;

1.8
date	2002.10.25.16.23.30;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2002.07.06.10.29.39;	author shell;	state Exp;
branches;
next	1.6;

1.6
date	2002.06.09.05.36.25;	author wilfried;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.15.19.53.43;	author matt;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.01.14.54.28;	author shell;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.10.15.00.47;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.19.01.05.17;	author shell;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.21.23.00.38;	author shell;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.08.21.23.00.38;	author shell;	state Exp;
branches;
next	;


desc
@@


1.51
log
@Remove py-psycopg as requested by alek@@ (maintainer).
We use py-psycopg2 nowadays...

ok jasper@@ martynas@@
@
text
@# $OpenBSD: Makefile,v 1.50 2011/12/20 19:07:07 jasper Exp $

SHARED_ONLY=		Yes

COMMENT-main=		PostgreSQL database adapter for Python
COMMENT-examples=	examples for PostgreSQL database adapter for Python

VERSION=		1.1.21
DISTNAME=		psycopg-${VERSION}
PKGNAME=		py-${DISTNAME}
PKGNAME-main=		py-${DISTNAME}
REVISION-main =		15
FULLPKGNAME-examples=	py-psycopg-examples-${VERSION}
REVISION-examples =	7
FULLPKGPATH-examples=	databases/py-psycopg,-examples
CATEGORIES=		databases

HOMEPAGE=		http://initd.org/projects/psycopg1

MAINTAINER=		Aleksander Piotrowski <alek@@openbsd.org>

PERMIT_PACKAGE_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes

WANTLIB-main=		crypto util pq

MASTER_SITES=	http://initd.org/pub/software/psycopg/

MODULES=	lang/python

BUILD_DEPENDS=	databases/postgresql,-server
RUN_DEPENDS=	databases/postgresql

MULTI_PACKAGES=	-main -examples

BUILD_DEPENDS+=	py-mxDateTime->=2.0.0:devel/py-mxDateTime
RUN_DEPENDS+=	py-mxDateTime->=2.0.0:devel/py-mxDateTime

RUN_DEPENDS-examples=	py-psycopg-${VERSION}:${PKGPATH}
PKG_ARCH-examples=	*

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--with-mxdatetime-includes=${MODPY_SITEPKG}/mx/DateTime/mxDateTime

NO_REGRESS=	Yes

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/py-psycopg/
	${INSTALL_DATA} ${WRKSRC}/doc/examples/* \
		${PREFIX}/share/examples/py-psycopg/
	chown ${LIBOWN}:${LIBGRP} ${PREFIX}/lib/python${MODPY_VERSION}/lib-dynload/psycopgmodule.so

.include <bsd.port.mk>
@


1.50
log
@- moar REVISION bumps after several python modules had their flavor dropped.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2011/12/20 07:02:19 fgsch Exp $
@


1.49
log
@kill python2.4 flavour. this was previously used for zope.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2011/11/18 00:35:08 espie Exp $
d12 1
a12 1
REVISION-main =		14
d14 1
a14 1
REVISION-examples =	6
@


1.48
log
@FLAVOR:L
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2011/10/21 16:23:45 espie Exp $
a6 1
COMMENT-zope=		database adapter for Zope
d12 1
a12 1
REVISION-main =		13
a15 3
FULLPKGNAME-zope=	py-psycopg-zope-${VERSION}
REVISION-zope =		7
FULLPKGPATH-zope=	databases/py-psycopg,-zope,python2.4
a35 8
FLAVORS=	python2.4 python2.7
.if !defined(FLAVOR) || empty(FLAVOR)
FLAVOR=	python2.7
.endif

.if ${FLAVOR} == "python2.4"
MULTI_PACKAGES=	-main -examples -zope
.elif ${FLAVOR} == "python2.7"
d37 3
a39 7
.else
ERRORS+=	"Fatal: You must select one version: ${FLAVORS}"
.endif

MODPY_VERSION=	${FLAVOR:S/python//}
BUILD_DEPENDS+=	py-mxDateTime->=2.0.0-${FLAVOR}:devel/py-mxDateTime,${FLAVOR}
RUN_DEPENDS+=	py-mxDateTime->=2.0.0-${FLAVOR}:devel/py-mxDateTime,${FLAVOR}
a43 4
RUN_DEPENDS-zope=	py-psycopg-${VERSION}-python2.4:${BUILD_PKGPATH} \
			${MODPY_RUN_DEPENDS}
PKG_ARCH-zope=		*

a49 5
.if ${MULTI_PACKAGES:M-zope}
	${INSTALL_DATA_DIR} ${PREFIX}/lib/zope/lib/python/Products/
	cd ${WRKSRC}; tar cf - ZPsycopgDA | tar xf - -C ${PREFIX}/lib/zope/lib/python/Products
	chown -R ${LIBOWN}:${LIBGRP} ${PREFIX}/lib/zope/lib/python/Products/ZPsycopgDA
.endif
@


1.47
log
@CHMOD and CHOWN serve no useful purpose, they're just chown/chmod
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2011/09/23 20:00:24 espie Exp $
d45 1
a45 1
.if ${FLAVOR:L:Mpython2.4} && !${FLAVOR:L:Npython2.4}
d47 1
a47 1
.elif ${FLAVOR:L:Mpython2.7} && !${FLAVOR:L:Npython2.7}
d53 3
a55 3
MODPY_VERSION=	${FLAVOR:L:S/python//}
BUILD_DEPENDS+=	py-mxDateTime->=2.0.0-${FLAVOR:L}:devel/py-mxDateTime,${FLAVOR:L}
RUN_DEPENDS+=	py-mxDateTime->=2.0.0-${FLAVOR:L}:devel/py-mxDateTime,${FLAVOR:L}
d70 1
a70 1
.if ${MULTI_PACKAGES:L:M-zope}
@


1.46
log
@better
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/09/23 19:01:24 espie Exp $
d73 1
a73 1
	${CHOWN} -R ${LIBOWN}:${LIBGRP} ${PREFIX}/lib/zope/lib/python/Products/ZPsycopgDA
d78 1
a78 1
	${CHOWN} ${LIBOWN}:${LIBGRP} ${PREFIX}/lib/python${MODPY_VERSION}/lib-dynload/psycopgmodule.so
@


1.45
log
@SUBDIR=databases/py-psycog,,-examples should yield something
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/09/16 08:48:04 espie Exp $
d41 1
a41 1
.if empty(FLAVOR) || !defined(FLAVOR)
@


1.44
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/06/12 09:36:56 rpointel Exp $
d41 3
a43 1
FLAVOR?=	python2.7
@


1.43
log
@Reported and patch from Nigel Taylor (thanks).
Modified PLIST, removed PFRAG.python2.6-main and added PFRAG.python2.7-main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/06/10 05:47:01 rpointel Exp $
d13 1
a13 1
REVISION-main =		12
d15 1
a15 1
REVISION-examples =	5
d18 1
a18 1
REVISION-zope =		6
@


1.42
log
@swap python2.6 flavor for python2.7.
keep python2.4 flavor to support plone/zope.
ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/06/08 17:33:59 jasper Exp $
d13 1
a13 1
REVISION-main =		11
d15 1
a15 1
REVISION-examples =	4
d18 1
a18 1
REVISION-zope =		5
@


1.41
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2010/11/15 00:22:53 espie Exp $
d13 1
a13 1
REVISION-main =		10
d15 1
a15 1
REVISION-examples =	3
d40 2
a41 2
FLAVORS=	python2.4 python2.6
FLAVOR?=	python2.6
d45 1
a45 1
.elif ${FLAVOR:L:Mpython2.6} && !${FLAVOR:L:Npython2.6}
@


1.40
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/09/03 12:34:55 sthen Exp $
d13 1
a13 1
REVISION-main =		9
d15 1
a15 1
REVISION-examples =	2
d18 1
a18 1
REVISION-zope =		4
@


1.39
log
@- drop python2.5 flavour of these "special" packages and add
@@pkgpath markers; from ajacoutot@@

- tweak from me: @@pkgpath markers for these go in PFRAG.python2.6-*
files rather than straight in PLIST-*, so that they are only added
to 2.6 packages, otherwise pkg_add -u will see that either 2.4 or
2.6 versions are valid updates and will have to ask every time,
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/09/02 22:11:49 ajacoutot Exp $
d37 2
a38 2
BUILD_DEPENDS=	::databases/postgresql,-server
RUN_DEPENDS=	::databases/postgresql
d52 2
a53 2
BUILD_DEPENDS+=	:py-mxDateTime->=2.0.0-${FLAVOR:L}:devel/py-mxDateTime,${FLAVOR:L}
RUN_DEPENDS+=	:py-mxDateTime->=2.0.0-${FLAVOR:L}:devel/py-mxDateTime,${FLAVOR:L}
d55 1
a55 1
RUN_DEPENDS-examples=	:py-psycopg-${VERSION}:${PKGPATH}
d58 1
a58 1
RUN_DEPENDS-zope=	:py-psycopg-${VERSION}-python2.4:${BUILD_PKGPATH} \
@


1.38
log
@Again a broken PKGNAME from python bump.
(also I wonder what is the python2.5 FLAVOR for).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/08/30 20:59:41 fgsch Exp $
d30 1
d40 1
a40 1
FLAVORS=	python2.4 python2.5 python2.6
d45 1
a45 1
.elif ${FLAVOR:L:Mpython2.[56]} && !${FLAVOR:L:Npython2.[56]}
@


1.37
log
@Add python 2.6 flavour, set it as default (was 2.5 previously) and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/02/26 19:10:38 espie Exp $
d12 1
@


1.36
log
@avoid warning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/07/20 19:44:48 naddy Exp $
d12 3
a14 2
PKGNAME-main=		py-${DISTNAME}p8
FULLPKGNAME-examples=	py-psycopg-examples-${VERSION}p1
d16 2
a17 1
FULLPKGNAME-zope=	py-psycopg-zope-${VERSION}p4
d38 2
a39 2
FLAVORS=	python2.4 python2.5
FLAVOR?=	python2.5
d43 1
a43 1
.elif ${FLAVOR:L:Mpython2.5} && !${FLAVOR:L:Npython2.5}
@


1.35
log
@* Fix package specs in dependencies.
* Make the -examples subpackage not inherit the -main dependencies, and
  instead depend on any flavor of the -main package.
* Allow both the python2.4 and python2.5 flavors to build the -examples
  subpackage.
* Don't attempt to use MODULES-${SUBPACKAGE}, which doesn't exist.
* Make FLAVOR references robust against mIXeD cAsE.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/04/26 11:01:04 ajacoutot Exp $
d16 1
@


1.34
log
@CONFIGURE_ENV += PYTHON="${MODPY_BIN}" is inherited from the python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/03/14 13:12:51 espie Exp $
d11 5
a15 4
PKGNAME=		py-${DISTNAME}p6
PKGNAME-main=		py-${DISTNAME}p7
FULLPKGNAME-examples=	py-psycopg-examples-${VERSION}p0
FULLPKGNAME-zope=	py-psycopg-zope-${VERSION}p3
a30 1
MODULES-zope=	www/zope
d32 2
a33 2
BUILD_DEPENDS=	:postgresql-server-*:databases/postgresql,-server
RUN_DEPENDS=	:postgresql-client-*:databases/postgresql
d39 1
a39 1
MULTI_PACKAGES=	-main -zope
d46 3
a48 3
MODPY_VERSION=	${FLAVOR:S/python//}
BUILD_DEPENDS+=	:py-mxDateTime->=2.0.0*-${FLAVOR}:devel/py-mxDateTime,${FLAVOR}
RUN_DEPENDS+=	:py-mxDateTime->=2.0.0*-${FLAVOR}:devel/py-mxDateTime,${FLAVOR}
d50 4
a53 1
RUN_DEPENDS-zope=	:py-psycopg-${VERSION}*-python${MODZOPE_PYTHON_VERSION}:${BUILD_PKGPATH} \
@


1.33
log
@fix deps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2008/01/20 17:45:26 winiger Exp $
a55 1
CONFIGURE_ENV=	PYTHON=${MODPY_BIN}
@


1.32
log
@correct FULLPKGNAME-examples

hint and ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2008/01/20 10:41:09 winiger Exp $
d12 3
a14 3
PKGNAME-main=		py-${DISTNAME}p6
FULLPKGNAME-examples=	py-psycopg-examples-${VERSION}
FULLPKGNAME-zope=	py-psycopg-zope-${VERSION}p2
@


1.31
log
@correct -examples FULLPKGNAME (found by sturm@@)
build -examples package only for python2.5

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2008/01/14 13:24:16 winiger Exp $
d13 1
a13 1
FULLPKGNAME-examples=	py-${DISTNAME}-examples
@


1.30
log
@add conflict for flavors

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/01/11 09:09:22 winiger Exp $
d13 1
a13 1
FULLPKGNAME-examples=	py-${DISTNAME}
d39 1
a39 1
MULTI_PACKAGES=	-main -examples -zope
@


1.29
log
@make it possible to install for different python versions

ok and help from mbalmer@@ and simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/10/08 08:22:39 steven Exp $
d11 2
a12 2
PKGNAME=		py-${DISTNAME}p5
PKGNAME-main=		py-${DISTNAME}p5
@


1.28
log
@bump PKGNAME after python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2007/09/15 20:34:02 simon Exp $
d3 1
a3 1
SHARED_ONLY=	Yes
d5 3
a7 2
COMMENT-main=	PostgreSQL database adapter for Python
COMMENT-zope=	database adapter for Zope
d9 7
a15 6
VERSION=	1.1.21
DISTNAME=	psycopg-${VERSION}
PKGNAME=	py-${DISTNAME}p4
PKGNAME-main=	py-${DISTNAME}p4
PKGNAME-zope=	py-psycopg-zope-${VERSION}p1
CATEGORIES=	databases
d17 1
a17 1
HOMEPAGE=	http://initd.org/projects/psycopg1
d19 1
a19 1
MAINTAINER=	Aleksander Piotrowski <alek@@openbsd.org>
d25 1
a25 1
WANTLIB=		crypto util pq
d30 1
d32 2
a33 4
BUILD_DEPENDS=	:postgresql-server-*:databases/postgresql,-server \
		:py-mxDateTime->=2.0.0:devel/py-mxDateTime
RUN_DEPENDS=	:postgresql-client-*:databases/postgresql \
		:py-mxDateTime->=2.0.0:devel/py-mxDateTime
d35 2
a36 1
MULTI_PACKAGES=	-main -zope
d38 13
a50 2
RUN_DEPENDS-zope=	:zope-*:www/zope \
			:py-psycopg-${VERSION}*:${BUILD_PKGPATH} \
a52 1
WANTLIB-zope=
d61 1
d65 1
@


1.27
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/11/26 10:24:36 steven Exp $
d10 3
a12 3
PKGNAME=	py-${DISTNAME}p3
PKGNAME-main=	py-${DISTNAME}p3
PKGNAME-zope=	py-psycopg-zope-${VERSION}p0
@


1.26
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/11/16 22:39:02 steven Exp $
d5 2
a6 2
COMMENT-main=	"PostgreSQL database adapter for Python"
COMMENT-zope=	"database adapter for Zope"
@


1.25
log
@fix group.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/06/03 09:29:42 alek Exp $
d5 1
a5 1
COMMENT=	"PostgreSQL database adapter for Python"
d10 2
a11 1
PKGNAME=	py-${DISTNAME}p2
d34 1
a34 2
MULTI_PACKAGES=	-zope
SUBPACKAGE?=
d36 5
a40 6
.if defined(PACKAGING) && ${SUBPACKAGE} == "-zope"
RUN_DEPENDS=	:zope-*:www/zope \
		:py-psycopg-${VERSION}*:databases/py-psycopg
PKG_ARCH=	*
WANTLIB=
.endif
@


1.24
log
@Bump PKGNAMEs after recent python switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/03/19 16:45:27 alek Exp $
d10 2
a11 2
PKGNAME=	py-${DISTNAME}p1
FULLPKGNAME-zope=py-psycopg-zope-${VERSION}p0
d56 1
@


1.23
log
@Better RUN_DEPENDS

spotted by Lars Hansson <lars@@unet.net.ph>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/01/28 11:18:52 alek Exp $
d10 2
a11 2
PKGNAME=	py-${DISTNAME}p0
FULLPKGNAME-zope=py-psycopg-zope-${VERSION}
@


1.22
log
@Overhaul and update to 1.1.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/09/16 09:51:26 espie Exp $
d10 1
a10 1
PKGNAME=	py-${DISTNAME}
d28 3
a30 1
RUN_DEPENDS=	:postgresql-server-*:databases/postgresql,-server \
a31 1
BUILD_DEPENDS=	${RUN_DEPENDS}
@


1.21
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/05/16 22:02:52 alek Exp $
d8 1
a8 1
VERSION=	1.1.15
d10 2
a11 2
PKGNAME=	py-psycopg-${VERSION}
FULLPKGNAME=	${PKGNAME}p0
a13 1
MASTER_SITES=	http://initd.org/pub/software/psycopg/
d24 1
a24 2
PSEUDO_FLAVORS=	no_zope
FLAVOR?=
d26 1
a26 2
PYTHON_VER=	2.3
DATETIME_PATH=	${LOCALBASE}/lib/python${PYTHON_VER}/site-packages/mx/DateTime
a28 1
		:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
a31 1
.if empty(FLAVOR:L:Mno_zope)
d35 1
a35 3
FULLPKGNAME-zope=	py-psycopg-zope-${VERSION}

.  if defined(PACKAGING) && ${SUBPACKAGE} == "-zope"
a39 1
.  endif
d43 2
a44 2
CONFIGURE_ARGS=	--with-mxdatetime-includes=${DATETIME_PATH}/mxDateTime
CONFIGURE_ENV=	PYTHON=${LOCALBASE}/bin/python${PYTHON_VER}
d46 1
a46 1
SUBST_VARS=	PYTHON_VER
d52 3
a54 5

do-regress: fake
	env PYTHONPATH=${WRKINST}${LOCALBASE}/lib/python${PYTHON_VER}/lib-dynload \
	python${PYTHON_VER} ${WRKSRC}/tests/check_types.py "dbname=template1 user=_postgresql" \
		| diff -uw - ${WRKSRC}/tests/check_types.expected
@


1.20
log
@Remove py2.1 and py2.3 FLAVORS from devel/py-mxDateTime.  Python 2.3 is now
default version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/02/27 11:38:49 alek Exp $
d11 1
a11 1
FULLPKGNAME=	${PKGNAME}
@


1.19
log
@Fix WANTLIB marker (missed in previous commit)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/02/27 11:30:06 alek Exp $
d33 1
a33 1
		:py-mxDateTime->=2.0.0-py${PYTHON_VER}:devel/py-mxDateTime,py${PYTHON_VER}
@


1.18
log
@Fix python detection
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2004/11/22 16:59:29 espie Exp $
d23 1
a23 1
WANTLIB=		crypto util
d46 1
@


1.17
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/10/25 16:02:30 alek Exp $
d50 2
a51 3
CONFIGURE_ARGS=	--with-python=python${PYTHON_VER}		\
		--with-python-version=${PYTHON_VER}		\
		--with-mxdatetime-includes=${DATETIME_PATH}/mxDateTime
@


1.16
log
@- remove unnecessary patch
- use PSEUDO_FLAVORS
- better DESCRiptions

help and ok xsa@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/10/24 20:44:35 alek Exp $
d23 1
@


1.15
log
@- update to 1.1.15
- change zope FLAVOR to SUBPACKAGE
- switch to python 2.3

ok xsa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/08/11 20:53:40 sturm Exp $
d24 1
a24 1
FLAVORS=	no_zope
@


1.14
log
@postresql-client is not enough, we have to depend on -server here
otherwise it will not configure successfully

ok pval@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.13 2004/07/26 10:21:12 peter Exp $
d6 1
d8 1
a8 1
VERSION=	1.1.4
d11 1
d15 3
a17 1
HOMEPAGE=	http://initd.org/software/psycopg
d24 1
a24 1
FLAVORS=	zope
d27 1
a27 1
PYTHON_VER=	2.1
d32 1
a32 1
		:py-mxDateTime->=2.0.0-py2.1:devel/py-mxDateTime,py2.1
d35 11
a45 2
.if ${FLAVOR:L:Mzope}
RUN_DEPENDS+=	:zope-*:www/zope
d55 9
a63 5
NO_REGRESS=	Yes

pre-install:
	mkdir -p ${PREFIX}/lib/zope/lib/python/Products/
	cp -r ${WRKSRC}/ZPsycopgDA/ ${PREFIX}/lib/zope/lib/python/Products/
@


1.13
log
@Update to use new postgresql-client dependency

Also removed "useless +'s" on _DEPENDS, at xsa@@ request.

As this port has no currently listed maintainer, I had ok's from
xsa@@ and Aleksander Piotrowski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/02/23 05:06:40 ish Exp $
d24 2
a25 2
LIB_DEPENDS=	pq.3:postgresql-client-*:databases/postgresql
RUN_DEPENDS=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
@


1.12
log
@depend on the python 2.1 flavor of py-mxDateTime
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/02/18 20:05:11 xsa Exp $
d24 2
a25 2
LIB_DEPENDS+=	pq.2::databases/postgresql
RUN_DEPENDS+=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER} \
d27 1
a27 1
BUILD_DEPENDS+=	${RUN_DEPENDS}
@


1.11
log
@
remove MAINTAINER per his resquest;
via and ok ish@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/06/21 08:15:52 pvalchev Exp $
d26 1
a26 1
		:py-mxDateTime->=2.0.0:devel/py-mxDateTime
@


1.10
log
@update to py-psycopg-1.1.4; from maintainer Maurice Nonnekes <maurice@@amaze.nl>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/02/10 14:59:41 lebel Exp $
a11 2

MAINTAINER=	Maurice Nonnekes <maurice@@amaze.nl>
@


1.9
log
@update databases/py-psycopg to 1.0.14; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/10/25 16:23:30 naddy Exp $
d5 1
a5 1
VERSION=	1.0.14
@


1.8
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/07/06 10:29:39 shell Exp $
d5 1
a5 1
VERSION=	1.0.9
@


1.7
log
@Updated to py-psyopg-1.0.9

From Maurice Nonnekes <maurice@@amaze.nl> (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/06/09 05:36:25 wilfried Exp $
a8 1
NEED_VERSION=	1.504
d41 2
@


1.6
log
@add specifier to RUN_DEPENDS and BUILD_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/02/15 19:53:43 matt Exp $
d5 1
a5 1
VERSION=	1.0.1
@


1.5
log
@Update Python dependencies.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/02/01 14:54:28 shell Exp $
d29 1
a29 1
		::devel/py-mxDateTime
d33 1
a33 1
RUN_DEPENDS+=	::www/zope
@


1.4
log
@updated to py-psycopg-1.0.1, from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/11/10 15:00:47 espie Exp $
d28 1
a28 1
RUN_DEPENDS+=	::lang/python		\
@


1.3
log
@Kill first component of BUILD_DEPENDS.

Fix sawfish comment while I'm at it.
`window manager for the X windows system'.
Like DUH ! It's going to be a window manager for my microwave oven ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/09/19 01:05:17 shell Exp $
d5 1
a5 1
VERSION=	0.99.6
d9 1
a9 1
NEED_VERSION=	1.457
d11 2
a12 2
MASTER_SITES=	http://initd.org/software/psycopg/
HOMEPAGE=	http://initd.org/Software/psycopg/
@


1.2
log
@Upgrade to 0.99.6, add zope flavor

from maintainer
@
text
@d1 1
a1 1
# $OpenBSD$
d28 2
a29 2
RUN_DEPENDS+=	python${PYTHON_VER}::lang/python		\
		${DATETIME_PATH}::devel/py-mxDateTime
d33 1
a33 1
RUN_DEPENDS+=	zope-instance::www/zope
@


1.1
log
@Initial revision
@
text
@d5 1
a5 1
VERSION=	0.99.5
d9 1
a9 1
NEED_VERSION=	1.441
d21 3
d27 2
a28 2
LIB_DEPENDS=	pq.2::databases/postgresql
RUN_DEPENDS=	python${PYTHON_VER}::lang/python		\
d30 5
a34 1
BUILD_DEPENDS=	${RUN_DEPENDS}
d42 4
@


1.1.1.1
log
@Initial import of psycopg-0.99.5

Maintainer : Maurice Nonnekes <maurice@@amaze.nl>
---

psycopg is a PostgreSQL database adapter for the Python programming
language (just like pygresql and popy.) It was written from scratch
with the aim of being very small and fast, and stable as a rock.

@
text
@@
