head	1.6;
access;
symbols
	OPENBSD_3_0:1.5.0.2
	OPENBSD_3_0_BASE:1.5
	OPENBSD_2_9_TRACKING_SWITCH:1.5
	OPENBSD_2_9:1.4.0.4
	OPENBSD_2_9_BASE:1.4
	OPENBSD_2_8:1.4.0.2
	OPENBSD_2_8_BASE:1.4
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3;
locks; strict;
comment	@# @;


1.6
date	2001.12.22.03.54.44;	author brad;	state dead;
branches;
next	1.5;

1.5
date	2001.06.02.20.18.43;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2000.08.15.13.24.01;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2000.01.05.06.12.17;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2000.01.01.05.54.13;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	99.12.02.03.47.36;	author brad;	state Exp;
branches;
next	;


desc
@@


1.6
log
@upgrade to MySQL 3.23.46
--
- The port has switched back to using native threads. Only tested and known to work on i386. For everything else the port is currently marked BROKEN until the appropriate architectures are tested. Do not even try this if you're not running -current libc_r.
- As suggested by Marc Espie, make symlink for the MySQL client library in lib/ to eliminate the need for adding lib/mysql to the shlib dir path. Porters have to be careful and ensure autoconf scripts do not arbitrarily enable MySQL support after this change.
@
text
@#!/bin/sh

LOCALBASE=@@LOCALBASE@@
PREFIX=@@PREFIX@@

if [ -x /sbin/ldconfig ]; then
 /sbin/ldconfig -m $PREFIX/lib/mysql
 if [ -d $LOCALBASE/lib/pth ]; then
   /sbin/ldconfig -m $LOCALBASE/lib/pth
 fi
fi

if [ -x $PREFIX/bin/safe_mysqld ]; then
 $PREFIX/bin/safe_mysqld > /dev/null & echo -n ' mysql'
fi
@


1.5
log
@upgrade to MySQL 3.23.38

- Also split the package into client and a server sub-package which
depends on the client portion. This allows for adding/removing the server
without needing to remove ports that might be dependent on the client
portion.
- innodb FLAVOR goes away and is replaced with the max FLAVOR like the
real MySQL distribution which gives us both Berkeley DB and InnoDB tables
for transaction support.
@
text
@@


1.4
log
@- re-introduce DB_DIR option
- make sure MySQL is started as user mysql from safe_mysqld.sh script
instead of the example startup.sh
- hard coded /usr/local -> ${PREFIX} in MESSAGE
- use user/group commands instead of cat/adduser in INSTALL script
- ${FOO} -> $FOO in INSTALL/DEINSTALL
@
text
@d3 1
d7 4
a10 1
 /sbin/ldconfig -m ${PREFIX}/lib/mysql
d13 2
a14 2
if [ -x ${PREFIX}/bin/safe_mysqld ]; then
 ${PREFIX}/bin/safe_mysqld > /dev/null & echo -n ' mysql'
@


1.3
log
@fix startup script
Reported by: Peter Strömberg" <peter.stromberg@@commentor.se>
@
text
@d10 1
a10 1
 ${PREFIX}/bin/safe_mysqld --user="mysql" > /dev/null & echo -n ' mysql'
@


1.2
log
@- upgrade to MySQL 3.22.27
- make the default database directory a bit easier to change with the
DB_DIR variable
- add warning about possible virtual memory limit exhaustion
- change default database directory to /var/mysql and chown it to the
user:group
- integrate check_old_version script into Makefile
- we should be able to make this into a full package now, though not
tested fully
- install user:group of mysql and make MySQL load as user mysql

Reviewed and tested by: ericj@@
@
text
@d10 1
a10 1
 ${PREFIX}/bin/safe_mysqld --user="mysql" > /dev/null & && echo -n ' mysql'
@


1.1
log
@- remove now unnecesary USE_EGCC and USE_EGXX tags
- split out startup.sh cretion from Makefile and just include it in the
  files subdir
- remove CONFIGURE_ENV, CFLAGS and CXXFLAGS do not require overriding with
  -current pthreads, the autoconf script properly detects and uses them
- cleanup Makefile
@
text
@d10 1
a10 1
 ${PREFIX}/bin/safe_mysqld > /dev/null & && echo -n ' mysql'
@

