head	1.9;
access;
symbols
	OPENBSD_3_6:1.8.0.4
	OPENBSD_3_6_BASE:1.8
	OPENBSD_3_5:1.8.0.2
	OPENBSD_3_5_BASE:1.8
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.4.0.4
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2;
locks; strict;
comment	@# @;


1.9
date	2004.10.12.21.00.27;	author espie;	state dead;
branches;
next	1.8;

1.8
date	2004.02.25.23.54.19;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2004.01.31.03.08.49;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2003.08.27.00.14.49;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2003.01.20.19.15.31;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.20.18.03.33;	author brad;	state Exp;
branches
	1.4.2.1
	1.4.4.1;
next	1.3;

1.3
date	2002.02.19.03.58.57;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.02.21.57.05;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.02.20.18.44;	author brad;	state Exp;
branches;
next	;

1.4.2.1
date	2003.01.30.04.45.54;	author brad;	state Exp;
branches;
next	;

1.4.4.1
date	2003.01.30.15.44.54;	author brad;	state Exp;
branches;
next	;


desc
@@


1.9
log
@do not show stuff that's done by pkg_delete -c when pkg_delete -c is
not mentioned.

(pkg_delete has all the info to do a good job of this, and will do so soon).
@
text
@#!/bin/sh
# $OpenBSD: DEINSTALL-server,v 1.8 2004/02/25 23:54:19 brad Exp $
#
# MySQL de-installation

PATH=/bin:/usr/bin:/sbin:/usr/sbin
PREFIX=${PKG_PREFIX:-/usr/local}
DB_DIR=${DB_DIR}
SOCKET_DIR=${SOCKET_DIR}
MYSQLUSER=_mysql
MYSQLGROUP=_mysql

if [ "$PKG_DELETE_EXTRA" != Yes ]; then
    echo
    echo "+---------------"
    echo "| To completely deinstall the $1 package you need"
    echo "| to perform these steps as root:"
    echo "|"
    echo "|           userdel $MYSQLUSER"
    echo "|           groupdel $MYSQLGROUP"
    echo "|           rm -rf $DB_DIR"
    echo "|           rm -rf $SOCKET_DIR"
    echo "|"
    echo "| Do not do this if you plan on re-installing $1"
    echo "| at some future time."
    echo "+---------------"
    echo
fi

exit 0
@


1.8
log
@@@extra removes user/group too
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL-server,v 1.7 2004/01/31 03:08:49 brad Exp $
@


1.7
log
@add @@extra support
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL-server,v 1.6 2003/08/27 00:14:49 brad Exp $
d13 8
a20 8
echo
echo "+---------------"
echo "| To completely deinstall the $1 package you need"
echo "| to perform these steps as root:"
echo "|"
echo "|           userdel $MYSQLUSER"
echo "|           groupdel $MYSQLGROUP"
if [ "$PKG_DELETE_EXTRA" != Yes -a -d $DB_DIR ]; then
a21 2
fi
if [ "$PKG_DELETE_EXTRA" != Yes -a -d $SOCKET_DIR ]; then
d23 5
a28 5
echo "|"
echo "| Do not do this if you plan on re-installing $1"
echo "| at some future time."
echo "+---------------"
echo
@


1.6
log
@use new user/group schema
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL-server,v 1.5 2003/01/20 19:15:31 brad Exp $
d20 6
a25 2
echo "|           rm -rf $DB_DIR"
echo "|           rm -rf $SOCKET_DIR"
@


1.5
log
@add #!/bin/sh
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL-server,v 1.4 2002/02/20 18:03:33 brad Exp $
d10 2
a11 2
MYSQLUSER=mysql
MYSQLGROUP=mysql
@


1.4
log
@a few improvements here and there.
@
text
@d1 2
a2 1
# $OpenBSD: DEINSTALL-server,v 1.3 2002/02/19 03:58:57 brad Exp $
@


1.4.4.1
log
@MFC:
upgrade to MySQL 3.23.55

STABILITY FIX:
Fixed double free'd pointer bug in mysql_change_user() handling, that
enabled a specially hacked version of MySQL client to crash mysqld.
Note, that one needs to login to the server by using a valid user
account to be able to exploit this bug.
@
text
@d1 1
a1 2
#!/bin/sh
# $OpenBSD: DEINSTALL-server,v 1.4 2002/02/20 18:03:33 brad Exp $
@


1.4.2.1
log
@MFC:
upgrade to MySQL 3.23.55

STABILITY FIX:
Fixed double free'd pointer bug in mysql_change_user() handling, that
enabled a specially hacked version of MySQL client to crash mysqld.
Note, that one needs to login to the server by using a valid user
account to be able to exploit this bug.
@
text
@d1 1
a1 2
#!/bin/sh
# $OpenBSD: DEINSTALL-server,v 1.4 2002/02/20 18:03:33 brad Exp $
@


1.3
log
@- Move socket from the database dir to /var/run/mysql.
- Tighten perms on the database dir.
--
Suggestion of using /var/run/mysql from: Wilbern Cobb
@
text
@d1 1
a1 1
# $OpenBSD: DEINSTALL-server,v 1.2 2001/06/02 21:57:05 brad Exp $
d9 2
d17 2
a18 2
echo "|           userdel mysql"
echo "|           groupdel mysql"
@


1.2
log
@rearrange DEINSTALL message so it doesn't wraparound if the PKGNAME is too
long.
@
text
@d1 1
a1 1
# $OpenBSD: DEINSTALL-server,v 1.1 2001/06/02 20:18:44 brad Exp $
d8 1
d18 1
@


1.1
log
@upgrade to MySQL 3.23.38

- Also split the package into client and a server sub-package which
depends on the client portion. This allows for adding/removing the server
without needing to remove ports that might be dependent on the client
portion.
- innodb FLAVOR goes away and is replaced with the max FLAVOR like the
real MySQL distribution which gives us both Berkeley DB and InnoDB tables
for transaction support.
@
text
@d1 1
a1 1
# $OpenBSD: DEINSTALL,v 1.4 2000/09/06 21:06:20 brad Exp $
d11 2
a12 2
echo "| To completely deinstall the $1 package you need to perform"
echo "| these steps as root:"
@

