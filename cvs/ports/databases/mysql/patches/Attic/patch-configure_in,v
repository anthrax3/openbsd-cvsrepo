head	1.36;
access;
symbols
	OPENBSD_5_6:1.35.0.8
	OPENBSD_5_6_BASE:1.35
	OPENBSD_5_5:1.35.0.6
	OPENBSD_5_5_BASE:1.35
	OPENBSD_5_4:1.35.0.4
	OPENBSD_5_4_BASE:1.35
	OPENBSD_5_3:1.35.0.2
	OPENBSD_5_3_BASE:1.35
	OPENBSD_5_2:1.34.0.4
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.34
	OPENBSD_5_1:1.34.0.2
	OPENBSD_5_0:1.33.0.4
	OPENBSD_5_0_BASE:1.33
	OPENBSD_4_9:1.33.0.2
	OPENBSD_4_9_BASE:1.33
	OPENBSD_4_8:1.30.0.2
	OPENBSD_4_8_BASE:1.30
	OPENBSD_4_7:1.29.0.2
	OPENBSD_4_7_BASE:1.29
	OPENBSD_4_6:1.26.0.2
	OPENBSD_4_6_BASE:1.26
	OPENBSD_4_5:1.25.0.2
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.23.0.6
	OPENBSD_4_4_BASE:1.23
	OPENBSD_4_3:1.23.0.4
	OPENBSD_4_3_BASE:1.23
	OPENBSD_4_2:1.23.0.2
	OPENBSD_4_2_BASE:1.23
	OPENBSD_4_1:1.20.0.2
	OPENBSD_4_1_BASE:1.20
	OPENBSD_4_0:1.17.0.2
	OPENBSD_4_0_BASE:1.17
	OPENBSD_3_9:1.14.0.2
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.11.0.2
	OPENBSD_3_8_BASE:1.11
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.9.0.2
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.5.0.2
	OPENBSD_3_5_BASE:1.5
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2;
locks; strict;
comment	@# @;


1.36
date	2014.10.03.10.54.55;	author brad;	state dead;
branches;
next	1.35;
commitid	l38yfxK2clf7O9UX;

1.35
date	2013.02.08.15.51.56;	author brad;	state Exp;
branches;
next	1.34;

1.34
date	2011.09.05.07.11.23;	author giovanni;	state Exp;
branches;
next	1.33;

1.33
date	2011.01.11.11.03.03;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.12.26.08.23.17;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.10.21.03.03;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2010.03.21.01.20.47;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2010.01.01.19.54.33;	author ajacoutot;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2009.08.05.14.24.33;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2009.07.27.15.19.15;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2009.05.29.08.42.06;	author sthen;	state Exp;
branches
	1.26.2.1;
next	1.25;

1.25
date	2008.12.28.19.45.17;	author sthen;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2008.08.24.08.40.03;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2007.08.08.21.33.51;	author robert;	state Exp;
branches;
next	1.22;

1.22
date	2007.06.07.20.35.35;	author ckuethe;	state Exp;
branches;
next	1.21;

1.21
date	2007.04.09.22.43.06;	author ckuethe;	state Exp;
branches;
next	1.20;

1.20
date	2007.01.25.07.41.48;	author jakob;	state Exp;
branches;
next	1.19;

1.19
date	2006.10.14.05.04.54;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2006.10.03.04.52.03;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2006.05.10.03.21.30;	author brad;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2006.04.30.20.55.44;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2006.03.10.23.51.53;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2006.01.06.00.13.26;	author brad;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2005.12.12.04.55.44;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2005.09.04.22.51.24;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2005.03.30.03.07.52;	author brad;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	2005.01.14.01.42.58;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2004.07.18.11.38.23;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2004.05.21.12.16.21;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2004.05.16.09.01.16;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2004.05.16.04.30.39;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2003.12.30.05.57.30;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2003.08.26.15.37.18;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2002.12.14.23.56.43;	author brad;	state Exp;
branches
	1.3.2.1
	1.3.4.1;
next	1.2;

1.2
date	2002.08.22.13.44.17;	author brad;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2002.07.11.15.42.17;	author brad;	state Exp;
branches;
next	;

1.2.2.1
date	2002.12.16.21.12.03;	author brad;	state Exp;
branches;
next	1.2.2.2;

1.2.2.2
date	2003.09.01.22.54.03;	author brad;	state Exp;
branches;
next	;

1.3.2.1
date	2002.12.16.17.57.07;	author brad;	state Exp;
branches;
next	;

1.3.4.1
date	2003.09.03.00.26.22;	author brad;	state Exp;
branches;
next	;

1.11.2.1
date	2006.05.14.07.43.33;	author sturm;	state Exp;
branches;
next	;

1.14.2.1
date	2006.05.14.07.19.51;	author sturm;	state Exp;
branches;
next	1.14.2.2;

1.14.2.2
date	2006.10.04.16.29.15;	author sturm;	state Exp;
branches;
next	;

1.17.2.1
date	2006.11.01.13.03.06;	author sturm;	state Exp;
branches;
next	;

1.25.2.1
date	2009.06.28.03.38.54;	author william;	state Exp;
branches;
next	;

1.26.2.1
date	2009.11.07.18.04.19;	author william;	state Exp;
branches;
next	;

1.29.2.1
date	2010.05.29.01.06.16;	author william;	state Exp;
branches;
next	;


desc
@@


1.36
log
@So long and into the Attic you go.

ok sthen@@
@
text
@$OpenBSD: patch-configure_in,v 1.35 2013/02/08 15:51:56 brad Exp $
--- configure.in.orig	Tue Jan  8 07:37:00 2013
+++ configure.in	Thu Feb  7 12:33:05 2013
@@@@ -489,44 +489,7 @@@@ AC_SUBST(ABI_CHECK)
 AC_PATH_PROG(PS, ps, ps)
 AC_MSG_CHECKING("how to check if pid exists")
 PS=$ac_cv_path_PS
-# Linux style
-if $PS wwwp $$ 2> /dev/null | grep -- "$0" > /dev/null
-then
-  FIND_PROC="$PS wwwp \$\$PID | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" > /dev/null"
-# Solaris
-elif $PS -fp $$ 2> /dev/null | grep -- $0 > /dev/null
-then
-  FIND_PROC="$PS -p \$\$PID | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" > /dev/null"
-# BSD style
-elif $PS -uaxww 2> /dev/null | grep -- $0 > /dev/null
-then
-  FIND_PROC="$PS -uaxww | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" | grep \" \$\$PID \" > /dev/null"
-# SysV style
-elif $PS -ef 2> /dev/null | grep -- $0 > /dev/null
-then
-  FIND_PROC="$PS -ef | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" | grep \" \$\$PID \" > /dev/null"
-# Do anybody use this?
-elif $PS $$ 2> /dev/null | grep -- $0 > /dev/null
-then
-  FIND_PROC="$PS \$\$PID | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" > /dev/null"
-else
-  case $SYSTEM_TYPE in
-    *freebsd*|*dragonfly*)
-      FIND_PROC="$PS p \$\$PID | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" > /dev/null"
-      ;;
-    *darwin*)
-      FIND_PROC="$PS -uaxww | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" | grep \" \$\$PID \" > /dev/null"
-      ;;
-    *cygwin*)
-      FIND_PROC="$PS -e | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" | grep \" \$\$PID \" > /dev/null"
-      ;;
-    *netware*)
-      FIND_PROC=
-      ;;
-    *)
-      AC_MSG_ERROR([Could not find the right ps and/or grep switches. Which OS is this?  See the Installation chapter in the Reference Manual.])
-  esac
-fi
+FIND_PROC="$PS -uaxww | grep -v \" grep\" | grep -v mysqld_safe | grep -- \"\$\$MYSQLD\" | grep \" \$\$PID \" > /dev/null"
 AC_SUBST(FIND_PROC)
 AC_MSG_RESULT("$FIND_PROC")
 
@@@@ -913,7 +876,8 @@@@ AC_ARG_WITH(libwrap,
     AC_CHECK_HEADER(tcpd.h,
       LIBS="-lwrap $LIBS"
       AC_MSG_CHECKING(for TCP wrappers library -lwrap)
-      AC_TRY_LINK([#include <tcpd.h>
+      AC_TRY_LINK([#include <stdio.h>
+#include <tcpd.h>
 int allow_severity = 0;
 int deny_severity  = 0;
 
@


1.35
log
@Update to MySQL 5.1.68.

ok giovanni@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.34 2011/09/05 07:11:23 giovanni Exp $
@


1.34
log
@
Update to 5.1.58
help and ok Brad (Maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.33 2011/01/11 11:03:03 ajacoutot Exp $
--- configure.in.orig	Fri Jul  1 11:22:18 2011
+++ configure.in	Thu Aug 25 21:46:08 2011
@@@@ -464,44 +464,7 @@@@ AC_SUBST(ABI_CHECK)
d50 1
a50 1
@@@@ -888,7 +851,8 @@@@ AC_ARG_WITH(libwrap,
@


1.33
log
@Revert local patches that reverted a commit that broken MySQL on OpenBSD
64-bit archs and apply a patch from upstream to properly fix the
regression.

from Brad (maintainer)
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.32 2010/12/26 08:23:17 ajacoutot Exp $
--- configure.in.orig	Mon Nov 29 05:38:01 2010
+++ configure.in	Fri Jan  7 19:15:03 2011
a59 16
@@@@ -1884,6 +1848,15 @@@@ dnl
 
 MYSQL_CHECK_TIME_T
 
+dnl
+dnl check size of time_t
+dnl
+
+AC_CHECK_SIZEOF(time_t, 8)
+if test "$ac_cv_sizeof_time_t" -eq 0
+then
+  AC_MSG_ERROR("MySQL needs a time_t type.")
+fi
 
 # do we need #pragma interface/#pragma implementation ?
 # yes if it's gcc 2.x, and not icc pretending to be gcc, and not cygwin
@


1.32
log
@Update to mysql-5.1.54.
More details at:
http://dev.mysql.com/doc/refman/5.1/en/news-5-1-54.html

from Brad
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.31 2010/11/10 21:03:03 sthen Exp $
d3 1
a3 1
+++ configure.in	Tue Dec 14 20:38:01 2010
d60 16
@


1.31
log
@Update MySQL to 5.1.52, from Brad.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.30 2010/03/21 01:20:47 sthen Exp $
--- configure.in.orig	Tue Aug  3 13:24:24 2010
+++ configure.in	Tue Aug 24 22:56:29 2010
@@@@ -457,44 +457,7 @@@@ AC_SUBST(ABI_CHECK)
d50 1
a50 1
@@@@ -881,7 +844,8 @@@@ AC_ARG_WITH(libwrap,
@


1.30
log
@update to 5.1.45; from Brad
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.29 2010/01/01 19:54:33 ajacoutot Exp $
--- configure.in.orig	Mon Mar  1 14:30:52 2010
+++ configure.in	Sat Mar 20 20:21:12 2010
@@@@ -488,44 +488,7 @@@@ AC_SUBST(ABI_CHECK)
d50 1
a50 1
@@@@ -912,7 +875,8 @@@@ AC_ARG_WITH(libwrap,
@


1.29
log
@Bugfix update to MySQL 5.1.42.
See http://dev.mysql.com/doc/refman/5.1/en/news-5-1-42.html for details.

from Brad
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.28 2009/08/05 14:24:33 sthen Exp $
--- configure.in.orig	Wed Dec 16 12:54:29 2009
+++ configure.in	Thu Dec 31 17:24:36 2009
@@@@ -474,44 +474,7 @@@@ AC_SUBST(ABI_CHECK)
d50 1
a50 1
@@@@ -898,7 +861,8 @@@@ AC_ARG_WITH(libwrap,
@


1.29.2.1
log
@MFC:

SECURITY UPDATE to mysql-5.1.47

http://dev.mysql.com/doc/refman/5.1/en/news-5-1-47.html

from Brad
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.29 2010/01/01 19:54:33 ajacoutot Exp $
--- configure.in.orig	Mon Mar  1 14:30:52 2010
+++ configure.in	Sat Mar 20 20:21:12 2010
@@@@ -488,44 +488,7 @@@@ AC_SUBST(ABI_CHECK)
d50 1
a50 1
@@@@ -912,7 +875,8 @@@@ AC_ARG_WITH(libwrap,
@


1.28
log
@Update to 5.1.37 from Brad (maintainer); fixes crashes.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.27 2009/07/27 15:19:15 sthen Exp $
--- configure.in.orig	Mon Jul 13 19:08:44 2009
+++ configure.in	Tue Aug  4 06:55:37 2009
@@@@ -468,44 +468,7 @@@@ AC_SUBST(ABI_CHECK)
d50 1
a50 1
@@@@ -892,7 +855,8 @@@@ AC_ARG_WITH(libwrap,
@


1.27
log
@Update MySQL to 5.1.33; from Brad.

Tested by giovanni@@ on amd64 and several ports@@ readers.
No problems found with a complete bulk build.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.26 2009/05/29 08:42:06 sthen Exp $
--- configure.in.orig	Tue Mar 31 10:35:39 2009
+++ configure.in	Wed May  6 04:25:58 2009
d50 1
a50 1
@@@@ -891,7 +854,8 @@@@ AC_ARG_WITH(libwrap,
a59 30
@@@@ -1621,29 +1585,6 @@@@ case $SYSTEM_TYPE in
 AC_SYS_RESTARTABLE_SYSCALLS
     ;;
 esac
-
-# Build optimized or debug version ?
-# First check for gcc and g++
-if test "$ac_cv_prog_gcc" = "yes"
-then
-  DEBUG_CFLAGS="-g"
-  DEBUG_OPTIMIZE_CC="-O"
-  OPTIMIZE_CFLAGS="$MAX_C_OPTIMIZE"
-else
-  DEBUG_CFLAGS="-g"
-  DEBUG_OPTIMIZE_CC=""
-  OPTIMIZE_CFLAGS="-O"
-fi
-if test "$ac_cv_prog_cxx_g" = "yes"
-then
-  DEBUG_CXXFLAGS="-g"
-  DEBUG_OPTIMIZE_CXX="-O"
-  OPTIMIZE_CXXFLAGS="$MAX_CXX_OPTIMIZE"
-else
-  DEBUG_CXXFLAGS="-g"
-  DEBUG_OPTIMIZE_CXX=""
-  OPTIMIZE_CXXFLAGS="-O"
-fi
 
 case $SYSTEM_TYPE in
   *netware*)
@


1.26
log
@bugfix update to 5.0.82, from Brad.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.25 2008/12/28 19:45:17 sthen Exp $
--- configure.in.orig	Thu May  7 17:11:51 2009
+++ configure.in	Thu May 28 17:45:20 2009
@@@@ -514,44 +514,7 @@@@ AC_SUBST(ICHECK)
d50 1
a50 1
@@@@ -937,7 +900,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 10
@@@@ -1705,7 +1669,7 @@@@ then
   AC_CHECK_LIB(c_r,strtok_r)
   case "$with_osf32_threads---$target_os" in
     # Don't keep -lc_r in LIBS; -pthread handles it magically
-    yes---* | *---freebsd* | *---hpux*) LIBS="$my_save_LIBS" ;;
+    yes---* | *---freebsd* | *---openbsd* | *---hpux*) LIBS="$my_save_LIBS" ;;
 
   esac
   AC_CHECK_FUNCS(strtok_r pthread_init)
@@@@ -1753,29 +1717,6 @@@@ case $SYSTEM_TYPE in
d88 2
a89 2
 if expr "$SYSTEM_TYPE" : ".*netware.*" > /dev/null; then
   DEBUG_CFLAGS="-g -DDEBUG -sym internal,codeview4"
@


1.26.2.1
log
@SECURITY and bugfix update to mysql-5.0.87

From ian@@, tweaked by Brad... thanks!

ok Brad jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.26 2009/05/29 08:42:06 sthen Exp $
--- configure.in.orig	Fri Oct 16 08:18:59 2009
+++ configure.in	Fri Oct 30 10:27:04 2009
d69 1
a69 1
@@@@ -1753,44 +1717,6 @@@@ case $SYSTEM_TYPE in
d76 1
a76 1
-if test "$GCC" = "yes"
d84 1
a84 8
-  case $SYSTEM_TYPE in                               
-    *solaris*)
-      OPTIMIZE_CFLAGS="-O1"
-      ;;
-    *)
-      OPTIMIZE_CFLAGS="-O"
-      ;;
-  esac
d86 1
a86 1
-if test "$GXX" = "yes"
d92 1
d94 1
a94 10
-  case $SYSTEM_TYPE in
-    *solaris*)
-      DEBUG_CXXFLAGS="-g0"
-      OPTIMIZE_CXXFLAGS="-O1"
-      ;;
-    *)
-      DEBUG_CXXFLAGS="-g"
-      OPTIMIZE_CXXFLAGS="-O"
-      ;;
-  esac
@


1.25
log
@SECURITY (CVE-2008-2079) and bug fix update to 5.0.75.
http://dev.mysql.com/doc/refman/5.0/en/releasenotes-cs-5-0-75.html

from Brad (maintainer).
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.24 2008/08/24 08:40:03 brad Exp $
--- configure.in.orig	Thu Dec 18 12:19:33 2008
+++ configure.in	Mon Dec 22 02:30:13 2008
d50 1
a50 1
@@@@ -913,7 +876,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1681,7 +1645,7 @@@@ then
d69 1
a69 1
@@@@ -1729,29 +1693,6 @@@@ case $SYSTEM_TYPE in
@


1.25.2.1
log
@SECURITY FIX

MFC:

Bug fix update to MySQL 5.0.83. From Brad (maintainer).

ok robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.26 2009/05/29 08:42:06 sthen Exp $
--- configure.in.orig	Thu May  7 17:11:51 2009
+++ configure.in	Thu May 28 17:45:20 2009
d50 1
a50 1
@@@@ -937,7 +900,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1705,7 +1669,7 @@@@ then
d69 1
a69 1
@@@@ -1753,29 +1717,6 @@@@ case $SYSTEM_TYPE in
@


1.24
log
@Upgrade to MySQL 5.0.67.

Tested by sthen@@ on amd64/sparc64.
@
text
@d1 4
a4 9
$OpenBSD: patch-configure_in,v 1.23 2007/08/08 21:33:51 robert Exp $
--- configure.in.orig	Mon Aug  4 08:19:07 2008
+++ configure.in	Fri Aug  8 17:21:01 2008
@@@@ -504,48 +504,11 @@@@ then
 fi
 AC_SUBST(ICHECK)
 
-# Lock for PS
+# Look for PS
d9 1
a9 1
-if $PS p $$ 2> /dev/null | grep `echo $0 | sed s/\-//` > /dev/null
d11 1
a11 1
-  FIND_PROC="$PS p \$\$PID | grep -v grep | grep \$\$MYSQLD > /dev/null"
d13 1
a13 1
-elif $PS -fp $$ 2> /dev/null | grep $0 > /dev/null
d15 1
a15 1
-  FIND_PROC="$PS -p \$\$PID | grep -v grep | grep \$\$MYSQLD > /dev/null"
d17 1
a17 1
-elif $PS -uaxww 2> /dev/null | grep $0 > /dev/null
d19 1
a19 1
-  FIND_PROC="$PS -uaxww | grep -v grep | grep \$\$MYSQLD | grep \" \$\$PID \" > /dev/null"
d21 1
a21 1
-elif $PS -ef 2> /dev/null | grep $0 > /dev/null
d23 1
a23 1
-  FIND_PROC="$PS -ef | grep -v grep | grep \$\$MYSQLD | grep \" \$\$PID \" > /dev/null"
d25 1
a25 1
-elif $PS $$ 2> /dev/null | grep $0 > /dev/null
d27 1
a27 1
-  FIND_PROC="$PS \$\$PID | grep -v grep | grep \$\$MYSQLD > /dev/null"
d31 1
a31 1
-      FIND_PROC="$PS p \$\$PID | grep -v grep | grep \$\$MYSQLD > /dev/null"
d34 1
a34 1
-      FIND_PROC="$PS -uaxww | grep -v grep | grep \$\$MYSQLD | grep \" \$\$PID \" > /dev/null"
d37 1
a37 1
-      FIND_PROC="$PS -e | grep -v grep | grep \$\$MYSQLD | grep \" \$\$PID \" > /dev/null"
d43 1
a43 1
-      AC_MSG_ERROR([Could not find the right ps switches. Which OS is this ?. See the Installation chapter in the Reference Manual.])
d46 1
a46 1
+FIND_PROC="$PS -uaxww | grep -v grep | grep \$\$MYSQLD | grep \" \$\$PID \" > /dev/null"
d50 1
a50 1
@@@@ -907,7 +870,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1675,7 +1639,7 @@@@ then
d69 1
a69 1
@@@@ -1723,29 +1687,6 @@@@ case $SYSTEM_TYPE in
@


1.23
log
@update to version 5.0.45 that includes bugfixes and a couple of security
fixes too;

move to a new way of documenting the usage of mysql,
based on the documentation that can found in postgresql port

the original diff was from Brad; fixes from Stuart Henderson and me;

ok naddy@@, espie@@, pvalchev@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.22 2007/06/07 20:35:35 ckuethe Exp $
--- configure.in.orig	Wed Jul  4 09:06:08 2007
+++ configure.in	Sat Jul 14 16:21:38 2007
@@@@ -489,48 +489,11 @@@@ then
d55 1
a55 1
@@@@ -864,7 +827,8 @@@@ AC_ARG_WITH(libwrap,
d65 1
a65 1
@@@@ -1632,7 +1596,7 @@@@ then
d74 1
a74 1
@@@@ -1680,29 +1644,6 @@@@ case $SYSTEM_TYPE in
@


1.22
log
@Update mysql 5.0.37 to 5.0.41, from brad
ok robert
@
text
@d1 9
a9 4
$OpenBSD: patch-configure_in,v 1.21 2007/04/09 22:43:06 ckuethe Exp $
--- configure.in.orig	Wed May  2 16:39:58 2007
+++ configure.in	Sun May 13 03:33:40 2007
@@@@ -465,44 +465,7 @@@@ AC_SUBST(ICHECK)
d35 1
a35 1
-    *freebsd*)
d55 1
a55 1
@@@@ -835,7 +798,8 @@@@ AC_ARG_WITH(libwrap,
d65 1
a65 1
@@@@ -1603,7 +1567,7 @@@@ then
d74 1
a74 1
@@@@ -1651,29 +1615,6 @@@@ case $SYSTEM_TYPE in
@


1.21
log
@Update to MySQL 5.0.37, from Frank Denis and Brad Smith
ok $MAINTAINER, robert
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.20 2007/01/25 07:41:48 jakob Exp $
--- configure.in.orig	Mon Mar  5 20:21:13 2007
+++ configure.in	Sat Mar 31 19:00:36 2007
d50 1
a50 1
@@@@ -833,7 +796,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1601,7 +1565,7 @@@@ then
d69 1
a69 1
@@@@ -1649,29 +1613,6 @@@@ case $SYSTEM_TYPE in
@


1.20
log
@update to 5.0.33; from maintainer (brad@@)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.19 2006/10/14 05:04:54 brad Exp $
--- configure.in.orig	Tue Jan  9 07:51:08 2007
+++ configure.in	Sun Jan 14 21:29:24 2007
@@@@ -457,44 +457,7 @@@@ AC_SUBST(ICHECK)
d50 1
a50 1
@@@@ -795,7 +758,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1563,7 +1527,7 @@@@ then
d69 1
a69 1
@@@@ -1611,29 +1575,6 @@@@ case $SYSTEM_TYPE in
@


1.19
log
@upgrade to MySQL 5.0.26
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.18 2006/10/03 04:52:03 brad Exp $
--- configure.in.orig	Wed Oct  4 07:24:11 2006
+++ configure.in	Thu Oct 12 05:19:50 2006
@@@@ -453,44 +453,7 @@@@ AC_SUBST(MAKEINDEX)
d50 1
a50 1
@@@@ -791,7 +754,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1555,7 +1519,7 @@@@ then
d69 1
a69 1
@@@@ -1603,29 +1567,6 @@@@ case $SYSTEM_TYPE in
@


1.18
log
@upgrade to MySQL 5.0.24a + a few patches.

http://bugs.mysql.com/22227 ulong fix
http://bugs.mysql.com/21327 OpenSSL build fix
http://bugs.mysql.com/18630 security context issue fix
http://bugs.mysql.com/17647 case-sensitive fs issue fix

CVE-2006-4226, CVE-2006-4227
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.17 2006/05/10 03:21:30 brad Exp $
--- configure.in.orig	Thu Jul 27 14:51:22 2006
+++ configure.in	Mon Aug  7 21:04:20 2006
d9 1
a9 1
-if $PS p $$ 2> /dev/null | grep $0 > /dev/null
d60 1
a60 1
@@@@ -1554,7 +1518,7 @@@@ then
d69 1
a69 1
@@@@ -1602,29 +1566,6 @@@@ case $SYSTEM_TYPE in
@


1.17
log
@upgrade to MySQL 5.0.21
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.16 2006/04/30 20:55:44 brad Exp $
--- configure.in.orig	Wed Apr 26 14:31:03 2006
+++ configure.in	Sun May  7 03:14:55 2006
@@@@ -445,44 +445,7 @@@@ AC_SUBST(MAKEINDEX)
d50 1
a50 1
@@@@ -780,7 +743,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1543,7 +1507,7 @@@@ then
d69 1
a69 1
@@@@ -1591,29 +1555,6 @@@@ case $SYSTEM_TYPE in
@


1.17.2.1
log
@MFC:
upgrade to MySQL 5.0.24a + a few patches.

http://bugs.mysql.com/22227 ulong fix
http://bugs.mysql.com/21327 OpenSSL build fix
http://bugs.mysql.com/18630 security context issue fix
http://bugs.mysql.com/17647 case-sensitive fs issue fix

CVE-2006-4226, CVE-2006-4227
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.18 2006/10/03 04:52:03 brad Exp $
--- configure.in.orig	Thu Jul 27 14:51:22 2006
+++ configure.in	Mon Aug  7 21:04:20 2006
@@@@ -453,44 +453,7 @@@@ AC_SUBST(MAKEINDEX)
d50 1
a50 1
@@@@ -791,7 +754,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1554,7 +1518,7 @@@@ then
d69 1
a69 1
@@@@ -1602,29 +1566,6 @@@@ case $SYSTEM_TYPE in
@


1.16
log
@upgrade to MySQL 5.0.20a
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.15 2006/03/10 23:51:53 brad Exp $
--- configure.in.orig	Fri Mar 31 12:10:39 2006
+++ configure.in	Mon Apr 17 01:26:51 2006
d60 1
a60 1
@@@@ -1538,7 +1502,7 @@@@ then
d69 1
a69 1
@@@@ -1586,29 +1550,6 @@@@ case $SYSTEM_TYPE in
@


1.15
log
@upgrade to MySQL 5.0.19
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.14 2006/01/06 00:13:26 brad Exp $
--- configure.in.orig	Sat Mar  4 15:35:12 2006
+++ configure.in	Tue Mar  7 22:20:55 2006
d69 1
a69 1
@@@@ -1565,29 +1529,6 @@@@ case $SYSTEM_TYPE in
@


1.14
log
@upgrade to MySQL 5.0.18
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.in.orig	Wed Dec 14 18:33:31 2005
+++ configure.in	Sun Dec 18 17:36:11 2005
@@@@ -433,44 +433,7 @@@@ AC_SUBST(MAKEINDEX)
d50 1
a50 1
@@@@ -768,7 +731,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1526,7 +1490,7 @@@@ then
d69 1
a69 1
@@@@ -1553,29 +1517,6 @@@@ case $SYSTEM_TYPE in
@


1.14.2.1
log
@update to mysql 5.0.21

CVE-2006-1518 Buffer overflow in the open_table function in
sql_base.cc in MySQL 5.0.x up to 5.0.20 might allow remote attackers
to execute arbitrary code via crafted COM_TABLE_DUMP packets with
invalid length values.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.14 2006/01/06 00:13:26 brad Exp $
--- configure.in.orig	Wed Apr 26 20:31:03 2006
+++ configure.in	Wed May 10 22:37:28 2006
@@@@ -445,44 +445,7 @@@@ AC_SUBST(MAKEINDEX)
d50 1
a50 1
@@@@ -780,7 +743,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1543,7 +1507,7 @@@@ then
d69 1
a69 1
@@@@ -1591,29 +1555,6 @@@@ case $SYSTEM_TYPE in
@


1.14.2.2
log
@MFC:
upgrade to MySQL 5.0.24a + a few patches.

http://bugs.mysql.com/22227 ulong fix
http://bugs.mysql.com/21327 OpenSSL build fix
http://bugs.mysql.com/18630 security context issue fix
http://bugs.mysql.com/17647 case-sensitive fs issue fix

CVE-2006-4226, CVE-2006-4227
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.18 2006/10/03 04:52:03 brad Exp $
--- configure.in.orig	Thu Jul 27 14:51:22 2006
+++ configure.in	Mon Aug  7 21:04:20 2006
@@@@ -453,44 +453,7 @@@@ AC_SUBST(MAKEINDEX)
d50 1
a50 1
@@@@ -791,7 +754,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1554,7 +1518,7 @@@@ then
d69 1
a69 1
@@@@ -1602,29 +1566,6 @@@@ case $SYSTEM_TYPE in
@


1.13
log
@upgrade to MySQL 4.1.15
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.12 2005/09/04 22:51:24 brad Exp $
--- configure.in.orig	Sun Oct  9 18:46:32 2005
+++ configure.in	Sun Dec 11 22:02:08 2005
@@@@ -503,44 +503,7 @@@@ AC_SUBST(MAKEINDEX)
d11 1
a11 1
-  FIND_PROC="$PS p \$\$PID | grep -v grep | grep mysqld > /dev/null"
d15 1
a15 1
-  FIND_PROC="$PS -p \$\$PID | grep -v grep | grep mysqld > /dev/null"
d19 1
a19 1
-  FIND_PROC="$PS -uaxww | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d23 1
a23 1
-  FIND_PROC="$PS -ef | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d27 1
a27 1
-  FIND_PROC="$PS \$\$PID | grep -v grep | grep mysqld > /dev/null"
d31 1
a31 1
-      FIND_PROC="$PS p \$\$PID | grep -v grep | grep mysqld > /dev/null"
d34 1
a34 1
-      FIND_PROC="$PS -uaxww | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d37 1
a37 1
-      FIND_PROC="$PS -e | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d39 1
a39 1
-    *netware* | *modesto*)
d46 1
a46 1
+FIND_PROC="$PS -uaxww | grep mysqld | grep \" \$\$PID \" > /dev/null"
d50 1
a50 1
@@@@ -847,7 +810,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1624,7 +1588,7 @@@@ then
d69 1
a69 1
@@@@ -1651,29 +1615,6 @@@@ case $SYSTEM_TYPE in
d98 1
a98 1
   DEBUG_CFLAGS="$DEBUG_CFLAGS -DDEBUG -sym internal,codeview4"
@


1.12
log
@upgrade to MySQL 4.1.14
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.in.orig	Fri Jul 15 06:39:35 2005
+++ configure.in	Tue Jul 26 10:32:48 2005
d60 1
a60 1
@@@@ -1663,7 +1627,7 @@@@ then
d69 1
a69 1
@@@@ -1690,29 +1654,6 @@@@ case $SYSTEM_TYPE in
@


1.11
log
@remove HAVE_BROKEN_REALPATH workaround now that OpenBSD's realpath()
is thread-safe.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.10 2005/01/14 01:42:58 brad Exp $
--- configure.in.orig	Fri Mar  4 19:38:15 2005
+++ configure.in	Tue Mar 29 22:03:45 2005
@@@@ -439,41 +439,7 @@@@ AC_SUBST(PERL5)
d11 1
a11 1
-  FIND_PROC="$PS p \$\$PID | grep mysqld > /dev/null"
d15 1
a15 1
-  FIND_PROC="$PS -p \$\$PID | grep mysqld > /dev/null"
d19 1
a19 1
-  FIND_PROC="$PS -uaxww | grep mysqld | grep \" \$\$PID \" > /dev/null"
d23 1
a23 1
-  FIND_PROC="$PS -ef | grep mysqld | grep \" \$\$PID \" > /dev/null"
d27 1
a27 1
-  FIND_PROC="$PS \$\$PID | grep mysqld > /dev/null"
d30 3
d34 1
a34 1
-      FIND_PROC="$PS -uaxww | grep mysqld | grep \" \$\$PID \" > /dev/null"
d37 1
a37 1
-      FIND_PROC="$PS -e | grep mysqld | grep \" \$\$PID \" > /dev/null"
d50 1
a50 1
@@@@ -797,7 +763,8 @@@@ AC_ARG_WITH(libwrap,
d60 1
a60 1
@@@@ -1566,7 +1533,7 @@@@ then
d69 1
a69 1
@@@@ -1593,29 +1560,6 @@@@ case $SYSTEM_TYPE in
@


1.11.2.1
log
@update to mysql 4.0.27

Security fix: A malicious client, using specially crafted invalid login
or COM_TABLE_DUMP packets was able to read uninitialized memory, which
potentially, though unlikely in MySQL, could have led to an information
disclosure. (CVE-2006-1516, CVE-2006-1517)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.11 2005/03/30 03:07:52 brad Exp $
--- configure.in.orig	Sat May  6 20:55:48 2006
+++ configure.in	Sat May 13 08:21:09 2006
@@@@ -444,44 +444,7 @@@@ AC_SUBST(PERL5)
d11 1
a11 1
-  FIND_PROC="$PS p \$\$PID | grep -v grep | grep mysqld > /dev/null"
d15 1
a15 1
-  FIND_PROC="$PS -p \$\$PID | grep -v grep | grep mysqld > /dev/null"
d19 1
a19 1
-  FIND_PROC="$PS -uaxww | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d23 1
a23 1
-  FIND_PROC="$PS -ef | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d27 1
a27 1
-  FIND_PROC="$PS \$\$PID | grep -v grep | grep mysqld > /dev/null"
a29 3
-    *freebsd*)
-      FIND_PROC="$PS p \$\$PID | grep -v grep | grep mysqld > /dev/null"
-      ;;
d31 1
a31 1
-      FIND_PROC="$PS -uaxww | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d34 1
a34 1
-      FIND_PROC="$PS -e | grep -v grep | grep mysqld | grep \" \$\$PID \" > /dev/null"
d47 1
a47 1
@@@@ -805,7 +768,8 @@@@ AC_ARG_WITH(libwrap,
d57 1
a57 1
@@@@ -1582,7 +1546,7 @@@@ then
d66 1
a66 1
@@@@ -1609,29 +1573,6 @@@@ case $SYSTEM_TYPE in
@


1.10
log
@upgrade to MySQL 4.0.23

fixes some crashing issues among many other bug fixes,
seems to have resolved a crashing issue henning@@ was
experiencing on sparc64.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.9 2004/07/18 11:38:23 espie Exp $
--- configure.in.orig	Sat Dec 18 12:25:07 2004
+++ configure.in	Wed Dec 22 10:48:19 2004
d57 1
a57 13
@@@@ -1076,6 +1043,11 @@@@ case $SYSTEM_TYPE in
     CXXFLAGS="$CXXFLAGS -Dunix"
     OVERRIDE_MT_LD_ADD="\$(top_srcdir)/mit-pthreads/obj/libpthread.a"
     ;;
+  *openbsd*)
+    echo "Adding fix for OpenBSD"
+    CFLAGS="$CFLAGS -DHAVE_BROKEN_REALPATH"
+    CXXFLAGS="$CXXFLAGS -DHAVE_BROKEN_REALPATH"
+    ;;
   *bsdi*)
     echo "Adding fix for BSDI"
     CFLAGS="$CFLAGS -D__BSD__ -DHAVE_BROKEN_REALPATH"
@@@@ -1566,7 +1538,7 @@@@ then
d66 1
a66 1
@@@@ -1593,29 +1565,6 @@@@ case $SYSTEM_TYPE in
@


1.9
log
@OpenBSD now is a HAVE_ERRNO_AS_DEFINE platform.
(regen other patches).

Quick fix, since this breaks qt3 build, and thus a lot of ports.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.8 2004/05/21 12:16:21 brad Exp $
--- configure.in.orig	Fri May 14 02:53:30 2004
+++ configure.in	Sun Jul 18 09:30:44 2004
@@@@ -437,41 +437,7 @@@@ AC_SUBST(PERL5)
d13 1
a13 1
-elif $PS -p $$ 2> /dev/null | grep $0 > /dev/null
d47 1
a47 1
@@@@ -788,7 +754,8 @@@@ AC_ARG_WITH(libwrap,
d57 1
a57 1
@@@@ -1056,6 +1023,11 @@@@ case $SYSTEM_TYPE in
d69 1
a69 1
@@@@ -1545,7 +1517,7 @@@@ then
d78 1
a78 1
@@@@ -1572,29 +1544,6 @@@@ case $SYSTEM_TYPE in
@


1.8
log
@upgrade to MySQL 4.0.20
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.7 2004/05/16 09:01:16 brad Exp $
--- configure.in.orig	2004-05-13 20:53:30.000000000 -0400
+++ configure.in	2004-05-18 16:28:25.000000000 -0400
d78 2
a79 1
@@@@ -1573,29 +1545,6 @@@@ AC_SYS_RESTARTABLE_SYSCALLS
d82 1
a82 1
 
d105 1
a105 1
-
a107 1
   DEBUG_CXXFLAGS="$DEBUG_CXXFLAGS -DDEBUG -sym internal,codeview4"
@


1.7
log
@revert back to 4.0.18

for details http://dev.mysql.com/doc/mysql/en/News-4.0.19.html

thanks to Frank Denis for pointing this out to me.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.5 2003/12/30 05:57:30 brad Exp $
--- configure.in.orig	2003-12-14 16:23:49.000000000 -0500
+++ configure.in	2003-12-21 02:01:02.000000000 -0500
@@@@ -432,41 +432,7 @@@@ AC_SUBST(PERL5)
d47 1
a47 1
@@@@ -783,7 +749,8 @@@@ AC_ARG_WITH(libwrap,
d57 1
a57 1
@@@@ -1042,6 +1009,11 @@@@ case $SYSTEM_TYPE in
d69 1
a69 1
@@@@ -1531,7 +1503,7 @@@@ then
d78 1
a78 1
@@@@ -1559,29 +1531,6 @@@@ AC_SYS_RESTARTABLE_SYSCALLS
@


1.6
log
@upgrade to MySQL 4.0.19
@
text
@d2 3
a4 3
--- configure.in.orig	2004-05-03 17:10:40.000000000 -0400
+++ configure.in	2004-05-14 00:02:12.000000000 -0400
@@@@ -437,41 +437,7 @@@@ AC_SUBST(PERL5)
d47 1
a47 1
@@@@ -788,7 +754,8 @@@@ AC_ARG_WITH(libwrap,
d57 1
a57 1
@@@@ -1056,6 +1023,11 @@@@ case $SYSTEM_TYPE in
d69 1
a69 1
@@@@ -1545,7 +1517,7 @@@@ then
d78 1
a78 1
@@@@ -1573,29 +1545,6 @@@@ AC_SYS_RESTARTABLE_SYSCALLS
@


1.5
log
@upgrade to MySQL 4.0.17

LOTS of people have asked for this so here is my work in progress.
test as much as possible.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.4 2003/08/26 15:37:18 brad Exp $
--- configure.in.orig	2003-12-14 16:23:49.000000000 -0500
+++ configure.in	2003-12-21 02:01:02.000000000 -0500
@@@@ -432,41 +432,7 @@@@ AC_SUBST(PERL5)
d47 1
a47 1
@@@@ -783,7 +749,8 @@@@ AC_ARG_WITH(libwrap,
d57 1
a57 1
@@@@ -1042,6 +1009,11 @@@@ case $SYSTEM_TYPE in
d69 1
a69 1
@@@@ -1531,7 +1503,7 @@@@ then
d78 1
a78 1
@@@@ -1559,29 +1531,6 @@@@ AC_SYS_RESTARTABLE_SYSCALLS
@


1.4
log
@upgrade to MySQL 3.23.57 + patches

fixes some older security issues as well as a soon to be disclosed issue.

ok naddy@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.3 2002/12/14 23:56:43 brad Exp $
--- configure.in.orig	2003-06-06 10:39:17.000000000 -0400
+++ configure.in	2003-08-24 17:08:11.000000000 -0400
@@@@ -392,38 +392,7 @@@@ AC_SUBST(PERL5)
d36 3
d47 1
a47 1
@@@@ -740,7 +709,8 @@@@ AC_ARG_WITH(libwrap,
d57 1
a57 1
@@@@ -940,6 +910,10 @@@@ case $SYSTEM_TYPE in
d64 1
d69 1
a69 1
@@@@ -1305,7 +1279,7 @@@@ then
d73 3
a75 2
-    yes---* | *---freebsd* ) LIBS="$my_save_LIBS" ;;
+    yes---* | *---freebsd* | *---openbsd* ) LIBS="$my_save_LIBS" ;;
d78 3
a80 4
 else
@@@@ -1327,29 +1301,6 @@@@ AC_SUBST(LIBDL)
 # System characteristics
 AC_SYS_RESTARTABLE_SYSCALLS
d98 1
a98 1
-  OPTIMIZE_CXXFLAGS="-O3"
d105 3
a107 3
 AC_ARG_WITH(debug,
     [  --without-debug         Build a production version without debugging code],
     [with_debug=$withval],
@


1.3
log
@upgrade to MySQL 3.23.54
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.2 2002/08/22 13:44:17 brad Exp $
--- configure.in.orig	Thu Dec  5 04:37:05 2002
+++ configure.in	Fri Dec 13 22:37:51 2002
d65 1
a65 1
@@@@ -1309,7 +1283,7 @@@@ then
d74 1
a74 2
@@@@ -1330,29 +1304,6 @@@@ AC_SUBST(LIBDL)
 
d77 1
a77 1
-
d100 1
a100 1
 
d103 1
@


1.3.4.1
log
@MFC:
upgrade to MySQL 3.23.57 + patches

fixes some older security issues as well as a soon to be disclosed issue.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.4 2003/08/26 15:37:18 brad Exp $
--- configure.in.orig	Fri Jun  6 10:39:17 2003
+++ configure.in	Tue Sep  2 20:04:58 2003
d65 1
a65 1
@@@@ -1305,7 +1279,7 @@@@ then
d74 1
a74 1
@@@@ -1326,29 +1300,6 @@@@ AC_SUBST(LIBDL)
@


1.3.2.1
log
@upgrade to MySQL 3.23.54

Fixes multiple vulnerabilities.

http://security.e-matters.de/advisories/042002.html
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.3 2002/12/14 23:56:43 brad Exp $
@


1.2
log
@Enable workaround for OpenBSD pthreads and broken realpath().

Problem described in this post...
http://groups.google.com/groups?q=mysql+unknown+database+bsd&hl=en&lr=&ie=UTF-8&
safe=off&selm=a9n0f2%24e4e%241%40FreeBSD.csie.NCTU.edu.tw&rnum=1
--
From: Sam Smith <S@@mSmith.net>
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.1 2002/07/11 15:42:17 brad Exp $
--- configure.in.orig	Thu Feb 14 12:30:15 2002
+++ configure.in	Sat Aug 17 18:46:39 2002
@@@@ -365,38 +365,7 @@@@ AC_SUBST(PERL5)
d44 1
a44 28
@@@@ -583,14 +552,23 @@@@ AC_ARG_WITH(mysqld-user,
     )
 AC_SUBST(MYSQLD_USER)
 
-# compile with strings functions in assembler
+# If we should allow LOAD DATA LOCAL
+AC_MSG_CHECKING(if we should enable LOAD DATA LOCAL by default)
 AC_ARG_ENABLE(local-infile,
     [  --enable-local-infile
-                          If LOAD DATA LOCAL INFILE is enabled by default.],
-    [ ENABLED_LOCAL_INFILE=$enablewal ],
+                          Enable LOAD DATA LOCAL INFILE (default: disabled)],
+    [ ENABLED_LOCAL_INFILE=$enableval ],
     [ ENABLED_LOCAL_INFILE=no ]
     )
 
+if test "$ENABLED_LOCAL_INFILE" = "yes"
+then
+  AC_MSG_RESULT([yes])
+  AC_DEFINE([ENABLED_LOCAL_INFILE])
+else
+  AC_MSG_RESULT([no])
+fi
+
 # Use Paul Eggerts macros from GNU tar to check for large file support.
 MYSQL_SYS_LARGEFILE
 
@@@@ -655,7 +633,8 @@@@ AC_ARG_WITH(libwrap,
d46 1
a46 1
       LIBS="$LIBS -lwrap"
d54 1
a54 1
@@@@ -840,6 +819,10 @@@@ case $SYSTEM_TYPE in
d65 1
a65 1
@@@@ -1205,7 +1188,7 @@@@ then
d74 2
a75 1
@@@@ -1227,28 +1210,6 @@@@ AC_SUBST(LIBDL)
d78 1
a78 1
 
d101 1
a103 1
     [with_debug=$withval],
@


1.2.2.1
log
@upgrade to MySQL 3.23.54

Fixes multiple vulnerabilities.

http://security.e-matters.de/advisories/042002.html
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_in,v 1.3 2002/12/14 23:56:43 brad Exp $
--- configure.in.orig	Thu Dec  5 04:37:05 2002
+++ configure.in	Fri Dec 13 22:37:51 2002
@@@@ -392,38 +392,7 @@@@ AC_SUBST(PERL5)
d44 28
a71 1
@@@@ -740,7 +709,8 @@@@ AC_ARG_WITH(libwrap,
d73 1
a73 1
       LIBS="-lwrap $LIBS"
d81 1
a81 1
@@@@ -940,6 +910,10 @@@@ case $SYSTEM_TYPE in
d92 1
a92 1
@@@@ -1309,7 +1283,7 @@@@ then
d101 1
a101 2
@@@@ -1330,29 +1304,6 @@@@ AC_SUBST(LIBDL)
 
d104 1
a104 1
-
a126 1
 
d129 1
@


1.2.2.2
log
@MFC:
upgrade to MySQL 3.23.57 + patches

fixes some older security issues as well as a soon to be disclosed issue.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure_in,v 1.4 2003/08/26 15:37:18 brad Exp $
--- configure.in.orig	2003-06-06 10:39:17.000000000 -0400
+++ configure.in	2003-08-24 17:08:11.000000000 -0400
d65 1
a65 1
@@@@ -1305,7 +1279,7 @@@@ then
d74 2
a75 1
@@@@ -1327,29 +1301,6 @@@@ AC_SUBST(LIBDL)
d78 1
a78 1
 
d101 1
a101 1
-
a103 1
     [with_debug=$withval],
@


1.1
log
@bring in a fix from newer MySQL which allows the autoconf option
--enable-local-infile to work as expected. before it didn't do anything.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ configure.in	Thu Jul 11 10:43:19 2002
d81 12
a92 1
@@@@ -1205,7 +1184,7 @@@@ then
d101 1
a101 1
@@@@ -1227,28 +1206,6 @@@@ AC_SUBST(LIBDL)
@

