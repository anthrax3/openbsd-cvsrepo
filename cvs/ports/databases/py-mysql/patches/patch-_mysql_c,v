head	1.4;
access;
symbols
	OPENBSD_6_1:1.4.0.10
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.8
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.4
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.16
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.14
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.12
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.10
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.8
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.6
	OPENBSD_5_0:1.3.0.4
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.20
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.18
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.16
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.14
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.12
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.10
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.8
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2014.09.03.13.43.39;	author benoit;	state Exp;
branches;
next	1.3;
commitid	JYMyHvQMZDVbLM0u;

1.3
date	2010.11.14.08.57.17;	author benoit;	state Exp;
branches;
next	1.2;

1.2
date	2005.09.12.04.29.35;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2005.09.08.03.45.17;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update py-mysql to 1.2.5, from frantisek holop, thanks !
@
text
@$OpenBSD$
--- _mysql.c.orig	Thu Jan  2 13:52:50 2014
+++ _mysql.c	Wed Sep  3 13:57:17 2014
@@@@ -2079,7 +2079,7 @@@@
 	check_connection(self);
 	Py_BEGIN_ALLOW_THREADS
 	r = mysql_shutdown(&(self->connection)
-#if MYSQL_VERSION_ID >= 40103
+#if (MYSQL_VERSION_ID >= 40103 && MYSQL_VERSION_ID != 50000)
 		, SHUTDOWN_DEFAULT
 #endif
 		);
@


1.3
log
@- update py-mysql to 1.2.3
- regen patches, PLIST
- take maintainership
- use MODPY_EGG_VERSION
@
text
@d1 12
a12 12
$OpenBSD: patch-_mysql_c,v 1.2 2005/09/12 04:29:35 brad Exp $
--- _mysql.c.orig	Thu Jun 17 09:21:56 2010
+++ _mysql.c	Sun Nov 14 09:30:49 2010
@@@@ -1878,7 +1878,7 @@@@ _mysql_ConnectionObject_shutdown(
 	check_connection(self);
 	Py_BEGIN_ALLOW_THREADS
 	r = mysql_shutdown(&(self->connection)
-#if MYSQL_VERSION_ID >= 40103
+#if (MYSQL_VERSION_ID >= 40103 && MYSQL_VERSION_ID != 50000)
 		, SHUTDOWN_DEFAULT
 #endif
 		);
@


1.2
log
@upgrade to py-mysql 1.2.0
@
text
@d1 4
a4 4
$OpenBSD: patch-_mysql_c,v 1.1 2005/09/08 03:45:17 pvalchev Exp $
--- _mysql.c.orig	Mon Feb  7 20:00:54 2005
+++ _mysql.c	Mon Sep 12 00:10:38 2005
@@@@ -1747,7 +1747,7 @@@@ _mysql_ConnectionObject_shutdown(
@


1.1
log
@fix another busted mysql port
@
text
@d1 4
a4 5
$OpenBSD$
--- _mysql.c.orig	Wed Jul 31 23:01:30 2002
+++ _mysql.c	Wed Sep  7 20:12:48 2005
@@@@ -1353,7 +1353,11 @@@@ _mysql_ConnectionObject_shutdown(
 	if (!PyArg_NoArgs(args)) return NULL;
d7 2
d10 3
a12 7
+	r = mysql_shutdown(&(self->connection), SHUTDOWN_DEFAULT);
+#else
 	r = mysql_shutdown(&(self->connection));
+#endif
 	Py_END_ALLOW_THREADS
 	if (r) return _mysql_Exception(self);
 	Py_INCREF(Py_None);
@

