head	1.24;
access;
symbols
	OPENBSD_6_1:1.24.0.2
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.21.0.2
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.15.0.2
	OPENBSD_5_9_BASE:1.15
	OPENBSD_5_8:1.14.0.4
	OPENBSD_5_8_BASE:1.14
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.6
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.4
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.5.0.6
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.6
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.4
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.2.0.12
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.10
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.8
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	jasper_20070728:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2017.01.07.12.35.28;	author jca;	state Exp;
branches;
next	1.23;
commitid	fOQzYWSDY6CYC8fB;

1.23
date	2016.09.03.12.09.30;	author jca;	state Exp;
branches;
next	1.22;
commitid	ZlE0GA21zDGNXpiF;

1.22
date	2016.08.26.20.52.57;	author jca;	state Exp;
branches;
next	1.21;
commitid	Txx82fAMvjMihvJR;

1.21
date	2016.05.08.09.11.35;	author jca;	state Exp;
branches;
next	1.20;
commitid	OZx4TwloBEZ9THbu;

1.20
date	2016.04.25.08.13.41;	author jca;	state Exp;
branches;
next	1.19;
commitid	FeZMIFPLhdgeUDNu;

1.19
date	2016.04.22.11.43.42;	author jca;	state Exp;
branches;
next	1.18;
commitid	FlEahVSTZ0oZFvQ9;

1.18
date	2016.04.12.17.38.15;	author jca;	state Exp;
branches;
next	1.17;
commitid	6ZK6O1FExjUud0ne;

1.17
date	2016.04.05.16.34.36;	author jca;	state Exp;
branches;
next	1.16;
commitid	AiuJC8DPGBNtPdIC;

1.16
date	2016.03.20.16.12.23;	author naddy;	state Exp;
branches;
next	1.15;
commitid	guiZq8cnNbVyyHzx;

1.15
date	2015.08.12.11.24.05;	author jca;	state Exp;
branches
	1.15.2.1;
next	1.14;
commitid	upHrtx1ZD5dGcdfo;

1.14
date	2015.07.20.18.36.15;	author sthen;	state Exp;
branches;
next	1.13;
commitid	76IAZLq34YzNxOPR;

1.13
date	2015.07.18.02.34.57;	author jca;	state Exp;
branches;
next	1.12;
commitid	5MJnLEMGuZqRm758;

1.12
date	2015.07.18.02.22.33;	author jca;	state Exp;
branches;
next	1.11;
commitid	E6FVWYLXT3MSTT51;

1.11
date	2015.07.18.02.11.13;	author jca;	state Exp;
branches;
next	1.10;
commitid	E7w1bY9RQnMfubty;

1.10
date	2015.03.29.12.28.21;	author ajacoutot;	state Exp;
branches;
next	1.9;
commitid	WpAKL4qORhAn3O2a;

1.9
date	2015.03.16.18.07.38;	author naddy;	state Exp;
branches;
next	1.8;
commitid	IJdm3Zowcdkcxp5X;

1.8
date	2014.10.23.07.21.06;	author jasper;	state Exp;
branches;
next	1.7;
commitid	WdbyBL8MFscTnnP5;

1.7
date	2013.03.21.08.45.14;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.11.02.52.09;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2011.09.26.09.30.08;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2010.04.26.17.22.06;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2010.03.22.09.38.36;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2007.07.30.15.36.34;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.28.21.37.26;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.07.28.21.37.26;	author jasper;	state Exp;
branches;
next	;

1.15.2.1
date	2016.04.17.17.00.38;	author jca;	state Exp;
branches;
next	;
commitid	HvySSV2T8tBcq2Ag;


desc
@@


1.24
log
@Update to tdb-1.3.12
@
text
@# $OpenBSD: Makefile,v 1.23 2016/09/03 12:09:30 jca Exp $

COMMENT=	trivial database library

# Keep in sync with the version bundled in net/samba
DISTNAME=	tdb-1.3.12

SHARED_LIBS+=	tdb	4.2

CATEGORIES=	databases

HOMEPAGE=	https://tdb.samba.org/

MAINTAINER=	Jeremie Courreges-Anglas <jca@@wxcvbn.org>

# LGPLv3+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c m pthread util ${MODPY_WANTLIB}

MASTER_SITES=	https://download.samba.org/pub/tdb/

MODULES=	lang/python
MODPY_RUNDEP=	No
MODPY_ADJ_FILES= buildtools/bin/waf

BUILD_DEPENDS=	textproc/docbook-xsl \
		textproc/libxslt

LIB_DEPENDS=	${MODPY_LIB_DEPENDS}

WAF_ARGS=	-v -j ${MAKE_JOBS}
MAKE_FLAGS=	WAF_ARGS="${WAF_ARGS}"
.for _l _v in ${SHARED_LIBS}
MAKE_ENV +=	LIB${_l:S/-/_/g}_VERSION=${_v}
.endfor
TEST_ENV=	LD_LIBRARY_PATH="${WRKSRC}/bin/default"

CONFIGURE_STYLE= simple
CONFIGURE_ARGS= --mandir="${PREFIX}/man" \
		--disable-rpath

.include <bsd.port.mk>
@


1.23
log
@Update to tdb-1.3.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/08/26 20:52:57 jca Exp $
d6 1
a6 1
DISTNAME=	tdb-1.3.11
@


1.22
log
@Maintenance update to tdb-1.3.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/05/08 09:11:35 jca Exp $
d6 1
a6 1
DISTNAME=	tdb-1.3.10
d8 1
a8 1
SHARED_LIBS+=	tdb	4.1
@


1.21
log
@Switch MASTER_SITES to https://download.samba.org/pub/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/04/25 08:13:41 jca Exp $
d6 1
a6 1
DISTNAME=	tdb-1.3.9
@


1.20
log
@Update to tdb-1.3.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/04/22 11:43:42 jca Exp $
d21 1
a21 1
MASTER_SITES=	http://samba.org/ftp/tdb/
@


1.19
log
@Update to tdb-1.3.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/04/12 17:38:15 jca Exp $
d6 1
a6 1
DISTNAME=	tdb-1.3.8
@


1.18
log
@Update to tdb-1.3.7, needed for the upcoming samba release.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/04/05 16:34:36 jca Exp $
d5 2
a6 2
# Keep in sync with the version bundled in net/samba4
DISTNAME=	tdb-1.3.7
d35 1
a35 1
MAKE_ENV +=             LIB${_l:S/-/_/g}_VERSION=${_v}
d37 1
@


1.17
log
@Fix the version in tdb.pc; requested by Volker Lendecke.

Use upstream tarball version, not the ports shared lib version.  Newer
samba releases check for a minimum version of libtdb, this check wrongly
succeeds with tdb from ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2016/03/20 16:12:23 naddy Exp $
d6 1
a6 2
DISTNAME=	tdb-1.2.12
REVISION=	2
d8 1
a8 1
SHARED_LIBS+=	tdb	4.0
d39 2
a40 1
CONFIGURE_ARGS= --mandir="${PREFIX}/man"
@


1.16
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/08/12 11:24:05 jca Exp $
d7 1
a7 1
REVISION=	1
@


1.15
log
@Add a comment, in case someone wonders why we're not using the latest version.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.14 2015/07/20 18:36:15 sthen Exp $

SHARED_ONLY=	Yes
@


1.15.2.1
log
@Update to tdb-1.3.7, needed to backport recent samba updates.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/08/12 11:24:05 jca Exp $
d8 2
a9 1
DISTNAME=	tdb-1.3.7
d11 1
a11 1
SHARED_LIBS+=	tdb	4.1
d42 1
a42 2
CONFIGURE_ARGS= --mandir="${PREFIX}/man" \
		--disable-rpath
@


1.14
log
@bump, net/samba4,-tdb had the same version/REVISION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/07/18 02:34:57 jca Exp $
d7 1
@


1.13
log
@docbook needed to generate manpages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/07/18 02:22:33 jca Exp $
d8 1
a8 1
REVISION=	0
@


1.12
log
@Incorrect entries in PLIST (now provided by the python dep.)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2015/07/18 02:11:13 jca Exp $
d28 3
@


1.11
log
@Update to tdb-1.2.12

Bite the bullet and switch to an upstream version that uses waf*.  The
plan is to use databases/tdb and devel/libtalloc in the samba4 port, and
thus to keep those ports in sync with whatever bundled version comes
with the samba4 tarball.

* trying to make sense of the waf patches is highly discouraged

While here:
- reorder the Makefile
- update the license marker
- take maintainership (discussed with nicm@@, former MAINTAINER)

This is a SHARED_ONLY port, and a python wrapper is now provided.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2015/03/29 12:28:21 ajacoutot Exp $
d8 1
@


1.10
log
@Unbreak header by defining _PUBLIC_; newer versions just removed it.
Bypassing maintainer because I need this in now to move further on GNOME
stuffs; nicm@@ you can come back and hit me in the face if I broke anything.

ok sthen@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.9 2015/03/16 18:07:38 naddy Exp $
d7 4
a10 2
DISTNAME=	tdb-1.2.7
REVISION=	2
a11 1
SHARED_LIBS+=	tdb	3.0
d13 1
a13 1
MAINTAINER=	Nicholas Marriott <nicm@@openbsd.org>
d15 3
a17 1
# GPLv2
d20 1
a20 1
WANTLIB=	c
a21 1
HOMEPAGE=	http://tdb.samba.org/
d24 14
a37 11
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS= --disable-python
USE_GMAKE=	Yes
MAKE_FLAGS=	TDB_SOLIB=libtdb.so.${LIBtdb_VERSION} \
		TDB_SONAME=libtdb.so.${LIBtdb_VERSION}

INSTALL_TARGET=	installdirs installbin installheaders installlibs

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/tdb
	${INSTALL_DATA} ${WRKSRC}/docs/* ${PREFIX}/share/doc/tdb/
@


1.9
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/10/23 07:21:06 jasper Exp $
d6 1
a6 1
REVISION=	1
@


1.8
log
@unify; ok nicm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/21 08:45:14 ajacoutot Exp $
d6 1
a6 1
REVISION=	0
@


1.7
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/11 02:52:09 espie Exp $
d6 1
d10 1
a10 1
MAINTAINER=	Nicholas Marriott <nicm@@users.sourceforge.net>
@


1.6
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/09/26 09:30:08 sthen Exp $
a21 1
USE_LIBTOOL=	Yes
@


1.5
log
@update to tdb 1.27, from Ian McWilliam / Stefan Rinkes, needed for samba update
ok nicm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/04/26 17:22:06 sthen Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.4
log
@- update tdb to samba's standalone release rather than the sourceforge version
- switch back to standard file locations
- adjust fdm to match

looks fine to nicm@@, needed for forthcoming samba update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/03/22 09:38:36 sthen Exp $
d5 1
a5 1
DISTNAME=	tdb-1.2.1
d7 1
a7 1
SHARED_LIBS+=	tdb	2.0
d9 1
a9 1
MAINTAINER=    	Nicholas Marriott <nicm@@users.sourceforge.net>
@


1.3
log
@Move the tdb.h header to a subdirectory, avoiding a conflict with
forthcoming samba update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/07/30 15:36:34 steven Exp $
d5 1
a5 2
DISTNAME=	tdb-1.0.6
PKGNAME=	${DISTNAME}p1
d7 1
a7 1
SHARED_LIBS+=	tdb	1.0
d17 8
a24 4
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=tdb/}
CONFIGURE_STYLE=autoconf
CONFIGURE_ARGS=	--includedir=${TRUEPREFIX}/include/tdb
AUTOCONF_VERSION=2.13
d26 8
@


1.2
log
@specify autoconf version and especially USE_LIBTOOL!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/07/28 21:37:26 jasper Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d20 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d20 2
@


1.1.1.1
log
@import tdb 1.0.6

TDB is a Trivial Database. In concept, it is very much like GDBM, and
BSD's DB except that it allows multiple simultaneous writers and uses
locking internally to keep writers from trampling on each other. TDB is
also extremely small.

from Nicholas Marriott (MAINTAINER)
@
text
@@
