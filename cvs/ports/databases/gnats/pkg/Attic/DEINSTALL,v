head	1.7;
access;
symbols
	OPENBSD_3_6:1.6.0.2
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.4.0.4
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.1.1.1.0.10
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.8
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.6
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.4
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.2
	OPENBSD_2_9_BASE:1.1.1.1
	dugsong_2000-Jan-12:1.1.1.1
	dugsong:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2004.09.24.08.56.49;	author espie;	state dead;
branches;
next	1.6;

1.6
date	2004.08.08.16.24.28;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2004.04.18.08.50.33;	author xsa;	state Exp;
branches;
next	1.4;

1.4
date	2003.09.01.05.13.17;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.22.10.05.28;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.02.18.17.02;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2001.01.12.17.14.51;	author dugsong;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.01.12.17.14.51;	author dugsong;	state Exp;
branches
	1.1.1.1.8.1
	1.1.1.1.10.1;
next	;

1.1.1.1.8.1
date	2003.08.26.01.03.22;	author brad;	state Exp;
branches;
next	1.1.1.1.8.2;

1.1.1.1.8.2
date	2003.09.02.23.11.46;	author brad;	state Exp;
branches;
next	;

1.1.1.1.10.1
date	2003.08.26.00.33.35;	author brad;	state Exp;
branches;
next	1.1.1.1.10.2;

1.1.1.1.10.2
date	2003.09.02.23.05.02;	author brad;	state Exp;
branches;
next	;


desc
@@


1.7
log
@kill INSTALL/DEINSTALL
@
text
@#!/bin/sh
# $OpenBSD: DEINSTALL,v 1.6 2004/08/08 16:24:28 espie Exp $
#
# De-installation setup of gnats

PATH=/bin:/usr/bin:/sbin:/usr/sbin
PREFIX=${PKG_PREFIX:-/usr/local}

do_notice()
{
    echo ""
    echo "+---------------"
    echo "| To completely deinstall the $1 package you need to perform"
    echo "| these steps as root:"
    echo "|"
    echo "|       crontab -u _gnats -r"
    echo "|       userdel _gnats"
    echo "|"
    echo "| Do not do this if you plan on re-installing $1"
    echo "| at some future time."
    echo "+---------------"
    echo ""
}

# verify proper execution
#
if [ $# -ne 2 ]; then
    echo "usage: $0 distname { DEINSTALL }" >&2
    exit 1
fi

# Verify/process the command
#
case $2 in
    DEINSTALL)
	if [ ${PKG_DELETE_EXTRA} != Yes ]; then
		do_notice "$1"
	fi
	;;
    *)
	echo "Usage: `basename $0` distname DEINSTALL" >&2
	exit 1
	;;
esac

exit 0
@


1.6
log
@adjust scripts for @@sample, update to new plist.
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.5 2004/04/18 08:50:33 xsa Exp $
@


1.5
log
@
@@extra; ok sturm@@.
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.4 2003/09/01 05:13:17 fgsch Exp $
a7 1
CONFIG_FILE=${SYSCONFDIR}/gnats-db.conf
a17 1
    echo "|       rm -f ${CONFIG_FILE}"
d36 1
a36 1
	if [ ${PKG_DELETE_EXTRA} != Yes -a -f ${CONFIG_FILE} ]; then
@


1.4
log
@- install gnats.pm (required by gnatsweb).
- don't silently de/install gnatsweb from/to /var/www/cgi-bin/.
- bump package version.
brad@@ and naddy@@ ok.
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.3 2003/06/22 10:05:28 sturm Exp $
d8 1
d10 1
a10 15
# Function: remove gnats user account.
#
do_accts()
{
    echo ""
    echo "+---------------"
    echo "| Delete the '_gnats' user account for a full de-installation."
    echo "| To do this: execute 'user del _gnats' as root."
    echo "| You can also remove any crontab entries for '_gnats' by"
    echo "| executing 'crontab -u _gnats -r' as root."
    echo "+---------------"
    echo ""
}

do_configs()
d14 9
a22 3
    echo "| The existing ${SYSCONFDIR}/gnats-db.conf configuration file"
    echo "| has NOT been deleted. To do this: execute"
    echo "| 'rm ${SYSCONFDIR}/gnats-db.conf' as root."
d38 3
a40 2
	do_accts
	do_configs
@


1.3
log
@new user/group naming schema

bumped PKGNAME except for xcept
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.2 2003/05/02 18:17:02 sturm Exp $
a46 1
	rm -f /var/www/cgi-bin/gnatsweb
@


1.2
log
@- don't hardcode /etc, use SYSCONFDIR
- remove Jolan Luff as MAINTAINER
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.1.1.1 2001/01/12 17:14:51 dugsong Exp $
d15 4
a18 4
    echo "| Delete the 'gnats' user account for a full de-installation."
    echo "| To do this: execute 'user del gnats' as root."
    echo "| You can also remove any crontab entries for 'gnats' by"
    echo "| executing 'crontab -u gnats -r' as root."
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.1 2000/09/25 21:02:33 jakob Exp $
d27 1
a27 1
    echo "| The existing /etc/gnats-db.conf configuration file"
d29 1
a29 1
    echo "| 'rm /etc/gnats-db.conf' as root."
@


1.1.1.1
log
@GNATS, the GNU Problem Report Management System. FLAVOR=www adds the gnatsweb CGI interface.
@
text
@@


1.1.1.1.8.1
log
@MFC:
Fix some security issues with gnats.

Some additional fixes from millert@@
sprintf -> snprintf
str{cat,cpy} -> strl{cat,cpy}

http://marc.theaimsgroup.com/?l=bugtraq&m=105638591907836&w=2
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.1.1.1 2001/01/12 17:14:51 dugsong Exp $
d27 1
a27 1
    echo "| The existing ${SYSCONFDIR}/gnats-db.conf configuration file"
d29 1
a29 1
    echo "| 'rm ${SYSCONFDIR}/gnats-db.conf' as root."
@


1.1.1.1.8.2
log
@MFC:
Some fixes from fgsch@@
- correct instructions
- install gnats.pm (required by gnatsweb).
- don't silently de/install gnatsweb from/to /var/www/cgi-bin/.
- bump package version.
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.1.1.1.8.1 2003/08/26 01:03:22 brad Exp $
d47 1
@


1.1.1.1.10.1
log
@MFC:
Fix some security issues with gnats.

Some additional fixes from millert@@
sprintf -> snprintf
str{cat,cpy} -> strl{cat,cpy}

http://marc.theaimsgroup.com/?l=bugtraq&m=105638591907836&w=2
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.1.1.1 2001/01/12 17:14:51 dugsong Exp $
d27 1
a27 1
    echo "| The existing ${SYSCONFDIR}/gnats-db.conf configuration file"
d29 1
a29 1
    echo "| 'rm ${SYSCONFDIR}/gnats-db.conf' as root."
@


1.1.1.1.10.2
log
@MFC:
Some fixes from fgsch@@
- correct instructions
- install gnats.pm (required by gnatsweb).
- don't silently de/install gnatsweb from/to /var/www/cgi-bin/.
- bump package version.
@
text
@d2 1
a2 1
# $OpenBSD: DEINSTALL,v 1.1.1.1.10.1 2003/08/26 00:33:35 brad Exp $
d47 1
@


