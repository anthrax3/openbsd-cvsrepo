head	1.15;
access;
symbols
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.9.0.2
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.15
date	2012.11.29.05.32.04;	author espie;	state dead;
branches;
next	1.14;

1.14
date	2012.03.27.18.34.04;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2012.01.07.13.47.52;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2011.12.21.00.38.11;	author nigel;	state Exp;
branches;
next	1.11;

1.11
date	2011.03.14.14.39.51;	author landry;	state Exp;
branches;
next	1.10;

1.10
date	2011.01.09.19.11.34;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2010.04.02.20.07.11;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.12.19.23.08.48;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.22.21.23.43;	author martynas;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.05.00.02.54;	author martynas;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.27.23.20.39;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2008.10.27.17.14.18;	author simon;	state Exp;
branches;
next	1.3;

1.3
date	2008.07.23.17.31.17;	author martynas;	state Exp;
branches;
next	1.2;

1.2
date	2007.04.14.19.34.03;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.02.02.14.45.53;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.15
log
@update to 3.7.14.1 as well, ditch outdated -pthread patch
@
text
@$OpenBSD: patch-configure,v 1.14 2012/03/27 18:34:04 sthen Exp $

XXX careful! this must apply to pthread and not any other lib.

if updating, to include additional context to help avoid problems later,
use a hand-rolled patch or 'make update-patches DIFF_ARGS=-u6'.


--- configure.orig	Tue Mar 20 14:20:13 2012
+++ configure	Mon Mar 26 11:16:23 2012
@@@@ -12494,14 +12494,14 @@@@ return pthread_create ();
 }
 _ACEOF
 for ac_lib in '' pthread; do
   if test -z "$ac_lib"; then
     ac_res="none required"
   else
-    ac_res=-l$ac_lib
-    LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
+    ac_res=-$ac_lib
+    LIBS="-$ac_lib  $ac_func_search_save_LIBS"
   fi
   rm -f conftest.$ac_objext conftest$ac_exeext
 if { (ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
@


1.14
log
@update to SQLite 3.7.11 - requested by / OK landry@@
Thanks to Landry and Jan Stary for testing.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.13 2012/01/07 13:47:52 sthen Exp $
@


1.13
log
@Use -pthread not -lpthread. Library major bump for safety.

Inadvertently broken in last commit; the patch to the configure script
is fiddly and easily broken, so use extra lines of context for this patch
and add a warning comment.

Problem reported by James Turner, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.12 2011/12/21 00:38:11 nigel Exp $
d9 3
a11 3
--- configure.orig	Tue Nov  1 12:31:18 2011
+++ configure	Fri Jan  6 22:20:01 2012
@@@@ -10540,14 +10540,14 @@@@ return pthread_create ();
d23 5
a27 5
   if ac_fn_c_try_link "$LINENO"; then :
   ac_cv_search_pthread_create=$ac_res
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext
@


1.12
log
@Update to v3.7.9 required for firefox, chrome
regression tests run on amd64,i386 and sparc64 by sthen@@ thanks.

Ok sthen@@
@
text
@d1 8
a8 1
$OpenBSD: patch-configure,v 1.11 2011/03/14 14:39:51 landry Exp $
d10 5
a14 2
+++ configure	Sun Dec 18 11:43:24 2011
@@@@ -11231,8 +11231,8 @@@@ for ac_lib in '' dl; do
d24 4
a27 1
   ac_cv_search_dlopen=$ac_res
@


1.11
log
@Update to sqlite 3.7.5, enable UNLOCK_NOTIFY api (needed by firefox 4).

Tested by phessler@@ on loongson/sparc, jasper@@ on arm, myself on
amd64/sparc64/macppc, and went through a pair of amd64 bulk builds
without issues.
ok sthen@@ dcoppa@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.10 2011/01/09 19:11:34 landry Exp $
--- configure.orig	Thu Jan 27 19:40:56 2011
+++ configure	Thu Mar 10 17:55:23 2011
@@@@ -12494,8 +12494,8 @@@@ for ac_lib in '' pthread; do
d13 2
a14 2
   rm -f conftest.$ac_objext conftest$ac_exeext
 if { (ac_try="$ac_link"
@


1.10
log
@Major update to sqlite 3.7.4. Based on a diff from stu@@ for 3.7.3,
enables FTS3, SOUNDEX and RTREE options, remove the now non-relevant
'thread override lock' thing. Simplify Makefile a bit.
Tested by sthen@@ on arm, jasper@@ on mips64el, sebastia@@ on the vax
(yay!) and myself on sparc64/ppc/amd64.
ok sebastia@@ jasper@@ espie@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2010/04/02 20:07:11 sthen Exp $
--- configure.orig	Mon Nov 22 07:54:11 2010
+++ configure	Mon Nov 22 07:55:56 2010
@@@@ -12498,8 +12498,8 @@@@ for ac_lib in '' pthread; do
@


1.9
log
@Update to 3.6.23, much of this was done by Florent Tribouilloy and
espie@@ who adjusted things so the build doesn't depend on Tcl (which
was added as a build dependency in 3.6.17).
@
text
@d1 3
a3 12
$OpenBSD: patch-configure,v 1.8 2009/12/19 23:08:48 sthen Exp $
--- configure.orig	Mon Apr 13 12:09:25 2009
+++ configure	Thu Apr 16 23:11:23 2009
@@@@ -12259,7 +12259,7 @@@@ USE_AMALGAMATION=1
 # if not, then we fall back to plain tclsh.
 # TODO: try other versions before falling back?
 #
-for ac_prog in tclsh8.4 tclsh
+for ac_prog in tclsh8.5 tclsh8.4 tclsh
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
a14 9
@@@@ -12920,7 +12920,7 @@@@ $as_echo "file not found" >&6; }
 
     eval "TCL_STUB_LIB_FILE=\"${TCL_STUB_LIB_FILE}\""
     eval "TCL_STUB_LIB_FLAG=\"${TCL_STUB_LIB_FLAG}\""
-    eval "TCL_STUB_LIB_SPEC=\"${TCL_STUB_LIB_SPEC}\""
+    eval "TCL_STUB_LIB_SPEC=\"-L${TCL_PACKAGE_PATH} ${TCL_STUB_LIB_FLAG}_pic\""
 
 
 
@


1.8
log
@Update to 3.6.16.1; a simple but important fix (and needed to update
Firefox). Mainline sqlite has moved beyond this but involves some changes
to the build infrastructure which need to be looked at separately.

Since the distfile is no longer available upstream, this is provided
as a patch to the 3.6.16 distfile and is taken from upstream's SCM.

Requested by naddy@@.
@
text
@d1 3
a3 14
$OpenBSD: patch-configure,v 1.7 2009/04/22 21:23:43 martynas Exp $
--- configure.orig	Thu Jun 25 12:45:57 2009
+++ configure	Fri Dec 18 22:16:44 2009
@@@@ -743,8 +743,8 @@@@ SHELL=${CONFIG_SHELL-/bin/sh}
 # Identity of this package.
 PACKAGE_NAME='sqlite'
 PACKAGE_TARNAME='sqlite'
-PACKAGE_VERSION='3.6.16'
-PACKAGE_STRING='sqlite 3.6.16'
+PACKAGE_VERSION='3.6.16.1'
+PACKAGE_STRING='sqlite 3.6.16.1'
 PACKAGE_BUGREPORT=''
 
 # Factoring default headers for most tests.
@


1.7
log
@sqlite3-3.6.13.  full bulk build done by jasper@@.  ok jasper@@, simon@@
@
text
@d1 14
a14 3
$OpenBSD: patch-configure,v 1.6 2009/04/05 00:02:54 martynas Exp $
--- configure.orig	Mon Apr 13 12:09:25 2009
+++ configure	Thu Apr 16 23:11:23 2009
@


1.6
log
@update to sqlite3-3.6.11.  fixes null ptr deref in sqlite3OsTruncate
addColumn;  which broke py stuff
noticed with fgs@@ while working on the py stuff
much thanks to bernd@@;  for doing a bulk build with it
ok fgs@@, bernd@@, simon@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2008/10/27 23:20:39 steven Exp $
--- configure.orig	Sun Feb 15 15:07:08 2009
+++ configure	Sun Mar 22 13:27:07 2009
@@@@ -12216,7 +12216,7 @@@@ USE_AMALGAMATION=1
d13 1
a13 1
@@@@ -12455,8 +12455,8 @@@@ for ac_lib in '' pthread; do
d24 1
a24 1
@@@@ -12877,7 +12877,7 @@@@ $as_echo "file not found" >&6; }
@


1.5
log
@switch to use tcl 8.5.

inputs from and looks good to bernd and simon
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.4 2008/10/27 17:14:18 simon Exp $
--- configure.orig	Tue Oct 14 20:07:39 2008
+++ configure	Mon Oct 27 18:30:05 2008
@@@@ -10793,7 +10793,7 @@@@ USE_AMALGAMATION=1
d13 12
a24 10
@@@@ -11089,7 +11089,7 @@@@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_search_pthread_create="-l$ac_lib"
+  ac_cv_search_pthread_create="-$ac_lib"
 break
 else
   echo "$as_me: failed program was:" >&5
@@@@ -11432,7 +11432,7 @@@@ echo "${ECHO_T}file not found" >&6
@


1.4
log
@update to version 3.6.4, see http://www.sqlite.org/35to36.html and
http://www.sqlite.org/changes.html for the details

tcl adjustments and bulk build testing by bernd@@, thanks!

ok bernd@@, steven@@, martynas@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.3 2008/07/23 17:31:17 martynas Exp $
d3 10
a12 1
+++ configure	Sat Oct 25 19:39:50 2008
@


1.3
log
@- update to sqlite-3.5.9
- merge espie's patches
- fix apps such as p5-DBD-SQLite, by adding weak pthread functions.
also include some bug fixes from kurt@@.  the work has been done by
kurt@@, and espie@@.  thanks!
ok kurt@@, espie@@, bernd@@
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2007/04/14 19:34:03 steven Exp $
--- configure.orig	Mon May 12 20:57:21 2008
+++ configure	Mon Jul 21 11:26:29 2008
@@@@ -11088,7 +11088,7 @@@@ if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
d13 1
a13 1
@@@@ -11433,7 +11433,7 @@@@ echo "${ECHO_T}file not found" >&6
@


1.2
log
@update to sqlite 3.3.15

doesn't look bad espie@@
@
text
@d1 13
a13 4
$OpenBSD: patch-configure,v 1.1 2007/02/02 14:45:53 bernd Exp $
--- configure.orig	Thu Mar 29 20:39:30 2007
+++ configure	Sat Apr  7 08:04:17 2007
@@@@ -19338,7 +19338,7 @@@@ echo "${ECHO_T}file not found" >&6; }
@


1.1
log
@Update to sqlite3-3.3.12.

ok espie@@
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Fri Feb  2 11:53:04 2007
+++ configure	Fri Feb  2 11:53:04 2007
@@@@ -19876,7 +19876,7 @@@@ echo "${ECHO_T}file not found" >&6
@

