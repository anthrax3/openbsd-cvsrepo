head	1.88;
access;
symbols
	OPENBSD_6_1:1.81.0.2
	OPENBSD_6_1_BASE:1.81
	OPENBSD_6_0:1.78.0.2
	OPENBSD_6_0_BASE:1.78
	OPENBSD_5_9:1.76.0.2
	OPENBSD_5_9_BASE:1.76
	OPENBSD_5_8:1.75.0.4
	OPENBSD_5_8_BASE:1.75
	OPENBSD_5_7:1.73.0.2
	OPENBSD_5_7_BASE:1.73
	OPENBSD_5_6:1.72.0.4
	OPENBSD_5_6_BASE:1.72
	OPENBSD_5_5:1.72.0.2
	OPENBSD_5_5_BASE:1.72
	OPENBSD_5_4:1.71.0.2
	OPENBSD_5_4_BASE:1.71
	OPENBSD_5_3:1.68.0.2
	OPENBSD_5_3_BASE:1.68
	OPENBSD_5_2:1.67.0.2
	OPENBSD_5_2_BASE:1.67
	OPENBSD_5_1_BASE:1.62
	OPENBSD_5_1:1.62.0.2
	OPENBSD_5_0:1.57.0.2
	OPENBSD_5_0_BASE:1.57
	OPENBSD_4_9:1.56.0.2
	OPENBSD_4_9_BASE:1.56
	OPENBSD_4_8:1.50.0.2
	OPENBSD_4_8_BASE:1.50
	OPENBSD_4_7:1.48.0.2
	OPENBSD_4_7_BASE:1.48
	OPENBSD_4_6:1.46.0.2
	OPENBSD_4_6_BASE:1.46
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.35.0.2
	OPENBSD_4_4_BASE:1.35
	OPENBSD_4_3:1.32.0.2
	OPENBSD_4_3_BASE:1.32
	OPENBSD_4_2:1.31.0.2
	OPENBSD_4_2_BASE:1.31
	OPENBSD_4_1:1.26.0.2
	OPENBSD_4_1_BASE:1.26
	OPENBSD_4_0:1.20.0.2
	OPENBSD_4_0_BASE:1.20
	OPENBSD_3_9:1.15.0.2
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.7.0.2
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	djm_20041107:1.1.1.1
	djm:1.1.1;
locks; strict;
comment	@# @;


1.88
date	2017.09.27.09.37.19;	author landry;	state Exp;
branches;
next	1.87;
commitid	hnM0rSJ6A8GrI5Hx;

1.87
date	2017.08.24.06.04.58;	author ajacoutot;	state Exp;
branches;
next	1.86;
commitid	JSNP2G2qsSaL8R1o;

1.86
date	2017.08.10.16.00.23;	author landry;	state Exp;
branches;
next	1.85;
commitid	95OS6ObohH2Mt8Ly;

1.85
date	2017.06.18.19.02.59;	author landry;	state Exp;
branches;
next	1.84;
commitid	EirVWm3bBlRIqIhK;

1.84
date	2017.06.18.18.32.52;	author landry;	state Exp;
branches;
next	1.83;
commitid	29KI5zz1IQOMGaE2;

1.83
date	2017.06.01.17.07.21;	author landry;	state Exp;
branches;
next	1.82;
commitid	vmwR5kfN24PYqVzo;

1.82
date	2017.04.24.16.25.20;	author sthen;	state Exp;
branches;
next	1.81;
commitid	Rv9nv6TXYdqRJdsy;

1.81
date	2017.02.20.19.31.56;	author landry;	state Exp;
branches;
next	1.80;
commitid	0SDdOl7gbf3W9TOv;

1.80
date	2017.02.02.07.37.41;	author landry;	state Exp;
branches;
next	1.79;
commitid	dG37vFlgg4ScfD2H;

1.79
date	2016.09.23.09.13.39;	author sthen;	state Exp;
branches;
next	1.78;
commitid	ZnhUnKcdMrVwUsU9;

1.78
date	2016.03.12.16.45.57;	author naddy;	state Exp;
branches;
next	1.77;
commitid	cP79RvEDMQwHyvef;

1.77
date	2016.03.11.19.59.12;	author naddy;	state Exp;
branches;
next	1.76;
commitid	pguKLBEFv33DrgKU;

1.76
date	2015.08.25.12.57.33;	author sthen;	state Exp;
branches;
next	1.75;
commitid	uwqnsxBmJQFSoMQ9;

1.75
date	2015.07.16.16.52.59;	author stu;	state Exp;
branches;
next	1.74;
commitid	VV7ObLKXxGSboJYL;

1.74
date	2015.05.22.11.31.11;	author ajacoutot;	state Exp;
branches;
next	1.73;
commitid	2khjHXfpTaOuNVcx;

1.73
date	2015.01.22.17.47.50;	author naddy;	state Exp;
branches;
next	1.72;
commitid	leO4gVXuz8NTXgdD;

1.72
date	2013.11.28.15.25.51;	author stu;	state Exp;
branches;
next	1.71;

1.71
date	2013.03.21.08.45.14;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2013.03.18.10.58.16;	author espie;	state Exp;
branches;
next	1.69;

1.69
date	2013.03.11.02.52.08;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2012.11.29.05.32.04;	author espie;	state Exp;
branches;
next	1.67;

1.67
date	2012.07.13.16.16.18;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2012.06.16.11.42.14;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2012.05.22.09.27.18;	author espie;	state Exp;
branches;
next	1.64;

1.64
date	2012.05.01.14.29.56;	author espie;	state Exp;
branches;
next	1.63;

1.63
date	2012.03.27.18.34.04;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2012.01.07.14.50.18;	author sthen;	state Exp;
branches;
next	1.61;

1.61
date	2012.01.07.13.47.52;	author sthen;	state Exp;
branches;
next	1.60;

1.60
date	2011.12.21.00.38.11;	author nigel;	state Exp;
branches;
next	1.59;

1.59
date	2011.11.18.09.39.09;	author espie;	state Exp;
branches;
next	1.58;

1.58
date	2011.11.18.00.33.30;	author espie;	state Exp;
branches;
next	1.57;

1.57
date	2011.03.14.14.39.51;	author landry;	state Exp;
branches;
next	1.56;

1.56
date	2011.01.10.08.11.56;	author landry;	state Exp;
branches;
next	1.55;

1.55
date	2011.01.09.19.11.34;	author landry;	state Exp;
branches;
next	1.54;

1.54
date	2011.01.05.16.39.44;	author stu;	state Exp;
branches;
next	1.53;

1.53
date	2010.11.15.00.22.54;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.06.22.50.03;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2010.10.18.17.06.08;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2010.04.20.10.00.17;	author sthen;	state Exp;
branches;
next	1.49;

1.49
date	2010.04.02.20.07.11;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2009.12.19.23.08.48;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2009.08.03.09.55.47;	author sthen;	state Exp;
branches;
next	1.46;

1.46
date	2009.05.12.23.20.52;	author simon;	state Exp;
branches;
next	1.45;

1.45
date	2009.04.22.21.23.43;	author martynas;	state Exp;
branches;
next	1.44;

1.44
date	2009.04.16.20.09.58;	author martynas;	state Exp;
branches;
next	1.43;

1.43
date	2009.04.05.00.02.53;	author martynas;	state Exp;
branches;
next	1.42;

1.42
date	2009.03.23.00.33.02;	author jakemsr;	state Exp;
branches;
next	1.41;

1.41
date	2009.01.31.15.49.34;	author simon;	state Exp;
branches;
next	1.40;

1.40
date	2009.01.26.14.44.37;	author bernd;	state Exp;
branches;
next	1.39;

1.39
date	2008.12.04.14.11.16;	author jasper;	state Exp;
branches;
next	1.38;

1.38
date	2008.10.28.12.18.36;	author steven;	state Exp;
branches;
next	1.37;

1.37
date	2008.10.27.23.20.39;	author steven;	state Exp;
branches;
next	1.36;

1.36
date	2008.10.27.17.14.18;	author simon;	state Exp;
branches;
next	1.35;

1.35
date	2008.07.25.19.02.25;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2008.07.23.23.06.39;	author martynas;	state Exp;
branches;
next	1.33;

1.33
date	2008.07.23.17.31.17;	author martynas;	state Exp;
branches;
next	1.32;

1.32
date	2007.09.15.18.51.35;	author steven;	state Exp;
branches;
next	1.31;

1.31
date	2007.07.30.06.28.07;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2007.06.26.19.13.37;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2007.04.22.22.12.42;	author martynas;	state Exp;
branches;
next	1.28;

1.28
date	2007.04.14.19.34.03;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2007.04.13.20.40.51;	author sturm;	state Exp;
branches;
next	1.26;

1.26
date	2007.02.02.14.45.53;	author bernd;	state Exp;
branches;
next	1.25;

1.25
date	2007.01.16.23.24.32;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2006.12.16.12.22.33;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2006.11.24.22.53.03;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2006.10.28.11.19.20;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2006.09.19.11.26.38;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2006.08.01.22.19.46;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2006.07.07.21.22.03;	author sturm;	state Exp;
branches;
next	1.18;

1.18
date	2006.06.17.09.09.28;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2006.04.13.05.09.52;	author jolan;	state Exp;
branches;
next	1.16;

1.16
date	2006.03.22.01.36.11;	author jolan;	state Exp;
branches;
next	1.15;

1.15
date	2006.01.11.12.19.44;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.12.26.21.32.01;	author sturm;	state Exp;
branches;
next	1.13;

1.13
date	2005.12.21.03.51.40;	author jolan;	state Exp;
branches;
next	1.12;

1.12
date	2005.10.20.04.42.56;	author jolan;	state Exp;
branches;
next	1.11;

1.11
date	2005.09.27.03.49.35;	author jolan;	state Exp;
branches;
next	1.10;

1.10
date	2005.09.17.22.05.39;	author jolan;	state Exp;
branches;
next	1.9;

1.9
date	2005.09.16.09.51.26;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2005.09.08.03.46.59;	author jolan;	state Exp;
branches;
next	1.7;

1.7
date	2005.06.14.00.12.58;	author jolan;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.06.02.58.04;	author jolan;	state Exp;
branches;
next	1.5;

1.5
date	2005.04.29.00.02.06;	author djm;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.28.22.58.28;	author jolan;	state Exp;
branches;
next	1.3;

1.3
date	2005.01.12.17.54.05;	author jolan;	state Exp;
branches;
next	1.2;

1.2
date	2004.11.22.16.59.30;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.11.07.00.10.17;	author djm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.11.07.00.10.17;	author djm;	state Exp;
branches;
next	;


desc
@@


1.88
log
@Bugfix update to sqlite3-3.20.1.

Only contains a single fix for a memory leak, cf
https://sqlite.org/src/info/abc7adfda27b67ef
See https://bugzilla.mozilla.org/show_bug.cgi?id=1392937 for what trigerred
this fix/release.

looks safe to sthen@@
@
text
@# $OpenBSD: Makefile,v 1.87 2017/08/24 06:04:58 ajacoutot Exp $

COMMENT=	embedded SQL implementation

DISTNAME =	sqlite-autoconf-3200100
PKGNAME=	sqlite3-3.20.1

SHARED_LIBS +=  sqlite3                   37.1 # 8.6

CATEGORIES=	databases

HOMEPAGE=	http://www.sqlite.org/

# PD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c m pthread readline termcap

MASTER_SITES =	${HOMEPAGE}2017/

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--enable-editline \
		--disable-static-shell

# for x11/gnome/tracker
CONFIGURE_ARGS +=	--enable-fts5

# for mozilla
CFLAGS+=	-DSQLITE_ENABLE_UNLOCK_NOTIFY \
		-DSQLITE_ENABLE_FTS3 \
		-DSQLITE_ENABLE_DBSTAT_VTAB

# update p5-DBD-SQLite's Makefile.PL if enabling -DSQLITE_ENABLE_COLUMN_METADATA

NO_TEST=	Yes

.include <bsd.port.mk>
@


1.87
log
@Enable FTS5; needed by an upcoming x11/gnome/tracker update.
Tested in a bulk.

miss bump spotted by jca@@
ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2017/08/10 16:00:23 landry Exp $
d5 2
a6 3
DISTNAME =	sqlite-autoconf-3200000
PKGNAME=	sqlite3-3.20.0
REVISION=	0
@


1.86
log
@Update to sqlite3 3.20.0.

Fixes CVE-2017-10989 ('The getNodeSize function in ext/rtree/rtree.c in
SQLite through 3.19.3, as used in GDAL and other products, mishandles
undersized RTree blobs in a crafted database, leading to a heap-based
buffer over-read or possibly unspecified other impact.')

The standalone fix itself is at
https://sqlite.org/src/vpatch?from=0db20efe201736b3&to=66de6f4a9504ec26

Pass -DSQLITE_ENABLE_FTS3 via CFLAGS, as it apparently fixes build
issues with mozilla (from FreeBSD r447626 via naddy@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2017/06/18 19:02:59 landry Exp $
d7 1
d9 1
a9 1
SHARED_LIBS +=  sqlite3                   37.0 # 8.6
d18 1
a18 1
WANTLIB += c pthread readline termcap
d25 3
@


1.85
log
@When bumping PKGNAME, make sure that DISTNAME matches and that we match
the new distfile..

Sigh... shouldnt commit when totally tired.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2017/06/18 18:32:52 landry Exp $
d5 2
a6 2
DISTNAME =	sqlite-autoconf-3190300
PKGNAME=	sqlite3-3.19.3
d8 1
a8 1
SHARED_LIBS +=  sqlite3                   36.0 # 8.6
d27 1
@


1.84
log
@Bugfix update to sqlite 3.19.3, required by gecko 55.

Fixes a single bug, see https://sqlite.org/src/info/fda22108 for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2017/06/01 17:07:21 landry Exp $
d5 1
a5 1
DISTNAME =	sqlite-autoconf-3190200
@


1.83
log
@Update to sqlite 3.19.2, will be required by gecko 54 or 55 anyway..

See https://www.sqlite.org/changes.html for a list of changes since 3.17.0
Went into a bunch of amd64 bulks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2017/04/24 16:25:20 sthen Exp $
d6 1
a6 1
PKGNAME=	sqlite3-3.19.2
@


1.82
log
@add a comment about -DSQLITE_ENABLE_COLUMN_METADATA and DBD::SQLite
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2017/02/20 19:31:56 landry Exp $
d5 2
a6 2
DISTNAME =	sqlite-autoconf-3170000
PKGNAME=	sqlite3-3.17.0
d8 1
a8 1
SHARED_LIBS +=  sqlite3                   35.0 # 8.6
@


1.81
log
@Update to sqlite 3.17.0.

See http://sqlite.org/releaselog/3_17_0.html - went into an amd64 bulk
build without issues, and is a requirement for upcoming gecko 52.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2017/02/02 07:37:41 landry Exp $
d28 2
@


1.80
log
@Update to sqlite3 3.16.2.

Will be required by gecko 52, went into a pair of amd64 bulk builds
without fallout.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2016/09/23 09:13:39 sthen Exp $
d5 2
a6 2
DISTNAME =	sqlite-autoconf-3160200
PKGNAME=	sqlite3-3.16.2
d8 1
a8 1
SHARED_LIBS +=  sqlite3                   34.0 # 8.6
@


1.79
log
@Re-enable the main sqlite3 library/binary in ports and update to 3.14.2.
Tcl support will move to databases/sqlite3-tcl, other ports will be adjusted
in a set of upcoming commits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2016/03/12 16:45:57 naddy Exp $
d5 2
a6 2
DISTNAME =	sqlite-autoconf-3140200
PKGNAME=	sqlite3-3.14.2
d8 1
a8 1
SHARED_LIBS +=  sqlite3                   33.0 # 8.6
d19 1
a19 1
MASTER_SITES =	${HOMEPAGE}2016/
@


1.78
log
@get rid of NO_SHARED_ARCHS and PFRAG.shared
@
text
@d1 8
a8 1
# $OpenBSD: Makefile,v 1.77 2016/03/11 19:59:12 naddy Exp $
a9 9
COMMENT-main=	embedded SQL implementation
COMMENT-tcl=	TCL bindings for Sqlite3
COMMENT-lemon=	LEMON LALR(1) parser generator
V=		3.8.0.2
DISTNAME =	sqlite-src-3080002
EXTRACT_SUFX =	.zip
PKGNAME-main=	sqlite3-${V}
PKGNAME-tcl=	sqlite3-tcl-${V}
PKGNAME-lemon=	lemon-${V}
a10 7
IGNORE-main = "--${FULLPKGNAME-main} comes with OpenBSD as of release 5.2"
SUBPACKAGE ?= -lemon
REVISION-lemon=	0
REVISION-main=	0
REVISION-tcl=	3

MASTER_SITES =	${HOMEPAGE}2013/
d17 11
a27 2
WANTLIB-main=	c ncurses pthread readline
WANTLIB-lemon=	c
a28 33
CFLAGS+=	-DSQLITE_ENABLE_COLUMN_METADATA \
		-DSQLITE_HAVE_ISNAN \
		-DSQLITE_SOUNDEX \
		-DSQLITE_ENABLE_RTREE \
		-DSQLITE_ENABLE_UNLOCK_NOTIFY \
		-DSQLITE_ENABLE_FTS3
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--enable-load-extension

PSEUDO_FLAVORS=	no_tcl
FLAVOR ?=

MULTI_PACKAGES=-main -lemon -tcl

.include <bsd.port.arch.mk>

.if ${BUILD_PACKAGES:M-tcl}
MODULES+=	lang/tcl

BUILD_DEPENDS=	${MODTCL_BUILD_DEPENDS}
RUN_DEPENDS-tcl=${MODTCL_RUN_DEPENDS}
WANTLIB-tcl =	pthread sqlite3

CONFIGURE_ARGS+=--with-tcl=${MODTCL_LIBDIR}
CONFIGURE_ARGS+=TCLSH_CMD="${MODTCL_BIN}"
CONFIGURE_ENV += TCLLIBDIR=${MODTCL_TCLDIR}/sqlite3

TEST_TARGET=	test

.else
CONFIGURE_ARGS+=--disable-tcl
CONFIGURE_ARGS+=TCLSH_CMD=none
CONFIGURE_ENV += CFLAGS=-I"${WRKSRC}/ext/fts3"
a29 8
.endif

# Don't include dependency on pthreads, weak pthread functions are
# used for non-threaded applications.
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/lemon
	${INSTALL_DATA} ${WRKBUILD}/lempar.c ${PREFIX}/share/lemon
	${INSTALL_PROGRAM} ${WRKBUILD}/lemon ${PREFIX}/bin
@


1.77
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2015/08/25 12:57:33 sthen Exp $
d17 1
a17 1
REVISION-tcl=	2
d36 1
a38 1
NOT_FOR_ARCHS-tcl = ${NO_SHARED_ARCHS}
a43 4

.if !${PROPERTIES:Mno_shared}
CONFIGURE_ARGS +=	--enable-load-extension
.endif
@


1.76
log
@wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2015/07/16 16:52:59 stu Exp $
a35 1
CONFIGURE_ARGS+=${CONFIGURE_SHARED}
@


1.75
log
@sqlite3-tcl needs to RUN_DEPEND on Tcl

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2015/05/22 11:31:11 ajacoutot Exp $
d17 1
a17 1
REVISION-tcl=	1
d55 1
a55 1
WANTLIB-tcl =	sqlite3
@


1.74
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2015/01/22 17:47:50 naddy Exp $
d17 1
a17 1
REVISION-tcl=	0
d54 1
@


1.73
log
@Drop USE_GROFF since groff and mandoc produce identical output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/11/28 15:25:51 stu Exp $
d15 3
@


1.72
log
@Update to 3.8.0.2.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/03/21 08:45:14 ajacoutot Exp $
a24 2

USE_GROFF =	Yes
@


1.71
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/03/18 10:58:16 espie Exp $
d6 2
a7 2
V=		3.7.15.2
DISTNAME=	sqlite-src-3071502
d16 1
a16 1
MASTER_SITES=	${HOMEPAGE}
@


1.70
log
@synch with src
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/03/11 02:52:08 espie Exp $
a25 1
USE_LIBTOOL=	Yes
@


1.69
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2012/11/29 05:32:04 espie Exp $
d6 2
a7 2
V=		3.7.14.1
DISTNAME=	sqlite-src-3071401
@


1.68
log
@update to 3.7.14.1 as well, ditch outdated -pthread patch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/07/13 16:16:18 espie Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d60 1
a60 1
REGRESS_TARGET=	test
d66 1
a66 1
NO_REGRESS=	Yes
@


1.67
log
@plain forgot, synch with src
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2012/06/16 11:42:14 espie Exp $
d6 2
a7 2
V=		3.7.13
DISTNAME=	sqlite-src-3071300
a14 1
REVISION-tcl =	0
@


1.66
log
@synch with src
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/05/22 09:27:18 espie Exp $
d6 2
a7 2
V=		3.7.12
DISTNAME=	sqlite-src-3071201
@


1.65
log
@minor update, synch with src
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2012/05/01 14:29:56 espie Exp $
d7 1
a7 1
DISTNAME=	sqlite-src-3071200
@


1.64
log
@zap sqlite3 build, proper, keep the lemon and tcl-sqlite3 stuff going.
(and don't forget about LIB_DEPENDS-tcl, thx sthen@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2012/03/27 18:34:04 sthen Exp $
d6 2
a7 2
V=		3.7.11
DISTNAME=	sqlite-src-3071100
a12 1
SHARED_LIBS +=	sqlite3              17.0      # .8.6
@


1.63
log
@update to SQLite 3.7.11 - requested by / OK landry@@
Thanks to Landry and Jan Stary for testing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/01/07 14:50:18 sthen Exp $
d14 3
a58 1
LIB_DEPENDS-tcl = ${BUILD_PKGPATH},-main>=${V}
a76 2
	perl -pi -e s,'\-pthread','',g ${PREFIX}/lib/libsqlite3.la \
		${PREFIX}/lib/pkgconfig/sqlite3.pc
a79 2
	${INSTALL_MAN} ${WRKBUILD}/sqlite3.1 ${PREFIX}/man/man1
	@@if objdump -p ${WRKINST}/${TRUEPREFIX}/lib/libsqlite3.so.${LIBsqlite3_VERSION} | grep NEEDED.*pthread; then echo "libsqlite seems to be linked with -lpthread; problem with patch-configure?"; exit 1; fi
@


1.62
log
@Do a little check with objdump in post-install, to make sure lib isn't
inadvertently linked with -lpthread.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2012/01/07 13:47:52 sthen Exp $
d6 2
a7 3
V=		3.7.9
REVISION=	0
DISTNAME=	sqlite-src-3070900
d13 1
a13 1
SHARED_LIBS +=	sqlite3              16.0      # .8.6
@


1.61
log
@Use -pthread not -lpthread. Library major bump for safety.

Inadvertently broken in last commit; the patch to the configure script
is fiddly and easily broken, so use extra lines of context for this patch
and add a warning comment.

Problem reported by James Turner, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/12/21 00:38:11 nigel Exp $
d82 1
@


1.60
log
@Update to v3.7.9 required for firefox, chrome
regression tests run on amd64,i386 and sparc64 by sthen@@ thanks.

Ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/11/18 09:39:09 espie Exp $
d7 1
d14 1
a14 1
SHARED_LIBS +=	sqlite3              15.2      # .8.6
d50 1
a50 1
CONFIGURE_ARGS +=	--enable-load-extension	
@


1.59
log
@finish converting, as the no_tcl thingy obviously is a NO_SHARED issue.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/11/18 00:33:30 espie Exp $
d6 2
a7 2
V=		3.7.5
DISTNAME=	sqlite-src-3070500
d13 1
a13 1
SHARED_LIBS +=	sqlite3              15.1      # .8.6
@


1.58
log
@convert to bsd.port.arch.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2011/03/14 14:39:51 landry Exp $
d41 1
a41 1
NOT_FOR_ARCHS-tcl = m88k vax
a43 4
.if ${MACHINE_ARCH} != "m88k" && ${MACHINE_ARCH} != "vax"
CONFIGURE_ARGS +=	--enable-load-extension	
.endif

d47 4
@


1.57
log
@Update to sqlite 3.7.5, enable UNLOCK_NOTIFY api (needed by firefox 4).

Tested by phessler@@ on loongson/sparc, jasper@@ on arm, myself on
amd64/sparc64/macppc, and went through a pair of amd64 bulk builds
without issues.
ok sthen@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2011/01/10 08:11:56 landry Exp $
d41 3
a44 1
FLAVOR?=
a45 2
.else
FLAVOR=	no_tcl
d48 5
a52 3
MULTI_PACKAGES=-main -lemon
.if !${FLAVOR:L:Mno_tcl}
MULTI_PACKAGES+=-tcl
@


1.56
log
@Oops, typo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2011/01/09 19:11:34 landry Exp $
d6 2
a7 2
V=		3.7.4
DISTNAME=	sqlite-src-3070400
d13 1
a13 1
SHARED_LIBS +=	sqlite3              15.0      # .8.6
d35 1
@


1.55
log
@Major update to sqlite 3.7.4. Based on a diff from stu@@ for 3.7.3,
enables FTS3, SOUNDEX and RTREE options, remove the now non-relevant
'thread override lock' thing. Simplify Makefile a bit.
Tested by sthen@@ on arm, jasper@@ on mips64el, sebastia@@ on the vax
(yay!) and myself on sparc64/ppc/amd64.
ok sebastia@@ jasper@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/01/05 16:39:44 stu Exp $
d53 1
a53 1
LIB_DEPENDS-tcl = ${BUILD_PKGPATH},-main=>${V}
@


1.54
log
@Update to newer Tcl layout.

ok landry@@, sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/11/15 00:22:54 espie Exp $
d6 3
a8 2
V=		3.6.23
DISTNAME=	sqlite-${V}
a9 1
REVISION-main =	0
a10 1
REVISION-tcl =	0
d13 1
a13 1
SHARED_LIBS +=	sqlite3              14.0      # .8.6
d32 4
a35 2
		-DSQLITE_HAVE_ISNAN
#		-DSQLITE_ENABLE_FTS3=1
d37 1
a37 2
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
		--enable-threads-override-locks
a50 1
.endif
d53 1
a53 1
LIB_DEPENDS-tcl = ${BUILD_PKGPATH},-main
a55 1
.if ${MULTI_PACKAGES:M-tcl}
d57 1
a61 3
pre-configure:
	@@perl -pi -e s,'tclsh',${MODTCL_BIN},g ${WRKSRC}/Makefile.in

d64 2
a65 1
CONFIGURE_ENV += TCLSH_CMD=none
d75 1
a75 1
	${INSTALL_DATA} ${WRKBUILD}/tool/lempar.c ${PREFIX}/share/lemon
@


1.53
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/06 22:50:03 espie Exp $
d11 1
d37 1
a37 2
		--enable-threads-override-locks \
		--enable-load-extension
d42 1
d59 1
@


1.52
log
@bye bye old LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/10/18 17:06:08 espie Exp $
d8 2
a9 1
PKGNAME-main=	sqlite3-${V}p0
d53 1
a53 1
LIB_DEPENDS-tcl = ::${BUILD_PKGPATH},-main
@


1.51
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/04/20 10:00:17 sthen Exp $
d52 2
a53 1
LIB_DEPENDS-tcl = sqlite3::${BUILD_PKGPATH},-main
@


1.50
log
@Install the manpage; from Patrick Keshishian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/04/02 20:07:11 sthen Exp $
d28 1
@


1.49
log
@Update to 3.6.23, much of this was done by Florent Tribouilloy and
espie@@ who adjusted things so the build doesn't depend on Tcl (which
was added as a build dependency in 3.6.17).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/08/03 09:55:47 sthen Exp $
d8 1
a8 1
PKGNAME-main=	sqlite3-${V}
d75 1
@


1.48
log
@Update to 3.6.16.1; a simple but important fix (and needed to update
Firefox). Mainline sqlite has moved beyond this but involves some changes
to the build infrastructure which need to be looked at separately.

Since the distfile is no longer available upstream, this is provided
as a patch to the 3.6.16 distfile and is taken from upstream's SCM.

Requested by naddy@@.
@
text
@d6 1
a6 1
V=		3.6.16
d8 3
a10 3
PKGNAME-main=	sqlite3-${V}.1
PKGNAME-tcl=	sqlite3-tcl-${V}.1
PKGNAME-lemon=	lemon-${V}.1
d12 1
a12 2
SHARED_LIBS +=	sqlite3              13.3      # .8.6
SHARED_LIBS +=	tclsqlite3           12.3      # .8.6
d31 1
d63 1
@


1.47
log
@Update SQLite to 3.6.16; ok martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/05/12 23:20:52 simon Exp $
d8 3
a10 3
PKGNAME-main=	sqlite3-${V}
PKGNAME-tcl=	sqlite3-tcl-${V}
PKGNAME-lemon=	lemon-${V}
@


1.46
log
@enable load-extension for ports starting to require it

tested by bernd@@ in a bulk build, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/04/22 21:23:43 martynas Exp $
d6 1
a6 1
V=		3.6.13
d8 1
a8 1
PKGNAME-main=	sqlite3-${V}p0
d30 2
a31 1
CFLAGS+=	-DSQLITE_ENABLE_COLUMN_METADATA
@


1.45
log
@sqlite3-3.6.13.  full bulk build done by jasper@@.  ok jasper@@, simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/04/16 20:09:58 martynas Exp $
d8 1
a8 1
PKGNAME-main=	sqlite3-${V}
d33 2
a34 1
		--enable-threads-override-locks
@


1.44
log
@update to sqlite-3.6.12.  full bulk build done by jasper@@
"go ahead" sthen@@, ok fgs@@, jasper@@, simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2009/04/05 00:02:53 martynas Exp $
d6 1
a6 1
V=		3.6.12
d12 2
a13 2
SHARED_LIBS +=	sqlite3              13.2      # .8.6
SHARED_LIBS +=	tclsqlite3           12.2      # .8.6
@


1.43
log
@update to sqlite3-3.6.11.  fixes null ptr deref in sqlite3OsTruncate
addColumn;  which broke py stuff
noticed with fgs@@ while working on the py stuff
much thanks to bernd@@;  for doing a bulk build with it
ok fgs@@, bernd@@, simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/03/23 00:33:02 jakemsr Exp $
d6 1
a6 1
V=		3.6.11
d12 2
a13 2
SHARED_LIBS +=	sqlite3              13.1      # .8.6
SHARED_LIBS +=	tclsqlite3           12.1      # .8.6
a33 5

# XXX gcc bug? some regress tests crash w/-O2 but not -Os
.if ${MACHINE_ARCH} == "amd64"
CFLAGS+=-Os
.endif
@


1.42
log
@use /dev/arandom instead of /dev/urandom.  reading from /dev/urandom
is too slow.

ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2009/01/31 15:49:34 simon Exp $
d6 1
a6 1
V=		3.6.10
d8 1
a8 1
PKGNAME-main=	sqlite3-${V}p0
d12 2
a13 2
SHARED_LIBS +=	sqlite3              13.0      # .8.6
SHARED_LIBS +=	tclsqlite3           12.0      # .8.6
@


1.41
log
@update to version 3.6.10 which comes with quite a few fixes, remove fix
for solved libtool issue and add fix for tests on big-endian arches

looks good to espie@@
requested, bulk-tested and ok by bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2009/01/26 14:44:37 bernd Exp $
d8 1
a8 1
PKGNAME-main=	sqlite3-${V}
@


1.40
log
@Add subpackage for the lemon LALR(1) parser generator.

ok martynas@@, simon@@ (some time ago)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/12/04 14:11:16 jasper Exp $
d6 1
a6 1
V=		3.6.4
d8 2
a9 2
PKGNAME-main=	sqlite3-${V}p0
PKGNAME-tcl=	sqlite3-tcl-${V}p0
d12 2
a13 2
SHARED_LIBS +=	sqlite3              12.1      # .8.6
SHARED_LIBS +=	tclsqlite3           11.0      # .8.6
a62 3
# XXX libtool issue
pre-install:
	@@cp -p ${WRKSRC}/.libs/libtclsqlite3.so.$(LIBtclsqlite3_VERSION) ${WRKSRC}/.libs/libtclsqlite3.so
@


1.39
log
@- enable the SQLITE_ENABLE_COLUMN_METADATA part of sqlite3's API, as needed
by some applications (eventually).
- bump the minor

ok simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/10/28 12:18:36 steven Exp $
d5 1
d10 1
d26 1
d47 1
a47 1
MULTI_PACKAGES=-main
d77 3
@


1.38
log
@remove outdated comment about not passing tests, noticed by Stuart Cassoff
replace BASE_PKGPATH with BUILD_PKGPATH in dependency line while here

ok bernd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/10/27 23:20:39 steven Exp $
d7 1
a7 1
PKGNAME-main=	sqlite3-${V}
d10 1
a10 1
SHARED_LIBS +=	sqlite3              12.0      # .8.6
d27 1
@


1.37
log
@switch to use tcl 8.5.

inputs from and looks good to bernd and simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2008/10/27 17:14:18 simon Exp $
d50 1
a50 1
LIB_DEPENDS-tcl = sqlite3::${BASE_PKGPATH},-main
a53 2
# Can't pass all its regress tests, because tcl doesn't handle NaN
# (strtod doesn't work in an IEEE way)
@


1.36
log
@update to version 3.6.4, see http://www.sqlite.org/35to36.html and
http://www.sqlite.org/changes.html for the details

tcl adjustments and bulk build testing by bernd@@, thanks!

ok bernd@@, steven@@, martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2008/07/25 19:02:25 espie Exp $
d8 1
a8 1
PKGNAME-tcl=	sqlite3-tcl-${V}
d46 1
d49 1
a49 1
BUILD_DEPENDS= :tcl-8.4.*:lang/tcl/8.4
d53 1
a53 1
CONFIGURE_ARGS+=--with-tcl=${LOCALBASE}/lib/tcl8.4
d60 1
a60 1
	@@perl -pi -e s,'tclsh','tclsh8.4',g ${WRKSRC}/Makefile.in
@


1.35
log
@depends on libm __isnan -> major bump -> package bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2008/07/23 23:06:39 martynas Exp $
d5 1
a5 1
V=		3.5.9
d7 1
a7 1
PKGNAME-main=	sqlite3-${V}p0
d10 2
a11 2
SHARED_LIBS +=	sqlite3              11.0      # .8.6
SHARED_LIBS +=	tclsqlite3           10.0      # .8.6
d49 1
@


1.34
log
@fix if tcl-8.4 is not installed, spotted by Laurence Tratt
since BUILD_DEPENDS is not subpackage-dependant, there's no such
thing as BUILD_DEPENDS-tcl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2008/07/23 17:31:17 martynas Exp $
d7 1
a7 1
PKGNAME-main=	sqlite3-${V}
d10 1
a10 1
SHARED_LIBS +=	sqlite3              10.0      # .8.6
@


1.33
log
@- update to sqlite-3.5.9
- merge espie's patches
- fix apps such as p5-DBD-SQLite, by adding weak pthread functions.
also include some bug fixes from kurt@@.  the work has been done by
kurt@@, and espie@@.  thanks!
ok kurt@@, espie@@, bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/09/15 18:51:35 steven Exp $
d48 1
a48 1
BUILD_DEPENDS-tcl= tcl84.>=1.0:tcl-8.4.*:lang/tcl/8.4
@


1.32
log
@update to 3.4.2

ok martynas@@, merdely@@, also tested by eric@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/07/30 06:28:07 steven Exp $
d5 1
a5 1
V=		3.4.2
d10 2
a11 2
SHARED_LIBS +=	sqlite3              9.0      # .8.6
SHARED_LIBS +=	tclsqlite3           9.0      # .8.6
d23 1
a23 1
WANTLIB-main=	c ncurses readline
d28 2
a29 1
CONFIGURE_ARGS+=${CONFIGURE_SHARED}
d48 1
a48 2
LIB_DEPENDS-tcl=sqlite3.>=9.0::databases/sqlite3 \
		tcl84.>=1.0:tcl-8.4.*:lang/tcl/8.4
d67 6
@


1.31
log
@update to 3.4.1

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/06/26 19:13:37 espie Exp $
d5 1
a5 1
V=		3.4.1
@


1.30
log
@update to 3.4.0, heads up from Srebrenko Sehic,
okay martynas@@

(boy, we got too many eastern europeans in there, I can't spell their names
and have to look it up each time)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/04/22 22:12:42 martynas Exp $
d3 3
a5 3
COMMENT-main=	"Embedded SQL implementation"
COMMENT-tcl=	"TCL bindings for Sqlite3"
V=		3.4.0
d47 1
a47 1
LIB_DEPENDS-tcl=sqlite3.>=8.6::databases/sqlite3 \
@


1.29
log
@3.3.16 is a minor bugfix update
changelog: http://www.sqlite.org/changes.html
ok espie@@, steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/04/14 19:34:03 steven Exp $
d5 1
a5 1
V=		3.3.16
d10 2
a11 2
SHARED_LIBS +=	sqlite3              8.10     # .8.6
SHARED_LIBS +=	tclsqlite3           8.10     # .8.6
d52 3
@


1.28
log
@update to sqlite 3.3.15

doesn't look bad espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2007/04/13 20:40:51 sturm Exp $
d5 1
a5 1
V=		3.3.15
@


1.27
log
@WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2007/02/02 14:45:53 bernd Exp $
d5 1
a5 1
V=		3.3.12
d8 1
a8 1
PKGNAME-tcl=	sqlite3-tcl-${V}p0
d10 2
a11 2
SHARED_LIBS +=	sqlite3              8.9      # .8.6
SHARED_LIBS +=	tclsqlite3           8.9      # .8.6
@


1.26
log
@Update to sqlite3-3.3.12.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/01/16 23:24:32 espie Exp $
d8 1
a8 1
PKGNAME-tcl=	sqlite3-tcl-${V}
d23 1
a23 1
WANTLIB=	c ncurses readline
@


1.25
log
@update to 3.3.10 (recommended update), speeds up some operations, fixes
some fringe cases, and passes all its regression tests now.

okay robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/12/16 12:22:33 espie Exp $
d5 1
a5 1
V=		3.3.10
d10 2
a11 2
SHARED_LIBS +=	sqlite3              8.8      # .8.6
SHARED_LIBS +=	tclsqlite3           8.8      # .8.6
@


1.24
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/11/24 22:53:03 espie Exp $
d5 1
a5 1
V=		3.3.7
d7 1
a7 1
PKGNAME-main=	sqlite3-${V}p0
d10 2
a11 2
SHARED_LIBS +=	sqlite3              8.7      # .8.6
SHARED_LIBS +=	tclsqlite3           8.7      # .8.6
@


1.23
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/10/28 11:19:20 espie Exp $
a21 2

BUILD_DEPENDS=	:pkgconfig-*:devel/pkgconfig
@


1.22
log
@a few more SHARED_LIBS reformat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/09/19 11:26:38 espie Exp $
d3 1
a3 1
COMMENT=	"Embedded SQL implementation"
d7 1
a7 1
PKGNAME=	sqlite3-${V}
d44 1
a44 1
MULTI_PACKAGES=
d49 2
a50 1
SUBPACKAGE?=
d52 1
a52 7
.if defined(PACKAGING)
. if ${SUBPACKAGE} == "-tcl"
LIB_DEPENDS=	sqlite3.>=8.6::databases/sqlite3 \
		tcl84.>=1.0:tcl-8.4.*:lang/tcl/8.4
. endif
.else
. if ${MULTI_PACKAGES:M-tcl}
a53 1
LIB_DEPENDS=	tcl84.>=1.0:tcl-8.4.*:lang/tcl/8.4
a54 5
. else
CONFIGURE_ARGS+=--disable-tcl
NO_REGRESS=	Yes
. endif
.endif
a56 1
.if ${MULTI_PACKAGES:M-tcl}
a57 2
.endif

a59 1
.if ${MULTI_PACKAGES:M-tcl}
d61 4
@


1.21
log
@update to 3.3.7, talked to author, regression failures are known,
but not really important.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/08/01 22:19:46 espie Exp $
d10 2
a11 2
SHARED_LIBS=	sqlite3	8.7 \
		tclsqlite3 8.7
@


1.20
log
@more new libspecs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/07/07 21:22:03 sturm Exp $
d5 1
a5 1
V=		3.3.6
d8 1
a8 1
PKGNAME-tcl=	sqlite3-tcl-${V}p0
d10 2
a11 1
SHARED_LIBS=	sqlite3	8.6
d75 1
a75 1
	@@cp -p ${WRKSRC}/.libs/libtclsqlite3.so.8.6 ${WRKSRC}/.libs/libtclsqlite3.so
@


1.19
log
@be sure to depend on tcl-8.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/06/17 09:09:28 espie Exp $
d52 2
a53 2
LIB_DEPENDS=	sqlite3.8.6::databases/sqlite3 \
		tcl84.1.0:tcl-8.4.*:lang/tcl/8.4
d58 1
a58 1
LIB_DEPENDS=	tcl84.1.0:tcl-8.4.*:lang/tcl/8.4
@


1.18
log
@update to 3.3.6, okay jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/04/13 05:09:52 jolan Exp $
d8 1
a8 1
PKGNAME-tcl=	sqlite3-tcl-${V}
d53 1
a53 1
		tcl84.1.0::lang/tcl/8.4
d58 1
a58 1
LIB_DEPENDS=	tcl84.1.0::lang/tcl/8.4
@


1.17
log
@update to 3.3.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/03/22 01:36:11 jolan Exp $
d5 1
a5 1
V=		3.3.5
@


1.16
log
@update to 3.3.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/01/11 12:19:44 espie Exp $
d5 1
a5 1
V=		3.3.4
@


1.15
log
@zap MODGNU_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/12/26 21:32:01 sturm Exp $
d5 1
a5 1
V=		3.2.8
d7 2
a8 2
PKGNAME=	sqlite3-${V}p0
PKGNAME-tcl=	sqlite3-tcl-${V}p0
d31 1
a31 1
# XXX gcc bug? some regress tests crash at w/-O2 but not -Os
@


1.14
log
@SHARED_LIBS, USE_LIBTOOl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/12/21 03:51:40 jolan Exp $
a10 1
MODGNU_SHARED_LIBS=sqlite3 ''
@


1.13
log
@update to 3.2.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/10/20 04:42:56 jolan Exp $
d7 2
a8 2
PKGNAME=	sqlite3-${V}
PKGNAME-tcl=	sqlite3-tcl-${V}
d10 3
d26 2
@


1.12
log
@when sqlite3 is compiled with -O2 on amd64, it crashes in the regression
tests.  this doesn't happen with any other optimization level so just
use -Os as it is the closest thing to -O2.

could use some help tracking this down...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/09/27 03:49:35 jolan Exp $
d5 1
a5 3
V=		3.2.7
PKGNAME=	sqlite3-${V}p0
PKGNAME-tcl=	sqlite3-tcl-${V}p0
d7 2
@


1.11
log
@update to 3.2.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/09/17 22:05:39 jolan Exp $
d6 2
a7 2
PKGNAME=	sqlite3-${V}
PKGNAME-tcl=	sqlite3-tcl-${V}
d26 5
@


1.10
log
@update to 3.2.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/09/16 09:51:26 espie Exp $
d5 1
a5 1
V=		3.2.6
@


1.9
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/09/08 03:46:59 jolan Exp $
d5 2
a6 2
V=		3.2.5
PKGNAME=	sqlite3-${V}p0
@


1.8
log
@update to 3.2.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/06/14 00:12:58 jolan Exp $
d6 1
a6 1
PKGNAME=	sqlite3-${V}
@


1.7
log
@update to 3.2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/05/06 02:58:04 jolan Exp $
d5 1
a5 1
V=		3.2.2
@


1.6
log
@memory alignment fixes from sqlite cvs, bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/04/29 00:02:06 djm Exp $
d5 6
a11 5
VERSION=	3.2.1
PKGNAME=	sqlite3-${VERSION}p0
PKGNAME-tcl=	sqlite3-tcl-${VERSION}p0
DISTNAME=	sqlite-${VERSION}
CATEGORIES=	databases
a12 1
MASTER_SITES=	${HOMEPAGE}
d14 1
a14 1
# Public Domain
a18 1
WANTLIB=	c ncurses readline
d22 2
d25 1
a25 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
@


1.5
log
@drop maintainership of these, I don't have time to give them enought attention
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/04/28 22:58:28 jolan Exp $
d7 2
a8 2
PKGNAME=	sqlite3-${VERSION}
PKGNAME-tcl=	sqlite3-tcl-${VERSION}
@


1.4
log
@- update to 3.2.1 + patch for invalid array access (sent & accepted
  upstream)
- subpackage tcl stuff & add no_tcl pseudo flavor

ok djm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/01/12 17:54:05 jolan Exp $
a12 2

MAINTAINER=	Damien Miller <djm@@openbsd.org>
@


1.3
log
@fix for aggressive malloc options, backported from sqlite cvs

ok djm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/11/22 16:59:30 espie Exp $
d4 1
d6 3
a8 2
VERSION=	3.0.8
PKGNAME=	sqlite3-${VERSION}p0
d21 1
a21 1
WANTLIB=		c ncurses readline
d23 1
a23 3
CONFIGURE_STYLE=	gnu
USE_GMAKE=		Yes
WRKDIST=		${WRKDIR}/sqlite
d25 2
a26 1
BUILD_DEPENDS=		tcl84::lang/tcl/8.4
d28 40
a67 5
CONFIGURE_ARGS=		${CONFIGURE_SHARED}
CONFIGURE_ENV=		config_TARGET_TCL_LIBS="-L${LOCALBASE}/lib -ltcl84 -lm"
CONFIGURE_ENV+=		config_TARGET_TCL_INC="-I${LOCALBASE}/include/tcl8.4"

REGRESS_TARGET=		test
a69 1

@


1.2
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/11/07 00:10:17 djm Exp $
d6 1
a6 1
PKGNAME=	sqlite3-${VERSION}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/07/11 23:52:01 djm Exp $
d19 1
@


1.1.1.1
log
@Import of sqlite3, a public-domain in-process SQL engine:

    SQLite is a C library that implements an embeddable SQL database engine.
    Programs that link with the SQLite library can have SQL database access
    without running a separate RDBMS process. The distribution comes with a
    standalone command-line access program (sqlite) that can be used to
    administer an SQLite database and which serves as an example of how to
    use the SQLite library. SQLite is not a client library used to connect to
    a big database server. SQLite is the server. The SQLite library reads and
    writes directly to and from the database files on disk.

Note that sqlite3 is not backwards compatible with sqlite2, but they can be 
installed in parallel (thus the separate port). ok jolan@@

@
text
@@
