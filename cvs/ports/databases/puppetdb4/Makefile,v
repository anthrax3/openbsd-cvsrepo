head	1.10;
access;
symbols
	OPENBSD_6_1:1.10.0.2
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.4.0.2
	OPENBSD_6_0_BASE:1.4
	jasper_20160106:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2016.11.18.14.53.37;	author sebastia;	state Exp;
branches;
next	1.9;
commitid	lhakcmSPOU4ZaIli;

1.9
date	2016.11.03.21.54.04;	author sebastia;	state Exp;
branches;
next	1.8;
commitid	tSpF7R4IVFryuSIs;

1.8
date	2016.09.21.20.33.34;	author sebastia;	state Exp;
branches;
next	1.7;
commitid	aJaBwEmXWXN3qeYp;

1.7
date	2016.09.21.20.31.28;	author sebastia;	state Exp;
branches;
next	1.6;
commitid	wV5otGCKiGUOt8AF;

1.6
date	2016.09.06.11.26.08;	author jasper;	state Exp;
branches;
next	1.5;
commitid	xEqzJFuEBwCQlM6x;

1.5
date	2016.08.30.12.13.39;	author jasper;	state Exp;
branches;
next	1.4;
commitid	yX2Zb3JwLDKJf9e1;

1.4
date	2016.06.29.16.14.38;	author espie;	state Exp;
branches;
next	1.3;
commitid	c1yQMbJbfo0CFBcL;

1.3
date	2016.06.27.11.34.00;	author jasper;	state Exp;
branches;
next	1.2;
commitid	rehywxyECejAwrZh;

1.2
date	2016.06.15.07.47.30;	author sebastia;	state Exp;
branches;
next	1.1;
commitid	QfmALan9et9EoYfE;

1.1
date	2016.06.01.12.11.13;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;
commitid	y4xRvNMoXqXh8jXq;

1.1.1.1
date	2016.06.01.12.11.13;	author jasper;	state Exp;
branches;
next	;
commitid	y4xRvNMoXqXh8jXq;


desc
@@


1.10
log
@Simple update to 4.3.0

ok ajacoutot@@
@
text
@# $OpenBSD: Makefile,v 1.9 2016/11/03 21:54:04 sebastia Exp $

PORTROACH=	limit:^4

COMMENT-main=	fast, scalable, and reliable data warehouse for Puppet
COMMENT-plugin= PuppetDB terminus plugin

V=		4.3.0
DISTNAME=	puppetdb-$V
PKGNAME-main=	${DISTNAME}
PKGNAME-plugin= puppetdb-termini-$V
CATEGORIES=	databases

HOMEPAGE=	http://docs.puppetlabs.com/puppetdb/latest/

MAINTAINER=	Sebastian Reitenbach <sebastia@@openbsd.org>

MASTER_SITES=	http://downloads.puppetlabs.com/puppetdb/

# Apachev2
PERMIT_PACKAGE_CDROM=	Yes

MODULES=	java \
		lang/ruby
MODJAVA_VER=	1.8+

MULTI_PACKAGES= -main -plugin

BUILD_DEPENDS =	sysutils/coreutils
RUN_DEPENDS-plugin=sysutils/ruby-puppet/4>=4.2.0

RUN_DEPENDS-main=${BASE_PKGPATH},-plugin=$V \
		${MODJAVA_RUN_DEPENDS} \
		java/javaPathHelper \
		shells/bash

MAKE_FLAGS +=	confdir="share/examples/puppetdb/" \
		datadir="share" \
		bindir="bin" \
		rubylibdir="${MODRUBY_SITEDIR}" \
		DESTDIR="${PREFIX}/"

NO_BUILD=	Yes
NO_TEST=	Yes

do-configure:
	${SUBST_CMD} ${WRKSRC}/ext/bin/puppetdb \
		${WRKSRC}/ext/cli/ssl-setup \
		${WRKSRC}/ext/config/conf.d/*.ini
	sed -i 's,/bin/bash,${LOCALBASE}/bin/bash,g;' \
		${WRKSRC}/ext/bin/puppetdb \
		${WRKSRC}/ext/cli/*

do-install:
	cd ${WRKSRC} && ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} \
		install-puppetdb install-puppetdb-termini
	rm ${PREFIX}/share/puppetdb/ezbake*

.include <bsd.port.mk>
@


1.9
log
@Minor bugfix update to 4.2.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/09/21 20:33:34 sebastia Exp $
d8 1
a8 1
V=		4.2.4
a11 2
REVISION-main=	1
REVISION-plugin=1
@


1.8
log
@Actually let the puppetdb run as the _puppetdb user instead of root.

in case of system upgrades, you may chown logfiles/cache/tempdir
to the _puppetdb user.

feedback/OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/09/21 20:31:28 sebastia Exp $
d8 1
a8 1
V=		4.2.2
@


1.7
log
@Do not nail the plugin subpackage to ruby 2.2, works well with 2.3

feedback/OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2016/09/06 11:26:08 jasper Exp $
d12 1
a12 1
REVISION-main=	0
@


1.6
log
@sebastia@@ is the new puppetmaster
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/08/30 12:13:39 jasper Exp $
d13 1
a13 1
REVISION-plugin=0
a27 2

MODRUBY_REV=	2.2
@


1.5
log
@- update to puppetdb-4.2.2
- enforce strict dependency of -termini on -main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2016/06/29 16:14:38 espie Exp $
d12 2
d18 1
a18 1
MAINTAINER=	Jasper Lievisse Adriaanse <jasper@@openbsd.org>
d28 2
@


1.4
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/06/27 11:34:00 jasper Exp $
d8 1
a8 1
V=		4.1.2
a12 1
REVISION-main =	0
d32 1
a32 1
RUN_DEPENDS-main=${BASE_PKGPATH},-plugin \
@


1.3
log
@- update to puppetdb-4.1.2

https://docs.puppet.com/puppetdb/4.1/release_notes.html#section
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/06/15 07:47:30 sebastia Exp $
d13 1
@


1.2
log
@bump dependency to java 1.8. With 1.7, easily ran into memory issues.

OK jasper@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/06/01 12:11:13 jasper Exp $
d8 1
a8 2
V=		4.1.0
REVISION=	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 1
d26 1
a26 1
MODJAVA_VER=	1.7+
@


1.1.1.1
log
@import puppetdb 4.1.0

PuppetDB is the fast, scalable, and reliable data warehouse for Puppet.
It caches data generated by Puppet, and gives you advanced features at
awesome speed with a powerful API.

the existing databases/puppetdb port only works against puppet 3; puppetdb 4
works against puppet 4.

feedback/ok aja@@ sebastia@@
@
text
@@
