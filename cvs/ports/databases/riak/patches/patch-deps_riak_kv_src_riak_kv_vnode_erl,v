head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.4
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.05.13.04.29.58;	author jmatthew;	state Exp;
branches;
next	1.1;
commitid	P0v9TDe3jJVZCynU;

1.1
date	2015.01.16.04.42.13;	author jmatthew;	state Exp;
branches;
next	;
commitid	Bl0w9tdPdocxO4wA;


desc
@@


1.2
log
@update to riak 2.1.4 and switch to erlang 17.
jasper@@ kindly checked the erlang version bits.
@
text
@$OpenBSD: patch-deps_riak_kv_src_riak_kv_vnode_erl,v 1.1 2015/01/16 04:42:13 jmatthew Exp $

Remove yokozuna tentacles

--- deps/riak_kv/src/riak_kv_vnode.erl.orig	Thu Nov 12 08:02:14 2015
+++ deps/riak_kv/src/riak_kv_vnode.erl	Wed May 11 11:43:58 2016
@@@@ -93,20 +93,20 @@@@
 
 %% N.B. The ?INDEX macro should be called any time the object bytes on
 %% disk are modified.
--ifdef(TEST).
+%%-ifdef(TEST).
 %% Use values so that test compile doesn't give 'unused vars' warning.
 -define(INDEX(A,B,C), _=element(1,{A,B,C}), ok).
 -define(INDEX_BIN(A,B,C,D,E), _=element(1,{A,B,C,D,E}), ok).
--else.
--define(INDEX(Obj, Reason, Partition), yz_kv:index(Obj, Reason, Partition)).
--define(INDEX_BIN(Bucket, Key, Obj, Reason, Partition), yz_kv:index_binary(Bucket, Key, Obj, Reason, Partition)).
--endif.
+%%-else.
+%%-define(INDEX(Obj, Reason, Partition), yz_kv:index(Obj, Reason, Partition)).
+%%-define(INDEX_BIN(Bucket, Key, Obj, Reason, Partition), yz_kv:index_binary(Bucket, Key, Obj, Reason, Partition)).
+%%-endif.
 
--ifdef(TEST).
+%%-ifdef(TEST).
 -define(YZ_SHOULD_HANDOFF(X), true).
--else.
--define(YZ_SHOULD_HANDOFF(X), yz_kv:should_handoff(X)).
--endif.
+%%-else.
+%%-define(YZ_SHOULD_HANDOFF(X), yz_kv:should_handoff(X)).
+%%-endif.
 
 -record(mrjob, {cachekey :: term(),
                 bkey :: term(),
@


1.1
log
@update to riak 2.0.4, no longer marked broken.
yokozuna (solr-based search) is disabled for now.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- deps/riak_kv/src/riak_kv_vnode.erl.orig	Fri Jan  9 17:57:18 2015
+++ deps/riak_kv/src/riak_kv_vnode.erl	Mon Jan 12 10:45:47 2015
@@@@ -92,18 +92,18 @@@@
d15 1
d18 1
d22 1
@

