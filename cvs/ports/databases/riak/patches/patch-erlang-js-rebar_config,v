head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.4
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.4
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	jmatthew_20120824:1.1.1.1
	jmatthew:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.05.13.04.29.58;	author jmatthew;	state Exp;
branches;
next	1.4;
commitid	P0v9TDe3jJVZCynU;

1.4
date	2015.01.16.04.42.13;	author jmatthew;	state Exp;
branches;
next	1.3;
commitid	Bl0w9tdPdocxO4wA;

1.3
date	2013.03.26.05.26.30;	author jmatthew;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.25.06.33.14;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.24.07.26.29;	author jmatthew;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.08.24.07.26.29;	author jmatthew;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to riak 2.1.4 and switch to erlang 17.
jasper@@ kindly checked the erlang version bits.
@
text
@$OpenBSD: patch-erlang-js-rebar_config,v 1.4 2015/01/16 04:42:13 jmatthew Exp $

Use external nspr and spidermonkey.  These need lots of patches.

--- deps/erlang_js/rebar.config.orig	Sat Apr 12 06:39:20 2014
+++ deps/erlang_js/rebar.config	Wed May 11 11:45:43 2016
@@@@ -10,8 +10,8 @@@@
 {port_specs, [{"priv/erlang_js_drv.so", ["c_src/*.c"]}]}.
 
 {port_env, [
-             {"DRV_CFLAGS", "$DRV_CFLAGS -I c_src/system/include/js -DXP_UNIX -Wall"},
-             {"DRV_LDFLAGS", "$DRV_LDFLAGS c_src/system/lib/libjs.a c_src/system/lib/libnspr4.a"},
+             {"DRV_CFLAGS", "$DRV_CFLAGS -I /usr/local/include/js -DXP_UNIX -Wall"},
+             {"DRV_LDFLAGS", "$DRV_LDFLAGS -L /usr/local/lib -lmozjs -lnspr4"},
 
              %% Define flags for enabling/disable 64 bit build of NSPR
              {"-32$", "NSPR_SIXTYFOUR", "--disable-64bit"},
@@@@ -40,5 +40,5 @@@@
 
             ]}.
 
-{pre_hooks, [{compile, "make c_src"}]}.
-{post_hooks, [{clean, "make c_src_clean"}]}.
+%%{pre_hooks, [{compile, "make -C c_src"}]}.
+%%{post_hooks, [{clean, "make -C c_src clean"}]}.
@


1.4
log
@update to riak 2.0.4, no longer marked broken.
yokozuna (solr-based search) is disabled for now.
@
text
@d1 1
a1 1
$OpenBSD: patch-erlang-js-rebar_config,v 1.3 2013/03/26 05:26:30 jmatthew Exp $
d6 1
a6 1
+++ deps/erlang_js/rebar.config	Wed Jan  7 19:27:23 2015
d13 2
a14 2
+             {"DRV_CFLAGS", "$DRV_CFLAGS -I ${LOCALBASE}/include/js -DXP_UNIX -Wall"},
+             {"DRV_LDFLAGS", "$DRV_LDFLAGS -L ${LOCALBASE}/lib -lmozjs -lnspr4"},
@


1.3
log
@Update to riak 1.3.0

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-erlang-js-rebar_config,v 1.2 2012/08/25 06:33:14 ajacoutot Exp $
d5 4
a8 4
--- deps/erlang_js/rebar.config.orig	Wed Jan 30 06:13:01 2013
+++ deps/erlang_js/rebar.config	Sat Feb 23 10:26:09 2013
@@@@ -8,8 +8,8 @@@@
 {erl_opts, [warnings_as_errors]}.
d18 1
a18 1
@@@@ -34,5 +34,5 @@@@
@


1.2
log
@Don't hardcode gmake, use ${MAKE_PROGRAM}.
Tighten LIB_DEPENDS.
Don't hardcode /usr/local and /etc.

ok jmatthew@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-erlang-js-rebar_config,v 1.1.1.1 2012/08/24 07:26:29 jmatthew Exp $
d5 2
a6 2
--- deps/erlang_js/rebar.config.orig	Fri Jul 13 23:29:23 2012
+++ deps/erlang_js/rebar.config	Wed Aug  8 11:25:02 2012
d10 1
a10 1
 {port_envs, [
d14 1
a14 1
+             {"DRV_LDFLAGS", "$DRV_LDFLAGS -L ${LOCALBASE}/lib/ -lmozjs -lnspr4"},
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d13 2
a14 2
+             {"DRV_CFLAGS", "$DRV_CFLAGS -I /usr/local/include/js -DXP_UNIX -Wall"},
+             {"DRV_LDFLAGS", "$DRV_LDFLAGS -L /usr/local/lib/ -lmozjs -lnspr4"},
@


1.1.1.1
log
@import riak

Riak combines a decentralized key-value store, a flexible map/reduce engine, 
and a friendly HTTP/JSON query interface to provide a database ideally suited 
for Web applications.

ok dlg@@
@
text
@@
