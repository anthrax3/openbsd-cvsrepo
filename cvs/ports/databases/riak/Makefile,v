head	1.28;
access;
symbols
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.15.0.2
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.12.0.4
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	jmatthew_20120824:1.1.1.1
	jmatthew:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2017.03.01.22.54.13;	author jmatthew;	state Exp;
branches;
next	1.27;
commitid	gkMHQsbXdH6cKPW8;

1.27
date	2016.05.13.04.29.58;	author jmatthew;	state Exp;
branches;
next	1.26;
commitid	P0v9TDe3jJVZCynU;

1.26
date	2016.04.04.16.09.09;	author naddy;	state Exp;
branches;
next	1.25;
commitid	u3lQjrjlcAL26lGp;

1.25
date	2015.08.29.12.41.45;	author sthen;	state Exp;
branches;
next	1.24;
commitid	Wb6mktwACXaZ9vKW;

1.24
date	2015.07.18.01.23.17;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	L1eZGFR750BNKQ6B;

1.23
date	2015.07.14.22.53.30;	author jasper;	state Exp;
branches;
next	1.22;
commitid	olXAcbplQDBlbJeX;

1.22
date	2015.07.11.12.57.05;	author jasper;	state Exp;
branches;
next	1.21;
commitid	WhIZiSqW0qS06s83;

1.21
date	2015.07.10.17.10.09;	author jasper;	state Exp;
branches;
next	1.20;
commitid	SOYIZNizvYNoe91F;

1.20
date	2015.06.25.13.21.55;	author jasper;	state Exp;
branches;
next	1.19;
commitid	EZiknh2GSsOWMknA;

1.19
date	2015.06.24.06.50.19;	author jasper;	state Exp;
branches;
next	1.18;
commitid	j9e6rEKPQs9wW2iM;

1.18
date	2015.06.23.16.38.10;	author jasper;	state Exp;
branches;
next	1.17;
commitid	vQirt5gq1WScVB6u;

1.17
date	2015.06.22.13.08.20;	author jasper;	state Exp;
branches;
next	1.16;
commitid	jGSzLxzI7U7pgVEu;

1.16
date	2015.05.27.16.32.18;	author jca;	state Exp;
branches;
next	1.15;
commitid	81p3TXvSnleaXOAf;

1.15
date	2015.01.16.04.42.12;	author jmatthew;	state Exp;
branches;
next	1.14;
commitid	Bl0w9tdPdocxO4wA;

1.14
date	2014.12.31.13.18.10;	author jasper;	state Exp;
branches;
next	1.13;
commitid	OY5pJ61SWKsAqcxM;

1.13
date	2014.09.15.07.14.21;	author jmatthew;	state Exp;
branches;
next	1.12;
commitid	pGR3ccrWubH4Gt78;

1.12
date	2014.02.05.11.22.51;	author jmatthew;	state Exp;
branches;
next	1.11;

1.11
date	2014.01.25.11.35.23;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2013.11.02.23.07.49;	author jmatthew;	state Exp;
branches;
next	1.9;

1.9
date	2013.11.01.12.37.46;	author jmatthew;	state Exp;
branches;
next	1.8;

1.8
date	2013.10.27.11.24.05;	author jmatthew;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.28.03.56.06;	author jmatthew;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.26.05.26.30;	author jmatthew;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.11.02.52.08;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2012.12.19.01.47.25;	author jmatthew;	state Exp;
branches;
next	1.3;

1.3
date	2012.08.28.05.46.41;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.25.06.33.14;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.24.07.26.29;	author jmatthew;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.08.24.07.26.29;	author jmatthew;	state Exp;
branches;
next	;


desc
@@


1.28
log
@honor CC and CXX
@
text
@# $OpenBSD: Makefile,v 1.27 2016/05/13 04:29:58 jmatthew Exp $

COMMENT=			distributed data store
DISTNAME=			riak-2.1.4
CATEGORIES=			databases
HOMEPAGE=			http://basho.com/

MAINTAINER=			Jonathan Matthew <jmatthew@@openbsd.org>

ONLY_FOR_ARCHS=			amd64

# Apache License 2.0
PERMIT_PACKAGE_CDROM=		Yes

MASTER_SITES=			http://s3.amazonaws.com/downloads.basho.com/riak/2.1/2.1.4/

RIAK_VERSIONS= \
RIAK            2.1.4 \
ERTS            6.4 \
ASN1            3.0.4 \
BASHO_STATS     1.0.3 \
BEAR            0.1.3p1-0-gda820a1 \
BITCASK         1.7.2 \
CANOLA          2.0.0-0-g9bdfee8 \
CLIQUE          0.3.2-0-ge332c8f \
CLUSTER_INFO    2.0.3-0-g76c73fc \
COMPILER        5.0.4 \
CRYPTO          3.5 \
CUTTLEFISH      2.0.5-0-g9ff5830 \
ELEVELDB        2.0.17-0-g973fc92 \
EPER            0.78-0-g7222eca \
ERLANG_JS       1.3.0-0-g07467d8 \
ERLYDTL         0.7.0 \
ET              1.5 \
EUNIT           2.2.9 \
EXOMETER_CORE   1.0.0-basho2-0-gb47a5d6 \
FOLSOM          0.7.4p5-0-g7294452 \
GETOPT          0.8.2 \
GOLDRUSH        0.1.7 \
GS              1.5.15.2 \
HIPE            3.11.3 \
INETS           5.10.6 \
KERNEL          3.2 \
LAGER           2.1.1 \
LAGER_SYSLOG    2.1.2 \
LUCENE_PARSER   1 \
MECK            0.8.2 \
MERGE_INDEX     2.0.1-0-g0c8f77c \
MNESIA          4.12.5 \
MOCHIWEB        2.9.0 \
OBSERVER        2.0.4 \
OS_MON          2.3.1 \
OTP_MIBS        1.0.10 \
PARSE_TRANS     2.9-0-g82cc002 \
PBKDF2          2.0.0-0-g7076584 \
POOLBOY         0.8.1p3-0-g8bb45fb \
PROTOBUFFS      0.8.1p5-0-gf88fc3c \
PUBLIC_KEY      0.23 \
RIAK_API        2.1.2-0-gd8d510f \
RIAK_AUTH_MODS  2.1.0-0-g31b8b30 \
RIAK_CONTROL    2.1.2-0-gab3f924 \
RIAK_CORE       2.1.5-0-gb02ab53 \
RIAK_DT         2.1.1-0-ga2986bc \
RIAK_ENSEMBLE   2.1.2-0-g1a79eed \
RIAK_KV         2.1.2-0-gf969bba \
RIAK_PB         2.1.0.2-0-g620bc70 \
RIAK_PIPE       2.1.1-0-gb1ac2cf \
RIAK_SEARCH     2.1.1-0-gffe2113 \
RIAK_SYSMON     2.0.0 \
RIAKNOSTIC      2.1.3-0-g84c0aa5 \
RUNTIME_TOOLS   1.8.16 \
SASL            2.4.1 \
SETUP           1.4-0-g51ee7c9 \
SEXT            1.1p3-0-g846b9cc \
SIDEJOB         2.0.0-0-gc5aabba \
SNMP            5.1.1 \
SSH		3.2 \
SSL             6.0 \
STDLIB          2.4 \
SYNTAX_TOOLS    1.6.18 \
SYSLOG          1.0.3 \
TOOLS           2.7.2 \
WEBMACHINE      1.10.8-0-g7677c24 \
WEBTOOL         0.8.10 \
WX              1.3.3 \
XMERL           1.3.7 \
SNAPPY          1.0.4

.for _n _v in ${RIAK_VERSIONS}
${_n}_V=${_v}
SUBST_VARS+=${_n}_V
.endfor

MAKE_ENV =	MAKE=${MAKE_PROGRAM} CC=${CC} CXX=${CXX}
MAKE_FLAGS =	rel

MODULES =	lang/erlang
MODERL_WX =	Yes
MODERL_VERSION = 17

# configure bundled snappy correctly
WRKCONF = ${WRKSRC}/deps/eleveldb/c_src/snappy-${SNAPPY_V}
MODGNU_CONFIG_GUESS_DIRS = ${WRKCONF}
CONFIGURE_STYLE = gnu
CONFIGURE_ARGS += --with-pic --disable-gtest

snappy_AUTOCONF_VERSION = 2.65
snappy_AUTOMAKE_VERSION = 1.11

WANTLIB = c crypto m ncurses pthread ssl stdc++ util mozjs nspr4 pam

MODERL_BUILD_DEPENDS=devel/rebar
BUILD_DEPENDS+=	devel/autoconf/${snappy_AUTOCONF_VERSION} \
		devel/automake/${snappy_AUTOMAKE_VERSION} \
		devel/libtool
LIB_DEPENDS =	lang/spidermonkey \
		security/openpam

versions:
.for _n _v in ${RIAK_VERSIONS}
	@@echo ${_n} ${_v}
.endfor

# Overwrite local copy of rebar
pre-patch:
	cp ${LOCALBASE}/bin/rebar${MODERL_VERSION} ${WRKSRC}/rebar

pre-configure:
	mkdir -p ${WRKSRC}/deps/riaknostic/deps
.for d in lager getopt meck
	cp -r ${WRKSRC}/deps/${d} ${WRKSRC}/deps/riaknostic/deps/${d}
.endfor
	${SUBST_CMD} ${WRKSRC}/deps/eleveldb/rebar.config \
		${WRKSRC}/deps/erlang_js/rebar.config \
		${WRKSRC}/rel/vars.config
	tar xzf ${WRKSRC}/deps/eleveldb/c_src/snappy-${SNAPPY_V}.tar.gz \
		-C ${WRKSRC}/deps/eleveldb/c_src
	# tweak libtool to generate a static convenience (pic) snappy library
	perl -pi \
	    -e 's/^lib_LTLIBRARIES/noinst_LTLIBRARIES/;' \
	    -e 's/^libsnappy_la_LDFLAGS/#$$&/;' \
	    ${WRKSRC}/deps/eleveldb/c_src/snappy-${SNAPPY_V}/Makefile.am
	cd ${WRKSRC}/deps/eleveldb/c_src/snappy-${SNAPPY_V}/ && ${SETENV} \
	    AUTOCONF_VERSION=${snappy_AUTOCONF_VERSION} \
	    AUTOMAKE_VERSION=${snappy_AUTOMAKE_VERSION} \
	    ./autogen.sh
	mkdir -p ${WRKSRC}/rel/riak/etc

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/riak ${PREFIX}/share/riak
	cp -r ${WRKSRC}/rel/riak/lib ${PREFIX}/lib/riak
	cp -r ${WRKSRC}/rel/riak/releases/ ${PREFIX}/lib/riak
	cp -r ${WRKSRC}/rel/riak/erts-${ERTS_V}/ ${PREFIX}/lib/riak
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/lib/riak
	chmod ${BINMODE} ${PREFIX}/lib/riak/erts-${ERTS_V}/bin/nodetool
.for s in riak riak-admin riak-debug search-cmd
	${INSTALL_SCRIPT} ${WRKSRC}/rel/riak/bin/${s} ${PREFIX}/sbin
	zcat ${WRKSRC}/doc/man/man1/${s}.1.gz | sed -Ee 's/^(\.Dd [0-9-]+).*/\1/' \
		> ${PREFIX}/man/man1/${s}.1
.endfor
	${INSTALL_DATA} ${WRKSRC}/rel/riak/etc/riak.conf ${PREFIX}/share/riak
	chmod 755 ${PREFIX}/lib/riak/lib/{app_epath.sh,env.sh}

.include <bsd.port.mk>
@


1.27
log
@update to riak 2.1.4 and switch to erlang 17.
jasper@@ kindly checked the erlang version bits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/04/04 16:09:09 naddy Exp $
d94 1
a94 1
MAKE_ENV =	MAKE=${MAKE_PROGRAM}
@


1.26
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/08/29 12:41:45 sthen Exp $
d4 1
a4 2
DISTNAME=			riak-2.0.4
REVISION=			8
d15 1
a15 1
MASTER_SITES=			http://s3.amazonaws.com/downloads.basho.com/riak/2.0/2.0.4/
d18 3
a20 3
RIAK            2.0.4 \
ERTS            5.10.4 \
ASN1            2.0.4 \
d23 1
a23 1
BITCASK         1.7.0 \
d25 6
a30 6
CLIQUE          0.2.4-0-g14a0966 \
CLUSTER_INFO    2.0.0-0-g1fae829 \
COMPILER        4.9.4 \
CRYPTO          3.2 \
CUTTLEFISH      2.0.0-34-ga459ba6 \
ELEVELDB        2.0.0-3-g10fcb78 \
d34 6
a39 6
ET              1.4.4.5 \
EUNIT           2.2.6 \
EXOMETER_CORE   1.0.0-basho1-0-ga46aa8b \
FOLSOM          0.7.4p4-0-ge80bd01 \
GETOPT          0.4.3 \
GOLDRUSH        0.1.6 \
d41 5
a45 5
HIPE            3.10.2.2 \
INETS           5.9.8 \
KERNEL          2.16.4 \
LAGER           2.0.3 \
LAGER_SYSLOG    2.0.3 \
d47 7
a53 7
MECK            0.8.1-0-g2b25a30 \
MERGE_INDEX     2.0.0-0-gb701dde \
MNESIA          4.11 \
MOCHIWEB        1.5.1p6 \
OBSERVER        1.3.1.2 \
OS_MON          2.2.14 \
OTP_MIBS        1.0.8 \
d56 13
a68 13
POOLBOY         0.8.1p2-0-g84d836a \
PROTOBUFFS      0.8.1p4-0-g5257dfe \
PUBLIC_KEY      0.21 \
RIAK_API        2.0.1-6-g618cab1 \
RIAK_AUTH_MODS  2.0.0-1-g9ae39fe \
RIAK_CONTROL    2.0.0-1-gadc50dc \
RIAK_CORE       2.0.1-93-g0562e0b \
RIAK_DT         2.0.0-11-g38797a0 \
RIAK_ENSEMBLE   2.0.0-1-gd66a102 \
RIAK_KV         2.0.2-30-g23de41a \
RIAK_PB         2.0.0.16-0-gfc18a9b \
RIAK_PIPE       2.0.0-8-g4662392 \
RIAK_SEARCH     2.0.0-7-g86bfb89 \
d70 3
a72 3
RIAKNOSTIC      2.0.0-0-g4e7daa5 \
RUNTIME_TOOLS   1.8.13 \
SASL            2.3.4 \
d76 11
a86 10
SNMP            4.25 \
SSL             5.3.3 \
STDLIB          1.19.4 \
SYNTAX_TOOLS    1.6.13 \
SYSLOG          1.0.2 \
TOOLS           2.6.13 \
WEBMACHINE      1.10.5-0-ge5f8233 \
WEBTOOL         0.8.9.2 \
WX              1.1.2 \
XMERL           1.3.6 \
d99 1
d126 1
a126 1
	cp ${LOCALBASE}/bin/rebar16 ${WRKSRC}/rebar
@


1.25
log
@move "overwrite local copy of rebar" from post-extract to pre-patch,
reducing the requirement to manually install packages when unpacking ports
source.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/07/18 01:23:17 ajacoutot Exp $
d5 1
a5 1
REVISION=			7
@


1.24
log
@Seems this uses su(1) nowadays.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/07/14 22:53:30 jasper Exp $
d124 1
a124 1
post-extract:
@


1.23
log
@use MODERL_WX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/07/11 12:57:05 jasper Exp $
d5 1
a5 1
REVISION=			6
@


1.22
log
@add missing dependency on wx subpackage; to be reworked shortly

spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/07/10 17:10:09 jasper Exp $
d98 1
d114 1
a114 2
		devel/libtool \
		lang/erlang/16,-wx
a116 1
RUN_DEPENDS =	lang/erlang/16,-wx
@


1.21
log
@bump after erlang dependency change

reminded by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/06/25 13:21:55 jasper Exp $
d5 1
a5 1
REVISION=			5
d113 2
a114 1
		devel/libtool
d117 1
@


1.20
log
@use devel/rebar instead of bundled copy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/06/24 06:50:19 jasper Exp $
d5 1
a5 1
REVISION=			4
@


1.19
log
@switch to using the erlang module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/06/23 16:38:10 jasper Exp $
d5 1
a5 1
REVISION=			3
d110 1
a110 1
BUILD_DEPENDS =	lang/erlang/16
d121 4
@


1.18
log
@tidy up erlang dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/06/22 13:08:20 jasper Exp $
d5 1
a5 1
REVISION=			2
d94 4
a97 3
USE_GMAKE =			Yes
MAKE_ENV =			MAKE=${MAKE_PROGRAM}
MAKE_FLAGS =			rel
@


1.17
log
@bump after MODERL_RUN_DEPENDS change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/05/27 16:32:18 jca Exp $
d5 1
a5 1
REVISION=			1
d109 1
a109 1
BUILD_DEPENDS =	lang/erlang>=16b.03
@


1.16
log
@Build the bundled libsnappy as a convenience (PIC) libtool library

Fixes binutils-2.17@@amd64.

ok jmatthew@@ (maintainer), "fais ce que tu veux" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/01/16 04:42:12 jmatthew Exp $
d5 1
a5 1
REVISION=			0
@


1.15
log
@update to riak 2.0.4, no longer marked broken.
yokozuna (solr-based search) is disabled for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/12/31 13:18:10 jasper Exp $
d5 1
d104 3
d108 7
a114 2
LIB_DEPENDS = lang/spidermonkey security/openpam
BUILD_DEPENDS = lang/erlang>=16b.03
d131 9
@


1.14
log
@mark broken, as it needs an update to 2.x to work with Erlang 16; which jmatthew@@
will provide

ok jmatthew@@ (MAINTAINER)
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.13 2014/09/15 07:14:21 jmatthew Exp $

BROKEN=				needs update to 2.x to work with Erlang 16
d4 1
a4 1
DISTNAME=			riak-1.4.7
d15 1
a15 1
MASTER_SITES=			http://downloads.basho.com.s3-website-us-east-1.amazonaws.com/riak/1.4/1.4.7/
d18 69
a86 60
RIAK_V          1.4.7 \
ERTS_V          5.9.2 \
APPMON_V        2.1.14.1 \
ASN1_V          1.8 \
BASHO_STATS_V   1.0.3 \
BEAR_V          0.1.3p1-0-gda820a1 \
BITCASK_V       1.6.5-0-ga99f2f0 \
CLUSTER_INFO_V  1.2.4 \
COMPILER_V      4.8.2 \
CRYPTO_V        2.2 \
ELEVELDB_V      1.4.7-0-g98a465d \
EPER_V          0.61 \
ERLANG_JS_V     1.2.2 \
ERLYDTL_V       0.7.0 \
ET_V            1.4.4.2 \
EUNIT_V         2.2.3 \
FOLSOM_V        0.7.4p1-0-g4e485ce \
GETOPT_V        0.4.3 \
GOLDRUSH_V	0.1.5 \
GS_V            1.5.15.1 \
HIPE_V          3.9.2 \
INETS_V         5.9.1 \
KERNEL_V        2.15.2 \
LAGER_V         2.0.1 \
LAGER_SYSLOG_V  2.0.1 \
LUCENE_PARSER_V 1 \
MECK_V		0.8.1 \
MERGE_INDEX_V   1.3.2-0-gcb38ee7 \
MNESIA_V        4.7.1 \
MOCHIWEB_V      1.5.1p6 \
OBSERVER_V      1.2 \
OS_MON_V        2.2.10 \
OTP_MIBS_V      1.0.7 \
POOLBOY_V       0.8.1p1 \
PROTOBUFFS_V    0.8.1 \
PUBLIC_KEY_V    0.16 \
RIAK_API_V      1.4.4-0-g395e6fd \
RIAK_CONTROL_V  1.4.4-0-g9a74e57 \
RIAK_CORE_V     1.4.4 \
RIAK_KV_V       1.4.7-0-g5daeedd \
RIAK_PB_V       1.4.4.0-0-g0353be3 \
RIAK_PIPE_V     1.4.4-0-g7f390f3 \
RIAK_SEARCH_V   1.4.7-0-g2a44e2f \
RIAK_SYSMON_V   1.1.3 \
RIAKNOSTIC_V    1.2.1 \
RUNTIME_TOOLS_V 1.8.9 \
SASL_V          2.2.1 \
SEXT_V          1.1p1-0-g0f7c45f \
SIDEJOB_V       0.2.0 \
SNMP_V          4.22.1 \
SSL_V           5.1 \
STDLIB_V        1.18.2 \
SYNTAX_TOOLS_V  1.6.9 \
SYSLOG_V	1.0.2 \
TOOLS_V         2.6.8 \
WEBMACHINE_V    1.10.4-0-gfcff795 \
WEBTOOL_V       0.8.9.1 \
WX_V            0.99.2 \
XMERL_V         1.3.2 \
SNAPPY_V	1.0.4
d89 2
a90 2
${_n}=${_v}
SUBST_VARS+=${_n}
d103 8
a110 3
WANTLIB = c crypto m ncurses pthread ssl stdc++ util mozjs nspr4
LIB_DEPENDS = lang/spidermonkey
BUILD_DEPENDS = lang/erlang>=15b.02
d122 1
d131 1
a131 1
.for s in riak riak-admin search-cmd
d136 1
a136 3
.for s in app.config vm.args
	${INSTALL_DATA} ${WRKSRC}/rel/riak/etc/${s} ${PREFIX}/share/riak
.endfor
@


1.13
log
@disable gtest usage so it doesn't break bulk builds, as reported by
naddy and espie.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.12 2014/02/05 11:22:51 jmatthew Exp $
@


1.12
log
@update to riak 1.4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/01/25 11:35:23 espie Exp $
d92 1
a92 1
CONFIGURE_ARGS += --with-pic
@


1.11
log
@fix script modes...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/11/02 23:07:49 jmatthew Exp $
d4 1
a4 1
DISTNAME=			riak-1.4.2
a6 1
REVISION=			1
d15 1
a15 1
MASTER_SITES=			http://downloads.basho.com.s3-website-us-east-1.amazonaws.com/riak/1.4/1.4.2/
d18 1
a18 1
RIAK_V          1.4.2 \
d24 1
a24 1
BITCASK_V       1.6.3 \
d28 1
a28 1
ELEVELDB_V      1.4.2-0-g4df4947 \
d36 1
a36 1
GOLDRUSH_V	0.1.2 \
d41 2
a42 2
LAGER_V         2.0.0 \
LAGER_SYSLOG_V  2.0.0 \
d45 1
a45 1
MERGE_INDEX_V   1.3.1 \
d54 7
a60 8
RANCH_V         0.4.0-p1 \
RIAK_API_V      1.4.2-0-ga7e00e2 \
RIAK_CONTROL_V  1.4.2-0-g2f08324 \
RIAK_CORE_V     1.4.2 \
RIAK_KV_V       1.4.2-0-g61ac9d8 \
RIAK_PB_V       1.4.1.1 \
RIAK_PIPE_V     1.4.2-0-g59d1bae \
RIAK_SEARCH_V   1.4.2-0-ge31368d \
d62 1
a62 1
RIAKNOSTIC_V    1.2.0 \
d65 1
a65 1
SEXT_V          1.1-3-g3af5478 \
d71 1
a71 1
SYSLOG_V	1.0.1 \
d95 2
a96 1
LIB_DEPENDS = lang/erlang>=15b.02 lang/spidermonkey
@


1.10
log
@meck doesn't need to be in the package (it's only used for tests)
and on some systems reltool doesn't include it in the release which
makes the package build fail.

help from Alex Wilson, tested by naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/11/01 12:37:46 jmatthew Exp $
d7 1
a7 1
REVISION=			0
d125 1
@


1.9
log
@Instead of running make install for snappy, get the headers and static
library from its source tree. Should make it possible for dpb to build this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/10/27 11:24:05 jmatthew Exp $
d7 1
@


1.8
log
@update to riak 1.4.2

help from naddy@@ and ajacoutot@@, ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/28 03:56:06 jmatthew Exp $
d77 2
a78 1
XMERL_V         1.3.2
a89 1
SNAPPY_V = 1.0.4
d93 1
a125 2

CONFIGURE_ARGS = --with-pic --prefix=${WRKSRC}/deps/eleveldb/c_src/system
@


1.7
log
@add missing files to riak's PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/26 05:26:30 jmatthew Exp $
d4 1
a4 1
DISTNAME=			riak-1.3.0
a6 1
REVISION=			0
d15 1
a15 7
MASTER_SITES=			http://downloads.basho.com.s3-website-us-east-1.amazonaws.com/riak/1.3/1.3.0/

MASTER_SITES0=			http://dropbox.eait.uq.edu.au/uqjmatt6/distfiles/
BASHO_LEVELDB_V=		1.3.0
DISTNAME0=			basho-leveldb-${BASHO_LEVELDB_V}.tar.gz

DISTFILES=			${DISTNAME}${EXTRACT_SUFX} ${DISTNAME0}:0
d18 1
a18 1
RIAK_V          1.3.0 \
d23 3
a25 3
BEAR_V          0.1.2-0-g0da736b \
BITCASK_V       1.6.0 \
CLUSTER_INFO_V  1.2.3 \
d28 1
a28 1
ELEVELDB_V      1.3.0 \
d34 1
a34 1
FOLSOM_V        0.7.3-13-gec3c29c \
d36 1
d41 2
a42 2
LAGER_V         1.2.2 \
LAGER_SYSLOG_V  1.2.2 \
d44 2
a45 1
MERGE_INDEX_V   1.3.0 \
d47 1
a47 1
MOCHIWEB_V      1.5.1p3 \
d51 2
a52 2
POOLBOY_V       0.8.1 \
PROTOBUFFS_V    0.8.0 \
d54 8
a61 7
RIAK_API_V      1.3.0 \
RIAK_CONTROL_V  1.3.0 \
RIAK_CORE_V     1.3.0 \
RIAK_KV_V       1.3.0 \
RIAK_PB_V       1.3.0 \
RIAK_PIPE_V     1.3.0 \
RIAK_SEARCH_V   1.3.0 \
d63 1
d66 2
a67 1
SEXT_V          0.4.1-0-g362bdd1 \
d74 1
a74 1
WEBMACHINE_V    1.9.3 \
d88 6
d98 1
a98 2
	cp -r ${WRKDIR}/basho-leveldb-${BASHO_LEVELDB_V} ${WRKSRC}/deps/eleveldb/c_src/leveldb
	mkdir ${WRKSRC}/deps/riaknostic/deps
d105 3
d125 2
@


1.6
log
@Update to riak 1.3.0

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/11 02:52:08 espie Exp $
d7 1
@


1.5
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/12/19 01:47:25 jmatthew Exp $
d4 1
a4 1
DISTNAME=			riak-1.2.0
a6 1
REVISION=			2
d10 2
d15 7
a21 1
MASTER_SITES=			http://downloads.basho.com.s3-website-us-east-1.amazonaws.com/riak/1.2/1.2.0/
d24 1
a24 1
RIAK_V          1.2.0 \
d26 1
d28 4
a31 5
APPMON_V        2.1.14.1 \
BASHO_STATS_V   1.0.2 \
BEAR_V          0.1-0-g7ef9a7b \
BITCASK_V       1.5.1 \
CLUSTER_INFO_V  1.2.2 \
d34 1
a34 2
EBLOOM_V        1.1.1 \
ELEVELDB_V      1.2.2 \
d36 1
a36 1
ERLANG_JS_V     1.2.0 \
d40 1
a40 1
FOLSOM_V        0.7-0-g64b24d3 \
d46 2
a47 1
LAGER_V         1.2.0 \
d49 1
a49 2
LUKE_V          0.2.5 \
MERGE_INDEX_V   1.2.0 \
d51 1
a51 1
MOCHIWEB_V      1.5.1 \
d55 2
a56 2
POOLBOY_V       0.6.1 \
PROTOBUFFS_V    0.7.0 \
d58 8
a65 9
RIAK_API_V      1.2.0 \
RIAK_CONTROL_V  1.2.0 \
RIAK_CORE_V     1.2.0 \
RIAK_KV_V       1.2.0 \
RIAK_PB_V       1.2.0 \
RIAK_PIPE_V     1.2.0 \
RIAK_SEARCH_V   1.2.0 \
RIAK_SYSMON_V   1.1.2 \
RIAKC_V         1.2.1 \
d73 1
d75 1
a75 1
WEBMACHINE_V    1.9.2 \
d89 2
a90 4
WANTLIB = c crypto m ncurses pthread ssl stdc++ util mozjs nspr4 leveldb
LIB_DEPENDS = databases/leveldb>=1.5.0 \
	lang/erlang>=15b.02 \
	lang/spidermonkey
d93 5
@


1.4
log
@update riak to work with erlang r15b02, prodded by dlg@@ and looked at
by aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/08/28 05:46:41 ajacoutot Exp $
a12 3
PERMIT_PACKAGE_FTP=		Yes
PERMIT_DISTFILES_CDROM=		Yes
PERMIT_DISTFILES_FTP=		Yes
@


1.3
log
@Add a @@comment as to why _riak requires a valid homedir and shell.
Tweak rc.d(8) script:
* no need for a bin var, we have daemon for that
* set rc_reload and rc_usercheck to no
* don't redirect to /dev/null
* implement rc_check() using 'riak ping'

with and ok jmatthew@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/08/25 06:33:14 ajacoutot Exp $
d7 1
a7 1
REVISION=			1
d21 3
a23 3
ERTS_V          5.9.1 \
ASN1_V		1.7 \
APPMON_V	2.1.14.1 \
d25 1
a25 1
BEAR_V		0.1-0-g7ef9a7b \
d28 2
a29 2
COMPILER_V      4.8.1 \
CRYPTO_V        2.1 \
d34 5
a38 5
ERLYDTL_V	0.7.0 \
ET_V            1.4.4.1 \
EUNIT_V         2.2.2 \
FOLSOM_V	0.7-0-g64b24d3 \
GETOPT_V	0.4.3 \
d40 3
a42 3
HIPE_V          3.9.1 \
INETS_V         5.9 \
KERNEL_V        2.15.1 \
d47 1
a47 1
MNESIA_V        4.7 \
d49 2
a50 2
OBSERVER_V      1.1 \
OS_MON_V        2.2.9 \
d54 2
a55 2
PUBLIC_KEY_V    0.15 \
RIAK_API_V	1.2.0 \
d59 1
a59 1
RIAK_PB_V	1.2.0 \
d64 1
a64 1
RUNTIME_TOOLS_V 1.8.8 \
d67 5
a71 5
SNMP_V          4.22 \
SSL_V           5.0.1 \
STDLIB_V        1.18.1 \
SYNTAX_TOOLS_V  1.6.8 \
TOOLS_V         2.6.7 \
d75 1
a75 1
XMERL_V         1.3.1
d88 1
a88 1
	lang/erlang>=15b.01 \
@


1.2
log
@Don't hardcode gmake, use ${MAKE_PROGRAM}.
Tighten LIB_DEPENDS.
Don't hardcode /usr/local and /etc.

ok jmatthew@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/08/24 07:26:29 jmatthew Exp $
d7 1
a7 1
REVISION=			0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d83 1
a83 1
MAKE_ENV =			MAKE=gmake
d87 1
a87 2
LIB_DEPENDS = devel/nspr \
	databases/leveldb>=1.5.0 \
d91 4
@


1.1.1.1
log
@import riak

Riak combines a decentralized key-value store, a flexible map/reduce engine, 
and a friendly HTTP/JSON query interface to provide a database ideally suited 
for Web applications.

ok dlg@@
@
text
@@
