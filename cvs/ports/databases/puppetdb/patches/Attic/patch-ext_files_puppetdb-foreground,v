head	1.4;
access;
symbols
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	jasper_20132806:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.03.31.09.17.56;	author jasper;	state dead;
branches;
next	1.3;

1.3
date	2014.03.31.08.43.22;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2013.07.01.13.49.00;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2013.06.28.09.13.09;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.06.28.09.13.09;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@simplify patches
@
text
@$OpenBSD: patch-ext_files_puppetdb-foreground,v 1.3 2014/03/31 08:43:22 jasper Exp $
--- ext/files/puppetdb-foreground.orig	Thu Mar 27 00:49:49 2014
+++ ext/files/puppetdb-foreground	Mon Mar 31 09:55:34 2014
@@@@ -1,7 +1,8 @@@@
 #!/bin/bash
 
-. /usr/libexec/puppetdb/puppetdb.env
+#!${LOCALBASE}/bin/bash
 
+JAVA_CMD=$(javaPathHelper -c puppetdb)
 ARGS="$@@"
-
+su _puppetdb -s ${LOCALBASE}/bin/bash -c "${JAVA_CMD} -Xmx192m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/puppetdb/puppetdb-oom.hprof  -jar ${PREFIX}/share/puppetdb/puppetdb.jar services -c ${SYSCONFDIR}/puppetdb/conf.d $ARGS"
 su ${USER} -s /bin/bash -c "${JAVA_BIN} ${JAVA_ARGS} -jar ${INSTALL_DIR}/puppetdb.jar services -c ${CONFIG} ${@@}"
@


1.3
log
@update to puppetdb-1.6.3
@
text
@d1 1
a1 1
$OpenBSD: patch-ext_files_puppetdb-foreground,v 1.2 2013/07/01 13:49:00 jasper Exp $
@


1.2
log
@don't hardcode /etc here.
@
text
@d1 7
a7 5
$OpenBSD: patch-ext_files_puppetdb-foreground,v 1.1.1.1 2013/06/28 09:13:09 jasper Exp $
--- ext/files/puppetdb-foreground.orig	Mon Jun  3 19:13:08 2013
+++ ext/files/puppetdb-foreground	Mon Jul  1 15:45:28 2013
@@@@ -1,4 +1,5 @@@@
-#!/bin/bash
d12 1
a12 1
-su puppetdb -s /bin/bash -c "/usr/bin/java -Xmx192m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/puppetdb/puppetdb-oom.hprof  -jar /usr/share/puppetdb/puppetdb.jar services -c /etc/puppetdb/conf.d $ARGS"
d14 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ ext/files/puppetdb-foreground	Thu Jun 27 19:37:43 2013
d11 1
a11 1
+su _puppetdb -s ${LOCALBASE}/bin/bash -c "${JAVA_CMD} -Xmx192m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/puppetdb/puppetdb-oom.hprof  -jar ${PREFIX}/share/puppetdb/puppetdb.jar services -c /etc/puppetdb/conf.d $ARGS"
@


1.1.1.1
log
@import puppetdb 1.3.2

PuppetDB is the fast, scalable, and reliable data warehouse for Puppet.
It caches data generated by Puppet, and gives you advanced features at
awesome speed with a powerful API.

ok aja@@
@
text
@@
