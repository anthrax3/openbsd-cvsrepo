head	1.2;
access;
symbols
	sthen_20121805:1.1.1.1 sthen:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2012.05.19.08.14.38;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2012.05.18.20.59.13;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.05.18.20.59.13;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove strlcpy patch for tinycdb, the original code is safe and generally
we don't patch for strlcpy in ports any more except in special cases
(though we did when this port was first submitted in 2005 ;-)
@
text
@$OpenBSD: patch-cdb_c,v 1.1 2012/05/18 20:59:13 sthen Exp $
--- cdb.c.orig	Thu Nov  6 23:37:33 2008
+++ cdb.c	Sun Apr 19 15:49:39 2009
@@@@ -392,14 +392,8 @@@@ cmode(char *dbname, char *tmpname, int argc, char **ar
     tmpname = (char*)malloc(strlen(dbname) + 5);
     if (!tmpname)
       error(ENOMEM, "unable to allocate memory");
-    /* OpenBSD compiler complains about strcat() and strcpy() usage,
-     * and suggests to replace them with (non-standard) strlcat() and
-     * strlcpy().  This is silly, since it's obvious that usage of
-     * original str*() routines here is correct.
-     * This is compiler/environment bug, not tinycdb bug, so please
-     * fix it in proper place, and don't send patches to me.  Thank you.
-     */
-    strcat(strcpy(tmpname, dbname), ".tmp");
+    strlcpy(tmpname, dbname, strlen(dbname) + 5);
+    strlcat(tmpname, ".tmp", strlen(dbname) + 5);
   }
   else if (strcmp(tmpname, "-") == 0 || strcmp(tmpname, dbname) == 0)
     tmpname = dbname;
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import ports/databases/tinycdb, from maintainer Christian Rueger, ok okan@@

tinycdb is a small, fast and reliable utility and subroutine library for
creating and reading constant databases. The database structure is tuned
for fast reading.
@
text
@@
