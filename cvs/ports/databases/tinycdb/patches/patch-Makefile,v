head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.12
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.10
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.8
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.4
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.1.1.0.10
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.8
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.6
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.4
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	sthen_20121805:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2014.09.08.17.51.09;	author jca;	state Exp;
branches;
next	1.1;
commitid	qr7yYvfom63eOYeC;

1.1
date	2012.05.18.20.59.13;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.05.18.20.59.13;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Maintainer update to tinycdb-0.78.
- remove most of the makefile patching
- respect DEBUG=-g
- merge PFRAG.shared
Proofreading by sthen@@.
@
text
@$OpenBSD: patch-Makefile,v 1.1.1.1 2012/05/18 20:59:13 sthen Exp $
--- Makefile.orig	Fri May 11 16:17:47 2012
+++ Makefile	Sun Sep  7 21:29:46 2014
@@@@ -87,7 +87,7 @@@@ $(SHAREDLIB): $(LIB_OBJS_PIC) $(LIBMAP)
 	-rm -f $(SOLIB)
 	ln -s $@@ $(SOLIB)
 	$(LD) $(LDFLAGS) $(LDFLAGS_SHARED) -o $@@ \
-	 $(LDFLAGS_SONAME)$(SHAREDLIB) $(LDFLAGS_VSCRIPT)$(LIBMAP) \
+	 $(LDFLAGS_VSCRIPT)$(LIBMAP) \
 	 $(LIB_OBJS_PIC)
 
 cdb: cdb.o $(CDB_USELIB)
@


1.1
log
@Initial revision
@
text
@d1 4
a4 37
$OpenBSD$
--- Makefile.orig	Sat Jan 31 18:12:21 2009
+++ Makefile	Sun Apr 19 15:49:39 2009
@@@@ -7,19 +7,19 @@@@
 
 VERSION = 0.77
 
-prefix=/usr/local
+prefix?=/usr/local
 exec_prefix=$(prefix)
 bindir=$(exec_prefix)/bin
 libdir=$(exec_prefix)/lib
 syslibdir=$(libdir)
-sysconfdir=/etc
+sysconfdir?=/etc
 includedir=$(prefix)/include
 mandir=$(prefix)/man
 NSSCDB_DIR = $(sysconfdir)
 DESTDIR=
 
-CC = cc
-CFLAGS = -O
+CC?= cc
+CFLAGS?= -O
 
 AR = ar
 ARFLAGS = rv
@@@@ -29,7 +29,7 @@@@ NSS_CDB = libnss_cdb.so.2
 LIBBASE = libcdb
 LIB = $(LIBBASE).a
 PICLIB = $(LIBBASE)_pic.a
-SHAREDLIB = $(LIBBASE).so.1
+SHAREDLIB = $(LIBBASE).so.${LIBcdb_VERSION}
 SOLIB = $(LIBBASE).so
 CDB_USELIB = $(LIB)
 NSS_USELIB = $(PICLIB)
@@@@ -85,7 +85,7 @@@@ $(SHAREDLIB): $(LIB_OBJS_PIC) $(LIBMAP)
d7 3
a9 3
 	$(CC) $(CFLAGS) $(CFLAGS_SHARED) -o $@@ \
-	 $(CFLAGS_SONAME)$(SHAREDLIB) $(CFLAGS_VSCRIPT)$(LIBMAP) \
+	 $(CFLAGS_VSCRIPT)$(LIBMAP) \
a12 19
@@@@ -137,7 +137,7 @@@@ do_install = \
  done
 
 install-all: all $(INSTALLPROG)
-	set -- \
+	@@set -- \
 	 cdb.h 644 $(includedir) - \
 	 cdb.3 644 $(mandir)/man3 - \
 	 cdb.1 644 $(mandir)/man1 - \
@@@@ -152,8 +152,7 @@@@ install-nss: nss
 	$(do_install)
 install-sharedlib: sharedlib
 	@@set -- $(SHAREDLIB) 644 $(libdir) - ; \
-	$(do_install) ; \
-	ln -sf $(SHAREDLIB) $(DESTDIR)$(libdir)/$(LIBBASE).so
+	$(do_install)
 install-piclib: piclib
 	@@set -- $(PICLIB) 644 $(libdir) - ; \
 	$(do_install)
@


1.1.1.1
log
@import ports/databases/tinycdb, from maintainer Christian Rueger, ok okan@@

tinycdb is a small, fast and reliable utility and subroutine library for
creating and reading constant databases. The database structure is tuned
for fast reading.
@
text
@@
