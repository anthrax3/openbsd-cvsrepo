head	1.8;
access;
symbols
	OPENBSD_6_2:1.8.0.8
	OPENBSD_6_2_BASE:1.8
	OPENBSD_6_1:1.8.0.6
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.8.0.4
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.2
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.6.0.6
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.2
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	brad_20130404:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2015.10.31.19.40.43;	author sthen;	state Exp;
branches;
next	1.7;
commitid	XTFWdHZ018lNCSDx;

1.7
date	2015.10.29.09.55.18;	author sthen;	state Exp;
branches;
next	1.6;
commitid	RTsXGBMB2yYq9sEg;

1.6
date	2014.08.19.16.42.40;	author brad;	state Exp;
branches
	1.6.6.1;
next	1.5;
commitid	zAgOCWfMzKXUVZ5C;

1.5
date	2014.06.19.23.04.42;	author brad;	state Exp;
branches;
next	1.4;
commitid	C0rBAxANedzRXFw9;

1.4
date	2014.03.11.09.27.45;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2014.03.10.01.13.34;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2013.11.30.20.37.20;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.04.18.58.45;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.04.18.58.45;	author brad;	state Exp;
branches;
next	;

1.6.6.1
date	2015.12.09.13.01.00;	author jasper;	state Exp;
branches;
next	;
commitid	lEtjzO7YUttFjLZu;


desc
@@


1.8
log
@Backout the MariaDB update, it has issues on too many arch at present,
Brad (maintainer) agrees.  Bump EPOCH/lib versions to raise them above the
updated versions.
@
text
@$OpenBSD: patch-cmake_install_macros_cmake,v 1.6 2014/08/19 16:42:40 brad Exp $
--- cmake/install_macros.cmake.orig	Fri Aug  8 18:13:47 2014
+++ cmake/install_macros.cmake	Mon Aug 11 17:35:30 2014
@@@@ -198,6 +198,36 @@@@ IF(UNIX)
 ENDIF()
 ENDMACRO()
 
+MACRO(INSTALL_VERSIONED_SYMLINK linkname target destination component)
+IF(UNIX)
+  GET_TARGET_PROPERTY(location ${target} LOCATION)
+  GET_TARGET_PROPERTY(version ${target} VERSION)
+  GET_FILENAME_COMPONENT(path ${location} PATH)
+  GET_FILENAME_COMPONENT(name ${location} NAME)
+  SET(output ${path}/${linkname})
+  ADD_CUSTOM_COMMAND(
+    OUTPUT ${output}
+    COMMAND ${CMAKE_COMMAND} ARGS -E remove -f ${output}
+    COMMAND ${CMAKE_COMMAND} ARGS -E create_symlink
+      ${name}.${version}
+      ${linkname}
+    WORKING_DIRECTORY ${path}
+    DEPENDS ${target}
+    )
+
+  ADD_CUSTOM_TARGET(symlink_${linkname}
+    ALL
+    DEPENDS ${output})
+  SET_TARGET_PROPERTIES(symlink_${linkname} PROPERTIES CLEAN_DIRECT_OUTPUT 1)
+  IF(CMAKE_GENERATOR MATCHES "Xcode")
+    # For Xcode, replace project config with install config
+    STRING(REPLACE "${CMAKE_CFG_INTDIR}"
+      "\${CMAKE_INSTALL_CONFIG_NAME}" output ${output})
+  ENDIF()
+  INSTALL(FILES ${output} DESTINATION ${destination} COMPONENT ${component})
+ENDIF()
+ENDMACRO()
+
 IF(WIN32)
   OPTION(SIGNCODE "Sign executables and dlls with digital certificate" OFF)
   MARK_AS_ADVANCED(SIGNCODE)
@


1.7
log
@update to MariaDB-10.1.8, from giovanni@@ and Brad, ok giovanni
@
text
@d2 3
a4 3
--- cmake/install_macros.cmake.orig	Thu Oct 15 11:43:36 2015
+++ cmake/install_macros.cmake	Sat Oct 24 20:35:22 2015
@@@@ -192,6 +192,36 @@@@ IF(UNIX)
@


1.6
log
@Update to MariaDB 10.0.13.

ok giovanni@@
@
text
@d1 4
a4 4
$OpenBSD: patch-cmake_install_macros_cmake,v 1.5 2014/06/19 23:04:42 brad Exp $
--- cmake/install_macros.cmake.orig	Fri Aug  8 18:13:47 2014
+++ cmake/install_macros.cmake	Mon Aug 11 17:35:30 2014
@@@@ -198,6 +198,36 @@@@ IF(UNIX)
@


1.6.6.1
log
@security update to 10.0.22

https://mariadb.com/kb/en/mariadb/mariadb-10022-release-notes/

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-cmake_install_macros_cmake,v 1.8 2015/10/31 19:40:43 sthen Exp $
@


1.5
log
@Update to MariaDB 10.0.12.

ok giovanni@@
@
text
@d1 4
a4 4
$OpenBSD: patch-cmake_install_macros_cmake,v 1.4 2014/03/11 09:27:45 brad Exp $
--- cmake/install_macros.cmake.orig	Sat May 10 18:36:18 2014
+++ cmake/install_macros.cmake	Mon May 12 21:04:57 2014
@@@@ -196,6 +196,36 @@@@ IF(UNIX)
@


1.4
log
@Update to MariaDB 10.0.9.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-cmake_install_macros_cmake,v 1.3 2014/03/10 01:13:34 brad Exp $
--- cmake/install_macros.cmake.orig	Sat Mar  8 07:41:32 2014
+++ cmake/install_macros.cmake	Mon Mar 10 18:15:31 2014
@@@@ -192,6 +192,36 @@@@ IF(UNIX)
@


1.3
log
@Update to MariaDB 10.0.8.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-cmake_install_macros_cmake,v 1.2 2013/11/30 20:37:20 brad Exp $
--- cmake/install_macros.cmake.orig	Mon Feb 10 15:40:19 2014
+++ cmake/install_macros.cmake	Mon Feb 10 22:30:13 2014
@@@@ -222,6 +222,36 @@@@ IF(UNIX)
@


1.2
log
@Update to MariaDB 5.5.34.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-cmake_install_macros_cmake,v 1.1.1.1 2013/04/04 18:58:45 brad Exp $
--- cmake/install_macros.cmake.orig	Thu Sep 19 18:34:25 2013
+++ cmake/install_macros.cmake	Sat Sep 21 22:00:58 2013
@@@@ -192,6 +192,36 @@@@ IF(UNIX)
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- cmake/install_macros.cmake.orig	Tue Jan 29 09:12:46 2013
+++ cmake/install_macros.cmake	Thu Feb 14 22:14:02 2013
@@@@ -162,6 +162,36 @@@@ IF(UNIX)
@


1.1.1.1
log
@Import of MariaDB.

MariaDB is a multi-threaded SQL database with a command syntax very similar
to mSQL.

ok sthen@@ giovanni@@
@
text
@@
