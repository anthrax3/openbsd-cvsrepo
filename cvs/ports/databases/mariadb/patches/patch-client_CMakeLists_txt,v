head	1.7;
access;
symbols
	OPENBSD_6_1:1.6.0.6
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.4
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	brad_20130404:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2017.04.24.08.47.58;	author sthen;	state Exp;
branches;
next	1.6;
commitid	EryWj4TNPTmEMPDn;

1.6
date	2015.12.08.16.15.23;	author sthen;	state Exp;
branches
	1.6.4.1
	1.6.6.1;
next	1.5;
commitid	VmnJPsxZfrUOlN1p;

1.5
date	2015.10.31.19.40.43;	author sthen;	state Exp;
branches;
next	1.4;
commitid	XTFWdHZ018lNCSDx;

1.4
date	2015.10.29.09.55.18;	author sthen;	state Exp;
branches;
next	1.3;
commitid	RTsXGBMB2yYq9sEg;

1.3
date	2014.03.11.09.27.45;	author brad;	state Exp;
branches
	1.3.8.1;
next	1.2;

1.2
date	2014.01.11.19.28.40;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2013.04.04.18.58.44;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.04.04.18.58.44;	author brad;	state Exp;
branches;
next	;

1.3.8.1
date	2015.12.09.13.01.00;	author jasper;	state Exp;
branches;
next	;
commitid	lEtjzO7YUttFjLZu;

1.6.4.1
date	2017.08.30.16.50.29;	author sthen;	state Exp;
branches;
next	;
commitid	0EyBh1Z32txg7vKY;

1.6.6.1
date	2017.08.30.20.54.57;	author sthen;	state Exp;
branches;
next	;
commitid	0P8MrvWCMwZVxnIB;


desc
@@


1.7
log
@Add ${SSL_LIBRARIES} to our patches that change client/test binaries to
being dynamically linked. Fix with lld. ok Brad
@
text
@$OpenBSD: patch-client_CMakeLists_txt,v 1.6 2015/12/08 16:15:23 sthen Exp $
--- client/CMakeLists.txt.orig	Mon Mar  6 20:04:29 2017
+++ client/CMakeLists.txt	Sun Apr 23 20:58:10 2017
@@@@ -32,7 +32,7 @@@@ COPY_OPENSSL_DLLS(copy_openssl_client)
 ADD_DEFINITIONS(${SSL_DEFINES})
 MYSQL_ADD_EXECUTABLE(mysql completion_hash.cc mysql.cc readline.cc
                            ${CMAKE_SOURCE_DIR}/sql/sql_string.cc)
-TARGET_LINK_LIBRARIES(mysql mysqlclient)
+TARGET_LINK_LIBRARIES(mysql clientlib libmysql mysys ${SSL_LIBRARIES})
 IF(UNIX)
   TARGET_LINK_LIBRARIES(mysql ${MY_READLINE_LIBRARY})
   SET_TARGET_PROPERTIES(mysql PROPERTIES ENABLE_EXPORTS TRUE)
@@@@ -40,39 +40,39 @@@@ ENDIF(UNIX)
 
 MYSQL_ADD_EXECUTABLE(mysqltest mysqltest.cc COMPONENT Test)
 SET_SOURCE_FILES_PROPERTIES(mysqltest.cc PROPERTIES COMPILE_FLAGS "-DTHREADS")
-TARGET_LINK_LIBRARIES(mysqltest mysqlclient pcre pcreposix)
+TARGET_LINK_LIBRARIES(mysqltest clientlib libmysql mysys pcre pcreposix ${SSL_LIBRARIES})
 SET_TARGET_PROPERTIES(mysqltest PROPERTIES ENABLE_EXPORTS TRUE)
 
 
 MYSQL_ADD_EXECUTABLE(mysqlcheck mysqlcheck.c)
-TARGET_LINK_LIBRARIES(mysqlcheck mysqlclient)
+TARGET_LINK_LIBRARIES(mysqlcheck clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysqldump mysqldump.c ../sql-common/my_user.c)
-TARGET_LINK_LIBRARIES(mysqldump mysqlclient)
+TARGET_LINK_LIBRARIES(mysqldump clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysqlimport mysqlimport.c)
 SET_SOURCE_FILES_PROPERTIES(mysqlimport.c PROPERTIES COMPILE_FLAGS "-DTHREADS")
-TARGET_LINK_LIBRARIES(mysqlimport mysqlclient)
+TARGET_LINK_LIBRARIES(mysqlimport clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysql_upgrade mysql_upgrade.c COMPONENT Server)
-TARGET_LINK_LIBRARIES(mysql_upgrade mysqlclient)
+TARGET_LINK_LIBRARIES(mysql_upgrade clientlib libmysql mysys ${SSL_LIBRARIES})
 ADD_DEPENDENCIES(mysql_upgrade GenFixPrivs)
 
 MYSQL_ADD_EXECUTABLE(mysqlshow mysqlshow.c)
-TARGET_LINK_LIBRARIES(mysqlshow mysqlclient)
+TARGET_LINK_LIBRARIES(mysqlshow clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysql_plugin mysql_plugin.c)
-TARGET_LINK_LIBRARIES(mysql_plugin mysqlclient)
+TARGET_LINK_LIBRARIES(mysql_plugin clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysqlbinlog mysqlbinlog.cc)
-TARGET_LINK_LIBRARIES(mysqlbinlog mysqlclient)
+TARGET_LINK_LIBRARIES(mysqlbinlog clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysqladmin mysqladmin.cc)
-TARGET_LINK_LIBRARIES(mysqladmin mysqlclient)
+TARGET_LINK_LIBRARIES(mysqladmin clientlib libmysql mysys ${SSL_LIBRARIES})
 
 MYSQL_ADD_EXECUTABLE(mysqlslap mysqlslap.c)
 SET_SOURCE_FILES_PROPERTIES(mysqlslap.c PROPERTIES COMPILE_FLAGS "-DTHREADS")
-TARGET_LINK_LIBRARIES(mysqlslap mysqlclient)
+TARGET_LINK_LIBRARIES(mysqlslap clientlib libmysql mysys ${SSL_LIBRARIES})
 
 # "WIN32" also covers 64 bit. "echo" is used in some files below "mysql-test/".
 IF(WIN32)
@@@@ -81,7 +81,7 @@@@ ENDIF(WIN32)
 
 # async_example is just a code example, do not install it.
 ADD_EXECUTABLE(async_example async_example.c)
-TARGET_LINK_LIBRARIES(async_example mysqlclient)
+TARGET_LINK_LIBRARIES(async_example clientlib libmysql mysys ${SSL_LIBRARIES})
 
 SET_TARGET_PROPERTIES (mysqlcheck mysqldump mysqlimport mysql_upgrade mysqlshow mysqlslap mysql_plugin async_example
 PROPERTIES HAS_CXX TRUE)
@


1.6
log
@update to MariaDB-10.0.22, from Brad (sorry for the belated commit).
https://mariadb.com/kb/en/mariadb/mariadb-10022-release-notes/

CVE-2015-4802	CVE-2015-4807	CVE-2015-4815
CVE-2015-4826	CVE-2015-4830	CVE-2015-4836
CVE-2015-4858	CVE-2015-4861	CVE-2015-4870
CVE-2015-4913	CVE-2015-4792
@
text
@d1 3
a3 3
$OpenBSD: patch-client_CMakeLists_txt,v 1.5 2015/10/31 19:40:43 sthen Exp $
--- client/CMakeLists.txt.orig	Thu Oct 15 11:43:35 2015
+++ client/CMakeLists.txt	Sat Oct 24 23:32:55 2015
d9 1
a9 1
+TARGET_LINK_LIBRARIES(mysql clientlib libmysql mysys)
d18 1
a18 1
+TARGET_LINK_LIBRARIES(mysqltest clientlib libmysql mysys pcre pcreposix)
d24 1
a24 1
+TARGET_LINK_LIBRARIES(mysqlcheck clientlib libmysql mysys)
d28 1
a28 1
+TARGET_LINK_LIBRARIES(mysqldump clientlib libmysql mysys)
d33 1
a33 1
+TARGET_LINK_LIBRARIES(mysqlimport clientlib libmysql mysys)
d37 1
a37 1
+TARGET_LINK_LIBRARIES(mysql_upgrade clientlib libmysql mysys)
d42 1
a42 1
+TARGET_LINK_LIBRARIES(mysqlshow clientlib libmysql mysys)
d46 1
a46 1
+TARGET_LINK_LIBRARIES(mysql_plugin clientlib libmysql mysys)
d50 1
a50 1
+TARGET_LINK_LIBRARIES(mysqlbinlog clientlib libmysql mysys)
d54 1
a54 1
+TARGET_LINK_LIBRARIES(mysqladmin clientlib libmysql mysys)
d59 1
a59 1
+TARGET_LINK_LIBRARIES(mysqlslap clientlib libmysql mysys)
d68 1
a68 1
+TARGET_LINK_LIBRARIES(async_example clientlib libmysql mysys)
@


1.6.6.1
log
@update to MariaDB 10.0.32, from Brad

CVE-2017-3308, CVE-2017-3309, CVE-2017-3453, CVE-2017-3456, CVE-2017-3464,
CVE-2017-3636, CVE-2017-3641, CVE-2017-3653

(committing to the right -stable branch this time - spotted by Brad).
@
text
@d1 3
a3 3
$OpenBSD: patch-client_CMakeLists_txt,v 1.6 2015/12/08 16:15:23 sthen Exp $
--- client/CMakeLists.txt.orig	Mon Mar  6 20:04:29 2017
+++ client/CMakeLists.txt	Sun Apr 23 20:58:10 2017
d9 1
a9 1
+TARGET_LINK_LIBRARIES(mysql clientlib libmysql mysys ${SSL_LIBRARIES})
d18 1
a18 1
+TARGET_LINK_LIBRARIES(mysqltest clientlib libmysql mysys pcre pcreposix ${SSL_LIBRARIES})
d24 1
a24 1
+TARGET_LINK_LIBRARIES(mysqlcheck clientlib libmysql mysys ${SSL_LIBRARIES})
d28 1
a28 1
+TARGET_LINK_LIBRARIES(mysqldump clientlib libmysql mysys ${SSL_LIBRARIES})
d33 1
a33 1
+TARGET_LINK_LIBRARIES(mysqlimport clientlib libmysql mysys ${SSL_LIBRARIES})
d37 1
a37 1
+TARGET_LINK_LIBRARIES(mysql_upgrade clientlib libmysql mysys ${SSL_LIBRARIES})
d42 1
a42 1
+TARGET_LINK_LIBRARIES(mysqlshow clientlib libmysql mysys ${SSL_LIBRARIES})
d46 1
a46 1
+TARGET_LINK_LIBRARIES(mysql_plugin clientlib libmysql mysys ${SSL_LIBRARIES})
d50 1
a50 1
+TARGET_LINK_LIBRARIES(mysqlbinlog clientlib libmysql mysys ${SSL_LIBRARIES})
d54 1
a54 1
+TARGET_LINK_LIBRARIES(mysqladmin clientlib libmysql mysys ${SSL_LIBRARIES})
d59 1
a59 1
+TARGET_LINK_LIBRARIES(mysqlslap clientlib libmysql mysys ${SSL_LIBRARIES})
d68 1
a68 1
+TARGET_LINK_LIBRARIES(async_example clientlib libmysql mysys ${SSL_LIBRARIES})
@


1.6.4.1
log
@update to MariaDB 10.0.32

CVE-2017-3308, CVE-2017-3309, CVE-2017-3453, CVE-2017-3456, CVE-2017-3464,
CVE-2017-3636, CVE-2017-3641, CVE-2017-3653
@
text
@d1 3
a3 3
$OpenBSD: patch-client_CMakeLists_txt,v 1.6 2015/12/08 16:15:23 sthen Exp $
--- client/CMakeLists.txt.orig	Mon Mar  6 20:04:29 2017
+++ client/CMakeLists.txt	Sun Apr 23 20:58:10 2017
d9 1
a9 1
+TARGET_LINK_LIBRARIES(mysql clientlib libmysql mysys ${SSL_LIBRARIES})
d18 1
a18 1
+TARGET_LINK_LIBRARIES(mysqltest clientlib libmysql mysys pcre pcreposix ${SSL_LIBRARIES})
d24 1
a24 1
+TARGET_LINK_LIBRARIES(mysqlcheck clientlib libmysql mysys ${SSL_LIBRARIES})
d28 1
a28 1
+TARGET_LINK_LIBRARIES(mysqldump clientlib libmysql mysys ${SSL_LIBRARIES})
d33 1
a33 1
+TARGET_LINK_LIBRARIES(mysqlimport clientlib libmysql mysys ${SSL_LIBRARIES})
d37 1
a37 1
+TARGET_LINK_LIBRARIES(mysql_upgrade clientlib libmysql mysys ${SSL_LIBRARIES})
d42 1
a42 1
+TARGET_LINK_LIBRARIES(mysqlshow clientlib libmysql mysys ${SSL_LIBRARIES})
d46 1
a46 1
+TARGET_LINK_LIBRARIES(mysql_plugin clientlib libmysql mysys ${SSL_LIBRARIES})
d50 1
a50 1
+TARGET_LINK_LIBRARIES(mysqlbinlog clientlib libmysql mysys ${SSL_LIBRARIES})
d54 1
a54 1
+TARGET_LINK_LIBRARIES(mysqladmin clientlib libmysql mysys ${SSL_LIBRARIES})
d59 1
a59 1
+TARGET_LINK_LIBRARIES(mysqlslap clientlib libmysql mysys ${SSL_LIBRARIES})
d68 1
a68 1
+TARGET_LINK_LIBRARIES(async_example clientlib libmysql mysys ${SSL_LIBRARIES})
@


1.5
log
@Backout the MariaDB update, it has issues on too many arch at present,
Brad (maintainer) agrees.  Bump EPOCH/lib versions to raise them above the
updated versions.
@
text
@d1 3
a3 3
$OpenBSD: patch-client_CMakeLists_txt,v 1.3 2014/03/11 09:27:45 brad Exp $
--- client/CMakeLists.txt.orig	Sat Mar  8 07:41:47 2014
+++ client/CMakeLists.txt	Mon Mar 10 18:15:31 2014
d13 1
a13 1
@@@@ -40,38 +40,38 @@@@ ENDIF(UNIX)
d31 1
d63 1
a63 1
@@@@ -80,7 +80,7 @@@@ ENDIF(WIN32)
@


1.4
log
@update to MariaDB-10.1.8, from giovanni@@ and Brad, ok giovanni
@
text
@d2 2
a3 2
--- client/CMakeLists.txt.orig	Thu Oct 15 11:43:35 2015
+++ client/CMakeLists.txt	Sat Oct 24 23:32:55 2015
d13 1
a13 1
@@@@ -40,39 +40,39 @@@@ ENDIF(UNIX)
a30 1
 SET_SOURCE_FILES_PROPERTIES(mysqlimport.c PROPERTIES COMPILE_FLAGS "-DTHREADS")
d62 1
a62 1
@@@@ -81,7 +81,7 @@@@ ENDIF(WIN32)
@


1.3
log
@Update to MariaDB 10.0.9.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-client_CMakeLists_txt,v 1.2 2014/01/11 19:28:40 brad Exp $
--- client/CMakeLists.txt.orig	Sat Mar  8 07:41:47 2014
+++ client/CMakeLists.txt	Mon Mar 10 18:15:31 2014
d13 1
a13 1
@@@@ -40,38 +40,38 @@@@ ENDIF(UNIX)
d31 1
d63 1
a63 1
@@@@ -80,7 +80,7 @@@@ ENDIF(WIN32)
@


1.3.8.1
log
@security update to 10.0.22

https://mariadb.com/kb/en/mariadb/mariadb-10022-release-notes/

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-client_CMakeLists_txt,v 1.6 2015/12/08 16:15:23 sthen Exp $
--- client/CMakeLists.txt.orig	Thu Oct 15 11:43:35 2015
+++ client/CMakeLists.txt	Sat Oct 24 23:32:55 2015
d13 1
a13 1
@@@@ -40,39 +40,39 @@@@ ENDIF(UNIX)
a30 1
 SET_SOURCE_FILES_PROPERTIES(mysqlimport.c PROPERTIES COMPILE_FLAGS "-DTHREADS")
d62 1
a62 1
@@@@ -81,7 +81,7 @@@@ ENDIF(WIN32)
@


1.2
log
@Update to MariaDB 10.0.7. This is the last beta release and it is
feature complete; the next release will be RC and then a GA.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-client_CMakeLists_txt,v 1.1.1.1 2013/04/04 18:58:44 brad Exp $
--- client/CMakeLists.txt.orig	Mon Dec 23 04:35:04 2013
+++ client/CMakeLists.txt	Fri Dec 27 19:27:25 2013
@@@@ -33,7 +33,7 @@@@ COPY_OPENSSL_DLLS(copy_openssl_client)
d13 1
a13 1
@@@@ -41,38 +41,38 @@@@ ENDIF(UNIX)
d62 1
a62 1
@@@@ -81,7 +81,7 @@@@ ENDIF(WIN32)
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- client/CMakeLists.txt.orig	Tue Jan 29 09:12:49 2013
+++ client/CMakeLists.txt	Thu Feb 14 22:14:16 2013
@@@@ -28,7 +28,7 @@@@ INCLUDE_DIRECTORIES(
d13 1
a13 1
@@@@ -36,38 +36,38 @@@@ ENDIF(UNIX)
d17 2
a18 2
-TARGET_LINK_LIBRARIES(mysqltest mysqlclient regex)
+TARGET_LINK_LIBRARIES(mysqltest clientlib libmysql mysys regex)
d62 1
a62 1
@@@@ -76,7 +76,7 @@@@ ENDIF(WIN32)
d69 1
a69 1
 SET_TARGET_PROPERTIES (mysqlcheck mysqldump mysqlimport mysql_upgrade mysqlshow mysqlslap mysql_plugin 
@


1.1.1.1
log
@Import of MariaDB.

MariaDB is a multi-threaded SQL database with a command syntax very similar
to mSQL.

ok sthen@@ giovanni@@
@
text
@@
