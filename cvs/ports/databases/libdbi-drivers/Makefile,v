head	1.33;
access;
symbols
	OPENBSD_6_2:1.33.0.2
	OPENBSD_6_2_BASE:1.33
	OPENBSD_6_1:1.29.0.2
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.24.0.2
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.20.0.6
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.19.0.2
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.18.0.4
	OPENBSD_5_5_BASE:1.18
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.14.0.4
	OPENBSD_5_3_BASE:1.14
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.1.0.2
	OPENBSD_4_6_BASE:1.1.1.1
	merdely_20090601:1.1.1.1
	merdely:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2017.07.26.22.45.16;	author sthen;	state Exp;
branches;
next	1.32;
commitid	tD4MFrpYYDDL2UFT;

1.32
date	2017.07.16.19.18.49;	author espie;	state Exp;
branches;
next	1.31;
commitid	tt0GhWK5c4uf9ILG;

1.31
date	2017.06.03.16.24.05;	author steven;	state Exp;
branches;
next	1.30;
commitid	zADqCxDWIwlJlvl7;

1.30
date	2017.04.10.11.45.24;	author sthen;	state Exp;
branches;
next	1.29;
commitid	XDh1zlSBq0boKsHk;

1.29
date	2017.02.18.17.33.51;	author ajacoutot;	state Exp;
branches;
next	1.28;
commitid	kjw4RQ4AAUYktD89;

1.28
date	2017.02.18.17.32.37;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	bw6Y0vDo3oixdVWL;

1.27
date	2016.11.08.21.56.38;	author sthen;	state Exp;
branches;
next	1.26;
commitid	svBy3m5qWIYQmu5z;

1.26
date	2016.11.08.21.53.16;	author sthen;	state Exp;
branches;
next	1.25;
commitid	4dibJeZunzEGIeW6;

1.25
date	2016.09.23.09.16.53;	author sthen;	state Exp;
branches;
next	1.24;
commitid	XLnI6AbHAmyVU5mO;

1.24
date	2016.07.06.21.28.49;	author sthen;	state Exp;
branches;
next	1.23;
commitid	Hsa3jmAzBbJV4miX;

1.23
date	2016.03.19.10.24.33;	author sthen;	state Exp;
branches;
next	1.22;
commitid	39NhBuv3ul42n3XP;

1.22
date	2015.10.29.18.25.31;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	rGJEna4pjYRz5tyg;

1.21
date	2015.08.17.20.34.20;	author sthen;	state Exp;
branches;
next	1.20;
commitid	60BvOqUl7gD2yB7y;

1.20
date	2014.09.13.18.09.20;	author brad;	state Exp;
branches;
next	1.19;
commitid	PpbRjVZdAmlrmi8q;

1.19
date	2014.04.21.23.30.36;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.06.12.20.36.33;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2013.05.25.00.33.09;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.21.08.45.14;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2013.03.11.02.52.05;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2012.05.11.10.02.31;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2012.04.24.19.09.04;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2012.04.23.17.15.17;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2012.04.16.15.42.56;	author nigel;	state Exp;
branches;
next	1.10;

1.10
date	2011.11.04.08.16.24;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2011.09.16.08.48.03;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2011.07.10.10.17.14;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2011.07.06.22.56.23;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.04.15.16.10.38;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.04.12.11.16.35;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.15.00.22.51;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.06.22.50.02;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2009.08.14.17.56.16;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.06.02.00.58.58;	author merdely;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.06.02.00.58.58;	author merdely;	state Exp;
branches;
next	;


desc
@@


1.33
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.32 2017/07/16 19:18:49 espie Exp $

V =			0.9.0
COMMENT-main =		mysql driver for libdbi
COMMENT-pgsql =		pgsql driver for libdbi
COMMENT-sqlite =	sqlite driver for libdbi
COMMENT-sqlite3 =	sqlite3 driver for libdbi
COMMENT-freetds =	freetds driver for libdbi
DISTNAME =		libdbi-drivers-$V
PKGNAME-main =		libdbi-drivers-mysql-${V:S/-/./}
PKGNAME-pgsql =		libdbi-drivers-pgsql-${V:S/-/./}
PKGNAME-sqlite =	libdbi-drivers-sqlite-${V:S/-/./}
PKGNAME-sqlite3 =	libdbi-drivers-sqlite3-${V:S/-/./}
PKGNAME-freetds =	libdbi-drivers-freetds-${V:S/-/./}
CATEGORIES =		databases
REVISION-freetds =	0
REVISION-main =		0
REVISION-pgsql =	0
REVISION-sqlite =	0
REVISION-sqlite3 =	0

HOMEPAGE =		http://libdbi-drivers.sourceforge.net/
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=libdbi-drivers/}

MULTI_PACKAGES =	-main -pgsql -sqlite -sqlite3 -freetds

# LGPLv2.1
PERMIT_PACKAGE_CDROM =	Yes

CONFIGURE_STYLE =	gnu

CONFIGURE_ARGS =	--disable-docs \
			--with-dbi-incdir=${LOCALBASE}/include \
			--with-dbi-libdir=${LOCALBASE}/lib \
			--with-mysql \
			--with-pgsql \
			--with-pgsql-incdir="${LOCALBASE}/include -I${LOCALBASE}/include/postgresql" \
			--with-pgsql-libdir=${LOCALBASE}/lib/postgresql \
			--with-sqlite \
			--with-sqlite-incdir=${LOCALBASE}/include \
			--with-sqlite-libdir=${LOCALBASE}/lib \
			--with-sqlite3 \
			--with-sqlite3-incdir=${LOCALBASE}/include \
			--with-sqlite3-libdir=${LOCALBASE}/lib \
			--with-freetds \
			--with-freetds-incdir=${LOCALBASE}/include \
			--with-freetds-libdir=${LOCALBASE}/lib

WANTLIB-main =		crypto m pthread ssl ${COMPILER_LIBCXX} z mysqlclient dbi
LIB_DEPENDS-main =	databases/mariadb \
			databases/libdbi
RUN_DEPENDS-main =

WANTLIB-pgsql =		m pq dbi crypto ssl
LIB_DEPENDS-pgsql =	databases/postgresql \
			databases/libdbi
RUN_DEPENDS-pgsql =

WANTLIB-sqlite =	m sqlite dbi
LIB_DEPENDS-sqlite =	databases/sqlite \
			databases/libdbi
RUN_DEPENDS-sqlite =

WANTLIB-sqlite3 =	m pthread sqlite3 dbi
LIB_DEPENDS-sqlite3 =	databases/libdbi \
			databases/sqlite3
RUN_DEPENDS-sqlite3 =

WANTLIB-freetds =	ct dbi iconv m pthread ffi gcrypt gmp gnutls
WANTLIB-freetds +=	gpg-error hogweed idn2 intl nettle p11-kit tasn1 z
WANTLIB-freetds +=	unistring

LIB_DEPENDS-freetds =	databases/freetds \
			databases/libdbi

TEST_IS_INTERACTIVE =Yes
TEST_DEPENDS =	databases/libdbi-drivers,-main \
			databases/libdbi-drivers,-pgsql \
			databases/libdbi-drivers,-sqlite \
			databases/libdbi-drivers,-sqlite3 \
			databases/libdbi-drivers,-freetds \
			databases/mariadb,-server \
			databases/postgresql,-server

pre-configure:
	chmod +x ${WRKSRC}/tests/test_freetds.sh	

post-install:
.for d in mysql pgsql sqlite sqlite3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/libdbi-drivers/dbd_${d}
	${INSTALL_DATA} ${WRKSRC}/drivers/${d}/dbd_${d}.pdf \
		${PREFIX}/share/doc/libdbi-drivers
	${INSTALL_DATA} ${WRKSRC}/drivers/${d}/dbd_${d}/*.html \
		${PREFIX}/share/doc/libdbi-drivers/dbd_${d}
.endfor

.include <bsd.port.mk>
@


1.32
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2017/06/03 16:24:05 steven Exp $
d16 5
@


1.31
log
@update to 0.9.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2017/04/10 11:45:24 sthen Exp $
d44 1
a44 1
WANTLIB-main =		crypto m pthread ssl ${LIBCXX} z mysqlclient dbi
@


1.30
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2017/02/18 17:33:51 ajacoutot Exp $
d3 1
a3 2
V =			0.8.3-1
REVISION =		12
d28 1
d35 2
d38 2
d66 1
d76 6
a81 1
			databases/libdbi-drivers,-freetds
@


1.29
log
@Missed bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/02/18 17:32:37 ajacoutot Exp $
d40 1
a40 1
WANTLIB-main =		crypto m pthread ssl stdc++ z mysqlclient dbi
@


1.28
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/11/08 21:56:38 sthen Exp $
d4 1
a4 1
REVISION =		11
@


1.27
log
@sync WANTLIB-freetds, chasing old move of freetds to gnutls
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/11/08 21:53:16 sthen Exp $
d61 1
a61 1
WANTLIB-freetds +=	gpg-error hogweed idn intl nettle p11-kit tasn1 z
@


1.26
log
@WANTLIB += pthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/09/23 09:16:53 sthen Exp $
d4 1
a4 2
REVISION =		9
REVISION-sqlite3 =	11
d60 3
a62 1
WANTLIB-freetds =	crypto ct dbi iconv m pthread ssl
@


1.25
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/07/06 21:28:49 sthen Exp $
d5 1
a5 1
REVISION-sqlite3 =	10
d56 1
a56 1
WANTLIB-sqlite3 =	m sqlite3 dbi
@


1.24
log
@sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/03/19 10:24:33 sthen Exp $
d5 1
d57 2
a58 1
LIB_DEPENDS-sqlite3 =	databases/libdbi
@


1.23
log
@merge PFRAG.shared-*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/10/29 18:25:31 ajacoutot Exp $
d4 1
a4 1
REVISION =		8
a25 3
MODULES =		devel/gettext


d59 1
a59 1
WANTLIB-freetds =	crypto ct dbi m pthread ssl ${MODGETTEXT_WANTLIB}
@


1.22
log
@Remove merdely@@ from MAINTAINER; email bounces.
(skipping freerdp because I am working on an updated for it)

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/08/17 20:34:20 sthen Exp $
d4 1
a11 1
REVISION-main =		6
a12 1
REVISION-pgsql =	4
a13 1
REVISION-sqlite =	1
a14 1
REVISION-sqlite3 =	3
a15 1
REVISION-freetds =	7
@


1.21
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/09/13 18:09:20 brad Exp $
d11 1
a11 1
REVISION-main =		5
d13 1
a13 1
REVISION-pgsql =	3
d15 1
a15 1
REVISION-sqlite =	0
d17 1
a17 1
REVISION-sqlite3 =	2
d19 1
a19 1
REVISION-freetds =	6
a23 2

MAINTAINER =		Michael Erdely <merdely@@openbsd.org>
@


1.20
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/04/21 23:30:36 sthen Exp $
d11 1
a11 1
REVISION-main =		4
d19 1
a19 1
REVISION-freetds =	5
d49 1
a49 1
WANTLIB-main =		crypto m ssl z mysqlclient dbi
d68 1
a68 1
WANTLIB-freetds =	crypto ct dbi m ssl ${MODGETTEXT_WANTLIB}
@


1.19
log
@zap com_err in pgsql WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/06/12 20:36:33 brad Exp $
d11 1
a11 1
REVISION-main =		3
d50 1
a50 1
LIB_DEPENDS-main =	databases/mysql \
@


1.18
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/05/25 00:33:09 brad Exp $
d13 1
a13 1
REVISION-pgsql =	2
d54 1
a54 1
WANTLIB-pgsql =		m pq dbi com_err crypto ssl
@


1.17
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/21 08:45:14 ajacoutot Exp $
d11 1
a11 1
REVISION-main =		2
d50 1
a50 1
LIB_DEPENDS-main =	databases/mariadb \
@


1.16
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/03/11 02:52:05 espie Exp $
d11 1
a11 1
REVISION-main =		1
d50 1
a50 1
LIB_DEPENDS-main =	databases/mysql \
@


1.15
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/05/11 10:02:31 sthen Exp $
a33 1
USE_LIBTOOL =		Yes
@


1.14
log
@sync WANTLIB for freetds subpackage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/04/24 19:09:04 naddy Exp $
a30 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d73 2
a74 2
REGRESS_IS_INTERACTIVE =Yes
REGRESS_DEPENDS =	databases/libdbi-drivers,-main \
@


1.13
log
@missed bump after sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/04/23 17:15:17 espie Exp $
d19 1
a19 1
REVISION-freetds =	4
d72 1
a72 2
WANTLIB-freetds =	m ct dbi gmp gnutls p11-kit hogweed \
			nettle tasn1 z ${MODGETTEXT_WANTLIB}
@


1.12
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/04/16 15:42:56 nigel Exp $
d17 1
a17 1
REVISION-sqlite3 =	1
@


1.11
log
@Remove the incorrect --with-dbi-incdir configure argument,
configure find the dbi includes without this.

Ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/11/04 08:16:24 jasper Exp $
d69 1
a69 2
LIB_DEPENDS-sqlite3 =	databases/sqlite3 \
			databases/libdbi
@


1.10
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/09/16 08:48:03 espie Exp $
d11 1
a11 1
REVISION-main =		0
d13 1
a13 1
REVISION-pgsql =	1
d15 1
d17 1
a17 1
REVISION-sqlite3 =	0
d19 1
a19 1
REVISION-freetds =	3
a42 1
			--with-dbi-incdir=${LOCALBASE}/include/dbi \
@


1.9
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/07/10 10:17:14 espie Exp $
d18 1
a18 1
REVISION-freetds =	2
d73 1
a73 1
WANTLIB-freetds =	m ct dbi gcrypt gmp gnutls gpg-error hogweed \
d76 1
a76 2
			databases/libdbi \
			security/libgcrypt
@


1.8
log
@grrr.
module gettext added without any regards to proper tools like PLIST_DB
Unfuck build for normal people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/07/06 22:56:23 ajacoutot Exp $
d11 1
d13 1
a13 1
REVISION-pgsql =	0
d16 1
@


1.7
log
@Use the gettext MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/04/15 16:10:38 ajacoutot Exp $
d54 1
d59 1
d64 1
d69 1
@


1.6
log
@Fix DEPENDS after gnutls update.

ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/04/12 11:16:35 sthen Exp $
d16 1
a16 1
REVISION-freetds =	1
d32 2
d35 1
d67 2
a68 2
WANTLIB-freetds =	iconv m ct dbi gcrypt gmp gnutls gpg-error hogweed \
			intl nettle tasn1 z
@


1.5
log
@add missing WANTLIB, bump relevant pkgs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/15 00:22:51 espie Exp $
d16 1
a16 1
REVISION-freetds =	0
d64 2
a65 1
WANTLIB-freetds =	iconv m ct dbi gcrypt gnutls gpg-error intl tasn1 z
d67 2
a68 1
			databases/libdbi
@


1.4
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/11/06 22:50:02 espie Exp $
d12 1
d16 1
d52 1
a52 1
WANTLIB-pgsql =		m pq dbi
d64 1
a64 1
WANTLIB-freetds =	iconv m ct dbi
@


1.3
log
@bye bye old LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/08/14 17:56:16 sthen Exp $
d47 2
a48 2
LIB_DEPENDS-main =	::databases/mysql \
			::databases/libdbi
d51 2
a52 2
LIB_DEPENDS-pgsql =	::databases/postgresql \
			::databases/libdbi
d55 2
a56 2
LIB_DEPENDS-sqlite =	::databases/sqlite \
			::databases/libdbi
d59 2
a60 2
LIB_DEPENDS-sqlite3 =	::databases/sqlite3 \
			::databases/libdbi
d63 2
a64 2
LIB_DEPENDS-freetds =	::databases/freetds \
			::databases/libdbi
d67 5
a71 5
REGRESS_DEPENDS =	::databases/libdbi-drivers,-main \
			::databases/libdbi-drivers,-pgsql \
			::databases/libdbi-drivers,-sqlite \
			::databases/libdbi-drivers,-sqlite3 \
			::databases/libdbi-drivers,-freetds
@


1.2
log
@adjust the various PKGNAMEs into compliance with packages-specs(7);
ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/06/02 00:58:58 merdely Exp $
d46 19
a64 19
WANTLIB-main =		crypto m ssl z
LIB_DEPENDS-main =	mysqlclient::databases/mysql \
			dbi::databases/libdbi

WANTLIB-pgsql =		m
LIB_DEPENDS-pgsql =	pq::databases/postgresql \
			dbi::databases/libdbi

WANTLIB-sqlite =	m
LIB_DEPENDS-sqlite =	sqlite::databases/sqlite \
			dbi::databases/libdbi

WANTLIB-sqlite3 =	m
LIB_DEPENDS-sqlite3 =	sqlite3::databases/sqlite3 \
			dbi::databases/libdbi

WANTLIB-freetds =	iconv m
LIB_DEPENDS-freetds =	ct::databases/freetds \
			dbi::databases/libdbi
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 5
a14 5
PKGNAME-main =		libdbi-drivers-mysql-$V
PKGNAME-pgsql =		libdbi-drivers-pgsql-$V
PKGNAME-sqlite =	libdbi-drivers-sqlite-$V
PKGNAME-sqlite3 =	libdbi-drivers-sqlite3-$V
PKGNAME-freetds =	libdbi-drivers-freetds-$V
@


1.1.1.1
log
@import libdbi-drivers


The libdbi-drivers project provides the database-specific drivers for
the libdbi framework. The current version of libdbi-drivers will work
with any 0.8.x release of the framework.

It supports MySQL, PostgreSQL, sqlite, sqlite3, and FreeTDS

ok wcmaier@@
@
text
@@
