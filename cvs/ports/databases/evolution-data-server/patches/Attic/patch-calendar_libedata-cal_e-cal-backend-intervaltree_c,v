head	1.15;
access;
symbols
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.7.0.2
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.15
date	2013.09.26.14.11.07;	author ajacoutot;	state dead;
branches;
next	1.14;

1.14
date	2013.09.11.14.02.53;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2013.09.11.09.24.56;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.08.15.16.07.27;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.08.15.14.49.35;	author ajacoutot;	state dead;
branches;
next	1.10;

1.10
date	2013.03.29.15.17.01;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.11.11.18.10.01;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.10.18.13.54.56;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.03.29.06.45.21;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.12.29.09.23.19;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.09.21.13.26.03;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2011.09.12.07.26.19;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.04.19.17.01.54;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.03.07.19.35.30;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.30.07.32.09;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Update to evolution-data-server-3.10.0.
@
text
@$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.14 2013/09/11 14:02:53 ajacoutot Exp $

From fa37efaf26d366a3d0d5256283455a28025ddbde Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <antoine@@mtier.org>
Date: Wed, 11 Sep 2013 13:57:57 +0000
Subject: do not assume time_t is long

--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Tue Jul 23 13:58:11 2013
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Wed Sep 11 10:30:24 2013
@@@@ -761,8 +761,8 @@@@ e_intervaltree_node_dump (EIntervalTree *tree,
 	*/
 	if (node != tree->priv->nil) {
 		g_print (
-			"%*s[%ld - %ld] [%ld - %ld] red %d\n", indent, "", node->start,
-			node->end, node->min, node->max, node->red);
+			"%*s[%" G_GINT64_FORMAT "- %" G_GINT64_FORMAT "] [%" G_GINT64_FORMAT "- %" G_GINT64_FORMAT "] red %d\n", indent, "", (gint64) node->start,
+			(gint64) node->end, (gint64) node->min, (gint64) node->max, node->red);
 	} else {
 		g_print ("%*s[ - ]\n", indent, "");
 		return;
@


1.14
log
@Committed upstream with some tweaks.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.13 2013/09/11 09:24:56 ajacoutot Exp $
@


1.13
log
@Fixes for 64-bit time_t. Still a moving target but better than what we
currently have.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.12 2013/08/15 16:07:27 ajacoutot Exp $
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=707900
d16 2
a17 2
+			"%*s[%" G_GINT64_FORMAT "- %" G_GINT64_FORMAT "] [%" G_GINT64_FORMAT "- %" G_GINT64_FORMAT "] red %d\n", indent, "", (gint64)node->start,
+			(gint64)node->end, (gint64)node->min, (gint64)node->max, node->red);
@


1.12
log
@Revert previous on these 3 ports.
kettenis@@ says there is more work involved since we are different from the
others... I have no time to take care of it properly so put back whatever
was there before which seemed to work fine.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.10 2013/03/29 15:17:01 ajacoutot Exp $
d3 1
a3 1
XXX remove when we have a 64-bit time_t
d5 2
a6 2
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Sun Mar 17 13:46:02 2013
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Fri Mar 29 13:32:31 2013
d13 2
a14 2
+			"%*s[%ld - %ld] [%ld - %ld] red %d\n", indent, "", (long)node->start,
+			(long)node->end, (long)node->min, (long)node->max, node->red);
@


1.11
log
@Remove these, we have 64-bit time_t now.
@
text
@@


1.10
log
@Update to evolution-data-server-3.8.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.9 2012/11/11 18:10:01 ajacoutot Exp $
@


1.9
log
@Bugfix update to evolution-data-server-3.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.8 2012/10/18 13:54:56 ajacoutot Exp $
d5 5
a9 5
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Sun Oct 21 03:22:29 2012
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Sun Nov 11 18:46:32 2012
@@@@ -614,8 +614,8 @@@@ e_intervaltree_node_dump (EIntervalTree *tree,
 	EIntervalTreePrivate *priv = tree->priv;
 	if (node != priv->nil) {
@


1.8
log
@We are getting fucked by our 32-bits time_t :(
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.7 2012/03/29 06:45:21 ajacoutot Exp $
d5 3
a7 4
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Sun Sep 16 17:05:38 2012
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Thu Oct 18 14:21:21 2012
@@@@ -613,8 +613,8 @@@@ e_intervaltree_node_dump (EIntervalTree *tree,
 	*/
d9 7
a15 7
 	if (node != priv->nil)
-		g_print ("%*s[%ld - %ld] [%ld - %ld] red %d\n", indent, "", node->start,
-				node->end, node->min, node->max, node->red);
+		g_print ("%*s[%ld - %ld] [%ld - %ld] red %d\n", indent, "", (long)node->start,
+				(long)node->end, (long)node->min, (long)node->max, node->red);
 	else
 	{
d17 1
@


1.7
log
@Update to evolution-data-server-3.4.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.6 2011/12/29 09:23:19 ajacoutot Exp $
d3 1
a3 1
On OpenBSD, time_t is an int.
d5 3
a7 3
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Tue Feb 21 09:04:18 2012
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Fri Mar 23 23:05:19 2012
@@@@ -613,7 +613,7 @@@@ e_intervaltree_node_dump (EIntervalTree *tree,
d12 3
a14 2
+		g_print ("%*s[%d - %d] [%d - %d] red %d\n", indent, "", node->start,
 				node->end, node->min, node->max, node->red);
d17 1
@


1.6
log
@Tweak patches to please our time_t.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.5 2011/09/21 13:26:03 jasper Exp $
d5 3
a7 3
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Mon Sep 19 07:03:01 2011
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Thu Dec 29 09:15:18 2011
@@@@ -608,7 +608,7 @@@@ e_intervaltree_node_dump (EIntervalTree *tree,
@


1.5
log
@- update to 3.1.92
- hardcode (but with XXX) 3.2 for now
@
text
@d1 7
a7 4
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.4 2011/09/12 07:26:19 ajacoutot Exp $
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Sun Sep  4 00:50:05 2011
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Sat Sep 17 09:57:03 2011
@@@@ -608,8 +608,8 @@@@ e_intervaltree_node_dump (EIntervalTree *tree,
d12 2
a13 3
-				node->end, node->min, node->max, node->red);
+		g_print ("%*s[%ld - %ld] [%ld - %ld] red %d\n", indent, "", (long)node->start,
+				(long)node->end, (long)node->min, (long)node->max, node->red);
a15 1
 		g_print ("%*s[ - ]\n", indent, ""); 
@


1.4
log
@Start the GNOME3 merge armageddon... breakage expected.
@
text
@d1 4
a4 4
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.1.1.1 2011/05/17 17:07:32 ajacoutot Exp $
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Thu Mar 10 10:50:17 2011
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Tue May 17 13:40:32 2011
@@@@ -589,8 +589,8 @@@@ e_intervaltree_node_dump (EIntervalTree *tree, EInterv
@


1.3
log
@Tweaks.
@
text
@d1 4
a4 4
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.2 2011/03/07 19:35:30 ajacoutot Exp $
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Tue Nov 23 04:26:37 2010
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Tue Apr 19 18:17:04 2011
@@@@ -593,8 +593,8 @@@@ e_intervaltree_node_dump (EIntervalTree *tree, EInterv
@


1.2
log
@Maintenance update to evolution-data-server-2.32.2.
Unbreak with new gtk+2.
@
text
@d1 1
a1 1
$OpenBSD: patch-calendar_libedata-cal_e-cal-backend-intervaltree_c,v 1.1 2010/09/30 07:32:09 ajacoutot Exp $
d3 2
a4 2
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Sat Feb 26 16:46:04 2011
@@@@ -593,7 +593,7 @@@@ e_intervaltree_node_dump (EIntervalTree *tree, EInterv
d9 3
a11 2
+		g_print ("%*s[%d - %d] [%d - %d] red %d\n", indent, "", node->start,
 				node->end, node->min, node->max, node->red);
d14 1
@


1.1
log
@Update to evolution-data-server-2.32.0.

ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD$
--- calendar/libedata-cal/e-cal-backend-intervaltree.c.orig	Tue Sep 28 07:51:44 2010
+++ calendar/libedata-cal/e-cal-backend-intervaltree.c	Tue Sep 28 07:52:54 2010
@@@@ -579,7 +579,7 @@@@ e_intervaltree_node_dump (EIntervalTree *tree, EInterv
@

