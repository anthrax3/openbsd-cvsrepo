head	1.2;
access;
symbols
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.03.29.15.17.01;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2012.11.10.08.07.55;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to evolution-data-server-3.8.0.
@
text
@$OpenBSD: patch-addressbook_libedata-book_e-data-book-factory_c,v 1.1 2012/11/10 08:07:55 ajacoutot Exp $

Remove on update, fixed upstream (rewritten).

--- addressbook/libedata-book/e-data-book-factory.c.orig	Sat Nov 10 08:19:50 2012
+++ addressbook/libedata-book/e-data-book-factory.c	Sat Nov 10 08:20:33 2012
@@@@ -357,6 +357,7 @@@@ impl_BookFactory_get_book (EGdbusBookFactory *object,
 	book_backend_factory_match_goa_object (factory, backend);
 #endif
 
+	g_mutex_lock (priv->books_lock);
 	path = construct_book_factory_path ();
 	book = e_data_book_new (E_BOOK_BACKEND (backend));
 	g_hash_table_insert (priv->books, g_strdup (path), book);
@


1.1
log
@Missing g_mutex_lock() call was making evolution-addressbook-factory
abort() and the addressbook unavailable.

thanks to kurt@@ and guenther@@ for the help
patch from kurt@@
@
text
@d1 1
a1 1
$OpenBSD$
@

