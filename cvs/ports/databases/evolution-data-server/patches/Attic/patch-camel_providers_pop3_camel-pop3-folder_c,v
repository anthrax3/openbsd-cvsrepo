head	1.12;
access;
symbols
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.12
date	2013.09.26.14.11.10;	author ajacoutot;	state dead;
branches;
next	1.11;

1.11
date	2013.09.11.14.02.54;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.09.11.09.24.57;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2013.08.15.16.07.27;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.08.15.14.49.35;	author ajacoutot;	state dead;
branches;
next	1.7;

1.7
date	2013.08.11.13.17.41;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2013.08.06.19.09.27;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.06.09.09.17.49;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.11.11.18.10.01;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.10.18.13.54.56;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.09.28.06.35.36;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.03.29.06.45.21;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.12
log
@Update to evolution-data-server-3.10.0.
@
text
@$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.11 2013/09/11 14:02:54 ajacoutot Exp $

From fa37efaf26d366a3d0d5256283455a28025ddbde Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <antoine@@mtier.org>
Date: Wed, 11 Sep 2013 13:57:57 +0000
Subject: do not assume time_t is long

--- camel/providers/pop3/camel-pop3-folder.c.orig	Sun Aug 11 00:00:52 2013
+++ camel/providers/pop3/camel-pop3-folder.c	Wed Sep 11 09:59:39 2013
@@@@ -1268,8 +1268,8 @@@@ camel_pop3_delete_old (CamelFolder *folder,
 			gint day_lag = time_diff / (60 * 60 * 24);
 
 			d (printf (
-				"%s(%d): message_time= [%ld]\n",
-				__FILE__, __LINE__, message_time));
+				"%s(%d): message_time= [%" G_GINT64_FORMAT "]\n",
+				__FILE__, __LINE__, (gint64) message_time));
 			d (printf (
 				"%s(%d): day_lag=[%d] \t days_to_delete=[%d]\n",
 				__FILE__, __LINE__, day_lag, days_to_delete));
@


1.11
log
@Committed upstream with some tweaks.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.10 2013/09/11 09:24:57 ajacoutot Exp $
@


1.10
log
@Fixes for 64-bit time_t. Still a moving target but better than what we
currently have.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.9 2013/08/15 16:07:27 ajacoutot Exp $
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=707900
d17 1
a17 1
+				__FILE__, __LINE__, (gint64)message_time));
@


1.9
log
@Revert previous on these 3 ports.
kettenis@@ says there is more work involved since we are different from the
others... I have no time to take care of it properly so put back whatever
was there before which seemed to work fine.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.5 2013/06/09 09:17:49 ajacoutot Exp $
d3 1
a3 1
XXX remove when we have a 64-bit time_t
d5 4
a8 3
--- camel/providers/pop3/camel-pop3-folder.c.orig	Wed May 22 15:28:44 2013
+++ camel/providers/pop3/camel-pop3-folder.c	Sun Jun  9 10:53:22 2013
@@@@ -1191,7 +1191,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
d11 1
a11 1
 				"%s(%d): message_time= [%ld]\n",
d13 2
a14 1
+				__FILE__, __LINE__, (long)message_time));
@


1.8
log
@Remove these, we have 64-bit time_t now.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.7 2013/08/11 13:17:41 ajacoutot Exp $
d5 3
a7 3
--- camel/providers/pop3/camel-pop3-folder.c.orig	Sun Aug 11 00:00:52 2013
+++ camel/providers/pop3/camel-pop3-folder.c	Sun Aug 11 14:55:53 2013
@@@@ -1269,7 +1269,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
@


1.7
log
@Update to evolution-data-server-3.8.5.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.6 2013/08/06 19:09:27 ajacoutot Exp $
@


1.6
log
@Update to evolution-data-server 3.8.4.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.5 2013/06/09 09:17:49 ajacoutot Exp $
d5 3
a7 3
--- camel/providers/pop3/camel-pop3-folder.c.orig	Tue Jul 23 13:57:52 2013
+++ camel/providers/pop3/camel-pop3-folder.c	Wed Jul 24 09:29:22 2013
@@@@ -1193,7 +1193,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
@


1.5
log
@Update to evolution-data-server-3.8.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.4 2012/11/11 18:10:01 ajacoutot Exp $
d5 3
a7 3
--- camel/providers/pop3/camel-pop3-folder.c.orig	Wed May 22 15:28:44 2013
+++ camel/providers/pop3/camel-pop3-folder.c	Sun Jun  9 10:53:22 2013
@@@@ -1191,7 +1191,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
@


1.4
log
@Bugfix update to evolution-data-server-3.6.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.3 2012/10/18 13:54:56 ajacoutot Exp $
d5 3
a7 3
--- camel/providers/pop3/camel-pop3-folder.c.orig	Sun Nov 11 00:42:15 2012
+++ camel/providers/pop3/camel-pop3-folder.c	Sun Nov 11 18:43:39 2012
@@@@ -1146,7 +1146,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
@


1.3
log
@We are getting fucked by our 32-bits time_t :(
@
text
@d1 1
a1 1
$OpenBSD: patch-camel_providers_pop3_camel-pop3-folder_c,v 1.2 2012/09/28 06:35:36 ajacoutot Exp $
d5 3
a7 3
--- camel/providers/pop3/camel-pop3-folder.c.orig	Sun Sep 16 17:05:39 2012
+++ camel/providers/pop3/camel-pop3-folder.c	Thu Oct 18 14:20:42 2012
@@@@ -1114,7 +1114,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
@


1.2
log
@Update to evolution-data-server-3.6.0.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
On OpenBSD, time_t is an int.
d5 3
a7 4
--- camel/providers/pop3/camel-pop3-folder.c.orig	Fri Sep 28 07:52:33 2012
+++ camel/providers/pop3/camel-pop3-folder.c	Fri Sep 28 07:52:50 2012
@@@@ -1113,7 +1113,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
 			gint day_lag = time_diff / (60 * 60 * 24);
d10 3
a12 3
-				"%s(%d): message_time= [%ld]\n",
+				"%s(%d): message_time= [%d]\n",
 				__FILE__, __LINE__, message_time));
d15 1
@


1.1
log
@Update to evolution-data-server-3.4.0.
@
text
@d5 3
a7 4
--- camel/providers/pop3/camel-pop3-folder.c.orig	Fri Mar 23 23:15:50 2012
+++ camel/providers/pop3/camel-pop3-folder.c	Fri Mar 23 23:16:02 2012
@@@@ -1074,7 +1074,7 @@@@ camel_pop3_delete_old (CamelFolder *folder,
 			gdouble time_diff = difftime (temp,message_time);
d10 6
a15 5
-			d(printf("%s(%d): message_time= [%ld]\n", __FILE__, __LINE__, message_time));
+			d(printf("%s(%d): message_time= [%d]\n", __FILE__, __LINE__, message_time));
 			d(printf("%s(%d): day_lag=[%d] \t days_to_delete=[%d]\n",
 				__FILE__, __LINE__, day_lag, days_to_delete));
 
@

