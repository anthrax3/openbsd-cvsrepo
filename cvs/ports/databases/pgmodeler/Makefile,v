head	1.4;
access;
symbols
	OPENBSD_6_1:1.2.0.2
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.1.1.1.0.2
	OPENBSD_6_0_BASE:1.1.1.1
	feinerer_2016-Jun-20:1.1.1.1
	feinerer:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2017.07.27.09.34.37;	author sthen;	state Exp;
branches;
next	1.3;
commitid	TUtTk7ViVUGQQMLK;

1.3
date	2017.07.18.02.54.17;	author zhuk;	state Exp;
branches;
next	1.2;
commitid	mPHLS3ZSmNirYZiS;

1.2
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.1;
commitid	l6KSNN1DfB6ABkhu;

1.1
date	2016.06.20.09.45.38;	author feinerer;	state Exp;
branches
	1.1.1.1;
next	;
commitid	ka4czYma6ikHXzDB;

1.1.1.1
date	2016.06.20.09.45.38;	author feinerer;	state Exp;
branches;
next	;
commitid	ka4czYma6ikHXzDB;


desc
@@


1.4
log
@add COMPILER_LIBCXX to WANTLIB and bump
@
text
@# $OpenBSD: Makefile,v 1.3 2017/07/18 02:54:17 zhuk Exp $

COMMENT =	PostgreSQL Database Modeler

VERSION =	0.8.2
DISTNAME =	pgmodeler-${VERSION}
REVISION =	2

GH_ACCOUNT =	pgmodeler
GH_PROJECT =	pgmodeler
GH_TAGNAME =	v${VERSION}

SHARED_LIBS +=  objrenderer	0.0 # 1.0
SHARED_LIBS +=  parsers		0.0 # 1.0
SHARED_LIBS +=  pgconnector	0.0 # 1.0
SHARED_LIBS +=  pgmodeler	0.0 # 1.0
SHARED_LIBS +=  pgmodeler_ui	0.0 # 1.0
SHARED_LIBS +=  utils		0.0 # 1.0

CATEGORIES =	databases

HOMEPAGE =	http://www.pgmodeler.com.br/

MAINTAINER =	Ingo Feinerer <feinerer@@logic.at>

# GPLv3 only
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += GL Qt5Core Qt5Gui Qt5Network Qt5PrintSupport Qt5Svg
WANTLIB += Qt5Widgets X11 Xext c execinfo m pq pthread xml2
WANTLIB += ${COMPILER_LIBCXX}

CONFIGURE_ENV =		CXXFLAGS="${CXXFLAGS} -std=c++11"

MODULES =		devel/qmake \
			x11/qt5
MODQMAKE_PROJECTS =	pgmodeler.pro tests/tests.pro
MODQMAKE_ARGS =		DOCDIR=${PREFIX}/share/doc/pgmodeler \
			NO_UPDATE_CHECK=1 \
			PREFIX=${PREFIX} \
			SAMPLESDIR=${PREFIX}/share/examples/pgmodeler
LIB_DEPENDS =		databases/postgresql \
			x11/qt5/qtsvg

SEPARATE_BUILD =	No
USE_GMAKE =		Yes

post-patch:
	sed -i -e 's/linux/unix/' \
	       -e 's/^ BUILDNUM=.*/ BUILDNUM=${VERSION}/' ${WRKSRC}/pgmodeler.pri

post-install:
	rm -Rf ${PREFIX}/bin/tests
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pgmodeler/plugins

do-test:
	cd ${WRKBUILD}; \
	for d in lib*/; do \
		LD_LIBRARY_PATH=$${LD_LIBRARY_PATH:+$${LD_LIBRARY_PATH}:}$$PWD/$${d%/}; \
	done; \
	export LD_LIBRARY_PATH; \
	ln -sf ../../../schemas tests/src/databasemodeltest/schemas; \
	okay=true; \
	for t in ${WRKBUILD}/tests/src/*test; do \
		(cd $$t; ./*test) || okay=false; \
	done; \
	$$okay

.include <bsd.port.mk>
@


1.3
log
@Unbreak after Qt 5.9 update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/12/25 14:34:39 zhuk Exp $
d7 1
a7 1
REVISION =	1
d31 1
@


1.2
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2016/06/20 09:45:38 feinerer Exp $
d7 1
a7 1
REVISION =	0
d31 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d34 1
a34 1
MODQMAKE_PROJECTS =	pgmodeler.pro
d39 2
a40 1
LIB_DEPENDS =		databases/postgresql
a44 2
NO_TEST =		Yes

d50 15
a64 1
	mkdir ${PREFIX}/lib/pgmodeler/plugins
@


1.1.1.1
log
@Import pgModeler 0.8.2

pgModeler - PostgreSQL Database Modeler - is an open source data modeling tool
designed for PostgreSQL. No more DDL commands written by hand let pgModeler do
the job for you! This software reunites the concepts of entity-relationship
diagrams and the features that PostgreSQL implements as extensions of SQL
standards.

OK landry@@
@
text
@@
