head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.6
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.4
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.1.1.0.4
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.2
	OPENBSD_5_5_BASE:1.1.1.1
	giovanni_20130924:1.1.1.1
	giovanni:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2015.10.27.10.51.32;	author giovanni;	state Exp;
branches;
next	1.2;
commitid	zHOgLQlqrW2geqym;

1.2
date	2014.09.15.17.10.45;	author brad;	state Exp;
branches;
next	1.1;
commitid	WbYWUWHzoZWSdWA6;

1.1
date	2013.09.24.14.44.44;	author giovanni;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.09.24.14.44.44;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to 0.6.2
looks good to Brad
@
text
@$OpenBSD: patch-CMakeLists_txt,v 1.2 2014/09/15 17:10:45 brad Exp $
--- CMakeLists.txt.orig	Fri Sep  5 18:48:12 2014
+++ CMakeLists.txt	Tue Oct 27 08:41:44 2015
@@@@ -18,7 +18,9 @@@@ endif (BUILD_DOCS)
 
 option(WITH_BINLOG "Build binlog dump options" OFF)
 
-set(CMAKE_C_FLAGS "-Wall -Wno-deprecated-declarations -Wunused -Wwrite-strings -Wno-strict-aliasing -Wextra -Wshadow -Werror -O3 -g ${MYSQL_CFLAGS}")
+option(WITH_BINLOG "Build binlog dump options" OFF)
+
+set(CMAKE_C_FLAGS "-Wall -Wno-deprecated-declarations -Wunused -Wwrite-strings -Wno-strict-aliasing -Wextra -Wshadow -Werror ${MYSQL_CFLAGS}")
 
 include_directories(${MYDUMPER_SOURCE_DIR} ${MYSQL_INCLUDE_DIR} ${GLIB2_INCLUDE_DIR} ${PCRE_INCLUDE_DIR} ${ZLIB_INCLUDE_DIRS})
 
@


1.2
log
@mydumper is tocuhing internal MySQL API it should not be. upstream has disabled
the binlog support until something can be done to fix it properly.

"The real problem here is that no application should ever include sql_common.h
or try to execute, the internal to libmysql functions, simple_command() or
advanced_command() directly.

The primary reason for this is that these functions are not safe for internal
API or structure changes and may cause applications crashes between even minor
versions of libmysql.a"

https://bugs.launchpad.net/mydumper/+bug/1316001

ok giovanni@@
@
text
@d1 6
a6 11
$OpenBSD: patch-CMakeLists_txt,v 1.1.1.1 2013/09/24 14:44:44 giovanni Exp $

binlog code now is optional, disabled by default

http://bazaar.launchpad.net/~perconardba/mydumper/0.6/revision/144

--- CMakeLists.txt.orig	Tue Feb 25 10:18:05 2014
+++ CMakeLists.txt	Sun Sep 14 12:32:25 2014
@@@@ -16,8 +16,10 @@@@ if (BUILD_DOCS)
   add_subdirectory(docs)
 endif (BUILD_DOCS)
d10 2
a12 2
+set(CMAKE_C_FLAGS "-Wall -Wno-deprecated-declarations -Wunused -Wwrite-strings -Wno-strict-aliasing -Wextra -Wshadow -Werror ${MYSQL_CFLAGS}")
+
a14 27
 if (NOT CMAKE_INSTALL_PREFIX)
@@@@ -27,9 +29,15 @@@@ MARK_AS_ADVANCED(CMAKE)
 
 CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/config.h.in ${CMAKE_CURRENT_SOURCE_DIR}/config.h)
 
-add_executable(mydumper mydumper.c binlog.c server_detect.c g_unix_signal.c)
-target_link_libraries(mydumper ${MYSQL_LIBRARIES_mysqlclient_r} ${GLIB2_LIBRARIES} ${GTHREAD2_LIBRARIES} ${PCRE_PCRE_LIBRARY} ${ZLIB_LIBRARIES})
 
+if (WITH_BINLOG)
+  add_executable(mydumper mydumper.c binlog.c server_detect.c g_unix_signal.c)
+else (WITH_BINLOG)
+  add_executable(mydumper mydumper.c server_detect.c g_unix_signal.c)
+endif (WITH_BINLOG)
+target_link_libraries(mydumper ${MYSQL_LIBRARIES} ${GLIB2_LIBRARIES} ${GTHREAD2_LIBRARIES} ${PCRE_PCRE_LIBRARY} ${ZLIB_LIBRARIES})
+
+
 add_executable(myloader myloader.c)
 target_link_libraries(myloader ${MYSQL_LIBRARIES_mysqlclient_r} ${GLIB2_LIBRARIES} ${GTHREAD2_LIBRARIES} ${PCRE_PCRE_LIBRARY} ${ZLIB_LIBRARIES})
 
@@@@ -55,6 +63,7 @@@@ MESSAGE(STATUS "--------------------------------------
 MESSAGE(STATUS "MYSQL_CONFIG = ${MYSQL_CONFIG}")
 MESSAGE(STATUS "CMAKE_INSTALL_PREFIX = ${CMAKE_INSTALL_PREFIX}")
 MESSAGE(STATUS "BUILD_DOCS = ${BUILD_DOCS}")
+MESSAGE(STATUS "WITH_BINLOG = ${WITH_BINLOG}")
 MESSAGE(STATUS "RUN_CPPCHECK = ${RUN_CPPCHECK}")
 MESSAGE(STATUS "Change a values with: cmake -D<Variable>=<Value>")
 MESSAGE(STATUS "------------------------------------------------")
@


1.1
log
@Initial revision
@
text
@d1 9
a9 4
$OpenBSD$
--- CMakeLists.txt.orig	Tue Sep 24 14:55:22 2013
+++ CMakeLists.txt	Tue Sep 24 14:56:43 2013
@@@@ -16,7 +16,7 @@@@ if (BUILD_DOCS)
d14 2
d17 5
d23 15
a37 1
 include_directories(${MYDUMPER_SOURCE_DIR} ${MYSQL_INCLUDE_DIR} ${GLIB2_INCLUDE_DIR} ${PCRE_INCLUDE_DIR} ${ZLIB_INCLUDE_DIRS})
d39 8
@


1.1.1.1
log
@
mydumper is complement to mysqldump, for MySQL data dumping, providing
parallelism, performance and easier to manage output.

hints and ok sthen@@ benoit@@
@
text
@@
