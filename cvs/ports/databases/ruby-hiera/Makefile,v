head	1.30;
access;
symbols
	OPENBSD_6_0:1.27.0.4
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.26.0.4
	OPENBSD_5_8_BASE:1.26
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.20.0.2
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.16.0.2
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	jasper_20130302:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2016.09.06.11.27.26;	author jasper;	state Exp;
branches;
next	1.29;
commitid	IcL9InTVn5vnIGvq;

1.29
date	2016.09.06.09.04.48;	author jasper;	state Exp;
branches;
next	1.28;
commitid	jtHnhuZ8wBXZfPNh;

1.28
date	2016.09.05.09.00.08;	author jasper;	state Exp;
branches;
next	1.27;
commitid	i2n4AbDJLmxZQ2Ec;

1.27
date	2015.08.11.20.15.03;	author jasper;	state Exp;
branches;
next	1.26;
commitid	eL5y9ArkPV5ar5n5;

1.26
date	2015.07.18.21.11.18;	author jasper;	state Exp;
branches;
next	1.25;
commitid	7lAcPgPxUa1f4S8R;

1.25
date	2015.06.12.17.57.55;	author jasper;	state Exp;
branches;
next	1.24;
commitid	P7mjAOog7yjQUP1P;

1.24
date	2015.06.12.08.02.03;	author jasper;	state Exp;
branches;
next	1.23;
commitid	UM8LtC5fZ7ZRceen;

1.23
date	2014.10.17.18.00.35;	author jasper;	state Exp;
branches;
next	1.22;
commitid	Fh0igjnPbTrOW73o;

1.22
date	2014.10.17.17.03.27;	author jasper;	state Exp;
branches;
next	1.21;
commitid	7t1C1BStRNNAs3G4;

1.21
date	2014.10.11.19.54.46;	author jeremy;	state Exp;
branches;
next	1.20;
commitid	gOwEb2sD8zosipFk;

1.20
date	2014.06.20.19.39.01;	author jasper;	state Exp;
branches;
next	1.19;
commitid	QxybZ1fvMLq0sD4p;

1.19
date	2014.06.10.19.47.59;	author jasper;	state Exp;
branches;
next	1.18;
commitid	oPgT5CHoQjncR6Xt;

1.18
date	2014.05.23.06.25.04;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2014.03.09.19.46.21;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2014.01.24.08.50.43;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2014.01.16.10.18.22;	author jasper;	state Exp;
branches;
next	1.14;

1.14
date	2013.12.04.19.49.37;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2013.10.26.23.55.35;	author jeremy;	state Exp;
branches;
next	1.12;

1.12
date	2013.06.28.08.43.01;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2013.06.11.14.57.59;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2013.06.11.14.51.30;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2013.04.26.12.46.06;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.04.24.08.44.35;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.22.19.58.21;	author jeremy;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.22.18.18.22;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.20.06.56.05;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.02.52.08;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.09.09.38.51;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.02.13.59.20;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.03.16.44.03;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.02.03.16.44.03;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.30
log
@sebastia@@ takes over these too
@
text
@# $OpenBSD: Makefile,v 1.29 2016/09/06 09:04:48 jasper Exp $

PORTROACH=		limit:^1

COMMENT=		simple pluggable hierarchical database

V=			1.3.4
DISTNAME=		hiera-${V}
REVISION=		4

CATEGORIES=		databases

HOMEPAGE=		http://projects.puppetlabs.com/projects/hiera

MAINTAINER=		Sebastian Reitenbach <sebastia@@openbsd.org>

# Apachev2
PERMIT_PACKAGE_CDROM=	Yes

MODULES=		lang/ruby

CONFIGURE_STYLE=	ruby gem

BUILD_DEPENDS=		${RUN_DEPENDS}
RUN_DEPENDS=		devel/ruby-deep_merge,${MODRUBY_FLAVOR} \
			devel/ruby-json_pure,${MODRUBY_FLAVOR}

TEST_DEPENDS=		devel/ruby-mocha,${MODRUBY_FLAVOR}
MODRUBY_TEST=		rspec3

pre-configure:
	sed -i 's,/var/lib,/var/db,g' \
		${WRKSRC}/lib/hiera/backend.rb \
		${WRKSRC}/lib/hiera/util.rb \
		${WRKSRC}/spec/unit/util_spec.rb \
		${WRKSRC}/README.md

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/${MODRUBY_RELEXAMPLEDIR}-hiera
	${INSTALL_DATA} ${FILESDIR}/hiera.yaml \
		${PREFIX}/${MODRUBY_RELEXAMPLEDIR}-hiera

.include <bsd.port.mk>
@


1.29
log
@drop MODRUBY_REV on these ports; jeremy@@ pointed out that with
'CONFIGURE_STYLE=ruby gem' it's not needed and dependant ports will require
the correct flavor/version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/09/05 09:00:08 jasper Exp $
d9 1
a9 1
REVISION=		3
d15 1
a15 1
MAINTAINER=		Jasper Lievisse Adriaanse <jasper@@openbsd.org>
@


1.28
log
@force MODRUBY_REV=2.2, partially from jeremy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/08/11 20:15:03 jasper Exp $
a20 1
MODRUBY_REV=		2.2
@


1.27
log
@update @@conflict markers which was forgotten after the switch to ruby 2.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/07/18 21:11:18 jasper Exp $
d21 1
@


1.26
log
@use sed -i
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/06/12 17:57:55 jasper Exp $
d9 1
a9 1
REVISION=		2
@


1.25
log
@- remove bogus @@unexec-delete
- register conflict with upcoming hiera2 port

as discussed with sebastia@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/06/12 08:02:03 jasper Exp $
d32 1
a32 1
	perl -pi -e 's,/var/lib,/var/db,g' \
@


1.24
log
@add PORTROACH to limit this to hiera 1.x
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/10/17 18:00:35 jasper Exp $
d9 1
a9 1
REVISION=		1
@


1.23
log
@switch to use rspec3
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.22 2014/10/17 17:03:27 jasper Exp $
@


1.22
log
@disable rspec2 tests for these ports as rspec2 will be removed shortly.

ok jeremy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/10/11 19:54:46 jeremy Exp $
d26 2
a27 2
#TEST_DEPENDS=		devel/ruby-mocha,${MODRUBY_FLAVOR}
#MODRUBY_TEST=		rspec2
@


1.21
log
@Bump gem ports buildable with ruby 1.8 that have binaries

The binaries now use a 18 suffix on ruby 1.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/06/20 19:39:01 jasper Exp $
d26 2
a27 2
TEST_DEPENDS=		devel/ruby-mocha,${MODRUBY_FLAVOR}
MODRUBY_TEST=		rspec2
@


1.20
log
@use @@unexec-delete instead of @@extraunexec
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/06/10 19:47:59 jasper Exp $
d7 1
a7 1
REVISION=		0
@


1.19
log
@bump to hiera-1.3.4 which contains a security fix for CVE-2014-3248 which
we're not affected by.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/05/23 06:25:04 jasper Exp $
d7 1
@


1.18
log
@update to hiera-1.3.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/03/09 19:46:21 jasper Exp $
d5 1
a5 1
V=			1.3.3
@


1.17
log
@update to hiera-1.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/01/24 08:50:43 jasper Exp $
d5 1
a5 1
V=			1.3.2
@


1.16
log
@update to hiera-1.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/01/16 10:18:22 jasper Exp $
d5 1
a5 1
V=			1.3.1
@


1.15
log
@    merge in a lookup speedup from hiera master

    https://github.com/puppetlabs/hiera/commit/7657d43a35c32570862041713c17bc0e2039326f
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/12/04 19:49:37 jasper Exp $
d5 1
a5 1
V=			1.3.0
a6 1
REVISION=		0
@


1.14
log
@- update to hiera-1.3.0
* https://groups.google.com/forum/#!topic/puppet-users/jeeYWpP0y80
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/10/26 23:55:35 jeremy Exp $
d7 1
@


1.13
log
@Bump all ruby gem ports supporting rbx FLAVOR due to change to rubinius
gem directory when upgrading rubinius from 1.2.4 to 2.1.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/06/28 08:43:01 jasper Exp $
d5 1
a5 1
V=			1.2.1
a6 1
REVISION=		4
@


1.12
log
@add rundep on ruby-deep_merge which is used for 'deep' merge_behaviour
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/06/11 14:57:59 jasper Exp $
d7 1
a7 1
REVISION=		3
@


1.11
log
@No need to pin the flavor to ruby18 since puppet uses 1.9 now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/06/11 14:51:30 jasper Exp $
d7 1
a7 1
REVISION=		2
d23 2
a24 1
RUN_DEPENDS=		devel/ruby-json_pure,${MODRUBY_FLAVOR}
@


1.10
log
@prevent errors with ruby 1.9.3 which switched to the psych yaml parser and
will choke on imperfect yaml files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/04/26 12:46:06 ajacoutot Exp $
d7 1
a7 1
REVISION=		1
a18 2

FLAVOR=			ruby18
@


1.9
log
@Drop puppet releated ports I maintain and give them to jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/04/24 08:44:35 ajacoutot Exp $
d7 1
a7 1
REVISION=		0
@


1.8
log
@Update to ruby-hiera-1.2.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/22 19:58:21 jeremy Exp $
d7 1
d13 1
a13 1
MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.7
log
@Force ruby 1.8 using a FLAVOR, similar to other ruby ports.

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/22 18:18:22 ajacoutot Exp $
d5 1
a5 1
V=			1.1.2
a6 1
REVISION=		2
@


1.6
log
@Unbreak after ruby default version moved to 1.9.

spotted by sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/20 06:56:05 ajacoutot Exp $
d7 1
a7 2
PKGNAME=		ruby-hiera-${V}
REVISION=		1
a18 1
MODRUBY_REV=		1.8
d20 1
a20 1
MODRUBY_HANDLE_FLAVORS=	No
@


1.5
log
@Indent.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 02:52:08 espie Exp $
d20 1
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/03/09 09:38:51 ajacoutot Exp $
d28 2
a29 2
TEST_DEPENDS=	devel/ruby-mocha,${MODRUBY_FLAVOR}
MODRUBY_TEST=	rspec2
@


1.3
log
@/var/db/hiera/ is a directory, not a file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/03/02 13:59:20 ajacoutot Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d28 2
a29 2
REGRESS_DEPENDS=	devel/ruby-mocha,${MODRUBY_FLAVOR}
MODRUBY_REGRESS=	rspec2
@


1.2
log
@Fix this port:
* depend on ruby18 and do not let the ruby module handles FLAVORs
* enable regression tests
* fix path to the default hiera database; and create its directory
* install the yaml configuration file for the cli under SYSCONFDIR
* configure hiera.yaml the same way it is done in the hiera tarball
distributed by puppetlabs
* tweak DESCR
* take MAINTAINER

Hiera now works out of the box with Puppet.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/02/03 16:44:03 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 5
a9 1
DISTNAME=		hiera-1.1.2
d12 1
a12 1
HOMEPAGE=		https://github.com/puppetlabs/hiera
d14 1
a14 1
MODULES=		lang/ruby
d22 4
d31 9
a39 1
EXAMPLE_DIR=		${PREFIX}/share/examples/ruby-${GEM_MAN_SUFFIX}-hiera/
d42 3
a44 2
	${INSTALL_DATA_DIR} ${EXAMPLE_DIR}
	${INSTALL_DATA} ${FILESDIR}/hiera.yaml ${EXAMPLE_DIR}
@


1.1.1.1
log
@import hiera-1.1.2

Hiera is a simple pluggable Hierarchical Database. It can be used to
store various information and therefor is a good fit for the
representation of infrastructure information. It can be used to querying
multiple data backends e.g. YAML or Puppet.

ok jeremy@@
@
text
@@
