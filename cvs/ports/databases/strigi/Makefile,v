head	1.24;
access;
symbols
	OPENBSD_6_1:1.21.0.2
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.20.0.2
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.19.0.2
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.18.0.4
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.17.0.2
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.16.0.6
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.16.0.4
	OPENBSD_5_5_BASE:1.16
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.15.0.2
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.4
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.11.0.2
	OPENBSD_4_8_BASE:1.11
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	kde:1.1.1.1
	strigi:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2017.07.26.22.45.17;	author sthen;	state Exp;
branches;
next	1.23;
commitid	tD4MFrpYYDDL2UFT;

1.23
date	2017.07.16.19.18.50;	author espie;	state Exp;
branches;
next	1.22;
commitid	tt0GhWK5c4uf9ILG;

1.22
date	2017.04.10.11.45.25;	author sthen;	state Exp;
branches;
next	1.21;
commitid	XDh1zlSBq0boKsHk;

1.21
date	2016.09.12.20.58.39;	author naddy;	state Exp;
branches;
next	1.20;
commitid	gXh4jYieAEVtuQcV;

1.20
date	2016.03.18.23.12.16;	author naddy;	state Exp;
branches;
next	1.19;
commitid	KZAl4KEiw6a3Jixw;

1.19
date	2015.12.03.21.24.29;	author sthen;	state Exp;
branches;
next	1.18;
commitid	qh8BBe4z9PLvLPKf;

1.18
date	2015.04.04.09.21.00;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	kS3kwKZogsvzYmEY;

1.17
date	2014.11.07.10.05.29;	author landry;	state Exp;
branches;
next	1.16;
commitid	iOVu9k9pbeu7sTL7;

1.16
date	2013.03.11.02.52.09;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2012.11.15.00.04.30;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2012.03.29.13.38.13;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.07.07.01.06.59;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.15.00.22.54;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.09.10.43.31;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.06.20.09.49.59;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.06.18.15.09.41;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.16.13.35.43;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.04.15.20.49.13;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2009.08.10.06.31.07;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.28.17.11.43;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2008.01.21.13.36.14;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2007.10.24.22.49.38;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2007.09.15.22.27.39;	author simon;	state Exp;
branches;
next	1.1;

1.1
date	2007.06.10.21.46.27;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.06.10.21.46.27;	author espie;	state Exp;
branches;
next	;


desc
@@


1.24
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.23 2017/07/16 19:18:50 espie Exp $

COMMENT =	document indexer
CATEGORIES =	databases devel textproc sysutils

HOMEPAGE =	https://projects.kde.org/projects/kdesupport/strigi/

# hand-rolled from strigi* submodules at quickgit.kde.org
DISTNAME =	strigi-0.7.7pl1
REVISION =	2

MASTER_SITES =	https://spacehopper.org/mirrors/ \
		ftp://3ps.if.ua/pub/OpenBSD/distfiles/ \
		http://www.ohvost.ru/dnl/kde/src/

# LGPLv2+
PERMIT_PACKAGE_CDROM =		Yes

SHARED_LIBS +=  searchclient       2.0
SHARED_LIBS +=  streamanalyzer     2.0
SHARED_LIBS +=  streams            2.0
SHARED_LIBS +=  strigihtmlgui      2.0
SHARED_LIBS +=  strigiqtdbusclient 2.0

BUILD_DEPENDS =	devel/cppunit \
		devel/boost

LIB_DEPENDS =	archivers/bzip2 \
		converters/libiconv \
		graphics/exiv2 \
		graphics/ffmpeg \
		sysutils/gamin \
		textproc/clucene>=2.3 \
		textproc/libxml \
		x11/dbus

WANTLIB =  lib/qt4/QtDBus lib/qt4/QtGui
WANTLIB += bz2 c clucene-core clucene-shared dbus-1 exiv2 fam iconv m pthread
WANTLIB += ${COMPILER_LIBCXX} xml2 z avcodec avformat avutil swscale

MODULES =		devel/cmake \
			x11/qt4

# Not ported
CONFIGURE_ARGS =	-DENABLE_LOG4CXX:Bool=No

# Depends on Java
CONFIGURE_ARGS +=	-DENABLE_REGENERATEXSD:Bool=No

.include <bsd.port.mk>
@


1.23
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2017/04/10 11:45:25 sthen Exp $
d10 1
a10 1
REVISION =	1
@


1.22
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/09/12 20:58:39 naddy Exp $
d39 1
a39 1
WANTLIB += ${LIBCXX} xml2 z avcodec avformat avutil swscale
@


1.21
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/03/18 23:12:16 naddy Exp $
d39 1
a39 1
WANTLIB += stdc++ xml2 z avcodec avformat avutil swscale
@


1.20
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/12/03 21:24:29 sthen Exp $
d29 1
d38 1
a38 1
WANTLIB += bz2 c clucene-core clucene-shared dbus-1 exiv2 fam m pthread
a41 1
			converters/libiconv \
@


1.19
log
@switch my distfiles mirror to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/04/04 09:21:00 ajacoutot Exp $
a10 1
SHARED_ONLY =	Yes
@


1.18
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/11/07 10:05:29 landry Exp $
d13 1
a13 1
MASTER_SITES =	http://spacehopper.org/mirrors/ \
@


1.17
log
@Use MODCMAKE_BUILD_SUFFIX where appropriate, bump REVISION when the PLIST
actually changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/11 02:52:09 espie Exp $
d10 1
a10 1
REVISION =	0
@


1.16
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/11/15 00:04:30 sthen Exp $
d10 1
@


1.15
log
@update strigi to a post-0.7.7 tarball rolled from git; worked on
by Vadim Zhukov, diff prepared by Amit Kulkarni
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/07/07 01:06:59 ajacoutot Exp $
a17 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
@


1.14
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@a2 1
SHARED_ONLY =	Yes
d6 1
a6 2
HOMEPAGE =	http://strigi.sourceforge.net
DISTNAME =	strigi-0.7.2
d8 3
a10 1
REVISION =	0
d12 3
a14 3
EXTRACT_SUFX =	.tar.bz2
MASTER_SITES =	http://www.vandenoever.info/software/strigi/ \
		http://spacehopper.org/mirrors/
d17 2
a18 2
PERMIT_PACKAGE_CDROM =	Yes
PERMIT_PACKAGE_FTP =	Yes
d20 22
a41 1
PERMIT_DISTFILES_FTP =	Yes
d43 3
a45 5
SHARED_LIBS +=  searchclient       1.0 # .0.5
SHARED_LIBS +=  streamanalyzer     1.0 # .0.5
SHARED_LIBS +=  streams            1.0 # .0.5
SHARED_LIBS +=  strigihtmlgui      1.0 # .0.5
SHARED_LIBS +=  strigiqtdbusclient 1.0 # .0.5
d47 2
a48 14
LIB_DEPENDS =	clucene-core->=0.9.21:textproc/clucene \
		archivers/bzip2 \
		textproc/libxml \
		x11/qt4 \
		x11/dbus \
		graphics/exiv2

WANTLIB += ICE SM X11 Xext Xi Xinerama Xrender bz2 c clucene>=1 dbus-1 exiv2 \
	fontconfig freetype glib-2.0 gthread-2.0 lib/qt4/QtCore \
	lib/qt4/QtDBus lib/qt4/QtGui m png pthread stdc++ xml2 z ${MODLIBICONV_WANTLIB}

MODULES +=		devel/cmake converters/libiconv
CONFIGURE_STYLE =	cmake
SEPARATE_BUILD =	Yes
d50 2
a51 1
CONFIGURE_ARGS +=	-DHyperEstraier_FOUND:BOOL=0
@


1.13
log
@Remove some duplicate wantlibs, use the libiconv MODULE where applicable.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/15 00:22:54 espie Exp $
d41 1
a41 1
SEPARATE_BUILD =	simple
@


1.12
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/07/09 10:43:31 espie Exp $
d10 2
d36 2
a37 2
	fontconfig freetype glib-2.0 gthread-2.0 iconv lib/qt4/QtCore \
	lib/qt4/QtDBus lib/qt4/QtGui m png pthread stdc++ xml2 z
d39 1
a39 1
MODULES +=		devel/cmake
@


1.11
log
@convert to new style LIB_DEPENDS/WANTLIB
no package change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/06/20 09:49:59 espie Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}
d26 6
a31 6
LIB_DEPENDS =	:clucene-core->=0.9.21:textproc/clucene \
		::archivers/bzip2 \
		::textproc/libxml \
		::x11/qt4 \
		::x11/dbus \
		::graphics/exiv2
d33 1
a33 1
WANTLIB += ICE SM X11 Xext Xi Xinerama Xrender bz2 c clucene.>=1 dbus-1 exiv2 \
@


1.10
log
@broken deps. package would not build -> no bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/06/18 15:09:41 sthen Exp $
a19 1
SHARED_LIBS +=  cluceneindex       1.0 # .0.5
d26 10
a35 10
LIB_DEPENDS =		clucene.>=1:clucene-core->=0.9.21:textproc/clucene \
			bz2::archivers/bzip2 \
			xml2::textproc/libxml \
			lib/qt4/QtCore,lib/qt4/QtGui,lib/qt4/QtDBus::x11/qt4 \
			dbus-1::x11/dbus \
			exiv2::graphics/exiv2

WANTLIB += ICE SM X11 Xext Xi Xinerama Xrender
WANTLIB += c fontconfig freetype glib-2.0 gthread-2.0 iconv
WANTLIB += m png pthread stdc++ z
@


1.9
log
@update strigi to 0.7.2; this and patching makecode.pl lets it build on amd64.
"go for it" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/06/16 13:35:43 espie Exp $
d27 1
a27 1
LIB_DEPENDS =		clucene->=1:clucene->=0.9.21:textproc/clucene \
@


1.8
log
@newer, prereq for kde4...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/04/15 20:49:13 dcoppa Exp $
d8 1
a8 1
DISTNAME =	strigi-0.6.4
d11 2
a12 1
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=strigi/}
d14 1
d20 6
a25 6
SHARED_LIBS +=  cluceneindex       0.0 # .0.5
SHARED_LIBS +=  searchclient       0.0 # .0.5
SHARED_LIBS +=  streamanalyzer     0.0 # .0.5
SHARED_LIBS +=  streams            0.0 # .0.5
SHARED_LIBS +=  strigihtmlgui      0.0 # .0.5
SHARED_LIBS +=  strigiqtdbusclient 0.0 # .0.5
d27 1
a27 1
LIB_DEPENDS =		clucene::textproc/clucene \
@


1.7
log
@update-plist and bump because of cmake diff.

OK landry@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/08/10 06:31:07 kili Exp $
d8 2
a9 2
DISTNAME =	strigi-0.5.10
PKGNAME =	${DISTNAME}p1
d28 7
a34 5
			lib/qt4/QtCore,lib/qt4/QtGui,lib/qt4/QtDBus::x11/qt4

WANTLIB += ICE SM X11 Xext Xi Xinerama Xrandr Xrender
WANTLIB += c dbus-1 fontconfig freetype glib-2.0 gthread-2.0 iconv
WANTLIB += m png pthread pthread-stubs stdc++ xcb z
@


1.6
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/28 17:11:43 espie Exp $
d9 1
a9 1
PKGNAME =	${DISTNAME}p0
@


1.5
log
@minor update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/01/21 13:36:14 espie Exp $
d9 1
d32 1
a32 1
WANTLIB += m png pthread stdc++ z
@


1.4
log
@update to 0.5.7, compiles and packages. To be tested for real at some
point.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/10/24 22:49:38 espie Exp $
d3 13
a15 13
SHARED_ONLY=	Yes
COMMENT=	document indexer
CATEGORIES=	databases devel textproc sysutils

HOMEPAGE=	http://strigi.sourceforge.net
DISTNAME=	strigi-0.5.7
EXTRACT_SUFX=	.tar.bz2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=strigi/}

PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d24 1
a24 1
LIB_DEPENDS=		clucene::textproc/clucene \
d27 1
a27 2
			lib/qt4/QtCore,lib/qt4/QtGui,lib/qt4/QtDBus::x11/qt4 \
			exiv2::graphics/exiv2
d29 1
a29 1
WANTLIB += ICE SM X11 Xcursor Xext Xi Xinerama Xrandr Xrender
d33 3
a35 3
MODULES+=		devel/cmake
CONFIGURE_STYLE=	cmake
SEPARATE_BUILD=		simple
d37 1
a37 1
CONFIGURE_ARGS+=-DHyperEstraier_FOUND:BOOL=0
@


1.3
log
@update to 0.5.5, required to even try to build new kde snapshot
good surprise: a lot of patches have been integrated.

Doesn't mean it works nice (in fact, half the tests fail), but it's
getting better
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/09/15 22:27:39 simon Exp $
d7 2
a8 2
HOMEPAGE=	http://www.vandenoever.info/software/strigi/
DISTNAME=	strigi-0.5.5
d10 1
a10 1
MASTER_SITES=	${HOMEPAGE}
d27 2
a28 1
			lib/qt4/QtCore,lib/qt4/QtGui,lib/qt4/QtDBus::x11/qt4
@


1.2
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/06/10 21:46:27 espie Exp $
d8 1
a8 1
DISTNAME=	strigi-0.5.1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
COMMENT=	'document indexer'
@


1.1.1.1
log
@strigi search engine, dependency of kde4.
compiles, probably doesn't run right yet.
@
text
@@
