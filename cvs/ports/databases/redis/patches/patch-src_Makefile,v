head	1.27;
access;
symbols
	OPENBSD_6_2:1.27.0.2
	OPENBSD_6_2_BASE:1.27
	OPENBSD_6_1:1.26.0.2
	OPENBSD_6_1_BASE:1.26
	OPENBSD_6_0:1.25.0.2
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.24.0.2
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.22.0.2
	OPENBSD_5_7_BASE:1.22
	OPENBSD_5_6:1.17.0.2
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.15.0.2
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.13.0.2
	OPENBSD_5_4_BASE:1.13
	OPENBSD_5_3:1.12.0.2
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.10.0.2
	OPENBSD_5_2_BASE:1.10
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2;
locks; strict;
comment	@# @;


1.27
date	2017.08.09.09.16.09;	author dcoppa;	state Exp;
branches;
next	1.26;
commitid	KL6bkeK2RgpQiU3p;

1.26
date	2016.11.01.09.07.19;	author dcoppa;	state Exp;
branches;
next	1.25;
commitid	uujOsNGxYzWxHpgW;

1.25
date	2016.05.10.09.38.48;	author dcoppa;	state Exp;
branches;
next	1.24;
commitid	nsv8lxQo5Ys4l82d;

1.24
date	2016.01.28.09.45.47;	author dcoppa;	state Exp;
branches;
next	1.23;
commitid	Oaxogc6zidWUvMLI;

1.23
date	2015.04.27.08.53.17;	author dcoppa;	state Exp;
branches;
next	1.22;
commitid	pGdrb0WrxxvKsx1d;

1.22
date	2014.12.17.08.52.16;	author dcoppa;	state Exp;
branches
	1.22.2.1;
next	1.21;
commitid	AIEPAOXJNTkt1vt6;

1.21
date	2014.12.05.09.33.09;	author dcoppa;	state Exp;
branches;
next	1.20;
commitid	WAOjA0U1BcrOo8q7;

1.20
date	2014.11.11.10.12.54;	author dcoppa;	state Exp;
branches;
next	1.19;
commitid	10nBgTwawS8W03Ob;

1.19
date	2014.09.02.08.11.46;	author dcoppa;	state Exp;
branches;
next	1.18;
commitid	HKdKyVEglF8IzW03;

1.18
date	2014.08.12.10.09.56;	author dcoppa;	state Exp;
branches;
next	1.17;
commitid	AqSdh3j7fxPR91Lp;

1.17
date	2014.04.29.08.45.28;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2014.03.12.12.07.17;	author dcoppa;	state Exp;
branches;
next	1.15;

1.15
date	2014.01.15.07.08.13;	author dcoppa;	state Exp;
branches;
next	1.14;

1.14
date	2013.11.29.08.32.24;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2013.03.14.09.00.39;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2013.01.16.13.13.03;	author dcoppa;	state Exp;
branches;
next	1.11;

1.11
date	2012.10.23.10.41.23;	author dcoppa;	state Exp;
branches;
next	1.10;

1.10
date	2012.05.31.08.25.50;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2012.05.28.07.39.36;	author dcoppa;	state Exp;
branches;
next	1.8;

1.8
date	2012.05.02.07.26.00;	author dcoppa;	state Exp;
branches;
next	1.7;

1.7
date	2012.03.19.09.27.36;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2012.02.28.11.57.11;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2011.11.29.16.07.23;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2011.11.06.11.43.00;	author rpointel;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.23.08.14.23;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2011.07.28.08.57.32;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.21.19.58.28;	author simon;	state Exp;
branches;
next	;

1.22.2.1
date	2015.06.06.18.16.19;	author dcoppa;	state Exp;
branches;
next	;
commitid	iLvvOSdUliVI6ENy;


desc
@@


1.27
log
@
Update to redis-4.0.1
@
text
@$OpenBSD: patch-src_Makefile,v 1.26 2016/11/01 09:07:19 dcoppa Exp $
Index: src/Makefile
--- src/Makefile.orig
+++ src/Makefile
@@@@ -15,8 +15,8 @@@@
 release_hdr := $(shell sh -c './mkreleasehdr.sh')
 uname_S := $(shell sh -c 'uname -s 2>/dev/null || echo not')
 uname_M := $(shell sh -c 'uname -m 2>/dev/null || echo not')
-OPTIMIZATION?=-O2
-DEPENDENCY_TARGETS=hiredis linenoise lua
+# OPTIMIZATION?=-O2
+DEPENDENCY_TARGETS=hiredis linenoise
 NODEPS:=clean distclean
 
 # Default settings
@@@@ -26,6 +26,7 @@@@ OPT=$(OPTIMIZATION)
 
 PREFIX?=/usr/local
 INSTALL_BIN=$(PREFIX)/bin
+INSTALL_SBIN=$(PREFIX)/sbin
 INSTALL=install
 
 # Default allocator defaults to Jemalloc if it's not an ARM
@@@@ -66,7 +67,7 @@@@ endif
 FINAL_CFLAGS=$(STD) $(WARN) $(OPT) $(DEBUG) $(CFLAGS) $(REDIS_CFLAGS)
 FINAL_LDFLAGS=$(LDFLAGS) $(REDIS_LDFLAGS) $(DEBUG)
 FINAL_LIBS=-lm
-DEBUG=-g -ggdb
+# DEBUG=-g -ggdb
 
 ifeq ($(uname_S),SunOS)
 	# SunOS
@@@@ -107,7 +108,7 @@@@ endif
 endif
 endif
 # Include paths to dependencies
-FINAL_CFLAGS+= -I../deps/hiredis -I../deps/linenoise -I../deps/lua/src
+FINAL_CFLAGS+= -I../deps/hiredis -I../deps/linenoise -I${MODLUA_INCL_DIR}
 
 ifeq ($(MALLOC),tcmalloc)
 	FINAL_CFLAGS+= -DUSE_TCMALLOC
@@@@ -129,6 +130,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
 REDIS_LD=$(QUIET_LINK)$(CC) $(FINAL_LDFLAGS)
 REDIS_INSTALL=$(QUIET_INSTALL)$(INSTALL)
 
+ifndef INSTALL_DIR
+	INSTALL_DIR= mkdir -p
+endif
+
 CCCOLOR="\033[34m"
 LINKCOLOR="\033[34;1m"
 SRCCOLOR="\033[33m"
@@@@ -144,7 +149,7 @@@@ endif
 
 REDIS_SERVER_NAME=redis-server
 REDIS_SENTINEL_NAME=redis-sentinel
-REDIS_SERVER_OBJ=adlist.o quicklist.o ae.o anet.o dict.o server.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o cluster.o crc16.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o blocked.o hyperloglog.o latency.o sparkline.o redis-check-rdb.o redis-check-aof.o geo.o lazyfree.o module.o evict.o expire.o geohash.o geohash_helper.o childinfo.o defrag.o siphash.o rax.o
+REDIS_SERVER_OBJ=adlist.o quicklist.o ae.o anet.o dict.o server.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o cluster.o crc16.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o blocked.o hyperloglog.o latency.o sparkline.o redis-check-rdb.o redis-check-aof.o geo.o lazyfree.o module.o evict.o expire.o geohash.o geohash_helper.o childinfo.o defrag.o siphash.o rax.o fpconv.o strbuf.o lua_bit.o lua_cjson.o lua_cmsgpack.o lua_struct.o
 REDIS_CLI_NAME=redis-cli
 REDIS_CLI_OBJ=anet.o adlist.o redis-cli.o zmalloc.o release.o anet.o ae.o crc64.o
 REDIS_BENCHMARK_NAME=redis-benchmark
@@@@ -196,7 +201,7 @@@@ endif
 
 # redis-server
 $(REDIS_SERVER_NAME): $(REDIS_SERVER_OBJ)
-	$(REDIS_LD) -o $@@ $^ ../deps/hiredis/libhiredis.a ../deps/lua/src/liblua.a $(FINAL_LIBS)
+	$(REDIS_LD) -o $@@ $^ ../deps/hiredis/libhiredis.a $(FINAL_LIBS) -L${LOCALBASE}/lib ${MODLUA_LIB}
 
 # redis-sentinel
 $(REDIS_SENTINEL_NAME): $(REDIS_SERVER_NAME)
@@@@ -239,7 +244,7 @@@@ distclean: clean
 .PHONY: distclean
 
 test: $(REDIS_SERVER_NAME) $(REDIS_CHECK_AOF_NAME)
-	@@(cd ..; ./runtest)
+	@@(cd ..; ulimit -Sd `ulimit -Hd`; ulimit -Sn `ulimit -Hn`; ulimit -Sp `ulimit -Hp`; ulimit -Ss `ulimit -Hs`; ${TCL_BIN} tests/test_helper.tcl)
 
 test-sentinel: $(REDIS_SENTINEL_NAME)
 	@@(cd ..; ./runtest-sentinel)
@@@@ -283,10 +288,11 @@@@ src/help.h:
 	@@../utils/generate-command-help.rb > help.h
 
 install: all
-	@@mkdir -p $(INSTALL_BIN)
-	$(REDIS_INSTALL) $(REDIS_SERVER_NAME) $(INSTALL_BIN)
+	$(INSTALL_DIR) $(INSTALL_BIN)
+	$(INSTALL_DIR) $(INSTALL_SBIN)
+	$(REDIS_INSTALL) $(REDIS_SERVER_NAME) $(INSTALL_SBIN)
 	$(REDIS_INSTALL) $(REDIS_BENCHMARK_NAME) $(INSTALL_BIN)
 	$(REDIS_INSTALL) $(REDIS_CLI_NAME) $(INSTALL_BIN)
 	$(REDIS_INSTALL) $(REDIS_CHECK_RDB_NAME) $(INSTALL_BIN)
 	$(REDIS_INSTALL) $(REDIS_CHECK_AOF_NAME) $(INSTALL_BIN)
-	@@ln -sf $(REDIS_SERVER_NAME) $(INSTALL_BIN)/$(REDIS_SENTINEL_NAME)
+	@@ln -sf $(REDIS_SERVER_NAME) $(INSTALL_SBIN)/$(REDIS_SENTINEL_NAME)
@


1.26
log
@
Update to redis-3.2.5
@
text
@d1 5
a5 5
$OpenBSD: patch-src_Makefile,v 1.25 2016/05/10 09:38:48 dcoppa Exp $
--- src/Makefile.orig	Wed Oct 26 09:17:45 2016
+++ src/Makefile	Tue Nov  1 10:03:38 2016
@@@@ -14,8 +14,8 @@@@
 
d8 1
d10 1
a10 1
-DEPENDENCY_TARGETS=hiredis linenoise lua geohash-int
d12 2
a13 1
+DEPENDENCY_TARGETS=hiredis linenoise geohash-int
d16 1
a16 2
 STD=-std=c99 -pedantic -DREDIS_STATIC=''
@@@@ -24,6 +24,7 @@@@ OPT=$(OPTIMIZATION)
d23 3
a25 3
 # Default allocator
@@@@ -56,7 +57,7 @@@@ endif
 FINAL_CFLAGS=$(STD) $(WARN) $(OPT) $(DEBUG) $(CFLAGS) $(REDIS_CFLAGS) -I../deps/geohash-int
d33 1
a33 1
@@@@ -90,7 +91,7 @@@@ endif
d42 1
a42 1
@@@@ -112,6 +113,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
d53 1
a53 1
@@@@ -127,7 +132,7 @@@@ endif
d57 2
a58 3
-REDIS_SERVER_OBJ=adlist.o quicklist.o ae.o anet.o dict.o server.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o cluster.o crc16.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o blocked.o hyperloglog.o latency.o sparkline.o redis-check-rdb.o geo.o
+REDIS_SERVER_OBJ=adlist.o quicklist.o ae.o anet.o dict.o server.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o cluster.o crc16.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o blocked.o hyperloglog.o latency.o sparkline.o redis-check-rdb.o geo.o fpconv.o strbuf.o lua_bit.o lua_cjson.o lua_struct.o lua_cmsgpack.o
 REDIS_GEOHASH_OBJ=../deps/geohash-int/geohash.o ../deps/geohash-int/geohash_helper.o
d61 2
a62 1
@@@@ -182,7 +187,7 @@@@ endif
d66 2
a67 2
-	$(REDIS_LD) -o $@@ $^ ../deps/hiredis/libhiredis.a ../deps/lua/src/liblua.a $(REDIS_GEOHASH_OBJ) $(FINAL_LIBS)
+	$(REDIS_LD) -o $@@ $^ ../deps/hiredis/libhiredis.a $(REDIS_GEOHASH_OBJ) $(FINAL_LIBS) -L${LOCALBASE}/lib ${MODLUA_LIB}
d71 1
a71 1
@@@@ -222,7 +227,7 @@@@ distclean: clean
d76 1
a76 1
+	@@(cd ..; ulimit -Sn `ulimit -Hn`; ${TCL_BIN} tests/test_helper.tcl)
d80 1
a80 1
@@@@ -263,10 +268,11 @@@@ src/help.h:
@


1.25
log
@
Update to redis-3.2.0
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.24 2016/01/28 09:45:47 dcoppa Exp $
--- src/Makefile.orig	Fri May  6 09:11:36 2016
+++ src/Makefile	Tue May 10 10:08:24 2016
d32 1
a32 1
@@@@ -80,7 +81,7 @@@@ endif
d41 1
a41 1
@@@@ -102,6 +103,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
d52 1
a52 1
@@@@ -117,7 +122,7 @@@@ endif
d61 1
a61 1
@@@@ -172,7 +177,7 @@@@ endif
d70 1
a70 1
@@@@ -212,7 +217,7 @@@@ distclean: clean
d79 1
a79 1
@@@@ -253,10 +258,11 @@@@ src/help.h:
@


1.24
log
@
Bugfixing update to redis-3.0.7
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.23 2015/04/27 08:53:17 dcoppa Exp $
--- src/Makefile.orig	Wed Apr  1 16:01:44 2015
+++ src/Makefile	Mon Apr 27 10:36:25 2015
d9 1
a9 1
-DEPENDENCY_TARGETS=hiredis linenoise lua
d11 1
a11 1
+DEPENDENCY_TARGETS=hiredis linenoise
d14 1
a14 1
 STD=-std=c99 -pedantic
d23 2
a24 2
@@@@ -52,7 +53,7 @@@@ endif
 FINAL_CFLAGS=$(STD) $(WARN) $(OPT) $(DEBUG) $(CFLAGS) $(REDIS_CFLAGS)
d32 1
a32 1
@@@@ -76,7 +77,7 @@@@ endif
d41 1
a41 1
@@@@ -98,6 +99,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
d52 1
a52 1
@@@@ -113,7 +118,7 @@@@ endif
d56 3
a58 2
-REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o cluster.o crc16.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o blocked.o hyperloglog.o latency.o sparkline.o
+REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o cluster.o crc16.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o blocked.o hyperloglog.o latency.o sparkline.o fpconv.o strbuf.o lua_bit.o lua_cjson.o lua_struct.o lua_cmsgpack.o
d60 2
a61 3
 REDIS_CLI_OBJ=anet.o sds.o adlist.o redis-cli.o zmalloc.o release.o anet.o ae.o crc64.o
 REDIS_BENCHMARK_NAME=redis-benchmark
@@@@ -168,7 +173,7 @@@@ endif
d65 2
a66 2
-	$(REDIS_LD) -o $@@ $^ ../deps/hiredis/libhiredis.a ../deps/lua/src/liblua.a $(FINAL_LIBS)
+	$(REDIS_LD) -o $@@ $^ ../deps/hiredis/libhiredis.a $(FINAL_LIBS) -L${LOCALBASE}/lib ${MODLUA_LIB}
d70 1
a70 1
@@@@ -208,7 +213,7 @@@@ distclean: clean
d79 1
a79 1
@@@@ -245,10 +250,11 @@@@ src/help.h:
d90 1
a90 1
 	$(REDIS_INSTALL) $(REDIS_CHECK_DUMP_NAME) $(INSTALL_BIN)
@


1.23
log
@
Update to redis-3.0.0
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile,v 1.22 2014/12/17 08:52:16 dcoppa Exp $
d75 1
a75 1
+	@@(cd ..; ulimit -Sn 192; ${TCL_BIN} tests/test_helper.tcl)
@


1.22
log
@
Update to redis-2.8.19
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.21 2014/12/05 09:33:09 dcoppa Exp $
--- src/Makefile.orig	Tue Dec 16 02:18:20 2014
+++ src/Makefile	Wed Dec 17 02:28:04 2014
d56 2
a57 2
-REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o hyperloglog.o latency.o sparkline.o
+REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o hyperloglog.o latency.o sparkline.o fpconv.o strbuf.o lua_bit.o lua_cjson.o lua_struct.o lua_cmsgpack.o
d92 1
a92 1
-	@@ln -sf $(INSTALL_BIN)/$(REDIS_SERVER_NAME) $(INSTALL_BIN)/$(REDIS_SENTINEL_NAME)
@


1.22.2.1
log
@
Security update to redis-2.8.21

Redis EVAL Lua Sandbox Escape: http://benmmurphy.github.io/blog/2015/06/04/redis-eval-lua-sandbox-escape/
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.22 2014/12/17 08:52:16 dcoppa Exp $
--- src/Makefile.orig	Thu Jun  4 11:32:24 2015
+++ src/Makefile	Sat Jun  6 14:53:48 2015
d92 1
a92 1
-	@@ln -sf $(REDIS_SERVER_NAME) $(INSTALL_BIN)/$(REDIS_SENTINEL_NAME)
@


1.21
log
@
Update to redis-2.8.18
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.20 2014/11/11 10:12:54 dcoppa Exp $
--- src/Makefile.orig	Fri Sep 19 17:49:16 2014
+++ src/Makefile	Tue Nov 11 09:56:22 2014
d79 1
a79 1
@@@@ -245,8 +250,10 @@@@ src/help.h:
a87 1
+	$(REDIS_INSTALL) $(REDIS_SENTINEL_NAME) $(INSTALL_SBIN)
d91 3
@


1.20
log
@
As pointed out by sthen@@, daemons should be in sbin not bin
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile,v 1.19 2014/09/02 08:11:46 dcoppa Exp $
d57 1
a57 1
+REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o hyperloglog.o latency.o sparkline.o strbuf.o lua_cjson.o lua_struct.o lua_cmsgpack.o
@


1.19
log
@
Update to redis-2.8.14
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.18 2014/08/12 10:09:56 dcoppa Exp $
--- src/Makefile.orig	Mon Sep  1 17:00:38 2014
+++ src/Makefile	Tue Sep  2 10:05:30 2014
d15 9
a23 1
@@@@ -52,7 +52,7 @@@@ endif
d32 1
a32 1
@@@@ -76,7 +76,7 @@@@ endif
d41 1
a41 1
@@@@ -98,6 +98,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
d52 1
a52 1
@@@@ -113,7 +117,7 @@@@ endif
d61 1
a61 1
@@@@ -168,7 +172,7 @@@@ endif
d70 1
a70 1
@@@@ -208,7 +212,7 @@@@ distclean: clean
d79 1
a79 1
@@@@ -245,7 +249,7 @@@@ src/help.h:
d84 1
d86 3
a88 1
 	$(REDIS_INSTALL) $(REDIS_SERVER_NAME) $(INSTALL_BIN)
d91 1
@


1.18
log
@
Update to redis-2.8.13
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.17 2014/04/29 08:45:28 dcoppa Exp $
--- src/Makefile.orig	Wed Mar  5 14:42:50 2014
+++ src/Makefile	Wed Mar 12 12:58:14 2014
d24 2
a25 1
@@@@ -70,7 +70,7 @@@@ endif
a26 1
 
d33 1
a33 1
@@@@ -92,6 +92,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
d44 1
a44 1
@@@@ -107,7 +111,7 @@@@ endif
d53 1
a53 1
@@@@ -162,7 +166,7 @@@@ endif
d62 1
a62 1
@@@@ -202,7 +206,7 @@@@ distclean: clean
d71 1
a71 1
@@@@ -239,7 +243,7 @@@@ src/help.h:
@


1.17
log
@Update to redis-2.8.9
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile,v 1.16 2014/03/12 12:07:17 dcoppa Exp $
d48 2
a49 2
-REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o hyperloglog.o
+REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o hyperloglog.o strbuf.o lua_cjson.o lua_struct.o lua_cmsgpack.o
@


1.16
log
@Update to redis-2.8.7
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile,v 1.15 2014/01/15 07:08:13 dcoppa Exp $
d48 2
a49 2
-REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o
+REDIS_SERVER_OBJ=adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o notify.o setproctitle.o strbuf.o lua_cjson.o lua_struct.o lua_cmsgpack.o
@


1.15
log
@
Update to redis-2.8.4
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.14 2013/11/29 08:32:24 dcoppa Exp $
--- src/Makefile.orig	Mon Jan 13 17:09:58 2014
+++ src/Makefile	Tue Jan 14 17:08:22 2014
d69 3
a71 3
 check: test
 
@@@@ -236,7 +240,7 @@@@ src/help.h:
@


1.14
log
@Update to redis-2.8.1
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.13 2013/03/14 09:00:39 dcoppa Exp $
--- src/Makefile.orig	Mon Nov 25 11:21:49 2013
+++ src/Makefile	Wed Nov 27 15:34:06 2013
d23 2
a24 7
 	INSTALL=cp -pf
@@@@ -61,12 +61,11 @@@@ ifeq ($(uname_S),SunOS)
 else ifeq ($(uname_S),Darwin)
 	
 else
-	FINAL_LDFLAGS+= -rdynamic
 	FINAL_LIBS+= -pthread
d33 1
a33 1
@@@@ -88,6 +87,10 @@@@ REDIS_CC=$(QUIET_CC)$(CC) $(FINAL_CFLAGS)
d44 1
a44 1
@@@@ -103,7 +106,7 @@@@ endif
d53 1
a53 1
@@@@ -158,7 +161,7 @@@@ endif
d62 1
a62 1
@@@@ -198,7 +201,7 @@@@ distclean: clean
d71 1
a71 1
@@@@ -232,7 +235,7 @@@@ src/help.h:
@


1.13
log
@Update to redis-2.6.11
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile,v 1.12 2013/01/16 13:13:03 dcoppa Exp $
--- src/Makefile.orig	Mon Mar 11 19:51:10 2013
+++ src/Makefile	Thu Mar 14 09:28:12 2013
@@@@ -14,12 +14,12 @@@@
d14 13
a26 8
 STD= -std=c99 -pedantic
-WARN= -Wall
+# WARN= -Wall
 OPT= $(OPTIMIZATION)
 
 # Default allocator
@@@@ -52,13 +52,13 @@@@ ifeq ($(uname_S),SunOS)
   DEBUG= -g -ggdb
d28 2
a29 6
   FINAL_CFLAGS= $(STD) $(WARN) $(OPT) $(DEBUG) $(CFLAGS) $(REDIS_CFLAGS)
-  FINAL_LDFLAGS= $(LDFLAGS) $(REDIS_LDFLAGS) -g -rdynamic -ggdb
+  FINAL_LDFLAGS= $(LDFLAGS) $(REDIS_LDFLAGS)
   FINAL_LIBS= -lm -pthread
-  DEBUG= -g -rdynamic -ggdb
+# DEBUG= -g -rdynamic -ggdb
d37 4
a40 4
   FINAL_CFLAGS+= -DUSE_TCMALLOC
@@@@ -84,6 +84,10 @@@@ PREFIX?=/usr/local
 INSTALL_BIN= $(PREFIX)/bin
 INSTALL= cp -pf
d43 1
a43 1
+  INSTALL_DIR= mkdir -p
d49 1
a49 1
@@@@ -99,7 +103,7 @@@@ endif
d51 8
a58 8
 REDIS_SERVER_NAME= redis-server
 REDIS_SENTINEL_NAME= redis-sentinel
-REDIS_SERVER_OBJ= adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o
+REDIS_SERVER_OBJ= adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o pubsub.o multi.o debug.o sort.o intset.o syncio.o migrate.o endianconv.o slowlog.o scripting.o bio.o rio.o rand.o memtest.o crc64.o bitops.o sentinel.o strbuf.o lua_cjson.o lua_struct.o lua_cmsgpack.o
 REDIS_CLI_NAME= redis-cli
 REDIS_CLI_OBJ= anet.o sds.o adlist.o redis-cli.o zmalloc.o release.o anet.o ae.o
 REDIS_BENCHMARK_NAME= redis-benchmark
@@@@ -154,7 +158,7 @@@@ endif
d67 1
a67 1
@@@@ -194,7 +198,7 @@@@ distclean: clean
d74 3
a76 3
 lcov:
 	$(MAKE) gcov
@@@@ -226,7 +230,7 @@@@ src/help.h:
d80 1
a80 1
-	mkdir -p $(INSTALL_BIN)
@


1.12
log
@Switch Redis to use lua from ports instead of the one that comes
bundled with it.

OK jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.11 2012/10/23 10:41:23 dcoppa Exp $
--- src/Makefile.orig	Thu Jan 10 17:15:16 2013
+++ src/Makefile	Wed Jan 16 13:20:46 2013
d75 1
a75 1
@@@@ -223,7 +227,7 @@@@ src/help.h:
@


1.11
log
@Update to redis-2.6.0

https://raw.github.com/antirez/redis/2.6/00-RELEASENOTES

All tests passed without errors on sparc64: yay!
@
text
@d1 20
a20 4
$OpenBSD: patch-src_Makefile,v 1.10 2012/05/31 08:25:50 dcoppa Exp $
--- src/Makefile.orig	Mon Oct 22 23:27:18 2012
+++ src/Makefile	Tue Oct 23 11:08:06 2012
@@@@ -52,9 +52,9 @@@@ ifeq ($(uname_S),SunOS)
d28 1
a28 1
+  DEBUG?= -g -rdynamic -ggdb
d32 5
d48 18
@


1.10
log
@Override some variables into port's Makefile to reduce clutter from
patches/patch-src_Makefile; no pkg changes, no bump.

While here, reorganize port's Makefile as per template.
@
text
@d1 16
a16 4
$OpenBSD: patch-src_Makefile,v 1.9 2012/05/28 07:39:36 dcoppa Exp $
--- src/Makefile.orig	Wed May 23 11:32:58 2012
+++ src/Makefile	Thu May 31 10:03:16 2012
@@@@ -58,7 +58,11 @@@@ PREFIX?=/usr/local
a19 1
-OBJ = adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o vm.o pubsub.o multi.o debug.o sort.o intset.o syncio.o slowlog.o bio.o memtest.o
d24 5
a28 33
+OBJ = adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o vm.o pubsub.o multi.o debug.o sort.o intset.o syncio.o endian.o slowlog.o bio.o memtest.o
 BENCHOBJ = ae.o anet.o redis-benchmark.o sds.o adlist.o zmalloc.o
 CLIOBJ = anet.o sds.o adlist.o redis-cli.o zmalloc.o release.o ae.o
 CHECKDUMPOBJ = redis-check-dump.o lzf_c.o lzf_d.o
@@@@ -149,9 +153,7 @@@@ zmalloc.o: zmalloc.c config.h zmalloc.h
 .PHONY: dependencies
 
 dependencies:
-	@@printf '%b %b\n' $(MAKECOLOR)MAKE$(ENDCOLOR) $(BINCOLOR)hiredis$(ENDCOLOR)
 	@@cd ../deps/hiredis && $(MAKE) static ARCH="$(ARCH)"
-	@@printf '%b %b\n' $(MAKECOLOR)MAKE$(ENDCOLOR) $(BINCOLOR)linenoise$(ENDCOLOR)
 	@@cd ../deps/linenoise && $(MAKE) ARCH="$(ARCH)"
 
 ../deps/jemalloc/lib/libjemalloc.a:
@@@@ -162,7 +164,6 @@@@ redis-benchmark.o:
 	$(QUIET_CC)$(CC) -c $(CFLAGS) -I../deps/hiredis $(DEBUG) $(COMPILE_TIME) $<
 
 redis-benchmark: dependencies $(BENCHOBJ)
-	@@printf '%b %b\n' $(MAKECOLOR)MAKE$(ENDCOLOR) $(BINCOLOR)hiredis$(ENDCOLOR)
 	@@cd ../deps/hiredis && $(MAKE) static ARCH="$(ARCH)"
 	$(QUIET_LINK)$(CC) -o $(BENCHPRGNAME) $(CCOPT) $(DEBUG) $(BENCHOBJ) ../deps/hiredis/libhiredis.a $(CCLINK) $(ALLOC_LINK)
 
@@@@ -185,7 +186,7 @@@@ redis-check-aof: $(CHECKAOFOBJ)
 	$(QUIET_LINK)$(CC) -o $(CHECKAOFPRGNAME) $(CCOPT) $(DEBUG) $(CHECKAOFOBJ) $(CCLINK)
 
 redis-server: $(OBJ)
-	$(QUIET_LINK)$(CC) -o $(PRGNAME) $(CCOPT) $(DEBUG) $(OBJ) $(CCLINK) $(ALLOC_LINK)
+	$(QUIET_LINK)$(CC) -Wl,--export-dynamic -o $(PRGNAME) $(CCOPT) $(DEBUG) $(OBJ) $(CCLINK) -L${LOCALBASE}/lib -lexecinfo $(ALLOC_LINK)
 
 # Because the jemalloc.h header is generated as a part of the jemalloc build
 # process, building it should complete before building any other object.
@@@@ -202,7 +203,7 @@@@ dep:
 	$(CC) -MM *.c -I ../deps/hiredis -I ../deps/linenoise
d30 1
a30 1
 test: redis-server redis-check-aof
d34 4
a37 4
 bench:
 	./redis-benchmark
@@@@ -229,7 +230,7 @@@@ noopt:
 	$(MAKE) PROF="-pg" ARCH="-arch i386"
d42 3
a44 3
 	$(INSTALL) $(PRGNAME) $(INSTALL_BIN)
 	$(INSTALL) $(BENCHPRGNAME) $(INSTALL_BIN)
 	$(INSTALL) $(CLIPRGNAME) $(INSTALL_BIN)
@


1.9
log
@Bugfixing update to redis-2.4.14
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile,v 1.8 2012/05/02 07:26:00 dcoppa Exp $
d3 1
a3 19
+++ src/Makefile	Mon May 28 09:16:31 2012
@@@@ -4,7 +4,7 @@@@
 
 release_hdr := $(shell sh -c './mkreleasehdr.sh')
 uname_S := $(shell sh -c 'uname -s 2>/dev/null || echo not')
-OPTIMIZATION?=-O2
+# OPTIMIZATION?=-O2
 
 CCCOLOR="\033[34m"
 LINKCOLOR="\033[34;1m"
@@@@ -31,7 +31,7 @@@@ ifeq ($(uname_S),SunOS)
 else
   CFLAGS?=-std=c99 -pedantic $(OPTIMIZATION) -Wall -W $(ARCH) $(PROF)
   CCLINK?=-lm -pthread
-  DEBUG?=-g -rdynamic -ggdb
+#  DEBUG?=-g -rdynamic -ggdb
 endif
 
 ifeq ($(USE_TCMALLOC),yes)
@


1.8
log
@Bugfix update to redis-2.4.12
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.7 2012/03/19 09:27:36 dcoppa Exp $
--- src/Makefile.orig	Mon Apr 30 12:27:50 2012
+++ src/Makefile	Wed May  2 09:11:21 2012
d22 1
a22 6
@@@@ -54,11 +54,15 @@@@ endif
 
 CCOPT= $(CFLAGS) $(ARCH) $(PROF)
 
-PREFIX= /usr/local
+PREFIX?= /usr/local
d33 1
a33 1
 CLIOBJ = anet.o sds.o adlist.o redis-cli.o zmalloc.o release.o
@


1.7
log
@bugfix update to redis-2.4.9
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.6 2012/02/28 11:57:11 dcoppa Exp $
--- src/Makefile.orig	Wed Feb 22 14:23:43 2012
+++ src/Makefile	Tue Feb 28 12:37:49 2012
d63 1
a63 1
+	$(QUIET_LINK)$(CC) -o $(PRGNAME) $(CCOPT) $(DEBUG) $(OBJ) $(CCLINK) -L${LOCALBASE}/lib -lexecinfo $(ALLOC_LINK)
@


1.6
log
@Update to 2.4.8
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile,v 1.5 2011/11/29 16:07:23 dcoppa Exp $
d31 1
a31 1
-OBJ = adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o vm.o pubsub.o multi.o debug.o sort.o intset.o syncio.o slowlog.o bio.o
d36 1
a36 1
+OBJ = adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o vm.o pubsub.o multi.o debug.o sort.o intset.o syncio.o endian.o slowlog.o bio.o
@


1.5
log
@- Update to redis-2.4.4
- Enable backtracing support using libexecinfo's backtrace()
- Add a rc script

rc_script diff from william@@, who seems to have disappeared...
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.4 2011/11/06 11:43:00 rpointel Exp $
--- src/Makefile.orig	Mon Nov 28 11:22:08 2011
+++ src/Makefile	Tue Nov 29 16:36:10 2011
d29 1
a29 1
 INSTALL= cp -p
d67 1
a67 1
@@@@ -199,7 +200,7 @@@@ dep:
d76 1
a76 1
@@@@ -226,7 +227,7 @@@@ noopt:
@


1.4
log
@update redis to 2.4.2 with few tweaks by dcoppa@@.
ok dcoppa@@ (maintainer).
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.3 2011/09/23 08:14:23 dcoppa Exp $
--- src/Makefile.orig	Wed Oct 26 16:16:33 2011
+++ src/Makefile	Sat Nov  5 13:47:06 2011
d58 9
@


1.3
log
@Maintainance update to redis-2.2.14
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.2 2011/07/28 08:57:32 dcoppa Exp $
--- src/Makefile.orig	Fri Sep 23 09:55:45 2011
+++ src/Makefile	Fri Sep 23 09:58:49 2011
d13 1
a13 1
@@@@ -25,7 +25,7 @@@@ ifeq ($(uname_S),SunOS)
d15 4
a18 4
   CFLAGS?= -std=c99 -pedantic $(OPTIMIZATION) -Wall -W $(ARCH) $(PROF)
   CCLINK?= -lm -pthread
-  DEBUG?= -g -rdynamic -ggdb 
+# DEBUG?= -g -rdynamic -ggdb 
d22 2
a23 2
@@@@ -34,10 +34,14 @@@@ ifeq ($(USE_TCMALLOC),yes)
 endif
d31 1
d36 1
a36 1
 OBJ = adlist.o ae.o anet.o dict.o redis.o sds.o zmalloc.o lzf_c.o lzf_d.o pqsort.o zipmap.o sha1.o ziplist.o release.o networking.o util.o object.o db.o replication.o rdb.o t_string.o t_list.o t_set.o t_zset.o t_hash.o config.o aof.o vm.o pubsub.o multi.o debug.o sort.o intset.o syncio.o slowlog.o
d39 3
a41 2
@@@@ -124,16 +128,13 @@@@ zipmap.o: zipmap.c zmalloc.h
 zmalloc.o: zmalloc.c config.h zmalloc.h
d45 1
a45 1
 	cd ../deps/hiredis && $(MAKE) static ARCH="$(ARCH)"
d47 1
a47 1
 	cd ../deps/linenoise && $(MAKE) ARCH="$(ARCH)"
d49 3
a51 2
 redis-server: $(OBJ)
 	$(QUIET_LINK)$(CC) -o $(PRGNAME) $(CCOPT) $(DEBUG) $(OBJ) $(CCLINK)
d55 2
a56 2
 	cd ../deps/hiredis && $(MAKE) static ARCH="$(ARCH)"
 	$(QUIET_LINK)$(CC) -o $(BENCHPRGNAME) $(CCOPT) $(DEBUG) $(BENCHOBJ) ../deps/hiredis/libhiredis.a $(CCLINK)
d58 1
a58 1
@@@@ -162,7 +163,7 @@@@ dep:
d61 3
a63 3
 test: redis-server
-	(cd ..; tclsh8.5 tests/test_helper.tcl --tags "${TAGS}" --file "${FILE}")
+	(cd ..; ulimit -Sn 192; ${TCL_BIN} tests/test_helper.tcl --tags "${TAGS}" --file "${FILE}")
d67 1
a67 1
@@@@ -189,7 +190,7 @@@@ noopt:
@


1.2
log
@Update to redis-2.2.12.
Clean makefiles from colors, optimizations, and other amenities.

ok rpointel@@
@
text
@d1 3
a3 3
$OpenBSD: patch-src_Makefile,v 1.1 2011/03/21 19:58:28 simon Exp $
--- src/Makefile.orig	Fri Jul 22 12:22:26 2011
+++ src/Makefile	Wed Jul 27 09:41:11 2011
d24 1
a24 1
 CCOPT= $(CFLAGS) $(CCLINK) $(ARCH) $(PROF)
d48 1
a48 1
 	$(QUIET_LINK)$(CC) -o $(PRGNAME) $(CCOPT) $(DEBUG) $(OBJ)
d53 1
a53 1
 	$(QUIET_LINK)$(CC) -o $(BENCHPRGNAME) $(CCOPT) $(DEBUG) $(BENCHOBJ) ../deps/hiredis/libhiredis.a
@


1.1
log
@update to version 2.2.2

with tweaks from dcoppa@@ (maintainer)
@
text
@d1 22
a22 4
$OpenBSD$
--- src/Makefile.orig	Fri Mar  4 16:31:20 2011
+++ src/Makefile	Sun Mar 20 18:05:46 2011
@@@@ -21,7 +21,7 @@@@ ifeq ($(USE_TCMALLOC),yes)
d31 26
a56 2
@@@@ -142,7 +142,7 @@@@ dep:
 	$(CC) -MM *.c
d64 9
@

