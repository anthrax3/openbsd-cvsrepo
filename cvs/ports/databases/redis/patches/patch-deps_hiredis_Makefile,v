head	1.7;
access;
symbols
	OPENBSD_6_2:1.7.0.2
	OPENBSD_6_2_BASE:1.7
	OPENBSD_6_1:1.6.0.12
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.10
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.6
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.8
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.4
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.2
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.5.0.2
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.4.0.4
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2017.08.09.09.16.09;	author dcoppa;	state Exp;
branches;
next	1.6;
commitid	KL6bkeK2RgpQiU3p;

1.6
date	2014.07.12.09.53.57;	author dcoppa;	state Exp;
branches;
next	1.5;
commitid	Iyun1meNnoZ1mgZP;

1.5
date	2013.12.03.06.50.17;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2013.01.16.13.13.03;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2012.11.23.08.29.42;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2012.02.28.11.57.11;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2011.07.28.08.57.32;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.7
log
@
Update to redis-4.0.1
@
text
@$OpenBSD: patch-deps_hiredis_Makefile,v 1.6 2014/07/12 09:53:57 dcoppa Exp $
Index: deps/hiredis/Makefile
--- deps/hiredis/Makefile.orig
+++ deps/hiredis/Makefile
@@@@ -38,9 +38,9 @@@@ export REDIS_TEST_CONFIG
 # Fallback to gcc when $CC is not in $PATH.
 CC:=$(shell sh -c 'type $(CC) >/dev/null 2>/dev/null && echo $(CC) || echo gcc')
 CXX:=$(shell sh -c 'type $(CXX) >/dev/null 2>/dev/null && echo $(CXX) || echo g++')
-OPTIMIZATION?=-O3
+# OPTIMIZATION?=-O3
 WARNINGS=-Wall -W -Wstrict-prototypes -Wwrite-strings
-DEBUG_FLAGS?= -g -ggdb
+# DEBUG_FLAGS?= -g -ggdb
 REAL_CFLAGS=$(OPTIMIZATION) -fPIC $(CFLAGS) $(WARNINGS) $(DEBUG_FLAGS) $(ARCH)
 REAL_LDFLAGS=$(LDFLAGS) $(ARCH)
 
@@@@ -167,6 +167,10 @@@@ endif
 
 INSTALL?= cp -a
 
+ifndef INSTALL_DIR
+  INSTALL_DIR= mkdir -p
+endif
+
 $(PKGCONFNAME): hiredis.h
 	@@echo "Generating $@@ for pkgconfig..."
 	@@echo prefix=$(PREFIX) > $@@
@@@@ -181,7 +185,7 @@@@ $(PKGCONFNAME): hiredis.h
 	@@echo Cflags: -I\$${includedir} -D_FILE_OFFSET_BITS=64 >> $@@
 
 install: $(DYLIBNAME) $(STLIBNAME) $(PKGCONFNAME)
-	mkdir -p $(INSTALL_INCLUDE_PATH) $(INSTALL_LIBRARY_PATH)
+	$(INSTALL_DIR) $(INSTALL_INCLUDE_PATH) $(INSTALL_LIBRARY_PATH)
 	$(INSTALL) hiredis.h async.h read.h sds.h adapters $(INSTALL_INCLUDE_PATH)
 	$(INSTALL) $(DYLIBNAME) $(INSTALL_LIBRARY_PATH)/$(DYLIB_MINOR_NAME)
 	cd $(INSTALL_LIBRARY_PATH) && ln -sf $(DYLIB_MINOR_NAME) $(DYLIBNAME)
@


1.6
log
@
Update to redis-2.8.12
@
text
@d1 5
a5 5
$OpenBSD: patch-deps_hiredis_Makefile,v 1.5 2013/12/03 06:50:17 dcoppa Exp $
--- deps/hiredis/Makefile.orig	Mon Jun 23 16:56:18 2014
+++ deps/hiredis/Makefile	Sat Jul 12 11:06:45 2014
@@@@ -25,9 +25,9 @@@@ export REDIS_TEST_CONFIG
 
d8 1
d12 3
a14 3
-DEBUG?= -g -ggdb
+# DEBUG?= -g -ggdb
 REAL_CFLAGS=$(OPTIMIZATION) -fPIC $(CFLAGS) $(WARNINGS) $(DEBUG) $(ARCH)
d17 1
a17 1
@@@@ -134,8 +134,12 @@@@ endif
d25 7
a31 1
 install: $(DYLIBNAME) $(STLIBNAME)
d34 1
a34 1
 	$(INSTALL) hiredis.h async.h adapters $(INSTALL_INCLUDE_PATH)
d36 1
a36 1
 	cd $(INSTALL_LIBRARY_PATH) && ln -sf $(DYLIB_MINOR_NAME) $(DYLIB_MAJOR_NAME)
@


1.5
log
@Update to redis-2.8.2
@
text
@d1 4
a4 4
$OpenBSD: patch-deps_hiredis_Makefile,v 1.4 2013/01/16 13:13:03 dcoppa Exp $
--- deps/hiredis/Makefile.orig	Mon Dec  2 16:07:46 2013
+++ deps/hiredis/Makefile	Tue Dec  3 07:51:33 2013
@@@@ -12,9 +12,9 @@@@ HIREDIS_MINOR=10
d16 1
a16 1
@@@@ -116,8 +116,12 @@@@ endif
@


1.4
log
@Switch Redis to use lua from ports instead of the one that comes
bundled with it.

OK jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-deps_hiredis_Makefile,v 1.3 2012/11/23 08:29:42 dcoppa Exp $
--- deps/hiredis/Makefile.orig	Thu Jan 10 17:15:16 2013
+++ deps/hiredis/Makefile	Wed Jan 16 13:12:52 2013
d9 2
a10 1
-WARNINGS=-Wall -W -Wstrict-prototypes -Wwrite-strings
a11 2
+# OPTIMIZATION?=-O3
+WARNINGS=-Wstrict-prototypes -Wwrite-strings
@


1.3
log
@Update to redis-2.6.5
@
text
@d1 3
a3 3
$OpenBSD: patch-deps_hiredis_Makefile,v 1.2 2012/02/28 11:57:11 dcoppa Exp $
--- deps/hiredis/Makefile.orig	Thu Nov 22 17:03:27 2012
+++ deps/hiredis/Makefile	Fri Nov 23 09:19:06 2012
d9 2
d12 1
a12 2
 WARNINGS=-Wall -W -Wstrict-prototypes -Wwrite-strings
-DEBUG?= -g -ggdb
@


1.2
log
@Update to 2.4.8
@
text
@d1 3
a3 3
$OpenBSD: patch-deps_hiredis_Makefile,v 1.1 2011/07/28 08:57:32 dcoppa Exp $
--- deps/hiredis/Makefile.orig	Wed Feb 22 14:23:43 2012
+++ deps/hiredis/Makefile	Tue Feb 28 12:41:24 2012
d9 2
a10 1
-WARNINGS=-Wall -W -Wstrict-prototypes -Wwrite-strings
a11 2
+# OPTIMIZATION?=-O3
+WARNINGS=-Wstrict-prototypes -Wwrite-strings
@


1.1
log
@Update to redis-2.2.12.
Clean makefiles from colors, optimizations, and other amenities.

ok rpointel@@
@
text
@d1 4
a4 5
$OpenBSD$
--- deps/hiredis/Makefile.orig	Fri Jul 22 12:22:26 2011
+++ deps/hiredis/Makefile	Wed Jul 27 09:40:00 2011
@@@@ -6,7 +6,7 @@@@ OBJ = net.o hiredis.o sds.o async.o
 BINS = hiredis-example hiredis-test
d6 2
a7 1
 uname_S := $(shell sh -c 'uname -s 2>/dev/null || echo not')
d9 2
d12 4
a15 5
 ifeq ($(uname_S),SunOS)
   CFLAGS?=-std=c99 -pedantic $(OPTIMIZATION) -fPIC -Wall -W -D__EXTENSIONS__ -D_XPG6 $(ARCH) $(PROF)
   CCLINK?=-ldl -lnsl -lsocket -lm -lpthread
@@@@ -37,13 +37,17 @@@@ endif
 endif
d17 1
a17 3
 CCOPT= $(CFLAGS) $(CCLINK)
-DEBUG?= -g -ggdb
+# DEBUG?= -g -ggdb
d19 1
a19 4
 PREFIX?= /usr/local
 INSTALL_INC= $(PREFIX)/include/hiredis
 INSTALL_LIB= $(PREFIX)/lib
 INSTALL= cp -a
d25 6
a30 12
 all: ${DYLIBNAME} ${BINS}
 
 # Deps (use make dep to generate this)
@@@@ -95,7 +99,7 @@@@ dep:
 	$(CC) -MM *.c
 
 install: ${DYLIBNAME} ${STLIBNAME}
-	mkdir -p $(INSTALL_INC) $(INSTALL_LIB)
+	$(INSTALL_DIR) $(INSTALL_INC) $(INSTALL_LIB)
 	$(INSTALL) hiredis.h async.h adapters $(INSTALL_INC)
 	$(INSTALL) ${DYLIBNAME} ${STLIBNAME} $(INSTALL_LIB)
 
@

