head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.2
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.2.0.4
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2017.08.09.09.16.09;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	KL6bkeK2RgpQiU3p;

1.2
date	2016.05.10.12.45.28;	author dcoppa;	state Exp;
branches;
next	1.1;
commitid	Rs1NjqVv6MaawcKs;

1.1
date	2016.05.10.09.38.48;	author dcoppa;	state Exp;
branches;
next	;
commitid	nsv8lxQo5Ys4l82d;


desc
@@


1.3
log
@
Update to redis-4.0.1
@
text
@$OpenBSD: patch-src_server_h,v 1.2 2016/05/10 12:45:28 dcoppa Exp $
Index: src/server.h
--- src/server.h.orig
+++ src/server.h
@@@@ -98,7 +98,7 @@@@ typedef long long mstime_t; /* millisecond time type. 
 #define AOF_READ_DIFF_INTERVAL_BYTES (1024*10)
 #define CONFIG_DEFAULT_SLOWLOG_LOG_SLOWER_THAN 10000
 #define CONFIG_DEFAULT_SLOWLOG_MAX_LEN 128
-#define CONFIG_DEFAULT_MAX_CLIENTS 10000
+#define CONFIG_DEFAULT_MAX_CLIENTS 96
 #define CONFIG_AUTHPASS_MAX_LEN 512
 #define CONFIG_DEFAULT_SLAVE_PRIORITY 100
 #define CONFIG_DEFAULT_REPL_TIMEOUT 60
@@@@ -109,7 +109,7 @@@@ typedef long long mstime_t; /* millisecond time type. 
 #define CONFIG_DEFAULT_REPL_BACKLOG_TIME_LIMIT (60*60)  /* 1 hour */
 #define CONFIG_REPL_BACKLOG_MIN_SIZE (1024*16)          /* 16k */
 #define CONFIG_BGSAVE_RETRY_DELAY 5 /* Wait a few secs before trying again. */
-#define CONFIG_DEFAULT_PID_FILE "/var/run/redis.pid"
+#define CONFIG_DEFAULT_PID_FILE "/var/run/redis/redis.pid"
 #define CONFIG_DEFAULT_SYSLOG_IDENT "redis"
 #define CONFIG_DEFAULT_CLUSTER_CONFIG_FILE "nodes.conf"
 #define CONFIG_DEFAULT_CLUSTER_ANNOUNCE_IP NULL         /* Auto detect. */
@


1.2
log
@
Set default max clients to 96 here too, like we did in redis.conf
@
text
@d1 6
a6 5
$OpenBSD: patch-src_server_h,v 1.1 2016/05/10 09:38:48 dcoppa Exp $
--- src/server.h.orig	Tue May 10 10:20:32 2016
+++ src/server.h	Tue May 10 10:21:24 2016
@@@@ -94,7 +94,7 @@@@ typedef long long mstime_t; /* millisecond time type. 
 #define AOF_REWRITE_ITEMS_PER_CMD 64
d14 1
a14 1
@@@@ -105,7 +105,7 @@@@ typedef long long mstime_t; /* millisecond time type. 
d22 1
a22 1
 #define CONFIG_DEFAULT_DAEMONIZE 0
@


1.1
log
@
Update to redis-3.2.0
@
text
@d1 1
a1 1
$OpenBSD$
d4 9
@

