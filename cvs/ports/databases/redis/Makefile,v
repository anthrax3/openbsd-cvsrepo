head	1.98;
access;
symbols
	OPENBSD_6_1:1.96.0.2
	OPENBSD_6_1_BASE:1.96
	OPENBSD_6_0:1.91.0.2
	OPENBSD_6_0_BASE:1.91
	OPENBSD_5_9:1.88.0.2
	OPENBSD_5_9_BASE:1.88
	OPENBSD_5_8:1.83.0.4
	OPENBSD_5_8_BASE:1.83
	OPENBSD_5_7:1.78.0.2
	OPENBSD_5_7_BASE:1.78
	OPENBSD_5_6:1.67.0.2
	OPENBSD_5_6_BASE:1.67
	OPENBSD_5_5:1.62.0.2
	OPENBSD_5_5_BASE:1.62
	OPENBSD_5_4:1.55.0.2
	OPENBSD_5_4_BASE:1.55
	OPENBSD_5_3:1.50.0.2
	OPENBSD_5_3_BASE:1.50
	OPENBSD_5_2:1.31.0.2
	OPENBSD_5_2_BASE:1.31
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	dcoppa_20101010:1.1.1.1
	dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.98
date	2017.08.09.09.16.09;	author dcoppa;	state Exp;
branches;
next	1.97;
commitid	KL6bkeK2RgpQiU3p;

1.97
date	2017.06.09.09.27.02;	author dcoppa;	state Exp;
branches;
next	1.96;
commitid	g79Y9nUpFPMZ4xrZ;

1.96
date	2017.02.23.08.35.20;	author dcoppa;	state Exp;
branches;
next	1.95;
commitid	St9d81r6HPtSjUKo;

1.95
date	2016.12.07.12.38.43;	author dcoppa;	state Exp;
branches;
next	1.94;
commitid	Qy7x3en3mvpF8BjI;

1.94
date	2016.11.01.09.07.19;	author dcoppa;	state Exp;
branches;
next	1.93;
commitid	uujOsNGxYzWxHpgW;

1.93
date	2016.09.27.14.38.26;	author dcoppa;	state Exp;
branches;
next	1.92;
commitid	2K2LnTsv4ciDRA3v;

1.92
date	2016.08.05.11.23.42;	author dcoppa;	state Exp;
branches;
next	1.91;
commitid	S3NwDo2lZPuICwaQ;

1.91
date	2016.06.20.10.49.38;	author dcoppa;	state Exp;
branches;
next	1.90;
commitid	5Fle6QRUJ2xMCP8L;

1.90
date	2016.05.10.12.45.28;	author dcoppa;	state Exp;
branches;
next	1.89;
commitid	Rs1NjqVv6MaawcKs;

1.89
date	2016.05.10.09.38.48;	author dcoppa;	state Exp;
branches;
next	1.88;
commitid	nsv8lxQo5Ys4l82d;

1.88
date	2016.01.28.15.56.28;	author dcoppa;	state Exp;
branches;
next	1.87;
commitid	blKBefGSFZ9BbQQv;

1.87
date	2016.01.28.09.45.46;	author dcoppa;	state Exp;
branches;
next	1.86;
commitid	Oaxogc6zidWUvMLI;

1.86
date	2015.12.21.11.16.35;	author dcoppa;	state Exp;
branches;
next	1.85;
commitid	oCcLZl5NPgAEUFb8;

1.85
date	2015.10.16.12.15.59;	author dcoppa;	state Exp;
branches;
next	1.84;
commitid	UOgq23cMd1FQm5qB;

1.84
date	2015.09.09.08.56.53;	author dcoppa;	state Exp;
branches;
next	1.83;
commitid	VrsCbAtoCEkDQQBP;

1.83
date	2015.07.18.15.08.47;	author dcoppa;	state Exp;
branches;
next	1.82;
commitid	CDV6KeQqRXdHfvSx;

1.82
date	2015.07.15.16.15.35;	author ajacoutot;	state Exp;
branches;
next	1.81;
commitid	xtIOzklA3EtpOLtM;

1.81
date	2015.06.05.16.29.09;	author dcoppa;	state Exp;
branches;
next	1.80;
commitid	nPEkLfZoLLLS18vj;

1.80
date	2015.05.08.09.25.41;	author dcoppa;	state Exp;
branches;
next	1.79;
commitid	c12xk0klgSjpWVYq;

1.79
date	2015.04.27.08.53.17;	author dcoppa;	state Exp;
branches;
next	1.78;
commitid	pGdrb0WrxxvKsx1d;

1.78
date	2014.12.17.08.52.16;	author dcoppa;	state Exp;
branches
	1.78.2.1;
next	1.77;
commitid	AIEPAOXJNTkt1vt6;

1.77
date	2014.12.05.09.33.09;	author dcoppa;	state Exp;
branches;
next	1.76;
commitid	WAOjA0U1BcrOo8q7;

1.76
date	2014.11.11.10.12.54;	author dcoppa;	state Exp;
branches;
next	1.75;
commitid	10nBgTwawS8W03Ob;

1.75
date	2014.11.06.12.52.13;	author dcoppa;	state Exp;
branches;
next	1.74;
commitid	i62Xz51k9nFlCmfB;

1.74
date	2014.11.06.09.21.28;	author dcoppa;	state Exp;
branches;
next	1.73;
commitid	ZBPB7XPU6DSN14zs;

1.73
date	2014.09.22.08.01.49;	author dcoppa;	state Exp;
branches;
next	1.72;
commitid	zQtCPXjBpPnvodEN;

1.72
date	2014.09.18.08.46.39;	author dcoppa;	state Exp;
branches;
next	1.71;
commitid	Gd7CXu3Mdx3woXNP;

1.71
date	2014.09.15.08.29.33;	author dcoppa;	state Exp;
branches;
next	1.70;
commitid	YucJy8DiOpyxCHA0;

1.70
date	2014.09.02.08.11.46;	author dcoppa;	state Exp;
branches;
next	1.69;
commitid	HKdKyVEglF8IzW03;

1.69
date	2014.08.12.10.09.56;	author dcoppa;	state Exp;
branches;
next	1.68;
commitid	AqSdh3j7fxPR91Lp;

1.68
date	2014.08.10.09.58.04;	author espie;	state Exp;
branches;
next	1.67;
commitid	jyyOLTDxRdjpw44n;

1.67
date	2014.07.12.09.53.56;	author dcoppa;	state Exp;
branches
	1.67.2.1;
next	1.66;
commitid	Iyun1meNnoZ1mgZP;

1.66
date	2014.06.06.11.52.49;	author dcoppa;	state Exp;
branches;
next	1.65;
commitid	LfR3WLQVMAjSS9kj;

1.65
date	2014.04.29.08.45.28;	author dcoppa;	state Exp;
branches;
next	1.64;

1.64
date	2014.03.26.13.03.09;	author dcoppa;	state Exp;
branches;
next	1.63;

1.63
date	2014.03.12.12.07.17;	author dcoppa;	state Exp;
branches;
next	1.62;

1.62
date	2014.02.04.12.20.46;	author dcoppa;	state Exp;
branches;
next	1.61;

1.61
date	2014.01.15.07.08.13;	author dcoppa;	state Exp;
branches;
next	1.60;

1.60
date	2013.12.13.08.16.37;	author dcoppa;	state Exp;
branches;
next	1.59;

1.59
date	2013.12.03.06.50.17;	author dcoppa;	state Exp;
branches;
next	1.58;

1.58
date	2013.11.29.08.32.24;	author dcoppa;	state Exp;
branches;
next	1.57;

1.57
date	2013.09.02.12.14.20;	author dcoppa;	state Exp;
branches;
next	1.56;

1.56
date	2013.08.07.21.31.28;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2013.07.02.06.03.35;	author dcoppa;	state Exp;
branches;
next	1.54;

1.54
date	2013.05.16.16.05.49;	author dcoppa;	state Exp;
branches;
next	1.53;

1.53
date	2013.04.22.14.55.10;	author dcoppa;	state Exp;
branches;
next	1.52;

1.52
date	2013.03.14.09.00.39;	author dcoppa;	state Exp;
branches;
next	1.51;

1.51
date	2013.03.11.02.52.08;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2013.01.17.19.47.46;	author dcoppa;	state Exp;
branches;
next	1.49;

1.49
date	2013.01.17.07.58.29;	author dcoppa;	state Exp;
branches;
next	1.48;

1.48
date	2013.01.16.13.13.03;	author dcoppa;	state Exp;
branches;
next	1.47;

1.47
date	2013.01.14.08.52.24;	author dcoppa;	state Exp;
branches;
next	1.46;

1.46
date	2013.01.11.12.58.08;	author dcoppa;	state Exp;
branches;
next	1.45;

1.45
date	2012.12.05.11.42.55;	author dcoppa;	state Exp;
branches;
next	1.44;

1.44
date	2012.11.29.09.45.37;	author dcoppa;	state Exp;
branches;
next	1.43;

1.43
date	2012.11.26.15.24.13;	author dcoppa;	state Exp;
branches;
next	1.42;

1.42
date	2012.11.23.08.29.42;	author dcoppa;	state Exp;
branches;
next	1.41;

1.41
date	2012.11.09.09.52.50;	author dcoppa;	state Exp;
branches;
next	1.40;

1.40
date	2012.11.07.10.13.44;	author dcoppa;	state Exp;
branches;
next	1.39;

1.39
date	2012.11.05.10.47.39;	author dcoppa;	state Exp;
branches;
next	1.38;

1.38
date	2012.11.04.19.58.43;	author jasper;	state Exp;
branches;
next	1.37;

1.37
date	2012.10.30.17.22.54;	author dcoppa;	state Exp;
branches;
next	1.36;

1.36
date	2012.10.23.13.05.27;	author dcoppa;	state Exp;
branches;
next	1.35;

1.35
date	2012.10.23.10.41.23;	author dcoppa;	state Exp;
branches;
next	1.34;

1.34
date	2012.10.15.07.17.12;	author dcoppa;	state Exp;
branches;
next	1.33;

1.33
date	2012.09.18.13.20.43;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2012.08.08.11.24.05;	author dcoppa;	state Exp;
branches;
next	1.31;

1.31
date	2012.06.22.13.29.17;	author dcoppa;	state Exp;
branches;
next	1.30;

1.30
date	2012.05.31.08.25.50;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2012.05.28.07.39.36;	author dcoppa;	state Exp;
branches;
next	1.28;

1.28
date	2012.05.04.10.09.05;	author dcoppa;	state Exp;
branches;
next	1.27;

1.27
date	2012.05.02.07.26.00;	author dcoppa;	state Exp;
branches;
next	1.26;

1.26
date	2012.04.20.11.39.27;	author dcoppa;	state Exp;
branches;
next	1.25;

1.25
date	2012.04.02.12.14.31;	author dcoppa;	state Exp;
branches;
next	1.24;

1.24
date	2012.03.19.09.27.36;	author dcoppa;	state Exp;
branches;
next	1.23;

1.23
date	2012.02.28.11.57.11;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2012.02.21.15.25.32;	author dcoppa;	state Exp;
branches;
next	1.21;

1.21
date	2012.01.19.08.25.53;	author dcoppa;	state Exp;
branches;
next	1.20;

1.20
date	2011.12.28.09.27.26;	author kili;	state Exp;
branches;
next	1.19;

1.19
date	2011.12.27.12.07.16;	author dcoppa;	state Exp;
branches;
next	1.18;

1.18
date	2011.12.01.22.16.53;	author dcoppa;	state Exp;
branches;
next	1.17;

1.17
date	2011.11.29.16.07.23;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2011.11.06.11.43.00;	author rpointel;	state Exp;
branches;
next	1.15;

1.15
date	2011.10.17.12.08.26;	author dcoppa;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.23.08.14.23;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2011.07.28.08.57.32;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2011.06.27.13.11.32;	author dcoppa;	state Exp;
branches;
next	1.11;

1.11
date	2011.06.03.08.11.32;	author dcoppa;	state Exp;
branches;
next	1.10;

1.10
date	2011.05.11.11.47.48;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2011.04.29.07.43.05;	author dcoppa;	state Exp;
branches;
next	1.8;

1.8
date	2011.04.11.07.54.49;	author dcoppa;	state Exp;
branches;
next	1.7;

1.7
date	2011.03.21.19.58.28;	author simon;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.16.14.19.38;	author dcoppa;	state Exp;
branches;
next	1.5;

1.5
date	2010.12.30.11.17.10;	author dcoppa;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.17.08.44.54;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.17.12.48.46;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.10.16.02.45;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.10.10.15.50.06;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.10.10.15.50.06;	author dcoppa;	state Exp;
branches;
next	;

1.67.2.1
date	2015.06.07.09.47.55;	author dcoppa;	state Exp;
branches;
next	;
commitid	6edVjleBOBpVMNai;

1.78.2.1
date	2015.06.06.18.16.19;	author dcoppa;	state Exp;
branches;
next	;
commitid	iLvvOSdUliVI6ENy;


desc
@@


1.98
log
@
Update to redis-4.0.1
@
text
@# $OpenBSD: Makefile,v 1.97 2017/06/09 09:27:02 dcoppa Exp $

COMMENT =		persistent key-value database
DISTNAME =		redis-4.0.1
CATEGORIES =		databases
HOMEPAGE =		http://redis.io/

MAINTAINER = 		David Coppa <dcoppa@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += 		c ${MODLUA_WANTLIB} m pthread

MASTER_SITES =		http://download.redis.io/releases/

MODULES =		lang/lua \
			lang/tcl

MAKE_FLAGS =		CC=${CC} \
			V=1

FAKE_FLAGS =		INSTALL="${INSTALL_PROGRAM}" \
			INSTALL_DIR="${INSTALL_DATA_DIR}" \
			INSTALL_TOP="${WRKINST}${PREFIX}"

USE_GMAKE =		Yes

# Warning: running the test suite can take a long time and will
# consume a lot of cpu cycles
TEST_DEPENDS =		${MODTCL_BUILD_DEPENDS}
TEST_FLAGS =		TCL_BIN="${MODTCL_BIN}"

DBDIR =			${VARBASE}/redis
SUBST_VARS +=		DBDIR

pre-configure:
	cp ${WRKSRC}/deps/lua/src/fpconv.? ${WRKSRC}/src/
	cp ${WRKSRC}/deps/lua/src/strbuf.? ${WRKSRC}/src/
	cp ${WRKSRC}/deps/lua/src/lua_*.c ${WRKSRC}/src/
	rm -rf ${WRKSRC}/deps/jemalloc
	rm -rf ${WRKSRC}/deps/lua
	${SUBST_CMD} ${WRKSRC}/src/Makefile

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/redis
	${SUBST_DATA} ${WRKSRC}/redis.conf \
			${PREFIX}/share/examples/redis/redis.conf
	${SUBST_DATA} ${WRKSRC}/sentinel.conf \
			${PREFIX}/share/examples/redis/sentinel.conf

.include <bsd.port.mk>
@


1.97
log
@
Update to redis-3.2.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2017/02/23 08:35:20 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.9
d41 1
@


1.96
log
@
Update to redis-3.2.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2016/12/07 12:38:43 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.8
@


1.95
log
@
Bugfixing update to redis-3.2.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2016/11/01 09:07:19 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.6
@


1.94
log
@
Update to redis-3.2.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2016/09/27 14:38:26 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.5
@


1.93
log
@
Update to redis-3.2.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2016/08/05 11:23:42 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.4
@


1.92
log
@
Update to redis-3.2.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2016/06/20 10:49:38 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.3
@


1.91
log
@
Update to redis-3.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2016/05/10 12:45:28 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.2.1
@


1.90
log
@
Set default max clients to 96 here too, like we did in redis.conf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2016/05/10 09:38:48 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-3.2.0
REVISION =		0
@


1.89
log
@
Update to redis-3.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2016/01/28 15:56:28 dcoppa Exp $
d5 1
d35 1
a35 1
DBDIR =			/var/redis
@


1.88
log
@
Upstream replaced source distfile.

Spotted by nigel@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2016/01/28 09:45:46 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-3.0.7
REVISION =		0
@


1.87
log
@
Bugfixing update to redis-3.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2015/12/21 11:16:35 dcoppa Exp $
d5 1
@


1.86
log
@
Bugfixing update to redis-3.0.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2015/10/16 12:15:59 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.6
@


1.85
log
@
Bugfixing update to redis-3.0.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2015/09/09 08:56:53 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.5
@


1.84
log
@
Bugfixing update to redis-3.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2015/07/18 15:08:47 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.4
@


1.83
log
@
Bugfixing update to redis-3.0.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2015/07/15 16:15:35 ajacoutot Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.3
@


1.82
log
@Fix pexp after recent rc.subr change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2015/06/05 16:29:09 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.2
a6 1
REVISION =		0
@


1.81
log
@
*Security* update to redis-3.0.2

http://benmmurphy.github.io/blog/2015/06/04/redis-eval-lua-sandbox-escape/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2015/05/08 09:25:41 dcoppa Exp $
d7 1
@


1.80
log
@
Bugfixing update to redis-3.0.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2015/04/27 08:53:17 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.1
@


1.79
log
@
Update to redis-3.0.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2014/12/17 08:52:16 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-3.0.0
@


1.78
log
@
Update to redis-2.8.19
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2014/12/05 09:33:09 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.19
@


1.78.2.1
log
@
Security update to redis-2.8.21

Redis EVAL Lua Sandbox Escape: http://benmmurphy.github.io/blog/2015/06/04/redis-eval-lua-sandbox-escape/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2014/12/17 08:52:16 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.21
@


1.77
log
@
Update to redis-2.8.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2014/11/11 10:12:54 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.18
@


1.76
log
@
As pointed out by sthen@@, daemons should be in sbin not bin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2014/11/06 12:52:13 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.8.17
REVISION =		2
d38 1
d41 1
@


1.75
log
@
Fix location/perms of the redis.sock file, for those who want to
use redis on a unix socket.

Amend redis.rc accordingly.

Also change the location of the pid file for consistency.

Discussed with, and ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2014/11/06 09:21:28 dcoppa Exp $
d5 1
a5 1
REVISION =		1
a43 1
	${INSTALL_PROGRAM} ${WRKBUILD}/src/redis-sentinel ${PREFIX}/bin/
@


1.74
log
@
Lower default 'maxclients' value so redis does not play with limits

Use LOG_DAEMON as the logging facility

Do not display the ascii art when logging to syslog

first two suggested by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2014/09/22 08:01:49 dcoppa Exp $
d5 1
a5 1
REVISION =		0
d41 1
a41 2
	${SUBST_CMD} ${WRKSRC}/src/Makefile \
		${WRKSRC}/src/redis.h
@


1.73
log
@
Bugfixing update to 2.8.17: plugged a memory leak in the hiredis
library.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2014/09/18 08:46:39 dcoppa Exp $
d5 1
@


1.72
log
@
Bugfix update to redis-2.8.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2014/09/15 08:29:33 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.16
@


1.71
log
@
Bugfixing update to redis-2.8.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2014/09/02 08:11:46 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.15
@


1.70
log
@
Update to redis-2.8.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2014/08/12 10:09:56 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.14
@


1.69
log
@
Update to redis-2.8.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2014/08/10 09:58:04 espie Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.13
@


1.68
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2014/07/12 09:53:56 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.12
@


1.67
log
@
Update to redis-2.8.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2014/06/06 11:52:49 dcoppa Exp $
d46 1
a46 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c \
		${WRKSRC}/redis.conf \
d48 1
a48 2
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c \
		${WRKSRC}/sentinel.conf \
@


1.67.2.1
log
@
Fix for the Redis EVAL Lua sandbox escape
http://benmmurphy.github.io/blog/2015/06/04/redis-eval-lua-sandbox-escape/

from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2014/07/12 09:53:56 dcoppa Exp $
a4 1
REVISION =		0
@


1.66
log
@
Bugfix update to redis-2.8.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2014/04/29 08:45:28 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.10
@


1.65
log
@Update to redis-2.8.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2014/03/26 13:03:09 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.9
@


1.64
log
@
Bugfixing update to redis-2.8.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2014/03/12 12:07:17 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.8
@


1.63
log
@Update to redis-2.8.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2014/02/04 12:20:46 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.7
@


1.62
log
@Bugfix update to redis-2.8.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2014/01/15 07:08:13 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.5
@


1.61
log
@
Update to redis-2.8.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2013/12/13 08:16:37 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.4
@


1.60
log
@Update to redis-2.8.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2013/12/03 06:50:17 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.3
@


1.59
log
@Update to redis-2.8.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2013/11/29 08:32:24 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.2
@


1.58
log
@Update to redis-2.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/09/02 12:14:20 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.8.1
@


1.57
log
@Update to redis-2.6.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/08/07 21:31:28 naddy Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.16
d31 1
a31 1
TEST_DEPENDS =       ${MODTCL_BUILD_DEPENDS}
a32 1
TEST_TARGET =	test
d41 1
a41 1
		${WRKSRC}/src/redis.c
@


1.56
log
@move http://code.google.com, *.googlecode.com, and sites.google.com to https
suggested by bentley@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/07/02 06:03:35 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.14
d15 1
a15 1
MASTER_SITES =		https://redis.googlecode.com/files/
@


1.55
log
@Bugfix update to redis-2.6.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/05/16 16:05:49 dcoppa Exp $
d15 1
a15 1
MASTER_SITES =		http://redis.googlecode.com/files/
@


1.54
log
@Bugfix update to redis-2.6.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/04/22 14:55:10 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.13
@


1.53
log
@Bugfix update to redis-2.6.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/03/14 09:00:39 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.12
@


1.52
log
@Update to redis-2.6.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2013/03/11 02:52:08 espie Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.11
@


1.51
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2013/01/17 19:47:46 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.9
@


1.50
log
@Update to redis-2.6.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2013/01/17 07:58:29 dcoppa Exp $
a11 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d31 3
a33 3
REGRESS_DEPENDS =       ${MODTCL_BUILD_DEPENDS}
REGRESS_FLAGS =		TCL_BIN="${MODTCL_BIN}"
REGRESS_TARGET =	test
@


1.49
log
@small "fix"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2013/01/16 13:13:03 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.6.8
REVISION =		0
@


1.48
log
@Switch Redis to use lua from ports instead of the one that comes
bundled with it.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2013/01/14 08:52:24 dcoppa Exp $
d43 1
a43 1
	cp ${WRKSRC}/deps/lua/src/strbuf.* ${WRKSRC}/src/
@


1.47
log
@Zap bogus CFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2013/01/11 12:58:08 dcoppa Exp $
d5 1
d17 1
a17 1
WANTLIB += 		c m pthread
d21 2
a22 3
# XXX: Should use lang/lua, with new dependencies on
# lua-cmsgpack, lua-cjson, and lua-struct
MODULES =		lang/tcl
a24 2
			DEBUG="" \
			OPTIMIZATION="" \
d43 4
a46 1
	${SUBST_CMD} ${WRKSRC}/src/redis.c
@


1.46
log
@Bugfixing update to redis-2.6.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2012/12/05 11:42:55 dcoppa Exp $
a33 2

CFLAGS +=		-I${LOCALBASE}/include
@


1.45
log
@Bugfixing update to redis-2.6.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2012/11/29 09:45:37 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.7
@


1.44
log
@Bugfixing update to redis-2.6.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2012/11/26 15:24:13 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.6
@


1.43
log
@Remove dofile() from Redis Lua scripting, because it allows an
attacker to enumerate filesystem contents. See:
http://blog.liftsecurity.io/post/35714931664/filesystem-enumeration-using-redis-and-lua

While here, fix a pasto in redis.conf: "syslog-enabled no" where
"syslog-enabled yes" was intended.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2012/11/23 08:29:42 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.6.5
REVISION =		0
@


1.42
log
@Update to redis-2.6.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2012/11/09 09:52:50 dcoppa Exp $
d5 1
@


1.41
log
@Bugfix update to redis-2.6.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2012/11/07 10:13:44 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.4
@


1.40
log
@Bugfix update to redis-2.6.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2012/11/05 10:47:39 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.3
@


1.39
log
@Amend XXX comment
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/11/04 19:58:43 jasper Exp $
d4 1
a4 1
DISTNAME =		redis-2.6.2
d50 1
a57 1
	cd ${PREFIX}/bin/ && ln -f -s redis-server redis-sentinel
@


1.38
log
@add an XXX about using the internal lua

ok dcoppa@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/10/30 17:22:54 dcoppa Exp $
d20 2
a21 1
# XXX: Should use lang/lua, with a new dependency on lua-cmsgpack
@


1.37
log
@Bugfix update to redis-2.6.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/10/23 13:05:27 dcoppa Exp $
d20 1
@


1.36
log
@Add the new (starting from 2.6) Sentinel stuff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/10/23 10:41:23 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.6.0
REVISION =		0
a47 1
	cd ${PREFIX}/bin/ && ln -f -s redis-server redis-sentinel
d55 1
@


1.35
log
@Update to redis-2.6.0

https://raw.github.com/antirez/redis/2.6/00-RELEASENOTES

All tests passed without errors on sparc64: yay!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/10/15 07:17:12 dcoppa Exp $
d5 1
d49 1
d54 3
@


1.34
log
@Comment out 'requirepass' because it gives rise to much confusion.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/09/18 13:20:43 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.4.17
REVISION =		0
d16 1
a16 1
WANTLIB += 		c execinfo m pthread
a21 2
LIB_DEPENDS =		devel/libexecinfo

d43 3
@


1.33
log
@Bugfixing update to redis-2.4.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/08/08 11:24:05 dcoppa Exp $
d5 1
@


1.32
log
@Maintenance update to redis-2.4.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/06/22 13:29:17 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.16
@


1.31
log
@Bugfix update to Redis 2.4.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/05/31 08:25:50 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.15
@


1.30
log
@Override some variables into port's Makefile to reduce clutter from
patches/patch-src_Makefile; no pkg changes, no bump.

While here, reorganize port's Makefile as per template.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/05/28 07:39:36 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.14
@


1.29
log
@Bugfixing update to redis-2.4.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/05/04 10:09:05 dcoppa Exp $
d16 2
d22 1
a22 1
USE_GMAKE =		Yes
d24 4
a27 1
FAKE_FLAGS =		INSTALL_TOP=${WRKINST}${PREFIX}
d29 1
a29 3
# Replace cp/mkdir with our install commands
# Enable verbose compilation
MAKE_FLAGS =		INSTALL="${INSTALL_PROGRAM}" \
d31 3
a33 2
			CC=${CC} \
			V=1
d37 1
a37 5
WANTLIB += 		c execinfo m pthread

LIB_DEPENDS =		devel/libexecinfo

# Warning: executing the test suite can take a long time and will
@


1.28
log
@Bugfixing update to redis-2.4.13.

[BUGFIX] Fix for KEYS command: if the DB contains keys with expires
the KEYS command may return the wrong output, having duplicated or
missing keys. See issue #487 and #488 on github for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/05/02 07:26:00 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.13
@


1.27
log
@Bugfix update to redis-2.4.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/04/20 11:39:27 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.12
@


1.26
log
@Bugfix update to redis-2.4.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/04/02 12:14:31 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.11
@


1.25
log
@Bugfix update to redis-2.4.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/03/19 09:27:36 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.10
d28 1
@


1.24
log
@bugfix update to redis-2.4.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/02/28 11:57:11 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.9
@


1.23
log
@Update to 2.4.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/02/21 15:25:32 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.8
@


1.22
log
@Bugfixing update to redis-2.4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/01/19 08:25:53 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.7
@


1.21
log
@Bugfixing update to redis-2.4.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/12/28 09:27:26 kili Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.6
@


1.20
log
@This needs a bump after the ghc patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/12/27 12:07:16 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.4.5
REVISION =		0
@


1.19
log
@Bugfixing update to redis-2.4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/12/01 22:16:53 dcoppa Exp $
d5 1
@


1.18
log
@Use -o ${SHAREOWN} -g ${SHAREGRP}. No pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/11/29 16:07:23 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.4
@


1.17
log
@- Update to redis-2.4.4
- Enable backtracing support using libexecinfo's backtrace()
- Add a rc script

rc_script diff from william@@, who seems to have disappeared...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/11/06 11:43:00 rpointel Exp $
d47 3
a49 2
	${SUBST_CMD} -c -o root -g bin ${WRKSRC}/redis.conf \
		${PREFIX}/share/examples/redis/redis.conf
@


1.16
log
@update redis to 2.4.2 with few tweaks by dcoppa@@.
ok dcoppa@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/10/17 12:08:26 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.4.2
d30 5
a34 1
WANTLIB += 		c m pthread
d42 3
d47 2
a48 2
	${INSTALL_DATA} ${WRKSRC}/redis.conf \
		${PREFIX}/share/examples/redis/
@


1.15
log
@I'm working on 2.4.1... In the meantime, update to redis-2.2.15
(bugfixing update).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/23 08:14:23 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.15
a41 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/redis
	${INSTALL_DATA} ${WRKBUILD}/doc/* ${PREFIX}/share/doc/redis/
@


1.14
log
@Maintainance update to redis-2.2.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/07/28 08:57:32 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.14
@


1.13
log
@Update to redis-2.2.12.
Clean makefiles from colors, optimizations, and other amenities.

ok rpointel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/06/27 13:11:32 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.12
@


1.12
log
@Bugfixing update to redis-2.2.11.
Full ChangeLog at https://github.com/antirez/redis/raw/2.2/00-RELEASENOTES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/06/03 08:11:32 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.11
d24 5
a28 2
# Replace cp by install
MAKE_FLAGS =		INSTALL="${INSTALL_PROGRAM}"
@


1.11
log
@Bugfixing update to Redis 2.2.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/05/11 11:47:48 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.8
@


1.10
log
@Bugfixing update to redis-2.2.7

* Fixed bug #543-2 (the issue was reopened with a completely different report)
  that caused Redis to randomly crash on list push performed against lists
  with other clients blocked with BLPOP (or variants).

* Fixed bug #543. If you saw Redis instances crashing on List operations
  (only happening with a non-default max entry size ziplist setting in
  redis.conf) it was almost certainly this problem.

* Fixed a bug with replication where SLAVEOF NO ONE caused a slave to close the
  connection with all its slaves.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/04/29 07:43:05 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.7
@


1.9
log
@Bugfixing update to redis-2.2.5.

Fixed a crash occurring when loading an AOF containing the SPOP
command.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/04/11 07:54:49 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.5
@


1.8
log
@Update to redis-2.2.4

General consensus from interested people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/03/21 19:58:28 simon Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.4
@


1.7
log
@update to version 2.2.2

with tweaks from dcoppa@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/03/16 14:19:38 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.2.2
@


1.6
log
@Bugfix update to redis-2.0.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/12/30 11:17:10 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.0.5
@


1.5
log
@New HOMEPAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/17 08:44:54 dcoppa Exp $
d4 1
a4 2
DISTNAME =		redis-2.0.4
REVISION =		0
@


1.4
log
@Bugfix update to redis-2.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/17 12:48:46 dcoppa Exp $
d5 1
d7 1
a7 1
HOMEPAGE =		http://redis.googlecode.com/
d17 1
a17 1
MASTER_SITES =		${HOMEPAGE}files/
@


1.3
log
@Update to redis-2.0.3

From Remi Pointel, with tweaks by me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/10 16:02:45 dcoppa Exp $
d4 1
a4 1
DISTNAME =		redis-2.0.3
@


1.2
log
@Fix a wrong cvs tag in Makefile. I'm sorry.

No bump as it was just imported...
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
DISTNAME =		redis-2.0.2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD $
@


1.1.1.1
log
@Import databases/redis.

Redis is an advanced key-value store. It is similar to memcached
but the dataset is not volatile, and values can be strings, exactly
like in memcached, but also lists, sets, and ordered sets. All this
data types can be manipulated with atomic operations to push/pop
elements, add/remove elements, perform server side union, intersection,
difference between sets, and so forth.
In order to be very fast but at the same time persistent the whole
dataset is taken in memory, and from time to time saved on disc
asynchronously (semi persistent mode) or alternatively every change
is written into an append only file (fully persistent mode).

OK sthen@@, landry@@
@
text
@@
