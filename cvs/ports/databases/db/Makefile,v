head	1.37;
access;
symbols
	OPENBSD_6_1:1.37.0.22
	OPENBSD_6_1_BASE:1.37
	OPENBSD_6_0:1.37.0.20
	OPENBSD_6_0_BASE:1.37
	OPENBSD_5_9:1.37.0.16
	OPENBSD_5_9_BASE:1.37
	OPENBSD_5_8:1.37.0.18
	OPENBSD_5_8_BASE:1.37
	OPENBSD_5_7:1.37.0.14
	OPENBSD_5_7_BASE:1.37
	OPENBSD_5_6:1.37.0.12
	OPENBSD_5_6_BASE:1.37
	OPENBSD_5_5:1.37.0.10
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.37.0.8
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.37.0.6
	OPENBSD_5_3_BASE:1.37
	OPENBSD_5_2:1.37.0.4
	OPENBSD_5_2_BASE:1.37
	OPENBSD_5_1_BASE:1.37
	OPENBSD_5_1:1.37.0.2
	OPENBSD_5_0:1.36.0.8
	OPENBSD_5_0_BASE:1.36
	OPENBSD_4_9:1.36.0.6
	OPENBSD_4_9_BASE:1.36
	OPENBSD_4_8:1.36.0.4
	OPENBSD_4_8_BASE:1.36
	OPENBSD_4_7:1.36.0.2
	OPENBSD_4_7_BASE:1.36
	OPENBSD_4_6:1.35.0.12
	OPENBSD_4_6_BASE:1.35
	OPENBSD_4_5:1.35.0.10
	OPENBSD_4_5_BASE:1.35
	OPENBSD_4_4:1.35.0.8
	OPENBSD_4_4_BASE:1.35
	OPENBSD_4_3:1.35.0.6
	OPENBSD_4_3_BASE:1.35
	OPENBSD_4_2:1.35.0.4
	OPENBSD_4_2_BASE:1.35
	OPENBSD_4_1:1.35.0.2
	OPENBSD_4_1_BASE:1.35
	OPENBSD_4_0:1.33.0.12
	OPENBSD_4_0_BASE:1.33
	OPENBSD_3_9:1.33.0.10
	OPENBSD_3_9_BASE:1.33
	OPENBSD_3_8:1.33.0.8
	OPENBSD_3_8_BASE:1.33
	OPENBSD_3_7:1.33.0.6
	OPENBSD_3_7_BASE:1.33
	OPENBSD_3_6:1.33.0.4
	OPENBSD_3_6_BASE:1.33
	OPENBSD_3_5:1.33.0.2
	OPENBSD_3_5_BASE:1.33
	sturm_2003-Dec-08:1.1.1.2
	sturm:1.1.1
	OPENBSD_3_4:1.32.0.2
	OPENBSD_3_4_BASE:1.32
	OPENBSD_3_3:1.31.0.2
	OPENBSD_3_3_BASE:1.31
	OPENBSD_3_2:1.30.0.2
	OPENBSD_3_2_BASE:1.30
	OPENBSD_3_1:1.28.0.2
	OPENBSD_3_1_BASE:1.28
	OPENBSD_3_0:1.27.0.2
	OPENBSD_3_0_BASE:1.27
	OPENBSD_2_9_TRACKING_SWITCH:1.24
	OPENBSD_2_9:1.21.0.2
	OPENBSD_2_9_BASE:1.21
	OPENBSD_2_8:1.20.0.2
	OPENBSD_2_8_BASE:1.20
	OPENBSD_2_7:1.18.0.2
	OPENBSD_2_7_BASE:1.18
	OPENBSD_2_6:1.9.0.2
	OPENBSD_2_6_BASE:1.9
	OPENBSD_2_5:1.7.0.2
	OPENBSD_2_5_BASE:1.7
	OPENBSD_2_4:1.6.0.2
	OPENBSD_2_4_BASE:1.6
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	initial:1.1.1.1
	tacho:1.1.1;
locks; strict;
comment	@# @;


1.37
date	2011.10.17.10.10.59;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.02.01.17.00.12;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2006.11.07.19.37.57;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2006.11.04.12.44.26;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2003.12.08.17.39.16;	author sturm;	state Exp;
branches;
next	1.32;

1.32
date	2003.06.17.00.35.32;	author avsm;	state Exp;
branches;
next	1.31;

1.31
date	2002.10.30.00.35.33;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2002.07.28.02.11.37;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2002.06.03.15.18.01;	author todd;	state Exp;
branches;
next	1.28;

1.28
date	2001.11.10.15.00.47;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2001.09.26.02.48.23;	author pvalchev;	state Exp;
branches;
next	1.26;

1.26
date	2001.09.07.20.45.07;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2001.09.07.16.06.08;	author heko;	state Exp;
branches;
next	1.24;

1.24
date	2001.06.08.23.26.51;	author matt;	state Exp;
branches;
next	1.23;

1.23
date	2001.05.08.00.54.36;	author matt;	state Exp;
branches;
next	1.22;

1.22
date	2001.05.05.23.24.50;	author lebel;	state Exp;
branches;
next	1.21;

1.21
date	2000.12.28.17.14.10;	author matt;	state Exp;
branches;
next	1.20;

1.20
date	2000.09.24.01.32.39;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.09.04.17.17.45;	author matt;	state Exp;
branches;
next	1.18;

1.18
date	2000.04.09.17.36.13;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2000.03.24.22.11.38;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2000.02.15.05.04.08;	author turan;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.12.06.29.51;	author turan;	state Exp;
branches;
next	1.14;

1.14
date	2000.02.11.00.37.20;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.02.02.18.18.41;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2000.01.31.15.07.03;	author kevlo;	state Exp;
branches;
next	1.11;

1.11
date	99.12.02.07.17.10;	author kevlo;	state Exp;
branches;
next	1.10;

1.10
date	99.10.29.09.40.15;	author turan;	state Exp;
branches;
next	1.9;

1.9
date	99.06.18.04.06.16;	author marc;	state Exp;
branches;
next	1.8;

1.8
date	99.06.18.03.31.35;	author marc;	state Exp;
branches;
next	1.7;

1.7
date	99.04.01.06.20.05;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	98.10.18.05.02.03;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	98.10.08.04.23.55;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	98.02.06.17.53.53;	author tacho;	state Exp;
branches;
next	1.3;

1.3
date	98.02.06.13.39.46;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	97.12.29.22.01.01;	author joey;	state Exp;
branches;
next	1.1;

1.1
date	97.11.26.13.11.17;	author tacho;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.26.13.11.17;	author tacho;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2003.12.08.17.37.52;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.37
log
@convert databases/db to bsd.port.arch.mk, a bit more complicated since
there is a Makefile.inc.

Since the BUILD_PACKAGES tests have to happen there, put the java one there
as well, it won't trigger for db/v3, obviously.

Allows the removal of the ,java pseudo-flavor, since the ONLY_FOR_ARCH-* part
will take care of it.
@
text
@# $OpenBSD: Makefile,v 1.36 2010/02/01 17:00:12 espie Exp $

     SUBDIR =
     SUBDIR += v3
     SUBDIR += v4

.include <bsd.port.subdir.mk>
@


1.36
log
@SUBDIR += is wrong: it means the makefile will pick up SUBDIR from env, thus
breaking cd /usr/ports && SUBDIR=some/path make something for
category makefiles. While there, also put spaces around += uniformously.
okay naddy@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/11/07 19:37:57 espie Exp $
a4 1
     SUBDIR += v4,java
@


1.35
log
@belt and suspenders, best of both worlds.
bulk-builds will first try to build stuff with the java pseudo-flavor.
If that fails (because java is currently broken, or because it's not
supported on that arch), then it will build through the second line.

If the packages already exist, the infrastructure will notice, and the
second build line will do nothing.

consensus reached after discussion with nikolay, kurt, pval...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/11/04 12:44:26 espie Exp $
d3 4
a6 3
     SUBDIR+= v3
     SUBDIR+= v4,java
     SUBDIR+= v4
@


1.34
log
@insist on java for bulk-builds on i386, and for description.

Avoid re-building the same packages twice on i386...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2003/12/08 17:39:16 sturm Exp $
a3 1
.if ${MACHINE_ARCH} == "i386" || make(describe)
a4 1
.else
a5 1
.endif
@


1.33
log
@resolve conflict
@
text
@d1 1
a1 1
# $OpenBSD$
d4 3
d8 1
@


1.32
log
@revert maintainer to ports@@ from heko@@, and plug a couple of off-by-ones
in environment parsing code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2002/10/30 00:35:33 naddy Exp $
d3 2
a4 1
COMMENT=	"Berkeley DB package, revision 3"
d6 1
a6 60
VMM=		3.1
VERSION=	${VMM}.17
DISTNAME=	db-${VERSION}
CATEGORIES=	databases
HOMEPAGE=	http://www.sleepycat.com/
MASTER_SITES=	${HOMEPAGE}/update/snapshot/

TCL_VERSION=	8.3

# License: BSD+SleepyCat's additions.
# Must purchase license to redistribute if not distributing the source.
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

CONFIGURE_STYLE=	gnu dest
CONFIGURE_SCRIPT=	../dist/configure
CONFIGURE_ARGS+=	--enable-compat185 
CONFIGURE_ARGS+=	--enable-dump185
CONFIGURE_ARGS+=	--enable-cxx
CONFIGURE_ARGS+=	--enable-static
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}

MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/dist

WRKBUILD=	${WRKDIST}/build_unix

FLAVORS=	tcl
FLAVOR?=

.if ${FLAVOR:L:Mtcl}
# We can't use NO_SHARED_LIBS and IGNORE because IGNORE
# is only handled by bsd.port.mk and NO_SHARED_LIBS doesn't get
# defined until bsd.port.mk..
NOT_FOR_ARCHS=	hppa mvme88k vax
LIB_DEPENDS+=	tcl83.1.3::lang/tcl/${TCL_VERSION}
# Argh.
CFLAGS+=-I${LOCALBASE}/include/tcl${TCL_VERSION}
CONFIGURE_ARGS+= --enable-tcl 
CONFIGURE_ARGS+= --with-tcl=${LOCALBASE}/lib/tcl${TCL_VERSION}
# Regression suite requires Tcl.
CONFIGURE_ARGS+= --enable-test

do-regress:
	@@cd ${WRKBUILD}; tclsh${TCL_VERSION} ${FILESDIR}/regress.tcl
.else
CONFIGURE_ARGS+= --disable-tcl
NO_REGRESS=	Yes
.endif

post-install:
	@@mv ${PREFIX}/include/db.h ${PREFIX}/include/db3.h
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/db
	cd ${WRKSRC}/examples_c; ${INSTALL_DATA} *.c \
		${PREFIX}/share/examples/db
	cd ${WRKSRC}/examples_cxx; ${INSTALL_DATA} *.cpp \
		${PREFIX}/share/examples/db

.include <bsd.port.mk>
@


1.31
log
@Regression suite is Tcl-based, so enable if we build with Tcl support.
Thanks heko@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2002/07/28 02:11:37 brad Exp $
a12 2

MAINTAINER=	Heikki Korpela <heko@@openbsd.org>
@


1.30
log
@- remove the useless Java FLAVOR
- merge the C++ FLAVOR into the main package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2002/06/03 15:18:01 todd Exp $
d48 5
d55 1
@


1.29
log
@master site changed subdirs. ok maint
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/11/10 15:00:47 espie Exp $
a8 1
NEED_VERSION=	1.489
a11 1
JDK_VERSION=	1.1.8
d27 1
d35 1
a35 1
FLAVORS=	java tcl c++
d46 2
a47 2
CONFIGURE_ARGS+=--enable-tcl 
CONFIGURE_ARGS+=--with-tcl=${LOCALBASE}/lib/tcl${TCL_VERSION}
d49 1
a49 21
CONFIGURE_ARGS+=--disable-tcl
.endif

.if ${FLAVOR:L:Mc++}
CONFIGURE_ARGS+=--enable-cxx
.else
CONFIGURE_ARGS+=--disable-cxx
.endif

.if ${FLAVOR:L:Mjava}
BROKEN=			"requires native JDK"
ONLY_FOR_ARCHS=		i386
BUILD_DEPENDS=		::devel/jdk/1.1
CONFIGURE_ARGS+=	--enable-java
PORTPATH=		/usr/bin:/bin:/usr/sbin:/sbin:${LOCALBASE}/bin:${X11BASE}/bin:${LOCALBASE}/jdk${JDK_VERSION}/bin
.endif

.if ${FLAVOR:L:Mjava}
post-configure:
	@@ln -sf ${LOCALBASE}/jdk${JDK_VERSION}/include/freebsd/jni_md.h \
		${WRKBUILD}/jni_md.h
a52 1
# Renaming db.h to db3.h (to avoid conflict with /usr/include/db.h)
a53 3

# Installing examples for each language installed. (No examples for
# tcl available, only tests.)
a56 2

.if ${FLAVOR:L:Mc++}
a58 6
.endif

.if ${FLAVOR:L:Mjava}
	cd ${WRKSRC}/examples_java; ${INSTALL_DATA} *.java \
		${PREFIX}/share/examples/db
.endif
a60 8

# From PostgreSQL port Makefile.
.if ${FLAVOR:L:Mc++} && !defined(NO_SHARED_LIBS)
SED_PLIST+=-e '/%%SHARED-c++%%/r${PKGDIR}/PFRAG.c++.shared' -e '//d'
.elif ${FLAVOR:L:Mc++} && defined(NO_SHARED_LIBS) && \
	${NO_SHARED_LIBS:L} == "yes"
SED_PLIST+=-e '/%%SHARED-c++%%/d'
.endif
@


1.28
log
@Kill first component of BUILD_DEPENDS.

Fix sawfish comment while I'm at it.
`window manager for the X windows system'.
Like DUH ! It's going to be a window manager for my microwave oven ?
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/09/26 02:48:23 pvalchev Exp $
d11 1
a11 1
MASTER_SITES=	${HOMEPAGE}/update/${VERSION}/
@


1.27
log
@complete MODGNU_CONFIG_GUESS_DIRS; for ppc
ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/09/07 20:45:07 brad Exp $
d9 1
a9 1
NEED_VERSION=	1.444
d20 4
a23 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d62 1
a62 1
BUILD_DEPENDS=		${LOCALBASE}/jdk${JDK_VERSION}/bin/java::devel/jdk/1.1
@


1.26
log
@- Don't define an empty post-configure target if not FLAVOR java.
- We don't print messages durring install.
- It's typical to show INSTALL_ macros run durring install.
- Changed spaces to a tab for the last piece of code, we ran into a
problem with PostgreSQL when it was not a tab.
--
Ok'd by: maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/09/07 16:06:08 heko Exp $
d31 2
@


1.25
log
@ o bump NEED_VERSION
 o add tcl and c++ flavors
 o use PFRAG.<flavor> instead of PLIST-<flavor>
 o make proper .so.MAJOR.MINOR dynlibs with makefile and configure
   patches
 o fix reference to shared libraries in a few tcl test scripts
 o use a patch to makefile.in instead of a port makefile tweak
   to create libdb3.a instead of libdb-3.1.a
 o sync libtool patches
 o remove some sleepycat's marketing speech from DESCR
 o take over MAINTAINER
 o clarify license a bit
lots of thanks to Nils Nordman <nino@@nforced.com> and naddy@@ for
running the huge test set. (it takes days.)
naddy@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/06/08 23:26:51 matt Exp $
d65 1
d67 1
a67 2
.if ${FLAVOR:L:Mjava}
	@@-ln -s ${LOCALBASE}/jdk${JDK_VERSION}/include/freebsd/jni_md.h \
d77 2
a78 3
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/db
	@@echo "Installing samples: ${PREFIX}/share/examples/db/*.c ..."
	@@cd ${WRKSRC}/examples_c; ${INSTALL_DATA} *.c \
d82 1
a82 2
	@@echo "Installing samples: ${PREFIX}/share/examples/db/*.cpp ..."
	@@cd ${WRKSRC}/examples_cxx; ${INSTALL_DATA} *.cpp \
d87 1
a87 2
	@@echo "Installing samples: ${PREFIX}/share/examples/db/*.java ..."
	@@cd ${WRKSRC}/examples_java; ${INSTALL_DATA} *.java \
d93 1
a93 1
# From postgreSQL port Makefile.
d97 1
a97 1
        ${NO_SHARED_LIBS:L} == "yes"
a99 1

@


1.24
log
@mark java flavor broken until we have a native JDK
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/05/08 00:54:36 matt Exp $
d5 3
a7 1
DISTNAME=	db-3.1.17
d9 1
a9 2
NEED_VERSION=	1.402
MASTER_SITES=	http://www.sleepycat.com/update/3.1.17/
d11 1
d14 1
d16 1
a16 1
MAINTAINER=	ports@@openbsd.org
d18 2
d27 4
a30 2
CONFIGURE_ARGS=		--enable-compat185 --enable-dump185 --enable-cxx \
			${CONFIGURE_SHARED}
d34 1
a34 1
FLAVORS=	java
d37 20
d66 1
d69 1
d72 5
d78 1
a78 9
	@@mv ${PREFIX}/include/db.h ${PREFIX}/include/db3.h
.if exists(${PREFIX}/lib/libdb-3.1.a) && exists(${PREFIX}/lib/libdb_cxx-3.1.a)
	@@mv ${PREFIX}/lib/libdb-3.1.a ${PREFIX}/lib/libdb3.a
	@@mv ${PREFIX}/lib/libdb_cxx-3.1.a ${PREFIX}/lib/libdb3_cxx.a
.else
	@@mv ${PREFIX}/lib/libdb.a ${PREFIX}/lib/libdb3.a
	@@mv ${PREFIX}/lib/libdb_cxx.a ${PREFIX}/lib/libdb3_cxx.a
.endif	
	@@echo "Installing samples: ${PREFIX}/share/examples/db ..."
d81 3
d86 2
d89 1
d95 8
@


1.23
log
@- reorg existing JDKs, update devel/jdk dependencies
- become MAINTAINER for jdk 1.1 and 1.2 (ok MAINTAINERs)
- add jdk 1.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/05/05 23:24:50 lebel Exp $
d31 1
@


1.22
log
@databases: beuhbye COMMENT, bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/12/28 17:14:10 matt Exp $
d32 1
a32 1
BUILD_DEPENDS=		${LOCALBASE}/jdk${JDK_VERSION}/bin/java::devel/jdk
@


1.21
log
@- fixup PLIST and build both shared & static libs (gluk@@ptci.ru)
- don't install java docs if not installing java flavor
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.20 2000/09/24 01:32:39 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.320
@


1.20
log
@define FLAVOR as being empty, subsequent tests for FLAVOR then do not have
to check if FLAVOR is defined. (stays consistent with every other port).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/09/04 17:17:45 matt Exp $
d42 7
a48 1
	@@-mv ${PREFIX}/lib/libdb.a ${PREFIX}/lib/libdb3.a
@


1.19
log
@- update to 3.1.17
- FAKE, IS_INTERACTIVE -> FLAVOR
- use shared libs again on arches that support it (req'd for java)
- make java support actually compile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/04/09 17:36:13 espie Exp $
d24 1
d26 1
d28 1
a28 1
.if defined(FLAVOR) && ${FLAVOR:L:Mjava}
d48 1
a48 1
.if defined(FLAVOR) && ${FLAVOR:L:Mjava}
@


1.18
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/03/24 22:11:38 espie Exp $
d3 1
a3 1
DISTNAME=	db-3.0.55
d5 3
a7 3
NEED_VERSION=	1.191
FAKE=No
MASTER_SITES=	http://www.sleepycat.com/update/3.0.55/
d9 3
a11 1
MAINTAINER=	tacho@@openbsd.org
a12 1
LICENSE_TYPE=		BSD
d18 13
a30 6
GNU_CONFIGURE=	yes
CONFIGURE_SCRIPT=../dist/configure
CONFIGURE_ARGS=	--enable-compat185 --enable-dump185 --enable-cxx 

.if defined(USE_JAVA) && ${USE_JAVA:U} == YES
CONFIGURE_ARGS+= --enable-java
d33 3
a35 12
IS_INTERACTIVE=	yes

NO_PACKAGE=	"interactive port"

WRKDIST=	${WRKDIR}/${DISTNAME}/build_unix

EXAMPLES_C=	README ex_access.c ex_btrec.c ex_env.c ex_lock.c \
		ex_mpool.c ex_thread.c ex_tpcb.c ex_tpcb.h
EXAMPLES_CPP=	AccessExample.cpp BtRecExample.cpp EnvExample.cpp \
		LockExample.cpp MpoolExample.cpp TpcbExample.cpp 
EXAMPLES_JAVA=  AccessExample.java BtRecExample.java EnvExample.java \
		LockExample.java TpcbExample.java
a37 1
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/doc/db
a38 1
	@@mv ${PREFIX}/docs/* ${PREFIX}/share/doc/db
d40 1
a40 1
	@@rmdir ${PREFIX}/docs
d42 1
a42 1
	@@cd ${WRKSRC}/../examples_c; ${INSTALL_DATA} ${EXAMPLES_C} \
d44 1
a44 1
	@@cd ${WRKSRC}/../examples_cxx; ${INSTALL_DATA} ${EXAMPLES_CPP} \
d46 2
a47 1
	@@cd ${WRKSRC}/../examples_java; ${INSTALL_DATA} ${EXAMPLES_JAVA} \
d49 1
a49 9
	@@echo ""
	@@echo "Java support for ${PKGNAME} is *NOT* built by default,"
	@@echo "and requires that you have a working copy of the JDK"
	@@echo "installed."
	@@echo ""
	@@echo "To build Java support, use the \"USE_JAVA=yes\" option"
	@@echo "on the make command line."
	@@echo "For example: \"make USE_JAVA=yes\""
	@@echo ""
d52 1
@


1.17
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/02/15 05:04:08 turan Exp $
d6 1
@


1.16
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/02/12 06:29:51 turan Exp $
d5 1
a6 1
NEED_VERSION=	1.191
@


1.15
log
@bsd licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/02/11 00:37:20 espie Exp $
d11 4
a14 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.14
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/02/02 18:18:41 brad Exp $
d9 6
@


1.13
log
@- rearrange Makefile
- add USE_JAVA knob to enable Java support
- remove deprecated variables
- batch up the install of files instead of using .for loops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/01/31 15:07:03 kevlo Exp $
d6 1
d22 1
a22 1
WRKSRC=	${WRKDIR}/${DISTNAME}/build_unix
@


1.12
log
@Don't use --enable-shared and fix the PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/12/02 07:17:10 kevlo Exp $
d5 1
d9 9
a17 1
MASTER_SITES=	http://www.sleepycat.com/update/3.0.55/
d19 1
a19 4
GNU_CONFIGURE=	YES
CONFIGURE_SCRIPT=	../dist/configure
CONFIGURE_ARGS=		--host=${ARCH}-unknown-openbsd --prefix=${PREFIX} \
			--enable-compat185 --enable-dump185 --enable-cxx 
d21 1
a21 1
WRKSRC=		${WRKDIR}/${DISTNAME}/build_unix
a29 3
IS_INTERACTIVE=		yes
NO_PACKAGE=		interactive port

d31 3
d35 3
a37 7
	@@${MKDIR} ${PREFIX}/share/doc/db
	@@${MV} ${PREFIX}/docs/* ${PREFIX}/share/doc/db
	@@${RMDIR} ${PREFIX}/docs
	@@${MKDIR} ${PREFIX}/share/examples/db
	@@echo Installing samples: ${PREFIX}/share/examples/db ...
.for example in ${EXAMPLES_C}
	@@${INSTALL_DATA} ${WRKSRC}/../examples_c/${example} \
d39 1
a39 3
.endfor
.for example in ${EXAMPLES_CPP}
	@@${INSTALL_DATA} ${WRKSRC}/../examples_cxx/${example} \
d41 1
a41 3
.endfor
.for example in ${EXAMPLES_JAVA}
	@@${INSTALL_DATA} ${WRKSRC}/../examples_java/${example} \
d43 9
a51 8
.endfor
	@@${ECHO_MSG} ""
	@@${ECHO_MSG} "Java support for ${PKGNAME} is *not* built by default,"
	@@${ECHO_MSG} "and requires that you have a work working copy of the"
	@@${ECHO_MSG} "JDK installed."
	@@${ECHO_MSG} ""
	@@${ECHO_MSG} "To build java support, please add \"--enable-java\""
	@@${ECHO_MSG} "in CONFIGURE_ARGS, thaks."
@


1.11
log
@Update to 3.0.55. Fix up PLISTs and update the DESCR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/10/29 09:40:15 turan Exp $
d13 1
a13 2
			--enable-compat185 --enable-dump185 --enable-cxx \
			--enable-shared --enable-dynamic
@


1.10
log
@these ports are interactive.  mark NO_PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/06/18 04:06:16 marc Exp $
d3 1
a3 1
DISTNAME=	db-2.7.5
d8 1
a8 3
MIRROR_DISTFILE=	no

MASTER_SITES=	see-do-fetch-target
d13 2
a14 1
			--enable-compat185 --enable-dump185 --enable-cxx
d18 6
a23 4
EXAMPLES=	README ex_access.c ex_appinit.c ex_btrec.c ex_lock.c \
		ex_mpool.c ex_tpcb.c ex_tpcb.h
EXAMPLES_CPP=	AccessExample.cpp AppinitExample.cpp LockExample.cpp \
		MpoolExample.cpp TpcbExample.cpp
a27 12
do-fetch:
	@@if [ ! -f ${DISTDIR}/${DISTFILES} ]; then \
	 ${ECHO} "";\
	 ${ECHO} "  The source to this port may not be automatically fetched.";\
	 ${ECHO} "  See http://www.sleepycat.com/register.html for details.";\
	 ${ECHO} "";\
	 ${ECHO} "  Once ${DISTFILES} has been downloaded,";\
	 ${ECHO} "  move it to ${DISTDIR} and restart this build.";\
	 ${ECHO} "";\
	 exit 1;\
	fi

d29 4
a32 2
	@@mv ${PREFIX}/include/db.h ${PREFIX}/include/db2.h
	@@mv ${PREFIX}/lib/libdb.a ${PREFIX}/lib/libdb2.a
d35 2
a36 2
.for example in ${EXAMPLES}
	@@${INSTALL_DATA} ${WRKSRC}/../examples/${example} \
d43 11
@


1.9
log
@Ooops... install include as db2.h to differentiate it from the system
db.h.  As long as the header is changed rename the lib to libdb2.a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/06/18 03:31:35 marc Exp $
d25 1
@


1.8
log
@Berkeley db version 2.7.5.  Alas, the doc is now in html format.
Visit /usr/local/share/doc/db with your brouser for all details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/04/01 06:20:05 brad Exp $
d39 2
@


1.7
log
@fix dependency lists, fix email address's and remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1998/10/18 05:02:03 marc Exp $
d3 1
a3 1
DISTNAME=	db-2.3.16
d6 1
a6 1
#BROKEN=	"newer version available"
d8 1
a8 1
MAINTAINER=	tacho@@openbsd.org
d10 1
a10 1
MASTER_SITES=	http://www.sleepycat.com/packages/
d14 1
a14 1
CONFIGURE_ARGS=		--host=${ARCH}-unknown-openbsd --prefix=${PREFIX}\
a15 1
WRKSRC=		${WRKDIR}/${DISTNAME}/build.unix
d17 2
a18 1
DOCs=		hash.usenix.ps libtp.usenix.ps
d24 14
d39 2
a40 6
	${MKDIR} ${PREFIX}/share/doc/db
.for doc in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/../documents/${doc} ${PREFIX}/share/doc/db
	gzip -9 ${PREFIX}/share/doc/db/${doc}
.endfor
	${MKDIR} ${PREFIX}/share/examples/db
d42 1
a42 1
	${INSTALL_DATA} ${WRKSRC}/../examples/${example} \
d46 1
a46 1
	${INSTALL_DATA} ${WRKSRC}/../examples_cxx/${example} \
@


1.6
log
@comment out the BROKEN reason for all ports where the reason
was source files out of date and we have a copy of the required
version on ftp.openbsd.org
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.5 1998/10/08 04:23:55 marc Exp $
#
@


1.5
log
@BROKEN: newer version available
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1998/02/06 17:53:53 tacho Exp $
d7 1
a7 1
BROKEN=		"newer version available"
@


1.4
log
@recent version
@
text
@d1 1
a1 6
# OpenBSD makefile for:	Berkeley DB
# Version required:     2.3.12
# Date created:	        26 Nov 1997
# Whom:                 Stanislav Grozev <tacho@@openbsd.org>
#
# $OpenBSD: Makefile,v 1.3 1998/02/06 13:39:46 niklas Exp $
d6 2
a7 1
MASTER_SITES=	http://www.sleepycat.com/packages/
d11 1
a11 1
WRKSRC=		${WRKDIR}/${DISTNAME}/build.unix
d17 1
d19 5
a23 6
MAN1=	db_archive.1 db_checkpoint.1 db_deadlock.1 db_dump.1 db_load.1 \
	db_recover.1 db_stat.1
MAN3=	db_appinit.3 db_cursor.3 db_dbm.3 db_hsearch.3 db_intro.3 db_lock.3 \
	db_log.3 db_mpool.3 db_open.3 db_txn.3 \
	Db.3 DbEnv.3 DbException.3 DbInfo.3 DbLock.3 DbLockTab.3 DbLog.3 \
	DbLsn.3 DbMpool.3 DbMpoolFile.3 DbTxn.3 DbTxnMgr.3 Dbc.3 Dbt.3
d27 1
a27 1
.for doc in hash.usenix.ps libtp.usenix.ps
d32 3
a34 2
.for example in README ex_access.c ex_appinit.c ex_btrec.c ex_lock.c ex_mpool.c ex_tpcb.c ex_tpcb.h
	${INSTALL_DATA} ${WRKSRC}/../examples/${example} ${PREFIX}/share/examples/db
d36 3
a38 2
.for example in AccessExample.cpp AppinitExample.cpp LockExample.cpp MpoolExample.cpp TpcbExample.cpp
	${INSTALL_DATA} ${WRKSRC}/../examples_cxx/${example} ${PREFIX}/share/examples/db
@


1.3
log
@Port broken, missing distfile. Told the maintainer
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1997/12/29 22:01:01 joey Exp $
d9 1
a9 1
DISTNAME=	db-2.3.12
d11 1
a11 1
MASTER_SITES=	ftp://ftp.freebsd.org/pub/FreeBSD/distfiles/
a13 1
BROKEN=		yes
d32 1
a32 1
	${INSTALL_DATA} ${WRKSRC}/../docs/${doc} ${PREFIX}/share/doc/db
@


1.2
log
@another bad ftp site
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1997/11/26 13:11:17 tacho Exp $
d14 1
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD$
d11 1
a11 1
MASTER_SITES=	http://www.sleepycat.com/packages/
@


1.1.1.1
log
@db 2.3.12
@
text
@@


1.1.1.2
log
@split import of versions v3 and v4 of Berkeley DB
@
text
@d1 5
d7 1
d9 3
a11 2
     SUBDIR+= v3
     SUBDIR+= v4
d13 31
a43 1
.include <bsd.port.subdir.mk>
@

