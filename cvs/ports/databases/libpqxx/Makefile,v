head	1.21;
access;
symbols
	OPENBSD_6_1:1.20.0.4
	OPENBSD_6_1_BASE:1.20
	OPENBSD_6_0:1.20.0.2
	OPENBSD_6_0_BASE:1.20
	OPENBSD_5_9:1.19.0.4
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.19.0.6
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.19.0.2
	OPENBSD_5_7_BASE:1.19
	OPENBSD_5_6:1.16.0.2
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.12.0.6
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.12.0.4
	OPENBSD_5_2_BASE:1.12
	OPENBSD_5_1_BASE:1.12
	OPENBSD_5_1:1.12.0.2
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.7.0.12
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.10
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.8
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.6
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.6.0.4
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	alek_20051002:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.21
date	2017.04.10.11.45.24;	author sthen;	state Exp;
branches;
next	1.20;
commitid	XDh1zlSBq0boKsHk;

1.20
date	2016.03.11.19.59.12;	author naddy;	state Exp;
branches;
next	1.19;
commitid	pguKLBEFv33DrgKU;

1.19
date	2015.01.12.20.57.55;	author zhuk;	state Exp;
branches;
next	1.18;
commitid	GI7dBb23lfxvh7gv;

1.18
date	2014.10.02.10.16.34;	author zhuk;	state Exp;
branches;
next	1.17;
commitid	KPdoKBNHrlOeKXYW;

1.17
date	2014.09.09.20.15.25;	author naddy;	state Exp;
branches;
next	1.16;
commitid	i1JmfaoUh9VAl6hz;

1.16
date	2014.07.12.07.19.56;	author zhuk;	state Exp;
branches;
next	1.15;
commitid	Zq4VoJBGua9HlNRY;

1.15
date	2014.04.24.10.18.51;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2013.03.21.08.45.14;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2013.03.11.02.52.05;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2011.11.04.08.16.24;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2011.09.16.08.48.03;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2011.07.11.21.10.33;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.15.00.22.51;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.09.01.09.17.43;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.15.20.34.00;	author simon;	state Exp;
branches;
next	1.6;

1.6
date	2006.10.28.11.19.20;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.08.01.22.19.46;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.13.19.12.16;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.01.08.22.02.20;	author aanriot;	state Exp;
branches;
next	1.2;

1.2
date	2005.12.26.21.32.01;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.10.02.13.26.31;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.10.02.13.26.31;	author alek;	state Exp;
branches;
next	;


desc
@@


1.21
log
@use LIBCXX
@
text
@# $OpenBSD: Makefile,v 1.20 2016/03/11 19:59:12 naddy Exp $

COMMENT=	C++ client API for PostgreSQL

DISTNAME=	libpqxx-4.0.1
CATEGORIES=	databases devel

SHARED_LIBS =	pqxx                 2.0      # .0.0

HOMEPAGE=	http://pqxx.org/development/libpqxx/

# 3-clause BSDL
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += crypto m pq ssl ${LIBCXX}

MASTER_SITES=	http://pqxx.org/download/software/libpqxx/

LIB_DEPENDS=	databases/postgresql

MODULES=	databases/postgresql lang/python
MODPY_RUNDEP=	No
MODPY_ADJ_FILES=tools/splitconfig \
		tools/template2mak.py

# "Yes" breaks tests
SEPARATE_BUILD=	No

CONFIGURE_STYLE=gnu

MODPOSTGRESQL_TEST_DBNAME =	pqxx-test

.include <bsd.port.mk>
@


1.20
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/01/12 20:57:55 zhuk Exp $
d15 1
a15 1
WANTLIB += crypto m pq ssl stdc++
@


1.19
log
@Use new shiny postgresql.port.mk.

Input for pgrouting part and okay for it from landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/10/02 10:16:34 zhuk Exp $
a29 1
CONFIGURE_ARGS=	${CONFIGURE_SHARED}
@


1.18
log
@We have ALL_TEST_ENV now, don't invent own one.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/09/09 20:15:25 naddy Exp $
d21 1
a21 1
MODULES=	lang/python
d32 1
a32 22
# Regression tests start up and use a real database
TEST_DEPENDS =		databases/postgresql,-server
PGDATA =		${WRKDIR}/testdb
PGDATABASE =		pqxx-test
TEST_ENV =		PGDATABASE=${PGDATABASE} \
			PGHOST=${WRKDIR}

# Make sure that server is always stopped after starting
do-test:
	rm -Rf ${PGDATA}
	${LOCALBASE}/bin/initdb -D ${PGDATA} -A trust --locale=C
	${LOCALBASE}/bin/pg_ctl start -w -D ${PGDATA} -l ${WRKDIR}/pg.log \
		-o "-F -h '' -k ${WRKDIR}"
	${TEST_ENV} ${LOCALBASE}/bin/createdb ${PGDATABASE} || \
	    (${LOCALBASE}/bin/pg_ctl stop -D ${PGDATA} -m i; exit 1)
	cd ${WRKBUILD}; \
	    set +e; \
	    ${SETENV} ${ALL_TEST_ENV} ${MAKE_PROGRAM} ${ALL_TEST_FLAGS} \
	        -f ${MAKE_FILE} ${TEST_TARGET}; \
	    Q=$$?; \
	    ${LOCALBASE}/bin/pg_ctl stop -D ${PGDATA} -m i; \
	    exit $$Q
@


1.17
log
@* regcomp (and thus grep) now supports \<word\>
* running the tests requires the server

ok zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/07/12 07:19:56 zhuk Exp $
a37 1
ALL_TEST_ENV =		${MAKE_ENV} ${TEST_ENV}
@


1.16
log
@Update libpqxx to 4.0.1, allowing (to be finished) Calligra to use it.

Tested by landry@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/04/24 10:18:51 ajacoutot Exp $
d33 1
@


1.15
log
@Regen WANTLIB after kerberos removal from postgresql.

prodded by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/03/21 08:45:14 ajacoutot Exp $
d5 4
a8 4
DISTNAME=	libpqxx-2.5.3
REVISION=	4
CATEGORIES=	databases
SHARED_LIBS +=	pqxx                 1.0      # .0.0
d12 1
a12 1
# BSD
d17 1
a17 2
MASTER_SITES=	http://pqxx.org/download/software/libpqxx/ \
		ftp://pqxx.org/software/libpqxx/
d21 7
d32 22
a53 2
# Regression tests connect to real database
NO_TEST=	Yes
@


1.14
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/03/11 02:52:05 espie Exp $
d6 1
a6 1
REVISION=	3
d15 1
a15 1
WANTLIB += pq>=4 com_err crypto m ssl stdc++
@


1.13
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/11/04 08:16:24 jasper Exp $
a21 1
USE_LIBTOOL=	Yes
@


1.12
log
@- regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/09/16 08:48:03 espie Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d28 1
a28 1
NO_REGRESS=	Yes
@


1.11
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/07/11 21:10:33 sthen Exp $
d6 1
a6 1
REVISION=	2
d18 1
a18 1
WANTLIB += pq>=4
@


1.10
log
@Don't use GNU-only grep syntax, spotted by naddy. Fix homepage while there.
Note, this could use an update too, port is years out of date and the
distfile is no longer available upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/15 00:22:51 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.9
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/09/01 09:17:43 sthen Exp $
d6 1
a6 1
REVISION=	0
d10 1
a10 1
HOMEPAGE=	http://gborg.postgresql.org/project/libpqxx/
d20 2
a21 2
MASTER_SITES=	http://gborg.postgresql.org/download/libpqxx/stable/ \
		ftp://gborg.postgresql.org/pub/libpqxx/stable/
@


1.8
log
@use REVISION and new-style LIB_DEPENDS+WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/15 20:34:00 simon Exp $
d18 1
a18 1
WANTLIB += pq.>=4
d23 1
a23 1
LIB_DEPENDS=	:postgresql-client-*:databases/postgresql
@


1.7
log
@remove surrounding quotes from COMMENT/BROKEN/PERMIT_*
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/10/28 11:19:20 espie Exp $
d6 1
a6 1
PKGNAME=	$(DISTNAME)p0
d18 2
d23 1
a23 1
LIB_DEPENDS=	pq.>=4:postgresql-client-*:databases/postgresql
@


1.6
log
@a few more SHARED_LIBS reformat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/08/01 22:19:46 espie Exp $
d3 1
a3 1
COMMENT=	"C++ client API for PostgreSQL"
@


1.5
log
@more new libspecs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/01/13 19:12:16 espie Exp $
d8 1
a8 1
SHARED_LIBS=	pqxx	1.0
@


1.4
log
@Bump C++ shared libs numbers and corresponding package names,
handles a through databases
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/01/08 22:02:20 aanriot Exp $
d21 1
a21 1
LIB_DEPENDS=	pq.4:postgresql-client-*:databases/postgresql
@


1.3
log
@get ride of MOGNU_SHARED_LIBS and LIBpqxx_ALIAS.

inputs and ok steven@@ alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/12/26 21:32:01 sturm Exp $
d6 1
d8 1
a8 1
SHARED_LIBS=	pqxx	0.0
@


1.2
log
@SHARED_LIBS, USE_LIBTOOl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/10/02 13:26:31 alek Exp $
a7 2
MODGNU_SHARED_LIBS=pqxx ''
LIBpqxx_ALIAS=	realpqxx
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 3
@


1.1.1.1
log
@Import libpqxx 2.5.3

libpqxx is a front-end (in the sense of "language binding") for writing
C++ programs that use PostgreSQL. It supersedes the older libpq++
interface, which came bundled with the DBMS.

ok espie@@
@
text
@@
