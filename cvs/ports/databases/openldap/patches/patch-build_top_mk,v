head	1.6;
access;
symbols
	OPENBSD_6_1:1.6.0.26
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.24
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.20
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.22
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.18
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.16
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.14
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.12
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.10
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.8
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.6
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.5.0.12
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.10
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.6
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.4.0.6
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.4
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3;
locks; strict;
comment	@# @;


1.6
date	2011.01.07.10.24.30;	author pea;	state Exp;
branches;
next	1.5;

1.5
date	2008.01.14.21.01.11;	author mbalmer;	state Exp;
branches;
next	1.4;

1.4
date	2006.06.19.08.22.35;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2005.12.29.14.00.36;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2005.11.12.17.22.59;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.11.09.15.42.50;	author mbalmer;	state Exp;
branches;
next	;


desc
@@


1.6
log
@*MAJOR UPGRADE*

Upgrade to OpenLDAP 2.4.23.
Important things to know:

+ ldbm backend has been removed
+ bdb is the default backend
+ slurp has been removed

Backup all your data before this upgrade !!

Tested in a bulk by landry@@
Lot of help/comments/ideas/tests from ajacoutot@@, jasper@@, landry@@, sthen@@, stephan@@

ok ajacoutot@@, landry@@, jasper@@, stephan@@
@
text
@$OpenBSD: patch-build_top_mk,v 1.5 2008/01/14 21:01:11 mbalmer Exp $
--- build/top.mk.orig	Mon Jul  6 21:22:52 2009
+++ build/top.mk	Mon Nov  2 12:09:42 2009
@@@@ -122,7 +122,7 @@@@ LTLINK_MOD = $(LIBTOOL) $(LTONLY_MOD) --mode=link \
 	$(CC) $(LT_CFLAGS) $(LDFLAGS) $(LTFLAGS_MOD)
 
 LTINSTALL = $(LIBTOOL) --mode=install $(INSTALL) 
-LTFINISH = $(LIBTOOL) --mode=finish
+LTFINISH = true 
 
 # Misc UNIX commands used in build environment
 AR = @@AR@@
@


1.5
log
@Unbreak package build of bdb FLAVOR.  OpenLDAP 2.3.x still has issues with
BDB4.6.
@
text
@d1 4
a4 4
$OpenBSD: patch-build_top_mk,v 1.4 2006/06/19 08:22:35 bernd Exp $
--- build/top.mk.orig	Wed Jan  3 00:42:47 2007
+++ build/top.mk	Mon Jan 14 11:55:23 2008
@@@@ -121,7 +121,7 @@@@ LTLINK_MOD = $(LIBTOOL) $(LTONLY_MOD) --mode=link \
@


1.4
log
@Security update to openldap-2.3.24. (CVE-2006-2754)

Fixes a status file handling buffer overflow in slurpd.

More information:
http://secunia.com/advisories/20126/

Remove obsolete MODGNU_SHARED_LIBS stuff.

ok mbalmer@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-build_top_mk,v 1.3 2005/12/29 14:00:36 bernd Exp $
--- build/top.mk.orig	Mon Aug 29 20:46:17 2005
+++ build/top.mk	Wed Dec 28 12:04:37 2005
@@@@ -121,7 +121,7 @@@@ LTLINK_MOD = $(LIBTOOL) $(LTONLY_MOD) --
@


1.3
log
@SHARED_LIBS. Teamwork by mbalmer and me.

ok mbalmer
@
text
@d1 1
a1 1
$OpenBSD: patch-build_top_mk,v 1.2 2005/11/12 17:22:59 mbalmer Exp $
a3 18
@@@@ -73,7 +73,7 @@@@ MKVERSION = $(top_srcdir)/build/mkversio
 LIBTOOL = @@LIBTOOL@@
 LIBRELEASE = @@OPENLDAP_LIBRELEASE@@
 LIBVERSION = @@OPENLDAP_LIBVERSION@@
-LTVERSION = -release $(LIBRELEASE) -version-info $(LIBVERSION)
+LTVERSION = -release $(LIBRELEASE)
 
 # libtool --only flag for libraries: platform specific
 NT_LTONLY_LIB = # --only-$(BUILD_LIBS_DYNAMIC)
@@@@ -112,7 +112,7 @@@@ LTCOMPILE_LIB = $(LIBTOOL) $(LTONLY_LIB)
 	$(CC) $(LT_CFLAGS) $(LT_CPPFLAGS) $(LIB_DEFS) -c
 
 LTLINK_LIB = $(LIBTOOL) $(LTONLY_LIB) --mode=link \
-	$(CC) $(LT_CFLAGS) $(LDFLAGS) $(LTFLAGS_LIB)
+	$(CC) $(LT_CFLAGS) $(LDFLAGS) $(LTFLAGS_LIB) $(LIBRARY_LT_VERSION)
 
 LTCOMPILE_MOD = $(LIBTOOL) $(LTONLY_MOD) --mode=compile \
 	$(CC) $(LT_CFLAGS) $(LT_CPPFLAGS) $(MOD_DEFS) -c
@


1.2
log
@Set USE_LIBTOOL=Yes and bump package name.  Make sure libsasl2 is linked.

Caveat:  older versions of the port/package must be removed before building
the package.

thanks to espie@@ and bernd@@ for helping.
@
text
@d1 21
a21 3
$OpenBSD$
--- build/top.mk.orig	Sat Nov 12 14:42:32 2005
+++ build/top.mk	Sat Nov 12 14:43:05 2005
@


1.1
log
@Make sure libldap.so and libldap_r.so are linked against the newly built
liblber.so and not a liblber.so that might be installed in the system.

Bump package name.

problem reported by bernd@@, thanks.
@
text
@d2 4
a5 4
--- build/top.mk.orig	Wed Nov  9 16:11:04 2005
+++ build/top.mk	Wed Nov  9 16:11:24 2005
@@@@ -112,7 +112,7 @@@@ LTCOMPILE_LIB = $(LIBTOOL) $(LTONLY_LIB)
 	$(CC) $(LT_CFLAGS) $(LT_CPPFLAGS) $(LIB_DEFS) -c
d7 3
a9 3
 LTLINK_LIB = $(LIBTOOL) $(LTONLY_LIB) --mode=link \
-	$(CC) $(LT_CFLAGS) $(LDFLAGS) $(LTFLAGS_LIB)
+	$(CC) $(LT_CFLAGS) $(LTFLAGS_LIB)
d11 2
a12 2
 LTCOMPILE_MOD = $(LIBTOOL) $(LTONLY_MOD) --mode=compile \
 	$(CC) $(LT_CFLAGS) $(LT_CPPFLAGS) $(MOD_DEFS) -c
@

