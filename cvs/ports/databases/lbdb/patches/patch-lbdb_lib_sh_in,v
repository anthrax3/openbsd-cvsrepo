head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.28
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.24
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.26
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.22
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.20
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.18
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.16
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.14
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.12
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.10
	OPENBSD_5_0:1.2.0.8
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.6
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.4
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.2
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.1.1.1.0.6
	OPENBSD_4_6_BASE:1.1.1.1
	OPENBSD_4_5:1.1.1.1.0.4
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	sthen_20080615:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2009.10.10.10.48.49;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2008.06.15.07.22.57;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.06.15.07.22.57;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@avoid some dumb resolv.conf parsing
@
text
@$OpenBSD: patch-lbdb_lib_sh_in,v 1.1.1.1 2008/06/15 07:22:57 sthen Exp $
--- lbdb_lib.sh.in.orig	Sun Aug 13 10:53:21 2006
+++ lbdb_lib.sh.in	Sat Oct 10 03:10:21 2009
@@@@ -57,24 +57,7 @@@@ lbdb_hostname()
 	elif test -f /etc/mailname; then
 		hn=`cat /etc/mailname`
 	else
-		hn=""
-		if test -r /etc/resolv.conf ; then
-			hn="`sed -n -e 's/^[ 	]*domain[ 	]\{1,\}\([^ ]*\)/\1/p' /etc/resolv.conf`"
-			if test "x$hn" = "x" ; then
-				hn="`sed -n -e 's/^[ 	]*search[ 	]\{1,\}\([^ ]*\)/\1/p' /etc/resolv.conf`"
-			fi
-		fi
-		if test "x$hn" = "x" ; then
-			hn=`lbdb_hn_sendmail`
-			if test "x$hn" = "xNONE" ; then
-				for i in /etc/HOSTNAME /etc/hostname ; do
-					if test -f $i ; then
-						hn="`cat $i`"
-						break;
-					fi
-				done
-			fi
-		fi
+		hn=`hostname`
 	fi
 	echo "$hn"
 }
@


1.1
log
@Initial revision
@
text
@d1 17
a17 7
$OpenBSD$
--- lbdb_lib.sh.in.orig	Tue Mar 11 22:51:11 2008
+++ lbdb_lib.sh.in	Tue Mar 11 22:51:37 2008
@@@@ -67,7 +67,7 @@@@ lbdb_hostname()
 		if test "x$hn" = "x" ; then
 			hn=`lbdb_hn_sendmail`
 			if test "x$hn" = "xNONE" ; then
d19 11
a29 4
+				for i in /etc/myname /etc/HOSTNAME /etc/hostname ; do
 					if test -f $i ; then
 						hn="`cat $i`"
 						break;
@


1.1.1.1
log
@import lbdb,

Little Brother Database is a simple email address database,
originally designed for Mutt, but working with other software.
It can query multiple backends, including local files of many
formats, and some network sources, including finger and
YP/NIS. LDAP support is available in the lbdb-ldap package.

requested by marco@@
@
text
@@
