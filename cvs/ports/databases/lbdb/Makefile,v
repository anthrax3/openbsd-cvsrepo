head	1.19;
access;
symbols
	OPENBSD_6_0:1.19.0.2
	OPENBSD_6_0_BASE:1.19
	OPENBSD_5_9:1.18.0.2
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.17.0.6
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.17.0.2
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.16.0.2
	OPENBSD_5_6_BASE:1.16
	OPENBSD_5_5:1.15.0.2
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.6
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.4
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.12.0.4
	OPENBSD_5_0_BASE:1.12
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.8.0.4
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.8.0.2
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	sthen_20080615:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.19
date	2016.04.29.11.03.43;	author naddy;	state Exp;
branches;
next	1.18;
commitid	CIAPgthG8gI9sEa2;

1.18
date	2016.02.01.06.49.52;	author benoit;	state Exp;
branches;
next	1.17;
commitid	Eac3b9YpUUmpqyog;

1.17
date	2014.09.16.12.15.23;	author sthen;	state Exp;
branches;
next	1.16;
commitid	UuyC0fvmU27Otz2U;

1.16
date	2014.03.20.13.59.49;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2014.01.01.20.46.28;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2013.03.11.02.52.05;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2011.09.16.08.48.03;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.15.00.22.51;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.06.10.18.38;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.18.17.06.07;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2010.09.01.09.17.42;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2009.10.10.10.48.49;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.08.07.19.43.36;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2009.06.25.22.45.56;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.06.08.17.13.49;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.04.18.09.02.05;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.04.13.13.23.35;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2008.11.07.14.09.08;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2008.06.15.07.22.57;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.06.15.07.22.57;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.19
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.18 2016/02/01 06:49:52 benoit Exp $

COMMENT-main =		"little brother's database", email address query tools
COMMENT-ldap =		LDAP support for lbdb

VERSION =		0.40

DISTNAME =		lbdb_${VERSION}
PKGNAME-main =		lbdb-${VERSION}
PKGNAME-ldap =		lbdb-ldap-${VERSION}

CATEGORIES =		databases mail

HOMEPAGE =		http://www.spinnaker.de/lbdb/

MULTI_PACKAGES =	-main -ldap

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

RUN_DEPENDS-ldap =	databases/p5-ldap \
			databases/lbdb

LIB_DEPENDS-main =	converters/libiconv
WANTLIB-main =		c iconv
LIB_DEPENDS-ldap =
WANTLIB-ldap =

MASTER_SITES =		http://www.spinnaker.de/debian/

MAKE_ENV =		install_prefix=${WRKINST}

NO_TEST =		Yes
USE_GMAKE =		Yes
CONFIGURE_STYLE =	gnu

CONFIGURE_ARGS += 	--libdir=${PREFIX}/lib/lbdb \
			--with-libiconv-prefix=${LOCALBASE} \
			--without-abook \
			--without-addr-email \
			--without-niscat \
			--without-gpg \
			--without-pgpk \
			--without-pgp \
			--without-evolution-addressbook-export \
			--enable-lbdb-dotlock
CONFIGURE_ENV =		ac_cv_path_BASH=NONE \
			ac_cv_path_GAWK=NONE \
			CPPFLAGS="${CPPFLAGS} -I${LOCALBASE}/include" \
			LDFLAGS="${LDFLAGS} -L${LOCALBASE}/lib"

WRKDIST =		${WRKDIR}/${DISTNAME:S/_/-/}

post-install:
	${INSTALL_DATA_DIR} ${WRKINST}/${TRUEPREFIX}/share/examples/lbdb
	mv ${WRKINST}/etc/lbdb.rc ${WRKINST}/etc/lbdb_ldap.rc \
	    ${WRKINST}/${TRUEPREFIX}/share/examples/lbdb

.include <bsd.port.mk>
@


1.18
log
@Update to lbdb-0.40.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/09/16 12:15:23 sthen Exp $
d24 2
a25 2
MODULES =		converters/libiconv
WANTLIB-main =		c ${MODLIBICONV_WANTLIB}
@


1.17
log
@update to lbdb 0.39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/03/20 13:59:49 jasper Exp $
d6 1
a6 1
VERSION =		0.39
@


1.16
log
@fix POD error
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/01/01 20:46:28 naddy Exp $
d3 1
a3 1
COMMENT-main =		little brother's database, email address query tools
d6 1
a6 3
VERSION =		0.36
REVISION-main =		4
REVISION-ldap =		7
d33 1
@


1.15
log
@Drop USE_GROFF since groff and mandoc produce identical output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/03/11 02:52:05 espie Exp $
d8 1
a8 1
REVISION-ldap =		6
@


1.14
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/09/16 08:48:03 espie Exp $
a35 1
USE_GROFF =		Yes
@


1.13
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/15 00:22:51 espie Exp $
a21 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.12
log
@convert to new style depends
zap default spec that are not needed
convert libspecs as well
convert p* to REVISION.

No package changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/06 10:18:38 espie Exp $
d8 1
a8 1
REVISION-ldap =		5
@


1.11
log
@convert libiconv to new wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/10/18 17:06:07 espie Exp $
d26 2
a27 2
RUN_DEPENDS-ldap =	::databases/p5-ldap \
			:${PKGNAME-main}:databases/lbdb
d39 1
a39 1
USE_GROFF =	Yes
@


1.10
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/09/01 09:17:42 sthen Exp $
d30 1
a30 1
WANTLIB-main =		c
d32 1
@


1.9
log
@use REVISION and new-style LIB_DEPENDS+WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/10/10 10:48:49 sthen Exp $
d38 1
@


1.8
log
@avoid some dumb resolv.conf parsing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/08/07 19:43:36 naddy Exp $
d4 1
a4 1
COMMENT-ldap =		LDAP support for little brother's database
d7 3
d11 2
a12 4

# bump all subpackages together
PKGNAME-main =		lbdb-${VERSION}p4
PKGNAME-ldap =		lbdb-ldap-${VERSION}p4
d27 1
a27 1
			:${FULLPKGNAME-main}:databases/lbdb
@


1.7
log
@rewrite a GNU-ism for sed -E and get rid of gsed dependency; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/06/25 22:45:56 sthen Exp $
d10 2
a11 2
PKGNAME-main =		lbdb-${VERSION}p3
PKGNAME-ldap =		lbdb-ldap-${VERSION}p3
@


1.6
log
@- don't require gnu grep; RE changes from naddy. (gnu sed still needed).
- add a comment reminding people to bump both PKGNAMEs together.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/06/08 17:13:49 sthen Exp $
d10 2
a11 2
PKGNAME-main =		lbdb-${VERSION}p2
PKGNAME-ldap =		lbdb-ldap-${VERSION}p2
a24 1
RUN_DEPENDS-main =	::textproc/gsed
@


1.5
log
@avoid an autoconf-related problem with the files using awk.
found the hard way by marco@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/04/18 09:02:05 sthen Exp $
d9 3
a11 2
PKGNAME-main =		lbdb-${VERSION}p1
PKGNAME-ldap =		lbdb-ldap-${VERSION}p1
d25 1
a25 3
RUN_DEPENDS-main =	::textproc/gsed \
			::sysutils/ggrep

@


1.4
log
@- avoid pulling in gawk if installed at build time, pointed out by
Mike on the Openbsd-newbies mailing list.

- add libiconv support, bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/04/13 13:23:35 sthen Exp $
d9 2
a10 2
PKGNAME-main =		lbdb-${VERSION}p0
PKGNAME-ldap =		lbdb-ldap-${VERSION}p0
d51 2
a52 2
CONFIGURE_ENV =		ac_cv_path_BASH=false \
			ac_cv_path_GAWK=false \
@


1.3
log
@- update to 0.36
- avoid pulling in bash if installed at build time
- more specific license marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/11/07 14:09:08 bernd Exp $
d9 2
a10 2
PKGNAME-main =		lbdb-${VERSION}
PKGNAME-ldap =		lbdb-ldap-${VERSION}
d30 3
a32 1
WANTLIB =		c
d42 1
d51 4
a54 1
CONFIGURE_ENV =		ac_cv_path_BASH=false
@


1.2
log
@Fix package name for the ldap subpackage by adding PKGNAME-ldap.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/06/15 07:22:57 sthen Exp $
d6 1
a6 1
VERSION =		0.35.1
d18 1
a18 1
# GPL
d48 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.54 2008/01/13 16:43:57 espie Exp $
d6 2
a7 1
DISTNAME =		lbdb_0.35.1
d9 2
a10 2
PKGNAME =		${DISTNAME:S/_/-/}
FULLPKGNAME-main =	${PKGNAME}
@


1.1.1.1
log
@import lbdb,

Little Brother Database is a simple email address database,
originally designed for Mutt, but working with other software.
It can query multiple backends, including local files of many
formats, and some network sources, including finger and
YP/NIS. LDAP support is available in the lbdb-ldap package.

requested by marco@@
@
text
@@
