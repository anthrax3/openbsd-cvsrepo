head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.6
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.4
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.2
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.3.0.14
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.16
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.12
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.10
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.8
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.6
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.4
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2;
locks; strict;
comment	@.\" @;


1.4
date	2016.06.10.12.52.57;	author espie;	state Exp;
branches;
next	1.3;
commitid	WD0EDRJTvd0JWpMj;

1.3
date	2012.02.18.18.48.21;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.09.09.19.17.06;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2010.08.20.14.22.00;	author espie;	state Exp;
branches;
next	;


desc
@@


1.4
log
@remove more PLIST_DB references
@
text
@.\"	$OpenBSD: register-plist.1,v 1.3 2012/02/18 18:48:21 espie Exp $
.\"
.\" Copyright (c) 2010 Marc Espie <espie@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: February 18 2012 $
.Dt REGISTER-PLIST 1
.Os
.Sh NAME
.Nm register-plist
.Nd smart diff and registration of packing-lists
.Sh SYNOPSIS
.Nm register-plist
.Ar dir
.Op Ar pkgname ...
.Nm
.Fl t
.Ar p1
.Ar p2
.Sh DESCRIPTION
.Nm
is used to check that a packing-list for a given package name doesn't change.
By default, it is invoked at the end of
.Li make package,
see
.Ev PACKAGE_REPOSITORY
in
.Xr bsd.port.mk 5 .
Package names (package stem plus version) are used to uniquely identify
packages.
When something in the package changes, the package name should change,
usually by increasing
.Ev REVISION .
.Pp
.Nm
records a packing-list for each
.Ar pkgname
into the given directory
.Ar dir .
If no previous packing-list for the given pkgname exists, the packing-list
is recorded.
If a previous packing-list exists,
.Nm
compares both packing-list for discrepancies.
Whenever something significant changes,
.Nm
will display a diff of the differences, and exit with an error.
.Pp
Some items in the packing-list may change without actual problems.
For instance, dependencies are allowed to go forward.
On the other hand, some items like the package DESCR can't change at all.
Since this is a generated file, porters often overlook that items such as
the HOMEPAGE or the MAINTAINER's email address are embedded into that file,
and thus that changing these requires a REVISION bump.
.Pp
.Nm
can also be invoked with
.Fl t
and two packing-lists
.Ar p1
.Ar p2
to directly compare those packing-lists.
.Sh SEE ALSO
.Xr bsd.port.mk 5
@


1.3
log
@make it more obvious that PLIST_DB uses that.
@
text
@d1 1
a1 1
.\"	$OpenBSD: register-plist.1,v 1.2 2010/09/09 19:17:06 jasper Exp $
d17 1
a17 1
.Dd $Mdocdate: September 9 2010 $
d37 1
a37 1
.Ev PLIST_DB
@


1.2
log
@- various minor style nits
- start explanation of options with a capital letter for consistency
   with other man pages.
- sprinkle some more .Xr where needed
- slight rewording in some places

feedback and ok espie@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: register-plist.1,v 1.1 2010/08/20 14:22:00 espie Exp $
d17 1
a17 1
.Dd $Mdocdate: August 20 2010 $
d34 6
@


1.1
log
@document register-plist
@
text
@d1 1
a1 1
.\"	$OpenBSD: check-conflicts.1,v 1.1 2010/08/20 14:09:59 espie Exp $
d37 1
a37 1
usually by advancing
d58 1
a58 1
the HOMEPAGE or the MAINTAINER's email address are embedded in that file,
@

