head	1.11;
access;
symbols
	OPENBSD_6_0:1.11.0.4
	OPENBSD_6_0_BASE:1.11
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.8.0.2
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.7.0.6
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.4
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.7.0.2
	OPENBSD_5_4_BASE:1.7
	OPENBSD_5_3:1.6.0.2
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.5.0.6
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.4
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4;
locks; strict;
comment	@.\" @;


1.11
date	2015.11.02.11.57.40;	author espie;	state Exp;
branches;
next	1.10;
commitid	OqWgqDWdxwUgRqbH;

1.10
date	2015.09.25.15.23.49;	author schwarze;	state Exp;
branches;
next	1.9;
commitid	lhxPXIacOWkhUB9n;

1.9
date	2015.07.23.08.05.18;	author bentley;	state Exp;
branches;
next	1.8;
commitid	WVYnuTKBRUT3O5WP;

1.8
date	2014.08.10.10.07.10;	author espie;	state Exp;
branches;
next	1.7;
commitid	0OJHea5mURsmV4EK;

1.7
date	2013.04.27.15.43.42;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2012.10.28.10.32.23;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2011.07.25.07.58.55;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.09.19.17.06;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2010.09.03.18.51.19;	author schwarze;	state Exp;
branches;
next	1.2;

1.2
date	2010.08.20.15.16.07;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2010.08.20.14.38.31;	author espie;	state Exp;
branches;
next	;


desc
@@


1.11
log
@new sanity check option to pkg_subst, to be used shortly by bsd.port.mk
@
text
@.\"	$OpenBSD: pkg_subst.1,v 1.10 2015/09/25 15:23:49 schwarze Exp $
.\"
.\" Copyright (c) 2010 Marc Espie <espie@@openbsd.org>
.\"
.\" Permission to use, copy, modify, and distribute this software for any
.\" purpose with or without fee is hereby granted, provided that the above
.\" copyright notice and this permission notice appear in all copies.
.\"
.\" THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
.\" WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
.\" MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
.\" ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
.\" WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
.\" ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
.\" OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
.\"
.Dd $Mdocdate: September 25 2015 $
.Dt PKG_SUBST 1
.Os
.Sh NAME
.Nm pkg_subst
.Nd substitute variables' values in files
.Sh SYNOPSIS
.Nm pkg_subst
.Op Fl ci
.Op Fl B Ar basedir
.Op Fl D Ar name Ns Op = Ns Ar value
.Op Fl g Ar group
.Op Fl m Ar mode
.Op Fl o Ar owner
.Op Ar file ...
.Sh DESCRIPTION
.Nm
is used within the ports tree to substitute variable values, using
the exact same conventions used by
.Xr pkg_create 1 .
Constructs like
.Li ${VAR}
will be replaced with the variable value, according to
.Fl D Ar name Ns Op = Ns Ar value
options.
.Pp
The options are as follows
.Bl -tag -width Dname[=value]xxx
.It Fl B Ar basedir
Specify a basedir in which we know file properties.
It is forbidden to copy files from elsewhere without
.Fl m Ar mode .
.It Fl c
Copy and substitute.
Number of
.Ar file
arguments must be even.
They are paired as
.Ar src1
.Ar dest1 ,
.Ar src2
.Ar dest2 ...
and each
.Ar src
file is substituted and copied into the corresponding
.Ar dest
file.
.It Xo
.Fl D
.Ar name Ns Op = Ns Ar value
.Xc
Define
.Ar name
to
.Ar value ,
or to 1 if no value is given.
.It Fl g Ar group
Change group of destination file to
.Ar group .
.It Fl i
Ignore changes to group or owner that failed.
.It Fl m Ar mode
Change mode of destination file to
.Ar mode .
.It Fl o Ar owner
Change owner of destination file to
.Ar owner .
.El
.Pp
If no
.Ar file
arguments is given,
.Nm
acts as a filter from stdin to stdout.
.Pp
Without
.Fl c ,
each
.Ar file
is backed up as
.Ar file.beforesubst
before the substitution occurs.
.Sh SEE ALSO
.Xr install 1 ,
.Xr pkg_create 1
@


1.10
log
@obvious fix to the formatting and description of -D
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.9 2015/07/23 08:05:18 bentley Exp $
d17 1
a17 1
.Dd $Mdocdate: July 23 2015 $
d26 1
d45 4
@


1.9
log
@Typo fixes and lint cleanup in ports manpages, from Michael Reed.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.8 2014/08/10 10:07:10 espie Exp $
d17 1
a17 1
.Dd $Mdocdate: August 10 2014 $
d26 1
a26 4
.Oo Fl D Ar name
.Oo = Ns Ar value
.Oc
.Oc
d39 1
a39 1
.Fl D Ar name Ns = Ns Ar value
d43 1
a43 1
.Bl -tag -width Dname=valuexxx
d61 1
a61 1
.Ar name Ns = Ns Ar value
d66 2
a67 1
.Ar value .
@


1.8
log
@document -i
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.7 2013/04/27 15:43:42 sthen Exp $
d17 1
a17 1
.Dd $Mdocdate: April 27 2013 $
d27 1
a27 1
.Ns Oo Ns = Ns Ar value
d30 3
a32 3
.Op Fl g group
.Op Fl m mode
.Op Fl o owner
d61 1
a61 1
file .
d97 2
a98 2
.Xr pkg_create 1 ,
.Xr install 1 .
@


1.7
log
@add basic mode support for pkg_subst, ok espie@@. example use:
${SUBST_CMD} -c -m 755 -o root -g bin ${FILESDIR}/script ${PREFIX}/bin/script
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.6 2012/10/28 10:32:23 espie Exp $
d17 1
a17 1
.Dd $Mdocdate: October 28 2012 $
d25 1
a25 1
.Op Fl c
d73 2
@


1.6
log
@thinko
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.5 2011/07/25 07:58:55 ajacoutot Exp $
d17 1
a17 1
.Dd $Mdocdate: July 25 2011 $
d31 1
d53 4
a56 4
.Ar dest1
.Ar src1 ,
.Ar dest2
.Ar src2 ...
d73 3
@


1.5
log
@pkg-subst -> pkg_subst, spotted by Mike Small.
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.4 2010/09/09 19:17:06 jasper Exp $
d17 1
a17 1
.Dd $Mdocdate: September 9 2010 $
d72 1
a72 1
.It Fl u Ar owner
@


1.4
log
@- various minor style nits
- start explanation of options with a capital letter for consistency
   with other man pages.
- sprinkle some more .Xr where needed
- slight rewording in some places

feedback and ok espie@@
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.3 2010/09/03 18:51:19 schwarze Exp $
d17 1
a17 1
.Dd $Mdocdate: September 3 2010 $
d24 1
a24 1
.Nm pkg-subst
@


1.3
log
@fix a few mdoc(7) syntax errors found by mandoc -Tlint
one of them was fatal (no formatted output at all)
another one caused information loss in the formatted output
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.2 2010/08/20 15:16:07 espie Exp $
d17 1
a17 1
.Dd $Mdocdate: August 20 2010 $
d47 1
a47 1
copy and substitute.
d70 1
a70 1
change group of destination file to
d73 1
a73 1
change owner of destination file to
@


1.2
log
@typo
@
text
@d1 1
a1 1
.\"	$OpenBSD: pkg_subst.1,v 1.1 2010/08/20 14:38:31 espie Exp $
a89 1

@


1.1
log
@add & document pkg_subst
@
text
@d1 1
a1 1
.\"	$OpenBSD: register-plist.1,v 1.1 2010/08/20 14:22:00 espie Exp $
d41 1
a41 1
.Fl D AR name Ns = Ns Ar value
@

