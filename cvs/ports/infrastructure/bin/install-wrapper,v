head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.07.19.21.44.16;	author jasper;	state Exp;
branches;
next	1.1;
commitid	6Mmj6lIwoqcSwwzs;

1.1
date	2014.08.14.17.04.12;	author naddy;	state Exp;
branches;
next	;
commitid	ssbpBt8RBXirjLk7;


desc
@@


1.2
log
@accept '-D'
@
text
@#! /usr/bin/perl

use strict;
use warnings;
use Getopt::Std;

my %opts;
getopts('bCcDdpSsB:f:g:m:o:', \%opts);

for my $s (qw(b C c D d p S s)) {
	if ($opts{$s}) {
		unshift(@@ARGV, "-$s");
	}
}

if ($opts{m}) {
	my $mode = $opts{m};
	if ($mode eq '444' || $mode eq '0444') {
		$mode = '644';
	} elsif ($mode eq '555' || $mode eq '0555') {
		$mode = '755';
	}
	unshift(@@ARGV, '-m', $mode);
}

exec {'/usr/bin/install'} ('install', @@ARGV);
@


1.1
log
@Add the remaining pieces to allow fake as non-root.
Not enabled as a general default yet.

Committing for espie@@
@
text
@d8 1
a8 1
getopts('bCcdpSsB:f:g:m:o:', \%opts);
d10 1
a10 1
for my $s (qw(b C c d p S s)) {
@

