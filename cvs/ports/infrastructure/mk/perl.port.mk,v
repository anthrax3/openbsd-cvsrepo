head	1.29;
access;
symbols
	OPENBSD_6_2:1.29.0.6
	OPENBSD_6_2_BASE:1.29
	OPENBSD_6_1:1.29.0.4
	OPENBSD_6_1_BASE:1.29
	OPENBSD_6_0:1.29.0.2
	OPENBSD_6_0_BASE:1.29
	OPENBSD_5_9:1.24.0.4
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.6
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.2
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.23.0.6
	OPENBSD_5_6_BASE:1.23
	OPENBSD_5_5:1.23.0.4
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.23.0.2
	OPENBSD_5_4_BASE:1.23
	OPENBSD_5_3:1.20.0.2
	OPENBSD_5_3_BASE:1.20
	OPENBSD_5_2:1.19.0.8
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.19
	OPENBSD_5_1:1.19.0.6
	OPENBSD_5_0:1.19.0.4
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.19.0.2
	OPENBSD_4_9_BASE:1.19
	OPENBSD_4_8:1.16.0.4
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.16.0.2
	OPENBSD_4_7_BASE:1.16
	OPENBSD_4_6:1.15.0.4
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.15.0.2
	OPENBSD_4_5_BASE:1.15
	OPENBSD_4_4:1.14.0.2
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.13.0.4
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.11.0.4
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.10.0.8
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.10.0.6
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.4
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.10.0.2
	OPENBSD_3_6_BASE:1.10
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.5.0.2
	OPENBSD_3_4_BASE:1.5
	OPENBSD_3_3:1.4.0.4
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2;
locks; strict;
comment	@# @;


1.29
date	2016.04.26.10.56.59;	author sthen;	state Exp;
branches;
next	1.28;
commitid	FbIvW5WdGqu5h4SS;

1.28
date	2016.03.20.19.56.44;	author naddy;	state Exp;
branches;
next	1.27;
commitid	WXJcpbKc0PauxEav;

1.27
date	2016.03.20.00.31.36;	author naddy;	state Exp;
branches;
next	1.26;
commitid	keOPbd0qajbnht2Q;

1.26
date	2016.03.12.12.12.32;	author sthen;	state Exp;
branches;
next	1.25;
commitid	ei2rqjuEynM1iosu;

1.25
date	2016.03.11.13.06.22;	author nigel;	state Exp;
branches;
next	1.24;
commitid	sFvRLPE29qbqFthO;

1.24
date	2014.08.10.08.59.48;	author espie;	state Exp;
branches;
next	1.23;
commitid	J6YjvtGPOV1NhCrC;

1.23
date	2013.05.24.14.58.45;	author zhuk;	state Exp;
branches;
next	1.22;

1.22
date	2013.05.06.21.16.18;	author zhuk;	state Exp;
branches;
next	1.21;

1.21
date	2013.03.11.11.50.17;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2012.08.15.09.38.11;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.26.20.24.36;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.20.19.57.30;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.09.24.15.15.38;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2009.08.12.22.36.48;	author simon;	state Exp;
branches;
next	1.15;

1.15
date	2008.09.29.22.55.46;	author simon;	state Exp;
branches;
next	1.14;

1.14
date	2008.05.11.19.50.55;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2007.05.22.20.57.25;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2007.04.08.16.16.06;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2006.06.25.09.45.05;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2004.06.23.03.20.17;	author msf;	state Exp;
branches;
next	1.9;

1.9
date	2004.06.08.20.28.19;	author sturm;	state Exp;
branches;
next	1.8;

1.8
date	2004.06.02.09.20.43;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2004.05.26.11.20.26;	author msf;	state Exp;
branches;
next	1.6;

1.6
date	2003.12.03.03.47.07;	author millert;	state Exp;
branches;
next	1.5;

1.5
date	2003.07.28.17.17.05;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2002.04.16.19.25.07;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2002.04.16.17.35.21;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.03.08.53.18;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.25.11.23.46;	author espie;	state Exp;
branches;
next	;


desc
@@


1.29
log
@Clean up some bits missed in yesterday's systrace removal.
@
text
@#-*- mode: Fundamental; tab-width: 4; -*-
# ex:ts=4 sw=4 filetype=make:
# $OpenBSD: perl.port.mk,v 1.28 2016/03/20 19:56:44 naddy Exp $
#	Based on bsd.port.mk, originally by Jordan K. Hubbard.
#	This file is in the public domain.

TEST_TARGET ?=	test
MODPERL_BUILD ?= Build

# set /usr/bin/perl for executable scripts
MODPERL_BIN_ADJ =	perl -pi \
	-e '$$. == 1 && s|^.*env perl([0-9.]*)([\s].*)?$$|\#!/usr/bin/perl$$2|;' \
	-e '$$. == 1 && s|^.*bin/perl([0-9.]*)([\s].*)?$$|\#!/usr/bin/perl$$2|;' \
	-e 'close ARGV if eof;'

MODPERL_ADJ_FILES ?=
.if !empty(MODPERL_ADJ_FILES)
MODPERL_pre-configure = for f in ${MODPERL_ADJ_FILES}; do \
	${MODPERL_BIN_ADJ} ${WRKSRC}/$${f}; done
.endif

.if ${CONFIGURE_STYLE:L:Mmodbuild}
.  if ${CONFIGURE_STYLE:L:Mtiny}
MODPERL_configure = \
	arch=`perl -e 'use Config; print $$Config{archname}, "\n";'`; \
    cd ${WRKSRC}; ${SETENV} ${CONFIGURE_ENV} \
	perl Build.PL \
		--install_path=lib="${PREFIX}/libdata/perl5/site_perl" \
		--install_path=arch="${PREFIX}/libdata/perl5/site_perl/$$arch" \
		--install_path=libdoc="${PREFIX}/man/man3p" \
		--install_path=bindoc="${PREFIX}/man/man1" \
		--install_path=bin="${PREFIX}/bin" \
		--install_path=script="${PREFIX}/bin" ${CONFIGURE_ARGS}
.  else
MODPERL_configure = \
	arch=`perl -e 'use Config; print $$Config{archname}, "\n";'`; \
    cd ${WRKSRC}; ${SETENV} ${CONFIGURE_ENV} \
	perl Build.PL \
		install_path=lib="${PREFIX}/libdata/perl5/site_perl" \
		install_path=arch="${PREFIX}/libdata/perl5/site_perl/$$arch" \
		install_path=libdoc="${PREFIX}/man/man3p" \
		install_path=bindoc="${PREFIX}/man/man1" \
		install_path=bin="${PREFIX}/bin" \
		install_path=script="${PREFIX}/bin" ${CONFIGURE_ARGS}
.   endif
.else
MODPERL_configure = ${_MODPERL_preconfig}; \
	arch=`perl -e 'use Config; print $$Config{archname}, "\n";'`; \
     cd ${WRKSRC}; ${SETENV} ${CONFIGURE_ENV} \
	 PERL_MM_USE_DEFAULT=Yes \
     perl Makefile.PL \
     	PREFIX='${PREFIX}' \
		INSTALLSITELIB='${PREFIX}/libdata/perl5/site_perl' \
		INSTALLSITEARCH="\$${INSTALLSITELIB}/$$arch" \
		INSTALLPRIVLIB='/usr/./libdata/perl5' \
		INSTALLARCHLIB="\$${INSTALLPRIVLIB}/$$arch" \
		INSTALLMAN1DIR='${PREFIX}/man/man1' \
		INSTALLMAN3DIR='${PREFIX}/man/man3p' \
		INSTALLBIN='$${PREFIX}/bin' \
		INSTALLSCRIPT='$${INSTALLBIN}' ${CONFIGURE_ARGS}; \
	if ! test -f ${WRKBUILD}/Makefile; then \
		echo >&2 "Fatal: Makefile.PL did not produce a Makefile"; \
		exit 1; \
	fi

.  if ${CONFIGURE_STYLE:L:Mmodinst}
BUILD_DEPENDS +=	devel/p5-Module-Install
CONFIGURE_ARGS +=	--skipdeps
_MODPERL_preconfig = rm -rf ${WRKSRC}/inc/Module/*Install*
.  else
_MODPERL_preconfig = :
.  endif
.endif

MODPERL_pre-fake = \
	${_FAKESUDO} mkdir -p ${WRKINST}`perl -e 'use Config; print $$Config{installarchlib}, "\n";'`

.if ${CONFIGURE_STYLE:L:Mmodbuild}
.  if ${CONFIGURE_STYLE:L:Mtiny}
BUILD_DEPENDS +=	devel/p5-Module-Build-Tiny
.  elif ${CONFIGURE_STYLE:L:Mnone}
# for building Module::Build
.  else
BUILD_DEPENDS +=	devel/p5-Module-Build
.  endif
MODPERL_BUILD_TARGET = \
	cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} perl \
		${MODPERL_BUILD} build

MODPERL_TEST_TARGET = \
	cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} perl \
		${MODPERL_BUILD} ${TEST_TARGET}
MODPERL_INSTALL_TARGET = \
	cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} perl \
		${MODPERL_BUILD} ${FAKE_TARGET} --destdir=${WRKINST}

.  if !target(do-build)
do-build:
	@@${MODPERL_BUILD_TARGET}
.  endif
.  if !target(do-test)
do-test:
	@@${MODPERL_TEST_TARGET}
.  endif
.  if !target(do-install)
do-install:
	@@${MODPERL_INSTALL_TARGET}
.  endif
.endif

P5SITE = libdata/perl5/site_perl
P5ARCH = ${P5SITE}/${MACHINE_ARCH}-openbsd
SUBST_VARS += P5ARCH P5SITE
@


1.28
log
@Remove SHARED_ONLY from all CPAN Perl ports and the cpan and perl MODULES.
Add WANTLIB+=perl and PKG_ARCH=* as appropriate.
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.27 2016/03/20 00:31:36 naddy Exp $
d26 1
a26 1
    cd ${WRKSRC}; ${_SYSTRACE_CMD} ${SETENV} ${CONFIGURE_ENV} \
d37 1
a37 1
    cd ${WRKSRC}; ${_SYSTRACE_CMD} ${SETENV} ${CONFIGURE_ENV} \
d49 1
a49 1
     cd ${WRKSRC}; ${_SYSTRACE_CMD} ${SETENV} ${CONFIGURE_ENV} \
@


1.27
log
@nothing will check SHARED_ONLY after this file any longer, so do not set it
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.26 2016/03/12 12:12:32 sthen Exp $
a108 4
.endif

.if defined(SHARED_ONLY) && ${SHARED_ONLY:L:Myes}
WANTLIB += perl
@


1.26
log
@Have CONFIGURE_STYLE=modbuild add a BDEP on devel/p5-Module-Build,
to make sure we use a consistent version in builds (otherwise it picks
the old version from perl 5.20 core). With/ok nigel@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.25 2016/03/11 13:06:22 nigel Exp $
a8 1
SHARED_ONLY ?= No
d111 1
a111 1
.if ${SHARED_ONLY:L:Myes}
@


1.25
log
@Support for Module::Build::Tiny using CONFIGURE_STYLE=modbuild tiny

change from acamari@@verlet.org, ideas from sthen@@, tested in bulk
by sthen

Ok sthen
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.24 2014/08/10 08:59:48 espie Exp $
d82 4
@


1.24
log
@framework to allow fake as non-root, based on an idea and initial patch by
naddy.

Not turned on yet, as it involves a critical new file.

Basically:
- introduce new variations on SUBST cmds to install various files
- use pkg_subst -i in !root mode
- unhardcode install path where possible, to allow for an install-wrapper
that disregards owner/groups.
- do links during fake to disable chown/chgrp/install.

Extra tweak (always-wrap) to actually encode "perl ${PORTSDIR}/infra/bin/install-wrapper"  as an install script, required by a few ports that keep track of
the install script for later (eg., ruby, postgres).
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.23 2013/05/24 14:58:45 zhuk Exp $
d24 12
d45 2
a46 1
		install_path=script="${PREFIX}/bin" ${CONFIGURE_ARGS} 
d80 3
d92 1
a92 1
		${MODPERL_BUILD} destdir=${WRKINST} ${FAKE_TARGET}
d95 1
a95 1
do-build: 
@


1.23
log
@Improve MODPERL_BIN_ADJ: strip any version suffix for perl binary, so
shebangs like "#!/usr/bin/env perl5" and "#!/usr/bin/perl5.12" will be
normalized altogether.

No bumps are required for ports already using MODPERL_BIN_ADJ.

Requested by and okay dcoppa@@, okay sthen@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.22 2013/05/06 21:16:18 zhuk Exp $
d64 1
a64 1
	${SUDO} mkdir -p ${WRKINST}`perl -e 'use Config; print $$Config{installarchlib}, "\n";'`
@


1.22
log
@Add MODPERL_BIN_ADJ and MODPERL_ADJ_FILES, similar to other port modules.
Tested with the upcoming print/texlive/base big shebang adjustment patch.

"Makes sense" sthen@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.21 2013/03/11 11:50:17 espie Exp $
d13 2
a14 2
	-e '$$. == 1 && s|^.*env perl([\s].*)?$$|\#!/usr/bin/perl$$1|;' \
	-e '$$. == 1 && s|^.*bin/perl([\s].*)?$$|\#!/usr/bin/perl$$1|;' \
@


1.21
log
@REGRESS -> TEST sweep
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.20 2012/08/15 09:38:11 espie Exp $
d10 12
@


1.20
log
@have perl module work like  it should: define extra TARGET_* variables,
and have do-install/do-build use them.

Replace pre-configure with folded in shell fragment.
Don't hardcode perl location, we don't hardcode those things but rely
on PATH instead.

check that Makefile.PL actually produced a Makefile, since the way it
errors out does not exit 1, thus leading to configure having failed and
ports thinking it succeeded...

okay sthen@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.19 2010/11/26 20:24:36 espie Exp $
d7 1
a7 1
REGRESS_TARGET ?=	test
d59 1
a59 1
MODPERL_REGRESS_TARGET = \
d61 1
a61 1
		${MODPERL_BUILD} ${REGRESS_TARGET}
d70 3
a72 3
.  if !target(do-regress)
do-regress:
	@@${MODPERL_REGRESS_TARGET}
@


1.19
log
@SHARED_ONLY is Yes or No
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.18 2010/11/20 19:57:30 espie Exp $
d13 1
a13 1
	arch=`/usr/bin/perl -e 'use Config; print $$Config{archname}, "\n";'`; \
d15 1
a15 1
	/usr/bin/perl Build.PL \
d23 2
a24 2
MODPERL_configure = \
	arch=`/usr/bin/perl -e 'use Config; print $$Config{archname}, "\n";'`; \
d27 1
a27 1
     /usr/bin/perl Makefile.PL \
d36 5
a40 1
		INSTALLSCRIPT='$${INSTALLBIN}' ${CONFIGURE_ARGS}
d45 3
d52 1
a52 1
	${SUDO} mkdir -p ${WRKINST}`/usr/bin/perl -e 'use Config; print $$Config{installarchlib}, "\n";'`
d55 11
d68 1
a68 2
	@@cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} /usr/bin/perl \
		${MODPERL_BUILD} build
d72 1
a72 3
	@@cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} /usr/bin/perl \
		${MODPERL_BUILD} ${REGRESS_TARGET}

d76 1
a76 7
	@@cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} /usr/bin/perl \
		${MODPERL_BUILD} destdir=${WRKINST} ${FAKE_TARGET}
.  endif
.elif ${CONFIGURE_STYLE:L:Mmodinst}
.  if !target(pre-configure)
pre-configure:
	@@rm -rf ${WRKSRC}/inc/Module/*Install*
d84 3
a86 3
P5SITE=libdata/perl5/site_perl
P5ARCH=${P5SITE}/${MACHINE_ARCH}-openbsd
SUBST_VARS+=P5ARCH P5SITE
@


1.18
log
@new depends
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.17 2010/09/24 15:15:38 sthen Exp $
d9 1
a9 1
SHARED_ONLY ?=
@


1.17
log
@add libperl to WANTLIB for shared_only perl ports, to automatically handle
ABI changes in future.

bumps for affected ports to follow.
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.16 2009/08/12 22:36:48 simon Exp $
d39 1
a39 1
BUILD_DEPENDS +=	::devel/p5-Module-Install
@


1.16
log
@Finally add CONFIGURE_STYLE=modinst.  This adds p5-Module-Install to
BUILD_DEPENDS, and --skipdeps to CONFIGURE_ARGS.  Additionally it nukes
existing ${WRKSRC}/inc/Module/*Install* files in pre-configure to force
regeneration of bundled and often outdated Module::Install versions.

feedback/testing by msf@@, jim@@ and landry@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.15 2008/09/29 22:55:46 simon Exp $
d9 1
d69 4
@


1.15
log
@remove dependencies to ports now coming with perl
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.14 2008/05/11 19:50:55 espie Exp $
d36 5
d62 5
@


1.14
log
@stylistic changes
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.13 2007/05/22 20:57:25 espie Exp $
a10 6
.  if !${PKGPATH:M*devel/p5-Module-Build}
BUILD_DEPENDS +=	::devel/p5-Module-Build
.    if !${PKGPATH:M*devel/p5-version}
BUILD_DEPENDS +=	::devel/p5-version
.    endif
.  endif
@


1.13
log
@fix infinite recursion for p5-version like we already did for modbuild
proper... nothing new under the sun.
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.12 2007/04/08 16:16:06 espie Exp $
d12 1
a12 1
BUILD_DEPENDS+=	::devel/p5-Module-Build
d14 1
a14 1
BUILD_DEPENDS+=	::devel/p5-version
d17 1
a17 1
MODPERL_configure= \
d28 1
a28 1
MODPERL_configure= \
d44 1
a44 1
MODPERL_pre_fake= \
@


1.12
log
@avoid Makemaker going interactive, okay naddy@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.11 2006/06/25 09:45:05 espie Exp $
d13 3
@


1.11
log
@check on PKGPATH, more reliable than module name (in case someone
decides to create a p5-Module-Build-Something).
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.10 2004/06/23 03:20:17 msf Exp $
d28 1
@


1.10
log
@perl modbuild should install the perl manpages into man/man3p and not
man/man3
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.9 2004/06/08 20:28:19 sturm Exp $
d11 1
a11 1
.  if !${PKGNAME:Mp5-Module-Build*}
@


1.9
log
@back out CFLAGS-honour-diff
MakeMaker might add important stuff to CCFLAGS, which we override
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.8 2004/06/02 09:20:43 sturm Exp $
d20 1
a20 1
		install_path=libdoc="${PREFIX}/man/man3" \
@


1.8
log
@honour CFLAGS in perl ports
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.7 2004/05/26 11:20:26 msf Exp $
a8 3

CONFIGURE_ARGS+=CCFLAGS="-fno-strict-aliasing -I${LOCALBASE}/include ${CFLAGS}" \
		OPTIMIZE=" "
@


1.7
log
@
infrastructure bits for p5-Module-Build

ok espie@@ sturm@@ pvalchev@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.6 2003/12/03 03:47:07 millert Exp $
d9 3
@


1.6
log
@Don't prepend DESTDIR to paths when installing, perl > 5.8.0 deals
with DESTDIR automatically.  Note that you will need to update to
perl 5.8.2 in order to build perl modules as packages now.
OK pvalchev@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.5 2003/07/28 17:17:05 sturm Exp $
d8 17
d38 1
a38 1

d42 19
@


1.5
log
@this makes our build infrastructure systrace aware
original idea from jsyn@@, discussed and first tests at c2k3

Warning!
- this commit is different from all patches sent around, please remove
  them before updating
- due to a few bugs in systrace this is currently not ready for the casual
  porter and several ports will fail to build, you've been warned

The idea of this patch is to help a porter when developing a new port.
With systrace the configure, build and fake stages are not allowed to
open network connections or write outside some well defined directories.
This way misbehaving programs will be noticed due to logfile entries in
/var/log/messages and the port can be fixed. There is generally no need
for endusers to use this, as the checksum ensures that ports in the
future will behave the same as they did when porting. :)

To activate systrace'd port building, set USE_SYSTRACE=Yes (e.g. in
/etc/mk.conf)

tested by some people, ok espie@@
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.4 2002/04/16 19:25:07 espie Exp $
d12 2
a13 2
     	PREFIX='$${${DESTDIRNAME}}${PREFIX}' \
		INSTALLSITELIB='$${${DESTDIRNAME}}${PREFIX}/libdata/perl5/site_perl' \
d15 1
a15 1
		INSTALLPRIVLIB='$${${DESTDIRNAME}}/usr/./libdata/perl5' \
d17 2
a18 2
		INSTALLMAN1DIR='$${${DESTDIRNAME}}${PREFIX}/man/man1' \
		INSTALLMAN3DIR='$${${DESTDIRNAME}}${PREFIX}/man/man3p' \
@


1.4
log
@Move perl manpages where they belong, from section 3 to section 3p.

NOTE THAT /usr/local/man/man3p MUST EXIST FOR THIS TO WORK.
UPDATE /etc/mtree/BSD.local.dist AND RUN IT ACCORDINGLY !!!
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.3 2002/04/16 17:35:21 espie Exp $
d10 1
a10 1
     cd ${WRKSRC}; ${SETENV} ${CONFIGURE_ENV} \
@


1.3
log
@Add variable P5SITE/P5ARCH, this will make future plists more compact.
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.2 2001/10/03 08:53:18 espie Exp $
d18 1
a18 1
		INSTALLMAN3DIR='$${${DESTDIRNAME}}${PREFIX}/man/man3' \
@


1.2
log
@basic regression testing framework.
@
text
@d3 1
a3 1
# $OpenBSD: perl.port.mk,v 1.1 2001/08/25 11:23:46 espie Exp $
d25 4
@


1.1
log
@Cut out some parts of bsd.port.mk into separate modules.

This is work-in-progress. Supplemental hooks will be added when they
become necessary.

The goal is to permit separate subsystems to tweak the package building
process slightly. This should help e.g., python or qt2, for instance.

Documentation will come when it's tested more thoroughly...
@
text
@d3 1
a3 1
# $OpenBSD$
d7 1
@

