head	1.24;
access;
symbols
	OPENBSD_6_1:1.17.0.2
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.16.0.6
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.14.0.8
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.6
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.6
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.13.0.4
	OPENBSD_5_2_BASE:1.13
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.10.0.6
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.10.0.4
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.8.0.10
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.8
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.6.0.6
	OPENBSD_4_2_BASE:1.6
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	niallo_20050519:1.1.1.1
	niallo:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2017.07.23.09.26.29;	author espie;	state Exp;
branches;
next	1.23;
commitid	FZPR2Emws5uDqXzb;

1.23
date	2017.07.16.19.19.01;	author espie;	state Exp;
branches;
next	1.22;
commitid	tt0GhWK5c4uf9ILG;

1.22
date	2017.07.12.18.09.29;	author rsadowski;	state Exp;
branches;
next	1.21;
commitid	3bOf3rwmRYrTFiXN;

1.21
date	2017.07.12.17.15.38;	author rsadowski;	state Exp;
branches;
next	1.20;
commitid	a48ldDM5YFTBigOG;

1.20
date	2017.07.12.17.02.27;	author rsadowski;	state Exp;
branches;
next	1.19;
commitid	XbaQlKKZDMEROynY;

1.19
date	2017.07.11.20.40.44;	author rsadowski;	state Exp;
branches;
next	1.18;
commitid	0voyvsCKI0aEKPfd;

1.18
date	2017.04.10.11.46.33;	author sthen;	state Exp;
branches;
next	1.17;
commitid	HY6VNZxjJWzKQFDV;

1.17
date	2016.12.26.08.47.45;	author zhuk;	state Exp;
branches;
next	1.16;
commitid	iRuPa0YhfToBTkWp;

1.16
date	2015.04.21.18.19.27;	author sthen;	state Exp;
branches;
next	1.15;
commitid	K3h50UR8bs6rnpEi;

1.15
date	2015.03.16.18.07.54;	author naddy;	state Exp;
branches;
next	1.14;
commitid	IJdm3Zowcdkcxp5X;

1.14
date	2013.03.11.11.41.28;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2012.01.26.09.25.46;	author sebastia;	state Exp;
branches;
next	1.12;

1.12
date	2011.12.02.22.00.34;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2011.09.16.11.41.39;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2010.07.30.23.13.31;	author lum;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.06.22.25.53;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2008.02.04.23.59.02;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2007.09.15.23.30.00;	author merdely;	state Exp;
branches;
next	1.6;

1.6
date	2006.04.14.22.20.08;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2006.04.10.05.43.48;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2006.02.05.11.09.46;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2006.01.14.11.46.15;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.12.28.22.38.59;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.19.20.26.59;	author niallo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.19.20.26.59;	author niallo;	state Exp;
branches;
next	;


desc
@@


1.24
log
@add pthread to COMPILER_LIBCXX.
white lie, but it allows clang and gcc to be more similar
bump accordingly.
@
text
@# $OpenBSD: Makefile,v 1.23 2017/07/16 19:19:01 espie Exp $

COMMENT-main =	Qt Cryptographic Architecture for Qt4
COMMENT-ossl =	SSL/TLS plugin
COMMENT-gnupg =	GnuPG plugin

VERSION =	2.1.3
DISTNAME =	qca-${VERSION}

PKGNAME-main =	qca-${VERSION}
PKGNAME-ossl =	qca-ossl-${VERSION}
PKGNAME-gnupg =	qca-gnupg-${VERSION}
REVISION-main =	1
REVISION-ossl =	0
REVISION-gnupg =0

CATEGORIES =	security

SHARED_LIBS +=  qca                   3.0 # 2.1

HOMEPAGE =	https://userbase.kde.org/QCA

# LGPLv2.1
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += QtCore c m ${COMPILER_LIBCXX}
WANTLIB-ossl += QtCore crypto m qca ssl ${COMPILER_LIBCXX}
WANTLIB-gnupg += QtCore m qca ${COMPILER_LIBCXX}

MASTER_SITES =	${MASTER_SITE_KDE:=stable/qca/${VERSION}/src/}
EXTRACT_SUFX =	.tar.xz

# Plugins: qca-botan qca-cyrus-sasl qca-gcrypt qca-gnupg qca-logger
# qca-nss qca-ossl qca-pkcs11 qca-softstore
MULTI_PACKAGES =	-main -ossl -gnupg

CFLAGS +=		-DOPENSSL_NO_SSL2 \
			-DOPENSSL_NO_SSL3_METHOD

CONFIGURE_ARGS =	-DCMAKE_INSTALL_PREFIX=${LOCALBASE} \
			-DQCA_MAN_INSTALL_DIR=${LOCALBASE}/man \
			-DQCA_BINARY_INSTALL_DIR=${PREFIX}/bin \
			-DBUILD_PLUGINS="ossl;gnupg" \
			-DCMAKE_DISABLE_FIND_PACKAGE_Doxygen:Bool=ON \
			-Dqca_CERTSTORE=/etc/ssl/cert.pem \
			-DQT4_BUILD:Bool=ON

MODULES =		devel/cmake

LIB_DEPENDS =		x11/qt4

LIB_DEPENDS-ossl +=	${BUILD_PKGPATH},-main
LIB_DEPENDS-gnupg +=	${BUILD_PKGPATH},-main

RUN_DEPENDS-gnupg +=	security/gnupg

.include <bsd.port.mk>
@


1.23
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2017/07/12 18:09:29 rsadowski Exp $
d13 3
a15 1
REVISION-main =	0
@


1.22
log
@replace SYSCONFDIR with hardcoded "/etc/" for /etc/ssl/cert.pem.

Preferred solution by jca@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2017/07/12 17:15:38 rsadowski Exp $
d24 3
a26 3
WANTLIB += QtCore c m ${LIBCXX}
WANTLIB-ossl += QtCore crypto m qca ssl ${LIBCXX}
WANTLIB-gnupg += QtCore m qca ${LIBCXX}
@


1.21
log
@s/BASESYSCONFDIR/SYSCONFDIR/

"BASESYSCONFDIR is a user setting while /etc/ssl/cert.pem
is a fixed location."

hint from jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2017/07/12 17:02:27 rsadowski Exp $
d43 1
a43 1
			-Dqca_CERTSTORE=${SYSCONFDIR}/ssl/cert.pem \
@


1.20
log
@Teach security/qca to use cert.pem from base.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2017/07/11 20:40:44 rsadowski Exp $
d43 1
a43 1
			-Dqca_CERTSTORE=${BASESYSCONFDIR}/ssl/cert.pem \
@


1.19
log
@update qca to 2.1.3.

- Merge security/{qca-ossl,qca-gnupg,qca2} into qca
  to solve the update process (hint from sthen@@ thanks)
- Disable SSL2 and SSL3 by default!
- Many useful tweaks and advice from landry@@. Many thanks!

This patch includes the last BUILD_PACKAGES:M* block tweak
from landry@@

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2017/04/10 11:46:33 sthen Exp $
d13 1
d43 1
@


1.18
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/12/26 08:47:45 zhuk Exp $
d3 3
a5 1
COMMENT=	Qt Cryptographic Architecture
d7 2
a8 4
DISTNAME=	qca-1.0
REVISION=	8
CATEGORIES=	security
SHARED_LIBS=	qca	2.0
d10 3
a12 1
HOMEPAGE=	http://delta.affinix.com/qca/
d14 1
a14 1
MAINTAINER=	Gerardo Santana Gomez Garrido <gerardo.santana@@gmail.com>
d16 1
a16 2
# LGPL
PERMIT_PACKAGE_CDROM=	Yes
d18 1
a18 1
WANTLIB += m pthread ${LIBCXX}
d20 2
a21 2
MASTER_SITES=		http://delta.affinix.com/download/qca/
EXTRACT_SUFX=		.tar.bz2
d23 3
a25 1
MODULES=		x11/qt3 devel/qmake
d27 2
a28 1
NO_TEST=		Yes
d30 22
a51 5
do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/qt3
	${INSTALL_DATA} ${WRKBUILD}/libqca.so.${LIBqca_VERSION} ${PREFIX}/lib/qt3
	cd ${PREFIX}/lib && ln -s qt3/libqca.so.${LIBqca_VERSION}
	${INSTALL_DATA} ${WRKSRC}/src/qca.h ${PREFIX}/include
@


1.17
log
@Switch to devel/qmake, shaves 5 lines from Makefile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/04/21 18:19:27 sthen Exp $
d17 1
a17 1
WANTLIB += m pthread stdc++
@


1.16
log
@add some missing pthread to WANTLIB
(using modified portbump, thanks zhuk@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/03/16 18:07:54 naddy Exp $
d22 1
a22 1
MODULES=		x11/qt3
a24 5
USE_GMAKE=		Yes
CONFIGURE_STYLE=	simple
CONFIGURE_ENV=		LOCALBASE=${LOCALBASE}

MAKE_FLAGS=		LIBqca_VERSION=${LIBqca_VERSION}
@


1.15
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/03/11 11:41:28 espie Exp $
d6 1
a6 1
REVISION=	7
d17 2
a22 1
WANTLIB=		m stdc++
@


1.14
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/01/26 09:25:46 sebastia Exp $
d6 1
a6 1
REVISION=	6
@


1.13
log
@Fix problem with bulk build, introduced when importing qca-ossl:

  * renaming libqca to libqca2 for the qca2 port
  * removed conflict line from qca2 PLIST
  * bumped qca2
  * updated conflict line in qca PLIST
  * bumped qca2
  * updated WANTLIB of qca-ossl and bumped
  * hooked qca2 up to the build in the ports/security/Makefile

OK shadchin@@, espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/12/02 22:00:34 ajacoutot Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d23 1
a23 1
NO_REGRESS=		Yes
@


1.12
log
@qca2/qca conflicts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/09/16 11:41:39 espie Exp $
d6 1
a6 1
REVISION=	5
@


1.11
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/30 23:13:31 lum Exp $
d6 1
a6 1
REVISION=	4
@


1.10
log
@LIB_DEPEND + WANTLIB clean up.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/07/06 22:25:53 espie Exp $
d6 1
a6 1
REVISION=	3
@


1.9
log
@zap reeeally old variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/02/04 23:59:02 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d24 1
@


1.8
log
@move the library into lib/qt3 so that it will be usable even when qca2 is in.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/09/15 23:30:00 merdely Exp $
a23 2
MODQT_MT=		Yes
MODQT_MT=Yes
@


1.7
log
@Remove surrounding quotes in NO_REGRESS/COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/04/14 22:20:08 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d35 3
a37 1
	${INSTALL_DATA} ${WRKBUILD}/libqca.so.${LIBqca_VERSION} ${PREFIX}/lib
@


1.6
log
@bump PKGNAME after MAINTAINER address change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/04/10 05:43:48 jakob Exp $
d3 1
a3 1
COMMENT=	"Qt Cryptographic Architecture"
@


1.5
log
@update MAINTAINER email adress; from gerardo santana
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/02/05 11:09:46 steven Exp $
d6 1
a6 1
PKGNAME=	$(DISTNAME)p0
@


1.4
log
@fix MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/01/14 11:46:15 espie Exp $
d12 1
a12 1
MAINTAINER=	Gerardo Santana Gomez Garrido <santana@@openbsd.org.mx>
@


1.3
log
@remaining shared libs bumps for C++ libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/12/28 22:38:59 sturm Exp $
d20 1
a20 1
MASTER_SITES=		${HOMEPAGE}
@


1.2
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/05/19 20:26:59 niallo Exp $
d6 1
d8 1
a8 1
SHARED_LIBS=	qca	1.0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d31 2
d34 1
a34 1
	${INSTALL_DATA} ${WRKBUILD}/libqca.so.1.0 ${PREFIX}/lib
@


1.1.1.1
log
@Qt Cryptographic Architecture 1.0

From Gerardo Santana Gomez Garrido <santana@@openbsd.org.mx>
@
text
@@
