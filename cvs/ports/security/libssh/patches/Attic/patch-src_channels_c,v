head	1.5;
access;
symbols
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2014.03.09.20.41.14;	author rpointel;	state dead;
branches;
next	1.4;

1.4
date	2013.11.02.10.43.04;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.11.22.20.54.12;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.26.14.45.04;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2012.05.20.17.04.55;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update libssh to 0.6.0.
@
text
@$OpenBSD: patch-src_channels_c,v 1.4 2013/11/02 10:43:04 ajacoutot Exp $
--- src/channels.c.orig	Fri Jul 26 08:42:26 2013
+++ src/channels.c	Sat Nov  2 11:36:51 2013
@@@@ -683,21 +683,21 @@@@ SSH_PACKET_CALLBACK(channel_rcv_request) {
 	}
 
 	if (strcmp(request,"signal") == 0) {
-		ssh_string signal;
+		ssh_string libssh_signal;
         char *sig;
 
 		SAFE_FREE(request);
 		ssh_log(session, SSH_LOG_PACKET, "received signal");
 
-		signal = buffer_get_ssh_string(packet);
-		if (signal == NULL) {
+		libssh_signal = buffer_get_ssh_string(packet);
+		if (libssh_signal == NULL) {
 			ssh_log(session, SSH_LOG_PACKET, "Invalid MSG_CHANNEL_REQUEST");
 			leave_function();
 			return SSH_PACKET_USED;
 		}
 
-		sig = ssh_string_to_char(signal);
-		ssh_string_free(signal);
+		sig = ssh_string_to_char(libssh_signal);
+		ssh_string_free(libssh_signal);
 		if (sig == NULL) {
 			leave_function();
 			return SSH_PACKET_USED;
@


1.4
log
@-Wextra is supported by both our gcc.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_channels_c,v 1.3 2012/11/22 20:54:12 sthen Exp $
@


1.3
log
@SECURITY update to libssh 0.5.3
More info at http://www.libssh.org/2012/11/20/libssh-0-5-3-security-release/

- CVE-2012-4559: multiple double free() flaws
- CVE-2012-4560: multiple buffer overflow flaws
- CVE-2012-4561: multiple invalid free() flaws
- CVE-2012-4562: multiple improper overflow checks

ok rpointel@@ jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_channels_c,v 1.2 2012/06/26 14:45:04 jasper Exp $
--- src/channels.c.orig	Tue Nov 20 11:42:02 2012
+++ src/channels.c	Thu Nov 22 11:29:05 2012
@@@@ -679,21 +679,21 @@@@ SSH_PACKET_CALLBACK(channel_rcv_request) {
@


1.2
log
@- these patches (or chunks) are not needed anymore since arpa/inet.h -r1.12
@
text
@d1 4
a4 7
$OpenBSD: patch-src_channels_c,v 1.1 2012/05/20 17:04:55 ajacoutot Exp $

https://red.libssh.org/issues/86

--- src/channels.c.orig	Fri Sep 16 21:57:36 2011
+++ src/channels.c	Sun May 20 14:44:32 2012
@@@@ -678,21 +679,21 @@@@ SSH_PACKET_CALLBACK(channel_rcv_request) {
@


1.1
log
@Fix several warnings.

ok rpointel@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
a6 8
@@@@ -30,6 +30,7 @@@@
 #include <time.h>
 
 #ifndef _WIN32
+#include <netinet/in.h>
 #include <arpa/inet.h>
 #endif
 
@

