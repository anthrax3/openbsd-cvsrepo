head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.14
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.12
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.0.8
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.6
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2014.03.09.20.41.14;	author rpointel;	state Exp;
branches;
next	1.2;

1.2
date	2013.11.02.10.43.04;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.09.10.11.56.42;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update libssh to 0.6.0.
@
text
@$OpenBSD: patch-cmake_Modules_DefineCompilerFlags_cmake,v 1.2 2013/11/02 10:43:04 ajacoutot Exp $

Check for compiler flags not available with gcc < 4.

--- cmake/Modules/DefineCompilerFlags.cmake.orig	Sat Dec 21 18:37:12 2013
+++ cmake/Modules/DefineCompilerFlags.cmake	Wed Jan  8 14:00:39 2014
@@@@ -11,9 +11,14 @@@@ if (UNIX AND NOT WIN32)
 
         # add -Wconversion ?
         set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -std=gnu99 -pedantic -pedantic-errors")
-        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wextra -Wshadow -Wmissing-prototypes -Wdeclaration-after-statement")
+        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wextra -Wshadow -Wmissing-prototypes")
         set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wunused -Wfloat-equal -Wpointer-arith -Wwrite-strings -Wformat-security")
         set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wmissing-format-attribute")
+
+	check_c_compiler_flag("-Wdeclaration-after-statement" WITH_WDECL)
+	if (WITH_WDECL)
+	    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wdeclaration-after-statement")
+        endif (WITH_WDECL)
 
         # with -fPIC
         check_c_compiler_flag("-fPIC" WITH_FPIC)
@


1.2
log
@-Wextra is supported by both our gcc.
@
text
@d1 1
a1 1
$OpenBSD: patch-cmake_Modules_DefineCompilerFlags_cmake,v 1.1 2011/09/10 11:56:42 naddy Exp $
d5 4
a8 4
--- cmake/Modules/DefineCompilerFlags.cmake.orig	Fri Jul 26 08:39:39 2013
+++ cmake/Modules/DefineCompilerFlags.cmake	Sat Nov  2 11:37:07 2013
@@@@ -10,9 +10,14 @@@@ if (UNIX AND NOT WIN32)
     if (${CMAKE_C_COMPILER_ID} MATCHES GNU)
@


1.1
log
@Check for compiler flags not available with gcc < 4 before using them
and regen patches.  ok rpointel@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- cmake/Modules/DefineCompilerFlags.cmake.orig	Fri Sep  9 21:36:39 2011
+++ cmake/Modules/DefineCompilerFlags.cmake	Fri Sep  9 21:40:29 2011
@@@@ -10,9 +10,19 @@@@ if (UNIX AND NOT WIN32)
d12 1
a12 1
+        set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wall -Wshadow -Wmissing-prototypes")
a14 5
+
+	check_c_compiler_flag("-Wextra" WITH_WEXTRA)
+	if (WITH_WEXTRA)
+	    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -Wextra")
+        endif (WITH_WEXTRA)
@

