head	1.2;
access;
symbols
	OPENBSD_3_6:1.1.0.8
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.6
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_4:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2005.01.29.19.27.18;	author sturm;	state dead;
branches;
next	1.1;

1.1
date	2003.12.13.03.22.16;	author margarida;	state Exp;
branches
	1.1.2.1
	1.1.4.1
	1.1.6.1
	1.1.8.1;
next	;

1.1.2.1
date	2003.12.13.03.30.24;	author margarida;	state Exp;
branches;
next	;

1.1.4.1
date	2003.12.13.03.50.23;	author margarida;	state Exp;
branches;
next	;

1.1.6.1
date	2005.04.17.08.18.45;	author robert;	state dead;
branches;
next	;

1.1.8.1
date	2005.04.17.08.16.06;	author robert;	state dead;
branches;
next	;


desc
@@


1.2
log
@update to GnuPG 1.4, new FLAVOR "card" to support usb card readers

initial version from Chris K. Young <cky at pobox.com>, adapted to
-current by Alec Berryman <alec at thened.net>

ok maintainer reinhard@@
@
text
@$OpenBSD: patch-g10_keygen_c,v 1.1 2003/12/13 03:22:16 margarida Exp $
--- g10/keygen.c.orig	2003-12-13 01:55:42.000000000 +0000
+++ g10/keygen.c	2003-12-13 02:02:25.000000000 +0000
@@@@ -953,8 +953,6 @@@@ ask_algo (int addmode, unsigned int *r_u
     tty_printf(    _("   (%d) DSA (sign only)\n"), 2 );
     if( addmode )
 	tty_printf(    _("   (%d) ElGamal (encrypt only)\n"), 3 );
-    if (opt.expert)
-        tty_printf(    _("   (%d) ElGamal (sign and encrypt)\n"), 4 );
     tty_printf(    _("   (%d) RSA (sign only)\n"), 5 );
     if (addmode)
         tty_printf(    _("   (%d) RSA (encrypt only)\n"), 6 );
@@@@ -985,20 +983,6 @@@@ ask_algo (int addmode, unsigned int *r_u
             *r_usage = PUBKEY_USAGE_SIG;
 	    break;
 	}
-	else if( algo == 4 && opt.expert)
-	  {
-	    tty_printf(_(
-"The use of this algorithm is only supported by GnuPG.  You will not be\n"
-"able to use this key to communicate with PGP users.  This algorithm is also\n"
-"very slow, and may not be as secure as the other choices.\n"));
-
-	    if( cpr_get_answer_is_yes("keygen.algo.elg_se",
-				      _("Create anyway? ")))
-	      {
-		algo = PUBKEY_ALGO_ELGAMAL;
-		break;
-	      }
-	}
 	else if( algo == 3 && addmode ) {
 	    algo = PUBKEY_ALGO_ELGAMAL_E;
 	    break;
@


1.1
log
@Security fix:
Add workaround for GnuPG's ElGamal signing keys bug.
URL: http://lists.gnupg.org/pipermail/gnupg-announce/2003q4/000276.html
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.6.1
log
@SECURITY:
update to 1.4.1; fix a openpgp protocol vulnerability
http://www.vuxml.org/openbsd/be6057f4-9ecf-11d9-82a1-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-g10_keygen_c,v 1.1 2003/12/13 03:22:16 margarida Exp $
@


1.1.8.1
log
@SECURITY:
update to 1.4.1; fix a openpgp protocol vulnerability
http://www.vuxml.org/openbsd/be6057f4-9ecf-11d9-82a1-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-g10_keygen_c,v 1.1 2003/12/13 03:22:16 margarida Exp $
@


1.1.4.1
log
@MFC:
Security fix:
Add workaround for GnuPG's ElGamal signing keys bug.
URL: http://lists.gnupg.org/pipermail/gnupg-announce/2003q4/000276.html
@
text
@d2 2
a3 2
--- g10/keygen.c.orig	Wed Apr  9 15:58:01 2003
+++ g10/keygen.c	Sat Dec 13 03:36:04 2003
d13 1
a13 2
@@@@ -984,20 +982,6 @@@@ ask_algo (int addmode, unsigned int *r_u
 	    algo = PUBKEY_ALGO_RSA;
d16 1
a16 1
-	}
d30 1
a30 1
 	}
d33 1
@


1.1.2.1
log
@MFC:
Security fix:
Add workaround for GnuPG's ElGamal signing keys bug.
URL: http://lists.gnupg.org/pipermail/gnupg-announce/2003q4/000276.html
@
text
@d2 2
a3 2
--- g10/keygen.c.orig	2003-04-09 10:58:01.000000000 -0400
+++ g10/keygen.c	2003-12-12 21:32:09.000000000 -0500
@

