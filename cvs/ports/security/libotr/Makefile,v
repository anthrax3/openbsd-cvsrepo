head	1.30;
access;
symbols
	OPENBSD_6_0:1.30.0.2
	OPENBSD_6_0_BASE:1.30
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.27.0.4
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.24.0.6
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.24.0.4
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.24.0.2
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.6
	OPENBSD_5_0:1.13.0.4
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.13.0.2
	OPENBSD_4_9_BASE:1.13
	OPENBSD_4_8:1.10.0.10
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.10.0.8
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.6
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.4
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.2
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.7.0.4
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.6.0.4
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	marius_20050526:1.1.1.1
	marius:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2016.05.07.12.40.58;	author pascal;	state Exp;
branches;
next	1.29;
commitid	Fec0PsLcTwj1Q99H;

1.29
date	2016.03.11.20.28.31;	author naddy;	state Exp;
branches;
next	1.28;
commitid	UYLP8TE6V7RS2GhJ;

1.28
date	2016.03.10.19.45.59;	author pascal;	state Exp;
branches;
next	1.27;
commitid	zscxZOW7kZymq45l;

1.27
date	2015.07.19.08.18.52;	author jca;	state Exp;
branches;
next	1.26;
commitid	CikX0TKt0U8JJSwZ;

1.26
date	2015.04.03.16.15.40;	author stsp;	state Exp;
branches;
next	1.25;
commitid	g9VFsQmI2Y2XROth;

1.25
date	2015.03.16.18.07.54;	author naddy;	state Exp;
branches;
next	1.24;
commitid	IJdm3Zowcdkcxp5X;

1.24
date	2013.10.18.11.29.42;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2013.08.15.16.33.22;	author stsp;	state Exp;
branches;
next	1.22;

1.22
date	2013.08.14.14.17.28;	author pascal;	state Exp;
branches;
next	1.21;

1.21
date	2013.07.08.10.29.37;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2013.07.08.04.17.01;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2013.07.06.08.30.28;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.21.08.48.53;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.11.11.41.25;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2012.09.25.19.40.33;	author pascal;	state Exp;
branches;
next	1.15;

1.15
date	2012.08.18.12.41.38;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2012.04.04.06.45.27;	author ajacoutot;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.11.18.43.10;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.18.21.41.45;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2008.07.18.13.21.22;	author dhill;	state Exp;
branches;
next	1.9;

1.9
date	2007.11.29.14.05.48;	author okan;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.15.23.29.58;	author merdely;	state Exp;
branches;
next	1.7;

1.7
date	2006.10.31.19.54.22;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2005.12.25.15.52.38;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2005.11.18.04.10.35;	author marcm;	state Exp;
branches;
next	1.4;

1.4
date	2005.11.17.02.49.54;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2005.06.15.06.13.53;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.13.21.01.29;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.26.18.13.02;	author marius;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.26.18.13.02;	author marius;	state Exp;
branches;
next	;

1.14.2.1
date	2012.09.25.20.15.32;	author pascal;	state Exp;
branches;
next	;


desc
@@


1.30
log
@Update my mail address.
@
text
@# $OpenBSD: Makefile,v 1.29 2016/03/11 20:28:31 naddy Exp $

COMMENT=	portable OTR messaging library and toolkit

DISTNAME=	libotr-4.1.1
CATEGORIES=	security
REVISION=	0

SHARED_LIBS +=  otr                  4.1      # 6.0

HOMEPAGE=	http://otr.cypherpunks.ca/

MASTER_SITES=	${HOMEPAGE}

MAINTAINER =	Pascal Stumpf <pascal@@stumpf.co>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c gcrypt gpg-error

MODULES=	devel/gettext

LIB_DEPENDS=	security/libgcrypt

# non-shared does not inherit LIB_DEPENDS
LIB_DEPENDS +=	security/libgpg-error

USE_LIBTOOL = 		gnu

AUTOCONF_VERSION = 	2.68
AUTOMAKE_VERSION = 	1.11
CONFIGURE_STYLE=	autoconf automake
# PIE is taken care of on a per-arch basis on OpenBSD, and stack
# protection is enabled anyway.
CONFIGURE_ARGS=		--disable-gcc-hardening \
			--disable-linker-hardening

.include <bsd.port.mk>
@


1.29
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/03/10 19:45:59 pascal Exp $
d7 1
d15 1
a15 1
MAINTAINER =	Pascal Stumpf <Pascal.Stumpf@@cubes.de>
@


1.28
log
@SECURITY update to 4.1.1.  Fixes CVE 2016-2851; to the best of our knowledge,
this one is not exploitable on OpenBSD because memory returned by malloc(0) is
inaccessible.  Bug found by stsp@@ 11 months ago.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/07/19 08:18:52 jca Exp $
d35 1
a35 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--disable-gcc-hardening \
@


1.27
log
@autoconf 2.65->2.68
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/04/03 16:15:40 stsp Exp $
d5 1
a5 1
DISTNAME=	libotr-4.1.0
@


1.26
log
@Update to libotr-4.1.0.
ok pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/03/16 18:07:54 naddy Exp $
d30 1
a30 1
AUTOCONF_VERSION = 	2.65
@


1.25
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 8
# $OpenBSD: Makefile,v 1.24 2013/10/18 11:29:42 naddy Exp $

# WARNING: When trying to update this port to 4.x.x, please be
# aware that the following ports need adjustments for the new
# OTRv4 API:
# net/climm
# net/bitlbee,otr
# net/mcabber (diff ready)
d5 1
a5 1
DISTNAME=	libotr-4.0.0
a6 1
REVISION=	0
d8 1
a8 1
SHARED_LIBS +=  otr                  4.0      # 5.0
d10 1
a10 1
HOMEPAGE=	http://www.cypherpunks.ca/otr/
@


1.24
log
@Drop USE_GROFF since groff and mandoc produce identical output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/08/15 16:33:22 stsp Exp $
d14 1
@


1.23
log
@Update libotr to version 4.0.0. Supports version 3 of the OTR protocol,
which most importantly adds support for multiple simultaneously logged-in
instances of the same user account.
ok pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/08/14 14:17:28 pascal Exp $
a34 1
USE_GROFF =		Yes
@


1.22
log
@add comment about ports that need to be adapted to the new libotrv4 API when
updating.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/07/08 10:29:37 espie Exp $
d12 1
a12 1
DISTNAME=	libotr-3.2.1
a13 1
REVISION =	0
d15 1
a15 1
SHARED_LIBS +=  otr                  3.2      # 4.0
d36 1
d38 8
a45 2
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		${CONFIGURE_SHARED}
@


1.21
log
@revert stupid change
@
text
@d1 8
a8 1
# $OpenBSD: Makefile,v 1.19 2013/07/06 08:30:28 espie Exp $
@


1.20
log
@change depends to how they were before rev 1.14. no functional change.
@
text
@d24 4
a27 2
LIB_DEPENDS=	security/libgcrypt \
		security/libgpg-error
@


1.19
log
@fix depends for !shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/21 08:48:53 ajacoutot Exp $
d24 2
a25 4
LIB_DEPENDS=	security/libgcrypt

# non-shared does not inherit LIB_DEPENDS
LIB_DEPENDS +=	security/libgpg-error
@


1.18
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/11 11:41:25 espie Exp $
d7 1
d25 3
@


1.17
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/09/25 19:40:33 pascal Exp $
a24 1
USE_LIBTOOL=		Yes
@


1.16
log
@Update to libotr 3.2.1, fixing CVE-2012-3461 (multiple heap-based buffer
overflows).  Also, take maintainer.

ok gonzalo@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/04/04 06:45:27 ajacoutot Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.15
log
@Remove irrelevant $FreeBSD RCS ids.
@
text
@d5 1
a5 1
DISTNAME=	libotr-3.2.0
a6 1
REVISION=	0
d13 2
@


1.14
log
@Some cleanups:
* get the SHARED_LIBS from shared_libs.log
* sanitize COMMENT
* tighten LIB_DEPENDS
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.13 2010/11/20 17:22:43 espie Exp $
# $FreeBSD: Makefile,v 1.2 2005/04/21 14:22:54 pav Exp $
@


1.14.2.1
log
@MFC:
Update to libotr 3.2.1, fixing CVE-2012-3461 (multiple heap-based buffer
overflows).

ok sthen@@ gsoares@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/04/04 06:45:27 ajacoutot Exp $
d6 1
a6 1
DISTNAME=	libotr-3.2.1
d8 1
@


1.13
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/11 18:43:10 espie Exp $
d4 1
a4 1
COMMENT=	The portable OTR Messaging Library and toolkit
d8 3
a10 1
SHARED_LIBS=	otr	3.2
d22 2
d25 5
a29 3
LIB_DEPENDS=	security/libgpg-error \
		security/libgcrypt
WANTLIB=	c gpg-error gcrypt
a32 2
USE_LIBTOOL=		Yes
USE_GROFF =		Yes
@


1.12
log
@new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/18 21:41:45 espie Exp $
d21 2
a22 2
LIB_DEPENDS=	::security/libgpg-error \
		::security/libgcrypt
@


1.11
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/07/18 13:21:22 dhill Exp $
d21 3
a23 3
LIB_DEPENDS=	gpg-error::security/libgpg-error \
		gcrypt::security/libgcrypt
WANTLIB=	c
d28 1
a28 1
USE_GROFF =	Yes
@


1.10
log
@upgrade to 3.2.0

no objection steven@@, tested by many.  thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/11/29 14:05:48 okan Exp $
d28 1
@


1.9
log
@update to 3.1.0 from Sebastien Carlier

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/15 23:29:58 merdely Exp $
d6 1
a6 1
DISTNAME=	libotr-3.1.0
d8 1
a8 1
SHARED_LIBS=	otr	3.1
@


1.8
log
@Remove surrounding quotes in NO_REGRESS/COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/10/31 19:54:22 alek Exp $
d6 1
a6 2
DISTNAME=	libotr-3.0.0
PKGNAME=	${DISTNAME}p0
d8 1
a8 2
SHARED_LIBS=	otr	3.0
LIBotr_ALIAS=	realotr
d14 1
a27 8

MAN1=		otr_toolkit.1
MLINKS=		otr_toolkit.1 otr_parse.1 \
		otr_toolkit.1 otr_sesskeys.1 \
		otr_toolkit.1 otr_mackey.1 \
		otr_toolkit.1 otr_readforge.1 \
		otr_toolkit.1 otr_modify.1 \
		otr_toolkit.1 otr_remac.1
@


1.7
log
@Add some changes from CVS; required by new gaim-otr plugin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/12/25 15:52:38 sturm Exp $
d4 1
a4 1
COMMENT=	"The portable OTR Messaging Library and toolkit"
@


1.6
log
@SHARED_LIBS and USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/11/18 04:10:35 marcm Exp $
d7 1
a7 1
#PKGNAME=	${DISTNAME}p0
d9 1
a9 2
SHARED_LIBS=	otr	2.0
MODGNU_SHARED_LIBS=otr	''
d21 1
d24 1
a24 1
WANTLIB=	c iconv intl
@


1.5
log
@Update to 3.0.0.  This supports v2 of the OTR spec.

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/11/17 02:49:54 naddy Exp $
d9 3
@


1.4
log
@add WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/06/15 06:13:53 fgsch Exp $
d6 2
a7 2
DISTNAME=	libotr-2.0.2
PKGNAME=	${DISTNAME}p0
@


1.3
log
@simplify.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/06/13 21:01:29 fgsch Exp $
d7 1
d21 1
d24 1
@


1.2
log
@upgrade to libotr 2.0.2
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 2
VERSION=	2.0.2
DISTNAME=	libotr-${VERSION}
a20 1
AUTOCONF_VERSION=	2.59
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
# $FreeBSD: /repoman/r/pcvs/ports/security/libotr/Makefile,v 1.2 2005/04/21 14:22:54 pav Exp $
d6 1
a6 1
VERSION=	2.0.1
a24 1
USE_GMAKE=		Yes
@


1.1.1.1
log
@Initial import of libotr 2.0.1

This is the library and toolkit for Off-the-Record Messaging used by
the gaim-otr GAIM plugin.

Port by Nicolas Baldi

ok todd@@

@
text
@@
