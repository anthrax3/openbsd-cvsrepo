head	1.2;
access;
symbols
	OPENBSD_3_0:1.1.1.1.0.8
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.6
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.4
	OPENBSD_2_8_BASE:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.2
	OPENBSD_2_7_BASE:1.1.1.1
	dugsong_1999-Oct-27:1.1.1.1
	dugsong:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2002.03.24.08.36.33;	author jsyn;	state dead;
branches;
next	1.1;

1.1
date	99.10.29.00.13.19;	author dugsong;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.10.29.00.13.19;	author dugsong;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- rename patches
- douse with $OpenBSD$
- fix DESCR
- regen PLIST
@
text
@--- etherping.c.orig	Sat Dec 12 15:40:06 1998
+++ etherping.c	Thu Oct 28 19:15:03 1999
@@@@ -48,6 +48,7 @@@@
   struct ether_addr e_src;
   struct in_addr iaddr;
   char promiscGuy[MAX_LEN];
+  static char *dev = NULL;
 
   fromlen = sizeof(from);
 
@@@@ -92,7 +93,8 @@@@
 #else
   snprintf(ether_src, sizeof(ether_src), "%s", ether_ntoa(&e_src));
 #endif
-  getipaddr(DEVICENAME, &iaddr);
+  if (!dev) dev = strdup(pcap_lookupdev(NULL));
+  getipaddr(dev, &iaddr);
   icmp_pack = (char *)make_icmp_echo(ether_addr, ether_src, target_ip, inet_ntoa(iaddr), ident, &len);
 /*   send_raw_frame(fd, icmp_pack, len, 0);  */
 
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@antisniff port
@
text
@@
