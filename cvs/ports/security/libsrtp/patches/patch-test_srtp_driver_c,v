head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.12
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.10
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.8
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.6
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.4
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.04.25.23.40.49;	author sthen;	state Exp;
branches;
next	1.1;
commitid	OnWU9nGAKlu5nh3X;

1.1
date	2012.05.09.16.29.23;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to libsrtp-1.5.2 and take maintainer, ok dhill
@
text
@$OpenBSD: patch-test_srtp_driver_c,v 1.1 2012/05/09 16:29:23 jasper Exp $

Unbreak build on mips64 arches.

--- test/srtp_driver.c.orig	Mon Oct 13 15:35:33 2014
+++ test/srtp_driver.c	Mon Nov 10 20:34:33 2014
@@@@ -341,7 +341,7 @@@@ main (int argc, char *argv[]) {
   if (do_codec_timing) {
     srtp_policy_t policy;
     int ignore;
-    double mips = mips_estimate(1000000000, &ignore);
+    double mips_est = mips_estimate(1000000000, &ignore);
 
     crypto_policy_set_rtp_default(&policy.rtp);
     crypto_policy_set_rtcp_default(&policy.rtcp);
@@@@ -353,33 +353,33 @@@@ main (int argc, char *argv[]) {
     policy.allow_repeat_tx = 0;
     policy.next = NULL;
 
-    printf("mips estimate: %e\n", mips);
+    printf("mips estimate: %e\n", mips_est);
 
     printf("testing srtp processing time for voice codecs:\n");
     printf("codec\t\tlength (octets)\t\tsrtp instructions/second\n");
     printf("G.711\t\t%d\t\t\t%e\n", 80, 
-           (double) mips * (80 * 8) / 
+           (double) mips_est * (80 * 8) / 
 	   srtp_bits_per_second(80, &policy) / .01 );
     printf("G.711\t\t%d\t\t\t%e\n", 160, 
-           (double) mips * (160 * 8) / 
+           (double) mips_est * (160 * 8) / 
 	   srtp_bits_per_second(160, &policy) / .02);
     printf("G.726-32\t%d\t\t\t%e\n", 40, 
-           (double) mips * (40 * 8) / 
+           (double) mips_est * (40 * 8) / 
 	   srtp_bits_per_second(40, &policy) / .01 );
     printf("G.726-32\t%d\t\t\t%e\n", 80, 
-           (double) mips * (80 * 8) / 
+           (double) mips_est * (80 * 8) / 
 	   srtp_bits_per_second(80, &policy) / .02);
     printf("G.729\t\t%d\t\t\t%e\n", 10, 
-           (double) mips * (10 * 8) / 
+           (double) mips_est * (10 * 8) / 
 	   srtp_bits_per_second(10, &policy) / .01 );
     printf("G.729\t\t%d\t\t\t%e\n", 20, 
-           (double) mips * (20 * 8) /
+           (double) mips_est * (20 * 8) /
 	   srtp_bits_per_second(20, &policy) / .02 );
     printf("Wideband\t%d\t\t\t%e\n", 320, 
-           (double) mips * (320 * 8) /
+           (double) mips_est * (320 * 8) /
 	   srtp_bits_per_second(320, &policy) / .01 );
     printf("Wideband\t%d\t\t\t%e\n", 640, 
-           (double) mips * (640 * 8) /
+           (double) mips_est * (640 * 8) /
 	   srtp_bits_per_second(640, &policy) / .02 );
   }
 
@


1.1
log
@unbreak on mips64*
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- test/srtp_driver.c.orig	Wed May  9 17:29:13 2012
+++ test/srtp_driver.c	Wed May  9 17:43:31 2012
@@@@ -314,7 +314,7 @@@@ main (int argc, char *argv[]) {
d16 2
a17 2
@@@@ -323,33 +323,33 @@@@ main (int argc, char *argv[]) {
     policy.key  = test_key;
@

