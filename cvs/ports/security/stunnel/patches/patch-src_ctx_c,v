head	1.5;
access;
symbols
	OPENBSD_6_1:1.4.0.2
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2017.09.12.16.15.24;	author gsoares;	state Exp;
branches;
next	1.4;
commitid	ioBgYuqfF5o8Cu6S;

1.4
date	2016.11.09.23.14.31;	author gsoares;	state Exp;
branches;
next	1.3;
commitid	D4zIQfKk3T2ktLB0;

1.3
date	2016.04.24.12.07.48;	author gsoares;	state Exp;
branches;
next	1.2;
commitid	AkdFnP0VeiOCpsYb;

1.2
date	2015.12.04.01.38.56;	author gsoares;	state Exp;
branches;
next	1.1;
commitid	u1ayoQM2scM4AzAG;

1.1
date	2015.11.25.02.37.52;	author gsoares;	state Exp;
branches;
next	;
commitid	HFXpYGcX6hrydxbU;


desc
@@


1.5
log
@update to 5.42
OK abieber@@
@
text
@$OpenBSD: patch-src_ctx_c,v 1.4 2016/11/09 23:14:31 gsoares Exp $
Index: src/ctx.c
--- src/ctx.c.orig
+++ src/ctx.c
@@@@ -295,7 +295,7 @@@@ NOEXPORT int matches_wildcard(char *servername, char *
 
 #ifndef OPENSSL_NO_DH
 
-#if OPENSSL_VERSION_NUMBER<0x10100000L
+#if OPENSSL_VERSION_NUMBER<0x10100000L || defined(LIBRESSL_VERSION_NUMBER) 
 NOEXPORT STACK_OF(SSL_CIPHER) *SSL_CTX_get_ciphers(const SSL_CTX *ctx) {
     return ctx->cipher_list;
 }
@@@@ -398,7 +398,7 @@@@ NOEXPORT int ecdh_init(SERVICE_OPTIONS *section) {
 /**************************************** initialize OpenSSL CONF */
 
 NOEXPORT int conf_init(SERVICE_OPTIONS *section) {
-#if OPENSSL_VERSION_NUMBER>=0x10002000L
+#if OPENSSL_VERSION_NUMBER>=0x10002000L && !defined(LIBRESSL_VERSION_NUMBER)
     SSL_CONF_CTX *cctx;
     NAME_LIST *curr;
     char *cmd, *param;
@


1.4
log
@update to 5.37
OK benoit@@
@
text
@d1 14
a14 4
$OpenBSD: patch-src_ctx_c,v 1.3 2016/04/24 12:07:48 gsoares Exp $
--- src/ctx.c.orig	Tue Jun 21 12:06:14 2016
+++ src/ctx.c	Thu Nov  3 23:13:15 2016
@@@@ -366,7 +366,7 @@@@ NOEXPORT int ecdh_init(SERVICE_OPTIONS *section) {
@


1.3
log
@update to 5.31
OK kili@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_ctx_c,v 1.2 2015/12/04 01:38:56 gsoares Exp $
--- src/ctx.c.orig	Fri Feb 19 16:18:43 2016
+++ src/ctx.c	Thu Apr 21 21:59:31 2016
@@@@ -363,7 +363,7 @@@@ NOEXPORT int ecdh_init(SERVICE_OPTIONS *section) {
@


1.2
log
@update to 5.27
@
text
@d1 4
a4 4
$OpenBSD: patch-src_ctx_c,v 1.1 2015/11/25 02:37:52 gsoares Exp $
--- src/ctx.c.orig	Mon Nov 30 11:15:43 2015
+++ src/ctx.c	Thu Dec  3 19:26:54 2015
@@@@ -351,7 +351,7 @@@@ NOEXPORT int ecdh_init(SERVICE_OPTIONS *section) {
@


1.1
log
@update to 5.26
builds and runs fine amd64/i386...
@
text
@d1 4
a4 4
$OpenBSD$
--- src/ctx.c.orig	Mon Nov  9 18:13:44 2015
+++ src/ctx.c	Mon Nov  9 18:15:24 2015
@@@@ -349,7 +349,7 @@@@ NOEXPORT int ecdh_init(SERVICE_OPTIONS *section) {
@

