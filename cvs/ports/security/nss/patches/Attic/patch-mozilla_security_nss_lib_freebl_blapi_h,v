head	1.6;
access;
symbols
	OPENBSD_5_3:1.4.0.2
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2013.06.23.18.40.01;	author landry;	state dead;
branches;
next	1.5;

1.5
date	2013.03.21.12.49.42;	author landry;	state Exp;
branches;
next	1.4;

1.4
date	2012.11.12.20.43.09;	author landry;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.17.20.01.22;	author landry;	state Exp;
branches;
next	1.2;

1.2
date	2011.01.15.16.59.37;	author landry;	state Exp;
branches;
next	1.1;

1.1
date	2009.11.14.16.31.06;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to nss 3.15.

https://developer.mozilla.org/en-US/docs/NSS/NSS_3.15_release_notes

After years of sticking to CVS, upstream finally switched to hg,
changing its directory layout while here. All our patches are actually
unchanged, but got renamed/moved. CVS doesn't handle moves :)

Tested in an amd64 bulk build.
@
text
@$OpenBSD: patch-mozilla_security_nss_lib_freebl_blapi_h,v 1.5 2013/03/21 12:49:42 landry Exp $

From firefox in pkgsrc:
SHA1_Update conflicts with openssl which may be dynamically loaded
at runtime via libcups or libgssapi so causing a crash due to using
the wrong binding.  So rename here to avoid conflict.

--- mozilla/security/nss/lib/freebl/blapi.h.orig	Thu Feb 14 22:20:46 2013
+++ mozilla/security/nss/lib/freebl/blapi.h	Thu Mar 21 10:12:53 2013
@@@@ -1022,6 +1022,8 @@@@ extern void SHA1_DestroyContext(SHA1Context *cx, PRBoo
 */
 extern void SHA1_Begin(SHA1Context *cx);
 
+#define SHA1_Update NSS_SHA1_Update
+
 /*
 ** Update the SHA-1 hash function with more data.
 **	"cx" the context
@


1.5
log
@Security update to nss 3.14.3.

Fixes CVE-2013-1620 / bug #822365 (Lucky Thirteen attack)
Required by firefox 20 & later anyway.. and tested to work fine with 20.0b6.
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_security_nss_lib_freebl_blapi_h,v 1.4 2012/11/12 20:43:09 landry Exp $
@


1.4
log
@Update to nss 3.14.

- use ${SUBST_CMD} instead of old-style perl -pi -e commands
- update nss-config from debian's nss-config.in, since apparently it
comes from there.. needed to fix detection by mozillas, otherwise the
current script returns 3.14 for --version while configure scripts
expect 3.14.0... grab version via awk on nss.h at runtime.

Tested on amd64/i386/powerpc and in an amd64 bulk build. Needed by
firefox 18.

ok sthen@@ ajacoutot@@ jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_security_nss_lib_freebl_blapi_h,v 1.3 2012/09/17 20:01:22 landry Exp $
d8 3
a10 3
--- mozilla/security/nss/lib/freebl/blapi.h.orig	Thu Oct 11 02:10:26 2012
+++ mozilla/security/nss/lib/freebl/blapi.h	Thu Nov  8 21:18:24 2012
@@@@ -1010,6 +1010,8 @@@@ extern void SHA1_DestroyContext(SHA1Context *cx, PRBoo
@


1.3
log
@Update to nss 3.13.6.

Needed by upcoming Mozilla 16 releases.
Been in a bunch of amd64 bulks, tested on ppc/sparc64 too.
ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_security_nss_lib_freebl_blapi_h,v 1.2 2011/01/15 16:59:37 landry Exp $
d8 3
a10 3
--- mozilla/security/nss/lib/freebl/blapi.h.orig	Thu Mar 29 00:38:27 2012
+++ mozilla/security/nss/lib/freebl/blapi.h	Sun Sep  2 00:45:41 2012
@@@@ -1043,6 +1043,8 @@@@ extern void SHA1_DestroyContext(SHA1Context *cx, PRBoo
@


1.2
log
@Update to nss 3.12.9, required by ffx4.0b8 and later,and
soon-to-be-required by stable releases in other mozilla branches.
ok sthen@@ martynas@@
@
text
@d1 1
a1 1
$OpenBSD: patch-mozilla_security_nss_lib_freebl_blapi_h,v 1.1 2009/11/14 16:31:06 ajacoutot Exp $
d8 3
a10 3
--- mozilla/security/nss/lib/freebl/blapi.h.orig	Sat Dec  4 19:59:01 2010
+++ mozilla/security/nss/lib/freebl/blapi.h	Thu Jan 13 14:02:49 2011
@@@@ -1038,6 +1038,8 @@@@ extern void SHA1_DestroyContext(SHA1Context *cx, PRBoo
@


1.1
log
@SHA1_Update conflicts with openssl which may be dynamically loaded
at runtime via other libs (cups, kerberos...) so causing a crash due to
using the wrong binding.
Rename here to avoid conflict.

from pkgsrc

ok sthen@@ jasper@@ robert@@
@
text
@d1 1
a1 1
$OpenBSD$
d8 3
a10 3
--- mozilla/security/nss/lib/freebl/blapi.h.orig	Wed Nov 11 14:08:21 2009
+++ mozilla/security/nss/lib/freebl/blapi.h	Wed Nov 11 14:08:42 2009
@@@@ -925,6 +925,8 @@@@ extern void SHA1_DestroyContext(SHA1Context *cx, PRBoo
@

