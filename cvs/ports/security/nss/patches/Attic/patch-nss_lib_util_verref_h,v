head	1.2;
access;
symbols
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.06.14.14.48.51;	author landry;	state dead;
branches;
next	1.1;
commitid	o58xeFtQKNpog0FA;

1.1
date	2015.11.23.11.32.12;	author landry;	state Exp;
branches;
next	;
commitid	0Mm7c0lx9CLx686V;


desc
@@


1.2
log
@Update to nss 3.24, requirement of firefox 48.

- Remove patch-nss_lib_util_verref_h, merged upstream (#1226179)
- Remove useless patch-nss_coreconf_UNIX_mk, our -O2 takes precedence
- Remove chunk of patch-nss_coreconf_OpenBSD_mk, was merged upstream in
  #1250891. While here remove the addition of -Wl,Bsymbolic to MKSHLIB
which was here since forever for no justified reason.
@
text
@$OpenBSD: patch-nss_lib_util_verref_h,v 1.1 2015/11/23 11:32:12 landry Exp $

https://bugzilla.mozilla.org/show_bug.cgi?id=1226179
#pragma GCC diagnostic was added in gcc 4.6

--- nss/lib/util/verref.h.orig	Mon Nov  9 06:12:59 2015
+++ nss/lib/util/verref.h	Fri Nov 20 08:50:21 2015
@@@@ -18,7 +18,7 @@@@
 #pragma warning(disable: 4101)
 #endif
 /* This works for both gcc and clang */
-#if defined(__GNUC__) && !defined(NSS_NO_GCC48)
+#if defined(__GNUC__) && !defined(NSS_NO_GCC48) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wunused-variable"
 #endif
@@@@ -35,6 +35,6 @@@@
 #ifdef _MSC_VER
 #pragma warning(pop)
 #endif
-#if defined(__GNUC__) && !defined(NSS_NO_GCC48)
+#if defined(__GNUC__) && !defined(NSS_NO_GCC48) && (__GNUC__ > 4 || (__GNUC__ == 4 && __GNUC_MINOR__ >= 6))
 #pragma GCC diagnostic pop
 #endif
@


1.1
log
@Update to nss 3.21.

Tested in a bulk and ok ajacoutot@@, thanks!
@
text
@d1 1
a1 1
$OpenBSD$
@

