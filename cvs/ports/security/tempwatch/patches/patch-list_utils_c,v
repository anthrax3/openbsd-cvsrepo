head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.46
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.42
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.44
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.40
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.38
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.36
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.34
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.32
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.30
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.28
	OPENBSD_5_0:1.2.0.26
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.24
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.22
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.20
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.18
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.16
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.14
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.12
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.10
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.8
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.0.6
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2005.06.21.18.48.23;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2004.01.05.03.24.14;	author espie;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- whiteouts are gone
- honor CC
@
text
@$OpenBSD: patch-list_utils_c,v 1.1 2004/01/05 03:24:14 espie Exp $
--- list_utils.c.orig	Thu Dec 24 06:00:44 1998
+++ list_utils.c	Tue Jun 21 20:41:05 2005
@@@@ -143,7 +143,12 @@@@ printnode(struct listStruct *list, int a
 
   getfilemodes(&list->statbuf, filemodes);
 
-  sprintf(outputStr,"%.2s %-11.20s %-2d %-8.20s %-8.20s %-6ld %-10.20s "
+#ifdef SOLARIS25
+  sprintf(outputStr,
+#else
+  snprintf(outputStr, sizeof(outputStr),
+#endif
+  		    "%.2s %-11.20s %-2d %-8.20s %-8.20s %-6ld %-10.20s "
                     "%.20s",
           (action == ADDITION) ? "+ " : "- ", filemodes, 
           (int)list->statbuf.st_nlink, username, groupname,
@@@@ -168,7 +173,7 @@@@ printnode(struct listStruct *list, int a
 
   
 
-#ifdef 0
+#if 0
   printf("%-11s %-2d %-8s %-8s %-6ld %-10s %-10s\n", filemodes,
           (int)list->statbuf.st_nlink, username, groupname, 
           list->statbuf.st_size, timehold, list->filename);
@@@@ -299,7 +304,7 @@@@ void getfilemodes(struct stat *statbuf, 
   else if (S_ISDOOR(mode))
     holder[0] = 'p';
 #else
-#if defined (BSD)
+#if defined (BSD) && !defined(__OpenBSD__)
   else if (S_ISWHT(mode))
     holder[0] = '%';
 #endif
@


1.1
log
@#ifdef 0 -> #if 0
@
text
@d1 18
a18 4
$OpenBSD$
--- list_utils.c.orig	2004-01-05 04:21:42.000000000 +0100
+++ list_utils.c	2004-01-05 04:21:49.000000000 +0100
@@@@ -168,7 +168,7 @@@@ printnode(struct listStruct *list, int a
d27 9
@

