head	1.4;
access;
symbols
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2016.03.28.21.37.25;	author sthen;	state dead;
branches;
next	1.3;
commitid	axsdZF7OAwTkE8RO;

1.3
date	2015.08.28.11.05.22;	author jca;	state Exp;
branches;
next	1.2;
commitid	JZ5RYEGqF9cVqj8o;

1.2
date	2015.08.25.17.30.56;	author jca;	state Exp;
branches;
next	1.1;
commitid	jxVJ9BIRMfP1dr0v;

1.1
date	2015.07.18.15.53.08;	author sthen;	state Exp;
branches;
next	;
commitid	rESGm45pLHYrDBQQ;


desc
@@


1.4
log
@update to sslsplit-0.5.0
@
text
@$OpenBSD: patch-opts_c,v 1.3 2015/08/28 11:05:22 jca Exp $

Fixed upstream

  https://github.com/droe/sslsplit/commit/57a2ab85884e8bacec8b03aa5a3f935376f43a2d

--- opts.c.orig	Mon Mar 16 00:24:02 2015
+++ opts.c	Fri Aug 28 12:34:18 2015
@@@@ -143,7 +143,7 @@@@ opts_proto_force(opts_t *opts, const char *optarg, con
 		opts->sslmethod = SSLv2_method;
 	} else
 #endif /* SSL_OP_NO_SSLv2 && WITH_SSLV2 */
-#ifdef SSL_OP_NO_SSLv3
+#if defined(SSL_OP_NO_SSLv3) && !defined(OPENSSL_NO_SSL3_METHOD)
 	if (!strcmp(optarg, "ssl3")) {
 		opts->sslmethod = SSLv3_method;
 	} else
@@@@ -219,7 +219,7 @@@@ opts_proto_dbg_dump(opts_t *opts)
 #if defined(SSL_OP_NO_SSLv2) && defined(WITH_SSLV2)
 	               (opts->sslmethod == SSLv2_method) ? "nossl2" :
 #endif /* SSL_OP_NO_SSLv2 && WITH_SSLV2 */
-#ifdef SSL_OP_NO_SSLv3
+#if defined(SSL_OP_NO_SSLv3) && !defined(OPENSSL_NO_SSL3_METHOD)
 	               (opts->sslmethod == SSLv3_method) ? "ssl3" :
 #endif /* SSL_OP_NO_SSLv3 */
 #ifdef SSL_OP_NO_TLSv1
@


1.3
log
@Additional fixes for SSLv3 removal.  ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-opts_c,v 1.2 2015/08/25 17:30:56 jca Exp $
@


1.2
log
@Committed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-opts_c,v 1.1 2015/07/18 15:53:08 sthen Exp $
d7 2
a8 2
--- opts.c.orig	Fri Jul 17 22:51:48 2015
+++ opts.c	Fri Jul 17 22:54:07 2015
d14 1
a14 1
+#ifdef SSL_OP_NO_SSLv3 && !defined(OPENSSL_NO_SSL3_METHOD)
d18 9
@


1.1
log
@guard SSLv3_method
@
text
@d1 6
a6 1
$OpenBSD$
@

