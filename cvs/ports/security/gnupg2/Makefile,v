head	1.53;
access;
symbols
	OPENBSD_6_1:1.47.0.2
	OPENBSD_6_1_BASE:1.47
	OPENBSD_6_0:1.42.0.2
	OPENBSD_6_0_BASE:1.42
	OPENBSD_5_9:1.41.0.2
	OPENBSD_5_9_BASE:1.41
	OPENBSD_5_8:1.37.0.4
	OPENBSD_5_8_BASE:1.37
	OPENBSD_5_7:1.36.0.2
	OPENBSD_5_7_BASE:1.36
	OPENBSD_5_6:1.31.0.2
	OPENBSD_5_6_BASE:1.31
	OPENBSD_5_5:1.28.0.2
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.23.0.2
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.19.0.2
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.10.0.2
	OPENBSD_4_9_BASE:1.10
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	pea_20100708:1.1.1.1
	pea:1.1.1;
locks; strict;
comment	@# @;


1.53
date	2017.08.22.21.07.45;	author edd;	state Exp;
branches;
next	1.52;
commitid	R0f4J1ltvrMXw4l1;

1.52
date	2017.08.10.14.55.48;	author pea;	state Exp;
branches;
next	1.51;
commitid	ktq2npHc29gVkFuF;

1.51
date	2017.08.08.15.55.14;	author pea;	state Exp;
branches;
next	1.50;
commitid	mrsa6na7S4jzdzAv;

1.50
date	2017.05.21.11.23.30;	author pea;	state Exp;
branches;
next	1.49;
commitid	QN2rX9q3Lqa77xmW;

1.49
date	2017.04.24.15.47.02;	author edd;	state Exp;
branches;
next	1.48;
commitid	ADyrz5InEsuHSZBR;

1.48
date	2017.04.07.16.21.53;	author edd;	state Exp;
branches;
next	1.47;
commitid	RhEU5SbGKpRfK29X;

1.47
date	2016.11.18.11.30.53;	author ajacoutot;	state Exp;
branches;
next	1.46;
commitid	eKjgsEe27mrK7RpK;

1.46
date	2016.10.01.13.56.26;	author naddy;	state Exp;
branches;
next	1.45;
commitid	cUPMiTKZjgsMqHEJ;

1.45
date	2016.09.28.19.33.37;	author jca;	state Exp;
branches;
next	1.44;
commitid	J7chIyaEYg2YAiGd;

1.44
date	2016.09.24.07.32.32;	author sthen;	state Exp;
branches;
next	1.43;
commitid	p1kvrGpDuRur4qwA;

1.43
date	2016.09.19.17.09.37;	author edd;	state Exp;
branches;
next	1.42;
commitid	OO0Lv7sjybP3dg3C;

1.42
date	2016.06.29.16.14.44;	author espie;	state Exp;
branches;
next	1.41;
commitid	c1yQMbJbfo0CFBcL;

1.41
date	2015.10.20.09.20.50;	author pea;	state Exp;
branches;
next	1.40;
commitid	MijAI39dd3EUOmxq;

1.40
date	2015.09.29.20.51.42;	author edd;	state Exp;
branches;
next	1.39;
commitid	A09qWOZHk3pLIruW;

1.39
date	2015.09.11.10.02.03;	author pea;	state Exp;
branches;
next	1.38;
commitid	tZzd24yT18s8ZVd5;

1.38
date	2015.09.06.18.43.46;	author jca;	state Exp;
branches;
next	1.37;
commitid	RsUn3ZDeUGcHVh0O;

1.37
date	2015.05.16.10.33.09;	author pea;	state Exp;
branches;
next	1.36;
commitid	2PoLbrD02cjKE588;

1.36
date	2015.02.19.18.18.30;	author espie;	state Exp;
branches;
next	1.35;
commitid	DV03nNV5NNVo1Xxg;

1.35
date	2015.02.16.22.57.12;	author naddy;	state Exp;
branches;
next	1.34;
commitid	0dx3c9ckf7dE4tx1;

1.34
date	2015.02.12.15.36.21;	author pea;	state Exp;
branches;
next	1.33;
commitid	v6mgHPwF9zsQymtt;

1.33
date	2015.01.08.09.06.19;	author pea;	state Exp;
branches;
next	1.32;
commitid	AzP6kzKlm5AqTH81;

1.32
date	2014.09.01.08.42.01;	author pea;	state Exp;
branches;
next	1.31;
commitid	Dvqjlt86uJckTaZw;

1.31
date	2014.07.08.10.36.03;	author pea;	state Exp;
branches;
next	1.30;
commitid	LS9L3a7LKp82zFAB;

1.30
date	2014.06.26.13.38.06;	author sthen;	state Exp;
branches;
next	1.29;
commitid	mb0xFlOblKgygLlK;

1.29
date	2014.06.06.08.14.07;	author pea;	state Exp;
branches;
next	1.28;
commitid	czNvonUQxuZfgCUU;

1.28
date	2013.10.27.13.47.50;	author naddy;	state Exp;
branches
	1.28.2.1;
next	1.27;

1.27
date	2013.10.07.11.54.28;	author pascal;	state Exp;
branches;
next	1.26;

1.26
date	2013.08.20.20.01.30;	author pascal;	state Exp;
branches;
next	1.25;

1.25
date	2013.07.12.00.49.23;	author jca;	state Exp;
branches
	1.25.2.1;
next	1.24;

1.24
date	2013.03.11.11.41.24;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2013.02.09.14.49.52;	author sthen;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2012.10.31.10.26.12;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2012.09.30.16.28.07;	author dcoppa;	state Exp;
branches;
next	1.20;

1.20
date	2012.08.08.15.10.02;	author dcoppa;	state Exp;
branches;
next	1.19;

1.19
date	2012.05.14.08.49.54;	author dcoppa;	state Exp;
branches;
next	1.18;

1.18
date	2012.03.28.12.35.41;	author pea;	state Exp;
branches;
next	1.17;

1.17
date	2012.03.09.12.11.23;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2012.01.31.10.51.48;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2011.11.28.15.38.38;	author dcoppa;	state Exp;
branches;
next	1.14;

1.14
date	2011.11.27.12.48.30;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2011.11.13.13.54.05;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2011.09.19.11.41.35;	author pea;	state Exp;
branches;
next	1.11;

1.11
date	2011.03.09.06.23.35;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.01.17.15.42.08;	author pea;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.22.09.34.10;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2010.11.12.11.58.36;	author dcoppa;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.11.18.34.59;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.10.18.21.41.45;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.07.09.46.02;	author pea;	state Exp;
branches;
next	1.3;

1.3
date	2010.08.21.11.03.21;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.08.22.03.45;	author ajacoutot;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2010.07.08.16.57.54;	author pea;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.07.08.16.57.54;	author pea;	state Exp;
branches;
next	;

1.2.2.1
date	2010.08.21.11.03.51;	author jasper;	state Exp;
branches;
next	;

1.23.2.1
date	2013.10.07.12.13.29;	author pascal;	state Exp;
branches;
next	1.23.2.2;

1.23.2.2
date	2013.10.09.07.56.25;	author jasper;	state Exp;
branches;
next	;

1.25.2.1
date	2013.10.07.12.04.46;	author pascal;	state Exp;
branches;
next	;

1.28.2.1
date	2014.06.30.09.05.21;	author jasper;	state Exp;
branches;
next	;
commitid	kdJfE1clDMhC5uUe;


desc
@@


1.53
log
@Update devel/npth to 1.5 and make security/gnupg2 use it.

The last update to gnupg2 broke `gpg2 --refresh` and `gpg2 --send-keys`. The
root is a bug in npthr, which appears to be fixed in 1.5.

OK giovanni@@ and pea@@ (MAINTAINER of both ports). Many thanks.
@
text
@# $OpenBSD: Makefile,v 1.52 2017/08/10 14:55:48 pea Exp $

COMMENT =	GNU privacy guard - a free PGP replacement

DISTNAME =	gnupg-2.1.23
CATEGORIES = 	security

MASTER_SITES =	${MASTER_SITE_GNUPG:=gnupg/}

HOMEPAGE = 	http://www.gnupg.org/

MAINTAINER = 	Pierre-Emmanuel Andre <pea@@openbsd.org>

# GPLv3+
PERMIT_PACKAGE_CDROM = 	Yes

WANTLIB += assuan bz2 c gcrypt gnutls gpg-error iconv intl ksba
WANTLIB += npth pthread readline sqlite3 termcap usb-1.0 z

EXTRACT_SUFX = 		.tar.bz2

FLAVORS = 		ldap
FLAVOR ?=

LIB_DEPENDS =		archivers/bzip2 \
			databases/sqlite3 \
			devel/gettext \
			devel/libusb1 \
			devel/npth>=1.5 \
			security/gnutls \
			security/libassuan>=2.4.3 \
			security/libgcrypt \
			security/libksba>=1.3.4

.if ${FLAVOR:Mldap}
CONFIGURE_ARGS +=	--enable-ldap
WANTLIB +=		lber ldap
LIB_DEPENDS +=		databases/openldap
.else
CONFIGURE_ARGS +=	--disable-ldap
.endif

RUN_DEPENDS = 		security/pinentry

TEST_DEPENDS = 	${FULLPKGNAME}:${BUILD_PKGPATH}
PORTHOME=${WRKDIR}

USE_GMAKE = 		Yes

CONFIGURE_STYLE = 	gnu
CONFIGURE_ENV = 	CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS += 	docdir=${LOCALBASE}/share/doc/gnupg2 \
			--enable-gpgtar \
			--enable-wks-tools \
			--enable-gpg-is-gpg2

# Avoid conflict with gnupg-1.x
post-install:
	@@mv ${PREFIX}/man/man7/gnupg.7 ${PREFIX}/man/man7/gnupg2.7

.include <bsd.port.mk>
@


1.52
log
@Update to 2.1.23

ok abieber@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2017/08/08 15:55:14 pea Exp $
d29 1
a29 1
			devel/npth \
@


1.51
log
@Update to 2.1.22

ok abieber@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2017/05/21 11:23:30 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.22
d55 2
a56 1
			--enable-wks-tools
@


1.50
log
@Update to 2.1.21
Yubikey tested by Pavel Korovin, thanks !
ok edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2017/04/24 15:47:02 edd Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.21
d55 1
a55 1
			--with-adns=no
@


1.49
log
@security/gnupg2: Add instructions to README for Yubikeys.

From Pavel Korovin, OK abieber@@. Thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2017/04/07 16:21:53 edd Exp $
d5 1
a5 2
DISTNAME =	gnupg-2.1.20
REVISION =	0
@


1.48
log
@Update gnupg2 to 2.1.20.

OK pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/11/18 11:30:53 ajacoutot Exp $
d6 1
@


1.47
log
@Unbreak gpg-agent after libgpg-error update (from upstream).

reported by edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/10/01 13:56:26 naddy Exp $
d5 1
a5 2
DISTNAME =	gnupg-2.1.15
REVISION =	2
a44 2
# gpg-agent must be installed to run the regress tests
# Make sure you dont have gpg aliased (e.g. to gpg2) when running tests.
@


1.46
log
@rename MASTER_SITES_GNUPG to MASTER_SITE_GNUPG, like all the others
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2016/09/28 19:33:37 jca Exp $
d6 1
a6 1
REVISION =	1
@


1.45
log
@Drop the gettext module from gnupg.org ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2016/09/24 07:32:32 sthen Exp $
d9 1
a9 1
MASTER_SITES =	${MASTER_SITES_GNUPG:=gnupg/}
@


1.44
log
@gnupg2 needs a LIB_DEPENDS on databases/sqlite3, missed in previous run because
this didn't start pulling in sqlite until the 2.1.15 update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2016/09/19 17:09:37 edd Exp $
d6 1
a6 1
REVISION =	0
d18 2
a19 3
WANTLIB +=		assuan bz2 c gcrypt gnutls gpg-error
WANTLIB +=		ksba npth pthread readline sqlite3
WANTLIB +=		termcap usb-1.0 z
a22 2
MODULES = 		devel/gettext

d28 1
@


1.43
log
@Update gnupg2 to 2.1.15.

OK jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2016/06/29 16:14:44 espie Exp $
d6 1
d30 1
@


1.42
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2015/10/20 09:20:50 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.9
a6 1
REVISION =	0
d18 2
a19 2
WANTLIB +=		ksba npth pthread readline
WANTLIB +=		termcap usb z
d29 1
a29 1
			devel/libusb-compat \
d32 1
a32 1
			security/libassuan \
d34 1
a34 1
			security/libksba
d47 1
d49 1
a61 1
	@@mv ${PREFIX}/man/man1/gpg-zip.1 ${PREFIX}/man/man1/gpg2-zip.1
@


1.41
log
@Update to 2.1.9

ok ajacoutot@@, dcoppa@@, edd@@, nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2015/09/29 20:51:42 edd Exp $
d7 1
@


1.40
log
@Fix a crash in security/gnupg2.

Makes HKP pools work again in gpg2.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2015/09/11 10:02:03 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.8
a6 1
REVISION =	0
@


1.39
log
@Update to 2.1.8

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2015/09/06 18:43:46 jca Exp $
d7 1
@


1.38
log
@Update to gnupg-2.1.7; ok pea@@ (maintainer)

Tested on i386 and amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2015/05/16 10:33:09 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.7
@


1.37
log
@Update to 2.1.4

ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2015/02/19 18:18:30 espie Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.4
@


1.36
log
@fix fucked-up update. gnupg-1 and gnupg-2 are not allowed to conflict!
this breaks the bulk builds.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2015/02/16 22:57:12 naddy Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.2
a6 1
REVISION =	0
@


1.35
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/02/12 15:36:21 pea Exp $
d7 1
d62 1
@


1.34
log
@Update to 2.1.2

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/01/08 09:06:19 pea Exp $
a49 1
USE_GROFF =		Yes
@


1.33
log
@Update to 2.1.1

help and ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2014/09/01 08:42:01 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.1.1
@


1.32
log
@Update to 2.0.26

ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2014/07/08 10:36:03 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.0.26
d17 3
a19 3
WANTLIB +=		assuan bz2 c crypto curl gcrypt
WANTLIB +=		gpg-error idn ksba pth pthread
WANTLIB +=		readline ssl termcap usb z
d30 2
d34 1
a34 3
			security/libksba \
			net/curl \
			devel/pth
d38 1
a38 1
WANTLIB +=		ldap
@


1.31
log
@Bugfix update to 2.0.25

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2014/06/26 13:38:06 sthen Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.0.25
@


1.30
log
@Update to gnupg-2.0.24; various fixes including "infinite loop in uncompressing
garbled packets" (CVE-2014-4617). Fix capitalization in COMMENT while there
as was already done in security/gnupg (gpg1.x). OK pea@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2014/06/06 08:14:07 pea Exp $
d5 1
a5 1
DISTNAME =	gnupg-2.0.24
@


1.29
log
@Update to 2.0.23

ok pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/10/27 13:47:50 naddy Exp $
d3 1
a3 1
COMMENT = 	gnu privacy guard - a free PGP replacement
d5 1
a5 1
DISTNAME = 	gnupg-2.0.23
@


1.28
log
@Don't pick up net/adns if it happens to be installed.  ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/10/07 11:54:28 pascal Exp $
d5 1
a5 2
DISTNAME = 	gnupg-2.0.22
REVISION =	0
@


1.28.2.1
log
@Security fix for CVE-2014-4617,
gnupg: infinite loop when decompressing data packets

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/10/27 13:47:50 naddy Exp $
d6 1
a6 1
REVISION =	1
@


1.27
log
@SECURITY update to GnuPG 2.0.22.  Fixes CVE-2013-4402, see:

http://lists.gnupg.org/pipermail/gnupg-announce/2013q4/000333.html

ok pea@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/08/20 20:01:30 pascal Exp $
d6 1
d57 2
a58 1
			--enable-gpgtar
@


1.26
log
@Update to GnuPG 2.0.21.

ok dcoppa@@, maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/07/12 00:49:23 jca Exp $
d5 1
a5 1
DISTNAME = 	gnupg-2.0.21
@


1.25
log
@Introduce MASTER_SITES_GNUPG and reuse it for various GnuPG
(sub)projects.  http:// urls first, then the primary ftp
site for ''make peek-ftp'', as suggested by sthen@@.
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2013/03/11 11:41:24 espie Exp $
d5 1
a5 2
DISTNAME = 	gnupg-2.0.19
REVISION =	3
@


1.25.2.1
log
@SECURITY update to GnuPG 2.0.22.  Fixes CVE-2013-4402, see:

http://lists.gnupg.org/pipermail/gnupg-announce/2013q4/000333.html

ok pea@@ (maintainer), jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/08/20 20:01:30 pascal Exp $
d5 2
a6 1
DISTNAME = 	gnupg-2.0.22
@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/02/09 14:49:52 sthen Exp $
d9 1
a9 8
MASTER_SITES = 	ftp://ftp.gnupg.org/gcrypt/gnupg/ \
		ftp://gd.tuwien.ac.at/privacy/gnupg/gnupg/ \
		ftp://crypto.yashy.com/pub/cryptography/gnupg/ \
		ftp://ftp.planetmirror.com/pub/gnupg/gnupg/ \
		ftp://sunsite.dk/pub/security/gcrypt/gnupg/ \
		ftp://ftp.linux.it/pub/mirrors/gnupg/gnupg/ \
		ftp://pgp.iijlab.net/pub/pgp/gnupg/ \
		ftp://ring.aist.go.jp/pub/net/gnupg/gnupg/
@


1.23
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/10/31 10:26:12 sthen Exp $
a23 3
PERMIT_PACKAGE_FTP = 	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP = 	Yes
d55 1
a55 1
REGRESS_DEPENDS = 	${FULLPKGNAME}:${BUILD_PKGPATH}
@


1.23.2.1
log
@SECURITY update to GnuPG 2.0.22.  Fixes CVE-2013-4402, see:

http://lists.gnupg.org/pipermail/gnupg-announce/2013q4/000333.html

ok pea@@ (maintainer), jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2013/02/09 14:49:52 sthen Exp $
d5 2
a6 1
DISTNAME = 	gnupg-2.0.22
@


1.23.2.2
log
@revert previous which changed way too many things.

while here, apply the actual fix for the issue.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23.2.1 2013/10/07 12:13:29 pascal Exp $
d5 1
a5 2
DISTNAME = 	gnupg-2.0.19
REVISION =	4
@


1.22
log
@Don't override an earlier CONFIGURE_ARGS at the bottom of the Makefile;
fixes a problem where gnupg2 was picking up openldap even for the non-ldap
build.  Build problem spotted by naddy, ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2012/09/30 16:28:07 dcoppa Exp $
d47 1
a47 1
.if ${FLAVOR:L:Mldap}
@


1.21
log
@Do not refer to ports in the pkg/README.

While here, fix pthread related stuff.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2012/08/08 15:10:02 dcoppa Exp $
d6 1
a6 1
REVISION =	2
d66 1
a66 1
CONFIGURE_ARGS = 	docdir=${LOCALBASE}/share/doc/gnupg2 \
@


1.20
log
@Enable pcsc-lite support

Diff looks good to pea@@ (maintainer)

Tested with my O2 O2Micro CCID SC Reader
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/05/14 08:49:54 dcoppa Exp $
d6 1
a6 1
REVISION =	1
@


1.19
log
@Re-enable smartcard support: it works again with rthreads.
Internal CCID driver only, as it was before.

OK pea@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/03/28 12:35:41 pea Exp $
d6 1
a6 1
REVISION =	0
d65 1
a65 1
			LDFLAGS="-L${LOCALBASE}/lib -pthread"
@


1.18
log
@Update to 2.0.19

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/03/09 12:11:23 dcoppa Exp $
d6 1
d29 2
a30 2
WANTLIB +=		gpg-error idn ksba pth readline
WANTLIB +=		ssl termcap z
d40 1
d65 1
a65 1
			LDFLAGS="-L${LOCALBASE}/lib"
a67 4

# XXX GNU-Pth/libpthread segfault woes:
# http://marc.info/?l=openbsd-ports&m=132197024628355
CONFIGURE_ARGS +=	--disable-scdaemon
@


1.17
log
@Fix an error into configure wrt libcurl checking and regen WANTLIB
accordingly

ok pea@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/01/31 10:51:48 espie Exp $
d5 1
a5 1
DISTNAME = 	gnupg-2.0.18
a6 1
REVISION =	3
@


1.16
log
@properly re-conflict gpg1/2. Noticed by naddy@@
okay ajacoutot@@, pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/11/28 15:38:38 dcoppa Exp $
d7 1
a7 1
REVISION =	2
d28 3
a30 2
WANTLIB +=		assuan bz2 c gcrypt gpg-error
WANTLIB +=		ksba pth readline termcap z
@


1.15
log
@clearer comment
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/11/27 12:48:30 dcoppa Exp $
d7 1
a7 1
REVISION =	1
@


1.14
log
@Temporarily disable Smartcard support due to issues with mixing gnu pth
and libpthread. See: http://marc.info/?l=openbsd-ports&m=132197024628355

Ok pea@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/11/13 13:54:05 ajacoutot Exp $
d67 2
a68 1
# XXX gnupth/pthread segfault woes
@


1.13
log
@Sync dependencies after move from libusb to libusb-compat and fix a
couple of fallouts. Note that these ports are only the ones that used to
have a direct dependency on devel/libusb so there may be some other
hidden ports that may break because of the switch. If that's the case,
no need to start ranting all over but instead tell me which one(s)
break. Thanks.

Note: sysutils/nut hasn't been fixed yet but will be today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/09/19 11:41:35 pea Exp $
d7 1
a7 1
REVISION =	0
d28 2
a29 2
WANTLIB +=		assuan bz2 c gcrypt gpg-error pthread
WANTLIB +=		ksba pth readline termcap usb z
d38 1
a38 2
LIB_DEPENDS = 		devel/libusb-compat \
			archivers/bzip2 \
d63 1
a63 1
			LDFLAGS="-L${LOCALBASE}/lib -pthread" 
d66 3
@


1.12
log
@Update to 2.0.18.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/03/09 06:23:35 ajacoutot Exp $
d7 1
d28 1
a28 1
WANTLIB +=		assuan bz2 c gcrypt gpg-error
d38 1
a38 1
LIB_DEPENDS = 		devel/libusb \
d64 1
a64 1
			LDFLAGS="-L${LOCALBASE}/lib" 
@


1.11
log
@Use FULLPKGNAME in REGRESS_DEPENDS, much less error-prone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/01/17 15:42:08 pea Exp $
d5 1
a5 1
DISTNAME = 	gnupg-2.0.17
d27 2
a28 2
WANTLIB +=		assuan bz2 c crypto curl gcrypt gpg-error
WANTLIB +=		idn ksba pth readline ssl termcap usb z
@


1.10
log
@Update to 2.0.17

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/22 09:34:10 espie Exp $
d56 1
a56 1
REGRESS_DEPENDS = 	${PKGNAME}:${BUILD_PKGPATH}
@


1.9
log
@missed some new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/11/20 17:22:43 espie Exp $
d5 1
a5 2
DISTNAME = 	gnupg-2.0.16
REVISION =	0
d64 2
a65 1
CONFIGURE_ARGS = 	docdir=${LOCALBASE}/share/doc/gnupg2
@


1.8
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/11/12 11:58:36 dcoppa Exp $
d57 1
a57 1
REGRESS_DEPENDS = 	:${PKGNAME}:${BUILD_PKGPATH}
@


1.7
log
@
- Disable the pcsc backend since it's screwed up with our current
  threading implementation
- Backport a patch from upstream that allows using all the available
  hash algorithms with scdaemon
- Fix license marker
- Fix wrong REGRESS_DEPENDS
- Swith to new-style LIB_DEPENDS/WANTLIB
- Adjust spacing

OK sthen@@, pea@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/10/18 21:41:45 espie Exp $
d38 7
a44 7
LIB_DEPENDS = 		::devel/libusb \
			::archivers/bzip2 \
			::security/libassuan \
			::security/libgcrypt \
			::security/libksba \
			::net/curl \
			::devel/pth
d49 1
a49 1
LIB_DEPENDS +=		::databases/openldap
d54 1
a54 1
RUN_DEPENDS = 		::security/pinentry
@


1.6
log
@more WANTLIB
@
text
@d6 1
a17 1

d22 1
a22 1
# GPLv3
d25 1
a25 1
PERMIT_DISTFILES_CDROM=	Yes
d28 3
a34 2
WANTLIB = 		c crypto z readline ssl termcap gpg-error idn

a36 1
USE_GROFF =		Yes
a37 9
.if ${FLAVOR:L:Mldap}
CONFIGURE_ARGS+=	--enable-ldap
LIB_DEPENDS+=		::databases/openldap
WANTLIB +=		ldap.>=8
.else
CONFIGURE_ARGS+=	--disable-ldap
.endif

WANTLIB +=		usb bz2 assuan gcrypt ksba curl.>=6 pth
d46 8
d57 1
a57 1
REGRESS_DEPENDS = 	${PKGNAME}::${BUILD_PKGPATH}
d60 1
d67 1
a67 1
# Avoid conflit with gnupg-1.x
@


1.5
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/09/07 09:46:02 pea Exp $
d36 1
a36 1
USE_GROFF =	Yes
d40 2
a41 1
LIB_DEPENDS+=		ldap.>=8::databases/openldap
d46 8
a53 7
LIB_DEPENDS = 		usb::devel/libusb \
			bz2::archivers/bzip2 \
			assuan::security/libassuan \
			gcrypt::security/libgcrypt \
			ksba.::security/libksba \
			curl.>=6::net/curl \
			pth.::devel/pth
@


1.4
log
@Update to 2.0.16
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/08/21 11:03:21 jasper Exp $
d36 1
@


1.3
log
@Security fix for CVE-2010-2547:
Patch from upstream CVS

ok pea@@ (update for gnupg2 coming soon anyway)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/07/08 22:03:45 ajacoutot Exp $
d5 1
a5 2
DISTNAME = 	gnupg-2.0.15
REVISION =	0
@


1.2
log
@Remove uneeded V variable.
No pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/07/08 16:57:54 pea Exp $
d6 1
@


1.2.2.1
log
@Security fix for CVE-2010-2547:
Patch from upstream CVS

ok pea@@ william@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/07/08 22:03:45 ajacoutot Exp $
a5 1
REVISION =	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 2
V = 		2.0.15
DISTNAME = 	gnupg-${V}
@


1.1.1.1
log
@Import gnupg2
GnuPG 2.0 is the new modularized version of GnuPG supporting OpenPGP 
and S/MIME

With tweaks from ajacoutot@@ and jasper@@
ok aja@@, jasper@@

@
text
@@
