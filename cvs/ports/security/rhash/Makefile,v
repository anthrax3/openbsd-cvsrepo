head	1.2;
access;
symbols
	dcoppa_20170809:1.1.1.1 dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.08.12.18.05.35;	author dcoppa;	state Exp;
branches;
next	1.1;
commitid	r133Lp9A2HMev9Do;

1.1
date	2017.08.08.22.04.57;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;
commitid	7CHmkcW4fX8Nygep;

1.1.1.1
date	2017.08.08.22.04.57;	author dcoppa;	state Exp;
branches;
next	;
commitid	7CHmkcW4fX8Nygep;


desc
@@


1.2
log
@
Fix tests script so it doesn't need ggrep anymore
@
text
@# $OpenBSD: Makefile,v 1.1.1.1 2017/08/08 22:04:57 dcoppa Exp $

COMMENT =	utility and library for computing hash sums

DISTNAME =	rhash-1.3.4-src

PKGNAME =	${DISTNAME:S/-src$//}

SHARED_LIBS =	rhash 0.0

CATEGORIES =	security

HOMEPAGE =	http://rhash.anz.ru/

MAINTAINER =	David Coppa <dcoppa@@openbsd.org>

# MIT
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB +=	c

MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=rhash/}

MAKE_FLAGS =	SONAME="librhash.so.${LIBrhash_VERSION}"

FAKE_FLAGS =	PREFIX=${PREFIX} \
		INSTALL_DATA="${INSTALL_DATA}" \
		INSTALL_PROGRAM="${INSTALL_PROGRAM}" \
		INSTALL_SHARED="${INSTALL_DATA}" \
		MANDIR=${PREFIX}/man \
		SONAME="librhash.so.${LIBrhash_VERSION}"

WRKDIST =	${WRKDIR}/${PKGNAME}

ALL_TARGET =	build-shared

INSTALL_TARGET =install-shared

pre-configure:
	${SUBST_CMD} ${WRKSRC}/common_func.h \
		${WRKSRC}/parse_cmdline.c

do-test:
	cd ${WRKSRC}/tests && env \
	LD_PRELOAD=${WRKBUILD}/librhash/librhash.so.${LIBrhash_VERSION} \
		./test_rhash.sh --full

.include <bsd.port.mk>
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a23 2
TEST_DEPENDS =	sysutils/ggrep

d44 1
a44 1
	cd ${WRKSRC}/tests && \
d46 1
a46 1
		${SHELL} ./test_rhash.sh --full
@


1.1.1.1
log
@
Import RHash, a console utility and library for computing and
verifying hash sums of files.
New dependency for an upcoming update to CMake-3.9.

Suggestion and testing, rsadowski@@
OK rsadowski@@

@
text
@@
