head	1.2;
access;
symbols
	dcoppa_20170809:1.1.1.1 dcoppa:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2017.08.14.12.20.57;	author dcoppa;	state Exp;
branches;
next	1.1;
commitid	OjWRLDXo4pQ0dp5g;

1.1
date	2017.08.08.22.04.57;	author dcoppa;	state Exp;
branches
	1.1.1.1;
next	;
commitid	7CHmkcW4fX8Nygep;

1.1.1.1
date	2017.08.08.22.04.57;	author dcoppa;	state Exp;
branches;
next	;
commitid	7CHmkcW4fX8Nygep;


desc
@@


1.2
log
@
Update to rhash-1.3.5
@
text
@$OpenBSD: patch-Makefile,v 1.1.1.1 2017/08/08 22:04:57 dcoppa Exp $

Index: Makefile
--- Makefile.orig
+++ Makefile
@@@@ -6,10 +6,10 @@@@ VERSION = 1.3.5
 PREFIX  ?= /usr/local
 CC      ?= gcc
 # using OPTFLAGS/OPTLDFLAGS for compatibilty with old scripts using this makefile
-OPTFLAGS = -O2 -DNDEBUG -fomit-frame-pointer -ffunction-sections -fdata-sections
+OPTFLAGS = -DNDEBUG -fomit-frame-pointer -ffunction-sections -fdata-sections
 OPTLDFLAGS =
-CFLAGS = $(OPTFLAGS)
-LDFLAGS = $(OPTLDFLAGS)
+CFLAGS += $(OPTFLAGS)
+LDFLAGS += $(OPTLDFLAGS)
 ADDCFLAGS =
 ADDLDFLAGS =
 ALLCFLAGS = -pipe $(CFLAGS) $(ADDCFLAGS) \
@@@@ -71,7 +71,7 @@@@ lib-shared: $(SHAREDLIB)
 lib-static: $(LIBRHASH)
 
 install: build-install-binary install-data install-symlinks
-install-shared: build-install-shared-binary install-data install-symlinks
+install-shared: build-install-shared-binary install-lib-static install-lib-shared install-data install-symlinks
 install-data: install-man install-conf
 uninstall: uninstall-binary uninstall-data uninstall-symlinks uninstall-lib
 
@@@@ -112,8 +112,8 @@@@ install-man:
 	$(INSTALL_DATA) dist/rhash.1 $(DESTDIR)$(MANDIR)/man1/rhash.1
 
 install-conf:
-	$(INSTALL) -d $(DESTDIR)/etc
-	tr -d \\r < dist/rhashrc.sample > rc.tmp && $(INSTALL_DATA) rc.tmp $(DESTDIR)/etc/rhashrc
+	$(INSTALL) -d $(DESTDIR)$(PREFIX)/share/examples/$(PROGNAME)
+	tr -d \\r < dist/rhashrc.sample > rc.tmp && $(INSTALL_DATA) rc.tmp $(DESTDIR)$(PREFIX)/share/examples/$(PROGNAME)/rhashrc
 	rm -f rc.tmp
 
 # dependencies should be properly set, otherwise 'make -j<n>' can fail
@@@@ -178,7 +178,7 @@@@ $(TARGET): $(OBJECTS) $(LIBRHASH)
 	$(CC) $(OBJECTS) -o $@@ $(ALLLDFLAGS)
 
 $(SHARED_TRG): $(OBJECTS) $(SHAREDLIB)
-	$(CC) $(OBJECTS) $(SHRDLFLAGS) -o $(SHARED_TRG) $(SHAREDLIB)
+	$(CC) $(OBJECTS) $(SHRDLFLAGS) -o $(SHARED_TRG) $(LDLIBRHASH)
 
 # NOTE: dependences were generated by 'gcc -Ilibrhash -MM *.c'
 # we are using plain old makefile style to support BSD make
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d6 1
a6 1
@@@@ -6,10 +6,10 @@@@ VERSION = 1.3.4
d23 3
a25 3
 install: all install-binary install-data install-symlinks
-install-shared: $(SHARED_TRG) install-shared-binary install-data install-symlinks
+install-shared: $(SHARED_TRG) install-shared-binary install-lib-static install-lib-shared install-data install-symlinks
d27 1
a27 1
 uninstall: uninstall-binary uninstall-data uninstall-symlinks
d29 1
a29 1
@@@@ -105,8 +105,8 @@@@ install-man:
d40 1
a40 1
@@@@ -168,7 +168,7 @@@@ $(TARGET): $(OBJECTS) $(LIBRHASH)
@


1.1.1.1
log
@
Import RHash, a console utility and library for computing and
verifying hash sums of files.
New dependency for an upcoming update to CMake-3.9.

Suggestion and testing, rsadowski@@
OK rsadowski@@

@
text
@@
