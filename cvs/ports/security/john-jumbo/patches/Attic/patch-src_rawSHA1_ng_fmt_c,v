head	1.3;
access;
symbols
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	sthen_20140603:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2015.01.16.15.40.01;	author sthen;	state dead;
branches;
next	1.2;
commitid	yFYbyXzN76e4lBaf;

1.2
date	2014.06.04.13.52.40;	author sthen;	state Exp;
branches;
next	1.1;
commitid	kogJJ4nFDE6CRWhE;

1.1
date	2014.06.03.14.27.54;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	vLwIvrWpHZmmAlK2;

1.1.1.1
date	2014.06.03.14.27.54;	author sthen;	state Exp;
branches;
next	;
commitid	vLwIvrWpHZmmAlK2;


desc
@@


1.3
log
@update to john-jumbo 1.80-1
@
text
@$OpenBSD: patch-src_rawSHA1_ng_fmt_c,v 1.2 2014/06/04 13:52:40 sthen Exp $

revert https://github.com/magnumripper/JohnTheRipper/commit/ef2b184a571851ecf0ddc509ae387d54209eaf6b; segfaults in tests

--- src/rawSHA1_ng_fmt.c.orig.port	Wed Jun  4 08:49:27 2014
+++ src/rawSHA1_ng_fmt.c	Wed Jun  4 11:10:28 2014
@@@@ -406,7 +406,7 @@@@ static void sha1_fmt_set_key(char *key, int index)
 
 static char * sha1_fmt_get_key(int index)
 {
-    static uint32_t key[5];
+    static uint32_t key[4];
 
     // This function is not hot, we can do this slowly. First, restore
     // endianness.
@@@@ -415,8 +415,8 @@@@ static char * sha1_fmt_get_key(int index)
     key[2] = __builtin_bswap32(M[index][2]);
     key[3] = __builtin_bswap32(M[index][3]);
 
-    // Skip backwards until we hit the trailing bit, then remove it.
-    memset(strrchr((char *)(key), 0x80), 0x00, 1);
+    // Skip backwards until we hit the trailing bit
+    memset(memrchr(key, 0x80, sizeof key), 0x00, 1);
 
     return (char *) key;
 }
@


1.2
log
@switch to a snapshot version
@
text
@d1 1
a1 1
$OpenBSD: patch-src_rawSHA1_ng_fmt_c,v 1.1.1.1 2014/06/03 14:27:54 sthen Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- src/rawSHA1_ng_fmt.c.orig	Tue Jun  3 13:34:15 2014
+++ src/rawSHA1_ng_fmt.c	Tue Jun  3 14:06:52 2014
@@@@ -379,7 +379,7 @@@@ static void sha1_fmt_set_key(char *key, int index)
d16 1
a16 1
@@@@ -388,8 +388,8 @@@@ static char * sha1_fmt_get_key(int index)
@


1.1.1.1
log
@import ports/security/john-jumbo, a patched version of John the Ripper with
support for additional hashes etc. ok benoit@@, plus I made a minor fix after
OK to use the gettext module.
@
text
@@
