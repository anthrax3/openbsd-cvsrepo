head	1.38;
access;
symbols
	OPENBSD_6_1:1.36.0.4
	OPENBSD_6_1_BASE:1.36
	OPENBSD_6_0:1.36.0.2
	OPENBSD_6_0_BASE:1.36
	OPENBSD_5_9:1.35.0.10
	OPENBSD_5_9_BASE:1.35
	OPENBSD_5_8:1.35.0.12
	OPENBSD_5_8_BASE:1.35
	OPENBSD_5_7:1.35.0.8
	OPENBSD_5_7_BASE:1.35
	OPENBSD_5_6:1.35.0.6
	OPENBSD_5_6_BASE:1.35
	OPENBSD_5_5:1.35.0.4
	OPENBSD_5_5_BASE:1.35
	OPENBSD_5_4:1.35.0.2
	OPENBSD_5_4_BASE:1.35
	OPENBSD_5_3:1.34.0.4
	OPENBSD_5_3_BASE:1.34
	OPENBSD_5_2:1.34.0.2
	OPENBSD_5_2_BASE:1.34
	OPENBSD_5_1_BASE:1.32
	OPENBSD_5_1:1.32.0.6
	OPENBSD_5_0:1.32.0.4
	OPENBSD_5_0_BASE:1.32
	OPENBSD_4_9:1.32.0.2
	OPENBSD_4_9_BASE:1.32
	OPENBSD_4_8:1.31.0.12
	OPENBSD_4_8_BASE:1.31
	OPENBSD_4_7:1.31.0.10
	OPENBSD_4_7_BASE:1.31
	OPENBSD_4_6:1.31.0.8
	OPENBSD_4_6_BASE:1.31
	OPENBSD_4_5:1.31.0.6
	OPENBSD_4_5_BASE:1.31
	OPENBSD_4_4:1.31.0.4
	OPENBSD_4_4_BASE:1.31
	OPENBSD_4_3:1.31.0.2
	OPENBSD_4_3_BASE:1.31
	OPENBSD_4_2:1.30.0.12
	OPENBSD_4_2_BASE:1.30
	OPENBSD_4_1:1.30.0.10
	OPENBSD_4_1_BASE:1.30
	OPENBSD_4_0:1.30.0.8
	OPENBSD_4_0_BASE:1.30
	OPENBSD_3_9:1.30.0.6
	OPENBSD_3_9_BASE:1.30
	OPENBSD_3_8:1.30.0.4
	OPENBSD_3_8_BASE:1.30
	OPENBSD_3_7:1.30.0.2
	OPENBSD_3_7_BASE:1.30
	OPENBSD_3_6:1.29.0.8
	OPENBSD_3_6_BASE:1.29
	OPENBSD_3_5:1.29.0.6
	OPENBSD_3_5_BASE:1.29
	OPENBSD_3_4:1.29.0.4
	OPENBSD_3_4_BASE:1.29
	OPENBSD_3_3:1.29.0.2
	OPENBSD_3_3_BASE:1.29
	OPENBSD_3_2:1.27.0.4
	OPENBSD_3_2_BASE:1.27
	OPENBSD_3_1:1.27.0.2
	OPENBSD_3_1_BASE:1.27
	OPENBSD_3_0:1.25.0.2
	OPENBSD_3_0_BASE:1.25
	OPENBSD_2_9_TRACKING_SWITCH:1.25
	OPENBSD_2_9:1.24.0.4
	OPENBSD_2_9_BASE:1.24
	OPENBSD_2_8:1.24.0.2
	OPENBSD_2_8_BASE:1.24
	OPENBSD_2_7:1.20.0.2
	OPENBSD_2_7_BASE:1.20
	OPENBSD_2_6:1.10.0.2
	OPENBSD_2_6_BASE:1.10
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	marc-1998-mar-19:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.38
date	2017.09.12.07.16.58;	author fcambus;	state dead;
branches;
next	1.37;
commitid	0roJZ2U1FU74Va4f;

1.37
date	2017.05.08.10.00.44;	author schwarze;	state Exp;
branches;
next	1.36;
commitid	zStO9ZhSdFKs2rAB;

1.36
date	2016.06.29.16.14.44;	author espie;	state Exp;
branches;
next	1.35;
commitid	c1yQMbJbfo0CFBcL;

1.35
date	2013.03.11.11.41.27;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2012.06.04.21.04.42;	author pascal;	state Exp;
branches;
next	1.33;

1.33
date	2012.03.17.22.42.26;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2010.10.18.21.41.47;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2007.09.15.23.30.00;	author merdely;	state Exp;
branches;
next	1.30;

1.30
date	2004.12.27.13.28.35;	author alek;	state Exp;
branches;
next	1.29;

1.29
date	2003.01.30.22.46.26;	author margarida;	state Exp;
branches;
next	1.28;

1.28
date	2002.10.28.17.35.02;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2002.03.21.21.25.51;	author espie;	state Exp;
branches
	1.27.2.1
	1.27.4.1;
next	1.26;

1.26
date	2001.10.28.13.05.49;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2001.05.06.03.46.10;	author lebel;	state Exp;
branches;
next	1.24;

1.24
date	2000.09.07.05.44.32;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2000.09.06.17.26.28;	author marc;	state Exp;
branches;
next	1.22;

1.22
date	2000.05.31.12.09.38;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2000.05.27.22.57.27;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2000.04.22.12.12.07;	author turan;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	2000.04.18.09.48.00;	author turan;	state Exp;
branches;
next	1.18;

1.18
date	2000.03.31.03.16.53;	author kevlo;	state Exp;
branches;
next	1.17;

1.17
date	2000.03.24.23.28.33;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.05.18.30.42;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2000.02.11.00.37.37;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	99.12.13.03.58.18;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	99.12.12.22.01.15;	author dugsong;	state Exp;
branches;
next	1.12;

1.12
date	99.12.09.02.50.41;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.11.24.03.23.05;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.07.26.23.19.54;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.06.02.16.27.26;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.04.02.19.44.01;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	99.04.02.13.31.03;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	98.12.16.20.29.54;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	98.08.28.23.00.45;	author deraadt;	state Exp;
branches;
next	1.4;

1.4
date	98.04.12.21.41.01;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.04.03.02.31.40;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.03.23.01.40.06;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.03.20.04.05.10;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.03.20.04.05.10;	author marc;	state Exp;
branches;
next	;

1.20.2.1
date	2000.09.15.05.15.23;	author marc;	state Exp;
branches;
next	;

1.27.2.1
date	2003.01.31.01.19.38;	author margarida;	state Exp;
branches;
next	;

1.27.4.1
date	2003.01.31.01.17.22;	author margarida;	state Exp;
branches;
next	;


desc
@@


1.38
log
@Remove security/pgp.

Our pgp port is for version 2.6.3 from 1996. Nothing depends on it
anymore since we deleted mail/pgpsendmail.

We have security/pgp5 in the tree (version 5.0i).

OK bcallah@@, jca@@, giovanni@@
@
text
@# $OpenBSD: Makefile,v 1.37 2017/05/08 10:00:44 schwarze Exp $

COMMENT=	Pretty Good Privacy 2.6.3ia

DISTNAME=	pgp263is
PKGNAME=	pgp-2.6.3
REVISION=	2
CATEGORIES=	security

MASTER_SITES=	http://www.netsw.org/crypto/systems/pgp/ \
		http://ftp.unicamp.br/pub/security/tools/ \
		http://incal.net/ftp/pub/privacy/
		
PERMIT_PACKAGE_CDROM=	no commercial use
PERMIT_PACKAGE_FTP=	Yes
WANTLIB=		c

PGP_DOC_DIR=	${PREFIX}/share/doc/pgp

WRKDIST=	${WRKDIR}/src

# library and doc files to install
LIBFILES= config.txt de.hlp en.hlp es.hlp fr.hlp keys.asc \
	language.txt pgp.hlp

DOCS=	appnote.doc blurb.txt changes.doc faq.txt keyserv.doc \
	mitlicen.txt pgformat.doc pgp262i.dif pgp263i.dif \
	pgp_vms.hlp pgpdoc1.txt pgpdoc2.txt politic.doc przon26i.asc

# 2nd level extract required
post-extract:
	@@if ! (cd ${WRKDIR} && tar -xf pgp263ii.tar); then \
	   exit 1; \
	 fi

.include <bsd.port.arch.mk>

# Before the build figure out if we are on a big endian machine or not
pre-build:
.if ${PROPERTIES:Mbe}
	echo -DHIGHFIRST >${WRKDIR}/.endian
.else
	cp /dev/null ${WRKDIR}/.endian
.endif

do-build:
	@@cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${MAKE} -f makefile all \
	  CFLAGS="${CFLAGS} -DUNIX -DPORTABLE -DMERIT -DIDEA32 \
		-DMAX_NAMELEN=255 -DPGP_DOC_DIR=\\\"${PGP_DOC_DIR}\\\" \
		`cat ${WRKDIR}/.endian`"

NO_TEST=	Yes

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pgp
	${INSTALL_DATA_DIR} ${PGP_DOC_DIR}
	${INSTALL_PROGRAM} ${WRKSRC}/pgp ${PREFIX}/bin
	${INSTALL_MAN} ${WRKDIR}/doc/pgp.1 ${PREFIX}/man/man1
	${INSTALL_DATA} ${WRKDIR}/setup.doc ${PGP_DOC_DIR}
	cd ${WRKDIR}; ${INSTALL_DATA} ${LIBFILES} ${PREFIX}/lib/pgp
	cd ${WRKDIR}/doc; ${INSTALL_DATA} ${DOCS} ${PGP_DOC_DIR}

.include <bsd.port.mk>
@


1.37
log
@mandoc(1) now supports .ta, drop USE_GROFF and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/06/29 16:14:44 espie Exp $
@


1.36
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/03/11 11:41:27 espie Exp $
d7 1
a7 1
REVISION=	1
a20 1
USE_GROFF =	Yes
@


1.35
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/06/04 21:04:42 pascal Exp $
d7 1
a7 1
REVISION=	0
@


1.34
log
@Use PROPERTIES to check for be/le.

ok jasper@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/03/17 22:42:26 naddy Exp $
a15 2
PERMIT_DISTFILES_CDROM=	no commercial use
PERMIT_DISTFILES_FTP=	Yes
d53 1
a53 1
NO_REGRESS=	Yes
@


1.33
log
@getline -> get_line
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/10/18 21:41:47 espie Exp $
d39 2
d43 5
a47 8
	@@echo "#include <machine/endian.h>" > ${WRKDIR}/.endian.c
	@@echo "BYTE_ORDER" >> ${WRKDIR}/.endian.c
	@@${CC} -E ${WRKDIR}/.endian.c > ${WRKDIR}/.endian.out
	@@if { grep -q 4321 ${WRKDIR}/.endian.out; } then \
	   echo -DHIGHFIRST > ${WRKDIR}/.endian; \
	 else \
	   cp /dev/null ${WRKDIR}/.endian; \
	 fi
@


1.32
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/09/15 23:30:00 merdely Exp $
d7 1
@


1.31
log
@Remove surrounding quotes in NO_REGRESS/COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/12/27 13:28:35 alek Exp $
d22 1
@


1.30
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2003/01/30 22:46:26 margarida Exp $
d3 1
a3 1
COMMENT=	"Pretty Good Privacy 2.6.3ia"
d13 1
a13 1
PERMIT_PACKAGE_CDROM=	"no commercial use"
d15 1
a15 1
PERMIT_DISTFILES_CDROM=	"no commercial use"
@


1.29
log
@Fix MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/10/28 17:35:02 naddy Exp $
d17 1
@


1.28
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/03/21 21:25:51 espie Exp $
d9 4
a12 4
MASTER_SITES=	http://the.wiretapped.net/security/cryptography/pgp/2.x/src/ \
		ftp://ftp.ifi.uio.no/pub/pgp/2.x/src/ \
		ftp://ftp.dk.pgpi.com/mirrors/ftp.ifi.uio.no/pub/pgp/2.x/src/

@


1.27
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/10/28 13:05:49 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.515
d52 2
@


1.27.2.1
log
@Fix MASTER_SITES

brad@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/03/21 21:25:51 espie Exp $
d9 3
a11 4

MASTER_SITES=	http://www.netsw.org/crypto/systems/pgp/ \
		http://ftp.unicamp.br/pub/security/tools/ \
		http://incal.net/ftp/pub/privacy/
@


1.27.4.1
log
@Fix MASTER_SITES

brad@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2002/03/21 21:25:51 espie Exp $
d9 3
a11 4

MASTER_SITES=	http://www.netsw.org/crypto/systems/pgp/ \
		http://ftp.unicamp.br/pub/security/tools/ \
		http://incal.net/ftp/pub/privacy/
@


1.26
log
@Zap default MAINTAINER from Makefile.
Especially now that the default line is more verbose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/05/06 03:46:10 lebel Exp $
d8 1
a8 1
NEED_VERSION=	1.402
@


1.25
log
@security: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/09/07 05:44:32 brad Exp $
a11 2

MAINTAINER=	ports@@openbsd.org
@


1.24
log
@- remove a bunch of unused variables
- remove unnecessary patch (patch-aa)
- use better filename for patch
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.23 2000/09/06 17:26:28 marc Exp $
d8 1
a8 1
NEED_VERSION=	1.320
@


1.23
log
@
Remove intl and usa flavors.  There is now a single world wide
version (RSA Security Inc. placed its public key encryption algorithm
into the public domain, today).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/05/31 12:09:38 espie Exp $
d3 1
a3 1
DISTNAME=       pgp263is
d6 1
a6 1
NEED_VERSION=	 1.230
d18 2
a19 1
IS_INTERACTIVE=	Yes
a21 12
FAKE=		Yes

FLAVORS=	usa intl

# common C flags
CFLAGS+=-DUNIX -DPORTABLE -DMERIT -DIDEA32 -DMAX_NAMELEN=255 \
	-DPGP_DOC_DIR=\\\"${PGP_DOC_DIR}\\\"

RSAOBJS= rsaglue1.o

PGP_DOC_DIR=	${PREFIX}/share/doc/pgp

d26 1
a26 1
DOCFILES= appnote.doc blurb.txt changes.doc faq.txt keyserv.doc \
d48 4
a51 3
	@@cd ${WRKSRC} && env -i ${MAKE_ENV} make -f makefile all \
	  RSAOBJS="${RSAOBJS}" RSALIBS="${RSALIBS}" \
	  CFLAGS="${CFLAGS} `cat ${WRKDIR}/.endian`" 
d54 2
a55 2
	@@${INSTALL_DATA_DIR} ${PREFIX}/lib/pgp
	@@${INSTALL_DATA_DIR} ${PGP_DOC_DIR}
a57 3
.for libfile in ${LIBFILES}
	${INSTALL_DATA} ${WRKDIR}/${libfile} ${PREFIX}/lib/pgp
.endfor
d59 2
a60 3
.for docfile in ${DOCFILES}
	${INSTALL_DATA} ${WRKDIR}/doc/${docfile} ${PGP_DOC_DIR}
.endfor
@


1.22
log
@Oops 2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/05/27 22:57:27 espie Exp $
a24 28
.if defined(USA_RESIDENT)
.if ${USA_RESIDENT:L} == "yes"
FLAVOR=usa
.elif ${USA_RESIDENT:L} == "no"
FLAVOR=intl
.endif
.endif

# No default flavor, error.
FLAVOR?=
.if empty(FLAVOR)
pre-fetch pre-extract:
	@@echo ""
	@@echo "The variable USA_RESIDENT must be set to either Yes or No"
	@@echo "in order to build this package.  USA residents that are"
	@@echo "not licensees of the RSA algorithm MUST set this variable"
	@@echo "to Yes.  Users outside the USA MUST set this variable to"
	@@echo "No.  Licensees may choose -- No is faster."
	@@echo ""
	@@echo "RSAREF2 will be automatically obtained and used to generate"
	@@echo "this program when given the command \"make USA_RESIDENT=Yes\""
	@@echo ""
	@@echo "The new port flavor system also allows you to use "
	@@echo "FLAVOR=usa or FLAVOR=intl"
	@@false
.endif


a28 7
.if ${FLAVOR:L} == "usa"
LIB_DEPENDS=	rsaref.2::security/rsaref
RSAOBJS= rsaglue2.o
RSAINCDIR= -I${LOCALBASE}/include
RSALIBS= -L${LOCALBASE}/lib -lrsaref
CFLAGS+= -DUSA ${RSAINCDIR}
.else
a29 1
.endif
@


1.21
log
@Backward flavors.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/04/22 12:12:07 turan Exp $
d36 1
a36 1
.BEGIN:
@


1.20
log
@flavor these ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/04/18 09:48:00 turan Exp $
d25 5
a29 5
.if defined(FLAVOR)
.if ${FLAVOR} == "usa"
USA_RESIDENT=	yes
.elif ${FLAVOR} == "intl"
USA_RESIDENT=	no
d33 20
d57 1
a57 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
a76 17
fetch-depends:
.if !defined(NO_WARNINGS)
.if !defined(USA_RESIDENT) || ${USA_RESIDENT:U} != YES && ${USA_RESIDENT:U} != NO
	@@echo ""
	@@echo "You must set variable USA_RESIDENT to YES if you are a USA"
	@@echo "resident or NO otherwise.  USA residents must obtain the"
	@@echo "RSAREF2 library to generate this program.  \(RSA Inc. holds"
	@@echo "a patent on RSA in the USA - using RSA implementations"
	@@echo "other than RSAREF in the USA will violate the US patent\)."
	@@echo ""
	@@echo "RSAREF2 will be automatically obtained and used to generate"
	@@echo "this program when given the command \"make USA_RESIDENT=yes\""
	@@echo ""
	@@false
.endif
.endif

d95 1
a95 1
	@@(cd ${WRKSRC} && env ${MAKE_ENV} make -f makefile all \
d97 1
a97 1
	  CFLAGS="${CFLAGS} `cat ${WRKDIR}/.endian`" )
d100 2
a101 2
	@@mkdir -p ${PREFIX}/lib/pgp
	@@mkdir -p ${PGP_DOC_DIR}
@


1.20.2.1
log
@bring security as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/05/31 12:09:38 espie Exp $
d25 5
a29 5
.if defined(USA_RESIDENT)
.if ${USA_RESIDENT:L} == "yes"
FLAVOR=usa
.elif ${USA_RESIDENT:L} == "no"
FLAVOR=intl
a32 20
# No default flavor, error.
FLAVOR?=
.if empty(FLAVOR)
pre-fetch pre-extract:
	@@echo ""
	@@echo "The variable USA_RESIDENT must be set to either Yes or No"
	@@echo "in order to build this package.  USA residents that are"
	@@echo "not licensees of the RSA algorithm MUST set this variable"
	@@echo "to Yes.  Users outside the USA MUST set this variable to"
	@@echo "No.  Licensees may choose -- No is faster."
	@@echo ""
	@@echo "RSAREF2 will be automatically obtained and used to generate"
	@@echo "this program when given the command \"make USA_RESIDENT=Yes\""
	@@echo ""
	@@echo "The new port flavor system also allows you to use "
	@@echo "FLAVOR=usa or FLAVOR=intl"
	@@false
.endif


d37 1
a37 1
.if ${FLAVOR:L} == "usa"
d57 17
d92 1
a92 1
	@@cd ${WRKSRC} && env -i ${MAKE_ENV} make -f makefile all \
d94 1
a94 1
	  CFLAGS="${CFLAGS} `cat ${WRKDIR}/.endian`" 
d97 2
a98 2
	@@${INSTALL_DATA_DIR} ${PREFIX}/lib/pgp
	@@${INSTALL_DATA_DIR} ${PGP_DOC_DIR}
@


1.19
log
@license
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/03/31 03:16:53 kevlo Exp $
d22 10
@


1.18
log
@Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/03/24 23:28:33 espie Exp $
d13 4
a16 2
NO_CDROM=	"CRYPTO: Third party crypto not allowed."
RESTRICTED=	"Crypto; export-controlled"
@


1.17
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/03/05 18:30:42 espie Exp $
d18 2
@


1.16
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/02/11 00:37:37 espie Exp $
d6 1
a6 1
NEED_VERSION=	1.223
d24 1
a24 1
LIB_DEPENDS=	rsaref.2:security/rsaref
@


1.15
log
@Use WRKDIST where appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 1999/12/13 03:58:18 brad Exp $
d6 1
a9 1
NEED_VERSION=	1.191
d16 1
a16 1
IS_INTERACTIVE=	yes
d24 1
a24 1
LIB_DEPENDS=	rsaref.2:${PORTSDIR}/security/rsaref
@


1.14
log
@- remove now unnecessary PATCH_LIST tag
- BUILD_DEPENDS -> LIB_DEPENDS, rsaref makes a shared library
- add patch so that pgp respects CC
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/12/12 22:01:15 dugsong Exp $
d9 1
d17 1
a17 1
WRKSRC=	${WRKDIR}/src
@


1.13
log
@use rsaref port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/12/09 02:50:41 brad Exp $
a9 2
PATCH_LIST=	patch-doc

d23 1
a23 1
BUILD_DEPENDS=	${PREFIX}/lib/librsaref.a:${PORTSDIR}/security/rsaref
d25 2
a26 2
RSAINCDIR= -I${PREFIX}/include
RSALIBS= ${PREFIX}/lib/librsaref.a
d77 2
a78 3
	@@(cd ${WRKSRC} && \
	  env ${MAKE_ENV} make -f makefile all \
	  RSAOBJS="${RSAOBJS}" RSAINCDIR="${RSAINCDIR}" RSALIBS="${RSALIBS}" \
@


1.12
log
@- add patch for RSAREF buffer overflow
- remove deprecated variables
- cleanup Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/11/24 03:23:05 brad Exp $
a8 3
MASTER_SITES0=	http://the.wiretapped.net/security/cryptography/libs/rsa/ \
		ftp://idea.dsi.unimi.it/pub/security/crypt/math/ \
		ftp://ftp.it.net.au/mirrors/crypto/misc
d25 1
a25 2
DISTFILES= ${DISTNAME}.tar.gz rsaref2.tar.gz:0
PATCH_LIST+= patch-rsaref2 patch-rsaref2-2
d27 2
a28 4
RSADIR=	../rsaref2
RSAINCDIR= -I$(RSADIR)/source -I$(RSADIR)/test
RSALIBDIR= $(RSADIR)/install/unix
RSALIBS= $(RSALIBDIR)/rsaref.a
a78 4
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
	@@(cd ${WRKDIR}/rsaref2/install/unix && \
	  env ${MAKE_ENV} make -f makefile rsaref.a)
.endif
d81 1
a81 2
	  RSAOBJS="${RSAOBJS}" RSADIR="${RSADIR}" RSAINCDIR="${RSAINCDIR}" \
	  RSALIBDIR="${RSALIBDIR}" RSALIBS="${RSALIBS}" \
@


1.11
log
@- make use of multiple master sites
- add another master site for PGP and 2 more for RSAREF
- make use of :U variable modifier
- cleanup Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/07/26 23:19:54 brad Exp $
d13 1
a13 1
NEED_VERSION=	1.121
a22 4
.if defined(NO_WARNINGS) || (defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES)
DISTFILES= ${DISTNAME}.tar.gz rsaref2.tar.gz:0
.endif

d28 2
d40 1
a40 7
PATCH_LIST= patch-doc
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
PATCH_LIST+= patch-rsaref2
.else
.endif

PGP_DOC_DIR=${PREFIX}/share/doc/pgp
d53 11
a63 11
	@@${ECHO}
	@@${ECHO} You must set variable USA_RESIDENT to YES if you are a USA
	@@${ECHO} resident or NO otherwise.  USA residents must obtain the
	@@${ECHO} RSAREF2 library to generate this program.  \(RSA Inc. holds
	@@${ECHO} a patent on RSA in the USA - using RSA implementations
	@@${ECHO} other than RSAREF in the USA will violate the US patent\).
	@@${ECHO} ""
	@@${ECHO} RSAREF2 will be automatically obtained and used to generate
	@@${ECHO} this program when given the command \"make USA_RESIDENT=YES\"
	@@${ECHO} ""
	@@${FALSE}
d69 1
a69 1
	@@if ! (cd ${WRKDIR} && ${TAR} -xf pgp263ii.tar); then \
d75 2
a76 2
	@@${ECHO} "#include <machine/endian.h>" > ${WRKDIR}/.endian.c
	@@${ECHO} "BYTE_ORDER" >> ${WRKDIR}/.endian.c
d78 2
a79 2
	@@if { ${GREP} -q 4321 ${WRKDIR}/.endian.out; } then \
	   ${ECHO} -DHIGHFIRST > ${WRKDIR}/.endian; \
d81 1
a81 1
	   ${CP} /dev/null ${WRKDIR}/.endian; \
d87 1
a87 1
	  ${SETENV} ${MAKE_ENV} ${MAKE} -f makefile rsaref.a)
d90 1
a90 1
	  ${SETENV} ${MAKE_ENV} ${MAKE} -f makefile all \
d93 1
a93 1
	  CFLAGS="${CFLAGS} `${CAT} ${WRKDIR}/.endian`" )
d96 4
a99 3
	@@${INSTALL_PROGRAM} ${WRKSRC}/pgp ${PREFIX}/bin
	@@${INSTALL_MAN} ${WRKDIR}/doc/pgp.1 ${PREFIX}/man/man1
	@@${MKDIR} ${PREFIX}/lib/pgp
d101 1
a101 1
	@@${INSTALL_DATA} ${WRKDIR}/${libfile} ${PREFIX}/lib/pgp
d103 1
a103 2
	@@${MKDIR} ${PGP_DOC_DIR}
	@@${INSTALL_DATA} ${WRKDIR}/setup.doc ${PGP_DOC_DIR}
d105 1
a105 1
	@@${INSTALL_DATA} ${WRKDIR}/doc/${docfile} ${PGP_DOC_DIR}
@


1.10
log
@respect CFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/06/02 16:27:26 brad Exp $
d6 2
a7 1
MASTER_SITES=	ftp://ftp.ifi.uio.no/pub/pgp/2.x/src/ \
d9 3
d13 1
a13 1
NEED_VERSION=	1.92
d19 1
d21 20
a40 1
WRKSRC=		${WRKDIR}/src
d42 4
a45 7
# Need to add rsaref for US residents
.if defined(NO_WARNINGS) || (defined(USA_RESIDENT) && ${USA_RESIDENT} == YES)
MASTER_SITES= ftp://ftp.ifi.uio.no/pub/pgp/2.x/src/ \
	ftp://ftp.dk.pgpi.com/mirrors/ftp.ifi.uio.no/pub/pgp/2.x/src/ \
	ftp://nic.funet.fi/pub/crypt/mirrors/ftp.dsi.unimi.it/applied-crypto/ \
	ftp://idea.dsi.unimi.it/pub/security/crypt/math/
DISTFILES= ${DISTNAME}.tar.gz rsaref2.tar.gz
d48 10
d60 1
a60 1
.if !defined(USA_RESIDENT) || ${USA_RESIDENT} != YES && ${USA_RESIDENT} != NO
a80 23
# common C flags
CFLAGS+=-DUNIX -DPORTABLE -DMERIT -DIDEA32 -DMAX_NAMELEN=255 \
	-DPGP_DOC_DIR=\\\"${PGP_DOC_DIR}\\\"

# RSAREF parameters
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
RSAOBJS= rsaglue2.o
RSADIR=	../rsaref2
RSAINCDIR= -I$(RSADIR)/source -I$(RSADIR)/test
RSALIBDIR= $(RSADIR)/install/unix
RSALIBS= $(RSALIBDIR)/rsaref.a
CFLAGS+= -DUSA ${RSAINCDIR}
.else
RSAOBJS= rsaglue1.o
.endif

# RSAREF2 doesn't work as is when sizeof( long) != 4 -- fix it
PATCH_LIST= patch-doc
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
PATCH_LIST+= patch-rsaref2
.else
.endif

a91 2
PGP_DOC_DIR=${PREFIX}/share/doc/pgp
# Build rsaref (if USA) then pgp
d93 1
a93 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
a102 10

# library and doc files to install
LIBFILES= config.txt de.hlp en.hlp es.hlp fr.hlp keys.asc \
	language.txt pgp.hlp

DOCFILES= appnote.doc blurb.txt changes.doc faq.txt keyserv.doc \
	mitlicen.txt pgformat.doc pgp262i.dif pgp263i.dif \
	pgp_vms.hlp pgpdoc1.txt pgpdoc2.txt politic.doc przon26i.asc

# install pgp and related doc
d106 1
a106 1
	@@${MKDIR} -p ${PREFIX}/lib/pgp
d110 1
a110 1
	@@${MKDIR} -p ${PGP_DOC_DIR}
@


1.9
log
@fix port to work with new EXTRACT_* variable defaults
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/04/02 19:44:01 espie Exp $
d51 1
a51 1
CFLAGS=	-O2 -DUNIX -DPORTABLE -DMERIT -DIDEA32 -DMAX_NAMELEN=255 \
@


1.8
log
@Oops... last commit in a hurry, I shouldn't move stuff around without
checking.
@
text
@d1 1
a1 6
# OpenBSD makefile for:	pgp
# Version required:	
# Date created:		19 Mar 1998
# Whom:			marc@@OpenBSD.ORG
#
# $OpenBSD: Makefile,v 1.7 1999/04/02 13:31:03 espie Exp $
a2 2
# for patch-list
NEED_VERSION=1.52
a5 2
NO_CDROM=	"CRYPTO: Third party crypto not allowed."

d9 2
d13 1
d15 1
a15 1
IS_INTERACTIVE=	YES
a18 1
#
d20 1
a20 2
MASTER_SITES=	\
	ftp://ftp.ifi.uio.no/pub/pgp/2.x/src/ \
d24 1
a24 3
DISTFILES=	\
	${DISTNAME}${EXTRACT_SUFX} \
	rsaref2.tar.gz
d27 1
a28 1
fetch-depends:
a44 1
#
d46 1
a46 1
	@@if ! ( cd ${WRKDIR} && ${EXTRACT_CMD} -xf pgp263ii.tar ); then \
d51 2
a52 3
#
CFLAGS=		-O2 -DUNIX -DPORTABLE -DMERIT -DIDEA32 -DMAX_NAMELEN=255 \
-DPGP_DOC_DIR=\\\"${PGP_DOC_DIR}\\\"
a54 1
#
d56 6
a61 6
RSAOBJS=	rsaglue2.o
RSADIR=		../rsaref2
RSAINCDIR=	-I$(RSADIR)/source -I$(RSADIR)/test
RSALIBDIR=	$(RSADIR)/install/unix
RSALIBS=	$(RSALIBDIR)/rsaref.a
CFLAGS+=	-DUSA ${RSAINCDIR}
d63 1
a63 1
RSAOBJS=	rsaglue1.o
d67 1
a67 2
#
PATCH_LIST=patch-doc
d69 1
a69 1
PATCH_LIST+=patch-rsaref2
a73 1
#
d75 2
a76 2
	@@echo "#include <machine/endian.h>" > ${WRKDIR}/.endian.c
	@@echo "BYTE_ORDER" >> ${WRKDIR}/.endian.c
d78 2
a79 2
	@@if { grep -q 4321 ${WRKDIR}/.endian.out; } then \
	   echo -DHIGHFIRST > ${WRKDIR}/.endian; \
a85 1
#
d95 1
a95 1
	  CFLAGS="${CFLAGS} `cat ${WRKDIR}/.endian`" )
d99 6
a104 7
#
LIBFILES=	config.txt de.hlp en.hlp es.hlp fr.hlp keys.asc \
		language.txt pgp.hlp

DOCFILES=	appnote.doc blurb.txt changes.doc faq.txt keyserv.doc \
		mitlicen.txt pgformat.doc pgp262i.dif pgp263i.dif \
		pgp_vms.hlp pgpdoc1.txt pgpdoc2.txt politic.doc przon26i.asc
a106 1
#
a120 1

@


1.7
log
@- remove marc shennanigan's now that PATCH_LIST works, this helps
having ports read-only,
- help pgp find its own doc files
- had defined(USA_RESIDENT) where needed so that we no longer get
confusing syntax errors if undefined.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.6 1998/12/16 20:29:54 marc Exp $
d64 1
a64 1
-DPGP_DOC_DIR=\"${PGP_DOC_DIR}\"
@


1.6
log
@guard build instructions with NO_WARNINGS flag
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.5 1998/08/28 23:00:45 deraadt Exp $
d8 2
d63 2
a64 1
CFLAGS=		-O2 -DUNIX -DPORTABLE -DMERIT -DIDEA32 -DMAX_NAMELEN=255
d81 1
a81 1
pre-patch:
d83 2
a84 10
	@@${MKDIR} ${PATCHDIR}
	@@${CP} ${FILESDIR}/patch-rsaref2 ${PATCHDIR}
.endif

# We don't need the rsaref patch any more
#
post-patch:
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
	@@${RM} ${PATCHDIR}/patch-rsaref2
	@@${RMDIR} ${PATCHDIR}
d99 1
d132 2
a133 2
	@@${MKDIR} -p ${PREFIX}/share/doc/pgp
	@@${INSTALL_DATA} ${WRKDIR}/setup.doc ${PREFIX}/share/doc/pgp
d135 1
a135 1
	@@${INSTALL_DATA} ${WRKDIR}/doc/${docfile} ${PREFIX}/share/doc/pgp
@


1.5
log
@RSA patent is USA only
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 1998/04/12 21:41:01 marc Exp $
d24 1
a24 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
d35 1
d49 1
@


1.4
log
@update NO_CDROM reasons in Makefiles
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1998/04/03 02:31:40 marc Exp $
d41 2
a42 3
	@@${ECHO} a patent on RSA and public key cypto in general - using RSA
	@@${ECHO} implementations other than RSAREF will violate the US patent
	@@${ECHO} law\).
@


1.3
log
@Fix rsaref so it works when sizeof( long ) != 4
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1998/03/23 01:40:06 marc Exp $
d11 2
@


1.2
log
@fix big/little endian test
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1998/03/20 04:05:10 marc Exp $
d71 16
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.14 1998/02/23 19:50:15 don Exp $
d76 4
a79 1
	@@if { grep -q 4321 /usr/include/machine/endian.h; } then \
@


1.1.1.1
log
@pgp 2.6.3ia (international) and 2.6.3a (us)
@
text
@@
