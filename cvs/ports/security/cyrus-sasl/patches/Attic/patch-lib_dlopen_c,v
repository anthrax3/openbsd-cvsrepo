head	1.2;
access;
symbols
	OPENBSD_3_5:1.1.0.8
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.6
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.04.06.12.12.05;	author jakob;	state dead;
branches;
next	1.1;

1.1
date	2002.07.07.17.12.48;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.2
log
@kill unused cyrus-sasl v1 port
@
text
@$OpenBSD: patch-lib_dlopen_c,v 1.1 2002/07/07 17:12:48 pvalchev Exp $
--- lib/dlopen.c.orig	Sat Jul  6 13:21:05 2002
+++ lib/dlopen.c	Sat Jul  6 13:22:13 2002
@@@@ -158,7 +158,7 @@@@ int _sasl_get_plugin(const char *file,
     int flag;
     void *library;
     void *entry_point;
-#if __OpenBSD__
+#if defined(__OpenBSD__) && !defined(__ELF__)
     char adj_entryname[1024];
 #else
 #define adj_entryname entryname
@@@@ -179,7 +179,7 @@@@ int _sasl_get_plugin(const char *file,
 	return SASL_FAIL;
     }
 
-#if __OpenBSD__
+#if defined(__OpenBSD__) && !defined(__ELF__)
     snprintf(adj_entryname, sizeof adj_entryname, "_%s", entryname);
 #endif
 
@


1.1
log
@Do not prepend "_" to the symbol name for dlsym() on ELF architectures.
Fixes plugins loading; tested by swelter@@mus.ch
Bump PKGNAME for this change
@
text
@d1 1
a1 1
$OpenBSD$
@

