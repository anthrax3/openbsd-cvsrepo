head	1.137;
access;
symbols
	OPENBSD_6_1:1.132.0.2
	OPENBSD_6_1_BASE:1.132
	OPENBSD_6_0:1.124.0.2
	OPENBSD_6_0_BASE:1.124
	OPENBSD_5_9:1.117.0.2
	OPENBSD_5_9_BASE:1.117
	OPENBSD_5_8:1.111.0.4
	OPENBSD_5_8_BASE:1.111
	OPENBSD_5_7:1.108.0.2
	OPENBSD_5_7_BASE:1.108
	OPENBSD_5_6:1.101.0.2
	OPENBSD_5_6_BASE:1.101
	OPENBSD_5_5:1.94.0.2
	OPENBSD_5_5_BASE:1.94
	OPENBSD_5_4:1.80.0.2
	OPENBSD_5_4_BASE:1.80
	OPENBSD_5_3:1.71.0.2
	OPENBSD_5_3_BASE:1.71
	OPENBSD_5_2:1.54.0.2
	OPENBSD_5_2_BASE:1.54
	OPENBSD_5_1_BASE:1.46
	OPENBSD_5_1:1.46.0.2
	OPENBSD_5_0:1.39.0.2
	OPENBSD_5_0_BASE:1.39
	OPENBSD_4_9:1.32.0.2
	OPENBSD_4_9_BASE:1.32
	OPENBSD_4_8:1.26.0.2
	OPENBSD_4_8_BASE:1.26
	OPENBSD_4_7:1.22.0.2
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.19.0.2
	OPENBSD_4_6_BASE:1.19
	OPENBSD_4_5:1.17.0.2
	OPENBSD_4_5_BASE:1.17
	OPENBSD_4_4:1.14.0.4
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.11.0.4
	OPENBSD_4_1_BASE:1.11
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.10.0.2
	OPENBSD_3_9_BASE:1.10
	OPENBSD_3_8:1.9.0.2
	OPENBSD_3_8_BASE:1.9
	OPENBSD_3_7:1.8.0.2
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.1.1.1.0.2
	OPENBSD_3_4_BASE:1.1.1.1
	margarida_2003-04-02:1.1.1.1
	margarida:1.1.1;
locks; strict;
comment	@# @;


1.137
date	2017.06.08.07.33.37;	author ajacoutot;	state Exp;
branches;
next	1.136;
commitid	jDmYYZqHCOXWiuo6;

1.136
date	2017.05.13.09.54.48;	author espie;	state Exp;
branches;
next	1.135;
commitid	XQSaQ9WZKXEsXqYZ;

1.135
date	2017.05.13.08.54.53;	author ajacoutot;	state Exp;
branches;
next	1.134;
commitid	WCX7ji5P0oOkjWfZ;

1.134
date	2017.04.10.11.46.33;	author sthen;	state Exp;
branches;
next	1.133;
commitid	HY6VNZxjJWzKQFDV;

1.133
date	2017.04.09.09.13.37;	author ajacoutot;	state Exp;
branches;
next	1.132;
commitid	26dWgJ5v8fHSHEvW;

1.132
date	2017.03.08.08.11.48;	author ajacoutot;	state Exp;
branches
	1.132.2.1;
next	1.131;
commitid	cDyAA607Orbzlfjn;

1.131
date	2017.02.18.17.31.59;	author ajacoutot;	state Exp;
branches;
next	1.130;
commitid	zeWoJw2Fs1XJedyV;

1.130
date	2017.02.13.10.23.50;	author ajacoutot;	state Exp;
branches;
next	1.129;
commitid	1jAJK0o19ZXYXLVh;

1.129
date	2017.02.13.10.22.11;	author ajacoutot;	state Exp;
branches;
next	1.128;
commitid	xYaJoP9afjZExiuB;

1.128
date	2017.01.15.17.58.00;	author ajacoutot;	state Exp;
branches;
next	1.127;
commitid	yJroUgwU6IEmBh9r;

1.127
date	2016.12.09.11.26.56;	author ajacoutot;	state Exp;
branches;
next	1.126;
commitid	LO0kYIql1JDVULU7;

1.126
date	2016.10.10.08.15.05;	author ajacoutot;	state Exp;
branches;
next	1.125;
commitid	abTcoQr749M5clt2;

1.125
date	2016.09.09.07.24.48;	author ajacoutot;	state Exp;
branches;
next	1.124;
commitid	K1375TQe5pheJVgb;

1.124
date	2016.07.07.05.46.45;	author ajacoutot;	state Exp;
branches
	1.124.2.1;
next	1.123;
commitid	oP9SNMs5OlDPm7PI;

1.123
date	2016.06.07.08.56.09;	author ajacoutot;	state Exp;
branches;
next	1.122;
commitid	ElNXeYoRtWmgKqbr;

1.122
date	2016.05.21.06.48.14;	author ajacoutot;	state Exp;
branches;
next	1.121;
commitid	GPB5zozKLP64kfWq;

1.121
date	2016.04.16.15.52.51;	author ajacoutot;	state Exp;
branches;
next	1.120;
commitid	5Jpcq1YGYR1Ar8tN;

1.120
date	2016.04.08.11.16.15;	author naddy;	state Exp;
branches;
next	1.119;
commitid	n544QackrPmkj7JP;

1.119
date	2016.03.11.20.28.30;	author naddy;	state Exp;
branches;
next	1.118;
commitid	UYLP8TE6V7RS2GhJ;

1.118
date	2016.03.06.12.16.53;	author ajacoutot;	state Exp;
branches;
next	1.117;
commitid	k4ve0sYL2Rf5hroO;

1.117
date	2016.02.04.06.55.18;	author ajacoutot;	state Exp;
branches;
next	1.116;
commitid	0B8aS5m9jXXbOlxw;

1.116
date	2016.01.09.07.38.16;	author ajacoutot;	state Exp;
branches;
next	1.115;
commitid	zgwqpJdfnNdEli3x;

1.115
date	2015.11.23.10.07.48;	author sthen;	state Exp;
branches;
next	1.114;
commitid	iQ4Ib4RAfax7l9sa;

1.114
date	2015.11.23.06.23.57;	author ajacoutot;	state Exp;
branches;
next	1.113;
commitid	iwEs6XJwsRXhTHxU;

1.113
date	2015.09.14.07.02.14;	author ajacoutot;	state Exp;
branches;
next	1.112;
commitid	ZchmWrTHkYYmSLCq;

1.112
date	2015.08.12.07.05.12;	author ajacoutot;	state Exp;
branches;
next	1.111;
commitid	B4CoG8mmINsHwu2B;

1.111
date	2015.07.13.07.07.48;	author ajacoutot;	state Exp;
branches
	1.111.4.1;
next	1.110;
commitid	swDzv0Am2D8mlkb9;

1.110
date	2015.05.04.08.30.13;	author ajacoutot;	state Exp;
branches;
next	1.109;
commitid	2baMMIF9MJMvQVta;

1.109
date	2015.04.09.07.07.08;	author ajacoutot;	state Exp;
branches;
next	1.108;
commitid	6jV6AJEpNVvZmdIa;

1.108
date	2014.12.12.07.05.59;	author ajacoutot;	state Exp;
branches
	1.108.2.1;
next	1.107;
commitid	T8kdEwzfpaaM0rjg;

1.107
date	2014.11.13.09.33.09;	author ajacoutot;	state Exp;
branches;
next	1.106;
commitid	jIqrmQhEDEXzg2PQ;

1.106
date	2014.10.14.07.38.54;	author ajacoutot;	state Exp;
branches;
next	1.105;
commitid	iEBCMpaXahdJbcR0;

1.105
date	2014.09.19.06.37.49;	author ajacoutot;	state Exp;
branches;
next	1.104;
commitid	DlnzaN2XrhjKd4vS;

1.104
date	2014.09.13.16.36.54;	author ajacoutot;	state Exp;
branches;
next	1.103;
commitid	N2TalFGi4jKRwS2u;

1.103
date	2014.08.25.16.27.56;	author ajacoutot;	state Exp;
branches;
next	1.102;
commitid	QkwagvXJkg5Gd9u0;

1.102
date	2014.08.21.12.37.27;	author ajacoutot;	state Exp;
branches;
next	1.101;
commitid	VUBGbujwR43Sq8y3;

1.101
date	2014.05.30.11.32.21;	author sthen;	state Exp;
branches
	1.101.2.1;
next	1.100;

1.100
date	2014.05.09.13.54.06;	author sthen;	state Exp;
branches;
next	1.99;

1.99
date	2014.05.09.09.03.50;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2014.04.08.12.28.48;	author ajacoutot;	state Exp;
branches;
next	1.97;

1.97
date	2014.03.16.15.53.25;	author ajacoutot;	state Exp;
branches;
next	1.96;

1.96
date	2014.03.14.17.42.59;	author ajacoutot;	state Exp;
branches;
next	1.95;

1.95
date	2014.03.09.22.08.50;	author ajacoutot;	state Exp;
branches;
next	1.94;

1.94
date	2014.03.04.15.09.36;	author sthen;	state Exp;
branches
	1.94.2.1;
next	1.93;

1.93
date	2014.02.14.09.07.30;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2014.02.07.09.04.41;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2014.01.24.22.20.30;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2014.01.24.21.21.47;	author ajacoutot;	state Exp;
branches;
next	1.89;

1.89
date	2014.01.06.08.50.47;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2013.12.20.21.50.58;	author ajacoutot;	state Exp;
branches;
next	1.87;

1.87
date	2013.12.08.08.31.45;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2013.11.08.10.44.30;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2013.11.05.15.46.07;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2013.11.03.00.31.20;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2013.10.24.15.42.08;	author jca;	state Exp;
branches;
next	1.82;

1.82
date	2013.09.06.16.27.51;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2013.08.06.19.06.37;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2013.06.18.13.22.39;	author ajacoutot;	state Exp;
branches
	1.80.2.1;
next	1.79;

1.79
date	2013.06.14.11.59.09;	author jasper;	state Exp;
branches;
next	1.78;

1.78
date	2013.06.09.09.36.44;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2013.05.13.09.08.38;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2013.04.12.05.16.03;	author brad;	state Exp;
branches;
next	1.75;

1.75
date	2013.03.23.13.25.04;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2013.03.21.08.48.53;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2013.03.11.11.41.24;	author espie;	state Exp;
branches;
next	1.72;

1.72
date	2013.03.02.14.07.22;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2013.02.21.15.55.32;	author ajacoutot;	state Exp;
branches
	1.71.2.1;
next	1.70;

1.70
date	2013.02.05.07.37.33;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2013.01.18.10.41.25;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2012.12.23.10.39.21;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2012.12.08.08.20.10;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2012.11.05.10.41.24;	author ajacoutot;	state Exp;
branches;
next	1.65;

1.65
date	2012.10.30.14.21.36;	author gsoares;	state Exp;
branches;
next	1.64;

1.64
date	2012.10.08.10.43.15;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2012.09.27.06.35.07;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2012.09.21.14.48.06;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2012.09.20.17.49.10;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2012.09.05.07.15.50;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2012.09.03.11.54.18;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2012.08.24.12.33.14;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2012.08.19.13.31.39;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2012.08.19.13.30.04;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2012.08.06.07.54.22;	author sthen;	state Exp;
branches;
next	1.54;

1.54
date	2012.07.09.13.29.51;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2012.07.08.09.02.10;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2012.07.05.06.36.59;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2012.06.26.14.40.06;	author jasper;	state Exp;
branches;
next	1.50;

1.50
date	2012.05.09.08.06.53;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2012.04.04.06.27.38;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2012.03.21.16.05.36;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2012.03.06.16.37.49;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2012.01.09.14.03.59;	author ajacoutot;	state Exp;
branches;
next	1.45;

1.45
date	2011.12.30.11.17.08;	author ajacoutot;	state Exp;
branches;
next	1.44;

1.44
date	2011.11.21.14.48.09;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2011.10.21.15.38.15;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2011.10.03.15.32.24;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2011.09.08.11.36.36;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2011.08.22.09.13.04;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2011.06.21.09.55.43;	author ajacoutot;	state Exp;
branches
	1.39.2.1;
next	1.38;

1.38
date	2011.06.02.17.09.32;	author kili;	state Exp;
branches;
next	1.37;

1.37
date	2011.05.17.19.08.08;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2011.05.04.15.48.10;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2011.04.15.16.09.39;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2011.03.10.15.38.58;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2011.03.10.07.16.45;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2010.12.12.16.29.59;	author ajacoutot;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.10.25.17.28.00;	author ajacoutot;	state Exp;
branches;
next	1.29;

1.29
date	2010.10.18.21.41.45;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2010.08.31.20.01.41;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2010.08.25.20.27.16;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2010.08.03.11.49.44;	author stephan;	state Exp;
branches;
next	1.25;

1.25
date	2010.08.03.09.05.13;	author lum;	state Exp;
branches;
next	1.24;

1.24
date	2010.04.20.21.10.32;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2010.03.21.10.19.42;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.10.11.13.17.00;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2009.10.09.23.05.20;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.07.24.14.37.23;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2009.05.12.07.50.57;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2009.05.01.10.37.22;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2008.11.18.09.01.53;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2008.11.12.17.09.25;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2008.10.26.10.50.37;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2007.12.03.20.57.33;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2007.09.15.23.29.58;	author merdely;	state Exp;
branches;
next	1.12;

1.12
date	2007.03.15.11.30.07;	author jolan;	state Exp;
branches;
next	1.11;

1.11
date	2006.08.03.23.28.12;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2005.12.24.20.52.58;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2005.05.11.11.16.07;	author robert;	state Exp;
branches;
next	1.8;

1.8
date	2005.02.21.17.15.43;	author alek;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2004.12.27.13.28.34;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.22.08.06.40;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2004.09.15.18.35.59;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2004.08.21.22.04.37;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2004.05.08.06.43.40;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2003.10.12.02.18.49;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2003.05.02.04.04.31;	author margarida;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.05.02.04.04.31;	author margarida;	state Exp;
branches;
next	;

1.8.2.1
date	2005.05.23.22.40.58;	author robert;	state Exp;
branches;
next	;

1.39.2.1
date	2011.11.21.15.15.32;	author jasper;	state Exp;
branches;
next	1.39.2.2;

1.39.2.2
date	2011.12.07.11.00.55;	author sthen;	state Exp;
branches;
next	;

1.71.2.1
date	2013.06.14.12.06.54;	author jasper;	state Exp;
branches;
next	;

1.80.2.1
date	2014.02.14.09.59.07;	author jasper;	state Exp;
branches;
next	1.80.2.2;

1.80.2.2
date	2014.03.12.17.58.08;	author jasper;	state Exp;
branches;
next	;

1.94.2.1
date	2014.06.10.10.47.33;	author jasper;	state Exp;
branches;
next	;
commitid	gCRCHdRR9guAPF9f;

1.101.2.1
date	2014.11.13.10.14.26;	author ajacoutot;	state Exp;
branches;
next	;
commitid	AUoYt1fX5gZI7Te3;

1.108.2.1
date	2015.05.04.09.32.04;	author ajacoutot;	state Exp;
branches;
next	1.108.2.2;
commitid	OmWi153WU5hIhkHY;

1.108.2.2
date	2015.08.13.09.27.09;	author ajacoutot;	state Exp;
branches;
next	;
commitid	TbPJcOPL0BT1Fq4T;

1.111.4.1
date	2015.08.24.09.01.33;	author ajacoutot;	state Exp;
branches;
next	;
commitid	QDYiwTT0S0qqkCFJ;

1.124.2.1
date	2016.09.09.07.25.51;	author ajacoutot;	state Exp;
branches;
next	;
commitid	9Fh6JrRT95Xe02Xf;

1.132.2.1
date	2017.06.08.07.23.43;	author ajacoutot;	state Exp;
branches;
next	;
commitid	IC2ffZH0DZtfarde;


desc
@@


1.137
log
@SECURITY update to gnutls-3.5.13.
GNUTLS-SA-2017-4: decoding a status response TLS extension with valid contents could lead to a crash due to a null pointer dereference
@
text
@# $OpenBSD: Makefile,v 1.136 2017/05/13 09:54:48 espie Exp $

COMMENT=		GNU Transport Layer Security library

V=			3.5.13
DISTNAME=		gnutls-${V}
EXTRACT_SUFX=		.tar.xz

CATEGORIES=		security

SHARED_LIBS +=  gnutls               44.1     # 44.5
SHARED_LIBS +=  gnutlsxx             29.1     # 29.0

HOMEPAGE=		http://www.gnutls.org/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# LGPLv2.1+ - GPLv3+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c ffi gmp hogweed iconv idn2 intl m nettle p11-kit pthread
WANTLIB += tasn1 unistring z

MASTER_SITES=		ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/ \
			http://ftp.heanet.ie/mirrors/ftp.gnupg.org/gcrypt/gnutls/v${V:R}/

.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mclang} || ${MACHINE_ARCH} != amd64
WANTLIB += ${LIBCXX}
.else
# assembly instructions
MODULES +=	lang/clang
MODCLANG_ARCHS=	amd64
MODCLANG_LANGS= c++
.endif

# needed for tests
BUILD_DEPENDS=		devel/cmocka

LIB_DEPENDS=		converters/libunistring \
			devel/libidn2 \
			security/libtasn1 \
			security/libnettle \
			security/p11-kit

USE_GMAKE=		Yes

# regression tests need this
PORTHOME=		${WRKDIR}

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--disable-guile \
			--disable-ssl3-support \
			--disable-valgrind-tests \
			--with-default-trust-store-file=/etc/ssl/cert.pem \
			--with-unbound-root-key-file=/var/unbound/db/root.key

# OpenBSD's unbound does not provide libdane
CONFIGURE_ARGS +=	--disable-libdane

# requires security/trousers: not committed (aja@@), needs kernel support
# for tpm(4): http://bsssd.sourceforge.net/
CONFIGURE_ARGS +=	--without-tpm

# prevents dependency on devel/autogen
CONFIGURE_ARGS +=	--enable-local-libopts

CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/gnutls
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gnutls
	${INSTALL_DATA} ${WRKSRC}/doc/examples/*.c \
		${PREFIX}/share/examples/gnutls

# warning: implicit declaration of function 'kill'
# error: 'SIGTERM' undeclared (first use in this function)
pre-test:
	perl -i -pe 's,#include <stdlib.h>,$$&\n#include <signal.h>,' \
		${WRKSRC}/tests/*.c

.include <bsd.port.mk>
@


1.136
log
@use lang/clang if amd64 and system compiler is not clang
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2017/05/13 08:54:53 ajacoutot Exp $
d5 1
a5 1
V=			3.5.12
d11 1
a11 1
SHARED_LIBS +=  gnutls               44.1     # 44.4
@


1.135
log
@Update to gnutls-3.5.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2017/04/10 11:46:33 sthen Exp $
d27 4
d32 3
a34 5
MODULES +=		lang/clang
MODCLANG_ARCHS=		amd64
MODCLANG_LANGS=		c++
.if ${MACHINE_ARCH} != "amd64"
WANTLIB += ${LIBCXX}
@


1.134
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2017/04/09 09:13:37 ajacoutot Exp $
d5 1
a5 1
V=			3.5.11
d11 1
a11 1
SHARED_LIBS +=  gnutls               44.1     # 44.2
@


1.133
log
@Update to gnutls-3.5.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2017/03/08 08:11:48 ajacoutot Exp $
d32 1
a32 1
WANTLIB += stdc++
@


1.132
log
@Update to gnutls-3.5.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2017/02/18 17:31:59 ajacoutot Exp $
d5 1
a5 1
V=			3.5.10
d11 1
a11 1
SHARED_LIBS +=  gnutls               44.1     # 44.0
@


1.132.2.1
log
@Fix for GNUTLS-SA-2017-4
- decoding a status response TLS extension with valid contents could lead to a crash due to a null pointer dereference
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2017/03/08 08:11:48 ajacoutot Exp $
a7 1
REVISION=		0
@


1.131
log
@Move to libidn2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2017/02/13 10:23:50 ajacoutot Exp $
d5 1
a5 1
V=			3.5.9
a7 1
REVISION=		0
a67 5

# XXX https://bugzilla.redhat.com/show_bug.cgi?id=1422256
post-build:
	sed -i 's/libidn2,//g' ${WRKBUILD}/lib/gnutls.pc
	sed -i 's/-lunistring/-lunistring -lidn2/' ${WRKBUILD}/lib/gnutls.pc
@


1.130
log
@Proper indent; no change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2017/02/13 10:22:11 ajacoutot Exp $
d8 1
d22 1
a22 1
WANTLIB += c ffi gmp hogweed iconv idn intl m nettle p11-kit pthread
d40 1
a40 1
			devel/libidn \
a56 3
# Don't pickup libidn2 just yet
CONFIGURE_ARGS +=	--without-libidn2

d69 5
@


1.129
log
@Update to gnutls-3.5.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2017/01/15 17:58:00 ajacoutot Exp $
d3 1
a3 1
COMMENT=	GNU Transport Layer Security library
d5 3
a7 3
V=		3.5.9
DISTNAME=	gnutls-${V}
EXTRACT_SUFX=	.tar.xz
d9 1
a9 1
CATEGORIES=	security
d14 1
a14 1
HOMEPAGE=	http://www.gnutls.org/
d16 1
a16 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d24 2
a25 2
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/ \
		http://ftp.heanet.ie/mirrors/ftp.gnupg.org/gcrypt/gnutls/v${V:R}/
d28 3
a30 3
MODULES +=	lang/clang
MODCLANG_ARCHS=	amd64
MODCLANG_LANGS=	c++
d36 1
a36 1
BUILD_DEPENDS=	devel/cmocka
d38 5
a42 5
LIB_DEPENDS=	converters/libunistring \
		devel/libidn \
		security/libtasn1 \
		security/libnettle \
		security/p11-kit
d44 1
a44 1
USE_GMAKE=	Yes
d47 1
a47 1
PORTHOME=	${WRKDIR}
d49 6
a54 6
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--disable-guile \
		--disable-ssl3-support \
		--disable-valgrind-tests \
		--with-default-trust-store-file=/etc/ssl/cert.pem \
		--with-unbound-root-key-file=/var/unbound/db/root.key
d60 1
a60 1
CONFIGURE_ARGS += --disable-libdane
d64 1
a64 1
CONFIGURE_ARGS += --without-tpm
d67 1
a67 1
CONFIGURE_ARGS+=--enable-local-libopts
d69 2
a70 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.128
log
@SECURITY update to gnutls-3.5.8.
- GnuTLS-SA-2017-1
- GnuTLS-SA-2017-2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2016/12/09 11:26:56 ajacoutot Exp $
d5 1
a5 1
V=		3.5.8
d11 1
a11 1
SHARED_LIBS +=  gnutls               44.0     # 43.1
d35 3
d55 3
@


1.127
log
@Update to gnutls-3.4.17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2016/10/10 08:15:05 ajacoutot Exp $
d5 1
a5 1
V=		3.4.17
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.2     # 37.0
d22 1
a22 1
WANTLIB += stdc++ tasn1 z
d27 10
a36 1
LIB_DEPENDS=	devel/libidn \
d48 1
a68 1
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/gnutls
@


1.126
log
@Update to gnutls-3.4.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2016/09/09 07:24:48 ajacoutot Exp $
d5 1
a5 1
V=		3.4.16
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.1     # 36.8
@


1.125
log
@SECURITY update to gnutls-3.4.15.
- GnuTLS-SA-2016-3
- http://lists.gnutls.org/pipermail/gnutls-devel/2016-September/008146.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2016/07/07 05:46:45 ajacoutot Exp $
d5 1
a5 1
V=		3.4.15
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.1     # 36.6
@


1.124
log
@Update to gnutls-3.4.14.
(security fix for GNUTLS-SA-2016-2 which does not affect us)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2016/06/07 08:56:09 ajacoutot Exp $
d5 1
a5 1
V=		3.4.14
@


1.124.2.1
log
@SECURITY update to gnutls-3.4.15.
- GnuTLS-SA-2016-3
- http://lists.gnutls.org/pipermail/gnutls-devel/2016-September/008146.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2016/07/07 05:46:45 ajacoutot Exp $
d5 1
a5 1
V=		3.4.15
@


1.123
log
@SECURITY update to gnutls-3.4.13.
http://www.gnutls.org/security.html#GNUTLS-SA-2016-1
Only 3.4.12 is affected.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2016/05/21 06:48:14 ajacoutot Exp $
d5 1
a5 1
V=		3.4.13
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.1     # 36.5
@


1.122
log
@Update to gnutls-3.4.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2016/04/16 15:52:51 ajacoutot Exp $
d5 1
a5 1
V=		3.4.12
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.1     # 36.4
a56 1
	rm ${PREFIX}/lib/gnutls/*.{a,la}
@


1.121
log
@Update to gnutls-3.4.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2016/04/08 11:16:15 naddy Exp $
d5 1
a5 1
V=		3.4.11
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.0     # 36.3
d57 1
@


1.120
log
@Replace gettext module with ordinary dependency.
Fix the gnutls tests without requiring gsed.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2016/03/11 20:28:30 naddy Exp $
d5 1
a5 1
V=		3.4.10
a6 1
REVISION=	0
d11 1
a11 1
SHARED_LIBS +=  gnutls               43.0     # 36.2
d21 2
a22 2
WANTLIB += c ffi gmp hogweed iconv idn intl m nettle p11-kit pthread stdc++
WANTLIB += tasn1 z
d27 1
a27 2
LIB_DEPENDS=	devel/gettext \
		devel/libidn \
d30 1
a30 1
		security/p11-kit>=0.23.2
@


1.119
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2016/03/06 12:16:53 ajacoutot Exp $
d7 1
d22 1
a22 1
WANTLIB += c ffi gmp hogweed idn m nettle p11-kit pthread stdc++
d28 2
a29 3
MODULES=	devel/gettext

LIB_DEPENDS=	devel/libidn \
a66 1
TEST_DEPENDS +=	textproc/gsed
d68 1
a68 1
	gsed -Ei 's,#include <stdlib.h>,&\n#include <signal.h>,' \
@


1.118
log
@Major update to the new stable gnutls-3.4.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2016/02/04 06:55:18 ajacoutot Exp $
d40 1
a40 2
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--disable-guile \
@


1.117
log
@Bugfix update to gnutls-3.3.21.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2016/01/09 07:38:16 ajacoutot Exp $
d5 1
a5 1
V=		3.3.21
d11 1
a11 1
SHARED_LIBS +=  gnutls               42.1     # 69.13
a12 1
SHARED_LIBS +=  gnutls-openssl       27.2     # 27.2
d21 2
a22 2
WANTLIB += c ffi gmp hogweed m nettle p11-kit pthread stdc++ tasn1
WANTLIB += z
d24 2
a25 2
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v3.3/ \
		http://ftp.heanet.ie/mirrors/ftp.gnupg.org/gcrypt/gnutls/v3.3/
d29 2
a30 1
LIB_DEPENDS=	security/libtasn1 \
d32 1
a32 1
		security/p11-kit
d44 1
a44 1
		--with-unbound-root-key-file=/var/unbound/etc/root.key
d65 7
@


1.116
log
@Update to gnutls-3.3.20.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2015/11/23 10:07:48 sthen Exp $
d5 1
a5 1
V=		3.3.20
d11 1
a11 1
SHARED_LIBS +=  gnutls               42.1     # 69.12
@


1.115
log
@Add an http mirror for gnutls (there was an old commented-out one, but it
didn't update very often - new one should be 4x/day). ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2015/11/23 06:23:57 ajacoutot Exp $
d5 1
a5 1
V=		3.3.19
d11 1
a11 1
SHARED_LIBS +=  gnutls               42.1     # 69.11
@


1.114
log
@Update to gnutls-3.3.19.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2015/09/14 07:02:14 ajacoutot Exp $
d25 2
a26 3
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v3.3/
#MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/ \
#		http://mirrors.dotsrc.org/gcrypt/gnutls/v${V:R}/
@


1.113
log
@Update to gnutls-3.3.18.
Drop the libgnutls-config script.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2015/08/12 07:05:12 ajacoutot Exp $
d5 1
a5 1
V=		3.3.18
d11 1
a11 1
SHARED_LIBS +=  gnutls               42.0     # 69.9
@


1.112
log
@SECURITY update to gnutls-3.3.17.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2015/07/13 07:07:48 ajacoutot Exp $
d5 1
a5 1
V=		3.3.17.1
a65 3
	# needed by at least:
	# devel/libvmime, security/prelude/manager, textproc/iksemel
	${INSTALL} -m 555 ${FILESDIR}/libgnutls-config ${PREFIX}/bin
@


1.111
log
@Bug-fix update to gnutls-3.3.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2015/05/04 08:30:13 ajacoutot Exp $
d5 1
a5 1
V=		3.3.16
d11 1
a11 1
SHARED_LIBS +=  gnutls               42.0     # 69.8
d25 3
a27 2
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/ \
		http://mirrors.dotsrc.org/gcrypt/gnutls/v${V:R}/
@


1.111.4.1
log
@Fix for GNUTLS-SA-2015-3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2015/07/13 07:07:48 ajacoutot Exp $
a7 1
REVISION=	0
@


1.110
log
@SECURITY update to gnutls-3.3.15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2015/04/09 07:07:08 ajacoutot Exp $
d5 1
a5 1
V=		3.3.15
d11 1
a11 1
SHARED_LIBS +=  gnutls               42.0     # 69.6
@


1.109
log
@Update to gnutls-3.3.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2014/12/12 07:05:59 ajacoutot Exp $
d5 1
a5 1
V=		3.3.14
@


1.108
log
@Update to gnutls-3.2.21.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.107 2014/11/13 09:33:09 ajacoutot Exp $
# rfc2818_hostname.c:107: error: storage size of 'ipv6' isn't known
d5 1
a5 1
V=		3.2.21
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.4     # 58.8
a12 1
SHARED_LIBS +=  gnutls-xssl          0.0      # 0.0
d43 2
a44 1
		--with-default-trust-store-file=/etc/ssl/cert.pem
@


1.108.2.1
log
@Fix for MD5 downgrade in TLS 1.2 signatures [GNUTLS-SA-2015-2].
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2014/12/12 07:05:59 ajacoutot Exp $
a8 1
REVISION=	0
@


1.108.2.2
log
@SECURITY fix for GNUTLS-SA-2015-3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108.2.1 2015/05/04 09:32:04 ajacoutot Exp $
d9 1
a9 1
REVISION=	1
@


1.107
log
@SECURITY update to gnutls-3.2.20.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2014/10/14 07:38:54 ajacoutot Exp $
d6 1
a6 1
V=		3.2.20
@


1.106
log
@Update to gnutls-3.2.19.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2014/09/19 06:37:49 ajacoutot Exp $
d6 1
a6 1
V=		3.2.19
@


1.105
log
@Update to gnutls-3.2.18.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2014/09/13 16:36:54 ajacoutot Exp $
d6 1
a6 1
V=		3.2.18
@


1.104
log
@--disable-gtk-doc is handled by the infrastructure now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2014/08/25 16:27:56 ajacoutot Exp $
d6 1
a6 1
V=		3.2.17
@


1.103
log
@Update to gnutls-3.2.17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2014/08/21 12:37:27 ajacoutot Exp $
a42 1
		--disable-gtk-doc \
a58 6

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@


1.102
log
@Update to gnutls-3.2.16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2014/05/30 11:32:21 sthen Exp $
d6 1
a6 1
V=		3.2.16
d12 1
a12 1
SHARED_LIBS +=  gnutls               41.4     # 58.5
@


1.101
log
@Update to gnutls-3.2.15, fixes memory corruption in TLS client "Server Hello"
parsing found by Codenomicon, and various other issues. No API/ABI change.
ok ajacoutot@@
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.100 2014/05/09 13:54:06 sthen Exp $
d6 1
a6 1
V=		3.2.15
@


1.101.2.1
log
@Merge upstream fix for CVE-2014-8564.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2014/05/30 11:32:21 sthen Exp $
a7 1
REVISION=	0
@


1.100
log
@add an http mirror, for people on ftp-challenged nets
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2014/05/09 09:03:50 ajacoutot Exp $
d5 1
a5 1
V=		3.2.14
@


1.99
log
@Bugfix update to gnutls-3.2.14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2014/04/08 12:28:48 ajacoutot Exp $
d26 2
a27 1
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/
@


1.98
log
@Bugfix update to gnutls-3.2.13.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2014/03/16 15:53:25 ajacoutot Exp $
d5 1
a5 1
V=		3.2.13
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.4     # 58.3
@


1.97
log
@unbound is in base, tweak comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2014/03/14 17:42:59 ajacoutot Exp $
d5 1
a5 1
V=		3.2.12.1
d26 1
a26 4
# XXX temporary
#MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v3.2/
WRKDIST=	${WRKDIR}/gnutls-3.2.12
@


1.96
log
@Be safe and explicitely set --with-default-trust-store-file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2014/03/09 22:08:50 ajacoutot Exp $
d49 1
a49 1
# add dependency on net/unbound; see post-install as well
@


1.95
log
@SECURITY update to gnutls-3.2.12.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/03/04 15:09:36 sthen Exp $
d46 2
a47 1
		--disable-valgrind-tests
@


1.94
log
@Pull in an upstream commit to GnuTLS fixing a certificate validation
issue: https://www.gitorious.org/gnutls/gnutls/commit/855127da290

ok naddy@@ espie@@ jasper@@ jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/02/14 09:07:30 ajacoutot Exp $
d5 1
a5 1
V=		3.2.10
a7 1
REVISION=	1
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.3     # 57.1
d26 4
a29 1
MASTER_SITES=	ftp://ftp.gnutls.org/gcrypt/gnutls/v${V:R}/
d55 3
a59 3

# prevents dependency on devel/autogen
CONFIGURE_ARGS+=--enable-local-libopts
@


1.94.2.1
log
@security fix for CVE-2014-3466

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/03/04 15:09:36 sthen Exp $
d8 1
a8 1
REVISION=	2
@


1.93
log
@SECURITY fix for CVE-2014-1959.

ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2014/02/07 09:04:41 ajacoutot Exp $
d8 1
a8 1
REVISION=	0
@


1.92
log
@Update to gnutls-3.2.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2014/01/24 22:20:30 ajacoutot Exp $
d8 1
@


1.91
log
@Better comment; no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/01/24 21:21:47 ajacoutot Exp $
d5 1
a5 1
V=		3.2.9
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.2     # 57.1
@


1.90
log
@Update to gnutls-3.2.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/01/06 08:50:47 ajacoutot Exp $
d55 1
a55 1
# XXX devel/autogen is too old
@


1.89
log
@Tweak comment; no pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/12/20 21:50:58 ajacoutot Exp $
d5 1
a5 1
V=		3.2.8
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.2     # 55.0
d54 3
@


1.88
log
@Update to gnutls-3.2.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/12/08 08:31:45 ajacoutot Exp $
d48 2
a49 2
# requires security/trousers: not committed, needs kernel support for tpm(4):
# http://bsssd.sourceforge.net/
@


1.87
log
@Update to gnutls-3.2.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/11/08 10:44:30 ajacoutot Exp $
d5 1
a5 1
V=		3.2.7
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.1     # 55.0
@


1.86
log
@Drop bogus CONFIGURE_ARGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2013/11/05 15:46:07 ajacoutot Exp $
d5 1
a5 1
V=		3.2.6
a7 1
REVISION=	0
d11 1
a11 1
SHARED_LIBS +=  gnutls               41.0     # 55.0
@


1.85
log
@Remove uneeded LIB_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2013/11/03 00:31:20 ajacoutot Exp $
d44 1
a44 2
		--disable-valgrind-tests \
		--with-packager="OpenBSD Ports"
@


1.84
log
@Update to gnutls-3.2.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2013/10/24 15:42:08 jca Exp $
d8 1
d31 1
a31 2
LIB_DEPENDS=	devel/libffi \
		security/libtasn1 \
@


1.83
log
@Security fix for GNUTLS-SA-2013-3,
GnuTLS Denial of Service vulnerability in DANE records processing.
(no CVE assigned yet)

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2013/09/06 16:27:51 ajacoutot Exp $
d5 1
a5 1
V=		3.2.5
d11 1
a11 1
SHARED_LIBS +=  gnutls               40.0     # 53.0
@


1.82
log
@Update to gnutls-3.2.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/08/06 19:06:37 ajacoutot Exp $
d5 1
a5 1
V=		3.2.4
@


1.81
log
@Update to gnutls 3.2.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/06/18 13:22:39 ajacoutot Exp $
d5 1
a5 1
V=		3.2.3
d11 1
a11 1
SHARED_LIBS +=  gnutls               39.8     # 52.0
d23 1
a23 1
WANTLIB += c gmp hogweed idn m nettle p11-kit pthread stdc++ tasn1
d30 1
a30 1
LIB_DEPENDS=	devel/libidn \
@


1.80
log
@Update to gnutls-3.2.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/06/14 11:59:09 jasper Exp $
d5 1
a5 1
V=		3.2.1
d11 1
a11 1
SHARED_LIBS +=  gnutls               39.7     # 50.0
@


1.80.2.1
log
@Security fix for CVE-2014-1959

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/06/18 13:22:39 ajacoutot Exp $
a6 1
REVISION=	0
@


1.80.2.2
log
@Security fix for CVE-2014-0092

ok aja@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80.2.1 2014/02/14 09:59:07 jasper Exp $
d7 1
a7 1
REVISION=	1
@


1.79
log
@Security fix for CVE-2013-2116,
GnuTLS TLS Record Decoding Denial of Service Vulnerability

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/06/09 09:36:44 ajacoutot Exp $
d5 1
a5 1
V=		3.1.12
a6 1
REVISION=	0
d11 1
a11 1
SHARED_LIBS +=  gnutls               39.6     # 47.1
a44 1
		--disable-hardware-acceleration \
@


1.78
log
@Update to gnutls-3.1.12.
requires a recent libc with the getopt_long() fix.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/05/13 09:08:38 ajacoutot Exp $
d7 1
@


1.77
log
@Maintenance update to gnutls-3.1.11.
@
text
@d1 1
a1 4
# $OpenBSD: Makefile,v 1.76 2013/04/12 05:16:03 brad Exp $

# XXX check why our getopt_long(3) fails the configure test
# + rm patch-gl_unistd_in_h
d5 1
a5 1
V=		3.1.11
d11 1
a11 1
SHARED_LIBS +=  gnutls               39.5     # 47.0
@


1.76
log
@Update license marker as the license changed with 3.1.10.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/03/23 13:25:04 ajacoutot Exp $
d8 1
a8 1
V=		3.1.10
d14 1
a14 1
SHARED_LIBS +=  gnutls               39.4     # 46.0
@


1.75
log
@Update to gnutls-3.1.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2013/03/21 08:48:53 ajacoutot Exp $
d23 1
a23 1
# LGPLv3 - GPLv3
@


1.74
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2013/03/11 11:41:24 espie Exp $
d8 1
a8 1
V=		3.1.9
d14 1
a14 1
SHARED_LIBS +=  gnutls               39.3     # 44.0
@


1.73
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/03/02 14:07:22 ajacoutot Exp $
a38 1
USE_LIBTOOL=	Yes
@


1.72
log
@Update to gnutls-3.1.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/02/21 15:55:32 ajacoutot Exp $
a24 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.71
log
@Remove an annoying warning at pkg_add/delete time due to an empty manpage.

Theo confirmed this can still go in.
prodded by and ok sthen@@, ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/02/05 07:37:33 ajacoutot Exp $
d8 1
a8 1
V=		3.1.7
a10 1
REVISION=	0
d14 1
a14 1
SHARED_LIBS +=  gnutls               39.2     # 44.0
a70 2
# XXX empty man page
EMPTY_MP=	${PREFIX}/man/man3/gnutls_record_disable_padding.3
a71 3
	if [ $$(stat -f %z ${EMPTY_MP}) -ne 0 ]; then exit 1; fi
	rm ${EMPTY_MP}

a79 2
	# --disable-libdane (net/unbound)
	rm ${PREFIX}/{bin/danetool,lib/pkgconfig/gnutls-dane.pc}
@


1.71.2.1
log
@Security fix for CVE-2013-2116,
GnuTLS TLS Record Decoding Denial of Service Vulnerability

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/02/21 15:55:32 ajacoutot Exp $
d11 1
a11 1
REVISION=	1
@


1.70
log
@SECURITY update to gnutls-3.1.7.
GNUTLS-SA-2013-1: http://www.isg.rhul.ac.uk/tls/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/01/18 10:41:25 ajacoutot Exp $
d11 1
d72 2
d75 3
@


1.69
log
@Bugfix update to gnutls-3.1.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2012/12/23 10:39:21 ajacoutot Exp $
d8 1
a8 1
V=		3.1.6
d14 1
a14 1
SHARED_LIBS +=  gnutls               39.1     # 40.0
d16 1
@


1.68
log
@New MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/12/08 08:20:10 ajacoutot Exp $
d8 1
a8 1
V=		3.1.5
@


1.67
log
@Update to gnutls-3.1.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2012/11/05 10:41:24 ajacoutot Exp $
d8 2
a9 1
DISTNAME=	gnutls-3.1.5
d31 1
a31 2
MASTER_SITES=	http://ftp.gnu.org/gnu/gnutls/ \
		ftp://ftp.gnu.org/pub/gnu/gnutls/
@


1.66
log
@Update to gnutls-3.1.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/10/30 14:21:36 gsoares Exp $
d8 1
a8 1
DISTNAME=	gnutls-3.1.3
d36 2
a37 2
		security/libtasn1>=2.14 \
		security/libnettle>=2.5 \
a51 1
		--with-libtasn1-prefix=${LOCALBASE} \
d54 3
d79 2
@


1.65
log
@add missing rcs id

OK aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2012/10/08 10:43:15 ajacoutot Exp $
d8 1
a8 1
DISTNAME=	gnutls-3.1.2
a9 1
REVISION=	1
d40 1
@


1.64
log
@Fix my email.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2012/09/27 06:35:07 ajacoutot Exp $
d10 1
a10 1
REVISION=	0
@


1.63
log
@Update to gnutls-3.1.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2012/09/21 14:48:06 ajacoutot Exp $
d10 1
d20 1
a20 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@bsdfrog.org>
@


1.62
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2012/09/20 17:49:10 ajacoutot Exp $
d8 1
a8 1
DISTNAME=	gnutls-3.1.1
a9 1
REVISION=	0
d13 2
a14 2
SHARED_LIBS +=  gnutls               39.0     # 40.0
SHARED_LIBS +=  gnutlsxx             29.0     # 29.0
d36 1
a36 1
		security/libtasn1 \
@


1.61
log
@Fix implicit declaration.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2012/09/05 07:15:50 ajacoutot Exp $
d61 6
@


1.60
log
@Major update to gnutls-3.1.1.

tested in a bulk by landry@@, thanks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2012/09/03 11:54:18 ajacoutot Exp $
d10 1
@


1.59
log
@Minor update to gnutls-3.0.23.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.58 2012/08/24 12:33:14 ajacoutot Exp $
d8 1
a8 1
DISTNAME=	gnutls-3.0.23
d13 2
a14 2
SHARED_LIBS +=  gnutls               38.0     # 38.2
SHARED_LIBS +=  gnutlsxx             28.0     # 28.0
d37 1
a37 1
		security/libnettle>=2.2 \
d53 4
@


1.58
log
@No need for -pthread ldflags anymore.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2012/08/19 13:31:39 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-3.0.22
a6 1
REVISION=	2
d10 1
a10 1
SHARED_LIBS +=  gnutls               38.0     # 38.0
d27 2
a28 1
MASTER_SITES=	ftp://ftp.gnutls.org/pub/gnutls/
@


1.57
log
@Forgot in previous.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2012/08/19 13:30:04 ajacoutot Exp $
d7 1
a7 1
REVISION=	1
d52 1
a52 1
		LDFLAGS="-L${LOCALBASE}/lib -pthread"
@


1.56
log
@Remove lpthread patches from the "security" category.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2012/08/06 07:54:22 sthen Exp $
d7 1
a7 1
REVISION=	0
@


1.55
log
@update to gnutls 3.0.22, ok ajacoutot@@

- bugfixes and now supports gnutls_certificate_set_x509_system_trust on OpenBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2012/07/09 13:29:51 ajacoutot Exp $
d7 1
a52 4

pre-configure:
	perl -pi -e 's,-lpthread,-pthread,g' \
		${WRKSRC}/tests/suite/Makefile.in
@


1.54
log
@Better patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2012/07/08 09:02:10 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-3.0.21
a6 1
REVISION=	0
@


1.53
log
@Major update to gnutls-3.0.21.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/08/22 09:13:04 ajacoutot Exp $
d7 1
@


1.52
log
@Bugfix update to gnutls-2.12.20.
* fixed memory leak in PKCS #8 key import
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/06/26 14:40:06 jasper Exp $
d5 3
a7 1
DISTNAME=	gnutls-2.12.20
d10 3
a12 4
SHARED_LIBS +=  gnutls               18.2     # 48.4
SHARED_LIBS +=  gnutlsxx             17.0     # 27.0
SHARED_LIBS +=  gnutls-extra         18.1     # 48.4
SHARED_LIBS +=  gnutls-openssl       17.0     # 27.0
d24 2
a25 4
WANTLIB += c gmp hogweed lzo2 m ncurses nettle p11-kit pthread
WANTLIB += readline stdc++ tasn1 z

EXTRACT_SUFX=	.tar.bz2
d27 1
a27 1
MASTER_SITES=	${MASTER_SITE_GNU:=gnutls/}
d31 3
a33 3
LIB_DEPENDS=	security/libtasn1 \
		archivers/lzo2 \
		security/libnettle \
d46 1
a46 2
		--with-included-libcfg \
		--with-lzo \
d55 1
a55 1
		${WRKSRC}/{,lib/,libextra/}configure
@


1.51
log
@- these patches (or chunks) are not needed anymore since arpa/inet.h -r1.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/05/09 08:06:53 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.19
d8 1
a8 1
SHARED_LIBS +=  gnutls               18.2     # 48.3
d10 1
a10 1
SHARED_LIBS +=  gnutls-extra         18.1     # 48.3
a11 2

REVISION=	0
@


1.50
log
@Bugfix update to gnutls-2.12.19.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/04/04 06:27:38 ajacoutot Exp $
d12 2
@


1.49
log
@Use MASTER_SITE_GNU.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/03/21 16:05:36 sthen Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.18
d8 1
a8 1
SHARED_LIBS +=  gnutls               18.2     # 47.4
d10 1
a10 1
SHARED_LIBS +=  gnutls-extra         18.1     # 47.4
@


1.48
log
@update to gnutls 2.2.18, OK ajacoutot@@

- minitasn1: Upgraded to libtasn1 version 2.12 (pre-release).
- Corrected SRP-RSA ciphersuites when used under TLS 1.2.
- Fixed leaks in key generation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2012/03/06 16:37:49 ajacoutot Exp $
d28 1
a28 1
MASTER_SITES=	ftp://ftp.gnutls.org/pub/gnutls/
@


1.47
log
@Minor update to gnutls-2.12.17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2012/01/09 14:03:59 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.17
@


1.46
log
@Minor update to gnutls-2.12.16.
* corrected functionality of gnutls_record_get_direction()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/12/30 11:17:08 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.16
d8 1
a8 1
SHARED_LIBS +=  gnutls               18.1     # 47.4
@


1.45
log
@Sort PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/11/21 14:48:09 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.14
a6 2

REVISION=	0
@


1.44
log
@SECURITY update to gnutls-2.12.14.
Fix a possible buffer overflow.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/10/21 15:38:15 ajacoutot Exp $
d7 2
@


1.43
log
@Small bugfix update to gnutls-2.12.12.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/10/03 15:32:24 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.12
@


1.42
log
@Bugfix update to gnutls-2.12.11.
* libgnutls: Memory leak fixes in credentials private key deinitialization.
* libgnutls: Allow CA importing of 0 certificates to succeed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/09/08 11:36:36 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.11
@


1.41
log
@Bugfix update to gnutls-2.12.10.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/08/22 09:13:04 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.10
@


1.40
log
@Bugfix update to gnutls-2.12.9.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/06/21 09:55:43 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.9
d8 1
a8 1
SHARED_LIBS +=  gnutls               18.0     # 47.3
d10 1
a10 1
SHARED_LIBS +=  gnutls-extra         18.0     # 47.3
@


1.39
log
@Bugfix update to gnutls-2.12.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2011/06/02 17:09:32 kili Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.7
d8 1
a8 1
SHARED_LIBS +=  gnutls               17.1     # 47.1
d10 1
a10 1
SHARED_LIBS +=  gnutls-extra         17.0     # 47.1
d15 3
a17 2
# LGPLv2.1 / GPLv3 (GnuTLS)
# GPLv2+ - BSD-like (PaKChoiS)
d23 2
a24 2
WANTLIB += c gmp hogweed lzo2 m ncurses nettle pthread readline
WANTLIB += stdc++ tasn1 z
d28 1
a28 4
MASTER_SITES=	ftp://ftp.gnutls.org/pub/gnutls/ \
		ftp://ftp.gnupg.org/gcrypt/alpha/gnutls/ \
		http://josefsson.org/gnutls/releases/ \
		http://ftp.linux.it/pub/mirrors/gnupg/gnutls/
d34 2
a35 1
		security/libnettle
d46 1
d49 2
a50 6
		--with-libtasn1-prefix=${LOCALBASE}

# GnuTLS uses a modified bundled libpakchois, see ChangeLog:
# "Added a modified pakchois library (to open arbitrary pkcs11 modules).
# Current gnutls works only with this one."
CONFIGURE_ARGS+=--with-included-pakchois
d53 1
a53 1
		LDFLAGS="-L${LOCALBASE}/lib"
a57 1
	${SUBST_CMD} ${WRKSRC}/lib/pakchois/pakchois.c
d64 1
a64 1
	  ${PREFIX}/share/examples/gnutls
@


1.39.2.1
log
@Security fix for CVE-2011-4128,
gnutls: buffer overflow in gnutls_session_get_data()

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/06/21 09:55:43 ajacoutot Exp $
a5 1
REVISION=	0
@


1.39.2.2
log
@Touch doc/gnutls-api.texi to avoid rebuilding it (which fails).
Build failure reported by Ross Richardson, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39.2.1 2011/11/21 15:15:32 jasper Exp $
a63 1
	touch ${WRKSRC}/doc/gnutls-api.texi # avoid rebuilding gnutls-api.texi
@


1.38
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2011/05/17 19:08:08 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.5
d8 1
a8 1
SHARED_LIBS +=  gnutls               17.0     # 44.10
d10 1
a10 1
SHARED_LIBS +=  gnutls-extra         17.0     # 44.10
a72 2
	# empty manual pages
	rm ${PREFIX}/man/man3/{gnutls_alert_send,gnutls_x509_crt_get_signature}.3
@


1.37
log
@Maintenance update to gnutls-2.12.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2011/05/04 15:48:10 ajacoutot Exp $
a45 1
		--disable-silent-rules \
@


1.36
log
@Bugfix update to gnutls-2.12.3.
Incidentally fixes a build breakage when libgcrypt wasn't installed as
spotted by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2011/04/15 16:09:39 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.3
@


1.35
log
@Major update to gnutls-2.12.2.

tested by landry@@ in a bulk, thanks!
ok jasper@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/03/10 15:38:58 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.12.2
d74 2
@


1.34
log
@Fix pkg-config file.
This unbreaks libprelude as reported by Markus Lude.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/03/10 07:16:45 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.10.5
d8 4
a11 6
REVISION=	0

SHARED_LIBS=	gnutls-extra	16.0 \
		gnutls-openssl	16.0 \
		gnutls		16.0 \
		gnutlsxx	16.0   # .42.9
d15 2
a16 1
# LGPLv2.1 / GPLv3
d22 2
a23 1
WANTLIB += c gcrypt gpg-error lzo2 m ncurses readline stdc++ tasn1 z
d34 3
a36 3
LIB_DEPENDS=	security/libgcrypt \
		security/libtasn1 \
		archivers/lzo2
a38 1
USE_GROFF =	Yes
d44 3
a46 1
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
d50 7
a56 2
		--with-libtasn1-prefix=${LOCALBASE} \
		--with-libgcrypt-prefix=${LOCALBASE}
d60 5
d71 3
@


1.33
log
@Bugfix update to gnutls-2.10.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/12/12 16:29:59 ajacoutot Exp $
d7 2
@


1.32
log
@Bugfix update to gnutls-2.10.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/20 17:22:43 espie Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.10.4
@


1.31
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/10/25 17:28:00 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.10.2
@


1.30
log
@Maintainance update gnutls-2.10.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/10/18 21:41:45 espie Exp $
d32 3
a34 3
LIB_DEPENDS=	::security/libgcrypt \
		::security/libtasn1 \
		::archivers/lzo2
@


1.29
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/08/31 20:01:41 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.10.1
@


1.28
log
@Major update to gnutls-2.10.1.

tested by landry@@ in a bulk, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/08/25 20:27:16 sthen Exp $
d37 1
@


1.27
log
@add missing wantlibs, new-style lib_depends/revision, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/08/03 11:49:44 stephan Exp $
d5 1
a5 2
DISTNAME=	gnutls-2.8.6
REVISION=	0
d8 4
a11 4
SHARED_LIBS=	gnutls-extra	15.0 \
		gnutls-openssl	15.0 \
		gnutls		15.0 \
		gnutlsxx	15.0   # .40.11
@


1.26
log
@revert to 1.24, prodded by espie@@ - we are in lock.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/08/03 09:05:13 lum Exp $
d6 1
d22 1
a22 1
WANTLIB += c gpg-error ncurses readline z
d33 3
a35 3
LIB_DEPENDS=	gcrypt.>=14::security/libgcrypt \
		tasn1::security/libtasn1 \
		lzo2::archivers/lzo2
@


1.25
log
@LIB_DEPEND + WANTLIB clean up.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/04/20 21:10:32 ajacoutot Exp $
d21 1
a21 1
WANTLIB += c gpg-error m ncurses readline stdc++ z
@


1.24
log
@Update to gnutls-2.8.6.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/03/21 10:19:42 ajacoutot Exp $
d21 1
a21 1
WANTLIB += c gpg-error ncurses readline z
@


1.23
log
@Update to gnutls-2.8.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/10/11 13:17:00 kili Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.8.5
@


1.22
log
@Forcibly disable guile.
No effect with the version of guile we've currently in the tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/10/09 23:05:20 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.8.4
@


1.21
log
@Major update to gnutls-2.8.4.
A bulk is about to start with this update and any fallout will be dealt
with during p2k9.

'put it in' jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/07/24 14:37:23 sthen Exp $
d43 1
@


1.20
log
@move to archivers/lzo2, bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2009/05/12 07:50:57 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	gnutls-2.6.6
PKGNAME=	${DISTNAME}p0
d8 4
a11 4
SHARED_LIBS=	gnutls-extra	14.0 \
		gnutls-openssl	14.0 \
		gnutls		14.0 \
		gnutlsxx	14.0   # 37.1
d37 3
@


1.19
log
@- maintainance update to gnutls-2.6.6
Fixes several bugs, and possible memory corruptions and crashes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2009/05/01 10:37:22 ajacoutot Exp $
d6 1
d35 1
a35 1
		lzo::archivers/lzo
@


1.18
log
@- bugfix update to gnutls-2.6.5
tested on amd64 by pea@@, thanks
regress is still happy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/11/18 09:01:53 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.6.5
d7 1
d20 2
a21 1
WANTLIB=		c gpg-error intl ncurses readline z
d31 1
@


1.17
log
@- bugfix update to gnutls-2.6.2
a bug was introduced with previous security release

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/11/12 17:09:25 jasper Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.6.2
@


1.16
log
@- SECURITY UPDATE of gnutls to 2.6.1
fixes CVE-2008-4989: GnuTLS Library X.509 Certificate Chain Validation
Vulnerability

ok landry@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/10/26 10:50:37 landry Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.6.1
@


1.15
log
@Update gnutls to 2.6.0.
Use in-tree security/libtasn1 and archivers/lzo instead of the included ones.
Backport a patch from upstream git to fix symbol conflicts.

ok naddy@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/12/03 20:57:33 landry Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.6.0
@


1.14
log
@Long due update to GnuTLS 2.0.4, based on a submission by Giovanni Bechis.

Reformat DESCR, remove unneeded patches and LIB*ALIAS goo, reformat Makefile
Tested by many, thanks naddy for alpha, kili for zaurus and powerpc, okan
for amd64 and sparc64, sthen for sparc64 and others i forgot.
Ports depending on it have been vastly tested, thanks sthen for iksemel,
aanriot for prelude, Sebastian Reitenbach for heartbeat, and surely others.

ok kili@@ okan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/09/15 23:29:58 merdely Exp $
d5 1
a5 1
DISTNAME=	gnutls-2.0.4
d7 4
a10 4
SHARED_LIBS=	gnutls-extra	13.0 \
		gnutls-openssl	13.0 \
		gnutls		13.0 \
		gnutlsxx	13.0   # 21.5
d14 1
a14 1
# LGPL
d21 1
a21 1
EXTRACT_SUFX=           .tar.bz2
d29 3
a31 2
LIB_DEPENDS=	gcrypt.>=13::security/libgcrypt \
		opencdk.>=9::security/opencdk
a36 1
		--with-included-libtasn1 \
d38 3
a40 3
		--with-included-lzo \
		--with-libgcrypt-prefix=${LOCALBASE} \
		--with-libopencdk-prefix=${LOCALBASE}
d42 1
a42 2
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBS="-liconv"
@


1.13
log
@Remove surrounding quotes in NO_REGRESS/COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/03/15 11:30:07 jolan Exp $
d3 1
a3 1
COMMENT=		GNU Transport Layer Security library
d5 6
a10 12
DISTNAME=		gnutls-1.0.25
PKGNAME=		${DISTNAME}p1
CATEGORIES=		security
SHARED_LIBS=		gnutls-extra	12.25 \
			gnutls-openssl	12.25 \
			gnutls		12.25
MODGNU_SHARED_LIBS=	gnutls-extra	'' \
			gnutls-openssl	'' \
			gnutls		''
LIBgnutls-extra_ALIAS=	realgnutls_extra
LIBgnutls-openssl_ALIAS=gnutls_openssl
LIBgnutls_ALIAS=	realgnutls
d12 1
a12 1
HOMEPAGE=		http://www.gnutls.org/
d19 3
a21 1
WANTLIB=		c gpg-error intl z
d28 3
a30 3
MODULES=	converters/libiconv
LIB_DEPENDS=	gcrypt.>=12::security/libgcrypt \
		opencdk.>=8::security/opencdk
d34 10
a43 7
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
			--with-included-libtasn1 \
			--with-included-libcfg \
			--with-included-lzo
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.12
log
@remove Jim Geovedi as maintainer from all ports' Makefiles per his
request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/08/03 23:28:12 espie Exp $
d3 1
a3 1
COMMENT=		"GNU Transport Layer Security library"
@


1.11
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/12/24 20:52:58 sturm Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
a18 1
MAINTAINER=		Jim Geovedi <jim@@corebsd.or.id>
@


1.10
log
@SHARED_LIBS
USE_LIBTOOL where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/05/11 11:16:07 robert Exp $
d34 2
a35 2
LIB_DEPENDS=	gcrypt.12::security/libgcrypt \
		opencdk.8::security/opencdk
@


1.9
log
@SECURITY:
update gnutls to 1.0.25; regen patches while i am here
http://www.vuxml.org/openbsd/086072e4-c180-11d9-aaa3-00065bd5b0b6.html

ok Jim Geovedi (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/02/21 17:15:43 alek Exp $
d5 2
a6 2
VERSION=		1.0.25
DISTNAME=		gnutls-${VERSION}
d8 9
d36 2
@


1.8
log
@- LIB_DEPENDS=archivers/lzo is not needed as this port uses included
  version of lzo library
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/12/27 13:28:34 alek Exp $
d5 1
a5 1
VERSION=		1.0.20
a6 1
PKGNAME=		${DISTNAME}p0
d19 3
a21 3
MASTER_SITES=	ftp://ftp.gnupg.org/gcrypt/gnutls/ \
		ftp://gd.tuwien.ac.at/privacy/gnupg/gnutls/ \
		http://sunsite.dk/pub/security/gcrypt/gnutls/ \
@


1.8.2.1
log
@SECURITY: update to 1.0.25
fixes a denial of service vulnerability
http://www.vuxml.org/openbsd/086072e4-c180-11d9-aaa3-00065bd5b0b6.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/02/21 17:15:43 alek Exp $
d5 1
a5 1
VERSION=		1.0.25
d7 1
@


1.7
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/09/22 08:06:40 robert Exp $
d7 1
d27 1
a27 2
		opencdk.8::security/opencdk \
		lzo::archivers/lzo
@


1.6
log
@SECURITY:
upgrade to 1.0.20;

Mr.   Hornik   has   discovered  error  in  X.509  certificate chain
verification procedure in GnuTLS library. The certificate chain should
be verified from last root certificate to the first certificate.
Otherwise  a lot of unauthorized CPU processing can be forced to check
certificate signatures signed with arbitrary RSA/DSA keys chosen by
attacker.;

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/09/15 18:35:59 espie Exp $
d17 1
@


1.5
log
@new plists.
gnutls depends on lzo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/08/21 22:04:37 naddy Exp $
d5 1
a5 1
VERSION=		1.0.13
d23 1
@


1.4
log
@Don't pick up external liblzo, always use included one.
XXX  This might warrant reconsideration later on.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/05/08 06:43:40 sturm Exp $
d24 2
a25 1
		opencdk.8::security/opencdk
@


1.3
log
@update to gnutls 1.0.13

from me and maintainer Jim Geovedi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/10/12 02:18:49 brad Exp $
d29 2
a30 1
			--with-included-libcfg
@


1.2
log
@the MAINTAINER of this port was bad and used the wrong version of libtasn1 (too new),
and this breaks gnutls. Use the included copy of libtasn1 for now as a workaround.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/05/02 04:04:31 margarida Exp $
d5 1
a5 1
VERSION=		0.8.6
a6 1
PKGNAME=		${DISTNAME}p1
d18 4
a21 5
MASTER_SITES=	ftp://ftp.gnupg.org/gcrypt/alpha/gnutls/ \
		ftp://gd.tuwien.ac.at/privacy/gnupg/alpha/gnutls/ \
		http://ftp.planetmirror.com/pub/gnupg/alpha/gnutls/ \
		http://sunsite.dk/pub/security/gcrypt/alpha/gnutls/ \
		http://ftp.linux.it/pub/mirrors/gnupg/alpha/gnutls/
d23 2
a24 2
LIB_DEPENDS=	gcrypt.6::security/libgcrypt \
		opencdk.6::security/opencdk
d27 3
a29 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} --with-included-libtasn1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d26 1
a26 2
		opencdk.6::security/opencdk \
		tasn1.2::security/libtasn1
d29 1
a29 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
@


1.1.1.1
log
@Initial import of gnutls-0.8.6
--
GnuTLS is a portable ANSI C based library which implements
the TLS 1.0 and SSL 3.0 protocols.

From: Jim Geovedi <jim@@corebsd.or.id>
@
text
@@
