head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2013.12.20.21.50.58;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2013.12.08.08.31.45;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to gnutls-3.2.8.
@
text
@$OpenBSD: patch-lib_nettle_rnd_c,v 1.1 2013/12/08 08:31:45 ajacoutot Exp $

https://gitorious.org/gnutls/gnutls/commit/346e323228f5cc71664c2f49541f816f88914342
http://lists.gnupg.org/pipermail/gnutls-devel/2013-November/006588.html

--- lib/nettle/rnd.c.orig	Sun Nov 10 18:59:14 2013
+++ lib/nettle/rnd.c	Sun Dec  8 09:15:12 2013
@@@@ -90,8 +90,7 @@@@ static int do_trivia_source(int init)
 	memcpy(&event.now, &current_time, sizeof(event.now));
 #ifdef HAVE_GETRUSAGE
 	if (getrusage(RUSAGE_SELF, &event.rusage) < 0) {
-		_gnutls_debug_log("getrusage failed: %s\n",
-				  strerror(errno));
+		_gnutls_debug_log("getrusage failed\n");
 		abort();
 	}
 #endif
@@@@ -244,8 +243,7 @@@@ static int do_device_source_urandom(int init)
 			if (res <= 0) {
 				if (res < 0) {
 					_gnutls_debug_log
-					    ("Failed to read /dev/urandom: %s\n",
-					     strerror(errno));
+					    ("Failed to read /dev/urandom\n");
 				} else {
 					_gnutls_debug_log
 					    ("Failed to read /dev/urandom: end of file\n");
@


1.1
log
@Update to gnutls-3.2.7.
@
text
@d1 1
a1 1
$OpenBSD$
@

