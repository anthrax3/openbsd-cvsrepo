head	1.11;
access;
symbols
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.3.0.2
	OPENBSD_5_0_BASE:1.3;
locks; strict;
comment	@# @;


1.11
date	2012.07.08.09.02.10;	author ajacoutot;	state dead;
branches;
next	1.10;

1.10
date	2012.07.05.06.36.59;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2012.03.06.16.37.49;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.01.09.14.03.59;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.10.21.15.38.15;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.10.03.15.32.24;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.09.08.11.36.36;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.08.22.09.13.04;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2011.05.04.15.48.10;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.04.15.16.09.39;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.10.15.38.58;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Major update to gnutls-3.0.21.

ok jasper@@
@
text
@$OpenBSD: patch-lib_configure,v 1.10 2012/07/05 06:36:59 ajacoutot Exp $
--- lib/configure.orig	Sun Jun 10 12:47:39 2012
+++ lib/configure	Thu Jul  5 08:22:39 2012
@@@@ -18857,21 +18857,9 @@@@ else
   ZLIB_HAS_PKGCONFIG=n
 fi
 
-if test x$ac_zlib != xno; then
-  if test "$ZLIB_HAS_PKGCONFIG" = "y" ; then
-    if test "x$GNUTLS_REQUIRES_PRIVATE" = "x"; then
-      GNUTLS_REQUIRES_PRIVATE="Requires.private: zlib"
-    else
-      GNUTLS_REQUIRES_PRIVATE="$GNUTLS_REQUIRES_PRIVATE , zlib"
-    fi
-  else
-    GNUTLS_ZLIB_LIBS_PRIVATE="$LTLIBZ"
-  fi
-fi
 
 
 
-
 # Check whether --with-p11-kit was given.
 if test "${with_p11_kit+set}" = set; then :
   withval=$with_p11_kit;
@@@@ -28408,7 +28396,7 @@@@ fi
             done
           fi
           if test "X$found_dir" != "X"; then
-                        LTLIBPTHREAD="${LTLIBPTHREAD}${LTLIBPTHREAD:+ }-L$found_dir -l$name"
+                        LTLIBPTHREAD="${LTLIBPTHREAD}${LTLIBPTHREAD:+ }-L$found_dir -$name"
             if test "X$found_so" != "X"; then
                                                         if test "$enable_rpath" = no || test "X$found_dir" = "X/usr/$acl_libdirstem"; then
                                 LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }$found_so"
@@@@ -28461,7 +28449,7 @@@@ fi
                     if test "$acl_hardcode_minus_L" != no; then
                                                                                         LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }$found_so"
                     else
-                                                                                                                                                                                LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }-l$name"
+                                                                                                                                                                                LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }-$name"
                     fi
                   fi
                 fi
@@@@ -28470,7 +28458,7 @@@@ fi
               if test "X$found_a" != "X"; then
                                 LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }$found_a"
               else
-                                                LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }-L$found_dir -l$name"
+                                                LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }-L$found_dir -$name"
               fi
             fi
                         additional_includedir=
@@@@ -28620,8 +28608,8 @@@@ fi
               done
             fi
           else
-                                                            LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }-l$name"
-            LTLIBPTHREAD="${LTLIBPTHREAD}${LTLIBPTHREAD:+ }-l$name"
+                                                            LIBPTHREAD="${LIBPTHREAD}${LIBPTHREAD:+ }-$name"
+            LTLIBPTHREAD="${LTLIBPTHREAD}${LTLIBPTHREAD:+ }-$name"
           fi
         fi
       fi
@


1.10
log
@Bugfix update to gnutls-2.12.20.
* fixed memory leak in PKCS #8 key import
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_configure,v 1.9 2012/03/06 16:37:49 ajacoutot Exp $
@


1.9
log
@Minor update to gnutls-2.12.17.
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_configure,v 1.8 2012/01/09 14:03:59 ajacoutot Exp $
--- lib/configure.orig	Thu Mar  1 17:51:56 2012
+++ lib/configure	Tue Mar  6 17:26:21 2012
@@@@ -18835,21 +18835,9 @@@@ else
d26 1
a26 1
@@@@ -28386,7 +28374,7 @@@@ fi
d35 1
a35 1
@@@@ -28439,7 +28427,7 @@@@ fi
d44 1
a44 1
@@@@ -28448,7 +28436,7 @@@@ fi
d53 1
a53 1
@@@@ -28598,8 +28586,8 @@@@ fi
@


1.8
log
@Minor update to gnutls-2.12.16.
* corrected functionality of gnutls_record_get_direction()
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_configure,v 1.7 2011/10/21 15:38:15 ajacoutot Exp $
--- lib/configure.orig	Fri Jan  6 21:50:21 2012
+++ lib/configure	Mon Jan  9 14:45:45 2012
@@@@ -18782,21 +18782,9 @@@@ else
d26 1
a26 1
@@@@ -27837,7 +27825,7 @@@@ fi
d35 1
a35 1
@@@@ -27890,7 +27878,7 @@@@ fi
d44 1
a44 1
@@@@ -27899,7 +27887,7 @@@@ fi
d53 1
a53 1
@@@@ -28049,8 +28037,8 @@@@ fi
@


1.7
log
@Small bugfix update to gnutls-2.12.12.
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_configure,v 1.6 2011/10/03 15:32:24 ajacoutot Exp $
--- lib/configure.orig	Thu Oct 20 20:59:56 2011
+++ lib/configure	Fri Oct 21 17:21:51 2011
@@@@ -18729,21 +18729,9 @@@@ else
d26 1
a26 1
@@@@ -27784,7 +27772,7 @@@@ fi
d35 1
a35 1
@@@@ -27837,7 +27825,7 @@@@ fi
d44 1
a44 1
@@@@ -27846,7 +27834,7 @@@@ fi
d53 1
a53 1
@@@@ -27996,8 +27984,8 @@@@ fi
@


1.6
log
@Bugfix update to gnutls-2.12.11.
* libgnutls: Memory leak fixes in credentials private key deinitialization.
* libgnutls: Allow CA importing of 0 certificates to succeed.
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_configure,v 1.5 2011/09/08 11:36:36 ajacoutot Exp $
--- lib/configure.orig	Sun Sep 18 20:31:32 2011
+++ lib/configure	Mon Oct  3 17:00:27 2011
@@@@ -18577,21 +18577,9 @@@@ else
d26 1
a26 1
@@@@ -26951,7 +26939,7 @@@@ fi
d35 1
a35 1
@@@@ -27004,7 +26992,7 @@@@ fi
d44 1
a44 1
@@@@ -27013,7 +27001,7 @@@@ fi
d53 1
a53 1
@@@@ -27163,8 +27151,8 @@@@ fi
@


1.5
log
@Bugfix update to gnutls-2.12.10.
@
text
@d1 3
a3 3
$OpenBSD: patch-lib_configure,v 1.4 2011/08/22 09:13:04 ajacoutot Exp $
--- lib/configure.orig	Thu Sep  1 10:10:01 2011
+++ lib/configure	Thu Sep  8 13:35:34 2011
d26 1
a26 1
@@@@ -26946,7 +26934,7 @@@@ fi
d35 1
a35 1
@@@@ -26999,7 +26987,7 @@@@ fi
d44 1
a44 1
@@@@ -27008,7 +26996,7 @@@@ fi
d53 1
a53 1
@@@@ -27158,8 +27146,8 @@@@ fi
@


1.4
log
@Bugfix update to gnutls-2.12.9.
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_configure,v 1.3 2011/05/04 15:48:10 ajacoutot Exp $
--- lib/configure.orig	Sun Aug 21 00:21:59 2011
+++ lib/configure	Mon Aug 22 10:59:11 2011
@@@@ -17354,21 +17354,9 @@@@ else
d26 1
a26 1
@@@@ -24782,7 +24770,7 @@@@ fi
d35 1
a35 1
@@@@ -24835,7 +24823,7 @@@@ fi
d44 1
a44 1
@@@@ -24844,7 +24832,7 @@@@ fi
d53 1
a53 1
@@@@ -24994,8 +24982,8 @@@@ fi
@


1.3
log
@Bugfix update to gnutls-2.12.3.
Incidentally fixes a build breakage when libgcrypt wasn't installed as
spotted by jasper@@
@
text
@d1 5
a5 5
$OpenBSD: patch-lib_configure,v 1.2 2011/04/15 16:09:39 ajacoutot Exp $
--- lib/configure.orig	Fri Apr 22 13:40:04 2011
+++ lib/configure	Wed May  4 14:34:57 2011
@@@@ -17201,19 +17201,11 @@@@ else
 $as_echo "no" >&6; }
d9 6
a14 2
-  if test x$GNUTLS_REQUIRES_PRIVATE = x; then
-    GNUTLS_REQUIRES_PRIVATE="Requires.private: zlib"
d16 1
a16 1
-    GNUTLS_REQUIRES_PRIVATE="$GNUTLS_REQUIRES_PRIVATE , zlib"
a21 2
 
 
d23 4
a26 4
           LIBC_FATAL_STDERR_=1
   export LIBC_FATAL_STDERR_
 
@@@@ -24527,7 +24519,7 @@@@ fi
d35 1
a35 1
@@@@ -24580,7 +24572,7 @@@@ fi
d44 1
a44 1
@@@@ -24589,7 +24581,7 @@@@ fi
d53 1
a53 1
@@@@ -24739,8 +24731,8 @@@@ fi
@


1.2
log
@Major update to gnutls-2.12.2.

tested by landry@@ in a bulk, thanks!
ok jasper@@ landry@@
@
text
@d1 4
a4 4
$OpenBSD$
--- lib/configure.orig	Fri Apr  8 18:17:13 2011
+++ lib/configure	Wed Apr 13 12:43:14 2011
@@@@ -17863,19 +17863,11 @@@@ else
d24 1
a24 1
@@@@ -25189,7 +25181,7 @@@@ fi
d33 1
a33 1
@@@@ -25242,7 +25234,7 @@@@ fi
d42 1
a42 1
@@@@ -25251,7 +25243,7 @@@@ fi
d51 1
a51 1
@@@@ -25401,8 +25393,8 @@@@ fi
@


1.1
log
@Fix pkg-config file.
This unbreaks libprelude as reported by Markus Lude.
@
text
@d2 3
a4 6

libz is in base and we don't provide a pkg-config file for it.

--- lib/configure.orig	Thu Mar 10 16:27:32 2011
+++ lib/configure	Thu Mar 10 16:28:18 2011
@@@@ -16642,14 +16642,6 @@@@ else
d9 1
a9 1
-  if test "$GNUTLS_REQUIRES_PRIVATE" = ""; then
a14 1
-
d18 44
@

