head	1.7;
access;
symbols
	OPENBSD_6_2:1.7.0.4
	OPENBSD_6_2_BASE:1.7
	OPENBSD_6_1:1.7.0.2
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.6
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2016.10.07.14.44.03;	author dcoppa;	state Exp;
branches;
next	1.6;
commitid	oosOV9xON6wYGLhd;

1.6
date	2016.05.17.08.29.27;	author dcoppa;	state Exp;
branches;
next	1.5;
commitid	ReQtRzQEqIdWFNFD;

1.5
date	2015.09.29.11.57.54;	author dcoppa;	state Exp;
branches
	1.5.2.1;
next	1.4;
commitid	eUPwvhQd2xz5DvUR;

1.4
date	2015.03.18.15.35.44;	author dcoppa;	state Exp;
branches;
next	1.3;
commitid	k7Ip5jXq6W4LNwFV;

1.3
date	2014.09.02.13.04.34;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	bDCrwYo4jQ0AgfoU;

1.2
date	2014.03.18.05.57.22;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.04.10.04.44;	author sthen;	state Exp;
branches;
next	;

1.5.2.1
date	2016.05.18.07.42.10;	author jasper;	state Exp;
branches;
next	;
commitid	AlK7BcLnptgRcE3L;


desc
@@


1.7
log
@
Update to wpa_supplicant-2.6

Tested by pascal@@ and Laurence Tratt
feedback by sthen@@
@
text
@$OpenBSD: patch-src_utils_eloop_c,v 1.6 2016/05/17 08:29:27 dcoppa Exp $

Don't try to access list members to free them unless already
initialised

--- src/utils/eloop.c.orig	Sun Oct  2 20:51:11 2016
+++ src/utils/eloop.c	Mon Oct  3 11:06:38 2016
@@@@ -1249,6 +1249,9 @@@@ void eloop_destroy(void)
 	struct eloop_timeout *timeout, *prev;
 	struct os_reltime now;
 
+	if (eloop.timeout.prev == NULL)
+		return;
+
 	os_get_reltime(&now);
 	dl_list_for_each_safe(timeout, prev, &eloop.timeout,
 			      struct eloop_timeout, list) {
@


1.6
log
@
Apply upstream fixes for CVE-2016-4476 and CVE-2016-4477
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utils_eloop_c,v 1.5 2015/09/29 11:57:54 dcoppa Exp $
d6 3
a8 3
--- src/utils/eloop.c.orig	Sun Sep 27 21:02:05 2015
+++ src/utils/eloop.c	Mon Sep 28 09:35:05 2015
@@@@ -1064,6 +1064,9 @@@@ void eloop_destroy(void)
@


1.5
log
@
Update to wpa_supplicant-2.5

Tested by me, Gregor Best, and sthen@@

Help and ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utils_eloop_c,v 1.4 2015/03/18 15:35:44 dcoppa Exp $
d3 2
a4 1
don't try to access list members to free them unless already initialised
@


1.5.2.1
log
@security fixes for CVE-2016-4476 and CVE-2016-4477
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utils_eloop_c,v 1.6 2016/05/17 08:29:27 dcoppa Exp $
d3 1
a3 2
Don't try to access list members to free them unless already
initialised
@


1.4
log
@
Update to wpa_supplicant-2.4

Tested by pascal@@ and Fabian Raetz

OK pascal@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utils_eloop_c,v 1.3 2014/09/02 13:04:34 dcoppa Exp $
d5 3
a7 3
--- src/utils/eloop.c.orig	Sun Mar 15 12:30:39 2015
+++ src/utils/eloop.c	Wed Mar 18 04:20:32 2015
@@@@ -1035,6 +1035,9 @@@@ void eloop_destroy(void)
@


1.3
log
@
Update to wpa_supplicant-2.2

Tested by pascal@@ and myself.
I also take maintainership, as per sthen's request.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utils_eloop_c,v 1.2 2014/03/18 05:57:22 dcoppa Exp $
d5 3
a7 3
--- src/utils/eloop.c.orig	Wed Jun  4 15:26:14 2014
+++ src/utils/eloop.c	Tue Sep  2 13:00:23 2014
@@@@ -1033,6 +1033,9 @@@@ void eloop_destroy(void)
@


1.2
log
@
Update to wpa_supplicant-2.1.

Tested by pascal@@ and Gregor Best

OK sthen@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utils_eloop_c,v 1.1 2013/02/04 10:04:44 sthen Exp $
d5 3
a7 3
--- src/utils/eloop.c.orig	Fri Mar 14 10:39:29 2014
+++ src/utils/eloop.c	Fri Mar 14 10:41:10 2014
@@@@ -887,6 +887,9 @@@@ void eloop_destroy(void)
@


1.1
log
@don't try to access list members to free them unless already initialised;
fixes a crash with wpa_priv usage(); wpa_priv not yet enabled
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- src/utils/eloop.c.orig	Sat Jan 12 15:42:53 2013
+++ src/utils/eloop.c	Sat Feb  2 12:11:26 2013
@@@@ -793,6 +793,9 @@@@ void eloop_destroy(void)
d9 1
a9 1
 	struct os_time now;
d14 1
a14 1
 	os_get_time(&now);
@

