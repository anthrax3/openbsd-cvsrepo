head	1.9;
access;
symbols
	OPENBSD_6_1:1.9.0.2
	OPENBSD_6_1_BASE:1.9
	OPENBSD_6_0:1.8.0.4
	OPENBSD_6_0_BASE:1.8
	OPENBSD_5_9:1.8.0.2
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.7.0.4
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.5.0.2
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.1.0.6
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2016.10.07.14.44.03;	author dcoppa;	state Exp;
branches;
next	1.8;
commitid	oosOV9xON6wYGLhd;

1.8
date	2015.09.29.11.57.54;	author dcoppa;	state Exp;
branches;
next	1.7;
commitid	eUPwvhQd2xz5DvUR;

1.7
date	2015.07.19.21.44.07;	author jasper;	state Exp;
branches;
next	1.6;
commitid	8pPFGQ9p45ZMEZqc;

1.6
date	2015.03.18.15.35.44;	author dcoppa;	state Exp;
branches;
next	1.5;
commitid	k7Ip5jXq6W4LNwFV;

1.5
date	2014.10.13.07.32.11;	author dcoppa;	state Exp;
branches;
next	1.4;
commitid	QVgVH5owHpPVF2zS;

1.4
date	2014.10.11.17.55.50;	author dcoppa;	state Exp;
branches;
next	1.3;
commitid	eu0Zj6Wp6NdEwM3D;

1.3
date	2014.03.23.20.02.14;	author kili;	state Exp;
branches;
next	1.2;

1.2
date	2014.03.18.05.57.22;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2013.01.28.11.03.16;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.9
log
@
Update to wpa_supplicant-2.6

Tested by pascal@@ and Laurence Tratt
feedback by sthen@@
@
text
@$OpenBSD: patch-wpa_supplicant_Makefile,v 1.8 2015/09/29 11:57:54 dcoppa Exp $
--- wpa_supplicant/Makefile.orig	Sun Oct  2 20:51:11 2016
+++ wpa_supplicant/Makefile	Mon Oct  3 11:06:38 2016
@@@@ -153,16 +153,6 @@@@ endif
 OBJS += ../src/utils/$(CONFIG_ELOOP).o
 OBJS_c += ../src/utils/$(CONFIG_ELOOP).o
 
-ifndef CONFIG_OSX
-ifeq ($(CONFIG_ELOOP), eloop)
-# Using glibc < 2.17 requires -lrt for clock_gettime()
-# OS X has an alternate implementation
-LIBS += -lrt
-LIBS_c += -lrt
-LIBS_p += -lrt
-endif
-endif
-
 ifdef CONFIG_ELOOP_POLL
 CFLAGS += -DCONFIG_ELOOP_POLL
 endif
@


1.8
log
@
Update to wpa_supplicant-2.5

Tested by me, Gregor Best, and sthen@@

Help and ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.7 2015/07/19 21:44:07 jasper Exp $
--- wpa_supplicant/Makefile.orig	Mon Sep 28 09:36:07 2015
+++ wpa_supplicant/Makefile	Mon Sep 28 09:36:36 2015
@@@@ -131,16 +131,6 @@@@ endif
@


1.7
log
@use install -D and drop ginstall dependency where applicable
@
text
@d1 4
a4 5
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.6 2015/03/18 15:35:44 dcoppa Exp $
--- wpa_supplicant/Makefile.orig	Sun Mar 15 12:30:39 2015
+++ wpa_supplicant/Makefile	Wed Mar 18 04:20:32 2015
@@@@ -121,13 +121,6 @@@@ CONFIG_ELOOP=eloop
 endif
d7 2
a8 1
-
d11 1
d16 2
a17 1
 
d20 1
@


1.6
log
@
Update to wpa_supplicant-2.4

Tested by pascal@@ and Fabian Raetz

OK pascal@@
@
text
@d1 1
a1 1
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.5 2014/10/13 07:32:11 dcoppa Exp $
a3 9
@@@@ -57,7 +57,7 @@@@ mkconfig:
 	echo CONFIG_DRIVER_WEXT=y >> .config
 
 $(DESTDIR)$(BINDIR)/%: %
-	install -D $(<) $(@@)
+	install $(<) $(@@)
 
 install: $(addprefix $(DESTDIR)$(BINDIR)/,$(BINALL))
 	$(MAKE) -C ../src install
@


1.5
log
@
Use the patch from upstream
(git commit 2d4e9c2eb811978a4097b7d249eca3c7e9c510e5)
@
text
@d1 4
a4 20
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.4 2014/10/11 17:55:50 dcoppa Exp $

commit 2d4e9c2eb811978a4097b7d249eca3c7e9c510e5
Author: Jouni Malinen <j@@w1.fi>
Date:   Sun Oct 12 17:03:25 2014 +0300

Include ieee802_11_common.c in wpa_supplicant build unconditionally

This is needed for number of items and it was possible to make a build
configuration that did not include ieee802_11_common.c while still
trying to use functions from there. While it would be possible to add
NEED_80211_COMMON=y to all the cases where this file is needed, the
extra complexity from this is not really justifiable anymore, so include
the file unconditionally.

Signed-off-by: Jouni Malinen <j@@w1.fi>

--- wpa_supplicant/Makefile.orig	Thu Oct  9 16:41:31 2014
+++ wpa_supplicant/Makefile	Mon Oct 13 09:23:16 2014
@@@@ -56,7 +56,7 @@@@ mkconfig:
d13 2
a14 1
@@@@ -119,13 +119,6 @@@@ endif
d17 1
a17 1
 
d24 1
a24 1
-
a26 48
 endif
@@@@ -194,7 +187,6 @@@@ endif
 ifdef CONFIG_IEEE80211R
 CFLAGS += -DCONFIG_IEEE80211R
 OBJS += ../src/rsn_supp/wpa_ft.o
-NEED_80211_COMMON=y
 NEED_SHA256=y
 NEED_AES_OMAC1=y
 endif
@@@@ -264,7 +256,6 @@@@ OBJS += ../src/utils/bitfield.o
 CFLAGS += -DCONFIG_P2P
 NEED_GAS=y
 NEED_OFFCHANNEL=y
-NEED_80211_COMMON=y
 CONFIG_WPS=y
 CONFIG_AP=y
 ifdef CONFIG_P2P_STRICT
@@@@ -635,7 +626,6 @@@@ CONFIG_IEEE8021X_EAPOL=y
 NEED_DH_GROUPS=y
 NEED_SHA256=y
 NEED_BASE64=y
-NEED_80211_COMMON=y
 NEED_AES_CBC=y
 NEED_MODEXP=y
 
@@@@ -757,7 +747,6 @@@@ OBJS += ../src/pae/ieee802_1x_secy_ops.o
 endif
 
 ifdef CONFIG_AP
-NEED_80211_COMMON=y
 NEED_EAP_COMMON=y
 NEED_RSN_AUTHENTICATOR=y
 CFLAGS += -DCONFIG_AP
@@@@ -1386,14 +1375,11 @@@@ OBJS += ../src/utils/base64.o
 endif
 
 ifdef NEED_SME
-NEED_80211_COMMON=y
 OBJS += sme.o
 CFLAGS += -DCONFIG_SME
 endif
 
-ifdef NEED_80211_COMMON
 OBJS += ../src/common/ieee802_11_common.o
-endif
 
 ifdef NEED_EAP_COMMON
 OBJS += ../src/eap_common/eap_common.o
@


1.4
log
@
Update to wpa_supplicant-2.3

tested by myself (wired 802.1x) and pascal@@ (eduroam)

ok pascal@@
@
text
@d1 17
a17 1
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.3 2014/03/23 20:02:14 kili Exp $
d19 1
a19 1
+++ wpa_supplicant/Makefile	Fri Oct 10 11:02:04 2014
d43 38
a80 1
@@@@ -1391,9 +1384,7 @@@@ OBJS += sme.o
@


1.3
log
@Don't try to link against librt.

ok dcoppa@@
@
text
@d1 3
a3 3
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.2 2014/03/18 05:57:22 dcoppa Exp $
--- wpa_supplicant/Makefile.orig	Tue Feb  4 12:23:35 2014
+++ wpa_supplicant/Makefile	Sun Mar 23 19:45:14 2014
d13 1
a13 2
@@@@ -118,13 +118,6 @@@@ CONFIG_ELOOP=eloop
 endif
d16 1
a16 1
-
d23 1
a23 1
 
d26 11
@


1.2
log
@
Update to wpa_supplicant-2.1.

Tested by pascal@@ and Gregor Best

OK sthen@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-wpa_supplicant_Makefile,v 1.1 2013/01/28 11:03:16 sthen Exp $
d3 1
a3 1
+++ wpa_supplicant/Makefile	Fri Mar 14 10:54:28 2014
d13 14
@


1.1
log
@- update WPA-Supplicant to 2.0
- add OpenBSD WPA support written by kettenis@@ (also tested by matthieu@@
and Gregor Best)
- enable smartcard support via PCSC-Lite
- garbage collect OS compatibility patches which are no longer needed
(one found by me, one by kettenis@@)

ok phessler@@
@
text
@d1 4
a4 4
$OpenBSD$
--- wpa_supplicant/Makefile.orig	Fri Jan 25 23:16:50 2013
+++ wpa_supplicant/Makefile	Fri Jan 25 23:16:53 2013
@@@@ -50,7 +50,7 @@@@ mkconfig:
@

