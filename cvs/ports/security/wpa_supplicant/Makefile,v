head	1.35;
access;
symbols
	OPENBSD_6_1:1.35.0.2
	OPENBSD_6_1_BASE:1.35
	OPENBSD_6_0:1.33.0.2
	OPENBSD_6_0_BASE:1.33
	OPENBSD_5_9:1.32.0.2
	OPENBSD_5_9_BASE:1.32
	OPENBSD_5_8:1.28.0.4
	OPENBSD_5_8_BASE:1.28
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.18.0.2
	OPENBSD_5_6_BASE:1.18
	OPENBSD_5_5:1.13.0.2
	OPENBSD_5_5_BASE:1.13
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.11.0.2
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.5.0.4
	OPENBSD_5_2_BASE:1.5
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.2
	OPENBSD_5_0:1.4.0.4
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.2.0.8
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.6
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.4
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.2
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.1.0.6
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.4
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.2
	OPENBSD_4_2_BASE:1.1;
locks; strict;
comment	@# @;


1.35
date	2017.02.08.12.53.46;	author sthen;	state Exp;
branches;
next	1.34;
commitid	m7QNfqiYWR19SwJ2;

1.34
date	2016.10.07.14.44.03;	author dcoppa;	state Exp;
branches;
next	1.33;
commitid	oosOV9xON6wYGLhd;

1.33
date	2016.05.17.08.29.27;	author dcoppa;	state Exp;
branches;
next	1.32;
commitid	ReQtRzQEqIdWFNFD;

1.32
date	2015.11.02.11.56.54;	author espie;	state Exp;
branches
	1.32.2.1;
next	1.31;
commitid	ox8NBCUwS6UB4UwE;

1.31
date	2015.10.08.21.19.22;	author sthen;	state Exp;
branches;
next	1.30;
commitid	pVDZUjJm7yyuQSI1;

1.30
date	2015.09.29.11.57.54;	author dcoppa;	state Exp;
branches;
next	1.29;
commitid	eUPwvhQd2xz5DvUR;

1.29
date	2015.09.11.16.38.04;	author sthen;	state Exp;
branches;
next	1.28;
commitid	rKlmQ7q9Zn7CziYo;

1.28
date	2015.05.18.04.56.33;	author dcoppa;	state Exp;
branches;
next	1.27;
commitid	qboS5jjJ59CctgJv;

1.27
date	2015.05.15.13.11.32;	author dcoppa;	state Exp;
branches;
next	1.26;
commitid	GDo6HGOmOSeqpYY5;

1.26
date	2015.04.06.16.03.45;	author schwarze;	state Exp;
branches;
next	1.25;
commitid	9UD4PEcOdx7au9gQ;

1.25
date	2015.04.02.17.32.24;	author sthen;	state Exp;
branches;
next	1.24;
commitid	AeHTzxvL1JTVIf6Y;

1.24
date	2015.03.18.15.35.43;	author dcoppa;	state Exp;
branches;
next	1.23;
commitid	k7Ip5jXq6W4LNwFV;

1.23
date	2014.10.11.17.55.49;	author dcoppa;	state Exp;
branches;
next	1.22;
commitid	eu0Zj6Wp6NdEwM3D;

1.22
date	2014.09.30.07.18.48;	author dcoppa;	state Exp;
branches;
next	1.21;
commitid	L7bq7DC9rOZOSCRv;

1.21
date	2014.09.08.08.28.23;	author dcoppa;	state Exp;
branches;
next	1.20;
commitid	YNZ15ltaRNVif8WD;

1.20
date	2014.09.05.13.18.41;	author dcoppa;	state Exp;
branches;
next	1.19;
commitid	pSlXeKaUmv2Crbi9;

1.19
date	2014.09.02.13.04.34;	author dcoppa;	state Exp;
branches;
next	1.18;
commitid	bDCrwYo4jQ0AgfoU;

1.18
date	2014.07.22.10.55.41;	author ajacoutot;	state Exp;
branches;
next	1.17;
commitid	3LzguPEQl5LkjlcD;

1.17
date	2014.07.12.11.25.00;	author sthen;	state Exp;
branches;
next	1.16;
commitid	76ij4rO0HAnPaXZj;

1.16
date	2014.06.02.20.12.53;	author sthen;	state Exp;
branches;
next	1.15;
commitid	spIbQye1T9CHZphs;

1.15
date	2014.06.02.11.26.21;	author sthen;	state Exp;
branches;
next	1.14;
commitid	cCo1QKjA4cnhHcqT;

1.14
date	2014.03.18.05.57.22;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2013.10.31.21.12.13;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2013.03.11.11.41.28;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2013.02.07.12.32.08;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2013.02.06.17.27.13;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2013.02.04.10.04.44;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.01.28.11.56.55;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2013.01.28.11.36.09;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2013.01.28.11.03.16;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2012.01.19.16.14.11;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.20.17.22.45;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.10.18.21.41.47;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2008.08.28.12.50.38;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2007.07.01.19.50.57;	author reyk;	state Exp;
branches;
next	;

1.32.2.1
date	2016.05.18.07.42.10;	author jasper;	state Exp;
branches;
next	;
commitid	AlK7BcLnptgRcE3L;


desc
@@


1.35
log
@Patch wpa-supplicant to set DEFAULT_AP_SCAN 0, the scan code doesn't handle
OpenBSD. Remove ap_scan=0 from default config as suggested by / ok dcoppa.

README still mentions ap_scan=0; as discussed with tb@@ some institutions
provide sample config files which do include other ap_scan settings so
I think it's still helpful there.
@
text
@# $OpenBSD: Makefile,v 1.34 2016/10/07 14:44:03 dcoppa Exp $

COMMENT=	IEEE 802.1X supplicant

DISTNAME=	wpa_supplicant-2.6
REVISION=	0
CATEGORIES=	security net

HOMEPAGE=	http://w1.fi/wpa_supplicant/

MAINTAINER=	David Coppa <dcoppa@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c ssl crypto pcap pcsclite pthread

LIB_DEPENDS=	security/pcsc-lite

MASTER_SITES=	http://w1.fi/releases/

USE_GMAKE=	Yes
NO_TEST=	Yes
MAKE_FLAGS=	V=1
MAKE_ENV=	CFLAGS="${CFLAGS}" CC="${CC}"

WRKSRC=		${WRKDIST}/wpa_supplicant

EXAMPLEDIR=	${PREFIX}/share/examples/wpa_supplicant

post-extract:
	@@${SUBST_CMD} -m 444 -c ${FILESDIR}/config ${WRKSRC}/.config

post-install:
	@@#${INSTALL_PROGRAM} ${WRKBUILD}/wpa_priv ${PREFIX}/sbin
	${INSTALL_MAN} ${WRKBUILD}/doc/docbook/*.5 ${PREFIX}/man/man5/
	${INSTALL_MAN} ${WRKBUILD}/doc/docbook/*.8 ${PREFIX}/man/man8/
	${INSTALL_DATA_DIR} ${EXAMPLEDIR}
	${INSTALL_DATA}  ${WRKBUILD}/wpa_supplicant.conf \
		${EXAMPLEDIR}/wpa_supplicant.conf.dist
	${INSTALL_DATA}  ${FILESDIR}/wpa_supplicant.conf \
		${EXAMPLEDIR}/wpa_supplicant.conf

.include <bsd.port.mk>
@


1.34
log
@
Update to wpa_supplicant-2.6

Tested by pascal@@ and Laurence Tratt
feedback by sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/05/17 08:29:27 dcoppa Exp $
d6 1
@


1.33
log
@
Apply upstream fixes for CVE-2016-4476 and CVE-2016-4477
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/11/02 11:56:54 espie Exp $
d5 1
a5 1
DISTNAME=	wpa_supplicant-2.5
a6 1
REVISION=	1
@


1.32
log
@a few minor pkg_subst fixes, for the coming patch (disallow -c without -m
outside of WRKDIR)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/10/08 21:19:22 sthen Exp $
d7 1
a7 1
REVISION=	0
@


1.32.2.1
log
@security fixes for CVE-2016-4476 and CVE-2016-4477
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/11/02 11:56:54 espie Exp $
d7 1
a7 1
REVISION=	1
@


1.31
log
@Bump some ports which reference if_msghdr in their source, so that package
updates are triggered. This is following the struct if_data ABI change a few
days ago; if_msghdr has an embedded if_data.  Some may be unnecessary, but
some are definitely needed and bumps are cheaper than debugging.
Problem reported with wpa_supplicant by Mikolaj Kucharski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/09/29 11:57:54 dcoppa Exp $
d32 1
a32 1
	@@${SUBST_CMD} -c ${FILESDIR}/config ${WRKSRC}/.config
@


1.30
log
@
Update to wpa_supplicant-2.5

Tested by me, Gregor Best, and sthen@@

Help and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/09/11 16:38:04 sthen Exp $
d7 1
@


1.29
log
@bump; ifmedia64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2015/05/18 04:56:33 dcoppa Exp $
d5 1
a5 2
DISTNAME=	wpa_supplicant-2.4
REVISION=	3
@


1.28
log
@
/etc/wpa_supplicant.conf may also contain passwords, so enforce the
right permissions here too.

From Tim van der Molen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2015/05/15 13:11:32 dcoppa Exp $
d6 1
a6 1
REVISION=	2
@


1.27
log
@
HOMEPAGE/MASTER_SITES changed some time ago
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/04/06 16:03:45 schwarze Exp $
d6 1
a6 1
REVISION=	1
@


1.26
log
@Drop USE_GROFF (identical output).  No bump needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/04/02 17:32:24 sthen Exp $
d6 1
a6 1
REVISION=	0
d9 1
a9 1
HOMEPAGE=	http://hostap.epitest.fi/wpa_supplicant/
d20 1
a20 1
MASTER_SITES=	http://hostap.epitest.fi/releases/
@


1.25
log
@add a commented-out config line to help out with people who have auth servers
that don't like attempts to connect with TLSv1.1/1.2 (recent update moved from
using TLSv1.0 only).  ok dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/03/18 15:35:43 dcoppa Exp $
a22 1
USE_GROFF=	Yes
@


1.24
log
@
Update to wpa_supplicant-2.4

Tested by pascal@@ and Fabian Raetz

OK pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/10/11 17:55:49 dcoppa Exp $
d6 1
@


1.23
log
@
Update to wpa_supplicant-2.3

tested by myself (wired 802.1x) and pascal@@ (eduroam)

ok pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/09/30 07:18:48 dcoppa Exp $
d5 1
a5 1
DISTNAME=	wpa_supplicant-2.3
@


1.22
log
@
util: Don't use "\e"

'\e' representing ESC (0x1b) is not C standard, it's a GNU extension.
https://gcc.gnu.org/onlinedocs/gcc/Character-Escapes.html#Character-Escapes

upstream git commit a8833b84f46626b6fb9e9f277137f26acc72c64e
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/09/08 08:28:23 dcoppa Exp $
d5 1
a5 2
DISTNAME=	wpa_supplicant-2.2
REVISION=	2
@


1.21
log
@
Zap Linuxisms from usage()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/09/05 13:18:41 dcoppa Exp $
d6 1
a6 1
REVISION=	1
@


1.20
log
@
Fix validation of EAPOL-Key length with AES key wrap
(upstream git commit b7c61c9d4e968e7254112631a9f6a1a1f8ef6f7f)

pkg/README: avoid confusion, we were talking about so many interfaces...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/09/02 13:04:34 dcoppa Exp $
d6 1
a6 1
REVISION=	0
@


1.19
log
@
Update to wpa_supplicant-2.2

Tested by pascal@@ and myself.
I also take maintainership, as per sthen's request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/07/22 10:55:41 ajacoutot Exp $
d6 1
@


1.18
log
@Tweak documentation according to recent rc changes.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2014/07/12 11:25:00 sthen Exp $
d5 1
a5 2
DISTNAME=	wpa_supplicant-2.1
REVISION=	2
d10 1
a10 1
MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>
@


1.17
log
@don't use "echo 'pkg_scripts="${pkg_scripts} icinga' >> /etc/rc.conf.local"
examples
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/06/02 20:12:53 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.16
log
@Update license marker; as of Feb 2012 this is no longer dual GPL/BSD, it is
just plain 3-clause BSD. No pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/06/02 11:26:21 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.15
log
@off-by-one in length checking in printf_encode, crash reported by jirib at
devio dot us
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/03/18 05:57:22 dcoppa Exp $
d13 1
a13 1
# Dual BSD/GPL
@


1.14
log
@
Update to wpa_supplicant-2.1.

Tested by pascal@@ and Gregor Best

OK sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/10/31 21:12:13 sthen Exp $
d6 1
@


1.13
log
@bump REVISION for any ports using route messages. regen some distinfos and
remove unnecessary USE_GROFFs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/03/11 11:41:28 espie Exp $
d5 1
a5 2
DISTNAME=	wpa_supplicant-2.0
REVISION=	4
a32 1
	@@cp ${FILESDIR}/driver_openbsd.c ${WRKSRC}/../src/drivers/
@


1.12
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/02/07 12:32:08 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.11
log
@take MAINTAINER, suggested by reyk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/02/06 17:27:13 sthen Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d24 1
a24 1
NO_REGRESS=	Yes
@


1.10
log
@- enable reading PKCS12 certificates from files; from Gregor Best who
wants this for use with Eduroam.

- add an rc script and README.

- remove non-useful wpa_priv patch.

README tweak from ajacoutot, ok gsoares dcoppa
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/02/04 10:04:44 sthen Exp $
d6 1
a6 1
REVISION=	2
d11 1
a11 1
MAINTAINER=	Reyk Floeter <reyk@@openbsd.org>
@


1.9
log
@don't try to access list members to free them unless already initialised;
fixes a crash with wpa_priv usage(); wpa_priv not yet enabled
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/01/28 11:56:55 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.8
log
@update DESCR, pointed out by stsp
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/01/28 11:36:09 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.7
log
@honour CFLAGS/CC
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/01/28 11:03:16 sthen Exp $
d6 1
@


1.6
log
@- update WPA-Supplicant to 2.0
- add OpenBSD WPA support written by kettenis@@ (also tested by matthieu@@
and Gregor Best)
- enable smartcard support via PCSC-Lite
- garbage collect OS compatibility patches which are no longer needed
(one found by me, one by kettenis@@)

ok phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/01/19 16:14:11 sthen Exp $
d28 1
@


1.5
log
@update to wpa_supplicant 0.7.3 - as noted by Martin Pelikan the version
in-tree is currently broken and this fixes it for him.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/20 17:22:45 espie Exp $
d5 1
a5 1
DISTNAME=	wpa_supplicant-0.7.3
d18 3
a20 1
WANTLIB += c ssl crypto pcap
a30 3
MAN5=	wpa_supplicant.conf.5
MAN8=	wpa_background.8 wpa_cli.8 wpa_passphrase.8 wpa_supplicant.8

d34 2
a35 1
	cp ${FILESDIR}/config ${WRKSRC}/.config
d38 1
@


1.4
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/10/18 21:41:47 espie Exp $
d5 1
a5 2
DISTNAME=	wpa_supplicant-0.5.8
REVISION =	0
d10 1
a10 1
MAINTAINER=	Reyk Floeter <reyk@@openbsd.org>	
d17 2
a18 1
WANTLIB=		c ssl crypto pcap
d23 1
a23 1
USE_GROFF =	Yes
d25 3
d34 3
d38 2
a39 11

.for m in ${MAN5}
	${INSTALL_MAN} ${WRKBUILD}/doc/docbook/${m} \
		${PREFIX}/man/man5/
.endfor

.for n in ${MAN8}
	${INSTALL_MAN} ${WRKBUILD}/doc/docbook/${n} \
		${PREFIX}/man/man8/
.endfor

@


1.3
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/08/28 12:50:38 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.2
log
@Fix typo - ok reyk@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2007/07/01 19:50:57 reyk Exp $
d23 1
@


1.1
log
@Add security/wpa_supplicant, a fully-featured implementation of an
IEEE 802.1X supplicant. This port does not support the wireless
WPA/WPA functionality yet, because it is missing in the OpenBSD
net80211 kernel implementation. Successfully tested with 802.1X on
ProCurve switches with OpenBSD running freeradius in the backend.

This port is based on work by Jussi Salzwedel, thanks!

ok aanriot@@
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@

