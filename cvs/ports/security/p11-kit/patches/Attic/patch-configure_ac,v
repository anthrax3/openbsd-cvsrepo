head	1.5;
access;
symbols;
locks; strict;
comment	@# @;


1.5
date	2012.09.27.09.30.06;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2012.08.23.13.29.02;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.08.22.06.28.53;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.21.09.13.33;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.19.11.10.43;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to p11-kit-0.14.
@
text
@$OpenBSD: patch-configure_ac,v 1.4 2012/08/23 13:29:02 ajacoutot Exp $

From 56860b7f72c444eed5923e11d735b85b630a171d Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Thu, 23 Aug 2012 12:00:16 +0000
Subject: configure.ac: Fix bogus comma, and fix up spacing

From 359bb15bc83484e4de69fa8dbc9113d97817d01e Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@openbsd.org>
Date: Tue, 21 Aug 2012 09:16:00 +0000
Subject: Use AC_LANG_PROGRAM to detect program_invocation_short_name functionality

--- configure.ac.orig	Mon Jul 16 15:05:03 2012
+++ configure.ac	Thu Aug 23 15:19:04 2012
@@@@ -71,8 +71,13 @@@@ if test "$os_unix" = "yes"; then
 
 	# Check if these are declared and/or available to link against
 	AC_CHECK_DECLS([program_invocation_short_name])
-	AC_LINK_IFELSE([AC_LANG_SOURCE([extern char *program_invocation_short_name; void main() { }])],
-		[AC_DEFINE(HAVE_PROGRAM_INVOCATION_SHORT_NAME, [1], [Whether program_invocation_short_name available])])
+	AC_MSG_CHECKING([whether program_invocation_short_name is available])
+	AC_LINK_IFELSE([AC_LANG_PROGRAM([[#include <argp.h>]],
+	                                [[program_invocation_short_name = "test";]])],
+	               [AC_DEFINE([HAVE_PROGRAM_INVOCATION_SHORT_NAME], [1],
+	                          [Whether program_invocation_short_name available])
+	                AC_MSG_RESULT([yes])],
+	               [AC_MSG_RESULT([no])])
 	AC_CHECK_DECLS([__progname])
 	AC_LINK_IFELSE([AC_LANG_SOURCE([extern char *__progname; void main() { }])],
 		[AC_DEFINE(HAVE___PROGNAME, [1], [Whether __progname available])])
@


1.4
log
@autoconf is a weird science...
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Committed upstream.
@
text
@d3 5
d14 1
a14 1
+++ configure.ac	Wed Aug 22 08:25:23 2012
d23 5
a27 5
+                                  [[program_invocation_short_name = "test";]])],
+		       [AC_DEFINE([HAVE_PROGRAM_INVOCATION_SHORT_NAME], [1],
+				  [Whether program_invocation_short_name available]),
+			AC_MSG_RESULT([yes])],
+		       [AC_MSG_RESULT([no])])
@


1.2
log
@sync configure.ac program_invocation_short_name test with the one in
gnulib in gnutls, this fixes a build problem I've seen on some (but not
other) machines. ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.1 2012/08/19 11:10:43 ajacoutot Exp $
d3 4
a6 1
https://bugs.freedesktop.org/show_bug.cgi?id=53706
d8 2
a9 2
--- configure.ac.orig	Mon Jul 16 07:05:03 2012
+++ configure.ac	Mon Aug 20 17:08:15 2012
@


1.1
log
@Bugfix update to p11-kit-0.13.
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- configure.ac.orig	Mon Jul 16 15:05:03 2012
+++ configure.ac	Sun Aug 19 12:57:46 2012
@@@@ -71,8 +71,12 @@@@ if test "$os_unix" = "yes"; then
d14 2
a15 1
+	AC_LINK_IFELSE([AC_LANG_PROGRAM([program_invocation_short_name = "test";])],
@

