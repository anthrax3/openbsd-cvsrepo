head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.06.17.09.43.35;	author ajacoutot;	state Exp;
branches;
next	;
commitid	QMluTM7VFmOZ7Js4;


desc
@@


1.1
log
@Unbreak getent LOGIN/PLAIN authentication: getpwnam -> getpwnam_shadow.
Fix a few time_t printf while here.
@
text
@$OpenBSD$
--- pwcheck/pwcheck_getpwnam.c.orig	Fri Jun 17 11:18:35 2016
+++ pwcheck/pwcheck_getpwnam.c	Fri Jun 17 11:18:52 2016
@@@@ -34,7 +34,7 @@@@ char *password;
     char* r;
     struct passwd *pwd;
 
-    pwd = getpwnam(userid);
+    pwd = getpwnam_shadow(userid);
     if (!pwd) {
 	r = "Userid not found";
     }
@
