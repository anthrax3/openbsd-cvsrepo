head	1.100;
access;
symbols
	OPENBSD_6_1:1.95.0.2
	OPENBSD_6_1_BASE:1.95
	OPENBSD_6_0:1.91.0.2
	OPENBSD_6_0_BASE:1.91
	OPENBSD_5_9:1.87.0.2
	OPENBSD_5_9_BASE:1.87
	OPENBSD_5_8:1.85.0.4
	OPENBSD_5_8_BASE:1.85
	OPENBSD_5_7:1.84.0.2
	OPENBSD_5_7_BASE:1.84
	OPENBSD_5_6:1.82.0.2
	OPENBSD_5_6_BASE:1.82
	OPENBSD_5_5:1.81.0.2
	OPENBSD_5_5_BASE:1.81
	OPENBSD_5_4:1.79.0.2
	OPENBSD_5_4_BASE:1.79
	OPENBSD_5_3:1.69.0.2
	OPENBSD_5_3_BASE:1.69
	OPENBSD_5_2:1.66.0.2
	OPENBSD_5_2_BASE:1.66
	OPENBSD_5_1_BASE:1.65
	OPENBSD_5_1:1.65.0.2
	OPENBSD_5_0:1.59.0.2
	OPENBSD_5_0_BASE:1.59
	OPENBSD_4_9:1.57.0.2
	OPENBSD_4_9_BASE:1.57
	OPENBSD_4_8:1.49.0.2
	OPENBSD_4_8_BASE:1.49
	OPENBSD_4_7:1.47.0.4
	OPENBSD_4_7_BASE:1.47
	OPENBSD_4_6:1.47.0.2
	OPENBSD_4_6_BASE:1.47
	OPENBSD_4_5:1.45.0.4
	OPENBSD_4_5_BASE:1.45
	OPENBSD_4_4:1.45.0.2
	OPENBSD_4_4_BASE:1.45
	OPENBSD_4_3:1.43.0.2
	OPENBSD_4_3_BASE:1.43
	OPENBSD_4_2:1.42.0.2
	OPENBSD_4_2_BASE:1.42
	OPENBSD_4_1:1.37.0.2
	OPENBSD_4_1_BASE:1.37
	OPENBSD_4_0:1.36.0.2
	OPENBSD_4_0_BASE:1.36
	OPENBSD_3_9:1.35.0.2
	OPENBSD_3_9_BASE:1.35
	OPENBSD_3_8:1.27.0.2
	OPENBSD_3_8_BASE:1.27
	OPENBSD_3_7:1.25.0.2
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.16.0.2
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.12.0.2
	OPENBSD_3_5_BASE:1.12
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.7.0.2
	OPENBSD_3_3_BASE:1.7
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	jakob_20020622:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.100
date	2017.09.22.21.37.18;	author sthen;	state Exp;
branches;
next	1.99;
commitid	vOwcbJQSn1uHO6ug;

1.99
date	2017.07.26.22.45.29;	author sthen;	state Exp;
branches;
next	1.98;
commitid	tD4MFrpYYDDL2UFT;

1.98
date	2017.07.16.19.20.57;	author espie;	state Exp;
branches;
next	1.97;
commitid	E9WZHiB3Q5YEtwRn;

1.97
date	2017.07.14.15.01.09;	author giovanni;	state Exp;
branches;
next	1.96;
commitid	aWsxp7FCCSrbyp1q;

1.96
date	2017.04.10.11.46.33;	author sthen;	state Exp;
branches;
next	1.95;
commitid	HY6VNZxjJWzKQFDV;

1.95
date	2016.12.17.15.00.22;	author ajacoutot;	state Exp;
branches;
next	1.94;
commitid	PZobHkEVH6t8r7Eq;

1.94
date	2016.11.07.10.51.36;	author sthen;	state Exp;
branches;
next	1.93;
commitid	bXhLeQYbQdffqUSF;

1.93
date	2016.10.10.12.25.20;	author ajacoutot;	state Exp;
branches;
next	1.92;
commitid	CTJKJKvFqs9uRLPE;

1.92
date	2016.09.23.09.16.57;	author sthen;	state Exp;
branches;
next	1.91;
commitid	XLnI6AbHAmyVU5mO;

1.91
date	2016.07.08.13.17.35;	author ajacoutot;	state Exp;
branches;
next	1.90;
commitid	UoRMHlenUMsmCnSQ;

1.90
date	2016.06.17.09.43.35;	author ajacoutot;	state Exp;
branches;
next	1.89;
commitid	QMluTM7VFmOZ7Js4;

1.89
date	2016.04.04.22.57.45;	author naddy;	state Exp;
branches;
next	1.88;
commitid	FILF1LJRoZlYu0JV;

1.88
date	2016.03.11.20.28.30;	author naddy;	state Exp;
branches;
next	1.87;
commitid	UYLP8TE6V7RS2GhJ;

1.87
date	2015.12.11.06.35.35;	author ajacoutot;	state Exp;
branches;
next	1.86;
commitid	0MJgFcwnrqJdYocN;

1.86
date	2015.08.12.22.27.31;	author sthen;	state Exp;
branches;
next	1.85;
commitid	SHEFBfUb4YY8KIkG;

1.85
date	2015.05.22.11.31.18;	author ajacoutot;	state Exp;
branches;
next	1.84;
commitid	2khjHXfpTaOuNVcx;

1.84
date	2014.09.13.18.09.22;	author brad;	state Exp;
branches;
next	1.83;
commitid	PpbRjVZdAmlrmi8q;

1.83
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.82;
commitid	jyyOLTDxRdjpw44n;

1.82
date	2014.04.21.12.12.05;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2013.10.31.19.42.45;	author schwarze;	state Exp;
branches;
next	1.80;

1.80
date	2013.10.30.15.06.46;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2013.06.20.09.48.28;	author ajacoutot;	state Exp;
branches;
next	1.78;

1.78
date	2013.06.20.08.26.14;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2013.06.17.19.31.09;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2013.06.12.20.36.34;	author brad;	state Exp;
branches;
next	1.74;

1.74
date	2013.05.30.00.28.07;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2013.05.25.00.33.10;	author brad;	state Exp;
branches;
next	1.72;

1.72
date	2013.05.11.06.21.15;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2013.03.21.08.48.53;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2013.03.11.11.41.24;	author espie;	state Exp;
branches;
next	1.69;

1.69
date	2013.02.09.14.49.52;	author sthen;	state Exp;
branches;
next	1.68;

1.68
date	2013.01.07.19.35.20;	author matthieu;	state Exp;
branches;
next	1.67;

1.67
date	2012.11.22.16.01.38;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2012.04.23.17.15.18;	author espie;	state Exp;
branches;
next	1.65;

1.65
date	2012.02.07.06.36.39;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.12.21.14.36.15;	author pea;	state Exp;
branches;
next	1.63;

1.63
date	2011.09.29.09.13.01;	author pea;	state Exp;
branches;
next	1.62;

1.62
date	2011.09.20.23.01.29;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2011.09.16.11.41.38;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2011.09.12.18.02.35;	author naddy;	state Exp;
branches;
next	1.59;

1.59
date	2011.07.03.22.51.25;	author naddy;	state Exp;
branches;
next	1.58;

1.58
date	2011.05.11.08.24.40;	author ajacoutot;	state Exp;
branches;
next	1.57;

1.57
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2010.11.26.14.50.10;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2010.10.29.12.54.44;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2010.10.28.11.21.05;	author ajacoutot;	state Exp;
branches;
next	1.51;

1.51
date	2010.10.18.21.41.45;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2010.09.03.15.36.26;	author ajacoutot;	state Exp;
branches;
next	1.49;

1.49
date	2010.07.16.12.44.43;	author ajacoutot;	state Exp;
branches;
next	1.48;

1.48
date	2010.04.16.07.49.26;	author jasper;	state Exp;
branches;
next	1.47;

1.47
date	2009.05.16.09.09.59;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2009.03.16.22.44.19;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2008.05.14.07.38.42;	author ajacoutot;	state Exp;
branches
	1.45.4.1;
next	1.44;

1.44
date	2008.03.15.12.50.46;	author ajacoutot;	state Exp;
branches;
next	1.43;

1.43
date	2007.10.25.21.05.33;	author steven;	state Exp;
branches;
next	1.42;

1.42
date	2007.07.25.16.25.57;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2007.07.07.15.03.35;	author ajacoutot;	state Exp;
branches;
next	1.40;

1.40
date	2007.06.18.12.31.20;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2007.06.01.16.49.22;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2007.06.01.15.24.26;	author ajacoutot;	state Exp;
branches;
next	1.37;

1.37
date	2007.02.13.13.00.14;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2006.08.03.23.28.11;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2006.02.02.22.23.28;	author steven;	state Exp;
branches;
next	1.34;

1.34
date	2006.02.02.18.41.20;	author jakob;	state Exp;
branches;
next	1.33;

1.33
date	2005.12.24.20.52.58;	author sturm;	state Exp;
branches;
next	1.32;

1.32
date	2005.12.20.05.57.19;	author pvalchev;	state Exp;
branches;
next	1.31;

1.31
date	2005.12.18.10.37.26;	author jakob;	state Exp;
branches;
next	1.30;

1.30
date	2005.11.01.23.41.13;	author aanriot;	state Exp;
branches;
next	1.29;

1.29
date	2005.10.29.14.57.45;	author sturm;	state Exp;
branches;
next	1.28;

1.28
date	2005.10.18.10.02.12;	author jakob;	state Exp;
branches;
next	1.27;

1.27
date	2005.08.07.22.19.49;	author aanriot;	state Exp;
branches;
next	1.26;

1.26
date	2005.05.09.14.28.22;	author jakob;	state Exp;
branches;
next	1.25;

1.25
date	2005.01.12.21.31.06;	author sturm;	state Exp;
branches;
next	1.24;

1.24
date	2005.01.05.10.03.14;	author jakob;	state Exp;
branches;
next	1.23;

1.23
date	2004.12.27.16.12.33;	author alek;	state Exp;
branches;
next	1.22;

1.22
date	2004.11.19.07.25.09;	author jakob;	state Exp;
branches;
next	1.21;

1.21
date	2004.11.03.10.33.31;	author jakob;	state Exp;
branches;
next	1.20;

1.20
date	2004.10.18.06.45.35;	author jakob;	state Exp;
branches;
next	1.19;

1.19
date	2004.10.11.13.19.46;	author robert;	state Exp;
branches;
next	1.18;

1.18
date	2004.09.26.10.01.01;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2004.09.15.18.35.59;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2004.08.04.14.51.31;	author naddy;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2004.08.02.12.57.41;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2004.07.19.05.28.46;	author kevlo;	state Exp;
branches;
next	1.13;

1.13
date	2004.07.09.15.07.04;	author kevlo;	state Exp;
branches;
next	1.12;

1.12
date	2004.02.17.03.26.02;	author kevlo;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2004.02.16.11.08.46;	author kevlo;	state Exp;
branches;
next	1.10;

1.10
date	2004.02.10.04.52.22;	author kevlo;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.28.22.14.45;	author jolan;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2003.06.26.18.20.20;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2003.02.03.08.54.04;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2002.12.10.08.37.42;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2002.09.08.11.14.29;	author jakob;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2002.09.07.19.06.39;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2002.07.26.11.19.01;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2002.07.05.21.32.45;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2002.06.22.08.55.44;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.06.22.08.55.44;	author jakob;	state Exp;
branches;
next	;

1.5.2.1
date	2002.12.10.08.38.43;	author jakob;	state Exp;
branches;
next	;

1.9.2.1
date	2004.10.12.17.21.27;	author robert;	state Exp;
branches;
next	1.9.2.2;

1.9.2.2
date	2004.10.19.18.31.46;	author robert;	state Exp;
branches;
next	;

1.12.2.1
date	2004.10.11.20.17.21;	author robert;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2004.10.19.18.26.33;	author robert;	state Exp;
branches;
next	;

1.16.2.1
date	2005.01.31.01.31.03;	author brad;	state Exp;
branches;
next	;

1.45.4.1
date	2009.06.28.03.18.56;	author william;	state Exp;
branches;
next	;


desc
@@


1.100
log
@WANTLIB+=m for a bunch of things (chasing sqlite3 fts5 addition)
@
text
@# $OpenBSD: Makefile,v 1.99 2017/07/26 22:45:29 sthen Exp $

COMMENT=		RFC 2222 SASL (Simple Authentication and Security Layer)

DISTNAME=		cyrus-sasl-2.1.26
REVISION=		24

SHARED_LIBS +=  sasl2                3.0      # 3.0

CATEGORIES=		security

HOMEPAGE=		http://www.cyrusimap.org/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# see the COPYRIGHT file in package sources
PERMIT_PACKAGE_CDROM=	yes

MASTER_SITES=		ftp://ftp.cyrusimap.org/cyrus-sasl/

WANTLIB += c crypto

MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/config ${WRKSRC}/saslauthd/config

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LIBS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=		--enable-static \
			--without-pam \
			--without-sqlite \
			--with-saslauthd="/var/sasl2" \
			--with-plugindir=${PREFIX}/lib/sasl2 \
			--enable-login \
			--enable-ntlm \
			--enable-auth-sasldb \
			--disable-sample

CFLAGS +=		-fPIC

FLAVORS=		db4 gssapi ldap mysql pgsql sqlite3
FLAVOR?=

.if ${FLAVOR:Mdb4}
CONFIGURE_ARGS +=	--with-dblib=berkeley \
			--with-bdb-libdir="${LOCALBASE}/lib/db4" \
			--with-bdb-incdir="${LOCALBASE}/include/db4"
LIB_DEPENDS +=		databases/db/v4
WANTLIB +=		lib/db4/db>=4
.else
CONFIGURE_ARGS +=	--with-dblib=ndbm \
			--without-bdb-libdir \
			--without-bdb-incdir
.endif

.if ${FLAVOR:Mgssapi}
CONFIGURE_ARGS +=	--enable-gssapi=${LOCALBASE}/heimdal
MODULES +=		security/heimdal
WANTLIB += heimdal/lib/gssapi
WANTLIB += heimdal/lib/heimntlm
WANTLIB += heimdal/lib/heimsqlite
.endif

.if ${FLAVOR:Mldap}
LIB_DEPENDS +=		databases/openldap
CONFIGURE_ARGS +=	--with-ldap=${LOCALBASE} \
			--enable-ldapdb
WANTLIB += lber lber-2.4 ldap ldap-2.4 ssl
.else
CONFIGURE_ARGS +=	--without-ldap
.endif

.if ${FLAVOR:Mmysql} || ${FLAVOR:Mpgsql} || ${FLAVOR:Msqlite3}
CONFIGURE_ARGS +=	--enable-sql
PKG_ARGS=		-Dsql=1
.else
CONFIGURE_ARGS +=	--disable-sql
PKG_ARGS=		-Dsql=0
.endif

.if ${FLAVOR:Mmysql}
LIB_DEPENDS +=		databases/mariadb
WANTLIB+= m pthread ssl ${COMPILER_LIBCXX} z lib/mysql/mysqlclient
.else
CONFIGURE_ARGS +=	--without-mysql
.endif

.if ${FLAVOR:Mpgsql}
LIB_DEPENDS +=		databases/postgresql
CFLAGS +=		-I${LOCALBASE}/include/postgresql
WANTLIB += pq ssl
.else
CONFIGURE_ARGS +=	--without-pgsql
.endif

.if ${FLAVOR:Msqlite3}
LIB_DEPENDS +=		databases/sqlite3
WANTLIB += m pthread sqlite3
.else
CONFIGURE_ARGS +=	--without-sqlite3
.endif

pre-configure:
	sed -i -e "s,/usr/local/etc,${SYSCONFDIR},g" \
		${WRKSRC}/saslauthd/saslauthd.mdoc \
		${WRKSRC}/saslauthd/LDAP_SASLAUTHD

post-install:
	rm ${PREFIX}/lib/sasl2/*.a
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/cyrus-sasl
	${INSTALL_DATA} ${WRKSRC}/doc/{*.html,*.txt} ${PREFIX}/share/doc/cyrus-sasl
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/cyrus-sasl
	${INSTALL_DATA} ${FILESDIR}/Sendmail.conf-sql \
		${PREFIX}/share/examples/cyrus-sasl
.if ${FLAVOR:Mldap}
	${INSTALL_DATA} ${WRKSRC}/saslauthd/LDAP_SASLAUTHD \
		${PREFIX}/share/doc/cyrus-sasl
	${SUBST_DATA} ${FILESDIR}/saslauthd.conf \
		${PREFIX}/share/examples/cyrus-sasl/saslauthd.conf
.endif

.include <bsd.port.mk>
@


1.99
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2017/07/16 19:20:57 espie Exp $
d6 1
a6 1
REVISION=		23
d97 1
a97 1
WANTLIB += pthread sqlite3
@


1.98
log
@...and those last 5, which got updated while I was creating the diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2017/07/14 15:01:09 giovanni Exp $
d6 1
a6 1
REVISION=		22
@


1.97
log
@fix interoperability between cyrus-sasl and courier-authdaemond
committed upstream
ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2017/04/10 11:46:33 sthen Exp $
d82 1
a82 1
WANTLIB+= m pthread ssl ${LIBCXX} z lib/mysql/mysqlclient
@


1.96
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2016/12/17 15:00:22 ajacoutot Exp $
d6 1
a6 1
REVISION=		21
@


1.95
log
@Sync WANTLIB after heimdal update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2016/11/07 10:51:36 sthen Exp $
d82 1
a82 1
WANTLIB+= m pthread ssl stdc++ z lib/mysql/mysqlclient
@


1.94
log
@sync WANTLIB (readding idn to some where I was overzealous, plus some lzma/pthread)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2016/10/10 12:25:20 ajacoutot Exp $
d6 1
a6 1
REVISION=		20
a57 1
WANTLIB += com_err pthread
@


1.93
log
@Split sqlite3 support into its own FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2016/09/23 09:16:57 sthen Exp $
d6 1
a6 1
REVISION=		19
d98 1
a98 1
WANTLIB += sqlite3
@


1.92
log
@Cope with moving sqlite3 back to ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2016/07/08 13:17:35 ajacoutot Exp $
d6 1
a6 1
REVISION=		18
d21 1
a21 1
WANTLIB += c crypto sqlite3
d28 1
a28 2
CONFIGURE_ARGS=		--enable-sql \
			--enable-static \
a31 1
			--with-sqlite3 \
d40 1
a40 1
FLAVORS=		db4 gssapi ldap mysql pgsql
a42 2
LIB_DEPENDS +=		databases/sqlite3

d73 8
d94 7
@


1.91
log
@--without-sqlite so that we don't pick up sqlite2 from ports.

reported by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2016/06/17 09:43:35 ajacoutot Exp $
d6 1
a6 1
REVISION=		17
d44 2
@


1.90
log
@Unbreak getent LOGIN/PLAIN authentication: getpwnam -> getpwnam_shadow.
Fix a few time_t printf while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2016/04/04 22:57:45 naddy Exp $
d31 1
@


1.89
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2016/03/11 20:28:30 naddy Exp $
d6 1
a6 1
REVISION=		16
@


1.88
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2015/12/11 06:35:35 ajacoutot Exp $
d6 1
a6 1
REVISION=		15
@


1.87
log
@Add a "gssapi" FLAVOR for Kerberos authentication.
While here, enable sqlite3 support unconditionally and drop the corresponding
FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2015/08/12 22:27:31 sthen Exp $
d28 1
a28 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--enable-sql \
@


1.86
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2015/05/22 11:31:18 ajacoutot Exp $
d3 1
a3 1
COMMENT=	RFC 2222 SASL (Simple Authentication and Security Layer)
d5 2
a6 2
DISTNAME=	cyrus-sasl-2.1.26
REVISION=	14
d8 1
a8 1
SHARED_LIBS += sasl2           3.0 # 3.0
d10 1
a10 1
CATEGORIES=	security
d12 1
a12 1
HOMEPAGE=	http://www.cyrusimap.org/
d14 1
a14 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d19 1
a19 1
MASTER_SITES=	ftp://ftp.cyrusimap.org/cyrus-sasl/
d21 1
a21 1
WANTLIB += c crypto
d23 1
a23 1
CFLAGS +=	-fPIC
d25 14
a38 10
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	${CONFIGURE_SHARED} \
		--enable-static \
		--without-pam \
		--with-saslauthd="/var/sasl2" \
		--with-plugindir=${PREFIX}/lib/sasl2 \
		--enable-login \
		--enable-ntlm \
		--enable-auth-sasldb \
		--disable-sample
d40 1
a40 1
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/config ${WRKSRC}/saslauthd/config
d42 1
a42 1
FLAVORS=	db4 ldap mysql pgsql sqlite3
a44 3
BRKFLAVORMSG=	choose either mysql, pgsql or sqlite3
PKG_ARGS?=	-Dsql=0

d46 5
a50 5
CONFIGURE_ARGS+=--with-dblib=berkeley \
		--with-bdb-libdir="${LOCALBASE}/lib/db4" \
		--with-bdb-incdir="${LOCALBASE}/include/db4"
LIB_DEPENDS+=	databases/db/v4
WANTLIB +=	lib/db4/db>=4
d52 12
a63 3
CONFIGURE_ARGS+=--with-dblib=ndbm \
		--without-bdb-libdir \
		--without-bdb-incdir
d67 4
a70 5
WANTLIB+=	ssl
LIB_DEPENDS+=	openldap-client->=2,<3:databases/openldap
CONFIGURE_ARGS+=--with-ldap=${LOCALBASE} \
		--enable-ldapdb
WANTLIB +=	lber lber-2.4 ldap ldap-2.4
d72 1
a72 1
CONFIGURE_ARGS+=--without-ldap
d76 4
a79 10
.if ${FLAVOR:Mpgsql} || ${FLAVOR:Msqlite3}
ERRORS+=	${BRKFLAVORMSG}
.endif
PKG_ARGS=	-Dsql=1
LIB_DEPENDS+=	databases/mariadb
WANTLIB+=	m pthread ssl stdc++ z lib/mysql/mysqlclient
CONFIGURE_ARGS+=--enable-sql \
		--with-mysql \
		--without-pgsql \
		--without-sqlite3
d83 5
a87 23
.if ${FLAVOR:Mmysql} || ${FLAVOR:Msqlite3}
ERRORS+=	${BRKFLAVORMSG}
.endif
PKG_ARGS=	-Dsql=1
LIB_DEPENDS+=	databases/postgresql
WANTLIB +=	pq ssl
CONFIGURE_ARGS+=--enable-sql \
		--without-mysql \
		--with-pgsql \
		--without-sqlite3
CFLAGS+=	-I${LOCALBASE}/include/postgresql
.endif

.if ${FLAVOR:Msqlite3}
.if ${FLAVOR:Mmysql} || ${FLAVOR:Mpgsql}
ERRORS+=		${BRKFLAVORMSG}
.endif
PKG_ARGS=	-Dsql=1
WANTLIB +=	sqlite3
CONFIGURE_ARGS+=--enable-sql \
		--without-mysql \
		--without-pgsql \
		--with-sqlite3
d91 1
a91 1
	perl -pi -e "s,/usr/local/etc,${SYSCONFDIR},g" \
a93 1
	perl -pi -e 's,-lresolv,,g' ${WRKSRC}/{,saslauthd}/configure
a99 1
.if ${FLAVOR:Mmysql} || ${FLAVOR:Mpgsql} || ${FLAVOR:Msqlite3}
a101 1
.endif
@


1.85
log
@"/usr/local/lib/pkgconfig/" is part of mtree(8).
Packages should not own this dir to prevent its deletion or a warning that it
cannot be removed because it's not empty at pkg_delete(1) time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/09/13 18:09:22 brad Exp $
d6 1
a6 1
REVISION=	13
d72 1
a72 1
WANTLIB+=	m ssl z lib/mysql/mysqlclient
@


1.84
log
@Switch from using MySQL to using MariaDB attempt #2. MariaDB is a drop-in replacement.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/08/10 09:58:06 espie Exp $
d6 1
a6 1
REVISION=	12
@


1.83
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/04/21 12:12:05 ajacoutot Exp $
d6 1
a6 1
REVISION=	11
d71 2
a72 2
LIB_DEPENDS+=	databases/mysql
WANTLIB+=	m ssl z lib/mysql/mysqlclient>=10
@


1.82
log
@Drop gssapi support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/10/31 19:42:45 schwarze Exp $
d123 1
a123 1
	${SUBST_CMD} -o ${SHAREOWN} -g ${SHAREGRP} -c ${FILESDIR}/saslauthd.conf \
@


1.81
log
@Do not run mandoc(1) at build time.
Just install the mdoc(7) source code of the saslauthd(8) manual.
Also regenerate patch-saslauthd_configure.
Bump.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/10/30 15:06:46 ajacoutot Exp $
d6 1
a6 1
REVISION=	10
d21 1
a21 2
WANTLIB += asn1 c com_err crypto gssapi heimbase
WANTLIB += krb5 roken wind
a25 2
CONFIGURE_ENV=	CPPFLAGS="$$(krb5-config --cflags)" \
		LIBS="$$(krb5-config --libs gssapi)"
@


1.80
log
@Fix saslauthd man page display; noticed by aalm@@
While here, add missing libgs2 (stupid make plist).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2013/06/20 09:48:28 ajacoutot Exp $
d6 1
a6 1
REVISION=	9
a112 1
	perl -pi -e 's,nroff,mandoc,g' ${WRKSRC}/saslauthd/Makefile.in
a118 1
	mv ${PREFIX}/man/man8/saslauthd.8 ${PREFIX}/man/cat8/saslauthd.0
@


1.79
log
@Unbreak the ldap FLAVOR at runtime -- @@mode 640 in PFRAG.shared leaked
into the rest of the files and directories... so properly close the
marker.

thanks to nl3dee on freenode for spotting this
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/06/20 08:26:14 ajacoutot Exp $
d6 1
a6 1
REVISION=	8
a23 3
# uses nroff(1)
USE_GROFF=	Yes

d113 1
d120 1
@


1.78
log
@No need for pthread.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/06/20 06:54:37 ajacoutot Exp $
d6 1
a6 1
REVISION=	7
@


1.77
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2013/06/17 19:31:09 ajacoutot Exp $
d6 1
a6 1
REVISION=	6
d22 1
a22 1
WANTLIB += krb5 pthread roken wind
@


1.76
log
@Unbreak with new Heimdal; get rid of self-cooked krb5-config since we
have it in base now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/06/12 20:36:34 brad Exp $
d6 1
a6 1
REVISION=	5
d21 1
a21 1
WANTLIB += asn1 c com_err crypto gssapi heimbase heimntlm hx509
@


1.75
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2013/05/30 00:28:07 ajacoutot Exp $
d6 1
a6 1
REVISION=	4
d21 2
a22 1
WANTLIB += asn1 c com_err crypto gssapi krb5
d24 1
d30 2
a35 2
		--enable-gssapi="/usr" \
		--with-gss_impl="heimdal" \
@


1.74
log
@Fix the pkgconfig file.

prodded by jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2013/05/25 00:33:10 brad Exp $
d6 1
a6 1
REVISION=	3
d75 1
a75 1
LIB_DEPENDS+=	databases/mariadb
@


1.73
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2013/05/11 06:21:15 ajacoutot Exp $
d6 1
a6 1
REVISION=	2
@


1.72
log
@Explicitely build --without-pam.
Merge some chunck of PFRAG.shared into PLIST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2013/03/21 08:48:53 ajacoutot Exp $
d6 1
a6 1
REVISION=	1
d75 1
a75 1
LIB_DEPENDS+=	databases/mysql
@


1.71
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2013/03/11 11:41:24 espie Exp $
d6 1
a6 1
REVISION=	0
d30 1
@


1.70
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/02/09 14:49:52 sthen Exp $
a22 1
USE_LIBTOOL=	Yes
@


1.69
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/01/07 19:35:20 matthieu Exp $
a17 3
PERMIT_PACKAGE_FTP=	yes
PERMIT_DISTFILES_CDROM=	yes
PERMIT_DISTFILES_FTP=	yes
@


1.68
log
@fix path to LDAP_SASLAUTHD doc file. ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2012/11/22 16:01:38 ajacoutot Exp $
d51 1
a51 1
.if ${FLAVOR:L:Mdb4}
d63 1
a63 1
.if ${FLAVOR:L:Mldap}
d73 2
a74 2
.if ${FLAVOR:L:Mmysql}
.if ${FLAVOR:L:Mpgsql} || ${FLAVOR:L:Msqlite3}
d86 2
a87 2
.if ${FLAVOR:L:Mpgsql}
.if ${FLAVOR:L:Mmysql} || ${FLAVOR:L:Msqlite3}
d100 2
a101 2
.if ${FLAVOR:L:Msqlite3}
.if ${FLAVOR:L:Mmysql} || ${FLAVOR:L:Mpgsql}
d123 1
a123 1
.if ${FLAVOR:L:Mmysql} || ${FLAVOR:L:Mpgsql} || ${FLAVOR:L:Msqlite3}
d127 1
a127 1
.if ${FLAVOR:L:Mldap}
@


1.67
log
@Update to cyrus-sasl-2.1.26.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2012/04/23 17:15:18 espie Exp $
d6 1
@


1.66
log
@first pass at handling sqlite3 move
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/02/07 06:36:39 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	cyrus-sasl-2.1.25
REVISION=	3
d7 1
a7 13
SHARED_LIBS += anonymous       2.22 # 2.25
SHARED_LIBS += crammd5         2.22 # 2.25
SHARED_LIBS += digestmd5       2.22 # 2.25
SHARED_LIBS += gssapiv2        2.22 # 2.25
SHARED_LIBS += ldapdb          2.22 # 2.25
SHARED_LIBS += login           2.22 # 2.25
SHARED_LIBS += ntlm            2.22 # 2.25
SHARED_LIBS += otp             2.22 # 2.25
SHARED_LIBS += plain           2.22 # 2.25
SHARED_LIBS += sasl2           2.23 # 2.25
SHARED_LIBS += sasldb          2.22 # 2.25
SHARED_LIBS += scram           0.0  # 2.25
SHARED_LIBS += sql             2.22 # 2.25
a110 3
post-extract:
	rm ${WRKSRC}/cmulocal/sasl2.m4.orig

d118 4
a121 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/sasl2
	${INSTALL_DATA} ${WRKSRC}/doc/{*.html,*.txt} ${PREFIX}/share/doc/sasl2
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/sasl2
d124 1
a124 1
		${PREFIX}/share/examples/sasl2
d128 3
a130 3
		${PREFIX}/share/doc/sasl2
	sed -e 's,!!PREFIX!!,${TRUEPREFIX},g' ${FILESDIR}/saslauthd.conf > \
		${PREFIX}/share/examples/sasl2/saslauthd.conf
@


1.65
log
@Fix a NULL ptr dereference (from upstream).

reported by "remco"
ok naddy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/12/21 14:36:15 pea Exp $
d6 1
a6 1
REVISION=	2
a116 1
LIB_DEPENDS+=	databases/sqlite3
@


1.64
log
@Install sample and rcscript before fragments to avoid wrong permissions
with the ldap flavor.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/09/29 09:13:01 pea Exp $
d6 1
a22 2

REVISION=	1
@


1.63
log
@Install .la files.
They are needed by, at least, mutt and postfix.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2011/09/20 23:01:29 ajacoutot Exp $
d23 1
a23 1
REVISION=	0
@


1.62
log
@Update to cyrus-sasl-2.1.25.
sqlite FLAVOR replaced with sqlite3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2011/09/16 11:41:38 espie Exp $
d22 2
@


1.61
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2011/09/12 18:02:35 naddy Exp $
d5 15
a19 2
DISTNAME=	cyrus-sasl-2.1.23
REVISION=	9
a20 12
SHARED_LIBS=	anonymous	2.22 \
		crammd5		2.22 \
		digestmd5	2.22 \
		gssapiv2	2.22 \
		ldapdb		2.22 \
		login		2.22 \
		ntlm		2.22 \
		otp		2.22 \
		plain		2.22 \
		sasl2		2.22 \
		sasldb		2.22 \
		sql		2.22
d35 1
a35 1
WANTLIB=	asn1 c com_err crypto gssapi krb5
d38 3
a40 1
USE_GROFF =	Yes
d43 2
a44 2
CONFIGURE_ENV+=	LDFLAGS='${LDFLAGS}'
CONFIGURE_ARGS+=${CONFIGURE_SHARED} \
a49 1
		--enable-static \
d56 1
a56 1
FLAVORS=	db4 ldap mysql pgsql sqlite
d59 1
a59 1
BRKFLAVORMSG=	choose either mysql, pgsql or sqlite
d79 1
a79 1
WANTLIB +=	ldap lber
d85 1
a85 1
.if ${FLAVOR:L:Mpgsql} || ${FLAVOR:L:Msqlite}
d94 1
a94 1
		--without-sqlite
d98 1
a98 1
.if ${FLAVOR:L:Mmysql} || ${FLAVOR:L:Msqlite}
d103 1
a103 1
WANTLIB +=	pq
d107 1
a107 1
		--without-sqlite
d111 1
a111 1
.if ${FLAVOR:L:Msqlite}
d116 2
a117 2
LIB_DEPENDS+=	databases/sqlite
WANTLIB +=	sqlite
d121 1
a121 1
		--with-sqlite
d124 3
d128 1
a128 1
	@@perl -pi -e "s,/usr/local/etc,${SYSCONFDIR},g" \
d131 1
d137 1
a137 1
.if ${FLAVOR:L:Mmysql} || ${FLAVOR:L:Mpgsql} || ${FLAVOR:L:Msqlite}
@


1.60
log
@bump all (sub)packages that depend on db/v4; requested by and help from espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2011/07/03 22:51:25 naddy Exp $
d6 1
a6 1
REVISION=	8
@


1.59
log
@* Don't turn an mdoc(7) page into a cat page.  Install the source page.
* No need to explicitly recurse into saslauthd.  The build framework
  does that already.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2011/05/11 08:24:40 ajacoutot Exp $
d6 1
a6 1
REVISION=	7
@


1.58
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/12/27 14:50:23 ajacoutot Exp $
d6 1
a6 1
REVISION=	6
a126 5
post-build:
	cd ${WRKBUILD}/saslauthd; \
	${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} \
		testsaslauthd saslauthd.8

a129 1
	${INSTALL_PROGRAM} ${WRKBUILD}/saslauthd/testsaslauthd ${PREFIX}/sbin
@


1.57
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/12/24 10:40:06 ajacoutot Exp $
d6 1
a6 1
REVISION=	5
@


1.56
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/11/26 14:50:10 espie Exp $
d6 1
a6 1
REVISION=	4
@


1.55
log
@since db/v4 has db->=4,<5 as default, no need to specify it explicitly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/11/20 17:22:43 espie Exp $
d6 1
a6 1
REVISION=	3
@


1.54
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/10/29 12:54:44 ajacoutot Exp $
d64 1
a64 1
LIB_DEPENDS+=	db->=4,<5:databases/db/v4
@


1.53
log
@Add RCS IDs to rc scripts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/10/28 11:21:05 ajacoutot Exp $
d64 2
a65 2
LIB_DEPENDS+=	:db->=4,<5:databases/db/v4
WANTLIB +=	lib/db4/db.>=4
d74 1
a74 1
LIB_DEPENDS+=	:openldap-client->=2,<3:databases/openldap
d87 2
a88 2
LIB_DEPENDS+=	::databases/mysql
WANTLIB+=	m ssl z lib/mysql/mysqlclient.>=10
d100 1
a100 1
LIB_DEPENDS+=	:postgresql-client-*:databases/postgresql
d114 1
a114 1
LIB_DEPENDS+=	::databases/sqlite
@


1.52
log
@Add rc script for saslauthd.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/10/18 21:41:45 espie Exp $
d6 1
a6 1
REVISION=	2
@


1.51
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/09/03 15:36:26 ajacoutot Exp $
d6 1
a6 1
REVISION=	1
@


1.50
log
@New HOMEPAGE+MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/07/16 12:44:43 ajacoutot Exp $
d37 1
@


1.49
log
@Fix some implicit declarations.
Move to REVISION and new DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/04/16 07:49:26 jasper Exp $
d6 1
a6 1
REVISION=	0
d22 1
a22 1
HOMEPAGE=	http://asg.web.cmu.edu/sasl/
d32 1
a32 2
MASTER_SITES=	ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/ \
		ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/OLD-VERSIONS/sasl/
@


1.48
log
@these should be last BROKEN -> ERRORS

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/05/16 09:09:59 ajacoutot Exp $
d6 2
d64 2
a65 1
LIB_DEPENDS+=	lib/db4/db.>=4:db->=4,<5:databases/db/v4
d74 1
a74 1
LIB_DEPENDS+=	ldap.>=2,lber:openldap-client->=2,<3:databases/openldap
d77 1
d87 2
a88 2
LIB_DEPENDS+=	lib/mysql/mysqlclient.>=10::databases/mysql
WANTLIB+=	m ssl z
d100 2
a101 1
LIB_DEPENDS+=	pq.>=3:postgresql-client-*:databases/postgresql
d114 2
a115 1
LIB_DEPENDS+=	sqlite.>=8.6::databases/sqlite
@


1.47
log
@- SECURITY update to cyrus-sasl-2.1.23
* lib/saslutil.c: Fixed CERT VU#238019 (make sure sasl_encode64()
  always NUL terminates output or returns SASL_BUFOVER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/03/16 22:44:19 sthen Exp $
d80 1
a80 1
BROKEN=		${BRKFLAVORMSG}
d93 1
a93 1
BROKEN=		${BRKFLAVORMSG}
d106 1
a106 1
BROKEN=		${BRKFLAVORMSG}
@


1.46
log
@fix depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2008/05/14 07:38:42 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	cyrus-sasl-2.1.22
PKGNAME=	${DISTNAME}p5
@


1.45
log
@- add sasldb and ldapdb auxprop plugins

from Pedro Almeida <palmeida at securenetworks dot pt>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2008/03/15 12:50:46 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
d63 1
a63 1
LIB_DEPENDS+=	lib/db4/db.>=4:db-4.*:databases/db/v4
d72 1
a72 1
LIB_DEPENDS+=	ldap.>=2,lber:openldap-client-2.*:databases/openldap
@


1.45.4.1
log
@SECURITY FIX

Resolve CVE-2009-0688:  unsafe use of sasl_encode64()

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2008/05/14 07:38:42 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
@


1.44
log
@- provide @@sample saslauthd.conf for saslauthd LDAP auth
- also add LDAP_SASLAUTHD doc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/10/25 21:05:33 steven Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d11 1
d48 1
d71 1
d73 2
a74 1
CONFIGURE_ARGS+=--with-ldap=${LOCALBASE}
@


1.43
log
@db.=4 -> db.>=4  in preparation of db4 update

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/07/25 16:25:57 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d115 2
a116 1
		${WRKSRC}/saslauthd/saslauthd.mdoc
d127 1
a128 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/sasl2
d131 6
@


1.42
log
@- add a sample Sendmail.conf-sql for Sendmail authentication (*sql FLAVORS only)

based on a bigger diff by Mike Erdely <mike at erdelynet dot com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/07/07 15:03:35 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d61 1
a61 1
LIB_DEPENDS+=	lib/db4/db.=4:db-4.*:databases/db/v4
@


1.41
log
@- add NTLM support
from Mikolaj Kucharski <mikolaj at kucharski dot name>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/06/18 12:31:20 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d126 5
@


1.40
log
@- long due update to 2.1.22
- merge the 3 PLISTs for sql related FLAVORS (sqlite, pgsql and mysql)
into one
- use a VARIABLE for the "incompatible FLAVORS" message
- post-extract -> post-configure, to ease patches updates
- fmt pkg/DESCR

"go ahead" robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/06/01 16:49:22 ajacoutot Exp $
d6 1
d12 1
d46 1
@


1.39
log
@- fix sqlite FLAVOR lib_depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/06/01 15:24:26 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"RFC 2222 SASL (Simple Authentication and Security Layer)"
d5 11
a15 12
DISTNAME=	cyrus-sasl-2.1.21
PKGNAME=	${DISTNAME}p5
SHARED_LIBS=	anonymous	2.21 \
		crammd5		2.21 \
		digestmd5	2.21 \
		gssapiv2	2.21 \
		login		2.21 \
		otp		2.21 \
		plain		2.21 \
		sasl2		2.21 \
		sasldb		2.21 \
		sql		2.21
d51 3
d74 1
a74 1
BROKEN=		choose either mysql or pgsql or sqlite
d76 1
d87 1
a87 1
BROKEN=		choose either mysql or pgsql or sqlite
d89 1
d100 1
a100 1
BROKEN=		choose either mysql or pgsql or sqlite
d102 1
d110 1
a110 1
post-extract:
@


1.38
log
@- clean the Makefile a bit so it is easier for me to read it
- zap $VERSION
- tweak post-install
- post-extract -> pre-configure
- add available FLAVORS to DESCR
no functionnal changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2007/02/13 13:00:14 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
d98 1
a98 1
LIB_DEPENDS=	sqlite.>=8.6::databases/sqlite
@


1.37
log
@- take over maintainership
- bump PKGNAME

ok jakob@@ (obviously), pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2006/08/03 23:28:11 espie Exp $
d5 2
a6 5
VERSION=	2.1.21

DISTNAME=	cyrus-sasl-${VERSION}
PKGNAME=	${DISTNAME}p3
CATEGORIES=	security
d17 1
a17 3

MASTER_SITES=	ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/ \
		ftp://ftp.andrew.cmu.edu/pub/cyrus-mail/OLD-VERSIONS/sasl/
d23 1
a27 1
WANTLIB=		asn1 c com_err crypto gssapi krb5
d29 17
a45 12
USE_LIBTOOL=		Yes
CONFIGURE_STYLE=	gnu
CONFIGURE_ENV+=		LDFLAGS='${LDFLAGS}'
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}

CONFIGURE_ARGS+=	--with-saslauthd="/var/sasl2" \
			--enable-gssapi="/usr" \
			--with-gss_impl="heimdal" \
		 	--with-plugindir=${PREFIX}/lib/sasl2 \
			--enable-login \
			--enable-static \
			--disable-sample
d53 4
a56 4
CONFIGURE_ARGS+=	--with-dblib=berkeley \
			--with-bdb-libdir="${LOCALBASE}/lib/db4" \
			--with-bdb-incdir="${LOCALBASE}/include/db4"
LIB_DEPENDS=		lib/db4/db.=4:db-4.*:databases/db/v4
d58 3
a60 3
CONFIGURE_ARGS+=	--with-dblib=ndbm \
			--without-bdb-libdir \
			--without-bdb-incdir
d64 2
a65 2
LIB_DEPENDS+=		ldap.>=2,lber:openldap-client-2.*:databases/openldap
CONFIGURE_ARGS+=	--with-ldap=${LOCALBASE}
d67 1
a67 1
CONFIGURE_ARGS+=	--without-ldap
d72 1
a72 1
BROKEN=			choose either mysql or pgsql or sqlite
d74 6
a79 6
LIB_DEPENDS+=		lib/mysql/mysqlclient.>=10::databases/mysql
WANTLIB+=		m ssl z
CONFIGURE_ARGS+=	--enable-sql \
			--with-mysql \
			--without-pgsql \
			--without-sqlite
d84 1
a84 1
BROKEN=			choose either mysql or pgsql or sqlite
d86 6
a91 6
LIB_DEPENDS+=		pq.>=3:postgresql-client-*:databases/postgresql
CONFIGURE_ARGS+=	--enable-sql \
			--without-mysql \
			--with-pgsql \
			--without-sqlite
CFLAGS+=		-I${LOCALBASE}/include/postgresql
d96 1
a96 1
BROKEN=			choose either mysql or pgsql or sqlite
d98 5
a102 5
LIB_DEPENDS=		sqlite.>=8.6::databases/sqlite
CONFIGURE_ARGS+=	--enable-sql \
			--without-mysql \
			--without-pgsql \
			--with-sqlite
d106 1
a106 1
	perl -pi -e "s,/usr/local/etc,${SYSCONFDIR},g" \
d111 2
a112 2
	${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} testsaslauthd \
	saslauthd.8
d116 1
a116 2
	${INSTALL_DATA} ${WRKSRC}/doc/*.html ${PREFIX}/share/doc/sasl2
	${INSTALL_DATA} ${WRKSRC}/doc/*.txt ${PREFIX}/share/doc/sasl2
@


1.36
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2006/02/02 22:23:28 steven Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
d26 1
a26 1
MAINTAINER=	Jakob Schlyter <jakob@@openbsd.org>
@


1.35
log
@- remove unneeded MODGNU_SHARED_LIBS and related patches
- use correct ${SYSCONFDIR} in man page, fix from Antoine Jacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2006/02/02 18:41:20 jakob Exp $
d64 1
a64 1
LIB_DEPENDS+=		ldap.2,lber:openldap-client-2.*:databases/openldap
d74 1
a74 1
LIB_DEPENDS+=		lib/mysql/mysqlclient.10::databases/mysql
d86 1
a86 1
LIB_DEPENDS+=		pq.3:postgresql-client-*:databases/postgresql
d98 1
a98 1
LIB_DEPENDS=		sqlite.8.6::databases/sqlite
@


1.34
log
@fix broken kerberos support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/12/24 20:52:58 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
a19 11
MODGNU_SHARED_LIBS=anonymous	'' \
		crammd5		'' \
		digestmd5	'' \
		gssapiv2	'' \
		login		'' \
		otp		'' \
		plain		'' \
		sasl2		'' \
		sasldb		'' \
		sql		''
LIBsql_ALIAS=	realsql
d104 4
a107 1
 
@


1.33
log
@SHARED_LIBS
USE_LIBTOOL where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2005/12/20 05:57:19 pvalchev Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.32
log
@compile -fPIC as needed; ok jakob
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2005/12/18 10:37:26 jakob Exp $
a5 1
LIBVERSION=	2.21
d10 21
a44 1
SUBST_VARS+=		LIBVERSION
@


1.31
log
@update to 2.1.21; work by naddy and me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2005/11/01 23:41:13 aanriot Exp $
d9 1
a9 1
PKGNAME=	${DISTNAME}
@


1.30
log
@remove blank lines which produce blank pages with nroff.

help and 'looks fine' jmc@@, ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/10/29 14:57:45 sturm Exp $
d5 5
a9 2
DISTNAME=	cyrus-sasl-2.1.20
PKGNAME=	${DISTNAME}p7
d25 2
d67 1
d92 2
d99 1
a99 1
	(cd ${WRKBUILD}/saslauthd; \
d101 1
a101 1
	saslauthd.8)
@


1.29
log
@create /var/sasl2/ in PLIST

from Antoine Jacoutot <ajacoutot at lphp.org>
maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/10/18 10:02:12 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p6
@


1.28
log
@fix memory overwrite bug; patch from Marcus Redivo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/08/07 22:19:49 aanriot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
@


1.27
log
@unbreak sqlite flavor.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/05/09 14:28:22 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
@


1.26
log
@fix plugin location instead of creating soft line from /usr/lib/sasl2
bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/01/12 21:31:06 sturm Exp $
a86 2
			--without-sqlite \
			--enable-sql
@


1.25
log
@better and consistent LIB_DEPENDS on db; this fixes a few possible
build time failures, where the wrong version of db could be found
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/01/05 10:03:14 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d29 1
@


1.24
log
@rename sql flavour to mysql
add new flavours for pgsql and sqlite
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2004/12/27 16:12:33 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d42 1
a42 1
LIB_DEPENDS=		lib/db4/db.4::databases/db/v4
@


1.23
log
@- Disable sqlite explicitly as it's picked up automatically by configure
  script
- Add WANTLIB marker
- Bump PKGNAME

ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/11/19 07:25:09 jakob Exp $
d7 1
a7 1
CATEGORIES=     security
d26 6
a31 6
CONFIGURE_ARGS+= --with-saslauthd="/var/sasl2" \
		 --enable-gssapi="/usr" \
		 --with-gss_impl="heimdal" \
		 --enable-login \
		 --enable-static \
		 --disable-sample
d35 1
a35 1
FLAVORS=	db4 sql ldap
d39 4
a42 4
CONFIGURE_ARGS+=        --with-dblib=berkeley \
                        --with-bdb-libdir="${LOCALBASE}/lib/db4" \
                        --with-bdb-incdir="${LOCALBASE}/include/db4"
LIB_DEPENDS=            lib/db4/db.4::databases/db/v4
d45 2
a46 2
                        --without-bdb-libdir \
                        --without-bdb-incdir
d49 14
a62 3
.if ${FLAVOR:L:Msql}
LIB_DEPENDS+=	lib/mysql/mysqlclient.10::databases/mysql
CONFIGURE_ARGS+=        --with-mysql \
d64 22
a89 4
.if ${FLAVOR:L:Mldap}
LIB_DEPENDS+=           ldap.2,lber:openldap-client-2.*:databases/openldap
CONFIGURE_ARGS+=        --with-ldap=${LOCALBASE}
.endif
@


1.22
log
@remove bogus patch for plaintext password checking
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2004/11/03 10:33:31 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d20 1
d53 1
@


1.21
log
@update to Cyrus SASL 2.1.20; thanks to Ben Hooper for diffs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2004/10/18 06:45:35 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}
@


1.20
log
@specify ldap path
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2004/10/11 13:19:46 robert Exp $
d5 2
a6 2
DISTNAME=	cyrus-sasl-2.1.19
PKGNAME=	${DISTNAME}p1
a60 1
	rm ${WRKBUILD}/saslauthd/saslauthd.8
@


1.19
log
@SECURITY:
libsasl, contains functions which may load dynamic libraries.
These libraries may be loaded from the path specified by the
environmental variable SASL_PATH, which in some situations may be
fully controlled by a local attacker.
Thus, if a set-user-ID application utilizes libsasl, it may be possible
for a local attacker to gain superuser privileges.

ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2004/09/26 10:01:01 sturm Exp $
d57 1
a57 1
CONFIGURE_ARGS+=        --with-ldap
@


1.18
log
@regen saslauthd.8 as the distributed file is full of ESC-seqs
noticed by "Hanford, Seth" <shanford at ckure.com>
ok maintainer jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2004/09/15 18:35:59 espie Exp $
d6 1
@


1.17
log
@new plists.
gnutls depends on lzo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/08/04 14:51:31 naddy Exp $
d60 1
d62 2
a63 1
	${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS} testsaslauthd)
@


1.16
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/08/02 12:57:41 espie Exp $
a69 8

.if ${FLAVOR:L:Msql}
.  if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
SED_PLIST+=-e '/%%SHARED-sql%%/d'
.  else
SED_PLIST+=-e '/%%SHARED-sql%%/r${PKGDIR}/PFRAG.sql.shared' -e '//d'
.  endif
.endif
@


1.16.2.1
log
@SECURITY:
libsasl, contains functions which may load dynamic libraries.
These libraries may be loaded from the path specified by the
environmental variable SASL_PATH, which in some situations may be
fully controlled by a local attacker.
Thus, if a set-user-ID application utilizes libsasl, it may be possible
for a local attacker to gain superuser privileges.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/08/04 14:51:31 naddy Exp $
a5 1
PKGNAME=	${DISTNAME}p1
@


1.15
log
@NO_SHARED_LIBS always defined.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/07/19 05:28:46 kevlo Exp $
d30 2
@


1.14
log
@update to cyrus-sals2 2.1.19.

Submitted by:	Ben Hooper <ben@@networkinsanity.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/07/09 15:07:04 kevlo Exp $
d69 4
a72 1
.if ${FLAVOR:L:Msql} && !defined(NO_SHARED_LIBS)
d74 1
a74 2
.elif ${FLAVOR:L:Msql}
SED_PLIST+=-e '/%%SHARED-sql%%/d'
@


1.13
log
@update cyrus-sasl2 2.1.18.
Submmited by Ben Hooper <ben@@networkinsanity.com>
Some modifications by me, ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/06/28 22:14:45 jolan Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.18
@


1.12
log
@Oops
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/02/16 11:08:46 kevlo Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.13
a19 2
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/config ${WRKSRC}/saslauthd/config

d24 6
a29 6
CONFIGURE_ARGS+=	--with-saslauthd="/var/sasl2" \
			--with-staticsasl \
			--enable-login \
			--enable-gssapi="/usr" \
			--disable-sample
CFLAGS+=		-I/usr/include/kerberosV
d31 1
a31 1
FLAVORS=	db4
d34 5
a38 5
.if ${FLAVOR:L} == "db4"
CONFIGURE_ARGS+=	--with-dblib=berkeley \
			--with-bdb-libdir="${LOCALBASE}/lib/db4" \
			--with-bdb-incdir="${LOCALBASE}/include/db4"
LIB_DEPENDS=		lib/db4/db.4::databases/db/v4
d41 14
a54 2
			--without-bdb-libdir \
			--without-bdb-incdir
d68 6
@


1.12.2.1
log
@SECURITY:
libsasl, contains functions which may load dynamic libraries.
These libraries may be loaded from the path specified by the
environmental variable SASL_PATH, which in some situations may be
fully controlled by a local attacker.
Thus, if a set-user-ID application utilizes libsasl, it may be possible
for a local attacker to gain superuser privileges.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/02/17 03:26:02 kevlo Exp $
a5 1
PKGNAME=	${DISTNAME}p1
@


1.12.2.2
log
@fix my stupid typos: getuid -> geteuid, getgid -> getegid

reported by bluhm@@genua.de, markus@@; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12.2.1 2004/10/11 20:17:21 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.11
log
@- don't need to use USE_LIBTOOL
- add flavor db4

Ok'd by jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/02/10 04:52:22 kevlo Exp $
a27 3
			--with-dblib=berkeley \
			--with-bdb-libdir="${LOCALBASE}/lib/db4" \
			--with-bdb-incdir="${LOCALBASE}/include/db4" \
@


1.10
log
@install correct libsasl2.a.
ok jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/06/28 22:14:45 jolan Exp $
a19 3
#SEPARATE_BUILD=		concurrent

USE_LIBTOOL=		Yes
d28 3
a30 3
			--with-dblib=ndbm \
			--without-bdb-libdir \
			--without-bdb-incdir \
d36 13
a57 1
	${INSTALL_DATA} ${WRKBUILD}/lib/.libs/libsasl2.a ${PREFIX}/lib
@


1.9
log
@remove krb4 hints which point to nothing now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/06/26 18:20:20 jakob Exp $
d48 1
a48 1
	${INSTALL_DATA} ${WRKBUILD}/lib/libsasl2.a ${PREFIX}/lib
@


1.9.2.1
log
@SECURITY:
libsasl, contains functions which may load dynamic libraries.
These libraries may be loaded from the path specified by the
environmental variable SASL_PATH, which in some situations may be
fully controlled by a local attacker.
Thus, if a set-user-ID application utilizes libsasl, it may be possible
for a local attacker to gain superuser privileges.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/06/28 22:14:45 jolan Exp $
a5 1
PKGNAME=	${DISTNAME}p1
@


1.9.2.2
log
@fix my stupid typos: getuid -> geteuid, getgid -> getegid

reported by bluhm@@genua.de, markus@@; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9.2.1 2004/10/12 17:21:27 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.8
log
@update to sasl2 version 2.1.13
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/02/03 08:54:04 jakob Exp $
a34 1
			--enable-krb4="/usr" \
@


1.7
log
@update to v2.1.11; from Hack Kampbjorn
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/12/10 08:37:42 jakob Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.11
d20 1
a20 1
SEPARATE_BUILD=		concurrent
@


1.6
log
@upgrade to v2.1.10, buffer overflow fixes. patch from Hack Kampbjorn.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/09/08 11:14:29 jakob Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.10
a39 4

post-extract:
	(cd ${WRKSRC}/config; \
	rm kerberos_v4.m4~ kerberos_v4.m4.orig)
@


1.5
log
@disable sample code
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/09/07 19:06:39 jakob Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.7
d40 4
@


1.5.2.1
log
@upgrade to v2.1.10, buffer overflow fixes. patch from Hack Kampbjorn.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/09/08 11:14:29 jakob Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.10
a39 4

post-extract:
	(cd ${WRKSRC}/config; \
	rm kerberos_v4.m4~ kerberos_v4.m4.orig)
@


1.4
log
@update to v2.1.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/07/26 11:19:01 jakob Exp $
d36 2
a37 1
			--enable-gssapi="/usr"
@


1.3
log
@move doc to doc/sasl2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/07/05 21:32:45 jakob Exp $
d5 1
a5 1
DISTNAME=	cyrus-sasl-2.1.5
a6 1
NEED_VERSION=	1.531
@


1.2
log
@build correctly even though databases/db is installed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/06/22 08:55:44 jakob Exp $
d46 3
a48 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/sasl
	${INSTALL_DATA} ${WRKSRC}/doc/*.html ${PREFIX}/share/doc/sasl
	${INSTALL_DATA} ${WRKSRC}/doc/*.txt ${PREFIX}/share/doc/sasl
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/11/15 23:17:59 jakob Exp $
d32 3
@


1.1.1.1
log
@cyrus-sasl v2
@
text
@@
