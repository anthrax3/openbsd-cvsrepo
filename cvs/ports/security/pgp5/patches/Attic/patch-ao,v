head	1.4;
access;
symbols
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2000.09.06.18.14.05;	author marc;	state dead;
branches;
next	1.3;

1.3
date	99.12.24.06.22.13;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.12.13.05.56.17;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	99.12.12.22.28.02;	author dugsong;	state Exp;
branches;
next	;


desc
@@


1.4
log
@
Remove intl/usa flavors as one port is OK for world wide use after
6 Sep 2000 (when RSA Security Inc. placed its public key encryption
algorithm into the public domain).   Remove configure patch that
added the no-longer-needed --with-rsaref option
@
text
@--- configure.in.orig	Sat Feb  7 14:54:56 1998
+++ configure.in	Thu Dec 23 23:59:20 1999
@@@@ -148,13 +148,30 @@@@
 #source files (pgpRSAGlue[12].c, pgpRSAKeyGen.c and pgpAltRSAGlu.c)
 #is handled with the make distribution-* flags.
 
+WITH_RSAREF=0
+AC_MSG_CHECKING(whether to use RSAREF)
+AC_ARG_WITH(rsaref,
+[  --with-rsaref           Use RSAREF],
+[
+ case "$withval" in
+  yes)
+       AC_MSG_RESULT(yes)
+       WITH_RSAREF=1
+       ;;
+  *)
+       AC_MSG_RESULT(no)
+       ;;
+  esac ],
+  AC_MSG_RESULT(no)
+)
+
 AC_MSG_CHECKING(for internal RSA encrypt/sign support)
 RSALIB=""
 RSAINCS=""
 RSAKEYGEN=""
 RSAKEY="pgpRSAKey.o"
 HAVE_RSAREF=0
-if test -f "lib/pgp/pubkey/pgpRSAGlue1.c"; then
+if test -f "lib/pgp/pubkey/pgpRSAGlue1.c" -a "x$WITH_RSAREF" = "x0"; then
   AC_MSG_RESULT(yes)
   RSAGLUE="pgpRSAGlue1.o pgpRSAGlue2.o"
   AC_MSG_CHECKING(for lib/pgp/pubkey/pgpRSAKeyGen.c)
@@@@ -170,15 +187,15 @@@@
   AC_MSG_CHECKING(for lib/pgp/pubkey/pgpAltRSAGlu.c)
   if test -f "lib/pgp/pubkey/pgpAltRSAGlu.c"; then
     AC_MSG_RESULT(yes)
-    AC_MSG_CHECKING(for RSAREF in ../rsaref/install/unix)
-    if test -f "../rsaref/install/unix/rsaref.a"; then
+    if test "x$WITH_RSAREF" = "x1"; then
+    AC_MSG_CHECKING(for RSAREF in ${LOCALBASE})
+    if test -f "${LOCALBASE}/lib/librsaref.a"; then
       HAVE_RSAREF=1
       AC_MSG_RESULT(yes)
       AC_DEFINE(USE_RSAREF_FULL, 1)
       RSAGLUE="pgpAltRSAGlu.o"
-      RSALIB="\$(top_builddir)/../rsaref/install/unix/rsaref.a"
-      RSAINCS="-I \$(top_builddir)/../rsaref/test"
-      RSAINCS="$RSAINCS -I \$(top_builddir)/../rsaref/source"
+      RSALIB="-L${LOCALBASE}/lib -lrsaref"
+      RSAINCS="-I${LOCALBASE}/include"
       AC_MSG_CHECKING(for lib/pgp/pubkey/pgpRSAKeyGen.c)
       if test -f "lib/pgp/pubkey/pgpRSAKeyGen.c"; then
         AC_MSG_RESULT(yes)
@@@@ -189,6 +206,7 @@@@
       fi
     else
       AC_MSG_RESULT(no)
+    fi
     fi
   else
     AC_MSG_RESULT(no)
@


1.3
log
@- remove now unnecessary pre-configure target
- after looking at patch-ao again it was quite clear that the previous
revision broke internal RSA support, fix patch and make one slight
improvement to it.
@
text
@@


1.2
log
@- remove NO_PACKAGE and NEED_VERSION tags
- improve patch-ao by also adding an option --with-rsaref so that the use
of RSAREF has to be enabled instead of enabling it based on the existance
of librsaref. Thus would allow someone to be able to build a version of
PGP on a system that has librsaref installed already. Quite useful in the
situation of doing automated package building.
@
text
@d2 2
a3 2
+++ configure.in	Mon Dec 13 00:05:31 1999
@@@@ -148,6 +148,25 @@@@
d7 2
a8 1
+AC_MSG_CHECKING(whether to use rsaref)
d10 1
a10 1
+[  --with-rsaref           Use RSAREF (try to avoid patent problems in U.S.)],
a11 1
+WITH_RSAREF=0
a18 1
+       AC_DEFINE(WITH_RSAREF)
a23 1
+if test "x$WITH_RSAREF" = "x1"; then
d27 9
a35 1
@@@@ -170,15 +189,14 @@@@
d41 1
d56 8
a63 8
@@@@ -221,6 +239,7 @@@@
 AC_SUBST(RSAINCS)
 AC_SUBST(RSAKEYGEN)
 AC_SUBST(RSAKEY)
+fi
 
 BETALICENSE=""
 FREEWARELICENSE=""
@


1.1
log
@missed patch in change to rsaref port
@
text
@d1 29
a29 3
--- configure.in.orig	Sun Dec 12 16:51:44 1999
+++ configure.in	Sun Dec 12 16:54:49 1999
@@@@ -170,15 +170,14 @@@@
d35 2
a36 2
+    AC_MSG_CHECKING(for RSAREF in ${prefix})
+    if test -f "${prefix}/lib/librsaref.a"; then
d44 2
a45 2
+      RSALIB="${prefix}/lib/librsaref.a"
+      RSAINCS="-I${prefix}/include"
d49 8
@

