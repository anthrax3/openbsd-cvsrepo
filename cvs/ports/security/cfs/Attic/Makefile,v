head	1.36;
access;
symbols
	OPENBSD_5_8:1.35.0.6
	OPENBSD_5_8_BASE:1.35
	OPENBSD_5_7:1.35.0.2
	OPENBSD_5_7_BASE:1.35
	OPENBSD_5_6:1.33.0.4
	OPENBSD_5_6_BASE:1.33
	OPENBSD_5_5:1.33.0.2
	OPENBSD_5_5_BASE:1.33
	OPENBSD_5_4:1.32.0.2
	OPENBSD_5_4_BASE:1.32
	OPENBSD_5_3:1.31.0.10
	OPENBSD_5_3_BASE:1.31
	OPENBSD_5_2:1.31.0.8
	OPENBSD_5_2_BASE:1.31
	OPENBSD_5_1_BASE:1.31
	OPENBSD_5_1:1.31.0.6
	OPENBSD_5_0:1.31.0.4
	OPENBSD_5_0_BASE:1.31
	OPENBSD_4_9:1.31.0.2
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.29.0.2
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.28.0.10
	OPENBSD_4_7_BASE:1.28
	OPENBSD_4_6:1.28.0.8
	OPENBSD_4_6_BASE:1.28
	OPENBSD_4_5:1.28.0.6
	OPENBSD_4_5_BASE:1.28
	OPENBSD_4_4:1.28.0.4
	OPENBSD_4_4_BASE:1.28
	OPENBSD_4_3:1.28.0.2
	OPENBSD_4_3_BASE:1.28
	OPENBSD_4_2:1.27.0.6
	OPENBSD_4_2_BASE:1.27
	OPENBSD_4_1:1.27.0.4
	OPENBSD_4_1_BASE:1.27
	OPENBSD_4_0:1.27.0.2
	OPENBSD_4_0_BASE:1.27
	OPENBSD_3_9:1.26.0.4
	OPENBSD_3_9_BASE:1.26
	OPENBSD_3_8:1.26.0.2
	OPENBSD_3_8_BASE:1.26
	OPENBSD_3_7:1.25.0.2
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.24.0.2
	OPENBSD_3_6_BASE:1.24
	OPENBSD_3_5:1.23.0.4
	OPENBSD_3_5_BASE:1.23
	OPENBSD_3_4:1.23.0.2
	OPENBSD_3_4_BASE:1.23
	OPENBSD_3_3:1.22.0.2
	OPENBSD_3_3_BASE:1.22
	OPENBSD_3_2:1.20.0.4
	OPENBSD_3_2_BASE:1.20
	OPENBSD_3_1:1.20.0.2
	OPENBSD_3_1_BASE:1.20
	OPENBSD_3_0:1.19.0.2
	OPENBSD_3_0_BASE:1.19
	OPENBSD_2_9_TRACKING_SWITCH:1.19
	OPENBSD_2_9:1.17.0.2
	OPENBSD_2_9_BASE:1.17
	OPENBSD_2_8:1.15.0.2
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.13.0.2
	OPENBSD_2_7_BASE:1.13
	OPENBSD_2_6:1.4.0.4
	OPENBSD_2_6_BASE:1.4
	OPENBSD_2_5:1.4.0.2
	OPENBSD_2_5_BASE:1.4
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	OPENBSD_2_3:1.2.0.2
	OPENBSD_2_3_BASE:1.2;
locks; strict;
comment	@# @;


1.36
date	2015.08.25.11.16.27;	author jca;	state dead;
branches;
next	1.35;
commitid	ZYz3xUSOJVyi0xdm;

1.35
date	2014.11.19.20.48.51;	author sthen;	state Exp;
branches;
next	1.34;
commitid	7b2rx719KF04LOsY;

1.34
date	2014.11.19.20.48.00;	author sthen;	state Exp;
branches;
next	1.33;
commitid	bipTG7olNPZwDodg;

1.33
date	2013.11.30.20.31.49;	author jca;	state Exp;
branches;
next	1.32;

1.32
date	2013.03.11.11.41.24;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.10.18.21.41.45;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.04.15.14.58.24;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2007.09.15.23.29.58;	author merdely;	state Exp;
branches;
next	1.27;

1.27
date	2006.07.28.20.15.39;	author sturm;	state Exp;
branches;
next	1.26;

1.26
date	2005.04.07.20.23.44;	author sturm;	state Exp;
branches;
next	1.25;

1.25
date	2004.12.03.16.08.47;	author alek;	state Exp;
branches;
next	1.24;

1.24
date	2004.06.15.18.32.22;	author sturm;	state Exp;
branches;
next	1.23;

1.23
date	2003.08.29.11.14.01;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2002.12.23.00.37.52;	author pvalchev;	state Exp;
branches;
next	1.21;

1.21
date	2002.10.28.17.35.01;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2002.03.21.21.25.51;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2001.07.13.11.24.42;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2001.05.06.03.45.40;	author lebel;	state Exp;
branches;
next	1.17;

1.17
date	2001.03.17.15.46.36;	author wilfried;	state Exp;
branches;
next	1.16;

1.16
date	2001.01.05.16.35.59;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.10.22.15.43.20;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2000.10.22.14.03.43;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2000.04.30.09.20.14;	author kevlo;	state Exp;
branches;
next	1.12;

1.12
date	2000.04.09.17.37.56;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2000.03.23.04.22.20;	author turan;	state Exp;
branches;
next	1.10;

1.10
date	2000.03.16.23.15.51;	author angelos;	state Exp;
branches;
next	1.9;

1.9
date	99.12.21.18.51.21;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	99.12.09.04.46.18;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.11.24.03.41.22;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.10.31.23.31.04;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	99.10.27.19.05.06;	author fgsch;	state Exp;
branches;
next	1.4;

1.4
date	99.02.28.08.35.42;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	98.10.18.05.02.10;	author marc;	state Exp;
branches;
next	1.2;

1.2
date	98.04.12.21.40.56;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	97.11.27.22.22.48;	author angelos;	state Exp;
branches;
next	;


desc
@@


1.36
log
@Remove security/cfs.  Unmaintained code, broken on 64 bits archs.

softraid CRYPTO, vnconfig and security/encfs provide much saner
alternatives.

ok tedu@@ steven@@ ajacoutot@@ sthen@@
@
text
@# $OpenBSD: Makefile,v 1.35 2014/11/19 20:48:51 sthen Exp $

NOT_FOR_ARCHS=	${LP64_ARCHS}

COMMENT=	cryptographic file system (user-space NFS server)

DISTNAME=	cfs-1.4.1
REVISION =	4
CATEGORIES=	security

HOMEPAGE=	http://www.crypto.com/software/

# badly worded BSD-like
PERMIT_PACKAGE_CDROM=	Yes
WANTLIB=		c

MASTER_SITES=	${HOMEPAGE} \
		ftp://utopia.hacktic.nl/pub/crypto/disk/cfs/

do-build:
	@@cd ${WRKSRC} && env CCTMP="${CC}" CFLAGS="${CFLAGS}" sh netbsd_make_with_bad_rpcgen cfs

NO_TEST=	Yes

# ccat and cname only work on old-style cfs < 1.3
do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/cfs
	cd ${WRKSRC} && ${INSTALL_PROGRAM} cfsd ${PREFIX}/sbin
	cd ${WRKSRC} && ${INSTALL_PROGRAM} cattach cdetach cmkdir \
	    cmkkey cpasswd ${PREFIX}/bin
	cd ${WRKSRC} && ${INSTALL_MAN} cattach.1 cdetach.1 cmkdir.1 \
	    cmkkey.1 cpasswd.1 ${PREFIX}/man/man1
	cd ${WRKSRC} && ${INSTALL_MAN} cfsd.8 ${PREFIX}/man/man8
	cd ${WRKSRC} && ${INSTALL_DATA} README.install notes.ms \
	    ${PREFIX}/share/doc/cfs

.include <bsd.port.mk>
@


1.35
log
@revert this part which shouldn't have been in previous commit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/11/19 20:48:00 sthen Exp $
@


1.34
log
@unbreak following removal of unistd.h include from sys/file.h

this commit does nothing to improve the crappiness of these ports, just
lets them build again.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/11/30 20:31:49 jca Exp $
d3 1
a3 1
#NOT_FOR_ARCHS=	${LP64_ARCHS}
@


1.33
log
@#ifdefs to avoid using stty/gtty and including sgtty.h.
This removes the need for libcompat.
Remove USE_GROFF while here, as requested by naddy.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/03/11 11:41:24 espie Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${LP64_ARCHS}
@


1.32
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/20 17:22:43 espie Exp $
d8 1
a8 1
REVISION =	3
a22 1
USE_GROFF =	Yes
@


1.31
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/10/18 21:41:45 espie Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d24 1
a24 1
NO_REGRESS=	Yes
@


1.30
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/04/15 14:58:24 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p3
@


1.29
log
@Stupid poor blank lines, stupid poor blank lines...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/09/15 23:29:58 merdely Exp $
d26 1
@


1.28
log
@Remove surrounding quotes in NO_REGRESS/COMMENT*/PERMIT_*

From Darrin Chandler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/07/28 20:15:39 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p2
@


1.27
log
@clean up MESSAGE/UNMESSAGE and mention startup code here, it's going
to be removed from rc.local

synchronously mount /crypt as suggested in pr 3567, this way I can move
even files bigger than a few KB into the crypted directory.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/04/07 20:23:44 sturm Exp $
d5 1
a5 1
COMMENT=	"cryptographic file system (user-space NFS server)"
@


1.26
log
@several patches from Debian
- cmkdir now uses /dev/srandom (actually changed to arandom by me)
- support for filenames w/ 8bit chars
- sprintf() replaced with snprintf()
- some bugfixes

from Andreas Voegele <voegelas at gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2004/12/03 16:08:47 alek Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p1
@


1.25
log
@- Replace INSTALL with @@sample
- Better @@extraunexec
- Replace DEINSTALL with UNMESSAGE
- Bump PKGNAME
- Add WANTLIB marker

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2004/06/15 18:32:22 sturm Exp $
d8 1
a8 1
PKGNAME=	${DISTNAME}p0
@


1.24
log
@update to cfs 1.4.1

CFS was actually broken since at least 3.2 or so, but should work now
again on 32-bit archs. 64-bit archs are still broken and won't be
fixed anytime soon.

I also set PERMIT_*=Yes, as the "no fee" part of the license is clearly
due to bad english.

xsa@@ helped testing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2003/08/29 11:14:01 naddy Exp $
d8 1
d18 1
@


1.23
log
@remove broken master site; from Jerome Verhasselt <jerome@@watersaving.net>
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.22 2002/12/23 00:37:52 pvalchev Exp $
d7 1
a7 1
DISTNAME=	cfs-1.3.3
a8 3
MASTER_SITES=	ftp://utopia.hacktic.nl/pub/crypto/disk/ \
		ftp://ftp.informatik.uni-hamburg.de/pub/virus/crypt/disk/ \
      		ftp://ftp.funet.fi/pub/mirrors/utopia.hacktic.nl/disk/
d10 4
a13 1
PERMIT_PACKAGE_CDROM=	No
d15 1
a15 1
PERMIT_DISTFILES_CDROM=	No
d18 3
d22 1
a22 1
	@@cd ${WRKSRC} && env CCTMP="${CC}" CFLAGS="${CFLAGS}" sh make_with_bad_rpcgen cfs
d26 1
d29 1
a29 1
	cd ${WRKSRC} && ${INSTALL_PROGRAM} ccat cfsd cname ${PREFIX}/sbin
d31 1
a31 1
	    cpasswd ${PREFIX}/bin
d33 2
a34 3
	    cpasswd.1 ${PREFIX}/man/man1
	cd ${WRKSRC} && ${INSTALL_MAN} ccat.8 cfsd.8 cname.8 \
	    ${PREFIX}/man/man8
a36 1
	echo Note that your machine MUST be setup as an NFS client and server. 
@


1.22
log
@Remove Angelos from maintainer per his request
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2002/10/28 17:35:01 naddy Exp $
d7 1
a7 2
MASTER_SITES=	http://the.wiretapped.net/security/cryptography/filesystems/ \
		ftp://utopia.hacktic.nl/pub/crypto/disk/ \
@


1.21
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2002/03/21 21:25:51 espie Exp $
a10 2

MAINTAINER=	Angelos D. Keromytis <angelos@@openbsd.org>
@


1.20
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/07/13 11:24:42 naddy Exp $
a12 1
NEED_VERSION=	1.515
a18 2
ALL_TARGET=	cfs

d21 2
@


1.19
log
@MASTER_SITES fix by Heikki Korpela <heko@@saitti.net>:
- Add ftp.funet.fi and ftp.sunet.se mirrors where available.
- Remove broken ftp.funet.fi references.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/05/06 03:45:40 lebel Exp $
d13 1
a13 1
NEED_VERSION=	1.402
@


1.18
log
@security: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/03/17 15:46:36 wilfried Exp $
d9 2
a10 1
		ftp://ftp.informatik.uni-hamburg.de/pub/virus/crypt/disk/
@


1.17
log
@* respect CC/CFLAGS
* redo patches with update-patches
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.16 2001/01/05 16:35:59 brad Exp $
d12 1
@


1.16
log
@bye bye NO_CDROM and MIRROR_DISTFILE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/10/22 15:43:20 espie Exp $
d19 1
a19 1
	@@cd ${WRKSRC} && sh make_with_bad_rpcgen cfs
@


1.15
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/10/22 14:03:43 espie Exp $
a8 3
NO_CDROM=	"CRYPTO: Third party crypto not allowed."
RESTRICTED=	"contains crypto code"

d11 1
a11 2
# Note that this port contains crypto and is subject to US crypto laws.
PERMIT_PACKAGE_CDROM=	Yes
d13 1
a13 1
PERMIT_DISTFILES_CDROM=	Yes
d19 1
a19 1
	(cd ${WRKSRC} ; sh make_with_bad_rpcgen cfs)
@


1.14
log
@Complete a few MAINTAINER names.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/04/30 09:20:14 kevlo Exp $
a18 2

FAKE=		Yes
@


1.13
log
@fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/04/09 17:37:56 espie Exp $
d12 1
a12 1
MAINTAINER=	angelos@@openbsd.org
@


1.12
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/03/23 04:22:20 turan Exp $
a4 1
FAKE=No
d19 2
@


1.11
log
@license
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2000/03/16 23:15:51 angelos Exp $
d5 1
@


1.10
log
@Inform the user at the end of the installation that the machine must
be set up as an NFS client and server.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/12/21 18:51:21 fgsch Exp $
d13 6
@


1.9
log
@Remove .for/.endfor in favor of cd ${WRKSRC} && ${INSTALL_PROGRAM}.
Use ${INSTALL_DATA_DIR} instead of mkdir.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/12/09 04:46:18 brad Exp $
d30 1
@


1.8
log
@- fix install target
- add missing @@dirrm to PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/11/24 03:41:22 brad Exp $
d20 10
a29 16
	@@mkdir -p ${PREFIX}/share/doc/cfs
.for f in ccat cfsd cname
	${INSTALL_PROGRAM} ${WRKSRC}/${f} ${PREFIX}/sbin
.endfor
.for f in cattach cdetach cmkdir cpasswd
	${INSTALL_PROGRAM} ${WRKSRC}/${f} ${PREFIX}/bin
.endfor
.for f in cattach.1 cdetach.1 cmkdir.1 cpasswd.1
	${INSTALL_MAN} ${WRKSRC}/${f} ${PREFIX}/man/man1
.endfor
.for f in ccat.8 cfsd.8 cname.8
	${INSTALL_MAN} ${WRKSRC}/${f} ${PREFIX}/man/man8
.endfor
.for f in README.install notes.ms
	${INSTALL_DATA} ${WRKSRC}/${f} ${PREFIX}/share/doc/cfs
.endfor
@


1.7
log
@- add another dist site
- cleanup Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/10/31 23:31:04 fgsch Exp $
d20 16
a35 7
	@@cd ${WRKSRC}; \
	    ${INSTALL_PROGRAM} ccat cfsd cname ${PREFIX}/sbin; \
	    ${INSTALL_PROGRAM} cattach cdetach cmkdir cpasswd ${PREFIX}/bin; \
	    ${INSTALL_MAN} ${MAN1} ${PREFIX}/man/man1; \
	    ${INSTALL_MAN} ${MAN8} ${PREFIX}/man/man8; \
	    ${MKDIR} ${PREFIX}/share/doc/cfs; \
	    ${INSTALL_DATA} README.install notes.ms ${PREFIX}/share/doc/cfs; \
@


1.6
log
@Fix build problems. Remove unnecessary script.
Mark it unbroken.
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.5 1999/10/27 19:05:06 fgsch Exp $
#
d5 4
d10 1
a10 2
MASTER_SITES=	ftp://utopia.hacktic.nl/pub/crypto/disk/ \
		ftp://ftp.informatik.uni-hamburg.de/pub/virus/crypt/disk/
d12 1
a12 1
MAINTAINER= 	angelos@@openbsd.org
a14 3
MAN1=		cattach.1 cdetach.1 cmkdir.1 cpasswd.1
MAN8=		ccat.8 cfsd.8 cname.8
RESTRICTED=	"contains crypto code"
@


1.5
log
@Mark port as broken by now. cfs_fh.c does not compile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/02/28 08:35:42 fgsch Exp $
a15 2

BROKEN=		"build fails on cfs_fh.c"
@


1.4
log
@Don't install cfs.sh, it is started in /etc/rc.local.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1998/10/18 05:02:10 marc Exp $
d16 2
@


1.3
log
@comment out the BROKEN reason for all ports where the reason
was source files out of date and we have a copy of the required
version on ftp.openbsd.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1998/04/12 21:40:56 marc Exp $
a27 1
	    ${INSTALL_SCRIPT} cfsd.sh ${PREFIX}/etc/rc.d
@


1.2
log
@update NO_CDROM reasons in Makefiles
@
text
@d1 1
a1 6
# OpenBSD makefile for:		cfs
# Version required:	1.3.3
# Date created:		26 November 1997
# Whom:			Angelos D. Keromytis
#
# $Id: Makefile,v 1.1 1997/11/27 22:22:48 angelos Exp $
@


1.1
log
@CFS 1.3.3 + blowfish (from Niels Provos) port.
It's fun being in Canada.
@
text
@d6 1
a6 1
# $Id: Makefile,v 1.1.1.1 1997/07/30 22:10:19 jdp Exp $
d11 1
@

