head	1.58;
access;
symbols
	OPENBSD_2_7:1.57.0.2
	OPENBSD_2_7_BASE:1.57
	OPENBSD_2_6:1.40.0.2
	OPENBSD_2_6_BASE:1.40
	OPENBSD_2_5:1.31.0.2
	OPENBSD_2_5_BASE:1.31
	OPENBSD_2_4:1.27.0.2
	OPENBSD_2_4_BASE:1.27
	OPENBSD_2_3:1.19.0.2
	OPENBSD_2_3_BASE:1.19;
locks; strict;
comment	@# @;


1.58
date	2000.08.27.20.45.13;	author turan;	state dead;
branches;
next	1.57;

1.57
date	2000.04.11.06.06.29;	author turan;	state Exp;
branches;
next	1.56;

1.56
date	2000.04.11.06.02.29;	author turan;	state Exp;
branches;
next	1.55;

1.55
date	2000.03.25.06.04.36;	author brad;	state Exp;
branches;
next	1.54;

1.54
date	2000.03.25.05.53.20;	author brad;	state Exp;
branches;
next	1.53;

1.53
date	2000.03.24.23.28.34;	author espie;	state Exp;
branches;
next	1.52;

1.52
date	2000.03.05.18.30.42;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2000.02.15.05.05.12;	author turan;	state Exp;
branches;
next	1.50;

1.50
date	2000.02.13.06.57.21;	author turan;	state Exp;
branches;
next	1.49;

1.49
date	2000.02.12.08.35.59;	author turan;	state Exp;
branches;
next	1.48;

1.48
date	2000.02.02.17.02.38;	author espie;	state Exp;
branches;
next	1.47;

1.47
date	99.12.13.03.04.54;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	99.12.13.01.49.33;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	99.12.12.22.09.25;	author dugsong;	state Exp;
branches;
next	1.44;

1.44
date	99.12.09.17.55.55;	author brad;	state Exp;
branches;
next	1.43;

1.43
date	99.12.03.01.13.16;	author brad;	state Exp;
branches;
next	1.42;

1.42
date	99.11.25.21.37.10;	author brad;	state Exp;
branches;
next	1.41;

1.41
date	99.11.24.02.57.56;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	99.10.12.01.22.54;	author brad;	state Exp;
branches;
next	1.39;

1.39
date	99.10.09.04.28.16;	author turan;	state Exp;
branches;
next	1.38;

1.38
date	99.10.08.20.04.33;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	99.10.07.05.23.58;	author turan;	state Exp;
branches;
next	1.36;

1.36
date	99.10.04.22.58.31;	author brad;	state Exp;
branches;
next	1.35;

1.35
date	99.09.26.21.15.32;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	99.09.02.18.59.31;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	99.05.14.18.35.25;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	99.05.14.05.27.30;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	99.04.08.05.36.11;	author marc;	state Exp;
branches;
next	1.30;

1.30
date	98.12.16.20.24.50;	author marc;	state Exp;
branches;
next	1.29;

1.29
date	98.12.03.18.24.35;	author marc;	state Exp;
branches;
next	1.28;

1.28
date	98.11.22.23.51.26;	author todd;	state Exp;
branches;
next	1.27;

1.27
date	98.08.28.23.00.47;	author deraadt;	state Exp;
branches;
next	1.26;

1.26
date	98.07.13.01.16.52;	author marc;	state Exp;
branches;
next	1.25;

1.25
date	98.07.07.03.59.57;	author marc;	state Exp;
branches;
next	1.24;

1.24
date	98.06.24.22.07.06;	author marc;	state Exp;
branches;
next	1.23;

1.23
date	98.06.12.03.26.50;	author marc;	state Exp;
branches;
next	1.22;

1.22
date	98.06.02.18.09.46;	author marc;	state Exp;
branches;
next	1.21;

1.21
date	98.05.24.01.22.11;	author marc;	state Exp;
branches;
next	1.20;

1.20
date	98.05.24.01.19.31;	author marc;	state Exp;
branches;
next	1.19;

1.19
date	98.04.16.16.19.52;	author marc;	state Exp;
branches;
next	1.18;

1.18
date	98.04.12.21.41.03;	author marc;	state Exp;
branches;
next	1.17;

1.17
date	98.04.05.07.29.05;	author marc;	state Exp;
branches;
next	1.16;

1.16
date	98.04.03.02.33.02;	author marc;	state Exp;
branches;
next	1.15;

1.15
date	98.04.03.01.24.49;	author marc;	state Exp;
branches;
next	1.14;

1.14
date	98.02.23.19.50.15;	author don;	state Exp;
branches;
next	1.13;

1.13
date	98.02.05.19.56.30;	author marc;	state Exp;
branches;
next	1.12;

1.12
date	98.02.05.18.17.08;	author marc;	state Exp;
branches;
next	1.11;

1.11
date	98.01.23.05.11.32;	author todd;	state Exp;
branches;
next	1.10;

1.10
date	97.12.17.22.59.11;	author joey;	state Exp;
branches;
next	1.9;

1.9
date	97.12.17.22.57.32;	author joey;	state Exp;
branches;
next	1.8;

1.8
date	97.12.17.05.05.33;	author imp;	state Exp;
branches;
next	1.7;

1.7
date	97.12.13.00.06.01;	author angelos;	state Exp;
branches;
next	1.6;

1.6
date	97.12.12.23.58.14;	author angelos;	state Exp;
branches;
next	1.5;

1.5
date	97.11.25.23.44.28;	author angelos;	state Exp;
branches;
next	1.4;

1.4
date	97.11.23.03.48.50;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	97.11.17.23.31.19;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	97.11.17.21.47.40;	author joey;	state Exp;
branches;
next	1.1;

1.1
date	97.11.17.05.58.40;	author todd;	state Exp;
branches;
next	;


desc
@@


1.58
log
@remove ssh port.  discussed with theo.
@
text
@# $OpenBSD: Makefile,v 1.57 2000/04/11 06:06:29 turan Exp $

DISTNAME=       ssh-1.2.27
CATEGORIES=	security net
NEED_VERSION=	1.230
MASTER_SITES=	http://the.wiretapped.net/security/cryptography/ssh/SSH/ \
		ftp://ftp.cs.hut.fi/pub/ssh/ \
		ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
		ftp://ftp.cert.dfn.de/pub/tools/net/ssh/
MASTER_SITES0=	http://www.ssh.org/patches/ \
		ftp://ftp2.inch.com/pub/FreeBSD/
PATCHFILES=	patch-${DISTNAME}-bsd.tty.chown:0
PATCH_DIST_STRIP= -p1

NO_CDROM=	"CRYPTO: Third party crypto not allowed."
RESTRICTED=	"Crypto; export-controlled"

MAINTAINER=	todd@@openbsd.org

PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	Yes

FLAVORS=	intl usa

.if defined(FLAVOR)
.if ${FLAVOR} == "intl"
USA_RESIDENT=No
.elif ${FLAVOR} == "usa"
USA_RESIDENT=Yes
.else
	echo "Bad Flavor"
	exit 1
.endif
.endif

.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
LIB_DEPENDS=	rsaref.2::security/rsaref
CONFIGURE_ARGS+= --with-rsaref="${LOCALBASE}/lib"
CONFIGURE_ENV=	CFLAGS="${CFLAGS} -I${LOCALBASE}/include"
.endif

FAKE=	Yes

GNU_CONFIGURE=	Yes
CONFIGURE_ARGS+=--with-etcdir="${ETCDIR}" \
		--with-rsh="${RSHPROG}" \
		--with-libwrap

FAKE_FLAGS=	install_prefix="${WRKINST}"

IS_INTERACTIVE=	Yes

.if defined(X11) && ${X11:U} == NO
CONFIGURE_ARGS= --without-x
.endif

#Uncomment if all your users are in their own group and their homedir
#is writeable by that group.  Beware the security implications!
#
#CONFIGURE_ARGS+= --enable-group-writeability

#Uncomment if you want to allow ssh to emulate an unencrypted rsh connection
#over a secure medium.  This is normally dangerous since it can lead to the
#disclosure keys and passwords.
#
#CONFIGURE_ARGS+= --with-none

# Include SOCKS firewall support
.if defined(USE_SOCKS) && ${USE_SOCKS:U} == YES
CONFIGURE_ARGS+= --with-socks="-L${LOCALBASE}/lib -lsocks5" --with-socks5
.endif

# Include support for the SecureID card
# Warning: untested !
.if defined(USE_SECUREID) && ${USE_SECUREID:U} == YES
CONFIGURE_ARGS+= --with-secureid
.endif

# Don't use IDEA. IDEA can be freely used for non-commercial use. However,
# commercial use may require a licence in a number of countries
#
.if defined(DONT_USE_IDEA) && ${DONT_USE_IDEA:U} == YES
CONFIGURE_ARGS+= --without-idea
.endif

ETCDIR?=	/etc
RSHPROG?=	/usr/bin/rsh

pre-patch:
	@@mv -f ${WRKSRC}/make-ssh-known-hosts.pl \
	    ${WRKSRC}/make-ssh-known-hosts.pl.in

fetch-depends:
.if !defined(NO_WARNINGS)
.if !defined(USA_RESIDENT) || ${USA_RESIDENT:U} != YES && ${USA_RESIDENT:U} != NO
	@@echo ""
	@@echo "You must set variable USA_RESIDENT to YES if you are a USA"
	@@echo "resident or NO otherwise.  USA residents must obtain the"
	@@echo "RSAREF2 library to generate this program.  \(RSA Inc. holds"
	@@echo "a patent on RSA in the USA - using RSA implementations"
	@@echo "other than RSAREF in the USA will violate the US patent\)."
	@@echo ""
	@@echo "RSAREF2 will be automatically obtained and used to generate"
	@@echo "this program when given the command \"make USA_RESIDENT=YES\""
	@@echo ""
	@@false
.endif
.endif

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/ssh
	@@cat ${WRKSRC}/server_config.sample | \
	  sed "s#_ETCDIR_#${ETCDIR}#g" > /tmp/ssh_inst.$$$$; \
	  ${INSTALL_DATA} /tmp/ssh_inst.$$$$ ${PREFIX}/lib/ssh/server_config.sample
	${INSTALL_DATA} ${WRKSRC}/host_config.sample ${PREFIX}/lib/ssh
	@@rm -f ${PREFIX}/man/man1/slogin.1
	cd ${PREFIX}/man/man1; ln -fs ssh.1 slogin.1

.include <bsd.port.mk>
@


1.57
log
@test for no FLAVOR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2000/04/11 06:02:29 turan Exp $
@


1.56
log
@usa and international flavors for ssh.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2000/03/25 06:04:36 brad Exp $
d27 1
d35 1
@


1.55
log
@oops, didnt mean to remove these
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2000/03/25 05:53:20 brad Exp $
d24 11
@


1.54
log
@- Fake
- mkdir -> ${INSTALL_DATA_DIR}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2000/03/24 23:28:34 espie Exp $
d14 3
@


1.53
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2000/03/05 18:30:42 espie Exp $
d5 1
a5 1
NEED_VERSION=	 1.230
a9 1

a14 3
NO_CDROM=	"CRYPTO: Third party crypto not allowed."
RESTRICTED=	"Crypto; export-controlled"

a16 1
LICENSE_TYPE=		"CRYPTO NONE"
d28 2
d35 2
a95 2
# Put the config files someplace where they can be found to
# create a package.
d97 1
a97 1
	@@mkdir -p ${PREFIX}/lib/ssh
d101 1
a101 5
	@@${INSTALL_DATA} ${WRKSRC}/host_config.sample ${PREFIX}/lib/ssh
	@@if [ ! -f ${ETCDIR}/ssh_host_key ]; then \
	 echo "Generating a secret host key..."; \
	 ${PREFIX}/bin/ssh-keygen -f ${ETCDIR}/ssh_host_key -N ""; \
	fi
d103 1
a103 2
	@@ln -sf ssh.1 ${PREFIX}/man/man1/slogin.1
	@@PKG_PREFIX="${PREFIX}" sh ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.52
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2000/02/15 05:05:12 turan Exp $
d5 1
a5 1
NEED_VERSION=	1.223
d28 1
a28 1
LIB_DEPENDS=	rsaref.2:security/rsaref
@


1.51
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2000/02/13 06:57:21 turan Exp $
d5 1
a5 1
NEED_VERSION=	1.175
d22 4
a25 4
PERMIT_PACKAGE_CDROM=	NO
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	NO
PERMIT_DISTFILES_FTP=	YES
d28 1
a28 1
LIB_DEPENDS=	rsaref.2:${PORTSDIR}/security/rsaref
@


1.50
log
@comflicting views regarding NONE license.  Is a patch that has no license.
Who says no license is restrictive all the time?  This port is the
perfect example of why license types should not even be looked at to
determine distribution.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2000/02/12 08:35:59 turan Exp $
d22 4
a25 4
PERMIT_PKG_CDROM=	NO
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	NO
PERMIT_DISTF_FTP=	YES
@


1.49
log
@ssh, rsaref is CRYPTO, patch file is NONE.  Make the whole thing CRYPTO
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2000/02/02 17:02:38 espie Exp $
d21 1
a21 1
LICENSE_TYPE=		CRYPTO
@


1.48
log
@Kill most instances of PATCH_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 1999/12/13 03:04:54 brad Exp $
d20 6
@


1.47
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 1999/12/13 01:49:33 brad Exp $
d5 1
d11 1
a11 1
PATCH_SITES=	http://www.ssh.org/patches/ \
d13 1
a13 1
PATCHFILES=	patch-${DISTNAME}-bsd.tty.chown
a15 2
NEED_VERSION=	1.121

d27 1
a27 1
GNU_CONFIGURE=	yes
d32 1
a32 1
IS_INTERACTIVE=	yes
@


1.46
log
@- BUILD_DEPENDS -> LIB_DEPENDS, rsaref builds a shared library
- ${PREFIX} -> ${LOCALBASE} for paths to libs/headers
- define PKG_PREFIX when running the INSTALL script
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 1999/12/12 22:09:25 dugsong Exp $
d24 1
a24 1
CONFIGURE_ARGS+= --with-rsaref=${LOCALBASE}/lib
@


1.45
log
@use rsaref port
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 1999/12/09 17:55:55 brad Exp $
d23 3
a25 3
BUILD_DEPENDS=	${PREFIX}/lib/librsaref.a:${PORTSDIR}/security/rsaref
CONFIGURE_ARGS+= --with-rsaref=${PREFIX}/lib
CFLAGS+=	 -I${PREFIX}/include
d29 2
a30 2
CONFIGURE_ARGS+=--with-etcdir=${ETCDIR} \
		--with-rsh=${RSHPROG} \
d52 1
a52 1
CONFIGURE_ARGS+= --with-socks="-L${PREFIX}/lib -lsocks5" --with-socks5
d106 1
a106 1
	@@sh ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.44
log
@forgot to use :U variable modifier in one loop
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 1999/12/03 01:13:16 brad Exp $
a8 3
MASTER_SITES0=	http://the.wiretapped.net/security/cryptography/libs/rsa/ \
		ftp://idea.dsi.unimi.it/pub/security/crypt/math/ \
		ftp://ftp.it.net.au/mirrors/crypto/misc/
d23 3
a25 2
DISTFILES=	${DISTNAME}.tar.gz rsaref2.tar.gz:0
CONFIGURE_ARGS+= --with-rsaref
a71 4
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
	@@cp ${FILESDIR}/patch-rsaref2 ${PATCHDIR}
	@@cp ${FILESDIR}/patch-rsaref2-2 ${PATCHDIR}
.endif
a74 6
post-patch:
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
	@@rm -f ${PATCHDIR}/patch-rsaref2
	@@rm -f ${PATCHDIR}/patch-rsaref2-2
.endif

a89 5
.endif

post-extract:
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
	@@mv ${WRKDIR}/rsaref2 ${WRKSRC}/rsaref2
@


1.43
log
@- add patch for RSAREF buffer overflow
- fix double slash in header path for GMP and Zlib
- stop creating ${PREFIX}/etc directory
- cleanup Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 1999/11/25 21:37:10 brad Exp $
d37 1
a37 1
.if defined(X11) && ${X11} == NO
@


1.42
log
@replace the one bad distribution site for patch with 2 good ones
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 1999/11/24 02:57:56 brad Exp $
d25 1
a25 1
.if defined(NO_WARNINGS) || (defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES)
d27 1
a29 4
ETCDIR?=	/etc
RSHPROG?=	/usr/bin/rsh

IS_INTERACTIVE=	yes
d31 1
a31 1
CONFIGURE_ARGS=	--with-etcdir=${ETCDIR} \
d34 2
a35 1
CONFIGURE_ENV= PERL=/usr/bin/perl
a51 4
.if defined(USA_RESIDENT) && ${USA_RESIDENT:U} == YES
CONFIGURE_ARGS+= --with-rsaref
.endif

d70 3
d75 2
a76 1
	@@${CP} ${FILESDIR}/patch-rsaref2 ${PATCHDIR}
d78 1
a78 1
	@@${MV} -f ${WRKSRC}/make-ssh-known-hosts.pl \
d83 2
a84 1
	@@${RM} ${PATCHDIR}/patch-rsaref2
d90 11
a100 11
	@@${ECHO}
	@@${ECHO} You must set variable USA_RESIDENT to YES if you are a USA
	@@${ECHO} resident or NO otherwise.  USA residents must obtain the
	@@${ECHO} RSAREF2 library to generate this program.  \(RSA Inc. holds
	@@${ECHO} a patent on RSA in the USA - using RSA implementations
	@@${ECHO} other than RSAREF in the USA will violate the US patent\).
	@@${ECHO} ""
	@@${ECHO} RSAREF2 will be automatically obtained and used to generate
	@@${ECHO} this program when given the command \"make USA_RESIDENT=YES\"
	@@${ECHO} ""
	@@${FALSE}
d106 1
a106 1
	@@${MV} ${WRKDIR}/rsaref2 ${WRKSRC}/rsaref2
a110 1
#
d112 1
a112 2
	@@${MKDIR} ${PREFIX}/etc
	@@${MKDIR} ${PREFIX}/lib/ssh
d114 1
a114 1
	  ${SED} "s#_ETCDIR_#${ETCDIR}#g" > /tmp/ssh_inst.$$$$; \
d118 2
a119 2
		${ECHO} "Generating a secret host key..."; \
		${PREFIX}/bin/ssh-keygen -f ${ETCDIR}/ssh_host_key -N ""; \
d121 3
a123 3
	@@${RM} -f ${PREFIX}/man/man1/slogin.1
	@@${LN} -sf ssh.1 ${PREFIX}/man/man1/slogin.1
	@@${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.41
log
@add another dist site for SSH and RSAREF
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 1999/10/12 01:22:54 brad Exp $
d13 2
a14 1
PATCH_SITES=	http://www.ssh.fi/sshprotocols2/patches/
@


1.40
log
@- move MASTER_SITES0 outside of conditional loop so the files are fetched
and thus fixes compilation when using RSAREF.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 1999/10/09 04:28:16 turan Exp $
d5 2
a6 1
MASTER_SITES=	ftp://ftp.cs.hut.fi/pub/ssh/ \
d9 2
a10 1
MASTER_SITES0=	ftp://idea.dsi.unimi.it/pub/security/crypt/math/ \
d123 2
a124 2
	${RM} -f ${PREFIX}/man/man1/slogin.1
	${LN} -sf ssh.1 ${PREFIX}/man/man1/slogin.1
@


1.39
log
@Whoa!  visi.com is in the US.  I missed that when I appoved the earlier
patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 1999/10/08 20:04:33 brad Exp $
d8 2
a22 2
MASTER_SITES0=	ftp://idea.dsi.unimi.it/pub/security/crypt/math/ \
		ftp://ftp.it.net.au/mirrors/crypto/misc/ \
@


1.38
log
@more dists sites; ok'd by turan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 1999/10/07 05:23:58 turan Exp $
a22 1
		ftp://ftp.visi.com/disk3/unix/crypto/
@


1.37
log
@ETCDIR, /usr/local/etc -> /etc
HOST_CONFIG_FILE, ssh_config -> ssh_port_config
SERVER_CONFIG_FILE, sshd_config -> sshd_port_config

requested by deraadt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 1999/10/04 22:58:31 brad Exp $
d5 3
a7 2
MASTER_SITES= 	ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
		ftp://ftp.cs.hut.fi/pub/ssh/
d21 3
a23 2
MASTER_SITES0=	ftp://nic.funet.fi/pub/crypt/mirrors/ftp.dsi.unimi.it/applied-crypto/ \
		ftp://idea.dsi.unimi.it/pub/security/crypt/math/
@


1.36
log
@- install config files in ${PREFIX}/etc; requested by deraadt@@
- use multiple MASTER_SITES
- sed -> ${SED}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 1999/09/26 21:15:32 espie Exp $
d25 1
a25 1
ETCDIR?=	${PREFIX}/etc
@


1.35
log
@Use make :L/:U for user-friendliness
(USA_RESIDENT=Yes will now work)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 1999/09/02 18:59:31 brad Exp $
d12 1
a12 1
MAINTAINER=	todd@@openbsd.org
d17 2
d20 1
a20 2
DISTFILES=	${DISTNAME}.tar.gz rsaref2.tar.gz
MASTER_SITES+=	ftp://nic.funet.fi/pub/crypt/mirrors/ftp.dsi.unimi.it/applied-crypto/ \
d22 1
d25 1
a25 1
ETCDIR?=	/etc
d30 1
a30 2
CONFIGURE_ARGS= --prefix=${PREFIX} \
		--with-etcdir=${ETCDIR} \
d110 1
d113 2
a114 3
	  sed "s#_ETCDIR_#${ETCDIR}#g" >/tmp/ssh_inst.$$$$; \
	  ${INSTALL_DATA} /tmp/ssh_inst.$$$$ \
	  ${PREFIX}/lib/ssh/server_config.sample
@


1.34
log
@add patch for chflags bug
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 1999/05/14 18:35:25 brad Exp $
d17 1
a17 1
.if defined(NO_WARNINGS) || (defined(USA_RESIDENT) && ${USA_RESIDENT} == YES)
d49 1
a49 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
d54 1
a54 1
.if defined(USE_SOCKS) && ${USE_SOCKS} == YES
d60 1
a60 1
.if defined(USE_SECUREID) && ${USE_SECUREID} == YES
d67 1
a67 1
.if defined(DONT_USE_IDEA) && ${DONT_USE_IDEA} == YES
d72 1
a72 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
d79 1
a79 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
d85 1
a85 1
.if !defined(USA_RESIDENT) || ${USA_RESIDENT} != YES && ${USA_RESIDENT} != NO
d101 1
a101 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
@


1.33
log
@upgrade to ssh 1.2.27
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 1999/05/14 05:27:30 brad Exp $
d7 7
a15 2

MAINTAINER=	todd@@openbsd.org
@


1.32
log
@make ssh use TCP Wrappers by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 1999/04/08 05:36:11 marc Exp $
d3 1
a3 1
DISTNAME=       ssh-1.2.26
a60 1
# Warning: untested !
d78 1
a79 1
fetch-depends:
@


1.31
log
@o add INSTALL script that checks if sshd running.  If not spit
  out a message saying how to start the daemon
o call the INSTALL script from the Makefile
o verify the script is processed when installing the ssh package
THIS PORT IS NOW FROZEN FOR 2.5
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.30 1998/12/16 20:24:50 marc Exp $
#
# Maximal ssh package requires YES values for
# USE_PERL, USE_TCPWRAP
#
d5 2
a6 1

d10 1
a10 4
MAINTAINER=	todd@@OpenBSD.ORG

MASTER_SITES= 	ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
		ftp://ftp.cs.hut.fi/pub/ssh/
d14 2
a15 3
MASTER_SITES+=	\
	ftp://nic.funet.fi/pub/crypt/mirrors/ftp.dsi.unimi.it/applied-crypto/ \
	ftp://idea.dsi.unimi.it/pub/security/crypt/math/
d21 7
a27 4
IS_INTERACTIVE=	YES
USE_PERL=	YES
GNU_CONFIGURE=	YES
CONFIGURE_ARGS= --prefix=${PREFIX} --with-etcdir=${ETCDIR} --with-rsh=${RSHPROG}
d48 5
a114 1
.if !defined(NOMANCOMPRESS)
a116 1
.endif
a118 1

a119 27

# Following stuff must be after <bsd.port.mk> to expand exists() properly

.if defined(USE_PERL) && ${USE_PERL} == YES || \
    exists(/usr/bin/perl) && \
    (!defined(USE_PERL) || ${USE_PERL} != NO)
CONFIGURE_ENV+= PERL=/usr/bin/perl
.else
CONFIGURE_ENV+= PERL=/replace_it_with_PERL_path
.endif

# Include tcp-wrapper support (call remote identd)
.if (defined(USE_TCPWRAP) && ${USE_TCPWRAP} == YES) || \
    (exists(${PREFIX}/lib/libwrap.a) && \
    (!defined(USE_TCPWRAP) || ${USE_TCPWRAP} != NO)) && \
    ${OPSYS} != OpenBSD
CONFIGURE_ENV+= LDFLAGS=-L${PREFIX}/lib CFLAGS="${CFLAGS} -I${PREFIX}/include"
CONFIGURE_ARGS+= --with-libwrap
LIB_DEPENDS+=   wrap\\.7\\.:${PORTSDIR}/security/tcp_wrapper
.elif ${OPSYS} == OpenBSD && (!defined(USE_TCPWRAP) ||  ${USE_TCPWRAP} != NO)
CONFIGURE_ARGS+= --with-libwrap
.endif

# Include SOCKS firewall support
.if defined(USE_SOCKS) && ${USE_SOCKS} == YES
CONFIGURE_ARGS+= --with-socks="-L${PREFIX}/lib -lsocks5" --with-socks5
.endif
@


1.30
log
@guard build instructions with NO_WARNINGS flag
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 1998/12/03 18:24:35 marc Exp $
d118 2
@


1.29
log
@configure an explicit path to rsh; karls@@inet.no
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 1998/11/22 23:51:26 todd Exp $
d18 1
a18 1
.if defined(USA_RESIDENT) && ${USA_RESIDENT} == YES
d78 1
d92 1
@


1.28
log
@o fix ETCDIR to actually allow alternate location to be used
o allow someone to compile ssh without X11 by setting X11=NO
@
text
@d1 1
a1 6
# OpenBSD makefile for:	ssh
# Version required:     1.2.25
# Date created:		16 Nov 1997
# Whom:			todd@@OpenBSD.ORG
#
# $OpenBSD: Makefile,v 1.26 1998/07/13 01:16:52 marc Exp $
d9 1
d11 1
a11 4

MASTER_SITES= 	\
		ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
		ftp://ftp.cs.hut.fi/pub/ssh/
d15 2
a16 1
ETCDIR?=	/etc
d20 1
a20 3
MASTER_SITES=	\
	ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
	ftp://ftp.cs.hut.fi/pub/ssh/ \
d25 3
a27 1
RESTRICTED=	"Crypto; export-controlled"
d31 1
a31 2
CONFIGURE_ENV=	${SETENV}
CONFIGURE_ARGS= --prefix=${PREFIX} --with-etcdir=${ETCDIR}
d39 1
d45 1
d61 1
a64 5

MAN1=		scp.1 ssh-add.1 ssh-agent.1 ssh-keygen.1 ssh.1 \
		make-ssh-known-hosts.1
MAN8=		sshd.8

@


1.27
log
@RSA patent is USA only
@
text
@d22 1
a22 1
ETCDIR=		/etc
d39 4
@


1.26
log
@yet another version of ssh -- 1.2.26
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.25 1998/07/07 03:59:57 marc Exp $
d89 2
a90 3
	@@${ECHO} a patent on RSA and public key cypto in general - using RSA
	@@${ECHO} implementations other than RSAREF will violate the US patent
	@@${ECHO} law\).
@


1.25
log
@add patch from http://www.core-sdi.com/ssh/
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.24 1998/06/24 22:07:06 marc Exp $
d12 1
a12 1
DISTNAME=       ssh-1.2.25
a31 3
PATCH_SITES=		http://www.core-sdi.com/ssh/
PATCHFILES=		ssh-1.2.25.patch
PATCH_DIST_STRIP=	-p1
@


1.24
log
@make sure ports path is set in configure environment
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.23 1998/06/12 03:26:50 marc Exp $
d32 3
@


1.23
log
@update to ssh-1.2.25
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.22 1998/06/02 18:09:46 marc Exp $
d37 1
a37 1

@


1.22
log
@update to ssh 1.2.23
@
text
@d2 1
a2 1
# Version required:     1.2.23
d6 1
a6 1
# $OpenBSD: Makefile,v 1.21 1998/05/24 01:22:11 marc Exp $
d12 1
a12 1
DISTNAME=       ssh-1.2.23
@


1.21
log
@back out bogus accidental change
@
text
@d2 1
a2 1
# Version required:     1.2.22
d6 1
a6 1
# $OpenBSD: Makefile,v 1.19 1998/04/16 16:19:52 marc Exp $
d12 1
a12 1
DISTNAME=       ssh-1.2.22
@


1.20
log
@Update index; fix math Makefile
@
text
@d12 1
a12 1
DISTNAME=       ssh-1.2.23
@


1.19
log
@remove bogus comment
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.18 1998/04/12 21:41:03 marc Exp $
d12 1
a12 1
DISTNAME=       ssh-1.2.22
@


1.18
log
@update NO_CDROM reasons in Makefiles
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.17 1998/04/05 07:29:05 marc Exp $
a22 2

# You can set USA_RESIDENT appropriately in /etc/make.conf if this bugs you..
@


1.17
log
@Save sample config files in a place where they can be referenced if needed
when installing from a package.  Sample files will NOT replace any existing
configuration files.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.16 1998/04/03 02:33:02 marc Exp $
d14 2
@


1.16
log
@clean up USA_RESIDENT message
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.15 1998/04/03 01:24:49 marc Exp $
d104 3
d108 6
@


1.15
log
@Add patch for rsaref2 so it doesn't think that sizeof( long )
is 4 bytes on all architectures.  ssh w/rasref will now work on the alpha.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.14 1998/02/23 19:50:15 don Exp $
d73 1
a73 1
	@@cp ${FILESDIR}/patch-rsaref2 ${PATCHDIR}
d80 1
a80 1
	@@rm ${PATCHDIR}/patch-rsaref2
d87 9
a95 6
	@@${ECHO} resident or NO otherwise.
	@@${ECHO} If you are a USA resident you have to get the RSAREF2
	@@${ECHO} library \(RSA Inc. holds a patent on RSA and public key
	@@${ECHO} cypto in general - using RSA implementations other than
	@@${ECHO} RSAREF will violate the US patent law\)
	@@${ECHO} and extract it to ${WRKSRC}.
@


1.14
log
@include tcp wrappers automatically; misc cleanup
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.13 1998/02/05 19:56:30 marc Exp $
d72 3
d77 5
@


1.13
log
@remove test garbage that caused 2nd host to be used
@
text
@d2 1
a2 1
# Version required:     1.2.21
d6 1
a6 1
# $OpenBSD: Makefile,v 1.12 1998/02/05 18:17:08 marc Exp $
d77 9
a85 9
	@@echo
	@@echo You must set variable USA_RESIDENT to YES if you are a USA
	@@echo resident or NO otherwise.
	@@echo If you are a USA resident you have to get the RSAREF2
	@@echo library \(RSA Inc. holds a patent on RSA and public key
	@@echo cypto in general - using RSA implementations other than
	@@echo RSAREF will violate the US patent law\)
	@@echo and extract it to ${WRKSRC}.
	@@false
d90 1
a90 1
	@@mv ${WRKDIR}/rsaref2 ${WRKSRC}/rsaref2
d95 1
a95 1
		echo "Generating a secret host key..."; \
d99 2
a100 2
	rm -f ${PREFIX}/man/man1/slogin.1
	ln -sf ssh.1 ${PREFIX}/man/man1/slogin.1
d116 4
a119 3
.if defined(USE_TCPWRAP) && ${USE_TCPWRAP} == YES || \
    exists(${PREFIX}/lib/libwrap.a) && \
    (!defined(USE_TCPWRAP) || ${USE_TCPWRAP} != NO)
d123 2
@


1.12
log
@Fix typo in Makefile, patch from fc@@parkone.ci.oakland.ca.us
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.11 1998/01/23 05:11:32 todd Exp $
d15 1
a15 1
		ftp://noftp.funet.fi/pub/unix/security/login/ssh/ \
@


1.11
log
@update to ssh-1.2.22; Warner Losh <imp@@village.org>
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.10 1997/12/17 22:59:11 joey Exp $
d15 2
a16 2
		ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
		ftp://ftp.cs.hut.fi/pub/ssh \
@


1.10
log
@remove usa_resident info i placed in my makefile.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.9 1997/12/17 22:57:32 joey Exp $
d12 1
a12 1
DISTNAME=       ssh-1.2.21
@


1.9
log
@OpenBSD rresvport
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.8 1997/12/17 05:05:33 imp Exp $
a35 1
USA_RESIDENT=	YES
@


1.8
log
@Use socks5 support for socks
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.7 1997/12/13 00:06:01 angelos Exp $
d36 1
a36 1

@


1.7
log
@Pay attention.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.6 1997/12/12 23:58:14 angelos Exp $
d127 1
a127 1
CONFIGURE_ARGS+= --with-socks="-L${PREFIX}/lib -lsocks5"
@


1.6
log
@Update ftp sites/directories.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.5 1997/11/25 23:44:28 angelos Exp $
d14 3
a16 2
MASTER_SITES=   ftp://ftp.funet.fi/pub/unix/security/login/ssh/ \
		ftp://ftp.cs.hut.fi/pub/ssh
d30 1
a30 1
	ftp://idea.dsi.unimi.it/pub/security/crypt/math/ \
@


1.5
log
@Man page hacking.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 1997/11/23 03:48:50 todd Exp $
d14 2
a15 1
MASTER_SITES=   ftp://ftp.funet.fi/pub/unix/security/login/ssh/
d29 1
a29 4
	ftp://rzsun2.informatik.uni-hamburg.de/pub/virus/crypt/ripem/ \
	ftp://ftp.dsi.unimi.it/pub/security/crypt/math/ \
	ftp://ftp.univie.ac.at/security/crypt/cryptography/asymmetric/rsa/ \
	ftp://isdec.vc.cvut.cz/pub/security/unimi/crypt/applied-crypto/
@


1.4
log
@fix ETCDIR and install probs.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 1997/11/17 23:31:19 todd Exp $
d102 1
a102 1
	ln -sf ssh.1.gz ${PREFIX}/man/man1/slogin.1.gz
@


1.3
log
@correct description
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1997/11/17 21:47:40 joey Exp $
d18 2
d36 1
d40 1
a40 1
CONFIGURE_ARGS= --prefix=${PREFIX} --with-etcdir=${PREFIX}/etc/ssh
d96 1
a96 1
	@@if [ ! -f ${PREFIX}/etc/ssh_host_key ]; then \
d98 1
a98 1
		${PREFIX}/bin/ssh-keygen -f ${PREFIX}/etc/ssh_host_key -N ""; \
a103 6
	@@if [ ! -f ${PREFIX}/etc/rc.d/sshd.sh ]; then \
		echo "Installing ${PREFIX}/etc/rc.d/sshd.sh startup file."; \
		echo "#!/bin/sh" > ${PREFIX}/etc/rc.d/sshd.sh; \
		echo "[ -x /usr/local/sbin/sshd ] && /usr/local/sbin/sshd && echo -n ' sshd'" >> ${PREFIX}/etc/rc.d/sshd.sh; \
		chmod 751 ${PREFIX}/etc/rc.d/sshd.sh; \
	fi
d110 1
a110 1
    exists(${PREFIX}/bin/perl5.00401) && \
d112 1
a112 2
BUILD_DEPENDS+= perl5.00401:${PORTSDIR}/lang/perl5
CONFIGURE_ENV+= PERL=${PREFIX}/bin/perl5.00401
@


1.2
log
@added $OpenBSD$, changed ejovi to joey...removed freebsd contact from ssh
@
text
@d1 1
a1 1
# New ports collection makefile for:	ssh
d6 1
a6 1
# $OpenBSD: Makefile,v 1.1 1997/11/17 05:58:40 todd Exp $
@


1.1
log
@+ ssh (1.2.21)
@
text
@d6 1
a6 1
# $OpenBSD$
d16 1
a16 1
MAINTAINER=	torstenb@@FreeBSD.ORG
@
