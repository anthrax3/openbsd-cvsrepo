head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.14
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.12
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.10
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.6
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.8
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.10
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.8
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.6
	OPENBSD_5_0:1.1.1.1.0.4
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.2
	OPENBSD_4_9_BASE:1.1.1.1
	sebastia_20100920:1.1.1.1
	sebastia:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2014.03.26.17.38.27;	author gonzalo;	state Exp;
branches;
next	1.2;

1.2
date	2013.04.24.12.47.39;	author gonzalo;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.20.07.15.30;	author sebastia;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.09.20.07.15.30;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.3
log
@This is an update for jailkit to 2.17, is a minor bugfix release, allows
jk_chrootsh to be called -su, it improves argument handling and error messages, and
makes jk_cp honor the -j option again.

Also remove maintainer.

Tested on powerpc@@ and amd64@@

OK sebastia@@ (EX-Maintainer ;)
@
text
@$OpenBSD: patch-ini_jk_init_ini,v 1.2 2013/04/24 12:47:39 gonzalo Exp $

fix some default paths in the jail creation configuration file

--- ini/jk_init.ini.orig	Mon Dec 23 06:02:42 2013
+++ ini/jk_init.ini	Wed Dec 25 16:04:26 2013
@@@@ -2,18 +2,18 @@@@
 # this section probably needs adjustment on 64bit systems
 # or non-Linux systems
 comment = common files for all jails that need user/group information
-paths = /lib/libnsl.so.1, /lib64/libnsl.so.1, /lib/libnss*.so.2, /lib64/libnss*.so.2, /lib/i386-linux-gnu/libnsl.so.1, /lib/i386-linux-gnu/libnss*.so.2, /lib/x86_64-linux-gnu/libnsl.so.1, /lib/x86_64-linux-gnu/libnss*.so.2, /etc/nsswitch.conf, /etc/ld.so.conf
+paths = /lib/libnsl.so.1, /lib64/libnsl.so.1, /lib/libnss*.so.2, /lib64/libnss*.so.2, /lib/i386-linux-gnu/libnsl.so.1, /lib/i386-linux-gnu/libnss*.so.2, /lib/x86_64-linux-gnu/libnsl.so.1, /lib/x86_64-linux-gnu/libnss*.so.2, ${SYSCONFDIR}/nsswitch.conf, ${SYSCONFDIR}/ld.so.conf
 # Solaris needs 
-# paths = /etc/default/nss, /lib/libnsl.so.1, /usr/lib/nss_*.so.1, /etc/nsswitch.conf
+# paths = ${SYSCONFDIR}/default/nss, /lib/libnsl.so.1, /usr/lib/nss_*.so.1, ${SYSCONFDIR}/nsswitch.conf
 
 [netbasics]
 comment = common files for all jails that need any internet connectivity
-paths = /lib/libnss_dns.so.2, /lib64/libnss_dns.so.2, /etc/resolv.conf, /etc/host.conf, /etc/hosts, /etc/protocols, /etc/services
+paths = /lib/libnss_dns.so.2, /lib64/libnss_dns.so.2, ${SYSCONFDIR}/resolv.conf, ${SYSCONFDIR}/host.conf, ${SYSCONFDIR}/hosts, ${SYSCONFDIR}/protocols, ${SYSCONFDIR}/services
 # on Solaris devices /dev/udp and /dev/tcp might be needed too, not sure
 
 [logbasics]
 comment = timezone information and log sockets
-paths = /etc/localtime
+paths = ${SYSCONFDIR}/localtime
 need_logsocket = 1
 # Solaris does not need logsocket
 # but needs 
@@@@ -21,7 +21,7 @@@@ need_logsocket = 1
 
 [jk_lsh]
 comment = Jailkit limited shell
-paths = /usr/sbin/jk_lsh, /etc/jailkit/jk_lsh.ini
+paths = ${TRUEPREFIX}/sbin/jk_lsh, ${SYSCONFDIR}/jailkit/jk_lsh.ini
 users = root
 groups = root
 includesections = uidbasics, logbasics
@@@@ -71,14 +71,14 @@@@ devices = /dev/null
 
 [basicshell]
 comment = bash based shell with several basic utilities
-paths = /bin/sh, bash, ls, cat, chmod, mkdir, cp, cpio, date, dd, echo, egrep, false, fgrep, grep, gunzip, gzip, ln, ls, mkdir, mktemp, more, mv, pwd, rm, rmdir, sed, sh, sleep, sync, tar, touch, true, uncompress, zcat, /etc/motd, /etc/issue, /etc/bash.bashrc, /etc/bashrc, /etc/profile, /usr/lib/locale/en_US.utf8
+paths = /bin/sh, bash, ls, cat, chmod, mkdir, cp, cpio, date, dd, echo, egrep, false, fgrep, grep, gunzip, gzip, ln, ls, mkdir, mktemp, more, mv, pwd, rm, rmdir, sed, sh, sleep, sync, tar, touch, true, uncompress, zcat, ${SYSCONFDIR}/motd, ${SYSCONFDIR}/issue, ${SYSCONFDIR}/bash.bashrc, ${SYSCONFDIR}/bashrc, ${SYSCONFDIR}/profile, /usr/lib/locale/en_US.utf8
 users = root
 groups = root
 includesections = uidbasics
 
 [midnightcommander]
 comment = Midnight Commander
-paths = mc, mcedit, mcview, /usr/share/mc
+paths = mc, mcedit, mcview, ${LOCALBASE}/share/mc
 includesections = basicshell, terminfo
 
 [extendedshell]
@@@@ -88,12 +88,12 @@@@ includesections = basicshell, midnightcommander, edito
 
 [terminfo]
 comment = terminfo databases, required for example for ncurses or vim 
-paths = /etc/terminfo, /usr/share/terminfo, /lib/terminfo
+paths = ${SYSCONFDIR}/terminfo, /usr/share/terminfo, /lib/terminfo
 
 [editors]
 comment = vim, joe and nano
 includesections = terminfo
-paths = joe, nano, vi, vim, /etc/vimrc, /etc/joe, /usr/share/vim
+paths = joe, nano, vi, vim, ${SYSCONFDIR}/vimrc, ${SYSCONFDIR}/joe, /usr/share/vim
 
 [netutils]
 comment = several internet utilities like wget, ftp, rsync, scp, ssh
@@@@ -110,7 +110,7 @@@@ includesections = extendedshell, netutils, apacheutils
 
 [openvpn]
 comment = jail for the openvpn daemon
-paths = /usr/sbin/openvpn
+paths = ${LOCALBASE}/sbin/openvpn
 users = root,nobody
 groups = root,nogroup
 includesections = netbasics
@@@@ -120,7 +120,7 @@@@ need_logsocket = 1
 
 [apache]
 comment = the apache webserver, very basic setup, probably too limited for you
-paths = /usr/sbin/apache
+paths = ${TRUEPREFIX}/apache
 users = root, www-data
 groups = root, www-data
 includesections = netbasics, uidbasics
@@@@ -131,16 +131,16 @@@@ paths = perl, /usr/lib/perl, /usr/lib/perl5, /usr/shar
 
 [xauth]
 comment = getting X authentication to work
-paths = /usr/bin/X11/xauth, /usr/X11R6/lib/X11/rgb.txt, /etc/ld.so.conf
+paths = ${X11BASE}/bin/xauth, ${X11BASE}/lib/X11/rgb.txt
 
 [xclients]
 comment = minimal files for X clients
-paths = /usr/X11R6/lib/X11/rgb.txt
+paths = ${X11BASE}/lib/X11/rgb.txt
 includesections = xauth
 
 [vncserver]
 comment = the VNC server program
-paths = Xvnc, Xrealvnc, /usr/X11R6/lib/X11/fonts/
+paths = Xvnc, Xrealvnc, ${X11BASE}/lib/X11/fonts/
 includesections = xclients
 
 [ping]
@@@@ -149,5 +149,5 @@@@ paths_w_setuid = /bin/ping
 
 #[xterm]
 #comment = xterm
-#paths = /usr/bin/X11/xterm, /usr/share/terminfo, /etc/terminfo
+#paths = ${X11BASE}/bin/xterm, /usr/share/terminfo, ${SYSCONFDIR}/terminfo
 #devices = /dev/pts/0, /dev/pts/1, /dev/pts/2, /dev/pts/3, /dev/pts/4, /dev/ptyb4, /dev/ptya4, /dev/tty, /dev/tty0, /dev/tty4
@


1.2
log
@Update for Jailkit to 2.16, bugfix release.

Ok sebastia@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-ini_jk_init_ini,v 1.1.1.1 2010/09/20 07:15:30 sebastia Exp $
d5 25
a29 2
--- ini/jk_init.ini.orig	Fri Aug 10 14:16:47 2012
+++ ini/jk_init.ini	Tue Apr 23 06:35:22 2013
d39 1
a39 1
@@@@ -37,7 +37,7 @@@@ devices = /dev/null
d41 7
a47 8
 [git]
 comment = Fast Version Control System
-paths = /usr/bin/git*, /usr/share/git-core
+paths = ${LOCALBASE}/bin/git*, ${LOCALBASE}/share/git-core
 includesections = editors
 
 [scp]
@@@@ -78,7 +78,7 @@@@ includesections = uidbasics
d56 15
d80 10
a89 1
@@@@ -131,7 +131,7 @@@@ paths = perl, /usr/lib/perl, /usr/lib/perl5, /usr/shar
d98 11
d114 1
a114 1
+#paths = ${X11BASE}/bin/xterm, /usr/share/terminfo, /etc/terminfo
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- ini/jk_init.ini.orig	Sat Sep 11 15:58:41 2010
+++ ini/jk_init.ini	Sat Sep 18 11:40:01 2010
d52 1
a52 1
@@@@ -145,5 +145,5 @@@@ includesections = xclients
@


1.1.1.1
log
@Import jailkit-2.12: utilities for jailing a user or process

Jailkit is a set of utilities to limit user accounts to specific
files using chroot() and or specific commands. Setting up a chroot
shell, a shell limited to some specific command, or a daemon inside
a chroot jail is a lot easier and can be automated using these utilities.

After merging in what ajacoutot@@ already had, and some final feedback from 
him, OK ajacoutot@@


@
text
@@
