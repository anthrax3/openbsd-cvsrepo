head	1.3;
access;
symbols
	OPENBSD_6_1:1.3.0.16
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.14
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.10
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.12
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.8
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.6
	OPENBSD_5_0:1.1.1.1.0.4
	OPENBSD_5_0_BASE:1.1.1.1
	OPENBSD_4_9:1.1.1.1.0.2
	OPENBSD_4_9_BASE:1.1.1.1
	sebastia_20100920:1.1.1.1
	sebastia:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2013.04.24.12.47.39;	author gonzalo;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.15.13.50.58;	author gonzalo;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.20.07.15.30;	author sebastia;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.09.20.07.15.30;	author sebastia;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update for Jailkit to 2.16, bugfix release.

Ok sebastia@@ (maintainer)
@
text
@$OpenBSD: patch-py_jk_lib_py,v 1.2 2012/06/15 13:50:58 gonzalo Exp $

Fix running jk_init trying to create a jail the first time

--- py/jk_lib.py.orig	Thu Aug  2 14:55:28 2012
+++ py/jk_lib.py	Tue Apr 23 06:35:23 2013
@@@@ -461,7 +461,10 @@@@ def create_parent_path(chroot,path,be_verbose=0, copy_
 		if (stat.S_ISDIR(sb.st_mode)):
 			if (be_verbose):
 				print 'Create directory '+jailpath
-			os.mkdir(jailpath, 0755)
+			try:
+				os.mkdir(jailpath, 0755)
+			except OSError, (errno,strerror):
+				sys.stderr.write('NOTE: Jail directory already existed:\n')
 			if (copy_permissions):
 				try:
 					copy_time_and_permissions(origpath, jailpath, be_verbose, allow_suid, copy_ownership)
@


1.2
log
@Update for Jailkit to 2.15, patch-configure is not needed anymore
(applied upstream), while here, USE_GROFF is not needed and zap some
white space.

Ok sebastia@@ (maintainer), aja@@
@
text
@d1 1
a1 1
$OpenBSD: patch-py_jk_lib_py,v 1.1.1.1 2010/09/20 07:15:30 sebastia Exp $
d5 3
a7 3
--- py/jk_lib.py.orig	Thu Jun  7 18:19:27 2012
+++ py/jk_lib.py	Thu Jun 14 11:51:39 2012
@@@@ -459,7 +459,10 @@@@ def create_parent_path(chroot,path,be_verbose=0, copy_
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- py/jk_lib.py.orig	Wed Aug 11 10:45:24 2010
+++ py/jk_lib.py	Wed Aug 11 10:47:07 2010
@@@@ -442,7 +442,10 @@@@ def create_parent_path(chroot,path,be_verbose=0, copy_
@


1.1.1.1
log
@Import jailkit-2.12: utilities for jailing a user or process

Jailkit is a set of utilities to limit user accounts to specific
files using chroot() and or specific commands. Setting up a chroot
shell, a shell limited to some specific command, or a daemon inside
a chroot jail is a lot easier and can be automated using these utilities.

After merging in what ajacoutot@@ already had, and some final feedback from 
him, OK ajacoutot@@


@
text
@@
