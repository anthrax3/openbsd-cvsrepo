head	1.2;
access;
symbols
	OPENBSD_4_3:1.1.0.14
	OPENBSD_4_3_BASE:1.1
	OPENBSD_4_2:1.1.0.12
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.10
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.8
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.6
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.4
	OPENBSD_3_7:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2008.04.26.16.37.33;	author bluhm;	state dead;
branches;
next	1.1;

1.1
date	2006.01.21.18.02.56;	author sturm;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2006.01.21.18.05.31;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2006.01.21.18.12.16;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to p5-Net-SSLeay 1.32, ok sturm@@
@
text
@$OpenBSD: patch-SSLeay_pm,v 1.1 2006/01/21 18:02:56 sturm Exp $
--- SSLeay.pm.orig	Sat Jan 21 18:58:09 2006
+++ SSLeay.pm	Sat Jan 21 18:58:31 2006
@@@@ -1853,8 +1853,8 @@@@ sub randomize (;$$) {
     my ($rn_seed_file, $seed, $egd_path) = @@_;
     my $rnsf = defined($rn_seed_file) && -r $rn_seed_file;
 
+    $egd_path = '';
     $egd_path = $ENV{'EGD_PATH'} if $ENV{'EGD_PATH'};
-    $egd_path = '/tmp/entropy'   unless $egd_path;
     
     RAND_seed(rand() + $$);  # Stir it with time and pid
     
@@@@ -1865,7 +1865,7 @@@@ sub randomize (;$$) {
     RAND_load_file($rn_seed_file, -s _) if $rnsf;
     RAND_seed($seed) if $seed;
     RAND_seed($ENV{RND_SEED}) if $ENV{RND_SEED};
-    RAND_egd($egd_path) if -S $egd_path;
+    RAND_egd($egd_path) if -e $egd_path && -S _;
     RAND_load_file($Net::SSLeay::random_device, $Net::SSLeay::how_random/8)
 	if -r $Net::SSLeay::random_device;
 }
@


1.1
log
@don't fall back to an insecure entropy source

from ubuntu via Alexander Bluhm <bluhm at genua.de>
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.4.1
log
@MFC:
don't fall back to an insecure entropy source

from ubuntu via Alexander Bluhm <bluhm at genua.de>
@
text
@d2 2
a3 2
--- SSLeay.pm.orig	Sat Jan 21 19:05:39 2006
+++ SSLeay.pm	Sat Jan 21 19:06:04 2006
@


1.1.2.1
log
@MFC:
don't fall back to an insecure entropy source

from ubuntu via Alexander Bluhm <bluhm at genua.de>
@
text
@d2 2
a3 2
--- SSLeay.pm.orig	Sat Jan 21 18:47:57 2006
+++ SSLeay.pm	Sat Jan 21 18:48:31 2006
@

