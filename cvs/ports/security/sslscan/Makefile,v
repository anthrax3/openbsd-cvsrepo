head	1.13;
access;
symbols
	OPENBSD_6_1:1.13.0.2
	OPENBSD_6_1_BASE:1.13
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.10.0.2
	OPENBSD_5_9_BASE:1.10
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.8
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.6
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.4
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.3.0.4
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.4
	OPENBSD_5_0:1.1.1.1.0.2
	OPENBSD_5_0_BASE:1.1.1.1
	ajacoutot_20110621:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2017.01.27.11.01.14;	author sthen;	state Exp;
branches;
next	1.12;
commitid	v9D7QBjbUNy1EVl0;

1.12
date	2016.06.01.22.37.58;	author sthen;	state Exp;
branches;
next	1.11;
commitid	ODYeSNipFrypVuNZ;

1.11
date	2016.03.03.14.41.46;	author sthen;	state Exp;
branches;
next	1.10;
commitid	t6IDAyXVTab614jJ;

1.10
date	2016.01.08.02.08.10;	author sthen;	state Exp;
branches;
next	1.9;
commitid	3zPlc7XgcK32wCWz;

1.9
date	2015.10.21.13.23.54;	author sthen;	state Exp;
branches;
next	1.8;
commitid	YEBTLevzjk6A32MI;

1.8
date	2015.09.16.21.24.46;	author sthen;	state Exp;
branches;
next	1.7;
commitid	DB8SWRxnkmX9LW6s;

1.7
date	2015.09.10.14.08.44;	author sthen;	state Exp;
branches;
next	1.6;
commitid	fuswVHinHUNB1Ndn;

1.6
date	2015.09.10.13.55.51;	author sthen;	state Exp;
branches;
next	1.5;
commitid	eq9p9g9fwkk13uvK;

1.5
date	2015.07.19.00.07.15;	author sthen;	state Exp;
branches;
next	1.4;
commitid	ffzeEZ3FNwznPipz;

1.4
date	2013.03.11.11.41.28;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2012.07.16.08.49.31;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.26.10.12.21;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2011.06.21.21.05.48;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.06.21.21.05.48;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.13
log
@update to sslscan-1.11.8, convert to GH_* variables, use the SSL_get_state()
accessor rather than digging in the struct directly which no longer works in
libressl (state was moved to internal).
@
text
@# $OpenBSD: Makefile,v 1.12 2016/06/01 22:37:58 sthen Exp $

COMMENT=	SSL port scanner

V=		1.11.8
GH_ACCOUNT=	rbsec
GH_PROJECT=	sslscan
GH_TAGNAME=	$V-rbsec
DISTNAME=	sslscan-$V

CATEGORIES=	security net

HOMEPAGE=	https://github.com/rbsec/sslscan

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

FLAVORS=	openssl
FLAVOR?=

WANTLIB += c

USE_GMAKE=	Yes
NO_TEST=	Yes

MAKE_FLAGS=	BINDIR=${TRUEPREFIX}/bin \
		MANDIR=${TRUEPREFIX}/man \
		GIT_VERSION="$V" \
		CC="${CC}"

SUBST_VARS=	SUFFIX

.if ${FLAVOR:Mopenssl}
BUILD_DEPENDS=	security/openssl:patch
SUFFIX=		-openssl
FULLPKGNAME=	sslscan-openssl-$V
STATIC_BUILD=	TRUE
ALL_TARGET=	openssl/libcrypto.a sslscan
MAKE_FLAGS+=	STATIC_BUILD=TRUE
CFLAGS+=	-nostdinc -I${WRKSRC}/openssl/include -I/usr/include

post-extract:
	ln -s ${WRKDIR}/security/openssl/openssl-* ${WRKSRC}/openssl
	rm -f ${WRKSRC}/openssl/Makefile
.else
WANTLIB +=	crypto ssl
.endif

post-install:
	mv ${PREFIX}/bin/sslscan ${PREFIX}/bin/sslscan${SUFFIX}
	mv ${PREFIX}/man/man1/sslscan.1 ${PREFIX}/man/man1/sslscan${SUFFIX}.1

.include <bsd.port.mk>
@


1.12
log
@fix "make extract NO_DEPENDS=Yes"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2016/03/03 14:41:46 sthen Exp $
d5 4
a8 1
V=		1.11.2
a9 2
DISTFILES=	${DISTNAME}{$V-rbsec}.tar.gz
WRKDIST=	${WRKDIR}/${DISTNAME}-rbsec
a24 1
MASTER_SITES=	https://github.com/rbsec/sslscan/archive/
d31 1
a31 1
		CC="${CC}" SUFFIX="${SUFFIX}"
d50 4
@


1.11
log
@update to sslscan-1.11.2, now built against static-linked openssl lib
with SSLv2 enabled to allow identification of misconfigured servers
again (as was the case before the last openssl update).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/01/08 02:08:10 sthen Exp $
d46 1
a46 1
	rm ${WRKSRC}/openssl/Makefile
@


1.10
log
@update to sslscan-1.11.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2015/10/21 13:23:54 sthen Exp $
d5 1
a5 1
V=		1.11.1
d28 2
a29 2
MAKE_FLAGS=	BINPATH=${WRKINST}${PREFIX}/bin/ \
		MANPATH=${WRKINST}${PREFIX}/man/ \
d36 1
d39 8
a46 4
MAKE_FLAGS+=	CFLAGS="${CFLAGS} -I${LOCALBASE}/include/eopenssl" \
		LDFLAGS="-L${LOCALBASE}/lib/eopenssl -Wl,-rpath,${LOCALBASE}/lib/eopenssl"
LIB_DEPENDS=	security/openssl
WANTLIB +=	lib/eopenssl/crypto lib/eopenssl/ssl
@


1.9
log
@update to sslscan-1.11.0-rbsec, take MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2015/09/16 21:24:46 sthen Exp $
d5 1
a5 1
V=		1.11.0
@


1.8
log
@allow libressl and openssl versions of sslscan to coexist in installation;
now you can use one to check for chacha20-poly1305 and the other to check
for SSLv2/v3 support without messing around with pkg_delete/pkg_add between
tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2015/09/10 14:08:44 sthen Exp $
d5 1
a5 2
V=		1.10.6
REVISION=	0
d13 2
@


1.7
log
@Add a flavour providing a choice of which SSL library to build sslscan against.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/09/10 13:55:51 sthen Exp $
d6 1
a22 7
.if ${FLAVOR:Mopenssl}
LIB_DEPENDS=	security/openssl
WANTLIB +=	lib/eopenssl/crypto lib/eopenssl/ssl
.else
WANTLIB +=	crypto ssl
.endif

d25 1
d30 3
a32 1
		CC="${CC}"
d35 2
d39 4
a43 2

NO_TEST=	Yes
@


1.6
log
@switch to rbsec's version of sslscan. adds TLSv1.1/1.2 support, displays
cert information (alg/strength/issuer/times), heartbleed/compression/secure
reneg checks, etc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/07/19 00:07:15 sthen Exp $
d17 11
a27 1
WANTLIB += c lib/eopenssl/crypto lib/eopenssl/ssl
a31 2
LIB_DEPENDS=	security/openssl

d35 4
a38 2
		CC="${CC}" \
		CFLAGS="${CFLAGS} -I${LOCALBASE}/include/eopenssl" \
d40 1
@


1.5
log
@use openssl from ports, allows scanning for things which have been removed from
libressl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:41:28 espie Exp $
d5 4
a8 3
DISTNAME=	sslscan-1.8.2
REVISION=	2
EXTRACT_SUFX=	.tgz
d12 1
a12 1
HOMEPAGE=	http://sourceforge.net/projects/sslscan/
d19 2
a20 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=sslscan/}
d24 4
a27 1
MAKE_FLAGS=	CC="${CC}" \
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/07/16 08:49:31 jasper Exp $
d6 1
a6 1
REVISION=	1
d16 1
a16 1
WANTLIB += c crypto ssl
d20 6
a25 1
MAKE_FLAGS=	CC="${CC}"
@


1.3
log
@do not show --ssl2 commandline option if built with an OpenSSL without SSLv2 support.

from brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/06/26 10:12:21 jasper Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d21 1
a21 1
NO_REGRESS=	Yes
@


1.2
log
@let this work if sslv2 is disabled, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/06/21 21:05:48 ajacoutot Exp $
d6 1
a6 1
REVISION=	0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@Import sslscan-1.8.2.

SSLScan queries SSL services, such as HTTPS, in order to determine the
ciphers that are supported. SSLScan is designed to be easy, lean and
fast. The output includes prefered ciphers of the SSL service, the
certificate and is in Text and XML formats.

Heavily based on the FreeBSD port.

inputs from sthen@@
ok jasper@@
@
text
@@
