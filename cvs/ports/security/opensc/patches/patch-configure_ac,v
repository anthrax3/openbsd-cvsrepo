head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.0.6
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.06.28.12.56.34;	author dcoppa;	state Exp;
branches;
next	1.5;
commitid	PAB8JqMmxNZjN5Tf;

1.5
date	2016.06.07.14.08.44;	author dcoppa;	state Exp;
branches;
next	1.4;
commitid	l7AcnKz9UPVHsET0;

1.4
date	2015.06.15.09.36.42;	author dcoppa;	state Exp;
branches;
next	1.3;
commitid	Btb2eEYTGka5Ro15;

1.3
date	2015.04.24.12.53.24;	author dcoppa;	state Exp;
branches;
next	1.2;
commitid	cD3MUggrfcEyTRe3;

1.2
date	2014.08.13.06.18.47;	author dcoppa;	state Exp;
branches;
next	1.1;
commitid	wLtXJ1GO1ThIVpGo;

1.1
date	2013.06.07.13.27.58;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.6
log
@
Fix version string
@
text
@$OpenBSD: patch-configure_ac,v 1.5 2016/06/07 14:08:44 dcoppa Exp $

Fix version string

libdl is not required on OpenBSD

--- configure.ac.orig	Fri Jun  3 11:19:51 2016
+++ configure.ac	Tue Jun 28 14:02:05 2016
@@@@ -306,30 +306,9 @@@@ elif test "${xslstylesheetsdir}" != "no"; then
 fi
 AC_MSG_RESULT([${xslstylesheetsdir}])
 
-AC_MSG_CHECKING([git checkout])
-GIT_CHECKOUT="no"
-if test -n "${GIT}" -a -d "${srcdir}/.git"; then
-	AC_DEFINE([HAVE_CONFIG_VERSION_H], [1], [extra version available in config-version.h])
-	GIT_CHECKOUT="yes"
-fi
-AC_MSG_RESULT([${GIT_CHECKOUT}])
+OPENSC_SCM_REVISION="OpenSC-0.16.0, rev: 7eeba1f, commit-time: 2016-06-03 09:19:51 +0000"
+OPENSC_VERSION_REVISION="0"
 
-if test "${GIT_CHECKOUT}" = "yes"; then
-	REVISION_DESCRIPTION="$(${GIT} describe || echo '<version not available>' )"
-	if test "${REVISION_DESCRIPTION}" = "<version not available>"; then
-		REVISION_DESCRIPTION="$(${GIT} describe --tags || echo '<version not available>')"
-	fi
-
-	HASH_COMMIT_DATE="$(${GIT} log -1 --pretty=format:'rev: %h, commit-time: %ci')"
-	GIT_TAG_COMMIT="$(${GIT} rev-list --tags --no-walk --max-count=1)"
-
-	OPENSC_SCM_REVISION="OpenSC-${REVISION_DESCRIPTION}, ${HASH_COMMIT_DATE}"
-	OPENSC_VERSION_REVISION="$(${GIT} rev-list ${GIT_TAG_COMMIT}..HEAD --count || echo 0)"
-else
-	OPENSC_SCM_REVISION="No Git revision info available"
-	OPENSC_VERSION_REVISION="0"
-fi
-
 dnl C Compiler features
 AC_C_INLINE
 
@@@@ -380,11 +359,6 @@@@ AC_CHECK_LIB(
 )
 
 if test "${WIN32}" = "no"; then
-	dnl dl support
-	AC_SEARCH_LIBS([dlopen], [dl dld], [], [
-		AC_MSG_ERROR([unable to find the dlopen() function])
-	])
-
 	dnl Special check for pthread support.
 	AX_PTHREAD(
 		[AC_DEFINE(
@@@@ -769,7 +743,6 @@@@ AM_CONDITIONAL([CYGWIN], [test "${CYGWIN}" = "yes"])
 AM_CONDITIONAL([ENABLE_MINIDRIVER], [test "${enable_minidriver}" = "yes"])
 AM_CONDITIONAL([ENABLE_SM], [test "${enable_sm}" = "yes"])
 AM_CONDITIONAL([ENABLE_DNIE_UI], [test "${enable_dnie_ui}" = "yes"])
-AM_CONDITIONAL([GIT_CHECKOUT], [test "${GIT_CHECKOUT}" = "yes"])
 
 if test "${enable_pedantic}" = "yes"; then
 	enable_strict="yes";
@


1.5
log
@
Update to OpenSC-0.16.0
@
text
@d1 3
a3 1
$OpenBSD: patch-configure_ac,v 1.4 2015/06/15 09:36:42 dcoppa Exp $
d8 35
a42 2
+++ configure.ac	Tue Jun  7 14:48:33 2016
@@@@ -380,11 +380,6 @@@@ AC_CHECK_LIB(
d54 8
@


1.4
log
@
Upstream rerolled their tarball; bump.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.3 2015/04/24 12:53:24 dcoppa Exp $
d5 3
a7 3
--- configure.ac.orig	Sat May 16 22:30:24 2015
+++ configure.ac	Mon Jun 15 11:18:27 2015
@@@@ -340,11 +340,6 @@@@ AC_CHECK_LIB(
@


1.3
log
@
Update to opensc-0.15.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.2 2014/08/13 06:18:47 dcoppa Exp $
d5 3
a7 3
--- configure.ac.orig	Wed Apr  8 18:11:06 2015
+++ configure.ac	Fri Apr 24 13:21:34 2015
@@@@ -338,11 +338,6 @@@@ AC_CHECK_LIB(
@


1.2
log
@
Update to opensc-0.14.0
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.1 2013/06/07 13:27:58 dcoppa Exp $
d5 3
a7 3
--- configure.ac.orig	Wed Aug 13 07:35:15 2014
+++ configure.ac	Wed Aug 13 07:36:15 2014
@@@@ -331,11 +331,6 @@@@ AC_CHECK_LIB(
@


1.1
log
@Update to opensc-0.13.0.
Take maintainership.

OK sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- configure.ac.orig	Tue Dec  4 15:43:40 2012
+++ configure.ac	Thu Jun  6 10:20:51 2013
@@@@ -285,14 +285,6 @@@@ AC_CHECK_LIB(
d12 3
a14 6
-	AC_CHECK_LIB(
-		[dl],
-		[dlopen],
-		,
-		[AC_MSG_ERROR([libdl required])]
-	)
@

