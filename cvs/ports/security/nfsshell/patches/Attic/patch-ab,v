head	1.2;
access;
symbols
	OPENBSD_4_2:1.1.1.1.0.34
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.32
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.30
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.28
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.26
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.24
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.22
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.20
	OPENBSD_3_5_BASE:1.1.1.1
	OPENBSD_3_4:1.1.1.1.0.18
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.16
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.14
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.12
	OPENBSD_3_1_BASE:1.1.1.1
	OPENBSD_3_0:1.1.1.1.0.10
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	OPENBSD_2_9:1.1.1.1.0.8
	OPENBSD_2_9_BASE:1.1.1.1
	OPENBSD_2_8:1.1.1.1.0.6
	OPENBSD_2_8_BASE:1.1.1.1
	OPENBSD_2_7:1.1.1.1.0.4
	OPENBSD_2_7_BASE:1.1.1.1
	OPENBSD_2_6:1.1.1.1.0.2
	OPENBSD_2_6_BASE:1.1.1.1
	dugsong_1999-Jun-10:1.1.1.1
	dugsong:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2007.10.26.21.38.24;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	99.06.10.16.04.35;	author dugsong;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.06.10.16.04.35;	author dugsong;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- use our naming scheme for patches
@
text
@--- nfs.c-orig	Thu Jun 10 03:42:59 1999
+++ nfs.c	Thu Jun 10 10:42:56 1999
@@@@ -40,7 +40,6 @@@@
 #include <stdlib.h>
 #include <time.h>
 #include <rpc/rpc.h>
-#include <rpc/key_prot.h>
 #include <rpc/pmap_clnt.h>
 #ifdef SYSV
 #include <rpc/clnt_soc.h>
@@@@ -50,7 +49,6 @@@@
 #include <netinet/in.h>
 #include <arpa/inet.h>
 #include <sys/time.h>
-#include <sys/sysmacros.h>
 #include "mount.h"
 #include "nfs_prot.h"
 #include <netinet/in_systm.h>
@@@@ -58,7 +56,6 @@@@
 
 #ifdef READLINE
 #include <readline/readline.h>
-#include <readline/history.h>
 #endif
 
 /*
@@@@ -169,7 +166,6 @@@@
 int authtype = AUTH_UNIX;	/* type of authentication */
 int uid = -2;			/* remote user id (initialy nobody) */
 int gid = -2;			/* remote group id (initialy nobody) */
-keybuf secretkey;		/* remote user's secret key */
 
 /* server information (also used as state information) */
 char *mountpath;		/* remote mount path */
@@@@ -384,7 +380,7 @@@@
 #ifdef READLINE
     if (interact) {
 	char *line;
-	if ((line = readline("nfs> ")) == NULL)
+	if ((line = readline("nfsshell> ")) == NULL)
 	    return 0;
 	strncpy(buf, line, bufsize);
 	add_history(line);
@@@@ -394,7 +390,7 @@@@
 	    return 0;
     }
 #else
-    if (interact) printf("nfs> ");
+    if (interact) printf("nfsshell> ");
     if (fgets(buf, bufsize, stdin) == NULL)
 	return 0;
 #endif
@@@@ -447,16 +443,13 @@@@
 do_setuid(int argc, char **argv)
 {
     if (argc > 3) {
-	fprintf(stderr, "Usage: uid [<uid> [<secret-key>]]\n");
+	fprintf(stderr, "Usage: uid [<uid>]\n");
 	return;
     }
 
     if (argc <= 2) {
 	authtype = AUTH_UNIX;
 	uid = argc == 1 ? -2 : atoi(argv[1]);
-    } else if (argc == 3) {
-	authtype = AUTH_DES;
-	memcpy(secretkey, argv[2], HEXKEYBYTES);
     }
 
     if (nfsclient) {
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@nfsshell port
@
text
@@
