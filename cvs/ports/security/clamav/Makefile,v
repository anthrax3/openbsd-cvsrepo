head	1.113;
access;
symbols
	OPENBSD_6_1:1.112.0.2
	OPENBSD_6_1_BASE:1.112
	OPENBSD_6_0:1.109.0.2
	OPENBSD_6_0_BASE:1.109
	OPENBSD_5_9:1.105.0.2
	OPENBSD_5_9_BASE:1.105
	OPENBSD_5_8:1.99.0.4
	OPENBSD_5_8_BASE:1.99
	OPENBSD_5_7:1.97.0.2
	OPENBSD_5_7_BASE:1.97
	OPENBSD_5_6:1.92.0.2
	OPENBSD_5_6_BASE:1.92
	OPENBSD_5_5:1.88.0.2
	OPENBSD_5_5_BASE:1.88
	OPENBSD_5_4:1.84.0.2
	OPENBSD_5_4_BASE:1.84
	OPENBSD_5_3:1.79.0.2
	OPENBSD_5_3_BASE:1.79
	OPENBSD_5_2:1.78.0.2
	OPENBSD_5_2_BASE:1.78
	OPENBSD_5_1_BASE:1.75
	OPENBSD_5_1:1.75.0.2
	OPENBSD_5_0:1.70.0.2
	OPENBSD_5_0_BASE:1.70
	OPENBSD_4_9:1.65.0.2
	OPENBSD_4_9_BASE:1.65
	OPENBSD_4_8:1.50.0.2
	OPENBSD_4_8_BASE:1.50
	OPENBSD_4_7:1.47.0.2
	OPENBSD_4_7_BASE:1.47
	OPENBSD_4_6:1.44.0.2
	OPENBSD_4_6_BASE:1.44
	OPENBSD_4_5:1.41.0.2
	OPENBSD_4_5_BASE:1.41
	OPENBSD_4_4:1.38.0.2
	OPENBSD_4_4_BASE:1.38
	OPENBSD_4_3:1.36.0.2
	OPENBSD_4_3_BASE:1.36
	OPENBSD_4_2:1.31.0.2
	OPENBSD_4_2_BASE:1.31
	OPENBSD_4_1:1.24.0.2
	OPENBSD_4_1_BASE:1.24
	OPENBSD_4_0:1.18.0.2
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.14.0.2
	OPENBSD_3_9_BASE:1.14
	OPENBSD_3_8:1.8.0.2
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	clamav_20050109:1.1.1.1
	mbalmer:1.1.1;
locks; strict;
comment	@# @;


1.113
date	2017.05.25.13.28.27;	author espie;	state Exp;
branches;
next	1.112;
commitid	FUHBBOzlBAiJWtDB;

1.112
date	2016.11.04.11.35.20;	author sthen;	state Exp;
branches;
next	1.111;
commitid	Gg5LRcnQlqj5M3F7;

1.111
date	2016.11.03.21.10.57;	author sthen;	state Exp;
branches;
next	1.110;
commitid	80swMdkwq3R38zQ8;

1.110
date	2016.11.01.12.01.10;	author ajacoutot;	state Exp;
branches;
next	1.109;
commitid	Wxkdfm8GgpECveQM;

1.109
date	2016.05.22.21.03.33;	author sthen;	state Exp;
branches;
next	1.108;
commitid	GFfqQe9MX3eO7rQ7;

1.108
date	2016.05.04.07.12.55;	author sthen;	state Exp;
branches;
next	1.107;
commitid	J53wFHooa7ESNWSp;

1.107
date	2016.03.11.19.59.16;	author naddy;	state Exp;
branches;
next	1.106;
commitid	pguKLBEFv33DrgKU;

1.106
date	2016.03.03.02.09.09;	author sthen;	state Exp;
branches;
next	1.105;
commitid	16NXswWD86phTvx1;

1.105
date	2016.02.20.15.23.43;	author tobiasu;	state Exp;
branches;
next	1.104;
commitid	7w0cYRD5XIiMo6f1;

1.104
date	2016.02.09.02.31.23;	author sthen;	state Exp;
branches;
next	1.103;
commitid	tWI3j5WrGcVJXaCy;

1.103
date	2016.01.25.20.20.53;	author jasper;	state Exp;
branches;
next	1.102;
commitid	evTuoraVnaYj6m0j;

1.102
date	2015.12.01.23.25.09;	author sthen;	state Exp;
branches;
next	1.101;
commitid	5o109GD5tokNSy5t;

1.101
date	2015.11.20.16.50.06;	author sthen;	state Exp;
branches;
next	1.100;
commitid	Wz1gA3tOObx8Ar0j;

1.100
date	2015.10.30.12.59.16;	author sthen;	state Exp;
branches;
next	1.99;
commitid	vVZOehVa6DiEPxJL;

1.99
date	2015.05.05.15.03.21;	author sthen;	state Exp;
branches;
next	1.98;
commitid	eVoNO0OXo44DCw8A;

1.98
date	2015.04.29.21.27.39;	author sthen;	state Exp;
branches;
next	1.97;
commitid	cecxTKFMd5sMpaaO;

1.97
date	2015.01.28.15.13.51;	author sthen;	state Exp;
branches
	1.97.2.1;
next	1.96;
commitid	Ryzq1VfuO3lekabX;

1.96
date	2014.11.19.11.40.53;	author sthen;	state Exp;
branches;
next	1.95;
commitid	Z8csLzq9a0p8nrmR;

1.95
date	2014.11.19.00.18.01;	author sthen;	state Exp;
branches;
next	1.94;
commitid	pdezdz7OMOBZNVdZ;

1.94
date	2014.09.17.09.13.13;	author ajacoutot;	state Exp;
branches;
next	1.93;
commitid	6B840kxHQJkj832j;

1.93
date	2014.09.17.07.52.42;	author jca;	state Exp;
branches;
next	1.92;
commitid	jO4L7hmRLOLvdXQI;

1.92
date	2014.06.26.15.36.11;	author sthen;	state Exp;
branches
	1.92.2.1;
next	1.91;
commitid	ELyL7ePmaEsSdnwx;

1.91
date	2014.06.17.09.12.45;	author sthen;	state Exp;
branches;
next	1.90;
commitid	p7yH1ZFYrKyquue3;

1.90
date	2014.05.12.17.26.01;	author sthen;	state Exp;
branches;
next	1.89;

1.89
date	2014.05.08.08.18.51;	author sthen;	state Exp;
branches;
next	1.88;

1.88
date	2014.01.15.13.06.47;	author jasper;	state Exp;
branches
	1.88.2.1;
next	1.87;

1.87
date	2013.10.22.08.56.34;	author sthen;	state Exp;
branches;
next	1.86;

1.86
date	2013.09.29.22.38.29;	author sthen;	state Exp;
branches;
next	1.85;

1.85
date	2013.09.20.15.22.58;	author sthen;	state Exp;
branches;
next	1.84;

1.84
date	2013.05.08.20.25.17;	author sthen;	state Exp;
branches
	1.84.2.1;
next	1.83;

1.83
date	2013.04.23.20.34.16;	author sthen;	state Exp;
branches;
next	1.82;

1.82
date	2013.03.21.08.48.53;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2013.03.15.15.10.06;	author sthen;	state Exp;
branches;
next	1.80;

1.80
date	2013.03.11.11.41.24;	author espie;	state Exp;
branches;
next	1.79;

1.79
date	2012.09.17.21.13.44;	author sthen;	state Exp;
branches
	1.79.2.1;
next	1.78;

1.78
date	2012.07.08.21.24.58;	author giovanni;	state Exp;
branches
	1.78.2.1;
next	1.77;

1.77
date	2012.06.16.10.34.54;	author sthen;	state Exp;
branches;
next	1.76;

1.76
date	2012.03.15.22.04.44;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2012.01.21.23.13.59;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2012.01.21.23.02.57;	author sthen;	state Exp;
branches;
next	1.73;

1.73
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.72;

1.72
date	2011.12.07.09.29.02;	author jasper;	state Exp;
branches;
next	1.71;

1.71
date	2011.10.18.18.48.39;	author sthen;	state Exp;
branches;
next	1.70;

1.70
date	2011.07.26.14.23.45;	author sthen;	state Exp;
branches
	1.70.2.1;
next	1.69;

1.69
date	2011.06.10.22.20.20;	author sthen;	state Exp;
branches;
next	1.68;

1.68
date	2011.06.02.17.09.32;	author kili;	state Exp;
branches;
next	1.67;

1.67
date	2011.05.11.08.24.40;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2011.03.02.14.36.49;	author sthen;	state Exp;
branches;
next	1.65;

1.65
date	2011.01.05.06.06.48;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2010.12.24.10.40.06;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2010.12.11.12.57.37;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2010.12.01.22.59.35;	author sthen;	state Exp;
branches;
next	1.60;

1.60
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.59;

1.59
date	2010.11.04.11.29.44;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2010.11.04.11.19.40;	author sthen;	state Exp;
branches;
next	1.57;

1.57
date	2010.11.04.11.18.12;	author sthen;	state Exp;
branches;
next	1.56;

1.56
date	2010.10.25.23.36.38;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2010.10.18.21.41.45;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2010.09.26.13.40.11;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2010.09.21.13.18.26;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2010.08.30.21.16.17;	author jasper;	state Exp;
branches;
next	1.51;

1.51
date	2010.08.19.09.17.41;	author sthen;	state Exp;
branches;
next	1.50;

1.50
date	2010.05.27.09.54.09;	author sthen;	state Exp;
branches
	1.50.2.1;
next	1.49;

1.49
date	2010.05.23.21.24.09;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2010.04.01.13.18.54;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2009.10.30.01.09.34;	author sthen;	state Exp;
branches
	1.47.2.1;
next	1.46;

1.46
date	2009.09.15.18.06.28;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2009.09.15.17.37.22;	author jasper;	state Exp;
branches;
next	1.44;

1.44
date	2009.06.11.10.50.49;	author sthen;	state Exp;
branches
	1.44.2.1;
next	1.43;

1.43
date	2009.04.12.09.28.45;	author sthen;	state Exp;
branches;
next	1.42;

1.42
date	2009.04.11.14.13.58;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2008.12.13.10.19.09;	author mbalmer;	state Exp;
branches;
next	1.40;

1.40
date	2008.11.07.22.33.06;	author sthen;	state Exp;
branches;
next	1.39;

1.39
date	2008.09.14.15.00.43;	author sthen;	state Exp;
branches;
next	1.38;

1.38
date	2008.07.08.22.38.12;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2008.04.16.19.46.01;	author mbalmer;	state Exp;
branches;
next	1.36;

1.36
date	2008.02.12.10.42.17;	author mbalmer;	state Exp;
branches;
next	1.35;

1.35
date	2008.01.02.18.10.50;	author bernd;	state Exp;
branches;
next	1.34;

1.34
date	2007.12.30.22.42.38;	author bernd;	state Exp;
branches;
next	1.33;

1.33
date	2007.09.17.21.13.13;	author ajacoutot;	state Exp;
branches;
next	1.32;

1.32
date	2007.08.25.10.08.28;	author mbalmer;	state Exp;
branches;
next	1.31;

1.31
date	2007.08.02.18.12.55;	author aanriot;	state Exp;
branches;
next	1.30;

1.30
date	2007.06.13.17.25.00;	author aanriot;	state Exp;
branches;
next	1.29;

1.29
date	2007.05.31.16.02.27;	author aanriot;	state Exp;
branches;
next	1.28;

1.28
date	2007.05.15.15.09.12;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2007.04.13.06.17.47;	author mbalmer;	state Exp;
branches;
next	1.26;

1.26
date	2007.04.11.17.54.10;	author mbalmer;	state Exp;
branches;
next	1.25;

1.25
date	2007.03.25.11.24.02;	author mbalmer;	state Exp;
branches;
next	1.24;

1.24
date	2007.02.28.20.31.08;	author mbalmer;	state Exp;
branches
	1.24.2.1;
next	1.23;

1.23
date	2007.01.17.08.27.20;	author mbalmer;	state Exp;
branches;
next	1.22;

1.22
date	2007.01.13.13.13.11;	author mbalmer;	state Exp;
branches;
next	1.21;

1.21
date	2006.12.17.15.19.30;	author mbalmer;	state Exp;
branches;
next	1.20;

1.20
date	2006.11.05.22.17.28;	author mbalmer;	state Exp;
branches;
next	1.19;

1.19
date	2006.10.16.07.03.42;	author mbalmer;	state Exp;
branches;
next	1.18;

1.18
date	2006.08.15.18.48.22;	author mbalmer;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2006.08.03.23.28.11;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2006.04.30.06.38.25;	author mbalmer;	state Exp;
branches;
next	1.15;

1.15
date	2006.04.06.06.20.16;	author mbalmer;	state Exp;
branches;
next	1.14;

1.14
date	2006.01.10.09.26.28;	author mbalmer;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2005.12.24.20.52.58;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2005.11.06.19.31.43;	author mbalmer;	state Exp;
branches;
next	1.11;

1.11
date	2005.11.01.16.22.40;	author mbalmer;	state Exp;
branches;
next	1.10;

1.10
date	2005.10.27.20.03.25;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2005.09.22.21.14.55;	author mbalmer;	state Exp;
branches;
next	1.8;

1.8
date	2005.08.31.19.55.36;	author sturm;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2005.07.27.22.15.23;	author mbalmer;	state Exp;
branches;
next	1.6;

1.6
date	2005.06.29.10.12.09;	author mbalmer;	state Exp;
branches;
next	1.5;

1.5
date	2005.05.17.05.18.27;	author mbalmer;	state Exp;
branches;
next	1.4;

1.4
date	2005.05.12.14.55.21;	author mbalmer;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.21.09.36.29;	author mbalmer;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2005.01.27.19.47.46;	author mbalmer;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.09.17.07.52;	author mbalmer;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.09.17.07.52;	author mbalmer;	state Exp;
branches;
next	;

1.3.2.1
date	2005.07.28.19.31.38;	author sturm;	state Exp;
branches;
next	1.3.2.2;

1.3.2.2
date	2005.08.31.19.51.41;	author sturm;	state Exp;
branches;
next	1.3.2.3;

1.3.2.3
date	2005.09.28.17.37.57;	author sturm;	state Exp;
branches;
next	1.3.2.4;

1.3.2.4
date	2005.10.27.20.06.08;	author sturm;	state Exp;
branches;
next	1.3.2.5;

1.3.2.5
date	2005.11.09.19.53.14;	author sturm;	state Exp;
branches;
next	1.3.2.6;

1.3.2.6
date	2006.01.11.07.23.25;	author sturm;	state Exp;
branches;
next	1.3.2.7;

1.3.2.7
date	2006.04.07.19.11.19;	author sturm;	state Exp;
branches;
next	1.3.2.8;

1.3.2.8
date	2006.05.01.20.36.10;	author sturm;	state Exp;
branches;
next	;

1.8.2.1
date	2005.11.01.11.22.10;	author sturm;	state Exp;
branches;
next	1.8.2.2;

1.8.2.2
date	2005.11.01.11.50.23;	author sturm;	state Exp;
branches;
next	1.8.2.3;

1.8.2.3
date	2005.11.09.19.53.35;	author sturm;	state Exp;
branches;
next	1.8.2.4;

1.8.2.4
date	2006.01.11.07.27.43;	author sturm;	state Exp;
branches;
next	1.8.2.5;

1.8.2.5
date	2006.04.07.19.11.43;	author sturm;	state Exp;
branches;
next	1.8.2.6;

1.8.2.6
date	2006.05.01.21.53.16;	author sturm;	state Exp;
branches;
next	1.8.2.7;

1.8.2.7
date	2006.08.20.10.11.17;	author sturm;	state Exp;
branches;
next	1.8.2.8;

1.8.2.8
date	2006.10.19.15.10.16;	author sturm;	state Exp;
branches;
next	;

1.14.2.1
date	2006.05.01.18.59.41;	author sturm;	state Exp;
branches;
next	1.14.2.2;

1.14.2.2
date	2006.08.20.10.11.40;	author sturm;	state Exp;
branches;
next	1.14.2.3;

1.14.2.3
date	2006.10.19.15.11.06;	author sturm;	state Exp;
branches;
next	1.14.2.4;

1.14.2.4
date	2006.12.13.22.44.12;	author sturm;	state Exp;
branches;
next	1.14.2.5;

1.14.2.5
date	2006.12.23.18.13.46;	author sturm;	state Exp;
branches;
next	1.14.2.6;

1.14.2.6
date	2007.03.16.21.31.19;	author sturm;	state Exp;
branches;
next	1.14.2.7;

1.14.2.7
date	2007.03.28.19.53.19;	author sturm;	state Exp;
branches;
next	1.14.2.8;

1.14.2.8
date	2007.04.13.13.25.25;	author sturm;	state Exp;
branches;
next	;

1.18.2.1
date	2006.11.01.13.17.28;	author sturm;	state Exp;
branches;
next	1.18.2.2;

1.18.2.2
date	2006.12.13.22.16.12;	author sturm;	state Exp;
branches;
next	1.18.2.3;

1.18.2.3
date	2006.12.24.06.27.19;	author sturm;	state Exp;
branches;
next	1.18.2.4;

1.18.2.4
date	2007.03.16.22.12.34;	author sturm;	state Exp;
branches;
next	1.18.2.5;

1.18.2.5
date	2007.04.02.14.02.00;	author sturm;	state Exp;
branches;
next	1.18.2.6;

1.18.2.6
date	2007.04.13.13.00.32;	author sturm;	state Exp;
branches;
next	1.18.2.7;

1.18.2.7
date	2007.06.06.06.00.38;	author sturm;	state Exp;
branches;
next	1.18.2.8;

1.18.2.8
date	2007.09.12.14.51.58;	author sturm;	state Exp;
branches;
next	;

1.24.2.1
date	2007.05.01.16.24.35;	author sturm;	state Exp;
branches;
next	1.24.2.2;

1.24.2.2
date	2007.06.06.06.00.05;	author sturm;	state Exp;
branches;
next	1.24.2.3;

1.24.2.3
date	2007.09.12.14.48.06;	author sturm;	state Exp;
branches;
next	;

1.44.2.1
date	2009.11.14.03.26.13;	author william;	state Exp;
branches;
next	;

1.47.2.1
date	2010.05.29.00.56.57;	author william;	state Exp;
branches;
next	;

1.50.2.1
date	2010.11.20.04.47.19;	author william;	state Exp;
branches;
next	;

1.70.2.1
date	2011.10.18.18.49.27;	author sthen;	state Exp;
branches;
next	;

1.78.2.1
date	2013.03.19.10.16.20;	author sthen;	state Exp;
branches;
next	;

1.79.2.1
date	2013.05.09.20.17.04;	author sthen;	state Exp;
branches;
next	;

1.84.2.1
date	2013.10.22.09.01.11;	author sthen;	state Exp;
branches;
next	1.84.2.2;

1.84.2.2
date	2014.01.17.21.09.11;	author jasper;	state Exp;
branches;
next	;

1.88.2.1
date	2014.05.08.08.44.42;	author sthen;	state Exp;
branches;
next	1.88.2.2;

1.88.2.2
date	2014.05.12.17.26.45;	author sthen;	state Exp;
branches;
next	1.88.2.3;

1.88.2.3
date	2014.06.17.09.13.50;	author sthen;	state Exp;
branches;
next	1.88.2.4;
commitid	cE4cmMu3TP6woNwS;

1.88.2.4
date	2014.06.26.15.38.46;	author sthen;	state Exp;
branches;
next	;
commitid	95FiAGyKXcZO5Lyk;

1.92.2.1
date	2014.11.19.00.20.46;	author sthen;	state Exp;
branches;
next	1.92.2.2;
commitid	DGem5UFIRRq0gSwq;

1.92.2.2
date	2014.11.19.00.36.40;	author sthen;	state Exp;
branches;
next	1.92.2.3;
commitid	wcxEwgEBQh5DGoif;

1.92.2.3
date	2014.11.19.11.40.34;	author sthen;	state Exp;
branches;
next	1.92.2.4;
commitid	uvOLYHcsCp28hMns;

1.92.2.4
date	2015.01.28.15.15.32;	author sthen;	state Exp;
branches;
next	;
commitid	5gAPkX4w8fbgO0fn;

1.97.2.1
date	2015.05.04.09.47.40;	author sthen;	state Exp;
branches;
next	;
commitid	lKqIUm6HI2fa21hA;


desc
@@


1.113
log
@clean non portable construct from include. stops clang warnings
@
text
@# $OpenBSD: Makefile,v 1.112 2016/11/04 11:35:20 sthen Exp $

COMMENT=	virus scanner
DISTNAME=	clamav-0.99.2
REVISION=	4

CATEGORIES=	security

SHARED_LIBS +=	clamav               22.2     # 8.1
SHARED_LIBS +=	clamunrar            3.0      # 8.1
SHARED_LIBS +=	clamunrar_iface      3.0

HOMEPAGE=	http://www.clamav.net/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv2/LGPL, with OpenSSL exemption
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += bz2 c crypto curl iconv ltdl lzma m milter ncurses
WANTLIB += nghttp2 pcre2-8 pthread ssl xml2 z

BUILD_DEPENDS=		devel/check \
			devel/libexecinfo

LIB_DEPENDS=		archivers/bzip2 \
			devel/gettext \
			devel/libtool,-ltdl \
			devel/pcre2 \
			mail/sendmail,-libmilter \
			net/curl \
			textproc/libxml

MASTER_SITES=		http://www.clamav.net/downloads/production/

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--disable-clamav \
			--enable-dependency-tracking \
			--disable-clamuko \
			--enable-bigstack \
			--enable-milter \
			--with-user=_clamav \
			--with-group=_clamav \
                        --disable-cr \
			--with-dbdir=/var/db/clamav \
			--with-ltdl-include=${LOCALBASE}/include \
			--with-ltdl-lib=${LOCALBASE}/lib

TEST_TARGET=	check
MODULES=	lang/python
MODPY_RUNDEP=	no

CPPFLAGS+=	-I/usr/include -I${LOCALBASE}/include
LDFLAGS+=	-pthread -L/usr/lib \
		-L${LOCALBASE}/lib
CONFIGURE_ENV+=	LDFLAGS="${LDFLAGS}" \
		CPPFLAGS="${CPPFLAGS}"
FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples/clamav

# This is used for a JIT bytecode compiler. Disabling it should
# still allow bytecode to work, just without the W|X-mapping JIT.
CONFIGURE_ARGS+= --disable-llvm

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/clamav \
		${PREFIX}/share/examples/clamav
	cd ${WRKSRC}/docs; ${INSTALL_DATA} *.pdf ${PREFIX}/share/doc/clamav
	cd ${WRKSRC}/examples; ${INSTALL_DATA} ex1.c \
		${PREFIX}/share/examples/clamav

pre-test:
	-ln -s ${MODPY_BIN} ${WRKDIR}/bin/python

.include <bsd.port.mk>
@


1.112
log
@sync WANTLIB (and in one case, add gettext to LIB_DEPENDS) in dependent ports
now that internationalised domain name support has been removed from net/curl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2016/11/03 21:10:57 sthen Exp $
d5 1
a5 1
REVISION=	3
@


1.111
log
@move clamav to using pcre2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2016/11/01 12:01:10 ajacoutot Exp $
d5 1
a5 1
REVISION=	2
d20 2
a21 2
WANTLIB += bz2 c crypto curl iconv idn intl ltdl lzma m milter
WANTLIB += ncurses nghttp2 pcre2-8 pthread ssl xml2 z
@


1.110
log
@Prevent picking up pcre2 (for now).

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2016/05/22 21:03:33 sthen Exp $
d5 1
a5 1
REVISION=	1
d21 1
a21 1
WANTLIB += ncurses nghttp2 pcre pthread ssl stdc++ xml2 z
d29 1
a29 1
			devel/pcre \
d36 1
a36 2
AUTOCONF_VERSION=	2.69
CONFIGURE_STYLE=	autoconf
@


1.109
log
@disable JIT which requires a W|X mapping
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2016/05/04 07:12:55 sthen Exp $
d5 1
a5 1
REVISION=	0
d36 3
a38 2
CONFIGURE_STYLE=        gnu
CONFIGURE_ARGS+=        --disable-clamav \
@


1.108
log
@update to clamav-0.99.2
still using the bundled llvm, the one in devel/llvm is too new
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2016/03/11 19:59:16 naddy Exp $
d3 3
a5 2
COMMENT=		virus scanner
DISTNAME=		clamav-0.99.2
d7 1
a7 1
CATEGORIES=		security
d13 1
a13 1
HOMEPAGE=		http://www.clamav.net/
d15 1
a15 1
MAINTAINER=		Stuart Henderson <sthen@@openbsd.org>
d60 3
a62 13
.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mllvm} && ! ${MACHINE_ARCH:Msparc} && \
	! ${MACHINE_ARCH:Msparc64} && ! ${MACHINE_ARCH:Mmips64}
CONFIGURE_ARGS+=	--enable-llvm
# As of 0.99.2, requires LLVM < 3.7.
# To attempt using system LLVM, try this:
#			--with-llvm-linking=dynamic \
#			--with-system-llvm=${LOCALBASE}/bin/llvm-config
# And add LIB_DEPENDS etc. sparc64 should work with ports LLVM, but not the
# bundled internal one.
.else
CONFIGURE_ARGS+=	--disable-llvm
.endif
@


1.107
log
@garbage collect CONFIGURE_SHARED
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2016/03/03 02:09:09 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.99.1
d19 2
a20 2
WANTLIB += bz2 c crypto curl idn ltdl lzma m milter ncurses nghttp2
WANTLIB += pcre pthread ssl stdc++ xml2 z
d26 1
d33 1
a33 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=clamav/}
d49 1
a49 1
MODULES=	lang/python devel/gettext
d63 2
a64 3
# At present (20140228 snapshot of LLVM, which is pre-3.5 but advertising a
# 3.5 version number), system LLVM does not work with ClamAV. To attempt
# using system LLVM, try this:
@


1.106
log
@update to clamav-0.99.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2016/02/20 15:23:43 tobiasu Exp $
a34 1
CONFIGURE_ARGS+=        ${CONFIGURE_SHARED}
@


1.105
log
@add sparc to the --disable-llvm group
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2016/02/09 02:31:23 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.99
REVISION=		0
@


1.104
log
@uncomment the "User _clamav" line in sample config.

clamd won't run without editing this file anyway, but in case somebody
doesn't notice this line while reviewing the file, use a better default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2016/01/25 20:20:53 jasper Exp $
d61 2
a62 1
.if ${PROPERTIES:Mllvm} && ! ${MACHINE_ARCH:Msparc64} && ! ${MACHINE_ARCH:Mmips64}
@


1.103
log
@- use ${MACHINE_ARCH} instead of ${ARCH} for consistency across the tree
- unbreak build on mips64 by adding it to the list of arches where llvm is disabled

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2015/12/01 23:25:09 sthen Exp $
d5 1
@


1.102
log
@update to clamav-0.99
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2015/11/20 16:50:06 sthen Exp $
d60 1
a60 1
.if ${PROPERTIES:Mllvm} && ! ${ARCH:Msparc64}
@


1.101
log
@Remove clamav run deps on lha, arc and unzip. I don't see anywhere where they
can possibly be used (there is an internal lib for unzip) and in the event
I missed a call to use them, users can make their own decision if they
want to have unmaintained decompression tools on their system.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2015/10/30 12:59:16 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.98.7
REVISION=		1
d8 2
a9 2
SHARED_LIBS +=	clamav               22.1     # 7.26
SHARED_LIBS +=	clamunrar            3.0      # 7.26
d20 1
a20 1
WANTLIB += pthread ssl stdc++ xml2 z
d27 1
@


1.100
log
@sync WANTLIB (curl+nghttp2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2015/05/05 15:03:21 sthen Exp $
d5 1
a5 1
REVISION=		0
a30 4

RUN_DEPENDS=		archivers/lha \
			archivers/arc \
			archivers/unzip
@


1.99
log
@Disable LLVM in clamd on sparc64, the bundled one requires additional
patching to work there, and ports/devel/llvm is unsuitable (halfway between
versions and files moved). Reported/tested by Markus Lude, thank you -
some other arch may also need this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/04/29 21:27:39 sthen Exp $
d5 1
d20 1
a20 1
WANTLIB += bz2 c crypto curl idn ltdl lzma m milter ncurses
@


1.98
log
@Update to ClamAV 0.98.7, including several crash/infinite loop fixes (CVEs)
and various improvements.

http://lists.clamav.net/pipermail/clamav-announce/2015/000011.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/01/28 15:13:51 sthen Exp $
d63 1
a63 1
.if ${PROPERTIES:Mllvm}
d65 3
a67 3
# At present (20140228 snapshot of LLVM, which is pre-3.5 but advertising a 3.5
# version number), system LLVM does not work with ClamAV. To attempt using system
# LLVM, try this:
d70 4
a73 1
# And add LIB_DEPENDS etc.
@


1.97
log
@SECURITY update to clamav 0.98.6, tested by myself and ajacoutot on various
arches, ok ajacoutot

http://blog.clamav.net/2015/01/clamav-0986-has-been-released.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2014/11/19 11:40:53 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.98.6
d8 2
a9 2
SHARED_LIBS +=	clamav               22.1     # 7.25
SHARED_LIBS +=	clamunrar            3.0      # 7.25
d20 1
a20 1
WANTLIB += pthread ssl xml2 z
d64 7
a70 4
BUILD_DEPENDS+=		devel/llvm

pre-configure:
	rm -rf ${WRKSRC}/libclamav/c++/llvm
@


1.97.2.1
log
@MFC: Update to ClamAV 0.98.7, including several crash/infinite loop fixes (CVEs)
and various improvements.

http://lists.clamav.net/pipermail/clamav-announce/2015/000011.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/04/29 21:27:39 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.98.7
d8 2
a9 2
SHARED_LIBS +=	clamav               22.1     # 7.26
SHARED_LIBS +=	clamunrar            3.0      # 7.26
d20 1
a20 1
WANTLIB += pthread ssl stdc++ xml2 z
d64 4
a67 7
CONFIGURE_ARGS+=	--enable-llvm
# At present (20140228 snapshot of LLVM, which is pre-3.5 but advertising a 3.5
# version number), system LLVM does not work with ClamAV. To attempt using system
# LLVM, try this:
#			--with-llvm-linking=dynamic \
#			--with-system-llvm=${LOCALBASE}/bin/llvm-config
# And add LIB_DEPENDS etc.
@


1.96
log
@ensure -current version > -stable version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2014/11/19 00:18:01 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.98.5
REVISION=		1
d8 2
a9 2
SHARED_LIBS +=	clamav               22.1     # 7.22
SHARED_LIBS +=	clamunrar            3.0      # 7.22
@


1.95
log
@SECURITY update to clamav 0.98.5 (crash fixes for various maliciously crafted
files, improved detection of malicious PE files, new file formats)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/09/17 09:13:13 ajacoutot Exp $
d5 1
@


1.94
log
@Cope with recent sendmail subpackaging.
Fix ports that were not able to find the milter includes (since it's not
under /usr/includes anymore).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/09/17 07:52:42 jca Exp $
d4 1
a4 2
DISTNAME=		clamav-0.98.4
REVISION=		2
d8 1
a8 1
SHARED_LIBS +=	clamav               22.0     # 7.22
d19 2
a20 2
WANTLIB += bz2 c crypto curl idn ltdl m milter ncurses pthread
WANTLIB += ssl xml2 z
@


1.93
log
@Cope with sendmail (and libmilter) moving to ports.
Input from sthen@@, ok ajacoutot@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2014/06/26 15:36:11 sthen Exp $
d5 1
a5 1
REVISION=		1
d20 1
a20 1
WANTLIB += bz2 c crypto curl idn intl ltdl m milter ncurses pthread
d28 1
a28 1
			mail/sendmail \
d53 1
a53 1
MODULES=	lang/python converters/libiconv
@


1.92
log
@call cl_initialize_crypto() from cl_init(), to unbreak HAVP following update
to clamav 0.98.4

https://bugzilla.clamav.net/show_bug.cgi?id=11037
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2014/06/17 09:12:45 sthen Exp $
d5 1
a5 1
REVISION=		0
d28 1
@


1.92.2.1
log
@SECURITY update to clamav 0.98.5 (crash fixes for various maliciously crafted
files, improved detection of malicious PE files, new file formats)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2014/11/19 00:18:01 sthen Exp $
d4 2
a5 1
DISTNAME=		clamav-0.98.5
d9 1
a9 1
SHARED_LIBS +=	clamav               22.1     # 7.22
d20 2
a21 2
WANTLIB += bz2 c crypto curl idn ltdl lzma m milter ncurses
WANTLIB += pthread ssl xml2 z
d52 1
a52 1
MODULES=	lang/python devel/gettext
@


1.92.2.2
log
@unbreak WANTLIB, libxml didn't start depending on xz (liblzma) until post-5.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92.2.1 2014/11/19 00:20:46 sthen Exp $
d19 1
a19 1
WANTLIB += bz2 c crypto curl idn ltdl m milter ncurses
@


1.92.2.3
log
@this patch should have been removed from the -stable commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92.2.2 2014/11/19 00:36:40 sthen Exp $
a4 1
REVISION=		0
@


1.92.2.4
log
@MFC SECURITY update to clamav 0.98.6
http://blog.clamav.net/2015/01/clamav-0986-has-been-released.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/01/28 15:13:51 sthen Exp $
d4 2
a5 1
DISTNAME=		clamav-0.98.6
d9 2
a10 2
SHARED_LIBS +=	clamav               22.1     # 7.25
SHARED_LIBS +=	clamunrar            3.0      # 7.25
@


1.91
log
@update to clamav 0.98.4, fixes infinite loop in clamdscan when clamd
is not running (the fix for buffer underruns with multipart MIME was
already patched locally)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/05/12 17:26:01 sthen Exp $
d5 1
@


1.90
log
@crash fix in mime boundary processing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/05/08 08:18:51 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.98.3
REVISION=		0
@


1.89
log
@update to clamav 0.98.3 (there appears to have been no 0.98.2) - license is
updated to GPLv2 + openssl exemptions.

notably: "Change to circumvent possible denial of service when processing
icons within specially crafted PE files. Icon limits are now in place with
corresponding clamd and clamscan configuration parameters."

also:
- support for common raw disk image formats
- experimental support of OpenIOC files in the signature database location
  ("No OpenIOC files will be delivered through freshclam")
- IPv6 now supported on all network sockets
- use OpenSSL file hash functions
- improved detection of malware scripts within image files
- pattern matcher improvements
- opt-in collection of statistics (--enable-stats / StatsEnabled) - NOT default
- various other fixes and improvements

libclamav major bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2014/01/15 13:06:47 jasper Exp $
d5 1
@


1.88
log
@- update to clamav-0.98.1

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/10/22 08:56:34 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.98.1
d7 4
a10 3
SHARED_LIBS=		clamav 21.1 \
			clamunrar 3.0 \
			clamunrar_iface 3.0
d16 1
a16 1
# GPLv2/LGPL
d19 2
a20 1
WANTLIB=		bz2 c ltdl m milter ncurses pthread xml2 z
d27 1
@


1.88.2.1
log
@MFC update to clamav 0.98.3 -

"Change to circumvent possible denial of service when processing icons
within specially crafted PE files. Icon limits are now in place with
corresponding clamd and clamscan configuration parameters."

libclamav major bump - ports with a library dependency (mail/dspam,
www/c-icap/modules, www/havp) will need rebuilding.

License is updated to GPLv2 + openssl exemptions.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/05/08 08:18:51 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.98.3
d7 3
a9 4

SHARED_LIBS +=	clamav               22.0     # 7.22
SHARED_LIBS +=	clamunrar            3.0      # 7.22
SHARED_LIBS +=	clamunrar_iface      3.0
d15 1
a15 1
# GPLv2/LGPL, with OpenSSL exemption
d18 1
a18 2
WANTLIB += bz2 c crypto curl idn intl ltdl m milter ncurses pthread
WANTLIB += ssl xml2 z
a24 1
			net/curl \
@


1.88.2.2
log
@crash fix in mime boundary processing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88.2.1 2014/05/08 08:44:42 sthen Exp $
a4 1
REVISION=		0
@


1.88.2.3
log
@MFC update to clamav 0.98.4, fixes infinite loop in clamdscan when clamd
is not running (the fix for buffer underruns with multipart MIME was
already patched locally)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/05/12 17:26:01 sthen Exp $
d4 2
a5 1
DISTNAME=		clamav-0.98.4
@


1.88.2.4
log
@MFC:

call cl_initialize_crypto() from cl_init(), to unbreak HAVP following update
to clamav 0.98.4

https://bugzilla.clamav.net/show_bug.cgi?id=11037
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2014/06/26 15:36:11 sthen Exp $
a4 1
REVISION=		0
@


1.87
log
@ClamAV 0.98 moved from libtommath to tomfastmath; however word-length detection
is broken on !amd64 64-bit arch which invalidates assumptions in the code.
Workaround by taking a diff from clamav upstream. This fixes a problem reported
by Markus Lude where freshclam signature checks fail - researched by him and
port diff from him (I just added a bit of commentary to the patch file).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/09/29 22:38:29 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.98
REVISION=		0
d7 1
a7 1
SHARED_LIBS=		clamav 21.0 \
d18 1
a18 1
WANTLIB=		bz2 c ltdl m milter ncurses pthread z
d24 2
a25 1
			devel/libtool,-ltdl
@


1.86
log
@- fix gnuism in unit_tests/Makefile
- allow running tests twice (don't fail if can't create symlink to python)

no pkg change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2013/09/20 15:22:58 sthen Exp $
d5 1
@


1.85
log
@update to clamav 0.98:

- signature improvements, performance improvements, support for new file
types including ISO9660, Flash, self-extracting 7z files

- more configurable limits

- callbacks added to API

while there, drop run dependency on zoo; clamav actually switched from zoo
to unzoo (which we don't have in ports) in 0.60(!) so this was doing nothing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2013/05/08 20:25:17 sthen Exp $
d73 1
a73 1
	ln -s ${MODPY_BIN} ${WRKDIR}/bin/python
@


1.84
log
@don't USE_GROFF, and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2013/04/23 20:34:16 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.97.8
REVISION=		0
d7 3
a9 3
SHARED_LIBS=		clamav 20.0 \
			clamunrar 2.0 \
			clamunrar_iface 2.0
a26 1
			archivers/zoo \
d55 1
a68 2
	cd ${WRKSRC}/etc; ${INSTALL_DATA} clamd.conf freshclam.conf \
		clamav-milter.conf ${PREFIX}/share/examples/clamav
@


1.84.2.1
log
@Now that sparc64 is fixed, update clamav in 5.4 to 0.98 as requested by jasper@@.
No direct security fixes, but improvements in the scanning engine make this a
desirable update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/10/22 08:56:34 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.98
d8 3
a10 3
SHARED_LIBS=		clamav 21.0 \
			clamunrar 3.0 \
			clamunrar_iface 3.0
d28 1
a56 1
FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples/clamav
d70 2
d76 1
a76 1
	-ln -s ${MODPY_BIN} ${WRKDIR}/bin/python
@


1.84.2.2
log
@- update to clamav 0.98.1

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84.2.1 2013/10/22 09:01:11 sthen Exp $
d4 2
a5 1
DISTNAME=		clamav-0.98.1
d8 1
a8 1
SHARED_LIBS=		clamav 21.1 \
d19 1
a19 1
WANTLIB=		bz2 c ltdl m milter ncurses pthread xml2 z
d25 1
a25 2
			devel/libtool,-ltdl \
			textproc/libxml
@


1.83
log
@SECURITY update to ClamAV 0.97.8

"ClamAV 0.97.8 addresses several reported potential security bugs.
Thanks to Felix Groebert of the Google Security Team for finding and
reporting these issues."

- fixes in PE and autoit decoding
- off by one malloc in SIS format handler
- minor changes to freshclam
- add error checking in md5 (memcpy etc.)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2013/03/21 08:48:53 ajacoutot Exp $
d5 1
a30 2

USE_GROFF =		Yes
@


1.82
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/03/15 15:10:06 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.7
d18 1
a18 1
WANTLIB=		bz2 c ltdl m milter ncurses pthread stdc++ z
@


1.81
log
@SECURITY update to ClamAV 0.97.7

"addresses several reported potential security bugs." (full details not
available yet, but there are some added checks for pointer out of bounds
in WWPack decompression).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2013/03/11 11:41:24 espie Exp $
a30 1
USE_LIBTOOL=		Yes
@


1.80
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/09/17 21:13:44 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.6
d7 1
a7 1
SHARED_LIBS=		clamav 19.0 \
@


1.79
log
@update to clamav 0.97.6, minor bug fixes and detection improvements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2012/07/08 21:24:58 giovanni Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d50 1
a50 1
REGRESS_TARGET=	check
d77 1
a77 1
pre-regress:
@


1.79.2.1
log
@MFC SECURITY update to ClamAV 0.97.8,

- fixes in PE and autoit decoding
- off by one malloc in SIS format handler
- out of bounds access in WWPack
- fixes in freshclam (zero a buffer before using for strings, and
receive error handling)

There are new/changed library functions, so would normally warrant a bump,
but as they're only internal use and to avoid rebuilding additional ports,
skipping the library bump here, as discussed with/OK jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/09/17 21:13:44 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.8
d35 1
@


1.78
log
@
Use devel/llvm instead of the bundled one on $LLVM_ARCHS
help & ok sthen@@ (Maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2012/06/16 10:34:54 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.97.5
REVISION=		0
@


1.78.2.1
log
@MFC (plus tweaks for test/regress and PERMIT_*) the clamav security update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/03/15 15:10:06 sthen Exp $
d4 2
a5 1
DISTNAME=		clamav-0.97.7
d8 1
a8 1
SHARED_LIBS=		clamav 20.0 \
@


1.77
log
@SECURITY update to clamav 0.97.5

ClamAV 0.97.5 addresses possible evasion cases in some archive formats
(CVE-2012-1457, CVE-2012-1458, CVE-2012-1459).  It also addresses stability
issues in portions of the bytecode engine.  This release is recommended for all
users.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2012/03/15 22:04:44 sthen Exp $
d5 1
d63 8
@


1.76
log
@update to ClamAV 0.97.4, minor bugfixes and detection improvements
- merge PFRAG.shared into PLIST, this is SHARED_ONLY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2012/01/21 23:13:59 ajacoutot Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.4
@


1.75
log
@/usr/local -> ${TRUEPREFIX}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2012/01/21 23:02:57 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.97.3
REVISION=		3
d7 1
a7 1
SHARED_LIBS=		clamav 18.1 \
@


1.74
log
@Add an rc.d script for clamav-milter, from Benny
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2011/12/17 22:01:13 sthen Exp $
d5 1
a5 1
REVISION=		2
@


1.73
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/12/07 09:29:02 jasper Exp $
d5 1
a5 1
REVISION=		1
@


1.72
log
@- add missing build dependency
- zap trailing whitespace

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/10/18 18:48:39 sthen Exp $
d5 1
a5 1
REVISION=		0
@


1.71
log
@update to clamav 0.97.3.

in typical clamav tradition, release notes say "ClamAV 0.97.3 is a
minor bugfix release and is recommended for all users", secunia says:

   A vulnerability has been reported in ClamAV, which can be exploited by
   malicious people to cause a DoS (Denial of Service) and potentially
   compromise a vulnerable system.
   The vulnerability is caused due to errors related to the handling of
   recursion levels within the "cli_bcapi_extract_new()"
   (libclamav/bytecode_api.c) and "cli_bytecode_runhook()"
   (libclamav/bytecode.c) functions, which can be exploited to e.g. cause
   a crash via specially crafted files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/07/26 14:23:45 sthen Exp $
d5 1
d24 2
a25 1
BUILD_DEPENDS=		devel/check
d33 1
a33 1
			archivers/unzip 
@


1.70
log
@update to clamav 0.97.2; fixes problems with the bytecode engine, Safebrowsing
detection, hash matcher, and other minor issues. ok giovanni@@ pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/06/10 22:20:20 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.2
@


1.70.2.1
log
@MFC: update to clamav 0.97.3.

in typical clamav tradition, release notes say "ClamAV 0.97.3 is a
minor bugfix release and is recommended for all users", secunia says:

A vulnerability has been reported in ClamAV, which can be exploited by
malicious people to cause a DoS (Denial of Service) and potentially
compromise a vulnerable system.
The vulnerability is caused due to errors related to the handling of
recursion levels within the "cli_bcapi_extract_new()"
(libclamav/bytecode_api.c) and "cli_bytecode_runhook()"
(libclamav/bytecode.c) functions, which can be exploited to e.g. cause
a crash via specially crafted files.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/07/26 14:23:45 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.3
@


1.69
log
@bugfix update to clamav 0.97.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/06/02 17:09:32 kili Exp $
d4 1
a4 1
DISTNAME=		clamav-0.97.1
@


1.68
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/05/11 08:24:40 ajacoutot Exp $
d4 1
a4 3
DISTNAME=		clamav-0.97

REVISION=		0
d7 1
a7 1
SHARED_LIBS=		clamav 18.0 \
a24 1
# XXX can this use llvm from ports rather than bundled?
@


1.67
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/03/02 14:36:49 sthen Exp $
a47 1
			--enable-silent-rules=no \
@


1.66
log
@update to 0.97
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/01/05 06:06:48 ajacoutot Exp $
d5 2
@


1.65
log
@Rename rc scripts to follow our usual naming.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/12/27 14:50:23 ajacoutot Exp $
d4 1
a4 3
DISTNAME=		clamav-0.96.5

REVISION=		3
d7 1
a7 1
SHARED_LIBS=		clamav 17.0 \
@


1.64
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/12/24 10:40:06 ajacoutot Exp $
d6 1
a6 1
REVISION=		2
@


1.63
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/12/11 12:57:37 ajacoutot Exp $
d6 1
a6 1
REVISION=		1
@


1.62
log
@Move these to rc_reload=NO.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/12/01 22:59:35 sthen Exp $
d6 1
a6 1
REVISION=		0
@


1.61
log
@update ClamAV to 0.96.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/11/20 17:22:43 espie Exp $
d5 2
@


1.60
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/11/04 11:29:44 ajacoutot Exp $
d4 1
a4 2
DISTNAME=		clamav-0.96.4
REVISION=		2
d7 1
a7 1
SHARED_LIBS=		clamav 16.0 \
@


1.59
log
@Make the default config work without eating all FDs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/11/04 11:19:40 sthen Exp $
d24 1
a24 1
BUILD_DEPENDS=		::devel/check
d27 2
a28 2
LIB_DEPENDS=		::archivers/bzip2 \
			::devel/libtool,-ltdl
d30 4
a33 4
RUN_DEPENDS=		::archivers/lha \
			::archivers/zoo \
			::archivers/arc \
			::archivers/unzip 
d36 1
a36 1
USE_GROFF =	Yes
@


1.58
log
@remove unnecessary MESSAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/11/04 11:18:12 sthen Exp $
d5 1
a5 1
REVISION=		1
@


1.57
log
@add rc scripts. "go ahead" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/10/25 23:36:38 sthen Exp $
d5 1
a5 1
REVISION=		0
@


1.56
log
@update ClamAV to 0.96.4.

as the release notes say, "a bugfix release recommended for all users"
(or as ChangeLog says, "fix stack smash")
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/10/18 21:41:45 espie Exp $
d5 1
@


1.55
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/09/26 13:40:11 naddy Exp $
d4 1
a4 1
DISTNAME=		clamav-0.96.3
d7 1
a7 1
SHARED_LIBS=		clamav 15.0 \
@


1.54
log
@remove -Lxxx/.libs workarounds required with GNU libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/09/21 13:18:26 sthen Exp $
d35 1
@


1.53
log
@update clamav to 0.96.3, ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/08/30 21:16:17 jasper Exp $
d58 1
a58 1
LDFLAGS+=	-pthread -L/usr/lib -L${WRKSRC}/libclamav/.libs \
@


1.52
log
@hump de bump for pythonp
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/08/19 09:17:41 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.96.2
REVISION=		0
d7 1
a7 1
SHARED_LIBS=		clamav 14.0 \
@


1.51
log
@update ClamAV to 0.96.2; earlier version ok pea@@ (with some port
Makefile cleanup since then), feedback giovanni@@

- better performance and reduced memory use
- various other fixes and minor enhancements
- new pdf parser
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/05/27 09:54:09 sthen Exp $
d5 1
@


1.50
log
@clamav picks up gcc4 if it's installed to build some extra things;
add stdc++ to WANTLIB. (This will result in an Extra: on !gcc4 arch
but that's not a problem). Discussed with espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/05/23 21:24:09 sthen Exp $
d4 2
a5 2
DISTNAME=		clamav-0.96.1
PKGNAME=		${DISTNAME}p0
d7 1
a7 1
SHARED_LIBS=		clamav 13.0 \
d21 1
a21 1
WANTLIB=		c m milter ncurses pthread stdc++ z
d25 8
a32 8
LIB_DEPENDS=		bz2.>=10::archivers/bzip2 \
			iconv.>=4::converters/libiconv \
			ltdl:libltdl-*:devel/libtool,-ltdl

RUN_DEPENDS=		:lha-*:archivers/lha \
			:zoo-*:archivers/zoo \
			:arc-*:archivers/arc \
			:unzip-*:archivers/unzip 
d53 9
a61 8
REGRESS_TARGET=		check
MODULES=		lang/python
MODPY_RUNDEP=		no

CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L${WRKSRC}/libclamav/.libs -L${LOCALBASE}/lib" \
			CPPFLAGS="-I/usr/include -I${LOCALBASE}/include"

DOCS=			clamav-mirror-howto.pdf clamdoc.pdf signatures.pdf
d66 1
a66 1
	cd ${WRKSRC}/docs; ${INSTALL_DATA} ${DOCS} ${PREFIX}/share/doc/clamav
@


1.50.2.1
log
@MFC:

- - -
date: 2010/10/25 23:36:38;  author: sthen;  state: Exp;  lines: +3 -3
update ClamAV to 0.96.4.

as the release notes say, "a bugfix release recommended for all users"
(or as ChangeLog says, "fix stack smash")
- - -

ok sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/05/27 09:54:09 sthen Exp $
d4 2
a5 1
DISTNAME=		clamav-0.96.4
d7 1
a7 1
SHARED_LIBS=		clamav 16.0 \
d60 1
a60 1
DOCS=			clamav-mirror-howto.pdf clamdoc.pdf phishsigs_howto.pdf signatures.pdf
@


1.49
log
@update to 0.96.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2010/04/01 13:18:54 sthen Exp $
d5 1
d21 1
a21 1
WANTLIB=		c m milter ncurses pthread z
@


1.48
log
@update to 0.96, ok pea@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/10/30 01:09:34 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.96
d53 2
d69 3
@


1.47
log
@update to 0.95.3, partly from pea@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/09/15 18:06:28 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.95.3
d6 1
a6 1
SHARED_LIBS=		clamav 12.0 \
d20 1
a20 1
WANTLIB=		c milter ncurses pthread z
d44 1
@


1.47.2.1
log
@SECURITY FIX

Resolves CVE-2010-1639, from upstream via pea@@ (thanks!)

ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/10/30 01:09:34 sthen Exp $
a4 1
PKGNAME=		${DISTNAME}p0
@


1.46
log
@take MAINTAINER on these. ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/09/15 17:37:22 jasper Exp $
d4 1
a4 2
DISTNAME=		clamav-0.95.2
PKGNAME=		${DISTNAME}p1
@


1.45
log
@remove marc balmer as maintainer of all of his ports, to take away the
illusion marc still maintains them. as requested by himself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/06/11 10:50:49 sthen Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d12 2
@


1.44
log
@update to 0.95.2; ok giovanni@@

"This version improves handling of archives, adds support for --file-list
in clamscan and clamdscan, and fixes various issues found in previous
releases."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2009/04/12 09:28:45 sthen Exp $
d5 1
a11 2

MAINTAINER=		Marc Balmer <mbalmer@@openbsd.org>
@


1.44.2.1
log
@MFC:

Update to clamav-0.95.3, bugfixes

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/06/11 10:50:49 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.95.3
d12 1
a12 1
MAINTAINER=		Stuart Henderson <sthen@@openbsd.org>
@


1.43
log
@it seems something was fixed between 0.95 and 0.95.1 meaning the bundled
libltdl no longer needs be used, so switch back to the usual one and add
the dependency on ports-tree libltdl.

prompted by a diff from Mikolaj Kucharski, ok with mbalmer (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/04/11 14:13:58 sthen Exp $
d4 1
a4 2
DISTNAME=		clamav-0.95.1
PKGNAME=		${DISTNAME}p0
d6 1
a6 1
SHARED_LIBS=		clamav 11.0 \
@


1.42
log
@security update to 0.95.1. it doesn't build with ports-tree libtool,
so use the bundled one and mark with XXX until it can be fixed better.
commit requested by mbalmer (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2008/12/13 10:19:09 mbalmer Exp $
d5 1
d26 2
a27 1
			iconv.>=4::converters/libiconv
a35 5
# XXX dlopen() of modules fails with the ports-tree libltdl.
#     the bundled libltdl won't build with ports-tree libtool;
#     use bundled versions of both for now.
LIBTOOL=		${WRKSRC}/libtool

d48 3
a50 1
			--with-dbdir=/var/db/clamav
@


1.41
log
@Update to ClamAV 0.94.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/11/07 22:33:06 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.94.2
d6 3
a8 3
SHARED_LIBS=		clamav 10.0 \
			clamunrar 1.0 \
			clamunrar_iface 1.0
d20 1
a20 1
WANTLIB=		c milter pthread wrap z
d24 1
a24 2
LIB_DEPENDS=		gmp.>=6::devel/gmp \
			bz2.>=10::archivers/bzip2 \
d34 6
a39 2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=clamav/} \
			${HOMEPAGE}
d55 1
a55 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L../libclamav/.libs -L${LOCALBASE}/lib" \
d64 2
a65 2
	cd ${WRKSRC}/etc; ${INSTALL_DATA} clamd.conf \
		freshclam.conf ${PREFIX}/share/examples/clamav
@


1.40
log
@update to 0.94.1; sundry fixes
ok mbalmer (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/09/14 15:00:43 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.94.1
@


1.39
log
@SECURITY and other bug fixes.

- A vulnerability in ClamAV's chm-parser allowed remote attackers to
cause a denial of service (application crash) via a malformed CHM file
(CVE-2008-1389).

- A vulnerability in libclamav would allow attackers to cause a
denial of service via vectors related to an out-of-memory condition
(CVE-2008-3912).

- Multiple memory leaks were found in ClamAV that could possibly allow
attackers to cause a denial of service via excessive memory consumption
(CVE-2008-3913).

- A number of unspecified vulnerabilities in ClamAV were reported that
have an unknown impact and attack vectors related to file descriptor
leaks (CVE-2008-3914).

various OpenBSD patches rolled in upstream. thanks to sturm@@
for looking over systrace.filter (needed for the test of sendmsg()
in configure to enable FD passing).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/07/08 22:38:12 sthen Exp $
d4 1
a4 1
DISTNAME=		clamav-0.94
d6 1
a6 1
SHARED_LIBS=		clamav 9.0 \
@


1.38
log
@update clamav to 0.93.3. possible SECURITY. since 0.93:

- fixes DoS with MailFollowURLs (CVE-2008-2713)
- improves handling of PDF, CAB, RTF, OLE2 and HTML files
and includes various bugfixes for 0.93 issues.

"if it works" mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/04/16 19:46:01 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.93.3
d6 3
a8 3
SHARED_LIBS=		clamav 8.0 \
			clamunrar 0.0 \
			clamunrar_iface 0.0
d22 2
d50 1
a50 1
NO_REGRESS=		Yes
@


1.37
log
@Update ClamAV to version 0.93, which fixes mostly security problems, at
least one highly critical (remote). See http://secunia.com/advisories/29000
for details.

Thanks to kurt@@ for helping analyzing the threaded code issues.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/09/17 21:13:13 ajacoutot Exp $
d4 1
a4 1
DISTNAME=		clamav-0.93
d6 1
a6 1
SHARED_LIBS=		clamav 7.0 \
@


1.36
log
@Update to ClamAV 0.92.1.

ok sthen, rui
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2008/01/02 18:10:50 bernd Exp $
d4 1
a4 1
DISTNAME=		clamav-0.92.1
d6 3
a8 1
SHARED_LIBS+=		clamav		6.0 # .3.3
d46 1
a46 2
			--with-dbdir=/var/db/clamav \
			--disable-unrar
@


1.35
log
@Disable rar until the license has been checked.

Noticed by sturm@@, thanks!

ok mbalmer@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/12/30 22:42:38 bernd Exp $
d4 1
a4 2
DISTNAME=		clamav-0.92
PKGNAME=		${DISTNAME}p0
@


1.34
log
@Security update to clamav-0.92. (CVE-2007-6335)

"ClamAV libclamav MEW PE File Integer Overflow Vulnerability"

More info:
http://labs.idefense.com/intelligence/vulnerabilities/display.php?id=634

Similar diff submitted by grunk@@ on ports@@.

test & ok mbalmer@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/09/17 21:13:13 ajacoutot Exp $
d5 1
a7 2
SHARED_LIBS+=		clamunrar       3.3 # .3.3
SHARED_LIBS+=		clamunrar_iface	3.3 # .3.3
d45 2
a46 1
			--with-dbdir=/var/db/clamav
@


1.33
log
@- use "_clamav" user as default in the config files (not "clamav")

"of course" mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/08/25 10:08:28 mbalmer Exp $
d4 1
a4 2
DISTNAME=		clamav-0.91.2
PKGNAME=		${DISTNAME}p0
d6 3
a8 1
SHARED_LIBS=		clamav 5.0
d14 1
a14 1
#GPL
@


1.32
log
@Update ClamAV to version 0.91.2.

Note to -stable ports maintainers:  This should probably be put into -stable
since the ClamAV people do not provide virus data to outdated scan engines.

ok simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/08/02 18:12:55 aanriot Exp $
d5 1
@


1.31
log
@- fix the configure script so that TCP Wrappers support gets enabled.
- bump SHARED_LIBS / PKGNAME.
- while there, remove quotes from COMMENT.

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/06/13 17:25:00 aanriot Exp $
d4 1
a4 2
DISTNAME=		clamav-0.90.3
PKGNAME=		${DISTNAME}p1
d6 1
a6 1
SHARED_LIBS=		clamav 4.2	# .4.1
d18 1
a18 1
WANTLIB=		c crypto idn milter pthread ssl wrap z
a20 1
			curl.>=2::net/curl \
d44 1
a44 2
			--with-dbdir=/var/db/clamav \
			--with-libcurl
@


1.30
log
@- more @@sample directories, needed by clamd.
- bump PKGNAME.

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2007/05/31 16:02:27 aanriot Exp $
d3 1
a3 1
COMMENT=		"virus scanner"
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d7 1
a7 1
SHARED_LIBS=		clamav 4.1	# .4.1
d19 1
a19 1
WANTLIB=		c crypto idn pthread ssl z milter
@


1.29
log
@Security Update to ClamAV 0.90.3.

This release contains various bugfixes, see ChangeLog for details.

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2007/05/15 15:09:12 naddy Exp $
d5 1
@


1.28
log
@chase wantlib changes after curl update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2007/04/13 06:17:47 mbalmer Exp $
d4 1
a4 2
DISTNAME=		clamav-0.90.2
PKGNAME=		${DISTNAME}p0
d6 1
a6 1
SHARED_LIBS=		clamav 4.0
d18 1
a18 1
WANTLIB=		c crypto idn pthread ssl z milter wrap
@


1.27
log
@Security update to ClamAV 0.90.2.  This containe three import security
fixes:

- ClamAV CAB File Unstore Buffer Overflow Vulnerability
- File descriptor leak in CHM handler
- PDF fd leak

From the original annoucement:

**Important note**: on April 16th CHM, CAB and PDF handlers will be
disabled for 0.90 and 0.90.1 users through the dynamic engine
configuration module (DCONF). Please upgrade to 0.90.2 immediately.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2007/04/11 17:54:10 mbalmer Exp $
d5 1
d19 1
a19 1
WANTLIB=		c crypto pthread ssl z milter wrap
@


1.26
log
@Port maintenance:

- Build a new version even if the old one is still installed
- Only chmod 700 the /var/clamav/quantine directory

From Jeremy Evans <jeremyevans0@@gmail.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/03/25 11:24:02 mbalmer Exp $
d4 1
a4 2
DISTNAME=		clamav-0.90.1
PKGNAME=		${DISTNAME}p0
@


1.25
log
@Update to ClamAV 0.90.1.  Work done mostly by Stuart Henderson, with some
tweaks by myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/02/28 20:31:08 mbalmer Exp $
d5 1
d51 1
a51 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L${LOCALBASE}/lib" \
@


1.24
log
@Update to ClamAV 0.90.  A lot of improvments and bugfixes, see www.clamav.net
for all details.

ok nikolay
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/01/17 08:27:20 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90
d6 1
a6 1
SHARED_LIBS=		clamav 3.0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter
d22 2
a23 1
			bz2.>=10::archivers/bzip2
@


1.24.2.1
log
@MFC:
Update to ClamAV 0.90.1.  Work done mostly by Stuart Henderson, with some
tweaks by myself.
---
Security update to ClamAV 0.90.2.  This containe three import security
fixes:

- ClamAV CAB File Unstore Buffer Overflow Vulnerability
- File descriptor leak in CHM handler
- PDF fd leak

From the original annoucement:

**Important note**: on April 16th CHM, CAB and PDF handlers will be
disabled for 0.90 and 0.90.1 users through the dynamic engine
configuration module (DCONF). Please upgrade to 0.90.2 immediately.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/02/28 20:31:08 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.2
d6 1
a6 1
SHARED_LIBS=		clamav 4.0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter wrap
d22 1
a22 2
			bz2.>=10::archivers/bzip2 \
			iconv.>=4::converters/libiconv
d49 1
a49 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L../libclamav/.libs -L${LOCALBASE}/lib" \
@


1.24.2.2
log
@MFC:
Security Update to ClamAV 0.90.3.

This release contains various bugfixes, see ChangeLog for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.1 2007/05/01 16:24:35 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.3
d6 1
a6 1
SHARED_LIBS=		clamav 4.1
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter
@


1.24.2.3
log
@MFC:
Update ClamAV to version 0.91.2

work done by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24.2.2 2007/06/06 06:00:05 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.91.2
d6 1
a6 1
SHARED_LIBS=		clamav 5.0
d18 1
a18 1
WANTLIB=		c milter pthread wrap z
d21 1
d45 2
a46 1
			--with-dbdir=/var/db/clamav
@


1.23
log
@Implement scanning by filedescriptor passing.  Makes it much simpler to
configure a mail scanning gateway using ClamAV and smtp-vilter.

ok jsg (who also had the idea for this)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/01/13 13:13:11 mbalmer Exp $
d4 1
a4 2
DISTNAME=		clamav-0.88.7
PKGNAME=		${DISTNAME}p1
d6 1
a6 1
SHARED_LIBS=		clamav 2.0
d49 1
a49 1
CONFIGURE_ENV+=		LDFLAGS="-L/usr/lib -L${LOCALBASE}/lib" \
@


1.22
log
@Remove two RUN_DEPENDS to software that is only available by manually
installing ports.  This makes using the clamav package much easier.
ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/12/17 15:19:30 mbalmer Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
@


1.21
log
@Maintenance update to version 0.88.7, improvements in mail scanning.
Bump the major SHARED_LIBS number because exposed structs and interfaces
changed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/11/05 22:17:28 mbalmer Exp $
d5 1
a25 2
			:unarj-*:archivers/unarj \
			:unrar-*:archivers/unrar \
@


1.20
log
@Update to ClamAV 0.88.6.

Changes in this release include better handling of network problems in
freshclam and other minor bugfixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/10/16 07:03:42 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.6
d6 1
a6 1
SHARED_LIBS=		clamav 1.20
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z wrap milter
@


1.19
log
@ClamAV 0.88.5

Security:
ClamAV 0.88.5 fixes a crash in the CHM unpacker and a heap overflow in
the function rebuilding PE files after unpacking.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/08/15 18:48:22 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.5
@


1.18
log
@security update to 0.88.4
ok pvalchev
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/08/03 23:28:11 espie Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.4
@


1.18.2.1
log
@MFC:
ClamAV 0.88.5

Security:
ClamAV 0.88.5 fixes a crash in the CHM unpacker and a heap overflow in
the function rebuilding PE files after unpacking.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/08/15 18:48:22 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.5
@


1.18.2.2
log
@update to ClamAV 0.88.6 to silence warnings about clamav being outdated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.1 2006/11/01 13:17:28 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.6
@


1.18.2.3
log
@MFC:
Maintenance update to version 0.88.7, improvements in mail scanning.
Bump the major SHARED_LIBS number because exposed structs and interfaces
changed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.2 2006/12/13 22:16:12 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.7
d6 1
a6 1
SHARED_LIBS=		clamav 2.0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter
@


1.18.2.4
log
@MFC:
Update to ClamAV 0.90.  A lot of improvments and bugfixes, see www.clamav.net
for all details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.3 2006/12/24 06:27:19 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90
d6 1
a6 1
SHARED_LIBS=		clamav 3.0
d25 2
d51 1
a51 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L${LOCALBASE}/lib" \
@


1.18.2.5
log
@MFC:
Update to ClamAV 0.90.1.  Work done mostly by Stuart Henderson, with some
tweaks by myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.4 2007/03/16 22:12:34 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.1
d6 1
a6 1
SHARED_LIBS=		clamav 4.0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter wrap
d22 1
a22 2
			bz2.>=10::archivers/bzip2 \
			iconv.4::converters/libiconv
@


1.18.2.6
log
@MFC:
Security update to ClamAV 0.90.2.  This containe three import security
fixes:

- ClamAV CAB File Unstore Buffer Overflow Vulnerability
- File descriptor leak in CHM handler
- PDF fd leak

From the original annoucement:

**Important note**: on April 16th CHM, CAB and PDF handlers will be
disabled for 0.90 and 0.90.1 users through the dynamic engine
configuration module (DCONF). Please upgrade to 0.90.2 immediately.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.5 2007/04/02 14:02:00 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.2
d50 1
a50 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L../libclamav/.libs -L${LOCALBASE}/lib" \
@


1.18.2.7
log
@MFC:
Security Update to ClamAV 0.90.3.

This release contains various bugfixes, see ChangeLog for details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.6 2007/04/13 13:00:32 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.3
d6 1
a6 1
SHARED_LIBS=		clamav 4.1
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter
@


1.18.2.8
log
@MFC:
Update ClamAV to version 0.91.2

work done by ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18.2.7 2007/06/06 06:00:38 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.91.2
d6 1
a6 1
SHARED_LIBS=		clamav 5.0
d18 1
a18 1
WANTLIB=		c milter pthread wrap z
d21 1
d45 2
a46 1
			--with-dbdir=/var/db/clamav
@


1.17
log
@new lib specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/04/30 06:38:25 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.2
d6 1
a6 3
SHARED_LIBS=		clamav 1.19
MODGNU_SHARED_LIBS=	clamav ''
LIBclamav_ALIAS=	realclamav
@


1.16
log
@Update to ClamAV 0.88.2

This release improves virus detection and fixes zip handling on 64-bit
architectures.

SECURITY
This release fixes a possible security problem in freshclam.
See http://www.clamav.net/security/0.88.2.html for a full security report.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/04/06 06:20:16 mbalmer Exp $
d22 3
a24 3
LIB_DEPENDS=		gmp.6::devel/gmp \
			curl.2::net/curl \
			bz2.10::archivers/bzip2
@


1.15
log
@Update to ClamAV 0.88.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/01/10 09:26:28 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.1
d6 1
a6 1
SHARED_LIBS=		clamav 1.18
@


1.14
log
@Update to ClamAV 0.88.

SECURITY:  A possible heap overflow in the UPX code has been fixed.
The security of the UPX, FSG and Petite modules has been improved, too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/12/24 20:52:58 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88
d6 1
a6 1
SHARED_LIBS=		clamav 1.17
@


1.14.2.1
log
@MFC:
Update to ClamAV 0.88.1.

1) An unspecified integer overflow error exists in the PE header parser
   in "libclamav/pe.c".
2) Some format string errors in the logging handling in
   "shared/output.c" may be exploited to execute arbitrary code.
3) An out-of-bounds memory access error in the "cli_bitset_test()"
   function in "ibclamav/others.c" may be exploited to cause a crash.

CVE reference: CVE-2006-1614, CVE-2006-1615, CVE-2006-1630

More info: http://secunia.com/advisories/19534/
-----------
Update to ClamAV 0.88.2

This release improves virus detection and fixes zip handling on 64-bit
architectures.

SECURITY
This release fixes a possible security problem in freshclam.
See http://www.clamav.net/security/0.88.2.html for a full security report.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/01/10 09:26:28 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.2
d6 1
a6 1
SHARED_LIBS=		clamav 1.19
@


1.14.2.2
log
@MFC:
security update to 0.88.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.1 2006/05/01 18:59:41 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.4
d6 3
a8 1
SHARED_LIBS=		clamav 1.20
a44 1
			--mandir=${PREFIX}/man \
@


1.14.2.3
log
@MFC:
ClamAV 0.88.5

Security:
ClamAV 0.88.5 fixes a crash in the CHM unpacker and a heap overflow in
the function rebuilding PE files after unpacking.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.2 2006/08/20 10:11:40 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.5
@


1.14.2.4
log
@update to ClamAV 0.88.6 to silence warnings about clamav being outdated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.3 2006/10/19 15:11:06 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.6
@


1.14.2.5
log
@MFC:
Maintenance update to version 0.88.7, improvements in mail scanning.
Bump the major SHARED_LIBS number because exposed structs and interfaces
changed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.4 2006/12/13 22:44:12 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.7
d6 1
a6 1
SHARED_LIBS=		clamav 2.0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter
@


1.14.2.6
log
@MFC:
Update to ClamAV 0.90.  A lot of improvments and bugfixes, see www.clamav.net
for all details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.5 2006/12/23 18:13:46 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90
d6 1
a6 1
SHARED_LIBS=		clamav 3.0
d25 2
d52 1
a52 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L${LOCALBASE}/lib" \
@


1.14.2.7
log
@MFC:
Update to ClamAV 0.90.1.  Work done mostly by Stuart Henderson, with some
tweaks by myself.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.6 2007/03/16 21:31:19 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.1
d6 1
a6 1
SHARED_LIBS=		clamav 4.0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z milter wrap
d22 1
a22 2
			bz2.10::archivers/bzip2 \
			iconv.4::converters/libiconv
@


1.14.2.8
log
@MFC:
Security update to ClamAV 0.90.2.  This containe three import security
fixes:

- ClamAV CAB File Unstore Buffer Overflow Vulnerability
- File descriptor leak in CHM handler
- PDF fd leak

From the original annoucement:

**Important note**: on April 16th CHM, CAB and PDF handlers will be
disabled for 0.90 and 0.90.1 users through the dynamic engine
configuration module (DCONF). Please upgrade to 0.90.2 immediately.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14.2.7 2007/03/28 19:53:19 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.90.2
d51 1
a51 1
CONFIGURE_ENV+=		LDFLAGS="-pthread -L/usr/lib -L../libclamav/.libs -L${LOCALBASE}/lib" \
@


1.13
log
@SHARED_LIBS
USE_LIBTOOL where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/11/06 19:31:43 mbalmer Exp $
d4 1
a4 2
DISTNAME=		clamav-0.87.1
PKGNAME=		${DISTNAME}p0
d6 1
a6 1
SHARED_LIBS=		clamav 1.16
@


1.12
log
@Update to ClamAV 0.87.1

This release includes major bugfixes for problems with handling TNEF
attachments, cabinet files and FSG compressed executables.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/11/01 16:22:40 mbalmer Exp $
d5 1
d7 3
d33 2
@


1.11
log
@libmilter is now a shared lib.  Add it to WANTLIB and bump the package name.

Reported by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/10/27 20:03:25 sturm Exp $
d3 2
a4 3
COMMENT=		"free virus scanner"
DISTNAME=		clamav-0.87
PKGNAME=		${DISTNAME}p1
d30 2
a31 1
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=clamav/}
@


1.10
log
@bump PKGNAMEs to permit the same in -stable, needed for new packages
after recent libcurl update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/09/22 21:14:55 mbalmer Exp $
d5 1
a5 1
PKGNAME=		${DISTNAME}p0
d18 1
a18 1
WANTLIB=		c crypto pthread ssl z wrap
@


1.9
log
@Update to version 0.87.

Notes: This version fixes vulnerabilities in handling of UPX and FSG compressed
executables. Support for PE files, Zip and Cabinet archives has been improved
and other small bugfixes have been made. The new option "--on-outdated-execute"
allows freshclam to run a command when system reports a new engine version.
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
@


1.8
log
@bump PKGNAME so that 3.7 won't have higher PKGNAMEs than 3.8

suggested by espie@@, ok pval@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/07/27 22:15:23 mbalmer Exp $
d4 1
a4 2
DISTNAME=		clamav-0.86.2
PKGNAME=		${DISTNAME}p0
d17 1
a17 1
WANTLIB=		c crypto pthread ssl z
@


1.8.2.1
log
@MFC:
Update to version 0.87.

Notes: This version fixes vulnerabilities in handling of UPX and FSG compressed
executables. Support for PE files, Zip and Cabinet archives has been improved
and other small bugfixes have been made. The new option "--on-outdated-execute"
allows freshclam to run a command when system reports a new engine version.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/08/31 19:55:36 sturm Exp $
d4 2
a5 1
DISTNAME=		clamav-0.87
d18 1
a18 1
WANTLIB=		c crypto pthread ssl wrap z
@


1.8.2.2
log
@bump PKGNAMEs to not fall behind 3.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.1 2005/11/01 11:22:10 sturm Exp $
a4 1
PKGNAME=		${DISTNAME}p0
@


1.8.2.3
log
@update to clamav 0.87.1, which fixes several security flaws
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.2 2005/11/01 11:50:23 sturm Exp $
d4 2
a5 1
DISTNAME=		clamav-0.87.1
@


1.8.2.4
log
@MFC:
Update to ClamAV 0.88.

SECURITY:  A possible heap overflow in the UPX code has been fixed.
The security of the UPX, FSG and Petite modules has been improved, too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.3 2005/11/09 19:53:35 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88
@


1.8.2.5
log
@security update to ClamAV 0.88.1.

1) An unspecified integer overflow error exists in the PE header parser
   in "libclamav/pe.c".
2) Some format string errors in the logging handling in
   "shared/output.c" may be exploited to execute arbitrary code.
3) An out-of-bounds memory access error in the "cli_bitset_test()"
   function in "ibclamav/others.c" may be exploited to cause a crash.

CVE reference: CVE-2006-1614, CVE-2006-1615, CVE-2006-1630
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.4 2006/01/11 07:27:43 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.1
@


1.8.2.6
log
@MFC:
Update to ClamAV 0.88.2

This release improves virus detection and fixes zip handling on 64-bit
architectures.

SECURITY
This release fixes a possible security problem in freshclam.
See http://www.clamav.net/security/0.88.2.html for a full security report.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.5 2006/04/07 19:11:43 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.2
@


1.8.2.7
log
@MFC:
security update to 0.88.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.6 2006/05/01 21:53:16 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.4
a38 1
			--mandir=${PREFIX}/man \
@


1.8.2.8
log
@MFC:
ClamAV 0.88.5

Security:
ClamAV 0.88.5 fixes a crash in the CHM unpacker and a heap overflow in
the function rebuilding PE files after unpacking.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.7 2006/08/20 10:11:17 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.5
@


1.7
log
@Update to ClamAV 0.86.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/06/29 10:12:09 mbalmer Exp $
d5 1
@


1.6
log
@Update to version 0.86.1 and add patches to fix problems on macppc (comparisons
that are always true due to char not being signed on this platform).

This update fixes a possible crash, see
http://sourceforge.net/project/shownotes.php?release_id=337279
for details.
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
DISTNAME=		clamav-0.86.1
d42 2
a43 1
			--with-dbdir=/var/db/clamav
@


1.5
log
@Update to version 0.85.1 which fixes a problem in email handling.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/05/12 14:55:21 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.85.1
d17 1
a17 1
WANTLIB=		c crypto pthread ssl wrap z
d46 2
a47 2
CONFIGURE_ENV+=		LDFLAGS=" -L${LOCALBASE}/lib" \
			CPPFLAGS="-I${LOCALBASE}/include"
@


1.4
log
@Update to ClamAV version 0.85
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
DISTNAME=		clamav-0.85
@


1.3
log
@Update to ClamAV version 0.83.
@
text
@d4 1
a4 1
DISTNAME=		clamav-0.83
@


1.3.2.1
log
@Security update to 0.86.2
http://www.security.nnov.ru/Jdocument282.html

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/02/21 09:36:29 mbalmer Exp $
d4 1
a4 1
DISTNAME=		clamav-0.86.2
d42 1
a42 2
			--with-dbdir=/var/db/clamav \
			--with-libcurl
d46 2
a47 2
CONFIGURE_ENV+=		LDFLAGS="-L/usr/lib -L${LOCALBASE}/lib" \
			CPPFLAGS="-I/usr/include -I${LOCALBASE}/include"
@


1.3.2.2
log
@updated packages for these ports where not build in a sane environment
bump PKGNAME for fixed packages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.1 2005/07/28 19:31:38 sturm Exp $
a4 1
PKGNAME=		${DISTNAME}p0
@


1.3.2.3
log
@MFC:
Update to version 0.87.

Notes: This version fixes vulnerabilities in handling of UPX and FSG compressed
executables. Support for PE files, Zip and Cabinet archives has been improved
and other small bugfixes have been made. The new option "--on-outdated-execute"
allows freshclam to run a command when system reports a new engine version.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.2 2005/08/31 19:51:41 sturm Exp $
d4 2
a5 1
DISTNAME=		clamav-0.87
@


1.3.2.4
log
@bump PKGNAMEs for new packages after libcurl update

discussed with pval
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.3 2005/09/28 17:37:57 sturm Exp $
a4 1
PKGNAME=		${DISTNAME}p0
@


1.3.2.5
log
@update to clamav 0.87.1, which fixes several security flaws
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.4 2005/10/27 20:06:08 sturm Exp $
d4 2
a5 1
DISTNAME=		clamav-0.87.1
@


1.3.2.6
log
@MFC:
Update to ClamAV 0.88.

SECURITY:  A possible heap overflow in the UPX code has been fixed.
The security of the UPX, FSG and Petite modules has been improved, too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.5 2005/11/09 19:53:14 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88
@


1.3.2.7
log
@security update to ClamAV 0.88.1.

1) An unspecified integer overflow error exists in the PE header parser
   in "libclamav/pe.c".
2) Some format string errors in the logging handling in
   "shared/output.c" may be exploited to execute arbitrary code.
3) An out-of-bounds memory access error in the "cli_bitset_test()"
   function in "ibclamav/others.c" may be exploited to cause a crash.

CVE reference: CVE-2006-1614, CVE-2006-1615, CVE-2006-1630
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.6 2006/01/11 07:23:25 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.1
@


1.3.2.8
log
@MFC:
Update to ClamAV 0.88.2

This release improves virus detection and fixes zip handling on 64-bit
architectures.

SECURITY
This release fixes a possible security problem in freshclam.
See http://www.clamav.net/security/0.88.2.html for a full security report.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.7 2006/04/07 19:11:19 sturm Exp $
d4 1
a4 1
DISTNAME=		clamav-0.88.2
@


1.2
log
@Upgrade to ClamAV 0.81 on popular request.

ok alek@@
@
text
@d4 1
a4 1
DISTNAME=		clamav-0.81
@


1.1
log
@Initial revision
@
text
@d4 1
a4 1
DISTNAME=		clamav-0.80
a53 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/clamav/html
	cd ${WRKSRC}/docs; ${INSTALL_DATA} html/* \
		${PREFIX}/share/doc/clamav/html
@


1.1.1.1
log
@Clam Antivirus is a free virus scanner with a command line scanner, a
scanning daemon (clamd), signature update from the net (freshclam), and
a sendmail-milter (clamav-milter).

ok alek@@
@
text
@@
