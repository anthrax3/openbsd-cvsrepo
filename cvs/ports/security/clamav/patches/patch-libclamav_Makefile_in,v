head	1.27;
access;
symbols
	OPENBSD_6_2:1.27.0.6
	OPENBSD_6_2_BASE:1.27
	OPENBSD_6_1:1.27.0.4
	OPENBSD_6_1_BASE:1.27
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.24.0.4
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.16.0.6
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.4
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.13.0.2
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.12.0.2
	OPENBSD_4_7_BASE:1.12
	OPENBSD_4_6:1.11.0.2
	OPENBSD_4_6_BASE:1.11
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.7.0.2
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_2:1.3.0.4
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.1.0.2
	OPENBSD_3_9_BASE:1.1;
locks; strict;
comment	@# @;


1.27
date	2016.05.04.07.12.55;	author sthen;	state Exp;
branches;
next	1.26;
commitid	J53wFHooa7ESNWSp;

1.26
date	2016.03.03.02.09.09;	author sthen;	state Exp;
branches;
next	1.25;
commitid	16NXswWD86phTvx1;

1.25
date	2015.12.01.23.25.09;	author sthen;	state Exp;
branches;
next	1.24;
commitid	5o109GD5tokNSy5t;

1.24
date	2015.04.29.21.27.39;	author sthen;	state Exp;
branches;
next	1.23;
commitid	cecxTKFMd5sMpaaO;

1.23
date	2014.11.19.00.18.01;	author sthen;	state Exp;
branches
	1.23.2.1;
next	1.22;
commitid	pdezdz7OMOBZNVdZ;

1.22
date	2014.05.08.08.18.51;	author sthen;	state Exp;
branches
	1.22.2.1;
next	1.21;

1.21
date	2014.01.15.13.06.47;	author jasper;	state Exp;
branches
	1.21.2.1;
next	1.20;

1.20
date	2013.09.20.15.23.01;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2013.04.23.20.34.16;	author sthen;	state Exp;
branches
	1.19.2.1;
next	1.18;

1.18
date	2013.03.15.15.10.06;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2012.08.04.14.24.23;	author espie;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2011.06.10.22.20.20;	author sthen;	state Exp;
branches
	1.16.6.1;
next	1.15;

1.15
date	2010.10.25.23.36.38;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.08.19.09.17.41;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2010.04.01.13.18.54;	author sthen;	state Exp;
branches
	1.13.2.1;
next	1.12;

1.12
date	2009.10.30.01.09.34;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2009.06.11.10.50.49;	author sthen;	state Exp;
branches
	1.11.2.1;
next	1.10;

1.10
date	2009.04.11.14.13.59;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2008.11.07.22.33.06;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2008.09.14.15.00.43;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2008.07.08.22.38.12;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2008.04.16.19.46.02;	author mbalmer;	state Exp;
branches;
next	1.5;

1.5
date	2007.12.30.22.42.39;	author bernd;	state dead;
branches;
next	1.4;

1.4
date	2007.08.25.10.08.28;	author mbalmer;	state Exp;
branches;
next	1.3;

1.3
date	2007.02.28.20.31.08;	author mbalmer;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2006.08.15.18.48.22;	author mbalmer;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2005.12.25.10.40.27;	author sturm;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2006.08.20.10.11.40;	author sturm;	state Exp;
branches;
next	1.1.2.2;

1.1.2.2
date	2007.03.16.21.31.20;	author sturm;	state Exp;
branches;
next	;

1.2.2.1
date	2007.03.16.22.12.34;	author sturm;	state Exp;
branches;
next	1.2.2.2;

1.2.2.2
date	2007.09.12.14.51.58;	author sturm;	state Exp;
branches;
next	;

1.3.2.1
date	2007.09.12.14.48.06;	author sturm;	state Exp;
branches;
next	;

1.11.2.1
date	2009.11.14.03.26.13;	author william;	state Exp;
branches;
next	;

1.13.2.1
date	2010.11.20.04.47.19;	author william;	state Exp;
branches;
next	;

1.16.6.1
date	2013.03.19.10.16.20;	author sthen;	state Exp;
branches;
next	;

1.17.2.1
date	2013.05.09.20.17.04;	author sthen;	state Exp;
branches;
next	;

1.19.2.1
date	2013.10.22.09.01.13;	author sthen;	state Exp;
branches;
next	1.19.2.2;

1.19.2.2
date	2014.01.17.21.09.11;	author jasper;	state Exp;
branches;
next	;

1.21.2.1
date	2014.05.08.08.44.42;	author sthen;	state Exp;
branches;
next	1.21.2.2;

1.21.2.2
date	2014.06.17.09.13.50;	author sthen;	state Exp;
branches;
next	;
commitid	cE4cmMu3TP6woNwS;

1.22.2.1
date	2014.11.19.00.20.46;	author sthen;	state Exp;
branches;
next	1.22.2.2;
commitid	DGem5UFIRRq0gSwq;

1.22.2.2
date	2015.01.28.15.15.32;	author sthen;	state Exp;
branches;
next	;
commitid	5gAPkX4w8fbgO0fn;

1.23.2.1
date	2015.05.04.09.47.40;	author sthen;	state Exp;
branches;
next	;
commitid	lKqIUm6HI2fa21hA;


desc
@@


1.27
log
@update to clamav-0.99.2
still using the bundled llvm, the one in devel/llvm is too new
@
text
@$OpenBSD: patch-libclamav_Makefile_in,v 1.26 2016/03/03 02:09:09 sthen Exp $
--- libclamav/Makefile.in.orig	Fri Apr 22 17:19:53 2016
+++ libclamav/Makefile.in	Wed May  4 00:09:31 2016
@@@@ -3743,6 +3743,9 @@@@ version.h: version.h.tmp
 	fi
 
 version.h.tmp:
+	touch version.h.tmp
+
+NOT-version.h.tmp:
 	$(AM_V_GEN) test -f version.h || touch version.h;\
 	rm -f $@@;\
 	REVISION="$$(LANG=C cd "$(top_srcdir)"; git describe --always 2>/dev/null || echo "exported")";\
@


1.26
log
@update to clamav-0.99.1
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.25 2015/12/01 23:25:09 sthen Exp $
--- libclamav/Makefile.in.orig	Wed Feb 24 23:05:59 2016
+++ libclamav/Makefile.in	Wed Mar  2 23:37:57 2016
@@@@ -3678,6 +3678,9 @@@@ version.h: version.h.tmp
@


1.25
log
@update to clamav-0.99
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.24 2015/04/29 21:27:39 sthen Exp $
--- libclamav/Makefile.in.orig	Tue Nov 24 21:43:19 2015
+++ libclamav/Makefile.in	Tue Dec  1 22:19:26 2015
@@@@ -3670,6 +3670,9 @@@@ version.h: version.h.tmp
@


1.24
log
@Update to ClamAV 0.98.7, including several crash/infinite loop fixes (CVEs)
and various improvements.

http://lists.clamav.net/pipermail/clamav-announce/2015/000011.html
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.23 2014/11/19 00:18:01 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Apr 23 17:02:34 2015
+++ libclamav/Makefile.in	Wed Apr 29 14:49:54 2015
@@@@ -3379,6 +3379,9 @@@@ version.h: version.h.tmp
@


1.23
log
@SECURITY update to clamav 0.98.5 (crash fixes for various maliciously crafted
files, improved detection of malicious PE files, new file formats)
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.22 2014/05/08 08:18:51 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Nov 13 22:31:31 2014
+++ libclamav/Makefile.in	Tue Nov 18 23:40:53 2014
@@@@ -3415,6 +3415,9 @@@@ version.h: version.h.tmp
@


1.23.2.1
log
@MFC: Update to ClamAV 0.98.7, including several crash/infinite loop fixes (CVEs)
and various improvements.

http://lists.clamav.net/pipermail/clamav-announce/2015/000011.html
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.24 2015/04/29 21:27:39 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Apr 23 17:02:34 2015
+++ libclamav/Makefile.in	Wed Apr 29 14:49:54 2015
@@@@ -3379,6 +3379,9 @@@@ version.h: version.h.tmp
@


1.22
log
@update to clamav 0.98.3 (there appears to have been no 0.98.2) - license is
updated to GPLv2 + openssl exemptions.

notably: "Change to circumvent possible denial of service when processing
icons within specially crafted PE files. Icon limits are now in place with
corresponding clamd and clamscan configuration parameters."

also:
- support for common raw disk image formats
- experimental support of OpenIOC files in the signature database location
  ("No OpenIOC files will be delivered through freshclam")
- IPv6 now supported on all network sockets
- use OpenSSL file hash functions
- improved detection of malware scripts within image files
- pattern matcher improvements
- opt-in collection of statistics (--enable-stats / StatsEnabled) - NOT default
- various other fixes and improvements

libclamav major bump.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.21 2014/01/15 13:06:47 jasper Exp $
--- libclamav/Makefile.in.orig	Tue May  6 19:59:44 2014
+++ libclamav/Makefile.in	Thu May  8 00:45:57 2014
@@@@ -3339,6 +3339,9 @@@@ version.h: version.h.tmp
@


1.22.2.1
log
@SECURITY update to clamav 0.98.5 (crash fixes for various maliciously crafted
files, improved detection of malicious PE files, new file formats)
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.23 2014/11/19 00:18:01 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Nov 13 22:31:31 2014
+++ libclamav/Makefile.in	Tue Nov 18 23:40:53 2014
@@@@ -3415,6 +3415,9 @@@@ version.h: version.h.tmp
@


1.22.2.2
log
@MFC SECURITY update to clamav 0.98.6
http://blog.clamav.net/2015/01/clamav-0986-has-been-released.html
@
text
@@


1.21
log
@- update to clamav-0.98.1

ok sthen@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.20 2013/09/20 15:23:01 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Jan 13 18:02:34 2014
+++ libclamav/Makefile.in	Wed Jan 15 11:01:06 2014
@@@@ -3156,6 +3156,9 @@@@ version.h: version.h.tmp
@


1.21.2.1
log
@MFC update to clamav 0.98.3 -

"Change to circumvent possible denial of service when processing icons
within specially crafted PE files. Icon limits are now in place with
corresponding clamd and clamscan configuration parameters."

libclamav major bump - ports with a library dependency (mail/dspam,
www/c-icap/modules, www/havp) will need rebuilding.

License is updated to GPLv2 + openssl exemptions.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.22 2014/05/08 08:18:51 sthen Exp $
--- libclamav/Makefile.in.orig	Tue May  6 19:59:44 2014
+++ libclamav/Makefile.in	Thu May  8 00:45:57 2014
@@@@ -3339,6 +3339,9 @@@@ version.h: version.h.tmp
@


1.21.2.2
log
@MFC update to clamav 0.98.4, fixes infinite loop in clamdscan when clamd
is not running (the fix for buffer underruns with multipart MIME was
already patched locally)
@
text
@@


1.20
log
@update to clamav 0.98:

- signature improvements, performance improvements, support for new file
types including ISO9660, Flash, self-extracting 7z files

- more configurable limits

- callbacks added to API

while there, drop run dependency on zoo; clamav actually switched from zoo
to unzoo (which we don't have in ports) in 0.60(!) so this was doing nothing.
@
text
@d1 4
a4 4
$OpenBSD$
--- libclamav/Makefile.in.orig	Mon Sep 16 20:28:14 2013
+++ libclamav/Makefile.in	Fri Sep 20 15:27:54 2013
@@@@ -3029,6 +3029,9 @@@@ version.h: version.h.tmp
@


1.19
log
@SECURITY update to ClamAV 0.97.8

"ClamAV 0.97.8 addresses several reported potential security bugs.
Thanks to Felix Groebert of the Google Security Team for finding and
reporting these issues."

- fixes in PE and autoit decoding
- off by one malloc in SIS format handler
- minor changes to freshclam
- add error checking in md5 (memcpy etc.)
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.18 2013/03/15 15:10:06 sthen Exp $
--- libclamav/Makefile.in.orig	Wed Apr 17 16:25:09 2013
+++ libclamav/Makefile.in	Tue Apr 23 20:43:02 2013
@@@@ -2346,6 +2346,9 @@@@ version.h: version.h.tmp
@


1.19.2.1
log
@Now that sparc64 is fixed, update clamav in 5.4 to 0.98 as requested by jasper@@.
No direct security fixes, but improvements in the scanning engine make this a
desirable update.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.20 2013/09/20 15:23:01 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Sep 16 20:28:14 2013
+++ libclamav/Makefile.in	Fri Sep 20 15:27:54 2013
@@@@ -3029,6 +3029,9 @@@@ version.h: version.h.tmp
@


1.19.2.2
log
@- update to clamav 0.98.1

ok sthen@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.19.2.1 2013/10/22 09:01:13 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Jan 13 18:02:34 2014
+++ libclamav/Makefile.in	Wed Jan 15 11:01:06 2014
@@@@ -3156,6 +3156,9 @@@@ version.h: version.h.tmp
@


1.18
log
@SECURITY update to ClamAV 0.97.7

"addresses several reported potential security bugs." (full details not
available yet, but there are some added checks for pointer out of bounds
in WWPack decompression).
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.17 2012/08/04 14:24:23 espie Exp $
--- libclamav/Makefile.in.orig	Mon Mar 11 15:23:20 2013
+++ libclamav/Makefile.in	Fri Mar 15 14:38:57 2013
@@@@ -2322,6 +2322,9 @@@@ version.h: version.h.tmp
@


1.17
log
@fix non-sensible libtool parameters, allows us to drop some very weird
libtool code.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.16 2011/06/10 22:20:20 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Jun  9 07:51:36 2011
+++ libclamav/Makefile.in	Thu Jun  9 10:55:20 2011
@@@@ -2323,6 +2323,9 @@@@ version.h: version.h.tmp
@


1.17.2.1
log
@MFC SECURITY update to ClamAV 0.97.8,

- fixes in PE and autoit decoding
- off by one malloc in SIS format handler
- out of bounds access in WWPack
- fixes in freshclam (zero a buffer before using for strings, and
receive error handling)

There are new/changed library functions, so would normally warrant a bump,
but as they're only internal use and to avoid rebuilding additional ports,
skipping the library bump here, as discussed with/OK jasper@@.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.17 2012/08/04 14:24:23 espie Exp $
--- libclamav/Makefile.in.orig	Wed Apr 17 16:25:09 2013
+++ libclamav/Makefile.in	Thu May  9 20:18:28 2013
@@@@ -2346,6 +2346,9 @@@@ version.h: version.h.tmp
@


1.16
log
@bugfix update to clamav 0.97.1
@
text
@d1 1
a1 1
$OpenBSD: patch-libclamav_Makefile_in,v 1.15 2010/10/25 23:36:38 sthen Exp $
a3 27
@@@@ -535,7 +535,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
 	jsparse/generated/keywords.h \
 	jsparse/future_reserved_words.list jsparse/keywords.list \
 	jsparse/special_keywords.list jsparse/operators.gperf
-@@ENABLE_UNRAR_TRUE@@libclamunrar_la_LDFLAGS = @@TH_SAFE@@ -version-info \
+@@ENABLE_UNRAR_TRUE@@libclamunrar_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamunrar_LTVERSION) \
 @@ENABLE_UNRAR_TRUE@@	@@LIBCLAMAV_VERSION@@ -no-undefined \
 @@ENABLE_UNRAR_TRUE@@	$(am__append_2)
 @@ENABLE_UNRAR_TRUE@@libclamunrar_la_SOURCES = \
@@@@ -559,7 +559,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
 
 @@ENABLE_UNRAR_TRUE@@libclamunrar_iface_la_LIBADD = libclamunrar.la
 @@ENABLE_UNRAR_TRUE@@libclamunrar_iface_la_LDFLAGS = -module @@TH_SAFE@@ \
-@@ENABLE_UNRAR_TRUE@@	-version-info @@LIBCLAMAV_VERSION@@ \
+@@ENABLE_UNRAR_TRUE@@	$(LIBclamunrar_iface_LTVERSION) @@LIBCLAMAV_VERSION@@ \
 @@ENABLE_UNRAR_TRUE@@	-no-undefined $(am__append_5)
 @@ENABLE_UNRAR_TRUE@@libclamunrar_iface_la_SOURCES = \
 @@ENABLE_UNRAR_TRUE@@	../libclamunrar_iface/unrar_iface.c \
@@@@ -616,7 +616,7 @@@@ libclamav_nocxx_la_SOURCES = bytecode_nojit.c
 libclamav_la_LIBADD = @@LIBLTDL@@ $(IFACELIBADD) $(LLVMLIBADD) libclamav_internal_utils.la @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@ @@LIBM@@
 libclamav_la_DEPENDENCIES = @@LTDLDEPS@@ $(IFACEDEP) $(LLVMDEP) libclamav_internal_utils.la
 libclamav_la_CFLAGS = -DSEARCH_LIBDIR=\"$(libdir)\"
-libclamav_la_LDFLAGS = @@TH_SAFE@@ -version-info @@LIBCLAMAV_VERSION@@ \
+libclamav_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamav_LTVERSION) @@LIBCLAMAV_VERSION@@ \
 	-no-undefined $(am__append_6)
 include_HEADERS = clamav.h
 libclamav_la_SOURCES = clamav.h matcher-ac.c matcher-ac.h matcher-bm.c \
@


1.16.6.1
log
@MFC (plus tweaks for test/regress and PERMIT_*) the clamav security update.
@
text
@d1 31
a31 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.18 2013/03/15 15:10:06 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Mar 11 15:23:20 2013
+++ libclamav/Makefile.in	Fri Mar 15 14:38:57 2013
@@@@ -2322,6 +2322,9 @@@@ version.h: version.h.tmp
@


1.15
log
@update ClamAV to 0.96.4.

as the release notes say, "a bugfix release recommended for all users"
(or as ChangeLog says, "fix stack smash")
@
text
@d1 3
a3 3
$OpenBSD: patch-libclamav_Makefile_in,v 1.14 2010/08/19 09:17:41 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Oct 25 16:52:31 2010
+++ libclamav/Makefile.in	Mon Oct 25 21:52:50 2010
d31 1
a31 1
@@@@ -2314,6 +2314,9 @@@@ version.h: version.h.tmp
@


1.14
log
@update ClamAV to 0.96.2; earlier version ok pea@@ (with some port
Makefile cleanup since then), feedback giovanni@@

- better performance and reduced memory use
- various other fixes and minor enhancements
- new pdf parser
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.13 2010/04/01 13:18:54 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Aug 12 17:42:28 2010
+++ libclamav/Makefile.in	Thu Aug 12 21:54:06 2010
@@@@ -534,7 +534,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
d13 1
a13 1
@@@@ -558,7 +558,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
d22 1
a22 1
@@@@ -615,7 +615,7 @@@@ libclamav_nocxx_la_SOURCES = bytecode_nojit.c
d31 1
a31 1
@@@@ -2303,6 +2303,9 @@@@ version.h: version.h.tmp
@


1.13
log
@update to 0.96, ok pea@@
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.12 2009/10/30 01:09:34 sthen Exp $
--- libclamav/Makefile.in.orig	Tue Feb 16 14:44:25 2010
+++ libclamav/Makefile.in	Wed Mar 10 21:30:41 2010
@@@@ -527,7 +527,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
d13 1
a13 1
@@@@ -551,7 +551,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
d22 1
a22 1
@@@@ -608,7 +608,7 @@@@ libclamav_nocxx_la_SOURCES = bytecode_nojit.c
d31 1
a31 1
@@@@ -2267,6 +2267,9 @@@@ version.h: version.h.tmp
@


1.13.2.1
log
@MFC:

- - -
date: 2010/10/25 23:36:38;  author: sthen;  state: Exp;  lines: +3 -3
update ClamAV to 0.96.4.

as the release notes say, "a bugfix release recommended for all users"
(or as ChangeLog says, "fix stack smash")
- - -

ok sthen
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.15 2010/10/25 23:36:38 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Oct 25 16:52:31 2010
+++ libclamav/Makefile.in	Mon Oct 25 21:52:50 2010
@@@@ -535,7 +535,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
d13 1
a13 1
@@@@ -559,7 +559,7 @@@@ EXTRA_DIST = c++/Makefile.nollvm.in $(am__append_4) re
d22 1
a22 1
@@@@ -616,7 +616,7 @@@@ libclamav_nocxx_la_SOURCES = bytecode_nojit.c
d31 1
a31 1
@@@@ -2314,6 +2314,9 @@@@ version.h: version.h.tmp
@


1.12
log
@update to 0.95.3, partly from pea@@.
@
text
@d1 5
a5 5
$OpenBSD: patch-libclamav_Makefile_in,v 1.11 2009/06/11 10:50:49 sthen Exp $
--- libclamav/Makefile.in.orig	Wed Oct 28 15:54:51 2009
+++ libclamav/Makefile.in	Thu Oct 29 16:33:55 2009
@@@@ -470,7 +470,7 @@@@ EXTRA_DIST = $(am__append_4) regex/engine.c libclamav.
 	jsparse/generated/operators.h jsparse/generated/keywords.h \
d13 1
a13 1
@@@@ -494,7 +494,7 @@@@ EXTRA_DIST = $(am__append_4) regex/engine.c libclamav.
d22 3
a24 3
@@@@ -543,7 +543,7 @@@@ libclamav_internal_utils_nothreads_la_CFLAGS = -DCL_NO
 libclamav_la_LIBADD = @@LIBLTDL@@ $(IFACELIBADD) lzma/liblzma.la libclamav_internal_utils.la @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
 libclamav_la_DEPENDENCIES = @@LTDLDEPS@@ $(IFACEDEP) libclamav_internal_utils.la
d31 1
a31 1
@@@@ -1830,6 +1830,9 @@@@ version.h: version.h.tmp
d38 1
a38 1
 	@@test -f version.h || touch version.h;\
d40 1
a40 1
 	REVISION="$$(LANG=C cd "$(top_srcdir)"; git describe --always 2>/dev/null)";\
@


1.11
log
@update to 0.95.2; ok giovanni@@

"This version improves handling of archives, adds support for --file-list
in clamscan and clamdscan, and fixes various issues found in previous
releases."
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.10 2009/04/11 14:13:59 sthen Exp $
--- libclamav/Makefile.in.orig	Wed Jun 10 17:40:16 2009
+++ libclamav/Makefile.in	Thu Jun 11 11:05:36 2009
@@@@ -424,7 +424,7 @@@@ EXTRA_DIST = $(am__append_4) regex/engine.c libclamav.
d13 1
a13 1
@@@@ -448,7 +448,7 @@@@ EXTRA_DIST = $(am__append_4) regex/engine.c libclamav.
d22 1
a22 1
@@@@ -497,7 +497,7 @@@@ libclamav_internal_utils_nothreads_la_CFLAGS = -DCL_NO
d31 10
@


1.11.2.1
log
@MFC:

Update to clamav-0.95.3, bugfixes

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.11 2009/06/11 10:50:49 sthen Exp $
--- libclamav/Makefile.in.orig	Wed Oct 28 15:54:51 2009
+++ libclamav/Makefile.in	Thu Oct 29 16:33:55 2009
@@@@ -470,7 +470,7 @@@@ EXTRA_DIST = $(am__append_4) regex/engine.c libclamav.
d13 1
a13 1
@@@@ -494,7 +494,7 @@@@ EXTRA_DIST = $(am__append_4) regex/engine.c libclamav.
d22 1
a22 1
@@@@ -543,7 +543,7 @@@@ libclamav_internal_utils_nothreads_la_CFLAGS = -DCL_NO
a30 10
@@@@ -1830,6 +1830,9 @@@@ version.h: version.h.tmp
 	fi
 
 version.h.tmp:
+	touch version.h.tmp
+
+NOT-version.h.tmp:
 	@@test -f version.h || touch version.h;\
 	rm -f $@@;\
 	REVISION="$$(LANG=C cd "$(top_srcdir)"; git describe --always 2>/dev/null)";\
@


1.10
log
@security update to 0.95.1. it doesn't build with ports-tree libtool,
so use the bundled one and mark with XXX until it can be fixed better.
commit requested by mbalmer (maintainer).
@
text
@d1 3
a3 3
$OpenBSD: patch-libclamav_Makefile_in,v 1.9 2008/11/07 22:33:06 sthen Exp $
--- libclamav/Makefile.in.orig	Tue Apr  7 18:56:26 2009
+++ libclamav/Makefile.in	Fri Apr 10 16:26:37 2009
d22 2
a23 1
@@@@ -498,6 +498,7 @@@@ libclamav_la_LIBADD = @@LIBLTDL@@ $(IFACELIBADD) lzma/li
d26 1
a26 1
 libclamav_la_LDFLAGS = @@TH_SAFE@@ -version-info @@LIBCLAMAV_VERSION@@ \
@


1.9
log
@update to 0.94.1; sundry fixes
ok mbalmer (maintainer)
@
text
@d1 25
a25 8
$OpenBSD: patch-libclamav_Makefile_in,v 1.8 2008/09/14 15:00:43 sthen Exp $
--- libclamav/Makefile.in.orig	Thu Oct 30 16:13:31 2008
+++ libclamav/Makefile.in	Fri Nov  7 02:31:12 2008
@@@@ -283,7 +283,7 @@@@ top_srcdir = @@top_srcdir@@
 SUBDIRS = lzma .
 AM_CPPFLAGS = -I$(top_srcdir) -I@@srcdir@@/nsis -I@@srcdir@@/lzma
 libclamav_la_LIBADD = lzma/liblzma.la @@CLAMAV_UNRAR_LIBS@@ @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
-libclamav_la_LDFLAGS = @@TH_SAFE@@ -version-info @@LIBCLAMAV_VERSION@@ \
d27 1
a27 1
 	-no-undefined $(am__append_1)
d29 1
a29 1
 libclamav_la_SOURCES = \
@


1.8
log
@SECURITY and other bug fixes.

- A vulnerability in ClamAV's chm-parser allowed remote attackers to
cause a denial of service (application crash) via a malformed CHM file
(CVE-2008-1389).

- A vulnerability in libclamav would allow attackers to cause a
denial of service via vectors related to an out-of-memory condition
(CVE-2008-3912).

- Multiple memory leaks were found in ClamAV that could possibly allow
attackers to cause a denial of service via excessive memory consumption
(CVE-2008-3913).

- A number of unspecified vulnerabilities in ClamAV were reported that
have an unknown impact and attack vectors related to file descriptor
leaks (CVE-2008-3914).

various OpenBSD patches rolled in upstream. thanks to sturm@@
for looking over systrace.filter (needed for the test of sendmsg()
in configure to enable FD passing).
@
text
@d1 5
a5 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.7 2008/07/08 22:38:12 sthen Exp $
--- libclamav/Makefile.in.orig	Mon Sep  1 18:19:50 2008
+++ libclamav/Makefile.in	Fri Sep  5 02:32:34 2008
@@@@ -275,7 +275,7 @@@@ SUBDIRS = lzma .
d7 1
a7 2
 @@ENABLE_UNRAR_FALSE@@libclamav_la_LIBADD = lzma/liblzma.la @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
 @@ENABLE_UNRAR_TRUE@@libclamav_la_LIBADD = $(top_builddir)/libclamunrar_iface/libclamunrar_iface.la lzma/liblzma.la @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
@


1.7
log
@update clamav to 0.93.3. possible SECURITY. since 0.93:

- fixes DoS with MailFollowURLs (CVE-2008-2713)
- improves handling of PDF, CAB, RTF, OLE2 and HTML files
and includes various bugfixes for 0.93 issues.

"if it works" mbalmer@@
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.6 2008/04/16 19:46:02 mbalmer Exp $
--- libclamav/Makefile.in.orig	Mon May 12 09:48:31 2008
+++ libclamav/Makefile.in	Thu Jun 12 17:31:46 2008
@@@@ -265,7 +265,7 @@@@ SUBDIRS = lzma .
@


1.6
log
@Update ClamAV to version 0.93, which fixes mostly security problems, at
least one highly critical (remote). See http://secunia.com/advisories/29000
for details.

Thanks to kurt@@ for helping analyzing the threaded code issues.
@
text
@d1 3
a3 3
$OpenBSD: patch-libclamav_Makefile_in,v 1.4 2007/08/25 10:08:28 mbalmer Exp $
--- libclamav/Makefile.in.orig	Wed Apr  9 17:55:30 2008
+++ libclamav/Makefile.in	Mon Apr 14 18:46:29 2008
d6 2
a7 2
 @@ENABLE_UNRAR_FALSE@@libclamav_la_LIBADD = @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@ lzma/liblzma.la
 @@ENABLE_UNRAR_TRUE@@libclamav_la_LIBADD = @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@ lzma/liblzma.la $(top_builddir)/libclamunrar_iface/libclamunrar_iface.la
@


1.5
log
@Security update to clamav-0.92. (CVE-2007-6335)

"ClamAV libclamav MEW PE File Integer Overflow Vulnerability"

More info:
http://labs.idefense.com/intelligence/vulnerabilities/display.php?id=634

Similar diff submitted by grunk@@ on ports@@.

test & ok mbalmer@@ (MAINTAINER)
@
text
@d2 9
a10 8
--- libclamav/Makefile.in.orig	Tue Aug 21 00:48:18 2007
+++ libclamav/Makefile.in	Sat Aug 25 09:35:06 2007
@@@@ -238,7 +238,7 @@@@ target_os = @@target_os@@
 target_vendor = @@target_vendor@@
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/unrar -I@@srcdir@@/nsis
 libclamav_la_LIBADD = @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
-libclamav_la_LDFLAGS = @@TH_SAFE@@ -version-info @@LIBCLAMAV_VERSION@@ -no-undefined
+libclamav_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamav_LTVERSION) @@LIBCLAMAV_VERSION@@ -no-undefined
a12 1
 	clamav.h \
@


1.4
log
@Update ClamAV to version 0.91.2.

Note to -stable ports maintainers:  This should probably be put into -stable
since the ClamAV people do not provide virus data to outdated scan engines.

ok simon
@
text
@d1 1
a1 1
$OpenBSD: patch-libclamav_Makefile_in,v 1.3 2007/02/28 20:31:08 mbalmer Exp $
@


1.3
log
@Update to ClamAV 0.90.  A lot of improvments and bugfixes, see www.clamav.net
for all details.

ok nikolay
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.2 2006/08/15 18:48:22 mbalmer Exp $
--- libclamav/Makefile.in.orig	Tue Feb 13 02:12:02 2007
+++ libclamav/Makefile.in	Wed Feb 14 08:33:02 2007
@@@@ -236,7 +236,7 @@@@ target_os = @@target_os@@
d6 1
a6 1
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/unrar
@


1.3.2.1
log
@MFC:
Update ClamAV to version 0.91.2

work done by ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.3 2007/02/28 20:31:08 mbalmer Exp $
--- libclamav/Makefile.in.orig	Tue Aug 21 00:48:18 2007
+++ libclamav/Makefile.in	Thu Aug 30 10:52:35 2007
@@@@ -238,7 +238,7 @@@@ target_os = @@target_os@@
d6 1
a6 1
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/unrar -I@@srcdir@@/nsis
@


1.2
log
@security update to 0.88.4
ok pvalchev
@
text
@d1 4
a4 4
$OpenBSD$
--- libclamav/Makefile.in.orig	Sat Jul  1 06:12:56 2006
+++ libclamav/Makefile.in	Mon Jul 31 00:10:52 2006
@@@@ -220,7 +220,7 @@@@ target_os = @@target_os@@
d6 2
a7 2
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/zziplib -I@@srcdir@@/mspack
 libclamav_la_LIBADD = @@LIBCLAMAV_LIBS@@
d9 1
a9 1
+libclamav_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamav_LTVERSION) -no-undefined
@


1.2.2.1
log
@MFC:
Update to ClamAV 0.90.  A lot of improvments and bugfixes, see www.clamav.net
for all details.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.3 2007/02/28 20:31:08 mbalmer Exp $
--- libclamav/Makefile.in.orig	Tue Feb 13 02:12:02 2007
+++ libclamav/Makefile.in	Wed Feb 14 08:33:02 2007
@@@@ -236,7 +236,7 @@@@ target_os = @@target_os@@
d6 2
a7 2
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/unrar
 libclamav_la_LIBADD = @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
d9 1
a9 1
+libclamav_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamav_LTVERSION) @@LIBCLAMAV_VERSION@@ -no-undefined
@


1.2.2.2
log
@MFC:
Update ClamAV to version 0.91.2

work done by ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.2.2.1 2007/03/16 22:12:34 sturm Exp $
--- libclamav/Makefile.in.orig	Tue Aug 21 00:48:18 2007
+++ libclamav/Makefile.in	Thu Aug 30 10:52:25 2007
@@@@ -238,7 +238,7 @@@@ target_os = @@target_os@@
d6 1
a6 1
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/unrar -I@@srcdir@@/nsis
@


1.1
log
@forgot these
@
text
@d2 3
a4 3
--- libclamav/Makefile.in.orig	Sun Dec 25 11:13:22 2005
+++ libclamav/Makefile.in	Sun Dec 25 11:13:45 2005
@@@@ -216,7 +216,7 @@@@ target_os = @@target_os@@
d9 1
a9 1
+libclamav_la_LDFLAGS = @@TH_SAFE@@ ${librealclamav_la_LDFLAGS} -no-undefined
@


1.1.2.1
log
@MFC:
security update to 0.88.4
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.2 2006/08/15 18:48:22 mbalmer Exp $
--- libclamav/Makefile.in.orig	Sat Jul  1 06:12:56 2006
+++ libclamav/Makefile.in	Mon Jul 31 00:10:52 2006
@@@@ -220,7 +220,7 @@@@ target_os = @@target_os@@
d9 1
a9 1
+libclamav_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamav_LTVERSION) -no-undefined
@


1.1.2.2
log
@MFC:
Update to ClamAV 0.90.  A lot of improvments and bugfixes, see www.clamav.net
for all details.
@
text
@d1 4
a4 4
$OpenBSD: patch-libclamav_Makefile_in,v 1.3 2007/02/28 20:31:08 mbalmer Exp $
--- libclamav/Makefile.in.orig	Tue Feb 13 02:12:02 2007
+++ libclamav/Makefile.in	Wed Feb 14 08:33:02 2007
@@@@ -236,7 +236,7 @@@@ target_os = @@target_os@@
d6 2
a7 2
 INCLUDES = -I$(top_srcdir) -I@@srcdir@@/unrar
 libclamav_la_LIBADD = @@LIBCLAMAV_LIBS@@ @@THREAD_LIBS@@
d9 1
a9 1
+libclamav_la_LDFLAGS = @@TH_SAFE@@ $(LIBclamav_LTVERSION) @@LIBCLAMAV_VERSION@@ -no-undefined
@


