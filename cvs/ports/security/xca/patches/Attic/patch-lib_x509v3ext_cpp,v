head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2015.02.07.21.52.57;	author sthen;	state dead;
branches;
next	1.1;
commitid	UWomgiGgnmhB6CCz;

1.1
date	2014.10.17.15.10.23;	author sthen;	state Exp;
branches
	1.1.2.1;
next	;
commitid	vfXtl8jCbRxkID34;

1.1.2.1
date	2014.10.17.15.11.50;	author sthen;	state Exp;
branches;
next	;
commitid	L8Oj4ivZjkoTXci3;


desc
@@


1.2
log
@update to xca 1.1.0. templates didn't seem to work in 0.9.3 previously (though
they have worked in the past); this fixes it for me.
@
text
@$OpenBSD: patch-lib_x509v3ext_cpp,v 1.1 2014/10/17 15:10:23 sthen Exp $

http://sourceforge.net/p/xca/patches/14/

--- lib/x509v3ext.cpp.orig	Fri Oct 17 15:58:32 2014
+++ lib/x509v3ext.cpp	Fri Oct 17 15:59:28 2014
@@@@ -27,6 +27,8 @@@@ x509v3ext::x509v3ext(const X509_EXTENSION *n)
 x509v3ext::x509v3ext(const x509v3ext &n)
 {
 	ext = NULL;
+	if (!n.isValid())
+		return;
 	set(n.ext);
 }
 
@@@@ -743,7 +745,7 @@@@ X509_EXTENSION *x509v3ext::get() const
 
 bool x509v3ext::isValid() const
 {
-	return ext->value->length > 0 &&
+	return ext && ext->value && ext->value->length > 0 &&
 		OBJ_obj2nid(ext->object) != NID_undef;
 }
 
@


1.1
log
@add xca patches from sf bugs; notably http://sourceforge.net/p/xca/patches/14/
which unbreaks it with openssl 1.0.1i's stricter OID checks
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@MFC fixes to security/xca which unbreak it with ssl libs in 5.6
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_x509v3ext_cpp,v 1.1 2014/10/17 15:10:23 sthen Exp $
@

