head	1.23;
access;
symbols
	OPENBSD_6_0:1.23.0.4
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.20.0.6
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.19.0.6
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.19.0.4
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.14.0.4
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.14
	OPENBSD_5_1:1.14.0.2
	OPENBSD_5_0:1.13.0.2
	OPENBSD_5_0_BASE:1.13
	OPENBSD_4_9:1.12.0.2
	OPENBSD_4_9_BASE:1.12
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.5.0.12
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.10
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.8
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.6
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.4
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.5.0.2
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.2.0.10
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.8
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.6
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.4
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	dons_2004-May-03:1.1.1.1
	dons:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2016.01.20.16.26.19;	author kili;	state Exp;
branches;
next	1.22;
commitid	JrsvN5R3csmF5YPN;

1.22
date	2015.12.20.11.33.36;	author kili;	state Exp;
branches;
next	1.21;
commitid	DHoYQIuYiaeHnHcf;

1.21
date	2015.09.20.18.29.21;	author kili;	state Exp;
branches;
next	1.20;
commitid	YIpoHDeex0RUDlIN;

1.20
date	2014.11.25.22.11.04;	author kili;	state Exp;
branches;
next	1.19;
commitid	V0txox7DxIvpkfks;

1.19
date	2013.07.18.22.32.09;	author kili;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.41.25;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.01.20.18.05.35;	author kili;	state Exp;
branches;
next	1.16;

1.16
date	2012.10.28.23.30.36;	author kili;	state Exp;
branches;
next	1.15;

1.15
date	2012.09.02.21.55.44;	author kili;	state Exp;
branches;
next	1.14;

1.14
date	2011.09.16.11.41.38;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2011.04.11.14.52.45;	author kili;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.20.17.22.43;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.28.13.53.51;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2010.07.17.13.43.37;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2010.06.15.17.18.51;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.06.10.06.45;	author kili;	state Exp;
branches;
next	1.7;

1.7
date	2010.05.19.15.58.21;	author kili;	state Exp;
branches;
next	1.6;

1.6
date	2010.04.22.21.58.53;	author kili;	state Exp;
branches;
next	1.5;

1.5
date	2007.08.01.22.02.18;	author kili;	state Exp;
branches;
next	1.4;

1.4
date	2007.07.21.17.21.33;	author kili;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.20.13.07.20;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.10.08.23.37;	author xsa;	state Exp;
branches;
next	1.1;

1.1
date	2004.05.03.07.36.32;	author dons;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.05.03.07.36.32;	author dons;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Bump after ghc changes.
@
text
@# $OpenBSD: Makefile,v 1.22 2015/12/20 11:33:36 kili Exp $

COMMENT =	Haskell cryptographic library
CATEGORIES =	security

V =		4.2.5.1
DISTNAME =	Crypto-$V
REVISION =	3
# Historically named with a lower case `c'.
PKGNAME =	hs-crypto-$V

MAINTAINER =	Matthias Kilian <kili@@openbsd.org>

# 3 different licenses from 3 authors: BSD, GPL, BSD-ish
PERMIT_PACKAGE_CDROM =	Yes

MODULES =		lang/ghc
MODGHC_BUILD =		cabal hackage haddock register

MODGHC_PACKAGE_KEY =	4LjED9guv4s3B9kPK56bwj

RUN_DEPENDS =		devel/hs-HUnit \
			devel/hs-QuickCheck>=2.4.0.1 \
			devel/hs-random
BUILD_DEPENDS =		${RUN_DEPENDS}

do-test:
.for t in HMACTest QuickTest RSATest SHA1Test SymmetricTest WordListTest
	cd ${WRKBUILD} && ./dist/build/$t/$t
.endfor

.include <bsd.port.mk>
@


1.22
log
@Adjust MODGHC_PACKAGE_KEY.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/09/20 18:29:21 kili Exp $
d8 1
a8 1
REVISION =	2
@


1.21
log
@Set MODGHC_PACKAGE_KEY and adjust plist.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/11/25 22:11:04 kili Exp $
d8 1
a8 1
REVISION =	1
d20 1
a20 1
MODGHC_PACKAGE_KEY =	e9d679e3d378e2518aed01b8b69ce058
@


1.20
log
@Update dependencies and plists and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/07/18 22:32:09 kili Exp $
d8 1
a8 1
REVISION =	0
d19 3
@


1.19
log
@Update to 4.2.5.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:41:25 espie Exp $
d8 1
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/01/20 18:05:35 kili Exp $
d6 2
a7 2
DISTNAME =	Crypto-4.2.5
REVISION =	1
d9 1
a9 2
PKGNAME =	${DISTNAME:S,C,hs-c,}
HOMEPAGE =	http://www.haskell.org/crypto/
@


1.17
log
@Regenerate plist for profiling libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2012/10/28 23:30:36 kili Exp $
a15 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d24 1
a24 1
do-regress:
@


1.16
log
@Move the @@exec and @@unexec lines running the {,un}register.sh scripts
and the line with the unregister.sh script down to the bottom of
the plist. Silences all the blurb about ".../*.haddock doesn't exist
or isn't a file."
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/09/02 21:55:44 kili Exp $
d7 1
a7 1
REVISION =	0
@


1.15
log
@Update to Crypto-4.2.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2011/09/16 11:41:38 espie Exp $
d7 1
@


1.14
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/04/11 14:52:45 kili Exp $
d6 1
a6 1
DISTNAME =	Crypto-4.2.1
a8 1
REVISION =	6
d22 2
a23 1
			devel/hs-QuickCheck>=2
@


1.13
log
@Tweak dependencies and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/20 17:22:43 espie Exp $
d9 1
a9 1
REVISION =	5
@


1.12
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/28 13:53:51 jasper Exp $
d9 1
a9 1
REVISION =	4
d21 2
a22 2
MODGHC_BUILD=		cabal hackage haddock register
LIB_DEPENDS +=		devel/hs-HUnit \
d24 1
a24 1
RUN_DEPENDS =		${LIB_DEPENDS}
@


1.11
log
@- regen plist after recent ghc.port.mk change
- adjust @@exec/@@unexec accordingly

"just go ahead" kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/17 13:43:37 kili Exp $
d22 2
a23 2
LIB_DEPENDS +=		::devel/hs-HUnit \
			:hs-QuickCheck->=2:devel/hs-QuickCheck
@


1.10
log
@Add LIB_DEPENDS to RUN_DEPENDS.
Switch to REVISION.
Bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/06/15 17:18:51 kili Exp $
d9 1
a9 1
REVISION =	3
a24 4

post-install:
	mv ${PREFIX}/share/${DISTNAME}/*.html ${PREFIX}/share/doc/${DISTNAME}
	rmdir ${PREFIX}/share/${DISTNAME}
@


1.9
log
@Bump after ghc update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/06/06 10:06:45 kili Exp $
d8 2
a9 1
PKGNAME =	${DISTNAME:S,C,hs-c,}p2
d24 1
@


1.8
log
@Bump after the stupid ABI changes in GHC.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/05/19 15:58:21 kili Exp $
d8 1
a8 1
PKGNAME =	${DISTNAME:S,C,hs-c,}p1
@


1.7
log
@Silent register.sh/unregister.sh after the change to Cabal in ghc.
Run unregister.sh with `--force'.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/04/22 21:58:53 kili Exp $
d8 1
a8 1
PKGNAME =	${DISTNAME:S,C,hs-c,}p0
@


1.6
log
@Update to hs-crypto-4.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/08/01 22:02:18 kili Exp $
d8 1
a8 1
PKGNAME =	${DISTNAME:S,C,hs-c,}
@


1.5
log
@
Don't use runhaskell and unbreak for amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/07/21 17:21:33 kili Exp $
d3 2
a4 2
COMMENT=	Haskell cryptographic library
CATEGORIES=	security
d6 4
a9 4
V=		3.0.3
DISTNAME=	Crypto-${V}
PKGNAME=	hs-crypto-${V}
HOMEPAGE=	http://www.haskell.org/crypto/
d11 1
a11 3
MAINTAINER=	Matthias Kilian <kili@@openbsd.org>

MASTER_SITES=	http://hackage.haskell.org/packages/archive/Crypto/${V}/
d14 9
a22 34
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MODULES=		lang/ghc
BUILD_DEPENDS+=		::devel/haddock
LIB_DEPENDS+=		::devel/hs-newbinary

SETUP_CONF_ARGS=	configure -g --prefix=${PREFIX} 
SETUP_CONF_ENV=		HOME=${PORTHOME} PATH=${PATH}
SETUP_PROG=		${WRKSRC}/Setup
SUBST_VARS=		V

do-configure:
	@@cd ${WRKSRC} && ghc --make -o ${SETUP_PROG} Setup.hs
	@@cd ${WRKBUILD} && exec ${SETENV} ${SETUP_CONF_ENV} \
		${SETUP_PROG} ${SETUP_CONF_ARGS}

do-build:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} build
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} haddock
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} register --gen-script
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} unregister --gen-script
	perl -pi -e 's!/share/${DISTNAME}/doc/html!/share/doc/${DISTNAME}!' \
		${WRKBUILD}/register.sh

do-install:
	@@cd ${WRKBUILD} && exec ${SETENV} ${MAKE_ENV} \
		${SETUP_PROG} copy --destdir=${DESTDIR}
d25 2
a26 5
	mv ${PREFIX}/share/${DISTNAME}/doc/html ${PREFIX}/share/doc/${DISTNAME}
	rm -rf ${PREFIX}/share/${DISTNAME}
.for f in register.sh unregister.sh
	${INSTALL_SCRIPT} ${WRKBUILD}/$f ${PREFIX}/lib/Crypto-${V}
.endfor
d29 2
a30 5
	cd ${WRKBUILD} && exec ${SETENV} HOME=${WRKDIR} PATH=${PATH} \
		${SETUP_PROG} register --inplace --user
.for t in BERTest RSATest SymmetricTest
	cd ${WRKBUILD} && ${SETENV} HOME=${WRKDIR} \
		ghc -o $t $t.hs -package Crypto && ./$t
@


1.4
log
@
Update to 3.0.3 to make it build with ghc-6.6.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/20 13:07:20 espie Exp $
d26 2
a27 2
SETUP_CONF_ENV=		HOME=${PORTHOME} \
			PATH=${PATH}
d31 3
a33 2
	@@cd ${WRKSRC} && exec ${SETENV} ${SETUP_CONF_ENV} \
		runhaskell Setup.hs ${SETUP_CONF_ARGS}
d37 1
a37 1
		runhaskell Setup.hs build
d39 1
a39 1
		runhaskell Setup.hs haddock
d41 1
a41 1
		runhaskell Setup.hs register --gen-script
d43 1
a43 1
		runhaskell Setup.hs unregister --gen-script
d49 1
a49 1
		runhaskell Setup.hs copy --destdir=${DESTDIR}
d60 1
a60 1
		runhaskell Setup.hs register --inplace --user
@


1.3
log
@fix a few obviously wrong dependencies, and remove extra shells in ghc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/08/10 08:23:37 xsa Exp $
d3 1
a3 1
COMMENT=	"Haskell cryptographic library"
d6 3
a8 4
V=		1.1.2
DISTNAME=	hs-crypto-${V}
MASTER_SITES=	${HOMEPAGE}/downloads/
MAINTAINER=	Don Stewart <dons@@openbsd.org>
a9 1
DISTFILES=	crypto-${V}.tar
d11 1
a11 2
MODULES=	lang/ghc
BUILD_DEPENDS+=	::devel/haddock
d13 1
a13 8
WRKDIST=	${WRKDIR}/crypto

USE_GMAKE=      Yes
MAKE_ENV+=	"WRKDIST=${WRKDIST}"
ALL_TARGET=

do-regress:
	@@cd ${WRKDIST} ; /bin/sh test.sh
d20 44
@


1.2
log
@
MODULES= lang/ghc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/05/03 07:36:32 dons Exp $
d23 1
a23 1
	@@(cd ${WRKDIST} ; /bin/sh test.sh)
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d13 1
a13 1
MODULES=	ghc
@


1.1.1.1
log
@Import hs-crypto-1.1.2

Haskell Cryptographic Library 1.1.2

This library collects together existing Haskell cryptographic functions
@
text
@@
