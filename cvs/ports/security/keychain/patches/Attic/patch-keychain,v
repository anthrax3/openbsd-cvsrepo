head	1.8;
access;
symbols
	OPENBSD_5_8:1.7.0.6
	OPENBSD_5_8_BASE:1.7
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_3_4:1.3.0.6
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.1.1.1.0.2
	OPENBSD_3_1_BASE:1.1.1.1
	nikolai:1.1.1.1
	keychain:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2016.01.28.15.08.45;	author sthen;	state dead;
branches;
next	1.7;
commitid	gHNor5HJpUWJs2H6;

1.7
date	2015.01.09.18.48.29;	author robert;	state Exp;
branches;
next	1.6;
commitid	y8eOE0eSVA6zRiL1;

1.6
date	2004.07.03.16.53.00;	author sturm;	state dead;
branches;
next	1.5;

1.5
date	2004.05.15.12.55.06;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2004.02.09.18.13.18;	author sturm;	state dead;
branches;
next	1.3;

1.3
date	2002.09.01.20.49.31;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2002.09.01.20.32.08;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.03.07.17.37.38;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.03.07.17.37.38;	author espie;	state Exp;
branches;
next	;


desc
@@


1.8
log
@update to keychain-2.8.2, revise DESCR
@
text
@$OpenBSD: patch-keychain,v 1.7 2015/01/09 18:48:29 robert Exp $
--- keychain.orig	Fri Jan  9 19:46:55 2015
+++ keychain	Fri Jan  9 19:46:57 2015
@@@@ -812,6 +812,11 @@@@ extract_fingerprints() {
                 #   1024 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 /home/barney/.ssh/id_dsa (DSA)
                 echo "$ef_line" | cut -f2 -d' '
                 ;;
+            *\ MD5:[0-9a-fA-F][0-9a-fA-F]:[0-9a-fA-F][0-9a-fA-F]:*)
+                # The new OpenSSH format with ssh-add -l -E md5
+		#   2048 MD5:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 /home/barney/.ssh/id_rsa (RSA)
+                echo "$ef_line" | cut -f2 -d' '
+                ;;
             *)
                 # Fall back to filename.  Note that commercial ssh is handled
                 # explicitly in ssh_l and ssh_f, so hopefully this rule will
@@@@ -827,7 +832,7 @@@@ extract_fingerprints() {
 # synopsis: ssh_l
 # Return space-separated list of known fingerprints
 ssh_l() {
-    sl_mylist=`ssh-add -l 2>/dev/null`
+    sl_mylist=`ssh-add -l -E md5 2>/dev/null`
     sl_retval=$?
 
     if $openssh; then
@@@@ -893,7 +898,7 @@@@ ssh_f() {
             warn "$sf_filename.pub missing; can't tell if $sf_filename is loaded"
             return 1
         fi
-        sf_fing=`ssh-keygen -l -f "$sf_filename.pub"` || return 1
+        sf_fing=`ssh-keygen -l -E md5 -f "$sf_filename.pub"` || return 1
         echo "$sf_fing" | extract_fingerprints
     else
         # can't get fingerprint for ssh2 so use filename *shrug*
@


1.7
log
@adopt to new ssh-add -l and ssh-keygen -l format
@
text
@d1 1
a1 1
$OpenBSD$
@


1.6
log
@maintenance update to keychain 2.3.3

noticed by @@xsa
@
text
@d1 22
a22 5
$OpenBSD: patch-keychain,v 1.5 2004/05/15 12:55:06 sturm Exp $
--- keychain.orig	2004-05-15 14:39:18.000000000 +0200
+++ keychain	2004-05-15 14:40:04.000000000 +0200
@@@@ -191,12 +191,12 @@@@ EXAMPLES
     This snippet would work in other Bourne-compatible shells:
d24 10
a33 12
         keychain id_rsa id_dsa
-        . ~/.keychain/`uname ${GREEN}-n${OFF}`-sh
+        . ~/.keychain/`uname -n`-sh
 
     This snippet would work in .login (for csh or tcsh):
 
         keychain id_rsa id_dsa
-        source \$HOME/.keychain/`uname ${GREEN}-n${OFF}`-csh
+        source \$HOME/.keychain/`uname -n`-csh
 
 NOTES
     Keychain is maintained by Aron Griffis <agriffis@@gentoo.org>. If you
@


1.5
log
@update to keychain 2.3.0, which is a complete rewrite

heads up by robert@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.4
log
@update to keychain 2.0.3
- bugfixes
- comes with manpage now
based on a diff from thuglife at bsd.hu (Robert Nagy)
@
text
@d1 15
a15 6
$OpenBSD: patch-keychain,v 1.3 2002/09/01 20:49:31 naddy Exp $
--- keychain.orig	Tue Aug 27 03:23:19 2002
+++ keychain	Sun Sep  1 22:51:16 2002
@@@@ -4,7 +4,7 @@@@
 # Author: Daniel Robbins <drobbins@@gentoo.org>
 # $Header: /cvs/ports/security/keychain/patches/patch-keychain,v 1.3 2002/09/01 20:49:31 naddy Exp $
d17 2
a18 32
-version=2.0.1
+version=2.0.2
 
 PATH="/sbin:/usr/sbin:${PATH}:/usr/ucb"; export PATH;
 
@@@@ -67,7 +67,7 @@@@ then
 
 Description:
 
- Keychain is an OpenSSH key manager, typically run from ~/.bash_profile.  When
+ Keychain is an OpenSSH key manager, typically run from ~/.profile.  When
  run, it will make sure ssh-agent is running; if not, it will start ssh-agent.
  It will redirect ssh-agent's output to ~/.keychain/[hostname]-sh, so that cron
  jobs that need to use ssh-agent keys can simply source this file and make the
@@@@ -78,7 +78,7 @@@@ Description:
  added by keychain.
 
  Typically, one uses keychain by adding the following to the top of their
- ~/.bash_profile (or ~/.zlogin, in case of zsh):
+ ~/.profile (or ~/.zlogin, in case of zsh):
 
 EOHELP
 	echo $E "  ${CYAN}keychain ~/.ssh/id_rsa ~/.ssh/id_dsa"
@@@@ -109,7 +109,7 @@@@ EOHELP
 	echo
 	cat <<EOHELP
  Tells keychain to delete all of ssh-agent's host keys.  Typically, This is
- used in the ~/.bash_profile.  The theory behind this is that keychain should
+ used in the ~/.profile.  The theory behind this is that keychain should
  assume that you are an intruder until proven otherwise.  However, while this
  option increases security, it still allows your cron jobs to use your ssh keys
  when you're logged out.
@


1.3
log
@Fix version number.
From: Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
@
text
@d1 1
a1 1
$OpenBSD: patch-keychain,v 1.2 2002/09/01 20:32:08 naddy Exp $
d6 1
a6 1
 # $Header: /home/cvsroot/gentoo-src/keychain/keychain,v 1.25 2002/08/26 20:25:24 drobbins Exp $
@


1.2
log
@Update to 2.0.2.
From: Nikolay Sturm <sturm@@sec.informatik.tu-darmstadt.de>
@
text
@d1 1
a1 1
$OpenBSD: patch-keychain,v 1.1.1.1 2002/03/07 17:37:38 espie Exp $
d3 10
a12 1
+++ keychain	Tue Aug 27 09:16:00 2002
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- keychain.orig	Wed Feb  6 14:04:15 2002
+++ keychain	Wed Feb  6 14:10:02 2002
@@@@ -122,7 +122,7 @@@@ cat <<EOHELP
d11 1
a11 1
  It will redirect ssh-agent's output to ~/.ssh-agent-[hostname], so that cron
d13 1
a13 1
@@@@ -133,7 +133,7 @@@@ Description:
d21 4
a24 4
 echo $E "  ${CYAN}keychain ~/.ssh/id_rsa ~/.ssh/id_dsa"
@@@@ -171,7 +171,7 @@@@ echo $E " ${GREEN}--clear${OFF}"
 echo
 cat <<EOHELP
@


1.1.1.1
log
@keychain is a simple script to simplify using ssh-agent under some
circumstance.

Port by Nikolai Sturm, trivially updated for keychain 1.9
@
text
@@
