head	1.3;
access;
symbols
	OPENBSD_6_1:1.2.0.12
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.10
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.6
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@ * @;


1.3
date	2017.07.12.23.46.30;	author sthen;	state Exp;
branches;
next	1.2;
commitid	HI5NhOqWaGe5SJSD;

1.2
date	2014.04.26.20.57.59;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.11.05.17.49.01;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@When creating rrdcached's /var/run directory in rc_pre, set ownership to
${daemon_user} rather than hardcoded _rrdcached.
@
text
@#!/bin/sh
#
# $OpenBSD: rrdcached.rc,v 1.2 2014/04/26 20:57:59 sthen Exp $

daemon="${TRUEPREFIX}/bin/rrdcached"
daemon_flags="-b /var/db/rrd -m 770 -l unix:/var/run/rrd/rrdcached.sock -j /var/db/rrd/journal -p /var/run/rrd/rrdcached.pid"
daemon_user="_rrdcached"

. /etc/rc.d/rc.subr

rc_reload=NO

rc_pre() {
	install -d -o ${daemon_user} -g _rrdcached -m 750 /var/run/rrd
}

rc_cmd $1
@


1.2
log
@set rrdcache control socket permissions to mode 770 by default in the rc script
@
text
@d3 1
a3 1
# $OpenBSD: rrdcached.rc,v 1.1 2013/11/05 17:49:01 sthen Exp $
d14 1
a14 1
	install -d -o _rrdcached -g _rrdcached -m 750 /var/run/rrd
@


1.1
log
@Update to rrdtool 1.4.8. Merge p5-RRD into the main package.

Note that this now uses cairo for graphics generation and pango/fontconfig
for text rendering; if you are using this in a chroot jail (for cgi/php
scripts, etc) you will need to take additional steps to install the relevant
files. A script is provided to copy the relevant libraries and support files;
see /usr/local/share/doc/pkg-readmes/rrdtool-1.4.8 for more details.
@
text
@d3 1
a3 1
# $OpenBSD$
d6 1
a6 1
daemon_flags="-b /var/db/rrd -l unix:/var/run/rrd/rrdcached.sock -j /var/db/rrd/journal -p /var/run/rrd/rrdcached.pid"
@

