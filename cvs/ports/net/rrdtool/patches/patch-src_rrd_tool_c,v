head	1.3;
access;
symbols
	OPENBSD_4_2:1.1.0.14
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.12
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.10
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.8
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.6
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.11.29.10.21.59;	author jca;	state Exp;
branches;
next	1.2;
commitid	R3R3jG80rVwl9pmA;

1.2
date	2007.09.12.14.34.36;	author msf;	state dead;
branches;
next	1.1;

1.1
date	2004.06.08.20.21.24;	author danh;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Fix some time_t warnings, potentially harmful on 32 bits archs.

ok sthen@@ (maintainer)
@
text
@$OpenBSD$

Correctly print time_t.

--- src/rrd_tool.c.orig	Tue Apr 19 17:52:26 2016
+++ src/rrd_tool.c	Tue Nov 29 09:55:58 2016
@@@@ -699,11 +699,11 @@@@ int HandleInputLine(
     else if (strcmp("resize", argv[1]) == 0)
         rrd_resize(argc - 1, &argv[1]);
     else if (strcmp("last", argv[1]) == 0)
-        printf("%ld\n", rrd_last(argc - 1, &argv[1]));
+        printf("%lld\n", (long long)rrd_last(argc - 1, &argv[1]));
     else if (strcmp("lastupdate", argv[1]) == 0) {
         rrd_lastupdate(argc - 1, &argv[1]);
     } else if (strcmp("first", argv[1]) == 0)
-        printf("%ld\n", rrd_first(argc - 1, &argv[1]));
+        printf("%lld\n", (long long)rrd_first(argc - 1, &argv[1]));
     else if (strcmp("update", argv[1]) == 0)
         rrd_update(argc - 1, &argv[1]);
     else if (strcmp("fetch", argv[1]) == 0) {
@@@@ -721,7 +721,7 @@@@ int HandleInputLine(
                 printf("%20s", ds_namv[i]);
             printf("\n\n");
             for (ti = start + step; ti <= end; ti += step) {
-                printf("%10lu:", ti);
+                printf("%10lld:", (long long)ti);
                 for (ii = 0; ii < ds_cnt; ii++)
                     printf(" %0.10e", *(datai++));
                 printf("\n");
@


1.2
log
@long overdue update to 1.2.23

remove TCL FLAVOUR
split perl bindings into a subpackage
provide python bindings as a subpackage
take maintainer

ok and 64 bit fixes sthen@@, ok jasper@@
@
text
@d1 7
a7 13
$OpenBSD: patch-src_rrd_tool_c,v 1.1 2004/06/08 20:21:24 danh Exp $
--- src/rrd_tool.c.orig	2004-04-06 17:38:15.000000000 -0400
+++ src/rrd_tool.c	2004-06-08 13:41:55.000000000 -0400
@@@@ -81,7 +81,7 @@@@ void PrintUsage(char *cmd)
 	   "\t\t[--units-length value]\n"	   
 	   "\t\t[--step seconds]\n"	   
 	   "\t\t[-f|--imginfo printfstr]\n"
-	   "\t\t[-a|--imgformat GIF|PNG]\n"
+	   "\t\t[-a|--imgformat PNG]\n"
 	   "\t\t[-c|--color COLORTAG#rrggbb] [-t|--title string]\n"
 	   "\t\t[DEF:vname=rrd:ds-name:CF]\n"
 	   "\t\t[CDEF:vname=rpn-expression]\n"
@@@@ -328,7 +328,7 @@@@ int HandleInputLine(int argc, char **arg
d9 1
a9 1
 	rrd_resize(argc-1, &argv[1]);
d11 7
a17 2
-        printf("%ld\n",rrd_last(argc-1, &argv[1]));
+        printf("%.0f\n",difftime(rrd_last(argc-1, &argv[1]), 0));
d19 1
a19 1
 	rrd_update(argc-1, &argv[1]);
d21 9
a29 21
@@@@ -366,9 +366,9 @@@@ int HandleInputLine(int argc, char **arg
 	  printf("<?xml version=\"1.0\" encoding=\"%s\"?>\n\n", XML_ENCODING);
 	  printf("<%s>\n", ROOT_TAG);
 	  printf("  <%s>\n", META_TAG);
-	  printf("    <%s>%lu</%s>\n", META_START_TAG, start, META_START_TAG);
+	  printf("    <%s>%.0f</%s>\n", META_START_TAG, difftime(start, 0), META_START_TAG);
 	  printf("    <%s>%lu</%s>\n", META_STEP_TAG, step, META_STEP_TAG);
-	  printf("    <%s>%lu</%s>\n", META_END_TAG, end, META_END_TAG);
+	  printf("    <%s>%.0f</%s>\n", META_END_TAG, difftime(end, 0), META_END_TAG);
 	  printf("    <%s>%lu</%s>\n", META_ROWS_TAG, row_cnt, META_ROWS_TAG);
 	  printf("    <%s>%lu</%s>\n", META_COLS_TAG, col_cnt, META_COLS_TAG);
 	  printf("    <%s>\n", LEGEND_TAG);
@@@@ -384,7 +384,7 @@@@ int HandleInputLine(int argc, char **arg
 	  printf("  <%s>\n", DATA_TAG);
 	  for (i = start; i <= end; i += step) {
 	    printf ("    <%s>", DATA_ROW_TAG);
-	    printf ("<%s>%lu</%s>", COL_TIME_TAG, i, COL_TIME_TAG);
+	    printf ("<%s>%.0f</%s>", COL_TIME_TAG, difftime(i, 0), COL_TIME_TAG);
 	    for (j = 0; j < col_cnt; j++) {
 	      rrd_value_t newval = DNAN;
 	      newval = *(ptr++);
@


1.1
log
@update to rrdtool 1.0.48
@
text
@d1 1
a1 1
$OpenBSD$
@

