head	1.5;
access;
symbols
	OPENBSD_6_1:1.5.0.4
	OPENBSD_6_1_BASE:1.5
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.4
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.1.1.1.0.4
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	sthen_20121304:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.04.17.09.14.26;	author landry;	state Exp;
branches;
next	1.4;
commitid	GV7AtX7xPUyae8N2;

1.4
date	2015.01.13.11.15.04;	author sthen;	state Exp;
branches;
next	1.3;
commitid	mwRWZxGf4UsCDO3v;

1.3
date	2014.03.24.21.46.16;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2013.04.01.21.37.28;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.13.14.14.21;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.04.13.14.14.21;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to sslh 1.18, from MAINTAINER Bjorn Ketelaars
@
text
@$OpenBSD: patch-Makefile,v 1.4 2015/01/13 11:15:04 sthen Exp $
--- Makefile.orig	Fri Feb  5 16:46:47 2016
+++ Makefile	Sat Mar 19 20:27:50 2016
@@@@ -12,58 +12,23 @@@@ PREFIX?=/usr
 BINDIR?=$(PREFIX)/sbin
 MANDIR?=$(PREFIX)/share/man/man8
 
-MAN=sslh.8.gz	# man page name
+MAN=sslh.8	# man page name
 
 # End of configuration -- the rest should take care of
 # itself
 
-ifneq ($(strip $(COV_TEST)),)
-    CFLAGS_COV=-fprofile-arcs -ftest-coverage
-endif
-
 CC ?= gcc
 CFLAGS ?=-Wall -g $(CFLAGS_COV)
 
 LIBS=
 OBJS=common.o sslh-main.o probe.o tls.o
 
-ifneq ($(strip $(USELIBWRAP)),)
-	LIBS:=$(LIBS) -lwrap
-	CPPFLAGS+=-DLIBWRAP
-endif
-
-ifneq ($(strip $(ENABLE_REGEX)),)
-	CPPFLAGS+=-DENABLE_REGEX
-endif
-
-ifneq ($(strip $(USELIBPCRE)),)
-	CPPFLAGS+=-DLIBPCRE
-	LIBS:=$(LIBS) -lpcre
-endif
-
-ifneq ($(strip $(USELIBCONFIG)),)
-	LIBS:=$(LIBS) -lconfig
-	CPPFLAGS+=-DLIBCONFIG
-endif
-
-ifneq ($(strip $(USELIBCAP)),)
-	LIBS:=$(LIBS) -lcap
-	CPPFLAGS+=-DLIBCAP
-endif
-
-ifneq ($(strip $(USESYSTEMD)),)
-        LIBS:=$(LIBS) -lsystemd
-        CPPFLAGS+=-DSYSTEMD
-endif
-
-
 all: sslh $(MAN) echosrv
 
 .c.o: *.h
 	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<
 
 version.h:
-	./genver.sh >version.h
 
 sslh: sslh-fork sslh-select
 
@@@@ -82,7 +47,7 @@@@ echosrv: $(OBJS) echosrv.o
 	$(CC) $(CFLAGS) $(LDFLAGS) -o echosrv echosrv.o probe.o common.o tls.o $(LIBS)
 
 $(MAN): sslh.pod Makefile
-	pod2man --section=8 --release=$(VERSION) --center=" " sslh.pod | gzip -9 - > $(MAN)
+	pod2man --section=8 --release=$(VERSION) --center=" " sslh.pod > $(MAN)
 
 # Create release: export clean tree and tag current
 # configuration
@


1.4
log
@update to sslh 1.16, from Björn Ketelaars (maintainer), tweak from me ok björn
@
text
@d1 6
a6 6
$OpenBSD$
--- Makefile.orig	Tue Feb 11 21:06:01 2014
+++ Makefile	Mon Jan 12 23:29:39 2015
@@@@ -7,43 +7,23 @@@@ USELIBCAP=	# Use libcap?
 COV_TEST= 	# Perform test coverage?
 PREFIX=/usr/local
d22 1
a22 1
 OBJS=common.o sslh-main.o probe.o
d29 9
d48 6
d64 2
a65 2
@@@@ -59,7 +39,7 @@@@ echosrv: $(OBJS) echosrv.o
 	$(CC) $(CFLAGS) $(LDFLAGS) -o echosrv echosrv.o probe.o common.o $(LIBS)
@


1.3
log
@
Disable libwrap support.

Ok Bjorn Ketelaars (maintainer)
@
text
@d1 4
a4 7
--- Makefile.orig	Sat Jul 27 16:25:04 2013
+++ Makefile	Mon Mar 24 18:28:02 2014
@@@@ -2,35 +2,20 @@@@
 
 VERSION="1.15"
 USELIBCONFIG=1	# Use libconfig? (necessary to use configuration files)
-USELIBWRAP=	# Use libwrap?
d21 1
a21 1
 LIBS=$(LDFLAGS)
d26 1
a26 1
-	CFLAGS:=$(CFLAGS) -DLIBWRAP
d31 6
a36 1
-	CFLAGS:=$(CFLAGS) -DLIBCONFIG
d42 9
a50 2
@@@@ -51,7 +36,7 @@@@ echosrv: $(OBJS) echosrv.o
 	$(CC) $(CFLAGS) -o echosrv echosrv.o probe.o common.o $(LIBS)
@


1.2
log
@update to sslh 1.14, from Bjorn Ketelaars.
@
text
@d1 7
a7 3
--- Makefile.orig	Sat Dec 15 16:29:38 2012
+++ Makefile	Tue Mar  5 19:29:11 2013
@@@@ -6,31 +6,17 @@@@ USELIBWRAP=	# Use libwrap?
d40 1
a40 1
@@@@ -51,7 +37,7 @@@@ echosrv: $(OBJS) echosrv.o
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- Makefile.orig	Sat Nov 26 19:06:58 2011
+++ Makefile	Fri Mar 23 19:53:40 2012
@@@@ -5,26 +5,19 @@@@
d17 2
a18 2
 CC = gcc
-CFLAGS=-Wall -g $(CFLAGS_COV)
d20 2
a21 3
 #LIBS=-lnet
 LIBS=
 OBJS=common.o sslh-main.o
d27 6
a32 3
+LIBS:=$(LIBS) -lwrap
+CFLAGS:=$(CFLAGS) -Wall -DLIBWRAP
 
d35 3
a37 2
@@@@ -46,7 +39,7 @@@@
 	$(CC) $(CFLAGS) -o echosrv echosrv.o common.o $(LIBS)
d43 2
a44 7
 # generic install: install binary and man page
 install: sslh $(MAN)
@@@@ -72,4 +65,3 @@@@
 
 test:
 	./t
-
@


1.1.1.1
log
@import ports/net/sslh: from Bjorn Ketelaars, merging in a previous port
from fgsch. ok okan@@

sslh accepts HTTPS, SSH, OpenVPN, tinc and XMPP connections on the
same port. This makes it possible to connect to any of these servers
on port 443 (e.g. from inside a corporate firewall, which almost
never block port 443) while still serving HTTPS on that port.
@
text
@@
