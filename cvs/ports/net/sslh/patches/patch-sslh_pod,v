head	1.6;
access;
symbols
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.4
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	sthen_20121304:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2016.04.17.09.14.26;	author landry;	state Exp;
branches;
next	1.5;
commitid	GV7AtX7xPUyae8N2;

1.5
date	2015.03.15.12.26.16;	author sthen;	state Exp;
branches;
next	1.4;
commitid	w3RMO15j3Zohz5IQ;

1.4
date	2015.01.13.11.15.04;	author sthen;	state Exp;
branches;
next	1.3;
commitid	mwRWZxGf4UsCDO3v;

1.3
date	2013.04.01.21.37.28;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.04.22.20.50.12;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.13.14.14.21;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.04.13.14.14.21;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.6
log
@Update to sslh 1.18, from MAINTAINER Bjorn Ketelaars
@
text
@$OpenBSD: patch-sslh_pod,v 1.5 2015/03/15 12:26:16 sthen Exp $
--- sslh.pod.orig	Tue Jul 28 15:14:21 2015
+++ sslh.pod	Mon Sep 21 12:15:48 2015
@@@@ -26,17 +26,14 @@@@ Hence B<sslh> acts as a protocol demultiplexer, or a
 switchboard. Its name comes from its original function to
 serve SSH and HTTPS on the same port.
 
-=head2 Libwrap support
+B<sslh> comes in two versions: B<sslh-fork> forks a new process 
+for each incoming connection. It is well-tested and very
+reliable, but incurs the overhead of many processes. B<sslh-select>
+uses only one thread, which monitors all connections at once.
+It is more recent and less tested, but only incurs a 16 byte
+overhead per connection. Also, if it stops, you'll lose all
+connections, which means you can't upgrade it remotely.
 
-One drawback of B<sslh> is that the servers do not see the
-original IP address of the client anymore, as the connection
-is forwarded through B<sslh>.
-
-For this reason, B<sslh> can be compiled with B<libwrap> to
-check accesses defined in F</etc/hosts.allow> and
-F</etc/hosts.deny>.  Libwrap services can be defined using
-the configuration file.
-
 =head2 Configuration file
 
 A configuration file can be supplied to B<sslh>. Command
@@@@ -203,24 +200,6 @@@@ Runs in background. This overrides B<foreground> if se
 the configuration file (or on the command line, but there is
 no point setting both on the command line unless you have a
 personality disorder).
-
-=back
-
-=head1 FILES
-
-=over 4
-
-=item F</etc/init.d/sslh>
-
-Start-up script. The standard actions B<start>, B<stop> and
-B<restart> are supported.
-
-=item F</etc/default/sslh>
-
-Server configuration. These are environment variables
-loaded by the start-up script and passed to B<sslh> as
-command-line arguments. Refer to the OPTIONS section for a
-detailed explanation of the variables used by B<sslh>.
 
 =back
 
@


1.5
log
@update to sslh-1.17, including fix to do a setgroups() before setgid()
from maintainer Bjorn Ketelaars
@
text
@d1 3
a3 3
$OpenBSD: patch-sslh_pod,v 1.4 2015/01/13 11:15:04 sthen Exp $
--- sslh.pod.orig	Mon Mar  9 21:51:39 2015
+++ sslh.pod	Wed Mar 11 15:29:21 2015
d29 1
a29 1
@@@@ -207,24 +204,6 @@@@ Runs in background. This overrides B<foreground> if se
@


1.4
log
@update to sslh 1.16, from Björn Ketelaars (maintainer), tweak from me ok björn
@
text
@d1 3
a3 3
$OpenBSD: patch-sslh_pod,v 1.3 2013/04/01 21:37:28 sthen Exp $
--- sslh.pod.orig	Tue Feb 11 22:06:01 2014
+++ sslh.pod	Thu May  8 13:16:47 2014
d29 1
a29 1
@@@@ -188,24 +185,6 @@@@ Runs in background. This overrides B<foreground> if se
@


1.3
log
@update to sslh 1.14, from Bjorn Ketelaars.
@
text
@d1 3
a3 3
$OpenBSD$
--- sslh.pod.orig	Sat Dec 15 16:29:38 2012
+++ sslh.pod	Tue Mar  5 19:15:23 2013
d29 1
a29 1
@@@@ -187,24 +184,6 @@@@ Runs in background. This overrides B<foreground> if se
@


1.2
log
@update to sslh 1.11; from Björn Ketelaars

note, if you set sslh_flags in rc.conf.local you'll need to add --user=_sslh
@
text
@d1 6
a6 11
--- sslh.pod.orig	Sat Apr 21 18:34:14 2012
+++ sslh.pod	Sun Apr 22 09:45:36 2012
@@@@ -16,12 +16,19 @@@@
 inside a corporate firewall, which almost never block port
 443) while still serving HTTPS on that port. 
 
-
 The idea is to have B<sslh> listen to the external 443 port,
 accept the incoming connections, work out what type of
 connection it is, and then fordward to the appropriate
 server.
d8 1
a15 2
+
 =head2 Protocol detection
d17 3
a19 6
 The protocol detection is made based on the first bytes sent
@@@@ -45,17 +52,6 @@@@
 provides, and connects it to the SSH server if it starts
 with "SSH-", or connects it to the SSL server otherwise.
 
-=head2 Libwrap support
d21 4
a24 8
-One drawback of B<sslh> is that the B<ssh> and B<httpd>
-servers do not see the original IP address of the client
-anymore, as the connection is forwarded through B<sslh>.
-B<sslh> provides enough logging to circumvent that problem.
-However it is common to limit access to B<ssh> using
-B<libwrap> or B<tcpd>. For this reason, B<sslh> can be
-compiled to check SSH accesses against SSH access lists as
-defined in F</etc/hosts.allow> and F</etc/hosts.deny>.
d26 1
a26 1
 =head1 OPTIONS
d28 5
a32 5
 =over 4
@@@@ -140,24 +136,6 @@@@
 Runs in foreground. The server will not fork and will remain connected
 to the terminal. Messages normally sent to B<syslog> will also be sent
 to I<stderr>.
@


1.1
log
@Initial revision
@
text
@d1 2
a2 2
--- sslh.pod.orig	Sat Nov 26 22:15:31 2011
+++ sslh.pod	Fri Mar 23 19:50:40 2012
d4 2
a5 2
 firewall, which almost never block port 443) while still
 serving HTTPS on that port. 
d42 1
a42 17
@@@@ -124,13 +120,12 @@@@
 =item B<-u> I<username>, B<--user> I<username>
 
 Requires to run under the specified username. Defaults to
-I<nobody> (which is not perfect -- ideally B<sslh> should
-run under its own UID).
+I<_sslh>.
 
 =item B<-P> I<pidfile>, B<--pid-file> I<pidfile>
 
 Specifies the file in which to write the PID of the main
-server. Defaults to I</var/run/sslh.pid>.
+server. Defaults to I</var/run/sslh/sslh.pid>.
 
 =item B<-i>, B<--inetd>
 
@@@@ -142,24 +137,6 @@@@
@


1.1.1.1
log
@import ports/net/sslh: from Bjorn Ketelaars, merging in a previous port
from fgsch. ok okan@@

sslh accepts HTTPS, SSH, OpenVPN, tinc and XMPP connections on the
same port. This makes it possible to connect to any of these servers
on port 443 (e.g. from inside a corporate firewall, which almost
never block port 443) while still serving HTTPS on that port.
@
text
@@
