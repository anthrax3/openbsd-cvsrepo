head	1.2;
access;
symbols
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2003.08.22.11.18.19;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2002.07.26.15.12.17;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 1.6.3; from Ian McWilliam <ianm@@cit.uws.edu.au>
@
text
@$OpenBSD: patch-etc_afpd_enumerate_c,v 1.1 2002/07/26 15:12:17 naddy Exp $
--- etc/afpd/enumerate.c.orig	Thu Jul 25 13:40:39 2002
+++ etc/afpd/enumerate.c	Thu Jul 25 13:43:34 2002
@@@@ -327,6 +327,7 @@@@ int		ibuflen, *rbuflen;
         if ( stat( sd.sd_last, &st ) < 0 ) {
             syslog( LOG_DEBUG, "afp_enumerate: stat %s: %s",
                     sd.sd_last, strerror(errno) );
+	    *sd.sd_last = 0;
             sd.sd_last += len + 1;
             continue;
         }
@


1.1
log
@Fix a lot of problem with afpd.
From maintainer Ian McWilliam <i.mcwilliam@@uws.edu.au>.
@
text
@d1 1
a1 1
$OpenBSD$
@

