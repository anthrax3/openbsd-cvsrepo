head	1.3;
access;
symbols
	OPENBSD_4_0:1.2.0.14
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.12
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.10
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.8
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.1.1.1.0.4
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.2
	OPENBSD_3_2_BASE:1.1.1.1
	naddy_20020723:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2006.09.22.05.56.25;	author pvalchev;	state dead;
branches;
next	1.2;

1.2
date	2003.08.22.11.18.19;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.23.11.52.12;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.07.23.11.52.12;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to netatalk-2.0.3 and get rid of old directory structure.
A long due update with important features such as long filenames,
unicode, etc.
From new maintainer "Arnaud Bergeron" <abergeron@@gmail.com>
@
text
@$OpenBSD: patch-etc_atalkd_main_c,v 1.2 2003/08/22 11:18:19 naddy Exp $
--- etc/atalkd/main.c.orig	Sat Oct  5 23:20:13 2002
+++ etc/atalkd/main.c	Fri Jan  3 03:51:16 2003
@@@@ -278,12 +278,12 @@@@ static void as_timer(int sig)
 		    LOG(log_info, logtype_atalkd, "config for no router" );
 		      
 		    if ( iface->i_flags & IFACE_PHASE2 ) {
-			iface->i_rt->rt_firstnet = 0;
+			iface->i_rt->rt_firstnet = htons(1);
 			iface->i_rt->rt_lastnet = htons( STARTUP_LASTNET );
 			setaddr( iface, IFACE_PHASE2,
 				iface->i_addr.sat_addr.s_net,
 				iface->i_addr.sat_addr.s_node,
-				0, htons( STARTUP_LASTNET ));
+				htons(1), htons( STARTUP_LASTNET ));
 		    }
 		    if ( looproute( iface, RTMP_ADD ) ) { /* -1 or 1 */
 			LOG(log_error, logtype_atalkd,
@@@@ -376,15 +376,15 @@@@ static void as_timer(int sig)
 
 		    LOG(log_info, logtype_atalkd, "as_timer last gateway down" );
 
-		    /* Set netrange to 0-fffe.  */
+		    /* Set netrange to 1-fffe.  */
 		    if ( gate->g_iface->i_flags & IFACE_PHASE2 ) {
-			gate->g_iface->i_rt->rt_firstnet = 0;
+			gate->g_iface->i_rt->rt_firstnet = htons(1);
 			gate->g_iface->i_rt->rt_lastnet =
 				htons( STARTUP_LASTNET );
 			setaddr( iface, IFACE_PHASE2,
 				iface->i_addr.sat_addr.s_net,
 				iface->i_addr.sat_addr.s_node,
-				0, htons( STARTUP_LASTNET ));
+				htons(1), htons( STARTUP_LASTNET ));
 		    }
 		}
 		continue;
@


1.2
log
@update to 1.6.3; from Ian McWilliam <ianm@@cit.uws.edu.au>
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Initial revision
@
text
@d2 4
a5 4
--- etc/atalkd/main.c.orig	Sat Jun 15 04:22:01 2002
+++ etc/atalkd/main.c	Sat Jun 15 04:25:31 2002
@@@@ -274,12 +274,12 @@@@ void as_timer(void)
 		    syslog( LOG_INFO, "config for no router" );
d18 2
a19 2
 			syslog( LOG_ERR,
@@@@ -372,15 +372,15 @@@@ void as_timer(void)
d21 1
a21 1
 		    syslog( LOG_INFO, "as_timer last gateway down" );
@


1.1.1.1
log
@Import netatalk 1.5.3.1.
Submitted by Ian McWilliam <i.mcwilliam@@uws.edu.au>.

AFP file and print services for AppleTalk/IP networks
@
text
@@
