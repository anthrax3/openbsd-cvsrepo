head	1.31;
access;
symbols
	OPENBSD_5_8:1.30.0.10
	OPENBSD_5_8_BASE:1.30
	OPENBSD_5_7:1.30.0.6
	OPENBSD_5_7_BASE:1.30
	OPENBSD_5_6:1.30.0.4
	OPENBSD_5_6_BASE:1.30
	OPENBSD_5_5:1.30.0.2
	OPENBSD_5_5_BASE:1.30
	OPENBSD_5_4:1.27.0.2
	OPENBSD_5_4_BASE:1.27
	OPENBSD_5_3:1.25.0.6
	OPENBSD_5_3_BASE:1.25
	OPENBSD_5_2:1.25.0.4
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.2
	OPENBSD_5_0:1.22.0.2
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.15.0.2
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.13.0.6
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.13.0.4
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.2
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.12.0.4
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.12.0.2
	OPENBSD_4_3_BASE:1.12
	OPENBSD_4_2:1.10.0.2
	OPENBSD_4_2_BASE:1.10
	OPENBSD_4_1:1.6.0.2
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.4.0.6
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.4
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.2
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	naddy_20050125:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2015.09.11.20.32.19;	author sthen;	state dead;
branches;
next	1.30;
commitid	VTnrJXQDx3PuENeG;

1.30
date	2013.10.31.21.12.13;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2013.10.16.15.04.08;	author bluhm;	state Exp;
branches;
next	1.28;

1.28
date	2013.08.15.09.21.10;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2013.03.11.11.35.58;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2011.11.16.00.20.09;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2011.08.21.09.23.54;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.08.18.19.22.31;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2011.07.12.19.54.12;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2011.07.12.16.25.47;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.07.11.12.26.20;	author jasper;	state Exp;
branches;
next	1.19;

1.19
date	2011.06.08.18.00.50;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2011.06.06.13.02.45;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.19.22.31.39;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.09.24.10.55.23;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.04.21.22.10.21;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2010.03.20.23.09.28;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2009.01.15.10.14.19;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2008.01.04.18.38.51;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2007.09.15.22.37.00;	author merdely;	state Exp;
branches;
next	1.10;

1.10
date	2007.06.09.16.45.50;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2007.03.30.19.23.46;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2007.03.25.21.50.20;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2007.03.22.17.19.09;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2006.12.05.21.59.57;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2006.10.18.23.18.02;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2005.04.17.19.25.53;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2005.02.26.16.57.48;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.01.30.19.48.02;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2005.01.25.21.19.22;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.01.25.21.19.22;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.31
log
@Remove xorp, the version we have is rather outdated and has at least some
format string problems. the latest version upstream uses scons so would be a
new port anyway, and is still several years old. ok mpi pascal, no objection
from naddy who originally imported it.
@
text
@# $OpenBSD: Makefile,v 1.30 2013/10/31 21:12:13 sthen Exp $

COMMENT-main=	eXtensible Open Router Platform

VERSION=	1.6
DISTNAME=	xorp-${VERSION}
PKGNAME-main=	${DISTNAME}
REVISION-main=	4
CATEGORIES=	net
HOMEPAGE=	http://www.xorp.org/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	http://www.xorp.org/releases/${VERSION}/ \
		http://www2.xorp.org/releases/${VERSION}/ \
		http://www3.xorp.org/releases/${VERSION}/

MULTI_PACKAGES=	-main
PREFIX=		${LOCALBASE}/xorp
PREFIX-main=	${LOCALBASE}

WANTLIB=	c crypto curses m pcap stdc++

USE_GMAKE=	Yes
LIBTOOL_FLAGS=	--tag=disable-shared

MODULES=	lang/python
MODPY_RUNDEP=	no

CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--enable-optimize --disable-debug
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/config ${WRKSRC}/cli/libtecla

TEST_DEPENDS=	shells/bash

# some regression tests must be run as root
do-test:
	@@ln -s ${MODPY_BIN} ${WRKDIR}/bin/python
	@@cd ${WRKBUILD}; ${SUDO} ${SETENV} ${MAKE_ENV} \
		${MAKE_PROGRAM} ${ALL_TEST_FLAGS} ${TEST_TARGET}

post-install:
	${INSTALL_DATA_DIR} ${WRKINST}/${PREFIX-main}/share/examples/xorp
	cd ${WRKSRC}/rtrmgr/config; ${INSTALL_DATA} README *.boot \
	    ${WRKINST}/${PREFIX-main}/share/examples/xorp

.include <bsd.port.mk>
@


1.30
log
@bump REVISION for any ports using route messages. regen some distinfos and
remove unnecessary USE_GROFFs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/10/16 15:04:08 bluhm Exp $
@


1.29
log
@Including the header file netinet6/in6_var.h from netinet/in_var.h
automatically is bad.  To change that, a few ports must be adapted.
Do an explicit #include <netinet6/in6_var.h> when it is needed.
OK ajacoutot@@

Commit the remaining ports that were blocked by an cvs commit error
in devel/jdk/1.7/patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/08/15 09:21:10 sthen Exp $
d8 1
a8 1
REVISION-main=	3
@


1.28
log
@bump; ABI break due to SIOC{S,G}ETVLAN changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/03/21 08:46:35 ajacoutot Exp $
d8 1
a8 1
REVISION-main=	2
@


1.27
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/03/11 11:35:58 espie Exp $
d8 1
a8 1
REVISION-main=	1
@


1.26
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/11/16 00:20:09 sthen Exp $
a25 1
USE_LIBTOOL=	Yes
@


1.25
log
@bumps; net/if.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/08/21 09:23:54 sthen Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d36 1
a36 1
REGRESS_DEPENDS=	shells/bash
d39 1
a39 1
do-regress:
d42 1
a42 1
		${MAKE_PROGRAM} ${ALL_REGRESS_FLAGS} ${REGRESS_TARGET}
@


1.24
log
@Remove BROKEN-sparc64, this builds since sparc64 switched to gcc4. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/08/18 19:22:31 sthen Exp $
d8 1
a8 1
REVISION-main=	0
@


1.23
log
@Don't use -Werror, fixes build on arm. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/07/12 19:54:12 sthen Exp $
a10 2

BROKEN-sparc64=	ICE in route_table_fanout.cc
@


1.22
log
@Disable again on arm, doesn't build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/07/12 16:25:47 sthen Exp $
a12 1
BROKEN-arm=	asyncio.cc fails
@


1.21
log
@python *is* a build dep.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/07/11 12:26:20 jasper Exp $
d13 1
@


1.20
log
@- let's try to build these on sparc/arm now.

from brad
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/06/08 18:00:50 jasper Exp $
a34 1
MODPY_BUILDDEP=	no
d41 1
a41 2
REGRESS_DEPENDS=	shells/bash \
			${MODPY_RUN_DEPENDS}
@


1.19
log
@bump after default python version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/06/06 13:02:45 sthen Exp $
a12 1
BROKEN-arm=	xorpsh_print_routes.cc fails
@


1.18
log
@use the python module to fetch MODPY_BIN's name, only used for regression tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/19 22:31:39 espie Exp $
d8 1
@


1.17
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/09/24 10:55:23 sthen Exp $
a29 3
# No BUILD_DEPENDS:
# Python only used to rebuild already included file with no changes.

d34 4
d43 1
a43 1
			lang/python/2.5
d47 1
a47 1
	@@ln -s ${LOCALBASE}/bin/python2.5 ${WRKDIR}/bin/python
@


1.16
log
@don't spend 11 hours trying to build this on arm only to have it fail
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/04/21 22:10:21 landry Exp $
d41 2
a42 2
REGRESS_DEPENDS=	::shells/bash \
			::lang/python/2.5
@


1.15
log
@Mark xorp as BROKEN on sparc64: IC
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/03/20 23:09:28 sthen Exp $
d12 1
@


1.14
log
@upstream's license was changed to GPL a release or two ago, update
the marker. noticed by jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/01/15 10:14:19 sthen Exp $
d10 2
@


1.13
log
@update to 1.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2008/01/04 18:38:51 espie Exp $
d11 1
a11 1
# BSD
@


1.12
log
@do the same thing with REGRESS_FLAGS as FAKE_FLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/09/15 22:37:00 merdely Exp $
d5 1
a5 1
VERSION=	1.4
d7 1
a7 1
PKGNAME-main=	${DISTNAME}p1
d25 1
a25 1
WANTLIB=	c crypto curses m stdc++
d39 1
a39 1
			::lang/python/2.4
d43 1
a43 1
	@@ln -s ${LOCALBASE}/bin/python2.4 ${WRKDIR}/bin
d46 5
@


1.11
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/06/09 16:45:50 naddy Exp $
d45 1
a45 1
		${MAKE_PROGRAM} ${REGRESS_FLAGS} ${REGRESS_TARGET}
@


1.10
log
@fix build after token ring removal; from steven@@ but i prefer the #ifdef
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/03/30 19:23:46 naddy Exp $
d3 1
a3 1
COMMENT-main=	"eXtensible Open Router Platform"
@


1.9
log
@update list of supported protocols; from Pavlin Radoslavov
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/03/25 21:50:20 naddy Exp $
d7 1
a7 1
PKGNAME-main=	${DISTNAME}p0
@


1.8
log
@Don't build unused shared versions of internal convenience libraries.
This cuts the prodigious build time almost in half.

Compile two source files without -Wcast-align as this will raise a
warning on strict alignment architectures, which together with
-Werror aborts the build.  The cast usage itself is safe.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/03/22 17:19:09 naddy Exp $
d7 1
a7 1
PKGNAME-main=	${DISTNAME}
@


1.7
log
@update to 1.4 which adds OSPFv3 support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/12/05 21:59:57 naddy Exp $
d32 1
@


1.6
log
@introduce a dummy multi package to fix packaging
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/10/18 23:18:02 naddy Exp $
d5 1
a5 1
VERSION=	1.3
d7 1
a7 1
PKGNAME-main=	${DISTNAME}p0
d34 1
a34 1
CONFIGURE_ARGS=	--enable-optimize
d43 2
a44 1
	@@cd ${WRKBUILD}; ${SUDO} ${MAKE_PROGRAM} ${REGRESS_TARGET}
@


1.5
log
@belatedly update to 1.3 as requested by upstream maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/04/17 19:25:53 naddy Exp $
d3 1
a3 1
COMMENT=	"eXtensible Open Router Platform"
d7 1
d21 4
a33 4
.if !defined(PACKAGING)
PREFIX=${LOCALBASE}/xorp
.endif

@


1.4
log
@Update to 1.1.
Input from Pavlin Radoslavov.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/02/26 16:57:48 espie Exp $
d5 1
a5 1
VERSION=	1.1
a9 2
MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

d26 1
d36 2
a37 1
REGRESS_DEPENDS=	::shells/bash
d41 1
@


1.3
log
@tweak the PREFIX only when not generating the package itself, so that
the correct directories are registered/unregistered during package addition
and removal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/01/30 19:48:02 naddy Exp $
d5 2
a6 2
DISTNAME=	xorp-1.0
PKGNAME=	${DISTNAME}p0
d18 3
a20 3
MASTER_SITES=	http://www.xorp.org/releases/1.0/ \
		http://www2.xorp.org/releases/1.0/ \
		http://www3.xorp.org/releases/1.0/
d34 1
a34 1
CONFIGURE_ARGS=	--without-snmp --enable-optimize
d36 6
@


1.2
log
@enable building with compiler optimization flags
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/01/25 21:19:22 naddy Exp $
d6 1
a28 1
PREFIX=		${LOCALBASE}/xorp
d30 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d30 1
a30 1
CONFIGURE_ARGS=	--without-snmp	# --enable-optimize
@


1.1.1.1
log
@Import XORP 1.0.

XORP is an open router platform.  XORP's primary goal is to be both
a research tool and a stable deployment platform.  It implements
routing protocols for IPv4 and IPv6 and a unified means to configure
them.
@
text
@@
