head	1.18;
access;
symbols
	OPENBSD_6_2:1.18.0.2
	OPENBSD_6_2_BASE:1.18
	OPENBSD_6_1:1.17.0.6
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.17.0.4
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.14.0.8
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.14.0.6
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.4
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.13.0.2
	OPENBSD_5_3_BASE:1.13
	OPENBSD_5_2:1.11.0.2
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.8.0.4
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	ajacoutot_20100322:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.18
date	2017.04.19.23.25.06;	author jca;	state Exp;
branches;
next	1.17;
commitid	6LPQv6TGAgTu0vxN;

1.17
date	2015.10.08.21.19.22;	author sthen;	state Exp;
branches;
next	1.16;
commitid	pVDZUjJm7yyuQSI1;

1.16
date	2015.06.26.18.39.12;	author ajacoutot;	state Exp;
branches;
next	1.15;
commitid	TGAqoQn17eEm0sn0;

1.15
date	2015.06.19.09.07.32;	author ajacoutot;	state Exp;
branches;
next	1.14;
commitid	hXHwhE3ALoBRTThB;

1.14
date	2013.03.11.11.35.58;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2012.11.07.14.53.59;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2012.11.06.11.50.04;	author dcoppa;	state Exp;
branches;
next	1.11;

1.11
date	2012.03.30.06.47.40;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.12.03.13.59.37;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.19.22.31.39;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.11.17.20.28;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.03.10.55.30;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.03.10.23.24;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2010.04.24.09.56.34;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.22.22.26.59;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.03.22.22.26.59;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.18
log
@Fix build with clang: two functions that were needlessly "inline"
@
text
@# $OpenBSD: Makefile,v 1.17 2015/10/08 21:19:22 sthen Exp $

PORTROACH=	skipv:1.1

COMMENT=	UPnP A/V media server

DISTNAME=	ushare-1.1a
REVISION=	11
EXTRACT_SUFX=	.tar.bz2

CATEGORIES=	net multimedia

HOMEPAGE=	http://ushare.geexbox.org/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c pthread ixml threadutil upnp

MASTER_SITES=	${HOMEPAGE}releases/

MODULES=	devel/gettext

LIB_DEPENDS=	net/libupnp

USE_GMAKE=	Yes
NO_TEST=	Yes

CONFIGURE_STYLE=simple
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib"
CONFIGURE_ARGS=	--sysconfdir=${SYSCONFDIR} \
		--disable-optimize \
		--disable-dlna

CFLAGS+=	-I${LOCALBASE}/include -I${WRKSRC} \
		-DHAVE_ICONV -DBSD -D__unix__

FAKE_FLAGS=	sysconfdir=${WRKINST}${PREFIX}/share/examples/ushare

.ifdef DEBUG
CONFIGURE_ARGS+= --enable-debug
.else
CONFIGURE_ARGS+= --disable-debug
.endif

post-install:
	rm -r ${PREFIX}/share/examples/ushare/init.d/

.include <bsd.port.mk>
@


1.17
log
@Bump some ports which reference if_msghdr in their source, so that package
updates are triggered. This is following the struct if_data ABI change a few
days ago; if_msghdr has an embedded if_data.  Some may be unnecessary, but
some are definitely needed and bumps are cheaper than debugging.
Problem reported with wpa_supplicant by Mikolaj Kucharski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/06/26 18:39:12 ajacoutot Exp $
d8 1
a8 1
REVISION=	10
@


1.16
log
@Add PORTROACH annotation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/06/19 09:07:32 ajacoutot Exp $
d8 1
a8 1
REVISION=	9
@


1.15
log
@Clean up port/patches.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.14 2013/03/11 11:35:58 espie Exp $
@


1.14
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/11/07 14:53:59 dcoppa Exp $
d6 1
a6 1
REVISION=	8
d16 1
a16 1
WANTLIB += c pthread ixml threadutil>=1 upnp>=1
d22 1
a22 1
LIB_DEPENDS=	net/libupnp>=1.6.17
d27 2
a28 2
CONFIGURE_STYLE= simple
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -lintl -liconv"
a29 1
		--with-libupnp-dir=${LOCALBASE}/lib \
d33 2
a34 1
CFLAGS+=	-I${LOCALBASE}/include -I${WRKSRC} -DBSD -D__unix__
d43 3
@


1.13
log
@Additional bugfixes and add comments to patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/11/06 11:50:04 dcoppa Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d25 1
a25 1
NO_REGRESS=	Yes
@


1.12
log
@Unbreak with newer libupnp; patch stolen from Arch Linux

"if it works, go ahead" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/03/30 06:47:40 ajacoutot Exp $
d6 1
a6 1
REVISION=	7
@


1.11
log
@Remove myself from MAINTAINER.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/12/17 22:01:13 sthen Exp $
d6 1
a6 1
REVISION=	6
d19 1
a19 1
WANTLIB += c pthread ixml threadutil upnp
d25 1
a25 1
LIB_DEPENDS=	net/libupnp
@


1.10
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/12/03 13:59:37 ajacoutot Exp $
d6 1
a6 1
REVISION=	5
a11 2

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.9
log
@Remove MSG_NOSIGNAL patch now that we support that.
Move MESSAGE to README.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/12/27 14:50:23 ajacoutot Exp $
d6 1
a6 1
REVISION=	4
@


1.8
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/12/24 10:40:05 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
@


1.7
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/19 22:31:39 espie Exp $
d6 1
a6 1
REVISION=	2
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/11 17:20:28 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.5
log
@finish net WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/03 10:55:30 ajacoutot Exp $
d27 1
a27 1
LIB_DEPENDS=	::net/libupnp
@


1.4
log
@Missing rcs id.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/11/03 10:23:24 jasper Exp $
d21 1
a21 1
WANTLIB += c pthread
d27 1
a27 1
LIB_DEPENDS=	ixml,threadutil,upnp::net/libupnp
@


1.3
log
@- add an rc file for ushare.

ok aja@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/04/24 09:56:34 ajacoutot Exp $
d6 1
a6 1
REVISION=	0
@


1.2
log
@This part of CONFIGURE_ENV is now set in bsd.port.mk(5).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/03/22 22:26:59 ajacoutot Exp $
d6 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d32 1
a32 2
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -lintl -liconv" \
		MAKE=${MAKE_PROGRAM}
@


1.1.1.1
log
@Import ushare-1.1a

uShare is a UPnP (TM) A/V & DLNA Media Server. It implements the server
component that provides UPnP media devices with information on available
multimedia files. uShare uses the built-in http server of libupnp to
stream the files to clients.

GeeXboX uShare is able to provide access to both images, videos, music
or playlists files (see below for a complete file format support list
It does not act as an UPnP Media Adaptor and thus, can't transcode
streams to fit the client requirements.

Note that DLNA support is not enabled on OpenBSD.
@
text
@@
