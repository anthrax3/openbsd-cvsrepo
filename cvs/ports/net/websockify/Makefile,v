head	1.4;
access;
symbols
	OPENBSD_6_0:1.4.0.2
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	sthen_20151218:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2016.06.05.11.04.12;	author sthen;	state Exp;
branches;
next	1.3;
commitid	4qWQcL6ZyNRAxIaR;

1.3
date	2016.06.04.22.52.24;	author gsoares;	state Exp;
branches;
next	1.2;
commitid	8FiXjsTkmM66GYjK;

1.2
date	2015.12.22.14.41.52;	author sthen;	state Exp;
branches;
next	1.1;
commitid	wRrlUJdLtjwF1GOD;

1.1
date	2015.12.18.13.18.39;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	IxdWEV9ie2pH5Dqp;

1.1.1.1
date	2015.12.18.13.18.39;	author sthen;	state Exp;
branches;
next	;
commitid	IxdWEV9ie2pH5Dqp;


desc
@@


1.4
log
@switch to py.test, and use a TEST_DEPENDS on the exact version to make sure
that "make test" doesn't try and run on an old installed version of websockify.
@
text
@# $OpenBSD: Makefile,v 1.3 2016/06/04 22:52:24 gsoares Exp $

COMMENT=	WebSocket to TCP proxy

MODPY_EGG_VERSION= 0.8.0
DISTNAME=	websockify-${MODPY_EGG_VERSION}

CATEGORIES=	net

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# LGPLv3
PERMIT_PACKAGE_CDROM=	Yes

GH_ACCOUNT=	kanaka
GH_PROJECT=	websockify
GH_TAGNAME=	v${MODPY_EGG_VERSION}

MODULES=	lang/python
MODPY_SETUPTOOLS= Yes
RUN_DEPENDS=	math/py-numpy
TEST_DEPENDS=	devel/py-test \
		devel/py-mox \
		${BUILD_PKGPATH}-=${MODPY_EGG_VERSION}

post-build:
	cd ${WRKSRC}; env ${MAKE_ENV} ${MAKE_PROGRAM} ${MAKE_FLAGS}

post-install:
	${INSTALL_MAN} ${WRKSRC}/docs/websockify.1 ${PREFIX}/man/man1/
	${INSTALL_DATA_DIR} ${PREFIX}/lib/websockify
	${INSTALL_DATA} ${WRKSRC}/rebind.so ${PREFIX}/lib/websockify/

do-test:
	cd ${WRKSRC}/tests; py.test

.include <bsd.port.mk>
@


1.3
log
@update to 0.8.0
OK sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/12/22 14:41:52 sthen Exp $
d22 1
a22 1
TEST_DEPENDS=	devel/py-nose \
d24 1
a24 1
		${BUILD_PKGPATH}
d35 1
a35 1
	cd ${WRKSRC}/tests; nosetests
@


1.2
log
@add missing rdep to websockify on py-numpy, and build rebind.so
noted by jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2015/12/18 13:18:39 sthen Exp $
d5 1
a5 2
MODPY_EGG_VERSION= 0.7.0
REVISION=	0
d30 1
a30 1
	${INSTALL_DATA} ${WRKSRC}/docs/websockify.1 ${PREFIX}/man/man1/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d22 1
d27 3
d32 2
@


1.1.1.1
log
@import ports/net/websockify, ok czarkoff@@

Websockify (formerly named wsproxy) translates WebSockets traffic to
normal socket traffic. It accepts the WebSockets handshake, parses it,
and then begins forwarding traffic between the client and the target
in both directions.
@
text
@@
