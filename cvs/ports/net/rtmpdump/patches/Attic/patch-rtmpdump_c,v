head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2011.07.17.09.56.04;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2011.03.21.09.46.31;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to rtmpdump 2.4, packaged from git. From Nigel Taylor.
Supports RTMPE type 9 handshakes, used by some youtube streams (e.g. UK 4od)
@
text
@$OpenBSD: patch-rtmpdump_c,v 1.1 2011/03/21 09:46:31 sthen Exp $
--- rtmpdump.c.orig	Wed Jun 30 20:58:35 2010
+++ rtmpdump.c	Sun Mar 20 19:11:50 2011
@@@@ -583,7 +583,7 @@@@ Download(RTMP * rtmp,		// connected RTMP object
 #endif
 
     }
-  while (!RTMP_ctrlC && nRead > -1 && RTMP_IsConnected(rtmp));
+  while (!RTMP_ctrlC && nRead > -1 && RTMP_IsConnected(rtmp) && !RTMP_IsTimedout(rtmp));
   free(buffer);
   if (nRead < 0)
     nRead = rtmp->m_read.status;
@


1.1
log
@- handle newer rtmp servers; from upstream SVN via Nigel Taylor
- fix the inclusion order of network headers (netinet/in.h before arpa/inet.h)
@
text
@d1 1
a1 1
$OpenBSD$
@

