head	1.30;
access;
symbols
	OPENBSD_6_1:1.28.0.2
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.23.0.2
	OPENBSD_6_0_BASE:1.23
	OPENBSD_5_9:1.20.0.2
	OPENBSD_5_9_BASE:1.20
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.14.0.2
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.12.0.2
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	jasper_20130502:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.04.21.13.27.47;	author kurt;	state Exp;
branches;
next	1.29;
commitid	lfz5IYSiUvvvq1Ub;

1.29
date	2017.04.20.19.15.45;	author jasper;	state Exp;
branches;
next	1.28;
commitid	DqEFVUF840tiPX3q;

1.28
date	2017.03.12.14.35.37;	author jasper;	state Exp;
branches;
next	1.27;
commitid	oThne6MWCnoU3Q0o;

1.27
date	2016.12.26.12.33.08;	author jasper;	state Exp;
branches;
next	1.26;
commitid	PX6tPOVNyFhMGqT5;

1.26
date	2016.12.15.20.27.11;	author jasper;	state Exp;
branches;
next	1.25;
commitid	2Ko3u657jLdg206E;

1.25
date	2016.10.01.20.36.01;	author jasper;	state Exp;
branches;
next	1.24;
commitid	04wt59GvrWxkgVQP;

1.24
date	2016.08.10.13.39.48;	author jasper;	state Exp;
branches;
next	1.23;
commitid	wjxAiEQrnAy3775P;

1.23
date	2016.05.03.18.23.47;	author jasper;	state Exp;
branches;
next	1.22;
commitid	vpv4PGCFg3ivH16G;

1.22
date	2016.03.07.07.46.59;	author jasper;	state Exp;
branches;
next	1.21;
commitid	u2AYfhePBvuPiw9G;

1.21
date	2016.02.25.07.35.31;	author jasper;	state Exp;
branches;
next	1.20;
commitid	8HftnCuZ5KsJEpXH;

1.20
date	2015.12.06.12.35.48;	author jasper;	state Exp;
branches;
next	1.19;
commitid	g3G8sZPtz0vh2TIx;

1.19
date	2015.10.24.11.40.32;	author jasper;	state Exp;
branches;
next	1.18;
commitid	9MCao8tfGg0O9UGo;

1.18
date	2015.08.19.07.22.55;	author jasper;	state Exp;
branches;
next	1.17;
commitid	bdperNZ4JPi69prO;

1.17
date	2015.03.15.10.08.37;	author jasper;	state Exp;
branches
	1.17.4.1;
next	1.16;
commitid	T5wijOSoJkVXZeHA;

1.16
date	2015.02.04.12.27.44;	author jasper;	state Exp;
branches;
next	1.15;
commitid	zKr49efRnrwRnYvj;

1.15
date	2014.08.31.19.16.53;	author jasper;	state Exp;
branches;
next	1.14;
commitid	IPLh9GEWswTUhbby;

1.14
date	2014.05.20.19.34.48;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2014.05.07.15.42.16;	author kurt;	state Exp;
branches;
next	1.12;

1.12
date	2013.12.24.22.31.26;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2013.07.14.16.37.01;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2013.04.26.12.46.06;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.18.14.46.28;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2013.03.18.11.09.56;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.18.10.52.56;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.13.18.19.48;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.03.13.16.30.11;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.11.11.35.45;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.04.15.48.41;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.02.12.31.35;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2013.02.05.15.08.45;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.02.05.15.08.45;	author jasper;	state Exp;
branches;
next	;

1.17.4.1
date	2015.08.22.08.18.15;	author jasper;	state Exp;
branches;
next	;
commitid	zZRzAij1MjE5gSht;


desc
@@


1.30
log
@- disconnect devel/jdk/1.7 from the build
- adjust java.port.mk so all 1.7 and lower ports now build with 1.8
- bump revision on affected ports
okay sthen@@, ian@@, landry@@
@
text
@# $OpenBSD: Makefile,v 1.29 2017/04/20 19:15:45 jasper Exp $

PKG_ARCH=	*

COMMENT=	open source message broker implementing JMS 1.1

V=		5.14.5
DISTNAME=	apache-activemq-$V
REVISION=	0

CATEGORIES=	net

HOMEPAGE=	https://activemq.apache.org/

# Apache2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_APACHE:=activemq/${V}/}
EXTRACT_SUFX=	-bin.tar.gz

MODULES=	java
MODJAVA_VER=	1.6+

RUN_DEPENDS=	java/javaPathHelper

SUBST_VARS +=	V

NO_BUILD=	Yes
NO_TEST=	Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/bin/activemq

INSTALL_DIRS=	${PREFIX}/activemq/lib/ \
		${PREFIX}/activemq/webapps{,-demo}/ \
		${PREFIX}/activemq/examples \
		${PREFIX}/share/examples/activemq/

do-install:
	-rm -r ${WRKSRC}/bin/{macosx,linux-x86-*,*.orig} \
		${WRKSRC}/data
	${INSTALL_DATA_DIR} ${PREFIX}/activemq/
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/activemq/conf
	cd ${WRKSRC} && tar cf - * | tar xf - -C ${PREFIX}/activemq/
	${INSTALL_DATA} ${FILESDIR}/activemq.conf ${PREFIX}/share/examples/activemq/
	mv ${PREFIX}/activemq/conf ${PREFIX}/share/examples/activemq/
	# Lots of weird modes to fixup, use a sledgehammer
	find ${INSTALL_DIRS} -type f -print0 | xargs -0 chmod ${SHAREMODE}
	find ${PREFIX}/activemq/bin/ -type f -name \*.jar -print0 | xargs -0 chmod ${BINMODE}
	cd ${PREFIX}/activemq && ln -sf /var/db/activemq/data data
	cd ${PREFIX}/activemq && ln -sf /var/db/activemq/tmp tmp
	cd ${PREFIX}/activemq && ln -sf ${SYSCONFDIR}/activemq conf

.include <bsd.port.mk>
@


1.29
log
@- update to apache-activemq-5.14.5
- drop maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/03/12 14:35:37 jasper Exp $
d9 1
@


1.28
log
@- update to apache-activemq-5.14.4
- drop maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/12/26 12:33:08 jasper Exp $
d7 1
a7 2
V=		5.14.4
REVISION=	0
a12 2

MAINTAINER=	Jasper Lievisse Adriaanse <jasper@@openbsd.org>
@


1.27
log
@update to apache-activemq-5.14.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/12/15 20:27:11 jasper Exp $
d7 2
a8 1
V=		5.14.3
@


1.26
log
@update to apache-activemq-5.14.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/10/01 20:36:01 jasper Exp $
d7 1
a7 1
V=		5.14.2
@


1.25
log
@update to apache-activemq-5.14.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/08/10 13:39:48 jasper Exp $
d7 1
a7 1
V=		5.14.1
@


1.24
log
@update to apache-activemq-5.14.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/05/03 18:23:47 jasper Exp $
d7 1
a7 1
V=		5.14.0
@


1.23
log
@update to apache-activemq-5.13.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/03/07 07:46:59 jasper Exp $
d7 1
a7 1
V=		5.13.3
@


1.22
log
@update to apache-activemq-5.13.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/02/25 07:35:31 jasper Exp $
d7 1
a7 1
V=		5.13.2
@


1.21
log
@- update to activemq-5.13.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/12/06 12:35:48 jasper Exp $
d7 1
a7 1
V=		5.13.1
@


1.20
log
@- update to activemq-5.13.0

http://activemq.apache.org/activemq-5130-release.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/10/24 11:40:32 jasper Exp $
d7 1
a7 1
V=		5.13.0
@


1.19
log
@update to apache-activemq-5.12.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/08/19 07:22:55 jasper Exp $
d7 1
a7 1
V=		5.12.1
@


1.18
log
@- update to apache-activemq-5.12.0

tested with mcollective by sebastia@@ and myself
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/03/15 10:08:37 jasper Exp $
d7 1
a7 1
V=		5.12.0
d35 5
a45 1
	chmod -R ${SHAREMODE} ${PREFIX}/activemq/lib/optional/commons-collections-3.2.1.jar
d48 3
@


1.17
log
@update to apache-activemq-5.11.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/02/04 12:27:44 jasper Exp $
d7 1
a7 1
V=		5.11.1
@


1.17.4.1
log
@Security update to apache-activemq-5.11.2,
http://activemq.apache.org/security-advisories.data/CVE-2015-1830-announcement.txt

if you're unable to update please refer to the announcement above on how to workaround
the issue
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/03/15 10:08:37 jasper Exp $
d7 1
a7 1
V=		5.11.2
@


1.16
log
@- update to apache-activemq-5.10.1, lots of bugfixes and improvements
* https://issues.apache.org/jira/secure/ReleaseNote.jspa?projectId=12311210&version=12326456
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/08/31 19:16:53 jasper Exp $
d7 1
a7 1
V=		5.10.1
@


1.15
log
@update to apache-activemq-5.10.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/05/20 19:34:48 jasper Exp $
d7 1
a7 1
V=		5.10.0
d36 1
a36 1
	rm -r ${WRKSRC}/bin/{macosx,linux-x86-*,*.orig} \
d41 1
@


1.14
log
@update to apache-activemq-5.9.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/05/07 15:42:16 kurt Exp $
d7 1
a7 1
V=		5.9.1
@


1.13
log
@- Unlink jdk/1.6 and make jdk/1.7 the default jdk for all java ports
- Adjust java.port.mk and cmake to use 1.7
- Adjust jdk/1.7 for pkg_add upgrades
okay sthen@@, jasper@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/12/24 22:31:26 jasper Exp $
d7 1
a7 1
V=		5.9.0
a8 1
REVISION=	0
d19 1
a19 1
MASTER_SITES=	${MASTER_SITE_APACHE:=activemq/apache-activemq/${V}/}
@


1.12
log
@- update to apache-activemq 5.9
* please refer to http://activemq.apache.org/activemq-590-release.html for an overview of new features/
  bugfixes, including the new hawtio console.

if you updated permissions in jetty-realm.properties, apply the same in users.properties for the
new hawtio console (<hostname>:8161/hawtio/) !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/07/14 16:37:01 jasper Exp $
d9 1
@


1.11
log
@add HOMEPAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/04/26 12:46:06 ajacoutot Exp $
d7 1
a7 1
V=		5.8.0
a8 1
REVISION=	7
@


1.10
log
@Drop puppet releated ports I maintain and give them to jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/18 14:46:28 ajacoutot Exp $
d9 1
a9 1
REVISION=	6
d12 2
@


1.9
log
@activemqrc -> activemq.conf and protect the file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/03/18 11:09:56 ajacoutot Exp $
d9 1
a9 1
REVISION=	5
d13 1
a13 1
MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.8
log
@Remove more files at @@extraunexec time.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/18 10:52:56 ajacoutot Exp $
d9 1
a9 1
REVISION=	4
d40 1
a40 1
	${INSTALL_DATA} ${FILESDIR}/activemqrc ${PREFIX}/share/examples/activemq/
@


1.7
log
@Put the configuration under ${SYSCONFDIR}/activemq/.
Do not hardcode /etc.
Put the data and tmp directories under /var/db/activemq.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/13 18:19:48 ajacoutot Exp $
d9 1
a9 1
REVISION=	3
@


1.6
log
@The _activemq user needs a RW homedir to prevent java.io.IOException
errors.
Properly remove all files at @@extraunexec time.
Protect the conf directory.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/03/13 16:30:11 ajacoutot Exp $
d9 1
a9 1
REVISION=	2
d31 3
d36 1
a36 1
		${WRKSRC}/data/activemq.log
d42 3
@


1.5
log
@Revamp that port:
* don't use an /etc/default/activemq config file; it's too generic and
linuxish -- we'll use /etc/activemqrc
* no need to install the wrappers since we have rc scripts
* properly sample *all* configuration files
* run as unpriviledged user: _activemq by default
* remove useless README
* properly remove data files at @@extraunexec time
* proper rc_stop in the rc script
* take MAINTAINER

ok jasper@@ on a previous submission
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/03/11 11:35:45 espie Exp $
d9 1
a9 1
REVISION=	1
d32 2
a33 1
	rm -r ${WRKSRC}/bin/macosx/ ${WRKSRC}/bin/linux-x86-* ${WRKSRC}/bin/*.orig
@


1.4
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/03/04 15:48:41 ajacoutot Exp $
d9 1
a9 1
REVISION=	0
d13 2
d34 1
d36 2
a37 6
.for s in activemq activemq-admin
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -c ${FILESDIR}/$s \
		${PREFIX}/bin/$s
	chmod +x ${PREFIX}/bin/$s
.endfor
	${INSTALL_DATA} ${FILESDIR}/activemqrc ${PREFIX}/activemq/conf/
@


1.3
log
@Repair rc script which could never have worked...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/03/02 12:31:35 jasper Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d27 1
a27 1
NO_REGRESS=	Yes
@


1.2
log
@- update to apache-activemq-5.8.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/02/05 15:08:45 jasper Exp $
d9 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
V=		5.7.0
@


1.1.1.1
log
@import apache-activemq 5.7.0

Apache ActiveMQ is the most popular and powerful open source
messaging and Integration Patterns server.  Apache ActiveMQ is fast,
supports many Cross Language Clients and Protocols, comes with easy to
use Enterprise Integration Patterns and many advanced features while
fully supporting JMS 1.1 and J2EE 1.4.

rc.d help and ok aja@@
@
text
@@
