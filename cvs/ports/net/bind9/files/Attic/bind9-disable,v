head	1.5;
access;
symbols
	OPENBSD_3_2:1.4.0.4
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2003.01.25.14.14.37;	author jakob;	state dead;
branches;
next	1.4;

1.4
date	2001.12.16.23.19.16;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.26.23.25.18;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2001.10.08.23.01.51;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2001.08.21.18.00.25;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.5
log
@split into -libs and -server packages
sync patches with OpenBSD-current
use autoconf to regenerate configure script
do not installed examples (soon part of base)
remove the bind9-{enable,disable} scripts
@
text
@#!/bin/sh
#
#	$OpenBSD: bind9-disable,v 1.4 2001/12/16 23:19:16 jakob Exp $
#
#	this script disables BIND v9 by removing links created by
#	bind9-enable.

PREFIX=y0y0y0
BINDIR=/usr/sbin

if [ `id -u` -ne 0 ]; then
    echo "You must be root to run this script."
    exit
fi

echo "This script will remove BIND v9 links from $BINDIR"
echo ""
echo -n "Are you sure you want to do this (y/[n])? "

read answer
echo ""

if [ X$answer != Xy ]; then
    echo "exit"
    exit
fi

if [ ! -e /usr/sbin/lwresd ]; then
    echo "BIND v9 not enabled, script terminated."
    exit 
fi

######################################################################
echo "Removing BIND v9 links:"

for link in \
    dig host nslookup nsupdate \
    named rndc lwresd \
    dnssec-keygen dnssec-makekeyset dnssec-signkey dnssec-signzone \
    named-checkconf named-checkzone \
    rndc-confgen
do
    if [ -L $BINDIR/$link ]; then
        echo " $link"
        rm -f $BINDIR/$link
    fi
done

echo ""
echo done.

######################################################################
if [ ! -e /usr/sbin/named.dist ]; then
    echo "Couldn't find saved BIND v4 files, saved files not restored."
    exit 
else
    echo "Trying to restore BIND v4 files:"

    for file in \
	/usr/sbin/addr \
	/usr/sbin/dig \
	/usr/sbin/dnsquery \
	/usr/sbin/host \
	/usr/sbin/named \
	/usr/sbin/named.reload \
	/usr/sbin/named.restart \
	/usr/sbin/ndc \
	/usr/sbin/nslookup \
	/usr/share/man/cat1/dig.0 \
	/usr/share/man/cat1/dnsquery.0 \
	/usr/share/man/cat1/host.0 \
	/usr/share/man/cat8/named-xfer.0 \
	/usr/share/man/cat8/named.0 \
	/usr/share/man/cat8/named.reload.0 \
	/usr/share/man/cat8/named.restart.0 \
	/usr/share/man/cat8/ndc.0 \
	/usr/share/man/cat8/nslookup.0 \
	/usr/share/misc/nslookup.help \
	/var/named/named-xfer
    do
	if [ -e $file.dist ]; then
	    echo " $file"
	    mv $file.dist $file
	fi
    done

    echo ""
    echo done.
fi
@


1.4
log
@typo
@
text
@d3 1
a3 1
#	$OpenBSD: bind9-disable,v 1.3 2001/11/26 23:25:18 jakob Exp $
@


1.3
log
@update to BIND 9.2.0. compared to BIND 9.1, BIND 9.2 has a number of new
features as well as numerous bug fixes and cleanups.
@
text
@d3 1
a3 1
#	$OpenBSD: bind9-disable,v 1.5 2001/09/09 10:22:21 jakob Exp $
d18 1
a18 1
echo -n "Are you sure you want to to this (y/[n])? "
@


1.2
log
@- remove pkg/MESSAGE as it confuses more then helps
- update bind9-enable script and add bind9-disable script
- update MASTER_SITES
- cleanup post-install
- enable MODGNU_CONFIG_GUESS_DIRS
@
text
@d40 2
a41 1
    named-checkconf named-checkzone
@


1.1
log
@improved enable-script
add basic disable-script (still not reinstall old binaries)
@
text
@d3 1
a3 1
#	$OpenBSD: bind9-disable,v 1.3 2001/08/21 17:51:46 jakob Exp $
d28 5
d50 39
@

