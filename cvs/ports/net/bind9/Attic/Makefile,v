head	1.43;
access;
symbols
	OPENBSD_3_3:1.41.0.2
	OPENBSD_3_3_BASE:1.41
	OPENBSD_3_2:1.33.0.2
	OPENBSD_3_2_BASE:1.33
	OPENBSD_3_1:1.29.0.2
	OPENBSD_3_1_BASE:1.29
	OPENBSD_3_0:1.25.0.2
	OPENBSD_3_0_BASE:1.25
	OPENBSD_2_9_TRACKING_SWITCH:1.24
	OPENBSD_2_9:1.20.0.2
	OPENBSD_2_9_BASE:1.20
	OPENBSD_2_8:1.6.0.2
	OPENBSD_2_8_BASE:1.6
	jakob_20000916:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.43
date	2003.05.23.16.30.37;	author jakob;	state dead;
branches;
next	1.42;

1.42
date	2003.04.10.18.08.56;	author jsyn;	state Exp;
branches;
next	1.41;

1.41
date	2003.02.03.13.37.46;	author jakob;	state Exp;
branches;
next	1.40;

1.40
date	2003.02.03.13.36.24;	author jakob;	state Exp;
branches;
next	1.39;

1.39
date	2003.01.25.14.14.37;	author jakob;	state Exp;
branches;
next	1.38;

1.38
date	2003.01.21.17.29.09;	author jakob;	state Exp;
branches;
next	1.37;

1.37
date	2003.01.21.16.43.29;	author jakob;	state Exp;
branches;
next	1.36;

1.36
date	2002.12.27.15.19.15;	author jakob;	state Exp;
branches;
next	1.35;

1.35
date	2002.12.13.23.12.21;	author jakob;	state Exp;
branches;
next	1.34;

1.34
date	2002.10.26.12.44.07;	author jakob;	state Exp;
branches;
next	1.33;

1.33
date	2002.08.05.20.48.59;	author jakob;	state Exp;
branches
	1.33.2.1;
next	1.32;

1.32
date	2002.07.07.11.21.59;	author jakob;	state Exp;
branches;
next	1.31;

1.31
date	2002.06.13.15.27.29;	author jakob;	state Exp;
branches;
next	1.30;

1.30
date	2002.05.02.06.41.38;	author jakob;	state Exp;
branches;
next	1.29;

1.29
date	2002.03.23.22.05.48;	author lebel;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2002.03.06.23.48.23;	author lebel;	state Exp;
branches;
next	1.27;

1.27
date	2001.11.26.23.25.18;	author jakob;	state Exp;
branches;
next	1.26;

1.26
date	2001.11.01.18.34.51;	author wilfried;	state Exp;
branches;
next	1.25;

1.25
date	2001.10.08.23.01.51;	author jakob;	state Exp;
branches;
next	1.24;

1.24
date	2001.07.13.11.24.26;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2001.07.06.14.48.35;	author jakob;	state Exp;
branches;
next	1.22;

1.22
date	2001.05.11.09.52.30;	author jakob;	state Exp;
branches;
next	1.21;

1.21
date	2001.05.05.22.10.32;	author jakob;	state Exp;
branches;
next	1.20;

1.20
date	2001.03.29.06.47.54;	author jakob;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	2001.03.27.09.03.17;	author jakob;	state Exp;
branches;
next	1.18;

1.18
date	2001.03.24.19.55.44;	author jakob;	state Exp;
branches;
next	1.17;

1.17
date	2001.03.23.03.10.47;	author jakob;	state Exp;
branches;
next	1.16;

1.16
date	2001.03.15.08.55.52;	author jakob;	state Exp;
branches;
next	1.15;

1.15
date	2001.03.07.07.53.22;	author jakob;	state Exp;
branches;
next	1.14;

1.14
date	2001.02.27.08.39.39;	author jakob;	state Exp;
branches;
next	1.13;

1.13
date	2001.02.19.15.49.44;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2001.02.13.14.26.47;	author jakob;	state Exp;
branches;
next	1.11;

1.11
date	2001.02.12.17.13.17;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2001.01.18.14.25.15;	author jakob;	state Exp;
branches;
next	1.9;

1.9
date	2001.01.18.09.32.00;	author jakob;	state Exp;
branches;
next	1.8;

1.8
date	2000.11.13.16.21.42;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2000.11.13.16.01.29;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2000.10.22.15.42.56;	author espie;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2000.10.04.21.53.59;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2000.09.21.10.17.53;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2000.09.16.15.39.19;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2000.09.16.15.28.01;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2000.09.16.07.36.52;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.09.16.07.36.52;	author jakob;	state Exp;
branches;
next	;

1.6.2.1
date	2000.11.13.16.00.54;	author jakob;	state Exp;
branches;
next	1.6.2.2;

1.6.2.2
date	2001.03.30.22.50.36;	author naddy;	state Exp;
branches;
next	1.6.2.3;

1.6.2.3
date	2001.05.07.02.03.47;	author naddy;	state Exp;
branches;
next	1.6.2.4;

1.6.2.4
date	2001.05.11.11.38.10;	author naddy;	state Exp;
branches;
next	;

1.20.2.1
date	2001.05.07.02.03.29;	author naddy;	state Exp;
branches;
next	1.20.2.2;

1.20.2.2
date	2001.05.11.11.37.15;	author naddy;	state Exp;
branches;
next	1.20.2.3;

1.20.2.3
date	2001.07.10.22.15.46;	author naddy;	state Exp;
branches;
next	;

1.29.2.1
date	2002.06.13.18.47.29;	author jakob;	state Exp;
branches;
next	1.29.2.2;

1.29.2.2
date	2002.10.27.19.47.52;	author jakob;	state Exp;
branches;
next	;

1.33.2.1
date	2002.10.28.16.48.50;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.43
log
@remove bind9 port. no longer maintained. also comes with 3.3.
@
text
@# $OpenBSD: Makefile,v 1.42 2003/04/10 18:08:56 jsyn Exp $

COMMENT=	"ISC BIND 9 libraries"
COMMENT-server=	"ISC BIND 9 server"

VERSION=	9.2.2rc1
DISTNAME=	bind-${VERSION}

FULLPKGNAME=	bind-lib-${VERSION}
PKGNAME-server=	bind-server-${VERSION}

CATEGORIES=	net

MASTER_SITES+=	ftp://ftp.isc.org/isc/bind9/${VERSION}/ \
		ftp://ftp.epix.net/pub/isc/bind9/${VERSION}/ \
		ftp://ftp.nominum.com/pub/isc/bind9/${VERSION}/ \
		ftp://ftp.sunet.se/pub/network/isc/bind9/${VERSION}/ \
		ftp://ftp.funet.fi/pub/mirrors/ftp.isc.org/isc/bind9/${VERSION}/ \
		ftp://ftp.iij.ad.jp/pub/network/isc/bind9/${VERSION}/ \

HOMEPAGE=	http://www.isc.org/products/BIND/

MAINTAINER=     Jakob Schlyter <jakob@@openbsd.org>

PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

.if ${MACHINE_ARCH:Msparc64}
CFLAGS+=	-fno-stack-protector
.endif

SEPARATE_BUILD=		concurrent
CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS+=	--with-libtool ${CONFIGURE_SHARED} \
			--localstatedir=/var \
			--disable-libbind \
			--with-openssl=/usr \
			--with-randomdev=/dev/arandom
AUTOCONF_NEW=		Yes

MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC}

REGRESS_TARGET=		test

MULTI_PACKAGES=		-server
SUBPACKAGE?=

FLAVORS=		static threads
FLAVOR?=

.if ${SUBPACKAGE} == "-server" && ${FLAVOR} != "static"
RUN_DEPENDS=		:bind-lib-${VERSION}:net/bind9
.endif

.if ${FLAVOR:L:Mstatic}
CFLAGS+=		"-static"
NO_SHARED_LIBS=		Yes
.endif

.if ${FLAVOR:L:Mthreads}
CONFIGURE_ARGS+=	--enable-threads
.else
CONFIGURE_ARGS+=	--disable-threads
.endif

MISCDOCFILES=	dnssec ipv6 migration migration-4to9 \
		options rfc-compliance roadmap sdb

post-extract:
	rm -fr ${WRKSRC}/lib/bind

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9/arm
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9/misc
	${INSTALL_DATA} ${WRKSRC}/doc/arm/*.html ${PREFIX}/share/doc/bind9/arm
.for file in ${MISCDOCFILES}
	${INSTALL_DATA} ${WRKSRC}/doc/misc/${file} ${PREFIX}/share/doc/bind9/misc
.endfor

.include <bsd.port.mk>
@


1.42
log
@quote COMMENTs; ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2003/02/03 13:37:46 jakob Exp $
@


1.41
log
@build w/o pp on sparc64
remove optimization workaround (fix in -current)
harden dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2003/01/25 14:14:37 jakob Exp $
d3 2
a4 2
COMMENT=	ISC BIND 9 libraries
COMMENT-server=	ISC BIND 9 server
@


1.40
log
@fix broken deps
@
text
@d30 4
d54 1
a54 1
RUN_DEPENDS=		:bind-lib-*:net/bind9
@


1.39
log
@split into -libs and -server packages
sync patches with OpenBSD-current
use autoconf to regenerate configure script
do not installed examples (soon part of base)
remove the bind9-{enable,disable} scripts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2003/01/21 17:29:09 jakob Exp $
d50 1
a50 1
RUN_DEPENDS=		:bind-libs-*:net/bind9
@


1.38
log
@remove unused .gif file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2003/01/21 16:43:29 jakob Exp $
d3 2
a4 1
COMMENT=	Berkeley Internet Name Daemon
d6 1
a6 1
VERSION=	9.2.1
d8 4
a11 1
PKGNAME=	bind-${VERSION}p1
a29 5
# XXX workaround gcc bugs on sparc64
.if ${MACHINE_ARCH:Msparc64}
PATCH_LIST=	gcc-* patch-*
.endif

d31 1
a31 1
CONFIGURE_STYLE=	gnu
d35 1
a35 1
			--with-openssl="/usr" \
d37 1
d43 3
d49 4
a63 3
EXAMPLEFILES=	named.conf named.root \
		named.localhost named.loopback

d67 3
a72 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/bind9
a73 3
.for file in ${EXAMPLEFILES}
	${INSTALL_DATA} ${FILESDIR}/${file} ${PREFIX}/share/examples/bind9
.endfor
a75 6
.endfor
.for file in bind9-enable bind9-disable
	@@sed s,y0y0y0,${TRUEPREFIX}, < ${FILESDIR}/${file} > \
		${PREFIX}/sbin/${file}
	@@chmod 555 ${PREFIX}/sbin/${file}
	@@chown root:wheel ${PREFIX}/sbin/${file}
@


1.37
log
@remove libbind as it will be provided separately
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2002/12/27 15:19:15 jakob Exp $
a67 1
	${INSTALL_DATA} ${WRKSRC}/doc/arm/*.gif  ${PREFIX}/share/doc/bind9/arm
@


1.36
log
@remove propolice workaround, not needed in -current
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2002/12/13 23:12:21 jakob Exp $
d3 1
a3 2
COMMENT=		Berkeley Internet Name Daemon
COMMENT-libbind=	BIND 8 compatible stub resolver library
a9 3
MULTI_PACKAGES=		-libbind
PKGNAME-libbind=	libbind-${VERSION}

d35 1
a35 1
			--enable-libbind \
@


1.35
log
@build with -O0 until propolice bug is fixed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/10/26 12:44:07 jakob Exp $
a41 1
CFLAGS=			-O0
@


1.34
log
@fix broken openssl function (markus@@) and change default random device to /dev/arandom
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2002/08/05 20:48:59 jakob Exp $
d42 1
@


1.33
log
@nuke NEED_VERSION and remove debug flavour; wcobb
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2002/07/07 11:21:59 jakob Exp $
d8 1
d40 2
a41 1
			--with-openssl="/usr"
@


1.33.2.1
log
@fix broken openssl function (markus@@) and change default random device
to /dev/arandom
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/10/26 12:44:07 jakob Exp $
a7 1
PKGNAME=	bind-${VERSION}p1
d39 1
a39 2
			--with-openssl="/usr" \
			--with-randomdev=/dev/arandom
@


1.32
log
@move libbind to separate package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2002/06/13 15:27:29 jakob Exp $
a8 1
NEED_VERSION=	1.499
d45 1
a45 1
FLAVORS=		debug static threads
a46 4

.if ${FLAVOR:L:Mdebug}
CFLAGS+=		"-g"
.endif
@


1.31
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2002/05/02 06:41:38 jakob Exp $
d3 2
a4 1
COMMENT=	Berkeley Internet Name Daemon
d10 3
@


1.30
log
@update to BIND v9.2.1, maintenance bugfix release
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2002/03/23 22:05:48 lebel Exp $
d40 1
a40 1
REGRESS_TARGE=	test
@


1.29
log
@only compile sha1.c with -O0 on sparc64, not the whole port.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2002/03/06 23:48:23 lebel Exp $
d5 1
a5 1
VERSION=	9.2.0
d39 2
@


1.29.2.1
log
@update to bind 9.2.1. ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2002/06/13 15:27:29 jakob Exp $
d5 1
a5 1
VERSION=	9.2.1
a38 2

REGRESS_TARGET=		test
@


1.29.2.2
log
@change default random device to /dev/arandom; ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29.2.1 2002/06/13 18:47:29 jakob Exp $
a6 1
PKGNAME=	bind-${VERSION}p1
d36 1
a36 2
			--with-openssl="/usr" \
			--with-randomdev=/dev/arandom
@


1.28
log
@XXX workaround a gcc optimization bug on sparc64 (for sha1.o)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/11/26 23:25:18 jakob Exp $
d28 1
a28 1
CFLAGS+=        -O0
@


1.27
log
@update to BIND 9.2.0. compared to BIND 9.1, BIND 9.2 has a number of new
features as well as numerous bug fixes and cleanups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2001/11/26 22:55:47 jakob Exp $
d25 5
@


1.26
log
@use ports in-tree libtool patches, ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2001/10/08 23:01:51 jakob Exp $
d5 1
a5 1
VERSION=	9.1.3
d8 1
a8 1
NEED_VERSION=	1.474
a25 4
PATCH_LIST=		${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltconfig \
			${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltmain_sh \
			patch-*

d30 1
d57 1
a57 1
		options sdb
a62 5
	${INSTALL_MAN} ${WRKSRC}/doc/man/bin/*.1 ${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKSRC}/doc/man/bin/*.5 ${PREFIX}/man/man5
	${INSTALL_MAN} ${WRKSRC}/doc/man/bin/*.8 ${PREFIX}/man/man8
	${INSTALL_MAN} ${WRKSRC}/doc/man/dnssec/*.8 ${PREFIX}/man/man8
	${INSTALL_MAN} ${WRKSRC}/doc/man/lwres/*.3 ${PREFIX}/man/man3
@


1.25
log
@- remove pkg/MESSAGE as it confuses more then helps
- update bind9-enable script and add bind9-disable script
- update MASTER_SITES
- cleanup post-install
- enable MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2001/07/13 11:24:26 naddy Exp $
d25 4
@


1.24
log
@MASTER_SITES fix by Heikki Korpela <heko@@saitti.net>:
- Add ftp.funet.fi and ftp.sunet.se mirrors where available.
- Remove broken ftp.funet.fi references.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/07/06 14:48:35 jakob Exp $
d8 1
a8 1
NEED_VERSION=	1.363
d10 3
a12 1
MASTER_SITES=	ftp://ftp.isc.org/isc/bind9/${VERSION}/ \
d14 2
a15 1
      		ftp://ftp.funet.fi/pub/mirrors/ftp.isc.org/isc/bind9/${VERSION}/
d28 5
a32 4
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--localstatedir=/var \
			--with-openssl="/usr" \
			--with-libtool
d55 3
a68 1
	${INSTALL_DATA} ${WRKSRC}/doc/misc/* ${PREFIX}/share/doc/bind9/misc
d72 9
a80 4
	@@sed s,y0y0y0,${TRUEPREFIX}, < ${FILESDIR}/bind9-enable > \
		${PREFIX}/sbin/bind9-enable
	@@chmod 555 ${PREFIX}/sbin/bind9-enable
	@@chown root:wheel ${PREFIX}/sbin/bind9-enable
@


1.23
log
@update to BIND v9.1.3. this is a maintenance release, containing fixes for
a number of bugs in 9.1.2 but no new features.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2001/05/11 09:52:30 jakob Exp $
d11 2
a12 1
		ftp://ftp.sunet.se/pub/network/isc/bind9/${VERSION}/
@


1.22
log
@typo in MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/05/05 22:10:32 jakob Exp $
d5 1
a5 1
VERSION=	9.1.2
@


1.21
log
@update to BIND 9.1.2
--
BIND 9.1.2 is now available. This is a maintenance release, containing
fixes for a number of bugs in 9.1.1 but no new features. We recommend
that all users of earlier versions of BIND 9 upgrade to 9.1.2.

DNSSEC users should note that DNSSEC validation involving algorithms other
than RSA will not interoperate between this version of BIND and version
9.1.1 or older, because the older versions use an incorrect formula for
calculating key tags of non-RSA keys.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/03/29 06:47:54 jakob Exp $
d11 1
a11 1
		ftp://ftp.sunet.se/pub/network/isc/bind9/${VERSION}
@


1.20
log
@update to BIND 9.1.1. this is a maintenance release, fixing
a number of bugs in BIND 9.1.0. there are no new features.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/03/27 09:03:17 jakob Exp $
d5 1
a5 1
VERSION=	9.1.1
@


1.20.2.1
log
@MFC:
Update to BIND 9.1.2.  This is a maintenance release, containing
fixes for a number of bugs in 9.1.1 but no new features. We recommend
that all users of earlier versions of BIND 9 upgrade to 9.1.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/05/05 22:10:32 jakob Exp $
d5 1
a5 1
VERSION=	9.1.2
@


1.20.2.2
log
@MFC:
typo in MASTER_SITES; requested by jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20.2.1 2001/05/07 02:03:29 naddy Exp $
d11 1
a11 1
		ftp://ftp.sunet.se/pub/network/isc/bind9/${VERSION}/
@


1.20.2.3
log
@MFC requested by jakob@@:
Update to BIND v9.1.3.  This is a maintenance release, containing fixes for
a number of bugs in 9.1.2 but no new features.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2001/07/06 14:48:35 jakob Exp $
d5 1
a5 1
VERSION=	9.1.3
@


1.19
log
@update to BIND v9.1.1rc7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2001/03/24 19:55:44 jakob Exp $
d5 1
a5 1
VERSION=	9.1.1rc7
@


1.18
log
@move COMMENT into Makefile & touch NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/03/23 03:10:47 jakob Exp $
d5 1
a5 1
VERSION=	9.1.1rc6
@


1.17
log
@update to v9.1.1rc6
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.16 2001/03/15 08:55:52 jakob Exp $
d8 2
a9 1
NEED_VERSION=	1.336
@


1.16
log
@update to BIND v9.1.1rc5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2001/03/07 07:53:22 jakob Exp $
d3 1
a3 1
VERSION=	9.1.1rc5
@


1.15
log
@update to BIND v9.1.1rc4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/02/27 08:39:39 jakob Exp $
d3 1
a3 1
VERSION=	9.1.1rc4
@


1.14
log
@update to BIND v9.1.1rc3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2001/02/19 15:49:44 brad Exp $
d3 1
a3 1
VERSION=	9.1.1rc3
@


1.13
log
@no need to override the random device, BIND9 defaults to the right device
for OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/02/13 14:26:47 jakob Exp $
d3 1
a3 1
VERSION=	9.1.1rc2
@


1.12
log
@update to BIND v9.1.1rc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/02/12 17:13:17 brad Exp $
a22 1
			--with-randomdev="/dev/srandom" \
@


1.11
log
@- silence sed
- ${CHOWN}, ${CHMOD} -> chown, chmod
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/01/18 14:25:15 jakob Exp $
d3 1
a3 1
VERSION=	9.1.0
@


1.10
log
@configure patch + cleanup; brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2001/01/18 09:17:33 jakob Exp $
d45 2
a46 2
EXAMPLEFILES=		named.conf named.root \
			named.localhost named.loopback
d63 4
a66 4
	sed s,y0y0y0,${TRUEPREFIX}, < ${FILESDIR}/bind9-enable \
		> ${PREFIX}/sbin/bind9-enable
	${CHMOD} 555 ${PREFIX}/sbin/bind9-enable
	${CHOWN} root:wheel ${PREFIX}/sbin/bind9-enable
@


1.9
log
@update to BIND v9.1.0. from release announcement:
--
BIND 9.1.0 has been released.  Compared to BIND 9.0, BIND 9.1 has a
number of new features as well as numerous bug fixes and cleanups.
The new features include:

  - Many BIND 8 features previously unimplemented in BIND 9,
    including domain-specific forwarding, the $GENERATE
    master file directive, and the "blackhole", "dialup",
    and "sortlist" options

  - Forwarding of dynamic update requests; this is enabled
    by the "allow-update-forwarding" option

  - A new, simplified database interface and a number of
    sample drivers based on it; see doc/misc/sdb for details

  - Support for building single-threaded servers for
    environments that do not supply POSIX threads

  - New configuration options: "min-refresh-time",
    "max-refresh-time", "min-retry-time", "max-retry-time",
    "additional-from-auth", "additional-from-cache",
    "notify explicit"

  - Faster lookups, particularly in large zones.
@
text
@d22 3
a24 5
CONFIGURE_ARGS+=	--prefix=${PREFIX} \
			--sysconfdir=/etc \
			--localstatedir=/var \
			--with-randomdev=/dev/srandom \
			--with-openssl=/usr \
d63 2
a64 1
	sed s,y0y0y0,${TRUEPREFIX}, <${FILESDIR}/bind9-enable >${PREFIX}/sbin/bind9-enable
@


1.8
log
@update to BIND v9.0.1. ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/11/13 16:01:29 jakob Exp $
d3 1
a3 1
VERSION=	9.0.1
d6 1
a6 2
NEED_VERSION=	1.305

d19 1
d21 2
a22 1
CONFIGURE_ARGS=		--prefix=${PREFIX} \
d25 2
a27 3
SEPARATE_BUILD=		concurrent
FAKE_FLAGS+=		DESTDIR=${WRKINST} \
			MAKEDEFS='DESTDIR=${WRKINST}'
d29 1
a29 4
EXAMPLEFILES=		named.conf named.root \
			named.localhost named.loopback

FLAVORS=		debug static
d32 2
a33 2
.if ${FLAVOR:L} == "debug"
CONFIGURE_ENV+=		CFLAGS=-g
d36 2
a37 2
.if ${FLAVOR:L} == "static"
CONFIGURE_ENV+=		CFLAGS="-O2 -static"
d41 9
d51 3
d58 3
a60 4
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9/arm
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9/misc
	${INSTALL_DATA} ${WRKSRC}/doc/arm/* ${PREFIX}/share/doc/bind9/arm
a61 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/bind9
d65 3
@


1.7
log
@fix static flavour packaging. ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/10/22 15:42:56 espie Exp $
d3 1
a3 1
VERSION=	9.0.0
@


1.6
log
@Kill
FAKE=Yes
HAS_CONFIGURE, GNU_CONFIGURE, USE_IMAKE, NO_INSTALL_MANPAGES, USE_AUTOCONF
and bump NEED_VERSION accordingly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/10/04 21:53:59 jakob Exp $
d41 1
@


1.6.2.1
log
@fix static flavour packaging. ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/10/22 15:42:56 espie Exp $
a40 1
NO_SHARED_LIBS=		Yes
@


1.6.2.2
log
@MFC:
Update to BIND 9.1.1.  New features, bug fixes, security.
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
VERSION=	9.1.1
d6 1
a6 1
NEED_VERSION=	1.340
a19 1
SEPARATE_BUILD=		concurrent
d21 3
a23 3
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--localstatedir=/var \
			--with-openssl="/usr" \
d25 6
d32 1
a32 1
FLAVORS=		debug static threads
d35 2
a36 2
.if ${FLAVOR:L:Mdebug}
CFLAGS+=		"-g"
d39 2
a40 2
.if ${FLAVOR:L:Mstatic}
CFLAGS+=		"-static"
a43 9
.if ${FLAVOR:L:Mthreads}
CONFIGURE_ARGS+=	--enable-threads
.else
CONFIGURE_ARGS+=	--disable-threads
.endif

EXAMPLEFILES=	named.conf named.root \
		named.localhost named.loopback

a44 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9/arm
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/bind9/misc
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/bind9
d49 4
a52 3
	${INSTALL_MAN} ${WRKSRC}/doc/man/lwres/*.3 ${PREFIX}/man/man3
	${INSTALL_DATA} ${WRKSRC}/doc/arm/*.html ${PREFIX}/share/doc/bind9/arm
	${INSTALL_DATA} ${WRKSRC}/doc/arm/*.gif  ${PREFIX}/share/doc/bind9/arm
d54 1
a57 4
	@@sed s,y0y0y0,${TRUEPREFIX}, < ${FILESDIR}/bind9-enable > \
		${PREFIX}/sbin/bind9-enable
	@@chmod 555 ${PREFIX}/sbin/bind9-enable
	@@chown root:wheel ${PREFIX}/sbin/bind9-enable
@


1.6.2.3
log
@MFC:
Update to BIND 9.1.2.  This is a maintenance release, containing
fixes for a number of bugs in 9.1.1 but no new features. We recommend
that all users of earlier versions of BIND 9 upgrade to 9.1.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6.2.2 2001/03/30 22:50:36 naddy Exp $
d3 1
a3 1
VERSION=	9.1.2
@


1.6.2.4
log
@MFC:
typo in MASTER_SITES; requested by jakob@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6.2.3 2001/05/07 02:03:47 naddy Exp $
d9 1
a9 1
		ftp://ftp.sunet.se/pub/network/isc/bind9/${VERSION}/
@


1.5
log
@add fullname to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/09/21 10:17:53 jakob Exp $
d6 1
a6 1
NEED_VERSION=	1.302
@


1.4
log
@add static flavor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/09/16 15:39:19 jakob Exp $
d13 1
a13 1
MAINTAINER=     jakob@@openbsd.org
@


1.3
log
@remove bind9-enable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/09/16 15:28:01 jakob Exp $
d32 1
a32 1
FLAVORS=		debug
d34 1
d37 4
@


1.2
log
@- enable shared libraries
- install isc-config.sh
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/09/16 07:36:52 jakob Exp $
a38 1
	${INSTALL_PROGRAM} ${FILESDIR}/bind9-enable ${PREFIX}/sbin
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/09/16 07:32:08 jakob Exp $
d23 2
a24 1
			--localstatedir=/var
d26 2
a27 1
FAKE_FLAGS+=		MAKEDEFS='DESTDIR=${WRKINST}'
@


1.1.1.1
log
@A port of BIND v9.0.0

	BIND 9.0.0 is the first "general availability" release of BIND
	version 9. It is aimed at early adopters and those who wish to 
	make use of new 9.0 features, such as IPv6 and DNSSEC secure 
	resolution support.
@
text
@@
