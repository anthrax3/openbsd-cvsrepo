head	1.4;
access;
symbols
	OPENBSD_3_6:1.3.0.6
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.4
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.3.0.2
	OPENBSD_3_4_BASE:1.3
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.0.2
	OPENBSD_3_1_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2004.10.13.02.05.45;	author danh;	state dead;
branches;
next	1.3;

1.3
date	2003.04.22.15.11.05;	author danh;	state Exp;
branches;
next	1.2;

1.2
date	2002.06.16.20.01.20;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.12.11.15.36.03;	author danh;	state Exp;
branches;
next	;


desc
@@


1.4
log
@this has been replaced by net-snmp
@
text
@--- agent/mibgroup/mibII/interfaces.c.orig	Mon Jun 10 06:10:24 2002
+++ agent/mibgroup/mibII/interfaces.c	Tue Apr 22 10:28:42 2003
@@@@ -1889,11 +1889,10 @@@@ static int Interface_Scan_Get_Count (voi
 
 #else	/* hpux11 */
 
-static time_t scan_time = 0;
-
 static int Interface_Scan_Get_Count (void)
 {
-        time_t time_now = time(NULL);
+        static time_t scan_time = 0;
+	time_t time_now = time(NULL);
     
 	if (!Interface_Count || (time_now > scan_time + 60)) {
             scan_time = time_now;
@


1.3
log
@update to ucd-snmp 4.2.6

from Sergio Jimenez Romero <tripledes@@eslack.org>
@
text
@@


1.2
log
@sync
@
text
@d1 3
a3 5
$OpenBSD: patch-agent_mibgroup_mibII_interfaces_c,v 1.1 2001/12/11 15:36:03 danh Exp $
--- agent/mibgroup/mibII/interfaces.c.orig	Wed Nov 28 15:30:33 2001
+++ agent/mibgroup/mibII/interfaces.c	Sun Jun 16 13:44:49 2002
@@@@ -1684,15 +1684,16 @@@@ static int Interface_Scan_By_Index(int I
 }
d5 1
a6 1
-static int Interface_Count=0;
d11 3
a13 4
+	static int Interface_Count = 0;
+	static time_t scan_time = 0;
+
         time_t time_now = time(NULL);
a16 4
+	    Interface_Count = 0;
 	    Interface_Scan_Init();
 	    Interface_Count = 0;
 	    while (Interface_Scan_Next(NULL, NULL, NULL, NULL) != 0) {
@


1.1
log
@* fix bug where a partial walk shows extra dummy interface entries.
* add package patch level (p1)

patch from net-snmp pointed out by peter@@ and honzaf@@eunet.cz
@
text
@d1 4
a4 4
$OpenBSD$
--- agent/mibgroup/mibII/interfaces.c.orig	Tue Dec 11 10:01:18 2001
+++ agent/mibgroup/mibII/interfaces.c	Tue Dec 11 10:05:10 2001
@@@@ -1663,15 +1663,16 @@@@ static int Interface_Scan_By_Index(int I
d22 1
a23 1
 		Interface_Count++;
@

