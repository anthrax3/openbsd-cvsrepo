head	1.2;
access;
symbols
	OPENBSD_3_4:1.1.0.4
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.2
	OPENBSD_3_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.02.25.01.35.50;	author naddy;	state dead;
branches;
next	1.1;

1.1
date	2002.12.19.15.43.25;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.2
log
@remove workarounds for gcc2.95/sparc64 compiler bugs
@
text
@$OpenBSD: gcc-lib_cylink_Makefile,v 1.1 2002/12/19 15:43:25 lebel Exp $
--- lib/cylink/Makefile.orig	Tue Aug 14 01:58:00 2001
+++ lib/cylink/Makefile	Thu Dec 19 10:04:56 2002
@@@@ -60,6 +60,16 @@@@ ${LIBBIND}: ${OBJS}
 	${AR} ${LIBBIND} ${ARPREF} ${OBJS} ${ARSUFF}
 	${RANLIB} ${LIBBIND}
 
+sha.${O}:
+	mkdir ${THREADED} 2> /dev/null || test -d ${THREADED} -a -w ${THREADED}
+	${CC} ${CPPFLAGS} ${CFLAGS} -O0 ${BOUNDS} ${REENTRANT} -c $*.c \
+	 -o ${THREADED}/$*.${O}
+	-${LDS} ${LD} ${LD_LIBFLAGS} ${THREADED}/$*.${O} -o ${THREADED}/$*.out && \
+	 ${LDS} mv ${THREADED}/$*.out ${THREADED}/$*.${O}
+	${CC} ${CPPFLAGS} ${CFLAGS} -O0 ${BOUNDS} -c $*.c
+	-${LDS} ${LD} ${LD_LIBFLAGS} $*.${O} -o $*.out && \
+	 ${LDS} mv $*.out $*.${O}
+
 .c.${O}:
 	mkdir ${THREADED} 2> /dev/null || test -d ${THREADED} -a -w ${THREADED}
 	${CC} ${CPPFLAGS} ${CFLAGS} ${BOUNDS} ${REENTRANT} -c $*.c \
@


1.1
log
@workaround a gcc bug on sparc64 for lib/cylink/sha.c
@
text
@d1 1
a1 1
$OpenBSD$
@

