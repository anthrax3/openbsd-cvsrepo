head	1.5;
access;
symbols
	OPENBSD_4_0:1.4.0.16
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.14
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.12
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.10
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.8
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.4.0.6
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.4
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.3.0.6
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.4
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.2.0.2
	OPENBSD_2_9_BASE:1.2
	reinhard_2000_Dec_21:1.1.1.1
	reinhard:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2006.11.12.10.10.09;	author grunk;	state dead;
branches;
next	1.4;

1.4
date	2003.01.24.11.49.21;	author reinhard;	state Exp;
branches;
next	1.3;

1.3
date	2001.06.08.17.59.19;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2001.04.12.14.27.12;	author reinhard;	state Exp;
branches;
next	1.1;

1.1
date	2000.12.21.14.02.52;	author reinhard;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.12.21.14.02.52;	author reinhard;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to version 1.7.1, from new maintainer Stefan Sperling.
He also fixed wrong facts in the port's man page, updated MESSAGE accordingly,
removed an obsolete script, and improved the example configuration.

Thanks go to former maintainer Benoit LECOCQ, for having cared about the
port the time before.

ok sturm@@ and me
@
text
@#!/bin/sh
# $OpenBSD: pptp_reconnect,v 1.4 2003/01/24 11:49:21 reinhard Exp $ 
#
# PPTP reconnect script
#
# sample crontab entry: 
# 0,30 * * * * /sbin/ping -c 2 MY_REMOTE_PEER_IP >/dev/null || PREFIX/sbin/pptp-reconnect
#
#
# INSTALL-INSTRUCTIONS: edit following IP and uncomment the line
#MODEMIP=10.0.0.138

PATH=/bin:/usr/bin:/sbin:/usr/sbin:PREFIX/sbin

if [ "$MODEMIP" = "" ]; then
	echo "You have to edit the pptp-reconnect script."
	exit
fi

echo "Killing pppd."
kill -9 `ps -axocomm,pid | awk '/pppd/ {print $2}'`
/bin/sleep 3

echo -n "Killing pptp"
kill -9 `ps -axocomm,pid | grep -v pptp-reconnect | awk '/pptp/ {print $2}'`
/bin/sleep 3

if [ -S /var/run/pptp/$MODEMIP ]; then
	/bin/rm -f /var/run/pptp/$MODEMIP
	echo -n " (removing socket)"
fi
echo "."

echo "Establishing connection."
echo "=========================================================" >> /var/log/ppp.log 
echo "Establishing connection at `date`." >> /var/log/ppp.log
PREFIX/sbin/pptp $MODEMIP >> /var/log/ppp.log 2>&1
/bin/sleep 7
@


1.4
log
@update to pptp-1.1.0;
thx fgs@@ for testing and tweaking
@
text
@d2 1
a2 1
# $OpenBSD: pptp_reconnect,v 1.3 2001/06/08 17:59:19 fgsch Exp $ 
@


1.3
log
@remove ipf/ipnat references; reinhard@@ ok.
@
text
@d2 1
a2 1
# $OpenBSD: pptp_reconnect,v 1.2 2001/04/12 14:27:12 reinhard Exp $ 
d12 1
a12 1
 
d21 1
a21 1
kill -9 `ps -ax|grep pppd|grep -v grep|awk '{print $1}'`
d24 2
a25 2
echo "Killing pptp."
kill -9	`ps -ax|grep pptp|grep -v pptp-reconnect|grep -v grep|awk '{print $1}'`
d30 1
d32 1
d36 1
a36 1
echo "Establishing connection at `date`." >> /var/log/ppp.log 
@


1.2
log
@*) add NOTE about Alcatel ADSL modem vulnerabilities
*) nicer reconnect script
*) bump NEED_VERSION
*) integrate COMMENT
*) various cleanups (esp. for bbaa flavor)
@
text
@d2 1
a2 1
# $OpenBSD: pptp_reconnect,v 1.1.1.1 2000/12/21 14:02:52 reinhard Exp $ 
a36 4

echo "Flushing rulesets:"
/sbin/ipf -Fa -f /etc/ipf.rules
/sbin/ipnat -CF -f /etc/ipnat.rules
@


1.1
log
@Initial revision
@
text
@d2 1
a2 1
# $OpenBSD$ 
d6 2
a7 1
# sample crontab entry: 0,30 * * * * /sbin/ping -c 2 MY_REMOTE_PEER_IP >/dev/null || /usr/local/sbin/pptp-reconnect
d10 1
a10 1
# INSTALL-INSTRUCTIONS: edit below ip and uncomment the line
d28 1
a28 1
if [ -x /var/run/pptp/$MODEMIP ]; then
d33 3
a35 1
PREFIX/sbin/pptp $MODEMIP >/var/log/ppp.log 2>&1
@


1.1.1.1
log
@pptp-linux is an implementation of the PPTP protocol for Linux and
other Unix systems.

port based on NetBSD package.

thanks karma@@altern.org and Alexander.Farber@@t-online.de for testing.
@
text
@@
