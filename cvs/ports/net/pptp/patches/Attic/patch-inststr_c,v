head	1.4;
access;
symbols
	OPENBSD_5_6:1.3.0.22
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.20
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.18
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.16
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.14
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.12
	OPENBSD_5_0:1.3.0.10
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.8
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.6
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.2.0.6
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.0.10
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.8
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.6
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.4
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.10.08.16.44.58;	author stsp;	state dead;
branches;
next	1.3;
commitid	7jWfdOcvyxIGBB1b;

1.3
date	2009.03.08.21.57.24;	author stsp;	state Exp;
branches;
next	1.2;

1.2
date	2007.10.23.22.13.38;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.24.00.57.58;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Send net/pptp to the attic. It requires an MPPE-capable ppp client
which we don't have in base anymore. No objections from ports@@
@
text
@$OpenBSD: patch-inststr_c,v 1.3 2009/03/08 21:57:24 stsp Exp $
--- inststr.c.orig	Wed May 14 07:33:55 2008
+++ inststr.c	Thu Mar  5 23:07:12 2009
@@@@ -20,7 +20,7 @@@@ inststr(int argc, char **argv, char **environ, char *s
 
         for (ptr = argv[0]; *ptr; *(ptr++) = '\0');
 
-        strcpy(argv[0], src);
+        strlcpy(argv[0], src, sizeof(argv[0]));
     } else
     {
         /* Stolen from the source to perl 4.036 (assigning to $0) */
@@@@ -31,8 +31,9 @@@@ inststr(int argc, char **argv, char **environ, char *s
         /* than lower numbered elements.                          */
         char *ptr, *ptr2;
         int count;
+        int aligned;
         UL mask = ~(UL)(PTRSIZE == 4 ? 3 : PTRSIZE == 8 ? 7 : PTRSIZE == 16 ? 15 : 0);
-        int aligned = (mask < ~(UL)0) && (((UL)(argv[0]) & mask) == (UL)(argv[0]));
+        aligned = (mask < ~(UL)0) && (((UL)(argv[0]) & mask) == (UL)(argv[0]));
         ptr = argv[0] + strlen(argv[0]);
         if (argv[argc - 1] >= argv[1]) {
             /* argv pointers in ascending memory order */
@


1.3
log
@Fix build with gcc-2.95 (tested on sparc, simh-vax was too slow).

Remove some useless linux-specific code which tried to modify
the routing table by running "/bin/ip". Because this code has
no error checking and failed silently, no one noticed it.
Noticed it now because it didn't compile with gcc-2.95.

Don't install useless documentation.
Install useful notes on protocol insecurity instead.

Tweak the man page a little. Dunno if anyone is still using
Bezeq ADSL modems that need the --quirks option, but move
the information here just in case.

Clean up MESSAGE; don't shout at everybody about security holes
in a particular kind of modem that's almost 10 years old.

ok naddy@@
@
text
@d1 1
a1 1
$OpenBSD: patch-inststr_c,v 1.2 2007/10/23 22:13:38 naddy Exp $
@


1.2
log
@* Update maintainer email address.
* Add detailed option descriptions to pptp(8) man page.
* Move OpenBSD configuration examples from text file
  ${PREFIX}/share/doc/pptp/USING into pptp(8) man page,
  and remove patch to ${WRKSRC}/USING. Extend and
  revise examples while at it.
* Add patch to ${WRKSRC}/util.c to make pptp log normal
  informational messages with level LOG_INFO instead of LOG_NOTICE.
* Update pkg/DESCR with a new description based on upstream web site.
* Fix URL to list of pptp security flaws in pkg/MESSAGE.
* [Re-]Create patches with `make update-patches'.
* Add patch to ${WRKSRC}/pptp_gre.c to automatically enable
  the net.inet.gre.allow sysctl before trying to bind
  the GRE socket.
* Remove '@@sysctl net.inet.gre.allow=1' from PLIST.

From: maintainer Stefan Sperling
@
text
@d1 3
a3 3
$OpenBSD: patch-inststr_c,v 1.1 2005/03/24 00:57:58 naddy Exp $
--- inststr.c.orig	Mon Feb 13 04:07:42 2006
+++ inststr.c	Tue Sep 18 07:24:08 2007
d13 11
@


1.1
log
@update to 1.6.0; from new maintainer Waldemar Brodkorb <wbx@@openbsd.de>
@
text
@d1 4
a4 4
$OpenBSD$
--- inststr.c.orig	Sat Mar  5 16:20:34 2005
+++ inststr.c	Sat Mar  5 16:24:38 2005
@@@@ -20,7 +20,7 @@@@ inststr(int argc, char **argv, char **en
@

