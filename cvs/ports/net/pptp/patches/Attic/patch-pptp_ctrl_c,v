head	1.3;
access;
symbols
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.0.4
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.2
	OPENBSD_4_1_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2008.11.11.16.23.26;	author naddy;	state dead;
branches;
next	1.2;

1.2
date	2007.10.23.22.13.38;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2006.09.22.02.00.50;	author pvalchev;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to 1.7.2; from maintainer Stefan Sperling
@
text
@$OpenBSD: patch-pptp_ctrl_c,v 1.2 2007/10/23 22:13:38 naddy Exp $
--- pptp_ctrl.c.orig	Mon Feb 13 04:07:42 2006
+++ pptp_ctrl.c	Tue Sep 18 07:24:12 2007
@@@@ -457,6 +457,7 @@@@ void pptp_conn_destroy(PPTP_CONN * conn)
 void pptp_fd_set(PPTP_CONN * conn, fd_set * read_set, fd_set * write_set,
                  int * max_fd)
 {
+    int sig_fd;
     assert(conn && conn->call);
     /* Add fd to write_set if there are outstanding writes. */
     if (conn->write_size > 0)
@@@@ -465,7 +466,7 @@@@ void pptp_fd_set(PPTP_CONN * conn, fd_set * read_set, 
     FD_SET(conn->inet_sock, read_set);
     if (*max_fd < conn->inet_sock) *max_fd = conn->inet_sock;
     /* Add signal pipe file descriptor to set */
-    int sig_fd = sigpipe_fd();
+    sig_fd = sigpipe_fd();
     FD_SET(sig_fd, read_set);
     if (*max_fd < sig_fd) *max_fd = sig_fd;
 }
@


1.2
log
@* Update maintainer email address.
* Add detailed option descriptions to pptp(8) man page.
* Move OpenBSD configuration examples from text file
  ${PREFIX}/share/doc/pptp/USING into pptp(8) man page,
  and remove patch to ${WRKSRC}/USING. Extend and
  revise examples while at it.
* Add patch to ${WRKSRC}/util.c to make pptp log normal
  informational messages with level LOG_INFO instead of LOG_NOTICE.
* Update pkg/DESCR with a new description based on upstream web site.
* Fix URL to list of pptp security flaws in pkg/MESSAGE.
* [Re-]Create patches with `make update-patches'.
* Add patch to ${WRKSRC}/pptp_gre.c to automatically enable
  the net.inet.gre.allow sysctl before trying to bind
  the GRE socket.
* Remove '@@sysctl net.inet.gre.allow=1' from PLIST.

From: maintainer Stefan Sperling
@
text
@d1 1
a1 1
$OpenBSD: patch-pptp_ctrl_c,v 1.1 2006/09/22 02:00:50 pvalchev Exp $
@


1.1
log
@gcc2
@
text
@d1 3
a3 3
$OpenBSD$
--- pptp_ctrl.c.orig	Thu Sep 21 19:03:03 2006
+++ pptp_ctrl.c	Thu Sep 21 19:03:19 2006
d12 1
a12 1
@@@@ -465,7 +466,7 @@@@ void pptp_fd_set(PPTP_CONN * conn, fd_se
@

