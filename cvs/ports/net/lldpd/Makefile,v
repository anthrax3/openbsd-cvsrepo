head	1.30;
access;
symbols
	OPENBSD_6_0:1.28.0.2
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.7.0.2
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.5.0.2
	OPENBSD_5_5_BASE:1.5
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	sthen_20130712:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.02.07.14.40.52;	author sthen;	state Exp;
branches;
next	1.29;
commitid	ZE8E0QcFnrAWfjCy;

1.29
date	2016.10.11.13.52.38;	author sthen;	state Exp;
branches;
next	1.28;
commitid	zI1ot5GxjIJQVzwV;

1.28
date	2016.06.28.17.03.27;	author ajacoutot;	state Exp;
branches;
next	1.27;
commitid	2Ty2T8CPfuAPg7SR;

1.27
date	2016.06.28.15.50.27;	author sthen;	state Exp;
branches;
next	1.26;
commitid	PZqMZh0aHsrVpRYL;

1.26
date	2016.06.18.13.57.45;	author sthen;	state Exp;
branches;
next	1.25;
commitid	N5B7cHfdIRjhlznR;

1.25
date	2016.03.20.18.00.05;	author sthen;	state Exp;
branches;
next	1.24;
commitid	2Nzdp3ZypaCQjCrB;

1.24
date	2016.02.25.00.46.57;	author sthen;	state Exp;
branches;
next	1.23;
commitid	KL5jwBJQPmcu2nFS;

1.23
date	2016.01.21.08.43.32;	author sthen;	state Exp;
branches;
next	1.22;
commitid	tVb7MZe0f4W6qFIj;

1.22
date	2015.10.18.10.37.06;	author sthen;	state Exp;
branches;
next	1.21;
commitid	eorgMvIUo59LBlxy;

1.21
date	2015.10.16.10.27.41;	author sthen;	state Exp;
branches;
next	1.20;
commitid	TA9LMFq9FHe1ITXf;

1.20
date	2015.10.01.09.56.11;	author sthen;	state Exp;
branches;
next	1.19;
commitid	mgoHD36nrHG0IzzA;

1.19
date	2015.09.17.12.35.14;	author sthen;	state Exp;
branches;
next	1.18;
commitid	GEmR11O8tngtZPJn;

1.18
date	2015.09.11.15.20.54;	author sthen;	state Exp;
branches;
next	1.17;
commitid	pXG91bcFK784hKzN;

1.17
date	2015.08.14.12.09.56;	author sthen;	state Exp;
branches;
next	1.16;
commitid	ITUU8GbSKscjpNhy;

1.16
date	2015.08.12.15.09.38;	author sthen;	state Exp;
branches;
next	1.15;
commitid	MTErA5dwheUhsxOl;

1.15
date	2015.07.18.22.31.04;	author sthen;	state Exp;
branches
	1.15.4.1;
next	1.14;
commitid	xMiPNiEmG0UT1v8U;

1.14
date	2015.04.05.15.57.17;	author sthen;	state Exp;
branches;
next	1.13;
commitid	m7H5k9CGrzOp6N2R;

1.13
date	2015.01.20.10.04.15;	author sthen;	state Exp;
branches;
next	1.12;
commitid	zTPKVS29b13t0Hkt;

1.12
date	2015.01.09.17.34.52;	author sthen;	state Exp;
branches;
next	1.11;
commitid	Jf0L2oZjUSH4x2C7;

1.11
date	2014.11.24.10.26.08;	author sthen;	state Exp;
branches;
next	1.10;
commitid	9XehgMaeb2H6IRqE;

1.10
date	2014.11.22.22.20.09;	author sthen;	state Exp;
branches;
next	1.9;
commitid	ztGcFPtTGv2pmfvI;

1.9
date	2014.10.13.16.56.28;	author sthen;	state Exp;
branches;
next	1.8;
commitid	6La2GtECwB7fp0vt;

1.8
date	2014.09.16.16.26.25;	author sthen;	state Exp;
branches;
next	1.7;
commitid	DKYdfNqFSxK79Gly;

1.7
date	2014.05.01.07.16.14;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2014.04.30.19.38.51;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2013.11.11.12.23.13;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2013.08.15.09.21.10;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2013.07.15.19.12.07;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2013.07.13.11.54.36;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.07.12.10.26.44;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.07.12.10.26.44;	author sthen;	state Exp;
branches;
next	;

1.15.4.1
date	2015.10.16.10.30.44;	author sthen;	state Exp;
branches;
next	;
commitid	HZn3v55bMab7A7yl;


desc
@@


1.30
log
@update to lldpd-0.9.6
@
text
@# $OpenBSD: Makefile,v 1.29 2016/10/11 13:52:38 sthen Exp $

COMMENT=	LLDP (802.1ab)/CDP/EDP/SONMP/FDP daemon and SNMP subagent

DISTNAME=	lldpd-0.9.6
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} \
		LLDP-MIB-200505060000Z.txt:0
EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX}

SHARED_LIBS +=	lldpctl                   2.2 # 11.0

CATEGORIES=	net

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

HOMEPAGE=	http://vincentbernat.github.com/lldpd/

# Program: ISC. Bundled MIB is from IEEE 802.1AB-2005; "Users of this
# standard may freely reproduce the MIB contained in this subclause so
# that it can be used for its intended purpose."
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c event_core event_extra pthread readline termcap

MASTER_SITES=	http://media.luffy.cx/files/lldpd/
MASTER_SITES0=	http://www.ieee802.org/1/files/public/MIBs/

FLAVORS=	snmp
FLAVOR?=

LIB_DEPENDS=	devel/libevent2

SEPARATE_BUILD=	Yes

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--with-privsep-chroot=/var/run/lldpd \
			--without-json \
			--without-xml
# OpenBSD already enables PIE by default where it works; don't force
# on remaining arch. But do keep -fstack-protector-all which the default
# --with-hardening also adds.
CONFIGURE_ARGS+=	--without-hardening
CFLAGS+=		-fstack-protector-all
CONFIGURE_ENV=		CPPFLAGS="${CPPFLAGS}" \
			LDFLAGS="${LDFLAGS}"
FAKE_FLAGS=		sysconfdir="${PREFIX}/share/examples/lldpd"

CPPFLAGS+=		-I${LOCALBASE}/include
LDFLAGS+=		-L${LOCALBASE}/lib

.if ${FLAVOR:Msnmp}
CONFIGURE_ARGS+=	--with-snmp
LIB_DEPENDS+=		net/net-snmp
WANTLIB += netsnmp netsnmpagent netsnmpmibs
WANTLIB += crypto kvm m perl util

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/snmp/mibs/
	${INSTALL_DATA} ${FULLDISTDIR}/LLDP-MIB-200505060000Z.txt \
		${PREFIX}/share/snmp/mibs/LLDP-MIB.txt
.endif

.include <bsd.port.mk>
@


1.29
log
@update to lldpd-0.9.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/06/28 17:03:27 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.9.5
@


1.28
log
@rc_ overrides are put after sourcing /etc/rc.d/rc.subr.

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/06/28 15:50:27 sthen Exp $
d5 1
a5 2
DISTNAME=	lldpd-0.9.4
REVISION=	1
@


1.27
log
@process titles now have an extra "." at the end; fix lldpd.rc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/06/18 13:57:45 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.26
log
@update to lldpd-0.9.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/03/20 18:00:05 sthen Exp $
d6 1
@


1.25
log
@update to lldpd-0.9.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/02/25 00:46:57 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.9.2
@


1.24
log
@update to lldpd-0.9.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/01/21 08:43:32 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.9.1
@


1.23
log
@update to lldpd-0.9.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/10/18 10:37:06 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.9.0
@


1.22
log
@update to lldpd-0.7.19, rolling in management address TLV fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/10/16 10:27:41 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.19
@


1.21
log
@add an upstream patch to lldpd: avoid an overflow on a (static) buffer
when a remote device advertises a too-large management address while still
respecting TLV boundaries.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/10/01 09:56:11 sthen Exp $
d5 1
a5 2
DISTNAME=	lldpd-0.7.18
REVISION=	0
@


1.20
log
@update to lldpd-0.7.18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/09/17 12:35:14 sthen Exp $
d6 1
@


1.19
log
@update to lldpd-0.7.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/09/11 15:20:54 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.17
@


1.18
log
@handle ifmedia64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/08/14 12:09:56 sthen Exp $
d5 1
a5 2
DISTNAME=	lldpd-0.7.16
REVISION=	1
d39 5
@


1.17
log
@don't let lldpd's configure script auto-detect json/xml2, this changed
in 0.7.15 and results in hidden deps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/08/12 15:09:38 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.16
log
@update to lldpd-0.7.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/07/18 22:31:04 sthen Exp $
d6 1
d37 3
a39 1
CONFIGURE_ARGS+=	--with-privsep-chroot=/var/run/lldpd
@


1.15
log
@update to lldpd-0.7.15
while there, install the mib with the -snmp flavour as requested by blambert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2015/04/05 15:57:17 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.15
d10 1
a10 1
SHARED_LIBS +=	lldpctl                   2.1 # 10.0
@


1.15.4.1
log
@MFC: add an upstream patch to lldpd: avoid an overflow on a (static) buffer
when a remote device advertises a too-large management address while still
respecting TLV boundaries.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/07/18 22:31:04 sthen Exp $
a5 1
REVISION=	0
@


1.14
log
@update to lldpd-0.7.14
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2015/01/20 10:04:15 sthen Exp $
d5 4
a8 1
DISTNAME=	lldpd-0.7.14
d10 1
a10 1
SHARED_LIBS +=	lldpctl                   2.0 # 9.0
d18 3
a20 1
# ISC
d26 1
d41 3
d49 5
a54 3

CPPFLAGS+=		-I${LOCALBASE}/include
LDFLAGS+=		-L${LOCALBASE}/lib
@


1.13
log
@remove patch to avoid using -fdiagnostics compiler flags; this was a ccache bug
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2015/01/09 17:34:52 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.13
d7 1
a7 1
SHARED_LIBS +=	lldpctl                   1.0 # 8.0
@


1.12
log
@update to lldpd 0.7.13

patch to avoid using -fdiagnostics compiler flags which are not supported
by our gcc, but AX_CFLAGS_GCC_OPTION thinks they are valid
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/11/24 10:26:08 sthen Exp $
d29 1
a29 2
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.69
@


1.11
log
@update to lldpd 0.7.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2014/11/22 22:20:09 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.12
d29 2
a30 1
CONFIGURE_STYLE=	gnu
@


1.10
log
@remove some USE_LIBTOOL=Yes that crept back in (this is now the default)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2014/10/13 16:56:28 sthen Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.11
d7 1
a7 1
SHARED_LIBS +=	lldpctl                   0.1 # 7.0
@


1.9
log
@update to lldpd 0.7.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/09/16 16:26:25 sthen Exp $
a27 1
USE_LIBTOOL=	Yes
@


1.8
log
@update to lldpd-0.7.10, take maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/05/01 07:16:14 jasper Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.10
d34 1
@


1.7
log
@update to lldpd-0.7.8

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2014/04/30 19:38:51 jasper Exp $
d5 1
a5 1
DISTNAME=	lldpd-0.7.8
d7 1
a7 1
SHARED_LIBS +=	lldpctl                   0.0 # 1.0
d10 2
@


1.6
log
@unbreak snmp flavor, libwrap is no more
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/11/11 12:23:13 jasper Exp $
d5 1
a5 2
DISTNAME=	lldpd-0.7.7
REVISION=	0
@


1.5
log
@- update to lldpd-0.7.7

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/08/15 09:21:10 sthen Exp $
d6 1
d38 1
a38 1
WANTLIB += crypto kvm m perl util wrap
@


1.4
log
@bump; ABI break due to SIOC{S,G}ETVLAN changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/07/15 19:12:07 jasper Exp $
d5 1
a5 2
DISTNAME=	lldpd-0.7.6
REVISION=	1
@


1.3
log
@Apply a patch from upstream to fix a warning on startup:
fcntl(8, F_SETFL): Operation not permitted
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/07/13 11:54:36 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.2
log
@remove CONFIGURE_ENV no longer needed, net/libbind now installs to a subdir
to avoid it being accidentally picked up.  ok ajacoutot@@ jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/07/12 10:26:44 sthen Exp $
d6 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
a31 2
# don't pick up libbind
CONFIGURE_ENV+=		ac_cv_search___res_init="none required"
@


1.1.1.1
log
@import ports/net/lldpd, an alternative to ladvd. ok jasper@@

LLDP (Link Layer Discovery Protocol) is an industry standard protocol
designed to supplant proprietary Link-Layer protocols such as
Extreme's EDP (Extreme Discovery Protocol) and CDP (Cisco Discovery
Protocol). The goal of LLDP is to provide an inter-vendor compatible
mechanism to deliver Link-Layer notifications to adjacent network
devices.

lldpd implements both reception and sending. It also implements an
SNMP subagent for net-snmp to get local and remote LLDP
information. The LLDP MIB is partially implemented but the most useful
tables are here. lldpd also partially implements LLDP-MED.

lldpd supports bridge, vlan and bonding. bonding need to be done on
real physical devices, not on bridges, vlans, etc. However, vlans can
be mapped on the bonding device. You can bridge vlan but not add vlans
on bridges. More complex setups may give false results.
@
text
@@
