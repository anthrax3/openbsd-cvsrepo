head	1.2;
access;
symbols
	OPENBSD_3_9:1.1.0.4
	OPENBSD_3_8:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2006.07.17.19.23.03;	author jcs;	state dead;
branches;
next	1.1;

1.1
date	2006.06.10.08.33.36;	author steven;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2006.06.11.08.23.24;	author sturm;	state Exp;
branches;
next	;

1.1.4.1
date	2006.06.11.08.23.55;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to tor-0.1.1.22, from maintainer

make default config drop privs to _tor user and group
@
text
@$OpenBSD: patch-src_common_util_c,v 1.1 2006/06/10 08:33:36 steven Exp $
--- src/common/util.c.orig	Fri Jun  9 18:22:20 2006
+++ src/common/util.c	Fri Jun  9 18:23:58 2006
@@@@ -609,7 +609,7 @@@@ esc_for_log(const char *s)
         len += 2;
         break;
       default:
-        if (TOR_ISPRINT(*cp))
+        if (TOR_ISPRINT(*cp) && ((uint8_t)*cp)<127) 
           ++len;
         else
           len += 4;
@@@@ -640,7 +640,7 @@@@ esc_for_log(const char *s)
         *outp++ = 'r';
         break;
       default:
-        if (TOR_ISPRINT(*cp)) {
+        if (TOR_ISPRINT(*cp) && ((uint8_t)*cp)<127) { 
           *outp++ = *cp;
         } else {
           tor_snprintf(outp, 5, "\\%03o", (uint8_t) *cp);
@


1.1
log
@SECURITY update to tor 0.1.1.20

fixes CVE-2006-0414

for details, see http://secunia.com/advisories/18576/
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.4.1
log
@MFC:
SECURITY update to tor 0.1.1.20

fixes CVE-2006-0414

for details, see http://secunia.com/advisories/18576/
@
text
@d1 1
a1 1
$OpenBSD: patch-src_common_util_c,v 1.1 2006/06/10 08:33:36 steven Exp $
@


1.1.2.1
log
@MFC:
SECURITY update to tor 0.1.1.20

fixes CVE-2006-0414

for details, see http://secunia.com/advisories/18576/
@
text
@d1 1
a1 1
$OpenBSD: patch-src_common_util_c,v 1.1 2006/06/10 08:33:36 steven Exp $
@

