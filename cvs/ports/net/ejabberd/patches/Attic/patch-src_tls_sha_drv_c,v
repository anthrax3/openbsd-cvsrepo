head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2010.12.23.22.54.39;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2010.10.07.17.00.18;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update ejabberd to 2.1.6

from viq (MAINTAINER)
@
text
@$OpenBSD: patch-src_tls_sha_drv_c,v 1.1 2010/10/07 17:00:18 jasper Exp $

Disable MD2 as this is disabled in OpenSSL now.
Patch via from Gentoo via https://support.process-one.net/browse/EJAB-1285

--- src/tls/sha_drv.c.orig	Wed Oct  6 13:18:03 2010
+++ src/tls/sha_drv.c	Wed Oct  6 13:18:16 2010
@@@@ -20,7 +20,6 @@@@
 
 #include <erl_driver.h>
 #include <openssl/sha.h>
-#include <openssl/md2.h>
 
 static ErlDrvData sha_drv_start(ErlDrvPort port, char *buf)
 {
@@@@ -36,11 +35,6 @@@@ static int sha_drv_control(ErlDrvData handle,
   ErlDrvBinary *b = NULL;
 
   switch (command) {
-  case 2:
-    rlen = MD2_DIGEST_LENGTH;
-    b = driver_alloc_binary(rlen);
-    if (b) MD2((unsigned char*)buf, len, (unsigned char*)b->orig_bytes);
-    break;
   case 224:
     rlen = SHA224_DIGEST_LENGTH;
     b = driver_alloc_binary(rlen);
@


1.1
log
@- add patches from gentoo to disable md2 (and unbreak ejabberd after the
openssl update).

ok viq (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
@

