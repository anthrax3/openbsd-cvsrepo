head	1.2;
access;
symbols
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	jasper_20070919:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2008.06.02.18.13.15;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2007.09.17.21.19.06;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.09.17.21.19.06;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- update to ejabberd-2.0.1
- drop privilegies in ejabberdctl
- add README.OpenBSD
from maintainer Wiktor Izdebski;  with tweaks from me
tested by Wiktor Izdebski, Simon Kuhnle and sthen@@
ok sthen@@
@
text
@#!/bin/sh
PREFIX="!!LOCALBASE!!"
EJLIBDIR="${PREFIX}/lib/ejabberd"
ID=`id -g`
EJID=`id -g !!JABBERDUSER!!`
export HOME="!!EJDBDIR!!"

if [ "$ID" -ne 0 -a "$ID" -ne "$EJID" ]; then
	echo "this command can only be run by root and the _ejabberd user" >&2
	exit 1
fi
if [ X"$1" == "X" ]; then
	echo "not enough arguments" >&2
	exit 2
fi
echo "$1" | grep -q "@@"
if [ $? -ne 0 ]; then
	nodename="ejabberd@@`hostname -s`"
else
	nodename=""
fi

if [ $ID -eq 0 ]; then
	exec su -l !!JABBERDUSER!! ${PREFIX}/bin/erl -noinput -pa ${EJLIBDIR}/ebin -sname ejabberdctl -s ejabberd_ctl -extra $nodename $@@
else
	exec ${PREFIX}/bin/erl -noinput -pa ${EJLIBDIR}/ebin -sname ejabberdctl -s ejabberd_ctl -extra $nodename $@@
fi
@


1.1
log
@Initial revision
@
text
@@


1.1.1.1
log
@(long overdue) import of ejabberd 1.1.3
 
ejabberd is a free and open source instant messaging server written in
Erlang. ejabberd is cross-platform, distributed, fault-tolerant, and
based on open standards to achieve real-time communication
(Jabber/XMPP).

submitted by viq <viq at viq.ath.cx> a long time ago,
with tweaks by various people on ports@@, martynas@@ and me

ok martynas@@
@
text
@@
