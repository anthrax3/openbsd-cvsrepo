head	1.12;
access;
symbols
	OPENBSD_6_0:1.10.0.2
	OPENBSD_6_0_BASE:1.10
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5;
locks; strict;
comment	@# @;


1.12
date	2017.02.02.23.01.30;	author sthen;	state Exp;
branches;
next	1.11;
commitid	KGoLg0D6Ev192WaH;

1.11
date	2017.02.02.21.36.33;	author sthen;	state Exp;
branches;
next	1.10;
commitid	a5qU8iZ9elua5Bo2;

1.10
date	2016.06.23.13.32.28;	author sthen;	state Exp;
branches;
next	1.9;
commitid	bDHhOx1w6nOYNjEd;

1.9
date	2016.06.22.21.33.55;	author sthen;	state Exp;
branches;
next	1.8;
commitid	WEomSn6nEQS0NBId;

1.8
date	2016.04.29.09.14.46;	author sthen;	state Exp;
branches;
next	1.7;
commitid	6XVVnVIa7LPkVR8B;

1.7
date	2016.04.18.09.48.09;	author sthen;	state Exp;
branches;
next	1.6;
commitid	C5L0VPd32o7RL2Sq;

1.6
date	2016.03.06.14.44.46;	author sthen;	state Exp;
branches;
next	1.5;
commitid	r5IOpm5MHPLiCLno;

1.5
date	2016.02.02.01.29.05;	author sthen;	state Exp;
branches;
next	1.4;
commitid	4rlK6pnnwabuUN4Z;

1.4
date	2016.01.31.09.29.03;	author sebastia;	state Exp;
branches;
next	1.3;
commitid	0BNuDvxq5ARJGkRe;

1.3
date	2016.01.03.18.22.23;	author sthen;	state Exp;
branches;
next	1.2;
commitid	4h3gGOf68ThaXyAE;

1.2
date	2016.01.03.18.20.48;	author sthen;	state Exp;
branches;
next	1.1;
commitid	v6XycDesAJsz0Vd4;

1.1
date	2015.11.16.20.30.34;	author sthen;	state Exp;
branches;
next	;
commitid	QAgG6YJbVIsIcAYm;


desc
@@


1.12
log
@Adjust icingaweb2 dependencies; don't force pecl-imagick, it's only needed
for exporting graphs to PDF.
@
text
@# $OpenBSD: Makefile,v 1.11 2017/02/02 21:36:33 sthen Exp $

COMMENT =	next-generation web UI for icinga

GH_ACCOUNT =	Icinga
GH_PROJECT =	icingaweb2
GH_TAGNAME =	v2.4.1
PKGNAME =	icinga-web2-${GH_TAGNAME:S/v//}
REVISION =	0

MODULES=	lang/php

RUN_DEPENDS =	lang/php/${MODPHP_VERSION},-intl \
		php-pdo_mysql-${MODPHP_VSPEC}|php-pdo_pgsql-${MODPHP_VSPEC}:lang/php/${MODPHP_VERSION},-pdo_mysql

NO_TEST =	Yes
NO_BUILD =	Yes

PREFIX =	${VARBASE}/www

do-configure:
	@@sed -i 's,^#!/usr/bin/env php.*,#!${MODPHP_BIN},' \
	    ${WRKSRC}/bin/icingacli

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/icinga-web2
	cd ${WRKSRC}; pax -rw ./ ${PREFIX}/icinga-web2/
	find ${PREFIX}/icinga-web2 -name '*.orig' | xargs rm
	ln -s ${TRUEPREFIX}/icinga-web2/bin/icingacli \
	    ${WRKINST}/usr/local/bin/

.include <bsd.port.mk>
@


1.11
log
@update to icingaweb2-2.4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2016/06/23 13:32:28 sthen Exp $
d9 1
d13 1
a13 2
RUN_DEPENDS =	graphics/pecl-imagick \
		lang/php/${MODPHP_VERSION},-intl \
@


1.10
log
@update to icinga2-web 2.3.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2016/06/22 21:33:55 sthen Exp $
d5 4
a8 6
V =		2.3.4
DISTNAME =	icinga-web2-$V
DISTFILES =	${DISTNAME}{v$V}.tar.gz
WRKDIST =	${WRKDIR}/icingaweb2-$V

MASTER_SITES =	https://github.com/Icinga/icingaweb2/archive/
@


1.9
log
@symlink icingacli from /var/www/icinga2-web/bin to /usr/local/bin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2016/04/29 09:14:46 sthen Exp $
d5 1
a5 2
V =		2.3.2
REVISION =	0
@


1.8
log
@update to icinga-web2-2.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2016/04/18 09:48:09 sthen Exp $
d6 1
d32 2
@


1.7
log
@update to Icinga Web 2 2.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2016/03/06 14:44:46 sthen Exp $
d5 1
a5 1
V =		2.3.1
@


1.6
log
@update to icinga-web2 2.2.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/02/02 01:29:05 sthen Exp $
d5 1
a5 1
V =		2.2.0
@


1.5
log
@Remove patches from the icingaweb2 package that were hacking around the
mismatch between chrooted and non-chrooted paths (there are both CLI
scripts and a web app; both need to refer to the same paths and as well
as being complicated, the patches weren't quite working correctly,
as noticed by sebastia@@).

Now you must setup a symlink "/var/www/var/www -> .." instead as
described in the new version of the pkg-readme, allowing icingaweb2 to
always use /var/www paths whether inside or outside the jail.

Note: Existing users of this package will need to create that symlink too.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2016/01/31 09:29:03 sebastia Exp $
d5 1
a5 2
V =		2.1.2
REVISION =	0
@


1.4
log
@Update to 2.1.2

OK sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/01/03 18:22:23 sthen Exp $
d6 1
@


1.3
log
@previous commit log should have read 'update to icinga-web2-2.1.1'
(and zap unnecessary comment)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/01/03 18:20:48 sthen Exp $
d5 1
a5 1
V =		2.1.1
@


1.2
log
@update to icinga-web2-2.1.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2015/11/16 20:30:34 sthen Exp $
a16 1
# Optional php extension: ldap
@


1.1
log
@Icinga Web 2 v2.1.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/06/05 06:00:21 robert Exp $
d5 1
a5 1
V =		2.1.0
@

