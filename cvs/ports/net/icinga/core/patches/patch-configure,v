head	1.16;
access;
symbols
	OPENBSD_6_0:1.16.0.6
	OPENBSD_6_0_BASE:1.16
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.2.0.2
	OPENBSD_5_0_BASE:1.2
	sthen20110328:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.16
date	2015.07.15.20.10.58;	author sthen;	state Exp;
branches;
next	1.15;
commitid	hO5LZV7HnUgk3UjN;

1.15
date	2015.03.30.22.43.42;	author sthen;	state Exp;
branches;
next	1.14;
commitid	2u23FDgXtDV7KYOv;

1.14
date	2014.08.14.09.00.06;	author sthen;	state Exp;
branches;
next	1.13;
commitid	fn2VysvZA7boXkTA;

1.13
date	2014.08.11.18.34.59;	author sthen;	state Exp;
branches;
next	1.12;
commitid	FlyBWcy2A3bji8Gx;

1.12
date	2014.05.10.22.15.38;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2014.03.25.01.26.33;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2013.10.25.16.16.23;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2013.05.07.15.34.47;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2012.11.29.22.34.16;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2012.10.18.20.04.58;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2012.06.19.10.01.52;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2012.05.17.11.05.40;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2011.12.03.15.01.38;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2011.09.22.15.25.28;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.11.13.57.41;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.28.14.06.08;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.03.28.14.06.08;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.16
log
@update to icinga 1.13.3
@
text
@$OpenBSD: patch-configure,v 1.15 2015/03/30 22:43:42 sthen Exp $
--- configure.orig	Mon Mar 30 09:38:53 2015
+++ configure	Mon Mar 30 23:28:35 2015
@@@@ -5245,7 +5245,7 @@@@ cat >>confdefs.h <<_ACEOF
 #define DEFAULT_NAGIOS_GROUP "$icinga_grp"
 _ACEOF
 
-INSTALL_OPTS="-o $icinga_user -g $icinga_grp"
+INSTALL_OPTS=""
 
 
 
@@@@ -5266,7 +5266,7 @@@@ fi
 
 
 
-COMMAND_OPTS="-o $command_user -g $command_grp"
+COMMAND_OPTS=""
 
 
 
@@@@ -6018,7 +6018,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
   $as_echo_n "(cached) " >&6
 else
   ac_save_LIBS="$LIBS"
-	LIBS="-lgd -lttf -lpng -ljpeg -lz -lm $LIBS"
+	LIBS="-lgd -lpng -ljpeg -lz -lm $LIBS"
 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 	/* Override any gcc2 internal prototype to avoid an error.  */
@@@@ -6049,7 +6049,7 @@@@ fi
 $as_echo "yes" >&6; }
 
 			GDLIBFOUND=yep
-			GDLIBS="-lgd -lttf -lpng -ljpeg -lz -lm"
+			GDLIBS="-lgd -lpng -ljpeg -lz -lm"
 
 	else
 	  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
@@@@ -7308,7 +7308,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
 		found_ssl=no
 		for dir in $ssl_lib_dir $ssl_dir /usr/lib/*-linux-gnu /usr/lib64 /usr/lib /usr/local/lib /usr/lib/ssl /usr/ssl/lib /usr/openssl/lib /usr/pkg/lib  /usr/freeware/lib/openssl; do
 			ssllibdir="$dir"
-			if test -f "$dir/libssl.so"; then
+			if test -f "$dir/libssl.a"; then
 				found_ssl=yes
 			        break
 			fi
@


1.15
log
@update to icinga-1.13.0
@
text
@d1 1
a1 4
$OpenBSD: patch-configure,v 1.14 2014/08/14 09:00:06 sthen Exp $

merged patches; cannot add new files to cvs until unlock

@


1.14
log
@normalize patches, now that trees are unlocked
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.13 2014/08/11 18:34:59 sthen Exp $
d5 3
a7 3
--- configure.orig	Sat May 10 21:27:34 2014
+++ configure	Sat May 10 22:57:55 2014
@@@@ -5240,7 +5240,7 @@@@ cat >>confdefs.h <<_ACEOF
d16 1
a16 1
@@@@ -5261,7 +5261,7 @@@@ fi
d25 1
a25 1
@@@@ -5999,7 +5999,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d34 1
a34 1
@@@@ -6030,7 +6030,7 @@@@ fi
d43 1
a43 1
@@@@ -7289,7 +7289,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.13
log
@use the correct format string for time_t on i386, unbreaking logging there.
patch bodged into patch-configure for now, to be split out after full unlock.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.12 2014/05/10 22:15:38 sthen Exp $
a51 11
--- base/logging.c.orig	Mon Jul 28 23:13:36 2014
+++ base/logging.c	Mon Jul 28 23:12:30 2014
@@@@ -306,7 +306,7 @@@@ int write_to_log_with_host_service(char *buffer, unsig
 	strip(buffer);
 
 	/* write the buffer to the log file */
-	fprintf(fp, "[%lu] %s\n", log_time, buffer);
+	fprintf(fp, "[%lld] %s\n", (long long)log_time, buffer);
 	fflush(fp);
 
 #ifdef USE_EVENT_BROKER
@


1.12
log
@update to icinga-1.11.3
@
text
@d1 4
a4 1
$OpenBSD: patch-configure,v 1.11 2014/03/25 01:26:33 sthen Exp $
d52 11
@


1.11
log
@update to Icinga 1.11.0
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.10 2013/10/25 16:16:23 sthen Exp $
--- configure.orig	Thu Mar 13 10:46:50 2014
+++ configure	Tue Mar 25 00:05:17 2014
@@@@ -5242,7 +5242,7 @@@@ cat >>confdefs.h <<_ACEOF
d13 1
a13 1
@@@@ -5263,7 +5263,7 @@@@ fi
d22 1
a22 1
@@@@ -6001,7 +6001,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d31 1
a31 1
@@@@ -6032,7 +6032,7 @@@@ fi
d40 1
a40 1
@@@@ -7299,7 +7299,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.10
log
@update to icinga 1.10, for more information see
https://www.icinga.org/2013/10/24/icinga-1-10-released/

as mentioned in a new addition to the readme, icinga-web users may need to
clear their cache with /var/www/icinga-web/bin/clearcache.sh
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.9 2013/05/07 15:34:47 sthen Exp $
--- configure.orig	Tue Oct 22 10:40:32 2013
+++ configure	Fri Oct 25 00:29:23 2013
@@@@ -5240,7 +5240,7 @@@@ cat >>confdefs.h <<_ACEOF
d13 1
a13 1
@@@@ -5261,7 +5261,7 @@@@ fi
d22 1
a22 1
@@@@ -5912,7 +5912,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d31 1
a31 1
@@@@ -5943,7 +5943,7 @@@@ fi
d40 1
a40 1
@@@@ -7210,7 +7210,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.9
log
@Update to Icinga 1.9, thanks to rpe@@ for feedback and testing the beta.
Also thanks to Michael Friedrich (upstream) for sending out helpful notes
to package maintainers about changes in the release which may affect them,
we like projects who do that :)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.8 2012/11/29 22:34:16 sthen Exp $
--- configure.orig	Fri Apr 19 11:15:19 2013
+++ configure	Sat Apr 20 16:37:01 2013
@@@@ -5224,7 +5224,7 @@@@ cat >>confdefs.h <<_ACEOF
d13 1
a13 1
@@@@ -5245,7 +5245,7 @@@@ fi
d22 1
a22 1
@@@@ -5846,7 +5846,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d31 1
a31 1
@@@@ -5877,7 +5877,7 @@@@ fi
d40 1
a40 1
@@@@ -7122,7 +7122,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.8
log
@Bugfix update to Icinga 1.8.2, including
- fix bug in classic UI for ack's and notifications
- fix performance problem and some memory leaks with IDOUtils

https://wiki.icinga.org/display/Dev/Icinga+Core+Changelog#IcingaCoreChangelog-182-28112012

Also fix static cgi binaries on PIE architectures.
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.7 2012/10/18 20:04:58 sthen Exp $
--- configure.orig	Wed Nov 28 15:14:51 2012
+++ configure	Thu Nov 29 22:24:42 2012
@@@@ -5189,7 +5189,7 @@@@ cat >>confdefs.h <<_ACEOF
d13 1
a13 1
@@@@ -5210,7 +5210,7 @@@@ fi
d22 1
a22 1
@@@@ -5797,7 +5797,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d31 1
a31 1
@@@@ -5828,7 +5828,7 @@@@ fi
d40 1
a40 1
@@@@ -7057,7 +7057,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.7
log
@update Icinga to 1.8.0, testing (including icinga-web) and ok rpe@@

- slight tweaks to upgrade documentation while there; you should still
check the proper upgrade notes from upstream, but the README now points
idodb users at the actual location of the schema update files to save
a bit of hunting.
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.6 2012/06/19 10:01:52 sthen Exp $
--- configure.orig	Wed Oct 17 11:38:03 2012
+++ configure	Thu Oct 18 13:36:58 2012
d42 1
a42 1
 		for dir in $ssl_lib_dir $ssl_dir /usr/lib64 /usr/lib /usr/local/lib /usr/lib/ssl /usr/ssl/lib /usr/openssl/lib /usr/pkg/lib  /usr/freeware/lib/openssl; do
@


1.6
log
@update to Icinga 1.7.1; various minor fixes
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.5 2012/05/17 11:05:40 sthen Exp $
--- configure.orig	Fri Jun 15 18:26:09 2012
+++ configure	Mon Jun 18 18:28:02 2012
@@@@ -5186,7 +5186,7 @@@@ cat >>confdefs.h <<_ACEOF
d13 1
a13 1
@@@@ -5207,7 +5207,7 @@@@ fi
d22 1
a22 1
@@@@ -5811,7 +5811,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d31 1
a31 1
@@@@ -5842,7 +5842,7 @@@@ fi
d40 1
a40 1
@@@@ -7109,7 +7109,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.5
log
@update to icinga 1.7.0 - IDO users note, as well as the usual DB upgrade
steps, edit icinga.cfg and change broker_module=/usr/local/bin/idomod.o
to broker_module=/usr/local/lib/idomod.so, this is also mentioned in the
README.

Notable fixes:
- flexible downtimes now last the duration specified once triggered
- avoid insane looping through event list when rescheduling checks
@
text
@d1 4
a4 38
$OpenBSD: patch-configure,v 1.4 2011/12/03 15:01:38 sthen Exp $
--- configure.orig	Tue May 15 14:00:56 2012
+++ configure	Thu May 17 10:19:15 2012
@@@@ -4859,20 +4859,20 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_cma_pthread_create" >&5
 $as_echo "$ac_cv_lib_cma_pthread_create" >&6; }
 if test "x$ac_cv_lib_cma_pthread_create" = xyes; then :
-  THREADLIBS="$THREADLIBS -lpthread"
+  THREADLIBS="$THREADLIBS -pthread"
 fi
 
 if test $ac_cv_lib_cma_pthread_create = yes; then
 	have_pthreads="yes"
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -lpthread" >&5
-$as_echo_n "checking for pthread_create in -lpthread... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -pthread" >&5
+$as_echo_n "checking for pthread_create in -pthread... " >&6; }
 if ${ac_cv_lib_pthread_pthread_create+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -4903,7 +4903,7 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_create" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_create" >&6; }
 if test "x$ac_cv_lib_pthread_pthread_create" = xyes; then :
-  THREADLIBS="$THREADLIBS -lpthread"
+  THREADLIBS="$THREADLIBS -pthread"
 fi
 
 if test $ac_cv_lib_pthread_pthread_create = yes; then
@@@@ -5194,7 +5194,7 @@@@ cat >>confdefs.h <<_ACEOF
d13 1
a13 1
@@@@ -5215,7 +5215,7 @@@@ fi
d22 1
a22 1
@@@@ -5819,7 +5819,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d31 1
a31 1
@@@@ -5850,7 +5850,7 @@@@ fi
d40 1
a40 1
@@@@ -7117,7 +7117,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.4
log
@update to Icinga 1.6.1
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2011/09/22 15:25:28 sthen Exp $
--- configure.orig	Wed Nov 30 12:08:58 2011
+++ configure	Wed Nov 30 19:35:06 2011
@@@@ -4819,20 +4819,20 @@@@ fi
d29 1
a29 1
@@@@ -4863,7 +4863,7 @@@@ fi
d38 1
a38 1
@@@@ -5154,7 +5154,7 @@@@ cat >>confdefs.h <<_ACEOF
d47 1
a47 1
@@@@ -5175,7 +5175,7 @@@@ fi
d56 1
a56 1
@@@@ -5636,7 +5636,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d65 1
a65 1
@@@@ -5667,7 +5667,7 @@@@ fi
d74 1
a74 1
@@@@ -6931,7 +6931,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.3
log
@update to icinga 1.5.1
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2011/05/11 13:57:41 sthen Exp $
--- configure.orig	Wed Aug 24 14:57:57 2011
+++ configure	Wed Aug 24 22:23:40 2011
@@@@ -4821,20 +4821,20 @@@@ fi
d29 1
a29 1
@@@@ -4865,7 +4865,7 @@@@ fi
d38 1
a38 1
@@@@ -5156,7 +5156,7 @@@@ cat >>confdefs.h <<_ACEOF
d47 1
a47 1
@@@@ -5177,7 +5177,7 @@@@ fi
d56 1
a56 1
@@@@ -5646,7 +5646,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d65 1
a65 1
@@@@ -5677,7 +5677,7 @@@@ fi
d74 1
a74 1
@@@@ -6941,7 +6941,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.2
log
@- update Icinga to 1.4.0
- tweak @@extraunexec's
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1.1.1 2011/03/28 14:06:08 sthen Exp $
--- configure.orig	Wed May 11 08:43:54 2011
+++ configure	Wed May 11 10:40:30 2011
@@@@ -4797,20 +4797,20 @@@@ fi
d29 1
a29 1
@@@@ -4841,7 +4841,7 @@@@ fi
d38 1
a38 1
@@@@ -5132,7 +5132,7 @@@@ cat >>confdefs.h <<_ACEOF
d47 1
a47 1
@@@@ -5153,7 +5153,7 @@@@ fi
d55 2
a56 2
 MAIL_PROG=no
@@@@ -5502,7 +5502,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d65 1
a65 1
@@@@ -5533,7 +5533,7 @@@@ fi
d74 1
a74 1
@@@@ -6789,7 +6789,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.1
log
@Initial revision
@
text
@d1 12
a12 4
$OpenBSD$
--- configure.orig	Tue Feb 15 13:28:41 2011
+++ configure	Fri Mar 25 08:32:55 2011
@@@@ -4774,13 +4774,13 @@@@ if test $ac_cv_lib_cma_pthread_create = yes; then
d20 1
a20 1
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then :
d29 1
a29 1
@@@@ -4811,7 +4811,7 @@@@ fi
d32 1
a32 1
 if test "x$ac_cv_lib_pthread_pthread_create" = x""yes; then :
d38 1
a38 1
@@@@ -5102,7 +5102,7 @@@@ cat >>confdefs.h <<_ACEOF
d47 1
a47 1
@@@@ -5123,7 +5123,7 @@@@ fi
d56 1
a56 1
@@@@ -5456,7 +5456,7 @@@@ $as_echo_n "checking for gdImagePng in -lgd (order 1).
d65 1
a65 1
@@@@ -5487,7 +5487,7 @@@@ fi
d74 1
a74 1
@@@@ -6725,7 +6725,7 @@@@ $as_echo_n "checking for SSL libraries... " >&6; }
@


1.1.1.1
log
@Import ports/net/icinga (with -I !, so the 'core' directory doesn't
become cvs-food). See the README file for information about migrating
from Nagios with minimal config changes.

The icinga-web API-backed user interface is a work in progress
and not yet linked to the build; the core program and classic web
interface are perfectly usable.

Comments/ok from pea@@, thanks for testing!

-- -- --
Icinga monitors network resources such as servers, routers, switches,
applications and services and notifies administrators or responsible
persons. It's a fork of Nagios and supports its extensive pool of
monitoring plug-ins. Current status information, historical logs
and reports can all be accessed via a web browser.
-- -- --
@
text
@@
