head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.05.12.09.37.03;	author sthen;	state dead;
branches;
next	1.1;
commitid	HpfUcqYDCTjXHiXR;

1.1
date	2015.02.06.22.53.27;	author sthen;	state Exp;
branches;
next	;
commitid	ZHxyFilGE59NRuYF;


desc
@@


1.2
log
@update to icinga2 2.3.4. mark BROKEN until I can get some handle on what's
going on with daemonization (not backgrounding when expected) and hangs seen
in some cases.
@
text
@$OpenBSD: patch-third-party_execvpe_execvpe_c,v 1.1 2015/02/06 22:53:27 sthen Exp $
--- third-party/execvpe/execvpe.c.orig	Fri Jan 16 19:54:06 2015
+++ third-party/execvpe/execvpe.c	Fri Jan 16 19:54:31 2015
@@@@ -17,7 +17,7 @@@@
    Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
    02111-1307 USA.  */
 
-#ifndef __FreeBSD__
+#if !defined(__FreeBSD__) && !defined(__OpenBSD__)
 #include <alloca.h>
 #endif /* _FreeBSD__ */
 #include <unistd.h>
@


1.1
log
@Update to icinga2-2.2.4. Change rc script to use "icinga2 daemon" and rc_bg to
force running in the background; it was previously using "icinga2 daemon -d",
but since 2.2.2 this has been hanging on OpenBSD.

Disable vfork as was done upstream on MacOS (to stop a hang there) in the
hope it may also stop a runtime hang seen occasionally here.

There are still some odd things going on and I don't think this is production-
ready on OpenBSD yet, so the warning in DESCR-main remains, but I think this
is not worse than 2.2.1.
@
text
@d1 1
a1 1
$OpenBSD$
@

