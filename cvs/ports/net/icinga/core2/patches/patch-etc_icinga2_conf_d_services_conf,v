head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.4
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2015.11.16.20.29.55;	author sthen;	state Exp;
branches;
next	1.2;
commitid	qYlDtork3dGtChXG;

1.2
date	2015.05.12.09.37.03;	author sthen;	state Exp;
branches;
next	1.1;
commitid	HpfUcqYDCTjXHiXR;

1.1
date	2014.11.22.00.13.03;	author sthen;	state Exp;
branches;
next	;
commitid	nmet3xtaN5ESeGNI;


desc
@@


1.3
log
@update to Icinga 2 v2.4.0, featuring a new RESTful API using basic auth
or client certificates for:

- filters, types, permissions
- query/create/modify/delete config objects at runtime
- status queries for global stats
- actions (e.g. acknowledge all service problems)
- event streams
@
text
@$OpenBSD: patch-etc_icinga2_conf_d_services_conf,v 1.2 2015/05/12 09:37:03 sthen Exp $
--- etc/icinga2/conf.d/services.conf.orig	Mon Nov 16 09:57:03 2015
+++ etc/icinga2/conf.d/services.conf	Mon Nov 16 17:02:41 2015
@@@@ -42,14 +42,14 @@@@ apply Service "ping6" {
 /*
  * Apply the `ssh` service to all hosts
  * with the `address` attribute defined and
- * the custom attribute `os` set to `Linux`.
+ * the custom attribute `os` set to `Linux` or `OpenBSD`.
  */
 apply Service "ssh" {
   import "generic-service"
 
   check_command = "ssh"
 
-  assign where (host.address || host.address6) && host.vars.os == "Linux"
+  assign where (host.address || host.address6) && (host.vars.os == "Linux" || host.vars.os == "OpenBSD")
 }
 
 
@


1.2
log
@update to icinga2 2.3.4. mark BROKEN until I can get some handle on what's
going on with daemonization (not backgrounding when expected) and hangs seen
in some cases.
@
text
@d1 3
a3 3
$OpenBSD: patch-etc_icinga2_conf_d_services_conf,v 1.1 2014/11/22 00:13:03 sthen Exp $
--- etc/icinga2/conf.d/services.conf.orig	Thu Mar 12 12:27:11 2015
+++ etc/icinga2/conf.d/services.conf	Thu Mar 12 15:09:03 2015
d17 1
a17 2
+  assign where (host.address || host.address6) && (host.vars.os == "OpenBSD" || host.vars.os == "Linux")
   ignore where host.name == "localhost" /* for upgrade safety */
d19 1
@


1.1
log
@update to icinga2 2.2.0
@
text
@d1 4
a4 4
$OpenBSD$
--- etc/icinga2/conf.d/services.conf.orig	Fri Nov 21 21:30:11 2014
+++ etc/icinga2/conf.d/services.conf	Fri Nov 21 21:31:34 2014
@@@@ -42,7 +42,7 @@@@ apply Service "ping6" {
d13 1
a13 1
@@@@ -50,6 +50,7 @@@@ apply Service "ssh" {
d16 2
a17 2
   assign where host.address && host.vars.os == "Linux"
+  assign where host.address && host.vars.os == "OpenBSD"
@

