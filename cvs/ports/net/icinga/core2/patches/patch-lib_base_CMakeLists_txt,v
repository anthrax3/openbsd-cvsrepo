head	1.7;
access;
symbols
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.5.0.4
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.5.0.2
	OPENBSD_5_9_BASE:1.5
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.2
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2;
locks; strict;
comment	@# @;


1.7
date	2017.08.30.12.45.02;	author sthen;	state Exp;
branches;
next	1.6;
commitid	Muh113GzAbZxaQgV;

1.6
date	2017.02.02.21.36.18;	author sthen;	state Exp;
branches;
next	1.5;
commitid	KBZfhQxu073nU4eN;

1.5
date	2015.11.16.20.29.55;	author sthen;	state Exp;
branches;
next	1.4;
commitid	qYlDtork3dGtChXG;

1.4
date	2015.05.12.09.37.03;	author sthen;	state Exp;
branches;
next	1.3;
commitid	HpfUcqYDCTjXHiXR;

1.3
date	2014.11.22.00.13.03;	author sthen;	state Exp;
branches;
next	1.2;
commitid	nmet3xtaN5ESeGNI;

1.2
date	2014.06.25.11.14.50;	author sthen;	state Exp;
branches;
next	1.1;
commitid	jULsDe1DSTNLSLaL;

1.1
date	2014.06.24.16.51.35;	author sthen;	state Exp;
branches;
next	;
commitid	V36HVttV3iupUWj9;


desc
@@


1.7
log
@update to icinga2 2.7.0
@
text
@$OpenBSD: patch-lib_base_CMakeLists_txt,v 1.6 2017/02/02 21:36:18 sthen Exp $
Index: lib/base/CMakeLists.txt
--- lib/base/CMakeLists.txt.orig
+++ lib/base/CMakeLists.txt
@@@@ -53,8 +53,8 @@@@ add_library(base SHARED ${base_SOURCES})
 
 target_link_libraries(base ${CMAKE_DL_LIBS} ${Boost_LIBRARIES} ${OPENSSL_LIBRARIES} ${YAJL_LIBRARIES} mmatch socketpair)
 
-if(HAVE_LIBEXECINFO)
-    target_link_libraries(base execinfo)
+if(Backtrace_FOUND)
+  target_link_libraries(base ${Backtrace_LIBRARIES})
 endif()
 
 include_directories(${icinga2_SOURCE_DIR}/third-party/execvpe)
@


1.6
log
@update to icinga2-2.6.1
@
text
@d1 5
a5 4
$OpenBSD: patch-lib_base_CMakeLists_txt,v 1.5 2015/11/16 20:29:55 sthen Exp $
--- lib/base/CMakeLists.txt.orig	Tue Jan 31 10:18:20 2017
+++ lib/base/CMakeLists.txt	Thu Feb  2 14:05:28 2017
@@@@ -51,8 +51,8 @@@@ add_library(base SHARED ${base_SOURCES})
@


1.5
log
@update to Icinga 2 v2.4.0, featuring a new RESTful API using basic auth
or client certificates for:

- filters, types, permissions
- query/create/modify/delete config objects at runtime
- status queries for global stats
- actions (e.g. acknowledge all service problems)
- event streams
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_base_CMakeLists_txt,v 1.4 2015/05/12 09:37:03 sthen Exp $
--- lib/base/CMakeLists.txt.orig	Mon Nov 16 09:57:03 2015
+++ lib/base/CMakeLists.txt	Mon Nov 16 17:00:02 2015
@@@@ -49,8 +49,8 @@@@ add_library(base SHARED ${base_SOURCES})
@


1.4
log
@update to icinga2 2.3.4. mark BROKEN until I can get some handle on what's
going on with daemonization (not backgrounding when expected) and hangs seen
in some cases.
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_base_CMakeLists_txt,v 1.3 2014/11/22 00:13:03 sthen Exp $
--- lib/base/CMakeLists.txt.orig	Thu Mar 12 12:27:11 2015
+++ lib/base/CMakeLists.txt	Thu Mar 12 15:04:13 2015
@@@@ -45,8 +45,8 @@@@ add_library(base SHARED ${base_SOURCES})
@


1.3
log
@update to icinga2 2.2.0
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_base_CMakeLists_txt,v 1.2 2014/06/25 11:14:50 sthen Exp $
--- lib/base/CMakeLists.txt.orig	Mon Nov 17 09:52:21 2014
+++ lib/base/CMakeLists.txt	Fri Nov 21 14:07:10 2014
@@@@ -43,8 +43,8 @@@@ add_library(base SHARED ${base_SOURCES})
d6 1
a6 1
 target_link_libraries(base ${CMAKE_DL_LIBS} ${Boost_LIBRARIES} ${OPENSSL_LIBRARIES} ${YAJL_LIBRARIES} mmatch)
@


1.2
log
@s/BACKTRACE_/Backtrace_/ now the local file in cmake has been synced with the
cmake 3 version
@
text
@d1 4
a4 4
$OpenBSD: patch-lib_base_CMakeLists_txt,v 1.1 2014/06/24 16:51:35 sthen Exp $
--- lib/base/CMakeLists.txt.orig	Mon Jun 16 08:02:43 2014
+++ lib/base/CMakeLists.txt	Tue Jun 24 16:43:15 2014
@@@@ -37,8 +37,8 @@@@ add_library(base SHARED
d6 1
a6 1
 target_link_libraries(base ${CMAKE_DL_LIBS} ${Boost_LIBRARIES} ${OPENSSL_LIBRARIES} cJSON mmatch)
d9 1
a9 1
-  target_link_libraries(base execinfo)
d14 1
a14 1
 include_directories(${icinga2_SOURCE_DIR}/third-party/cJSON)
@


1.1
log
@pick up backtrace() functions from libexecinfo by using FindBacktrace.cmake

XXX comments because ports version of FindBacktrace uses BACKTRACE_ rather
than Backtrace_ as used in the version committed to cmake 3
@
text
@d1 1
a1 6
$OpenBSD$

XXX version in cmake 3 uses Backtrace_* in variable names, but version
in ports uses BACKTRACE_*. s/BACKTRACE_/Backtrace_/ when moving to the
committed version.

d10 2
a11 2
+if(BACKTRACE_FOUND)
+  target_link_libraries(base ${BACKTRACE_LIBRARIES})
@

