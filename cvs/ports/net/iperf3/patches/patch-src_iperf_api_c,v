head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.2
	OPENBSD_6_1_BASE:1.2
	lteo_20160918:1.1.1.1
	lteo:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2016.09.22.02.13.18;	author lteo;	state Exp;
branches;
next	1.1;
commitid	y2U19fpXiMHId0Ad;

1.1
date	2016.09.21.01.12.57;	author lteo;	state Exp;
branches
	1.1.1.1;
next	;
commitid	GWl0c1VhFHZhJ4MO;

1.1.1.1
date	2016.09.21.01.12.57;	author lteo;	state Exp;
branches;
next	;
commitid	GWl0c1VhFHZhJ4MO;


desc
@@


1.2
log
@Default to IPv4; suggested by sthen@@

Remove unnecessary DISTNAME; pointed out by jca@@

ok sthen@@
@
text
@$OpenBSD: patch-src_iperf_api_c,v 1.1.1.1 2016/09/21 01:12:57 lteo Exp $

Default to IPv4.

Missing initialization.

--- src/iperf_api.c.orig	Mon Jun  6 14:18:49 2016
+++ src/iperf_api.c	Sun Sep 18 01:51:24 2016
@@@@ -1839,7 +1839,7 @@@@ iperf_defaults(struct iperf_test *testp)
     testp->stats_interval = testp->reporter_interval = 1;
     testp->num_streams = 1;
 
-    testp->settings->domain = AF_UNSPEC;
+    testp->settings->domain = AF_INET;
     testp->settings->unit_format = 'a';
     testp->settings->socket_bufsize = 0;    /* use autotuning */
     testp->settings->blksize = DEFAULT_TCP_BLKSIZE;
@@@@ -2323,7 +2323,7 @@@@ iperf_print_results(struct iperf_test *test)
     struct iperf_stream *sp = NULL;
     iperf_size_t bytes_sent, total_sent = 0;
     iperf_size_t bytes_received, total_received = 0;
-    double start_time, end_time, avg_jitter = 0.0, lost_percent;
+    double start_time, end_time = 0.0, avg_jitter = 0.0, lost_percent;
     double bandwidth;
 
     /* print final summary for all intervals */
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
$OpenBSD$
d7 11
a17 2
--- src/iperf_api.c.orig	Mon Sep 19 14:27:01 2016
+++ src/iperf_api.c	Mon Sep 19 14:27:03 2016
@


1.1.1.1
log
@Import net/iperf3, a rewritten version of iperf.

iperf is a tool for active measurements of the maximum achievable bandwidth on
IP networks.  It supports tuning of various parameters related to timing,
protocols, and buffers.  For each test it reports the bandwidth, loss, and other
parameters.

This version, sometimes referred to as iperf3, is a redesign of an original
version developed at NLANR / DAST.  iperf3 is a new implementation from scratch,
with the goal of a smaller, simpler code base, and a library version of the
functionality that can be used in other programs. iperf3 also incorporates a
number of features found in other tools such as nuttcp and netperf, but were
missing from the original iperf.  Note that iperf3 is not backwards compatible
with the original iperf.

prodding & patches from jca@@, thanks!
feedback & ok jca@@ sthen@@
@
text
@@
