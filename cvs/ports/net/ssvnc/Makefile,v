head	1.31;
access;
symbols
	OPENBSD_6_2:1.31.0.4
	OPENBSD_6_2_BASE:1.31
	OPENBSD_6_1:1.31.0.2
	OPENBSD_6_1_BASE:1.31
	OPENBSD_6_0:1.30.0.2
	OPENBSD_6_0_BASE:1.30
	OPENBSD_5_9:1.29.0.4
	OPENBSD_5_9_BASE:1.29
	OPENBSD_5_8:1.29.0.6
	OPENBSD_5_8_BASE:1.29
	OPENBSD_5_7:1.29.0.2
	OPENBSD_5_7_BASE:1.29
	OPENBSD_5_6:1.28.0.6
	OPENBSD_5_6_BASE:1.28
	OPENBSD_5_5:1.28.0.4
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.28.0.2
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.26.0.6
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.26.0.4
	OPENBSD_5_2_BASE:1.26
	OPENBSD_5_1_BASE:1.26
	OPENBSD_5_1:1.26.0.2
	OPENBSD_5_0:1.24.0.2
	OPENBSD_5_0_BASE:1.24
	OPENBSD_4_9:1.22.0.2
	OPENBSD_4_9_BASE:1.22
	OPENBSD_4_8:1.18.0.2
	OPENBSD_4_8_BASE:1.18
	OPENBSD_4_7:1.14.0.2
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.8.0.2
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	sthen_20080521:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2017.02.26.20.11.53;	author sthen;	state Exp;
branches;
next	1.30;
commitid	N4DNOCqgqkD1TWKq;

1.30
date	2016.03.11.23.03.21;	author naddy;	state Exp;
branches;
next	1.29;
commitid	gGRDwY9dCtFfKKUi;

1.29
date	2015.02.16.22.57.11;	author naddy;	state Exp;
branches;
next	1.28;
commitid	0dx3c9ckf7dE4tx1;

1.28
date	2013.04.20.16.26.25;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.11.11.35.57;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2011.09.16.11.13.40;	author espie;	state Exp;
branches;
next	1.25;

1.25
date	2011.09.15.20.24.16;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2011.07.02.10.37.05;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.04.27.22.07.08;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2010.11.19.22.31.38;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2010.11.11.17.20.28;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2010.10.18.18.36.58;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.08.24.14.07.29;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.05.05.13.35.02;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.04.24.20.18.39;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2010.04.10.13.42.25;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.03.29.07.53.51;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.12.31.14.49.45;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2009.12.22.00.31.23;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.10.31.16.03.01;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.10.12.39.29;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2009.10.10.09.28.31;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2009.08.10.06.33.43;	author kili;	state Exp;
branches;
next	1.8;

1.8
date	2009.06.23.20.57.46;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.04.05.12.12.23;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.03.27.02.04.44;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.03.11.21.39.10;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.13.15.08.27;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2008.07.10.21.25.55;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2008.07.08.15.46.02;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2008.05.21.22.04.27;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.05.21.22.04.27;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.31
log
@honour CC, CXX
@
text
@# $OpenBSD: Makefile,v 1.30 2016/03/11 23:03:21 naddy Exp $

COMMENT-gui =		enhanced TightVNC client GUI and wrappers
COMMENT-main =		enhanced TightVNC client

V =			1.0.29

DISTNAME =		ssvnc-$V.src
PKGNAME =		ssvnc-$V
EPOCH =			0
FULLPKGNAME-gui =	ssvnc-$V
FULLPKGNAME-main =	ssvnc-viewer-$V
REVISION-gui =		2
REVISION-main =		0

CATEGORIES =		net x11

HOMEPAGE =		http://www.karlrunge.com/x11vnc/ssvnc.html

MAINTAINER =		Stuart Henderson <sthen@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=ssvnc/}

MULTI_PACKAGES =-main -gui

MAKE_ENV =	CFLAGS="${CFLAGS}" CXXFLAGS="${CXXFLAGS}" \
		CC="${CC}" CXX="${CXX}"

WRKDIST =	${WRKDIR}/ssvnc-$V

NO_TEST =	Yes

MODULES =	x11/tk

WANTLIB-main =		ICE SM X11 Xau Xaw Xdmcp Xext Xpm Xmu Xt c z jpeg>=62
LIB_DEPENDS-main =	graphics/jpeg

WANTLIB-gui =		c crypto ssl
RUN_DEPENDS-gui =	devel/desktop-file-utils \
			net/avahi \
			net/ssvnc,-main \
			security/stunnel \
			${MODTK_RUN_DEPENDS}

CONFIGURE_STYLE =	imake noman
XMKMF =			xmkmf

VNCSRC =		${WRKSRC}/vnc_unixsrc/
VNCLIB =		${PREFIX}/lib/ssvnc/

pre-configure:
	cd ${WRKSRC}/scripts; ${SUBST_CMD} ssvnc util/ss_vncviewer

do-configure:
	cd ${VNCSRC}/libvncauth; ${XMKMF}
	cd ${VNCSRC}/vncviewer; ${XMKMF}

do-build:
	cd ${VNCSRC}/libvncauth; ${SETENV} ${MAKE_ENV} ${MAKE}
	cd ${VNCSRC}/vncviewer; ${SETENV} ${MAKE_ENV} ${MAKE}
	cd ${WRKSRC}/vncstorepw; ${SETENV} ${MAKE_ENV} ${MAKE}

do-install:
	${INSTALL_PROGRAM_DIR} ${VNCLIB}
	cd ${WRKSRC}/scripts; tar cf - * | tar xf - -C ${VNCLIB}
	${INSTALL_MAN} ${WRKSRC}/man/man1/ssvnc.1 ${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKSRC}/man/man1/ssvncviewer.1 ${PREFIX}/man/man1/vncviewer.1
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/ssvnc.desktop ${PREFIX}/share/applications
	${INSTALL_PROGRAM} ${VNCSRC}/vncviewer/vncviewer ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/vncstorepw/vncstorepw ${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/vncstorepw/ultravnc_dsm_helper ${VNCLIB}
.for i in vncstorepw/lim_accept.so vncstorepw/unwrap.so
	if test -r ${WRKSRC}/$i; then ${INSTALL_DATA} ${WRKSRC}/$i ${VNCLIB}; fi
.endfor
.for i in ssvnc tsvnc sshvnc
	${WRKSRC}/wr_tool ${PREFIX}/bin/$i ${TRUEPREFIX}/lib/ssvnc/$i
.endfor

.include <bsd.port.mk>
@


1.30
log
@remove NO_SHARED_LIBS and merge PFRAG.shared into PLIST; ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/02/16 22:57:11 naddy Exp $
d29 2
a30 1
MAKE_ENV =	CFLAGS="${CFLAGS}" CXXFLAGS="${CXXFLAGS}"
@


1.29
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/04/20 16:26:25 sthen Exp $
d13 1
a13 1
REVISION-gui =		1
d29 1
a29 2
MAKE_ENV =	CFLAGS="${CFLAGS}" CXXFLAGS="${CXXFLAGS}" \
		NO_SHARED_LIBS=${NO_SHARED_LIBS}
@


1.28
log
@move vncstorepw to /usr/local/bin in the main package, it's used for
-passwd. use correct path to stunnel.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/03/11 11:35:57 espie Exp $
a32 1
USE_GROFF =	Yes
@


1.27
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/09/16 11:13:40 espie Exp $
d13 2
a14 1
REVISION-gui =		0
d56 1
a56 1
	${SUBST_CMD} ${WRKSRC}/scripts/ssvnc
d75 1
a75 1
	${INSTALL_PROGRAM} ${WRKSRC}/vncstorepw/vncstorepw ${VNCLIB}
@


1.26
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/09/15 20:24:16 sthen Exp $
a22 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d34 1
a34 1
NO_REGRESS =	Yes
@


1.25
log
@update to ssvnc 1.0.29
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/07/02 10:37:05 sthen Exp $
d13 1
@


1.24
log
@let ssvnc-viewer replace tightvnc-viewer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/04/27 22:07:08 sthen Exp $
d6 1
a6 2
V =			1.0.28
EPOCH =			0
d10 1
@


1.23
log
@disable multiplexing in the default SSH command for -via mode
(which automatically sets up port-forwards for VNC connections);
if you connect to an existing multiplexed connection you can't
create the port-forward.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2010/11/19 22:31:38 espie Exp $
d7 1
a7 1
REVISION-main =		0
@


1.22
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2010/11/11 17:20:28 espie Exp $
d7 1
@


1.21
log
@finish net WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/10/18 18:36:58 espie Exp $
d39 2
a40 2
WANTLIB-main =		ICE SM X11 Xau Xaw Xdmcp Xext Xpm Xmu Xt c z jpeg.>=62
LIB_DEPENDS-main =	::graphics/jpeg
d43 4
a46 4
RUN_DEPENDS-gui =	::devel/desktop-file-utils \
			::net/avahi \
			::net/ssvnc,-main \
			::security/stunnel \
@


1.20
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/08/24 14:07:29 sthen Exp $
d39 2
a40 2
WANTLIB-main =		ICE SM X11 Xau Xaw Xdmcp Xext Xpm Xmu Xt c z
LIB_DEPENDS-main =	jpeg.>=62.::graphics/jpeg
@


1.19
log
@update ssvnc-viewer to 1.0.28
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/05/05 13:35:02 sthen Exp $
d33 1
@


1.18
log
@update to 1.0.27, adds v6 support
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/04/24 20:18:39 naddy Exp $
d6 1
a6 1
V =			1.0.27
@


1.17
log
@fix build and WANTLIB after libXp removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/04/10 13:42:25 sthen Exp $
d6 1
a6 1
V =			1.0.26
d10 2
a11 2
FULLPKGNAME-gui =	ssvnc-$Vp1
FULLPKGNAME-main =	ssvnc-viewer-$Vp0
d41 1
a41 1
WANTLIB-gui =		c crypto
@


1.16
log
@update to 1.0.26
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/03/29 07:53:51 ajacoutot Exp $
d11 1
a11 1
FULLPKGNAME-main =	ssvnc-viewer-$V
d38 1
a38 1
WANTLIB-main =		ICE SM X11 Xau Xaw Xdmcp Xext Xpm Xmu Xp Xt c z
@


1.15
log
@No need to specify the no_* FLAVOR for avahi, this is the default now.
naddy thinks there may be some gratuitous bumps but let's be safe.

reads good to sthen@@, ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/12/31 14:49:45 sthen Exp $
d6 1
a6 1
V =			1.0.25
@


1.14
log
@update to 1.0.25
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/12/22 00:31:23 sthen Exp $
d10 1
a10 1
FULLPKGNAME-gui =	ssvnc-$Vp0
d43 1
a43 1
			::net/avahi,no_gtk,no_mono,no_qt3,no_qt4 \
@


1.13
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/10/31 16:03:01 sthen Exp $
d6 1
a6 1
V =			1.0.24
@


1.12
log
@update to 1.0.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2009/10/10 12:39:29 ajacoutot Exp $
d10 1
a10 1
FULLPKGNAME-gui =	ssvnc-$V
@


1.11
log
@Missed bump...

pointed out by jasper@@
cvs: ----------------------------------------------------------------------
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/10/10 09:28:31 ajacoutot Exp $
d6 2
a7 1
V =			1.0.23
d9 4
a14 4
PKGNAME =		ssvnc-$V
FULLPKGNAME-gui =	ssvnc-$Vp0
FULLPKGNAME-main =	ssvnc-viewer-$Vp0

d38 1
a38 2
WANTLIB-main =		ICE SM X11 Xau Xaw Xdmcp Xext Xpm Xmu Xp Xt c \
			pthread-stubs xcb z
@


1.10
log
@Add no_mono PSEUDO_FLAVOR on the avahi dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2009/08/10 06:33:43 kili Exp $
d11 1
a11 1
FULLPKGNAME-gui =	ssvnc-$V
@


1.9
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2009/06/23 20:57:46 sthen Exp $
d43 1
a43 1
			::net/avahi,no_gtk,no_qt3,no_qt4 \
@


1.8
log
@update to 1.0.23 and add Avahi support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/04/05 12:12:23 sthen Exp $
d12 1
a12 1
FULLPKGNAME-main =	ssvnc-viewer-$V
d37 2
a38 1
WANTLIB-main =		X11 Xext c z ICE SM Xaw Xmu Xp Xpm Xt Xau Xdmcp
@


1.7
log
@use the correct variable, SETENV not ENV. fixes the build if ENV is set,
found by ajacoutot.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2009/03/27 02:04:44 sthen Exp $
d6 1
a6 1
V =			1.0.22
d11 2
a12 2
FULLPKGNAME-gui =	ssvnc-$Vp0
FULLPKGNAME-main =	ssvnc-viewer-$Vp0
d41 2
a42 2
RUN_DEPENDS-gui =	::security/stunnel \
			::devel/desktop-file-utils \
d44 1
@


1.6
log
@- move declarations above statements
- don't attempt to build .so on !shared systems
- remove redundant vars supplied by tk.port.mk
- remove USE_GMAKE, it's not needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2009/03/11 21:39:10 sthen Exp $
d60 3
a62 3
	cd ${VNCSRC}/libvncauth; ${ENV} ${MAKE_ENV} ${MAKE}
	cd ${VNCSRC}/vncviewer; ${ENV} ${MAKE_ENV} ${MAKE}
	cd ${WRKSRC}/vncstorepw; ${ENV} ${MAKE_ENV} ${MAKE}
@


1.5
log
@bump -gui following tk dep changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2009/01/13 15:08:27 sthen Exp $
d12 1
a12 1
FULLPKGNAME-main =	ssvnc-viewer-$V
d28 2
a29 4
USE_X11 =	Yes
USE_GMAKE =	Yes

MAKE_ENV =	CFLAGS="${CFLAGS}" CXXFLAGS="${CXXFLAGS}"
a51 2
SUBST_VARS =		MODTK_BIN

d74 3
a76 2
	${INSTALL_DATA} ${WRKSRC}/vncstorepw/lim_accept.so ${VNCLIB}
	${INSTALL_DATA} ${WRKSRC}/vncstorepw/unwrap.so ${VNCLIB}
@


1.4
log
@- update to 1.0.22, based on giovanni@@'s diff for the 1.0.21 update

- install Tcl/Tk frontend and helper scripts to simplify VNC over SSL
and VNC over SSH connections (particularly useful with x11vnc). these
are in the ssvnc-XX subpackage, the viewer stays in ssvnc-viewer-XX.

- take maintainer

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/07/10 21:25:55 sthen Exp $
d11 1
a11 1
FULLPKGNAME-gui =	ssvnc-$V
@


1.3
log
@upstream distfile not yet stable; mirror and bump PKGNAME for now.
regen PLIST while there (@@bin markers). Pointed out by naddy.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/07/08 15:46:02 sthen Exp $
d3 2
a4 1
COMMENT =	enhanced TightVNC client
d6 3
a8 4
V =		1.0.20
DISTNAME =	ssvnc_unixsrc_only-$V
PKGNAME =	ssvnc-viewer-$Vp1
CATEGORIES =	net x11
d10 7
a16 1
HOMEPAGE =	http://www.karlrunge.com/x11vnc/ssvnc.html
d24 3
a26 4
# 1.0.20 distfile is not yet final; mirrored for now from
# http://www.karlrunge.com/x11vnc/etv/ssvnc_no_windows-1.0.20.tar.gz
# Repacked with non-Unix binaries removed to save space.
MASTER_SITES =	http://spacehopper.org/mirrors/
d29 1
d31 1
a31 2
WRKDIST =	${WRKDIR}/ssvnc
WRKSRC =	${WRKDIST}/src/vnc_unixsrc
d33 1
a33 1
CONFIGURE_STYLE = imake
a34 1
ALL_TARGET =	World
d37 1
a37 3
WANTLIB +=	X11 Xext c z ICE SM Xaw Xmu Xp Xpm Xt Xau Xdmcp

LIB_DEPENDS =	jpeg.>=62.::graphics/jpeg
d39 2
a40 1
PATCH_DIST_ARGS=-p1
d42 41
a82 3
do-distpatch:
	cd ${WRKSRC} && ${PATCH} ${PATCH_DIST_ARGS} < \
	    ../patches/tight-vncviewer-full.patch
@


1.2
log
@distfile re-rolled; bump package and recalculate distinfo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/05/21 22:04:27 sthen Exp $
d6 2
a7 2
DISTNAME =	ssvnc_no_windows-$V
PKGNAME =	ssvnc-viewer-$Vp0
d18 4
a21 1
MASTER_SITES =	http://www.karlrunge.com/x11vnc/etv/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
a7 1
PKGNAME =	ssvnc-viewer-$V
@


1.1.1.1
log
@The Enhanced VNC viewer provides for remote access to VNC displays
using the standard protocol and various extensions including those used
by TightVNC, UltraVNC, RealVNC and x11vnc providing for features such
as dynamic screen resizing, server-side scaling, blocking input devices
on the server, and low colour modes. Many of these can now be set from
the popup menu.

(and it's much faster than tightvnc-viewer).  ok merdely, okan
@
text
@@
