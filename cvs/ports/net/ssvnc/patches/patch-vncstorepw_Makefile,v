head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.4
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.2
	OPENBSD_6_1_BASE:1.3
	OPENBSD_5_9:1.1.0.26
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.28
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.24
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.22
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.20
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.18
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.16
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.14
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.12
	OPENBSD_5_0:1.1.0.10
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.8
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.6
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.4
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2017.02.26.20.11.53;	author sthen;	state Exp;
branches;
next	1.2;
commitid	N4DNOCqgqkD1TWKq;

1.2
date	2016.03.11.23.03.21;	author naddy;	state dead;
branches;
next	1.1;
commitid	gGRDwY9dCtFfKKUi;

1.1
date	2009.03.27.02.04.44;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@honour CC, CXX
@
text
@$OpenBSD$
--- vncstorepw/Makefile.orig	Sun Feb 26 20:11:06 2017
+++ vncstorepw/Makefile	Sun Feb 26 20:11:14 2017
@@@@ -8,7 +8,7 @@@@ LIMACC = lim_accept.so
 ULTDSM = ultravnc_dsm_helper
 
 # gcc must be used:
-CC = gcc
+#CC = gcc
 
 all: $(CMD) $(UNWRAP) $(LIMACC) $(ULTDSM)
 
@


1.2
log
@remove NO_SHARED_LIBS and merge PFRAG.shared into PLIST; ok sthen@@
@
text
@d1 4
a4 11
$OpenBSD: patch-vncstorepw_Makefile,v 1.1 2009/03/27 02:04:44 sthen Exp $
--- vncstorepw/Makefile.orig	Mon Nov 10 22:54:24 2008
+++ vncstorepw/Makefile	Wed Mar 25 23:37:44 2009
@@@@ -3,8 +3,10 @@@@
 EPATH = /usr/ccs/bin:/usr/sfw/bin:/usr/local/bin
 
 CMD = vncstorepw
+.if ${NO_SHARED_LIBS:L} == "no"
 UNWRAP = unwrap.so
 LIMACC = lim_accept.so
+.endif
d8 2
a9 13
@@@@ -17,6 +19,7 @@@@ $(CMD): vncauth.o vncstorepw.o d3des.o
 	PATH=$$PATH:$(EPATH) strip $(CMD)
 	@@ls -l $(CMD)
 
+.if ${NO_SHARED_LIBS:L} == "no"
 $(UNWRAP): unwrap.c
 	if [ `uname` = "Darwin" ]; then \
 		PATH=$$PATH:$(EPATH) $(CC) -o $(UNWRAP) -dynamiclib -fPIC unwrap.c; \
@@@@ -32,6 +35,7 @@@@ $(LIMACC): lim_accept.c
 		PATH=$$PATH:$(EPATH) $(CC) -o $(LIMACC) -shared     -fPIC -nostartfiles lim_accept.c; \
 	fi
 	@@ls -l $(LIMACC)
+.endif
d11 1
a11 1
 # use: LD_SSL='-L/usr/foo/lib' CPP_SSL='-I /usr/foo/include':
@


1.1
log
@- move declarations above statements
- don't attempt to build .so on !shared systems
- remove redundant vars supplied by tk.port.mk
- remove USE_GMAKE, it's not needed
@
text
@d1 1
a1 1
$OpenBSD$
@

