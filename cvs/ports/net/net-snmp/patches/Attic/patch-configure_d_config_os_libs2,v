head	1.3;
access;
symbols
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2011.07.07.20.02.02;	author sthen;	state dead;
branches;
next	1.2;

1.2
date	2011.07.06.21.32.57;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2011.01.15.09.38.31;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to Net-SNMP 5.7 and clean up the patches a lot.

- rc scripts added (names suggested by Nigel Taylor, I was having
a hard time coming up with something nice that avoid a conflict with
base snmpd now the rc.d namespace is shared).
@
text
@$OpenBSD: patch-configure_d_config_os_libs2,v 1.2 2011/07/06 21:32:57 sthen Exp $
--- configure.d/config_os_libs2.orig	Wed Nov 17 19:39:24 2010
+++ configure.d/config_os_libs2	Wed Jan  5 17:16:43 2011
@@@@ -155,6 +155,9 @@@@ NETSNMP_SEARCH_LIBS(kstat_lookup, kstat,
         	[Define to 1 if you have the `kstat' library (-lkstat).]),,,
         LNETSNMPLIBS)
 
+if test "x${PARTIALTARGETOS%[0-9]}" = "xopenbsd"; then
+  LMIBLIBS="$LMIBLIBS -pthread"
+fi
 
 #   libkvm
 #
@


1.2
log
@- convert kinfo_proc2 -> kinfo_procs

- don't use "#if defined(openbsd3) || defined(openbsd4)" all over the place,
this is definitely not web scale

- zap some pointless ifdefs
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_d_config_os_libs2,v 1.1 2011/01/15 09:38:31 sthen Exp $
@


1.1
log
@update to 5.6.1
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_d_config_os_libs,v 1.1 2010/10/25 22:59:12 sthen Exp $
d4 1
a4 1
@@@@ -155,16 +155,19 @@@@ NETSNMP_SEARCH_LIBS(kstat_lookup, kstat,
d8 1
a8 1
+if test "x$PARTIALTARGETOS" = "xopenbsd4"; then
a13 12
 NETSNMP_SEARCH_LIBS(kvm_read, kvm,,,, LAGENTLIBS)
 NETSNMP_SEARCH_LIBS(kvm_openfiles, kvm,,,, LAGENTLIBS)
-NETSNMP_SEARCH_LIBS(kvm_getprocs, kvm,,,, LMIBLIBS)
+NETSNMP_SEARCH_LIBS(kvm_getproc2, kvm,,,, LMIBLIBS)
 NETSNMP_SEARCH_LIBS(kvm_getswapinfo, kvm,,,, LMIBLIBS)
 netsnmp_save_LIBS="$LIBS"
 LIBS="$LAGENTLIBS $LMIBLIBS $LIBS"
-AC_CHECK_FUNCS([kvm_openfiles kvm_getprocs kvm_getswapinfo])
+AC_CHECK_FUNCS([kvm_openfiles kvm_getproc2 kvm_getswapinfo])
 LIBS="$netsnmp_save_LIBS"
 
 
@

