head	1.11;
access;
symbols
	OPENBSD_4_8:1.9.0.8
	OPENBSD_4_8_BASE:1.9
	OPENBSD_4_7:1.9.0.6
	OPENBSD_4_7_BASE:1.9
	OPENBSD_4_6:1.9.0.4
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.2
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.4.0.6
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.4
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.2
	OPENBSD_3_6_BASE:1.1.1.1
	danh_2004-Aug-03:1.1.1.1
	danh:1.1.1;
locks; strict;
comment	@# @;


1.11
date	2010.10.25.22.59.12;	author sthen;	state dead;
branches;
next	1.10;

1.10
date	2010.09.21.10.43.04;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2008.09.20.22.15.52;	author rui;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.26.20.03.42;	author rui;	state Exp;
branches;
next	1.7;

1.7
date	2007.06.14.18.19.24;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.13.15.15.01;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2007.05.19.10.52.06;	author rui;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.10.19.08.21;	author steven;	state Exp;
branches;
next	1.3;

1.3
date	2005.11.05.19.09.38;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.13.20.33.17;	author naddy;	state Exp;
branches
	1.2.2.1;
next	1.1;

1.1
date	2004.08.03.17.47.12;	author danh;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.08.03.17.47.12;	author danh;	state Exp;
branches
	1.1.1.1.4.1;
next	;

1.1.1.1.4.1
date	2005.11.07.21.09.03;	author sturm;	state Exp;
branches;
next	;

1.2.2.1
date	2005.11.07.21.15.27;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.11
log
@update Net-SNMP to 5.6 and switch to kvm_getproc2, thanks landry for testing
"commit it!" landry@@
@
text
@$OpenBSD: patch-configure,v 1.10 2010/09/21 10:43:04 sthen Exp $
--- configure.orig	Sun May 23 22:10:00 2010
+++ configure	Mon Sep 20 09:48:18 2010
@@@@ -21655,34 +21655,6 @@@@ fi
 echo "$as_me:$LINENO: result: $EXTRACPPFLAGS" >&5
 echo "${ECHO_T}$EXTRACPPFLAGS" >&6
 
-# Prefixes must begin with "/" or [A-Z] followed by colon.
-
-if test "x$prefix" = "xNONE"; then
-  prefix=/usr/local
-fi
-
-fch=`echo $prefix | sed 's/\(.\).*/\1/'`
-if test "x$fch" != "x/" ; then
-   sch=`echo $prefix | sed 's/.\(.\).*/\1/'`
-   if test "x$sch" != "x:" ; then
-      prefix=`pwd`/$prefix
-      echo "adjusting prefix to $prefix"
-   fi
-fi
-
-if test "x$exec_prefix" = "xNONE"; then
-  exec_prefix=$prefix
-fi
-
-fch=`echo $exec_prefix | sed 's/\(.\).*/\1/'`
-if test "x$fch" != "x/" ; then
-   sch=`echo $exec_prefix | sed 's/.\(.\).*/\1/'`
-   if test "x$sch" != "x:" ; then
-      exec_prefix=`pwd`/$exec_prefix
-      echo "adjusting exec_prefix to $exec_prefix"
-   fi
-fi
-
 # Set SNMPLIBPATH & SNMPSHAREPATH
 
 SNMPLIBPATH=""
@@@@ -28344,6 +28316,7 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#include <sys/types.h>
 #include <tcpd.h>
 _ACEOF
 rm -f conftest.$ac_objext
@@@@ -28388,6 +28361,7 @@@@ _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <sys/types.h>
 #include <tcpd.h>
 _ACEOF
 if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
@@@@ -34009,7 +33983,7 @@@@ done
 
 
 
-for ac_header in malloc.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h sys/dkstat.h sys/conf.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h sys/dkstat.h sys/conf.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 echo "$as_me:$LINENO: checking for $ac_header" >&5
@@@@ -37485,7 +37459,6 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
-#include <machine/types.h>
 #include <sys/disklabel.h>
 
 _ACEOF
@


1.10
log
@update Net-SNMP to 5.4.3 and pick up OpenBSD mibs from /usr/share/snmp/mibs
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.9 2008/09/20 22:15:52 rui Exp $
@


1.9
log
@- maintenance update to net-snmp 5.4.2. Check the Changelog for more information.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.8 2007/09/26 20:03:42 rui Exp $
--- configure.orig	Fri Sep  5 10:29:01 2008
+++ configure	Fri Sep 19 18:04:38 2008
d55 1
a55 1
@@@@ -33939,7 +33913,7 @@@@ done
d64 1
a64 1
@@@@ -37415,7 +37389,6 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.8
log
@update net-snmp to 5.4.1, also adds a patch from claudio@@ to allow 64bit network counters.
Changelog: http://net-snmp.sourceforge.net/about/ChangeLog.html

tested by Graeme Lee, ok mbalmer@@
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Fri Jul 27 18:04:19 2007
+++ configure	Sat Sep 15 23:12:29 2007
@@@@ -21267,34 +21267,6 @@@@ fi
d39 1
a39 1
@@@@ -27953,6 +27925,7 @@@@ cat confdefs.h >>conftest.$ac_ext
d47 1
a47 1
@@@@ -27997,6 +27970,7 @@@@ _ACEOF
d55 1
a55 1
@@@@ -33548,7 +33522,7 @@@@ done
d64 1
a64 1
@@@@ -37024,7 +36998,6 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.7
log
@- remove powerpc compile tweak now that drahn@@ fixed vmparam.h
- regen patches while here
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.6 2007/06/13 15:15:01 ajacoutot Exp $
--- configure.orig	Sat May  5 20:26:01 2007
+++ configure	Sat May  5 20:38:25 2007
@@@@ -21042,34 +21042,6 @@@@ fi
d39 1
a39 1
@@@@ -27070,6 +27042,7 @@@@ cat confdefs.h >>conftest.$ac_ext
d47 1
a47 1
@@@@ -27114,6 +27087,7 @@@@ _ACEOF
d55 1
a55 1
@@@@ -32130,7 +32104,7 @@@@ done
d59 2
a60 2
-for ac_header in malloc.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
d64 1
a64 1
@@@@ -35608,7 +35582,6 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.6
log
@- fix compilation under powerpc

discussed with and ok rui@@
@
text
@d1 3
a3 3
$OpenBSD: patch-configure,v 1.5 2007/05/19 10:52:06 rui Exp $
--- configure.orig	Fri Nov 24 10:56:15 2006
+++ configure	Wed Jun 13 08:10:43 2007
d64 1
a64 11
@@@@ -32536,6 +32510,9 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#if HAVE_SYS_QUEUE_H
+#include <sys/queue.h>
+#endif
 #include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
@@@@ -35608,7 +35585,6 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.5
log
@update net-snmp to 5.4, maintainer timeout
- changelog: http://www.net-snmp.org/about/ChangeLog.html

ok steven@@
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.orig	Sat May  5 20:26:01 2007
+++ configure	Sat May  5 20:38:25 2007
d64 11
a74 1
@@@@ -35608,7 +35582,6 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.4
log
@- unbreak build which failed due to machine/types.h removal
- do not run ldconfig during fake, noticed by Moritz Grimm.

ok naddy@@
@
text
@d1 4
a4 21
$OpenBSD: patch-configure,v 1.3 2005/11/05 19:09:38 bernd Exp $
--- configure.orig	Thu Jun 30 04:45:09 2005
+++ configure	Mon Jan  9 23:42:41 2006
@@@@ -7452,6 +7452,7 @@@@ openbsd*)
   need_lib_prefix=no
   need_version=no
   if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`" || test "$host_os-$host_cpu" = "openbsd2.8-powerpc"; then
+    deplibs_check_method='file_magic ELF [0-9][0-9]*-bit [LM]SB shared object'
     case "$host_os" in
     openbsd2.[89] | openbsd2.[89].*)
       shlibpath_overrides_runpath=no
@@@@ -7464,7 +7465,7 @@@@ openbsd*)
     shlibpath_overrides_runpath=yes
   fi
   library_names_spec='${libname}${release}.so$versuffix ${libname}.so$versuffix'
-  finish_cmds='PATH="\$PATH:/sbin" ldconfig -m $libdir'
+  finish_cmds=''
   shlibpath_var=LD_LIBRARY_PATH
   ;;
 
@@@@ -9807,34 +9808,6 @@@@ fi
d15 1
a15 1
-if test $fch != "/" ; then
d17 1
a17 1
-   if test $sch != ":" ; then
d28 1
a28 1
-if test $fch != "/" ; then
d30 1
a30 1
-   if test $sch != ":" ; then
d39 1
a39 1
@@@@ -14282,6 +14255,7 @@@@ cat confdefs.h >>conftest.$ac_ext
d47 1
a47 1
@@@@ -14326,6 +14300,7 @@@@ _ACEOF
d55 1
a55 1
@@@@ -17818,7 +17793,7 @@@@ done
d59 1
a59 1
-for ac_header in malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
d64 1
a64 1
@@@@ -20777,7 +20752,6 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.3
log
@Security update to net-snmp-5.1.3.

- fix potential race condition in fixproc script
- fix DOS vulnerability on tcp connections

help & ok sturm@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.2 2005/06/13 20:33:17 naddy Exp $
d3 1
a3 1
+++ configure	Thu Nov  3 23:55:00 2005
d81 8
@


1.2
log
@sync patches
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1.1.1 2004/08/03 17:47:12 danh Exp $
--- configure.orig	Sat Aug  7 10:14:33 2004
+++ configure	Mon Jun 13 22:31:57 2005
@@@@ -6954,6 +6954,7 @@@@ openbsd*)
d12 1
a12 1
@@@@ -6966,7 +6967,7 @@@@ openbsd*)
d21 1
a21 1
@@@@ -9206,34 +9207,6 @@@@ fi
d56 1
a56 2
@@@@ -11383,6 +11356,7 @@@@ _ACEOF
 cat confdefs.h >>conftest.$ac_ext
d59 1
d62 3
a64 3
 		     int allow_severity = 0;
 		     int deny_severity  = 0;
@@@@ -11575,6 +11549,7 @@@@ _ACEOF
d70 3
a72 3
 		         int allow_severity = 0;
 	                 int deny_severity  = 0;
@@@@ -14158,7 +14133,7 @@@@ done
d76 2
a77 2
-for ac_header in malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_mib.h net/if_types.h net/if_var.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_mib.h net/if_types.h net/if_var.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h
d80 1
a80 9
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@@@ -14181,6 +14156,7 @@@@ cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
+#include <sys/param.h>
 #include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
@


1.2.2.1
log
@MFC:
Security update to net-snmp-5.1.3.

- fix potential race condition in fixproc script
- fix DOS vulnerability on tcp connections
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2005/11/05 19:09:38 bernd Exp $
--- configure.orig	Thu Jun 30 04:45:09 2005
+++ configure	Thu Nov  3 23:55:00 2005
@@@@ -7452,6 +7452,7 @@@@ openbsd*)
d12 1
a12 1
@@@@ -7464,7 +7465,7 @@@@ openbsd*)
d21 1
a21 1
@@@@ -9807,34 +9808,6 @@@@ fi
d56 2
a57 1
@@@@ -14282,6 +14255,7 @@@@ cat confdefs.h >>conftest.$ac_ext
a59 1
 $ac_includes_default
d62 3
a64 3
 _ACEOF
 rm -f conftest.$ac_objext
@@@@ -14326,6 +14300,7 @@@@ _ACEOF
d70 3
a72 3
 _ACEOF
 if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
@@@@ -17818,7 +17793,7 @@@@ done
d76 2
a77 2
-for ac_header in malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
d80 9
a88 1
 echo "$as_me:$LINENO: checking for $ac_header" >&5
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.orig	Sat Mar 20 02:13:55 2004
+++ configure	Tue Jul 20 11:26:17 2004
d56 1
a56 1
@@@@ -11374,6 +11347,7 @@@@ _ACEOF
d64 1
a64 1
@@@@ -11566,6 +11540,7 @@@@ _ACEOF
d72 1
a72 1
@@@@ -13997,7 +13972,7 @@@@ done
d81 1
a81 1
@@@@ -14020,6 +13995,7 @@@@ cat confdefs.h >>conftest.$ac_ext
@


1.1.1.1
log
@net-snmp 5.1.1 from Tim Kornau <opti@@openbsd.de>
@
text
@@


1.1.1.1.4.1
log
@MFC:
Security update to net-snmp-5.1.3.

- fix potential race condition in fixproc script
- fix DOS vulnerability on tcp connections
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.3 2005/11/05 19:09:38 bernd Exp $
--- configure.orig	Thu Jun 30 04:45:09 2005
+++ configure	Thu Nov  3 23:55:00 2005
@@@@ -7452,6 +7452,7 @@@@ openbsd*)
d12 1
a12 1
@@@@ -7464,7 +7465,7 @@@@ openbsd*)
d21 1
a21 1
@@@@ -9807,34 +9808,6 @@@@ fi
d56 2
a57 1
@@@@ -14282,6 +14255,7 @@@@ cat confdefs.h >>conftest.$ac_ext
a59 1
 $ac_includes_default
d62 3
a64 3
 _ACEOF
 rm -f conftest.$ac_objext
@@@@ -14326,6 +14300,7 @@@@ _ACEOF
d70 3
a72 3
 _ACEOF
 if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
@@@@ -17818,7 +17793,7 @@@@ done
d76 2
a77 2
-for ac_header in malloc.h sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
+for ac_header in sys/param.h net/if_dl.h sys/sysctl.h stdlib.h net/if_types.h sys/queue.h osreldate.h machine/types.h sys/socketvar.h sys/user.h sys/proc.h sys/mbuf.h sys/mount.h
d80 9
a88 1
 echo "$as_me:$LINENO: checking for $ac_header" >&5
@

