head	1.33;
access;
symbols
	OPENBSD_6_0:1.32.0.2
	OPENBSD_6_0_BASE:1.32
	OPENBSD_5_9:1.31.0.2
	OPENBSD_5_9_BASE:1.31
	OPENBSD_5_8:1.31.0.4
	OPENBSD_5_8_BASE:1.31
	OPENBSD_5_7:1.29.0.2
	OPENBSD_5_7_BASE:1.29
	OPENBSD_5_6:1.28.0.6
	OPENBSD_5_6_BASE:1.28
	OPENBSD_5_5:1.28.0.4
	OPENBSD_5_5_BASE:1.28
	OPENBSD_5_4:1.28.0.2
	OPENBSD_5_4_BASE:1.28
	OPENBSD_5_3:1.26.0.2
	OPENBSD_5_3_BASE:1.26
	OPENBSD_5_2:1.25.0.2
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.23
	OPENBSD_5_1:1.23.0.2
	OPENBSD_5_0:1.22.0.2
	OPENBSD_5_0_BASE:1.22
	OPENBSD_4_9:1.21.0.2
	OPENBSD_4_9_BASE:1.21
	OPENBSD_4_8:1.16.0.2
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.15.0.4
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.2
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.14.0.4
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.14.0.2
	OPENBSD_4_4_BASE:1.14
	OPENBSD_4_3:1.13.0.2
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.10.0.2
	OPENBSD_4_1_BASE:1.10
	OPENBSD_4_0:1.9.0.2
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.7.0.4
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.7.0.2
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.5.0.2
	OPENBSD_3_7_BASE:1.5
	OPENBSD_3_6:1.2.0.6
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.4
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.2
	OPENBSD_3_4_BASE:1.2
	sturm_2003-Jul-26:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.33
date	2016.09.13.16.12.14;	author naddy;	state Exp;
branches;
next	1.32;
commitid	LsYahYRn03mp1yEc;

1.32
date	2016.06.29.16.14.43;	author espie;	state Exp;
branches;
next	1.31;
commitid	c1yQMbJbfo0CFBcL;

1.31
date	2015.06.10.21.42.26;	author sthen;	state Exp;
branches;
next	1.30;
commitid	KAX1WKnTNUH3EZBA;

1.30
date	2015.06.04.07.17.13;	author jasper;	state Exp;
branches;
next	1.29;
commitid	XwArOYS1Zq05Fs5D;

1.29
date	2015.02.16.22.57.10;	author naddy;	state Exp;
branches;
next	1.28;
commitid	0dx3c9ckf7dE4tx1;

1.28
date	2013.03.21.08.46.34;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2013.03.11.11.35.47;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2013.02.09.14.49.51;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2012.03.29.13.38.48;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2012.02.21.16.21.42;	author ajacoutot;	state Exp;
branches;
next	1.23;

1.23
date	2011.09.16.11.13.38;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2011.06.20.17.56.43;	author rpointel;	state Exp;
branches;
next	1.21;

1.21
date	2011.01.16.19.53.17;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.19.22.31.33;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.11.14.00.45;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.24.15.53.55;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.18.36.48;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.07.12.22.07.38;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2009.06.25.15.09.00;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2008.03.25.17.29.57;	author fgsch;	state Exp;
branches;
next	1.13;

1.13
date	2007.10.22.14.47.58;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2007.09.08.16.25.06;	author mgrimm;	state Exp;
branches;
next	1.11;

1.11
date	2007.07.21.08.09.31;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2006.08.01.10.50.19;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2006.03.14.20.00.20;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2005.06.18.18.08.49;	author alek;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.21.13.46.44;	author alek;	state Exp;
branches;
next	1.5;

1.5
date	2005.02.19.20.53.13;	author alek;	state Exp;
branches;
next	1.4;

1.4
date	2004.12.31.13.10.26;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2004.12.16.00.31.22;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2003.07.26.13.34.40;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2003.07.26.11.40.45;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.07.26.11.40.45;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.33
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.32 2016/06/29 16:14:43 espie Exp $

PORTROACH=	limit:^0
PORTROACH_COMMENT=	ices2 is a different port

COMMENT=	icecast source for streaming MP3

DISTNAME=	ices-0.4
REVISION=	11
CATEGORIES=	net audio

HOMEPAGE=	http://www.icecast.org/ices.php

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB =	c iconv m ogg perl pthread theora util vorbis vorbisfile z
WANTLIB += 	${MODPY_WANTLIB}
WANTLIB += 	mp3lame shout>=3 speex>=4 FLAC>=5 lzma xml2>=7

MASTER_SITES=	http://downloads.xiph.org/releases/ices/

AUTOCONF_VERSION=2.59
CONFIGURE_STYLE=autoconf
CONFIGURE_ARGS=	--with-docdir=${LOCALBASE}/share/doc/ices \
		--with-moddir=${LOCALBASE}/share/ices \
		--with-lame=${LOCALBASE} --with-vorbis=${LOCALBASE} \
		--with-flac=${LOCALBASE}

LIB_DEPENDS=	audio/lame \
		converters/libiconv \
		net/libshout \
		audio/speex \
		audio/flac \
		textproc/libxml

FLAVORS=	python mp4
FLAVOR?=

.if ${FLAVOR:Mpython}
MODULES+=	lang/python
CONFIGURE_ARGS+=--with-python=${MODPY_BIN}
LIB_DEPENDS+=	${MODPY_LIB_DEPENDS}
.else
CONFIGURE_ARGS+=--without-python
.endif

.if ${FLAVOR:Mmp4}
CONFIGURE_ARGS+=--with-faad=${LOCALBASE}
LIB_DEPENDS+=	audio/faad \
		multimedia/libmp4v2
WANTLIB +=	faad mp4v2
.else
CONFIGURE_ARGS+=--without-faad
.endif

SEPARATE_BUILD=	Yes

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ices/
	${INSTALL_DATA} ${WRKINST}/${SYSCONFDIR}/ices.conf.dist \
		${PREFIX}/share/examples/ices/

.include <bsd.port.mk>
@


1.32
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/06/10 21:42:26 sthen Exp $
d17 1
a17 1
WANTLIB =	c m ogg perl pthread theora util vorbis vorbisfile z
a29 1
MODULES=	converters/libiconv
d31 1
@


1.31
log
@sync wantlib, mostly lzma (from xml2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/06/04 07:17:13 jasper Exp $
d9 1
a9 1
REVISION=	10
@


1.30
log
@add PORTROACH
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/02/16 22:57:10 naddy Exp $
d9 1
a9 1
REVISION=	9
d19 1
a19 1
WANTLIB += 	mp3lame shout>=3 speex>=4 FLAC>=5 xml2>=7
@


1.29
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.28 2013/03/21 08:46:34 ajacoutot Exp $
@


1.28
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/03/11 11:35:47 espie Exp $
a54 1
USE_GROFF =	Yes
@


1.27
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/02/09 14:49:51 sthen Exp $
a54 1
USE_LIBTOOL=	Yes
@


1.26
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/03/29 13:38:48 sthen Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.25
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/02/21 16:21:42 ajacoutot Exp $
d40 1
a40 1
.if ${FLAVOR:L:Mpython}
d48 1
a48 1
.if ${FLAVOR:L:Mmp4}
@


1.24
log
@CONFIGURE_STYLE autoconf already appends gnu, so no need to explicitely
list it.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/09/16 11:13:38 espie Exp $
d57 1
a57 1
SEPARATE_BUILD=	simple
@


1.23
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/06/20 17:56:43 rpointel Exp $
d24 1
a24 1
CONFIGURE_STYLE=gnu autoconf
@


1.22
log
@Bump revision, we have switched to python2.7 by default.
ok jasper@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/01/16 19:53:17 naddy Exp $
d6 1
a6 1
REVISION=	8
@


1.21
log
@drop maintainership; on behalf of mgrimm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/19 22:31:33 espie Exp $
d6 1
a6 1
REVISION=	7
@


1.20
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/11 14:00:45 espie Exp $
d6 1
a6 1
REVISION=	6
d11 1
a11 3
MAINTAINER=	Moritz Grimm <mdgrimm@@gmx.net>

# GPL
@


1.19
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/24 15:53:55 sthen Exp $
d21 1
a21 1
WANTLIB += 	mp3lame shout.>=3 speex.>=4 FLAC.>=5 xml2.>=7
d33 5
a37 5
LIB_DEPENDS=	::audio/lame \
		::net/libshout \
		::audio/speex \
		::audio/flac \
		::textproc/libxml
d52 2
a53 2
LIB_DEPENDS+=	::audio/faad \
		::multimedia/libmp4v2
@


1.18
log
@Add MODPY_WANTLIB, adjust MODPY_LIB_DEPENDS to new-style LIB_DEPENDS,
update all ports to match. Plists don't change -> no bump.
Looks ok to jasper.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 18:36:48 espie Exp $
d19 3
a21 2
WANTLIB=		c m ogg perl pthread theora util vorbis vorbisfile z
WANTLIB += ${MODPY_WANTLIB}
d33 5
a37 5
LIB_DEPENDS=	mp3lame:lame-*:audio/lame \
		shout.>=3::net/libshout \
		speex.>=4::audio/speex \
		FLAC.>=5::audio/flac \
		xml2.>=7::textproc/libxml
d52 3
a54 2
LIB_DEPENDS+=	faad::audio/faad \
		mp4v2::multimedia/libmp4v2
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/07/12 22:07:38 sthen Exp $
d20 1
@


1.16
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/06/25 15:09:00 naddy Exp $
d58 1
@


1.15
log
@Fix dependencies of the mp4 FLAVOR, unbreaking it.
From Tasmanian Devil <tasm.devil at googlemail dot com>, via moritz@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/03/25 17:29:57 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p6
d18 1
@


1.14
log
@no need for lame's no_x11 flavor anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/10/22 14:47:58 steven Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
d49 2
a50 1
LIB_DEPENDS+=	faad,mp4v2::audio/faad
@


1.13
log
@switch to python 2.5 and use python module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/09/08 16:25:06 mgrimm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
d30 1
a30 1
LIB_DEPENDS=	mp3lame:lame-*:audio/lame,no_x11 \
@


1.12
log
@Support both flac-1.1.2 and flac-1.1.3+ updates, which removes net/ices as
a stumbling block for audio/flac updates. Identical to what is currently in
the upstream repository. Regen patches while here.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/07/21 08:09:31 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d40 3
a42 3
PYTHON_VER=	2.4
CONFIGURE_ARGS+=--with-python=${LOCALBASE}/bin/python${PYTHON_VER}
LIB_DEPENDS+=	python${PYTHON_VER}:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
@


1.11
log
@- update MAINTAINER's email address
- better HOMEPAGE
- remove quotes around COMMENT while here

from Moritz Grimm <mdgrimm at gmx dot net> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/12/16 12:22:34 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.10
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/08/01 10:50:19 espie Exp $
d3 1
a3 1
COMMENT=	"icecast source for streaming MP3"
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d9 1
a9 1
HOMEPAGE=	http://www.icecast.org/
d11 1
a11 1
MAINTAINER=	Moritz Grimm <gtgbr@@gmx.net>
@


1.9
log
@convert a few libspecs to new style.

Note: no package bump, those are only BUILD dependencies,
the pkg_create code will create the correct wantlib specs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/03/14 20:00:20 sturm Exp $
a29 1
BUILD_DEPENDS=	::devel/pkgconfig
@


1.8
log
@cleanup after libshout update

from maintainer Moritz Grimm <gtgbr at gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/06/18 18:08:49 alek Exp $
d31 5
a35 5
LIB_DEPENDS=	mp3lame.0:lame-*:audio/lame,no_x11 \
		shout.3::net/libshout \
		speex.4::audio/speex \
		FLAC.5::audio/flac \
		xml2.7::textproc/libxml
d43 1
a43 1
LIB_DEPENDS+=	python${PYTHON_VER}.0.0:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
@


1.7
log
@- Move modules director from share/examples/ices/ to share/ices/
- Bump PKGNAME

From Moritz Grimm <gtgbr@@gmx.net> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/05/21 13:46:44 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d18 1
a18 1
WANTLIB=		c m ogg perl pthread util vorbis vorbisfile z
d30 1
d33 1
d41 1
a41 1
PYTHON_VER=	2.3
d56 1
@


1.6
log
@Update to 0.4

From Moritz Grimm <gtgbr@@gmx.net> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/07/26 13:34:40 sturm Exp $
d6 1
d25 1
a25 1
		--with-moddir=${LOCALBASE}/share/examples/ices \
d56 1
@


1.5
log
@- Conflicts with ices-0* but not with ices-2*
- Bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/12/31 13:10:26 sturm Exp $
d5 1
a5 2
DISTNAME=	ices-0.3
PKGNAME=	${DISTNAME}p0
d17 1
a17 1
WANTLIB=		c iconv m ogg perl pthread util vorbis vorbisfile z
d19 1
a19 1
MASTER_SITES=	http://downloads.us.xiph.org/releases/ices/
d21 2
a22 1
CONFIGURE_STYLE=gnu
d25 2
a26 1
		--with-lame=${LOCALBASE} --with-vorbis=${LOCALBASE}
d28 1
d31 1
d34 1
a34 1
FLAVORS=	python
d38 1
a38 1
PYTHON_VER=	2.2
d40 1
a40 3
BUILD_DEPENDS+=	${RUN_DEPENDS}
RUN_DEPENDS+=	:python-${PYTHON_VER}*:lang/python/${PYTHON_VER}
WANTLIB+=	python2.2.0.0
d45 7
d55 2
a56 2
	${INSTALL_DATA} ${WRKBUILD}/conf/ices.conf.dist \
	   ${PREFIX}/share/examples/ices/ices.conf.dist
@


1.4
log
@update MASTER_SITES

from Moritz Grimm <gtgbr at gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/12/16 00:31:22 alek Exp $
d6 1
@


1.3
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/07/26 13:34:40 sturm Exp $
d19 1
a19 1
MASTER_SITES=	http://icecast.org/files/ices/
@


1.2
log
@typo(mine) in libshout dependency

from maintainer Moritz Grimm <gtgbr@@gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/07/26 11:40:45 sturm Exp $
d17 1
d38 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d26 1
a26 1
		shout.3::audio/libshout \
@


1.1.1.1
log
@Initial import of ices 0.3

Ices version 0 is a source client for streaming MP3 audio to Shoutcast,
Icecast v1 and v2 servers. Due to Perl being shipped on OpenBSD by
default, custom playlist handlers written in Perl are always supported
by this port.

from Moritz Grimm <gtgbr@@gmx.net>, cleanup and patches from me

WWW: http://www.icecast.org/
@
text
@@
