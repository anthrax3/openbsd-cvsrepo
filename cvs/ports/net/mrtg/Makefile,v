head	1.88;
access;
symbols
	OPENBSD_6_0:1.88.0.8
	OPENBSD_6_0_BASE:1.88
	OPENBSD_5_9:1.88.0.4
	OPENBSD_5_9_BASE:1.88
	OPENBSD_5_8:1.88.0.6
	OPENBSD_5_8_BASE:1.88
	OPENBSD_5_7:1.88.0.2
	OPENBSD_5_7_BASE:1.88
	OPENBSD_5_6:1.87.0.2
	OPENBSD_5_6_BASE:1.87
	OPENBSD_5_5:1.84.0.2
	OPENBSD_5_5_BASE:1.84
	OPENBSD_5_4:1.83.0.2
	OPENBSD_5_4_BASE:1.83
	OPENBSD_5_3:1.81.0.6
	OPENBSD_5_3_BASE:1.81
	OPENBSD_5_2:1.81.0.4
	OPENBSD_5_2_BASE:1.81
	OPENBSD_5_1_BASE:1.81
	OPENBSD_5_1:1.81.0.2
	OPENBSD_5_0:1.77.0.2
	OPENBSD_5_0_BASE:1.77
	OPENBSD_4_9:1.74.0.2
	OPENBSD_4_9_BASE:1.74
	OPENBSD_4_8:1.66.0.2
	OPENBSD_4_8_BASE:1.66
	OPENBSD_4_7:1.63.0.2
	OPENBSD_4_7_BASE:1.63
	OPENBSD_4_6:1.61.0.2
	OPENBSD_4_6_BASE:1.61
	OPENBSD_4_5:1.60.0.2
	OPENBSD_4_5_BASE:1.60
	OPENBSD_4_4:1.59.0.2
	OPENBSD_4_4_BASE:1.59
	OPENBSD_4_3:1.58.0.2
	OPENBSD_4_3_BASE:1.58
	OPENBSD_4_2:1.54.0.2
	OPENBSD_4_2_BASE:1.54
	OPENBSD_4_1:1.52.0.2
	OPENBSD_4_1_BASE:1.52
	OPENBSD_4_0:1.50.0.2
	OPENBSD_4_0_BASE:1.50
	OPENBSD_3_9:1.49.0.2
	OPENBSD_3_9_BASE:1.49
	OPENBSD_3_8:1.46.0.2
	OPENBSD_3_8_BASE:1.46
	OPENBSD_3_7:1.45.0.2
	OPENBSD_3_7_BASE:1.45
	OPENBSD_3_6:1.43.0.4
	OPENBSD_3_6_BASE:1.43
	OPENBSD_3_5:1.43.0.2
	OPENBSD_3_5_BASE:1.43
	OPENBSD_3_4:1.42.0.4
	OPENBSD_3_4_BASE:1.42
	OPENBSD_3_3:1.42.0.2
	OPENBSD_3_3_BASE:1.42
	OPENBSD_3_2:1.41.0.2
	OPENBSD_3_2_BASE:1.41
	OPENBSD_3_1:1.40.0.2
	OPENBSD_3_1_BASE:1.40
	OPENBSD_3_0:1.37.0.2
	OPENBSD_3_0_BASE:1.37
	OPENBSD_2_9_TRACKING_SWITCH:1.37
	OPENBSD_2_9:1.35.0.2
	OPENBSD_2_9_BASE:1.35
	OPENBSD_2_8:1.32.0.2
	OPENBSD_2_8_BASE:1.32
	OPENBSD_2_7:1.29.0.2
	OPENBSD_2_7_BASE:1.29
	OPENBSD_2_6:1.12.0.2
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.7.0.2
	OPENBSD_2_5_BASE:1.7
	brad_1999-02-23:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.88
date	2015.02.16.22.57.11;	author naddy;	state Exp;
branches;
next	1.87;
commitid	0dx3c9ckf7dE4tx1;

1.87
date	2014.06.11.12.19.49;	author sthen;	state Exp;
branches;
next	1.86;
commitid	r2VMloosrO32ARDM;

1.86
date	2014.03.21.00.48.28;	author sthen;	state Exp;
branches;
next	1.85;

1.85
date	2014.03.17.23.22.02;	author sthen;	state Exp;
branches;
next	1.84;

1.84
date	2013.11.05.17.49.33;	author sthen;	state Exp;
branches;
next	1.83;

1.83
date	2013.06.30.21.38.04;	author espie;	state Exp;
branches;
next	1.82;

1.82
date	2013.03.11.11.35.49;	author espie;	state Exp;
branches;
next	1.81;

1.81
date	2012.01.12.10.44.59;	author sthen;	state Exp;
branches;
next	1.80;

1.80
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.79;

1.79
date	2011.12.02.11.23.37;	author sthen;	state Exp;
branches;
next	1.78;

1.78
date	2011.09.01.15.55.38;	author sthen;	state Exp;
branches;
next	1.77;

1.77
date	2011.03.20.06.43.47;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2011.03.05.19.41.14;	author sthen;	state Exp;
branches;
next	1.75;

1.75
date	2011.03.02.08.36.28;	author sthen;	state Exp;
branches;
next	1.74;

1.74
date	2010.12.27.14.50.23;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2010.12.24.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2010.12.21.12.57.09;	author sthen;	state Exp;
branches;
next	1.71;

1.71
date	2010.12.03.00.10.09;	author ian;	state Exp;
branches;
next	1.70;

1.70
date	2010.11.19.22.31.34;	author espie;	state Exp;
branches;
next	1.69;

1.69
date	2010.11.11.16.27.54;	author espie;	state Exp;
branches;
next	1.68;

1.68
date	2010.10.24.21.30.01;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2010.10.18.18.36.49;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2010.05.18.08.31.43;	author sthen;	state Exp;
branches;
next	1.65;

1.65
date	2010.03.22.21.20.55;	author sthen;	state Exp;
branches;
next	1.64;

1.64
date	2010.03.20.23.01.11;	author sthen;	state Exp;
branches;
next	1.63;

1.63
date	2010.01.13.12.33.24;	author sthen;	state Exp;
branches;
next	1.62;

1.62
date	2010.01.05.16.36.33;	author okan;	state Exp;
branches;
next	1.61;

1.61
date	2009.06.02.21.47.02;	author merdely;	state Exp;
branches;
next	1.60;

1.60
date	2009.01.01.15.23.41;	author bluhm;	state Exp;
branches;
next	1.59;

1.59
date	2008.05.23.19.41.45;	author fgsch;	state Exp;
branches;
next	1.58;

1.58
date	2008.01.29.18.46.27;	author fgsch;	state Exp;
branches;
next	1.57;

1.57
date	2007.12.28.02.09.07;	author fgsch;	state Exp;
branches;
next	1.56;

1.56
date	2007.12.19.08.58.03;	author fgsch;	state Exp;
branches;
next	1.55;

1.55
date	2007.09.15.22.36.55;	author merdely;	state Exp;
branches;
next	1.54;

1.54
date	2007.07.11.11.05.38;	author aanriot;	state Exp;
branches;
next	1.53;

1.53
date	2007.04.03.14.52.29;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2006.12.29.13.37.24;	author jakob;	state Exp;
branches;
next	1.51;

1.51
date	2006.12.29.13.08.14;	author jakob;	state Exp;
branches;
next	1.50;

1.50
date	2006.08.03.23.15.58;	author espie;	state Exp;
branches;
next	1.49;

1.49
date	2005.10.30.00.10.42;	author fgsch;	state Exp;
branches;
next	1.48;

1.48
date	2005.10.24.05.12.31;	author fgsch;	state Exp;
branches;
next	1.47;

1.47
date	2005.10.22.14.11.23;	author fgsch;	state Exp;
branches;
next	1.46;

1.46
date	2005.07.03.00.53.18;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	2005.02.27.10.13.51;	author alek;	state Exp;
branches;
next	1.44;

1.44
date	2004.12.16.00.31.23;	author alek;	state Exp;
branches;
next	1.43;

1.43
date	2004.01.25.19.27.26;	author brad;	state Exp;
branches;
next	1.42;

1.42
date	2002.10.28.01.38.45;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2002.05.12.15.54.20;	author danh;	state Exp;
branches;
next	1.40;

1.40
date	2002.03.29.03.41.08;	author brad;	state Exp;
branches;
next	1.39;

1.39
date	2002.03.29.02.53.50;	author pvalchev;	state Exp;
branches;
next	1.38;

1.38
date	2002.03.25.15.03.24;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	2001.06.02.02.40.09;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2001.05.06.05.00.07;	author lebel;	state Exp;
branches;
next	1.35;

1.35
date	2001.02.21.14.44.57;	author brad;	state Exp;
branches;
next	1.34;

1.34
date	2001.02.17.22.22.45;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2001.01.08.19.09.15;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2000.09.24.07.04.12;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2000.07.25.10.03.29;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2000.06.12.17.42.45;	author brad;	state Exp;
branches;
next	1.29;

1.29
date	2000.03.30.22.59.58;	author brad;	state Exp;
branches
	1.29.2.1;
next	1.28;

1.28
date	2000.03.24.23.28.26;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2000.03.24.22.11.52;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2000.03.15.19.20.05;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2000.03.05.18.30.38;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2000.03.05.00.55.07;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2000.03.05.00.34.26;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2000.03.03.12.38.52;	author turan;	state Exp;
branches;
next	1.21;

1.21
date	2000.03.03.12.08.53;	author turan;	state Exp;
branches;
next	1.20;

1.20
date	2000.02.15.05.04.56;	author turan;	state Exp;
branches;
next	1.19;

1.19
date	2000.02.12.08.02.26;	author turan;	state Exp;
branches;
next	1.18;

1.18
date	2000.01.20.23.07.39;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	99.12.06.01.25.33;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	99.11.28.05.22.43;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	99.11.26.16.20.25;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	99.10.29.03.41.34;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	99.10.26.04.56.38;	author turan;	state Exp;
branches;
next	1.12;

1.12
date	99.08.27.02.18.06;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.08.02.06.47.22;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.07.26.01.25.21;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.04.27.19.25.27;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.04.22.15.53.26;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.03.31.23.40.29;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.03.31.23.25.50;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.03.28.19.25.39;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.03.17.02.23.01;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.03.12.14.48.32;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.02.23.22.43.24;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	99.02.23.21.59.39;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.02.23.21.59.39;	author brad;	state Exp;
branches;
next	;

1.29.2.1
date	2000.09.15.05.09.33;	author marc;	state Exp;
branches;
next	;


desc
@@


1.88
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@# $OpenBSD: Makefile,v 1.87 2014/06/11 12:19:49 sthen Exp $

COMMENT=	multi-router traffic grapher

DISTNAME=	mrtg-2.17.4
REVISION=	3
CATEGORIES=	net

HOMEPAGE=	http://oss.oetiker.ch/mrtg/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c jpeg m png pthread z gd>=18

MASTER_SITES=	${HOMEPAGE}pub/ \
		${HOMEPAGE}pub/old/

RUN_DEPENDS=	net/p5-IO-Socket-INET6 \
		net/p5-Net-SNMP \
		net/p5-SNMP_Session \
		net/rrdtool
LIB_DEPENDS=	graphics/gd

CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.67
CONFIGURE_ARGS+=--with-gd-inc="${LOCALBASE}/include" \
		--with-gd-lib="${LOCALBASE}/lib" \
		--with-png-inc="${LOCALBASE}/include" \
		--with-png-lib="${LOCALBASE}/lib"
CONFIGURE_ENV=	CPPFLAGS="-I${X11BASE}/include" \
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib"

NO_TEST=	Yes

# SUBST_CMD mangles the file
pre-configure:
	@@perl -pi -e 's,/etc/mrtg,${SYSCONFDIR}/mrtg,g' ${WRKSRC}/bin/mrtg

post-build:
	cd ${WRKSRC}; ${MAKE_PROGRAM} doc

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mrtg
	${INSTALL_DATA_DIR} ${PREFIX}/libdata/perl5/site_perl/Pod
	${INSTALL_DATA_DIR} ${PREFIX}/share/mrtg
	${INSTALL_DATA} ${WRKSRC}/images/* ${PREFIX}/share/mrtg
	${INSTALL_MAN} ${WRKSRC}/doc/*.1 ${PREFIX}/man/man1
	${INSTALL_PROGRAM} ${WRKSRC}/bin/rateup ${PREFIX}/bin
	cd ${WRKSRC}/bin; ${INSTALL_SCRIPT} cfgmaker indexmaker mrtg \
	    mrtg-traffic-sum ${PREFIX}/bin
	cd ${WRKSRC}/lib/mrtg2; ${INSTALL_DATA} MRTG_lib.pm Net_SNMP_util.pm \
	    locales_mrtg.pm ${PREFIX}/libdata/perl5/site_perl/
	cd ${WRKSRC}/lib/mrtg2/Pod; ${INSTALL_DATA} *.pm \
	    ${PREFIX}/libdata/perl5/site_perl/Pod
	${INSTALL_DATA} ${WRKSRC}/contrib/mrtgmk/cfg/mrtg.cfg \
	    ${PREFIX}/share/examples/mrtg
	ln -s ../man1/mrtg-reference.1 ${PREFIX}/man/man5/mrtg.cfg.5

.include <bsd.port.mk>
@


1.87
log
@install a symlink at man/man5/mrtg.cfg.5 targetting mrtg-reference(1) for
ease of finding the useful manpage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/03/21 00:48:28 sthen Exp $
a25 2

USE_GROFF =	Yes
@


1.86
log
@set =encoding in .pod document with iso8859-1, for new pod2man
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2014/03/17 23:22:02 sthen Exp $
d6 1
a6 1
REVISION=	2
d62 1
@


1.85
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2013/11/05 17:49:33 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.84
log
@handle rrdtool update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2013/06/30 21:38:04 espie Exp $
d6 1
a6 1
REVISION=	0
d16 1
a16 1
WANTLIB=	c jpeg m png z gd>=18
@


1.83
log
@missing / at end of MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2013/03/11 11:35:49 espie Exp $
d6 1
d24 1
a24 1
		net/rrdtool,-perl
@


1.82
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2012/01/12 10:44:59 sthen Exp $
d18 1
a18 1
		${HOMEPAGE}pub/old
@


1.81
log
@Update to MRTG 2.17.4; minor update (address fixes & upstream have tracked
down the problem with tarball generation, so we switch back to normal tar to
extract).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2011/12/17 22:01:13 sthen Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d37 1
a37 1
NO_REGRESS=	Yes
@


1.80
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2011/12/02 11:23:37 sthen Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.17.3
REVISION=	0
a16 5

# XXX 2.17.3 release tar includes a link to an existing file causing
# an error with tar(1) or bsdtar.
BUILD_DEPENDS=	archivers/gtar
TAR=		${LOCALBASE}/bin/gtar
@


1.79
log
@update to MRTG 2.17.3

- temporarily switch to gtar (marked with XXX) as the distfile includes a
file linked to itself(!), which tar(1) rightly rejects. reported upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2011/09/01 15:55:38 sthen Exp $
d6 1
@


1.78
log
@minor update to mrtg-2.17.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2011/03/20 06:43:47 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mrtg-2.17.2
d12 1
a12 1
# GPLv2
d18 5
d37 1
a37 1
AUTOCONF_VERSION= 2.63
@


1.77
log
@Re-add the rc script after previous commit: don't trust update-plist,
it's still broken and remove @@rcscript from the PLIST.
While here, fix pexp.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2011/03/05 19:41:14 sthen Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.17.1
REVISION=	1
@


1.76
log
@install the mrtg-traffic-sum script, which generates a textual
summary of traffic suitable for emailing. note that by default
this requires information from PageTop in a certain format to
find port names, see the manpage if you have problems using it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2011/03/02 08:36:28 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.75
log
@bugfix update to 2.17.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/12/27 14:50:23 ajacoutot Exp $
d6 1
d47 3
d58 1
a58 1
	    ${PREFIX}/bin
@


1.74
log
@Simplify after recent rc.subr change.
The framework is now stable and we will start documenting it (at last).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2010/12/24 10:40:05 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	mrtg-2.17.0
a6 2

REVISION=	1
@


1.73
log
@Cope with recent rc.subr changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2010/12/21 12:57:09 sthen Exp $
d8 1
a8 1
REVISION=	0
@


1.72
log
@update MRTG to 2.17.0, rolling in our patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2010/12/03 00:10:09 ian Exp $
d7 2
@


1.71
log
@Add rc.d script for mrtg, bump pkg. Help and OK sthen@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2010/11/11 16:27:54 espie Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.16.4
REVISION =	0
@


1.70
log
@new depends
@
text
@d6 1
@


1.69
log
@new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2010/10/24 21:30:01 ajacoutot Exp $
d18 1
a18 1
WANTLIB=	c jpeg m png z gd.>=18
d23 5
a27 5
RUN_DEPENDS=	::net/p5-IO-Socket-INET6 \
		::net/p5-Net-SNMP \
		::net/p5-SNMP_Session \
		:p5-RRD-*:net/rrdtool,-perl
LIB_DEPENDS=	::graphics/gd
@


1.68
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2010/10/18 18:36:49 espie Exp $
d18 1
a18 1
WANTLIB=	c jpeg m png z
d27 1
a27 1
LIB_DEPENDS=	gd.>=18::graphics/gd
@


1.67
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2010/05/18 08:31:43 sthen Exp $
a28 1
USE_X11=	Yes
@


1.66
log
@Update to 2.16.4, this release rolls in one of the perl 5.10 fixes
(and fixes some problems that would be seen with perl 5.12).
Couple of other minor fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2010/03/22 21:20:55 sthen Exp $
d30 1
@


1.65
log
@switch to correct autoconf
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/03/20 23:01:11 sthen Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.16.3
PKGNAME=	${DISTNAME}p0
d44 1
a44 1
	@@perl -pi -e 's,%%SYSCONFDIR%%,${SYSCONFDIR},g' ${WRKSRC}/bin/mrtg
@


1.64
log
@- update to 2.16.3
- take maintainer
- drop some duplicate copies of docs which are in manpages anyway
- patch cfgmaker to recognise WWP gear and OpenSNMPD
- more perl 5.10.1 taint mode fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/01/13 12:33:24 sthen Exp $
d6 1
d33 1
a33 2
# XXX should be 2.63
AUTOCONF_VERSION= 2.61
@


1.63
log
@- add a patch to untaint $inlast, $outlast; avoids triggering
perl 5.10.1 taint mode checks with rateup and SNMP fetches when
dropping privs with --user

- use SYSCONFDIR

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/01/05 16:36:33 okan Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.16.2
PKGNAME=	${DISTNAME}p1
d10 2
d32 1
a50 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mrtg
a53 2
	cd ${WRKSRC}/doc; ${INSTALL_DATA} *.pod *.txt *.png \
	    ${PREFIX}/share/doc/mrtg
@


1.62
log
@- add p5-RRD to RUN_DEPENDS
- disable the 7 second sleep during configure

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2009/06/02 21:47:02 merdely Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d40 4
@


1.61
log
@Update to 2.16.2

test and "yup go for it" sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2009/01/01 15:23:41 bluhm Exp $
d6 1
d24 2
a25 1
		::net/p5-SNMP_Session
@


1.60
log
@Replace p5-IO-INET6 with p5-IO-Socket-INET6 as the upstream cpan
package has been renamed.  Unfortunately there is no smooth upgrade
path.  Packages have to be deleted and added manually.

discussed with bernd@@ and sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2008/05/23 19:41:45 fgsch Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.15.2
PKGNAME=	${DISTNAME}p3
d29 1
a29 1
AUTOCONF_VERSION= 2.59
@


1.59
log
@Add missing modules for ipv6 support as pointed out by
Lars Hecking (lhecking at users dot sourceforge dot net). bump package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2008/01/29 18:46:27 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d22 1
a22 1
RUN_DEPENDS=	::net/p5-IO-INET6 \
@


1.58
log
@Fix mrtg + snmpv3. bump package.
reported and tested by Daniel <leva at az dot isten dot hu>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2007/12/28 02:09:07 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
d22 2
a23 1
RUN_DEPENDS=	::net/p5-Net-SNMP \
@


1.57
log
@remove url from description that doesn't exist anymore and bump package.
reported on ports@@ by Thomas Pfaff and Will Maier.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2007/12/19 08:58:03 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d22 2
a23 1
RUN_DEPENDS=	::net/p5-SNMP_Session
d51 2
a52 2
	cd ${WRKSRC}/lib/mrtg2; ${INSTALL_DATA} MRTG_lib.pm locales_mrtg.pm \
	    ${PREFIX}/libdata/perl5/site_perl/
@


1.56
log
@update to 2.15.2; merdely@@ ajacoutot@@ input and ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2007/09/15 22:36:55 merdely Exp $
d6 1
@


1.55
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2007/07/11 11:05:38 aanriot Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.12.2
PKGNAME=	${DISTNAME}p4
a7 2
MASTER_SITES=	${HOMEPAGE}pub/old/

d10 1
a10 9
LIB_DEPENDS=	gd.>=18::graphics/gd

RUN_DEPENDS=	::net/p5-SNMP_Session \
		::textproc/p5-Pod-Simple

MODULES=	converters/libiconv
USE_X11=	Yes

# GPL
d15 10
a24 1
WANTLIB=		c m png jpeg z
d27 2
a28 2
AUTOCONF_VERSION= 2.57
CONFIGURE_ARGS=	--with-gd-inc="${LOCALBASE}/include" \
d45 2
a46 2
	cd ${WRKSRC}/doc; ${INSTALL_DATA} *.html *.pod *.txt *.png *.wml \
		${PREFIX}/share/doc/mrtg
d48 1
a48 1
		${PREFIX}/bin
d50 1
a50 1
		${PREFIX}/libdata/perl5/site_perl/
d52 1
a52 1
		${PREFIX}/libdata/perl5/site_perl/Pod
d54 1
a54 1
		${PREFIX}/share/examples/mrtg
@


1.54
log
@USE_X11 = Yes

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2007/04/03 14:52:29 ajacoutot Exp $
d3 1
a3 1
COMMENT=	"multi-router traffic grapher"
@


1.53
log
@- HOMEPAGE and MASTER_SITES have changed
from Markus Lude <markus-openbsd at anthill dot de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2006/12/29 13:37:24 jakob Exp $
d19 1
@


1.52
log
@wrong uid/gid; noted by antoine
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2006/12/29 13:08:14 jakob Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d9 1
a9 1
MASTER_SITES=	${HOMEPAGE}pub/
d11 1
a11 1
HOMEPAGE=	http://people.ee.ethz.ch/~oetiker/webtools/mrtg/
@


1.51
log
@add _mrtg user
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2006/08/03 23:15:58 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.50
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2005/10/30 00:10:42 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.49
log
@after querying brad@@ he decided to drop maintainership for these.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2005/10/24 05:12:31 fgsch Exp $
d13 1
a13 1
LIB_DEPENDS=	gd.18::graphics/gd
@


1.48
log
@fix more breakage; sturm@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2005/10/22 14:11:23 fgsch Exp $
a16 2

MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.47
log
@fix another fookup after gd update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2005/07/03 00:53:18 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d27 1
a27 1
WANTLIB=		c m png ttf jpeg z
d36 1
a36 4
		LDFLAGS="-L${X11BASE}/lib -L${LOCALBASE}/lib" \
		LIBS="-liconv"

USE_X11=	Yes
@


1.46
log
@upgrade to mrtg 2.12.2
--
From: Bernd Ahlers <b.ahlers at ba-net dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2005/02/27 10:13:51 alek Exp $
d6 1
d20 2
d35 5
@


1.45
log
@- Fix libgd linking
- Fix WANTLIB marker
- Bump PKGNAME

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2004/12/16 00:31:23 alek Exp $
d5 1
a5 2
DISTNAME=	mrtg-2.10.13
PKGNAME=	${DISTNAME}p0
d8 1
a8 3
MASTER_SITES=	ftp://ftp.ou.edu/mirrors/mrtg/ \
		ftp://ftp.sunet.se/pub/network/monitoring/mrtg/ \
		${HOMEPAGE}pub/
@


1.44
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2004/01/25 19:27:26 brad Exp $
d6 1
d27 1
a27 1
WANTLIB=		c m
@


1.43
log
@upgrade to mrtg 2.10.13
--
Based on a diff from Robert Nagy <thuglife at bsd dot hu>
with additional changes from me.
@
text
@d1 1
a1 1
# $OpenBSD$
d26 1
@


1.42
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2002/05/12 15:54:20 danh Exp $
d5 1
a5 1
DISTNAME=	mrtg-2.9.12a
d10 1
a10 1
		http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/pub/
d12 1
a12 1
HOMEPAGE=	http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/mrtg.html
d16 2
a17 1
RUN_DEPENDS=	::net/p5-SNMP_Session
d21 1
d27 2
a28 1
CONFIGURE_STYLE= gnu
a32 1
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -ljpeg -lttf"
d41 1
a41 1
	${INSTALL_DATA} ${WRKSRC}/images/*.png ${PREFIX}/share/mrtg
d44 1
a44 1
	cd ${WRKSRC}/doc; ${INSTALL_DATA} *.html *.pod *.txt \
d53 1
a53 1
		${PREFIX}/share/examples/mrtg/mrtg.cfg.sample
@


1.41
log
@use external SNMP_Session port, not included modules.

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2002/03/29 03:41:08 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.500
d31 2
@


1.40
log
@revert previous commit, ensure that you have the most up to date gd port
installed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2002/03/29 02:53:50 pvalchev Exp $
d16 2
d44 2
a45 2
	cd ${WRKSRC}/lib/mrtg2; ${INSTALL_DATA} *.pm \
		${PREFIX}/libdata/perl5/site_perl
@


1.39
log
@missing libraries to make this link w/ binutils
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2002/03/25 15:03:24 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.402
d28 1
a28 1
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -L${X11BASE}/lib -ljpeg -lttf -lpng -lz -lXpm -lX11"
@


1.38
log
@need to specify some more libs when linking, now this links properly on ELF sytems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2001/06/02 02:40:09 brad Exp $
d28 1
a28 1
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -ljpeg -lttf"
@


1.37
log
@upgrade to mrtg 2.9.12a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2001/05/06 05:00:07 lebel Exp $
d28 1
a28 1
CONFIGURE_ENV=	LDFLAGS="-L${LOCALBASE}/lib -ljpeg"
@


1.36
log
@net: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2001/02/21 14:44:57 brad Exp $
d5 1
a5 1
DISTNAME=	mrtg-2.9.10
@


1.35
log
@upgrade to mrtg 2.9.10
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.34 2001/02/17 22:22:45 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.336
@


1.34
log
@upgrade to mrtg 2.9.8
--
New version pointed out by: Shell Hung <i@@shellhung.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2001/01/08 19:09:15 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.9.8
@


1.33
log
@upgrade to mrtg 2.9.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2000/09/24 07:04:12 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.9.7
d29 1
a29 1
	${INSTALL_DATA_DIR} ${PREFIX}/lib/mrtg
d45 1
a45 2
		${PREFIX}/lib/mrtg/mrtg.cfg.sample

@


1.32
log
@add name to MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2000/07/25 10:03:29 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.8.12
d5 1
a5 1
NEED_VERSION=	1.330
d30 1
a30 1
	${INSTALL_DATA_DIR} ${PREFIX}/libdata/perl5/site_perl
d34 3
a36 2
	${INSTALL_PROGRAM} ${WRKSRC}/run/rateup ${PREFIX}/bin
	cd ${WRKSRC}/doc; ${INSTALL_DATA} *.cfg *.html *.pod *.txt \
d38 9
a46 5
	cd ${WRKSRC}/run; ${INSTALL_SCRIPT} cfgmaker cfgmaker_ip \
		indexmaker mrtg ${PREFIX}/bin
	cd ${WRKSRC}/run; ${INSTALL_SCRIPT} locales_mrtg.pm BER.pm \
		SNMP_Session.pm SNMP_util.pm ${PREFIX}/libdata/perl5/site_perl
	${INSTALL_DATA} ${WRKSRC}/doc/sample-mrtg.cfg ${PREFIX}/lib/mrtg/mrtg.cfg.sample
@


1.31
log
@- remove Perl notice and install the modules into
PREFIX/libdata/perl5/site_perl
- use install instead of cp to install the sample config file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2000/06/12 17:42:45 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.310
d14 1
a14 1
MAINTAINER=	brad@@openbsd.org
@


1.30
log
@- remove FAKE=Yes
- GNU_CONFIGURE -> CONFIGURE_STYLE
- add HOMEPAGE to DESCR
- add @@comment with RCS id to PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2000/03/30 22:59:58 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.301
d30 1
d40 1
a40 1
		SNMP_Session.pm SNMP_util.pm ${PREFIX}/lib/mrtg
@


1.29
log
@add workaround to fix a problem caused by recent gd upgrade
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2000/03/24 23:28:26 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.234
d21 1
a21 3
FAKE=	Yes

GNU_CONFIGURE=	Yes
@


1.29.2.1
log
@bring net as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2000/07/25 10:03:29 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.310
d21 3
a23 1
CONFIGURE_STYLE= gnu
a31 1
	${INSTALL_DATA_DIR} ${PREFIX}/libdata/perl5/site_perl
d41 1
a41 1
		SNMP_Session.pm SNMP_util.pm ${PREFIX}/libdata/perl5/site_perl
@


1.28
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2000/03/24 22:11:52 espie Exp $
d5 1
a5 1
NEED_VERSION=	 1.230
a9 1

d28 1
@


1.27
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2000/03/15 19:20:05 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.223
d13 1
a13 1
LIB_DEPENDS=	gd.18:graphics/gd
@


1.26
log
@bump library version # for gd dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/03/05 18:30:38 espie Exp $
d5 1
a9 1
NEED_VERSION=	1.223
@


1.25
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/03/05 00:55:07 brad Exp $
a4 1
NEED_VERSION=	1.223
d9 2
d13 1
a13 2

LIB_DEPENDS=	gd.17:graphics/gd
@


1.24
log
@add some more dist sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2000/03/05 00:34:26 brad Exp $
d5 1
a11 1
NEED_VERSION=	1.218
d13 1
a13 1
LIB_DEPENDS=	gd.17:${PORTSDIR}/graphics/gd
@


1.23
log
@upgrade to mrtg 2.8.12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/03/03 12:38:52 turan Exp $
d5 3
a7 1
MASTER_SITES=	http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/pub/
@


1.22
log
@oops, this is fine
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/03/03 12:08:53 turan Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.8.11
d9 3
a11 1
NEED_VERSION=	1.73
d15 4
a18 5
LICENSE_TYPE=		GPL
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d20 1
a20 1
LIB_DEPENDS=	gd.17:${PORTSDIR}/graphics/gd
d22 1
a22 1
GNU_CONFIGURE=  yes
d32 1
a32 2
	${INSTALL_DATA} ${WRKSRC}/doc/* ${PREFIX}/share/doc/mrtg
	${INSTALL_DATA} ${WRKSRC}/images/*.gif ${PREFIX}/share/mrtg
d34 2
a40 3

post-install:
	@@PKG_PREFIX="${PREFIX}" sh ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.21
log
@broken, installs files automatically in /etc
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.20 2000/02/15 05:04:56 turan Exp $

BROKEN=		installs files automatically in /etc
@


1.20
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2000/02/12 08:02:26 turan Exp $
@


1.19
log
@gpl licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/01/20 23:07:39 brad Exp $
d14 4
a17 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.18
log
@- upgrade to mrtg 2.8.11
- remove redundant png dependency which would be fulfilled by the
installation of gd itself
- cleanup install target
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 1999/12/06 01:25:33 brad Exp $
d12 6
@


1.17
log
@upgrade to mrtg 2.8.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 1999/11/28 05:22:43 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.8.9
d13 1
a13 2
LIB_DEPENDS=	png.1.3:${PORTSDIR}/graphics/png \
		gd.17:${PORTSDIR}/graphics/gd
d22 5
a26 9
	@@mkdir -p ${PREFIX}/share/mrtg
	@@mkdir -p ${PREFIX}/share/doc/mrtg
	@@mkdir -p ${PREFIX}/lib/mrtg
	@@for file in ${WRKSRC}/doc/*; do \
	 ${INSTALL_DATA} $$file ${PREFIX}/share/doc/mrtg; \
	done
	@@for file in ${WRKSRC}/images/*.gif; do \
	 ${INSTALL_DATA} $$file ${PREFIX}/share/mrtg; \
	done
d28 4
a31 8
	${INSTALL_SCRIPT} ${WRKSRC}/run/cfgmaker ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/cfgmaker_ip ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/indexmaker ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/mrtg ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/locales_mrtg.pm ${PREFIX}/lib/mrtg
	${INSTALL_SCRIPT} ${WRKSRC}/run/BER.pm ${PREFIX}/lib/mrtg
	${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_Session.pm ${PREFIX}/lib/mrtg
	${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_util.pm ${PREFIX}/lib/mrtg
d35 1
a35 1
	@@PKG_PREFIX="${PREFIX}" sh  ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.16
log
@use proper autoconf options to tell MRTG where gd and libpng instead of
overriding CFLAGS and LDFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 1999/11/26 16:20:25 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.8.8
d27 1
a27 1
		${INSTALL_DATA} $$file ${PREFIX}/share/doc/mrtg; \
d30 1
a30 1
		${INSTALL_DATA} $$file ${PREFIX}/share/mrtg; \
d44 1
a44 1
	@@PKG_PREFIX="${PREFIX}" ${SH} ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.15
log
@fix dependency check for new version of gd
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 1999/10/29 03:41:34 brad Exp $
d17 4
a20 2
CONFIGURE_ENV=	CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.14
log
@remove BROKEN tag
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/10/26 04:56:38 turan Exp $
d14 1
a14 1
		gd.1.6:${PORTSDIR}/graphics/gd
d21 3
a23 3
	@@${MKDIR} ${PREFIX}/share/mrtg
	@@${MKDIR} ${PREFIX}/share/doc/mrtg
	@@${MKDIR} ${PREFIX}/lib/mrtg
@


1.13
log
@These ports have bad packing lists.

Ports tree is now unlocked.  Read the new policy first.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.12 1999/08/27 02:18:06 brad Exp $

BROKEN=		bad packing lists
d7 2
a11 1
HOMEPAGE=	http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/mrtg.html
a23 1

d30 10
a39 10
	@@${INSTALL_PROGRAM} ${WRKSRC}/run/rateup ${PREFIX}/bin
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/cfgmaker ${PREFIX}/bin
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/cfgmaker_ip ${PREFIX}/bin
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/indexmaker ${PREFIX}/bin
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/mrtg ${PREFIX}/bin
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/locales_mrtg.pm ${PREFIX}/lib/mrtg
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/BER.pm ${PREFIX}/lib/mrtg
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_Session.pm ${PREFIX}/lib/mrtg
	@@${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_util.pm ${PREFIX}/lib/mrtg
	@@${INSTALL_DATA} ${WRKSRC}/doc/sample-mrtg.cfg ${PREFIX}/lib/mrtg/mrtg.cfg.sample
@


1.12
log
@upgrade to mrtg 2.8.8
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.11 1999/08/02 06:47:22 brad Exp $
@


1.11
log
@upgrade to MRTG 2.8.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/07/26 01:25:21 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.8.6
@


1.10
log
@upgrade to mrtg 2.8.5;

- This new version of mrtg now uses the newer version of gd 2.6.2 and
generates .PNGs instead of .GIFs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/04/27 19:25:27 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.8.5
@


1.9
log
@- upgrade to mrtg 2.7.4b
- add INSTALL and DEINSTALL scripts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/04/22 15:53:26 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.7.4b
a5 1
HOMEPAGE=	http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/mrtg.html
d10 1
d12 2
a13 1
BUILD_DEPENDS=	${PREFIX}/lib/libgd.a:${PORTSDIR}/graphics/gd
d16 2
a17 1
CONFIGURE_ARGS=	--with-gd-lib=${PREFIX}/lib --with-gd-inc=${PREFIX}/include/gd
d20 5
a24 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/mrtg
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/mrtg
	for file in ${WRKSRC}/doc/*; do \
d27 1
a27 1
	for file in ${WRKSRC}/images/*.gif; do \
d30 10
a39 9
	${INSTALL_PROGRAM} ${WRKSRC}/run/rateup ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/cfgmaker ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/indexmaker ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/run/mrtg ${PREFIX}/bin
	${MKDIR} ${PREFIX}/lib/mrtg
	${INSTALL_SCRIPT} ${WRKSRC}/run/BER.pm ${PREFIX}/lib/mrtg
	${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_Session.pm ${PREFIX}/lib/mrtg
	${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_util.pm ${PREFIX}/lib/mrtg
	${INSTALL_DATA} ${WRKSRC}/doc/sample-mrtg.cfg ${PREFIX}/lib/mrtg/mrtg.cfg.sample
@


1.8
log
@upgrade to mrtg 2.7.3b
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/03/31 23:40:29 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.7.3b
d6 1
a10 1
HOMEPAGE=	http://ee-staff.ethz.ch/~oetiker/webtools/mrtg/mrtg.html
a13 2
USE_PERL5=	yes

a33 3
	cp ${PREFIX}/lib/mrtg/BER.pm /usr/lib/perl5/site_perl
	cp ${PREFIX}/lib/mrtg/SNMP_Session.pm /usr/lib/perl5/site_perl
	cp ${PREFIX}/lib/mrtg/SNMP_util.pm /usr/lib/perl5/site_perl
d35 3
a37 10
	@@${ECHO} ""
	@@${ECHO} "*** The latest sample config file"
	@@${ECHO} "*** can be found in ${PREFIX}/lib/mrtg"
	@@if [ -f /etc/mrtg.cfg ]; then \
	  ${ECHO} "*** Your /etc/mrtg.cfg has NOT been changed"; \
	 else \
	  cp ${PREFIX}/lib/mrtg/mrtg.cfg.sample /etc/mrtg.cfg; \
	  ${ECHO} "*** mrtg.cfg has been copied into /etc"; \
	fi
	@@${ECHO} ""
@


1.7
log
@typo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/03/31 23:25:50 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.7.2
@


1.6
log
@fix for package building
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1999/03/28 19:25:39 brad Exp $
d42 1
a42 1
	@@${ECHO} "*** can be found ${PREFIX}/lib/mrtg"
@


1.5
log
@upgrade to mrtg 2.7.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1999/03/17 02:23:01 brad Exp $
d7 2
d14 1
a14 1
USE_PERL5=	YES
a15 1
SYSCONFDIR=	/etc/mrtg
d17 1
a17 2
CONFIGURE_ARGS=	--sysconfdir=${SYSCONFDIR} --with-gd-lib=${PREFIX}/lib \
		--with-gd-inc=${PREFIX}/include/gd
a19 1
	${INSTALL_DATA_DIR} /etc/mrtg
d23 1
a23 1
		${INSTALL_DATA} $$file ${PREFIX}/share/doc/mrtg/; \
d26 1
a26 1
		${INSTALL_DATA} $$file ${PREFIX}/share/mrtg/; \
d28 22
a49 15
	${INSTALL_DATA} ${WRKSRC}/doc/sample-mrtg.cfg /etc/mrtg/
	${INSTALL_PROGRAM} ${WRKSRC}/run/rateup ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${WRKSRC}/run/cfgmaker ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${WRKSRC}/run/indexmaker ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${WRKSRC}/run/mrtg ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${WRKSRC}/run/BER.pm /usr/lib/perl5/site_perl/
	${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_Session.pm /usr/lib/perl5/site_perl/
	${INSTALL_SCRIPT} ${WRKSRC}/run/SNMP_util.pm /usr/lib/perl5/site_perl/

post-install:
	@@${ECHO} "***"
	@@${ECHO} "*** Finished installing mrtg."
	@@${ECHO} "*** Please create a MRTG config file in /etc/mrtg, take a look at the sample"
	@@${ECHO} "*** config in /etc/mrtg or use cfgmaker to automatically generate a config."
	@@${ECHO} "***"
@


1.4
log
@upgrade to mrtg-2.7.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1999/03/12 14:48:32 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.7.1
@


1.3
log
@upgrade to mrtg 2.7.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 1999/02/23 22:43:24 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.7.0
d14 1
d16 1
a16 1
CONFIGURE_ARGS=	--sysconfdir=/etc/mrtg --with-gd-lib=${PREFIX}/lib \
@


1.2
log
@update to mrtg 2.6.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 1999/02/23 21:59:39 brad Exp $
d3 1
a3 1
DISTNAME=	mrtg-2.6.6
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 1
a3 1
DISTNAME=	mrtg-2.6.5
@


1.1.1.1
log
@add mrtg port
@
text
@@
