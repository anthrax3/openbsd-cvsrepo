head	1.25;
access;
symbols
	OPENBSD_4_7:1.24.0.2
	OPENBSD_4_7_BASE:1.24
	OPENBSD_4_6:1.23.0.2
	OPENBSD_4_6_BASE:1.23
	OPENBSD_4_5:1.21.0.2
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.18.0.2
	OPENBSD_4_4_BASE:1.18
	OPENBSD_4_3:1.14.0.2
	OPENBSD_4_3_BASE:1.14
	OPENBSD_4_2:1.13.0.2
	OPENBSD_4_2_BASE:1.13
	OPENBSD_4_1:1.9.0.2
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.8.0.8
	OPENBSD_4_0_BASE:1.8
	OPENBSD_3_9:1.8.0.6
	OPENBSD_3_9_BASE:1.8
	OPENBSD_3_8:1.8.0.4
	OPENBSD_3_8_BASE:1.8
	OPENBSD_3_7:1.8.0.2
	OPENBSD_3_7_BASE:1.8
	OPENBSD_3_6:1.7.0.4
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.4
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.5.0.2
	OPENBSD_3_2_BASE:1.5
	couderc_2002-Jul-28:1.1.1.1
	couderc:1.1.1;
locks; strict;
comment	@# @;


1.25
date	2010.03.23.21.28.07;	author ajacoutot;	state dead;
branches;
next	1.24;

1.24
date	2010.02.07.09.04.15;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2009.04.16.14.43.36;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2009.04.07.21.34.24;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2009.01.17.14.14.14;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2008.09.08.17.17.10;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2008.07.09.02.13.59;	author jakemsr;	state Exp;
branches;
next	1.17;

1.17
date	2008.05.22.19.27.04;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2008.04.21.19.17.59;	author merdely;	state Exp;
branches;
next	1.15;

1.15
date	2008.03.15.17.38.43;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2007.09.15.22.36.56;	author merdely;	state Exp;
branches;
next	1.13;

1.13
date	2007.08.02.14.37.31;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2007.04.30.10.34.47;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2007.04.27.13.26.38;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2007.04.26.14.10.30;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2006.11.28.14.04.16;	author robert;	state Exp;
branches;
next	1.8;

1.8
date	2005.03.12.12.35.52;	author couderc;	state Exp;
branches;
next	1.7;

1.7
date	2004.03.03.08.29.10;	author pvalchev;	state Exp;
branches;
next	1.6;

1.6
date	2003.03.29.15.27.26;	author couderc;	state Exp;
branches;
next	1.5;

1.5
date	2002.09.30.16.17.39;	author couderc;	state Exp;
branches;
next	1.4;

1.4
date	2002.09.05.20.35.57;	author couderc;	state Exp;
branches;
next	1.3;

1.3
date	2002.09.05.17.57.30;	author couderc;	state Exp;
branches;
next	1.2;

1.2
date	2002.08.02.21.28.34;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.28.19.35.51;	author couderc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.07.28.19.35.51;	author couderc;	state Exp;
branches;
next	;


desc
@@


1.25
log
@Remove openh323, it has been superseded with h323plus.
@
text
@# $OpenBSD: Makefile,v 1.24 2010/02/07 09:04:15 espie Exp $

SHARED_ONLY=	Yes

COMMENT=	H.323 video conferencing library

V=		1_19_0_1
DISTNAME=	openh323-v${V}
PKGNAME=	openh323-${V:S/_/./g}p5
CATEGORIES=	net devel

EXTRACT_SUFX=	-src-tar.gz
EXTRACT_CASES += *-src-tar.gz) \
	${GZIP_CMD} -dc ${FULLDISTDIR}/$$archive | ${TAR} xf -;;

SHARED_LIBS=	h323	2.0    # 1.19

HOMEPAGE=	http://openh323.sourceforge.net/

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>

# MPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=openh323/}

WANTLIB=	SDL crypto expat lber ldap ldap_r sasl2 ssl

LIB_DEPENDS=	pt.>=2::devel/pwlib \
		speex.>=4::audio/speex \
		avutil.>=2::graphics/ffmpeg \
		gsm.>=1::audio/gsm

WRKDIST=	${WRKDIR}/${DISTNAME:S/-/_/}

USE_GMAKE=	Yes
ALL_TARGET=	optshared
NO_REGRESS=	Yes

CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -pthread -lavutil"
CONFIGURE_ARGS=	--enable-h263avcodec \
		--disable-localspeex \
		--disable-vich263

MAKE_ENV+=	STDCCFLAGS="-I${WRKSRC}/include \
			-I${LOCALBASE}/include/libavcodec" \
		CC=${CC} CPLUS=${CXX} BUILDSELF="1"
MAKE_FLAGS=	LIB_MAJOR_VERSION=${LIBh323_VERSION:R} \
		LIB_MINOR_VERSION=${LIBh323_VERSION:E}

pre-configure:
	${SUBST_CMD} ${WRKSRC}/plugins/audio/GSM0610/Makefile.in \
		${WRKSRC}/plugins/audio/Speex/Makefile.in \
		${WRKSRC}/openh323u.mak.in

post-install:
	${INSTALL_DATA} ${WRKSRC}/version.h ${PREFIX}/share/openh323

.include <bsd.port.mk>
@


1.24
log
@don't override do-extract
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/04/16 14:43:36 ajacoutot Exp $
@


1.23
log
@- unbreak dependent apps by fixing the OH323_FILE variable

breakage reported by jasper@@, no cookie for me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/04/07 21:34:24 ajacoutot Exp $
d13 2
a54 3

do-extract:
	@@tar xzf ${FULLDISTDIR}/${DISTNAME}${EXTRACT_SUFX} -C ${WRKDIR}
@


1.22
log
@- unbreak when gsm is installed; we can now use the in-tree gsm since
license has been clarified
- use SUBST_CMD while here

breakage spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/01/17 14:14:14 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	openh323-${V:S/_/./g}p4
@


1.21
log
@- sync WANTLIB+PLIST after latest pwlib changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/09/18 13:37:41 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	openh323-${V:S/_/./g}p3
d32 2
a33 1
		avutil.>=2::graphics/ffmpeg
d58 2
a59 4
	@@perl -pi -e 's,!!LOCALBASE!!,${LOCALBASE},g' \
		${WRKSRC}/plugins/audio/Speex/Makefile.in
	@@perl -pi -e 's,!!PREFIX!!,${PREFIX},g;' \
		-e 's,!!SOSUFX!!,so.${LIBh323_VERSION},g' \
@


1.20
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/09/08 17:17:10 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	openh323-${V:S/_/./g}p2
d28 1
a28 1
WANTLIB=	SDL crypto expat lber ldap ldap_r ossaudio sasl2 ssl
@


1.19
log
@- sanitize STDCCFLAGS/CFLAGS
- add -fPIC unconditionally (requested by naddy@@) by adding it to
unix.mak (in pwlib) which get sourced by the other ports

feedback from and ok naddy@@, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/07/09 02:13:59 jakemsr Exp $
a34 1
SUBST_VARS=	LOCALBASE
@


1.18
log
@
* FFmpeg headers moved
* FFmpeg LIB_DEPENDS/WANTLIB changes
* add @@bin markers in PLISTs
* bump PKGNAMEs

feedback/ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/05/22 19:27:04 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	openh323-${V:S/_/./g}p1
d48 2
a49 5
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "sparc64" || ${MACHINE_ARCH} == "alpha"
CFLAGS+=	-fPIC
.endif

MAKE_ENV+=	STDCCFLAGS="${STDCCFLAGS} -I${WRKSRC}/include" \
a52 2

CFLAGS +=	-I${LOCALBASE}/include/libavcodec
@


1.17
log
@- fix WANTLIB after pwlib FLAVORs merge
- bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/04/21 19:17:59 merdely Exp $
d9 1
a9 1
PKGNAME=	openh323-${V:S/_/./g}p0
d42 1
a42 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${LOCALBASE}/include/ffmpeg" \
d56 2
@


1.16
log
@Fix build on alpha.

"of course" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/03/15 17:38:43 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	openh323-${V:S/_/./g}
d28 1
a28 1
WANTLIB=	crypto expat ossaudio ssl
@


1.15
log
@- major upgrade to openh323-1.19.0.1
- install version.h
- H323Capabilities patch from FreeBSD
- make it compile with new pwlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/09/15 22:36:56 merdely Exp $
d48 1
a48 1
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "sparc64"
@


1.14
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/08/02 14:37:31 ajacoutot Exp $
d7 3
a9 2
DISTNAME=	openh323-v1_18_0
PKGNAME=	openh323-1.18.0p2
d14 1
a14 1
SHARED_LIBS=	h323	1.18    # 1.18
d16 1
a16 1
HOMEPAGE=	http://www.voxgratia.org/
d26 1
a26 1
MASTER_SITES=	${HOMEPAGE}/releases/
d30 1
a30 1
LIB_DEPENDS=	pt.>=1::devel/pwlib \
d45 2
a46 1
		--disable-localspeex
d54 2
a60 3
	@@perl -pi -e 's,MAJOR_VERSION.*,MAJOR_VERSION ${LIBh323_VERSION:R},g;' \
		-e 's,MINOR_VERSION.*,MINOR_VERSION ${LIBh323_VERSION:E},g' \
		${WRKSRC}/version.h
d66 3
@


1.13
log
@- fix OH323_INCDIR and OH323_LIBDIR locations
from Stuart Henderson, thanks ;)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/04/30 10:34:47 ajacoutot Exp $
d5 1
a5 1
COMMENT=	"H.323 video conferencing library"
@


1.12
log
@- define OPENH323_VERSION to match the shared lib version
- fix WANTLIB
- license is MPL only
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/04/27 13:26:38 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	openh323-1.18.0p1
@


1.11
log
@- add UNMESSAGE (so you don't forget to remove the link MESSAGE asked you
to create)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/04/26 14:10:30 ajacoutot Exp $
d8 1
a8 1
PKGNAME=	openh323-1.18.0p0
d19 1
a19 1
# MPL - LGPL
d27 1
a27 1
WANTLIB=	crypto expat ossaudio pthread ssl
@


1.10
log
@- update to 1.18.0 and unbreak
- enable h263 codec
- add SHARED_ONLY
- take over maintainership (ok couderc@@, former maintainer)

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/11/28 14:04:16 robert Exp $
d8 1
a8 1
PKGNAME=	openh323-1.18.0
@


1.9
log
@do not bail out with a fatal error by adding arm to the list
of little endian architectures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/03/12 12:35:52 couderc Exp $
d3 1
a3 1
BROKEN=			"Needs upgrade to newer version"
d5 1
a5 1
COMMENT=		"H.323 Video Conferencing library"
d7 3
a9 3
VERSION=		1.8.5
DISTNAME=		openh323-${VERSION}
CATEGORIES=		net
d11 1
a11 1
HOMEPAGE=		http://www.openh323.org/
d13 1
a13 1
MAINTAINER=		Damien Couderc <couderc@@openbsd.org>
d15 5
a19 1
# MPL 
d25 3
a27 2
MASTER_SITES=		http://www.openh323.org/bin/ \
			http://www.de.openh323.org/bin/
d29 3
a31 2
DISTFILES=		openh323_${VERSION}.tar.gz \
			pwlib_1.2.17.tar.gz
d33 2
a34 2
BUILD_DEPENDS=		::devel/bison
USE_GMAKE=		Yes
d36 12
a47 20
VMEM_WARNING=		Yes

ALL_TARGET=		opt
MAKE_FLAGS=		CC="${CC}" CXX="${CXX}" \
			CFLAGS="${CFLAGS} ${CXXFLAGS} -pthread"
MAKE_ENV=		PWLIBDIR=${WRKDIR}/pwlib \
			OPENH323DIR=${WRKDIR}/openh323

.if (${MACHINE_ARCH} == "alpha" || ${MACHINE_ARCH} == "vax" || \
 ${MACHINE_ARCH} == "i386" || ${MACHINE_ARCH} == "amd64" || \
 ${MACHINE_ARCH} == "arm")
MAKE_ENV+=      ENDIAN="PLITTLE_ENDIAN"
.else
.       if (${MACHINE_ARCH} == "sparc" || ${MACHINE_ARCH} == "sparc64" || \
        ${MACHINE_ARCH} == "m68k" || ${MACHINE_ARCH} == "powerpc" || \
        ${MACHINE_ARCH} == "hppa" || ${MACHINE_ARCH} == "mips64")
MAKE_ENV+=      ENDIAN="PBIG_ENDIAN"
.       else
ERRORS+= "Fatal: Unknown endianness for ${MACHINE_ARCH}"
.       endif
d50 2
a51 5
WRKDIST=		${WRKDIR}
WRKSRC=			${WRKDIST}/openh323

PWLDIR=		${WRKDIST}/pwlib
OPHDIR=		${WRKDIST}/openh323
d53 2
a54 13
do-install:
	${INSTALL_DATA} ${PWLDIR}/include/ptlib.h ${PREFIX}/include
	${INSTALL_DATA_DIR} ${PREFIX}/include/ptclib
	${INSTALL_DATA} ${PWLDIR}/include/ptclib/*.h ${PREFIX}/include/ptclib
	${INSTALL_DATA_DIR} ${PREFIX}/include/ptlib
	${INSTALL_DATA} ${PWLDIR}/include/ptlib/*.h ${PREFIX}/include/ptlib
	${INSTALL_DATA} ${PWLDIR}/lib/libpt.so.* ${PREFIX}/lib
	${INSTALL_DATA} ${PWLDIR}/lib/libpt.a ${PREFIX}/lib

	${INSTALL_DATA_DIR} ${PREFIX}/include/openh323
	${INSTALL_DATA} ${OPHDIR}/include/*.h ${PREFIX}/include/openh323
	${INSTALL_DATA} ${OPHDIR}/lib/libh323.so.* ${PREFIX}/lib
	${INSTALL_DATA} ${OPHDIR}/lib/libh323.a ${PREFIX}/lib
d56 9
a64 1
	${INSTALL_PROGRAM} ${OPHDIR}/samples/simple/obj_OpenBSD_*_r/simph323 ${PREFIX}/bin
@


1.8
log
@unbreak mips64, from Tamas Tevesz.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/03/03 08:29:10 pvalchev Exp $
d39 2
a40 1
 ${MACHINE_ARCH} == "i386") || ${MACHINE_ARCH} == "amd64"
@


1.7
log
@specify amd64 endianness
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/03/29 15:27:26 couderc Exp $
d44 1
a44 1
        ${MACHINE_ARCH} == "hppa")
@


1.6
log
@Fix HOMEPAGE from Nick Nauwelaerts <nick@@nauwelaerts.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/09/30 16:17:39 couderc Exp $
d39 1
a39 1
 ${MACHINE_ARCH} == "i386")
@


1.5
log
@Mark as BROKEN.
Distfiles no longer available, needs an update.
Does not handle CXX correctly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/09/05 20:35:57 couderc Exp $
d11 1
a11 1
HOMEPAGE=		http://www.openh323.org
@


1.4
log
@Fix DISTNAME, noticed by todd@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.3 2002/09/05 17:57:30 couderc Exp $
@


1.3
log
@Fix different bugs : little indian for all arch, build in 32bits by default, CC/CXX/C(XX)FLAGS.
Plus cosmetics from naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/08/02 21:28:34 naddy Exp $
d6 1
a6 1
DISTNAME=		openh323_${VERSION}
@


1.2
log
@- Use VMEM_WARNING.

- Clean up patch logic.

- Mark as BROKEN for obvious incompleteness: Blindly builds as 32-bit/
  little endian on all archs, doesn't honor CC/CXX/C(XX)FLAGS.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.1.1.1 2002/07/28 19:35:51 couderc Exp $

BROKEN=	"incomplete port"
d31 2
a32 1
MAKE_FLAGS=		CC="${CC}"
d35 13
@


1.1
log
@Initial revision
@
text
@d1 3
a3 1
# $OpenBSD$
a9 1
NEED_VERSION=		1.531
a26 5

MAKE_FLAGS=		CC="${CC}"
MAKE_ENV=		PWLIBDIR=${WRKDIR}/pwlib \
			OPENH323DIR=${WRKDIR}/openh323

a27 1

d30 1
a30 1
WRKDIST=		${WRKDIR}/openh323
d33 3
d37 2
a38 2
PWLDIR=		${WRKDIR}/pwlib
OPHDIR=		${WRKDIR}/openh323
d40 2
a41 12
post-patch:
	${PATCH} ${PWLDIR}/make/lib.mak < files/patch-lib_mak
	${PATCH} ${PWLDIR}/make/unix.mak < files/patch-unix_mak

pre-build:
	@@echo ""
	@@echo "*** WARNING: you may see an error such as"
	@@echo "***       virtual memory exhausted"
	@@echo "*** when building this package.  If you do you must increase"
	@@echo "*** your limits.  See the man page for your shell and look"
	@@echo "*** for the 'limit' or 'ulimit' command."
	@@echo ""
@


1.1.1.1
log
@OpenH323 is a free, open-source (Mozilla Public License) library for the
H.323 internet teleconferencing protocol (as used in NetMeeting, etc).
@
text
@@
