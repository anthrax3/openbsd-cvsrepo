head	1.17;
access;
symbols
	OPENBSD_6_2:1.17.0.2
	OPENBSD_6_2_BASE:1.17
	OPENBSD_6_1:1.15.0.2
	OPENBSD_6_1_BASE:1.15
	OPENBSD_6_0:1.12.0.2
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.11.0.10
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.11.0.12
	OPENBSD_5_8_BASE:1.11
	OPENBSD_5_7:1.11.0.8
	OPENBSD_5_7_BASE:1.11
	OPENBSD_5_6:1.11.0.6
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.4
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.9.0.4
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.8.0.4
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.2
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.7.0.12
	OPENBSD_4_8_BASE:1.7
	OPENBSD_4_7:1.7.0.10
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.7.0.8
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.7.0.6
	OPENBSD_4_5_BASE:1.7
	OPENBSD_4_4:1.7.0.4
	OPENBSD_4_4_BASE:1.7
	OPENBSD_4_3:1.7.0.2
	OPENBSD_4_3_BASE:1.7
	OPENBSD_4_2:1.5.0.2
	OPENBSD_4_2_BASE:1.5
	OPENBSD_4_1:1.4.0.6
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	todd_20050307:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2017.07.06.05.49.10;	author espie;	state Exp;
branches;
next	1.16;
commitid	tYqbrur7IwD3qoD4;

1.16
date	2017.07.02.20.33.06;	author espie;	state Exp;
branches;
next	1.15;
commitid	v88NKy6S6sQ21Og8;

1.15
date	2017.01.03.08.28.41;	author jca;	state Exp;
branches;
next	1.14;
commitid	8X7gjlLv56pijYXi;

1.14
date	2017.01.03.08.28.02;	author jca;	state Exp;
branches;
next	1.13;
commitid	6a5XWpVqYsBuTN76;

1.13
date	2017.01.01.18.32.04;	author feinerer;	state Exp;
branches;
next	1.12;
commitid	WO4ajDM3vTGeQwOS;

1.12
date	2016.04.04.16.09.10;	author naddy;	state Exp;
branches;
next	1.11;
commitid	u3lQjrjlcAL26lGp;

1.11
date	2013.03.11.11.35.46;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2012.09.01.12.02.27;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2011.11.18.11.16.24;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.08.23.15.44.26;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2008.01.04.17.48.36;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2007.09.15.22.36.53;	author merdely;	state Exp;
branches;
next	1.5;

1.5
date	2007.05.09.23.46.39;	author rui;	state Exp;
branches;
next	1.4;

1.4
date	2005.12.23.16.06.27;	author todd;	state Exp;
branches;
next	1.3;

1.3
date	2005.12.12.08.48.04;	author alek;	state Exp;
branches;
next	1.2;

1.2
date	2005.03.16.15.34.49;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2005.03.07.16.27.17;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.03.07.16.27.17;	author todd;	state Exp;
branches;
next	;


desc
@@


1.17
log
@work-around no longer needed, bsd.dep.mk has been tweaked
@
text
@# $OpenBSD: Makefile,v 1.16 2017/07/02 20:33:06 espie Exp $

COMMENT=		SOCKS client wrapper for *BSD
DISTNAME=		dsocks-1.7
REVISION=		0
CATEGORIES=		net
SHARED_LIBS=		dsocks 1.0

HOMEPAGE=		http://monkey.org/~dugsong/dsocks/

MAINTAINER=		Todd T. Fries <todd@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${MASTER_SITE_GOOGLECODE:=dsocks/}

MAKE_FLAGS=		CFLAGS="-Wall ${CFLAGS}" \
			SHLIB_MAJOR=${LIBdsocks_VERSION:R} \
			SHLIB_MINOR=${LIBdsocks_VERSION:E}

FAKE_FLAGS=		DEBUGLIBS=No

do-configure:
	${SUBST_CMD} ${WRKSRC}/dsocks.sh ${WRKSRC}/dsocks-torify.sh

post-install:
	${INSTALL_SCRIPT} ${WRKSRC}/dsocks.sh ${WRKSRC}/dsocks-torify.sh \
		${PREFIX}/bin

.include <bsd.port.mk>
@


1.16
log
@overriding the flags on the command line means bsd.dep.mk can't do its job.
fix it.

(not an issue with clang)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2017/01/03 08:28:41 jca Exp $
d18 1
a18 1
MAKE_FLAGS=		CFLAGS="-Wall -MD -MP ${CFLAGS}" \
@


1.15
log
@License changed to BSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2017/01/03 08:28:02 jca Exp $
d18 1
a18 1
MAKE_FLAGS=		CFLAGS="-Wall ${CFLAGS}" \
@


1.14
log
@Packaging tweaks.

- respect CFLAGS
- install scripts with INSTALL_SCRIPT, don't hardcode /usr/local and the
  shared lib version

ok feinerer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2017/01/01 18:32:04 feinerer Exp $
d13 1
a13 1
# GPL
@


1.13
log
@Update to dsocks 1.7

ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2016/04/04 16:09:10 naddy Exp $
d5 1
d18 2
a19 1
MAKE_FLAGS=		SHLIB_MAJOR=${LIBdsocks_VERSION:R} \
d24 3
d28 1
a28 1
	${INSTALL_PROGRAM} ${WRKSRC}/dsocks.sh ${WRKSRC}/dsocks-torify.sh \
@


1.12
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 11:35:46 espie Exp $
d4 1
a4 2
DISTNAME=		dsocks-1.6
REVISION=		2
d15 1
a15 1
MASTER_SITES=		${HOMEPAGE}
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/09/01 12:02:27 naddy Exp $
d5 1
a5 1
REVISION=		1
@


1.10
log
@bsd.lib.mk does not build _pic.a libraries any longer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/11/18 11:16:24 espie Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.9
log
@shrink, this lives in bsd.port.mk itself now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/08/23 15:44:26 jasper Exp $
d5 1
a5 1
REVISION=		0
@


1.8
log
@- fix build on mips64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/01/04 17:48:36 espie Exp $
a24 7

# See bsd.lib.mk:162
.if ${MACHINE_ARCH:Mmips64*}
PKG_ARGS+=	-Dno_mips64=0
.else
PKG_ARGS+=	-Dno_mips64=1
.endif
@


1.7
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/09/15 22:36:53 merdely Exp $
d5 1
d25 7
@


1.6
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/05/09 23:46:39 rui Exp $
d23 1
a23 3
FAKE_FLAGS=		SHLIB_MAJOR=${LIBdsocks_VERSION:R} \
			SHLIB_MINOR=${LIBdsocks_VERSION:E} \
			DEBUGLIBS=No
@


1.5
log
@update dsocks to 1.6
ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/12/23 16:06:27 todd Exp $
d3 1
a3 1
COMMENT=		"SOCKS client wrapper for *BSD"
@


1.4
log
@SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/12/12 08:48:04 alek Exp $
d4 1
a4 2
DISTNAME=		dsocks-1.2
PKGNAME=		${DISTNAME}p0
@


1.3
log
@Fix build with DEBUGLIBS set to Yes.

ok todd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/03/16 15:34:49 naddy Exp $
d7 1
d21 6
a26 1
FAKE_FLAGS=		DEBUGLIBS=No
@


1.2
log
@mark conflicting packages
@
text
@d1 1
a1 1
# $OpenBSD$
d19 2
@


1.1
log
@Initial revision
@
text
@d1 2
d5 1
@


1.1.1.1
log
@Import dsocks 0.2

SOCKS client wrapper for *BSD
@
text
@@
