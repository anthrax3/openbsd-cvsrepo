head	1.7;
access;
symbols
	OPENBSD_5_2:1.6.0.8
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.6
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2012.10.10.22.04.57;	author robert;	state dead;
branches;
next	1.6;

1.6
date	2010.12.27.17.19.17;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.08.22.14.43.24;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.04.09.10.17.59;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.01.11.18.30.01;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.12.19.51.51;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.23.15.38.11;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.7
log
@update to zabbix version 2.0.2
@
text
@$OpenBSD: patch-misc_conf_zabbix_server_conf,v 1.6 2010/12/27 17:19:17 ajacoutot Exp $
--- misc/conf/zabbix_server.conf.orig	Thu Dec 23 17:51:28 2010
+++ misc/conf/zabbix_server.conf	Mon Dec 27 16:19:44 2010
@@@@ -36,8 +36,6 @@@@
 # Default:
 # LogFile=
 
-LogFile=/tmp/zabbix_server.log
-
 ### Option: LogFileSize
 #	Maximum size of log file in MB.
 #	0 - disable automatic log rotation.
@@@@ -66,6 +64,7 @@@@ LogFile=/tmp/zabbix_server.log
 # Mandatory: no
 # Default:
 # PidFile=/tmp/zabbix_server.pid
+PidFile=/var/run/zabbix/zabbix_server.pid
 
 ### Option: DBHost
 #	Database host name.
@@@@ -99,7 +98,7 @@@@ DBName=zabbix
 # Default:
 # DBUser=
 
-DBUser=root
+DBUser=zabbix
 
 ### Option: DBPassword
 #	Database password. Ignored for SQLite.
@@@@ -115,6 +114,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # DBSocket=/tmp/mysql.sock
+DBSocket=/var/www/var/run/mysql/mysql.sock
 
 ### Option: DBPort
 #	Database port when not using local socket. Ignored for SQLite.
@@@@ -346,6 +346,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # AlertScriptsPath=/home/zabbix/bin/
+AlertScriptsPath=${SYSCONFDIR}/zabbix/scripts/
 
 ### Option: ExternalScripts
 #	Location of external scripts
@@@@ -353,6 +354,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # ExternalScripts=/etc/zabbix/externalscripts
+ExternalScripts=${SYSCONFDIR}/zabbix/externalscripts
 
 ### Option: FpingLocation
 #	Location of fping.
@@@@ -361,6 +363,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # FpingLocation=/usr/sbin/fping
+FpingLocation=${LOCALBASE}/sbin/fping
 
 ### Option: Fping6Location
 #	Location of fping6.
@@@@ -370,6 +373,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # Fping6Location=/usr/sbin/fping6
+Fping6Location=${LOCALBASE}/sbin/fping6
 
 ### Option: SSHKeyLocation
 #	Location of public keys for SSH checks
@


1.6
log
@Update to the latest available RC (1.8.4rc3).
Details available at:
http://www.zabbix.com/documentation/1.8/manual/about/what_s_new_1.8.4

We are updating now because this release brings lots of fixes and
integrates robert@@'s patches for sensors and network statistics. Used
in production for several weeks now.
Final 1.8.4 is scheduled to be released shortly.

ok robert@@
@
text
@d1 1
a1 1
$OpenBSD: patch-misc_conf_zabbix_server_conf,v 1.5 2010/08/22 14:43:24 ajacoutot Exp $
@


1.5
log
@Update to zabbix-1.8.3.
Based on a submission from Florian Gross with several fixes and tweaks.

ok sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-misc_conf_zabbix_server_conf,v 1.4 2010/04/09 10:17:59 ajacoutot Exp $
--- misc/conf/zabbix_server.conf.orig	Thu Aug 19 16:37:36 2010
+++ misc/conf/zabbix_server.conf	Thu Aug 19 16:40:20 2010
d21 1
a21 1
@@@@ -92,7 +91,7 @@@@ DBName=zabbix
d30 1
a30 1
@@@@ -108,6 +107,7 @@@@ DBUser=root
d38 1
a38 1
@@@@ -334,6 +334,7 @@@@ DBUser=root
d46 1
a46 1
@@@@ -341,6 +342,7 @@@@ DBUser=root
d54 1
a54 1
@@@@ -349,6 +351,7 @@@@ DBUser=root
d62 1
a62 1
@@@@ -358,6 +361,7 @@@@ DBUser=root
@


1.4
log
@SECURITY
Secunia Advisory SA39119: Zabbix PHP Frontend "user" SQL Injection Vulnerability

Update zabbix to version 1.8.2.
Set FULLPKG{NAME,PATH} for the -web subpackage as it is database
independant do we don't need a flavored pkg.

"go ahead" sthen, ok jasper@@
@
text
@d1 3
a3 3
$OpenBSD: patch-misc_conf_zabbix_server_conf,v 1.3 2010/01/11 18:30:01 jasper Exp $
--- misc/conf/zabbix_server.conf.orig	Mon Mar 29 19:22:44 2010
+++ misc/conf/zabbix_server.conf	Fri Apr  9 10:23:05 2010
d38 1
a38 1
@@@@ -335,6 +335,7 @@@@ DBUser=root
d46 1
a46 1
@@@@ -342,6 +343,7 @@@@ DBUser=root
d54 1
a54 1
@@@@ -350,6 +352,7 @@@@ DBUser=root
d62 1
a62 1
@@@@ -359,6 +362,7 @@@@ DBUser=root
d66 1
a66 1
+FpingLocation=${LOCALBASE}/sbin/fping6
@


1.3
log
@- update zabbix to 1.8
- remove -doc subpackage, the documentation is still available online

look good to sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-misc_conf_zabbix_server_conf,v 1.2 2009/07/12 19:51:51 ajacoutot Exp $
--- misc/conf/zabbix_server.conf.orig	Wed Dec 23 23:58:05 2009
+++ misc/conf/zabbix_server.conf	Wed Dec 23 23:59:44 2009
@@@@ -35,8 +35,6 @@@@
d13 1
a13 1
@@@@ -63,6 +61,7 @@@@ LogFile=/tmp/zabbix_server.log
d21 1
a21 1
@@@@ -88,7 +87,7 @@@@ DBName=zabbix
d30 1
a30 1
@@@@ -104,6 +103,7 @@@@ DBUser=root
d38 1
a38 1
@@@@ -316,6 +316,7 @@@@ DBUser=root
d46 1
a46 1
@@@@ -323,6 +324,7 @@@@ DBUser=root
d54 1
a54 1
@@@@ -331,6 +333,7 @@@@ DBUser=root
d62 1
a62 1
@@@@ -339,6 +342,7 @@@@ DBUser=root
@


1.2
log
@Clean up this port:
* add missing dependency on php5-gd
* remove all hardcoded paths
* rework README.OpenBSD
* add empty zabbix.conf.php file that is writable by the www user so
that the configuration wizard can tweak this file
* protect configuration files, they may contain passwords
* fix configuration so that it works by default which is the purpose of
porting these kinds of apps

ok sthen@@, ok jasper@@ on a previous version of the diff
@
text
@d1 6
a6 4
$OpenBSD: patch-misc_conf_zabbix_server_conf,v 1.1 2009/04/23 15:38:11 jasper Exp $
--- misc/conf/zabbix_server.conf.orig	Fri Apr  3 16:44:06 2009
+++ misc/conf/zabbix_server.conf	Thu Jul  2 10:07:49 2009
@@@@ -99,29 +99,29 @@@@ Timeout=5
d8 9
a16 3
 # Name of PID file
 
-PidFile=/var/tmp/zabbix_server.pid
d19 5
a23 2
 # Name of log file
 # If not set, syslog is used
d25 2
a26 2
-LogFile=/tmp/zabbix_server.log
+#LogFile=/tmp/zabbix_server.log
d28 7
a34 2
 # Maximum size of log file in MB. Set to 0 to disable automatic log rotation.
 #LogFileSize=1
d36 6
a41 2
 # Location for custom alert scripts
-AlertScriptsPath=/home/zabbix/bin/
d44 6
a49 2
 # Location of external scripts
-#ExternalScripts=/etc/zabbix/externalscripts
d52 6
a57 3
 # Location of fping. Default is /usr/sbin/fping
 # Make sure that fping binary has root permissions and SUID flag set
-#FpingLocation=/usr/sbin/fping
d60 7
a66 10
 # Location of fping6. Default is /usr/sbin/fping6
 # Make sure that fping binary has root permissions and SUID flag set
-#Fping6Location=/usr/sbin/fping6
+Fping6Location=${LOCALBASE}/sbin/fping6
 
 # Temporary directory. Default is /tmp
 #TmpDir=/tmp
@@@@ -140,7 +140,7 @@@@ DBName=zabbix
 
 # Database user
d68 2
a69 11
-DBUser=root
+DBUser=zabbix
 
 # Database password
 # Comment this line if no password used
@@@@ -149,4 +149,4 @@@@ DBUser=root
 
 # Connect to MySQL using Unix socket?
 
-#DBSocket=/tmp/mysql.sock
+DBSocket=/var/www/var/run/mysql/mysql.sock
@


1.1
log
@- bring over some tweaks from sthen's zabbix port, more will follow
@
text
@d1 3
a3 3
$OpenBSD$
--- misc/conf/zabbix_server.conf.orig	Wed Apr 22 23:08:16 2009
+++ misc/conf/zabbix_server.conf	Wed Apr 22 23:12:28 2009
d25 2
a26 1
 #ExternalScripts=/etc/zabbix/externalscripts
d31 1
a31 1
+FpingLocation=${PREFIX}/sbin/fping
d36 1
a36 1
+Fping6Location=${PREFIX}/sbin/fping6
d54 1
a54 1
+DBSocket=/var/run/mysql/mysql.sock
@

