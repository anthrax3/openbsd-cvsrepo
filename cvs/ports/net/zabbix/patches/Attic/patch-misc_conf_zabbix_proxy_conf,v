head	1.10;
access;
symbols
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.10
date	2012.10.10.22.04.57;	author robert;	state dead;
branches;
next	1.9;

1.9
date	2012.03.20.12.00.37;	author robert;	state Exp;
branches;
next	1.8;

1.8
date	2011.08.21.09.21.02;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2011.04.25.07.42.36;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2010.12.27.17.19.17;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2010.08.22.14.43.24;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2010.04.09.10.17.59;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2010.01.11.18.30.01;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.12.19.51.51;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2009.04.23.15.38.11;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.10
log
@update to zabbix version 2.0.2
@
text
@$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.9 2012/03/20 12:00:37 robert Exp $
--- misc/conf/zabbix_proxy.conf.orig	Tue Mar 20 10:15:16 2012
+++ misc/conf/zabbix_proxy.conf	Tue Mar 20 12:21:24 2012
@@@@ -104,6 +104,7 @@@@ LogFile=/tmp/zabbix_proxy.log
 # Mandatory: no
 # Default:
 # PidFile=/tmp/zabbix_proxy.pid
+PidFile=/var/run/zabbix/zabbix_proxy.pid
 
 ### Option: DBHost
 #	Database host name.
@@@@ -136,7 +137,7 @@@@ DBName=zabbix
 # Default:
 # DBUser=
 
-DBUser=root
+DBUser=zabbix
 
 ### Option: DBPassword
 #	Database password. Ignored for SQLite.
@@@@ -152,6 +153,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # DBSocket=/tmp/mysql.sock
+DBSocket=/var/www/var/run/mysql/mysql.sock
 
 # Option: DBPort
 #	Database port when not using local socket. Ignored for SQLite.
@@@@ -357,6 +359,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # ExternalScripts=/etc/zabbix/externalscripts
+ExternalScripts=${SYSCONFDIR}/zabbix/externalscripts
 
 ### Option: FpingLocation
 #	Location of fping.
@@@@ -365,6 +368,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # FpingLocation=/usr/sbin/fping
+FpingLocation=${LOCALBASE}/sbin/fping
 
 ### Option: Fping6Location
 #	Location of fping6.
@@@@ -374,6 +378,7 @@@@ DBUser=root
 # Mandatory: no
 # Default:
 # Fping6Location=/usr/sbin/fping6
+Fping6Location=${LOCALBASE}/sbin/fping6
 
 ### Option: SSHKeyLocation
 #	Location of public keys for SSH checks
@


1.9
log
@update to 1.8.11
@
text
@d1 1
a1 1
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.8 2011/08/21 09:21:02 ajacoutot Exp $
@


1.8
log
@Update to Zabbix 1.8.6.
For details, see:
http://www.zabbix.com/documentation/1.8/manual/about/what_s_new_1.8.6
@
text
@d1 3
a3 3
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.7 2011/04/25 07:42:36 ajacoutot Exp $
--- misc/conf/zabbix_proxy.conf.orig	Thu Aug  4 10:23:14 2011
+++ misc/conf/zabbix_proxy.conf	Sun Aug 21 11:01:16 2011
d29 1
a29 1
@@@@ -374,6 +376,7 @@@@ DBUser=root
d37 1
a37 1
@@@@ -382,6 +385,7 @@@@ DBUser=root
d45 1
a45 1
@@@@ -391,6 +395,7 @@@@ DBUser=root
@


1.7
log
@Update to zabbix 1.8.5.
See http://www.zabbix.com/documentation/1.8/manual/about/what_s_new_1.8.5
for details.
@
text
@d1 4
a4 4
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.6 2010/12/27 17:19:17 ajacoutot Exp $
--- misc/conf/zabbix_proxy.conf.orig	Fri Apr 15 21:17:30 2011
+++ misc/conf/zabbix_proxy.conf	Mon Apr 25 08:17:22 2011
@@@@ -94,6 +94,7 @@@@ LogFile=/tmp/zabbix_proxy.log
d12 1
a12 1
@@@@ -126,7 +127,7 @@@@ DBName=zabbix
d21 1
a21 1
@@@@ -142,6 +143,7 @@@@ DBUser=root
d29 1
a29 1
@@@@ -372,6 +374,7 @@@@ DBUser=root
d37 1
a37 1
@@@@ -380,6 +383,7 @@@@ DBUser=root
d45 1
a45 1
@@@@ -389,6 +393,7 @@@@ DBUser=root
@


1.6
log
@Update to the latest available RC (1.8.4rc3).
Details available at:
http://www.zabbix.com/documentation/1.8/manual/about/what_s_new_1.8.4

We are updating now because this release brings lots of fixes and
integrates robert@@'s patches for sensors and network statistics. Used
in production for several weeks now.
Final 1.8.4 is scheduled to be released shortly.

ok robert@@
@
text
@d1 3
a3 3
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.5 2010/08/22 14:43:24 ajacoutot Exp $
--- misc/conf/zabbix_proxy.conf.orig	Thu Dec 23 17:51:28 2010
+++ misc/conf/zabbix_proxy.conf	Mon Dec 27 16:19:44 2010
d29 1
a29 1
@@@@ -380,6 +382,7 @@@@ DBUser=root
d37 1
a37 1
@@@@ -388,6 +391,7 @@@@ DBUser=root
d45 1
a45 1
@@@@ -397,6 +401,7 @@@@ DBUser=root
@


1.5
log
@Update to zabbix-1.8.3.
Based on a submission from Florian Gross with several fixes and tweaks.

ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.4 2010/04/09 10:17:59 ajacoutot Exp $
--- misc/conf/zabbix_proxy.conf.orig	Thu Aug 19 16:33:48 2010
+++ misc/conf/zabbix_proxy.conf	Thu Aug 19 16:36:24 2010
@@@@ -96,6 +96,7 @@@@ LogFile=/tmp/zabbix_proxy.log
d12 1
a12 1
@@@@ -121,7 +122,7 @@@@ DBName=zabbix
d21 1
a21 1
@@@@ -137,6 +138,7 @@@@ DBUser=root
d29 1
a29 1
@@@@ -372,6 +374,7 @@@@ DBUser=root
d37 1
a37 1
@@@@ -380,6 +383,7 @@@@ DBUser=root
d45 1
a45 1
@@@@ -389,6 +393,7 @@@@ DBUser=root
@


1.4
log
@SECURITY
Secunia Advisory SA39119: Zabbix PHP Frontend "user" SQL Injection Vulnerability

Update zabbix to version 1.8.2.
Set FULLPKG{NAME,PATH} for the -web subpackage as it is database
independant do we don't need a flavored pkg.

"go ahead" sthen, ok jasper@@
@
text
@d1 4
a4 13
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.3 2010/01/11 18:30:01 jasper Exp $
--- misc/conf/zabbix_proxy.conf.orig	Mon Mar 29 19:22:44 2010
+++ misc/conf/zabbix_proxy.conf	Fri Apr  9 10:23:05 2010
@@@@ -55,8 +55,6 @@@@ Server=127.0.0.1
 # Default:
 # LogFile=
 
-LogFile=/tmp/zabbix_proxy.log
-
 ### Option: LogFileSize
 #	Maximum size of log file in MB.
 #	0 - disable automatic log rotation.
@@@@ -85,6 +83,7 @@@@ LogFile=/tmp/zabbix_proxy.log
d12 1
a12 1
@@@@ -110,7 +109,7 @@@@ DBName=zabbix
d21 1
a21 1
@@@@ -126,6 +125,7 @@@@ DBUser=root
d29 1
a29 1
@@@@ -359,6 +359,7 @@@@ DBUser=root
d37 1
a37 1
@@@@ -367,6 +368,7 @@@@ DBUser=root
d45 1
a45 1
@@@@ -376,6 +378,7 @@@@ DBUser=root
d49 1
a49 1
+FpingLocation=${LOCALBASE}/sbin/fping6
@


1.3
log
@- update zabbix to 1.8
- remove -doc subpackage, the documentation is still available online

look good to sthen@@
@
text
@d1 3
a3 3
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.2 2009/07/12 19:51:51 ajacoutot Exp $
--- misc/conf/zabbix_proxy.conf.orig	Wed Dec 23 23:56:09 2009
+++ misc/conf/zabbix_proxy.conf	Wed Dec 23 23:57:56 2009
d13 1
a13 1
@@@@ -83,6 +81,7 @@@@ LogFile=/tmp/zabbix_proxy.log
d21 1
a21 1
@@@@ -108,7 +107,7 @@@@ DBName=zabbix
d30 1
a30 1
@@@@ -124,6 +123,7 @@@@ DBUser=root
d38 1
a38 1
@@@@ -357,6 +357,7 @@@@ DBUser=root
d46 1
a46 1
@@@@ -365,6 +366,7 @@@@ DBUser=root
d54 1
a54 1
@@@@ -373,6 +375,7 @@@@ DBUser=root
@


1.2
log
@Clean up this port:
* add missing dependency on php5-gd
* remove all hardcoded paths
* rework README.OpenBSD
* add empty zabbix.conf.php file that is writable by the www user so
that the configuration wizard can tweak this file
* protect configuration files, they may contain passwords
* fix configuration so that it works by default which is the purpose of
porting these kinds of apps

ok sthen@@, ok jasper@@ on a previous version of the diff
@
text
@d1 6
a6 5
$OpenBSD: patch-misc_conf_zabbix_proxy_conf,v 1.1 2009/04/23 15:38:11 jasper Exp $
--- misc/conf/zabbix_proxy.conf.orig	Fri Apr  3 16:44:06 2009
+++ misc/conf/zabbix_proxy.conf	Thu Jul  2 10:00:27 2009
@@@@ -123,28 +123,28 @@@@ Timeout=5
 #UnavailableDelay=60
d8 9
a16 2
 # Name of PID file
-PidFile=/var/tmp/zabbix_proxy.pid
d19 5
a23 4
 # Name of log file
 # If not set, syslog is used
-LogFile=/tmp/zabbix_proxy.log
+#LogFile=/tmp/zabbix_proxy.log
d25 2
a26 2
 # Maximum size of log file in MB. Set to 0 to disable automatic log rotation.
 #LogFileSize=1
d28 7
a34 3
 # Location for custom alert scripts
-AlertScriptsPath=/home/zabbix/bin/
+AlertScriptsPath=${SYSCONFDIR}/zabbix/scripts/
d36 6
a41 2
 # Location of external scripts
-#ExternalScripts=/etc/zabbix/externalscripts
d44 6
a49 3
 # Location of 'fping. Default is /usr/sbin/fping
 # Make sure that fping binary has root permissions and SUID flag set
-#FpingLocation=/usr/sbin/fping
d52 7
a58 10
 # Location of fping6. Default is /usr/sbin/fping6
 # Make sure that fping binary has root permissions and SUID flag set
-#Fping6Location=/usr/sbin/fping6
+Fping6Location=${LOCALBASE}/sbin/fping6
 
 # Temporary directory. Default is /tmp
 #TmpDir=/tmp
@@@@ -163,7 +163,7 @@@@ DBName=proxy
 
 # Database user
d60 2
a61 11
-DBUser=root
+DBUser=zabbix
 
 # Database password
 # Comment this line if no password used
@@@@ -172,4 +172,4 @@@@ DBUser=root
 
 # Connect to MySQL using Unix socket?
 
-#DBSocket=/tmp/mysql.sock
+DBSocket=/var/www/var/run/mysql/mysql.sock
@


1.1
log
@- bring over some tweaks from sthen's zabbix port, more will follow
@
text
@d1 4
a4 4
$OpenBSD$
--- misc/conf/zabbix_proxy.conf.orig	Wed Apr 22 23:07:00 2009
+++ misc/conf/zabbix_proxy.conf	Wed Apr 22 23:07:28 2009
@@@@ -123,11 +123,11 @@@@ Timeout=5
d18 36
@

