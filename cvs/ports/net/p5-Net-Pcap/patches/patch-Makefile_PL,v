head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.1.0.20
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.22
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.18
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.16
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.14
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.12
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.10
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.8
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.6
	OPENBSD_5_0:1.1.0.4
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.04.15.20.09.31;	author sthen;	state Exp;
branches;
next	1.1;
commitid	oC3qPRRrN6RafWtf;

1.1
date	2010.10.07.10.20.27;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to p5-Net-Pcap-0.17 and patch to unbreak with perl 5.22
@
text
@$OpenBSD: patch-Makefile_PL,v 1.1 2010/10/07 10:20:27 sthen Exp $

Append to ccflags/libs, overriding at least CCFLAGS breaks with perl 5.22

--- Makefile.PL.orig	Tue Nov 27 23:06:02 2012
+++ Makefile.PL	Fri Apr 15 21:08:23 2016
@@@@ -22,9 +22,8 @@@@ elsif ($^O eq 'cygwin') {
     cygwin_pcap_headers();
 }
 else {
-    $options{CCFLAGS} = "-Wall -Wwrite-strings"
-        if $Config{ccname} eq "gcc" and $] >= 5.006;
-    $options{LIBS}    = '-lpcap';
+    $options{CCFLAGS} = "$Config{ccflags} -Wall -Wwrite-strings" if $Config{ccname} eq 'gcc' and $] >= 5.006;
+    $options{LIBS}    = "$Config{libs} -lpcap";
 }
 
 for my $arg (@@ARGV) {
@@@@ -536,8 +535,7 @@@@ sub have_functions {
     my @@funcs = ();
     print "detecting available functions... ";
 
-    my @@paths = DynaLoader::dl_findfile(qw(-lpcap));
-    my $libref = DynaLoader::dl_load_file($paths[0]);
+    my $libref = DynaLoader::dl_load_file("libpcap.so");
 
     for my $func (@@_) {
         my $symref = DynaLoader::dl_find_symbol($libref, $func);
@


1.1
log
@Unbreak, sort-of spotted by landry@@. Didn't package before so no bump.
@
text
@d1 19
a19 4
$OpenBSD$
--- Makefile.PL.orig	Thu Oct  7 11:16:00 2010
+++ Makefile.PL	Thu Oct  7 11:16:14 2010
@@@@ -530,8 +530,7 @@@@ sub have_functions {
@

