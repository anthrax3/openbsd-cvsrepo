head	1.8;
access;
symbols
	OPENBSD_2_6:1.6.0.2
	OPENBSD_2_6_BASE:1.6
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	form_980616:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.8
date	99.11.08.15.54.42;	author turan;	state dead;
branches;
next	1.7;

1.7
date	99.10.27.22.54.43;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.09.28.17.34.21;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.09.12.15.02.33;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.09.01.15.37.55;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.08.30.14.52.33;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.02.22.05.13.33;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	98.06.16.07.05.33;	author form;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.06.16.07.05.33;	author form;	state Exp;
branches;
next	;


desc
@@


1.8
log
@nuke insecure proftpd port.  ok'd by maint.
@
text
@--- src/log.c.orig	Sun Oct 10 23:13:13 1999
+++ src/log.c	Wed Oct 27 17:29:28 1999
@@@@ -46,7 +46,7 @@@@
 static int syslog_discard = FALSE;
 static int logstderr = TRUE;
 static int debug_level = DEBUG0;	/* Default is no debug logging */
-static int facility = LOG_DAEMON;
+static int facility = LOG_FTP;
 static int set_facility = -1;
 static char *syslog_fn = NULL;
 static char *syslog_hostname;
@@@@ -772,7 +772,7 @@@@
   log(priority, facility, buf);
 }
 
-/* Like log_pri(), but sends the log entry in the LOG_AUTHPRIV
+/* Like log_pri(), but sends the log entry in the LOG_FTP
  * facility (presumable it doesn't need to be seen by everyone
  */
 
@@@@ -787,7 +787,7 @@@@
 
   buf[sizeof(buf) - 1] = '\0';
 
-  log(priority, LOG_AUTHPRIV, buf);
+  log(priority, LOG_FTP, buf);
 }
 
 /* Disable logging to stderr, should be done right before forking
@


1.7
log
@upgrade to proftpd 1.2.0pre9
@
text
@@


1.6
log
@upgrade to proftpd 1.2.0pre7
@
text
@d1 3
a3 3
--- src/log.c.orig	Sun Sep 26 02:00:34 1999
+++ src/log.c	Tue Sep 28 13:30:12 1999
@@@@ -44,7 +44,7 @@@@
d12 2
a13 2
@@@@ -739,7 +739,7 @@@@
   log(priority,facility,buf);
d21 1
a21 1
@@@@ -754,7 +754,7 @@@@
d23 1
a23 1
   buf[1023] = '\0';
@


1.5
log
@upgrade to proftpd 1.2.0pre6
@
text
@d1 2
a2 2
--- src/log.c.orig	Fri Sep 10 17:17:02 1999
+++ src/log.c	Sun Sep 12 10:32:18 1999
d12 1
a12 1
@@@@ -710,7 +710,7 @@@@
d21 1
a21 1
@@@@ -725,7 +725,7 @@@@
d25 2
a26 2
-  log(priority,LOG_AUTHPRIV,buf);
+  log(priority,LOG_FTP,buf);
@


1.4
log
@upgrade to proftpd 1.2.0pre4
@
text
@d1 2
a2 2
--- src/log.c.orig	Sat Oct 17 22:24:41 1998
+++ src/log.c	Mon Dec 14 15:14:12 1998
d12 10
a21 1
@@@@ -718,7 +718,7 @@@@
@


1.3
log
@fix for remote root exploit
@
text
@d1 2
a2 2
--- src/log.c.orig	Sat Oct 17 20:24:41 1998
+++ src/log.c	Mon Aug 30 08:51:06 1999
a11 9
@@@@ -111,7 +111,7 @@@@
   if(xferfd == -1)
     return 0;
 
-  sprintf(buf,"%s %d %s %lu %s %c _ %c %c %s ftp 0 *\n",
+  snprintf(buf,sizeof(buf),"%s %d %s %lu %s %c _ %c %c %s ftp 0 *\n",
           fmt_time(time(NULL)),xfertime,remhost,fsize,
           fname,xfertype,direction,access,user);
 
@


1.2
log
@upgrade to proftpd-1.2.0pre2
@
text
@d1 2
a2 2
--- src/log.c.orig	Sat Oct 17 22:24:41 1998
+++ src/log.c	Mon Dec 14 15:14:12 1998
d12 9
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
--- src/log.c.orig	Sun Jun  7 16:12:04 1998
+++ src/log.c	Sun Jun  7 16:15:34 1998
@@@@ -38,7 +38,7 @@@@
 static int syslog_open = FALSE;
d9 4
a12 4
 static int runfd = -1;
 static char *runfn = NULL;
 static int xferfd = -1;
@@@@ -463,7 +463,7 @@@@
@


1.1.1.1
log
@proftpd 1.0.3, apache-like configurable ftp daemon
@
text
@@
