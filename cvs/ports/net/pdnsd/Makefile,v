head	1.24;
access;
symbols
	OPENBSD_6_2:1.24.0.18
	OPENBSD_6_2_BASE:1.24
	OPENBSD_6_1:1.24.0.16
	OPENBSD_6_1_BASE:1.24
	OPENBSD_6_0:1.24.0.14
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.24.0.10
	OPENBSD_5_9_BASE:1.24
	OPENBSD_5_8:1.24.0.12
	OPENBSD_5_8_BASE:1.24
	OPENBSD_5_7:1.24.0.8
	OPENBSD_5_7_BASE:1.24
	OPENBSD_5_6:1.24.0.6
	OPENBSD_5_6_BASE:1.24
	OPENBSD_5_5:1.24.0.4
	OPENBSD_5_5_BASE:1.24
	OPENBSD_5_4:1.24.0.2
	OPENBSD_5_4_BASE:1.24
	OPENBSD_5_3:1.23.0.4
	OPENBSD_5_3_BASE:1.23
	OPENBSD_5_2:1.23.0.2
	OPENBSD_5_2_BASE:1.23
	OPENBSD_5_1_BASE:1.22
	OPENBSD_5_1:1.22.0.2
	OPENBSD_5_0:1.19.0.2
	OPENBSD_5_0_BASE:1.19
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.16.0.2
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.15.0.4
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.15.0.2
	OPENBSD_4_6_BASE:1.15
	OPENBSD_4_5:1.14.0.2
	OPENBSD_4_5_BASE:1.14
	OPENBSD_4_4:1.13.0.4
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.2
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.12.0.4
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.12.0.2
	OPENBSD_4_1_BASE:1.12
	OPENBSD_4_0:1.11.0.4
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.11.0.2
	OPENBSD_3_9_BASE:1.11
	OPENBSD_3_8:1.10.0.4
	OPENBSD_3_8_BASE:1.10
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.9.0.6
	OPENBSD_3_6_BASE:1.9
	OPENBSD_3_5:1.9.0.4
	OPENBSD_3_5_BASE:1.9
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.7.0.4
	OPENBSD_3_2_BASE:1.7
	OPENBSD_3_1:1.7.0.2
	OPENBSD_3_1_BASE:1.7
	OPENBSD_3_0:1.4.0.2
	OPENBSD_3_0_BASE:1.4
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	camield_2001-Jun-14:1.1.1.1
	camield:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2013.03.11.11.35.54;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2012.06.21.14.40.40;	author gonzalo;	state Exp;
branches;
next	1.22;

1.22
date	2011.12.17.22.01.13;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2011.11.16.00.20.09;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.10.14.07.00.51;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2011.05.11.12.03.19;	author jasper;	state Exp;
branches;
next	1.18;

1.18
date	2011.03.02.23.30.20;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.18.36.56;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.07.12.22.07.40;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2009.03.23.09.54.36;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2009.01.02.22.28.21;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2007.09.15.22.36.58;	author merdely;	state Exp;
branches;
next	1.12;

1.12
date	2006.10.31.14.58.46;	author aanriot;	state Exp;
branches;
next	1.11;

1.11
date	2005.11.25.10.45.39;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2004.12.01.19.59.59;	author alek;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.22.14.07.21;	author sturm;	state Exp;
branches;
next	1.8;

1.8
date	2002.12.29.21.14.11;	author fgsch;	state Exp;
branches;
next	1.7;

1.7
date	2002.01.15.08.07.00;	author wilfried;	state Exp;
branches;
next	1.6;

1.6
date	2002.01.08.00.51.27;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2001.11.10.15.44.58;	author wilfried;	state Exp;
branches;
next	1.4;

1.4
date	2001.08.30.02.10.40;	author brad;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2001.08.30.01.43.35;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.07.15.19.17.00;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.14.14.46.07;	author camield;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.06.14.14.46.07;	author camield;	state Exp;
branches;
next	;

1.4.2.1
date	2002.01.08.00.56.04;	author naddy;	state Exp;
branches;
next	1.4.2.2;

1.4.2.2
date	2002.01.17.14.55.00;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.24
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@# $OpenBSD: Makefile,v 1.23 2012/06/21 14:40:40 gonzalo Exp $

COMMENT=		threaded DNS daemon, optimized for caching

DISTNAME=		pdnsd-1.2.9a-par
PKGNAME=		${DISTNAME:S/-par//}
CATEGORIES=		net
MASTER_SITES=		${HOMEPAGE}/releases/

HOMEPAGE=		http://members.home.nl/p.a.rombouts/pdnsd/

WRKDIST=		${WRKDIR}/${DISTNAME:S/-par//}

# GPLv3+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c pthread

USE_GMAKE=		yes
CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS+=	--enable-ipv6 \
			--enable-strict-rfc2181 \
			--with-cachedir="/var/pdnsd" \
			--with-default-id=_pdnsd \
			--with-random-device=arc4random \
			--with-target=BSD

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/pdnsd
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/pdnsd
	${INSTALL_DATA} ${WRKSRC}/doc/txt/*.txt ${PREFIX}/share/doc/pdnsd
	${INSTALL_DATA} ${WRKINST}${SYSCONFDIR}/pdnsd.conf.sample \
	    ${PREFIX}/share/examples/pdnsd/pdnsd.conf

.include <bsd.port.mk>
@


1.23
log
@Update for pdnsd to 1.2.9a-par, new version fixing a problem with the
flag --enable-strict-rfc2181 we use by default, and unbreak rc script.

While here, GROFF is not needed, and update the web. Tested on i386 and amd64.

Ok aja@@ and test from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/12/17 22:01:13 sthen Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.22
log
@Where a program with an rc script _requires_ a certain command line
parameter to daemonize, move the parameter from daemon to daemon_flags,
so that the user cannot inadvertently prevent it from daemonizing by
adjusting the flags.

Discussed with ajacoutot and schwarze, this method was suggested
by schwarze@@ as a simpler alternative to my diff. ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/11/16 00:20:09 sthen Exp $
d5 1
a5 1
DISTNAME=		pdnsd-1.2.8-par
a6 1
REVISION=		3
d10 1
a10 1
HOMEPAGE=		http://www.phys.uu.nl/~rombouts/pdnsd/
a22 1
USE_GROFF=		Yes
@


1.21
log
@bumps; net/if.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/10/14 07:00:51 ajacoutot Exp $
d7 2
a8 2
REVISION=		2
CATEGORIES=     	net
@


1.20
log
@Add an rc script, from frantisek holop.
Tweak the port a bit while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/05/11 12:03:19 jasper Exp $
d7 1
a7 1
REVISION=		1
@


1.19
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/03/02 23:30:20 sthen Exp $
d7 1
a7 1
REVISION=		0
a19 1
WANTLIB=		c pthread
d21 1
a21 1
NO_REGRESS=		Yes
@


1.18
log
@update to 1.2.8, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 18:36:56 espie Exp $
d7 1
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/07/12 22:07:40 sthen Exp $
d5 1
a5 1
DISTNAME=		pdnsd-1.2.7-par
a6 1
REVISION=		0
d24 1
a24 1
USE_GROFF =	Yes
@


1.16
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/03/23 09:54:36 ajacoutot Exp $
d25 1
@


1.15
log
@- remove wrong substitution

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/01/02 22:28:21 sthen Exp $
d6 2
a7 1
PKGNAME=		${DISTNAME:S/-par//}p0
@


1.14
log
@SECURITY update to 1.2.7; fixes crash on long replies, randomises source
ports.  Other bug and portability fixes (now works on !i386).  Upstream now
using GPLv3; update license marker.  From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/09/15 22:36:58 merdely Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:S/-par//}
@


1.13
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.12 2006/10/31 14:58:46 aanriot Exp $
# Uses pthreads
d5 1
a5 5
# archs that have pthreads library in
# good enough shape to run this app.
ONLY_FOR_ARCHS=	i386

DISTNAME=		pdnsd-1.2.5-par
d8 2
d14 1
a14 1
# GPLv2
a20 2
MASTER_SITES=		${HOMEPAGE}/releases/

a23 1

d25 1
a25 2
CONFIGURE_ARGS+=	--with-target=BSD \
			--with-random-device=arc4random \
d28 3
a30 1
			--with-default-id=_pdnsd
d32 6
a37 3
post-build:
	@@perl -pi -e "s,/usr/share/doc/,${PREFIX}/share/doc/," \
		${WRKSRC}/doc/pdnsd.8.in
@


1.12
log
@- update to 1.2.5 .
- remove PORTNAME variable which is ambiguous.
- remove stuff outside fake.
- remove MESSAGE (specific runtime options, no gain).

from Simon Lundström with slight changes;
inputs and ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/11/25 10:45:39 sturm Exp $
d4 1
a4 1
COMMENT=		"threaded DNS daemon, optimized for caching"
@


1.11
log
@update to 1.2.3

from Dmitry Bogdan <dsb at imcs.dvgu.ru>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2004/12/01 19:59:59 alek Exp $
d10 2
a11 3
PORTNAME=		pdnsd-1.2.3
DISTNAME=		${PORTNAME}-par
PKGNAME=		${PORTNAME}
d13 1
a13 1
HOMEPAGE=		http://www.phys.uu.nl/~rombouts/pdnsd
d15 1
a15 1
WRKDIST=		${WRKDIR}/${PORTNAME}
a27 2
SEPARATE_BUILD=		concurrent

d37 3
a39 9
DOCFILES=		faq.txt intro.txt manual.txt

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/pdnsd
	${INSTALL_DATA} ${WRKBUILD}/doc/pdnsd.conf ${PREFIX}/share/examples/pdnsd
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/pdnsd
.for file in ${DOCFILES}
	${INSTALL_DATA} ${WRKSRC}/doc/txt/${file} ${PREFIX}/share/doc/pdnsd
.endfor
@


1.10
log
@- Replace INSTALL with @@sample, @@new(user|group), @@exec and MESSAGE
- Kill DEINSTALL
- Add WANTLIB marker
- Bump PKGNAME

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/06/22 14:07:21 sturm Exp $
d10 3
a12 2
DISTNAME=		pdnsd-1.1.7a
PKGNAME=		${DISTNAME}p1
d14 3
a16 1
HOMEPAGE=		http://home.t-online.de/home/Moestl/
d25 1
a25 1
MASTER_SITES=		${HOMEPAGE}
d30 2
@


1.9
log
@- use new username schema
- remove Sebastian Stark as MAINTAINER by his request
- bump PKGNAME
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/12/29 21:14:11 fgsch Exp $
d11 1
a11 1
PKGNAME=		${DISTNAME}p0
d20 1
@


1.8
log
@finally, no more NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/01/15 08:07:00 wilfried Exp $
d11 1
a14 2
MAINTAINER=		Sebastian Stark <seb@@todesplanet.de>

d32 1
a32 1
			--with-default-id=pdnsd
@


1.7
log
@update to pdnsd-1.1.7a, fixes an assert bug; from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/01/08 00:51:27 naddy Exp $
a11 1
NEED_VERSION=		1.504
@


1.6
log
@SECURITY update to 1.1.7; from maintainer Sebastian Stark <seb@@todesplanet.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/11/10 15:44:58 wilfried Exp $
d10 1
a10 1
DISTNAME=		pdnsd-1.1.7
@


1.5
log
@NO_REGRESS=Yes, from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/08/30 02:10:40 brad Exp $
d10 1
a10 1
DISTNAME=		pdnsd-1.1.6
d12 1
a12 1
NEED_VERSION=		1.435
@


1.4
log
@add a comment to doucment a few ports which use pthreads
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/08/30 01:43:35 brad Exp $
d24 2
@


1.4.2.1
log
@MFC:
SECURITY update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/08/30 02:10:40 brad Exp $
d10 1
a10 1
DISTNAME=		pdnsd-1.1.7
@


1.4.2.2
log
@MFC:
update to pdnsd-1.1.7a, fixes an assert bug
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4.2.1 2002/01/08 00:56:04 naddy Exp $
d10 1
a10 1
DISTNAME=		pdnsd-1.1.7a
@


1.3
log
@mark these ports with ONLY_FOR_ARCHS= i386 for now since that is the only
arch known to be able to run these apps.
@
text
@d1 2
a2 1
# $OpenBSD: Makefile,v 1.2 2001/07/15 19:17:00 naddy Exp $
@


1.2
log
@Update to 1.1.6 and fix fake; submitted by maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/06/14 14:46:07 camield Exp $
d3 5
a7 1
COMMENT=		"threaded dns daemon, optimized for caching"
d11 1
a11 1
NEED_VERSION=		1.414
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME=		pdnsd-1.1.5
@


1.1.1.1
log
@threaded dns daemon, optimized for caching

Submitted by Sebastian Stark <seb@@todesplanet.de>
@
text
@@
