head	1.8;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.7.0.2
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.5.0.4
	OPENBSD_5_8_BASE:1.5
	kspillner_20150331:1.1.1.1
	kspillner:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2016.08.03.09.34.39;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	LglaoLJelk3VwE2g;

1.7
date	2016.05.21.01.27.37;	author czarkoff;	state Exp;
branches;
next	1.6;
commitid	gvK4gnzEc7AZ6epH;

1.6
date	2015.09.18.14.37.50;	author kspillner;	state Exp;
branches;
next	1.5;
commitid	lFs4I17v4fZCfSuk;

1.5
date	2015.07.20.20.53.58;	author kspillner;	state Exp;
branches;
next	1.4;
commitid	YMZYV0lVkDQJRKyn;

1.4
date	2015.06.08.09.17.04;	author czarkoff;	state Exp;
branches;
next	1.3;
commitid	TpSBzRtSqAjuPu22;

1.3
date	2015.05.15.07.32.00;	author jasper;	state Exp;
branches;
next	1.2;
commitid	dnq4JlxsoynzzUoH;

1.2
date	2015.04.05.13.31.14;	author sthen;	state Exp;
branches;
next	1.1;
commitid	1hQJnDR1GYYQ0MPE;

1.1
date	2015.03.31.15.38.37;	author kspillner;	state Exp;
branches
	1.1.1.1;
next	;
commitid	Ay160vCq9FWDzxVO;

1.1.1.1
date	2015.03.31.15.38.37;	author kspillner;	state Exp;
branches;
next	;
commitid	Ay160vCq9FWDzxVO;


desc
@@


1.8
log
@Bump after recent go MODULE change.

ok czarkoff@@
@
text
@# $OpenBSD: Makefile,v 1.7 2016/05/21 01:27:37 czarkoff Exp $

COMMENT =		access any command-line tool via a WebSocket

GH_ACCOUNT =		joewalnes
GH_PROJECT =		websocketd
GH_TAGNAME =		v0.2.12
REVISION=		0

CATEGORIES =		net www

HOMEPAGE =		http://websocketd.com/

MAINTAINER =		Kent R. Spillner <kspillner@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB =		c pthread

MODULES +=		lang/go

BUILD_DEPENDS =		net/go-net

NO_TEST =		Yes
SUBST_VARS =		VERSION

pre-build:
	@@${SUBST_CMD} ${WRKSRC}/version.go

post-install:
	${INSTALL_MAN} ${WRKSRC}/release/websocketd.man			\
	    ${PREFIX}/man/man8/websocketd.8
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/websocketd
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/websocketd/bash/
	${INSTALL_DATA} ${WRKSRC}/examples/bash/count.sh		\
	    ${PREFIX}/share/examples/websocketd/bash/count.sh
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/websocketd/cgi-bin/
	${SUBST_CMD} -c -m 755 ${WRKSRC}/examples/cgi-bin/README.txt		\
	    ${PREFIX}/share/examples/websocketd/cgi-bin/README.txt
	${INSTALL_SCRIPT} ${WRKSRC}/examples/cgi-bin/dump-env.sh		\
	    ${PREFIX}/share/examples/websocketd/cgi-bin/dump-env.sh
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/websocketd/html/
	${INSTALL_DATA} ${WRKSRC}/examples/html/count.html		\
	    ${PREFIX}/share/examples/websocketd/html/count.html

.include <bsd.port.mk>
@


1.7
log
@update to websocketd 0.2.12

OK jsing@@ kspillner@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2015/09/18 14:37:50 kspillner Exp $
d8 1
@


1.6
log
@Tweak examples/cgi-bin/dump-env.sh to only print the value of variables that
are actually set.  This matches the version of the patch that was merged
upstream (PR #166).

ok czarkoff, landry
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2015/07/20 20:53:58 kspillner Exp $
a4 3
V =			0.2.11
VERSION =		$V
DISTNAME =		websocketd-$V
d7 1
a7 2
GH_TAGNAME =		v$V
REVISION =		0
d22 1
a22 1
BUILD_DEPENDS =		net/go-websocket
@


1.5
log
@Update net/websocketd to latest upstream release.  With help from czarkoff@@.

ok czarkoff@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2015/06/08 09:17:04 czarkoff Exp $
d11 1
@


1.4
log
@Refactor lang/go module

From port-modules(5):

     lang/go       Adds Go toolchain support.  Requires ALL_TARGET to be set
                   to canonical Go import path of port.  (Module sets it
                   automatically for ports that use GH_ACCOUNT and GH_PROJECT
                   macros.)

                   During execution of post-patch target module moves source
                   code from ${MODGO_SUBDIR} to ${WRKSRC}, subdirectory of
                   ${MODGO_WORKSPACE} - specially-crafted Go workspace located
                   at ${WRKDIR}/go.  During do-build module calls ``go
                   install'' with GOPATH set to ${MODGO_WORKSPACE}, runs its
                   output through sed to prevent writes outside WRKDIR sandbox
                   and sends output to sh(1).  During do-install it copies
                   executables from ${MODGO_WORKSPACE}/bin to ${PREFIX}/bin,
                   and/or directories ${MODGO_WORKSPACE}/pkg and
                   ${MODGO_WORKSPACE}/src to ${PREFIX}/go, depending on
                   MODGO_TYPE contents.

                   Sets BUILD_DEPENDS, RUN_DEPENDS, ALL_TARGET, TEST_TARGET,
                   ONLY_FOR_ARCHS, SEPARATE_BUILD, and WRKSRC.

                   Defines:

                   MODGO_TYPE       Type of port.  May be any combination of:

                                    bin  ordinary binary, which should be
                                         installed to ${PREFIX}/bin,

                                    lib  library, which should come with
                                         source code.

                                    Defaults to bin.

                   MODGO_WORKSPACE  Path to Go workspace set up for port build
                                    process.  Defaults to ${WRKDIR}/go.  See
                                    Go documentation for details.

                   MODGO_SUBDIR     Path to Go source code within port's
                                    sources tarball.  Defaults to ${WRKDIST}.

                   MODGO_SETUP_WORKSPACE
                                    Commands setting up Go workspace for
                                    building ports.  By default, happens
                                    during execution of post-patch target.

                   MODGO_BUILDDEP   Controls whether contents of
                                    MODGO_BUILD_DEPENDS are appended to port's
                                    BUILD_DEPENDS.  Defaults to Yes.

                   Additionally defines MODGO_PACKAGES, MODGO_SOURCES and
                   MODGO_TOOLS (paths for installed Go packages, sources and
                   tools respectively), MODGO_CMD and MODGO_FLAGS (source code
                   build command and flags passed as its arguments),
                   MODGO_BUILD_CMD and MODGO_TEST_CMD (commands for building
                   and testing go packages; normally called with canonical Go
                   package names as arguments),
                   MODGO_{BUILD,INSTALL,TEST}_TARGET and
                   MODGO_{BUILD,RUN}_DEPENDS.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2015/05/15 07:32:00 jasper Exp $
d5 1
a5 1
V =			0.2.10
a10 1
REVISION =		1
d28 4
d41 1
a41 1
	${INSTALL_DATA} ${WRKSRC}/examples/cgi-bin/README.txt		\
d43 1
a43 1
	${INSTALL_DATA} ${WRKSRC}/examples/cgi-bin/dump-env.sh		\
@


1.3
log
@use the new golang module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/04/05 13:31:14 sthen Exp $
d11 1
a11 1
REVISION =		0
d30 1
a30 10
post-extract:
	mkdir -p ${WRKSRC}/src/github.com/joewalnes
	ln -fhs ${WRKSRC} ${WRKSRC}/src/github.com/joewalnes/websocketd

do-build:
	GOPATH=${GOPATH} go build -o ${WRKDIST}/websocketd 		\
	    github.com/joewalnes/websocketd

do-install:
	${INSTALL_PROGRAM} -p ${WRKDIST}/websocketd ${PREFIX}/bin
@


1.2
log
@drop GH_COMMIT lines which are hidden behind GH_TAGNAME,
discussed with a few in the room.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.1.1.1 2015/03/31 15:38:37 kspillner Exp $

ONLY_FOR_ARCHS =	${GO_ARCHS}
d11 1
d24 3
a26 2
BUILD_DEPENDS =		lang/go 					\
			net/go-websocket
a28 2

GOPATH =		"${WRKSRC}:${LOCALBASE}/go"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.71 2014/07/10 12:33:17 sthen Exp $
a12 1
GH_COMMIT =		2690f55d518c864cb2a37a1cd53e84ff4bc4bbdf
@


1.1.1.1
log
@Import websocketd

websocketd is a small command-line tool that will wrap an existing command-line
interface program, and allow it to be accessed via a WebSocket.

WebSocket-capable applications can now be built very easily in any language. As
long as you can write an executable program that reads `STDIN` and writes to
`STDOUT`, you can build a WebSocket server.

ok sthen@@
@
text
@@
