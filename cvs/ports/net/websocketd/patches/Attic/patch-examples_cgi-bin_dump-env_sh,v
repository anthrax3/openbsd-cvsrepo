head	1.3;
access;
symbols
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.05.21.01.27.38;	author czarkoff;	state dead;
branches;
next	1.2;
commitid	gvK4gnzEc7AZ6epH;

1.2
date	2015.09.18.14.37.52;	author kspillner;	state Exp;
branches;
next	1.1;
commitid	lFs4I17v4fZCfSuk;

1.1
date	2015.07.20.20.53.59;	author kspillner;	state Exp;
branches;
next	;
commitid	YMZYV0lVkDQJRKyn;


desc
@@


1.3
log
@update to websocketd 0.2.12

OK jsing@@ kspillner@@
@
text
@$OpenBSD: patch-examples_cgi-bin_dump-env_sh,v 1.2 2015/09/18 14:37:52 kspillner Exp $

Drop Bash and tweak to work with our ksh.  Merged upstream in PR#166.
--- examples/cgi-bin/dump-env.sh.orig	Thu Jul 16 11:52:56 2015
+++ examples/cgi-bin/dump-env.sh	Thu Jul 16 11:58:52 2015
@@@@ -1,4 +1,4 @@@@
-#!/bin/bash
+#!/bin/sh
 
 # Copyright 2013 Joe Walnes and the websocketd team.
 # All rights reserved.
@@@@ -36,7 +36,8 @@@@ echo
 
 for NAME in ${NAMES}
 do
-	echo ${NAME}=${!NAME:-<unset>}
+	eval "value=\${${NAME}}"
+	env -i "${NAME}=${value:-<unset>}"
 done
 
 # Additional HTTP headers
@


1.2
log
@Tweak examples/cgi-bin/dump-env.sh to only print the value of variables that
are actually set.  This matches the version of the patch that was merged
upstream (PR #166).

ok czarkoff, landry
@
text
@d1 1
a1 1
$OpenBSD: patch-examples_cgi-bin_dump-env_sh,v 1.1 2015/07/20 20:53:59 kspillner Exp $
@


1.1
log
@Update net/websocketd to latest upstream release.  With help from czarkoff@@.

ok czarkoff@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
Drop Bash and tweak to work with our ksh.
d12 1
a12 1
@@@@ -36,7 +36,7 @@@@ echo
d17 2
a18 1
+	echo ${NAME}=${NAME:-<unset>}
@

