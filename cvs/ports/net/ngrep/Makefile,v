head	1.38;
access;
symbols
	OPENBSD_6_2:1.38.0.4
	OPENBSD_6_2_BASE:1.38
	OPENBSD_6_1:1.38.0.2
	OPENBSD_6_1_BASE:1.38
	OPENBSD_6_0:1.37.0.14
	OPENBSD_6_0_BASE:1.37
	OPENBSD_5_9:1.37.0.10
	OPENBSD_5_9_BASE:1.37
	OPENBSD_5_8:1.37.0.12
	OPENBSD_5_8_BASE:1.37
	OPENBSD_5_7:1.37.0.8
	OPENBSD_5_7_BASE:1.37
	OPENBSD_5_6:1.37.0.6
	OPENBSD_5_6_BASE:1.37
	OPENBSD_5_5:1.37.0.4
	OPENBSD_5_5_BASE:1.37
	OPENBSD_5_4:1.37.0.2
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.35.0.6
	OPENBSD_5_3_BASE:1.35
	OPENBSD_5_2:1.35.0.4
	OPENBSD_5_2_BASE:1.35
	OPENBSD_5_1_BASE:1.35
	OPENBSD_5_1:1.35.0.2
	OPENBSD_5_0:1.34.0.2
	OPENBSD_5_0_BASE:1.34
	OPENBSD_4_9:1.32.0.2
	OPENBSD_4_9_BASE:1.32
	OPENBSD_4_8:1.29.0.2
	OPENBSD_4_8_BASE:1.29
	OPENBSD_4_7:1.28.0.4
	OPENBSD_4_7_BASE:1.28
	OPENBSD_4_6:1.28.0.2
	OPENBSD_4_6_BASE:1.28
	OPENBSD_4_5:1.27.0.6
	OPENBSD_4_5_BASE:1.27
	OPENBSD_4_4:1.27.0.4
	OPENBSD_4_4_BASE:1.27
	OPENBSD_4_3:1.27.0.2
	OPENBSD_4_3_BASE:1.27
	OPENBSD_4_2:1.26.0.2
	OPENBSD_4_2_BASE:1.26
	OPENBSD_4_1:1.24.0.6
	OPENBSD_4_1_BASE:1.24
	OPENBSD_4_0:1.24.0.4
	OPENBSD_4_0_BASE:1.24
	OPENBSD_3_9:1.24.0.2
	OPENBSD_3_9_BASE:1.24
	OPENBSD_3_8:1.23.0.2
	OPENBSD_3_8_BASE:1.23
	OPENBSD_3_7:1.22.0.2
	OPENBSD_3_7_BASE:1.22
	OPENBSD_3_6:1.21.0.2
	OPENBSD_3_6_BASE:1.21
	OPENBSD_3_5:1.19.0.2
	OPENBSD_3_5_BASE:1.19
	OPENBSD_3_4:1.18.0.2
	OPENBSD_3_4_BASE:1.18
	OPENBSD_3_3:1.16.0.2
	OPENBSD_3_3_BASE:1.16
	OPENBSD_3_2:1.15.0.2
	OPENBSD_3_2_BASE:1.15
	OPENBSD_3_1:1.14.0.4
	OPENBSD_3_1_BASE:1.14
	OPENBSD_3_0:1.14.0.2
	OPENBSD_3_0_BASE:1.14
	OPENBSD_2_9_TRACKING_SWITCH:1.14
	OPENBSD_2_9:1.11.0.4
	OPENBSD_2_9_BASE:1.11
	OPENBSD_2_8:1.11.0.2
	OPENBSD_2_8_BASE:1.11
	OPENBSD_2_7:1.9.0.2
	OPENBSD_2_7_BASE:1.9
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2
	dugsong_1999-Jun-23:1.1.1.1
	dugsong:1.1.1;
locks; strict;
comment	@# @;


1.38
date	2017.02.07.12.32.56;	author sthen;	state Exp;
branches;
next	1.37;
commitid	erd9HENU9SVm2RiO;

1.37
date	2013.03.21.08.46.34;	author ajacoutot;	state Exp;
branches;
next	1.36;

1.36
date	2013.03.11.11.35.50;	author espie;	state Exp;
branches;
next	1.35;

1.35
date	2012.01.26.08.03.57;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2011.06.16.21.21.43;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2011.06.16.17.42.56;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2010.11.19.22.31.35;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2010.11.11.16.27.54;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.10.18.18.36.50;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.07.12.22.07.39;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2009.03.30.21.19.02;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2007.09.15.22.36.56;	author merdely;	state Exp;
branches;
next	1.26;

1.26
date	2007.03.31.09.38.42;	author steven;	state Exp;
branches;
next	1.25;

1.25
date	2007.03.19.22.44.06;	author jolan;	state Exp;
branches;
next	1.24;

1.24
date	2005.11.01.23.39.08;	author aanriot;	state Exp;
branches;
next	1.23;

1.23
date	2005.07.23.19.41.21;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2004.12.16.00.31.23;	author alek;	state Exp;
branches;
next	1.21;

1.21
date	2004.05.04.10.02.37;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2004.04.09.10.11.36;	author sturm;	state Exp;
branches;
next	1.19;

1.19
date	2003.09.25.06.25.13;	author jolan;	state Exp;
branches;
next	1.18;

1.18
date	2003.05.12.08.23.47;	author jolan;	state Exp;
branches;
next	1.17;

1.17
date	2003.04.17.18.59.49;	author wilfried;	state Exp;
branches;
next	1.16;

1.16
date	2002.10.28.01.38.45;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2002.05.20.00.15.23;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2001.06.12.07.20.08;	author kevlo;	state Exp;
branches;
next	1.13;

1.13
date	2001.05.09.15.26.00;	author kevlo;	state Exp;
branches;
next	1.12;

1.12
date	2001.05.06.05.00.12;	author lebel;	state Exp;
branches;
next	1.11;

1.11
date	2000.10.22.14.03.35;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2000.07.13.07.28.07;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2000.04.14.14.51.49;	author dugsong;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2000.04.09.17.37.30;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2000.03.27.21.57.51;	author dugsong;	state Exp;
branches;
next	1.6;

1.6
date	2000.03.24.22.11.52;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.03.22.23.27.55;	author turan;	state Exp;
branches;
next	1.4;

1.4
date	2000.02.17.00.40.52;	author dugsong;	state Exp;
branches;
next	1.3;

1.3
date	2000.02.11.00.37.33;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	99.06.28.14.27.19;	author dugsong;	state Exp;
branches;
next	1.1;

1.1
date	99.06.23.04.16.21;	author dugsong;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	99.06.23.04.16.21;	author dugsong;	state Exp;
branches;
next	;

1.9.2.1
date	2000.09.15.05.09.52;	author marc;	state Exp;
branches;
next	;


desc
@@


1.38
log
@Fix timestamp printing (due to our nonstandard bpf_timeval)
@
text
@# $OpenBSD: Makefile,v 1.37 2013/03/21 08:46:34 ajacoutot Exp $

COMMENT=	network grep

DISTNAME=	ngrep-1.45
REVISION=	5
CATEGORIES=	net
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=ngrep/}
EXTRACT_SUFX=	.tar.bz2

HOMEPAGE=	http://ngrep.sourceforge.net/

# custom BSD-like
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c pcap pcre
LIB_DEPENDS=	devel/pcre

NO_TEST=	Yes

USE_GMAKE=	Yes
AUTOCONF_VERSION= 2.60
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS+= --enable-ipv6 \
		 --enable-pcre \
		 --with-dropprivs-user=_ngrep
CONFIGURE_ENV=	CFLAGS="${CFLAGS} -I${LOCALBASE}/include" \
		LDFLAGS=-L${LOCALBASE}/lib

do-install:
	cd ${WRKSRC}; \
	${INSTALL_PROGRAM} ngrep ${PREFIX}/sbin/ngrep; \
	${INSTALL_MAN} ngrep.8 ${PREFIX}/man/man8/ngrep.8

.include <bsd.port.mk>
@


1.37
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/03/11 11:35:50 espie Exp $
d6 1
a6 1
REVISION=	4
@


1.36
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/01/26 08:03:57 ajacoutot Exp $
a21 1
USE_LIBTOOL=	Yes
@


1.35
log
@Put these users in the daemon class to be consistent with all the other
ones in ports.

discussed with and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2011/06/16 21:21:43 sthen Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d19 1
a19 1
NO_REGRESS=	Yes
@


1.34
log
@sync ngrep with version from upstream repo (mostly). there's been no release
(or much activity) in years and it has various fixes, including:
- unbreak IPv6
- support pflog capture files and pppoe
- chroot to /var/empty when dropping privs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2011/06/16 17:42:56 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.33
log
@- pcap_yyrestart is supposed to take an argument, ngrep calls it without
one in the event of an error in the filter, this results in attempting
to deref bogus memory. pass it an explicit NULL which is handled correctly.

- don't strip the installed binary, remove USE_GROFF
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/11/19 22:31:35 espie Exp $
d6 1
a6 1
REVISION=	2
@


1.32
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/11/11 16:27:54 espie Exp $
d6 1
a6 1
REVISION=	1
a25 1
USE_GROFF =	Yes
d33 5
@


1.31
log
@new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/10/18 18:36:50 espie Exp $
d20 1
a20 1
LIB_DEPENDS=	::devel/pcre
@


1.30
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/07/12 22:07:39 sthen Exp $
d19 2
a20 2
WANTLIB=	c pcap
LIB_DEPENDS=	pcre::devel/pcre
@


1.29
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/03/30 21:19:02 sthen Exp $
d26 1
@


1.28
log
@- drop privs to a new _ngrep user rather than nobody,
- chroot to /var/empty,
- support pppoe,
- autoconf surgery (functional rather than pretty) to use a version
of pcre from the century of the fruitbat,
- fix license marker, regen plist

reads good to jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2007/09/15 22:36:56 merdely Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.27
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2007/03/31 09:38:42 steven Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d13 1
a13 1
# GPL 
d18 3
a20 1
WANTLIB=		c pcap
d29 4
a32 1
		 --enable-pcre
@


1.26
log
@USE_LIBTOOL, autoconf 2.60
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2007/03/19 22:44:06 jolan Exp $
d3 1
a3 1
COMMENT=	"network grep"
@


1.25
log
@update to 1.45 and modify licensing, from rui reis & stuart henderson
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/11/01 23:39:08 aanriot Exp $
d6 2
a7 1
CATEGORIES=     net
d23 2
a24 1
AUTOCONF_VERSION= 2.59
@


1.24
log
@remove a blank line which produces a blank page with nroff.

help and 'looks fine' jmc@@, ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/07/23 19:41:21 brad Exp $
d5 1
a5 2
DISTNAME=	ngrep-1.44
PKGNAME=	${DISTNAME}p0
d12 3
a14 3
# Restrictive
PERMIT_PACKAGE_CDROM=	"Restrictions on packages"
PERMIT_PACKAGE_FTP=	"Restrictions on packages"
d21 1
d24 2
a25 1
CONFIGURE_ARGS+= --enable-ipv6
@


1.23
log
@upgrade to ngrep 1.44

Adds IPv6 support and a number of bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/12/16 00:31:23 alek Exp $
d6 1
@


1.22
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2004/05/04 10:02:37 espie Exp $
d5 1
a5 1
DISTNAME=	ngrep-1.42
d21 3
a23 4
CONFIGURE_STYLE=autoconf no-autoheader
AUTOCONF_VERSION=2.57

ALL_TARGET=	ngrep
@


1.21
log
@no-autoheader
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2004/04/09 10:11:36 sturm Exp $
d17 1
@


1.20
log
@update to ngrep 1.42

from thuglife at bsd.hu (Robert Nagy)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/09/25 06:25:13 jolan Exp $
d20 1
a20 1
CONFIGURE_STYLE=autoconf
@


1.19
log
@drop maintainership on some stuff i don't use anymore, lop off
WWW: ${HOMEPAGE} while touching 'em
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/05/12 08:23:47 jolan Exp $
d5 1
a5 1
DISTNAME=	ngrep-1.40.1
d8 1
d20 2
a21 3
WRKDIST=	${WRKDIR}/ngrep

CONFIGURE_STYLE=gnu dest
@


1.18
log
@update e-mail address, ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/04/17 18:59:49 wilfried Exp $
d11 1
a11 2
MAINTAINER=	Jolan Luff <jolan@@openbsd.org>

@


1.17
log
@update to 1.40.1; from new maintainer Jolan Luff <jolan@@cryptonomicon.org>

- now respects CFLAGS throughout the whole build
- this version adds tun device support for OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/10/28 01:38:45 naddy Exp $
d11 1
a11 1
MAINTAINER=	Jolan Luff <jolan@@cryptonomicon.org>
@


1.16
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/05/20 00:15:23 brad Exp $
d5 1
a5 1
DISTNAME=	ngrep-1.40
a6 1

d11 1
a11 1
MAINTAINER=	Dug Song <dugsong@@monkey.org>
d13 3
a15 3
PERMIT_PACKAGE_CDROM=	"no obvious license"
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	"no obvious license"
d18 1
a18 1
CONFIGURE_STYLE= gnu dest
d22 2
a24 2

NO_REGRESS=	Yes
@


1.15
log
@use MASTER_SITE_SOURCEFORGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2001/06/12 07:20:08 kevlo Exp $
d7 1
a7 1
NEED_VERSION=	1.408
d24 2
@


1.14
log
@upgrade to version 1.40
--
Ok'd by maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2001/05/09 15:26:00 kevlo Exp $
d8 1
a8 1
MASTER_SITES=	http://prdownloads.sourceforge.net/ngrep/
@


1.13
log
@- upgrade to version 1.39.2
- update MASTER_SITES and WWW
- bump NEED_VERSION
- remove USE_GMAKE

--
Ok'd by maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2001/05/06 05:00:12 lebel Exp $
d5 1
a5 1
DISTNAME=	ngrep-1.39.2
@


1.12
log
@net: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/10/22 14:03:35 espie Exp $
d5 1
a5 1
DISTNAME=	ngrep-1.38
d7 2
a8 2
NEED_VERSION=	1.402
MASTER_SITES=	http://www.packetfactory.net/Projects/ngrep/
d10 1
a10 1
HOMEPAGE=	http://www.packetfactory.net/Projects/ngrep/
a18 1
USE_GMAKE=  yes
@


1.11
log
@Complete a few MAINTAINER names.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.10 2000/07/13 07:28:07 brad Exp $
d7 1
a7 1
NEED_VERSION=	1.310
@


1.10
log
@upgrade to ngrep 1.38; from <obecian@@celerity.bartoli.org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2000/04/14 14:51:49 dugsong Exp $
d10 1
a10 1
MAINTAINER=	dugsong@@monkey.org
@


1.9
log
@fix port: update distfile, fake
@
text
@d1 1
a1 8
# OpenBSD makefile for: ngrep
# Version required:     1.26
# Date created:         1999-Jun-23
# Whom:                 dugsong@@monkey.org
#
# $OpenBSD: Makefile,v 1.8 2000/04/09 17:37:30 espie Exp $

DISTNAME=	ngrep-1.37
d3 1
d5 2
a6 1
NEED_VERSION=	1.191
d8 1
a8 1
MASTER_SITES=	http://www.packetfactory.net/Projects/ngrep/
d17 2
a18 4
HAS_CONFIGURE=	yes
CONFIGURE_ARGS=	--prefix='$$(DESTDIR)$(PREFIX)'

FAKE=		yes
@


1.9.2.1
log
@bring net as of cut-over date into 2.7 branch
@
text
@d1 8
a8 1
# $OpenBSD: Makefile,v 1.10 2000/07/13 07:28:07 brad Exp $
a9 1
DISTNAME=	ngrep-1.38
d11 2
a12 1
NEED_VERSION=	1.310
a14 2
HOMEPAGE=	http://www.packetfactory.net/Projects/ngrep/

d22 4
a25 2
USE_GMAKE=  yes
CONFIGURE_STYLE= gnu dest
@


1.8
log
@explicit FAKE=No, so that we can turn FAKE on by default.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.7 2000/03/27 21:57:51 dugsong Exp $
a11 1
FAKE=No
a14 1

d22 4
a25 1
USE_AUTOCONF=	yes
@


1.7
log
@packetfactory dist path changed
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.6 2000/03/24 22:11:52 espie Exp $
d12 1
@


1.6
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.5 2000/03/22 23:27:55 turan Exp $
d13 1
a13 1
MASTER_SITES=	http://www.packetfactory.net/ngrep/
@


1.5
log
@license
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 2000/02/17 00:40:52 dugsong Exp $
d11 1
a14 1
NEED_VERSION=	1.191
@


1.4
log
@upgrade to version 1.37
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.3 2000/02/11 00:37:33 espie Exp $
d17 5
@


1.3
log
@Use WRKDIST where appropriate.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1999/06/28 14:27:19 dugsong Exp $
d8 1
a8 1
DISTNAME=	ngrep-1.31
d13 1
d20 1
a20 1
WRKDIST=		${WRKDIR}/ngrep
@


1.2
log
@update to version 1.31
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1999/06/23 04:16:21 dugsong Exp $
d13 1
d19 1
a19 1
WRKSRC=		${WRKDIR}/ngrep
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.4 1999/06/23 03:37:17 dugsong Exp $
d8 1
a8 1
DISTNAME=	ngrep-1.26
d16 1
a16 1
GNU_CONFIGURE=	yes
@


1.1.1.1
log
@new ngrep port
@
text
@@
