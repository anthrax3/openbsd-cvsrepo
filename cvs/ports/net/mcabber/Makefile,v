head	1.30;
access;
symbols
	OPENBSD_6_1:1.30.0.2
	OPENBSD_6_1_BASE:1.30
	OPENBSD_6_0:1.27.0.2
	OPENBSD_6_0_BASE:1.27
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.22.0.4
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.21.0.6
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.4
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.17.0.2
	OPENBSD_5_3_BASE:1.17
	OPENBSD_5_2:1.16.0.4
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.14.0.4
	OPENBSD_5_0_BASE:1.14
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.5.0.4
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.2
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.3.0.2
	OPENBSD_4_3_BASE:1.3
	jasper_20080103:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.02.10.12.10.39;	author mestre;	state Exp;
branches;
next	1.29;
commitid	pxmiHzbn4d6QUrZm;

1.29
date	2017.01.11.08.22.59;	author mestre;	state Exp;
branches;
next	1.28;
commitid	HWcTNyGrdB0ODm8t;

1.28
date	2016.10.13.08.40.51;	author fcambus;	state Exp;
branches;
next	1.27;
commitid	XUwBMiMbUbmxTG5M;

1.27
date	2016.03.24.20.04.25;	author mestre;	state Exp;
branches
	1.27.2.1;
next	1.26;
commitid	eDJytIXqNrJ2KTYh;

1.26
date	2016.03.18.23.57.57;	author tim;	state Exp;
branches;
next	1.25;
commitid	yeIdIXpUEQ2pI7f6;

1.25
date	2016.03.18.21.38.25;	author naddy;	state Exp;
branches;
next	1.24;
commitid	BVkebQSTXSZokeRG;

1.24
date	2016.03.16.09.47.14;	author mestre;	state Exp;
branches;
next	1.23;
commitid	PjGm3JZgv7qgvnm8;

1.23
date	2015.11.10.20.38.19;	author tim;	state Exp;
branches;
next	1.22;
commitid	Jxbr1xoXgCN1xZeo;

1.22
date	2015.03.24.22.45.07;	author sthen;	state Exp;
branches;
next	1.21;
commitid	mkjNDnuH9phCykLn;

1.21
date	2013.08.15.16.34.49;	author stsp;	state Exp;
branches;
next	1.20;

1.20
date	2013.05.30.12.01.17;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.21.08.46.34;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.35.49;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2012.09.01.14.36.58;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.16.11.13.38;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2011.08.30.06.54.11;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2010.12.28.23.51.45;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.19.22.31.34;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.11.16.27.54;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2010.10.23.14.20.13;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2010.10.22.17.00.20;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.18.18.36.49;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.20.14.08.32;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2009.12.22.00.31.23;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2009.10.23.09.07.09;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2008.10.16.18.14.09;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2008.04.25.23.13.47;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2008.02.06.11.35.17;	author martynas;	state Exp;
branches;
next	1.2;

1.2
date	2008.01.17.18.01.26;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2008.01.03.18.42.00;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.01.03.18.42.00;	author jasper;	state Exp;
branches;
next	;

1.27.2.1
date	2017.01.11.10.37.52;	author robert;	state Exp;
branches;
next	;
commitid	vUZgbEaZ9NzMJxVq;


desc
@@


1.30
log
@Update to version 1.0.5:
- Bugfixes, and huge speed optimizations for large rosters
- This release fixes CVE-2017-5589

For more information on CVE-2017-5589 ->
https://rt-solutions.de/en/2017/02/CVE-2017-5589_xmpp_carbons/. The one
assigned specifically for mcabber is CVE-2017-5604.

OK maintainer Markus Hennecke, prodded by Rafael Sadowski to switch HOMEPAGE
to HTTPS
@
text
@# $OpenBSD: Makefile,v 1.29 2017/01/11 08:22:59 mestre Exp $

COMMENT=		console jabber client
DISTNAME=		mcabber-1.0.5
CATEGORIES=		net

HOMEPAGE=		https://mcabber.com/

MAINTAINER=		Markus Hennecke <markus-hennecke@@markus-hennecke.de>

# GPLv2+ with SSL exemption
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=		${HOMEPAGE}/files/
EXTRACT_SUFX=		.tar.bz2

MODULES=		devel/gettext

# uses pledge()
WANTLIB=		c crypto gcrypt gpg-error ncursesw panelw pcre pthread \
			ssl glib-2.0 gpgme loudmouth-1>=3 idn otr assuan

LIB_DEPENDS=		devel/glib2 \
			security/gpgme \
			net/loudmouth \
			devel/libidn \
			security/libotr
RUN_DEPENDS=		devel/desktop-file-utils

USE_GMAKE =		Yes
USE_GROFF =		Yes
LIBTOOL_FLAGS=		--tag=disable-static

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS= 	--enable-gpgme \
			--disable-aspell \
			--disable-enchant \
			--disable-modules \
			--enable-otr \
			--enable-sigwinch \
			--with-libotr-prefix=${LOCALBASE}/lib \
			--with-libotr-inc-prefix=${LOCALBASE}/include

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications/
	${INSTALL_DATA} ${WRKSRC}/mcabber.desktop ${PREFIX}/share/applications/
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/mcabber
	${INSTALL_DATA} ${WRKSRC}/mcabberrc.example \
		${PREFIX}/share/examples/mcabber

.include <bsd.port.mk>
@


1.29
log
@Update to version 1.0.4 which includes an important bugfix, the bug is
described in CVE-2015-8688 and although it was assigned to gajim mcabber also
suffered from this

OK maintainer Markus Hennecke
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/10/13 08:40:51 fcambus Exp $
d4 1
a4 1
DISTNAME=		mcabber-1.0.4
d7 1
a7 1
HOMEPAGE=		http://mcabber.com/
@


1.28
log
@Update mcabber to 1.0.3.

From maintainer Markus Hennecke.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/03/24 20:04:25 mestre Exp $
d4 1
a4 1
DISTNAME=		mcabber-1.0.3
@


1.27
log
@This patch introduces pledge(2) to mcabber with the following promises:

rpath/wpath/cpath/fattr: it needs to read, write and create files and set the
correct attributes
inet/dns: network application needs both promises
tty: ncurses is used for the interface so it needs this
proc/exec: this is only needed if events are configured in the config files

In order to apply this we have disabled modules support since it would need to
load libraries dinamically and therefore prot_exec promise would be needed but
that is not a good strategy. This is mentioned in DESCR to reflect the change.

OK tim@@ after his suggestions and also OK by the maintainer Markus Hennecke
since no users objected this change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/03/18 23:57:57 tim Exp $
d4 1
a4 2
DISTNAME=		mcabber-1.0.2
REVISION=		1
d21 1
a21 2
			ssl glib-2.0 gmodule-2.0 gpgme loudmouth-1>=3 \
			idn otr assuan ffi gobject-2.0
@


1.27.2.1
log
@apply upstream patches for mcabber to fix CVE-2015-8688
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/03/24 20:04:25 mestre Exp $
d5 1
a5 1
REVISION=		2
@


1.26
log
@Fix a bug in the configure script causing the default modules directory to be
set to a wrong value. Incorrect use of the AC_DEFINE_DIR macro (in
configure.ac) results in a value like "23722{exec_prefix}/lib/mcabber".

Help and OK naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/03/18 21:38:25 naddy Exp $
d5 1
a5 1
REVISION=		0
d20 1
d40 1
@


1.25
log
@remove SHARED_ONLY from simple ports that use the gettext or libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/03/16 09:47:14 mestre Exp $
d5 1
@


1.24
log
@Update to 1.0.2; OK Markus Hennecke (maintainer)

Release notes between version 1.0.1 and 1.0.2:

v1.0.2:
Support for Loudmouth 1.5.3+ SHA256 fingerprints.
Stop HTML-escaping OTR messages.
Fix usage of $HOME/.mcabberrc broken in previous release.

v1.0.1:
Many improvements in Message Carbons, PGP, OTR and SSL support.
The GnuPG engine can be specified with the gpg_path option.
Support for the XDG configuration directory.
Several memory leaks and bugs have been fixed.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.23 2015/11/10 20:38:19 tim Exp $

SHARED_ONLY=		Yes
@


1.23
log
@Update to 1.0.0; OK maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/03/24 22:45:07 sthen Exp $
d6 1
a6 1
DISTNAME=		mcabber-1.0.0
d23 1
a23 1
			idn otr assuan
@


1.22
log
@mcabber-0.10.3, from Tim van der Molen, ok Markus Hennecke (maintainer),
plus slight tweak (drop autoconf dependency, configure.ac patch was removed).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/08/15 16:34:49 stsp Exp $
d6 1
a6 1
DISTNAME=		mcabber-0.10.3
@


1.21
log
@libotr-4.0.0 support for mcabber. Patch obtained from
http://www.isbear.org.ua/hg/isbear/mcabber-patches/file/tip/use-otr-v4.diff
This makes it build, otherwise untested because mcabber doesn't seem to
work with jabber servers used by myself and pascal.
ok pascal@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/05/30 12:01:17 sthen Exp $
d6 1
a6 2
DISTNAME=		mcabber-0.10.2
REVISION=		0
d9 1
a9 1
HOMEPAGE=		http://www.lilotux.net/~mikael/mcabber/
d32 1
d36 1
a36 2
AUTOCONF_VERSION=	2.69
CONFIGURE_STYLE=	autoconf
@


1.20
log
@update to mcabber 0.10.2, from maintainer Markus Hennecke
- use --tag=disable-static to disable libtool static archives for modules
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/21 08:46:34 ajacoutot Exp $
d7 1
d36 2
a37 1
CONFIGURE_STYLE=	gnu
@


1.19
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:35:49 espie Exp $
d6 1
a6 1
DISTNAME=		mcabber-0.10.1
a8 2
REVISION=		2

d33 1
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2012/09/01 14:36:58 ajacoutot Exp $
a33 1
USE_LIBTOOL=		Yes
@


1.17
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/09/16 11:13:38 espie Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.16
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/08/30 06:54:11 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.15
log
@Fix WANTLIB after gpgme update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/12/28 23:51:45 jasper Exp $
d9 1
a9 1
REVISION=		0
@


1.14
log
@- update mcabber to 0.10.1 (from maintainer)
- regen WANTLIB while here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/19 22:31:34 espie Exp $
d9 2
d28 1
a28 1
			idn otr
@


1.13
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/11 16:27:54 espie Exp $
d6 1
a6 1
DISTNAME=		mcabber-0.10.0
d24 1
a24 1
WANTLIB=		c crypto gcrypt gpg-error ncurses panel pcre pthread \
@


1.12
log
@new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/10/23 14:20:13 naddy Exp $
d25 1
a25 1
			ssl glib-2.0 gmodule-2.0 gpgme loudmouth-1.>=3 \
d28 6
a33 6
LIB_DEPENDS=		::devel/glib2 \
			::security/gpgme \
			::net/loudmouth \
			::devel/libidn \
			::security/libotr
RUN_DEPENDS=		::devel/desktop-file-utils
d36 1
a36 1
USE_GROFF =	Yes
@


1.11
log
@don't run a man page without tables through tbl(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/10/22 17:00:20 naddy Exp $
d24 9
a32 7
WANTLIB=		c crypto gcrypt gpg-error ncurses panel pcre pthread ssl

LIB_DEPENDS=		glib-2.0,gmodule-2.0::devel/glib2 \
			gpgme::security/gpgme \
			loudmouth-1.>=3::net/loudmouth \
			idn::devel/libidn \
			otr::security/libotr
@


1.10
log
@tbl(1) is no longer in /usr/bin
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/10/18 18:36:49 espie Exp $
a43 5

pre-install:
	cd ${WRKSRC}/doc \
		&& tbl mcabber.1 > mcabber.1.new \
		&& mv mcabber.1.new mcabber.1
@


1.9
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/06/20 14:08:32 sthen Exp $
d47 2
a48 2
		&& /usr/bin/tbl mcabber.1 > mcabber.1.new \
		&& /bin/mv mcabber.1.new mcabber.1
@


1.8
log
@Update to 0.10.0 from maintainer Markus Hennecke, tested by
Simon Kuhnle and robert at openbsd dot pap dot st; with a few
tweaks by me tested by Simon Kuhnle.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2009/12/22 00:31:23 sthen Exp $
d34 1
@


1.7
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.6 2009/10/23 09:07:09 jasper Exp $
d6 1
a6 2
DISTNAME=		mcabber-0.9.10
PKGNAME=		${DISTNAME}p0
d13 1
a13 1
# GPL
d24 1
a24 1
WANTLIB=		c crypto gpg-error ncurses panel ssl
d26 1
a26 1
LIB_DEPENDS=		glib-2.0::devel/glib2 \
d28 2
a36 1
			--with-ssl \
@


1.6
log
@- update mcabber to 0.9.10

from Markus Hennecke (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2008/10/16 18:14:09 jasper Exp $
d5 1
@


1.5
log
@- update mcabber to 0.9.9

by Simon Kuhnle via Markus Hennecke (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2008/04/25 23:13:47 pvalchev Exp $
d4 1
a4 1
DISTNAME=		mcabber-0.9.9
d35 1
@


1.4
log
@mcabber-0.9.7; from maintainer markus-hennecke@@markus-hennecke.de
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2008/02/06 11:35:17 martynas Exp $
d4 1
a4 1
DISTNAME=		mcabber-0.9.7
@


1.3
log
@enable otr;  from Wiktor Izdebski
ok maintainer Markus Hennecke, simon@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/01/17 18:01:26 jasper Exp $
d4 1
a4 2
DISTNAME=		mcabber-0.9.6
PKGNAME=		${DISTNAME}p0
d36 1
@


1.2
log
@- update mcabber to 0.9.6

from Markus Hennecke <markus-hennecke at markus-hennecke.de> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/01/03 18:42:00 jasper Exp $
d5 1
d26 2
a27 1
			gpgme::security/gpgme
d36 3
a38 1
			--disable-otr
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d4 1
a4 1
DISTNAME=		mcabber-0.9.5
@


1.1.1.1
log
@import mcabber 0.9.5

Small console Jabber client which features SSL support, history logging
and external actions.

from Markus Hennecke <markus-hennecke at markus-hennecke.de> (MAINTAINER)
with tweaks by me

ok simon@@
@
text
@@
