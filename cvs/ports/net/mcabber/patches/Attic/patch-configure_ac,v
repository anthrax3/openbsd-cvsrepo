head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2015.03.24.22.45.07;	author sthen;	state dead;
branches;
next	1.1;
commitid	mkjNDnuH9phCykLn;

1.1
date	2013.08.15.16.34.50;	author stsp;	state Exp;
branches;
next	;


desc
@@


1.2
log
@mcabber-0.10.3, from Tim van der Molen, ok Markus Hennecke (maintainer),
plus slight tweak (drop autoconf dependency, configure.ac patch was removed).
@
text
@$OpenBSD: patch-configure_ac,v 1.1 2013/08/15 16:34:50 stsp Exp $
http://www.isbear.org.ua/hg/isbear/mcabber-patches/file/tip/use-otr-v4.diff
--- configure.ac.orig	Sun Dec  2 14:27:30 2012
+++ configure.ac	Wed Aug 14 18:56:07 2013
@@@@ -184,16 +184,26 @@@@ fi
 
 # Check for otr
 AC_ARG_ENABLE(otr,
-              AC_HELP_STRING([--enable-otr],
-                             [enable OTR (Off-the-Record) messaging support]),
-              enable_otr=$enableval, otr="")
+    AC_HELP_STRING([--enable-otr],
+                   [enable OTR (Off-the-Record) messaging support]),
+    enable_otr=$enableval,
+    otr="")
 if test "x$enable_otr" = "xyes"; then
-  # Look for libgcrypt and libotr
-  AM_PATH_LIBGCRYPT(1.2.2, [
-          AM_PATH_LIBOTR(3.1.0, ,
-                         AC_MSG_ERROR(libotr 3.1.0 or newer is required.))
-      ], AC_MSG_ERROR(libgcrypt 1.2.2 or newer is required.)
-  )
+    # Look for libgcrypt and libotr
+    AM_PATH_LIBGCRYPT(1.2.2, [
+        AM_PATH_LIBOTR(4.0.0, [
+            AC_DEFINE([HAVE_LIBOTR], 1, [Define if you use libotr])
+        ], [
+            AM_PATH_LIBOTR(3.1.0, [
+                AC_DEFINE([HAVE_LIBOTR], 1, [Define if you use libotr])
+                AC_DEFINE([HAVE_LIBOTR3], 1, [Define if you use libotr v3])
+            ], [
+                AC_MSG_ERROR(libotr 3.1.0 or newer is required.)
+            ])
+        ])
+    ], [
+        AC_MSG_ERROR(libgcrypt 1.2.2 or newer is required.)
+    ])
 fi
 
 # Check for Enchant stuff
@@@@ -290,3 +300,4 @@@@ AC_CONFIG_FILES([mcabber/Makefile
                  mcabber.pc
                  Makefile])
 AC_OUTPUT
+dnl vim: set expandtab cindent cinoptions=>2\:2(0 sw=2 ts=2:  For Vim users...
@


1.1
log
@libotr-4.0.0 support for mcabber. Patch obtained from
http://www.isbear.org.ua/hg/isbear/mcabber-patches/file/tip/use-otr-v4.diff
This makes it build, otherwise untested because mcabber doesn't seem to
work with jabber servers used by myself and pascal.
ok pascal@@
@
text
@d1 1
a1 1
$OpenBSD$
@

