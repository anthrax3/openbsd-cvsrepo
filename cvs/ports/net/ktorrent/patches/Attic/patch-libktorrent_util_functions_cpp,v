head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2008.04.24.00.19.40;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2008.04.01.21.22.10;	author jakemsr;	state Exp;
branches;
next	;


desc
@@


1.2
log
@maintenance update from Brad - most patches are now upstream.
@
text
@$OpenBSD: patch-libktorrent_util_functions_cpp,v 1.1 2008/04/01 21:22:10 jakemsr Exp $
--- libktorrent/util/functions.cpp.orig	Mon Mar 31 20:18:16 2008
+++ libktorrent/util/functions.cpp	Mon Mar 31 20:25:06 2008
@@@@ -178,7 +178,7 @@@@ namespace bt
 	{
 		struct timeval tv;
 		gettimeofday(&tv,0);
-		global_time_stamp = (Uint64)(tv.tv_sec * 1000 + tv.tv_usec * 0.001);
+		global_time_stamp = (Uint64)tv.tv_sec * 1000 + (Uint64)tv.tv_usec * 0.001;
 		return global_time_stamp;
 	}
 	
@


1.1
log
@
avoid overflowing a time_t when converting timeval to a timestamp in
milliseconds.

problem found and fix sent upstream by Mark Peloquin, who notified the
port maintainer.  thanks Mark!

this patch is from brad@@ (MAINTAINER) via ktorrent svn
@
text
@d1 1
a1 1
$OpenBSD$
@

