head	1.3;
access;
symbols
	OPENBSD_4_2:1.2.0.4
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.6
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	robert:1.1.1.1
	robert_20050627:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2007.11.10.21.10.42;	author kili;	state dead;
branches;
next	1.2;

1.2
date	2006.11.01.21.13.20;	author kili;	state Exp;
branches;
next	1.1;

1.1
date	2005.07.27.21.37.26;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.07.27.21.37.26;	author robert;	state Exp;
branches;
next	;


desc
@@


1.3
log
@
Update to kismet-2007-10-R1.

Tested by quite some people (after some pushing by sthen@@).

ok sthen@@
@
text
@$OpenBSD: patch-scripts_kismet_in,v 1.2 2006/11/01 21:13:20 kili Exp $

# Kill some bashisms (doesn't help much, though).

--- scripts/kismet.in.orig	Wed Jun 22 06:22:08 2005
+++ scripts/kismet.in	Sun Jun 26 12:22:44 2005
@@@@ -7,8 +7,6 @@@@ BIN=@@bindir@@
 
 GREP_OPTIONS=""
 
-set -m
-
 gui=`grep -e "^gui=" ${ETC}/kismet_ui.conf | cut -d= -f2 | tr -d " \t"`
 piddir=`grep -e "^piddir=" ${ETC}/kismet.conf | cut -d= -f2 | tr -d " \t"`
 
@@@@ -61,21 +59,18 @@@@ servpid=$!
 echo "Waiting for server to start before starting UI..."
 sleep 4
 
-kill -0 $servpid 2>/dev/null
-if test "$?" != "0" ; then
-    # Don't print anything here so that users don't get confused, just die and let
-    # them read the server fatal errors
+exit_kismet() {
+	kill -0 $servpid && echo Killing server... && kill $servpid
+	echo Kismet exited.
+}
+
+if kill -0 $servpid 2>/dev/null; then
+    trap exit_kismet EXIT INT TERM
+else
+    # Don't print anything here so that users don't get confused,
+    # just die and let them read the server fatal errors
     exit 1
 fi
 
 echo "Starting UI..."
 ${BIN}/kismet_client $client
-
-if test "$?" != "5"; then
-	echo "Killing server..."
-	kill $servpid
-	wait %-
-fi
-
-echo "Kismet exited."
-
@


1.2
log
@
Update to 2006-04-R1, with some patches from the upstream kismet SVN.

While here, update my mail address and comment most of
the patch files.

Some WANTLIB spanking and ok, sturm@@
@
text
@d1 1
a1 1
$OpenBSD: patch-scripts_kismet_in,v 1.1.1.1 2005/07/27 21:37:26 robert Exp $
@


1.1
log
@Initial revision
@
text
@d1 4
a4 1
$OpenBSD$
@


1.1.1.1
log
@Import of kismet-2005-07-R1a.
Kismet is an 802.11 layer2 wireless network detector, sniffer, and
intrusion detection system.  Kismet will work with any wireless card
which supports raw monitoring (rfmon) mode, and can sniff 802.11b,
802.11a, and 802.11g traffic.

Kismet identifies networks by passively collecting packets and detecting
standard named networks, detecting (and given time, decloaking) hidden
networks, and infering the presence of nonbeaconing networks via data
traffic.

from Matthias Kilian <kili@@outback.escape.de> and from a lot of
other people.
@
text
@@
