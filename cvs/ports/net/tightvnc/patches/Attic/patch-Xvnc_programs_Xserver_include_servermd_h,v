head	1.5;
access;
symbols
	OPENBSD_4_9:1.4.0.22
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.20
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.18
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.16
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.14
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.12
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.10
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.8
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.6
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.6
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.4
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.1.0.10
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.8
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.6
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.4
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.2
	OPENBSD_3_1_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2011.07.02.10.41.59;	author sthen;	state dead;
branches;
next	1.4;

1.4
date	2005.10.13.01.37.26;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2004.07.23.05.10.18;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2004.06.13.07.01.29;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.11.11.01.25.13;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.5
log
@drop tightvnc and allow ssvnc-viewer to replace tightvnc-viewer.

- tightvnc-server is based on a really old X release - it barely
works on i386, but doesn't support most X clients - and fails on most
other arch (it's neither LP64 nor big-endian clean).

x11vnc is a suitable alternative for some users, anyone interested
in the exact same type of functionality (standalone RFB X server)
should look at porting tigervnc.

- ssvnc-viewer is a significantly improved fork of tightvnc-viewer
and basically a drop-in replacement (same filename for the viewer).

ok dcoppa@@ and supported by weerd@@ and various ports@@ readers
@
text
@$OpenBSD: patch-Xvnc_programs_Xserver_include_servermd_h,v 1.4 2005/10/13 01:37:26 pvalchev Exp $
--- Xvnc/programs/Xserver/include/servermd.h.orig	Wed Feb 19 09:39:54 2003
+++ Xvnc/programs/Xserver/include/servermd.h	Wed Oct 12 16:24:00 2005
@@@@ -132,7 +132,7 @@@@ SOFTWARE.
 
 #endif /* vax */
 
-#if (defined(Lynx) && defined(__powerpc__))
+#ifdef __powerpc__
 
 /* For now this is for Xvfb only */
 #define IMAGE_BYTE_ORDER        MSBFirst
@@@@ -147,10 +147,43 @@@@ SOFTWARE.
 
 #define FAST_MEMCPY
 
-#endif /* LynxOS PowerPC */
+#endif /* PowerPC */
 
+#if defined(__arm32__) || defined(__arm__)
+
+#define IMAGE_BYTE_ORDER	LSBFirst
+#define BITMAP_BIT_ORDER	LSBFirst
+
+#define GLYPHPADBYTES		4
+#define GETLEFTBITS_ALIGNMENT	1
+#define LARGE_INSTRUCTION_CACHE
+#define AVOID_MEMORY_READ
+
+#endif /* __arm32__ || __arm__ */
+
+#if defined(__sh__)
+
+#if defined(__BIG_ENDIAN__)
+# define IMAGE_BYTE_ORDER	MSBFirst
+# define BITMAP_BIT_ORDER	MSBFirst
+# define GLYPHPADBYTES		4
+# define GETLEFTBITS_ALIGNMENT	1
+#else
+# define IMAGE_BYTE_ORDER	LSBFirst
+# define BITMAP_BIT_ORDER	LSBFirst
+# define GLYPHPADBYTES		4
+# define GETLEFTBITS_ALIGNMENT	1
+#endif
+
+#define AVOID_MEMORY_READ
+#define FAST_CONSTANT_OFFSET_MODE
+#define LARGE_INSTRUCTION_CACHE
+#define PLENTIFUL_REGISTERS
+
+#endif /* SuperH */
+
+
 #if (defined(sun) && !(defined(i386) && defined(SVR4))) || \
-    (defined(AMOEBA) && (defined(sparc) || defined(mc68000))) || \
     (defined(__uxp__) && (defined(sparc) || defined(mc68000))) || \
     (defined(Lynx) && defined(__sparc__)) || \
     ((defined(__NetBSD__) || defined(__OpenBSD__)) && \
@@@@ -214,20 +247,6 @@@@ SOFTWARE.
 
 #endif /* ibm */
 
-#ifdef hpux
-
-#define IMAGE_BYTE_ORDER	MSBFirst        /* Values for the HP only */
-#define BITMAP_BIT_ORDER	MSBFirst
-#define	GLYPHPADBYTES		2		/* to match product server */
-#define	GETLEFTBITS_ALIGNMENT	4		/* PA forces longs to 4 */
-						/* byte boundries */
-#define AVOID_MEMORY_READ
-#define FAST_CONSTANT_OFFSET_MODE
-#define LARGE_INSTRUCTION_CACHE
-#define PLENTIFUL_REGISTERS
-
-#endif /* hpux */
-
 #if defined (M4310) || defined(M4315) || defined(M4317) || defined(M4319) || defined(M4330)
 
 #define IMAGE_BYTE_ORDER	MSBFirst        /* Values for Pegasus only */
@@@@ -305,6 +324,27 @@@@ SOFTWARE.
 #define LOG2_BYTES_PER_SCANLINE_PAD_PROTO	2
 
 #endif /* alpha */
+
+#if defined(__AMD64__) || defined(AMD64) || defined(__amd64__)
+# define IMAGE_BYTE_ORDER	LSBFirst
+
+# if defined(XF86MONOVGA) || defined(XF86VGA16) || defined(XF86MONO)
+#  define BITMAP_BIT_ORDER      MSBFirst
+# else
+#  define BITMAP_BIT_ORDER      LSBFirst
+# endif
+
+# if defined(XF86MONOVGA) || defined(XF86VGA16)
+#  define BITMAP_SCANLINE_UNIT  8
+# endif
+
+# define GLYPHPADBYTES		4
+# define GETLEFTBITS_ALIGNMENT	1
+# define LARGE_INSTRUCTION_CACHE
+# define FAST_CONSTANT_OFFSET_MODE
+/* ???? */
+# define FAST_UNALIGNED_READS
+#endif /* AMD64 */
 
 #ifdef stellar
 
@


1.4
log
@proper defines for __arm__ so this builds there; no binary package change
from current X distrib via Stuart Henderson <sthen@@spacehopper.org>
@
text
@d1 1
a1 1
$OpenBSD: patch-Xvnc_programs_Xserver_include_servermd_h,v 1.3 2004/07/23 05:10:18 pvalchev Exp $
@


1.3
log
@provide proper definitions so this builds on powerpc
@
text
@d1 3
a3 3
$OpenBSD: patch-Xvnc_programs_Xserver_include_servermd_h,v 1.2 2004/06/13 07:01:29 pvalchev Exp $
--- Xvnc/programs/Xserver/include/servermd.h.orig	Wed Aug  7 05:42:53 2002
+++ Xvnc/programs/Xserver/include/servermd.h	Thu Jul 22 22:52:03 2004
d13 1
a13 1
@@@@ -147,10 +147,31 @@@@ SOFTWARE.
d20 12
d59 1
a59 1
@@@@ -214,20 +235,6 @@@@ SOFTWARE.
d80 1
a80 1
@@@@ -305,6 +312,27 @@@@ SOFTWARE.
@


1.2
log
@a hack at an AMD64 config.
this now at least compiles
@
text
@d1 4
a4 4
$OpenBSD: patch-Xvnc_programs_Xserver_include_servermd_h,v 1.1 2001/11/11 01:25:13 lebel Exp $
--- Xvnc/programs/Xserver/include/servermd.h.orig	2004-06-07 08:46:28.000000000 -0600
+++ Xvnc/programs/Xserver/include/servermd.h	2004-06-13 00:55:18.000000000 -0600
@@@@ -149,8 +149,29 @@@@ SOFTWARE.
d6 13
a18 1
 #endif /* LynxOS PowerPC */
d68 2
a69 1
@@@@ -306,6 +313,27 @@@@ SOFTWARE.
d72 1
a72 1
 
d93 1
a93 1
+
a95 1
 #define IMAGE_BYTE_ORDER	MSBFirst       /* Values for the stellar only*/
@


1.1
log
@make tightvnc compile and run under macppc
@
text
@d1 4
a4 4
$OpenBSD$
--- Xvnc/programs/Xserver/include/servermd.h.orig	Sun Jun 11 08:00:52 2000
+++ Xvnc/programs/Xserver/include/servermd.h	Sat Nov 10 18:29:19 2001
@@@@ -132,7 +132,7 @@@@ SOFTWARE.
d6 1
a6 1
 #endif /* vax */
d8 28
a35 2
-#if (defined(Lynx) && defined(__powerpc__))
+#if ((defined(__OpenBSD__) || defined(Lynx)) && defined(__powerpc__))
d37 47
a83 2
 /* For now this is for Xvfb only */
 #define IMAGE_BYTE_ORDER        MSBFirst
@

