head	1.32;
access;
symbols
	OPENBSD_4_9:1.31.0.2
	OPENBSD_4_9_BASE:1.31
	OPENBSD_4_8:1.26.0.2
	OPENBSD_4_8_BASE:1.26
	OPENBSD_4_7:1.23.0.2
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.21.0.4
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.21.0.2
	OPENBSD_4_5_BASE:1.21
	OPENBSD_4_4:1.19.0.4
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.17.0.4
	OPENBSD_4_2_BASE:1.17
	OPENBSD_4_1:1.17.0.2
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.16.0.2
	OPENBSD_4_0_BASE:1.16
	OPENBSD_3_9:1.15.0.2
	OPENBSD_3_9_BASE:1.15
	OPENBSD_3_8:1.14.0.4
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.14.0.2
	OPENBSD_3_7_BASE:1.14
	OPENBSD_3_6:1.12.0.2
	OPENBSD_3_6_BASE:1.12
	OPENBSD_3_5:1.11.0.2
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.8.0.4
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.8.0.2
	OPENBSD_3_3_BASE:1.8
	OPENBSD_3_2:1.6.0.2
	OPENBSD_3_2_BASE:1.6
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4
	OPENBSD_3_0:1.1.1.1.0.2
	OPENBSD_3_0_BASE:1.1.1.1
	lebel_2001-Sep-07:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.32
date	2011.07.02.10.41.59;	author sthen;	state dead;
branches;
next	1.31;

1.31
date	2010.11.19.22.31.39;	author espie;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.11.17.20.28;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.10.24.21.30.02;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2010.10.23.21.55.56;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2010.10.18.18.36.59;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2010.07.12.22.07.42;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2010.06.11.19.22.32;	author landry;	state Exp;
branches;
next	1.24;

1.24
date	2010.04.24.20.18.39;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2009.10.26.17.33.58;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2009.08.10.06.33.43;	author kili;	state Exp;
branches;
next	1.21;

1.21
date	2009.01.27.01.35.47;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2009.01.19.08.01.34;	author pea;	state Exp;
branches;
next	1.19;

1.19
date	2007.11.17.20.39.03;	author steven;	state Exp;
branches;
next	1.18;

1.18
date	2007.09.15.22.36.59;	author merdely;	state Exp;
branches;
next	1.17;

1.17
date	2006.11.21.10.23.47;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2006.08.03.23.15.58;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2005.10.07.18.52.58;	author alek;	state Exp;
branches;
next	1.14;

1.14
date	2004.12.16.00.31.26;	author alek;	state Exp;
branches;
next	1.13;

1.13
date	2004.09.29.20.39.48;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2004.04.21.12.56.30;	author wilfried;	state Exp;
branches;
next	1.11;

1.11
date	2004.03.11.18.01.27;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2003.11.11.22.08.48;	author margarida;	state Exp;
branches;
next	1.9;

1.9
date	2003.10.26.23.49.39;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2003.01.12.21.37.49;	author millert;	state Exp;
branches;
next	1.7;

1.7
date	2002.12.29.21.30.57;	author fgsch;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.18.22.35.45;	author lebel;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2002.04.15.06.55.57;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2002.03.25.11.57.45;	author wilfried;	state Exp;
branches;
next	1.3;

1.3
date	2002.03.04.23.35.12;	author matt;	state Exp;
branches;
next	1.2;

1.2
date	2001.11.24.20.19.31;	author matt;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.08.00.38.11;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.09.08.00.38.11;	author lebel;	state Exp;
branches;
next	;

1.6.2.1
date	2003.02.25.03.32.17;	author brad;	state Exp;
branches;
next	;


desc
@@


1.32
log
@drop tightvnc and allow ssvnc-viewer to replace tightvnc-viewer.

- tightvnc-server is based on a really old X release - it barely
works on i386, but doesn't support most X clients - and fails on most
other arch (it's neither LP64 nor big-endian clean).

x11vnc is a suitable alternative for some users, anyone interested
in the exact same type of functionality (standalone RFB X server)
should look at porting tigervnc.

- ssvnc-viewer is a significantly improved fork of tightvnc-viewer
and basically a drop-in replacement (same filename for the viewer).

ok dcoppa@@ and supported by weerd@@ and various ports@@ readers
@
text
@# $OpenBSD: Makefile,v 1.31 2010/11/19 22:31:39 espie Exp $

COMMENT-main=	cross-platform remote desktop access
COMMENT-viewer=	client for cross-platform remote desktop access

VERSION=	1.3.10
PKGNAME-main=	tightvnc-${VERSION}
PKGNAME-viewer=	tightvnc-viewer-${VERSION}
REVISION-main=	0
REVISION-viewer=1
DISTNAME=	tightvnc-${VERSION}_unixsrc
CATEGORIES=	net

HOMEPAGE=	http://www.tightvnc.org/

MAINTAINER=	Rob Casey <rob@@minauros.com>

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=vnc-tight/}


WRKDIST=	${WRKDIR}/vnc_unixsrc

MULTI_PACKAGES=	-main -viewer

CONFIGURE_STYLE=imake

ALL_TARGET=	World

USE_GROFF =	Yes
NO_REGRESS=	Yes

WANTLIB=		X11 Xau Xdmcp Xext c z

WANTLIB-viewer=		${WANTLIB} ICE SM Xaw Xmu Xpm Xt jpeg>=62
LIB_DEPENDS-viewer=	graphics/jpeg

WANTLIB-main=		${WANTLIB} m

MAKE_FLAGS=		CC=${CC} \
			CCOPTIONS="${CFLAGS}"

DOCUMENTATION=	vncserver.man vncpasswd/vncpasswd.man vncconnect/vncconnect.man \
		Xvnc/programs/Xserver/Xvnc.man vncviewer/vncviewer.man

post-install:
	${INSTALL_PROGRAM} ${WRKSRC}/Xvnc/programs/Xserver/Xvnc ${PREFIX}/bin/Xvnc
	${INSTALL_PROGRAM} ${WRKSRC}/vncviewer/vncviewer ${PREFIX}/bin/vncviewer
	${INSTALL_PROGRAM} ${WRKSRC}/vncpasswd/vncpasswd ${PREFIX}/bin/vncpasswd
	${INSTALL_PROGRAM} ${WRKSRC}/vncconnect/vncconnect ${PREFIX}/bin/vncconnect
	sed  -e s%/usr/local/vnc/classes%${TRUEPREFIX}/share/vnc/classes% \
		< ${WRKSRC}/vncserver \
		> ${WRKSRC}/vncserver.local
	${INSTALL_SCRIPT} ${WRKSRC}/vncserver.local ${PREFIX}/bin/vncserver

	${INSTALL_DATA_DIR} ${PREFIX}/share/vnc
	${INSTALL_DATA_DIR} ${PREFIX}/share/vnc/classes
	${INSTALL_DATA} ${WRKSRC}/classes/* ${PREFIX}/share/vnc/classes
.for i in ${DOCUMENTATION}
	${INSTALL_MAN} ${WRKSRC}/$i ${PREFIX}/man/man1/${i:T:R}.1
.endfor

.include <bsd.port.mk>
@


1.31
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/11 17:20:28 espie Exp $
@


1.30
log
@finish net WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/10/24 21:30:02 ajacoutot Exp $
d40 2
a41 2
WANTLIB-viewer=		${WANTLIB} ICE SM Xaw Xmu Xpm Xt jpeg.>=62
LIB_DEPENDS-viewer=	::graphics/jpeg
@


1.29
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/10/23 21:55:56 naddy Exp $
d40 2
a41 2
WANTLIB-viewer=		${WANTLIB} ICE SM Xaw Xmu Xpm Xt 
LIB_DEPENDS-viewer=	jpeg.>=62.::graphics/jpeg
@


1.28
log
@comment out the one cat page that was also installed through imake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/10/18 18:36:59 espie Exp $
a25 1
USE_X11=	Yes
@


1.27
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/07/12 22:07:42 sthen Exp $
d10 1
a10 1
REVISION-viewer=0
@


1.26
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/06/11 19:22:32 landry Exp $
d36 1
@


1.25
log
@Remove sparc64-specific patch now that it switched to gcc4.
From Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/04/24 20:18:39 naddy Exp $
d7 4
a10 2
PKGNAME-main=	tightvnc-${VERSION}p0
PKGNAME-viewer=	tightvnc-viewer-${VERSION}p0
@


1.24
log
@fix build and WANTLIB after libXp removal
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/10/26 17:33:58 sthen Exp $
d7 1
a7 1
PKGNAME-main=	tightvnc-${VERSION}
a47 4

.if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=	patch-* gcc-*
.endif
@


1.23
log
@Update to 1.3.10, from Ian McWilliam.

(1.3.10 has a security fix in the Windows viewer; this does not
affect the unix viewer - this is not a security update on OpenBSD).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/08/10 06:33:43 kili Exp $
d8 1
a8 1
PKGNAME-viewer=	tightvnc-viewer-${VERSION}
d38 1
a38 1
WANTLIB-viewer=		${WANTLIB} ICE SM Xaw Xmu Xp Xpm Xt 
@


1.22
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/01/27 01:35:47 sthen Exp $
d6 3
a8 3
VERSION=	1.3.9
PKGNAME-main=	tightvnc-${VERSION}p1
PKGNAME-viewer=	tightvnc-viewer-${VERSION}p0
d36 1
a36 1
WANTLIB=		X11 Xau Xdmcp Xext c pthread-stubs xcb z
@


1.21
log
@remove the server's RUN_DEPENDS on the viewer, it's not necessary
and prevents the server from being used while an alternative vncviewer
package is installed. bump package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/01/19 08:01:34 pea Exp $
d7 2
a8 2
PKGNAME-main=	tightvnc-${VERSION}p0
PKGNAME-viewer=	tightvnc-viewer-${VERSION}
d36 1
a36 1
WANTLIB=		X11 Xau Xdmcp Xext c z 
@


1.20
log
@Update to 1.3.9.
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/11/17 20:39:03 steven Exp $
d7 1
a7 1
PKGNAME-main=	tightvnc-${VERSION}
a40 1
RUN_DEPENDS-main=	:tightvnc-viewer-${VERSION}:net/tightvnc,-viewer
@


1.19
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/09/15 22:36:59 merdely Exp $
d6 3
a8 3
VERSION=	1.2.9
PKGNAME-main=	tightvnc-${VERSION}p1
PKGNAME-viewer=	tightvnc-viewer-${VERSION}p0
d43 3
@


1.18
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/11/21 10:23:47 espie Exp $
d7 2
a8 2
PKGNAME-main=	tightvnc-${VERSION}p0
PKGNAME-viewer=	tightvnc-viewer-${VERSION}
d36 1
a36 1
WANTLIB=		X11 Xext c z 
@


1.17
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/08/03 23:15:58 espie Exp $
d3 2
a4 2
COMMENT-main=	"cross-platform remote desktop access"
COMMENT-viewer=	"client for cross-platform remote desktop access"
@


1.16
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/10/07 18:52:58 alek Exp $
d3 1
a3 1
COMMENT=	"cross-platform remote desktop access"
d7 1
a7 1
PKGNAME=	tightvnc-${VERSION}
a20 1
WANTLIB=		X11 Xext c z 
a23 1
LIB_DEPENDS=	jpeg.>=62.::graphics/jpeg
d28 1
a28 2
MULTI_PACKAGES=	-viewer
SUBPACKAGE?=
d36 7
a42 9
.if defined(PACKAGING)
.  if ${SUBPACKAGE} == "-viewer"
WANTLIB+=	ICE SM Xaw Xmu Xp Xpm Xt 
.  else
RUN_DEPENDS=	:tightvnc-viewer-${VERSION}:net/tightvnc,-viewer
LIB_DEPENDS=
WANTLIB+=	m
.  endif
.endif
@


1.15
log
@Update to 1.2.9

From steven mestdagh <steven.mestdagh@@esat.kuleuven.ac.be>

ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/12/16 00:31:26 alek Exp $
d25 1
a25 1
LIB_DEPENDS=	jpeg.62.::graphics/jpeg
@


1.14
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/09/29 20:39:48 sturm Exp $
d6 2
a7 2
VERSION=	1.2.7
PKGNAME=        tightvnc-${VERSION}
d9 1
a9 1
DISTNAME=       ${PKGNAME}_unixsrc
a10 2
MASTER_SITES=   ${MASTER_SITE_SOURCEFORGE:=vnc-tight/}
DISTFILES=	${DISTNAME}.tar.gz
d13 1
a15 2
LIB_DEPENDS=	jpeg.62.::graphics/jpeg

d21 6
a26 1
WANTLIB=		ICE SM X11 Xaw Xext Xmu Xp Xpm Xt c m z 
a27 1
EXTRACT_ONLY=	${DISTNAME}.tar.gz
d30 1
a30 1
MULTI_PACKAGES= -viewer
d33 1
a33 1
CONFIGURE_STYLE=	imake
d35 1
a35 1
ALL_TARGET=    	World
d39 8
a46 2
.if defined(PACKAGING) && empty(SUBPACKAGE)
RUN_DEPENDS+=	::net/tightvnc,-viewer
d49 2
a50 2
DOCUMENTATION=vncserver.man vncpasswd/vncpasswd.man vncconnect/vncconnect.man \
    Xvnc/programs/Xserver/Xvnc.man vncviewer/vncviewer.man
a55 2
# We have to frob a few things, and we want our own permissions, so it's easier
# to do the install ourselves.
a65 1
# Go install Java classes
d67 2
a68 1
	cp -R ${WRKSRC}/classes ${PREFIX}/share/vnc
@


1.13
log
@clean up package handling
ok maintainer Rob Casey
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/04/21 12:56:30 wilfried Exp $
d24 1
@


1.12
log
@install man page for vncserver, maintainer timeout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/03/11 18:01:27 sturm Exp $
d8 1
d36 4
@


1.11
log
@build on sparc64

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/11/11 22:08:48 margarida Exp $
d36 1
a36 1
DOCUMENTATION=vncpasswd/vncpasswd.man vncconnect/vncconnect.man \
@


1.10
log
@Remove useless documentation package.
From maintainer Rob Casey <rob@@minauros.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/10/26 23:49:39 naddy Exp $
d38 4
@


1.9
log
@Use FULLDISTDIR to refer to distribution file location.
From: Xavier Santolaria <xavier@@santolaria.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/01/12 21:37:49 millert Exp $
d11 1
a11 3
MASTER_SITES0=	http://www.uk.research.att.com/vnc/dist/
DOCDIST=	vnc-latest_doc.tgz
DISTFILES=	${DISTNAME}.tar.gz ${DOCDIST}:0
a25 1
IGNOREFILES=	${DOCDIST}
d50 1
a50 4
# The documentation comes with bogus ownerships; this is a little leaky security-wise
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/vnc
	tar -C ${PREFIX}/share/doc/vnc -xzf ${FULLDISTDIR}/${DOCDIST}
	chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/doc/vnc
@


1.8
log
@Update tightvnc to 1.2.7; Ok by maintainer and sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/12/29 21:30:57 fgsch Exp $
d55 1
a55 1
	tar -C ${PREFIX}/share/doc/vnc -xzf ${DISTDIR}/${DOCDIST}
@


1.7
log
@zap NEED_VERSION here as well.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/05/18 22:35:45 lebel Exp $
d6 1
a6 1
VERSION=	1.2.3
@


1.6
log
@use ${MASTER_SITE_SOURCEFORGE} instead of hardcoding sourceforge.net sites
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/04/15 06:55:57 espie Exp $
a9 1
NEED_VERSION=	1.500
@


1.6.2.1
log
@SECURITY FIX: Update tightvnc to 1.2.7

The VNC server acts as an X server, but the script for starting it
generates an MIT X cookie (which is used for X authentication) without
using a strong enough random number generator.  This could allow an
attacker to be able to more easily guess the authentication cookie.

https://rhn.redhat.com/errata/RHSA-2003-041.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/01/12 21:37:49 millert Exp $
d6 1
a6 1
VERSION=	1.2.7
d10 1
@


1.5
log
@Install manpages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/03/25 11:57:45 wilfried Exp $
d11 1
a11 2
MASTER_SITES=   http://prdownloads.sourceforge.net/vnc-tight/ \
		ftp://ftp.sourceforge.net/pub/sourceforge/vnc-tight/
@


1.4
log
@update to tightvnc-1.2.3, from maintainer Rob Casey <rob@@minauros.com>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/03/04 23:35:12 matt Exp $
d41 3
d62 3
@


1.3
log
@1.2.2, ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/11/24 20:19:31 matt Exp $
d6 1
a6 1
VERSION=	1.2.2
@


1.2
log
@- update to 1.2.1, from maintainer
- distinfo, NO_REGRESS, and one more pkgcfl from me
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/09/08 00:38:11 lebel Exp $
d6 1
a6 1
VERSION=	1.2.1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
a6 1
VERSION=	1.2.0
d10 1
a10 1
NEED_VERSION=	1.448
d38 2
@


1.1.1.1
log
@initial import of tightvnc-1.2.0:
--
TightVNC is an enhanced version of VNC, which is optimized to work over
slow network connections such as low-speed modem links. While original
VNC may be very slow when your connection is not fast enough, with
TightVNC you can work remotely almost in real time in most environments.
Besides bandwidth optimizations, TightVNC also includes many other
improvements, optimizations and bugfixes over VNC. Note that TightVNC is
free, cross-platform and compatible with the standard VNC.

WWW: http://www.tightvnc.org/

Submitted by Rob Casey <rob@@minauros.com>

@
text
@@
