head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.16
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.14
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.12
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.8
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.10
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.6
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.4
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.2
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.1.1.0.4
	OPENBSD_5_2_BASE:1.1.1.1
	OPENBSD_5_1_BASE:1.1.1.1
	OPENBSD_5_1:1.1.1.1.0.2
	ajacoutot_20120113:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.02.03.13.30.52;	author dcoppa;	state Exp;
branches;
next	1.3;

1.3
date	2013.05.17.10.59.31;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2012.10.18.14.56.55;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2012.01.13.09.23.09;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.01.13.09.23.09;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@
Update to miniupnpc-1.9 and fix dependant ports (games/megaglest
not affected)
@
text
@$OpenBSD: patch-Makefile,v 1.3 2013/05/17 10:59:31 dcoppa Exp $
--- Makefile.orig	Fri Jan 31 14:57:23 2014
+++ Makefile	Mon Feb  3 12:26:26 2014
@@@@ -55,7 +55,7 @@@@ ifeq (SunOS, $(OS))
 endif
 
 # APIVERSION is used to build SONAME
-APIVERSION = 10
+APIVERSION ?= 10
 
 SRCS = igd_desc_parse.c miniupnpc.c minixml.c minisoap.c miniwget.c \
        upnpc.c upnpcommands.c upnpreplyparse.c testminixml.c \
@@@@ -123,7 +123,7 @@@@ INSTALLPREFIX ?= $(PREFIX)/usr
 INSTALLDIRINC = $(INSTALLPREFIX)/include/miniupnpc
 INSTALLDIRLIB = $(INSTALLPREFIX)/$(LIBDIR)
 INSTALLDIRBIN = $(INSTALLPREFIX)/bin
-INSTALLDIRMAN = $(INSTALLPREFIX)/share/man
+INSTALLDIRMAN = $(INSTALLPREFIX)/man
 
 FILESTOINSTALL = $(LIBRARY) $(EXECUTABLES)
 ifneq ($(OS), AmigaOS)
@@@@ -144,11 +144,11 @@@@ check:	validateminixml validateminiwget validateupnpre
 everything:	all $(EXECUTABLES_ADDTESTS)
 
 pythonmodule:	$(LIBRARY) miniupnpcmodule.c setup.py
-	python setup.py build
+	${MODPY_BIN} setup.py build
 	touch $@@
 
 installpythonmodule:	pythonmodule
-	python setup.py install
+	${MODPY_BIN} setup.py install --prefix=$(PREFIX)
 
 pythonmodule3:	$(LIBRARY) miniupnpcmodule.c setup.py
 	python3 setup.py build
@@@@ -195,7 +195,6 @@@@ install:	updateversion $(FILESTOINSTALL)
 	$(INSTALL) -m 644 $(LIBRARY) $(DESTDIR)$(INSTALLDIRLIB)
 ifneq ($(OS), AmigaOS)
 	$(INSTALL) -m 644 $(SHAREDLIBRARY) $(DESTDIR)$(INSTALLDIRLIB)/$(SONAME)
-	ln -fs $(SONAME) $(DESTDIR)$(INSTALLDIRLIB)/$(SHAREDLIBRARY)
 endif
 	$(INSTALL) -d $(DESTDIR)$(INSTALLDIRBIN)
 ifeq ($(OS), AmigaOS)
@@@@ -229,7 +228,7 @@@@ ifeq ($(OS), Darwin)
 #	$(CC) -dynamiclib $(LDFLAGS) -Wl,-install_name,$(SONAME) -o $@@ $^
 	$(CC) -dynamiclib $(LDFLAGS) -Wl,-install_name,$(INSTALLDIRLIB)/$(SONAME) -o $@@ $^
 else
-	$(CC) -shared $(LDFLAGS) -Wl,-soname,$(SONAME) -o $@@ $^
+	$(CC) -shared $(LDFLAGS) -o $@@ $^
 endif
 
 upnpc-static:	upnpc.o $(LIBRARY)
@


1.3
log
@Update miniupnp{c,d} to version 1.8

ports-wise ok ajacoutot@@
@
text
@d1 5
a5 5
$OpenBSD: patch-Makefile,v 1.2 2012/10/18 14:56:55 dcoppa Exp $
--- Makefile.orig	Mon Jan 28 11:10:25 2013
+++ Makefile	Thu May 16 13:39:11 2013
@@@@ -48,7 +48,7 @@@@ JNAERATORBASEURL = http://jnaerator.googlecode.com/fil
 #LDLIBS=-lsocket -lnsl -lresolv
d8 2
a9 2
-APIVERSION = 9
+APIVERSION ?= 9
d13 1
a13 16
@@@@ -80,14 +80,12 @@@@ ifeq ($(OS), Darwin)
   SONAME = $(basename $(SHAREDLIBRARY)).$(APIVERSION).dylib
   CFLAGS := -DMACOSX -D_DARWIN_C_SOURCE $(CFLAGS)
 else
-ifeq ($(OS), Linux)
   SHAREDLIBRARY = libminiupnpc.so
   SONAME = $(SHAREDLIBRARY).$(APIVERSION)
 endif
 ifeq ($(JARSUFFIX), win32)
   SHAREDLIBRARY = miniupnpc.dll
 endif
-endif
 
 EXECUTABLES = upnpc-static
 EXECUTABLES_ADDTESTS = testminixml minixmlvalid testupnpreplyparse \
@@@@ -116,7 +114,7 @@@@ INSTALLPREFIX ?= $(PREFIX)/usr
d22 1
a22 1
@@@@ -137,11 +135,11 @@@@ check:	validateminixml validateminiwget
d36 2
a37 2
@@@@ -183,7 +181,6 @@@@ install:	updateversion $(FILESTOINSTALL)
 	$(INSTALL) -m 644 $(LIBRARY) $(INSTALLDIRLIB)
d39 2
a40 2
 	$(INSTALL) -m 644 $(SHAREDLIBRARY) $(INSTALLDIRLIB)/$(SONAME)
-	ln -fs $(SONAME) $(INSTALLDIRLIB)/$(SHAREDLIBRARY)
d42 1
a42 1
 	$(INSTALL) -d $(INSTALLDIRBIN)
d44 1
a44 1
@@@@ -214,7 +211,7 @@@@ ifeq ($(OS), Darwin)
d52 1
a52 1
 upnpc-static:	upnpc.o $(LIBRARY) $(LDLIBS)
@


1.2
log
@Bunch of updates:

libnatpmp-20110808 -> libnatpmp-20120821

minissdpd-1.1.20120121 -> minissdpd-1.2

miniupnpc-1.6 -> miniupnpc-1.7

miniupnpd-1.6.20120207 -> miniupnpd-1.7

OK ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-Makefile,v 1.1.1.1 2012/01/13 09:23:09 ajacoutot Exp $
--- Makefile.orig	Tue May  1 22:11:49 2012
+++ Makefile	Thu Oct 18 10:32:38 2012
@@@@ -39,7 +39,7 @@@@ JNAERATORBASEURL = http://jnaerator.googlecode.com/fil
d8 2
a9 2
-APIVERSION = 8
+APIVERSION ?= 8
d13 16
a28 1
@@@@ -101,7 +101,7 @@@@ INSTALLPREFIX ?= $(PREFIX)/usr
d30 1
a30 1
 INSTALLDIRLIB = $(INSTALLPREFIX)/lib
d37 1
a37 1
@@@@ -122,11 +122,11 @@@@ check:	validateminixml validateminiwget
d49 3
a51 3
 validateminixml:	minixmlvalid
 	@@echo "minixml validation test"
@@@@ -158,7 +158,6 @@@@ install:	updateversion $(FILESTOINSTALL)
d59 1
a59 1
@@@@ -189,7 +188,7 @@@@ ifeq ($(OS), Darwin)
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD$
--- Makefile.orig	Tue Jun 21 17:24:14 2011
+++ Makefile	Sat Jan  7 10:00:43 2012
@@@@ -23,7 +23,7 @@@@ JNAERATOR = jnaerator-0.9.3.jar
d13 10
a22 1
@@@@ -103,11 +103,11 @@@@ check:	validateminixml validateminiwget
d36 1
a36 1
@@@@ -133,7 +133,6 @@@@ install:	$(FILESTOINSTALL)
d44 9
@


1.1.1.1
log
@Import miniupnpc-1.6.

miniupnpc, the MiniUPnP client library, enables applications to access
the services provided by an UPnP "Internet Gateway Device" present on
the network. In UPnP terminology, it is a UPnP Control Point.

ok sthen@@
@
text
@@
