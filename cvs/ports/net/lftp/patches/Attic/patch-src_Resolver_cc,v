head	1.15;
access;
symbols
	OPENBSD_6_0:1.12.0.8
	OPENBSD_6_0_BASE:1.12
	OPENBSD_5_9:1.12.0.4
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.6
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.2
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.11.0.4
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.6
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.9.0.4
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.2
	OPENBSD_5_0:1.8.0.6
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.8.0.4
	OPENBSD_4_9_BASE:1.8
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.7.0.2
	OPENBSD_4_7_BASE:1.7
	OPENBSD_4_6:1.6.0.2
	OPENBSD_4_6_BASE:1.6
	OPENBSD_4_5:1.5.0.2
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.4.0.4
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.2
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.3.0.12
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.10
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.8
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.6
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.3.0.4
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.2
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.2.0.2
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.1.0.8
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.6
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.4
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.15
date	2017.02.16.10.56.00;	author sthen;	state dead;
branches;
next	1.14;
commitid	DFag32fWbE0oqa7L;

1.14
date	2017.02.15.15.27.48;	author sthen;	state Exp;
branches;
next	1.13;
commitid	iXB2Sk61IbvUxUC1;

1.13
date	2016.11.25.23.05.11;	author jca;	state dead;
branches;
next	1.12;
commitid	iroPlGvgjVHDBxWG;

1.12
date	2014.09.16.12.35.18;	author sthen;	state Exp;
branches;
next	1.11;
commitid	3FLxpSxNF0ZDsrZ6;

1.11
date	2013.10.22.06.03.54;	author benoit;	state Exp;
branches;
next	1.10;

1.10
date	2013.05.29.14.08.06;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2011.10.23.10.28.56;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2010.05.26.06.55.53;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2009.09.24.06.40.05;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2009.04.06.09.17.57;	author kevlo;	state Exp;
branches;
next	1.5;

1.5
date	2008.12.14.13.04.19;	author kevlo;	state Exp;
branches;
next	1.4;

1.4
date	2008.02.13.16.27.10;	author okan;	state Exp;
branches;
next	1.3;

1.3
date	2004.11.24.03.37.53;	author kevlo;	state Exp;
branches;
next	1.2;

1.2
date	2004.05.24.07.04.46;	author kevlo;	state Exp;
branches;
next	1.1;

1.1
date	2002.10.01.12.13.02;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.15
log
@Update to lftp-4.7.6 and add explicit gettext dep. From rsadowski (maintainer).
@
text
@$OpenBSD: patch-src_Resolver_cc,v 1.14 2017/02/15 15:27:48 sthen Exp $

"Cast address to IN6_IS_ADDR_LINKLOCAL."

backport from github 259d642e1fea2ddf38763d49e8e7701f0a947d4c

--- src/Resolver.cc.orig	Mon Jan 16 21:44:52 2017
+++ src/Resolver.cc	Mon Jan 16 21:45:30 2017
@@@@ -318,7 +318,7 @@@@ void Resolver::AddAddress(int family,const char *addre
    case AF_INET6:
       if(sizeof(add.in6.sin6_addr) != len)
          return;
-      if(IN6_IS_ADDR_LINKLOCAL(address) && scope==0) {
+      if(IN6_IS_ADDR_LINKLOCAL((const struct in6_addr*)address) && scope==0) {
 	 error=_("Link-local IPv6 address should have a scope");
 	 return;
       }
@


1.14
log
@update to lftp-4.7.5, from maintainer Rafael Sadowski
@
text
@d1 1
a1 1
$OpenBSD$
@


1.13
log
@Update to lftp-4.7.4

- drop readline and getaddrinfo patches, not needed any more.
- add another mirror to MASTER_SITES, lftp.yar.ru makes weird
  redirections.  Prefer http:// for this mirror, but also add ftp:// for
  ''make peek-ftp''
from maintainer Rafael Sadowski, input from and ok sthen@@
@
text
@d1 17
a17 12
$OpenBSD: patch-src_Resolver_cc,v 1.12 2014/09/16 12:35:18 sthen Exp $
--- src/Resolver.cc.orig	Wed Aug 27 09:34:02 2014
+++ src/Resolver.cc	Tue Sep 16 13:21:48 2014
@@@@ -801,8 +801,6 @@@@ void Resolver::LookupOne(const char *name)
 #  undef h_errno // it could be a macro, but we want it to be local variable.
       int h_errno=0;
       ha=getipnodebyname(name,af,0,&h_errno);
-# elif defined(HAVE_GETHOSTBYNAME2)
-      ha=gethostbyname2(name,af);
 # else
       if(af==AF_INET)
 	 ha=gethostbyname(name);
@


1.12
log
@update to lftp 4.5.5
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Resolver_cc,v 1.11 2013/10/22 06:03:54 benoit Exp $
@


1.11
log
@Update to lftp 4.4.10.

ok kevlo@@ (maintainer)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Resolver_cc,v 1.10 2013/05/29 14:08:06 jasper Exp $
--- src/Resolver.cc.orig	Tue Mar 19 14:00:26 2013
+++ src/Resolver.cc	Sun Oct 20 11:52:53 2013
@@@@ -798,8 +798,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.10
log
@- update lftp to lftp-4.4.5

ok kevlo@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Resolver_cc,v 1.9 2011/10/23 10:28:56 sthen Exp $
--- src/Resolver.cc.orig	Mon Sep 24 11:16:03 2012
+++ src/Resolver.cc	Thu May 16 09:53:26 2013
@@@@ -800,8 +800,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.9
log
@update to lftp 4.3.3, ok kevlo@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Resolver_cc,v 1.8 2010/05/26 06:55:53 jasper Exp $
--- src/Resolver.cc.orig	Tue Sep 13 05:29:47 2011
+++ src/Resolver.cc	Fri Oct 21 15:05:07 2011
@@@@ -794,8 +794,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.8
log
@- SECURITY update of lftp to 4.0.8
SA39861: LFTP Insecure "Content-Disposition" Suggested Filename Handling Weakness

ok kevlo@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Resolver_cc,v 1.7 2009/09/24 06:40:05 jasper Exp $
--- src/Resolver.cc.orig	Tue Nov 17 09:16:44 2009
+++ src/Resolver.cc	Tue May 25 15:19:16 2010
@@@@ -795,8 +795,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.7
log
@- update lftp to 4.0.2

ok kevlo@@ (MAINTAINER)4.0.2

ok kevlo@@ (MAINTAINER)4.0.2

ok kevlo@@ (MAINTAINER)4.0.2

ok kevlo@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD$
--- src/Resolver.cc.orig	Tue Jan 27 22:43:12 2009
+++ src/Resolver.cc	Thu Apr  2 17:47:17 2009
@@@@ -764,8 +764,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.6
log
@update to 3.7.11

ok pea@@
@
text
@d1 1
@


1.5
log
@update to 3.7.7

ok ajacoutot@@
@
text
@d1 3
a3 3
--- src/Resolver.cc.orig	Thu Nov 27 13:56:26 2008
+++ src/Resolver.cc	Sun Dec 14 13:11:16 2008
@@@@ -756,8 +756,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.4
log
@- maintenance update to 3.6.1 from Pierre-Emmanuel Andre
- re-sync patches

ok kevlo@@ (MAINTAINER), merdely@@
@
text
@d1 3
a3 3
--- src/Resolver.cc.orig	Mon Oct  8 09:29:14 2007
+++ src/Resolver.cc	Fri Feb  8 12:40:13 2008
@@@@ -740,8 +740,6 @@@@ void Resolver::LookupOne(const char *name)
@


1.3
log
@update to 3.0.11. Submitted by Victor Sahlstedt <cvss@@home.se>
@
text
@d1 3
a3 3
--- src/Resolver.cc.orig	Wed Nov 10 18:28:39 2004
+++ src/Resolver.cc	Wed Nov 10 18:29:18 2004
@@@@ -784,8 +784,6 @@@@ void Resolver::LookupOne(const char *nam
@


1.2
log
@upgrade to lftp 3.0.3

Submitted by :	Victor Sahlstedt <cvss@@home.se>
@
text
@d1 3
a3 4
$OpenBSD$
--- src/Resolver.cc.orig	Sat May  8 22:53:56 2004
+++ src/Resolver.cc	Sat May  8 22:54:41 2004
@@@@ -752,8 +752,6 @@@@ void Resolver::LookupOne(const char *nam
@


1.1
log
@- Fix CNAME resolving problem; IPv6 testing by henning@@
- Add mirrors, switch to .bz2 because older distfiles are only preserved
  in this format.
From: Nick Nauwelaerts <nick@@wanadoo.be>
@
text
@d2 4
a5 4
--- src/Resolver.cc.orig	Mon Sep 30 09:31:34 2002
+++ src/Resolver.cc	Mon Sep 30 09:31:49 2002
@@@@ -748,8 +748,6 @@@@ void Resolver::LookupOne(const char *nam
 #  endif
@

