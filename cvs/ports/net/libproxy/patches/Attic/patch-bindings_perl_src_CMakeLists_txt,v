head	1.5;
access;
symbols
	OPENBSD_6_0:1.4.0.4
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.3.0.12
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.3.0.8
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.6
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.3.0.4
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.2
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2;
locks; strict;
comment	@# @;


1.5
date	2016.08.27.13.37.40;	author ajacoutot;	state dead;
branches;
next	1.4;
commitid	C2g7CiwsCJHgUUla;

1.4
date	2016.01.19.16.16.38;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	JNDURCwQIKxsIObP;

1.3
date	2013.05.08.16.14.34;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.10.12.13.01.15;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.09.27.08.01.04;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Update to libproxy-0.4.13.
- drop gettext module
- take maintainer
@
text
@$OpenBSD: patch-bindings_perl_src_CMakeLists_txt,v 1.4 2016/01/19 16:16:38 ajacoutot Exp $

From FreeBSD:
* Explicitly against libperl.so.x.y.
  This is being discussed in https://github.com/libproxy/libproxy/pull/7.
  We need this for `make stage-qa' to pass, as the Libproxy.so binding uses
  libperl symbols and thus should link against it.

--- bindings/perl/src/CMakeLists.txt.orig	Tue Jan 12 17:41:07 2016
+++ bindings/perl/src/CMakeLists.txt	Tue Jan 19 16:45:52 2016
@@@@ -12,7 +12,7 @@@@ set(Libproxy_LIB_SRCS Libproxy.c)
 set(LIBRARY_OUTPUT_PATH ${CMAKE_BINARY_DIR}/perl/blib/arch/auto/Net)
 add_library(PLlibproxy SHARED ${Libproxy_LIB_SRCS})
 
-target_link_libraries(PLlibproxy libproxy pthread)
+target_link_libraries(PLlibproxy perl libproxy pthread)
 set_target_properties(PLlibproxy PROPERTIES OUTPUT_NAME "Libproxy")
 set_target_properties(PLlibproxy PROPERTIES PREFIX "")
 
@


1.4
log
@Update to libproxy-0.4.12.
Add KDE support.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Bring a couple of fixes from upstream, including a mem leak.
@
text
@d1 10
a10 12
$OpenBSD: patch-bindings_perl_src_CMakeLists_txt,v 1.2 2012/10/12 13:01:15 sthen Exp $
--- bindings/perl/src/CMakeLists.txt.orig	Wed Nov 24 21:50:12 2010
+++ bindings/perl/src/CMakeLists.txt	Wed May  8 18:10:13 2013
@@@@ -4,7 +4,7 @@@@ include_directories( ${PERL_INCLUDE_PATH} ${CMAKE_SOUR
 add_custom_command(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/Libproxy.c
                    COMMAND ${PERL_EXECUTABLE} ARGS ${CMAKE_CURRENT_SOURCE_DIR}/doxsubpp.pl
                            ${PERL_EXECUTABLE} ${CMAKE_CURRENT_SOURCE_DIR}/Libproxy.xs ${CMAKE_CURRENT_BINARY_DIR}/Libproxy.c
-                   DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/Libproxy.xs libproxy
+                   DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/Libproxy.xs proxy
                    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR})
 
 set(Libproxy_LIB_SRCS Libproxy.c)
d15 2
a16 2
-target_link_libraries(PLlibproxy ${PERL_LIBRARY} libproxy)
+target_link_libraries(PLlibproxy ${PERL_LIBRARY} proxy pthread)
@


1.2
log
@SECURITY update to libproxy 0.4.9; CVE-2012-4504, buffer overflow in PAC
processing.

While there, remove unnecessary patches (some fixed upstream, some workarounds
for header problems which have since been cleaned up, and change the "Build the
pacrunner into libproxy" patch into -DBIPR:BOOL=OFF in CONFIGURE_ARGS instead).

ok ajacoutot@@
@
text
@d1 3
a3 3
$OpenBSD$
--- bindings/perl/src/CMakeLists.txt.orig	Fri Oct 12 13:39:38 2012
+++ bindings/perl/src/CMakeLists.txt	Fri Oct 12 13:39:42 2012
d18 1
a18 1
+target_link_libraries(PLlibproxy ${PERL_LIBRARY} proxy)
@


1.1
log
@Fix misuse of CMake

OK sthen@@
@
text
@d2 2
a3 2
--- bindings/perl/src/CMakeLists.txt.orig	Mon Jun  6 23:44:37 2011
+++ bindings/perl/src/CMakeLists.txt	Mon Sep 24 15:39:04 2012
@

