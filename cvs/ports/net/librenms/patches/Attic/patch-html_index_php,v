head	1.4;
access;
symbols
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	sthen_20150423:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2016.06.20.15.12.42;	author sthen;	state dead;
branches;
next	1.3;
commitid	dGEgzdMU83elTTEV;

1.3
date	2015.12.07.23.42.03;	author sthen;	state Exp;
branches;
next	1.2;
commitid	OsKCqTLKkFfgPQ0U;

1.2
date	2015.07.16.02.50.33;	author sthen;	state Exp;
branches;
next	1.1;
commitid	05W8q4F8XIr2FDHe;

1.1
date	2015.04.23.16.44.34;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;
commitid	scv4HIxLiyoXiheP;

1.1.1.1
date	2015.04.23.16.44.34;	author sthen;	state Exp;
branches;
next	;
commitid	scv4HIxLiyoXiheP;


desc
@@


1.4
log
@update to LibreNMS 201606
@
text
@$OpenBSD: patch-html_index_php,v 1.3 2015/12/07 23:42:03 sthen Exp $
--- html/index.php.orig	Mon Dec  7 14:58:09 2015
+++ html/index.php	Mon Dec  7 15:01:13 2015
@@@@ -13,7 +13,7 @@@@
  */
 
 if (empty($_SERVER['PATH_INFO'])) {
-    if( strstr($_SERVER['SERVER_SOFTWARE'],"nginx") ) {
+    if( strstr($_SERVER['SERVER_SOFTWARE'],"nginx") && !empty($_SERVER['PATH_TRANSLATED']) ) {
         $_SERVER['PATH_INFO'] = str_replace($_SERVER['PATH_TRANSLATED'].$_SERVER['PHP_SELF'],"",$_SERVER['ORIG_SCRIPT_FILENAME']);
     }
     else {
@


1.3
log
@update to LibreNMS-201512
@
text
@d1 1
a1 1
$OpenBSD: patch-html_index_php,v 1.2 2015/07/16 02:50:33 sthen Exp $
@


1.2
log
@update to a LibreNMS snapshot from today, and start using a separate uid
@
text
@d1 4
a4 5
$OpenBSD: patch-html_index_php,v 1.1.1.1 2015/04/23 16:44:34 sthen Exp $
--- html/index.php.orig	Thu Jul 16 01:06:21 2015
+++ html/index.php	Thu Jul 16 01:06:30 2015
@@@@ -12,7 +12,7 @@@@
  *
d7 6
a12 5
-if( strstr($_SERVER['SERVER_SOFTWARE'],"nginx") ) {
+if( strstr($_SERVER['SERVER_SOFTWARE'],"nginx") && !empty($_SERVER['PATH_TRANSLATED'])) {
     $_SERVER['PATH_INFO'] = str_replace($_SERVER['PATH_TRANSLATED'].$_SERVER['PHP_SELF'],"",$_SERVER['ORIG_SCRIPT_FILENAME']);
 }
 else {
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- html/index.php.orig	Tue Apr 21 17:53:59 2015
+++ html/index.php	Tue Apr 21 17:54:05 2015
d11 2
a12 2
 } else {
     $_SERVER['PATH_INFO'] = !empty($_SERVER['PATH_INFO']) ? $_SERVER['PATH_INFO'] : (!empty($_SERVER['ORIG_PATH_INFO']) ? $_SERVER['ORIG_PATH_INFO'] : '');
@


1.1.1.1
log
@import ports/net/librenms, ok benoit@@ -- still a bit of a WIP, but usable enough.

LibreNMS is an autodiscovering PHP/MySQL/SNMP based network monitoring
which includes support for a wide range of network hardware and
operating systems including Cisco, Linux, FreeBSD, Juniper, Brocade,
Foundry, HP and many more. LibreNMS is a community-based fork of
Observium.

LibreNMS is not intended to replace a Nagios-type up/down monitoring
system, but rather to complement it with an easy to manage, intuitive
representation of historical and current performance statistics,
configuration visualisation and syslog capture.
@
text
@@
