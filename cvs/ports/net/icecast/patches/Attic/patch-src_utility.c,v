head	1.2;
access;
symbols
	OPENBSD_2_8:1.1.0.2
	OPENBSD_2_8_BASE:1.1;
locks; strict;
comment	@ * @;


1.2
date	2001.03.06.06.52.42;	author fgsch;	state dead;
branches;
next	1.1;

1.1
date	2000.08.29.04.36.33;	author brad;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2001.03.22.15.24.31;	author naddy;	state dead;
branches;
next	;


desc
@@


1.2
log
@Remove icepass; use encrypt(1) instead.
Regen patches and bump version.
@
text
@$OpenBSD: patch-src_utility.c,v 1.1 2000/08/29 04:36:33 brad Exp $

--- src/utility.c.orig	Wed Jul  5 16:52:40 2000
+++ src/utility.c	Mon Aug 28 23:06:20 2000
@@@@ -102,7 +102,6 @@@@
 
 	return 0;
 #else
-	char salt[3];
 	char *test_crypted;
 	extern char *crypt(const char *, const char *);
 
@@@@ -111,18 +110,8 @@@@
 		return 0;
 	}
 
-	if (ice_strncmp(crypted, "$1$", 3)) {
-		salt[0] = crypted[0];
-		salt[1] = crypted[1];
-	} else {
-		salt[0] = crypted[3];
-		salt[1] = crypted[4];
-	}
-
-	salt[2] = '\0';
-
 	thread_mutex_lock(&info.misc_mutex);
-	test_crypted = crypt(uncrypted, salt);
+	test_crypted = crypt(uncrypted, crypted);
 	if (test_crypted == NULL) {
 		write_log(LOG_DEFAULT, "WARNING - crypt() failed, refusing access");
 		thread_mutex_unlock(&info.misc_mutex);
@


1.1
log
@using cryptic filenames like these is no better then naming them patch-aa
patch-ab etc., use filenames that represent the files actually being
patched
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@MFC:
Security update to 1.3.10; fixes several problems reported
to BugTraq recently, plus some other issues.
@
text
@d1 1
a1 1
$OpenBSD: patch-src_utility.c,v 1.1 2000/08/29 04:36:33 brad Exp $
@


