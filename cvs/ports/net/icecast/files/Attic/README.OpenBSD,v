head	1.5;
access;
symbols
	OPENBSD_4_8:1.4.0.8
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.12
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.10
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.8
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.3.0.6
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.4
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.2.0.2
	OPENBSD_3_7_BASE:1.2
	OPENBSD_3_6:1.1.0.4
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2010.11.11.10.32.54;	author edd;	state dead;
branches;
next	1.4;

1.4
date	2008.11.18.21.22.02;	author pea;	state Exp;
branches;
next	1.3;

1.3
date	2005.10.21.15.59.54;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2004.12.31.13.09.10;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2004.02.02.19.32.36;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.5
log
@clean up icecast port a little: new LIB_DEPENDS, new README style, add rc
script, make the MESSAGE more obvious, spell check README.

MAINTAINER is happy with this and OK from sthen@@
@
text
@$OpenBSD: README.OpenBSD,v 1.4 2008/11/18 21:22:02 pea Exp $

Icecast v2 is very versatile and can be used in many different
envionrments.  A streaming service provider has different requirements
than someone who wants to set up a jukebox at home.

To get a better understanding of streaming with Icecast,
http://liveice.sourceforge.net/understanding.html may be of use.

This is a small step-by-step guide to get Icecast v2 running in a basic
setup, using its chrooting feature, dropping privileges to an
unprivileged account.

  1. Complete the chroot environment with additional system files.
     While this is optional, it allows YP directory listings (DNS
     lookups are required for those) to work and the log files to
     contain correct timestamps.

     # cp -p /etc/{hosts,localtime,resolv.conf} /var/icecast/etc

  2. Adjust /var/icecast/icecast.xml.  Consult the documentation and
     comments about the various options.

     * CHANGE THE DEFAULT PASSWORDS FOR SOURCE CLIENTS, RELAYS AND
       THE ADMIN INTERFACE.

     Mode 600 is highly recommended, for icecast.xml contains plain-text
     passwords.

  3. Start Icecast and monitor the logs in /var/icecast/log and resolve
     any errors.

     # icecast -c /var/icecast/icecast.xml

     Add the command line parameter `-b' to daemonize.

  4. Test your server.  Use a source client to create a stream and
     listen to it with your favorite player that supports streaming.

     Also test Icecast's web interface.  Be aware that Icecast sends
     everything located in <webroot> to those who request it like a
     regular (basic) web server.  You can restrict this behavior to
     serve only .xsl files by setting <fileserve> to 0 in your
     icecast.xml; however, you should definitely take a closer look at
     what you actually want to show the world here.  There is no reason
     for paranoia, it's all safe, but you should spend some time
     thinking about it.  Note that disabling <fileserve> will also
     prevent CSS stylesheets and images from being sent, making the web
     interface less pleasant to look at.

  5. Add the following to your /etc/rc.local:

     if [ -x ${TRUEPREFIX}/bin/icecast ] ; then
	echo -n ' icecast'
	${TRUEPREFIX}/bin/icecast -b -c /var/icecast/icecast.xml
     fi

Random hints:

   * Remember to give your mountpoint a proper name -- MP3 streams
     should use no extension, Ogg Vorbis streams should use .ogg, so
     that dumb or broken players can send the stream to the appropriate
     decoder.

   * The default "bind to any address" only opens an IPv6 socket. 
     Specify a specific address or use 0.0.0.0 to accept any IPv4 address.
@


1.4
log
@Update to 2.3.2 and add the following modifications:

+ add user _icecast (home directory in /var/icecast)
+ enable chroot by default
+ populate chroot with all the necessary files

ok okan@@ sthen@@ ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
@


1.3
log
@Update to 2.3.0 from maintainer Moritz Grimm.

New features:
  * Support Ogg Speex, Ogg FLAC, Ogg Midi
  * Intro file support
  * On-demand relays
  * Improved mount-level settings
  * URL listener authenticator
  * Authentication for on-demand files
  * Updated admin/web interface
  * Various reliability bug fixes

Port changes:
  * Ogg Theora streaming is now enabled
  * Revamped README.OpenBSD file, tightened DESCR
  * <fileserve> directive not disabled any longer in icecast.xml.dist
@
text
@d1 1
a1 5
Icecast v2 is very versatile and can be used in many different setups.
Since there is not "one true way" to install and configure it and every
user will have individual preferences and needs. A streaming service
provider has different requirements than someone who wants to set up a
jukebox at home.
d3 15
a17 3
To make things easier, here is a small step-by-step guide to get Icecast v2
running in a basic setup, which uses its chrooting feature and drops
privileges to an unprivileged account.
a18 36
  1. Read the documentation, so you know what you are doing. It is also
     very helpful to know what Icecast v2 is doing for you, and what it
     is not. If you do not understand the concept of streaming with Icecast,
     yet, http://liveice.sourceforge.net/understanding.html might be of use
     to you.

  2. Create an unprivileged user _icecast - preferrably with an UID that
     does not conflict with other ports, system UIDs or regular users.
     I suggest something between 200 and 499. This example uses the UID/
     GID combo 400:

     # useradd -c "Icecast Server" -d /nonexistent -g =uid \
           -s /sbin/nologin -u 400 _icecast

  3. Create a working directory for Icecast.

     # mkdir /var/icecast

  4. Copy the examples into the working directory

     # cp -R ##PREFIX##/share/examples/icecast/* /var/icecast

  5. Create Icecast's log directory and -files, make them accessible
     to the Icecast user.

     # cd /var/icecast
     # mkdir log
     # touch log/error.log log/access.log
     # chown _icecast:_icecast log/*.log

  6. Complete the chroot environment with additional system files --
     this is optional, but it allows YP directory listing (DNS lookups are
     required for those) to work and the log files will contain correct
     timestamps.

     # mkdir /var/icecast/etc
d21 2
a22 10
  7. There is an icecast.xml.dist in /var/icecast - rename it and adjust it.
     Consult the documentation and comments about the various options.
     Important settings for this particular setup are outlined below.

     # mv icecast.xml.dist icecast.xml
     # chmod 600 icecast.xml
     (Mode 600 is highly recommended; icecast.xml contains plain-text
     passwords. At least keep it inaccessible to "others".)

     Now load icecast.xml in your favorite editor, and:
d25 1
a25 1
       THE ADMIN INTERFACE
d27 2
a28 1
     * Change <basedir> to /var/icecast
d30 2
a31 3
     * Change <logdir> to /log
     * Change <webroot> to /web
     * Change <adminroot> to /admin
d33 1
a33 3
     * Change <chroot> to 1
     * Uncomment the <changeowner> directive, replace both "nobody" and
       "nogroup" with "_icecast".
d35 1
a35 2
  8. Start Icecast and monitor error.log for errors and clues on how to
     solve any issues.
d37 2
a38 1
     # icecast -c /var/icecast/icecast.xml
d40 24
a63 2
     If things look good, add the command line parameter `-b' to send
     Icecast into daemon land.
d65 2
a66 25
  9. Test your server.
     Use a source client to create a stream and listen to it with your
     favorite player that supports streaming.
     Also test Icecast's web interface. Be aware that Icecast sends
     everything located in <webroot> to those who request it like a regular
     (basic) web server. You can restrict this behavior to serve only
     .xsl files by setting <fileserve> to 0 in your icecast.xml, however,
     you should definitely take a closer look at what you actually want
     to show the world here. There is no reason for paranoia, it's all
     safe, but you should spend some time thinking about it. Note that
     disabling <fileserve> will also prevent CSS stylesheets and images
     from being sent, making the web interface less pleasant to look at.


  Random hints:

     * Remember to give your mountpoint a proper name -- MP3 streams should
       use no extension, Ogg Vorbis streams should use .ogg, so that dumb or
       broken players can send the stream to the appropriate decoder.

     * There are many different source clients available for different
       platforms. On OpenBSD, there are at least the ices-0 and ices-2
       packages available to stream MP3 and Ogg Vorbis audio respectively.
       There are a lot more alternatives available that are easy to find
       with a search engine like Google.
@


1.2
log
@update to icecast 2.2.0

from Moritz Grimm <mlist at scapa.dnsalias.net>
@
text
@d2 2
a3 2
Because there is not "one true way" to install and configure it - every
user will have his individual preferences and needs (a streaming service
d5 1
a5 1
jukebox at home.)
d13 3
a15 1
     is not.
d19 2
a20 1
     I suggest something between 200 and 499.
d41 9
a49 1
  6. There is an icecast.xml.dist in /var/icecast - rename it and adjust it.
d56 1
a56 1
     passwords.)
d60 2
a61 1
     Change <basedir> to /var/icecast
d63 1
a63 3
     Change <logdir> to /log
     Change <webroot> to /web
     Change <adminroot> to /admin
d65 3
a67 3
     Change <chroot> to 1
     Uncomment the <changeowner> directive, replace "nobody" and "nogroup"
         with "_icecast", respectively
d69 5
a73 1
  7. Start Icecast and monitor error.log for errors and clues on how to
d78 28
a105 11
  8. Connect to the server with a source client and have fun. There are
     many different source clients available for different platforms.
     *nix users may find Ices0 to stream MP3, and Ices2 to stream Ogg Vorbis
     useful. For WinAMP and XMMS there is Oddcast DSP on
     http://www.oddsock.org/
     Remember to give your mountpoint a proper name - MP3 streams should
     use no extension, Ogg Vorbis streams should use .ogg, so that dumb or
     broken players can send the stream to the appropriate decoder.
     For starters, you should let the source client set the mountpoint;
     pre-defined mountpoints are an advanced feature and not necessary
     for basic streaming.
@


1.1
log
@update to icecast 2.0 now that is considered stable.
done by and new maintainer Moritz Grimm <gtgbr at gmx dot net>.
@
text
@d20 1
a20 1
           -s /sbin/nologin -u 200 _icecast
d30 1
a30 1
  5. Create Icecast's log directory and logfiles, make them accessible
d71 1
a71 1
     broken players can send the stream to the correct decoder.
@

