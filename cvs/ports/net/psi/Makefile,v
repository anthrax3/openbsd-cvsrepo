head	1.24;
access;
symbols
	OPENBSD_6_1:1.22.0.8
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.22.0.6
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.22.0.2
	OPENBSD_5_9_BASE:1.22
	OPENBSD_5_8:1.22.0.4
	OPENBSD_5_8_BASE:1.22
	OPENBSD_5_7:1.21.0.6
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.4
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.16.0.6
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.16.0.4
	OPENBSD_5_2_BASE:1.16
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.15.0.4
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.10.0.2
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.9.0.10
	OPENBSD_4_6_BASE:1.9
	OPENBSD_4_5:1.9.0.8
	OPENBSD_4_5_BASE:1.9
	OPENBSD_4_4:1.9.0.6
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.4
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.6.0.4
	OPENBSD_4_1_BASE:1.6
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.1.1.1.0.4
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	niallo_20050519:1.1.1.1
	niallo:1.1.1;
locks; strict;
comment	@# @;


1.24
date	2017.07.11.20.42.34;	author rsadowski;	state Exp;
branches;
next	1.23;
commitid	t931kgkDfMKlDegV;

1.23
date	2017.04.10.11.46.32;	author sthen;	state Exp;
branches;
next	1.22;
commitid	HY6VNZxjJWzKQFDV;

1.22
date	2015.03.27.08.13.03;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	qkrQPO6KjSKIuf3s;

1.21
date	2013.10.09.16.52.23;	author shadchin;	state Exp;
branches;
next	1.20;

1.20
date	2013.08.20.22.05.57;	author zhuk;	state Exp;
branches;
next	1.19;

1.19
date	2013.05.16.17.20.12;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2013.04.21.13.56.27;	author shadchin;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.11.11.35.55;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.16.11.13.39;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.19.22.31.37;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.11.16.27.55;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.24.21.30.01;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.12.22.07.41;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.06.22.25.53;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2009.08.10.06.33.43;	author kili;	state Exp;
branches;
next	1.9;

1.9
date	2007.08.08.05.51.51;	author steven;	state Exp;
branches;
next	1.8;

1.8
date	2007.08.01.05.50.43;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2007.07.11.22.50.48;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2006.08.03.23.15.58;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.04.14.22.52.02;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2006.04.10.05.43.48;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2006.03.29.09.16.03;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2006.03.09.20.40.06;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.19.20.29.58;	author niallo;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.19.20.29.58;	author niallo;	state Exp;
branches;
next	;


desc
@@


1.24
log
@Bump all and adjust WANTLIB and patches after qca update
OK sthen@@
@
text
@# $OpenBSD: Makefile,v 1.23 2017/04/10 11:46:32 sthen Exp $

COMMENT=	multiplatform Jabber client

DISTNAME=	psi-0.15
REVISION=	4
CATEGORIES=	net

HOMEPAGE=	http://psi-im.org/

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=psi/}
EXTRACT_SUFX=	.tar.bz2

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += ICE QtDBus QtGui QtNetwork QtXml SM X11 Xext Xi Xinerama
WANTLIB += Xrender Xss c enchant fontconfig freetype glib-2.0
WANTLIB += gmodule-2.0 m pthread qca ${LIBCXX} z

MODULES=		x11/qt4 \
			devel/gettext

USE_GMAKE=		Yes

LIB_DEPENDS=		security/qca \
			textproc/enchant
RUN_DEPENDS=		devel/desktop-file-utils \
			security/qca,-gnupg \
			security/qca,-ossl \
			x11/gtk+3,-guic

CONFIGURE_STYLE=	simple

CONFIGURE_ARGS+=	--prefix=${LOCALBASE} \
			--qtdir=${MODQT4_QTDIR} \
			--disable-growl

# For QSettings to write its setup
PORTHOME=		${WRKDIST}

NO_TEST=		Yes

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/psi ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/share/psi
	${INSTALL_DATA} ${WRKSRC}/COPYING ${PREFIX}/share/psi
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/psi
	cp -R ${WRKSRC}/iconsets ${PREFIX}/share/psi
	cp -R ${WRKSRC}/sound ${PREFIX}/share/psi
	cp -R ${WRKSRC}/certs ${PREFIX}/share/psi

	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/psi.desktop ${PREFIX}/share/applications/

	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/16x16/apps
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/logo_16.png \
		${PREFIX}/share/icons/hicolor/16x16/apps/psi.png

	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/32x32/apps
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/logo_32.png \
		${PREFIX}/share/icons/hicolor/32x32/apps/psi.png

	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/48x48/apps
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/logo_48.png \
		${PREFIX}/share/icons/hicolor/48x48/apps/psi.png

	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/64x64/apps
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/logo_64.png \
		${PREFIX}/share/icons/hicolor/64x64/apps/psi.png

	${INSTALL_DATA_DIR} ${PREFIX}/share/icons/hicolor/128x128/apps
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/logo_128.png \
		${PREFIX}/share/icons/hicolor/128x128/apps/psi.png

.include <bsd.port.mk>
@


1.23
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/03/27 08:13:03 ajacoutot Exp $
d6 1
a6 1
REVISION=	3
d19 1
a19 1
WANTLIB += gmodule-2.0 m pthread qca2 ${LIBCXX} z
d26 1
a26 1
LIB_DEPENDS=		security/qca2 \
d29 2
a30 2
			security/qca-gnupg \
			security/qca-ossl \
a36 1
			--with-qca-inc=${LOCALBASE}/include/QtCrypto \
@


1.22
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/10/09 16:52:23 shadchin Exp $
d19 1
a19 1
WANTLIB += gmodule-2.0 m pthread qca2 stdc++ z
@


1.21
log
@Now _res has minimal support: not define nsaddr_list, only nscount,
therefore psi could not determine dns server. Switch psi on resolv.conf.

tested Matthew Clarke <clamat at telus dot net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/08/20 22:05:57 zhuk Exp $
d6 1
a6 1
REVISION=	2
d31 1
a31 1
			x11/gtk+2,-guic
@


1.20
log
@Fixup handling of FreeDesktop goo: desktop-file-utils, gtk-update-icon-cache
and shared-mime-info. Found by portcheck.

A lot of input from and okay ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/05/16 17:20:12 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.19
log
@use gettext MODULE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/04/21 13:56:27 shadchin Exp $
d6 1
a6 1
REVISION=	0
@


1.18
log
@Update to psi-0.15.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/11 11:35:55 espie Exp $
d6 1
d19 1
a19 1
WANTLIB += gmodule-2.0 intl m pthread qca2 stdc++ z
d21 2
a22 1
MODULES=		x11/qt4
@


1.17
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/09/16 11:13:39 espie Exp $
d5 1
a5 2
DISTNAME=	psi-0.10
REVISION=	1
d13 1
a13 1
# GPL
d16 3
a18 2
WANTLIB=		X11 Xext Xss m c pthread pthread-stubs stdc++ xcb z \
			qca>=1
d20 1
a20 3
MODULES=		x11/qt3

MODQT_OVERRIDE_UIC=	No
d24 6
a29 2
LIB_DEPENDS=		security/qca
RUN_DEPENDS=		security/qca-tls
d33 4
a36 9
CONFIGURE_ARGS+=	--qtdir=${MODQT_QTDIR} \
			--with-qca-inc=${LOCALBASE}/include \
			--with-qca-lib=${LOCALBASE}/lib \
			--disable-growl \
			--disable-dnotify \
			--disable-ghbnr

CONFIGURE_ENV+=		LOCALBASE=${LOCALBASE} \
			KDEDIR=${LOCALBASE}
d39 1
a39 1
PORTHOME=              ${WRKDIST}
a42 8
pre-configure:
	@@perl -pi -e "s@@%%X11BASE%%@@${X11BASE}@@" ${WRKSRC}/configure

# compilation breaks if /usr/local/include/socks.h (from security/dante) is
# found before psi's own socks.h, so add a workaround.
pre-build:
	@@perl -pi -e 's,INCLUDEPATH.*,,' ${WRKSRC}/conf.pri

d44 1
a44 1
	${INSTALL_PROGRAM} ${WRKSRC}/src/psi ${PREFIX}/bin
a50 3
	cp -R ${WRKSRC}/certs ${PREFIX}/share/psi
	${INSTALL_DATA} ${WRKSRC}/libpsi/psiwidgets/libpsiwidgets.so \
		${PREFIX}/share/psi
d52 2
a53 4
	# Icons for KDE
	${INSTALL_DATA_DIR} ${PREFIX}/share/applnk/Internet
	${INSTALL_DATA} ${WRKSRC}/psi.desktop \
		${PREFIX}/share/applnk/Internet/
d56 1
a56 1
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/icon_16.png \
d60 1
a60 1
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/icon_32.png \
d64 1
a64 1
	${INSTALL_DATA} ${WRKSRC}/iconsets/system/default/icon_48.png \
d66 8
@


1.16
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/19 22:31:37 espie Exp $
a15 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d44 1
a44 1
NO_REGRESS=		Yes
@


1.15
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/11 16:27:55 espie Exp $
d6 1
a6 1
REVISION=	0
@


1.14
log
@new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/10/24 21:30:01 ajacoutot Exp $
d21 1
a21 1
			qca.>=1
d29 2
a30 2
LIB_DEPENDS=		::security/qca
RUN_DEPENDS=		::security/qca-tls
@


1.13
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/07/12 22:07:41 sthen Exp $
d20 2
a21 1
WANTLIB=		X11 Xext Xss m c pthread pthread-stubs stdc++ xcb z
d29 1
a29 1
LIB_DEPENDS=		qca.>=1::security/qca
@


1.12
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/07/06 22:25:53 espie Exp $
a25 1
USE_X11=		Yes
@


1.11
log
@zap reeeally old variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2009/08/10 06:33:43 kili Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d19 1
@


1.10
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/08/08 05:51:51 steven Exp $
a23 1
MODQT_MT=		Yes
@


1.9
log
@restore psi 0.10, but with a workaround to avoid inclusion of
/usr/local/include/socks.h which breaks compilation.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/07/11 22:50:48 jasper Exp $
d6 1
d19 1
a19 1
WANTLIB=		X11 Xss m c z Xext pthread stdc++
@


1.8
log
@back out, this does not build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/08/03 23:15:58 espie Exp $
d3 1
a3 1
COMMENT=	"multiplatform Jabber client"
d5 1
a5 2
DISTNAME=	psi-0.9.3
PKGNAME=	${DISTNAME}p2
d8 1
a8 1
HOMEPAGE=	http://psi.affinix.com/
d10 2
a11 1
MAINTAINER=	Gerardo Santana Gomez Garrido <gerardo.santana@@gmail.com>
d20 1
a20 2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=psi/}
EXTRACT_SUFX=		.tar.bz2
a21 1
MODULES=		x11/qt3
d25 3
d29 1
a30 2
USE_X11=		Yes
USE_GMAKE=		Yes
d32 1
d36 1
d43 5
d50 5
@


1.7
log
@long overdue update of psi to 0.10

original diff from Vlad Glagolev with tweaks by Simon Kuhnle

ok martynas@@
@
text
@d3 1
a3 1
COMMENT=	multiplatform Jabber client
d5 2
a6 1
DISTNAME=	psi-0.10
d9 1
a9 1
HOMEPAGE=	http://psi-im.org/
d11 1
a11 2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=psi/}
EXTRACT_SUFX=	.tar.bz2
d20 3
a23 1

d27 2
a30 4

LIB_DEPENDS=		qca.>=1::security/qca
RUN_DEPENDS=		::security/qca-tls

a31 1

a34 1
			--disable-growl \
a39 5

# For QSettings to write its setup
PORTHOME=              ${WRKDIST}

NO_REGRESS=		Yes
@


1.6
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/04/14 22:52:02 naddy Exp $
d3 1
a3 1
COMMENT=	"multiplatform Jabber client"
d5 1
a5 2
DISTNAME=	psi-0.9.3
PKGNAME=	${DISTNAME}p2
d8 1
a8 1
HOMEPAGE=	http://psi.affinix.com/
d10 2
a11 1
MAINTAINER=	Gerardo Santana Gomez Garrido <gerardo.santana@@gmail.com>
d20 1
a20 2
MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=psi/}
EXTRACT_SUFX=		.tar.bz2
a21 1
MODULES=		x11/qt3
d25 3
d29 1
a30 2
USE_X11=		Yes
USE_GMAKE=		Yes
d32 1
d36 1
d42 5
@


1.5
log
@bump PKGNAME after MAINTAINER address change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/04/10 05:43:48 jakob Exp $
d27 1
a27 1
LIB_DEPENDS=		qca.1::security/qca
@


1.4
log
@update MAINTAINER email adress; from gerardo santana
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/03/29 09:16:03 bernd Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.3
log
@Fix build with installed devel/libidn.

Reported by viq and Lars Hansson on ports@@. Thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/03/09 20:40:06 sturm Exp $
d11 1
a11 1
MAINTAINER=	Gerardo Santana Gomez Garrido <santana@@openbsd.org.mx>
@


1.2
log
@install icons with correct names

from Lars Hansson <lars at unet.net.ph>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/05/19 20:29:58 niallo Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
d63 1
a63 1
		${PREFIX}/share/icons/hicolor/16x16/apps/
d67 1
a67 1
		${PREFIX}/share/icons/hicolor/32x32/apps/
d71 1
a71 1
		${PREFIX}/share/icons/hicolor/48x48/apps/
@


1.1.1.1
log
@Psi multiplatform Jabber client version 0.9.3

Homepage: http://psi.affinix.com/

From Gerardo Santana Gomez Garrido <santana@@openbsd.org.mx>
@
text
@@
