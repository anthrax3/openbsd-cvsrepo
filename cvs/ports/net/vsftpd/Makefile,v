head	1.38;
access;
symbols
	OPENBSD_6_1:1.37.0.8
	OPENBSD_6_1_BASE:1.37
	OPENBSD_6_0:1.37.0.6
	OPENBSD_6_0_BASE:1.37
	OPENBSD_5_9:1.37.0.2
	OPENBSD_5_9_BASE:1.37
	OPENBSD_5_8:1.37.0.4
	OPENBSD_5_8_BASE:1.37
	OPENBSD_5_7:1.36.0.4
	OPENBSD_5_7_BASE:1.36
	OPENBSD_5_6:1.36.0.2
	OPENBSD_5_6_BASE:1.36
	OPENBSD_5_5:1.35.0.2
	OPENBSD_5_5_BASE:1.35
	OPENBSD_5_4:1.34.0.2
	OPENBSD_5_4_BASE:1.34
	OPENBSD_5_3:1.32.0.2
	OPENBSD_5_3_BASE:1.32
	OPENBSD_5_2:1.31.0.6
	OPENBSD_5_2_BASE:1.31
	OPENBSD_5_1_BASE:1.31
	OPENBSD_5_1:1.31.0.4
	OPENBSD_5_0:1.31.0.2
	OPENBSD_5_0_BASE:1.31
	OPENBSD_4_9:1.29.0.2
	OPENBSD_4_9_BASE:1.29
	OPENBSD_4_8:1.25.0.2
	OPENBSD_4_8_BASE:1.25
	OPENBSD_4_7:1.23.0.2
	OPENBSD_4_7_BASE:1.23
	OPENBSD_4_6:1.21.0.2
	OPENBSD_4_6_BASE:1.21
	OPENBSD_4_5:1.19.0.6
	OPENBSD_4_5_BASE:1.19
	OPENBSD_4_4:1.19.0.4
	OPENBSD_4_4_BASE:1.19
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.18.0.6
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.18.0.4
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.18.0.2
	OPENBSD_4_0_BASE:1.18
	OPENBSD_3_9:1.16.0.2
	OPENBSD_3_9_BASE:1.16
	OPENBSD_3_8:1.14.0.2
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.11.0.2
	OPENBSD_3_7_BASE:1.11
	OPENBSD_3_6:1.7.0.2
	OPENBSD_3_6_BASE:1.7
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.1.1.1.0.2
	OPENBSD_3_3_BASE:1.1.1.1
	couderc_20030219:1.1.1.1
	couderc:1.1.1;
locks; strict;
comment	@# @;


1.38
date	2017.06.28.15.03.42;	author sthen;	state Exp;
branches;
next	1.37;
commitid	Inan4sRn9otdqoGp;

1.37
date	2015.07.26.08.18.24;	author benoit;	state Exp;
branches;
next	1.36;
commitid	KcR8SGC2S3cpADIB;

1.36
date	2014.03.23.21.36.51;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2014.01.30.14.01.49;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2013.04.02.11.38.12;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2013.03.11.11.35.58;	author espie;	state Exp;
branches;
next	1.32;

1.32
date	2012.10.05.02.27.50;	author brad;	state Exp;
branches;
next	1.31;

1.31
date	2011.07.04.18.28.27;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2011.03.02.08.26.19;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2011.01.04.22.06.13;	author benoit;	state Exp;
branches;
next	1.28;

1.28
date	2010.10.18.18.36.59;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2010.08.19.13.26.21;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2010.08.17.19.57.47;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2010.07.12.22.07.42;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2010.04.07.21.37.35;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2009.11.20.01.55.04;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2009.10.23.22.50.00;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2009.04.01.07.29.16;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2009.03.27.11.54.49;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.15.22.37.00;	author merdely;	state Exp;
branches;
next	1.18;

1.18
date	2006.07.27.11.48.41;	author aanriot;	state Exp;
branches;
next	1.17;

1.17
date	2006.05.31.00.10.12;	author aanriot;	state Exp;
branches;
next	1.16;

1.16
date	2006.01.28.21.57.51;	author aanriot;	state Exp;
branches;
next	1.15;

1.15
date	2005.09.16.16.40.19;	author aanriot;	state Exp;
branches;
next	1.14;

1.14
date	2005.07.03.18.06.37;	author aanriot;	state Exp;
branches;
next	1.13;

1.13
date	2005.06.28.17.46.43;	author aanriot;	state Exp;
branches;
next	1.12;

1.12
date	2005.04.07.18.59.46;	author couderc;	state Exp;
branches;
next	1.11;

1.11
date	2005.03.13.20.40.38;	author couderc;	state Exp;
branches;
next	1.10;

1.10
date	2005.02.27.16.37.22;	author couderc;	state Exp;
branches;
next	1.9;

1.9
date	2005.02.21.13.41.37;	author couderc;	state Exp;
branches;
next	1.8;

1.8
date	2004.12.16.00.31.27;	author alek;	state Exp;
branches;
next	1.7;

1.7
date	2004.05.31.11.20.17;	author couderc;	state Exp;
branches;
next	1.6;

1.6
date	2004.02.07.06.38.12;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2004.02.06.21.16.02;	author couderc;	state Exp;
branches;
next	1.4;

1.4
date	2003.08.02.12.00.13;	author couderc;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.23.19.08.52;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2003.05.20.11.12.08;	author couderc;	state Exp;
branches;
next	1.1;

1.1
date	2003.02.19.15.42.02;	author couderc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.02.19.15.42.02;	author couderc;	state Exp;
branches;
next	;


desc
@@


1.38
log
@use getpwnam_shadow to unbreak non-anonymous ftp connections in vsftpd.
ok benoit@@
@
text
@# $OpenBSD: Makefile,v 1.37 2015/07/26 08:18:24 benoit Exp $

COMMENT=		FTP daemon which aims to be secure

DISTNAME=		vsftpd-3.0.3
REVISION=		0
CATEGORIES=		net

HOMEPAGE=		http://vsftpd.beasts.org/

MAINTAINER=		Benoit Lecocq <benoit@@openbsd.org>

# GPLv2+OpenSSL exemption
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c crypto ssl util

MASTER_SITES=		https://security.appspot.com/downloads/

ALL_TARGET=		vsftpd

MAKE_FLAGS=		CC="${CC}" \
			CFLAGS="${CFLAGS}"

NO_TEST=		Yes

do-configure:
	@@perl -pi -e "s,/usr/share/ssl/certs/,/etc/ssl/private/,g" \
		${WRKSRC}/tunables.c \
		${WRKSRC}/README.ssl
	@@perl -pi -e "s,/etc/vsftpd,${SYSCONFDIR}/vsftpd,g" \
		${WRKSRC}/defs.h \
		${WRKSRC}/vsftpd.conf.5 \
		${WRKSRC}/vsftpd.8

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/vsftpd
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/vsftpd
	${INSTALL_PROGRAM} ${WRKSRC}/vsftpd ${PREFIX}/sbin/
	${INSTALL_MAN} ${WRKSRC}/vsftpd.8 ${PREFIX}/man/man8
	${INSTALL_MAN} ${WRKSRC}/vsftpd.conf.5 ${PREFIX}/man/man5
	${INSTALL_DATA} ${WRKSRC}/vsftpd.conf ${PREFIX}/share/examples/vsftpd

.for d in FAQ INSTALL README README.ssl
	${INSTALL_DATA} ${WRKSRC}/$d ${PREFIX}/share/doc/vsftpd
.endfor

.include <bsd.port.mk>
@


1.37
log
@Update to vsftpd-3.0.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/03/23 21:36:51 sthen Exp $
d5 2
a6 1
DISTNAME =		vsftpd-3.0.3
@


1.36
log
@disable tcp wrappers, ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/01/30 14:01:49 ajacoutot Exp $
d5 1
a5 2
DISTNAME=		vsftpd-3.0.2
REVISION=		2
@


1.35
log
@Always put rc.d(8) scripts daemons in the background, so force the use of
-obackground=yes.

ok sthen@@ benoit@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/04/02 11:38:12 sthen Exp $
d6 1
a6 1
REVISION=		1
d16 1
a16 1
WANTLIB=		c crypto ssl util wrap
@


1.34
log
@Add an rc script to vsftpd, and replace a sysconfdir patch with a perl -pi -e
subst as the port is already using for a couple of other files. ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/03/11 11:35:58 espie Exp $
d6 1
a6 1
REVISION=		0
@


1.33
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/10/05 02:27:50 brad Exp $
d6 1
d9 1
a9 1
HOMEPAGE =		http://vsftpd.beasts.org/
d11 1
a11 1
MAINTAINER =		Benoit Lecocq <benoit@@openbsd.org>
a27 1
	@@perl -pi -e "s,%%SYSCONFDIR%%,${SYSCONFDIR}," ${WRKSRC}/defs.h
d32 1
@


1.32
log
@Update to vsftpd 3.0.2.

ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/07/04 18:28:27 jasper Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d24 1
a24 1
NO_REGRESS=		Yes
@


1.31
log
@- adjust homepage/mastersite as per http://scarybeastsecurity.blogspot.com/2011/07/alert-vsftpd-download-backdoored.html

from nigel taylor
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2011/03/02 08:26:19 sthen Exp $
d3 1
a3 1
COMMENT=		ftp daemon which aims to be secure
d5 1
a5 2
DISTNAME=		vsftpd-2.3.4
REVISION=		0
d18 1
a18 1
WANTLIB=		c crypto util ssl wrap
d27 1
a27 2
USE_GROFF =		Yes
NO_REGRESS =		Yes
@


1.30
log
@SECURITY update to 2.3.4; CVE-2011-0762 fnmatch resource exhaustion
ok/same diff benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2011/01/04 22:06:13 benoit Exp $
d6 1
d21 1
a21 1
MASTER_SITES=		ftp://vsftpd.beasts.org/users/cevans/
@


1.29
log
@- update vsftpd to 2.3.2
- take maintainership

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/10/18 18:36:59 espie Exp $
d5 1
a5 1
DISTNAME=		vsftpd-2.3.2
d12 1
a12 1
# GPLv2
@


1.28
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/08/19 13:26:21 sthen Exp $
d5 1
a5 1
DISTNAME=		vsftpd-2.3.1
d8 3
a10 1
HOMEPAGE=		http://vsftpd.beasts.org/
d27 2
a28 2
USE_GROFF =	Yes
NO_REGRESS=		Yes
@


1.27
log
@update vsftpd to 2.3.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/08/17 19:57:47 sthen Exp $
d25 1
@


1.26
log
@update vsftpd to 2.3.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/07/12 22:07:42 sthen Exp $
d5 1
a5 1
DISTNAME=		vsftpd-2.3.0
@


1.25
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/04/07 21:37:35 sthen Exp $
d5 1
a5 2
DISTNAME=		vsftpd-2.2.2
REVISION=		0
@


1.24
log
@Don't unconditionally strip during linking, leave it for install so
${INSTALL_STRIP} is honoured. Bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/11/20 01:55:04 sthen Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME}p0
@


1.23
log
@Update to 2.2.2, fixing a regression introduced in 2.1.0 resulting
in 500 OOPS: child died on busy servers. New release pointed out by Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2009/10/23 22:50:00 sthen Exp $
d6 1
@


1.22
log
@update to 2.2.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2009/04/01 07:29:16 ajacoutot Exp $
d5 1
a5 1
DISTNAME=		vsftpd-2.2.1
@


1.21
log
@- remove aanriot@@ from maintainer per his request
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2009/03/27 11:54:49 sthen Exp $
d3 1
a3 1
COMMENT=		Ftp daemon which aims to be secure
d5 1
a5 2
DISTNAME=		vsftpd-2.1.0
PKGNAME=		${DISTNAME}p0
@


1.20
log
@update to 2.10, based on a diff from admin at phpcode.us

as ajacoutot points out, aanriot@@ (maintainer) "is probably slaying
ducks somewhere and won't answer before next year"   coin! coin!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/09/15 22:37:00 merdely Exp $
d6 1
a10 2
MAINTAINER=		Alexandre Anriot <aanriot@@openbsd.org>

d16 1
@


1.19
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/07/27 11:48:41 aanriot Exp $
d5 1
a5 1
DISTNAME=		vsftpd-2.0.5
@


1.18
log
@maintenance update to 2.0.5 .

inputs & ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/05/31 00:10:12 aanriot Exp $
d3 1
a3 1
COMMENT=		"Ftp daemon which aims to be secure"
@


1.17
log
@- don't install confusing examples which are using unavailable features.
- bump PKGNAME.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/01/28 21:57:51 aanriot Exp $
d5 1
a5 2
DISTNAME=		vsftpd-2.0.4
PKGNAME=		${DISTNAME}p0
@


1.16
log
@- maintenance update to 2.0.4 (minor bugfixes).
- enable setproctitle() support in order to use setproctitle_enable=Yes.
- manpages fixes (help alek@@).
- regen patches.

ok alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/09/16 16:40:19 aanriot Exp $
d6 1
d24 2
a25 1
MAKE_FLAGS=		CC="${CC}" CFLAGS="${CFLAGS}"
a44 1
	@@cp -r ${WRKSRC}/EXAMPLE/* ${PREFIX}/share/examples/vsftpd
@


1.15
log
@install documentation, and fix SSL certificates path.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/07/03 18:06:37 aanriot Exp $
d5 1
a5 3
VERSION=		2.0.3
DISTNAME=		vsftpd-${VERSION}
PKGNAME=		${DISTNAME}p1
d23 1
a23 1
MAKE_FLAGS=		CC="${CC}" CFLAGS="${CFLAGS} -Wall -W -Wshadow"
d32 3
@


1.14
log
@- build with SSL and TCP Wrappers supports, not enabled by default.
- nuke trivial MESSAGE.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/06/28 17:46:43 aanriot Exp $
d7 1
a7 1
PKGNAME=		${DISTNAME}p0
a26 1
SAMPLEDIR=		${PREFIX}/share/examples/vsftpd
d31 3
d36 3
a38 1
	${INSTALL} ${WRKSRC}/vsftpd ${PREFIX}/sbin/
d41 6
a46 3
	${INSTALL_DATA_DIR} ${SAMPLEDIR}
	@@cp -r ${WRKSRC}/EXAMPLE/* ${SAMPLEDIR}
	${INSTALL_DATA} ${WRKSRC}/vsftpd.conf ${SAMPLEDIR}
@


1.13
log
@update my email address.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/04/07 18:59:46 couderc Exp $
d7 1
d14 1
a14 1
# GPL2
d19 1
a19 1
WANTLIB=		c util 
@


1.12
log
@update to 2.0.3 from maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/03/13 20:40:38 couderc Exp $
d11 1
a11 1
MAINTAINER=		Alexandre Anriot <aanriot@@atlantilde.com>
@


1.11
log
@update to 2.0.2 from maintainer.
This release fix an issue with SSL secured data connections.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/02/27 16:37:22 couderc Exp $
d5 1
a5 1
VERSION=		2.0.2
@


1.10
log
@Alexandre Anriot takes maintainership.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/02/21 13:41:37 couderc Exp $
d5 1
a5 1
VERSION=		1.2.2
@


1.9
log
@dropping maintainership for Abiword, vsftpd and Waimea.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/12/16 00:31:27 alek Exp $
d10 2
@


1.8
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/05/31 11:20:17 couderc Exp $
a9 2

MAINTAINER=		Damien Couderc <couderc@@openbsd.org>
@


1.7
log
@update to 1.2.2 from robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/02/07 06:38:12 brad Exp $
d18 1
@


1.6
log
@respect CC and CFLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/02/06 21:16:02 couderc Exp $
d5 1
a5 1
VERSION=		1.2.1
@


1.5
log
@update to 1.2.1, mostly from Robert Nagy.
@
text
@d1 1
a1 1
# $OpenBSD$
d22 2
@


1.4
log
@update to 1.2.0 based on a submit from Wouter Clarie <rimshot@@pandora.be>
@
text
@d5 1
a5 1
VERSION=		1.2.0
d24 1
@


1.3
log
@- obey SYSCONFDIR
- new user naming schema
- bump PKGNAME

couderc@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/05/20 11:12:08 couderc Exp $
d5 1
a5 1
VERSION=		1.1.3
a6 1
PKGNAME=		${DISTNAME}p0
@


1.2
log
@improve installation based on suggestions from Camiel Dobbelaar
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/02/19 15:42:02 couderc Exp $
d7 1
d25 3
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d23 2
d29 3
a31 2
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/vsftpd
	@@cp -r ${WRKSRC}/EXAMPLE/* ${PREFIX}/share/examples/vsftpd
@


1.1.1.1
log
@Import of vsftpd

vsftpd is an FTP server, or daemon. The "vs" stands for Very Secure.
It has been written with security in mind, and carefully designed to
be resilient to attack.

@
text
@@
