head	1.6;
access;
symbols
	OPENBSD_4_9:1.5.0.4
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.2
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.1.1.0.24
	OPENBSD_4_2_BASE:1.1.1.1
	OPENBSD_4_1:1.1.1.1.0.22
	OPENBSD_4_1_BASE:1.1.1.1
	OPENBSD_4_0:1.1.1.1.0.20
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.18
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.16
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.14
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.12
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.10
	OPENBSD_3_5_BASE:1.1.1.1
	OPENBSD_3_4:1.1.1.1.0.8
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.6
	OPENBSD_3_3_BASE:1.1.1.1
	OPENBSD_3_2:1.1.1.1.0.4
	OPENBSD_3_2_BASE:1.1.1.1
	OPENBSD_3_1:1.1.1.1.0.2
	OPENBSD_3_1_BASE:1.1.1.1
	naddy_20020131:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.6
date	2011.07.04.11.10.57;	author jasper;	state dead;
branches;
next	1.5;

1.5
date	2010.05.20.09.21.17;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2008.08.31.12.29.25;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.08.25.15.14.43;	author jasper;	state Exp;
branches;
next	1.2;

1.2
date	2007.12.11.11.04.57;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2002.01.31.12.21.54;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.01.31.12.21.54;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.6
log
@garbage collect these Direct Connect clients. they're old/unmaintained and
hardly working. users of Direct Connect can use mldonkey or valknut instead.

ok dcoppa@@ landry@@
@
text
@$OpenBSD: patch-configure_in,v 1.5 2010/05/20 09:21:17 espie Exp $
--- configure.in.orig	Fri Jan  9 19:17:46 2004
+++ configure.in	Thu May 20 11:18:39 2010
@@@@ -56,10 +56,8 @@@@ programs.  If you get compile errors, first upgrade to
 (but minimum 2.96-85) and try again. If the problem still exists, try with
 gcc 3.0.x (or 2.95.x) *BEFORE* reporting bugs!
 
-Press return to resume configuration (CTRL-C to abort).
 ================================================================================
 EOF
-	read dummy
 	fi
 fi
 
@@@@ -117,6 +115,7 @@@@ if test "x$have_gcrypt" != "xyes"; then
 	fi
 fi
 
+AC_CHECK_LIB(pthread, main, [AC_DEFINE(HAVE_LIBPTHREAD, 1), LIBS="$LIBS -pthread"])
 
 dnl Checks for libraries.
 AC_ARG_ENABLE(glib2,[  --disable-glib2           Use glib1.2 instead of glib 2.x])
@@@@ -258,7 +257,7 @@@@ else
 fi
 
 AC_MSG_CHECKING(whether MSG_NOSIGNAL exists)
-AC_TRY_COMPILE([#include <sys/socket.h>],
+AC_TRY_COMPILE([#include <sys/types.h> #include <sys/socket.h>],
 [
 int main()
 {
@@@@ -310,7 +309,7 @@@@ fi
 dnl Checks for header files.
 AC_HEADER_DIRENT
 AC_HEADER_STDC
-AC_CHECK_HEADERS(fcntl.h limits.h strings.h sys/file.h sys/ioctl.h sys/time.h unistd.h errno.h signal.h sys/poll.h sys/param.h openssl/md5.h openssl/md4.h gcrypt.h)
+AC_CHECK_HEADERS(fcntl.h limits.h strings.h sys/file.h sys/ioctl.h sys/time.h unistd.h errno.h signal.h sys/poll.h sys/param.h openssl/md5.h openssl/md4.h gcrypt.h linux/sem.h getopt.h)
 
 dnl Checks for typedefs, structures, and compiler characteristics.
 AC_C_CONST
@@@@ -323,7 +322,7 @@@@ AC_STRUCT_TM
 dnl Checks for library functions.
 AC_FUNC_MEMCMP
 AC_FUNC_MMAP
-AC_CHECK_FUNCS(getcwd mkdir select socket strdup strerror strstr strtod strtoul uname)
+AC_CHECK_FUNCS(getcwd mkdir select socket strdup strerror strstr strtod strtoul uname getopt_long)
 
 dnl *** Checks if the CPU allows unaligned access ***
 AC_MSG_CHECKING(CPU allows unaligned memory access)
@


1.5
log
@okay, I have no idea why they don't like gcc4.
make it compile, not fuck up the build.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.4 2008/08/31 12:29:25 jasper Exp $
@


1.4
log
@- remove fragment that snuck in and broke dctc.

breakage spotted by naddy, thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.3 2008/08/25 15:14:43 jasper Exp $
d3 13
a15 2
+++ configure.in	Sun Aug 24 13:24:50 2008
@@@@ -117,6 +117,7 @@@@ if test "x$have_gcrypt" != "xyes"; then
d23 1
a23 1
@@@@ -258,7 +259,7 @@@@ else
d32 1
a32 1
@@@@ -310,7 +311,7 @@@@ fi
d41 1
a41 1
@@@@ -323,7 +324,7 @@@@ AC_STRUCT_TM
@


1.3
log
@- update dctc to a less ancient version 0.85.9
- merge parts of pkg/SECURITY into pkg/MESSAGE
- fix license marker

feedback and ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_in,v 1.2 2007/12/11 11:04:57 jakemsr Exp $
a11 9
@@@@ -143,7 +144,7 @@@@ if test "x$db_dir" != "x"; then
 fi
 
 dnl Check if BerkeleyDB include is available
-AC_CHECK_HEADERS(db.h, ,AC_MSG_ERROR(BerkeleyDB include required.))
+AC_CHECK_HEADERS(db/db.h, ,AC_MSG_ERROR(BerkeleyDB include required.))
 
 dnl choose between auto-detected Berkeley DB using db.h content and manually try to link db
 AC_ARG_ENABLE(manual-db-detect,[  --enable-manual-db-detect  Disable automatic Berkeley DB version detection using db.h], [manu_db="yes"], [manu_db="no"])
@


1.2
log
@use -pthread instead of -lpthread for pthreads linkage

sync w/update-patches
@
text
@d1 7
a7 8
$OpenBSD: patch-configure_in,v 1.1.1.1 2002/01/31 12:21:54 naddy Exp $
--- configure.in.orig	Sun Jan 20 04:27:03 2002
+++ configure.in	Sun Oct 21 03:41:56 2007
@@@@ -19,14 +19,14 @@@@ AC_CHECK_LIB(glib, main)
 dnl Replace `main' with a function in -lgthread:
 AC_CHECK_LIB(gthread, main)
 dnl Replace `main' with a function in -lpthread:
-AC_CHECK_LIB(pthread, main)
d10 13
a22 1
 AM_PATH_GLIB(1.2.0, , , glib gthread)
d24 7
d34 2
a35 2
-AC_CHECK_HEADERS(fcntl.h limits.h strings.h sys/file.h sys/ioctl.h sys/time.h unistd.h)
+AC_CHECK_HEADERS(fcntl.h limits.h strings.h sys/file.h sys/ioctl.h sys/time.h unistd.h linux/sem.h getopt.h)
d39 1
a39 1
@@@@ -39,6 +39,6 @@@@ AC_STRUCT_TM
d46 2
a47 1
 AC_OUTPUT(Makefile src/Makefile)
@


1.1
log
@Initial revision
@
text
@d1 12
a12 4
$OpenBSD$
--- configure.in.orig	Sun Jan 20 13:27:03 2002
+++ configure.in	Tue Jan 29 15:57:59 2002
@@@@ -26,7 +27,7 @@@@ AM_PATH_GLIB(1.2.0, , , glib gthread)
d21 1
a21 1
@@@@ -39,6 +40,6 @@@@ AC_STRUCT_TM
@


1.1.1.1
log
@Import dctc 0.68.0; submitted by Nils Nordman <nino@@nforced.com>.

DCTC is a Direct Connect clone, allowing users to share their files
and talk (like IRC but more software sharing oriented) using a
proprietary protocol. 
@
text
@@
