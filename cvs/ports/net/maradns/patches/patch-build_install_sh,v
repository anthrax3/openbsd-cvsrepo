head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.36
	OPENBSD_6_2_BASE:1.4
	OPENBSD_6_1:1.4.0.34
	OPENBSD_6_1_BASE:1.4
	OPENBSD_6_0:1.4.0.32
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.28
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.30
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.26
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.24
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.22
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.20
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.18
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.16
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.14
	OPENBSD_5_0:1.4.0.12
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.4.0.10
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.4.0.8
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.4.0.6
	OPENBSD_4_7_BASE:1.4
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.4
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.2
	OPENBSD_4_0_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2008.08.20.20.13.36;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2007.06.06.23.29.55;	author rui;	state Exp;
branches;
next	1.2;

1.2
date	2006.03.31.16.10.23;	author sturm;	state Exp;
branches
	1.2.2.1
	1.2.4.1;
next	1.1;

1.1
date	2006.03.24.20.12.28;	author sturm;	state Exp;
branches;
next	;

1.2.2.1
date	2007.06.17.08.53.03;	author sturm;	state Exp;
branches;
next	;

1.2.4.1
date	2007.06.17.08.44.46;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to maradns 1.3.07.09

based on a diff by Vlad Glagolev
@
text
@$OpenBSD: patch-build_install_sh,v 1.3 2007/06/06 23:29:55 rui Exp $
--- build/install.sh.orig	Mon Aug 18 17:56:22 2008
+++ build/install.sh	Mon Aug 18 17:57:31 2008
@@@@ -128,58 +128,3 @@@@ cp -r * $DOCS
 cd $TOPLEVEL
 cp maradns.gpg.key $DOCS
 
-# If the system in question does not already have configuration files,
-# place example configuration files in /etc
-if [ -d doc/$LANGUAGE/examples ] ; then
-	cd doc/$LANGUAGE/examples
-else
-	cd doc/en/examples
-fi
-
-# $RPM_BUILD_ROOT was added at the request of one of my users
-if [ ! -f $RPM_BUILD_ROOT/etc/mararc ] ; then
-	cp example_mararc $RPM_BUILD_ROOT/etc/mararc
-else 
-	echo /etc/mararc already there, not replacing
-fi
-if [ ! -d $RPM_BUILD_ROOT/etc/maradns ] ; then
-	mkdir $RPM_BUILD_ROOT/etc/maradns
-	chmod 755 $RPM_BUILD_ROOT/etc/maradns
-fi
-if [ ! -d $RPM_BUILD_ROOT/etc/maradns/logger ] ; then
-	# The duende tool *needs* an /etc/maradns/logger directory
-	# Note that duende uses an absolute path
-	mkdir $RPM_BUILD_ROOT/etc/maradns/logger
-fi
-if [ ! -f $RPM_BUILD_ROOT/etc/maradns/db.example.net ] ; then
-	cp example_csv2 $RPM_BUILD_ROOT/etc/maradns/db.example.net
-fi
-
-# Finally, set up the startup files, as needed
-# Go back to the top-level MaraDNS directory
-cd $TOPLEVEL
-# And copy over the init files if this system looks to be a sysVish init
-# system
-if [ -d $RPM_BUILD_ROOT/etc/rc.d/init.d ] ; then
-	echo Adding MaraDNS startup scripts
-	if [ ! -f $RPM_BUILD_ROOT/etc/rc.d/init.d/maradns ] ; then
-	      cp $BUILDDIR/mara.startup $RPM_BUILD_ROOT/etc/rc.d/init.d/maradns
-	      cp $BUILDDIR/zoneserver.startup \
-	          $RPM_BUILD_ROOT/etc/rc.d/init.d/maradns.zoneserver
-	fi
-	if cd $RPM_BUILD_ROOT/etc/rc.d/rc3.d/ ; then
-		echo Starting up MaraDNS at runlevel 3
-		rm S60maradns 2> /dev/null
-		rm K60maradns.zoneserver 2> /dev/null
-		ln -s ../init.d/maradns S60maradns
-		ln -s ../init.d/maradns.zoneserver K60maradns.zoneserver
-	fi
-	if cd $RPM_BUILD_ROOT/etc/rc.d/rc5.d/ ; then
-		echo starting up MaraDNS at runlevel 5
-		rm S60maradns 2> /dev/null
-		rm K60maradns.zoneserver 2> /dev/null
-		ln -s ../init.d/maradns S60maradns
-		ln -s ../init.d/maradns.zoneserver K60maradns.zoneserver
-	fi
-fi
-
@


1.3
log
@update maradns to 1.2.12.06. This version addresses Multiple Remote Denial of Service Vulnerabilities which affects version 1.2.12.04.

Reference:
http://secunia.com/advisories/25406/

ok sturm@@
@
text
@d1 3
a3 3
$OpenBSD$
--- build/install.sh.orig	Mon Dec 12 06:17:27 2005
+++ build/install.sh	Wed Jun  6 11:37:20 2007
d10 1
a10 1
-if [ -d docs/$LANGUAGE/examples ] ; then
@


1.2
log
@update to maradns 1.2.07.1
@
text
@d1 3
a3 3
$OpenBSD: patch-build_install_sh,v 1.1.1.1 2002/11/15 20:19:32 brad Exp $
--- build/install.sh.orig	Fri Mar 24 20:44:57 2006
+++ build/install.sh	Fri Mar 24 20:45:18 2006
@


1.2.2.1
log
@MFC:
update maradns to 1.2.12.06. This version addresses Multiple Remote Denial of
Service Vulnerabilities which affects version 1.2.12.04.

Reference:
http://secunia.com/advisories/25406/
-------
MFC:
roll in a distribution patch which fixes:

CVE-2007-3116 Memory leak allows remote attackers to cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3116
@
text
@d1 3
a3 3
$OpenBSD: patch-build_install_sh,v 1.3 2007/06/06 23:29:55 rui Exp $
--- build/install.sh.orig	Mon Dec 12 06:17:27 2005
+++ build/install.sh	Wed Jun  6 11:37:20 2007
@


1.2.4.1
log
@MFC:
update maradns to 1.2.12.06. This version addresses Multiple Remote Denial of
Service Vulnerabilities which affects version 1.2.12.04.

Reference:
http://secunia.com/advisories/25406/
-----
MFC:
roll in a distribution patch which fixes:

CVE-2007-3116 Memory leak allows remote attackers to cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3116
@
text
@d1 3
a3 3
$OpenBSD: patch-build_install_sh,v 1.3 2007/06/06 23:29:55 rui Exp $
--- build/install.sh.orig	Mon Dec 12 06:17:27 2005
+++ build/install.sh	Wed Jun  6 11:37:20 2007
@


1.1
log
@there's no point in devel/stable split anymore
@
text
@d2 3
a4 4
--- build/install.sh.orig	Fri Nov 15 02:28:49 2002
+++ build/install.sh	Fri Nov 15 02:33:20 2002
@@@@ -109,43 +109,3 @@@@ mkdir $DOCS > /dev/null 2>&1
 cp -r * $DOCS
d6 2
a7 2
 cp maradns.pgp.key $DOCS
-
d16 1
d19 2
d26 8
a33 1
-cp example_csv1 $RPM_BUILD_ROOT/etc/maradns/db.example.com
d44 2
d49 2
a50 1
-		rm S60maradns
d52 1
d56 2
a57 1
-		rm S60maradns
d59 1
@

