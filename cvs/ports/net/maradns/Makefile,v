head	1.21;
access;
symbols
	OPENBSD_6_1:1.21.0.14
	OPENBSD_6_1_BASE:1.21
	OPENBSD_6_0:1.21.0.12
	OPENBSD_6_0_BASE:1.21
	OPENBSD_5_9:1.21.0.8
	OPENBSD_5_9_BASE:1.21
	OPENBSD_5_8:1.21.0.10
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.21.0.6
	OPENBSD_5_7_BASE:1.21
	OPENBSD_5_6:1.21.0.4
	OPENBSD_5_6_BASE:1.21
	OPENBSD_5_5:1.21.0.2
	OPENBSD_5_5_BASE:1.21
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.19.0.4
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.19.0.2
	OPENBSD_5_2_BASE:1.19
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.2
	OPENBSD_5_0:1.17.0.2
	OPENBSD_5_0_BASE:1.17
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.10.0.6
	OPENBSD_4_7_BASE:1.10
	OPENBSD_4_6:1.10.0.4
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.2
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.9.0.4
	OPENBSD_4_4_BASE:1.9
	OPENBSD_4_3:1.9.0.2
	OPENBSD_4_3_BASE:1.9
	OPENBSD_4_2:1.7.0.2
	OPENBSD_4_2_BASE:1.7
	OPENBSD_4_1:1.5.0.2
	OPENBSD_4_1_BASE:1.5
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.1.1.1.0.14
	OPENBSD_3_9_BASE:1.1.1.1
	OPENBSD_3_8:1.1.1.1.0.12
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.10
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.8
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.6
	OPENBSD_3_5_BASE:1.1.1.1
	OPENBSD_3_4:1.1.1.1.0.4
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.2
	OPENBSD_3_3_BASE:1.1.1.1
	brad_2002-11-15:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.21
date	2014.01.23.18.30.57;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2013.03.11.11.35.48;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2012.03.20.22.13.49;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2012.01.26.08.03.57;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2011.05.11.12.03.19;	author jasper;	state Exp;
branches;
next	1.16;

1.16
date	2011.03.02.06.54.11;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2011.02.05.09.23.52;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.27.11.54.53;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.18.18.36.49;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.12.22.07.39;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2010.03.22.13.54.21;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2008.08.20.20.13.36;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2008.01.07.21.24.07;	author bernd;	state Exp;
branches;
next	1.8;

1.8
date	2007.09.15.22.36.55;	author merdely;	state Exp;
branches;
next	1.7;

1.7
date	2007.06.09.11.15.48;	author rui;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.06.23.29.55;	author rui;	state Exp;
branches;
next	1.5;

1.5
date	2007.01.08.19.18.05;	author sturm;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2006.08.10.09.55.03;	author bernd;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2006.03.31.16.10.22;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2006.03.24.20.12.28;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2002.11.15.20.19.32;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.11.15.20.19.32;	author brad;	state Exp;
branches;
next	;

1.4.2.1
date	2007.06.17.08.53.03;	author sturm;	state Exp;
branches;
next	;

1.5.2.1
date	2007.06.17.08.44.46;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.21
log
@sloppy upstream, why the fuck have a DOCUMENTATION file mode 0600 ?
not even all of them, just one in the middle!
@
text
@# $OpenBSD: Makefile,v 1.20 2013/03/11 11:35:48 espie Exp $

COMMENT=	simple and performant DNS server

VERSION=	1.3.07.15
DISTNAME=	maradns-${VERSION}
CATEGORIES=	net
REVISION =	0

HOMEPAGE=	http://www.maradns.org/

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c pthread

MASTER_SITES=	http://maradns.org/download/1.3/

MAKE_FLAGS=	CC="${CC}" FLAGS="${CFLAGS} -D_THREAD_SAFE -pthread"

USE_GROFF =	Yes
NO_TEST=	Yes

post-configure:
	@@find ${WRKSRC} -type f | xargs perl -pi -e "s,/etc,${SYSCONFDIR},g"
	@@perl -pi -e "s, = 99, = 537," ${WRKSRC}/doc/en/examples/ex*

post-install:
	@@chmod a+r ${PREFIX}/share/doc/maradns/source/maraconf.ej
	@@mv ${PREFIX}/share/doc/maradns/examples \
		${PREFIX}/share/examples/maradns

.include <bsd.port.mk>
@


1.20
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2012/03/20 22:13:49 sthen Exp $
d8 1
d29 1
@


1.19
log
@SECURITY update to MaraDNS 1.3.07.15, from Brad
- Hash randomization added to MaraDNS 1's recursive resolver.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/01/26 08:03:57 ajacoutot Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d21 1
a21 1
NO_REGRESS=	Yes
@


1.18
log
@Put these users in the daemon class to be consistent with all the other
ones in ports.

discussed with and ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/05/11 12:03:19 jasper Exp $
d5 1
a5 1
VERSION=	1.3.07.11
a6 1
REVISION=	1
@


1.17
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/03/02 06:54:11 jasper Exp $
d7 1
a7 1
REVISION=	0
@


1.16
log
@- fix MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/02/05 09:23:52 sthen Exp $
d7 1
@


1.15
log
@SECURITY update to 1.3.07.11 - CVE-2011-0520

The compress_add_dlabel_points function in dns/Compress.c in MaraDNS 1.3.x
allows remote attackers to cause a denial of service (segmentation fault)
and possibly execute arbitrary code via a long DNS hostname with a large
number of labels, which triggers a heap-based buffer overflow.

From Brad, ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/27 11:54:53 espie Exp $
d19 1
a19 1
MASTER_SITES=	http://www.maradns.org/download/1.3/${VERSION}/
@


1.14
log
@minor bumps after pkg_create fix: generate catN entry when needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/10/18 18:36:49 espie Exp $
a2 1
VERSION=	1.3.07.09
d4 2
a6 1
REVISION=	1
@


1.13
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/07/12 22:07:39 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.12
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/03/22 13:54:21 sturm Exp $
d23 1
@


1.11
log
@remove myself as maintainer, bump PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2008/08/20 20:13:36 sturm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d16 1
@


1.10
log
@update to maradns 1.3.07.09

based on a diff by Vlad Glagolev
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2008/01/07 21:24:07 bernd Exp $
d6 1
a9 2

MAINTAINER=	Nikolay Sturm <sturm@@openbsd.org>
@


1.9
log
@Security update to maradns-1.2.12.09.

http://secunia.com/advisories/28329/

ok sturm@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/09/15 22:36:55 merdely Exp $
d3 1
a3 1
VERSION=	1.2.12.09
d19 1
a19 1
MASTER_SITES=	http://www.maradns.org/download/1.2/${VERSION}/
@


1.8
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/06/09 11:15:48 rui Exp $
d3 1
a3 1
VERSION=	1.2.12.06
a5 1
PKGNAME=	${DISTNAME}p0
d19 1
a19 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=maradns/}
a23 7

post-extract:
	rm ${WRKSRC}/doc/en/source/csv2.ej.orig
	rm ${WRKSRC}/doc/en/source/mararc.ej.orig
	rm ${WRKSRC}//parse/Csv2_rr_wks.c.orig
	rm ${WRKSRC}/server/MaraDNS.c.orig
	rm ${WRKSRC}/server/recursive.c.orig
@


1.7
log
@roll in a distribution patch which fixes:

CVE-2007-3116 Memory leak allows remote attackers to cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3116

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/06/06 23:29:55 rui Exp $
d4 1
a4 1
COMMENT=	"simple and performant DNS server"
@


1.6
log
@update maradns to 1.2.12.06. This version addresses Multiple Remote Denial of Service Vulnerabilities which affects version 1.2.12.04.

Reference:
http://secunia.com/advisories/25406/

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/01/08 19:18:05 sturm Exp $
d6 1
@


1.5
log
@update to maradns 1.2.12.04
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/08/10 09:55:03 bernd Exp $
d3 1
a3 1
VERSION=	1.2.12.04
d27 4
@


1.5.2.1
log
@MFC:
update maradns to 1.2.12.06. This version addresses Multiple Remote Denial of
Service Vulnerabilities which affects version 1.2.12.04.

Reference:
http://secunia.com/advisories/25406/
-----
MFC:
roll in a distribution patch which fixes:

CVE-2007-3116 Memory leak allows remote attackers to cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3116
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/01/08 19:18:05 sturm Exp $
d3 1
a3 1
VERSION=	1.2.12.06
a5 1
PKGNAME=	${DISTNAME}p0
a26 4
	rm ${WRKSRC}/doc/en/source/mararc.ej.orig
	rm ${WRKSRC}//parse/Csv2_rr_wks.c.orig
	rm ${WRKSRC}/server/MaraDNS.c.orig
	rm ${WRKSRC}/server/recursive.c.orig
@


1.4
log
@There's no maradns/stable anymore. Add missing "@@pkgpath net/maradns/stable"
to pkg/PLIST. Unbreaks package update.

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/03/31 16:10:22 sturm Exp $
d3 1
a3 1
VERSION=	1.2.07.1
a5 1
PKGNAME=	${DISTNAME}p0
d24 3
@


1.4.2.1
log
@MFC:
update maradns to 1.2.12.06. This version addresses Multiple Remote Denial of
Service Vulnerabilities which affects version 1.2.12.04.

Reference:
http://secunia.com/advisories/25406/
-------
MFC:
roll in a distribution patch which fixes:

CVE-2007-3116 Memory leak allows remote attackers to cause a denial of service
http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2007-3116
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/08/10 09:55:03 bernd Exp $
d3 1
a3 1
VERSION=	1.2.12.06
a24 7

post-extract:
	rm ${WRKSRC}/doc/en/source/csv2.ej.orig
	rm ${WRKSRC}/doc/en/source/mararc.ej.orig
	rm ${WRKSRC}//parse/Csv2_rr_wks.c.orig
	rm ${WRKSRC}/server/MaraDNS.c.orig
	rm ${WRKSRC}/server/recursive.c.orig
@


1.3
log
@update to maradns 1.2.07.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/03/24 20:12:28 sturm Exp $
d6 1
@


1.2
log
@there's no point in devel/stable split anymore
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/07/22 17:40:28 sturm Exp $
d3 1
a3 1
VERSION=	1.0.28
d17 1
a17 1
WANTLIB=		c pthread
d19 3
a21 1
MAKE_FLAGS=	CC="${CC}" FLAGS="${CFLAGS}"
a23 3
MASTER_SITES=	${HOMEPAGE}/download/ \
		http://maradns.3va.net/download/ \
		http://maradns.glou.net/download/
d26 1
a26 2
	@@perl -pi -e "s,/etc,${SYSCONFDIR},g" ${WRKSRC}/maragen/mararc.m4 \
		${WRKSRC}/parse/ParseMaraRc.c ${WRKSRC}/doc/en/examples/ex*
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d3 4
a6 2
SUBDIR+= stable
SUBDIR+= devel
d8 28
a35 1
.include <bsd.port.subdir.mk>
@


1.1.1.1
log
@add maradns ports;
--
maradns is a DNS server written with security, simplicity,
and performance in mind.

From: Margarida Sequeira <niness@@devilness.org>
@
text
@@
