head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.16
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.14
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.12
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.8
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.10
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.6
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.02.09.21.36.46;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.1
log
@Update ports/net/ntp to 4.2.7p418.  This is ntp.org's ntp daemon, *not*
the base system's openntpd.

Update removes a reflected unauthenticated DoS attack vector that has
been hit a lot in the wild recently, see http://www.openntpproject.org/
UDP traffic amplification 19x.

This is a devel version from upstream, they have decided not to fix it in
the stable branch. Users running older versions should add "disable monitor"
to their config and restart, then verify that "monlist" in ntpdc does not
return a list.

ok aja@@, missing build dep spotted by naddy
@
text
@$OpenBSD$
--- include/ntp_worker.h.orig	Thu Feb  6 22:41:12 2014
+++ include/ntp_worker.h	Thu Feb  6 22:50:16 2014
@@@@ -9,6 +9,9 @@@@
 
 #ifdef WORKER
 # if defined(WORK_THREAD) && defined(WORK_PIPE)
+#  ifdef HAVE_PTHREAD_H
+#   include <pthread.h>
+#  endif
 #  ifdef HAVE_SEMAPHORE_H
 #   include <semaphore.h>
 #  endif
@
