head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.03.27.11.33.40;	author bluhm;	state Exp;
branches;
next	;
commitid	VSHpvYMwiS3jt19i;


desc
@@


1.1
log
@Update ntp to 4.2.8p10.
CVE-2016-9042, CVE-2017-6451, CVE-2017-6452, CVE-2017-6455,
CVE-2017-6458, CVE-2017-6459, CVE-2017-6460, CVE-2017-6462,
CVE-2017-6463, CVE-2017-6464
Adapt OpenSSL #ifdef for LibreSSL.
Fix regression tests, prevent them from crashing.
OK deraadt@@
@
text
@$OpenBSD$
--- util/ntp-keygen.c.orig	Thu Mar 23 21:54:28 2017
+++ util/ntp-keygen.c	Thu Mar 23 21:59:33 2017
@@@@ -474,7 +474,7 @@@@ main(
 	/*
 	 * Seed random number generator and grow weeds.
 	 */
-#if OPENSSL_VERSION_NUMBER < 0x10100000L
+#if OPENSSL_VERSION_NUMBER < 0x10100000L || defined(LIBRESSL_VERSION_NUMBER)
 	ERR_load_crypto_strings();
 	OpenSSL_add_all_algorithms();
 #endif /* OPENSSL_VERSION_NUMBER */
@
