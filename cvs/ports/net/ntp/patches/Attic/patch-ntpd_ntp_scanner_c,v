head	1.4;
access;
symbols
	OPENBSD_5_4:1.3.0.6
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.4
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.8
	OPENBSD_5_0:1.2.0.6
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.4
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2014.02.09.21.36.46;	author sthen;	state dead;
branches;
next	1.3;

1.3
date	2012.04.10.15.06.29;	author gonzalo;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.10.19.48.32;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2010.07.03.02.49.43;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update ports/net/ntp to 4.2.7p418.  This is ntp.org's ntp daemon, *not*
the base system's openntpd.

Update removes a reflected unauthenticated DoS attack vector that has
been hit a lot in the wild recently, see http://www.openntpproject.org/
UDP traffic amplification 19x.

This is a devel version from upstream, they have decided not to fix it in
the stable branch. Users running older versions should add "disable monitor"
to their config and restart, then verify that "monlist" in ntpdc does not
return a list.

ok aja@@, missing build dep spotted by naddy
@
text
@$OpenBSD: patch-ntpd_ntp_scanner_c,v 1.3 2012/04/10 15:06:29 gonzalo Exp $
--- ntpd/ntp_scanner.c.orig	Sat Dec 25 06:40:34 2010
+++ ntpd/ntp_scanner.c	Thu Apr  5 18:25:55 2012
@@@@ -354,7 +354,7 @@@@ is_special(
 	int ch
 	)
 {
-	return (int)strchr(special_chars, ch);
+	return strchr(special_chars, ch) != NULL;
 }
 
 
@


1.3
log
@Update for ntp:

* I remove the patch patch-ntpd_ntp_intres_c because is applied upstream.
* We doesn't need USE_GROFF here.

OK naddy@@, aja@@
@
text
@d1 1
a1 1
$OpenBSD: patch-ntpd_ntp_scanner_c,v 1.2 2010/07/10 19:48:32 naddy Exp $
@


1.2
log
@update to 4.2.6p2, which incorporates most of our patches
@
text
@d1 4
a4 4
$OpenBSD$
--- ntpd/ntp_scanner.c.orig	Sat Jul 10 18:30:24 2010
+++ ntpd/ntp_scanner.c	Sat Jul 10 18:30:39 2010
@@@@ -351,7 +351,7 @@@@ is_special(
@


1.1
log
@update to 4.2.6p1 and remove a lot of cruft
@
text
@d2 10
a11 8
--- ntpd/ntp_scanner.c.orig	Thu Jul  1 15:15:49 2010
+++ ntpd/ntp_scanner.c	Thu Jul  1 15:16:09 2010
@@@@ -637,7 +637,7 @@@@ lex_too_long:
 	yytext[min(sizeof(yytext) - 1, 50)] = 0;
 	msyslog(LOG_ERR, 
 		"configuration item on line %d longer than limit of %d, began with '%s'",
-		ip_file->line_no, sizeof(yytext) - 1, yytext);
+		ip_file->line_no, (int)sizeof(yytext) - 1, yytext);
a12 2
 	/*
 	 * If we hit the length limit reading the startup configuration
@

