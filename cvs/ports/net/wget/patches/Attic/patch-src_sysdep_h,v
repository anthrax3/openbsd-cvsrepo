head	1.3;
access;
symbols
	OPENBSD_5_4:1.2.0.8
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.6
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.4
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	OPENBSD_5_0:1.1.0.8
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.6
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.4
	OPENBSD_4_7:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2013.08.09.14.40.44;	author naddy;	state dead;
branches;
next	1.2;

1.2
date	2011.10.12.10.14.30;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2010.09.07.20.54.48;	author jasper;	state Exp;
branches
	1.1.2.1
	1.1.4.1;
next	;

1.1.2.1
date	2010.09.21.02.57.07;	author william;	state Exp;
branches;
next	;

1.1.4.1
date	2010.09.21.02.58.25;	author william;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove gcc2 workarounds
@
text
@$OpenBSD: patch-src_sysdep_h,v 1.2 2011/10/12 10:14:30 dcoppa Exp $

Fix build with GCC2 where the configure test fails
to pickup stdbool.h. So it creates the lib/stdbool.h
which these definitions would override.

--- src/sysdep.h.orig	Thu Oct  6 09:43:49 2011
+++ src/sysdep.h	Thu Oct  6 09:47:13 2011
@@@@ -119,7 +119,23 @@@@ void *alloca (size_t);
 #endif
 
 /* Provided by gnulib on systems that don't have it: */
+#if HAVE_STDBOOL_H
 # include <stdbool.h>
+#else
+# if !(defined(__GNUC__) && __GNUC__ < 3)
+# if ! HAVE__BOOL
+#  ifdef __cplusplus
+typedef bool _Bool;
+#  else
+typedef unsigned char _Bool;
+#  endif
+# endif
+# define bool _Bool
+# define false 0
+# define true 1
+# define __bool_true_false_are_defined 1
+#endif
+#endif
 
 /* Needed for compilation under OS/2 and MSDOS */
 #if defined(__EMX__) || defined(MSDOS)
@


1.2
log
@Update to wget-1.13.4.
Tested on i386, amd64 and sparc64.

Note: untested on gcc2 architectures, but it's broken anyway since
gperf fails to build there due to an internal compiler error (as
found by sebastia@@ on his vax).

OK sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_sysdep_h,v 1.1 2010/09/07 20:54:48 jasper Exp $
@


1.1
log
@- fix build with gcc2
@
text
@d1 1
a1 1
$OpenBSD$
d7 7
a13 4
--- src/sysdep.h.orig	Tue Sep  7 14:28:56 2010
+++ src/sysdep.h	Tue Sep  7 14:32:01 2010
@@@@ -136,6 +136,7 @@@@ void *alloca (size_t);
 #if HAVE_STDBOOL_H
d15 1
a15 1
 #else
d17 12
a28 7
 # if ! HAVE__BOOL
 #  ifdef __cplusplus
 typedef bool _Bool;
@@@@ -147,6 +148,7 @@@@ typedef unsigned char _Bool;
 # define false 0
 # define true 1
 # define __bool_true_false_are_defined 1
a29 1
 #endif
d32 1
@


1.1.4.1
log
@MFC:

SECURITY FIX

Resolves CVE-2010-2252
@
text
@d1 1
a1 1
$OpenBSD: patch-src_sysdep_h,v 1.1 2010/09/07 20:54:48 jasper Exp $
@


1.1.2.1
log
@MFC:

SECURITY FIX

Resolves CVE-2010-2252
@
text
@d1 1
a1 1
$OpenBSD: patch-src_sysdep_h,v 1.1 2010/09/07 20:54:48 jasper Exp $
@

