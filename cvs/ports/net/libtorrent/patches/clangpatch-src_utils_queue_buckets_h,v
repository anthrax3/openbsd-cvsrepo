head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.05.19.12.26.43;	author espie;	state Exp;
branches;
next	;
commitid	9SbHAdnBSIganrF3;


desc
@@


1.1
log
@one of the more fun fixes for clang. I don't know where freebsd gets their
tr1, but we don't, so fix it by subsitution. Leaves us with a few nits to
fix. Conditionalize clang patches that interfere with tr1 substitution...
@
text
@$OpenBSD$
proper typing, from FreeBSD

Index: src/utils/queue_buckets.h
--- src/utils/queue_buckets.h.orig
+++ src/utils/queue_buckets.h
@@@@ -251,7 +251,7 @@@@ queue_buckets<Type, Constants>::destroy(int idx, itera
   instrumentation_update(constants::instrumentation_total[idx], -difference);
 
   // Consider moving these to a temporary dequeue before releasing:
-  std::for_each(begin, end, std::function<void (value_type)>(&constants::template destroy<value_type>));
+  std::for_each(begin, end, std::function<void (value_type&)>(&constants::template destroy<value_type>));
   queue_at(idx).erase(begin, end);
 }
 
@
