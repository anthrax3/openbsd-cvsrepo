head	1.40;
access;
symbols
	OPENBSD_6_0:1.31.0.2
	OPENBSD_6_0_BASE:1.31
	OPENBSD_5_9:1.27.0.2
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.20.0.4
	OPENBSD_5_8_BASE:1.20
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.14.0.2
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.12.0.4
	OPENBSD_5_5_BASE:1.12
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.6.0.8
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.6
	OPENBSD_5_0:1.6.0.4
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.3.0.8
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.4
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.1.1.1.0.2
	OPENBSD_4_4_BASE:1.1.1.1
	jdixon_20080717:1.1.1.1
	jdixon:1.1.1;
locks; strict;
comment	@# @;


1.40
date	2017.02.01.15.49.34;	author naddy;	state Exp;
branches;
next	1.39;
commitid	9TLQVCoThbdB9mrc;

1.39
date	2016.12.30.14.02.17;	author danj;	state Exp;
branches;
next	1.38;
commitid	kTo2Y86je4xDPYA3;

1.38
date	2016.12.29.14.05.08;	author jca;	state Exp;
branches;
next	1.37;
commitid	5S7tkO023OLg7jn4;

1.37
date	2016.12.29.13.52.14;	author jca;	state Exp;
branches;
next	1.36;
commitid	ePfraa6MiRXcXyOK;

1.36
date	2016.11.26.12.29.50;	author danj;	state Exp;
branches;
next	1.35;
commitid	lrMPkRlAAvk3OoJu;

1.35
date	2016.09.27.17.04.58;	author danj;	state Exp;
branches;
next	1.34;
commitid	n3fVeojzaBLYJUQ5;

1.34
date	2016.08.31.17.50.39;	author danj;	state Exp;
branches;
next	1.33;
commitid	4KurjefdAUzOt8QN;

1.33
date	2016.08.17.18.57.57;	author danj;	state Exp;
branches;
next	1.32;
commitid	YOCiTJLApAbCiWWQ;

1.32
date	2016.08.01.17.30.50;	author danj;	state Exp;
branches;
next	1.31;
commitid	U0SZDX8ADvd3LFZa;

1.31
date	2016.06.27.18.41.11;	author danj;	state Exp;
branches;
next	1.30;
commitid	DFrMiz8PdpbhZMyH;

1.30
date	2016.06.15.06.55.58;	author jasper;	state Exp;
branches;
next	1.29;
commitid	2ME6PSfDaWoa0b7c;

1.29
date	2016.05.13.03.34.28;	author gonzalo;	state Exp;
branches;
next	1.28;
commitid	vwSwv37gz0K9x4Za;

1.28
date	2016.03.18.12.41.26;	author jca;	state Exp;
branches;
next	1.27;
commitid	g7quBubGifznhBaJ;

1.27
date	2016.01.06.09.50.04;	author benoit;	state Exp;
branches
	1.27.2.1;
next	1.26;
commitid	7PEWXlOoHbrSCkAR;

1.26
date	2015.11.10.11.56.54;	author jca;	state Exp;
branches;
next	1.25;
commitid	sSe577CEOfafovnT;

1.25
date	2015.11.05.20.00.24;	author jca;	state Exp;
branches;
next	1.24;
commitid	5pXb3Bp1oxBSkZI0;

1.24
date	2015.10.24.14.31.26;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	wiH6ZvAf5VGyiPUj;

1.23
date	2015.09.08.18.35.41;	author jca;	state Exp;
branches;
next	1.22;
commitid	42gogAhcU2dmfHfY;

1.22
date	2015.09.08.18.28.50;	author jca;	state Exp;
branches;
next	1.21;
commitid	Y0Lgw2Ttm5Ib6sA0;

1.21
date	2015.09.07.22.20.52;	author juanfra;	state Exp;
branches;
next	1.20;
commitid	cvdshBMqpfJP5vGE;

1.20
date	2015.07.04.03.12.08;	author gsoares;	state Exp;
branches
	1.20.4.1;
next	1.19;
commitid	C2qqNmMwe2UwdWsp;

1.19
date	2015.05.12.19.08.42;	author jca;	state Exp;
branches;
next	1.18;
commitid	LQcCnQhmxSSq40ID;

1.18
date	2015.05.08.10.02.07;	author benoit;	state Exp;
branches;
next	1.17;
commitid	uh0qzZtoBe2f7TCc;

1.17
date	2015.04.20.14.02.34;	author gonzalo;	state Exp;
branches;
next	1.16;
commitid	JwIICSxOjYeLAJ5W;

1.16
date	2014.10.31.13.43.59;	author gonzalo;	state Exp;
branches
	1.16.2.1;
next	1.15;
commitid	wY44UvBi8fnW3rHD;

1.15
date	2014.09.11.14.47.20;	author gonzalo;	state Exp;
branches;
next	1.14;
commitid	tej0SKCJ3E716QZZ;

1.14
date	2014.05.12.12.34.52;	author gonzalo;	state Exp;
branches;
next	1.13;

1.13
date	2014.03.13.08.58.14;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2013.07.17.02.52.53;	author william;	state Exp;
branches;
next	1.11;

1.11
date	2013.04.28.20.30.50;	author gonzalo;	state Exp;
branches;
next	1.10;

1.10
date	2013.04.03.06.23.25;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.11.11.35.47;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2012.10.30.19.40.19;	author gonzalo;	state Exp;
branches
	1.8.2.1;
next	1.7;

1.7
date	2012.08.27.13.03.06;	author gonzalo;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.19.22.31.33;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.11.14.00.45;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.10.18.18.36.48;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2009.02.18.22.38.33;	author jdixon;	state Exp;
branches;
next	1.2;

1.2
date	2008.09.17.13.54.54;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2008.07.17.04.31.45;	author jdixon;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2008.07.17.04.31.45;	author jdixon;	state Exp;
branches;
next	;

1.8.2.1
date	2013.05.01.07.03.59;	author jasper;	state Exp;
branches;
next	1.8.2.2;

1.8.2.2
date	2013.07.21.03.42.21;	author william;	state Exp;
branches;
next	;

1.16.2.1
date	2015.07.06.09.16.02;	author gsoares;	state Exp;
branches;
next	;
commitid	RtdxOZCrSfNAWoXL;

1.20.4.1
date	2015.10.24.14.34.46;	author ajacoutot;	state Exp;
branches;
next	;
commitid	n2UI0B9E25l0avQL;

1.27.2.1
date	2016.06.15.07.03.05;	author jasper;	state Exp;
branches;
next	;
commitid	IO2xCYYDKNVeBSqL;


desc
@@


1.40
log
@Unbreak after libressl change: remove direct access to field now private.
Similar to upstream changes for OpenSSL 1.1.0.  Not tested at run time.
ok danj@@ sthen@@
@
text
@# $OpenBSD: Makefile,v 1.39 2016/12/30 14:02:17 danj Exp $

COMMENT =	reliable, high performance TCP/HTTP load balancer

DISTNAME =	haproxy-1.6.11
REVISION =	0
CATEGORIES =	net www
HOMEPAGE =	http://www.haproxy.org/
MAINTAINER =	Daniel Jakots <obsd@@chown.me>

# GPLv2
PERMIT_PACKAGE_CDROM =		Yes

WANTLIB =	c crypto pcre pcreposix ssl

MASTER_SITES =	${HOMEPAGE}/download/1.6/src/

HAPROXYCONF =	${SYSCONFDIR}/haproxy
HAPROXYSTATE =	/var/haproxy
HAPROXYUID =	604
HAPROXYGID =	604
SUBST_VARS =	HAPROXYCONF HAPROXYSTATE \
		HAPROXYUID HAPROXYGID

USE_GMAKE =	Yes
MAKE_FLAGS +=	CFLAGS="${CFLAGS} -fno-strict-aliasing" LDFLAGS="${LDFLAGS}"
MAKE_FLAGS +=	CC="${CC}" LD="${CC}" TARGET="openbsd"
MAKE_FLAGS +=	USE_OPENSSL=1 USE_PCRE=1

# The shared SSL session cache needs either atomics ops unsupported on
# hppa or pthreads features unsupported on OpenBSD.
.if ${MACHINE_ARCH:Mhppa}
MAKE_FLAGS +=	USE_PRIVATE_CACHE=1
.endif

# Needs __sync_sub_and_fetch_4, __sync_lock_test_and_set_4, etc
MODULES =	gcc4
MODGCC4_ARCHS=	arm

LIB_DEPENDS =	devel/pcre

NO_TEST =	Yes

DOCS =		architecture configuration gpl lgpl
EXAMPLES =	acl-content-sw content-sw-sample option-http_proxy

DOCSDIR =	${PREFIX}/share/doc/haproxy
EXAMPLESDIR =	${PREFIX}/share/examples/haproxy


pre-install:
	${SUBST_CMD} ${WRKSRC}/doc/haproxy.1

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/haproxy ${PREFIX}/sbin
	${INSTALL_MAN} ${WRKSRC}/doc/haproxy.1 ${PREFIX}/man/man1/haproxy.1
	${INSTALL_DATA_DIR} ${DOCSDIR}
.for file in ${DOCS}
	${INSTALL_DATA} ${WRKSRC}/doc/${file}.txt ${DOCSDIR}
.endfor
	${INSTALL_DATA_DIR} ${EXAMPLESDIR}
.for file in ${EXAMPLES}
	${INSTALL_DATA} ${WRKSRC}/examples/${file}.cfg ${EXAMPLESDIR}
.endfor
	${INSTALL_DATA} ${FILESDIR}/haproxy.cfg ${EXAMPLESDIR}


.include <bsd.port.mk>
@


1.39
log
@Update to haproxy-1.6.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/12/29 14:05:08 jca Exp $
d6 1
@


1.38
log
@Needs __sync_sub_and_fetch_4 and friends, build with lang/gcc on arm.

ok danj (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/11/26 12:29:50 danj Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.10
@


1.37
log
@Move NO_TEST, and kill a trailing whitespace.

ok danj@@ (maintainer)
@
text
@d35 4
@


1.36
log
@Update to haproxy-1.6.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/09/27 17:04:58 danj Exp $
d35 2
a37 1
LIB_DEPENDS =	devel/pcre
d40 1
a40 1
EXAMPLES =	acl-content-sw content-sw-sample option-http_proxy 
@


1.35
log
@Make use of the accept4() API on OpenBSD.

From Brad, ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2016/08/31 17:50:39 danj Exp $
d5 1
a5 2
DISTNAME =	haproxy-1.6.9
REVISION =	0
@


1.34
log
@Update to haproxy-1.6.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2016/08/17 18:57:57 danj Exp $
d6 1
@


1.33
log
@Maintenance update to haproxy-1.6.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2016/08/01 17:30:50 danj Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.8
@


1.32
log
@update to haproxy-1.6.7

from David Carlier
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2016/06/27 18:41:11 danj Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.7
@


1.31
log
@update to haproxy-1.6.6

from David Carlier
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2016/06/15 06:55:58 jasper Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.6
@


1.30
log
@Security fix for CVE-2016-5360

ok danj@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2016/05/13 03:34:28 gonzalo Exp $
d5 1
a5 2
DISTNAME =	haproxy-1.6.5
REVISION =	0
@


1.29
log
@Update for Haproxy to 1.6.5 from David CARLIER

http://www.haproxy.org/download/1.6/src/CHANGELOG
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2016/03/18 12:41:26 jca Exp $
d6 1
@


1.28
log
@Update to haproxy-1.6.4, from David Carlier

ok Daniel Jakots (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/01/06 09:50:04 benoit Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.4
@


1.27
log
@Update to haproxy-1.6.3.

from David Carlier, ok maintainer Daniel Jakots.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2015/11/10 11:56:54 jca Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.3
@


1.27.2.1
log
@Security fix for CVE-2016-5360

ok danj@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2016/01/06 09:50:04 benoit Exp $
a5 1
REVISION =	0
@


1.26
log
@Maintainer update to haproxy-1.6.2

Upstream removed the example config file, this update adds a new,
simpler one.

Also fix a time_t printing warning while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20.4.1 2015/10/24 14:34:46 ajacoutot Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.6.2
@


1.25
log
@Update to haproxy-1.5.15, from maintainer Daniel Jakots.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/10/24 14:31:26 ajacoutot Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.5.15
d15 1
a15 1
MASTER_SITES =	${HOMEPAGE}/download/1.5/src/
d38 2
a39 3
DOCS =		architecture configuration gpl haproxy-en haproxy-fr lgpl
EXAMPLES =	acl-content-sw content-sw-sample haproxy \
			option-http_proxy tarpit url-switching
d46 1
a46 1
	${SUBST_CMD} ${WRKSRC}/doc/haproxy.1 ${WRKSRC}/examples/haproxy.cfg
d59 1
@


1.24
log
@Unbreak reloading haproxy.
rc_reload() appends '-sf pid' which broke the default pexp.

breakage reported by Alexandre Perrin via Daniel Jakots (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/09/08 18:35:41 jca Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.5.14
a8 1
REVISION =	0
@


1.23
log
@Add a comment about shared SSL session cache support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/09/08 18:28:50 jca Exp $
d9 1
@


1.22
log
@Disable the shared SSL session cache on hppa, and remove the BROKEN marker.

hppa lacks the atomic ops needed for this feature.  Other archs may be
good candidates too.

ok Daniel Jakots (maintainer), juanfra@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/09/07 22:20:52 juanfra Exp $
d29 2
@


1.21
log
@BROKEN-hppa = undefined reference to __sync atomic ops
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.20 2015/07/04 03:12:08 gsoares Exp $

BROKEN-hppa =	undefined reference to __sync atomic ops
d28 4
@


1.20
log
@SECURITY update to 1.5.14
(fixes an information leak vunerability CVE-2015-3281)

diff from Daniel Jakots (MAINAINER)
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2015/05/12 19:08:42 jca Exp $
@


1.20.4.1
log
@From current:
Unbreak reloading haproxy.
rc_reload() appends '-sf pid' which broke the default pexp.

breakage reported by Alexandre Perrin via Daniel Jakots (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/07/04 03:12:08 gsoares Exp $
a8 1
REVISION =	0
@


1.19
log
@Change maintainer mail address per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/05/08 10:02:07 benoit Exp $
d5 1
a5 2
DISTNAME =	haproxy-1.5.12
REVISION =	0
@


1.18
log
@Update to haproxy-1.5.12.

from new maintainer Daniel Jakots
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/04/20 14:02:34 gonzalo Exp $
d6 1
d9 1
a9 1
MAINTAINER =	Daniel Jakots <vigdis@@chown.me>
@


1.17
log
@Update for HAproxy to 1.5.11

With tweaks from Daniel Jakots (thanks!) and jca@@ (thanks!)

OK jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/10/31 13:43:59 gonzalo Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.5.11
d8 1
@


1.16
log
@Update for HAproxy to 1.5.6:

     - BUG/MEDIUM: systemd: set KillMode to 'mixed'
     - MINOR: systemd: Check configuration before start
     - BUG/MEDIUM: config: avoid skipping disabled proxies
     - BUG/MINOR: config: do not accept more track-sc than configured
     - BUG/MEDIUM: backend: fix URI hash when a query string is present


ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/09/11 14:47:20 gonzalo Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.5.6
d7 1
a7 1
HOMEPAGE =	http://haproxy.1wt.eu/
d12 1
a12 1
WANTLIB =	c pcre pcreposix
d24 3
a26 1
MAKE_FLAGS +=	CC="${CC}" LD="${CC}"
@


1.16.2.1
log
@SECURITY Fix for CVE-2015-3281
(fixes an information leak vunerabilty)

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/10/31 13:43:59 gonzalo Exp $
a5 1
REVISION = 	0
@


1.15
log
@Update for HAproxy to 1.5.3:

- DOC: fix typo in Unix Socket commands
- BUG/MEDIUM: connection: fix memory corruption when
  building a proxy v2 header
- BUG/MEDIUM: ssl: Fix a memory leak in DHE key exchange
- DOC: mention that Squid correctly responds 400 to PPv2
  header
- BUG/MINOR: http: base32+src should use the big endian
  version of base32
- BUG/MEDIUM: connection: fix proxy v2 header again!

Now use GMAKE.

Ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/05/12 12:34:52 gonzalo Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.5.3
@


1.14
log
@Update for HAproxy to 1.4.25:

http://haproxy.1wt.eu/download/1.4/src/CHANGELOG

OK benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/03/13 08:58:14 dcoppa Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.4.25
d14 1
a14 1
MASTER_SITES =	${HOMEPAGE}/download/1.4/src/
d23 1
a23 1
MAKE_FILE =	Makefile.bsd
@


1.13
log
@
Fix bogus path in the manual page.
From Kent Fritz, ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/07/17 02:52:53 william Exp $
d5 1
a5 2
DISTNAME =	haproxy-1.4.24
REVISION =	0
@


1.12
log
@SECURITY update to 1.4.24

- BUG/MAJOR: backend: consistent hash can loop forever in certain circumstances
- BUG/MEDIUM: checks: disable TCP quickack when pure TCP checks are used
- MEDIUM: protocol: implement a "drain" function in protocol layers
- BUG/CRITICAL: fix a possible crash when using negative header occurrences

Resolves CVE-2013-2175

ok gonzalo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/04/28 20:30:50 gonzalo Exp $
d6 1
@


1.11
log
@Update for Haproxy to 1.4.23.

Mostly bugfixes and last patch commited upstream.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/04/03 06:23:25 jasper Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.4.23
@


1.10
log
@Security fix for CVE-2013-1912, haproxy may crash on TCP content inspection rules

Patch from upstream git.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/11 11:35:47 espie Exp $
d5 1
a5 2
DISTNAME =	haproxy-1.4.22
REVISION =	0
@


1.9
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/10/30 19:40:19 gonzalo Exp $
d6 1
@


1.8
log
@Update for haproxy to 1.4.22:

    - BUG/MEDIUM: option forwardfor if-none doesn't work with some configurations
    - BUG/MINOR: checks: expire on timeout.check if smaller than timeout.connect
    - REORG/MINOR: use dedicated proxy flags for the cookie handling
    - BUG/MINOR: config: do not report twice the incompatibility between cookie and non-http
    - MINOR: contrib/iprange: add a network IP range to mask converter
    - BUG/MEDIUM: ebtree: ebmb_insert() must not call cmp_bits on full-length matches
    - OPTIM: halog: make use of memchr() on platforms which provide a fast one
    - OPTIM: halog: improve cold-cache behaviour when loading a file
    - MINOR: config: tolerate server "cookie" setting in non-HTTP mode
    - BUG/MINOR: tarpit: fix condition to return the HTTP 500 message

And others, while here remove for real the maintainer and add reload to rc.d(8) script.

Very initial update from chipitsine at gmail.com with tweaks by me. Thanks!

Ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/08/27 13:03:06 gonzalo Exp $
a10 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d26 1
a26 1
NO_REGRESS =	Yes
@


1.8.2.1
log
@Security fix for CVE-2013-1912, haproxy may crash on TCP content inspection rules
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/10/30 19:40:19 gonzalo Exp $
a5 1
REVISION =	0
@


1.8.2.2
log
@SECURITY FIX for CVE-2013-2175

from upstream.  ok jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8.2.1 2013/05/01 07:03:59 jasper Exp $
d6 1
a6 1
REVISION =	1
@


1.7
log
@Update for haproxy to 1.4.21 with some changes:

    - MINOR: stats admin: allow unordered parameters in POST requests
    - BUG/MAJOR: possible crash when using capture headers on TCP frontends
    - MINOR: config: disable header captures in TCP mode and complain
    - CLEANUP: http: message parser must ignore HTTP_MSG_ERROR
    - BUG/MAJOR: checks: don't call set_server_status_* when no LB algo is set
    - MINOR: proxy: make findproxy() return proxies from numeric IDs too
    - BUG/MINOR: stop connect timeout when connect succeeds

And others (http://haproxy.1wt.eu/download/1.4/src/CHANGELOG), while here GROFF is not needed,
add a rc.d(8) script and maintainer drop maintainership.

Tested on i386.

Ok sthen@@ (untested)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/19 22:31:33 espie Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.4.21
a8 2
MAINTAINER =	Jason Dixon <jdixon@@openbsd.org>

d24 1
a24 1
			HAPROXYUID HAPROXYGID
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/11 14:00:45 espie Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.3.15.7
d19 1
a19 1
MASTER_SITES =	${HOMEPAGE}/download/1.3/src/
a30 1
USE_GROFF =	Yes
@


1.5
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/10/18 18:36:48 espie Exp $
d33 1
a33 1
LIB_DEPENDS =	::devel/pcre
@


1.4
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/02/18 22:38:33 jdixon Exp $
d17 1
a17 1
WANTLIB =	c
d33 1
a33 1
LIB_DEPENDS =	pcre,pcreposix::devel/pcre
@


1.3
log
@Upgrade to 1.3.15.7.  Includes numerous bugfixes.  Tested by Dan Colish and maintainer on i386 and amd64 respectively, builds for merdely@@ on macppc.

ok merdely@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2008/09/17 13:54:54 ajacoutot Exp $
d31 1
@


1.2
log
@- TRUEPREFIX and LOCALBASE are already part of the default SUBST_VARS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2008/07/17 04:31:45 jdixon Exp $
d5 1
a5 1
DISTNAME =	haproxy-1.3.15.2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d25 1
a25 1
SUBST_VARS =	TRUEPREFIX HAPROXYCONF HAPROXYSTATE \
@


1.1.1.1
log
@HAProxy is a high-performance and highly-robust TCP/HTTP load balancer 
which provides cookie-based persistence, automatic failover, header 
insertion, deletion, modification on the fly, advanced logging contents 
to help troubleshoot buggy applications and/or networks, and a few other 
features.  It uses its own state machine to achieve up to ten thousands 
hits per second on modern hardware, even with thousands of simultaneous
connections.

feedback from merdely@@, okan@@, wcmaier@@
ok merdely@@ and pval@@
@
text
@@
