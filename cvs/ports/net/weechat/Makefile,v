head	1.31;
access;
symbols
	OPENBSD_6_2:1.31.0.2
	OPENBSD_6_2_BASE:1.31
	OPENBSD_6_1:1.28.0.2
	OPENBSD_6_1_BASE:1.28
	OPENBSD_6_0:1.25.0.2
	OPENBSD_6_0_BASE:1.25
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.19.0.4
	OPENBSD_5_8_BASE:1.19
	OPENBSD_5_7:1.17.0.2
	OPENBSD_5_7_BASE:1.17
	OPENBSD_5_6:1.14.0.4
	OPENBSD_5_6_BASE:1.14
	OPENBSD_5_5:1.14.0.2
	OPENBSD_5_5_BASE:1.14
	OPENBSD_5_4:1.12.0.2
	OPENBSD_5_4_BASE:1.12
	OPENBSD_5_3:1.10.0.2
	OPENBSD_5_3_BASE:1.10
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	sthen_20120626:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.31
date	2017.09.25.13.00.05;	author danj;	state Exp;
branches;
next	1.30;
commitid	mZwuiO1CC1pRHZml;

1.30
date	2017.08.14.19.34.29;	author danj;	state Exp;
branches;
next	1.29;
commitid	YPdCJSt5OquikFgm;

1.29
date	2017.04.23.14.33.50;	author danj;	state Exp;
branches;
next	1.28;
commitid	nF1nP91fCMs6dmxL;

1.28
date	2017.03.23.01.46.23;	author danj;	state Exp;
branches
	1.28.2.1;
next	1.27;
commitid	E3znGSXsom9a6fxU;

1.27
date	2017.03.17.07.15.01;	author ajacoutot;	state Exp;
branches;
next	1.26;
commitid	6J98V0hDnVHawvDu;

1.26
date	2016.09.06.15.37.53;	author jeremy;	state Exp;
branches;
next	1.25;
commitid	f4e36rZiISVWq78c;

1.25
date	2016.05.11.00.31.47;	author abieber;	state Exp;
branches;
next	1.24;
commitid	ejC772SAJToP1az8;

1.24
date	2016.03.20.16.12.25;	author naddy;	state Exp;
branches;
next	1.23;
commitid	guiZq8cnNbVyyHzx;

1.23
date	2016.01.11.15.11.31;	author abieber;	state Exp;
branches;
next	1.22;
commitid	XE38oaky8I9dHt0M;

1.22
date	2015.10.05.08.46.21;	author dcoppa;	state Exp;
branches;
next	1.21;
commitid	uo91mvvX2i4Wr8YU;

1.21
date	2015.09.03.17.44.13;	author sthen;	state Exp;
branches;
next	1.20;
commitid	77SQzig3qQtL1UTM;

1.20
date	2015.08.27.14.38.36;	author jeremy;	state Exp;
branches;
next	1.19;
commitid	5lvfuU0fXLEyjPVl;

1.19
date	2015.07.18.23.10.37;	author ajacoutot;	state Exp;
branches;
next	1.18;
commitid	YcGuunaXT1px2gUj;

1.18
date	2015.07.16.17.27.09;	author jeremy;	state Exp;
branches;
next	1.17;
commitid	wGOk1Dw0Jh0UvwX9;

1.17
date	2015.01.19.12.28.46;	author dcoppa;	state Exp;
branches;
next	1.16;
commitid	XEcjUNLM8cSVMUrU;

1.16
date	2014.10.08.13.46.16;	author nigel;	state Exp;
branches;
next	1.15;
commitid	uNt2wsIbrKRkvly6;

1.15
date	2014.09.27.17.07.20;	author jeremy;	state Exp;
branches;
next	1.14;
commitid	PKuB19aJCIZIWnal;

1.14
date	2013.11.19.13.11.03;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2013.11.14.22.30.29;	author fgsch;	state Exp;
branches;
next	1.12;

1.12
date	2013.06.03.20.35.23;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2013.03.11.11.35.58;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2013.01.25.08.42.08;	author jasper;	state Exp;
branches;
next	1.9;

1.9
date	2013.01.06.12.06.20;	author fgsch;	state Exp;
branches;
next	1.8;

1.8
date	2012.12.19.10.54.51;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2012.11.15.15.48.01;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2012.09.23.17.05.49;	author jeremy;	state Exp;
branches;
next	1.5;

1.5
date	2012.09.19.08.15.09;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.07.10.15.22.45;	author jasper;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2012.06.28.08.42.01;	author dcoppa;	state Exp;
branches;
next	1.2;

1.2
date	2012.06.26.16.56.54;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2012.06.26.15.06.42;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.06.26.15.06.42;	author sthen;	state Exp;
branches;
next	;

1.4.2.1
date	2012.11.15.15.48.05;	author jasper;	state Exp;
branches;
next	;

1.28.2.1
date	2017.04.23.14.35.55;	author danj;	state Exp;
branches;
next	1.28.2.2;
commitid	V58lByIZW1lq1NjG;

1.28.2.2
date	2017.09.25.13.01.52;	author danj;	state Exp;
branches;
next	;
commitid	0LkNzO3OcTZgzJ7H;


desc
@@


1.31
log
@Update to weechat-1.9.1, fixes CVE-2017-14727

Date/time conversion specifiers are expanded after replacing buffer
local variables in name of log files. In some cases, this can lead to
an error in function strftime and a crash caused by the use of an
uninitialized buffer.

ok jca@@, "that should go in" sthen@@
@
text
@# $OpenBSD: Makefile,v 1.30 2017/08/14 19:34:29 danj Exp $

COMMENT-main=	fast, light and extensible chat client
COMMENT-lua=	Lua bindings for weechat
COMMENT-python=	Python bindings for weechat
COMMENT-ruby=	Ruby bindings for weechat
COMMENT-tcl=	Tcl bindings for weechat

V=		1.9.1
DISTNAME=	weechat-${V}

PKGNAME-main=	weechat-${V}
PKGNAME-lua=	weechat-lua-${V}
PKGNAME-python=	weechat-python-${V}
PKGNAME-ruby=	weechat-ruby-${V}
PKGNAME-tcl=	weechat-tcl-${V}

CATEGORIES=	net

HOMEPAGE=	https://www.weechat.org/
MAINTAINER=	Daniel Jakots <obsd@@chown.me>

# GPLv3
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${HOMEPAGE}/files/src/

MULTI_PACKAGES=	-main -lua -python -ruby -tcl

WANTLIB-main=	c curl m ncursesw perl pthread \
		gcrypt gnutls gpg-error z ${MODGETTEXT_WANTLIB}

WANTLIB-lua=	${MODLUA_WANTLIB} m
WANTLIB-python=	${MODPY_WANTLIB}
WANTLIB-ruby=	${MODRUBY_WANTLIB}
WANTLIB-tcl=	${MODTCL_WANTLIB}

MODULES=	devel/cmake \
		devel/gettext \
		lang/lua \
		lang/python \
		lang/ruby \
		lang/tcl

MODLUA_RUNDEP=	No
MODPY_RUNDEP=	No
MODRUBY_RUNDEP=	No

LIB_DEPENDS=	security/libgcrypt \
		security/gnutls \
		net/curl

LIB_DEPENDS-lua=	${MODLUA_LIB_DEPENDS}
RUN_DEPENDS-lua=	net/weechat,-main ${MODLUA_RUN_DEPENDS}

LIB_DEPENDS-python=	${MODPY_LIB_DEPENDS}
RUN_DEPENDS-python=	net/weechat,-main ${MODPY_RUN_DEPENDS}

LIB_DEPENDS-ruby=	${MODRUBY_LIB_DEPENDS}
RUN_DEPENDS-ruby=	net/weechat,-main ${MODRUBY_RUN_DEPENDS}

LIB_DEPENDS-tcl=	${MODTCL_LIB_DEPENDS}
RUN_DEPENDS-tcl=	net/weechat,-main ${MODTCL_RUN_DEPENDS}

CONFIGURE_ARGS+=-DENABLE_ASPELL=no \
		-DENABLE_GUILE=no \
		-DENABLE_RUBY=yes \
		-DENABLE_LUA=yes \
		-DENABLE_TCL=yes \
		-DENABLE_PYTHON=yes \
		-DENABLE_JAVASCRIPT=no \
		-DHAVE_BACKTRACE=no \
		-DCA_FILE=/etc/ssl/cert.pem \
		-DTCL_TCLSH=${MODTCL_BIN} \
		-DTCL_INCLUDE_PATH=${MODTCL_INCDIR} \
		-DMODTCL_LIB=${MODTCL_LIB}

pre-configure:
	rm -f ${WRKSRC}/cmake/FindLua.cmake \
		${WRKSRC}/cmake/FindRuby.cmake \
		${WRKSRC}/cmake/FindTCL.cmake

post-install:
	$(INSTALL_DATA_DIR) ${PREFIX}/share/doc/weechat
	$(INSTALL_DATA) $(WRKSRC)/doc/en/weechat_*.en.adoc \
	${PREFIX}/share/doc/weechat/

NO_TEST=	Yes

.include <bsd.port.mk>
@


1.30
log
@Update to weechat-1.9

Announcement of 1.8 says you should read release notes:
https://weechat.org/files/releasenotes/ReleaseNotes-1.8.html

tested by semarie, ok rsadowski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2017/04/23 14:33:50 danj Exp $
d9 1
a9 1
V=		1.9
@


1.29
log
@Security update to weechat-1.7.1
Fix a buffer overflow when removing quotes in DCC filename.

Tested by semarie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/03/23 01:46:23 danj Exp $
d9 1
a9 1
V=		1.7.1
a72 2
		-DMANDIR=${PREFIX}/man \
		-DENABLE_MAN=on \
d86 1
a86 1
	    ${PREFIX}/share/doc/weechat/
@


1.28
log
@Update to weechat-1.7 and take maintainership

Tweaks from abieber@@ and tested by semarie
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2017/03/17 07:15:01 ajacoutot Exp $
d9 1
a9 1
V=		1.7
@


1.28.2.1
log
@Security update to weechat-1.7.1
Fix a buffer overflow when removing quotes in DCC filename.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/03/23 01:46:23 danj Exp $
d9 1
a9 1
V=		1.7.1
@


1.28.2.2
log
@Backport fix for CVE-2017-14727

Date/time conversion specifiers are expanded after replacing buffer
local variables in name of log files. In some cases, this can lead to
an error in function strftime and a crash caused by the use of an
uninitialized buffer.

ok jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28.2.1 2017/04/23 14:35:55 danj Exp $
a10 1
REVISION=	0
@


1.27
log
@Drop MAINTAINER per his request.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/09/06 15:37:53 jeremy Exp $
d9 1
a9 1
V=		1.5
a17 6
REVISION-main =	0
REVISION-lua =	0
REVISION-python = 0
REVISION-ruby =	1
REVISION-tcl =	0

d20 2
a21 1
HOMEPAGE=	http://www.weechat.org/
d30 1
a30 1
WANTLIB-main=	c curl m ncursesw perl pthread util \
a48 1
BUILD_DEPENDS =	textproc/asciidoc
d87 1
a87 1
	$(INSTALL_DATA) $(WRKSRC)/doc/en/weechat_*.en.asciidoc \
@


1.26
log
@Bump ruby dependent ports after default ruby version switch from ruby
2.2 to ruby 2.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2016/05/11 00:31:47 abieber Exp $
d18 5
a22 1
REVISION-ruby =	0
a26 2

MAINTAINER=	Eric Lalonde <eric.c.lalonde@@gmail.com>
@


1.25
log
@Update from MAINTAINER: Eric Lalonde <eric.c.lalonde@@gmail.com>

net/weechat has been updated to 1.5.0. Changes include Portuguese
support, detection of ruby 2.3, and 16 bugfixes. Full changelog is
available at: https://weechat.org/files/changelog/ChangeLog-1.5.html

OK lteo@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/03/20 16:12:25 naddy Exp $
d17 2
@


1.24
log
@drop SHARED_ONLY from python and ruby ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2016/01/11 15:11:31 abieber Exp $
d9 1
a9 1
V=		1.4
@


1.23
log
@Update from MAINTAINER Eric Lalonde <eric.c.lalonde@@gmail.com>.

Changes include fixes for memleaks, better tmux support, character
set decoding, improved UTF-8 support.

Additionally, new features are listed at
https://weechat.org/files/changelog/ChangeLog-1.4.html

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/10/05 08:46:21 dcoppa Exp $
a22 2

SHARED_ONLY=	Yes
@


1.22
log
@
Fix cyclical dependency error

fallout from upcoming ninja-1.6.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/09/03 17:44:13 sthen Exp $
d9 1
a9 1
V=		1.3
@


1.21
log
@update to weechat-1.3, from new maintainer Eric Lalonde
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/08/27 14:38:36 jeremy Exp $
d85 1
a85 1
	rm ${WRKSRC}/cmake/FindLua.cmake \
@


1.20
log
@Bump affected ports after change to MODRUBY_WANTLIB

Help from and OK nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2015/07/18 23:10:37 ajacoutot Exp $
d9 1
a9 1
V=		1.2
a17 2
REVISION-ruby=	0

d22 2
d75 1
@


1.19
log
@Update to weechat-1.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/07/16 17:27:09 jeremy Exp $
d17 2
@


1.18
log
@Switch the default ruby version from ruby 2.1 to 2.2, and bump affected
ports.

OK jcs@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/01/19 12:28:46 dcoppa Exp $
d9 1
a9 1
V=		1.1
a17 2
REVISION-ruby=	0

d36 1
a36 1
WANTLIB-ruby=	${MODRUBY_WANTLIB} gmp m pthread
d61 1
a61 2
LIB_DEPENDS-ruby=	${MODRUBY_LIB_DEPENDS} \
			devel/gmp
@


1.17
log
@
Update to weechat 1.1

Based on a diff by Henrik Friedrichsen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2014/10/08 13:46:16 nigel Exp $
d17 2
@


1.16
log
@update to weechat 1.0.1 ruby 2.1 supported.

Ok jeremy@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2014/09/27 17:07:20 jeremy Exp $
d9 1
a9 1
V=		1.0.1
d34 1
a34 1
WANTLIB-lua=	${MODLUA_WANTLIB}
d81 5
@


1.15
log
@Use default version of ruby instead of ruby 1.9 for ruby subpackage.

OK sthen@@ ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/11/19 13:11:03 sthen Exp $
d9 1
a9 1
V=		0.4.2
a12 1
REVISION-main=	0
a15 1
REVISION-ruby=	0
d36 1
a36 1
WANTLIB-ruby=	${MODRUBY_WANTLIB}
d56 1
a56 1
RUN_DEPENDS-lua=	${MODLUA_RUN_DEPENDS}
d59 1
a59 1
RUN_DEPENDS-python=	${MODPY_RUN_DEPENDS}
d61 3
a63 2
LIB_DEPENDS-ruby=	${MODRUBY_LIB_DEPENDS}
RUN_DEPENDS-ruby=	${MODRUBY_RUN_DEPENDS}
d66 1
a66 1
RUN_DEPENDS-tcl=	${MODTCL_RUN_DEPENDS}
d77 4
a80 1
		-DCA_FILE=/etc/ssl/cert.pem
d84 1
a84 1
	$(INSTALL_DATA) $(WRKSRC)/doc/en/weechat_*.en.txt \
@


1.14
log
@missed bump; the package did previously (sometimes) build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/11/14 22:30:29 fgsch Exp $
d17 1
a50 1
MODRUBY_REV=	1.9
@


1.13
log
@update to weechat 0.4.2.
from Simon Kuhnle with minor tweaks
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/06/03 20:35:23 sthen Exp $
d13 1
@


1.12
log
@update to 0.4.1, from Simon Kuhnle, bikeshedding about the icon file from me
and bcallah ;)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/03/11 11:35:58 espie Exp $
d9 1
a9 1
V=		0.4.1
d51 1
d75 3
a77 1
		-DMANDIR=${PREFIX}/man
d81 2
a82 1
	$(INSTALL_DATA) $(WRKSRC)/doc/en/*.en.txt ${PREFIX}/share/doc/weechat/
@


1.11
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/01/25 08:42:08 jasper Exp $
d9 1
a9 1
V=		0.4.0
@


1.10
log
@- update to weechat-0.4.0

from Simon Kuhnle
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/01/06 12:06:20 fgsch Exp $
a25 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d80 1
a80 1
NO_REGRESS=	Yes
@


1.9
log
@point weechat to the correct cert file.  bump revision.
sthen@@ ajacoutot@@ dcoppa@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/12/19 10:54:51 jasper Exp $
d9 1
a9 1
V=		0.3.9.2
a16 2

REVISION-main =	0
@


1.8
log
@- update to weechat-0.3.9.2

from Simon Kuhnle
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/11/15 15:48:01 jasper Exp $
d17 2
@


1.7
log
@Security fix for CVE-2012-5854:
weechat: Heap-based buffer overflow when decoding IRC colors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/09/23 17:05:49 jeremy Exp $
d9 1
a9 1
V=		0.3.8
a12 1
REVISION-main=	3
a13 1
REVISION-lua=	1
a14 1
REVISION-python=0
a15 1
REVISION-ruby=	1
a16 1
REVISION-tcl=	0
d76 2
a77 1
		-DHAVE_BACKTRACE=no
@


1.6
log
@Switch ruby plugin to use ruby 1.9 instead of ruby 1.8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/09/19 08:15:09 jasper Exp $
d13 1
a13 1
REVISION-main=	2
@


1.5
log
@sync after recent lua.port.mk change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/07/10 15:22:45 jasper Exp $
d19 1
a19 1
REVISION-ruby=	0
d57 1
@


1.4
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/06/28 08:42:01 dcoppa Exp $
d13 1
a13 1
REVISION-main=	1
d15 1
a15 1
REVISION-lua=	0
d17 1
d19 1
d21 1
@


1.4.2.1
log
@Security fix for CVE-2012-5854:
weechat: Heap-based buffer overflow when decoding IRC colors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/07/10 15:22:45 jasper Exp $
d13 1
a13 1
REVISION-main=	2
@


1.3
log
@Remove security/libgpg-error from LIB_DEPENDS, it's already pulled
in by security/libgcrypt

Ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/06/26 16:56:54 sthen Exp $
d15 1
@


1.2
log
@fix WANTLIB etc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/06/26 15:06:42 sthen Exp $
d13 1
a13 1
REVISION-main=	0
a55 1
		security/libgpg-error \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d13 1
d35 2
a36 1
WANTLIB-main=	c m ncursesw perl pthread util gcrypt gnutls gpg-error iconv intl
d56 2
a57 1
		security/libgpg-error
@


1.1.1.1
log
@import ports/net/weechat, from Simon Kuhnle based on a port
from Jona Joachim, ok landry@@.

WeeChat (Wee Enhanced Environment for Chat) is a fast and light chat
environment for many operating systems. Everything can be done with a
keyboard. It is customizable and extensible with scripts.
@
text
@@
