head	1.13;
access;
symbols
	OPENBSD_6_0:1.13.0.8
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.13.0.4
	OPENBSD_5_9_BASE:1.13
	OPENBSD_5_8:1.13.0.6
	OPENBSD_5_8_BASE:1.13
	OPENBSD_5_7:1.13.0.2
	OPENBSD_5_7_BASE:1.13
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.8.0.2
	OPENBSD_5_3_BASE:1.8
	OPENBSD_5_2:1.7.0.2
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.4
	OPENBSD_5_0:1.6.0.2
	OPENBSD_5_0_BASE:1.6
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.1.1.1.0.4
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	edd_20091027:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2014.12.05.16.07.56;	author gonzalo;	state Exp;
branches;
next	1.12;
commitid	kRbzCLfFlB2VafW6;

1.12
date	2014.05.05.13.03.33;	author gonzalo;	state Exp;
branches;
next	1.11;

1.11
date	2013.09.25.07.58.45;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2013.06.04.18.41.55;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2013.03.11.11.35.58;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2012.09.27.13.17.12;	author gonzalo;	state Exp;
branches;
next	1.7;

1.7
date	2012.03.29.13.38.49;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2011.07.08.20.38.01;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2011.05.11.12.03.20;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.11.19.22.31.39;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2010.11.11.17.20.28;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2010.10.18.18.37.00;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.27.16.46.10;	author edd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.10.27.16.46.10;	author edd;	state Exp;
branches;
next	;


desc
@@


1.13
log
@Update for Ziproxy to 3.3.1

OK aja@@
@
text
@# $OpenBSD: Makefile,v 1.12 2014/05/05 13:03:33 gonzalo Exp $

COMMENT =		compressing non-caching HTTP proxy

DISTNAME =		ziproxy-3.3.1
EXTRACT_SUFX =		.tar.bz2

CATEGORIES =		net www

HOMEPAGE =		http://ziproxy.sourceforge.net/

MAINTAINER =		Gonzalo L. R. <gonzalo@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB +=		c m pthread z gif>=6 png>=8 jpeg>=62 jasper>=2
WANTLIB +=		sasl2

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=ziproxy/}

LIB_DEPENDS =		graphics/giflib \
			graphics/png \
			graphics/jpeg \
			graphics/jasper \
			security/cyrus-sasl2

SEPARATE_BUILD =	Yes

CONFIGURE_STYLE =	gnu

CPPFLAGS =		-I${LOCALBASE}/include

CONFIGURE_ARGS =	--with-jasper=${LOCALBASE}

CONFIGURE_ENV =		LDFLAGS="-L${LOCALBASE}/lib" \
			CPPFLAGS="${CPPFLAGS}"

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ziproxy
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ziproxy/sasl
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ziproxy
	${INSTALL_DATA} ${WRKSRC}/src/tools/ziproxy_genhtml_stats.sh \
		${WRKSRC}/etc/ziproxy/*.list \
		${WRKSRC}/etc/ziproxy/http.passwd \
		${WRKSRC}/etc/ziproxy/ziproxy.conf \
		${PREFIX}/share/examples/ziproxy
	${INSTALL_DATA} ${WRKSRC}/etc/ziproxy/sasl/ziproxy.conf \
		${PREFIX}/share/examples/ziproxy/sasl
.for i in COPYING CREDITS JPEG2000* README*
	${INSTALL_DATA} ${WRKSRC}/$i ${PREFIX}/share/doc/ziproxy
.endfor

.include <bsd.port.mk>
@


1.12
log
@Update for Ziproxy to 3.3.0.

Ok benoit@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/09/25 07:58:45 sthen Exp $
d5 1
a5 1
DISTNAME =		ziproxy-3.3.0
@


1.11
log
@libungif->giflib and patch where necessary, ok jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/06/04 18:41:55 naddy Exp $
d5 1
a5 2
DISTNAME =		ziproxy-3.2.1
REVISION =		0
@


1.10
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/03/11 11:35:58 espie Exp $
d6 1
d18 1
a18 1
WANTLIB +=		c m pthread z gif>=5 png>=8 jpeg>=62 jasper>=2
d23 1
a23 1
LIB_DEPENDS =		graphics/libungif \
@


1.9
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/09/27 13:17:12 gonzalo Exp $
d32 1
a32 1
CPPFLAGS =		-I${LOCALBASE}/include -I${LOCALBASE}/include/libpng
@


1.8
log
@Update for Ziproxy to 3.2.1:

* Changed HTTP authentication code to a modular one.
* Added SASL support for HTTP authentication.
* Fixed compilation issues with libpng 1.5.x.

And other, while here GROFF is not needed, change
configure style, add rc.d(8) script, and edd@@ drop
maintership, I take care of this now.

Tested on amd64 and i386.

Ok edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/03/29 13:38:49 sthen Exp $
a15 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.7
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/07/08 20:38:01 naddy Exp $
d5 2
a6 3
DISTNAME =	 	ziproxy-2.7.2
REVISION =		0
EXTRACT_SUFX = 		.tar.bz2
d12 1
a12 1
MAINTAINER = 		Edd Barrett <edd@@openbsd.org>
d20 2
a21 1
WANTLIB += 		c m pthread z gif>=5 png>=8 jpeg>=62 jasper>=2
d28 2
a29 1
			graphics/jasper
d33 1
a33 3
CONFIGURE_STYLE =	autoconf
AUTOCONF_VERSION =	2.61
USE_GROFF =		Yes
d37 1
a37 1
CONFIGURE_ARGS = 	--with-jasper=${LOCALBASE}
d39 1
a39 1
CONFIGURE_ENV = 	LDFLAGS="-L${LOCALBASE}/lib" \
d44 1
d47 6
a52 1
	    ${WRKSRC}/etc/ziproxy/* ${PREFIX}/share/examples/ziproxy
@


1.6
log
@Fix build with png-1.5.
All fixes by yours truly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2011/05/11 12:03:20 jasper Exp $
d30 1
a30 1
SEPARATE_BUILD =	concurrent
@


1.5
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/11/19 22:31:39 espie Exp $
d32 2
a33 1
CONFIGURE_STYLE =	gnu
@


1.4
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/11/11 17:20:28 espie Exp $
d6 1
@


1.3
log
@finish net WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/10/18 18:37:00 espie Exp $
d20 1
a20 1
WANTLIB += 		c m pthread z gif.>=5 png.>=8 jpeg.>=62 jasper.>=2
d24 4
a27 4
LIB_DEPENDS =		::graphics/libungif \
			::graphics/png \
			::graphics/jpeg \
			::graphics/jasper
@


1.2
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/10/27 16:46:10 edd Exp $
d20 1
a20 1
WANTLIB += 		c m pthread z
d24 4
a27 4
LIB_DEPENDS =		gif.>=5::graphics/libungif \
			png.>=8::graphics/png \
			jpeg.>=62::graphics/jpeg \
			jasper.>=2::graphics/jasper
d32 1
a32 1
USE_GROFF =	Yes
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.55 2008/08/23 15:28:00 ajacoutot Exp $
d32 1
@


1.1.1.1
log
@import ziproxy

Ziproxy is forwarding, non-caching, compressing HTTP proxy server.
Basically it squeezes images by converting them to lower quality JPEGs
or JPEG 2000 and compresses (gzip) HTML and other text-like data.  It
also provides other features such as: HTML/JS/CSS optimization,
preemptive hostname resolution, transparent proxying and more.

OK sthen@@

@
text
@@
