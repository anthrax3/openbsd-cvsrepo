head	1.2;
access;
symbols
	OPENBSD_4_4:1.1.0.4
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.12.01.16.09.01;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2007.11.06.12.14.18;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- major bugfix release to gftp-2.0.19
Improvements to the networking code, fixes for several segfaults, i18n
fixes, and 38 updated or new translations.
- IPv6 is still disabled (thanks to sthen@@ for confirming it still
doesn't work properly...) ; any taker to fix it, be my guest
@
text
@$OpenBSD: patch-lib_fsplib_fsplib_h,v 1.1 2007/11/06 12:14:18 ajacoutot Exp $
--- lib/fsplib/fsplib.h.orig	Tue Nov  6 13:07:24 2007
+++ lib/fsplib/fsplib.h	Tue Nov  6 13:08:21 2007
@@@@ -1,6 +1,7 @@@@
 #ifndef _FSPLIB_H
 #define _FSPLIB_H 1
 #include <time.h>
+#include <stddef.h>
 /* The FSP v2 protocol support library - public interface */
 
 /*
@@@@ -137,6 +138,13 @@@@ typedef struct FSP_FILE {
 		      int bufpos;                /* position in buffer */
 		      unsigned int pos;          /* position of next packet */
 } FSP_FILE;
+
+
+typedef union dirent_workaround {
+      struct dirent dirent;
+      char fill[offsetof (struct dirent, d_name) + MAXNAMLEN + 1];
+} dirent_workaround;
+ 
 
 /* function prototypes */
 
@


1.1
log
@- SECURITY: fix two boundary errors in fsplib code when processing
overly long directory or file names (CVE-2007-3961 & CVE-2007-3962
from Gentoo CVS via FreeBSD
- regen patches while here
@
text
@d1 1
a1 1
$OpenBSD$
@

