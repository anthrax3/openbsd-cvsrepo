head	1.1;
access;
symbols;
locks; strict;
comment	@# @;


1.1
date	2017.03.28.18.49.53;	author jca;	state Exp;
branches;
next	;
commitid	QQtLWa3VtpuIrh8M;


desc
@@


1.1
log
@Update to mosh-1.3.0

Among other improvements and bugfixes, add pledge support and allow
regress tests to run.  Tested by a few since -rc2, ok tb@@
@
text
@$OpenBSD$
--- src/tests/e2e-test-subrs.orig	Sun Mar 26 21:04:29 2017
+++ src/tests/e2e-test-subrs	Mon Mar 27 05:57:13 2017
@@@@ -59,19 +59,6 @@@@ chr()
 # or C.UTF-8.
 set_locale()
 {
-    # Test for a usable locale.
-    map=$(locale charmap 2>/dev/null)
-    if [ "$map" = "utf-8" ] || [ "$map" = "UTF-8" ]; then
-	return 0
-    fi
-    # Attempt to find/set a usable locale.
-    for i in en_US.UTF-8 en_US.utf8 C.UTF-8; do
-	map="$(env LANG=$i locale charmap 2>/dev/null)"
-	if [ "$map" = "utf-8" ] || [ "$map" = "UTF-8" ]; then
-	    export LANG=$i LC_ALL=''
-	    return 0
-	fi
-    done
-    # Fail.
-    return 1
+    export LANG=en_US.UTF-8
+    return 0
 }
@
