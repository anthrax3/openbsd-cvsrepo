head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.04.22.10.01.01;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2013.11.02.15.55.53;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2011.10.26.16.59.34;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2011.04.02.06.15.11;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Remove opal. Nothing uses it anymore and it never played well with rthreads.
@
text
@$OpenBSD: patch-plugins_video_MPEG4-ffmpeg_Makefile_in,v 1.3 2013/11/02 15:55:53 ajacoutot Exp $

Fix compilation/runtime with ffmpeg 0.11 (Arch Linux):
https://projects.archlinux.org/svntogit/packages.git/tree/trunk/opal-ffmpeg.patch?h=packages/opal

--- plugins/video/MPEG4-ffmpeg/Makefile.in.orig	Thu Aug 15 01:22:47 2013
+++ plugins/video/MPEG4-ffmpeg/Makefile.in	Sat Nov  2 16:28:49 2013
@@@@ -31,7 +31,7 @@@@ SRCDIR    := .
 SRCS      := mpeg4.cxx $(COMMONDIR)/dyna.cxx
 
 CFLAGS += @@LIBAVCODEC_CFLAGS@@ -I$(COMMONDIR)
-LIBS   += @@DL_LIBS@@
+LIBS   += @@DL_LIBS@@ @@LIBAVUTIL_LIBS@@
 
 # Add LIBAVCODEC_SOURCE_DIR to the include path so we can #include <libavcodec/...h>
 # Also add libavutil, so ffmpeg headers can #include "log.h".
@


1.3
log
@Fix unresolved symbols with newer FFmpeg (from Arch Linux).
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Major update to opal-3.10.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_video_MPEG4-ffmpeg_Makefile_in,v 1.1 2011/04/02 06:15:11 ajacoutot Exp $
d3 2
a4 2
C++ code needs to define __STDC_CONSTANT_MACROS to pull in parts of
stdint.h (needed by graphics/ffmpeg).
d6 8
a13 3
--- plugins/video/MPEG4-ffmpeg/Makefile.in.orig	Thu Mar 31 23:49:44 2011
+++ plugins/video/MPEG4-ffmpeg/Makefile.in	Thu Mar 31 23:50:23 2011
@@@@ -76,7 +76,7 @@@@ LIBAVCODEC_SOURCE_DIR = @@LIBAVCODEC_SOURCE_DIR@@
a16 5
-EXTRACCFLAGS    += $(LIBAVCODEC_CFLAGS) -I$(COMMONDIR) -I$(PLUGINDIR)
+EXTRACCFLAGS    += $(LIBAVCODEC_CFLAGS) -I$(COMMONDIR) -I$(PLUGINDIR) -D__STDC_CONSTANT_MACROS
 
 ifneq (,$(LIBAVCODEC_SOURCE_DIR))
 EXTRACCFLAGS    += -I$(LIBAVCODEC_SOURCE_DIR) -I$(LIBAVCODEC_SOURCE_DIR)/libavutil
@


1.1
log
@C++ code needs to define __STDC_CONSTANT_MACROS to pull in parts of
stdint.h. Necessary to be able to remove a hack in the FFmpeg port coming
up.

from Brad
@
text
@d1 1
a1 1
$OpenBSD$
@

