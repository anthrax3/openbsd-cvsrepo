head	1.11;
access;
symbols
	OPENBSD_5_5:1.10.0.4
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.7.0.2
	OPENBSD_5_2_BASE:1.7
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.4.0.2
	OPENBSD_5_0_BASE:1.4
	OPENBSD_4_9:1.3.0.4
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.2
	OPENBSD_4_8_BASE:1.3;
locks; strict;
comment	@# @;


1.11
date	2014.04.22.10.01.01;	author ajacoutot;	state dead;
branches;
next	1.10;

1.10
date	2013.03.12.05.19.57;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2012.11.27.08.13.15;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2012.08.25.13.17.54;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.03.02.09.04.21;	author ajacoutot;	state Exp;
branches;
next	1.6;

1.6
date	2011.11.13.15.53.14;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2011.10.26.16.59.34;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2011.04.01.06.52.47;	author jakemsr;	state Exp;
branches;
next	1.3;

1.3
date	2010.05.31.06.31.39;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.27.14.41.16;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.23.21.13.37;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Remove opal. Nothing uses it anymore and it never played well with rthreads.
@
text
@$OpenBSD: patch-plugins_configure,v 1.10 2013/03/12 05:19:57 brad Exp $
--- plugins/configure.orig	Tue Feb 19 21:18:10 2013
+++ plugins/configure	Mon Mar 11 19:55:41 2013
@@@@ -6481,7 +6481,7 @@@@ $as_echo "#define PLUGIN_CODEC_DLL_EXPORTS 1" >>confde
 
         *)
           CFLAGS="$CFLAGS -fPIC"
-          LDSO='-shared -Wl,-soname,$(SONAME)'
+          LDSO='-shared -fPIC'
           PLUGINEXT=so
           for ac_header in sys/time.h sys/file.h netinet/in.h
 do :
@@@@ -7000,7 +7000,7 @@@@ else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
-            #include <gsm/gsm.h>
+            #include <gsm.h>
 
 int
 main ()
@@@@ -7026,7 +7026,7 @@@@ fi
 $as_echo "$opal_gsm" >&6; }
 
             if test "x${opal_gsm}" = "xyes" ; then
-              GSM_CFLAGS="-I/usr/include/gsm -I/usr/local/include/gsm"
+              GSM_CFLAGS="-I${LOCALBASE}/include"
               GSM_LIBS="-lgsm"
             fi
 
@@@@ -7107,7 +7107,7 @@@@ else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
-            #include <gsm/gsm.h>
+            #include <gsm.h>
 
 int
 main ()
@@@@ -7133,7 +7133,7 @@@@ fi
 $as_echo "$opal_gsm" >&6; }
 
             if test "x${opal_gsm}" = "xyes" ; then
-              GSM_CFLAGS="-I/usr/include/gsm -I/usr/local/include/gsm"
+              GSM_CFLAGS="-I${LOCALBASE}/include"
               GSM_LIBS="-lgsm"
             fi
 
@


1.10
log
@Correct shared lib creation for OpenBSD.


ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_configure,v 1.9 2012/11/27 08:13:15 ajacoutot Exp $
@


1.9
log
@Update to opal-3.10.9.
@
text
@d1 3
a3 3
$OpenBSD: patch-plugins_configure,v 1.8 2012/08/25 13:17:54 ajacoutot Exp $
--- plugins/configure.orig	Mon Nov 26 11:48:31 2012
+++ plugins/configure	Tue Nov 27 08:23:29 2012
d9 1
a9 1
+          LDSO='-shared -fPIC -Wl,-soname,$(SONAME)'
@


1.8
log
@Update to opal-3.10.7.
@
text
@d1 4
a4 4
$OpenBSD: patch-plugins_configure,v 1.7 2012/03/02 09:04:21 ajacoutot Exp $
--- plugins/configure.orig	Thu Aug 23 04:18:47 2012
+++ plugins/configure	Fri Aug 24 08:24:54 2012
@@@@ -6473,7 +6473,7 @@@@ $as_echo "#define PLUGIN_CODEC_DLL_EXPORTS 1" >>confde
d13 1
a13 1
@@@@ -6993,7 +6993,7 @@@@ else
d22 1
a22 1
@@@@ -7019,7 +7019,7 @@@@ fi
d31 1
a31 1
@@@@ -7100,7 +7100,7 @@@@ else
d40 1
a40 1
@@@@ -7126,7 +7126,7 @@@@ fi
@


1.7
log
@Update to opal-3.10.4.
@
text
@d1 4
a4 4
$OpenBSD: patch-plugins_configure,v 1.6 2011/11/13 15:53:14 ajacoutot Exp $
--- plugins/configure.orig	Wed Feb 22 00:08:24 2012
+++ plugins/configure	Fri Mar  2 09:12:25 2012
@@@@ -6482,7 +6482,7 @@@@ $as_echo "#define PLUGIN_CODEC_DLL_EXPORTS 1" >>confde
d13 1
a13 1
@@@@ -6976,7 +6976,7 @@@@ else
d22 1
a22 1
@@@@ -7002,7 +7002,7 @@@@ fi
d31 1
a31 1
@@@@ -7083,7 +7083,7 @@@@ else
d40 1
a40 1
@@@@ -7109,7 +7109,7 @@@@ fi
@


1.6
log
@Use SUBST_CMD now that nigel@@ fixed Subst.pm.
@
text
@d1 4
a4 4
$OpenBSD: patch-plugins_configure,v 1.5 2011/10/26 16:59:34 ajacoutot Exp $
--- plugins/configure.orig	Fri Oct 14 09:00:00 2011
+++ plugins/configure	Mon Oct 24 18:35:23 2011
@@@@ -6479,7 +6479,7 @@@@ $as_echo "#define PLUGIN_CODEC_DLL_EXPORTS 1" >>confde
d13 1
a13 1
@@@@ -6973,7 +6973,7 @@@@ else
d22 1
a22 1
@@@@ -6999,7 +6999,7 @@@@ fi
d31 1
a31 1
@@@@ -7080,7 +7080,7 @@@@ else
d40 1
a40 1
@@@@ -7106,7 +7106,7 @@@@ fi
@


1.5
log
@Major update to opal-3.10.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-plugins_configure,v 1.4 2011/04/01 06:52:47 jakemsr Exp $
d27 1
a27 1
+              GSM_CFLAGS="-I!!LOCALBASE!!/include"
d45 1
a45 1
+              GSM_CFLAGS="-I!!LOCALBASE!!/include"
@


1.4
log
@fix ffmpeg support which broke with the recent ffmpeg update

ok ajacoutot@@ (MAINTAINER)
@
text
@d1 4
a4 15
$OpenBSD: patch-plugins_configure,v 1.3 2010/05/31 06:31:39 ajacoutot Exp $
--- plugins/configure.orig	Wed May 26 23:52:49 2010
+++ plugins/configure	Thu Mar 31 19:18:03 2011
@@@@ -2830,6 +2830,10 @@@@ fi
                  opal_release_flags="-O3 -DSOLARIS"
                  opal_debug_flags="-g -D_DEBUG -DSOLARIS"
                ;;
+               openbsd*)
+                 opal_release_flags=""
+                 opal_debug_flags="-g3 -ggdb -O0 -D_DEBUG"
+               ;;
                *)
                  opal_release_flags="-Os"
                  opal_debug_flags="-g3 -ggdb -O0 -D_DEBUG"
@@@@ -5347,7 +5351,7 @@@@ $as_echo "#define PLUGIN_CODEC_DLL_EXPORTS 1" >>confde
d7 1
a7 1
           STDCCFLAGS="$STDCCFLAGS -fPIC"
d13 7
a19 19
@@@@ -6521,9 +6525,9 @@@@ $as_echo "$as_me: libavcodec stack align hack disabled
                                          HAVE_H264_DECODER=yes
                                          ;;
                                      * )
-                                         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for h263p_encoder in -lavcodec" >&5
-$as_echo_n "checking for h263p_encoder in -lavcodec... " >&6; }
-if test "${ac_cv_lib_avcodec_h263p_encoder+set}" = set; then :
+                                         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ff_h263p_encoder in -lavcodec" >&5
+$as_echo_n "checking for ff_h263p_encoder in -lavcodec... " >&6; }
+if test "${ac_cv_lib_avcodec_ff_h263p_encoder+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@@@ -6537,35 +6541,35 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 #ifdef __cplusplus
 extern "C"
 #endif
-char h263p_encoder ();
+char ff_h263p_encoder ();
d22 16
a37 44
 {
-return h263p_encoder ();
+return ff_h263p_encoder ();
   ;
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_avcodec_h263p_encoder=yes
+  ac_cv_lib_avcodec_ff_h263p_encoder=yes
 else
-  ac_cv_lib_avcodec_h263p_encoder=no
+  ac_cv_lib_avcodec_ff_h263p_encoder=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avcodec_h263p_encoder" >&5
-$as_echo "$ac_cv_lib_avcodec_h263p_encoder" >&6; }
-if test "x$ac_cv_lib_avcodec_h263p_encoder" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avcodec_ff_h263p_encoder" >&5
+$as_echo "$ac_cv_lib_avcodec_ff_h263p_encoder" >&6; }
+if test "x$ac_cv_lib_avcodec_ff_h263p_encoder" = x""yes; then :
   HAVE_H263P=yes
 else
   HAVE_H263P=no
 fi
 
-                                         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for mpeg4_encoder in -lavcodec" >&5
-$as_echo_n "checking for mpeg4_encoder in -lavcodec... " >&6; }
-if test "${ac_cv_lib_avcodec_mpeg4_encoder+set}" = set; then :
+                                         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ff_mpeg4_encoder in -lavcodec" >&5
+$as_echo_n "checking for ff_mpeg4_encoder in -lavcodec... " >&6; }
+if test "${ac_cv_lib_avcodec_ff_mpeg4_encoder+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@@@ -6579,35 +6583,35 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 #ifdef __cplusplus
 extern "C"
 #endif
-char mpeg4_encoder ();
+char ff_mpeg4_encoder ();
d40 9
a48 73
 {
-return mpeg4_encoder ();
+return ff_mpeg4_encoder ();
   ;
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_avcodec_mpeg4_encoder=yes
+  ac_cv_lib_avcodec_ff_mpeg4_encoder=yes
 else
-  ac_cv_lib_avcodec_mpeg4_encoder=no
+  ac_cv_lib_avcodec_ff_mpeg4_encoder=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avcodec_mpeg4_encoder" >&5
-$as_echo "$ac_cv_lib_avcodec_mpeg4_encoder" >&6; }
-if test "x$ac_cv_lib_avcodec_mpeg4_encoder" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avcodec_ff_mpeg4_encoder" >&5
+$as_echo "$ac_cv_lib_avcodec_ff_mpeg4_encoder" >&6; }
+if test "x$ac_cv_lib_avcodec_ff_mpeg4_encoder" = x""yes; then :
   HAVE_MPEG4=yes
 else
   HAVE_MPEG4=no
 fi
 
-                                         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for h264_decoder in -lavcodec" >&5
-$as_echo_n "checking for h264_decoder in -lavcodec... " >&6; }
-if test "${ac_cv_lib_avcodec_h264_decoder+set}" = set; then :
+                                         { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ff_h264_decoder in -lavcodec" >&5
+$as_echo_n "checking for ff_h264_decoder in -lavcodec... " >&6; }
+if test "${ac_cv_lib_avcodec_ff_h264_decoder+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@@@ -6621,27 +6625,27 @@@@ cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 #ifdef __cplusplus
 extern "C"
 #endif
-char h264_decoder ();
+char ff_h264_decoder ();
 int
 main ()
 {
-return h264_decoder ();
+return ff_h264_decoder ();
   ;
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_avcodec_h264_decoder=yes
+  ac_cv_lib_avcodec_ff_h264_decoder=yes
 else
-  ac_cv_lib_avcodec_h264_decoder=no
+  ac_cv_lib_avcodec_ff_h264_decoder=no
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avcodec_h264_decoder" >&5
-$as_echo "$ac_cv_lib_avcodec_h264_decoder" >&6; }
-if test "x$ac_cv_lib_avcodec_h264_decoder" = x""yes; then :
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_avcodec_ff_h264_decoder" >&5
+$as_echo "$ac_cv_lib_avcodec_ff_h264_decoder" >&6; }
+if test "x$ac_cv_lib_avcodec_ff_h264_decoder" = x""yes; then :
   HAVE_H264_DECODER=yes
 else
   HAVE_H264_DECODER=no
@


1.3
log
@Update to opal-3.6.8.
@
text
@d1 3
a3 3
$OpenBSD: patch-plugins_configure,v 1.2 2010/03/27 14:41:16 ajacoutot Exp $
--- plugins/configure.orig	Thu May 27 08:52:49 2010
+++ plugins/configure	Mon May 31 07:28:46 2010
d24 140
@


1.2
log
@Fix compilation under amd64.
spotted by viq at viq dot ath dot cx
@
text
@d1 4
a4 4
$OpenBSD: patch-plugins_configure,v 1.1 2010/03/23 21:13:37 ajacoutot Exp $
--- plugins/configure.orig	Tue Sep 22 02:57:56 2009
+++ plugins/configure	Sat Mar 27 15:14:45 2010
@@@@ -2195,6 +2195,10 @@@@ fi
d15 1
a15 1
@@@@ -6299,7 +6303,7 @@@@ _ACEOF
d22 2
a23 2
 
 
@


1.1
log
@Major update to opal-3.6.6.
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ plugins/configure	Wed Sep 23 00:24:27 2009
d15 9
@

