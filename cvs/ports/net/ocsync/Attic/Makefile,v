head	1.23;
access;
symbols
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.19.0.2
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.17.0.2
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.11.0.2
	OPENBSD_5_4_BASE:1.11
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	ajacoutot_20121016:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2015.07.30.07.09.33;	author kirby;	state dead;
branches;
next	1.22;
commitid	rDEfQA3OLDgAXsUZ;

1.22
date	2015.07.28.07.25.57;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	LGGiPaWjAp0C12Xq;

1.21
date	2015.04.04.15.33.07;	author ajacoutot;	state Exp;
branches;
next	1.20;
commitid	mIvwEWf4JwUpYLsj;

1.20
date	2014.11.07.10.40.05;	author ajacoutot;	state Exp;
branches;
next	1.19;
commitid	QYJaNcIko4VHoTIl;

1.19
date	2014.07.03.11.38.45;	author ajacoutot;	state Exp;
branches;
next	1.18;
commitid	x805O9KvAh4zvkwT;

1.18
date	2014.05.10.06.57.26;	author kirby;	state Exp;
branches;
next	1.17;

1.17
date	2013.12.18.12.02.56;	author kirby;	state Exp;
branches;
next	1.16;

1.16
date	2013.12.18.10.12.15;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2013.12.14.12.46.33;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2013.11.03.00.13.43;	author ajacoutot;	state Exp;
branches;
next	1.13;

1.13
date	2013.10.16.11.30.43;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2013.09.07.15.43.01;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.07.16.10.18.04;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2013.06.16.15.08.04;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2013.05.14.21.40.14;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.04.27.16.27.19;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2013.03.11.11.35.50;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.02.14.01.42;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.01.24.15.04.22;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2012.12.03.14.12.34;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.11.27.06.37.31;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.10.30.17.26.59;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.10.16.09.41.44;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.10.16.09.41.44;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.23
log
@remove ocsync. it's no longer used by other ports and doesn't work with
latest versions of owncloud server.
OK ajacoutot@@
@
text
@# $OpenBSD: Makefile,v 1.22 2015/07/28 07:25:57 ajacoutot Exp $

BROKEN=		does not work with owncloud-8.1.x;
BROKEN +=	needs to be replaced by wip net/owncloudclient

SHARED_ONLY=	Yes

COMMENT=	bidirectional directories synchronizer (owncloud version)

DISTNAME=	ocsync-0.90.4
EXTRACT_SUFX=	.tar.bz2
REVISION=	3

SHARED_LIBS +=	ocsync                    0.0 # 0.2

CATEGORIES=	net

HOMEPAGE=	http://owncloud.org/sync-clients/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c iniparser m neon pthread sqlite3 stdc++

MASTER_SITES=	http://download.owncloud.com/download/

MODULES=	devel/cmake \
		converters/libiconv

BUILD_DEPENDS=	devel/check \
		devel/doxygen

LIB_DEPENDS=	devel/iniparser \
		net/neon

# csync_owncloud requires -pthread, dlopen: failed to open libpthread.so.XX.X
CONFIGURE_ARGS=	-DCMAKE_C_FLAGS="${CFLAGS} -I${LOCALBASE}/include -pthread" \
		-DCMAKE_SKIP_RPATH=YES \
		-DMAN_INSTALL_DIR=${PREFIX}/man \
		-DSYSCONFDIR=${SYSCONFDIR} \
		-DSYSCONF_INSTALL_DIR=${PREFIX}/share/examples

# force disabling libssh and samba support
CONFIGURE_ARGS+= \
		-DSMBCLIENT_LIBRARY=SMBCLIENT_LIBRARY-NOTFOUND \
		-DSSH_LIBRARY=SSH_LIBRARY-NOTFOUND

NO_TEST=	Yes
USE_GROFF=	Yes

.include <bsd.port.mk>
@


1.22
log
@Mark BROKEN; does not work with newer ownCloud.

discussed with kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/04/04 15:33:07 ajacoutot Exp $
@


1.21
log
@Drop maintainership; it's impossible to update to a more recent release
(requires thread local storage support) and code has been merged into mirall.
It'll probably go away once mirall is updated.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/11/07 10:40:05 ajacoutot Exp $
d3 2
a4 1
# XXX updating requires Thread Local Storage support
@


1.20
log
@No need for default CMAKE_BUILD_TYPE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2014/07/03 11:38:45 ajacoutot Exp $
d11 1
a11 1
REVISION=	2
a17 2

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
@


1.19
log
@Since this is the ownCloud version of csync, force disabling libssh and
samba support which drops lots of dependencies.

based on an initial diff from kirby@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2014/05/10 06:57:26 kirby Exp $
d42 1
a42 2
		-DSYSCONF_INSTALL_DIR=${PREFIX}/share/examples \
		-DCMAKE_BUILD_TYPE=Release
@


1.18
log
@Fix for 64bit time_t to prevent a segfault at writing DB.
ok ajacoutot@@, maintainer.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/12/18 12:02:56 kirby Exp $
d11 1
a11 1
REVISION=	1
d24 1
a24 1
WANTLIB += c iniparser m neon pthread smbclient sqlite3 ssh stdc++
d35 1
a35 3
		net/neon \
		net/samba \
		security/libssh
d37 1
a37 2
# csync_owncloud requires -pthread:
#     dlopen: failed to open libpthread.so.XX.X
d44 5
@


1.17
log
@gnutar is not needed anymore
go ahead ajacoutot@@, maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/12/18 10:12:15 ajacoutot Exp $
d11 1
a11 1
REVISION=	0
@


1.16
log
@No thread local storage support on OpenBSD...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/12/14 12:46:33 ajacoutot Exp $
a37 4

# XXX tar: Invalid header, starting valid header search.
TAR=		${LOCALBASE}/bin/gtar
BUILD_DEPENDS+=	archivers/gtar
@


1.15
log
@Remove useless header.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.14 2013/11/03 00:13:43 ajacoutot Exp $
@


1.14
log
@Update to ocsync-0.90.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/10/16 11:30:43 ajacoutot Exp $
d9 1
@


1.13
log
@Update to ocsync-0.90.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/09/07 15:43:01 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.90.2
@


1.12
log
@Update to ocsync-0.90.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/07/16 10:18:04 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.90.0
@


1.11
log
@Update to ocsync-0.80.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/06/16 15:08:04 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.80.0
@


1.10
log
@Better HOMEPAGE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/05/14 21:40:14 sthen Exp $
d7 1
a7 2
DISTNAME=	ocsync-0.70.7
REVISION=	1
d21 1
a21 1
WANTLIB += c iniparser neon pthread smbclient sqlite3 ssh
@


1.9
log
@unbreak now that cmake shared lib support has been fixed
breakage spotted by naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/04/27 16:27:19 ajacoutot Exp $
a2 1
SHARED_LIBS +=	ocsync                    0.0 # 0.2
d8 1
a8 1
REVISION=	0
d11 2
d15 1
a15 1
HOMEPAGE=	http://www.csync.org/
@


1.8
log
@Update to ocsync-0.70.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2013/03/11 11:35:50 espie Exp $
d3 1
d9 1
@


1.7
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/02 14:01:42 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.70.4
@


1.6
log
@Update to ocsync-0.70.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/01/24 15:04:22 ajacoutot Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d47 1
a47 1
NO_REGRESS=	Yes
@


1.5
log
@Update to ocsync-0.70.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/12/03 14:12:34 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.70.3
@


1.4
log
@Bugfix update to ocsync-0.60.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/11/27 06:37:31 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.60.3
d22 1
a22 1
WANTLIB += c iniparser log4c neon pthread smbclient sqlite3 ssh
d26 2
a27 1
MODULES=	devel/cmake
a32 1
		devel/log4c \
d43 2
a44 2
CONFIGURE_ARGS=	-DCMAKE_C_FLAGS="${CFLAGS} -pthread" \
		-DCMAKE_SKIP_RPATH=ON \
@


1.3
log
@Update to ocsync-0.60.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/10/30 17:26:59 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.60.2
@


1.2
log
@Update to ocsync-0.60.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/10/16 09:41:44 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.60.1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/08/21 15:28:18 ajacoutot Exp $
d7 1
a7 1
DISTNAME=	ocsync-0.60.0
d22 1
a22 2
WANTLIB += c crypto iniparser log4c neon pthread smbclient sqlite3
WANTLIB += ssh ssl
d36 4
@


1.1.1.1
log
@Re-import from net/csync and update to 0.6.0.
ocsync is the ownCloud version of csync.

Note that no @@pkgpath nor quirks will be added because the "official"
csync client may appear in-tree.

ok jasper@@
@
text
@@
