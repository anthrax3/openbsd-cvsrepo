head	1.4;
access;
symbols
	OPENBSD_5_5:1.3.0.10
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.3.0.8
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.6
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.3.0.4
	OPENBSD_5_2_BASE:1.3
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.2
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.06.02.16.50.42;	author sthen;	state dead;
branches;
next	1.3;
commitid	xrHPdyoqipq1W2DI;

1.3
date	2011.11.16.10.16.57;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.16.19.29.11;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2006.06.13.02.02.04;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to irssi 0.8.16, from viq (maintainer), and remove no-longer-used
function pointed out by viq but not in his original diff
@
text
@$OpenBSD: patch-src_irc_dcc_dcc_c,v 1.3 2011/11/16 10:16:57 sthen Exp $
--- src/irc/dcc/dcc.c.orig	Sun Nov  6 05:07:38 2011
+++ src/irc/dcc/dcc.c	Sun Nov  6 05:07:42 2011
@@@@ -367,7 +367,7 @@@@ static void ctcp_msg_dcc(IRC_SERVER_REC *server, const
 	args = strchr(str+13, ' ');
 	if (args != NULL) *args++ = '\0'; else args = "";
 
-	g_strdown(str+13);
+	ascii_strdown(str+13);
 	if (!signal_emit(str, 6, server, args, nick, addr, target, chat)) {
 		signal_emit("default ctcp msg dcc", 6,
 			    server, data, nick, addr, target, chat);
@@@@ -389,7 +389,7 @@@@ static void ctcp_reply_dcc(IRC_SERVER_REC *server, con
 	args = strchr(str+15, ' ');
 	if (args != NULL) *args++ = '\0'; else args = "";
 
-	g_strdown(str+15);
+	ascii_strdown(str+15);
 	if (!signal_emit(str, 5, server, args, nick, addr, target)) {
 		signal_emit("default ctcp reply dcc", 5,
 			    server, data, nick, addr, target);
@@@@ -502,7 +502,7 @@@@ static void cmd_dcc_close(char *data, IRC_SERVER_REC *
 
 	if (*nick == '\0') cmd_param_error(CMDERR_NOT_ENOUGH_PARAMS);
 
-	g_strup(typestr);
+	ascii_strup(typestr);
 	type = dcc_str2type(typestr);
 	if (type == -1) {
 		signal_emit("dcc error unknown type", 1, typestr);
@


1.3
log
@Various tweaks to the irssi port, from Brad. Tested by a few people,
viq (maintainer) doesn't have time to look at it properly but is
generally ok with this.

- Remove USE_GROFF
- Remove --enable-ipv6 from CONFIGURE_ARGS since its enabled by default
- Backport fixes from SVN repo..
  - Replace deprecated glib functions
  - Do not go beyond the end of the string when processing an octal escape
  - glib iochannel fixes
  - Fix segfault generated by SSL disconnections
  - Do not use SSLv2 protocol
  - When sending a signal to an /exec'd command, send it to the process
    group id instead of the process id.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Update to 0.8.11.  Changelog: http://www.irssi.org/news/ChangeLog
Changes to the port:
- normalize paths;
- make term_charset work;
- note the net/irssi-silc in DESCR;
- cleanup;
very initial diff, testing and ok maintainer Wiktor Izdebski
ok jasper@@
@
text
@d1 6
a6 4
$OpenBSD: patch-src_irc_dcc_dcc_c,v 1.1 2006/06/13 02:02:04 jolan Exp $
--- src/irc/dcc/dcc.c.orig	Tue Oct 18 21:13:31 2005
+++ src/irc/dcc/dcc.c	Mon Jun 12 20:57:28 2006
@@@@ -58,8 +58,8 @@@@ void dcc_unregister_type(const char *typ
d8 8
a15 7
 	pos = gslist_find_string(dcc_types, type);
 	if (pos != NULL) {
-                dcc_types = g_slist_remove(dcc_types, pos->data);
 		g_free(pos->data);
+		dcc_types = g_slist_remove(dcc_types, pos->data);
 	}
 }
d17 14
@


1.1
log
@fix crash on /quit
@
text
@d1 1
a1 1
$OpenBSD$
@

