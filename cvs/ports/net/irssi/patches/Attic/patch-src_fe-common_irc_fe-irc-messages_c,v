head	1.2;
access;
symbols
	OPENBSD_4_5:1.1.0.6
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.4
	OPENBSD_4_4_BASE:1.1
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.05.23.17.47.01;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2007.10.20.14.12.26;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to irssi-0.8.13: http://www.irssi.org/news/ChangeLog
from Colin Didier, tweaks by maintainer Wiktor Izdebski and myself
tested by Simon Kuhnle, sthen@@ and myself.  ok sthen@@
@
text
@$OpenBSD: patch-src_fe-common_irc_fe-irc-messages_c,v 1.1 2007/10/20 14:12:26 sthen Exp $
--- src/fe-common/irc/fe-irc-messages.c.orig	Sat Oct 20 14:45:59 2007
+++ src/fe-common/irc/fe-irc-messages.c	Sat Oct 20 14:46:21 2007
@@@@ -44,7 +44,7 @@@@ static const char *skip_target(IRC_SERVER_REC *server,
 	const char *val, *chars;
 
 	/* Quick check */
-	if (server->prefix[(int)(unsigned char)*target] == 0)
+	if (server == NULL || server->prefix[(int)(unsigned char)*target] == 0)
 		return target;
 
 	/* Hack: for bahamut 1.4 which sends neither STATUSMSG nor
@


1.1
log
@fix segfault with non-IRC protocols

ok simon@@
@
text
@d1 1
a1 1
$OpenBSD$
@

