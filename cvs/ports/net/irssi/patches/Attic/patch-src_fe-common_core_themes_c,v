head	1.2;
access;
symbols
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2007.05.16.19.29.11;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2006.04.18.20.30.03;	author steven;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 0.8.11.  Changelog: http://www.irssi.org/news/ChangeLog
Changes to the port:
- normalize paths;
- make term_charset work;
- note the net/irssi-silc in DESCR;
- cleanup;
very initial diff, testing and ok maintainer Wiktor Izdebski
ok jasper@@
@
text
@$OpenBSD: patch-src_fe-common_core_themes_c,v 1.1 2006/04/18 20:30:03 steven Exp $
--- src/fe-common/core/themes.c.orig	Wed Oct 19 04:13:20 2005
+++ src/fe-common/core/themes.c	Thu Apr  6 14:00:43 2006
@@@@ -838,12 +838,15 @@@@ THEME_REC *theme_load(const char *setnam
 	if (stat(fname, &statbuf) != 0) {
 		/* check global config dir */
 		g_free(fname);
-		fname = g_strdup_printf(THEMESDIR"/%s.theme", name);
+		fname = g_strdup_printf(SYSCONFDIR"/irssi/themes/%s.theme", name);
 		if (stat(fname, &statbuf) != 0) {
-			/* theme not found */
-			g_free(fname);
-			g_free(name);
-			return theme; /* use the one in memory if possible */
+			fname = g_strdup_printf(THEMESDIR"/%s.theme", name);
+			if (stat(fname, &statbuf) != 0) {
+				/* theme not found */
+				g_free(fname);
+				g_free(name);
+				return theme; /* use the one in memory if possible */
+			}
 		}
 	}
 
@


1.1
log
@update to 0.8.10;  rearrange locations of installed files.
based on diff from new maintainer Wiktor Izdebski, vicviq at gmail
@
text
@d1 1
a1 1
$OpenBSD$
@

