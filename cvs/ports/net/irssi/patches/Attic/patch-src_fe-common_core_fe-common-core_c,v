head	1.4;
access;
symbols
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.6
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.4
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.2
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2009.05.23.17.47.01;	author martynas;	state dead;
branches;
next	1.3;

1.3
date	2008.12.22.19.40.33;	author matthieu;	state Exp;
branches;
next	1.2;

1.2
date	2007.05.16.19.29.11;	author martynas;	state Exp;
branches;
next	1.1;

1.1
date	2006.04.18.20.30.03;	author steven;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update to irssi-0.8.13: http://www.irssi.org/news/ChangeLog
from Colin Didier, tweaks by maintainer Wiktor Izdebski and myself
tested by Simon Kuhnle, sthen@@ and myself.  ok sthen@@
@
text
@$OpenBSD: patch-src_fe-common_core_fe-common-core_c,v 1.3 2008/12/22 19:40:33 matthieu Exp $
--- src/fe-common/core/fe-common-core.c.orig	Sat Oct  6 11:38:19 2007
+++ src/fe-common/core/fe-common-core.c	Wed Dec  3 21:35:58 2008
@@@@ -164,7 +164,8 @@@@ void fe_common_core_init(void)
 	settings_add_bool("lookandfeel", "use_msgs_window", FALSE);
 #if defined (HAVE_NL_LANGINFO) && defined(CODESET)
 	settings_add_str("lookandfeel", "term_charset", 
-			 *nl_langinfo(CODESET) != '\0' ? 
+			 ((*nl_langinfo(CODESET) != '\0') &&
+			 (strcmp(nl_langinfo(CODESET), "646") != 0)) ? /* ASCII */
 			 nl_langinfo(CODESET) : "ISO8859-1");
 #else
 	settings_add_str("lookandfeel", "term_charset", "ISO8859-1");
@


1.3
log
@Add a patch adapted from bugs.irrsi.org for double echoed characters
after reading a certificate's password.
(http://bugs.irssi.org/index.php?do=details&task_id=305)
Regen patches.
Add @@bin marker to plist.
from maintainer (viq at vic dot ath dot cx)
@
text
@d1 1
a1 1
$OpenBSD: patch-src_fe-common_core_fe-common-core_c,v 1.2 2007/05/16 19:29:11 martynas Exp $
@


1.2
log
@Update to 0.8.11.  Changelog: http://www.irssi.org/news/ChangeLog
Changes to the port:
- normalize paths;
- make term_charset work;
- note the net/irssi-silc in DESCR;
- cleanup;
very initial diff, testing and ok maintainer Wiktor Izdebski
ok jasper@@
@
text
@d1 4
a4 4
$OpenBSD: patch-src_fe-common_core_fe-common-core_c,v 1.1 2006/04/18 20:30:03 steven Exp $
--- src/fe-common/core/fe-common-core.c.orig	Wed Apr 25 21:13:56 2007
+++ src/fe-common/core/fe-common-core.c	Sun May  6 15:07:18 2007
@@@@ -176,7 +176,8 @@@@ void fe_common_core_init(void)
@


1.1
log
@update to 0.8.10;  rearrange locations of installed files.
based on diff from new maintainer Wiktor Izdebski, vicviq at gmail
@
text
@d1 4
a4 17
$OpenBSD$
--- src/fe-common/core/fe-common-core.c.orig	Fri Feb  3 02:41:33 2006
+++ src/fe-common/core/fe-common-core.c	Fri Feb  3 02:47:45 2006
@@@@ -25,8 +25,8 @@@@
 #include "levels.h"
 #include "settings.h"
 #include "irssi-version.h"
-#ifdef HAVE_NL_LANGINFO
-#  include <langinfo.h>
+#ifdef USE_LIBICONV
+#include <localcharset.h>
 #endif
 
 #include "servers.h"
@@@@ -174,10 +174,12 @@@@ void fe_common_core_init(void)
 
 	settings_add_bool("lookandfeel", "use_status_window", TRUE);
d6 2
a7 2
-#if defined (HAVE_NL_LANGINFO) && defined(CODESET)
-	settings_add_str("lookandfeel", "term_charset", 
d9 3
a11 7
-			 nl_langinfo(CODESET) : "ISO8859-1");
+
+#ifdef USE_LIBICONV
+	settings_add_str("lookandfeel", "term_charset",
+			 *locale_charset() != '\0' ?
+			 locale_charset() : "ISO8859-1");
+
a13 1
 #endif
@

