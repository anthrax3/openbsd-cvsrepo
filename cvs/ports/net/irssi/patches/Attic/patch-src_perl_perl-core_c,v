head	1.2;
access;
symbols
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2007.05.16.19.29.11;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2006.04.18.20.30.03;	author steven;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 0.8.11.  Changelog: http://www.irssi.org/news/ChangeLog
Changes to the port:
- normalize paths;
- make term_charset work;
- note the net/irssi-silc in DESCR;
- cleanup;
very initial diff, testing and ok maintainer Wiktor Izdebski
ok jasper@@
@
text
@$OpenBSD: patch-src_perl_perl-core_c,v 1.1 2006/04/18 20:30:03 steven Exp $
--- src/perl/perl-core.c.orig	Fri Apr  7 12:56:00 2006
+++ src/perl/perl-core.c	Fri Apr  7 13:06:09 2006
@@@@ -370,12 +370,17 @@@@ char *perl_script_get_path(const char *n
 	/* check from ~/.irssi/scripts/ */
 	path = g_strdup_printf("%s/scripts/%s", get_irssi_dir(), file);
 	if (stat(path, &statbuf) != 0) {
-		/* check from SCRIPTDIR */
+		/* check from SYSCONFDIR and SCRIPTDIR */
 		g_free(path);
-		path = g_strdup_printf(SCRIPTDIR"/%s", file);
+		/* path = g_strdup_printf(SCRIPTDIR"/%s", file); */
+		path = g_strdup_printf(SYSCONFDIR"/irssi/scripts/%s", file);
 		if (stat(path, &statbuf) != 0) {
 			g_free(path);
-			path = NULL;
+			path = g_strdup_printf(SCRIPTDIR"/%s", file);
+			if (stat(path, &statbuf) != 0) {
+				g_free(path);
+				path = NULL;
+			}
 		}
 	}
 	g_free(file);
@


1.1
log
@update to 0.8.10;  rearrange locations of installed files.
based on diff from new maintainer Wiktor Izdebski, vicviq at gmail
@
text
@d1 1
a1 1
$OpenBSD$
@

