head	1.4;
access;
symbols
	OPENBSD_2_6:1.3.0.4
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.3.0.2
	OPENBSD_2_5_BASE:1.3
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-Jul-04:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.4
date	99.12.15.05.16.25;	author dugsong;	state dead;
branches;
next	1.3;

1.3
date	99.03.27.17.06.25;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	99.03.06.22.51.40;	author dugsong;	state Exp;
branches;
next	1.1;

1.1
date	98.07.04.20.52.53;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.07.04.20.52.53;	author marc;	state Exp;
branches;
next	;


desc
@@


1.4
log
@bye bye NFR - http://www.nfr.net/download/reasons-for-removal.html
@
text
@#!/usr/bin/perl
#
# $OpenBSD: createuser,v 1.3 1999/03/27 17:06:25 niklas Exp $
#
# Create the NFR user and group, if they don't already exist.

if ($>) {
    print "\nYou must be root to run this step!\n\n";
    exit 1;
}

# Find NFR homedir.
$prefix = $ENV{'PREFIX'};
$nfr_home = $prefix . "/nfr";

# Create NFR group if it doesn't exist.
if (getgrnam("nfr")) {
    ($null, $null, $nfr_gid) = getgrnam("nfr");
}
else {
    $nfr_gid = 42;
    while (getgrgid($nfr_gid)) {
	$nfr_gid++;
    }
    print("Creating NFR group 'nfr' with gid $nfr_gid\n");
    system("echo nfr:\*:$nfr_gid: >> /etc/group");
}

# Create NFR user if it doesn't exist.
if (getpwnam("nfr")) {
    ($null, $null, $nfr_uid) = getpwnam("nfr");
}
else {
    $nfr_uid = 42;
    while (getpwuid($nfr_uid)) {
	$nfr_uid++;
    }
    ($null, $null, $nfr_gid) = getgrnam("nfr");
    print "Creating NFR user 'nfr' with uid $nfr_uid, gid $nfr_gid\n";
    system( "/usr/bin/chpass -l -a \"nfr:*:$nfr_uid:$nfr_gid:\:\:\:Network Flight Recorder:$nfr_home:/sbin/nologin\"" );
}

print("Using NFR user 'nfr' with uid $nfr_uid, gid $nfr_gid, and homedir $nfr_home\n\n");

@


1.3
log
@Run INSTALL with PREFIX env. var set.  Make createuser work in NIS setups
@
text
@d3 1
a3 1
# $OpenBSD: createuser,v 1.2 1999/03/06 22:51:40 dugsong Exp $
@


1.2
log
@update of NFR port to 2.0.3
@
text
@d3 1
a3 1
# $OpenBSD: createuser,v 1.1.1.1 1998/07/04 20:52:53 marc Exp $
d40 1
a40 1
    system( "/usr/bin/chpass -a \"nfr:*:$nfr_uid:$nfr_gid:\:\:\:Network Flight Recorder:$nfr_home:/sbin/nologin\"" );
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
# $OpenBSD$
d13 2
a14 4
$nfr_home = $ENV{'NFRHOME'};
if (!$nfr_home) {
    $nfr_home = "/nfr";
}
@


1.1.1.1
log
@network flight recorder from dugsong@@monkey.org
@
text
@@
