head	1.9;
access;
symbols
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.1.0.2
	OPENBSD_4_6_BASE:1.1;
locks; strict;
comment	@# @;


1.9
date	2011.10.18.05.12.57;	author rpointel;	state dead;
branches;
next	1.8;

1.8
date	2011.10.17.19.41.24;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.31.17.40.50;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2011.03.06.09.11.57;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2010.08.22.08.56.51;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2010.06.19.21.18.11;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2009.11.13.03.46.47;	author jakob;	state Exp;
branches;
next	1.2;

1.2
date	2009.07.15.22.13.45;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2009.05.18.09.21.57;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.9
log
@remove the 0 byte patches, from Brad.
@
text
@@


1.8
log
@update to LDNS 1.6.11, from brad
@
text
@@


1.7
log
@update to ldns 1.6.10
@
text
@a0 18
$OpenBSD: patch-util_c,v 1.6 2011/03/06 09:11:57 jakob Exp $
--- util.c.orig	Wed May 18 16:15:05 2011
+++ util.c	Tue May 31 19:39:46 2011
@@@@ -369,10 +369,10 @@@@ ldns_init_random(FILE *fd, unsigned int size)
         }
 
 	if (!fd) {
-		if ((rand_f = fopen("/dev/urandom", "r")) == NULL) {
-			/* no readable /dev/urandom, try /dev/random */
-			if ((rand_f = fopen("/dev/random", "r")) == NULL) {
-				/* no readable /dev/random either, and no entropy
+		if ((rand_f = fopen("/dev/arandom", "r")) == NULL) {
+			/* no readable /dev/arandom, try /dev/urandom */
+			if ((rand_f = fopen("/dev/urandom", "r")) == NULL) {
+				/* no readable /dev/urandom either, and no entropy
 				   source given. we'll have to improvise */
 				for (read = 0; read < size; read++) {
 					gettimeofday(&tv, NULL);
@


1.6
log
@update patches, no change
@
text
@d1 4
a4 4
$OpenBSD: patch-util_c,v 1.5 2010/08/22 08:56:51 jakob Exp $
--- util.c.orig	Mon Jan 24 15:24:36 2011
+++ util.c	Sun Mar  6 10:09:43 2011
@@@@ -275,10 +275,10 @@@@ ldns_init_random(FILE *fd, unsigned int size)
@


1.5
log
@update to LDNS v1.6.6
@
text
@d1 5
a5 5
$OpenBSD: patch-util_c,v 1.4 2010/06/19 21:18:11 jakob Exp $
--- util.c.orig	Tue May 18 03:08:09 2010
+++ util.c	Sun Jul 25 17:26:25 2010
@@@@ -272,10 +272,10 @@@@ ldns_init_random(FILE *fd, unsigned int size)
 	seed = LDNS_XMALLOC(uint8_t, size);
@


1.4
log
@upgrade to LDNS v1.6.5
@
text
@d1 1
a1 1
$OpenBSD: patch-util_c,v 1.3 2009/11/13 03:46:47 jakob Exp $
d3 2
a4 2
+++ util.c	Tue Jun 15 21:21:35 2010
@@@@ -272,7 +272,7 @@@@ ldns_init_random(FILE *fd, unsigned int size)
d9 3
d13 6
a18 3
 			/* no readable /dev/urandom, try /dev/random */
 			if ((rand_f = fopen("/dev/random", "r")) == NULL) {
 				/* no readable /dev/random either, and no entropy
@


1.3
log
@update to LDNS v1.6.2
@
text
@d1 4
a4 4
$OpenBSD: patch-util_c,v 1.2 2009/07/15 22:13:45 jakob Exp $
--- util.c.orig	Tue Oct 13 15:00:22 2009
+++ util.c	Thu Nov 12 15:25:11 2009
@@@@ -273,7 +273,7 @@@@ ldns_init_random(FILE *fd, unsigned int size)
@


1.2
log
@update to ldns 1.6.0; from brad
@
text
@d1 4
a4 4
$OpenBSD: patch-util_c,v 1.1 2009/05/18 09:21:57 sthen Exp $
--- util.c.orig	Thu Jul  2 05:25:00 2009
+++ util.c	Mon Jul 13 03:12:15 2009
@@@@ -273,7 +273,7 @@@@ ldns_init_random(FILE *fd, unsigned int size) 
@


1.1
log
@urandom->arandom (aka, "stop my music skipping when I use drill").
ok jakob@@; i'll work out something similar to send upstream.
@
text
@d1 3
a3 3
$OpenBSD$
--- util.c.orig	Mon May 18 09:45:00 2009
+++ util.c	Mon May 18 09:45:14 2009
d5 1
a5 1
 	seed = LDNS_XMALLOC(unsigned int, size);
@

