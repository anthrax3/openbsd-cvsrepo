head	1.2;
access;
symbols
	OPENBSD_3_7:1.1.0.22
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.20
	OPENBSD_3_6_BASE:1.1
	OPENBSD_3_5:1.1.0.18
	OPENBSD_3_5_BASE:1.1
	OPENBSD_3_4:1.1.0.16
	OPENBSD_3_4_BASE:1.1
	OPENBSD_3_3:1.1.0.14
	OPENBSD_3_3_BASE:1.1
	OPENBSD_3_2:1.1.0.12
	OPENBSD_3_2_BASE:1.1
	OPENBSD_3_1:1.1.0.10
	OPENBSD_3_1_BASE:1.1
	OPENBSD_3_0:1.1.0.8
	OPENBSD_3_0_BASE:1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1
	OPENBSD_2_9:1.1.0.6
	OPENBSD_2_9_BASE:1.1
	OPENBSD_2_8:1.1.0.4
	OPENBSD_2_8_BASE:1.1
	OPENBSD_2_7:1.1.0.2
	OPENBSD_2_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2005.05.24.00.00.11;	author mjc;	state dead;
branches;
next	1.1;

1.1
date	99.10.26.13.31.30;	author dugsong;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to cope with new libnet
and regen patches while here
ok pvalchev@@ msf@@
@
text
@--- listener.c.orig	Thu Oct 21 01:35:49 1999
+++ listener.c	Thu Oct 21 01:37:24 1999
@@@@ -77,7 +77,8 @@@@
     /*
      *  Read packets from the pcap device.
      */
-    for (;packet = GET_RAW(fp->pd, &pc_hdr);)
+    for (;;) {
+      if ((packet = GET_RAW(fp->pd, &pc_hdr)))
     {
         /*
          *  Align the IP header beyond the link header.
@@@@ -106,6 +107,7 @@@@
             default:
                 continue;
         }
+    }
     }
     destroy_listener(fp);
     exit(0);
@


1.1
log
@fix improper blocking pcap read
@
text
@@

