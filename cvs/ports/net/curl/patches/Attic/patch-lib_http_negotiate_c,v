head	1.1;
access;
symbols
	OPENBSD_5_6:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2015.05.01.20.39.42;	author naddy;	state dead;
branches
	1.1.2.1;
next	;
commitid	Ij8k3y0w8XICbM4N;

1.1.2.1
date	2015.05.01.20.39.42;	author naddy;	state Exp;
branches;
next	;
commitid	Ij8k3y0w8XICbM4N;


desc
@@


1.1
log
@file patch-lib_http_negotiate_c was initially added on branch OPENBSD_5_6.
@
text
@@


1.1.2.1
log
@Security fixes:
CVE-2015-3143: Re-using authenticated connection when unauthenticated
CVE-2015-3144: host name out of boundary memory access
CVE-2015-3145: cookie parser out of boundary memory access
CVE-2015-3148: Negotiate not treated as connection-oriented
CVE-2015-3153: sensitive HTTP server headers also sent to proxies

Backport for CVE-2015-3148 from Ubuntu.
@
text
@a0 18
$OpenBSD$

CVE-2015-3148: Negotiate not treated as connection-oriented
http://curl.haxx.se/docs/adv_20150422B.html
Backported from:
https://github.com/bagder/curl/commit/f78ae415d24b9bd89d6c121c556e411fdb21c6aa
https://github.com/bagder/curl/commit/79b9d5f1a42578f807a6c94914bc65cbaa304b6d

--- lib/http_negotiate.c.orig	Fri Apr 25 14:01:03 2014
+++ lib/http_negotiate.c	Fri May  1 21:25:00 2015
@@@@ -355,7 +355,6 @@@@ CURLcode Curl_output_negotiate(struct connectdata *con
   }
 
   Curl_safefree(encoded);
-  Curl_cleanup_negotiate(conn->data);
 
   return (userp == NULL) ? CURLE_OUT_OF_MEMORY : CURLE_OK;
 }
@

