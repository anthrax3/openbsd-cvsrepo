head	1.8;
access;
symbols
	OPENBSD_5_6:1.7.0.4
	OPENBSD_5_5:1.7.0.2
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.4
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.2
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.2.0.2
	OPENBSD_4_4_BASE:1.2;
locks; strict;
comment	@# @;


1.8
date	2017.04.24.20.33.58;	author naddy;	state Exp;
branches;
next	1.7;
commitid	Yrnfgh8WNFve2Pcy;

1.7
date	2010.09.26.13.40.11;	author naddy;	state dead;
branches
	1.7.2.1
	1.7.4.1;
next	1.6;

1.6
date	2010.09.19.16.30.26;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2009.08.16.17.54.21;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2009.01.21.21.17.27;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2008.11.20.19.49.40;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2008.06.24.18.37.25;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2008.06.09.21.00.57;	author naddy;	state Exp;
branches;
next	;

1.7.2.1
date	2015.01.11.22.53.15;	author naddy;	state Exp;
branches;
next	;
commitid	HTkqIXpPaz4yHqG6;

1.7.4.1
date	2015.01.12.02.17.10;	author naddy;	state Exp;
branches;
next	;
commitid	tJBKky4C4oSbqx2b;


desc
@@


1.8
log
@Update to 7.54.0.  Includes fix for
CVE-2017-7468: TLS session resumption client cert bypass (again)
@
text
@$OpenBSD$

https://github.com/curl/curl/commit/3e5cef09d72cf5007b253aacf3a28b5b28fdb5bc

--- src/Makefile.in.orig	Tue Apr 18 13:42:47 2017
+++ src/Makefile.in	Mon Apr 24 20:19:37 2017
@@@@ -2030,23 +2030,21 @@@@ uninstall-am: uninstall-binPROGRAMS
 # Here are the stuff to create a built-in manual
 
 @@USE_MANUAL_TRUE@@$(MANPAGE):
-@@USE_MANUAL_TRUE@@	cd $(top_builddir)/docs && $(MAKE) curl.1
+@@USE_MANUAL_TRUE@@	cd $(top_builddir)/docs && $(MAKE)
 
 # This generates the tool_hugehelp.c file in both uncompressed and
-# compressed formats. $(MANPAGE) must be the first dependency so it
-# can be referenced with $< which points to the correct location in
-# the VPATH.
+# compressed formats.
 @@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@$(HUGE): $(MANPAGE) $(README) $(MKHELP)
 @@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	echo '#include "tool_setup.h"' > $(HUGE)
 @@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	echo '#ifndef HAVE_LIBZ' >> $(HUGE)
-@@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	$(NROFF) $< | $(PERL) $(MKHELP) $(README) >> $(HUGE)
+@@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	$(NROFF) $(MANPAGE) | $(PERL) $(MKHELP) $(README) >> $(HUGE)
 @@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	echo '#else' >> $(HUGE)
-@@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	$(NROFF) $< | $(PERL) $(MKHELP) -c $(README) >> $(HUGE)
+@@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	$(NROFF) $(MANPAGE) | $(PERL) $(MKHELP) -c $(README) >> $(HUGE)
 @@HAVE_LIBZ_TRUE@@@@USE_MANUAL_TRUE@@	echo '#endif /* HAVE_LIBZ */' >> $(HUGE)
 # This generates the tool_hugehelp.c file uncompressed only
 @@HAVE_LIBZ_FALSE@@@@USE_MANUAL_TRUE@@$(HUGE): $(MANPAGE) $(README) mkhelp.pl
 @@HAVE_LIBZ_FALSE@@@@USE_MANUAL_TRUE@@	echo '#include "tool_setup.h"' > $(HUGE)
-@@HAVE_LIBZ_FALSE@@@@USE_MANUAL_TRUE@@	$(NROFF) $< | $(PERL) $(MKHELP) $(README) >> $(HUGE)
+@@HAVE_LIBZ_FALSE@@@@USE_MANUAL_TRUE@@	$(NROFF) $(MANPAGE) | $(PERL) $(MKHELP) $(README) >> $(HUGE)
 
 # built-in manual has been disabled, make a blank file
 @@USE_MANUAL_FALSE@@$(HUGE):
@


1.7
log
@remove -Lxxx/.libs workarounds required with GNU libtool
@
text
@d1 35
a35 12
$OpenBSD: patch-src_Makefile_in,v 1.6 2010/09/19 16:30:26 naddy Exp $
--- src/Makefile.in.orig	Wed Aug 11 19:03:31 2010
+++ src/Makefile.in	Fri Sep 17 17:44:53 2010
@@@@ -86,7 +86,7 @@@@ LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $
 	$(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
 LINK = $(LIBTOOL) --tag=CC --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
-	$(AM_LDFLAGS) $(LDFLAGS) -o $@@
+	$(AM_LDFLAGS) -L../lib/.libs $(LDFLAGS) -o $@@
 SOURCES = $(curl_SOURCES)
 DIST_SOURCES = $(curl_SOURCES)
 ETAGS = etags
@


1.7.4.1
log
@Security fixes for
CVE-2014-3707: libcurl duphandle read out of bounds
CVE-2014-8150: URL request injection
@
text
@d1 12
a12 213
$OpenBSD$

CVE-2014-3707: libcurl duphandle read out of bounds
http://curl.haxx.se/docs/adv_20141105.html

--- src/Makefile.in.orig	Sun May 18 12:51:07 2014
+++ src/Makefile.in	Mon Jan 12 02:23:40 2015
@@@@ -129,9 +129,9 @@@@ am__libcurltool_la_SOURCES_DIST = tool_binmode.c tool_
 	tool_homedir.c tool_hugehelp.c tool_libinfo.c tool_main.c \
 	tool_metalink.c tool_mfiles.c tool_msgs.c tool_operate.c \
 	tool_operhlp.c tool_panykey.c tool_paramhlp.c tool_parsecfg.c \
-	tool_setopt.c tool_sleep.c tool_urlglob.c tool_util.c \
-	tool_vms.c tool_writeenv.c tool_writeout.c tool_xattr.c \
-	../lib/strtoofft.c ../lib/strdup.c ../lib/rawstr.c \
+	tool_strdup.c tool_setopt.c tool_sleep.c tool_urlglob.c \
+	tool_util.c tool_vms.c tool_writeenv.c tool_writeout.c \
+	tool_xattr.c ../lib/strtoofft.c ../lib/rawstr.c \
 	../lib/nonblock.c ../lib/warnless.c tool_binmode.h \
 	tool_bname.h tool_cb_dbg.h tool_cb_hdr.h tool_cb_prg.h \
 	tool_cb_rea.h tool_cb_see.h tool_cb_wrt.h tool_cfgable.h \
@@@@ -141,8 +141,9 @@@@ am__libcurltool_la_SOURCES_DIST = tool_binmode.c tool_
 	tool_main.h tool_metalink.h tool_mfiles.h tool_msgs.h \
 	tool_operate.h tool_operhlp.h tool_panykey.h tool_paramhlp.h \
 	tool_parsecfg.h tool_sdecls.h tool_setopt.h tool_setup.h \
-	tool_sleep.h tool_urlglob.h tool_util.h tool_version.h \
-	tool_vms.h tool_writeenv.h tool_writeout.h tool_xattr.h
+	tool_sleep.h tool_strdup.h tool_urlglob.h tool_util.h \
+	tool_version.h tool_vms.h tool_writeenv.h tool_writeout.h \
+	tool_xattr.h
 am__objects_1 = libcurltool_la-tool_binmode.lo \
 	libcurltool_la-tool_bname.lo libcurltool_la-tool_cb_dbg.lo \
 	libcurltool_la-tool_cb_hdr.lo libcurltool_la-tool_cb_prg.lo \
@@@@ -159,14 +160,13 @@@@ am__objects_1 = libcurltool_la-tool_binmode.lo \
 	libcurltool_la-tool_msgs.lo libcurltool_la-tool_operate.lo \
 	libcurltool_la-tool_operhlp.lo libcurltool_la-tool_panykey.lo \
 	libcurltool_la-tool_paramhlp.lo \
-	libcurltool_la-tool_parsecfg.lo libcurltool_la-tool_setopt.lo \
-	libcurltool_la-tool_sleep.lo libcurltool_la-tool_urlglob.lo \
-	libcurltool_la-tool_util.lo libcurltool_la-tool_vms.lo \
-	libcurltool_la-tool_writeenv.lo \
+	libcurltool_la-tool_parsecfg.lo libcurltool_la-tool_strdup.lo \
+	libcurltool_la-tool_setopt.lo libcurltool_la-tool_sleep.lo \
+	libcurltool_la-tool_urlglob.lo libcurltool_la-tool_util.lo \
+	libcurltool_la-tool_vms.lo libcurltool_la-tool_writeenv.lo \
 	libcurltool_la-tool_writeout.lo libcurltool_la-tool_xattr.lo
 am__dirstamp = $(am__leading_dot)dirstamp
 am__objects_2 = ../lib/libcurltool_la-strtoofft.lo \
-	../lib/libcurltool_la-strdup.lo \
 	../lib/libcurltool_la-rawstr.lo \
 	../lib/libcurltool_la-nonblock.lo \
 	../lib/libcurltool_la-warnless.lo
@@@@ -200,13 +200,14 @@@@ am__objects_5 = curl-tool_binmode.$(OBJEXT) curl-tool_
 	curl-tool_msgs.$(OBJEXT) curl-tool_operate.$(OBJEXT) \
 	curl-tool_operhlp.$(OBJEXT) curl-tool_panykey.$(OBJEXT) \
 	curl-tool_paramhlp.$(OBJEXT) curl-tool_parsecfg.$(OBJEXT) \
-	curl-tool_setopt.$(OBJEXT) curl-tool_sleep.$(OBJEXT) \
-	curl-tool_urlglob.$(OBJEXT) curl-tool_util.$(OBJEXT) \
-	curl-tool_vms.$(OBJEXT) curl-tool_writeenv.$(OBJEXT) \
-	curl-tool_writeout.$(OBJEXT) curl-tool_xattr.$(OBJEXT)
+	curl-tool_strdup.$(OBJEXT) curl-tool_setopt.$(OBJEXT) \
+	curl-tool_sleep.$(OBJEXT) curl-tool_urlglob.$(OBJEXT) \
+	curl-tool_util.$(OBJEXT) curl-tool_vms.$(OBJEXT) \
+	curl-tool_writeenv.$(OBJEXT) curl-tool_writeout.$(OBJEXT) \
+	curl-tool_xattr.$(OBJEXT)
 am__objects_6 = ../lib/curl-strtoofft.$(OBJEXT) \
-	../lib/curl-strdup.$(OBJEXT) ../lib/curl-rawstr.$(OBJEXT) \
-	../lib/curl-nonblock.$(OBJEXT) ../lib/curl-warnless.$(OBJEXT)
+	../lib/curl-rawstr.$(OBJEXT) ../lib/curl-nonblock.$(OBJEXT) \
+	../lib/curl-warnless.$(OBJEXT)
 am_curl_OBJECTS = $(am__objects_5) $(am__objects_6) $(am__objects_3)
 curl_OBJECTS = $(am_curl_OBJECTS)
 curl_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \
@@@@ -507,7 +508,6 @@@@ AM_CPPFLAGS = -I$(top_builddir)/include/curl -I$(top_b
 # the official API, but we re-use the code here to avoid duplication.
 CURLX_ONES = \
 	../lib/strtoofft.c \
-	../lib/strdup.c \
 	../lib/rawstr.c \
 	../lib/nonblock.c \
 	../lib/warnless.c
@@@@ -543,6 +543,7 @@@@ CURL_CFILES = \
 	tool_panykey.c \
 	tool_paramhlp.c \
 	tool_parsecfg.c \
+	tool_strdup.c \
 	tool_setopt.c \
 	tool_sleep.c \
 	tool_urlglob.c \
@@@@ -587,6 +588,7 @@@@ CURL_HFILES = \
 	tool_setopt.h \
 	tool_setup.h \
 	tool_sleep.h \
+	tool_strdup.h \
 	tool_urlglob.h \
 	tool_util.h \
 	tool_version.h \
@@@@ -676,8 +678,6 @@@@ clean-noinstLTLIBRARIES:
 	@@: > ../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/libcurltool_la-strtoofft.lo: ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
-../lib/libcurltool_la-strdup.lo: ../lib/$(am__dirstamp) \
-	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/libcurltool_la-rawstr.lo: ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/libcurltool_la-nonblock.lo: ../lib/$(am__dirstamp) \
@@@@ -738,8 +738,6 @@@@ clean-binPROGRAMS:
 	rm -f $$list
 ../lib/curl-strtoofft.$(OBJEXT): ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
-../lib/curl-strdup.$(OBJEXT): ../lib/$(am__dirstamp) \
-	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/curl-rawstr.$(OBJEXT): ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/curl-nonblock.$(OBJEXT): ../lib/$(am__dirstamp) \
@@@@ -761,12 +759,10 @@@@ distclean-compile:
 
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-nonblock.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-rawstr.Po@@am__quote@@
-@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-strdup.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-strtoofft.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-warnless.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-nonblock.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-rawstr.Plo@@am__quote@@
-@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-strdup.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-strtoofft.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-warnless.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_binmode.Po@@am__quote@@
@@@@ -801,6 +797,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_parsecfg.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_setopt.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_sleep.Po@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_strdup.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_urlglob.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_util.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_vms.Po@@am__quote@@
@@@@ -839,6 +836,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_parsecfg.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_setopt.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_sleep.Plo@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_strdup.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_urlglob.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_util.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_vms.Plo@@am__quote@@
@@@@ -1080,6 +1078,13 @@@@ libcurltool_la-tool_parsecfg.lo: tool_parsecfg.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o libcurltool_la-tool_parsecfg.lo `test -f 'tool_parsecfg.c' || echo '$(srcdir)/'`tool_parsecfg.c
 
+libcurltool_la-tool_strdup.lo: tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT libcurltool_la-tool_strdup.lo -MD -MP -MF $(DEPDIR)/libcurltool_la-tool_strdup.Tpo -c -o libcurltool_la-tool_strdup.lo `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/libcurltool_la-tool_strdup.Tpo $(DEPDIR)/libcurltool_la-tool_strdup.Plo
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='tool_strdup.c' object='libcurltool_la-tool_strdup.lo' libtool=yes @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o libcurltool_la-tool_strdup.lo `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+
 libcurltool_la-tool_setopt.lo: tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT libcurltool_la-tool_setopt.lo -MD -MP -MF $(DEPDIR)/libcurltool_la-tool_setopt.Tpo -c -o libcurltool_la-tool_setopt.lo `test -f 'tool_setopt.c' || echo '$(srcdir)/'`tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/libcurltool_la-tool_setopt.Tpo $(DEPDIR)/libcurltool_la-tool_setopt.Plo
@@@@ -1143,13 +1148,6 @@@@ libcurltool_la-tool_xattr.lo: tool_xattr.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o ../lib/libcurltool_la-strtoofft.lo `test -f '../lib/strtoofft.c' || echo '$(srcdir)/'`../lib/strtoofft.c
 
-../lib/libcurltool_la-strdup.lo: ../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT ../lib/libcurltool_la-strdup.lo -MD -MP -MF ../lib/$(DEPDIR)/libcurltool_la-strdup.Tpo -c -o ../lib/libcurltool_la-strdup.lo `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/libcurltool_la-strdup.Tpo ../lib/$(DEPDIR)/libcurltool_la-strdup.Plo
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strdup.c' object='../lib/libcurltool_la-strdup.lo' libtool=yes @@AMDEPBACKSLASH@@
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
-@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o ../lib/libcurltool_la-strdup.lo `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-
 ../lib/libcurltool_la-rawstr.lo: ../lib/rawstr.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT ../lib/libcurltool_la-rawstr.lo -MD -MP -MF ../lib/$(DEPDIR)/libcurltool_la-rawstr.Tpo -c -o ../lib/libcurltool_la-rawstr.lo `test -f '../lib/rawstr.c' || echo '$(srcdir)/'`../lib/rawstr.c
 @@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/libcurltool_la-rawstr.Tpo ../lib/$(DEPDIR)/libcurltool_la-rawstr.Plo
@@@@ -1591,6 +1589,20 @@@@ curl-tool_parsecfg.obj: tool_parsecfg.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o curl-tool_parsecfg.obj `if test -f 'tool_parsecfg.c'; then $(CYGPATH_W) 'tool_parsecfg.c'; else $(CYGPATH_W) '$(srcdir)/tool_parsecfg.c'; fi`
 
+curl-tool_strdup.o: tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT curl-tool_strdup.o -MD -MP -MF $(DEPDIR)/curl-tool_strdup.Tpo -c -o curl-tool_strdup.o `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/curl-tool_strdup.Tpo $(DEPDIR)/curl-tool_strdup.Po
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='tool_strdup.c' object='curl-tool_strdup.o' libtool=no @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o curl-tool_strdup.o `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+
+curl-tool_strdup.obj: tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT curl-tool_strdup.obj -MD -MP -MF $(DEPDIR)/curl-tool_strdup.Tpo -c -o curl-tool_strdup.obj `if test -f 'tool_strdup.c'; then $(CYGPATH_W) 'tool_strdup.c'; else $(CYGPATH_W) '$(srcdir)/tool_strdup.c'; fi`
+@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/curl-tool_strdup.Tpo $(DEPDIR)/curl-tool_strdup.Po
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='tool_strdup.c' object='curl-tool_strdup.obj' libtool=no @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o curl-tool_strdup.obj `if test -f 'tool_strdup.c'; then $(CYGPATH_W) 'tool_strdup.c'; else $(CYGPATH_W) '$(srcdir)/tool_strdup.c'; fi`
+
 curl-tool_setopt.o: tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT curl-tool_setopt.o -MD -MP -MF $(DEPDIR)/curl-tool_setopt.Tpo -c -o curl-tool_setopt.o `test -f 'tool_setopt.c' || echo '$(srcdir)/'`tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/curl-tool_setopt.Tpo $(DEPDIR)/curl-tool_setopt.Po
@@@@ -1716,20 +1728,6 @@@@ curl-tool_xattr.obj: tool_xattr.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strtoofft.c' object='../lib/curl-strtoofft.obj' libtool=no @@AMDEPBACKSLASH@@
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o ../lib/curl-strtoofft.obj `if test -f '../lib/strtoofft.c'; then $(CYGPATH_W) '../lib/strtoofft.c'; else $(CYGPATH_W) '$(srcdir)/../lib/strtoofft.c'; fi`
-
-../lib/curl-strdup.o: ../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT ../lib/curl-strdup.o -MD -MP -MF ../lib/$(DEPDIR)/curl-strdup.Tpo -c -o ../lib/curl-strdup.o `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/curl-strdup.Tpo ../lib/$(DEPDIR)/curl-strdup.Po
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strdup.c' object='../lib/curl-strdup.o' libtool=no @@AMDEPBACKSLASH@@
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
-@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o ../lib/curl-strdup.o `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-
-../lib/curl-strdup.obj: ../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT ../lib/curl-strdup.obj -MD -MP -MF ../lib/$(DEPDIR)/curl-strdup.Tpo -c -o ../lib/curl-strdup.obj `if test -f '../lib/strdup.c'; then $(CYGPATH_W) '../lib/strdup.c'; else $(CYGPATH_W) '$(srcdir)/../lib/strdup.c'; fi`
-@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/curl-strdup.Tpo ../lib/$(DEPDIR)/curl-strdup.Po
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strdup.c' object='../lib/curl-strdup.obj' libtool=no @@AMDEPBACKSLASH@@
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
-@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o ../lib/curl-strdup.obj `if test -f '../lib/strdup.c'; then $(CYGPATH_W) '../lib/strdup.c'; else $(CYGPATH_W) '$(srcdir)/../lib/strdup.c'; fi`
 
 ../lib/curl-rawstr.o: ../lib/rawstr.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT ../lib/curl-rawstr.o -MD -MP -MF ../lib/$(DEPDIR)/curl-rawstr.Tpo -c -o ../lib/curl-rawstr.o `test -f '../lib/rawstr.c' || echo '$(srcdir)/'`../lib/rawstr.c
@


1.7.2.1
log
@Security fixes for
CVE-2014-3707: libcurl duphandle read out of bounds
CVE-2014-8150: URL request injection
@
text
@d1 12
a12 212
$OpenBSD$

CVE-2014-3707: libcurl duphandle read out of bounds                             
http://curl.haxx.se/docs/adv_20141105.html

--- src/Makefile.in.orig	Mon Dec 16 23:11:28 2013
+++ src/Makefile.in	Sun Jan 11 23:16:56 2015
@@@@ -129,9 +129,9 @@@@ am__libcurltool_la_SOURCES_DIST = tool_binmode.c tool_
 	tool_homedir.c tool_hugehelp.c tool_libinfo.c tool_main.c \
 	tool_metalink.c tool_mfiles.c tool_msgs.c tool_operate.c \
 	tool_operhlp.c tool_panykey.c tool_paramhlp.c tool_parsecfg.c \
-	tool_setopt.c tool_sleep.c tool_urlglob.c tool_util.c \
-	tool_vms.c tool_writeenv.c tool_writeout.c tool_xattr.c \
-	../lib/strtoofft.c ../lib/strdup.c ../lib/rawstr.c \
+	tool_strdup.c tool_setopt.c tool_sleep.c tool_urlglob.c \
+	tool_util.c tool_vms.c tool_writeenv.c tool_writeout.c \
+	tool_xattr.c ../lib/strtoofft.c ../lib/rawstr.c \
 	../lib/nonblock.c tool_binmode.h tool_bname.h tool_cb_dbg.h \
 	tool_cb_hdr.h tool_cb_prg.h tool_cb_rea.h tool_cb_see.h \
 	tool_cb_wrt.h tool_cfgable.h tool_convert.h tool_dirhie.h \
@@@@ -140,9 +140,9 @@@@ am__libcurltool_la_SOURCES_DIST = tool_binmode.c tool_
 	tool_hugehelp.h tool_libinfo.h tool_main.h tool_metalink.h \
 	tool_mfiles.h tool_msgs.h tool_operate.h tool_operhlp.h \
 	tool_panykey.h tool_paramhlp.h tool_parsecfg.h tool_sdecls.h \
-	tool_setopt.h tool_setup.h tool_sleep.h tool_urlglob.h \
-	tool_util.h tool_version.h tool_vms.h tool_writeenv.h \
-	tool_writeout.h tool_xattr.h
+	tool_setopt.h tool_setup.h tool_sleep.h tool_strdup.h \
+	tool_urlglob.h tool_util.h tool_version.h tool_vms.h \
+	tool_writeenv.h tool_writeout.h tool_xattr.h
 am__objects_1 = libcurltool_la-tool_binmode.lo \
 	libcurltool_la-tool_bname.lo libcurltool_la-tool_cb_dbg.lo \
 	libcurltool_la-tool_cb_hdr.lo libcurltool_la-tool_cb_prg.lo \
@@@@ -159,14 +159,13 @@@@ am__objects_1 = libcurltool_la-tool_binmode.lo \
 	libcurltool_la-tool_msgs.lo libcurltool_la-tool_operate.lo \
 	libcurltool_la-tool_operhlp.lo libcurltool_la-tool_panykey.lo \
 	libcurltool_la-tool_paramhlp.lo \
-	libcurltool_la-tool_parsecfg.lo libcurltool_la-tool_setopt.lo \
-	libcurltool_la-tool_sleep.lo libcurltool_la-tool_urlglob.lo \
-	libcurltool_la-tool_util.lo libcurltool_la-tool_vms.lo \
-	libcurltool_la-tool_writeenv.lo \
+	libcurltool_la-tool_parsecfg.lo libcurltool_la-tool_strdup.lo \
+	libcurltool_la-tool_setopt.lo libcurltool_la-tool_sleep.lo \
+	libcurltool_la-tool_urlglob.lo libcurltool_la-tool_util.lo \
+	libcurltool_la-tool_vms.lo libcurltool_la-tool_writeenv.lo \
 	libcurltool_la-tool_writeout.lo libcurltool_la-tool_xattr.lo
 am__dirstamp = $(am__leading_dot)dirstamp
 am__objects_2 = ../lib/libcurltool_la-strtoofft.lo \
-	../lib/libcurltool_la-strdup.lo \
 	../lib/libcurltool_la-rawstr.lo \
 	../lib/libcurltool_la-nonblock.lo
 am__objects_3 =
@@@@ -199,13 +198,13 @@@@ am__objects_5 = curl-tool_binmode.$(OBJEXT) curl-tool_
 	curl-tool_msgs.$(OBJEXT) curl-tool_operate.$(OBJEXT) \
 	curl-tool_operhlp.$(OBJEXT) curl-tool_panykey.$(OBJEXT) \
 	curl-tool_paramhlp.$(OBJEXT) curl-tool_parsecfg.$(OBJEXT) \
-	curl-tool_setopt.$(OBJEXT) curl-tool_sleep.$(OBJEXT) \
-	curl-tool_urlglob.$(OBJEXT) curl-tool_util.$(OBJEXT) \
-	curl-tool_vms.$(OBJEXT) curl-tool_writeenv.$(OBJEXT) \
-	curl-tool_writeout.$(OBJEXT) curl-tool_xattr.$(OBJEXT)
+	curl-tool_strdup.$(OBJEXT) curl-tool_setopt.$(OBJEXT) \
+	curl-tool_sleep.$(OBJEXT) curl-tool_urlglob.$(OBJEXT) \
+	curl-tool_util.$(OBJEXT) curl-tool_vms.$(OBJEXT) \
+	curl-tool_writeenv.$(OBJEXT) curl-tool_writeout.$(OBJEXT) \
+	curl-tool_xattr.$(OBJEXT)
 am__objects_6 = ../lib/curl-strtoofft.$(OBJEXT) \
-	../lib/curl-strdup.$(OBJEXT) ../lib/curl-rawstr.$(OBJEXT) \
-	../lib/curl-nonblock.$(OBJEXT)
+	../lib/curl-rawstr.$(OBJEXT) ../lib/curl-nonblock.$(OBJEXT)
 am_curl_OBJECTS = $(am__objects_5) $(am__objects_6) $(am__objects_3)
 curl_OBJECTS = $(am_curl_OBJECTS)
 curl_LINK = $(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) \
@@@@ -506,7 +505,6 @@@@ AM_CPPFLAGS = -I$(top_builddir)/include/curl -I$(top_b
 # the official API, but we re-use the code here to avoid duplication.
 CURLX_ONES = \
 	../lib/strtoofft.c \
-	../lib/strdup.c \
 	../lib/rawstr.c \
 	../lib/nonblock.c
 
@@@@ -541,6 +539,7 @@@@ CURL_CFILES = \
 	tool_panykey.c \
 	tool_paramhlp.c \
 	tool_parsecfg.c \
+	tool_strdup.c \
 	tool_setopt.c \
 	tool_sleep.c \
 	tool_urlglob.c \
@@@@ -585,6 +584,7 @@@@ CURL_HFILES = \
 	tool_setopt.h \
 	tool_setup.h \
 	tool_sleep.h \
+	tool_strdup.h \
 	tool_urlglob.h \
 	tool_util.h \
 	tool_version.h \
@@@@ -673,8 +673,6 @@@@ clean-noinstLTLIBRARIES:
 	@@: > ../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/libcurltool_la-strtoofft.lo: ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
-../lib/libcurltool_la-strdup.lo: ../lib/$(am__dirstamp) \
-	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/libcurltool_la-rawstr.lo: ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/libcurltool_la-nonblock.lo: ../lib/$(am__dirstamp) \
@@@@ -733,8 +731,6 @@@@ clean-binPROGRAMS:
 	rm -f $$list
 ../lib/curl-strtoofft.$(OBJEXT): ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
-../lib/curl-strdup.$(OBJEXT): ../lib/$(am__dirstamp) \
-	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/curl-rawstr.$(OBJEXT): ../lib/$(am__dirstamp) \
 	../lib/$(DEPDIR)/$(am__dirstamp)
 ../lib/curl-nonblock.$(OBJEXT): ../lib/$(am__dirstamp) \
@@@@ -754,11 +750,9 @@@@ distclean-compile:
 
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-nonblock.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-rawstr.Po@@am__quote@@
-@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-strdup.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/curl-strtoofft.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-nonblock.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-rawstr.Plo@@am__quote@@
-@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-strdup.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@../lib/$(DEPDIR)/libcurltool_la-strtoofft.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_binmode.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_bname.Po@@am__quote@@
@@@@ -792,6 +786,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_parsecfg.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_setopt.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_sleep.Po@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_strdup.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_urlglob.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_util.Po@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/curl-tool_vms.Po@@am__quote@@
@@@@ -830,6 +825,7 @@@@ distclean-compile:
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_parsecfg.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_setopt.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_sleep.Plo@@am__quote@@
+@@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_strdup.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_urlglob.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_util.Plo@@am__quote@@
 @@AMDEP_TRUE@@@@am__include@@ @@am__quote@@./$(DEPDIR)/libcurltool_la-tool_vms.Plo@@am__quote@@
@@@@ -1071,6 +1067,13 @@@@ libcurltool_la-tool_parsecfg.lo: tool_parsecfg.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o libcurltool_la-tool_parsecfg.lo `test -f 'tool_parsecfg.c' || echo '$(srcdir)/'`tool_parsecfg.c
 
+libcurltool_la-tool_strdup.lo: tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT libcurltool_la-tool_strdup.lo -MD -MP -MF $(DEPDIR)/libcurltool_la-tool_strdup.Tpo -c -o libcurltool_la-tool_strdup.lo `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/libcurltool_la-tool_strdup.Tpo $(DEPDIR)/libcurltool_la-tool_strdup.Plo
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='tool_strdup.c' object='libcurltool_la-tool_strdup.lo' libtool=yes @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o libcurltool_la-tool_strdup.lo `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+
 libcurltool_la-tool_setopt.lo: tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT libcurltool_la-tool_setopt.lo -MD -MP -MF $(DEPDIR)/libcurltool_la-tool_setopt.Tpo -c -o libcurltool_la-tool_setopt.lo `test -f 'tool_setopt.c' || echo '$(srcdir)/'`tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/libcurltool_la-tool_setopt.Tpo $(DEPDIR)/libcurltool_la-tool_setopt.Plo
@@@@ -1134,13 +1137,6 @@@@ libcurltool_la-tool_xattr.lo: tool_xattr.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o ../lib/libcurltool_la-strtoofft.lo `test -f '../lib/strtoofft.c' || echo '$(srcdir)/'`../lib/strtoofft.c
 
-../lib/libcurltool_la-strdup.lo: ../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT ../lib/libcurltool_la-strdup.lo -MD -MP -MF ../lib/$(DEPDIR)/libcurltool_la-strdup.Tpo -c -o ../lib/libcurltool_la-strdup.lo `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/libcurltool_la-strdup.Tpo ../lib/$(DEPDIR)/libcurltool_la-strdup.Plo
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strdup.c' object='../lib/libcurltool_la-strdup.lo' libtool=yes @@AMDEPBACKSLASH@@
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
-@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -c -o ../lib/libcurltool_la-strdup.lo `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-
 ../lib/libcurltool_la-rawstr.lo: ../lib/rawstr.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(LIBTOOL) $(AM_V_lt) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcurltool_la_CPPFLAGS) $(CPPFLAGS) $(libcurltool_la_CFLAGS) $(CFLAGS) -MT ../lib/libcurltool_la-rawstr.lo -MD -MP -MF ../lib/$(DEPDIR)/libcurltool_la-rawstr.Tpo -c -o ../lib/libcurltool_la-rawstr.lo `test -f '../lib/rawstr.c' || echo '$(srcdir)/'`../lib/rawstr.c
 @@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/libcurltool_la-rawstr.Tpo ../lib/$(DEPDIR)/libcurltool_la-rawstr.Plo
@@@@ -1575,6 +1571,20 @@@@ curl-tool_parsecfg.obj: tool_parsecfg.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o curl-tool_parsecfg.obj `if test -f 'tool_parsecfg.c'; then $(CYGPATH_W) 'tool_parsecfg.c'; else $(CYGPATH_W) '$(srcdir)/tool_parsecfg.c'; fi`
 
+curl-tool_strdup.o: tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT curl-tool_strdup.o -MD -MP -MF $(DEPDIR)/curl-tool_strdup.Tpo -c -o curl-tool_strdup.o `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/curl-tool_strdup.Tpo $(DEPDIR)/curl-tool_strdup.Po
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='tool_strdup.c' object='curl-tool_strdup.o' libtool=no @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o curl-tool_strdup.o `test -f 'tool_strdup.c' || echo '$(srcdir)/'`tool_strdup.c
+
+curl-tool_strdup.obj: tool_strdup.c
+@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT curl-tool_strdup.obj -MD -MP -MF $(DEPDIR)/curl-tool_strdup.Tpo -c -o curl-tool_strdup.obj `if test -f 'tool_strdup.c'; then $(CYGPATH_W) 'tool_strdup.c'; else $(CYGPATH_W) '$(srcdir)/tool_strdup.c'; fi`
+@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/curl-tool_strdup.Tpo $(DEPDIR)/curl-tool_strdup.Po
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='tool_strdup.c' object='curl-tool_strdup.obj' libtool=no @@AMDEPBACKSLASH@@
+@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
+@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o curl-tool_strdup.obj `if test -f 'tool_strdup.c'; then $(CYGPATH_W) 'tool_strdup.c'; else $(CYGPATH_W) '$(srcdir)/tool_strdup.c'; fi`
+
 curl-tool_setopt.o: tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT curl-tool_setopt.o -MD -MP -MF $(DEPDIR)/curl-tool_setopt.Tpo -c -o curl-tool_setopt.o `test -f 'tool_setopt.c' || echo '$(srcdir)/'`tool_setopt.c
 @@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) $(DEPDIR)/curl-tool_setopt.Tpo $(DEPDIR)/curl-tool_setopt.Po
@@@@ -1700,20 +1710,6 @@@@ curl-tool_xattr.obj: tool_xattr.c
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strtoofft.c' object='../lib/curl-strtoofft.obj' libtool=no @@AMDEPBACKSLASH@@
 @@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
 @@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o ../lib/curl-strtoofft.obj `if test -f '../lib/strtoofft.c'; then $(CYGPATH_W) '../lib/strtoofft.c'; else $(CYGPATH_W) '$(srcdir)/../lib/strtoofft.c'; fi`
-
-../lib/curl-strdup.o: ../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT ../lib/curl-strdup.o -MD -MP -MF ../lib/$(DEPDIR)/curl-strdup.Tpo -c -o ../lib/curl-strdup.o `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/curl-strdup.Tpo ../lib/$(DEPDIR)/curl-strdup.Po
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strdup.c' object='../lib/curl-strdup.o' libtool=no @@AMDEPBACKSLASH@@
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
-@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o ../lib/curl-strdup.o `test -f '../lib/strdup.c' || echo '$(srcdir)/'`../lib/strdup.c
-
-../lib/curl-strdup.obj: ../lib/strdup.c
-@@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT ../lib/curl-strdup.obj -MD -MP -MF ../lib/$(DEPDIR)/curl-strdup.Tpo -c -o ../lib/curl-strdup.obj `if test -f '../lib/strdup.c'; then $(CYGPATH_W) '../lib/strdup.c'; else $(CYGPATH_W) '$(srcdir)/../lib/strdup.c'; fi`
-@@am__fastdepCC_TRUE@@	$(AM_V_at)$(am__mv) ../lib/$(DEPDIR)/curl-strdup.Tpo ../lib/$(DEPDIR)/curl-strdup.Po
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	$(AM_V_CC)source='../lib/strdup.c' object='../lib/curl-strdup.obj' libtool=no @@AMDEPBACKSLASH@@
-@@AMDEP_TRUE@@@@am__fastdepCC_FALSE@@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @@AMDEPBACKSLASH@@
-@@am__fastdepCC_FALSE@@	$(AM_V_CC@@am__nodep@@)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o ../lib/curl-strdup.obj `if test -f '../lib/strdup.c'; then $(CYGPATH_W) '../lib/strdup.c'; else $(CYGPATH_W) '$(srcdir)/../lib/strdup.c'; fi`
 
 ../lib/curl-rawstr.o: ../lib/rawstr.c
 @@am__fastdepCC_TRUE@@	$(AM_V_CC)$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(curl_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT ../lib/curl-rawstr.o -MD -MP -MF ../lib/$(DEPDIR)/curl-rawstr.Tpo -c -o ../lib/curl-rawstr.o `test -f '../lib/rawstr.c' || echo '$(srcdir)/'`../lib/rawstr.c
@


1.6
log
@keep up with upstream and update to 7.21.1; remove dead mirrors
@
text
@d1 1
a1 1
$OpenBSD: patch-src_Makefile_in,v 1.5 2009/08/16 17:54:21 naddy Exp $
@


1.5
log
@SECURITY update to 7.19.6
Fixes libcurl embedded zero in cert name vulnerability, CVE-2009-2417.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.4 2009/01/21 21:17:27 naddy Exp $
--- src/Makefile.in.orig	Wed Jul 22 22:11:40 2009
+++ src/Makefile.in	Sun Aug 16 18:29:13 2009
@@@@ -79,7 +79,7 @@@@ LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $
@


1.4
log
@maintenance update to 7.19.3
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.3 2008/11/20 19:49:40 naddy Exp $
--- src/Makefile.in.orig	Tue Jan 13 13:05:12 2009
+++ src/Makefile.in	Wed Jan 21 16:57:02 2009
@@@@ -78,7 +78,7 @@@@ LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $
@


1.3
log
@update to 7.19.2, which has some bug fixes
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.2 2008/06/24 18:37:25 naddy Exp $
--- src/Makefile.in.orig	Mon Nov 10 16:23:19 2008
+++ src/Makefile.in	Thu Nov 20 19:50:15 2008
@@@@ -74,7 +74,7 @@@@ LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $
@


1.2
log
@update to 7.18.2
@
text
@d1 4
a4 4
$OpenBSD: patch-src_Makefile_in,v 1.1 2008/06/09 21:00:57 naddy Exp $
--- src/Makefile.in.orig	Sat Jun 14 18:39:05 2008
+++ src/Makefile.in	Sat Jun 14 18:39:17 2008
@@@@ -70,7 +70,7 @@@@ LTCOMPILE = $(LIBTOOL) --tag=CC --mode=compile $(CC) $
@


1.1
log
@Different workaround for link path ordering, keep build path out of
pkgconfig entry.  Problem reported by and ok landry@@.
@
text
@d1 5
a5 4
$OpenBSD$
--- src/Makefile.in.orig	Mon Jun  9 10:44:30 2008
+++ src/Makefile.in	Mon Jun  9 10:45:09 2008
@@@@ -67,7 +67,7 @@@@ LTCOMPILE = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(L
d7 3
a9 4
 LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
-	$(LDFLAGS) -o $@@
+	-L../lib/.libs $(LDFLAGS) -o $@@
@

