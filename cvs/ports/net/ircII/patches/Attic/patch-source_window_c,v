head	1.4;
access;
symbols
	OPENBSD_5_8:1.2.0.6
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2015.12.02.21.52.16;	author naddy;	state dead;
branches;
next	1.3;
commitid	IfxHoxB0jMAedxws;

1.3
date	2015.09.19.23.23.13;	author naddy;	state Exp;
branches;
next	1.2;
commitid	BhCGNyALqO7W3Eto;

1.2
date	2014.12.14.20.15.39;	author naddy;	state Exp;
branches;
next	1.1;
commitid	eybblWOqKrOXDfFK;

1.1
date	2014.11.23.19.37.40;	author naddy;	state Exp;
branches;
next	;
commitid	AuFEHQnL71qALcTw;


desc
@@


1.4
log
@Update to 20151120:
* fix a program hang upon invalid utf-8 sequences
* /lastlog no longer adds trailing ^Os to log files

ok Brad
@
text
@$OpenBSD: patch-source_window_c,v 1.3 2015/09/19 23:23:13 naddy Exp $
--- source/window.c.orig	Thu Sep  3 21:32:01 2015
+++ source/window.c	Thu Sep 17 17:44:54 2015
@@@@ -4515,7 +4515,8 @@@@ window_get_query_nick(Window *window)
 void
 add_to_window_log(Window *window, u_char *str)
 {
-	add_to_log(window->log_fp, str);
+	if (window->log)
+		add_to_log(window->log_fp, str);
 }
 
 LastlogInfo *
@


1.3
log
@maintenance update to 20150903; ok Brad
@
text
@d1 1
a1 1
$OpenBSD: patch-source_window_c,v 1.2 2014/12/14 20:15:39 naddy Exp $
@


1.2
log
@maintenance update to 20141122; ok brad@@
@
text
@d1 4
a4 4
$OpenBSD: patch-source_window_c,v 1.1 2014/11/23 19:37:40 naddy Exp $
--- source/window.c.orig	Sat Nov 22 22:29:00 2014
+++ source/window.c	Sun Dec 14 14:00:51 2014
@@@@ -4509,7 +4509,8 @@@@ window_get_query_nick(Window *window)
@


1.1
log
@* update to 20141028 for minor bug fixes
* fix a double logging bug that's been with us since 20140831
ok brad@@
@
text
@d1 4
a4 4
$OpenBSD$
--- source/window.c.orig	Wed Oct 29 07:49:55 2014
+++ source/window.c	Sat Nov 22 22:10:07 2014
@@@@ -4507,7 +4507,8 @@@@ window_get_query_nick(Window *window)
@

