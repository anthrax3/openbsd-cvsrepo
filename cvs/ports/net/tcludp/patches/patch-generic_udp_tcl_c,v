head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.10
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2014.10.15.10.31.21;	author sebastia;	state Exp;
branches;
next	;
commitid	SdPZWIkWh6onk3Xp;


desc
@@


1.1
log
@Update TclUDP to 1.0.11,
initial version from me, with lots of discussions and improvements
to my version from stu@@ and landry@@

OK to this version stu@@ (and landry@@ on my initial version)
@
text
@$OpenBSD$

Nothing to free when getaddrinfo returns error.

--- generic/udp_tcl.c.orig	Thu Oct  9 07:23:05 2014
+++ generic/udp_tcl.c	Thu Oct  9 07:23:25 2014
@@@@ -1315,7 +1315,6 @@@@ UdpMulticast(UdpState *statePtr, Tcl_Interp *interp, 
 
 		if (r != 0 ) {
 			Tcl_SetResult(interp, "invalid group name", TCL_STATIC);	
-			freeaddrinfo(result);
 			return TCL_ERROR;
 		} else {
 			memcpy(&mreq6.ipv6mr_multiaddr, &((struct sockaddr_in6*)(result->ai_addr))->sin6_addr,sizeof(mreq6.ipv6mr_multiaddr));
@
