head	1.3;
access;
symbols
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2013.08.07.11.47.51;	author sthen;	state dead;
branches;
next	1.2;

1.2
date	2013.01.13.10.12.52;	author brad;	state Exp;
branches
	1.2.4.1;
next	1.1;

1.1
date	2012.12.12.16.38.33;	author naddy;	state Exp;
branches;
next	;

1.2.4.1
date	2013.10.30.12.48.54;	author jasper;	state dead;
branches;
next	;


desc
@@


1.3
log
@SECURITY update to PuTTY 0.63 - ok brad@@

- Vulnerability: non-coprime values in DSA signatures can cause buffer
overflow in modular inverse
- Vulnerability: buffer underrun in modmul can corrupt the heap
- Vulnerability: negative string length in public-key signatures can
cause integer overflow and overwrite all of memory
- Private keys left in memory after being used by PuTTY tools

N.B. some of these vulnerabilities where an SSH-2 server can make PuTTY
overrun or underrun buffers can be triggered *before* host key verification
so there is a risk from a spoofed server. For more info see the 0.63
section of http://www.chiark.greenend.org.uk/~sgtatham/putty/wishlist/
@
text
@$OpenBSD: patch-unix_uxpty_c,v 1.2 2013/01/13 10:12:52 brad Exp $
--- unix/uxpty.c.orig	Wed Mar  2 14:12:42 2011
+++ unix/uxpty.c	Thu Dec 27 01:30:33 2012
@@@@ -335,12 +335,21 @@@@ static void pty_open_master(Pty pty)
     chown(pty->name, getuid(), gp ? gp->gr_gid : -1);
     chmod(pty->name, 0600);
 #else
+#ifdef HAVE_POSIX_OPENPT
+    pty->master_fd = posix_openpt(O_RDWR|O_NOCTTY);
+
+    if (pty->master_fd < 0) {
+	perror("posix_openpt");
+	exit(1);
+    }
+#else
     pty->master_fd = open("/dev/ptmx", O_RDWR);
 
     if (pty->master_fd < 0) {
 	perror("/dev/ptmx: open");
 	exit(1);
     }
+#endif
 
     if (grantpt(pty->master_fd) < 0) {
 	perror("grantpt");
@


1.2
log
@Update to PuTTY 0.62.

ok djm@@
@
text
@d1 1
a1 1
$OpenBSD: patch-unix_uxpty_c,v 1.1 2012/12/12 16:38:33 naddy Exp $
@


1.2.4.1
log
@Security update to putty-0.63 which fixes CVE-2013-4206, CVE-2013-4207, CVE-2013-4208
@
text
@d1 1
a1 1
$OpenBSD: patch-unix_uxpty_c,v 1.2 2013/01/13 10:12:52 brad Exp $
@


1.1
log
@We need to use posix_openpt().
Pull in aclocal because the distributed source doesn't include aclocal.m4.
ok djm@@
@
text
@d1 4
a4 4
$OpenBSD$
--- unix/uxpty.c.orig	Tue Dec 11 23:41:14 2012
+++ unix/uxpty.c	Tue Dec 11 23:43:15 2012
@@@@ -333,12 +333,21 @@@@ static void pty_open_master(Pty pty)
@

