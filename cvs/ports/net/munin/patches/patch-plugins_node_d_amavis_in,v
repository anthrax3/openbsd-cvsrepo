head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.18
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.16
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.12
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.14
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.10
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.8
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.6
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.4
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.2
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2012.10.12.09.46.46;	author kirby;	state Exp;
branches;
next	1.1;

1.1
date	2012.07.11.03.46.42;	author william;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Major update to munin-2.0.7
Full changelog is here:
https://github.com/munin-monitoring/munin/blob/2.0.7/ChangeLog

Lots of input and help from sthen@@ (maintainer)
ok sthen@@

P.S. Your config may need some manual interference.
@
text
@$OpenBSD: patch-plugins_node_d_amavis_in,v 1.1 2012/07/11 03:46:42 william Exp $
--- plugins/node.d/amavis.in.orig	Tue Oct  2 23:46:50 2012
+++ plugins/node.d/amavis.in	Tue Oct  9 22:03:32 2012
@@@@ -20,11 +20,11 @@@@ The configuration environment variables are available
 
 =item amavislog
 
-Path to logfile (Default: "/var/log/mail/mail.info")
+Path to logfile (Default: "/var/log/maillog")
 
 =item logtail
 
-Path to logtail command (Default: "logtail")
+Path to logtail command (Default: "/usr/local/bin/logtail")
 
 =back
 
@@@@ -41,8 +41,8 @@@@ the full path for the program.
 The following shows a typical configuration:
 
   [amavis]
-     env.amavislog     /var/log/mail/mail.info
-     env.logtail       /usr/bin/logtail
+     env.amavislog     /var/log/maillog
+     env.logtail       /usr/local/bin/logtail
      group adm
 
 =head1 INTERPRETATION
@@@@ -77,12 +77,11 @@@@ GPLv2
 =cut
 
 mktempfile () {
-    cmd=`echo $MUNIN_MKTEMP | sed s/\\$1/$1/`
-    $cmd
+    @@@@MKTEMP@@@@
 }
 
-AMAVIS_LOG=${amavislog:-/var/log/mail/mail.info}
-LOGTAIL=${logtail:-logtail}
+AMAVIS_LOG=${amavislog:-/var/log/maillog}
+LOGTAIL=${logtail:-/usr/local/bin/logtail}
 STATEFILE=$MUNIN_PLUGSTATE/amavis.offset
 
 if [ "$1" = "autoconf" ]; then
@


1.1
log
@Add dependency on logtail and enable the amavis, courier, mailscanner,
and perdition plugins.  The dependency can be satisfied by either the
logtail or logsentry ports (thanks to sthen for realizing this!)

ok sthen
@
text
@d1 3
a3 3
$OpenBSD$
--- plugins/node.d/amavis.in.orig	Sat Mar  3 23:23:22 2012
+++ plugins/node.d/amavis.in	Sat Mar  3 23:29:47 2012
d29 7
a35 2
@@@@ -81,8 +81,8 @@@@ mktempfile () {
     $cmd
@

