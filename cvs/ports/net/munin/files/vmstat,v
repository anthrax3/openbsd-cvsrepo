head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.24
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.20
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.22
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.18
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.16
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.14
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.12
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.10
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.8
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.6
	OPENBSD_5_0:1.2.0.4
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.2
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.1.1.1.0.4
	OPENBSD_4_8_BASE:1.1.1.1
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	sthen_20091117:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2010.10.23.15.52.22;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.11.17.11.11.20;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.11.17.11.11.20;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update Munin to 1.45, joint work with & ok jasper@@
@
text
@#!/bin/sh
#
# $OpenBSD: vmstat,v 1.1.1.1 2009/11/17 11:11:20 sthen Exp $
#
# Adapted from node/node.d.freebsd/vmstat.in
#
# Plugin to monitor the number of procs in io-sleep and other wait
# states. Uses `vmstat`.
#
# Parameters: 
#
# 	config   (required)
# 	autoconf (optional - used by munin-config)
#
# _Log$
# Revision 1.4.2.1  2005/01/28 14:51:22  lupe
# Add graph_info and some filed.info
#
# Revision 1.5  2005/01/28 14:47:31  lupe
# Add graph_info and some filed.info
#
# Revision 1.4  2004/11/28 09:43:54  lupe
# 6-CURRENT support
#
# Revision 1.3  2004/05/20 19:02:36  jimmyo
# Set categories on a bunch of plugins
#
# Revision 1.2  2004/02/01 18:59:54  lupe
# FreeBSD 5 compatibility.
#
# Revision 1.1  2004/01/02 18:50:00  jimmyo
# Renamed occurrances of lrrd -> munin
#
# Revision 1.1.1.1  2004/01/02 15:18:07  jimmyo
# Import of LRRD CVS tree after renaming to Munin
#
# Revision 1.2  2003/11/07 17:43:16  jimmyo
# Cleanups and log entries
#
#
#
# Magick markers (optional):
#%# family=auto
#%# capabilities=autoconf



if [ "$1" = "autoconf" ]; then
	/usr/bin/vmstat 1 1 2>/dev/null >/dev/null
	RESULT=$?
	NAME=/usr/bin/vmstat
	if [ $RESULT -eq 0 ]; then
		echo yes
		exit 0
	else
		if [ $RESULT -eq 127 ]; then
			echo "no (could not run \"$NAME\")"
			exit 1
		else
			echo no
			exit 1
		fi
	fi
fi

if [ "$1" = "config" ]; then
	echo 'graph_title VMstat'
	echo 'graph_args --base 1000 -l 0'
	echo 'graph_vlabel process states'
	echo 'graph_category processes'
	echo 'graph_info This graph shows number of processes in each state.'
	echo 'running.label running'
	echo 'running.info processes on CPU or waiting for CPU'
	echo 'running.type GAUGE'
	echo 'blocked.label wait'
	echo 'blocked.info processes blocked for resources (I/O, paging, etc)'
	echo 'blocked.type GAUGE'
	echo 'pagewait.label pagewait'
	echo 'pagewait.info processes waiting for page-in'
	echo 'pagewait.type GAUGE'
	exit 0
fi

/usr/bin/vmstat 1 2 | /usr/bin/awk 'END { print "running.value " $1 "\nblocked.value " $2 "\npagewait.value " $3}' 
@


1.1
log
@Initial revision
@
text
@d3 1
a3 1
# $OpenBSD$
d84 1
a84 1
/usr/bin/vmstat 1 2 | /usr/bin/awk 'END { print "wait.value " $1 "\nblocked.value " $2 "\npagewait.value " $3}' 
@


1.1.1.1
log
@import ports/net/munin, this was joint work with mk@@ and includes
a couple of his OpenBSD-specific plugins.

Munin the monitoring tool surveys all your computers and
remembers what it saw. It presents all the information in graphs
through a web interface. Its emphasis is on plug and play
capabilities. After completing an installation a high number
of monitoring plugins will be playing with no more effort.

Using Munin you can easily monitor the performance of your
computers, networks, SANs, applications, weather measurements
and whatever comes to mind. It makes it easy to determine
"what's different today" when a performance problem crops up. It
makes it easy to see how you're doing capacity-wise on any
resources.
@
text
@@
