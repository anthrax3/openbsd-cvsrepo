head	1.6;
access;
symbols
	OPENBSD_6_2:1.6.0.10
	OPENBSD_6_2_BASE:1.6
	OPENBSD_6_1:1.6.0.8
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.6.0.6
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.6.0.2
	OPENBSD_5_9_BASE:1.6
	OPENBSD_5_8:1.6.0.4
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.5.0.4
	OPENBSD_5_7_BASE:1.5
	OPENBSD_5_6:1.5.0.2
	OPENBSD_5_6_BASE:1.5
	OPENBSD_5_5:1.3.0.2
	OPENBSD_5_5_BASE:1.3
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2;
locks; strict;
comment	@# @;


1.6
date	2015.07.06.12.13.54;	author kirby;	state Exp;
branches;
next	1.5;
commitid	CrzCiUuO41lPfn74;

1.5
date	2014.07.22.10.55.40;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	3LzguPEQl5LkjlcD;

1.4
date	2014.03.25.08.42.25;	author kirby;	state Exp;
branches;
next	1.3;

1.3
date	2014.01.15.08.24.26;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2013.06.03.19.45.32;	author kirby;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.22.15.00.29;	author kirby;	state Exp;
branches;
next	;


desc
@@


1.6
log
@`sudo` is not in base anymore. show how to use `su` in README
ok sthen@@
@
text
@$OpenBSD: README-server,v 1.5 2014/07/22 10:55:40 ajacoutot Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

After configuring at least one munin-node instance and adapting
${SYSCONFDIR}/munin/munin.conf as desired, you may run the periodic
tasks from cron with the following line:

*/5     *       *       *       *       su  -s /bin/sh _munin ${TRUEPREFIX}/bin/munin-cron

Log files in /var/log/munin will need to be rotated. Here is a sample
newsyslog.conf fragment:

/var/log/munin/munin-graph.log  _munin:_munin   644  7     250  *     Z
/var/log/munin/munin-html.log   _munin:_munin   644  7     250  *     Z
/var/log/munin/munin-limits.log _munin:_munin   644  7     250  *     Z
/var/log/munin/munin-update.log _munin:_munin   644  7     250  *     Z

Optionally you may want to use rrdcached to reduce disk I/O. Here is a sample
/etc/rc.conf.local part:
rrdcached_flags=-b /var/db/munin -l unix:/var/run/munin/rrdcached.sock -j /var/db/munin/journal -p /var/run/munin/rrdcached.pid -m 0660 -s _munin -w 1800 -z 1800 -f 3600 -F
rrdcached_user=_munin
Add www user to _munin group to grant write permissions on rrdcached socket.
@


1.5
log
@Tweak documentation according to recent rc changes.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: README-server,v 1.4 2014/03/25 08:42:25 kirby Exp $
d11 1
a11 1
*/5     *       *       *       *       sudo -u _munin ${TRUEPREFIX}/bin/munin-cron
@


1.4
log
@update munin to 2.0.19 and add some improvements:
 - unbreak munin-check script and make it useful
 - move a note of newsyslog.conf fragment for munin-node.log to README-main
 - add missing { in README-server
 - instructions about reducing disk I/O with rrdcached.

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README-server,v 1.3 2014/01/15 08:24:26 sthen Exp $
d23 2
a24 4
rrdcached_flags="-b /var/db/munin -l unix:/var/run/munin/rrdcached.sock \
-j /var/db/munin/journal -p /var/run/munin/rrdcached.pid \
-m 0660 -s _munin -w 1800 -z 1800 -f 3600 -F"
rrdcached_user="_munin"
@


1.3
log
@tell people to trim munin's logs, with a newsyslog.conf fragment.
found the hard way by me
@
text
@d1 1
a1 1
$OpenBSD: README-server,v 1.2 2013/06/03 19:45:32 kirby Exp $
d8 1
a8 1
$SYSCONFDIR}/munin/munin.conf as desired, you may run the periodic
a18 1
/var/log/munin/munin-node.log   root:wheel      644  7     250  *     Z
d20 8
@


1.2
log
@Update to 2.0.14:
 - remove swap plugin as we don't have swapin/swapout anymore;
 - regen patches while here (some hints from rpe@@);
 - fix typo in README (from rpe@@).
@
text
@d1 1
a1 1
$OpenBSD: README-server,v 1.1 2013/03/22 15:00:29 kirby Exp $
d12 9
@


1.1
log
@ - bugfix update to 2.0.21
 - move MESSAGE-* to README-*
 - enable memory plugin from NetBSD
 - disable FreeBSD's iostat plugin

With input from rpe@@ and tweaks from sthen@@. Thanks!
OK sthen@@
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.2 2012/12/09 22:05:25 rpe Exp $
d11 1
a11 1
*/5     *       *       *       *       sudo -u _munin ${TRUEPRIFIX}/bin/munin-cron
@

