head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2014.02.07.08.56.53;	author brad;	state dead;
branches;
next	1.1;

1.1
date	2014.01.25.05.27.13;	author brad;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to darkstat 3.0.718.

- Contains additional time_t related fixes.
- The author removed an assertion in timer_stop() I had run into and even
  though monotonic time is used somehow time went backwards.
- Change the rc.d script to use localhost instead of 127.0.0.1 to have
  darkstat also bind to the v6 address.

ok sthen@@
@
text
@$OpenBSD: patch-now_h,v 1.1 2014/01/25 05:27:13 brad Exp $
--- now.h.orig	Mon Jan 20 16:26:57 2014
+++ now.h	Mon Jan 20 16:18:05 2014
@@@@ -20,11 +20,11 @@@@
 void now_init(void);
 void now_update(void); /* once per event loop (in darkstat.c) */
 
-long now_real(void);
-long now_mono(void);
+time_t now_real(void);
+time_t now_mono(void);
 
-long mono_to_real(const long t);
-long real_to_mono(const long t);
+time_t mono_to_real(const time_t t);
+time_t real_to_mono(const time_t t);
 
 /* Emits warnings if a call is too slow. */
 struct timespec;
@


1.1
log
@An attempt at trying to fix the time_t related issues with darkstat. Replace
some long's with time_t. Fixes darkstat on 32-bit archs.

From Remi Locherer

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@

