head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.8
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.01.16.19.39.24;	author sthen;	state Exp;
branches;
next	;
commitid	YFsZQAmBFCcUK1sX;


desc
@@


1.1
log
@MAXHOSTNAMELEN -> HOST_NAME_MAX+1 and pull in limits.h
@
text
@$OpenBSD$
--- mdnsd/mdns.h.orig	Fri Jan 16 12:35:47 2015
+++ mdnsd/mdns.h	Fri Jan 16 12:37:50 2015
@@@@ -28,9 +28,10 @@@@
 
 #include <imsg.h>
 #include <event.h>
+#include <limits.h>
 #include <string.h>
 
-#define MAXCHARSTR	MAXHOSTNAMELEN
+#define MAXCHARSTR	HOST_NAME_MAX+1
 #define MAXLABELLEN	64
 #define MAXPROTOLEN	4
 #define MDNSD_SOCKET    "/var/run/mdnsd.sock"
@@@@ -89,8 +90,8 @@@@ struct mdns_service {
 	LIST_ENTRY(mdns_service) entry;
 	char		app[MAXLABELLEN];
 	char		proto[MAXPROTOLEN];
-	char		name[MAXHOSTNAMELEN];
-	char		target[MAXHOSTNAMELEN];
+	char		name[HOST_NAME_MAX+1];
+	char		target[HOST_NAME_MAX+1];
 	u_int16_t	priority;
 	u_int16_t	weight;
 	u_int16_t	port;
@@@@ -135,6 +136,6 @@@@ int	mdns_group_reset(struct mdns *, const char *);
 int	mdns_group_add_service(struct mdns *, const char *, struct mdns_service *);
 int	mdns_group_commit(struct mdns *, const char *);
 
-void	reversstr(char [MAXHOSTNAMELEN], struct in_addr *);
+void	reversstr(char [HOST_NAME_MAX+1], struct in_addr *);
 
 #endif	/* _MDNS_H_ */
@
