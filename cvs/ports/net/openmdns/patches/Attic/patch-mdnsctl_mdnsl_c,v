head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.09.17.15.43.59;	author gonzalo;	state dead;
branches;
next	1.1;
commitid	mJ6aCjgnWtPu3mkj;

1.1
date	2013.10.01.07.36.06;	author jca;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update for OpenMDNS to 0.6

* All patches are now in.
* Support for multiple iface

OK jca@@
@
text
@$OpenBSD: patch-mdnsctl_mdnsl_c,v 1.1 2013/10/01 07:36:06 jca Exp $
msgbuf_write() returns 1 on success
https://github.com/haesbaert/mdnsd/commit/cdd16e971a0204b8439b07a81879573e01fae4cb
--- mdnsctl/mdnsl.c.orig	Tue Oct  1 08:51:23 2013
+++ mdnsctl/mdnsl.c	Tue Oct  1 08:51:25 2013
@@@@ -510,7 +510,7 @@@@ ibuf_send_imsg(struct imsgbuf *ibuf, u_int32_t type,
 
 	imsg_close(ibuf, wbuf);
 
-	if (msgbuf_write(&ibuf->w))
+	if (msgbuf_write(&ibuf->w) == -1)
 		return (-1);
 
 	return (0);
@


1.1
log
@msgbuf_write() returns 1 on success.
From upstream via Dimitri Sokolyuk (demon at dim13 dot org), thanks!
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
@

