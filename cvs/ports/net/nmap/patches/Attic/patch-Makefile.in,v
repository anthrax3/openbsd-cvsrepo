head	1.3;
access;
symbols
	OPENBSD_2_7:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2000.10.09.22.08.17;	author avsm;	state dead;
branches;
next	1.2;

1.2
date	2000.09.08.23.28.13;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2000.08.02.00.52.24;	author brad;	state Exp;
branches;
next	;


desc
@@


1.3
log
@- update to nmap-2.54BETA6
- remove Makefile.in patch and use do-install to use the
  macros and make upgrading the port easier
- bump NEED_VERSION, add real name to MAINTAINER

ok angelos@@ (maintainer)
@
text
@--- Makefile.in.orig	Tue Sep  5 01:00:57 2000
+++ Makefile.in	Fri Sep  8 19:02:24 2000
@@@@ -11,12 +11,14 @@@@
 nmapdatadir = @@datadir@@/nmap
 deskdir = $(prefix)/share/gnome/apps/Utilities
 
+DESTDIR = 
+
 CC = @@CC@@
 CCOPT = 
 LIBPCAPDIR = @@libpcapdir@@
 INCLS = -I$(LIBPCAPDIR)
 DEFS = @@DEFS@@ -DNMAP_VERSION=\"$(NMAP_VERSION)\" -DNMAP_NAME=\"$(NMAP_NAME)\" -DNMAP_URL=\"$(NMAP_URL)\" -DNMAP_PLATFORM=\"$(NMAP_PLATFORM)\" -DNMAPDATADIR=\"$(nmapdatadir)\"
-CFLAGS = @@CFLAGS@@ $(CCOPT) $(DEFS) $(INCLS)
+CFLAGS = @@CFLAGS@@ $(CCOPT) $(DEFS)
 # CFLAGS = -g -Wall $(DEFS) $(INCLS)
 STATIC = 
 LDFLAGS = @@LDFLAGS@@ $(STATIC)
@@@@ -39,7 +41,7 @@@@
 
 all: $(TARGET) nmapfe/nmapfe
 
-$(TARGET): $(DEPS) @@PCAP_DEPENDS@@ $(OBJS)
+$(TARGET): $(DEPS) $(OBJS)
 	@@echo Compiling nmap
 	rm -f $@@
 	$(CC) $(LDFLAGS) -o $@@ $(OBJS) $(LIBS)
@@@@ -144,15 +146,13 @@@@
 	$(MAKEDEPEND) $(INCLS) -s "# DO NOT DELETE" -- $(DEFS) -- $(SRCS)
 
 install: $(TARGET)
-	$(SHTOOL) mkdir -f -p -m 755 $(bindir) $(mandir)/man1 $(nmapdatadir) $(deskdir)
-	$(INSTALL) -c -m 755 nmap $(bindir)/nmap
-	@@echo "If the next command fails -- you cannot use the X front end"
-	-test -f nmapfe/nmapfe && $(INSTALL) -c -m 755 nmapfe/nmapfe $(bindir)/nmapfe && $(SHTOOL) mkln -f -s $(bindir)/nmapfe $(bindir)/xnmap && $(INSTALL) -c -m 644 nmapfe.desktop $(deskdir)/nmapfe.desktop && $(INSTALL) -c -m 644 docs/nmapfe.1 $(mandir)/man1/nmapfe.1 && $(INSTALL) -c -m 644 docs/xnmap.1 $(mandir)/man1/xnmap.1
-	$(INSTALL) -c -m 644 docs/$(TARGET).1 $(mandir)/man1/$(TARGET).1
-	$(INSTALL) -c -m 644 nmap-os-fingerprints  $(nmapdatadir)/nmap-os-fingerprints
-	$(INSTALL) -c -m 644 nmap-services  $(nmapdatadir)/nmap-services
-	$(INSTALL) -c -m 644 nmap-protocols  $(nmapdatadir)/nmap-protocols
-	$(INSTALL) -c -m 644 nmap-rpc  $(nmapdatadir)/nmap-rpc
+	$(SHTOOL) mkdir -f -p -m 755 $(DESTDIR)$(bindir) $(DESTDIR)$(mandir)/man1 $(DESTDIR)$(nmapdatadir)
+	$(INSTALL) -c -m 755 nmap $(DESTDIR)$(bindir)/nmap
+	$(INSTALL) -c -m 644 docs/$(TARGET).1 $(DESTDIR)$(mandir)/man1/$(TARGET).1
+	$(INSTALL) -c -m 644 nmap-os-fingerprints $(DESTDIR)$(nmapdatadir)/nmap-os-fingerprints
+	$(INSTALL) -c -m 644 nmap-services $(DESTDIR)$(nmapdatadir)/nmap-services
+	$(INSTALL) -c -m 644 nmap-protocols $(DESTDIR)$(nmapdatadir)/nmap-protocols
+	$(INSTALL) -c -m 644 nmap-rpc $(DESTDIR)$(nmapdatadir)/nmap-rpc
 
 uninstall:
 	rm -f $(bindir)/$(TARGET) $(bindir)/nmapfe $(bindir)/xnmap
@


1.2
log
@upgrade to nmap 2.54b4
@
text
@@


1.1
log
@upgrade to nmap 2.54b2
@
text
@d1 10
a10 3
--- Makefile.in.orig	Tue Aug  1 03:49:40 2000
+++ Makefile.in	Tue Aug  1 20:39:49 2000
@@@@ -15,7 +15,7 @@@@
d13 1
a13 1
 DEFS = @@DEFS@@ -DNMAP_VERSION=\"$(NMAP_VERSION)\" -DNMAP_NAME=\"$(NMAP_NAME)\" -DNMAP_URL=\"$(NMAP_URL)\" -DNMAPDATADIR=\"$(nmapdatadir)\"
d19 1
a19 3
@@@@ -36,9 +36,9 @@@@
 
 DEPS = nmap.h error.h targets.h osscan.h tcpip.h utils.h global_structures.h charpool.h services.h protocols.h rpc.h portlist.h
d21 1
a21 2
-all: $(TARGET) nmapfe/nmapfe
+all: $(TARGET)
d28 1
a28 1
@@@@ -141,10 +141,8 @@@@
d33 1
a33 2
+	$(SHTOOL) mkdir -f -p -m 755 $(bindir) $(mandir)/man1 $(nmapdatadir)
 	$(INSTALL) -c -m 755 nmap $(bindir)/nmap
d36 15
a50 3
 	$(INSTALL) -c -m 644 docs/$(TARGET).1 $(mandir)/man1/$(TARGET).1
 	$(INSTALL) -c -m 644 nmap-os-fingerprints  $(nmapdatadir)/nmap-os-fingerprints
 	$(INSTALL) -c -m 644 nmap-services  $(nmapdatadir)/nmap-services
@

