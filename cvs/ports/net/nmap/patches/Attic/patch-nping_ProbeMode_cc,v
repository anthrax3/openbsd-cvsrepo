head	1.4;
access;
symbols
	OPENBSD_5_4:1.3.0.4
	OPENBSD_5_4_BASE:1.3
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3
	OPENBSD_5_2:1.2.0.2
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.4
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2014.02.10.17.43.15;	author sthen;	state dead;
branches;
next	1.3;

1.3
date	2012.12.19.17.12.11;	author giovanni;	state Exp;
branches;
next	1.2;

1.2
date	2012.07.16.07.39.31;	author giovanni;	state Exp;
branches;
next	1.1;

1.1
date	2011.03.28.09.01.24;	author giovanni;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update nmap to 6.40, and build with their bundled libpcap for now, bpf_timeval
patches are questionable and there's a timing-related problem to track down.
From giovanni@@ (maintainer) a while ago. Add a fix from jca@@ to fix a floating-
point related assertion failure seen on i386, reminded by zhuk@@. Committing the
update rather than the minimal assertion-fix diff as it has been more
extensively tested in the past (then slipped through the cracks), jasper@@
agrees. OK jasper@@ giovanni@@
@
text
@$OpenBSD: patch-nping_ProbeMode_cc,v 1.3 2012/12/19 17:12:11 giovanni Exp $
--- nping/ProbeMode.cc.orig	Wed Oct  3 17:43:18 2012
+++ nping/ProbeMode.cc	Fri Nov 30 12:41:48 2012
@@@@ -130,9 +130,9 @@@@ int ProbeMode::init_nsock(){
       /* Set nsock trace level */
       gettimeofday(&now, NULL);
       if( o.getDebugging() == DBG_5)
-        nsp_settrace(nsp, NULL, 1 , &now);
+        nsp_settrace(nsp, NULL, 1 , (const bpf_timeval*)&now);
       else if( o.getDebugging() > DBG_5 )
-        nsp_settrace(nsp, NULL, 10 , &now);
+        nsp_settrace(nsp, NULL, 10 , (const bpf_timeval*)&now);
       /* Flag it as already inited so we don't do it again */
       nsock_init=true;
   }
@@@@ -1521,8 +1521,8 @@@@ void ProbeMode::probe_nping_event_handler(nsock_pool n
  u16 *ethtype=NULL;
  u8 buffer[512+1];
  size_t link_offset=0;
- static struct timeval pcaptime;
- static struct timeval prevtime;
+ static struct bpf_timeval pcaptime;
+ static struct bpf_timeval prevtime;
  NpingTarget *trg=NULL;
  u16 *prt=NULL;
  u8 proto=0;
@


1.3
log
@
Update to 6.25
lot of improvements in nse scripting engine and in ipv6 support
Full changelog: http://nmap.org/changelog.html
Help and ok sthen@@ and dcoppa@@
@
text
@d1 1
a1 1
$OpenBSD: patch-nping_ProbeMode_cc,v 1.2 2012/07/16 07:39:31 giovanni Exp $
@


1.2
log
@
Major update to 6.01
tests & ok benoit@@, thanks
@
text
@d1 4
a4 4
$OpenBSD: patch-nping_ProbeMode_cc,v 1.1 2011/03/28 09:01:24 giovanni Exp $
--- nping/ProbeMode.cc.orig	Thu Mar  1 07:53:35 2012
+++ nping/ProbeMode.cc	Fri May 25 15:16:04 2012
@@@@ -129,9 +129,9 @@@@ int ProbeMode::init_nsock(){
d16 1
a16 1
@@@@ -1500,8 +1500,8 @@@@ void ProbeMode::probe_nping_event_handler(nsock_pool n
@


1.1
log
@
Update to version 5.51, lot of improvements since latest version,
full changelog available at http://nmap.org/changelog.html
Nping needs a very current libpcap to work as root
@
text
@d1 16
a16 4
$OpenBSD$
--- nping/ProbeMode.cc.orig	Wed Feb  2 17:12:11 2011
+++ nping/ProbeMode.cc	Wed Feb  2 17:12:51 2011
@@@@ -1506,8 +1506,8 @@@@ void ProbeMode::probe_nping_event_handler(nsock_pool n
@

