head	1.49;
access;
symbols
	OPENBSD_6_1:1.49.0.2
	OPENBSD_6_1_BASE:1.49
	OPENBSD_6_0:1.48.0.2
	OPENBSD_6_0_BASE:1.48
	OPENBSD_5_9:1.45.0.2
	OPENBSD_5_9_BASE:1.45
	OPENBSD_5_8:1.45.0.4
	OPENBSD_5_8_BASE:1.45
	OPENBSD_5_7:1.43.0.2
	OPENBSD_5_7_BASE:1.43
	OPENBSD_5_6:1.36.0.2
	OPENBSD_5_6_BASE:1.36
	OPENBSD_5_5:1.33.0.2
	OPENBSD_5_5_BASE:1.33
	OPENBSD_5_4:1.31.0.2
	OPENBSD_5_4_BASE:1.31
	OPENBSD_5_3:1.27.0.2
	OPENBSD_5_3_BASE:1.27
	OPENBSD_5_2:1.25.0.8
	OPENBSD_5_2_BASE:1.25
	OPENBSD_5_1_BASE:1.25
	OPENBSD_5_1:1.25.0.6
	OPENBSD_5_0:1.25.0.4
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.25.0.2
	OPENBSD_4_9_BASE:1.25
	OPENBSD_4_8:1.23.0.2
	OPENBSD_4_8_BASE:1.23
	OPENBSD_4_7:1.22.0.6
	OPENBSD_4_7_BASE:1.22
	OPENBSD_4_6:1.22.0.4
	OPENBSD_4_6_BASE:1.22
	OPENBSD_4_5:1.22.0.2
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.21.0.2
	OPENBSD_4_4_BASE:1.21
	OPENBSD_4_3:1.16.0.2
	OPENBSD_4_3_BASE:1.16
	OPENBSD_4_2:1.12.0.2
	OPENBSD_4_2_BASE:1.12
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.7.0.2
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.4.0.8
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.4.0.6
	OPENBSD_3_8_BASE:1.4
	OPENBSD_3_7:1.4.0.4
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.4.0.2
	OPENBSD_3_6_BASE:1.4
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.1.1.1.0.4
	OPENBSD_3_4_BASE:1.1.1.1
	OPENBSD_3_3:1.1.1.1.0.2
	OPENBSD_3_3_BASE:1.1.1.1
	jakob_20021110:1.1.1.1
	jakob:1.1.1;
locks; strict;
comment	@# @;


1.49
date	2017.03.29.08.24.21;	author sthen;	state Exp;
branches;
next	1.48;
commitid	NDNLYkSxnfgPGrcY;

1.48
date	2016.07.10.12.07.26;	author sthen;	state Exp;
branches;
next	1.47;
commitid	vMWmPoCHP7FYHFsG;

1.47
date	2016.04.25.00.03.04;	author sthen;	state Exp;
branches;
next	1.46;
commitid	5utYeomCAHehWQKz;

1.46
date	2016.04.12.10.18.20;	author sthen;	state Exp;
branches;
next	1.45;
commitid	PFgHfO6ZJFMwblOY;

1.45
date	2015.07.15.23.17.11;	author sthen;	state Exp;
branches;
next	1.44;
commitid	gkSf9j5LijNYHgwC;

1.44
date	2015.06.02.10.40.49;	author nigel;	state Exp;
branches;
next	1.43;
commitid	ujrsLUyzhZhSMtpP;

1.43
date	2014.11.14.17.07.23;	author sthen;	state Exp;
branches;
next	1.42;
commitid	BuDCC1BoDXTuIqxJ;

1.42
date	2014.11.12.12.19.13;	author sthen;	state Exp;
branches;
next	1.41;
commitid	EB6QT3emhBgCnhzH;

1.41
date	2014.11.07.23.56.23;	author sthen;	state Exp;
branches;
next	1.40;
commitid	UTL2ymaofLL2arU1;

1.40
date	2014.11.06.09.46.28;	author sthen;	state Exp;
branches;
next	1.39;
commitid	doPwdQXXGuYlgu6y;

1.39
date	2014.11.06.09.37.39;	author sthen;	state Exp;
branches;
next	1.38;
commitid	jyYeG3GlfZupVbAb;

1.38
date	2014.11.05.16.05.21;	author sthen;	state Exp;
branches;
next	1.37;
commitid	mhhB1op7rnUK3OOu;

1.37
date	2014.11.05.15.42.09;	author sthen;	state Exp;
branches;
next	1.36;
commitid	r3Gb5UT6Agg7kLiO;

1.36
date	2014.07.22.10.55.41;	author ajacoutot;	state Exp;
branches
	1.36.2.1;
next	1.35;
commitid	3LzguPEQl5LkjlcD;

1.35
date	2014.05.30.13.14.08;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2014.04.17.22.11.37;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2013.11.05.17.49.33;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2013.10.09.10.55.54;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2013.07.01.23.21.13;	author sthen;	state Exp;
branches;
next	1.30;

1.30
date	2013.05.24.14.45.54;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2013.03.21.14.32.04;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2013.03.11.11.35.56;	author espie;	state Exp;
branches;
next	1.27;

1.27
date	2013.01.06.07.54.13;	author ajacoutot;	state Exp;
branches;
next	1.26;

1.26
date	2013.01.05.22.52.06;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2010.11.19.22.31.38;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2010.10.18.18.36.58;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2010.07.12.22.07.42;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2008.11.12.12.49.42;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2008.07.16.11.51.46;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2008.06.09.18.42.09;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2008.04.28.12.20.47;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2008.04.09.22.34.40;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2008.03.20.16.02.25;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2008.01.29.19.58.39;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2007.12.19.17.54.51;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2007.09.12.15.13.24;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2007.09.04.10.32.58;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2007.06.29.17.49.56;	author jasper;	state Exp;
branches;
next	1.11;

1.11
date	2007.06.29.09.13.29;	author jakob;	state Exp;
branches;
next	1.10;

1.10
date	2007.06.29.06.58.22;	author jakob;	state Exp;
branches;
next	1.9;

1.9
date	2007.04.03.14.53.34;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2006.11.22.10.18.32;	author jakob;	state Exp;
branches;
next	1.7;

1.7
date	2006.06.19.19.40.01;	author jakob;	state Exp;
branches;
next	1.6;

1.6
date	2006.06.18.18.05.46;	author jakob;	state Exp;
branches;
next	1.5;

1.5
date	2006.06.14.08.58.22;	author jakob;	state Exp;
branches;
next	1.4;

1.4
date	2004.06.19.21.18.59;	author jakob;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.02.17.35.01;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2003.12.01.14.59.39;	author jakob;	state Exp;
branches;
next	1.1;

1.1
date	2002.11.10.20.04.49;	author jakob;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.11.10.20.04.49;	author jakob;	state Exp;
branches;
next	;

1.36.2.1
date	2014.11.07.23.48.58;	author sthen;	state Exp;
branches;
next	;
commitid	X0KNZ2NlPSLtbA4m;


desc
@@


1.49
log
@smokeping needs p5-CGI-Fast following perl 5.24 update; from Caspar Schutijser
@
text
@# $OpenBSD: Makefile,v 1.48 2016/07/10 12:07:26 sthen Exp $

COMMENT=	latency logging and graphing system

DISTNAME=	smokeping-2.6.11
REVISION=	10

CATEGORIES=	net

MASTER_SITES=	${HOMEPAGE}pub/

HOMEPAGE=	http://oss.oetiker.ch/smokeping/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

COMMON_DEPENDS=	devel/p5-Config-Grammar \
		net/rrdtool \
		security/p5-Digest-HMAC \
		www/p5-CGI \
		www/p5-libwww
BUILD_DEPENDS=	${COMMON_DEPENDS}
RUN_DEPENDS=	${COMMON_DEPENDS} \
		net/fping \
		net/p5-SNMP_Session \
		net/p5-Socket6 \
		www/fcgi \
		www/p5-CGI-Fast \
		www/spawn-fcgi
SYSCONFDIR=	${BASESYSCONFDIR}/smokeping

NO_TEST=	Yes
USE_GMAKE=	Yes
PKG_ARCH=	*

CONFIGURE_STYLE= gnu
CONFIGURE_ENV=	PERL5LIB=${LOCALBASE}/libdata/perl5/site_perl
CONFIGURE_ARGS=	--enable-pkgonly \
		--with-htdocs-dir=/var/www/htdocs/smokeping
FAKE_FLAGS=	sysconfdir=${PREFIX}/share/examples/smokeping

PMDIR=		libdata/perl5/site_perl
SUBST_VARS=	PMDIR

MODULES=	perl
MODPERL_ADJ_FILES= bin/smokeinfo bin/smokeping bin/smokeping_cgi bin/tSmoke

pre-configure:
	@@cd ${WRKSRC} && ${SUBST_CMD} \
	    etc/config.dist.in bin/smokeping bin/smokeping_cgi bin/tSmoke
	perl -pi -e s,/usr/local,${LOCALBASE}, ${WRKSRC}/lib/Smokeping/probes/*.pm

post-install:
	-mv ${PREFIX}/share/examples/smokeping/examples/* \
	    ${PREFIX}/share/examples/smokeping; \
	    rmdir ${PREFIX}/share/examples/smokeping/examples
	rm -f ${WRKINST}/var/www/htdocs/smokeping/smokeping.fcgi.dist
	printf "#!/bin/sh\nexec ${LOCALBASE}/bin/smokeping_cgi ${SYSCONFDIR}/config\n" > \
	    ${WRKINST}/var/www/htdocs/smokeping/smokeping.fcgi
	chmod +x ${WRKINST}/var/www/htdocs/smokeping/smokeping.fcgi
	chown -R ${SHAREOWN}:${SHAREGRP} ${WRKINST}/var/www
	${INSTALL_DATA} ${FILESDIR}/httpd.conf \
	    ${PREFIX}/share/examples/smokeping/httpd.conf

.include <bsd.port.mk>
@


1.48
log
@fix config path in readme, from Caspar Schutijser
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2016/04/25 00:03:04 sthen Exp $
d6 1
a6 1
REVISION=	9
d30 1
@


1.47
log
@fix rcctl args
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2016/04/12 10:18:20 sthen Exp $
d6 1
a6 1
REVISION=	8
@


1.46
log
@add a section on using smokeping with rrdcached, mostly for large installations
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/07/15 23:17:11 sthen Exp $
d6 1
a6 1
REVISION=	7
@


1.45
log
@handle rc.subr pexp changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/06/02 10:40:49 nigel Exp $
d6 1
a6 1
REVISION=	6
@


1.44
log
@Add dependency on www/p5-CGI and update to later version.

Ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/11/14 17:07:23 sthen Exp $
d6 1
a6 1
REVISION=	5
@


1.43
log
@fixup default paths in Smokeping probes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/11/12 12:19:13 sthen Exp $
d6 1
a6 1
REVISION=	4
d22 1
@


1.42
log
@adjust pexp again; it has to match various different modes. single-process -
perl: /usr/local/bin/smokeping [FPing]

multi-process -
perl: /usr/local/bin/smokeping [AnotherDNS]
perl: /usr/local/bin/smokeping [FPing]
/usr/bin/perl /usr/local/bin/smokeping

and not "/usr/bin/perl /usr/local/bin/smokeping_cgi". Not optimal as this
should signal only the master process when in multi-process mode, but that
can't be arranged with rc.subr's pgrep scheme (sometimes there are
advantages to pidfiles).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/11/07 23:56:23 sthen Exp $
d6 1
a6 1
REVISION=	3
d51 1
@


1.41
log
@tweak pexp to match only the main smokeping process, not subprocesses or the cgi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/11/06 09:46:28 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.40
log
@p5-libwww is also a bdep, however p5-CGI-Session is no longer a dep at all
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2014/11/06 09:37:39 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.39
log
@Digest::HMAC is a bdep as well as rdep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2014/11/05 16:05:21 sthen Exp $
d6 1
a6 1
REVISION=	0
d21 2
a22 1
		security/p5-Digest-HMAC
d29 1
a29 3
		www/spawn-fcgi \
		www/p5-CGI-Session \
		www/p5-libwww
@


1.38
log
@tweak smokeping sample config
use @@sample to pre-create img cache directory with good ownership for fastcgi
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2014/11/05 15:42:09 sthen Exp $
d20 2
a21 1
		net/rrdtool
a26 1
		security/p5-Digest-HMAC \
@


1.37
log
@update to smokeping 2.6.11
- add a new rc script to run as FastCGI
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/07/22 10:55:41 ajacoutot Exp $
d6 1
@


1.36
log
@Tweak documentation according to recent rc changes.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2014/05/30 13:14:08 sthen Exp $
d5 1
a5 2
DISTNAME=	smokeping-2.6.9
REVISION=	5
d18 4
a21 2
BUILD_DEPENDS=	${RUN_DEPENDS}
RUN_DEPENDS=	devel/p5-Config-Grammar \
a24 1
		net/rrdtool \
d27 1
d38 2
a39 1
CONFIGURE_ARGS=	--with-htdocs-dir=/var/www/htdocs/smokeping
@


1.36.2.1
log
@fix startup problem in smokeping on 5.6 reported by Lars Hecking
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2014/07/22 10:55:41 ajacoutot Exp $
d6 1
a6 1
REVISION=	6
@


1.35
log
@/var/www/conf/modules.sample is no longer provided by base; noticed by florian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2014/04/17 22:11:37 sthen Exp $
d6 1
a6 1
REVISION=	4
@


1.34
log
@reorder "use"s, fixes smokeping with -current perl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/11/05 17:49:33 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.33
log
@handle rrdtool update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/10/09 10:55:54 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.32
log
@install @@sample'd smokeping_secrets file with mode 640, it must not be
world-readable (enforced at startup)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2013/07/01 23:21:13 sthen Exp $
d6 1
a6 1
REVISION=	1
d24 1
a24 1
		net/rrdtool,-perl \
@


1.31
log
@reinstate @@newuser/@@newgroup, lost in PLIST r1.13. spotted by phessler.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2013/05/24 14:45:54 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.30
log
@use MODPERL_ADJ_FILES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2013/03/21 14:32:04 sthen Exp $
d6 1
@


1.29
log
@update to Smokeping 2.6.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2013/03/11 11:35:56 espie Exp $
d41 3
@


1.28
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2013/01/06 07:54:13 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	smokeping-2.6.8
REVISION=	0
@


1.27
log
@Adapt to README.template.

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/01/05 22:52:06 sthen Exp $
a17 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d31 1
a31 1
NO_REGRESS=	Yes
@


1.26
log
@update Smokeping to 2.6.8 and add an rc.d script

- note that the script file location has changed, it's probably simplest
to use the new sample httpd config.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2010/11/19 22:31:38 espie Exp $
d6 1
@


1.25
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2010/10/18 18:36:58 espie Exp $
d5 2
a6 2
DISTNAME=	smokeping-2.3.6
REVISION=	2
d15 1
a15 1
# GPL
d18 1
a18 1
PERMIT_DISTFILES_CDROM=	Yes
d21 2
a22 2
RUN_DEPENDS=	databases/p5-ldap \
		devel/p5-Config-Grammar \
a23 2
		net/p5-Net-DNS \
		net/p5-Net-Telnet \
d25 2
a26 1
		security/p5-Authen-Radius \
d28 4
a31 3
		www/p5-CGI-SpeedyCGI \
		www/p5-libwww \
		net/rrdtool,-perl
d34 1
a34 2
NO_BUILD=	Yes
USE_GROFF =	Yes
d37 5
a43 1
WWWDIR=		${PREFIX}/share/examples/smokeping
d45 15
a59 33
do-install:
	@@perl -pi -e "s|%%SYSCONFDIR%%|${SYSCONFDIR}|g; \
		s|%%LOCALBASE%%|${LOCALBASE}|g;" \
		${WRKSRC}/etc/config.dist
	@@perl -pi -e "s|%%SYSCONFDIR%%|${SYSCONFDIR}|g" \
		< ${WRKSRC}/bin/smokeping.dist > ${WRKSRC}/bin/smokeping
	${INSTALL_SCRIPT} ${WRKSRC}/bin/smokeping ${PREFIX}/bin/smokeping
	@@perl -pi -e "s|%%SYSCONFDIR%%|${SYSCONFDIR}|g; \
		s|%%LOCALBASE%%|${LOCALBASE}|g" \
		< ${WRKSRC}/htdocs/smokeping.cgi.dist \
		> ${WRKSRC}/htdocs/smokeping.cgi
	${INSTALL_DATA_DIR} ${WWWDIR}
	${INSTALL_SCRIPT} ${WRKSRC}/htdocs/smokeping.cgi ${WWWDIR}
	cd ${WRKSRC}/htdocs/; tar cf - cropper | tar xf - -C ${WWWDIR}
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}/Smokeping
	cd ${WRKSRC}/lib/; tar cf - Smokeping* | \
		tar xf - -C ${PREFIX}/${PMDIR}/
	${INSTALL_MAN} ${WRKSRC}/doc/smokeping*.1 ${PREFIX}/man/man1
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smokeping
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smokeping/examples
	${INSTALL_DATA} ${WRKSRC}/doc/*.txt ${PREFIX}/share/doc/smokeping
	${INSTALL_DATA} ${WRKSRC}/doc/examples/* \
		${PREFIX}/share/doc/smokeping/examples
.for dir in matchers probes sorters
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smokeping/${dir}
	${INSTALL_DATA} ${WRKSRC}/doc/Smokeping/${dir}/*.txt \
		${PREFIX}/share/doc/smokeping/${dir}
.endfor
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/smokeping
.for file in basepage.html config smokemail tmail smokeping_secrets
	${INSTALL_DATA} ${WRKSRC}/etc/${file}.dist \
		${PREFIX}/share/examples/smokeping/${file}
.endfor
@


1.24
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2010/07/12 22:07:42 sthen Exp $
d21 11
a31 11
RUN_DEPENDS=	::databases/p5-ldap \
		::devel/p5-Config-Grammar \
		::net/fping \
		::net/p5-Net-DNS \
		::net/p5-Net-Telnet \
		::net/p5-SNMP_Session \
		::security/p5-Authen-Radius \
		::security/p5-Digest-HMAC \
		::www/p5-CGI-SpeedyCGI \
		::www/p5-libwww \
		:p5-RRD-*:net/rrdtool,-perl
@


1.23
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/11/12 12:49:42 sthen Exp $
d35 1
@


1.22
log
@reinstate dropping to _smokeping user accidentally removed in r1.7;
pointed out by/ok bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/07/16 11:51:46 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.21
log
@- add missing p5-libwww dependency pointed out by henning@@
and other dependencies needed for various probes.

- @@mode 600 in PLIST for smokeping_secrets config file

- bump package
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/06/09 18:42:09 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.20
log
@Add a patch to fix static page generation and bump package.
https://lists.oetiker.ch/pipermail/smokeping-users/2008-June/003068.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/04/28 12:20:47 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d21 5
a25 2
RUN_DEPENDS=	::devel/p5-Config-Grammar \
		:p5-RRD-*:net/rrdtool,-perl \
d27 5
a31 2
		::net/fping \
		::www/p5-CGI-SpeedyCGI
@


1.19
log
@maintenance update to 2.3.6, small improvements to cgi/display output
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/04/09 22:34:40 sthen Exp $
d6 1
@


1.18
log
@maintenance update to 2.3.5, ok okan
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/03/20 16:02:25 sthen Exp $
d5 1
a5 1
DISTNAME=	smokeping-2.3.5
@


1.17
log
@maintenance update to 2.3.3, ok okan
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/01/29 19:58:39 sthen Exp $
d5 1
a5 1
DISTNAME=	smokeping-2.3.3
@


1.16
log
@update smokeping to 2.3.0 (adds multiple hierarchies+filters)
ok okan
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/12/19 17:54:51 sthen Exp $
d5 1
a5 1
DISTNAME=	smokeping-2.3.0
@


1.15
log
@update smokeping to 2.2.7

ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/09/12 15:13:24 sthen Exp $
d5 1
a5 1
DISTNAME=	smokeping-2.2.7
@


1.14
log
@adjust RUN_DEPENDS for new rrdtool

ok msf@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/09/04 10:32:58 sthen Exp $
d5 1
a5 3
VERSION=	2.1.1
DISTNAME=	smokeping-${VERSION}
PKGNAME=	smokeping-${VERSION}p3
d32 1
a32 5

ETCFILES=	basepage.html config smokemail tmail

post-extract:
	@@find ${WRKDIST} -name \*.tmp -print0 | xargs -0 rm
d45 3
a47 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/smokeping
	${INSTALL_SCRIPT} ${WRKSRC}/htdocs/smokeping.cgi \
		${PREFIX}/share/examples/smokeping/smokeping.cgi
d53 1
d55 9
a63 10
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smokeping/matchers
	${INSTALL_DATA} ${WRKSRC}/doc/Smokeping/matchers/*.txt \
		${PREFIX}/share/doc/smokeping/matchers
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smokeping/probes
	${INSTALL_DATA} ${WRKSRC}/doc/Smokeping/probes/*.txt \
		${PREFIX}/share/doc/smokeping/probes
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/smokeping/sorters
	${INSTALL_DATA} ${WRKSRC}/doc/Smokeping/sorters/*.txt \
		${PREFIX}/share/doc/smokeping/sorters
.for file in ${ETCFILES}
@


1.13
log
@update my email; remove " in comments while there

ok mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/06/29 17:49:56 jasper Exp $
d7 1
a7 1
PKGNAME=	smokeping-${VERSION}p2
d23 1
a23 1
		::net/rrdtool \
@


1.12
log
@simpler do-install, and sync PLIST accordingly (missing items)

with and ok stu at spacehopper.org (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/06/29 09:13:29 jakob Exp $
d3 1
a3 1
COMMENT=	"latency logging and graphing system"
d7 1
a7 1
PKGNAME=	smokeping-${VERSION}p1
d14 1
a14 1
MAINTAINER=	Stuart Henderson <stu@@spacehopper.org>
@


1.11
log
@fix broken dependency; from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/06/29 06:58:22 jakob Exp $
d7 1
a7 1
PKGNAME=	smokeping-${VERSION}p0
d37 3
a53 2
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}
	${INSTALL_DATA} ${WRKSRC}/lib/Smokeping.pm ${PREFIX}/${PMDIR}
d55 2
a56 11
	${INSTALL_DATA} ${WRKSRC}/lib/Smokeping/*.pm \
		${PREFIX}/${PMDIR}/Smokeping
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}/Smokeping/matchers
	${INSTALL_DATA} ${WRKSRC}/lib/Smokeping/matchers/*.pm \
		${PREFIX}/${PMDIR}/Smokeping/matchers
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}/Smokeping/probes
	${INSTALL_DATA} ${WRKSRC}/lib/Smokeping/probes/*.pm \
		${PREFIX}/${PMDIR}/Smokeping/probes
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}/Smokeping/sorters
	${INSTALL_DATA} ${WRKSRC}/lib/Smokeping/probes/*.pm \
		${PREFIX}/${PMDIR}/Smokeping/probes
@


1.10
log
@update to version 2.1.1; from Stuart Henderson
change MAINTAINER to Stuart as well
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/04/03 14:53:34 ajacoutot Exp $
d7 1
d23 1
a23 1
		:p5-RRD-*:net/rrdtool,-perl \
@


1.9
log
@- MASTER_SITES has changed
from Markus Lude <markus-openbsd at anthill dot de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/11/22 10:18:32 jakob Exp $
d5 1
a5 1
VERSION=	2.0.9
a6 1
PKGNAME=	smokeping-${VERSION}p0
d13 1
a13 1
MAINTAINER=     Jakob Schlyter <jakob@@openbsd.org>
d22 1
a22 1
		::net/rrdtool \
d43 2
a44 1
	@@perl -pi -e "s|%%SYSCONFDIR%%|${SYSCONFDIR}|g" \
d61 3
d73 3
@


1.8
log
@smokeping 2.0.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/06/19 19:40:01 jakob Exp $
d7 1
a7 1
PKGNAME=	smokeping-${VERSION}
d10 1
a10 1
MASTER_SITES=	http://people.ee.ethz.ch/~oetiker/webtools/smokeping/pub/
@


1.7
log
@remove creation of /var/run/smokeping (add note to MESSAGE)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/06/18 18:05:46 jakob Exp $
d5 1
a5 1
VERSION=	2.0.8
d7 1
a7 1
PKGNAME=	smokeping-${VERSION}p1
@


1.6
log
@use /var/db/smokeping and move webpages to /var/www/htdocs/smokeping
fix fping reference
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/06/14 08:58:22 jakob Exp $
d7 1
a7 1
PKGNAME=	smokeping-${VERSION}p0
@


1.5
log
@update to smokeping v2.0.8; from bernd ahlers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/06/19 21:18:59 jakob Exp $
d5 3
a7 1
DISTNAME=	smokeping-2.0.8
a32 1
WEBDIR=		/var/www/smokeping
d38 2
a39 2
	@@perl -pi -e "s|%%WEBDIR%%|${WEBDIR}|g; \
		s|%%SYSCONFDIR%%|${SYSCONFDIR}|g;" \
@


1.4
log
@update to v1.30
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/02/02 17:35:01 sturm Exp $
d5 1
a5 2
VERSION=	1.30
DISTNAME=	smokeping-${VERSION}
d8 1
a8 2
MASTER_SITES=	http://people.ee.ethz.ch/~oetiker/webtools/smokeping/pub/ \
		http://ftp.heanet.ie/mirrors/people.ee.ethz.ch/~oetiker/webtools/smokeping/pub/
d10 1
a10 1
HOMEPAGE=	http://people.ee.ethz.ch/~oetiker/webtools/smokeping/
d20 2
a21 1
RUN_DEPENDS=	::net/rrdtool \
d23 2
a24 1
		::net/fping
a29 1
LIBDIR=		lib/smokeping
d31 2
d34 1
a34 2
ETCFILES=	basepage.html config-echoping config smokemail

d37 12
a48 5
	${INSTALL_SCRIPT} ${WRKSRC}/bin/smokeping.dist \
		${PREFIX}/bin/smokeping
	${INSTALL_DATA_DIR} ${PREFIX}/${LIBDIR}
	${INSTALL_SCRIPT} ${WRKSRC}/htdocs/smokeping.cgi.dist \
		${PREFIX}/${LIBDIR}/smokeping.cgi
d51 9
a59 4
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}/ISG
	${INSTALL_DATA} ${WRKSRC}/lib/ISG/*.pm ${PREFIX}/${PMDIR}/ISG
	${INSTALL_DATA_DIR} ${PREFIX}/${PMDIR}/probes
	${INSTALL_DATA} ${WRKSRC}/lib/probes/*.pm ${PREFIX}/${PMDIR}/probes
d63 6
a68 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/smokeping
@


1.3
log
@mark arch independent
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/12/01 14:59:39 jakob Exp $
d5 1
a5 1
VERSION=	1.24
@


1.2
log
@update to v1.24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/11/10 20:04:49 jakob Exp $
d28 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2002/10/26 12:44:07 jakob Exp $
d5 1
a5 1
VERSION=	1.16
@


1.1.1.1
log
@latency logging and graphing system
@
text
@@
