head	1.2;
access;
symbols
	OPENBSD_6_1:1.2.0.4
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.1.0.4
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.6
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.2
	OPENBSD_5_7_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.07.05.07.13.59;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	1uKPJQgOZNqONm2g;

1.1
date	2015.02.11.08.11.46;	author brad;	state Exp;
branches;
next	;
commitid	JFk8MCWNQkhavPyT;


desc
@@


1.2
log
@Update to pidgin-2.11.0.

from Brad (maintainer)
@
text
@$OpenBSD: patch-pidgin_gtkconv_c,v 1.1 2015/02/11 08:11:46 brad Exp $

The code expects a deterministic result otherwise the colour
of the nick changes with each restart of Pidgin.

--- pidgin/gtkconv.c.orig	Sun Jun 19 01:33:11 2016
+++ pidgin/gtkconv.c	Sat Jul  2 19:20:34 2016
@@@@ -10253,7 +10253,7 @@@@ generate_nick_colors(guint *color_count, GdkColor back
 	gdk_color_parse(DEFAULT_HIGHLIGHT_COLOR, &nick_highlight);
 	gdk_color_parse(DEFAULT_SEND_COLOR, &send_color);
 
-	srand(background.red + background.green + background.blue + 1);
+	srand_deterministic(background.red + background.green + background.blue + 1);
 
 	breakout_time = time(NULL) + 3;
 
@


1.1
log
@Use srand_deterministic() as Pidgin expects deterministic results
which fixes the nick colours in multiuser chat rooms changing between
restarts of Pidgin.

From Steven McDonald <steven at steven-mcdonald dot id dot au>

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 3
--- pidgin/gtkconv.c.orig	Tue Feb 10 21:10:09 2015
+++ pidgin/gtkconv.c	Tue Feb 10 21:10:46 2015
@@@@ -10240,7 +10240,7 @@@@ generate_nick_colors(guint *color_count, GdkColor back
@

