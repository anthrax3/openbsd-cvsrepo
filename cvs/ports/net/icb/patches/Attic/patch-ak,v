head	1.4;
access;
symbols
	OPENBSD_2_9:1.3.0.6
	OPENBSD_2_9_BASE:1.3
	OPENBSD_2_8:1.3.0.4
	OPENBSD_2_8_BASE:1.3
	OPENBSD_2_7:1.3.0.2
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.2.0.6
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.2.0.4
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.2.0.2
	OPENBSD_2_4_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2001.05.14.16.42.51;	author millert;	state dead;
branches;
next	1.3;

1.3
date	2000.01.16.09.26.46;	author brad;	state Exp;
branches
	1.3.6.1;
next	1.2;

1.2
date	98.07.15.22.38.24;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.07.07.09.35.24;	author form;	state Exp;
branches;
next	;

1.3.6.1
date	2001.05.15.16.25.04;	author naddy;	state dead;
branches;
next	;


desc
@@


1.4
log
@Make paging *not* be the default.  Also regenerate patches with new naming
scheme while I'm at it.
@
text
@--- icb/serverlist.c.orig	Fri Feb 24 16:20:29 1995
+++ icb/serverlist.c	Sun Jan 16 01:56:24 2000
@@@@ -1,4 +1,5 @@@@
 #include <stdio.h>
+#include <stdlib.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 #include "icb.h"
@@@@ -16,7 +17,8 @@@@
 	struct stat statbuf;
 	char *personalsl;
 	char command[256];
-	char pwd[256];
+	char pwd[MAXPATHLEN];
+	char *home;
 	FILE *ret;
 
 #ifdef sgi
@@@@ -25,15 +27,19 @@@@
 #ifndef SYSV
 	getwd(pwd);
 #else /* SYSV */
-	getcwd(pwd, MAXPATHLEN+1);
+	getcwd(pwd, MAXPATHLEN);
 #endif /* SYSV */
 #ifdef sgi
 #define SYSV
 #endif
-	chdir(getenv("HOME"));
+	home = getenv("HOME");
+	if (!home)
+		errx(1, "can't get home directory from env");
+	chdir(home);
 	if (!stat(PERSONALSL,&statbuf))
 	{
-		sprintf(command,"/bin/cat %s %s\n", PERSONALSL, SERVERLIST);
+		snprintf(command, sizeof command, "/bin/cat %s %s\n",
+			 PERSONALSL, SERVERLIST);
 		ret= popen(command,"r");
 	}
 	else
@


1.3
log
@- convert patches to unified diffs
- merge contents of patch-ad and patch-an into patch-ad
@
text
@@


1.3.6.1
log
@MFC:
Make paging *not* be the default.  Regen patches.
Requested by espie@@
@
text
@@


1.2
log
@fix buffer oflow; now runs on sparc
@
text
@d1 2
a2 2
--- icb/serverlist.c.~1~	Fri Feb 24 13:20:29 1995
+++ icb/serverlist.c	Wed Jul 15 15:09:58 1998
d15 1
a15 1
+	char * home;
d30 4
a33 4
+	home = getenv( "HOME" );
+	if ( ! home )
+		errx( 1, "can't get home directory from env" );
+	chdir( home );
@


1.1
log
@some updates
@
text
@d1 41
a41 6
--- icbserverdb.orig	Fri Feb 24 13:19:29 1995
+++ icbserverdb	Mon May 25 16:25:18 1998
@@@@ -1,2 +1,3 @@@@
+openbsd		cvs.openbsd.org 7326
 dragon		crater.unm.edu 7326
 alt		remus.rutgers.edu 7326
@

