head	1.4;
access;
symbols
	OPENBSD_6_0:1.4.0.8
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.4
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.6
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.2
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.1.1.0.2
	OPENBSD_5_4_BASE:1.1.1.1
	zhuk_20130509:1.1.1.1
	zhuk:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2014.11.05.15.52.32;	author dcoppa;	state Exp;
branches;
next	1.3;
commitid	HvTxXjgfxJ7PYMXN;

1.3
date	2014.11.01.20.43.26;	author zhuk;	state dead;
branches;
next	1.2;
commitid	41UhNBAROtRyCpAG;

1.2
date	2013.10.11.10.32.07;	author dcoppa;	state Exp;
branches;
next	1.1;

1.1
date	2013.05.09.19.25.59;	author zhuk;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.05.09.19.25.59;	author zhuk;	state Exp;
branches;
next	;


desc
@@


1.4
log
@
Do not pick up qmake from qt3-mt if it's installed.

Fix the error:

CMake Error at /usr/local/share/cmake/Modules/FindQt4.cmake:1323 (message):
  Found unsuitable Qt version "QSettings: error creating /.qt

  **Unknown**" from /usr/local/bin/qmake, this code requires Qt 4.x

Spotted by landry@@ during a bulk build
@
text
@$OpenBSD$

Do not pick up qmake from qt3-mt if it's installed

CMake Error at /usr/local/share/cmake/Modules/FindQt4.cmake:1323 (message):
  Found unsuitable Qt version "QSettings: error creating /.qt

  **Unknown**" from /usr/local/bin/qmake, this code requires Qt 4.x

--- cmake/modules/FindQt.cmake.orig	Wed Nov  5 16:30:25 2014
+++ cmake/modules/FindQt.cmake	Wed Nov  5 16:31:13 2014
@@@@ -18,7 +18,7 @@@@ ENDIF(DESIRED_QT_VERSION MATCHES 5)
 #Otherwise search for installed qmakes
 IF(NOT QT5_INSTALLED)
     IF(NOT QT_QMAKE_EXECUTABLE)
-        FIND_PROGRAM(QT_QMAKE_EXECUTABLE_FINDQT NAMES qmake qmake4 qmake-qt4 qmake5 qmake-qt5
+        FIND_PROGRAM(QT_QMAKE_EXECUTABLE_FINDQT NAMES qmake4 qmake-qt4 qmake5 qmake-qt5
             PATHS "${QT_SEARCH_PATH}/bin" "$ENV{QTDIR}/bin")
         SET(QT_QMAKE_EXECUTABLE ${QT_QMAKE_EXECUTABLE_FINDQT} CACHE PATH "Qt qmake program.")
     ENDIF(NOT QT_QMAKE_EXECUTABLE)
@


1.3
log
@Update telepathy-qt to 0.9.5, required by upcoming KDE 4.14.
@
text
@d1 1
a1 1
$OpenBSD: patch-cmake_modules_FindQt_cmake,v 1.2 2013/10/11 10:32:07 dcoppa Exp $
d3 1
a3 3
Unbreak configure stage.
Telepathy-qt devs use customized version of module bundled with CMake,
so we cannot just zap this module.
d5 2
a6 4
From 05fe3f4980bbc6b016e25dcf07e44afe29e377c0
From: David Edmundson <kde@@davidedmundson.co.uk>
Date: Sun, 29 Sep 2013 22:19:27 +0000
Subject: Fix compilation on new versions of cmake
d8 1
a8 2
Recent cmake has changed the argument count to
qt4_create_moc_command, we need to adjust accordingly
d10 11
a20 32
--- cmake/modules/FindQt.cmake.orig	Fri Jul 13 19:40:23 2012
+++ cmake/modules/FindQt.cmake	Fri Oct 11 11:31:04 2013
@@@@ -8,7 +8,7 @@@@
 # For details see the accompanying COPYING-CMAKE-SCRIPTS file.
 
 IF(NOT QT_QMAKE_EXECUTABLE)
-  FIND_PROGRAM(QT_QMAKE_EXECUTABLE_FINDQT NAMES qmake qmake4 qmake-qt4 qmake5 qmake-qt5
+  FIND_PROGRAM(QT_QMAKE_EXECUTABLE_FINDQT NAMES qmake4 qmake-qt4 qmake5 qmake-qt5 qmake
                PATHS "${QT_SEARCH_PATH}/bin" "$ENV{QTDIR}/bin")
   SET(QT_QMAKE_EXECUTABLE ${QT_QMAKE_EXECUTABLE_FINDQT} CACHE PATH "Qt qmake program.")
 ENDIF(NOT QT_QMAKE_EXECUTABLE)
@@@@ -74,10 +74,18 @@@@ ENDMACRO(QT_GET_MOC_FLAGS)
 
 MACRO(QT_CREATE_MOC_COMMAND infile outfile moc_flags moc_options)
   IF(QT_VERSION_MAJOR MATCHES 4)
-    QT4_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}")
+    IF(CMAKE_VERSION VERSION_GREATER 2.8.11.20130607)
+      QT4_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}" "")
+    ELSE(CMAKE_VERSION VERSION_GREATER 2.8.11.20130607)
+      QT4_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}")
+    ENDIF(CMAKE_VERSION VERSION_GREATER 2.8.11.20130607)
   ELSE(QT_VERSION_MAJOR MATCHES 4)
     IF(QT_VERSION_MAJOR MATCHES 5)
-      QT5_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}")
+      IF(CMAKE_VERSION VERSION_GREATER 2.8.11.20130607)
+        QT5_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}" "")
+      ELSE(CMAKE_VERSION VERSION_GREATER 2.8.11.20130607)
+        QT5_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}")
+      ENDIF(CMAKE_VERSION VERSION_GREATER 2.8.11.20130607)
     ENDIF(QT_VERSION_MAJOR MATCHES 5)
   ENDIF(QT_VERSION_MAJOR MATCHES 4)
 ENDMACRO(QT_CREATE_MOC_COMMAND)
@


1.2
log
@Fix compilation with the upcoming cmake-2.8.12.
CMake 2.8.12 has changed the argument count to qt4_create_moc_command.
(from upstream git commit 05fe3f4980bbc6b016e25dcf07e44afe29e377c0)

ok espie@@
@
text
@d1 1
a1 1
$OpenBSD: patch-cmake_modules_FindQt_cmake,v 1.1.1.1 2013/05/09 19:25:59 zhuk Exp $
@


1.1
log
@Initial revision
@
text
@d1 2
a2 1
$OpenBSD$
d6 11
a16 2
--- cmake/modules/FindQt.cmake.orig	Wed May  8 16:12:11 2013
+++ cmake/modules/FindQt.cmake	Wed May  8 16:12:34 2013
d26 21
@


1.1.1.1
log
@Import Qt bindings for Telepathy framework. Could be used by some
kdenetwork apps, e.g. krfb and krdc.

okay jasper@@
@
text
@@
