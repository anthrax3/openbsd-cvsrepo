head	1.19;
access;
symbols
	OPENBSD_6_0:1.19.0.2
	OPENBSD_6_0_BASE:1.19
	OPENBSD_5_9:1.18.0.4
	OPENBSD_5_9_BASE:1.18
	OPENBSD_5_8:1.18.0.6
	OPENBSD_5_8_BASE:1.18
	OPENBSD_5_7:1.18.0.2
	OPENBSD_5_7_BASE:1.18
	OPENBSD_5_6:1.17.0.4
	OPENBSD_5_6_BASE:1.17
	OPENBSD_5_5:1.17.0.2
	OPENBSD_5_5_BASE:1.17
	OPENBSD_5_4:1.16.0.2
	OPENBSD_5_4_BASE:1.16
	OPENBSD_5_3:1.15.0.2
	OPENBSD_5_3_BASE:1.15
	OPENBSD_5_2:1.14.0.2
	OPENBSD_5_2_BASE:1.14
	OPENBSD_5_1_BASE:1.13
	OPENBSD_5_1:1.13.0.2
	OPENBSD_5_0:1.11.0.2
	OPENBSD_5_0_BASE:1.11
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.5.0.10
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.5.0.8
	OPENBSD_4_6_BASE:1.5
	OPENBSD_4_5:1.5.0.6
	OPENBSD_4_5_BASE:1.5
	OPENBSD_4_4:1.5.0.4
	OPENBSD_4_4_BASE:1.5
	OPENBSD_4_3:1.5.0.2
	OPENBSD_4_3_BASE:1.5
	OPENBSD_4_2:1.4.0.4
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.2
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.3.0.4
	OPENBSD_4_0_BASE:1.3
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	alek_20041207:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.19
date	2016.03.18.23.12.18;	author naddy;	state Exp;
branches;
next	1.18;
commitid	KZAl4KEiw6a3Jixw;

1.18
date	2014.08.10.09.58.06;	author espie;	state Exp;
branches;
next	1.17;
commitid	jyyOLTDxRdjpw44n;

1.17
date	2013.11.09.18.22.02;	author zhuk;	state Exp;
branches;
next	1.16;

1.16
date	2013.03.11.11.35.45;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2012.10.15.15.06.42;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2012.03.29.13.38.40;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2011.12.21.13.37.26;	author sebastia;	state Exp;
branches;
next	1.12;

1.12
date	2011.09.16.11.13.37;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.07.20.16.43.18;	author sebastia;	state Exp;
branches;
next	1.10;

1.10
date	2011.03.12.09.41.31;	author sebastia;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.19.22.31.32;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.10.05.15.17.13;	author sebastia;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.01.13.09.54;	author sebastia;	state Exp;
branches;
next	1.6;

1.6
date	2010.07.28.18.03.00;	author sebastia;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.15.22.36.52;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2006.11.20.13.07.20;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.02.08.04.54.49;	author david;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.18.21.59.51;	author alek;	state Exp;
branches;
next	1.1;

1.1
date	2004.12.07.13.21.43;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.07.13.21.43;	author alek;	state Exp;
branches;
next	;


desc
@@


1.19
log
@remove SHARED_ONLY from ports that only use modules that neither set nor
read this variable
@
text
@# $OpenBSD: Makefile,v 1.18 2014/08/10 09:58:06 espie Exp $

COMMENT =		XMPP client with whiteboard

REVISION =		4
DISTNAME =		Coccinella-0.96.20Binfree
PKGNAME =		${DISTNAME:S/Binfree$//:L}
CATEGORIES =		net

HOMEPAGE =		http://www.coccinella.im
MAINTAINER =		Sebastian Reitenbach <sebastia@@openbsd.org>

# GPLv3
PERMIT_PACKAGE_CDROM =		Yes

MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=coccinella/}

MODULES =		x11/tk
RUN_DEPENDS =		audio/snack \
			devel/itcl \
			graphics/tkpng \
			graphics/tkimg \
			misc/memchan \
			net/tcludp \
			security/tcltls \
			telephony/iaxclient,-tcl \
			x11/tkdnd \
			x11/tkhtml \
			x11/tktray \
			x11/tktreectrl

NO_BUILD =		Yes
NO_TEST =		Yes
SEPARATE_BUILD =	Yes
COCCINELLALIB =		${LOCALBASE}/lib/coccinella
SUBST_VARS =		COCCINELLALIB

pre-configure:
	${MODTCL_WISH_ADJ} ${WRKSRC}/Coccinella.tcl
	${SUBST_CMD} ${WRKSRC}/Coccinella.tcl \
		${WRKSRC}/lib/Init.tcl

do-install:
	${INSTALL_SCRIPT_DIR} ${PREFIX}/lib/coccinella
	cd ${WRKSRC} && find TclXML [c-z]* -type d -exec ${INSTALL_DATA_DIR} \
				${PREFIX}/lib/coccinella/{} \; && \
		find TclXML [c-z]* ! -type d -exec ${INSTALL_DATA} {} \
				${PREFIX}/lib/coccinella/{} \; && \
		${INSTALL_DATA} pkgIndex.tcl ${PREFIX}/lib/coccinella
	rm ${PREFIX}/lib/coccinella/lib/Init.tcl.* \
		${PREFIX}/lib/coccinella/show_own_jid.patch
	${INSTALL_SCRIPT} ${WRKSRC}/Coccinella.tcl ${PREFIX}/lib/coccinella
	${SUBST_PROGRAM} ${FILESDIR}/coccinella \
				${PREFIX}/bin/coccinella
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/coccinella
	cd ${WRKSRC} && ${INSTALL_DATA} README.txt READMEs/README-xmpp \
		READMEs/README-sounds \
		${PREFIX}/share/doc/coccinella/

.include <bsd.port.mk>
@


1.18
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.17 2013/11/09 18:22:02 zhuk Exp $

SHARED_ONLY =		Yes
@


1.17
log
@Fix MODTCL_TCLSH_ADJ and MODTCL_WISH_ADJ.

Review, input, okay and prodding to commit by stu@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/03/11 11:35:45 espie Exp $
d55 1
a55 1
	${SUBST_CMD} -c -o ${BINOWN} -g ${BINGRP} ${FILESDIR}/coccinella \
a56 1
	chmod 755 ${PREFIX}/bin/coccinella
@


1.16
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/10/15 15:06:42 sthen Exp $
d7 1
a7 1
REVISION =		3
@


1.15
log
@zap trailing whitespace where it's present in MASTER_SITES/COMMENT
lines in ports Makefiles
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/03/29 13:38:40 sthen Exp $
a16 3
PERMIT_PACKAGE_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
PERMIT_DISTFILES_FTP =		Yes
d35 1
a35 1
NO_REGRESS =		Yes
@


1.14
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2011/12/21 13:37:26 sebastia Exp $
d21 1
a21 1
MASTER_SITES =		${MASTER_SITE_SOURCEFORGE:=coccinella/}	
d47 1
a47 1
	
d64 1
a64 1
		${PREFIX}/share/doc/coccinella/ 
@


1.13
log
@Use a much smaller distfile, no bump since no package change.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2011/09/16 11:13:37 espie Exp $
d39 1
a39 1
SEPARATE_BUILD =	simple
@


1.12
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/07/20 16:43:18 sebastia Exp $
d8 2
a9 2
DISTNAME =		Coccinella-0.96.20Src
PKGNAME =		${DISTNAME:S/Src$//:L}
@


1.11
log
@Long overdue, add iaxclient-tcl to RUN_DEPENDS. With this, Coccinella
can be used for XMPP p2p VoIP with other Coccinella clients, and as
a fully IAX2 client for an asterisk.
Suggestion to use the wrapper script instead of depending on threaded
TCL/Tk flavor from sthen@@ (many thanks!)

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/03/12 09:41:31 sebastia Exp $
d7 1
a7 1
REVISION =		2
@


1.10
log
@Add snack to the run depends.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/19 22:31:32 espie Exp $
d7 1
a7 1
REVISION =		1
a23 3

# No dependencies to sound and telephony yet, due to the reason those
# need to be ported to sndio first
d31 1
d57 4
a60 1
	${INSTALL_SCRIPT} ${WRKSRC}/Coccinella.tcl ${PREFIX}/bin/coccinella
@


1.9
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/10/05 15:17:13 sebastia Exp $
d7 1
a7 1
REVISION =		0
d27 2
a28 1
RUN_DEPENDS =		devel/itcl \
@


1.8
log
@Cleanup do-install in order to fix permissions on files in fake stage, pointed out
by sthen@@, and bump.

OK landry@@, sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2010/10/01 13:09:54 sebastia Exp $
d27 10
a36 10
RUN_DEPENDS =		::devel/itcl \
			::graphics/tkpng \
			::graphics/tkimg \
			::misc/memchan \
			::net/tcludp \
			::security/tcltls \
			::x11/tkdnd \
			::x11/tkhtml \
			::x11/tktray \
			::x11/tktreectrl
@


1.7
log
@Maintenance release update coccinella to 0.96.20

OK, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/07/28 18:03:00 sebastia Exp $
d7 1
d51 5
a55 2
	cd ${WRKSRC} ; tar cf - TclXML [c-z]* | \
		tar xf - -C ${PREFIX}/lib/coccinella/
@


1.6
log
@Update coccinella from the very old version to latest release. Many new
features to list them here, and especially a much nicer looking interface.
No sound or VoIP yet, since those dependencies needs to be ported to sndio first.
Take maintainership, since I'm part of upstream, old maintainer agreed
long time ago.

OK landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/15 22:36:52 merdely Exp $
d7 1
a7 1
DISTNAME =		Coccinella-0.96.18Src
d52 2
a53 1
	rm ${PREFIX}/lib/coccinella/lib/Init.tcl.*
@


1.5
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/11/20 13:07:20 espie Exp $
d3 1
a3 1
COMMENT=		Jabber client with whiteboard communication 
d5 1
a5 3
DISTNAME=		Coccinella-0.95.4Src
PKGNAME=		${DISTNAME:S/Src$//:L}
CATEGORIES=		net
d7 35
a41 18
HOMEPAGE=		http://hem.fyristorg.com/matben/

MAINTAINER=		Marc Bruenink <marc@@bruenink.de>

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=		${MASTER_SITE_SOURCEFORGE:=coccinella/}	

RUN_DEPENDS=		::x11/tk/8.4

USE_X11=		Yes
NO_BUILD=		Yes
NO_REGRESS=		Yes
PKG_ARCH=		*
d44 3
a46 2
	@@perl -pi -e 's,!!COCCINELLALIB!!,${LOCALBASE}/lib/coccinella,'\
		 ${WRKSRC}/Coccinella.tcl ${WRKSRC}/lib/Init.tcl
d50 1
a50 1
	@@cd ${WRKSRC} ; tar cf - TclXML [c-z]* | \
d52 2
a53 1
	${INSTALL_SCRIPT} ${WRKSRC}/Coccinella.tcl ${PREFIX}/lib/coccinella/
d55 2
a56 3
	@@cd ${WRKSRC} && ${INSTALL_DATA} README.txt READMEs/README-jabber \
		READMEs/README-smileys msgs/README_encodings \
		sounds/README-sounds \
@


1.4
log
@fix a few obviously wrong dependencies, and remove extra shells in ghc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/02/08 04:54:49 david Exp $
d3 1
a3 1
COMMENT=		"Jabber client with whiteboard communication" 
@


1.3
log
@move any perl or sed substitutions from post-patch to pre-configure
(fixes make update-patches)
ok sturm@@; "looks reasonable" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/04/18 21:59:51 alek Exp $
d21 1
a21 1
RUN_DEPENDS=		wish8.4::x11/tk/8.4
@


1.2
log
@- Update to 0.95.4
- Patch sources so @@(un)exec is no longer needed

Mostly from Marc Bruenink <marc@@bruenink.de> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/12/07 13:21:43 alek Exp $
d28 1
a28 1
post-patch:
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME=		Coccinella-0.95.1Src
d29 2
a30 4
	@@perl -pi -e 's|exec wish|exec wish8.4|g'\
		 ${WRKSRC}/Coccinella.tcl
	@@perl -pi -e 's|parray chatstate xevent,\*||' \
		${WRKSRC}/jabber/Chat.tcl
d38 5
a42 3
	@@cd ${WRKSRC} && ${INSTALL_DATA} README README-jabber README-smileys \
		${PREFIX}/share/doc/coccinella/
	
@


1.1.1.1
log
@Import Coccinella 0.95.1

Coccinella is a Jabber chat client with whiteboard communication. The
whiteboard let you share your mp3s, photos, and lots of other stuff.
Further it accepts any fonts. So you will also be able to share
mathematical formulas with your contacts.

From Marc Bruenink <marc@@bruenink.de>

ok xsa@@, mbalmer@@
@
text
@@
