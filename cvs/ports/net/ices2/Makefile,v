head	1.26;
access;
symbols
	OPENBSD_6_1:1.25.0.2
	OPENBSD_6_1_BASE:1.25
	OPENBSD_6_0:1.24.0.2
	OPENBSD_6_0_BASE:1.24
	OPENBSD_5_9:1.23.0.2
	OPENBSD_5_9_BASE:1.23
	OPENBSD_5_8:1.23.0.4
	OPENBSD_5_8_BASE:1.23
	OPENBSD_5_7:1.20.0.8
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.20.0.6
	OPENBSD_5_6_BASE:1.20
	OPENBSD_5_5:1.20.0.4
	OPENBSD_5_5_BASE:1.20
	OPENBSD_5_4:1.20.0.2
	OPENBSD_5_4_BASE:1.20
	OPENBSD_5_3:1.18.0.4
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.18.0.2
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.17
	OPENBSD_5_1:1.17.0.2
	OPENBSD_5_0:1.16.0.2
	OPENBSD_5_0_BASE:1.16
	OPENBSD_4_9:1.15.0.2
	OPENBSD_4_9_BASE:1.15
	OPENBSD_4_8:1.10.0.2
	OPENBSD_4_8_BASE:1.10
	OPENBSD_4_7:1.8.0.12
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.10
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.8
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.6
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.4
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.6.0.2
	OPENBSD_4_0_BASE:1.6
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	alek_20050219:1.1.1.1
	alek:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2017.05.27.13.55.58;	author ajacoutot;	state Exp;
branches;
next	1.25;
commitid	SykG6k6P85X3Gc2i;

1.25
date	2016.09.13.16.12.14;	author naddy;	state Exp;
branches;
next	1.24;
commitid	LsYahYRn03mp1yEc;

1.24
date	2016.06.29.16.14.43;	author espie;	state Exp;
branches;
next	1.23;
commitid	c1yQMbJbfo0CFBcL;

1.23
date	2015.04.21.18.51.25;	author sthen;	state Exp;
branches;
next	1.22;
commitid	ptMCPiyuhL0JiHRZ;

1.22
date	2015.04.16.11.50.48;	author jasper;	state Exp;
branches;
next	1.21;
commitid	2wgtZebolzcriqz4;

1.21
date	2015.04.15.10.13.21;	author jasper;	state Exp;
branches;
next	1.20;
commitid	Srqy1efJNcxit1uR;

1.20
date	2013.03.21.08.46.34;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.11.11.35.47;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2012.03.29.13.38.48;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2011.09.16.11.13.38;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2011.06.29.12.00.45;	author jasper;	state Exp;
branches;
next	1.15;

1.15
date	2011.01.16.19.53.17;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2010.11.19.22.31.33;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2010.11.11.14.00.45;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2010.11.02.21.30.36;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2010.11.02.08.23.58;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2010.07.12.22.07.38;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2010.04.23.05.54.26;	author jakemsr;	state Exp;
branches;
next	1.8;

1.8
date	2007.07.21.08.09.31;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2006.12.16.12.22.34;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2006.08.03.23.15.57;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.03.14.20.00.43;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2006.02.05.15.34.53;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2005.10.21.16.14.02;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2005.04.18.20.14.34;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.02.19.20.49.51;	author alek;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.02.19.20.49.51;	author alek;	state Exp;
branches;
next	;


desc
@@


1.26
log
@I forgot the bump commit...
@
text
@# $OpenBSD: Makefile,v 1.25 2016/09/13 16:12:14 naddy Exp $

COMMENT=	icecast source for streaming Ogg Vorbis

DISTNAME=	ices-2.0.2
CATEGORIES=	net audio
REVISION=	2

HOMEPAGE=	http://www.icecast.org/ices.php

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c iconv lzma m ogg pthread shout sndio speex theora vorbis
WANTLIB += vorbisenc xml2 z

MASTER_SITES=	http://downloads.xiph.org/releases/ices/

# Needs AC_PROG_LIBTOOL
BUILD_DEPENDS += 	devel/libtool \
			${MODGNU_AUTOMAKE_DEPENDS}

LIB_DEPENDS=		audio/speex \
			converters/libiconv \
			net/libshout \
			textproc/libxml

AUTOCONF_VERSION=	2.61
AUTOMAKE_VERSION=	1.9
CONFIGURE_STYLE=	autoconf
CONFIGURE_ARGS=		--program-suffix=2 \
			--disable-sun-audio

SEPARATE_BUILD=		Yes

post-extract:
	cp ${FILESDIR}/im_sndio.{c,h} ${WRKSRC}/src/
	cp ${FILESDIR}/ices-sndio.xml ${WRKSRC}/conf/

AUTO_ENV=	AUTOCONF_VERSION=${AUTOCONF_VERSION} \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION}

post-patch:
	@@echo "Running aclocal-${AUTOMAKE_VERSION} in ${WRKSRC}"
	@@cd ${WRKSRC}; ${AUTO_ENV} aclocal -I m4

pre-configure:
	@@echo "Running automake-${AUTOMAKE_VERSION} in ${WRKSRC}"
	@@cd ${WRKSRC}; ${AUTO_ENV} automake --foreign

.include <bsd.port.mk>
@


1.25
log
@replace libiconv module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2016/06/29 16:14:43 espie Exp $
d7 1
a7 1
REVISION=	1
@


1.24
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2015/04/21 18:51:25 sthen Exp $
d14 1
a14 1
WANTLIB += c lzma m ogg pthread shout sndio speex theora vorbis
a18 3

MODULES=		converters/libiconv

d24 1
@


1.23
log
@add some simple missing lzma WANTLIBs (crept in via libxml)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2015/04/16 11:50:48 jasper Exp $
d7 1
a7 1
REVISION=	0
@


1.22
log
@add mising bdep automake

spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/04/15 10:13:21 jasper Exp $
d7 1
d14 3
a18 2
WANTLIB += c m ogg pthread shout sndio speex theora vorbis vorbisenc
WANTLIB += xml2 z
@


1.21
log
@- update to ices-2.0.2
- reformat Makefile to make it readable again
- use correct AUTOCONF_VERSION
- add rc script

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/03/21 08:46:34 ajacoutot Exp $
d21 2
a22 1
BUILD_DEPENDS += 	devel/libtool
@


1.20
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/11 11:35:47 espie Exp $
d5 1
a5 2
DISTNAME=	ices-2.0.1
REVISION=	7
d15 2
a16 13
AUTOCONF_VERSION=2.59
AUTOMAKE_VERSION=1.9
CONFIGURE_STYLE=autoconf automake
CONFIGURE_ARGS=	--program-suffix=2 --disable-sun-audio

# Needs AC_PROG_LIBTOOL	
BUILD_DEPENDS += devel/libtool
MODULES=	converters/libiconv
WANTLIB=	c m ogg pthread sndio theora vorbis vorbisenc z \
		shout>=3 speex>=4 xml2>=9
LIB_DEPENDS=	net/libshout \
		audio/speex \
		textproc/libxml
d18 16
a33 1
SEPARATE_BUILD=	Yes
@


1.19
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2012/03/29 13:38:48 sthen Exp $
a20 1
USE_LIBTOOL =	Yes
@


1.18
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2011/09/16 11:13:38 espie Exp $
a12 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.17
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2011/06/29 12:00:45 jasper Exp $
d34 1
a34 1
SEPARATE_BUILD=	simple
@


1.16
log
@- fix build with newer libtool
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2011/01/16 19:53:17 naddy Exp $
d6 1
a6 1
REVISION=	6
@


1.15
log
@drop maintainership; on behalf of mgrimm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/11/19 22:31:33 espie Exp $
d20 1
a20 1
AUTOMAKE_VERSION=1.8
@


1.14
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/11/11 14:00:45 espie Exp $
d6 1
a6 1
REVISION=	5
a10 2
MAINTAINER=	Moritz Grimm <mdgrimm@@gmx.net>

a15 1

@


1.13
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/11/02 21:30:36 steven Exp $
d29 1
a29 1
BUILD_DEPENDS += ::devel/libtool
d32 4
a35 4
		shout.>=3 speex.>=4 xml2.>=9
LIB_DEPENDS=	::net/libshout \
		::audio/speex \
		::textproc/libxml
@


1.12
log
@openbsd libtool can build this too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/11/02 08:23:58 jasper Exp $
a18 1
WANTLIB=		c m ogg pthread sndio theora vorbis vorbisenc z
d31 5
a35 3
LIB_DEPENDS=	shout.>=3::net/libshout \
		speex.>=4::audio/speex \
		xml2.>=9::textproc/libxml
@


1.11
log
@- needs gnu libtool, autoconf needs some macros
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/12 22:07:38 sthen Exp $
d28 1
d30 1
a30 1
USE_LIBTOOL=	gnu
@


1.10
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/04/23 05:54:26 jakemsr Exp $
d27 3
a29 2
	
USE_LIBTOOL=	Yes
@


1.9
log
@sndio for ices2
ok mgrimm@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/07/21 08:09:31 ajacoutot Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
d18 1
@


1.8
log
@- update MAINTAINER's email address
- better HOMEPAGE
- remove quotes around COMMENT while here

from Moritz Grimm <mdgrimm at gmx dot net> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/12/16 12:22:34 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
d13 1
a13 1
# GPL
d18 1
a18 1
WANTLIB=		c m ogg pthread theora vorbis vorbisenc z
d22 4
a25 2
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--program-suffix=2
d35 14
a48 3
pre-patch:
	@@sed -e 's,oss,sun,g' < ${WRKSRC}/conf/ices-oss.xml \
		> ${WRKSRC}/conf/ices-sun.xml
@


1.7
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/08/03 23:15:57 espie Exp $
d3 1
a3 1
COMMENT=	"icecast source for streaming Ogg Vorbis"
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
d9 1
a9 1
HOMEPAGE=	http://www.icecast.org/
d11 1
a11 1
MAINTAINER=	Moritz Grimm <gtgbr@@gmx.net>
@


1.6
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/03/14 20:00:43 sturm Exp $
a26 1
BUILD_DEPENDS=	::devel/pkgconfig
@


1.5
log
@cleanup after libshout update

from maintainer Moritz Grimm <gtgbr at gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/02/05 15:34:53 alek Exp $
d28 3
a30 3
LIB_DEPENDS=	shout.3::net/libshout \
		speex.4::audio/speex \
		xml2.9::textproc/libxml
@


1.4
log
@- Install OSS example configuration instead of ALSA configuration
- Remove snprintf patches
- Bump PKGNAME

From Moritz Grimm <gtgbr@@gmx.net> (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/10/21 16:14:02 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
d18 1
a18 1
WANTLIB=		c m pthread z ogg vorbis vorbisenc
d29 1
@


1.3
log
@fix double free(); from maintainer Moritz Grimm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/04/18 20:14:34 sturm Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.2
log
@more snprintf() from maintainer Moritz Grimm <gtgbr at gmx.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/02/19 20:49:51 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d25 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@Import ices 2.0.1

Ices2 is a source client for streaming Ogg Vorbis audio to an Icecast v2
server. It supports streaming of .ogg files in playlist mode as well as
encoding and streaming live input.

From Moritz Grimm <gtgbr@@gmx.net>
@
text
@@
