head	1.30;
access;
symbols
	OPENBSD_6_2:1.30.0.2
	OPENBSD_6_2_BASE:1.30
	OPENBSD_6_1:1.26.0.4
	OPENBSD_6_1_BASE:1.26
	OPENBSD_6_0:1.26.0.2
	OPENBSD_6_0_BASE:1.26
	OPENBSD_5_9:1.25.0.2
	OPENBSD_5_9_BASE:1.25
	OPENBSD_5_8:1.25.0.4
	OPENBSD_5_8_BASE:1.25
	OPENBSD_5_7:1.23.0.2
	OPENBSD_5_7_BASE:1.23
	OPENBSD_5_6:1.22.0.2
	OPENBSD_5_6_BASE:1.22
	OPENBSD_5_5:1.19.0.2
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.18.0.2
	OPENBSD_5_4_BASE:1.18
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.11.0.2
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.2
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	ajacoutot_20100323:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.30
date	2017.08.28.08.31.12;	author ajacoutot;	state Exp;
branches;
next	1.29;
commitid	oarPA6kpqTOi3D2D;

1.29
date	2017.07.26.22.45.27;	author sthen;	state Exp;
branches;
next	1.28;
commitid	tD4MFrpYYDDL2UFT;

1.28
date	2017.07.16.19.18.58;	author espie;	state Exp;
branches;
next	1.27;
commitid	tt0GhWK5c4uf9ILG;

1.27
date	2017.04.10.11.46.32;	author sthen;	state Exp;
branches;
next	1.26;
commitid	HY6VNZxjJWzKQFDV;

1.26
date	2016.03.16.21.19.38;	author naddy;	state Exp;
branches;
next	1.25;
commitid	eS3Ayl3CL8hkKETd;

1.25
date	2015.07.11.07.59.41;	author ajacoutot;	state Exp;
branches;
next	1.24;
commitid	SDnK8vvjaCaW0xDm;

1.24
date	2015.05.22.15.16.47;	author ajacoutot;	state Exp;
branches;
next	1.23;
commitid	53Gx5mXetphd9uj4;

1.23
date	2014.08.30.09.07.36;	author ajacoutot;	state Exp;
branches;
next	1.22;
commitid	gVehCXyAN8crcwLR;

1.22
date	2014.04.27.09.46.26;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2014.04.25.14.13.02;	author ajacoutot;	state Exp;
branches;
next	1.20;

1.20
date	2014.04.25.11.17.59;	author ajacoutot;	state Exp;
branches;
next	1.19;

1.19
date	2013.10.02.10.46.14;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.35.47;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.02.14.06.24;	author ajacoutot;	state Exp;
branches;
next	1.16;

1.16
date	2013.01.16.14.36.00;	author ajacoutot;	state Exp;
branches;
next	1.15;

1.15
date	2013.01.16.14.18.17;	author ajacoutot;	state Exp;
branches;
next	1.14;

1.14
date	2013.01.08.09.51.09;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2012.11.27.08.14.24;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2012.08.25.13.16.30;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2012.03.02.09.04.59;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2011.12.30.17.39.06;	author edd;	state Exp;
branches;
next	1.9;

1.9
date	2011.10.26.16.59.51;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2011.06.27.13.38.30;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2011.05.11.12.03.19;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.19.22.31.33;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.11.14.00.45;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.07.12.22.07.38;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2010.06.27.01.30.33;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.27.14.58.50;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2010.03.23.21.11.57;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2010.03.23.21.11.57;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.30
log
@Update to h323plus-1.26.8.20170428.
@
text
@# $OpenBSD: Makefile,v 1.29 2017/07/26 22:45:27 sthen Exp $

COMMENT=		H.323 video conferencing library

# CVS checkout
DISTNAME=		h323plus-1.26.8.20170428

CATEGORIES=		net devel

SHARED_LIBS=		h323	6.0

HOMEPAGE=		http://www.h323plus.org/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# MPL (dlopen(3) GPL modules)
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += SDL c crypto expat lber ldap ldap_r m pt pthread sasl2
WANTLIB += ssl ${COMPILER_LIBCXX}

MASTER_SITES=		https://distfiles.bsdfrog.org/

LIB_DEPENDS=		devel/ptlib

ALL_TARGET=		default #${WRKSRC}/Makefile 
USE_GMAKE=		Yes
NO_TEST=		Yes

MODGNU_CONFIG_GUESS_DIRS= \
			${WRKSRC} \
			${WRKSRC}/plugins

CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		PTLIBDIR=${LOCALBASE}/share/ptlib

# http://www.tandberg.com/collateral/tandberg-ITU-license.pdf
# H.460.23/.24. Contact consulting@@h323plus.org for licensing terms.
# (sync with net/gnugk)
CONFIGURE_ARGS +=	--disable-h46018
CONFIGURE_ARGS +=	--disable-h46023

MAKE_ENV=		VERBOSE=1
MAKE_FLAGS=		MAJOR_VERSION=${LIBh323_VERSION:R} \
			MINOR_VERSION=${LIBh323_VERSION:E}

pre-configure:
	${SUBST_CMD} ${WRKSRC}/Makefile.in
	${SUBST_CMD} ${WRKSRC}/src/make/lib.mak

.include <bsd.port.mk>
@


1.29
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2017/07/16 19:18:58 espie Exp $
d3 1
a3 2
# XXX drop at next release
CONFIGURE_ARGS += --enable-h235
d5 2
a6 1
COMMENT=	H.323 video conferencing library
d8 1
a8 5
V=		1_26_5
DISTNAME=	h323plus-v${V}
PKGNAME=	h323plus-${V:S/_/./g}
WRKDIST=	${WRKDIR}/h323plus
REVISION=	2
d10 1
a10 1
CATEGORIES=	net devel
d12 1
a12 1
SHARED_LIBS=	h323	5.0
d14 1
a14 3
HOMEPAGE=	http://www.h323plus.org/

MAINTAINER=	Antoine Jacoutot <ajacoutot@@openbsd.org>
d22 1
a22 1
MASTER_SITES=	http://www.h323plus.org/source/download/
d24 1
a24 1
LIB_DEPENDS=	devel/ptlib
d26 3
a28 3
ALL_TARGET=	default #${WRKSRC}/Makefile 
USE_GMAKE=	Yes
NO_TEST=	Yes
d31 2
a32 2
		${WRKSRC} \
		${WRKSRC}/plugins
d34 2
a35 2
CONFIGURE_STYLE=gnu
CONFIGURE_ENV=	PTLIBDIR=${LOCALBASE}/share/ptlib
d40 2
a41 2
CONFIGURE_ARGS += --disable-h46018
CONFIGURE_ARGS += --disable-h46023
d43 3
a45 3
MAKE_ENV=	VERBOSE=1
MAKE_FLAGS=	MAJOR_VERSION=${LIBh323_VERSION:R} \
		MINOR_VERSION=${LIBh323_VERSION:E}
@


1.28
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2017/04/10 11:46:32 sthen Exp $
d12 1
a12 1
REVISION=	1
@


1.27
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2016/03/16 21:19:38 naddy Exp $
d26 1
a26 1
WANTLIB += ssl ${LIBCXX}
@


1.26
log
@remove SHARED_ONLY from ports that use only the gnu module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2015/07/11 07:59:41 ajacoutot Exp $
d26 1
a26 1
WANTLIB += ssl stdc++
@


1.25
log
@No need to install version.h.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2015/05/22 15:16:47 ajacoutot Exp $
a4 2

SHARED_ONLY=	Yes
@


1.24
log
@Bump after recent ptlib changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/08/30 09:07:36 ajacoutot Exp $
d14 1
a14 1
REVISION=	0
a57 3

post-install:
	${INSTALL_DATA} ${WRKSRC}/version.h ${PREFIX}/share/openh323
@


1.23
log
@Update to h323plus-1.26.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2014/04/27 09:46:26 ajacoutot Exp $
d14 1
@


1.22
log
@Fix the optshared target for dependant ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2014/04/25 14:13:02 ajacoutot Exp $
d10 1
a10 1
V=		1_26_0
a13 1
REVISION=	0
@


1.21
log
@Add MODGNU_CONFIG_GUESS_DIRS so that we use our own config.guess in both
directories where configure is run.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2014/04/25 11:17:59 ajacoutot Exp $
d14 1
@


1.20
log
@Update to h323plus-1.26.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/10/02 10:46:14 ajacoutot Exp $
d36 4
@


1.19
log
@Regen WANTLIB after ptlib upgrade.
Clean up this port while here.
@
text
@d1 4
a4 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:35:47 espie Exp $
d10 1
a10 1
V=		1_25_0
a13 1
REVISION=	0
d17 1
a17 1
SHARED_LIBS=	h323	4.1    # 1.25.0
d29 1
a29 1
MASTER_SITES=	${HOMEPAGE}source/download/
d31 1
a31 1
LIB_DEPENDS=	devel/ptlib>=2.10.11
d38 1
d41 2
a43 2

# H.460.23/.24. Contact consulting@@h323plus.org for licensing terms.
d46 1
a46 6
# XXX celtcodec.c:55: error: too many arguments to function 'celt_mode_create'
CONFIGURE_ARGS += --disable-celt

MAKE_ENV=	VERBOSE=1 \
		OH323_BUILDSELF=1

d51 2
a52 2
	${SUBST_CMD} ${WRKSRC}/Makefile.in \
		${WRKSRC}/openh323u.mak.in
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/02 14:06:24 ajacoutot Exp $
d10 3
d24 2
a25 2
WANTLIB += SDL c crypto expat lber ldap ldap_r m pt pthread ssl
WANTLIB += stdc++
d29 1
a29 3
LIB_DEPENDS=	devel/ptlib>=2.10.0

WRKDIST=	${WRKDIR}/h323plus
d31 1
a32 1
ALL_TARGET=	default
a35 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
d46 2
a47 1
MAKE_ENV=	CC=${CC} CPLUS=${CXX} OH323_BUILDSELF="1" VERBOSE="1"
@


1.17
log
@Update to h323plus-1.25.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/01/16 14:36:00 ajacoutot Exp $
a19 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d32 1
a32 1
NO_REGRESS=	Yes
@


1.16
log
@Remove bogus @@extra marker.

spotted by brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/01/16 14:18:17 ajacoutot Exp $
d7 1
a7 1
V=		1_24_99
a10 1
REVISION=	0
d12 1
a12 1
SHARED_LIBS=	h323	4.0    # 1.25.1
d27 1
a27 3
# version 1_24_99 is a cvs checkout from 01-16-2013
#MASTER_SITES=	${HOMEPAGE}source/download/
MASTER_SITES=	http://distfiles.bsdfrog.org/
d29 1
a29 1
LIB_DEPENDS=	devel/ptlib
@


1.15
log
@Update to h323plus-1.24.99.
(cvs checkout needed for upcoming GnuGK update).

Remove plugins support, they are useless for GnuGK and other apps using
H323 plugins use opal nowadays.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/11/27 08:14:24 ajacoutot Exp $
d11 1
@


1.14
log
@Disable the H.263 / H.264 codec support within H323Plus as it is not
necessary for GnuGK to work and the unmaintained code does not build
with anything modern for FFmpeg getting in the way of updating FFmpeg.

ok ajacoutot@@
@
text
@d7 1
a7 1
V=		1_24_0
a9 1
REVISION=	2
d12 1
a12 1
SHARED_LIBS=	h323	3.0    # 1.21.0
d24 2
a25 2
WANTLIB += SDL c crypto expat gsm lber ldap ldap_r m pt pthread
WANTLIB += speex ssl stdc++
d27 3
a29 1
MASTER_SITES=	${HOMEPAGE}source/download/
d31 1
a31 3
LIB_DEPENDS=	audio/gsm \
		audio/speex \
		devel/ptlib
a38 2
MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC} ${WRKSRC}/plugins

a42 9
# internal ilbc (port libilbc?)
CONFIGURE_ARGS=	--with-plugin-installdir=h323plus

# XXX break net/gnugk which depends on the latst h460p code from cvs;
# enable it again on a future release.
# h460presence.cxx:192: error: no matching function for call to
# H323PresenceInstruction::H323PresenceInstruction(H323PresenceInstruction::Instruction, PString, const PString&, const PString&)'
CONFIGURE_ARGS += --disable-h460p

a51 3
# these codecs are not necessary for net/gnugk
CONFIGURE_ARGS += --disable-libavcodec

d59 1
a59 4
		${WRKSRC}/plugins/audio/Speex/Makefile.in \
		${WRKSRC}/plugins/audio/GSM0610/Makefile.in \
		${WRKSRC}/openh323u.mak.in \
		${WRKSRC}/plugins/video/H.263-ffmpeg/h263ffmpeg.cxx
a61 2
	cd ${WRKBUILD}/plugins && \
		${SETENV} ${MAKE_ENV} ${MAKE_PROGRAM} ${ALL_FAKE_FLAGS} ${INSTALL_TARGET}
@


1.13
log
@Bump after recent ptlib update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/08/25 13:16:30 ajacoutot Exp $
d10 1
a11 1
REVISION=	1
d25 2
a26 2
WANTLIB += SDL avcodec avutil c crypto expat gsm lber ldap ldap_r
WANTLIB += m pt pthread sasl2 speex ssl stdc++ x264
d30 3
a32 2
LIB_DEPENDS=	devel/ptlib \
		graphics/ffmpeg
d45 1
d64 3
a77 4
	perl -pi -e 's,h263p_encoder,ff_h263p_encoder,g;' \
		-e 's,h264_decoder,ff_h264_decoder,g;' \
		-e 's,mpeg4_encoder,ff_mpeg4_encoder,g' \
		${WRKSRC}/plugins/configure
@


1.12
log
@--disable-h460p which requires development (unreleased) code from h323plus
for dependent ports to compile properly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/03/02 09:04:59 ajacoutot Exp $
d11 1
a11 1
REVISION=	0
d30 1
a30 1
LIB_DEPENDS=	devel/ptlib>=2.10.7 \
@


1.11
log
@Update to h323plus-1.24.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/12/30 17:39:06 edd Exp $
d11 1
d30 1
a30 1
LIB_DEPENDS=	devel/ptlib>=2.10.4 \
d43 9
a51 6
		LDFLAGS="-L${LOCALBASE}/lib -pthread -lavutil"
CONFIGURE_ARGS=	--disable-localspeex \
		--disable-localgsm \
		--enable-localilbc \
		--enable-gnugk \
		--with-plugin-installdir=h323plus
@


1.10
log
@Make net/h323plus work with brad's recent ffmpeg update.
From brad, OK aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/10/26 16:59:51 ajacoutot Exp $
d7 1
a7 1
V=		1_23_0
a9 1
REVISION=	0
d27 1
a27 1
MASTER_SITES=	${HOMEPAGE}/source/download/
d29 2
a30 2
LIB_DEPENDS=	devel/ptlib>=2.10.3 \
		graphics/ffmpeg>=20111126
@


1.9
log
@Major update to h323plus-1.23.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/06/27 13:38:30 sthen Exp $
d10 1
d31 1
a31 1
		graphics/ffmpeg
@


1.8
log
@sync WANTLIB and bump.
zap a few stray space-tabs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/05/11 12:03:19 jasper Exp $
d7 1
a7 1
V=		1_21_0
a9 1
REVISION=	3
a11 2
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} plugins-v${V}${EXTRACT_SUFX}

d24 3
d29 2
a30 7
WANTLIB += SDL c crypto expat lber ldap ldap_r m sasl2
WANTLIB += ssl pt>=3 avutil>=6 speex>=4 gsm>=1 stdc++

LIB_DEPENDS=	devel/ptlib \
		graphics/ffmpeg \
		audio/speex \
		audio/gsm
d35 1
a35 1
ALL_TARGET=	opt
d42 1
a42 2
		LDFLAGS="-L${LOCALBASE}/lib -pthread -lavutil" \
		PTLIBDIR="`ptlib-config --prefix`/share/ptlib"
d45 6
a50 1
		--enable-gnugk
d52 7
a58 2
MAKE_ENV=	STDCCFLAGS="${STDCCFLAGS} -I${WRKSRC}/include" \
		CC=${CC} CPLUS=${CXX} BUILDSELF="1"
a62 3
post-extract:
	@@mv ${WRKDIR}/plugins ${WRKSRC}/plugins

d66 1
d69 4
a72 2
	find ${WRKSRC}/plugins/ -type f -name Makefile.in -exec  \
		perl -pi -e 's,pwlib,ptlib,g' {} \;
d75 1
a75 1
	@@cd ${WRKBUILD}/plugins && \
@


1.7
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/19 22:31:33 espie Exp $
d10 1
a10 1
REVISION=	2
d30 1
a30 1
WANTLIB += ssl pt>=3 avutil>=6 speex>=4 gsm>=1
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/11 14:00:45 espie Exp $
d10 1
a10 1
REVISION=	1
@


1.5
log
@more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/07/12 22:07:38 sthen Exp $
d30 1
a30 1
WANTLIB += ssl pt.>=3 avutil.>=6 speex.>=4 gsm.>=1
d32 4
a35 4
LIB_DEPENDS=	::devel/ptlib \
		::graphics/ffmpeg \
		::audio/speex \
		::audio/gsm
@


1.4
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/06/27 01:30:33 ajacoutot Exp $
d30 1
a30 1
WANTLIB += ssl
d32 4
a35 4
LIB_DEPENDS=	pt.>=3::devel/ptlib \
		avutil.>=6::graphics/ffmpeg \
		speex.>=4::audio/speex \
		gsm.>=1::audio/gsm
@


1.3
log
@s/lpthread/pthread
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/03/27 14:58:50 ajacoutot Exp $
d9 2
a10 1
PKGNAME=	h323plus-${V:S/_/./g}p1
@


1.2
log
@Fix compilation under amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2010/03/23 21:11:57 ajacoutot Exp $
d9 1
a9 1
PKGNAME=	h323plus-${V:S/_/./g}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d9 1
a9 1
PKGNAME=	h323plus-${V:S/_/./g}
@


1.1.1.1
log
@Import h323plus-1.21.0

The H323plus project aims to create a full featured, interoperable, Open
Source implementation of the ITU H.323 teleconferencing protocol.
@
text
@@
