head	1.74;
access;
symbols
	OPENBSD_6_1:1.71.0.4
	OPENBSD_6_1_BASE:1.71
	OPENBSD_6_0:1.71.0.2
	OPENBSD_6_0_BASE:1.71
	OPENBSD_5_9:1.70.0.6
	OPENBSD_5_9_BASE:1.70
	OPENBSD_5_8:1.70.0.8
	OPENBSD_5_8_BASE:1.70
	OPENBSD_5_7:1.70.0.4
	OPENBSD_5_7_BASE:1.70
	OPENBSD_5_6:1.70.0.2
	OPENBSD_5_6_BASE:1.70
	OPENBSD_5_5:1.69.0.2
	OPENBSD_5_5_BASE:1.69
	OPENBSD_5_4:1.68.0.2
	OPENBSD_5_4_BASE:1.68
	OPENBSD_5_3:1.66.0.2
	OPENBSD_5_3_BASE:1.66
	OPENBSD_5_2:1.65.0.2
	OPENBSD_5_2_BASE:1.65
	OPENBSD_5_1_BASE:1.64
	OPENBSD_5_1:1.64.0.4
	OPENBSD_5_0:1.64.0.2
	OPENBSD_5_0_BASE:1.64
	OPENBSD_4_9:1.63.0.2
	OPENBSD_4_9_BASE:1.63
	OPENBSD_4_8:1.60.0.2
	OPENBSD_4_8_BASE:1.60
	OPENBSD_4_7:1.57.0.2
	OPENBSD_4_7_BASE:1.57
	OPENBSD_4_6:1.54.0.2
	OPENBSD_4_6_BASE:1.54
	OPENBSD_4_5:1.52.0.2
	OPENBSD_4_5_BASE:1.52
	OPENBSD_4_4:1.44.0.2
	OPENBSD_4_4_BASE:1.44
	OPENBSD_4_3:1.34.0.2
	OPENBSD_4_3_BASE:1.34
	OPENBSD_4_2:1.33.0.2
	OPENBSD_4_2_BASE:1.33
	OPENBSD_4_1:1.29.0.6
	OPENBSD_4_1_BASE:1.29
	OPENBSD_4_0:1.29.0.4
	OPENBSD_4_0_BASE:1.29
	OPENBSD_3_9:1.29.0.2
	OPENBSD_3_9_BASE:1.29
	OPENBSD_3_8:1.22.0.2
	OPENBSD_3_8_BASE:1.22
	OPENBSD_3_7:1.17.0.2
	OPENBSD_3_7_BASE:1.17
	OPENBSD_3_6:1.16.0.2
	OPENBSD_3_6_BASE:1.16
	OPENBSD_3_5:1.15.0.2
	OPENBSD_3_5_BASE:1.15
	OPENBSD_3_4:1.8.0.2
	OPENBSD_3_4_BASE:1.8
	OPENBSD_3_3:1.3.0.2
	OPENBSD_3_3_BASE:1.3
	brad_2002-12-15:1.1.1.1
	brad:1.1.1;
locks; strict;
comment	@# @;


1.74
date	2017.09.26.14.25.57;	author dcoppa;	state Exp;
branches;
next	1.73;
commitid	hroSih7CPFFGiZjN;

1.73
date	2017.04.16.20.36.58;	author sthen;	state Exp;
branches;
next	1.72;
commitid	nmyPwFbAYOmWfWlZ;

1.72
date	2017.04.16.10.38.10;	author sthen;	state Exp;
branches;
next	1.71;
commitid	1f2MtxuPFLs5xG7w;

1.71
date	2016.04.09.20.14.48;	author naddy;	state Exp;
branches;
next	1.70;
commitid	v3xsXUgHi26KLfAN;

1.70
date	2014.07.16.21.17.04;	author brad;	state Exp;
branches;
next	1.69;
commitid	bLSrylMZOaYW0Wco;

1.69
date	2013.11.04.21.50.09;	author brad;	state Exp;
branches;
next	1.68;

1.68
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2013.03.11.11.35.56;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2013.02.09.14.49.52;	author sthen;	state Exp;
branches;
next	1.65;

1.65
date	2012.03.08.12.13.01;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2011.05.11.12.03.20;	author jasper;	state Exp;
branches;
next	1.63;

1.63
date	2011.01.15.10.56.51;	author jasper;	state Exp;
branches;
next	1.62;

1.62
date	2010.11.19.22.31.38;	author espie;	state Exp;
branches;
next	1.61;

1.61
date	2010.10.18.18.36.57;	author espie;	state Exp;
branches;
next	1.60;

1.60
date	2010.07.12.22.07.41;	author sthen;	state Exp;
branches;
next	1.59;

1.59
date	2010.05.17.22.53.37;	author sthen;	state Exp;
branches;
next	1.58;

1.58
date	2010.05.17.08.39.24;	author sthen;	state Exp;
branches;
next	1.57;

1.57
date	2009.09.27.19.25.02;	author sthen;	state Exp;
branches;
next	1.56;

1.56
date	2009.08.11.21.23.14;	author sthen;	state Exp;
branches;
next	1.55;

1.55
date	2009.08.01.09.21.55;	author sthen;	state Exp;
branches;
next	1.54;

1.54
date	2009.03.29.09.13.01;	author sthen;	state Exp;
branches
	1.54.2.1;
next	1.53;

1.53
date	2009.03.17.15.35.37;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2009.01.23.11.01.06;	author sthen;	state Exp;
branches
	1.52.2.1;
next	1.51;

1.51
date	2009.01.20.22.31.09;	author sthen;	state Exp;
branches;
next	1.50;

1.50
date	2009.01.12.00.31.45;	author sthen;	state Exp;
branches;
next	1.49;

1.49
date	2009.01.10.01.04.06;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2008.10.26.18.12.11;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2008.09.26.21.17.57;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2008.09.15.00.13.40;	author brad;	state Exp;
branches;
next	1.45;

1.45
date	2008.08.27.00.35.24;	author martynas;	state Exp;
branches;
next	1.44;

1.44
date	2008.06.22.18.27.05;	author sthen;	state Exp;
branches;
next	1.43;

1.43
date	2008.06.10.09.04.02;	author sthen;	state Exp;
branches;
next	1.42;

1.42
date	2008.06.06.08.47.57;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2008.05.27.08.30.29;	author robert;	state Exp;
branches;
next	1.40;

1.40
date	2008.04.22.20.24.10;	author sthen;	state Exp;
branches;
next	1.39;

1.39
date	2008.04.22.00.34.30;	author sthen;	state Exp;
branches;
next	1.38;

1.38
date	2008.04.17.10.26.15;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2008.04.12.22.52.46;	author sthen;	state Exp;
branches;
next	1.36;

1.36
date	2008.03.31.11.07.45;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2008.03.22.23.06.50;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2007.09.01.20.11.21;	author kili;	state Exp;
branches
	1.34.2.1;
next	1.33;

1.33
date	2007.06.04.11.40.56;	author martynas;	state Exp;
branches;
next	1.32;

1.32
date	2007.05.24.08.27.34;	author steven;	state Exp;
branches;
next	1.31;

1.31
date	2007.04.01.20.43.59;	author steven;	state Exp;
branches;
next	1.30;

1.30
date	2007.03.15.20.25.12;	author deanna;	state Exp;
branches;
next	1.29;

1.29
date	2005.12.14.21.35.23;	author brad;	state Exp;
branches
	1.29.2.1
	1.29.4.1
	1.29.6.1;
next	1.28;

1.28
date	2005.12.14.02.11.40;	author brad;	state Exp;
branches;
next	1.27;

1.27
date	2005.11.04.00.09.56;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2005.09.13.02.38.52;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2005.09.09.20.08.54;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2005.09.09.17.03.34;	author brad;	state Exp;
branches;
next	1.23;

1.23
date	2005.09.05.16.12.50;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2005.08.17.16.02.08;	author brad;	state Exp;
branches
	1.22.2.1;
next	1.21;

1.21
date	2005.08.11.16.25.13;	author brad;	state Exp;
branches;
next	1.20;

1.20
date	2005.07.24.00.28.33;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2005.07.05.01.40.45;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2005.04.07.00.49.18;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2004.12.16.00.31.25;	author alek;	state Exp;
branches
	1.17.2.1;
next	1.16;

1.16
date	2004.08.10.09.38.34;	author xsa;	state Exp;
branches
	1.16.2.1;
next	1.15;

1.15
date	2004.03.03.18.17.13;	author brad;	state Exp;
branches;
next	1.14;

1.14
date	2004.02.29.07.12.41;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2004.02.12.06.34.22;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2004.01.07.04.53.12;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	2003.10.31.16.40.06;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2003.10.29.04.12.47;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2003.09.24.05.50.39;	author jolan;	state Exp;
branches;
next	1.8;

1.8
date	2003.08.19.03.52.27;	author jolan;	state Exp;
branches;
next	1.7;

1.7
date	2003.07.30.00.26.26;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2003.06.22.10.01.35;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2003.05.12.08.23.47;	author jolan;	state Exp;
branches;
next	1.4;

1.4
date	2003.05.04.04.02.53;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2003.01.26.19.11.17;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2003.01.22.03.34.59;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2002.12.16.03.40.02;	author brad;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.12.16.03.40.02;	author brad;	state Exp;
branches;
next	;

1.16.2.1
date	2005.09.19.06.43.51;	author sturm;	state Exp;
branches;
next	;

1.17.2.1
date	2005.09.19.06.49.19;	author sturm;	state Exp;
branches;
next	;

1.22.2.1
date	2005.11.01.11.18.09;	author sturm;	state Exp;
branches;
next	;

1.29.2.1
date	2007.03.19.21.42.00;	author sturm;	state Exp;
branches;
next	;

1.29.4.1
date	2007.03.19.21.11.06;	author sturm;	state Exp;
branches;
next	;

1.29.6.1
date	2007.05.01.16.17.34;	author sturm;	state Exp;
branches;
next	;

1.34.2.1
date	2008.06.10.04.14.11;	author robert;	state Exp;
branches;
next	;

1.52.2.1
date	2009.10.16.23.40.16;	author william;	state Exp;
branches;
next	;

1.54.2.1
date	2009.11.02.02.27.42;	author william;	state Exp;
branches;
next	;


desc
@@


1.74
log
@
Unbreak autoconf check for va_copy() with clang by not using nested
functions
@
text
@# $OpenBSD: Makefile,v 1.73 2017/04/16 20:36:58 sthen Exp $

COMMENT=	Secure Internet Live Conferencing (SILC) server

DISTNAME=	silc-server-1.1.19
REVISION=	2
CATEGORIES=	net
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=silc/}
EXTRACT_SUFX=	.tar.bz2

HOMEPAGE=	http://www.silcnet.org/

MAINTAINER=	Brad Smith <brad@@comstyle.com>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c iconv pthread

LIB_DEPENDS=	converters/libiconv

.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	devel/yasm
.endif

FLAVORS=	operops
FLAVOR?=

.if ${FLAVOR:Moperops}
PATCH_LIST+=	patch-* operops-*
.endif

CONFDIR=	${SYSCONFDIR}/silcd
SUBST_VARS=	CONFDIR

LIBTOOL_FLAGS=	--tag=disable-shared
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
CONFIGURE_ENV+=	ac_cv_path_NASM=no YASM=${LOCALBASE}/bin/yasm
.endif
CONFIGURE_ARGS+= --docdir=${PREFIX}/share/doc/silcd \
		 --with-etcdir=${CONFDIR} \
		 --with-logsdir=/var/log/silcd \
		 --with-silcd-config-file=${CONFDIR}/silcd.conf \
		 --with-silcd-pid-file=/var/run/silcd.pid \
		 --enable-debug

.if ${MACHINE_ARCH} != "amd64" && ${MACHINE_ARCH} != "i386"
CONFIGURE_ARGS+= --disable-asm
.endif

post-install:
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/silcd
	${INSTALL_DATA} ${WRKSRC}/doc/FAQ ${PREFIX}/share/doc/silcd
	${INSTALL_DATA} ${WRKSRC}/doc/example_silcd.conf \
		${PREFIX}/share/examples/silcd/silcd.conf
	${INSTALL_DATA} ${WRKSRC}/doc/silcalgs.conf \
		${PREFIX}/share/examples/silcd

.include <bsd.port.mk>
@


1.73
log
@Fix SILC_ADD_CC_FLAGS to actually test that the compiler flags work,
they were testing the wrong thing. silc-toolkit diff from espie,
ports diff for all 3 from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2017/04/16 10:38:10 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.72
log
@Remove the use of -fno-regmove to appease Clang.  From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2016/04/09 20:14:48 naddy Exp $
d6 1
a6 1
REVISION=	0
@


1.71
log
@replace libiconv module with library dependency; no bump needed
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2014/07/16 21:17:04 brad Exp $
d6 1
@


1.70
log
@Update to silc-server 1.1.19.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2013/11/04 21:50:09 brad Exp $
d17 1
a17 1
WANTLIB=	c pthread
d19 1
a19 1
MODULES=	converters/libiconv
@


1.69
log
@Respect CFLAGS throughout the whole build.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2013/03/21 08:46:35 ajacoutot Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.1.18
REVISION=	4
d7 2
a15 1
WANTLIB=		c pthread
d17 1
a17 4
MASTER_SITES=	http://ftp.silcnet.org/server/sources/ \
		ftp://ftp.silcnet.org/silc/server/sources/ \
		ftp://ftp.no.silcnet.org/pub/silc/server/sources/ \
		http://the.wiretapped.net/security/network-security/silc/server/sources/
d37 1
a37 1
AUTOCONF_VERSION= 2.63
@


1.68
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2013/03/11 11:35:56 espie Exp $
d6 1
a6 1
REVISION=	3
@


1.67
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2013/02/09 14:49:52 sthen Exp $
a37 1
USE_LIBTOOL=	Yes
@


1.66
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2012/03/08 12:13:01 ajacoutot Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.65
log
@Garbage collect the /dev/arandom patches.

from Brad
ok landry@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/05/11 12:03:20 jasper Exp $
d34 1
a34 1
.if ${FLAVOR:L:Moperops}
@


1.64
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2011/01/15 10:56:51 jasper Exp $
d6 1
a6 1
REVISION=	2
@


1.63
log
@- remove USE_GROFF=Yes, manpages checked by brad.

from brad (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/11/19 22:31:38 espie Exp $
d6 1
a6 1
REVISION=	1	
@


1.62
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/10/18 18:36:57 espie Exp $
a41 1
USE_GROFF =	Yes
@


1.61
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/07/12 22:07:41 sthen Exp $
d28 1
a28 1
BUILD_DEPENDS+=	:yasm-*:devel/yasm
@


1.60
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/05/17 22:53:37 sthen Exp $
d42 1
@


1.59
log
@- Use the correct autoconf version.
- Don't try and install a file into a directory before it's created,
(Fixes packaging with systrace; rather than returning 'No such file or
directory' when you try to 'install aaa bbb/', under systrace aaa gets
installed to a *file* named bbb).

ok Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/05/17 08:39:24 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.58
log
@Roll in some fixes from upstream.. From Brad.

- silcd: check entity validity after command reply
- Packet engine: prevent divide by 0
- SKE: Make sure failure received from remote is error status.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/09/27 19:25:02 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d44 1
a44 2
# XXX should be 2.63
AUTOCONF_VERSION= 2.61
@


1.57
log
@Update to 1.1.18, from Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/08/11 21:23:14 sthen Exp $
d6 1
@


1.56
log
@SECURITY; add patches from upstream repo to fix format string bugs.
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/08/01 09:21:55 sthen Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.1.17
PKGNAME=	${DISTNAME}p0
@


1.55
log
@update silc-server to 1.1.17; fixes crashes, upgrading is strongly
recommended. ok Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/03/29 09:13:01 sthen Exp $
d6 1
@


1.54
log
@switch from /dev/urandom to /dev/arandom. ok jakemsr, Brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2009/03/17 15:35:37 sthen Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.1.16
PKGNAME=	${DISTNAME}p0
d43 1
@


1.54.2.1
log
@SECURITY FIX

Format string fix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/03/29 09:13:01 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.53
log
@Upgrade to 1.1.16, fixes several major causes of crashes.
"Upgrading is highly recommended."

From Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/01/23 11:01:06 sthen Exp $
d6 1
@


1.52
log
@patch from upstream git via Brad; increment stat.clients statistics
whenever adding new client. Otherwise it is possible to go under zero
when removing clients from the server.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2009/01/20 22:31:09 sthen Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.1.15
PKGNAME=	${DISTNAME}p2
@


1.52.2.1
log
@SECURITY FIX

Format string fix

ok Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/01/23 11:01:06 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
@


1.51
log
@do not create dynamic connections on non-dynamic server, from
upstream git via Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/01/12 00:31:45 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.50
log
@add patches from upstream git;
- Added debug logs for updating stat.clients value
- Take stream reference correctly in packet error callback

from Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2009/01/10 01:04:06 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.49
log
@bugfix update to 1.1.15; from Brad (maintainer), better than the one
I sent him.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/10/26 18:12:11 sthen Exp $
d6 1
@


1.48
log
@update to 1.1.14, ok brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/09/26 21:17:57 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.14
d47 1
a47 2
CONFIGURE_ARGS+= --enable-ipv6 \
		 --docdir=${PREFIX}/share/doc/silcd \
a51 1
		 --without-libtoolfix \
@


1.47
log
@Update to silc-server 1.1.13; bug fix update.

ok johan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2008/09/15 00:13:40 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.13
@


1.46
log
@Update to silc-server 1.1.12; bug fix update.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2008/08/27 00:35:24 martynas Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.12
d12 1
a12 1
# GPL
@


1.45
log
@workaround no more: can use 128-bit arithmetics now on amd64.
ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2008/06/22 18:27:05 sthen Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.1.11
PKGNAME=	${DISTNAME}p0
@


1.44
log
@Update to 1.1.11, fixes crashes.

- Make sure client entry is not expired more than once
- Fixed silc_parse_userfqdn argument check
- Remove client from expired client list before deleting it

"Commit that" brad@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2008/06/10 09:04:02 sthen Exp $
d6 1
@


1.43
log
@update to 1.1.9, fixes crashes and a nasty socket leak trying to
reconnect to a failed master server. from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2008/06/06 08:47:57 sthen Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.9
@


1.42
log
@Bugfix update, fixes occasional crashes at disconnection. From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2008/05/27 08:30:29 robert Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.8
@


1.41
log
@update to silc-server-1.1.7;

tested by sthen@@, brad@@, me; diff from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2008/04/22 20:24:10 sthen Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.7
@


1.40
log
@update to 1.1.6 from Brad, and remove some dead mirrors
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/04/22 00:34:30 sthen Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.6
@


1.39
log
@update to 1.1.5 + a crash fix from GIT. ok brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2008/04/17 10:26:15 sthen Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.5
a20 2
		http://www.planetmirror.com/pub/silcnet/server/sources/ \
		http://munitions.vipul.net/software/mirrors/silc/server/sources/ \
d22 1
a22 2
		http://the.wiretapped.net/security/network-security/silc/server/sources/ \
		ftp://ftp.wiretapped.net/pub/security/network-security/silc/server/sources/
@


1.38
log
@update to 1.1.4 from Brad - fixes portability bugs including a
remote user-triggerable DoS on strict alignment arch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2008/04/12 22:52:46 sthen Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.4
@


1.37
log
@bugfix update to 1.1.3, from Brad.  tested on several servers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2008/03/31 11:07:45 sthen Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.1.3
@


1.36
log
@add --enable-debug to permit debug logging with -d/-D/-x command
line options; bump package version. discussed with Brad (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2008/03/22 23:06:50 sthen Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.1.2
PKGNAME=	${DISTNAME}p0
d29 4
d47 3
d59 1
a59 1
.if ${MACHINE_ARCH} != "i386"
@


1.35
log
@SECURITY update: fixes possible buffer overflow in PKCS#1 message decoding.
Version update 1.0 -> 1.1 as tested by several people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/09/01 20:11:21 kili Exp $
d6 1
d50 2
a51 1
		 --without-libtoolfix
@


1.34
log
@
Change Brads email address for now, so people can reach him instead of
getting bounces or 550s. Bump pkgnames. While here, remove quotes from
comments.

prompted by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/06/04 11:40:56 martynas Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.0.4
PKGNAME=	${DISTNAME}p0
d17 1
a17 1
WANTLIB=		c 
d42 1
a42 1
AUTOCONF_VERSION= 2.59
d44 1
a44 2
		 --without-irssi \
		 --with-docdir=${PREFIX}/share/doc/silcd \
a46 1
		 --with-simdir=${PREFIX}/lib \
@


1.34.2.1
log
@update to 1.1.5;

- fixes portability bugs including a
  remote user-triggerable DoS on strict alignment arch.
- a crash fix from GIT

from William Yodlowsky
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2008/04/22 00:34:30 sthen Exp $
d5 2
a6 1
DISTNAME=	silc-server-1.1.5
d18 1
a18 1
WANTLIB=		c pthread
a29 4
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
BUILD_DEPENDS+=	:yasm-*:devel/yasm
.endif

d43 1
a43 4
AUTOCONF_VERSION= 2.61
.if ${MACHINE_ARCH} == "amd64" || ${MACHINE_ARCH} == "i386"
CONFIGURE_ENV+=	ac_cv_path_NASM=no YASM=${LOCALBASE}/bin/yasm
.endif
d45 2
a46 1
		 --docdir=${PREFIX}/share/doc/silcd \
d49 1
d52 1
a52 2
		 --without-libtoolfix \
		 --enable-debug
d54 1
a54 1
.if ${MACHINE_ARCH} != "amd64" && ${MACHINE_ARCH} != "i386"
@


1.33
log
@ftp.au.silcnet.org is gone; ok xsa@@, ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/05/24 08:27:34 steven Exp $
d3 1
a3 1
COMMENT=	"Secure Internet Live Conferencing (SILC) server"
d6 1
d11 1
a11 1
MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.32
log
@update to 1.0.4

from brad (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/04/01 20:43:59 steven Exp $
a21 1
		ftp://ftp.au.silcnet.org/pub/silcnet/server/sources/ \
@


1.31
log
@USE_LIBTOOL, disable-shared, regen patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/03/15 20:25:12 deanna Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.0.3
@


1.30
log
@Update to 1.0.3 - This version fixes a denial of service
vulnerability. Upgrading is very recommended.

Tested by Ben Lovett, from brad, ok ckuethe.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/12/14 21:35:23 brad Exp $
d40 2
d51 2
a52 1
		 --with-silcd-pid-file=/var/run/silcd.pid
@


1.29
log
@upgrade to silc-server 1.0.2; no functional change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2005/12/14 02:11:40 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.0.2
@


1.29.6.1
log
@MFC:
Update to 1.0.3 - This version fixes a denial of service
vulnerability. Upgrading is very recommended.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/12/14 21:35:23 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.0.3
@


1.29.2.1
log
@MFC:
Update to 1.0.3 - This version fixes a denial of service
vulnerability. Upgrading is very recommended.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/12/14 21:35:23 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.0.3
@


1.29.4.1
log
@MFC:
Update to 1.0.3 - This version fixes a denial of service
vulnerability. Upgrading is very recommended.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2005/12/14 21:35:23 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.0.3
@


1.28
log
@upgrade to silc-server 1.0.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2005/11/04 00:09:56 naddy Exp $
d5 1
a5 1
DISTNAME=	silc-server-1.0.1
@


1.27
log
@do not install files outside fake area
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2005/09/13 02:38:52 brad Exp $
d5 1
a5 2
DISTNAME=	silc-server-1.0
PKGNAME=	${DISTNAME}p6
@


1.26
log
@fix mkstemp() patch.

From: SILC CVS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2005/09/09 20:08:54 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
a56 1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/silcd
a60 2
	${INSTALL_DATA} ${WRKSRC}/doc/examples/cell_*.conf \
		${PREFIX}/share/examples/silcd
@


1.25
log
@sync operops patch and add amd64 workaround for silcmath from silc-toolkit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/09/09 17:03:34 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p4
@


1.24
log
@add two patches for crashing issues.

From: SILC CVS via zoran ivanic <zoc at 5mm dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/09/05 16:12:50 brad Exp $
d35 1
a35 1
PATCH_LIST+=	operops-* patch-*
@


1.23
log
@fix insecure temp file creation as noted on BugTraq.

From: SILC CVS via zoran ivanic <zoc at 5mm dot org>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/08/17 16:02:08 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p3
@


1.22
log
@use the libtool that comes with silc-server for now since
it has a little hack to make it build and link against a
static libsilc.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/08/11 16:25:13 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
@


1.22.2.1
log
@MFC:
fix insecure temp file creation as noted on BugTraq.

corrected version from SILC CVS

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/08/17 16:02:08 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p5
@


1.21
log
@fix build if silc-toolkit is already installed and add USE_LIBTOOL

problem noticed by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/07/24 00:28:33 brad Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
a40 1
USE_LIBTOOL=	Yes
a44 1
		 --without-libtoolfix \
@


1.20
log
@upgrade to silc-server 1.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/07/05 01:40:45 brad Exp $
d6 1
d41 1
d46 1
@


1.19
log
@add patches from mbalmer@@ to fix the config parser on powerpc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2005/04/07 00:49:18 brad Exp $
d5 1
a5 2
DISTNAME=	silc-server-0.9.19p1
PKGNAME=	silc-server-0.9.19.1p1
a41 1
MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC} ${WRKSRC}/lib/silcmath/mpi
a53 2

WRKDIST=	${WRKDIR}/${DISTNAME:S/p1//}
@


1.18
log
@upgrade to silc-server 0.9.19.1
@
text
@d1 1
a1 5
# $OpenBSD: Makefile,v 1.17 2004/12/16 00:31:25 alek Exp $

.if ${MACHINE_ARCH} == "powerpc"
BROKEN=		"config file parser bug on ${MACHINE_ARCH}"
.endif
d6 1
a6 1
PKGNAME=	silc-server-0.9.19.1
@


1.17
log
@Add WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/08/10 09:38:34 xsa Exp $
d9 2
a10 1
DISTNAME=	silc-server-0.9.18
d46 1
a46 1
AUTOCONF_VERSION= 2.58
d60 2
@


1.17.2.1
log
@MFC:
fix insecure temp file creation as noted on BugTraq.

corrected version from SILC CVS

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2004/12/16 00:31:25 alek Exp $
a9 1
PKGNAME=	${DISTNAME}p0
@


1.16
log
@
more new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/03/03 18:17:13 brad Exp $
d21 1
@


1.16.2.1
log
@MFC:
fix insecure temp file creation as noted on BugTraq.

corrected version from SILC CVS

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/08/10 09:38:34 xsa Exp $
a9 1
PKGNAME=	${DISTNAME}p0
@


1.15
log
@upgrade to silc-server 0.9.18

fixes some nasty server linking bugs
that would cause silcd to crash
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/02/29 07:12:41 brad Exp $
d31 1
a31 1
MODULES=	iconv
@


1.14
log
@upgrade to silc-server 0.9.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/02/12 06:34:22 brad Exp $
d9 1
a9 1
DISTNAME=	silc-server-0.9.17
@


1.13
log
@style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/01/07 04:53:12 brad Exp $
d9 1
a9 1
DISTNAME=	silc-server-0.9.16
d44 1
a44 1
AUTOCONF_VERSION= 2.57
@


1.12
log
@upgrade to silc-server 0.9.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2003/10/31 16:40:06 brad Exp $
d4 1
a4 1
BROKEN= "config file parser bug on ${MACHINE_ARCH}"
d11 1
@


1.11
log
@upgrade to silc-server 0.9.15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/10/29 04:12:47 brad Exp $
d9 1
a9 1
DISTNAME=	silc-server-0.9.15
d42 11
a52 12
CONFIGURE_STYLE=autoconf
AUTOCONF_VERSION=2.54
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC} ${WRKSRC}/lib/silcmath/mpi
CONFIGURE_ARGS=	\
	--enable-ipv6 \
	--without-irssi \
	--with-docdir=${PREFIX}/share/doc/silcd	\
	--with-etcdir=${CONFDIR} \
	--with-logsdir=/var/log/silcd \
	--with-simdir=${PREFIX}/lib \
	--with-silcd-config-file=${CONFDIR}/silcd.conf	\
	--with-silcd-pid-file=/var/run/silcd.pid
@


1.10
log
@upgrade to silc-server 0.9.14
- takeover as MAINTAINER
--
ok MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/09/24 05:50:39 jolan Exp $
d9 1
a9 1
DISTNAME=	silc-server-0.9.14
d39 3
d49 1
a49 1
	--with-etcdir=${SYSCONFDIR}/silcd \
d52 1
a52 1
	--with-silcd-config-file=${SYSCONFDIR}/silcd/silcd.conf	\
@


1.9
log
@simply patch logic, from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/08/19 03:52:27 jolan Exp $
d9 1
a9 2
DISTNAME=	silc-server-0.9.13.1
PKGNAME=	${DISTNAME}p0
d13 1
a13 1
MAINTAINER=	Jolan Luff <jolan@@openbsd.org>
a31 5
# XXX workaround gcc bugs on sparc64
.if ${MACHINE_ARCH} == "sparc64" 
PATCH_LIST+=	gcc-*
.endif

d36 1
a36 1
PATCH_LIST+=	operops-*
a38 2
PATCH_LIST+=	patch-*

d58 3
a60 1
	mv -f ${PREFIX}/share/doc/silcd/example_silcd.conf \
@


1.8
log
@incorporate patches from Dragos Ruiu as a FLAVOR which allow a SILC
operator to give themselves operator status on any channel.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/07/30 00:26:26 brad Exp $
d35 1
a35 1
PATCH_LIST=	gcc-* patch-*
d42 1
a42 5
.if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=	gcc-* operops-* patch-*
.else
PATCH_LIST=	operops-* patch-*
.endif
d44 2
@


1.7
log
@use autoconf 2.54
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/06/22 10:01:35 sturm Exp $
d34 1
a34 1
.if ${MACHINE_ARCH:Msparc64}
d38 14
a51 3
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.54
MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC} ${WRKSRC}/lib/silcmath/mpi
@


1.6
log
@new user/group schema

jolan@@ ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2003/05/12 08:23:47 jolan Exp $
d39 1
a39 1
AUTOCONF_VERSION= 2.52
@


1.5
log
@update e-mail address, ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2003/05/04 04:02:53 brad Exp $
d10 1
@


1.4
log
@upgrade to silc-server 0.9.13.1
--
From: MAINTAINER with some changes from me.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2003/01/26 19:11:17 brad Exp $
d13 1
a13 1
MAINTAINER=	Jolan Luff <jolan@@cryptonomicon.org>
@


1.3
log
@upgrade to silc-server 0.9.12
--
From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2003/01/22 03:34:59 brad Exp $
d3 5
a7 1
COMMENT=	"Secure Live Internet Conferencing (SILC) server"
d9 1
a9 1
DISTNAME=	silc-server-0.9.12
d37 2
a38 1
CONFIGURE_STYLE= gnu
d56 5
a60 1
	mv -f ${PREFIX}/share/doc/silcd/examples/* \
a61 1
	rm -rf ${PREFIX}/share/doc/silcd/examples
@


1.2
log
@upgrade to silc-server 0.9.11
--
From: MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/12/16 03:40:02 brad Exp $
d5 1
a5 1
DISTNAME=	silc-server-0.9.11
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME=	silc-server-0.9.10.1
@


1.1.1.1
log
@add silc-server port;
--
silc-server (silcd) is the server for the SILC protocol.

SILC (Secure Internet Live Conferencing) is a protocol which provides
secure conferencing services in the Internet over insecure channel.

From: Jolan Luff <jolan@@cryptonomicon.org>
@
text
@@
