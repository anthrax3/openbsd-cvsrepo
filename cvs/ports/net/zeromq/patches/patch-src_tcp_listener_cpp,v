head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.6
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.0.6
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2015.06.16.12.22.56;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	ePcjEsy3UzVg9p4o;

1.2
date	2014.09.23.12.08.03;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	MH6kTHoySf0HrcoB;

1.1
date	2013.03.08.10.33.28;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to zeromq-4.1.2.
@
text
@$OpenBSD: patch-src_tcp_listener_cpp,v 1.2 2014/09/23 12:08:03 ajacoutot Exp $

OpenBSD doesn't define EPROTO (yet), so pick the closest thing.

--- src/tcp_listener.cpp.orig	Tue Jun  2 22:41:22 2015
+++ src/tcp_listener.cpp	Tue Jun 16 14:16:47 2015
@@@@ -291,7 +291,7 @@@@ zmq::fd_t zmq::tcp_listener_t::accept ()
 #else
     if (sock == -1) {
         errno_assert (errno == EAGAIN || errno == EWOULDBLOCK ||
-            errno == EINTR || errno == ECONNABORTED || errno == EPROTO ||
+            errno == EINTR || errno == ECONNABORTED || errno == EOPNOTSUPP ||
             errno == ENOBUFS || errno == ENOMEM || errno == EMFILE ||
             errno == ENFILE);
         return retired_fd;
@


1.2
log
@Update to zeromq-4.0.4.

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-src_tcp_listener_cpp,v 1.1 2013/03/08 10:33:28 jasper Exp $
d5 3
a7 3
--- src/tcp_listener.cpp.orig	Wed Nov 13 18:57:50 2013
+++ src/tcp_listener.cpp	Mon Sep 22 14:06:18 2014
@@@@ -273,7 +273,7 @@@@ zmq::fd_t zmq::tcp_listener_t::accept ()
@


1.1
log
@- update to zeromq-3.2.2
@
text
@d1 1
a1 1
$OpenBSD$
d5 3
a7 3
--- src/tcp_listener.cpp.orig	Fri Mar  1 09:33:34 2013
+++ src/tcp_listener.cpp	Fri Mar  1 09:33:52 2013
@@@@ -262,7 +262,7 @@@@ zmq::fd_t zmq::tcp_listener_t::accept ()
@

