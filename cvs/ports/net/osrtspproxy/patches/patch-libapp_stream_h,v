head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.6
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.07.01.11.33.50;	author bluhm;	state Exp;
branches;
next	;
commitid	XcyPT79RUO972c7Q;


desc
@@


1.1
log
@Apply a bunch of patches to get osrtspproxy running.  Upstream is
dead, so keep patches locally.  On top of that, fix linker warnings
about unsave string operations.  Take maintainer.
OK ajacoutot@@
@
text
@$OpenBSD$
--- libapp/stream.h.orig	Tue Jan 30 22:24:19 2001
+++ libapp/stream.h	Tue Nov 11 19:12:07 2014
@@@@ -13,6 +13,7 @@@@
 #include "types.h"
 #include "str.h"
 #include "tlist.h"
+#include <list>
 
 #ifdef _UNIX
     // some custom bits (we rely on pollfd events being a 16-bit type)
@@@@ -53,6 +54,7 @@@@ class CStreamResponse (public)
     virtual void OnWriteReady ( void ) = 0;
     virtual void OnExceptReady( void ) = 0;
     virtual void OnClosed     ( void ) = 0;
+    virtual ~CStreamResponse ( void ) { };
 };
 
 class CStream
@@@@ -83,6 +85,6 @@@@ class CStream (protected)
 protected:
     CStreamResponse* m_pResponse;
 };
-typedef TDoubleList<CStream*> CStreamList;
+typedef std::list<CStream> CStreamList;
 
 #endif //ndef _STREAM_H
@
