head	1.20;
access;
symbols
	OPENBSD_5_6:1.19.0.8
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.19.0.6
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.19.0.4
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.19.0.2
	OPENBSD_5_3_BASE:1.19
	OPENBSD_5_2:1.18.0.2
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.16
	OPENBSD_5_1:1.16.0.2
	OPENBSD_5_0:1.15.0.2
	OPENBSD_5_0_BASE:1.15
	OPENBSD_4_9:1.14.0.2
	OPENBSD_4_9_BASE:1.14
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.11.0.2
	OPENBSD_4_7_BASE:1.11
	OPENBSD_4_6:1.10.0.8
	OPENBSD_4_6_BASE:1.10
	OPENBSD_4_5:1.10.0.6
	OPENBSD_4_5_BASE:1.10
	OPENBSD_4_4:1.10.0.4
	OPENBSD_4_4_BASE:1.10
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.7.0.2
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.5.0.2
	OPENBSD_4_0_BASE:1.5
	OPENBSD_3_9:1.3.0.2
	OPENBSD_3_9_BASE:1.3
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	OPENBSD_3_7:1.1.1.1.0.6
	OPENBSD_3_7_BASE:1.1.1.1
	OPENBSD_3_6:1.1.1.1.0.4
	OPENBSD_3_6_BASE:1.1.1.1
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	stable:1.1.1.1
	mldonkey:1.1.1;
locks; strict;
comment	@# @;


1.20
date	2014.10.31.08.19.39;	author dcoppa;	state dead;
branches;
next	1.19;
commitid	UvUOBExHGCD0k5ZR;

1.19
date	2012.08.18.23.47.27;	author avsm;	state Exp;
branches;
next	1.18;

1.18
date	2012.07.17.13.26.49;	author dcoppa;	state Exp;
branches;
next	1.17;

1.17
date	2012.05.08.08.24.40;	author dcoppa;	state Exp;
branches;
next	1.16;

1.16
date	2011.09.16.10.04.32;	author dcoppa;	state Exp;
branches;
next	1.15;

1.15
date	2011.04.01.08.38.37;	author dcoppa;	state Exp;
branches;
next	1.14;

1.14
date	2010.12.15.15.40.21;	author dcoppa;	state Exp;
branches;
next	1.13;

1.13
date	2010.10.11.06.45.10;	author dcoppa;	state Exp;
branches;
next	1.12;

1.12
date	2010.06.04.17.28.52;	author avsm;	state Exp;
branches;
next	1.11;

1.11
date	2009.10.29.08.28.10;	author giovanni;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.17.20.51.22;	author rui;	state Exp;
branches;
next	1.9;

1.9
date	2007.07.29.22.13.15;	author rui;	state Exp;
branches;
next	1.8;

1.8
date	2007.04.19.23.04.53;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2006.10.27.07.23.50;	author espie;	state Exp;
branches
	1.7.2.1;
next	1.6;

1.6
date	2006.09.17.21.46.01;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2006.06.07.07.50.47;	author espie;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2006.03.07.09.19.14;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.02.21.09.49.02;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.05.16.18.49.13;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2004.03.07.19.10.53;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.03.07.19.10.53;	author espie;	state Exp;
branches;
next	;

1.5.2.1
date	2007.08.01.06.12.53;	author ajacoutot;	state Exp;
branches;
next	;

1.7.2.1
date	2007.08.01.06.13.22;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.20
log
@
Move net/mldonkey/stable to net/mldonkey
@
text
@$OpenBSD: patch-config_Makefile_in,v 1.19 2012/08/18 23:47:27 avsm Exp $
--- config/Makefile.in.orig	Sun Jul  1 19:47:41 2012
+++ config/Makefile.in	Tue Aug  7 07:54:39 2012
@@@@ -633,6 +633,8 @@@@ uninstall::
 	rm -f $(BINDIR)/mlnet
 	rm -f $(BINDIR)/mlgui
 
+ifeq ("$(OCAML_NATIVE)", "yes")
+
 install:: opt 
 	mkdir -p $(DESTDIR)$(prefix)/bin
 	if test -f mlnet; then \
@@@@ -652,6 +654,21 @@@@ install:: opt 
              done; \
          fi
 
+else
+
+install::
+	cp -f mlnet.byte $(DESTDIR)$(prefix)/bin/mlnet
+	for link in mlslsk mldonkey mlgnut mldc mlbt; do \
+	  ln -s mlnet $(DESTDIR)$(prefix)/bin/$$link; \
+	done
+	cp -f mlgui.byte $(DESTDIR)$(prefix)/bin/mlgui
+	ln -s mlgui $(DESTDIR)$(prefix)/bin/mldonkey_gui
+	cp -f mlnet+gui.byte $(DESTDIR)$(prefix)/bin/mlnet+gui
+	for link in mlslsk+gui mldonkey+gui mlgnut+gui mldc+gui mlbt+gui; do \
+	  ln -s mlnet+gui $(DESTDIR)$(prefix)/bin/$$link; \
+	done
+
+endif
 
 ifneq ("$(GUI)" , "no")
   ifeq ("$(GUI)", "newgui2")
@


1.19
log
@update to mldonkey-3.1.3 for the stable port
* replace MODOCAML_NATIVE by ocaml_native PROPERTY
* remove patches included upstream
ok espie@@
From Christopher Zimmermann <madroach@@gmerlin.de>
@
text
@d1 1
a1 1
$OpenBSD$
@


1.18
log
@Update to mldonkey-3.1.2
While here, fix some errors wrt non-native ocaml architectures
@
text
@d1 3
a3 8
$OpenBSD: patch-config_Makefile_in,v 1.17 2012/05/08 08:24:40 dcoppa Exp $

Fix install on non-native architectures

Remove excessive optimization

--- config/Makefile.in.orig	Wed Apr  4 22:22:49 2012
+++ config/Makefile.in	Tue May  8 09:22:18 2012
d8 1
a8 1
+ifeq ("$(MODOCAML_NATIVE)", "Yes")
d13 1
a13 1
@@@@ -652,7 +654,22 @@@@ install:: opt 
d18 1
a18 1
 
d32 1
a32 1
+
a34 10
     SUBDIRS += $(SRC_GUI) $(SRC_GUI)/x11 $(SRC_GUI)/win32 $(ICONS_CHOICE) +lablgtk2
@@@@ -1434,7 +1451,7 @@@@ ocamldoc_html: $(CORE_DOC) $(libclient_DOC)
 	$(OCAMLDOC) -sort -dump ocamldoc/ocamldocdump -html -d ocamldoc $(INCLUDES) $(libclient_DOC) $(CORE_DOC)
 
 $(LIB)/md4_cc.o: $(LIB)/md4.c
-	$(OCAMLC) -ccopt "$(CFLAGS) -O3 -o $(LIB)/md4_cc.o" -ccopt "" -c $(LIB)/md4.c
+	$(OCAMLC) -ccopt "$(CFLAGS) -o $(LIB)/md4_cc.o" -ccopt "" -c $(LIB)/md4.c
 
 $(CDK)/heap_c.o: $(CDK)/heap_c.c
 	$(OCAMLC) -ccopt "$(CFLAGS) $(MORECFLAGS) -o $(CDK)/heap_c.o" -ccopt "" -c $(CDK)/heap_c.c
@


1.17
log
@
Remove excessive optimization

Fix install on non-native architectures

Proper fix for a thread related problem

Add comments to patches
@
text
@d1 1
a1 1
$OpenBSD: patch-config_Makefile_in,v 1.16 2011/09/16 10:04:32 dcoppa Exp $
d31 1
a31 1
+	cp -f mlnet.byte $(DESTDIR)$(prefix)/bin/mlnet+gui
@


1.16
log
@update to mldonkey-3.1.0
@
text
@d1 8
a8 3
$OpenBSD: patch-config_Makefile_in,v 1.15 2011/04/01 08:38:37 dcoppa Exp $
--- config/Makefile.in.orig	Sun Jan 23 16:20:25 2011
+++ config/Makefile.in	Fri Sep 16 11:46:16 2011
d18 1
a18 1
@@@@ -652,6 +654,21 @@@@ install:: opt 
d23 1
a23 1
+
d30 1
a30 1
+	ln -s $(DESTDIR)$(prefix)/bin/mlgui $(DESTDIR)$(prefix)/bin/mldonkey_gui
d37 1
a37 1
 
d40 10
@


1.15
log
@Bug-fix update to mldonkey-3.0.7
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.14 2010/12/15 15:40:21 dcoppa Exp $
--- config/Makefile.in.orig	Sun Dec 19 11:31:21 2010
+++ config/Makefile.in	Fri Apr  1 10:13:28 2011
@@@@ -626,6 +626,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -645,6 +647,21 @@@@ install:: opt 
@


1.14
log
@Bugfix update to mldonkey-3.0.6
Fix WANTLIB while here.
@
text
@d1 3
a3 3
$OpenBSD: patch-config_Makefile_in,v 1.13 2010/10/11 06:45:10 dcoppa Exp $
--- config/Makefile.in.orig	Sat Nov 13 18:31:02 2010
+++ config/Makefile.in	Wed Dec 15 15:00:19 2010
d25 1
a25 1
+	cp -f mlgui.byte $(DESTDIR)$(prefix)/bin/mldonkey_gui
@


1.13
log
@Bugfix update to mldonkey-3.0.5.
Switch to new-style LIB_DEPENDS/WANTLIB.
Minor style cleanups.
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.12 2010/06/04 17:28:52 avsm Exp $
--- config/Makefile.in.orig	Thu Sep 16 21:17:04 2010
+++ config/Makefile.in	Sun Oct 10 22:36:43 2010
@@@@ -609,6 +609,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -628,6 +630,21 @@@@ install:: opt 
@


1.12
log
@update to mldonkey-3.0.2; from dcoppa@@
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.11 2009/10/29 08:28:10 giovanni Exp $
--- config/Makefile.in.orig	Sat Mar 27 17:18:17 2010
+++ config/Makefile.in	Thu Jun  3 08:28:50 2010
@@@@ -590,6 +590,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -609,6 +611,21 @@@@ install:: opt 
@


1.11
log
@
Update to 3.0.1 from new maintainer David Coppa
Switch to new gtk+2 gui
@
text
@d1 4
a4 4
$OpenBSD$
--- config/Makefile.in.orig	Tue Oct 27 05:34:03 2009
+++ config/Makefile.in	Tue Oct 27 05:39:03 2009
@@@@ -586,6 +586,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -605,6 +607,21 @@@@ install:: opt 
@


1.10
log
@update mldonkey to 2.9.1.
changelog available here:
http://cvs.savannah.gnu.org/viewvc/mldonkey/mldonkey/distrib/ChangeLog?revision=1.1320

ok sthen@@
@
text
@d2 3
a4 3
--- config/Makefile.in.orig	Fri Jun  1 20:31:08 2007
+++ config/Makefile.in	Fri Sep 14 17:47:31 2007
@@@@ -749,6 +749,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -768,6 +770,21 @@@@ install:: opt 
@


1.9
log
@update mldonkey to 2.9.0.diff and fix MLDonkey Network Modules IP Blocking Weakness
Reference: http://secunia.com/advisories/26230/

ok kili@@
@
text
@d3 1
a3 1
+++ config/Makefile.in	Sat Jul 28 23:25:00 2007
@


1.8
log
@update to newer version, after checking it works fine.
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.7 2006/10/27 07:23:50 espie Exp $
--- config/Makefile.in.orig	Sun Mar 25 14:37:09 2007
+++ config/Makefile.in	Mon Apr 16 20:11:46 2007
@@@@ -748,6 +748,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -767,6 +769,21 @@@@ install:: opt 
@


1.7
log
@Update to 2.8.1
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.6 2006/09/17 21:46:01 espie Exp $
--- config/Makefile.in.orig	Wed Aug 16 21:08:21 2006
+++ config/Makefile.in	Thu Oct 26 20:29:09 2006
@@@@ -754,6 +754,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -773,6 +775,21 @@@@ install:: opt 
@


1.7.2.1
log
@MFC (origal commit rui@@):
- update mldonkey to 2.9.0 (fix MLDonkey Network Modules IP Blocking Weakness)
Reference: http://secunia.com/advisories/26230/

ok sturm@@
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.7 2006/10/27 07:23:50 espie Exp $
--- config/Makefile.in.orig	Fri Jun  1 21:31:08 2007
+++ config/Makefile.in	Tue Jul 31 11:09:57 2007
@@@@ -749,6 +749,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -768,6 +770,21 @@@@ install:: opt 
@


1.6
log
@new version
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.5 2006/06/07 07:50:47 espie Exp $
--- config/Makefile.in.orig	Sun Jun 11 19:37:38 2006
+++ config/Makefile.in	Tue Aug 22 10:39:01 2006
@@@@ -787,6 +787,8 @@@@ uninstall::
d13 2
a14 2
@@@@ -809,6 +811,22 @@@@ install:: opt 
              rm -f $(DESTDIR)$(prefix)/bin/mlim; cp -f mlim $(DESTDIR)$(prefix)/bin/mlim; \
a29 1
+	cp -f mlim.byte $(DESTDIR)$(prefix)/bin/mlim;
@


1.5
log
@update to newer version so that it compiles with newer ocaml.

(Hi Anil)
(Hi Nikolay)
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.4 2006/03/07 09:19:14 espie Exp $
--- config/Makefile.in.orig	Mon May 15 19:43:09 2006
+++ config/Makefile.in	Wed Jun  7 09:36:56 2006
@@@@ -786,6 +786,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -808,6 +810,22 @@@@ install:: opt 
@


1.5.2.1
log
@MFC (origal commit rui@@):
- update mldonkey to 2.9.0 (fix MLDonkey Network Modules IP Blocking Weakness)
Reference: http://secunia.com/advisories/26230/

ok sturm@@
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.5 2006/06/07 07:50:47 espie Exp $
--- config/Makefile.in.orig	Fri Jun  1 21:31:08 2007
+++ config/Makefile.in	Tue Jul 31 10:59:36 2007
@@@@ -749,6 +749,8 @@@@ uninstall::
d13 2
a14 2
@@@@ -768,6 +770,22 @@@@ install:: opt 
              done; \
@


1.4
log
@update to 2.7.4
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.3 2006/02/21 09:49:02 espie Exp $
--- config/Makefile.in.orig	Sat Feb 11 20:52:57 2006
+++ config/Makefile.in	Tue Mar  7 10:04:44 2006
@@@@ -775,6 +775,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -797,6 +799,22 @@@@ install:: opt 
@


1.3
log
@correctly detect gd.
This fixes mldonkey on !binary arches, as the autoconfiguration code
seems to be buggy for those cases with newer ocaml.
e.g., mldonkey builds on sparc64 again.

okay pvalchev@@
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.2 2005/05/16 18:49:13 espie Exp $
--- config/Makefile.in.orig	Sun Aug 21 15:17:44 2005
+++ config/Makefile.in	Tue Feb 21 01:06:16 2006
@@@@ -792,6 +792,8 @@@@ uninstall::
d11 1
a11 1
 	mkdir -p $(prefix)/bin
d13 2
a14 2
@@@@ -814,6 +816,22 @@@@ install:: opt 
              rm -f $(prefix)/bin/mlim; cp -f mlim $(prefix)/bin/mlim; \
d20 1
a20 1
+	cp -f mlnet.byte $(prefix)/bin/mlnet
d22 1
a22 1
+	  ln -s mlnet $(prefix)/bin/$$link; \
d24 3
a26 3
+	cp -f mlgui.byte $(prefix)/bin/mlgui
+	cp -f mlgui.byte $(prefix)/bin/mldonkey_gui
+	cp -f mlnet.byte $(prefix)/bin/mlnet+gui
d28 1
a28 1
+	  ln -s mlnet+gui $(prefix)/bin/$$link; \
d30 1
a30 1
+	cp -f mlim.byte $(prefix)/bin/mlim;
@


1.2
log
@much newer stable version that should compile with newest ocaml
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.3 2004/09/26 09:41:15 espie Exp $
--- config/Makefile.in.orig	Sun Feb 20 03:31:43 2005
+++ config/Makefile.in	Mon May 16 20:30:53 2005
@@@@ -725,6 +725,8 @@@@ uninstall::
d13 1
a13 1
@@@@ -747,6 +749,22 @@@@ install:: opt 
d34 2
a35 2
 ifeq ("$(COMPILE_GUI)" , "yes")
 
@


1.1
log
@Initial revision
@
text
@d1 4
a4 4
$OpenBSD: patch-config_Makefile_in,v 1.2 2003/12/31 17:06:42 sturm Exp $
--- config/Makefile.in.orig	2003-10-12 20:41:28.000000000 +0200
+++ config/Makefile.in	2003-12-31 16:48:40.000000000 +0100
@@@@ -451,6 +451,8 @@@@ uninstall::
d12 3
a14 16
 	if test -e mlnet; then \
@@@@ -460,7 +462,7 @@@@ install:: opt 
              done; \
          fi
 	if test -e mlgui; then \
-             rm -f $(prefix)/bin/mlgui; cp -f mlnet $(prefix)/bin/mlgui; \
+             rm -f $(prefix)/bin/mlgui; cp -f mlgui $(prefix)/bin/mlgui; \
              rm -f $(prefix)/bin/mldonkey_gui; cp -f mlgui $(prefix)/bin/mldonkey_gui; \
          fi
 	if test -e mlnet+gui; then \
@@@@ -470,9 +472,25 @@@@ install:: opt 
              done; \
          fi
 	if test -e mlim; then \
-             rm -f $(prefix)/bin/mlim; cp -f mlnet $(prefix)/bin/mlim; \
+             rm -f $(prefix)/bin/mlim; cp -f mlim $(prefix)/bin/mlim; \
@


1.1.1.1
log
@resurrect mldonkey 2.5.4, okay pval.
@
text
@@
