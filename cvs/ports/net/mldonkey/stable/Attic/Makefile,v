head	1.61;
access;
symbols
	OPENBSD_5_6:1.57.0.2
	OPENBSD_5_6_BASE:1.57
	OPENBSD_5_5:1.55.0.2
	OPENBSD_5_5_BASE:1.55
	OPENBSD_5_4:1.54.0.2
	OPENBSD_5_4_BASE:1.54
	OPENBSD_5_3:1.51.0.2
	OPENBSD_5_3_BASE:1.51
	OPENBSD_5_2:1.49.0.2
	OPENBSD_5_2_BASE:1.49
	OPENBSD_5_1_BASE:1.45
	OPENBSD_5_1:1.45.0.2
	OPENBSD_5_0:1.42.0.2
	OPENBSD_5_0_BASE:1.42
	OPENBSD_4_9:1.38.0.2
	OPENBSD_4_9_BASE:1.38
	OPENBSD_4_8:1.32.0.2
	OPENBSD_4_8_BASE:1.32
	OPENBSD_4_7:1.28.0.2
	OPENBSD_4_7_BASE:1.28
	OPENBSD_4_6:1.25.0.2
	OPENBSD_4_6_BASE:1.25
	OPENBSD_4_5:1.22.0.6
	OPENBSD_4_5_BASE:1.22
	OPENBSD_4_4:1.22.0.4
	OPENBSD_4_4_BASE:1.22
	OPENBSD_4_3:1.22.0.2
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.21.0.2
	OPENBSD_4_2_BASE:1.21
	OPENBSD_4_1:1.18.0.2
	OPENBSD_4_1_BASE:1.18
	OPENBSD_4_0:1.12.0.2
	OPENBSD_4_0_BASE:1.12
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.6.0.2
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.3.0.2
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.1.1.1.0.2
	OPENBSD_3_5_BASE:1.1.1.1
	stable:1.1.1.1
	mldonkey:1.1.1;
locks; strict;
comment	@# @;


1.61
date	2014.10.31.08.19.39;	author dcoppa;	state dead;
branches;
next	1.60;
commitid	UvUOBExHGCD0k5ZR;

1.60
date	2014.09.02.09.24.44;	author chrisz;	state Exp;
branches;
next	1.59;
commitid	KxJKmDEHHsyD4e4B;

1.59
date	2014.08.27.09.45.39;	author chrisz;	state Exp;
branches;
next	1.58;
commitid	MyUcVaE5cMPYSknJ;

1.58
date	2014.08.22.22.49.07;	author kili;	state Exp;
branches;
next	1.57;
commitid	EuOaFLY1ck9pjbE0;

1.57
date	2014.03.17.23.22.02;	author sthen;	state Exp;
branches;
next	1.56;

1.56
date	2014.03.13.21.21.48;	author dcoppa;	state Exp;
branches;
next	1.55;

1.55
date	2014.02.03.13.30.52;	author dcoppa;	state Exp;
branches;
next	1.54;

1.54
date	2013.06.18.09.35.13;	author dcoppa;	state Exp;
branches;
next	1.53;

1.53
date	2013.06.04.18.41.54;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2013.03.11.11.35.49;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2012.11.30.19.38.09;	author chrisz;	state Exp;
branches;
next	1.50;

1.50
date	2012.08.18.23.47.27;	author avsm;	state Exp;
branches;
next	1.49;

1.49
date	2012.07.17.13.26.49;	author dcoppa;	state Exp;
branches;
next	1.48;

1.48
date	2012.05.08.08.24.40;	author dcoppa;	state Exp;
branches;
next	1.47;

1.47
date	2012.04.24.12.55.12;	author dcoppa;	state Exp;
branches;
next	1.46;

1.46
date	2012.02.28.15.38.55;	author dcoppa;	state Exp;
branches;
next	1.45;

1.45
date	2011.12.12.14.57.23;	author dcoppa;	state Exp;
branches;
next	1.44;

1.44
date	2011.09.16.11.13.38;	author espie;	state Exp;
branches;
next	1.43;

1.43
date	2011.09.16.10.04.32;	author dcoppa;	state Exp;
branches;
next	1.42;

1.42
date	2011.07.06.18.57.09;	author ajacoutot;	state Exp;
branches;
next	1.41;

1.41
date	2011.04.16.12.10.07;	author sthen;	state Exp;
branches;
next	1.40;

1.40
date	2011.04.05.14.42.39;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2011.04.01.08.38.37;	author dcoppa;	state Exp;
branches;
next	1.38;

1.38
date	2010.12.15.15.40.21;	author dcoppa;	state Exp;
branches;
next	1.37;

1.37
date	2010.11.19.22.31.34;	author espie;	state Exp;
branches;
next	1.36;

1.36
date	2010.10.24.21.30.01;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2010.10.11.08.16.51;	author jasper;	state Exp;
branches;
next	1.34;

1.34
date	2010.10.11.06.45.10;	author dcoppa;	state Exp;
branches;
next	1.33;

1.33
date	2010.09.17.15.58.30;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2010.07.13.21.08.00;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2010.06.06.13.57.20;	author kili;	state Exp;
branches;
next	1.30;

1.30
date	2010.06.04.17.28.51;	author avsm;	state Exp;
branches;
next	1.29;

1.29
date	2010.03.30.08.03.31;	author dcoppa;	state Exp;
branches;
next	1.28;

1.28
date	2009.11.09.16.21.55;	author giovanni;	state Exp;
branches;
next	1.27;

1.27
date	2009.10.29.08.28.09;	author giovanni;	state Exp;
branches;
next	1.26;

1.26
date	2009.08.10.06.33.43;	author kili;	state Exp;
branches;
next	1.25;

1.25
date	2009.06.20.22.05.11;	author avsm;	state Exp;
branches;
next	1.24;

1.24
date	2009.04.03.21.30.50;	author sturm;	state Exp;
branches;
next	1.23;

1.23
date	2009.03.11.21.30.31;	author avsm;	state Exp;
branches;
next	1.22;

1.22
date	2007.09.17.20.51.22;	author rui;	state Exp;
branches;
next	1.21;

1.21
date	2007.07.29.22.13.15;	author rui;	state Exp;
branches;
next	1.20;

1.20
date	2007.06.29.19.17.08;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2007.04.19.23.04.53;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2007.02.02.19.28.52;	author espie;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2007.01.24.01.32.51;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2006.12.26.22.39.31;	author avsm;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.13.12.51.14;	author steven;	state Exp;
branches;
next	1.14;

1.14
date	2006.10.27.07.23.50;	author espie;	state Exp;
branches;
next	1.13;

1.13
date	2006.09.17.21.46.01;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2006.08.03.23.15.58;	author espie;	state Exp;
branches
	1.12.2.1;
next	1.11;

1.11
date	2006.06.07.07.50.47;	author espie;	state Exp;
branches;
next	1.10;

1.10
date	2006.03.07.09.19.14;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2006.02.21.09.49.02;	author espie;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2005.09.10.17.29.58;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2005.09.04.23.47.36;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2005.05.16.18.49.13;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2005.05.11.17.22.39;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2004.12.16.00.31.23;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2004.08.10.20.41.47;	author xsa;	state Exp;
branches;
next	1.2;

1.2
date	2004.08.03.18.24.40;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2004.03.07.19.10.53;	author espie;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.03.07.19.10.53;	author espie;	state Exp;
branches;
next	;

1.9.2.1
date	2007.01.31.14.27.28;	author sturm;	state Exp;
branches;
next	;

1.12.2.1
date	2007.02.03.16.25.14;	author sturm;	state Exp;
branches;
next	1.12.2.2;

1.12.2.2
date	2007.08.01.06.12.52;	author ajacoutot;	state Exp;
branches;
next	;

1.18.2.1
date	2007.08.01.06.13.22;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.61
log
@
Move net/mldonkey/stable to net/mldonkey
@
text
@# $OpenBSD: Makefile,v 1.60 2014/09/02 09:24:44 chrisz Exp $

COMMENT =	e-donkey client
DISTNAME =	mldonkey-3.1.5
CATEGORIES =	net

HOMEPAGE =	http://mldonkey.sourceforge.net/Main_Page
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=mldonkey/}

MAINTAINER =	David Coppa <dcoppa@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB += X11 Xcomposite Xcursor Xdamage Xext Xfixes Xi Xinerama
WANTLIB += Xrandr Xrender atk-1.0 bz2 c cairo charset fontconfig
WANTLIB += freetype gd gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB += gobject-2.0 gtk-x11-2.0 jpeg m magic miniupnpc natpmp
WANTLIB += pango-1.0 pangocairo-1.0 pangoft2-1.0 png pthread rsvg-2
WANTLIB += stdc++ tiff vpx z

EXTRACT_SUFX =		.tar.bz2

CONFIGURE_STYLE =	autoconf no-autoheader
AUTOCONF_DIR =		${WRKSRC}/config
AUTOCONF_VERSION =	2.69
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/config

CONFIGURE_ARGS +=	--enable-gui=newgui2 \
			--enable-upnp-natpmp
CONFIGURE_ENV +=	CPPFLAGS='-I${LOCALBASE}/include -I${X11BASE}/include' \
			LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib' \
			ac_cv_prog_RPMBUILD="" \
			ac_cv_prog_WGET=""

USE_GMAKE =	Yes
MODULES =	lang/ocaml devel/gettext
BUILD_DEPENDS =	lang/ocaml-camlp4 x11/lablgtk2
LIB_DEPENDS =	archivers/bzip2 \
		devel/libmagic \
		graphics/gd \
		net/miniupnp/libnatpmp \
		net/miniupnp/miniupnpc>=1.9 \
		x11/gnome/librsvg \
		x11/gtk+2

.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mocaml_native}
FAKE_FLAGS =	OCAML_NATIVE=yes
.else
FAKE_FLAGS =	OCAML_NATIVE=no
.endif

NO_TEST =	Yes

.include <bsd.port.arch.mk>
post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/mldonkey
	cp -R ${WRKDIST}/distrib ${PREFIX}/share/mldonkey/
.if ${PROPERTIES:Mocaml_native}
	@@cd ${PREFIX}/bin && strip mlnet mlgui mlnet+gui
.endif

.include <bsd.port.mk>
@


1.60
log
@Upgrade OCaml to 4.02. Since camlp4 is now a seperate port,
add / change BUILD_DEPENDS for all ports using camlp4.
Findlib is changed because it won't use camlp4 and doesn't install
the Bytes module anymore, which is now included in OCaml 4.02.

ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2014/08/27 09:45:39 chrisz Exp $
@


1.59
log
@Update to 3.1.5.
Fix one "string literal in comment" for upcoming OCaml 4.02

OK dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2014/08/22 22:49:07 kili Exp $
d38 1
a38 1
BUILD_DEPENDS =	lang/ocaml,-camlp4 x11/lablgtk2
@


1.58
log
@More bumps due to lang/ocaml pkgname change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2014/03/17 23:22:02 sthen Exp $
d4 1
a4 2
DISTNAME =	mldonkey-3.1.4
REVISION=	1
d38 1
a38 1
BUILD_DEPENDS =	x11/lablgtk2
@


1.57
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2014/03/13 21:21:48 dcoppa Exp $
d5 1
a5 1
REVISION=	0
@


1.56
log
@
Update to mldonkey-3.1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2014/02/03 13:30:52 dcoppa Exp $
d5 1
d16 7
a23 9

WANTLIB =		X11 Xcomposite Xcursor Xdamage Xext \
			Xfixes Xi Xinerama Xrandr Xrender \
			atk-1.0 bz2 c cairo charset fontconfig \
			freetype gd gdk-x11-2.0 gdk_pixbuf-2.0 \
			gio-2.0 glib-2.0 gobject-2.0 gtk-x11-2.0 \
			jpeg m magic miniupnpc>=2.0 natpmp pango-1.0 \
			pangocairo-1.0 pangoft2-1.0 png pthread \
			rsvg-2 stdc++ z
@


1.55
log
@
Update to miniupnpc-1.9 and fix dependant ports (games/megaglest
not affected)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2013/06/18 09:35:13 dcoppa Exp $
d4 1
a4 2
DISTNAME =	mldonkey-3.1.3
REVISION=	2
@


1.54
log
@sync a patch with upstream git; regen WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2013/06/04 18:41:54 naddy Exp $
d5 1
a5 1
REVISION=	1
d23 1
a23 1
			jpeg m magic miniupnpc natpmp pango-1.0 \
d46 1
a46 1
		net/miniupnp/miniupnpc \
@


1.53
log
@the png headers are now directly under include/
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2013/03/11 11:35:49 espie Exp $
d5 1
a5 1
REVISION=	0
d18 1
a18 1
WANTLIB =		GL X11 Xcomposite Xcursor Xdamage Xext \
d20 6
a25 8
			atk-1.0 bz2 c cairo charset curses \
			expat fontconfig freetype gd \
			gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 \
			glib-2.0 gobject-2.0 gtk-x11-2.0 jpeg \
			m magic miniupnpc natpmp pango-1.0 \
			pangocairo-1.0 pangoft2-1.0 pixman-1 \
			png pthread pthread-stubs rsvg-2 \
			stdc++ xcb xcb-render xcb-shm z
@


1.52
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2012/11/30 19:38:09 chrisz Exp $
d36 1
a36 2
CONFIGURE_ENV +=	CPPFLAGS='-I${LOCALBASE}/include/libpng \
			-I${LOCALBASE}/include -I${X11BASE}/include' \
@


1.51
log
@update lang/ocaml to 4.00.1.
Let all ocaml ports RUN_DEPEND on the version of ocaml they were built with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2012/08/18 23:47:27 avsm Exp $
a13 1
PERMIT_PACKAGE_FTP =	Yes
a14 2
PERMIT_DISTFILES_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
d60 1
a60 1
NO_REGRESS =	Yes
@


1.50
log
@update to mldonkey-3.1.3 for the stable port
* replace MODOCAML_NATIVE by ocaml_native PROPERTY
* remove patches included upstream
ok espie@@
From Christopher Zimmermann <madroach@@gmerlin.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2012/07/17 13:26:49 dcoppa Exp $
d5 1
@


1.49
log
@Update to mldonkey-3.1.2
While here, fix some errors wrt non-native ocaml architectures
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2012/05/08 08:24:40 dcoppa Exp $
d4 1
a4 1
DISTNAME =	mldonkey-3.1.2
d55 7
a61 1
FAKE_FLAGS =	MODOCAML_NATIVE=${MODOCAML_NATIVE}
d64 1
d68 3
a70 1
	@@${strip_binaries}
a72 6

.if ${MODOCAML_NATIVE:L} == "yes"
strip_binaries=cd ${PREFIX}/bin && strip mlnet mlgui mlnet+gui
.else
strip_binaries=:
.endif
@


1.48
log
@
Remove excessive optimization

Fix install on non-native architectures

Proper fix for a thread related problem

Add comments to patches
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2012/04/24 12:55:12 dcoppa Exp $
d4 1
a4 2
DISTNAME =	mldonkey-3.1.1
REVISION =	0
d20 10
a29 10
WANTLIB +=		GL X11 Xcomposite Xcursor Xdamage Xext
WANTLIB +=		Xfixes Xi Xinerama Xrandr Xrender atk-1.0
WANTLIB +=		bz2 c cairo charset expat fontconfig
WANTLIB +=		freetype gd gdk-x11-2.0 gdk_pixbuf-2.0
WANTLIB +=		gio-2.0 glib-2.0 gmodule-2.0 gobject-2.0
WANTLIB +=		gthread-2.0 gtk-x11-2.0 jpeg m magic
WANTLIB +=		miniupnpc natpmp pixman-1 pango-1.0
WANTLIB +=		pangocairo-1.0 pangoft2-1.0 png pthread
WANTLIB +=		pthread-stubs rsvg-2 stdc++ xcb
WANTLIB +=		xcb-render xcb-shm z
d33 1
a33 1
AUTOCONF_VERSION =	2.68
@


1.47
log
@Bugfixing update to mldonkey-3.1.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2012/02/28 15:38:55 dcoppa Exp $
d5 1
@


1.46
log
@Enable support for NAT-PMP and UPnP through libnatpmp/miniupnpc.

Disabled by default: set "upnp_port_forwarding = true" into
~/.mldonkey/downloads.ini to enable it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2011/12/12 14:57:23 dcoppa Exp $
d4 1
a4 1
DISTNAME =	mldonkey-3.1.0
a5 2

REVISION =	5
@


1.45
log
@Cleanup configure "echo -e" madness.
Do not pick rpm and wget up, if they're installed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2011/09/16 11:13:38 espie Exp $
d7 1
a7 1
REVISION =	4
d28 4
a31 3
WANTLIB +=		pixman-1 pango-1.0 pangocairo-1.0
WANTLIB +=		pangoft2-1.0 png pthread pthread-stubs
WANTLIB +=		rsvg-2 stdc++ xcb xcb-render xcb-shm z
d38 2
a39 1
CONFIGURE_ARGS +=	--enable-gui=newgui2
d52 2
@


1.44
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2011/09/16 10:04:32 dcoppa Exp $
d7 1
a7 1
REVISION =	3
d38 5
a42 3
CONFIGURE_ENV +=	CPPFLAGS='-I${LOCALBASE}/include/libpng\
			-I${LOCALBASE}/include -I${X11BASE}/include'
CONFIGURE_ENV +=	LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib'
d47 2
a48 2
LIB_DEPENDS =	x11/gnome/librsvg \
		archivers/bzip2 \
d50 1
a50 1
		devel/libmagic \
@


1.43
log
@update to mldonkey-3.1.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2011/07/06 18:57:09 ajacoutot Exp $
d6 2
@


1.42
log
@Use the gettext MODULE.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2011/04/16 12:10:07 sthen Exp $
d4 1
a4 1
DISTNAME =	mldonkey-3.0.7
a6 2
REVISION =	1

d20 9
a28 9
WANTLIB +=		GL X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB +=		Xfixes Xi Xinerama Xrandr Xrender Xxf86vm
WANTLIB +=		atk-1.0 bz2 c cairo charset curses drm expat
WANTLIB +=		fontconfig freetype gd gdk-x11-2.0
WANTLIB +=		gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0
WANTLIB +=		gobject-2.0 gthread-2.0 gtk-x11-2.0
WANTLIB +=		jpeg m magic pixman-1 pango-1.0 pangocairo-1.0
WANTLIB +=		pangoft2-1.0 png pthread pthread-stubs rsvg-2
WANTLIB +=		stdc++ xcb xcb-render xcb-shm z
d32 1
a32 1
AUTOCONF_VERSION =	2.67
@


1.41
log
@use autoconf-2.67; config.h checked, from Brad. commitski! jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2011/04/05 14:42:39 ajacoutot Exp $
d7 1
a7 1
REVISION =	0
d27 1
a27 1
WANTLIB +=		gobject-2.0 gthread-2.0 gtk-x11-2.0 iconv intl
d43 1
a43 1
MODULES =	lang/ocaml
@


1.40
log
@Tweaks depends after recent librsvg commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2011/04/01 08:38:37 dcoppa Exp $
d34 1
a34 2
# Should be 2.67
AUTOCONF_VERSION =	2.65
@


1.39
log
@Bug-fix update to mldonkey-3.0.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/12/15 15:40:21 dcoppa Exp $
d7 2
d49 2
a50 1
		devel/libmagic
@


1.38
log
@Bugfix update to mldonkey-3.0.6
Fix WANTLIB while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2010/11/19 22:31:34 espie Exp $
d4 1
a4 1
DISTNAME =	mldonkey-3.0.6
d32 2
a33 1
AUTOCONF_VERSION =	2.61
@


1.37
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2010/10/24 21:30:01 ajacoutot Exp $
d4 1
a4 2
DISTNAME =	mldonkey-3.0.5
REVISION =	0
d20 9
a28 9
WANTLIB +=		X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext
WANTLIB +=		Xfixes Xi Xinerama Xrandr Xrender atk-1.0 bz2
WANTLIB +=		c cairo charset expat fontconfig freetype gd
WANTLIB +=		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0
WANTLIB +=		gmodule-2.0 gobject-2.0 gthread-2.0
WANTLIB +=		gtk-x11-2.0 iconv intl jpeg m magic pango-1.0
WANTLIB +=		pangocairo-1.0 pangoft2-1.0 pixman-1 png
WANTLIB +=		pthread pthread-stubs rsvg-2 stdc++ xcb
WANTLIB +=		xcb-render xcb-render-util z
@


1.36
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2010/10/11 08:16:51 jasper Exp $
d43 5
a47 5
BUILD_DEPENDS =	::x11/lablgtk2
LIB_DEPENDS =	::x11/gnome/librsvg \
		::archivers/bzip2 \
		::graphics/gd \
		::devel/libmagic
@


1.35
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2010/10/11 06:45:10 dcoppa Exp $
a40 1
USE_X11 =	Yes
@


1.34
log
@Bugfix update to mldonkey-3.0.5.
Switch to new-style LIB_DEPENDS/WANTLIB.
Minor style cleanups.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2010/09/17 15:58:30 dcoppa Exp $
d5 1
d25 1
a25 1
WANTLIB +=		glitz gmodule-2.0 gobject-2.0 gthread-2.0
@


1.33
log
@Update to mldonkey-3.0.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2010/07/13 21:08:00 sthen Exp $
d4 1
a4 1
DISTNAME =	mldonkey-3.0.4
d19 11
a29 8
WANTLIB += 		X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
			Xfixes Xi Xinerama Xrandr Xrender atk-1.0 c cairo \
			charset expat fontconfig freetype gdk-x11-2.0 \
			gdk_pixbuf-2.0 gio-2.0 glib-2.0 glitz gmodule-2.0 \
			gobject-2.0 gthread-2.0 gtk-x11-2.0 iconv intl jpeg m \
			pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png \
			pthread stdc++ pthread-stubs xcb xcb-render \
			xcb-render-util z
d44 4
a47 4
LIB_DEPENDS =	rsvg-2::x11/gnome/librsvg \
		bz2::archivers/bzip2 \
		gd::graphics/gd \
		magic::devel/libmagic
d53 2
a54 2
	mkdir -p ${PREFIX}/share/mldonkey
	cp -R ${WRKDIST}/distrib ${PREFIX}/share/mldonkey
@


1.32
log
@use REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2010/06/06 13:57:20 kili Exp $
d4 1
a4 2
DISTNAME =	mldonkey-3.0.2
REVISION=	0
@


1.31
log
@Adjust WANTLIB and bump.

Don't panic, I'm not starting a wave of WANTLIB spam, I just ran into
some build problems with mldonkey and a (slightly) outdated lablgtk2
and found some missing wantlib entries in both ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/06/04 17:28:51 avsm Exp $
d5 1
a5 1
PKGNAME =	${DISTNAME}p0
@


1.30
log
@update to mldonkey-3.0.2; from dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/03/30 08:03:31 dcoppa Exp $
d5 1
d24 4
a27 3
			gobject-2.0 gtk-x11-2.0 iconv intl jpeg m pango-1.0 \
			pangocairo-1.0 pangoft2-1.0 pixman-1 png pthread \
			stdc++ pthread-stubs xcb z
@


1.29
log
@Change my email address and bump

OK ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2009/11/09 16:21:55 giovanni Exp $
d4 1
a4 2
DISTNAME =	mldonkey-3.0.1
PKGNAME =	${DISTNAME}p1
@


1.28
log
@
Fix a bug with GTK+2 gui and latest lablgtk2
From maintainer David Coppa
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2009/10/29 08:28:09 giovanni Exp $
d5 1
a5 1
PKGNAME =	${DISTNAME}p0
d11 1
a11 1
MAINTAINER =	David Coppa <dcoppa@@gmail.com>
@


1.27
log
@
Update to 3.0.1 from new maintainer David Coppa
Switch to new gtk+2 gui
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2009/08/10 06:33:43 kili Exp $
d5 1
@


1.26
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/06/20 22:05:11 avsm Exp $
d3 26
a28 15
COMMENT=	e-donkey client
CATEGORIES=	net

# GPL
PERMIT_PACKAGE_FTP=	Yes
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
WANTLIB=		X11 Xext Xi c glib gmodule iconv intl m z pthread \
			freetype png jpeg charset stdc++ fontconfig \
			pthread-stubs xcb
CONFIGURE_STYLE=	autoconf no-autoheader
AUTOCONF_DIR=		${WRKSRC}/config
AUTOCONF_VERSION=	2.61
#CONFIGURE_ARGS+=	--enable-ocamlver=3.07
d31 10
a40 16
HOMEPAGE=	http://mldonkey.sourceforge.net/Main_Page

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=mldonkey/}
DISTNAME=	mldonkey-2.9.1
PKGNAME=	${DISTNAME}p4
EXTRACT_SUFX=	.tar.bz2

CONFIGURE_ARGS+=--enable-gui=newgui1
CONFIGURE_ENV+=	CPPFLAGS='-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include -I${X11BASE}/include'
CONFIGURE_ENV+=	LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib'

USE_X11=	Yes
USE_GMAKE=	Yes
MODULES=	lang/ocaml
BUILD_DEPENDS=	::x11/lablgtk
LIB_DEPENDS=	gdk.>=1,gtk.>=1::x11/gtk+ \
d45 2
a46 2
FAKE_FLAGS=	MODOCAML_NATIVE=${MODOCAML_NATIVE}
NO_REGRESS=	Yes
@


1.25
log
@update to ocaml-3.11.1 and bump dependent package PKGNAMEs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2009/04/03 21:30:50 sturm Exp $
d12 2
a13 1
			freetype png jpeg charset stdc++ fontconfig
d24 1
a24 1
PKGNAME=	${DISTNAME}p3
@


1.24
log
@bump after ocaml update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2009/03/11 21:30:31 avsm Exp $
d23 1
a23 1
PKGNAME=	${DISTNAME}p2
@


1.23
log
@patch to work with ocaml-3.11, and bump pkgname
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2007/09/17 20:51:22 rui Exp $
d23 1
a23 1
PKGNAME=	${DISTNAME}p1
@


1.22
log
@update mldonkey to 2.9.1.
changelog available here:
http://cvs.savannah.gnu.org/viewvc/mldonkey/mldonkey/distrib/ChangeLog?revision=1.1320

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/07/29 22:13:15 rui Exp $
d23 1
@


1.21
log
@update mldonkey to 2.9.0.diff and fix MLDonkey Network Modules IP Blocking Weakness
Reference: http://secunia.com/advisories/26230/

ok kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2007/06/29 19:17:08 espie Exp $
d22 1
a22 1
DISTNAME=	mldonkey-2.9.0
@


1.20
log
@drop maintainership, switching to amule...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/04/19 23:04:53 espie Exp $
d22 1
a22 2
DISTNAME=	mldonkey-2.8.4
PKGNAME=	${DISTNAME}p0
@


1.19
log
@update to newer version, after checking it works fine.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/02/02 19:28:52 espie Exp $
d3 1
a3 1
COMMENT=	'e-donkey client'
a5 2
MAINTAINER=	Marc Espie <espie@@openbsd.org>

d23 1
a23 1
PKGNAME=	${DISTNAME}
@


1.18
log
@update to 2.8.2, appears to work fine on both i386 and sparc64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/01/24 01:32:51 espie Exp $
d17 1
a17 1
AUTOCONF_VERSION=	2.59
d24 1
a24 1
DISTNAME=	mldonkey-2.8.2
@


1.18.2.1
log
@MFC (origal commit rui@@):
- update mldonkey to 2.9.0 (fix MLDonkey Network Modules IP Blocking Weakness)
Reference: http://secunia.com/advisories/26230/

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/02/02 19:28:52 espie Exp $
d24 2
a25 1
DISTNAME=	mldonkey-2.9.0
@


1.17
log
@fix a nasty bug, where emule clients receive twice (!) the data they want.
from spiralvoice, thx !
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/12/26 22:39:31 avsm Exp $
d3 2
a4 2
COMMENT='e-donkey client'
CATEGORIES=net
d6 1
a6 1
MAINTAINER=Marc Espie <espie@@openbsd.org>
d21 1
a21 1
HOMEPAGE=http://mldonkey.sourceforge.net/Main_Page
d23 4
a26 4
MASTER_SITES=${MASTER_SITE_SOURCEFORGE:=mldonkey/}
DISTNAME=mldonkey-2.8.1
PKGNAME=${DISTNAME}p1
EXTRACT_SUFX=.tar.bz2
d29 2
a30 2
CONFIGURE_ENV+=CPPFLAGS='-I${LOCALBASE}/include/libpng -I${LOCALBASE}/include -I${X11BASE}/include'
CONFIGURE_ENV+=LDFLAGS='-L${LOCALBASE}/lib -L${X11BASE}/lib'
d32 4
a35 4
USE_X11=Yes
USE_GMAKE=Yes
MODULES=lang/ocaml
BUILD_DEPENDS=::x11/lablgtk
d41 2
a42 2
FAKE_FLAGS=MODOCAML_NATIVE=${MODOCAML_NATIVE}
NO_REGRESS=Yes
@


1.16
log
@bump PKGNAME on ocaml ports for recent ocaml-3.09.3 dependency change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/11/13 12:51:14 steven Exp $
d25 1
a25 1
PKGNAME=${DISTNAME}p0
@


1.15
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/10/27 07:23:50 espie Exp $
d25 1
a25 1
PKGNAME=${DISTNAME}
@


1.14
log
@Update to 2.8.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/09/17 21:46:01 espie Exp $
d32 1
@


1.13
log
@new version
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/08/03 23:15:58 espie Exp $
d24 1
a24 1
DISTNAME=mldonkey-2.7.7
d51 1
a51 1
strip_binaries=cd ${PREFIX}/bin && strip mlnet mlgui mlnet+gui mlim
@


1.12
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/06/07 07:50:47 espie Exp $
d24 1
a24 1
DISTNAME=mldonkey-2.7.6
@


1.12.2.1
log
@MFC:
fix a nasty bug, where emule clients receive twice (!) the data they want.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/08/03 23:15:58 espie Exp $
d25 1
a25 1
PKGNAME=${DISTNAME}p0
@


1.12.2.2
log
@MFC (origal commit rui@@):
- update mldonkey to 2.9.0 (fix MLDonkey Network Modules IP Blocking Weakness)
Reference: http://secunia.com/advisories/26230/

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12.2.1 2007/02/03 16:25:14 sturm Exp $
d24 2
a25 1
DISTNAME=mldonkey-2.9.0
a31 1
USE_X11=	Yes
d51 1
a51 1
strip_binaries=cd ${PREFIX}/bin && strip mlnet mlgui mlnet+gui
@


1.11
log
@update to newer version so that it compiles with newer ocaml.

(Hi Anil)
(Hi Nikolay)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/03/07 09:19:14 espie Exp $
d35 1
a35 1
LIB_DEPENDS=gdk.1,gtk.1::x11/gtk+ \
@


1.10
log
@update to 2.7.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/02/21 09:49:02 espie Exp $
d24 1
a24 1
DISTNAME=mldonkey-2.7.4
d37 3
a39 1
		gd::graphics/gd
@


1.9
log
@correctly detect gd.
This fixes mldonkey on !binary arches, as the autoconfiguration code
seems to be buggy for those cases with newer ocaml.
e.g., mldonkey builds on sparc64 again.

okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2005/09/10 17:29:58 espie Exp $
d14 1
a14 1
			freetype png jpeg charset
d21 1
a21 1
HOMEPAGE=http://savannah.nongnu.org/projects/mldonkey/
d23 3
a25 3
MASTER_SITES=http://savannah.nongnu.org/download/mldonkey/
DISTNAME=mldonkey-2.6.3
PKGNAME=${DISTNAME}p1
d29 1
a29 1
CONFIGURE_ENV+=CPPFLAGS='-I${LOCALBASE}/include -I${X11BASE}/include'
d38 1
a38 1
FAKE_FLAGS=prefix=${DESTDIR}${PREFIX} MODOCAML_NATIVE=${MODOCAML_NATIVE}
@


1.9.2.1
log
@MFC:
fix a nasty bug, where emule clients receive twice (!) the data they want.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/02/21 09:49:02 espie Exp $
d25 1
a25 1
PKGNAME=${DISTNAME}p2
@


1.8
log
@update WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/09/04 23:47:36 espie Exp $
d13 5
a17 2
WANTLIB=		X11 Xext Xi c glib gmodule iconv intl m z pthread
CONFIGURE_STYLE=	gnu
d25 1
a25 1
PKGNAME=${DISTNAME}p0
d29 3
d35 3
a37 1
LIB_DEPENDS=gdk.1,gtk.1::x11/gtk+
@


1.7
log
@update mldonkey to 2.6.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/05/16 18:49:13 espie Exp $
d13 1
a13 1
WANTLIB=		X11 Xext Xi c glib gmodule iconv intl m z
d22 1
@


1.6
log
@much newer stable version that should compile with newest ocaml
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2005/05/11 17:23:55 pvalchev Exp $
d21 1
a21 1
DISTNAME=mldonkey-2.5.28.1
d24 1
@


1.5
log
@mark as broken (interactive): requires update due to ocaml 3.08
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.4 2004/12/16 00:31:23 alek Exp $

BROKEN= "requires update due to ocaml 3.08"
d15 1
a15 1
CONFIGURE_ARGS+=	--enable-ocamlver=3.07
d20 3
a22 5
MASTER_SITES=http://savannah.nongnu.org/download/mldonkey/release-2.5-4/official/
DISTNAME=mldonkey-2.5.4
PKGNAME=${DISTNAME}p0
DISTFILES=mldonkey-2.5-4.tar.gz
WRKDIST=${WRKDIR}/mldonkey-2.5-4
d34 1
d37 6
@


1.4
log
@Add WANTLIB markers
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.3 2004/08/10 20:41:47 xsa Exp $
@


1.3
log
@
more new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/08/03 18:24:40 naddy Exp $
d13 1
@


1.2
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/03/07 19:10:53 espie Exp $
d26 1
a26 1
MODULES=ocaml
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/12/31 17:26:35 sturm Exp $
d15 1
@


1.1.1.1
log
@resurrect mldonkey 2.5.4, okay pval.
@
text
@@
