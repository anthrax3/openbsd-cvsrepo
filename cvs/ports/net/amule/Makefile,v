head	1.58;
access;
symbols
	OPENBSD_6_1:1.57.0.2
	OPENBSD_6_1_BASE:1.57
	OPENBSD_6_0:1.53.0.2
	OPENBSD_6_0_BASE:1.53
	OPENBSD_5_9:1.51.0.2
	OPENBSD_5_9_BASE:1.51
	OPENBSD_5_8:1.49.0.4
	OPENBSD_5_8_BASE:1.49
	OPENBSD_5_7:1.47.0.2
	OPENBSD_5_7_BASE:1.47
	OPENBSD_5_6:1.46.0.2
	OPENBSD_5_6_BASE:1.46
	OPENBSD_5_5:1.45.0.2
	OPENBSD_5_5_BASE:1.45
	OPENBSD_5_4:1.40.0.2
	OPENBSD_5_4_BASE:1.40
	OPENBSD_5_3:1.38.0.2
	OPENBSD_5_3_BASE:1.38
	OPENBSD_5_2:1.35.0.2
	OPENBSD_5_2_BASE:1.35
	OPENBSD_5_1_BASE:1.29
	OPENBSD_5_1:1.29.0.2
	OPENBSD_5_0:1.25.0.2
	OPENBSD_5_0_BASE:1.25
	OPENBSD_4_9:1.20.0.2
	OPENBSD_4_9_BASE:1.20
	OPENBSD_4_8:1.16.0.2
	OPENBSD_4_8_BASE:1.16
	OPENBSD_4_7:1.15.0.2
	OPENBSD_4_7_BASE:1.15
	OPENBSD_4_6:1.13.0.8
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.13.0.6
	OPENBSD_4_5_BASE:1.13
	OPENBSD_4_4:1.13.0.4
	OPENBSD_4_4_BASE:1.13
	OPENBSD_4_3:1.13.0.2
	OPENBSD_4_3_BASE:1.13
	OPENBSD_4_2:1.11.0.2
	OPENBSD_4_2_BASE:1.11
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.7.0.4
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.7.0.2
	OPENBSD_3_9_BASE:1.7
	OPENBSD_3_8:1.5.0.2
	OPENBSD_3_8_BASE:1.5
	fgsch_2005-06-07:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.58
date	2017.04.10.11.46.23;	author sthen;	state Exp;
branches;
next	1.57;
commitid	BLsh88fJB8thZTwY;

1.57
date	2016.11.23.09.56.21;	author dcoppa;	state Exp;
branches;
next	1.56;
commitid	66qO9itDAuJaK8XM;

1.56
date	2016.10.10.13.25.38;	author dcoppa;	state Exp;
branches;
next	1.55;
commitid	Q2hykjDRkO4hk2FU;

1.55
date	2016.09.19.19.15.48;	author dcoppa;	state Exp;
branches;
next	1.54;
commitid	GosSvVWVvt1FaNhG;

1.54
date	2016.09.19.14.06.53;	author dcoppa;	state Exp;
branches;
next	1.53;
commitid	5r1M93ZXX9IopG1W;

1.53
date	2016.06.03.11.54.44;	author dcoppa;	state Exp;
branches;
next	1.52;
commitid	nKy2PDzQGES4thLB;

1.52
date	2016.03.01.00.07.17;	author sthen;	state Exp;
branches;
next	1.51;
commitid	QBhOYg1ODJRuhu7C;

1.51
date	2015.11.20.17.17.50;	author sthen;	state Exp;
branches;
next	1.50;
commitid	5jJ7D9qeiviUpxXN;

1.50
date	2015.09.01.07.30.30;	author dcoppa;	state Exp;
branches;
next	1.49;
commitid	5GhBZl8D5VeCIFYF;

1.49
date	2015.08.04.06.43.23;	author ajacoutot;	state Exp;
branches;
next	1.48;
commitid	wLauE6LvgHUEYTf6;

1.48
date	2015.06.05.12.20.38;	author ajacoutot;	state Exp;
branches;
next	1.47;
commitid	EN63WAVsZfWHjAV3;

1.47
date	2015.01.29.14.46.28;	author dcoppa;	state Exp;
branches;
next	1.46;
commitid	eevPgJbZNUTfW3at;

1.46
date	2014.03.17.23.22.02;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2014.01.20.21.31.25;	author dcoppa;	state Exp;
branches;
next	1.44;

1.44
date	2014.01.13.15.01.22;	author dcoppa;	state Exp;
branches;
next	1.43;

1.43
date	2013.11.25.11.55.12;	author dcoppa;	state Exp;
branches;
next	1.42;

1.42
date	2013.08.16.10.54.21;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2013.08.13.12.46.15;	author dcoppa;	state Exp;
branches;
next	1.40;

1.40
date	2013.03.14.12.57.36;	author dcoppa;	state Exp;
branches;
next	1.39;

1.39
date	2013.03.11.11.35.45;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2012.11.26.12.11.35;	author dcoppa;	state Exp;
branches;
next	1.37;

1.37
date	2012.11.08.10.06.04;	author dcoppa;	state Exp;
branches;
next	1.36;

1.36
date	2012.10.25.07.59.45;	author dcoppa;	state Exp;
branches;
next	1.35;

1.35
date	2012.06.05.08.42.31;	author dcoppa;	state Exp;
branches;
next	1.34;

1.34
date	2012.05.09.13.12.41;	author dcoppa;	state Exp;
branches;
next	1.33;

1.33
date	2012.05.09.12.51.01;	author dcoppa;	state Exp;
branches;
next	1.32;

1.32
date	2012.04.10.13.08.37;	author dcoppa;	state Exp;
branches;
next	1.31;

1.31
date	2012.02.29.11.43.19;	author dcoppa;	state Exp;
branches;
next	1.30;

1.30
date	2012.02.22.07.54.26;	author dcoppa;	state Exp;
branches;
next	1.29;

1.29
date	2012.01.12.11.30.45;	author dcoppa;	state Exp;
branches;
next	1.28;

1.28
date	2011.12.27.11.51.37;	author dcoppa;	state Exp;
branches;
next	1.27;

1.27
date	2011.12.11.18.31.13;	author dcoppa;	state Exp;
branches;
next	1.26;

1.26
date	2011.11.28.15.28.49;	author dcoppa;	state Exp;
branches;
next	1.25;

1.25
date	2011.07.28.11.06.40;	author dcoppa;	state Exp;
branches;
next	1.24;

1.24
date	2011.07.27.13.11.59;	author dcoppa;	state Exp;
branches;
next	1.23;

1.23
date	2011.07.26.15.32.36;	author dcoppa;	state Exp;
branches;
next	1.22;

1.22
date	2011.07.25.14.46.57;	author dcoppa;	state Exp;
branches;
next	1.21;

1.21
date	2011.06.24.08.42.31;	author dcoppa;	state Exp;
branches;
next	1.20;

1.20
date	2010.11.19.22.31.32;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2010.11.11.11.54.08;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2010.10.24.21.30.01;	author ajacoutot;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.18.36.45;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.07.12.22.07.37;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2009.12.22.00.31.22;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2009.08.10.06.33.43;	author kili;	state Exp;
branches;
next	1.13;

1.13
date	2007.12.18.15.56.16;	author ajacoutot;	state Exp;
branches;
next	1.12;

1.12
date	2007.10.26.15.00.39;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2007.07.15.20.44.41;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2007.07.08.18.09.58;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2007.05.10.14.33.19;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2006.10.12.14.18.53;	author alek;	state Exp;
branches;
next	1.7;

1.7
date	2005.12.19.21.26.53;	author fgsch;	state Exp;
branches;
next	1.6;

1.6
date	2005.10.07.16.20.34;	author fgsch;	state Exp;
branches;
next	1.5;

1.5
date	2005.06.25.16.10.03;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2005.06.18.15.18.44;	author fgsch;	state Exp;
branches;
next	1.3;

1.3
date	2005.06.15.04.29.55;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2005.06.14.20.30.59;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2005.06.07.17.24.49;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.06.07.17.24.49;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.58
log
@use LIBCXX
@
text
@# $OpenBSD: Makefile,v 1.57 2016/11/23 09:56:21 dcoppa Exp $

COMMENT-main =	another eDonkey P2P file sharing client
COMMENT-web =	webserver interface to amuled
COMMENT-daemon =stand-alone daemon/cmdline for amule

V =		2.3.2
DISTNAME =	aMule-$V
REVISION =	1
CATEGORIES =	net

HOMEPAGE =	http://www.amule.org/

MULTI_PACKAGES =-main -web -daemon

PKGNAME-main =	amule-$V
PKGNAME-daemon =amuled-$V
PKGNAME-web =	amuleweb-$V

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MAINTAINER =	David Coppa <dcoppa@@openbsd.org>
MASTER_SITES =	${MASTER_SITE_SOURCEFORGE:=amule/}
EXTRACT_SUFX =	.tar.xz

MODULES =	devel/gettext

LIB_DEPENDS =
WANTLIB =
RUN_DEPENDS =

# bison needed if .y files are patched
BUILD_DEPENDS =		devel/bison

commonLIB_DEPENDS =	x11/wxWidgets>=2.8.12 \
			net/libupnp>=1.6.6

LIB_DEPENDS-main =	${LIB_DEPENDS} ${commonLIB_DEPENDS} \
			devel/cryptopp>=5.6.0 \
			graphics/gd \
			net/GeoIP

LIB_DEPENDS-daemon =	${LIB_DEPENDS} ${commonLIB_DEPENDS} \
			devel/cryptopp>=5.6.0

LIB_DEPENDS-web =	${LIB_DEPENDS} ${commonLIB_DEPENDS}

RUN_DEPENDS-main =	${RUN_DEPENDS} \
			devel/desktop-file-utils

commonWANTLIB =		c ixml m pthread ${LIBCXX} threadutil upnp \
			wx_base wx_base_net z
WANTLIB-main =		${WANTLIB} ${commonWANTLIB} \
			GeoIP X11 cryptopp fontconfig tiff vpx \
			freetype gd jpeg png wx_gtk2_adv wx_gtk2_core
WANTLIB-daemon =	${WANTLIB} ${commonWANTLIB} \
			cryptopp readline termcap
WANTLIB-web =		${WANTLIB} ${commonWANTLIB} \
			png readline termcap

USE_GMAKE =		Yes
USE_GROFF =		Yes

CONFIGURE_STYLE =	autoconf
AUTOCONF_VERSION =	2.65

CONFIGURE_ARGS =	--disable-optimize \
			--disable-profile \
			--disable-plasmamule \
			--disable-xas \
			--enable-alc \
			--enable-alcc \
			--enable-amule-daemon \
			--enable-amule-gui \
			--enable-amulecmd \
			--enable-cas \
			--enable-geoip \
			--enable-webserver \
			--enable-wxcas \
			--with-denoise-level=0 \
			--with-libiconv-prefix=${LOCALBASE} \
			--with-libpng-config=${LOCALBASE}/bin/libpng-config

.ifndef DEBUG
CONFIGURE_ARGS +=	--disable-debug
.else
CONFIGURE_ARGS +=	--enable-debug
.endif

CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include" \
			LOCALDIR="${LOCALBASE}" \
			X11R6DIR="${X11BASE}"

MAKE_FLAGS +=		CXXFLAGS="${CXXFLAGS} -Wno-deprecated \
				  -Wno-shadow -Wno-sign-compare \
				  -Wno-unused"

pre-configure:
	${SUBST_CMD} ${WRKSRC}/src/utils/cas/configfile.c
	rm ${WRKSRC}/docs/man/a*.*.1 \
		${WRKSRC}/docs/man/e*.*.1 \
		${WRKSRC}/src/utils/*/docs/a*.*.1 \
		${WRKSRC}/src/utils/*/docs/c*.*.1 \
		${WRKSRC}/src/utils/*/docs/w*.*.1

post-install:
	${INSTALL_SCRIPT} ${WRKDIST}/src/utils/scripts/mldonkey_importer.pl \
		${PREFIX}/bin/mldonkey_importer

.include <bsd.port.mk>
@


1.57
log
@
Merge two fixes from upstream git repository.

git commit a19567efa969835503823d6f6d193dcc83eb92ef:

Try to find best possible keyword for Kad search.
For example most user will search like this "The oxymoronaccelerator
2", which would ask the node which indexes "the". This causes higher
traffic for such nodes and makes them a viable target to attackers,
while the kad result should be the same or even better if we ask
the node which indexes the rare keyword "oxymoronaccelerator", so
we try to rearrange keywords and generally assume that the longer
keywords are rarer.

git commit 5cf7ef9a7dcff2776d9ebc8bb8337e7e3203e6ab:

Add a routine to set file name conversion for amuled, which is based
on wxAppConsole: fix sharing directories with non-ASCII names with
aMule daemon.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2016/10/10 13:25:38 dcoppa Exp $
d52 1
a52 1
commonWANTLIB =		c ixml m pthread stdc++ threadutil upnp \
@


1.56
log
@
Fix restoring toolbar orientation on 'Cancel'
(upstream git commit 8f0c06698f988e8d93b62045716bd205a015490b)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2016/09/19 19:15:48 dcoppa Exp $
d9 1
a9 1
REVISION =	0
@


1.55
log
@
Remove unnecessary line; no pkg changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2016/09/19 14:06:53 dcoppa Exp $
d9 1
@


1.54
log
@
Finally a new release!
Update to amule-2.3.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2016/06/03 11:54:44 dcoppa Exp $
d104 1
a104 2
		${WRKSRC}/src/utils/*/docs/w*.*.1 \
		${WRKSRC}/src/utils/*/docs/x*.*.1
@


1.53
log
@
Merge various fixes from upstream:

Use the proper return type of std::string.length() and std::string.size()
(git commit bb890318844e571fc18d3b80d79cbc8bece54540)

Fix crash when importing partfiles with the "Preallocate space for
new files" preference option enabled
(git commit f2c05727c232b607be5a3b8b78279a669b1e7ef3)

Fix usage of uninitialized value in libupnp
(git commit f2ea995c6bf85c748824b473e6238fef0ae3f44c)

[webserver] Remove erroneous close anchor tag from login.php
(git commit 25a34ff0ddf01c249f36d7a16d58631ad3e39b63)

[webserver] Add missing includes
(git commit 3550730658f3084b4c84a2387d87b070122becb4)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2016/03/01 00:07:17 sthen Exp $
d7 1
a7 1
V =		2.3.1
a8 3
REVISION-main =	22
REVISION-web =	20
REVISION-daemon =20
d95 2
a96 1
					-Wno-sign-compare -Wno-unused"
d100 6
@


1.52
log
@bump (GeoIP pkgpath change)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2015/11/20 17:17:50 sthen Exp $
d9 3
a11 3
REVISION-main =	21
REVISION-web =	19
REVISION-daemon =19
@


1.51
log
@remove the remaining devel/flex build deps
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2015/09/01 07:30:30 dcoppa Exp $
d9 1
a9 1
REVISION-main =	20
@


1.50
log
@
Use the devel/gettext module

While here:
fix the return value of CUPnPService::GetStateVariable
(from upstream git commit 171bc8f931dccae64f1f7d43c84a4e8ce0f0dc49)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/08/04 06:43:23 ajacoutot Exp $
d36 1
a36 2
BUILD_DEPENDS =		devel/bison \
			devel/flex
d95 1
a95 2
			X11R6DIR="${X11BASE}" \
			ac_cv_prog_LEX="${LOCALBASE}/bin/gflex"
@


1.49
log
@Needs devel/gettext-tools.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/06/05 12:20:38 ajacoutot Exp $
d9 3
a11 3
REVISION-main =	19
REVISION-web =	18
REVISION-daemon =18
d29 1
a29 3
.if defined (SUBPACKAGE) && ${SUBPACKAGE:M-main}
MODULES +=	converters/libiconv
.endif
d37 1
a37 2
			devel/flex \
			devel/gettext-tools
@


1.48
log
@Sync PLIST for share/applications/.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/01/29 14:46:28 dcoppa Exp $
d40 1
a40 1
			devel/gettext
@


1.47
log
@
Merge some fixes from upstream repo:

Fix always-true conditional

Remove unneeded conversion from CMD4Hash

Fix a shadow warning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2014/03/17 23:22:02 sthen Exp $
d9 3
a11 1
REVISION =	18
@


1.46
log
@sync follow graphics/gd update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2014/01/20 21:31:25 dcoppa Exp $
d9 1
a9 1
REVISION =	17
@


1.45
log
@
Ensure constant value is interpreted as it was meant to be
(upstream git commit bc9ac1221f2d3f27b1c7068dbe590ed013f53c7a)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/01/13 15:01:22 dcoppa Exp $
d9 1
a9 1
REVISION =	16
d59 1
a59 1
			GeoIP X11 cryptopp fontconfig \
@


1.44
log
@New round of fixes from upstream:

New download link for server list
(upstream git commit 458e2c2f0d245eca88e9fea48e66bd40036162f4)

If successfully downloaded a server list, and are not connected at
the moment, try to connect.
This happens when no server met is available on startup.
(upstream git commit 41e0edaed86c9be58ae372e419e2cc02cebfa243)

Fix the blasted DoNetworkRearrange()
upstream git commits:
 http://repo.or.cz/w/amule.git/commit/f2307fa12fb18688131962d11623ec776697b15f
 http://repo.or.cz/w/amule.git/commit/af9cec62ba0bf02e31ae316749234cbd31792db7
 http://repo.or.cz/w/amule.git/commit/85ea02a3abc784f415adadfb384c654057e13c01
 http://repo.or.cz/w/amule.git/commit/d41b28c86b2f07439928720971896dde1ae89bb1

mldonkey_importer.pl can import an unlimited number of files
(upstream git commit c7667a3e341c2499b0c9a7299f5b05096247556d)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2013/11/25 11:55:12 dcoppa Exp $
d9 1
a9 1
REVISION =	15
@


1.43
log
@Bugfixes from upstream:

Fix pre-allocation in CDownloadQueue::CopyFileList
(upstream git commit f8f0eca00153b508831fce03c385fb2fb1c8ae66)

Don't log a critical line on startup if statistics.dat is missing
(upstream git commit 2de1d5fa97de56625459362cc6ccfd94dbf1c044)

Less writing of known files list during hashing (every 3000MB instead
of 300): files have become larger and hashing faster.
(upstream git commit f9b504a11ba7fabde6c7a63184edeeeb15ec7f66)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2013/08/16 10:54:21 sthen Exp $
d9 1
a9 1
REVISION =	14
@


1.42
log
@add BUILD_DEPENDS on bison, now that a .y file has been patched it is required.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/08/13 12:46:15 dcoppa Exp $
d9 1
a9 1
REVISION =	13
@


1.41
log
@Add some EBook file types
(upstream git commit 6c838fc0d67d86ca22e9c793b88badd8a3258b6c)

Add missing semicolon
(upstream git commit 7c67f345702595e6ba9bd29b12734451decb24d8)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/03/14 12:57:36 dcoppa Exp $
d35 3
a37 1
BUILD_DEPENDS =		devel/flex \
@


1.40
log
@Zap unused variable
(upstream git commit 3de45b1d6aedf27af5e7d3f73f2005d96138f03a)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/03/11 11:35:45 espie Exp $
d9 1
a9 1
REVISION =	12
@


1.39
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2012/11/26 12:11:35 dcoppa Exp $
d9 1
a9 1
REVISION =	11
@


1.38
log
@Delete broken seeds files
(upstream git commit 151869b449d49155ea57a2f47579930dca71ea4a)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2012/11/08 10:06:04 dcoppa Exp $
a21 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.37
log
@Take maintainership of devel/cryptopp, net/amule and www/tomcat
since I've de-facto babysitted these ports for a long time.

ok espie@@, ajacoutot@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2012/10/25 07:59:45 dcoppa Exp $
d9 1
a9 1
REVISION =	10
@


1.36
log
@A couple of fixes from upstream:

Fix memory leak when AICH hashing already known files
(upstream git commit 9e62350fae9f24de64987a0cb002fdc15b5fa9af)

Like FAT, NTFS doesn't like special characters either
(upstream git commit 41113ecf15019301afea6cb35d9c35a7b8a0bdd1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2012/06/05 08:42:31 dcoppa Exp $
d9 1
a9 1
REVISION =	9
d26 1
a26 1
MAINTAINER =	Marc Espie <espie@@openbsd.org>
@


1.35
log
@Better fix for the endianness bug in EC
(upstream git commit ec79c81d6825b55ed826b6519287112056859735)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2012/05/09 13:12:41 dcoppa Exp $
d9 1
a9 1
REVISION =	8
@


1.34
log
@bump after the wrong commit
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/05/09 12:51:01 dcoppa Exp $
d9 1
a9 1
REVISION =	7
@


1.33
log
@
Fix compilation with gcc 4.7

Disable another Kad assertion probably resulting from bad data from
external sources

Both from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2012/04/10 13:08:37 dcoppa Exp $
d9 1
a9 1
REVISION =	6
@


1.32
log
@
Save met file when a download is paused or stopped
(upstream git commit d9b4458b1ea214af48bea97cd8482016a0eccbb9)

Don't assert on ill-formed search requests
(upstream git commit e213af55f51b1fd34945c3afad3cdb7bfe605d6c)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/02/29 11:43:19 dcoppa Exp $
d9 1
a9 1
REVISION =	5
@


1.31
log
@Fix endianness bug in EC.
Until now, a little-endian sender worked, regardless of the endianness
of the receiver, but a big-endian sender sent all integer data reversed.
(upstream git commit 07a5a373ff356166207438b5dffdf4eee30825d1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/02/22 07:54:26 dcoppa Exp $
d9 1
a9 1
REVISION =	4
@


1.30
log
@Fix a couple of crashers:

fix crash on truncated statistics.dat
(upstream git commit 5e3682f7efed13eb52e4358a2d91b0e381334120)

fix amuleweb crash on CProgressImage::CreateSpan
(upstream git commit 846dcf92ce64fd42caf8a86d644fe3a3f4683d09)

And:

fix showing of shared files to other clients
(upstream git commit 4e40aecb160baac72aa28a8a4c7aaf19261e051f)

change nodes.dat default download URL to something actually working
(upstream git commit 8dbe597539bcac7272ccf4d46790fde814aeded1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/01/12 11:30:45 dcoppa Exp $
d9 1
a9 1
REVISION =	3
@


1.29
log
@Bugfix: CServerList::LoadStaticServers() failed on empty lines
(upstream git commit e298b38e9ce22e2861d34c5d7f6e7b2e009476b1)

Fix loading of zipped IP filter files
(upstream git commit ab24e8375c23c586de837a9cb7a405ca0499ffde)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2011/12/27 11:51:37 dcoppa Exp $
d9 1
a9 1
REVISION =	2
@


1.28
log
@Fix crash in chat window on disconnected client
(upstream git commit ea45371bda1aa96fe63967c15e360b11d9d84bbd)

Fix bad #define
(upstream git commit b2ff838be24f5effae9ac4b75bd1897b710a60dc)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2011/12/11 18:31:13 dcoppa Exp $
d9 1
a9 1
REVISION =	1
@


1.27
log
@Apply some bugfixing patches from upstream:

Fix: first check our bool variable, then make some calculations if
it's false. Not the other way around
(upstream git commit 41090dfe3756396a8b4496f732ab8493aa51fe6c)

Fix: disabling protocol obfuscation broke Kad and triggered assertions
(upstream git commit ec2e66216738f92724a37fa030a79734e0e8b1ba)

Fix: disable the partfile importer's 'Add' button on the remote gui
unless using a localhost connection
(upstream git commit 004f3929d91e4b81f47235060d86686fff13e2d3)

Fix: "Prompt on exit" preference
(upstream git commit aea8d002b6446dcaf38db4d4ab222fcebce60948)

Fix: require restart when protocol obfuscation setting gets changed
(upstream git commit ec2e66216738f92724a37fa030a79734e0e8b1ba)

And fix libX11 '-lX11' linkage.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2011/11/28 15:28:49 dcoppa Exp $
d9 1
a9 1
REVISION =	0
@


1.26
log
@Update to aMule version 2.3.1 - The "unobvious evil date" version.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2011/07/28 11:06:40 dcoppa Exp $
d9 1
@


1.25
log
@Tighten dependency on wxWidgets->=2.8.12: 2.8.12 avoids a lot of
amule crashes as stated by many devs on forum.amule.org.
Bump REVISIONs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2011/07/27 13:11:59 dcoppa Exp $
d7 1
a7 1
V =		2.2.6
d12 1
d14 1
a17 3
REVISION-main = 3
REVISION-daemon = 1
REVISION-web = 1
d27 1
a27 1
EXTRACT_SUFX =	.tar.bz2
d67 1
d70 1
a70 1
AUTOCONF_VERSION =	2.59
d74 2
d87 1
a87 1
			--with-x
a108 2

NO_REGRESS =		Yes
@


1.24
log
@Tweak PLIST
Fix license marker
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/07/26 15:32:36 dcoppa Exp $
d16 3
a18 3
REVISION-main = 2
REVISION-daemon = 0
REVISION-web = 0
d41 1
a41 1
commonLIB_DEPENDS =	x11/wxWidgets>=2.8.0 \
@


1.23
log
@Fix a couple of nasty crashers (from upstream git)

Use "litoral" as the default template, since it's much
better than "php-default"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/07/25 14:46:57 dcoppa Exp $
d16 1
a16 1
REVISION-main = 1
d20 1
a20 1
# GPL
@


1.22
log
@Fix typos in manual pages. From Debian
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/06/24 08:42:31 dcoppa Exp $
d16 3
a18 1
REVISION-main =	0
@


1.21
log
@Update to amule-2.2.6

'go for it' espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2010/11/19 22:31:32 espie Exp $
d16 1
@


1.20
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2010/11/11 11:54:08 espie Exp $
d3 1
a3 1
COMMENT-main =	another eMule p2p client
d7 1
a7 1
V =		2.1.3
a12 1
REVISION-main =	5
d27 46
a72 16
RUN_DEPENDS-main=${RUN_DEPENDS} \
		devel/desktop-file-utils

LIB_DEPENDS =	x11/wxWidgets>=2.6.3
WANTLIB =	c m pthread z stdc++ wx_base_net wx_base

USE_GMAKE =	Yes
USE_GROFF =	Yes

WANTLIB-main =	${WANTLIB} X11 pthread-stubs wx_gtk2_adv wx_gtk2_core xcb
WANTLIB-daemon =${WANTLIB} readline termcap
WANTLIB-web =	${WANTLIB} png readline termcap

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS =	--disable-debug \
			--with-x \
d74 1
d76 2
d79 18
a96 1
			--enable-amule-gui
d98 2
a99 1
CONFIGURE_ENV =		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include"
@


1.19
log
@WANTLIB conversion
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/10/24 21:30:01 ajacoutot Exp $
d29 1
a29 1
		:desktop-file-utils-*:devel/desktop-file-utils
d31 1
a31 1
LIB_DEPENDS =	:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
@


1.18
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 18:36:45 espie Exp $
d31 2
a32 2
LIB_DEPENDS =	wx_base_net,wx_base:wxWidgets-gtk2->=2.6.3:x11/wxWidgets
WANTLIB =	c m pthread z stdc++
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/07/12 22:07:37 sthen Exp $
a33 1
USE_X11 =	Yes
@


1.16
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2009/12/22 00:31:22 sthen Exp $
d36 1
@


1.15
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/08/10 06:33:43 kili Exp $
d13 2
a14 1
PKGNAME-main =	amule-$Vp5
@


1.14
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/12/18 15:56:16 ajacoutot Exp $
d13 1
a13 1
PKGNAME-main =	amule-$Vp4
@


1.13
log
@- add missing update-desktop-database goo
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/10/26 15:00:39 steven Exp $
d13 1
a13 1
PKGNAME-main =	amule-$Vp3
d36 1
a36 1
WANTLIB-main =	${WANTLIB} X11 wx_gtk2_adv wx_gtk2_core
@


1.12
log
@make this work with wxWidgets 2.8

diff from
http://cvs.pld-linux.org/cgi-bin/cvsweb/SOURCES/aMule-wx.patch?rev=1.2

"just commit it" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/07/15 20:44:41 naddy Exp $
d13 1
a13 1
PKGNAME-main =	amule-$Vp2
d26 3
@


1.11
log
@fix typos that kept this from packaging
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/07/08 18:09:58 espie Exp $
d13 1
a13 1
PKGNAME-main =	amule-$Vp1
@


1.10
log
@take over amule as MAINTAINER, replaces mldonkey nicely for me
Activate a lot of useful stuff, like the amule daemon and the amulecmd
line tool, which makes it possible to run amule mostly unattended.
(you might need to run it with the gui to configure it at first).

Even the experimental amulegui appears to be mostly functional.
the webgui is included for reference, it works on i386, something fishy
on sparc64...

todo: figure out cross-platform issues. The people who write amule never
thought that the client and the server could run on distinct architectures,
and so they transfer binary data without even putting it in network format,
leading to interesting transfer times and sizes...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/05/10 14:33:19 ajacoutot Exp $
d48 2
a49 1
	${INSTALL_SCRIPT} ${WKRDIST}/src/util/scripts/mldonkey_importer.pl ${PREFIX}/bin/mldonkey_importer
@


1.9
log
@- don't force optimization

ok rui@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/10/12 14:18:53 alek Exp $
d3 13
a15 7
COMMENT=	"another eMule p2p client"

DISTNAME=	aMule-2.1.3
PKGNAME=	${DISTNAME:L}p0
CATEGORIES=	net

HOMEPAGE=	http://www.amule.org/
d18 26
a43 12
PERMIT_PACKAGE_CDROM=   Yes
PERMIT_PACKAGE_FTP=     Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=   Yes

MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=amule/}
EXTRACT_SUFX=	.tar.bz2

LIB_DEPENDS=	wx_gtk2_adv,wx_base_net,wx_base,wx_gtk2_core:wxWidgets-gtk2->=2.6.3:x11/wxWidgets

USE_X11=	Yes
USE_GMAKE=	Yes
d45 1
a45 1
WANTLIB=	X11 c m pthread stdc++ z
d47 2
a48 3
CONFIGURE_STYLE=gnu
CONFIGURE_ARGS=	--disable-debug --with-x
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include"
d50 1
a50 1
NO_REGRESS=	Yes
@


1.8
log
@Update to 2.1.3; now it works fine with new wxWidgets
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2005/12/19 21:26:53 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:L}
d28 1
a28 1
CONFIGURE_ARGS=	--disable-debug --enable-optimize --with-x
@


1.7
log
@remove unneeded diff now that wxwidgets was fixed. tested by jolan@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/10/07 16:20:34 fgsch Exp $
d5 2
a6 2
DISTNAME=	aMule-2.0.3
PKGNAME=	${DISTNAME:L}p2
a8 2
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=amule/}

d17 2
a18 1
MODULES=	devel/gettext
d20 1
a20 1
LIB_DEPENDS=	wx_gtk:wxWidgets-gtk->=2.4.2-!gtk2:x11/wxWidgets/gtk
d23 1
d25 1
a25 1
WANTLIB=	X11 Xext Xi c gdk glib gmodule gtk m pthread stdc++ z
d27 1
a27 1
CONFIGURE_STYLE= gnu
d29 1
a29 2
CONFIGURE_ENV=	WXCONFIG="${LOCALBASE}/bin/wxgtk-2.4-config" \
		CPPFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include"
@


1.6
log
@first attempt to fix the search function; there are still a few other
cases but this makes search work much better.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/06/25 16:10:03 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:L}p1
@


1.5
log
@funky flavors in wxwidgets-gtk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/06/18 15:18:44 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:L}p0
@


1.4
log
@update to 2.0.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/06/15 04:29:55 fgsch Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME:L}
d21 1
a21 1
LIB_DEPENDS=	wx_gtk::x11/wxWidgets/gtk
@


1.3
log
@actually use CPPFLAGS; pointed out by jolan@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/06/14 20:30:59 fgsch Exp $
d5 1
a5 1
DISTNAME=	aMule-2.0.2
@


1.2
log
@don't clobber user CFLAGS if any.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/06/07 17:24:49 fgsch Exp $
d30 1
a30 1
		CFLAGS="${CFLAGS} -I${LOCALBASE}/include -I${X11BASE}/include"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d30 1
a30 1
		CFLAGS="-I${LOCALBASE}/include -I${X11BASE}/include"
@


1.1.1.1
log
@aMule is a peer to peer file sharing client, based on the well known eMule.

feedback and ok from jolan@@ and pedro@@; testing in sparc* and ppc would
be nice.
@
text
@@
