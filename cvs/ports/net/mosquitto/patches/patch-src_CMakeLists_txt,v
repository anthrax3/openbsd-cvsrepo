head	1.3;
access;
symbols
	OPENBSD_6_0:1.1.1.1.0.6
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.4
	OPENBSD_5_8_BASE:1.1.1.1
	edd_20150519:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2017.03.28.17.02.01;	author jasper;	state Exp;
branches;
next	1.2;
commitid	bSBwxaIJ6vhzivnU;

1.2
date	2016.08.13.15.18.58;	author jasper;	state Exp;
branches;
next	1.1;
commitid	Lf5ctuS8vnW1fvPl;

1.1
date	2015.05.19.19.13.39;	author edd;	state Exp;
branches
	1.1.1.1;
next	;
commitid	Z80ifm33PZEMVxBs;

1.1.1.1
date	2015.05.19.19.13.39;	author edd;	state Exp;
branches;
next	;
commitid	Z80ifm33PZEMVxBs;


desc
@@


1.3
log
@update to mosquitto-1.4.11

ok edd@@ (MAINTAINER)
@
text
@$OpenBSD: patch-src_CMakeLists_txt,v 1.2 2016/08/13 15:18:58 jasper Exp $
--- src/CMakeLists.txt.orig	Mon Feb 20 23:06:57 2017
+++ src/CMakeLists.txt	Sat Mar 18 13:14:28 2017
@@@@ -95,6 +95,8 @@@@ endif (HAVE_GETADDRINFO_A)
 if (UNIX)
 	if (APPLE)
 		set (MOSQ_LIBS ${MOSQ_LIBS} dl m)
+	elseif (${CMAKE_SYSTEM_NAME} MATCHES "OpenBSD")
+		set (MOSQ_LIBS ${MOSQ_LIBS} m)
 	else (APPLE)
 		set (MOSQ_LIBS ${MOSQ_LIBS} dl m)
 		find_library(LIBRT rt)
@@@@ -115,10 +117,11 @@@@ endif (${WITH_WEBSOCKETS} STREQUAL ON)
 # Simple detect libuuid
 if(NOT APPLE)
 	FIND_PATH(UUID_HEADER uuid/uuid.h)
-	if (UUID_HEADER)
+	FIND_LIBRARY(UUID_LIBRARY NAMES uuid)
+	if (UUID_HEADER AND UUID_LIBRARY)
 		add_definitions(-DWITH_UUID)
-		set (MOSQ_LIBS ${MOSQ_LIBS} uuid)
-	endif (UUID_HEADER)
+		set (MOSQ_LIBS ${MOSQ_LIBS} ${UUID_LIBRARY})
+	endif()
 endif(NOT APPLE)
 
 target_link_libraries(mosquitto ${MOSQ_LIBS})
@@@@ -139,8 +142,4 @@@@ if (${WITH_TLS} STREQUAL ON)
 	target_link_libraries(mosquitto_passwd "${OPENSSL_LIBRARIES}")
 	install(TARGETS mosquitto_passwd RUNTIME DESTINATION "${BINDIR}" LIBRARY DESTINATION "${LIBDIR}")
 endif (${WITH_TLS} STREQUAL ON)
-
-if (UNIX)
-	install(CODE "EXEC_PROGRAM(/sbin/ldconfig)")
-endif (UNIX)
 
@


1.2
log
@- update to mosquitto-1.4.9

ok edd@@ (MAINTAINER)
@
text
@d1 4
a4 4
$OpenBSD: patch-src_CMakeLists_txt,v 1.1.1.1 2015/05/19 19:13:39 edd Exp $
--- src/CMakeLists.txt.orig	Thu Jun  2 23:20:22 2016
+++ src/CMakeLists.txt	Fri Jul 15 20:46:12 2016
@@@@ -85,6 +85,8 @@@@ set (MOSQ_LIBS ${MOSQ_LIBS} ${OPENSSL_LIBRARIES})
d11 3
a13 3
 		set (MOSQ_LIBS ${MOSQ_LIBS} rt dl m)
 	endif (APPLE)
@@@@ -101,10 +103,11 @@@@ endif (${WITH_WEBSOCKETS} STREQUAL ON)
d28 1
a28 1
@@@@ -125,8 +128,4 @@@@ if (${WITH_TLS} STREQUAL ON)
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- src/CMakeLists.txt.orig	Thu May  7 15:21:22 2015
+++ src/CMakeLists.txt	Tue May 19 08:17:05 2015
d29 2
a30 2
 	target_link_libraries(mosquitto_passwd ${OPENSSL_LIBRARIES})
 	install(TARGETS mosquitto_passwd RUNTIME DESTINATION ${BINDIR} LIBRARY DESTINATION ${LIBDIR})
@


1.1.1.1
log
@Import mosquitto -- an opensource MQTT broker.

Input from sthen@@ and dcoppa@@, thanks.

OK dcoppa@@

@
text
@@
