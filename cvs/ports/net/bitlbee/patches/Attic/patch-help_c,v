head	1.3;
access;
symbols
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.1.0.6
	OPENBSD_4_2_BASE:1.1
	OPENBSD_4_1:1.1.0.4
	OPENBSD_4_1_BASE:1.1
	OPENBSD_4_0:1.1.0.2
	OPENBSD_4_0_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2008.04.09.22.13.12;	author merdely;	state dead;
branches;
next	1.2;

1.2
date	2007.11.19.11.44.33;	author martynas;	state Exp;
branches;
next	1.1;

1.1
date	2006.04.11.15.11.33;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to 1.2.
V1.2 adds nice "account set #" feature to manage accounts.
Remove a lot of string handling patches.
Remove patches to rename bitlbee "root" user to "bitlbee".

tested by Andrew Dalgleish (MAINTAINER), James Turner and Wiktor Izdebski
ok martynas@@, simon@@, okan@@, wcmaier@@
@
text
@$OpenBSD: patch-help_c,v 1.2 2007/11/19 11:44:33 martynas Exp $
--- help.c.orig	Mon Aug 20 16:27:13 2007
+++ help.c	Mon Nov 19 13:39:01 2007
@@@@ -83,8 +83,7 @@@@ help_t *help_init( help_t **help )
 		}
 		h->string = g_new ( char, i );
 		
-		strncpy( h->string, s + 1, i - 1 );
-		h->string[i-1] = 0;
+		strlcpy( h->string, s + 1, i );
 		h->fd = (*help)->fd;
 		h->offset.file_offset = lseek( h->fd, 0, SEEK_CUR ) - buflen + i + 1;
 		h->length = t - s - i - 1;
@@@@ -138,7 +137,7 @@@@ char *help_get( help_t **help, char *string )
 		}
 		else
 		{
-			strncpy( s, h->offset.mem_offset, h->length );
+			strlcpy( s, h->offset.mem_offset, h->length + 1 );
 		}
 		return s;
 	}
@


1.2
log
@update to bitlbee-1.0.4
ok simon@@ and maintainer Andrew Dalgleish;  tested by Wiktor Izdebski
@
text
@d1 1
a1 1
$OpenBSD: patch-help_c,v 1.1 2006/04/11 15:11:33 naddy Exp $
@


1.1
log
@update to 1.0.2; from maintainer Andrew Dalgleish
@
text
@d1 3
a3 3
$OpenBSD$
--- help.c.orig	Sun Apr  2 04:53:39 2006
+++ help.c	Thu Apr  6 23:39:32 2006
d14 1
a14 1
@@@@ -138,7 +137,7 @@@@ char *help_get( help_t **help, char *str
@

