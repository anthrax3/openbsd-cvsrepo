head	1.17;
access;
symbols
	OPENBSD_6_2:1.17.0.10
	OPENBSD_6_2_BASE:1.17
	OPENBSD_6_1:1.17.0.8
	OPENBSD_6_1_BASE:1.17
	OPENBSD_6_0:1.17.0.6
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.17.0.2
	OPENBSD_5_9_BASE:1.17
	OPENBSD_5_8:1.17.0.4
	OPENBSD_5_8_BASE:1.17
	OPENBSD_5_7:1.16.0.2
	OPENBSD_5_7_BASE:1.16
	OPENBSD_5_6:1.15.0.4
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.2
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.14.0.2
	OPENBSD_5_4_BASE:1.14
	OPENBSD_5_3:1.11.0.6
	OPENBSD_5_3_BASE:1.11
	OPENBSD_5_2:1.11.0.4
	OPENBSD_5_2_BASE:1.11
	OPENBSD_5_1_BASE:1.11
	OPENBSD_5_1:1.11.0.2
	OPENBSD_5_0:1.7.0.2
	OPENBSD_5_0_BASE:1.7
	OPENBSD_4_9:1.5.0.2
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.1.1.1.0.2
	OPENBSD_4_7_BASE:1.1.1.1
	sthen_20091111:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.17
date	2015.06.05.06.00.22;	author robert;	state Exp;
branches;
next	1.16;
commitid	PS9YXjRm9KQkIZjT;

1.16
date	2014.11.06.17.13.40;	author sthen;	state Exp;
branches;
next	1.15;
commitid	ig1O4RkSPXzTZYwZ;

1.15
date	2013.08.12.04.11.20;	author robert;	state Exp;
branches;
next	1.14;

1.14
date	2013.07.05.07.44.59;	author jasper;	state Exp;
branches;
next	1.13;

1.13
date	2013.04.22.14.05.07;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2013.03.11.11.35.54;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2011.11.16.15.56.37;	author robert;	state Exp;
branches;
next	1.10;

1.10
date	2011.09.27.11.15.00;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2011.09.27.10.02.02;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2011.09.16.11.13.39;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2011.07.22.10.20.10;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2011.07.08.22.31.59;	author robert;	state Exp;
branches;
next	1.5;

1.5
date	2010.11.19.22.31.37;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.07.12.22.07.40;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2010.04.11.15.11.00;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2010.03.27.00.00.49;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2009.11.11.21.10.33;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.11.11.21.10.33;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.17
log
@bump revision due to the change of the default php version to 5.6
ok aja@@
@
text
@# $OpenBSD: Makefile,v 1.16 2014/11/06 17:13:40 sthen Exp $

COMMENT=	graphical network traffic map

DISTNAME=	php-weathermap-0.97c
EXTRACT_SUFX=	.zip
REVISION=	2

CATEGORIES=	net www

HOMEPAGE=	http://www.network-weathermap.com/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${HOMEPAGE}files/

MODULES=	lang/php

RUN_DEPENDS=	www/pear \
		lang/php/${MODPHP_VERSION},-gd

NO_TEST=	Yes

PKG_ARCH=	*
WRKDIST=	${WRKDIR}/weathermap

PREFIX=		${VARBASE}/www
INSTDIR=	${PREFIX}/weathermap
SUBST_VARS=	INSTDIR

do-configure:
	perl -pi -e 's,^#!/usr/bin/php,#!${MODPHP_BIN},;' \
	    -e 's,/usr/bin/rrdtool,${LOCALBASE}/bin/rrdtool,;' \
	    ${WRKSRC}/weathermap

do-build:
.for i in weathermap.conf configs/simple.conf
	mv ${WRKSRC}/$i ${WRKSRC}/$i-dist
.endfor

do-install:
	${INSTALL_DATA_DIR} ${INSTDIR}
	cd ${WRKSRC}; pax -rw * ${INSTDIR}
	${INSTALL_DATA} ${FILESDIR}/editor-config.php-dist ${INSTDIR}
	chown -R ${SHAREOWN}:${SHAREGRP} ${INSTDIR}
	chmod -R u=rwX,og=rX ${INSTDIR}
	find ${INSTDIR} -name '*.orig' -print0 | xargs -0r rm

.include <bsd.port.mk>
@


1.16
log
@bump REVISION for php version switch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/08/12 04:11:20 robert Exp $
d7 1
a7 1
REVISION=	1
@


1.15
log
@bump REVISION due to the php update
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/07/05 07:44:59 jasper Exp $
d7 1
a7 1
REVISION=	0
@


1.14
log
@use ${VARBASE} instead of hardcoding /var
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/04/22 14:05:07 sthen Exp $
d7 1
@


1.13
log
@update to php-weathermap 0.97c; various fixes including SECURITY fixes
to improve input validation in the editor (which is not enabled by default)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/03/11 11:35:54 espie Exp $
d29 1
a29 1
PREFIX=		/var/www
@


1.12
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2011/11/16 15:56:37 robert Exp $
d5 1
a5 2
DISTNAME=	php-weathermap-0.97a
REVISION=	6
a38 1
	chmod 644 ${WRKSRC}/editor.*
d46 1
d48 2
@


1.11
log
@switch php to version 5.3 by default
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2011/09/27 11:15:00 sthen Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d25 1
a25 1
NO_REGRESS=	Yes
@


1.10
log
@Add a few patches to php-weathermap, making the editor easier to handle.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2011/09/27 10:02:02 sthen Exp $
d6 1
a6 1
REVISION=	5
@


1.9
log
@${LOCALBASE}/bin/php is no good any more, use MODPHP_BIN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/09/16 11:13:39 espie Exp $
d6 1
a6 1
REVISION=	4
@


1.8
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/07/22 10:20:10 sthen Exp $
d6 1
a6 1
REVISION=	3
d38 1
a38 1
	perl -pi -e 's,^#!/usr/bin/php,#!${LOCALBASE}/bin/php,;' \
@


1.7
log
@Bump for PKGSPEC changes in ports/lang/php/Makefile.inc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2011/07/08 22:31:59 robert Exp $
d6 1
a6 1
REVISION=	2
@


1.6
log
@switch to lang/php
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/11/19 22:31:37 espie Exp $
d6 1
a6 1
REVISION=	1
@


1.5
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/07/12 22:07:40 sthen Exp $
d6 1
a6 1
REVISION=	0
d23 2
d26 1
a26 2
		www/php5/extensions,-gd \
		www/php5/core
@


1.4
log
@use REVISION, checked with before/after make show=PKGNAMES (plus some
extra-careful checking where there are complicated PSEUDO_FLAVORS).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/04/11 15:11:00 sthen Exp $
d23 3
a25 3
RUN_DEPENDS=	:pear-*:www/pear \
		:php5-gd-*:www/php5/extensions,-gd \
		:php5-core-*:www/php5/core
@


1.3
log
@fix some paths.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2010/03/27 00:00:49 sthen Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.2
log
@update to 0.97a
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/11/11 21:10:33 sthen Exp $
d6 1
d35 5
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.54 2008/01/13 16:43:57 espie Exp $
d5 1
a5 1
DISTNAME=	php-weathermap-0.96a
@


1.1.1.1
log
@import ports/net/php-weathermap

Weathermap is a network visualisation tool, to take data you already
have and show you an overview of your network in map form.  Extensive
customisation features and an optional map editor are provided.

Support is built in for RRD, MRTG (RRD and old log-format), and
tab-delimited text files. Other sources are via plugins or external
scripts. Weathermap can also be integrated with Cacti.
@
text
@@
