head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.16
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.14
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.12
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.8
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.10
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.6
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.4
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2013.08.16.10.05.55;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.19.23.13.50;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to poco 1.4.6p1, tested by sebastia@@ on pre-64bit-time_t, probably
fixes this with 64bit time_t (though further testing needed)
@
text
@$OpenBSD$
--- Foundation/src/pcre_internal.h.orig	Tue Mar 19 21:09:11 2013
+++ Foundation/src/pcre_internal.h	Tue Mar 19 21:36:16 2013
@@@@ -1109,6 +1109,17 @@@@ typedef struct {
 } ucp_type_table;
 
 
+/* renamed to avoid clashes with system pcre */
+#define _pcre_utf8_table1      _poco__pcre_utf8_table1
+#define _pcre_utf8_table1_size _poco__pcre_utf8_table1_size
+#define _pcre_utf8_table2      _poco__pcre_utf8_table2
+#define _pcre_utf8_table3      _poco__pcre_utf8_table3
+#define _pcre_utf8_table4      _poco__pcre_utf8_table4
+#define _pcre_utt              _poco__pcre_utt
+#define _pcre_utt_size         _poco__pcre_utt_size
+#define _pcre_utt_names        _poco__pcre_utt_names
+#define _pcre_OP_lengths       _poco__pcre_OP_lengths
+
 /* Internal shared data tables. These are tables that are used by more than one
 of the exported public functions. They have to be "external" in the C sense,
 but are not part of the PCRE public API. The data for these tables is in the
@@@@ -1152,6 +1163,12 @@@@ typedef struct {
   uschar chartype;
   pcre_int32 other_case;
 } ucd_record;
+
+/* renamed to avoid clashes with system pcre */
+#define _pcre_ucd_records _poco__pcre_ucd_records
+#define _pcre_ucd_stage1 _poco__pcre_ucd_stage1
+#define _pcre_ucd_stage2 _poco__pcre_ucd_stage2
+#define _pcre_ucp_gentype _poco__pcre_ucp_gentype
 
 extern const ucd_record  _pcre_ucd_records[];
 extern const uschar      _pcre_ucd_stage1[];
@


1.1
log
@Fix net/poco following the pcre update (broken for 2 weeks) by using
a patch from Gentoo.

While there clean up Makefile a bit (mixed whitespace format ugliness) and
simplify a patch (just use upstream's existing sysconf code, rather than
workaround the unportable use of sysctlbyname).
@
text
@d2 2
a3 5

http://sources.gentoo.org/cgi-bin/viewvc.cgi/gentoo-x86/dev-libs/poco/files/poco-1.4.4-patch-for-libpcre-8.32.patch

--- Foundation/src/pcre_internal.h.orig	Thu Dec 16 05:43:25 2010
+++ Foundation/src/pcre_internal.h	Tue Mar 19 22:19:37 2013
@

