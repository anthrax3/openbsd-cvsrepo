head	1.5;
access;
symbols
	OPENBSD_5_3:1.4.0.6
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.4
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.4
	OPENBSD_5_1:1.4.0.2
	OPENBSD_5_0:1.3.0.4
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.2
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.2.0.2
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.1.0.2
	OPENBSD_4_7_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2013.04.20.16.22.55;	author sthen;	state dead;
branches;
next	1.4;

1.4
date	2012.01.12.08.15.30;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2010.08.30.18.32.20;	author fkr;	state Exp;
branches;
next	1.2;

1.2
date	2010.07.08.09.18.25;	author fkr;	state Exp;
branches;
next	1.1;

1.1
date	2009.11.26.22.55.27;	author fkr;	state Exp;
branches;
next	;


desc
@@


1.5
log
@update to OpenVPN 2.31, from Bjorn Ketelaars, maintainer timeout
@
text
@$OpenBSD: patch-options_c,v 1.4 2012/01/12 08:15:30 sthen Exp $
--- options.c.orig	Fri Jun 24 07:13:39 2011
+++ options.c	Fri Jul  8 14:30:59 2011
@@@@ -265,6 +265,7 @@@@ static const char usage_message[] =
   "--sndbuf size   : Set the TCP/UDP send buffer size.\n"
   "--rcvbuf size   : Set the TCP/UDP receive buffer size.\n"
   "--txqueuelen n  : Set the tun/tap TX queue length to n (Linux only).\n"
+  "--rtable n      : Set the routing table (default=0, OpenBSD only)\n"
   "--mlock         : Disable Paging -- ensures key material and tunnel\n"
   "                  data will never be written to disk.\n"
   "--up cmd        : Shell cmd to execute after successful tun device open.\n"
@@@@ -1282,6 +1283,7 @@@@ show_settings (const struct options *o)
 #endif
   SHOW_INT (rcvbuf);
   SHOW_INT (sndbuf);
+  SHOW_INT (rtable);
   SHOW_INT (sockflags);
 
   SHOW_BOOL (fast_io);
@@@@ -4216,6 +4218,11 @@@@ add_option (struct options *options,
     {
       VERIFY_PERMISSION (OPT_P_SOCKBUF);
       options->sndbuf = positive_atoi (p[1]);
+    }
+  else if (streq (p[0], "rtable") && p[1])
+    {
+      VERIFY_PERMISSION (OPT_P_SOCKFLAGS);
+      options->rtable = positive_atoi (p[1]);
     }
   else if (streq (p[0], "socket-flags"))
     {
@


1.4
log
@update to OpenVPN 2.2.2, ok fkr@@
@
text
@d1 1
a1 1
$OpenBSD: patch-options_c,v 1.3 2010/08/30 18:32:20 fkr Exp $
@


1.3
log
@update to OpenVPN 2.1.2
while here, enable dropping to _openvpn user in the sample configs.
ok and feedback ajacoutot@@
@
text
@d1 4
a4 4
$OpenBSD: patch-options_c,v 1.2 2010/07/08 09:18:25 fkr Exp $
--- options.c.orig	Tue Jul 27 23:44:34 2010
+++ options.c	Sun Aug 22 16:10:23 2010
@@@@ -254,6 +254,7 @@@@ static const char usage_message[] =
d12 1
a12 1
@@@@ -1261,6 +1262,7 @@@@ show_settings (const struct options *o)
d20 1
a20 1
@@@@ -4169,6 +4171,11 @@@@ add_option (struct options *options,
@


1.2
log
@unbreak and adopt to the changes to rdomains/rtables in -current.
feedback and ok sthen@@
@
text
@d1 4
a4 4
$OpenBSD: patch-options_c,v 1.1 2009/11/26 22:55:27 fkr Exp $
--- options.c.orig	Fri Dec 11 09:09:39 2009
+++ options.c	Thu Jul  8 07:15:14 2010
@@@@ -250,6 +250,7 @@@@ static const char usage_message[] =
d12 1
a12 1
@@@@ -1253,6 +1254,7 @@@@ show_settings (const struct options *o)
d20 1
a20 1
@@@@ -3989,6 +3991,11 @@@@ add_option (struct options *options,
@


1.1
log
@update to OpenVPN 2.1rc22.
rdomain support from Laurent Ghigonis.

tested by various.

ok bernd@@, benoit@@
@
text
@d1 3
a3 3
$OpenBSD$
--- options.c.orig	Fri Nov 20 13:09:14 2009
+++ options.c	Fri Nov 20 23:38:08 2009
d8 1
a8 1
+  "--rdomain n     : Set the routing domain (default=0, OpenBSD only)\n"
d16 1
a16 1
+  SHOW_INT (rdomain);
d25 1
a25 1
+  else if (streq (p[0], "rdomain") && p[1])
d28 1
a28 1
+      options->rdomain = positive_atoi (p[1]);
@

