head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.6
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.4
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.2
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.1.0.6
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.8
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.4
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.2
	OPENBSD_5_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.06.02.11.52.32;	author sthen;	state Exp;
branches;
next	1.1;
commitid	xWy08Q4Wf07QyLlo;

1.1
date	2014.03.22.23.05.43;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to pmacct-1.5.3
@
text
@$OpenBSD: patch-src_isis_isis_c,v 1.1 2014/03/22 23:05:43 sthen Exp $
--- src/isis/isis.c.orig	Tue Jan 12 14:59:07 2016
+++ src/isis/isis.c	Sat May 21 11:34:49 2016
@@@@ -820,7 +820,7 @@@@ void igp_daemon_map_initialize(char *filename, struct 
   pcap_t *p;
 
   if (config.debug && config.igp_daemon_map_msglog) {
-    p = pcap_open_dead(DLT_CHDLC, RECEIVE_LSP_BUFFER_SIZE+sizeof(struct chdlc_header)+sizeof(struct isis_fixed_hdr));
+    p = pcap_open_dead(DLT_C_HDLC, RECEIVE_LSP_BUFFER_SIZE+sizeof(struct chdlc_header)+sizeof(struct isis_fixed_hdr));
 
     if ((idmm_fd = pcap_dump_open(p, config.igp_daemon_map_msglog)) == NULL) {
       Log(LOG_ERR, "ERROR ( %s/core/ISIS ): Can not open igp_daemon_map_msglog '%s' (%s).\n",
@


1.1
log
@Update to pmacct 1.5.0rc2 (old version in the ports tree could read
netflow v9 but not IPFIX). Follow upstream and use threads by default,
roll in the flavour with an @@pkgpath (though we didn't build packages
with threads enabled anyway).
@
text
@d1 4
a4 13
$OpenBSD$
--- src/isis/isis.c.orig	Sun Mar 16 01:29:27 2014
+++ src/isis/isis.c	Sun Mar 16 01:32:53 2014
@@@@ -645,7 +645,7 @@@@ void igp_daemon_map_validate(char *filename, struct pl
 
       memset(isis_dgram, 0, sizeof(isis_dgram));
 
-      /* can't use DLT_RAW for IS-IS, let's use DLT_CHDLC */
+      /* can't use DLT_RAW for IS-IS, let's use DLT_C_HDLC */
       chdlc_hdr = (struct chdlc_header *) isis_dgram_ptr;
       chdlc_hdr->address = CHDLC_MCAST_ADDR;
       chdlc_hdr->control = CHDLC_FIXED_CONTROL;
@@@@ -819,7 +819,7 @@@@ void igp_daemon_map_initialize(char *filename, struct 
d12 1
a12 1
       Log(LOG_ERR, "ERROR ( default/core/ISIS ): Can not open igp_daemon_map_msglog '%s' (%s).\n",
@

