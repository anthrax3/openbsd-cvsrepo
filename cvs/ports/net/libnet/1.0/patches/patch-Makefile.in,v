head	1.3;
access;
symbols
	OPENBSD_6_2:1.3.0.6
	OPENBSD_6_2_BASE:1.3
	OPENBSD_6_1:1.3.0.4
	OPENBSD_6_1_BASE:1.3
	OPENBSD_6_0:1.3.0.2
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.2.0.40
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.42
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.38
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.36
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.34
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.32
	OPENBSD_5_4_BASE:1.2
	OPENBSD_5_3:1.2.0.30
	OPENBSD_5_3_BASE:1.2
	OPENBSD_5_2:1.2.0.28
	OPENBSD_5_2_BASE:1.2
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.26
	OPENBSD_5_0:1.2.0.24
	OPENBSD_5_0_BASE:1.2
	OPENBSD_4_9:1.2.0.22
	OPENBSD_4_9_BASE:1.2
	OPENBSD_4_8:1.2.0.20
	OPENBSD_4_8_BASE:1.2
	OPENBSD_4_7:1.2.0.18
	OPENBSD_4_7_BASE:1.2
	OPENBSD_4_6:1.2.0.16
	OPENBSD_4_6_BASE:1.2
	OPENBSD_4_5:1.2.0.14
	OPENBSD_4_5_BASE:1.2
	OPENBSD_4_4:1.2.0.12
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.10
	OPENBSD_4_3_BASE:1.2
	OPENBSD_4_2:1.2.0.8
	OPENBSD_4_2_BASE:1.2
	OPENBSD_4_1:1.2.0.6
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.2.0.4
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.2
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.1.0.2
	OPENBSD_3_8_BASE:1.1;
locks; strict;
comment	@# @;


1.3
date	2016.03.11.18.13.19;	author naddy;	state Exp;
branches;
next	1.2;
commitid	Mg9tFa8Hyu6kCvoX;

1.2
date	2005.12.31.14.03.28;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2005.05.23.23.50.40;	author msf;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove NO_SHARED_LIBS
@
text
@--- Makefile.in.orig	Mon Feb  5 18:51:41 2001
+++ Makefile.in	Fri Mar 11 19:04:57 2016
@@@@ -14,8 +14,8 @@@@ prefix      =   @@prefix@@
 exec_prefix =   @@exec_prefix@@
 srcdir      =   @@srcdir@@
 BIN_PREFIX  =   @@bindir@@/
-INC_PREFIX  =   @@includedir@@/
-LIB_PREFIX  =   @@libdir@@/
+INC_PREFIX  =   @@includedir@@/libnet-1.0/
+LIB_PREFIX  =   @@libdir@@/libnet-1.0/
 MAN_PREFIX  =   @@MAN_PREFIX@@
 
 LIBNET      =   libnet
@@@@ -36,7 +36,7 @@@@ AR          =   @@AR@@
 LN          =   @@LN@@
 CC          =   @@CC@@
 ENSUREDIR   =   $(srcdir)/ensure-dir.sh
-INSTALL_DATA=   $(srcdir)/install-sh
+INSTALL_DATA=   @@INSTALL@@
 CFLAGS      =   @@CFLAGS@@
 CPPFLAGS    =   @@CPPFLAGS@@
 OBJECTS     =   src/libnet_resolve.o\
@@@@ -66,17 +66,28 @@@@ OBJECTS     =   src/libnet_resolve.o\
 		src/libnet_hex_dump.o\
 		src/libnet_if_addr.o\
 		src/libnet_port_list.o 
+SHOBJECTS=	$(OBJECTS:S/.o/.so/)
 
+PICFLAG= -fpic
+SHLIB= $(LIBNET).so.$(LIBnet_VERSION)
+
+.SUFFIXES: .o .so
+
 .c.o:
 	$(CC) $(CFLAGS) $(CPPFLAGS) $(DEFINES) -c $< -o $@@
 
-all: libnet
+.c.so:
+	$(CC) $(CFLAGS) $(CPPFLAGS) $(DEFINES) $(PICFLAG) -DPIC -c $< -o $@@
+
 supp: test example
 
 libnet: version.h $(OBJECTS)
 	$(AR) -cr $(LIB) $(OBJECTS)
 	$(RANLIB) $(LIB)
 
+$(SHLIB): version.h $(SHOBJECTS)
+	$(CC) -shared $(PICFLAG) -o $(SHLIB) $(SHOBJECTS)
+
 version.o: version.h
 version.h: ./VERSION
 	@@rm -f $@@
@@@@ -91,25 +102,29 @@@@ util:    libnet install
 example: libnet install
 	cd example; make
 
-install: libnet
+all: libnet $(SHLIB)
+install: libnet $(SHLIB)
 	$(ENSUREDIR) $(DESTDIR)$(prefix) 755
 	$(ENSUREDIR) $(DESTDIR)$(LIB_PREFIX) 755
 	$(ENSUREDIR) $(DESTDIR)$(INC_PREFIX)$(LIBNET) 755
 	$(ENSUREDIR) $(DESTDIR)$(INC_PREFIX) 755
 	$(ENSUREDIR) $(DESTDIR)$(MAN_PREFIX) 755
 	$(ENSUREDIR) $(DESTDIR)$(BIN_PREFIX) 755
-	$(INSTALL_DATA) $(LIB) $(DESTDIR)$(LIB_PREFIX)
+	$(INSTALL_DATA) -m 0644 $(LIB) $(DESTDIR)$(LIB_PREFIX)
 	rm -f $(DESTDIR)$(LIB_PREFIX)$(LIBPWRITE).a
 	cd $(DESTDIR)$(LIB_PREFIX); $(LN) -f -s $(LIBNET).a $(LIBPWRITE).a
-	$(INSTALL_DATA) $(INCLUDE) $(DESTDIR)$(INC_PREFIX)
-	$(INSTALL_DATA) $(INCLUDE-H) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
-	$(INSTALL_DATA) $(INCLUDE-F) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
-	$(INSTALL_DATA) $(INCLUDE-S) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
-	$(INSTALL_DATA) $(INCLUDE-M) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
-	$(INSTALL_DATA) $(INCLUDE-A) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
-	$(INSTALL_DATA) $(INCLUDE-O) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
-	$(INSTALL_DATA) $(MAN) $(DESTDIR)$(MAN_PREFIX)
-	$(INSTALL_DATA) $(CONFIG) $(DESTDIR)$(BIN_PREFIX)
+	@@if [ -f $(SHLIB) ]; then \
+	   $(INSTALL_DATA) -m 0644 $(SHLIB) $(DESTDIR)$(LIB_PREFIX) ;\
+	fi
+	$(INSTALL_DATA) -m 0644 $(INCLUDE) $(DESTDIR)$(INC_PREFIX)
+	$(INSTALL_DATA) -m 0644 $(INCLUDE-H) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
+	$(INSTALL_DATA) -m 0644 $(INCLUDE-F) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
+	$(INSTALL_DATA) -m 0644 $(INCLUDE-S) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
+	$(INSTALL_DATA) -m 0644 $(INCLUDE-M) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
+	$(INSTALL_DATA) -m 0644 $(INCLUDE-A) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
+	$(INSTALL_DATA) -m 0644 $(INCLUDE-O) $(DESTDIR)$(INC_PREFIX)$(LIBNET)
+	$(INSTALL_DATA) -m 0644 $(MAN) $(DESTDIR)$(MAN_PREFIX)
+	$(INSTALL_DATA) -m 0755 $(CONFIG) $(DESTDIR)$(BIN_PREFIX)/libnet-config-1.0
 
 
 
@


1.2
log
@SHARED_LIBS
@
text
@d1 2
a2 2
--- Makefile.in.orig	Mon Feb  5 12:51:41 2001
+++ Makefile.in	Fri Sep 10 16:04:46 2004
d53 1
a53 1
@@@@ -91,25 +102,34 @@@@ util:    libnet install
d57 1
a57 4
+.if defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes"
+all: libnet
 install: libnet
+.else
a59 1
+.endif
@


1.1
log
@- split libnet port into two versions
- worked on by myself, pvalchev and mjc

"put it in" pvalchev@@
@
text
@d30 1
a30 1
+SHLIB= $(LIBNET).so.0.0
@

