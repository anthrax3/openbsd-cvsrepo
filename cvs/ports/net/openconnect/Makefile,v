head	1.43;
access;
symbols
	OPENBSD_6_1:1.40.0.2
	OPENBSD_6_1_BASE:1.40
	OPENBSD_6_0:1.35.0.2
	OPENBSD_6_0_BASE:1.35
	OPENBSD_5_9:1.34.0.2
	OPENBSD_5_9_BASE:1.34
	OPENBSD_5_8:1.34.0.4
	OPENBSD_5_8_BASE:1.34
	OPENBSD_5_7:1.32.0.2
	OPENBSD_5_7_BASE:1.32
	OPENBSD_5_6:1.27.0.2
	OPENBSD_5_6_BASE:1.27
	OPENBSD_5_5:1.23.0.2
	OPENBSD_5_5_BASE:1.23
	OPENBSD_5_4:1.21.0.2
	OPENBSD_5_4_BASE:1.21
	OPENBSD_5_3:1.16.0.2
	OPENBSD_5_3_BASE:1.16
	OPENBSD_5_2:1.9.0.2
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.2
	OPENBSD_5_1:1.2.0.2
	sthen_20110812:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.43
date	2017.07.26.22.45.28;	author sthen;	state Exp;
branches;
next	1.42;
commitid	tD4MFrpYYDDL2UFT;

1.42
date	2017.07.16.19.18.58;	author espie;	state Exp;
branches;
next	1.41;
commitid	tt0GhWK5c4uf9ILG;

1.41
date	2017.04.10.11.46.32;	author sthen;	state Exp;
branches;
next	1.40;
commitid	HY6VNZxjJWzKQFDV;

1.40
date	2017.02.18.17.33.51;	author ajacoutot;	state Exp;
branches;
next	1.39;
commitid	kjw4RQ4AAUYktD89;

1.39
date	2017.02.18.17.32.37;	author ajacoutot;	state Exp;
branches;
next	1.38;
commitid	bw6Y0vDo3oixdVWL;

1.38
date	2016.12.13.21.44.14;	author sthen;	state Exp;
branches;
next	1.37;
commitid	5LjkOrArIepSwohQ;

1.37
date	2016.12.02.17.38.33;	author sthen;	state Exp;
branches;
next	1.36;
commitid	nVoYMS7r8ZZwwNqF;

1.36
date	2016.08.12.13.28.49;	author sthen;	state Exp;
branches;
next	1.35;
commitid	cV0PsHAR6rae92q6;

1.35
date	2016.07.08.16.48.21;	author sthen;	state Exp;
branches;
next	1.34;
commitid	nub6DuMueL8Y4KAR;

1.34
date	2015.03.18.15.10.32;	author sthen;	state Exp;
branches;
next	1.33;
commitid	G6fHwwyZndibL6Cb;

1.33
date	2015.03.14.21.25.25;	author sthen;	state Exp;
branches;
next	1.32;
commitid	T0CKHENDMZUMCJnI;

1.32
date	2015.02.17.12.13.57;	author sthen;	state Exp;
branches;
next	1.31;
commitid	G1C1fCXl3jl3IOPZ;

1.31
date	2015.01.26.10.59.21;	author sthen;	state Exp;
branches;
next	1.30;
commitid	NPxg3Dg5LJLQZcmR;

1.30
date	2015.01.26.10.43.26;	author sthen;	state Exp;
branches;
next	1.29;
commitid	foSgGjIWezee2pQV;

1.29
date	2015.01.09.18.39.18;	author sthen;	state Exp;
branches;
next	1.28;
commitid	1hj3ewksgEi34rDH;

1.28
date	2014.12.12.21.51.07;	author sthen;	state Exp;
branches;
next	1.27;
commitid	ntmVFWc28f4gZ3QX;

1.27
date	2014.07.09.10.28.49;	author sthen;	state Exp;
branches;
next	1.26;
commitid	vBs6mcJOAx0SPwCs;

1.26
date	2014.04.17.14.57.36;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2014.04.01.11.40.12;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2014.03.26.14.19.07;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2014.01.02.11.54.43;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2013.09.06.16.28.48;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2013.06.01.21.46.37;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2013.05.16.12.35.35;	author sthen;	state Exp;
branches;
next	1.19;

1.19
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.18;

1.18
date	2013.03.11.11.35.50;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2013.03.04.15.39.31;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2013.02.11.21.16.33;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2012.12.20.21.23.43;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2012.11.08.16.44.21;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2012.08.31.13.59.01;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2012.08.31.13.41.28;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2012.08.31.12.30.56;	author sthen;	state Exp;
branches;
next	1.10;

1.10
date	2012.08.23.16.43.10;	author sthen;	state Exp;
branches;
next	1.9;

1.9
date	2012.07.12.23.10.23;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2012.07.08.13.13.26;	author sthen;	state Exp;
branches;
next	1.7;

1.7
date	2012.07.05.15.22.54;	author sthen;	state Exp;
branches;
next	1.6;

1.6
date	2012.07.02.15.20.15;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2012.06.28.15.43.21;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2012.03.29.15.00.19;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.03.29.13.38.48;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2012.01.16.22.58.54;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2011.12.08.13.55.28;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2011.12.08.13.55.28;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.43
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.42 2017/07/16 19:18:58 espie Exp $

COMMENT=	client for Cisco AnyConnect SSL VPN

DISTNAME=	openconnect-7.08
REVISION=	1

SHARED_LIBS +=  openconnect               4.3 # 5.4

CATEGORIES=	net

HOMEPAGE=	http://www.infradead.org/openconnect/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# LGPLv2.1 only
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c ffi gmp gnutls hogweed iconv idn2 intl lz4 lzma m
WANTLIB += nettle p11-kit pthread tasn1 xml2 z

MASTER_SITES=	ftp://ftp.infradead.org/pub/openconnect/

FLAVORS=	light
FLAVOR?=

MODULES=	lang/python
MODPY_RUNDEP=	No
# groff is used to format html during build, USE_GROFF not needed
# XXX can probably convert to using mandoc?
BUILD_DEPENDS=	devel/gettext-tools \
		textproc/groff \
		textproc/py-xml
RUN_DEPENDS=	net/vpnc-scripts
LIB_DEPENDS=	archivers/lz4 \
		devel/gettext \
		security/gnutls \
		textproc/libxml
# also wants socket_wrapper and uid_wrapper from cwrap to be present at
# configure time (in openbsd-wip); tests currently failing, in need of
# further work
TEST_DEPENDS=	net/ocserv

FAKE_FLAGS=	pkgdatadir=${PREFIX}/share/doc/openconnect

CONFIGURE_STYLE=	gnu

CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib -liconv"
CONFIGURE_ARGS=	--with-vpnc-script=${SYSCONFDIR}/vpnc-script \
		--without-stoken
# make sure libstoken isn't picked up automatically if we import it.

.if ${FLAVOR:Mlight}
CONFIGURE_ARGS+= --without-libpcsclite \
		--without-libproxy \
		--without-libpskc
.else
WANTLIB+=	ltdl pcsclite proxy pskc ${COMPILER_LIBCXX} xmlsec1 xslt
LIB_DEPENDS+=	net/libproxy>=0.4.6p7 \
		security/oath-toolkit,-pskc \
		security/pcsc-lite
.endif

pre-test:
	perl -pi -e s,/usr/sbin/ocserv,${LOCALBASE}/sbin/ocserv,g \
	    ${WRKSRC}/tests/common.sh

.include <bsd.port.mk>
@


1.42
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2017/04/10 11:46:32 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.41
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2017/02/18 17:33:51 ajacoutot Exp $
d59 1
a59 1
WANTLIB+=	ltdl pcsclite proxy pskc ${LIBCXX} xmlsec1 xslt
@


1.40
log
@Missed bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2017/02/18 17:32:37 ajacoutot Exp $
d59 1
a59 1
WANTLIB+=	ltdl pcsclite proxy pskc stdc++ xmlsec1 xslt
@


1.39
log
@idn -> idn2 after gnutls WANTLIB change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2016/12/13 21:44:14 sthen Exp $
d6 1
@


1.38
log
@update to openconnect-7.08
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2016/12/02 17:38:33 sthen Exp $
d18 1
a18 1
WANTLIB += c ffi gmp gnutls hogweed iconv idn intl lz4 lzma m
@


1.37
log
@- introduce a flavour for a version of openconnect with fewer dependencies
(no smartcard/libproxy support, etc)

- update DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2016/08/12 13:28:49 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-7.07
REVISION=	0
d7 1
a7 1
SHARED_LIBS +=  openconnect               4.2 # 5.1
d38 4
d63 4
@


1.36
log
@update to openconnect-7.07
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2016/07/08 16:48:21 sthen Exp $
d6 1
d19 2
a20 2
WANTLIB += c ffi gmp gnutls hogweed idn ltdl lz4 lzma m nettle p11-kit
WANTLIB += pcsclite proxy pskc pthread stdc++ tasn1 xml2 xmlsec1 xslt z
d24 4
a27 2
MODULES=	devel/gettext \
		lang/python
d31 2
a32 1
BUILD_DEPENDS=	textproc/groff \
d34 1
d36 1
d38 1
a38 5
		security/oath-toolkit,-pskc \
		security/pcsc-lite \
		textproc/libxml \
		net/libproxy>=0.4.6p7
RUN_DEPENDS=	net/vpnc-scripts
d49 11
@


1.35
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2015/03/18 15:10:32 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-7.06
REVISION=	0
@


1.34
log
@update to OpenConnect 7.06, pkg-config fix, improvements to experimental
Juniper Network Connect support, new translation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2015/03/14 21:25:25 sthen Exp $
d6 1
d19 1
a19 1
WANTLIB += c ffi gmp gnutls hogweed ltdl lz4 lzma m nettle oath p11-kit
d24 3
a26 3
MODULES=		devel/gettext \
			lang/python
MODPY_RUNDEP=		No
d29 9
a37 10
BUILD_DEPENDS=		textproc/groff \
			textproc/py-xml
LIB_DEPENDS=		archivers/lz4 \
			security/gnutls \
			security/oath-toolkit,-pskc \
			security/pcsc-lite \
			textproc/libxml \
			net/libproxy>=0.4.6p7 \
			security/oath-toolkit>=2.0.2
RUN_DEPENDS=		net/vpnc-scripts
d39 1
a39 1
FAKE_FLAGS=		pkgdatadir=${PREFIX}/share/doc/openconnect
@


1.33
log
@update to openconnect-7.05, adding experimental support for Juniper's
Network Connect ssl-vpn protocol. ("we'll probably end up also implementing
Junos Pulse support which actually provides IPv6 rather than only Legacy IP.
But not this week!")

also fix for LZS compression on strict alignment arches and various other
changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2015/02/17 12:13:57 sthen Exp $
d5 1
a5 1
DISTNAME=	openconnect-7.05
@


1.32
log
@Add a patch from OpenConnect upstream; "If we get an AC_PKT_DISCONN
message with no payload, just skip printing the disconnect reason."
Fixes printing junk and possibly crashing if the server goes away.

Tweak DESCR, mention the open-source server ocserv (port for this is
ready but holding in openbsd-wip until we're done with 5.7).

(Readers might be interested to note that 7.04 is probably the last
version of OpenConnect to only support Cisco's SSL-VPN protocol; the
next version will almost certainly add client support for Juniper's
protocol).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2015/01/26 10:59:21 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-7.04
REVISION=	0
d7 1
a7 1
SHARED_LIBS +=  openconnect               4.1 # 5.1
@


1.31
log
@update to OpenConnect 7.04 and tweak DESCR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2015/01/26 10:43:26 sthen Exp $
d6 1
@


1.30
log
@OpenConnect has hidden deps on pcsc-lite and oath-toolkit-pskc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2015/01/09 18:39:18 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-7.03
REVISION=	0
d7 1
a7 1
SHARED_LIBS +=  openconnect               4.0 # 5.0
d18 1
a18 1
WANTLIB += c ffi gmp gnutls hogweed ltdl lzma m nettle oath p11-kit
d30 2
a31 1
LIB_DEPENDS=		security/gnutls \
@


1.29
log
@update to openconnect 7.03
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2014/12/12 21:51:07 sthen Exp $
d6 1
d19 2
a20 2
WANTLIB += c gmp gnutls hogweed m nettle oath p11-kit proxy pthread
WANTLIB += stdc++ tasn1 xml2 z ffi
d32 2
@


1.28
log
@update to OpenConnect 7.01
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2014/07/09 10:28:49 sthen Exp $
d5 1
a5 1
DISTNAME=	openconnect-7.01
@


1.27
log
@update to OpenConnect 6.00
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2014/04/17 14:57:36 sthen Exp $
d5 1
a5 1
DISTNAME=	openconnect-6.00
d7 1
a7 1
SHARED_LIBS +=  openconnect               3.0 # 3.3
@


1.26
log
@oops, forgot to commit these; add a RUN_DEPENDS on vpnc-scripts which has
now been split off. Problem reported by Tomas Bodzar.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2014/04/01 11:40:12 sthen Exp $
d5 1
a5 3
DISTNAME=	openconnect-5.99
REVISION=	1
DIST_SUBDIR=	openconnect
d7 1
a7 1
SHARED_LIBS +=  openconnect               2.0 # 3.2
@


1.25
log
@switch to separate vpnc-scripts; ok/tweak rpe@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2014/03/26 14:19:07 sthen Exp $
d6 1
a6 1
REVISION=	0
d25 4
a28 1
# used to format html during build, USE_GROFF not needed
a31 4
MODULES=		devel/gettext \
			lang/python
MODPY_RUNDEP=		No

d36 2
@


1.24
log
@update to openconnect-5.99
http://www.infradead.org/openconnect/changelog.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2014/01/02 11:54:43 sthen Exp $
d6 1
a7 3
VPNC_SCRIPT=	vpnc-script
DISTFILES=	${DISTNAME}${EXTRACT_SUFX} ${VPNC_SCRIPT}:0
EXTRACT_ONLY=	${DISTNAME}${EXTRACT_SUFX}
a23 1
MASTER_SITES0=	http://git.infradead.org/users/dwmw2/vpnc-scripts.git/blob_plain/0e042c5ab78bd5dbeeb82b8570160c081fa8c3ff:/
d43 1
a43 1
CONFIGURE_ARGS=	--with-vpnc-script=${SYSCONFDIR}/openconnect/vpnc-script \
a45 8

post-extract:
	cp ${FULLDISTDIR}/${VPNC_SCRIPT} ${WRKSRC}/vpnc-script

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/openconnect/
	${INSTALL_SCRIPT} ${WRKSRC}/vpnc-script \
	    ${PREFIX}/share/examples/openconnect/
@


1.23
log
@update to OpenConnect 5.02

notable changes:
- workaround for XML POST issues with authgroups (full fix in a future
release, but this interim release has been made to avoid an ABI break)
- fix potential memory corruption which could be triggered by a malicious server
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2013/09/06 16:28:48 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	openconnect-5.02
d11 1
a11 1
SHARED_LIBS +=  openconnect               1.1 # 2.2
d29 1
@


1.22
log
@Sync WANTLIB after gnutls/p11-kit update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2013/06/01 21:46:37 sthen Exp $
d5 1
a5 1
DISTNAME=	openconnect-5.01
a9 1
REVISION=	0
@


1.21
log
@update to OpenConnect 5.01, some fixes, and adds a --no-xmlpost option to
fall back to using HTTP GET in case of interoperability bugs with the newer
XML based protocol over POST.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2013/05/16 12:35:35 sthen Exp $
d10 1
d24 1
a24 1
WANTLIB += stdc++ tasn1 xml2 z
@


1.20
log
@update to OpenConnect 5.00
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/21 08:46:35 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	openconnect-5.00
@


1.19
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2013/03/11 11:35:50 espie Exp $
d5 1
a5 1
DISTNAME=	openconnect-4.08
d11 1
a11 1
SHARED_LIBS +=  openconnect               1.0 # 2.0
d22 1
a22 1
WANTLIB += c gmp gnutls hogweed m nettle p11-kit proxy pthread
d37 2
a38 1
			net/libproxy>=0.4.6p7
d42 6
a47 4
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib -liconv"
CONFIGURE_ARGS=		--with-vpnc-script=${SYSCONFDIR}/openconnect/vpnc-script \
			--with-gnutls
@


1.18
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2013/03/04 15:39:31 sthen Exp $
a39 1
USE_LIBTOOL=		Yes
@


1.17
log
@update to openconnect 4.08, rolling in a security fix which we previously
had as a patch, plus a couple of additional bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2013/02/11 21:16:33 sthen Exp $
a20 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.16
log
@Cherrypick OpenConnect fix; use a dynamically allocated buffer rather than
a fixed stack buffer when constructing HTTP requests. Prevents an overflow
if a malicious VPN gateway sends a very long hostname/path (for redirects)
or cookie list. (There is a newer release of OpenConnect which includes
this fix, but also some bigger code changes, so that will wait until we
are done with 5.3 release).  ok aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2012/12/20 21:23:43 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-4.07
REVISION=	1
@


1.15
log
@build depends on py-xml
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2012/11/08 16:44:21 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.14
log
@Tweak the OpenConnect port: update vpnc-script, enable NLS (gettext
was already pulled in via libs, so no new deps), and avoid SEPARATE_BUILD
for now as the code to detect a version mismatch between binary and lib
in this version doesn't handle it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2012/08/31 13:59:01 sthen Exp $
d33 2
a34 1
BUILD_DEPENDS=		textproc/groff
@


1.13
log
@update to OpenConnect 4.07, fixes handling of CSTP write stalls
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2012/08/31 13:41:28 sthen Exp $
d6 1
d30 1
a30 1
MASTER_SITES0=	http://git.infradead.org/users/dwmw2/vpnc-scripts.git/blob_plain/d19a327c74f824114c5c72101104891fe881a7da:/
a42 1
SEPARATE_BUILD=		Yes
d45 2
@


1.12
log
@sync patch with upstream; drop check for config_arg being NULL,
since that's impossible now the getopt string is fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/08/31 12:30:56 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-4.06
REVISION=	1
@


1.11
log
@Don't crash with -p without a password, problem reported by Rodolfo Gouveia
(getopt string bug, fix is committed upstream too)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/08/23 16:43:10 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.10
log
@update to OpenConnect 4.06, sitting in my tree since lock, a diff from
Rodolfo Gouveia reminded me about this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2012/07/12 23:10:23 sthen Exp $
d6 1
@


1.9
log
@update to OpenConnect 4.05
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2012/07/08 13:13:26 sthen Exp $
d5 1
a5 1
DISTNAME=	openconnect-4.05
@


1.8
log
@- switch OpenConnect to using gnutls now that we have version 3
- fix default path to vpnc-script
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/07/05 15:22:54 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-4.04
REVISION=	0
@


1.7
log
@update to OpenConnect 4.04
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/07/02 15:20:15 sthen Exp $
d6 1
d26 2
a27 1
WANTLIB += c crypto m proxy pthread ssl stdc++ xml2 z
d34 1
a34 1
MODULES=		converters/libiconv \
d38 2
a39 1
LIB_DEPENDS=		textproc/libxml \
d46 2
a47 1
CONFIGURE_ARGS=		--with-vpnc-script=${SYSCONFDIR}/vpnc/vpnc-script
@


1.6
log
@update to OpenConnect 4.03
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/06/28 15:43:21 sthen Exp $
d5 1
a5 1
DISTNAME=	openconnect-4.03
@


1.5
log
@update to OpenConnect 4.02

- thanks to David Woodhouse (upstream) for quickly fixing a build
problem I ran into with 4.01.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/03/29 15:00:19 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	openconnect-4.02
@


1.4
log
@Sync dependencies after libproxy update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/03/29 13:38:48 sthen Exp $
d5 1
a5 2
DISTNAME=	openconnect-3.15
REVISION=	1
d11 1
a11 1
SHARED_LIBS +=  openconnect               0.0 # 1.2
d43 1
@


1.3
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/01/16 22:58:54 sthen Exp $
d6 1
a6 1
REVISION=	0
d26 1
a26 1
WANTLIB += c crypto m modman proxy pthread ssl stdc++ xml2 z
@


1.2
log
@pick a few patches to OpenConnect from upstream repo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2011/12/08 13:55:28 sthen Exp $
d41 1
a41 1
SEPARATE_BUILD=		simple
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.54 2008/01/13 16:43:57 espie Exp $
d6 1
@


1.1.1.1
log
@import ports/net/openconnect:

OpenConnect is a client for Cisco's AnyConnect SSL VPN, which is
supported by the ASA5500 Series, IOS 12.4(9)T or later on Cisco SR500,
870, 880, 1800, 2800, 3800, 7200 Series and 7301 Routers, and probably
others. Features include:

- Connection through HTTP/SOCKS5 proxy.
- Automatic detection of IPv4 and IPv6 address, routes.
- Authentication via HTTP forms.
- Authentication using SSL certificates.
- Data transport over TCP (HTTPS) or UDP (DTLS).
- Keepalive and Dead Peer Detection on both HTTPS and DTLS.
- Automatic update of VPN server list / configuration.
- Roaming support, allowing reconnection when the local
  IP address changes.

ok/tweaks jasper@@, and *big* thanks to upstream developer David Woodhouse
for letting me have access to his test server, noticing+tracking down
problems with vpnc-script when configuring v6 addresses on tun on OpenBSD,
and testing the fix for this on a range of OS.
@
text
@@
