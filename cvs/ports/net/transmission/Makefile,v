head	1.115;
access;
symbols
	OPENBSD_6_1:1.112.0.2
	OPENBSD_6_1_BASE:1.112
	OPENBSD_6_0:1.105.0.2
	OPENBSD_6_0_BASE:1.105
	OPENBSD_5_9:1.101.0.2
	OPENBSD_5_9_BASE:1.101
	OPENBSD_5_8:1.98.0.4
	OPENBSD_5_8_BASE:1.98
	OPENBSD_5_7:1.96.0.2
	OPENBSD_5_7_BASE:1.96
	OPENBSD_5_6:1.95.0.2
	OPENBSD_5_6_BASE:1.95
	OPENBSD_5_5:1.93.0.2
	OPENBSD_5_5_BASE:1.93
	OPENBSD_5_4:1.88.0.2
	OPENBSD_5_4_BASE:1.88
	OPENBSD_5_3:1.81.0.2
	OPENBSD_5_3_BASE:1.81
	OPENBSD_5_2:1.77.0.2
	OPENBSD_5_2_BASE:1.77
	OPENBSD_5_1_BASE:1.73
	OPENBSD_5_1:1.73.0.2
	OPENBSD_5_0:1.66.0.2
	OPENBSD_5_0_BASE:1.66
	OPENBSD_4_9:1.65.0.2
	OPENBSD_4_9_BASE:1.65
	OPENBSD_4_8:1.54.0.2
	OPENBSD_4_8_BASE:1.54
	OPENBSD_4_7:1.50.0.2
	OPENBSD_4_7_BASE:1.50
	OPENBSD_4_6:1.38.0.2
	OPENBSD_4_6_BASE:1.38
	OPENBSD_4_5:1.30.0.2
	OPENBSD_4_5_BASE:1.30
	OPENBSD_4_4:1.27.0.2
	OPENBSD_4_4_BASE:1.27
	OPENBSD_4_3:1.21.0.2
	OPENBSD_4_3_BASE:1.21
	OPENBSD_4_2:1.9.0.2
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.8.0.2
	OPENBSD_4_1_BASE:1.8
	OPENBSD_4_0:1.4.0.2
	OPENBSD_4_0_BASE:1.4
	naddy_20060426:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.115
date	2017.05.15.18.51.38;	author espie;	state Exp;
branches;
next	1.114;
commitid	KaagMilx2sheXC0p;

1.114
date	2017.05.13.17.40.26;	author espie;	state Exp;
branches;
next	1.113;
commitid	3mLn9XfSs8pJCxh2;

1.113
date	2017.04.19.11.16.03;	author sthen;	state Exp;
branches;
next	1.112;
commitid	RQY4uecaoLumt4eI;

1.112
date	2017.01.11.13.44.33;	author jasper;	state Exp;
branches;
next	1.111;
commitid	61VLFHZUokYLlN6N;

1.111
date	2016.12.28.13.53.29;	author zhuk;	state Exp;
branches;
next	1.110;
commitid	IwLH3xDAmNaymSFR;

1.110
date	2016.12.27.20.36.42;	author kili;	state Exp;
branches;
next	1.109;
commitid	94bcacP8VFhqwpdf;

1.109
date	2016.12.25.14.34.39;	author zhuk;	state Exp;
branches;
next	1.108;
commitid	l6KSNN1DfB6ABkhu;

1.108
date	2016.11.04.11.35.20;	author sthen;	state Exp;
branches;
next	1.107;
commitid	Gg5LRcnQlqj5M3F7;

1.107
date	2016.09.21.10.52.51;	author sthen;	state Exp;
branches;
next	1.106;
commitid	wrtoBg5rg8AwxxaC;

1.106
date	2016.09.01.10.53.27;	author jasper;	state Exp;
branches;
next	1.105;
commitid	LdsIxWmxagN2Kq33;

1.105
date	2016.04.11.20.00.51;	author naddy;	state Exp;
branches;
next	1.104;
commitid	03ca8aBxMIK8CoUa;

1.104
date	2016.03.27.16.19.17;	author zhuk;	state Exp;
branches;
next	1.103;
commitid	2eeYVH6NVDczJne3;

1.103
date	2016.03.27.16.16.50;	author zhuk;	state Exp;
branches;
next	1.102;
commitid	NpOXAp6oMaGw9YZh;

1.102
date	2016.03.08.16.14.16;	author naddy;	state Exp;
branches;
next	1.101;
commitid	lokzsidrGntEwdU5;

1.101
date	2015.10.30.12.47.40;	author sthen;	state Exp;
branches;
next	1.100;
commitid	IIzCiS5xiW9Dmxlk;

1.100
date	2015.08.25.14.03.21;	author sthen;	state Exp;
branches;
next	1.99;
commitid	8u6wAbmxSoakT67t;

1.99
date	2015.08.21.10.14.56;	author naddy;	state Exp;
branches;
next	1.98;
commitid	ZNvj6a3N4B9SZcJL;

1.98
date	2015.04.04.09.21.03;	author ajacoutot;	state Exp;
branches;
next	1.97;
commitid	kS3kwKZogsvzYmEY;

1.97
date	2015.03.27.08.13.04;	author ajacoutot;	state Exp;
branches;
next	1.96;
commitid	qkrQPO6KjSKIuf3s;

1.96
date	2014.09.12.17.18.44;	author brad;	state Exp;
branches;
next	1.95;
commitid	O0BvjaNBfP2MNBZx;

1.95
date	2014.07.21.14.59.17;	author naddy;	state Exp;
branches;
next	1.94;
commitid	9hXmbJkl95NmKRBp;

1.94
date	2014.06.01.11.37.06;	author naddy;	state Exp;
branches;
next	1.93;
commitid	N8GlxLfNxfpe39qg;

1.93
date	2014.02.03.13.30.52;	author dcoppa;	state Exp;
branches
	1.93.2.1;
next	1.92;

1.92
date	2013.11.18.16.51.23;	author naddy;	state Exp;
branches;
next	1.91;

1.91
date	2013.10.31.21.12.13;	author sthen;	state Exp;
branches;
next	1.90;

1.90
date	2013.08.22.17.34.32;	author naddy;	state Exp;
branches;
next	1.89;

1.89
date	2013.08.09.19.13.08;	author naddy;	state Exp;
branches;
next	1.88;

1.88
date	2013.07.12.17.03.59;	author naddy;	state Exp;
branches;
next	1.87;

1.87
date	2013.05.31.15.34.53;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2013.04.17.10.52.46;	author naddy;	state Exp;
branches;
next	1.85;

1.85
date	2013.04.01.16.01.21;	author naddy;	state Exp;
branches;
next	1.84;

1.84
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2013.03.20.20.18.07;	author naddy;	state Exp;
branches;
next	1.82;

1.82
date	2013.03.11.11.35.57;	author espie;	state Exp;
branches;
next	1.81;

1.81
date	2013.01.10.18.11.00;	author brad;	state Exp;
branches;
next	1.80;

1.80
date	2012.12.20.20.30.54;	author naddy;	state Exp;
branches;
next	1.79;

1.79
date	2012.10.27.10.55.53;	author naddy;	state Exp;
branches;
next	1.78;

1.78
date	2012.09.30.19.53.09;	author naddy;	state Exp;
branches;
next	1.77;

1.77
date	2012.06.15.08.32.17;	author ajacoutot;	state Exp;
branches;
next	1.76;

1.76
date	2012.05.26.15.43.55;	author naddy;	state Exp;
branches;
next	1.75;

1.75
date	2012.04.18.10.46.07;	author naddy;	state Exp;
branches;
next	1.74;

1.74
date	2012.04.07.10.55.04;	author naddy;	state Exp;
branches;
next	1.73;

1.73
date	2012.01.01.09.04.13;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2011.12.03.23.04.37;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2011.11.15.16.05.19;	author naddy;	state Exp;
branches;
next	1.70;

1.70
date	2011.09.25.21.55.49;	author naddy;	state Exp;
branches;
next	1.69;

1.69
date	2011.09.25.20.18.44;	author naddy;	state Exp;
branches;
next	1.68;

1.68
date	2011.09.23.09.12.32;	author naddy;	state Exp;
branches;
next	1.67;

1.67
date	2011.09.16.11.13.41;	author espie;	state Exp;
branches;
next	1.66;

1.66
date	2011.06.02.17.09.32;	author kili;	state Exp;
branches;
next	1.65;

1.65
date	2011.01.10.08.35.16;	author fgsch;	state Exp;
branches;
next	1.64;

1.64
date	2010.12.12.20.42.38;	author naddy;	state Exp;
branches;
next	1.63;

1.63
date	2010.11.23.18.52.40;	author naddy;	state Exp;
branches;
next	1.62;

1.62
date	2010.11.19.22.31.39;	author espie;	state Exp;
branches;
next	1.61;

1.61
date	2010.10.30.22.05.43;	author naddy;	state Exp;
branches;
next	1.60;

1.60
date	2010.10.25.20.28.04;	author naddy;	state Exp;
branches;
next	1.59;

1.59
date	2010.10.24.21.30.02;	author ajacoutot;	state Exp;
branches;
next	1.58;

1.58
date	2010.10.21.21.52.51;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2010.10.18.18.36.59;	author espie;	state Exp;
branches;
next	1.56;

1.56
date	2010.10.11.08.16.52;	author jasper;	state Exp;
branches;
next	1.55;

1.55
date	2010.09.30.07.21.20;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2010.05.03.17.39.33;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2010.05.01.13.50.05;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2010.04.01.22.16.29;	author naddy;	state Exp;
branches;
next	1.51;

1.51
date	2010.03.21.16.30.28;	author naddy;	state Exp;
branches;
next	1.50;

1.50
date	2010.01.09.00.48.15;	author naddy;	state Exp;
branches;
next	1.49;

1.49
date	2009.12.22.11.41.47;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2009.12.22.00.31.23;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2009.12.04.08.11.29;	author ajacoutot;	state Exp;
branches;
next	1.46;

1.46
date	2009.11.07.11.57.50;	author fgsch;	state Exp;
branches;
next	1.45;

1.45
date	2009.10.30.18.08.47;	author naddy;	state Exp;
branches;
next	1.44;

1.44
date	2009.10.28.19.38.11;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2009.09.16.19.36.33;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2009.09.11.18.23.23;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2009.09.06.15.03.18;	author naddy;	state Exp;
branches;
next	1.40;

1.40
date	2009.08.10.06.33.43;	author kili;	state Exp;
branches;
next	1.39;

1.39
date	2009.07.22.15.52.07;	author naddy;	state Exp;
branches;
next	1.38;

1.38
date	2009.06.27.21.48.47;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2009.06.20.13.07.22;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2009.06.12.08.11.17;	author fgsch;	state Exp;
branches;
next	1.35;

1.35
date	2009.05.13.15.10.42;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2009.05.10.19.31.44;	author naddy;	state Exp;
branches;
next	1.33;

1.33
date	2009.04.14.14.06.26;	author naddy;	state Exp;
branches;
next	1.32;

1.32
date	2009.04.04.14.42.58;	author naddy;	state Exp;
branches;
next	1.31;

1.31
date	2009.03.04.20.59.52;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2009.02.15.18.09.29;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2008.12.27.15.54.43;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2008.12.02.15.29.07;	author naddy;	state Exp;
branches;
next	1.27;

1.27
date	2008.07.09.19.43.42;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2008.05.22.18.13.05;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2008.05.19.09.57.43;	author fgsch;	state Exp;
branches;
next	1.24;

1.24
date	2008.04.22.16.50.42;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2008.04.17.08.10.10;	author ajacoutot;	state Exp;
branches;
next	1.22;

1.22
date	2008.03.17.18.38.20;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2008.02.24.14.59.03;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2008.02.19.18.42.15;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2008.02.17.21.59.32;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2008.02.03.15.45.29;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2008.01.29.16.33.08;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2008.01.28.15.40.43;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2008.01.17.18.27.41;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2008.01.11.18.15.00;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2007.11.27.20.30.19;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2007.11.17.20.39.03;	author steven;	state Exp;
branches;
next	1.11;

1.11
date	2007.09.15.22.37.00;	author merdely;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.02.21.08.21;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2007.05.09.14.01.54;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2007.01.04.20.19.54;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2006.12.23.17.04.16;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2006.11.22.21.58.24;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2006.11.13.12.51.14;	author steven;	state Exp;
branches;
next	1.4;

1.4
date	2006.08.03.23.15.58;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2006.06.13.13.30.30;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2006.04.29.15.37.44;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2006.04.26.20.05.06;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.04.26.20.05.06;	author naddy;	state Exp;
branches;
next	;

1.93.2.1
date	2014.07.22.07.28.24;	author jasper;	state Exp;
branches;
next	;
commitid	E4USU0DGNkyKjxYe;


desc
@@


1.115
log
@unbreak
@
text
@# $OpenBSD: Makefile,v 1.114 2017/05/13 17:40:26 espie Exp $

COMMENT-main=	BitTorrent command line and daemon client
COMMENT-gtk=	BitTorrent client with GTK+ interface
COMMENT-qt=	BitTorrent client with Qt interface

VER=		2.92
DISTNAME=	transmission-${VER}
PKGNAME-main=	transmission-${VER}
PKGNAME-gtk=	transmission-gtk-${VER}
PKGNAME-qt=	transmission-qt-${VER}
REVISION=	3
CATEGORIES=	net
HOMEPAGE=	http://www.transmissionbt.com/
MAINTAINER=	Josh Grosse <josh@@jggimi.net>

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	https://github.com/transmission/transmission-releases/raw/master/
EXTRACT_SUFX=	.tar.xz

MULTI_PACKAGES=	-main -gtk -qt

ONLY_FOR_ARCHS-qt=	${MODGCC4_ARCHS} ${CLANG_ARCHS}
# keep in sync with lang/gcc/${MODGCC4_VERSION}/Makefile
MODGCC4_ARCHS=  amd64 arm hppa i386 mips64 mips64el powerpc sparc64

WANT_CXX =	base gcc
MODGCC4_LANGS=	c


PSEUDO_FLAVORS=	no_gtk no_qt
FLAVOR?=

.include <bsd.port.arch.mk>

WANTLIB-common=	c crypto curl event_core event_extra m miniupnpc>=2.0 \
		natpmp pthread ssl z intl
WANTLIB-main=	${WANTLIB-common} nghttp2 iconv
WANTLIB-gtk=	${WANTLIB-common} ICE SM X11 Xcomposite Xcursor Xdamage \
		Xext Xfixes Xi Xinerama Xrandr Xrender \
		atk-1.0 atk-bridge-2.0 atspi cairo cairo-gobject \
		dbus-1 expat ffi fontconfig freetype \
		gdk-3 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gobject-2.0 graphite2 gthread-2.0 gtk-3 \
		harfbuzz pango-1.0 pangoft2-1.0 \
		pangocairo-1.0 pixman-1 png pcre pthread-stubs xcb \
		xcb-render xcb-shm epoxy nghttp2 iconv
WANTLIB-qt=	${WANTLIB-common} ${MODQT_WANTLIB} \
		GL Qt5Core Qt5DBus Qt5Gui Qt5Network Qt5Widgets \
		fontconfig freetype $(LIBECXX)

MODULES+=	textproc/intltool

LIB_DEPENDS-common=devel/gettext \
		devel/libevent2 \
		net/curl \
		net/miniupnp/libnatpmp \
		net/miniupnp/miniupnpc>=1.9
LIB_DEPENDS-main=${LIB_DEPENDS-common}
LIB_DEPENDS-gtk=${LIB_DEPENDS-common} \
		x11/gtk+3
LIB_DEPENDS-qt=	${LIB_DEPENDS-common} \
		${MODQT_LIB_DEPENDS}

RUN_DEPENDS-gtk=${PKGNAME-main}:${BUILD_PKGPATH} \
		devel/desktop-file-utils \
		x11/gtk+3,-guic
RUN_DEPENDS-qt=	${PKGNAME-main}:${BUILD_PKGPATH} \
		devel/desktop-file-utils

USE_GMAKE=	Yes
CONFIGURE_STYLE=gnu

CONFIGURE_ARGS=	--disable-shared \
		--enable-cli \
		--enable-external-natpmp

# -I$(top_builddir)/third-party is required, but configure fails to
# set it if we use external miniupnp libs.

CONFIGURE_ENV=	CPPFLAGS="-I${WRKSRC}/third-party -I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

.if ${BUILD_PACKAGES:M-qt}
MODULES+=		devel/qmake x11/qt5
MODGCC4_LANGS+=		c++
# avoid setting LINK=
MODQT5_USE_GCC4_MODULE=	No
MODQMAKE_PROJECTS=	qt/qtr.pro
CONFIGURE_STYLE+=	qmake
SEPARATE_BUILD=		No
MODQMAKE_INSTALL_ROOT=	${PREFIX}
.endif

.if !${BUILD_PACKAGES:M-gtk}
CONFIGURE_ARGS+=--without-gtk
.endif

pre-patch:
	@@cd ${WRKSRC}/third-party/libutp; perl -pi -e 's/\r$$//' *.h *.cpp

.if ${BUILD_PACKAGES:M-qt}
post-build:
	${MODQMAKE_build}

post-install:
	${MODQMAKE_install}
	${INSTALL_DATA_DIR} ${PREFIX}/share/applications
	${INSTALL_DATA} ${WRKSRC}/qt/transmission-qt.desktop \
	    ${PREFIX}/share/applications/
	${INSTALL_DATA_DIR} ${PREFIX}/share/pixmaps
	${INSTALL_DATA} ${WRKSRC}/qt/icons/transmission.png \
	    ${PREFIX}/share/pixmaps/transmission-qt.png
.endif

.include <bsd.port.mk>
@


1.114
log
@more WANT_CXX / LIBECXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2017/04/19 11:16:03 sthen Exp $
d26 2
d30 2
a31 1
MODGCC4_LANGS=	c c++
@


1.113
log
@Add ${CLANG_ARCHS} to "ONLY_FOR_ARCHS = ${GCC4_ARCHS}" lines to give them
a chance on aarch64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2017/01/11 13:44:33 jasper Exp $
d27 2
a28 4
MODULES=	gcc4
# keep in sync with lang/gcc/${MODGCC4_VERSION}/Makefile
MODGCC4_ARCHS=	amd64 arm hppa i386 mips64 mips64el powerpc sparc64
MODGCC4_LANGS=	c
d49 1
a49 1
		fontconfig freetype estdc++
@


1.112
log
@update maintainer e-mail

from Josh Grosse
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2016/12/28 13:53:29 zhuk Exp $
d25 1
a25 1
ONLY_FOR_ARCHS-qt=	${MODGCC4_ARCHS}
@


1.111
log
@Fix build with modern qt5.port.mk, as found by naddy@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2016/12/27 20:36:42 kili Exp $
d12 1
a12 2
REVISION=	1
REVISION-qt=	2
d15 1
a15 1
MAINTAINER=	Josh Grosse <josh@@jggimi.homeip.net>
@


1.110
log
@Fix bump of transmission-qt. This port has REVISION = 1, which
applied to *all* subpackages, so REVISION-qt must be 2, not 0. Move
REVISION-qt up (right under REVISION), so it becomes obvious that
-qt got an extra bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2016/12/25 14:34:39 zhuk Exp $
d28 1
d31 1
d54 1
a54 1
MODULES=	textproc/intltool
d88 3
a94 2
.else
MODULES+=		gcc4
@


1.109
log
@Adapt to new x11/qt5 layout, mostly REVISION bumps due to changed deps.

The devel/kf5 to be handled separately, please wait.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2016/11/04 11:35:20 sthen Exp $
d13 1
a16 1
REVISION-qt=	0
@


1.108
log
@sync WANTLIB (and in one case, add gettext to LIB_DEPENDS) in dependent ports
now that internationalised domain name support has been removed from net/curl
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2016/09/21 10:52:51 sthen Exp $
d16 1
@


1.107
log
@Update MASTER_SITES, based on one from Josh Grosse (maintainer), ok josh
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2016/09/01 10:53:27 jasper Exp $
d12 1
a12 1
REVISION=	0
d37 1
a37 1
WANTLIB-main=	${WANTLIB-common} idn nghttp2 iconv
d46 1
a46 1
		xcb-render xcb-shm epoxy idn nghttp2 iconv
@


1.106
log
@retire sparc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2016/04/11 20:00:51 naddy Exp $
d20 1
a20 1
MASTER_SITES=	http://download.transmissionbt.com/files/
@


1.105
log
@replace gettext module; tweaked from a submissio by maintainer Josh Grosse
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2016/03/27 16:19:17 zhuk Exp $
d28 1
a28 1
MODGCC4_ARCHS=	amd64 arm hppa i386 mips64 mips64el powerpc sparc sparc64
@


1.104
log
@... typed "ci" too fast: CONFIGURE_STYLE should stay.

But now I have a good cause to thank Josh Grosse for original patch. :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2016/03/27 16:16:50 zhuk Exp $
d12 1
d36 2
a37 2
		natpmp pthread ssl z ${MODGETTEXT_WANTLIB}
WANTLIB-main=	${WANTLIB-common} idn nghttp2
d46 1
a46 1
		xcb-render xcb-shm epoxy idn nghttp2
d51 1
a51 1
MODULES=	devel/gettext textproc/intltool
d53 1
a53 1
LIB_DEPENDS-common=${MODGETTEXT_LIB_DEPENDS} \
@


1.103
log
@Oops, missed that one in previous qmake commit.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2016/03/08 16:14:16 naddy Exp $
d85 1
@


1.102
log
@Update to 2.92.
Switch to Qt5, which requires GCC 4.9, so always use that compiler on
the archs it supports.

From new maintainer Josh Grosse.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2015/10/30 12:47:40 sthen Exp $
d83 1
a83 1
MODULES+=		x11/qt5
a84 1
CONFIGURE_STYLE+=	qmake
@


1.101
log
@sync WANTLIB (curl+nghttp2)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2015/08/25 14:03:21 sthen Exp $
d7 1
a7 1
VER=		2.84
a11 1
REVISION=	5
d14 1
d24 4
a27 1
ONLY_FOR_ARCHS-qt=${GCC4_ARCHS}
d47 2
a48 3
		lib/qt4/QtDBus lib/qt4/QtGui lib/qt4/QtNetwork lib/qt4/QtXml \
		ICE SM X11 Xext Xi Xinerama Xrender \
		fontconfig freetype stdc++
a50 3
.if ${BUILD_PACKAGES:M-qt}
MODULES+=	x11/qt4
.endif
d71 1
d73 1
d82 9
a90 2
QMAKE_ARGS=	QMAKE_CXX="${CXX}" \
		QMAKE_CXXFLAGS="${CXXFLAGS}"
d101 1
a101 1
	cd ${WRKSRC}/qt; qmake4 ${QMAKE_ARGS} qtr.pro; make ${MAKE_FLAGS}
d104 1
a104 3
	cd ${WRKSRC}/qt; make ${MAKE_FLAGS} install INSTALL_ROOT=${PREFIX} \
	    INSTALL_FILE="${INSTALL_DATA}" \
	    INSTALL_PROGRAM="${INSTALL_PROGRAM}"
@


1.100
log
@wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2015/08/21 10:14:56 naddy Exp $
d12 1
a12 2
REVISION=	3
REVISION-gtk=	4
d33 1
a33 1
WANTLIB-main=	${WANTLIB-common} idn
d40 1
a40 1
		harfbuzz idn pango-1.0 pangoft2-1.0 \
d42 1
a42 1
		xcb-render xcb-shm epoxy
@


1.99
log
@drop maintainer as my remaining use of this has atrophied to zero
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2015/04/04 09:21:03 ajacoutot Exp $
d13 1
d43 1
a43 1
		xcb-render xcb-shm
@


1.98
log
@Bump after the recent changes in packaging dbus and dconf.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2015/03/27 08:13:04 ajacoutot Exp $
d12 1
a12 1
REVISION=	2
a14 2

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>
@


1.97
log
@x11/gtk+2,-guic -> x11/gtk+3,-guic && bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2014/09/12 17:18:44 brad Exp $
d12 1
a12 1
REVISION=	1
@


1.96
log
@Enable the uTP support. According to bug reports I can find this was fixed
for strict alignnment archs around 2.74.

Tested on sparc64 by me and naddy@@.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2014/07/21 14:59:17 naddy Exp $
d12 1
a12 1
REVISION=	0
d68 1
a68 1
		x11/gtk+2,-guic
@


1.95
log
@update to 2.84: fix peer communication vulnerability
also tested by gonzalo@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2014/06/01 11:37:06 naddy Exp $
d12 1
a75 2
# unaligned accesses throughout
CONFIGURE_ARGS+=--disable-utp
@


1.94
log
@update to 2.83; testing by Josh Grosse
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/02/03 13:30:52 dcoppa Exp $
d7 1
a7 1
VER=		2.83
@


1.93
log
@
Update to miniupnpc-1.9 and fix dependant ports (games/megaglest
not affected)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2013/11/18 16:51:23 naddy Exp $
d7 1
a7 4
VER=		2.82
REVISION-main=	1
REVISION-gtk=	1
REVISION-qt=	0
d17 1
a17 1
# GPLv2
@


1.93.2.1
log
@Security fix for CVE-2014-4909,
transmission peer communication vulnerability
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2014/02/03 13:30:52 dcoppa Exp $
d8 1
a8 1
REVISION-main=	2
@


1.92
log
@GTK client: Disable help entry in menu while the URL returns 404.
http://www.transmissionbt.com/help/gtk/2.8x/

Requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2013/10/31 21:12:13 sthen Exp $
d8 3
a10 2
REVISION-main=	0
REVISION-gtk=	0
d35 1
a35 1
WANTLIB-common=	c crypto curl event_core event_extra m miniupnpc \
d61 1
a61 1
		net/miniupnp/miniupnpc
@


1.91
log
@bump REVISION for any ports using route messages. regen some distinfos and
remove unnecessary USE_GROFFs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2013/08/22 17:34:32 naddy Exp $
d9 1
@


1.90
log
@Update to 2.82 for various bug fixes.  Qt4 build fixes from zhuk@@.

Overhaul MODULES/LIB_DEPENDS/RUN_DEPENDS/WANTLIB, mostly from zhuk@@.

ok zhuk@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2013/08/09 19:13:08 naddy Exp $
d8 1
@


1.89
log
@update to 2.81 for some bug fixes; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2013/07/12 17:03:59 naddy Exp $
d7 1
a7 1
VER=		2.81
d30 6
a35 7
# Reminder:
# MODULES adds to WANTLIB and LIB_DEPENDS
# WANTLIB-main and LIB_DEPENDS-main default to WANTLIB and LIB_DEPENDS

WANTLIB=	c crypto curl event_core event_extra idn m miniupnpc \
		natpmp pthread ssl z
WANTLIB-gtk=	${WANTLIB} ICE SM X11 Xcomposite Xcursor Xdamage \
d41 1
a41 1
		harfbuzz pango-1.0 pangoft2-1.0 \
d44 4
a47 3
WANTLIB-qt=	${WANTLIB} ICE SM QtCore QtDBus QtGui QtNetwork QtXml \
		X11 Xext Xi Xinerama Xrender \
		expat fontconfig freetype stdc++
d50 3
d54 2
a55 1
LIB_DEPENDS=	devel/libevent2 \
d59 2
a60 1
LIB_DEPENDS-gtk=${LIB_DEPENDS} \
d62 2
a63 2
LIB_DEPENDS-qt=	${LIB_DEPENDS} \
		x11/qt4
d65 1
a65 1
RUN_DEPENDS-gtk=${PKGNAME-main}:net/transmission,-main \
d68 1
a68 1
RUN_DEPENDS-qt=	${PKGNAME-main}:net/transmission,-main \
a85 2

.include <bsd.port.arch.mk>
@


1.88
log
@update to 2.80 for miscellaneous small improvements
https://trac.transmissionbt.com/wiki/Changes#version-2.80
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2013/05/31 15:34:53 ajacoutot Exp $
d7 1
a7 1
VER=		2.80
@


1.87
log
@Sync WANTLIB and bump after the recent harfbuzz update; icu libs are not
needed anymore. This is a mecanical commit, there might be dragons :-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2013/04/17 10:52:46 naddy Exp $
d7 1
a7 1
VER=		2.77
a11 3
REVISION-main=	1
REVISION-gtk=	1
REVISION-qt=	1
@


1.86
log
@gtar no longer needed for extracting a distfile with extended headers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2013/04/01 16:01:21 naddy Exp $
d12 3
a14 3
REVISION-main=	0
REVISION-gtk=	0
REVISION-qt=	0
d45 1
a45 1
		harfbuzz icudata icule icuuc pango-1.0 pangoft2-1.0 \
@


1.85
log
@more informative description; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2013/03/21 08:46:35 ajacoutot Exp $
a67 3

BUILD_DEPENDS=	archivers/gtar
TAR=		${LOCALBASE}/bin/gtar
@


1.84
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2013/03/20 20:18:07 naddy Exp $
d12 3
@


1.83
log
@update to 2.77: bug fixes, tested by brad@@
sync wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2013/03/11 11:35:57 espie Exp $
a69 1
USE_LIBTOOL=	Yes
@


1.82
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2013/01/10 18:11:00 brad Exp $
d7 1
a7 1
VER=		2.76
d36 4
a39 4
WANTLIB-gtk=	${WANTLIB} ICE SM X11 Xau Xcomposite Xcursor Xdamage \
		Xdmcp Xext Xfixes Xi Xinerama Xrandr Xrender Xxf86vm \
		GL atk-1.0 atk-bridge-2.0 atspi cairo cairo-gobject \
		dbus-1 drm expat ffi fontconfig freetype \
d41 1
a41 1
		gobject-2.0 gthread-2.0 gtk-3 \
d43 1
a43 1
		pangocairo-1.0 pixman-1 png pcre pthread-stubs stdc++ xcb \
@


1.81
log
@Update to transmission 2.76.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2012/12/20 20:30:54 naddy Exp $
a18 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.80
log
@bugfix update to 2.75; requested and tested by brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2012/10/27 10:55:53 naddy Exp $
d7 1
a7 1
VER=		2.75
@


1.79
log
@maintenance update to 2.73
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2012/09/30 19:53:09 naddy Exp $
d7 1
a7 1
VER=		2.73
@


1.78
log
@Update to 2.71 for numerous bug fixes and small changes.
Includes work by dcoppa@@ originally for 2.61.  ok brad@@, dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2012/06/15 08:32:17 ajacoutot Exp $
d7 1
a7 1
VER=		2.71
d23 1
a23 1
MASTER_SITES=	http://download.m0k.org/transmission/files/
@


1.77
log
@gtk-update-icon-cache:
Don't redirect errors to /dev/null and don't return true(1)
unconditionally. Instead, don't check for the existence of index.theme.
This will allow us to catch errors that may be happening because of a
missing dependency in the chain.

Some hidden issues may appear, in which case please contact me.

discussed with and ok blind jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2012/05/26 15:43:55 naddy Exp $
d7 1
a7 1
VER=		2.52
a14 2
REVISION-gtk=	0

d39 4
a42 3
WANTLIB-gtk=	${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
		Xfixes Xi Xinerama Xrandr Xrender Xxf86vm GL atk-1.0 cairo \
		cairo-gobject drm expat ffi fontconfig freetype \
d44 2
a45 1
		gobject-2.0 gthread-2.0 gtk-3 pango-1.0 pangoft2-1.0 \
d94 3
@


1.76
log
@maintenance update to 2.52
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2012/04/18 10:46:07 naddy Exp $
d14 2
@


1.75
log
@update to 2.51; tested by various
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2012/04/07 10:55:04 naddy Exp $
d7 1
a7 1
VER=		2.51
@


1.74
log
@Update to 2.50.  Most notable changes in this version:
* overhauled web client
* various bug fixes

Switch to external miniupnp libs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2012/01/01 09:04:13 ajacoutot Exp $
d7 1
a7 1
VER=		2.50
d84 3
d95 1
a95 1
	cd ${WRKSRC}/qt; qmake4 qtr.pro; make ${MAKE_FLAGS}
@


1.73
log
@gamin,-server is gone, glib2 supports native file monitoring with kqueue(2).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2011/12/03 23:04:37 ajacoutot Exp $
d7 1
a7 1
VER=		2.42
a14 2
REVISION-gtk=	1

d37 2
a38 1
WANTLIB=	c crypto curl event_core event_extra idn m pthread ssl z
d46 2
a47 1
WANTLIB-qt=	${WANTLIB} QtCore QtDBus QtGui QtNetwork QtXml \
d53 3
a55 1
		net/curl
d73 2
a74 1
CONFIGURE_ARGS=	--disable-shared
d78 4
a81 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
@


1.72
log
@Add a dependency on x11/gtk+2,-guic.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2011/11/15 16:05:19 naddy Exp $
d15 1
a15 1
REVISION-gtk=	0
a60 1
		sysutils/gamin,-server,no_python \
@


1.71
log
@* Update to 2.42.  Most notably, the web client has been overhauled.
* Switch GTK client to GTK+3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2011/09/25 21:55:49 naddy Exp $
d15 2
d61 2
a62 1
		sysutils/gamin,-server,no_python
@


1.70
log
@* move -sub variables out of .if sections; reminded by espie@@
* clean up some copy-and-paste accident in WANTLIB-gtk
* switch to .tar.xz distfile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2011/09/25 20:18:44 naddy Exp $
d3 3
a5 3
COMMENT-main=	lightweight BitTorrent command line and daemon client
COMMENT-gtk=	lightweight BitTorrent client with GTK+ interface
COMMENT-qt=	lightweight BitTorrent client with Qt interface
d7 1
a7 1
VER=		2.33
a11 1
REVISION-gtk=	0
d40 4
a43 4
		dbus-1 dbus-glib-1 drm expat ffi fontconfig freetype \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gobject-2.0 gthread-2.0 gtk-x11-2.0 pango-1.0 pangoft2-1.0 \
		pangocairo-1.0 pixman-1 png pcre pthread-stubs xcb \
d53 1
a53 2
		x11/gtk+2 \
		x11/dbus-glib
d69 1
a69 4
CONFIGURE_ARGS=	--disable-shared \
		--disable-libnotify \
		--disable-libappindicator \
		--disable-libcanberra
d79 1
a79 1
CONFIGURE_ARGS+=--disable-gtk
@


1.69
log
@use bsd.port.arch.mk framework and fix -gtk wantlib
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/09/23 09:12:32 naddy Exp $
d25 1
a25 1
EXTRACT_SUFX=	.tar.bz2
d34 4
d39 9
a47 1
WANTLIB-main=	${WANTLIB}
d50 14
a63 2
LIB_DEPENDS=	net/curl \
		devel/libevent2
d83 1
a83 17
.if ${BUILD_PACKAGES:M-gtk}
WANTLIB-gtk=	${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
		Xfixes Xi Xinerama Xrandr Xrender Xxf86vm GL atk-1.0 cairo \
		dbus-1 dbus-glib-1 drm expat ffi fontconfig freetype \
		gdk-x11-2.0 gdk_pixbuf-2.0 gio-2.0 glib-2.0 gmodule-2.0 \
		gobject-2.0 gthread-2.0 gtk-x11-2.0 pango-1.0 pangoft2-1.0 \
		Xfixes Xi Xinerama Xrandr Xrender atk-1.0 cairo dbus-1 \
		expat fontconfig freetype gio-2.0 glib-2.0 \
		gmodule-2.0 gobject-2.0 gthread-2.0 pango-1.0 pangoft2-1.0 \
		pangocairo-1.0 pixman-1 png pcre pthread-stubs xcb \
		xcb-render xcb-shm
LIB_DEPENDS+=	x11/gtk+2 \
		x11/dbus-glib
RUN_DEPENDS-gtk=${PKGNAME-main}:net/transmission,-main \
		devel/desktop-file-utils \
		sysutils/gamin,-server,no_python
.else
a87 6
LIB_DEPENDS+=	x11/qt4
WANTLIB-qt=	${WANTLIB} QtCore QtDBus QtGui QtNetwork QtXml \
		expat fontconfig freetype stdc++
RUN_DEPENDS-qt=	${PKGNAME-main}:net/transmission,-main \
		devel/desktop-file-utils

@


1.68
log
@Update to 2.33 for various bug fixes and improvements.

Support for the uTP protocol is disabled because of pervasive unaligned
accesses in the corresponding code.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.67 2011/09/16 11:13:41 espie Exp $

ONLY_FOR_ARCHS-qt= ${GCC4_ARCHS}
d12 1
d27 4
a33 2
MULTI_PACKAGES=	-main

d57 3
a59 4
.if ${FLAVOR:L:Mno_gtk}
CONFIGURE_ARGS+=--disable-gtk
.else
MULTI_PACKAGES+=-gtk
d62 1
a62 1
		dbus-1 dbus-glib-1 drm expat fontconfig freetype \
d75 2
d79 1
a79 7
.include <bsd.own.mk>

.if !${FLAVOR:L:Mno_qt}
MULTI_PACKAGES+=-qt
.endif

.if ${COMPILER_VERSION:L:Mgcc4*} && !${FLAVOR:L:Mno_qt}
@


1.67
log
@normalize pkgpath
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.66 2011/06/02 17:09:32 kili Exp $
d9 1
a9 1
VER=		2.13
a15 3
REVISION-main =	0
REVISION-gtk =	0
REVISION-qt =	0
d33 1
a33 1
WANTLIB=	c crypto curl event eventextra idn m pthread ssl z
d38 4
a41 1
		devel/libeventextra
d49 4
a52 2
		--disable-libcanberra \
		--disable-gconf2
d54 1
a54 5
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBEVENT_LIBS="-leventextra -levent" \
		OPENSSL_CFLAGS="-I/usr/include" \
		OPENSSL_LIBS="-lcrypto"
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}
a82 1
ONLY_FOR_ARCHS-qt = ${GCC4_ARCHS}
d86 1
a86 1
		dbus-1 expat fontconfig freetype stdc++
@


1.66
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/01/10 08:35:16 fgsch Exp $
d15 2
@


1.65
log
@add a rc script for transmission.
discussed and ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2010/12/12 20:42:38 naddy Exp $
a42 1
		--disable-silent-rules \
@


1.64
log
@* update to 2.13: bug fixes
* install .desktop file for qt client; from FreeBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/11/23 18:52:40 naddy Exp $
d14 1
@


1.63
log
@* maintenance update to 2.12
* drop groff dependency, Transmission has mdoc pages
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/11/19 22:31:39 espie Exp $
d7 1
a7 1
VER=		2.12
d86 2
a87 1
RUN_DEPENDS-qt=	${PKGNAME-main}:net/transmission,-main
d96 6
@


1.62
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/10/30 22:05:43 naddy Exp $
d7 1
a7 1
VER=		2.11
d23 1
a23 1
MASTER_SITES=	http://mirrors.m0k.org/transmission/files/
a39 1
USE_GROFF=	Yes
@


1.61
log
@oops, obsolete USE_X11 snuck back in; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/10/25 20:28:04 naddy Exp $
d35 2
a36 2
LIB_DEPENDS=	::net/curl \
		::devel/libeventextra
d69 5
a73 5
LIB_DEPENDS+=	::x11/gtk+2 \
		::x11/dbus-glib
RUN_DEPENDS-gtk=:${PKGNAME-main}:net/transmission,-main \
		::devel/desktop-file-utils \
		:gamin-*:sysutils/gamin,-server,no_python
d78 5
d84 1
a84 2
MULTI_PACKAGES+=-qt
LIB_DEPENDS+=	::x11/qt4
d87 1
a87 1
RUN_DEPENDS-qt=	:${PKGNAME-main}:net/transmission,-main
@


1.60
log
@Add Qt4 client and no_qt flavor.  Only applicable to GCC4 archs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/10/24 21:30:02 ajacoutot Exp $
a83 1
USE_X11=	Yes
@


1.59
log
@Remove USE_X11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/10/21 21:52:51 naddy Exp $
d5 1
d11 1
d26 1
a26 1
PSEUDO_FLAVORS=	no_gtk
d74 19
@


1.58
log
@Major update to 2.11.
The GTK+ client is now named "transmission-gtk" and the -gui package has
been renamed to -gtk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/10/18 18:36:59 espie Exp $
a71 1
USE_X11=	Yes
@


1.57
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2010/10/11 08:16:52 jasper Exp $
d4 1
a4 1
COMMENT-gui=	lightweight BitTorrent client with graphical interface
d6 1
a6 1
VER=		1.93
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
a12 3
REVISION-main=	0
REVISION-gui=	1

d24 1
a24 1
PSEUDO_FLAVORS=	no_gui
d29 1
a29 1
WANTLIB=	c crypto event idn m pthread ssl z
d33 2
a34 2
LIB_DEPENDS=	curl.>=14::net/curl \
		eventextra.>=1::devel/libeventextra
d38 2
a39 4
USE_GROFF =	Yes
AUTOCONF_VERSION=2.63
AUTOCONF=	autoconf -I m4
CONFIGURE_STYLE=autoconf no-autoheader
d48 1
a50 1
LIBTOOL_FLAGS=	--tag=disable-shared
d53 1
a53 1
.if ${FLAVOR:L:Mno_gui}
d56 6
a61 2
MULTI_PACKAGES+=-gui
WANTLIB-gui=	${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
d66 4
a69 7
		xcb-render xcb-render-util gdk_pixbuf-2.0
LIB_DEPENDS+=	gdk-x11-2.0,gtk-x11-2.0::x11/gtk+2 \
		dbus-glib-1::x11/dbus-glib
LIB_DEPENDS-main=${MODGETTEXT_LIB_DEPENDS} \
		curl.>=14::net/curl \
		eventextra.>=1::devel/libeventextra
RUN_DEPENDS-gui=:${PKGNAME-main}:net/transmission,-main \
@


1.56
log
@- fix WANTLIB after cairo update.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2010/09/30 07:21:20 ajacoutot Exp $
d41 1
@


1.55
log
@Fix DEPENDS after gtk+2 and gdk-pixbuf split.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2010/05/03 17:39:33 naddy Exp $
d14 1
a14 1
REVISION-gui=	0
d63 1
a63 1
		expat fontconfig freetype gio-2.0 glib-2.0 glitz \
@


1.54
log
@update to 1.93
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2010/05/01 13:50:05 naddy Exp $
d13 3
d66 2
a67 2
		xcb-render xcb-render-util
LIB_DEPENDS+=	gdk_pixbuf-2.0,gdk-x11-2.0,gtk-x11-2.0::x11/gtk+2 \
@


1.53
log
@use in-tree libevent(extra) instead of the bundled one; from nicm@@ and alek@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/04/01 22:16:29 naddy Exp $
d6 1
a6 1
VER=		1.92
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p0
PKGNAME-gui=	transmission-gui-${VER}p1
@


1.52
log
@Don't link against libappindicator, libcanberra, libgconf if they happen
to be installed; pointed out by sthen@@.
While here, also drop libnotify dependency.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/03/21 16:30:28 naddy Exp $
d8 2
a9 2
PKGNAME-main=	transmission-${VER}
PKGNAME-gui=	transmission-gui-${VER}p0
d29 1
a29 1
WANTLIB=	c crypto idn m pthread ssl z
d33 2
a34 1
LIB_DEPENDS=	curl.>=14::net/curl
d52 1
a52 1
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC} ${WRKSRC}/third-party/libevent
d62 2
a63 1
		pangocairo-1.0 pixman-1 png pcre pthread-stubs xcb
d67 2
a68 1
		curl.>=13::net/curl
@


1.51
log
@update to 1.92: many small improvements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/01/09 00:48:15 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
d37 3
a39 1
CONFIGURE_STYLE=gnu
d42 1
d45 1
a45 1
		--disable-libgconf
d59 1
a59 1
		dbus-glib-1 expat fontconfig freetype gio-2.0 glib-2.0 glitz \
d63 1
a63 1
		notify.>=2::devel/libnotify
@


1.50
log
@security update to 1.77:
Fixes CVE-2010-0012, "overwrite of local files with the privileges
of the user running Transmission if the user is tricked into opening
a malicious torrent file".

Based on submissions by robert@@openbsd.pap.st and stsp@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2009/12/22 11:41:47 sthen Exp $
d6 1
a6 1
VER=		1.77
d33 1
a33 1
LIB_DEPENDS=	curl.>=13::net/curl
d40 4
a43 2
		--disable-wx
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include -DHAVE_LONG_LONG=1" \
@


1.49
log
@A couple of missed @@unexec->@@unexec-delete *-update-* goos
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2009/12/22 00:31:23 sthen Exp $
d6 1
a6 1
VER=		1.76
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p1
PKGNAME-gui=	transmission-gui-${VER}p4
@


1.48
log
@Use @@unexec-delete instead of @@unexec for the *-update-* goos.
prodded by espie@@
discussed with espie@@ ajacoutot@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/12/04 08:11:29 ajacoutot Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p3
@


1.47
log
@Use gamin instead of fam.
Tweak from naddy@@

ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/11/07 11:57:50 fgsch Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p2
@


1.46
log
@Workaround so big torrents are displayed correctly.  Already reported and
fixed properly upstream. naddy@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2009/10/30 18:08:47 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p1
d63 1
a63 1
		::devel/glib2,-fam
@


1.45
log
@drop workarounds for \' printf modifier
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2009/10/28 19:38:11 naddy Exp $
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p0
PKGNAME-gui=	transmission-gui-${VER}p0
d41 1
a41 1
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
@


1.44
log
@update to 1.76 for miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2009/09/16 19:36:33 naddy Exp $
d8 2
a9 2
PKGNAME-main=	transmission-${VER}
PKGNAME-gui=	transmission-gui-${VER}
a65 4

# Remove the \' printf flag from the translations, too.
post-patch:
	@@cd ${WRKSRC}/po; perl -pi.bak -e "s/%'/%/g; s/%(.*?)'d/%\1d/g" *.po
@


1.43
log
@update to 1.75: minor bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2009/09/11 18:23:23 naddy Exp $
d6 1
a6 1
VER=		1.75
d38 3
a40 1
CONFIGURE_ARGS=	--disable-shared --disable-wx
@


1.42
log
@We need glib2,-fam so automatic downloading from torrent files placed
in a directory will work.  From Joe Gidi <joe@@entropicblur.com>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2009/09/06 15:03:18 naddy Exp $
d6 1
a6 1
VER=		1.74
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p0
@


1.41
log
@update to 1.74: miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2009/08/10 06:33:43 kili Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
d60 2
a61 1
		::devel/desktop-file-utils
@


1.40
log
@WANTLIB changes after xcb addition and bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2009/07/22 15:52:07 naddy Exp $
d6 1
a6 1
VER=		1.73
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p0
@


1.39
log
@maintenance update to 1.73
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2009/06/27 21:48:47 sthen Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
d54 1
a54 1
		pangocairo-1.0 pixman-1 png pcre
@


1.38
log
@in the UPnP code, skip over route socket messages with the wrong rtm_version;
didn't break anything for naddy@@, it still reported that it had successfully
negotiated port forwarding with his printer, just as before ;-)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2009/06/20 13:07:22 naddy Exp $
d6 1
a6 1
VER=		1.72
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p0
PKGNAME-gui=	transmission-gui-${VER}p0
@


1.37
log
@Update to 1.72.
The major new addition in the 1.7x series is support for DHT.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2009/06/12 08:11:17 fgsch Exp $
d8 2
a9 2
PKGNAME-main=	transmission-${VER}
PKGNAME-gui=	transmission-gui-${VER}
@


1.36
log
@Fix uploading by web and bump package. Transmission ticket #2085.
ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/05/13 15:10:42 naddy Exp $
d6 1
a6 1
VER=		1.61
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p0
PKGNAME-gui=	transmission-gui-${VER}p0
d33 1
a33 1
LIB_DEPENDS=	curl.>=12::net/curl
d58 1
a58 1
		curl.>=12::net/curl
@


1.35
log
@update to 1.61: close potential CSRF security hole for web client users
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/05/10 19:31:44 naddy Exp $
d8 2
a9 2
PKGNAME-main=	transmission-${VER}
PKGNAME-gui=	transmission-gui-${VER}
@


1.34
log
@update to 1.60; prodded by Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/04/14 14:06:26 naddy Exp $
d6 1
a6 1
VER=		1.60
@


1.33
log
@update to 1.52; from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2009/04/04 14:42:58 naddy Exp $
d6 1
a6 1
VER=		1.52
@


1.32
log
@use intltool module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2009/03/04 20:59:52 naddy Exp $
d6 1
a6 1
VER=		1.51
@


1.31
log
@maintenance update to 1.51
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2009/02/15 18:09:29 naddy Exp $
d32 1
a32 1
MODULES=	devel/gettext
a33 1
BUILD_DEPENDS=	::textproc/intltool
@


1.30
log
@Update to 1.50: A bunch of bug fixes and various small improvements as well
as initial IPv6 support.
Also submitted in near-identical form by Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/12/27 15:54:43 naddy Exp $
d6 1
a6 1
VER=		1.50
@


1.29
log
@Update to 1.42: improvements in peer management and bandwidth
measurement and allocation.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/12/02 15:29:07 naddy Exp $
d6 1
a6 1
VER=		1.42
d21 1
a21 1
MASTER_SITES=	http://download.m0k.org/transmission/files/
@


1.28
log
@Update to 1.40.  The biggest changes:
* new web interface for the GTK and daemon clients
* transmission-daemon and -remote have been completely rewritten
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/07/09 19:43:42 naddy Exp $
d6 1
a6 1
VER=		1.40
@


1.27
log
@Overdue update to 1.22.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/05/22 18:13:05 naddy Exp $
d6 1
a6 1
VER=		1.22
d15 1
a15 1
# GPLv3
d33 2
d56 2
a57 3
LIB_DEPENDS=	gdk_pixbuf-2.0,gdk-x11-2.0,gtk-x11-2.0::x11/gtk+2 \
		notify.>=2::devel/libnotify \
		curl.>=9::net/curl
d59 1
a59 2
		curl.>=9::net/curl
RUN_DEPENDS-main=${MODGETTEXT_RUN_DEPENDS}
d61 1
a61 1
		::devel/desktop-file-utils ${RUN_DEPENDS}
@


1.26
log
@bump for previous change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/05/19 09:57:43 fgsch Exp $
d6 1
a6 1
VER=		1.11
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p0
d15 1
a15 1
# GPLv2
d29 1
a29 1
WANTLIB=	c crypto m pthread
d53 1
a53 1
		pangocairo-1.0 pixman-1 png pcre z
d55 4
a58 2
		notify.>=2::devel/libnotify
LIB_DEPENDS-main=${MODGETTEXT_LIB_DEPENDS}
@


1.25
log
@sync with cairo update. jasper@@ ok.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/04/22 16:50:42 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
@


1.24
log
@Update to 1.11.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/04/17 08:10:10 ajacoutot Exp $
d53 1
a53 1
		pangocairo-1.0 png pcre z
@


1.23
log
@- tweak the way the gtk-update-icon-cache goo is run

gtk-update-icon-cache is part of gtk+2: adding gtk+2 to run_depends just
to update the icon cache (which only gtk apps can use) is overkill to
say the least!
As from now, each time icons are installed under %D/share/icons, we try
to execute gtk-update-icon-cache and if it is not there, we just ignore
the error.
What it means is that if you have gtk+2 installed, then it'll run fine
and your apps will be able to use the cache. Otherwise, it will silently
fails which is fine since it means none of your apps would have been
able to take advantage of the cache anyway.

discussed with jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/03/17 18:38:20 naddy Exp $
d6 1
a6 1
VER=		1.06
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p0
d32 2
d37 1
a37 1
CONFIGURE_ARGS=	--disable-shared --without-wx
d46 1
a46 1
CONFIGURE_ARGS+=--without-gtk
a48 1
MODULES=	devel/gettext
d50 8
a57 6
		Xfixes Xi Xinerama Xrandr Xrender atk-1.0 cairo expat \
		fontconfig freetype glib-2.0 glitz gmodule-2.0 gobject-2.0 \
		gthread-2.0 pango-1.0 pangoft2-1.0 pangocairo-1.0 png pcre z
LIB_DEPENDS=	gdk_pixbuf-2.0,gdk-x11-2.0,gtk-x11-2.0::x11/gtk+2
LIB_DEPENDS-main=
RUN_DEPENDS-main=
d62 4
@


1.22
log
@update to 1.06: bug fix release
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/02/24 14:59:03 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
@


1.21
log
@oops, forgotten bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/02/19 18:42:15 naddy Exp $
d6 1
a6 1
VER=		1.05
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p0
PKGNAME-gui=	transmission-gui-${VER}p0
@


1.20
log
@rephrase description to avoid a conflict between grammatical and
notional concord; pointed out by Paul Irofti
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/02/17 21:59:32 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
@


1.19
log
@update to 1.05; help from ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/02/03 15:45:29 naddy Exp $
d8 1
a8 1
PKGNAME-main=	transmission-${VER}
@


1.18
log
@update to 1.04: bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/01/29 16:33:08 naddy Exp $
d6 1
a6 1
VER=		1.04
d55 2
a56 1
RUN_DEPENDS-gui=:${PKGNAME-main}:net/transmission,-main ${RUN_DEPENDS}
@


1.17
log
@re-release with all autotool files regenerated and a new SVN version number
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/01/28 15:40:43 naddy Exp $
d6 1
a6 1
VER=		1.02
d8 2
a9 2
PKGNAME-main=	transmission-${VER}p0
PKGNAME-gui=	transmission-gui-${VER}p0
@


1.16
log
@update to 1.02: miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2008/01/17 18:27:41 naddy Exp $
d8 2
a9 2
PKGNAME-main=	transmission-${VER}
PKGNAME-gui=	transmission-gui-${VER}
@


1.15
log
@maintenance update to 1.01
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2008/01/11 18:15:00 naddy Exp $
d6 1
a6 1
VER=		1.01
@


1.14
log
@Update to 1.00.  Changes:
* The GUI has been extended.
* The CLI client has changed its name back to "transmissioncli" (no
hyphen) and has regained the scrape feature.
* Bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/11/27 20:30:19 naddy Exp $
d6 1
a6 1
VER=		1.00
@


1.13
log
@Update to 0.93: much improved, encryption is supported now.

Name changes:
transmissioncli  -> transmission-cli
transmission-gtk -> transmission
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/11/17 20:39:03 steven Exp $
d6 1
a6 1
VER=		0.93
d11 1
a11 1
HOMEPAGE=	http://transmission.m0k.org/
a57 5

NO_REGRESS=	Yes

post-install:
	@@cd ${PREFIX}/man/man1 && mv transmissioncli.1 transmission-cli.1
@


1.12
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/09/15 22:37:00 merdely Exp $
d6 2
a7 2
VER=		0.81
DISTNAME=	Transmission-${VER}
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p0
d15 1
a15 1
# GPL
d22 1
d30 1
a30 1
WANTLIB-main=	${WANTLIB} event
a31 1
WRKDIST=	${WRKDIR}
d33 9
a41 2
CONFIGURE_STYLE=simple
CONFIGURE_ARGS=	--prefix="${PREFIX}"
d44 1
a44 1
CONFIGURE_ARGS+=--disable-gtk
d48 5
a52 7
WANTLIB-gui=	${WANTLIB} X11 Xau Xcursor Xdmcp Xext Xfixes Xi Xinerama \
		Xcomposite Xdamage \
		Xrandr Xrender atk-1.0.>=1809.0 cairo expat fontconfig \
		freetype glib-2.0.>=1200.0 glitz gmodule-2.0.>=1200.0 \
		gobject-2.0.>=1200.0 pango-1.0.>=1300.0 pangoft2-1.0.>=1300.0 \
		pangocairo-1.0.>=1300.0 png z
LIB_DEPENDS=	gdk_pixbuf-2.0.>=1000.0,gdk-x11-2.0.>=1000.0,gtk-x11-2.0.>=1000.0::x11/gtk+2
d60 3
@


1.11
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/02 21:08:21 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
d42 1
@


1.10
log
@Update through 0.81.  New features:
* The command line and GUI clients can now create .torrent files.
* The GUI client now allows selecting individual files for download
  from a torrent.
* A daemon client has been added that can run in the background.
  There is also a remote control utility that talks to the daemon
  as well as the GUI client.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/05/09 14:01:54 naddy Exp $
d3 2
a4 2
COMMENT-main=	"lightweight BitTorrent command line and daemon client"
COMMENT-gui=	"lightweight BitTorrent client with graphical interface"
@


1.9
log
@update to 0.72: various and sundry improvements
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/01/04 20:19:54 steven Exp $
d3 1
a3 1
COMMENT-main=	"lightweight BitTorrent client"
d6 1
a6 1
VER=		0.72
d15 1
a15 1
# MIT
d29 1
d31 1
d49 1
a53 4

# a space character in WRKDIST is painful
post-extract:
	@@mv ${WRKDIR}/Transmission\ .72 ${WRKDIST}
@


1.8
log
@fix WANTLIB of ports using gtk, needed after switch to our own pkg-config
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/12/23 17:04:16 naddy Exp $
d6 1
a6 1
VER=		0.6.1
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}p0
d32 1
a32 1
CONFIGURE_ARGS=	--prefix='$${DESTDIR}${PREFIX}'
d39 6
a44 5
WANTLIB-gui=	${WANTLIB} X11 Xext Xrender fontconfig freetype z \
		atk-1.0.>=1011.0 glib-2.0.>=1000.0 gmodule-2.0.>=1000.0 \
		gobject-2.0.>=1000.0 pango-1.0.>=1200.0 pangoft2-1.0.>=1200.0 \
		pangocairo-1.0.>=1200.0 cairo glitz png
LIB_DEPENDS=	gdk_pixbuf-2.0.>=802.0,gdk-x11-2.0.>=802.0,gtk-x11-2.0.>=802.0::x11/gtk+2
a47 1
CONFIGURE_ARGS+=--gettext-prefix=${LOCALBASE}
d51 4
@


1.7
log
@update to 0.6.1 (+ changeset 1190 for -gtk fixes)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2006/11/22 21:58:24 naddy Exp $
d9 1
a9 1
PKGNAME-gui=	transmission-gui-${VER}
d39 1
a39 1
WANTLIB-gui=	${WANTLIB} X11 fontconfig freetype \
d42 1
a42 1
		pangocairo-1.0.>=1200.0 cairo
@


1.6
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2006/11/13 12:51:14 steven Exp $
d6 4
a9 3
DISTNAME=	Transmission-0.5
PKGNAME-main=	${DISTNAME:L}p1
PKGNAME-gui=	${DISTNAME:L:S/-/-gui-/}p1
a28 1
BUILD_DEPENDS=	:jam-*:devel/jam
d30 1
d32 1
a32 1
CONFIGURE_ARGS=	--prefix=${PREFIX}
d40 4
a43 4
		atk-1.0.>=1011.0 glib-2.0.>=800.0 gmodule-2.0.>=800.0 \
		gobject-2.0.>=800.0 pango-1.0.>=1001.0 pangoft2-1.0.>=1001.0 \
		pangocairo-1.0.>=1001.0 cairo
LIB_DEPENDS=	gdk_pixbuf-2.0.>=800.0,gdk-x11-2.0.>=800.0,gtk-x11-2.0.>=800.0::x11/gtk+2
a47 10
.endif

do-build:
	@@cd ${WRKBUILD}; ${SETENV} ${MAKE_ENV} jam

do-install:
	${INSTALL_PROGRAM} ${WRKBUILD}/transmissioncli ${PREFIX}/bin
	${INSTALL_MAN} ${FILESDIR}/transmissioncli.1 ${PREFIX}/man/man1
.if !${FLAVOR:L:Mno_gui}
	${INSTALL_PROGRAM} ${WRKBUILD}/gtk/transmission-gtk ${PREFIX}/bin
@


1.5
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2006/08/03 23:15:58 espie Exp $
d3 1
a3 1
COMMENT=	"lightweight BitTorrent client"
d7 1
a7 1
PKGNAME=	${DISTNAME:L}p0
d25 1
a25 6
MULTI_PACKAGES=
.if !${FLAVOR:L:Mno_gui}
USE_X11=	Yes
MULTI_PACKAGES+=-gui
.endif
SUBPACKAGE?=
d36 3
a38 11
CONFIGURE_ARGS+=--gettext-prefix=${LOCALBASE}
MODULES+=	devel/gettext
LIB_DEPENDS+=	gdk_pixbuf-2.0.>=800.0,gdk-x11-2.0.>=800.0,gtk-x11-2.0.>=800.0::x11/gtk+2
.endif

.if defined(PACKAGING)
.  if empty(SUBPACKAGE)
MODULES=
LIB_DEPENDS=
.  else
WANTLIB+=	X11 fontconfig freetype \
d42 5
a46 1
.  endif
@


1.4
log
@new style specs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/06/13 13:30:30 bernd Exp $
d27 1
@


1.3
log
@Fix WANTLIB after gtk+2 upgrade.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2006/04/29 15:37:44 naddy Exp $
d42 1
a42 1
LIB_DEPENDS+=	gdk_pixbuf-2.0.800.0,gdk-x11-2.0.800.0,gtk-x11-2.0.800.0::x11/gtk+2
d51 3
a53 3
		atk-1.0.1011.0 glib-2.0.800.0 gmodule-2.0.800.0 \
		gobject-2.0.800.0 pango-1.0.1001.0 pangoft2-1.0.1001.0 \
		pangocairo-1.0.1001.0 cairo
@


1.2
log
@changeset 230 from the upstream SVN: improve tracker response parsing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2006/04/26 20:05:06 naddy Exp $
d8 1
a8 1
PKGNAME-gui=	${DISTNAME:L:S/-/-gui-/}p0
d50 1
a50 1
WANTLIB+=	X11 Xft Xext Xrender fontconfig freetype \
d53 1
a53 1
		pangox-1.0.1001.0 pangoxft-1.0.1001.0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 2
a8 2
PKGNAME=	${DISTNAME:L}
PKGNAME-gui=	${DISTNAME:L:S/-/-gui-/}
@


1.1.1.1
log
@Import Transmission 0.5.

Transmission is a free, lightweight BitTorrent client.  It features
a simple, intuitive interface on top on an efficient, cross-platform
back-end.

Man page contributed by Deanna Phillips <deanna@@sdf.lonestar.org>.
@
text
@@
