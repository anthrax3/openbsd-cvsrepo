head	1.9;
access;
symbols
	OPENBSD_4_6:1.7.0.2
	OPENBSD_4_6_BASE:1.7
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3;
locks; strict;
comment	@# @;


1.9
date	2009.10.30.18.08.47;	author naddy;	state dead;
branches;
next	1.8;

1.8
date	2009.09.06.15.03.18;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2009.06.20.13.07.22;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2009.05.13.15.10.42;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2009.05.10.19.31.44;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2009.03.04.20.59.52;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2009.02.15.18.09.29;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2008.12.27.15.54.43;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2008.12.02.15.29.07;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.9
log
@drop workarounds for \' printf modifier
@
text
@$OpenBSD: patch-daemon_remote_c,v 1.8 2009/09/06 15:03:18 naddy Exp $
--- daemon/remote.c.orig	Tue Aug 25 01:43:02 2009
+++ daemon/remote.c	Thu Sep  3 23:13:47 2009
@@@@ -826,10 +826,10 @@@@ tr_strltime( char * buf, int seconds, size_t buflen )
     minutes = ( seconds % 3600 ) / 60;
     seconds = ( seconds % 3600 ) % 60;
 
-    tr_snprintf( d, sizeof( d ), "%'d day%s", days, days==1?"":"s" );
-    tr_snprintf( h, sizeof( h ), "%'d hour%s", hours, hours==1?"":"s" );
-    tr_snprintf( m, sizeof( m ), "%'d minute%s", minutes, minutes==1?"":"s" );
-    tr_snprintf( s, sizeof( s ), "%'d second%s", seconds, seconds==1?"":"s" );
+    tr_snprintf( d, sizeof( d ), "%d day%s", days, days==1?"":"s" );
+    tr_snprintf( h, sizeof( h ), "%d hour%s", hours, hours==1?"":"s" );
+    tr_snprintf( m, sizeof( m ), "%d minute%s", minutes, minutes==1?"":"s" );
+    tr_snprintf( s, sizeof( s ), "%d second%s", seconds, seconds==1?"":"s" );
 
     if( days )
     {
@@@@ -891,24 +891,24 @@@@ strlsize( char *  buf, int64_t size, size_t  buflen )
     if( !size )
         tr_strlcpy( buf, "None", buflen );
     else if( size < (int64_t)KILOBYTE_FACTOR )
-        tr_snprintf( buf, buflen, "%'" PRId64 " bytes", (int64_t)size );
+        tr_snprintf( buf, buflen, "%" PRId64 " bytes", (int64_t)size );
     else
     {
         double displayed_size;
         if( size < (int64_t)MEGABYTE_FACTOR )
         {
             displayed_size = (double) size / KILOBYTE_FACTOR;
-            tr_snprintf( buf, buflen, "%'.1f KB", displayed_size );
+            tr_snprintf( buf, buflen, "%.1f KB", displayed_size );
         }
         else if( size < (int64_t)GIGABYTE_FACTOR )
         {
             displayed_size = (double) size / MEGABYTE_FACTOR;
-            tr_snprintf( buf, buflen, "%'.1f MB", displayed_size );
+            tr_snprintf( buf, buflen, "%.1f MB", displayed_size );
         }
         else
         {
             displayed_size = (double) size / GIGABYTE_FACTOR;
-            tr_snprintf( buf, buflen, "%'.1f GB", displayed_size );
+            tr_snprintf( buf, buflen, "%.1f GB", displayed_size );
         }
     }
     return buf;
@


1.8
log
@update to 1.74: miscellaneous bug fixes
@
text
@d1 1
a1 1
$OpenBSD: patch-daemon_remote_c,v 1.7 2009/06/20 13:07:22 naddy Exp $
@


1.7
log
@Update to 1.72.
The major new addition in the 1.7x series is support for DHT.
@
text
@d1 19
a19 4
$OpenBSD: patch-daemon_remote_c,v 1.6 2009/05/13 15:10:42 naddy Exp $
--- daemon/remote.c.orig	Wed Jun  3 09:47:08 2009
+++ daemon/remote.c	Fri Jun  5 14:49:47 2009
@@@@ -733,24 +733,24 @@@@ strlsize( char *  buf, int64_t size, size_t  buflen )
@


1.6
log
@update to 1.61: close potential CSRF security hole for web client users
@
text
@d1 4
a4 4
$OpenBSD: patch-daemon_remote_c,v 1.5 2009/05/10 19:31:44 naddy Exp $
--- daemon/remote.c.orig	Tue May 12 02:32:38 2009
+++ daemon/remote.c	Wed May 13 13:30:31 2009
@@@@ -702,24 +702,24 @@@@ strlsize( char *  buf, int64_t size, size_t  buflen )
@


1.5
log
@update to 1.60; prodded by Brad
@
text
@d1 4
a4 4
$OpenBSD: patch-daemon_remote_c,v 1.4 2009/03/04 20:59:52 naddy Exp $
--- daemon/remote.c.orig	Tue May  5 02:40:19 2009
+++ daemon/remote.c	Thu May  7 19:40:40 2009
@@@@ -692,24 +692,24 @@@@ strlsize( char *  buf, int64_t size, size_t  buflen )
@


1.4
log
@maintenance update to 1.51
@
text
@d1 4
a4 19
$OpenBSD: patch-daemon_remote_c,v 1.3 2009/02/15 18:09:29 naddy Exp $
--- daemon/remote.c.orig	Fri Feb 27 17:46:36 2009
+++ daemon/remote.c	Sun Mar  1 17:10:43 2009
@@@@ -630,11 +630,11 @@@@ strlratio2( char * buf, double ratio, size_t buflen )
     else if( (int)ratio == TR_RATIO_INF )
         tr_strlcpy( buf, "Inf", buflen );
     else if( ratio < 10.0 )
-        tr_snprintf( buf, buflen, "%'.2f", ratio );
+        tr_snprintf( buf, buflen, "%.2f", ratio );
     else if( ratio < 100.0 )
-        tr_snprintf( buf, buflen, "%'.1f", ratio );
+        tr_snprintf( buf, buflen, "%.1f", ratio );
     else
-        tr_snprintf( buf, buflen, "%'.0f", ratio );
+        tr_snprintf( buf, buflen, "%.0f", ratio );
     return buf;
 }
 
@@@@ -662,24 +662,24 @@@@ strlsize( char *  buf, int64_t size, size_t  buflen )
@


1.3
log
@Update to 1.50: A bunch of bug fixes and various small improvements as well
as initial IPv6 support.
Also submitted in near-identical form by Brad.
@
text
@d1 4
a4 4
$OpenBSD: patch-daemon_remote_c,v 1.2 2008/12/27 15:54:43 naddy Exp $
--- daemon/remote.c.orig	Thu Feb 12 22:00:51 2009
+++ daemon/remote.c	Fri Feb 13 15:33:03 2009
@@@@ -628,11 +628,11 @@@@ strlratio2( char * buf, double ratio, size_t buflen )
d19 1
a19 1
@@@@ -660,24 +660,24 @@@@ strlsize( char *  buf, int64_t size, size_t  buflen )
@


1.2
log
@Update to 1.42: improvements in peer management and bandwidth
measurement and allocation.
@
text
@d1 4
a4 4
$OpenBSD$
--- daemon/remote.c.orig	Wed Dec  3 00:44:08 2008
+++ daemon/remote.c	Thu Dec  4 17:58:32 2008
@@@@ -575,11 +575,11 @@@@ strlratio2( char * buf, double ratio, size_t buflen )
d19 1
a19 1
@@@@ -609,24 +609,24 @@@@ strlsize( char *  buf,
@


1.1
log
@Update to 1.40.  The biggest changes:
* new web interface for the GTK and daemon clients
* transmission-daemon and -remote have been completely rewritten
@
text
@d2 18
a19 18
--- daemon/remote.c.orig	Mon Nov 10 16:52:35 2008
+++ daemon/remote.c	Thu Nov 27 22:33:20 2008
@@@@ -572,11 +572,11 @@@@ strlratio( char * buf,
     {
         const double ratio = numerator / denominator;
         if( ratio < 10.0 )
-            tr_snprintf( buf, buflen, "%'.2f", ratio );
+            tr_snprintf( buf, buflen, "%.2f", ratio );
         else if( ratio < 100.0 )
-            tr_snprintf( buf, buflen, "%'.1f", ratio );
+            tr_snprintf( buf, buflen, "%.1f", ratio );
         else
-            tr_snprintf( buf, buflen, "%'.0f", ratio );
+            tr_snprintf( buf, buflen, "%.0f", ratio );
     }
     else if( numerator )
         tr_strlcpy( buf, "Infinity", buflen );
@@@@ -593,24 +593,24 @@@@ strlsize( char *  buf,
@

