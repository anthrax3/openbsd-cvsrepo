head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2009.05.12.12.18.04;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2009.05.01.13.48.26;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@bugfix update to 0.99.12; rolls in patches for the problem where 4-byte
ASNs with long prepends are seen.
@
text
@$OpenBSD: patch-bgpd_bgp_ecommunity_c,v 1.1 2009/05/01 13:48:26 sthen Exp $

AS4 bugfix by Chris Caputo <ccaputo@@alt.net>, from upstream repo.
http://code.quagga.net/cgi-bin/gitweb.cgi?p=quagga.git;a=commitdiff_plain;h=aea339f72807c34a7916d8614e030069815e144c;hp=c540835eaf0cb59921969537d8e94cc83bb717f5

--- bgpd/bgp_ecommunity.c.orig	Fri Sep  5 15:27:26 2008
+++ bgpd/bgp_ecommunity.c	Thu Apr 30 19:03:15 2009
@@@@ -673,7 +673,7 @@@@ ecommunity_ecom2str (struct ecommunity *ecom, int form
 	  eas.val = (*pnt++ << 8);
 	  eas.val |= (*pnt++);
 
-	  len = sprintf( str_buf + str_pnt, "%s%d:%d", prefix,
+	  len = sprintf( str_buf + str_pnt, "%s%u:%d", prefix,
                         eas.as, eas.val );
 	  str_pnt += len;
 	  first = 0;
@@@@ -688,7 +688,7 @@@@ ecommunity_ecom2str (struct ecommunity *ecom, int form
 	  eas.val |= (*pnt++ << 8);
 	  eas.val |= (*pnt++);
 
-	  len = sprintf (str_buf + str_pnt, "%s%d:%d", prefix,
+	  len = sprintf (str_buf + str_pnt, "%s%u:%d", prefix,
 			 eas.as, eas.val);
 	  str_pnt += len;
 	  first = 0;
@


1.1
log
@fix 4-byte ASN related crash in quaggga's bgpd. from upstream repo.
@
text
@d1 1
a1 1
$OpenBSD$
@

