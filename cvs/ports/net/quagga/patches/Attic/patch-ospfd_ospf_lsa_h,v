head	1.4;
access;
symbols
	OPENBSD_5_0:1.1.0.2
	OPENBSD_5_0_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2012.03.31.10.51.47;	author sthen;	state dead;
branches;
next	1.3;

1.3
date	2012.03.20.20.56.26;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2011.09.27.09.45.53;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2011.03.26.12.00.53;	author sthen;	state Exp;
branches
	1.1.2.1;
next	;

1.1.2.1
date	2011.09.27.09.47.24;	author sthen;	state dead;
branches;
next	;


desc
@@


1.4
log
@update to quagga 0.99.20.1 rolling in the security fixes which we had as
separate patches.

multicast support changed in 0.99.20 and not fully tested, no response to
my ports@@ call for testing, so if this breaks things send me a mail with
details.
@
text
@$OpenBSD: patch-ospfd_ospf_lsa_h,v 1.3 2012/03/20 20:56:26 sthen Exp $

from 0.99.20.1 upstream

--- ospfd/ospf_lsa.h.orig	Mon Sep 26 15:45:54 2011
+++ ospfd/ospf_lsa.h	Tue Mar 20 20:05:06 2012
@@@@ -152,6 +152,7 @@@@ struct router_lsa_link
 };
 
 /* OSPF Router-LSAs structure. */
+#define OSPF_ROUTER_LSA_MIN_SIZE                  16U /* w/1 link descriptor */
 struct router_lsa
 {
   struct lsa_header header;
@@@@ -169,6 +170,7 @@@@ struct router_lsa
 };
 
 /* OSPF Network-LSAs structure. */
+#define OSPF_NETWORK_LSA_MIN_SIZE                  8U /* w/1 router-ID */
 struct network_lsa
 {
   struct lsa_header header;
@@@@ -177,6 +179,7 @@@@ struct network_lsa
 };
 
 /* OSPF Summary-LSAs structure. */
+#define OSPF_SUMMARY_LSA_MIN_SIZE                  8U /* w/1 TOS metric block */
 struct summary_lsa
 {
   struct lsa_header header;
@@@@ -186,6 +189,7 @@@@ struct summary_lsa
 };
 
 /* OSPF AS-external-LSAs structure. */
+#define OSPF_AS_EXTERNAL_LSA_MIN_SIZE             16U /* w/1 TOS forwarding block */
 struct as_external_lsa
 {
   struct lsa_header header;
@


1.3
log
@add SECURITY patches from quagga 0.99.20.1

CVE-2012-0249 - Quagga ospfd DoS on malformed LS-Update packet
CVE-2012-0250 - Quagga ospfd DoS on malformed Network-LSA data
CVE-2012-0255 - Quagga bgpd DoS on malformed OPEN message
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@SECURITY update to quagga 0.99.19

CVE-2011-3323: ospf6d *stack-based buffer overflow*, inter-area-prefix LSAs
CVE-2011-3324: ospf6d assertion failure; DD LSAs with over-length header
CVE-2011-3325: ospf crash(?) if a hello has a truncated header or invalid type
CVE-2011-3326: ospf null deref if a link state update LSA has an unknown type
CVE-2011-3327: bgp buffer overflow with malformed UPDATE (extended communities)
@
text
@d1 1
a1 1
$OpenBSD: patch-ospfd_ospf_lsa_h,v 1.1 2011/03/26 12:00:53 sthen Exp $
d3 1
a3 2
ospfd: Compile fix for opaque support
http://code.quagga.net/cgi-bin/gitweb.cgi?p=quagga.git;a=commitdiff;h=d71ea65270408a45e4bec036671ec73b24b994b4
d5 20
a24 3
--- ospfd/ospf_lsa.h.orig	Mon Mar 21 11:09:13 2011
+++ ospfd/ospf_lsa.h	Sat Mar 26 11:18:46 2011
@@@@ -114,6 +114,9 @@@@ struct ospf_lsa
d26 6
a31 5
   /* Refreshement List or Queue */
   int refresh_list;
+  
+  /* For Type-9 Opaque-LSAs */
+  struct ospf_interface *oi;
d34 5
a38 1
 /* OSPF LSA Link Type. */
@


1.1
log
@- SECURITY update to 0.99.18 (pointed out by Brad)
CVE-2010-1674 null pointer deref with malformed BGP Extended Communities
CVE-2010-1675 BGP session reset with malformed AS-path

- install info documentation

- patches added: build fixes from upstream
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@MFC: SECURITY update to quagga 0.99.19

CVE-2011-3323: ospf6d *stack-based buffer overflow*, inter-area-prefix LSAs
CVE-2011-3324: ospf6d assertion failure; DD LSAs with over-length header
CVE-2011-3325: ospf crash(?) if a hello has a truncated header or invalid type
CVE-2011-3326: ospf null deref if a link state update LSA has an unknown type
CVE-2011-3327: bgp buffer overflow with malformed UPDATE (extended communities)
@
text
@d1 1
a1 1
$OpenBSD: patch-ospfd_ospf_lsa_h,v 1.1 2011/03/26 12:00:53 sthen Exp $
@


