head	1.52;
access;
symbols
	OPENBSD_6_0:1.52.0.2
	OPENBSD_6_0_BASE:1.52
	OPENBSD_5_9:1.49.0.2
	OPENBSD_5_9_BASE:1.49
	OPENBSD_5_8:1.45.0.4
	OPENBSD_5_8_BASE:1.45
	OPENBSD_5_7:1.43.0.2
	OPENBSD_5_7_BASE:1.43
	OPENBSD_5_6:1.41.0.2
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.39.0.2
	OPENBSD_5_5_BASE:1.39
	OPENBSD_5_4:1.37.0.2
	OPENBSD_5_4_BASE:1.37
	OPENBSD_5_3:1.33.0.2
	OPENBSD_5_3_BASE:1.33
	OPENBSD_5_2:1.29.0.2
	OPENBSD_5_2_BASE:1.29
	OPENBSD_5_1_BASE:1.24
	OPENBSD_5_1:1.24.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.18.0.2
	OPENBSD_4_9_BASE:1.18
	OPENBSD_4_8:1.15.0.2
	OPENBSD_4_8_BASE:1.15
	OPENBSD_4_7:1.14.0.4
	OPENBSD_4_7_BASE:1.14
	OPENBSD_4_6:1.14.0.2
	OPENBSD_4_6_BASE:1.14
	OPENBSD_4_5:1.12.0.2
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.11.0.2
	OPENBSD_4_4_BASE:1.11
	OPENBSD_4_3:1.10.0.2
	OPENBSD_4_3_BASE:1.10
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.7.0.4
	OPENBSD_4_1_BASE:1.7
	OPENBSD_4_0:1.7.0.2
	OPENBSD_4_0_BASE:1.7
	OPENBSD_3_9:1.6.0.4
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.6.0.2
	OPENBSD_3_8_BASE:1.6
	OPENBSD_3_7:1.4.0.2
	OPENBSD_3_7_BASE:1.4
	OPENBSD_3_6:1.2.0.4
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.2
	OPENBSD_3_5_BASE:1.2
	david_2003-Dec-11:1.1.1.1
	david:1.1.1;
locks; strict;
comment	@# @;


1.52
date	2016.06.27.19.55.48;	author jca;	state Exp;
branches;
next	1.51;
commitid	t3T6RWJcTtuuM83Z;

1.51
date	2016.03.31.22.35.41;	author jca;	state Exp;
branches;
next	1.50;
commitid	tJ4cLd4hcYLHnbgo;

1.50
date	2016.03.22.12.57.54;	author jca;	state Exp;
branches;
next	1.49;
commitid	UMHjWDfFsEz4krLO;

1.49
date	2015.10.08.21.19.22;	author sthen;	state Exp;
branches
	1.49.2.1;
next	1.48;
commitid	pVDZUjJm7yyuQSI1;

1.48
date	2015.10.05.16.29.02;	author sthen;	state Exp;
branches;
next	1.47;
commitid	AqjFzXOPaoxpieFE;

1.47
date	2015.09.11.20.56.10;	author sthen;	state Exp;
branches;
next	1.46;
commitid	8iYmZSwhURJLSWxG;

1.46
date	2015.09.11.16.15.31;	author sthen;	state Exp;
branches;
next	1.45;
commitid	lGpjlgmXKJM994XS;

1.45
date	2015.07.15.22.55.06;	author sthen;	state Exp;
branches;
next	1.44;
commitid	sGeJdorM10V5E0qi;

1.44
date	2015.04.18.10.39.34;	author sthen;	state Exp;
branches;
next	1.43;
commitid	2Bd6k7XvX42vQPKv;

1.43
date	2015.01.19.15.44.12;	author sthen;	state Exp;
branches;
next	1.42;
commitid	D8SUl7uPa22cOBAb;

1.42
date	2014.09.23.23.06.18;	author sthen;	state Exp;
branches;
next	1.41;
commitid	daGfmdwtEO5C25dc;

1.41
date	2014.06.27.00.06.42;	author sthen;	state Exp;
branches;
next	1.40;
commitid	Yo91whXNIY7rSjZW;

1.40
date	2014.04.15.08.53.04;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2013.10.31.21.12.13;	author sthen;	state Exp;
branches;
next	1.38;

1.38
date	2013.10.19.13.26.56;	author sthen;	state Exp;
branches;
next	1.37;

1.37
date	2013.05.14.18.41.14;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2013.04.18.20.29.08;	author sthen;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.21.08.46.35;	author ajacoutot;	state Exp;
branches;
next	1.34;

1.34
date	2013.03.11.11.35.55;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2013.02.09.14.49.52;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2013.01.04.00.24.10;	author sthen;	state Exp;
branches;
next	1.31;

1.31
date	2012.12.08.18.42.43;	author brad;	state Exp;
branches;
next	1.30;

1.30
date	2012.09.19.16.35.06;	author sthen;	state Exp;
branches;
next	1.29;

1.29
date	2012.04.28.11.06.12;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2012.04.28.10.51.44;	author ajacoutot;	state Exp;
branches;
next	1.27;

1.27
date	2012.03.31.10.51.47;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2012.03.29.13.38.49;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2012.03.20.20.56.26;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2012.01.17.17.22.56;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2011.11.16.00.20.09;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2011.10.02.02.01.07;	author sthen;	state Exp;
branches;
next	1.21;

1.21
date	2011.09.27.09.45.53;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2011.05.11.12.03.19;	author jasper;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	2011.03.26.12.00.53;	author sthen;	state Exp;
branches;
next	1.18;

1.18
date	2010.11.19.22.31.37;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2010.10.18.18.36.57;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.09.24.09.30.04;	author sthen;	state Exp;
branches;
next	1.15;

1.15
date	2010.07.09.11.46.02;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2009.05.12.12.18.04;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2009.05.01.13.48.26;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2009.02.18.00.37.53;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2008.05.23.12.55.58;	author claudio;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.15.22.36.58;	author merdely;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.12.20.31.17;	author rui;	state Exp;
branches;
next	1.8;

1.8
date	2007.06.20.18.05.36;	author rui;	state Exp;
branches;
next	1.7;

1.7
date	2006.04.12.21.01.45;	author david;	state Exp;
branches;
next	1.6;

1.6
date	2005.08.10.08.53.26;	author aanriot;	state Exp;
branches;
next	1.5;

1.5
date	2005.06.09.20.42.37;	author robert;	state Exp;
branches;
next	1.4;

1.4
date	2004.11.30.23.12.53;	author alek;	state Exp;
branches;
next	1.3;

1.3
date	2004.10.13.03.10.49;	author danh;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.02.06.50.55;	author david;	state Exp;
branches;
next	1.1;

1.1
date	2003.12.11.19.00.59;	author david;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2003.12.11.19.00.59;	author david;	state Exp;
branches;
next	;

1.20.2.1
date	2011.09.27.09.47.24;	author sthen;	state Exp;
branches;
next	1.20.2.2;

1.20.2.2
date	2011.10.02.02.03.26;	author sthen;	state Exp;
branches;
next	;

1.49.2.1
date	2016.04.15.14.32.41;	author jca;	state Exp;
branches;
next	;
commitid	6N65xJPD7OSEGrzX;


desc
@@


1.52
log
@Repair IPV6_MINHOPCOUNT support.

ok sthen@@
@
text
@# $OpenBSD: Makefile,v 1.51 2016/03/31 22:35:41 jca Exp $

COMMENT=	multi-threaded routing daemon

DISTNAME=	quagga-1.0.20160315
REVISION=	1
CATEGORIES=	net
MASTER_SITES=	http://download.savannah.gnu.org/releases/quagga/
EXTRACT_SUFX=	.tar.xz

SHARED_LIBS=	ospf		0.1 \
		ospfapiclient	0.0 \
		zebra		1.0

HOMEPAGE=	http://www.quagga.net/

# GPLv2+
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c curses execinfo m readline termcap

LOCALSTATEDIR=	${BASELOCALSTATEDIR}/quagga

BUILD_DEPENDS=	lang/gawk
LIB_DEPENDS=	devel/libexecinfo

USE_GMAKE=	Yes
SYSCONFDIR=	${BASESYSCONFDIR}/quagga
SEPARATE_BUILD=	Yes
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ARGS+= --includedir=${LOCALBASE}/include/quagga \
		--enable-user=_quagga \
		--enable-group=_quagga \
		--enable-vty-group=_quagga \
		--enable-vtysh
# trust the compiler to use PIE by default where supported.
CONFIGURE_ARGS+= --disable-pie
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib" \
		LIBS=-lcurses

MAKE_FLAGS=	MAKEINFO="makeinfo --no-split"
FAKE_FLAGS=	exampledir='${PREFIX}/share/examples/quagga' \
		${MAKE_FLAGS}

FLAVORS=	snmp
FLAVOR?=

.if ${FLAVOR:Msnmp}
LIB_DEPENDS+=	net/net-snmp
WANTLIB += crypto kvm netsnmp netsnmpagent netsnmpmibs perl util
CONFIGURE_ARGS+= --enable-snmp=agentx
.endif

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/quagga
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/quagga
	${INSTALL_DATA} ${WRKSRC}/SERVICES ${PREFIX}/share/doc/quagga
	${INSTALL_DATA} ${WRKSRC}/doc/quagga.info* ${PREFIX}/info
	perl -pi -e 's,^(! *)?log file (/.*/)?,$$1log file /var/log/quagga/,' \
	    ${PREFIX}/share/examples/quagga/*conf*

.include <bsd.port.mk>
@


1.51
log
@Fix quagga/ospfd.

Upstream assumes that we support passing an interface index instead of
an address in struct ip_mreq.imr_interface (hack supported by FreeBSD &
NetBSD).

ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2016/03/22 12:57:54 jca Exp $
d6 1
a6 1
REVISION=	0
@


1.50
log
@Update to 1.0.20160315, ok sthen@@ (maintainer)

Announce:

  https://lists.quagga.net/pipermail/quagga-users/2016-March/014293.html

ChangeLog:

  http://savannah.spinellicreations.com/quagga/quagga-1.0.20160315.changelog.txt
  http://savannah.spinellicreations.com/quagga/quagga-1.0.20160309.changelog.txt

Note that this update brings a fix for CVE-2016-2342.  This vulnerability
affects quagga MPLS VPN setups which probably aren't possible on OpenBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/10/08 21:19:22 sthen Exp $
d6 1
d30 2
a31 1
CONFIGURE_STYLE= gnu
@


1.49
log
@Bump some ports which reference if_msghdr in their source, so that package
updates are triggered. This is following the struct if_data ABI change a few
days ago; if_msghdr has an embedded if_data.  Some may be unnecessary, but
some are definitely needed and bumps are cheaper than debugging.
Problem reported with wpa_supplicant by Mikolaj Kucharski.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2015/10/05 16:29:02 sthen Exp $
d5 1
a5 2
DISTNAME=	quagga-0.99.24.1
REVISION=	4
@


1.49.2.1
log
@Backport fix for ospfd/ripd.

Upstream assumes that we support passing an interface index instead of
an address in struct ip_mreq.imr_interface (hack supported by FreeBSD &
NetBSD).

Prompted by a report from Christophe "STux", ok sthen@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2015/10/08 21:19:22 sthen Exp $
d6 1
a6 1
REVISION=	5
d30 1
a30 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
@


1.48
log
@REVISION bumps following the additional member in struct if_data,
to make sure packages get updated
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2015/09/11 20:56:10 sthen Exp $
d6 1
a6 1
REVISION=	3
@


1.47
log
@-RTF_XRESOLVE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2015/09/11 16:15:31 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.46
log
@bump; ifmedia64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2015/07/15 22:55:06 sthen Exp $
d6 1
a6 1
REVISION=	1
@


1.45
log
@Pass --disable-pie to configure all the time and rely on the compiler using
PIE by default where supported.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2015/04/18 10:39:34 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.44
log
@update to quagga 0.99.24.1, from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2015/01/19 15:44:12 sthen Exp $
d6 1
d36 1
a36 1
.if ${MACHINE_ARCH:Marm}
a37 1
.endif
@


1.43
log
@build isisd in quagga, not tested but no reason not to build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/09/23 23:06:18 sthen Exp $
d5 1
a5 2
DISTNAME=	quagga-0.99.23.1
REVISION=	0
a30 1
		--enable-isisd \
@


1.42
log
@update to quagga-0.99.23.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2014/06/27 00:06:42 sthen Exp $
d6 1
d32 1
@


1.41
log
@update to quagga-0.99.23
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2014/04/15 08:53:04 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.23
@


1.40
log
@No need to explicitely SUBST_VARS LOCALSTATEDIR anymore.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/10/31 21:12:13 sthen Exp $
d5 1
a5 2
DISTNAME=	quagga-0.99.22.4
REVISION=	0
d10 1
a10 1
SHARED_LIBS=	ospf		0.0 \
d12 1
a12 1
		zebra		0.0
d19 1
a19 1
WANTLIB=	c curses m readline termcap
d24 2
d29 1
a29 2
CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
d38 3
a40 1
CONFIGURE_ENV=	LIBS=-lcurses
d50 2
a51 2
LIB_DEPENDS=	net/net-snmp
WANTLIB+=	crypto netsnmp
a52 4
CONFIGURE_ENV+=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
.else
CONFIGURE_ARGS+= --disable-snmp
@


1.39
log
@bump REVISION for any ports using route messages. regen some distinfos and
remove unnecessary USE_GROFFs while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/10/19 13:26:56 sthen Exp $
a22 1
SUBST_VARS=	LOCALSTATEDIR
@


1.38
log
@update to quagga 0.9.22.4, including a security fix for an issue with
OSPF-API, and discard malformed LSAs which don't cause a problem for
quagga itself but when passed to other implementations can trigger
http://www.kb.cert.org/vuls/id/229804 (i.e. to limit the distribution
of such bad LSAs).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/05/14 18:41:14 brad Exp $
d6 1
@


1.37
log
@Update to Quagga 0.99.22.1.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/04/18 20:29:08 sthen Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.22.1
@


1.36
log
@Update to quagga 0.99.22, merged from diffs from myself and Brad. Also:
- replace MESSAGE with some @@sample'd config files
- install rc.d scripts
- multicast code still ported from older version (new one needs RFC3678)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/03/21 08:46:35 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.22
@


1.35
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/03/11 11:35:55 espie Exp $
d5 5
a9 2
DISTNAME=	quagga-0.99.21
REVISION=	1
a12 2
CATEGORIES=	net
MASTER_SITES=	http://www.quagga.net/download/
d35 1
a35 1
.if ${MACHINE_ARCH:Mhppa} || ${MACHINE_ARCH:Marm}
d50 1
a50 1
CONFIGURE_ARGS+= --enable-snmp
d62 2
@


1.34
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2013/02/09 14:49:52 sthen Exp $
a24 1
USE_LIBTOOL=	Yes
@


1.33
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2013/01/04 00:24:10 sthen Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.32
log
@revert multicast changes in last upstream release, they do not work on OS
which require the interface IP address for IP_{ADD,DROP}_MEMBERSHIP

reported by Raphael Mazelier
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2012/12/08 18:42:43 brad Exp $
d50 1
a50 1
.if ${FLAVOR:L:Msnmp}
@


1.31
log
@Fix a BGP DoS issue in bgp_capability_orf(). CVE-2012-1820

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2012/09/19 16:35:06 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.30
log
@update to Quagga 0.99.21
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2012/04/28 11:06:12 ajacoutot Exp $
d6 1
@


1.29
log
@Use LOCALSTATEDIR instead of local variables.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2012/04/28 10:51:44 ajacoutot Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.20.1
a11 2
REVISION=	0

d31 1
a31 1
AUTOCONF_VERSION= 2.68
@


1.28
log
@Use LOCALSTATEDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2012/03/31 10:51:47 sthen Exp $
d12 2
d24 2
a25 4
STATEDIR?=	/var/quagga
SUBST_VARS=	STATEDIR

LOCALSTATEDIR=	${STATEDIR}
@


1.27
log
@update to quagga 0.99.20.1 rolling in the security fixes which we had as
separate patches.

multicast support changed in 0.99.20 and not fully tested, no response to
my ports@@ call for testing, so if this breaks things send me a mail with
details.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2012/03/29 13:38:49 sthen Exp $
d25 2
a34 1
		--localstatedir=${STATEDIR} \
@


1.26
log
@Change SEPARATE_BUILD=(concurrent|simple) to Yes; bsd.port.mk doesn't
make a distinction between these.  ok aja@@ dcoppa@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2012/03/20 20:56:26 sthen Exp $
d5 1
a5 2
DISTNAME=	quagga-0.99.19
REVISION=	3
d30 2
a31 1
CONFIGURE_STYLE= gnu
@


1.25
log
@add SECURITY patches from quagga 0.99.20.1

CVE-2012-0249 - Quagga ospfd DoS on malformed LS-Update packet
CVE-2012-0250 - Quagga ospfd DoS on malformed Network-LSA data
CVE-2012-0255 - Quagga bgpd DoS on malformed OPEN message
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/01/17 17:22:56 sthen Exp $
d30 1
a30 1
SEPARATE_BUILD=	concurrent
@


1.24
log
@use SYSCONFDIR/BASESYSCONFDIR to avoid "CONFIGURE_STYLE=gnu old" hack
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2011/11/16 00:20:09 sthen Exp $
d6 1
a6 1
REVISION=	2
@


1.23
log
@bumps; net/if.h
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2011/10/02 02:01:07 sthen Exp $
d6 1
a6 1
REVISION=	1
d24 1
a24 1
SUBST_VARS=	CONFDIR STATEDIR
d29 1
a29 1
CONFDIR=	${SYSCONFDIR}/quagga
d31 1
a31 1
CONFIGURE_STYLE= gnu old
a32 1
		--sysconfdir=${CONFDIR} \
d37 1
a37 3
		--enable-vtysh \
		--mandir=${LOCALBASE}/man \
		--infodir=${LOCALBASE}/info
@


1.22
log
@fix ospf segfault introduced in 0.99.19, backported from 0.99.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/09/27 09:45:53 sthen Exp $
d6 1
a6 1
REVISION=	0
@


1.21
log
@SECURITY update to quagga 0.99.19

CVE-2011-3323: ospf6d *stack-based buffer overflow*, inter-area-prefix LSAs
CVE-2011-3324: ospf6d assertion failure; DD LSAs with over-length header
CVE-2011-3325: ospf crash(?) if a hello has a truncated header or invalid type
CVE-2011-3326: ospf null deref if a link state update LSA has an unknown type
CVE-2011-3327: bgp buffer overflow with malformed UPDATE (extended communities)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/05/11 12:03:19 jasper Exp $
d6 1
@


1.20
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and delete everything under the @@sample'd directory instead of the
directory itself to prevent a warning from pkg_delete(1) trying to
remove a non existing directory and to help preventing left-over files
and directories.

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/03/26 12:00:53 sthen Exp $
d5 4
a8 4
DISTNAME=	quagga-0.99.18
REVISION=	0
SHARED_LIBS=    ospf	0.0     \
                zebra	0.0
d27 1
a27 1
USE_GROFF =	Yes
d30 2
a31 2
CONFIGURE_STYLE=gnu old
CONFIGURE_ARGS+=--includedir=${LOCALBASE}/include/quagga \
d40 3
d45 3
a47 1
FAKE_FLAGS=    exampledir='${PREFIX}/share/examples/quagga'
d49 1
a49 2
# XXX broken
#FLAVORS=	snmp
d54 1
@


1.20.2.1
log
@MFC: SECURITY update to quagga 0.99.19

CVE-2011-3323: ospf6d *stack-based buffer overflow*, inter-area-prefix LSAs
CVE-2011-3324: ospf6d assertion failure; DD LSAs with over-length header
CVE-2011-3325: ospf crash(?) if a hello has a truncated header or invalid type
CVE-2011-3326: ospf null deref if a link state update LSA has an unknown type
CVE-2011-3327: bgp buffer overflow with malformed UPDATE (extended communities)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2011/09/27 09:45:53 sthen Exp $
d5 4
a8 4
DISTNAME=	quagga-0.99.19
SHARED_LIBS=	ospf		0.0 \
		ospfapiclient	0.0 \
		zebra		0.0
d27 1
a27 1
USE_LIBTOOL=	Yes
d30 2
a31 2
CONFIGURE_STYLE= gnu old
CONFIGURE_ARGS+= --includedir=${LOCALBASE}/include/quagga \
a39 3
.if ${MACHINE_ARCH:Mhppa} || ${MACHINE_ARCH:Marm}
CONFIGURE_ARGS+= --disable-pie
.endif
d42 1
a42 3
MAKE_FLAGS=	MAKEINFO="makeinfo --no-split"
FAKE_FLAGS=	exampledir='${PREFIX}/share/examples/quagga' \
		${MAKE_FLAGS}
d44 2
a45 1
FLAVORS=	snmp
a49 1
WANTLIB+=	crypto netsnmp
@


1.20.2.2
log
@MFC: fix ospf segfault introduced in 0.99.19, backported from 0.99.20
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20.2.1 2011/09/27 09:47:24 sthen Exp $
a5 1
REVISION=	0
@


1.19
log
@- SECURITY update to 0.99.18 (pointed out by Brad)
CVE-2010-1674 null pointer deref with malformed BGP Extended Communities
CVE-2010-1675 BGP session reset with malformed AS-path

- install info documentation

- patches added: build fixes from upstream
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2010/11/19 22:31:37 espie Exp $
d6 1
@


1.18
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/10/18 18:36:57 espie Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.17
d35 1
a36 1
		--enable-vtysh-group=_quagga \
d60 1
@


1.17
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/09/24 09:30:04 sthen Exp $
d24 1
a24 1
BUILD_DEPENDS=	::lang/gawk
d48 1
a48 1
LIB_DEPENDS=	::net/net-snmp
@


1.16
log
@update to 0.99.17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/07/09 11:46:02 sthen Exp $
d26 1
@


1.15
log
@update to 0.99.16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2009/05/12 12:18:04 sthen Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.16
@


1.14
log
@bugfix update to 0.99.12; rolls in patches for the problem where 4-byte
ASNs with long prepends are seen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/05/01 13:48:26 sthen Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.12
d18 2
a19 1
WANTLIB=		c curses m readline termcap
d24 1
@


1.13
log
@fix 4-byte ASN related crash in quaggga's bgpd. from upstream repo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2009/02/18 00:37:53 sthen Exp $
d5 1
a5 2
DISTNAME=	quagga-0.99.11
PKGNAME=	${DISTNAME}p0
@


1.12
log
@update quagga to 0.99.11. the SNMP flavour was already broken,
disable it for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/05/23 12:55:58 claudio Exp $
d6 1
@


1.11
log
@quagga does not handel multiple RTM_VERSIONs gracefully. Patch it to ignore
messages with wrong RTM_VERSION instead of trying to parse them and crashing
doing so. OK rui@@, jasper@@, looks good mbalmer@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/15 22:36:58 merdely Exp $
d5 1
a5 2
DISTNAME=	quagga-0.99.9
PKGNAME=	${DISTNAME}p0
d13 1
a13 1
# GPL
d40 2
a41 1
FLAVORS=	snmp
@


1.10
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/12 20:31:17 rui Exp $
d6 1
@


1.9
log
@SECURITY: update quagga to 0.99.9 which fixes some DoS vulnerabilities.
Reference: http://secunia.com/advisories/26744/

ok pyr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/06/20 18:05:36 rui Exp $
d3 1
a3 1
COMMENT=	"multi-threaded routing daemon"
@


1.8
log
@update quagga to 0.99.7

help and ok pyr@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/04/12 21:01:45 david Exp $
d5 1
a5 1
DISTNAME=	quagga-0.99.7
d18 1
a18 1
WANTLIB=		c curses m
d27 1
a27 1
CONFIGURE_ARGS+=--includedir=${PREFIX}/include/quagga \
d33 3
a35 1
		--enable-vtysh-group=_quagga
@


1.7
log
@remove myself from MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/08/10 08:53:26 aanriot Exp $
d5 3
a7 2
DISTNAME=	quagga-0.96.4
PKGNAME=	${DISTNAME}p3
d20 1
a20 1
STATEDIR?=	/var/zebra
a22 3
# you might need debugging, it's a developer release !
#CFLAGS+=	-g

d24 1
a24 1
CONFDIR=	${SYSCONFDIR}/zebra
d27 7
a33 5
CONFIGURE_ARGS+=--includedir=${PREFIX}/include/zebra
CONFIGURE_ARGS+=--sysconfdir=${CONFDIR}
CONFIGURE_ARGS+=--localstatedir=${STATEDIR}
CONFIGURE_ARGS+=--enable-user=_quagga
CONFIGURE_ARGS+=--enable-group=_quagga
d36 2
d42 1
a42 1
LIB_DEPENDS=	netsnmp.6.2::net/net-snmp
a49 9
post-extract:
.for f in vtysh.1 bgpd.8 ospf6d.8 ospfd.8 ripd.8 ripngd.8 zebra.8 quagga.info
	@@cd ${WRKSRC}/doc; sed \
		-e s#/usr/local/etc#@@sysconfdir@@#g \
		-e s#/usr/local/sbin#@@prefix@@/sbin#g \
			${f} > ${f}.in && \
	rm -f ${f}
.endfor

d51 3
a53 5
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/zebra
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/zebra
	${INSTALL_DATA} ${WRKSRC}/README ${PREFIX}/share/doc/zebra
	${INSTALL_DATA} ${WRKSRC}/SERVICES ${PREFIX}/share/doc/zebra
	${INSTALL_DATA} ${WRKINST}${SYSCONFDIR}/zebra/* ${PREFIX}/share/examples/zebra
@


1.6
log
@forgot to bump PKGNAME.

spotted by sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/06/09 20:42:37 robert Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p2
a10 2

MAINTAINER=	David Krause <david@@openbsd.org>
@


1.5
log
@We don't have RTM_OLDADD and RTM_OLDDEL caused by the SIOCADDRT and SIOCDELRT (4.3BSD routing table) ioctls anymore. So don't try to use them.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/11/30 23:12:53 alek Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p1
@


1.4
log
@- Replace INSTALL with @@new(user|group), MESSAGE and @@sample
- Kill DEINSTALL
- Add WANTLIB marker
- Bump PKGNAME

ok david@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/10/13 03:10:49 danh Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
@


1.3
log
@convert snmp FLAVOR to use net-snmp.
I do not see how this worked in the first place without smux support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/01/02 06:50:55 david Exp $
d6 1
d19 1
@


1.2
log
@install SERVICES doc file
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2003/12/11 19:00:59 david Exp $
d40 1
a40 1
LIB_DEPENDS=	snmp.42::net/ucd-snmp
d42 2
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2003/05/12 18:02:45 sturm Exp $
d59 1
@


1.1.1.1
log
@Initial import of quagga-0.96.4

Quagga is a routing software suite, providing implementations of OSPFv2,
OSPFv3, RIP v1 and v2, RIPv3 and BGPv4 for Unix platforms, particularly
FreeBSD and Linux and also NetBSD, to mention a few. Quagga is a fork of
GNU Zebra which was developed by Kunihiro Ishiguro. The Quagga tree aims
to build a more involved community around Quagga than the current
centralized model of GNU Zebra.

WWW: http://www.quagga.net/
@
text
@@
