head	1.9;
access;
symbols
	OPENBSD_5_9:1.8.0.10
	OPENBSD_5_9_BASE:1.8
	OPENBSD_5_8:1.8.0.12
	OPENBSD_5_8_BASE:1.8
	OPENBSD_5_7:1.8.0.8
	OPENBSD_5_7_BASE:1.8
	OPENBSD_5_6:1.8.0.6
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.8.0.4
	OPENBSD_5_5_BASE:1.8
	OPENBSD_5_4:1.8.0.2
	OPENBSD_5_4_BASE:1.8
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	OPENBSD_5_2:1.6.0.2
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.5
	OPENBSD_5_1:1.5.0.4
	OPENBSD_5_0:1.5.0.2
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.4.0.2
	OPENBSD_4_9_BASE:1.4
	OPENBSD_4_8:1.3.0.8
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.6
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.4
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.2
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.2.0.4
	OPENBSD_4_4_BASE:1.2
	OPENBSD_4_3:1.2.0.2
	OPENBSD_4_3_BASE:1.2
	steven-20071022:1.1.1.1
	steven:1.1.1;
locks; strict;
comment	@# @;


1.9
date	2016.04.21.20.28.26;	author naddy;	state dead;
branches;
next	1.8;
commitid	iy5UPuNw6GqcOIVp;

1.8
date	2013.06.01.14.18.40;	author ajacoutot;	state Exp;
branches;
next	1.7;

1.7
date	2012.08.12.17.33.04;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2012.04.05.16.08.55;	author jasper;	state Exp;
branches;
next	1.5;

1.5
date	2011.07.07.13.14.29;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.09.14.12.34.42;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2008.08.31.17.16.22;	author steven;	state Exp;
branches;
next	1.2;

1.2
date	2008.02.02.21.17.50;	author steven;	state Exp;
branches;
next	1.1;

1.1
date	2007.10.22.19.32.24;	author steven;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.10.22.19.32.24;	author steven;	state Exp;
branches;
next	;


desc
@@


1.9
log
@remove clients for discontinued Microsoft Messenger service
noticed by Frederic Cambus
@
text
@$OpenBSD: patch-configure,v 1.8 2013/06/01 14:18:40 ajacoutot Exp $
--- configure.orig	Wed May 23 22:28:25 2012
+++ configure	Sun Jul  8 18:18:32 2012
@@@@ -2305,8 +2305,8 @@@@ case `uname -s` in
 	OpenBSD | FreeBSD | NetBSD)
 		# *BSD has important stuff (from ports)
 		# in /usr/local ...
-		CFLAGS="$CFLAGS -I/usr/local/include -L/usr/local/lib"
-		LDFLAGS="$LDFLAGS -L/usr/local/lib"
+		CFLAGS="$CFLAGS $CPPFLAGS"
+		LDFLAGS="$LDFLAGS"
 		FOUND_OS="bsd"
 		;;
 	Darwin)
@@@@ -2336,7 +2336,7 @@@@ $as_echo "maybe" >&6; }
 esac
 
 
-TCLSH=`which tclsh`
+#TCLSH=`which tclsh`
 VERSION=`echo "puts $::tcl_version ; exit" | ${TCLSH}`
 # Check whether --enable-version-check was given.
 if test "${enable_version_check+set}" = set; then :
@@@@ -3036,17 +3036,9 @@@@ $as_echo "$ac_cv_prog_cc_g" >&6; }
 if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
-  if test "$GCC" = yes; then
-    CFLAGS="-g -O2"
-  else
-    CFLAGS="-g"
-  fi
+  CFLAGS="-g"
 else
-  if test "$GCC" = yes; then
-    CFLAGS="-O2"
-  else
-    CFLAGS=
-  fi
+  CFLAGS=
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
 $as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
@@@@ -3389,18 +3381,11 @@@@ $as_echo "$ac_cv_prog_cxx_g" >&6; }
 if test "$ac_test_CXXFLAGS" = set; then
   CXXFLAGS=$ac_save_CXXFLAGS
 elif test $ac_cv_prog_cxx_g = yes; then
-  if test "$GXX" = yes; then
-    CXXFLAGS="-g -O2"
-  else
-    CXXFLAGS="-g"
-  fi
+  CXXFLAGS="-g"
 else
-  if test "$GXX" = yes; then
-    CXXFLAGS="-O2"
-  else
-    CXXFLAGS=
-  fi
+  CXXFLAGS=
 fi
+
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@@@ -3445,8 +3430,7 @@@@ $as_echo_n "checking tcl build dir... " >&6; }
 		/usr/local/lib64 \
 		/usr/lib64 \
 		/usr/lib64/tcl8.* \
-		/usr/local/lib64/tcl8.* \
-		`locate tclConfig.sh`"
+		/usr/local/lib64/tcl8.*"
 
 	for i in $dirs ; do
 
@@@@ -3570,8 +3554,7 @@@@ $as_echo_n "checking tk build dir... " >&6; }
 		/usr/local/lib64 \
 		/usr/lib64 \
 		/usr/lib64/tk8.* \
-		/usr/local/lib64/tk8.* \
-		`locate tkConfig.sh`"
+		/usr/local/lib64/tk8.*"
 
 
 		for i in $dirs ; do
@


1.8
log
@Remove pthread patches.
@
text
@d1 1
a1 1
$OpenBSD: patch-configure,v 1.7 2012/08/12 17:33:04 jasper Exp $
@


1.7
log
@- update to 0.98.9

from Azwaw OUSADOU (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
a85 26
@@@@ -4946,13 +4929,13 @@@@ fi
 done
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -lpthread" >&5
-$as_echo_n "checking for pthread_create in -lpthread... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for pthread_create in -pthread" >&5
+$as_echo_n "checking for pthread_create in -pthread... " >&6; }
 if ${ac_cv_lib_pthread_pthread_create+:} false; then :
   $as_echo_n "(cached) " >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpthread  $LIBS"
+LIBS="-pthread  $LIBS"
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
@@@@ -4983,7 +4966,7 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_pthread_pthread_create" >&5
 $as_echo "$ac_cv_lib_pthread_pthread_create" >&6; }
 if test "x$ac_cv_lib_pthread_pthread_create" = xyes; then :
-  LIBPTHREAD="-lpthread"
+  LIBPTHREAD="-pthread"
 fi
 
 if test "$LIBPTHREAD" = ""; then
@


1.6
log
@- switch for farsight2 to farstream. all patches taken from upstream repositories.

ok aja@@
@
text
@d1 4
a4 52
$OpenBSD: patch-configure,v 1.5 2011/07/07 13:14:29 jasper Exp $

Port from farsight2 to farstream, from Fedora's amsn-0.98.4-farstream.patch

--- configure.orig	Sun Dec  5 04:23:14 2010
+++ configure	Thu Apr  5 14:18:17 2012
@@@@ -593,15 +593,15 @@@@ ac_includes_default="\
 
 ac_subst_vars='LTLIBOBJS
 LIBOBJS
-HAVE_FARSIGHT
+HAVE_FARSTREAM
 HAVE_GUPNP
 GUPNP_LIBS
 GUPNP_CFLAGS
 HAVE_LIBV4L
 LIBV4L_LIBS
 LIBV4L_CFLAGS
-FARSIGHT2_LIBS
-FARSIGHT2_CFLAGS
+FARSTREAM_LIBS
+FARSTREAM_CFLAGS
 GST_INTERFACES_LIBS
 GST_INTERFACES_CFLAGS
 GST_LIBS
@@@@ -730,8 +730,8 @@@@ GST_CFLAGS
 GST_LIBS
 GST_INTERFACES_CFLAGS
 GST_INTERFACES_LIBS
-FARSIGHT2_CFLAGS
-FARSIGHT2_LIBS
+FARSTREAM_CFLAGS
+FARSTREAM_LIBS
 LIBV4L_CFLAGS
 LIBV4L_LIBS
 GUPNP_CFLAGS
@@@@ -1387,10 +1387,10 @@@@ Some influential environment variables:
               C compiler flags for GST_INTERFACES, overriding pkg-config
   GST_INTERFACES_LIBS
               linker flags for GST_INTERFACES, overriding pkg-config
-  FARSIGHT2_CFLAGS
-              C compiler flags for FARSIGHT2, overriding pkg-config
-  FARSIGHT2_LIBS
-              linker flags for FARSIGHT2, overriding pkg-config
+  FARSTREAM_CFLAGS
+              C compiler flags for FARSTREAM, overriding pkg-config
+  FARSTREAM_LIBS
+              linker flags for FARSTREAM, overriding pkg-config
   LIBV4L_CFLAGS
               C compiler flags for LIBV4L, overriding pkg-config
   LIBV4L_LIBS linker flags for LIBV4L, overriding pkg-config
@@@@ -2271,8 +2271,8 @@@@ case `uname -s` in
d15 2
a16 2
@@@@ -2395,7 +2395,7 @@@@ $as_echo X"$prefix" |
 fi
d24 1
a24 1
@@@@ -3095,17 +3095,9 @@@@ $as_echo "$ac_cv_prog_cc_g" >&6; }
d31 1
a31 1
     CFLAGS="-g"
d33 1
d38 1
a38 1
     CFLAGS=
d40 1
d44 1
a44 1
@@@@ -3449,17 +3441,9 @@@@ $as_echo "$ac_cv_prog_cxx_g" >&6; }
d51 1
a51 1
     CXXFLAGS="-g"
d53 1
d58 1
a58 1
     CXXFLAGS=
d60 1
d62 1
d65 3
a67 1
@@@@ -3508,7 +3492,7 @@@@ $as_echo_n "checking tcl build dir... " >&6; }
d70 1
a70 1
 		/usr/local/lib64/tcl8.* \
d72 1
a72 1
+		"
d76 2
a77 1
@@@@ -3633,9 +3617,8 @@@@ $as_echo_n "checking tk build dir... " >&6; }
d80 1
a80 1
 		/usr/local/lib64/tk8.* \
d82 2
a83 1
+		"
a84 1
-
d86 1
a86 3
 
 		if test -f "$i"; then
@@@@ -5008,13 +4991,13 @@@@ fi
d94 1
a94 1
 if test "${ac_cv_lib_pthread_pthread_create+set}" = set; then :
d103 1
a103 1
@@@@ -5045,7 +5028,7 @@@@ fi
d106 1
a106 1
 if test "x$ac_cv_lib_pthread_pthread_create" = x""yes; then :
a111 127
@@@@ -5115,10 +5098,10 @@@@ fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $USE_MMX" >&5
 $as_echo "$USE_MMX" >&6; }
 
-HAVE_FARSIGHT=no
+HAVE_FARSTREAM=no
 GST_REQUIRED=0.10.22
 GST_MAJORMINOR=0.10
-FARSIGHT_REQUIRED=0.0.9
+FARSTREAM_REQUIRED=0.1
 
 # Extract the first word of "pkg-config", so it can be a program name with args.
 set dummy pkg-config; ac_word=$2
@@@@ -5518,41 +5501,41 @@@@ fi
         if test "x$HAVE_GST" = "xyes"; then
 
 pkg_failed=no
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for FARSIGHT2" >&5
-$as_echo_n "checking for FARSIGHT2... " >&6; }
+{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for FARSTREAM" >&5
+$as_echo_n "checking for FARSTREAM... " >&6; }
 
-if test -n "$FARSIGHT2_CFLAGS"; then
-    pkg_cv_FARSIGHT2_CFLAGS="$FARSIGHT2_CFLAGS"
+if test -n "$FARSTREAM_CFLAGS"; then
+    pkg_cv_FARSTREAM_CFLAGS="$FARSTREAM_CFLAGS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\\
-             farsight2-\$GST_MAJORMINOR >= \$FARSIGHT_REQUIRED\""; } >&5
+             farstream-\$FARSTREAM_REQUIRED >= \$FARSTREAM_REQUIRED\""; } >&5
   ($PKG_CONFIG --exists --print-errors "\
-             farsight2-$GST_MAJORMINOR >= $FARSIGHT_REQUIRED") 2>&5
+             farstream-$FARSTREAM_REQUIRED >= $FARSTREAM_REQUIRED") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_FARSIGHT2_CFLAGS=`$PKG_CONFIG --cflags "\
-             farsight2-$GST_MAJORMINOR >= $FARSIGHT_REQUIRED" 2>/dev/null`
+  pkg_cv_FARSTREAM_CFLAGS=`$PKG_CONFIG --cflags "\
+             farstream-$FARSTREAM_REQUIRED >= $FARSTREAM_REQUIRED" 2>/dev/null`
 else
   pkg_failed=yes
 fi
  else
     pkg_failed=untried
 fi
-if test -n "$FARSIGHT2_LIBS"; then
-    pkg_cv_FARSIGHT2_LIBS="$FARSIGHT2_LIBS"
+if test -n "$FARSTREAM_LIBS"; then
+    pkg_cv_FARSTREAM_LIBS="$FARSTREAM_LIBS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"\\
-             farsight2-\$GST_MAJORMINOR >= \$FARSIGHT_REQUIRED\""; } >&5
+             farstream-\$FARSTREAM_REQUIRED >= \$FARSTREAM_REQUIRED\""; } >&5
   ($PKG_CONFIG --exists --print-errors "\
-             farsight2-$GST_MAJORMINOR >= $FARSIGHT_REQUIRED") 2>&5
+             farstream-$FARSTREAM_REQUIRED >= $FARSTREAM_REQUIRED") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_FARSIGHT2_LIBS=`$PKG_CONFIG --libs "\
-             farsight2-$GST_MAJORMINOR >= $FARSIGHT_REQUIRED" 2>/dev/null`
+  pkg_cv_FARSTREAM_LIBS=`$PKG_CONFIG --libs "\
+             farstream-$FARSTREAM_REQUIRED >= $FARSTREAM_REQUIRED" 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@@@ -5572,26 +5555,26 @@@@ else
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        FARSIGHT2_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "\
-             farsight2-$GST_MAJORMINOR >= $FARSIGHT_REQUIRED" 2>&1`
+	        FARSTREAM_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "\
+             farstream-$FARSTREAM_REQUIRED >= $FARSTREAM_REQUIRED" 2>&1`
         else
-	        FARSIGHT2_PKG_ERRORS=`$PKG_CONFIG --print-errors "\
-             farsight2-$GST_MAJORMINOR >= $FARSIGHT_REQUIRED" 2>&1`
+	        FARSTREAM_PKG_ERRORS=`$PKG_CONFIG --print-errors "\
+             farstream-$FARSTREAM_REQUIRED >= $FARSTREAM_REQUIRED" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
-	echo "$FARSIGHT2_PKG_ERRORS" >&5
+	echo "$FARSTREAM_PKG_ERRORS" >&5
 
-	HAVE_FARSIGHT=no
+	HAVE_FARSTREAM=no
 elif test $pkg_failed = untried; then
      	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
-	HAVE_FARSIGHT=no
+	HAVE_FARSTREAM=no
 else
-	FARSIGHT2_CFLAGS=$pkg_cv_FARSIGHT2_CFLAGS
-	FARSIGHT2_LIBS=$pkg_cv_FARSIGHT2_LIBS
+	FARSTREAM_CFLAGS=$pkg_cv_FARSTREAM_CFLAGS
+	FARSTREAM_LIBS=$pkg_cv_FARSTREAM_LIBS
         { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
-	HAVE_FARSIGHT=yes
+	HAVE_FARSTREAM=yes
 fi
     fi
   fi
@@@@ -7069,16 +7052,16 @@@@ compile time options summary
     TK 		 : $TK_VERSION
     DEBUG        : $DEBUG
     STATIC       : $STATIC
-    FARSIGHT     : $HAVE_FARSIGHT
+    FARSTREAM    : $HAVE_FARSTREAM
     LIBV4L       : $HAVE_LIBV4L
     GUPNP-IGD    : $HAVE_GUPNP
 
 EOF
 
-if test x"$HAVE_FARSIGHT" = "xno"; then
-   echo "*** You do not seem to have gstreamer and farsight2 installed."
+if test x"$HAVE_FARSTREAM" = "xno"; then
+   echo "*** You do not seem to have gstreamer and farstream installed."
    echo "*** You will not be able to build the required component for audio conversations."
-   echo "*** Read this for more information : http://amsn-project.net/wiki/Farsight"
+   echo "*** Read this for more information : http://amsn-project.net/wiki/Farstream"
 fi
 
 exit 0
@


1.5
log
@- update to 0.98.4

from Azwaw OUSADOU (MAINTAINER)
@
text
@d1 4
a4 1
$OpenBSD: patch-configure,v 1.4 2010/09/14 12:34:42 jasper Exp $
d6 46
a51 1
+++ configure	Tue Jun 21 11:02:27 2011
d154 127
@


1.4
log
@- update amsn to 0.98.3

from Azwaw OUSADOU, with some tweaks by me
@
text
@d1 4
a4 4
$OpenBSD$
--- configure.orig	Tue Oct 20 14:08:22 2009
+++ configure	Sun Dec 27 22:59:35 2009
@@@@ -2258,8 +2258,8 @@@@ case `uname -s` in
d15 1
a15 1
@@@@ -2382,7 +2382,7 @@@@ $as_echo X"$prefix" |
d24 1
a24 1
@@@@ -3059,17 +3059,9 @@@@ $as_echo "$ac_cv_prog_cc_g" >&6; }
d42 1
a42 1
@@@@ -3413,17 +3405,9 @@@@ $as_echo "$ac_cv_prog_cxx_g" >&6; }
d60 1
a60 1
@@@@ -3472,7 +3456,7 @@@@ $as_echo_n "checking tcl build dir... " >&6; }
d69 1
a69 1
@@@@ -3597,9 +3581,8 @@@@ $as_echo_n "checking tk build dir... " >&6; }
d80 1
a80 1
@@@@ -4974,13 +4957,13 @@@@ fi
d97 1
a97 1
@@@@ -5011,7 +4994,7 @@@@ fi
@


1.3
log
@update to 0.97.2

similar diff from bsdmaniak at gmail
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.2 2008/02/02 21:17:50 steven Exp $
--- configure.orig	Fri Jul 25 16:47:03 2008
+++ configure	Sun Aug 31 11:37:29 2008
@@@@ -1883,8 +1883,8 @@@@ case `uname -s` in
d15 1
a15 1
@@@@ -2008,7 +2008,7 @@@@ $as_echo X"$prefix" |
d23 41
a63 5
 if test "${enable_version_check+set}" = set; then
@@@@ -3407,7 +3407,7 @@@@ $as_echo_n "checking tcl build dir... " >&6; }
 		/usr/lib64/tcl8.5.* \
 		/usr/local/lib64/tcl8.5 \
 		/usr/local/lib64/tcl8.5.* \
d69 4
a72 4
@@@@ -3556,7 +3556,7 @@@@ $as_echo_n "checking tk build dir... " >&6; }
 		/usr/lib64/tk8.5.* \
 		/usr/local/lib64/tk8.5 \
 		/usr/local/lib64/tk8.5.* \
d76 28
d105 1
a105 1
 		for i in $dirs ; do
@


1.2
log
@update to 0.97

based on a diff by Azwaw Ousadou (bsdmaniak at gmail)
@
text
@d1 4
a4 4
$OpenBSD: patch-configure,v 1.1.1.1 2007/10/22 19:32:24 steven Exp $
--- configure.orig	Mon Dec 24 22:35:51 2007
+++ configure	Sat Feb  2 20:13:16 2008
@@@@ -1781,8 +1781,8 @@@@ case `uname -s` in
d15 1
a15 1
@@@@ -1904,7 +1904,7 @@@@ echo X"$prefix" |
d24 1
a24 1
@@@@ -3279,7 +3279,7 @@@@ echo $ECHO_N "checking tcl build dir... $ECHO_C" >&6; 
d33 1
a33 1
@@@@ -3427,7 +3427,7 @@@@ echo $ECHO_N "checking tk build dir... $ECHO_C" >&6; }
@


1.1
log
@Initial revision
@
text
@d1 8
a8 8
$OpenBSD$
--- configure.orig	Wed Nov  1 18:05:49 2006
+++ configure	Tue Sep 18 13:24:52 2007
@@@@ -1364,9 +1364,9 @@@@ case `uname -s` in
 
 	OpenBSD)
 		# *BSD has important stuff (from ports) in /usr/local ...
-		CFLAGS="$CFLAGS -lm -I/usr/local/include/libpng -I/usr/local/include -L/usr/local/lib"
a9 1
-		TK_INC_SPEC=/usr/local/include/tk8.4/generic
a11 1
+#		TK_INC_SPEC=/usr/local/include/tk8.4/generic
d14 2
a15 2
 
@@@@ -1472,7 +1472,7 @@@@ echo X"$prefix" |
d22 1
a22 1
 # Check whether --enable-version-check or --disable-version-check was given.
d24 1
a24 1
@@@@ -2849,7 +2849,7 @@@@ echo $ECHO_N "checking tcl build dir... $ECHO_C" >&6
d33 1
a33 1
@@@@ -2997,7 +2997,7 @@@@ echo $ECHO_N "checking tk build dir... $ECHO_C" >&6
@


1.1.1.1
log
@MSN messenger clone
@
text
@@
