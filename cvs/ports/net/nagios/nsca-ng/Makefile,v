head	1.10;
access;
symbols
	OPENBSD_6_1:1.10.0.2
	OPENBSD_6_1_BASE:1.10
	OPENBSD_6_0:1.9.0.8
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.4
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.6
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.2
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.8.0.2
	OPENBSD_5_6_BASE:1.8
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	sthen_20130311:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2016.12.05.15.19.30;	author sthen;	state Exp;
branches;
next	1.9;
commitid	gUcEuLtIQl0QlAxY;

1.9
date	2014.10.23.14.29.23;	author sthen;	state Exp;
branches;
next	1.8;
commitid	vX7YpW5J1u67tfj7;

1.8
date	2014.07.15.22.25.21;	author sthen;	state Exp;
branches;
next	1.7;
commitid	0R4XgyrB9CEBURMZ;

1.7
date	2014.07.12.23.32.55;	author sthen;	state Exp;
branches;
next	1.6;
commitid	s34KX4vMzuKJgjds;

1.6
date	2013.11.07.10.34.12;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2013.09.12.17.03.45;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2013.04.12.21.44.53;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2013.03.14.10.19.38;	author sthen;	state Exp;
branches;
next	1.2;

1.2
date	2013.03.13.09.55.56;	author sthen;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.11.19.27.31;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.03.11.19.27.31;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.10
log
@update to nsca-ng-1.5
@
text
@# $OpenBSD: Makefile,v 1.9 2014/10/23 14:29:23 sthen Exp $

COMMENT-main=	server to accept passive check results for Nagios/Icinga
COMMENT-client=	client to send passive check results to Nagios/Icinga

V=		1.5
DISTNAME=	nsca-ng-$V
PKGNAME-main=	nsca-ng-$V
PKGNAME-client=	nsca-ng-client-$V
CATEGORIES=	net

HOMEPAGE=	https://www.nsca-ng.org/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# BSD
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c ev lib/eopenssl/crypto lib/eopenssl/ssl
WANTLIB-main=	${WANTLIB} confuse

MASTER_SITES=		https://www.nsca-ng.org/download/

LIB_DEPENDS=		devel/libev \
			security/openssl
LIB_DEPENDS-main=	${LIB_DEPENDS} \
			devel/libconfuse

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--enable-server
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include/eopenssl" \
			LDFLAGS="-L${LOCALBASE}/lib/eopenssl -Wl,-rpath,${LOCALBASE}/lib/eopenssl"
SEPARATE_BUILD=		Yes

MULTI_PACKAGES=		-main -client

RUN_DEPENDS-main=	icinga-*|nagios-*:net/nagios/nagios
FAKE_FLAGS=		sysconfdir=${PREFIX}/share/examples/nsca-ng

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/libexec/nagios/
	cd ${WRKSRC}/contrib; ${INSTALL_DATA} README acknowledge debug_server \
	    disable_notifications downtime enable_notifications invoke_check \
	    ${PREFIX}/share/examples/nsca-ng/
	ln -s ${TRUEPREFIX}/sbin/send_nsca ${PREFIX}/libexec/nagios/send_nsca

.include <bsd.port.mk>
@


1.9
log
@update to nsca-ng 1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/07/15 22:25:21 sthen Exp $
d6 1
a6 1
V=		1.4
@


1.8
log
@Update nsca-ng to 1.3, rolling in patch-src_server_nsca-ng_c.

nsca-ng requires RFC4279 PSK ciphersuites, so use the new OpenSSL port to
unbreak this.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/07/12 23:32:55 sthen Exp $
d6 1
a6 1
V=		1.3
@


1.7
log
@Mark nsca-ng as BROKEN until OpenSSL port is done, this relies on PSK
ciphersuites which have been removed from libressl.
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.6 2013/11/07 10:34:12 sthen Exp $

BROKEN=	requires TLS PSK ciphersuites, not supported by libressl
d6 1
a6 1
V=		1.2
d19 1
a19 1
WANTLIB=	c crypto ev ssl
d24 2
a25 1
LIB_DEPENDS=		devel/libev
d31 2
@


1.6
log
@update to nsca-ng 1.2
https://www.nsca-ng.org/list/developers/2013-November/000015.html
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.5 2013/09/12 17:03:45 sthen Exp $
@


1.5
log
@Fix nsca-ng on 32-bit arch with 64-bit time_t. Problem researched and original
diff from florian@@; I am using a slightly different diff from upstream here
(also tested by florian@@).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2013/04/12 21:44:53 sthen Exp $
d6 1
a6 1
V=		1.1
a9 1
REVISION=	0
@


1.4
log
@update to NSCA-ng 1.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2013/03/14 10:19:38 sthen Exp $
d10 1
@


1.3
log
@add chroot support; committed upstream (thanks Holger!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2013/03/13 09:55:56 sthen Exp $
d6 1
a6 2
V=		1.0
REVISION-main=	0
@


1.2
log
@this works with SEPARATE_BUILD=Yes, so set it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2013/03/11 19:27:31 sthen Exp $
d7 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2012/05/02 13:40:09 sthen Exp $
d30 1
@


1.1.1.1
log
@Import ports/net/nagios/nsca-ng, a nicer BSD-licensed alternative to the
horrible Nagios NSCA passive check acceptor. Command lines are compatible
but the protocol is not - however the two servers can coexist to assist
during a migration.  Fix/ok rpe@@
@
text
@@
