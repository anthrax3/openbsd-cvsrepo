head	1.46;
access;
symbols
	OPENBSD_5_5:1.42.0.2
	OPENBSD_5_5_BASE:1.42
	OPENBSD_5_4:1.40.0.2
	OPENBSD_5_4_BASE:1.40
	OPENBSD_5_3:1.34.0.2
	OPENBSD_5_3_BASE:1.34
	OPENBSD_5_2:1.33.0.2
	OPENBSD_5_2_BASE:1.33
	OPENBSD_5_1_BASE:1.32
	OPENBSD_5_1:1.32.0.2
	OPENBSD_5_0:1.31.0.2
	OPENBSD_5_0_BASE:1.31
	OPENBSD_4_9:1.30.0.2
	OPENBSD_4_9_BASE:1.30
	OPENBSD_4_8:1.27.0.2
	OPENBSD_4_8_BASE:1.27
	OPENBSD_4_7:1.25.0.2
	OPENBSD_4_7_BASE:1.25
	OPENBSD_4_6:1.24.0.4
	OPENBSD_4_6_BASE:1.24
	OPENBSD_4_5:1.24.0.2
	OPENBSD_4_5_BASE:1.24
	OPENBSD_4_4:1.23.0.2
	OPENBSD_4_4_BASE:1.23
	OPENBSD_4_3:1.22.0.2
	OPENBSD_4_3_BASE:1.22
	OPENBSD_4_2:1.18.0.2
	OPENBSD_4_2_BASE:1.18
	OPENBSD_4_1:1.17.0.2
	OPENBSD_4_1_BASE:1.17
	OPENBSD_4_0:1.11.0.2
	OPENBSD_4_0_BASE:1.11
	OPENBSD_3_9:1.6.0.2
	OPENBSD_3_9_BASE:1.6
	OPENBSD_3_8:1.3.0.2
	OPENBSD_3_8_BASE:1.3
	sturm_20050725:1.1.1.1
	sturm:1.1.1;
locks; strict;
comment	@# @;


1.46
date	2014.07.12.14.05.36;	author sthen;	state dead;
branches;
next	1.45;
commitid	c7rkYeE2eGKAbT9W;

1.45
date	2014.04.21.16.19.05;	author sthen;	state Exp;
branches;
next	1.44;

1.44
date	2014.04.12.19.52.19;	author zhuk;	state Exp;
branches;
next	1.43;

1.43
date	2014.04.07.12.31.47;	author sthen;	state Exp;
branches;
next	1.42;

1.42
date	2014.01.16.22.35.20;	author sthen;	state Exp;
branches;
next	1.41;

1.41
date	2013.11.02.15.48.12;	author rpe;	state Exp;
branches;
next	1.40;

1.40
date	2013.06.20.06.54.37;	author ajacoutot;	state Exp;
branches;
next	1.39;

1.39
date	2013.06.17.19.28.36;	author ajacoutot;	state Exp;
branches;
next	1.38;

1.38
date	2013.06.12.20.36.34;	author brad;	state Exp;
branches;
next	1.37;

1.37
date	2013.05.25.00.33.10;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2013.03.21.08.46.34;	author ajacoutot;	state Exp;
branches;
next	1.35;

1.35
date	2013.03.11.11.35.49;	author espie;	state Exp;
branches;
next	1.34;

1.34
date	2013.02.09.14.49.52;	author sthen;	state Exp;
branches;
next	1.33;

1.33
date	2012.06.28.23.10.48;	author sthen;	state Exp;
branches;
next	1.32;

1.32
date	2011.09.16.11.13.39;	author espie;	state Exp;
branches;
next	1.31;

1.31
date	2011.06.02.13.41.40;	author ajacoutot;	state Exp;
branches;
next	1.30;

1.30
date	2010.11.19.22.31.35;	author espie;	state Exp;
branches;
next	1.29;

1.29
date	2010.11.15.09.56.53;	author sthen;	state Exp;
branches;
next	1.28;

1.28
date	2010.08.28.09.19.48;	author sthen;	state Exp;
branches;
next	1.27;

1.27
date	2010.07.13.21.08.01;	author sthen;	state Exp;
branches;
next	1.26;

1.26
date	2010.04.02.19.30.38;	author sthen;	state Exp;
branches;
next	1.25;

1.25
date	2009.11.05.10.57.58;	author sthen;	state Exp;
branches;
next	1.24;

1.24
date	2008.10.26.15.02.16;	author sthen;	state Exp;
branches;
next	1.23;

1.23
date	2008.03.26.20.19.35;	author sthen;	state Exp;
branches;
next	1.22;

1.22
date	2008.02.02.18.18.24;	author sturm;	state Exp;
branches;
next	1.21;

1.21
date	2007.10.02.19.09.44;	author jasper;	state Exp;
branches;
next	1.20;

1.20
date	2007.09.30.10.37.07;	author sturm;	state Exp;
branches;
next	1.19;

1.19
date	2007.09.15.22.36.55;	author merdely;	state Exp;
branches;
next	1.18;

1.18
date	2007.07.04.16.23.05;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2007.02.07.18.16.40;	author sturm;	state Exp;
branches;
next	1.16;

1.16
date	2006.12.01.06.14.10;	author sturm;	state Exp;
branches;
next	1.15;

1.15
date	2006.11.26.01.29.12;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2006.11.20.21.18.15;	author bernd;	state Exp;
branches;
next	1.13;

1.13
date	2006.11.11.17.17.43;	author sturm;	state Exp;
branches;
next	1.12;

1.12
date	2006.11.11.14.16.23;	author mbalmer;	state Exp;
branches;
next	1.11;

1.11
date	2006.07.19.06.24.00;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2006.07.18.20.45.46;	author sturm;	state Exp;
branches;
next	1.9;

1.9
date	2006.05.07.07.42.09;	author sturm;	state Exp;
branches;
next	1.8;

1.8
date	2006.04.19.20.35.28;	author sturm;	state Exp;
branches;
next	1.7;

1.7
date	2006.04.16.17.26.42;	author sturm;	state Exp;
branches;
next	1.6;

1.6
date	2005.10.28.17.44.12;	author sturm;	state Exp;
branches;
next	1.5;

1.5
date	2005.09.16.09.51.27;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2005.09.10.17.37.40;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2005.08.13.18.20.23;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.07.10.47.00;	author sturm;	state Exp;
branches;
next	1.1;

1.1
date	2005.07.25.16.32.06;	author sturm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.07.25.16.32.06;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.46
log
@remove a few more remnants of this that I missed before
@
text
@# $OpenBSD: Makefile,v 1.45 2014/04/21 16:19:05 sthen Exp $

COMMENT-main=	monitoring plugins (for Nagios, Icinga, etc)
COMMENT-dbi=	dbi monitoring plugin
COMMENT-fping=	fping monitoring plugin
COMMENT-game=	gameserver monitoring plugin
COMMENT-ldap=	ldap monitoring plugin
COMMENT-mysql=	mysql monitoring plugin
COMMENT-pgsql=	postgresql monitoring plugin
COMMENT-samba=	samba monitoring plugin
COMMENT-snmp=	monitoring plugins using snmp

V=		1.5
REVISION=	4
# name currently mid-transition from nagios-plugins
#DISTNAME=	monitoring-plugins-$V
DISTNAME=	nagios-plugins-$V
PKGNAME-main=	monitoring-plugins-$V
PKGNAME-dbi=	monitoring-plugins-dbi-$V
PKGNAME-fping=	monitoring-plugins-fping-$V
PKGNAME-game=	monitoring-plugins-game-$V
PKGNAME-ldap=	monitoring-plugins-ldap-$V
PKGNAME-mysql=	monitoring-plugins-mysql-$V
PKGNAME-pgsql=	monitoring-plugins-pgsql-$V
PKGNAME-samba=	monitoring-plugins-samba-$V
PKGNAME-snmp=	monitoring-plugins-snmp-$V
CATEGORIES=	net

HOMEPAGE=	https://www.monitoring-plugins.org/

MAINTAINER=	Stuart Henderson <sthen@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=	c pthread
WANTLIB-main=	${WANTLIB} crypto m ssl
MODULES=	devel/gettext

MASTER_SITES=	https://www.monitoring-plugins.org/download/

FAKE_FLAGS=	setuid_root_mode=0555

CONFIGURE_STYLE= autoconf
AUTOCONF_VERSION= 2.69
CONFIGURE_ARGS+= --libexecdir=${PREFIX}/libexec/nagios \
		--with-cgiurl=/cgi-bin/nagios \
		--with-openssl=/usr \
		--without-gnutls
# can autodetect command paths, but hard-coding avoids build dependencies
CONFIGURE_ARGS+= --with-fping-command=${LOCALBASE}/sbin/fping \
		--with-fping6-command=${LOCALBASE}/sbin/fping6 \
		--with-smbclient-command=${LOCALBASE}/bin/smbclient \
		--with-snmpget-command=${LOCALBASE}/bin/snmpget \
		--with-snmpgetnext-command=${LOCALBASE}/bin/snmpgetnext \
		--with-qstat-command=${LOCALBASE}/bin/qstat
# listed here to make it easier to move BIND to ports
CONFIGURE_ARGS+= --with-dig-command=/usr/sbin/dig \
		--with-nslookup-command=/usr/sbin/nslookup
# missing: radius

CFLAGS+=	-DLDAP_DEPRECATED

PSEUDO_FLAVORS=	no_db
FLAVOR?=

MULTI_PACKAGES= -main -fping -game -samba -snmp -dbi -ldap -mysql -pgsql

# many broken tests, but...
TEST_IS_INTERACTIVE=Yes

.include <bsd.port.arch.mk>

.if ${FLAVOR:Mno_db}
BUILD_PACKAGES := ${BUILD_PACKAGES:N-dbi:N-ldap:N-mysql:N-pgsql}
.endif

# no build dependencies, or lightweight build dependencies
BUILD_DEPENDS+=		net/p5-Net-SNMP
RUN_DEPENDS-fping=	${RUN_DEPENDS} net/fping
RUN_DEPENDS-game=	${RUN_DEPENDS} games/qstat
LIB_DEPENDS-samba=
WANTLIB-samba=
RUN_DEPENDS-samba=	net/samba
RUN_DEPENDS-snmp=	${RUN_DEPENDS} net/net-snmp net/p5-Net-SNMP

# MYSQL
.if !${BUILD_PACKAGES:M-mysql}
CONFIGURE_ARGS += --without-mysql
.else
CONFIGURE_ARGS += --with-mysql=${LOCALBASE}
.endif
LIB_DEPENDS-mysql = ${LIB_DEPENDS} databases/mysql
WANTLIB-mysql = ${WANTLIB} crypto m mysqlclient ssl z

# PGSQL
.if !${BUILD_PACKAGES:M-pgsql}
CONFIGURE_ARGS += --without-pgsql
.else
CONFIGURE_ARGS += --with-pgsql=${LOCALBASE}
.endif
LIB_DEPENDS-pgsql = ${LIB_DEPENDS} databases/postgresql
WANTLIB-pgsql += ${WANTLIB} crypto pq ssl

# DBI
.if !${BUILD_PACKAGES:M-dbi}
CONFIGURE_ARGS += --without-dbi
.endif
LIB_DEPENDS-dbi = ${LIB_DEPENDS} databases/libdbi
WANTLIB-dbi = ${WANTLIB} dbi m

# LDAP
LIB_DEPENDS-ldap = ${LIB_DEPENDS} databases/openldap
WANTLIB-ldap += ${WANTLIB} crypto lber-2.4 ldap-2.4 sasl2 ssl

.include <bsd.port.mk>
@


1.45
log
@no kerb5 and sync wantlib (ldap/pgsql)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2014/04/12 19:52:19 zhuk Exp $
@


1.44
log
@Add missing @@conflict marker after renaming nagios-plugins package to
monitoring-plugins. sthen@@ (MAINTAINER) agrees.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2014/04/07 12:31:47 sthen Exp $
d14 1
a14 2
REVISION=	2
REVISION-main=	3
a45 1
CONFIGURE_ENV=	CPPFLAGS="$$(krb5-config --cflags)"
d103 1
a103 2
WANTLIB-pgsql += ${WANTLIB} com_err crypto pq ssl
WANTLIB-pgsql += asn1 krb5 heimbase roken wind
d114 1
a114 2
WANTLIB-ldap += ${WANTLIB} asn1 com_err crypto gssapi krb5
WANTLIB-ldap += lber-2.4 ldap-2.4 sasl2 ssl heimbase roken wind
@


1.43
log
@rename nagios-plugins to monitoring-plugins, see
https://www.monitoring-plugins.org/archive/help/2014-January/006503.html
re: name change; keeping the same directory name for now

rework multipackages to use BUILD_PACKAGES

avoid unnecessary build dependencies

merge -ntp into -main, this plugin is now a standalone C implementation
rather than a perl script depending on ntpd.org tools
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2014/01/16 22:35:20 sthen Exp $
d15 1
@


1.42
log
@s/nagios-plugins/monitoring-plugins/ in HOMEPAGE and MASTER_SITES and bump.

see https://www.monitoring-plugins.org/archive/help/2014-January/006503.html,
pointed out by Michael Friedrich.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2013/11/02 15:48:12 rpe Exp $
d3 9
a11 10
COMMENT-main=	nagios base plugins
COMMENT-dbi=	dbi plugin
COMMENT-fping=	fping plugin
COMMENT-game=	gameserver plugin
COMMENT-ldap=	ldap plugin
COMMENT-mysql=	mysql plugin
COMMENT-ntp=	ntp plugin
COMMENT-pgsql=	postgresql plugin
COMMENT-samba=	samba plugin
COMMENT-snmp=	plugins using snmp
d14 3
a16 1
REVISION=	0
d18 9
a26 10
PKGNAME-main=	nagios-plugins-$V
PKGNAME-dbi=	nagios-plugins-dbi-$V
PKGNAME-fping=	nagios-plugins-fping-$V
PKGNAME-game=	nagios-plugins-game-$V
PKGNAME-ldap=	nagios-plugins-ldap-$V
PKGNAME-mysql=	nagios-plugins-mysql-$V
PKGNAME-ntp=	nagios-plugins-ntp-$V
PKGNAME-pgsql=	nagios-plugins-pgsql-$V
PKGNAME-samba=	nagios-plugins-samba-$V
PKGNAME-snmp=	nagios-plugins-snmp-$V
d36 3
a38 1
# see below for WANTLIB
a41 3
BUILD_DEPENDS=	games/qstat \
		net/fping

d46 2
a47 6
CONFIGURE_ENV=	PATH_TO_FPING=${LOCALBASE}/sbin/fping \
		PATH_TO_NTPDATE=${LOCALBASE}/sbin/ntpdate \
		PATH_TO_NTPDC=${LOCALBASE}/sbin/ntpdc \
		PATH_TO_NTPQ=${LOCALBASE}/sbin/ntpq \
		CPPFLAGS="$$(krb5-config --cflags)"
CONFIGURE_ARGS+=--libexecdir=${PREFIX}/libexec/nagios \
d51 13
d65 1
a65 1
PSEUDO_FLAVORS=	no_db no_ntp no_samba no_snmp
d68 1
a68 1
MULTI_PACKAGES=	-main -fping -game
d70 2
a71 13
.if ! ${FLAVOR:Mno_db}
MULTI_PACKAGES+=-dbi -ldap -mysql -pgsql
CONFIGURE_ARGS+=--with-mysql=${LOCALBASE} \
		--with-pgsql=${LOCALBASE}
CFLAGS+=	-DLDAP_DEPRECATED
.else
CONFIGURE_ARGS+=--without-dbi --without-mysql --without-pgsql
.endif

.if ! ${FLAVOR:Mno_ntp}
MULTI_PACKAGES+=-ntp
BUILD_DEPENDS+=	net/ntp
.endif
d73 1
a73 4
.if ! ${FLAVOR:Mno_samba}
MULTI_PACKAGES+=-samba
BUILD_DEPENDS+=	net/samba
.endif
d75 2
a76 4
.if ! ${FLAVOR:Mno_snmp}
MULTI_PACKAGES+=-snmp
BUILD_DEPENDS+=	net/p5-Net-SNMP \
		net/net-snmp
d79 4
a82 28
WANTLIB=		c pthread

WANTLIB-dbi=		${WANTLIB} dbi m
LIB_DEPENDS-dbi=	databases/libdbi \
			${LIB_DEPENDS}

RUN_DEPENDS-fping=	net/fping

RUN_DEPENDS-game=	games/qstat

WANTLIB-ldap+=		${WANTLIB} asn1 com_err crypto gssapi krb5
WANTLIB-ldap+=		lber-2.4 ldap-2.4 sasl2 ssl
WANTLIB-ldap+=		heimbase roken wind
LIB_DEPENDS-ldap=	databases/openldap \
			${LIB_DEPENDS}

WANTLIB-mysql=		${WANTLIB} crypto m mysqlclient ssl z
LIB_DEPENDS-mysql=	databases/mysql \
			${LIB_DEPENDS}

WANTLIB-ntp=		${WANTLIB} m
RUN_DEPENDS-ntp=	net/ntp

WANTLIB-pgsql+=		${WANTLIB} com_err crypto pq ssl
WANTLIB-pgsql+=		asn1 krb5 heimbase roken wind
LIB_DEPENDS-pgsql=	databases/postgresql \
			${LIB_DEPENDS}

d86 1
d88 8
a95 2
RUN_DEPENDS-snmp=	net/net-snmp \
			net/p5-Net-SNMP
d97 16
a112 1
WANTLIB-main=		${WANTLIB} crypto m ssl
d114 4
a117 4
MODULES=		devel/gettext

# many broken tests, but...
TEST_IS_INTERACTIVE=Yes
@


1.41
log
@update nagios-plugins to 1.5

For a list a changes see:
 https://www.nagios-plugins.org/news/release-1-5.html

ok sthen@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/06/20 06:54:37 ajacoutot Exp $
d15 1
d29 1
a29 1
HOMEPAGE=	https://www.nagios-plugins.org/
d38 1
a38 1
MASTER_SITES=	https://www.nagios-plugins.org/download/
@


1.40
log
@Unbreak after hx509 and ntlm removal from Kerberos.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2013/06/17 19:28:36 ajacoutot Exp $
d4 1
d14 1
a14 1
V=		1.4.16
d17 1
a20 1
REVISION-ldap=	1
a21 1
REVISION-mysql=	2
a23 1
REVISION-pgsql=	1
d28 1
a28 1
HOMEPAGE=	http://nagiosplug.sourceforge.net/
d37 1
a37 1
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=nagiosplug/}
d45 1
a45 1
AUTOCONF_VERSION= 2.67
d62 1
a62 1
MULTI_PACKAGES+=-ldap -mysql -pgsql
d67 1
a67 1
CONFIGURE_ARGS+=--without-mysql --without-pgsql
d88 4
d123 1
a123 1
MODULES=	devel/gettext
@


1.39
log
@Some trivial WANTLIB and tweaks to unbreak after the Heimdal update.
Stop hardcoding the Kerberos libs and use krb5-config(1).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2013/06/12 20:36:34 brad Exp $
d19 1
a19 1
REVISION-ldap=	0
d21 1
a21 1
REVISION-mysql=	1
d24 1
a24 1
REVISION-pgsql=	0
d95 1
a95 1
WANTLIB-ldap+=		heimbase heimntlm hx509 roken wind
d107 1
a107 1
WANTLIB-pgsql+=		asn1 krb5 heimbase hx509 roken wind
@


1.38
log
@Revert back to using MySQL 5.1 for the time being. MariaDB 5.5 introduces
a new libmysqlclient non-blocking API which utilizes co-routines. The X86
specific GCC ASM co-routine support hid the fact that there was an issue.
The only fallback code so far is POSIX user contexts which OpenBSD does not
support.

Input from and Ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2013/05/25 00:33:10 brad Exp $
d19 1
d24 1
d50 2
a51 1
		PATH_TO_NTPQ=${LOCALBASE}/sbin/ntpq
d95 1
d106 2
a107 1
WANTLIB-pgsql=		${WANTLIB} com_err crypto pq ssl
@


1.37
log
@Switch from using MySQL to using MariaDB. MariaDB is a drop-in replacement.


ok sthen aja
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2013/03/21 08:46:34 ajacoutot Exp $
d20 1
a20 1
REVISION-mysql=	0
d96 1
a96 1
LIB_DEPENDS-mysql=	databases/mariadb \
@


1.36
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2013/03/11 11:35:49 espie Exp $
d20 1
d96 1
a96 1
LIB_DEPENDS-mysql=	databases/mysql \
@


1.35
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2013/02/09 14:49:52 sthen Exp $
a41 1
USE_LIBTOOL=	Yes
@


1.34
log
@Don't use ${FLAVOR:L}, we only support lower-case flavours now.
OK ajacoutot@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2012/06/28 23:10:48 sthen Exp $
a31 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d118 1
a118 1
REGRESS_IS_INTERACTIVE=Yes
@


1.33
log
@update nagios-plugins to 1.4.16, various fixes/new features

- the new code in check_user wants utmpx so those parts are reverted
to the old popen("/usr/bin/who",...) code for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2011/09/16 11:13:39 espie Exp $
d62 1
a62 1
.if ! ${FLAVOR:L:Mno_db}
d71 1
a71 1
.if ! ${FLAVOR:L:Mno_ntp}
d76 1
a76 1
.if ! ${FLAVOR:L:Mno_samba}
d81 1
a81 1
.if ! ${FLAVOR:L:Mno_snmp}
@


1.32
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2011/06/02 13:41:40 ajacoutot Exp $
d13 11
a23 11
V=		1.4.15
DISTNAME=	nagios-plugins-${V}
PKGNAME-main=	nagios-plugins-${V}
PKGNAME-fping=	nagios-plugins-fping-${V}
PKGNAME-game=	nagios-plugins-game-${V}
PKGNAME-ldap=	nagios-plugins-ldap-${V}
PKGNAME-mysql=	nagios-plugins-mysql-${V}
PKGNAME-ntp=	nagios-plugins-ntp-${V}
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}
PKGNAME-samba=	nagios-plugins-samba-${V}
PKGNAME-snmp=	nagios-plugins-snmp-${V}
a25 7
REVISION-main=	1
REVISION-ldap =	0
REVISION-mysql = 0
REVISION-pgsql = 0
REVISION-samba = 0
REVISION-snmp = 0

d46 2
a47 2

CONFIGURE_STYLE=gnu
d94 1
a94 1
WANTLIB-ldap+=		lber ldap sasl2 ssl
d105 1
a105 1
WANTLIB-pgsql=		${WANTLIB} crypto pq
@


1.31
log
@Add a consistent header that substitutes FULLPKGNAME for the READMEs.

ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2010/11/19 22:31:35 espie Exp $
d27 5
@


1.30
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2010/11/15 09:56:53 sthen Exp $
d26 1
a26 1
REVISION-main=	0
@


1.29
log
@move to pkg-readmes; mostly from jasper@@ with tweaks by me.
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2010/08/28 09:19:48 sthen Exp $
d42 2
a43 2
BUILD_DEPENDS=	::games/qstat \
		::net/fping
d75 1
a75 1
BUILD_DEPENDS+=	::net/ntp
d80 1
a80 1
BUILD_DEPENDS+=	::net/samba
d85 2
a86 2
BUILD_DEPENDS+=	::net/p5-Net-SNMP \
		::net/net-snmp
d91 1
a91 1
RUN_DEPENDS-fping=	::net/fping
d93 1
a93 1
RUN_DEPENDS-game=	::games/qstat
d97 1
a97 1
LIB_DEPENDS-ldap=	:openldap-client-*:databases/openldap \
d101 1
a101 1
LIB_DEPENDS-mysql=	:mysql-client-*:databases/mysql \
d105 1
a105 1
RUN_DEPENDS-ntp=	::net/ntp
d108 1
a108 1
LIB_DEPENDS-pgsql=	:postgresql-client-*:databases/postgresql \
d113 1
a113 1
RUN_DEPENDS-samba=	::net/samba
d115 2
a116 2
RUN_DEPENDS-snmp=	::net/net-snmp \
			::net/p5-Net-SNMP
@


1.28
log
@update nagios-plugins to 1.4.15 (ok sturm@@) and take maintainership
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2010/07/13 21:08:01 sthen Exp $
d26 2
a123 5

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/nagios-plugins
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD \
		${PREFIX}/share/doc/nagios-plugins
@


1.27
log
@use REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2010/04/02 19:30:38 sthen Exp $
d13 1
a13 9
V=		1.4.14
REVISION-main=	0
REVISION-fping=	0
REVISION-game=	0
REVISION-ldap=	0
REVISION-mysql=	0
REVISION-ntp=	0
REVISION-pgsql=	0
REVISION-snmp=	0
d28 1
a28 1
MAINTAINER=	Nikolay Sturm <sturm@@openbsd.org>
d93 3
a95 2
WANTLIB-ldap=		${WANTLIB} asn1 com_err crypto gssapi krb5 sasl2 ssl
LIB_DEPENDS-ldap=	lber,ldap:openldap-client-*:databases/openldap \
d98 2
a99 2
WANTLIB-mysql=		${WANTLIB} crypto m ssl z
LIB_DEPENDS-mysql=	mysqlclient:mysql-client-*:databases/mysql \
d105 2
a106 2
WANTLIB-pgsql=		${WANTLIB} crypto
LIB_DEPENDS-pgsql=	pq:postgresql-client-*:databases/postgresql \
@


1.26
log
@WANTLIB+=pthread, bump PKGNAMEs, and add a more specific license
marker while there.  ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2009/11/05 10:57:58 sthen Exp $
d14 8
d23 7
a29 7
PKGNAME-main=	nagios-plugins-${V}p0
PKGNAME-fping=	nagios-plugins-fping-${V}p0
PKGNAME-game=	nagios-plugins-game-${V}p0
PKGNAME-ldap=	nagios-plugins-ldap-${V}p0
PKGNAME-mysql=	nagios-plugins-mysql-${V}p0
PKGNAME-ntp=	nagios-plugins-ntp-${V}p0
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}p0
d31 1
a31 1
PKGNAME-snmp=	nagios-plugins-snmp-${V}p0
@


1.25
log
@update to 1.4.14, ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/10/26 15:02:16 sthen Exp $
d15 7
a21 7
PKGNAME-main=	nagios-plugins-${V}
PKGNAME-fping=	nagios-plugins-fping-${V}
PKGNAME-game=	nagios-plugins-game-${V}
PKGNAME-ldap=	nagios-plugins-ldap-${V}
PKGNAME-mysql=	nagios-plugins-mysql-${V}
PKGNAME-ntp=	nagios-plugins-ntp-${V}
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}
d23 1
a23 1
PKGNAME-snmp=	nagios-plugins-snmp-${V}
d30 1
a30 1
# GPL
d87 1
a87 1
WANTLIB=		c
@


1.24
log
@bugfix update to 1.4.13, regenerate PLIST while there.
ok sturm (MAINTAINER).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/03/26 20:19:35 sthen Exp $
d13 1
a13 1
V=		1.4.13
d21 1
a21 1
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}p0
@


1.23
log
@Fix build with postgresql 8.3.1. Issue reported and build tested by krw,
fix by me independently of nagios-plugin svn (which simon reports has the
same fix).  ok sturm krw simon
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/02/02 18:18:24 sturm Exp $
d13 1
a13 1
V=		1.4.11
@


1.22
log
@update to nagios plugins 1.4.11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2007/10/02 19:09:44 jasper Exp $
d21 1
a21 1
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}
@


1.21
log
@we prefer the idiom of MODULES=devel/gettext over MODULES=gettext

"looks good" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2007/09/30 10:37:07 sturm Exp $
d13 1
a13 1
V=		1.4.10
@


1.20
log
@update to nagios plugins 1.4.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2007/09/15 22:36:55 merdely Exp $
d117 1
a117 1
MODULES=	gettext
@


1.19
log
@Remove surrounding quotes in COMMENT*/PERMIT_*/BROKEN/ERRORS

Add $OpenBSD$ to p5-SNMP-Info/Makefile (ok kili@@, simon@@)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2007/07/04 16:23:05 sturm Exp $
d13 1
a13 1
V=		1.4.9
@


1.18
log
@update to nagios plugins 1.4.9

from Stuart Henderson
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2007/02/07 18:16:40 sturm Exp $
d3 9
a11 9
COMMENT-main=	"nagios base plugins"
COMMENT-fping=	"fping plugin"
COMMENT-game=	"gameserver plugin"
COMMENT-ldap=	"ldap plugin"
COMMENT-mysql=	"mysql plugin"
COMMENT-ntp=	"ntp plugin"
COMMENT-pgsql=	"postgresql plugin"
COMMENT-samba=	"samba plugin"
COMMENT-snmp=	"plugins using snmp"
@


1.17
log
@update to nagios-plugins 1.4.6
fix LIB_DEPENDS and WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2006/12/01 06:14:10 sturm Exp $
d13 1
a13 1
V=		1.4.6
@


1.16
log
@bump PKGNAMEs after MULTI_PACKAGES changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2006/11/26 01:29:12 espie Exp $
d13 1
a13 1
V=		1.4.5
d15 9
a23 9
PKGNAME-main=	nagios-plugins-${V}p0
PKGNAME-fping=	nagios-plugins-fping-${V}p0
PKGNAME-game=	nagios-plugins-game-${V}p0
PKGNAME-ldap=	nagios-plugins-ldap-${V}p0
PKGNAME-mysql=	nagios-plugins-mysql-${V}p0
PKGNAME-ntp=	nagios-plugins-ntp-${V}p0
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}p0
PKGNAME-samba=	nagios-plugins-samba-${V}p0
PKGNAME-snmp=	nagios-plugins-snmp-${V}p0
d87 1
a87 1
WANTLIB=		c crypto ssl
a88 1
LIB_DEPENDS-fping=
a90 1
LIB_DEPENDS-game=
d93 7
a99 2
WANTLIB-ldap=		${WANTLIB} sasl2 asn1 com_err gssapi krb5
LIB_DEPENDS-ldap=	lber,ldap:openldap-client-*:databases/openldap
a100 4
WANTLIB-mysql=		${WANTLIB} m z
LIB_DEPENDS-mysql=	mysqlclient:mysql-client-*:databases/mysql

LIB_DEPENDS-ntp=
d105 2
a106 1
LIB_DEPENDS-pgsql=	pq:postgresql-client-*:databases/postgresql
a111 1
LIB_DEPENDS-snmp=
d115 1
a115 2
WANTLIB-main=		${WANTLIB} m
LIB_DEPENDS-main=
@


1.15
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2006/11/20 21:18:15 bernd Exp $
d16 8
a23 8
PKGNAME-fping=	nagios-plugins-fping-${V}
PKGNAME-game=	nagios-plugins-game-${V}
PKGNAME-ldap=	nagios-plugins-ldap-${V}
PKGNAME-mysql=	nagios-plugins-mysql-${V}
PKGNAME-ntp=	nagios-plugins-ntp-${V}
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}
PKGNAME-samba=	nagios-plugins-samba-${V}
PKGNAME-snmp=	nagios-plugins-snmp-${V}
@


1.14
log
@Fix BUILD_DEPENDS and RUN_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2006/11/11 17:17:43 sturm Exp $
d3 1
a3 1
COMMENT=	"nagios base plugins"
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}
d60 1
a60 2
MULTI_PACKAGES=	-fping -game
SUBPACKAGE?=
a63 3
BUILD_DEPENDS+=	:mysql-client-*:databases/mysql \
		:openldap-client-*:databases/openldap \
		:postgresql-client-*:databases/postgresql
d87 32
a118 28
.if defined(PACKAGING)
WANTLIB=	c crypto ssl
.  if ${SUBPACKAGE} == "-fping"
RUN_DEPENDS=	::net/fping
.  elif ${SUBPACKAGE} == "-game"
RUN_DEPENDS=	::games/qstat
.  elif ${SUBPACKAGE} == "-ldap"
WANTLIB+=	sasl2 asn1 com_err gssapi krb5
LIB_DEPENDS=	lber,ldap:openldap-client-*:databases/openldap
.  elif ${SUBPACKAGE} == "-mysql"
WANTLIB+=	m z
LIB_DEPENDS=	mysqlclient:mysql-client-*:databases/mysql
.  elif ${SUBPACKAGE} == "-ntp"
WANTLIB+=	m
RUN_DEPENDS=	::net/ntp
.  elif ${SUBPACKAGE} == "-pgsql"
WANTLIB+=	crypto
LIB_DEPENDS=	pq:postgresql-client-*:databases/postgresql
.  elif ${SUBPACKAGE} == "-samba"
WANTLIB=
RUN_DEPENDS=	::net/samba
.  elif ${SUBPACKAGE} == "-snmp"
RUN_DEPENDS=	::net/net-snmp \
		::net/p5-Net-SNMP
.  else
WANTLIB+=	m
.  endif
.else
a119 1
.endif
@


1.13
log
@update to nagios-plugins 1.4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2006/11/11 14:16:23 mbalmer Exp $
d40 2
a41 2
BUILD_DEPENDS=	qstat::games/qstat \
		fping::net/fping
d77 1
a77 1
BUILD_DEPENDS+=	ntpdate::net/ntp
d82 1
a82 1
BUILD_DEPENDS+=	smbclient::net/samba
d88 1
a88 1
		snmpget::net/net-snmp
d94 1
a94 1
RUN_DEPENDS=	fping::net/fping
d96 1
a96 1
RUN_DEPENDS=	qstat::games/qstat
d105 1
a105 1
RUN_DEPENDS=	ntpdate::net/ntp
d111 1
a111 1
RUN_DEPENDS=	smbclient::net/samba
d113 1
a113 1
RUN_DEPENDS=	snmpget::net/net-snmp \
@


1.12
log
@Fix WANTLIB after openldap changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2006/07/19 06:24:00 sturm Exp $
d13 1
a13 1
V=		1.4.3
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}p2
d18 1
a18 1
PKGNAME-ldap=	nagios-plugins-ldap-${V}p0
a53 2
		--with-nagios-user=_nagios \
		--with-nagios-group=_nagios \
d55 1
d104 1
a104 1
WANTLIB=
d122 2
a123 1
NO_REGRESS=	lots of broken tests
@


1.11
log
@more brainfarts
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2006/07/18 20:45:46 sturm Exp $
d18 1
a18 1
PKGNAME-ldap=	nagios-plugins-ldap-${V}
d99 1
a99 1
WANTLIB+=	sasl2
@


1.10
log
@let the check_disk plugin count free space in bytes (MB, GB, ...) as
documented instead of using some obscure filesystem blocksize
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/05/07 07:42:09 sturm Exp $
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}p1
@


1.9
log
@do not install check_dhcp and check_icmp suid root (this code is
too crappy), instead explain how to setup systrace with privilege
elevation
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/04/19 20:35:28 sturm Exp $
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}p0
@


1.8
log
@update to nagios-plugins 1.4.3
a few bugfixes and USE_LIBTOOL
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2006/04/16 17:26:42 sturm Exp $
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}
d43 2
d124 5
@


1.7
log
@besides this alarm handler being completely wrong, do not segfault in
case child_process is not yet initialized
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2005/10/28 17:44:12 sturm Exp $
d13 1
a13 1
V=		1.4.2
d15 3
a17 3
PKGNAME=	nagios-plugins-${V}p0
PKGNAME-fping=	nagios-plugins-fping-${V}p0
PKGNAME-game=	nagios-plugins-game-${V}p0
d23 1
a23 1
PKGNAME-snmp=	nagios-plugins-snmp-${V}p0
d43 2
d69 1
d91 1
a91 1
WANTLIB=	c
d97 1
d100 1
d115 1
a115 1
WANTLIB+=	crypto ssl m
@


1.6
log
@update to nagios-plugins 1.4.2

from Mark Peoples <Mark.Peoples at asu.edu>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2005/09/16 09:51:27 espie Exp $
d15 3
a17 3
PKGNAME=	nagios-plugins-${V}
PKGNAME-fping=	nagios-plugins-fping-${V}
PKGNAME-game=	nagios-plugins-game-${V}
d23 1
a23 1
PKGNAME-snmp=	nagios-plugins-snmp-${V}
@


1.5
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2005/09/10 17:37:40 espie Exp $
d13 1
a13 1
V=		1.4.1
d15 9
a23 9
PKGNAME=	nagios-plugins-${V}p1
PKGNAME-fping=	nagios-plugins-fping-${V}p0
PKGNAME-game=	nagios-plugins-game-${V}p0
PKGNAME-ldap=	nagios-plugins-ldap-${V}p0
PKGNAME-mysql=	nagios-plugins-mysql-${V}p0
PKGNAME-ntp=	nagios-plugins-ntp-${V}p0
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}p0
PKGNAME-samba=	nagios-plugins-samba-${V}p0
PKGNAME-snmp=	nagios-plugins-snmp-${V}p0
@


1.4
log
@missing WANTLIB.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2005/08/13 18:20:23 espie Exp $
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}p0
@


1.3
log
@shared dirs.
okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/08/07 10:47:00 sturm Exp $
d15 1
a15 1
PKGNAME=	nagios-plugins-${V}
d110 1
a110 1
WANTLIB+=	crypto ssl
@


1.2
log
@update to nagios plugins 1.4.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/07/25 16:32:06 sturm Exp $
d16 8
a23 8
PKGNAME-fping=	nagios-plugins-fping-${V}
PKGNAME-game=	nagios-plugins-game-${V}
PKGNAME-ldap=	nagios-plugins-ldap-${V}
PKGNAME-mysql=	nagios-plugins-mysql-${V}
PKGNAME-ntp=	nagios-plugins-ntp-${V}
PKGNAME-pgsql=	nagios-plugins-pgsql-${V}
PKGNAME-samba=	nagios-plugins-samba-${V}
PKGNAME-snmp=	nagios-plugins-snmp-${V}
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/02/14 14:00:34 sturm Exp $
d13 2
a14 2
V=		1.4
DISTNAME=	nagios-plugins-${V:S,_,-,}
@


1.1.1.1
log
@Initial import of nagios 2.0b3 and base plugins 1.4.

Nagios is a host and service monitor designed to inform you of network
problems before your clients, end-users or managers do.  The monitoring
daemon runs intermittent checks on hosts and services you specify using
external "plugins" which return status information to Nagios. When problems
are encountered, the daemon can send notifications out to administrative
contacts in a variety of different ways (email, instant message, SMS, etc.).
Current status information, historical logs, and reports can all be accessed
via a web browser.

NOTE: Nagios might not work on 64bit archs.

@
text
@@
