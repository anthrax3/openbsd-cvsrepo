head	1.3;
access;
symbols
	OPENBSD_6_0:1.3.0.6
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.2
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.1.1.1.0.10
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.8
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.6
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.4
	OPENBSD_5_3_BASE:1.1.1.1
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	sthen_20120521:1.1.1.1
	sthen:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2015.07.18.22.59.01;	author sthen;	state Exp;
branches;
next	1.2;
commitid	fVraeA3NwqJh2KrM;

1.2
date	2014.10.23.14.39.03;	author sthen;	state Exp;
branches;
next	1.1;
commitid	WMtTjgKhZfuBYWlU;

1.1
date	2012.05.21.11.05.38;	author sthen;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.05.21.11.05.38;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to check_postgres-2.22.0
@
text
@$OpenBSD: patch-check_postgres_pl,v 1.2 2014/10/23 14:39:03 sthen Exp $
--- check_postgres.pl.orig	Tue Jun 30 09:58:51 2015
+++ check_postgres.pl	Sat Jul 18 16:57:07 2015
@@@@ -878,12 +878,9 @@@@ if (! $opt{'no-check_postgresrc'}) {
     elsif (exists $ENV{HOME} and -e "$ENV{HOME}/.check_postgresrc") {
         $rcfile = "$ENV{HOME}/.check_postgresrc";
     }
-    elsif (-e '/etc/check_postgresrc') {
-        $rcfile = '/etc/check_postgresrc';
+    elsif (-e '${SYSCONFDIR}/check_postgresrc') {
+        $rcfile = '${SYSCONFDIR}/check_postgresrc';
     }
-    elsif (-e '/usr/local/etc/check_postgresrc') {
-        $rcfile = '/usr/local/etc/check_postgresrc';
-    }
 }
 ## We need a temporary hash so that multi-value options can be overridden on the command line
 my %tempopt;
@@@@ -2074,7 +2071,7 @@@@ sub build_symlinks {
             next;
         }
 
-        if (symlink $0, $file) {
+        if (symlink '${TRUEPREFIX}/bin/check_postgres.pl', $file) {
             print msgn('symlink-create', $file);
         }
         else {
@


1.2
log
@update to check_postgres-2.21.0
@
text
@d1 4
a4 4
$OpenBSD: patch-check_postgres_pl,v 1.1.1.1 2012/05/21 11:05:38 sthen Exp $
--- check_postgres.pl.orig	Tue Sep 24 20:10:12 2013
+++ check_postgres.pl	Thu Oct 23 15:34:00 2014
@@@@ -870,12 +870,9 @@@@ if (! $opt{'no-check_postgresrc'}) {
d19 1
a19 1
@@@@ -2066,7 +2063,7 @@@@ sub build_symlinks {
@


1.1
log
@Initial revision
@
text
@d1 5
a5 5
$OpenBSD$
--- check_postgres.pl.orig	Wed Jan 18 03:12:05 2012
+++ check_postgres.pl	Sat May 19 10:40:00 2012
@@@@ -864,12 +864,9 @@@@ if (! $opt{'no-check_postgresrc'}) {
     elsif (-e "$ENV{HOME}/.check_postgresrc") {
d19 1
a19 1
@@@@ -2034,7 +2031,7 @@@@ sub build_symlinks {
@


1.1.1.1
log
@import ports/net/nagios/check_postgres, ok pea@@

check_postgres is a script for monitoring various attributes of
your database (transaction id status, blocked queries, long running
queries, connection status and more). It is designed to work with
Nagios, MRTG, or in standalone scripts.
@
text
@@
