head	1.2;
access;
symbols
	OPENBSD_3_8:1.1.1.1.0.4
	OPENBSD_3_8_BASE:1.1.1.1
	OPENBSD_3_7:1.1.1.1.0.2
	OPENBSD_3_7_BASE:1.1.1.1
	pedro_20041216:1.1.1.1
	pedro:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2005.11.25.15.09.44;	author pedro;	state dead;
branches;
next	1.1;

1.1
date	2004.12.16.13.38.12;	author pedro;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.12.16.13.38.12;	author pedro;	state Exp;
branches;
next	;


desc
@@


1.2
log
@luasocket 2.0, okay jolan@@
@
text
@$OpenBSD: patch-buffer_c,v 1.1 2004/12/16 13:38:12 pedro Exp $
--- buffer.c.orig	Mon Jul 26 17:17:35 2004
+++ buffer.c	Tue Aug 10 21:11:45 2004
@@@@ -75,7 +75,9 @@@@ int buf_meth_setstats(lua_State *L, p_bu
 \*-------------------------------------------------------------------------*/
 int buf_meth_send(lua_State *L, p_buf buf) {
     int top = lua_gettop(L);
+#ifdef LUASOCKET_DEBUG
     p_tm tm = tm_markstart(buf->tm);
+#endif
     int err = IO_DONE;
     size_t size, sent;
     const char *data = luaL_checklstring(L, 2, &size);
@@@@ -108,7 +110,9 @@@@ int buf_meth_send(lua_State *L, p_buf bu
 \*-------------------------------------------------------------------------*/
 int buf_meth_receive(lua_State *L, p_buf buf) {
     int err = IO_DONE, top = lua_gettop(L);
+#ifdef LUASOCKET_DEBUG
     p_tm tm = tm_markstart(buf->tm);
+#endif
     luaL_Buffer b;
     size_t size;
     const char *part = luaL_optlstring(L, 3, "", &size);
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@network support for the lua language, ok jolan@@
@
text
@@
