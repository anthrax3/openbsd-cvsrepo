head	1.2;
access;
symbols
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.08.27.00.35.24;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2008.07.11.01.51.23;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@workaround no more: can use 128-bit arithmetics now on amd64.
ok brad@@
@
text
@$OpenBSD: patch-lib_silcmath_tma_h,v 1.1 2008/07/11 01:51:23 martynas Exp $
--- lib/silcmath/tma.h.orig	Thu May  3 11:13:16 2007
+++ lib/silcmath/tma.h	Fri Feb 29 23:36:31 2008
@@@@ -51,7 +51,7 @@@@ extern "C" {
 
 
 /* detect 64-bit mode if possible */
-#if defined(__x86_64__)
+#if defined(__x86_64__) && !defined(__OpenBSD__)
    #if !(defined(MP_64BIT) && defined(MP_16BIT) && defined(MP_8BIT))
       #define MP_64BIT
    #endif
@


1.1
log
@sync with silc-client-1.1.4p0 patchset:
- do not enable DIV_SMALL by default, on all archs
- for now, don't use 128-bit arithmetics on amd64, as a work-around
for the gcc bug.  gcc3.3 mangles arguments for __divti3, and amd64
hangs on non-DIV_SMALL, when passing correct arguments.  this is
what silc-toolkit and silc-server use, too
unbreaks amd64
@
text
@d1 1
a1 1
$OpenBSD: patch-lib_silcmath_tma_h,v 1.1 2008/07/11 01:47:12 martynas Exp $
@

