head	1.2;
access;
symbols
	OPENBSD_4_2:1.1.1.1.0.2
	OPENBSD_4_2_BASE:1.1.1.1
	martynas_20070322:1.1.1.1
	martynas:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2007.11.18.17.36.18;	author martynas;	state dead;
branches;
next	1.1;

1.1
date	2007.03.22.19.55.38;	author martynas;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.03.22.19.55.38;	author martynas;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to irssi-silc-1.1.3
tweaks, looks good steven@@;  tested by Wiktor Izdebski and Simon Kuhnle
@
text
@$OpenBSD: patch-irssi-0_8_10_src_perl_perl-core_c,v 1.1 2007/03/22 19:55:38 martynas Exp $
--- irssi-0.8.10/src/perl/perl-core.c.orig	Fri Apr  7 12:56:00 2006
+++ irssi-0.8.10/src/perl/perl-core.c	Fri Apr  7 13:06:09 2006
@@@@ -370,12 +370,17 @@@@ char *perl_script_get_path(const char *n
 	/* check from ~/.irssi/scripts/ */
 	path = g_strdup_printf("%s/scripts/%s", get_irssi_dir(), file);
 	if (stat(path, &statbuf) != 0) {
-		/* check from SCRIPTDIR */
+		/* check from SYSCONFDIR and SCRIPTDIR */
 		g_free(path);
-		path = g_strdup_printf(SCRIPTDIR"/%s", file);
+		/* path = g_strdup_printf(SCRIPTDIR"/%s", file); */
+		path = g_strdup_printf(SYSCONFDIR"/irssi/scripts/%s", file);
 		if (stat(path, &statbuf) != 0) {
 			g_free(path);
-			path = NULL;
+			path = g_strdup_printf(SCRIPTDIR"/%s", file);
+			if (stat(path, &statbuf) != 0) {
+				g_free(path);
+				path = NULL;
+			}
 		}
 	}
 	g_free(file);
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@import irssi-silc, pkg/DESCR:
SILC protocol plugin for irssi. See http://www.silcnet.org/ and
http://penguin-breeder.org/silc/ for details.

input, testing Wiktor Izdebski <vicviq at gmail dot com>, thanks!
ok pyr@@, jasper@@
@
text
@@
