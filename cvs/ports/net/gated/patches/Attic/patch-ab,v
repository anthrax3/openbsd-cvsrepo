head	1.4;
access;
symbols
	OPENBSD_2_7:1.3.0.4
	OPENBSD_2_7_BASE:1.3
	OPENBSD_2_6:1.3.0.2
	OPENBSD_2_6_BASE:1.3
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	gated3_5_7:1.1.1.1
	gated:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2000.08.07.12.14.07;	author jakob;	state dead;
branches;
next	1.3;

1.3
date	99.04.20.22.26.32;	author brad;	state Exp;
branches
	1.3.4.1;
next	1.2;

1.2
date	99.03.14.19.17.04;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	97.11.22.23.57.32;	author joey;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.22.23.57.32;	author joey;	state Exp;
branches;
next	;

1.3.4.1
date	2000.09.15.05.09.10;	author marc;	state dead;
branches;
next	;


desc
@@


1.4
log
@Upgrade to GateD v3.6 and remove BROKEN
@
text
@--- src/task.c.orig	Wed Feb 17 18:32:18 1999
+++ src/task.c	Tue Apr 20 18:16:01 1999
@@@@ -5903,12 +5903,20 @@@@
 	}
 
 	/* Remove our association with a controling tty */
-#ifdef	USE_SETPGRP
+#if defined(USE_SETPGRP) || defined(USE_SETSID)
+#if defined(USE_SETPGRP)
 	t = setpgrp();
 	if (t < 0) {
 	    perror("task_daemonize: setpgrp");
 	    exit(1);
 	}
+#else  /* USE_SETPGRP */
+	t = setsid();
+	if (t < 0) {
+	    perror("task_daemonize: setsid");
+	    exit(1);
+	}
+#endif /* USE_SETPGRP */
 
 	task_signal_ignore(SIGHUP);
 
@@@@ -5927,7 +5935,7 @@@@
 	    /* Parent */
 	    exit(0);
 	}
-#else	/* USE_SETPGRP */
+#else  /* defined(USE_SETPGRP) || defined(USE_SETSID) */
 	t = setpgrp(0, getpid());
 	if (t < 0) {
 	    perror("task_daemonize: setpgrp");
@@@@ -5942,7 +5950,7 @@@@
 	    }
 	    (void) close(t);
 	}
-#endif	/* USE_SETPGRP */
+#endif /* defined(USE_SETPGRP) || defined(USE_SETSID) */
     }
 
     /* Close all open files */
@


1.3
log
@- upgrade to gated 3.5.11
- add patch from FreeBSD port:
Only flag the loopback address (127.0.0.1) on loopback interfaces
with the noadvice bit.  Other IP# numbers are valid and should be
advertised.
@
text
@@


1.3.4.1
log
@bring net as of cut-over date into 2.7 branch
@
text
@@


1.2
log
@upgrade to gated 3.5.10; Peter Galbavy <Peter.Galbavy@@knowledge.com>
@
text
@d1 3
a3 3
--- src/task.c.orig	Sun Mar 14 13:21:49 1999
+++ src/task.c	Sun Mar 14 13:24:50 1999
@@@@ -5862,12 +5862,20 @@@@
d25 1
a25 1
@@@@ -5886,7 +5894,7 @@@@
d34 1
a34 1
@@@@ -5901,7 +5909,7 @@@@
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- src/task.c.orig	Fri Jul 18 06:45:02 1997
+++ src/task.c	Wed Oct  1 21:40:45 1997
@@@@ -5868,12 +5868,20 @@@@
d15 1
a15 1
+#else	/* USE_SETPGRP */
d21 1
a21 1
+#endif	/* USE_SETPGRP */
d25 1
a25 1
@@@@ -5892,7 +5900,7 @@@@
d30 1
a30 1
+#else	/* defined(USE_SETPGRP) || defined(USE_SETSID) */
d34 1
a34 1
@@@@ -5907,7 +5915,7 @@@@
d39 1
a39 1
+#endif	/* defined(USE_SETPGRP) || defined(USE_SETSID) */
@


1.1.1.1
log
@
@
text
@@
