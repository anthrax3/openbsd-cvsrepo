head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2003.06.02.18.06.28;	author brad;	state dead;
branches;
next	1.3;

1.3
date	2003.05.13.21.38.26;	author wilfried;	state Exp;
branches;
next	1.2;

1.2
date	2002.12.20.22.16.10;	author jcs;	state dead;
branches;
next	1.1;

1.1
date	2002.11.03.02.03.24;	author jcs;	state Exp;
branches;
next	;


desc
@@


1.4
log
@upgrade to gaim 0.64

maybe cvs will suck less this 4th try at the commit.
@
text
@$OpenBSD: patch-src_buddy_c,v 1.3 2003/05/13 21:38:26 wilfried Exp $
--- src/buddy.c.orig	Thu Apr 24 13:47:59 2003
+++ src/buddy.c	Tue May 13 12:56:09 2003
@@@@ -1409,7 +1409,12 @@@@ static void gaim_gtk_blist_remove(struct
 
 static gboolean do_selection_changed(GaimBlistNode *new_selection)
 {
-	GaimBlistNode *old_selection = gtkblist->selected_node;
+	GaimBlistNode *old_selection;
+
+	if (!gtkblist)
+		return;
+
+	old_selection = gtkblist->selected_node;
 
 	if(new_selection != gtkblist->selected_node) {
 		gtkblist->selected_node = new_selection;
@


1.3
log
@prevent an infrequent crash
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@update to gaim-0.59.6
noticed by jolan.  vroom!
@
text
@d1 4
a4 9
$OpenBSD: patch-src_buddy_c,v 1.1 2002/11/03 02:03:24 jcs Exp $
--- src/buddy.c.orig	Mon Oct 14 17:23:58 2002
+++ src/buddy.c	Sat Nov  2 19:44:13 2002
@@@@ -2200,7 +2200,7 @@@@
 	time_t t;
 	int ihrs, imin;
 	struct buddy *b;
-	GtkStyle *style;
+	GtkStyle *style = NULL;
d6 9
a14 5
 	char infotip[2048];
 	char warn[256];
@@@@ -2231,10 +2231,13 @@@@
 	if (blist_options & OPT_BLIST_SHOW_IDLETIME)
 		gtk_widget_show(bs->idle);
d16 2
a17 13
-	style = gtk_style_copy( gtk_rc_get_style(bs->label) );
-	for (i = 0; i < 5; i++)
-		style->fg[i] = bs->idle->style->fg[i];
+	if(gtk_rc_get_style(bs->label))
+		style = gtk_style_copy( gtk_rc_get_style(bs->label) );
+	if(!style)
+		style = gtk_style_new();
 	if ((blist_options & OPT_BLIST_GREY_IDLERS) && (b->idle)) {
+		for (i = 0; i < 5; i++)
+			style->fg[i] = bs->idle->style->fg[i];
 		style->fg[GTK_STATE_NORMAL].red =
 		  (style->fg[GTK_STATE_NORMAL].red / 2) + (style->base[GTK_STATE_NORMAL].red / 2);
 		style->fg[GTK_STATE_NORMAL].green = 
@


1.1
log
@fix a gtk bug from gaim cvs, reported and tested by jolan luff
@
text
@d1 1
a1 1
$OpenBSD$
@

