head	1.4;
access;
symbols
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2007.05.30.15.09.07;	author steven;	state dead;
branches;
next	1.3;

1.3
date	2007.01.22.20.24.06;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2006.11.11.07.49.45;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2006.10.31.19.32.51;	author brad;	state Exp;
branches;
next	;


desc
@@


1.4
log
@remove gaim and plugins. superseded by pidgin and equivalent plugins.

ok brad, alek
@
text
@$OpenBSD: patch-configure_ac,v 1.3 2007/01/22 20:24:06 todd Exp $
--- configure.ac.orig	Thu Jan 18 23:28:24 2007
+++ configure.ac	Fri Jan 19 19:05:08 2007
@@@@ -421,6 +421,7 @@@@ if test "x$enable_consoleui" = "xyes"; t
 		# ncursesw was not found. Look for plain old ncurses
 		enable_consoleui=yes
 		AC_CHECK_LIB(ncurses, initscr, [GNT_LIBS="-lncurses"], [enable_consoleui=no])
+		LIBS="${LIBS} -lncurses"
 		AC_CHECK_LIB(panel, update_panels, [GNT_LIBS="$GNT_LIBS -lpanel"], [enable_consoleui=no])
 		AC_DEFINE(NO_WIDECHAR, 1, [Define to 1 if you don't have wide-character support.])
 		if test x"$ac_ncurses_includes" != "x"; then
@@@@ -583,7 +584,7 @@@@ else
 	if test "$ac_silc_libs" != "no"; then
 		SILC_LIBS="-L$ac_silc_libs"
 	fi
-	SILC_LIBS="$SILC_LIBS -lsilc -lsilcclient -lpthread $LIBDL"
+	SILC_LIBS="$SILC_LIBS -lsilc -lsilcclient -pthread $LIBDL"
 	AC_CHECK_LIB(silcclient, silc_client_init, [silcclient=yes], , $SILC_LIBS)
 fi
 AC_SUBST(SILC_LIBS)
@@@@ -1200,8 +1201,13 @@@@ dnl ####################################
 
 dnl These two are inverses of each other <-- stolen from evolution!
 
+AC_ARG_ENABLE(openssl,
+	[  --enable-openssl=[yes,no]  attempt to use OpenSSL for SSL support (preferred) [default=yes]],
+	[enable_openssl="$enableval"],
+	[enable_openssl="yes"])
+
 AC_ARG_ENABLE(gnutls,
-	[  --enable-gnutls=[yes,no]  attempt to use GnuTLS for SSL support (preferred) [default=yes]],
+	[  --enable-gnutls=[yes,no]  attempt to use GnuTLS for SSL support [default=yes]],
 	[enable_gnutls="$enableval"],
 	[enable_gnutls="yes"])
 
@@@@ -1213,6 +1219,90 @@@@ AC_ARG_ENABLE(nss,
 msg_ssl="None (MSN and Google Talk will not work without SSL!)"
 
 dnl #
+dnl # Check for OpenSSL if it's specified.
+dnl #
+if test "x$enable_openssl" != "xno"; then
+	enale_openssl="no"
+	prefix=`eval echo $prefix`
+
+	AC_ARG_WITH(openssl-includes,
+		[  --with-openssl-includes=PREFIX  location of OpenSSL includes.],
+		[ with_openssl_includes="$withval" ],
+		[ with_openssl_includes="$prefix/include" ])
+
+	have_openssl_includes="no"
+
+	if test "x$with_openssl_includes" != "xno"; then
+		CPPFLAGS_save="$CPPFLAGS"
+
+		AC_MSG_CHECKING(for OpenSSL includes)
+		AC_MSG_RESULT("")
+
+		CPPFLAGS="$CPPFLAGS -I$with_openssl_includes"
+		AC_CHECK_HEADERS(openssl/ssl.h, [ openssl_includes="yes" ])
+		CPPFLAGS="$CPPFLAGS_save"
+
+		if test "x$openssl_includes" != "xno" -a \
+			"x$openssl_includes" != "x"; then
+			have_openssl_includes="yes"
+
+			OPENSSL_CFLAGS="-I$with_openssl_includes"
+		else
+			OPENSSL_CFLAGS=""
+		fi
+	else
+		AC_MSG_CHECKING(for OpenSSL includes)
+		AC_MSG_RESULT(no)
+	fi
+
+	AC_ARG_WITH(openssl-libs,
+		[AC_HELP_STRING([--with-openssl-libs=PREFIX], [location of OpenSSL libraries.])],
+		[ with_openssl_libs="$withval" ])
+
+	if test "x$with_openssl_libs"     != "xno" -a \
+		"x$have_openssl_includes" != "xno"; then
+
+		LIBS_save="$LIBS"
+
+		case $with_openssl_libs in
+			""|-L*) ;;
+			*) with_openssl_libs="-L$with_openssl_libs" ;;
+		esac
+
+		AC_CACHE_CHECK([for OpenSSL libraries], openssl_libs,
+		[
+			LIBS="$LIBS $with_openssl_libs -lssl -lcrypto"
+			AC_TRY_LINK_FUNC(SSL_library_init, openssl_libs="yes", openssl_libs="no")
+			LIBS="$LIBS_save"
+		])
+
+		if test "x$openssl_libs" != "xno"; then
+			AC_DEFINE(HAVE_OPENSSL, 1, [Define if you have OpenSSL])
+			AC_DEFINE(HAVE_SSL)
+			msg_openssl="OpenSSL"
+			OPENSSL_LIBS="$with_openssl_libs -lssl -lcrypto"
+
+			enable_openssl="yes"
+		else
+			OPENSSL_CFLAGS=""
+			OPENSSL_LIBS=""
+		fi
+	else
+		AC_MSG_CHECKING(for OpenSSL libraries)
+		AC_MSG_RESULT(no)
+	fi
+else
+	OPENSSL_CFLAGS=""
+	OPENSSL_LIBS=""
+fi
+
+AC_SUBST(OPENSSL_CFLAGS)
+AC_SUBST(OPENSSL_LIBS)
+
+AM_CONDITIONAL(USE_OPENSSL, test "x$enable_openssl" = "xyes")
+
+
+dnl #
 dnl # Check for GnuTLS if it's specified.
 dnl #
 if test "x$enable_gnutls" != "xno"; then
@@@@ -1565,12 +1655,20 @@@@ fi
 
 AM_CONDITIONAL(USE_NSS, test "x$enable_nss" = "xyes")
 
-if test "x$msg_nss" != "x" -a "x$msg_gnutls" != "x"; then
+if test "x$msg_nss" != "x" -a "x$msg_gnutls" != "x" -a "x$msg_openssl" != "x"; then
+	msg_ssl="$msg_nss, $msg_gnutls, and $msg_openssl"
+elif test "x$msg_nss" != "x" -a "x$msg_gnutls" != "x"; then
 	msg_ssl="$msg_nss and $msg_gnutls"
+elif test "x$msg_nss" != "x" -a "x$msg_openssl" != "x"; then
+	msg_ssl="$msg_nss and $msg_openssl"
+elif test "x$msg_gnutls" != "x" -a "x$msg_openssl" != "x"; then
+	msg_ssl="$msg_gnutls and $msg_openssl"
 elif test "x$msg_nss" != "x"; then
 	msg_ssl=$msg_nss
 elif test "x$msg_gnutls" != "x"; then
 	msg_ssl=$msg_gnutls
+elif test "x$msg_openssl" != "x"; then   
+	msg_ssl=$msg_openssl
 fi
 
 dnl #######################################################################
@


1.3
log
@update to gaim beta6
from brad@@
@
text
@d1 1
a1 1
$OpenBSD: patch-configure_ac,v 1.2 2006/11/11 07:49:45 brad Exp $
@


1.2
log
@upgrade to gaim 2.0.0beta5
@
text
@d1 4
a4 4
$OpenBSD: patch-configure_ac,v 1.1 2006/10/31 19:32:51 brad Exp $
--- configure.ac.orig	Fri Nov 10 02:24:20 2006
+++ configure.ac	Fri Nov 10 22:02:47 2006
@@@@ -415,6 +415,7 @@@@ if test "x$enable_consoleui" = "xyes"; t
d11 2
a12 2
 	fi
@@@@ -570,7 +571,7 @@@@ else
d21 1
a21 1
@@@@ -1187,8 +1188,13 @@@@ dnl ####################################
d36 2
a37 2
@@@@ -1200,6 +1206,90 @@@@ AC_ARG_ENABLE(nss,
 msg_ssl="None (MSN will not work without SSL!)"
d127 1
a127 1
@@@@ -1552,12 +1642,20 @@@@ fi
@


1.1
log
@upgrade to gaim 2.0.0beta4

the audio flavor has been removed for now
as 2.x now requires gstreamer and the gstreamer
version we have in-tree is not new enough.

tested by ckuethe@@ alek@@ brad@@ and a few others.

ok alek@@
@
text
@d1 3
a3 3
$OpenBSD$
--- configure.ac.orig	Wed Oct 18 19:38:16 2006
+++ configure.ac	Sat Oct 28 23:35:23 2006
d12 1
a12 25
@@@@ -456,14 +457,16 @@@@ dnl ####################################
 AC_ARG_ENABLE(gstreamer,
 	[AC_HELP_STRING([--disable-gstreamer], [compile without GStreamer audio support])],
 	enable_gst="no", enable_gst="yes")
-PKG_CHECK_MODULES(GSTREAMER, [gstreamer-0.10], , [
-	AC_MSG_RESULT(no)
-	enable_gst="no"
-])
 if test "x$enable_gst" != "xno"; then
-	AC_DEFINE(USE_GSTREAMER, 1, [Use GStreamer for playing sounds])
-	AC_SUBST(GSTREAMER_CFLAGS)
-	AC_SUBST(GSTREAMER_LIBS)
+	PKG_CHECK_MODULES(GSTREAMER, [gstreamer-0.10], 
+		AC_DEFINE(USE_GSTREAMER, 1, [Use GStreamer for playing sounds])
+		AC_SUBST(GSTREAMER_CFLAGS)
+		AC_SUBST(GSTREAMER_LIBS)
+		enable_gst="yes"
+	], [
+		AC_MSG_RESULT(no)
+		enable_gst="no"
+	])
 fi
 
 dnl #######################################################################
@@@@ -570,7 +573,7 @@@@ else
d21 1
a21 1
@@@@ -1187,8 +1190,13 @@@@ dnl ####################################
d36 1
a36 1
@@@@ -1200,6 +1208,90 @@@@ AC_ARG_ENABLE(nss,
d127 1
a127 1
@@@@ -1552,12 +1644,20 @@@@ fi
@

