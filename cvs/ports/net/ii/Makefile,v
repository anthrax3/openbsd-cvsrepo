head	1.14;
access;
symbols
	OPENBSD_6_1:1.14.0.4
	OPENBSD_6_1_BASE:1.14
	OPENBSD_6_0:1.14.0.2
	OPENBSD_6_0_BASE:1.14
	OPENBSD_5_9:1.12.0.6
	OPENBSD_5_9_BASE:1.12
	OPENBSD_5_8:1.12.0.8
	OPENBSD_5_8_BASE:1.12
	OPENBSD_5_7:1.12.0.4
	OPENBSD_5_7_BASE:1.12
	OPENBSD_5_6:1.12.0.2
	OPENBSD_5_6_BASE:1.12
	OPENBSD_5_5:1.11.0.2
	OPENBSD_5_5_BASE:1.11
	OPENBSD_5_4:1.10.0.2
	OPENBSD_5_4_BASE:1.10
	OPENBSD_5_3:1.9.0.2
	OPENBSD_5_3_BASE:1.9
	OPENBSD_5_2:1.8.0.6
	OPENBSD_5_2_BASE:1.8
	OPENBSD_5_1_BASE:1.8
	OPENBSD_5_1:1.8.0.4
	OPENBSD_5_0:1.8.0.2
	OPENBSD_5_0_BASE:1.8
	OPENBSD_4_9:1.6.0.2
	OPENBSD_4_9_BASE:1.6
	OPENBSD_4_8:1.4.0.2
	OPENBSD_4_8_BASE:1.4
	OPENBSD_4_7:1.3.0.4
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.1.1.1.0.6
	OPENBSD_4_5_BASE:1.1.1.1
	OPENBSD_4_4:1.1.1.1.0.4
	OPENBSD_4_4_BASE:1.1.1.1
	OPENBSD_4_3:1.1.1.1.0.2
	OPENBSD_4_3_BASE:1.1.1.1
	jasper_20070920:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.14
date	2016.06.06.11.02.05;	author gsoares;	state Exp;
branches;
next	1.13;
commitid	eKvwyJNeFW3uy5c7;

1.13
date	2016.05.21.05.31.38;	author gsoares;	state Exp;
branches;
next	1.12;
commitid	WRE5Se7xco4BzzK8;

1.12
date	2014.07.18.01.23.04;	author gsoares;	state Exp;
branches;
next	1.11;
commitid	PtzewHeQQIlEYwCs;

1.11
date	2013.08.09.04.45.21;	author gsoares;	state Exp;
branches;
next	1.10;

1.10
date	2013.03.11.11.35.47;	author espie;	state Exp;
branches;
next	1.9;

1.9
date	2013.01.07.14.15.15;	author bentley;	state Exp;
branches;
next	1.8;

1.8
date	2011.03.11.09.00.14;	author jasper;	state Exp;
branches;
next	1.7;

1.7
date	2011.03.02.13.56.36;	author jasper;	state Exp;
branches;
next	1.6;

1.6
date	2010.11.19.22.31.33;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.10.18.18.36.48;	author espie;	state Exp;
branches;
next	1.4;

1.4
date	2010.05.23.23.11.45;	author sthen;	state Exp;
branches;
next	1.3;

1.3
date	2009.05.25.13.11.07;	author jim;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.26.17.38.26;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2007.09.20.19.15.00;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.09.20.19.15.00;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.14
log
@- Fix channel use after freeing in main loop
(spotted the hard way by Ray Lai)
patch from upstream git

- Add pledge(2) to ii(1)
    stdio rpath wpath cpath dpath: ii(1) will create directory
    structure and fifos on demand (when joining a new channel for
    example)
    inet net: required for tcpopen(), but pledge(2) is used after
    tcpopen() call. ucspi flavor doesn't need "inet dns" since
    that ucspi backend take care of network capabilities of ii(1).


diff from ray with tweaks from me and semarie.

OK semarie ray
@
text
@# $OpenBSD: Makefile,v 1.13 2016/05/21 05:31:38 gsoares Exp $

COMMENT=		minimalist IRC client

DISTNAME=		ii-1.7
REVISION=		3
CATEGORIES=		net

HOMEPAGE=		http://tools.suckless.org/ii
MASTER_SITES=		http://dl.suckless.org/tools/
MASTER_SITES0=		${HOMEPAGE}/patches/

MAINTAINER=		Gleydson Soares <gsoares@@openbsd.org>

# MIT/X
PERMIT_PACKAGE_CDROM=	Yes

# uses pledge()
WANTLIB=		c

NO_TEST=		Yes

FLAVORS=		ucspi
FLAVOR?=

# patches from http://tools.suckless.org/ii/patches
PATCH_DIST_STRIP=	-p1

.if ${FLAVOR} == "ucspi"
# adds unix client server programming interface support
PATCHFILES+=		${DISTNAME}-ucspi.diff:0
PATCH_LIST=		patch-* ucspipatch-*
RUN_DEPENDS=		net/ucspi-tools
.else
# adds ssl encryption support
PATCHFILES+=		${DISTNAME}-ssl.diff:0
PATCH_LIST=		patch-* sslpatch-*
WANTLIB+=		crypto ssl
.endif

SUPDISTFILES+=		${DISTNAME}-ssl.diff:0
SUPDISTFILES+=		${DISTNAME}-ucspi.diff:0

do-install:
	${INSTALL_PROGRAM} ${WRKSRC}/ii ${PREFIX}/bin
	${INSTALL_DATA_DIR} ${PREFIX}/man/man1/
	${INSTALL_MAN} ${WRKSRC}/ii.1 ${PREFIX}/man/man1/
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ii
	${INSTALL_DATA} ${WRKSRC}/{README,FAQ,query.sh} ${PREFIX}/share/doc/ii

.include <bsd.port.mk>
@


1.13
log
@add ucspi flavor to the IRC client net/ii.  It makes the usage of
ii more flexible.  Thus, it is possible to use ii with IPv6, libtls or a
socks proxy without applying much more patches from the upstream page.

This flavor uses ucspi for back-end connection instead of socked API

Eg/Usage:

1. Direct plain IRC connection

   tcpclient irc.freenode.net 6667 ii

2. TLS encrypted connection

   tcpclient irc.freenode.net 6697 tlsc ii

3. TLS connection in combination with a SOCKS proxy

   tcpclient 127.0.0.1 1080 socks irc.freenode.net 6697 tlsc ii

The patch file itself is comes from upstream
(http://tools.suckless.org/ii/patches/)

Diff from Jan Klemkow <j.klemkow at wemelug ! de>, who is also the author of the
upstream patch. Thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/07/18 01:23:04 gsoares Exp $
d6 1
a6 1
REVISION=		2
d18 1
@


1.12
log
@adds ssl encryption support for net/ii
patch from http://tools.suckless.org/ii/patches

pointed out via email from <mail at soeren-tempel.net>, thanks.

change my mailaddress while here.

review/tweaks from jasper/sthen
OK sthen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/08/09 04:45:21 gsoares Exp $
d6 1
a6 1
REVISION=		1
a8 5
# adds ssl encryption support
# patch from http://tools.suckless.org/ii/patches
PATCHFILES+=		${DISTNAME}-ssl.diff:0
PATCH_DIST_STRIP=	-p1

d18 1
a18 1
WANTLIB=		c crypto ssl
d21 21
@


1.11
log
@remove gcc2 remnants
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/03/11 11:35:47 espie Exp $
d6 1
a6 1
REVISION=		0
d9 5
d16 1
d18 1
a18 1
MAINTAINER=		Gleydson Soares <gsoares@@trusted.com.br>
d23 1
a23 1
WANTLIB=		c
@


1.10
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/01/07 14:15:15 bentley Exp $
d6 1
@


1.9
log
@Update to ii-1.7.

Changes since last release (http://lists.suckless.org/dev/1301/13945.html):

1.7 (2013-01-05)
    - -k now specifies an environment variable that contains the
      server key. This behaviour has been changed in order to not
      expose the password in the process list.
    - Fix parsing of JOIN messages for certain servers.
      Thanks Ivan Kanakarakis!
    - Use , rather than _ for slash characters in channel names.
      As per RFC , is not allowed in a channel name, while _ is.
      Thanks plomplomplom and Nils Dagsson Moskopp!

ok gsoares@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2011/03/11 09:00:14 jasper Exp $
a14 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM= Yes
PERMIT_DISTFILES_FTP=	Yes
d18 1
a18 1
NO_REGRESS=		Yes
@


1.8
log
@- no need for groff, mandoc is happy.

from gleydson soares (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2011/03/02 13:56:36 jasper Exp $
d5 1
a5 1
DISTNAME=		ii-1.6
@


1.7
log
@- update ii to 1.6

from Anthony J. Bentley, via Gleydson Soares (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/11/19 22:31:33 espie Exp $
a20 1
USE_GROFF =		Yes
@


1.6
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/10/18 18:36:48 espie Exp $
d5 1
a5 1
DISTNAME=		ii-1.4
@


1.5
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/05/23 23:11:45 sthen Exp $
d21 1
a21 1
USE_GROFF =	Yes
@


1.4
log
@Update MASTER_SITES; from Gleydson Soares. Bump not needed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2009/05/25 13:11:07 jim Exp $
d21 1
@


1.3
log
@update ii to 1.4

ok simon@@, Gleydson Soares (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/03/26 17:38:26 naddy Exp $
d9 1
a9 1
MASTER_SITES=		http://code.suckless.org/dl/tools/
@


1.2
log
@declare variable at top of block; fixes build with gcc2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/09/20 19:15:00 jasper Exp $
d5 1
a5 2
DISTNAME=		ii-1.3
PKGNAME=		${DISTNAME}p0
d8 2
a9 2
HOMEPAGE=		http://www.suckless.org/wiki/tools/irc
MASTER_SITES=           http://www.suckless.org/download/
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d6 1
@


1.1.1.1
log
@import ii 1.3

ii is a minimalist FIFO and filesystem-based IRC client. 

from Gleydson Soares (MAINTAINER)
@
text
@@
