head	1.4;
access;
symbols
	OPENBSD_6_2:1.4.0.2
	OPENBSD_6_2_BASE:1.4
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	robert_20050522:1.1.1.1
	robert:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2017.06.04.11.45.04;	author stsp;	state Exp;
branches;
next	1.3;
commitid	nHUJbGViAkCg2Orn;

1.3
date	2017.05.13.22.27.20;	author stsp;	state Exp;
branches;
next	1.2;
commitid	jtiLTyQuAjkxnjrR;

1.2
date	2006.01.21.11.34.04;	author alek;	state dead;
branches;
next	1.1;

1.1
date	2005.05.22.14.44.45;	author robert;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.22.14.44.45;	author robert;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update olsrd (again) to the actual latest stable release 0.9.6.1.
ok phessler@@ sthen@@
@
text
@$OpenBSD: patch-src_unix_ifnet_c,v 1.3 2017/05/13 22:27:20 stsp Exp $

Index: src/unix/ifnet.c
--- src/unix/ifnet.c.orig
+++ src/unix/ifnet.c
@@@@ -632,7 +632,10 @@@@ chk_if_up(struct olsr_if *iface, int debuglvl __attrib
     /* Find broadcast address */
     if (iface->cnf->ipv4_multicast.v4.s_addr) {
       /* Specified broadcast */
-      memcpy(&((struct sockaddr_in *)&ifs.int_broadaddr)->sin_addr.s_addr, &iface->cnf->ipv4_multicast.v4, sizeof(uint32_t));
+      struct sockaddr_in *sin = &ifs.int_broadaddr;
+      memcpy(&sin->sin_addr.s_addr, &iface->cnf->ipv4_multicast.v4, sizeof(uint32_t));
+      sin->sin_len = sizeof(*sin);
+      sin->sin_family = AF_INET;
     } else {
       /* Autodetect */
       struct sockaddr* ifrb;
@


1.3
log
@Update our very much outdated net/olsrd port to current release 0.9.0.3.
Add patches for rdomain support and a few bug fixes.
Roll the -plugins subpackage into -main, and add an rc.d script.

Lightly tested in Berlin's Freifunk OLSR mesh over ral(4) in IBSS mode.

martin@@ has rescinded maintainership which I am taking over.
ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD$
d6 1
a6 1
@@@@ -646,7 +646,10 @@@@ chk_if_up(struct olsr_if *iface, int debuglvl __attrib
d17 1
a17 1
       if (ioctl(olsr_cnf->ioctl_s, SIOCGIFBRDADDR, &ifr) < 0) {
@


1.2
log
@Update to 0.4.10

From Holger Mauermann <holger@@mauermann.org> (MAINTAINER)
@
text
@d1 17
a17 12
$OpenBSD: patch-src_unix_ifnet_c,v 1.1 2005/05/22 14:44:45 robert Exp $
--- src/unix/ifnet.c.orig	Mon Mar  7 20:17:02 2005
+++ src/unix/ifnet.c	Wed May 18 01:16:36 2005
@@@@ -40,7 +40,7 @@@@
  */
 
 
-#if defined __FreeBSD__ || defined __MacOSX__ || defined __NetBSD__
+#if defined __FreeBSD__ || defined __MacOSX__ || defined __NetBSD__ || defined __OpenBSD__
 #define ifr_netmask ifr_addr
 #endif
 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@Import olsrd-0.4.9.

The olsr.org OLSR daemon is an implementation of the Optimized Link
State Routing protocol. OLSR is a routing protocol for mobile ad-hoc
networks. The protocol is pro-active, table driven and utilizes a
technique called multipoint relaying for message flooding.
From: Holger Mauermann <holger@@mauermann.org>

ok pvalchev@@
@
text
@@
