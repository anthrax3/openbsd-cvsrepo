head	1.4;
access;
symbols
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.3
	OPENBSD_2_9:1.2.0.8
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.6
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.4
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.2.0.2
	OPENBSD_2_6_BASE:1.2
	OPENBSD_2_5:1.1.0.2
	OPENBSD_2_5_BASE:1.1;
locks; strict;
comment	@# @;


1.4
date	2001.12.26.19.15.09;	author brad;	state dead;
branches;
next	1.3;

1.3
date	2001.05.16.00.59.48;	author matt;	state Exp;
branches;
next	1.2;

1.2
date	99.05.30.23.03.01;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	99.03.19.09.06.08;	author brad;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Move Samba 2.2.x into the stable dir. Make room for an eventual port of
the developement branch (3.0).
@
text
@mktemp() used in lib/util.c by smbd_mktemp(), which is used by smbd/reply.c
(passed to open_file_shared(), calls open() with O_CREAT|O_EXCL).

Apart from that, mkstemp() is used (HAVE_SECURE_MKSTEMP is defined).

setreuid() and setregid() used by lib/util_sec.c.
@


1.3
log
@- update to 2.2.0 (tdb.c patch is from samba CVS to fix a bug), new MAINTAINER (daniel@@benzedrine.cx)
- put daemons in ${PREFIX}/libexec, respect CFLAGS (me)
@
text
@@


1.2
log
@- upgrade to Samba 2.0.4b
- add INSTALL and DEINSTALL scripts
@
text
@d1 2
a2 1
cursory examination done by andrew@@creep.net   18 Mar 1999
d4 1
a4 1
./smbd/reply.c:1726:  pstrcpy(fname2,(char *)mktemp(fname));
d6 1
a6 35
 ok - passed to open_file_shared() (./smbd/open.c:765)  with 
      FILE_CREATE_IF_NOT_EXIST|FILE_EXISTS_FAIL which results in open() 
      being called with O_CREAT|O_EXCL

./smbd/reply.c:2881:	pstrcpy(fname2,(char *)mktemp(fname));

 ok - passed to open_file_shared() (./smbd/open.c:765)  with 
      FILE_CREATE_IF_NOT_EXIST|FILE_EXISTS_FAIL which results in open() 
      being called with O_CREAT|O_EXCL

./smbd/message.c:57:  fstrcpy(name,(char *)mktemp(s));

 ok - the file is open()d with O_CREAT|O_EXCL

./smbd/filename.c:419:      pstrcpy(name,(char *)mktemp(name2));	  

 ?? - I wasn't able to tell where/if this was called from when the
      conn->printer member would != 0, so I don't know what was done
      with the returned name, if anything.  It's possible, though unlikely,
      that there is a race in a caller of unix_convert().

./smbwrapper/shared.c:40:	fstrcpy(name,(char *)mktemp(s));

 ok - the file is open()d with O_CREAT|O_EXCL

Also while investigating what I thought was a bug I found some behavior
that I consider undesirable:

      When a non-root user executes smbpasswd to change their password,
      it makes a connection to smbd, instead of having smbpasswd be suid
      root so it can modify the file.  This is fine, but the problem is 
      that in order for it to work you must have enabled anonymous
      access to smbd.  This seems to be intentional (see the code and
      comment at libsmb/passchange.c:74) but it would be better to fix
      smbd so that this is not necessary.
@


1.1
log
@upgrade to samba 2.0.3; Andrew Lambeth <andrew@@nfr.net>
@
text
@a8 2


a14 2


a18 2


d21 4
a24 6
  ?? - I wasn't able to tell where/if this was called from when the
       conn->printer member would != 0, so I don't know what was done
       with the returned name, if anything.  It's possible, though unlikely,
       that there is a race in a caller of unix_convert().


a29 1

a39 1

@

