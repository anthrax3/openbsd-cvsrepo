head	1.26;
access;
symbols
	OPENBSD_3_7:1.25.0.2
	OPENBSD_3_7_BASE:1.25
	OPENBSD_3_6:1.23.0.2
	OPENBSD_3_6_BASE:1.23
	OPENBSD_3_5:1.21.0.2
	OPENBSD_3_5_BASE:1.21
	OPENBSD_3_4:1.20.0.2
	OPENBSD_3_4_BASE:1.20
	OPENBSD_3_3:1.15.0.2
	OPENBSD_3_3_BASE:1.15
	OPENBSD_3_2:1.9.0.2
	OPENBSD_3_2_BASE:1.9
	OPENBSD_3_1:1.4.0.2
	OPENBSD_3_1_BASE:1.4;
locks; strict;
comment	@# @;


1.26
date	2005.04.03.11.20.38;	author mbalmer;	state dead;
branches;
next	1.25;

1.25
date	2004.12.10.22.13.30;	author alek;	state Exp;
branches;
next	1.24;

1.24
date	2004.09.30.19.55.12;	author robert;	state Exp;
branches;
next	1.23;

1.23
date	2004.07.23.09.49.33;	author robert;	state Exp;
branches
	1.23.2.1;
next	1.22;

1.22
date	2004.05.28.17.24.54;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2003.10.26.09.33.23;	author sturm;	state Exp;
branches
	1.21.2.1;
next	1.20;

1.20
date	2003.08.21.14.46.52;	author naddy;	state Exp;
branches
	1.20.2.1;
next	1.19;

1.19
date	2003.06.28.22.14.45;	author jolan;	state Exp;
branches;
next	1.18;

1.18
date	2003.05.12.18.02.45;	author sturm;	state Exp;
branches;
next	1.17;

1.17
date	2003.04.14.15.02.09;	author wilfried;	state Exp;
branches;
next	1.16;

1.16
date	2003.04.07.19.32.40;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2003.03.16.02.26.44;	author brad;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2002.12.14.09.31.50;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	2002.11.22.00.53.26;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	2002.11.20.20.32.41;	author dhartmei;	state Exp;
branches;
next	1.11;

1.11
date	2002.10.21.20.14.03;	author jakob;	state Exp;
branches;
next	1.10;

1.10
date	2002.10.21.07.47.12;	author dhartmei;	state Exp;
branches;
next	1.9;

1.9
date	2002.06.21.13.07.01;	author dhartmei;	state Exp;
branches
	1.9.2.1;
next	1.8;

1.8
date	2002.06.19.08.03.14;	author dhartmei;	state Exp;
branches;
next	1.7;

1.7
date	2002.06.18.18.42.12;	author dhartmei;	state Exp;
branches;
next	1.6;

1.6
date	2002.05.07.10.03.33;	author dhartmei;	state Exp;
branches;
next	1.5;

1.5
date	2002.04.25.23.34.11;	author dhartmei;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.11.16.17.17;	author dhartmei;	state Exp;
branches
	1.4.2.1;
next	1.3;

1.3
date	2002.02.09.14.15.08;	author dhartmei;	state Exp;
branches;
next	1.2;

1.2
date	2002.02.05.09.07.13;	author dhartmei;	state Exp;
branches;
next	1.1;

1.1
date	2001.12.26.19.15.09;	author brad;	state Exp;
branches;
next	;

1.4.2.1
date	2002.11.22.02.16.34;	author brad;	state Exp;
branches;
next	;

1.9.2.1
date	2002.11.21.19.41.03;	author naddy;	state Exp;
branches;
next	1.9.2.2;

1.9.2.2
date	2002.11.22.02.09.18;	author brad;	state Exp;
branches;
next	1.9.2.3;

1.9.2.3
date	2003.03.16.03.40.12;	author brad;	state Exp;
branches;
next	1.9.2.4;

1.9.2.4
date	2003.04.07.19.58.18;	author brad;	state Exp;
branches;
next	;

1.15.2.1
date	2003.05.03.03.42.37;	author brad;	state Exp;
branches;
next	;

1.20.2.1
date	2004.05.28.20.41.55;	author brad;	state Exp;
branches;
next	1.20.2.2;

1.20.2.2
date	2004.07.23.14.06.56;	author robert;	state Exp;
branches;
next	1.20.2.3;

1.20.2.3
date	2004.10.01.04.01.59;	author brad;	state Exp;
branches;
next	;

1.21.2.1
date	2004.05.28.20.08.20;	author brad;	state Exp;
branches;
next	1.21.2.2;

1.21.2.2
date	2004.07.23.14.06.05;	author robert;	state Exp;
branches;
next	1.21.2.3;

1.21.2.3
date	2004.10.01.04.04.14;	author brad;	state Exp;
branches;
next	;

1.23.2.1
date	2005.01.13.02.09.08;	author brad;	state Exp;
branches;
next	;


desc
@@


1.26
log
@Update to Samba 3.0.13.

ok alek@@, espie@@, pval@@, xsa@@
@
text
@# $OpenBSD: Makefile,v 1.25 2004/12/10 22:13:30 alek Exp $

COMMENT=	"SMB and CIFS client and server for UNIX"

DISTNAME=	samba-2.2.12
PKGNAME=	${DISTNAME}p0
CATEGORIES=	net
MASTER_SITES=	http://us1.samba.org/samba/ftp/old-versions/ \
		http://us4.samba.org/samba/ftp/old-versions/

HOMEPAGE=	http://www.samba.org/

LIB_DEPENDS=	popt::devel/popt

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		c crypto ncurses readline ssl 

MAKE_FLAGS=	PASSWD_PROGRAM="/usr/bin/passwd"
FAKE_FLAGS=	prefix="${WRKINST}${PREFIX}" \
		BASEDIR="${WRKINST}${PREFIX}" \
		LIBDIR="${WRKINST}${PREFIX}/lib/samba" \
		PIDDIR="${WRKINST}/var/run" \
		SWATDIR="${WRKINST}${PREFIX}/share/swat" \
		SBINDIR="${WRKINST}${PREFIX}/libexec" \
		VARDIR="${WRKINST}/var"

CONFDIR=	${SYSCONFDIR}/samba
SAMBA_SPOOL=	/var/spool/samba
SAMBA_LOGDIR=	/var/log
SUBST_VARS=	SAMBA_SPOOL CONFDIR

SEPARATE_BUILD=	concurrent
CONFIGURE_STYLE= autoconf
CONFIGURE_ARGS=	--disable-cups \
		--libdir="${PREFIX}/lib/samba" \
		--localstatedir="/var" \
		--sbindir="${PREFIX}/libexec" \
		--with-configdir="${CONFDIR}" \
		--with-lockdir="${SAMBA_SPOOL}" \
		--with-piddir="/var/run" \
		--with-logfilebase="${SAMBA_LOGDIR}" \
		--with-privatedir="${CONFDIR}" \
		--with-swatdir="${PREFIX}/share/swat" \
		--with-ssl \
		--with-sslinc="/usr/include/ssl" \
		--with-ssllib="/usr/lib"
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"

NO_REGRESS=	Yes

WRKDIST=	${WRKDIR}/${DISTNAME}/source

SAMBA_DOCS=${WRKSRC}/../README \
	${WRKSRC}/../docs/THANKS \
	${WRKSRC}/../docs/history \
	${WRKSRC}/../docs/announce \
	${WRKSRC}/../docs/Registry/*.reg
SAMPLE_CONFIG=	${PREFIX}/share/examples/samba/smb.conf

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/samba/faq
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/samba/textdocs
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/samba
	cp -R ${WRKSRC}/../examples/* ${PREFIX}/share/examples/samba
	@@chown -R ${SHAREOWN}:${SHAREGRP} ${PREFIX}/share/examples/samba
	@@chmod -R go+r ${PREFIX}/share/examples/samba/*
	@@find ${PREFIX}/share/examples/samba -type d -exec chmod go+x {} \;
	${INSTALL_DATA} ${FILESDIR}/README.OpenBSD ${PREFIX}/share/doc/samba
	for i in ${SAMBA_DOCS}; do \
	 ${INSTALL_DATA} $$i ${PREFIX}/share/doc/samba ;	\
	done
	for i in ${WRKSRC}/../docs/faq/* ; do \
	 ${INSTALL_DATA} $$i ${PREFIX}/share/doc/samba/faq ; \
	done
	for i in ${WRKSRC}/../docs/textdocs/* ; do \
	 if [ -f $$i ]; then \
	  ${INSTALL_DATA} $$i ${PREFIX}/share/doc/samba/textdocs ;\
	 fi \
	done
	@@sed -e 's:/usr/spool/samba:${SAMBA_SPOOL}:g' \
	 -e 's:/usr/local/samba/var/log:${SAMBA_LOGDIR}/smbd:g' \
	 ${WRKSRC}/../examples/smb.conf.default > ${SAMPLE_CONFIG}
	${INSTALL_SCRIPT} ${WRKSRC}/script/mksmbpasswd.sh ${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/script/convert_smbpasswd ${PREFIX}/bin
	@@chown ${BINOWN}:${BINGRP} ${PREFIX}/bin/smbpasswd
	@@chmod 111 ${PREFIX}/bin/smbpasswd

.include <bsd.port.mk>
@


1.25
log
@- Kill DEINSTALL
- Replace INSTALL with @@commands
- Bump PKGNAME
- Add WANTLIB marker

looks good sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2004/09/30 19:55:12 robert Exp $
@


1.24
log
@SECURITY:
update to 2.2.12; remove the IPv6 diff from distinfo;
A remote attacker may be able to gain access to files which exist
outside of the share's defined path.
Such files must still be readable by the account used for the connection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2004/07/23 09:49:33 robert Exp $
d6 1
d20 1
@


1.23
log
@SECURITY: CAN-2004-0686
Upgrade to 2.2.10:
Fixes a buffer overrun in the code
used to support the 'manglin method = hash'
smb.conf option.

from peter@@, little modification by me;
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/05/28 17:24:54 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.10
@


1.23.2.1
log
@update to 2.2.12;
A remote attacker may be able to gain access to files which exist
outside of the share's defined path.
Such files must still be readable by the account used for the connection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2004/07/23 09:49:33 robert Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.12
@


1.22
log
@upgrade to Samba 2.2.9

This is a maintenance release of Samba 2.2.8a to address the problem with
user password changes after applying the Microsoft hotfix described in
KB828741 to Windows NT 4.0/200x/XP clients.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2003/10/26 09:33:23 sturm Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.9
@


1.21
log
@fix MASTER_SITES

from Dmitry Lohansky <sq@@oganer.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2003/08/21 14:46:52 naddy Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.8a
d36 2
a37 1
CONFIGURE_ARGS=	--libdir="${PREFIX}/lib/samba" \
a39 1
		--disable-cups \
a51 5
# Warning: these aditional options have not been tested.
#CONFIGURE_ARGS+=       --with-afs
#CONFIGURE_ARGS+=       --with-dfs
#CONFIGURE_ARGS+=       --with-krb5=base-dir

d61 1
a61 1
SAMPLE_CONFIG=	${PREFIX}/share/examples/samba/smb.conf.default
d67 1
a67 1
	@@cp -R ${WRKSRC}/../examples/* ${PREFIX}/share/examples/samba
d69 2
d72 1
a72 1
	@@for i in ${SAMBA_DOCS}; do \
d75 1
a75 1
	@@for i in ${WRKSRC}/../docs/faq/* ; do \
d78 1
a78 1
	@@for i in ${WRKSRC}/../docs/textdocs/* ; do \
@


1.21.2.1
log
@MFC:
upgrade to Samba 2.2.9

This is a maintenance release of Samba 2.2.8a to address the problem with
user password changes after applying the Microsoft hotfix described in
KB828741 to Windows NT 4.0/200x/XP clients.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/05/28 17:24:54 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.9
d36 1
a36 2
CONFIGURE_ARGS=	--disable-cups \
		--libdir="${PREFIX}/lib/samba" \
d39 1
d52 5
d66 1
a66 1
SAMPLE_CONFIG=	${PREFIX}/share/examples/samba/smb.conf
d72 1
a72 1
	cp -R ${WRKSRC}/../examples/* ${PREFIX}/share/examples/samba
a73 2
	@@chmod -R go+r ${PREFIX}/share/examples/samba/*
	@@find ${PREFIX}/share/examples/samba -type d -exec chmod go+x {} \;
d75 1
a75 1
	for i in ${SAMBA_DOCS}; do \
d78 1
a78 1
	for i in ${WRKSRC}/../docs/faq/* ; do \
d81 1
a81 1
	for i in ${WRKSRC}/../docs/textdocs/* ; do \
@


1.21.2.2
log
@SECURITY: CAN-2004-0686
Upgrade to 2.2.10:
Fixes a buffer overrun in the code
used to support the 'manglin method = hash'
smb.conf option.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.1 2004/05/28 20:08:20 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.10
@


1.21.2.3
log
@update to 2.2.12;
A remote attacker may be able to gain access to files which exist
outside of the share's defined path.
Such files must still be readable by the account used for the connection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21.2.2 2004/07/23 14:06:05 robert Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.12
@


1.20
log
@* Use appropriate owners/groups from bsd.own.mk.
* Remove obsolete WWW lines while we're here.

From: Xavier Santolaria <xavier@@santolaria.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2003/06/28 22:14:45 jolan Exp $
d7 2
a8 8
MASTER_SITES=	http://us1.samba.org/samba/ftp/ \
		http://us2.samba.org/samba/ftp/ \
		http://us3.samba.org/samba/ftp/ \
		http://us4.samba.org/samba/ftp/ \
		http://se.samba.org/samba/ftp/ \
		ftp://ftp.samba.org/pub/samba/ \
		ftp://ca.samba.org/pub/samba/ \
		ftp://ftp.ring.gr.jp/pub/net/samba/
@


1.20.2.1
log
@MFC:
upgrade to Samba 2.2.9

This is a maintenance release of Samba 2.2.8a to address the problem with
user password changes after applying the Microsoft hotfix described in
KB828741 to Windows NT 4.0/200x/XP clients.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2004/05/28 17:24:54 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.9
d7 8
a14 2
MASTER_SITES=	http://us1.samba.org/samba/ftp/old-versions/ \
		http://us4.samba.org/samba/ftp/old-versions/
d42 1
a42 2
CONFIGURE_ARGS=	--disable-cups \
		--libdir="${PREFIX}/lib/samba" \
d45 1
d58 5
d72 1
a72 1
SAMPLE_CONFIG=	${PREFIX}/share/examples/samba/smb.conf
d78 1
a78 1
	cp -R ${WRKSRC}/../examples/* ${PREFIX}/share/examples/samba
a79 2
	@@chmod -R go+r ${PREFIX}/share/examples/samba/*
	@@find ${PREFIX}/share/examples/samba -type d -exec chmod go+x {} \;
d81 1
a81 1
	for i in ${SAMBA_DOCS}; do \
d84 1
a84 1
	for i in ${WRKSRC}/../docs/faq/* ; do \
d87 1
a87 1
	for i in ${WRKSRC}/../docs/textdocs/* ; do \
@


1.20.2.2
log
@SECURITY: CAN-2004-0686
Upgrade to 2.2.10:
Fixes a buffer overrun in the code
used to support the 'manglin method = hash'
smb.conf option.

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20.2.1 2004/05/28 20:41:55 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.10
@


1.20.2.3
log
@update to 2.2.12;
A remote attacker may be able to gain access to files which exist
outside of the share's defined path.
Such files must still be readable by the account used for the connection.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20.2.2 2004/07/23 14:06:56 robert Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.12
@


1.19
log
@remove krb4 hints which point to nothing now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/05/12 18:02:45 sturm Exp $
d79 1
a79 1
	@@chown -R root:bin ${PREFIX}/share/examples/samba
d97 1
a97 1
	@@chown root:bin ${PREFIX}/bin/smbpasswd
@


1.18
log
@- don't hardcode /etc, use SYSCONFDIR instead
- don't change SYSCONFDIR, use CONFDIR/SUBST_VARS instead and if neccessary
  use "CONFIGURE_STYLE=gnu old" and explicitly set --sysconfdir=${CONFDIR}
a few more to come...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/04/14 15:02:09 wilfried Exp $
a60 1
#CONFIGURE_ARGS+=       --with-krb4=/etc/kerberosIV
@


1.17
log
@POSIX chown, ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2003/04/07 19:32:40 brad Exp $
d35 1
a35 1
SYSCONFDIR=	/etc/samba
d38 1
a38 1
SUBST_VARS=	SAMBA_SPOOL
d46 1
a46 1
		--with-configdir="${SYSCONFDIR}" \
d50 1
a50 1
		--with-privatedir="${SYSCONFDIR}" \
@


1.16
log
@upgrade to Samba 2.2.8a

A flaw was found in Samba which could allow remote anonymous root
level privileges.

http://marc.theaimsgroup.com/?l=bugtraq&m=104972664226781&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2003/03/16 02:26:44 brad Exp $
d80 1
a80 1
	@@chown -R root.bin ${PREFIX}/share/examples/samba
d98 1
a98 1
	@@chown root.bin ${PREFIX}/bin/smbpasswd
@


1.15
log
@upgrade to Samba 2.2.8

A flaw was found in the smbd code which could allow remote anonymous
root level privileges on a server running Samba.

http://us1.samba.org/samba/whatsnew/samba-2.2.8.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/12/14 09:31:50 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.8
d18 2
d55 2
@


1.15.2.1
log
@upgrade to Samba 2.2.8a

A flaw was found in Samba which could allow remote anonymous root
level privileges.

http://marc.theaimsgroup.com/?l=bugtraq&m=104972664226781&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2003/04/07 19:32:40 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.8a
a17 2
LIB_DEPENDS=	popt::devel/popt

a52 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.14
log
@upgrade to Samba 2.2.7a
--
MAINTAINER ok
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/11/22 00:53:26 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.7a
a17 2
MAINTAINER=	Daniel Hartmeier <dhartmei@@openbsd.org>

d43 1
@


1.13
log
@don't try to create /var or /var/run outside of the FAKE work area.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/11/20 20:32:41 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.7
d20 1
@


1.12
log
@Security update to 2.2.7, see
http://www.samba.org/samba/whatsnew/samba-2.2.7.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/10/21 20:14:03 jakob Exp $
d29 1
d31 2
a32 1
		SBINDIR="${WRKINST}${PREFIX}/libexec"
@


1.11
log
@update mirrors. ok dhartmei@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/10/21 07:47:12 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.6
@


1.10
log
@Update to Samba 2.2.6
see http://www.samba.org/samba/whatsnew/samba-2.2.6.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/06/21 13:07:01 dhartmei Exp $
d7 6
a12 2
MASTER_SITES=	ftp://ftp.samba.org/pub/samba/ \
		http://us1.samba.org/samba/ftp/ \
d14 1
a14 3
		ftp://ftp.uni-trier.de/pub/unix/network/samba/ \
		ftp://ring.asahi-net.or.jp/pub/net/samba/ \
		ftp://ftp.funet.fi/pub/mirrors/ftp.samba.org/pub/samba/
@


1.9
log
@Update to Samba 2.2.5, see change list on
http://www.samba.org/samba/whatsnew/samba-2.2.5.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/06/19 08:03:14 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.5
a6 1
NEED_VERSION=	1.500
@


1.9.2.1
log
@MFC:
Security update to 2.2.7, see
http://www.samba.org/samba/whatsnew/samba-2.2.7.html
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
a5 1
DISTNAME=	samba-2.2.7
d7 3
a9 6
MASTER_SITES=	http://us1.samba.org/samba/ftp/ \
		http://us2.samba.org/samba/ftp/ \
		http://us3.samba.org/samba/ftp/ \
		http://us4.samba.org/samba/ftp/ \
		http://se.samba.org/samba/ftp/ \
		ftp://ftp.samba.org/pub/samba/ \
d11 3
a13 1
		ftp://ftp.ring.gr.jp/pub/net/samba/
@


1.9.2.2
log
@MFC:
don't try to create /var or /var/run outside of the FAKE work area.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9.2.1 2002/11/21 19:41:03 naddy Exp $
a28 1
		PIDDIR="${WRKINST}/var/run" \
d30 1
a30 2
		SBINDIR="${WRKINST}${PREFIX}/libexec" \
		VARDIR="${WRKINST}/var"
@


1.9.2.3
log
@upgrade to Samba 2.2.8

A flaw was found in the smbd code which could allow remote anonymous
root level privileges on a server running Samba.

http://us1.samba.org/samba/whatsnew/samba-2.2.8.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2003/03/16 02:26:44 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.8
d18 2
a19 1
# GPL
a43 1
		--disable-cups \
@


1.9.2.4
log
@upgrade to Samba 2.2.8a

A flaw was found in Samba which could allow remote anonymous root
level privileges.

http://marc.theaimsgroup.com/?l=bugtraq&m=104972664226781&w=2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2003/04/07 19:32:40 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.8a
a17 2
LIB_DEPENDS=	popt::devel/popt

a52 2
CONFIGURE_ENV=	CPPFLAGS="-I${LOCALBASE}/include" \
		LDFLAGS="-L${LOCALBASE}/lib"
@


1.8
log
@Use /var/run for pid files, suggested by several people.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/06/18 18:42:12 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.4
@


1.7
log
@Use /var/spool/samba/ for pid files as well (instead of /var/locks/,
which doesn't exist), found by Kenneth R Westerback
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/05/07 10:03:33 dhartmei Exp $
d43 1
a43 1
		--with-piddir="${SAMBA_SPOOL}" \
@


1.6
log
@Update to Samba 2.2.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/04/25 23:34:11 dhartmei Exp $
d43 1
@


1.5
log
@openbsd.org address in MAINTAINER, from naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/02/11 16:17:17 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.3a
@


1.4
log
@Fix a mirror url, from wilfried@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/02/09 14:15:08 dhartmei Exp $
d17 1
a17 1
MAINTAINER=	Daniel Hartmeier <daniel@@benzedrine.cx>
@


1.4.2.1
log
@MFC:
Security update to 2.2.7, see
http://www.samba.org/samba/whatsnew/samba-2.2.7.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/02/11 16:17:17 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.7
d7 3
a9 6
MASTER_SITES=	http://us1.samba.org/samba/ftp/ \
		http://us2.samba.org/samba/ftp/ \
		http://us3.samba.org/samba/ftp/ \
		http://us4.samba.org/samba/ftp/ \
		http://se.samba.org/samba/ftp/ \
		ftp://ftp.samba.org/pub/samba/ \
d11 3
a13 1
		ftp://ftp.ring.gr.jp/pub/net/samba/
d17 1
a17 1
MAINTAINER=	Daniel Hartmeier <dhartmei@@openbsd.org>
a27 1
		PIDDIR="${WRKINST}/var/run" \
d29 1
a29 2
		SBINDIR="${WRKINST}${PREFIX}/libexec" \
		VARDIR="${WRKINST}/var"
a42 1
		--with-piddir="/var/run" \
@


1.3
log
@Update to 2.2.3a, from brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/02/05 09:07:13 dhartmei Exp $
d13 1
a13 1
		ftp://ftp.funet.fi/pub/mirrors/ftp.samba.org/pub/samba/old-versions/
@


1.2
log
@Update to 2.2.3, from brad@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2001/12/26 19:15:09 brad Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.3
d31 5
d41 4
a44 3
		--with-configdir="${SYSCONFDIR}/samba" \
		--with-lockdir="/var/spool/samba" \
		--with-privatedir="${SYSCONFDIR}/samba" \
a59 3
SAMBA_SPOOL=	/var/spool/samba
SAMBA_LOGDIR=	/var/log

d71 1
a71 1
	@@cp -r ${WRKSRC}/../examples/* ${PREFIX}/share/examples/samba
@


1.1
log
@Move Samba 2.2.x into the stable dir. Make room for an eventual port of
the developement branch (3.0).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2001/12/04 00:41:46 dhartmei Exp $
d5 1
a5 1
DISTNAME=	samba-2.2.2
@

