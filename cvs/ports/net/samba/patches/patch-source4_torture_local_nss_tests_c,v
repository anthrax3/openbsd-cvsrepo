head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.4
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2;
locks; strict;
comment	@# @;


1.1
date	2016.04.12.17.42.09;	author jca;	state Exp;
branches
	1.1.2.1;
next	;
commitid	UGRk8kk9vV3gDO72;

1.1.2.1
date	2016.04.17.17.12.16;	author jca;	state Exp;
branches;
next	;
commitid	Iw4uKtebv493vNb5;


desc
@@


1.1
log
@Update to samba-4.3.6

i386 build by danj@@, ok sthen@@

The changelog between 4.1.23 and 4.3.6 is too big to be described here.
The point of updating now is that 4.1.x won't receive updates for the
freshly published security advisories.  samba-4.3.8 will follow.
@
text
@$OpenBSD$

Workaround lack of getpwent_r(3)/getgrent_r(3).

--- source4/torture/local/nss_tests.c.orig	Sun Apr 10 15:36:54 2016
+++ source4/torture/local/nss_tests.c	Sun Apr 10 15:37:50 2016
@@@@ -25,6 +25,13 @@@@
 #include "torture/local/proto.h"
 #include "lib/replace/system/passwd.h"
 
+#ifndef HAVE_GETPWENT_R
+#define getpwent_r(pwdst, buf, buflen, pwdstp)		ENOSYS
+#endif
+#ifndef HAVE_GETGRENT_R
+#define getgrent_r(grdst, buf, buflen, grdstp)		ENOSYS
+#endif
+
 static bool copy_passwd(struct torture_context *tctx,
 			const struct passwd *pwd,
 			struct passwd *p)
@


1.1.2.1
log
@Missed in previous.
@
text
@d1 1
a1 1
$OpenBSD: patch-source4_torture_local_nss_tests_c,v 1.1 2016/04/12 17:42:09 jca Exp $
@

