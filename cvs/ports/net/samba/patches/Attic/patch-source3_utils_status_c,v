head	1.2;
access;
symbols
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.04.12.17.42.09;	author jca;	state dead;
branches;
next	1.1;
commitid	UGRk8kk9vV3gDO72;

1.1
date	2015.09.30.18.16.15;	author jca;	state Exp;
branches
	1.1.2.1;
next	;
commitid	2kwq3dm9deHJsBom;

1.1.2.1
date	2016.04.17.17.08.29;	author jca;	state dead;
branches;
next	;
commitid	ZMnLkV4M50X9F3yT;


desc
@@


1.2
log
@Update to samba-4.3.6

i386 build by danj@@, ok sthen@@

The changelog between 4.1.23 and 4.3.6 is too big to be described here.
The point of updating now is that 4.1.x won't receive updates for the
freshly published security advisories.  samba-4.3.8 will follow.
@
text
@$OpenBSD: patch-source3_utils_status_c,v 1.1 2015/09/30 18:16:15 jca Exp $

Backport upstream warning for https://bugzilla.samba.org/show_bug.cgi?id=11012

--- source3/utils/status.c.orig	Wed Sep 30 12:53:32 2015
+++ source3/utils/status.c	Wed Sep 30 12:53:35 2015
@@@@ -376,6 +376,12 @@@@ static void print_notify_recs(const char *path,
 		goto done;
 	}
 
+	if (getuid() != 0) {
+		d_printf("smbstatus only works as root!\n");
+		ret = 1;
+		goto done;
+	}
+
 	pc = poptGetContext(NULL, argc, (const char **) argv, long_options, 
 			    POPT_CONTEXT_KEEP_FIRST);
 
@


1.1
log
@Backport usage warning for smbstatus(1), picked from upstream.

Problem noticed and different patch proposed by giovanni@@.
ok giovanni@@ Ian McWilliam
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.2.1
log
@Backport SECURITY update to samba-4.3.8

ok sthen@@

Fixes for:

CVE-2015-7560 (Incorrect ACL get/set allowed on symlink path)
CVE-2016-0771 (Out-of-bounds read in internal DNS server)

CVE-2015-5370 (Multiple errors in DCE-RPC code)
CVE-2016-2110 (Man in the middle attacks possible with NTLMSSP)
CVE-2016-2111 (NETLOGON Spoofing Vulnerability)
CVE-2016-2112 (LDAP client and server don't enforce integrity)
CVE-2016-2113 (Missing TLS certificate validation)
CVE-2016-2114 ("server signing = mandatory" not enforced)
CVE-2016-2115 (SMB IPC traffic is not integrity protected)
CVE-2016-2118 (SAMR and LSA man in the middle attacks possible)

CVE-2016-2118 is http://badlock.org/
@
text
@d1 1
a1 1
$OpenBSD: patch-source3_utils_status_c,v 1.1 2015/09/30 18:16:15 jca Exp $
@


