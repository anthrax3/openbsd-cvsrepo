head	1.3;
access;
symbols
	OPENBSD_5_9:1.1.0.2;
locks; strict;
comment	@# @;


1.3
date	2016.07.06.16.43.16;	author jca;	state dead;
branches;
next	1.2;
commitid	vKfDwyYx8SM7rweG;

1.2
date	2016.04.25.15.01.29;	author jca;	state Exp;
branches;
next	1.1;
commitid	ck9OZP9QPB0OulUk;

1.1
date	2016.04.12.17.42.09;	author jca;	state Exp;
branches
	1.1.2.1;
next	;
commitid	UGRk8kk9vV3gDO72;

1.1.2.1
date	2016.04.17.17.12.16;	author jca;	state Exp;
branches;
next	1.1.2.2;
commitid	Iw4uKtebv493vNb5;

1.1.2.2
date	2016.06.29.12.29.35;	author jca;	state dead;
branches;
next	;
commitid	qY96PMwtPNRh5uFY;


desc
@@


1.3
log
@Update to samba-4.4.4

Diff from Ian, tests & ok sthen@@
@
text
@$OpenBSD: patch-source3_client_smbspool_krb5_wrapper_c,v 1.2 2016/04/25 15:01:29 jca Exp $

Workaround lack of clearenv(3).

--- source3/client/smbspool_krb5_wrapper.c.orig	Mon Apr 25 10:31:47 2016
+++ source3/client/smbspool_krb5_wrapper.c	Mon Apr 25 16:55:21 2016
@@@@ -195,7 +195,8 @@@@ int main(int argc, char *argv[])
 	 * Make sure we do not have LD_PRELOAD or other security relevant
 	 * environment variables set.
 	 */
-	clearenv();
+	extern char **environ;
+	environ = calloc(1, sizeof(*environ));
 
 	CUPS_SMB_DEBUG("Setting KRB5CCNAME to '%s'", gen_cc);
 	setenv("KRB5CCNAME", gen_cc, 1);
@


1.2
log
@Better workaround for clearenv
@
text
@d1 1
a1 1
$OpenBSD: patch-source3_client_smbspool_krb5_wrapper_c,v 1.1 2016/04/12 17:42:09 jca Exp $
@


1.1
log
@Update to samba-4.3.6

i386 build by danj@@, ok sthen@@

The changelog between 4.1.23 and 4.3.6 is too big to be described here.
The point of updating now is that 4.1.x won't receive updates for the
freshly published security advisories.  samba-4.3.8 will follow.
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- source3/client/smbspool_krb5_wrapper.c.orig	Sun Apr 10 20:20:07 2016
+++ source3/client/smbspool_krb5_wrapper.c	Sun Apr 10 20:41:51 2016
d13 1
a13 1
+	environ = NULL;
@


1.1.2.1
log
@Missed in previous.
@
text
@d1 1
a1 1
$OpenBSD: patch-source3_client_smbspool_krb5_wrapper_c,v 1.1 2016/04/12 17:42:09 jca Exp $
@


1.1.2.2
log
@Bugfix update to samba-4.3.10

While this is not a security update, it reduces the gap for the upcoming
security releases.  This helps tracking down potential regressions.

While here, backport a patch from -current to avoid spam related to
(too?) strict permissions checks in quotactl(2).

Diff and tests from Ian (co-maintainer), update discussed with jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-source3_client_smbspool_krb5_wrapper_c,v 1.1.2.1 2016/04/17 17:12:16 jca Exp $
@


