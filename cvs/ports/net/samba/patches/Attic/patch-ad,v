head	1.4;
access;
symbols
	OPENBSD_2_4:1.3.0.2
	OPENBSD_2_4_BASE:1.3
	form_980505:1.1.1.1
	form_980504:1.1.1.1
	form:1.1.1;
locks; strict;
comment	@# @;


1.4
date	99.03.19.09.06.07;	author brad;	state dead;
branches;
next	1.3;

1.3
date	98.05.06.02.17.25;	author form;	state Exp;
branches;
next	1.2;

1.2
date	98.01.29.15.10.10;	author niklas;	state dead;
branches;
next	1.1;

1.1
date	97.11.16.22.01.39;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.05.04.04.10.43;	author form;	state Exp;
branches;
next	;


desc
@@


1.4
log
@upgrade to samba 2.0.3; Andrew Lambeth <andrew@@nfr.net>
@
text
@*** nmbd_subnetdb.c.orig	Tue Apr 21 18:09:01 1998
--- nmbd_subnetdb.c	Tue Apr 21 18:09:39 1998
***************
*** 186,192 ****
      struct subnet_record *subrec;
      struct interface *iface = get_interface(i);
  
!     if((subrec = make_subnet(inet_ntoa(iface->ip), NORMAL_SUBNET,
                   iface->ip, iface->bcast,iface->nmask)) == NULL)
        return False;
      add_subnet(subrec);
--- 186,192 ----
      struct subnet_record *subrec;
      struct interface *iface = get_interface(i);
  
!     if((subrec = make_subnet((char *)inet_ntoa(iface->ip), NORMAL_SUBNET,
                   iface->ip, iface->bcast,iface->nmask)) == NULL)
        return False;
      add_subnet(subrec);
@


1.3
log
@add new patches
@
text
@@


1.2
log
@Update version, OpeBSD support is now native.  I noticed smb.conf is in
/usr/local/etc, as it is host-dependent it would be better off in /etc I
think, but I did not change that now.  Opinions wanted.
@
text
@d1 19
a19 56
--- quotas.c.orig	Wed Oct  8 19:43:54 1997
+++ quotas.c	Sun Nov 16 15:33:11 1997
@@@@ -419,7 +419,7 @@@@
 
 #else
 
-#ifdef        __FreeBSD__
+#if	defined(__FreeBSD__) || defined(__OpenBSD__)
 #include <ufs/ufs/quota.h>
 #include <machine/param.h>
 #elif         AIX
@@@@ -429,7 +429,7 @@@@
 #define dqb_curfiles dqb_curinodes
 #define dqb_fhardlimit dqb_ihardlimit
 #define dqb_fsoftlimit dqb_isoftlimit
-#else /* !__FreeBSD__ && !AIX */
+#else /* !__FreeBSD__ && !AIX && !__OpenBSD__ */
 #include <sys/quota.h>
 #include <devnm.h>
 #endif
@@@@ -442,7 +442,7 @@@@
   uid_t euser_id;
   int r;
   struct dqblk D;
-#if !defined(__FreeBSD__) && !defined(AIX)
+#if !defined(__FreeBSD__) && !defined(AIX) && !defined(__OpenBSD__)
   char dev_disk[256];
   struct stat S;
   /* find the block device file */
@@@@ -464,7 +464,7 @@@@
       DEBUG(5,("Unable to reset uid to %d\n", user_id));
   }
 #else /* USE_SETRES */
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
   {
     /* FreeBSD patches from Marty Moll <martym@@arbor.edu> */
     uid_t user_id;
@@@@ -494,7 +494,7 @@@@
 #endif /* USE_SETRES */
 
   /* Use softlimit to determine disk space, except when it has been exceeded */
-#if defined(__FreeBSD__)
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
   *bsize = DEV_BSIZE;
 #else /* !__FreeBSD__ */
   *bsize = 1024;
@@@@ -514,7 +514,7 @@@@
     return(False);
   /* Use softlimit to determine disk space, except when it has been exceeded */
   if ((D.dqb_curblocks>D.dqb_bsoftlimit)
-#if !defined(__FreeBSD__)
+#if !defined(__FreeBSD__) && !defined(__OpenBSD__)
 ||((D.dqb_curfiles>D.dqb_fsoftlimit) && (D.dqb_fsoftlimit != 0))
 #endif
     ) {
@


1.1
log
@use latest samba sources
use make overrides instead of patching the Makefile.
pkg/DESCR: samba works on UNIX, not just FreeBSD.
@
text
@@


1.1.1.1
log
@samba-1.9.18p4 port
@
text
@d1 56
a56 19
*** nmbd_subnetdb.c.orig	Tue Apr 21 18:09:01 1998
--- nmbd_subnetdb.c	Tue Apr 21 18:09:39 1998
***************
*** 186,192 ****
      struct subnet_record *subrec;
      struct interface *iface = get_interface(i);
  
!     if((subrec = make_subnet(inet_ntoa(iface->ip), NORMAL_SUBNET,
                   iface->ip, iface->bcast,iface->nmask)) == NULL)
        return False;
      add_subnet(subrec);
--- 186,192 ----
      struct subnet_record *subrec;
      struct interface *iface = get_interface(i);
  
!     if((subrec = make_subnet((char *)inet_ntoa(iface->ip), NORMAL_SUBNET,
                   iface->ip, iface->bcast,iface->nmask)) == NULL)
        return False;
      add_subnet(subrec);
@

