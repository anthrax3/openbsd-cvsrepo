head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	98.05.13.04.41.52;	author form;	state dead;
branches;
next	1.3;

1.3
date	98.05.12.05.15.03;	author form;	state Exp;
branches;
next	1.2;

1.2
date	98.01.29.15.10.11;	author niklas;	state dead;
branches;
next	1.1;

1.1
date	97.11.16.22.01.40;	author todd;	state Exp;
branches;
next	;


desc
@@


1.4
log
@update samba to 1.9.18p7
@
text
@*** slprintf.c.orig	Tue May 12 11:03:20 1998
--- slprintf.c	Tue May 12 11:06:29 1998
***************
*** 45,51 ****
  		/* note: we don't free the old memory (if any) as we don't 
  		   want a malloc lib to reuse the memory as it will
  		   have the wrong permissions */
! 		buf = memalign(pagesize, len);
  		if (buf) {
  			if (mprotect(buf+(len-pagesize), pagesize, PROT_READ) != 0) {
  				exit(1);
--- 45,51 ----
  		/* note: we don't free the old memory (if any) as we don't 
  		   want a malloc lib to reuse the memory as it will
  		   have the wrong permissions */
! 		buf = malloc(len);
  		if (buf) {
  			if (mprotect(buf+(len-pagesize), pagesize, PROT_READ) != 0) {
  				exit(1);
@


1.3
log
@update samba to 1.9.18p6
@
text
@@


1.2
log
@Update version, OpeBSD support is now native.  I noticed smb.conf is in
/usr/local/etc, as it is host-dependent it would be better off in /etc I
think, but I did not change that now.  Opinions wanted.
@
text
@d1 19
a19 32
--- smbencrypt.c.orig	Wed May  7 20:14:07 1997
+++ smbencrypt.c	Sun Nov 16 15:33:11 1997
@@@@ -54,11 +54,11 @@@@
   des_cblock deskey;
 
   str_to_key(k,(uchar *)deskey);
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
   des_set_key(&deskey,ks);
-#else /* __FreeBSD__ */
+#else /* __FreeBSD__ || __OpenBSD__ */
   des_set_key((des_cblock *)deskey,ks);
-#endif /* __FreeBsd */
+#endif /* __FreeBSD__ || __OpenBSD__ */
   des_ecb_encrypt((des_cblock *)d,(des_cblock *)out, ks, DES_DECRYPT);
 }
 
@@@@ -68,11 +68,11 @@@@
   des_cblock deskey;
 
   str_to_key(k,(uchar *)deskey);
-#ifdef __FreeBSD__
+#if defined(__FreeBSD__) || defined(__OpenBSD__)
   des_set_key(&deskey,ks);
-#else /* __FreeBsd__ */
+#else /* __FreeBSD__ || __OpenBSD__ */
   des_set_key((des_cblock *)deskey,ks);
-#endif /* __FreeBsd__ */
+#endif /* __FreeBSD__ || __OpenBSD__ */
   des_ecb_encrypt((des_cblock *)d,(des_cblock *)out, ks, DES_ENCRYPT);
 }
  
@


1.1
log
@use latest samba sources
use make overrides instead of patching the Makefile.
pkg/DESCR: samba works on UNIX, not just FreeBSD.
@
text
@@
