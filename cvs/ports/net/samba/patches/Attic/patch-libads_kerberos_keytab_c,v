head	1.2;
access;
symbols
	OPENBSD_4_7:1.1.0.8
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.6
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.4
	OPENBSD_4_5_BASE:1.1
	OPENBSD_4_4:1.1.0.2
	OPENBSD_4_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2010.04.26.17.31.57;	author sthen;	state dead;
branches;
next	1.1;

1.1
date	2008.05.13.11.34.12;	author dlg;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update Samba to 3.5.2, most of the work done by Ian McWilliam

Note that the default passdb backend has been changed to 'tdbsam'.
See /usr/local/share/doc/samba/README.OpenBSD (or files/README.OpenBSD)
for more information and instructions for people who wish to convert an
existing smbpasswd-based installation.
@
text
@$OpenBSD: patch-libads_kerberos_keytab_c,v 1.1 2008/05/13 11:34:12 dlg Exp $
--- libads/kerberos_keytab.c.orig	Thu Nov 15 13:15:03 2007
+++ libads/kerberos_keytab.c	Mon May 12 13:38:30 2008
@@@@ -246,7 +246,7 @@@@ int ads_keytab_add_entry(ADS_STRUCT *ads, const char *
 		return -1;
 	}
 	
-#ifdef HAVE_WRFILE_KEYTAB       /* MIT */
+#if 0 && defined(HAVE_WRFILE_KEYTAB)       /* MIT */
 	keytab_name[0] = 'W';
 	keytab_name[1] = 'R';
 	ret = krb5_kt_default_name(context, (char *) &keytab_name[2], MAX_KEYTAB_NAME_LEN - 4);
@@@@ -394,7 +394,7 @@@@ int ads_keytab_flush(ADS_STRUCT *ads)
 		DEBUG(1,("ads_keytab_flush: could not krb5_init_context: %s\n",error_message(ret)));
 		return ret;
 	}
-#ifdef HAVE_WRFILE_KEYTAB
+#if 0 && defined(HAVE_WRFILE_KEYTAB)
 	keytab_name[0] = 'W';
 	keytab_name[1] = 'R';
 	ret = krb5_kt_default_name(context, (char *) &keytab_name[2], MAX_KEYTAB_NAME_LEN - 4);
@


1.1
log
@disable a workaround for the MIT kerberos implementation that we
dont need because we use heimdal instead. this lets the ads flavor
of samba manage the kerberos keytab on openbsd.

no objections from mbalmer@@
@
text
@d1 1
a1 1
$OpenBSD$
@

