head	1.2;
access;
symbols
	OPENBSD_4_0:1.1.0.10
	OPENBSD_4_0_BASE:1.1
	OPENBSD_3_9:1.1.0.8
	OPENBSD_3_9_BASE:1.1
	OPENBSD_3_8:1.1.0.6
	OPENBSD_3_8_BASE:1.1
	OPENBSD_3_7:1.1.0.4
	OPENBSD_3_7_BASE:1.1
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2006.10.30.13.49.21;	author bernd;	state dead;
branches;
next	1.1;

1.1
date	2004.06.16.18.07.53;	author david;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Since we have a new BSD licensed network calculator in net/ipcalc, we don't
need this outdated and unmaintained software anymore.

discussed on ports@@

ok jcs@@, ckuethe@@, mbalmer@@, xsa@@
@
text
@$OpenBSD: patch-cidr_c,v 1.1 2004/06/16 18:07:53 david Exp $
--- cidr.c.orig	2000-06-20 18:10:55.000000000 -0500
+++ cidr.c	2004-06-16 12:46:55.000000000 -0500
@@@@ -154,14 +154,14 @@@@ int main(int argc, char *argv[])
     exit(EXIT_FAILURE);
    }
   
-   strncpy(ip[2],argv[1],18);
+   strlcpy(ip[2],argv[1],19);
 
 
    holdaddress=strtok(ip[2],sep);
    if(holdaddress==NULL)
     invalid(1);
 
-   strncpy(ip[0],holdaddress,strlen(holdaddress));
+   strlcpy(ip[0],holdaddress,strlen(holdaddress)+1);
    if(ip[0]==NULL)
     invalid(1);
 
@@@@ -171,7 +171,7 @@@@ int main(int argc, char *argv[])
    if(holdprefix==NULL)
     invalid(1);  
 
-   strncpy(ip[1],holdprefix,strlen(holdprefix));
+   strlcpy(ip[1],holdprefix,strlen(holdprefix)+1);
    if(ip[1]==NULL)
     invalid(1); 
 
@


1.1
log
@fix incorrect uses of strncpy (strings were not being null terminated)
and replace with strlcpy; found with malloc.conf
ok millert@@
@
text
@d1 1
a1 1
$OpenBSD$
@

