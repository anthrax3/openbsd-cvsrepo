head	1.8;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8;
locks; strict;
comment	@# @;


1.8
date	2016.12.12.15.12.04;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	OwbTeLi1tOG7xIUJ;

1.7
date	2016.12.02.10.05.06;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	UHG6wuPxLrx0uRa6;

1.6
date	2016.10.10.08.06.38;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	jA2LhZPvUji9HRXl;

1.5
date	2016.10.07.10.05.16;	author ajacoutot;	state Exp;
branches;
next	1.4;
commitid	pTe3zqP8vjMdkeqz;

1.4
date	2016.09.08.08.16.12;	author ajacoutot;	state Exp;
branches;
next	1.3;
commitid	hjISGcRYydkiTPXa;

1.3
date	2016.08.27.12.58.07;	author ajacoutot;	state Exp;
branches;
next	1.2;
commitid	IyOcPpi1kXlcSEBw;

1.2
date	2016.08.27.08.18.42;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	ODB2zfxrpoPdPwLQ;

1.1
date	2016.08.27.06.39.14;	author ajacoutot;	state Exp;
branches;
next	;
commitid	VgK3y5AGX55LwTNu;


desc
@@


1.8
log
@Tweak.
@
text
@$OpenBSD: README,v 1.7 2016/12/02 10:05:06 ajacoutot Exp $

+-----------------------------------------------------------------------
| Running ${FULLPKGNAME} on OpenBSD
+-----------------------------------------------------------------------

Note that most broctl(8) commands must be run as root.

Post-install steps
==================

Before starting bro(8) for the first time, the "interface" must be properly
configured under:
    ${SYSCONFDIR}/bro/node.cfg

And the configuration and policies must be installed and deployed by running:
    broctl deploy
This command will run broctl(8) with the check, install, and restart arguments.

It's also recommended to enable housekeeping tasks by adding the following
entry into root's crontab(5):
*/5	*	*	*	*	${TRUEPREFIX}/bin/broctl cron

See https://www.bro.org/sphinx/quickstart/index.html for details.
@


1.7
log
@Drop the setrlimit patch, it's not needed anymore; prodded by Daniel Thayer
http -> https in README while here.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.6 2016/10/10 08:06:38 ajacoutot Exp $
d17 2
a18 2
    broctl install
    broctl deploy # this will start bro(8)
@


1.6
log
@Add a small entry for 'broctl cron'.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.5 2016/10/07 10:05:16 ajacoutot Exp $
d24 1
a24 1
See http://www.bro.org/sphinx/quickstart/index.html for details.
@


1.5
log
@Use setrlimit() in broctl, at least 256 FDs are needed.
Fix rc_reload().
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.4 2016/09/08 08:16:12 ajacoutot Exp $
d19 6
@


1.4
log
@512 openfiles seems to be enough.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.3 2016/08/27 12:58:07 ajacoutot Exp $
d16 1
a16 1
And the configuration and policies must be installed by running:
d18 1
a18 22

File descriptors limit
======================

Both bro(8) and broctl(8) need to bump their nofile limits.

bro (daemon)
------------
The following lines can be added to login.conf(5):

    bro:\
    	:openfiles-cur=512:\
    	:tc=daemon:

Then the login.conf.db can be rebuilt file if necessary:
    [ -f /etc/login.conf.db ] && cap_mkdb /etc/login.conf

bro and broctl (CLI)
--------------------
Some subcommands like "deploy" may require more file descriptors.
e.g.
    ulimit -n 512; broctl deploy
@


1.3
log
@Depends on several GeoIP DBs.
Few tweaks while here.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.2 2016/08/27 08:18:42 ajacoutot Exp $
d29 1
a29 1
    	:openfiles-cur=1024:\
@


1.2
log
@Tweak README a bit.
@
text
@d1 1
a1 1
$OpenBSD: README,v 1.1 2016/08/27 06:39:14 ajacoutot Exp $
d24 2
a25 2
bro(8)
------
d28 3
a30 3
	bro:\
		:openfiles-cur=1024:\
		:tc=daemon:
d33 1
a33 1
        [ -f /etc/login.conf.db ] && cap_mkdb /etc/login.conf
d35 2
a36 2
broctl(8)
---------
@


1.1
log
@Long overdue update to bro-2.4.1.
Take maintainer while here.

Only slightly tested so far; so may get a few tweaks in the next days if
needed.
@
text
@d1 1
a1 1
$OpenBSD$
d7 1
a7 1
All broctl(8) commands must be run as root.
a11 2
Configuration
-------------
d16 2
a17 4
Deployment
----------
Then the configuration must be deployed as follow:
    ulimit -n 512; broctl deploy 
d21 1
d37 3
a39 1
"ulimit -n 512" can be prepended to the command (like above).
@

