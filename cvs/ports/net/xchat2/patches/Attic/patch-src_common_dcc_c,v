head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2004.01.10.22.27.07;	author couderc;	state dead;
branches;
next	1.1;

1.1
date	2003.12.14.21.25.38;	author margarida;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 2.0.7
@
text
@$OpenBSD: patch-src_common_dcc_c,v 1.1 2003/12/14 21:25:38 margarida Exp $
--- src/common/dcc.c.orig	2003-11-28 03:06:57.000000000 +0000
+++ src/common/dcc.c	2003-12-14 20:33:44.000000000 +0000
@@@@ -1659,9 +1659,15 @@@@ handle_dcc (struct session *sess, char *
 			 * sending file.
 			 */
 			dcc = find_dcc_from_id (pasvid, TYPE_SEND);
-			dcc->addr = addr;
-			dcc->port = port;
-			dcc_connect(dcc);
+			if (dcc)
+			{
+				dcc->addr = addr;
+				dcc->port = port;
+				dcc_connect (dcc);
+			} else
+			{
+				dcc_malformed (sess, nick, word_eol[4] + 2);
+			}
 			return;
 		}
 
@


1.1
log
@A bug discovered in 2.0.6 allows a remote user to crash the client.
All users should upgrade to a patched 2.0.6 immediately.
http://mail.nl.linux.org/xchat-announce/2003-12/msg00000.html

ok couderc@@
@
text
@d1 1
a1 1
$OpenBSD$
@

