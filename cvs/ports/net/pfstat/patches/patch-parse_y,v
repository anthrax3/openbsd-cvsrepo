head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.10
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.6
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.04.22.10.56.37;	author jca;	state Exp;
branches;
next	1.1;

1.1
date	2013.03.11.19.50.04;	author sthen;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Fix build after ALTQ removal, and add a comment about the new queueing
system, as suggested by sthen@@.  ok sthen@@
@
text
@$OpenBSD: patch-parse_y,v 1.1 2013/03/11 19:50:04 sthen Exp $
--- parse.y.orig	Thu Jan 11 17:01:58 2007
+++ parse.y	Tue Apr 22 12:13:49 2014
@@@@ -133,7 +133,7 @@@@ coldef		: GLOBAL STRING STRING
 			    "short", "normalize", "memory", "bad-timestamp",
 			    "congestion", "ip-option", "proto-cksum",
 			    "state-mismatch", "state-insert", "state-limit",
-			    "src-limit", "synproxy", 0 };
+			    "src-limit", "synproxy", "translate", NULL };
 			int i;
 
 			$$.type = 0;
@@@@ -181,6 +181,8 @@@@ coldef		: GLOBAL STRING STRING
 		/*      NAME   pass/drop packet/bytes */
 		| QUEUE STRING STRING STRING
 		{
+			yyerror("ALTQ-style queues not supported anymore");
+			YYERROR;
 			$$.type = 2;
 			$$.arg = strdup($2);
 			if (!strcmp($3, "other"))
@


1.1
log
@Report new PF "translation" counter, indicating that address translation
has failed due to no free ports in the configured range. From Martin Pelikan.
@
text
@d1 3
a3 3
$OpenBSD$
--- parse.y.orig	Sun Feb 24 22:12:50 2013
+++ parse.y	Sun Feb 24 22:13:05 2013
d13 9
@

