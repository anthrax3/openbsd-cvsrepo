head	1.7;
access;
symbols
	OPENBSD_6_1:1.6.0.2
	OPENBSD_6_1_BASE:1.6
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.1.1.1.0.4
	OPENBSD_5_8_BASE:1.1.1.1
	kirby_20150730:1.1.1.1
	kirby:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2017.05.11.06.18.03;	author kirby;	state Exp;
branches;
next	1.6;
commitid	bSP5UwaVfEFqDOj1;

1.6
date	2017.03.09.13.33.52;	author kirby;	state Exp;
branches;
next	1.5;
commitid	eam2GIl58BuUvG5N;

1.5
date	2016.06.10.07.44.58;	author kirby;	state Exp;
branches;
next	1.4;
commitid	kWe7Fk6COi4CITM7;

1.4
date	2015.12.08.10.46.38;	author kirby;	state Exp;
branches;
next	1.3;
commitid	as42R91UAiJZ9PXX;

1.3
date	2015.10.26.08.36.34;	author kirby;	state Exp;
branches;
next	1.2;
commitid	GaTKUisAtvRdqSNT;

1.2
date	2015.09.02.07.54.00;	author kirby;	state Exp;
branches;
next	1.1;
commitid	IqYlN7qZg4hUXTje;

1.1
date	2015.07.30.06.14.14;	author kirby;	state Exp;
branches
	1.1.1.1;
next	;
commitid	FqwqNCQvk2HGKZq3;

1.1.1.1
date	2015.07.30.06.14.14;	author kirby;	state Exp;
branches;
next	;
commitid	FqwqNCQvk2HGKZq3;


desc
@@


1.7
log
@update to owncloudclient-2.3.2
@
text
@$OpenBSD: patch-src_libsync_utility_cpp,v 1.6 2017/03/09 13:33:52 kirby Exp $
--- src/libsync/utility.cpp.orig	Mon May  8 16:53:10 2017
+++ src/libsync/utility.cpp	Wed May 10 10:56:28 2017
@@@@ -212,8 +212,8 @@@@ qint64 Utility::freeDiskSpace(const QString &path)
         return (qint64) stat.f_bavail * stat.f_frsize;
     }
 #elif defined(Q_OS_UNIX)
-    struct statvfs64 stat;
-    if (statvfs64(path.toLocal8Bit().data(), &stat) == 0) {
+    struct statvfs stat;
+    if (statvfs(path.toLocal8Bit().data(), &stat) == 0) {
         return (qint64) stat.f_bavail * stat.f_frsize;
     }
 #elif defined(Q_OS_WIN)
@


1.6
log
@Update to owncloudclient-2.3.0.
@
text
@d1 4
a4 4
$OpenBSD: patch-src_libsync_utility_cpp,v 1.5 2016/06/10 07:44:58 kirby Exp $
--- src/libsync/utility.cpp.orig	Fri Mar  3 12:11:17 2017
+++ src/libsync/utility.cpp	Mon Mar  6 10:53:40 2017
@@@@ -211,8 +211,8 @@@@ qint64 Utility::freeDiskSpace(const QString &path)
@


1.5
log
@update to owncloudclient-2.2.1
@
text
@d1 4
a4 4
$OpenBSD: patch-src_libsync_utility_cpp,v 1.4 2015/12/08 10:46:38 kirby Exp $
--- src/libsync/utility.cpp.orig	Mon Jun  6 11:50:02 2016
+++ src/libsync/utility.cpp	Thu Jun  9 15:49:18 2016
@@@@ -203,8 +203,8 @@@@ qint64 Utility::freeDiskSpace(const QString &path)
@


1.4
log
@update to owncloudclient-2.1.0
@
text
@d1 4
a4 4
$OpenBSD: patch-src_libsync_utility_cpp,v 1.3 2015/10/26 08:36:34 kirby Exp $
--- src/libsync/utility.cpp.orig	Thu Dec  3 12:19:51 2015
+++ src/libsync/utility.cpp	Mon Dec  7 00:17:14 2015
@@@@ -192,8 +192,8 @@@@ qint64 Utility::freeDiskSpace(const QString &path)
@


1.3
log
@update to owncloudclient-2.0.2
@
text
@d1 6
a6 5
$OpenBSD: patch-src_libsync_utility_cpp,v 1.2 2015/09/02 07:54:00 kirby Exp $
--- src/libsync/utility.cpp.orig	Wed Oct 21 10:54:02 2015
+++ src/libsync/utility.cpp	Fri Oct 23 12:05:53 2015
@@@@ -191,8 +191,8 @@@@ qint64 Utility::freeDiskSpace(const QString &path, boo
     return (qint64) stat.f_bavail * stat.f_frsize;
a7 1
     Q_UNUSED(ok)
d9 1
a9 1
-    statvfs64(path.toUtf8().data(), &stat);
d11 3
a13 2
+    statvfs(path.toUtf8().data(), &stat);
     return (qint64) stat.f_bavail * stat.f_frsize;
a14 1
     ULARGE_INTEGER freeBytes;
@


1.2
log
@update to ownclodclient-2.0.0
some patches were merged upstream
@
text
@d1 4
a4 4
$OpenBSD: patch-src_libsync_utility_cpp,v 1.1.1.1 2015/07/30 06:14:14 kirby Exp $
--- src/libsync/utility.cpp.orig	Mon Aug 24 15:23:54 2015
+++ src/libsync/utility.cpp	Mon Aug 31 13:53:22 2015
@@@@ -189,8 +189,8 @@@@ qint64 Utility::freeDiskSpace(const QString &path, boo
@


1.1
log
@Initial revision
@
text
@d1 4
a4 11
$OpenBSD: patch-src_mirall_utility_cpp,v 1.1.1.1 2014/06/24 09:20:03 kirby Exp $
--- src/libsync/utility.cpp.orig	Mon Jun 22 17:28:35 2015
+++ src/libsync/utility.cpp	Thu Jun 25 16:47:04 2015
@@@@ -182,14 +182,14 @@@@ void Utility::setLaunchOnStartup(const QString &appNam
 
 qint64 Utility::freeDiskSpace(const QString &path, bool *ok)
 {
-#if defined(Q_OS_MAC) || defined(Q_OS_FREEBSD) || defined(Q_OS_FREEBSD_KERNEL) || defined(Q_OS_NETBSD)
+#if defined(Q_OS_MAC) || defined(Q_OS_FREEBSD) || defined(Q_OS_FREEBSD_KERNEL) || defined(Q_OS_NETBSD) || defined(Q_OS_OPENBSD)
     struct statvfs stat;
     statvfs(path.toUtf8().data(), &stat);
a14 9
@@@@ -389,7 +389,7 @@@@ bool Utility::isLinux()
 
 bool Utility::isBSD()
 {
-#if defined(Q_OS_FREEBSD) || defined(Q_OS_NETBSD)
+#if defined(Q_OS_FREEBSD) || defined(Q_OS_NETBSD) || defined(Q_OS_OPENBSD)
     return true;
 #else
     return false;
@


1.1.1.1
log
@Owncloudclient is a tool to synchronize files from ownCloud Server with
your computer.
Discussed with ajacoutot@@
OK ajacoutot@@ and jasper@@
@
text
@@
