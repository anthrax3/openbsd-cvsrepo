head	1.13;
access;
symbols
	OPENBSD_2_9:1.10.0.2
	OPENBSD_2_9_BASE:1.10
	OPENBSD_2_8:1.9.0.2
	OPENBSD_2_8_BASE:1.9
	OPENBSD_2_7:1.5.0.2
	OPENBSD_2_7_BASE:1.5
	camield_2000-Feb-28:1.1.1.1
	camield:1.1.1;
locks; strict;
comment	@# @;


1.13
date	2001.08.14.21.21.20;	author camield;	state dead;
branches;
next	1.12;

1.12
date	2001.06.07.12.43.32;	author camield;	state Exp;
branches;
next	1.11;

1.11
date	2001.05.06.05.00.25;	author lebel;	state Exp;
branches;
next	1.10;

1.10
date	2001.04.22.12.07.52;	author camield;	state Exp;
branches;
next	1.9;

1.9
date	2000.09.25.07.40.15;	author camield;	state Exp;
branches;
next	1.8;

1.8
date	2000.09.21.08.14.55;	author camield;	state Exp;
branches;
next	1.7;

1.7
date	2000.09.15.14.35.54;	author camield;	state Exp;
branches;
next	1.6;

1.6
date	2000.06.16.23.06.09;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2000.04.26.14.39.29;	author camield;	state Exp;
branches
	1.5.2.1;
next	1.4;

1.4
date	2000.04.04.08.19.41;	author camield;	state Exp;
branches;
next	1.3;

1.3
date	2000.03.24.23.28.27;	author espie;	state Exp;
branches;
next	1.2;

1.2
date	2000.03.05.18.30.39;	author espie;	state Exp;
branches;
next	1.1;

1.1
date	2000.02.28.09.32.22;	author camield;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2000.02.28.09.32.22;	author camield;	state Exp;
branches;
next	;

1.5.2.1
date	2000.09.15.05.10.09;	author marc;	state Exp;
branches;
next	;


desc
@@


1.13
log
@license does not permit modification, to allow for proper
integration in OpenBSD
@
text
@# $OpenBSD: Makefile,v 1.12 2001/06/07 12:43:32 camield Exp $

COMMENT=	"read-only anonymous FTP and HTTP server"

DISTNAME=	publicfile-0.52
HOMEPAGE=	http://cr.yp.to/publicfile.html
MAINTAINER=	Camiel Dobbelaar <cd@@sentia.nl>
CATEGORIES=	net www
NEED_VERSION=	1.402

MASTER_SITES=	http://cr.yp.to/publicfile/ \
		ftp://ftp.id.wustl.edu/pub/qmail/ \
		ftp://ftp.jp.qmail.org/qmail/

PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

# datasize limit in 'run' files is too low for ld.so
# to be able to pull in libc
LDFLAGS+=	-static

ALL_TARGET=	default
INSTALL_TARGET=	setup check

RUN_DEPENDS=	supervise::sysutils/daemontools \
		tcpserver::net/ucspi-tcp

FLAVORS=	compat
FLAVOR?=

.if ${FLAVOR:L:Mcompat}
PATCH_LIST=patch-Makefile patch-compat
.else
PATCH_LIST=patch-Makefile
.endif

pre-build:
	@@echo ${CC} ${CFLAGS} > ${WRKSRC}/conf-cc
	@@echo ${CC} -s ${LDFLAGS} > ${WRKSRC}/conf-ld
	@@echo ${PREFIX}/publicfile > ${WRKSRC}/conf-home

pre-install:
	@@echo ${PREFIX}/publicfile > ${WRKSRC}/conf-home

.include <bsd.port.mk>
@


1.12
log
@workaround for datasize limit, ok lebel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2001/05/06 05:00:25 lebel Exp $
@


1.11
log
@net: integrate COMMENT, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/04/22 12:07:52 camield Exp $
d7 2
a8 1
CATEGORIES=	net
a9 1
MAINTAINER=	Camiel Dobbelaar <cd@@sentia.nl>
d20 4
d41 1
@


1.10
log
@PERMIT_PACKAGE_*: Yes -> No

No license, or license not clear
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.9 2000/09/25 07:40:15 camield Exp $
d8 1
a8 1
NEED_VERSION=	1.230
@


1.9
log
@add real name to MAINTAINER, plus a few nits
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2000/09/21 08:14:55 camield Exp $
d13 2
a14 2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
a27 2
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
@


1.8
log
@add 'compat' flavor: it patches publicfile to generate ``old-style''
/bin/ls output instead of EPLF, on FTP directory listings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2000/09/15 14:35:54 camield Exp $
d7 1
a7 1
MAINTAINER=	cd@@sentia.nl
@


1.7
log
@- RCS id, ${HOMEPAGE}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/06/16 23:06:09 espie Exp $
d24 11
a39 1
	sleep 1
@


1.6
log
@Remove NO_CONFIGURE/NO_PATCH/NO_EXTRACT/NO_MTREE

Kill corresponding FAKE=Yes and switch to CONFIGURE_STYLE while I'm at it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2000/04/26 14:39:29 camield Exp $
d29 1
@


1.5
log
@Better fake.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2000/04/04 08:19:41 camield Exp $
a17 1
NO_CONFIGURE=	Yes
a19 2

FAKE=	Yes
@


1.5.2.1
log
@bring net as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2000/06/16 23:06:09 espie Exp $
d18 1
d21 2
@


1.4
log
@- Fake
- PERMIT_* = Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2000/03/24 23:28:27 espie Exp $
d19 1
a19 1
ALL_TARGET=	default WRKINST=${WRKINST}
d29 3
@


1.3
log
@Introduce :: in *_DEPENDS as a place holder for a package spec
Bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2000/03/05 18:30:39 espie Exp $
d4 1
d6 1
a6 1
NEED_VERSION=	 1.230
a7 1
HOMEPAGE=	http://cr.yp.to/publicfile.html
d13 4
a16 5
LICENSE_TYPE=		NONE
PERMIT_PACKAGE_CDROM=	'be conservative'
PERMIT_PACKAGE_FTP=	'be conservative'
PERMIT_DISTFILES_CDROM=	'be conservative'
PERMIT_DISTFILES_FTP=	'be conservative'
d19 1
a19 1
ALL_TARGET=	default
d21 2
@


1.2
log
@PORTSDIR no longer needed in *DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2000/02/28 09:32:22 camield Exp $
d5 1
a5 1
NEED_VERSION=	1.223
d23 2
a24 2
RUN_DEPENDS=	supervise:sysutils/daemontools \
		tcpserver:net/ucspi-tcp
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d5 1
d19 1
a19 1
NO_CONFIGURE=	yes
d23 2
a24 2
RUN_DEPENDS=	supervise:${PORTSDIR}/sysutils/daemontools \
		tcpserver:${PORTSDIR}/net/ucspi-tcp
@


1.1.1.1
log
@read-only anonymous FTP and HTTP server
@
text
@@
