head	1.2;
access;
symbols
	OPENBSD_3_5:1.1.0.2
	OPENBSD_3_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.07.14.21.52.25;	author pvalchev;	state dead;
branches;
next	1.1;

1.1
date	2003.11.04.17.42.44;	author jakob;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove ethereal from the ports tree.  Right during 3.5, it had more than
a dozen remote holes being fixed, that we shipped with.  Weeks later
things have not improved, and there continue to be problems reported
to bugtraq, and respective band-aids - but it is clear the ethereal
team does not care about security, as new protocols get added, and
nothing gets done about the many more holes that exist.

Maybe someone will at least privilege separate this one day, and then
the OpenBSD stance with respect to this may change.

Encouraging people to run broken software by distributing packages
with known security holes is not desired by any of us.
@
text
@$OpenBSD: patch-gtk_proto_draw_c,v 1.1 2003/11/04 17:42:44 jakob Exp $
--- gtk/proto_draw.c.orig	2003-11-04 00:24:40.000000000 +0100
+++ gtk/proto_draw.c	2003-11-04 18:08:45.000000000 +0100
@@@@ -1058,6 +1058,7 @@@@ packet_hex_print_common(GtkTextView *bv,
       /* Have we gone from reverse to plain? */
       if (reverse && (reverse != newreverse)) {
         convline = g_locale_to_utf8(line, cur, NULL, &newsize, NULL);
+        if (convline == NULL) convline = g_strndup (line, cur);
         gtk_text_buffer_insert_with_tags_by_name(buf, &iter, convline, newsize,
                                                  revstyle, NULL);
         g_free(convline);
@@@@ -1072,6 +1073,7 @@@@ packet_hex_print_common(GtkTextView *bv,
       /* Have we gone from plain to reversed? */
       if (!reverse && (reverse != newreverse)) {
         convline = g_locale_to_utf8(line, cur, NULL, &newsize, NULL);
+        if (convline == NULL) convline = g_strndup (line, cur);
         gtk_text_buffer_insert_with_tags_by_name(buf, &iter, convline, newsize,
                                                  "plain", NULL);
         g_free(convline);
@@@@ -1081,6 +1083,7 @@@@ packet_hex_print_common(GtkTextView *bv,
     }
     /* Print remaining part of line */
     convline = g_locale_to_utf8(line, cur, NULL, &newsize, NULL);
+    if (convline == NULL) convline = g_strndup (line, cur);
     gtk_text_buffer_insert_with_tags_by_name(buf, &iter, convline, newsize,
                                              reverse ? revstyle : "plain",
                                              NULL);
@


1.1
log
@update to Ethereal version 0.9.16. also switch to glib2/gtk2.
@
text
@d1 1
a1 1
$OpenBSD$
@

