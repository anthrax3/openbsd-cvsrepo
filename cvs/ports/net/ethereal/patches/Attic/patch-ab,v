head	1.6;
access;
symbols
	OPENBSD_2_5:1.2.0.2
	OPENBSD_2_5_BASE:1.2
	OPENBSD_2_4:1.1.1.1.0.2
	OPENBSD_2_4_BASE:1.1.1.1
	marc_1998-Sep-22:1.1.1.1
	marc:1.1.1;
locks; strict;
comment	@# @;


1.6
date	99.09.01.17.57.00;	author brad;	state dead;
branches;
next	1.5;

1.5
date	99.08.13.02.12.29;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	99.08.05.23.43.52;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	99.05.25.23.10.51;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	99.01.30.20.12.23;	author marc;	state Exp;
branches;
next	1.1;

1.1
date	98.09.22.19.39.20;	author marc;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	98.09.22.19.39.20;	author marc;	state Exp;
branches;
next	;


desc
@@


1.6
log
@upgrade to ethereal 0.7.3
@
text
@--- ethereal.c.orig	Tue Aug 10 16:05:38 1999
+++ ethereal.c	Thu Aug 12 21:15:23 1999
@@@@ -234,8 +234,21 @@@@
 	    gtk_entry_set_text(GTK_ENTRY(filter_te), cf.dfilter);
     /* Run the display filter so it goes in effect. Also we set
        data_out_file which tells the tcp code to output the data */
+#if defined(__OpenBSD__)
+     {
+       int tmp_fd;
+
+       snprintf( "%sXXXXXXXXXX", sizeof filename1, P_tmpdir );
+       tmp_fd = mkstemp( filename1 );
+       if ( tmp_fd == -1 ) {
+	err( 1, "can't create temp file %s", filename1 );
+       }
+       data_out_file = fdopen( tmp_fd, "a" );
+     }
+#else
     strcpy( filename1, tmpnam(NULL) );
     data_out_file = fopen( filename1, "a" );
+#endif
     if( data_out_file == NULL ) {
       fprintf( stderr, "Could not open tmp file %s\n", filename1 );
     }
@


1.5
log
@upgrade to ethereal 0.7.2
@
text
@@


1.4
log
@upgrade to ethereal 0.7.1
@
text
@d1 3
a3 3
--- ethereal.c.orig	Thu Aug  5 19:06:46 1999
+++ ethereal.c	Thu Aug  5 19:08:23 1999
@@@@ -230,8 +230,21 @@@@
d8 2
a9 2
+    {
+      int tmp_fd;
d11 7
a17 7
+      snprintf( "%sXXXXXXXXXX", sizeof filename1, P_tmpdir );
+      tmp_fd = mkstemp( filename1 );
+      if ( tmp_fd == -1 ) {
+       err( 1, "can't create temp file %s", filename1 );
+      }
+      data_out_file = fdopen( tmp_fd, "a" );
+    }
@


1.3
log
@upgrade to ethereal 0.6.2
@
text
@d1 6
a6 6
--- ethereal.c.orig	Wed May 19 19:05:11 1999
+++ ethereal.c	Tue May 25 14:53:13 1999
@@@@ -194,8 +194,21 @@@@
     /* reload so it goes in effect. Also we set data_out_file which 
        tells the tcp code to output the data */
     close_cap_file( &cf, info_bar, file_ctx);
d14 1
a14 1
+	err( 1, "can't create temp file %s", filename1 );
@


1.2
log
@update to 0.5.1; Markus Friedl <Markus.Friedl@@informatik.uni-erlangen.de>
@
text
@d1 3
a3 3
--- ethereal.c.orig	Tue Dec 29 05:08:17 1998
+++ ethereal.c	Wed Jan 20 01:10:24 1999
@@@@ -163,8 +163,21 @@@@
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
--- ethereal.c.~1~	Wed Sep 16 20:12:38 1998
+++ ethereal.c	Tue Sep 22 12:25:51 1998
@@@@ -122,8 +122,21 @@@@
@


1.1.1.1
log
@ethereal from Jakob Schlyter <jakob@@carlstedt.se>
@
text
@@
