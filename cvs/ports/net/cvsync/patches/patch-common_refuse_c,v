head	1.2;
access;
symbols
	OPENBSD_6_0:1.2.0.10
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.6
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.8
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.22
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.20
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.18
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.16
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.14
	OPENBSD_5_0:1.1.0.12
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.10
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.8
	OPENBSD_4_8_BASE:1.1
	OPENBSD_4_7:1.1.0.6
	OPENBSD_4_7_BASE:1.1
	OPENBSD_4_6:1.1.0.4
	OPENBSD_4_6_BASE:1.1
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.06.25.17.54.07;	author naddy;	state Exp;
branches;
next	1.1;
commitid	H1YfraZmPQVw4z3c;

1.1
date	2008.08.25.17.13.22;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Add full support for commitid and bump protocol version.
Old clients will receive updates with commitid stripped out.

Upstream author agrees with the direction taken.

Heavy lifting by jca@@, debugging and tweaks by yours truly
ok jcs@@
@
text
@$OpenBSD$
--- common/refuse.c.orig	Mon Jul 18 16:32:58 2005
+++ common/refuse.c	Wed Jun 25 00:48:47 2014
@@@@ -246,7 +246,7 @@@@ refuse_access(struct refuse_args *ra, struct cvsync_at
 			continue;
 		namelen = strlen(pat);
 		ep = pat + namelen;
-		while (ep >= pat) {
+		while (ep > pat) {
 			if (*--ep != '/')
 				continue;
 
@


1.1
log
@* fix an off-by-one buffer underrun; from millert@@
* add xenocara to OpenBSD cvsyncd.conf template
@
text
@d2 2
a3 2
--- common/refuse.c.orig	Mon Aug 25 19:07:21 2008
+++ common/refuse.c	Mon Aug 25 19:07:36 2008
@

