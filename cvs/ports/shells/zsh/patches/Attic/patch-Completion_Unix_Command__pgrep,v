head	1.2;
access;
symbols
	OPENBSD_5_7:1.1.0.14
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.12
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.10
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.8
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.6
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.4
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.2;
locks; strict;
comment	@# @;


1.2
date	2015.04.22.11.52.40;	author jca;	state dead;
branches;
next	1.1;
commitid	50pVoey9DIoii8ER;

1.1
date	2011.12.21.15.01.56;	author pea;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to zsh-5.0.7

Initial diff from pea@@ (maintainer); additional patch, test reports and
prodding from Theo Buehler.  ok chrisz@@ a few months ago
@
text
@$OpenBSD: patch-Completion_Unix_Command__pgrep,v 1.1 2011/12/21 15:01:56 pea Exp $
--- Completion/Unix/Command/_pgrep.orig	Thu Dec 15 11:46:32 2011
+++ Completion/Unix/Command/_pgrep	Thu Dec 15 11:48:21 2011
@@@@ -45,7 +45,7 @@@@ case $state in
 
     local -a used sid
     used=(${(s:,:)IPREFIX})
-    sid=(${(uon)$(ps -A o sid=)})
+    sid=(${(uon)$(ps -ax -o pid)})
 
     _wanted sid expl 'session id' compadd -S ',' -q -F used $sid
     ;;
@@@@ -55,7 +55,7 @@@@ case $state in
 
     local -a used ppid
     used=(${(s:,:)IPREFIX})
-    ppid=(${(uon)$(ps -A o ppid=)})
+    ppid=(${(uon)$(ps -ax -o ppid)})
 
     _wanted ppid expl 'parent process id' compadd -S ',' -q -F used $ppid
     ;;
@@@@ -65,7 +65,7 @@@@ case $state in
 
     local -a used pgid
     used=(${(s:,:)IPREFIX})
-    pgid=(${(uon)$(ps -A o pgid=)})
+    pgid=(${(uon)$(ps -ax -o pgid)})
 
     _wanted pgid expl 'process group id' compadd -S ',' -q -F used $pgid
     ;;
@@@@ -78,9 +78,9 @@@@ case $state in
     fi
     if (( ${+opt_args[-f]} ))
     then
-      _wanted pname expl $ispat'process command line' compadd ${(u)${(f)"$(ps -A o cmd=)"}}
+      _wanted pname expl $ispat'process command line' compadd ${(u)${(f)"$(ps -ax -o command)"}}
     else
-      _wanted pname expl $ispat'process name' compadd ${(u)${(f)"$(ps -A co cmd=)"}}
+      _wanted pname expl $ispat'process name' compadd ${(u)${(f)"$(ps -ax -co command)"}}
     fi
     ;;
   
@


1.1
log
@Update to 4.3.15.
Add a diff to fix pgrep completion (from Antti Harri, thanks)

ok ajacoutot@@
@
text
@d1 1
a1 1
$OpenBSD$
@

