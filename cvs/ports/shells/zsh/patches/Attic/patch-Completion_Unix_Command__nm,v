head	1.4;
access;
symbols
	OPENBSD_6_0:1.3.0.4
	OPENBSD_6_0_BASE:1.3
	OPENBSD_5_9:1.3.0.2
	OPENBSD_5_9_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2017.02.02.03.41.12;	author juanfra;	state dead;
branches;
next	1.3;
commitid	8wEOsQZymQ8mS991;

1.3
date	2015.12.21.19.13.17;	author jasper;	state Exp;
branches;
next	1.2;
commitid	P4lxMRVUY8B1zV48;

1.2
date	2015.12.06.14.18.04;	author jasper;	state Exp;
branches;
next	1.1;
commitid	HfcnwRGnAKZFVPve;

1.1
date	2015.12.02.14.27.59;	author jasper;	state Exp;
branches;
next	;
commitid	XAxlb4e3JIva0QVd;


desc
@@


1.4
log
@From Matthew Martin. Tested by pea@@ and me. OK pea@@ (MAINTAINER).
@
text
@$OpenBSD: patch-Completion_Unix_Command__nm,v 1.3 2015/12/21 19:13:17 jasper Exp $

From 3272bdce987a3e5d5448688529ccb8290e148a67 Mon Sep 17 00:00:00 2001
From: Matthew Martin <phy1729@@gmail.com>
Date: Fri, 11 Dec 2015 11:51:09 +0100
Subject: [PATCH] 37383: add completion type for object files

--- Completion/Unix/Command/_nm.orig	Sat Oct 24 19:06:08 2015
+++ Completion/Unix/Command/_nm	Mon Dec 21 10:04:02 2015
@@@@ -2,11 +2,7 @@@@
 
 local args files variant
 
-_nm_object_file() {
-  [[ -x $REPLY || $REPLY = *.([ao]|so|elf) ]]
-}
-
-files="*:object file:_files -g '*(-.e,_nm_object_file,)'"
+files="*:object file:_object_files"
 args=(
   '(-A -o --print-file-name)'{-A,-o,--print-file-name}'[print name of input file on each line]'
   '(--demangle)-C[decode symbol names]'
@


1.3
log
@- add completion type for object files
this applies the same fix we have for nm(1) to other programs too

from Matthew Martin
ok pea@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-Completion_Unix_Command__nm,v 1.2 2015/12/06 14:18:04 jasper Exp $
@


1.2
log
@tweak previous

from Matthew Martin
ok pea@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-Completion_Unix_Command__nm,v 1.1 2015/12/02 14:27:59 jasper Exp $
d3 4
a6 1
Generate completions for OpenBSD's so versioned files (libfoo.so.0.0)
d8 4
a11 3
--- Completion/Unix/Command/_nm.orig	Sun May  3 19:57:18 2015
+++ Completion/Unix/Command/_nm	Sun Dec  6 12:58:30 2015
@@@@ -3,7 +3,7 @@@@
d14 1
a14 1
 _nm_object_file() {
d16 7
a22 4
+  [[ -x $REPLY || $REPLY = *.([ao]|so|elf)((.<->.<->))# ]] 
 }
 
 files="*:object file:_files -g '*(-.e:_nm_object_file:)'"
@


1.1
log
@adjust regex for nm(1) completion to recognize our so versioning. otherwise
it would complete .a and .la, but not .so.X.Y

ok pea@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- Completion/Unix/Command/_nm.orig	Wed Dec  2 14:01:47 2015
+++ Completion/Unix/Command/_nm	Wed Dec  2 14:01:55 2015
d12 1
a12 1
+  [[ -x $REPLY || $REPLY = *.([ao]|so|elf)(.([0-9]*.[0-9]*))? ]]
@

