head	1.8;
access;
symbols
	OPENBSD_3_5:1.7.0.2
	OPENBSD_3_5_BASE:1.7
	OPENBSD_3_4:1.6.0.2
	OPENBSD_3_4_BASE:1.6
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	OPENBSD_3_1:1.2.0.4
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2;
locks; strict;
comment	@# @;


1.8
date	2004.07.12.19.46.52;	author lebel;	state dead;
branches;
next	1.7;

1.7
date	2004.01.29.16.39.11;	author lebel;	state Exp;
branches;
next	1.6;

1.6
date	2003.05.23.14.21.05;	author lebel;	state Exp;
branches;
next	1.5;

1.5
date	2002.12.29.20.08.47;	author fgsch;	state Exp;
branches;
next	1.4;

1.4
date	2002.09.12.01.40.35;	author lebel;	state Exp;
branches;
next	1.3;

1.3
date	2002.07.01.15.34.04;	author lebel;	state Exp;
branches;
next	1.2;

1.2
date	2001.06.03.01.24.00;	author lebel;	state Exp;
branches;
next	1.1;

1.1
date	2001.05.10.19.42.34;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.8
log
@nuke stable/snapshot trees
@
text
@# $OpenBSD: Makefile,v 1.7 2004/01/29 16:39:11 lebel Exp $

COMMENT=	"the Z shell, Bourne shell-compatible, development flavor"

CATEGORIES=	shells

HOMEPAGE=	http://www.zsh.org/

MAINTAINER=	David Lebel <lebel@@openbsd.org>

PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No

IGNORE="There is currently no snapshot version of zsh.  Use zsh/stable"

.include <bsd.port.mk>
@


1.7
log
@there is no snapshot of zsh right now, so stub it
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/06/03 01:24:00 lebel Exp $
@


1.6
log
@update zsh/stable to 4.1.1-test-2; thx David A de Gruyl for the heads up
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/12/29 20:08:47 fgsch Exp $
d3 1
a3 2
COMMENT=	"Z shell, Bourne shell-compatible, release flavor"
COMMENT-zftp=	"Z shell embedded ftp client"
a4 3
VERSION=	4.1.1-test-2
PKGNAME=	zsh-${VERSION:C/-//g}
DISTNAME=	zsh-${VERSION}
a5 8
MASTER_SITES=	ftp://ftp.zsh.org/zsh/development/ \
		http://www.zsh.org/pub/development/ \
		ftp://ftp.sterling.com/zsh/development/ \
		ftp://ftp.rge.com/pub/zsh/development/ \
		ftp://ftp.cenatls.cena.dgac.fr/pub/shells/zsh/development/ \
		ftp://mrrl.lut.ac.uk/zsh/development/ \
		ftp://ftp.ips.oz.au/pub/packages/zsh/development/ \
		ftp://ftp.uit.no/pub/unix/shells/zsh/development/
d11 7
a17 40
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

FLAVORS=	static

.if ${MACHINE_ARCH:Malpha} || ${MACHINE_ARCH:Mvax}
# for the time being, force static on alpha
FLAVOR?=        static
.else
FLAVOR?=
.endif

CONFIGURE_STYLE= autoconf
CONFIGURE_ARGS=	--enable-zsh-mem --enable-zsh-secure-free --enable-maildir-support

.if ${FLAVOR:L} == "static"
CONFIGURE_ENV=	LDFLAGS="-static"
CONFIGURE_ARGS+=--disable-dynamic
.else
# we only enable sub-packages if the FLAVOR is not static
MULTI_PACKAGES=	-zftp
SUBPACKAGE?=
.  for i in ${MULTI_PACKAGES}
PKGNAME$i=	zsh$i-${VERSION:C/-//g}
.  endfor
.  if defined(PACKAGING) && !empty(SUBPACKAGE)
RUN_DEPENDS=	::shells/zsh/snapshot
.  endif
CONFIGURE_ARGS+= ${CONFIGURE_SHARED:S/shared/dynamic/}
.endif

SUBST_VARS=	VERSION

REGRESS_FLAGS=	INSTALL_PROGRAM="install -c -s -m 555" \
	        INSTALL_DATA="install -c -m 444" \
		INSTALL="install -c" \
		TMPPREFIX=${WRKBUILD}/tmp
	        
@


1.5
log
@guess what? more NEED_VERSION rm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/09/12 01:40:35 lebel Exp $
d6 1
a6 1
VERSION=	4.1.0-dev-5
d29 2
a30 1
.if ${MACHINE_ARCH:Malpha}
d38 1
a38 1
CONFIGURE_ARGS=	--enable-zsh-mem --enable-zsh-secure-free
@


1.4
log
@in the meantime, default to static on alpha until I fix this; pval@@ agrees
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/07/01 15:34:04 lebel Exp $
a9 1
NEED_VERSION=	1.474
@


1.3
log
@update zsh/snapshot to 4.1.0dev5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/04/22 12:38:42 lebel Exp $
d30 4
d35 1
@


1.2
log
@There is currently no snapshot version of zsh. Use zsh/stable.
Reduce Makefile to a stub.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1 2001/05/10 19:42:34 lebel Exp $
d3 2
a4 1
COMMENT=	"the Z shell, Bourne shell-compatible, development flavor"
d6 3
d10 9
a18 1
NEED_VERSION=	1.402
d24 34
a57 7
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No

IGNORE="There is currently no snapshot version of zsh.  Use zsh/stable"

@


1.1
log
@- reorg shells/zsh and shells/zsh-devel into zsh/stable and zsh/snapshot.
- update shells/Makefile
- OK'ed by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/05/10 18:58:30 lebel Exp $
a4 2
VERSION=	3.1.9
DISTNAME=	zsh-${VERSION}
a6 8
MASTER_SITES=	ftp://ftp.zsh.org/zsh/ \
		ftp://ftp.sterling.com/zsh/ \
		ftp://ftp.rge.com/pub/zsh/ \
		ftp://ftp.cenatls.cena.dgac.fr/pub/shells/zsh/ \
		ftp://mrrl.lut.ac.uk/zsh/ \
		ftp://ftp.fu-berlin.de/pub/unix/shells/zsh/ \
		ftp://ftp.ips.oz.au/pub/packages/zsh/ \
		ftp://ftp.uit.no/pub/unix/shells/zsh/
d12 6
a17 18
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

SUBST_VARS=	VERSION

CONFIGURE_STYLE= gnu
CONFIGURE_ARGS=	--enable-zsh-mem --enable-zsh-secure-free \
		--enable-fndir='$${datadir}/zsh/functions' \
		--disable-dynamic

FLAVORS=	static
FLAVOR?=

.if ${FLAVOR:L} == "static"
CONFIGURE_ENV=	LDFLAGS="-static"
.endif
@

