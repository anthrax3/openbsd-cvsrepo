head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2001.07.01.15.43.41;	author lebel;	state dead;
branches;
next	1.1;

1.1
date	2001.06.08.14.52.33;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update zsh/stable to 4.0.2:
- there is still a unknown bug on sparc in the way * is expanded; I'm working
  to fix this.
@
text
@$OpenBSD: patch-configure,v 1.1 2001/06/08 14:52:33 lebel Exp $
--- configure.orig	Tue Jun  5 18:51:53 2001
+++ configure	Tue Jun  5 18:58:37 2001
@@@@ -6767,8 +6767,16 @@@@ echo "$ac_t""$zsh_cv_sys_elf" 1>&6
       ;;
     esac
   else
-    DLLD="${DLLD=ld}"
-    DLLDARG=""
+    case "$host" in
+      *openbsd*)
+	DLLD="${DLLD=$CC}"
+	DLLDARG="${LDARG}"
+      ;;
+      * )
+	DLLD="${DLLD=ld}"
+	DLLDARG=""
+      ;;
+    esac
   fi
   if test -n "$GCC"; then
     DLCFLAGS="${DLCFLAGS=-fpic}"
@@@@ -6787,7 +6795,7 @@@@ echo "$ac_t""$zsh_cv_sys_elf" 1>&6
     netbsd*)      DLLDFLAGS="${DLLDFLAGS=${DLLDARG}-x -shared --whole-archive}" ;;
     aix*)         DLLDFLAGS="${DLLDFLAGS=-G -bexpall -lc}" ;;
     solaris*|sysv4*|esix*) DLLDFLAGS="${DLLDFLAGS=-G}" ;;
-    openbsd*)     DLLDFLAGS="${DLLDFLAGS=-Bshareable}" ;;
+    openbsd*)     DLLDFLAGS="${DLLDFLAGS=-shared -fPIC}" ;;
   esac
   case "$host" in
     *-hpux*)  EXTRA_LDFLAGS="${EXTRA_LDFLAGS=-Wl,-E}" ;;
@


1.1
log
@some updates to zsh/stable:
- fix Completion/BSD/Command/_bsd_pkg so its more suitable under OpenBSD
- fix linking of .so, since we prefer "${CC} -shared -fPIC" to "ld -Bshareable".
  This patch was sent to zsh authors and it will be part of the next stable
  release.
@
text
@d1 1
a1 1
$OpenBSD$
@

