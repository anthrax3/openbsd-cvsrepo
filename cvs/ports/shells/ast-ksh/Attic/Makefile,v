head	1.22;
access;
symbols
	OPENBSD_3_4:1.21.0.2
	OPENBSD_3_4_BASE:1.21
	OPENBSD_3_3:1.15.0.2
	OPENBSD_3_3_BASE:1.15
	OPENBSD_3_2:1.13.0.2
	OPENBSD_3_2_BASE:1.13
	OPENBSD_3_1:1.8.0.2
	OPENBSD_3_1_BASE:1.8
	OPENBSD_3_0:1.3.0.2
	OPENBSD_3_0_BASE:1.3
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	naddy_20010712:1.1.1.1
	naddy:1.1.1;
locks; strict;
comment	@# @;


1.22
date	2004.03.08.22.16.40;	author naddy;	state dead;
branches;
next	1.21;

1.21
date	2003.08.25.16.11.10;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2003.08.01.22.29.59;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2003.07.07.23.40.25;	author naddy;	state Exp;
branches;
next	1.18;

1.18
date	2003.06.24.16.03.17;	author naddy;	state Exp;
branches;
next	1.17;

1.17
date	2003.05.19.00.04.12;	author naddy;	state Exp;
branches;
next	1.16;

1.16
date	2003.05.01.20.50.59;	author naddy;	state Exp;
branches;
next	1.15;

1.15
date	2003.01.08.00.48.56;	author naddy;	state Exp;
branches;
next	1.14;

1.14
date	2002.10.28.19.00.09;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2002.09.28.20.28.46;	author naddy;	state Exp;
branches;
next	1.12;

1.12
date	2002.07.22.15.17.14;	author naddy;	state Exp;
branches;
next	1.11;

1.11
date	2002.06.28.14.24.13;	author naddy;	state Exp;
branches;
next	1.10;

1.10
date	2002.06.23.11.58.48;	author naddy;	state Exp;
branches;
next	1.9;

1.9
date	2002.06.22.23.58.21;	author naddy;	state Exp;
branches;
next	1.8;

1.8
date	2002.03.26.17.34.36;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2002.03.21.21.25.52;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2002.03.13.22.19.44;	author pvalchev;	state Exp;
branches;
next	1.5;

1.5
date	2001.11.21.01.17.43;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.10.24.11.58.57;	author espie;	state Exp;
branches;
next	1.3;

1.3
date	2001.10.02.13.17.45;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2001.07.29.14.48.24;	author naddy;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.12.19.17.24;	author naddy;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.07.12.19.17.24;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.22
log
@Remove the ast-ksh port.
Restrictive, inscrutable license; weird build system; code doesn't inspire
confidence; mostly broken.
ok pvalchev@@
@
text
@# $OpenBSD: Makefile,v 1.21 2003/08/25 16:11:10 naddy Exp $

BROKEN=		"fails to build or run"

COMMENT=	"official AT&T release of KornShell 93"

PKGNAME=	ast-ksh-${VERSION:S/-//g}
VERSION=	2003-07-24
CATEGORIES=	shells
HOMEPAGE=	http://www.kornshell.com/

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

PERMIT_PACKAGE_CDROM=	"inscrutable license"
PERMIT_PACKAGE_FTP=	"inscrutable license"
PERMIT_DISTFILES_CDROM=	"inscrutable license"
PERMIT_DISTFILES_FTP=	"inscrutable license"

MASTER_SITES=	http://www.research.att.com/~gsf/download/tgz/
DISTFILES=	INIT.${VERSION}.tgz ast-ksh.${VERSION}.tgz

FLAVORS=	static
FLAVOR?=

MAKE_ENV=	CC="${CC}" CCFLAGS="${CFLAGS}" SHELL="/bin/sh"
.if ${FLAVOR:L:Mstatic}
MAKE_ENV+=	LDFLAGS=-static
.endif

WRKDIST=	${WRKDIR}
INSTALLROOT=	${WRKBUILD}/arch/openbsd.${MACHINE_ARCH}

do-build:
	cd ${WRKBUILD} && env -i ${MAKE_ENV} /bin/sh bin/package make

do-regress:
	cd ${WRKSRC}/src/cmd/ksh93/tests && \
		SHELL=${INSTALLROOT}/bin/ksh ${INSTALLROOT}/bin/ksh shtests

do-install:
	${INSTALL_PROGRAM} ${INSTALLROOT}/bin/ksh ${PREFIX}/bin/ksh93
	${INSTALL_MAN} ${INSTALLROOT}/man/man1/sh.1 ${PREFIX}/man/man1/ksh93.1
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/ast-ksh
.for fun in dirs popd
	${INSTALL_SCRIPT} ${INSTALLROOT}/fun/${fun} \
		${PREFIX}/share/examples/ast-ksh/
.endfor

.include <bsd.port.mk>
@


1.21
log
@mark broken, fails to build or run on most archs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2003/08/01 22:29:59 naddy Exp $
@


1.20
log
@Update to 2003-07-24.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.19 2003/07/07 23:40:25 naddy Exp $
@


1.19
log
@Forced update to 2003-06-21 because older distfiles have been removed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2003/06/24 16:03:17 naddy Exp $
d6 1
a6 1
VERSION=	2003-06-21
@


1.18
log
@enable regression tests; from NetBSD
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/05/19 00:04:12 naddy Exp $
d6 1
a6 1
VERSION=	2003-04-22
d24 1
a24 1
.if ${FLAVOR:L} == "static"
@


1.17
log
@self-explanatory PERMIT_* value
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2003/05/01 20:50:59 naddy Exp $
d29 1
d34 3
a36 1
NO_REGRESS=	Yes
d39 2
a40 4
	${INSTALL_PROGRAM} ${WRKBUILD}/arch/openbsd.${MACHINE_ARCH}/bin/ksh \
		${PREFIX}/bin/ksh93
	${INSTALL_MAN} ${WRKBUILD}/arch/openbsd.${MACHINE_ARCH}/man/man1/sh.1 \
		${PREFIX}/man/man1/ksh93.1
d43 1
a43 1
	${INSTALL_SCRIPT} ${WRKSRC}/arch/openbsd.${MACHINE_ARCH}/fun/${fun} \
@


1.16
log
@Update to version 2003-04-22, old distfiles are gone.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2003/01/08 00:48:56 naddy Exp $
d12 4
a15 4
PERMIT_PACKAGE_CDROM=	No
PERMIT_PACKAGE_FTP=	No
PERMIT_DISTFILES_CDROM=	No
PERMIT_DISTFILES_FTP=	No
@


1.15
log
@Update to release 2002-12-21.  Notable changes:
* SIGALRM can now be used in applications.
* Numerous bug fixes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/10/28 19:00:09 naddy Exp $
d6 1
a6 1
VERSION=	2002-12-21
@


1.14
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/09/28 20:28:46 naddy Exp $
d6 1
a6 1
VERSION=	2002-09-22
@


1.13
log
@update to release 2002-09-22, old distfiles have disappeared; ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/07/22 15:17:14 naddy Exp $
d32 2
@


1.12
log
@- Make very sure that the build script is run by /bin/sh and in a clean
  environment.
- Install example functions.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/06/28 14:24:13 naddy Exp $
d6 1
a6 1
VERSION=	2002-06-28
@


1.11
log
@Update to release 2002-06-28.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2002/06/23 11:58:48 naddy Exp $
a7 1
NEED_VERSION=	1.515
d31 1
a31 1
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ./bin/package make
d38 5
@


1.10
log
@Remove need for double quoting by passing build variables by
environment instead of command line.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2002/06/22 23:58:21 naddy Exp $
d6 1
a6 1
VERSION=	2002-06-14
d32 1
a32 1
	cd ${WRKBUILD} && ${SETENV} ${MAKE_ENV} ./bin/package make ksh93
@


1.9
log
@Update to release 2002-06-14.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2002/03/26 17:34:36 naddy Exp $
d24 1
a24 1
MAKE_FLAGS=	CC="\"${CC}\"" CCFLAGS="\"${CFLAGS}\""
d26 1
a26 1
MAKE_FLAGS+=	LDFLAGS=-static
d32 1
a32 1
	cd ${WRKBUILD} && SHELL=/bin/sh ./bin/package make ${MAKE_FLAGS}
@


1.8
log
@Update to release 2002-03-17.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2002/03/21 21:25:52 espie Exp $
d6 1
a6 1
VERSION=	2002-03-17
d24 1
a24 1
MAKE_FLAGS=	CC='${CC}' CCFLAGS='${CFLAGS}'
@


1.7
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2002/03/13 22:19:44 pvalchev Exp $
d6 1
a6 1
VERSION=	2001-10-31
@


1.6
log
@MACHINE_ARCH, not ARCH - unbreaks powerpc arches package building
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/11/21 01:17:43 naddy Exp $
d8 1
a8 1
NEED_VERSION=	1.419
@


1.5
log
@* Update to 2001-10-31.
* Re-enable static flavor.
* Tighten PERMIT_*.  I'm sick of it.  The license is written in
imprenetrable legalese, obviously drafted by corporate lawyers, and
full of bizarre requirements.  I don't care if this can be construed
to be Open Source, it certainly is not in the spirit of Open Source.
* Remove license check and "Proprietary Notice" since we won't distribute
the package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/10/24 11:58:57 espie Exp $
d35 1
a35 1
	${INSTALL_PROGRAM} ${WRKBUILD}/arch/openbsd.${ARCH}/bin/ksh \
d37 1
a37 1
	${INSTALL_MAN} ${WRKBUILD}/arch/openbsd.${ARCH}/man/man1/sh.1 \
@


1.4
log
@Make sure we don't pick a bad shell. okay naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/10/02 13:17:45 naddy Exp $
d6 1
a6 1
VERSION=	2001-07-04.0000
d13 2
a14 2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
a26 1
BROKEN=		"does not build"
a29 10

.include <bsd.own.mk>

ACCEPT_AST_LICENSE?=	No
.if ${ACCEPT_AST_LICENSE:L} == "no"
IS_INTERACTIVE=	Yes
.else
post-patch:
	@@touch ${WRKSRC}/lib/package/gen/ast.license.accepted
.endif
@


1.3
log
@mark static flavor as broken until I get around to fixing this
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/07/29 14:48:24 naddy Exp $
d43 1
a43 1
	cd ${WRKBUILD} && ./bin/package make ${MAKE_FLAGS}
@


1.2
log
@get licence from bsd.own.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/07/12 19:17:24 naddy Exp $
d27 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d30 2
@


1.1.1.1
log
@Import of ast-ksh 2001-07-04.0000.

Official AT&T release of KornShell 93.  KSH-93 is the most recent
version of the KornShell Language described in "The KornShell Command
and Programming Language," by Morris Bolsky and David Korn of AT&T
Bell Laboratories.
@
text
@@
