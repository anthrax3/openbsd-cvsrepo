head	1.2;
access;
symbols
	OPENBSD_2_4:1.1.0.2
	OPENBSD_2_4_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	98.12.17.03.54.02;	author form;	state dead;
branches;
next	1.1;

1.1
date	98.05.20.04.35.21;	author gene;	state Exp;
branches;
next	;


desc
@@


1.2
log
@update to 6.08
@
text
@--- sh.print.c  1996/04/26 19:20:06     3.8
+++ sh.print.c  1997/09/20 22:47:21
@@@@ -196,6 +196,7 @@@@
 {
     register int unit;
     static int interrupted = 0;
+    size_t sz;

     /* int lmode; */

@@@@ -223,7 +224,10 @@@@
     }
 #endif
 #endif
-    (void) write(unit, linbuf, (size_t) (linp - linbuf));
+    sz = (size_t) (linp - linbuf);
+    if (write(unit, linbuf, sz) != sz && !haderr)
+       stderror(ERR_SYSTEM, progname, strerror(errno));
+
     linp = linbuf;
     interrupted = 0;
 }
@


1.1
log
@Bugfix to be removed after the release of tcsh 6.08.
From christos@@tac.nyc.ny.us courtesy of Vadim Vygonets <vadik@@cs.huji.ac.il>.
@
text
@@

