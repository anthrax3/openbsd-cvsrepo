head	1.3;
access;
symbols
	OPENBSD_3_1:1.2.0.2
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.1.1.1.0.2
	OPENBSD_3_0_BASE:1.1.1.1
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	lebel_2001-Jul-06:1.1.1.1
	lebel:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2002.07.21.08.44.35;	author wcobb;	state dead;
branches;
next	1.2;

1.2
date	2002.03.13.13.26.59;	author lebel;	state Exp;
branches;
next	1.1;

1.1
date	2001.07.06.13.33.48;	author lebel;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.07.06.13.33.48;	author lebel;	state Exp;
branches;
next	;


desc
@@


1.3
log
@sash 3.6 update.
author has integrated the ffs patches.
@
text
@$OpenBSD: patch-Makefile,v 1.2 2002/03/13 13:26:59 lebel Exp $
--- Makefile.orig	Fri Mar  8 07:29:53 2002
+++ Makefile	Wed Mar 13 06:44:16 2002
@@@@ -7,14 +7,16 @@@@
 # The MOUNT_TYPE definition sets the default file system type for -mount.
 #
 HAVE_GZIP		= 1
-HAVE_LINUX_ATTR		= 1
-HAVE_LINUX_MOUNT	= 1
-MOUNT_TYPE		= '"ext3"'
+HAVE_LINUX_ATTR		= 0
+HAVE_LINUX_MOUNT	= 0
+HAVE_BSD_MOUNT		= 1
+MOUNT_TYPE		= '"ffs"'
 
-CFLAGS = -O3 -Wall -Wmissing-prototypes \
+CFLAGS += \
 	-DHAVE_GZIP=$(HAVE_GZIP) \
 	-DHAVE_LINUX_ATTR=$(HAVE_LINUX_ATTR) \
 	-DHAVE_LINUX_MOUNT=$(HAVE_LINUX_MOUNT) \
+	-DHAVE_BSD_MOUNT=$(HAVE_BSD_MOUNT) \
 	-DMOUNT_TYPE=$(MOUNT_TYPE)
 
 LDFLAGS = -static -s
@@@@ -30,7 +32,7 @@@@ OBJS = sash.o cmds.o cmd_dd.o cmd_ed.o c
 
 
 sash:	$(OBJS)
-	$(CC) $(LDFLAGS) -o sash $(OBJS) $(LIBS)
+	$(CC) $(CFLAGS) $(LDFLAGS) -o sash $(OBJS) $(LIBS)
 
 clean:
 	rm -f $(OBJS) sash
@


1.2
log
@update shells/sash to 3.5; from maintainer Wilbern Cobb <vedge@@csoft.org>
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1
log
@Initial revision
@
text
@d2 4
a5 4
--- Makefile.orig	Sat Sep 25 01:21:34 1999
+++ Makefile	Fri Jul  6 09:21:42 2001
@@@@ -5,11 +5,11 @@@@
 # The HAVE_EXT2 definition adds the -chattr and -lsattr comamnds.
d7 16
a23 3
-CFLAGS = -O3 -Wall -Wmissing-prototypes -DHAVE_GZIP -DHAVE_EXT2
+CFLAGS += -DHAVE_GZIP
+# CFLAGS += -DHAVE_EXT2
d25 1
a25 1
 LIBS = -lz
a26 3
-
 BINDIR = /bin
 MANDIR = /usr/man/man1
d28 3
a30 3
@@@@ -17,6 +17,7 @@@@ MANDIR = /usr/man/man1
 OBJS = sash.o cmds.o cmd_dd.o cmd_ed.o cmd_grep.o cmd_ls.o cmd_tar.o \
 	cmd_gzip.o cmd_find.o cmd_file.o cmd_chattr.o cmd_ar.o utils.o
d32 2
a33 4
+all: sash
 
 sash:	$(OBJS)
 	$(CC) $(LDFLAGS) -o sash $(OBJS) $(LIBS)
@


1.1.1.1
log
@initial import of sash-3.4:
--
SASH - Stand-alone shell with built-in commands.

The sash program is a stand-alone shell which is useful for recovering
from certain types of system failures. In particular, it was created
in order to cope with the problem of missing shared libraries or
important executable.

WWW: http://www.canb.auug.org.au/~dbell/

Submitted by Albert Chang <vedge@@vedge.com.ar>

@
text
@@
