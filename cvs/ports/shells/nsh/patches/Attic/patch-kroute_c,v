head	1.6;
access;
symbols
	OPENBSD_5_6:1.1.0.4
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.2
	OPENBSD_5_5_BASE:1.1;
locks; strict;
comment	@# @;


1.6
date	2016.05.19.09.22.11;	author sthen;	state dead;
branches;
next	1.5;
commitid	8kCJk36A6Covenjd;

1.5
date	2016.04.05.21.43.54;	author sthen;	state Exp;
branches;
next	1.4;
commitid	jXxxFCTGmRXI1CHl;

1.4
date	2015.12.18.13.17.41;	author sthen;	state dead;
branches;
next	1.3;
commitid	f5cqT0LpoiH1rnjq;

1.3
date	2015.09.11.20.54.54;	author sthen;	state Exp;
branches;
next	1.2;
commitid	IX5ecYF7ycYl4WHI;

1.2
date	2015.01.10.12.00.07;	author sthen;	state dead;
branches;
next	1.1;
commitid	O3vkpKQB3Cadp8Th;

1.1
date	2014.01.29.16.26.17;	author naddy;	state Exp;
branches;
next	;


desc
@@


1.6
log
@update to new nsh snapshot, including jca's patch to remove IPV6CTL_V6ONLY
(which is a noop anyway) and more useful pppoe support (saves authkey)
@
text
@$OpenBSD: patch-kroute_c,v 1.5 2016/04/05 21:43:54 sthen Exp $
--- kroute.c.orig	Tue Apr  5 22:43:17 2016
+++ kroute.c	Tue Apr  5 22:43:22 2016
@@@@ -32,6 +32,7 @@@@
 #include <sys/param.h>
 #include <sys/socket.h>
 #include <sys/ioctl.h>
+#include <sys/queue.h>
 #include <sys/mbuf.h>
 #include <sys/sysctl.h>
 #include <sys/signal.h>
@


1.5
log
@needs queue.h for mbuf.h
@
text
@d1 1
a1 1
$OpenBSD$
@


1.4
log
@update to nsh-20151213, unbreak
@
text
@d1 11
a11 12
$OpenBSD: patch-kroute_c,v 1.3 2015/09/11 20:54:54 sthen Exp $
--- kroute.c.orig	Fri Sep 11 22:53:17 2015
+++ kroute.c	Fri Sep 11 22:53:24 2015
@@@@ -360,7 +360,7 @@@@ char metricnames[] =
 "\011pksent\010rttvar\7rtt\6ssthresh\5sendpipe\4recvpipe\3expire\2hopcount\1mtu";
 
 char routeflags[] =
-"\1UP\2GATEWAY\3HOST\4REJECT\5DYNAMIC\6MODIFIED\7DONE\010MASK_PRESENT\011CLONING\012XRESOLVE\013LLINFO\014STATIC\017PROTO2\020PROTO1";
+"\1UP\2GATEWAY\3HOST\4REJECT\5DYNAMIC\6MODIFIED\7DONE\010MASK_PRESENT\011CLONING\012LLINFO\014STATIC\017PROTO2\020PROTO1";
 
 char ifnetflags[] =
 "\1UP\2BROADCAST\3DEBUG\4LOOPBACK\5PTP\6NOTRAILERS\7RUNNING\010NOARP\011PROMISC\012ALLMULTI\013OACTIVE\014SIMPLEX\015LINK0\016LINK1\017LINK2\020MULTICAST";
@


1.3
log
@-RTF_XRESOLVE
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@Switch shells/nsh to fetching from github, which has most of our patches
rolled in. (Build currently fails due to noinet6 changes, this change
doesn't fix this yet).
@
text
@d1 5
a5 10
$OpenBSD: patch-kroute_c,v 1.1 2014/01/29 16:26:17 naddy Exp $
--- kroute.c.orig	Sun Feb 10 19:36:49 2013
+++ kroute.c	Tue Jan 28 20:59:30 2014
@@@@ -479,7 +479,7 @@@@ print_getmsg(rtm, msglen)
 		printf("\thopcount:\t%u\n", rtm->rtm_rmx.rmx_hopcount);
 	if (rtm->rtm_rmx.rmx_expire) {
 		rtm->rtm_rmx.rmx_expire -= time(0);
-		printf("\texpires:\t%u sec\n", rtm->rtm_rmx.rmx_expire);
+		printf("\texpires:\t%lld sec\n", rtm->rtm_rmx.rmx_expire);
 	}
d7 6
a12 1
 #define RTA_IGN (RTA_DST|RTA_GATEWAY|RTA_NETMASK|RTA_IFP|RTA_IFA|RTA_BRD)
@


1.1
log
@Catch up with network header changes and fix time_t type mismatches.
@
text
@d1 1
a1 1
$OpenBSD$
@

