head	1.3;
access;
symbols
	OPENBSD_3_3:1.2.0.14
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.12
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.2.0.10
	OPENBSD_3_1_BASE:1.2
	OPENBSD_3_0:1.2.0.8
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.6
	OPENBSD_2_9_BASE:1.2
	OPENBSD_2_8:1.2.0.4
	OPENBSD_2_8_BASE:1.2
	OPENBSD_2_7:1.2.0.2
	OPENBSD_2_7_BASE:1.2
	OPENBSD_2_6:1.1.1.1.0.8
	OPENBSD_2_6_BASE:1.1.1.1
	OPENBSD_2_5:1.1.1.1.0.6
	OPENBSD_2_5_BASE:1.1.1.1
	OPENBSD_2_4:1.1.1.1.0.4
	OPENBSD_2_4_BASE:1.1.1.1
	OPENBSD_2_3:1.1.1.1.0.2
	OPENBSD_2_3_BASE:1.1.1.1
	gene-1-1:1.1.1.1
	gene:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2003.08.22.16.38.12;	author naddy;	state dead;
branches;
next	1.2;

1.2
date	99.12.08.05.26.44;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	97.11.18.01.20.02;	author gene;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.18.01.20.02;	author gene;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Remove bash1 port.  This has been entirely superseded by bash2.
Chet doesn't maintain it any longer.  It smells funny.
@
text
@--- lib/readline/readline.c.orig	Wed May 24 10:43:28 1995
+++ lib/readline/readline.c	Thu Nov 25 17:18:33 1999
@@@@ -958,7 +958,7 @@@@
 static void
 readline_initialize_everything ()
 {
-  char *t;
+  char *t, *t1;
 
   /* Find out if we are running in Emacs. */
   running_in_emacs = getenv ("EMACS") != (char *)0;
@@@@ -993,8 +993,11 @@@@
   /* Check for LC_CTYPE and use its value to decide the defaults for
      8-bit character input and output. */
   t = getenv ("LC_CTYPE");
-  if (t && (strcmp (t, "iso-8859-1") == 0 || strcmp (t, "iso_8859_1") == 0 ||
-  	    strcmp (t, "ISO-8859-1") == 0))
+  t1 = getenv ("LANG");
+  if (t && (strstr (t, "8859-1") != NULL || strstr (t, "8859_1") != NULL ||
+	  strstr (t, "KOI8-R") != NULL || strstr (t, "koi8-r") != NULL) ||
+      t1 && (strstr (t1, "8859-1") != NULL || strstr (t1, "8859_1") != NULL ||
+	   strstr (t1, "KOI8-R") != NULL || strstr (t1, "koi8-r") != NULL))
     {
       _rl_meta_flag = 1;
       _rl_convert_meta_chars_to_ascii = 0;
@


1.2
log
@- remove workaround for texinfo install-info bug
- convert patches to unified diffs
- stay consistant with all the other shells and build a dynamicly
  linked binary by default
- ${ECHO} -> echo in Makefile
@
text
@@


1.1
log
@Initial revision
@
text
@d1 25
a25 41
*** readline.c.orig	Wed May 24 18:43:28 1995
--- lib/readline/readline.c	Wed Jul 19 20:26:53 1995
***************
*** 958,964 ****
  static void
  readline_initialize_everything ()
  {
!   char *t;
  
    /* Find out if we are running in Emacs. */
    running_in_emacs = getenv ("EMACS") != (char *)0;
--- 958,964 ----
  static void
  readline_initialize_everything ()
  {
!   char *t, *t1;
  
    /* Find out if we are running in Emacs. */
    running_in_emacs = getenv ("EMACS") != (char *)0;
***************
*** 993,1000 ****
    /* Check for LC_CTYPE and use its value to decide the defaults for
       8-bit character input and output. */
    t = getenv ("LC_CTYPE");
!   if (t && (strcmp (t, "iso-8859-1") == 0 || strcmp (t, "iso_8859_1") == 0 ||
!   	    strcmp (t, "ISO-8859-1") == 0))
      {
        _rl_meta_flag = 1;
        _rl_convert_meta_chars_to_ascii = 0;
--- 993,1003 ----
    /* Check for LC_CTYPE and use its value to decide the defaults for
       8-bit character input and output. */
    t = getenv ("LC_CTYPE");
!   t1 = getenv ("LANG");
!   if (t && (strstr (t, "8859-1") != NULL || strstr (t, "8859_1") != NULL ||
! 	  strstr (t, "KOI8-R") != NULL || strstr (t, "koi8-r") != NULL) ||
!       t1 && (strstr (t1, "8859-1") != NULL || strstr (t1, "8859_1") != NULL ||
! 	   strstr (t1, "KOI8-R") != NULL || strstr (t1, "koi8-r") != NULL))
      {
        _rl_meta_flag = 1;
        _rl_convert_meta_chars_to_ascii = 0;
@


1.1.1.1
log
@Import of FreeBSD shells with some modifications by myself and Don Schmidt.
@
text
@@
