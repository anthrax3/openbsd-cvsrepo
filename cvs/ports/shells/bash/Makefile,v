head	1.105;
access;
symbols
	OPENBSD_6_2:1.105.0.2
	OPENBSD_6_2_BASE:1.105
	OPENBSD_6_1:1.104.0.2
	OPENBSD_6_1_BASE:1.104
	OPENBSD_6_0:1.99.0.2
	OPENBSD_6_0_BASE:1.99
	OPENBSD_5_9:1.96.0.2
	OPENBSD_5_9_BASE:1.96
	OPENBSD_5_8:1.94.0.4
	OPENBSD_5_8_BASE:1.94
	OPENBSD_5_7:1.92.0.2
	OPENBSD_5_7_BASE:1.92
	OPENBSD_5_6:1.83.0.2
	OPENBSD_5_6_BASE:1.83
	OPENBSD_5_5:1.78.0.2
	OPENBSD_5_5_BASE:1.78
	OPENBSD_5_4:1.77.0.2
	OPENBSD_5_4_BASE:1.77
	OPENBSD_5_3:1.75.0.2
	OPENBSD_5_3_BASE:1.75
	OPENBSD_5_2:1.72.0.2
	OPENBSD_5_2_BASE:1.72
	OPENBSD_5_1_BASE:1.68
	OPENBSD_5_1:1.68.0.2
	OPENBSD_5_0:1.67.0.2
	OPENBSD_5_0_BASE:1.67
	OPENBSD_4_9:1.64.0.2
	OPENBSD_4_9_BASE:1.64
	OPENBSD_4_8:1.60.0.2
	OPENBSD_4_8_BASE:1.60
	OPENBSD_4_7:1.56.0.2
	OPENBSD_4_7_BASE:1.56
	OPENBSD_4_6:1.52.0.2
	OPENBSD_4_6_BASE:1.52
	OPENBSD_4_5:1.49.0.2
	OPENBSD_4_5_BASE:1.49
	OPENBSD_4_4:1.48.0.2
	OPENBSD_4_4_BASE:1.48
	OPENBSD_4_3:1.47.0.2
	OPENBSD_4_3_BASE:1.47
	OPENBSD_4_2:1.44.0.2
	OPENBSD_4_2_BASE:1.44
	OPENBSD_4_1:1.41.0.2
	OPENBSD_4_1_BASE:1.41
	OPENBSD_4_0:1.40.0.2
	OPENBSD_4_0_BASE:1.40
	OPENBSD_3_9:1.38.0.2
	OPENBSD_3_9_BASE:1.38
	OPENBSD_3_8:1.34.0.2
	OPENBSD_3_8_BASE:1.34
	OPENBSD_3_7:1.33.0.2
	OPENBSD_3_7_BASE:1.33
	OPENBSD_3_6:1.28.0.2
	OPENBSD_3_6_BASE:1.28
	OPENBSD_3_3:1.24.0.2
	OPENBSD_3_3_BASE:1.24
	OPENBSD_3_2:1.23.0.2
	OPENBSD_3_2_BASE:1.23
	OPENBSD_3_1:1.22.0.2
	OPENBSD_3_1_BASE:1.22
	OPENBSD_3_0:1.20.0.4
	OPENBSD_3_0_BASE:1.20
	OPENBSD_2_9_TRACKING_SWITCH:1.20
	OPENBSD_2_9:1.20.0.2
	OPENBSD_2_9_BASE:1.20
	OPENBSD_2_8:1.15.0.2
	OPENBSD_2_8_BASE:1.15
	OPENBSD_2_7:1.14.0.2
	OPENBSD_2_7_BASE:1.14
	OPENBSD_2_6:1.7.0.2
	OPENBSD_2_6_BASE:1.7
	OPENBSD_2_5:1.6.0.2
	OPENBSD_2_5_BASE:1.6
	OPENBSD_2_4:1.4.0.4
	OPENBSD_2_4_BASE:1.4
	OPENBSD_2_3:1.4.0.2
	OPENBSD_2_3_BASE:1.4
	gene-1-1:1.1.1.1
	gene:1.1.1;
locks; strict;
comment	@# @;


1.105
date	2017.09.25.09.16.13;	author robert;	state Exp;
branches;
next	1.104;
commitid	xOeDnABBxynvFYIF;

1.104
date	2017.01.28.20.25.27;	author naddy;	state Exp;
branches;
next	1.103;
commitid	45IzuwNZ3rmfkMJm;

1.103
date	2017.01.25.21.00.53;	author naddy;	state Exp;
branches;
next	1.102;
commitid	qnuGJMOsrjK6WkdY;

1.102
date	2016.11.11.22.39.48;	author naddy;	state Exp;
branches;
next	1.101;
commitid	4I3nsrIylrajlvv7;

1.101
date	2016.11.01.16.31.57;	author naddy;	state Exp;
branches;
next	1.100;
commitid	n7KrS85Z5a8uJTl4;

1.100
date	2016.09.01.10.53.27;	author jasper;	state Exp;
branches;
next	1.99;
commitid	LdsIxWmxagN2Kq33;

1.99
date	2016.06.22.21.10.27;	author naddy;	state Exp;
branches;
next	1.98;
commitid	qfVNypHc60VuSk2O;

1.98
date	2016.04.05.20.03.26;	author naddy;	state Exp;
branches;
next	1.97;
commitid	dFNq2uUmue9PqdP4;

1.97
date	2016.03.09.19.11.35;	author naddy;	state Exp;
branches;
next	1.96;
commitid	FReQDMR3LOKmB7Hq;

1.96
date	2016.02.15.12.20.33;	author tobiasu;	state Exp;
branches;
next	1.95;
commitid	E1zNDqFp89ClITVn;

1.95
date	2015.08.14.15.29.12;	author naddy;	state Exp;
branches;
next	1.94;
commitid	Au3XVD4x4ryQUd0b;

1.94
date	2015.07.10.11.27.06;	author naddy;	state Exp;
branches;
next	1.93;
commitid	B7eeT3LxCKMOzYak;

1.93
date	2015.06.06.20.23.36;	author naddy;	state Exp;
branches;
next	1.92;
commitid	Ik9PlcP0ZSs70CPu;

1.92
date	2015.01.13.13.44.15;	author naddy;	state Exp;
branches;
next	1.91;
commitid	QzbtnSFy0WhtcqN3;

1.91
date	2014.11.17.21.04.49;	author naddy;	state Exp;
branches;
next	1.90;
commitid	kU9OpLH9EjMR8Ilx;

1.90
date	2014.10.08.17.29.52;	author naddy;	state Exp;
branches;
next	1.89;
commitid	uyjAgQTdtFMBSdcI;

1.89
date	2014.10.03.19.11.20;	author naddy;	state Exp;
branches;
next	1.88;
commitid	ZpXQ9tgFB0dOND59;

1.88
date	2014.09.28.13.26.55;	author naddy;	state Exp;
branches;
next	1.87;
commitid	b1vnlhNVnzrNaam9;

1.87
date	2014.09.26.22.31.58;	author naddy;	state Exp;
branches;
next	1.86;
commitid	9N36kNI5B9Q67z7f;

1.86
date	2014.09.24.19.16.18;	author naddy;	state Exp;
branches;
next	1.85;
commitid	NTjERiwTj9t8wNcj;

1.85
date	2014.08.24.19.15.46;	author naddy;	state Exp;
branches;
next	1.84;
commitid	O5PrMWRNjJijIA00;

1.84
date	2014.08.09.19.44.40;	author naddy;	state Exp;
branches;
next	1.83;
commitid	0PSt2VUr1HYEeGi0;

1.83
date	2014.05.27.20.06.26;	author naddy;	state Exp;
branches
	1.83.2.1;
next	1.82;

1.82
date	2014.04.19.22.21.30;	author naddy;	state Exp;
branches;
next	1.81;

1.81
date	2014.04.10.12.25.22;	author naddy;	state Exp;
branches;
next	1.80;

1.80
date	2014.04.10.11.59.08;	author naddy;	state Exp;
branches;
next	1.79;

1.79
date	2014.03.10.11.58.31;	author naddy;	state Exp;
branches;
next	1.78;

1.78
date	2013.12.13.15.54.46;	author dcoppa;	state Exp;
branches
	1.78.2.1;
next	1.77;

1.77
date	2013.03.12.19.55.08;	author naddy;	state Exp;
branches;
next	1.76;

1.76
date	2013.03.11.11.41.29;	author espie;	state Exp;
branches;
next	1.75;

1.75
date	2013.01.05.19.45.21;	author naddy;	state Exp;
branches;
next	1.74;

1.74
date	2012.11.25.21.00.14;	author naddy;	state Exp;
branches;
next	1.73;

1.73
date	2012.08.04.20.05.12;	author naddy;	state Exp;
branches;
next	1.72;

1.72
date	2012.07.10.13.41.11;	author naddy;	state Exp;
branches;
next	1.71;

1.71
date	2012.06.13.15.52.55;	author naddy;	state Exp;
branches;
next	1.70;

1.70
date	2012.05.03.17.17.34;	author rpointel;	state Exp;
branches;
next	1.69;

1.69
date	2012.03.16.19.56.24;	author naddy;	state Exp;
branches;
next	1.68;

1.68
date	2011.12.05.21.40.03;	author naddy;	state Exp;
branches;
next	1.67;

1.67
date	2011.05.30.19.35.47;	author naddy;	state Exp;
branches;
next	1.66;

1.66
date	2011.03.15.19.22.08;	author naddy;	state Exp;
branches;
next	1.65;

1.65
date	2011.03.02.20.55.23;	author naddy;	state Exp;
branches;
next	1.64;

1.64
date	2011.01.21.11.25.03;	author sebastia;	state Exp;
branches;
next	1.63;

1.63
date	2010.11.20.17.22.45;	author espie;	state Exp;
branches;
next	1.62;

1.62
date	2010.10.18.21.41.47;	author espie;	state Exp;
branches;
next	1.61;

1.61
date	2010.10.14.19.40.20;	author naddy;	state Exp;
branches;
next	1.60;

1.60
date	2010.07.28.20.25.11;	author naddy;	state Exp;
branches;
next	1.59;

1.59
date	2010.05.19.18.53.46;	author naddy;	state Exp;
branches;
next	1.58;

1.58
date	2010.04.05.21.17.32;	author naddy;	state Exp;
branches;
next	1.57;

1.57
date	2010.03.21.16.37.49;	author naddy;	state Exp;
branches;
next	1.56;

1.56
date	2009.11.02.18.12.29;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2009.09.21.01.34.41;	author naddy;	state Exp;
branches;
next	1.54;

1.54
date	2009.09.18.17.28.39;	author naddy;	state Exp;
branches;
next	1.53;

1.53
date	2009.08.02.15.32.01;	author naddy;	state Exp;
branches;
next	1.52;

1.52
date	2009.05.19.15.33.31;	author naddy;	state Exp;
branches;
next	1.51;

1.51
date	2009.05.06.15.21.58;	author naddy;	state Exp;
branches;
next	1.50;

1.50
date	2009.04.04.19.42.18;	author naddy;	state Exp;
branches;
next	1.49;

1.49
date	2008.11.20.19.54.37;	author naddy;	state Exp;
branches;
next	1.48;

1.48
date	2008.05.04.19.56.25;	author naddy;	state Exp;
branches;
next	1.47;

1.47
date	2007.12.28.20.35.14;	author naddy;	state Exp;
branches;
next	1.46;

1.46
date	2007.09.15.21.17.24;	author merdely;	state Exp;
branches;
next	1.45;

1.45
date	2007.08.25.19.46.46;	author naddy;	state Exp;
branches;
next	1.44;

1.44
date	2007.05.26.21.07.24;	author naddy;	state Exp;
branches;
next	1.43;

1.43
date	2007.03.22.15.48.08;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2007.03.15.19.30.52;	author naddy;	state Exp;
branches;
next	1.41;

1.41
date	2006.10.14.18.03.10;	author naddy;	state Exp;
branches;
next	1.40;

1.40
date	2006.04.15.14.47.17;	author naddy;	state Exp;
branches;
next	1.39;

1.39
date	2006.03.11.15.13.26;	author naddy;	state Exp;
branches;
next	1.38;

1.38
date	2006.02.10.11.33.17;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2006.01.09.21.21.39;	author naddy;	state Exp;
branches;
next	1.36;

1.36
date	2005.12.13.19.56.17;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2005.12.12.20.20.31;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2005.05.11.19.02.40;	author espie;	state Exp;
branches;
next	1.33;

1.33
date	2005.02.09.23.11.29;	author alek;	state Exp;
branches;
next	1.32;

1.32
date	2004.12.06.10.44.33;	author alek;	state Exp;
branches;
next	1.31;

1.31
date	2004.11.12.20.13.35;	author naddy;	state Exp;
branches;
next	1.30;

1.30
date	2004.11.04.16.47.36;	author naddy;	state Exp;
branches;
next	1.29;

1.29
date	2004.10.09.19.25.38;	author naddy;	state Exp;
branches;
next	1.28;

1.28
date	2004.08.10.09.26.14;	author xsa;	state Exp;
branches;
next	1.27;

1.27
date	2004.07.31.14.16.06;	author naddy;	state Exp;
branches;
next	1.26;

1.26
date	2004.07.30.17.02.49;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2003.08.22.16.38.12;	author naddy;	state dead;
branches;
next	1.24;

1.24
date	2002.10.28.18.56.43;	author naddy;	state Exp;
branches;
next	1.23;

1.23
date	2002.05.13.13.43.49;	author naddy;	state Exp;
branches;
next	1.22;

1.22
date	2002.03.21.21.25.52;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2001.10.28.13.05.49;	author espie;	state Exp;
branches;
next	1.20;

1.20
date	2001.04.10.15.30.08;	author naddy;	state Exp;
branches;
next	1.19;

1.19
date	2001.01.26.20.37.08;	author brad;	state Exp;
branches;
next	1.18;

1.18
date	2001.01.19.15.21.15;	author brad;	state Exp;
branches;
next	1.17;

1.17
date	2001.01.16.22.29.52;	author brad;	state Exp;
branches;
next	1.16;

1.16
date	2001.01.03.19.36.09;	author brad;	state Exp;
branches;
next	1.15;

1.15
date	2000.07.04.21.30.17;	author brad;	state Exp;
branches
	1.15.2.1;
next	1.14;

1.14
date	2000.03.31.16.31.07;	author espie;	state Exp;
branches
	1.14.2.1;
next	1.13;

1.13
date	2000.03.26.00.12.27;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2000.02.15.05.05.13;	author turan;	state Exp;
branches;
next	1.11;

1.11
date	2000.02.12.08.02.30;	author turan;	state Exp;
branches;
next	1.10;

1.10
date	99.12.10.15.16.59;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.12.10.14.21.38;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	99.12.08.05.26.44;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.08.21.17.18.30;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	99.03.07.01.39.00;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	99.02.19.23.26.48;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	97.12.13.00.20.42;	author gene;	state Exp;
branches;
next	1.3;

1.3
date	97.11.19.01.07.52;	author joey;	state Exp;
branches;
next	1.2;

1.2
date	97.11.18.02.15.38;	author gene;	state Exp;
branches;
next	1.1;

1.1
date	97.11.18.01.20.02;	author gene;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.18.01.20.02;	author gene;	state Exp;
branches;
next	;

1.14.2.1
date	2000.09.15.05.16.10;	author marc;	state Exp;
branches;
next	;

1.15.2.1
date	2001.01.16.22.42.45;	author brad;	state Exp;
branches;
next	;

1.78.2.1
date	2014.09.24.21.16.01;	author naddy;	state Exp;
branches;
next	1.78.2.2;
commitid	wOy80jHpH9SMmoZP;

1.78.2.2
date	2014.09.28.19.44.21;	author naddy;	state Exp;
branches;
next	;
commitid	omS7ahRU3tJnBWWz;

1.83.2.1
date	2014.09.24.20.05.05;	author naddy;	state Exp;
branches;
next	1.83.2.2;
commitid	xEIO78yyQn8bCqAB;

1.83.2.2
date	2014.09.26.22.36.41;	author naddy;	state Exp;
branches;
next	1.83.2.3;
commitid	V20dpM1tlGYhfZtN;

1.83.2.3
date	2014.09.28.13.27.38;	author naddy;	state Exp;
branches;
next	;
commitid	N8mtyVr3vI8HRAnf;


desc
@@


1.105
log
@Unbreak autoconf checks with clang by not using nested functions
in the checks.

Someone clearly did not read the autoconf documentation because
using the following functions with a function declaration inside
the body will end up declaring a function inside a function.

- AC_TRY_COMPILE( [], [ int main() { return 0; } ],
- AC_LANG_PROGRAM([[]], [[int main (void) { return 0; }]])],
- AC_TRY_LINK([], [int main (void) { return 0; }],

Result:

int
main ()
{
int main (void) { return 0; }
  ;
  return 0;
}

nested functions is a gcc extension which is not supported by
clang.

test.c:4:17: error: function definition is not allowed here
int main (void) { return 0; }
                ^
1 error generated.

This causes tests to fail in the configure scripts resulting in
missing compile and link time flags from the builds.

This resulted in weird behaviour of several software, like gnome
hanging completely due to gtk+3 not being built properly.

This change intrudces the following fixes:

- remove int main() declaration from AC_TRY_COMPILE, AC_LANG_PROGRAM, AC_TRY_LINK
  as it comes with a declaration already, and people misused them

- change to use AC_LANG_SOURCE when needed in case a complete source block is specified

Most of the changes are in configure.(ac|in), however there were some cases
where autoconf is either broken or the build failed because of an autoconf
generated configure script. Everytihng else is switched to autoconf, so
the maintainers can go ahead and upstream these diffs.

There are more to come, we are continously checking the tree for these issues
and in the future the infrastructure will error if such a case is found.
@
text
@# $OpenBSD: Makefile,v 1.104 2017/01/28 20:25:27 naddy Exp $

COMMENT=	GNU Bourne Again Shell

DISTNAME=	bash-4.4
PKGNAME=	${DISTNAME}.12
CATEGORIES=	shells
HOMEPAGE=	https://www.gnu.org/software/bash/

REVISION=	0

MAINTAINER=	Christian Weisgerber <naddy@@openbsd.org>

# GPLv3+
PERMIT_PACKAGE_CDROM=	Yes

MASTER_SITES=	${MASTER_SITE_GNU:=bash/}
MASTER_SITES0=	${MASTER_SITE_GNU:=bash/bash-4.4-patches/}
DIST_SUBDIR=	bash
.for i in 01 02 03 04 05 06 07 08 09 10 11 12
PATCHFILES+=	bash44-0$i:0
.endfor

LIB_DEPENDS=	devel/gettext
WANTLIB=	c iconv intl termcap 

CONFIGURE_STYLE=gnu
MODGNU_CONFIG_GUESS_DIRS=${WRKSRC}/support

.include <bsd.port.mk>
@


1.104
log
@update to 4.4 patchlevel 12
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2017/01/25 21:00:53 naddy Exp $
d9 2
@


1.103
log
@update to 4.4 patchlevel 11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2016/11/11 22:39:48 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.11
d18 1
a18 1
.for i in 01 02 03 04 05 06 07 08 09 10 11
@


1.102
log
@Update to bash 4.4.  See the announcement at
https://lists.gnu.org/archive/html/bug-bash/2016-09/msg00018.html
for an overview of significant changes.

Jump right to patchlevel 5, which among other things fixes a use-after-free
bug discovered by otto malloc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2016/11/01 16:31:57 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.5
d18 1
a18 1
.for i in 01 02 03 04 05
@


1.101
log
@update to 4.3 patchlevel 48
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2016/09/01 10:53:27 jasper Exp $
d5 2
a6 2
DISTNAME=	bash-4.3.30
PKGNAME=	bash-4.3.48
d8 1
a8 1
HOMEPAGE=	http://cnswww.cns.cwru.edu/~chet/bash/bashtop.html
d16 1
a16 1
MASTER_SITES0=	${MASTER_SITE_GNU:=bash/bash-4.3-patches/}
d18 2
a19 2
.for i in 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48
PATCHFILES+=	bash43-0$i:0
a26 3

# Prefer system mktemp(3) and mkstemp(3) over homegrown replacements
CONFIGURE_ENV=	CPPFLAGS="-DUSE_MKTEMP -DUSE_MKSTEMP"
@


1.100
log
@retire sparc
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2016/06/22 21:10:27 naddy Exp $
d6 1
a6 1
PKGNAME=	bash-4.3.46
d18 1
a18 1
.for i in 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46
@


1.99
log
@update to 4.3 patchlevel 46
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.98 2016/04/05 20:03:26 naddy Exp $

BROKEN-sparc=	Segmentation fault on any non-trivial script
@


1.98
log
@replace gettext module with library dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2016/03/09 19:11:35 naddy Exp $
d8 1
a8 2
PKGNAME=	bash-4.3.42
REVISION=	0
d20 1
a20 1
.for i in 31 32 33 34 35 36 37 38 39 40 41 42
@


1.97
log
@remove substituted uses of CONFIGURE_SHARED, NO_SHARED_LIBS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2016/02/15 12:20:33 tobiasu Exp $
d9 1
d25 2
a26 2
MODULES=	devel/gettext
WANTLIB=	c termcap 
@


1.96
log
@mark broken on sparc, bash segfaults on any non-trivial shellscript and has
done so since at least one release if not more.

Instead of littering the ports the with BROKEN-sparc markers, take out the
real perpetrator.

If someone is looking to improve sparc, debugging this would make all the
difference. textproc/xmlto can serve as a testcase.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2015/08/14 15:29:12 naddy Exp $
a27 1
CONFIGURE_ARGS=	${NO_SHARED_LIBS:S/Yes/--enable-static-link/:S/No//}
@


1.95
log
@update to 4.3 patchlevel 42
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.94 2015/07/10 11:27:06 naddy Exp $
@


1.94
log
@Use undocumented compile-time options to prefer system mktemp(3)
and mkstemp(3) over homebrew versions (time ^ pid ^ random).

Originally suggested by Henric Jungheim for FreeBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2015/06/06 20:23:36 naddy Exp $
d6 1
a6 2
PKGNAME=	bash-4.3.39
REVISION=	0
d18 1
a18 1
.for i in 31 32 33 34 35 36 37 38 39
@


1.93
log
@update to 4.3 patchlevel 39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2015/01/13 13:44:15 naddy Exp $
d7 1
d29 3
@


1.92
log
@update to 4.3 patchlevel 33
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2014/11/17 21:04:49 naddy Exp $
d6 1
a6 1
PKGNAME=	bash-4.3.33
d18 1
a18 1
.for i in 31 32 33
@


1.91
log
@switch to 4.3.30 tarball; no source changes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2014/10/08 17:29:52 naddy Exp $
d6 1
a6 1
#PKGNAME=	bash-4.3.30
d16 1
a16 1
#MASTER_SITES0=	${MASTER_SITE_GNU:=bash/bash-4.3-patches/}
d18 3
a20 3
#.for i in
#PATCHFILES+=	bash43-0$i:0
#.endfor
@


1.90
log
@update to 4.3.30: parser bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2014/10/03 19:11:20 naddy Exp $
d5 2
a6 2
DISTNAME=	bash-4.3
PKGNAME=	${DISTNAME}.30
d16 1
a16 1
MASTER_SITES0=	${MASTER_SITE_GNU:=bash/${DISTNAME}-patches/}
d18 3
a20 4
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 \
          21 22 23 24 25 26 27 28 29 30
PATCHFILES+=	bash43-0$i:0
.endfor
@


1.89
log
@update to 4.3.28: fixes two local buffer overflows in parse.y
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2014/09/28 13:26:55 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.28
d19 1
a19 1
          21 22 23 24 25 26 27 28
@


1.88
log
@Security update to 4.3.27:
This patch changes the encoding bash uses for exported functions to avoid
clashes with shell variables and to avoid depending only on an environment
variable's contents to determine whether or not to interpret it as a shell
function.
(CVE-2014-6277, CVE-2014-7186, CVE-2014-7187)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2014/09/26 22:31:58 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.27
d19 1
a19 1
          21 22 23 24 25 26 27
@


1.87
log
@Security update to 4.3.26.
Fixes CVE-2014-7169 (incomplete fix for CVE-2014-6271).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2014/09/24 19:16:18 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.26
d19 1
a19 1
          21 22 23 24 25 26
@


1.86
log
@Security update to 4.3.25:
Fix for CVE-2014-6271 (remote code execution through bash)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2014/08/24 19:15:46 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.25
d19 1
a19 1
          21 22 23 24 25
@


1.85
log
@update to 4.3 patchlevel 24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2014/08/09 19:44:40 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.24
d19 1
a19 1
          21 22 23 24
@


1.84
log
@update to 4.3 patchlevel 22
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/05/27 20:06:26 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.22
d19 1
a19 1
          21 22
@


1.83
log
@update to 4.3 patchlevel 18
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2014/04/19 22:21:30 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.18
d18 2
a19 1
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18
@


1.83.2.1
log
@Security update to 4.3.25:
Fix for CVE-2014-6271 (remote code execution through bash)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2014/05/27 20:06:26 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.25
d18 1
a18 2
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 \
          21 22 23 24 25
@


1.83.2.2
log
@Security update to 4.3.26.
Fixes CVE-2014-7169 (incomplete fix for CVE-2014-6271).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83.2.1 2014/09/24 20:05:05 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.26
d19 1
a19 1
          21 22 23 24 25 26
@


1.83.2.3
log
@Security update to 4.3.27:
This patch changes the encoding bash uses for exported functions to avoid
clashes with shell variables and to avoid depending only on an environment
variable's contents to determine whether or not to interpret it as a shell
function.
(CVE-2014-6277, CVE-2014-7186, CVE-2014-7187)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83.2.2 2014/09/26 22:36:41 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.27
d19 1
a19 1
          21 22 23 24 25 26 27
@


1.82
log
@update to 4.3 patchlevel 11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2014/04/10 12:25:22 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.11
d18 1
a18 1
.for i in 01 02 03 04 05 06 07 08 09 10 11
@


1.81
log
@don't require bison, patch (005) contains changes to y.tab.c
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2014/04/10 11:59:08 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.8
d18 1
a18 1
.for i in 01 02 03 04 05 06 07 08
a23 4

# enable if parse.y is patched without y.tab.c
#BUILD_DEPENDS=	devel/bison
#YACC=		${LOCALBASE}/bin/bison -y
@


1.80
log
@update to 4.3 patchlevel 8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2014/03/10 11:58:31 naddy Exp $
d25 3
a27 3
# enable if parse.y is patched
BUILD_DEPENDS=	devel/bison
YACC=		${LOCALBASE}/bin/bison -y
@


1.79
log
@Update to 4.3.

Release announcement:
https://lists.gnu.org/archive/html/info-gnu/2014-02/msg00010.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/12/13 15:54:46 dcoppa Exp $
d6 1
d16 1
d18 3
d26 2
a27 2
#BUILD_DEPENDS=	devel/bison
#YACC=		${LOCALBASE}/bin/bison -y
@


1.78
log
@Do not use memcpy() on overlapping memory

http://lists.gnu.org/archive/html/bug-bash/2013-03/msg00047.html
via Arch Linux

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2013/03/12 19:55:08 naddy Exp $
d5 1
a5 3
DISTNAME=	bash-4.2
PKGNAME=	${DISTNAME}.45
REVISION=	0
a14 1
MASTER_SITES0=	${MASTER_SITE_GNU:=bash/${DISTNAME}-patches/}
a15 5
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 \
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \
          41 42 43 44 45
PATCHFILES+=	bash42-0$i:0
.endfor
d21 2
a22 2
BUILD_DEPENDS=	devel/bison
YACC=		${LOCALBASE}/bin/bison -y
@


1.78.2.1
log
@Security update to 4.2.48:
Fix for CVE-2014-6271 (remote code execution through bash)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2013/12/13 15:54:46 dcoppa Exp $
d6 2
a7 1
PKGNAME=	${DISTNAME}.48
d21 1
a21 1
          41 42 43 44 45 46 47 48
@


1.78.2.2
log
@Security update to 4.2.50:

.49: CVE-2014-7169 (incomplete fix for CVE-2014-6271)

.50: CVE-2014-6277, CVE-2014-7186, CVE-2014-7187
This patch changes the encoding bash uses for exported functions to avoid
clashes with shell variables and to avoid depending only on an environment
variable's contents to determine whether or not to interpret it as a shell
function.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78.2.1 2014/09/24 21:16:01 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.50
d20 1
a20 1
          41 42 43 44 45 46 47 48 49 50
@


1.77
log
@update to 4.2 patchlevel 45
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2013/03/11 11:41:29 espie Exp $
d7 1
@


1.76
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2013/01/05 19:45:21 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.42
d20 1
a20 1
          41 42
@


1.75
log
@update to 4.2 patchlevel 42
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2012/11/25 21:00:14 naddy Exp $
a13 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
@


1.74
log
@update to 4.2 patchlevel 39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2012/08/04 20:05:12 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.39
d22 2
a23 1
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
@


1.73
log
@update to 4.2 patchlevel 37 and drop groff dependency
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2012/07/10 13:41:11 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.37
d22 1
a22 1
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37
@


1.72
log
@update to 4.2 patchlevel 36
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2012/06/13 15:52:55 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.36
d22 1
a22 1
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36
a26 1
USE_GROFF =	Yes
@


1.71
log
@update to 4.2 patchlevel 29
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2012/05/03 17:17:34 rpointel Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.29
d22 1
a22 1
          21 22 23 24 25 26 27 28 29
@


1.70
log
@Update bash to 4.2.28.
ok naddy@@ (maintainer).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2012/03/16 19:56:24 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.28
d22 1
a22 1
          21 22 23 24 25 26 27 28
@


1.69
log
@update to 4.2 patchlevel 24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2011/12/05 21:40:03 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.24
d22 1
a22 1
          21 22 23 24
@


1.68
log
@update to 4.2 patch level 20 for a number of bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2011/05/30 19:35:47 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.20
d21 2
a22 1
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20
@


1.67
log
@bug fix update to 4.2 patchlevel 10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2011/03/15 19:22:08 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.10
d21 1
a21 1
.for i in 01 02 03 04 05 06 07 08 09 10
@


1.66
log
@Update to 4.2 patch level 8.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2011/03/02 20:55:23 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.8
d21 1
a21 1
.for i in 01 02 03 04 05 06 07 08
@


1.65
log
@use NO_SHARED_LIBS with lazy eval instead of hardcoding machine archs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2011/01/21 11:25:03 sebastia Exp $
d5 2
a6 3
REVISION =	0
DISTNAME=	bash-4.1
PKGNAME=	${DISTNAME}.9
d21 2
a22 2
.for i in 01 02 03 04 05 06 07 08 09
PATCHFILES+=	bash41-0$i:0
d30 2
a31 2
#BUILD_DEPENDS=	devel/bison
#YACC=		${LOCALBASE}/bin/bison -y
@


1.64
log
@Fix build of bash on static archs.

OK jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2010/11/20 17:22:45 espie Exp $
d35 1
a36 4

.if ${MACHINE_ARCH} == "m88k" || ${MACHINE_ARCH} == "vax"
CONFIGURE_ARGS +=       --enable-static-link
.endif
@


1.63
log
@new depends
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2010/10/18 21:41:47 espie Exp $
d5 1
d36 4
@


1.62
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2010/10/14 19:40:20 naddy Exp $
d30 1
a30 1
#BUILD_DEPENDS=	::devel/bison
@


1.61
log
@update to 4.1 patch level 9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2010/07/28 20:25:11 naddy Exp $
d26 1
@


1.60
log
@Enable multibyte support.  Makes regression tests happier.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2010/05/19 18:53:46 naddy Exp $
d6 1
a6 2
PKGNAME=	${DISTNAME}.7
REVISION=	0
d21 1
a21 1
.for i in 01 02 03 04 05 06 07
@


1.59
log
@update to 4.1 patch level 7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2010/04/05 21:17:32 naddy Exp $
d7 1
a33 1
CONFIGURE_ARGS=	--disable-multibyte	# missing wcscoll(3)
@


1.58
log
@update to 4.1 patch level 5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2010/03/21 16:37:49 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.5
d21 1
a21 1
.for i in 01 02 03 04 05
@


1.57
log
@maintenance update to 4.1, patchlevel 2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2009/11/02 18:12:29 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.2
d21 1
a21 1
.for i in 01 02
@


1.56
log
@update to 4.0 patch level 35
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2009/09/21 01:34:41 naddy Exp $
d5 2
a6 2
DISTNAME=	bash-4.0
PKGNAME=	${DISTNAME}.35
d21 2
a22 3
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 \
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35
PATCHFILES+=	bash40-0$i:0
d28 3
a30 2
BUILD_DEPENDS=	::devel/bison
YACC=		${LOCALBASE}/bin/bison -y
@


1.55
log
@actually rebuild the parser so patches to parse.y will take effect
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2009/09/18 17:28:39 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.33p0
d22 1
a22 1
          21 22 23 24 25 26 27 28 29 30 31 32 33
@


1.54
log
@update to 4.0 patch level 33
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2009/08/02 15:32:01 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.33
d30 1
a30 1
YACC=		${LOCALBASE}/bin/bison
@


1.53
log
@update to 4.0 patch level #28
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2009/05/19 15:33:31 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.28
d22 1
a22 1
          21 22 23 24 25 26 27 28
@


1.52
log
@update to 4.0 patch 24
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2009/05/06 15:21:58 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.24
d22 1
a22 1
          21 22 23 24
@


1.51
log
@update to 4.0 patch 17
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2009/04/04 19:42:18 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.17
d21 2
a22 1
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17
@


1.50
log
@major update to 4.0, patch level 10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/11/20 19:54:37 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.10
d21 1
a21 1
.for i in 01 02 03 04 05 06 07 08 09 10
@


1.49
log
@update to 3.2 patch 48
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/05/04 19:56:25 naddy Exp $
d5 2
a6 2
DISTNAME=	bash-3.2
PKGNAME=	${DISTNAME}.48
d12 1
a12 1
# GPL
d21 2
a22 4
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 \
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \
          41 42 43 44 45 46 47 48
PATCHFILES+=	bash32-0$i:0
d27 3
@


1.48
log
@update through patch #39
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2007/12/28 20:35:14 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.39
d22 2
a23 1
          21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
@


1.47
log
@update to 3.2.33: miscellaneous fixes for fairly obscure bugs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2007/09/15 21:17:24 merdely Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.33
d22 1
a22 1
          21 22 23 24 25 26 27 28 29 30 31 32 33
@


1.46
log
@Remove surrounding quotes in COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/08/25 19:46:46 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.25
d22 1
a22 1
          21 22 23 24 25
@


1.45
log
@update to 3.2.25: various bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2007/05/26 21:07:24 naddy Exp $
d3 1
a3 1
COMMENT=	"GNU Bourne Again Shell"
@


1.44
log
@maintenance update to 3.2.17, fixes some problems with cursor positioning
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2007/03/22 15:48:08 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.17
d21 2
a22 1
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17
@


1.43
log
@update to 3.2 patchlevel 15
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/03/15 19:30:52 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.15
d21 1
a21 1
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15
@


1.42
log
@update to patchlevel 10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2006/10/14 18:03:10 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.10
d21 1
a21 1
.for i in 01 02 03 04 05 06 07 08 09 10
@


1.41
log
@update to 3.2: miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2006/04/15 14:47:17 naddy Exp $
d6 1
d18 2
a19 2
MASTER_SITES=	ftp://ftp.cwru.edu/pub/bash/ \
		${MASTER_SITE_GNU:=bash/}
d21 3
@


1.40
log
@update to patchlevel 17: miscellaneous bug fixes; prodded by david@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2006/03/11 15:13:26 naddy Exp $
d5 1
a5 2
DISTNAME=	bash-3.1
PKGNAME=	${DISTNAME}.17
a18 1
MASTER_SITES0=	ftp://ftp.cwru.edu/pub/bash/${DISTNAME}-patches/
a19 3
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17
PATCHFILES+=	bash31-0$i:0
.endfor
@


1.39
log
@maintenance update to 3.1.11:  miscellaneous bug fixes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2006/02/10 11:33:17 espie Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.11
d22 1
a22 1
.for i in 01 02 03 04 05 06 07 08 09 10 11
@


1.38
log
@update path for static shells in 3.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2006/01/09 21:21:39 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.1p0
d20 1
a20 2
MASTER_SITES0=	ftp://ftp.cwru.edu/pub/bash/${DISTNAME}-patches/ \
		${MASTER_SITE_GNU:=bash/${DISTNAME}-patches/}
d22 1
a22 1
.for i in 01
@


1.37
log
@Update to 3.1.1; from david@@
Fixes parsing problems with compound assignments in several contexts.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2005/12/13 19:56:17 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}.1
@


1.36
log
@Remove static FLAVORs, some cleanup.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2005/12/12 20:20:31 naddy Exp $
d6 1
a6 1
PKGNAME=	${DISTNAME}p0
d20 6
@


1.35
log
@Update to new release 3.1.
Too many changes to summarize, many bug fixes.

Remove static FLAVOR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2005/05/11 19:02:40 espie Exp $
d6 1
@


1.34
log
@tell bash to just not bother with multibyte support yet, as we're missing
wscoll...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2005/02/09 23:11:29 alek Exp $
d5 1
a5 2
DISTNAME=	bash-3.0
PKGNAME=	bash-3.0.16p1
a18 5
MASTER_SITES0=	ftp://ftp.cwru.edu/pub/bash/bash-3.0-patches/
DIST_SUBDIR=	bash
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16
PATCHFILES+=	bash30-0$i:0
.endfor
d21 1
a21 3

FLAVORS=	static
FLAVOR?=
d24 1
a25 7

.if ${FLAVOR:L:Mstatic}
CONFIGURE_ARGS=	--enable-static-link
.else
WANTLIB=	c termcap 
.endif
CONFIGURE_ARGS+=--disable-multibyte
@


1.33
log
@- Fix libintl/libiconv linking
- Bump PKGNAME

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2004/12/06 10:44:33 alek Exp $
d6 1
a6 1
PKGNAME=	bash-3.0.16p0
d39 1
@


1.32
log
@Add WANTLIB markers

ok espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2004/11/12 20:13:35 naddy Exp $
d6 1
a6 1
PKGNAME=	bash-3.0.16
@


1.31
log
@update to patchlevel 16
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2004/11/04 16:47:36 naddy Exp $
d36 2
@


1.30
log
@- update to patchlevel 15
- reflect patchlevel in package name
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2004/10/09 19:25:38 naddy Exp $
d6 1
a6 1
PKGNAME=	bash-3.0.15
d22 1
a22 1
.for i in 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15
@


1.29
log
@* Catch up to patchlevel 3.00.13.
* Move distfile and patch file swarm into a subdirectory.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/08/10 09:26:14 xsa Exp $
d6 1
d22 2
a23 2
.for i in 001 002 003 004 005 006 007 008 009 010 011 012 013
PATCHFILES+=	bash30-$i:0
@


1.28
log
@
new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2004/07/31 14:16:06 naddy Exp $
d19 5
@


1.27
log
@Prefix ftp.cwru.edu to master sites until the distfile makes it to the
GNU mirrors.  Known issue: site has problems with the EPSV command.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2004/07/30 17:02:49 naddy Exp $
d20 1
a20 1
MODULES=	gettext
@


1.26
log
@- Update bash to 3.0: Lots of small changes, i18n support.
- Drop the preformatted print documentation.
- Move back to the shells/bash location.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2004/07/08 18:27:03 robert Exp $
d17 2
a18 1
MASTER_SITES=	${MASTER_SITE_GNU:=bash/}
@


1.25
log
@Remove bash1 port.  This has been entirely superseded by bash2.
Chet doesn't maintain it any longer.  It smells funny.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2002/10/28 18:56:43 naddy Exp $
d5 1
a5 2
DISTNAME=	bash-1.14.7
PKGNAME=	${DISTNAME}p1
d7 1
d9 1
a9 3
MASTER_SITES=	${MASTER_SITE_GNU:=bash/}

HOMEPAGE=	http://www.gnu.org/software/bash/
d11 1
d17 4
d24 5
a28 2
.if ${FLAVOR:L} == "static"
MAKE_ENV=	CPP_DEFINES="-DSYSDEP_LDFLAGS=-static"
a29 7

REGRESS_TARGET=	tests

post-install:
	${INSTALL_MAN} ${WRKSRC}/documentation/builtins.1 \
		${PREFIX}/man/man1/bash_builtins.1
	@@strip ${PREFIX}/bin/bash
@


1.24
log
@Enable regression tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2002/05/13 13:43:49 naddy Exp $
@


1.23
log
@bye MASTER_SITE_SUBDIR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2002/03/21 21:25:52 espie Exp $
d8 1
a8 1
NEED_VERSION=	1.528
d24 2
@


1.22
log
@Bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2001/10/28 13:05:49 espie Exp $
d8 2
a9 3
NEED_VERSION=	1.515
MASTER_SITES=	${MASTER_SITE_GNU}
MASTER_SITE_SUBDIR= bash
@


1.21
log
@Zap default MAINTAINER from Makefile.
Especially now that the default line is more verbose.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2001/04/10 15:30:08 naddy Exp $
d8 1
a8 1
NEED_VERSION=	1.364
@


1.20
log
@- register conflict with bash2
- integrate COMMENT
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2001/01/26 20:37:08 brad Exp $
a12 2

MAINTAINER=	ports@@openbsd.org
@


1.19
log
@god damn it, someone hit me now!
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.18 2001/01/19 15:21:15 brad Exp $
d8 1
a8 1
NEED_VERSION=	1.336
@


1.18
log
@strip the bash binary on install; pointed out by: naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/01/16 22:29:52 brad Exp $
d27 2
@


1.17
log
@bump PKGNAME.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2001/01/03 19:36:09 brad Exp $
d25 3
@


1.16
log
@- fixup Makefiles
- remove check for STATIC variable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/07/04 21:30:17 brad Exp $
d4 1
@


1.15
log
@- add HOMEPAGE
- remove FAKE=Yes and license type
- fixup INSTALL
- add @@comment with RCS id to PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2000/03/31 16:31:07 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.310
d18 1
a18 1
FLAVORS=static
a20 3
.if defined(STATIC) && ${STATIC:U} == YES
FLAVOR=static
.endif
@


1.15.2.1
log
@MFC:
fix symlink races.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2001/01/16 22:29:52 brad Exp $
a3 1
PKGNAME=	${DISTNAME}p1
d5 1
a5 1
NEED_VERSION=	1.336
d18 1
a18 1
FLAVORS=	static
d21 3
@


1.14
log
@Flavored shells.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2000/03/26 00:12:27 espie Exp $
d5 1
a5 1
NEED_VERSION=	1.240
d9 2
a12 1
LICENSE_TYPE=		GPL
d19 2
a23 2
FLAVOR?=

a26 2

FAKE=		Yes
@


1.14.2.1
log
@bring shells as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/07/04 21:30:17 brad Exp $
d5 1
a5 1
NEED_VERSION=	1.310
a8 2
HOMEPAGE=	http://www.gnu.org/software/bash/

d11 1
a17 2
FLAVOR?=

d21 2
d26 2
@


1.13
log
@Fake
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2000/02/15 05:05:13 turan Exp $
d5 1
a5 1
NEED_VERSION=	1.234
d17 1
a17 1
# invoke make with STATIC=yes to build a static binary
d19 5
a24 1
PKGNAME=        ${DISTNAME}-static
@


1.12
log
@espie will not shut up about this, DISTF -> DISTFILES, PKG -> PACKAGE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2000/02/12 08:02:30 turan Exp $
d5 1
d12 4
a15 4
PERMIT_PACKAGE_CDROM=	YES
PERMIT_PACKAGE_FTP=	YES
PERMIT_DISTFILES_CDROM=	YES
PERMIT_DISTFILES_FTP=	YES
d23 1
a23 3
post-install:
	@@install-info ${PREFIX}/info/bash.info ${PREFIX}/info/dir
	@@PKG_PREFIX="${PREFIX}" sh ${PKGDIR}/INSTALL ${DISTNAME} POST-INSTALL
@


1.11
log
@gpl licenses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/12/10 15:16:59 brad Exp $
d11 4
a14 4
PERMIT_PKG_CDROM=	YES
PERMIT_PKG_FTP=		YES
PERMIT_DISTF_CDROM=	YES
PERMIT_DISTF_FTP=	YES
@


1.10
log
@- add proper INSTALL/DEINSTALL scripts so that the reminder to add/remove
bash in /etc/shells is displayed when this is made into a package.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/12/10 14:21:38 brad Exp $
d9 6
@


1.9
log
@add an option to build a static binary
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/12/08 05:26:44 brad Exp $
d18 1
a18 6
	@@echo "Finished installing $(DISTNAME)"
	@@echo "To complete the install, you should notify the system"
	@@echo "that $(PREFIX)/bin/bash is a valid shell by adding it to"
	@@echo "/etc/shells."
	@@echo "If you are unfamiliar with this file, consult the shells(5)"
	@@echo "manual page."
@


1.8
log
@- remove workaround for texinfo install-info bug
- convert patches to unified diffs
- stay consistant with all the other shells and build a dynamicly
  linked binary by default
- ${ECHO} -> echo in Makefile
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/08/21 17:18:30 brad Exp $
d9 6
@


1.7
log
@- remove BROKEN tag, some people seem to prefer bash 1.x over 2.x
- __FreeBSD__ -> __OpenBSD__ in patch-ab
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 1999/03/07 01:39:00 brad Exp $
a10 3
	@@if [ ! -f ${PREFIX}/info/dir ]; then \
	  ${SED} -ne '1,/Menu:/p' /usr/share/info/dir > ${PREFIX}/info/dir; \
	 fi
d12 6
a17 6
	@@$(ECHO) "Finished installing $(DISTNAME)"
	@@$(ECHO) "To complete the install, you should notify the system"
	@@$(ECHO) "that $(PREFIX)/bin/bash is a valid shell by adding it to"
	@@$(ECHO) "/etc/shells."
	@@$(ECHO) "If you are unfamiliar with this file, consult the shells(5)"
	@@$(ECHO) "manual page."
@


1.6
log
@add MASTER_SITE_SUBDIR
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.5 1999/02/19 23:26:48 marc Exp $
#
d3 1
a3 1
DISTNAME=       bash-1.14.7
d5 1
a5 1
MASTER_SITES=   ${MASTER_SITE_GNU}
d8 1
a8 6
BROKEN=		"very old, out of date version: see the \"bash2\" port"
MAINTAINER=	gene@@OpenBSD.ORG

WRKSRC=         ${WRKDIR}/${DISTNAME}

# Don't compress manpages or .so not works.
@


1.5
log
@mark as broken with note to see bash2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1997/12/13 00:20:42 gene Exp $
d7 1
@


1.4
log
@Explicitly warn about /etc/shells empowering the system administrator rather
then editing /etc/shells for them.
@
text
@d1 1
a1 6
# OpenBSD makefile for:	bash
# Version required:     1.14.7
# Date created:		17 November 1997
# Whom:			gene
#
# $OpenBSD: Makefile,v 1.3 1997/11/19 01:07:52 joey Exp $
d8 1
@


1.3
log
@the first line of the Makefile should be `OpenBSD makefile for:` not `New ports...`
removed FreeBSD's $id. no need for it.
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.2 1997/11/18 02:15:38 gene Exp $
d24 6
@


1.2
log
@Cleanup of ownership and history of ports based on instructions from joey.
@
text
@d1 1
a1 1
# New ports collection makefile for:	bash
d6 1
a6 2
# $OpenBSD: Makefile,v 1.1.1.1 1997/11/18 01:20:02 gene Exp $
# Id: Makefile,v 1.25 1997/06/26 06:23:23 fenner Exp $
@


1.1
log
@Initial revision
@
text
@d3 2
a4 2
# Date created:		21 August 1994
# Whom:			jkh
d6 1
a6 1
# $OpenBSD$
@


1.1.1.1
log
@Import of FreeBSD shells with some modifications by myself and Don Schmidt.
@
text
@@
