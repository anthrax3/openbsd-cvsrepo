head	1.7;
access;
symbols
	OPENBSD_3_6:1.6.0.4
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.6.0.2
	OPENBSD_3_5_BASE:1.6
	OPENBSD_3_4:1.4.0.2
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	OPENBSD_3_1:1.1.1.1.0.2
	OPENBSD_3_1_BASE:1.1.1.1
	fgsch_20020219:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.7
date	2004.11.18.23.40.06;	author fgsch;	state dead;
branches;
next	1.6;

1.6
date	2003.12.26.01.03.02;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2003.10.11.00.52.22;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2003.06.08.03.04.50;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2003.06.05.04.03.55;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.04.10.43.07;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.19.04.19.21;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.02.19.04.19.21;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.7
log
@remove binutils now that we have a recent and more closely tracked version.
if it's needed in the future, we can bring it back. pvalchev@@ ok.
@
text
@$OpenBSD: patch-gas_Makefile_am,v 1.6 2003/12/26 01:03:02 brad Exp $
--- gas/Makefile.am.orig	2003-04-24 07:47:31.000000000 -0500
+++ gas/Makefile.am	2003-11-27 20:05:33.000000000 -0600
@@@@ -386,6 +386,7 @@@@ TARG_ENV_HFILES = \
 	config/te-macos.h \
 	config/te-nbsd.h \
 	config/te-nbsd532.h \
+	config/te-obsd.h \
 	config/te-pc532mach.h \
 	config/te-pe.h \
 	config/te-ppcnw.h \
@@@@ -495,7 +496,8 @@@@ DEP_FLAGS = -DBFD_ASSEMBLER -DOBJ_MAYBE_
 # How to link with both our special library facilities
 # and the system's installed libraries.
 
-GASLIBS = @@OPCODES_LIB@@ @@BFDLIB@@ ../libiberty/libiberty.a
+GASLIBS = @@OPCODES_LIB@@ @@BFDLIB@@ -liberty
+GASLIBSDEP = @@OPCODES_LIB@@ @@BFDLIB@@
 
 # Files to be copied away after each stage in building.
 STAGESTUFF = *.o $(noinst_PROGRAMS)
@@@@ -508,7 +510,7 @@@@ as_new_SOURCES = $(GAS_CFILES)
 as_new_LDADD = $(TARG_CPU_O) $(OBJ_FORMAT_O) $(ATOF_TARG_O) \
 	$(extra_objects) $(GASLIBS) $(INTLLIBS) $(LIBM)
 as_new_DEPENDENCIES = $(TARG_CPU_O) $(OBJ_FORMAT_O) $(ATOF_TARG_O) \
-	$(extra_objects) $(GASLIBS) $(INTLDEPS)
+	$(extra_objects) $(GASLIBSDEP) $(INTLDEPS)
 
 # Stuff that every object file depends upon.  If anything is removed
 # from this list, remove it from dep-in.sed as well.
@@@@ -690,7 +692,7 @@@@ install-exec-bindir: $(noinst_PROGRAMS)
 	$(mkinstalldirs) $(DESTDIR)$(bindir)
 	@@list='$(noinst_PROGRAMS)'; for p in $$list; do \
 	  if test -f $$p; then \
-	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
+	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
 	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
 	  else :; fi; \
 	done
@


1.6
log
@use newer in-tree version of libiberty
@
text
@d1 1
a1 1
$OpenBSD: patch-gas_Makefile_am,v 1.5 2003/10/11 00:52:22 brad Exp $
@


1.5
log
@upgrade to binutils 2.14

Tested on powerpc/sparc64/alpha
@
text
@d1 3
a3 3
$OpenBSD: patch-gas_Makefile_am,v 1.4 2003/06/08 03:04:50 brad Exp $
--- gas/Makefile.am.orig	2003-04-24 08:47:31.000000000 -0400
+++ gas/Makefile.am	2003-09-04 02:03:36.000000000 -0400
d12 20
a31 1
@@@@ -690,7 +691,7 @@@@ install-exec-bindir: $(noinst_PROGRAMS)
@


1.4
log
@RCS ids
@
text
@d1 4
a4 4
$OpenBSD$
--- gas/Makefile.am.orig	Sun Mar 16 15:56:19 2003
+++ gas/Makefile.am	Sun Mar 16 15:58:04 2003
@@@@ -376,6 +376,7 @@@@ TARG_ENV_HFILES = \
d12 1
a12 1
@@@@ -678,7 +679,7 @@@@ install-exec-bindir: $(noinst_PROGRAMS)
@


1.3
log
@upgrade to binutils 2.13.2.1

This is work in progress. It is being commited as a starting point so other
people can look at it/fix issues/and maybe Art can add Hammer support? :)
It has been lightly tested on macppc/sparc64/i386 and compile tested by
mickey@@ on hppa.

DO NOT try to build ld.so on sparc/sparc64/macppc and install the resulting
binary unless you like having a hosed system. A known "misfeature" in ld.so
that is being worked on.
--
MAINTAINER ok
@
text
@d1 1
@


1.2
log
@first pass at DESTDIR.
@
text
@d1 3
a3 4
$OpenBSD: patch-gas_Makefile_am,v 1.1.1.1 2002/02/19 04:19:21 fgsch Exp $
--- gas/Makefile.am.orig	Mon Jun 11 07:04:36 2001
+++ gas/Makefile.am	Sat May  4 06:42:05 2002
@@@@ -348,6 +348,7 @@@@ TARG_ENV_HFILES = \
d11 2
a12 6
@@@@ -643,21 +644,21 @@@@ CLEANFILES = dep.sed DEPTC DEPTCA DEPOBJ
 install-exec-local: install-exec-bindir @@install_tooldir@@
 
 install-exec-bindir: $(noinst_PROGRAMS)
-	$(mkinstalldirs) $(bindir)
+	$(mkinstalldirs) $(DESTDIR)$(bindir)
d15 3
a17 3
 	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
-	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
+	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
a19 15
 
 install-exec-tooldir: install-exec-bindir $(noinst_PROGRAMS)
-	$(mkinstalldirs) $(tooldir)/bin
+	$(mkinstalldirs) $(DESTDIR)$(tooldir)/bin
 	n=`echo as | sed '$(transform)'`; \
 	if [ "$(bindir)/$$n$(EXEEXT)" != "$(tooldir)/bin/as$(EXEEXT)" ]; then \
-	  rm -f $(tooldir)/bin/as$(EXEEXT); \
-	  ln $(bindir)/$$n$(EXEEXT) $(tooldir)/bin/as$(EXEEXT) >/dev/null 2>/dev/null \
-	    || $(LIBTOOL) --mode=install $(INSTALL_PROGRAM) as-new$(EXEEXT) $(tooldir)/bin/as$(EXEEXT); \
+	  rm -f $(DESTDIR)$(tooldir)/bin/as$(EXEEXT); \
+	  ln $(DESTDIR)$(bindir)/$$n$(EXEEXT) $(DESTDIR)$(tooldir)/bin/as$(EXEEXT) >/dev/null 2>/dev/null \
+	    || $(LIBTOOL) --mode=install $(INSTALL_PROGRAM) as-new$(EXEEXT) $(DESTDIR)$(tooldir)/bin/as$(EXEEXT); \
 	else \
 	  true ; \
 	fi
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ gas/Makefile.am	Wed Jan  2 18:10:36 2002
d12 28
@


1.1.1.1
log
@GNU binutils 2.11.2.
@
text
@@
