head	1.12;
access;
symbols
	OPENBSD_3_6:1.11.0.4
	OPENBSD_3_6_BASE:1.11
	OPENBSD_3_5:1.11.0.2
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.7.0.2
	OPENBSD_3_4_BASE:1.7
	OPENBSD_3_3:1.3.0.4
	OPENBSD_3_3_BASE:1.3
	OPENBSD_3_2:1.3.0.2
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.1.1.1.0.2
	OPENBSD_3_1_BASE:1.1.1.1
	fgsch_20020219:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.12
date	2004.11.18.23.40.06;	author fgsch;	state dead;
branches;
next	1.11;

1.11
date	2004.01.18.23.54.32;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	2004.01.17.03.17.17;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2003.12.26.01.03.02;	author brad;	state Exp;
branches;
next	1.8;

1.8
date	2003.10.11.00.52.22;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	2003.07.28.05.12.01;	author brad;	state Exp;
branches;
next	1.6;

1.6
date	2003.07.16.19.17.22;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2003.06.08.03.04.50;	author brad;	state Exp;
branches;
next	1.4;

1.4
date	2003.06.05.04.03.55;	author brad;	state Exp;
branches;
next	1.3;

1.3
date	2002.05.04.11.02.11;	author fgsch;	state Exp;
branches;
next	1.2;

1.2
date	2002.05.04.10.43.07;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2002.02.19.04.19.21;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.02.19.04.19.21;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.12
log
@remove binutils now that we have a recent and more closely tracked version.
if it's needed in the future, we can bring it back. pvalchev@@ ok.
@
text
@$OpenBSD: patch-ld_Makefile_am,v 1.11 2004/01/18 23:54:32 brad Exp $
--- ld/Makefile.am.orig	2003-04-24 08:36:07.000000000 -0400
+++ ld/Makefile.am	2004-01-18 17:24:24.000000000 -0500
@@@@ -3,7 +3,7 @@@@
 ## FIXME: work around apparent automake bug.
 INTLLIBS = @@INTLLIBS@@
 
-AUTOMAKE_OPTIONS = cygnus dejagnu
+AUTOMAKE_OPTIONS = cygnus dejagnu no-installman
 
 SUBDIRS = po
 
@@@@ -105,7 +105,7 @@@@ man_MANS = ld.1
 INCLUDES = -D_GNU_SOURCE -I. -I$(srcdir) -I../bfd -I$(BFDDIR) -I$(INCDIR) -I$(top_srcdir)/../intl -I../intl $(HDEFINES) $(CFLAGS) -DLOCALEDIR="\"$(prefix)/share/locale\""
 
 BFDLIB = ../bfd/libbfd.la
-LIBIBERTY = ../libiberty/libiberty.a
+LIBIBERTY = -liberty
 
 ALL_EMULATIONS = \
 	ea29k.o \
@@@@ -121,7 +121,9 @@@@ ALL_EMULATIONS = \
 	earmelf_fbsd.o \
 	earmelf_linux.o \
 	earmelf_nbsd.o \
+	earmelf_obsd.o \
 	earmelfb_nbsd.o \
+	earmelfb_obsd.o \
 	earmelf_oabi.o \
 	earmnto.o \
 	earmnbsd.o \
@@@@ -153,6 +155,7 @@@@ ALL_EMULATIONS = \
 	eelf32_i960.o \
 	eelf32_i860.o \
 	eelf32_sparc.o \
+	eelf32_sparc_obsd.o \
 	eelf32b4300.o \
 	eelf32bmip.o \
 	eelf32bmipn32.o \
@@@@ -177,6 +180,7 @@@@ ALL_EMULATIONS = \
 	eelf32openrisc.o \
 	eelf32ppc.o \
 	eelf32ppc_fbsd.o \
+	eelf32ppc_obsd.o \
 	eelf32ppclinux.o \
 	eelf32ppcnto.o \
 	eelf32ppcsim.o \
@@@@ -188,6 +192,7 @@@@ ALL_EMULATIONS = \
 	eelf_i386_be.o \
 	eelf_i386_chaos.o \
 	eelf_i386_fbsd.o \
+	eelf_i386_obsd.o \
 	eelf_i386_ldso.o \
 	eelf_s390.o \
 	egld960.o \
@@@@ -224,6 +229,7 @@@@ ALL_EMULATIONS = \
 	ei386moss.o \
 	ei386msdos.o \
 	ei386nbsd.o \
+	ei386obsd.o \
 	ei386nto.o \
 	ei386nw.o \
 	ei386pe.o \
@@@@ -242,6 +248,7 @@@@ ALL_EMULATIONS = \
 	em68klinux.o \
 	em68klynx.o \
 	em68knbsd.o \
+	em68kobsd.o \
 	em68kpsos.o \
 	em88kbcs.o \
 	emcorepe.o \
@@@@ -326,6 +333,7 @@@@ ALL_EMULATIONS = \
 	esparclinux.o \
 	esparclynx.o \
 	esparcnbsd.o \
+	esparcobsd.o \
 	est2000.o \
 	esun3.o \
 	esun4.o \
@@@@ -354,11 +362,14 @@@@ ALL_64_EMULATIONS = \
 	eshlelf64_nbsd.o \
 	eelf_x86_64.o \
 	eelf_x86_64_fbsd.o \
+	eelf_x86_64_obsd.o \
 	eelf64_s390.o \
 	eelf64_sparc.o \
 	eelf64_sparc_fbsd.o \
+	eelf64_sparc_obsd.o \
 	eelf64alpha.o \
 	eelf64alpha_fbsd.o \
+	eelf64alpha_obsd.o \
 	eelf64alpha_nbsd.o \
 	eelf64bmip.o \
 	eelf64btsmip.o \
@@@@ -480,6 +491,17 @@@@ earmelfb_nbsd.c: $(srcdir)/emulparams/ar
   $(srcdir)/emultempl/elf32.em $(srcdir)/emultempl/armelf.em \
   $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} armelfb_nbsd "$(tdir_armelfb_nbsd)"
+earmelf_obsd.c: $(srcdir)/emulparams/armelf_obsd.sh \
+  $(srcdir)/emulparams/armelf.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/emultempl/armelf.em \
+  $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} armelf_obsd "$(tdir_armelf_obsd)"
+earmelfb_obsd.c: $(srcdir)/emulparams/armelfb_obsd.sh \
+  $(srcdir)/emulparams/armelf_obsd.sh \
+  $(srcdir)/emulparams/armelf.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/emultempl/armelf.em \
+  $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} armelfb_obsd "$(tdir_armelfb_obsd)"
 earmaoutb.c:	$(srcdir)/emulparams/armaoutb.sh \
   $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/armaout.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} armaoutb "$(tdir_armaoutb)"
@@@@ -614,6 +636,10 @@@@ em32relf.c: $(srcdir)/emulparams/m32relf
 eelf32_sparc.c: $(srcdir)/emulparams/elf32_sparc.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf32_sparc "$(tdir_elf32_sparc)"
+eelf32_sparc_obsd.c: $(srcdir)/emulparams/elf32_sparc_obsd.sh \
+  $(srcdir)/emulparams/elf32_sparc.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf32_sparc_obsd "$(tdir_elf32_sparc_obsd)"
 eelf32_i860.c: $(srcdir)/emulparams/elf32_i860.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf32_i860 "$(tdir_elf32_i860)"
@@@@ -700,6 +726,10 @@@@ eelf32ppc_fbsd.c: $(srcdir)/emulparams/e
   $(srcdir)/emulparams/elf32ppc.sh $(srcdir)/emultempl/ppc32elf.em \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf32ppc_fbsd "$(tdir_elf32ppc_fbsd)"
+eelf32ppc_obsd.c: $(srcdir)/emulparams/elf32ppc_obsd.sh \
+  $(srcdir)/emulparams/elf32ppc.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf32ppc_obsd "$(tdir_elf32ppc_obsd)"
 eelf32ppcsim.c: $(srcdir)/emulparams/elf32ppcsim.sh \
   $(srcdir)/emulparams/elf32ppc.sh $(srcdir)/emultempl/ppc32elf.em \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
@@@@ -734,6 +764,10 @@@@ eelf64alpha_fbsd.c: $(srcdir)/emulparams
   $(srcdir)/emulparams/elf64alpha.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf64alpha_fbsd "$(tdir_elf64alpha_fbsd)"
+eelf64alpha_obsd.c: $(srcdir)/emulparams/elf64alpha_obsd.sh \
+  $(srcdir)/emulparams/elf64alpha.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf64alpha_obsd "$(tdir_elf64alpha_obsd)"
 eelf64alpha_nbsd.c: $(srcdir)/emulparams/elf64alpha_nbsd.sh \
   $(srcdir)/emulparams/elf64alpha.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
@@@@ -764,6 +798,10 @@@@ eelf64_sparc_fbsd.c: $(srcdir)/emulparam
   $(srcdir)/emulparams/elf64_sparc.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf64_sparc_fbsd "$(tdir_elf64_sparc_fbsd)"
+eelf64_sparc_obsd.c: $(srcdir)/emulparams/elf64_sparc_obsd.sh \
+  $(srcdir)/emulparams/elf64_sparc.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf64_sparc_obsd "$(tdir_elf64_sparc_obsd)"
 eelf64bmip.c: $(srcdir)/emulparams/elf64bmip.sh \
   $(srcdir)/emulparams/elf32bmipn32.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
@@@@ -794,6 +832,10 @@@@ eelf_x86_64_fbsd.c: $(srcdir)/emulparams
   $(srcdir)/emulparams/elf_x86_64.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf_x86_64_fbsd "$(tdir_elf_x86_64_fbsd)"
+eelf_x86_64_obsd.c: $(srcdir)/emulparams/elf_x86_64_obsd.sh \
+  $(srcdir)/emulparams/elf_x86_64.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf_x86_64_obsd "$(tdir_elf_x86_64_obsd)"
 eelf_i386_be.c: $(srcdir)/emulparams/elf_i386_be.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf_i386_be "$(tdir_elf_i386_be)"
@@@@ -804,6 +846,10 @@@@ eelf_i386_fbsd.c: $(srcdir)/emulparams/e
   $(srcdir)/emulparams/elf_i386.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf_i386_fbsd "$(tdir_elf_i386_fbsd)"
+eelf_i386_obsd.c: $(srcdir)/emulparams/elf_i386_obsd.sh \
+  $(srcdir)/emulparams/elf_i386.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} elf_i386_obsd "$(tdir_elf_i386_obsd)"
 eelf_i386_ldso.c: $(srcdir)/emulparams/elf_i386_ldso.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} elf_i386_ldso "$(tdir_elf_i386_ldso)"
@@@@ -924,6 +970,9 @@@@ ei386msdos.c: $(srcdir)/emulparams/i386m
 ei386nbsd.c:	$(srcdir)/emulparams/i386nbsd.sh \
   $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} i386nbsd "$(tdir_i386nbsd)"
+ei386obsd.c:    $(srcdir)/emulparams/i386obsd.sh \
+  $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} i386obsd "$(tdir_i386obsd)"
 ei386nto.c:	$(srcdir)/emulparams/i386nto.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} i386nto "$(tdir_i386nto)"
@@@@ -981,6 +1030,9 @@@@ em68klynx.c: $(srcdir)/emulparams/m68kly
 em68knbsd.c:	$(srcdir)/emulparams/m68knbsd.sh \
   $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} m68knbsd "$(tdir_m68knbsd)"
+em68kobsd.c:    $(srcdir)/emulparams/m68kobsd.sh \
+  $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} m68kobsd "$(tdir_m68kobsd)"
 em68kpsos.c:	$(srcdir)/emulparams/m68kpsos.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/psos.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} m68kpsos "$(tdir_m68kpsos)"
@@@@ -1322,6 +1374,9 @@@@ esparclynx.c: $(srcdir)/emulparams/sparc
 esparcnbsd.c:	$(srcdir)/emulparams/sparcnbsd.sh \
   $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} sparcnbsd "$(tdir_sparcnbsd)"
+esparcobsd.c:   $(srcdir)/emulparams/sparcobsd.sh \
+  $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} sparcobsd "$(tdir_sparcobsd)"
 est2000.c: $(srcdir)/emulparams/st2000.sh \
   $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/st2000.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} st2000 "$(tdir_st2000)"
@@@@ -1382,7 +1437,7 @@@@ EXTRA_ld_new_SOURCES = deffilep.y
 
 ld_new_SOURCES = ldgram.y ldlex.l lexsup.c ldlang.c mri.c ldctor.c ldmain.c \
 	ldwrite.c ldexp.c ldemul.c ldver.c ldmisc.c ldfile.c ldcref.c
-ld_new_DEPENDENCIES = $(EMULATION_OFILES) $(EMUL_EXTRA_OFILES) $(BFDLIB) $(LIBIBERTY) $(INTLDEPS)
+ld_new_DEPENDENCIES = $(EMULATION_OFILES) $(EMUL_EXTRA_OFILES) $(BFDLIB) $(INTLDEPS)
 ld_new_LDADD = $(EMULATION_OFILES) $(EMUL_EXTRA_OFILES) $(BFDLIB) $(LIBIBERTY) $(INTLLIBS)
 
 # The generated emulation files mostly have the same dependencies.
@@@@ -1518,7 +1573,7 @@@@ install-exec-local: ld-new$(EXEEXT)
 	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(tooldir)/bin
 	@@list='$(noinst_PROGRAMS)'; for p in $$list; do \
 	  if test -f $$p; then \
-	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
+	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
 	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
 	  else :; fi; \
 	done
@@@@ -1579,17 +1634,17 @@@@ dep.sed: dep-in.sed config.status
 dep: DEP
 	sed -e '/^..DO NOT DELETE THIS LINE/,$$d' < Makefile > tmp-Makefile
 	cat DEP >> tmp-Makefile
-	$(srcdir)/../move-if-change tmp-Makefile Makefile
+	$(SHELL) $(srcdir)/../move-if-change tmp-Makefile Makefile
 
 dep-in: DEP
 	sed -e '/^..DO NOT DELETE THIS LINE/,$$d' < $(srcdir)/Makefile.in > tmp-Makefile.in
 	cat DEP >> tmp-Makefile.in
-	$(srcdir)/../move-if-change tmp-Makefile.in $(srcdir)/Makefile.in
+	$(SHELL) $(srcdir)/../move-if-change tmp-Makefile.in $(srcdir)/Makefile.in
 
 dep-am: DEP
 	sed -e '/^..DO NOT DELETE THIS LINE/,$$d' < $(srcdir)/Makefile.am > tmp-Makefile.am
 	cat DEP >> tmp-Makefile.am
-	$(srcdir)/../move-if-change tmp-Makefile.am $(srcdir)/Makefile.am
+	$(SHELL) $(srcdir)/../move-if-change tmp-Makefile.am $(srcdir)/Makefile.am
 
 .PHONY: dep dep-in dep-am
 
@


1.11
log
@don't install man pages by default
@
text
@d1 1
a1 1
$OpenBSD: patch-ld_Makefile_am,v 1.10 2004/01/17 03:17:17 brad Exp $
@


1.10
log
@sync with in-tree, add $(SHELL) in a few places
@
text
@d1 1
a1 1
$OpenBSD: patch-ld_Makefile_am,v 1.9 2003/12/26 01:03:02 brad Exp $
d3 10
a12 1
+++ ld/Makefile.am	2004-01-16 22:17:42.000000000 -0500
@


1.9
log
@use newer in-tree version of libiberty
@
text
@d1 3
a3 3
$OpenBSD: patch-ld_Makefile_am,v 1.8 2003/10/11 00:52:22 brad Exp $
--- ld/Makefile.am.orig	2003-04-24 07:36:07.000000000 -0500
+++ ld/Makefile.am	2003-11-27 20:14:50.000000000 -0600
d218 21
@


1.8
log
@upgrade to binutils 2.14

Tested on powerpc/sparc64/alpha
@
text
@d1 12
a12 3
$OpenBSD: patch-ld_Makefile_am,v 1.7 2003/07/28 05:12:01 brad Exp $
--- ld/Makefile.am.orig	2003-04-24 08:36:07.000000000 -0400
+++ ld/Makefile.am	2003-09-04 02:03:37.000000000 -0400
d200 9
@


1.7
log
@add ARM support.
--
From: brad@@, based on original diffs from kevlo@@
@
text
@d1 4
a4 4
$OpenBSD: patch-ld_Makefile_am,v 1.6 2003/07/16 19:17:22 brad Exp $
--- ld/Makefile.am.orig	Wed Jan  1 19:56:31 2003
+++ ld/Makefile.am	Mon Jul 21 16:31:14 2003
@@@@ -120,7 +120,9 @@@@ ALL_EMULATIONS = \
d12 1
d14 1
a14 2
 	earmpe.o \
@@@@ -151,6 +153,7 @@@@ ALL_EMULATIONS = \
d22 1
a22 1
@@@@ -169,6 +172,7 @@@@ ALL_EMULATIONS = \
d28 1
d30 1
a30 2
 	eelf32ppcwindiss.o \
@@@@ -178,6 +182,7 @@@@ ALL_EMULATIONS = \
d38 1
a38 1
@@@@ -210,6 +215,7 @@@@ ALL_EMULATIONS = \
d46 1
a46 1
@@@@ -228,6 +234,7 @@@@ ALL_EMULATIONS = \
d54 1
a54 1
@@@@ -268,6 +275,7 @@@@ ALL_EMULATIONS = \
d62 1
a62 1
@@@@ -293,11 +301,14 @@@@ ALL_64_EMULATIONS = \
d77 1
a77 1
@@@@ -415,6 +426,17 @@@@ earmelfb_nbsd.c: $(srcdir)/emulparams/ar
d95 1
a95 1
@@@@ -540,6 +562,10 @@@@ em32relf.c: $(srcdir)/emulparams/m32relf
d106 2
a107 2
@@@@ -608,6 +634,10 @@@@ eelf32ppc_fbsd.c: $(srcdir)/emulparams/e
   $(srcdir)/emulparams/elf32ppc.sh \
d115 1
a115 1
   $(srcdir)/emulparams/elf32ppc.sh \
d117 1
a117 1
@@@@ -633,6 +663,10 @@@@ eelf64alpha_fbsd.c: $(srcdir)/emulparams
d128 1
a128 1
@@@@ -663,6 +697,10 @@@@ eelf64_sparc_fbsd.c: $(srcdir)/emulparam
d139 1
a139 1
@@@@ -693,6 +731,10 @@@@ eelf_x86_64_fbsd.c: $(srcdir)/emulparams
d150 1
a150 1
@@@@ -703,6 +745,10 @@@@ eelf_i386_fbsd.c: $(srcdir)/emulparams/e
d161 1
a161 1
@@@@ -809,6 +855,9 @@@@ ei386msdos.c: $(srcdir)/emulparams/i386m
d171 1
a171 1
@@@@ -866,6 +915,9 @@@@ em68klynx.c: $(srcdir)/emulparams/m68kly
d181 1
a181 1
@@@@ -1025,6 +1077,9 @@@@ esparclynx.c: $(srcdir)/emulparams/sparc
d191 1
a191 1
@@@@ -1212,7 +1267,7 @@@@ install-exec-local: ld-new$(EXEEXT)
@


1.6
log
@- ensure consistent LIB_PATH on all OpenBSD ELF systems
- move WxorX setup into separate OpenBSD arch targets
--
"I have not found any problems with the binutils patch" drahn@@
@
text
@d1 1
a1 1
$OpenBSD: patch-ld_Makefile_am,v 1.5 2003/06/08 03:04:50 brad Exp $
d3 12
a14 2
+++ ld/Makefile.am	Wed Jul  9 16:37:55 2003
@@@@ -151,6 +151,7 @@@@ ALL_EMULATIONS = \
d22 1
a22 1
@@@@ -169,6 +170,7 @@@@ ALL_EMULATIONS = \
d30 1
a30 1
@@@@ -178,6 +180,7 @@@@ ALL_EMULATIONS = \
d38 1
a38 1
@@@@ -210,6 +213,7 @@@@ ALL_EMULATIONS = \
d46 1
a46 1
@@@@ -228,6 +232,7 @@@@ ALL_EMULATIONS = \
d54 1
a54 1
@@@@ -268,6 +273,7 @@@@ ALL_EMULATIONS = \
d62 1
a62 1
@@@@ -293,11 +299,14 @@@@ ALL_64_EMULATIONS = \
d77 19
a95 1
@@@@ -540,6 +549,10 @@@@ em32relf.c: $(srcdir)/emulparams/m32relf
d106 1
a106 1
@@@@ -608,6 +621,10 @@@@ eelf32ppc_fbsd.c: $(srcdir)/emulparams/e
d117 1
a117 1
@@@@ -633,6 +650,10 @@@@ eelf64alpha_fbsd.c: $(srcdir)/emulparams
d128 1
a128 1
@@@@ -663,6 +684,10 @@@@ eelf64_sparc_fbsd.c: $(srcdir)/emulparam
d139 1
a139 1
@@@@ -693,6 +718,10 @@@@ eelf_x86_64_fbsd.c: $(srcdir)/emulparams
d150 1
a150 1
@@@@ -703,6 +732,10 @@@@ eelf_i386_fbsd.c: $(srcdir)/emulparams/e
d161 1
a161 1
@@@@ -809,6 +842,9 @@@@ ei386msdos.c: $(srcdir)/emulparams/i386m
d171 1
a171 1
@@@@ -866,6 +902,9 @@@@ em68klynx.c: $(srcdir)/emulparams/m68kly
d181 1
a181 1
@@@@ -1025,6 +1064,9 @@@@ esparclynx.c: $(srcdir)/emulparams/sparc
d191 1
a191 1
@@@@ -1212,7 +1254,7 @@@@ install-exec-local: ld-new$(EXEEXT)
@


1.5
log
@RCS ids
@
text
@d1 28
a28 4
$OpenBSD$
--- ld/Makefile.am.orig	Sun Mar 16 16:13:08 2003
+++ ld/Makefile.am	Sun Mar 16 16:30:29 2003
@@@@ -210,6 +210,7 @@@@ ALL_EMULATIONS = \
d36 1
a36 1
@@@@ -228,6 +229,7 @@@@ ALL_EMULATIONS = \
d44 1
a44 1
@@@@ -268,6 +270,7 @@@@ ALL_EMULATIONS = \
d52 82
a133 1
@@@@ -809,6 +812,9 @@@@ ei386msdos.c: $(srcdir)/emulparams/i386m
d143 1
a143 1
@@@@ -866,6 +872,9 @@@@ em68klynx.c: $(srcdir)/emulparams/m68kly
d153 1
a153 1
@@@@ -1025,6 +1034,9 @@@@ esparclynx.c: $(srcdir)/emulparams/sparc
d163 1
a163 1
@@@@ -1212,7 +1224,7 @@@@ install-exec-local: ld-new$(EXEEXT)
@


1.4
log
@upgrade to binutils 2.13.2.1

This is work in progress. It is being commited as a starting point so other
people can look at it/fix issues/and maybe Art can add Hammer support? :)
It has been lightly tested on macppc/sparc64/i386 and compile tested by
mickey@@ on hppa.

DO NOT try to build ld.so on sparc/sparc64/macppc and install the resulting
binary unless you like having a hosed system. A known "misfeature" in ld.so
that is being worked on.
--
MAINTAINER ok
@
text
@d1 1
@


1.3
log
@ops, missed one
@
text
@d1 3
a3 12
$OpenBSD: patch-ld_Makefile_am,v 1.2 2002/05/04 10:43:07 fgsch Exp $
--- ld/Makefile.am.orig	Mon Jun 11 07:05:07 2001
+++ ld/Makefile.am	Sat May  4 06:44:48 2002
@@@@ -168,6 +168,7 @@@@ ALL_EMULATIONS = \
 	ehp3hpux.o \
 	ehppaelf.o \
 	ehppalinux.o \
+	ehppaobsd.o \
 	ei386aout.o \
 	ei386beos.o \
 	ei386bsd.o \
@@@@ -179,6 +180,7 @@@@ ALL_EMULATIONS = \
d8 1
d11 1
a11 2
 	ei386pe_posix.o \
@@@@ -195,6 +197,7 @@@@ ALL_EMULATIONS = \
d19 1
a19 1
@@@@ -226,6 +229,7 @@@@ ALL_EMULATIONS = \
d27 1
a27 12
@@@@ -560,6 +564,10 @@@@ ehppalinux.c: $(srcdir)/emulparams/hppal
   $(srcdir)/emultempl/elf32.em $(srcdir)/emultempl/hppaelf.em \
   $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} hppalinux "$(tdir_hppalinux)"
+ehppaobsd.c: $(srcdir)/emulparams/hppaobsd.sh \
+  $(srcdir)/emultempl/elf32.em $(srcdir)/emultempl/hppaelf.em \
+  $(srcdir)/scripttempl/elf.sc ${GEN_DEPENDS}
+	${GENSCRIPTS} hppaobsd "$(tdir_hppaobsd)"
 ei386aout.c: $(srcdir)/emulparams/i386aout.sh \
   $(srcdir)/emultempl/generic.em $(srcdir)/scripttempl/aout.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} i386aout "$(tdir_i386aout)"
@@@@ -593,6 +601,9 @@@@ ei386msdos.c: $(srcdir)/emulparams/i386m
d31 1
a31 1
+ei386obsd.c:	$(srcdir)/emulparams/i386obsd.sh \
d34 4
a37 4
 ei386nw.c:	$(srcdir)/emulparams/i386nw.sh \
   $(srcdir)/emultempl/elf32.em $(srcdir)/scripttempl/nw.sc ${GEN_DEPENDS}
 	${GENSCRIPTS} i386nw "$(tdir_i386nw)"
@@@@ -642,6 +653,9 @@@@ em68klynx.c: $(srcdir)/emulparams/m68kly
d41 1
a41 1
+em68kobsd.c:	$(srcdir)/emulparams/m68kobsd.sh \
d47 1
a47 1
@@@@ -741,6 +755,9 @@@@ esparclynx.c: $(srcdir)/emulparams/sparc
d51 1
a51 1
+esparcobsd.c:	$(srcdir)/emulparams/sparcobsd.sh \
d57 2
a58 6
@@@@ -911,24 +928,24 @@@@ CLEANFILES = dep.sed DEP DEPA DEP1 DEP2
 .PHONY: install-exec-local install-data-local
 
 install-exec-local: ld-new$(EXEEXT)
-	$(mkinstalldirs) $(bindir) $(tooldir)/bin
+	$(mkinstalldirs) $(DESTDIR)$(bindir) $(DESTDIR)$(tooldir)/bin
d61 3
a63 3
 	    echo " $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`"; \
-	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
+	    $(LIBTOOL)  --mode=install $(INSTALL_PROGRAM) $$p $(DESTDIR)$(bindir)/`echo $$p|sed -e 's/$(EXEEXT)$$//' -e 's/-new//'|sed '$(transform)'|sed 's/$$/$(EXEEXT)/'`; \
a65 19
 	n=`echo ld | sed '$(transform)'`; \
 	if [ "$(bindir)/$$n$(EXEEXT)" != "$(tooldir)/bin/ld$(EXEEXT)" ]; then \
-	  rm -f $(tooldir)/bin/ld$(EXEEXT); \
-	  ln $(bindir)/$$n$(EXEEXT) $(tooldir)/bin/ld$(EXEEXT) >/dev/null 2>/dev/null \
-	  || $(LIBTOOL) --mode=install $(INSTALL_PROGRAM) ld-new$(EXEEXT) $(tooldir)/bin/ld$(EXEEXT); \
+	  rm -f $(DESTDIR)$(tooldir)/bin/ld$(EXEEXT); \
+	  ln $(DESTDIR)$(bindir)/$$n$(EXEEXT) $(DESTDIR)$(tooldir)/bin/ld$(EXEEXT) >/dev/null 2>/dev/null \
+	  || $(LIBTOOL) --mode=install $(INSTALL_PROGRAM) ld-new$(EXEEXT) $(DESTDIR)$(tooldir)/bin/ld$(EXEEXT); \
 	fi
 
 install-data-local:
-	$(mkinstalldirs) $(scriptdir)/ldscripts
+	$(mkinstalldirs) $(DESTDIR)$(scriptdir)/ldscripts
 	for f in ldscripts/*; do \
-	  $(INSTALL_DATA) $$f $(scriptdir)/$$f ; \
+	  $(INSTALL_DATA) $$f $(DESTDIR)$(scriptdir)/$$f ; \
 	done
 
 # Stuff that should be included in a distribution.  The diststuff
@


1.2
log
@first pass at DESTDIR.
@
text
@d1 1
a1 1
$OpenBSD: patch-ld_Makefile_am,v 1.1.1.1 2002/02/19 04:19:21 fgsch Exp $
d96 1
a96 1
+	  ln $(bindir)/$$n$(EXEEXT) $(DESTDIR)$(tooldir)/bin/ld$(EXEEXT) >/dev/null 2>/dev/null \
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ ld/Makefile.am	Wed Feb 13 23:19:24 2002
d77 32
@


1.1.1.1
log
@GNU binutils 2.11.2.
@
text
@@
