head	1.3;
access;
symbols
	OPENBSD_3_6:1.2.0.10
	OPENBSD_3_6_BASE:1.2
	OPENBSD_3_5:1.2.0.8
	OPENBSD_3_5_BASE:1.2
	OPENBSD_3_4:1.2.0.6
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.4
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.2.0.2
	OPENBSD_3_2_BASE:1.2
	fgsch_20020421:1.1.1.1
	fgsch:1.1.1;
locks; strict;
comment	@# @;


1.3
date	2004.11.18.23.40.06;	author fgsch;	state dead;
branches;
next	1.2;

1.2
date	2002.05.04.09.14.01;	author fgsch;	state Exp;
branches;
next	1.1;

1.1
date	2002.04.21.21.39.56;	author fgsch;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.04.21.21.39.56;	author fgsch;	state Exp;
branches;
next	;


desc
@@


1.3
log
@remove binutils now that we have a recent and more closely tracked version.
if it's needed in the future, we can bring it back. pvalchev@@ ok.
@
text
@$OpenBSD: patch-bfd_elf_c,v 1.2 2002/05/04 09:14:01 fgsch Exp $
--- bfd/elf.c.orig	Thu Feb 14 01:12:45 2002
+++ bfd/elf.c	Sun Apr  7 18:27:48 2002
@@@@ -5096,7 +5096,9 @@@@ _bfd_elf_get_symtab_upper_bound (abfd)
   Elf_Internal_Shdr *hdr = &elf_tdata (abfd)->symtab_hdr;
 
   symcount = hdr->sh_size / get_elf_backend_data (abfd)->s->sizeof_sym;
-  symtab_size = (symcount - 1 + 1) * (sizeof (asymbol *));
+  symtab_size = (symcount + 1) * (sizeof (asymbol *));
+  if (symcount > 0)
+    symtab_size -= sizeof (asymbol *);
 
   return symtab_size;
 }
@@@@ -5116,7 +5118,9 @@@@ _bfd_elf_get_dynamic_symtab_upper_bound 
     }
 
   symcount = hdr->sh_size / get_elf_backend_data (abfd)->s->sizeof_sym;
-  symtab_size = (symcount - 1 + 1) * (sizeof (asymbol *));
+  symtab_size = (symcount + 1) * (sizeof (asymbol *));
+  if (symcount > 0)
+    symtab_size -= sizeof (asymbol *);
 
   return symtab_size;
 }
@


1.2
log
@here too. fix my bad.
@
text
@d1 1
a1 1
$OpenBSD: patch-bfd_elf_c,v 1.1.1.1 2002/04/21 21:39:56 fgsch Exp $
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d10 1
a10 1
+  if (symtab_size > 0)
d21 1
a21 1
+  if (symtab_size > 0)
@


1.1.1.1
log
@binutils 2.12 - GNU development tools.
@
text
@@
