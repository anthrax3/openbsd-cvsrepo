head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_2:1.1.1.1.0.4
	OPENBSD_6_2_BASE:1.1.1.1
	OPENBSD_6_1:1.1.1.1.0.2
	OPENBSD_6_1_BASE:1.1.1.1
	edd_20170204:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2017.02.04.12.40.43;	author edd;	state Exp;
branches
	1.1.1.1;
next	;
commitid	28LGG7FWFhnBmI5D;

1.1.1.1
date	2017.02.04.12.40.43;	author edd;	state Exp;
branches;
next	;
commitid	28LGG7FWFhnBmI5D;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD$
--- Makefile.orig	Sun Sep 18 21:09:16 2016
+++ Makefile	Thu Dec 29 15:48:41 2016
@@@@ -68,8 +68,14 @@@@ PROFOUT := $(OUTDIR)/gprof.txt
 TEST_FILTER_OUT := --coverage -ansi -std=c99
 
 .PHONY: all
-all: lib-bin test-bin
+all: dirs lib-bin test-bin
 
+.PHONY: dirs
+dirs:
+	mkdir -p $(BINDIR)/$(config)/src/.libs
+	mkdir -p $(BINDIR)/$(config)/test/.libs
+	mkdir -p $(BINDIR)/$(config)/test/deps/tap/.libs
+
 include .config/$(config).mk
 
 .PHONY: tools
@@@@ -109,19 +115,19 @@@@ compile_commands.json:
 
 .PHONY: install
 install: install-inc install-lib
-	$(LIBTOOL) --mode=finish '$(DESTDIR)$(LIBDIR)'
+	$(LIBTOOL) --mode=finish '$(LIBDIR)'
 
 .PHONY: install-inc
 install-inc: $(AMALG_H) mpack.pc.in
-	mkdir -p '$(DESTDIR)$(INCDIR)'
-	install -m644 $(AMALG_H) '$(DESTDIR)$(INCDIR)'
-	mkdir -p '$(DESTDIR)$(LIBDIR)/pkgconfig'
-	sed 's,@@VERSION@@,$(VERSION),;s,@@LIBDIR@@,$(LIBDIR),;s,@@INCDIR@@,$(INCDIR),' <mpack.pc.in >'$(DESTDIR)$(LIBDIR)/pkgconfig/mpack.pc'
+	mkdir -p '$(INCDIR)'
+	install -m644 $(AMALG_H) '$(INCDIR)'
+	mkdir -p '$(LIBDIR)/pkgconfig'
+	sed 's,@@VERSION@@,$(VERSION),;s,@@LIBDIR@@,$(LIBDIR),;s,@@INCDIR@@,$(INCDIR),' <mpack.pc.in >'$(LIBDIR)/pkgconfig/mpack.pc'
 
 .PHONY: install-lib
 install-lib: $(LIB)
-	mkdir -p '$(DESTDIR)$(LIBDIR)'
-	$(LIBTOOL) --mode=install cp $(LIB) '$(DESTDIR)$(LIBDIR)/$(LIBRARY)'
+	mkdir -p '$(LIBDIR)'
+	$(LIBTOOL) --mode=install cp $(LIB) '$(LIBDIR)/$(LIBRARY)'
 
 .PHONY: clean
 clean:
@


1.1.1.1
log
@Import devel/libmpack. Needed for neovim.

---8<---
libmpack is a small binary serialization/RPC library that implements both the
msgpack and msgpack-rpc specifications.
--->8---

OK jca@@ and with input from sthen@@. Many thanks.

@
text
@@
