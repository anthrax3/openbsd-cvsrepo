head	1.5;
access;
symbols
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.1.1.1.0.6
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.2
	OPENBSD_5_7_BASE:1.1.1.1
	chrisz_20141025:1.1.1.1
	chrisz:1.1.1;
locks; strict;
comment	@# @;


1.5
date	2016.07.06.16.11.52;	author krw;	state Exp;
branches;
next	1.4;
commitid	d6Wo64MrPlOXjEFK;

1.4
date	2016.07.05.16.24.46;	author krw;	state Exp;
branches;
next	1.3;
commitid	3qv1jpb4JLQVMcmI;

1.3
date	2016.06.23.19.23.53;	author krw;	state Exp;
branches;
next	1.2;
commitid	vwUgBiCmN1lWQqPh;

1.2
date	2015.08.30.15.57.25;	author avsm;	state Exp;
branches;
next	1.1;
commitid	bnKD0CKLggNOvVyJ;

1.1
date	2014.10.25.16.50.30;	author chrisz;	state Exp;
branches
	1.1.1.1;
next	;
commitid	mggUHKoCSw0bRQAI;

1.1.1.1
date	2014.10.25.16.50.30;	author chrisz;	state Exp;
branches;
next	;
commitid	mggUHKoCSw0bRQAI;


desc
@@


1.5
log
@Add comment to remind future generations that new versions mean build
dependents such as opam need a REVISION bump.

Requested by sthen@@
@
text
@# $OpenBSD: Makefile,v 1.4 2016/07/05 16:24:46 krw Exp $

COMMENT =	declarative definition of command line interfaces
CATEGORIES =	devel

# When V changes, remember to bump REVISION for build dependents like opam!
V =		0.9.8
NAME =		cmdliner
DISTNAME =	${NAME}-${V}
EXTRACT_SUFX =	.tbz
PKGNAME =	ocaml-${DISTNAME}
MASTER_SITES =	http://erratique.ch/software/${NAME}/releases/

HOMEPAGE =	http://erratique.ch/software/${NAME}


# BSD3
PERMIT_PACKAGE_CDROM =		Yes

MODULES =	lang/ocaml

BUILD_DEPENDS =	sysutils/findlib devel/ocaml-ocamlbuild
RUN_DEPENDS =	lang/ocaml

ALL_TARGET =	${NAME}.{cma,cmi,mli}
.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mocaml_native}
ALL_TARGET +=	${NAME}.{a,cmx,cmxa}
.if ${PROPERTIES:Mocaml_native_dynlink}
ALL_TARGET +=	${NAME}.cmxs
.endif
.endif


do-build:
	cd ${WRKSRC} && ocamlbuild ${ALL_TARGET}

do-install:
	env -i ${MAKE_ENV} ocamlfind install ${NAME} \
		${WRKSRC}/pkg/META \
		${ALL_TARGET:S|^|${WRKSRC}/_build/src/|}
	${INSTALL_DATA_DIR} ${PREFIX}/share/doc/ocaml-${NAME}/api
	${INSTALL_DATA} \
		${WRKDIST}/{README,CHANGES}.md \
		${PREFIX}/share/doc/ocaml-${NAME}/
	${INSTALL_DATA} ${WRKDIST}/doc/* ${PREFIX}/share/doc/ocaml-${NAME}/api/


.include <bsd.port.mk>
@


1.4
log
@Update to latest (0.9.8), the same that opam installs.

Bump opam REVISION.

ok anil@@ chrisz@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/06/23 19:23:53 krw Exp $
d6 1
@


1.3
log
@Stop building Ocaml's internal ocamlbuild and use the ocaml-ocamlbuild port
where needed.

The next step towards Ocaml 4.3.0.

Bulk build by sthen@@ identified several laggards which are included here.

ok anil@@ sthen@@ so final 4.3.0 polishing can be done in-tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2015/08/30 15:57:25 avsm Exp $
d6 1
a6 1
V =		0.9.7
a11 1
REVISION = 	0
@


1.2
log
@update to ocaml-cmdliner-0.9.7

ok jca@@, tested by krw@@ daniel@@ jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2014/10/25 16:50:30 chrisz Exp $
d12 1
d22 1
a22 1
BUILD_DEPENDS =	sysutils/findlib
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2014/08/27 08:05:17 chrisz Exp $
d6 1
a6 1
V =		0.9.5
@


1.1.1.1
log
@Import ocaml-cmdliner - dependency of OPAM


ok krw@@
@
text
@@
