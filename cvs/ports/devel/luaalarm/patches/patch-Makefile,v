head	1.4;
access;
symbols
	OPENBSD_6_0:1.4.0.18
	OPENBSD_6_0_BASE:1.4
	OPENBSD_5_9:1.4.0.14
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.16
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.4.0.12
	OPENBSD_5_7_BASE:1.4
	OPENBSD_5_6:1.4.0.10
	OPENBSD_5_6_BASE:1.4
	OPENBSD_5_5:1.4.0.8
	OPENBSD_5_5_BASE:1.4
	OPENBSD_5_4:1.4.0.6
	OPENBSD_5_4_BASE:1.4
	OPENBSD_5_3:1.4.0.4
	OPENBSD_5_3_BASE:1.4
	OPENBSD_5_2:1.4.0.2
	OPENBSD_5_2_BASE:1.4
	OPENBSD_5_1_BASE:1.3
	OPENBSD_5_1:1.3.0.20
	OPENBSD_5_0:1.3.0.18
	OPENBSD_5_0_BASE:1.3
	OPENBSD_4_9:1.3.0.16
	OPENBSD_4_9_BASE:1.3
	OPENBSD_4_8:1.3.0.14
	OPENBSD_4_8_BASE:1.3
	OPENBSD_4_7:1.3.0.12
	OPENBSD_4_7_BASE:1.3
	OPENBSD_4_6:1.3.0.10
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.3.0.8
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.6
	OPENBSD_4_4_BASE:1.3
	OPENBSD_4_3:1.3.0.4
	OPENBSD_4_3_BASE:1.3
	OPENBSD_4_2:1.3.0.2
	OPENBSD_4_2_BASE:1.3
	OPENBSD_4_1:1.2.0.2
	OPENBSD_4_1_BASE:1.2
	OPENBSD_4_0:1.1.1.1.0.4
	OPENBSD_4_0_BASE:1.1.1.1
	OPENBSD_3_9:1.1.1.1.0.2
	OPENBSD_3_9_BASE:1.1.1.1
	jolan_20060125:1.1.1.1
	jolan:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2012.07.10.15.22.44;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2007.06.04.19.39.59;	author pedro;	state Exp;
branches;
next	1.2;

1.2
date	2006.09.24.17.18.16;	author pedro;	state Exp;
branches;
next	1.1;

1.1
date	2006.01.25.23.32.13;	author jolan;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2006.01.25.23.32.13;	author jolan;	state Exp;
branches;
next	;


desc
@@


1.4
log
@handle multiple lua versions, for now everything builds with the "old" 5.1 in the new location.
use FLAVOR=lua52 to use lua 5.2 with these ports.
@
text
@$OpenBSD: patch-Makefile,v 1.3 2007/06/04 19:39:59 pedro Exp $
--- Makefile.orig	Wed Oct 11 16:13:03 2006
+++ Makefile	Sun Jul  8 19:12:08 2012
@@@@ -1,23 +1,23 @@@@
 # makefile for alarm library for Lua
 
 # change these to reflect your Lua installation
-LUA= /tmp/lhf/lua-5.0
-LUAINC= $(LUA)/include
+LUA= $(LOCALBASE)
+LUAINC= ${MODLUA_INCL_DIR}
 LUALIB= $(LUA)/lib
 LUABIN= $(LUA)/bin
 
 # no need to change anything below here
-CFLAGS= $(INCS) $(WARN) -O2 $G
+CFLAGS+= $(INCS) -fPIC -DPIC $G
 WARN= -pedantic -Wall
 INCS= -I$(LUAINC)
 
 MYNAME= alarm
 MYLIB= l$(MYNAME)
-T= $(MYLIB).so
+T= alarm.so
 OBJS= $(MYLIB).o
 TEST= test.lua
 
-all:	test
+all:	so
 
 test:	$T
 	$(LUABIN)/lua -l$(MYNAME) $(TEST)
@


1.3
log
@luaalarm-20061011, okay jolan@@
@
text
@d1 1
a1 1
$OpenBSD$
d3 1
a3 1
+++ Makefile	Mon Jun  4 21:01:57 2007
d9 1
d11 1
a11 1
 LUAINC= $(LUA)/include
@


1.2
log
@Add regression test
@
text
@d1 9
a9 5
$OpenBSD: patch-Makefile,v 1.1.1.1 2006/01/25 23:32:13 jolan Exp $
--- Makefile.orig	Sun Jun 29 21:44:09 2003
+++ Makefile	Sun Sep 24 14:10:52 2006
@@@@ -4,27 +4,27 @@@@
 LUA= /tmp/lhf/lua-5.0
d12 1
a12 2
-LUABIN= $(LUA)/bin
+LUABIN= $(LOCALBASE)/bin/lua
d16 3
a18 3
-WARN= -ansi -pedantic -Wall
-INCS= -I$(LUAINC)
+CFLAGS+= -I$(LOCALBASE)/include -fPIC -DPIC
d21 5
a25 7
-MYLIB= l$(MYNAME)
+MYLIB= alarm
 
-OBJS= $(MYLIB).o
+OBJS= lalarm.o
 
 T= $(MYLIB).so
d28 1
a28 12
+all:	$T
 
-test:	$T
-	$(LUABIN)/lua -l$(MYNAME) test.lua
+regress:
+	@@rm -f alarm.lua
+	@@echo "Running test..."; \
+	$(LUABIN) test.lua
 
 $T:	$(OBJS)
-	$(CC) -o $@@ -shared $(OBJS)
+	$(CC) -o $@@ -shared -fPIC $(OBJS)
d30 2
a31 2
 clean:
 	rm -f $(OBJS) $T core core.* a.out
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
d3 7
a9 3
+++ Makefile	Wed Jan 25 00:56:36 2006
@@@@ -7,24 +7,22 @@@@ LUALIB= $(LUA)/lib
 LUABIN= $(LUA)/bin
d19 1
a19 1
+MYLIB= lua$(MYNAME)
d29 6
a34 2
 test:	$T
 	$(LUABIN)/lua -l$(MYNAME) test.lua
@


1.1.1.1
log
@lalarm-20030709, alarm library for the lua language
@
text
@@
