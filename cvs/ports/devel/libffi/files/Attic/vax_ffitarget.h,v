head	1.3;
access;
symbols
	OPENBSD_5_7:1.2.0.8
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.6
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.2.0.4
	OPENBSD_5_5_BASE:1.2
	OPENBSD_5_4:1.2.0.2
	OPENBSD_5_4_BASE:1.2;
locks; strict;
comment	@ * @;


1.3
date	2015.04.06.12.11.40;	author jasper;	state dead;
branches;
next	1.2;
commitid	FjEEtUIlkhe7AFcI;

1.2
date	2013.07.14.15.29.33;	author miod;	state Exp;
branches;
next	1.1;

1.1
date	2013.05.01.10.11.54;	author miod;	state Exp;
branches;
next	;


desc
@@


1.3
log
@update to libffi-3.1 (not quite the newest, but better than what we currently have)

tested with gnome3 (heavily reliant on ffi/javascript/goi) for the better part of a year
@
text
@/*
 * Copyright (c) 2013 Miodrag Vallat.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * ``Software''), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED ``AS IS'', WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
 * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
 * TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
 * SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

/*
 * vax Foreign Function Interface
 */

#ifndef LIBFFI_TARGET_H
#define LIBFFI_TARGET_H

#ifndef LIBFFI_ASM
typedef unsigned long ffi_arg;
typedef signed long ffi_sarg;

typedef enum ffi_abi {
  FFI_FIRST_ABI = 0,
  FFI_ELFBSD,
  FFI_DEFAULT_ABI = FFI_ELFBSD,
  FFI_LAST_ABI = FFI_DEFAULT_ABI + 1
} ffi_abi;
#endif

/* ---- Definitions for closures ----------------------------------------- */

#define FFI_CLOSURES 1
#define FFI_TRAMPOLINE_SIZE 15
#define FFI_NATIVE_RAW_API 0

#endif
@


1.2
log
@Update the VAX code to work in the ELF world: add register prefixes, and switch
to the reentrant struct return convention (non-pcc).
Bump revision.
@
text
@@


1.1
log
@Fix m68k support (Linux/ELF uses a slightly different calling convention than
SysV/m68k, which NetBSD and OpenBSD follow).

Add m88k/ELF support.

Add vax/a.out support.

All tests from the libffi.call dejagnu testsuite pass on these three platforms.

ok jasper@@
@
text
@d37 2
a38 2
  FFI_AOUTBSD,	/* with pcc struct return sematics */
  FFI_DEFAULT_ABI = FFI_AOUTBSD,
d46 1
a46 1
#define FFI_TRAMPOLINE_SIZE 22
@

