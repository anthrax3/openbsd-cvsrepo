head	1.4;
access;
symbols
	OPENBSD_5_8:1.3.0.4
	OPENBSD_5_8_BASE:1.3
	OPENBSD_5_7:1.2.0.4
	OPENBSD_5_7_BASE:1.2
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2;
locks; strict;
comment	@# @;


1.4
date	2015.09.29.07.45.33;	author jasper;	state dead;
branches;
next	1.3;
commitid	sSAqNcxgNXBL8hNK;

1.3
date	2015.04.06.12.11.40;	author jasper;	state Exp;
branches;
next	1.2;
commitid	FjEEtUIlkhe7AFcI;

1.2
date	2014.06.04.17.40.27;	author jasper;	state Exp;
branches;
next	1.1;
commitid	1Q2YRNXbzPxCMReq;

1.1
date	2014.04.20.16.09.47;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update to libffi-3.2.1

(bulk) testing/ok aja@@, additional testing by tobiasu@@
@
text
@$OpenBSD: patch-Makefile_am,v 1.3 2015/04/06 12:11:40 jasper Exp $

Enable libffi on m88k and vax platforms.

--- Makefile.am.orig	Sun May 11 16:21:54 2014
+++ Makefile.am	Mon Sep 15 22:00:00 2014
@@@@ -169,6 +169,9 @@@@ endif
 if NIOS2
 nodist_libffi_la_SOURCES += src/nios2/sysv.S src/nios2/ffi.c
 endif
+if M88K
+nodist_libffi_la_SOURCES += src/m88k/ffi.c src/m88k/obsd.S
+endif
 if POWERPC
 nodist_libffi_la_SOURCES += src/powerpc/ffi.c src/powerpc/ffi_sysv.c src/powerpc/ffi_linux64.c src/powerpc/sysv.S src/powerpc/ppc_closure.S src/powerpc/linux64.S src/powerpc/linux64_closure.S
 endif
@@@@ -204,6 +207,9 @@@@ nodist_libffi_la_SOURCES += src/frv/eabi.S src/frv/ffi
 endif
 if S390
 nodist_libffi_la_SOURCES += src/s390/sysv.S src/s390/ffi.c
+endif
+if VAX
+nodist_libffi_la_SOURCES += src/vax/ffi.c src/vax/elfbsd.S
 endif
 if X86_64
 nodist_libffi_la_SOURCES += src/x86/ffi64.c src/x86/unix64.S src/x86/ffi.c src/x86/sysv.S
@


1.3
log
@update to libffi-3.1 (not quite the newest, but better than what we currently have)

tested with gnome3 (heavily reliant on ffi/javascript/goi) for the better part of a year
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_am,v 1.2 2014/06/04 17:40:27 jasper Exp $
@


1.2
log
@- update to libffi-3.0.13 (an update to 3.1 will be worked on shortly)
- sync homepage

tested by many on nearly every supported architecture, thanks!

feedback/ok miod@@
@
text
@d1 1
a1 1
$OpenBSD: patch-Makefile_am,v 1.1 2014/04/20 16:09:47 jasper Exp $
d5 5
a9 5
--- Makefile.am.orig	Sat Mar 16 12:52:11 2013
+++ Makefile.am	Sun Apr 20 18:16:13 2014
@@@@ -155,6 +155,9 @@@@ endif
 if MICROBLAZE
 nodist_libffi_la_SOURCES += src/microblaze/ffi.c src/microblaze/sysv.S
d15 1
a15 1
 nodist_libffi_la_SOURCES += src/powerpc/ffi.c src/powerpc/sysv.S src/powerpc/ppc_closure.S src/powerpc/linux64.S src/powerpc/linux64_closure.S
d17 1
a17 1
@@@@ -187,6 +190,9 @@@@ nodist_libffi_la_SOURCES += src/frv/eabi.S src/frv/ffi
@


1.1
log
@patch and do the auto-dance to make merging with newer versions a lot easier.
@
text
@d1 1
a1 1
$OpenBSD$
d5 5
a9 5
--- Makefile.am.orig	Sun Apr 20 17:37:54 2014
+++ Makefile.am	Sun Apr 20 17:39:31 2014
@@@@ -127,6 +127,9 @@@@ endif
 if M68K
 nodist_libffi_la_SOURCES += src/m68k/ffi.c src/m68k/sysv.S
d17 1
a17 1
@@@@ -153,6 +156,9 @@@@ nodist_libffi_la_SOURCES += src/frv/eabi.S src/frv/ffi
@

