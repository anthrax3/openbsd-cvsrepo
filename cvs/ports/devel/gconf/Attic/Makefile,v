head	1.27;
access;
symbols
	OPENBSD_4_1:1.25.0.2
	OPENBSD_4_1_BASE:1.25
	OPENBSD_4_0:1.23.0.2
	OPENBSD_4_0_BASE:1.23
	OPENBSD_3_9:1.22.0.2
	OPENBSD_3_9_BASE:1.22
	OPENBSD_3_8:1.19.0.4
	OPENBSD_3_8_BASE:1.19
	OPENBSD_3_7:1.19.0.2
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.17.0.6
	OPENBSD_3_6_BASE:1.17
	OPENBSD_3_5:1.17.0.4
	OPENBSD_3_5_BASE:1.17
	OPENBSD_3_4:1.17.0.2
	OPENBSD_3_4_BASE:1.17
	OPENBSD_3_3:1.16.0.2
	OPENBSD_3_3_BASE:1.16
	OPENBSD_3_2:1.15.0.2
	OPENBSD_3_2_BASE:1.15
	OPENBSD_3_1:1.11.0.2
	OPENBSD_3_1_BASE:1.11
	OPENBSD_3_0:1.7.0.2
	OPENBSD_3_0_BASE:1.7
	gconf-1_0_1:1.1.1.1
	todd:1.1.1;
locks; strict;
comment	@# @;


1.27
date	2007.06.01.15.26.31;	author jasper;	state dead;
branches;
next	1.26;

1.26
date	2007.04.14.21.20.19;	author sturm;	state Exp;
branches;
next	1.25;

1.25
date	2006.11.11.21.04.27;	author steven;	state Exp;
branches;
next	1.24;

1.24
date	2006.10.28.11.19.20;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2006.08.01.22.46.16;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2006.01.06.17.51.01;	author bernd;	state Exp;
branches;
next	1.21;

1.21
date	2005.11.03.18.28.55;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2005.09.06.03.22.59;	author marcm;	state Exp;
branches;
next	1.19;

1.19
date	2005.01.27.09.56.40;	author alek;	state Exp;
branches;
next	1.18;

1.18
date	2004.11.23.11.22.01;	author espie;	state Exp;
branches;
next	1.17;

1.17
date	2003.08.21.19.25.32;	author pvalchev;	state Exp;
branches;
next	1.16;

1.16
date	2002.12.01.19.59.31;	author marcm;	state Exp;
branches;
next	1.15;

1.15
date	2002.09.20.08.15.15;	author nino;	state Exp;
branches;
next	1.14;

1.14
date	2002.09.14.23.47.49;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2002.08.30.19.42.52;	author nino;	state Exp;
branches;
next	1.12;

1.12
date	2002.05.13.18.50.39;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2002.03.25.17.18.37;	author nino;	state Exp;
branches;
next	1.10;

1.10
date	2001.11.19.02.50.34;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	2001.11.15.01.22.02;	author pvalchev;	state Exp;
branches;
next	1.8;

1.8
date	2001.11.13.14.04.41;	author wilfried;	state Exp;
branches;
next	1.7;

1.7
date	2001.10.07.20.55.10;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2001.09.20.19.23.32;	author naddy;	state Exp;
branches;
next	1.5;

1.5
date	2001.09.20.18.39.12;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2001.09.18.14.22.14;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.09.14.14.41.29;	author todd;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.13.21.18.43;	author todd;	state Exp;
branches;
next	1.1;

1.1
date	2001.09.13.20.52.08;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.09.13.20.52.08;	author todd;	state Exp;
branches;
next	;


desc
@@


1.27
log
@remove obsolete gnome1 stufF
@
text
@# $OpenBSD: Makefile,v 1.26 2007/04/14 21:20:19 sturm Exp $

COMMENT=		"configuration database system written for GNOME"

DISTNAME=		GConf-1.0.9
PKGNAME=		${DISTNAME:L}p2
SHARED_LIBS +=	gconf-1              1.4      # .1.4
SHARED_LIBS +=	gconf-gtk-1          1.0      # .1.0

CATEGORIES=		devel x11/gnome

HOMEPAGE=		http://www.gnome.org/projects/gconf/

MASTER_SITES=		${MASTER_SITE_GNOME:=sources/GConf/1.0/}
EXTRACT_SUFX=           .tar.bz2

MODULES=		devel/gettext
LIB_DEPENDS=		oaf.::x11/gnome/oaf \
			xml.>=9::textproc/libxml1 \
			gtk.>=1,gdk.>=1::x11/gtk+

# GPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
WANTLIB=		IIOP ORBit ORBitCosNaming ORBitutil \
			X11 Xext Xi c gdk glib gmodule gtk m \
			Xau Xdmcp popt wrap z

DEFAULT_GCONF_SOURCE=	xml::/var/db/gconf/gconf.xml.defaults

USE_X11=		Yes
USE_LIBTOOL=		Yes
SEPARATE_BUILD=		concurrent
AUTOCONF_VERSION=	2.52
CONFIGURE_STYLE= 	autoconf
CONFIGURE_ARGS+= 	${CONFIGURE_SHARED}
CONFIGURE_ARGS+=	--enable-gconf-source=${DEFAULT_GCONF_SOURCE}
CONFIGURE_ARGS+=	--disable-guile
CONFIGURE_ARGS+=	--disable-db3
CONFIGURE_ARGS+=	--disable-oaftest
CONFIGURE_ENV=  	CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${WRKBUILD}/gconf/.libs -L${LOCALBASE}/lib" \
			XML_CONFIG="${LOCALBASE}/bin/xml-config"

post-install:
	@@${INSTALL_DATA_DIR} ${PREFIX}/share/examples/gconf; \
	cp -Rp ${WRKINST}/${SYSCONFDIR}/* ${PREFIX}/share/examples/gconf;

.include <bsd.port.mk>
@


1.26
log
@WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/11/11 21:04:27 steven Exp $
@


1.25
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2006/10/28 11:19:20 espie Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:L}p1
d29 1
a29 1
			popt wrap z
@


1.24
log
@a few more SHARED_LIBS reformat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2006/08/01 22:46:16 espie Exp $
d33 1
@


1.23
log
@new libspecs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/01/06 17:51:01 bernd Exp $
d7 2
a8 2
SHARED_LIBS=		gconf-1		1.4 \
			gconf-gtk-1	1.0
@


1.22
log
@- SHARED_LIBS, USE_LIBTOOL
- regen PLISTs with new gettext
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/11/03 18:28:55 naddy Exp $
d19 2
a20 2
			xml.9::textproc/libxml1 \
			gtk.1,gdk.1::x11/gtk+
@


1.21
log
@Always explicitly set the AUTOCONF_VERSION to use.  In some cases
the default was not appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/09/06 03:22:59 marcm Exp $
d6 4
a9 1
PKGNAME=		${DISTNAME:L}p0
d33 1
@


1.20
log
@Also part of Gnome1, sorta.  ports@@ maintainer now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2005/01/27 09:56:40 alek Exp $
d31 1
@


1.19
log
@- X11/gnome/libs isn't needed here
- Use devel/gettext MODULE
- Fix WANTLIB

ok marcm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2004/11/23 11:22:01 espie Exp $
a9 1
MAINTAINER=		Marc Matteo <marcm@@openbsd.org>
@


1.18
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2003/08/21 19:25:32 pvalchev Exp $
d6 1
a6 1
PKGNAME=		${DISTNAME:L}
d15 1
d18 1
a18 1
			gnome.36::x11/gnome/libs
d26 1
a26 1
			X11 Xext Xi c gdk glib gmodule gtk iconv intl m \
@


1.17
log
@disable oaf test, as it's busted in certain cases (treats warnings as errors),
and it's basically useless anyway; ok maintainer marcm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2002/12/01 19:59:31 marcm Exp $
d24 3
@


1.16
log
@Take maintainership.

ok nino@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2002/09/20 08:15:15 nino Exp $
d33 1
@


1.15
log
@Update email and MASTER_SITES, zap NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2002/09/14 23:47:49 naddy Exp $
d10 1
a10 1
MAINTAINER=		Nils Nordman <nino@@openbsd.org>
@


1.14
log
@Use standard category name.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2002/08/30 19:42:52 nino Exp $
d12 1
a12 1
MASTER_SITES=		${MASTER_SITE_GNOME:=stable/sources/GConf/}
@


1.13
log
@-update to 1.0.9
-move the default databases to /var/db.

From Marc Matteo <marcm@@lectroid.net>

-cleanup: remove useless db3 and guile flavors.

NOTE: This is one of the times you really need to heed the install
notice. In particular, /etc/gconf/1/path should be updated to reflect
the new location for the database.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2002/05/13 18:50:39 espie Exp $
d7 1
a7 1
CATEGORIES=		devel gnome
@


1.12
log
@Kill a few SUBDIR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2002/03/25 17:18:37 nino Exp $
d4 2
a5 2
V=			1.0.7
DISTNAME=		GConf-${V}
d7 4
a10 4
CATEGORIES=		devel
NEED_VERSION=   	1.490
HOMEPAGE=		http://www.gnome.org
MAINTAINER=		Nils Nordman <nino@@nforced.com>
a18 3
FLAVORS= 		guile db3
FLAVOR?=

d25 2
a27 1
USE_X11=		Yes
d30 3
a36 14
.if ${FLAVOR:L:Mguile}
BUILD_DEPENDS+= 	:guile-*:lang/guile
RUN_DEPENDS+= 		:guile-*:lang/guile
.else
CONFIGURE_ENV+= 	GUILE_CONFIG=/usr/bin/false
.endif

.if ${FLAVOR:L:Mdb3}
LIB_DEPENDS+= 		db::databases/db
CONFIGURE_ARGS+=	--enable-db3
.else
CONFIGURE_ARGS+=	--disable-db3
.endif

a41 8

.if ${FLAVOR:L:Mdb3}
.if !defined(NO_SHARED_LIBS)
SED_PLIST+=-e '/%%SHARED-db3%%/r${PKGDIR}/PFRAG.db3.shared' -e '//d'
.else
SED_PLIST+=-e '/%%SHARED-db3%%/d'
.endif
.endif
@


1.11
log
@Better libtool patch for ELF arches from lebel@@. It still has linking
issues though for at least macppc.

Remove pre-build check for existing GConf and modify CONFIGURE_ENV to
fool libtool instead.

Ok by lebel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2001/11/19 02:50:34 brad Exp $
d12 1
a12 2
MASTER_SITES=		${MASTER_SITE_GNOME}
MASTER_SITE_SUBDIR= 	stable/sources/GConf
@


1.10
log
@- better PKGNAME
- pre-extract -> pre-build
--
From: maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2001/11/15 01:22:02 pvalchev Exp $
d17 1
d34 2
a35 1
			LDFLAGS="-L${LOCALBASE}/lib"
a49 10

pre-build:
	@@if pkg dependencies check gconf-\*; then \
                if pkg dependencies check ${DISTNAME}; then \
                        :; \
                else \
                        echo 1>&2 "Error: you must remove your old GConf first"; \
                        exit 1; \
                fi; \
        fi;
@


1.9
log
@RUN_DEPENDS specs; from nino@@nforced.com
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2001/11/13 14:04:41 wilfried Exp $
d6 1
d49 2
a50 2
pre-extract:
	@@if pkg dependencies check GConf-\*; then \
@


1.8
log
@Update to GConf-1.0.7, from maintainer
* Better compability for installing gconf 1 & 2 side by side
* Better UTF8 handling
* Lots of compilation and configuring fixes
* Some portability fixes
* Plus a lot of other fixes, see Changelog for full description
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2001/09/20 19:23:32 naddy Exp $
d35 2
a36 2
BUILD_DEPENDS+= 	guile::lang/guile
RUN_DEPENDS+= 		guile::lang/guile
@


1.7
log
@* Use in-tree libtool patches
* Bump NEED_VERSION
* Fix and improve CATEGORIES
Submitted by maintainer Nils Nordman <nino@@nforced.com>
@
text
@d4 1
a4 1
V=			1.0.1
d7 1
a7 1
NEED_VERSION=   	1.473
d13 1
a13 4

PATCH_LIST=             ${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltconfig \
                        ${PORTSDIR}/infrastructure/patches/patch-lt1.3.5-ltmain_sh \
                        patch-*
d21 1
d27 1
d44 2
d48 10
d60 1
a60 2
	cp -rp ${WRKINST}/${SYSCONFDIR}/* ${PREFIX}/share/examples/gconf; \
	mv ${PREFIX}/share/examples/gconf/gconf/1/path.example ${PREFIX}/share/examples/gconf/gconf/1/path
d63 8
@


1.6
log
@* Use variables instead of hardcoded prefixes.
* Take care to set a sane PATH.
* Add set -e
* Copy example files into ${PREFIX}/share/examples/PORTNAME.
* Replace PKGNAME with P_NAME in INSTALL/DEINSTALL scripts, unclear
  since it already exists in the Makefile with a different value.
* Change output of INSTALL/DEINSTALL to be more like other scripts
  found in the tree(suggested by heko@@).

From maintainer Nils Nordman <nino@@nforced.com>.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2001/09/20 18:39:12 naddy Exp $
d7 1
a7 1
NEED_VERSION=   	1.455
d13 4
@


1.5
log
@remove gratuitous gmake dependencies
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2001/09/18 14:22:14 naddy Exp $
d44 3
a46 3
	${INSTALL_DATA_DIR} ${PREFIX}/share/gconf; \
	cp -r ${PREFIX}/../../etc/* ${PREFIX}/share/gconf; \
	mv ${PREFIX}/share/gconf/gconf/1/path.example ${PREFIX}/share/gconf/gconf/1/path
@


1.4
log
@gettext fixes, improve db3 handling, miscellaneous clean-ups
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/09/14 14:41:29 todd Exp $
a25 1
USE_GMAKE=		Yes
@


1.3
log
@crank NEED_VERSION= because these require current
use ${HOMEPAGE} in pkg/DESCR
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/09/13 21:18:43 todd Exp $
d27 1
a27 1
CONFIGURE_STYLE= 	gnu
d41 1
a41 1
CONFIGURE_ENV+= 	BDB_LIBS="-ldb"
d45 1
a45 1
	install -d ${PREFIX}/share/gconf; \
@


1.2
log
@oaf depend error, my fault
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/09/13 20:52:08 todd Exp $
d7 1
a7 1
NEED_VERSION=   	1.384
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d14 1
a14 1
LIB_DEPENDS=		oaf.::devel/oaf \
@


1.1.1.1
log
@configuration database system written for GNOME
@
text
@@
