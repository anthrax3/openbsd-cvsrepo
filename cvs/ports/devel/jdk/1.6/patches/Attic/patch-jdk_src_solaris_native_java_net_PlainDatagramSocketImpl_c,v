head	1.2;
access;
symbols
	OPENBSD_5_6:1.1.0.8
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.6
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.4
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.2
	OPENBSD_5_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2014.11.20.23.14.58;	author kurt;	state dead;
branches;
next	1.1;
commitid	OqMxfbqOene3RIIF;

1.1
date	2013.02.02.17.41.18;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove 1.6 from cvs. It was unlinked last release. okay sthen@@
@
text
@$OpenBSD: patch-jdk_src_solaris_native_java_net_PlainDatagramSocketImpl_c,v 1.1 2013/02/02 17:41:18 kurt Exp $
--- jdk/src/solaris/native/java/net/PlainDatagramSocketImpl.c.orig	Fri Feb  1 11:16:47 2013
+++ jdk/src/solaris/native/java/net/PlainDatagramSocketImpl.c	Fri Feb  1 12:52:14 2013
@@@@ -1338,7 +1338,7 @@@@ static void setMulticastInterface(JNIEnv *env, jobject
         /*
          * value is an InetAddress.
          */
-#ifdef __solaris__
+#if defined(__solaris__) || defined(_ALLBSD_SOURCE)
         if (ipv6_available()) {
             mcast_set_if_by_addr_v6(env, this, fd, value);
         } else {
@@@@ -1357,7 +1357,7 @@@@ static void setMulticastInterface(JNIEnv *env, jobject
         /*
          * value is a NetworkInterface.
          */
-#ifdef __solaris__
+#if defined(__solaris__) || defined(_ALLBSD_SOURCE)
         if (ipv6_available()) {
             mcast_set_if_by_if_v6(env, this, fd, value);
         } else {
@@@@ -1434,7 +1434,7 @@@@ static void mcast_set_loop_v6(JNIEnv *env, jobject thi
  */
 static void setMulticastLoopbackMode(JNIEnv *env, jobject this, int fd,
                                   jint opt, jobject value) {
-#ifdef __solaris__
+#if defined(__solaris__) || defined(_ALLBSD_SOURCE)
     if (ipv6_available()) {
         mcast_set_loop_v6(env, this, fd, value);
     } else {
@@@@ -2002,7 +2002,7 @@@@ Java_java_net_PlainDatagramSocketImpl_setTimeToLive(JN
         fd = (*env)->GetIntField(env, fdObj, IO_fd_fdID);
     }
     /* setsockopt to be correct ttl */
-#ifdef __solaris__
+#if defined(__solaris__) || defined(_ALLBSD_SOURCE)
     if (ipv6_available()) {
         setHopLimit(env, fd, ttl);
     } else {
@


1.1
log
@- Fix MulticastSocket.setInterface(). Report and fix from Oliver
  Lehmann on bsd-port list.
@
text
@d1 1
a1 1
$OpenBSD$
@

