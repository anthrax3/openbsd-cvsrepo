head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2007.01.23.14.14.37;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2006.11.17.20.19.33;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to patchset 4 which includes a security fix for CVE-2007-0243

Buffer overflow allows applets to gain privileges via a GIF image with a
block with a 0 width field, which triggers memory corruption and possible
execution of arbitrary code.

Also included in patchset 4 are corrections for building the jdk on amd64
systems with 4G+ memory and the inclusion of the mozilla headers needed to
build the plugin without an external dependency on the old mozilla suite.
@
text
@$OpenBSD: patch-j2se_src_share_native_sun_awt_cmm_thread_c,v 1.1 2006/11/17 20:19:33 kurt Exp $
--- j2se/src/share/native/sun/awt/cmm/thread.c.orig	Wed Nov 15 11:53:03 2006
+++ j2se/src/share/native/sun/awt/cmm/thread.c	Wed Nov 15 13:55:54 2006
@@@@ -695,8 +695,7 @@@@ int				retVal;
 
 	if (NULL == flags) { }
 
-	pthread_attr_init(&attr);
-	retVal = pthread_create (&thread, &attr,
+	retVal = pthread_create (&thread, NULL,
 				startFunc, arg);
 	if (0 != retVal) {
 		return (0);
@


1.1
log
@- attempt to fully send/receive packets in socketTransport.c by handling
EINTR and continue to send/receive the rest of the packet. corrects:
"ERROR: transport error 202: recv error: Interrupted system call
["transport.c",L41]" seen while debugging large projects in eclipse.
from niklas@@
- Prevent problems opening RandomAccessFile with "rws" as the mode by
defining O_SYNC and O_DSYNC if they aren't defined.  In particular we
were previously defining O_SYNC bogusly to the same value as O_EXCL.
from FreeBSD
- close two more pthread_addr leaks
@
text
@d1 1
a1 1
$OpenBSD$
@

