head	1.4;
access;
symbols
	OPENBSD_4_5:1.3.0.6
	OPENBSD_4_5_BASE:1.3
	OPENBSD_4_4:1.3.0.2
	OPENBSD_4_4_BASE:1.3
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	kurt_20050525:1.1.1.1
	kurt:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2009.03.25.22.11.16;	author kurt;	state dead;
branches;
next	1.3;

1.3
date	2008.03.17.03.21.25;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2005.11.22.14.43.05;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2005.05.25.17.27.53;	author kurt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.25.17.27.53;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.4
log
@- update to patchset 9 1.5.0 u16
- remove patches included in patchset 9
- fix native_bootstrap BUILD_DEPENDS
- chase plist changes
@
text
@$OpenBSD: patch-j2se_src_solaris_native_com_sun_management_UnixOperatingSystem_md_c,v 1.3 2008/03/17 03:21:25 kurt Exp $
--- j2se/src/solaris/native/com/sun/management/UnixOperatingSystem_md.c.orig	Wed Feb 27 08:06:56 2008
+++ j2se/src/solaris/native/com/sun/management/UnixOperatingSystem_md.c	Thu Feb 28 10:26:32 2008
@@@@ -324,13 +324,15 @@@@ Java_com_sun_management_UnixOperatingSystem_getTotalPh
   (JNIEnv *env, jobject mbean)
 {
 #ifdef _ALLBSD_SOURCE
+#ifdef HW_PHYSMEM64
+    int64_t result;
+    int mib[2] = { CTL_HW, HW_PHYSMEM64 };
+#else
     unsigned long result;
-    int mib[2];
-    int rlen;
+    int mib[2] = { CTL_HW, HW_PHYSMEM };
+#endif
+    size_t rlen = sizeof(result);
 
-    mib[0] = CTL_HW;
-    mib[1] = HW_PHYSMEM;
-    rlen = sizeof(result);
     if (sysctl(mib, 2, &result, &rlen, NULL, 0) == -1)
 	result = 256 * MB;
 
@


1.3
log
@- use HW_{USER|PHYS}MEM64. okay naddy@@
- on amd64 only do implicit null optimizations on offsets landing in the
first page of memory.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@- update to patchset 2. mostly removing patches now included in patchset.
- link awt_robot with -pthread
- disable a runtime Motif version check that incorrectly thought we were
using Motif 1.2 based on Xm major version. problem reported by Laurence
Tratt
- plugin and webstart comming later
@
text
@d1 17
a17 4
$OpenBSD: patch-j2se_src_solaris_native_com_sun_management_UnixOperatingSystem_md_c,v 1.1 2005/05/25 17:27:53 kurt Exp $
--- j2se/src/solaris/native/com/sun/management/UnixOperatingSystem_md.c.orig	Wed Feb 23 12:09:10 2005
+++ j2se/src/solaris/native/com/sun/management/UnixOperatingSystem_md.c	Wed Feb 23 12:10:42 2005
@@@@ -283,7 +283,7 @@@@ Java_com_sun_management_UnixOperatingSys
d19 3
a21 4
     mib[0] = CTL_HW;
     mib[1] = HW_PHYSMEM;
-    rlen = sizof(result);
+    rlen = sizeof(result);
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@initial import of 1.5
@
text
@@
