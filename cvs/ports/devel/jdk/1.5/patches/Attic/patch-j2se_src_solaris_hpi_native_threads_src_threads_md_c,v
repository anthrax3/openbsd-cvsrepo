head	1.4;
access;
symbols
	OPENBSD_3_8:1.1.1.1.0.2
	OPENBSD_3_8_BASE:1.1.1.1
	kurt_20050525:1.1.1.1
	kurt:1.1.1;
locks; strict;
comment	@# @;


1.4
date	2007.01.23.14.14.37;	author kurt;	state dead;
branches;
next	1.3;

1.3
date	2006.11.17.20.19.33;	author kurt;	state Exp;
branches;
next	1.2;

1.2
date	2005.11.22.14.43.05;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2005.05.25.17.27.53;	author kurt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.05.25.17.27.53;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to patchset 4 which includes a security fix for CVE-2007-0243

Buffer overflow allows applets to gain privileges via a GIF image with a
block with a 0 width field, which triggers memory corruption and possible
execution of arbitrary code.

Also included in patchset 4 are corrections for building the jdk on amd64
systems with 4G+ memory and the inclusion of the mozilla headers needed to
build the plugin without an external dependency on the old mozilla suite.
@
text
@$OpenBSD: patch-j2se_src_solaris_hpi_native_threads_src_threads_md_c,v 1.3 2006/11/17 20:19:33 kurt Exp $
--- j2se/src/solaris/hpi/native_threads/src/threads_md.c.orig	Wed Nov 15 11:53:03 2006
+++ j2se/src/solaris/hpi/native_threads/src/threads_md.c	Wed Nov 15 13:55:54 2006
@@@@ -544,6 +544,7 @@@@ sysThreadCreate(sys_thread_t **tidP, lon
     if (profiler_on)
 	pthread_attr_setscope(&attr, PTHREAD_SCOPE_SYSTEM);
     err = pthread_create(&tid->sys_thread, &attr, _start, (void *)tid);
+    pthread_attr_destroy(&attr);
 
 #ifndef USE_MUTEX_HANDSHAKE
     if (err == 0) {
@


1.3
log
@- attempt to fully send/receive packets in socketTransport.c by handling
EINTR and continue to send/receive the rest of the packet. corrects:
"ERROR: transport error 202: recv error: Interrupted system call
["transport.c",L41]" seen while debugging large projects in eclipse.
from niklas@@
- Prevent problems opening RandomAccessFile with "rws" as the mode by
defining O_SYNC and O_DSYNC if they aren't defined.  In particular we
were previously defining O_SYNC bogusly to the same value as O_EXCL.
from FreeBSD
- close two more pthread_addr leaks
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@- update to patchset 2. mostly removing patches now included in patchset.
- link awt_robot with -pthread
- disable a runtime Motif version check that incorrectly thought we were
using Motif 1.2 based on Xm major version. problem reported by Laurence
Tratt
- plugin and webstart comming later
@
text
@d1 8
a8 16
$OpenBSD: patch-j2se_src_solaris_hpi_native_threads_src_threads_md_c,v 1.1 2005/05/25 17:27:53 kurt Exp $
--- j2se/src/solaris/hpi/native_threads/src/threads_md.c.orig	Tue Jan 25 22:14:52 2005
+++ j2se/src/solaris/hpi/native_threads/src/threads_md.c	Tue Jan 25 22:16:09 2005
@@@@ -83,9 +83,14 @@@@ static thread_key_t tid_key = (thread_ke
 #ifdef __linux__
 thread_key_t intrJmpbufkey;
 static sigset_t squm = {{sigmask(SIGUSR1), 0, 0, 0}};
+#elif defined(__OpenBSD__)
+thread_key_t sigusr1Jmpbufkey;
+sigset_t sigusr1Mask = sigmask(SIGUSR1);
+static sigset_t squm = sigmask(SIGUSR1);
 #else
 thread_key_t sigusr1Jmpbufkey;
 sigset_t sigusr1Mask = {{sigmask(SIGUSR1), 0, 0, 0}};
+static sigset_t squm = {{sigmask(SIGUSR1), 0, 0, 0}};
 #endif
d10 2
a11 11
 /*
@@@@ -156,9 +161,6 @@@@ sysThreadCheckStack() 
     }
 }
 
-#ifndef __linux__
-static sigset_t squm = {{sigmask(SIGUSR1), 0, 0, 0}};
-#endif
 
 
 /* 
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
$OpenBSD$
@


1.1.1.1
log
@initial import of 1.5
@
text
@@
