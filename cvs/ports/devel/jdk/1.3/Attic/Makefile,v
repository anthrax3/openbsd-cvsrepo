head	1.26;
access;
symbols
	OPENBSD_4_5:1.25.0.8
	OPENBSD_4_5_BASE:1.25
	OPENBSD_4_4:1.25.0.4
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.25.0.2
	OPENBSD_4_3_BASE:1.25
	OPENBSD_4_2:1.24.0.2
	OPENBSD_4_2_BASE:1.24
	OPENBSD_4_1:1.23.0.2
	OPENBSD_4_1_BASE:1.23
	OPENBSD_4_0:1.19.0.2
	OPENBSD_4_0_BASE:1.19
	OPENBSD_3_9:1.18.0.2
	OPENBSD_3_9_BASE:1.18
	OPENBSD_3_8:1.14.0.2
	OPENBSD_3_8_BASE:1.14
	OPENBSD_3_7:1.10.0.2
	OPENBSD_3_7_BASE:1.10
	OPENBSD_3_6:1.6.0.2
	OPENBSD_3_6_BASE:1.6
	OPENBSD_3_5:1.4.0.2
	OPENBSD_3_5_BASE:1.4
	kmiller_20040129:1.1.1.1
	pvalchev:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2009.03.18.01.45.37;	author kurt;	state dead;
branches;
next	1.25;

1.25
date	2007.09.16.02.52.59;	author merdely;	state Exp;
branches;
next	1.24;

1.24
date	2007.07.18.17.53.07;	author kurt;	state Exp;
branches;
next	1.23;

1.23
date	2007.01.28.04.46.48;	author kurt;	state Exp;
branches;
next	1.22;

1.22
date	2006.11.22.14.58.03;	author kurt;	state Exp;
branches;
next	1.21;

1.21
date	2006.11.15.17.27.40;	author kurt;	state Exp;
branches;
next	1.20;

1.20
date	2006.11.11.21.04.27;	author steven;	state Exp;
branches;
next	1.19;

1.19
date	2006.03.20.14.40.24;	author kurt;	state Exp;
branches
	1.19.2.1;
next	1.18;

1.18
date	2006.02.01.01.04.29;	author kurt;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2006.01.18.15.12.55;	author kurt;	state Exp;
branches;
next	1.16;

1.16
date	2005.10.21.22.36.30;	author kurt;	state Exp;
branches;
next	1.15;

1.15
date	2005.09.16.09.51.26;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	2005.08.10.22.36.26;	author kurt;	state Exp;
branches;
next	1.13;

1.13
date	2005.07.14.17.29.08;	author kurt;	state Exp;
branches;
next	1.12;

1.12
date	2005.06.14.20.10.58;	author espie;	state Exp;
branches;
next	1.11;

1.11
date	2005.06.03.17.27.53;	author kurt;	state Exp;
branches;
next	1.10;

1.10
date	2005.02.20.11.18.55;	author sturm;	state Exp;
branches
	1.10.2.1;
next	1.9;

1.9
date	2004.12.17.18.22.48;	author kurt;	state Exp;
branches;
next	1.8;

1.8
date	2004.11.23.21.34.27;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2004.10.12.20.46.22;	author naddy;	state Exp;
branches;
next	1.6;

1.6
date	2004.08.14.21.50.38;	author naddy;	state Exp;
branches
	1.6.2.1;
next	1.5;

1.5
date	2004.06.02.15.23.20;	author sturm;	state Exp;
branches;
next	1.4;

1.4
date	2004.02.04.09.17.37;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2004.02.03.03.30.55;	author pvalchev;	state Exp;
branches;
next	1.2;

1.2
date	2004.01.29.22.17.09;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2004.01.29.22.02.18;	author pvalchev;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2004.01.29.22.02.18;	author pvalchev;	state Exp;
branches;
next	;

1.6.2.1
date	2005.09.04.20.18.12;	author sturm;	state Exp;
branches;
next	;

1.10.2.1
date	2005.09.04.20.24.36;	author sturm;	state Exp;
branches;
next	;

1.18.2.1
date	2007.01.31.14.56.15;	author kurt;	state Exp;
branches;
next	;

1.19.2.1
date	2007.02.08.20.24.14;	author sturm;	state Exp;
branches;
next	;


desc
@@


1.26
log
@remove 1.3 and 1.4 as per plan made last June
@
text
@# $OpenBSD: Makefile,v 1.25 2007/09/16 02:52:59 merdely Exp $
# $FreeBSD: ports/java/jdk12/Makefile,v 1.11 2002/08/19 20:47:04 glewis Exp $

ONLY_FOR_ARCHS= 	arm i386 powerpc sparc

COMMENT-main=		Java2(TM) Standard Edition Dev Kit v${V}
COMMENT-jre=		Java2(TM) Standard Edition Runtime Environment v${V}
V=			1.3.1
DISTNAME=		j2sdk-1_3_1-src
PKGNAME=		jdk-${V}
PKGNAME-main=		jdk-${V}p11
PKGNAME-jre=		jre-${V}p11

CATEGORIES=		devel/jdk java

MULTI_PACKAGES= 	-main -jre

# wwws is not a typo in the following:
HOMEPAGE=		http://wwws.sun.com/software/communitysource/j2se/java2/index.html

MAINTAINER=		Kurt Miller <kurt@@openbsd.org>

DISTFILES=		j2sdk-1_3_1-src.tar.gz
DISTFILES+=		bsd-jdk131-patches-9.tar.gz

# Sun Community Source License
# http://www.sun.com/software/communitysource/j2se/java2/license.html
PERMIT_PACKAGE_CDROM=	SCSL
PERMIT_PACKAGE_FTP=	SCSL
PERMIT_DISTFILES_CDROM= SCSL
PERMIT_DISTFILES_FTP=	SCSL

# TCK (Technology Compatibility Kit) covered by yet another license...
NO_REGRESS=		yes

VMEM_WARNING=		Yes
BUILD_DEPENDS=		:gtar-*:archivers/gtar \
			:zip-*:archivers/zip
RUN_DEPENDS=		:zip-*:archivers/zip \
			:ghostscript-fonts-*:print/ghostscript/gnu-fonts
USE_MOTIF=		openmotif

USE_X11=		Yes
USE_GMAKE=		Yes
TAR=			${LOCALBASE}/bin/gtar

MAKE_ENV=		ALT_MOTIF_DIR="${LOCALBASE}" \
			OPENWINHOME="${X11BASE}" \
			OTHER_CFLAGS="${CFLAGS}" \
			BUILD_NUMBER="`whoami`-`date '+%Y-%m-%d-%H:%M'`"

# Error message for distfile.
FETCH_MANUALLY=	"You must manually fetch the distribution files, place"
FETCH_MANUALLY+="them in ${FULLDISTDIR} and then run make again."
FETCH_MANUALLY+="Get the SCSL source file:"
FETCH_MANUALLY+="    j2sdk-1_3_1-src.tar.gz"
FETCH_MANUALLY+="from http://wwws.sun.com/software/communitysource/j2se/java2/download.html"
FETCH_MANUALLY+="Get the BSD patchset file:"
FETCH_MANUALLY+="    bsd-jdk131-patches-9.tar.gz"
FETCH_MANUALLY+="from http://www.eyesbeyond.com/freebsddom/java/jdk13.html"

PSEUDO_FLAVORS=		native_bootstrap
FLAVOR?=

.if ${FLAVOR:L:Mnative_bootstrap}
BUILD_DEPENDS+=		:jdk-1.3*:devel/jdk/1.3
MAKE_ENV+=		ALT_BOOTDIR="${LOCALBASE}/${JDKHOME}"
.else
DISTFILES+=		j2sdk-1_3_1-linux-i386.bin
FETCH_MANUALLY+=	"Get the linux binary sdk file:"
FETCH_MANUALLY+=	"    j2sdk-1_3_1-linux-i386.bin"
FETCH_MANUALLY+=	"from http://java.sun.com/products/archive/j2se/1.3.1/"
DISTFILES+=             bootstrap-src-jdk131-1.tar.gz
FETCH_MANUALLY+=        "Get the bootstrap source dist file:"
FETCH_MANUALLY+=        "    bootstrap-src-jdk131-1.tar.gz"
FETCH_MANUALLY+=        "from http://www.intricatesoftware.com/OpenBSD/java/jdk13.html"
BUILD_DEPENDS+=		::archivers/unzip
MAKE_ENV+=		ALT_BOOTDIR="${WRKDIST}"
LINUXFILES=		jdk1.3.1/lib/tools.jar \
			jdk1.3.1/jre/lib/rt.jar
EXTRACT_CASES+=		*.bin) \
			perl -p0777 -e "s/.*?PK\03\04/PK\03\04/s" ${FULLDISTDIR}/$$archive > \
				${WRKDIR}/$$archive.zip && \
			unzip -j ${WRKDIR}/$$archive ${LINUXFILES} ;;
.  if ${MACHINE_ARCH} == "powerpc"
PATCH_LIST=		patch-* powerpc-patch-*
.  endif
.  if ${MACHINE_ARCH} == "sparc"
PATCH_LIST=		patch-* sparc-patch-*
.  endif
.endif

WANTLIB=		ICE SM X11 Xext Xp Xt Xtst c m ossaudio z

ALL_TARGET=		all images

JDKHOME=		jdk-${V}
JREHOME=		jre-${V}

SUBST_VARS=		JDKHOME JREHOME
SYSTRACE_SUBST_VARS=	LOCALBASE

# Deal with Sun's internal build structure
WRKDIST=		${WRKDIR}
WRKSRC=         	${WRKDIR}/j2sdk1.3.1/make
BUILDDIR=         	${WRKDIR}/j2sdk1.3.1/build
CLASSESDIR=		${BUILDDIR}/bsd-${MACHINE_ARCH}/classes
JDKIMAGEDIR=		${BUILDDIR}/bsd-${MACHINE_ARCH}/jdk-image-${MACHINE_ARCH}
JDKIMAGEDIR_G=		${BUILDDIR}/bsd-${MACHINE_ARCH}/jdk-debug-image-${MACHINE_ARCH}
JREIMAGEDIR=		${BUILDDIR}/bsd-${MACHINE_ARCH}/jre-image-${MACHINE_ARCH}
CACERTSDIR=		${WRKDIR}/j2sdk1.3.1/src/share/lib/security

.if !${FLAVOR:L:Mnative_bootstrap}
post-extract:
	@@mv ${BUILDDIR}/bootsrc ${BUILDDIR}/bsd-${MACHINE_ARCH}
	@@mkdir -p ${CLASSESDIR}
	@@cd ${CLASSESDIR} && \
		xargs unzip -q ${WRKDIR}/tools.jar < ${FILESDIR}/tools_jar_class_list && \
		xargs unzip -q ${WRKDIR}/rt.jar < ${FILESDIR}/rt_jar_class_list
.endif

pre-patch:
	@@cp -f ${FILESDIR}/cacerts ${CACERTSDIR}
	@@cd ${WRKDIR} &&  \
		${CHMOD} -R u+w * && \
		${PATCH} -p0 -z .orig.bsd --quiet < ${WRKDIR}/jdk131.patches

.if !${FLAVOR:L:Mnative_bootstrap}
post-patch:
	@@cd ${WRKDIR}/bin && \
		${CHMOD} +x bootscript
.for prog in java javac javah
	@@cd ${WRKDIR}/bin && \
		ln -s bootscript ${prog}
.endfor
.endif

post-build:
	@@rm -rf ${JDKIMAGEDIR}/demo/jfc/SwingSet2/resources

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/${JDKHOME}
	cd ${JDKIMAGEDIR} && tar -cf - * | tar -C ${PREFIX}/${JDKHOME} -xf - 
	cd ${JDKIMAGEDIR_G} && tar -cf - * | tar -C ${PREFIX}/${JDKHOME} -xf - 
	${INSTALL_DATA_DIR} ${PREFIX}/${JREHOME}
	cd ${JREIMAGEDIR} && tar -cf - * | tar -C ${PREFIX}/${JREHOME} -xf -
	cd ${PREFIX}/${JDKHOME}/include && ln -s openbsd/* .
	cd ${PREFIX}/${JDKHOME}/include-old && ln -s openbsd/* .

.include <bsd.port.mk>
@


1.25
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2007/07/18 17:53:07 kurt Exp $
@


1.24
log
@make this work with motif > 2.1 too
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2007/01/28 04:46:48 kurt Exp $
d6 2
a7 2
COMMENT-main=		"Java2(TM) Standard Edition Dev Kit v${V}"
COMMENT-jre=		"Java2(TM) Standard Edition Runtime Environment v${V}"
d28 4
a31 4
PERMIT_PACKAGE_CDROM=	"SCSL"
PERMIT_PACKAGE_FTP=	"SCSL"
PERMIT_DISTFILES_CDROM= "SCSL"
PERMIT_DISTFILES_FTP=	"SCSL"
@


1.23
log
@Security fix for CVE-2007-0243:

Buffer overflow allows applets to gain privileges via a GIF image with a
block with a 0 width field, which triggers memory corruption and possible
execution of arbitrary code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2006/11/22 14:58:03 kurt Exp $
d10 3
a12 3
PKGNAME=		jdk-${V}p10
PKGNAME-main=		jdk-${V}p10
PKGNAME-jre=		jre-${V}p10
@


1.22
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2006/11/15 17:27:40 kurt Exp $
d10 3
a12 2
PKGNAME-main=		jdk-${V}p9
PKGNAME-jre=		jre-${V}p9
@


1.21
log
@use system libz instead of internal libz
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2006/11/11 21:04:27 steven Exp $
d6 1
a6 1
COMMENT=		"Java2(TM) Standard Edition Dev Kit v${V}"
d10 2
a11 2
PKGNAME=		jdk-${V}p8
PKGNAME-jre=		jre-${V}p8
d15 1
a15 1
MULTI_PACKAGES= 	-jre
@


1.20
log
@USE_X11
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/03/20 14:40:24 kurt Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p7
PKGNAME-jre=		jre-${V}p7
d92 1
a92 1
WANTLIB=		ICE SM X11 Xext Xp Xt Xtst c m ossaudio
@


1.19
log
@- enter 1.3.1 on sparc. due to the small datasize ulimit on sparc -Xmx60
is about as high as you can go. tomcat v4 and demos work but a bit slowly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/02/01 01:04:29 kurt Exp $
d42 1
@


1.19.2.1
log
@MFC:
Security fix for CVE-2007-0243:

Buffer overflow allows applets to gain privileges via a GIF image with a
block with a 0 width field, which triggers memory corruption and possible
execution of arbitrary code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2006/03/20 14:40:24 kurt Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p10
PKGNAME-jre=		jre-${V}p10
@


1.18
log
@Don't build with HAVE_DPS now that it is gone. Also remove dps from
WANTLIB. noticed by and okay naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2006/01/18 15:12:55 kurt Exp $
d4 1
a4 1
ONLY_FOR_ARCHS= 	arm i386 powerpc
d10 2
a11 2
PKGNAME=		jdk-${V}p6
PKGNAME-jre=		jre-${V}p6
d84 4
a87 1
PATCH_LIST=		patch-* pack-patch-*
@


1.18.2.1
log
@Security fix for CVE-2007-0243:

Buffer overflow allows applets to gain privileges via a GIF image with a
block with a 0 width field, which triggers memory corruption and possible
execution of arbitrary code.

okay sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2006/02/01 01:04:29 kurt Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p10
PKGNAME-jre=		jre-${V}p10
@


1.17
log
@remove conflicting read() prototype and correct conflicting prototypes for
sysSendTo and sysRecvFrom. unbreaks build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2005/10/21 22:36:30 kurt Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p5
PKGNAME-jre=		jre-${V}p5
d48 1
a48 2
			BUILD_NUMBER="`whoami`-`date '+%Y-%m-%d-%H:%M'`" \
			HAVE_DPS="yes"
d88 1
a88 1
WANTLIB=		ICE SM X11 Xext Xp Xt Xtst c dps m ossaudio
@


1.16
log
@libc is not explicitly linked into jvm shlibs, so using RTLD_NEXT to find
a symbol in libc won't work. dlopen libc and find it directly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2005/09/16 09:51:26 espie Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p4
PKGNAME-jre=		jre-${V}p4
@


1.15
log
@Fix a buglet in bsd.port.mk where the PSEUDO_FLAVORS get encoded into
the FULLPKGPATH, thus providing changes to packing-lists which shouldn't
happen, and making update more difficult.

Accordingly, bump all pkgnames with PSEUDO_FLAVORS, and provide an
update @@pkgpath for the bug for most of them (left out the ones with 3
or 4 pseudo flavors for space constraints...)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2005/08/10 22:36:26 kurt Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p3
PKGNAME-jre=		jre-${V}p3
@


1.14
log
@fix old zlib vuln http://www.zlib.net/advisory-2002-03-11.txt and
other bug fixes from the 1.5.0 jdk src.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2005/07/14 17:29:08 kurt Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p2
PKGNAME-jre=		jre-${V}p2
@


1.13
log
@- enable arm archs
- fix up arm/green thread patches (kurt/dale)
- remove unused native thread patches
- fix WANTLIB

okay drahn@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2005/06/14 20:10:58 espie Exp $
d10 2
a11 2
PKGNAME=		jdk-${V}p1
PKGNAME-jre=		jre-${V}p1
@


1.12
log
@yet another typo...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2005/06/03 17:27:53 kurt Exp $
d4 1
a4 1
ONLY_FOR_ARCHS= 	i386 powerpc
d10 2
a11 2
PKGNAME=		jdk-${V}p0
PKGNAME-jre=		jre-${V}p0
d89 1
a89 1
WANTLIB=		ICE SM X11 Xext Xp Xt Xtst c dps m ossaudio pthread
@


1.11
log
@- Add support for powerpc. With some tips from tedu@@ and drahn@@, thanks!
- Change bootstrap method. No longer use 1.3-linux port to bootstrap.
  Use class files from a linux binary jdk and extra source and header
  files from my website.
- Remove plugin support. plugin has security issues and doesn't work
  with recent mozilla/firefox versions.
- Patches for arm native-threads are included but not enabled yet.
  I prefer to have all arches use green-threads to avoid arch specific
  pkg files. Also noticed some regressions with native-threads on i386.
  arm support from Dale Rahn (drahn@@).
- quiet pre-patch phase

okay ian@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/02/20 11:18:55 sturm Exp $
d53 1
a53 1
FETCH_MANUALLY+="them in ${FULLDISDIR} and then run make again."
@


1.10
log
@build with systrace
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2004/12/17 18:22:48 kurt Exp $
d4 1
a4 2
# Requires existing JDK 1.3 to build
ONLY_FOR_ARCHS= 	i386
d10 2
a11 2
PKGNAME=		jdk-${V}
PKGNAME-jre=		jre-${V}
d20 1
a20 1
MAINTAINER=		Kurt Miller <truk@@optonline.net>
d26 1
a26 1
# http://www.sun.com/981208/scsl/principles.html
d48 1
d51 10
a60 1
FLAVORS=		no_plugin
d62 1
a62 1
FLAVOR?=		no_plugin
d68 19
a86 2
BUILD_DEPENDS+=		:jdk-linux->=1.3.1_10:devel/jdk/1.3-linux
MAKE_ENV+=		ALT_BOOTDIR="${LOCALBASE}/jdk1.3.1-linux"
a90 21
.if !${FLAVOR:L:Mno_plugin}
BROKEN=			"Security Vulnerability With Java Plug-in in JRE/SDK (SunSolve \#57591)"
LIB_DEPENDS=		glib.1::devel/glib \
			gtk.1.2::x11/gtk+ \
			nspr4.1::devel/nspr

MODULES=		devel/gettext

MAKE_ENV+=		LIBG_HDRS="${LOCALBASE}/include/glib-1.2" \
			GTK_HDRS="${LOCALBASE}/include/gtk-1.2" \
			LIBIDL_HDRS= \
			INTL_DIR="${LOCALBASE}" \
			BUILD_NUMBER="`whoami`-`date '+%Y-%m-%d-%H:%M'`"

ALL_TARGET=		all plugin images
.else
#no plugin - no messages
MESSAGE=		/dev/null

MAKE_ENV+=		BUILD_NUMBER="`whoami`-`date '+%Y-%m-%d-%H:%M'`-no_plugin"

a91 11
.endif

# Error message for distfile.
FETCH_MANUALLY=	"You must manually fetch the source distribution"
FETCH_MANUALLY+="and BSD patches:"
.for file in ${DISTFILES}
FETCH_MANUALLY+="    ${file}"
.endfor
FETCH_MANUALLY+="from http://www.sun.com/software/java2/download.html"
FETCH_MANUALLY+="and http://www.eyesbeyond.com/freebsddom/java/jdk13.html,"
FETCH_MANUALLY+="place it in ${FULLDISTDIR} and then run make again."
d102 5
a106 3
JDKIMAGEDIR=		${WRKDIR}/j2sdk1.3.1/build/bsd-${ARCH}/jdk-image-${ARCH}
JDKIMAGEDIR_G=		${WRKDIR}/j2sdk1.3.1/build/bsd-${ARCH}/jdk-debug-image-${ARCH}
JREIMAGEDIR=		${WRKDIR}/j2sdk1.3.1/build/bsd-${ARCH}/jre-image-${ARCH}
d109 8
a116 1
SYSCTL=			${SUDO} sysctl -w kern.emul.linux
d122 1
a122 1
		${PATCH} -p0 -z .orig.bsd < ${WRKDIR}/jdk131.patches
d125 8
a132 3
pre-build:
	@@sysctl -n kern.emul.linux > ${WRKDIR}/.emul_linux
	@@${SYSCTL}=1
d135 1
a135 2
	@@${SYSCTL}=`cat ${WRKDIR}/.emul_linux`
.endif
@


1.10.2.1
log
@MFC:
fix old zlib vuln http://www.zlib.net/advisory-2002-02-11.txt and
other bug fixes from the 1.5.0 jdk src

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2005/02/20 11:18:55 sturm Exp $
d11 2
a12 2
PKGNAME=		jdk-${V}p2
PKGNAME-jre=		jre-${V}p2
@


1.9
log
@Set default FLAVOR to no_plugin and mark !no_plugin as BROKEN until
Security Vulnerability With Java Plug-in in JRE/SDK (SunSolve #57591)
is fixed.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2004/11/23 21:34:27 espie Exp $
a60 1
NO_SYSTRACE=		Yes
d103 1
@


1.8
log
@some more WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/10/12 20:46:22 naddy Exp $
d53 1
a53 1
FLAVOR?=
d67 1
@


1.7
log
@- Stop installing man pages in man dirs.  Use @@mandir instead to avoid
  conflicts with JRE and future JDKs.
- Add flavor descriptions to DESCR*.
- Add missing lib depend via MODULES devel/gettext.
- Comment the native_threads dir creation that was added in a recent commit.

From: Kurt Miller <truk@@optonline.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/08/14 21:50:38 naddy Exp $
d63 2
@


1.6
log
@We've grown dladdr(3), adapt.  From: Kurt Miller <truk@@optonline.net>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/06/02 15:23:20 sturm Exp $
d69 2
a108 5
MANPAGEDIR=		${JDKIMAGEDIR}/man/man1

MANPAGES=		appletviewer.1 extcheck.1 jar.1 jarsigner.1 java.1 javac.1 \
			javadoc.1 javah.1 javap.1 jdb.1 keytool.1 native2ascii.1 \
			rmic.1 rmid.1 rmiregistry.1 serialver.1 tnameserv.1
a134 3
.for i in ${MANPAGES}
	${INSTALL_MAN} ${MANPAGEDIR}/$i ${PREFIX}/man/man1/${i:T:R}.1
.endfor
@


1.6.2.1
log
@MFC:
fix old zlib vuln http://www.zlib.net/advisory-2002-03-11.txt and other
bug fixes from the 1.5.0 jdk src

ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/08/14 21:50:38 naddy Exp $
d11 2
a12 2
PKGNAME=		jdk-${V}p2
PKGNAME-jre=		jre-${V}p2
@


1.5
log
@fix build on -current, from maintainer Kurt Miller <truk at optonline.net>
update NO_SYSTRACE comment
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2004/02/04 09:17:37 sturm Exp $
d119 1
a119 1
		${PATCH} -p0 < ${WRKDIR}/jdk131.patches
@


1.4
log
@no systrace for now if 1.3-linux jdk is used (extraction fails due to
systrace bug)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2004/02/03 03:30:55 pvalchev Exp $
d61 1
a61 1
NO_SYSTRACE=		"see devel/jdk/1.3-linux"
@


1.3
log
@- fix 1.3-linux dependency (restrict to newest version)
- enable/reset linux emulation automagically ala the change to 1.3-linux
  (for when that's used for bootstrapping)
from maintainer Kurt Millert
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2004/01/29 22:17:09 pvalchev Exp $
d61 1
@


1.2
log
@fix link to BSD patchset; reminded by wilfried
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2004/01/29 22:02:18 pvalchev Exp $
d57 1
a57 2
MAKE_ENV+=		ALT_BOOTDIR="${LOCALBASE}/${JDKHOME}" \
			EMUL_CHECK="no"
d59 2
a60 3
BUILD_DEPENDS+=		:jdk-linux-1.3.1*:devel/jdk/1.3-linux
MAKE_ENV+=		ALT_BOOTDIR="${LOCALBASE}/jdk1.3.1-linux" \
			EMUL_CHECK="yes"
d112 2
d119 9
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d93 1
a93 1
FETCH_MANUALLY+="and http://www.eyesbeyond.com/freebsddom/java/jdk.html,"
@


1.1.1.1
log
@Import of NATIVE jdk-1.3.1

The Java 2 SDK software includes tools useful for developing and 
testing programs written in the Java programming language and
running on the Java platform.

i386-only for now.
Requires manual registration/fetch of distfile from Sun due to
their restrictions.

From maintainer Kurt Miller <truk@@optonline.net>
@
text
@@
