head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2009.01.17.11.37.42;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2009.01.04.23.25.16;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- Update to early access b43:
  http://download.java.net/jdk7/changes/jdk7-b43.html
- Remove KOI8_U char encoding which no longer applies
- Correct datatype warning in fork_and_exec()
- Sync patches
@
text
@$OpenBSD: patch-hotspot_src_share_vm_opto_macro_cpp,v 1.1 2009/01/04 23:25:16 kurt Exp $
--- hotspot/src/share/vm/opto/macro.cpp.orig	Wed Dec 24 10:12:36 2008
+++ hotspot/src/share/vm/opto/macro.cpp	Wed Dec 24 10:13:01 2008
@@@@ -1724,6 +1724,13 @@@@ void PhaseMacroExpand::expand_lock_node(LockNode *lock
     if (klass_node == NULL) {
       Node* k_adr = basic_plus_adr(obj, oopDesc::klass_offset_in_bytes());
       klass_node = transform_later( LoadKlassNode::make(_igvn, mem, k_adr, _igvn.type(k_adr)->is_ptr()) );
+#ifdef _LP64
+      if (UseCompressedOops && klass_node->is_DecodeN()) {
+        assert(klass_node->in(1)->Opcode() == Op_LoadNKlass, "sanity");
+        klass_node->in(1)->init_req(0, ctrl);
+      } else
+#endif
+      klass_node->init_req(0, ctrl);
     }
     Node *proto_node = make_load(ctrl, mem, klass_node, Klass::prototype_header_offset_in_bytes() + sizeof(oopDesc), TypeX_X, TypeX_X->basic_type());
 
@


1.1
log
@Update to early access build 42:
- sync/regen patches
- use os_bsd_x86.cpp from OpenJDK bsd-java repository plus
  Greg Lewis's fixes posted to the bsd-port-dev list
- use Xiaobin Lu's datatype corrections from OpenJDK bug
  6787106 + additional datatype corrections from me.
- use Vladimir Kozlov's bug fix from OpenJDK bug 6782820
- remove obsolete IcedTea awt binary plugs and update binary
  plug distfile
- correctly define DEVTOOLS_PATH for bsd and verify + correct
  Defs-utils.gmk locations for bsd utilities
@
text
@d1 1
a1 1
$OpenBSD$
@

