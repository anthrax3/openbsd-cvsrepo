head	1.2;
access;
symbols
	OPENBSD_4_3:1.1.0.2
	OPENBSD_4_3_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2008.03.19.18.05.44;	author kurt;	state dead;
branches;
next	1.1;

1.1
date	2007.09.06.15.46.19;	author kurt;	state Exp;
branches;
next	;


desc
@@


1.2
log
@- switch to GPLv2 w/CLASSPATH exception licensed openjdk7 code
- update to early access build 24
- Use GPLv2 licensed binary plugs from the IcedTea project and parts of
  IcedTea's icedtea-copy-plugs.patch & icedtea-graphics.patch.
  For more info see:
    http://icedtea.classpath.org/wiki/Main_Page
- Enable packages since we're fully GPLv2 based now, but still not
  hooked up to bulk builds just yet.
@
text
@$OpenBSD: patch-j2se_src_share_native_java_util_zip_zlib-1_1_3_zconf_h,v 1.1 2007/09/06 15:46:19 kurt Exp $
--- j2se/src/share/native/java/util/zip/zlib-1.1.3/zconf.h.orig	Thu Jul  5 05:03:03 2007
+++ j2se/src/share/native/java/util/zip/zlib-1.1.3/zconf.h	Fri Jul 27 18:24:52 2007
@@@@ -43,44 +43,49 @@@@
 /* for _LP64 */
 #include <sys/types.h>
 
+/**
+ * Privatise the symbols to the JDK.
+ */
+#define Z_PREFIX
+
 /*
  * If you *really* need a unique prefix for all types and library functions,
  * compile with -DZ_PREFIX. The "standard" zlib should be compiled without it.
  */
 #ifdef Z_PREFIX
-#  define deflateInit_	z_deflateInit_
-#  define deflate	z_deflate
-#  define deflateEnd	z_deflateEnd
-#  define inflateInit_ 	z_inflateInit_
-#  define inflate	z_inflate
-#  define inflateEnd	z_inflateEnd
-#  define deflateInit2_	z_deflateInit2_
-#  define deflateSetDictionary z_deflateSetDictionary
-#  define deflateCopy	z_deflateCopy
-#  define deflateReset	z_deflateReset
-#  define deflateParams	z_deflateParams
-#  define inflateInit2_	z_inflateInit2_
-#  define inflateSetDictionary z_inflateSetDictionary
-#  define inflateSync	z_inflateSync
-#  define inflateSyncPoint z_inflateSyncPoint
-#  define inflateReset	z_inflateReset
-#  define compress	z_compress
-#  define compress2	z_compress2
-#  define uncompress	z_uncompress
-#  define adler32	z_adler32
-#  define crc32		z_crc32
-#  define get_crc_table z_get_crc_table
+#  define deflateInit_	_java_libz_deflateInit_
+#  define deflate	_java_libz_deflate
+#  define deflateEnd	_java_libz_deflateEnd
+#  define inflateInit_ 	_java_libz_inflateInit_
+#  define inflate	_java_libz_inflate
+#  define inflateEnd	_java_libz_inflateEnd
+#  define deflateInit2_	_java_libz_deflateInit2_
+#  define deflateSetDictionary _java_libz_deflateSetDictionary
+#  define deflateCopy	_java_libz_deflateCopy
+#  define deflateReset	_java_libz_deflateReset
+#  define deflateParams	_java_libz_deflateParams
+#  define inflateInit2_	_java_libz_inflateInit2_
+#  define inflateSetDictionary _java_libz_inflateSetDictionary
+#  define inflateSync	_java_libz_inflateSync
+#  define inflateSyncPoint _java_libz_inflateSyncPoint
+#  define inflateReset	_java_libz_inflateReset
+#  define compress	_java_libz_compress
+#  define compress2	_java_libz_compress2
+#  define uncompress	_java_libz_uncompress
+#  define adler32	_java_libz_adler32
+#  define crc32		_java_libz_crc32
+#  define get_crc_table _java_libz_get_crc_table
 
-#  define Byte		z_Byte
-#  define uInt		z_uInt
-#  define uLong		z_uLong
-#  define Bytef	        z_Bytef
-#  define charf		z_charf
-#  define intf		z_intf
-#  define uIntf		z_uIntf
-#  define uLongf	z_uLongf
-#  define voidpf	z_voidpf
-#  define voidp		z_voidp
+#  define Byte		_java_libz_Byte
+#  define uInt		_java_libz_uInt
+#  define uLong		_java_libz_uLong
+#  define Bytef	        _java_libz_Bytef
+#  define charf		_java_libz_charf
+#  define intf		_java_libz_intf
+#  define uIntf		_java_libz_uIntf
+#  define uLongf	_java_libz_uLongf
+#  define voidpf	_java_libz_voidpf
+#  define voidp		_java_libz_voidp
 #endif
 
 #if (defined(_WIN32) || defined(__WIN32__)) && !defined(WIN32)
@


1.1
log
@Remove BROKEN and update port to b19. The port is fully 1.7 now (both
hotspot and j2se). The j2se patches are from the bsd java repositories
1.5 -> 1.6 (performed by Greg Lewis) -> 1.7 by myself. j2se patches are
in sync with 1.6 patchset 1 plus the Runtime.exec fix from Michiel Boland
via FreeBSD PR http://www.freebsd.org/cgi/query-pr.cgi?pr=115557.

Also from FreeBSD: interactive JRL license verification. By default the
port is IS_INTERACTIVE=Yes. Add ACCEPT_JRL_LICENSE=Yes to /etc/mk.conf
to permanently accept the JRL license.

At some point in the future I will work on switching this back to
OpenJDK/GPLv2 src. That largely depends on Sun's progress at removing more
of the binary plug bits so that stubbing out the remainder is less
cumbersome and time consuming.

Testing, comments and okay ian@@
@
text
@d1 1
a1 1
$OpenBSD$
@

