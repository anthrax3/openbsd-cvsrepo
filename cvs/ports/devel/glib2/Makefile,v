head	1.259;
access;
symbols
	OPENBSD_6_1:1.257.0.2
	OPENBSD_6_1_BASE:1.257
	OPENBSD_6_0:1.253.0.2
	OPENBSD_6_0_BASE:1.253
	OPENBSD_5_9:1.251.0.2
	OPENBSD_5_9_BASE:1.251
	OPENBSD_5_8:1.246.0.4
	OPENBSD_5_8_BASE:1.246
	OPENBSD_5_7:1.241.0.2
	OPENBSD_5_7_BASE:1.241
	OPENBSD_5_6:1.234.0.2
	OPENBSD_5_6_BASE:1.234
	OPENBSD_5_5:1.222.0.2
	OPENBSD_5_5_BASE:1.222
	OPENBSD_5_4:1.207.0.2
	OPENBSD_5_4_BASE:1.207
	OPENBSD_5_3:1.198.0.2
	OPENBSD_5_3_BASE:1.198
	OPENBSD_5_2:1.179.0.2
	OPENBSD_5_2_BASE:1.179
	OPENBSD_5_1_BASE:1.150
	OPENBSD_5_1:1.150.0.2
	OPENBSD_5_0:1.127.0.2
	OPENBSD_5_0_BASE:1.127
	OPENBSD_4_9:1.103.0.2
	OPENBSD_4_9_BASE:1.103
	OPENBSD_4_8:1.87.0.2
	OPENBSD_4_8_BASE:1.87
	OPENBSD_4_7:1.74.0.2
	OPENBSD_4_7_BASE:1.74
	OPENBSD_4_6:1.61.0.2
	OPENBSD_4_6_BASE:1.61
	OPENBSD_4_5:1.58.0.2
	OPENBSD_4_5_BASE:1.58
	OPENBSD_4_4:1.49.0.2
	OPENBSD_4_4_BASE:1.49
	OPENBSD_4_3:1.45.0.2
	OPENBSD_4_3_BASE:1.45
	OPENBSD_4_2:1.36.0.2
	OPENBSD_4_2_BASE:1.36
	OPENBSD_4_1:1.29.0.2
	OPENBSD_4_1_BASE:1.29
	OPENBSD_4_0:1.26.0.2
	OPENBSD_4_0_BASE:1.26
	OPENBSD_3_9:1.24.0.2
	OPENBSD_3_9_BASE:1.24
	OPENBSD_3_8:1.22.0.2
	OPENBSD_3_8_BASE:1.22
	OPENBSD_3_7:1.19.0.2
	OPENBSD_3_7_BASE:1.19
	OPENBSD_3_6:1.14.0.2
	OPENBSD_3_6_BASE:1.14
	OPENBSD_3_5:1.11.0.2
	OPENBSD_3_5_BASE:1.11
	OPENBSD_3_4:1.9.0.2
	OPENBSD_3_4_BASE:1.9
	OPENBSD_3_3:1.5.0.2
	OPENBSD_3_3_BASE:1.5
	OPENBSD_3_2:1.4.0.2
	OPENBSD_3_2_BASE:1.4
	nino_20020725:1.1.1.1
	nino:1.1.1;
locks; strict;
comment	@# @;


1.259
date	2017.04.22.13.43.21;	author ajacoutot;	state Exp;
branches;
next	1.258;
commitid	Obqvqlta0q6jFX3r;

1.258
date	2017.04.11.07.25.38;	author ajacoutot;	state Exp;
branches;
next	1.257;
commitid	OfRgtAM7IFibgYPX;

1.257
date	2017.02.13.16.07.52;	author ajacoutot;	state Exp;
branches;
next	1.256;
commitid	T4rdsdHKJDQ73X5V;

1.256
date	2016.11.07.16.24.59;	author ajacoutot;	state Exp;
branches;
next	1.255;
commitid	TKTbz2pojveiyYTG;

1.255
date	2016.10.28.13.40.04;	author ajacoutot;	state Exp;
branches;
next	1.254;
commitid	OWtwB2HchbcPGaBL;

1.254
date	2016.08.21.12.39.47;	author ajacoutot;	state Exp;
branches;
next	1.253;
commitid	ZmakyUwKSfLdc4iK;

1.253
date	2016.05.10.10.02.58;	author ajacoutot;	state Exp;
branches;
next	1.252;
commitid	vqxNU0Jnu3tlcm8Z;

1.252
date	2016.04.18.06.46.30;	author ajacoutot;	state Exp;
branches;
next	1.251;
commitid	4R4XWcW8P6IfqQRE;

1.251
date	2015.12.22.08.52.02;	author ajacoutot;	state Exp;
branches;
next	1.250;
commitid	oYsSJrjvYOlCovTX;

1.250
date	2015.11.07.05.52.09;	author ajacoutot;	state Exp;
branches;
next	1.249;
commitid	62c9kX2ZdsXfHz5E;

1.249
date	2015.10.18.06.33.54;	author ajacoutot;	state Exp;
branches;
next	1.248;
commitid	Fi2Y7NQlBcMCEhps;

1.248
date	2015.10.14.17.10.53;	author ajacoutot;	state Exp;
branches;
next	1.247;
commitid	8pQXK3bb2OkKreZO;

1.247
date	2015.09.24.10.23.42;	author ajacoutot;	state Exp;
branches;
next	1.246;
commitid	TJvyXNuKGn4RlcXO;

1.246
date	2015.05.13.06.13.30;	author ajacoutot;	state Exp;
branches;
next	1.245;
commitid	KAPIlXRmF7DDf463;

1.245
date	2015.04.05.09.00.53;	author ajacoutot;	state Exp;
branches;
next	1.244;
commitid	XSbef12Ml3TWKiIy;

1.244
date	2015.03.27.16.00.00;	author ajacoutot;	state Exp;
branches;
next	1.243;
commitid	Ss3iHv4vfdeLMqRd;

1.243
date	2015.03.21.11.34.10;	author jung;	state Exp;
branches;
next	1.242;
commitid	hYAo8HEaV0Azk4Fb;

1.242
date	2015.03.15.08.32.41;	author ajacoutot;	state Exp;
branches;
next	1.241;
commitid	6A16pUVZmc6tAOak;

1.241
date	2014.11.21.23.53.14;	author sthen;	state Exp;
branches;
next	1.240;
commitid	Tr5lipNrbxNbf9Jz;

1.240
date	2014.11.13.17.25.52;	author ajacoutot;	state Exp;
branches;
next	1.239;
commitid	hKZuE3CLXgRxx6jD;

1.239
date	2014.10.22.15.58.37;	author ajacoutot;	state Exp;
branches;
next	1.238;
commitid	qLT1pZUNWCsk8H4M;

1.238
date	2014.10.08.09.34.30;	author ajacoutot;	state Exp;
branches;
next	1.237;
commitid	BbArL78adVWGBtWY;

1.237
date	2014.10.01.08.39.25;	author ajacoutot;	state Exp;
branches;
next	1.236;
commitid	99NPoXJkUIRIpCSU;

1.236
date	2014.09.23.06.15.21;	author ajacoutot;	state Exp;
branches;
next	1.235;
commitid	DDK8vwZ87BuxBNLJ;

1.235
date	2014.09.20.16.23.45;	author ajacoutot;	state Exp;
branches;
next	1.234;
commitid	TzZM8RWvDdhDTpaT;

1.234
date	2014.04.20.21.18.53;	author ajacoutot;	state Exp;
branches;
next	1.233;

1.233
date	2014.04.10.16.52.02;	author ajacoutot;	state Exp;
branches;
next	1.232;

1.232
date	2014.04.10.09.13.00;	author ajacoutot;	state Exp;
branches;
next	1.231;

1.231
date	2014.04.10.08.45.07;	author ajacoutot;	state Exp;
branches;
next	1.230;

1.230
date	2014.04.10.07.29.06;	author ajacoutot;	state Exp;
branches;
next	1.229;

1.229
date	2014.04.10.05.43.26;	author ajacoutot;	state Exp;
branches;
next	1.228;

1.228
date	2014.04.06.12.17.29;	author ajacoutot;	state Exp;
branches;
next	1.227;

1.227
date	2014.04.02.09.36.10;	author jasper;	state Exp;
branches;
next	1.226;

1.226
date	2014.04.01.18.06.28;	author jasper;	state Exp;
branches;
next	1.225;

1.225
date	2014.03.28.08.48.41;	author ajacoutot;	state Exp;
branches;
next	1.224;

1.224
date	2014.03.27.09.00.40;	author ajacoutot;	state Exp;
branches;
next	1.223;

1.223
date	2014.03.26.08.28.15;	author ajacoutot;	state Exp;
branches;
next	1.222;

1.222
date	2014.02.22.10.14.56;	author stsp;	state Exp;
branches;
next	1.221;

1.221
date	2014.01.21.17.37.56;	author ajacoutot;	state Exp;
branches;
next	1.220;

1.220
date	2014.01.13.08.54.39;	author ajacoutot;	state Exp;
branches;
next	1.219;

1.219
date	2014.01.03.16.01.53;	author ajacoutot;	state Exp;
branches;
next	1.218;

1.218
date	2013.12.26.10.07.07;	author ajacoutot;	state Exp;
branches;
next	1.217;

1.217
date	2013.12.09.19.49.20;	author ajacoutot;	state Exp;
branches;
next	1.216;

1.216
date	2013.12.07.18.42.54;	author ajacoutot;	state Exp;
branches;
next	1.215;

1.215
date	2013.11.12.16.17.58;	author ajacoutot;	state Exp;
branches;
next	1.214;

1.214
date	2013.10.16.07.40.54;	author ajacoutot;	state Exp;
branches;
next	1.213;

1.213
date	2013.09.25.12.37.06;	author ajacoutot;	state Exp;
branches;
next	1.212;

1.212
date	2013.09.19.11.56.10;	author ajacoutot;	state Exp;
branches;
next	1.211;

1.211
date	2013.09.19.11.35.22;	author ajacoutot;	state Exp;
branches;
next	1.210;

1.210
date	2013.08.28.07.46.09;	author ajacoutot;	state Exp;
branches;
next	1.209;

1.209
date	2013.08.23.07.55.30;	author ajacoutot;	state Exp;
branches;
next	1.208;

1.208
date	2013.08.07.16.25.34;	author ajacoutot;	state Exp;
branches;
next	1.207;

1.207
date	2013.06.10.05.56.15;	author ajacoutot;	state Exp;
branches;
next	1.206;

1.206
date	2013.05.13.15.16.01;	author ajacoutot;	state Exp;
branches;
next	1.205;

1.205
date	2013.05.09.14.06.38;	author ajacoutot;	state Exp;
branches;
next	1.204;

1.204
date	2013.04.16.06.01.54;	author ajacoutot;	state Exp;
branches;
next	1.203;

1.203
date	2013.04.05.19.20.26;	author jturner;	state Exp;
branches;
next	1.202;

1.202
date	2013.04.05.06.33.21;	author ajacoutot;	state Exp;
branches;
next	1.201;

1.201
date	2013.03.27.17.49.34;	author ajacoutot;	state Exp;
branches;
next	1.200;

1.200
date	2013.03.21.08.45.15;	author ajacoutot;	state Exp;
branches;
next	1.199;

1.199
date	2013.03.11.10.50.04;	author espie;	state Exp;
branches;
next	1.198;

1.198
date	2012.11.27.06.49.49;	author ajacoutot;	state Exp;
branches;
next	1.197;

1.197
date	2012.11.14.19.05.49;	author ajacoutot;	state Exp;
branches;
next	1.196;

1.196
date	2012.11.13.16.34.59;	author ajacoutot;	state Exp;
branches;
next	1.195;

1.195
date	2012.11.10.07.37.06;	author ajacoutot;	state Exp;
branches;
next	1.194;

1.194
date	2012.11.07.08.17.56;	author ajacoutot;	state Exp;
branches;
next	1.193;

1.193
date	2012.10.16.14.18.09;	author ajacoutot;	state Exp;
branches;
next	1.192;

1.192
date	2012.10.16.06.30.46;	author ajacoutot;	state Exp;
branches;
next	1.191;

1.191
date	2012.10.12.20.54.23;	author ajacoutot;	state Exp;
branches;
next	1.190;

1.190
date	2012.10.06.13.53.46;	author ajacoutot;	state Exp;
branches;
next	1.189;

1.189
date	2012.10.02.20.56.18;	author landry;	state Exp;
branches;
next	1.188;

1.188
date	2012.09.27.17.38.18;	author ajacoutot;	state Exp;
branches;
next	1.187;

1.187
date	2012.09.24.04.11.50;	author ajacoutot;	state Exp;
branches;
next	1.186;

1.186
date	2012.09.21.14.48.05;	author ajacoutot;	state Exp;
branches;
next	1.185;

1.185
date	2012.09.21.13.16.49;	author ajacoutot;	state Exp;
branches;
next	1.184;

1.184
date	2012.09.18.13.05.59;	author ajacoutot;	state Exp;
branches;
next	1.183;

1.183
date	2012.09.07.14.40.59;	author ajacoutot;	state Exp;
branches;
next	1.182;

1.182
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.181;

1.181
date	2012.08.30.10.08.46;	author ajacoutot;	state Exp;
branches;
next	1.180;

1.180
date	2012.08.29.16.06.56;	author ajacoutot;	state Exp;
branches;
next	1.179;

1.179
date	2012.07.15.08.10.41;	author ajacoutot;	state Exp;
branches;
next	1.178;

1.178
date	2012.07.12.11.40.52;	author ajacoutot;	state Exp;
branches;
next	1.177;

1.177
date	2012.07.12.11.20.25;	author ajacoutot;	state Exp;
branches;
next	1.176;

1.176
date	2012.07.09.16.34.21;	author ajacoutot;	state Exp;
branches;
next	1.175;

1.175
date	2012.07.06.16.25.05;	author ajacoutot;	state Exp;
branches;
next	1.174;

1.174
date	2012.05.15.06.31.34;	author ajacoutot;	state Exp;
branches;
next	1.173;

1.173
date	2012.05.01.06.17.01;	author ajacoutot;	state Exp;
branches;
next	1.172;

1.172
date	2012.04.23.12.49.47;	author ajacoutot;	state Exp;
branches;
next	1.171;

1.171
date	2012.04.22.16.58.42;	author ajacoutot;	state Exp;
branches;
next	1.170;

1.170
date	2012.04.17.13.29.24;	author jasper;	state Exp;
branches;
next	1.169;

1.169
date	2012.04.16.10.04.49;	author landry;	state Exp;
branches;
next	1.168;

1.168
date	2012.04.14.07.47.55;	author ajacoutot;	state Exp;
branches;
next	1.167;

1.167
date	2012.04.13.16.00.46;	author dcoppa;	state Exp;
branches;
next	1.166;

1.166
date	2012.04.12.20.23.03;	author ajacoutot;	state Exp;
branches;
next	1.165;

1.165
date	2012.04.08.07.45.30;	author ajacoutot;	state Exp;
branches;
next	1.164;

1.164
date	2012.04.06.12.06.51;	author ajacoutot;	state Exp;
branches;
next	1.163;

1.163
date	2012.04.04.13.41.38;	author ajacoutot;	state Exp;
branches;
next	1.162;

1.162
date	2012.04.01.13.38.07;	author ajacoutot;	state Exp;
branches;
next	1.161;

1.161
date	2012.03.31.18.27.35;	author ajacoutot;	state Exp;
branches;
next	1.160;

1.160
date	2012.03.30.10.25.35;	author ajacoutot;	state Exp;
branches;
next	1.159;

1.159
date	2012.03.25.21.46.52;	author ajacoutot;	state Exp;
branches;
next	1.158;

1.158
date	2012.03.25.11.18.41;	author ajacoutot;	state Exp;
branches;
next	1.157;

1.157
date	2012.03.23.14.36.37;	author ajacoutot;	state Exp;
branches;
next	1.156;

1.156
date	2012.03.23.13.19.32;	author ajacoutot;	state Exp;
branches;
next	1.155;

1.155
date	2012.03.12.07.21.06;	author ajacoutot;	state Exp;
branches;
next	1.154;

1.154
date	2012.03.06.11.39.17;	author ajacoutot;	state Exp;
branches;
next	1.153;

1.153
date	2012.02.21.09.22.33;	author ajacoutot;	state Exp;
branches;
next	1.152;

1.152
date	2012.02.18.17.02.22;	author ajacoutot;	state Exp;
branches;
next	1.151;

1.151
date	2012.02.16.22.08.39;	author ajacoutot;	state Exp;
branches;
next	1.150;

1.150
date	2012.02.02.07.10.17;	author ajacoutot;	state Exp;
branches
	1.150.2.1;
next	1.149;

1.149
date	2012.01.29.17.28.01;	author ajacoutot;	state Exp;
branches;
next	1.148;

1.148
date	2012.01.17.16.50.29;	author ajacoutot;	state Exp;
branches;
next	1.147;

1.147
date	2012.01.01.09.00.46;	author ajacoutot;	state Exp;
branches;
next	1.146;

1.146
date	2011.11.16.15.34.54;	author ajacoutot;	state Exp;
branches;
next	1.145;

1.145
date	2011.11.13.15.16.17;	author ajacoutot;	state Exp;
branches;
next	1.144;

1.144
date	2011.11.12.13.14.21;	author ajacoutot;	state Exp;
branches;
next	1.143;

1.143
date	2011.10.19.15.04.45;	author ajacoutot;	state Exp;
branches;
next	1.142;

1.142
date	2011.10.19.06.38.16;	author robert;	state Exp;
branches;
next	1.141;

1.141
date	2011.10.18.06.46.24;	author espie;	state Exp;
branches;
next	1.140;

1.140
date	2011.10.14.15.25.40;	author ajacoutot;	state Exp;
branches;
next	1.139;

1.139
date	2011.10.08.08.29.56;	author ajacoutot;	state Exp;
branches;
next	1.138;

1.138
date	2011.10.07.17.19.51;	author ajacoutot;	state Exp;
branches;
next	1.137;

1.137
date	2011.10.04.09.37.09;	author nigel;	state Exp;
branches;
next	1.136;

1.136
date	2011.10.03.06.40.28;	author ajacoutot;	state Exp;
branches;
next	1.135;

1.135
date	2011.09.27.06.05.28;	author ajacoutot;	state Exp;
branches;
next	1.134;

1.134
date	2011.09.21.13.10.18;	author ajacoutot;	state Exp;
branches;
next	1.133;

1.133
date	2011.09.21.11.29.44;	author ajacoutot;	state Exp;
branches;
next	1.132;

1.132
date	2011.09.20.22.55.04;	author ajacoutot;	state Exp;
branches;
next	1.131;

1.131
date	2011.09.20.21.09.34;	author ajacoutot;	state Exp;
branches;
next	1.130;

1.130
date	2011.09.16.09.24.49;	author espie;	state Exp;
branches;
next	1.129;

1.129
date	2011.08.22.15.26.40;	author ajacoutot;	state Exp;
branches;
next	1.128;

1.128
date	2011.08.16.15.03.46;	author ajacoutot;	state Exp;
branches;
next	1.127;

1.127
date	2011.07.03.17.14.23;	author ajacoutot;	state Exp;
branches;
next	1.126;

1.126
date	2011.06.28.09.40.13;	author ajacoutot;	state Exp;
branches;
next	1.125;

1.125
date	2011.06.15.12.41.33;	author ajacoutot;	state Exp;
branches;
next	1.124;

1.124
date	2011.06.06.06.22.19;	author ajacoutot;	state Exp;
branches;
next	1.123;

1.123
date	2011.06.03.16.54.05;	author ajacoutot;	state Exp;
branches;
next	1.122;

1.122
date	2011.06.02.17.09.31;	author kili;	state Exp;
branches;
next	1.121;

1.121
date	2011.05.31.07.53.30;	author jasper;	state Exp;
branches;
next	1.120;

1.120
date	2011.05.28.21.15.47;	author ajacoutot;	state Exp;
branches;
next	1.119;

1.119
date	2011.05.28.08.15.53;	author ajacoutot;	state Exp;
branches;
next	1.118;

1.118
date	2011.05.28.07.38.01;	author ajacoutot;	state Exp;
branches;
next	1.117;

1.117
date	2011.05.28.07.32.06;	author ajacoutot;	state Exp;
branches;
next	1.116;

1.116
date	2011.05.27.08.25.14;	author ajacoutot;	state Exp;
branches;
next	1.115;

1.115
date	2011.05.24.09.10.23;	author ajacoutot;	state Exp;
branches;
next	1.114;

1.114
date	2011.05.23.16.36.13;	author ajacoutot;	state Exp;
branches;
next	1.113;

1.113
date	2011.05.21.07.05.09;	author ajacoutot;	state Exp;
branches;
next	1.112;

1.112
date	2011.05.11.06.22.17;	author ajacoutot;	state Exp;
branches;
next	1.111;

1.111
date	2011.05.09.12.37.04;	author ajacoutot;	state Exp;
branches;
next	1.110;

1.110
date	2011.04.28.13.07.53;	author ajacoutot;	state Exp;
branches;
next	1.109;

1.109
date	2011.04.14.14.02.17;	author ajacoutot;	state Exp;
branches;
next	1.108;

1.108
date	2011.04.01.20.09.54;	author ajacoutot;	state Exp;
branches;
next	1.107;

1.107
date	2011.03.21.18.11.28;	author ajacoutot;	state Exp;
branches;
next	1.106;

1.106
date	2011.03.14.11.31.24;	author ajacoutot;	state Exp;
branches;
next	1.105;

1.105
date	2011.03.07.20.02.41;	author jasper;	state Exp;
branches;
next	1.104;

1.104
date	2011.03.07.19.17.14;	author ajacoutot;	state Exp;
branches;
next	1.103;

1.103
date	2010.12.29.09.58.45;	author sebastia;	state Exp;
branches;
next	1.102;

1.102
date	2010.11.26.07.19.00;	author espie;	state Exp;
branches;
next	1.101;

1.101
date	2010.11.15.19.45.58;	author espie;	state Exp;
branches;
next	1.100;

1.100
date	2010.11.14.15.56.55;	author ajacoutot;	state Exp;
branches;
next	1.99;

1.99
date	2010.11.07.17.00.45;	author ajacoutot;	state Exp;
branches;
next	1.98;

1.98
date	2010.11.06.16.07.00;	author espie;	state Exp;
branches;
next	1.97;

1.97
date	2010.10.18.17.47.53;	author espie;	state Exp;
branches;
next	1.96;

1.96
date	2010.10.12.09.03.31;	author jasper;	state Exp;
branches;
next	1.95;

1.95
date	2010.10.11.20.41.44;	author kili;	state Exp;
branches;
next	1.94;

1.94
date	2010.10.04.06.28.09;	author ajacoutot;	state Exp;
branches;
next	1.93;

1.93
date	2010.09.30.07.17.19;	author ajacoutot;	state Exp;
branches;
next	1.92;

1.92
date	2010.09.24.16.20.40;	author ajacoutot;	state Exp;
branches;
next	1.91;

1.91
date	2010.08.31.07.04.12;	author ajacoutot;	state Exp;
branches;
next	1.90;

1.90
date	2010.08.30.22.03.58;	author jasper;	state Exp;
branches;
next	1.89;

1.89
date	2010.08.21.21.21.18;	author ajacoutot;	state Exp;
branches;
next	1.88;

1.88
date	2010.08.21.19.10.56;	author ajacoutot;	state Exp;
branches;
next	1.87;

1.87
date	2010.07.26.05.39.06;	author ajacoutot;	state Exp;
branches;
next	1.86;

1.86
date	2010.07.20.17.39.41;	author ajacoutot;	state Exp;
branches;
next	1.85;

1.85
date	2010.06.20.18.34.44;	author ajacoutot;	state Exp;
branches;
next	1.84;

1.84
date	2010.06.19.11.05.34;	author ajacoutot;	state Exp;
branches;
next	1.83;

1.83
date	2010.06.19.10.32.50;	author ajacoutot;	state Exp;
branches;
next	1.82;

1.82
date	2010.05.03.11.41.56;	author ajacoutot;	state Exp;
branches;
next	1.81;

1.81
date	2010.04.29.16.38.41;	author ajacoutot;	state Exp;
branches;
next	1.80;

1.80
date	2010.04.22.19.34.06;	author ajacoutot;	state Exp;
branches;
next	1.79;

1.79
date	2010.04.21.17.33.31;	author jasper;	state Exp;
branches;
next	1.78;

1.78
date	2010.04.21.15.11.00;	author ajacoutot;	state Exp;
branches;
next	1.77;

1.77
date	2010.04.20.20.05.34;	author jasper;	state Exp;
branches;
next	1.76;

1.76
date	2010.04.20.18.53.29;	author ajacoutot;	state Exp;
branches;
next	1.75;

1.75
date	2010.03.21.09.55.54;	author ajacoutot;	state Exp;
branches;
next	1.74;

1.74
date	2010.01.07.08.02.35;	author ajacoutot;	state Exp;
branches;
next	1.73;

1.73
date	2009.12.08.18.55.29;	author ajacoutot;	state Exp;
branches;
next	1.72;

1.72
date	2009.12.04.12.50.24;	author ajacoutot;	state Exp;
branches;
next	1.71;

1.71
date	2009.12.04.08.08.31;	author ajacoutot;	state Exp;
branches;
next	1.70;

1.70
date	2009.12.01.16.13.00;	author ajacoutot;	state Exp;
branches;
next	1.69;

1.69
date	2009.11.26.08.00.43;	author ajacoutot;	state Exp;
branches;
next	1.68;

1.68
date	2009.11.23.08.22.34;	author ajacoutot;	state Exp;
branches;
next	1.67;

1.67
date	2009.10.14.01.29.39;	author ajacoutot;	state Exp;
branches;
next	1.66;

1.66
date	2009.10.10.11.25.28;	author jasper;	state Exp;
branches;
next	1.65;

1.65
date	2009.10.07.15.07.49;	author ajacoutot;	state Exp;
branches;
next	1.64;

1.64
date	2009.10.04.18.17.13;	author ajacoutot;	state Exp;
branches;
next	1.63;

1.63
date	2009.08.29.10.20.28;	author ajacoutot;	state Exp;
branches;
next	1.62;

1.62
date	2009.07.12.20.38.09;	author ajacoutot;	state Exp;
branches;
next	1.61;

1.61
date	2009.04.21.13.02.12;	author ajacoutot;	state Exp;
branches;
next	1.60;

1.60
date	2009.04.13.09.03.34;	author ajacoutot;	state Exp;
branches;
next	1.59;

1.59
date	2009.03.22.19.33.39;	author jasper;	state Exp;
branches;
next	1.58;

1.58
date	2009.01.28.09.24.38;	author jasper;	state Exp;
branches
	1.58.2.1;
next	1.57;

1.57
date	2009.01.11.17.06.26;	author ajacoutot;	state Exp;
branches;
next	1.56;

1.56
date	2008.12.21.14.02.39;	author ajacoutot;	state Exp;
branches;
next	1.55;

1.55
date	2008.11.24.16.05.03;	author ajacoutot;	state Exp;
branches;
next	1.54;

1.54
date	2008.11.22.18.56.13;	author ajacoutot;	state Exp;
branches;
next	1.53;

1.53
date	2008.11.22.17.23.14;	author ajacoutot;	state Exp;
branches;
next	1.52;

1.52
date	2008.10.27.21.28.01;	author landry;	state Exp;
branches;
next	1.51;

1.51
date	2008.09.27.17.58.25;	author brad;	state Exp;
branches;
next	1.50;

1.50
date	2008.09.02.12.44.08;	author brad;	state Exp;
branches;
next	1.49;

1.49
date	2008.08.01.20.53.05;	author naddy;	state Exp;
branches;
next	1.48;

1.48
date	2008.07.24.10.02.57;	author martynas;	state Exp;
branches;
next	1.47;

1.47
date	2008.07.08.08.38.26;	author brad;	state Exp;
branches;
next	1.46;

1.46
date	2008.04.09.13.10.17;	author jasper;	state Exp;
branches;
next	1.45;

1.45
date	2008.02.13.12.01.53;	author sthen;	state Exp;
branches;
next	1.44;

1.44
date	2008.02.09.17.47.34;	author jasper;	state Exp;
branches;
next	1.43;

1.43
date	2008.01.22.18.27.25;	author ajacoutot;	state Exp;
branches;
next	1.42;

1.42
date	2007.12.05.14.31.24;	author steven;	state Exp;
branches;
next	1.41;

1.41
date	2007.11.18.16.28.55;	author steven;	state Exp;
branches;
next	1.40;

1.40
date	2007.10.31.21.50.51;	author winiger;	state Exp;
branches;
next	1.39;

1.39
date	2007.10.24.22.29.02;	author jasper;	state Exp;
branches;
next	1.38;

1.38
date	2007.09.13.10.51.13;	author djm;	state Exp;
branches;
next	1.37;

1.37
date	2007.09.10.19.13.33;	author jasper;	state Exp;
branches;
next	1.36;

1.36
date	2007.07.27.10.09.51;	author martin;	state Exp;
branches;
next	1.35;

1.35
date	2007.07.27.08.29.46;	author martin;	state Exp;
branches;
next	1.34;

1.34
date	2007.06.25.15.28.44;	author ajacoutot;	state Exp;
branches;
next	1.33;

1.33
date	2007.06.04.19.02.45;	author kurt;	state Exp;
branches;
next	1.32;

1.32
date	2007.05.12.20.21.37;	author jasper;	state Exp;
branches;
next	1.31;

1.31
date	2007.04.24.18.21.14;	author jasper;	state Exp;
branches;
next	1.30;

1.30
date	2007.04.23.16.22.07;	author jasper;	state Exp;
branches;
next	1.29;

1.29
date	2006.12.16.12.22.33;	author espie;	state Exp;
branches;
next	1.28;

1.28
date	2006.11.24.16.50.10;	author steven;	state Exp;
branches;
next	1.27;

1.27
date	2006.10.28.11.19.21;	author espie;	state Exp;
branches;
next	1.26;

1.26
date	2006.06.03.18.22.22;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2006.05.22.01.39.36;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2005.12.28.06.15.28;	author marcm;	state Exp;
branches;
next	1.23;

1.23
date	2005.11.13.06.22.02;	author marcm;	state Exp;
branches;
next	1.22;

1.22
date	2005.08.16.18.28.55;	author espie;	state Exp;
branches;
next	1.21;

1.21
date	2005.05.24.21.26.17;	author marcm;	state Exp;
branches;
next	1.20;

1.20
date	2005.04.14.17.06.18;	author espie;	state Exp;
branches;
next	1.19;

1.19
date	2004.12.22.06.31.05;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2004.12.07.06.16.20;	author marcm;	state Exp;
branches;
next	1.17;

1.17
date	2004.11.23.11.22.02;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2004.10.26.03.49.03;	author marcm;	state Exp;
branches;
next	1.15;

1.15
date	2004.09.16.04.13.56;	author marcm;	state Exp;
branches;
next	1.14;

1.14
date	2004.08.10.12.42.22;	author xsa;	state Exp;
branches;
next	1.13;

1.13
date	2004.08.08.17.12.55;	author marcm;	state Exp;
branches;
next	1.12;

1.12
date	2004.06.22.03.15.02;	author marcm;	state Exp;
branches;
next	1.11;

1.11
date	2004.02.04.07.39.18;	author sturm;	state Exp;
branches;
next	1.10;

1.10
date	2003.09.23.06.12.41;	author marcm;	state Exp;
branches;
next	1.9;

1.9
date	2003.06.30.03.55.29;	author marcm;	state Exp;
branches;
next	1.8;

1.8
date	2003.05.27.23.00.52;	author miod;	state Exp;
branches;
next	1.7;

1.7
date	2003.05.21.15.52.31;	author marcm;	state Exp;
branches;
next	1.6;

1.6
date	2003.04.17.05.55.42;	author marcm;	state Exp;
branches;
next	1.5;

1.5
date	2002.12.23.04.54.59;	author marcm;	state Exp;
branches;
next	1.4;

1.4
date	2002.08.08.19.20.28;	author nino;	state Exp;
branches;
next	1.3;

1.3
date	2002.08.07.13.11.53;	author nino;	state Exp;
branches;
next	1.2;

1.2
date	2002.07.28.12.00.51;	author nino;	state Exp;
branches;
next	1.1;

1.1
date	2002.07.25.09.14.13;	author nino;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2002.07.25.09.14.13;	author nino;	state Exp;
branches;
next	;

1.58.2.1
date	2009.06.19.02.29.47;	author william;	state Exp;
branches;
next	;

1.150.2.1
date	2012.04.12.15.38.29;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.259
log
@Stop patching for /var/lib/dbus -> /var/db/dbus; nowadays, most apps look
into /etc/machine-id *before* looking into /var/lib/dbus/machine-id and for
the few that don't patch them to look directly there.

Thanks sthen@@ for the source ports seach.
@
text
@# $OpenBSD: Makefile,v 1.258 2017/04/11 07:25:38 ajacoutot Exp $

COMMENT=		general-purpose utility library

GNOME_PROJECT=		glib
GNOME_VERSION=		2.52.1
PKGNAME=		${DISTNAME:S/glib/glib2/}

REVISION=		0

CATEGORIES=		devel

HOMEPAGE=		http://www.gtk.org/

MAINTAINER=		Antoine Jacoutot <ajacoutot@@openbsd.org>

# according to upstream, there should never be a need to bump major; doing so
# would trigger an abort():
# GLib-GObject:ERROR:gvaluetypes.c:457:_g_value_types_init:
# assertion failed: (type == G_TYPE_CHAR)
SHARED_LIBS +=  glib-2.0             4200.5   # 5200.1
SHARED_LIBS +=  gmodule-2.0          4200.5   # 5200.1
SHARED_LIBS +=  gthread-2.0          4200.5   # 5200.1
SHARED_LIBS +=  gobject-2.0          4200.5   # 5200.1
SHARED_LIBS +=  gio-2.0              4200.5   # 5200.1

# LGPLv2
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c elf ffi iconv intl pcre pthread z

MODULES=		lang/python \
			x11/gnome

MODGNOME_TOOLS=		docbook

LIB_DEPENDS=		devel/gettext \
			devel/pcre \
			devel/libelf \
			devel/libffi

# need X11 because DBus is used in the GDBus test cases;
# also requires bumped limits (stack >= 24576)
BUILD_DEPENDS +=	x11/dbus
TEST_IS_INTERACTIVE=	x11
TEST_DEPENDS=		devel/desktop-file-utils \
			x11/dbus

CONFIGURE_STYLE=	gnu
CONFIGURE_ARGS=		--enable-static \
			--with-pcre=system \
			--disable-fam

.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mgcc3}
PATCH_LIST=	patch-* gcc3-*
.endif

pre-configure:
	sed -i -e "s,/usr/local,${LOCALBASE},g;" \
		-e "s,/etc/xdg,${SYSCONFDIR}/xdg,g" \
		${WRKSRC}/glib/gutils.c \
		${WRKSRC}/gio/xdgmime/xdgmime.c
	sed -i "s,/usr/share/locale,${LOCALBASE}/share/locale,g" \
		${WRKSRC}/glib/gcharset.c
	sed -i "s,/usr/share/applications,${LOCALBASE}/share/applications,g" \
		${WRKSRC}/gio/tests/desktop-app-info.c
	sed -i "s,/usr/share,${PREFIX}/share,g" \
		${WRKSRC}/docs/reference/gio/html/glib-compile-schemas.html \
		${WRKSRC}/docs/reference/gio/glib-compile-schemas.xml

.include <bsd.port.mk>
@


1.258
log
@Update to glib2-2.52.1.
- survived a bulk
- this officially starts the work on updating GNOME to 3.24.1
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.257 2017/02/13 16:07:52 ajacoutot Exp $
d9 2
a70 4
	sed -i "s,/var/lib/dbus,/var/db/dbus,g" \
		${WRKSRC}/gio/gdbusconnection.c \
		${WRKSRC}/gio/gdbusprivate.c \
		${WRKSRC}/po/*.po
@


1.257
log
@Update to glib2-2.50.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.256 2016/11/07 16:24:59 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.50.3
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.4   # 5000.3
SHARED_LIBS +=  gmodule-2.0          4200.4   # 5000.3
SHARED_LIBS +=  gthread-2.0          4200.4   # 5000.3
SHARED_LIBS +=  gobject-2.0          4200.4   # 5000.3
SHARED_LIBS +=  gio-2.0              4200.4   # 5000.3
@


1.256
log
@Update to glib2-2.50.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.255 2016/10/28 13:40:04 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.50.2
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.4   # 5000.2
SHARED_LIBS +=  gmodule-2.0          4200.4   # 5000.2
SHARED_LIBS +=  gthread-2.0          4200.4   # 5000.2
SHARED_LIBS +=  gobject-2.0          4200.4   # 5000.2
SHARED_LIBS +=  gio-2.0              4200.4   # 5000.2
@


1.255
log
@Update to glib2-2.50.1.
This starts the GNOME 3.22 update which will be finished next week at b2k16.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.254 2016/08/21 12:39:47 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.50.1
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.4   # 5000.1
SHARED_LIBS +=  gmodule-2.0          4200.4   # 5000.1
SHARED_LIBS +=  gthread-2.0          4200.4   # 5000.1
SHARED_LIBS +=  gobject-2.0          4200.4   # 5000.1
SHARED_LIBS +=  gio-2.0              4200.4   # 5000.1
@


1.254
log
@Update to glib2-2.48.2.
- drop the gettext MODULE
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.253 2016/05/10 10:02:58 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.48.2
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.3   # 4800.2
SHARED_LIBS +=  gmodule-2.0          4200.3   # 4800.2
SHARED_LIBS +=  gthread-2.0          4200.3   # 4800.2
SHARED_LIBS +=  gobject-2.0          4200.3   # 4800.2
SHARED_LIBS +=  gio-2.0              4200.3   # 4800.2
@


1.253
log
@Update to glib2-2.48.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.252 2016/04/18 06:46:30 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.48.1
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.3   # 4800.1
SHARED_LIBS +=  gmodule-2.0          4200.3   # 4800.1
SHARED_LIBS +=  gthread-2.0          4200.3   # 4800.1
SHARED_LIBS +=  gobject-2.0          4200.3   # 4800.1
SHARED_LIBS +=  gio-2.0              4200.3   # 4800.1
d28 1
a28 1
WANTLIB += c elf ffi pcre pthread z
d30 1
a30 2
MODULES=		devel/gettext \
			lang/python \
d35 2
a36 1
LIB_DEPENDS=		devel/pcre \
@


1.252
log
@Update to glib2-2.48.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.251 2015/12/22 08:52:02 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.48.0
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.3   # 4800.0
SHARED_LIBS +=  gmodule-2.0          4200.3   # 4800.0
SHARED_LIBS +=  gthread-2.0          4200.3   # 4800.0
SHARED_LIBS +=  gobject-2.0          4200.3   # 4800.0
SHARED_LIBS +=  gio-2.0              4200.3   # 4800.0
@


1.251
log
@Sync patch with what's in the BZ.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.250 2015/11/07 05:52:09 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.46.2
a7 1
REVISION=		0
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.2   # 4600.2
SHARED_LIBS +=  gmodule-2.0          4200.2   # 4600.2
SHARED_LIBS +=  gthread-2.0          4200.2   # 4600.2
SHARED_LIBS +=  gobject-2.0          4200.2   # 4600.2
SHARED_LIBS +=  gio-2.0              4200.2   # 4600.2
@


1.250
log
@Update to glib2-2.46.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.249 2015/10/18 06:33:54 ajacoutot Exp $
d8 1
@


1.249
log
@Better workaround for BZ #753378.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.248 2015/10/14 17:10:53 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.46.1
a7 1
REVISION=		0
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.2   # 4600.1
SHARED_LIBS +=  gmodule-2.0          4200.2   # 4600.1
SHARED_LIBS +=  gthread-2.0          4200.2   # 4600.1
SHARED_LIBS +=  gobject-2.0          4200.2   # 4600.1
SHARED_LIBS +=  gio-2.0              4200.2   # 4600.1
@


1.248
log
@Update to glib2-2.46.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.247 2015/09/24 10:23:42 ajacoutot Exp $
d8 1
@


1.247
log
@Update to glib2-2.46.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.246 2015/05/13 06:13:30 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.46.0
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.2   # 4600.0
SHARED_LIBS +=  gmodule-2.0          4200.2   # 4600.0
SHARED_LIBS +=  gthread-2.0          4200.2   # 4600.0
SHARED_LIBS +=  gobject-2.0          4200.2   # 4600.0
SHARED_LIBS +=  gio-2.0              4200.2   # 4600.0
@


1.246
log
@Update to glib2-2.44.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.245 2015/04/05 09:00:53 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.44.1
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.1   # 4400.1
SHARED_LIBS +=  gmodule-2.0          4200.1   # 4400.1
SHARED_LIBS +=  gthread-2.0          4200.1   # 4400.1
SHARED_LIBS +=  gobject-2.0          4200.1   # 4400.1
SHARED_LIBS +=  gio-2.0              4200.1   # 4400.1
d58 1
a58 1
	perl -pi -e "s,/usr/local,${LOCALBASE},g;" \
d62 1
a62 1
	perl -pi -e "s,/usr/share/locale,${LOCALBASE}/share/locale,g" \
d64 1
a64 1
	perl -pi -e "s,/usr/share/applications,${LOCALBASE}/share/applications,g" \
d66 1
a66 1
	perl -pi -e "s,/usr/share,${PREFIX}/share,g" \
d69 1
a69 1
	perl -pi -e "s,/var/lib/dbus,/var/db/dbus,g" \
@


1.245
log
@Remove dlopen() hack. guenther@@ is working on the underlying issue and it
makes it easier for people to test his diffs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.244 2015/03/27 16:00:00 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.44.0
a7 1
REVISION=		0
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             4200.1   # 4400.0
SHARED_LIBS +=  gmodule-2.0          4200.1   # 4400.0
SHARED_LIBS +=  gthread-2.0          4200.1   # 4400.0
SHARED_LIBS +=  gobject-2.0          4200.1   # 4400.0
SHARED_LIBS +=  gio-2.0              4200.1   # 4400.0
@


1.244
log
@Update to glib2-2.44.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.243 2015/03/21 11:34:10 jung Exp $
d8 1
@


1.243
log
@add a workaround patch to make gmodule dlclose a noop
for now, this unbreaks (at least) webkit based browsers like surf and vimb

issue reported to upstream in bug #746536

hints and debug pointers from sthen@@ czarkoff@@ and guenther@@
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.242 2015/03/15 08:32:41 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.42.2
REVISION=		0
d15 9
a23 5
SHARED_LIBS +=  glib-2.0             4200.0   # 4200.2
SHARED_LIBS +=  gmodule-2.0          4200.0   # 4200.2
SHARED_LIBS +=  gthread-2.0          4200.0   # 4200.2
SHARED_LIBS +=  gobject-2.0          4200.0   # 4200.2
SHARED_LIBS +=  gio-2.0              4200.0   # 4200.2
d34 1
a34 1
MODGNOME_TOOLS +=	docbook
@


1.242
log
@Update to glib2-2.42.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.241 2014/11/21 23:53:14 sthen Exp $
d7 1
@


1.241
log
@zap stray apostrophe in DESCR, ok ajacoutot@@

(also forces an update, I had some weird issues with firefox hanging after
a snapshot update which seemed to go away after forcing this to be updated).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.240 2014/11/13 17:25:52 ajacoutot Exp $
d6 1
a6 2
GNOME_VERSION=		2.42.1
REVISION=		0
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             4200.0   # 4200.0
SHARED_LIBS +=  gmodule-2.0          4200.0   # 4200.0
SHARED_LIBS +=  gthread-2.0          4200.0   # 4200.0
SHARED_LIBS +=  gobject-2.0          4200.0   # 4200.0
SHARED_LIBS +=  gio-2.0              4200.0   # 4200.0
@


1.240
log
@Update to glib2-2.42.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.239 2014/10/22 15:58:37 ajacoutot Exp $
d7 1
@


1.239
log
@Merge a few bug fixes from upstream stable branch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.238 2014/10/08 09:34:30 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.42.0
a7 1
REVISION=		1
@


1.238
log
@Merge a bugfix from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.237 2014/10/01 08:39:25 ajacoutot Exp $
d8 1
a8 1
REVISION=		0
@


1.237
log
@Update to glib2-2.42.0.

bulk testing and ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.236 2014/09/23 06:15:21 ajacoutot Exp $
d8 1
@


1.236
log
@Update to glib2-2.40.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.235 2014/09/20 16:23:45 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.40.2
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             4000.0   # 4002.0
SHARED_LIBS +=  gmodule-2.0          4000.0   # 4002.0
SHARED_LIBS +=  gthread-2.0          4000.0   # 4002.0
SHARED_LIBS +=  gobject-2.0          4000.0   # 4002.0
SHARED_LIBS +=  gio-2.0              4000.0   # 4002.0
a51 4

# XXX rm at next major release; patch-configure_ac
CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.69
@


1.235
log
@Update to glib2-2.40.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.234 2014/04/20 21:18:53 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.40.1
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             4000.0   # 4001.0
SHARED_LIBS +=  gmodule-2.0          4000.0   # 4001.0
SHARED_LIBS +=  gthread-2.0          4000.0   # 4001.0
SHARED_LIBS +=  gobject-2.0          4000.0   # 4001.0
SHARED_LIBS +=  gio-2.0              4000.0   # 4001.0
@


1.234
log
@Fix platform_get_argv0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.233 2014/04/10 16:52:02 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.40.0
a7 1
REVISION=		7
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             4000.0   # 4000.0
SHARED_LIBS +=  gmodule-2.0          4000.0   # 4000.0
SHARED_LIBS +=  gthread-2.0          4000.0   # 4000.0
SHARED_LIBS +=  gobject-2.0          4000.0   # 4000.0
SHARED_LIBS +=  gio-2.0              4000.0   # 4000.0
d53 1
a53 1
# XXX rm at next release; patch-configure_ac, patch-gobject_Makefile_in
@


1.233
log
@Unbreak gapplication-tool (upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.232 2014/04/10 09:13:00 ajacoutot Exp $
d8 1
a8 1
REVISION=		6
@


1.232
log
@Unset LIBS to that configure checks that unset LDFLAGS do not fail because
of not being able to find libintl.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.231 2014/04/10 08:45:07 ajacoutot Exp $
d8 1
a8 1
REVISION=		5
@


1.231
log
@Do not force -pthread in LDFLAGS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.230 2014/04/10 07:29:06 ajacoutot Exp $
d8 1
a8 1
REVISION=		4
@


1.230
log
@Bring a couple fixes from upstream:
- fix certificate list parsing with trailing comments
- never unload libgobject (fixes a segfault under some circumstances)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.229 2014/04/10 05:43:26 ajacoutot Exp $
d8 1
a8 1
REVISION=		3
@


1.229
log
@g_str_has_prefix: don't call strlen(str) (BZ #727890).
This prevents a segfault when using WebKit browsers.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.228 2014/04/06 12:17:29 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
d53 4
@


1.228
log
@Merge some relevant bug fixes from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.227 2014/04/02 09:36:10 jasper Exp $
d8 1
a8 1
REVISION=		1
@


1.227
log
@cleanup double spaces and sort MODGNOME_TOOLS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.226 2014/04/01 18:06:28 jasper Exp $
d8 1
a8 1
REVISION=		0
@


1.226
log
@merge various MODGNOME_TOOLS lines into a single line (or two if it would
exceed 80 chars); no functional change intended..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.225 2014/03/28 08:48:41 ajacoutot Exp $
d31 1
a31 1
MODGNOME_TOOLS +=		docbook
@


1.225
log
@Move to the new MODGNOME_TOOLS docbook option.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.224 2014/03/27 09:00:40 ajacoutot Exp $
d31 1
a31 1
MODGNOME_TOOLS=		docbook
@


1.224
log
@Consistency in the gio-querymodules call.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.223 2014/03/26 08:28:15 ajacoutot Exp $
d31 1
a31 2
# man pages
BUILD_DEPENDS +=	textproc/docbook-xsl
@


1.223
log
@Update to glib2-2.40.0.
First step of the road to GNOME 3.12...

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.222 2014/02/22 10:14:56 stsp Exp $
d8 1
@


1.222
log
@Fix bug in glib's gio that could make XFCE's Thunar crash and make GNOME's
Nautilus hang when unmounting devices. Patch filed upstream (bz 724916).
ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.221 2014/01/21 17:37:56 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.38.2
a7 1
REVISION=		6
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3800.0   # 3800.2
SHARED_LIBS +=  gmodule-2.0          3800.0   # 3800.2
SHARED_LIBS +=  gthread-2.0          3800.0   # 3800.2
SHARED_LIBS +=  gobject-2.0          3800.0   # 3800.2
SHARED_LIBS +=  gio-2.0              3800.0   # 3800.2
@


1.221
log
@Add more paths to system_internal.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.220 2014/01/13 08:54:39 ajacoutot Exp $
d8 1
a8 1
REVISION=		5
@


1.220
log
@Fix some hardcoded "/usr/share".
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.219 2014/01/03 16:01:53 ajacoutot Exp $
d8 1
a8 1
REVISION=		4
@


1.219
log
@From upstream: g_get_current_dir(): consult PWD first
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.218 2013/12/26 10:07:07 ajacoutot Exp $
d8 1
a8 1
REVISION=		3
a56 2
		-e "s,/usr/share/locale,${LOCALBASE}/share/locale,g;" \
		-e "s,/usr/share/applications,${LOCALBASE}/share/applications,g;" \
d58 7
a64 2
		${WRKSRC}/glib/gutils.c ${WRKSRC}/gio/xdgmime/xdgmime.c \
		${WRKSRC}/gio/tests/desktop-app-info.c \
d66 1
a66 1
		${WRKSRC}/docs/reference/gio/glib-compile-schemas.1
@


1.218
log
@Fix a potential deadlock in the kqueue code.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.217 2013/12/09 19:49:20 ajacoutot Exp $
d8 1
a8 1
REVISION=		2
@


1.217
log
@Slightly rework the eject(1) case.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.216 2013/12/07 18:42:54 ajacoutot Exp $
d8 1
a8 1
REVISION=		1
@


1.216
log
@GDBusObjectManagerClient: keep the manager alive while firing signals
(from upstream).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.215 2013/11/12 16:17:58 ajacoutot Exp $
d8 1
a8 1
REVISION=		0
@


1.215
log
@Update to glib2-2.38.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.214 2013/10/16 07:40:54 ajacoutot Exp $
d8 1
@


1.214
log
@Update to glib2-2.38.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.213 2013/09/25 12:37:06 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.38.1
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3800.0   # 3800.1
SHARED_LIBS +=  gmodule-2.0          3800.0   # 3800.1
SHARED_LIBS +=  gthread-2.0          3800.0   # 3800.1
SHARED_LIBS +=  gobject-2.0          3800.0   # 3800.1
SHARED_LIBS +=  gio-2.0              3800.0   # 3800.1
@


1.213
log
@Major update to glib2-2.38.0 -- requirement for the WIP GNOME 3.10 update.
This and the following updates: atk, gdk-pixbuf2, pango, at-spi2-core,
at-spi2-atk, py-atspi and gtk+3 have been tested in a bulk by landry@@ (10x!)

Fallouts are:
- x11/gnome/anjuta: will be fixed within the next 2 or 3 days by the 3.10 update
- www/chromium: robert@@ is working on an update (removing -Werror should also
allow it to build)

ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.212 2013/09/19 11:56:10 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.38.0
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3800.0   # 3800.0
SHARED_LIBS +=  gmodule-2.0          3800.0   # 3800.0
SHARED_LIBS +=  gthread-2.0          3800.0   # 3800.0
SHARED_LIBS +=  gobject-2.0          3800.0   # 3800.0
SHARED_LIBS +=  gio-2.0              3800.0   # 3800.0
@


1.212
log
@Correctly flag hasmntopt usage, from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.211 2013/09/19 11:35:22 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.36.4
a7 1
REVISION=		1
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3600.1   # 3600.3
SHARED_LIBS +=  gmodule-2.0          3600.1   # 3600.3
SHARED_LIBS +=  gthread-2.0          3600.1   # 3600.3
SHARED_LIBS +=  gobject-2.0          3600.1   # 3600.3
SHARED_LIBS +=  gio-2.0              3600.1   # 3600.3
d44 1
a44 1
#CONFIGURE_STYLE=	gnu
a47 4

CONFIGURE_STYLE=	autoconf
AUTOCONF_VERSION=	2.69
CONFIGURE_ARGS +=	--disable-maintainer-mode
@


1.211
log
@Sync patch-gio_gunixmounts_c with FreeBSD.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.210 2013/08/28 07:46:09 ajacoutot Exp $
d8 1
a8 1
REVISION=		0
@


1.210
log
@Properly detect atomic ops.

prodded by miod@@ and tested by myself on sparc
patch from sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.209 2013/08/23 07:55:30 ajacoutot Exp $
d8 1
@


1.209
log
@Patch away -Wstrict-aliasing on GCC3 platforms where it's not supported.
prodded by miod@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.208 2013/08/07 16:25:34 ajacoutot Exp $
d44 1
a44 1
CONFIGURE_STYLE=	gnu
d47 5
a51 1
			--disable-fam --disable-maintainer-mode
@


1.208
log
@Update to glib2-2.36.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.207 2013/06/10 05:56:15 ajacoutot Exp $
d48 5
@


1.207
log
@Update to glib2-2.36.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.206 2013/05/13 15:16:01 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.36.3
@


1.206
log
@Update to glib2-2.36.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.205 2013/05/09 14:06:38 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.36.2
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3600.1   # 3600.1
SHARED_LIBS +=  gmodule-2.0          3600.1   # 3600.1
SHARED_LIBS +=  gthread-2.0          3600.1   # 3600.1
SHARED_LIBS +=  gobject-2.0          3600.1   # 3600.1
SHARED_LIBS +=  gio-2.0              3600.1   # 3600.1
@


1.205
log
@Merge some patches from upstream to fix a couple of crashes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.204 2013/04/16 06:01:54 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.36.1
a7 2

REVISION=		0
@


1.204
log
@Update to glib2-2.36.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.203 2013/04/05 19:20:26 jturner Exp $
d8 2
@


1.203
log
@Unbreak on mips64(el) platforms.
Add g_atomic_int_get and g_atomic_pointer_get const patch which was also
submitted upstream.

ok aja@@ bcallah@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.202 2013/04/05 06:33:21 ajacoutot Exp $
d6 1
a6 1
GNOME_VERSION=		2.36.0
a7 1
REVISION=		1
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3600.0   # 3600.0
SHARED_LIBS +=  gmodule-2.0          3600.0   # 3600.0
SHARED_LIBS +=  gthread-2.0          3600.0   # 3600.0
SHARED_LIBS +=  gobject-2.0          3600.0   # 3600.0
SHARED_LIBS +=  gio-2.0              3600.0   # 3600.0
@


1.202
log
@Add interface-after-init exception for glibmm and gtk# ; from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.201 2013/03/27 17:49:34 ajacoutot Exp $
d8 1
a8 1
REVISION=		0
@


1.201
log
@Major update to glib2-2.36.0.
*huge* thank to landry@@ for running a bulk with this diff and the few
others that are going to be committed and for informing me of the
breakage that needed some love.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.200 2013/03/21 08:45:15 ajacoutot Exp $
d8 1
@


1.200
log
@USE_LIBTOOL=Yes is the default now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.199 2013/03/11 10:50:04 espie Exp $
d5 2
a6 2
V=			2.34.3
DISTNAME=		glib-${V}
a7 1
EXTRACT_SUFX=		.tar.xz
d15 5
a19 5
SHARED_LIBS +=  glib-2.0             3400.0   # 3400.3
SHARED_LIBS +=  gmodule-2.0          3400.0   # 3400.3
SHARED_LIBS +=  gthread-2.0          3400.0   # 3400.3
SHARED_LIBS +=  gobject-2.0          3400.0   # 3400.3
SHARED_LIBS +=  gio-2.0              3400.0   # 3400.3
a25 2
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/${V:C/^([0-9]+\.[0-9]+).*/\1/}/}

d27 2
a28 5
			lang/python

MODPY_ADJ_FILES=	glib/gtester-report \
			gio/gdbus-2.0/codegen/gdbus-codegen.in \
			gio/tests/gdbus-testserver.py
d31 1
a31 2
BUILD_DEPENDS +=	textproc/docbook>=4.5p1 \
			textproc/libxslt
d41 2
a42 6
TEST_DEPENDS=	devel/desktop-file-utils \
			devel/py-gobject \
			devel/py-gobject3 \
			x11/dbus-python

USE_GMAKE=		Yes
d45 1
a45 2
CONFIGURE_ARGS=		${CONFIGURE_SHARED} \
			--enable-static \
d47 1
a47 30
			--disable-gtk-doc \
			--disable-fam \
			--disable-selinux \
			--disable-systemtap \
			--disable-xattr

CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
			LDFLAGS="-L${LOCALBASE}/lib"

# If one of these tools is found at configure stage, it might be used,
# no matter whether we use --disable-gtk-doc or not.
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""

### kqueue(2) backend ##################################################
# https://bugzilla.gnome.org/show_bug.cgi?id=679793
AUTOMAKE_VERSION=	1.11
AUTOCONF_VERSION=	2.68
BUILD_DEPENDS+=		${MODGNU_AUTOCONF_DEPENDS} \
			${MODGNU_AUTOMAKE_DEPENDS} \
			devel/libtool
MASTER_SITES0=		http://distfiles.bsdfrog.org/
PATCHFILES=		glib-gio-kqueue-2.34.2-v2.patch:0
PATCH_DIST_STRIP=	-p1
AUTO_ENV=		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
			AUTOCONF_VERSION=${AUTOCONF_VERSION}
post-patch:
	cd ${WRKSRC} && ${AUTO_ENV} autoreconf --force --install
### end of kqueue(1) backend ###########################################
@


1.199
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.198 2012/11/27 06:49:49 ajacoutot Exp $
a53 1
USE_LIBTOOL=		Yes
@


1.198
log
@Update to glib2-2.34.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.197 2012/11/14 19:05:49 ajacoutot Exp $
a23 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d47 2
a48 2
REGRESS_IS_INTERACTIVE=	x11
REGRESS_DEPENDS=	devel/desktop-file-utils \
@


1.197
log
@New iteration of the kqueue patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.196 2012/11/13 16:34:59 ajacoutot Exp $
d5 1
a5 1
V=			2.34.2
a9 2
REVISION=		1

d16 5
a20 5
SHARED_LIBS +=  glib-2.0             3400.0   # 3400.1
SHARED_LIBS +=  gmodule-2.0          3400.0   # 3400.1
SHARED_LIBS +=  gthread-2.0          3400.0   # 3400.1
SHARED_LIBS +=  gobject-2.0          3400.0   # 3400.1
SHARED_LIBS +=  gio-2.0              3400.0   # 3400.1
@


1.196
log
@New revision of the kqueue patch; hopefully to be pushed upstream soon...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.195 2012/11/10 07:37:06 ajacoutot Exp $
d10 1
a10 1
REVISION=		0
d88 1
a88 1
PATCHFILES=		glib-gio-kqueue-2.34.2-v1.patch:0
@


1.195
log
@Bugfix update to glib2-2.34.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.194 2012/11/07 08:17:56 ajacoutot Exp $
d10 2
a86 1
#MASTER_SITES0=		http://dmitrymatveev.co.uk/files/
d88 1
a88 1
PATCHFILES=		glib-gio-kqueue-2.32.4-v3.patch:0
@


1.194
log
@Fix a reference counting bug.

from kettenis@@ (thank you!)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.193 2012/10/16 14:18:09 ajacoutot Exp $
d5 1
a5 1
V=			2.34.1
a8 2

REVISION=		0
@


1.193
log
@Add devel/py-gobject3 to REGRESS_DEPENDS.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.192 2012/10/16 06:30:46 ajacoutot Exp $
d9 2
@


1.192
log
@Maintenance update to glib2-2.34.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.191 2012/10/12 20:54:23 ajacoutot Exp $
d53 1
@


1.191
log
@Ok, at the time we had 100 tests failing it made sense to keep running the regression suite.
Nowadays, we want to actually stop on errors so that we can see and fix them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.190 2012/10/06 13:53:46 ajacoutot Exp $
d5 1
a5 1
V=			2.34.0
d16 5
a20 5
SHARED_LIBS +=  glib-2.0             3400.0   # 3400.0
SHARED_LIBS +=  gmodule-2.0          3400.0   # 3400.0
SHARED_LIBS +=  gthread-2.0          3400.0   # 3400.0
SHARED_LIBS +=  gobject-2.0          3400.0   # 3400.0
SHARED_LIBS +=  gio-2.0              3400.0   # 3400.0
@


1.190
log
@No need to include bsd.port.arch.mk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.189 2012/10/02 20:56:18 landry Exp $
a50 1
REGRESS_FLAGS=		GTESTER="${WRKBUILD}/glib/gtester -k"
@


1.189
log
@Tighten the BUILD_DEPENDS on the fixed version of docbook to avoid
failing during package step because of missing manpages..
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.188 2012/09/27 17:38:18 ajacoutot Exp $
a93 2

.include <bsd.port.arch.mk>
@


1.188
log
@Tweak after recent docbook changes.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.187 2012/09/24 04:11:50 ajacoutot Exp $
d40 1
a40 1
BUILD_DEPENDS +=	textproc/docbook \
@


1.187
log
@Update to stable glib2-2.34.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.186 2012/09/21 14:48:05 ajacoutot Exp $
a60 1
			--with-xml-catalog=${LOCALBASE}/share/xml/catalog \
@


1.186
log
@Stupid autohell is stupid...
The situation is this: even when we --disable-gtk-doc, if gtk-doc is
actually installed at configure stage, tools like gtkdoc-rebase will be
picked up and run during the install target. That is bad because the
gtk-doc package may have been removed by then, especially during dpb(1)
bulks (we explicitely disable support for it so why should it stay...).

So for now, let's add the following env to configure whenever we use
--disable-gtk-doc, until a bettersolution is found...
CONFIGURE_ENV +=ac_cv_path_GTKDOC_CHECK="" \
		ac_cv_path_GTKDOC_REBASE="" \
		ac_cv_path_GTKDOC_MKPDF=""
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.185 2012/09/21 13:16:49 ajacoutot Exp $
d5 1
a5 1
V=			2.33.14
@


1.185
log
@It's this time of the year again... update glib2 to the latest
available development release (glib2-2.33.14). A new stable is supposed
to come out within the next 2 weeks and we want to be proactive and get
some things in tree before the big GNOME 3.6 update that we will work on
at p2k12.

big thank to jasper@@ for running this and the upcoming updates in a bulk
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.184 2012/09/18 13:05:59 ajacoutot Exp $
d72 6
@


1.184
log
@Rely on g_mount_can_unmount() from GLib for the gio-kqueue backend to
choose between kqueue(3) or poll(2) for monitoring. This allows dropping
the need for a gio-kqueue.conf file.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.183 2012/09/07 14:40:59 ajacoutot Exp $
d5 1
a5 1
V=			2.32.4
a9 2
REVISION=		3

d16 5
a20 5
SHARED_LIBS +=  glib-2.0             3200.0   # 3200.0
SHARED_LIBS +=  gmodule-2.0          3200.0   # 3200.0
SHARED_LIBS +=  gthread-2.0          3200.0   # 3200.0
SHARED_LIBS +=  gobject-2.0          3200.0   # 3200.0
SHARED_LIBS +=  gio-2.0              3200.0   # 3200.0
d39 4
d61 1
a64 1
			--disable-Bsymbolic \
@


1.183
log
@Fix MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.182 2012/09/01 14:36:57 ajacoutot Exp $
d10 1
a10 1
REVISION=		2
d80 2
a81 1
PATCHFILES=		glib-gio-kqueue-2.32.1-v1.patch:0
a102 5

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/glib2
	${INSTALL_DATA} ${FILESDIR}/gio-kqueue.conf \
		${PREFIX}/share/examples/glib2
@


1.182
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.181 2012/08/30 10:08:46 ajacoutot Exp $
d5 2
a6 1
DISTNAME=		glib-2.32.4
d32 1
a32 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/${VERSION:C/^([0-9]+\.[0-9]+).*/\1/}/}
@


1.181
log
@Merge -docs into -main.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.180 2012/08/29 16:06:56 ajacoutot Exp $
d9 1
a9 1
REVISION=		1
@


1.180
log
@Don't need to patch this anymore.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.179 2012/07/15 08:10:41 ajacoutot Exp $
d3 1
a3 2
COMMENT-main=		general-purpose utility library
COMMENT-docs=		glib2 documentation
d5 2
a6 2
VERSION=		2.32.4
DISTNAME=		glib-${VERSION}
d9 1
a9 4
PKGNAME-main=		glib2-${VERSION}
PKGNAME-docs=		glib2-docs-${VERSION}

REVISION-main=		0
d29 2
a32 2
MULTI_PACKAGES=		-main -docs

d40 1
a40 4
WANTLIB-main += ${WANTLIB} c elf ffi pcre pthread z

LIB_DEPENDS-main=	${LIB_DEPENDS} \
			devel/pcre \
a42 5

PKG_ARCH-docs=		*
WANTLIB-docs=
LIB_DEPENDS-docs=
RUN_DEPENDS-docs=
@


1.179
log
@Bugfix update to glib2-2.32.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.178 2012/07/12 11:40:52 ajacoutot Exp $
d12 2
@


1.178
log
@BZ link.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.177 2012/07/12 11:20:25 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.32.3
a11 2

REVISION-main=		3
@


1.177
log
@typo in comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.176 2012/07/09 16:34:21 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		2
d82 2
a83 1
### kqueue(1) backend ##################################################
@


1.176
log
@Use G_N_ELEMENTS instead of nitems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.175 2012/07/06 16:25:05 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		1
@


1.175
log
@Remove unneeded chunk.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.174 2012/05/15 06:31:34 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		0
@


1.174
log
@Bugfix update to glib2-2.32.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.173 2012/05/01 06:17:01 ajacoutot Exp $
d12 2
@


1.173
log
@Bugfix update to glib 2.32.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.172 2012/04/23 12:49:47 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.32.2
@


1.172
log
@Do not warn about bad dconf paths. We do this temporarily so prevent
huge vomit from pkg_add when running glib-compile-schemas. Once most
applications are fixed, we'll remove this patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.171 2012/04/22 16:58:42 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.32.1
a11 2

REVISION-main=		3
@


1.171
log
@Use a new version of the gio-kqueue patch that already has one of our
local patches.
Merge the cocoa/foundation patches from upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.170 2012/04/17 13:29:24 jasper Exp $
d13 1
a13 1
REVISION-main=		2
@


1.170
log
@apply patch from upstream git to fix resources on big endian architectures

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.169 2012/04/16 10:04:49 landry Exp $
a10 1
REVISION-main=		1
d13 2
d90 1
a90 1
PATCHFILES=		glib-gio-kqueue-2.28.8-v4.patch:0
@


1.169
log
@apply patch from https://bugzilla.gnome.org/attachment.cgi?id=212002,
from gnome bug #669260

gmain: block child sources when blocking the parent

When blocking a source that has child sources, we need to consider the
children blocked as well. Otherwise they will still trigger repeatedly
in an inner loop started from the parent source's callback.

Fixes download dialog not rendered upon certain mimetypes on midori,
see https://bugs.launchpad.net/midori/+bug/780133
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.168 2012/04/14 07:47:55 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		0
@


1.168
log
@Minor update to glib2-2.32.1.

Note that some paths in gsettings have been deprecated
(/apps/, /desktop/ and /system/) which means that glib-compile-schemas
will now complain about them (just a warning).
It is up to the application itself to fix its schemas.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.167 2012/04/13 16:00:46 dcoppa Exp $
d11 1
@


1.167
log
@gthread-posix: fix typo in error message

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.166 2012/04/12 20:23:03 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.32.0
a11 2

REVISION-main=		6
@


1.166
log
@Remove oldies...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.165 2012/04/08 07:45:30 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		5
@


1.165
log
@Set ke_debug_enabled to FALSE by default.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.164 2012/04/06 12:06:51 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		4
@


1.164
log
@Limits need to be cranked for the regress tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.163 2012/04/04 13:41:38 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		3
@


1.163
log
@Update the gio-kqueue patch to the latest release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.162 2012/04/01 13:38:07 ajacoutot Exp $
d57 1
a57 1
# also requires bumped limits (nofiles >= 512)
@


1.162
log
@The disabling gcc optimisation hacks is not needed anymore on 64bits archs.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.161 2012/03/31 18:27:35 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		2
d90 1
a90 2
PATCH_DIST_STRIP=	-p2
PATCHFILES=		glib-gio-kqueue-2.28.8-v3.1.patch:0
a93 2
	perl -pi -e 's,#include <sys/event.h>,#include <sys/types.h>\n#include <sys/event.h>,' \
		${WRKSRC}/gio/kqueue/{kqueue-helper,kqueue-thread,kqueue-utils}.c
d112 5
@


1.161
log
@Remove a non applicable XXX.
Use pkg-config(1) to deal with libelf cflags/ldflags instead of
patching.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.160 2012/03/30 10:25:35 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		1
a102 10
# XXX
# SIGSEGV on LP64_ARCHS at gclosure.c:290: i = closure->n_guards;
# -> reproduce by adding a meeting|appointment under evolution into the
# _local_ calendar for an already _passed_ date and running:
# /usr/local/libexec/evolution/3.2/evolution-alarm-notify
.if ${PROPERTIES:Mlp64}
	perl -pi -e 's,CFLAGS = \@@CFLAGS\@@,CFLAGS = \@@CFLAGS\@@ -O0,' \
		${WRKSRC}/gobject/Makefile.in
.endif

@


1.160
log
@Fix logic to repair mounts monitoring.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.159 2012/03/25 21:46:52 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		0
d44 1
a44 3
BUILD_DEPENDS=		devel/libelf

WANTLIB-main += ${WANTLIB} c pthread z pcre ffi
d47 2
a48 1
			devel/pcre>=8.13 \
a77 4

# XXX tries to run automake-1.11 if installed
# (check again when updating to a stable release)
CONFIGURE_ARGS +=	--disable-maintainer-mode
@


1.159
log
@Unbreak with libelf.

spotted by kili@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.158 2012/03/25 11:18:41 ajacoutot Exp $
d12 2
@


1.158
log
@Update to stable glib2-2.32.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.157 2012/03/23 14:36:37 ajacoutot Exp $
d41 2
@


1.157
log
@Update to glib2-2.31.22.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.156 2012/03/23 13:19:32 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.31.22
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             3200.0   # 3122.0
SHARED_LIBS +=  gmodule-2.0          3200.0   # 3122.0
SHARED_LIBS +=  gthread-2.0          3200.0   # 3122.0
SHARED_LIBS +=  gobject-2.0          3200.0   # 3122.0
SHARED_LIBS +=  gio-2.0              3200.0   # 3122.0
@


1.156
log
@Major update to glib2-2.31.20.
Note that this is a devel version but the new stable is expected within a
week or so. Committing now so that I have time to deal with the breakage
and can start the upcoming gnome3 update.

Please contact me _directly_ if you find any issue with it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.155 2012/03/12 07:21:06 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.31.20
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             3200.0   # 3120.0
SHARED_LIBS +=  gmodule-2.0          3200.0   # 3120.0
SHARED_LIBS +=  gthread-2.0          3200.0   # 3120.0
SHARED_LIBS +=  gobject-2.0          3200.0   # 3120.0
SHARED_LIBS +=  gio-2.0              3200.0   # 3120.0
@


1.155
log
@Minor update to glib 2.30.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.154 2012/03/06 11:39:17 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.30.3
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             2992.0   # 2992.0
SHARED_LIBS +=  gmodule-2.0          2992.0   # 2992.0
SHARED_LIBS +=  gthread-2.0          2992.0   # 2992.0
SHARED_LIBS +=  gobject-2.0          2992.0   # 2992.0
SHARED_LIBS +=  gio-2.0              2992.0   # 2992.0
d81 1
a81 1
			LDFLAGS="-L${LOCALBASE}/lib -pthread"
d89 4
a92 2
MASTER_SITES0=		http://dmitrymatveev.co.uk/files/
PATCHFILES=		glib-gio-kqueue-2.28.8-v3.patch:0
@


1.154
log
@Remove MONOTONIC_CLOCK hack since sysconf(3) has support for it now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.153 2012/02/21 09:22:33 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.30.2
a11 2

REVISION-main=		7
@


1.153
log
@Explain XXX a bit more so that people can try and reproduce it easily if
they want to help fix this 64bit arches crash.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.152 2012/02/18 17:02:22 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		6
d82 1
a82 7
# OpenBSD has support for monotonic clock (CLOCK_MONOTONIC), however we
# currently don't have most of the _POSIX_* defines in unistd.h (e.g.
# _POSIX_MONOTONIC_CLOCK 200112L) and the associated sysconf(3)
# _SC_MONOTONIC_CLOCK variable.
# (see also: patches/patch-gthread_gthread-posix_c)
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include \
				-D_POSIX_MONOTONIC_CLOCK=200112L" \
@


1.152
log
@Use autoreconf instead of manually using each autohell script one after the
other. Add missing BUILD_DEPENDS on libtool.

from Brad
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.151 2012/02/16 22:08:39 ajacoutot Exp $
d112 3
a114 2
# -> reproduce by adding a meeting in evolution for a passed date and
#    running /usr/local/libexec/evolution/3.2/evolution-alarm-notify
@


1.151
log
@Only continue when kevent() fails when we get EINTR; and return NULL
otherwise. This prevent the calling process to go into a loop.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2012/02/02 07:10:17 ajacoutot Exp $
d95 2
a96 1
			${MODGNU_AUTOMAKE_DEPENDS}
d104 1
a104 3
	cd ${WRKSRC} && ${AUTO_ENV} automake
	cd ${WRKSRC} && ${AUTO_ENV} autoheader
	cd ${WRKSRC} && ${AUTO_ENV} autoconf
@


1.150
log
@Implement platform_get_argv0.
We are using autohell to put '-Wstrict-aliasing' into Makefile.am.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.149 2012/01/29 17:28:01 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		5
@


1.150.2.1
log
@Update to the most recent gio-kqueue patch to be able to properly umount
monitored removable media.

ok sthen@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.150 2012/02/02 07:10:17 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		6
d97 1
a97 1
PATCHFILES=		glib-gio-kqueue-2.28.8-v4.patch:0
d101 2
a131 5

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share/examples/glib2
	${INSTALL_DATA} ${FILESDIR}/gio-kqueue.conf \
		${PREFIX}/share/examples/glib2
@


1.149
log
@Compile the gobject parts with -O0 on 64bit arches. There is a nasty
SEGFAULT when using g_closure() on at least amd64; unclear whether this
is a gcc/binutils/glib... bug yet but we want to be on the safe side for
the release.
Hopefully someone will be able to figure this out, I haven't...

Thanks to Stuart for teaching me PROPERTIES.
ok sthen@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.148 2012/01/17 16:50:29 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		4
@


1.148
log
@New revision of the gio-kqueue backend patch that fixes an issue when
unmounting devices that would make gvfsd-trash go into a loop.
Courtesy of Dmitry Matveev.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.147 2012/01/01 09:00:46 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		3
d108 2
d111 9
@


1.147
log
@Integrate the GLib kqueue(2) backend from Dmitry Matveev's GSoC 2011.

As a consequence, explicitely disable the FAM backend.
This bring a huge improvement compared to what we've been using before
(gio-fam+gamin): file / directory monitoring and notifications are next
to instantaneous without any cpu overhead like it was before.

This means we can also drop the bootstrap FLAVOR of gamin that was
needed because of the cyclic dependency (gamin->glib2->gamin).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.146 2011/11/16 15:34:54 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		2
d97 1
a97 1
PATCHFILES=		glib-gio-kqueue-2.28.8-v2.patch:0
@


1.146
log
@Fix obvious mistake in a patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.145 2011/11/13 15:16:17 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		1
d44 1
a44 1
WANTLIB-main += ${WANTLIB} c pthread z pcre fam ffi
a47 1
			sysutils/gamin,no_server,no_python,bootstrap \
a69 1
			--enable-fam \
d73 1
d90 17
@


1.145
log
@Re-add the GDB py macros now that the gdb from ports can use them.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.144 2011/11/12 13:14:21 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		0
@


1.144
log
@Bugfix update to glib2-2.30.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.143 2011/10/19 15:04:45 ajacoutot Exp $
d13 2
a104 4

# glib's GDB macros rely on gdb(1) auto-load feature
post-install:
	rm -rf ${PREFIX}/share/{,glib-2.0}/gdb/
@


1.143
log
@unix_signal_helper_thread: loop in read(2) on EINTR.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.142 2011/10/19 06:38:16 robert Exp $
d6 1
a6 1
VERSION=		2.30.1
a11 2

REVISION-main=		1
@


1.142
log
@Replace HAVE_MONOTONIC_CLOCK with CLOCK_MONOTONIC in an ifdef

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.141 2011/10/18 06:46:24 espie Exp $
d13 1
a13 1
REVISION-main=		0
@


1.141
log
@fix build: prevent infinite recursion thru python.
also annotate gamin for bootstrap property, and mark haddock,no_deps as
a "real flavor", since it's only used for bootstrap anyways AND significantly
changes the build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.140 2011/10/14 15:25:40 ajacoutot Exp $
d12 2
@


1.140
log
@Bugfix update to glib2-2.30.1.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.139 2011/10/08 08:29:56 ajacoutot Exp $
d46 1
a46 1
			sysutils/gamin,no_server,no_python \
@


1.139
log
@Regress tests require higher limits.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.138 2011/10/07 17:19:51 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.30.0
a12 2
REVISION-main=		2

d85 1
a85 2
# (see also: patches/patch-glib_gmain_c
#            patches/patch-gthread_gthread-posix_c)
@


1.138
log
@Enable all regress tests.
Remove some _g_snprintf patches that were left over.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.137 2011/10/04 09:37:09 nigel Exp $
d56 2
a57 1
# need X11 because DBus is used in the GDBus test cases
@


1.137
log
@Correct typo in glib-gettext.m4

ok landry@@ aja@@ (maintainer)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.136 2011/10/03 06:40:28 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		1
@


1.136
log
@Fix DATADIRNAME in glib-gettext.m4: on OpenBSD we install translation
files under share/locale, not lib/locale.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.135 2011/09/27 06:05:28 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		0
@


1.135
log
@Update to stable glib2-2.30.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.134 2011/09/21 13:10:18 ajacoutot Exp $
d12 2
@


1.134
log
@This now needs python.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.133 2011/09/21 11:29:44 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.29.92
a11 2

REVISION-main=		1
@


1.133
log
@Fix gdbus-codegen.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.132 2011/09/20 22:55:04 ajacoutot Exp $
d13 1
a13 1
REVISION-main=		0
a39 5
# Although gtester-report(1) and gdbus-codegen(1) are python scripts, we
# do not want to force a dependency on python.
MODPY_RUNDEP=		No
# Python is needed for the regress tests.
MODPY_BUILDDEP=		Yes
d41 1
a41 1
			codegen/gdbus-codegen.in \
a65 1
USE_GROFF=		Yes
@


1.132
log
@Stupid maintainer-mode is stupid.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.131 2011/09/20 21:09:34 ajacoutot Exp $
d13 2
d46 1
@


1.131
log
@Update to glib2-2.29.92 (2.30 coming in the next few days).
Committing now (along with upcoming atk, pango and gtk+3 updates) during
the hackathon where we have time to fix all the eventual fallout (bulk
running).

ok jasper@@ robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.130 2011/09/16 09:24:49 espie Exp $
d80 4
@


1.130
log
@normalize pkgpath
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.129 2011/08/22 15:26:40 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.28.8
d8 2
a12 2
REVISION-main=		4

d19 5
a23 5
SHARED_LIBS +=  glib-2.0             2800.0   # 2800.7
SHARED_LIBS +=  gmodule-2.0          2800.0   # 2800.7
SHARED_LIBS +=  gthread-2.0          2800.0   # 2800.7
SHARED_LIBS +=  gobject-2.0          2800.0   # 2800.7
SHARED_LIBS +=  gio-2.0              2800.0   # 2800.7
a31 1
EXTRACT_SUFX=		.tar.bz2
d38 2
a39 2
# Although gtester-report(1) is a python script we do not want to force
# a dependency on python.
d46 1
a46 1
WANTLIB-main=		${WANTLIB} c pthread z pcre fam
d49 3
a51 2
			devel/pcre>=8.12 \
			sysutils/gamin,no_server,no_python
d78 1
d85 2
@


1.129
log
@Remove uneeded part of patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.128 2011/08/16 15:03:46 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		3
@


1.128
log
@open(2): POSIX compatibility.
This fixes icedtea-web which landry@@ is working on.

from kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.127 2011/07/03 17:14:23 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		2
@


1.127
log
@Fix some warnings.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.126 2011/06/28 09:40:13 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		1
@


1.126
log
@Rework the mount/unmount functions.
Remove useless patches while here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.125 2011/06/15 12:41:33 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		0
@


1.125
log
@Typo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.124 2011/06/06 06:22:19 ajacoutot Exp $
d10 2
@


1.124
log
@Bugfix update to glib2-2.28.8.
Remove patches applied upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.123 2011/06/03 16:54:05 ajacoutot Exp $
d79 1
a79 1
# we currently don't have most of the _POSIX_* defines in unistd.h (e.g.
@


1.123
log
@Fix path to machine-id.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.122 2011/06/02 17:09:31 kili Exp $
d6 1
a6 1
VERSION=		2.28.7
a9 2

REVISION-main=		7
@


1.122
log
@--disable-silent-rules is now added to CONFIGURE_ARGS per default,
if CONFIGURE_STYLE = gnu.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.121 2011/05/31 07:53:30 jasper Exp $
d11 1
a11 1
REVISION-main=		6
d97 1
a97 1
	perl -pi -e "s,/var/lib/dbus/machine-id,${SYSCONFDIR}/dbus-1/machine-id,g" \
a98 1
		${WRKSRC}/gio/gdbusaddress.c \
@


1.121
log
@missed bump with previous cleaning

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.120 2011/05/28 21:15:47 ajacoutot Exp $
d78 1
a78 2
			--disable-xattr \
			--disable-silent-rules
@


1.120
log
@Summer cleaning:
* use MODPY_ADJ_FILES
* use REGRESS_FLAGS instead of 4 patches...
* use post-install to remove files we don't ship, 2 less patches
* install gtester-report(1) -- it's a python script but we do not
  enforce a run dependency on python
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.119 2011/05/28 08:15:53 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		5
@


1.119
log
@Redirect the glib-compile-schemas goo stdout to /dev/null, no need to
be chatty here.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.118 2011/05/28 07:38:01 ajacoutot Exp $
d19 5
a23 5
SHARED_LIBS +=  glib-2.0             2800.0   # 2800.4
SHARED_LIBS +=  gmodule-2.0          2800.0   # 2800.4
SHARED_LIBS +=  gthread-2.0          2800.0   # 2800.4
SHARED_LIBS +=  gobject-2.0          2800.0   # 2800.4
SHARED_LIBS +=  gio-2.0              2800.0   # 2800.4
d39 2
d42 4
a45 1
MODPY_BUILDDEP=		Yes	# glib2 wants python for the regress tests
d58 1
a58 1
# DBus is only used in the GDBus test cases
d60 2
a65 2
REGRESS_FLAGS=		-k

d68 2
a69 1
USE_GROFF =		Yes
d71 1
a71 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED} \
d91 2
a92 1
		-e "s,/usr/share,${LOCALBASE}/share,g;" \
d98 1
a98 1
	perl -pi -e 's,/var/lib/dbus/machine-id,${SYSCONFDIR}/dbus-1/machine-id,g' \
d101 6
a106 3
		${WRKSRC}/gio/gdbusprivate.c ${WRKSRC}/po/*.po
	perl -pi -e 's,/usr/bin/env python,${MODPY_BIN},' \
		${WRKSRC}/gio/tests/gdbus-testserver.py
@


1.118
log
@Don't hardcode path to true(1).
glib-compile-schemas: write informational messages to stdout instead of
stderr.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.117 2011/05/28 07:32:06 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		4
@


1.117
log
@Rewrite / add glib credentials support to OpenBSD.
Joint work with upstream.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.116 2011/05/27 08:25:14 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		3
@


1.116
log
@Remove useless patch.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.115 2011/05/24 09:10:23 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		2
@


1.115
log
@Rework patches and adapt comment about our monotonic clock support.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.114 2011/05/23 16:36:13 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		1
@


1.114
log
@Missing ifdef.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.113 2011/05/21 07:05:09 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		0
d74 5
@


1.113
log
@Bugfix update to glib2-2.28.7.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.112 2011/05/11 06:22:17 ajacoutot Exp $
d10 2
@


1.112
log
@Sanitize some @@unexec/@@extraunexec calls to rm: move them up in the
PLIST and remove remove everything under the @@sample'd directory instead
of the directory itself to prevent a warning from pkg_delete(1) trying
to remove a non existing directory and to help preventing left-over
files and directories.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.111 2011/05/09 12:37:04 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.28.6
a9 3

REVISION-main=		2
REVISION-docs=		0
@


1.111
log
@Don't use the hardcoded /usr/share value but use LOCALBASE/share instead.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.110 2011/04/28 13:07:53 ajacoutot Exp $
d11 1
a11 1
REVISION-main=		1
@


1.110
log
@Workaround the fact that we cannot pass SCM_CREDS over unix sockets:
implement the "intended" SCM_CREDS stack as if we had support for that
in the kernel (by-pass it almost completely).
send/recv a single null byte without creds, but on recv, just do a
getsockopt(SO_PEERCRED) and return that as if it coming from the cmsg.
This works as long as creds are not retreived from an fd which has
already been handed over to a different process via SCM_RIGHTS. It will
probably not be enough in the future but we'll see then.
all this work done by eric@@ (thanks!) and tested by myself

Enable support for g_credential*
Fix a couple of warnings.

ok eric@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.109 2011/04/14 14:02:17 ajacoutot Exp $
d11 2
a12 1
REVISION-main=		0
d83 4
a86 1
		${WRKSRC}/glib/gutils.c ${WRKSRC}/gio/xdgmime/xdgmime.c
@


1.109
log
@Bugfix update to glib2-2.28.6.
* Fix a possible crash when using g_settings_delay()
* Translation and documentations updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.108 2011/04/01 20:09:54 ajacoutot Exp $
d10 2
@


1.108
log
@Update to glib2-2.28.5.
This is a minor update, including translation updates and a few
documentation improvements.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.107 2011/03/21 18:11:28 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.28.5
@


1.107
log
@Update to glib2-2.28.4.
* translations and documentation updates
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.106 2011/03/14 11:31:24 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.28.4
@


1.106
log
@Bugfix update to glib2-2.28.3.

Fixes the following:
* 644465 undefined reference to `_usleep'
* 644552 g_timeout_add_seconds(1, ...) may have a latency...
* 644607 correct internal definition of C_()
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.105 2011/03/07 20:02:41 jasper Exp $
d6 1
a6 1
VERSION=		2.28.3
d17 5
a21 5
SHARED_LIBS +=  glib-2.0             2800.0   # 2800.2
SHARED_LIBS +=  gmodule-2.0          2800.0   # 2800.2
SHARED_LIBS +=  gthread-2.0          2800.0   # 2800.2
SHARED_LIBS +=  gobject-2.0          2800.0   # 2800.2
SHARED_LIBS +=  gio-2.0              2800.0   # 2800.2
@


1.105
log
@- drop unneeded patch, the output from both devices is the same now

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.104 2011/03/07 19:17:14 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.28.2
a9 2

REVISION-main=		0
@


1.104
log
@Major update to glib2-2.28.2.

This (and the related 20 to 30 updates) has been tested twice in a bulk
by landry@@, thanks!
Runtime testing by myself under heavy GNOME usage...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.103 2010/12/29 09:58:45 sebastia Exp $
d10 2
@


1.103
log
@
Fix build with gcc-2.95, and bump revision

OK ajacoutot@@ (MAINTAINER)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.102 2010/11/26 07:19:00 espie Exp $
d6 1
a6 2
VERSION=		2.26.1
REVISION =		0
d17 5
a21 5
SHARED_LIBS +=  glib-2.0             2600.0   # 2600.0
SHARED_LIBS +=  gmodule-2.0          2600.0   # 2600.0
SHARED_LIBS +=  gthread-2.0          2600.0   # 2600.0
SHARED_LIBS +=  gobject-2.0          2600.0   # 2600.0
SHARED_LIBS +=  gio-2.0              2600.0   # 2600.0
d38 1
a38 1
MODPY_BUILDDEP=		Yes	# XXX: glib2 wants python for the regress tests
d43 1
a43 1
			devel/pcre>=7.2 \
d52 1
a53 1
			x11/dbus \
@


1.102
log
@newer depends with >=
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.101 2010/11/15 19:45:58 espie Exp $
d7 1
@


1.101
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.100 2010/11/14 15:56:55 ajacoutot Exp $
d43 1
a43 1
			pcre->=7.2:devel/pcre \
@


1.100
log
@Bugfix update to glib2-2.26.1.
Amongst other things, fixes an issue with GSettings on big endian.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.99 2010/11/07 17:00:45 ajacoutot Exp $
d43 2
a44 2
			:pcre->=7.2:devel/pcre \
			::sysutils/gamin,no_server,no_python
d52 4
a55 4
REGRESS_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils \
			::x11/dbus \
			::devel/py-gobject \
			::x11/dbus-python
d61 1
a61 1
USE_GROFF =	Yes
@


1.99
log
@We have sched_get_priority_* now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.98 2010/11/06 16:07:00 espie Exp $
d6 1
a6 1
VERSION=		2.26.0
a9 2

REVISION-main=		1
@


1.98
log
@move gettext to new WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.97 2010/10/18 17:47:53 espie Exp $
d11 1
a11 1
REVISION-main=		0
@


1.97
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.96 2010/10/12 09:03:31 jasper Exp $
d42 1
a42 1
WANTLIB-main=		c pthread z pcre fam
d49 1
@


1.96
log
@- fix build on a clean system:
we set MODPY_BUILDDEP=No, whilst providing PYTHON via CONFIGURE_ENV. this
lead configure to believe there actually was a python present on the system.
which wasn't, so set MODPY_BUILDDEP=Yes and adjust REGRESS_DEPENDS accordingly

ok aja@@ landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.95 2010/10/11 20:41:44 kili Exp $
d62 1
@


1.95
log
@Try to run as much tests as possible, don't stop at the first
failed regression test.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.94 2010/10/04 06:28:09 ajacoutot Exp $
d40 1
a40 1
MODPY_BUILDDEP=		No
a54 1
			${MODPY_RUN_DEPENDS} \
d74 1
a74 2
			LDFLAGS="-L${LOCALBASE}/lib -pthread" \
			PYTHON=${MODPY_BIN}
@


1.94
log
@Merge from upstream 136e705e8383ff8848e425ac01278102d7badc52
install-gsettings-schemas has been rewritten in a portable way.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.93 2010/09/30 07:17:19 ajacoutot Exp $
d36 5
a40 1
MODULES=		devel/gettext
d54 6
a59 1
			::x11/dbus
d75 2
a76 1
			LDFLAGS="-L${LOCALBASE}/lib -pthread"
d87 2
@


1.93
log
@*** HEADS UP!

Major update to glib2-2.26.0.
This starts a flood commit of several big updates (gtk+2 and GNOME 2.32).

Please note that there will be some WANTLIB/DEPENDS breakage probably,
this went into several bulks but it's impossible to catch everything.
Any gtk+2/glib2 related build failures, please talk to me or jasper@@

The ports tree is expected to be in a unconsistent state for a couple of
days to give us time to fix everything we didn't spot or any runtime
issue with the latest GNOME.
We do this now so that we have packages with all the latest major bumped
libraries at p2k10.

Thanks to landry@@ and his zomg!cluster for the bulks and reports.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.92 2010/09/24 16:20:40 ajacoutot Exp $
d10 2
@


1.92
log
@We do support monotonic clock, so patch accordingly.
Set correct mix/max thread priorities.
Remove an obvious comment.

ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.91 2010/08/31 07:04:12 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.24.2
a10 2
REVISION-main=		2

d17 5
a21 5
SHARED_LIBS+=	glib-2.0		1803.0 # .2400.1
SHARED_LIBS+=	gobject-2.0		1803.0 # .2400.1
SHARED_LIBS+=	gmodule-2.0		1803.0 # .2400.1
SHARED_LIBS+=	gthread-2.0		1803.0 # .2400.1
SHARED_LIBS+=	gio-2.0			1803.0 # .2400.1
d46 3
a48 1
REGRESS_DEPENDS=	:desktop-file-utils-*:devel/desktop-file-utils
d57 2
d71 4
@


1.91
log
@Remove XXX.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.90 2010/08/30 22:03:58 jasper Exp $
d11 1
a11 1
REVISION-main=		1
d60 2
a61 1
CONFIGURE_ENV=		CPPFLAGS="-I${LOCALBASE}/include" \
a63 1
# don't hardcode (+fix) paths
@


1.90
log
@- first round of bumps for devel
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.89 2010/08/21 21:21:18 ajacoutot Exp $
a8 1
REVISION-main=		0
d11 2
a61 5

# XXX gcc3 only -- remove when i386 moves to gcc4
.if ${MACHINE_ARCH} == "i386"
CONFIGURE_ARGS+=	--build=i486-unknown-openbsd${OSREV}
.endif
@


1.89
log
@Maintainance update to glib2-2.24.2
* 578295 gtester has a race condition
* 619945 GConverterOutputStream triggers assertion and corrupts data
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.88 2010/08/21 19:10:56 ajacoutot Exp $
d9 1
@


1.88
log
@Remove powerpc hack, from Brad.
It seems it is not needed anymore (GNOME does not crash like it used to
with some applications).

While here, move to new DEPENDS/REVISION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.87 2010/07/26 05:39:06 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.24.1
a9 2

REVISION-main=		3
@


1.87
log
@Remove obsolete comment.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.86 2010/07/20 17:39:41 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p2
d11 2
d38 1
a38 1
WANTLIB-main=		c pthread z
d41 2
a42 2
			pcre:pcre->=7.2:devel/pcre \
			fam.>=1::sysutils/gamin,no_server,no_python
a46 6

# disable optimization on powerpc because it can lead to a
# segfault under some circumstances
.if ${MACHINE_ARCH} == "powerpc"
PATCH_LIST=		patch-* PPC-patch-glib_Makefile_in
.endif
@


1.86
log
@Unbreak after my recent gamin commit.

spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.85 2010/06/20 18:34:44 ajacoutot Exp $
a16 2
# glib-2.0 and gobject-2.0 need to be in sync as glib-2.0 version is
# used to install *-gdb.py files
@


1.85
log
@Enable asm code for implementing atomic ops on i386.
Inspired by FreeBSD.

input from naddy@@
ok jasper@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.84 2010/06/19 11:05:34 ajacoutot Exp $
d67 1
a67 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.84
log
@Move %%SHARED%% at the end so that gio-query-modules is still here when we
need it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.83 2010/06/19 10:32:50 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p1
d68 5
@


1.83
log
@Welcome the new gio-querymodules "goo".

GIO Reference Manual:
gio-querymodules creates a giomodule.cache listing the implemented
extension points for each module that has been found. It is used by GIO
at runtime to avoid opening all modules just to find out which extension
points they are implementing.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.82 2010/05/03 11:41:56 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
@


1.82
log
@Bugfix update to glib2-2.24.1.
Don't install the gdb python macros.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.81 2010/04/29 16:38:41 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
@


1.81
log
@When permissions are set up accordingly and kern.usermount is set to 1,
make it possible to umount and eject CDs using gio.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.80 2010/04/22 19:34:06 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.24.0
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d19 5
a23 5
SHARED_LIBS+=	glib-2.0		1803.0 # .2400.0
SHARED_LIBS+=	gobject-2.0		1803.0 # .2400.0
SHARED_LIBS+=	gmodule-2.0		1803.0 # .2400.0
SHARED_LIBS+=	gthread-2.0		1803.0 # .2400.0
SHARED_LIBS+=	gio-2.0			1803.0 # .2400.0
a74 3
	perl -pi -e 's,!!LIBglib-2.0_VERSION_R!!,${LIBglib-2.0_VERSION:R},g;' \
		-e 's,!!LIBglib-2.0_VERSION_E!!,${LIBglib-2.0_VERSION:E},g' \
		${WRKSRC}/configure
@


1.80
log
@Major update to glib2-2.24.0.

Glib now enforces threads requirement. As a result, this commit will
break p5-Glib2 (as our perl is not threaded).
Decision was taken after a chat with naddy@@ and jasper@@ as patching our
current glib2 like hell to cope with newer packages requirements is
clearly not a good solution.
naddy is ok with this move.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.79 2010/04/21 17:33:31 jasper Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
@


1.79
log
@- add another diff from latest glib, the GConverter interface.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.78 2010/04/21 15:11:00 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.22.5
d8 2
a9 12
PKGNAME-main=		glib2-${VERSION}p2
PKGNAME-docs=		glib2-docs-${VERSION}p0

# XXX backport from newer Glib. This is needed by our Gtk+2 but we
# cannot glib2 because libghtread now requires threads (obviously) and
# since our perl is not threaded, applications dependending on p5-Glib
# fails with undefined symbols to pthread_*
MASTER_SITES0=		http://www.bsdfrog.org/OpenBSD/distfiles/
PATCHFILES=		g_desktop_app_info_get_filename.diff:0 \
			g_mount_get_default_location.diff:0 \
			GConverter.diff:0
PATCH_DIST_STRIP=	-p1
d19 5
a23 5
SHARED_LIBS+=	glib-2.0		1802.3 # .2200.2
SHARED_LIBS+=	gobject-2.0		1802.3 # .2200.2
SHARED_LIBS+=	gmodule-2.0		1802.3 # .2200.2
SHARED_LIBS+=	gthread-2.0		1802.3 # .2200.2
SHARED_LIBS+=	gio-2.0			1802.3 # .2200.2
d38 1
a38 1
WANTLIB-main=		c
@


1.78
log
@iTeen forgot to bump.

spotted by naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.77 2010/04/20 20:05:34 jasper Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p1
d17 2
a18 1
			g_mount_get_default_location.diff:0
d29 5
a33 5
SHARED_LIBS+=	glib-2.0		1802.2 # .2200.2
SHARED_LIBS+=	gobject-2.0		1802.2 # .2200.2
SHARED_LIBS+=	gmodule-2.0		1802.2 # .2200.2
SHARED_LIBS+=	gthread-2.0		1802.2 # .2200.2
SHARED_LIBS+=	gio-2.0			1802.2 # .2200.2
@


1.77
log
@- cherrypick another function from latest glib2, needed by nautilus.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.76 2010/04/20 18:53:29 ajacoutot Exp $
d9 1
a9 1
PKGNAME-docs=		glib2-docs-${VERSION}
@


1.76
log
@Import the g_desktop_app_info_get_filename() function from upstream.

This is required by newer GTK. We cannot just update Glib because it now
requires threads which will break p5-Glib2 dependent apps as our perl is
not threaded... solution to this is rthreads or ... <insert solution
here and send it to aja@@>. Yes this means we are stuck with this version
for now.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.75 2010/03/21 09:55:54 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d16 2
a17 1
PATCHFILES=		g_desktop_app_info_get_filename.diff:0
d24 2
d28 5
a32 5
SHARED_LIBS+=	glib-2.0		1802.1 # .2200.2
SHARED_LIBS+=	gobject-2.0		1802.1 # .2200.2
SHARED_LIBS+=	gmodule-2.0		1802.1 # .2200.2
SHARED_LIBS+=	gthread-2.0		1802.1 # .2200.2
SHARED_LIBS+=	gio-2.0			1802.1 # .2200.2
@


1.75
log
@Update to glib2-2.22.5.

tested in a bulk by jasper@@, thanks.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.74 2010/01/07 08:02:35 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
d11 8
d25 5
a29 5
SHARED_LIBS+=	glib-2.0		1802.0 # .2200.2
SHARED_LIBS+=	gobject-2.0		1802.0 # .2200.2
SHARED_LIBS+=	gmodule-2.0		1802.0 # .2200.2
SHARED_LIBS+=	gthread-2.0		1802.0 # .2200.2
SHARED_LIBS+=	gio-2.0			1802.0 # .2200.2
@


1.74
log
@Bugfix release to glib2-2.22.4.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.73 2009/12/08 18:55:29 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.22.4
@


1.73
log
@No need to link with libm after the fam -> gamin move.

spotted by landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.72 2009/12/04 12:50:24 ajacoutot Exp $
d6 1
a6 1
VERSION=		2.22.3
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p1
@


1.72
log
@Missed bump.

spotted by Markus Lude
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.71 2009/12/04 08:08:31 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d36 1
a36 1
WANTLIB-main=		c m
@


1.71
log
@Use gamin instead of fam. Remove the -fam subpackage in the process
(libgamin has no external dependencies and it will simplify packaging
and dependencies).

ok landry@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.70 2009/12/01 16:13:00 ajacoutot Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
@


1.70
log
@Maintainance update to glib2-2.22.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.69 2009/11/26 08:00:43 ajacoutot Exp $
a4 1
COMMENT-fam=		fam(3) gio module
a9 1
PKGNAME-fam=		glib2-fam-${VERSION}
d32 1
a32 1
MULTI_PACKAGES=		-main -docs -fam
d36 1
a36 1
WANTLIB-main=		c
d39 2
a40 1
			pcre:pcre->=7.2:devel/pcre
a44 5

LIB_DEPENDS-fam=	${LIB_DEPENDS-main} \
			gio-2.0,glib-2.0,gmodule-2.0,gobject-2.0::${BASE_PKGPATH},-main \
			fam::sysutils/fam
WANTLIB-fam=		m rpcsvc stdc++
@


1.69
log
@Enclose comment to unfuck header.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.68 2009/11/23 08:22:34 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.22.2
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p2
@


1.68
log
@__attribute__((__unused__)) is not supported on g++3.3, so use the same
define as in perl and only define G_GNUC_UNUSED when appropriate.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.67 2009/10/14 01:29:39 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p1
@


1.67
log
@From FreeBSD: poll the list of mounted filesystems since we can't rely
on checking for mtab updates like other systems.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.66 2009/10/10 11:25:28 jasper Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p0
@


1.66
log
@add --disable-silent-rules to CONFIGURE_ARGS so we can see what
is actually being done, instead of CC $FILE and LD $FILE

ok aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.65 2009/10/07 15:07:49 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}
@


1.65
log
@Minor update to glib2-2.22.2.
Bugfix, translation update and typo.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.64 2009/10/04 18:17:13 ajacoutot Exp $
d68 2
a69 1
			--disable-xattr
@


1.64
log
@Update to version 2.22.1.

committing early so that we can work with the latest at upcoming p2k9.
any fallout, please let me know directly.
ok landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.63 2009/08/29 10:20:28 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.22.1
d19 5
a23 5
SHARED_LIBS+=	glib-2.0		1802.0 # .2200.1
SHARED_LIBS+=	gobject-2.0		1802.0 # .2200.1
SHARED_LIBS+=	gmodule-2.0		1802.0 # .2200.1
SHARED_LIBS+=	gthread-2.0		1802.0 # .2200.1
SHARED_LIBS+=	gio-2.0			1802.0 # .2200.1
@


1.63
log
@Small bugfix update to glib2-2.20.5.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.62 2009/07/12 20:38:09 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.20.5
d17 7
a23 5
SHARED_LIBS+=	glib-2.0		1801.0 # .2000.2
SHARED_LIBS+=	gobject-2.0		1801.0 # .2000.2
SHARED_LIBS+=	gmodule-2.0		1801.0 # .2000.2
SHARED_LIBS+=	gthread-2.0		1801.0 # .2000.2
SHARED_LIBS+=	gio-2.0			1801.0 # .2000.2
d78 3
@


1.62
log
@- major update to glib2-2.20.4
- add missing REGRESS_DEPENDS

*remove previous version before trying to compile this*

Report any failure directly to me please.

tested by landry@@ on a sparc64 bulk, thanks!
ok jasper@@ on a previous diff
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.61 2009/04/21 13:02:12 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.20.4
@


1.61
log
@- remove workaround now that our default thread stack size has been
increased
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.60 2009/04/13 09:03:34 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.18.4
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p3
d17 5
a21 5
SHARED_LIBS+=	glib-2.0		1800.1 #.1800.3
SHARED_LIBS+=	gobject-2.0		1800.1
SHARED_LIBS+=	gmodule-2.0		1800.1
SHARED_LIBS+=	gthread-2.0		1800.1
SHARED_LIBS+=	gio-2.0			1800.2
d29 1
a29 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/2.18/}
d55 2
@


1.60
log
@- previous patch to fix CVE-2008-4316 was missing a part
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2009/03/22 19:33:39 jasper Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p2
@


1.59
log
@Security fix for CVE-2008-4316.
Fixes multiple integer overflows.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/01/28 09:24:38 jasper Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p1
@


1.58
log
@- fix XDG conflicting symbols, from FreeBSD
this ought to help resolve some crashes in at least evolution and anjuta

hinted by ajacoutot@@, thanks :)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2009/01/11 17:06:26 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p0
@


1.58.2.1
log
@MFC:
Security fix for CVE-2008-4316.
Fixes multiple integer overflows.

and

- previous patch to fix CVE-2008-4316 was missing a part

ok robert@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2009/01/28 09:24:38 jasper Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p1
@


1.57
log
@- bugfix release to glib2-2.18.4
thanks to Benoit Lecocq for amd64 testing
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2008/12/21 14:02:39 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}
d21 1
a21 1
SHARED_LIBS+=	gio-2.0			1800.1
@


1.56
log
@- use same workaround as for gtk+2: lower buffer size to prevent memory
access issues.

This should at least fix the nautilus copy bug as well as
gnome-screenshot.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2008/11/24 16:05:03 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.18.3
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p0
@


1.55
log
@- minor update to version 2.18.3
fixes some mem leak, translation and bugs

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2008/11/22 18:56:13 ajacoutot Exp $
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}
@


1.54
log
@- add a -fam subpackage which provides the fam(3) gio module

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2008/11/22 17:23:14 ajacoutot Exp $
d7 1
a7 1
VERSION=		2.18.2
d9 2
a10 2
PKGNAME-main=		glib2-${VERSION}p1
PKGNAME-docs=		glib2-docs-${VERSION}p0
d17 5
a21 5
SHARED_LIBS+=	glib-2.0		1800.0 #.1800.2
SHARED_LIBS+=	gobject-2.0		1800.0
SHARED_LIBS+=	gmodule-2.0		1800.0
SHARED_LIBS+=	gthread-2.0		1800.0
SHARED_LIBS+=	gio-2.0			1800.0
@


1.53
log
@- explicitely disable some configure options
- don't hardcode /usr/local nor /etc and fix paths
- add an XXX about the fam gio module

"reads fine" jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2008/10/27 21:28:01 landry Exp $
d5 1
d9 1
a9 1
PKGNAME-main=		glib2-${VERSION}p0
d11 2
d32 1
a32 1
MULTI_PACKAGES=		-main -docs
a40 1

d45 5
d61 1
a66 3

# XXX enable by default or multi-package?
CONFIGURE_ARGS+=	--disable-fam
@


1.52
log
@Major upgrade to glib 2.18.2.
It's the perfect timing to slap it in now during p2k8, and it paves the way
for the incoming gtk 2.14.4 upgrade.
Tested by bernd@@ in a mulk muild.

ok ajacoutot@@ bernd@@ 'go ahead' jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2008/09/27 17:58:25 brad Exp $
d8 2
a9 2
PKGNAME-main=		glib2-${VERSION}
PKGNAME-docs=		glib2-docs-${VERSION}
d55 2
a56 1
			--disable-fam
d60 9
a68 3
# Port has "/usr/local" hardcoded, we prefer ${LOCALBASE}
pre-build:
	perl -pi -e "s,/usr/local,${LOCALBASE},g" ${WRKSRC}/glib/gutils.c
@


1.51
log
@Update glib2 to 2.16.6.

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2008/09/02 12:44:08 brad Exp $
d6 1
a6 1
VERSION=		2.16.6
d14 5
a18 5
SHARED_LIBS+=	glib-2.0		1600.2
SHARED_LIBS+=	gobject-2.0		1600.2
SHARED_LIBS+=	gmodule-2.0		1600.2
SHARED_LIBS+=	gthread-2.0		1600.2 
SHARED_LIBS+=	gio-2.0			1600.2
d26 1
a26 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/2.16/}
@


1.50
log
@Update glib2 to 2.16.5.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2008/08/01 20:53:05 naddy Exp $
d6 1
a6 1
VERSION=		2.16.5
d14 5
a18 5
SHARED_LIBS +=	glib-2.0             1600.1   # .1600.4
SHARED_LIBS +=	gobject-2.0          1600.1   # .1600.4
SHARED_LIBS +=	gmodule-2.0          1600.1   # .1600.4
SHARED_LIBS +=	gthread-2.0          1600.1   # .1600.4
SHARED_LIBS +=  gio-2.0              1600.1   # .0.0
d20 1
a20 1
# LGPL
@


1.49
log
@Pinch a fix/workaround from 2.16.5's configure script to ensure that
endianness is detected correctly on all platforms.  ok martynas@@

Also drop a bogus configure patch that is a no-op.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2008/07/24 10:02:57 martynas Exp $
d6 1
a6 1
VERSION=		2.16.4
d8 2
a9 2
PKGNAME-main=		glib2-${VERSION}p1
PKGNAME-docs=		glib2-docs-${VERSION}p0
@


1.48
log
@remove bogus patch.  atof("Infinity") actually produces zero, and
then no wonder the patch removes further regression tests...
this is not needed now that that archs have proper INFINITY and NAN
definitions
ok phessler@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2008/07/08 08:38:26 brad Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
@


1.47
log
@Update glib2 to 2.16.4.

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2008/04/09 13:10:17 jasper Exp $
d8 2
a9 2
PKGNAME-main=		glib2-${VERSION}
PKGNAME-docs=		glib2-docs-${VERSION}
@


1.46
log
@- update glib2 to 2.16.1

lots of changes, most importantly, the addition of GIO (VFS API to replace
GnomeVFS).

testing and feedback by many, thanks!

ok landry@@ merdely@@ simon@@
"go ahead" bernd@@ steven@@

(diffs to unbreak some ports will follow)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2008/02/13 12:01:53 sthen Exp $
d6 1
a6 1
VERSION=		2.16.1
d14 5
a18 5
SHARED_LIBS +=	glib-2.0             1600.0   # .1600.1
SHARED_LIBS +=	gobject-2.0          1600.0   # .1600.1
SHARED_LIBS +=	gmodule-2.0          1600.0   # .1600.1
SHARED_LIBS +=	gthread-2.0          1600.0   # .1600.1
SHARED_LIBS +=  gio-2.0              1600.0   # .0.0
@


1.45
log
@remove a hppa workaround which used to be necessary, but now just
breaks the build. other arch unchanged -> no bump.
"of course" ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2008/02/09 17:47:34 jasper Exp $
d6 1
a6 1
VERSION=		2.14.5
d14 5
a18 4
SHARED_LIBS +=	glib-2.0             1400.3   # .1400.5
SHARED_LIBS +=	gobject-2.0          1400.3   # .1400.5
SHARED_LIBS +=	gmodule-2.0          1400.3   # .1400.5
SHARED_LIBS +=	gthread-2.0          1400.3   # .1400.5
d26 1
a26 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/2.14/}
d32 1
d54 2
a55 1
			--with-pcre=system
@


1.44
log
@- update glib2 to 2.14.5
  (bugfixes and updated translations)

tested in a bulk build by steven@@
ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2008/01/22 18:27:25 ajacoutot Exp $
a39 5

# hppa's threads are broken (configure test gives Bus error)...
.if (${MACHINE_ARCH} == "hppa")
CONFIGURE_ARGS+=	--disable-threads
.endif
@


1.43
log
@- remove undeeded patch now that mimeinfo.cache is installed in the
right place

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2007/12/05 14:31:24 steven Exp $
d6 1
a6 1
VERSION=		2.14.4
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1400.2   # .1400.4
SHARED_LIBS +=	gobject-2.0          1400.2   # .1400.4
SHARED_LIBS +=	gmodule-2.0          1400.2   # .1400.4
SHARED_LIBS +=	gthread-2.0          1400.2   # .1400.4
@


1.42
log
@maintenance update to 2.14.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2007/11/18 16:28:55 steven Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
@


1.41
log
@maintenance update to 2.14.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2007/10/31 21:50:51 winiger Exp $
d6 1
a6 1
VERSION=		2.14.3
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1400.1   # .1400.3
SHARED_LIBS +=	gobject-2.0          1400.1   # .1400.3
SHARED_LIBS +=	gmodule-2.0          1400.1   # .1400.3
SHARED_LIBS +=	gthread-2.0          1400.1   # .1400.3
@


1.40
log
@fix LIB_DEPENDS-main and bump PKGNAME-main

ok jasper@@ and martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2007/10/24 22:29:02 jasper Exp $
d6 1
a6 1
VERSION=		2.14.2
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1400.0   # .1400.1
SHARED_LIBS +=	gobject-2.0          1400.0   # .1400.1
SHARED_LIBS +=	gmodule-2.0          1400.0   # .1400.1
SHARED_LIBS +=	gthread-2.0          1400.0   # .1400.1
@


1.39
log
@- update glib2 to 2.14.2
- don't use the local pcre, but use pcre from ports

with tweaks from wilfried@@ (pcre and static libs)
ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2007/09/13 10:51:13 djm Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
d33 2
a34 1
LIB_DEPENDS-main=	pcre:pcre->=7.2:devel/pcre
@


1.38
log
@make glib2 use /dev/arandom instead of /dev/urandom; ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2007/09/10 19:13:33 jasper Exp $
d6 1
a6 1
VERSION=		2.12.13
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d12 1
a12 1
HOMEPAGE=		http://www.gtk.org
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1200.13   # .1200.13
SHARED_LIBS +=	gobject-2.0          1200.13   # .1200.13
SHARED_LIBS +=	gmodule-2.0          1200.13   # .1200.13  
SHARED_LIBS +=	gthread-2.0          1200.13   # .1200.13
d25 1
a25 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/2.12/}
d33 3
d54 3
a56 1
CONFIGURE_ARGS+=	${CONFIGURE_SHARED}
@


1.37
log
@update glib2 to 2.12.13

"go ahead" steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2007/07/27 10:09:51 martin Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
@


1.36
log
@backout

needs more discussion and wider testing, and i missed the bump anyway :(
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2007/07/27 08:29:46 martin Exp $
d3 2
a4 2
COMMENT-main=		"general-purpose utility library"
COMMENT-docs=		"glib2 documentation"
d6 1
a6 1
VERSION=		2.12.12
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p1
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1200.12   # .1200.12
SHARED_LIBS +=	gobject-2.0          1200.12   # .1200.12
SHARED_LIBS +=	gmodule-2.0          1200.12   # .1200.12  
SHARED_LIBS +=	gthread-2.0          1200.12   # .1200.12
@


1.35
log
@fix a configure bug on m68k by always linking with libintl and libiconv

help aanriot@@

ok xsa@@ aanriot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2007/06/25 15:28:44 ajacoutot Exp $
d53 1
a53 1
			LDFLAGS="-L${LOCALBASE}/lib -liconv -lintl"
@


1.34
log
@- disable optimization for glib on powerpc because it can lead to a segfault
under some circumstances

ok kili@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2007/06/04 19:02:45 kurt Exp $
d53 1
a53 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.33
log
@remove libtool work around for -pthread. no objections usual suspects
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2007/05/12 20:21:37 jasper Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d40 6
@


1.32
log
@update glib2 to 2.12.12

ok steven@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2007/04/24 18:21:14 jasper Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
a51 5

# Work around an issue in our libtool where -pthread is not listed as a 
# dependency
post-install:
	sed -e "s/dependency_libs='/dependency_libs='-pthread/" < ${PREFIX}/lib/libgthread-2.0.la > ${PREFIX}/lib/libgthread-2.0.temp && mv ${PREFIX}/lib/libgthread-2.0.temp ${PREFIX}/lib/libgthread-2.0.la
@


1.31
log
@fix wrong and hardcoded paths.

from Mikolaj Kucharski <mikolaj.kucharski@@gmail.com>

ok martynas@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2007/04/23 16:22:07 jasper Exp $
d6 1
a6 1
VERSION=		2.12.11
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1200.11   # .1200.11
SHARED_LIBS +=	gobject-2.0          1200.11   # .1200.11
SHARED_LIBS +=	gmodule-2.0          1200.11   # .1200.11
SHARED_LIBS +=	gthread-2.0          1200.11   # .1200.11
@


1.30
log
@update glib2 to 2.12.11

based on diffs by alek@@

ok'd by several, "go ahead" steven@@
tested by many, thanks!
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2006/12/16 12:22:33 espie Exp $
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}
d48 4
@


1.29
log
@say goodbye to GNU land.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2006/11/24 16:50:10 steven Exp $
d6 1
a6 1
VERSION=		2.10.3
d8 1
a8 1
PKGNAME-main=		glib2-${VERSION}p0
d14 4
a17 4
SHARED_LIBS +=	glib-2.0             1000.3   # .1000.3
SHARED_LIBS +=	gobject-2.0          1000.3   # .1000.3
SHARED_LIBS +=	gmodule-2.0          1000.3   # .1000.3
SHARED_LIBS +=	gthread-2.0          1000.3   # .1000.3
d25 1
a25 1
MASTER_SITES=		${MASTER_SITE_GNOME:=sources/glib/2.10/}
a45 1
CONFIGURE_ARGS+=	--enable-static
@


1.28
log
@new MULTI_PACKAGES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2006/10/28 11:19:21 espie Exp $
a35 2

BUILD_DEPENDS=          :pkgconfig-*:devel/pkgconfig
@


1.27
log
@a few more SHARED_LIBS reformat
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2006/06/03 18:22:22 brad Exp $
d3 1
a3 1
COMMENT=		"general-purpose utility library"
d8 1
a8 1
PKGNAME=		glib2-${VERSION}
d28 1
a28 2
MULTI_PACKAGES=		-docs
SUBPACKAGE?=
a29 3
.if defined(PACKAGING) && ${SUBPACKAGE} == "-docs"
PKG_ARCH=		*
.else
d31 5
a35 2
WANTLIB=		c
.endif
@


1.26
log
@Update glib2 to 2.10.3.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2006/05/22 01:39:36 brad Exp $
d14 4
a17 4
SHARED_LIBS=		glib-2.0    1000.3 \
			gmodule-2.0 1000.3 \
			gobject-2.0 1000.3 \
			gthread-2.0 1000.3
@


1.25
log
@Update glib2 to 2.10.2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2005/12/28 06:15:28 marcm Exp $
d6 1
a6 1
VERSION=		2.10.2
d14 4
a17 4
SHARED_LIBS=		glib-2.0    1000.2 \
			gmodule-2.0 1000.2 \
			gobject-2.0 1000.2 \
			gthread-2.0 1000.2
@


1.24
log
@Update to 2.8.4
SHARED_LIBS
USE_LIBTOOL

OK bernd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2005/11/13 06:22:02 marcm Exp $
d4 1
a4 1
COMMENT-docs=           "glib2 documentation"
d6 1
a6 1
VERSION=		2.8.4
d9 1
a9 1
PKGNAME-docs=           glib2-docs-${VERSION}
a12 1
MAINTAINER=		Marc Matteo <marcm@@openbsd.org>
d14 4
a17 8
SHARED_LIBS=		glib-2.0    800.4 \
			gmodule-2.0 800.4 \
			gobject-2.0 800.4 \
			gthread-2.0 800.4
MODGNU_SHARED_LIBS=	glib-2.0    '' \
			gmodule-2.0 '' \
			gobject-2.0 '' \
			gthread-2.0 ''
d25 2
a26 3
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.8/ \
			${MASTER_SITE_GNOME:=sources/glib/2.8/}
EXTRACT_SUFX=           .tar.bz2
d28 1
a28 1
MULTI_PACKAGES=         -docs
@


1.23
log
@Update glib2 to 2.8.3.  Part of the update to the GTK 2.8 series.

Glib 2.8 Release notes are here:
http://mail.gnome.org/archives/gnome-announce-list/2005-August/msg00048.html
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2005/08/16 18:28:55 espie Exp $
d6 1
a6 1
VERSION=		2.8.3
d15 9
d52 1
d57 6
a62 2
			LIBS="-L${LOCALBASE}/lib" \
			LDFLAGS="-L${WRKSRC}/glib/.libs -L${WRKSRC}/gthread/.libs -L${WRKSRC}/gobject/.libs -L${WRKSRC}/gmodule/.libs"
@


1.22
log
@fix conflicts with 3.6 packages, thus allowing updates.

Okay pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2005/05/24 21:26:17 marcm Exp $
d6 1
a6 1
VERSION=		2.6.4
d9 1
a9 1
PKGNAME-docs=           glib2-docs-${VERSION}p0
d21 2
a22 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.6/
d47 2
a48 1
			LIBS="-L${LOCALBASE}/lib"
@


1.21
log
@Update to 2.6.4, part of GTK+ 2.6 and Gnome 2.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2005/04/14 17:06:18 espie Exp $
d9 1
a9 1
PKGNAME-docs=           glib2-docs-${VERSION}
@


1.20
log
@sprintf/strcpy stuff in glib2
okay naddy@@, a while ago...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2004/12/22 06:31:05 espie Exp $
d6 1
a6 1
VERSION=		2.4.8
d8 2
a9 2
PKGNAME=		glib2-${VERSION}p0
PKGNAME-docs=           glib2-docs-${VERSION}p0
d21 1
a21 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.4/
d33 1
@


1.19
log
@fix a few WANTLIB issues.
Install librpmbuild since lib/rpmgettext wants it.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2004/12/07 06:16:20 marcm Exp $
d8 1
a8 1
PKGNAME=		glib2-${VERSION}
@


1.18
log
@Update to 2.4.8.

More importantly, pull out the NetBSD diff that dealt with
*BSDesque dlopen issues and, now that we have a working
RTLD_DEFAULT, go with the FreeBSD hack^H^H^H^H method which works
better.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2004/11/23 11:22:02 espie Exp $
d9 1
a9 1
PKGNAME-docs=           glib2-docs-${VERSION}
a19 1
WANTLIB=		c
a26 4
.if ${SUBPACKAGE} != "-docs"
MODULES=		devel/gettext
BUILD_DEPENDS=          :pkgconfig-*:devel/pkgconfig
.endif
d29 3
d33 1
@


1.17
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2004/10/26 03:49:03 marcm Exp $
d6 1
a6 1
VERSION=		2.4.7
@


1.16
log
@Update 2.4.6 -> 2.4.7
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2004/09/16 04:13:56 marcm Exp $
d20 1
@


1.15
log
@Latest and greatest... to 2.4.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2004/08/10 12:42:22 xsa Exp $
d6 1
a6 1
VERSION=		2.4.6
@


1.14
log
@
more new-style MODULES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2004/08/08 17:12:55 marcm Exp $
d6 1
a6 1
VERSION=		2.4.5
@


1.13
log
@Update to 2.4.5, new PLIST.  Added patches from NetBSD that add support
for "dlopen(NULL, 0) brokenness" (which we have) that manifests itself
in some GNOME apps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2004/06/22 03:15:02 marcm Exp $
d28 1
a28 1
MODULES=		gettext
@


1.12
log
@Update to gtk+ 2.4.3 and friends.

Note: this will cause breakage in ports that set the various
*_DISABLE_DEPRECATED defines for gtk.  These weill be addressed
shortly.

ok pvalchev@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2004/02/04 07:39:18 sturm Exp $
d6 1
a6 1
VERSION=		2.4.2
@


1.11
log
@mark some subpackages arch independent

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2003/09/23 06:12:41 marcm Exp $
d6 1
a6 1
VERSION=		2.2.3
d21 1
a21 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.2/
d29 1
a29 1
BUILD_DEPENDS=          :pkgconfig->=0.14:devel/pkgconfig
d35 4
a38 2
# library versions (major:minor)
OBSD_LIB_VERSION=	0:11
a40 1
SEPARATE_BUILD=		simple
a45 1
MAKE_ENV=		OBSD_LIB_VERSION="${OBSD_LIB_VERSION}"
@


1.10
log
@Bulk update of GTK+2 and GTK+2 requirements.

deve/glib2 2.2.2 -> 2.2.3
devel/pango 1.2.3 -> 1.2.5
x11/gtk+2 2.2.2 -> 2.2.4

These are minor bugfix updates to the GTK 2.2 series but are starting
to be required by some GTK & Gnome apps.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2003/06/30 03:55:29 marcm Exp $
d30 3
@


1.9
log
@Update to 2.2.2, a bugfix release.  This also fixes regression tests.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2003/05/27 23:00:52 miod Exp $
d6 1
a6 1
VERSION=		2.2.2
d33 1
a33 1
OBSD_LIB_VERSION=	0:10
@


1.8
log
@Do not explicitely disable threads on vax anymore.
ok brad@@ marcm@@ (maintainers)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2003/05/21 15:52:31 marcm Exp $
d6 1
a6 1
VERSION=		2.2.1
d33 1
a33 4
LIBGLIB_VERSION=	0:9
LIBGOBJECT_VERSION=	0:9
LIBGTHREAD_VERSION=	0:9
LIBGMODULE_VERSION=	0:9
d42 1
a42 6
MAKE_ENV=		LIBGLIB_VERSION="${LIBGLIB_VERSION}" \
			LIBGOBJECT_VERSION="${LIBGOBJECT_VERSION}" \
			LIBGTHREAD_VERSION="${LIBGTHREAD_VERSION}" \
			LIBGMODULE_VERSION="${LIBGMODULE_VERSION}"

NO_REGRESS=		Yes
@


1.7
log
@Same Vax workaround that glib1 uses.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2003/04/17 05:55:42 marcm Exp $
a48 5

# VAX thread support as yet incomplete
.if (${MACHINE_ARCH} == "vax")
CONFIGURE_ARGS+= --disable-threads
.endif
@


1.6
log
@Update to 2.2.1, the latest stable version in the 2.2 series.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2002/12/23 04:54:59 marcm Exp $
d49 5
@


1.5
log
@Update to 2.0.7, fix LIB_DEPENDS, take MAINTAINER and get libtool to
add -pthread to .la files where needed.

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/08/08 19:20:28 nino Exp $
d6 1
a6 1
VERSION=		2.0.7
d21 1
a21 1
MASTER_SITES=		ftp://ftp.gtk.org/pub/gtk/v2.0/
d29 1
a29 1
BUILD_DEPENDS=          :pkgconfig-*:devel/pkgconfig
d33 4
a36 4
LIBGLIB_VERSION=	0:7
LIBGOBJECT_VERSION=	0:7
LIBGTHREAD_VERSION=	0:7
LIBGMODULE_VERSION=	0:7
d44 1
a44 1
			LDFLAGS="-L${LOCALBASE}/lib"
@


1.4
log
@Drop spurious pkgconfig RUN_DEPEND.

Noted by brad@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2002/08/07 13:11:53 nino Exp $
d6 1
a6 1
VERSION=		2.0.6
d13 1
a13 1
MAINTAINER=		Nils Nordman <nino@@openbsd.org>
d33 4
a36 4
LIBGLIB_VERSION=	0:4
LIBGOBJECT_VERSION=	0:4
LIBGTHREAD_VERSION=	0:4
LIBGMODULE_VERSION=	0:4
@


1.3
log
@Update to 2.0.6, make it aware of our MAX/MIN macros and make library
versions controllable from the makefile.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2002/07/28 12:00:51 nino Exp $
a29 1
RUN_DEPENDS=		${BUILD_DEPENDS}
@


1.2
log
@iconv modules is not needed when the gettext module is used.

spotted by fgsch@@.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2002/07/25 09:14:13 nino Exp $
d6 1
a6 1
VERSION=		2.0.4
d33 6
d46 4
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d28 1
a28 1
MODULES=		iconv gettext
@


1.1.1.1
log
@Import glib 2.0.4. From DESCR:

General-purpose library in it's second version from the GTK+ team,
includes support routines for C such as lists, trees, hashes,
memory allocation, and many other things.

Joint effort between myself and couderc@@.
@
text
@@
