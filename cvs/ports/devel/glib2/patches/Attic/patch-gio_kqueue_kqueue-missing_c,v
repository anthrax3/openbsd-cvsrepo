head	1.3;
access;
symbols
	OPENBSD_5_5:1.2.0.2
	OPENBSD_5_5_BASE:1.2;
locks; strict;
comment	@# @;


1.3
date	2014.03.26.08.28.15;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2013.12.26.19.00.28;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2013.12.26.10.07.07;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Update to glib2-2.40.0.
First step of the road to GNOME 3.12...

ok jasper@@
@
text
@$OpenBSD: patch-gio_kqueue_kqueue-missing_c,v 1.2 2013/12/26 19:00:28 ajacoutot Exp $

From fb21c8eaab64301591a0e179a42ef25cbd793a6e Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@@gnome.org>
Date: Thu, 26 Dec 2013 10:03:45 +0000
Subject: kqueue: fix a potential deadlock

--- gio/kqueue/kqueue-missing.c.orig	Fri Oct 25 17:58:38 2013
+++ gio/kqueue/kqueue-missing.c	Thu Dec 26 10:51:17 2013
@@@@ -68,6 +68,7 @@@@ _km_add_missing (kqueue_sub *sub)
   if (g_slist_find (missing_subs_list, sub))
     {
       KM_W ("asked to add %s to missing list but it's already on the list!\n", sub->filename);
+      G_UNLOCK (missing_lock);
       return;
     }
 
@


1.2
log
@Upstream'd
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_kqueue_kqueue-missing_c,v 1.1 2013/12/26 10:07:07 ajacoutot Exp $
@


1.1
log
@Fix a potential deadlock in the kqueue code.
@
text
@d1 1
a1 1
$OpenBSD$
d3 4
a6 1
https://bugzilla.gnome.org/show_bug.cgi?id=721074
@

