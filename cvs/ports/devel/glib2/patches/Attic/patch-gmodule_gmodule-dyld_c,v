head	1.2;
access;
symbols
	OPENBSD_3_6:1.1.0.2
	OPENBSD_3_6_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2004.12.07.06.16.21;	author marcm;	state dead;
branches;
next	1.1;

1.1
date	2004.08.08.17.12.55;	author marcm;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to 2.4.8.

More importantly, pull out the NetBSD diff that dealt with
*BSDesque dlopen issues and, now that we have a working
RTLD_DEFAULT, go with the FreeBSD hack^H^H^H^H method which works
better.
@
text
@$OpenBSD: patch-gmodule_gmodule-dyld_c,v 1.1 2004/08/08 17:12:55 marcm Exp $
--- gmodule/gmodule-dyld.c.orig	Thu Feb 19 17:41:00 2004
+++ gmodule/gmodule-dyld.c	Sun Aug  1 22:38:37 2004
@@@@ -119,7 +119,13 @@@@ _g_module_symbol (gpointer     handle,
       if (NSIsSymbolNameDefined (symbol_name))
 	sym = NSLookupAndBindSymbol (symbol_name);
       else
-	sym = NULL;
+	{
+	  GModule *mod;
+	  for (mod = modules, sym = NULL; mod && !sym; mod = mod->next)
+	    {
+	      sym = NSLookupSymbolInModule (mod->handle, symbol_name);
+	    }
+	}
     }
   else
     sym = NSLookupSymbolInModule (handle, symbol_name);
@


1.1
log
@Update to 2.4.5, new PLIST.  Added patches from NetBSD that add support
for "dlopen(NULL, 0) brokenness" (which we have) that manifests itself
in some GNOME apps.
@
text
@d1 1
a1 1
$OpenBSD$
@

