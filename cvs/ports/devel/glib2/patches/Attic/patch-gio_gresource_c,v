head	1.3;
access;
symbols;
locks; strict;
comment	@# @;


1.3
date	2012.05.01.06.17.01;	author ajacoutot;	state dead;
branches;
next	1.2;

1.2
date	2012.04.22.16.58.42;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.04.17.13.29.24;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Bugfix update to glib 2.32.2.
@
text
@$OpenBSD: patch-gio_gresource_c,v 1.2 2012/04/22 16:58:42 ajacoutot Exp $

From 5ef34e5f11b4f71a66615b6506108ee540cc3420 Mon Sep 17 00:00:00 2001
From: Christian Persch <chpe@@gnome.org>
Date: Mon, 09 Apr 2012 13:34:10 +0000
Subject: resources: compiler: Fix resources on big endian architectures

--- gio/gresource.c.orig	Fri Apr 13 15:39:41 2012
+++ gio/gresource.c	Tue Apr 17 15:25:54 2012
@@@@ -287,7 +287,7 @@@@ gboolean do_lookup (GResource             *resource,
       free_path[path_len-1] = 0;
     }
 
-  value = gvdb_table_get_value (resource->table, path);
+  value = gvdb_table_get_raw_value (resource->table, path);
 
   if (value == NULL)
     {
@@@@ -304,6 +304,9 @@@@ gboolean do_lookup (GResource             *resource,
                      &_size,
                      &_flags,
                      &array);
+
+      _size = GUINT32_FROM_LE (_size);
+      _flags = GUINT32_FROM_LE (_flags);
 
       if (size)
         *size = _size;
@


1.2
log
@Use a new version of the gio-kqueue patch that already has one of our
local patches.
Merge the cocoa/foundation patches from upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_gresource_c,v 1.1 2012/04/17 13:29:24 jasper Exp $
@


1.1
log
@apply patch from upstream git to fix resources on big endian architectures

ok aja@@
@
text
@d1 1
a1 1
$OpenBSD$
a6 2

https://bugzilla.gnome.org/show_bug.cgi?id=673409
@

