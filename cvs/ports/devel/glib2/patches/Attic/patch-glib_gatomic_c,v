head	1.5;
access;
symbols
	OPENBSD_5_4:1.4.0.2
	OPENBSD_5_4_BASE:1.4
	OPENBSD_4_9:1.1.0.2
	OPENBSD_4_9_BASE:1.1;
locks; strict;
comment	@# @;


1.5
date	2013.09.25.12.37.08;	author ajacoutot;	state dead;
branches;
next	1.4;

1.4
date	2013.04.08.12.18.12;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2013.04.05.19.20.26;	author jturner;	state Exp;
branches;
next	1.2;

1.2
date	2011.05.21.07.05.09;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2010.10.10.10.52.04;	author kili;	state Exp;
branches;
next	;


desc
@@


1.5
log
@Major update to glib2-2.38.0 -- requirement for the WIP GNOME 3.10 update.
This and the following updates: atk, gdk-pixbuf2, pango, at-spi2-core,
at-spi2-atk, py-atspi and gtk+3 have been tested in a bulk by landry@@ (10x!)

Fallouts are:
- x11/gnome/anjuta: will be fixed within the next 2 or 3 days by the 3.10 update
- www/chromium: robert@@ is working on an update (removing -Werror should also
allow it to build)

ok landry@@ jasper@@
@
text
@$OpenBSD: patch-glib_gatomic_c,v 1.4 2013/04/08 12:18:12 ajacoutot Exp $

From 690d6b97f83149770ef2aa4477c1cb28159678c2 Mon Sep 17 00:00:00 2001
From: James Turner <james@@calminferno.net>
Date: Fri, 05 Apr 2013 19:29:55 +0000
Subject: g_atomic_int_get, g_atomic_pointer_get: accept const arguments

--- glib/gatomic.c.orig	Thu Apr  4 21:57:27 2013
+++ glib/gatomic.c	Thu Apr  4 21:34:39 2013
@@@@ -682,7 +682,7 @@@@ gsize
 static pthread_mutex_t g_atomic_lock = PTHREAD_MUTEX_INITIALIZER;
 
 gint
-(g_atomic_int_get) (volatile gint *atomic)
+(g_atomic_int_get) (const volatile gint *atomic)
 {
   gint value;
 
@@@@ -797,9 +797,9 @@@@ guint
 
 
 gpointer
-(g_atomic_pointer_get) (volatile void *atomic)
+(g_atomic_pointer_get) (const volatile void *atomic)
 {
-  volatile gpointer *ptr = atomic;
+  const volatile gpointer *ptr = atomic;
   gpointer value;
 
   pthread_mutex_lock (&g_atomic_lock);
@


1.4
log
@Pushed upstream.
@
text
@d1 1
a1 1
$OpenBSD: patch-glib_gatomic_c,v 1.3 2013/04/05 19:20:26 jturner Exp $
@


1.3
log
@Unbreak on mips64(el) platforms.
Add g_atomic_int_get and g_atomic_pointer_get const patch which was also
submitted upstream.

ok aja@@ bcallah@@
@
text
@d1 7
a7 1
$OpenBSD$
@


1.2
log
@Bugfix update to glib2-2.28.7.
@
text
@d1 5
a5 5
$OpenBSD: patch-glib_gatomic_c,v 1.1 2010/10/10 10:52:04 kili Exp $
--- glib/gatomic.c.orig	Thu Sep 23 17:26:45 2010
+++ glib/gatomic.c	Sun Oct 10 11:50:01 2010
@@@@ -28,6 +28,7 @@@@
 #endif
d7 5
a11 3
 #include "gatomic.h"
+#include "gthread.h"
 #include "gthreadprivate.h"
d13 12
a24 1
 /**
@


1.1
log
@Fix build on several archs (mips64el, hppa, sgi at least).

ok jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
@

