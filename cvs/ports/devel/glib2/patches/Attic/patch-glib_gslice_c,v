head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2011.06.28.09.40.13;	author ajacoutot;	state dead;
branches;
next	1.1;

1.1
date	2011.04.28.13.07.53;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Rework the mount/unmount functions.
Remove useless patches while here.
@
text
@$OpenBSD: patch-glib_gslice_c,v 1.1 2011/04/28 13:07:53 ajacoutot Exp $

Redefinition of ALIGN in /usr/include/machine/param.h.

--- glib/gslice.c.orig	Wed Apr 27 18:55:44 2011
+++ glib/gslice.c	Wed Apr 27 18:58:27 2011
@@@@ -53,6 +53,10 @@@@
 #include "gthreadprivate.h"
 #include "glib_trace.h"
 
+#ifdef ALIGN
+#undef ALIGN
+#endif
+
 /* the GSlice allocator is split up into 4 layers, roughly modelled after the slab
  * allocator and magazine extensions as outlined in:
  * + [Bonwick94] Jeff Bonwick, The slab allocator: An object-caching kernel
@


1.1
log
@Workaround the fact that we cannot pass SCM_CREDS over unix sockets:
implement the "intended" SCM_CREDS stack as if we had support for that
in the kernel (by-pass it almost completely).
send/recv a single null byte without creds, but on recv, just do a
getsockopt(SO_PEERCRED) and return that as if it coming from the cmsg.
This works as long as creds are not retreived from an fd which has
already been handed over to a different process via SCM_RIGHTS. It will
probably not be enough in the future but we'll see then.
all this work done by eric@@ (thanks!) and tested by myself

Enable support for g_credential*
Fix a couple of warnings.

ok eric@@ jasper@@
@
text
@d1 1
a1 1
$OpenBSD$
@

