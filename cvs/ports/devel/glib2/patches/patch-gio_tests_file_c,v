head	1.7;
access;
symbols
	OPENBSD_6_0:1.7.0.4
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.10
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.6
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.4
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.2
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.5.0.2
	OPENBSD_5_4_BASE:1.5
	OPENBSD_5_3:1.3.0.2
	OPENBSD_5_3_BASE:1.3;
locks; strict;
comment	@# @;


1.7
date	2015.09.24.10.23.42;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	TJvyXNuKGn4RlcXO;

1.6
date	2013.09.25.12.37.07;	author ajacoutot;	state Exp;
branches;
next	1.5;

1.5
date	2013.06.01.22.56.06;	author ajacoutot;	state Exp;
branches;
next	1.4;

1.4
date	2013.03.27.17.49.34;	author ajacoutot;	state Exp;
branches;
next	1.3;

1.3
date	2012.11.13.16.34.59;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2012.11.12.10.19.39;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.10.12.20.52.04;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to glib2-2.46.0.
@
text
@$OpenBSD: patch-gio_tests_file_c,v 1.6 2013/09/25 12:37:07 ajacoutot Exp $

XXX why isn't this working with kqueue?
push upstream when fixed

--- gio/tests/file.c.orig	Wed Aug 19 05:35:30 2015
+++ gio/tests/file.c	Wed Sep 23 09:25:35 2015
@@@@ -450,11 +450,12 @@@@ test_create_delete (gconstpointer d)
   data->monitor = g_file_monitor_file (data->file, 0, NULL, &error);
   g_assert_no_error (error);
 
-  /* This test doesn't work with GPollFileMonitor, because it assumes
-   * that the monitor will notice a create immediately followed by a
-   * delete, rather than coalescing them into nothing.
+  /* This test doesn't work with GPollFileMonitor nor GKqueueFileMonitor,
+   * because it assumes that the monitor will notice a create immediately
+   * followed by a delete, rather than coalescing them into nothing.
    */
-  if (!strcmp (G_OBJECT_TYPE_NAME (data->monitor), "GPollFileMonitor"))
+  if ((!strcmp (G_OBJECT_TYPE_NAME (data->monitor), "GPollFileMonitor")) ||
+      (!strcmp (G_OBJECT_TYPE_NAME (data->monitor), "GKqueueFileMonitor")))
     {
       g_test_skip ("skipping test for this GFileMonitor implementation");
       goto skip;
@


1.6
log
@Major update to glib2-2.38.0 -- requirement for the WIP GNOME 3.10 update.
This and the following updates: atk, gdk-pixbuf2, pango, at-spi2-core,
at-spi2-atk, py-atspi and gtk+3 have been tested in a bulk by landry@@ (10x!)

Fallouts are:
- x11/gnome/anjuta: will be fixed within the next 2 or 3 days by the 3.10 update
- www/chromium: robert@@ is working on an update (removing -Werror should also
allow it to build)

ok landry@@ jasper@@
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_tests_file_c,v 1.5 2013/06/01 22:56:06 ajacoutot Exp $
d6 2
a7 2
--- gio/tests/file.c.orig	Thu Aug  8 12:00:40 2013
+++ gio/tests/file.c	Tue Sep 24 10:05:43 2013
d23 1
a23 1
       g_print ("skipping test for this GFileMonitor implementation");
@


1.5
log
@Fix comment.
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_tests_file_c,v 1.4 2013/03/27 17:49:34 ajacoutot Exp $
d6 3
a8 3
--- gio/tests/file.c.orig	Tue Mar 26 11:03:40 2013
+++ gio/tests/file.c	Tue Mar 26 11:04:53 2013
@@@@ -427,11 +427,12 @@@@ test_create_delete (gconstpointer d)
@


1.4
log
@Major update to glib2-2.36.0.
*huge* thank to landry@@ for running a bulk with this diff and the few
others that are going to be committed and for informing me of the
breakage that needed some love.
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_tests_file_c,v 1.3 2012/11/13 16:34:59 ajacoutot Exp $
d4 1
a4 1
push upstream when the kqueue patch is committed there
@


1.3
log
@New revision of the kqueue patch; hopefully to be pushed upstream soon...
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_tests_file_c,v 1.2 2012/11/12 10:19:39 ajacoutot Exp $
d6 3
a8 3
--- gio/tests/file.c.orig	Sat Nov 10 04:18:46 2012
+++ gio/tests/file.c	Tue Nov 13 17:16:38 2012
@@@@ -424,13 +424,14 @@@@ test_create_delete (gconstpointer d)
d23 1
a23 2
-      g_print ("skipping test for this GFileMonitor implementation");
+      g_print ("skipping test for this GFileMonitor implementation ");
a24 2
     }
 
@


1.2
log
@GKqueueDirectoryMonitor -> GKqueueFileMonitor
@
text
@d1 1
a1 1
$OpenBSD: patch-gio_tests_file_c,v 1.1 2012/10/12 20:52:04 ajacoutot Exp $
d7 1
a7 1
+++ gio/tests/file.c	Mon Nov 12 11:18:31 2012
d15 1
a15 1
+  /* This test doesn't work with GPollFileMonitor nor GKqueueDirectoryMonitor,
@


1.1
log
@Disable a couple of tests:
* test_create_delete: there seems to be an issue with the kqueue backend
(to be revisited)
* ipv6_v4mapped: this will never be supported on OpenBSD
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 3
--- gio/tests/file.c.orig	Mon Sep  3 16:24:05 2012
+++ gio/tests/file.c	Tue Oct  9 23:47:22 2012
@@@@ -424,11 +424,12 @@@@ test_create_delete (gconstpointer d)
d21 1
a21 1
+      (!strcmp (G_OBJECT_TYPE_NAME (data->monitor), "GKqueueDirectoryMonitor")))
d23 2
a24 1
       g_print ("skipping test for this GFileMonitor implementation");
d26 2
@

