head	1.61;
access;
symbols
	OPENBSD_6_2:1.61.0.4
	OPENBSD_6_2_BASE:1.61
	OPENBSD_6_1:1.61.0.2
	OPENBSD_6_1_BASE:1.61
	OPENBSD_6_0:1.60.0.2
	OPENBSD_6_0_BASE:1.60
	OPENBSD_5_9:1.59.0.2
	OPENBSD_5_9_BASE:1.59
	OPENBSD_5_8:1.59.0.4
	OPENBSD_5_8_BASE:1.59
	OPENBSD_5_7:1.58.0.2
	OPENBSD_5_7_BASE:1.58
	OPENBSD_5_6:1.57.0.4
	OPENBSD_5_6_BASE:1.57
	OPENBSD_5_5:1.57.0.2
	OPENBSD_5_5_BASE:1.57
	OPENBSD_5_4:1.56.0.2
	OPENBSD_5_4_BASE:1.56
	OPENBSD_5_3:1.54.0.6
	OPENBSD_5_3_BASE:1.54
	OPENBSD_5_2:1.54.0.4
	OPENBSD_5_2_BASE:1.54
	OPENBSD_5_1_BASE:1.54
	OPENBSD_5_1:1.54.0.2
	OPENBSD_5_0:1.52.0.4
	OPENBSD_5_0_BASE:1.52
	OPENBSD_4_9:1.52.0.2
	OPENBSD_4_9_BASE:1.52
	OPENBSD_4_8:1.49.0.2
	OPENBSD_4_8_BASE:1.49
	OPENBSD_4_7:1.48.0.2
	OPENBSD_4_7_BASE:1.48
	OPENBSD_4_6:1.45.0.8
	OPENBSD_4_6_BASE:1.45
	OPENBSD_4_5:1.45.0.6
	OPENBSD_4_5_BASE:1.45
	OPENBSD_4_4:1.45.0.4
	OPENBSD_4_4_BASE:1.45
	OPENBSD_4_3:1.45.0.2
	OPENBSD_4_3_BASE:1.45
	OPENBSD_4_2:1.44.0.8
	OPENBSD_4_2_BASE:1.44
	OPENBSD_4_1:1.44.0.6
	OPENBSD_4_1_BASE:1.44
	OPENBSD_4_0:1.44.0.4
	OPENBSD_4_0_BASE:1.44
	OPENBSD_3_9:1.44.0.2
	OPENBSD_3_9_BASE:1.44
	OPENBSD_3_8:1.42.0.2
	OPENBSD_3_8_BASE:1.42
	OPENBSD_3_7:1.41.0.2
	OPENBSD_3_7_BASE:1.41
	OPENBSD_3_6:1.40.0.2
	OPENBSD_3_6_BASE:1.40
	OPENBSD_3_5:1.39.0.2
	OPENBSD_3_5_BASE:1.39
	OPENBSD_3_4:1.36.0.2
	OPENBSD_3_4_BASE:1.36
	OPENBSD_3_3:1.34.0.2
	OPENBSD_3_3_BASE:1.34
	OPENBSD_3_2:1.32.0.2
	OPENBSD_3_2_BASE:1.32
	OPENBSD_3_1:1.31.0.2
	OPENBSD_3_1_BASE:1.31
	OPENBSD_3_0:1.30.0.2
	OPENBSD_3_0_BASE:1.30
	OPENBSD_2_9_TRACKING_SWITCH:1.29
	OPENBSD_2_9:1.27.0.2
	OPENBSD_2_9_BASE:1.27
	OPENBSD_2_8:1.24.0.2
	OPENBSD_2_8_BASE:1.24
	OPENBSD_2_7:1.18.0.2
	OPENBSD_2_7_BASE:1.18
	OPENBSD_2_6:1.12.0.2
	OPENBSD_2_6_BASE:1.12
	OPENBSD_2_5:1.8.0.2
	OPENBSD_2_5_BASE:1.8
	OPENBSD_2_4:1.5.0.2
	OPENBSD_2_4_BASE:1.5
	OPENBSD_2_3:1.3.0.2
	OPENBSD_2_3_BASE:1.3
	libslang_0_9938:1.1.1.1
	libslang:1.1.1;
locks; strict;
comment	@# @;


1.61
date	2016.09.13.14.40.30;	author naddy;	state Exp;
branches;
next	1.60;
commitid	SpVZjufuFzi5eQet;

1.60
date	2016.03.10.21.58.51;	author naddy;	state Exp;
branches;
next	1.59;
commitid	g78OHI8ulpVtt3HS;

1.59
date	2015.06.17.08.56.42;	author bentley;	state Exp;
branches;
next	1.58;
commitid	oDLKu2xJQTNCFCjY;

1.58
date	2015.01.30.14.12.26;	author sthen;	state Exp;
branches;
next	1.57;
commitid	ljLQupmP8cUcWWZJ;

1.57
date	2013.10.11.23.48.24;	author naddy;	state Exp;
branches;
next	1.56;

1.56
date	2013.06.03.02.46.57;	author naddy;	state Exp;
branches;
next	1.55;

1.55
date	2013.03.11.10.50.10;	author espie;	state Exp;
branches;
next	1.54;

1.54
date	2011.11.18.10.29.37;	author espie;	state Exp;
branches;
next	1.53;

1.53
date	2011.09.21.22.01.56;	author sthen;	state Exp;
branches;
next	1.52;

1.52
date	2010.11.15.19.46.00;	author espie;	state Exp;
branches;
next	1.51;

1.51
date	2010.10.18.17.47.54;	author espie;	state Exp;
branches;
next	1.50;

1.50
date	2010.09.13.07.35.08;	author sthen;	state Exp;
branches;
next	1.49;

1.49
date	2010.06.11.21.48.09;	author sthen;	state Exp;
branches;
next	1.48;

1.48
date	2009.10.25.11.48.09;	author sthen;	state Exp;
branches;
next	1.47;

1.47
date	2009.10.23.09.23.11;	author sthen;	state Exp;
branches;
next	1.46;

1.46
date	2009.10.13.21.46.20;	author sthen;	state Exp;
branches;
next	1.45;

1.45
date	2007.09.16.02.53.01;	author merdely;	state Exp;
branches;
next	1.44;

1.44
date	2006.01.07.14.19.29;	author bernd;	state Exp;
branches;
next	1.43;

1.43
date	2005.11.03.18.28.55;	author naddy;	state Exp;
branches;
next	1.42;

1.42
date	2005.04.19.09.41.41;	author espie;	state Exp;
branches;
next	1.41;

1.41
date	2004.10.19.03.07.56;	author brad;	state Exp;
branches;
next	1.40;

1.40
date	2004.08.02.12.35.05;	author espie;	state Exp;
branches;
next	1.39;

1.39
date	2004.03.04.17.49.26;	author espie;	state Exp;
branches;
next	1.38;

1.38
date	2004.02.24.00.06.43;	author naddy;	state Exp;
branches;
next	1.37;

1.37
date	2004.01.11.07.05.31;	author brad;	state Exp;
branches;
next	1.36;

1.36
date	2003.08.13.23.41.02;	author naddy;	state Exp;
branches;
next	1.35;

1.35
date	2003.05.14.04.52.27;	author naddy;	state Exp;
branches;
next	1.34;

1.34
date	2003.01.04.00.05.46;	author brad;	state Exp;
branches;
next	1.33;

1.33
date	2002.10.19.03.07.28;	author brad;	state Exp;
branches;
next	1.32;

1.32
date	2002.05.08.02.04.08;	author brad;	state Exp;
branches
	1.32.2.1;
next	1.31;

1.31
date	2001.12.08.05.22.07;	author brad;	state Exp;
branches
	1.31.2.1;
next	1.30;

1.30
date	2001.09.28.06.02.13;	author pvalchev;	state Exp;
branches;
next	1.29;

1.29
date	2001.05.11.23.19.53;	author drahn;	state Exp;
branches;
next	1.28;

1.28
date	2001.05.06.00.13.09;	author lebel;	state Exp;
branches;
next	1.27;

1.27
date	2001.02.21.20.44.42;	author brad;	state Exp;
branches;
next	1.26;

1.26
date	2001.02.08.02.05.35;	author brad;	state Exp;
branches;
next	1.25;

1.25
date	2000.11.11.22.40.55;	author brad;	state Exp;
branches;
next	1.24;

1.24
date	2000.10.22.14.03.07;	author espie;	state Exp;
branches;
next	1.23;

1.23
date	2000.10.21.19.59.17;	author brad;	state Exp;
branches;
next	1.22;

1.22
date	2000.09.05.03.27.29;	author brad;	state Exp;
branches;
next	1.21;

1.21
date	2000.07.04.01.46.39;	author krw;	state Exp;
branches;
next	1.20;

1.20
date	2000.06.25.20.38.30;	author brad;	state Exp;
branches;
next	1.19;

1.19
date	2000.06.13.02.07.48;	author kevlo;	state Exp;
branches;
next	1.18;

1.18
date	2000.03.25.21.08.01;	author brad;	state Exp;
branches
	1.18.2.1;
next	1.17;

1.17
date	2000.03.25.15.28.04;	author kevlo;	state Exp;
branches;
next	1.16;

1.16
date	2000.03.24.22.11.39;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2000.03.04.19.12.51;	author espie;	state Exp;
branches;
next	1.14;

1.14
date	99.12.29.23.58.11;	author brad;	state Exp;
branches;
next	1.13;

1.13
date	99.11.28.00.28.59;	author brad;	state Exp;
branches;
next	1.12;

1.12
date	99.10.01.23.17.38;	author brad;	state Exp;
branches;
next	1.11;

1.11
date	99.07.15.01.14.21;	author brad;	state Exp;
branches;
next	1.10;

1.10
date	99.06.23.17.28.33;	author brad;	state Exp;
branches;
next	1.9;

1.9
date	99.06.23.01.44.36;	author marc;	state Exp;
branches;
next	1.8;

1.8
date	99.04.01.06.20.07;	author brad;	state Exp;
branches;
next	1.7;

1.7
date	99.02.21.04.26.10;	author marc;	state Exp;
branches;
next	1.6;

1.6
date	98.11.20.03.42.59;	author marc;	state Exp;
branches;
next	1.5;

1.5
date	98.10.18.05.02.05;	author marc;	state Exp;
branches;
next	1.4;

1.4
date	98.10.08.18.47.14;	author marc;	state Exp;
branches;
next	1.3;

1.3
date	98.02.10.10.45.16;	author niklas;	state Exp;
branches;
next	1.2;

1.2
date	97.12.03.19.56.19;	author niklas;	state Exp;
branches;
next	1.1;

1.1
date	97.11.20.00.18.38;	author todd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	97.11.20.00.18.38;	author todd;	state Exp;
branches;
next	;

1.18.2.1
date	2000.09.15.04.49.15;	author marc;	state Exp;
branches;
next	;

1.31.2.1
date	2003.01.15.17.02.50;	author brad;	state Exp;
branches;
next	;

1.32.2.1
date	2003.01.15.17.59.09;	author brad;	state Exp;
branches;
next	;


desc
@@


1.61
log
@replace libiconv module
@
text
@# $OpenBSD: Makefile,v 1.60 2016/03/10 21:58:51 naddy Exp $

COMMENT=	stack-based interpreter for terminal applications

DISTNAME=	slang-2.2.4
REVISION=	2
PKGNAME=	lib${DISTNAME}
SHARED_LIBS=	slang 16.0

CATEGORIES=	devel
MASTER_SITES=	http://www.jedsoft.org/releases/slang/old/

HOMEPAGE=	http://jedsoft.org/slang/

# Artistic
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB += c iconv m onig pcre png termcap z

LIB_DEPENDS=		converters/libiconv \
			devel/pcre \
			graphics/png \
			textproc/oniguruma

AUTOCONF_VERSION=	2.61
CONFIGURE_STYLE=	autoconf no-autoheader
AUTOCONF_DIR=		${WRKSRC}/autoconf
MODGNU_CONFIG_GUESS_DIRS= ${WRKSRC}/autoconf

CONFIGURE_ARGS=		--with-pnginc=${LOCALBASE}/include \
			--with-pnglib=${LOCALBASE}/lib
TEST_TARGET=		runtests
TEST_FLAGS=		TCAPLIB="-ltermlib"

MAKE_ENV=		LIBslang_MAJOR=${LIBslang_VERSION:R} \
			LIBslang_MINOR=${LIBslang_VERSION:E}

pre-configure:
	cd ${AUTOCONF_DIR}; cp configure ..

.include <bsd.port.mk>
@


1.60
log
@remove various instances of NO_SHARED_LIBS and PROPERTIES:Mno_shared,
fold PFRAG.shared into PLIST
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.59 2015/06/17 08:56:42 bentley Exp $
d18 1
a18 1
WANTLIB += c m onig pcre png termcap z
d20 2
a21 1
LIB_DEPENDS=		devel/pcre \
a23 1
MODULES=		converters/libiconv
@


1.59
log
@Update HOMEPAGE and MASTER_SITES.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.58 2015/01/30 14:12:26 sthen Exp $
d6 1
a6 1
REVISION=	1
a41 5

.if !${PROPERTIES:Mno_shared}
ALL_TARGET= all elf
INSTALL_TARGET= install-elf
.endif
@


1.58
log
@replace a backwards memcpy in libslang with memmove
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.57 2013/10/11 23:48:24 naddy Exp $
d6 1
a6 1
REVISION=	0
d11 1
a11 2
MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v2.2/ \
		ftp://ftp.fu-berlin.de/pub/unix/misc/slang/v2.2/
d13 1
a13 1
HOMEPAGE=	http://www.s-lang.org/
@


1.57
log
@Drop USE_GROFF since groff and mandoc produce identical output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.56 2013/06/03 02:46:57 naddy Exp $
d6 1
@


1.56
log
@cope with new png include layout
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.55 2013/03/11 10:50:10 espie Exp $
a28 1
USE_GROFF=		Yes
@


1.55
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.54 2011/11/18 10:29:37 espie Exp $
d31 1
a31 1
CONFIGURE_ARGS=		--with-pnginc=${LOCALBASE}/include/libpng \
@


1.54
log
@switch to PROPERTIES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.53 2011/09/21 22:01:56 sthen Exp $
a16 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d33 2
a34 2
REGRESS_TARGET=		runtests
REGRESS_FLAGS=		TCAPLIB="-ltermlib"
@


1.53
log
@update to S-Lang 2.2.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.52 2010/11/15 19:46:00 espie Exp $
d47 1
a47 1
.if !(defined(NO_SHARED_LIBS) && ${NO_SHARED_LIBS:L} == "yes")
@


1.52
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.51 2010/10/18 17:47:54 espie Exp $
d5 1
a5 1
DISTNAME=	slang-2.2.2
d7 1
a7 1
SHARED_LIBS=	slang 15.0
d21 1
a21 1
WANTLIB += c m onig pcre termcap z
d24 1
d32 1
a32 1
USE_GROFF =		Yes
d34 2
@


1.51
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.50 2010/09/13 07:35:08 sthen Exp $
d23 2
a24 2
LIB_DEPENDS=		::devel/pcre \
			::textproc/oniguruma
d31 1
a31 1
USE_GROFF =	Yes
@


1.50
log
@update S-Lang to 2.2.2; from Frank Denis
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.49 2010/06/11 21:48:09 sthen Exp $
d31 1
@


1.49
log
@Remove workaround for optimizer-related problem on amd64 gcc 3.3.
From Brad.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.48 2009/10/25 11:48:09 sthen Exp $
d5 2
a6 2
DISTNAME=	slang-2.2.1
PKGNAME=	lib${DISTNAME}p2
d21 1
a21 1
WANTLIB=		c m termcap z
d23 2
a24 2
LIB_DEPENDS=		pcre::devel/pcre \
			onig::textproc/oniguruma
@


1.48
log
@steven@@ points out the -O0 which is needed on amd64 with gcc 3.3 for
slarrfun.c can be passed via the environment rather than in a patch;
do this and only apply it to amd64.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.47 2009/10/23 09:23:11 sthen Exp $
d6 1
a6 1
PKGNAME=	lib${DISTNAME}p1
a36 5

# GCC 3.3 optimizer problems: http://marc.info/?m=125562659714004
.if ${MACHINE_ARCH} == "amd64"
MAKE_ENV+=		slarrfun_C_FLAGS=-O0
.endif
@


1.47
log
@- build slarrfun.c with -O0, with default flags it generates broken
code on some arch (reported on amd64 with GCC 3.3 by Simon Nicolussi)

- autoconf picks up oniguruma if installed, add as a LIB_DEPENDS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.46 2009/10/13 21:46:20 sthen Exp $
d6 1
a6 1
PKGNAME=	lib${DISTNAME}p0
d37 5
@


1.46
log
@update slang to 2.2.1, dependent ports will be updated shortly.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.45 2007/09/16 02:53:01 merdely Exp $
d6 1
a6 1
PKGNAME=	lib${DISTNAME}
d23 2
a24 1
LIB_DEPENDS=		pcre::devel/pcre
@


1.45
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.44 2006/01/07 14:19:29 bernd Exp $
d5 3
a7 4
VERSION=	1.4.9
DISTNAME=	slang-${VERSION}
PKGNAME=	libslang-${VERSION}p3
SHARED_LIBS=	slang 14.9
d10 2
a11 2
MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.4/ \
		http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
d21 6
a26 1
AUTOCONF_VERSION=	2.13
d28 1
d37 2
a38 4
pre-patch:
.for f in aclocal.m4 configure.in
	@@cd ${WRKSRC} && ln -sf autoconf/${f} ${f}
.endfor
@


1.44
log
@- SHARED_LIBS
- regen patches while I'm here
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.43 2005/11/03 18:28:55 naddy Exp $
d3 1
a3 1
COMMENT=	"stack-based interpreter for terminal applications"
@


1.43
log
@Always explicitly set the AUTOCONF_VERSION to use.  In some cases
the default was not appropriate.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.42 2005/04/19 09:41:41 espie Exp $
d7 3
a9 1
PKGNAME=	libslang-${VERSION}p2
d28 3
@


1.42
log
@FAKE=lib for libslang. Okay, so we no longer need to install libslang
at all while building.

Add a missing MODULE on gettext in slrn, someone else will fix the
configure test presumably...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.41 2004/10/19 03:07:56 brad Exp $
d20 1
@


1.41
log
@remove myself as MAINTAINER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2004/08/02 12:35:05 espie Exp $
d7 1
a7 1
PKGNAME=	libslang-${VERSION}p1
@


1.40
log
@NO_SHARED_LIBS always defined.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2004/03/04 17:49:26 espie Exp $
a12 2

MAINTAINER=	Brad Smith <brad@@openbsd.org>
@


1.39
log
@explicitly tag no-autoheader some ports for which re-running it after autoconf
is a problem.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2004/02/24 00:06:43 naddy Exp $
d35 1
a35 1
.if !defined(NO_SHARED_LIBS)
@


1.38
log
@remove workarounds for gcc2.95/sparc64 optimizer bugs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2004/01/11 07:05:31 brad Exp $
d22 1
a22 1
CONFIGURE_STYLE=	autoconf
@


1.37
log
@remove shared lib inter-library dependency on libm and libcurses
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.36 2003/08/13 23:41:02 naddy Exp $
a20 5

# work around an optimizer bug in gcc 2.95
.if ${MACHINE_ARCH} == "sparc64"
PATCH_LIST=	gcc-patch-* patch-*
.endif
@


1.36
log
@work around an optimizer bug in gcc 2.95 on sparc64
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2003/05/14 04:52:27 naddy Exp $
d7 1
a7 1
PKGNAME=	libslang-${VERSION}
@


1.35
log
@update to 1.4.9; ok brad@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2003/01/04 00:05:46 brad Exp $
d21 5
@


1.34
log
@use MASTER_SITE_BACKUP for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2002/10/19 03:07:28 brad Exp $
d5 1
a5 1
VERSION=	1.4.6
d9 2
a10 3
MASTER_SITES=	${MASTER_SITE_BACKUP}
#MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.4/ \
#		http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
@


1.33
log
@upgrade to libslang 1.4.6
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2002/05/08 02:04:08 brad Exp $
d9 3
a11 2
MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.4/ \
		http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
d17 1
@


1.32
log
@upgrade to libslang 1.4.5
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/12/08 05:22:07 brad Exp $
d3 1
a3 1
COMMENT=		"stack-based interpreter for terminal applications"
d5 4
a8 5
VERSION=		1.4.5
DISTNAME=		slang-${VERSION}
PKGNAME=		libslang-${VERSION}
CATEGORIES=		devel
NEED_VERSION=	1.522
d10 1
a10 1
				http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
d12 1
a12 1
HOMEPAGE=		http://www.s-lang.org/
d14 1
a14 1
MAINTAINER=		Brad Smith <brad@@openbsd.org>
d17 1
a17 1
PERMIT_PACKAGE_FTP=		Yes
d21 1
a21 1
CONFIGURE_STYLE=	gnu
d26 5
@


1.32.2.1
log
@use MASTER_SITE_BACKUP for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2002/05/08 02:04:08 brad Exp $
d9 3
a11 3
MASTER_SITES=		${MASTER_SITE_BACKUP}
#MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.4/ \
#		http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
@


1.31
log
@- bump NEED_VERSION
- rename checksums file
- add regression tests
- change autoconf test to use __ELF__ cpp symbol instead of using file(1)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2001/09/28 06:02:13 pvalchev Exp $
d3 1
a3 1
COMMENT=	"stack-based interpreter for terminal applications"
d5 5
a9 4
DISTNAME=	slang-1.4.4
PKGNAME=	libslang-1.4.4
CATEGORIES=	devel
NEED_VERSION=	1.500
d11 1
a11 1
		http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
d13 1
a13 1
HOMEPAGE=	http://www.s-lang.org/
d15 1
a15 1
MAINTAINER=	Brad Smith <brad@@openbsd.org>
d18 1
a18 1
PERMIT_PACKAGE_FTP=	Yes
d22 1
a22 1
CONFIGURE_STYLE= gnu
d25 2
a26 2
REGRESS_TARGET=	runtests
REGRESS_FLAGS=	TCAPLIB="-ltermlib"
@


1.31.2.1
log
@use MASTER_SITE_BACKUP for now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2001/12/08 05:22:07 brad Exp $
d8 3
a10 3
MASTER_SITES=	${MASTER_SITE_BACKUP}
#MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.4/ \
#		http://gd.tuwien.ac.at/editors/davis/slang/v1.4/
@


1.30
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2001/05/11 23:19:53 drahn Exp $
d8 1
a8 1
NEED_VERSION=	1.402
d22 1
a22 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/autoconf
d24 2
a25 2
test:	build
	@@cd ${WRKSRC} && ${MAKE} runtests
@


1.29
log
@Mark libslang as unbroken for powerpc. The problem was a bug in isinf()
which was fixed earlier today.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2001/05/06 00:13:09 lebel Exp $
d22 1
@


1.28
log
@devel: COMMENT is out, bump NEED_VERSION.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2001/02/21 20:44:42 brad Exp $
a3 4

.if ${MACHINE_ARCH} == "powerpc"
BROKEN=		"BROKEN on powerpc: reason unknown at the moment"
.endif
@


1.27
log
@upgrade to libslang 1.4.4
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.26 2001/02/08 02:05:35 brad Exp $
d12 1
a12 1
NEED_VERSION=	1.336
@


1.26
log
@de to libslang 1.4.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2000/11/11 22:40:55 brad Exp $
d4 1
a4 1
#BROKEN=		"BROKEN on powerpc: reason unknown at the moment"
d7 2
a8 2
DISTNAME=	slang-1.4.3
PKGNAME=	libslang-1.4.3
@


1.25
log
@mark broken on powerpc.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2000/10/22 14:03:07 espie Exp $
d4 1
a4 1
BROKEN=		"BROKEN on powerpc: reason unknown at the moment"
d7 2
a8 2
DISTNAME=	slang-1.4.2
PKGNAME=	libslang-1.4.2
d16 1
a16 1
MAINTAINER=	Todd T. Fries <todd@@openbsd.org>
@


1.24
log
@Complete a few MAINTAINER names.
@
text
@d1 5
a5 1
# $OpenBSD: Makefile,v 1.23 2000/10/21 19:59:17 brad Exp $
@


1.23
log
@bump NEED_VERSION
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2000/09/05 03:27:29 brad Exp $
d12 1
a12 1
MAINTAINER=	todd@@openbsd.org
@


1.22
log
@upgrade to libslang 1.4.2
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/07/04 01:46:39 krw Exp $
d6 1
a6 1
NEED_VERSION=	1.322
@


1.21
log
@Change PFRAG.shared ldconfig invocation(s) to
DYNLIBDIR() invocations.

Bump NEED_VERSION to 1.310 so DYNLIBDIR() works.

As requested by espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2000/06/25 20:38:30 brad Exp $
d3 2
a4 2
DISTNAME=	slang-1.4.1
PKGNAME=	libslang-1.4.1
d6 1
a6 1
NEED_VERSION=	1.310
a19 6

do-install:
	@@cd ${WRKDIST}/src && ${MAKE} prefix="${PREFIX}" ${INSTALL_TARGET}
	@@if [ ${INSTALL_TARGET} == "install-elf" ]; then \
	cd ${WRKDIST}/src && ${MAKE} prefix="${PREFIX}" install-links; \
	fi
@


1.20
log
@- add HOMEPAGE
- make -> ${MAKE}
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2000/06/13 02:07:48 kevlo Exp $
d6 1
a6 1
NEED_VERSION=	1.301
@


1.19
log
@- Upgrade to version 1.4.1
- GNU_CONFIGURE -> CONFIGURE_STYLE
- Remove FAKE= Yes
- Add @@comment with PLIST & PLIST.noshared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2000/03/25 21:08:01 brad Exp $
d10 2
d19 1
a19 1
CONFIGURE_STYLE=	gnu
d22 1
a22 1
	@@cd ${WRKDIST}/src && make prefix=${PREFIX} ${INSTALL_TARGET}
d24 1
a24 1
	cd ${WRKDIST}/src && make prefix=${PREFIX} install-links; \
d28 1
a28 1
	@@cd ${WRKSRC} && make runtests
@


1.18
log
@use gzip'd tarball
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2000/03/25 15:28:04 kevlo Exp $
d3 2
a4 2
DISTNAME=	slang-1.4.0
PKGNAME=	libslang-1.4.0
d6 1
a6 1
NEED_VERSION=	1.218
d17 1
a17 3
FAKE=		Yes

GNU_CONFIGURE=  Yes
@


1.18.2.1
log
@bring devel as of cut-over date into 2.7 branch
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2000/07/04 01:46:39 krw Exp $
d3 2
a4 2
DISTNAME=	slang-1.4.1
PKGNAME=	libslang-1.4.1
d6 1
a6 1
NEED_VERSION=	1.310
a9 2
HOMEPAGE=	http://www.s-lang.org/

d17 3
a19 1
CONFIGURE_STYLE= gnu
d22 1
a22 1
	@@cd ${WRKDIST}/src && ${MAKE} prefix="${PREFIX}" ${INSTALL_TARGET}
d24 1
a24 1
	cd ${WRKDIST}/src && ${MAKE} prefix="${PREFIX}" install-links; \
d28 1
a28 1
	@@cd ${WRKSRC} && ${MAKE} runtests
@


1.17
log
@Upgrade to version 1.4.0.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2000/03/24 22:11:39 espie Exp $
a9 1

d18 1
a18 1
USE_BZIP2=      Yes
@


1.16
log
@Move all NEED_VERSION right after CATEGORY
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2000/03/04 19:12:51 espie Exp $
d3 2
a4 2
DISTNAME=	slang-1.3.10
PKGNAME=	libslang-1.3.10
d7 2
a8 2
MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.3/ \
		http://gd.tuwien.ac.at/editors/davis/slang/v1.3/
a12 1
LICENSE_TYPE=	Artistic GPL
d17 1
d19 1
@


1.15
log
@fake + license info
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 1999/12/29 23:58:11 brad Exp $
d6 1
a9 1
NEED_VERSION=	1.218
@


1.14
log
@add build target to dependency list for test target to ensure that
libslang is actually built before trying to run the test
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 1999/11/28 00:28:59 brad Exp $
d9 1
a9 1
NEED_VERSION=	1.73
d13 7
a19 1
GNU_CONFIGURE=  yes
d21 5
a25 2
post-install:
	@@${LDCONFIG} -m ${PREFIX}/lib
@


1.13
log
@previous version of libslang hasn't been available for awhile now from
the dist site, upgrade to libslang 1.3.10
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 1999/10/01 23:17:38 brad Exp $
d18 1
a18 1
test:
@


1.12
log
@upgrade to libslang 1.3.9
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 1999/07/15 01:14:21 brad Exp $
d3 2
a4 2
DISTNAME=	slang-1.3.9
PKGNAME=	libslang-1.3.9
d6 2
a7 1
MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.3/
d19 1
a19 1
	@@cd ${WRKSRC} && ${MAKE} runtests
@


1.11
log
@upgrade to libslang 1.3.8
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 1999/06/23 17:28:33 brad Exp $
d3 2
a4 2
DISTNAME=	slang-1.3.8
PKGNAME=	libslang-1.3.8
@


1.10
log
@add support for shared libs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 1999/06/23 01:44:36 marc Exp $
d3 2
a4 2
DISTNAME=	slang-1.3.7
PKGNAME=	libslang-1.3.7
d13 3
@


1.9
log
@Update slang to version 1.3.7
WARNING: You MUST pkg_delete your old version before installing this one.
Why?  because I was too lazy to teach slang about OpenBSD shared libs
(It only knows Linux shared libs) and thus only built the static lib.

This probably has broken some other ports that depend upon slang.
I'll find and fix them next
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 1999/04/01 06:20:07 brad Exp $
d6 1
d8 1
a8 3
NEED_VERSION=	1.64

MAINTAINER=	todd@@OpenBSD.org
d10 1
a10 1
MASTER_SITES=	ftp://space.mit.edu/pub/davis/slang/v1.3/
d18 5
@


1.8
log
@fix dependency lists, fix email address's and remove unnecessary comments
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 1999/02/21 04:26:10 marc Exp $
d3 2
a4 2
DISTNAME=       slang1.2.2
PKGNAME=        libslang-1.2.2
d9 1
a9 1
MAINTAINER=     todd@@OpenBSD.org
d11 1
a11 1
MASTER_SITES=   ftp://space.mit.edu/pub/davis/slang/
a13 7
ALL_TARGET=     all
INSTALL_TARGET= install
.if (${MACHINE_ARCH} != "alpha")
ALL_TARGET+=	elf
INSTALL_TARGET+=install-elf
.endif
WRKSRC=         ${WRKDIR}/slang
d15 3
a17 2
post-install:
	${LDCONFIG} -m ${PREFIX}/lib
@


1.7
log
@needs version 1.64 (or later) of bsd.port.mk
to build/install correctly; PLIST.noshared
@
text
@d1 1
a1 2
# $OpenBSD: Makefile,v 1.6 1998/11/20 03:42:59 marc Exp $
#
@


1.6
log
@update to 1.2; Peter Reich <peter@@alles.prima.de>
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 1998/10/18 05:02:05 marc Exp $
d7 2
@


1.5
log
@comment out the BROKEN reason for all ports where the reason
was source files out of date and we have a copy of the required
version on ftp.openbsd.org
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 1998/10/08 18:47:14 marc Exp $
d4 2
a5 2
DISTNAME=       slang0.99-38
PKGNAME=        libslang-0.99.38
a7 2
#BROKEN=	"newer version available"

a21 3
.if (${MACHINE_ARCH} != "alpha")
	@@rm -f ${PREFIX}/lib/libslang.so.99.3[348]
.endif
@


1.4
log
@BROKEN: newer version available
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 1998/02/10 10:45:16 niklas Exp $
d8 1
a8 1
BROKEN=		"newer version available"
@


1.3
log
@On a current system LDCONFIG need not be special cased for mips/alpha
@
text
@d1 1
a1 6
# OpenBSD makefile for:    S-Lang library
# Version required:     0.99-38
# Date created:         19 November 1997
# Whom:                 todd@@OpenBSD.org
#
# $OpenBSD: Makefile,v 1.2 1997/12/03 19:56:19 niklas Exp $
d7 2
a8 1
MASTER_SITES=   ftp://space.mit.edu/pub/davis/slang/
d11 2
@


1.2
log
@deal with non a.out archs
@
text
@d6 1
a6 1
# $OpenBSD: Makefile,v 1.1.1.1 1997/11/20 00:18:38 todd Exp $
d28 1
a28 3
.if (${MACHINE_ARCH} == "mips")
	${LDCONFIG} -n ${PREFIX}/lib
.else
a29 2
.endif
.endif
@


1.1
log
@Initial revision
@
text
@d6 1
a6 1
# $OpenBSD$
d17 6
a22 2
ALL_TARGET=     all elf
INSTALL_TARGET= install install-elf
d26 1
d28 3
d32 2
a33 1

@


1.1.1.1
log
@libslang
@
text
@@
