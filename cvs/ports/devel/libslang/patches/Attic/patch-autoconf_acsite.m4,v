head	1.7;
access;
symbols
	OPENBSD_3_1:1.6.0.2
	OPENBSD_3_1_BASE:1.6
	OPENBSD_3_0:1.2.0.4
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.2
	OPENBSD_2_9:1.2.0.2
	OPENBSD_2_9_BASE:1.2;
locks; strict;
comment	@# @;


1.7
date	2002.05.08.02.04.08;	author brad;	state dead;
branches;
next	1.6;

1.6
date	2002.03.24.22.15.07;	author brad;	state Exp;
branches;
next	1.5;

1.5
date	2002.02.13.01.44.44;	author pvalchev;	state Exp;
branches;
next	1.4;

1.4
date	2002.02.12.23.26.50;	author pvalchev;	state Exp;
branches;
next	1.3;

1.3
date	2001.12.08.05.22.08;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2001.03.04.06.11.52;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2001.02.08.02.05.35;	author brad;	state Exp;
branches;
next	;


desc
@@


1.7
log
@upgrade to libslang 1.4.5
@
text
@--- autoconf/acsite.m4.orig	Tue Feb 20 19:17:29 2001
+++ autoconf/acsite.m4	Tue Feb 12 16:09:10 2002
@@@@ -94,6 +94,9 @@@@ case "$host_os" in
       RPATH="-rpath "
     fi
   ;;
+  *openbsd*)
+    RPATH="-Wl,-R,"
+  ;;
 esac
 ])
 
@@@@ -543,6 +546,25 @@@@ case "$host_os" in
        CC_SHARED="cc \$(CFLAGS) -shared -K pic"
      fi
      ;;
+  *openbsd* )
+    DYNAMIC_LINK_FLAGS=""
+    ELF_CC="$CC"
+    case `arch -s` in
+      sparc64)
+        ELF_CFLAGS="$CFLAGS -fPIC"
+	;;
+      *)
+        ELF_CFLAGS="$CFLAGS -fpic"
+	;;
+    esac
+    ELF_LINK="$CC -shared $ELF_CFLAGS"
+    ELF_LINK_CMD="\$(ELF_LINK)"
+    ELF_DEP_LIBS="\$(DL_LIB) -lm -lcurses"
+    CC_SHARED="$CC -shared $ELF_CFLAGS"
+    if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`"; then
+      DYNAMIC_LINK_FLAGS="-Wl,-E"
+    fi
+  ;;
   * )
     echo "Note: ELF compiler for host_os=$host_os may be wrong"
     ELF_CC="$CC"
@


1.6
log
@add link of libcurses to libslang, should fix problems with ports that
use libslang on ELF-based systems.
@
text
@@


1.5
log
@sparc64 only; brad
@
text
@d30 1
a30 1
+    ELF_DEP_LIBS="\$(DL_LIB) -lm"
@


1.4
log
@use -fPIC on sparc64 & sparc
@
text
@d21 1
a21 1
+      sparc*)
@


1.3
log
@- bump NEED_VERSION
- rename checksums file
- add regression tests
- change autoconf test to use __ELF__ cpp symbol instead of using file(1)
@
text
@d1 2
a2 2
--- autoconf/acsite.m4.orig	Tue Feb 20 21:17:29 2001
+++ autoconf/acsite.m4	Fri Dec  7 23:37:35 2001
d13 1
a13 1
@@@@ -543,6 +546,18 @@@@ case "$host_os" in
d20 8
a27 1
+    ELF_CFLAGS="$CFLAGS -fpic"
@


1.2
log
@add libm as a dependency library for linking the libslang shared library.
@
text
@d2 2
a3 2
+++ autoconf/acsite.m4	Sun Mar  4 00:51:04 2001
@@@@ -94,6 +94,9 @@@@
d8 1
a8 1
+    RPATH="-Wl,-rpath,"
d13 1
a13 1
@@@@ -543,6 +546,18 @@@@
d25 1
a25 1
+    if test "`/usr/bin/file /usr/lib/libc.so.* | grep ELF`" != ""; then
@


1.1
log
@de to libslang 1.4.3
@
text
@d1 2
a2 2
--- autoconf/acsite.m4.orig	Sun Feb  4 01:32:54 2001
+++ autoconf/acsite.m4	Wed Feb  7 15:50:44 2001
d21 1
a21 1
+    ELF_LINK="$CC -shared -fpic"
d23 2
a24 2
+    ELF_DEP_LIBS=
+    CC_SHARED="$CC $CFLAGS -shared -fpic"
@

