head	1.8;
access;
symbols
	OPENBSD_6_1:1.8.0.2
	OPENBSD_6_1_BASE:1.8
	OPENBSD_6_0:1.7.0.4
	OPENBSD_6_0_BASE:1.7
	OPENBSD_5_9:1.7.0.2
	OPENBSD_5_9_BASE:1.7
	OPENBSD_5_8:1.6.0.18
	OPENBSD_5_8_BASE:1.6
	OPENBSD_5_7:1.6.0.14
	OPENBSD_5_7_BASE:1.6
	OPENBSD_5_6:1.6.0.12
	OPENBSD_5_6_BASE:1.6
	OPENBSD_5_5:1.6.0.10
	OPENBSD_5_5_BASE:1.6
	OPENBSD_5_4:1.6.0.8
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.6.0.6
	OPENBSD_5_3_BASE:1.6
	OPENBSD_5_2:1.6.0.4
	OPENBSD_5_2_BASE:1.6
	OPENBSD_5_1_BASE:1.6
	OPENBSD_5_1:1.6.0.2
	OPENBSD_5_0:1.5.0.8
	OPENBSD_5_0_BASE:1.5
	OPENBSD_4_9:1.5.0.6
	OPENBSD_4_9_BASE:1.5
	OPENBSD_4_8:1.5.0.4
	OPENBSD_4_8_BASE:1.5
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.4.0.16
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.4.0.14
	OPENBSD_4_5_BASE:1.4
	OPENBSD_4_4:1.4.0.12
	OPENBSD_4_4_BASE:1.4
	OPENBSD_4_3:1.4.0.10
	OPENBSD_4_3_BASE:1.4
	OPENBSD_4_2:1.4.0.8
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.4.0.6
	OPENBSD_4_1_BASE:1.4
	OPENBSD_4_0:1.4.0.4
	OPENBSD_4_0_BASE:1.4
	OPENBSD_3_9:1.4.0.2
	OPENBSD_3_9_BASE:1.4
	OPENBSD_3_8:1.3.0.8
	OPENBSD_3_8_BASE:1.3
	OPENBSD_3_7:1.3.0.6
	OPENBSD_3_7_BASE:1.3
	OPENBSD_3_6:1.3.0.4
	OPENBSD_3_6_BASE:1.3
	OPENBSD_3_5:1.3.0.2
	OPENBSD_3_5_BASE:1.3
	OPENBSD_3_4:1.2.0.4
	OPENBSD_3_4_BASE:1.2
	OPENBSD_3_3:1.2.0.2
	OPENBSD_3_3_BASE:1.2
	OPENBSD_3_2:1.1.0.2
	OPENBSD_3_2_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2016.09.06.13.18.42;	author jasper;	state Exp;
branches;
next	1.7;
commitid	gQ0cWhk1Adfps1Jf;

1.7
date	2016.02.20.14.02.51;	author tobiasu;	state Exp;
branches;
next	1.6;
commitid	fpZMP7I9epJBIwpY;

1.6
date	2011.09.21.22.01.56;	author sthen;	state Exp;
branches;
next	1.5;

1.5
date	2009.10.13.21.46.20;	author sthen;	state Exp;
branches;
next	1.4;

1.4
date	2006.01.07.14.19.29;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2004.01.11.07.05.31;	author brad;	state Exp;
branches;
next	1.2;

1.2
date	2002.10.19.03.07.28;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2002.05.08.02.04.08;	author brad;	state Exp;
branches;
next	;


desc
@@


1.8
log
@remove a sparc leftover
@
text
@$OpenBSD: patch-autoconf_aclocal_m4,v 1.7 2016/02/20 14:02:51 tobiasu Exp $
--- autoconf/aclocal.m4.orig	Mon Apr 11 04:37:07 2011
+++ autoconf/aclocal.m4	Fri Feb 19 08:41:23 2016
@@@@ -571,13 +571,13 @@@@ fi
 
 dnl #Some defaults
 ELFLIB="lib\$(THIS_LIB).so"
-ELFLIB_MAJOR="\$(ELFLIB).\$(ELF_MAJOR_VERSION)"
-ELFLIB_MAJOR_MINOR="\$(ELFLIB_MAJOR).\$(ELF_MINOR_VERSION)"
+ELFLIB_MAJOR="\$(ELFLIB).\$(LIBslang_MAJOR)"
+ELFLIB_MAJOR_MINOR="\$(ELFLIB).\$(LIBslang_MAJOR).\$(LIBslang_MINOR)"
 ELFLIB_MAJOR_MINOR_MICRO="\$(ELFLIB_MAJOR_MINOR).\$(ELF_MICRO_VERSION)"
 
 dnl# This specifies the target to use in the makefile to install the shared library
 INSTALL_ELFLIB_TARGET="install-elf-and-links"
-ELFLIB_BUILD_NAME="\$(ELFLIB_MAJOR_MINOR_MICRO)"
+ELFLIB_BUILD_NAME="\$(ELFLIB_MAJOR_MINOR)"
 INSTALL_MODULE="\$(INSTALL_DATA)"
 SLANG_DLL_CFLAGS=""
 M_LIB="-lm"
@@@@ -702,6 +702,25 @@@@ case "$host_os" in
     ELF_LINK="\$(CC) \$(LDFLAGS) -shared -Wl,-O1 -Wl,--version-script,\$(VERSION_SCRIPT) -Wl,-soname,\$(ELFLIB_MAJOR)"
     ELF_DEP_LIBS="\$(DL_LIB)"
     CC_SHARED="\$(CC) \$(CFLAGS) -shared -fPIC"
+    ;;
+   *openbsd* )
+      DYNAMIC_LINK_FLAGS=""
+      ELF_CC="$CC"
+      case `arch -s` in
+        sparc64)
+          ELF_CFLAGS="$CFLAGS -fPIC"
+         ;;
+        *)
+          ELF_CFLAGS="$CFLAGS -fpic"
+         ;;
+      esac
+      ELF_LINK="$CC -shared $ELF_CFLAGS"
+      ELF_LINK_CMD="\$(ELF_LINK)"
+      ELF_DEP_LIBS=
+      CC_SHARED="$CC -shared $ELF_CFLAGS"
+      if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`"; then
+        DYNAMIC_LINK_FLAGS="-Wl,-E"
+      fi
     ;;
   * )
     echo "Note: ELF compiler for host_os=$host_os may be wrong"
@


1.7
log
@sparc needs -fPIC as well
@
text
@d1 1
a1 1
$OpenBSD: patch-autoconf_aclocal_m4,v 1.6 2011/09/21 22:01:56 sthen Exp $
d30 1
a30 1
+        sparc|sparc64)
@


1.6
log
@update to S-Lang 2.2.4
@
text
@d1 3
a3 3
$OpenBSD: patch-autoconf_aclocal_m4,v 1.5 2009/10/13 21:46:20 sthen Exp $
--- autoconf/aclocal.m4.orig	Mon Apr 11 03:37:07 2011
+++ autoconf/aclocal.m4	Wed Sep 21 20:21:08 2011
d30 1
a30 1
+        sparc64)
@


1.5
log
@update slang to 2.2.1, dependent ports will be updated shortly.
@
text
@d1 4
a4 4
$OpenBSD$
--- autoconf/aclocal.m4.orig	Mon Sep  7 03:10:49 2009
+++ autoconf/aclocal.m4	Sat Oct 10 13:54:45 2009
@@@@ -570,13 +570,13 @@@@ fi
d21 1
a21 1
@@@@ -701,6 +701,25 @@@@ case "$host_os" in
@


1.4
log
@- SHARED_LIBS
- regen patches while I'm here
@
text
@d1 4
a4 14
$OpenBSD: patch-autoconf_aclocal_m4,v 1.3 2004/01/11 07:05:31 brad Exp $
--- autoconf/aclocal.m4.orig	Sun Mar 23 08:06:40 2003
+++ autoconf/aclocal.m4	Sat Jan  7 14:36:59 2006
@@@@ -86,7 +86,7 @@@@ case "$host_os" in
       fi
     fi
   ;;
-  *osf*)
+  *osf* | *openbsd*)
     if test "X$GCC" = Xyes
     then
       RPATH="-Wl,-rpath,"
@@@@ -482,8 +482,8 @@@@ AC_CHECK_HEADER(dlfcn.h,[
 AC_SUBST(DYNAMIC_LINK_LIB)
d6 1
d9 1
a9 1
-ELFLIB_MAJOR_MINOR="\$(ELFLIB).\$(ELF_MAJOR_VERSION).\$(ELF_MINOR_VERSION)"
d12 1
d14 31
a44 26
 case "$host_os" in
   *linux* )
@@@@ -571,6 +571,25 @@@@ case "$host_os" in
      ELFLIB="lib\$(THIS_LIB).dylib"
      ELFLIB_MAJOR="lib\$(THIS_LIB).\$(ELF_MAJOR_VERSION).dylib"
      ELFLIB_MAJOR_MINOR="lib\$(THIS_LIB).\$(ELF_MAJOR_VERSION).\$(ELF_MINOR_VERSION).dylib"
+     ;;
+  *openbsd* )
+     DYNAMIC_LINK_FLAGS=""
+     ELF_CC="$CC"
+     case `arch -s` in
+       sparc64)
+         ELF_CFLAGS="$CFLAGS -fPIC"
+        ;;
+       *)
+         ELF_CFLAGS="$CFLAGS -fpic"
+        ;;
+     esac
+     ELF_LINK="$CC -shared $ELF_CFLAGS"
+     ELF_LINK_CMD="\$(ELF_LINK)"
+     ELF_DEP_LIBS=
+     CC_SHARED="$CC -shared $ELF_CFLAGS"
+     if test -z "`echo __ELF__ | $CC -E - | grep __ELF__`"; then
+       DYNAMIC_LINK_FLAGS="-Wl,-E"
+     fi
      ;;
@


1.3
log
@remove shared lib inter-library dependency on libm and libcurses
@
text
@d1 3
a3 3
$OpenBSD: patch-autoconf_aclocal_m4,v 1.2 2002/10/19 03:07:28 brad Exp $
--- autoconf/aclocal.m4.orig	2003-03-23 02:06:40.000000000 -0500
+++ autoconf/aclocal.m4	2004-01-10 23:27:34.000000000 -0500
d13 13
a25 1
@@@@ -572,6 +572,25 @@@@ case "$host_os" in
d28 1
a28 1
      ;;
d47 1
a47 1
+     ;;
a49 1
     ELF_CC="$CC"
@


1.2
log
@upgrade to libslang 1.4.6
@
text
@d1 9
a9 9
$OpenBSD: patch-autoconf_aclocal_m4,v 1.1 2002/05/08 02:04:08 brad Exp $
--- autoconf/aclocal.m4.orig	Mon Oct  7 16:36:22 2002
+++ autoconf/aclocal.m4	Fri Oct 18 22:35:10 2002
@@@@ -68,7 +68,7 @@@@ dnl# determine whether or not -R or -rpa
 AC_DEFUN(JD_INIT_RPATH,
 [
 case "$host_os" in
-  *linux*|*solaris* )
+  *linux*|*solaris*|*openbsd* )
d12 2
a13 3
       if test "X$ac_R_nospace" = "Xno"
@@@@ -566,6 +566,25 @@@@ case "$host_os" in
      ELFLIB="lib\$(THIS_LIB).dylib"
d16 1
a16 1
+     ;;
d30 1
a30 1
+     ELF_DEP_LIBS="\$(DL_LIB) -lm -lcurses"
d35 1
a35 1
      ;;
d38 1
@


1.1
log
@upgrade to libslang 1.4.5
@
text
@d1 3
a3 3
$OpenBSD$
--- autoconf/aclocal.m4.orig	Tue May  7 19:22:54 2002
+++ autoconf/aclocal.m4	Tue May  7 19:28:19 2002
d14 3
a16 3
      ELFLIB="lib$(THIS_LIB).dylib"
      ELFLIB_MAJOR="lib$(THIS_LIB).$(ELF_MAJOR_VERSION).dylib"
      ELFLIB_MAJOR_MINOR="lib$(THIS_LIB).$(ELF_MAJOR_VERSION).$(ELF_MINOR_VERSION).dylib"
@

