head	1.10;
access;
symbols
	OPENBSD_6_0:1.9.0.8
	OPENBSD_6_0_BASE:1.9
	OPENBSD_5_9:1.9.0.4
	OPENBSD_5_9_BASE:1.9
	OPENBSD_5_8:1.9.0.6
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.9.0.2
	OPENBSD_5_7_BASE:1.9
	OPENBSD_5_6:1.7.0.4
	OPENBSD_5_6_BASE:1.7
	OPENBSD_5_5:1.7.0.2
	OPENBSD_5_5_BASE:1.7
	OPENBSD_5_4:1.6.0.2
	OPENBSD_5_4_BASE:1.6
	OPENBSD_5_3:1.5.0.2
	OPENBSD_5_3_BASE:1.5
	OPENBSD_5_2:1.1.1.1.0.2
	OPENBSD_5_2_BASE:1.1.1.1
	edd_20120716:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.10
date	2017.03.04.14.12.34;	author krw;	state dead;
branches;
next	1.9;
commitid	BH89xVh8SCcSbZyc;

1.9
date	2014.08.22.22.21.54;	author kili;	state Exp;
branches;
next	1.8;
commitid	V82zoWOaRELJa7mF;

1.8
date	2014.08.10.09.58.05;	author espie;	state Exp;
branches;
next	1.7;
commitid	jyyOLTDxRdjpw44n;

1.7
date	2014.01.23.23.37.32;	author edd;	state Exp;
branches;
next	1.6;

1.6
date	2013.03.11.10.50.12;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2013.01.13.15.42.12;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2012.11.30.19.08.05;	author chrisz;	state Exp;
branches;
next	1.3;

1.3
date	2012.10.01.21.20.55;	author edd;	state Exp;
branches;
next	1.2;

1.2
date	2012.08.18.22.16.27;	author avsm;	state Exp;
branches;
next	1.1;

1.1
date	2012.07.16.15.51.33;	author edd;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.07.16.15.51.33;	author edd;	state Exp;
branches;
next	;


desc
@@


1.10
log
@Remove. Archaic version, unused by anything.

ok edd@@ (maintainer)
@
text
@# $OpenBSD: Makefile,v 1.9 2014/08/22 22:21:54 kili Exp $

COMMENT =		GMP bindings for OCaml

V =			0.13
REVISION =		5
DISTNAME =		mlgmp-${V}
PKGNAME =		ocaml-mlgmp-${V}

CATEGORIES =		devel math
HOMEPAGE =		http://caml.inria.fr/cgi-bin/hump.en.cgi?contrib=278
MAINTAINER =		Edd Barrett <edd@@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

MASTER_SITES =		http://theunixzoo.co.uk/files/

MODULES =		lang/ocaml
BUILD_DEPENDS =		${RUN_DEPENDS}
RUN_DEPENDS =		devel/gmp devel/mpfr

USE_GMAKE =		Yes

# overide their site specific include/lib paths
MAKE_FLAGS += GMP_LIBDIR=${LOCALBASE}/lib
MAKE_FLAGS += GMP_INCLUDES=-I${LOCALBASE}/include
MAKE_FLAGS += CFLAGS_MISC="${CFLAGS} -fPIC"

# build does not support just bytecode, but we can
# deal with this my calling certain make targets
LIBS_NATIVE =	gmp.a gmp.cmxa
LIBS_OTHER =	libmlgmp.a gmp.cma gmp.cmi

.include <bsd.port.arch.mk>
.if ${PROPERTIES:Mocaml_native}
MAKE_FLAGS +=	LIBS="${LIBS_OTHER} ${LIBS_NATIVE}"
MAKE_FLAGS +=	TESTS="test_suite test_suite.opt"
MAKE_FLAGS +=	TESTS_RUN="tests-nonative tests-native"
.else
MAKE_FLAGS +=	LIBS="${LIBS_OTHER}"
MAKE_FLAGS +=	TESTS="test_suite"
MAKE_FLAGS +=	TESTS_RUN="tests-nonative"
.endif

TEST_TARGET =	tests

# make dependencies are screwed up in the release tarball
pre-build:
	cd ${WRKBUILD} && ${MAKE_PROGRAM} clean

post-install:
	${SUBST_PROGRAM} ${FILESDIR}/META ${PREFIX}/lib/ocaml/gmp/META
	chmod 644 ${PREFIX}/lib/ocaml/gmp/gmp.mli

.include <bsd.port.mk>
@


1.9
log
@Bump after lang/ocaml pkgname change (first round, more bumps will follow).
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2014/08/10 09:58:05 espie Exp $
@


1.8
log
@use more specific version of SUBST_* where appropriate
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2014/01/23 23:37:32 edd Exp $
d6 1
a6 1
REVISION =		4
@


1.7
log
@ocaml-mlgmp: .mli files should be 644. Now passes the new mode checker.

Prodded by espie@@ on ports@@/icb, OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2013/03/11 10:50:12 espie Exp $
d53 1
a53 2
	${SUBST_CMD} -o ${BINOWN} -g ${BINGRP} -c \
		${FILESDIR}/META ${PREFIX}/lib/ocaml/gmp/META
@


1.6
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2013/01/13 15:42:12 naddy Exp $
d6 1
a6 1
REVISION =		3
d55 1
@


1.5
log
@don't use RUN_DEPENDS=${BUILD_DEPENDS} as it mistakenly picks up gmake
ok edd@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/11/30 19:08:05 chrisz Exp $
a15 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
d46 1
a46 1
REGRESS_TARGET =	tests
@


1.4
log
@Update lang/ocaml to 4.00.1.
Make all ocaml ports depend on the version of ocaml they were built with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/10/01 21:20:55 edd Exp $
d6 1
a6 1
REVISION =		2
d23 2
a24 2
BUILD_DEPENDS =		devel/gmp devel/mpfr
RUN_DEPENDS =		${BUILD_DEPENDS}
@


1.3
log
@We now require -fPIC to link ocaml-mlgmp.

OK sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/08/18 22:16:27 avsm Exp $
d6 1
a6 1
REVISION =		1
@


1.2
log
@update ocaml-mlgmp to use ocaml_native property and have a META file for ocamlfind
* bump REVISION
* update ocamlfind sitelib
* use new ocaml_native PROPERTY
* add ocamlfind META info
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/07/16 15:51:33 edd Exp $
d6 1
a6 1
REVISION =		0
d31 1
a31 1
MAKE_FLAGS += CFLAGS_MISC="${CFLAGS}"
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.60 2010/10/24 20:41:23 ajacoutot Exp $
d6 1
d37 11
a47 3
MAKE_FLAGS +=	LIBS="${LIBS_OTHER} ${MODOCAML_NATIVE:L:S/yes/${LIBS_NATIVE}/:S/no//}"
MAKE_FLAGS +=	TESTS="test_suite ${MODOCAML_NATIVE:L:S/yes/test_suite.opt/:S/no//}"
MAKE_FLAGS +=	TESTS_RUN="tests-nonative ${MODOCAML_NATIVE:L:S/yes/tests-native/:S/no//}"
d54 4
@


1.1.1.1
log
@Import mlgmp for ocaml. This time in the correct place.

OK dcoppa@@

@
text
@@
