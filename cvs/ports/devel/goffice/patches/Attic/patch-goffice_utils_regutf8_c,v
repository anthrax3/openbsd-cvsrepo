head	1.4;
access;
symbols
	OPENBSD_5_2:1.3.0.2
	OPENBSD_5_2_BASE:1.3;
locks; strict;
comment	@# @;


1.4
date	2012.12.19.10.42.05;	author ajacoutot;	state dead;
branches;
next	1.3;

1.3
date	2012.03.23.09.44.44;	author ajacoutot;	state Exp;
branches;
next	1.2;

1.2
date	2008.06.03.16.35.41;	author jasper;	state dead;
branches;
next	1.1;

1.1
date	2008.04.09.13.31.02;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Update to goffice-0.10.0.
@
text
@$OpenBSD: patch-goffice_utils_regutf8_c,v 1.3 2012/03/23 09:44:44 ajacoutot Exp $

Fix with pcre >= 8.30 (undefine ref. to pcre_info).

--- goffice/utils/regutf8.c.orig	Tue Mar 20 07:33:58 2012
+++ goffice/utils/regutf8.c	Tue Mar 20 07:35:37 2012
@@@@ -155,7 +155,7 @@@@ go_regcomp (GORegexp *gor, const char *pat, int cflags
 		default: return GO_REG_BADPAT;
 		}
 	} else {
-		gor->re_nsub = pcre_info (r, NULL, NULL);
+		pcre_fullinfo(r, NULL, PCRE_INFO_CAPTURECOUNT, &gor->re_nsub);
 		gor->nosub = (cflags & GO_REG_NOSUB) != 0;
 		return 0;
 	}
@


1.3
log
@Fix an undefined reference with pcre >= 8.30.
@
text
@d1 1
a1 1
$OpenBSD$
@


1.2
log
@- update goffice to 0.6.4

joint work with seth jackson, ok ajacoutot@@
@
text
@d1 15
a15 11
$OpenBSD: patch-goffice_utils_regutf8_c,v 1.1 2008/04/09 13:31:02 jasper Exp $
--- goffice/utils/regutf8.c.orig	Mon Apr  7 17:30:25 2008
+++ goffice/utils/regutf8.c	Mon Apr  7 17:34:18 2008
@@@@ -11,6 +11,7 @@@@
 #include "go-glib-extras.h"
 #include <gsf/gsf-impl-utils.h>
 #include <glib/gi18n-lib.h>
+#include <glib/gtestutils.h>
 #include <string.h>
 
 /* ------------------------------------------------------------------------- */
@


1.1
log
@- unbreak after recent glib2 update

testing and ok simon@@
@
text
@d1 1
a1 1
$OpenBSD$
@

