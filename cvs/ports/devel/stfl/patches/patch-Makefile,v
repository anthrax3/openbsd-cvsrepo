head	1.2;
access;
symbols
	OPENBSD_6_2:1.2.0.10
	OPENBSD_6_2_BASE:1.2
	OPENBSD_6_1:1.2.0.8
	OPENBSD_6_1_BASE:1.2
	OPENBSD_6_0:1.2.0.6
	OPENBSD_6_0_BASE:1.2
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	OPENBSD_5_8:1.2.0.4
	OPENBSD_5_8_BASE:1.2
	OPENBSD_5_7:1.1.1.1.0.10
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.8
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.6
	OPENBSD_5_5_BASE:1.1.1.1
	OPENBSD_5_4:1.1.1.1.0.4
	OPENBSD_5_4_BASE:1.1.1.1
	OPENBSD_5_3:1.1.1.1.0.2
	OPENBSD_5_3_BASE:1.1.1.1
	ajacoutot_20121230:1.1.1.1
	ajacoutot:1.1.1;
locks; strict;
comment	@# @;


1.2
date	2015.07.16.23.18.23;	author ajacoutot;	state Exp;
branches;
next	1.1;
commitid	Qc6G1nhbJOBkQzWF;

1.1
date	2012.12.30.17.59.36;	author ajacoutot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.12.30.17.59.36;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to stfl-0.24.
@
text
@$OpenBSD: patch-Makefile,v 1.1.1.1 2012/12/30 17:59:36 ajacoutot Exp $
--- Makefile.orig	Thu Feb 12 14:14:33 2015
+++ Makefile	Fri Jul 17 01:17:37 2015
@@@@ -20,14 +20,14 @@@@
 
 include Makefile.cfg
 
-export CC = gcc -pthread
-export CFLAGS += -I. -Wall -Os -ggdb -D_GNU_SOURCE -fPIC
-export LDLIBS += -lncursesw
+export CC ?= gcc -pthread
+export CFLAGS += -I. -Wall -ggdb -D_XOPEN_SOURCE_EXTENDED -fPIC -I${LOCALBASE}/include
+export LDLIBS += -lpthread -lncursesw -L${LOCALBASE}/lib -liconv -Wl,-R${LOCALBASE}/lib
 
-SONAME  := libstfl.so.0
+SONAME  := libstfl.so.${LIBstfl_VERSION}
 VERSION := 0.24
 
-all: libstfl.so.$(VERSION) libstfl.a example
+all: $(SONAME) libstfl.a example
 
 example: libstfl.a example.o
 
@@@@ -37,9 +37,9 @@@@ libstfl.a: public.o base.o parser.o dump.o style.o bin
 	ar qc $@@ $^
 	ranlib $@@
 
-libstfl.so.$(VERSION): public.o base.o parser.o dump.o style.o binding.o iconv.o \
+$(SONAME): public.o base.o parser.o dump.o style.o binding.o iconv.o \
                        $(patsubst %.c,%.o,$(wildcard widgets/*.c))
-	$(CC) -shared -Wl,-soname,$(SONAME) -o $@@ $(LDLIBS) $^
+	$(CC) $(CFLAGS) -shared -o $@@ $(LDLIBS) $^
 
 clean:
 	rm -f libstfl.a example core core.* *.o Makefile.deps
@@@@ -53,8 +53,8 @@@@ clean:
 	rm -f stfl.pc libstfl.so libstfl.so.*
 
 Makefile.deps: *.c widgets/*.c *.h
-	$(CC) -I. -MM *.c > Makefile.deps_new
-	$(CC) -I. -MM widgets/*.c | sed 's,^wt_[^ ]*\.o: ,widgets/&,' >> Makefile.deps_new
+	$(CC) $(CFLAGS) -I. -MM *.c > Makefile.deps_new
+	$(CC) $(CFLAGS) -I. -MM widgets/*.c | sed 's,^wt_[^ ]*\.o: ,widgets/&,' >> Makefile.deps_new
 	mv -f Makefile.deps_new Makefile.deps
 
 install: all stfl.pc
@


1.1
log
@Initial revision
@
text
@d1 3
a3 3
$OpenBSD$
--- Makefile.orig	Mon Oct 24 08:20:48 2011
+++ Makefile	Sun Dec 30 10:31:35 2012
d17 1
a17 1
 VERSION := 0.22
@


1.1.1.1
log
@Import stfl-0.22.

STFL is a library which implements a curses-based widget set for text
terminals. The public STFL API is only 14 simple function calls big and
there are already generic SWIG bindings. Thus is very easy to port STFL
to additional scripting languages.
<...>

ok jasper@@
@
text
@@
