head	1.26;
access;
symbols
	OPENBSD_6_1:1.22.0.4
	OPENBSD_6_1_BASE:1.22
	OPENBSD_6_0:1.22.0.2
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.21.0.2
	OPENBSD_5_9_BASE:1.21
	OPENBSD_5_8:1.21.0.4
	OPENBSD_5_8_BASE:1.21
	OPENBSD_5_7:1.20.0.2
	OPENBSD_5_7_BASE:1.20
	OPENBSD_5_6:1.19.0.6
	OPENBSD_5_6_BASE:1.19
	OPENBSD_5_5:1.19.0.4
	OPENBSD_5_5_BASE:1.19
	OPENBSD_5_4:1.19.0.2
	OPENBSD_5_4_BASE:1.19
	OPENBSD_5_3:1.18.0.8
	OPENBSD_5_3_BASE:1.18
	OPENBSD_5_2:1.18.0.6
	OPENBSD_5_2_BASE:1.18
	OPENBSD_5_1_BASE:1.18
	OPENBSD_5_1:1.18.0.4
	OPENBSD_5_0:1.18.0.2
	OPENBSD_5_0_BASE:1.18
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.13.0.6
	OPENBSD_4_8_BASE:1.13
	OPENBSD_4_7:1.13.0.4
	OPENBSD_4_7_BASE:1.13
	OPENBSD_4_6:1.13.0.2
	OPENBSD_4_6_BASE:1.13
	OPENBSD_4_5:1.12.0.4
	OPENBSD_4_5_BASE:1.12
	OPENBSD_4_4:1.12.0.2
	OPENBSD_4_4_BASE:1.12
	OPENBSD_4_3:1.11.0.2
	OPENBSD_4_3_BASE:1.11
	OPENBSD_4_2:1.9.0.8
	OPENBSD_4_2_BASE:1.9
	OPENBSD_4_1:1.9.0.6
	OPENBSD_4_1_BASE:1.9
	OPENBSD_4_0:1.9.0.4
	OPENBSD_4_0_BASE:1.9
	OPENBSD_3_9:1.9.0.2
	OPENBSD_3_9_BASE:1.9
	OPENBSD_3_8:1.7.0.4
	OPENBSD_3_8_BASE:1.7
	OPENBSD_3_7:1.7.0.2
	OPENBSD_3_7_BASE:1.7
	OPENBSD_3_6:1.5.0.2
	OPENBSD_3_6_BASE:1.5
	OPENBSD_3_5:1.4.0.6
	OPENBSD_3_5_BASE:1.4
	OPENBSD_3_4:1.4.0.4
	OPENBSD_3_4_BASE:1.4
	OPENBSD_3_3:1.4.0.2
	OPENBSD_3_3_BASE:1.4
	OPENBSD_3_2:1.3.0.4
	OPENBSD_3_2_BASE:1.3
	OPENBSD_3_1:1.3.0.2
	OPENBSD_3_1_BASE:1.3
	OPENBSD_3_0:1.2.0.2
	OPENBSD_3_0_BASE:1.2
	OPENBSD_2_9_TRACKING_SWITCH:1.1.1.1
	shell_2001-Jun-29:1.1.1.1
	shell:1.1.1;
locks; strict;
comment	@# @;


1.26
date	2017.08.14.17.11.00;	author jasper;	state dead;
branches;
next	1.25;
commitid	2Y6A0t8jlVH9F9I8;

1.25
date	2017.07.26.22.45.18;	author sthen;	state Exp;
branches;
next	1.24;
commitid	tD4MFrpYYDDL2UFT;

1.24
date	2017.07.16.19.18.50;	author espie;	state Exp;
branches;
next	1.23;
commitid	tt0GhWK5c4uf9ILG;

1.23
date	2017.04.10.11.45.26;	author sthen;	state Exp;
branches;
next	1.22;
commitid	XDh1zlSBq0boKsHk;

1.22
date	2016.06.08.21.20.26;	author ajacoutot;	state Exp;
branches;
next	1.21;
commitid	ag71zW5L3L8FyQnF;

1.21
date	2015.03.16.18.07.43;	author naddy;	state Exp;
branches;
next	1.20;
commitid	IJdm3Zowcdkcxp5X;

1.20
date	2015.02.16.22.57.08;	author naddy;	state Exp;
branches;
next	1.19;
commitid	0dx3c9ckf7dE4tx1;

1.19
date	2013.03.11.10.50.11;	author espie;	state Exp;
branches;
next	1.18;

1.18
date	2011.07.11.12.26.20;	author jasper;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.15.19.46.00;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.10.18.17.47.54;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.09.22.08.42.53;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2010.09.03.16.23.26;	author naddy;	state Exp;
branches;
next	1.13;

1.13
date	2009.06.28.22.00.34;	author sthen;	state Exp;
branches;
next	1.12;

1.12
date	2008.07.29.00.18.58;	author sthen;	state Exp;
branches;
next	1.11;

1.11
date	2008.02.28.21.47.52;	author merdely;	state Exp;
branches;
next	1.10;

1.10
date	2007.09.16.02.53.02;	author merdely;	state Exp;
branches;
next	1.9;

1.9
date	2006.01.13.23.40.23;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2006.01.09.23.38.18;	author naddy;	state Exp;
branches;
next	1.7;

1.7
date	2004.11.24.00.11.03;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2004.09.26.12.11.00;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2004.07.31.21.17.22;	author naddy;	state Exp;
branches;
next	1.4;

1.4
date	2002.10.25.22.37.52;	author naddy;	state Exp;
branches;
next	1.3;

1.3
date	2001.11.10.16.56.32;	author shell;	state Exp;
branches;
next	1.2;

1.2
date	2001.09.28.06.02.13;	author pvalchev;	state Exp;
branches;
next	1.1;

1.1
date	2001.06.28.19.59.03;	author shell;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2001.06.28.19.59.03;	author shell;	state Exp;
branches;
next	;


desc
@@


1.26
log
@broken after the switch to gcc4
broken after the switch to clang

quoth the Raven "Mevermore."
@
text
@# $OpenBSD: Makefile,v 1.25 2017/07/26 22:45:18 sthen Exp $

COMMENT=	free and complete CORBA-compliant implementation

V=		2.3.13
DISTNAME=	mico-${V}
CATEGORIES=	devel
REVISION=	2

# The build framework accommodates only a single shared lib extension.
SHARED_LIBS=	mico${V}	${LIB_VERSION} \
		micoaux${V}	${LIB_VERSION} \
		micocoss${V}	${LIB_VERSION} \
		micoir${V}	${LIB_VERSION} \
		micox${V}	${LIB_VERSION}
LIB_VERSION=	0.0

HOMEPAGE=	http://www.mico.org/
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=mico/}

# LGPL/GPL
PERMIT_PACKAGE_CDROM=	Yes

WANTLIB=		c m ncurses readline ${COMPILER_LIBCXX}
WANTLIB+=		crypto ssl ICE SM X11 Xt pthread

USE_GMAKE=		Yes
CONFIGURE_STYLE=	gnu
CONFIGURE_ENV=		LIB_VERSION=${LIB_VERSION}
CONFIGURE_ARGS+=	--disable-optimize
CONFIGURE_ARGS+=	--with-ssl

SUBST_VARS+=		V
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/admin

FAKE_FLAGS=		INSTDIR=${WRKINST}${PREFIX} \
			SHARED_INSTDIR=${DESTDIR}${PREFIX}/share

WRKDIST=		${WRKDIR}/mico

# in case we can't resolve ourselves, don't use the network to make a DNS lookup
MAKE_ENV=		MICORC=${WRKSRC}/openbsd-ports.rc

pre-build:
	echo '-ORBIIOPAddr inet:127.0.0.1:0 -ORBNoResolve' \
		>${WRKSRC}/openbsd-ports.rc
	cd ${WRKSRC}/idl && ${GMAKE} generate

pre-test:
	cd ${WRKSRC}/test && ${GMAKE} prg

.include <bsd.port.mk>
@


1.25
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2017/07/16 19:18:50 espie Exp $
@


1.24
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2017/04/10 11:45:26 sthen Exp $
d8 1
a8 1
REVISION=	1
@


1.23
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2016/06/08 21:20:26 ajacoutot Exp $
d24 1
a24 1
WANTLIB=		c m ncurses readline ${LIBCXX}
@


1.22
log
@Prevent devel/mico from going online during build (DNS lookup its hostname if
not in /etc/hosts); aka unbreak on bulks where _pbuild is not allowed network
access.

solution from Karel Gardas
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2015/03/16 18:07:43 naddy Exp $
d24 1
a24 1
WANTLIB=		c m ncurses readline stdc++
@


1.21
log
@fold lib-only PFRAG.shared into PLIST, regen PLIST, and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2015/02/16 22:57:08 naddy Exp $
d8 1
a8 1
REVISION=	0
d41 3
d45 2
@


1.20
log
@Drop USE_GROFF from ports where the formatting differences are acceptable
or mandoc provides the more useful output.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2013/03/11 10:50:11 espie Exp $
d8 1
@


1.19
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/07/11 12:26:20 jasper Exp $
a26 1
USE_GROFF =		Yes
@


1.18
log
@- let's try to build these on sparc/arm now.

from brad
ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/15 19:46:00 espie Exp $
a21 3
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes
d44 1
a44 1
pre-regress:
@


1.17
log
@move depends to new style
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.16 2010/10/18 17:47:54 espie Exp $

NOT_FOR_ARCHS=	arm
@


1.16
log
@USE_GROFF=Yes
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/09/22 08:42:53 landry Exp $
d32 1
a32 1
USE_GROFF =	Yes
@


1.15
log
@Unbreak mico on gcc4 archs by updating it to 2.3.13.

- remove commented out FLAVORS, and merge ssl FLAVOR into main package
- build regress tests (not everything is working, but at least they're here)
- add native-connect:permit to systrace.filter, idl absolutely wants to
  connect to the nearest dns server during build. Gross.
- remove shitload of now unneeded patches
- some tweaks from ajacoutot@@/jasper@@

Build-tested on :
- gcc3 archs: arm (fails) by sthen@@, alpha by naddy@@, mips64 by jasper@@
- gcc4 archs: sparc64/amd64/macppc by my$self
ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/09/03 16:23:26 naddy Exp $
d32 1
@


1.14
log
@acknowledge that this is broken and not really fixable; ok ajacoutot@@ sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2009/06/28 22:00:34 sthen Exp $
d3 1
a3 1
NOT_FOR_ARCHS=	${GCC4_ARCHS}
d7 2
a8 2
DISTNAME=	mico-2.3.6
PKGNAME=	$(DISTNAME)p4
d12 6
a17 6
SHARED_LIBS=	mico2.3.6	${LIB_VERSION} \
		micoaux2.3.6	${LIB_VERSION} \
		micocoss2.3.6	${LIB_VERSION} \
		micoir2.3.6	${LIB_VERSION} \
		micox2.3.6	${LIB_VERSION}
LIB_VERSION=	3.0
d20 1
a20 1
MASTER_SITES=	${HOMEPAGE}
d22 1
d27 1
d29 1
d35 1
d37 1
d40 2
a41 3
FAKE_FLAGS=		prefix="${WRKINST}${PREFIX}"
WRKDIST=        	${WRKDIR}/mico
NO_REGRESS=		Yes
d43 1
a43 27
FLAVORS=		ssl	# qt gtk tcl
FLAVOR?=

.if ${FLAVOR:L:Mssl}
CONFIGURE_ARGS+=	--with-ssl
WANTLIB+=		crypto ssl
.endif

LIB_DEPENDS+=		elf::devel/libelf

# XXX no Qt parts built
#.if ${FLAVOR:L:Mqt}
#LIB_DEPENDS+=		qt.2::x11/qt2
#CONFIGURE_ARGS+=	--with-qt
#.endif

# XXX no GTK parts built
#.if ${FLAVOR:L:Mgtk}
#LIB_DEPENDS+=		gtk.1.2::x11/gtk+
#CONFIGURE_ARGS+=	--with-gtk
#.endif

# XXX wrong dependency
#.if ${FLAVOR:L:Mtcl}
#LIB_DEPENDS+=		tcl.8::lang/tcl
#CONFIGURE_ARGS+=	--with-tcl
#.endif
d47 3
@


1.13
log
@autoconf pulls in libelf if found; add as LIB_DEPENDS, bump PKGNAME.
found in naddy's lib-depends-check run.
@
text
@d1 3
a3 1
# $OpenBSD: Makefile,v 1.12 2008/07/29 00:18:58 sthen Exp $
@


1.12
log
@SHARED_LIBS and PKGNAME bumps for libm.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2008/02/28 21:47:52 merdely Exp $
d6 1
a6 1
PKGNAME=	$(DISTNAME)p3
d44 2
@


1.11
log
@Disable hardcoded optimization (-O) to enable build on alpha.

ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/09/16 02:53:02 merdely Exp $
d6 1
a6 1
PKGNAME=	$(DISTNAME)p2
d15 1
a15 1
LIB_VERSION=	2.0
@


1.10
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2006/01/13 23:40:23 espie Exp $
d6 1
a6 1
PKGNAME=	$(DISTNAME)p1
a19 2
MAINTAINER=	Andre S. Barbosa <andre@@ravel.ufrj.br>

d29 1
@


1.9
log
@bump C++ shared libs after typedef changes.
note that all SDL libs link with supc++ (potentially, and thus are affected)
-> don't take a chance, bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2006/01/09 23:38:18 naddy Exp $
d3 1
a3 1
COMMENT=	"free and complete CORBA-compliant implementation"
@


1.8
log
@- SHARED_LIBS
- disable some broken FLAVORs
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2004/11/24 00:11:03 espie Exp $
d6 1
a6 1
#PKGNAME=	# see below
d15 1
a15 1
LIB_VERSION=	1.0
a41 1
PKGNAME=		${DISTNAME}p0
@


1.7
log
@WANTLIB markers
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2004/09/26 12:11:00 espie Exp $
d6 1
d9 8
d30 1
d38 1
a38 1
FLAVORS=ssl qt gtk tcl
d42 1
d44 1
d47 17
a63 14
.if ${FLAVOR:L:Mqt}
LIB_DEPENDS+=		qt.2::x11/qt2
CONFIGURE_ARGS+=	--with-qt
.endif

.if ${FLAVOR:L:Mgtk}
LIB_DEPENDS+=		gtk.1.2::x11/gtk+
CONFIGURE_ARGS+=	--with-gtk
.endif

.if ${FLAVOR:L:Mtcl}
LIB_DEPENDS+=		tcl.8::lang/tcl
CONFIGURE_ARGS+=	--with-tcl
.endif
@


1.6
log
@make it build with gcc3.
Mostly work from Aleksander Piotrowski
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2004/07/31 21:17:22 naddy Exp $
d17 1
@


1.5
log
@fix up MODGNU_CONFIG_GUESS_DIRS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2002/10/25 22:37:52 naddy Exp $
d48 3
@


1.4
log
@No regression tests available.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2001/11/10 16:56:32 shell Exp $
d21 1
a21 1
MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC} ${WRKSRC}/admin
@


1.3
log
@Upgrade to 2.3.6, from maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2001/09/28 06:02:13 pvalchev Exp $
a6 1
NEED_VERSION=	1.482
d25 1
@


1.2
log
@CONFIGURE_STYLE=gnu w/ proper MODGNU_CONFIG_GUESS_DIRS
needed for the powerpc -> macppc name change
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2001/06/28 19:59:03 shell Exp $
d5 1
a5 1
DISTNAME=	mico-2.3.5
d7 1
a7 1
NEED_VERSION=	1.417
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d21 2
@


1.1.1.1
log
@Initial import of mico-2.3.5

Port Maintainer : Andre S. Barbosa <andre@@ravel.ufrj.br>
---
Mico is a freely available and complete CORBA-compliant implementation.
It allows applications to interoperate in a distributed and
heterogeneous environment, regardless of the locations of the
applications, operating systems and programming language.

WWW: http://www.mico.org

@
text
@@
