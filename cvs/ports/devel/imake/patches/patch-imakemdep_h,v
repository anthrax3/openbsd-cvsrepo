head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.2
	OPENBSD_6_1_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2017.02.28.21.46.51;	author naddy;	state Exp;
branches;
next	;
commitid	cJORfq6YF1l3Ccmw;


desc
@@


1.1
log
@* Switch to tradcpp(1) as the preprocessor.
This is required for clang archs, since imake chokes on the output
of "clang -E -traditional", and doesn't hurt on gcc archs.

* Use the normal autotools build infrastructure instead of rolling our own.
@
text
@$OpenBSD$
--- imakemdep.h.orig	Sat Aug 17 12:11:06 2013
+++ imakemdep.h	Thu Feb 23 15:36:01 2017
@@@@ -330,6 +330,10 @@@@ in this Software without prior written authorization f
 #     define DEFAULT_CC "gcc"
 #    endif
 #   endif
+#   if defined(__OpenBSD__)
+#    undef USE_CC_E
+#    define DEFAULT_CPP "/usr/libexec/tradcpp"
+#   endif
 
 #  endif /* !defined (CROSSCOMPILE) || defined (CROSSCOMPILE_CPP) */
 /*
@
