head	1.23;
access;
symbols
	OPENBSD_6_0:1.22.0.2
	OPENBSD_6_0_BASE:1.22
	OPENBSD_5_9:1.19.0.2
	OPENBSD_5_9_BASE:1.19
	OPENBSD_5_8:1.15.0.4
	OPENBSD_5_8_BASE:1.15
	OPENBSD_5_7:1.14.0.2
	OPENBSD_5_7_BASE:1.14
	OPENBSD_5_6:1.11.0.2
	OPENBSD_5_6_BASE:1.11
	OPENBSD_5_5:1.10.0.2
	OPENBSD_5_5_BASE:1.10
	OPENBSD_5_4:1.9.0.2
	OPENBSD_5_4_BASE:1.9
	OPENBSD_5_3:1.7.0.2
	OPENBSD_5_3_BASE:1.7
	avsm_2012-Aug-18:1.1.1.1
	avsm:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2017.03.12.15.22.48;	author krw;	state dead;
branches;
next	1.22;
commitid	e1S3rdoUn4WFjOA2;

1.22
date	2016.06.24.15.59.12;	author krw;	state Exp;
branches;
next	1.21;
commitid	uNq7PAnG26SO2XnT;

1.21
date	2016.06.23.19.23.53;	author krw;	state Exp;
branches;
next	1.20;
commitid	vwUgBiCmN1lWQqPh;

1.20
date	2016.03.29.11.27.01;	author naddy;	state Exp;
branches;
next	1.19;
commitid	YG8j0S3Qu1QSiwCV;

1.19
date	2016.01.17.17.29.08;	author sthen;	state Exp;
branches;
next	1.18;
commitid	bS2FIbTCCkF3XjOq;

1.18
date	2015.12.29.19.49.40;	author jasper;	state Exp;
branches;
next	1.17;
commitid	qnWWfNxRwuFA0B7n;

1.17
date	2015.08.31.11.41.42;	author sthen;	state Exp;
branches;
next	1.16;
commitid	DJPcDRnto52wWjHj;

1.16
date	2015.08.30.16.01.16;	author avsm;	state Exp;
branches;
next	1.15;
commitid	E3yaax3KKoTxde4P;

1.15
date	2015.04.05.13.31.13;	author sthen;	state Exp;
branches;
next	1.14;
commitid	1hQJnDR1GYYQ0MPE;

1.14
date	2014.09.02.09.24.44;	author chrisz;	state Exp;
branches;
next	1.13;
commitid	KxJKmDEHHsyD4e4B;

1.13
date	2014.08.27.08.05.17;	author chrisz;	state Exp;
branches;
next	1.12;
commitid	vYMEJuwPEG8SFCN7;

1.12
date	2014.08.22.22.49.07;	author kili;	state Exp;
branches;
next	1.11;
commitid	EuOaFLY1ck9pjbE0;

1.11
date	2014.07.10.11.06.15;	author rpe;	state Exp;
branches;
next	1.10;
commitid	zXOWyDxvWRmZFNNv;

1.10
date	2013.11.25.14.35.26;	author dcoppa;	state Exp;
branches;
next	1.9;

1.9
date	2013.05.16.09.09.50;	author sthen;	state Exp;
branches;
next	1.8;

1.8
date	2013.03.11.10.50.12;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2012.12.04.06.57.39;	author chrisz;	state Exp;
branches;
next	1.6;

1.6
date	2012.11.30.19.08.05;	author chrisz;	state Exp;
branches;
next	1.5;

1.5
date	2012.10.22.11.41.26;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2012.10.21.19.21.32;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2012.09.05.21.39.09;	author avsm;	state Exp;
branches;
next	1.2;

1.2
date	2012.09.01.14.36.57;	author ajacoutot;	state Exp;
branches;
next	1.1;

1.1
date	2012.08.19.00.27.50;	author avsm;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2012.08.19.00.27.50;	author avsm;	state Exp;
branches;
next	;


desc
@@


1.23
log
@Remove port which is used only by ocaml-lambda-term, which is used
only by utop.

ok chrisz@@ avsm@@
@
text
@# $OpenBSD: Makefile,v 1.22 2016/06/24 15:59:12 krw Exp $

COMMENT =	cooperative lightweight thread library
CATEGORIES =	devel

GH_ACCOUNT =	ocsigen
GH_PROJECT =	lwt
GH_TAGNAME =	2.5.2
REVISION =	0
# This is not the latest upstream version, but the last one that is most
# compatible due to an API change. Be careful about upgrading to lwt-2.5.0
# without checking that no in-tree ports break due to new buffer APIs.
PKGNAME =	ocaml-${DISTNAME}

HOMEPAGE =	http://ocsigen.org/lwt/

# LGPLv2.1
PERMIT_PACKAGE_CDROM =		Yes

WANTLIB += c glib-2.0 ev m pthread

MODULES =	lang/ocaml \
		devel/gettext

MYDEPENDS =	devel/ocaml-react \
		textproc/ocaml-text \
		security/ocaml-ssl \
		devel/ocaml-ppx-tools
BUILD_DEPENDS =	${MYDEPENDS} sysutils/findlib lang/ocaml-camlp4 \
		devel/ocaml-ocamlbuild
RUN_DEPENDS =	${MYDEPENDS}
LIB_DEPENDS =	devel/glib2 devel/libev

CONFIGURE_STYLE =	oasis
CONFIGURE_ARGS =	--enable-tests --enable-react --enable-glib \
			--enable-ssl --disable-docs --enable-camlp4 \
			--enable-ppx

USE_GMAKE =	Yes

.include <bsd.port.mk>
@


1.22
log
@Upgrade Ocaml to 4.3.0 and tweak ports the minimal amount to keep
them all compiling.

Tweaks include updating

ocaml-batteries 2.3.1 -> 2.5.0
ocaml-lwt 2.4.8 -> 2.5.2
ocaml-ppx-tools 0.99.2 -> 4.03.0
ocaml-camlp4 4.02+6 -> 4.03+1
utop 1.15 -> 1.19.2

and fixes to coccinelle and wyrd to let them build on bytecode archs.

Other necessary tweaks from the various homes of the projects.

Everything still builds on amd64 (native and bytecode) and sparc64 (bytecode).

ok anil@@ sthen@@ so final 4.3.0 tweaks can be done in-tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2016/06/23 19:23:53 krw Exp $
@


1.21
log
@Stop building Ocaml's internal ocamlbuild and use the ocaml-ocamlbuild port
where needed.

The next step towards Ocaml 4.3.0.

Bulk build by sthen@@ identified several laggards which are included here.

ok anil@@ sthen@@ so final 4.3.0 polishing can be done in-tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2016/03/29 11:27:01 naddy Exp $
d8 2
a9 2
GH_TAGNAME =	2.4.8
REVISION =	2
@


1.20
log
@g/c PFRAG.shared from OCaml ports; ok chrisz@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2016/01/17 17:29:08 sthen Exp $
d9 1
a9 1
REVISION =	1
d29 2
a30 1
BUILD_DEPENDS =	${MYDEPENDS} sysutils/findlib lang/ocaml-camlp4
@


1.19
log
@sync WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2015/12/29 19:49:40 jasper Exp $
d9 1
a9 1
REVISION =	0
@


1.18
log
@DISTNAME is set by bsd.port.mk for these ports now
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2015/08/31 11:41:42 sthen Exp $
d9 1
a16 1

d20 2
a31 1
WANTLIB =	glib-2.0 ev pthread
@


1.17
log
@copy API break warning for 2.5.x from commit message to Makefile where
it will be more easily seen
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/08/30 16:01:16 avsm Exp $
a11 1
DISTNAME =	${GH_PROJECT}-${GH_TAGNAME}
@


1.16
log
@update to ocaml-lwt-2.4.8

This is not the latest upstream version, but the last one that is most
compatible due to an API change. Be careful about upgrading to lwt-2.5.0
without checking that no in-tree ports break due to new buffer APIs.

ok jca@@, tested by krw@@ daniel@@ jsg@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2015/04/05 13:31:13 sthen Exp $
d9 3
@


1.15
log
@drop GH_COMMIT lines which are hidden behind GH_TAGNAME,
discussed with a few in the room.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2014/09/02 09:24:44 chrisz Exp $
d8 1
a8 1
GH_TAGNAME =	2.4.5
d23 2
a24 1
		security/ocaml-ssl
d32 2
a33 1
			--enable-ssl --disable-docs
@


1.14
log
@Upgrade OCaml to 4.02. Since camlp4 is now a seperate port,
add / change BUILD_DEPENDS for all ports using camlp4.
Findlib is changed because it won't use camlp4 and doesn't install
the Bytes module anymore, which is now included in OCaml 4.02.

ok avsm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2014/08/27 08:05:17 chrisz Exp $
a8 1
GH_COMMIT =	75b1dc1aefae75dc4ac6455f5a2688b3a52adabd
@


1.13
log
@Upgrade ocaml-react. Since it has a major api charge, all of its dependers
need an upgrade, too.

* react uses opam without findlib as build system. Therefore call
  ocamlbuild directly. And roll a custom do-install.
* lwt will need camlp4.
* zed has moved to github.
* utop, too.
* lambda-term, too. Also will it need camlp4.


OK jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2014/08/22 22:49:07 kili Exp $
d25 1
a25 1
BUILD_DEPENDS =	${MYDEPENDS} sysutils/findlib lang/ocaml,-camlp4
@


1.12
log
@More bumps due to lang/ocaml pkgname change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2014/07/10 11:06:15 rpe Exp $
d8 2
a9 2
GH_TAGNAME =	2.4.4
GH_COMMIT =	c6280535eb754b70f75a26fbfd406b7d492f8608
a11 1
REVISION =	0
d25 1
a25 1
BUILD_DEPENDS =	${MYDEPENDS} sysutils/findlib
@


1.11
log
@Move ports that used filename{url}sufx to fetch DISTFILES from
Github to GH_ACCOUNT, GH_PROJECT, GH_TAGNAME, GH_COMMIT.

OK sthen@@ jasper@@ aja@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2013/11/25 14:35:26 dcoppa Exp $
d12 1
@


1.10
log
@ocaml-related updates:

ocaml-batteries 2.0.0 -> 2.1.0

ocaml-lwt 2.4.2 -> 2.4.4

ocaml-net 3.6 -> 3.7.3

All needed for an upcoming update to ocaml-4.01.0
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2013/05/16 09:09:50 sthen Exp $
d6 5
a10 2
GH_VER =	2.4.4
DISTNAME =	lwt-${GH_VER}
a11 2
MASTER_SITES =	https://github.com/ocsigen/lwt/archive/
DISTFILES =	${DISTNAME}${EXTRACT_SUFX}{${GH_VER}${EXTRACT_SUFX}}
@


1.9
log
@use gettext/libiconv MODULES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2013/03/11 10:50:12 espie Exp $
d6 2
a7 2
DISTNAME =	lwt-2.4.2
REVISION =	0
d9 2
a10 1
MASTER_SITES =	http://ocsigen.org/download/
d30 3
a32 1
CONFIGURE_ARGS =	--enable-tests --enable-react --enable-glib --enable-ssl
a33 6


post-install:
	${INSTALL_DATA} \
		${WRKDIST}/{CHANGES,COPYING,README} \
		${PREFIX}/share/doc/ocaml-lwt/
@


1.8
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2012/12/04 06:57:39 chrisz Exp $
d7 1
d17 2
a18 1
MODULES =	lang/ocaml
d25 2
a26 2
LIB_DEPENDS =	devel/glib2 devel/libev converters/libiconv
WANTLIB =	glib-2.0 ev iconv intl pthread
@


1.7
log
@update to version 2.4.2
ok by @@avsm, @@jasper
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2012/11/30 19:08:05 chrisz Exp $
a13 1
PERMIT_PACKAGE_FTP =		Yes
a14 2
PERMIT_DISTFILES_FTP =		Yes
PERMIT_DISTFILES_CDROM =	Yes
@


1.6
log
@Update lang/ocaml to 4.00.1.
Make all ocaml ports depend on the version of ocaml they were built with.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2012/10/22 11:41:26 jasper Exp $
d6 1
a6 1
DISTNAME =	lwt-2.4.1
a7 1
REVISION =	1
d19 1
a19 2
MODULES =	devel/gettext \
		lang/ocaml
d24 4
a27 7
BUILD_DEPENDS =	${MYDEPENDS} \
		sysutils/findlib
RUN_DEPENDS =	${MYDEPENDS} \
		lang/ocaml
LIB_DEPENDS =	devel/glib2 \
		devel/libev
WANTLIB =	glib-2.0 ev pthread
d30 1
a30 4
CONFIGURE_ARGS =--enable-tests \
		--enable-react \
		--enable-glib \
		--enable-ssl
@


1.5
log
@missing bump in previous

spotted by nigel@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2012/10/21 19:21:32 jasper Exp $
d8 1
a8 1
REVISION =	0
@


1.4
log
@- fixup MODULES/WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/09/05 21:39:09 avsm Exp $
d8 1
@


1.3
log
@update to lwt-2.4.1
- patches now upstream, so remove local versions
- add missing GMAKE dependency (I am fixing this requirement in OASIS directly too)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2012/09/01 14:36:57 ajacoutot Exp $
d19 2
a20 1
MODULES =	lang/ocaml
d25 7
a31 4
BUILD_DEPENDS =	${MYDEPENDS} sysutils/findlib
RUN_DEPENDS =	${MYDEPENDS} lang/ocaml
LIB_DEPENDS =	devel/glib2 devel/libev converters/libiconv
WANTLIB =	glib-2.0 ev iconv intl pthread
d34 4
a37 1
CONFIGURE_ARGS =	--enable-tests --enable-react --enable-glib --enable-ssl
@


1.2
log
@register-plist did not catch the devel/glib2 -main -> empty change.
espie asked me in such a nice way to fix this that I'm bumping all ports
that have a direct dependency on glib2.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2012/08/19 00:27:50 avsm Exp $
d6 1
a6 1
DISTNAME =	lwt-2.4.0
a8 1
REVISION=	0
d31 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2012/07/18 08:04:11 sthen Exp $
d9 1
@


1.1.1.1
log
@initial import of lwt-2.4.0; espie@@ ok

Does not include the enhanced top-level, which will be added in a later update.
From Christopher Zimmermann <madroach@@gmerlin.de>

--
Lwt provides very light-weight cooperative threads for OCaml;
``launching'' a thread is a very fast operation, it does not require
a new stack, a new process, or anything else. Moreover context
switches are very fast. In fact, it is so easy that a thread can
be launched for every system call. And composing cooperative threads
will allow highly asynchronous programs.

@
text
@@
