head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2009.05.18.19.23.58;	author bernd;	state dead;
branches;
next	1.1;

1.1
date	2009.04.05.10.05.35;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Update to git-1.6.3.1.

Also:
- install gitweb and related stuff (from Simon Kuhnle)
- fix paths in some manpages (noticed by mk@@)
- 64bit for date.c fix went upstream

Thanks guys!
@
text
@$OpenBSD: patch-date_c,v 1.1 2009/04/05 10:05:35 bernd Exp $

Fix problem on 64-bit archs. (at least on sparc64)

--- date.c.orig	Sun Apr  5 03:11:19 2009
+++ date.c	Sun Apr  5 03:13:04 2009
@@@@ -871,13 +871,15 @@@@ unsigned long approxidate(const char *date)
 	int number = 0;
 	struct tm tm, now;
 	struct timeval tv;
+	time_t time_sec;
 	char buffer[50];
 
 	if (parse_date(date, buffer, sizeof(buffer)) > 0)
 		return strtoul(buffer, NULL, 10);
 
 	gettimeofday(&tv, NULL);
-	localtime_r(&tv.tv_sec, &tm);
+	time_sec = tv.tv_sec;
+	localtime_r(&time_sec, &tm);
 	now = tm;
 	for (;;) {
 		unsigned char c = *date;
@


1.1
log
@t-1.6.2.2.

Also:
- Update HOMEPAGE. (reminded by Toni Mueller)
- Fix 64-bit problem. (found on sparc64)

Tested by sturm@@. Thanks!
@
text
@d1 1
a1 1
$OpenBSD$
@

