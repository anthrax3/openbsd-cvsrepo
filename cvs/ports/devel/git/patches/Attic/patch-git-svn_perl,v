head	1.2;
access;
symbols
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2009.04.05.10.05.35;	author bernd;	state dead;
branches;
next	1.1;

1.1
date	2009.01.29.23.16.35;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.2
log
@t-1.6.2.2.

Also:
- Update HOMEPAGE. (reminded by Toni Mueller)
- Fix 64-bit problem. (found on sparc64)

Tested by sturm@@. Thanks!
@
text
@$OpenBSD: patch-git-svn_perl,v 1.1 2009/01/29 23:16:35 bernd Exp $

In svn 1.5.5 the output of "svn info" for added directories was changed
and now shows the repository UUID. This patch implements the same
behavior for "git svn info" and makes t9119-git-svn-info.17 pass if
svn 1.5.5 is used.

Patch from Marcel Koeppen, found on the git mailing list.

--- git-svn.perl.orig	Thu Jan 29 10:43:46 2009
+++ git-svn.perl	Thu Jan 29 20:13:00 2009
@@@@ -911,7 +911,8 @@@@ sub cmd_info {
 	if ($@@) {
 		$result .= "Repository Root: (offline)\n";
 	}
-	$result .= "Repository UUID: $uuid\n" unless $diff_status eq "A";
+	$result .= "Repository UUID: $uuid\n" unless $diff_status eq "A" &&
+		($SVN::Core::VERSION le '1.5.4' || $file_type ne "dir");
 	$result .= "Revision: " . ($diff_status eq "A" ? 0 : $rev) . "\n";
 
 	$result .= "Node Kind: " .
@


1.1
log
@Update to git 1.6.1.2 and add a subversion 1.5.5 fix for git-svn.
@
text
@d1 1
a1 1
$OpenBSD$
@

