head	1.11;
access;
symbols
	OPENBSD_5_1_BASE:1.10
	OPENBSD_5_1:1.10.0.4
	OPENBSD_5_0:1.10.0.2
	OPENBSD_5_0_BASE:1.10
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.8.0.2
	OPENBSD_4_8_BASE:1.8
	OPENBSD_4_7:1.6.0.2
	OPENBSD_4_7_BASE:1.6
	OPENBSD_4_6:1.4.0.2
	OPENBSD_4_6_BASE:1.4
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.11
date	2012.02.21.22.19.31;	author sthen;	state dead;
branches;
next	1.10;

1.10
date	2011.04.29.11.09.12;	author stsp;	state Exp;
branches;
next	1.9;

1.9
date	2010.10.07.09.42.23;	author bernd;	state Exp;
branches;
next	1.8;

1.8
date	2010.06.20.11.49.41;	author bernd;	state Exp;
branches;
next	1.7;

1.7
date	2010.04.02.16.08.09;	author bernd;	state Exp;
branches;
next	1.6;

1.6
date	2009.11.17.16.29.42;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2009.08.17.14.47.54;	author bernd;	state Exp;
branches;
next	1.4;

1.4
date	2009.05.18.19.23.58;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2009.04.05.10.05.35;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2009.03.24.05.11.50;	author jakemsr;	state Exp;
branches;
next	1.1;

1.1
date	2009.01.24.14.31.29;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.11
log
@Remove patches casting NULL when used as a sentinel to a pointer.
These are no longer needed since unistd.h r1.63 et al.  ok ajacoutot@@
@
text
@$OpenBSD: patch-imap-send_c,v 1.10 2011/04/29 11:09:12 stsp Exp $
--- imap-send.c.orig	Sun Apr 24 19:48:31 2011
+++ imap-send.c	Thu Apr 28 18:00:41 2011
@@@@ -1068,7 +1068,7 @@@@ static struct store *imap_open_store(struct imap_serve
 	/* open connection to IMAP server */
 
 	if (srvc->tunnel) {
-		const char *argv[] = { srvc->tunnel, NULL };
+		const char *argv[] = { srvc->tunnel, (void *)NULL };
 		struct child_process tunnel = {NULL};
 
 		imap_info("Starting tunnel '%s'... ", srvc->tunnel);
@


1.10
log
@Update to 1.7.5. ok bernd
@
text
@d1 1
a1 1
$OpenBSD: patch-imap-send_c,v 1.9 2010/10/07 09:42:23 bernd Exp $
@


1.9
log
@Update to git-1.7.3.1.

Add a README.OpenBSD file with some notes about the send-email
command. (via matthieu@@)
@
text
@d1 3
a3 3
$OpenBSD: patch-imap-send_c,v 1.8 2010/06/20 11:49:41 bernd Exp $
--- imap-send.c.orig	Fri Aug 20 01:44:47 2010
+++ imap-send.c	Thu Sep  2 11:12:51 2010
d10 1
a10 1
 		struct child_process tunnel = {0};
@


1.8
log
@Update to git-1.7.1.
@
text
@d1 4
a4 4
$OpenBSD: patch-imap-send_c,v 1.7 2010/04/02 16:08:09 bernd Exp $
--- imap-send.c.orig	Sat Apr 24 04:38:35 2010
+++ imap-send.c	Mon Apr 26 10:22:14 2010
@@@@ -1064,7 +1064,7 @@@@ static struct store *imap_open_store(struct imap_serve
@


1.7
log
@Update to git-1.7.0.4.

Based on a diff by Daniel Dickman. Thanks!
@
text
@d1 4
a4 4
$OpenBSD$
--- imap-send.c.orig	Sun Mar  7 17:13:40 2010
+++ imap-send.c	Sun Mar  7 19:49:44 2010
@@@@ -964,7 +964,7 @@@@ static struct store *imap_open_store(struct imap_serve
@


1.6
log
@Update to git-1.6.5.3.
@
text
@d1 5
a5 9
$OpenBSD: patch-imap-send_c,v 1.5 2009/08/17 14:47:54 bernd Exp $

Fix "warning: missing sentinel in function call" on 64bit archs.

--- imap-send.c.orig	Mon Nov 16 23:14:46 2009
+++ imap-send.c	Tue Nov 17 14:30:56 2009
@@@@ -502,7 +502,7 @@@@ static void arc4_init(void)
 	int i, fd;
 	unsigned char j, si, dat[128];
d7 4
a10 13
-	if ((fd = open("/dev/urandom", O_RDONLY)) < 0 && (fd = open("/dev/random", O_RDONLY)) < 0) {
+	if ((fd = open("/dev/arandom", O_RDONLY)) < 0 && (fd = open("/dev/random", O_RDONLY)) < 0) {
 		fprintf(stderr, "Fatal: no random number source available.\n");
 		exit(3);
 	}
@@@@ -1013,7 +1013,7 @@@@ static struct store *imap_open_store(struct imap_serve
 				_exit(127);
 			close(a[0]);
 			close(a[1]);
-			execl("/bin/sh", "sh", "-c", srvc->tunnel, NULL);
+			execl("/bin/sh", "sh", "-c", srvc->tunnel, (void *)NULL);
 			_exit(127);
 		}
d12 1
@


1.5
log
@Update to git-1.6.4.

Tested by Simon Kuhnle, sturm@@, msf@@ and Daniel Dickman.
Thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-imap-send_c,v 1.4 2009/05/18 19:23:58 bernd Exp $
d5 3
a7 3
--- imap-send.c.orig	Wed Jul 29 10:18:18 2009
+++ imap-send.c	Sat Aug  1 10:41:01 2009
@@@@ -498,7 +498,7 @@@@ static void arc4_init(void)
d16 1
a16 1
@@@@ -1009,7 +1009,7 @@@@ static struct store *imap_open_store(struct imap_serve
@


1.4
log
@Update to git-1.6.3.1.

Also:
- install gitweb and related stuff (from Simon Kuhnle)
- fix paths in some manpages (noticed by mk@@)
- 64bit for date.c fix went upstream

Thanks guys!
@
text
@d1 1
a1 1
$OpenBSD: patch-imap-send_c,v 1.3 2009/04/05 10:05:35 bernd Exp $
d5 2
a6 2
--- imap-send.c.orig	Thu May  7 06:29:04 2009
+++ imap-send.c	Fri May  8 09:52:09 2009
d16 1
a16 1
@@@@ -1011,7 +1011,7 @@@@ static struct store *imap_open_store(struct imap_serve
@


1.3
log
@t-1.6.2.2.

Also:
- Update HOMEPAGE. (reminded by Toni Mueller)
- Fix 64-bit problem. (found on sparc64)

Tested by sturm@@. Thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-imap-send_c,v 1.2 2009/03/24 05:11:50 jakemsr Exp $
d5 3
a7 3
--- imap-send.c.orig	Thu Apr  2 23:26:45 2009
+++ imap-send.c	Fri Apr  3 13:14:50 2009
@@@@ -497,7 +497,7 @@@@ static void arc4_init(void)
d16 1
a16 1
@@@@ -1010,7 +1010,7 @@@@ static struct store *imap_open_store(struct imap_serve
@


1.2
log
@use /dev/arandom instead of /dev/urandom

ok bernd@@
@
text
@d1 1
a1 1
$OpenBSD: patch-imap-send_c,v 1.1 2009/01/24 14:31:29 bernd Exp $
d5 3
a7 3
--- imap-send.c.orig	Sat Feb  7 11:46:30 2009
+++ imap-send.c	Mon Mar 23 00:32:21 2009
@@@@ -496,7 +496,7 @@@@ static void arc4_init(void)
d16 1
a16 1
@@@@ -1009,7 +1009,7 @@@@ static struct store *imap_open_store(struct imap_serve
@


1.1
log
@Update to git-1.6.1.

Also fixes command injection vulnerabilities in gitweb.
(CVE-2008-5516, CVE-2008-5517) Hint from jasper@@, thanks!

help & tests sturm@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 11
a15 2
--- imap-send.c.orig	Fri Jan 23 09:42:51 2009
+++ imap-send.c	Fri Jan 23 09:43:04 2009
@

