head	1.7;
access;
symbols
	OPENBSD_4_7:1.5.0.2
	OPENBSD_4_7_BASE:1.5
	OPENBSD_4_6:1.3.0.2
	OPENBSD_4_6_BASE:1.3
	OPENBSD_4_5:1.1.0.2
	OPENBSD_4_5_BASE:1.1;
locks; strict;
comment	@# @;


1.7
date	2010.06.20.11.49.41;	author bernd;	state dead;
branches;
next	1.6;

1.6
date	2010.04.02.16.08.09;	author bernd;	state Exp;
branches;
next	1.5;

1.5
date	2009.11.17.16.29.42;	author bernd;	state Exp;
branches;
next	1.4;

1.4
date	2009.08.17.14.47.54;	author bernd;	state Exp;
branches;
next	1.3;

1.3
date	2009.05.18.19.23.58;	author bernd;	state Exp;
branches;
next	1.2;

1.2
date	2009.04.05.10.05.35;	author bernd;	state Exp;
branches;
next	1.1;

1.1
date	2009.01.24.14.31.29;	author bernd;	state Exp;
branches;
next	;


desc
@@


1.7
log
@Update to git-1.7.1.
@
text
@$OpenBSD: patch-builtin-help_c,v 1.6 2010/04/02 16:08:09 bernd Exp $

Fix "warning: missing sentinel in function call" on 64bit archs.

--- builtin-help.c.orig	Fri Feb 12 19:44:43 2010
+++ builtin-help.c	Mon Mar  1 19:57:35 2010
@@@@ -120,7 +120,7 @@@@ static void exec_woman_emacs(const char *path, const c
 		if (!path)
 			path = "emacsclient";
 		strbuf_addf(&man_page, "(woman \"%s\")", page);
-		execlp(path, "emacsclient", "-e", man_page.buf, NULL);
+		execlp(path, "emacsclient", "-e", man_page.buf, (void *)NULL);
 		warning("failed to exec '%s': %s", path, strerror(errno));
 	}
 }
@@@@ -148,7 +148,7 @@@@ static void exec_man_konqueror(const char *path, const
 		} else
 			path = "kfmclient";
 		strbuf_addf(&man_page, "man:%s(1)", page);
-		execlp(path, filename, "newTab", man_page.buf, NULL);
+		execlp(path, filename, "newTab", man_page.buf, (void *)NULL);
 		warning("failed to exec '%s': %s", path, strerror(errno));
 	}
 }
@@@@ -157,7 +157,7 @@@@ static void exec_man_man(const char *path, const char 
 {
 	if (!path)
 		path = "man";
-	execlp(path, "man", page, NULL);
+	execlp(path, "man", page, (void *)NULL);
 	warning("failed to exec '%s': %s", path, strerror(errno));
 }
 
@@@@ -165,7 +165,7 @@@@ static void exec_man_cmd(const char *cmd, const char *
 {
 	struct strbuf shell_cmd = STRBUF_INIT;
 	strbuf_addf(&shell_cmd, "%s %s", cmd, page);
-	execl("/bin/sh", "sh", "-c", shell_cmd.buf, NULL);
+	execl("/bin/sh", "sh", "-c", shell_cmd.buf, (void *)NULL);
 	warning("failed to exec '%s': %s", cmd, strerror(errno));
 }
 
@@@@ -372,7 +372,7 @@@@ static void show_info_page(const char *git_cmd)
 {
 	const char *page = cmd_to_page(git_cmd);
 	setenv("INFOPATH", system_path(GIT_INFO_PATH), 1);
-	execlp("info", "info", "gitman", page, NULL);
+	execlp("info", "info", "gitman", page, (void *)NULL);
 	die("no info viewer handled the request");
 }
 
@


1.6
log
@Update to git-1.7.0.4.

Based on a diff by Daniel Dickman. Thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-builtin-help_c,v 1.5 2009/11/17 16:29:42 bernd Exp $
@


1.5
log
@Update to git-1.6.5.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-builtin-help_c,v 1.4 2009/08/17 14:47:54 bernd Exp $
d5 3
a7 3
--- builtin-help.c.orig	Mon Nov 16 23:14:46 2009
+++ builtin-help.c	Tue Nov 17 14:31:50 2009
@@@@ -119,7 +119,7 @@@@ static void exec_woman_emacs(const char *path, const c
d16 1
a16 1
@@@@ -147,7 +147,7 @@@@ static void exec_man_konqueror(const char *path, const
d25 1
a25 1
@@@@ -156,7 +156,7 @@@@ static void exec_man_man(const char *path, const char 
d34 1
a34 1
@@@@ -164,7 +164,7 @@@@ static void exec_man_cmd(const char *cmd, const char *
d43 1
a43 1
@@@@ -371,7 +371,7 @@@@ static void show_info_page(const char *git_cmd)
@


1.4
log
@Update to git-1.6.4.

Tested by Simon Kuhnle, sturm@@, msf@@ and Daniel Dickman.
Thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-builtin-help_c,v 1.3 2009/05/18 19:23:58 bernd Exp $
d5 2
a6 2
--- builtin-help.c.orig	Wed Jul 29 10:18:18 2009
+++ builtin-help.c	Sat Aug  1 10:41:01 2009
d49 1
a51 1
 static void get_html_page_path(struct strbuf *page_path, const char *page)
@


1.3
log
@Update to git-1.6.3.1.

Also:
- install gitweb and related stuff (from Simon Kuhnle)
- fix paths in some manpages (noticed by mk@@)
- 64bit for date.c fix went upstream

Thanks guys!
@
text
@d1 1
a1 1
$OpenBSD: patch-builtin-help_c,v 1.2 2009/04/05 10:05:35 bernd Exp $
d5 3
a7 3
--- builtin-help.c.orig	Thu May  7 06:29:04 2009
+++ builtin-help.c	Fri May  8 09:52:09 2009
@@@@ -123,7 +123,7 @@@@ static void exec_woman_emacs(const char *path, const c
d16 1
a16 1
@@@@ -151,7 +151,7 @@@@ static void exec_man_konqueror(const char *path, const
d25 1
a25 1
@@@@ -160,7 +160,7 @@@@ static void exec_man_man(const char *path, const char 
d34 1
a34 1
@@@@ -168,7 +168,7 @@@@ static void exec_man_cmd(const char *cmd, const char *
d43 1
a43 1
@@@@ -375,7 +375,7 @@@@ static void show_info_page(const char *git_cmd)
@


1.2
log
@t-1.6.2.2.

Also:
- Update HOMEPAGE. (reminded by Toni Mueller)
- Fix 64-bit problem. (found on sparc64)

Tested by sturm@@. Thanks!
@
text
@d1 1
a1 1
$OpenBSD: patch-builtin-help_c,v 1.1 2009/01/24 14:31:29 bernd Exp $
d5 3
a7 3
--- builtin-help.c.orig	Wed Mar  4 09:18:50 2009
+++ builtin-help.c	Sat Mar  7 14:15:22 2009
@@@@ -123,7 +123,7 @@@@ static void exec_woman_emacs(const char* path, const c
d16 1
a16 1
@@@@ -151,7 +151,7 @@@@ static void exec_man_konqueror(const char* path, const
d25 1
a25 1
@@@@ -160,7 +160,7 @@@@ static void exec_man_man(const char* path, const char 
d43 1
a43 1
@@@@ -376,7 +376,7 @@@@ static void show_info_page(const char *git_cmd)
@


1.1
log
@Update to git-1.6.1.

Also fixes command injection vulnerabilities in gitweb.
(CVE-2008-5516, CVE-2008-5517) Hint from jasper@@, thanks!

help & tests sturm@@
@
text
@d1 1
a1 1
$OpenBSD$
d5 2
a6 2
--- builtin-help.c.orig	Fri Jan 23 09:33:07 2009
+++ builtin-help.c	Fri Jan 23 09:34:57 2009
d46 1
a46 1
 	setenv("INFOPATH", GIT_INFO_PATH, 1);
@

