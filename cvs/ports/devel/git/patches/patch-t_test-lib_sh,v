head	1.18;
access;
symbols
	OPENBSD_6_1:1.18.0.2
	OPENBSD_6_1_BASE:1.18
	OPENBSD_6_0:1.13.0.2
	OPENBSD_6_0_BASE:1.13
	OPENBSD_5_9:1.11.0.2
	OPENBSD_5_9_BASE:1.11
	OPENBSD_5_8:1.9.0.4
	OPENBSD_5_8_BASE:1.9
	OPENBSD_5_7:1.7.0.2
	OPENBSD_5_7_BASE:1.7
	OPENBSD_5_6:1.2.0.2
	OPENBSD_5_6_BASE:1.2
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.18
date	2017.02.25.20.35.31;	author benoit;	state Exp;
branches;
next	1.17;
commitid	tRxVOTWFkSBEB7DA;

1.17
date	2016.12.04.15.29.46;	author dcoppa;	state Exp;
branches;
next	1.16;
commitid	VWUztPhJVflKq3yV;

1.16
date	2016.11.04.09.43.30;	author dcoppa;	state Exp;
branches;
next	1.15;
commitid	Og3drjjJbjowbzEu;

1.15
date	2016.10.11.10.59.27;	author dcoppa;	state Exp;
branches;
next	1.14;
commitid	BMKkEtNWz2Nutdyy;

1.14
date	2016.08.17.06.57.50;	author benoit;	state Exp;
branches;
next	1.13;
commitid	X2Z0GxAhYve9vWp4;

1.13
date	2016.06.09.19.07.54;	author benoit;	state Exp;
branches;
next	1.12;
commitid	hKblNAILBeSRsSsN;

1.12
date	2016.03.07.07.33.37;	author benoit;	state Exp;
branches;
next	1.11;
commitid	AZsNM1xZvqxPUthU;

1.11
date	2015.08.30.08.53.29;	author benoit;	state Exp;
branches
	1.11.2.1;
next	1.10;
commitid	hpq1SAKPD3uvsYkR;

1.10
date	2015.08.25.21.25.03;	author benoit;	state Exp;
branches;
next	1.9;
commitid	mwNXxLMZ8jnZFqVB;

1.9
date	2015.05.07.20.45.35;	author dcoppa;	state Exp;
branches
	1.9.4.1;
next	1.8;
commitid	A5gzH5IS3B3gdY9I;

1.8
date	2015.04.22.05.56.23;	author benoit;	state Exp;
branches;
next	1.7;
commitid	VDmbDcMs4gO8YOcE;

1.7
date	2015.02.07.18.19.41;	author dcoppa;	state Exp;
branches;
next	1.6;
commitid	YnnpUlQcPePm4aq6;

1.6
date	2015.01.13.09.40.56;	author benoit;	state Exp;
branches;
next	1.5;
commitid	xOfuIj71Uv7uZ9iq;

1.5
date	2014.12.01.11.16.11;	author dcoppa;	state Exp;
branches;
next	1.4;
commitid	XSruhhSR9JTMxjG2;

1.4
date	2014.09.26.13.55.44;	author dcoppa;	state Exp;
branches;
next	1.3;
commitid	1MbMAqmne7VWB18R;

1.3
date	2014.08.19.19.44.39;	author pascal;	state Exp;
branches;
next	1.2;
commitid	D5iEqPxchwvuBEms;

1.2
date	2014.03.10.20.56.53;	author pascal;	state Exp;
branches;
next	1.1;

1.1
date	2013.05.02.10.01.34;	author dcoppa;	state Exp;
branches;
next	;

1.9.4.1
date	2016.03.21.10.03.46;	author jasper;	state Exp;
branches;
next	;
commitid	dm2UfnorauG4B7sJ;

1.11.2.1
date	2016.03.21.10.11.18;	author jasper;	state Exp;
branches;
next	;
commitid	nMiDjbrhP11pV4Uw;


desc
@@


1.18
log
@Update to git-2.12.0.
@
text
@$OpenBSD: patch-t_test-lib_sh,v 1.17 2016/12/04 15:29:46 dcoppa Exp $

Force usage of GNU tar in the test suite: 't5004-archive-corner-cases.sh'
wants it badly.

Fix sum() function

--- t/test-lib.sh.orig	Fri Feb 24 20:17:39 2017
+++ t/test-lib.sh	Sat Feb 25 11:12:35 2017
@@@@ -48,6 +48,11 @@@@ fi
 . "$GIT_BUILD_DIR"/GIT-BUILD-OPTIONS
 export PERL_PATH SHELL_PATH
 
+if [ -n "${TEST_TAR}" ]; then
+	TAR=${TEST_TAR}
+	export TAR
+fi
+
 # if --tee was passed, write the output not only to the terminal, but
 # additionally to the file test-results/$BASENAME.out, too.
 case "$GIT_TEST_TEE_STARTED, $* " in
@@@@ -998,6 +1003,15 @@@@ case $uname_s in
 	test_set_prereq CYGWIN
 	test_set_prereq SED_STRIPS_CR
 	test_set_prereq GREP_STRIPS_CR
+	;;
+*OpenBSD*)
+	# sum(1) is cksum(1) on OpenBSD
+	sum () {
+		cksum "$@@"
+	}
+	test_set_prereq POSIXPERM
+	test_set_prereq BSLASHPSPEC
+	test_set_prereq EXECKEEPSPID
 	;;
 *)
 	test_set_prereq POSIXPERM
@


1.17
log
@
Update to git-2.11.0 and fix some tests to make the testsuite run.

ok benoit@@
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.16 2016/11/04 09:43:30 dcoppa Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Tue Nov 29 22:06:51 2016
+++ t/test-lib.sh	Sat Dec  3 14:24:49 2016
d22 1
a22 1
@@@@ -997,6 +1002,15 @@@@ case $(uname -s) in
@


1.16
log
@
Update to git-2.10.2
ok benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.15 2016/10/11 10:59:27 dcoppa Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Fri Oct 28 21:34:16 2016
+++ t/test-lib.sh	Tue Nov  1 19:19:33 2016
d22 1
a22 1
@@@@ -990,6 +995,12 @@@@ case $(uname -s) in
d32 3
@


1.15
log
@
Update to git-2.10.1

OK benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.14 2016/08/17 06:57:50 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Tue Oct  4 00:19:09 2016
+++ t/test-lib.sh	Tue Oct 11 11:41:06 2016
d22 1
a22 1
@@@@ -964,6 +969,12 @@@@ case $(uname -s) in
@


1.14
log
@Update to git-2.9.3.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.13 2016/06/09 19:07:54 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Fri Aug 12 21:38:45 2016
+++ t/test-lib.sh	Mon Aug 15 22:12:19 2016
d22 1
a22 1
@@@@ -963,6 +968,12 @@@@ case $(uname -s) in
@


1.13
log
@Update to git-2.8.4.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.12 2016/03/07 07:33:37 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Mon Jun  6 23:47:59 2016
+++ t/test-lib.sh	Thu Jun  9 20:34:08 2016
d22 1
a22 1
@@@@ -960,6 +965,12 @@@@ case $(uname -s) in
@


1.12
log
@Update to git-2.7.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.11 2015/08/30 08:53:29 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Mon Feb 22 23:02:26 2016
+++ t/test-lib.sh	Mon Mar  7 08:21:40 2016
d22 1
a22 1
@@@@ -947,6 +952,12 @@@@ case $(uname -s) in
@


1.11
log
@Update to git-2.5.1.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.10 2015/08/25 21:25:03 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Fri Aug 28 21:37:13 2015
+++ t/test-lib.sh	Sat Aug 29 10:36:25 2015
d22 1
a22 1
@@@@ -945,6 +950,12 @@@@ case $(uname -s) in
@


1.11.2.1
log
@Update to git-2.7.4.

ok benoit@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.12 2016/03/07 07:33:37 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Mon Feb 22 23:02:26 2016
+++ t/test-lib.sh	Mon Mar  7 08:21:40 2016
d22 1
a22 1
@@@@ -947,6 +952,12 @@@@ case $(uname -s) in
@


1.10
log
@Update to git-2.5.0.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.9 2015/05/07 20:45:35 dcoppa Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Mon Jul 27 22:34:56 2015
+++ t/test-lib.sh	Tue Aug 25 23:06:57 2015
d22 1
a22 1
@@@@ -936,6 +941,12 @@@@ case $(uname -s) in
@


1.9
log
@
Update to git-2.4.0

ok benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.8 2015/04/22 05:56:23 benoit Exp $
d8 3
a10 3
--- t/test-lib.sh.orig	Thu Apr 30 21:12:02 2015
+++ t/test-lib.sh	Thu May  7 13:26:20 2015
@@@@ -51,6 +51,11 @@@@ fi
d22 1
a22 1
@@@@ -941,6 +946,12 @@@@ case $(uname -s) in
@


1.9.4.1
log
@update to git-2.4.11, addressing multiple security/stability issues

ok benoit@@ (MAINTAINER)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.9 2015/05/07 20:45:35 dcoppa Exp $
d8 3
a10 3
--- t/test-lib.sh.orig	Thu Mar 17 21:40:15 2016
+++ t/test-lib.sh	Mon Mar 21 10:19:50 2016
@@@@ -48,6 +48,11 @@@@ fi
d22 1
a22 1
@@@@ -936,6 +941,12 @@@@ case $(uname -s) in
@


1.8
log
@Update to git-2.3.6.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.7 2015/02/07 18:19:41 dcoppa Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Tue Apr 21 23:09:37 2015
+++ t/test-lib.sh	Wed Apr 22 07:43:41 2015
d22 1
a22 1
@@@@ -925,6 +930,12 @@@@ case $(uname -s) in
@


1.7
log
@
Update to git-2.3.0

ok jca@@, benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.6 2015/01/13 09:40:56 benoit Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Thu Feb  5 15:40:08 2015
+++ t/test-lib.sh	Fri Feb  6 02:46:57 2015
d22 1
a22 1
@@@@ -927,6 +932,12 @@@@ case $(uname -s) in
@


1.6
log
@Update to git-2.2.2.
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.5 2014/12/01 11:16:11 dcoppa Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Mon Jan 12 23:25:03 2015
+++ t/test-lib.sh	Tue Jan 13 09:28:37 2015
d22 1
a22 1
@@@@ -920,6 +925,12 @@@@ case $(uname -s) in
@


1.5
log
@
regen patches
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.4 2014/09/26 13:55:44 dcoppa Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Wed Nov 26 16:39:03 2014
+++ t/test-lib.sh	Mon Dec  1 03:23:20 2014
d22 1
a22 1
@@@@ -916,6 +921,12 @@@@ case $(uname -s) in
@


1.4
log
@
Update to git-2.1.1

ok benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.3 2014/08/19 19:44:39 pascal Exp $
d8 2
a9 2
--- t/test-lib.sh.orig	Fri Sep 19 23:45:27 2014
+++ t/test-lib.sh	Fri Sep 26 11:30:55 2014
d22 1
a22 1
@@@@ -882,6 +887,12 @@@@ case $(uname -s) in
@


1.3
log
@Update to git 2.1.0.

ok benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.2 2014/03/10 20:56:53 pascal Exp $
d6 4
a9 2
--- t/test-lib.sh.orig	Sat Aug 16 00:26:55 2014
+++ t/test-lib.sh	Tue Aug 19 14:43:36 2014
d22 13
@


1.2
log
@Update to git 1.9.0

ok benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-t_test-lib_sh,v 1.1 2013/05/02 10:01:34 dcoppa Exp $
d6 3
a8 3
--- t/test-lib.sh.orig	Fri Feb 14 22:57:09 2014
+++ t/test-lib.sh	Sun Feb 16 18:13:37 2014
@@@@ -51,6 +51,10 @@@@ fi
d13 2
a14 1
+	export TAR=${TEST_TAR}
@


1.1
log
@Update to git-1.8.2.2

Fixes for vax by Jeremie Courreges-Anglas (thanks!)

OK sthen@@, benoit@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
d6 3
a8 3
--- t/test-lib.sh.orig	Sat Apr 27 01:54:17 2013
+++ t/test-lib.sh	Tue Apr 30 19:14:52 2013
@@@@ -47,6 +47,10 @@@@ fi
@

