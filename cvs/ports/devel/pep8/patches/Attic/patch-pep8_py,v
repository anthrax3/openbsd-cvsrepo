head	1.2;
access;
symbols
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2016.03.27.11.08.05;	author danj;	state dead;
branches;
next	1.1;
commitid	rggNgFt80YGKt5EP;

1.1
date	2015.12.24.20.22.37;	author shadchin;	state Exp;
branches;
next	;
commitid	9ZGhJT1bl8jRhiMg;


desc
@@


1.2
log
@update to pep8-1.7.0

ok shadchin@@ jca@@
@
text
@$OpenBSD: patch-pep8_py,v 1.1 2015/12/24 20:22:37 shadchin Exp $
Reverted a change which had unintended repercussions in flake8.
Refs:
 - https://mail.python.org/pipermail/code-quality/2015-March/000515.html
 - https://github.com/PyCQA/pep8/commit/435d1cbf995a659a82d1d4b42d25e3459556ef21
--- pep8.py.orig	Thu Dec 24 05:59:45 2015
+++ pep8.py	Thu Dec 24 06:01:15 2015
@@@@ -1984,24 +1984,24 @@@@ def read_config(options, args, arglist, parser):
 
     local_dir = os.curdir
 
+    if USER_CONFIG and os.path.isfile(USER_CONFIG):
+        if options.verbose:
+            print('user configuration: %s' % USER_CONFIG)
+        config.read(USER_CONFIG)
+
+    parent = tail = args and os.path.abspath(os.path.commonprefix(args))
+    while tail:
+        if config.read(os.path.join(parent, fn) for fn in PROJECT_CONFIG):
+            local_dir = parent
+            if options.verbose:
+                print('local configuration: in %s' % parent)
+            break
+        (parent, tail) = os.path.split(parent)
+
     if cli_conf and os.path.isfile(cli_conf):
         if options.verbose:
             print('cli configuration: %s' % cli_conf)
         config.read(cli_conf)
-    else:
-        if USER_CONFIG and os.path.isfile(USER_CONFIG):
-            if options.verbose:
-                print('user configuration: %s' % USER_CONFIG)
-            config.read(USER_CONFIG)
-
-        parent = tail = args and os.path.abspath(os.path.commonprefix(args))
-        while tail:
-            if config.read(os.path.join(parent, fn) for fn in PROJECT_CONFIG):
-                local_dir = parent
-                if options.verbose:
-                    print('local configuration: in %s' % parent)
-                break
-            (parent, tail) = os.path.split(parent)
 
     pep8_section = parser.prog
     if config.has_section(pep8_section):
@


1.1
log
@Fix breaking configuration file compatibility with devel/flake8,
from Bertrand Janin
@
text
@d1 1
a1 1
$OpenBSD$
@

