head	1.1;
access;
symbols
	OPENBSD_6_0:1.1.0.26
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.22
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.24
	OPENBSD_5_8_BASE:1.1
	OPENBSD_5_7:1.1.0.20
	OPENBSD_5_7_BASE:1.1
	OPENBSD_5_6:1.1.0.18
	OPENBSD_5_6_BASE:1.1
	OPENBSD_5_5:1.1.0.16
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.14
	OPENBSD_5_4_BASE:1.1
	OPENBSD_5_3:1.1.0.12
	OPENBSD_5_3_BASE:1.1
	OPENBSD_5_2:1.1.0.10
	OPENBSD_5_2_BASE:1.1
	OPENBSD_5_1_BASE:1.1
	OPENBSD_5_1:1.1.0.8
	OPENBSD_5_0:1.1.0.6
	OPENBSD_5_0_BASE:1.1
	OPENBSD_4_9:1.1.0.4
	OPENBSD_4_9_BASE:1.1
	OPENBSD_4_8:1.1.0.2
	OPENBSD_4_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2010.06.14.10.12.46;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.1
log
@- fix build on mips64

ok MAINTAINER
@
text
@$OpenBSD$

- include correct headers.
- LEAF needs two arguments.

--- opal/asm/base/MIPS.asm.orig	Mon Jun 14 09:41:43 2010
+++ opal/asm/base/MIPS.asm	Mon Jun 14 09:42:33 2010
@@@@ -1,31 +1,31 @@@@
 START_FILE
 
-#include <sys/asm.h>
-#include <regdef.h>
+#include <machine/asm.h>
+#include <machine/regdef.h>
 	
 	TEXT
 
 	ALIGN(8)
-LEAF(opal_atomic_mb)
+LEAF(opal_atomic_mb, 0)
 	sync
 	j	ra
 END(opal_atomic_mb)
 
 	
 	ALIGN(8)
-LEAF(opal_atomic_rmb)
+LEAF(opal_atomic_rmb, 0)
 	sync
 	j	ra
 END(opal_atomic_rmb)
 	
 	
-LEAF(opal_atomic_wmb)
+LEAF(opal_atomic_wmb, 0)
 	sync
 	j	ra
 END(opal_atomic_wmb)
 
 
-LEAF(opal_atomic_cmpset_32)
+LEAF(opal_atomic_cmpset_32, 0)
 	.set noreorder        
 retry1:                
 	ll     $3, 0($4)         
@@@@ -42,7 +42,7 @@@@ done1:                 
 END(opal_atomic_cmpset_32)
 
 
-LEAF(opal_atomic_cmpset_acq_32)
+LEAF(opal_atomic_cmpset_acq_32, 0)
 	.set noreorder        
 retry2:                
 	ll     $3, 0($4)         
@@@@ -60,7 +60,7 @@@@ done2:                 
 END(opal_atomic_cmpset_acq_32)
 
 	
-LEAF(opal_atomic_cmpset_rel_32)
+LEAF(opal_atomic_cmpset_rel_32, 0)
 	.set noreorder        
 	sync
 retry3:                
@@@@ -78,7 +78,7 @@@@ done3:                 
 END(opal_atomic_cmpset_rel_32)
 	
 	
-LEAF(opal_atomic_cmpset_64)
+LEAF(opal_atomic_cmpset_64, 0)
 		.set noreorder        
 retry4:                
 	lld    $3, 0($4)         
@@@@ -95,7 +95,7 @@@@ done4:                 
 END(opal_atomic_cmpset_64)
 
 
-LEAF(opal_atomic_cmpset_acq_64)
+LEAF(opal_atomic_cmpset_acq_64, 0)
 	.set noreorder        
 retry5:                
 	lld    $3, 0($4)         
@@@@ -112,7 +112,7 @@@@ done5:                 
 END(opal_atomic_cmpset_acq_64)
 
 
-LEAF(opal_atomic_cmpset_rel_64)
+LEAF(opal_atomic_cmpset_rel_64, 0)
 	.set noreorder        
 	sync
 retry6:                
@
