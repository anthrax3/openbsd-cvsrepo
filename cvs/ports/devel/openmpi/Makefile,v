head	1.23;
access;
symbols
	OPENBSD_6_1:1.19.0.2
	OPENBSD_6_1_BASE:1.19
	OPENBSD_6_0:1.17.0.2
	OPENBSD_6_0_BASE:1.17
	OPENBSD_5_9:1.16.0.2
	OPENBSD_5_9_BASE:1.16
	OPENBSD_5_8:1.16.0.4
	OPENBSD_5_8_BASE:1.16
	OPENBSD_5_7:1.15.0.8
	OPENBSD_5_7_BASE:1.15
	OPENBSD_5_6:1.15.0.6
	OPENBSD_5_6_BASE:1.15
	OPENBSD_5_5:1.15.0.4
	OPENBSD_5_5_BASE:1.15
	OPENBSD_5_4:1.15.0.2
	OPENBSD_5_4_BASE:1.15
	OPENBSD_5_3:1.12.0.2
	OPENBSD_5_3_BASE:1.12
	OPENBSD_5_2:1.9.0.8
	OPENBSD_5_2_BASE:1.9
	OPENBSD_5_1_BASE:1.9
	OPENBSD_5_1:1.9.0.6
	OPENBSD_5_0:1.9.0.4
	OPENBSD_5_0_BASE:1.9
	OPENBSD_4_9:1.9.0.2
	OPENBSD_4_9_BASE:1.9
	OPENBSD_4_8:1.6.0.2
	OPENBSD_4_8_BASE:1.6
	OPENBSD_4_7:1.3.0.2
	OPENBSD_4_7_BASE:1.3
	jasper_20090811:1.1.1.1
	jasper:1.1.1;
locks; strict;
comment	@# @;


1.23
date	2017.07.26.22.45.18;	author sthen;	state Exp;
branches;
next	1.22;
commitid	tD4MFrpYYDDL2UFT;

1.22
date	2017.07.16.19.18.51;	author espie;	state Exp;
branches;
next	1.21;
commitid	tt0GhWK5c4uf9ILG;

1.21
date	2017.05.14.14.30.03;	author schwarze;	state Exp;
branches;
next	1.20;
commitid	cGlksU416cD240Un;

1.20
date	2017.04.10.11.45.26;	author sthen;	state Exp;
branches;
next	1.19;
commitid	XDh1zlSBq0boKsHk;

1.19
date	2017.02.28.06.49.05;	author jca;	state Exp;
branches;
next	1.18;
commitid	o3unUPeRWdXQwnlp;

1.18
date	2016.11.26.16.59.26;	author naddy;	state Exp;
branches;
next	1.17;
commitid	K7Dl0YIuEQen2wx9;

1.17
date	2016.03.27.15.31.24;	author naddy;	state Exp;
branches;
next	1.16;
commitid	5N7eWC5l9uWI5G2D;

1.16
date	2015.05.29.12.45.04;	author pascal;	state Exp;
branches;
next	1.15;
commitid	AkslhQZyDNYuLo1Y;

1.15
date	2013.07.01.10.39.17;	author sthen;	state Exp;
branches;
next	1.14;

1.14
date	2013.03.21.08.33.52;	author landry;	state Exp;
branches;
next	1.13;

1.13
date	2013.03.11.10.50.12;	author espie;	state Exp;
branches;
next	1.12;

1.12
date	2013.01.17.08.37.58;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2013.01.10.14.43.46;	author jasper;	state Exp;
branches;
next	1.10;

1.10
date	2012.12.21.17.40.29;	author landry;	state Exp;
branches;
next	1.9;

1.9
date	2010.11.15.19.46.01;	author espie;	state Exp;
branches;
next	1.8;

1.8
date	2010.10.23.15.09.57;	author steven;	state Exp;
branches;
next	1.7;

1.7
date	2010.10.18.17.47.54;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2010.05.23.11.09.36;	author espie;	state Exp;
branches;
next	1.5;

1.5
date	2010.04.04.15.49.06;	author jasper;	state Exp;
branches;
next	1.4;

1.4
date	2010.03.21.10.45.19;	author jasper;	state Exp;
branches;
next	1.3;

1.3
date	2010.02.01.20.28.17;	author naddy;	state Exp;
branches;
next	1.2;

1.2
date	2009.10.10.18.26.34;	author jasper;	state Exp;
branches;
next	1.1;

1.1
date	2009.10.10.18.11.41;	author jasper;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2009.10.10.18.11.41;	author jasper;	state Exp;
branches;
next	;


desc
@@


1.23
log
@bump LIBCXX/LIBECXX/COMPILER_LIBCXX ports.
@
text
@# $OpenBSD: Makefile,v 1.22 2017/07/16 19:18:51 espie Exp $

BROKEN-arm =		configure: error: No atomic primitives available for arm-unknown-openbsd6.0
BROKEN-hppa =		error: Could not determine global symbol label prefix
BROKEN-powerpc =	checking if Fortran 77 compiler works... no

COMMENT =		open source MPI-2 implementation

V=			1.4.1
DISTNAME =		openmpi-$V
REVISION =		6

SHARED_LIBS =		mca_common_sm 1.0 \
			mpi 0.1 \
			mpi_cxx 0.0 \
			mpi_f77 0.0 \
			open-pal 0.0 \
			open-rte 0.0

CATEGORIES =		devel

HOMEPAGE =		http://www.open-mpi.org/

MODULES =		fortran
MODFORTRAN_COMPILER =	g77
BUILD_DEPENDS +=	${MODFORTRAN_BUILD_DEPENDS}

# BSD
PERMIT_PACKAGE_CDROM =	Yes

WANTLIB	+=		c m pthread ${COMPILER_LIBCXX} util z

MASTER_SITES =		${HOMEPAGE}/software/ompi/v${V:C/^([0-9]+\.[0-9]+).*/\1/}/downloads/

# XXX: uses a locally modified libtool.
USE_LIBTOOL =		No

FAKE_FLAGS =		sysconfdir=${PREFIX}/share/examples/openmpi/
CONFIGURE_STYLE =	gnu
CONFIGURE_ENV =		F77=${MODFORTRAN_COMPILER}

# openmpi's otfinfo conflicts with the one from texlive
post-install:
	mv ${PREFIX}/bin/otfinfo ${PREFIX}/bin/otfinfompi

.include <bsd.port.mk>
@


1.22
log
@use COMPILER_LIBCXX where applicable
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2017/05/14 14:30:03 schwarze Exp $
d11 1
a11 1
REVISION =		5
@


1.21
log
@unimportant blank line differences only, drop USE_GROFF and bump
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2017/04/10 11:45:26 sthen Exp $
d31 1
a31 1
WANTLIB	+=		c m pthread ${LIBCXX} util z
@


1.20
log
@use LIBCXX
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2017/02/28 06:49:05 jca Exp $
d11 1
a11 1
REVISION =		4
a34 1
USE_GROFF =		Yes
@


1.19
log
@BROKEN on arm, "No atomic primitives available"
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2016/11/26 16:59:26 naddy Exp $
d31 1
a31 1
WANTLIB	+=		c m pthread stdc++ util z
@


1.18
log
@do not pick up gfortan as Fortran 77 compiler
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2016/03/27 15:31:24 naddy Exp $
d3 1
a3 1
COMMENT =		open source MPI-2 implementation
d6 2
@


1.17
log
@g/c PFRAG.shared
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2015/05/29 12:45:04 pascal Exp $
d39 1
@


1.16
log
@openmpi now works fine with g77.

ok espie@@ aja@@ jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2013/07/01 10:39:17 sthen Exp $
d9 1
a9 1
REVISION =		3
@


1.15
log
@Remove Andreas Bihlmaier as maintainer per his request on ports@@.
Drop USE_GROFF from perl ports while there.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2013/03/21 08:33:52 landry Exp $
d9 1
a9 1
REVISION =		2
d23 1
a23 1
MODFORTRAN_COMPILER =	gfortran
@


1.14
log
@Explicitely set USE_LIBTOOL=No for ports we know don't work with our
libtool.
Joint work with ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2013/03/11 10:50:12 espie Exp $
d9 1
a9 1
REVISION =		1
a21 1
MAINTAINER =		Andreas Bihlmaier <andreas.bihlmaier@@gmx.de>
@


1.13
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2013/01/17 08:37:58 ajacoutot Exp $
d36 1
@


1.12
log
@Mark BROKEN on powerpc.
* It appears that your Fortran 77 compiler is unable to produce working
* executables.  A simple test application failed to properly ...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2013/01/10 14:43:46 jasper Exp $
a28 3
PERMIT_PACKAGE_FTP =	Yes
PERMIT_DISTFILES_CDROM =Yes
PERMIT_DISTFILES_FTP =	Yes
@


1.11
log
@this needs gfortran instead of g77 to build

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2012/12/21 17:40:29 landry Exp $
d5 1
@


1.10
log
@Mark as BROKEN-hppa: it never built there.
error: Could not determine global symbol label prefix
It tries to check for .globl support and fails on hppa, see config/ompi_config_asm.m4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/11/15 19:46:01 espie Exp $
d23 1
a23 1
MODFORTRAN_COMPILER =	g77
d37 2
@


1.9
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2010/10/23 15:09:57 steven Exp $
d4 1
@


1.8
log
@replace MODFORTRAN_WANTG77 with MODFORTRAN_COMPILER
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2010/05/23 11:09:36 espie Exp $
d7 1
a7 1
PKGNAME =		${DISTNAME}p1
d35 1
a35 1
USE_GROFF =	Yes
@


1.7
log
@USE_GROFF=Yes
@
text
@d22 1
a22 1
MODFORTRAN_WANTG77 =	Yes
@


1.6
log
@use fortran module
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2010/04/04 15:49:06 jasper Exp $
d35 1
@


1.5
log
@- add two patches from j@@bitminer.ca to quieten openmpi a bit
about v4-mapped addresses

read good to maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2010/03/21 10:45:19 jasper Exp $
d7 1
a7 1
PKGNAME =		${DISTNAME}p0
d21 3
@


1.4
log
@- update openmpi to 1.4.1
* Rewrite network interface configuration using getifaddrs(3) for BSD, from netbsd

ok maintainer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2010/02/01 20:28:17 naddy Exp $
d7 1
@


1.3
log
@mark devel/lam and devel/openmpi as conflicting
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2009/10/10 18:26:34 jasper Exp $
d5 2
a6 2
DISTNAME =		openmpi-1.3.3
PKGNAME =		${DISTNAME}p0
d8 2
a9 2
SHARED_LIBS =		mca_common_sm 0.0 \
			mpi 0.0 \
d29 1
a29 1
MASTER_SITES =		${HOMEPAGE}/software/ompi/v1.3/downloads/
@


1.2
log
@localbase -> prefix
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2009/10/10 18:11:41 jasper Exp $
d6 1
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d35 1
a35 1
	mv ${WRKINST}${LOCALBASE}/bin/otfinfo ${WRKINST}${LOCALBASE}/bin/otfinfompi
@


1.1.1.1
log
@import openmpi 1.3.3

The Open MPI Project is an open source MPI-2 implementation that is
developed and maintained by a consortium of academic, research, and
industry partners. Open MPI is therefore able to combine the expertise,
technologies, and resources from all across the High Performance
Computing community in order to build the best MPI library available.
Open MPI offers advantages for system and software vendors, application
developers and computer science researchers.

from Andreas Bihlmaier (MAINTAINER) with minor tweaks by me
@
text
@@
