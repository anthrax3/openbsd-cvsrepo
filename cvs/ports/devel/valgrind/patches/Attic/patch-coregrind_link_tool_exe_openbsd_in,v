head	1.2;
access;
symbols;
locks; strict;
comment	@# @;


1.2
date	2015.05.28.16.09.23;	author uebayasi;	state dead;
branches;
next	1.1;
commitid	PtLeuoS3VfY9q3Ei;

1.1
date	2015.04.30.13.06.10;	author jca;	state Exp;
branches;
next	;
commitid	gvcN6BmWwUFxrVLt;


desc
@@


1.2
log
@Update devel/valgrind to 3.10.1p2, merging valgrind-openbsd 20150528 release.

- Fix IOCTL argument read/write tracking.
- Fix (work-around) signal assertion failure.
- Fix build for binutils-2.17.

The binutils diff was from jca@@.

OK jca@@
@
text
@$OpenBSD: patch-coregrind_link_tool_exe_openbsd_in,v 1.1 2015/04/30 13:06:10 jca Exp $
--- coregrind/link_tool_exe_openbsd.in.orig	Thu Apr 30 13:37:16 2015
+++ coregrind/link_tool_exe_openbsd.in	Thu Apr 30 13:42:34 2015
@@@@ -77,14 +77,14 @@@@ chomp($temp);
 my $origbase = 0x400000;
 system(sprintf "sed -e 's|%x|%x|g' < $ldscript > $temp", $origbase, $notebase);
 
-my $cmd = sprintf "$cc -static -Wl,-Ttext=0x%x -Wl,-T,$temp", $textbase;
+my $cmd = sprintf "$cc -static -nopie -Wl,-Ttext=0x%x -Wl,-T,$temp", $textbase;
 
 # Add the rest of the parameters
 foreach my $n (2 .. $#ARGV) {
    $cmd = "$cmd $ARGV[$n]";
 }
 
-#print "link_tool_exe_linux: $cmd\n";
+print "link_tool_exe_openbsd: $cmd\n";
 
 
 # Execute the command:
@


1.1
log
@Remove BROKEN, provide -nopie flags for static linking.

Also print the final link command in the affected script.

Reported by naddy@@, ok uebayasi@@ (maintainer)
@
text
@d1 1
a1 1
$OpenBSD$
@

