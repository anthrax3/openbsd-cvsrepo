head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_0:1.1.1.1.0.12
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.8
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.10
	OPENBSD_5_8_BASE:1.1.1.1
	OPENBSD_5_7:1.1.1.1.0.6
	OPENBSD_5_7_BASE:1.1.1.1
	OPENBSD_5_6:1.1.1.1.0.4
	OPENBSD_5_6_BASE:1.1.1.1
	OPENBSD_5_5:1.1.1.1.0.2
	OPENBSD_5_5_BASE:1.1.1.1
	landry_20131019:1.1.1.1
	landry:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2013.10.19.16.37.31;	author landry;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2013.10.19.16.37.31;	author landry;	state Exp;
branches;
next	;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD: patch-ipc_chromium_src_base_dir_reader_bsd_h,v 1.3 2013/08/16 10:25:31 sthen Exp $
https://hg.mozilla.org/integration/mozilla-inbound/rev/66991961691d
Remove in 26
--- ipc/chromium/src/base/dir_reader_bsd.h.orig	Tue Jul 30 12:40:58 2013
+++ ipc/chromium/src/base/dir_reader_bsd.h	Wed Aug 14 15:46:21 2013
@@@@ -59,19 +59,11 @@@@ class DirReaderBSD {
     if (offset_ != size_)
       return true;
 
-#ifdef OS_OPENBSD
-    const int r = getdirentries(fd_, buf_, sizeof(buf_), basep_);
-#else
     const int r = getdents(fd_, buf_, sizeof(buf_));
-#endif
     if (r == 0)
       return false;
     if (r == -1) {
-#ifdef OS_OPENBSD
-      DLOG(ERROR) << "getdirentries returned an error: " << errno;
-#else
       DLOG(ERROR) << "getdents returned an error: " << errno;
-#endif
       return false;
     }
     size_ = r;
@@@@ -99,9 +91,6 @@@@ class DirReaderBSD {
  private:
   const int fd_;
   char buf_[512];
-#ifdef OS_OPENBSD
-  off_t *basep_;
-#endif
   size_t offset_, size_;
 
   DISALLOW_COPY_AND_ASSIGN(DirReaderBSD);
@


1.1.1.1
log
@Initial import of xulrunner 24.0.

Based off Firefox 24 ESR engine, with 300% less patching included, and
finally using a standard directory layout!
- Similar split between -main & -devel as done in 1.9.
- Can be installed alongside 1.9
- Ports using 1.9 will gradually be migrated to 24 so that the
unmaintained 1.9 can hit the attic..
- Should build on ppc & sparc64, and maybe even alpha. Time will tell..
- manually strip the sdk/lib/lib*.so libraries, otherwise that copy of
  libxul is 1Gb on amd64..
- To be improved in-tree over time, but will be linked to the build.
@
text
@@
