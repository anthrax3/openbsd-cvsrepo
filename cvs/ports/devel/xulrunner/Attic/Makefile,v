head	1.42;
access;
symbols
	OPENBSD_6_1:1.41.0.14
	OPENBSD_6_1_BASE:1.41
	OPENBSD_6_0:1.41.0.12
	OPENBSD_6_0_BASE:1.41
	OPENBSD_5_9:1.41.0.8
	OPENBSD_5_9_BASE:1.41
	OPENBSD_5_8:1.41.0.10
	OPENBSD_5_8_BASE:1.41
	OPENBSD_5_7:1.41.0.6
	OPENBSD_5_7_BASE:1.41
	OPENBSD_5_6:1.41.0.4
	OPENBSD_5_6_BASE:1.41
	OPENBSD_5_5:1.41.0.2
	OPENBSD_5_5_BASE:1.41
	OPENBSD_5_4:1.39.0.12
	OPENBSD_5_4_BASE:1.39
	OPENBSD_5_3:1.39.0.10
	OPENBSD_5_3_BASE:1.39
	OPENBSD_5_2:1.39.0.8
	OPENBSD_5_2_BASE:1.39
	OPENBSD_5_1_BASE:1.39
	OPENBSD_5_1:1.39.0.6
	OPENBSD_5_0:1.39.0.4
	OPENBSD_5_0_BASE:1.39
	OPENBSD_4_9:1.39.0.2
	OPENBSD_4_9_BASE:1.39
	OPENBSD_4_8:1.38.0.4
	OPENBSD_4_8_BASE:1.38
	OPENBSD_4_7:1.38.0.2
	OPENBSD_4_7_BASE:1.38
	martynas_20090728:1.1.1.2
	martynas:1.1.1
	OPENBSD_4_6:1.35.0.2
	OPENBSD_4_6_BASE:1.35
	OPENBSD_4_5:1.34.0.2
	OPENBSD_4_5_BASE:1.34
	OPENBSD_4_4:1.25.0.2
	OPENBSD_4_4_BASE:1.25
	OPENBSD_4_3:1.19.0.2
	OPENBSD_4_3_BASE:1.19
	OPENBSD_4_2:1.8.0.2
	OPENBSD_4_2_BASE:1.8
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	kurt_20070105:1.1.1.1
	kurt:1.1.1;
locks; strict;
comment	@# @;


1.42
date	2017.07.29.06.33.46;	author landry;	state dead;
branches;
next	1.41;
commitid	9BTPHx3lwRtAKql0;

1.41
date	2013.12.07.12.50.15;	author landry;	state Exp;
branches;
next	1.40;

1.40
date	2013.10.19.16.38.17;	author landry;	state Exp;
branches;
next	1.39;

1.39
date	2010.10.24.13.28.44;	author landry;	state Exp;
branches;
next	1.38;

1.38
date	2010.02.01.17.00.13;	author espie;	state Exp;
branches;
next	1.37;

1.37
date	2009.07.27.21.42.02;	author martynas;	state Exp;
branches;
next	1.36;

1.36
date	2009.07.27.21.16.22;	author martynas;	state dead;
branches;
next	1.35;

1.35
date	2009.06.16.01.14.16;	author sthen;	state Exp;
branches;
next	1.34;

1.34
date	2009.01.09.15.54.31;	author martynas;	state Exp;
branches;
next	1.33;

1.33
date	2009.01.06.23.31.45;	author martynas;	state Exp;
branches;
next	1.32;

1.32
date	2008.12.18.19.29.38;	author martynas;	state Exp;
branches;
next	1.31;

1.31
date	2008.11.14.16.29.36;	author martynas;	state Exp;
branches;
next	1.30;

1.30
date	2008.09.25.20.54.26;	author martynas;	state Exp;
branches;
next	1.29;

1.29
date	2008.09.18.13.37.41;	author ajacoutot;	state Exp;
branches;
next	1.28;

1.28
date	2008.08.29.01.16.47;	author martynas;	state Exp;
branches;
next	1.27;

1.27
date	2008.08.26.18.05.23;	author martynas;	state Exp;
branches;
next	1.26;

1.26
date	2008.08.23.22.07.03;	author martynas;	state Exp;
branches;
next	1.25;

1.25
date	2008.07.21.19.19.06;	author martynas;	state Exp;
branches;
next	1.24;

1.24
date	2008.07.17.16.50.20;	author martynas;	state Exp;
branches;
next	1.23;

1.23
date	2008.07.05.16.00.29;	author martynas;	state Exp;
branches;
next	1.22;

1.22
date	2008.06.26.14.46.04;	author naddy;	state Exp;
branches;
next	1.21;

1.21
date	2008.06.15.00.06.25;	author sthen;	state Exp;
branches;
next	1.20;

1.20
date	2008.04.15.09.28.13;	author martynas;	state Exp;
branches;
next	1.19;

1.19
date	2008.02.13.20.52.28;	author martynas;	state Exp;
branches;
next	1.18;

1.18
date	2008.02.12.16.09.23;	author sthen;	state Exp;
branches;
next	1.17;

1.17
date	2008.02.09.20.57.43;	author sthen;	state Exp;
branches;
next	1.16;

1.16
date	2008.01.23.16.32.04;	author martynas;	state Exp;
branches;
next	1.15;

1.15
date	2007.12.07.22.10.28;	author martynas;	state Exp;
branches;
next	1.14;

1.14
date	2007.11.13.21.03.03;	author martynas;	state Exp;
branches;
next	1.13;

1.13
date	2007.11.13.14.06.21;	author steven;	state Exp;
branches;
next	1.12;

1.12
date	2007.10.27.23.44.41;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2007.10.26.13.10.14;	author simon;	state Exp;
branches;
next	1.10;

1.10
date	2007.10.14.18.34.30;	author kurt;	state Exp;
branches;
next	1.9;

1.9
date	2007.09.16.02.53.14;	author merdely;	state Exp;
branches;
next	1.8;

1.8
date	2007.08.08.17.11.48;	author martynas;	state Exp;
branches;
next	1.7;

1.7
date	2007.08.06.14.43.48;	author kurt;	state Exp;
branches;
next	1.6;

1.6
date	2007.06.28.19.50.04;	author martynas;	state Exp;
branches;
next	1.5;

1.5
date	2007.04.18.18.56.49;	author kili;	state Exp;
branches;
next	1.4;

1.4
date	2007.04.14.21.20.19;	author sturm;	state Exp;
branches;
next	1.3;

1.3
date	2007.02.22.00.40.59;	author naddy;	state Exp;
branches
	1.3.2.1;
next	1.2;

1.2
date	2007.01.12.20.35.15;	author kurt;	state Exp;
branches;
next	1.1;

1.1
date	2007.01.05.14.44.47;	author kurt;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2007.01.05.14.44.47;	author kurt;	state Exp;
branches;
next	1.1.1.2;

1.1.1.2
date	2009.07.27.21.35.56;	author martynas;	state Exp;
branches;
next	;

1.3.2.1
date	2007.07.04.17.07.00;	author sturm;	state Exp;
branches;
next	1.3.2.2;

1.3.2.2
date	2007.08.08.21.43.58;	author ajacoutot;	state Exp;
branches;
next	;


desc
@@


1.42
log
@Remove xulrunner/24.

Doesn't build with clang (and it's a fscking maze of
defines/headers/wrappers to fix..), this branch is dead upstream since 3
years, all consumers have been either removed or prevented from using it,
and xul itself as a technology is considered dead upstream, HTML5 killed
it.

further cleanup to come in mozilla.port.mk.

ok ajacoutot@@ sthen@@
@
text
@# $OpenBSD: Makefile,v 1.41 2013/12/07 12:50:15 landry Exp $

SUBDIR =
SUBDIR +=	24

.include <bsd.port.subdir.mk>
@


1.41
log
@Remove devel/xulrunner/1.9, www/fennec, www/firefox36 and productivity/sunbird

- nothing uses xulrunner 1.9 anymore, and that branch was EOL'd upstream
  20 months ago (firefox36 was already unlinked from the build)
- www/fennec as a xul app is dead upstream, since now firefox mobile is
  built on top of java android libs and thus unportable to regular OS.
The esr10 branch from which it was built upon was EOL'd upstream 10 months ago
- productivity/sunbird as a standalone app is dead upstream since 3
  years, hypothetical users should just use thunderbird+lightning which
is still supported/developed.

No complains from ports@@, this will allow for a serious mozilla ports
cleanup, and we're down to 5 mozillas in the ports tree.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.40 2013/10/19 16:38:17 landry Exp $
@


1.40
log
@link xulrunner/24 to the build
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.39 2010/10/24 13:28:44 landry Exp $
a3 1
SUBDIR +=	1.9
@


1.39
log
@So long, xulrunner 1.8. You were nice in the firefox 2.0 days, but your
last release was nearly two years ago, you're crippled by security
issues, abandoned by your parents in favor of your younger brother,
and those days nothing uses you anymore. RIP in the attic..
agreed by jasper@@ and phessler@@
happiness ensues...
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.38 2010/02/01 17:00:13 espie Exp $
d5 1
@


1.38
log
@SUBDIR += is wrong: it means the makefile will pick up SUBDIR from env, thus
breaking cd /usr/ports && SUBDIR=some/path make something for
category makefiles. While there, also put spaces around += uniformously.
okay naddy@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.37 2009/07/27 21:42:02 martynas Exp $
a3 1
SUBDIR +=	1.8
@


1.37
log
@add
@
text
@d1 1
a1 1
# $OpenBSD$
d3 3
a5 2
SUBDIR+=	1.8
SUBDIR+=	1.9
@


1.36
log
@remove xulrunner;  an infrastructure for multiple xulrunners will
be imported shortly
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.35 2009/06/16 01:14:16 sthen Exp $
d3 2
a4 1
ONLY_FOR_ARCHS=	alpha amd64 arm i386 powerpc sparc sparc64
d6 1
a6 138
COMMENT-main=	standalone XUL/XPCOM runtime environment
COMMENT-devel=	devel files for Gecko

VER=		1.8.1.19
DISTNAME=	mozilla
PKGNAME=	xulrunner-${VER}
PKGNAME-main=	xulrunner-${VER}p2
# NOTE: Must bump package name if -main changes, since -devel depends
# on -main (plist changes).
PKGNAME-devel=	xulrunner-devel-${VER}p2
SO_VERSION=	2.0
# NOTE: Must bump minor version if any shlib's are removed from the
# components dir to avoid pkg_add -r issues.
.for _lib in auth autoconfig cookie fileview gtkembedmoz mozjs nullplugin \
	permissions pipboot pipnss pippki system-pref transformiix \
	universalchardet unixprintplugin websrvcs xmlextras xpcom xul xulutil
SHARED_LIBS+=	${_lib}	${SO_VERSION}
.endfor

CATEGORIES=	devel

HOMEPAGE=	http://developer.mozilla.org/en/docs/XULRunner

MULTI_PACKAGES=	-main -devel

# MPL
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

MASTER_SITES=	http://mirrors.protection.cx/~martynas/mozilla/xulrunner/
DISTFILES=	xulrunner-${VER}${EXTRACT_SUFX}

MODULES=	devel/gettext
BUILD_DEPENDS=	:zip->=2.3:archivers/zip
LIB_DEPENDS=	gdk-x11-2.0,gdk_pixbuf-2.0,gtk-x11-2.0::x11/gtk+2 \
		nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr \
		nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
WANTLIB=	c gio-2.0 glib-2.0 m pthread stdc++

WANTLIB-main=	${WANTLIB} X11 Xau Xcomposite Xcursor Xdamage Xdmcp Xext \
		Xfixes Xft Xi Xinerama Xrandr Xrender Xt atk-1.0 cairo expat \
		fontconfig freetype glitz gmodule-2.0 gobject-2.0 gthread-2.0 \
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 pixman-1 png z

LIB_DEPENDS-devel= ${MODGETTEXT_LIB_DEPENDS} IDL-2::devel/libIDL \
		xulrunner/mozjs,xulrunner/xpcom,xulrunner/xul:${PKGNAME-main}:devel/xulrunner,-main
WANTLIB-devel=	${WANTLIB} nspr4 plc4 plds4

VMEM_WARNING=	Yes

USE_X11=	Yes
USE_GMAKE=	Yes
# Regression tests do nothing
NO_REGRESS=	Yes

MODGNU_CONFIG_GUESS_DIRS=	${WRKSRC}/build/autoconf

AUTOCONF_VERSION= 2.13
CONFIGURE_STYLE= autoconf no-autoheader
CONFIGURE_ARGS=	--with-system-jpeg=${LOCALBASE}	\
		--with-system-png=${LOCALBASE}	\
		--with-system-zlib=/usr/lib	\
		--with-system-nspr		\
		--with-system-nss		\
		--with-pthreads			\
		--enable-xft			\
		--disable-optimize		\
		--enable-default-toolkit=gtk2	\
		--disable-debug			\
		--disable-tests			\
		--disable-pedantic		\
		--disable-installer		\
		--disable-updater		\
		--disable-gnomeui		\
		--disable-gnomevfs		\
		--disable-javaxpcom		\
		--enable-xinerama		\
		--enable-svg			\
		--enable-svg-renderer=cairo	\
		--enable-system-cairo		\
		--enable-canvas			\
		--enable-application=xulrunner	\
		--enable-extensions=default,cookie,permissions

MAKE_ENV=	MOZ_CO_PROJECT=xulrunner \
		LD_LIBRARY_PATH="${WRKSRC}/dist/bin" \
		BUILD_OFFICIAL=1 \
		MOZILLA_OFFICIAL=1 \
		SO_VERSION="${SO_VERSION}"
CONFIGURE_ENV=	${MAKE_ENV} \
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		topsrcdir=${WRKSRC}

MOB=		${WRKSRC}/dist/bin
MOZ=		${PREFIX}/xulrunner

DATADIRS=	chrome defaults icons res components greprefs plugins
DISTDIRS=	idl include
TOOLS=		TestGtkEmbed xpcshell xpt_link mozilla-xremote-client \
		xpicleanup xulrunner-bin nsinstall xpidl xulrunner-stub \
		regxpcom xpt_dump

pre-configure:
	@@perl -pi -e 's|_LOCALBASE_|${LOCALBASE}|g; s|_X11BASE_|${X11BASE}|g' \
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in \
		${WRKSRC}/xulrunner/app/mozilla.in \
		${WRKSRC}/xulrunner/setup/nsXULAppInstall.js
	@@perl -pi -e 's|_SO_VERSION_|${SO_VERSION}|g' \
		${WRKSRC}/xpcom/components/nsNativeComponentLoader.cpp

do-install:
	cd ${WRKSRC}/dist && \
		find ${DISTDIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DISTDIRS} ! -type d \
			-exec ${INSTALL_DATA} {} ${MOZ}/{} \;
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \; && \
		${INSTALL_PROGRAM} ${TOOLS} ${MOZ}
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
	${INSTALL_DATA} ${WRKSRC}/dist/lib/libxpcomglue.a \
		${WRKSRC}/dist/lib/libxpcomglue_s.a ${MOZ}
	${INSTALL_DATA} ${WRKSRC}/LICENSE ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/xulrunner \
		${MOB}/xulrunner-config ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${MOB}/run-mozilla.sh ${MOZ}
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${WRKBUILD}/build/unix/*.pc \
		${FILESDIR}/xulrunner-embedding.pc ${PREFIX}/lib/pkgconfig
	@@perl -pi -e 's|!!PREFIX!!|${TRUEPREFIX}|g; s|!!VERSION!!|${VER}|g' \
		${PREFIX}/lib/pkgconfig/xulrunner-embedding.pc

.include <bsd.port.mk>
@


1.35
log
@WANTLIB+=gio-2.0; bump PKGNAME-main and PKGNAME-devel.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.34 2009/01/09 15:54:31 martynas Exp $
@


1.34
log
@- do not run with a predictable directory as root:  firefox,
thunderbird, seamonkey, xulrunner
- add comment for xulrunner why -devel needs to be bumped
suggested and ok naddy@@;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.33 2009/01/06 23:31:45 martynas Exp $
d11 1
a11 1
PKGNAME-main=	xulrunner-${VER}p1
d14 1
a14 1
PKGNAME-devel=	xulrunner-devel-${VER}p1
d44 1
a44 1
WANTLIB=	c glib-2.0 m pthread stdc++
@


1.33
log
@use fonts that are available instead of msttcorefonts.  fixes the
looks of xulrunner-dependent applications;  as reported by ajacoutot@@
"YES!" ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.32 2008/12/18 19:29:38 martynas Exp $
d11 4
a14 2
PKGNAME-main=	xulrunner-${VER}p0
PKGNAME-devel=	xulrunner-devel-${VER}p0
@


1.32
log
@security update to xulrunner-1.8.1.19.  this is the last security
update for 1.8 branch.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.31 2008/11/14 16:29:36 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}
PKGNAME-devel=	xulrunner-devel-${VER}
@


1.31
log
@security update to xulrunner-1.8.1.18;  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.30 2008/09/25 20:54:26 martynas Exp $
d8 1
a8 1
VER=		1.8.1.18
@


1.30
log
@security update to xulrunner-1.8.1.17.  ok naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.29 2008/09/18 13:37:41 ajacoutot Exp $
d8 1
a8 1
VER=		1.8.1.17
@


1.29
log
@- SYSCONFDIR and LOCALBASE are already part of the generic SUBST_VARS

looks good to landry@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.28 2008/08/29 01:16:47 martynas Exp $
d8 1
a8 1
VER=		1.8.1.16
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p3
PKGNAME-devel=	xulrunner-devel-${VER}p3
@


1.28
log
@libxul-embedding -> xulrunner-embedding, since apps (liferea) think
that it's xulrunner 1.9, if libxul-embedding is detected.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.27 2008/08/26 18:05:23 martynas Exp $
a58 1
SUBST_VARS=	LOCALBASE
@


1.27
log
@- mark RPATH xulrunner libraries.  apps don't (yet) use XPCOM glue,
and mark RPATH xulrunner location.  this fixes apps such as
py-gnome-extras.  w/ help from kurt@@
- install libxpcomglue{,_s} XPCOM glue, and libxul-embedding
pkg-config so that apps can use it, which is a proper way to get
xulrunner libs loaded
looks ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2008/08/23 22:07:03 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p2
PKGNAME-devel=	xulrunner-devel-${VER}p2
d137 1
a137 1
		${FILESDIR}/libxul-embedding.pc ${PREFIX}/lib/pkgconfig
d139 1
a139 1
		${PREFIX}/lib/pkgconfig/libxul-embedding.pc
@


1.26
log
@adapt from mozilla-firefox: use system libm
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2008/07/21 19:19:06 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p1
PKGNAME-devel=	xulrunner-devel-${VER}p1
d129 2
d136 4
a139 1
	${INSTALL_DATA} ${WRKBUILD}/build/unix/*.pc ${PREFIX}/lib/pkgconfig
@


1.25
log
@adapt for other mozilla projects claudio's diff of firefox to honor
MOZ_PLUGIN_PATH.  bump pkgnames
sure claudio@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2008/07/17 16:50:20 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p0
PKGNAME-devel=	xulrunner-devel-${VER}p0
@


1.24
log
@security update to xulrunner-1.8.1.16.  MFSA 2008-35, MFSA 2008-34
ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2008/07/05 16:00:29 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}
PKGNAME-devel=	xulrunner-devel-${VER}
@


1.23
log
@security update to xulrunner-1.8.1.15;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2008/06/26 14:46:04 naddy Exp $
d8 1
a8 1
VER=		1.8.1.15
@


1.22
log
@bump -devel package too, since it depends on PKGNAME-main
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.21 2008/06/15 00:06:25 sthen Exp $
d8 1
a8 1
VER=		1.8.1.13
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p0
PKGNAME-devel=	xulrunner-devel-${VER}p0
d34 1
a34 2
MASTER_SITES=	http://mirrors.protection.cx/~martynas/mozilla/xulrunner/ \
		http://www.bsdfrog.org/OpenBSD/distfiles/mozilla/xulrunner/
@


1.21
log
@sync wantlib and bump packages. ok ajacoutot
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2008/04/15 09:28:13 martynas Exp $
d12 1
a12 1
PKGNAME-devel=	xulrunner-devel-${VER}
@


1.20
log
@security update to xulrunner-1.8.1.13
MFSA 2008-19, MFSA 2008-18, MFSA 2008-17, MFSA 2008-16, MFSA 2008-15,
MFSA 2008-14.
ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2008/02/13 20:52:28 martynas Exp $
d11 1
a11 1
PKGNAME-main=	xulrunner-${VER}
d48 1
a48 1
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 png z
@


1.19
log
@update to xulrunner-1.8.1.12;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2008/02/12 16:09:23 sthen Exp $
d8 1
a8 1
VER=		1.8.1.12
@


1.18
log
@fix javascript on arm (it expected Armel ABI).
from martynas
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2008/02/09 20:57:43 sthen Exp $
d8 1
a8 1
VER=		1.8.1.11
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p1
PKGNAME-devel=	xulrunner-devel-${VER}p1
@


1.17
log
@xulrunner seems to work on arm, add to ONLY_FOR_ARCHS.
ok naddy
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2008/01/23 16:32:04 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p0
PKGNAME-devel=	xulrunner-devel-${VER}p0
@


1.16
log
@enable cookie and permissions extensions for applications such as
epiphany and galeon.  improvements, testing and ok kurt@@ and naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2007/12/07 22:10:28 martynas Exp $
d3 1
a3 1
ONLY_FOR_ARCHS=	alpha amd64 i386 powerpc sparc sparc64
@


1.15
log
@update to xulrunner-1.8.1.11;  ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2007/11/13 21:03:03 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}
PKGNAME-devel=	xulrunner-devel-${VER}
d16 3
a18 3
.for _lib in auth autoconfig fileview gtkembedmoz mozjs nullplugin \
	pipboot pipnss pippki system-pref transformiix universalchardet \
	unixprintplugin websrvcs xmlextras xpcom xul xulutil
d88 2
a89 1
		--enable-application=xulrunner
@


1.14
log
@update to xulrunner-1.8.1.9;  testing and ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2007/11/13 14:06:21 steven Exp $
d8 1
a8 1
VER=		1.8.1.9
@


1.13
log
@fix WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2007/10/27 23:44:41 ajacoutot Exp $
d8 1
a8 1
VER=		1.8.1.6
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p1
PKGNAME-devel=	xulrunner-devel-${VER}p2
d47 2
a48 2
		fontconfig freetype glitz gmodule-2.0 gobject-2.0 jpeg \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 png z
a49 1
WANTLIB-devel=	nspr4 plc4 plds4
d52 1
a106 3

post-extract:
	@@cp ${FILESDIR}/xptc* ${WRKSRC}/xpcom/reflect/xptcall/src/md/unix/
@


1.12
log
@- domain name change; fix MASTER_SITES
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2007/10/26 13:10:14 simon Exp $
d12 1
a12 1
PKGNAME-devel=	xulrunner-devel-${VER}p1
d50 1
@


1.11
log
@adjust WANTLIB for gtk+2 update and bump PKGNAME

ok jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2007/10/14 18:34:30 kurt Exp $
d35 1
a35 1
		http://www.obsd.fr/OpenBSD/distfiles/mozilla/xulrunner/
@


1.10
log
@- fix a 64-bit problem with the LiveConnect feature. From mozilla
  bug report: https://bugzilla.mozilla.org/show_bug.cgi?id=345866
  Eventually the java plugin will need this on amd64. okay martynas@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2007/09/16 02:53:14 merdely Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}p0
PKGNAME-devel=	xulrunner-devel-${VER}p0
d45 4
a48 4
WANTLIB-main=	${WANTLIB} X11 Xau Xcursor Xdmcp Xext Xfixes Xft \
		Xi Xinerama Xrandr Xrender Xt atk-1.0 cairo expat \
		fontconfig freetype glitz gmodule-2.0 gobject-2.0 \
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 png z
@


1.9
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2007/08/08 17:11:48 martynas Exp $
d11 2
a12 2
PKGNAME-main=	xulrunner-${VER}
PKGNAME-devel=	xulrunner-devel-${VER}
@


1.8
log
@security update to 1.8.1.6, fixes MFSA 2007-[18..27];  ok kurt@@, naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2007/08/06 14:43:48 kurt Exp $
d5 2
a6 2
COMMENT-main=	"standalone XUL/XPCOM runtime environment"
COMMENT-devel=	"devel files for Gecko"
@


1.7
log
@- cleanup files left in /etc/gre.d using unregister-global and @@sample
okay martynas@@ naddy@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/06/28 19:50:04 martynas Exp $
d8 1
a8 1
VER=		1.8.1.4
d11 1
a11 1
PKGNAME-main=	xulrunner-${VER}p0
@


1.6
log
@stick with firefox codebase and manually check out xulrunner update
so that applications which depend on xulrunner won't suffer from
the vulnerabilities which are already fixed.

MFSA 2007-17; MFSA 2007-16; MFSA 2007-14; MFSA 2007-13; MFSA 2007-12;
MFSA 2007-11; MFSA 2007-09; MFSA 2007-08; MFSA 2007-07; MFSA 2007-06;
MFSA 2007-05; MFSA 2007-04; MFSA 2007-03; MFSA 2007-02; MFSA 2007-01;
MFSA 2006-76; MFSA 2006-75; MFSA 2006-73; MFSA 2006-72; MFSA 2006-71;
MFSA 2006-70; MFSA 2006-69; MFSA 2006-68; MFSA 2006-67; MFSA 2006-66;
MFSA 2006-65; MFSA 2006-64; MFSA 2006-62; MFSA 2006-61; MFSA 2006-60;
MFSA 2006-59; MFSA 2006-58; MFSA 2006-57; MFSA 2006-56; MFSA 2006-55;
MFSA 2006-54; MFSA 2006-53; MFSA 2006-52; MFSA 2006-51; MFSA 2006-50;
MFSA 2006-48; MFSA 2006-47; MFSA 2006-46; MFSA 2006-45; MFSA 2006-44.

(these are for firefox 1_8_0_4 -> 1_8_1_4)

ok kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/04/18 18:56:49 kili Exp $
d11 1
a11 1
PKGNAME-main=	xulrunner-${VER}
@


1.5
log
@
-devel depends on -main, so bump the pkg name for it (plist change).

ok, kurt@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/04/14 21:20:19 sturm Exp $
d8 1
a8 1
VER=		1.8.0.4
d11 3
a13 3
PKGNAME-main=	xulrunner-${VER}p2
PKGNAME-devel=	xulrunner-devel-${VER}p2
SO_VERSION=	1.0
d16 3
a18 11
.for _lib in accessibility appcomps auth autoconfig browsercomps \
	browserdirprovider caps chrome commandlines composer cookie docshell \
	editor embedcomponents fileview gfx_gtk gfxps gfxpsshar gkgfx \
	gklayout gkplugin gtkembedmoz gtkxtbin htmlpars i18n imglib2 inspector \
	jar50 jsd jsj mork mozfind mozjs necko necko2 nsappshell nss3 \
	nssckbi oji permissions pipboot pipnss pippki pref rdf \
	remoteservice searchservice smime3 softokn3 ssl3 system-pref \
	toolkitcomps transformiix txmgr uconv ucvmath universalchardet \
	webbrwsr websrvcs widget_gtk2 xmlextras xpcom xpcom_compat \
	xpcom_compat_c xpcom_core xpconnect xpinstall xpistub xul \
	xulutil fort swft
d28 1
a28 1
# mozilla public license
d34 3
a36 2
MASTER_SITES=	http://releases.mozilla.org/pub/mozilla.org/xulrunner/releases/${VER}/source/
DISTFILES=	xulrunner-${VER}-source.tar.bz2
d41 2
a42 1
                nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr
d45 4
a48 3
WANTLIB-main=	${WANTLIB} X11 Xau Xdmcp Xft Xinerama Xrender Xt atk-1.0 cairo \
		expat fontconfig freetype glitz gmodule-2.0 gobject-2.0 jpeg \
		pango-1.0 pangocairo-1.0 pangoft2-1.0 png z
d51 1
a51 2
		xulrunner/mozjs,xulrunner/nss3,xulrunner/smime3,xulrunner/ssl3,xulrunner/xpcom,xulrunner/xul:${PKGNAME-main}:devel/xulrunner,-main
WANTLIB-devel=	${WANTLIB} nspr4 plc4 plds4
d69 1
d72 1
a72 1
		--enable-optimize=-Os		\
d86 2
a87 4
		--enable-canvas

# from browser/config/mozconfig
CONFIGURE_ARGS+=--enable-application=xulrunner
d95 2
a96 1
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig"
d101 6
d112 1
d119 12
a130 15
.for dir in include idl
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${WRKSRC}/dist && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
	@@cd ${WRKSRC}/dist/public && ${TAR} -chf - nss | \
		${TAR} -xf - -C ${MOZ}/include
.for dir in chrome components defaults greprefs icons res 
	${INSTALL_DATA_DIR} ${MOZ}/${dir}
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
		${TAR} -xf - -C ${MOZ}
.endfor
	@@cd ${MOB} && ${TAR} -chf - *.so.?.? | \
		${TAR} -xf - -C ${MOZ}
	@@chmod 444 ${MOZ}/*.so.?.? ${MOZ}/components/*.so.?.? ${MOZ}/components/*.js
d132 2
a133 2
	${INSTALL_DATA} ${WRKSRC}/xulrunner/app/mozicon16.xpm ${WRKSRC}/xulrunner/app/mozicon50.xpm ${MOZ}
	${INSTALL_SCRIPT} ${MOB}/xulrunner ${MOB}/xulrunner-config ${PREFIX}/bin/
a134 3
	${INSTALL_PROGRAM} ${MOB}/regxpcom ${MOB}/xulrunner-bin ${MOB}/mozilla-xremote-client ${MOB}/TestGtkEmbed \
	${MOB}/mangle ${MOB}/nsinstall ${MOB}/shlibsign ${MOB}/xpcshell ${MOB}/xpicleanup ${MOB}/xpidl \
	${MOB}/xpt_dump ${MOB}/xpt_link ${MOB}/xulrunner-stub ${MOZ}
@


1.4
log
@WANTLIB
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/02/22 00:40:59 naddy Exp $
d12 1
a12 1
PKGNAME-devel=	xulrunner-devel-${VER}p1
@


1.3
log
@LP64 fix for XUL templates builder; from Martynas Venckus
ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2007/01/12 20:35:15 kurt Exp $
d11 1
a11 1
PKGNAME-main=	xulrunner-${VER}p1
d51 2
a52 2
WANTLIB-main=	${WANTLIB} X11 Xext Xft Xinerama Xrender Xt atk-1.0 cairo \
		fontconfig freetype glitz gmodule-2.0 gobject-2.0 jpeg \
@


1.3.2.1
log
@MFC:
stick with firefox codebase and manually check out xulrunner update
so that applications which depend on xulrunner won't suffer from
the vulnerabilities which are already fixed.

MFSA 2007-17; MFSA 2007-16; MFSA 2007-14; MFSA 2007-13; MFSA 2007-12;
MFSA 2007-11; MFSA 2007-09; MFSA 2007-08; MFSA 2007-07; MFSA 2007-06;
MFSA 2007-05; MFSA 2007-04; MFSA 2007-03; MFSA 2007-02; MFSA 2007-01;
MFSA 2006-76; MFSA 2006-75; MFSA 2006-73; MFSA 2006-72; MFSA 2006-71;
MFSA 2006-70; MFSA 2006-69; MFSA 2006-68; MFSA 2006-67; MFSA 2006-66;
MFSA 2006-65; MFSA 2006-64; MFSA 2006-62; MFSA 2006-61; MFSA 2006-60;
MFSA 2006-59; MFSA 2006-58; MFSA 2006-57; MFSA 2006-56; MFSA 2006-55;
MFSA 2006-54; MFSA 2006-53; MFSA 2006-52; MFSA 2006-51; MFSA 2006-50;
MFSA 2006-48; MFSA 2006-47; MFSA 2006-46; MFSA 2006-45; MFSA 2006-44.

(these are for firefox 1_8_0_4 -> 1_8_1_4)
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2007/02/22 00:40:59 naddy Exp $
d8 1
a8 1
VER=		1.8.1.4
d11 3
a13 3
PKGNAME-main=	xulrunner-${VER}
PKGNAME-devel=	xulrunner-devel-${VER}
SO_VERSION=	2.0
d16 11
a26 3
.for _lib in auth autoconfig fileview gtkembedmoz mozjs nullplugin \
	pipboot pipnss pippki system-pref transformiix universalchardet \
	unixprintplugin websrvcs xmlextras xpcom xul xulutil
d36 1
a36 1
# MPL
d42 2
a43 3
MASTER_SITES=	http://mirrors.protection.cx/~martynas/mozilla/xulrunner/ \
		http://www.obsd.fr/OpenBSD/distfiles/mozilla/xulrunner/
DISTFILES=	xulrunner-${VER}${EXTRACT_SUFX}
d48 1
a48 2
                nspr4.>=17,plc4.>=17,plds4.>=17:nspr->=4.6.4p1:devel/nspr \
		nss3.>=19,smime3.>=19,softokn3.>=19,ssl3.>=19:nss->=3.11.4p1:security/nss
d51 1
a51 2
WANTLIB-main=	${WANTLIB} X11 Xau Xcursor Xdmcp Xext Xfixes Xft \
		Xi Xinerama Xrandr Xrender Xt atk-1.0 cairo \
d56 2
a57 1
		xulrunner/mozjs,xulrunner/xpcom,xulrunner/xul:${PKGNAME-main}:devel/xulrunner,-main
a74 1
		--with-system-nss		\
d77 1
a77 1
		--disable-optimize		\
d91 4
a94 2
		--enable-canvas			\
		--enable-application=xulrunner
d102 1
a102 2
		PKG_CONFIG_PATH="${LOCALBASE}/lib/pkgconfig:${X11BASE}/lib/pkgconfig" \
		topsrcdir=${WRKSRC}
a106 6
DATADIRS=	chrome defaults icons res components greprefs plugins
DISTDIRS=	idl include
TOOLS=		TestGtkEmbed xpcshell xpt_link mozilla-xremote-client \
		xpicleanup xulrunner-bin nsinstall xpidl xulrunner-stub \
		regxpcom xpt_dump

a111 1
		${WRKSRC}/js/src/xpconnect/shell/Makefile.in \
d118 15
a132 12
	cd ${WRKSRC}/dist && \
		find ${DISTDIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DISTDIRS} ! -type d \
			-exec ${INSTALL_DATA} {} ${MOZ}/{} \;
	cd ${MOB} && \
		find ${DATADIRS} -type d \
			-exec ${INSTALL_DATA_DIR} ${MOZ}/{} \; && \
		find ${DATADIRS} ! -type d \
			-exec ${INSTALL_DATA} -m 644 {} ${MOZ}/{} \; && \
		${INSTALL_PROGRAM} ${TOOLS} ${MOZ}
	${INSTALL_DATA} ${MOB}/*.so.${SO_VERSION} ${MOZ}
d134 2
a135 2
	${INSTALL_SCRIPT} ${MOB}/xulrunner \
		${MOB}/xulrunner-config ${PREFIX}/bin/
d137 3
@


1.3.2.2
log
@MFC (original commit martynas@@):
- security update to 1.8.1.6, fixes MFSA 2007-[18..27]

ok sturm@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3.2.1 2007/07/04 17:07:00 sturm Exp $
d8 1
a8 1
VER=		1.8.1.6
@


1.2
log
@- move some things from -main to -devel package where they belong
- use make var MOB the same as firefox & thunderbird
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2007/01/05 14:44:47 kurt Exp $
d10 3
a12 3
PKGNAME=	xulrunner-${VER}p0
PKGNAME-main=	xulrunner-${VER}p0
PKGNAME-devel=  xulrunner-devel-${VER}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d10 3
a12 3
PKGNAME=	xulrunner-${VER}
PKGNAME-main=	xulrunner-${VER}
PKGNAME-devel=  xulrunner-devel-${VER}
d49 1
a49 1
WANTLIB=	c glib-2.0 m pthread
d51 7
a57 6
WANTLIB-main=	${WANTLIB} X11 Xext Xft Xinerama Xrender Xt atk-1.0 \
		cairo fontconfig freetype glitz gmodule-2.0 gobject-2.0 \
		jpeg pango-1.0 pangocairo-1.0 pangoft2-1.0 png stdc++ z

RUN_DEPENDS-devel= :${PKGNAME-main}:devel/xulrunner,-main
LIB_DEPENDS-devel= ${MODGETTEXT_LIB_DEPENDS} IDL-2::devel/libIDL
d104 1
a104 1
MOB=		${WRKSRC}/dist
d120 1
a120 1
	@@cd ${MOB} && ${TAR} -chf - ${dir} | \
d123 1
a123 1
	@@cd ${MOB}/public && ${TAR} -chf - nss | \
d127 1
a127 1
	@@cd ${MOB}/bin && ${TAR} -chf - ${dir} | \
d130 1
a130 1
	@@cd ${MOB}/bin && ${TAR} -chf - *.so.?.? | \
d135 5
a139 5
	${INSTALL_SCRIPT} ${MOB}/bin/xulrunner ${MOB}/bin/xulrunner-config ${PREFIX}/bin/
	${INSTALL_SCRIPT} ${MOB}/bin/run-mozilla.sh ${MOZ}
	${INSTALL_PROGRAM} ${MOB}/bin/regxpcom ${MOB}/bin/xulrunner-bin ${MOB}/bin/mozilla-xremote-client ${MOB}/bin/TestGtkEmbed \
	${MOB}/bin/mangle ${MOB}/bin/nsinstall ${MOB}/bin/shlibsign ${MOB}/bin/xpcshell ${MOB}/bin/xpicleanup ${MOB}/bin/xpidl \
	${MOB}/bin/xpt_dump ${MOB}/bin/xpt_link ${MOB}/bin/xulrunner-stub ${MOZ}
@


1.1.1.1
log
@import xulrunner 1.8.0.4

XULRunner is a single "gecko runtime" installable package that can be
used to bootstrap multiple XUL+XPCOM applications that are as rich as
Firefox and Thunderbird.  It will provide mechanisms for installing,
upgrading, and uninstalling these applications. XULRunner will also
provide libxul, a solution which allows the embedding of Mozilla
technologies in other projects and products.

Based on an initial port by James Wright <jamesw at bsdhosting.co.za>.
Improvements and okay steven@@
@
text
@@


1.1.1.2
log
@import xulrunner 1.9, and implement infrastructure for multiple
xulrunners.  this was necessary for smooth migration, since we want
plugins work for mozilla 1.8 branch too (seamonkey, thunderbird);
they are upwards-compatible if built against 1.8.  however, some
new applications started to depend on 1.9, and also other (non-plugin)
apps will start to migrate so that the old xulrunner can go away
requested by many;  bulk build & pkgpath & bump done by sthen@@
@
text
@d3 1
a3 2
SUBDIR+=	1.8
SUBDIR+=	1.9
d5 138
a142 1
.include <bsd.port.subdir.mk>
@

