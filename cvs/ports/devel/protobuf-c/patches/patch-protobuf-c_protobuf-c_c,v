head	1.1;
access;
symbols
	OPENBSD_6_2:1.1.0.10
	OPENBSD_6_2_BASE:1.1
	OPENBSD_6_1:1.1.0.8
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.6
	OPENBSD_6_0_BASE:1.1
	OPENBSD_5_9:1.1.0.2
	OPENBSD_5_9_BASE:1.1
	OPENBSD_5_8:1.1.0.4
	OPENBSD_5_8_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2015.06.12.10.59.47;	author dcoppa;	state Exp;
branches;
next	;
commitid	4UsGds4FfflHd4dY;


desc
@@


1.1
log
@
Bugfixing update to protobuf-c-1.0.2
@
text
@$OpenBSD$

commit 060c071209638c2c342fad8338e25005b4bd920e
Author: Ilya Lipnitskiy <ilya.lipnitskiy@@gmail.com>
Date:   Tue Nov 18 23:51:37 2014 -0800

protobuf-c.c: Fix a bug when merging optional byte fields

--- protobuf-c/protobuf-c.c.orig	Fri Sep 12 22:32:42 2014
+++ protobuf-c/protobuf-c.c	Fri Jun 12 12:34:06 2015
@@@@ -2001,7 +2001,7 @@@@ merge_messages(ProtobufCMessage *earlier_msg,
 
 				need_to_merge =
 					(e_data != NULL &&
-					 (d_bd != NULL &&
+					 (d_bd == NULL ||
 					  e_data != d_bd->data)) &&
 					(l_data == NULL ||
 					 (d_bd != NULL &&
@
