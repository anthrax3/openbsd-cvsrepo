head	1.1;
access;
symbols
	OPENBSD_6_1:1.1.0.4
	OPENBSD_6_1_BASE:1.1
	OPENBSD_6_0:1.1.0.2
	OPENBSD_6_0_BASE:1.1;
locks; strict;
comment	@# @;


1.1
date	2016.05.17.11.23.18;	author jca;	state Exp;
branches;
next	;
commitid	X8MH3j13Q10KrU2h;


desc
@@


1.1
log
@Add some compat glue for lua53, for tests and the json2lua/lua2json scripts

lua53 flavor not yet hooked to the build.  ok sthen@@
@
text
@$OpenBSD$

unpack moved to table.unpack in lua5.2

--- lua/cjson/util.lua.orig	Mon May 16 22:58:17 2016
+++ lua/cjson/util.lua	Mon May 16 23:05:46 2016
@@@@ -4,6 +4,8 @@@@ local json = require "cjson"
 --
 -- Mark Pulford <mark@@kyne.com.au>
 
+local unpack = unpack or table.unpack
+
 -- Determine with a Lua table can be treated as an array.
 -- Explicitly returns "not an array" for very sparse arrays.
 -- Returns:
@
