head	1.8;
access;
symbols
	OPENBSD_6_1:1.7.0.2
	OPENBSD_6_1_BASE:1.7
	OPENBSD_6_0:1.5.0.2
	OPENBSD_6_0_BASE:1.5
	OPENBSD_5_9:1.2.0.2
	OPENBSD_5_9_BASE:1.2
	edd_20151108:1.1.1.1
	edd:1.1.1;
locks; strict;
comment	@# @;


1.8
date	2017.05.29.15.36.31;	author shadchin;	state Exp;
branches;
next	1.7;
commitid	KqRVWkkK9KEVUNXa;

1.7
date	2017.02.06.15.53.11;	author shadchin;	state Exp;
branches;
next	1.6;
commitid	JGRwpsxBGYdZnLoJ;

1.6
date	2017.01.03.19.19.49;	author landry;	state Exp;
branches;
next	1.5;
commitid	NkZaP5skFWQkYqhM;

1.5
date	2016.04.16.19.06.26;	author shadchin;	state Exp;
branches;
next	1.4;
commitid	wfEd7xGXnB5Lv2RG;

1.4
date	2016.04.15.08.53.49;	author shadchin;	state Exp;
branches;
next	1.3;
commitid	DdvlmL5VDlYoSZZS;

1.3
date	2016.02.27.20.23.04;	author shadchin;	state Exp;
branches;
next	1.2;
commitid	keDRevbPUlbRWQTh;

1.2
date	2016.01.11.11.50.58;	author shadchin;	state Exp;
branches;
next	1.1;
commitid	4I3hfEsKLgCtd3Wv;

1.1
date	2015.11.08.17.17.37;	author edd;	state Exp;
branches
	1.1.1.1;
next	;
commitid	MsX3aeSNNHGhcGma;

1.1.1.1
date	2015.11.08.17.17.37;	author edd;	state Exp;
branches;
next	;
commitid	MsX3aeSNNHGhcGma;


desc
@@


1.8
log
@Update to py-testpath 0.3.1
@
text
@# $OpenBSD: Makefile,v 1.7 2017/02/06 15:53:11 shadchin Exp $

COMMENT =		test utilities working with files and commands

MODPY_EGG_VERSION =	0.3.1
DISTNAME =		testpath-${MODPY_EGG_VERSION}
PKGNAME =		py-${DISTNAME}

CATEGORIES =		devel

HOMEPAGE =		https://github.com/jupyter/testpath

MAINTAINER =		Alexandr Shadchin <shadchin@@openbsd.org>

# MIT
PERMIT_PACKAGE_CDROM =	Yes

MODULES =		lang/python

MODPY_PI =		Yes

FLAVORS =		python3
FLAVOR ?=

BUILD_DEPENDS =		textproc/py-sphinx${MODPY_FLAVOR}
RUN_DEPENDS =		devel/py-pathlib${MODPY_FLAVOR}
TEST_DEPENDS =		${RUN_DEPENDS} \
			devel/py-nose${MODPY_FLAVOR}

post-build:
	cd ${WRKSRC}/doc && PYTHONPATH=${WRKSRC} \
		${LOCALBASE}/bin/sphinx-build${MODPY_BIN_SUFFIX} -N . _build/html

DOCDIR = ${PREFIX}/share/doc/${MODPY_PY_PREFIX}testpath
post-install:
	cp -r ${WRKBUILD}/doc/_build/html ${DOCDIR}
	rm ${DOCDIR}/.buildinfo
	chown -R ${SHAREOWN}:${SHAREGRP} ${DOCDIR}

do-test:
	cd ${WRKSRC} && ${LOCALBASE}/bin/nosetests${MODPY_BIN_SUFFIX}

.include <bsd.port.mk>
@


1.7
log
@fixup distfile name, spotted jca@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2017/01/03 19:19:49 landry Exp $
d5 3
a7 3
MODPY_EGG_VERSION =	0.3
PKGNAME =		py-testpath-${MODPY_EGG_VERSION}
REVISION =		3
a14 9
GH_ACCOUNT =		jupyter
GH_PROJECT =		testpath
GH_TAGNAME =		${MODPY_EGG_VERSION}

BUILD_DEPENDS =		textproc/py-sphinx${MODPY_FLAVOR}
TEST_DEPENDS +=		${RUN_DEPENDS} \
			devel/py-nose${MODPY_FLAVOR}
RUN_DEPENDS +=		devel/py-pathlib${MODPY_FLAVOR}

d20 2
d25 4
a28 1
MAKE_ENV +=	PYTHONPATH=${WRKSRC} SPHINXBUILD=${LOCALBASE}/bin/sphinx-build${MODPY_BIN_SUFFIX}
d30 1
a30 3
# Does not use any setup.py based build system
do-build:
	${MODPY_BIN} -m compileall ${WRKBUILD}/testpath/
a33 1
PREFIX_SITE = ${PREFIX}/lib/python${MODPY_VERSION}/site-packages
d35 1
a35 3
do-install:
	${INSTALL_DATA_DIR} ${PREFIX_SITE}
	cp -r ${WRKBUILD}/testpath ${PREFIX_SITE}
@


1.6
log
@bump ports depending on python3 in devel
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2016/04/16 19:06:26 shadchin Exp $
a5 1
DISTNAME =		${MODPY_EGG_VERSION}
d7 1
a7 1
REVISION =		2
a27 2

WRKSRC = ${WRKDIR}/testpath-${MODPY_EGG_VERSION}
@


1.5
log
@* Switch on py3-sphinx for python3
* Prevent build from calling out to the internet

ok ajacoutot@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2016/04/15 08:53:49 shadchin Exp $
d8 1
a8 1
REVISION =		1
@


1.4
log
@Unbreak after py-sphinx update to 1.4
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2016/02/27 20:23:04 shadchin Exp $
d8 1
a8 1
REVISION =		0
d20 1
a20 1
BUILD_DEPENDS =		textproc/py-sphinx
a28 1
USE_GMAKE =		Yes
d35 2
d40 2
a41 1
	cd ${WRKBUILD}/doc && env PYTHONPATH=.. ${GMAKE} html
@


1.3
log
@Update to py-testpath 0.3
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2016/01/11 11:50:58 shadchin Exp $
d8 1
@


1.2
log
@Add python3 flavor and take maintainer.

ok sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2015/11/08 17:17:37 edd Exp $
d5 1
a5 1
MODPY_EGG_VERSION =	0.2
a7 1
REVISION =		0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD: Makefile.template,v 1.72 2015/04/08 17:53:19 sthen Exp $
d8 1
d14 2
d22 2
a23 2
			devel/py-nose
RUN_DEPENDS +=		devel/py-pathlib
d33 3
d42 1
a42 1
DOCDIR = ${PREFIX}/share/doc/py-testpath
d51 1
a51 1
	cd ${WRKSRC} && ${LOCALBASE}/bin/nosetests tests
@


1.1.1.1
log
@Import devel/py-testpath.

Needed for upcoming ipython update.

Input from benoit@@, sthen@@ and shadchin@@.

OK sthen@@ and shadchin@@. Thanks.

@
text
@@
