head	1.1;
branch	1.1.1;
access;
symbols
	OPENBSD_6_1:1.1.1.1.0.8
	OPENBSD_6_1_BASE:1.1.1.1
	OPENBSD_6_0:1.1.1.1.0.6
	OPENBSD_6_0_BASE:1.1.1.1
	OPENBSD_5_9:1.1.1.1.0.2
	OPENBSD_5_9_BASE:1.1.1.1
	OPENBSD_5_8:1.1.1.1.0.4
	OPENBSD_5_8_BASE:1.1.1.1
	bmercer_20150528:1.1.1.1
	bmercer:1.1.1;
locks; strict;
comment	@# @;


1.1
date	2015.05.28.23.28.25;	author bmercer;	state Exp;
branches
	1.1.1.1;
next	;
commitid	OqeHseRFUHnN9Kru;

1.1.1.1
date	2015.05.28.23.28.25;	author bmercer;	state Exp;
branches;
next	;
commitid	OqeHseRFUHnN9Kru;


desc
@@



1.1
log
@Initial revision
@
text
@$OpenBSD: patch-libgcc_Makefile_in,v 1.1 2010/10/22 15:20:04 jasper Exp $

Using $(INSTALL_DATA) and chmod generates errors as the operation
is not permitted. So use plain copy mode and chown/chgrp
in the post-install target.

--- libgcc/Makefile.in.orig	Wed Jan  8 11:37:08 2014
+++ libgcc/Makefile.in	Wed May 13 16:41:20 2015
@@@@ -1023,7 +1023,7 @@@@ libgcc-extra-parts: $(EXTRA_PARTS)
 	parts="$(EXTRA_PARTS)";					\
 	for file in $$parts; do					\
 	  rm -f $(gcc_objdir)$(MULTISUBDIR)/$$file;		\
-	  $(INSTALL_DATA) $$file $(gcc_objdir)$(MULTISUBDIR)/;	\
+	  install -c $$file $(gcc_objdir)$(MULTISUBDIR)/;	\
 	  case $$file in 					\
 	    *.a)						\
 	      $(RANLIB) $(gcc_objdir)$(MULTISUBDIR)/$$file ;;	\
@@@@ -1053,7 +1053,7 @@@@ install-unwind_h-forbuild:
 # internal headers are copied by gcc's install.
 install-unwind_h:
 	$(mkinstalldirs) $(DESTDIR)$(libsubdir)/include
-	$(INSTALL_DATA) unwind.h $(DESTDIR)$(libsubdir)/include
+	install -c unwind.h $(DESTDIR)$(libsubdir)/include
 
 all: install-unwind_h-forbuild
 
@@@@ -1075,7 +1075,7 @@@@ install-libunwind:
 
 	# NOTE: Maybe this should go into $(inst_libdir), but this
 	# is where the old mklibgcc.in put it.
-	$(INSTALL_DATA) libunwind.a $(DESTDIR)$(inst_slibdir)/
+	install -c libunwind.a $(DESTDIR)$(inst_slibdir)/
 	chmod 644 $(DESTDIR)$(inst_slibdir)/libunwind.a
 	$(RANLIB) $(DESTDIR)$(inst_slibdir)/libunwind.a
 
@@@@ -1086,7 +1086,7 @@@@ install-libunwind:
 install-shared:
 	$(mkinstalldirs) $(DESTDIR)$(inst_libdir)
 
-	$(INSTALL_DATA) libgcc_eh.a $(DESTDIR)$(inst_libdir)/
+	install -c libgcc_eh.a $(DESTDIR)$(inst_libdir)/
 	chmod 644 $(DESTDIR)$(inst_libdir)/libgcc_eh.a
 	$(RANLIB) $(DESTDIR)$(inst_libdir)/libgcc_eh.a
 
@@@@ -1097,17 +1097,15 @@@@ install-shared:
 install-leaf: $(install-shared) $(install-libunwind)
 	$(mkinstalldirs) $(DESTDIR)$(inst_libdir)
 
-	$(INSTALL_DATA) libgcc.a $(DESTDIR)$(inst_libdir)/
-	chmod 644 $(DESTDIR)$(inst_libdir)/libgcc.a
+	install -c libgcc.a $(DESTDIR)$(inst_libdir)/
 	$(RANLIB) $(DESTDIR)$(inst_libdir)/libgcc.a
-	$(INSTALL_DATA) libgcov.a $(DESTDIR)$(inst_libdir)/
-	chmod 644 $(DESTDIR)$(inst_libdir)/libgcov.a
+	install -c libgcov.a $(DESTDIR)$(inst_libdir)/
 	$(RANLIB) $(DESTDIR)$(inst_libdir)/libgcov.a
 
 	parts="$(INSTALL_PARTS)";				\
 	for file in $$parts; do					\
 	  rm -f $(DESTDIR)$(inst_libdir)/$$file;		\
-	  $(INSTALL_DATA) $$file $(DESTDIR)$(inst_libdir)/;	\
+	  install -c $$file $(DESTDIR)$(inst_libdir)/;	\
 	  case $$file in 					\
 	    *.a)						\
 	      $(RANLIB) $(gcc_objdir)$(MULTISUBDIR)/$$file ;;	\
@


1.1.1.1
log
@Import devel/arm-none-eabi. OK sthen@@, port is from Dave Vandervies.
@
text
@@
