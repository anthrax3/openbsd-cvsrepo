head	1.28;
access;
symbols
	OPENBSD_6_0:1.28.0.2
	OPENBSD_6_0_BASE:1.28
	OPENBSD_5_9:1.27.0.4
	OPENBSD_5_9_BASE:1.27
	OPENBSD_5_8:1.27.0.6
	OPENBSD_5_8_BASE:1.27
	OPENBSD_5_7:1.27.0.2
	OPENBSD_5_7_BASE:1.27
	OPENBSD_5_6:1.26.0.4
	OPENBSD_5_6_BASE:1.26
	OPENBSD_5_5:1.26.0.2
	OPENBSD_5_5_BASE:1.26
	OPENBSD_5_4:1.25.0.2
	OPENBSD_5_4_BASE:1.25
	OPENBSD_5_3:1.24.0.4
	OPENBSD_5_3_BASE:1.24
	OPENBSD_5_2:1.24.0.2
	OPENBSD_5_2_BASE:1.24
	OPENBSD_5_1_BASE:1.21
	OPENBSD_5_1:1.21.0.2
	OPENBSD_5_0:1.20.0.2
	OPENBSD_5_0_BASE:1.20
	OPENBSD_4_9:1.17.0.2
	OPENBSD_4_9_BASE:1.17
	OPENBSD_4_8:1.12.0.2
	OPENBSD_4_8_BASE:1.12
	OPENBSD_4_7:1.8.0.10
	OPENBSD_4_7_BASE:1.8
	OPENBSD_4_6:1.8.0.8
	OPENBSD_4_6_BASE:1.8
	OPENBSD_4_5:1.8.0.6
	OPENBSD_4_5_BASE:1.8
	OPENBSD_4_4:1.8.0.4
	OPENBSD_4_4_BASE:1.8
	OPENBSD_4_3:1.8.0.2
	OPENBSD_4_3_BASE:1.8
	OPENBSD_4_2:1.4.0.2
	OPENBSD_4_2_BASE:1.4
	OPENBSD_4_1:1.3.0.2
	OPENBSD_4_1_BASE:1.3
	OPENBSD_4_0:1.2.0.6
	OPENBSD_4_0_BASE:1.2
	OPENBSD_3_9:1.2.0.4
	OPENBSD_3_9_BASE:1.2
	OPENBSD_3_8:1.2.0.2
	OPENBSD_3_8_BASE:1.2
	aanriot_20050731:1.1.1.1
	aanriot:1.1.1;
locks; strict;
comment	@# @;


1.28
date	2016.06.29.16.14.40;	author espie;	state Exp;
branches;
next	1.27;
commitid	c1yQMbJbfo0CFBcL;

1.27
date	2014.11.01.00.09.24;	author jca;	state Exp;
branches;
next	1.26;
commitid	bT4BeO3Odv7O1ZXa;

1.26
date	2013.11.09.23.19.02;	author naddy;	state Exp;
branches;
next	1.25;

1.25
date	2013.03.11.10.50.01;	author espie;	state Exp;
branches;
next	1.24;

1.24
date	2012.07.20.12.03.50;	author jasper;	state Exp;
branches;
next	1.23;

1.23
date	2012.06.25.15.45.14;	author espie;	state Exp;
branches;
next	1.22;

1.22
date	2012.02.22.07.43.58;	author ajacoutot;	state Exp;
branches;
next	1.21;

1.21
date	2011.11.03.20.16.43;	author naddy;	state Exp;
branches;
next	1.20;

1.20
date	2011.06.20.20.28.44;	author robert;	state Exp;
branches;
next	1.19;

1.19
date	2011.05.18.19.38.15;	author matthieu;	state Exp;
branches;
next	1.18;

1.18
date	2011.05.05.12.30.16;	author dcoppa;	state Exp;
branches;
next	1.17;

1.17
date	2010.11.26.07.58.43;	author espie;	state Exp;
branches;
next	1.16;

1.16
date	2010.11.15.19.45.56;	author espie;	state Exp;
branches;
next	1.15;

1.15
date	2010.11.06.10.54.53;	author landry;	state Exp;
branches;
next	1.14;

1.14
date	2010.09.30.15.51.54;	author sthen;	state Exp;
branches;
next	1.13;

1.13
date	2010.08.30.22.03.58;	author jasper;	state Exp;
branches;
next	1.12;

1.12
date	2010.07.22.12.13.17;	author ajacoutot;	state Exp;
branches;
next	1.11;

1.11
date	2010.07.22.12.08.58;	author ajacoutot;	state Exp;
branches;
next	1.10;

1.10
date	2010.07.22.11.37.15;	author ajacoutot;	state Exp;
branches;
next	1.9;

1.9
date	2010.07.22.05.32.34;	author ajacoutot;	state Exp;
branches;
next	1.8;

1.8
date	2008.01.04.18.38.51;	author espie;	state Exp;
branches;
next	1.7;

1.7
date	2008.01.04.17.48.34;	author espie;	state Exp;
branches;
next	1.6;

1.6
date	2007.10.01.11.42.30;	author steven;	state Exp;
branches;
next	1.5;

1.5
date	2007.09.16.02.52.57;	author merdely;	state Exp;
branches;
next	1.4;

1.4
date	2007.03.18.21.43.50;	author matthieu;	state Exp;
branches;
next	1.3;

1.3
date	2006.11.24.17.35.32;	author sturm;	state Exp;
branches;
next	1.2;

1.2
date	2005.08.09.15.52.46;	author aanriot;	state Exp;
branches;
next	1.1;

1.1
date	2005.07.30.23.35.31;	author aanriot;	state Exp;
branches
	1.1.1.1;
next	;

1.1.1.1
date	2005.07.30.23.35.31;	author aanriot;	state Exp;
branches;
next	;


desc
@@


1.28
log
@add is-branch to all trivial ports that exist as multiple branches.
@
text
@# $OpenBSD: Makefile,v 1.27 2014/11/01 00:09:24 jca Exp $

VERSION=	1.9
DISTNAME=	automake-${VERSION}.6
REVISION=	12
PKGSPEC=	automake->=${VERSION},<1.10

MODULES=		lang/python

MODPY_BUILDDEP=		No
MODPY_RUNDEP=		No

AUTOCONF_VERSION=	2.59

BUILD_DEPENDS=		${RUN_DEPENDS}
RUN_DEPENDS=		${MODGNU_AUTOCONF_DEPENDS}

CONFIGURE_STYLE=	gnu
MAKE_ENV +=		AUTOCONF_VERSION=${AUTOCONF_VERSION}
CONFIGURE_ENV +=	AUTOCONF_VERSION=${AUTOCONF_VERSION}

CONFIGURE_ARGS=		--infodir=${PREFIX}/info
MAKE_FLAGS+=		pkgvdatadir=${PREFIX}/share/automake${SUFFIX} \
			APIVERSION=${VERSION}

TEST_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
			${MODPY_RUN_DEPENDS} \
			devel/libtool \
			devel/gmake \
			archivers/bzip2 \
			devel/bison \
			emacs->=24:editors/emacs \
			print/texlive/base \
			devel/dejagnu

TEST_ENV=		AUTOCONF_VERSION=${AUTOCONF_VERSION} \
			MAKE=${GMAKE}

post-patch:
	cd ${WRKSRC}; touch aclocal.m4 Makefile.in configure

do-test:
	    ln -sf ${MODPY_BIN} ${WRKDIR}/bin/python
	    @@cd ${WRKBUILD} && \
	    	exec ${SETENV} ${MAKE_ENV} ${TEST_ENV} \
		    ${MAKE_PROGRAM} ${ALL_TEST_FLAGS} -f ${MAKE_FILE} \
		    ${TEST_TARGET}

pre-configure:
	${SUBST_CMD} ${WRKSRC}/doc/automake.texi

post-install:
	cd ${PREFIX}/info && mv automake.info automake${SUFFIX}.info
	perl -pi -e "s,automake\: \(automake\),automake-1\.9\: \(automake-1\.9\)," \
		${PREFIX}/info/automake${SUFFIX}.info
	perl -pi -e "s,aclocal\: \(automake\),aclocal: \(automake-1\.9\)," \
		${PREFIX}/info/automake${SUFFIX}.info

.for f in info-1 info-2
	cd ${PREFIX}/info && mv automake.${f} automake${SUFFIX}.${f} \
		&& perl -pi -e "s,automake.${f},automake${SUFFIX}.${f}," \
		${PREFIX}/info/automake${SUFFIX}.info
.endfor

.include <bsd.port.mk>
@


1.27
log
@Force tests against the newest Emacs release.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.26 2013/11/09 23:19:02 naddy Exp $
d5 1
a5 1
REVISION=	11
@


1.26
log
@move http://www.gnu.org to https
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.25 2013/03/11 10:50:01 espie Exp $
d32 1
a32 1
			editors/emacs21 \
@


1.25
log
@PERMIT_* / REGRESS->TEST sweep
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.24 2012/07/20 12:03:50 jasper Exp $
d5 1
a5 1
REVISION=	10
@


1.24
log
@Apply patches for two security issues:
- Fix insecure permissions for directories in distfile build tree. CVE-2009-4029
- Fix insecure permissions used for the top of the distfile build tree. CVE-2012-3386

This was already tested in a bulk build by me as part of a larger diff

from brad
ok aja@@ sthen@@ espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.23 2012/06/25 15:45:14 espie Exp $
d26 1
a26 1
REGRESS_DEPENDS=	${MODGNU_AUTOCONF_DEPENDS} \
d36 1
a36 1
REGRESS_ENV=		AUTOCONF_VERSION=${AUTOCONF_VERSION} \
d42 1
a42 1
do-regress:
d45 3
a47 3
	    	exec ${SETENV} ${MAKE_ENV} ${REGRESS_ENV} \
		    ${MAKE_PROGRAM} ${ALL_REGRESS_FLAGS} -f ${MAKE_FILE} \
		    ${REGRESS_TARGET}
@


1.23
log
@fix @@conflict marker
while there, put common things in Makefile.inc
bump revs according to discrepancies in COMMENT and in @@conflict
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.22 2012/02/22 07:43:58 ajacoutot Exp $
d5 2
a6 2
REVISION=	9
PKGSPEC =	automake->=${VERSION},<1.10
@


1.22
log
@The TESTS_ENVIRONMENT is used internally and not as the port
infrastructure is trying to use it. So fix how the variables are passed
in for the regress tests.

from Brad
@
text
@d1 1
a1 3
# $OpenBSD: Makefile,v 1.21 2011/11/03 20:16:43 naddy Exp $

COMMENT=	GNU standards-compliant Makefile generator
d5 1
a5 1
REVISION=	8
a7 11
CATEGORIES=	devel
MASTER_SITES=	${MASTER_SITE_GNU:=automake/}

HOMEPAGE=	http://www.gnu.org/software/automake/

# GPLv2
PERMIT_PACKAGE_CDROM=	Yes
PERMIT_PACKAGE_FTP=	Yes
PERMIT_DISTFILES_CDROM=	Yes
PERMIT_DISTFILES_FTP=	Yes

a17 1
SUFFIX=			-${VERSION}
a24 1
SUBST_VARS=		SUFFIX
@


1.21
log
@update timestamps so we won't re-run configure in build stage
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.20 2011/06/20 20:28:44 robert Exp $
d51 1
a51 1
TESTS_ENVIRONMENT=	AUTOCONF_VERSION=${AUTOCONF_VERSION} \
d60 1
a60 2
	    	exec ${SETENV} ${MAKE_ENV} \
		TESTS_ENVIRONMENT='${TESTS_ENVIRONMENT}' \
@


1.20
log
@Add missing python versions to automake to make them work with python 2.6
and 2.7, since a lot of software use these macros to detect the installed
python version and since we use 2.7 as the default now, these were all
failing.

patch from Brad, ok jasper@@ and sthen@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.19 2011/05/18 19:38:15 matthieu Exp $
d55 1
a55 2
	touch ${WRKSRC}/aclocal.m4
	touch ${WRKSRC}/Makefile.in
@


1.19
log
@Use ${SHELL} to run install-sh since it may not be executable.
ok phessler@@, landry@@ who did run this through a full ports build.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.18 2011/05/05 12:30:16 dcoppa Exp $
d7 1
a7 1
REVISION=	7
@


1.18
log
@Avoid a warning from perl-5.11
(upstream git commit 375912c466b28a6121d351b9ff5513133a1c7227)

OK landry@@, jasper@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.17 2010/11/26 07:58:43 espie Exp $
d7 1
a7 1
REVISION=	6
@


1.17
log
@PKGSPEC for automake as well, finish fixing those ports
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.16 2010/11/15 19:45:56 espie Exp $
d7 1
a7 1
REVISION=	5
@


1.16
log
@move depends to new style
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.15 2010/11/06 10:54:53 landry Exp $
d8 1
@


1.15
log
@Add MODGNU_AUTOCONF_DEPENDS to BUILD_DEPENDS as those automake ports
check for autoconf existence during configure. Propagate
AUTOCONF_VERSION to CONFIGURE/MAKE_ENV to make sure the needed version
is found.
'go ahead' espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.14 2010/09/30 15:51:54 sthen Exp $
d42 7
a48 7
			::devel/libtool \
			::devel/gmake \
			::archivers/bzip2 \
			::devel/bison \
			::editors/emacs21 \
			::print/texlive/base \
			::devel/dejagnu
@


1.14
log
@use MODPY_BUILDDEP not MODPY_BUILDEP; no package change when built
without python installed -> no bump.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.13 2010/08/30 22:03:58 jasper Exp $
d27 1
a27 1
BUILD_DEPENDS=		::devel/metaauto
d32 3
@


1.13
log
@- first round of bumps for devel
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.12 2010/07/22 12:13:17 ajacoutot Exp $
d22 1
a22 1
MODPY_BUILDEP=		No
@


1.12
log
@Err, forgot to set the license marker in previous, going into autoslap
mode.
No pkg change.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.11 2010/07/22 12:08:58 ajacoutot Exp $
d7 1
a7 1
REVISION=	4
@


1.11
log
@Make all info patches consistent so info files can be installed without
warnings (and actually do install the info file from version 1.4).
Do not hardcode gmake.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.10 2010/07/22 11:37:15 ajacoutot Exp $
d14 1
@


1.10
log
@Fix regress: don't depend on ::lang/python/2.3 it's been removed long
ago. Let's use the python MODULE so that python* tests are actually run
but set MODPY_BUILDEP and MODPY_RUNDEP to No.

Prevent install-info from whining when we have several versions
installed.
Regen patches.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.9 2010/07/22 05:32:34 ajacoutot Exp $
d7 1
a7 1
REVISION=	3
@


1.9
log
@One dependency on libtool is enough.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.8 2008/01/04 18:38:51 espie Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p2
d19 5
d37 1
a41 1
			::lang/python/2.3 \
d54 1
d60 3
@


1.8
log
@do the same thing with REGRESS_FLAGS as FAKE_FLAGS
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.7 2008/01/04 17:48:34 espie Exp $
a35 1
			::devel/libtool \
@


1.7
log
@tweak FAKE_FLAGS semantics to saner defaults.
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.6 2007/10/01 11:42:30 steven Exp $
d53 1
a53 1
		    ${MAKE_PROGRAM} ${REGRESS_FLAGS} -f ${MAKE_FILE} \
@


1.6
log
@switch teTeX -> texlive

discussed with sturm and mbalmer
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.5 2007/09/16 02:52:57 merdely Exp $
a28 1
FAKE_FLAGS+=		${MAKE_FLAGS}
@


1.5
log
@Remove quotes surrounding COMMENT*/PERMIT_*/BROKEN
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.4 2007/03/18 21:43:50 matthieu Exp $
d40 1
a40 1
			::print/teTeX/base \
@


1.4
log
@Don't assume that mkinstalldirs and install-sh checked out of CVS will
be executable. This is needed for xenocara builds. ok naddy@@, espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.3 2006/11/24 17:35:32 sturm Exp $
d3 1
a3 1
COMMENT=	"GNU standards-compliant Makefile generator"
@


1.3
log
@bump PKGNAME after dependency changes from gnu.port.mk
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.2 2005/08/09 15:52:46 aanriot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p1
d45 4
@


1.2
log
@- fix info files.
- remove useless conflict.

"go ahead" espie@@
@
text
@d1 1
a1 1
# $OpenBSD: Makefile,v 1.1.1.1 2005/07/30 23:35:31 aanriot Exp $
d7 1
a7 1
PKGNAME=	${DISTNAME}p0
@


1.1
log
@Initial revision
@
text
@d1 1
a1 1
# $OpenBSD$
d7 1
d26 2
a27 2
MAKE_FLAGS+=		MAKEINFO="makeinfo --no-split" \
			pkgvdatadir=${PREFIX}/share/automake${SUFFIX} \
d53 13
a66 1

@


1.1.1.1
log
@import automake 1.9.

inputs from many, ok espie@@
@
text
@@
