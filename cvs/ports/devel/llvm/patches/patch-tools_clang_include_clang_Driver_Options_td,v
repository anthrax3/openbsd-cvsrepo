head	1.8;
access;
symbols
	OPENBSD_6_0:1.6.0.2
	OPENBSD_6_0_BASE:1.6
	OPENBSD_5_9:1.4.0.2
	OPENBSD_5_9_BASE:1.4
	OPENBSD_5_8:1.4.0.4
	OPENBSD_5_8_BASE:1.4
	OPENBSD_5_7:1.3.0.4
	OPENBSD_5_7_BASE:1.3
	OPENBSD_5_6:1.3.0.2
	OPENBSD_5_6_BASE:1.3
	OPENBSD_5_5:1.1.0.4
	OPENBSD_5_5_BASE:1.1
	OPENBSD_5_4:1.1.0.2
	OPENBSD_5_4_BASE:1.1;
locks; strict;
comment	@# @;


1.8
date	2017.02.10.09.37.43;	author ajacoutot;	state Exp;
branches;
next	1.7;
commitid	fevyFq3hanzfmR8U;

1.7
date	2016.10.07.08.55.30;	author ajacoutot;	state Exp;
branches;
next	1.6;
commitid	9CZYQ6vy0MJoEWYH;

1.6
date	2016.05.14.20.36.36;	author ajacoutot;	state Exp;
branches;
next	1.5;
commitid	Ww8D7gwHYMZAZd2q;

1.5
date	2016.03.05.15.31.41;	author pascal;	state Exp;
branches;
next	1.4;
commitid	Hqi865xYWk2i2UMI;

1.4
date	2015.04.09.22.25.02;	author sthen;	state Exp;
branches;
next	1.3;
commitid	By0YomZj9fqvzzim;

1.3
date	2014.06.13.22.29.40;	author brad;	state Exp;
branches;
next	1.2;
commitid	c2sJcOVE6BwRjMcT;

1.2
date	2014.04.18.09.30.48;	author brad;	state Exp;
branches;
next	1.1;

1.1
date	2013.06.21.22.09.12;	author brad;	state Exp;
branches;
next	;


desc
@@


1.8
log
@Update to llvm-4.0.0rc2.
- survived a bulk on i386 and amd64

from Brad (maintainer)
@
text
@$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.7 2016/10/07 08:55:30 ajacoutot Exp $

Alias the command line parameter -p to -pg.

--- tools/clang/include/clang/Driver/Options.td.orig	Fri Jan 13 20:46:38 2017
+++ tools/clang/include/clang/Driver/Options.td	Fri Jan 13 21:10:28 2017
@@@@ -1945,7 +1945,7 @@@@ def pthreads : Flag<["-"], "pthreads">;
 def pthread : Flag<["-"], "pthread">, Flags<[CC1Option]>,
   HelpText<"Support POSIX threads in generated code">;
 def no_pthread : Flag<["-"], "no-pthread">, Flags<[CC1Option]>;
-def p : Flag<["-"], "p">;
+def p : Flag<["-"], "p">, Alias<pg>;
 def pie : Flag<["-"], "pie">;
 def read__only__relocs : Separate<["-"], "read_only_relocs">;
 def remap : Flag<["-"], "remap">;
@


1.7
log
@Update to LLVM 3.9.0.
Been through bulks on amd64 / i386 by sthen@@ and naddy@@ respectively.

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.6 2016/05/14 20:36:36 ajacoutot Exp $
d5 3
a7 3
--- tools/clang/include/clang/Driver/Options.td.orig	Mon Jul 18 13:49:40 2016
+++ tools/clang/include/clang/Driver/Options.td	Thu Aug 11 21:58:52 2016
@@@@ -1816,7 +1816,7 @@@@ def pthreads : Flag<["-"], "pthreads">;
@


1.6
log
@Update to llvm-3.8.0.

from Brad (maintainer)
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.5 2016/03/05 15:31:41 pascal Exp $
d5 3
a7 3
--- tools/clang/include/clang/Driver/Options.td.orig	Wed Jan  6 16:27:42 2016
+++ tools/clang/include/clang/Driver/Options.td	Fri Mar 25 21:50:14 2016
@@@@ -1682,7 +1682,7 @@@@ def pthreads : Flag<["-"], "pthreads">;
@


1.5
log
@Update to LLVM 3.7.1.  This version is modified to use C++ includes from
ports GCC and link to libestdc++.

Currently, this still breaks mail/mozilla-thunderbird, which will be taken care
of shortly.

feedback/testing from jsg landry mmcc semarie aja naddy (hope I didn't forget
anyone)

ok landry robert
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.4 2015/04/09 22:25:02 sthen Exp $
d5 3
a7 3
--- tools/clang/include/clang/Driver/Options.td.orig	Fri Jul 31 00:47:41 2015
+++ tools/clang/include/clang/Driver/Options.td	Wed Sep  9 10:44:20 2015
@@@@ -1560,7 +1560,7 @@@@ def pthreads : Flag<["-"], "pthreads">;
@


1.4
log
@Backport commit from upstream Clang/LLVM, from Brad (maintainer).

r211785
Implement the -fuse-ld= option.

This commit implements the -fuse-ld= option, so that the user
can specify -fuse-ld=bfd to use ld.bfd.
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.3 2014/06/13 22:29:40 brad Exp $
d5 3
a7 19
r211785
Implement the -fuse-ld= option.

This commit implements the -fuse-ld= option, so that the user
can specify -fuse-ld=bfd to use ld.bfd.

--- tools/clang/include/clang/Driver/Options.td.orig	Sun Mar  2 22:03:58 2014
+++ tools/clang/include/clang/Driver/Options.td	Thu Feb 26 07:03:04 2015
@@@@ -253,7 +253,7 @@@@ def Qn : Flag<["-"], "Qn">;
 def Qunused_arguments : Flag<["-"], "Qunused-arguments">, Flags<[DriverOption, CoreOption]>,
   HelpText<"Don't emit warning for unused driver arguments">;
 def Q : Flag<["-"], "Q">;
-def R : Flag<["-"], "R">;
+def R : JoinedOrSeparate<["-"], "R">, Flags<[RenderJoined]>;
 def S : Flag<["-"], "S">, Flags<[DriverOption,CC1Option]>, Group<Action_Group>,
   HelpText<"Only run preprocess and compilation steps">;
 def Tbss : JoinedOrSeparate<["-"], "Tbss">, Group<T_Group>;
@@@@ -1244,7 +1244,7 @@@@ def private__bundle : Flag<["-"], "private_bundle">;
 def pthreads : Flag<["-"], "pthreads">;
d10 1
a15 9
@@@@ -1495,7 +1495,7 @@@@ def fprofile_dir : Joined<["-"], "fprofile-dir=">, Gro
 
 defm profile_use : BooleanFFlag<"profile-use">, Group<clang_ignored_f_Group>;
 def fprofile_use_EQ : Joined<["-"], "fprofile-use=">, Group<clang_ignored_f_Group>;
-def fuse_ld_EQ : Joined<["-"], "fuse-ld=">, Group<clang_ignored_f_Group>;
+def fuse_ld_EQ : Joined<["-"], "fuse-ld=">, Group<f_Group>;
 
 defm align_functions : BooleanFFlag<"align-functions">, Group<clang_ignored_f_Group>;
 def falign_functions_EQ : Joined<["-"], "falign-functions=">, Group<clang_ignored_f_Group>;
@


1.3
log
@Some fixes from uptream..

- Use dwarf-2 by default on OpenBSD and FreeBSD.
- Make VSELECT selection terminate in cases where the condition type has
  to be split and the result type widened.
  (fixes an OOM crash with the vectorizer on i386 if not utilizing SSE2
   or newer)
- The last step of _mm_cvtps_pi16 should use _mm_packs_pi32, which is a
  function that reads two __m64 values and packs four 32-bit values into
  four 16-bit values.

Fix profiling..

- Alias the command line parameter -p to -pg.

From Bitrig

ok sthen@@
@
text
@d1 1
a1 1
$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.2 2014/04/18 09:30:48 brad Exp $
d5 6
d12 1
a12 1
+++ tools/clang/include/clang/Driver/Options.td	Thu Jun  5 00:23:11 2014
d31 9
@


1.2
log
@Update to LLVM 3.5 (trunk) snapshot just before switching to an unconditional
C++11 codebase.

This brings in a number of improvements over 3.4 including..
X86 assembler with 16-bit support
Much improved SPARC backend
stack protector strong support

ok sthen@@
@
text
@d1 6
a6 3
$OpenBSD: patch-tools_clang_include_clang_Driver_Options_td,v 1.1 2013/06/21 22:09:12 brad Exp $
--- tools/clang/include/clang/Driver/Options.td.orig	Fri Jan 31 06:34:49 2014
+++ tools/clang/include/clang/Driver/Options.td	Fri Jan 31 06:43:54 2014
d16 9
@


1.1
log
@Update to LLVM 3.3.

ok sthen@@
@
text
@d1 12
a12 11
$OpenBSD$
--- tools/clang/include/clang/Driver/Options.td.orig	Tue Jun  4 23:41:19 2013
+++ tools/clang/include/clang/Driver/Options.td	Tue Jun  4 23:41:50 2013
@@@@ -1004,6 +1004,7 @@@@ def nodefaultlibs : Flag<["-"], "nodefaultlibs">;
 def nofixprebinding : Flag<["-"], "nofixprebinding">;
 def nolibc : Flag<["-"], "nolibc">;
 def nomultidefs : Flag<["-"], "nomultidefs">;
+def nopie : Flag<["-"], "nopie">;
 def noprebind : Flag<["-"], "noprebind">;
 def noseglinkedit : Flag<["-"], "noseglinkedit">;
 def nostartfiles : Flag<["-"], "nostartfiles">;
@

