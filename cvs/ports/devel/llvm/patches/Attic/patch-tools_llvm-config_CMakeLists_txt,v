head	1.2;
access;
symbols
	OPENBSD_5_2:1.1.0.2
	OPENBSD_5_2_BASE:1.1;
locks; strict;
comment	@# @;


1.2
date	2012.08.20.08.12.47;	author dcoppa;	state dead;
branches;
next	1.1;

1.1
date	2012.06.14.09.32.00;	author dcoppa;	state Exp;
branches;
next	;


desc
@@


1.2
log
@Remove '-lpthread'->'-pthread' hacks
@
text
@$OpenBSD: patch-tools_llvm-config_CMakeLists_txt,v 1.1 2012/06/14 09:32:00 dcoppa Exp $

Use '-pthread', not '-lpthread'.

--- tools/llvm-config/CMakeLists.txt.orig	Mon Jun 11 15:49:19 2012
+++ tools/llvm-config/CMakeLists.txt	Mon Jun 11 15:49:34 2012
@@@@ -11,7 +11,7 @@@@ set(SEDSCRIPT_OBJPATH ${CMAKE_CURRENT_BINARY_DIR}/Buil
 # Compute the substitution values for various items.
 get_system_libs(LLVM_SYSTEM_LIBS_LIST)
 foreach(l ${LLVM_SYSTEM_LIBS_LIST})
-  set(SYSTEM_LIBS ${SYSTEM_LIBS} "-l${l}")
+  set(SYSTEM_LIBS ${SYSTEM_LIBS} "-${l}")
 endforeach()
 set(C_FLGS "${CMAKE_C_FLAGS} ${CMAKE_C_FLAGS_${uppercase_CMAKE_BUILD_TYPE}} ${LLVM_DEFINITIONS}")
 set(CXX_FLGS "${CMAKE_CXX_FLAGS} ${CMAKE_CXX_FLAGS_${uppercase_CMAKE_BUILD_TYPE}} ${LLVM_DEFINITIONS}")
@


1.1
log
@Fix libpthread linking (use '-pthread' instead of '-lpthread') for
cmake-based ports that use "CHECK_LIBRARY_EXISTS(pthread ...)".

Fix libpthread linking for devel/llvm too (additional care was
needed).

No fallout in a bulk build: thanks landry!
@
text
@d1 1
a1 1
$OpenBSD$
@

